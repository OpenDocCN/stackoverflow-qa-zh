# StackOverflow 问答 10593000-10593999

# dns - 我可以将一个域别名为另一个域吗？

> ID：10593002
> 
> 赞同：3
> 
> 时间：2012-05-15T01:15:15.263
> 
> 标签：dns, alias

我正在合并两个 DNS 域。它们是内部的，因此我不必担心适合主 DNS 系统。它们基本相同：即它们包含大部分相同的主机。

我想要做的是为其中一个域创建一个别名。

RFC 说您不能拥有与 cname（或者可能是 A 记录）相同的 NS 记录或 MX 记录，因此我创建了一个只有 cname 的区域并且它可以工作：

区域 1 = example.com（普通域）
尝试 1：
区域 2 = sample.internal（具有单个别名的域）
不幸的是 windows（它必须是 windows，不是吗）有助于不断添加 ns 记录。呸呸呸。
尝试 2：
区域 2 = 内部（一个域）
包含正常的 gumpf 和一个 cname

```
sample CNAME example.com. 
```

但两者都给出了相同的结果：

```
nslookup sample.internal
Server:  ns.example.com
Address:  172.16.xx.xx

Name:    example.com
Addresses:  172.16.xx.xx
      172.16.xx.xx
Aliases:  sample.internal 
```

但是这个 fred.example.com 存在的查找不起作用：

```
nslookup fred.sample.internal
Server:  ns.example.com
Address:  172.16.xx.xx

*** ns.example.com can't find fred.sample.internal: Non-existent domain 
```

是否可以在别名域中进行递归查找？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-20T02:59:34.443

是的你可以。使用 DNS 有两种主要方法来完成此操作（我将使用“BIND”配置示例）：

1.  使用 DNAME（代表团名称）记录
2.  在 BIND 配置中重载区域文件

第一个选项留下了它的起源和设置方式的踪迹，而第二个选项最容易实施，但需要仔细规划并限制区域使用。

### DNAME 方法

假设您希望“bad.com”中的每个主机都访问“good.com”。首先在“named.conf”中设置区域：

```
// Malicious external domain, redirected to "good.com"
zone "bad.com" in {
    type master;
    file "security/good.com";
    check-names ignore;
}; 
```

“good.com”的区域文件*（记住，这是我们要重定向**到**的区域）*看起来像这样：

```
; Name:         security/good.com
; Date:          2/19/2016
; Purpose:      General-use redirection to "good.com" using DNAME 

$TTL 3600
@        IN      SOA     dns.good.com. admin.dns.com. (
                         2016021900 
                         7200 
                         600 
                         2592000 
                         3600 )

         IN      NS      dns1.good.com.
         IN      NS      dns2.good.com.

         IN      DNAME   good.com. 
```

当您重新加载名称服务器时，“bad.com”区域中的任何 DNS 查询现在都将委托给“good.com”：

```
> nslookup www.bad.com
Server:         dns1.good.com
Address:        10.9.8.7#53

bad.com         dname = good.com.
www.bad.com     canonical name = www.good.com.
Name:   www.good.com
Address: 10.1.2.3 
```

我有目的地使用区域文件的默认行为，使用包含 SOA、NS 和 DNAME 记录的单个“@”，这使得您可以轻松地将“security/good.com”区域文件重新用于您的任何其他此类区域可能想要重定向：

```
// Malicious external domain, redirected to "good.com"
zone "bad.com" in {
    type master;
    file "security/good.com";
    check-names ignore;
};

// Another malicious external domain, redirected to "good.com"
zone "worse.com" in {
    type master;
    file "security/good.com";
    check-names ignore;
};

// Yet another malicious external domain, redirected to "good.com"
zone "evil.com" in {
    type master;
    file "security/good.com";
    check-names ignore;
}; 
```

你明白了……

请注意 DNAME 委托在查询结果中的显示方式。有些人可能不喜欢这样，这可以通过第二种方法来克服。

### 区域文件重载方法

实际上，我们已经在上面介绍了这一点。我们所做的只是重新使用带有默认记录的区域文件，并且从不***明确引用区域名称***。在我们的示例中，我们使用“目录”选项，但将所有区域文件放在名为“区域”的文件夹中，并为文件名提供与区域名称相同的名称*（我从不喜欢“db.xxxx”）*：

```
$TTL 14400
@         IN      SOA     dns.good.com. admin.good.com. (
                          2016021900 ; Serial No.
                          1800       ; Refresh
                          600        ; Retry
                          604800     ; Expire
                          3600 )     ; Minimum

          IN      NS      dns1
          IN      NS      dns2
          IN      MX      10 mail
          IN      A       10.11.12.13

; A records

dns1      IN      A       10.9.8.7
dns2      IN      A       10.9.8.6
mail      IN      A       10.9.8.5
files     IN      A       10.9.8.4

; CNAME records

www       IN      CNAME   @
ftp       IN      CNAME   files 
```

现在你的“named.conf”文件的元素：

```
zone "good.com" in {
    type master;
    file "zones/good.com";
    check-names ignore;
    notify yes;
}; 
```

现在假设您希望域“goodness.com”本质上是“good.com”。只需在“named.conf”中重新使用“good.com”文件，但指定重载区域名称：

```
zone "goodness.com" in {
    type master;
    file "zones/good.com";
    check-names ignore;
    notify yes;
}; 
```

现在，当您在“goodness.com”中查询记录时，它们将成为“good.com”区域中的记录：

```
> nslookup files.good.com
Server:         dns1.good.com
Address:        10.9.8.7#53

Name:   files.good.com
Address: 10.9.8.4

> nslookup files.goodness.com    
Server:         dns1.good.com
Address:        10.9.8.7#53

Name:   files.goodness.com
Address: 10.9.8.4 
```

如上所述，您绝不能在区域文件中显式引用区域名称，而是使用“@”默认引用，并且永远不要使用完全限定的域名作为引用区域内 A 记录的 CNAME 记录的目标。

这种方法的缺点是必须非常小心地使用“$ORIGIN”指令，并且使用“$GENERATE”指令变得非常困难。此外，它在您的权威服务器中占用两倍的内存，因为就服务器而言它们是单独的区域。

无论如何，这应该演示使用 DNS 将一个区域的记录重定向到另一个区域的两种方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T10:42:17.417

记录将`CNAME`特定域名别名为另一个域名。

记录将特定域名的`DNAME`所有*子域*别名为另一个域名的相同*子域。*

不幸的是，这两者不能共存——不可能说：

```
foo   IN CNAME bar    ;; maps the domain
foo   IN DNAME bar    ;; maps the subdomains 
```

尽管 IETF 提出了一种可以同时兼顾两者的替代方案。

# php - 如何更改此查询？

> ID：10593004
> 
> 赞同：0
> 
> 时间：2012-05-15T01:15:21.527
> 
> 标签：php, sql

如何从这里更改 SELECT 查询：

```
$tre = mysql_query("SELECT System_id, Full_name FROM accounts 
WHERE Full_name LIKE '". mysql_real_escape_string($_GET['q'])."%' LIMIT 5"); 
```

要在 $tre 中进行以下查询：

```
SELECT DISTINCT contacts.friend_id, accounts.full_name, 
accounts.system_id
FROM contacts, accounts
WHERE (contacts.system_id = '$sid' AND contacts.friend_id 
= accounts.system_id) OR (contacts.friend_id = '$sid' 
AND contacts.system_id = accounts.system_id) 
```

我希望将第二个查询放在 $tre = mysql_query();

我在这样做时遇到了麻烦，因为第二个查询中有括号并且是新的我不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:38:36.107

此外，括号不影响查询。只需将其放在双引号内，PHP 就会知道将整个查询发送到 MySQL。

另外：如果 $sid 来自任何用户输入，请使用以下内容代替 $sid：

`" . mysql_real_escape_string($sid) . "`

# java - Drawable.createFromStream 和 getResources().getDrawable，为什么它们的输出不同？

> ID：10593005
> 
> 赞同：1
> 
> 时间：2012-05-15T01:15:22.383
> 
> 标签：java, android

我有一个 32x32 的图像，我已将其放入可绘制文件夹中，并且从服务器下载相同的图像应用程序。但下载的一个看起来更大（更像 48x48）和像素化。

服务器代码 ( C# )

```
 MemoryStream tms = new MemoryStream();
        image.Save(tms, System.Drawing.Imaging.ImageFormat.Png);
        byte[] imageData = tms.ToArray();
        //send data to phone 
```

应用程序代码（Java）

```
 ByteArrayInputStream memStream = new ByteArrayInputStream(imageData);
    Drawable image = Drawable.createFromStream(memStream, ""); //big image and pixelated
    memStream.close(); 
```

但如果我从资源加载相同的文件，它总是更小

```
Drawable image = getResources().getDrawable(R.drawable.image); 
```

图像视图 xml

```
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:focusable="false"
    android:scaleType="center" /> 
```

编辑 ：

最后，设置 BitmapDrawable 的 TargetDensity 成功了！

```
Bitmap bmp = BitmapFactory.decodeByteArray(imageData, 0,
        imageData.length);
BitmapDrawable image = new BitmapDrawable(bmp);
image.setTargetDensity(bmp.getDensity()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:55:26.263

您的图像会根据设备的像素密度重新缩放，如果您想要一个 Drawable 对象，请尝试使用`BitmapFactory.decodeStream(...)`和包装它。`new BitmapDrawable(Bitmap)`

# php - imagecreatefromjpeg 无法正常工作

> ID：10593006
> 
> 赞同：1
> 
> 时间：2012-05-15T01:15:30.903
> 
> 标签：php, image, gd

我一直在尝试使用 php 调整图像大小，但我在让 imagecreatefromjpeg 函数工作时遇到问题。当我尝试显示图像时，屏幕上会出现一大堆字符，而不是图像。我也没有看到任何错误。

因此，最初我尝试使用此功能调整图像大小。显示了一堆随机字符，所以我想我会简化它以进行调试。

```
function chgSize($image, $width, $height){
    $name = $image["name"]; //this is displaying the file name correctly
    $temp = $image["tmp_name"];
    $imageContents = imagecreatefromjpeg($temp);
    $blankImage = imagecreatetruecolor(100,100);

    if(imagecopyresampled($blankImage, $imageContents, 0, 0, 0, 0, 100, 100, $width, $height)){ 
        header('Content-type: image/jpeg');
        imagejpeg($blankImage, $name); //name the image and output it

        //$this->saveImage($formattedImage); //save the image, commented out for testing purposes
    }
} 
```

**编辑**- 我让它工作。我没有意识到 imagejpeg 中的第二个参数是路径，而不仅仅是图像的名称。在 PHP 的网站上，参数 2 在每个实例中都显示为一个名称，所以我认为这就是全部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:19:33.363

您尚未输出内容类型标头以向浏览器指示您正在通过 JPEG 图像数据发送。添加一个

```
header('Content-type: image/jpeg'); 
```

在您的 imagejpeg() 调用之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:20:41.890

您是否尝试过使用正确的标题？

```
header('Content-Type: image/jpeg'); 
```

您还应该确保在此之前不输出任何文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T01:22:09.463

听起来您正在打印 jpeg 的原始数据。我不确定您的预期应用程序是什么，但您应该：

*   将 $imgContents 的内容保存到服务器上的文件中，该文件可以通过 HTML 图像标签提供服务
*   输出正确的 HTTP 标头以指示浏览器它接收的文件实际上是 JPG，而不是 HTML 标记或文本：`header('Content-Type: image/jpeg');`

# android - adapter.notifyDataSetChanged() 每次都会导致 NullPointerException 错误

> ID：10593007
> 
> 赞同：0
> 
> 时间：2012-05-15T01:15:31.950
> 
> 标签：android

更新我的数据库后，我无法让适配器收到更改通知。我必须退出活动并返回才能看到更新的列表。我尝试了一些我读过的想法，但没有运气，所以我想我会发布我的代码，希望有人能看到这个错误所在。谢谢！

```
//public class ViolationsList extends ListActivity {
public class ViolationsList extends Activity {

// protected ListView violationsList;
private static final String TAG = "MyActivity";

protected static String violation = "";
protected String graph_or_fql;
protected String myFriendID = "not set";
protected String picture = "";
protected String response = "";
protected String name = "";
boolean violatorSelected;
long friendId = 0;
private Cursor cursor=null;
//this is the array list for the custom violations from the database
private ArrayList<String> myCustomsArrayList = new ArrayList<String>();
//string array for custom violations
private String[] customViols;
//array list for building your three arrays into one array
private ArrayList<String> violationsCompArray = new ArrayList<String>();

String[] violations1;

String[] violations2;

ListView list;
private SpecialAdapter adapter;

//the view holder for the listview      
static class ViewHolder {
    TextView text;
}

//
private class SpecialAdapter extends BaseAdapter {

    //Defining the background color of rows. The row will alternate between green light and green dark.
    private int[] colors = new int[] { 0xff000000, 0xff888888, 0xffCCCCCC };
    private LayoutInflater mInflater;
    Typeface font1 = Typeface.createFromAsset(getAssets(), "fonts/Colossalis-Bold.ttf");
    Typeface font2 = Typeface.createFromAsset(getAssets(), "fonts/helveticaneue.ttf");
    //The variable that will hold our text data to be tied to list.

    //private String[] data;
    private ArrayList data = new ArrayList();

    //public SpecialAdapter(Context context, String[] items) {
    public SpecialAdapter(Context context, ArrayList items) {
        mInflater = LayoutInflater.from(context);
        this.data = items;
    }

    @Override
    public int getCount() {
        //return data.length;
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public void notifyDataSetChanged() {
        // TODO Auto-generated method stub
        super.notifyDataSetChanged();
    }

    //A view to hold each row in the list
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        // A ViewHolder keeps references to children views to avoid unneccessary calls
        // to findViewById() on each row.
        ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.row, null);

            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.headline);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        // Bind the data efficiently with the holder.
        holder.text.setText((CharSequence) data.get(position));

        //Set the background color of the holder
        int colorPos = position % colors.length;

        if ((holder.text.getText().toString().equals("ORIGINALS")) || (holder.text.getText().toString().equals("CUSTOM"))) {
            Log.v(TAG, holder.text.getText().toString());
            colorPos=1;  
            holder.text.setTypeface(font1);
            //holder.text.setTextColor(Color.parseColor("#000000"));

        } else if ("Make your own".equals(holder.text.getText().toString())) {
            Log.v(TAG, holder.text.getText().toString());
            colorPos=2;  

        }else {

            colorPos=0;
            holder.text.setTypeface(font2);
        }

        convertView.setBackgroundColor(colors[colorPos]);

        return convertView;
    }
}

////code for the custom violations database

private void insertCustom(String newViolation) {
    DatabaseHelper databaseHelper = new DatabaseHelper(this);
    SQLiteDatabase db = databaseHelper.getWritableDatabase();

    ContentValues cv = new ContentValues();
    cv.put(DatabaseHelper.TITLE, newViolation);

    db.insert("customViolations", DatabaseHelper.TITLE, cv);

    cursor = db.query("customViolations",null, null, null, null, null, null);
    startManagingCursor(cursor);
    Log.v(TAG, "cursor data = " + cursor.toString());

    cursor.requery();
    db.close();
    updateData();
    adapter.notifyDataSetChanged();

}

private void DeleteCustom(String newViolation)
{
    DatabaseHelper databaseHelper = new DatabaseHelper(this);
    SQLiteDatabase db = databaseHelper.getWritableDatabase();
    db.delete("customViolations", "myViolation" + "=?", new String[] { violation });

    Log.v(TAG, violation);
    db.close();
    Log.v(TAG, "delete your custom violation");

    cursor.requery();
    updateData();
    adapter.notifyDataSetChanged();

}

/////code to log cursor info   KEEP FOR TESTING!!!!
public void logCursorInfo(Cursor cursor1) {

    Log.i(TAG, "*** Cursor Begin *** " + " Results:" + cursor1.getCount() + " Columns: " + cursor1.getColumnCount());

    //print column names

    String rowHeaders = "|| ";
    for (int i = 0; i < cursor1.getColumnCount(); i++) {

        rowHeaders = rowHeaders.concat(cursor1.getColumnName(i) + " || ");
    }

    //print records
    cursor1.moveToFirst();
    while (cursor1.isAfterLast() == false) {

        String rowResults = "|| ";
        for (int i = 0;  i < cursor1.getColumnCount(); i++) {

            rowResults = rowResults.concat(cursor1.getString(i) + " || ");
        }
        Log.i(TAG, "Row " + cursor1.getPosition() + ": " + rowResults);
        cursor1.moveToNext();
    }

    Log.i(TAG, "***  Cursor End  ***");

}

///code to bring up text entry alert dialog
public void enterText() {

    //insert dialog builder
    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    String Title = getResources().getString(R.string.dialogTitle);
    alert.setTitle(Title);

    //alert.setMessage("Message");

    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    int maxLength = 60;  
    InputFilter[] FilterArray = new InputFilter[1];  
    FilterArray[0] = new InputFilter.LengthFilter(maxLength);  
    input.setFilters(FilterArray); 
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            Editable value = input.getText();
            // Do something with value!
            insertCustom(value.toString());
            cursor.requery();

        }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
        }
    });

    alert.show();

}

///code to bring up text entry alert dialog
public void editYourViolation() {

    //insert dialog builder
    AlertDialog.Builder yourEdit = new AlertDialog.Builder(this);

    String Title = getResources().getString(R.string.customdialogTitle);
    yourEdit.setTitle(Title);

    yourEdit.setPositiveButton("Use", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            // Do something with value!
            createViolation();
        }
    });

    yourEdit.setNegativeButton("Delete", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
            DeleteCustom(violation);
        }
    });

    yourEdit.show();

}

///create the violation
public void createViolation() {

    Intent myIntent = new Intent(getApplicationContext(),
            Selection.class);
    myIntent.putExtra("friendId", friendId);
    myIntent.putExtra("name", name);
    myIntent.putExtra("picture", picture);
    myIntent.putExtra("violation", violation);
    myIntent.putExtra("violatorSelected", violatorSelected);

    startActivity(myIntent);

}

public void querydatabase() {
    DatabaseHelper databaseHelper = new DatabaseHelper(this);
    SQLiteDatabase db = databaseHelper.getWritableDatabase();
    cursor = db.query("customViolations",null, null, null, null, null, null);

}

public void populateArray() {

    cursor.moveToFirst();
    while(!cursor.isAfterLast()) {
        myCustomsArrayList.add(cursor.getString(cursor.getColumnIndex(DatabaseHelper.TITLE)));
        cursor.moveToNext();
    }
    customViols = (String[]) myCustomsArrayList.toArray(new String[myCustomsArrayList.size()]);

}

private void updateData() {
    querydatabase();
    populateArray();
    for(String i : violations1)
    {
        violationsCompArray.add(i);
    }
    //these are your custom violations
    for(String z : customViols)
    {
        violationsCompArray.add(z);
    }
    //original violations list
    for(String s : violations2)
    {
        violationsCompArray.add(s);
    }

}

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    Bundle extras = getIntent().getExtras();
    response = extras.getString("API_RESPONSE");
    graph_or_fql = extras.getString("METHOD");
    friendId = extras.getLong("friendId");
    name = extras.getString("name");
    picture = extras.getString("picture");
    violatorSelected = extras.getBoolean("violatorSelected");
    Log.v(TAG, "violations list created");

    setContentView(R.layout.violations_list);

    violations1 = getResources().getStringArray(
            R.array.violations_array1);

    violations2 = getResources().getStringArray(
            R.array.violations_array2);

    ListView list = (ListView) findViewById(R.id.violations_list);
    list.setTextFilterEnabled(true);

    //set up the database connection and cursor for the custom violations

    updateData();

    SpecialAdapter adapter = new SpecialAdapter(this, violationsCompArray); 
    list.setAdapter(adapter);

    ///new onItemClickListener
    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View view,
                int position, long id) {

            for(String i : customViols)
            {
                Log.v(TAG, i);
            }   

            String text = (String) ((TextView) view).getText();
            violation = text;

            //the make your own value will launch the text editor
            if ("Make your own".equals(violation)) {
                Log.v(TAG, "create the code for Make your own screen");
                enterText();
                //these values are section headers and should have no selection effect                  
            }else if("ORIGINALS".equals(violation) || "CUSTOM".equals(violation))   {
                Toast.makeText(getApplicationContext(), violation,
                        Toast.LENGTH_SHORT).show();
                //test to see if the violation is from the custom violations list   
            }else if(Arrays.asList(customViols).contains(violation)) {

                editYourViolation();  

                //use one of the originals                      
            }else {

                createViolation();

            }
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:35:26.197

在您的 onCreate 中，您将适配器定义为：

```
SpecialAdapter adapter = new SpecialAdapter(this, violationsCompArray); 
```

但是在其他任何地方，您都以相同的名称引用私有成员变量

```
private SpecialAdapter adapter; 
```

几乎要解决这个问题，您只需将 onCreate 中的行更改为：

```
adapter = new SpecialAdapter(this, violationsCompArray); 
```

这样它就引用了类成员变量，而不是您创建的本地变量。

# database - DataMapper all_to_json() 方法返回斜杠

> ID：10593008
> 
> 赞同：0
> 
> 时间：2012-05-15T01:15:36.447
> 
> 标签：database, codeigniter, datamapper, codeigniter-datamapper

我刚刚为 CI 的内置方法`to_json`和`all_to_json`方法找到了 DataMapper，这为我节省了大量时间。

如何返回与结果的关系？

目前我的代码如下所示：

```
$homes = new Home();

$homes->include_related('address')->get();
$homes->include_related('album')->get();

$homes->get();

$homes->set_json_content_type();
echo $homes->to_json(); 
```

但是，我只是回到家本身，而不是嵌套信息。

编辑：

我发现您可以简单地将这些字段添加到数组参数中，但是，如果我使用`all_to_json($fields);`它完美地返回第一行，但第二个嵌套返回为 NULL。仍然认为这是我的错，但我不知道是否有人以前看过这个。

这是我当前的输出。

```
{
    "id": 1,
    "latitude": "0",
    "longitude": "0",
    "price": "173000",
    "sqft": "2100",
    "room_count": "3",
    "bath_count": "2",
    "created": "1333209034",
    "updated": "1333209034",
    "status": "active",
    "address": [
        1
    ],
    "album": []
} 
```

在我的数据中，如果我查看原始输出，我会看到完整的地址。在我的 JSON 中，我看到一个数字 1。如何显示此数据而不是数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:54:47.643

1.8.2。发布版本不会递归，以避免生成巨大的 JSON 输出（取决于加载的对象，这可能会很快耗尽内存）。

作为即将发布的 1.8.3 版本的一部分，bitbucket 上的 JSON 扩展有一些可用的更新。

新功能之一是您可以将它必须递归到的相关对象列表传递给它，以深层关系表示法（如“child”、“child/grandchild”、“child/other”、“child/other/related “，……）。

# javascript - 按名称删除 cookie？

> ID：10593013
> 
> 赞同：178
> 
> 时间：2012-05-15T01:16:48.267
> 
> 标签：javascript, cookies

如何删除具有名称的特定 cookie `roundcube_sessauth`？

不应该以下：

```
function del_cookie(name) {
    document.cookie = 'roundcube_sessauth' + 
    '=; expires=Thu, 01-Jan-70 00:00:01 GMT;';
} 
```

进而：

```
<a href="javascript:del_cookie(name);">KILL</a> 
```

杀死`roundcube_sessauth`饼干？

* * *

## 回答 #1

> 赞同：315
> 
> 时间：2014-06-02T13:40:42.643

您应该定义 cookie 存在的路径，以确保删除正确的 cookie。

```
function set_cookie(name, value) {
  document.cookie = name +'='+ value +'; Path=/;';
}
function delete_cookie(name) {
  document.cookie = name +'=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
} 
```

如果您不指定路径，浏览器将设置一个相对于您当前所在页面的 cookie，因此如果您在另一个页面上删除 cookie，另一个 cookie 将继续存在。

*根据@Evan Morrison 的评论进行编辑。*
请注意，在某些情况下要识别正确的 cookie，该`Domain`参数是必需的。
通常它被定义为`Domain=.yourdomain.com`. 在您的域名前
放置一个*点*`www`表示此 cookie 可能存在于任何子域（也算作子域）上。

此外，正如@RobertT 的回答中所述，`HttpOnly`无法在客户端使用 JavaScript 删除 cookie。

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2012-05-15T01:21:39.987

为了删除 cookie，请将`expires`日期设置为过去的某个时间。执行此操作的功能将是。

```
var delete_cookie = function(name) {
    document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;';
}; 
```

然后删除一个名为`roundcube_sessauth`just do 的 cookie。

```
delete_cookie('roundcube_sessauth'); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-11-17T16:15:14.367

//如果通过 exMins=0 它将在创建后立即删除。

```
function setCookie(cname, cvalue, exMins) {
    var d = new Date();
    d.setTime(d.getTime() + (exMins*60*1000));
    var expires = "expires="+d.toUTCString();  
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

setCookie('cookieNameToDelete','',0) // this will delete the cookie. 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-01-30T21:19:40.907

我不确定这是否是 12 年 5 月以来 Roundcube 版本的情况，但对于当前版本，答案是您无法`roundcube_sessauth`从 JavaScript 中删除 cookie，因为它被标记为`HttpOnly`. 这意味着它不能从 JS 客户端代码访问，只能通过服务器端脚本或直接用户操作（通过一些浏览器机制，如集成调试器或某些插件）来删除。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-20T07:34:27.903

你可以试试这个解决方案

```
var d = new Date();
d.setTime(d.getTime());
var expires = "expires="+d.toUTCString();
document.cookie = 'COOKIE_NAME' + "=" + "" + ";domain=domain.com;path=/;" + expires; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-15T15:13:36.400

在我的情况下，我为不同的环境使用了打击代码。

```
 document.cookie = name +`=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;Domain=.${document.domain.split('.').splice(1).join('.')}`; 
```

# asp.net - ObjectDataSource.Select() 并不总是在页面回发时触发

> ID：10593015
> 
> 赞同：1
> 
> 时间：2012-05-15T01:16:55.397
> 
> 标签：asp.net, vb.net, objectdatasource

我有一个表格：

*   1 个文本框（“MyTextBox”）
*   3 个复选框（“MyCheckBox1”、“MyCheckBox2”、“MyCheckBox3”）
*   1 个提交按钮（“MySubmitButton”）
*   1 对象数据源（“我的对象数据源”）
*   1个网格视图（“我的网格视图”）

我的 ObjectDataSource 看起来像这样：

```
<asp:ObjectDataSource ID="MyObjectDataSource" runat="server"
                          SelectMethod="MySelectMethod"
                          TypeName="MyTypeName">
    <SelectParameters>
        <asp:ControlParameter Name="MyRegularString"
                              Type="String"
                              ControlID="MyTextBox"
                              PropertyName="Text" />

        <asp:Parameter Name="MySpecialString"
                       Type="String" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

第二个参数（“MySpecialString”）填充如下：

```
Protected Sub MyObjectDataSource_Selecting(...) Handles MyObjectDataSource.Selecting

   Dim MySpecialString As String = "Key1=" & MyCheckBox1.Checked.ToString & ";" & _
                                   "Key2=" & MyCheckBox2.Checked.ToString & ";" & _
                                   "Key3=" & MyCheckBox3.Checked.ToString & ";"

   e.InputParameters.Item("MySpecialString") = MySpecialString

End Sub 
```

每当我更改 MyTextBox 的值并按下 MySubmitButton 时，都会调用 MyObjectDataSource 的 select 方法，并且一切正常。

但是，如果我更改任何复选框的值（不更改 MyTextBox 的值）并按下 MySubmitButton，则不会调用 select 方法，因此不会发生“MyObjectDataSource_Selecting”事件，我得到的结果与以前相同.

我发现解决此问题的一种方法是在单击 MySubmitButton 时显式调用 MyGridView.DataBind 方法。这是处理这些类型参数的最佳方法吗？我担心的是，这可能会导致 select 方法被调用两次，从而使页面变慢。

提前感谢您的帮助。

光盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:47:05.703

这就是我最终做的。

1.  将所有 asp:ControlParameters 替换为 asp:Parameters。
2.  每当单击 MySubmitButton 时显式调用 MyGridView.DataBind 方法。

我检查并执行此操作时未调用两次 select 方法。

# php - compact() 变量按前缀放入数组中？

> ID：10593021
> 
> 赞同：1
> 
> 时间：2012-05-15T01:17:41.147
> 
> 标签：php, arrays, variables

这可能吗？

就像用所有具有特定前缀的变量创建一个数组？

我不需要键只是值，但我想我可以在数组上使用 array_values。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T01:27:17.817

如果你需要这样做，一开始可能写得不太好，但是，这里是如何做到的:)

```
$foobar = 'test';
$anothervar = 'anothertest';
$foooverflow = 'fo';
$barfoo = 'foobar';

$prefix = 'foo';
$output = array();
$vars = get_defined_vars();
foreach ($vars as $key => $value) {
    if (strpos($key, $prefix) === 0) $output[] = $value;
}

/*
$output = array(
    'test', // from $foobar
    'fo', // from $foooverflow
);
*/ 
```

[http://php.net/manual/en/function.get-defined-vars.php](http://php.net/manual/en/function.get-defined-vars.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T01:50:33.490

my eyes are bleeding a little, but I couldn't resist a one liner.

```
print_r(iterator_to_array(new RegexIterator(new ArrayIterator(get_defined_vars()), '/^' . preg_quote($prefix) . '/', RegexIterator::GET_MATCH, RegexIterator::USE_KEY))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T02:29:58.727

This, my second answer, shows how to do this without making a mess of the global scope by using a simple PHP object:

```
$v = new stdClass();
$v->foo = "bar";
$v->scope = "your friend";
$v->using_classes = "a good idea";
$v->foo_overflow = "a bad day";

echo "Man, this is $v->using_classes!\n";

$prefix = "foo";
$output = array();
$refl = new ReflectionObject($v);
foreach ($refl->getProperties() as $prop) {
        if (strpos($prop->getName(), $prefix) === 0) $output[] = $prop->getValue($v);
}

var_export($output); 
```

Here's the output:

```
Man, this is a good idea!
array (
  0 => 'bar',
  1 => 'a bad day',
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T01:21:21.130

如果你在谈论全局范围内的变量，你可以这样做`$GLOBALS[]`：

```
$newarray = array();

// Iterate over all current global vars 
foreach ($GLOBALS as $key => $value) {
  // And add those with keys matching prefix_ to a new array
  if (strpos($key, 'prefix_' === 0) {
    $newarray[$key] = $value;
  }
} 
```

如果您在全局范围内有很多很多变量，那么执行起来会比手动将它们全部添加到 中要慢`compact()`，但输入起来会更快。

### 附录

我只想补充一点（尽管我怀疑你已经知道了），如果你有能力重构这段代码，你最好首先将相关变量组合到一个数组中。

# android - MonoDroid：调用自定义视图的构造函数时出错 - TwoDScrollView

> ID：10593022
> 
> 赞同：50
> 
> 时间：2012-05-15T01:17:45.080
> 
> 标签：android, android-layout, scrollview, xamarin.android, android-custom-view

我正在构建一个使用此处找到的定制 TwoDScrollView 的 Android 应用程序：

[http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/](http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/)

可以在其他几个网站上找到相同的类，并且 Stack Overflow 上的其他人也提出了有关它的问题。我在使用 Java/Eclipse 构建的以前的 Android 应用程序中使用它，并且取得了成功。

在我当前的应用程序中，我想使用 C# 和 MonoDroid。我决定用 C# 重写整个 TwoDScrollView 类。重写它，然后在一些布局 XML 中使用它之后，尝试运行我的代码时出现以下异常：

> System.NotSupportedException 已被抛出。无法从本机句柄 44f4d310 激活 MyProject.TwoDScrollView 类型的实例。
> 
> System.Exception：未找到 MyProject.TwoDScrollView::.ctor(System.IntPtr, Android.Runtime.JniHandleOwnership) 的构造函数......后面还有更多文本......

我的布局 XML 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<myproject.TwoDScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

</myproject.TwoDScrollView>

</RelativeLayout> 
```

根据以下链接中有关在 MonoDroid 中使用布局 XML 中的自定义视图的说明：http: [//docs.xamarin.com/android/advanced_topics/using_custom_views_in_a_layout](http://docs.xamarin.com/android/advanced_topics/using_custom_views_in_a_layout)

TwoDScrollView 类的构造函数如下所示：

```
public TwoDScrollView(Context context) 
    : base(context)
{
    initTwoDScrollView();
}

public TwoDScrollView(Context context, IAttributeSet attrs) 
    : base(context, attrs)
{
    initTwoDScrollView();
}

public TwoDScrollView(Context context, IAttributeSet attrs, int defStyle) 
    : base(context, attrs, defStyle)
{
    initTwoDScrollView();
} 
```

C# 版本中存在与 Java 版本中相同的构造函数（您可以在上面的链接中找到）。知道可能出了什么问题吗？如果有人愿意，我可以发布我的 TwoDScrollView 的完整 C# 代码。它本质上与 Java 代码逐位相同——除了用 C# 重写。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-05-15T15:11:29.997

恭喜！你遇到了一个泄漏的抽象。：-/

问题是这样的：[无论好坏](https://www.securecoding.cert.org/confluence/display/java/MET05-J.+Ensure+that+constructors+do+not+call+overridable+methods)，来自构造函数的虚方法调用都会调用最派生的方法实现。C#在这方面与Java相同；考虑以下程序：

```
using System;

class Base {
    public Base ()
    {
        Console.WriteLine ("Base..ctor");
        M ();
    }

    public virtual void M ()
    {
        Console.WriteLine ("Base.M");
    }
}

class Derived : Base {

    public Derived ()
    {
        Console.WriteLine ("Derived..ctor");
    }

    public override void M ()
    {
        Console.WriteLine ("Derived.M");
    }
}

static class Demo {
    public static void Main ()
    {
        new Derived ();
    }
} 
```

运行时，输出为：

```
Base..ctor
Derived.M
Derived..ctor 
```

也就是说，该`Derived.M()`方法在`Derived`构造函数执行之前被调用。

在 Mono for Android 中，事情变得更加……复杂。[Android Callable Wrapper (ACW)](https://docs.microsoft.com/en-us/xamarin/android/platform/java-integration/android-callable-wrappers)的构造函数由 Java 调用，负责创建对[等 C# 实例并将 Java 实例映射到 C# 实例](https://docs.microsoft.com/en-us/xamarin/android/internals/garbage-collection#cross-vm-object-collections)。*但是*，如果从 Java 构造函数调用虚拟方法，则该方法将在*C# 实例调用该方法之前被分派！*

让它沉下去一点。

我不知道哪个方法触发了您的特定代码的场景（您提供的代码片段可以正常工作），但我们确实有一个遇到这种场景的示例：LogTextBox[覆盖](https://github.com/xamarin/monodroid-samples/blob/master/ApiDemo/Text/LogTextBox.cs#L26) [TextView.DefaultMovementMethod](https://github.com/xamarin/monodroid-samples/blob/master/ApiDemo/Text/LogTextBox.cs#L45)[属性](http://androidapi.xamarin.com/?link=P:Android.Widget.TextView.DefaultMovementMethod)，并且[`TextView`构造函数调用该`getDefaultMovementMethod()`方法](https://github.com/android/platform_frameworks_base/blob/gingerbread-release/core/java/android/widget/TextView.java#L366). 结果是 Android 尝试在实例存在`LogTextBox.DefaultMovementMethod`之前调用。`LogTextBox`

那么 Mono for Android 有什么作用呢？Mono for Android 创建了 ACW，因此知道该方法应该委托给哪个 C #类型*。*`getDefaultMovementMethod()`它没有实例，因为尚未创建实例。因此，Android 的 Mono 创建了一个适当类型的实例……通过`(IntPtr, JniHandleOwnership)`构造函数，如果找不到该构造函数，则会生成错误。

一旦（在这种情况下）`TextView`构造函数完成执行，`LogTextBox`的 ACW 构造函数将执行，此时 Mono for Android 将“啊哈！我们已经为这个 Java 实例创建了一个 C# 实例”，然后将*调用*适当的已创建实例上的构造函数。这意味着对于单个实例，将执行两个构造函数：[`(IntPtr, JniHandleOwnership)`构造函数](https://github.com/xamarin/monodroid-samples/blob/master/ApiDemo/Text/LogTextBox.cs#L28)和（稍后）[`(Context, IAttributeSet, int)`构造函数](https://github.com/xamarin/monodroid-samples/blob/master/ApiDemo/Text/LogTextBox.cs#L41)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-15T02:26:04.313

The error message says:

`System.Exception: No constructor found for MyProject.TwoDScrollView::.ctor(System.IntPtr, Android.Runtime.JniHandleOwnership)`

Try adding a constructor like it says and see if that helps:

`public TwoDScrollView (IntPtr a, JniHandleOwnership b) : base (a, b) { }`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-11T03:10:27.183

我对自定义图像视图有同样的问题，jpobst 的答案肯定完全解决了这个问题：

```
public CircularImageView(Context context)
            :base(context) 
        {

            init (context, null, 0);
        }

        public CircularImageView(Context context, IAttributeSet attrs)
            : base(context, attrs)
        {
            init (context, attrs, Resource.Attribute.circularImageViewStyle);
        }

        public CircularImageView(Context context, IAttributeSet attrs, int defStyle)
            :base(context, attrs, defStyle)
        {

            init(context, attrs, defStyle);
        }
        public CircularImageView (IntPtr a, JniHandleOwnership b) : base (a, b)
        {
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-18T19:00:17.367

我正在使用自定义列表视图渲染器，但没有一个解决方法对我有用。但是延迟`base.Dispose`方法帮助我修复了崩溃，可能这给了 mono android 初始化代理实例的机会。

```
Xamarin.Forms.Device.BeginInvokeOnMainThread(base.Dispose); 
```

我现在没有看到任何崩溃！

# ajax - Wordpress 事件插件 wp_query 没有分页

> ID：10593024
> 
> 赞同：0
> 
> 时间：2012-05-15T01:18:11.897
> 
> 标签：ajax, wordpress, calendar, pagination

我遇到了 Modern Tribe 的“事件日历”插件无法正确分页的问题。它可以很好地显示第一页，但拒绝转到任何辅助页面（使用 wp-pagenavi）。理想情况下，我试图通过 AJAX 加载它，但此时分页将是一个奇迹。我在这里已经筋疲力尽了一天。基本上，这是查询：

```
<?php 
$wp_query = new WP_Query();
$wp_query->query( array(
'post_type'=> 'tribe_events',
'eventDisplay' => 'upcoming',
'posts_per_page' => 5)
);
$max = $wp_query->max_num_pages;
$paged = ( get_query_var('paged') > 1 ) ? get_query_var('paged') : 1;

if ($wp_query->have_posts()) :
while ($wp_query->have_posts()) :
    $wp_query->the_post();
    ?>
  <li><!-- do stuff    -->  </li>
  <?php
endwhile;?>
    </ul>
<?php
endif;
wp_reset_query(); // important to reset the query
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:52:20.570

There are quite a number of issues with your loop:

You say you're using wp_page_navi, however I'm not seeing any references to the plugin in any of your code. Also, you have list items being generated in your loop along with a closing ul tag, but I don't see any opening ul tag anywhere, which could also be contributing to some of your problems.

I'm also noticing in your list of arguments that you're trying to set 'eventDisplay' to 'upcoming'. 'eventDisplay' is not a valid WP_Query parameter. I'm guessing you probably have a registered Taxonomy of eventDisplay? If so, you will need to use [Tax Query](http://codex.wordpress.org/Class_Reference/WP_Query#Taxonomy_Parameters) instead. I've removed this parameter in the example, but feel free to replace it when you're comfortable with setting the parameters you need.

Lastly, query arguments should be made when you call WP_Query, not through $query->query.

Here's something I came up with using standard Wordpress Paging and the arguments you have in your code. I'm not familiar with wp_page_navi, but this should help get you started on the right track:

```
<?php
global $paged;
$curpage = $paged ? $paged : 1;
$query = new WP_Query(array(
    'post_type'=> 'tribe_events',
    'paged' => $paged,
    'posts_per_page' => 5
));

if ($query->have_posts()) :
?>
<ul>
<?php while ($query->have_posts()) : $query->the_post(); ?>
    <li><?php the_title(); ?></li>
<?php endwhile; ?>
</ul>
<?php
echo '<div id="wp_pagination">';
    echo '<a class="first page button" href="'.get_pagenum_link(1).'">&laquo;</a>';
    echo '<a class="previous page button" href="'.get_pagenum_link(($curpage-1 > 0 ? $curpage-1 : 1)).'">&lsaquo;</a>';
    for($i=1;$i<=$query->max_num_pages;$i++)
    {
        echo '<a class="'.($active = $i == $curpage ? 'active ' : '').'page button" href="'.get_pagenum_link($i).'">'.$i.'</a>';
    }
    echo '<a class="next page button" href="'.get_pagenum_link(($curpage+1 <= $query->max_num_pages ? $curpage+1 : $query->max_num_pages)).'">&rsaquo;</a>';
    echo '<a class="last page button" href="'.get_pagenum_link($query->max_num_pages).'">&raquo;</a>';
echo '</div>';
endif;
wp_reset_query();
?> 
```

This will set your loop to display 5 post titles in your list. Below it will be a series of numbered links based on how many posts you have. When you click on a number, it reloads the page with its corresponding titles.

Let me know if this helps.

# python - 如何在 Python/Tkinter 中将 StringVar 连接到 Text 小部件？

> ID：10593027
> 
> 赞同：5
> 
> 时间：2012-05-15T01:19:28.807
> 
> 标签：python, tkinter

基本上，我希望 Text 小部件的主体在 StringVar 发生变化时发生变化。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T01:33:28.753

简短的版本是，你不能。至少，不是没有做额外的工作。文本小部件不直接支持`variable`选项。

如果您想自己完成所有工作，可以在变量上设置跟踪，以使文本小部件保持最新，并且您可以将绑定添加到文本小部件以使变量保持最新，但是什么都没有直接内置在 Tkinter 中以自动执行此操作。

不直接支持的主要原因是文本小部件不仅可以包含 ascii 文本——它可以有不同的字体和颜色、嵌入的小部件和图像以及标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-07T12:00:48.930

我在做一个项目时想到了这一点。其实很简单：

```
import tkinter as tk
from tkinter import *
from tkinter.scrolledtext import ScrolledText

def get_stringvar(event):
    SV.set(ST1.get("1.0", END))
    ST2.replace("1.0", END, SV.get())

root = tk.Tk()

SV = StringVar()

ST1 = ScrolledText(root)
ST1.pack()
ST1.bind('<KeyRelease>', get_stringvar)

ST2 = ScrolledText(root)
ST2.pack()

root.mainloop() 
```

# javascript - Javascript ajax 邮件和 scriptaculous 冲突

> ID：10593029
> 
> 赞同：0
> 
> 时间：2012-05-15T01:19:36.270
> 
> 标签：javascript, jquery, prototypejs

让 jQuery 和 Prototype 一起工作有点麻烦。错误控制台抛出错误

```
$(divid).visible is not a function 
```

我的旧原型是三个变体

```
function toggleDisplayWait(divId, imgId, durationmSec) {
    if(!$(divId).visible()) 
            {
                move = Effect.BlindDown;
                newImage = "./img/minus.png";
            }
            else {
                move = Effect.BlindUp;
                newImage = "./img/plus.png";  
            }        
            move(divId, {duration: durationmSec / 1000.0 });
            setTimeout(function() { $(imgId).src = newImage; }, durationmSec)
        } 
```

我在教程中发现的新 jQuery 是

```
// Init the form once the document is ready
jQuery( init );

// Initialize the form

function init() {

  // Hide the form initially.
  // Make submitForm() the forms submit handler.
  // Position the form so it sits in the centre of the browser window.
  jQuery('#contactForm').hide().submit( submitForm ).addClass( 'positioned' );

  // When the "Send us an email" link is clicked:
  // 1\. Fade the content out
  // 2\. Display the form
  // 3\. Move focus to the first field
  // 4\. Prevent the link being followed

  jQuery('a[href="#contactForm"]').click( function() {
    jQuery('#content').fadeTo( 'slow', .2 );
    jQuery('#contactForm').fadeIn( 'slow', function() {
      jQuery('#senderName').focus();
    } )

    return false;
  } );

  // When the "Cancel" button is clicked, close the form
  jQuery('#cancel').click( function() {
    jQuery('#contactForm').fadeOut();
    jQuery('#content').fadeTo( 'slow', 1 );
  } ); 

  // When the "Escape" key is pressed, close the form
  jQuery('#contactForm').keydown( function( event ) {
    if ( event.which == 27 ) {
      jQuery('#contactForm').fadeOut();
      jQuery('#content').fadeTo( 'slow', 1 );
    }
  } );

}

// Submit the form via Ajax

function submitForm() {
  var contactForm = jQuery(this);

  // Are all the fields filled in?

  if ( !jQuery('#senderName').val() || !jQuery('#senderEmail').val() || !jQuery('#message').val() ) {

    // No; display a warning message and return to the form
    jQuery('#incompleteMessage').fadeIn().delay(messageDelay).fadeOut();
    contactForm.fadeOut().delay(messageDelay).fadeIn();

  } else {

    // Yes; submit the form to the PHP script via Ajax

    jQuery('#sendingMessage').fadeIn();
    contactForm.fadeOut();

    jQuery.ajax( {
      url: contactForm.attr( 'action' ) + "?ajax=true",
      type: contactForm.attr( 'method' ),
      data: contactForm.serialize(),
      success: submitFinished
    } );
  }

  // Prevent the default form submission occurring
  return false;
}

// Handle the Ajax response

function submitFinished( response ) {
  response = jQuery.trim( response );
  jQuery('#sendingMessage').fadeOut();

  if ( response == "success" ) {

    // Form submitted successfully:
    // 1\. Display the success message
    // 2\. Clear the form fields
    // 3\. Fade the content back in

    jQuery('#successMessage').fadeIn().delay(messageDelay).fadeOut();
    jQuery('#senderName').val( "" );
    jQuery('#senderEmail').val( "" );
    jQuery('#message').val( "" );

    jQuery('#content').delay(messageDelay+500).fadeTo( 'slow', 1 );

  } else {

    // Form submission failed: Display the failure message,
    // then redisplay the form
    jQuery('#failureMessage').fadeIn().delay(messageDelay).fadeOut();
    jQuery('#contactForm').delay(messageDelay+500).fadeIn();
  }
} 
```

我使用了无冲突，并将我的 $ 更改为 jQuery，但没有任何乐趣。脚本的开头是

```
<script src="java/prototype.js" type="text/javascript"></script>
<script src="java/scriptaculous.js" type="text/javascript"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script> jQuery.noConflict() </script>
<script type="text/javascript"> var messageDelay = 3000;  // How long to display status messages (in milliseconds) </script>
<script type="text/javascript" language="javascript"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:23:27.423

经过一番搜索后在这里找到了答案 - [scriptaculous 和 JQuery 不合作](https://stackoverflow.com/questions/5813744/scriptaculous-and-jquery-do-not-collaborate)

我首先加载了 jQuery 库，然后没有冲突，然后是其他库

变化看起来像

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script> jQuery.noConflict() </script>
    <script type="text/javascript"> var messageDelay = 3000;  // How long to display status messages (in milliseconds) </script>
    <script src="java/prototype.js" type="text/javascript"></script>
    <script src="java/scriptaculous.js" type="text/javascript"></script> 
```

# javascript - HTML Canvas 不显示图像

> ID：10593030
> 
> 赞同：10
> 
> 时间：2012-05-15T01:19:59.243
> 
> 标签：javascript, html, canvas

我确定这一定是我忽略的一些简单的事情，但我似乎无法让我的画布显示存储在服务器上的 jpg。

```
<img id="test_img" alt="test" src="/media/tmp/a4c1117e-c310-4b39-98cc-43e1feb64216.jpg"/>
<canvas id="user_photo" style="position:relative;"></canvas>
<script type="text/javascript"> 
    var image = new Image();
    image.src = "/media/tmp/a4c1117e-c310-4b39-98cc-43e1feb64216.jpg";
    var pic = document.getElementById("user_photo");
    pic.getContext('2d').drawImage(image, 0, 0);
</script> 
```

按`<img>`预期显示，但是画布是空白的，尽管它似乎确实具有正确的尺寸。有人看到我做错了吗？

我疲惫的眼睛会感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T01:31:15.190

您可能想使用以下方法

```
image.onload = function() {
    pic.getContext('2d').drawImage(image, 0,0);
} 
```

因此，您可以确保在尝试绘制图像时加载图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-24T09:34:05.650

```
var initialFloorplanWidth = 0;
var initialFloorplanHeight = 0;
var canvasImage = new Image();
documentReady = function () {
    preloadFloorplan();
}
preloadFloorplan = function () {
    onLoad = function () {
        initialFloorplanHeight = canvasImage.height;
        initialFloorplanWidth = canvasImage.width;
        var canvasHtml = '<canvas id="MainCanvas" width="' + initialFloorplanWidth + '" height="' + initialFloorplanHeight + '">Canevas non supportés</canvas>';
        $("#MainContainer").append(canvasHtml);
        var canvas = $("#MainCanvas")[0];
        var canvasContext = canvas.getContext("2d");
        canvasContext.drawImage(canvasImage, 0, 0);
    }
    canvasImage.onload = onLoad;
    canvasImage.src = initialFloorplan;
} 
```

这段代码运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T01:21:56.620

尝试在加载文档时执行此操作。我感觉您的代码在图像可用之前正在运行。您还可以检测 img 本身何时加载。 [看到这个](https://stackoverflow.com/questions/821516/browser-independent-way-to-detect-when-image-has-been-loaded)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T01:24:46.993

也许这与您的其余代码有关。代码中是否标识了“user_photo”？

# ruby-on-rails - Rails Yaml 配置（最佳实践）

> ID：10593036
> 
> 赞同：1
> 
> 时间：2012-05-15T01:20:48.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, yaml

使用 /config 目录中的 yaml 文件在 environment.rb 中加载一些配置参数仍然被认为是最佳实践吗？这似乎是一个很好的方法，但如果有更好的方法，最好知道它。我试图找到有关在 Rails / YAML 中加载配置设置的文章，但大多数文章都没有超过 2009 年。让我觉得有更好的（或新的标准）方法来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T01:28:29.803

我最近一直在为此目的使用这个 gem：

*   设置逻辑：[https ://github.com/binarylogic/settingslogic](https://github.com/binarylogic/settingslogic)

基本上，您创建的`/config/application.yml`文件如下所示：

```
defaults: &defaults
  api:
    johns_api_co:
      api_key: my_key
      secret: shh!!!

    other_setting:
      this: "is a config setting"
      that: "and another thing"

development:
  <<: *defaults

test:
  <<: *defaults

production:
  <<: *defaults 
```

有很多方法可以做到这一点，但这很有效，而且非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:59:25.713

Heroku 建议将配置存储在您的系统环境变量（本地机器上的 .env 文件）中，并将其与工头 gem 一起使用。[https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)

一个优点是它隐藏了您的代码仓库中的所有凭据，当您希望将其公开时，这非常有用。

# javascript - CRM Javascript RetrieveMultiple 从 M:M 实体

> ID：10593039
> 
> 赞同：-1
> 
> 时间：2012-05-15T01:21:15.490
> 
> 标签：javascript, many-to-many, entity, crm

我需要将所有相关记录中的字段检索到父实体中。我已经让它在 1:M 关系中工作，但是我不知道如何让它在 M:M 关系中工作，因为没有关系 ID。我需要通过javascript来完成这个。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:33:08.123

我不确定您使用的是什么版本的（大概）Microsoft Dynamics CRM。我将假设您使用的是 2011。我也不完全清楚您具体要达到的目标，但也许这会有所帮助。

CRM 2011 提供了一个 OData 端点。[Mark Kovalcson 的这篇博](http://crmscape.blogspot.co.uk/2011/03/crm-2011-odata-json-and-crm-forms.html)文描述了如何使用它。

要获取帐户的名称和邮政编码，您可以使用以下内容作为选择查询：

```
http://crmserver/MyOrgName/XRMServices/2011/OrganizationData.svc/AccountSet(guid'5B19D04F-C48E-E111-92D4-00155D107003')?$select=Name,Address1_PostalCode 
```

如果您想通过与潜在客户的 N:N 关系（称为 accountleads_association）查看子记录的所有实例，您可以使用：

```
http://crmserver/MyOrgName/XRMServices/2011/OrganizationData.svc/AccountSet(guid'5B19D04F-C48E-E111-92D4-00155D107003')/accountleads_association 
```

您可以使用 $expand 查询选项将两者结合起来：

```
 http://crmserver/MyOrgName/XRMServices/2011/OrganizationData.svc/AccountSet(guid'5B19D04F-C48E-E111-92D4-00155D107003')$select=Name&$expand=accountleads_association 
```

有关 OData 查询选项的更多详细信息，请[点击此处](http://msdn.microsoft.com/en-us/library/gg309461.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T04:38:01.087

为此，我使用了 IFRAME 并通过 IFRAME 显示数据，而不是通过查询拉取 CRM 信息。

# javascript - 使用 jquery 获取和修改 iframe 内容

> ID：10593040
> 
> 赞同：1
> 
> 时间：2012-05-15T01:21:17.893
> 
> 标签：javascript, jquery, iframe

我想将标记添加到 iframe 的正文标记。以下代码可以做到这一点，但前提是 iframe 内容对象位于点击事件内。这是示例：

```
$(document).ready( function() {

    var tinymceFrame = $('#editor_ifr').contents().find('#tinymce');

    $('body').on('click', 'button', function() {
        $(tinymceFrame).append('<img class="widgetty" title="Widget" src="" />');
    });
}); 
```

这不起作用，但如果我在 click 事件中移动 tinymceFrame 行，它将起作用。

此外，在将图像添加到 iframe 的正文标签后，如何触发该图像上的点击事件？我试过类似的东西：

```
$(tinymceFrame).on('click', '.widgetty', function() {
    alert('test');
}); 
```

# asp.net - 显示从代码隐藏传递文本的 div

> ID：10593041
> 
> 赞同：0
> 
> 时间：2012-05-15T01:21:20.887
> 
> 标签：asp.net

如何将文本消息与此功能一起传递以显示在 div 上？从后面的代码

```
 <div class="success" id="divStatus" runat="server" visible="false" ></div>

Page.ClientScript.RegisterStartupScript(this.GetType(),"somekey","function autoHide(){ setTimeout(function() {document.getlementById('"+divStatus.ClientID+"').style.display='none';},5000);};",true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:30:03.733

你可以这样做：

```
 string script = @"document.getElementById('" + divStatus.ClientID + "').innerHTML='You are done!' ;setTimeout(function(){document.getElementById('" + divStatus.ClientID + "').style.display='none';},5000);";
 Page.ClientScript.RegisterStartupScript(this.GetType(), "somekey", script, true); 
```

效果将是：将 divStatus div 的内部 HTML 更改为“你完成了”，然后 5 秒后它会消失 div。

# android - 我的书签/历史活动的适当存储和显示？

> ID：10593047
> 
> 赞同：4
> 
> 时间：2012-05-15T01:21:52.583
> 
> 标签：android, android-activity, bookmarks

我想要一个简单的书签和/或我的应用程序的历史记录，我想知道最合适的存储是什么？文本文件或首选项中的文本，或者可能是数据库？哪个在更新中最灵活，对空间和查找时间最有效？

对于显示，我认为[这](http://www.learn-android.com/2009/12/05/lots-of-lists-1-simple/)将是一个很好的起点，但是向某些项目添加图标会很容易吗？

**编辑：**

我终于设置了一个应该连接到数据库的书签活动：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bookmarkview);
    Cursor cursor = managedQuery(getIntent().getData(), new String[] {Bookmark.TITLE, Bookmark.URL},
            null, null, Bookmark.DEFAULT_SORT_ORDER);

    setListAdapter(new SimpleCursorAdapter(this, R.layout.bookmarkitem, cursor,
            new String[] { Bookmark.TITLE }, new int[] { android.R.id.text1 }));
    findViewById(R.id.addBookmark).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            ContentValues values = new ContentValues();
            values.put("url", _url);
            values.put("title", _title);

            // When the update completes,
            // the content provider will notify the cursor of the change, which will
            // cause the UI to be updated.
            getContentResolver().update(_myuri, values, null, null);
        }
    });
} 
```

书签.java：

```
package com.tunes.viewer.Bookmarks;

import android.net.Uri;
import android.provider.BaseColumns;

/*
 * Database will have:
 * pk - primary key
 * title - the name of the bookmark.
 * url - the url.
 */
public class Bookmark implements BaseColumns{

    public static final String AUTHORITY = "com.tunes.viewer";

    /**
     * The content:// style URL for this table
     */
    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/Bookmarks");

    /**
     * The MIME type of {@link #CONTENT_URI} providing a directory of notes.
     */
    public static final String CONTENT_TYPE = "vnd.android.cursor.dir/vnd.google.note";

    /**
     * The MIME type of a {@link #CONTENT_URI} sub-directory of a single note.
     */
    public static final String CONTENT_ITEM_TYPE = "vnd.android.cursor.item/vnd.google.note";

    /**
     * The default sort order for this table
     */
    public static final String DEFAULT_SORT_ORDER = "title";

    /**
     * The title of the note
     * <P>Type: TEXT</P>
     */
    public static final String TITLE = "title";

    /**
     * The url
     * <P>Type: TEXT</P>
     */
    public static final String URL = "url";

} 
```

我似乎已经解决了我遇到的大部分问题，但不幸的是，当我单击“添加”按钮（调用上面的 onclick）时，它并没有添加到数据库中。此外，我将数据添加到数据库中，但它没有显示在视图中。这里的光标/适配器有什么问题？完整来源在[这里](https://bitbucket.org/LBryan/tunesviewer-android/changeset/8e0734931418)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T07:43:17.993

我建议，你去数据库。这将是满足您要求的简单有效的解决方案。

一张桌子`sqlite`就可以满足您的要求。因为您需要维护`url`您访问过的列表。该表也将满足您存储书签的要求。

你的表格格式可能是这样的。

```
_____________________________________________________________________________________
Id(Auto-increment) | Title of page | Url of Page |name of icon(if needed) |isBookmark |
_____________________________________________________________________________________ 
```

这可能是一个很好的结构来满足您的要求。将 isBookmark 设置为 0/1 以将特定链接设置为书签或取消添加书签。

**编辑**

*   我不建议您使用 SharedPreferences 并且我不会（尽管它是直截了当且易于实现），原因在于 SharedPreferences 的非常定义，它说：
    “ *SharedPreferences 类提供了一个通用框架，允许您保存和检索持久密钥-原始数据类型的值对。您可以使用 SharedPreferences 来保存任何**原始数据：布尔值、浮点数、整数、长整数和字符串**。* ”
    现在我无法想象一种将`ArrayList<String>`（Urls）存储在这些原始数据类型中的方法。

*   还有另一种解决方法。它是对象序列化。您可以将完整的 arraylist 实例保存到文件中，下次需要此对象时，类似地对其进行反序列化。这是序列化的示例代码。

.

```
public void serializeMap(ArrayList<String> list) {
    try {
        FileOutputStream fStream = openFileOutput(namefile.bin, Context.MODE_PRIVATE) ;
        ObjectOutputStream oStream = new ObjectOutputStream(fStream);
        oStream.writeObject(list);        
        oStream.flush();
        oStream.close();
        Log.v("Serialization success", "Success");
    } catch (Exception e) {
        Log.v("IO Exception", e.getMessage());
    }
} 
```

但是这种方法不太推荐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T16:03:20.707

我同意 WareNinja 的观点——`SharedPreferences`数据区域对于简单的非关系数据来说已经足够了。[这个 SO 答案](https://stackoverflow.com/a/2614771/1348379)非常全面地描述了实现`Activity`和/或应用程序范围的 SharedPreferences 的细微差别。

SharedPreferences 框架将处理所有数据持久性，最大限度地减少您需要编写的代码量以及您对类似 db 的“更新”事务的暴露。但是请注意，在扩展您的应用程序方面，这种媒体功能强大但不够灵活。在您觉得需要扩展存储的数据类型的那一刻，转移到 SQLite 或类似的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T08:46:26.910

我建议使用 SharedPreferences 和/或 memdiskcache，它们都可以快速无缝地工作。ps 没有反对使用 sqlite，但是我总是尽量避免将 db 用于客户端应用程序。

抽象本地存储的示例库（没有数据库！）； [https://github.com/wareninja/generic-store-for-android](https://github.com/wareninja/generic-store-for-android)

您可以以键值形式存储和检索任何类型的数据，
从 memdiskcache 加载 java 对象的示例代码；

```
String keyPrefix = "blabla1";
if (GenericStore.isCustomKeyExist(GenericStore.TYPE_MEMDISKCACHE, keyPrefix, this)) {

                mNewPoiDataList = (NewPoiDataList)GenericStore.getObject(GenericStore.TYPE_MEMDISKCACHE
                        , keyPrefix, this);
            } 
```

# perl - 如何使用 Perl 将两条线组合在一起？

> ID：10593050
> 
> 赞同：0
> 
> 时间：2012-05-15T01:22:05.543
> 
> 标签：perl

如何使用 Perl 将两条线组合在一起？我正在尝试使用 Perl 正则表达式组合这两行：

```
__Data__
test1 - results
dkdkdkdkdkd 
```

我希望输出是这样的：

```
__Data__
test1 - results dkdkdkdkdkd 
```

我认为这会实现这一点但不起作用：

```
$_ =~ s/__Data__\n(test1.*)\n(.*)\n/__Data__\n$1 $2/smg; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:35:56.937

如果你有一个多行字符串：

```
s/__Data__\ntest1.*\K\n//g; 
```

修饰符只使`/s`通配符`.`match `\n`，所以它会导致`.*`你的换行符啜泣并导致 match`\n`被替换到它出现的最后一个位置。根据您的数据，这可能很遥远。

`/m`修饰符在换行符处生成`^`和`$`匹配字符串，所以不是那么有用。逃生会保留之前的`\K`任何内容，因此您无需在之后将其放回原处。

如果您有一个单行字符串，例如在 while 循环中：

```
while (<>) {
    if (/^__Data__/) {
        $_ .= <>;  # add next line
        chomp;     # remove newline
        $_ .= <>;  # add third line
    }
    print;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:34:19.410

好像设置有问题`$_`。当我运行这个脚本时，我得到了我期望的输出（以及我认为你期望的输出）。主要区别是我在替换模式的末尾添加了一个换行符。其余的是装饰或测试基础设施。

### 脚本

```
#!/usr/bin/env perl
use strict;
use warnings;

my $text = "__Data__\ntest1 - results\ndkdkdkdkdkd\n";
my $copy = $text;

$text =~ s/__Data__\n(test1.*)\n(.*)\n/__Data__\n$1 $2\n/smg;

print "<<$copy>>\n";
print "<<$text>>\n"; 
```

### 输出

```
<<__Data__
test1 - results
dkdkdkdkdkd
>>
<<__Data__
test1 - results dkdkdkdkdkd
>> 
```

注意使用`<<`and`>>`来标记字符串的结尾；它在调试时通常会有所帮助。使用您喜欢的任何符号；只需将您显示的文本包含在此类标记中，以帮助您自己调试正在发生的事情。

（在适用于 x86/64 的 RHEL 5 上使用 Perl 5.12.1 进行了测试，但我认为代码与版本或平台无关。）

# javascript - 如何不使用广告创意库将浏览器历史记录与图片点击相关联

> ID：10593055
> 
> 赞同：0
> 
> 时间：2012-05-15T01:23:39.773
> 
> 标签：javascript, jquery

我正在开发一个汽车分类广告网站。我搜索了一个图片库来显示用户为提交提交的图片，并找到了一个简单的基于 jQuery 的画廊，名为 Ad Gallery，可以在[这里](http://coffeescripter.com/code/ad-gallery/)找到。

我喜欢画廊的简单性以及它与大多数浏览器（包括旧版 IE）的兼容性。我也喜欢能够使用左右箭头键浏览图像。还有一个不错的功能是它如何自动缩放宽和高的图像以适应容器。这些对我来说是关键功能。

这就是问题所在：单击每个缩略图，或按箭头键浏览图像，都算作一个新 URL，并使浏览器将其保存在历史记录中。因此，当用户想要返回提交内容的主页时，他们必须以与浏览图像相反的顺序循环浏览所有图像。这是一个巨大的不便，尤其是当他们试图返回搜索结果时。我在插件的文档中找不到任何可以解决此问题的内容。我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:34:56.507

似乎有一个参数：“update_window_hash”

试试看：

```
$('#myGallery').adGallery({update_window_hash: false}); 
```

完全不确定。否则它似乎不受支持。

# ember.js - 在 Ember.StateManager 中的状态之间传递参数

> ID：10593058
> 
> 赞同：1
> 
> 时间：2012-05-15T01:24:03.287
> 
> 标签：ember.js

使用 Ember.StateManager 时，Em.States 之间最常见的转换涉及一些参数。目前，当我使用 goToState 从一个状态转到另一个状态时，我正在使用 StateManager 中的实例变量在状态之间传递参数。这对我来说似乎非常丑陋。没有更标准的参数传递方式是否有原因？或者我应该使用不同的模式。

例如，

```
App.stateManager = Em.StateManager.create({
  initialState: 'listContacts',
  listContacts: Em.ViewState.create({
    ...
    actionSelectContact: function(manager, context) {
      manager.set('selectedContact', context);
      manager.goToState('showContact');
    }
  }),
  showContact: Em.ViewState.create({
    enter: function(manager, transition) {
      var contactToShow = manager.get('selectedContact');
      ...
    }
    ...
  })
}) 
```

有没有更好的方法来在状态之间传递这个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:55:58.630

Tom Dale 刚刚添加了一个 transitionTo 方法来处理这个问题。transitionTo 接受一个上下文对象以及目标状态的名称。现在在你的行动中，你可以做类似的事情，

```
viewStates = Ember.StateManager.create({
  showingPeople: Ember.ViewState.create({
    view: ContactListView
  }),

  showDetailAction: function(mgr, selectedPerson) {
    mgr.transitionTo('showingPersonDetail', selectedPerson);
  },

  showingPersonDetail: Ember.ViewState.create({
    setupContext: function(manager, context) {
      this.set('person', context);
    },
    view: PersonDetailView
  })
}) 
```

您还可以在此过程中获得更多更好的并传递多个状态的参数，例如，

```
stateManager.transitionTo(['planters', { company: true }], ['nuts', { product: true }]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:44:39.613

我不是 Ember 专家，但我认为您可以使用`stateManager.send()`方法来实现此目的，其中第二个参数将是您想要在状态之间传递的对象。

您的大部分答案都在[Ember.StateManager 文档](http://ember-docs.herokuapp.com/#doc=Ember.StateManager&src=false)中。

Ember 中有一个拉取请求，讨论了`goToState()`方法中的额外参数[here](https://github.com/emberjs/ember.js/issues/385)，但它已被关闭，因为它`goToState()`只能在内部使用[，正如 joewest 在这里](https://github.com/emberjs/ember.js/pull/415#issuecomment-3600461)与 tomdale 所说的一样：

> goToState 只能从一个状态中调用。为此，只需实现一个带有附加参数的操作，并让它为您调用 goToState。

# objective-c - 丢失对 splitViewController.viewController 的指针/引用

> ID：10593060
> 
> 赞同：1
> 
> 时间：2012-05-15T01:24:06.963
> 
> 标签：objective-c, ios, xcode, storyboard

我有一个应用程序，其根视图是拆分视图。Xcode 4.3、iOS 5.1，使用故事板、coreData 和 ARC。

拆分视图包含一个`viewController`（左侧的master VC）和一个`tabViewController`（右侧的detailVC）。

在主 VC`UITableViewControllers`上，根据用户选择的单元格，我有 4 个不同的滑入，一个 vanilla `UIViewController`，然后另一个`UITableViewController`. 向下钻取是：登录，选择州，选择县，选择市，（到目前为止的所有表格视图）然后在 中`UIView`，选择一些过滤，然后（最后一个表格视图）显示所有项目。这是对某个位置的钻取，当用户钻取时，`index:0`位于细节侧（包含地图视图）的视图控制器会放大。（希望这是有道理的）。

左边的最后一个 tableview 填充了一堆项目 - 右边的细节视图控制器是显示左边项目位置的注释地图，或者，因为它是一个 tabview，所有的细节列表物品详情。

一路上（在左侧向下钻取期间），我进行了设置`self.mapViewController = (MapViewController *) [tabBarController.viewControllers objectAtIndex:0];`，以便我可以将内容传递给地图，并且当传递新内容时（即`-(void)setLocationItem:(id)newLocationItem)`），地图将使用新项目配置视图。

在向下钻取期间一切正常 - 用户选择州、县、市和详细地图视图越来越近，但是当我们到达列出所有项目的表格视图时，我发现`self.splitViewController.viewControllers`（对于该视图控制器）是空的！我无法设置细节或地图视图控制器来传递属性（我想要缩放或显示细节的项目）。

我还应该提到，当我使用核心数据时，这一切都很好，并且`managedObjectContext`- 现在我正在处理一个 Web 服务，并且不再（对于代码的这个分支）传递一个托管对象 - 只是设置一个属性出现的下一个视图。

# javascript - 如何暂时禁用提交按钮 3 秒（onsubmit），然后重新启用它？

> ID：10593062
> 
> 赞同：9
> 
> 时间：2012-05-15T01:24:32.433
> 
> 标签：javascript, form-submit

我对使用 javascript 相当陌生，这是我目前所拥有的：

```
<!-- this is to disable the submit button and then re-enable it after 3 sec -->

<script type="text/javascript">

    function enable()
    {
    var x = document.LAYOUTFORM.getElementById("create_button");
    setTimeout(x.removeAttribute("disabled"), 3000);
    }

</script> 
```

对于按钮，我有这个：

```
<INPUT TYPE="SUBMIT" VALUE=" Create PDF " class="FORMBUTTON" ID="create_button" onclick="javascript:this.disabled=true;javascript:enable();"> 
```

我已经搞砸了几个小时，你们中的大多数人都会看到它并立即知道出了什么问题。我的表单 ID 和名称是 LAYOUTFORM。谁能告诉我我在这里做错了什么？

对于奖励积分，我还希望按钮的文本在禁用时暂时更改为“正在创建...”，然后再次返回创建 PDF。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T01:41:11.817

最简单的方法：

```
<input ... onclick="lockoutSubmit(this)"> 
```

在您的 javascript 中：

```
function lockoutSubmit(button) {
    var oldValue = button.value;

    button.setAttribute('disabled', true);
    button.value = '...processing...';

    setTimeout(function(){
        button.value = oldValue;
        button.removeAttribute('disabled');
    }, 3000)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:31:23.343

您可以通过`id`全局唯一或`name`封闭表单的唯一访问按钮

所以你必须要么

```
var x = document.getElementById("create_button"); 
```

或者

```
var x = document.LAYOUTFORM.elements["create_button_name"]; 
```

（假设 create_button_name 是按钮的名称：

```
<input type="submit" value=" Create PDF " id="create_button" name="create_button_name"  class="formButton" onclick="javascript:this.disabled=true;javascript:enable();"> 
```

)

setTimeout 的第一个参数应该是一个函数：

```
setTimeout(removeAttr, 3000);

function removeAttr() {
    x.removeAttribute("disabled")
} 
```

顺便说一句，HTML 不需要（也不应该，为了可读性等）全部大写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T01:31:32.433

在 document 和 getElementById 之间删除 LAYOUTFORM。

仅供参考，使用 firebug、chrome 开发人员工具或任何适用于 IE 的等效工具，您可以在控制台上使用您的 javascript。Console.log 还将输出您可以检查的文本甚至对象（在 CDT 中）。对探索非常有用:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T01:33:16.800

几个问题。首先，在 onclick 属性中，您使用 javascript: 用于 URL。onclick 属性中的内容已经被评估为代码。其次，您的 setTimeout 中的代码应该是字符串或函数名。你应该做更多这样的事情：

**HTML：**

```
<INPUT TYPE="SUBMIT" VALUE=" Create PDF " class="FORMBUTTON" ID="create_button" onclick="disable();"> 
```

**JavaScript：**

```
<script type="text/javascript">

    function disable() {
        x=document.getElementById("createbutton");
        x.disabled=true;
        x.value="Creating...";
        setTimeout(enable, 3000);
    }

    function enable() {
        x.disabled=false;
        x.value=" Create PDF ";
    }

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T01:33:33.090

您的 JavaScript 存在两个主要问题：

1.  该`.getElementById()`方法属于`document`，而不属于您的表单（或任何其他）元素。

2.  `setTimeout()`期望第一个参数是一个函数（或一个字符串，但几乎从不存在适合使用字符串的情况）。

尝试这个：

```
function enable() {
    var x = document.getElementById("create_button");
    setTimeout(function() {
       x.removeAttribute("disabled");
    }, 3000);
} 
```

您可能希望将禁用和重新启用组合成一个函数：

```
<INPUT TYPE="SUBMIT" ... onclick="temporaryDisable(this);">

function temporaryDisable(el) {
    el.disabled = true;
    setTimeout(function() {
       el.disabled = false;
    }, 3000);
} 
```

请注意，您不需要使用`.removeAttribute()`，您可以直接设置`.disabled`属性（就像您在禁用元素时已经做的那样）。

编辑：刚刚看到你问题的“奖励积分”部分。您只需要设置`.value`属性：

```
function temporaryDisable(el) {
    var oldLabel = el.value;
    el.value = "Creating...";
    el.disabled = true;

    setTimeout(function() {
       el.disabled = false;
       el.value = oldLabel;
    }, 3000);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-05T00:14:51.810

```
<script type="text/javascript">
function disDelay(obj){
obj.setAttribute('disabled','disabled');
setTimeout(function(){obj.removeAttribute('disabled')},30000)
}
</script>

<input type="submit" value="Submit" onclick="disDelay(this)"> 
```

[http://www.webdeveloper.com/forum/showthread.php?164239-Temporarily-Disable-Submit-Button](http://www.webdeveloper.com/forum/showthread.php?164239-Temporarily-Disable-Submit-Button)

# php - MySql 添加新记录时触发错误

> ID：10593066
> 
> 赞同：0
> 
> 时间：2012-05-15T01:24:49.043
> 
> 标签：php, mysql, triggers

我刚刚学习了 MySQL 触发器及其工作原理。我决定将它应用到我的小型网站上。

我有一个用户表，其中创建了新用户帐户，我想保留在 UsersHistory 表中添加新帐户的历史记录。

错误是当我执行以下查询时，它给了我一个错误：

询问：

```
CREATE TRIGGER User_After_Insert 
AFTER INSERT ON UsersHistory FOR EACH ROW WHEN NOT NEW.Deleted 
BEGIN                  
    SET @changeType = 'DELETE';  

    INSERT INTO UsersHistory (UserID, changeType) 
    VALUES (NEW.ID, @changeType);    
END;

CREATE TRIGGER User_After_Insert1 
AFTER INSERT ON UsersHistory FOR EACH ROW WHEN NEW.Deleted 
BEGIN              
    SET @changeType = 'NEW';  

    INSERT INTO UsersHistory (UserID, changeType) 
    VALUES (NEW.ID, @changeType);        
END; 
```

错误是：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以
> 在第 1 行的 'WHEN NOT NEW.Deleted BEGIN Â SET @changeType = 'DELE'附近使用正确的语法

我寻找解决方案，但我找不到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:30:05.213

您是否将 DELIMITER 设置为不同于“;”的内容？另外，我看到了一些我不知道在 mysql 中支持的东西（BEGIN 块之前的 WHEN 语句），所以这是我的建议：

```
delimiter //
CREATE TRIGGER User_After_Insert AFTER INSERT ON UsersHistory FOR EACH ROW
INSERT INTO UsersHistory (UserID, changeType) VALUES (NEW.ID, 'NEW')//
CREATE TRIGGER User_After_Delete AFTER DELETE ON UsersHistory FOR EACH ROW              
INSERT INTO UsersHistory (UserID, changeType) VALUES (OLD.ID, 'DELETE')//
delimiter ; 
```

**更新**

由于您在下面的评论，我认为您需要阅读更多关于触发器的内容。但这是要点。

以上语句，在实际数据库中创建触发器。实际上，您在数据库模式中“安装”触发器。如果您具有适当的帐户权限，则在任何 mysql 客户端中运行语句都会创建触发器。

现在，从这个阶段开始，您不再从 PHP 或类似的东西显式调用它们。它们存在于数据库中，并在您执行某些操作时自动调用。在上述情况下，从 UserHistory 中删除一条记录或将一条记录插入到 UserHistory 之后。

因此，当您从 php 脚本运行“INSERT INTO UserHistory VALUES ...”时，数据库将自动触发触发器。

希望这是有道理的。

# php - PHP 获取 system() 命令的 PID

> ID：10593067
> 
> 赞同：3
> 
> 时间：2012-05-15T01:24:59.053
> 
> 标签：php, unix

我正在尝试查找我从 php 网页进行的后台系统调用的 PID。如果我从 PHP 脚本中调用“ps -A”并将其打印到浏览器，它的输出与从终端调用“ps -A”的输出不同。这特别令人沮丧，因为我可以看到 PHP 从我的终端调用的后台进程的 PID，但不能从 PHP 中看到。

换句话说，我的代码如下所示：

```
system("process &");
system("ps -A"); 
```

但这不会产生与从终端调用 'ps -A' 相同的输出。不仅如此，“进程”还显示在终端中，而不是来自 PHP 调用。

谁能向我解释为什么会这样以及如何从我的 PHP 代码中获取“进程”的 PID？（作为记录，我还尝试过使用代码的变体，包括使用 exec() 和 passthru()，到目前为止，这些都没有奏效。）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:34:13.023

```
echo $! 
```

将获得最后一个命令的 PID，所以..

```
system("process & echo $!"); 
```

# java - 安卓应用。简单的计算器崩溃

> ID：10593068
> 
> 赞同：-1
> 
> 时间：2012-05-15T01:25:04.223
> 
> 标签：java, android

我是 android 开发的新手，我在第一次真正的尝试和一个应用程序时遇到了障碍。我正在尝试制作一个简单的计算器。但是，当我运行应用程序并输入要添加到计算器的序列中的第二个数字时，模拟器会显示“不幸的是，计算器已停止工作”。我查看了 logCat 并且有一大堆红色错误，所以我认为我不会发布所有这些错误。

我的代码如下：

```
 package com.example.helloandroid;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

import android.widget.Button;
import android.widget.EditText;
import android.view.View.OnClickListener;
import android.widget.Toast;
import android.content.Context;
import android.view.View;

public class HelloAndroidActivity extends Activity {
    EditText helloName;
    /** Called when the activity is first created. */

    int value = 0;
    int acuum = 0;
    boolean newValue = false;

    Button add, sub, mult, div, equ, one, two, three;
    TextView display;

    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        add = (Button) findViewById(R.id.Add);
        sub = (Button) findViewById(R.id.Sub);
        mult= (Button) findViewById(R.id.Mult);
        div = (Button) findViewById(R.id.Div);
        equ = (Button) findViewById(R.id.Equ);   
        one = (Button) findViewById(R.id.One); 
        two = (Button) findViewById(R.id.Two); 
        three = (Button) findViewById(R.id.Three); 
        display = (TextView) findViewById(R.id.Value);

        add.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                value = Integer.parseInt(display.getText().toString());
                acuum += value;
                newValue = true;
            }
        });

        sub.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                value = Integer.parseInt(display.getText().toString());
                acuum -= value;
                newValue = true;

            }
        });

        one.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if(newValue == true)
                    display.setText('1');
                else
                    display.setText(display.getText().toString() +  '1');

                newValue = false;

            }
        });

        two.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if(newValue == true)
                    display.setText('2');
                else
                    display.setText(display.getText().toString() +  '2');

                newValue = false;

            }
        });

    }

} 
```

只是为了尝试进一步澄清。如果我输入 1 + 2，当我单击 2 时，应用程序就会崩溃。我觉得这是一个简单的错误，我只是在看。任何帮助是极大的赞赏。

预先感谢！

LogCat 价值：

05-15 02:39:30.047：D/gralloc_goldfish(540)：没有检测到 GPU 仿真的仿真器。05-15 02:39:30.097: I/dalvikvm(540): threadid=3: 对信号 3 做出反应 05-15 02:39:30.128: I/dalvikvm(540): 将堆栈跟踪写入 '/data/anr/ traces.txt' 05-15 02:39:46.427：W/ResourceType(540)：获取资源编号 0x00000032 05-15 02:39:46.427 的值时没有包标识符：D/AndroidRuntime(540)：关闭 VM 05 -15 02:39:46.427: W/dalvikvm(540): threadid=1: 线程退出未捕获异常 (group=0x409c01f8) 05-15 02:39:46.437: E/AndroidRuntime(540): FATAL EXCEPTION: main 05 -15 02:39:46.437: E/AndroidRuntime(540): android.content.res.Resources$NotFoundException: 字符串资源 ID #0x32 05-15 02:39:46.437: E/AndroidRuntime(540): 在 android.content .res.Resources.getText(Resources.java:247) 05-15 02:39:46.437: E/AndroidRuntime(540):

对 logCat 的格式感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:54:22.937

你可能想看看几件事。

您`'2'`在一些使用字符串可能更有意义的地方使用字符`"2"`。例如：

```
display.setText('1'); 
```

和：

```
display.setText(display.getText().toString() +  '2'); 
```

我认为这是导致您的具体问题的第一个问题。对此的支持在于您的错误日志中的以下错误：

> 致命异常：主 05-15 02:39:46.437：E/AndroidRuntime(540)：
> android.content.res.Resources$NotFoundException：
> 字符串资源 ID #0x32

`#0x32`(hex 32) 是 的整数值`'2'`。如果您查看[`TextView`文档](http://developer.android.com/reference/android/widget/TextView.html)，您会看到一些原型`setText`，第一个原型采用完整的资源 ID：

> 公共最终无效 setText (int resid)

这解释了正在发生的事情。被`'2'`视为整数并用于查找资源（不存在）。

* * *

初始化为 true 而不是 false 可能也是一个好主意`newValue`，因为这应该是初始状态。否则，如果您的计算器在显示屏上以“0”开头，则按下该`1`按钮会给您，`01`而不是`1`.

# php - PHP 的 array_combine 可以用来创建一个带有（稀疏）数字键的关联数组吗？

> ID：10593072
> 
> 赞同：-1
> 
> 时间：2012-05-15T01:26:33.227
> 
> 标签：php, arrays

我使用 preg_match 在网页中查找键和值。一些键是数字，例如 101357，但大多数是字符串。当我使用 array_combine 创建具有这些键和值的数组时，它将作为数字的键转换为从键 0 开始的有序数组元素：

成立：

```
"ABC"    => "Value1",
"101397" => "Value2",
"DEF"    => "Value3",
"401995" => "Value4" 
```

所以 $keys = array("ABC","101397","DEF","401995") 和 $vals = array("Value1",...)

```
print_r(array_combine($keys, $vals)) produces:

"ABC" => "Value1"
0     => "Value2"
"DEF" => "Value3"
1     => "Value4" 
```

所以我失去了键的值。在我找到更优雅的解决方案（如果可能）之前，我会将 array_combine 展开为

```
foreach($keys as $idx=>$key) 
{
    $result[$key] = $vals[$val];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T01:32:35.960

我没有得到和你一样的结果：

```
$array = array("ABC" => "Value1",
"101397" => "Value2",
"DEF" => "Value3",
"401995" => "Value4");

$keys = array_keys($array);
$values = array_values($array);

print_r(array_combine($keys, $values)); 
```

给出：

```
Array ( [ABC] => Value1 [101397] => Value2 [DEF] => Value3 [401995] => Value4 ) 
```

显示 和 的`$keys`值`$values`：

```
print_r($keys);
print_r($values);

Array ( [0] => ABC [1] => 101397 [2] => DEF [3] => 401995 )
Array ( [0] => Value1 [1] => Value2 [2] => Value3 [3] => Value4 ) 
```

即使在可能的情况下使用非字符串键也会产生相同的结果。

```
$array = array("ABC" => "Value1",
101397 => "Value2",
"DEF"  => "Value3",
401995 => "Value4");

$keys = array_keys($array);
$values = array_values($array);

print_r(array_combine($keys, $values));

Array ( [ABC] => Value1 [101397] => Value2 [DEF] => Value3 [401995] => Value4 ) 
```

# java - 如何在基于 Swing 或 NetBeans 平台的 Java GUI 应用程序中更改 WM_CLASS 值？

> ID：10593075
> 
> 赞同：7
> 
> 时间：2012-05-15T01:26:59.313
> 
> 标签：java, swing, netbeans, xorg

所有基于 Swing/NetBeans 的 Java GUI 应用程序似乎都具有相同的`WM_CLASS`价值：

```
WM_CLASS(STRING) = "sun-awt-X11-XFramePeer", "java-lang-Thread" 
```

该参数可以通过发出`xprop`命令并指向窗口来查看。自定义它的实际目的是让类似 Mac 的扩展坞（例如 AWN（可能还有 Ubuntu 的 Unity））区分应用程序窗口并将它们分组在应用程序的固定启动器图标下。为此，需要在或中的文件中`StartupWMClass`相应地设置参数。不用说，如果多个应用程序对.`.application``~/.local/share/applications``/usr/share/applications``WM_CLASS`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-23T19:03:09.367

[这篇博](http://elliotth.blogspot.it/2007/02/fixing-wmclass-for-your-java.html)文在其中找到了控制它的字段[`Toolkit`](https://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html)，名为`awtAppClassName`. 它建议使用反射来修改它：

```
Toolkit xToolkit = Toolkit.getDefaultToolkit();
java.lang.reflect.Field awtAppClassNameField = xToolkit.getClass().getDeclaredField("awtAppClassName");
awtAppClassNameField.setAccessible(true);
awtAppClassNameField.set(xToolkit, applicationName); 
```

# c# - 如何根据控制器中的名称获取文本框值？

> ID：10593082
> 
> 赞同：0
> 
> 时间：2012-05-15T01:27:37.797
> 
> 标签：c#, asp.net, .net

有谁知道如何根据控制器中的名称获取文本框值？

例子：

```
<asp:TextBox runat="server" ID="stDate" Text='<%# Eval("StartDate")%>' Width="6em" /> 
```

当我从源代码中读取时，它显示如下：

```
<input name="ctl00$cplh$GridView1$ctl10$stDate" type="text" id="stDate" style="width:6em;" /> 
```

如何根据`ctl00$cplh$GridView1$ctl10$stDate`控制器中的名称获取获取此文本框的值？

注意：我想这样做的原因是因为我有超过 1 个文本框使用相同的 ID（stDate）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:31:21.653

要获取页面上生成的ID，您必须获取ClientID

```
stDate.ClientID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:39:36.947

我想建议几件事：

*   ID 必须是唯一的，您应该为页面中的每个控制器分配一个唯一标识符。
*   .NET 需要一个连接到您的控件的钩子 - 因此，如果它将由 .NET 创建，它需要设置名称（即使您尝试强制它也无法更改它）。
*   如果要在控制器之间分配通用名称，请使用属性类，例如： `<input id="txtbox1" class="commonController" type="text" value="input1"> <input id="txtbox2" class="commonController borderClass" type="text" value="input2">`

*pd：记住，你可以为一个控制器分配多个类。*

*   还请记住，这`id`仅用于客户端 DOM 操作......`name`浏览器实际发布内容需要

如果您想了解更多信息，请查看[此处](https://stackoverflow.com/questions/7470268/html-input-name-vs-id)和[此处](https://stackoverflow.com/questions/740367/html-name-attribute-generated-for-asp-net-child-controls-instead-of-the-uniqu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T06:11:36.500

如果您使用 ASP.NET 4，您可以在文本框中将 ClientIDMode 设置为静态，然后 asp 会保留您设置的 ID。

```
<asp:TextBox runat="server" ID="stdate" ClientIDMode="Static" /> 
```

如果您需要在客户端脚本中使用文本框，这会有所帮助。[这](http://weblogs.asp.net/asptest/archive/2009/01/06/asp-net-4-0-clientid-overview.aspx)是一篇关于它的文章。您需要确保 id 是唯一的，如果您需要一个通用名称，最好使用 Luis 建议的类。

# iphone - iPhone 客户端-服务器应用程序中的请求和响应队列

> ID：10593088
> 
> 赞同：0
> 
> 时间：2012-05-15T01:29:38.927
> 
> 标签：iphone, objective-c, ios, http

如何在 iPhone 客户端-服务器应用程序中实现具有来自服务器的请求和响应的队列？

我对这种类型很陌生，有什么可以参考的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:06:03.590

使用 NSURLConnection API。这是一个用于管理来自 iOS 的请求的高级 API。

这是 Apple 的文档，它们非常具有描述性 [https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

通常，该编程模式非常接近您在浏览器中从 JavaScript 发出 AJAX 请求的方式。

# python - 我正在尝试编写一个函数，以便它接收一组记录并将它们存储为 csv 格式

> ID：10593094
> 
> 赞同：0
> 
> 时间：2012-05-15T01:30:35.457
> 
> 标签：python, csv

到目前为止，我在函数中所能做的就是将所有数据存储两次。

```
import csv
def csvWriter(filename, records): 
  header = []
  for i in records:
    for v in i:
      header.append(v)
  test = open(filename,'w')
  dict_wr = csv.DictWriter(test,header)
  dict_wr.writerow(dict(zip(header,header)))
  for i in records:
    dict_wr.writerow(dict(zip(header,i.values())))
  test.close()
  return '%d records processed.' % len(records) 
```

文件包含：

```
a,b,a,b
1,2,1,2
3,4,3,4 
```

我相信我发现了问题，在 for 循环中，我无法创建正确的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:19:39.200

看起来您在此示例中的记录是 2 个具有相同键（'a' 和 'b'）的字典。您可以通过从第一个字典中获取标题来解决此问题：

```
for i in records[0]:
    for v in i:             
        header.append(v) 
```

但是，如果您的其他记录具有唯一的键值，您可能希望将它们包含在标题中：

```
for i in records:
    for v in i:
        if v not in header: header.append(v) 
```

最后，如果您在标头中有重复的值，并且您让 DictWriter 写入一行，它将为每个重复的标头值重复条目。例如，

```
import csv
testfile = open("test.csv", "w")
header = ["a","b", "a","b"]                      #duplicate header fields
writer = csv.DictWriter(testfile, header)
writer.writerow(dict(zip(header, header)))
writer.writerow({header[0]:"A", header[1]:"B"})  #notice it writes 4 values to the row
testfile.close() 
```

# algorithm - 纯函数集

> ID：10593096
> 
> 赞同：3
> 
> 时间：2012-05-15T01:30:50.497
> 
> 标签：algorithm, data-structures, functional-programming, set, referential-transparency

有没有实现纯函数集的算法？

预期的操作将是*union*，*intersection*，*difference*，*element ？*，*空？*并*毗邻*。

不过，这些并不是硬性要求，我很乐意学习一种只实现其中一部分的算法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T02:02:10.200

您可以使用纯粹的功能映射实现，您只需忽略这些值。

请参阅[http://hackage.haskell.org/packages/archive/containers/0.1.0.1/doc/html/Data-IntMap.html](http://hackage.haskell.org/packages/archive/containers/0.1.0.1/doc/html/Data-IntMap.html)（链接自[https://cstheory.stackexchange.com/questions/1539/whats- new-in-purely-functional-data-structures-since-okasaki](https://cstheory.stackexchange.com/questions/1539/whats-new-in-purely-functional-data-structures-since-okasaki) )。

（旁注：有关功能数据结构的更多信息，请参阅[http://www.amazon.com/Purely-Functional-Structures-Chris-Okasaki/dp/0521663504](https://rads.stackoverflow.com/amzn/click/com/0521663504)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T07:10:26.903

几乎所有数据结构都存在纯粹的功能实现。对于集合或映射，您通常使用某种形式的搜索树，例如红/黑树或 AVL 树。函数式数据结构的标准参考是 Okasaki 的书：

[http://www.cambridge.org/gb/knowledge/isbn/item1161740/](http://www.cambridge.org/gb/knowledge/isbn/item1161740/)

通过他的论文可以免费获得其中的重要部分：

[http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T03:16:24.700

@ninjagecko 的答案中的链接很好。我最近关注的是 Clojure 中使用的持久数据结构，它们是函数式的、不可变的和持久的。

可以在这篇由两部分组成的博客文章中找到持久哈希映射的实现描述：

[http://blog.higher-order.net/2009/09/08/understanding-clojures-persistenthashmap-deftwice/](http://blog.higher-order.net/2009/09/08/understanding-clojures-persistenthashmap-deftwice/)

[http://blog.higher-order.net/2010/08/16/assoc-and-clojures-persistenthashmap-part-ii/](http://blog.higher-order.net/2010/08/16/assoc-and-clojures-persistenthashmap-part-ii/)

这些是在[这个参考请求问题](https://cstheory.stackexchange.com/questions/1539/whats-new-in-purely-functional-data-structures-since-okasaki)中找到的一些想法的实现（参见第一个答案，第一个条目） 。

从这些结构中产生的集合支持您需要的功能：

[http://clojure.org/data_structures#Data Structures-Sets](http://clojure.org/data_structures#Data%20Structures-Sets)

剩下的就是[浏览源代码并试着绕开它](https://github.com/clojure/clojure/blob/master/src/clj/clojure/set.clj)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T06:43:06.823

[这是](http://caml.inria.fr/cgi-bin/viewvc.cgi/ocaml/trunk/stdlib/set.ml?view=markup)OCaml 中纯函数集的实现（它是 OCaml 的标准库）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T12:36:30.820

> 有没有实现纯函数集的算法？

您可以使用许多不同的纯函数*数据结构*来实现集合操作。有些比其他的具有更好的复杂性。

示例包括：

**[列表](http://hackage.haskell.org/packages/archive/base/4.5.0.0/doc/html/Data-List.html#g:20)**

我们在哪里：

```
List Difference:

(\\) :: Eq a => [a] -> [a] -> [a] 
```

该`\\`函数是列表差异（（非关联）。在 的结果中`xs \\ ys`，ys 的每个元素的第一次出现依次（如果有）已从 xs 中删除。因此

```
union :: Eq a => [a] -> [a] -> [a] 
```

union 函数返回两个列表的列表并集。例如，

```
"dog" `union` "cow" == "dogcw" 
```

第一个列表的重复项和元素将从第二个列表中删除，但如果第一个列表包含重复项，结果也会如此。它是 unionBy 的一个特例，它允许程序员提供他们自己的相等性测试。

```
intersect :: Eq a => [a] -> [a] -> [a] 
```

intersect 函数获取两个列表的列表交集。例如，

```
[1,2,3,4] `intersect` [2,4,6,8] == [2,4] 
```

如果第一个列表包含重复项，结果也会如此。

**不可变集**

可以设计更高效的数据结构来提高集合操作的复杂性。例如，[`Data.Set`](http://hackage.haskell.org/packages/archive/containers/0.5.0.0/doc/html/Data-Set.html)Haskell 中的标准库将集合实现为大小平衡的二叉树：

*   Stephen Adams，“高效集合：平衡行为”，函数式编程杂志 3(4):553-562，1993 年 10 月，[http](http://www.swiss.ai.mit.edu/~adams/BB/) ://www.swiss.ai.mit.edu/~adams/BB/ 。

这是什么数据结构：

```
data Set a    = Bin !Size !a !(Set a) !(Set a)
              | Tip

type Size     = Int 
```

产生复杂度：

*   并集、交集、差异：*O(n+m)*

# python - 你如何在 Python 中使用 numpy 处理自然日志（例如“ln()”）？

> ID：10593100
> 
> 赞同：139
> 
> 时间：2012-05-15T01:30:59.363
> 
> 标签：python, numpy, logarithm, natural-logarithm

使用 numpy，我该如何执行以下操作：

```
ln(x) 
```

是否等同于：

```
np.log(x) 
```

`log`对于这样一个看似微不足道的问题，我深表歉意，但我对和之间的区别的理解`ln`是`ln`logspace e？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-05-15T01:41:46.387

[`np.log`](https://numpy.org/doc/stable/reference/generated/numpy.log.html)是`ln`，而[`np.log10`](https://numpy.org/doc/stable/reference/generated/numpy.log10.html)您的标准以 10 为底对数。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-15T01:41:39.683

正确，`np.log(x)`是 的自然对数（基本`e`对数）`x`。

对于其他基础，请记住这条对数定律：某个任意 base 中的日志在`log-b(x) = log-k(x) / log-k(b)`哪里，并且是base 中的日志，例如`log-b``b``log-k``k`

这里 k =`e`

```
l = np.log(x) / np.log(100) 
```

并且`l`是 x 的 log-base-100

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-08-21T15:20:55.783

我通常这样做：

```
from numpy import log as ln 
```

也许这可以让你更舒服。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-20T16:57:21.373

Numpy 似乎从 MATLAB/Octave 中得到了启发，并用于`log`“log base e”或`ln`. 也像 MATLAB/Octave 一样，Numpy 不提供任意基数的对数函数。

如果您感到`log`困惑，您可以创建自己的`ln`引用 numpy.log 函数的对象：

```
>>> import numpy as np
>>> from math import e
>>> ln = np.log  # assign the numpy log function to a new function called ln
>>> ln(e)
1.0 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-06T19:52:55.303

```
from numpy.lib.scimath import logn
from math import e

#using: x - var
logn(e, x) 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2020-10-16T01:29:33.713

您可以通过将 log 的基础设置为 e 来简单地做相反的事情。

```
import math

e = 2.718281

math.log(e, 10) = 2.302585093
ln(10) = 2.30258093 
```

# c++ - cout 如何区分基本类型？

> ID：10593105
> 
> 赞同：1
> 
> 时间：2012-05-15T01:31:30.297
> 
> 标签：c++, types, cout

自从我从 C 转移到 C++ 后，我对 STL 的格式化输出有疑问。ostreams 如何区分一种基本类型和另一种？

在具有 printf 和格式化字符串的 C 中，它非常简单，但在 C++ ostreams 中以某种方式自动区分基本类型。这让我很困惑。

例如，在下面的代码中，

```
int i;
float f;

std::cout << i << std::endl;
std::cout << f << std::endl; 
```

cout 如何“知道” **i**是 int 而**f**是 float？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T01:48:41.807

编译器将运算符转换为函数调用。以便

```
std::cout << i 
```

变成

```
operator<<(std::cout, i) 
```

在标准库头文件深处的某个地方，有函数声明（功能上等同于）：

```
std::ostream& operator<<(std::ostream& o, int i);
std::ostream& operator<<(std::ostream& o, double d); 
```

也`operator<<`就是超载了。进行函数调用时，编译器会选择与传入参数最匹配的函数重载。

在 的情况下`std::cout << i`，`int`选择重载。在 的情况下`std::cout<<d`，`double`选择重载。

您可以通过一个人为的示例相当简单地看到函数重载的作用：

```
#include <stdio.h>

void print(int i) {printf("%d\n", i);}
void print(double d) {printf("%f\n", d);}

int main()
{
   int j=5;
   double f=7.7;

   print(j);
   print(f);
} 
```

产生输出：

```
5
7.700000 
```

自己试试吧：http: [//ideone.com/grlZl](http://ideone.com/grlZl)。

**编辑**：正如 Jesse Good 所指出的，有问题的函数是成员函数。所以我们真的有：

```
std::cout << i 
```

变成

```
std::cout.operator<<(i) 
```

并且在标题中有声明（相当于）：

```
class ostream {
    ostream& operator<<(int i);
    ostream& operator<<(double d);
    ...
}; 
```

然而，同样的基本思想也成立。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T01:34:43.750

每种类型（int、float 等）都有 operator<< 重载。然后编译器将在编译时选择正确的那个。通常，运算符<< 具有形式`std::ostream& operator<<(std::ostream& stream, int number )`，其中函数是定义在 std 命名空间中的全局函数。您可以通过在您自己的命名空间中声明此函数来覆盖该函数的定义（这是通过 Argument Dependent Lookup 完成的）。

该函数返回对流的引用这一事实意味着您可以将它们串在一起。请记住，每当您看到 operator<<，它实际上只是一个函数调用。

如果你想看看，并且你正在使用 VS，打开

> C:\Program 文件 (x86)\Microsoft Visual Studio 9.0\VC\include\ostream。

如果你好奇的话，你会在那里找到所有的定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T01:33:34.887

第二个参数的重载决议`operator<<`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T01:55:03.297

函数重载是编译时多态的一种形式。一个简单的例子：

```
void times_two(int& x) { x *= 2; }
void times_two(double& x) { x *= 2; }

int i = 2;
double d = 2.5;

times_two(i);  // i now 4
times_two(d);  // d now 5.0 
```

在`std::ostream`s such的情况下`std::cout`，`operator<<()`函数以类似的方式重载。从 GCC 3.4.4 附带的标准库中：

```
__ostream_type&
operator<<(int __n);

__ostream_type&
operator<<(double __f); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T01:34:42.540

这是一个重载的 ostream 运算符 <<。在 c++ 中，您可以根据其参数重载函数名称。这基本上就是这里发生的事情。[http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/](http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/)

# php - 将网站移动到 doteasy - 放置数据库常量的最佳位置？

> ID：10593108
> 
> 赞同：1
> 
> 时间：2012-05-15T01:31:55.353
> 
> 标签：php, document-root

这是我第一次将本地托管的 PHP 站点迁移到托管服务。我的网站是使用 web 根目录之外的 inc 文件夹（包括数据库常量）构建的，所以在我的本地机器上它位于

```
XAMPP/xamppfiles/htdocs/inc/ 
```

其余的文件，包括 common/ 目录，都在

```
XAMPP/xamppfiles/htdocs/mydomain/ 
```

大多数页面调用

```
include_once "common/base.php"; 
```

住在里面

```
htdocs/mydomain/common/ 
```

并通过调用包括数据库常量

```
include_once $_SERVER['DOCUMENT_ROOT'] . "/inc/constants.inc.php"; 
```

在我的本地站点上，$_SERVER['DOCUMENT_ROOT'] 输出“Applications/XAMPP/xamppfiles/htdocs/”，并且找到了 inc 文件。

不幸的是，在 DotEasy 网站上，没有找到这些文件。如果我回显 $_SERVER['DOCUMENT_ROOT']，则输出为“/home/myusername/public_html”。

我可以通过以下方式进入 inc/ 目录：

```
$temp_path = $_SERVER['DOCUMENT_ROOT'];
$temp_path = str_replace('public_html', '', $temp_path);
include_once $temp_path . "/inc/constants.inc.php"; 
```

但这是个好主意吗？担心 public_html 文件夹中有常量我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:53:56.103

Don't use `$_SERVER['DOCUMENT_ROOT']`.

Instead you should define the root directory based by one file, for example in the config file.

```
define('ROOT', __DIR__); //php >= 5.3 
```

or

```
define('ROOT', dirname(__FILE__)); // php < 5.3 
```

The use the `ROOT` as the base to include other file.

# android - android上的错误与不同的服装按钮

> ID：10593109
> 
> 赞同：0
> 
> 时间：2012-05-15T01:31:57.627
> 
> 标签：android

我的 android 项目有一个我无法解决的错误。

我在一个 xml 中有一个游戏菜单布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RootView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/gamemenu_background"
    android:orientation="vertical" >

    <Button
        android:id="@+id/gaveup_button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/gaveup_button">

    </Button>

    <Button
        android:id="@+id/choice_a_button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/choice_a_button">   

    </Button>

    <Button
        android:id="@+id/choice_b_button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/choice_b_button"/>

</RelativeLayout> 
```

因此，对于每个按钮，我在可绘制文件夹中都有一个 xml 和一个图像：

选择a_button_xml.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/choice_a_button"></item>
</selector> 
```

选择_b_button_xml.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/choice_b_button"></item>
</selector> 
```

在eclipse de layout的布局管理器中很好但是当我在虚拟设备上运行应用程序时出现错误并且应用程序无法启动：

```
05-15 01:22:52.284: D/dalvikvm(341): GC freed 605 objects / 48664 bytes in 166ms
05-15 01:22:52.446: D/dalvikvm(341): GC freed 59 objects / 2304 bytes in 46ms
05-15 01:22:52.814: D/dalvikvm(341): GC freed 138 objects / 6344 bytes in 42ms
05-15 01:22:53.124: D/dalvikvm(341): GC freed 48 objects / 1864 bytes in 44ms
05-15 01:22:53.724: E/dalvikvm-heap(341): 3686400-byte external allocation too large for this process.
05-15 01:22:53.724: E/(341): VM won't let us allocate 3686400 bytes
05-15 01:22:53.724: D/skia(341): --- decoder->decode returned false
05-15 01:22:53.735: D/AndroidRuntime(341): Shutting down VM
05-15 01:22:53.735: W/dalvikvm(341): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-15 01:22:53.735: E/AndroidRuntime(341): Uncaught handler: thread main exiting due to uncaught exception
05-15 01:22:53.754: E/AndroidRuntime(341): java.lang.RuntimeException: Unable to start activity ComponentInfo{sal.app/sal.app.SALActivity}: android.view.InflateException: Binary XML file line #29: Error inflating class <unknown>
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.os.Looper.loop(Looper.java:123)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-15 01:22:53.754: E/AndroidRuntime(341):  at java.lang.reflect.Method.invokeNative(Native Method)
05-15 01:22:53.754: E/AndroidRuntime(341):  at java.lang.reflect.Method.invoke(Method.java:521)
05-15 01:22:53.754: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-15 01:22:53.754: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-15 01:22:53.754: E/AndroidRuntime(341):  at dalvik.system.NativeStart.main(Native Method)
05-15 01:22:53.754: E/AndroidRuntime(341): Caused by: android.view.InflateException: Binary XML file line #29: Error inflating class <unknown>
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.view.LayoutInflater.createView(LayoutInflater.java:513)
05-15 01:22:53.754: E/AndroidRuntime(341):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-15 01:22:53.754: E/AndroidRuntime(341):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.app.Activity.setContentView(Activity.java:1622)
05-15 01:22:53.754: E/AndroidRuntime(341):  at sal.app.SALActivity.onCreate(SALActivity.java:23)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-15 01:22:53.754: E/AndroidRuntime(341):  ... 11 more
05-15 01:22:53.754: E/AndroidRuntime(341): Caused by: java.lang.reflect.InvocationTargetException
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.widget.Button.<init>(Button.java:65)
05-15 01:22:53.754: E/AndroidRuntime(341):  at java.lang.reflect.Constructor.constructNative(Native Method)
05-15 01:22:53.754: E/AndroidRuntime(341):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.view.LayoutInflater.createView(LayoutInflater.java:500)
05-15 01:22:53.754: E/AndroidRuntime(341):  ... 22 more
05-15 01:22:53.754: E/AndroidRuntime(341): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:447)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.content.res.Resources.loadDrawable(Resources.java:1705)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.content.res.TypedArray.getDrawable(TypedArray.java:548)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.view.View.<init>(View.java:1850)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.widget.TextView.<init>(TextView.java:326)
05-15 01:22:53.754: E/AndroidRuntime(341):  at android.widget.Button.<init>(Button.java:69)
05-15 01:22:53.754: E/AndroidRuntime(341):  ... 26 more
05-15 01:22:53.774: I/dalvikvm(341): threadid=7: reacting to signal 3
05-15 01:22:53.774: E/dalvikvm(341): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

那里发生了什么？此错误仅在具有大屏幕的虚拟设备中发生。

如果我将虚拟设备的最大 VM 应用程序堆大小设置为 48，则此应用程序有效。但这太多了..有什么方法可以让程序消耗更少的内存？

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:53:14.767

我认为崩溃是由于以下内容造成的：

```
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

您可能需要缩小图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:02:50.003

@Michaeldcooney 说了什么，您还应该检查内存泄漏。此外，您的虚拟设备的 VM 内存大小（即应用程序可用的内存大小，而不是设备总内存大小）是多少？

# jquery - 提交使用带有 div/jquery 的数据注释的 MVC3 表单

> ID：10593110
> 
> 赞同：1
> 
> 时间：2012-05-15T01:31:57.907
> 
> 标签：jquery, asp.net-mvc-3, forms, submit, data-annotations

所以，我在页面上有一个表单，我使用输入 type="submit" 来注册用户。添加数据注释，一些自定义的，一些内置的后，我想自定义输入提交按钮的外观，却发现我无法让它与页面上的其他按钮相匹配，这些按钮只是 div/链接。所以，我想把它做成一个div，在提交之前使用jquery提交表单和调用数据注释的内置和自定义jquery。我试过这个：

`@using (Html.BeginForm("Index", "Register", FormMethod.Post, new { @id = "registerForm" })) {` <div id="registerSubmit" class="divSubmit"> <a>注册</a> </div>`}`

`$("#registerSubmit").onclick(function () { $("#registerForm").submit(); });`

但是，这对我不起作用。有没有办法正确提交和调用 DA 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:36:49.193

这就是我用来实现相同目标的方法

```
$(document).ready(function () {

    var submitButton = document.getElementById("registerSubmit");

    submitButton.onclick = function (event) {
        // do cool stuff before submit like validation or confirmations, whatever
        if ($(this).valid()) {
            // more cool stuff
            $("#registerForm").submit();
        }
        return false;
    };
}); 
```

# focus - 专注于基于锚链接的文本区域

> ID：10593111
> 
> 赞同：0
> 
> 时间：2012-05-15T01:32:01.493
> 
> 标签：focus, textarea, anchor

我的网站中有一个消息传递功能，当用户单击回复按钮时，他们会被重定向到消息并基于锚链接获得 textarea 焦点。

所以链接结构是这样的：

```
view_message/4fad37da1df#reply 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:38:05.177

尝试：

```
if (window.location.hash) {
  $(window.location.hash).attr("tabindex", -1).focus();
} 
```

它应该检查 url 中是否有哈希，如果有，给目标 tabindex 属性的值为 -1 并应用焦点。

请参阅[https://stackoverflow.com/a/6188217/430191](https://stackoverflow.com/a/6188217/430191)了解 tabindex 属性的原因（有关 IE/Chrome/Safari 中键盘焦点的相关问题）

# objective-c - reloadData 方法不起作用 - 表为空

> ID：10593112
> 
> 赞同：0
> 
> 时间：2012-05-15T01:32:13.523
> 
> 标签：objective-c, cocoa, nstableview

我的 NSTableViewDelegate 类中有一个方法可以从外部类重新加载数据表：

```
- (void)reloadTable {

    NSLog(@"reload data %@", table);
    [table reloadData];
} 
```

当我尝试从外部类调用此方法时，尝试重新加载的表为空：

```
reload data (null) 
```

我在另一个类中使用以下代码调用此方法：

```
TableController *delegate = [[TableController alloc] init];
[delegate reloadTable]; 
```

现在，我认为这是因为我正在初始化一个表控制器的新实例并在该表控制器的实例上调用该方法。所以在我的`reloadTable`方法中，我使用`self.table`而不是表 - 这具有相同的结果：

```
reload data (null) 
```

在 .xib 中，dataSource 和 delegate 被设置为 TableController 类。我想应该注意的是，我使用的是基于视图的 tableview，而我没有使用绑定。我错过了什么？

编辑：从这些答案看来，这些问题可能是由于此类只是表视图的数据源和委托而引起的。我应该为 TableView 创建一个 ViewController 的新类吗？我是否正确地说存在的类将是“模型”类，而我将创建的新类将是 MVC 中的“控制器”类？

编辑 2：我创建了一个 TableViewController 类并将“视图”出口设置为“Panel.xib”中的我的表视图。在我需要从中重新加载表的另一个类中，我执行以下操作：

```
 TableViewController *tv = [[TableViewController alloc] initWithNibName:@"Panel" bundle:nil];
 [tv.table reloadData]; 
```

不会产生错误，但不会重新加载表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:51:56.467

您需要使用`-initWithNibName:bundle:`来创建您的 ViewController。

# php - 带有 jQ uery .toggleClass 的可选图像或使用 php/css 作为复选框的图像，大多数用户可以使用哪种方法？

> ID：10593124
> 
> 赞同：0
> 
> 时间：2012-05-15T01:34:33.167
> 
> 标签：php, javascript, html, css

我正在研究两种获得可选图像的方法，我想知道哪种解决方案最容易被尽可能多的用户访问。一种是使用 jQuery toggleClass

```
<html><head>
    <style type="text/css">
        img {
           padding: 10px;
           margin: 25px;
           float: left;
           background-color: #99BC99;
        }
        img.selected {
            background-color: #E13300;
        }
    </style>
    <script type="text/javascript" src="jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(function() {
            $('img').click(function(){
                $(this).toggleClass('selected');
            });
        });
    </script>
</head><body>
    <img src="images/image0.jpg">
    <img src="images/image1.jpg">
    <img src="images/image2.jpg">
    <img src="images/image3.jpg">
    <img src="images/image4.jpg">
    <img src="images/image5.jpg">
    <img src="images/image6.jpg">
    <img src="images/image7.jpg">
    <img src="images/image8.jpg">
</body></html> 
```

另一种方法使用没有javascript的html和css

```
<html><head>
    <style>
    input[type=checkbox] {
        display:none;
    }
    input[type=checkbox] + label {
        padding: 10px;
        margin: 25px;
        background-color: #99BC99;
        float: left;
    }
    input[type=checkbox]:checked + label {
        padding: 10px;
        margin: 25px;
        background-color: #E13300;
        float: left;
    }
    </style>
</head><body>
    <input type='checkbox'  value='image0' id="image0"/>
    <label for="image0"><img src="images/image0.jpg"></img></label>
    <input type='checkbox' value='image1' id="image1"/>
    <label for="image1"><img src="images/image1.jpg"></img></label>
    <input type='checkbox' value='image2' id="image2"/>
    <label for="image2"><img src="images/image2.jpg"></img></label>
    <input type='checkbox' value='image3' id="image3"/>
    <label for="image3"><img src="images/image3.jpg"></img></label>
    <input type='checkbox' value='image4' id="image4"/>
    <label for="image4"><img src="images/image4.jpg"></img></label>
    <input type='checkbox' value='image5' id="image5"/>
    <label for="image5"><img src="images/image5.jpg"></img></label>
    <input type='checkbox' value='image6' id="image6"/>
    <label for="image6"><img src="images/image6.jpg"></img></label>
    <input type='checkbox' value='image7' id="image7"/>
    <label for="image7"><img src="images/image7.jpg"></img></label>
    <input type='checkbox' value='image8' id="image8"/>
    <label for="image8"><img src="images/image8.jpg"></img></label>
</body></html> 
```

如果有的话，这两种关于可访问性的方法之间会有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:11:07.067

我知道有些人会阻止 javascript，所以我猜第二个选项是最容易访问的？

不管怎样，使用 javascript 让它看起来更漂亮，所以你应该做一些没有 javascript 的东西，然后在上面放一个 javascript 层。所以当人们关闭他们的javascript时它仍然有效。

# python - Python 错误或错误

> ID：10593129
> 
> 赞同：0
> 
> 时间：2012-05-15T01:34:52.243
> 
> 标签：python

我是 Python 的初学者，我已经编写了这个简单的代码，但是有一些我无法解决的错误:(

请问有人可以帮我吗？

```
//initialization
str = None
var = None

def setvar(val):
""" Sets the global variable "var" to the value in 'val' """
if val:
 print "setting variable 'var' to '$val'"  // we want to print the value of 'val'
else:
 print "un-setting variable 'var'"

 var = val
 return

if __name__ == 'main':
  try:
    setvar("  hello world!  ") // use this function to set the 'var' variable
    var.strip() // we want the leading and trailing spaces removed
    print str(var)
  except:
    print "something went wrong" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T01:38:24.737

您的代码示例存在一些问题。

首先，假设您在提出问题时忠实地保留了缩进，那就错了。的主体`setvar`应该从 . 缩进`def`。请确保您遵循 PEP 指南并为每个缩进级别使用四个空格。

其次，Python 中的注释标记`#`不是`//`.

接下来，如果要影响函数中的全局变量，则需要将其标记为。

第四，`var.strip()` *返回*新值，它不会就地操作。

此外，在您运行此脚本的情况下，的值`__name__`将是`__main__`而不是,。`main`

最后，您创建了`str`一个空变量，因此您不能像调用函数一样调用它。

以下工作正常：

```
# initialization
var = None

def setvar(val):
    """ Sets the global variable "var" to the value in 'val' """
    global var
    if val:
        print "setting 'var' to '$val'" #  we want to print the value of 'val'
    else:
        print "un-setting 'var'"

    var = val
    return

if __name__ == '__main__':
    try:
        setvar("  hello world!  ") #  use this function to set the 'var' variable
        var = var.strip() #  we want the leading and trailing spaces removed
        print str(var)
    except:
        print "something went wrong" 
```

另一件事可能是也可能不是问题。如果要打印第一条语句中的*值*，请不要使用. 相反，你可以有类似的东西：`val``print``$val`

```
print "setting variable 'var' to '%s'"%(val) 
```

而且，是的，我知道你*不需要*在单个值周围加上括号，这只是我的编码风格，而且我必须记住的少一件事:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:44:56.877

例如，您不能像在 Perl 或 PHP 中那样在 Python 中的字符串中使用变量名。您可以这样做：

```
print ("setting variable 'var' to '%s'" % val)  # we want to print the value of 'val' 
```

评论以“#”开头。

# php - PHP preg_quote() 和小于号

> ID：10593131
> 
> 赞同：0
> 
> 时间：2012-05-15T01:35:03.963
> 
> 标签：php

```
echo preg_quote("aaa<bbb"); 
```

应该写：

```
aaa\<bbb 
```

但我得到：

```
aaa\ 
```

这是制造问题的唯一标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:40:58.823

如果你想在浏览器中显示它是什么，你可以将它包装在`<pre>`标签中。

```
echo '<pre>'.preg_quote("aaa<bbb").'</pre>'; 
```

或者您可以使用 htmlspecialchars 来转义`<`.

```
echo htmlspecialchars(preg_quote("aaa<bbb")); 
```

# java - Java - MySQL --> SQLite - 无法使用 java 插入 SQLite 数据库

> ID：10593132
> 
> 赞同：0
> 
> 时间：2012-05-15T01:35:04.120
> 
> 标签：java, sqlite

iv 创建了一个非常适合 MySQL 的程序。但是，当我将其转换为 SQLlite 时，一切正常，例如创建表、getConnection() 到数据库以及向表中插入值除外？我无法使用 Java (Netbeans) 将值插入到 SQLite 数据库的表中。我只能插入一行但不能插入多行？在 MySQL 中，我可以一次插入多行，但是，我不能在 SQLite 中？

代码是（这仅适用于一行）：

```
 Connection con;
       Statement s= con.CreateStatement();
       String st = "Insert into table1 (10,'abc')";
       s.executeUpdate(st);
       s.close(); 
```

如果我做这样的事情（不工作超过一行 - 不知道为什么 - SQLite）：

```
 Connection con;
         Statement s= con.CreateStatement();
         String st = "Insert into table1 (10,'abc'), (5,'vfvdv')"; //now it doesnt    work since Im inserting more than one row. I can't figure out what Im doing wrong - 
         //Iv also tried Insert into table1(ID, Name) values (10,'abc'), (5,'afb'); but it dont work.
        s.executeUpdate(st);
        s.close(); 
```

任何java专家或任何人都可以帮助我解决这个问题。我无法弄清楚我做错了什么或任何事情，因为当我在“SQLite”命令行中键入我的命令时，它适用于所有。但是，在带有 SQLite 的 JAVA 中，由于某种原因我只能更新一行？但是，Java 和 MySQL 可以正常工作，但 SQLlite 不行。

任何人都可以澄清我做错了什么会很棒。非常感谢您阅读本文和您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:44:38.420

SQLite JDBC 驱动程序可能不支持多插入语法。这种语法也不是标准的，尽管许多数据库都支持它。

像这样进行多次插入的另一种选择是使用 PreparedStatement 的批处理机制。

```
Connection conn = ....;
PreparedStatement stmt = 
  conn.prepareStatement("INSERT INTO table1(id, name) VALUES (?, ?)");

stmt.setInt(1, 10);
stmt.setString(2, "abc");
stmt.addBatch();

stmt.setInt(1, 5);
stmt.setString(2, "vfvdv");
stmt.addBatch();

stmt.executeBatch(); 
```

通常，您会在循环中使用 setInt、setString、addBatch 序列，而不是像我在这里展示的那样展开，并在循环之后调用 executeBatch。这将适用于所有 JDBC 兼容的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:43:18.750

根据 SQL92 标准，多行插入不是标准的。

SQLite 从 3.7.11 版本开始支持它。

如果您在此版本下有一个版本，则需要为每一行插入一个...

# android - Android Activity 关闭 Flash

> ID：10593133
> 
> 赞同：1
> 
> 时间：2012-05-15T01:35:04.180
> 
> 标签：android, android-activity

我的问题真的很简单，我只是不知道如何解决它。我让我的应用程序在活动之间切换，当它切换到另一个活动时，它会从最终加载新活动时刚刚关闭的活动闪烁最后一个屏幕。我真的不知道为什么会这样，或者我可能知道如何处理它，但我不知道。有其他人知道为什么会发生这种情况或如何解决吗？

我在每个活动的 onPause() 中关闭活动，只调用完成。

提前致谢！如果您还需要任何其他信息，我将使用该信息进行更新。

威廉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:48:00.107

当 onPause() 被调用时，你有什么特别的理由想要完成活动吗？如果没有，那么您应该让 Android 系统管理您的 Activity 生命周期。

# dependency-injection - Guice & EJB 注入（拦截器？）

> ID：10593135
> 
> 赞同：1
> 
> 时间：2012-05-15T01:35:38.173
> 
> 标签：dependency-injection, ejb, guice, interceptor

我已经调试了很多很多小时，但我不明白为什么代码不起作用。以相同方式注释的两个服务类显示不同的拦截器行为。

堆栈跟踪 #1：

```
Daemon Thread [http-thread-pool-8080(1)] (Suspended (breakpoint at line 120 in UserService))    
    UserService.saveUserOnLogin(UserBE) line: 120   
    NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
    NativeMethodAccessorImpl.invoke(Object, Object[]) line: 57  
    DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43  
    Method.invoke(Object, Object...) line: 601  
    EJBSecurityManager.runMethod(Method, Object, Object[]) line: 1052   
    EJBSecurityManager.invoke(Method, boolean, Object, Object[]) line: 1124 
    StatelessSessionContainer(BaseContainer).invokeBeanMethod(EjbInvocation) line: 5388 
    EjbInvocation.invokeBeanMethod() line: 619  
    AroundInvokeChainImpl.invokeNext(int, InterceptorManager$AroundInvokeContext) line: 800 
    EjbInvocation.proceed() line: 571   
    _GuiceInterceptor_Serializable(GuiceInterceptor).injectByGuice(InvocationContext) line: 24  
    NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
    NativeMethodAccessorImpl.invoke(Object, Object[]) line: 57  
    DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43  
    Method.invoke(Object, Object...) line: 601  
    AroundInvokeInterceptor.intercept(InterceptorManager$AroundInvokeContext) line: 861 
    AroundInvokeChainImpl.invokeNext(int, InterceptorManager$AroundInvokeContext) line: 800 
    EjbInvocation.proceed() line: 571   
    _SystemInterceptorProxy_Serializable(SystemInterceptorProxy).doAround(InvocationContext, Method) line: 162  
    _SystemInterceptorProxy_Serializable(SystemInterceptorProxy).aroundInvoke(InvocationContext) line: 144  
    NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
    NativeMethodAccessorImpl.invoke(Object, Object[]) line: 57  
    DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43  
    Method.invoke(Object, Object...) line: 601  
    AroundInvokeInterceptor.intercept(InterceptorManager$AroundInvokeContext) line: 861 
    AroundInvokeChainImpl.invokeNext(int, InterceptorManager$AroundInvokeContext) line: 800 
    InterceptorManager.intercept(InterceptorManager$InterceptorChain, InterceptorManager$AroundInvokeContext) line: 370 
    StatelessSessionContainer(BaseContainer).__intercept(EjbInvocation) line: 5360  
    StatelessSessionContainer(BaseContainer).intercept(EjbInvocation) line: 5348    
    EJBLocalObjectInvocationHandler.invoke(Class, Method, Object[]) line: 214   
    EJBLocalObjectInvocationHandlerDelegate.invoke(Object, Method, Object[]) line: 88   
    $Proxy209.saveUserOnLogin(UserBE) line: not available   
    __EJB31_Generated__UserService__Intf____Bean__.saveUserOnLogin(UserBE) line: not available  
    LoginUserHandler.saveUser(UserDTO) line: 165    
    LoginUserHandler.loginUser(UserDTO) line: 123   
    LoginUserHandler.loginWithOAuth(String, String, String, String) line: 158   
    LoginUserHandler.execute(LoginUser, ExecutionContext) line: 103 
    LoginUserHandler.execute(Action, ExecutionContext) line: 1  
    GuiceDispatch(AbstractDispatch).doExecute(A, ExecutionContext) line: 81 
    GuiceDispatch(AbstractDispatch).execute(A) line: 68 
    HupaDispatchServlet(AbstractSecureDispatchServlet).execute(String, Action<?>) line: 29  
    HupaDispatchServlet.execute(String, Action<?>) line: 56 
    NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
    NativeMethodAccessorImpl.invoke(Object, Object[]) line: 57  
    DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43  
    Method.invoke(Object, Object...) line: 601  
    RPC.invokeAndEncodeResponse(Object, Method, Object[], SerializationPolicy, int) line: 569   
    HupaDispatchServlet(RemoteServiceServlet).processCall(String) line: 208 
    HupaDispatchServlet(RemoteServiceServlet).processPost(HttpServletRequest, HttpServletResponse) line: 248    
    HupaDispatchServlet(AbstractRemoteServiceServlet).doPost(HttpServletRequest, HttpServletResponse) line: 62  
    HupaDispatchServlet(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 688 
    HupaDispatchServlet(HttpServlet).service(ServletRequest, ServletResponse) line: 770 
    ServletDefinition.doService(ServletRequest, ServletResponse) line: 263  
    ServletDefinition.service(ServletRequest, ServletResponse) line: 178    
    ManagedServletPipeline.service(ServletRequest, ServletResponse) line: 91    
    FilterChainInvocation.doFilter(ServletRequest, ServletResponse) line: 62    
    ManagedFilterPipeline.dispatch(ServletRequest, ServletResponse, FilterChain) line: 118  
    GuiceFilter.doFilter(ServletRequest, ServletResponse, FilterChain) line: 113    
    ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 256  
    ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 217  
    StandardWrapperValve.invoke(Request, Response) line: 279    
    StandardContextValve.invoke(Request, Response) line: 175    
    StandardPipeline.doInvoke(Request, Response, boolean) line: 655 
    StandardPipeline.invoke(Request, Response) line: 595    
    StandardHostValve.invoke(Request, Response) line: 161   
    CoyoteAdapter.doService(Request, Request, Response, Response) line: 331 
    CoyoteAdapter.service(Request, Response) line: 231  
    ContainerMapper$AdapterCallable.call() line: 317    
    ContainerMapper.service(Request, Response) line: 195    
    ProcessorTask.invokeAdapter() line: 849 
    ProcessorTask.doProcess() line: 746 
    ProcessorTask.process(InputStream, OutputStream) line: 1045 
    DefaultProtocolFilter.execute(Context) line: 228    
    HttpProtocolChain(DefaultProtocolChain).executeProtocolFilter(Context, int) line: 137   
    HttpProtocolChain(DefaultProtocolChain).execute(Context, int) line: 104 
    HttpProtocolChain(DefaultProtocolChain).execute(Context) line: 90   
    HttpProtocolChain.execute(Context) line: 79 
    ProtocolChainContextTask.doCall() line: 54  
    ProtocolChainContextTask(SelectionKeyContextTask).call() line: 59   
    ProtocolChainContextTask(ContextTask).run() line: 71    
    FixedThreadPool$BasicWorker(AbstractThreadPool$Worker).doWork() line: 532   
    FixedThreadPool$BasicWorker(AbstractThreadPool$Worker).run() line: 513  
    HttpWorkerThread(Thread).run() line: 722 
```

堆栈跟踪 #2

```
Daemon Thread [http-thread-pool-8080(2)] (Suspended (entry into method synchronizeHeaders in MessageService))   
__EJB31_Generated__MessageService__Intf____Bean__(MessageService).synchronizeHeaders(String) line: 93   
FetchMessagesHandler.executeInternal(FetchMessages, ExecutionContext) line: 80  
FetchMessagesHandler.executeInternal(Action, ExecutionContext) line: 1  
FetchMessagesHandler(AbstractSessionHandler<A,R>).executeWithRetries(A, ExecutionContext, int) line: 127    
FetchMessagesHandler(AbstractSessionHandler<A,R>).execute(A, ExecutionContext) line: 97 
GuiceDispatch(AbstractDispatch).doExecute(A, ExecutionContext) line: 81 
GuiceDispatch(AbstractDispatch).execute(A) line: 68 
HupaDispatchServlet(AbstractSecureDispatchServlet).execute(String, Action<?>) line: 29  
HupaDispatchServlet.execute(String, Action<?>) line: 56 
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 57  
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 43  
Method.invoke(Object, Object...) line: 601  
RPC.invokeAndEncodeResponse(Object, Method, Object[], SerializationPolicy, int) line: 569   
HupaDispatchServlet(RemoteServiceServlet).processCall(String) line: 208 
HupaDispatchServlet(RemoteServiceServlet).processPost(HttpServletRequest, HttpServletResponse) line: 248    
HupaDispatchServlet(AbstractRemoteServiceServlet).doPost(HttpServletRequest, HttpServletResponse) line: 62  
HupaDispatchServlet(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 688 
HupaDispatchServlet(HttpServlet).service(ServletRequest, ServletResponse) line: 770 
ServletDefinition.doService(ServletRequest, ServletResponse) line: 263  
ServletDefinition.service(ServletRequest, ServletResponse) line: 178    
ManagedServletPipeline.service(ServletRequest, ServletResponse) line: 91    
FilterChainInvocation.doFilter(ServletRequest, ServletResponse) line: 62    
ManagedFilterPipeline.dispatch(ServletRequest, ServletResponse, FilterChain) line: 118  
GuiceFilter.doFilter(ServletRequest, ServletResponse, FilterChain) line: 113    
ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 256  
ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 217  
StandardWrapperValve.invoke(Request, Response) line: 279    
StandardContextValve.invoke(Request, Response) line: 175    
StandardPipeline.doInvoke(Request, Response, boolean) line: 655 
StandardPipeline.invoke(Request, Response) line: 595    
StandardHostValve.invoke(Request, Response) line: 161   
CoyoteAdapter.doService(Request, Request, Response, Response) line: 331 
CoyoteAdapter.service(Request, Response) line: 231  
ContainerMapper$AdapterCallable.call() line: 317    
ContainerMapper.service(Request, Response) line: 195    
ProcessorTask.invokeAdapter() line: 849 
ProcessorTask.doProcess() line: 746 
ProcessorTask.process(InputStream, OutputStream) line: 1045 
DefaultProtocolFilter.execute(Context) line: 228    
HttpProtocolChain(DefaultProtocolChain).executeProtocolFilter(Context, int) line: 137   
HttpProtocolChain(DefaultProtocolChain).execute(Context, int) line: 104 
HttpProtocolChain(DefaultProtocolChain).execute(Context) line: 90   
HttpProtocolChain.execute(Context) line: 79 
ProtocolChainContextTask.doCall() line: 54  
ProtocolChainContextTask(SelectionKeyContextTask).call() line: 59   
ProtocolChainContextTask(ContextTask).run() line: 71    
FixedThreadPool$BasicWorker(AbstractThreadPool$Worker).doWork() line: 532   
FixedThreadPool$BasicWorker(AbstractThreadPool$Worker).run() line: 513  
HttpWorkerThread(Thread).run() line: 722 
```

似乎没有为消息服务类调用拦截器。但是，它确实适用于用户服务类。为什么会这样？

消息服务类：

```
@Stateless
@Interceptors(GuiceInterceptor.class)
public class MessageService {

    /**
     * The gmail folder default.
     */
    private static final String GMAIL_ALL_MAIL = "[Gmail]/All Mail";

    /**
     * The IMAP store cache.
     */
    @Inject
    private IMAPStoreCache imapStoreCache;

    /**
     * The EJB resolver.
     */
    @Inject
    private EJBResolver ejbResolver; 
```

用户服务类：

```
@Stateless
@Interceptors(GuiceInterceptor.class)
public class UserService {

    /**
     * The entity manager.
     */
    @PersistenceContext(unitName = "hupa")
    private EntityManager em;

    /**
     * The session provider.
     */
    @Inject
    private Provider<HttpSession> sessionProvider; 
```

最后是拦截器：

```
public class GuiceInterceptor {

    @EJB
    private GuiceInjectorHolder injectorHolder;

    @AroundInvoke
    @AroundTimeout
    public Object injectByGuice(InvocationContext invocationContext) throws Exception {
        Injector injector = injectorHolder.getInjector();
        injector.injectMembers(invocationContext.getTarget());
        return invocationContext.proceed();
    }
} 
```

希望有这方面的专家，我很沮丧；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:52:06.577

问题是我不能在类中的任何地方使用 final 修饰符，否则它不适用于 Guice。甚至在辅助辅助方法上也没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:13:23.693

您能否详细说明谁在调用`MessageService`以及他们如何获得对它的引用？

我的第一个猜测是，调用`MessageService`的人直接引用了实例本身，而不是通过容器创建的代理调用 bean，该代理是通过`@EJB MessageService service;`注入或 JNDI 查找获得的。

有关使用代理的重要性以及与使用或类似的直接引用 bean 实例有何不同，请参阅[此答案。](https://stackoverflow.com/questions/3381002/how-is-the-return-value-of-sessioncontext-getbusinessobject-different-from-th/3384128#3384128)`this`

# r - 挣扎于如何组合数据框中的行组

> ID：10593136
> 
> 赞同：3
> 
> 时间：2012-05-15T01:35:53.387
> 
> 标签：r, dataframe, data.table

我有一个像这样的数据框

```
product_id view_count purchase_count
1           11         1   
2           20         3
3           5          2
... 
```

例如，我想将其转换为按 view_count 分组的表，并对某个时间间隔的 purchase_count 求和。

```
view_count_range total_purchase_count
0-10                 45
10-20                65 
```

这些 view_count_ranges 将具有固定大小。我将不胜感激有关如何对这样的范围进行分组的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T01:51:41.997

`cut`是这类事情的方便工具。这是一种方法：

```
#First make some data to work with 
#I suggest you do this in the future as it makes it 
#easier to provide you with assistance.
set.seed(10)
dat <- data.frame(product_id=1:15, view_count=sample(1:20, 15, replace=T), 
    purchase_count=sample(1:8, 15, replace=T))
dat   #look at the data

#now we can use cut and aggregate by this new variable we just created
dat$view_count_range <- with(dat, cut(view_count, c(0, 10, 20)))
aggregate(purchase_count~view_count_range, dat, sum) 
```

**产生：**

```
 view_count_range purchase_count
1           (0,10]             39
2          (10,20]             31 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:49:22.550

扩展 Tyler 的答案并从他的示例开始`dat`，您可能会发现在以下位置编写这样的查询更容易、更快捷[`data.table`](http://datatable.r-forge.r-project.org/)：

```
> require(data.table)
> DT = as.data.table(dat)

> DT[, sum(purchase_count), by=cut(view_count,c(0,10,20))]
         cut V1
[1,] (10,20] 31
[2,]  (0,10] 39 
```

就是这样。就一行。易写，易读。

请注意，它将 (10,20] 组放在首位。这是因为默认情况下，它保留每个组首先出现在数据中的顺序（第一个`view_count`是该数据集中的 11）。要对组进行排序，请更改`by`为`keyby`：

```
> DT[, sum(purchase_count), keyby=cut(view_count,c(0,10,20))]
         cut V1
[1,]  (0,10] 39
[2,] (10,20] 31 
```

并命名结果列：

```
> DT[,list( purchase_count = sum(purchase_count) ),
     keyby=list( view_count_range = cut(view_count,c(0,10,20) ))]
     view_count_range purchase_count
[1,]           (0,10]             39
[2,]          (10,20]             31 
```

# c++ - 不明白这段代码（它无条件运行）

> ID：10593140
> 
> 赞同：7
> 
> 时间：2012-05-15T01:36:49.207
> 
> 标签：c++

我正在学习 c++ 并且在我读过的任何书中都没有真正看到这一点。我想阅读和评论代码，以便我可以更好地学习，并遇到了一段运行但没有条件的奇怪代码。根据我阅读的内容（以及我对其他语言的经验，您需要一个 if、while、for 或其他块）。

我正在查看 tbb 线程包，所以我不确定它是否与启动线程或 c++ 特定相关（如果你不认为这是 c++ 中常见的东西，那么它可能是 tdd 特定的）。

我想我理解里面的代码实际上做了什么，但我不确定它是如何被触发或运行的。有任何想法吗？

这是该部分：

```
 {
        //this is the graph part of the code
        Graph g;
        g.create_random_dag(nodes);
        std::vector<Cell*> root_set;
        g.get_root_set(root_set);
        root_set_size = root_set.size();
        for( unsigned int trial=0; trial<traversals; ++trial ) {
            ParallelPreorderTraversal(root_set);
        }
    } 
```

ps 如果有帮助，这里是整个文件（上面的代码在 main() 的中间）。

```
#include <cstdlib>
#include "tbb/task_scheduler_init.h"
#include "tbb/tick_count.h"
#include "../../common/utility/utility.h"
#include <iostream>
#include <vector>
#include "Graph.h"

// some forward declarations
class Cell;
void ParallelPreorderTraversal( const std::vector<Cell*>& root_set );

//------------------------------------------------------------------------
// Test driver
//------------------------------------------------------------------------
utility::thread_number_range threads(tbb::task_scheduler_init::default_num_threads);
static unsigned nodes = 1000;
static unsigned traversals = 500;
static bool SilentFlag = false;

//! Parse the command line.
static void ParseCommandLine( int argc, const char* argv[] ) {
    utility::parse_cli_arguments(
            argc,argv,
            utility::cli_argument_pack()
                //"-h" option for for displaying help is present implicitly
                .positional_arg(threads,"n-of-threads","number of threads to use; a range of the form low[:high], where low and optional high are non-negative integers or 'auto' for the TBB default.")
                .positional_arg(nodes,"n-of-nodes","number of nodes in the graph.")
                .positional_arg(traversals,"n-of-traversals","number of times to evaluate the graph. Reduce it (e.g. to 100) to shorten example run time\n")
                .arg(SilentFlag,"silent","no output except elapsed time ")
    );
}

int main( int argc, const char* argv[] ) {
    try {
        tbb::tick_count main_start = tbb::tick_count::now(); //tbb counter start
        ParseCommandLine(argc,argv);

        // Start scheduler with given number of threads.
        std::cout << threads << std::endl;
        for( int p=threads.first; p<=threads.last; ++p ) {
            tbb::tick_count t0 = tbb::tick_count::now(); //timer
            tbb::task_scheduler_init init(4); //creates P number of threads
            srand(2); //generates a random number between 0-2?
            size_t root_set_size = 0; 
            {
                //this is the graph part of the code
                Graph g;
                g.create_random_dag(nodes);
                std::vector<Cell*> root_set;
                g.get_root_set(root_set);
                root_set_size = root_set.size();
                for( unsigned int trial=0; trial<traversals; ++trial ) {
                    ParallelPreorderTraversal(root_set);
                }
            }
            tbb::tick_count::interval_t interval = tbb::tick_count::now()-t0; //counter done
            if (!SilentFlag){ //output the results
                std::cout
                    <<interval.seconds()<<" seconds using "<<p<<" threads ("<<root_set_size<<" nodes in root_set)\n";
            }
        }
        utility::report_elapsed_time((tbb::tick_count::now()-main_start).seconds());

        return 0;
    }catch(std::exception& e){
        std::cerr
            << "unexpected error occurred. \n"
            << "error description: "<<e.what()<<std::endl;
        return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-15T01:40:17.777

不，您不需要`if`or`while`语句来引入新的范围级别。基本上，`{`符号会打开一个新的范围级别并`}`结束它。通常的作用域规则适用，例如，在这个新块中定义的变量在外部未定义，在块的末尾运行对象析构函数，并且在上面的作用域级别中与另一个命名相同的变量将被隐藏。

一个常见的用例是在`switch`语句中。例如，

```
switch (a)
{
    case 1:
    {
        int i;
    }
    case 2:
    {
        int i; //note reuse of variable with the same name as in case 1
    }
} 
```

如果没有`{` `}`in case 语句，编译器将抱怨多重定义的标识符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T01:44:06.207

这对`{`和`}`正在创建一个本地[范围](https://secure.wikimedia.org/wikipedia/en/wiki/Scope_%28computer_science%29)。在作用域结束时，编译器将自动为在该作用域内声明的所有堆栈变量（如果存在）调用析构函数。

在您的情况下，析构函数`g`和`root_set`将在范围结束时调用。

我能想到的一个非常常见的用途是在使用线程时获得互斥锁。假设您有一个名为的类，该类`Lock`接受一个互斥对象并获取它的锁。然后，您可以围绕需要防止并发访问的关键代码部分，如下所示：

```
{
  Lock lock( mutex );   // the Lock constructor will acquire a lock on mutex

  // do stuff
} // Here the Lock destructor runs and releases the lock on mutex, allowing
  // other threads to acquire a lock 
```

这样做的好处是即使`{ ... }`块内的代码抛出异常，编译器仍然会调用`Lock`的析构函数来确保互斥锁被释放。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T01:44:45.127

如果您指的是代码块有一组额外的花括号，这在 C++ 编程中处理堆栈上的短期对象时并不少见，在这种情况下是`Graph`and`std::vector<Cell*>`对象。一对花括号创建了一个新范围。它们不必附加到任何控制语句。因此，在这种情况下，使用临时作用域来确保`Graph`and`vector`对象在超出作用域时被快速释放。`for`如果不存在额外的大括号，则在外循环的下一次迭代之前不会释放对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T01:40:33.713

你可以像这样创建额外的块。它们用于施加额外的范围。在您的示例中， G 在该块之前或之后将不存在。

# android - eglWaitNative 的参数应该是什么？(Android SDK, EGL10)

> ID：10593142
> 
> 赞同：1
> 
> 时间：2012-05-15T01:37:17.940
> 
> 标签：android, egl

我在互联网上找到的示例似乎使用 EGL10.EGL_NATIVE_RENDERABLE 作为第一个参数，而使用“null”作为 eglWaitNative 的第二个参数。例如：

```
EGL10 egl = (EGL10) EGLContext.getEGL();
egl.eglWaitNative( EGL10.EGL_NATIVE_RENDERABLE, null );
egl.eglWaitGL();
egl.eglSwapBuffers(mEGLDisplay, mEGLSurface); 
```

但是，在 Galaxy Nexus 上，这会导致以下错误消息向 logcat 输出发送垃圾邮件：

```
E/IMGSRV  ([pid]): :0: WSEGL_WaitNative: Unrecognized engine 
```

似乎第一个参数一定是错误的，因为 API 将它列为一个名为“engine”的 int，这似乎与错误消息“unrecognized engine”相匹配。如果是这样，我应该改用什么？如果第二个参数是问题，那么根据 API，它是“对象”类型，并且表示描述渲染目标的特定于平台的对象。不过，我似乎无法弄清楚除了“null”之外还有什么可以去这里。我完全偏离轨道了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:17:25.893

第一个参数应该是 EGL10.EGL_CORE_NATIVE_ENGINE，而不是 EGL10.EGL_NATIVE_RENDERABLE。

# javascript - 如何在 JS 中调用页面加载函数？

> ID：10593145
> 
> 赞同：1
> 
> 时间：2012-05-15T01:37:43.847
> 
> 标签：javascript, onload

我有一个看起来像这样的 js 函数

```
 function showProducts(){
    document.getElementById("shopList").innerHTML = "<ul><li>Test Text</li></ul>";
 } 
```

这是一个必须显示我的产品数组的功能。我`id="shopList"`在我的 html 页面中创建了一个 div

```
 <div id="shopList">
        </div> 
```

但是如何调用该函数来显示 div 中的文本？当我使用它作为我的正文标签时它可以工作，但我不允许在我的 html 中编写任何 js 代码或使用 onload 或 onclick。我试图与听众一起做将近 4 个小时，但我仍然没有找到解决方案。有人可以帮助我吗？

```
 <body onload="showProducts()"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T01:44:29.290

使用纯 JavaScript：

```
window.onload = function(){

}; 
```

（或者

```
function doLoad() {
    //Do stuff on load
}

window.onload = doLoad; 
```

使用 jQuery

```
$(document).ready(function(){   

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:41:35.873

使用 Jquery，您可以执行以下操作：

```
$(document).ready(function(){   
   showProducts();
}); 
```

它一直等到页面加载完毕，然后执行该函数。您只需将其放在外部 .js 文件中并将其包含在您的页面中。

（对于那些因为它是 Jquery 而反对这个答案的人，他说他不能使用 onload() 所以我只是提到了这个选项。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T01:48:56.733

Really, assigning to `onload` is just shorthand for doing it with listeners. This should work , though I haven't tested it.

```
window.addEventListener("load", showProducts); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T01:49:31.893

It's not difficult with listeners. Here is a solution (not cross-browser):

```
document.addEventListener("DOMContentLoaded", showProducts); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T04:13:08.283

只需将脚本放在底部：

```
<body>
    ...
    <script type="text/javascript">
        myFunction();
    </script>
</body> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T01:51:25.050

John Resig's simplified version from "Pro JavaScript Techniques". It depends on addEvent.

```
var ready = ( function () {
  function ready( f ) {
  if( ready.done ) return f();

  if( ready.timer ) {
    ready.ready.push(f);
  } else {
    addEvent( window, "load", isDOMReady );
    ready.ready = [ f ];
    ready.timer = setInterval(isDOMReady, 13);
  }
};

function isDOMReady() {
   if( ready.done ) return false;

   if( document && document.getElementsByTagName && document.getElementById && document.body ) {
     clearInterval( ready.timer );
     ready.timer = null;
     for( var i = 0; i < ready.ready.length; i++ ) {
       ready.ready[i]();
     }
     ready.ready = null;
     ready.done = true;
   }
}

  return ready;
})(); 
```

window.onload would work, but it is a different beast. jQuery's $(document).ready() is much more complex and better in most scenarios.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T02:49:18.013

鉴于您的“HTML 中没有脚本”和“没有 onload 或 onclick 侦听器”的标准，您可以将该函数放入一个单独的文件中，并从页面底部的脚本元素运行它：

```
<script type="text/javascript" src="showproducts.js"></script> 
```

所以现在页面中没有脚本，也没有听众。该代码将在元素添加到 DOM 时执行，因此只要在相关 DIV 之后即可。

顺便说一句，您甚至不需要函数，您只需将函数体中的语句放入文件中即可。

# iphone - 使用 NSURLRequestReturnCacheDataDontLoad 时离线模式不起作用

> ID：10593147
> 
> 赞同：1
> 
> 时间：2012-05-15T01:38:10.967
> 
> 标签：iphone, objective-c, ios, ios5

我目前是 iOS 开发的新手，并试图获取缓存策略（*NSURLRequestReturnCacheDataDontLoad*）以从缓存中提取以查看网页，同时在 iPhone 上离线（使用飞行模式）。我目前正在使用 Apple 提供的 Reachability API 来确定网络/wifi 连接是否已启动并正在运行。这很好，但是当我进入飞行模式时，我没有得到一个网页来填充 UIWebView。任何建议都会非常有帮助，我在网上环顾四周，但没有找到太多有用的链接。谢谢。

代码如下：

```
*- (IBAction)refresh:(id)sender 
{
    NSURL *url = [NSURL URLWithString:_entry.articleUrl]; 
    NSURLRequest *webRequest = nil;

    NSString *articleUrl = [_entry.articleUrl substringFromIndex:7];

    NSArray *myArray = [articleUrl componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"/"]];

    NSString *hostUrl = [myArray objectAtIndex:0];

    NSLog(@"%@", hostUrl);
    Reachability *reachability = [Reachability reachabilityWithHostName:hostUrl];

    NetworkStatus netStatus = [reachability currentReachabilityStatus];

    [[NSURLCache sharedURLCache] setMemoryCapacity:1024*1024*10];

    // Verify current help file cache if we have network connection...
    if (netStatus == ReachableViaWWAN || netStatus == ReachableViaWiFi) 
    {
        webRequest = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30];   
    } 
    else 
    {
        // Network NOT reachable - show (local) cache if it exists
        webRequest = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReturnCacheDataDontLoad timeoutInterval:30];
    }

    [_webView loadRequest:webRequest];
}* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:42:40.547

不幸的是，`UIWebView`不会持久化网页缓存。我从来没有这样做过，但是使用[AFCache](https://github.com/artifacts/AFCache)应该可以用于缓存持久化。

还要确保缓存页面到位。如果网页不可缓存（即使用 Pragma: no-cache），`UIWebView`可能仍然无法缓存它。

# ruby-on-rails - 无法从 redmine 发送电子邮件

> ID：10593149
> 
> 赞同：1
> 
> 时间：2012-05-15T01:38:25.860
> 
> 标签：ruby-on-rails, ruby, redmine

我通过 apt-get 在 Ubuntu 11.10 服务器上安装了 Redmine 0.9.3.stable (MySQL)，我也成功安装了 exim4，我可以像这样通过命令行发送邮件：

```
"This is a test." | mail -s Testing myemail@gmail.com 
```

但是当我添加我的 email.yml 配置文件时，我得到内部服务器错误 500，这是我在配置目录中的 email.yml：

```
production:
  delivery_method: :smtp
  smtp_settings:
    address: 127.0.0.1
    port: 25
    domain: mydomain.com
    authentication: :none 
```

这是我从 redmine 日志中得到的：

```
ActionView::TemplateError (undefined method `[]' for nil:NilClass) on line #34 of app/views/welcome/index.rhtml:
31: 
32: <% content_for :header_tags do %>
33: <%= auto_discovery_link_tag(:atom, {:controller => 'news', :action => 'index', :key => User.current.rss_key, :format => 'atom'},
34:                                    :title => "#{Setting.app_title}: #{l(:label_news_latest)}") %>
35: <%= auto_discovery_link_tag(:atom, {:controller => 'projects', :action => 'activity', :key => User.current.rss_key, :format => 'atom'},
36:                                    :title => "#{Setting.app_title}: #{l(:label_activity)}") %>
37: <% end %>

    app/models/setting.rb:100:in `value='
    vendor/rails/activerecord/lib/active_record/base.rb:2589:in `send'
    vendor/rails/activerecord/lib/active_record/base.rb:2589:in `attributes='
    vendor/rails/activerecord/lib/active_record/base.rb:2585:in `each'
    vendor/rails/activerecord/lib/active_record/base.rb:2585:in `attributes='
    vendor/rails/activerecord/lib/active_record/base.rb:2285:in `initialize'
    app/models/setting.rb:166:in `new'
    app/models/setting.rb:166:in `find_or_default'
    app/models/setting.rb:107:in `[]'
    app/models/setting.rb:136:in `app_title'
    app/views/welcome/index.rhtml:34
    vendor/rails/actionpack/lib/action_view/helpers/capture_helper.rb:36:in `call'
    vendor/rails/actionpack/lib/action_view/helpers/capture_helper.rb:36:in `capture'
    vendor/rails/actionpack/lib/action_view/helpers/capture_helper.rb:129:in `with_output_buffer'
    vendor/rails/actionpack/lib/action_view/helpers/capture_helper.rb:36:in `capture'
    vendor/rails/actionpack/lib/action_view/helpers/capture_helper.rb:120:in `content_for'
    app/helpers/application_helper.rb:692:in `content_for'
    app/views/welcome/index.rhtml:32
    vendor/rails/actionpack/lib/action_view/renderable.rb:39:in `send'
    vendor/rails/actionpack/lib/action_view/renderable.rb:39:in `render'
    vendor/rails/actionpack/lib/action_view/template.rb:73:in `render_template'
    vendor/rails/actionpack/lib/action_view/base.rb:256:in `render'
    vendor/rails/actionpack/lib/action_view/base.rb:369:in `_render_with_layout'

    vendor/rails/actionpack/lib/action_view/base.rb:254:in `render'
    vendor/rails/actionpack/lib/action_controller/base.rb:1177:in `render_for_file'
    vendor/rails/actionpack/lib/action_controller/base.rb:896:in `render_without_benchmark'
    vendor/rails/actionpack/lib/action_controller/benchmarking.rb:51:in `render'
    vendor/rails/activesupport/lib/active_support/core_ext/benchmark.rb:8:in `realtime'
    vendor/rails/actionpack/lib/action_controller/benchmarking.rb:51:in `render'
    vendor/rails/actionpack/lib/action_controller/base.rb:868:in `render_without_benchmark'
    vendor/rails/actionpack/lib/action_controller/benchmarking.rb:51:in `render'
    vendor/rails/activesupport/lib/active_support/core_ext/benchmark.rb:8:in `realtime'
    vendor/rails/actionpack/lib/action_controller/benchmarking.rb:51:in `render'
    vendor/rails/actionpack/lib/action_controller/base.rb:1251:in `default_render'
    vendor/rails/actionpack/lib/action_controller/base.rb:1257:in `perform_action_without_filters'
    vendor/rails/actionpack/lib/action_controller/filters.rb:617:in `call_filters'
    vendor/rails/actionpack/lib/action_controller/filters.rb:638
    vendor/rails/actionpack/lib/action_controller/filters.rb:189:in `call'
    vendor/rails/actionpack/lib/action_controller/filters.rb:189:in `call'
    vendor/rails/actionpack/lib/action_controller/filters.rb:635:in `run_before_filters'
    vendor/rails/actionpack/lib/action_controller/filters.rb:615:in `call_filters'
    vendor/rails/actionpack/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
    vendor/rails/actionpack/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
    /usr/lib/ruby/1.8/benchmark.rb:293:in `measure'
    vendor/rails/actionpack/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
    vendor/rails/actionpack/lib/action_controller/rescue.rb:136:in `passenger_orig_perform_action'
    /usr/lib/ruby/1.8/phusion_passenger/railz/request_handler.rb:65:in `perform_action'
    vendor/rails/actionpack/lib/action_controller/base.rb:524:in `send'
    vendor/rails/actionpack/lib/action_controller/base.rb:524:in `process_without_filters'
    vendor/rails/actionpack/lib/action_controller/filters.rb:606:in `process_without_session_management_support'
    vendor/rails/actionpack/lib/action_controller/session_management.rb:134:in `process_without_test'
    vendor/rails/actionpack/lib/action_controller/test_process.rb:18:in `process'
    vendor/rails/actionpack/lib/action_controller/base.rb:392:in `process'
    vendor/rails/actionpack/lib/action_controller/dispatcher.rb:184:in `handle_request'
    vendor/rails/actionpack/lib/action_controller/dispatcher.rb:112:in `dispatch_unlocked'

    vendor/rails/actionpack/lib/action_controller/dispatcher.rb:125:in `dispatch'
    vendor/rails/actionpack/lib/action_controller/dispatcher.rb:124:in `synchronize'
    vendor/rails/actionpack/lib/action_controller/dispatcher.rb:124:in `dispatch'
    vendor/rails/actionpack/lib/action_controller/dispatcher.rb:134:in `dispatch_cgi'
    vendor/rails/actionpack/lib/action_controller/dispatcher.rb:41:in `dispatch'
    /usr/lib/ruby/1.8/phusion_passenger/railz/request_handler.rb:50:in `process_request'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_request_handler.rb:207:in `main_loop'
    /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb:374:in `start_request_handler'
    /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb:332:in `handle_spawn_application'
    /usr/lib/ruby/1.8/phusion_passenger/utils.rb:184:in `safe_fork'
    /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb:330:in `handle_spawn_application'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `__send__'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `main_loop'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:163:in `start'
    /usr/lib/ruby/1.8/phusion_passenger/railz/application_spawner.rb:209:in `start'
    /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:262:in `spawn_rails_application'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb:126:in `lookup_or_add'
    /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:256:in `spawn_rails_application'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb:80:in `synchronize'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:255:in `spawn_rails_application'
    /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:154:in `spawn_application'
    /usr/lib/ruby/1.8/phusion_passenger/spawn_manager.rb:287:in `handle_spawn_application'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `__send__'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:352:in `main_loop'
    /usr/lib/ruby/1.8/phusion_passenger/abstract_server.rb:196:in `start_synchronously'
    /usr/lib/phusion_passenger/passenger-spawn-server:61

Rendering /usr/share/redmine/public/500.html (500 Internal Server Error) 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:36:24.683

在你的 email.yml 中试试这个：

```
 production:
   delivery_method: :sendmail 
```

或者

```
 production:
   delivery_method: :smtp 
```

并注释掉其他所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:02:05.983

该配置不应该在 configuration.yml 中，而不是在 email.yml 中吗？[Redmine 电子邮件配置](http://www.redmine.org/projects/redmine/wiki/EmailConfiguration)

# ruby-on-rails - ActiveRecord 查询组和 Postgresql

> ID：10593159
> 
> 赞同：1
> 
> 时间：2012-05-15T01:39:43.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我将Sqlite3更改为PostgreSQL时出现了这个问题。好像我在使用 postgres 时不能使用[组方法。](http://guides.rubyonrails.org/active_record_querying.html#group)

```
> Post.group(:user_id).all

Post Load (74.2ms)  SELECT "posts".* FROM "posts" GROUP BY user_id
PG::Error: ERROR:  column "posts.id" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: SELECT "posts".* FROM "posts"  GROUP BY user_id 
```

是否可以使用等效查询来避免硬编码 SQL 并利用优雅的 AR 方法的好处？

# azure - Azure GetMachineGoalState 因 HTTP 410 错误而死

> ID：10593163
> 
> 赞同：1
> 
> 时间：2012-05-15T01:40:18.907
> 
> 标签：azure

我的 Azure Web 角色不断回收。

我的 Azure Web 角色上的`WaAppAgent.log`文件包含这些错误的完整流：

```
[00000008] [05/15/2012 00:10:20.90] GetMachineGoalState() failed with exception: Microsoft.ServiceModel.Web.WebProtocolException: Server Error: Gone (Gone) ---> System.Net.WebException: The remote server returned an error: (410) Gone.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   --- End of inner exception stack trace ---
   at Microsoft.ServiceModel.Web.WebHttpChannelProxy`1.Invoke(IMessage msg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.WindowsAzure.RoleContainer.Protocol.IControlSystem.GetMachineGoalState()
   at Microsoft.WindowsAzure.GuestAgent.ContainerStateMachine.ControlSystem.GetGoalState().
[00000008] [05/15/2012 00:10:20.90] Caught exception in pre-initialization heartbeat thread, will continue heartbeats: System.NullReferenceException: Object reference not set to an instance of an object.
   at Microsoft.WindowsAzure.GuestAgent.ContainerStateMachine.ContainerStateManager.InitialHeartbeatThread(Object waitEvent)
[00000005] [05/15/2012 00:10:23.24] Agent runtime initialized. 
```

Azure 服务状态仪表板说他们这边的一切都是绿色的，但它总是说除非整个平台都处于闷烧状态，所以我根本不相信它。

这是我的问题，还是他们的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:41:39.293

我接受您的声明，即您正在使用基于完整 IIS 的 Windows Azure Web 角色。我在 VM 角色中看到过这样的错误，但对于 Web 角色来说，这似乎很奇怪。此时我也不会在您的日志上过多考虑，因为它可能会误导错误的方向。

如果您的 Web 角色状态显示为绿色（就绪）状态，但您的站点不可用，则问题可能与应用程序本身有关，因为绿色或就绪状态意味着角色主机进程（在本例中为 waiishost.exe）是健康的。当角色状态为绿色并且您的角色主机进程不健康时，这种情况很少发生。根据您提供的内容，VM 启动顺序中存在问题意味着您的角色甚至尚未启动，但门户不得显示就绪状态。

请使用 RDP 登录到您的 Azure VM 和..

1.  首先检查 WaIISHost.exe 进程是否正在运行.. 密切关注此进程 2 分钟以检查此进程是否崩溃并再次重新启动
2.  请检查应用程序事件日志，因为它应该有一些异常模式来找到根本原因
3.  请分别检查位于 C:\logs 文件夹中的最新 Azurebootstrapper 和 iisconfigurator 日志，了解 VM 启动和 IIS 启动期间的任何特定问题。

最后请备份日志（驱动器 C:\logs 和 C:\Resources），请尝试重启您的实例。仍有问题联系 Windows Azure 支持团队： [https ://www.windowsazure.com/en-us/support/contact/](https://www.windowsazure.com/en-us/support/contact/)

# hadoop - 用于拆分 xml 文件的 hadoop 作业

> ID：10593168
> 
> 赞同：1
> 
> 时间：2012-05-15T01:40:54.337
> 
> 标签：hadoop

我有 1000 个文件要处理。每个文件由 1000 个连接在一起的 XML 文件组成。

我想使用 Hadoop 分别拆分每个 XML 文件。使用 Hadoop 执行此操作的好方法是什么？

**注意：**我完全是 Hadoop 新手。我计划使用 Amazon EMR。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T01:58:13.527

查看[Mahout 的 XmlInputFormat](http://people.apache.org/~isabel/mahout_site/mahout-examples/apidocs/org/apache/mahout/classifier/bayes/XmlInputFormat.html)。遗憾的是，这是在 Mahout 中而不是在核心发行版中。

连接的 XML 文件是否至少采用相同的格式？如果是这样，您将`START_TAG_KEY`和设置`END_TAG_KEY`为每个文件的根目录。每个文件将`Text`在`map`. 然后，您可以使用您最喜欢的 Java XML 解析器来完成这项工作。

# ruby - 我必须初始化一个类的所有成员变量吗？

> ID：10593170
> 
> 赞同：2
> 
> 时间：2012-05-15T01:41:08.080
> 
> 标签：ruby, class, initialization

假设我正在运行此代码段。

```
class Song
  def initialize(name, artist, duration)
    @name = name
    @artist = artist
    @duration = duration
  end

  def to_s
    "Song: #{@name}--#{@artist} (#{@duration})"
  end
end

SongA = Song.new("Bicyclops", "Fleck", 260)
puts SongA.to_s 
```

如果我替换`SongA = Song.new("Bicyclops", "Fleck", 260)`为`SongA = Song.new("Bicyclops", "Fleck")`，我会收到错误消息。根据 Ruby 代码结构，这正常吗？

顺便说一句，我从[这里](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_classes.html)得到了例子。[但即使在浏览完这个文档](http://www.ruby-doc.org/core-1.9.3/Class.html)后我也找不到问题。提前感谢您为我提供的任何资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:43:20.200

如果您的函数定义未指定输入参数的默认值，则必须提供它们。

```
 # Default artist is Nobody
  # Default duration is nil
  def initialize(name, artist='Nobody', duration=nil)
    @name = name
    @artist = artist
    @duration = duration
  end 
```

然后，您可以对其进行初始化，省略您为其定义默认值的属性。

```
# Using lowercase songA instead of SongA since 
# ruby will treat the uppercase SongA as a constant...
songA = Song.new('Bicyclops') 
```

而且您不需要初始化其中的所有类属性`initialize()`。它们可以在其他方法中添加和初始化

```
def other_method
  @other_prop = "Another property"
end 
```

# java - Android 初学者：文件和复选框

> ID：10593172
> 
> 赞同：1
> 
> 时间：2012-05-15T01:41:22.630
> 
> 标签：java, android, eclipse, android-layout, android-intent

我是初学者，所以请多多包涵。我正在制作一个应用程序，该应用程序向用户显示成就列表，并让用户在完成时选中复选框。我希望能够在用户下次打开应用程序时保存他们的选择。我已经看到其他应用程序可以做到这一点，但我不确定如何做到这一点。我做过研究，调查将 int 和数组值写入文件。这些答案中的大多数都说只能使用字符串值来完成。有什么建议么？

谢谢，德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:01:29.047

您需要使用的是[共享首选项](http://developer.android.com/guide/topics/data/data-storage.html#pref)

Android 还有一个名为[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)的特殊活动，它使构建首选项屏幕变得更加容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:56:20.290

将选择保存到首选项文件。

[安卓偏好](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T01:48:34.923

您可以重写 onSaveInstanceState 函数来保存当前状态，几乎所有值都将以字符串格式保存。可以加载字符串值并将其从字符串转换为其他类型。

# eclipse - Subversion 将文件夹标记为在更新时删除

> ID：10593181
> 
> 赞同：0
> 
> 时间：2012-05-15T01:43:25.793
> 
> 标签：eclipse, svn

**编辑：**发现我至少可以再次签出项目并替换`.svn`文件夹。它更快，但仍然乏味......想知道为什么会这样。

我不知道这是否是问这个问题的正确地方，但我有一件很奇怪的事情发生在我身上，颠覆。我认为是 Eclipse 造成的（实际上是使用 SpringSsource Tool Suite 2.5.2.FINAL）。

我正在使用`Ubuntu 12.04`svn 版本`1.6.17 (r1128011)`。

请参阅以下行为：

```
$ svn up
D    styleguide
D         integrator/war
D         portal/portlets
D         portal/theme
D         smsgateway/war
D         core/war
D         emailgateway/war
Updated to revision 14913.

$ ls core/    
jar  pom.xml  war

$ svn ls core
jar/
pom.xml
war/

$ cd core
$ svn status
?       war
?       jar/target
M       jar/src/main/resources/core/hessian-service.xml
?       jar/src/main/java/META-INF

$ svn ls war
svn: 'war' is not under version control

$ svn info
Path: .
URL: http://example.dev.local/svn/app/trunk/core
[omitted the rest]

$ svn co http://example.dev.local/svn/app/trunk/core testcore
$ cd testcore
$ ls
jar  pom.xml  war 
```

因此，文件夹在更新中被删除，它告诉我它们不受版本控制。听起来`.svn`文件夹中的某些内容已损坏/删除。我认为它是 Eclipse 造成的，因为这是唯一接触这些文件夹的东西。

这是一个已知问题吗（我试过用谷歌搜索，但什么也没找到），有没有办法“修复”`.svn`文件夹？我可以通过删除核心文件夹并进行另一次更新来解决这个问题，但是如果我有未签入的文件，这很乏味，因为我必须手动将它们复制到某个临时文件夹并在我恢复后将它们复制回来core 文件夹，我还必须在 Eclipse 中重新导入项目，因为项目文件已被删除......

这种情况时不时地发生在我身上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:59:16.583

[根据这个答案](https://stackoverflow.com/a/10470473/1178189)，将 Eclipse 插件与其他客户端混合并不是一个好主意。

顺便说一句：**看起来**文件已经存在`svn deleted`，因此更新合法地将它们从版本控制下删除（它不会删除它们，因为那里有一些未版本控制的文件）。但在那种情况下，再次检查该项目将无济于事。奔跑`svn log -v` ——也许它会揭示发生了什么以及是谁做的。

# git - 处理 Jekyll 和 Git

> ID：10593182
> 
> 赞同：2
> 
> 时间：2012-05-15T01:43:32.270
> 
> 标签：git, github, branch, jekyll

我使用[**Jekyll**](http://github.com/mojombo/jekyll)和自定义[**Coderay**](http://github.com/rubychan/coderay)，所以我必须在 GitHub 上维护 2 个分支

```
master; The generated HTML site
source; Markdown files, etc 
```

在`source`分支上，我有一个`_includes`我忽略的文件夹，因为它只包含一些硬链接。我有一个脚本来管理 2 个分支，但似乎应该有比我想出的更好的东西。

```
# Start on "source" branch
jekyll /tmp
git checkout master
git stash -u # _includes
rm -r * # keeps ".git"
cp -r /tmp/* .
git add -A
git commit
git push origin master
git checkout source
git stash apply 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:40:01.957

# 选项1

对我来说更好的选择是完全摆脱硬链接。我通过制作一个允许在 repo 之外呈现文件的插件来做到这一点。

[**render_partial.rb**](http://github.com/svnpenn/svnpenn.github.com/blob/source/_plugins/render_partial.rb)

```
module Jekyll
    class IncludeTag < Liquid::Tag
        def initialize(tag_name, file, tokens)
            super
            @file = file.strip
        end
        def render(context)
            File.read(@file)
        end
    end
end
Liquid::Template.register_tag('render_partial', Jekyll::IncludeTag) 
```

# 选项 2

如果您想保留硬链接，此选项将起作用。

[**help.github.com/ignore-files**](http://help.github.com/ignore-files)

```
#!/bin/sh
# Initial setup, configure excludes
cat > .git/info/exclude <<EOF
_includes
_site
EOF
# Commit source branch
git checkout source
git add -A
git commit -m 'new post'
git push origin source
# Commit master branch
jekyll
git checkout master
git rm -r .
cp -r _site/* .
git add -A
git commit -m 'new post'
git push origin master 
```

# heroku - 有没有一种简单的方法可以从进程中了解正在运行的 Heroku 进程？

> ID：10593185
> 
> 赞同：0
> 
> 时间：2012-05-15T01:44:27.743
> 
> 标签：heroku, process, cedar

我很想知道是否有一种简单的方法可以从正在运行的进程中了解应用程序中正在运行的进程*列表*。

例如，假设我有一个`web`流程和一个`worker`流程。从`web`进程中，我可以知道我有 2 个`worker`进程正在运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:38:08.570

是的，您可以通过在 Gemfile 中添加 heroku Gem 来实现。

然后从代码运行系统命令。我在heroku bash上试过这个

运行连接到终端的 bash... up, run.1 ~ $ heroku ~ $ ~ $ heroku -v 2.25.0 ~ $ heroku ps

进程状态命令

* * *

网络……

它将提示输入密码，以便您可以使用 heroku 客户端类进行登录，然后列出所有进程。

希望这会帮助你。

# java - 如何正确使用此图像代码？

> ID：10593189
> 
> 赞同：1
> 
> 时间：2012-05-15T01:44:44.483
> 
> 标签：java, image, height, width, dimension

我正在尝试从 URL 在线获取图像的 Dimension，就像这个问题中的人一样：

[Java/ImageIO 在不读取整个文件的情况下获取图像尺寸？](https://stackoverflow.com/questions/1559253/java-imageio-getting-image-dimension-without-reading-the-entire-file/1560052#1560052)

但是，我不太清楚如何使用那里的最佳答案代码来获得结果。我想获得图像的高度和宽度而不必加载它。

如果我有一个指向图像的 URL，我应该把 resourceFile 作为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:54:21.443

看到了[`ImageIO.createImageInputStream(Object)`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#createImageInputStream%28java.lang.Object%29)吗？

> **参数：**
> `input` -`Object`用作输入源的 an，例如 a `File`、 readable`RandomAccessFile`或**`InputStream.`**

此外，正如@Hover 评论：

> ..你需要`InputStream`来自`URL`这个。

# python - Django 视图不存在或无法导入

> ID：10593194
> 
> 赞同：23
> 
> 时间：2012-05-15T01:45:15.500
> 
> 标签：python, django, view, import

今天早上我一直在做我的项目。我完成了我正在做的事情，并将新代码推送到 git。

现在，我开始运行我的项目以开始处理它，但索引视图没有运行！

```
Could not import ism.views.index. View does not exist in module ism.views. 
```

这个视图运行没有任何问题。所有项目都运行了。

还有更不可思议的事。在主视图（ism.views.index）失败后，我尝试并检查了其他视图并且所有视图都有效，但现在不行！所有视图都在 10 秒前正确运行，现在都不起作用。他们吐出与主视图相同的错误。

我发现在互联网上搜索这个相关主题：

[django 的视图不存在很神奇，但它在 5 秒前工作并且它仍然存在](http://python.6.n6.nabble.com/It-s-magic-the-view-does-not-exist-for-django-but-it-worked-5-secondes-before-and-it-still-exist-td4695300.html)

但我试图删除原始文件（ism 应用程序中的views.py）并再次写入，问题仍然存在。与所有其他views.py 相同。

有人知道这个问题吗？

谢谢 =)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-03T08:31:30.107

尝试做一个

```
 python ./manage.py shell 
```

然后导入给您带来问题的视图。这可能最终会为您提供更多有用的调试信息。

```
> from ism.views import index 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-08T15:14:09.977

它发生在我身上，最终问题是我在forms.py中的一个表单中有语法错误，我将此表单导入到我的views.py文件中。Django 错误消息仍然指向我查看不存在错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T22:17:00.887

出于同样的原因，我遇到了同样的错误。在错误中报告的文件导入的另一个文件中输入错误。通过手动导入 shell 来显示。

谢谢kdazzle！

——弗雷德·斯鲁卡

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-10T21:23:09.040

我设法通过在 vim 中打开视图文件并保存而不做任何更改来解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T04:41:54.043

我有同样的问题。

我没有任何线索，在 shell 中导入模块根本没有帮助：`AttributeError: 'module' object has no attribute 'views'`.
但是我注意到，如果我在导入视图之前导入了一个特定的模块（在 views.py 中导入），它就可以工作。

我终于发现导入的模块也导入了`views.py`，所以它失败了，因为每个文件都在导入另一个文件。不过，任何地方都没有明确的消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-15T08:09:31.480

由于两个文件之间的交叉视图导入，同样的问题。

我已经通过在每个方法中移动导入来解决它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T23:43:30.217

同样的问题。

我的外壳也没有工作。

我看到了 Jimenez 发布的链接，在讨论结束时，这个人解决了使用 Vim 保存文件的问题。

我用 Vim 重写了文件，它成功了！

如果您的问题还没有解决，请尝试一下！

# android - Android：EditText自动打开键盘，如何停止？

> ID：10593195
> 
> 赞同：18
> 
> 时间：2012-05-15T01:45:20.183
> 
> 标签：android, android-edittext, xamarin.android, xamarin

我有一个简单`EditText`的`ListView`定义如下。

当应用程序运行时，EditText 被选中并出现键盘。

我不希望这种情况发生。我不希望它被选中或键盘默认出现。

```
<EditText
    android:id="@+id/search_box"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="type to search titles"
    android:inputType="text"
    android:maxLines="1"
    android:capitalize="none"
    android:linksClickable="false"
    android:autoLink="none"
    android:autoText="true"
    android:singleLine="true" />
<ListView
    android:id="@+id/DetailsListView"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:background="@color/transparent"
    android:cacheColorHint="@color/transparent"
    android:listSelector="@drawable/list_selector"
    android:fastScrollEnabled="true" /> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-03T08:00:22.500

首先，标签是 monodroid，所以它在 C# 上，所以接受的答案是正确的。

但这不是我认为作者想要的......这个技巧只是隐藏了键盘，但 editText 仍然有焦点。

要在 java 和 c# 中执行此操作，您必须将其放在根 Layout 中：

```
android:descendantFocusability="beforeDescendants"
android:focusableInTouchMode="true" 
```

For example :

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white"
    android:descendantFocusability="beforeDescendants"
    android:focusableInTouchMode="true"
              >
....
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-15T19:22:56.580

我发现这是解决方案：

```
Window.SetSoftInputMode (SoftInput.StateAlwaysHidden); 
```

注意：这是 C# 而不是 Java for Android

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-07T16:51:30.213

Add this in onCreate

```
 getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-15T03:24:58.790

在布局中试试这个

```
<EditText
                    android:id="@+id/myid2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/myid1"
                    android:clickable="true"
                    android:cursorVisible="false"
                    android:focusable="false"
                    android:hint="@string/hint"
                    android:singleLine="true"
                    android:textColor="@color/black"
                    android:textSize="15dp" /> 
```

这在你的代码中

```
 myEditText.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_UP) {
                //do tasks
            }
            return false;
        }
    }); 
```

我不知道它是否有任何用处。我什至不知道它做了什么。但它为我解决了类似的问题。对不起，如果我浪费了你的时间

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-13T07:15:02.740

i found my solution , you can try this one and it works perfect.

xml (i set editText focusableInTouchMode to false in defualt):

```
 <EditText ... android:focusableInTouchMode="false" .../> 
```

and i changed focusableInTouchMode after touching in java :

```
 yourEditText.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            yourEditText.setFocusableInTouchMode(true);
            return false;
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-08T04:58:52.813

android:windowSoftInputMode="stateHidden" did not work for me. Neither did messing around with the elements focus and other techniques (even setting it as enabled=false shows the keyboard).

My Solution: Create a hideKeyboard Function:

```
private void hideKeyboard() {
        InputMethodManager imm = (InputMethodManager) getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(view.getWindowToken(), 0);
    } 
```

And trigger it whenever the UI that's hosting the textfield becomes visible:

For a Dialog:

```
 dialog.setOnShowListener(new DialogInterface.OnShowListener() {
        @Override
        public void onShow(DialogInterface dialog) {
            hideKeyboard();
        } 
```

For a widget:

```
@Override
public void setVisibility(int visibility) {
    super.setVisibility(visibility);
    hideKeyBoard();
} 
```

# primefaces - 在primefaces中进行ajax提交时如何显示消息

> ID：10593200
> 
> 赞同：1
> 
> 时间：2012-05-15T01:46:39.523
> 
> 标签：primefaces

我正在使用 glassfish 和 eclipse 试用 Primefaces 3。

我想在创建或输入用户详细信息时使用 Primefaces 对话框。假设例如在一个页面中，我有一个创建按钮，单击该按钮将显示此对话框。

```
<p:dialog id="dialog"  widgetVar="dlg1">
    <h:form id="addMemberForm">
            <!-- More code here -->
            <f:facet name="footer">
                <p:commandButton value="Save"
                    actionListener="#{myBean.save}"
                    oncomplete="dlg1.hide()"  />
            </f:facet>
        </p:panelGrid>
    </h:form>
</p:dialog> 
```

..当我的保存按钮被点击时，执行这段代码。

```
public class MyBean{
    public void save(ActionEvent event) {
        try{
            myEJB.addMember(newMember);
            //how to show message
        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

添加成功后如何向用户显示对话框弹出消息。

我用这段代码试过了，但这没有出现，对话框被关闭了。

```
FacesMessage facesMessage = new FacesMessage("Successful add!");
FacesContext.getCurrentInstance().addMessage(null, facesMessage); 
```

我在想这是一个 ajax 提交，所以一切都被清除了。

我想我必须在 oncomplete 期间执行一些代码，但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T06:58:41.653

您应该从您的 ajax 请求中更新消息标签。

假设您的页面上有这样的全局消息标签：

```
<h:messages id="msg"/> 
```

由于它不在对话框的表单中，因此您需要在`update`属性中`p:commandButton`使用绝对 id 来处理它：

```
<p:commandButton value="Save"
                 actionListener="#{myBean.save}"
                 oncomplete="dlg1.hide()"
                 update=":msg"  /> 
```

# javascript - Sproutcore 中的 Base64 编码

> ID：10593203
> 
> 赞同：0
> 
> 时间：2012-05-15T01:47:15.140
> 
> 标签：javascript, base64, sproutcore, sproutcore-views

我需要在 Sproutcore 中调用 restful web 服务，这需要 http 请求的身份验证标头。我在 Sproutcore 中编写了类似的代码：

```
authHeader: function () {
    var userAndPass = "username:password";
    var auth = "Basic " + Base64.encode(userAndPass);
    return auth;
}, 
```

但是，当我运行它时，没有定义 sadi Base64。

任何人都知道如何修复它或在 sproutcore 中完成它。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T03:55:14.320

用于[**`btoa()`**](https://developer.mozilla.org/en/DOM/window.atob)Base-64 编码。

```
var auth = "Basic " + btoa(userAndPass); 
```

# css - 固定位置元素不在边框边缘

> ID：10593204
> 
> 赞同：0
> 
> 时间：2012-05-15T01:47:20.167
> 
> 标签：css, css-position

我想为网站边缘（div）而不是屏幕边缘设置固定位置元素的样式。

然而，在大分辨率上，我目前看到的是固定元素和网站之间的巨大差距。在小型网站上，我看到固定宽度的元素被推得太近了。

我怎样才能做到这一点？

不同屏幕分辨率的多个css？

任何通用的解决方案可用？

谢谢，

垫

# ruby-on-rails - 跨关联查询 mongodb/mongomapper 数据

> ID：10593206
> 
> 赞同：0
> 
> 时间：2012-05-15T01:47:42.037
> 
> 标签：ruby-on-rails, mongodb, mongomapper

我使用 mongomapper 来支持带有 mongodb 的 rails 应用程序，并且需要跨关联查询给定数据集。

例如。

```
类用户
  包括 Mongoapper::Document

  键：年龄，整数
  许多：人才
结尾

```

```
类人才
  包括 Mongoapper::Document

  键：名称，字符串
结尾

```

现在，如果我想搜索 31 岁的用户，我可以轻松做到

```
用户.find_by_age(31)。
```

但是我如何搜索具有杂耍天赋的 31 岁用户？像这样的东西：

```
User.find_by_age_and_talent(31, “杂耍”)
```

不必通过 mongomapper ...可以是直接的 mongodb 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T20:19:50.183

请注意，您的模型中有拼写错误，Mongomapper 应该是 MongoMapper，抓住这个可以避免一些困惑。

您的模型指定单独的文档，因此您的搜索条件位于单独的文档中。因此，您不能指定跨越文档的单个查询，这相当于连接，并且 MongoDB 中没有连接。正如所写的那样，您被困在对主要结果集进行详尽的辅助查询中。

但是，如果将 Talent 修改为嵌入式文档，则可以在 MongoDB 中进行单个查询，从而在存储和查询方面利用 MongoDB 的优点，而无需 SQL 所需的连接开销。

要运行任一版本，只需将以下模型中的包含更改为 MongoMapper::Document 或 MongoMapper::EmbeddedDocument。测试文件无需修改即可支持两者。

```
class Talent
  #include MongoMapper::Document
  include MongoMapper::EmbeddedDocument

  key :name, String
end 
```

测试/单元/user_test.rb

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  def setup
    User.delete_all
    Talent.delete_all if Talent.respond_to?(:delete_all)
  end

  test "user talent" do
    if Talent.respond_to?(:create)
      puts "Talent as separate document, not embedded"
      User.create(age: 31, talents: [Talent.create(name: 'juggling')])
      User.create(age: 31, talents: [Talent.create(name: 'singing')])
      User.create(age: 25, talents: [Talent.create(name: 'juggling'), Talent.create(name: 'dancing')])
      assert_equal(3, User.count)
      talent = 'juggling'
      users = User.where(age: 31).select{|user| Talent.where(name: talent).where(user_id: user._id).first}
      assert_equal(1, users.size)
      p users
    else
      puts "Talent as embedded document"
      User.create(age: 31, talents: [Talent.new(name: 'juggling')])
      User.create(age: 31, talents: [Talent.new(name: 'singing')])
      User.create(age: 25, talents: [Talent.new(name: 'juggling'), Talent.new(name: 'dancing')])
      assert_equal(3, User.count)
      talent = 'juggling'
      users = User.where(age: 31).where('talents.name' => talent).to_a
      assert_equal(1, users.size)
      p users
    end
  end
end 
```

# ruby - 使用 ruby 在文本文件中查找单词或短语捕获单词跳过一行然后阅读该行直到空白（重复）

> ID：10593210
> 
> 赞同：2
> 
> 时间：2012-05-15T01:48:18.800
> 
> 标签：ruby, parsing, text

使用 ruby​​ 在文本文件中查找单词或短语捕获单词跳过一行然后阅读该行直到空白（重复）

这是上一篇文章的一个变体，用正则表达式回答了我想看看它是否可以在没有正则表达式的情况下完成。下面是一个文本示例：

```
 MATCH ME 1234

3940393  $100.00   FORTY THOUSAND THIEVES
3455     $ 00.10   ONLY 1% OF THE THIEVES

GOBBLEY GOOK: 344959904       3948820   333333333

MATCH ME

3940321  $110.00   FORTY THOUSAND RICHER PEOPLE
3        $ 00.11   ONLY 1% OF THE RICHER PEOPLE 
```

我想要的输出是这样的：

```
MATCH ME,1234,3940393,$100.00,FORTY THOUSAND THIEVES
MATCH ME,1234,3455,$00.10,ONLY 1% OF THE THIEVES
MATCH ME,,3940393,$110.00,FOURTY THOUSAND RICHER PEOPLE
MATCH ME,,3,$00.11,ONLY 1% OF THE RICHER PEOPLE 
```

我在下面的代码只能让我部分实现。它找到了匹配我，但只返回：

```
MATCH ME,1234,3940393 ,$100.00,FORTY THOUSAND THIEVES
MATCH ME,1234,3940393 ,$100.00,FORTY THOUSAND THIEVES
MATCH ME,not here,3940321 ,$110.00,FORTY THOUSAND RICHER PEOPLE 
```

我确信我的方法对于嵌套 if 是错误的，但需要替代方法的帮助：

```
def is_numeric?(object)
  true if Float(object) rescue false
end

def is_match_me_line?(object)
true if object == "MATCH ME" rescue false
end

 def load_file
 raw_records = []
infile = File.open("match_me.txt", "r") 
while line = infile.gets

 possible_match_me = line[0,18]
  match_me_words = line[4,8]

 if is_match_me_line?(match_me_words)

 possible_match_me_number_present = possible_match_me[13,4]   
  if is_numeric?(possible_match_me_number_present)  
   fis_match_me_number = possible_match_me_number_present
   else fis_match_me_number = "not here"  
 end          

line=infile.gets  
line=infile.gets

account = line[0,8] 
amount =  line[9,7] 
description = line[19,40]
record = [match_me_words, fis_match_me_number, account, amount,description]  
raw_records << record
puts raw_records.map {|record| record*','} 

end    
end

end
load_file 
```

正如建议的那样，我正在尝试使用正则表达式解决方案，但我没有从这段代码中得到所需的响应：

```
File.open("text_2.txt", "r").each_line do |data|

data.scan(/(MATCH ME)(.*?)\n\n((?:(?!\n\n).)*)/m).each do |m, n, lines|
lines.each_line do |line|
puts [m, n, *line.unpack('A9A10A*')].map(&:strip).join(',')
end  
end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:22:27.017

这是我的：

```
data.scan(/(MATCH ME)(.*?)\n\n((?:(?!\n\n).)*)/m).each do |m, n, lines|
  lines.each_line do |line|
    puts [m, n, *line.unpack('A9A10A*')].map(&:strip).join(',')
  end  
end 
```

那个正则表达式很丑，但仍然比看 30 行要好。(?:(?!\n\n).)* 表示匹配任何没有后跟 2 个换行符的字符。(?:) 是所以它也不会捕获“。”

# mysql - WordPress数据库错误表已满查询更新

> ID：10593211
> 
> 赞同：1
> 
> 时间：2012-05-15T01:48:29.470
> 
> 标签：mysql, overhead, wordpress

在我的 wordpress 多站点中，在主网站中，当我尝试更新任何帖子或小部件时出现错误。当我将网站置于调试模式时，我发现许多错误：表已满，查询 UPDATE 或 INSERT 为：

*   WordPress数据库错误表'wp_1_options'已满查询更新
*   WordPress数据库错误表'wp_1_comments'已满查询INSERT
*   ETC

如果我检查这些错误表的内容，我认为我的数据库的每个表似乎限制只包含 3MB。

我为我的 wordpress 网站使用了一个数据库插件来检查数据库，我发现它们中的大多数都有 3MB 的“开销”大小。

上述信息的确切问题是什么？我们怎么能解决它？头顶是什么意思？我们如何解决这个开销问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:04:35.527

问题的解决方式与问题中所述相同：[ERROR 1114 (HY000): The table is full](https://stackoverflow.com/questions/730579/error-1114-hy000-the-table-is-full)

我要求我的主人改变：

innodb_data_file_path = ibdata1:10M:autoextend:max:512M

它已经解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T17:14:18.250

因此，正如我最近发现的那样，您的问题实际上在 MySQL 中是不可能的。游标与其余声明一起在存储过程的顶部声明，并且 MySQL 的解析引擎无法管理条件变量声明，它是全部还是没有。

我想出了以下技巧，可以让我解决这个问题，即我只是分别声明了我需要的每个游标。我只有两个，所以这并不疯狂：

```
DECLARE curs CURSOR FOR SELECT DISTINCT(user_id), applied_at FROM application WHERE job_id = JOB_ID_INPUT ORDER BY applied_at DESC;
DECLARE curs_all CURSOR FOR SELECT user_id, applied_at, job_id FROM application WHERE 1 ORDER BY applied_at DESC; 
```

我建议，如果您计划有数百个有条件创建的游标，那么您可能希望找到另一种方法来在 MySQL 中完成您的任务，或者如果您不能找到不同的工具。祝你好运。

查看更多详细信息： http: [//dev.mysql.com/doc/refman/5.0/en/cursors.html](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

# android - Autocomplete address on android using geocoder

> ID：10593213
> 
> 赞同：1
> 
> 时间：2012-05-15T01:48:37.583
> 
> 标签：android, android-layout, android-intent, android-widget

In my effort to get a simple address auto complete on android using geocoder, I tried to my patience and finally decided to ask out for help.

original code reference : [Geocoder autocomplete in android](https://stackoverflow.com/questions/9142885/geocoder-autocomplete-in-android)

So in the below code, all that is happening is trying to auto complete the address as the user types in the autoCompleteTextView. I am calling the function doing the actual work in runOnUiThread,hoping that the UI would not freeze, as the user types in. However the UI freezes after the Threshold (3 characters) and the drop down of the possible addresses appear at it its own pace and not always.

If you guys can tell me where I am going wrong.... thanks in advance

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.os.Handler;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;

public class AlarmActivity extends Activity implements TextWatcher {
private static final int THRESHOLD = 3;
private String latitude, longitude;
private List<Address> autoCompleteSuggestionAddresses;
private ArrayAdapter<String> autoCompleteAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.hw);
    setDefaultKeyMode(DEFAULT_KEYS_SEARCH_LOCAL);
    autoCompleteAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, new ArrayList<String>());
    autoCompleteAdapter.setNotifyOnChange(false);
    AutoCompleteTextView locationinput = (AutoCompleteTextView) findViewById(R.id.locationInput);
    locationinput.addTextChangedListener(this);
    locationinput.setOnItemSelectedListener(this);
    locationinput.setThreshold(THRESHOLD);
    locationinput.setAdapter(autoCompleteAdapter);

}

@Override
public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {

}

@Override
public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
final String value = arg0.toString();

if (!"".equals(value) && value.length() >= THRESHOLD) {

    Thread t = new Thread() {
        public void run() {
            try {

                runOnUiThread(new Runnable() {
                    public void run() {
                        notifyResult(value);
                    }
                });
            } catch (Exception e) {}
        }
    };
    t.start();

} else {
    autoCompleteAdapter.clear();
}
}

@Override
public void afterTextChanged(Editable arg0) {
}

private void notifyResult(String value) {
     try {
            autoCompleteSuggestionAddresses = new Geocoder(getBaseContext()).getFromLocationName(value, 10);

            //notifyResult(autoCompleteSuggestionAddresses);

            latitude = longitude = null;
            autoCompleteAdapter.clear();
            for (Address a : autoCompleteSuggestionAddresses) {
                Log.v("Nohsib", a.toString());
                String temp = ""+ a.getFeatureName()+" "+a.getCountryName()+" "+a.getPostalCode();  

                autoCompleteAdapter.add(temp);
            }
            autoCompleteAdapter.notifyDataSetChanged();

        } catch (IOException ex) {
          //  Log.e(GeoCoderAsyncTask.class.getName(), "Failed to get autocomplete suggestions", ex);
        }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:18:17.813

我相信 UI 冻结的原因是因为即使您从单独的线程调用 notifyResult，它仍然在 UI 线程上运行。解决此问题的方法是改用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

就像是：

```
private class GetSuggestions extends AsyncTask<String, Void, Void> {
     protected Long doInBackground(String... search) {
         value = search[0];
         try {
        autoCompleteSuggestionAddresses = new Geocoder(getBaseContext()).getFromLocationName(value, 10);

        //notifyResult(autoCompleteSuggestionAddresses);

        latitude = longitude = null;
        autoCompleteAdapter.clear();
        for (Address a : autoCompleteSuggestionAddresses) {
            Log.v("Nohsib", a.toString());
            String temp = ""+ a.getFeatureName()+" "+a.getCountryName()+" "+a.getPostalCode();  

            autoCompleteAdapter.add(temp);
        }

    } catch (IOException ex) {
      //  Log.e(GeoCoderAsyncTask.class.getName(), "Failed to get autocomplete suggestions", ex);
    }
     }

     protected void onPostExecute(Long result) {
         autoCompleteAdapter.notifyDataSetChanged();
     }
 } 
```

然后你可以通过调用 new GetSuggestions().execute(value); 来启动任务。

# android - Android如何收听新的Internet Connection

> ID：10593222
> 
> 赞同：0
> 
> 时间：2012-05-15T01:50:30.290
> 
> 标签：android, actionlistener

当我的应用程序由应用程序制作时，如何让我的应用程序监听每个新的 Internet 连接？我该怎么办？

我尝试将 BroadcastReciver 用于 android.net.conn.CONNECTIVITY_CHANGE，但它没有给我任何通知。

```
 <receiver android:name=".ConnectivityReceiver" >
         <intent-filter>
             <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
         </intent-filter>
     </receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:55:18.637

出于明显的安全原因，这是不可能的。`CONNECTIVITY_CHANGE`会在设备的 Internet 连接开启或关闭时告诉您，但您无法监视其他应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:57:37.760

我[仍然](https://stackoverflow.com/questions/10592604/android-permission-for-change-intercept-network-settings-and-traffic)不认为普通应用程序可以拥有执行您想要的操作所需的权限。如果您希望取得任何成功，您的实现必须比普通应用程序更深入。

# javascript - 提取javascript（.js）类和方法结构的库？

> ID：10593227
> 
> 赞同：1
> 
> 时间：2012-05-15T01:50:59.893
> 
> 标签：javascript

是否有任何库或脚本可用于提取任何 *.js javascript 文件的类和方法结构？（理想情况下，能够迭代类和方法会很好，有点像 .net 反射或获取结构的 DOM，例如 DOM 加载 xml 文件）。

是否有任何语言的工具可以执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:34:31.713

好的，我终于找到了一个非常好的库，叫做 Jint (http://jint.codeplex.com/)，它是一个 .Net 的 javascript 解释器。解释器可用于为任何 javascript 文件生成表达式“DOM”（我测试了 jquery.js 和 three.js，它们工作正常），然后可以用它来做你想做的事情，例如翻译它换成另一种语言。

# git - How can I show the name of branches on every commit in `git log`

> ID：10593229
> 
> 赞同：3
> 
> 时间：2012-05-15T01:51:17.137
> 
> 标签：git, git-branch, git-log

In Gitk, showing a commit gives output like this:

```
Author: ...
Committer: ...
Parent: ...auth/parser)
Parent: ... (Merge branch '...')
Child:  ...
Branches: remotes/me/foo, foo 
```

Is there a way to get this kind of output in `git log`? Using `git log --graph` gives similar information, but in my repository with long-lived branches, it can take a lot of scrolling to find which branch a commit was on.

(A similar question to [How can I show the name of branches in `git log`?](https://stackoverflow.com/questions/1841405/how-can-i-show-the-name-of-branches-in-git-log))

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T13:17:13.017

我用这个：

```
git log --pretty=format:\"%h %ad [%an] %s%d\" --graph --date=short
--all --date-order 
```

我在全局中添加了别名`.gitconfig`

```
[alias]
    hist = log --pretty=format:\"%h %ad [%an] %s%d\" --graph --date=short --all --date-order 
```

并且可以调用简单`git hist`

它使非常易于阅读的修订树在一行上具有简短的提交哈希、作者、日期、分支、HEAD 等

# jquery - Add a break then a span after the first word of an anchor using Jquery

> ID：10593233
> 
> 赞同：0
> 
> 时间：2012-05-15T01:51:53.880
> 
> 标签：jquery, navigation, anchor, html, break

I've taken a look at a lot of the questions but couldnt find relevant code to help me. Most of the questions people have asked want a span after the first word but i need to dynamically input a `<br />` AND then wrap the rest of the text in a span after the first word of a nav anchor link. Also this will only affect the first (parent) level of li/anchors.

Here is the html:

```
<nav id="smoothmenu1" class="ddsmoothmenu">

<ul>

<li><a href="index.html" class="current">Home our main page</a></li>

<li><a href="blog.html">Blog latest events</a>
    <ul>
        <li><a href="single.html">Single</a></li>
    </ul>
</li>
<li><a href="about.html">About company, team</a></li>
<li><a href="services.html">Services we offer services</a></li>
</ul>
</nav> 
```

I want the code to spit out like this:

```
<nav id="smoothmenu1" class="ddsmoothmenu">

<ul>

<li><a href="index.html" class="current">Home  <br /><span>our main page</span></a></li>

<li><a href="blog.html">Blog  <br /><span>latest events</span></a>
    <ul>
        <li><a href="single.html">Single</a></li>
    </ul>
</li>
<li><a href="about.html">About  <br /><span>company, team</span></a></li>
<li><a href="services.html">Services  <br /><span>we offer services</span></a></li>
</ul>
</nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:21:42.693

也许有点像这样：

```
$("nav > ul > li > a").html(function(i, oldVal) {
   return oldVal.replace(/ .*/, function(match) {
                                   return "<br><span>" + match + "</span>";
   });
}); 
```

简单演示：http: [//jsfiddle.net/NUReJ/](http://jsfiddle.net/NUReJ/)

（上面将把空格放在里面`<span>`而不是之前`<br>`，像这样：

```
<a href="index.html" class="current">Home<br><span> our main page</span> 
```

...但是浏览器将以相同的方式呈现它。或者您可以采用基本思想并对其进行修改以适合自己...）

# ios5 - 通过代理服务器从 uiwebview 发送所有网页请求

> ID：10593235
> 
> 赞同：0
> 
> 时间：2012-05-15T01:52:00.973
> 
> 标签：ios5, uiwebview, proxy, http-headers, httpresponse

我有一个正在使用的应用程序和服务器。服务器充当代理服务器。在我的应用程序中，我有一个向代理服务器发送请求的 uiwebview。然后代理服务器为 uiwebview 生成响应，发回请求的页面，但问题是 uiwebview 没有通过代理服务器加载页面中的任何资源 url，例如样式表、图像等。

我的问题是，有没有办法将代理服务器的响应发送回 uiwebview，告诉 uiwebview 通过代理服务器加载所有资源，或者有没有办法将 uiwebview 发出的所有资源 url 请求更改为指向代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:44:44.857

阅读有关 NSURLProtocol 的信息，看看这是否符合您将 url 请求更改为代理的要求。

# iis-7 - Where are IIS error pages stored?

> ID：10593236
> 
> 赞同：0
> 
> 时间：2012-05-15T01:52:07.060
> 
> 标签：iis-7, iis-7.5, application-pool

I have a webhosting company. When a client does not I stop their sites app_pool and in the web.config I add:

```
<httpRedirect enabled="true" destination="http://account.SimpleTix.com/Suspended/" exactDestination="false" httpResponseStatus="Found">
        <clear />
    </httpRedirect> 
```

However, since the app_pool is turned off the redirect does not happen and the 503 error appears. If I turn the app_pool on, the nice redirect happens. I'd rather not have extra app_pools running though. Is there a way to set the error 503 html code? I could just add a basic http refresh meta tag.

example... [http://wongfurockauditorium.simpletix.com/](http://wongfurockauditorium.simpletix.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:40:23.507

有一些你不能自定义，在这篇文章中提到，

[http://technet.microsoft.com/en-us/library/cc753103(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc753103(v=ws.10).aspx)

> 您无法自定义以下 HTTP 错误：400、403.9、411、414、500、500.11、500.14、500.15、501、503 和 505。

# asp.net - How do I create an image of a webpage and save the image to my server using .net?

> ID：10593238
> 
> 赞同：0
> 
> 时间：2012-05-15T01:52:21.163
> 
> 标签：asp.net

I have a page that dynamically generates a small html page containing 1 small table w/text. I want to be able to take a picture (png preferable) of that page and save it to my server.

I was previously using a 3rd party solution (ABCdrawHTML2), but I have changed servers and this one does not have it. Is there a way to do it without 3rd party solutions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T01:55:12.193

这就是我使用 Windows.Forms WebBrowser 的方式：

```
public class WebSiteThumbnailImage
{
    string m_Url;
    int m_BrowserWidth, m_BrowserHeight, m_ThumbnailWidth, m_ThumbnailHeight;
    Bitmap m_Bitmap = null;

    public WebSiteThumbnailImage(string url, int browserWidth, int browserHeight, int thumbnailWidth, int thumbnailHeight)
    {
        m_Url = url;
        m_BrowserWidth = browserWidth;
        m_BrowserHeight = browserHeight;
        m_ThumbnailWidth = thumbnailWidth;
        m_ThumbnailHeight = thumbnailHeight;
    }

    public Bitmap GenerateWebSiteThumbnailImage()
    {
        Thread m_thread = new Thread(new ThreadStart(_GenerateWebSiteThumbnailImage));
        m_thread.SetApartmentState(ApartmentState.STA);
        m_thread.Start();
        m_thread.Join();
        return m_Bitmap;
    }

    private void _GenerateWebSiteThumbnailImage()
    {
        WebBrowser m_WebBrowser = new WebBrowser();
        m_WebBrowser.ScrollBarsEnabled = false;           
        m_WebBrowser.Navigate(m_Url);
        m_WebBrowser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(WebBrowser_DocumentCompleted);

        while (m_WebBrowser.ReadyState != WebBrowserReadyState.Complete)          
            Application.DoEvents();

        m_WebBrowser.Dispose(); 
    }

    private void WebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {            
        WebBrowser m_WebBrowser = (WebBrowser)sender;
        m_WebBrowser.ClientSize = new Size(this.m_BrowserWidth, this.m_BrowserHeight);
        m_WebBrowser.ScrollBarsEnabled = false;
        m_Bitmap = new Bitmap(m_WebBrowser.Bounds.Width, m_WebBrowser.Bounds.Height);
        m_WebBrowser.BringToFront();
        m_WebBrowser.DrawToBitmap(m_Bitmap, m_WebBrowser.Bounds);
        m_Bitmap = (Bitmap)m_Bitmap.GetThumbnailImage(m_ThumbnailWidth, m_ThumbnailHeight, null, IntPtr.Zero);
    }
} 
```

要使用它，请在代码隐藏的适当位置执行以下操作：

```
WebSiteThumbnailImage thumbnail = new WebSiteThumbnailImage(url, 1000, 1000, 200, 200);
Bitmap image = thumbnail.GenerateWebSiteThumbnailImage();
image.Save(filePath); 
```

# c# - 使用 asp.net mvc3，我如何以不同的格式显示数据，以将其存储在数据库中？

> ID：10593239
> 
> 赞同：1
> 
> 时间：2012-05-15T01:52:34.423
> 
> 标签：c#, asp.net-mvc, viewmodel

我对.net、mvc 和这个论坛还很陌生。所以请多多包涵，并提前致谢。

我有一个旧数据库，其中包含一个以“hh:mm”形式作为字符串的时间字段。我无法更改数据库，因为它被其他应用程序使用，但我需要读取该字段并将其写回它

理想情况下，我想将小时和分钟分开并将它们显示为两个单独的下拉列表。在使用mvc3和实体框架。我虽然在这种情况下最好的主意是使用视图模型，因为我想要返回的内容与直接在我的数据库表中的不同，但我很难弄清楚如何将这个元素一分为二，渲染它，然后将其粘贴在一起以在数据库上进行更新。

任何人都可以推荐任何关于如何开始的好技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T01:55:47.060

`String.Split(':');`

会给你一个由 3 个字符串组成的数组 ["hh", ":", "mm"]

您可以通过类似的东西来扩展视图模型的想法

```
public class ViewModel
{
public string SelectedHours;
public string SelectedMinutes;
public SelectList AllHours;
public SelectList AllMinutes;
} 
```

您需要列出所有小时和所有分钟并创建一个新的选择列表[http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist.aspx)

然后在您看来，您可以使用 @Html.DropDownListFor 方法。

```
@Html.DropDownListFor(model => model.SelectedHours, Model.AllHours) 
```

然后当你得到你的结果时，只需通过将 SelectedHours 和 SelectedMinutes 连接在一起来创建字符串需要。

这可能是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:06:54.807

欢迎使用 MVC，一旦你习惯了它就会爱上它 :)

要完成此任务，您需要做一些事情：

1.  将视图中的 html 元素绑定到视图模型

使用 Razor 的示例（这是您的观点）：

```
@Html.LabelFor(m => m.Time) 
```

...如果您想要下拉菜单，则必须使用 @Html.DropDownListFor() 但是您需要为其创建一个 SelectList ... 请参见[此处](https://stackoverflow.com/questions/3057873/how-to-write-a-simple-html-dropdownlistfor)

2\. 创建一个 ViewModel 类并包含一个属性来保存字符串值时间

3\. 在控制器中，数据库数据返回后，调用辅助方法（或者如果最小，您可以在操作本身中执行逻辑）来拆分字符串并将结果保存到视图模型中。

```
TimeModel vm = new TimeModel();
vm.Time = String.Split(:); // Here is where u could call your helper method or add whatever logic you want to use to make the pretty string value. 
```

然后你返回 View 和 viewmodel 就可以了。

```
Return View(vm); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T04:01:13.203

由于这是数据库中的一列，我建议将这个奇怪的时间字段的逻辑*抽象*到它自己的类中。

```
class MyTimeField 
{
    public int Hours { get; set; }
    public int Minutes { get; set; }

    public MyTimeField(String timeString)
    {
        var stringParts = timeString.Split(":");
        if(stringParts.length != 2) throw ArgumentException();
        Hours = Int32.Parse(stringParts[0]);
        Minutes = Int32.Parse(stringParts[1]);
    }

    public override String ToString()
    {
        return Hours + ":" + Minutes;
    }
} 
```

使用此类，您可以在从数据库中检索数据后立即创建该类的实例，并在您的视图中使用这些实例，而不是使用字符串解析和操作实现细节来弄乱您的代码。

# c# - C# : Unable to obtain Accesstoken. Google calendar API

> ID：10593240
> 
> 赞同：0
> 
> 时间：2012-05-15T01:52:37.667
> 
> 标签：c#, .net, google-api, oauth-2.0

Hello I'm trying to use the google calendar API. I'm unable to obtain an access token.

Here is the code I'm currently using:

```
 private string ObtainAccessToken(string code)
    {
        string content =
                         "code=" + code + "&" +
                        "client_id=1016429729591.apps.googleusercontent.com&"+ 
                        "client_secret={MySecret}&" +
                        "redirect_uri=urn:ietf:wg:oauth:2.0:oob&" +
                        "grant_type=authorization_code";//authorization_code";
        Google.Apis.Authentication.HttpRequestFactory
                factory = new Google.Apis.Authentication.HttpRequestFactory();

        HttpWebRequest req = factory.Create(new Uri("https://accounts.google.com/o/oauth2/token?"+content), "POST");
        byte[] data = Google.Apis.Utilities.EncodeStringToUtf8(content);
        req.ContentLength = data.Length;

        req.ContentType = "application/x-www-form-urlencoded";

   req.GetRequestStream().Write(data, 0, data.Length);
        req.GetResponse();
    } 
```

The api documentation I'm following is here: [https://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

I'm constantly getting HTTP Bad Request 400 error.

I have tried the solution given in this question but it doesn't work either: [Google Calendar API - Bad Request (400) Trying To Swap Code For Access Token](https://stackoverflow.com/questions/9632803/google-calendar-api-bad-request-400-trying-to-swap-code-for-access-token)

Can someone please point out what I'm doing wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:41:31.060

检查此示例：[http ://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.SimpleOAuth2/Program.cs?repo=samples](http://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.SimpleOAuth2/Program.cs?repo=samples)

它是一个使用 OAuth 2.0 来授权 Tasks API 请求的命令行应用程序，它应该很容易适应它来使用日历 API。

# javascript - 在 d3.js 中合并数据

> ID：10593245
> 
> 赞同：3
> 
> 时间：2012-05-15T01:53:44.487
> 
> 标签：javascript, html, d3.js

我是 Pythonista，正在尝试学习 d3.js（微笑）。

我有一个带套接字的服务器。我的页面订阅了它。服务器以 JSON 形式发送更新`'[["id0", 0.38], ["id1", 0.70], ["id8", 0.71]]'`。我写了以下简单的页面：

```
<!doctype html>
<html>
  <head>
    <title>WebSockets</title>
  </head>
  <body>
    <script src="http://d3js.org/d3.v2.js"></script>
    <script>
      var ws = new WebSocket("ws://localhost:9999/updates");
      ws.onmessage = function(message)
      {
        var my_data = JSON.parse(message.data);
        var dd = d3.selectAll("#messages")
          .append("div")
          .selectAll("div")
          .data(my_data)
          .enter()
          .append("div")
          .attr("id",function(d){return d[0];})
          .text(function(d){return d[1];})
      }
    </script>
    <div id='messages'></div>
  </body>
</html> 
```

它工作正常！WS 接收数据。在`div#messages`它创建一个新的`div`. 然后将 msg 中的数据放入`div#id*`. 所以，经过多次迭代，我有：

```
...
<div id="messages">
  <div>
    <div id="id0">0.83</div>
    <div id="id1">0.06</div>
    <div id="id2">0.33</div>
  </div>
  <div> 
    ... 
  </div>
  <div> 
    ... 
  </div>
  ...
</div>
... 
```

* * *

如何修改代码以使其像这样工作：

**有**

```
...
<div id='messages'>
  <div id='id0'>0.25</div>
  <div id='id1'>0.05</div>
  <div id='id2'>0.25</div>
</div>
... 
```

**收到**

```
'[["id0", 0.38], ["id1", 0.70], ["id8", 0.71]]' 
```

**进入结果**

```
...
<div id='messages'>
  <div id='id0'>0.38</div>
  <div id='id1'>0.70</div>
  <div id='id2'>0.25</div>
  <div id='id8'>0.71</div>
</div>
... 
```

**我的意思是“如果在#messages 中给出了 id 然后更新它；否则将它附加到末尾”**。

我可以用循环来做到这一点，但 doc 说应该用`enter()`and `exit()`..

似乎在这些文章（[circle](http://mbostock.github.com/d3/tutorial/circle.html)，[join](http://bost.ocks.org/mike/join/)）中写了如何做到这一点。问题是我完全不理解这些文章中关于数据同步的思想。我希望代码能帮助我理解这一点。

* * *

**PS：**我在 Python 中完成所有逻辑，但是，我必须在页面上显示数据，并且重绘最少。每个人都说 d3 - 非常简单方便。我阅读了文档，似乎 d3 是一个很好的框架，但我在基础方面遇到了一些麻烦。

* * *

**PPS：**如果数据应该以其他方式传输 - 没有问题。

* * *

* * *

**更新**

在控制台的帮助下，我发现

```
d3.select("#messages")
  .select("div")
  .selectAll("div")
  .data([["id0",0]], function(d){return d[0];})
  .enter() 
```

给我数组`[null]`

```
d3.select("#messages")
  .select("div")
  .selectAll("div")
  .data([["id0",0]], function(d){return d[0];}) 
```

`[HTMLDivElement]`给我数组`HTMLDivElement.__data__ == ["id0",0]`

和

```
d3.select("#messages")
  .select("div")
  .selectAll("div")
  .data([["id0",0]], function(d){return d[0];})
  .exit() 
```

分别给出 `[null, HTMLDivElement, HTMLDivElement]`with`"id1"`和`"id2"`in `HTMLDivElement.__data__[0]`。

**知道下一步怎么办？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:16:55.077

我发现这似乎可行..但它到底有什么作用？

```
var my_data = JSON.parse(message.data);
var my_selection = d3.selectAll("#messages")
  .selectAll("div")
  .data(my_data, function(d){return d[0];})
my_selection
  .enter()
  .append("div")
  .attr("id",function(d){return d[0];})
my_selection
  .text(function(d){return d[1];}) 
```

如果没有人可以回答，可能有人可以解释吗？

# php - strpos empty delimiter

> ID：10593247
> 
> 赞同：0
> 
> 时间：2012-05-15T01:53:50.930
> 
> 标签：php, arrays, strpos

```
function findit($gbq, $kwords){

$original_file = file_get_contents($gbq);

$keytar = $kwords;
$ckeytar = strtoupper($keytar);
$okeytar = strtolower($keytar);

$arrit = array(
    "original" => $keytar,
    "ocap" => $ckeytar,
    "olow" => $okeytar,
);

if(strpos($original_file, $arrit['original']) == true) {
    $fp = fopen("linkter.html", 'a');
    fwrite($fp, "<a href='" . $gbq . "' style='color:orange;'>" . $gbq . "</a>");
    fclose($fp);
}
elseif(strpos($original_file, $arrit['ocap']) == true) {
    $fp = fopen("linkter.html", 'a');
    fwrite($fp, "<a href='" . $gbq . "' style='color:red;'>" . $gbq . "</a>");
    fclose($fp);
}
elseif(strpos($original_file, $arrit['olow']) == true) {
    $fp = fopen("linkter.html", 'a');
    fwrite($fp, "<a href='" . $gbq . "' style='color:green;'>" . $gbq . "</a>");
    fclose($fp);
}
else{
    echo "String not found";
} 
```

}

For some reason it says there is an empty delimiter in the second conditional (the $arrit['ocap'] one).

I've read some other answers, but I haven't found one that works (or that I think would work)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:07:42.133

当您使用`stripos()`而不是简化事情时会发生什么`strpos()`，如下所示：

```
function findit($gbq, $kwords)
{
    $original_file = file_get_contents($gbq);

    if (stripos($original_file, $kwords) !== false)
    {
        $fp = fopen("linkter.html", 'a');
        fwrite($fp, "<a href='" . $gbq . "' style='color:orange;'>" . $gbq . "</a>");
        fclose($fp);
    }
    else
    {
        echo "String not found";
    }
} 
```

# php - How to prevent a PHP page from being accessed directly?

> ID：10593249
> 
> 赞同：3
> 
> 时间：2012-05-15T01:53:56.317
> 
> 标签：php, javascript, ajax, token

Below is a javascript snippet that I am using as part of a AJAX script. How do I prevent user_back_end_friends.php from being accessed directly? I don't want people to be able to go to domain.com/user_back_end_friends.php and see a list of friends.

Javascript Code:

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#user_friends").tokenInput("/user_back_end_friends.php", {
            theme: "sometheme", userid: "<?php echo $id; ?>"
        });
    });
</script> 
```

This is what I found but not sure how to implement it with the javascript code above:

I use this in the page I need to call it in:

```
$included=1;include("user_back_end_friends.php"); 
```

When I have to prevent direct access I use:

```
if(!$included){ die("Error"); } 
```

But how do I add this $included part of the script in my javascript code?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T01:59:22.033

保护javascript代码没有意义，您只需要保护服务器端代码。

无论如何，我认为您的方法不正确；如果您已经有一个登录用户/用户 ID，我将只使用会话中的用户 ID，而不是 javascript 提供的用户 ID。这样，任何人都无法篡改它。

所以你可以开始你的页面：

```
session_start();
if (isset($_SESSION['user_id'))
{
  // do stuff with the user ID
}
else
{
  // display error message?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:00:31.487

由于网络的本质，您不能完全阻止对该脚本的访问。

您可以检查推荐人信息、输入验证，您可以在父页面上创建一个会话变量，并在子页面上进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T02:08:28.300

我做了以下事情。请注意，这不是最安全的，正如其他答案所提到的，您不能完全阻止对此脚本的访问（提供了简单绕过的链接），但出于我的简单目的，这非常有效 -

```
define('_REFERURL',              'http://www.example.com');            // This is the full URL of your domain that will be calling your PHP script(s) 
```

然后创建一个检查引用 URL 的函数（应该来自您的域）

```
function allow_user()
{
        if ($_SERVER['HTTP_REFERER'] == _REFERURL)
        {
                return true;
        }
        else
        {
                return false;
        }
} 
```

利用：

```
if (allow_user())
{
     // Do things
}
else
{
     // Alert, direct access attempted
} 
```

轻松通过：[http ://www.datatrendsoftware.com/spoof.html](http://www.datatrendsoftware.com/spoof.html)

# html - 位于两个单独 div 的顶部和底部

> ID：10593256
> 
> 赞同：0
> 
> 时间：2012-05-15T01:54:38.353
> 
> 标签：html, css

我想淡出两个单独 div 的顶部和底部。

现在我正在尝试在顶部使用 position:absolute 和 top:1px ，在底部使用 bottom: 1px 。不适合我，使用父 div？这导致他们出现在错误的地方。

这个小提琴显示了我在哪里：

[http://jsfiddle.net/mstefanko/23mfk/](http://jsfiddle.net/mstefanko/23mfk/)

我想要的是每个 div 的顶部和底部都在小提琴中展示淡入淡出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:46:40.483

你`.inner-1`和`.inner-2`两者都有绝对定位的元素。这些元素是相对于视口定位的，而不是它们的父元素。您需要设置`.inner-1`和`.inner-2`到一个相对位置：

```
.inner-1,
.inner-2 {
  position: relative;
} 
```

这将导致渐变元素出现在这些容器的顶部和底部。

演示：http: [//jsfiddle.net/23mfk/1/](http://jsfiddle.net/23mfk/1/)

# ruby-on-rails-3 - 初始化 tsearch、trigram 后 pg_search multisearch 出错

> ID：10593257
> 
> 赞同：6
> 
> 时间：2012-05-15T01:54:39.013
> 
> 标签：ruby-on-rails-3, full-text-search, pg-search

我让 pg_search 使用 multisearch 在我的 Rails 3.2.3 应用程序上工作。然后我在这篇文章中实现了 nertzy（pg_search 的作者）提供的初始化程序[。](https://stackoverflow.com/questions/10512642/how-to-enable-tsearch-dictionary-for-pg-search-multi-search). 现在，当我运行搜索时，出现以下错误：

```
PG::Error: ERROR:  operator does not exist: text % unknown
LINE 1: ... ((coalesce("pg_search_documents"."content", '')) % 'searchterm...
                                                             ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts. 
```

我的视图是使用以下代码呈现的：

```
<%= @pg_search_documents.each do |pg_search_document| %>
  <%= pg_search_document.searchable.title %>
<% end %> 
```

我的其余设置可以在[这里找到。](https://stackoverflow.com/questions/10577178/basic-setup-for-multisearch-in-pg-search-and-rails-3-2-3) 任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T02:28:20.353

我之前也遇到过这个问题。只是为了向其他可能遇到麻烦的人澄清......这是安装扩展的方法：

1.  通过运行创建一个新的迁移

    ```
    bundle exec rails g migration add_trigram_extension 
    ```

2.  在您的迁移中，粘贴以下代码：

    ```
    def up
        execute "create extension pg_trgm"
    end

    def down
        execute "drop extension pg_trgm"
    end 
    ```

3.  运行迁移`bundle exec rake db:migrate`

这在本地对我有用。您可以与 pg_search 一起使用的一些扩展或配置需要更新版本的 Postgres。为了在 heroku 上使用某些扩展，您可能需要使用开发数据库。

更新：据我了解，heroku 已发布滚动升级，现在每个人都默认运行更新版本的 pg。以上应该可以在 heroku 上运行，而无需升级您的数据库。

# facebook - 给定一个启用 facebook og 的网页 (url)，检索 og:image 属性的内容

> ID：10593262
> 
> 赞同：0
> 
> 时间：2012-05-15T01:55:18.333
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

有没有办法以编程方式`og:image`使用[https://graph.facebook.com](https://graph.facebook.com)查询检索 url 属性的内容值？

我启用 og 的页面（在这种情况下为“url”，[http](http://mysite.net/my/page/1234/) ://mysite.net/my/page/1234/ ）将包含如下元标记：-

```
<meta property="fb:admins" content="3132223"/>
<meta property="fb:app_id" content="60376622227"/>    
<meta property="og:locale" content="en_US"/>    
<meta property="og:title" content="My og title abcdefg "/>
<meta property="og:description" content="This rocks!" />
<meta property="og:site_name" content="mysite.com"/>
<meta property="og:image" content="http://media2.mysite.com/files/albums/displayfb/abc.jpg"/>
<meta property="og:type" content="article"/>
<meta property="og:url" content="http://mysite.net/my/page/1234/"/> 
```

我知道我可以像这样使用 facebook 调试器，例如[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.rottentomatoes.com%2Fm%2Fmatrix%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.rottentomatoes.com%2Fm%2Fmatrix%2F)

查询给定的 url，facebook 调试器将提供结果。但我需要*一种编程方式来检索结果*，而不是点击 facebook 调试器工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:28:59.020

我没有找到任何图形 api 来查询启用 og 的 web url 以轻松检索其他 og 属性。

因此，广泛使用的替代方法是抓取页面。此处参考答案 -[如何通过 php 获取网页的开放图形协议？](https://stackoverflow.com/questions/7454644/how-to-get-open-graph-protocol-of-a-webpage-by-php)

# java - 离我的 GPS 坐标最近的 OSM（开放街道地图）节点

> ID：10593265
> 
> 赞同：0
> 
> 时间：2012-05-15T01:55:24.847
> 
> 标签：java, gps, latitude-longitude, openstreetmap

我正在使用开放的街道地图。现在我可以获取地图中的所有交点，并可以获取它们的经度和纬度。我的应用程序中有 GPS 我想做的是找到离我的 GPS 坐标最近的交点 这是我的方法，但不是非常精准 。我只需要帮助知道为什么！谢谢..

```
public Nodee nearestPoint(double longitude, double latitude) throws Exception {
    inters = new ArrayList<Nodee>();
    inters = getIntersections();

    double minLong = Math.abs(longitude - (inters.get(0).lon));
    double minLat = Math.abs(latitude - (inters.get(0).lat));
    Nodee NearestNodeLong = null;
    Nodee NearestNodeLat = null;

    for (int i = 0; i < inters.size(); i++) {
        if (Math.abs((inters.get(i).lon) - longitude) < minLong) {
            minLong = (Math.abs((inters.get(i).lon) - longitude));
            NearestNodeLong = inters.get(i);
    } 
        if (Math.abs((inters.get(i).lat) - latitude) < minLat) {
            minLat = Math.abs((inters.get(i).lat) - latitude);
            NearestNodeLat = inters.get(i);
        } 

    }
    if (NearestNodeLong.equals(NearestNodeLat)) {
        return NearestNodeLong;
    } else if (!NearestNodeLong.equals(NearestNodeLat)) {
        Double d1 = (double) distFrom(latitude, longitude, (NearestNodeLat.lat),
                (NearestNodeLat.lon));

        Double d2 = (double) distFrom(latitude, longitude, (NearestNodeLong.lat),
                (NearestNodeLong.lon));

        if (d1 < d2)
            return NearestNodeLat;
        else if (d2 < d1)
            return NearestNodeLong;

    }
    return null;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:42:18.343

试试这个解决方案：

```
public Nodee nearestPoint(double longitude, double latitude) throws Exception {
    Nodee result = null;
    double maxDifference = 0.1;
    ArrayList<Nodees> filteredNodes = getBox(longitude, latitude, maxDifference);

    if ( filteredNodes.size()<=0) return null;
    double minDistance = calcDistance(longitude, latitude,
                    filteredNodes.get(0).lon,filteredNodes.get(0).lon);
    result = filteredNodes.get(0);
    for (int i=1; i<filteredNodes.size();i++){
          Nodee current = filteredNodes.get(i);
          double diffDistance = calcDistance(longitude, latitude,
                            filteredNodes.get(i).lon,filteredNodes.get(i).lon);
          if( minDistance > diffDistance){
                minDistance = diffDistance;
                result = current;
          }
    }   
    return result;
}

public ArrayList<Nodee> getBox(double lon, double lat, double diff) throws Exception{
    ArrayList<Nodee> inters = getIntersections();
    ArrayList<Nodee> result = new ArrayList<Nodee>();
    for (int i=0; i<inters.size(); i++){
        if(Math.abs(inters.get(i).lat-lat)<=diff &&
           Math.abs(inters.get(i).lon-lon)<=diff)
                result.add(inters.get(i));
    }   
    return result();
}

public double calcDistance(lon1, lat1, lon2, lat2){
    deltaLon = lon1-lon2;
    deltaLat = lat1-lat2;
    return Math.sqrt(deltaLon*deltaLon+deltaLat*deltaLat);
} 
```

# android - 内存不足android imageview

> ID：10593267
> 
> 赞同：-1
> 
> 时间：2012-05-15T01:55:40.130
> 
> 标签：android, memory, imageview, android-imageview, android-image

在我的人名设备上，由于内存不足而出现错误，但是当我在另一台设备上尝试相同的程序时，它似乎工作得很好

```
05-14 21:52:54.625: I/dalvikvm(3561): Wrote stack traces to '/data/anr/traces.txt'
05-14 21:52:55.135: I/dalvikvm(3561): threadid=3: reacting to signal 3
05-14 21:52:55.135: I/dalvikvm(3561): Wrote stack traces to '/data/anr/traces.txt'
05-14 21:52:56.785: D/dalvikvm(3561): GC_FOR_ALLOC freed 10K, 3% free 9663K/9863K, paused 13ms
05-14 21:52:56.785: I/dalvikvm-heap(3561): Grow heap (frag case) to 10.158MB for 633616-byte allocation
05-14 21:52:56.820: D/dalvikvm(3561): GC_CONCURRENT freed 3K, 3% free 10278K/10503K, paused 1ms+1ms
05-14 21:52:56.845: D/dalvikvm(3561): GC_FOR_ALLOC freed <1K, 3% free 10280K/10503K, paused 10ms
05-14 21:52:56.850: I/dalvikvm-heap(3561): Grow heap (frag case) to 10.759MB for 633616-byte allocation
05-14 21:52:56.885: D/dalvikvm(3561): GC_CONCURRENT freed <1K, 3% free 10898K/11143K, paused 2ms+2ms
05-14 21:52:56.910: D/dalvikvm(3561): GC_FOR_ALLOC freed <1K, 3% free 10899K/11143K, paused 13ms
05-14 21:52:56.910: I/dalvikvm-heap(3561): Grow heap (frag case) to 11.365MB for 633616-byte allocation
05-14 21:52:56.935: D/dalvikvm(3561): GC_CONCURRENT freed <1K, 3% free 11518K/11783K, paused 1ms+1ms
05-14 21:53:04.005: D/dalvikvm(3561): GC_FOR_ALLOC freed 13K, 2% free 11708K/11847K, paused 24ms
05-14 21:53:04.055: D/dalvikvm(3561): GC_CONCURRENT freed 419K, 5% free 12089K/12679K, paused 1ms+2ms
05-14 21:53:04.080: D/dalvikvm(3561): GC_FOR_ALLOC freed 0K, 5% free 12089K/12679K, paused 9ms
05-14 21:53:04.080: I/dalvikvm-heap(3561): Grow heap (frag case) to 13.680MB for 1843216-byte allocation
05-14 21:53:04.105: D/dalvikvm(3561): GC_CONCURRENT freed 0K, 5% free 13889K/14535K, paused 1ms+1ms
05-14 21:53:04.150: D/dalvikvm(3561): GC_FOR_ALLOC freed 800K, 10% free 13891K/15367K, paused 9ms
05-14 21:53:04.155: I/dalvikvm-heap(3561): Grow heap (frag case) to 15.440MB for 1843216-byte allocation
05-14 21:53:04.175: D/dalvikvm(3561): GC_CONCURRENT freed <1K, 9% free 15691K/17223K, paused 1ms+2ms
05-14 21:53:05.370: E/AndroidRuntime(3561):     at dalvik.system.NativeStart.main(Native Method)
05-14 21:53:05.370: E/AndroidRuntime(3561): Caused by: android.view.InflateException: Binary XML file line #158: Error inflating class <unknown>
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.createView(LayoutInflater.java:606)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.app.Activity.setContentView(Activity.java:1835)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at pilestudios.dirtyyou.singleplay.onCreate(singleplay.java:23)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.app.Activity.performCreate(Activity.java:4465)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-14 21:53:05.370: E/AndroidRuntime(3561):     ... 11 more
05-14 21:53:05.370: E/AndroidRuntime(3561): Caused by: java.lang.reflect.InvocationTargetException
05-14 21:53:05.370: E/AndroidRuntime(3561):     at java.lang.reflect.Constructor.constructNative(Native Method)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.view.LayoutInflater.createView(LayoutInflater.java:586)
05-14 21:53:05.370: E/AndroidRuntime(3561):     ... 26 more
05-14 21:53:05.370: E/AndroidRuntime(3561): Caused by: java.lang.OutOfMemoryError
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.graphics.Bitmap.nativeCreate(Native Method)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.content.res.Resources.loadDrawable(Resources.java:1966)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.widget.ImageView.<init>(ImageView.java:119)
05-14 21:53:05.370: E/AndroidRuntime(3561):     at android.widget.ImageView.<init>(ImageView.java:109) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T01:59:40.927

不同的设备有不同的堆大小。

您可以尝试缩小图像以查看是否有帮助。

# asp.net-mvc-3 - 具有有效 URL 的 ASP.NET MVC“潜在危险的 Request.Path”

> ID：10593277
> 
> 赞同：5
> 
> 时间：2012-05-15T01:57:35.020
> 
> 标签：asp.net-mvc-3, iis-7, requestfiltering

在我的生产 ASP.NET MVC 3 站点上，我注意到偶尔会出现“从客户端检测到潜在危险的 Request.Path 值 (%)”。Windows 应用程序日志中未处理的异常。

虽然这些在常规站点使用（即/随机网络机器人）下可能是完全有效的，但许多请求似乎来自有效的本地 ISP 用户。

在异常的请求详细信息中，请求 URL 与请求路径不同：

> 请求网址： http: [//www.somesite.com/Images/Image](http://www.somesite.com/Images/Image) With Space.jpg
> 
> 请求路径：/Images/Imagehttp://www.somesite.com/Images/Image With Space.jpgWithhttp://www.somesite.com/Images/Image With Space.jpgSpace.jpg

请注意，在“请求路径”中，路径中任何有“空格”的地方都将替换为请求 url 的精确副本！

在站点内，实际链接如下所示：

```
<img src="/Images/Image%20With%20Space.jpg" /> 
```

知道可能是什么原因造成的吗？我试图查看 Request.Path 和 Request.Url 的文档，但我不知道为什么它们会有所不同。直接点击请求 URL 会正确调出资源。

更新：我设法通过使用 IIS 7.0 的失败请求跟踪功能来跟踪其中一个故障请求：

> 参考：谷歌搜索
> 
> 用户代理：Mozilla/5.0（iPad；CPU OS 5_1_1，如 Mac OS X）AppleWebKit/534.46（KHTML，如 Gecko）版本/5.1 Mobile/9B206 Safari/7534.48.3
> 
> [请求网址：http: //www.somesite.com](http://www.somesite.com:80/Images/Image%20With%20Space.jpg) :80/Images/Image%20With%20Space.jpg

在我的 iOS 5.1.1 中手动键入 URL 会正确显示图像。在 Google 图片中搜索图片会正确显示图片。仍然没有成功繁殖。

我看到的跟踪中途：

> MODULE_SET_RESPONSE_ERROR_STATUS 警告。ModuleName="RequestFilteringModule", Notification="BEGIN_REQUEST", HttpStatus="404", HttpReason="Not Found", HttpSubStatus="11",

根据 IIS 的文档，来自请求过滤模块的 404.11 是 URL 中的“双重编码”错误。尝试一下，如果我故意创建一个双重编码的 url，例如[http://www.somesite.com/Images/Image%2520With%2520Space.jpg](http://www.somesite.com/Images/Image%2520With%2520Space.jpg)我会在事件日志中得到确切的错误，并带有格式错误的请求路径。

事件日志错误中的格式错误的请求路径似乎是 ASP.NET 4.0 中的错误。

但是，它并没有解释为什么我首先会收到错误。我检查了大量失败的请求日志——唯一的共同因素是它们都在使用 AppleWebKit。这可能是Safari中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:33:50.747

我不禁想到——考虑到受限的用户代理——这可能表示该浏览器在 IOS 5.1.1 上对 URL 的处理不正确。我个人并不拥有这样的设备，因此我无法对此进行测试 - 但如果使用实际上包含空格的 url 来研究它的行为方式会很有趣。

我有一种感觉，它正在`%20`从页面源的 url 中看到并对其进行双重编码，认为它很有帮助。问题在于 IIS 会将其解码回来（在 ASP.net 启动之前）并将其从婴儿车中抛出，因为现在它看到的是文字`%20`而不是空格。

我个人不建议修改服务器的安全设置；然而，这将是最简单的解决方案，所以我敢说这就是你要做的。

相反，我认为如果你能确认这个“错误”（我已经在路上，正在寻找一个安全的藏身之处，不让 Apple 的律师发现），找到一种适用于该设备的格式；或从您的资源网址中取出所有空格。A`-`是最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:57:39.107

The httpRuntime section of the Web.Config can be modified to adjust the URL validation. ASP MVC projects are usually running in the validation mode 2.0 and the default invalid characters (separated by commas) are listed below.

```
<httpRuntime requestValidationMode="2.0" requestPathInvalidCharacters="&lt;,&gt;,*,%,:,&amp;,\" /> 
```

As you can see the % sign is considered invalid. A space can be encoded to %20 causing the validation error. You can just add the `requestPathInvalidCharacters` attribute to the `httpRuntime` section in your Web.Config file and copy the values I listed below except for the "%," part.

Scott Hanselman has a blog post about this issue:

[http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)

# html - Html 5 与其他技术

> ID：10593281
> 
> 赞同：0
> 
> 时间：2012-05-15T01:58:06.713
> 
> 标签：html

我最近阅读了很多关于 HTML 5 的内容。在我看来，有些东西仍然很模糊，我希望有人能帮助我更好地理解它。

HTML 5 是否只为创建 UI 的“技术”？如果我需要创建一个应用程序来访问银行账户，HTML 5 怎么可能取代所有其他技术？我的意思是应用程序必须使用某种 Web 服务来访问服务器上的数据，而我看不出如何使用 HTML 5 完成该部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:01:59.910

HTML 5 确实是浏览器的标记和 JavaScript API。它不打算访问服务器上的数据。

但它很少单独使用。

CSS 为内容添加样式。

JavaScript 使客户端代码动态化。

AJAX 允许您对服务进行异步调用以获取数据，从而保持您的 UI 响应。

是的，您仍然需要服务。

HTML 5 取代了早期版本的 HTML，仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T04:21:47.077

与任何新技术一样，总是有很多不了解它的评论员的猜测......当我听到人们谈论网站是“Web 2.0”或“Ajaxy”时，我总是发笑

简单地说：

HTML5 与我们自 90 年代以来一直在使用的旧 html 相同，但在 HTML4 和 XHTML1 上做了一些改进。有一些新标签，其中一些甚至不是新标签，它们刚刚被标准化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T05:08:01.053

HTML5 为许多过去只能通过插件或复杂的 hack（本机绘图 API、本机套接字等）才能实现的功能提供本机支持。当然，插件会带来问题：

*   插件不能总是安装。
*   可以禁用或阻止插件（例如，Apple iPad 不附带 Flash 插件）。
*   插件是一个单独的攻击媒介。
*   插件很难与 HTML 文档的其余部分集成（因为插件边界、剪辑和透明度问题）。

尽管某些插件的安装率很高，但它们通常在受控的公司环境中被阻止。此外，一些用户选择禁用这些插件，因为他们授权的广告显示不受欢迎。但是，如果用户禁用您的插件，他们也会禁用您赖以显示内容的程序。

这就是 HTML5 出现的地方，它微笑着挥舞着它的原生功能魔杖。您可以使用 CSS 设置元素样式，使用 JavaScript 编写脚本。事实上，这正是 HTML5 发挥其最大优势的地方，向我们展示了在以前的 HTML 版本中不存在的强大功能。***不仅仅是新元素提供了新功能。这也是与脚本和样式添加的本机交互，使我们能够做的比以往任何时候都多。***

以新的画布元素为例。它使我们能够做一些以前不可能的非常基本的事情（尝试在 HTML4 的网页中绘制对角线）。然而，最有趣的是我们可以通过 API 解锁的强大功能以及我们可以通过几行 CSS 代码应用的样式。就像表现良好的孩子一样，HTML5 元素也可以很好地结合在一起。例如，您可以从视频元素中抓取一帧并将其显示在画布上，用户只需单击画布即可播放您刚刚抓取的帧中的视频。这只是本机代码必须通过插件提供的一个示例。事实上，当您不使用黑匣子时，几乎所有事情都会变得更容易。这一切加起来就是一个真正强大的新媒体。

# ruby-on-rails - 关闭 Aptana + RVM 时 GEMSET 从 APP 中消失

> ID：10593283
> 
> 赞同：2
> 
> 时间：2012-05-15T01:58:16.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rvm, aptana

我目前正在使用最新版本的 AptanaStudio3，但遇到了一个烦人的问题。

每次我完成我的应用程序并关闭应用程序时，当我稍后重新访问它时，我的 gemset 完全消失了，迫使我重新安装所有东西！Aptana 显示目录中不存在 gemset。

我使用 RVM 没有问题，并且能够验证 GEMSET 是否仍然存在于我的 HD 上。

有人对为什么会发生这种情况有任何建议吗？

# c# - .Net 中的并行性能否接管 CPU 并可能拒绝向其他进程提供服务？

> ID：10593284
> 
> 赞同：4
> 
> 时间：2012-05-15T01:58:29.687
> 
> 标签：c#, .net, c#-4.0, parallel-processing, task-parallel-library

我试图了解如何在 .Net 中实现并行性。[以下代码以Reed Copsey 博客](http://reedcopsey.com/2010/01/22/parallelism-in-net-part-3-imperative-data-parallelism-early-termination/)为例。

此代码循环遍历客户集合，并在他们上次联系后 14 天后向他们发送电子邮件。我的问题是，如果客户表非常大并且发送电子邮件需要几秒钟，那么这段代码不会在拒绝服务模式下占用 CPU 到其他重要进程吗？

有没有办法并行运行以下代码行但只使用几个内核以便其他进程可以共享 CPU？还是我以错误的方式解决问题？

```
Parallel.ForEach(customers, (customer, parallelLoopState) =>
{
    // database operation
    DateTime lastContact = theStore.GetLastContact(customer); 
    TimeSpan timeSinceContact = DateTime.Now - lastContact;

    // If it's been more than two weeks, send an email, and update...
    if (timeSinceContact.Days > 14)
    {
         // Exit gracefully if we fail to email, since this 
         // entire process can be repeated later without issue.
         if (theStore.EmailCustomer(customer) == false)
             parallelLoopState.Break();
         else
             customer.LastEmailContact = DateTime.Now;
    }
}); 
```

**接受的答案：**

思考过程是对的！正如 Cole Campbell 指出的那样，可以通过在这个特定示例中指定 ParallelOption 对象来控制和配置应该使用多少内核。这里是如何。

```
var parallelOptions = new ParallelOptions();
parallelOptions.MaxDegreeOfParallelism = 
                 Math.Max(Environment.ProcessorCount / 2, 1); 
```

Parallel.ForEach 将按如下方式使用。

```
Parallel.ForEach(customers, parallelOptions, 
                                (customer, parallelLoopState) =>
{
    //do all same stuff
} 
```

使用 .WithDegreeOfParallelism(int numberOfThreads) 可以将相同的概念应用于 PLINQ。有关如何配置并行选项的更多信息，[请阅读此内容。](http://reedcopsey.com/2010/02/11/parallelism-in-net-part-9-configuration-in-plinq-and-tpl/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T02:27:13.993

The Task Parallelism Library is designed to take the system workload into account when scheduling tasks to run, so this shouldn't be an issue. However, you can use the `MaxDegreeOfParallelism` property on the `ParallelOptions` class, which can be passed into one of the overloads of `ForEach()`, to restrict the number of concurrent operations that it can perform, if you really need to.

# doubly-linked-list - 双向链表的排序列表。

> ID：10593286
> 
> 赞同：0
> 
> 时间：2012-05-15T01:59:14.077
> 
> 标签：doubly-linked-list

请帮助我插入方法。我想在双向链表中插入一个值大于该 int 的 int。然后新的 int 将替换双向链表中更大的值（我得到了很好的工作）。但现在我希望更大的 int 出现在列表中并在适当的地方插入。

如果我说 insert 2 4 6 8 ，它会起作用（结果：2 4 6 8）如果我然后插入 1（小于 2）

结果将是 1 4 6 8 2

问题是，当我插入让我们说 7（大于 6，但小于 8）时，我不知道如何向下行并在适当的地方插入。

```
enter code here 
```

public void insert(int newInt) { Cell newCell = new Cell (newInt);

```
 if (this.size() == 0){
      smallest = newCell;
  } 

  for (Cell i = smallest; i != null; i = i.right){

      // if newCell is the larger than all in row, then add it to the end. 
      if (newCell.value > i.value && i.right == null){
          i.right = newCell; 
      }

      // if newCell is smaller than smallest, then add it to smallest and old smallest will go down the list (compare and put it where appropriate). 
      if (newCell.value < smallest.value){
          newCell.below = smallest; 
          newCell.right = smallest.right; 
          smallest.right = null; 
          smallest = newCell; 

      }

      // if newCell is smallest than any element, then replace that cell with newCell, and send that cell to below row
      // do again untill all below rows are sorted. hence this could be a while loop. 
      if (newCell.value > i.value && newCell.value < i.right.value){
          System.out.println("newCell is " + newCell);
          Cell largerRight = i.right; 
          newCell.right = largerRight.right;
          largerRight.right = null; 
          i.right = newCell; 

          temp = smallest.below; 

          while (temp != null){
              System.out.println(temp); 

              for (Cell k = temp; k != null; k = k.right){

                  if (largerRight.value > temp.value && temp.right == null){
                      temp.right = largerRight;
                      temp = null; 
                  }

              }

              temp =temp.below; 
          }

      }

  }

}//end insert 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:21:40.440

插入双向链表时，您几乎总是有一个第一个和最后一个指针。您还需要在列表中插入一个新节点，但还没有指针信息。

我会用伪代码来做这件事，这样你就可以把它翻译成你想要的任何语言（因为它*可能*是家庭作业）。

首先，检测一个空列表。如果是这种情况，只需构建一个新的单元素列表：

```
if first == NULL:
    newNode->next = NULL  # one element pointing nowhere.
    newNode->prev = NULL
    first = newNode       # first and last are that element.
    last = newNode
    return 
```

否则，找到大于当前节点的第一个节点，这就是您要在之前插入的位置：

```
insertPoint = first                              # scan list until end.
while insertPoint != NULL:
    if insertPoint->payload > newNode->payload:  # stop if found one greater.
        break;
    insertPoint = insertPoint->next              # move to next. 
```

现在，这里有三种不同的可能性：

1.  `insertPoint`是第一个节点，这意味着您必须在前面插入；
2.  `insertPoint`is `NULL`，这意味着您必须附加到列表中；或者
3.  `insertPoint`是第一个以外的有效节点。

首先，处理两种特殊情况。这些被认为是特殊的，因为它们更改了列表 (`first`和`last`) 的控制信息，而不仅仅是节点本身内的指针：

```
if insertPoint == first:      # inserting at front.
    newNode->next = first     # new node points forwards to current first
    newNode->prev = NULL      #   and backwards to nowhere.
    first = newNode           # and update first.
    return

if insertPoint = NULL:        # appending to end.
    newNode->next = NULL      # new node points forwards to nowhere
    newNode->prev = last      #   and backwards to current last.
    last = newNode            # and update last.
    return 
```

如果你已经到了这里，你只需要插入，知道你有一个有效的当前和前一个节点：

```
newNode->next = insertPoint        # set new node to point to correct nodes.
newNode->prev = insertPoint->prev
insertPoint->prev->next = newNode  # update those nodes to point to new node.
insertPoint->prev = newNode
return 
```

# iphone - 在运行时更改 UIButton 的图像

> ID：10593289
> 
> 赞同：0
> 
> 时间：2012-05-15T01:59:46.737
> 
> 标签：iphone, objective-c, xcode, object

我有 UIButton 实例称为卡。我有一个名为“Representer”的对象，它有一个属性“image”，它是一个 UIImage。我正在尝试在运行时更改按钮图像的值。我在界面生成器中有按钮，并且还用按钮声明了一个 IBOutlet。我写了这段代码：

```
UIButton *card1 = [[UIButton alloc] init]; 
[card1 setImage:representer.image forState:UIControlStateNormal]; 
```

编译此代码时，按钮的图像不会改变。请有人帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:05:34.103

您首先需要确保您的按钮已连接到 Interface Builder 中的 IBOutlet，您是否使用 Connections Inspector 做到了这一点？

如果您的 .h 中有按钮：

```
@property (nonatomic, retain) IBOutlet UIButton *option1Button; 
```

然后，在 .m 文件中，调用

```
[option1Button setImage:representer.image forState:UIControlStateNormal]; 
```

在您的代码中，您只是实例化了另一个 UIButton 并在其上设置了图像。这是很好的代码，但与 xib 中的按钮无关。

这绝对假设 IBOutlet 在 Interface Builder 中正确连接。这是它的外观：

![在此处输入图像描述](../Images/26bcd7dfb7fab9af978dfdc2345dd9ca.png)

此外，您需要在按钮的图像与按钮的背景图像中保持一致。他们是两个不同的东西。如果您在 Interface Builder 中指定了“图像”，则在代码中执行相同操作，反之亦然，使用 backgroundImage。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:31:04.700

Set a breakpoint at the line where you are changing the image and make sure cardOne is not nil. (or use an NSLog statement.) Broken outlet links are a very common reason that code doesn't work as expected.

# titanium - Titanium Appcelerator：Android 上带有按钮的视图在第一次实例后变为非活动状态

> ID：10593292
> 
> 赞同：1
> 
> 时间：2012-05-15T02:00:34.370
> 
> 标签：titanium

我有一个win1，它有一个关闭它的按钮。我也有一个按钮来创建一个view1。view1 有一个隐藏它的按钮。

当我单击 view1 上的隐藏按钮时，win1 上应该在单击时创建 view1 的按钮被禁用。为什么？这只是Android中的一个问题。请帮忙。谢谢你。

```
var win1 = Titanium.UI.currentWindow;

var closeButton = Titanium.UI.createButton({
image:'images/icontest.png',
backgroundImage: 'none',
top:0,
right:0
    });

closeButton.addEventListener('click',function()
{
    win1.close({transition:Ti.UI.iPhone.AnimationStyle.CURL_DOWN});
});

 win1.add(closeButton);

 //Main view & button

  var view1=Ti.UI.createView({  
  backgroundColor: '#fff',
      borderColor: '#888',
      borderWidth: 4,
      height: 172,
      width: 275,
      top:50,
      opacity: 0.75,
      borderRadius: 8
      });

  var closeButton2 = Titanium.UI.createButton({
  image:'images/icontest.png',
  backgroundImage: 'none',
  top:0,
  right:0
      });

  closeButton2.addEventListener('click',function()
{
    view1.hide();
});

  view1.add(closeButton2);

  var OpenButton = Titanium.UI.createButton({
  image:'images/icontest.png',
  backgroundImage: 'none',
  top:100,
  right:50
      });

   OpenButton.addEventListener('click',function()
  {
    win1.add(view1);
  });

   win1.add(OpenButton); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:44:52.970

每次单击 OpenButton 时，您都在添加 view1。实际上，您想在单击 OpenButton 时显示 view1 。所以你应该做的是：

```
OpenButton.addEventListener('click',function()
{
    view1.show();
}); 
```

并且 view1 应该添加到 OpenButton.addEventListener 之外。像这样：

```
win1.add(OpenButton);
win1.add(view1); 
```

# .htaccess - htaccess 使用 php 变量重定向...

> ID：10593295
> 
> 赞同：0
> 
> 时间：2012-05-15T02:01:07.877
> 
> 标签：.htaccess, redirect

我在我的 htaccess 中使用这种格式来重定向几个页面/链接：

```
RewriteEngine On
RewriteRule special.php http://www.mysite.com [R=301]
...
...
RewriteRule http://www.mysite.com/special.php?t=master http://www.mysite.com/index.php?q=former [R=301, L] 
```

我注意到，首先，只有顶线在捕捉任何东西，事实上，其他的，就像底线一样，在我输入顶线之前什么也没做。任何想法为什么？

其次， mysite.com/special.php?t=grave 被上面的第一行重定向到 mysite.com/?t=grave ，从而保留了 URL 中的变量。我不想要这个，我只是希望它没有变量地进入 mysite.com。我该怎么做呢？

谢谢，德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:07:05.117

首先，您的第一条规则会捕获其中包含的**任何**URI `special.php`，即使它后面是一堆字符。要将其限制为 only 且完全`special.php`，并确保丢弃查询字符串，请将其更改为

```
RewriteRule ^special.php$ http://www.mysite.com/? [L, R=301] 
```

其次，重写规则只匹配[http://www.mysite.com/](http://www.mysite.com/)**之后** （注意最后一个斜杠）和查询字符串**之前**（问号之后的部分）的部分。因此，如果您将这些规则的格式更改为

 **```
RewriteCond %{QUERY_STRING} t=master
RewriteRule ^special.php$ index.php?q=former [R=301, L] 
```

你应该很高兴。**

# entity-framework - 实体框架多继承？

> ID：10593299
> 
> 赞同：0
> 
> 时间：2012-05-15T02:01:43.040
> 
> 标签：entity-framework, design-patterns, inheritance, entity-framework-4.1, code-first

我有一个抽象基类`Contact`，它有两个子类：`Person`和`Company`.

我想要 a`Customer`或`Vendor`其他可以是 a`Company`或 a 的类型`Person`（都共享相同的主键`ContactId`）。

我的问题是是否可以继承所有这些类型`Contact`？如果答案是否定的，是否还有其他使用`Contact`PK 属性的选项？对于这种情况，推荐的设计是什么？

请注意，我希望`Employee`/`Customer`等也能够成为`User`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:34:44.960

你将如何在 C# 中实现这一点？这是您必须自己回答的第一个问题，因为 .NET 不支持多重继承，因此您不能`Customer`从`Person`or / 派生单个类，并且`Company`- 您需要单独`Customer`的类派生自`Person`和另一个`Customer`派生自的类，`Company`但每次看到这个你应该知道你做错了什么。此外，如果您将来发现需要同时拥有 Contact`Employee`并且`Customer`您将准备好删除整个应用程序，因为继承将无法实现这一点。`Contact`只有直接使用 SQL 才能从`Customer`to更改，`Employee`因为 EF 不允许这样做。

继承不能解决您的问题 - 您必须使用组合（关系）。

# iphone - iOS 应用元数据被拒绝：MFi 认证 PPID #

> ID：10593303
> 
> 赞同：2
> 
> 时间：2012-05-15T02:02:20.217
> 
> 标签：iphone, objective-c, ios, xcode, mfi

我的 iOS 应用程序已被拒绝，我从 Apple 收到以下消息：

…………

*拒绝理由：MFI 问题*

*我们已开始您的审核，但无法继续，因为我们无法找到您的 MFi 证书 PPID #。*

*请在 iTunes Connect 中管理您的应用程序并编辑您的元数据以在评论说明中提供 MFi 证书 PPID #。添加此信息后，单击“保存”，然后单击“提交新元数据”，我们可以继续您的审核。*

……

什么是 MFi 证书 PPID#？我在哪里/如何为我的应用获取一个？

我之前提交了三次相同的应用程序（旧版本），但没有收到这种消息。为什么我现在得到这个？我上一次成功提交的修订是在 2012 年 2 月 12 日。那之后苹果增加了更多的要求吗？

谢谢，-泰迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:10:35.657

您的产品计划 ID。您应该能够在 MFi 门户中找到它。他们询问您的应用程序接口的物理附件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:33:07.573

我是在寻找自己问题的解决方案时来到这里的。如果您在项目中使用任何类型的第三方库和硬件配件，您会收到此消息。

为避免此问题，您可以删除项目不需要的所有库。在 info.plist 中删除 External Accessory 属性，从链接库构建阶段删除 ExternalAccessor lib。

或者，您可以从硬件供应商处收集 MFiD PPID。

# ruby-on-rails - 在 Rails 中包含 Facebook Javascript SDK

> ID：10593305
> 
> 赞同：1
> 
> 时间：2012-05-15T02:02:36.847
> 
> 标签：ruby-on-rails, facebook, facebook-javascript-sdk

我正在尝试异步加载 FB 的 javascript SDK。遵循以下说明：

[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

但是当以下代码在 /assets/js/some-file 中执行时，'FB' 是未定义的：

```
$(window).load ->
  setFbSize()

setFbSize = ->
  FB.Canvas.setSize # This triggers the error
    ... 
```

同步加载工作正常。当我在 application.html.haml 中加载以下内容时，我可以让它工作：

`%script{:src => "http://connect.facebook.net/en_US/all.js"}`

...然后将其包含在我的 index.html.haml 中：

```
:javascript

    FB.init({
        appId:'#{CONFIG['app_id']}', cookie:true,
        status:true, xfbml:true
    }); 
```

我怎样才能让异步加载工作？我认为它实际上可能正在加载（因为当我结合同步/异步解决方案时，它告诉我 FB.init 已执行两次），但在 /assets/js/some-file.coffee 中的代码执行后加载。在运行该代码之前如何验证 FB 是否已加载（如果这是问题所在？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:31:05.653

发出窗口的加载事件时，FB SDK 可能尚未完全加载。任何将访问 FB 对象的代码都应在注册到 window.fbAsyncInit 的函数中执行。[文件](http://developers.facebook.com/docs/reference/javascript/)说：

> 加载 SDK 后立即运行分配给 window.fbAsyncInit 的函数。您希望在 SDK 加载后运行的任何代码都应放置在此函数中并在调用 FB.init 之后。

# smartgwt - ListGrid 单元格中的 tab 键事件

> ID：10593309
> 
> 赞同：0
> 
> 时间：2012-05-15T02:02:52.353
> 
> 标签：smartgwt

事情是我想在编辑单元格时捕捉 tab 键事件。并非每个单元格都是可编辑的，即对于网格中的某些记录，有些单元格是可编辑的，而有些则不是。当通过单击/双击进行编辑时，我可以在 recordClickhander() 中控制单元格编辑能力，但是当单击 tab 键时，它将失控，因为我没有看到任何事件处理程序来捕获 tab 键。那么有谁知道在单元格中编辑时如何禁用 Tab 键或捕获 Tab 键按下事件？谢谢 。

Grid 确实有 keyDownHandler/keyPresshandler，但它仅适用于网格级别，而不适用于编辑时的单元格。

# .htaccess - .htaccess 在应用规则时不忽略目录

> ID：10593310
> 
> 赞同：1
> 
> 时间：2012-05-15T02:02:55.217
> 
> 标签：.htaccess, mod-rewrite

在我求助之前，我在这个问题上停留了一段时间，感谢您提供任何帮助。

出于所有密集目的，我不得不使用此方法重定向所有小写 URL 以在我当前的设置上工作，我知道这不太好。

问题是当我使用此设置时，目录中的所有 URL 都应该跳过中断。例如 /dont-touch/File1 停止工作 - 我需要插入以下代码，以便小写重写不适用于 /dont-touch

```
RewriteCond %{REQUEST_URI} "/dont-touch/" [OR]
RewriteCond %{REQUEST_URI} "/blog/"
RewriteRule ![A-Z] - [S=26]
RewriteRule ^(.*)A(.*)$ /$1a$2 [R,L]
RewriteRule ^(.*)B(.*)$ /$1b$2 [R,L]
RewriteRule ^(.*)C(.*)$ /$1c$2 [R,L]
RewriteRule ^(.*)D(.*)$ /$1d$2 [R,L]
RewriteRule ^(.*)E(.*)$ /$1e$2 [R,L]
RewriteRule ^(.*)F(.*)$ /$1f$2 [R,L]
RewriteRule ^(.*)G(.*)$ /$1g$2 [R,L]
RewriteRule ^(.*)H(.*)$ /$1h$2 [R,L]
RewriteRule ^(.*)I(.*)$ /$1i$2 [R,L]
RewriteRule ^(.*)J(.*)$ /$1j$2 [R,L]
RewriteRule ^(.*)K(.*)$ /$1k$2 [R,L]
RewriteRule ^(.*)L(.*)$ /$1l$2 [R,L]
RewriteRule ^(.*)M(.*)$ /$1m$2 [R,L]
RewriteRule ^(.*)N(.*)$ /$1n$2 [R,L]
RewriteRule ^(.*)O(.*)$ /$1o$2 [R,L]
RewriteRule ^(.*)P(.*)$ /$1p$2 [R,L]
RewriteRule ^(.*)Q(.*)$ /$1q$2 [R,L]
RewriteRule ^(.*)R(.*)$ /$1r$2 [R,L]
RewriteRule ^(.*)S(.*)$ /$1s$2 [R,L]
RewriteRule ^(.*)T(.*)$ /$1t$2 [R,L]
RewriteRule ^(.*)U(.*)$ /$1u$2 [R,L]
RewriteRule ^(.*)V(.*)$ /$1v$2 [R,L]
RewriteRule ^(.*)W(.*)$ /$1w$2 [R,L]
RewriteRule ^(.*)X(.*)$ /$1x$2 [R,L]
RewriteRule ^(.*)Y(.*)$ /$1y$2 [R,L]
RewriteRule ^(.*)Z(.*)$ /$1z$2 [R,L] 
```

这就是我的 HTACCESS 文件的外观，我尝试将它放在开头...结尾。没有任何效果。

```
 RewriteEngine On

 RewriteCond %{HTTP_HOST} !^www\.
 RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

 RewriteCond %{REQUEST_URI} !/component/
 RewriteCond %{REQUEST_URI} !/administrator/
 RewriteCond %{HTTP_HOST} ^(www.)?example\.com$ [NC]
 RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:21:27.187

首先，你最好在这里使用 RewriteMap：

```
RewriteEngine On
RewriteMap  lc int:tolower
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule (.*) ${lc:$1} [R=301,L] 
```

这会将 URI 中的所有内容更改为小写，而不是 26 条慢规则。

其次，对于不被重写的目录，我认为您不应该将它们放在引号中

```
RewriteCond %{REQUEST_URI} ^/dont-touch(/|$) [OR]
RewriteCond %{REQUEST_URI} ^/blog(/|$)
RewriteRule ^.*$ - [NC,L] 
```

如果你把`[L]`标志放在最后，低于这个点的任何东西都不会干扰这条规则。

# ios - IOS 5.0之前的TabBar控制器选择颜色

> ID：10593311
> 
> 赞同：1
> 
> 时间：2012-05-15T02:02:59.687
> 
> 标签：ios, uitabbar, uicolor

我不喜欢选择标签栏项目时的默认颜色，我知道在 IOS 5.0 中我可以用一个代码实现它：

```
self.tabBar.selectedImageTintColor = [UIColor thecolorIlike]; 
```

我想知道在 IOS 5.0 之前是否有实现它。非常感谢。

# linux - 为什么开启超线程后性能变差了？

> ID：10593313
> 
> 赞同：4
> 
> 时间：2012-05-15T02:03:19.857
> 
> 标签：linux, linux-kernel, scheduling, intel, hyperthreading

我将 Linux 内核 2.6.32 移植到 Intel(R) Xeon(R) CPU E31275 @ 3.40GHz。如果我在 BIOS 中启用超线程，我可以看到 8 个 CPU 内核（CPU0 ~ CPU7）。大部分中断发生在 CPU 4 中，这个核心的 CPU 使用率远高于其他核心（几乎是其他核心的两倍）。我不是很明白，因为我认为我没有设置任何IRQ绑定操作。

如果我在 BIOS 中禁用超线程，那么一切正常。IRQ 已经平衡，所有内核（CPU0 ~ CPU3）的 CPU 使用率也接近平衡。

有人可以解释一下吗？和BIOS有关吗？我应该在内核中做一些特殊的设置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T06:53:53.983

有些程序会从 HT（超线程）中获得负面影响，要解释这一点，您必须了解 HT 是什么。正如您所说，您看到了 7 个（0-7 还是 8 个）cpu 内核，这不是真的，您的 CPU 中有 4 个内核，8 个内核是虚拟内核，所以一个内核有 2 个线程（并且表现得像他是 2核心）。通常 HT 有助于更快地运行程序，因为 CPU/OS 能够同时运行（执行这些程序所做的任何事情）8 个程序，如果没有 HT，您只能同时运行 4 个。您无需设置任何设置，因为您无法更改此外观，如果您是该程序的开发人员，您应该重新检查代码并根据需要针对 HT 进行优化，或者您可以禁用 HT。

由于一些胡说八道的人在谈论另一个信息：HT 正在增加 CPU 的功率，这不是真的！即使你看到 8 个内核，让我们说 4GHz（GHz 什么也没说，应该用触发器测量），你得到的功率与你打开 HT 并得到 4 个 4GHz 内核时的功率相同。如果您在 2 个虚拟内核上获得 HT，则从您的 CPU 共享 1 个物理内核。

这里有一些关于 HT 的更多信息：http: [//www.makeuseof.com/tag/hyperthreading-technology-explained/](http://www.makeuseof.com/tag/hyperthreading-technology-explained/)

我找不到指向一个非常好的站点的旧链接，其中有代码片段显示 HT 的坏代码和好的代码（意思是比没有 HT 慢，反之亦然）。

TL;DR：由于 HT 的发展，并不是每个程序都能从 HT 中受益。

# objective-c - ARC 中的 didRecieveMemoryWarning (iOS / Obj-C)

> ID：10593314
> 
> 赞同：1
> 
> 时间：2012-05-15T02:03:42.197
> 
> 标签：objective-c, ios, debugging, automatic-ref-counting, didreceivememorywarning

我有一个使用 ARC（自动引用计数）的 iOS（Obj-C）项目。根据 Apple 文档和纯实验，您不能有以下陈述：

```
[UIThingamabob release]; 
```

这是以前在分配或保留后释放项目的方式。现在我知道您必须管理如何在

```
@property (nonatomic, retain) IBOutlet ... 
```

头文件的一部分。

对于我的所有 IB 项目，我一直按原样使用上述语句（使用非原子和保留（或强-无论如何有什么区别，它们是如何使用的？）属性）。当我在 iOS 设备上进行测试时，我会随机获得一个 UIAlertView（我为调试目的而创建的），它仅在触发*didRecieveMemoryWarning*事件时显示。

我的一些 BETA 测试人员不停地被这些视图轰炸，直到他们设法退出应用程序。

我的问题是，**由于我无法释放对象，我应该在 didRecieveMemoryWarning 事件中添加**什么？如果没有任何东西可以放在那里，那么这些错误是由于我使用 @property 函数创建对象的方式而发生的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:49:15.033

您应该使用`@property (nonatomic, weak) IBOutlet...`所有的 IBOutlets。如果你使用strong，视图控制器和它的超级视图会保留插座。当视图消失时，视图控制器仍然有对该插座的引用，该插座不再可见。您可以将 outlet 属性设置为 nil`-viewDidUnload`或使用弱设置指针指向 nil 会在视图消失时自动完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:26:29.370

你不应该`retain`在`@property`语句中使用。ARC 选项`assign`是`weak`和`strong`。有关更多详细信息，请参见此处：

[https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

特别是检查属性属性部分！

编辑：感谢您的评论，两者`retain`现在`strong`似乎都是等价的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T02:39:55.123

如果没有看到您的项目，就不可能知道该怎么做，但您可以执行以下操作：

清除以后可以重新生成的数据数组。清除缓冲区。将当前未使用的对象设置为 nil（如果它们没有保留在其他地方，则会释放它们）。

# php - 我如何创建一个值列表（数组）以及它们在另一个数组中出现的次数

> ID：10593316
> 
> 赞同：0
> 
> 时间：2012-05-15T02:03:58.210
> 
> 标签：php, mysql

我正在尝试生成一个“产品”列表，详细说明每个“产品”出现在 mysql 查询中的次数。

大纲：
1\. 从数据库中获取最近 30 天的订单。
2\. 获取出现在这些订单中的产品。
3\. 计算产品出现在订单中的次数。
4\. 显示一个带有“产品名称”和“已售出数量”的列表

我到目前为止所拥有的（我是 1 周的 php，所以如果它是一团糟请见谅）

```
$orderid = mysql_query("SELECT orderid FROM isc_orders WHERE orddate >= 1334266286 ");
while ($row =  mysql_fetch_array($orderid)) {
$pslm = mysql_query("SELECT * FROM isc_order_products WHERE orderorderid = '$row[0]' GROUP BY ordprodid");      
while ($row =  mysql_fetch_array($pslm)) {
    echo $row[2] . "</br>"; 
```

所以这给了我一个销售产品的清单，但没有分组，当然也没有显示数量。
我在这里浏览了许多帖子，并花了大约 3 个小时试图做到这一点。
希望这里有人可以提供帮助。
谢谢杰森
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:14:37.263

为什么不使用连接然后对结果进行分组：

```
SELECT *, COUNT(1) AS quantity
FROM isc_orders AS o
LEFT JOIN isc_order_products AS p ON o.orderid = p.orderorderid
WHERE orddate >= 1334266286
GROUP BY p.productid 
```

或类似的东西。如果不知道数据库的结构，很难准确地猜出它应该如何编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:17:44.390

好吧，以利亚·马登（Elijah Madden）已经发布了几乎相同的内容，但是既然我已经写过了……就这样吧：

```
SELECT 
    product.name,
    COUNT(*)
FROM isc_orders order
    INNER JOIN isc_order_products product
    ON product.orderorderid = order.orderid
WHERE order.orddate >= 1334266286
GROUP BY order.ordprodid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T02:21:52.937

不是最漂亮的东西......你可能想从产品表中获取产品信息（即名称），但你去吧：

```
$order_query = mysql_query("
    SELECT orderid
    FROM isc_orders
    WHERE orddate >= " . (time() - (30 * 86400)));

if (mysql_num_rows($order_query) > 0)
{
    $orders = array();

    while ($order = mysql_fetch_assoc($order_query))
        $orders[] = mysql_real_escape_string($order['orderid']);

    $product_query = mysql_query("
        SELECT *
        FROM isc_order_products
        WHERE orderorderid IN ('" . implode("', '", $orders) . "')");

    if (mysql_num_rows($product_query) > 0)
    {
        $products = array();
        $times_ordered = array();

        while ($product = mysql_fetch_assoc($product_query))
        {
            if (!isset($times_ordered[$product['ordprodid']]))
                $times_ordered[$product['ordprodid']] = 0;

            $times_ordered[$product['ordprodid']]++;

            if (!isset($products[$product['ordprodid']]))
                $products[$product['ordprodid']] = $product;
        }

        foreach ($products as $id => $product)
            $products[$id]['times_ordered'] = $times_ordered[$id];
    }

    mysql_free_result($product_query);
}

mysql_free_result($order_query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:36:15.427

这才是真正起作用的。

```
SELECT ordprodname, SUM(ordprodqty), ordprodid
FROM isc_orders, isc_order_products 
WHERE orderid = orderorderid AND orddate >= UNIX_TIMESTAMP() - ('$days' * 86400) 
GROUP BY ordprodname 
ORDER BY SUM(ordprodqty) DESC"); 
```

# bash - 如何将 sed 替换限制为特定符号之后的所有内容？

> ID：10593317
> 
> 赞同：1
> 
> 时间：2012-05-15T02:04:18.000
> 
> 标签：bash, sed, replace

我`sed`用来替换文件中的各种文本，例如：

```
sed -i "s/a/b/g" ./file.txt 
```

我文件中的每一行都包含 , `]`，它是一个右方括号和一个空格。在此之前，我不想对任何东西进行替换。以下是一些示例行：

```
This is some text ] This is some other text.
                    ^ 
```

我已经放置了一个胡萝卜来标记可以开始替换的位置。其他右方括号可能会出现在该行的后面，但从未出现过，例如：

```
This is some more text ] This is yet some other text ] This is some more.
                         ^ 
```

这将取代胡萝卜之后的任何火柴。后面的方括号就不重要了。

*   如何限制仅替换第一次出现在一行`sed`后找到的匹配项？`]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:40:27.127

你可以做：

```
sed -i 's/^\([^]]*].*\)a/\1b/' file.txt 
```

请注意，`-i`您使用的标志是非 posix 扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T04:43:09.400

到目前为止，其他答案仅在“]”之后出现一次时才替换“a”。由于您使用`g`全局规范，我假设“a”可能在右括号之后出现多次，并且您想要替换所有这些。为此，请使用“分而治之”的方法。

```
$ echo "foo abc ] bar ] baz" | sed 's/] /&\n/;h;s/.*\n//;s/a/X/g;x;s/\n.*//;G;s/\n//'
foo abc ] bXr ] bXz 
```

这只会考虑第一个右方括号。

# c++ - boost::bind 不使用成员模板函数编译

> ID：10593321
> 
> 赞同：13
> 
> 时间：2012-05-15T02:04:51.837
> 
> 标签：c++

我只是写了一个简单的例子来测试 boost::bind。我用它来实例化一个模板成员函数，但它不能用 g++ 4.6.0 编译。我不知道有什么问题。这是代码：

```
#include <boost/bind.hpp>

struct Functor
{
  void operator()()
  {

  }
};

struct DerivedFinishAction
{
  DerivedFinishAction()
  {}

  void Inc()
  {

  }

  template <typename T>
  void TmplFunc(T t)
  {
    (boost::bind(&DerivedFinishAction::BindFunc<T>, this , t))();
  }

  template <typename T>
  void BindFunc(T t)
  {
    t();
  }

  void Func()
  {
    Functor f;
    TmplFunc(f); // this is OK
    TmplFunc(boost::bind(&DerivedFinishAction::Inc, this)); // compile error
  }
};

int main(int argc, char *argv[])
{

  return 0;
} 
```

并且 g++ 给出以下错误：

```
In file included from /usr/include/boost/bind.hpp:22:0,
                 from testBind.cpp:1:
/usr/include/boost/bind/bind.hpp: In member function ‘void boost::_bi::list2<A1, A2>::operator()(boost::_bi::type<void>, F&, A&, int) [with F = boost::_mfi::mf1<void, DerivedFinishAction, boost::_bi::bind_t<void, boost::_mfi::mf0<void, DerivedFinishAction>, boost::_bi::list1<boost::_bi::value<DerivedFinishAction*> > > >, A = boost::_bi::list0, A1 = boost::_bi::value<DerivedFinishAction*>, A2 = boost::_bi::bind_t<void, boost::_mfi::mf0<void, DerivedFinishAction>, boost::_bi::list1<boost::_bi::value<DerivedFinishAction*> > >]’:
/usr/include/boost/bind/bind_template.hpp:20:59:   instantiated from ‘boost::_bi::bind_t<R, F, L>::result_type boost::_bi::bind_t<R, F, L>::operator()() [with R = void, F = boost::_mfi::mf1<void, DerivedFinishAction, boost::_bi::bind_t<void, boost::_mfi::mf0<void, DerivedFinishAction>, boost::_bi::list1<boost::_bi::value<DerivedFinishAction*> > > >, L = boost::_bi::list2<boost::_bi::value<DerivedFinishAction*>, boost::_bi::bind_t<void, boost::_mfi::mf0<void, DerivedFinishAction>, boost::_bi::list1<boost::_bi::value<DerivedFinishAction*> > > >, boost::_bi::bind_t<R, F, L>::result_type = void]’
testBind.cpp:24:5:   instantiated from ‘void DerivedFinishAction::TmplFunc(T) [with T = boost::_bi::bind_t<void, boost::_mfi::mf0<void, DerivedFinishAction>, boost::_bi::list1<boost::_bi::value<DerivedFinishAction*> > >]’
testBind.cpp:37:58:   instantiated from here
/usr/include/boost/bind/bind.hpp:313:9: error: invalid use of void expression 
```

有人可以帮忙解释一下吗？为什么第一个实例化没问题，而第二个实例导致编译错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T02:39:50.033

这里有一个（非显而易见的）特征`boost::bind`。 [http://www.boost.org/libs/bind/#nested_binds](http://www.boost.org/libs/bind/#nested_binds)

如果你写：

```
void func1(int len) {return len+1;};
int func2(std::string str) {return str.length();};

assert(
    boost::bind(func1, boost::bind(func2, _1) )("Hello")
    == 6 ); 
```

`boost::bind`假设您的意思是“运行`func2`，`"Hello"`然后运行`func1`结果”。这允许更有趣的部分函数应用。

在您的程序中，您有一个表达式，相当于：

```
boost::bind(&DerivedFinishAction::BindFunc<...>, 
            this, 
            boost::bind(&DerivedFinishAction::Inc, this)) 
```

所以`boost::bind`试图弄清楚如何`DerivedFinishAction::Inc`在它的参数上运行，所以它可以将结果传递给`DerivedFinishAction::BindFunc<...>`. 但`DerivedFinishAction::Inc`返回 void，不能传入`DerivedFinishAction::BindFunc<...>`. 因此，您会收到编译器错误：

```
/usr/include/boost/bind/bind.hpp:313:9: error: invalid use of void expression 
```

**编辑**：根据文档，您可以使用它`protect`来实现您想要的行为：

```
#include <boost/bind/protect.hpp>
...
TmplFunc(boost::protect(boost::bind(&DerivedFinishedAction::Inc, this))); // no longer an error
... 
```

# ruby-on-rails-3 - 如何缩小omniauth FB对话框

> ID：10593322
> 
> 赞同：0
> 
> 时间：2012-05-15T02:04:52.773
> 
> 标签：ruby-on-rails-3, facebook-graph-api, omniauth

在我的omniauth初始化文件中，我有这些设置：

```
provider :facebook, 'a_key', 'another_key',
     :scope => 'email', :display => 'popup' 
```

但是当出现 fb 身份验证对话框时，登录窗口仍然是全屏的。我认为弹出选项会缩小窗口。我需要设置其他设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:56:00.787

嘿，请仔细检查当 **:display => 'popup'** 属性存在时页面的显示方式，然后将其删除并再次检查页面的显示方式。检查视图之间的差异。 **:display => popup**更改视图，以便它可以显示在弹出窗口中。

为了缩小窗口，请参考这个答案[Turn omniauth facebook login into a popup](https://stackoverflow.com/questions/4491433/turn-omniauth-facebook-login-into-a-popup)

# google-app-engine - Google Appengine userId 是否应该被视为机密？

> ID：10593323
> 
> 赞同：9
> 
> 时间：2012-05-15T02:04:53.290
> 
> 标签：google-app-engine, security

只是想知道调用返回的 userId 是否`user.getUserId()`应该被视为秘密，还是可以在公共 URL 中使用？例如，个人资料页面 URL 类似于[http://example.com/userprofile/11901930903930](http://example.com/userprofile/11901930903930)，其中 11901930903930 是 Google 在 Appengine 上生成的用户 ID。

这是我们用来获取 userId 的函数：

```
UserService userService = UserServiceFactory.getUserService();
User user = userService.getCurrentUser();

String id = user.getUserId(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T16:05:27.917

实际上，我在谷歌上找到了这个信息，结论是它们**不**应该被公开使用。

来自谷歌：

访问帐户信息

当用户登录到应用程序时，应用程序可以针对用户向应用程序发出的每个请求访问帐户的电子邮件地址或 OpenID 标识符。该应用程序还可以访问唯一标识用户的用户 ID，即使用户更改了其帐户的电子邮件地址。

应用程序还可以确定当前用户是否是应用程序的管理员（“开发人员”）。即使您没有对其他用户进行身份验证，您也可以使用此功能为应用程序构建管理功能。Go、Java 和 Python API 可以轻松地将 URL 配置为“仅限管理员”。

**注意：对于所有 App Engine 应用程序，每个用户都有相同的用户 ID。如果您的应用在公共数据中使用用户 ID，例如通过将其包含在 URL 参数中，您应该使用带有“盐”值的哈希算法来隐藏 ID。暴露原始 ID 可能允许某人将用户在一个应用程序中的活动与另一个应用程序中的活动相关联，或者通过强制用户登录另一个应用程序来获取用户的电子邮件地址。**

[链接到页面](https://developers.google.com/appengine/docs/java/users/overview)

# twitter-bootstrap - Bootstrap 下拉子菜单在平板电脑/手机视图中未正确显示

> ID：10593330
> 
> 赞同：0
> 
> 时间：2012-05-15T02:06:05.853
> 
> 标签：twitter-bootstrap, drop-down-menu

我确实搜索了许多引导下拉问题，但看不到任何与我有相同特定问题的问题！

我遇到了 Bootstap 下拉导航栏子菜单的问题...

我正在使用最新版本的 Bootstrap (v2.0.3)

现在，在标准桌面视图中，一切似乎都可以正常工作 - 但是当我缩小浏览器宽度（或在 iPhone/iPad 上查看）时，子菜单无法正常工作。

最好是去[TEST SITE访问我的测试站点](http://pointstest.defade.com/ "测试地点")

如您所见，“积分表”下拉菜单在桌面视图中很好，但在“移动”视图中出现问题。“弹出”不起作用，子菜单将永久显示。

我相信我已经完全遵循了示例代码（除了通过“升级文档”确定“插入符号”需要以与示例显示方式不同的新方式实现）

这是我当前的代码：

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#"><img alt="F1Stockcars.com" src="../assets/img/logo.png"></a>
      <div class="nav-collapse">
        <ul class="nav">

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            Points Tables
            <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
            <li><a href="#">National Points</a></li>
            <li><a href="#">World Championship Qualifying</a></li>
            <li><a href="#">Track Championships</a></li>
            </ul>
          </li>
          <li><a href="#">Meeting Results</a></li>
          <li><a href="#">Drivers</a></li>
          <li><a href="#">Final Winners</a></li>
          <li><a href="#">Top Scorers by Meeting</a></li>
          <li><a href="#">Highest Scores</a></li>
          <li><a href="#">Back to F1Stockcars.com</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

我不知道我做错了什么，页面作为他们的示例页面之一开始，所以应该有所有必要的代码，我已经将整个引导框架添加到我的服务器，甚至包括我实际上不会的 javascripts需要。

任何帮助将不胜感激，因为我对此完全感到困惑

我只有非常基本的技能，所以请保持简单

非常感谢 - 阿德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:36:50.610

尝试改变：

```
<div class="nav-collapse"> 
```

至：

```
<div class="nav-collapse collapse"> 
```

这为我解决了这个问题。我在引导站点上的示例中选择了它：http: [//twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)（向下滚动到响应式导航栏部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:15:22.743

你没有忘记包含 bootstart-collapse.js 吗？

如果您添加它，它应该可以工作。

# algorithm - 自定义简单加密算法

> ID：10593331
> 
> 赞同：2
> 
> 时间：2012-05-15T02:06:08.350
> 
> 标签：algorithm, encryption

如果这里有人知道这些算法的含义，请帮助我理解，因为我不想在不知道它是如何工作的情况下简单地复制。

这是代码：

1：

```
 public static String encryptKey(String key){
    int ch = 0;

    StringBuilder encryptedKey = new StringBuilder();

    for(int i = 0; i < key.length(); i++ ){

        ch = key.charAt(i);

        ch = ~ch;

        encryptedKey.append(ch);
    }

    return encryptedKey.toString();
    } 
```

2：

```
 public String encrypt(String message, String key){

    StringBuilder encryptedMessage = new StringBuilder();
    char ch;
    int j = 0;

    for(int i = 0; i < message.length(); i++, j++ ){

        if(j >= key.length()){
            j = 0;
        }

        ch = message.charAt(i);

        ch = (char) (key.charAt(j) ^ ch);

        encryptedMessage.append(ch);

    }

    return encryptedMessage.toString();
    } 
```

再次感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T02:14:25.820

这是以可逆方式更改数据的两种简单且标准（并且完全不安全，但这是一种学习体验）的方法。

第一个用于`ch = ~ch;`切换字符中的所有位。因此，例如，`a`ASCII 97 或二进制的字母`01100001`将变为`10011110`。这是可逆的，因为您可以对加密数据应用完全相同的操作来检索原始消息。

第二种稍微安全一些，并使用`^`（异或）运算符根据密钥更改每个字符中的位：将消息字符中的每个位与密钥字符中的相应位进行比较。如果位相同（两者`0`或两者都相同`1`），则加密位为`0`。如果位不同，则加密位为`1`. 这是可逆的，因为您可以`^`使用相同的密钥再次应用相同的操作来检索原始消息。

作为旁注，所有现代密码（例如 DES3 和 AES）都基于异或运算，并结合以指定方式“混合”位的算法，因此猜测密钥要困难得多。可以通过反向运行算法或通过采用数学上等效的计算捷径来解密密文。

**警告和咆哮：** 这显然是功课，你已经承认你和你的朋友都在通过抄袭别人的答案来作弊。尽管这可能很糟糕，但如果您无法解释它，情况会更糟，特别是因为我向您保证，所有其他曾经参加过该课程并复制答案的学生都会产生这两个相同的解决方案。更愚蠢的是，加密非常简单：这一切都归结为翻转位。

所以这里是密码学的本质：

*   获取消息中的每个字符。
*   根据您发明的某些规则，以某种方式修改角色。重要的是*您必须能够反转此规则，*例如，始终将第 3 位设置为`1`，将第 6 位设置为`0`将不起作用，因为您将不再知道它们最初是什么。但是*交换*第 3 位和第 6 位就可以了；您只需再次交换它们即可解密。
*   将修改后的字符作为加密文本附加到您的输出中。
*   重复直到你用完字符。

要解密，请遵循相同的算法，但颠倒您用于修改每个字符的任何规则。

Uibu't bmm uifsf jt up ju。hppe mvdl！

# wpf - 如何在wpf的文本框中显示组合框选定的值

> ID：10593332
> 
> 赞同：1
> 
> 时间：2012-05-15T02:06:21.997
> 
> 标签：wpf, vb.net

我正在开发 WPF 应用程序。我有一个包含“组合框”和“文本框”的窗口。好吧，我想在文本框中显示选定的组合框值。（组合框显示连接的字符串 firstname+lastname+initials）。但我有两个用于名字和名字的文本框。我只想在第一个文本框中显示“名字”，在第二个文本框中显示“姓氏”。我写了下面的代码。IT 显示但已连接的值。有什么方法可以在第一个文本框中显示名字，在第二个文本框中显示姓氏。谢谢。

```
FNSysEngnrTextBox.Text = SysEngnrCB.SelectedItem.ToString
LNSysEngnrTextBox.Text = SysEngnrCB.SelectedItem.ToString 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:35:59.160

既然`SelectedItem`是这样，`Object`当您使用该`ToString`方法时，您将获得以数据为前缀的完整类型。[我能够通过使用String.Split](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx#Y1082)获得您正在寻找的结果。看看这是否适合你。

```
Dim delineators() As Char = {":", ",", "{", "}"}
Dim substrings() As String = SysEngnrCB.SelectedItem.ToString.Split(delineators)
FNSysEngnrTextBox.Text = substrings(1)
LNSysEngnrTextBox.Text = substrings(2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:08:32.447

我对你的平台不是特别熟悉，但我认为 LNSysEngnrTextBox.Text 应该是

LNSysEngnrTextBox.Value 或 LNSysEngnrTextBox.Val

# javascript - 有没有办法在没有 mongodb 的情况下创建像 _id 字符串一样的 mongodb？

> ID：10593337
> 
> 赞同：36
> 
> 时间：2012-05-15T02:07:10.330
> 
> 标签：javascript, node.js, mongodb, couchdb, database

我真的很喜欢 mongodb 生成的 _ids 的格式。主要是因为我可以从客户端提取日期等数据。我打算使用另一个数据库，但我的文档仍然需要那种类型的 _id。如何在不使用 mongodb 的情况下创建这些 id？

谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2016-05-25T13:27:30.170

一个非常简单的 javascript 伪 ObjectId 生成器：

```
const ObjectId = (m = Math, d = Date, h = 16, s = s => m.floor(s).toString(h)) =>
    s(d.now() / 1000) + ' '.repeat(h).replace(/./g, () => s(m.random() * h)) 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2017-04-05T16:08:54.040

我有一个生成`ObjectId`s 的浏览器客户端。我想确保`ObjectId`在客户端使用与服务器中使用的算法相同的算法。MongoDB 有[js-bson](https://github.com/mongodb/js-bson)可以用来完成这个任务。

如果您使用带有节点的 JavaScript。

`npm install --save bson`

**使用要求语句**

```
var ObjectID = require('bson').ObjectID;

var id  = new ObjectID();
console.log(id.toString()); 
```

**使用 ES6 导入语句**

```
import { ObjectID } from 'bson';

const id  = new ObjectID();
console.log(id.toString()); 
```

该库还允许您使用良好的旧脚本标签进行导入，但我没有尝试过。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-05-15T04:25:44.220

对象 ID 通常由客户端生成，因此任何 MongoDB 驱动程序都会有代码来生成它们。

如果您正在寻找 JavaScript，这里有一些来自 MongoDB Node.js 驱动程序的代码：

[https://github.com/mongodb/js-bson/blob/1.0-branch/lib/bson/objectid.js](https://github.com/mongodb/js-bson/blob/1.0-branch/lib/bson/objectid.js)

另一个更简单的解决方案：

[https://github.com/justaprogrammer/ObjectId.js](https://github.com/justaprogrammer/ObjectId.js)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-10-11T03:31:51.683

以更易读的语法 (KISS) 扩展 Rubin Stolk 和 ChrisV 的答案。

```
function objectId () {
  return hex(Date.now() / 1000) +
    ' '.repeat(16).replace(/./g, () => hex(Math.random() * 16))
}

function hex (value) {
  return Math.floor(value).toString(16)
}

export default objectId 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-06T15:26:45.433

ruben-stolk 的回答很好，但故意不透明？稍微容易区分的是：

```
const ObjectId = (rnd = r16 => Math.floor(r16).toString(16)) =>
    rnd(Date.now()/1000) + ' '.repeat(16).replace(/./g, () => rnd(Math.random()*16)); 
```

（实际上字符略少）。还是赞一个！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-08-06T17:53:38.093

这是一个生成新objectId的简单函数

```
newObjectId() {
    const timestamp = Math.floor(new Date().getTime() / 1000).toString(16);
    const objectId = timestamp + 'xxxxxxxxxxxxxxxx'.replace(/[x]/g, () => {
        return Math.floor(Math.random() * 16).toString(16);
    }).toLowerCase();

    return objectId;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-12T09:08:29.787

这是[一个链接](https://www.npmjs.com/package/mongo-object-reader)！到图书馆来做这件事。

[https://www.npmjs.com/package/mongo-object-reader](https://www.npmjs.com/package/mongo-object-reader) 可以读写十六进制字符串。

> ```
> const { createObjectID, readObjectID,isValidObjectID }  = require('mongo-object-reader');
> //Creates a new immutable `ObjectID` instance based on the current system time.
> const ObjectID =  createObjectID() //a valid 24 character `ObjectID` hex string.
> 
> //returns boolean
> // input - a valid 24 character `ObjectID` hex string.
> const isValid = isValidObjectID(ObjectID) 
> 
> //returns an object with data
> // input - a valid 24 character `ObjectID` hex string.
> const objectData  = readObjectID(ObjectID) 
> 
> console.log(ObjectID) //ObjectID
> console.log(isValid)       // true
> console.log(objectData)    /*
> { ObjectID: '5e92d4be2ced3f58d92187f5',
>   timeStamp:
>    { hex: '5e92d4be',
>      value: 1586681022,
>      createDate: 1970-01-19T08:44:41.022Z },
>   random: { hex: '2ced3f58d9', value: 192958912729 },
>   incrementValue: { hex: '2187f5', value: 2197493 } }
> */ 
> ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-15T02:15:36.583

这里有详细的规范

[http://www.mongodb.org/display/DOCS/Object+IDs](http://www.mongodb.org/display/DOCS/Object+IDs)

您可以使用它来滚动您自己的 id 字符串

# flash - Flash CS6 在 IDE 搜索字段中输入中文文本

> ID：10593340
> 
> 赞同：0
> 
> 时间：2012-05-15T02:07:47.740
> 
> 标签：flash, input, ide, fonts, cjk

我们有一个使用时间线的遗留项目。在旧版本的 Flash 中，我可以使用中文字符在“电影资源管理器”（或普通搜索）中进行搜索。

现在，在 CS6 中，当我在 IDE 输入字段中粘贴一些中文时，它显示的只是缺少的字形矩形而不是字符。

我尝试将首选项“默认字体映射”设置为 MS Sans Unicode，但这仅适用于文本字段符号，而不适用于 IDE。

如何将 IDE 用于接口的字体更改为支持 UTF-16 字符的字体？是否可以？

（闪光 CS6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:20:46.370

弄清楚了。Windows 7 更新到 SP1。这样做时，它没有更新语言包，因此任何 Windows UI 都缺少字形。

解决方案：运行windows update并安装必要的SP1语言包

# objective-c - 将 twitter 集成到 iOS 5 中，但保持与旧 iOS 的向后兼容性

> ID：10593342
> 
> 赞同：3
> 
> 时间：2012-05-15T02:08:01.010
> 
> 标签：objective-c, ios, xcode

一直在关注这个关于如何将 twitter 集成到您的应用程序中的精彩[教程。](http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5)我知道程序员在 iOS 5 之前还有其他方法可以集成 twitter，但我的问题是：

我的应用程序支持 iOS 3.0+，所以如果我只使用 iOS 5 的方式集成 twitter，这将如何影响不使用 iOS 5 的用户？它甚至对他们有用吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T03:44:10.953

如果您只允许 iOS 5 用户使用 Twitter，您可以检查 Twitter 是否可用：

```
// Don't forget to import Twitter!
#import <Twitter/Twitter.h>
....
if([TWTweetComposeViewController class] != nil) {
    // your code here
} 
```

此外，请确保在添加 Twitter 框架时将其设置为可选。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T02:12:08.777

不幸的是，官方 API 框架无法工作，因为 twitter 应用程序/集成仅在 iOS 5 中可用

一个好的解决方案是使用[ShareKit](http://getsharekit.com/)，这是一个免费的 API，允许您集成 twitter、facebook 和其他社交网络支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T03:23:07.187

您应该查看[DETweetComposeViewController](https://github.com/doubleencore/DETweetComposeViewController)。我们就是为了这个目的而建造它的。它是 TWTweetComposeViewController 的 iOS4 兼容重新实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T04:10:41.893

使用弱链接和如下代码：

```
 - (void)tweet
{
Class tweeterClass = NSClassFromString(@"TWTweetComposeViewController");

if(tweeterClass != nil) {   
    if([TWTweetComposeViewController canSendTweet]) {
        TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];
        tweetViewController.completionHandler = ^(TWTweetComposeViewControllerResult result) {
            if(result == TWTweetComposeViewControllerResultDone) {

            }
            [self dismissViewControllerAnimated:YES completion:nil];
        };

        [self presentViewController:tweetViewController animated:YES completion:nil];
    } else {
#if !(TARGET_IPHONE_SIMULATOR)
        [self displayAlert:@"You can't send a tweet right now, make sure your device has an internet connection and you have at least one Twitter account setup."];
#else
        NSString *tweetString = [NSString stringWithFormat:@"http://mobile.twitter.com/home?status=%@%@", [self urlEncode:@"Check out this awesome pic: "] ,[self urlEncode:[_blobTweet.shortUrl absoluteString]]];
        NSURL *tweetURL = [NSURL URLWithString:tweetString];
        if ([[UIApplication sharedApplication] canOpenURL:tweetURL]) { 
            [[UIApplication sharedApplication] openURL:tweetURL]; 
        }
#endif
    }
} else {        
    // no Twitter integration could default to third-party Twitter framework

}
}

@end 
```

# excel - 如何检测正在编辑的单元格是否属于已定义名称范围的最后一行

> ID：10593346
> 
> 赞同：1
> 
> 时间：2012-05-15T02:08:36.957
> 
> 标签：excel, vba

我有一个定义的名称称为“Input_Range”。如果正在编辑输入范围的最后一个空行（向空行添加值），则自动插入一个空行。

我已经在这个问题上工作了几天，但没有解决方案。我只能这样做：Worksheet_change 事件来检测定义的名称范围内是否有数据被编辑或选择，然后插入一行。即使我编辑非空行（如范围的第一行），它仍然会添加另一行。

请帮忙！

==========================

我只是想想这个问题，也许我可以做到：如果范围（“Input_range”）中没有空行，则插入一个空行。我还没有这方面的。好吧，仍然需要学习如何检测范围的一行是否为空，但更好。我会解决这个问题，如果我有问题，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:46:00.797

这是你正在尝试的吗？

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim MRange As Range, rng As Range

    On Error GoTo Whoa

    Set MRange = Range("InputRange")

    '~~> Get the last Row of the range
    Set rng = MRange.Range(MRange.Cells(MRange.Rows.Count, 1), _
    MRange.Cells(MRange.Rows.Count, MRange.Columns.Count))

    '~~> Trap changes in the last row of the range
    If Not Intersect(Target, rng) Is Nothing Then
        'If Application.WorksheetFunction.CountA(rng) > 0 Then
            'Application.EnableEvents = False

            'rng.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
        'End If
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

# c# - C# 有一个不错的 MongoDB 框架吗？

> ID：10593349
> 
> 赞同：4
> 
> 时间：2012-05-15T02:09:24.243
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, mongodb

我一直在将 Mongoid 用于一个 Ruby 项目，这使得处理 MongoDB 变得轻而易举。

我现在将 MongoDB 与 .NET (C#) 项目一起使用，并且发现与 Mongoid 相比，Mongo 驱动程序相当缺乏。有什么我可以使用的东西至少可以为我处理基本的数据关系吗？（如双向 ID 引用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:51:13.823

> 我能找到并且在我的项目中使用过的最好的驱动程序是来自 10gen 的 MongoDb 的官方驱动程序： [http ://www.10gen.com/](http://www.10gen.com/)
> 
> [示例项目](http://odetocode.com/blogs/scott/archive/2009/10/13/experimenting-with-mongodb-from-c.aspx)
> 
> [C# 驱动程序](https://github.com/mongodb/mongo-csharp-driver/downloads)
> 
> [C# 驱动与 Linq 教程](http://www.mongodb.org/display/DOCS/CSharp+Driver+LINQ+Tutorial#CSharpDriverLINQTutorial-SupportedLINQqueryoperators)

# datetime - 如何使用 django datetime 获取过去 24 小时内的收视率？

> ID：10593350
> 
> 赞同：0
> 
> 时间：2012-05-15T02:09:28.407
> 
> 标签：datetime, django-models

我有一个模型名称 Ratings ，其中有一个时间戳。我想将用户限制为每天仅 3 个评分。**如何计算特定用户在过去 24 小时内的评分？**

```
class Ratings(models.Model):   
    user = models.ForeignKey(User)
    book = models.ForeignKey('Books')
    rating = models.IntegerField(max_length=150)
    timestamp = models.DateTimeField(auto_now_add=True)
    is_checkedin_rating = models.BooleanField() 
```

编辑*为了更清楚，我想查找特定用户在 24 小时内的评分计数。因此，假设从 5/13 12AM 到 5/14 12AM，计算收视率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:25:37.683

```
import datetime

today = datetime.date.today()
end_time = datetime.datetime.fromordinal(today.toordinal()) // today at 12:00am or 00:00
start_time = end_time -  datetime.timedelta(days=1) yesterday at 12:00am

count = Ratings.objects.filter(
    user=some_user,
    timestamp__gte=start_time,
    timestamp__lte=end_time
).count() 
```

# php - 是否有为此的 PHP 命名空间快捷方式？

> ID：10593356
> 
> 赞同：7
> 
> 时间：2012-05-15T02:10:55.830
> 
> 标签：php, namespaces

我正在尝试找到一种方法来大规模应用这些命名空间，因为这样写出来会很不方便。我知道我可以简单地使用，`jream\ as j` 但我想看看是否可以避免使用反斜杠。

```
require '../jream/Autoload.php';

use jream\Autoload as Autoload,
    jream\Database as Database,
    jream\Exception as Exception,
    jream\Form as Form,
    jream\Hash as Hash,
    jream\Output as Output,
    jream\Registry as Registry,
    jream\Session as Session;

new Autoload('../jream'); 
```

没有办法按照这些方式说些什么：`jream\\* as *;`？

任何提示将不胜感激:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T02:53:33.533

至少您可以跳过所有多余的`as`别名：

```
use jream\Autoload,
    jream\Database,
    jream\Exception,
    jream\Form,
    jream\Hash,
    jream\Output,
    jream\Registry,
    jream\Session; 
```

如果您想使用命名空间中的所有内容而不一一输入，那么确实唯一真正的选择是将命名空间作为一个整体命名并使用反斜杠：

```
use jream as j;

new j\Autoload; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T03:59:07.050

> 有没有办法按照这些方式说些什么： jream\* as *; ?

不，但你可以这样做：

```
// use-jream.php
class Autoload extends jream\Autoload {}
class Database extends jream\Database {}
...

// index.php
require_once 'use-jream.php'

new Autoload('../jream'); 
```

但我真的不建议这样做。

当然，如果您只想更改默认命名空间：

```
namespace jream;

new Autoload('../jream'); 
```

这就是 PHP 的全部`import jream.*`含义，因为 PHP 绝对无法确定一个类是否可能存在于某个命名空间中，除非您通知它。

# json - 为什么json对象的索引不一致？

> ID：10593361
> 
> 赞同：0
> 
> 时间：2012-05-15T02:12:16.907
> 
> 标签：json, indexing, arrays

第一个 JSON

```
{value:[{"sk_service":"1","hour":"0","sum(transaction)":"1636"}]} 
```

第二个 JSON

```
{value:[{"sk_service":"1","month":"04","sum(transaction)":"19572"}]} 
```

然后我这样做是为了从我的 json 中知道属性

```
String a= JSONArray.getJSONObject(0).names().getString(0); //0
String b= JSONArray.getJSONObject(0).names().getString(1); //1 
```

结果 ：

第一个json

```
a = sum(transaction) //index 0.
b = hour         //index 1\. 
```

第二个json

```
a = month       //index 0.
b = sum(transaction)    //index 1. 
```

为什么第一个和第二个json的结果不一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:33:26.100

Is it possible that your just getting mixed up.

```
String a= JSONArray.getJSONObject(0).names().getString(0); 
String b= JSONArray.getJSONObject(1).names().getString(0); 
```

`getJSONObject()` returns the JSON object, and in your code you seem to be using the same JSON object.

`getString()` returns the string matched to that index. Assuming you want the first element in each JSON, wouldn't specify 0 in both cases

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:24:16.310

JSON : JavaScript Object Notation - 你把它当作一个对象，你可以显式地访问属性：

这应该可以解决问题：

```
var data = new Array();

for(var index = 0; index < JSONArray.length; index++){
    data.push(eval("(" + JSONArray.getJSONObject(index) + ")"));
} 
```

您现在有一个数组，可以让您显式检索数据：

```
data[0].value["sk_service"] will give you "1"
data[1].value["month"] will give you "04"
data[0].value["sum(transaction)"] will give you "1636" 
```

我建议你重新考虑你的 JSON：

第二个 JSON

```
{value:[{"sk_service":"1","period":"month","duration":"4","transactionSum":"19572"}]} 
```

引入 period 和 duration 属性将简化您以后重命名的代码`sum(transaction)`，以`transactionSum`避免以后混淆。

# c++ - C++ 错误：“<< Rover::getName()()' 中的“操作员<<”不匹配

> ID：10593363
> 
> 赞同：0
> 
> 时间：2012-05-15T02:12:41.043
> 
> 标签：c++, class

我正在为我的 C++ 类编写一些代码，但我有点卡住了。

这是我正在处理的任务的一部分：

* * *

在 Rover 类中，指定以下成员实例变量：

```
 name (String)

 x position on a grid (integer)

 y position on a grid (integer)

 direction by compass – N, S, E, or W (String)

 speed (0 – 5 meters per second, integer) 
```

在 Rover 类中，指定以下方法：

```
 No-arg constructor – set the rover’s position to (0,0), its speed to 0, 
  its direction to North,and its name to Default

 Constructor that receives parameters to initialize all five 
  instance variables described above

 Setter methods for each instance variable

 Getter methods for each instance variable

 getRoverData – returns a string that displays values for each instance 
  variable of the current rover object, placing each value on a separate line, 
  as follows: 
```

所以现在我只想让基本案例发挥作用。这是我的全部代码：

* * *

主.cpp：

```
#include <iostream>
#include "Rover.h"

using namespace std;

int main() {

    Rover rover1;

    rover1.setDefaultValues();

    cout<<rover1.getRoverData(rover1)<<endl;

    return 0;
} 
```

漫游者.cpp：

```
#include <iostream>
#include "Rover.h"
using namespace std;

//put functions in here

void Rover::setDefaultValues() {
    name = "Default";
    xcoord = 0;
    ycoord = 0;
    direction = "N";
    speed = 0;

}

void Rover::constructRover() {

}

void Rover::setXcoord(int xcoord) {
    this->xcoord = xcoord;
}

void Rover::setYcoord(int ycoord) {
    this->ycoord = ycoord;

}

void Rover::setName(string name) {
    this->name = name;
}

void Rover::setDirection(string direction) {
    this->direction = direction;
}

void Rover::setSpeed(int speed) {
    this->speed = speed;
}

int Rover::getXcoord() {
    return xcoord;

}

int Rover::getYcoord() {
    return ycoord;
}

string Rover::getName() {
    return name;
}

string Rover::getDirection() {
    return direction;
}

int Rover::getSpeed() {
    return speed;
}

string Rover::getRoverData(Rover rover) {
    string printStatement = "";
    printStatement.append("Data for " << rover.getName());
    printStatement.append("\nX: " << Rover::xcoord);
    printStatement.append("\nY: " << Rover::ycoord);
    printStatement.append("\nDirection: " << Rover::direction);
    printStatement.append("\nSpeed: " << Rover::speed);
    return printStatement;

} 
```

漫游者.h：

```
/* 
 * File:   Rover.h
 * Author: Matthew
 *
 * Created on May 14, 2012, 8:10 PM
 */

#ifndef ROVER_H
#define ROVER_H

using namespace std;

class Rover
{
        private:
            string name;
            int xcoord;
            int ycoord;
            string direction;
            int speed;

    public:
            void setDefaultValues();
            void constructRover();
            //XCoordinates
            void setXcoord(int xcoord);
            int getXcoord();
            //YCoordinates
            void setYcoord(int ycoord);
            int getYcoord();
            //Name
            void setName(string name);
            string getName();
            //Direction
            void setDirection(string direction);
            string getDirection();
            //Speed
            void setSpeed(int speed);
            int getSpeed();
            //Printout
            string getRoverData(Rover rover);

};

#endif  /* ROVER_H */ 
```

我目前得到的错误是：

```
rover.cpp:64: error: no match for 'operator<<' in '"Data for " << Rover::getName()()' 
```

*见鬼是什么意思？*

在这一点上，我希望打印输出说的是：

```
Data for Default
X: 0
Y: 0
Direction: N
Speed: 0 
```

有什么想法吗？

抱歉，如果我发布的代码看起来很糟糕......以前没有这样做过。

* * *

**更新：**

* * *

```
#include <iostream>
#include "Rover.h"
using namespace std;

//put functions in here

void Rover::setDefaultValues() {
    name = "Default";
    xcoord = 0;
    ycoord = 0;
    direction = "N";
    speed = 0;

}

void Rover::constructRover() {

}

void Rover::setXcoord(int xcoord) {
    this->xcoord = xcoord;
}

void Rover::setYcoord(int ycoord) {
    this->ycoord = ycoord;

}

void Rover::setName(string name) {
    this->name = name;
}

void Rover::setDirection(string direction) {
    this->direction = direction;
}

void Rover::setSpeed(int speed) {
    this->speed = speed;
}

int Rover::getXcoord() {
    return xcoord;

}

int Rover::getYcoord() {
    return ycoord;
}

string Rover::getName() {
    return name;
}

string Rover::getDirection() {
    return direction;
}

int Rover::getSpeed() {
    return speed;
}

string Rover::getRoverData(Rover rover) {
    string printStatement = "";
    printStatement.append("Data for " + rover.getName());
    printStatement.append("\nX: " + rover.getXcoord());
    printStatement.append("\nY: " + rover.getYcoord());
    printStatement.append("\nDirection: " + rover.getDirection());
    printStatement.append("\nSpeed: " + rover.getSpeed());
    return printStatement;

} 
```

所以，现在打印输出是：

```
Data for Default
X:
Y:
Direction: N
Speed: 
```

所以，它基本上不会打印出零。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:16:38.450

是`<<`流插入运算符。任何地方都没有采用`const char[]`左手边和`std::string`右手边的功能。因此，您会遇到错误。

使用的时候可以使用这个组合`cout`，但是有点欺骗性。来电：

```
std::cout << "Some string" << someStdString; 
```

定义为：

```
(std::cout << "Some string") <<  someStdString; 
```

实际调用相当于：

```
operator<< (operator<< (std::cout, "Some string"), someStdString); 
```

使它工作的事情是内部调用返回相同`cout`的是被传入，以便它可以与其他调用一起使用。如果你不使用类似的东西`cout`表现出这种行为，它就不会以同样的方式工作。这也是为什么你可以说：

```
int i = 5 + 2 + 3; 
```

5 + 2 返回一个`int`与 3 相加的 ，并返回`int`分配给 的`i`。

要连接里面的字符串，你可以用加号替换它，因为字符串和字符数组的加法被定义为 std::string 的一部分，或者添加另一个`append`调用：

```
printStatement.append("Data for " + rover.getName());
//or
printStatement.append("Data for ");
printStatement.append(rover.getName());
//or
printStatement += "Data for " + rover.getName(); 
```

**更新：**

为了回答您的其他问题，这是 C++ 的另一个特性，它不是 Java 的一部分。我没有意识到您正在向其中一些添加整数。当你这样做时，引号中的字符数组实际上会衰减为一个指针。然后，使用指针算法将整数相加。根本不是你想要的。所以基本上你将指针传递给字符串文字的开头，向前移动 x 个字符，其中 x 是你要添加到它的数字。添加 0 意味着它只是停留在那里，所以整个字符串都被传递并且`+ 0`几乎是死代码。

如果要添加整数，则需要一种将整数转换为字符串的方法，然后再添加它们。C++11 有`stoi`，但这与你想要的相反。相反，您可以使用字符串流，以及其他方法：

```
#include <sstream>

int main()
{
    std::stringstream ss;
    ss << 5; //the int to be converted
    std::string s = ss.str(); //get the string
    cout << s + " is the number"; //print with an added string
} 
```

# coffeescript - 这个 Coffeescript 有什么问题？

> ID：10593368
> 
> 赞同：2
> 
> 时间：2012-05-15T02:13:48.917
> 
> 标签：coffeescript

我正在迭代一些 api 数据并将 API 的数据映射到 Coffeescript 对象。令我困惑的是为什么只有部分数据在这两个 console.log 语句之间消失了：

```
items = (for item in @apiFeedPage.items
         fi = new API.FeedItem(item, @apiFeedPage.instance_url)
         console.log fi.comments.comments
         window.API.itemHash[fi.id] = fi  #save for later usage
         fi )       
console.log items[0].comments.comments 
```

在上面，第一个 console.log 输出了我期望的评论： fi.comments.comments 等于一个 Comment 对象数组（Comments 是 FeedItem 上的一个属性） 在第二个 console.log 语句中，comments 对象在那里但未分配 - 就好像 Comment 构造函数在没有注释的 API 响应上运行一样。

构造函数如下所示：

```
class API.FeedItem extends API.FeedComponent 
  # instance vars
  comments: {}

  constructor: (data, instance_url) ->
    super(data, instance_url)
    @parent = new API.User( data.parent )
    @comments.comments = (new API.Comment(api_comment) for api_comment in data.comments.comments)   
    @comments.total = data.comments.total
    @comments.nextPageUrl = data.comments.nextPageUrl 
```

而且我已经确认在构造函数内部，@comments.comments 已正确分配，这是您所期望的，因为第一个 console.log 语句具有预期的对象。上面的第一个代码块位于使用粗箭头的 Ajax 回调函数中，所以我最初怀疑这与丢失“this”的上下文有关似乎并不适用，因为 FeedItem 中的所有其他预期数据有没有...

关于为什么 items[0].comments.comments 在第二个语句中等于 [] 的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:38:30.933

我猜`data.comments.comments`你的`API.FeedItem`构造函数中的最后一个是空的。那将`@comments.comments`导致`[]`. 但是你会问：

> 为什么最后一个`data.comments.comments`值会改变`items[0]`？

答案很简单，这个：

```
class API.FeedItem extends API.FeedComponent 
  # instance vars
  comments: {} 
```

`comments = { }`创建附加到原型的单个对象，`API.FeedItem`因此由`API.FeedItem`;的所有实例共享 换句话说，评论是谎言，那不是实例变量。

考虑一下与您的情况类似的简化：

```
class AFI
  comments: { }
  constructor: (n) ->
    @comments.comments = [ 1 .. n ]

fitems = [ 1 .. 4 ]
items = (new AFI(i) for i in fitems)
console.log item.comments for item in items 
```

您可能希望看到`[1]`, `[1,2]`, `[1,2,3]`,`[1,2,3,4]`出来，但您会看到四个相同`[1,2,3,4]`的 s：http: [//jsfiddle.net/ambiguous/hf9zL/](http://jsfiddle.net/ambiguous/hf9zL/)

如果你修复你的类来初始化`@comments`每个实例：

```
class AFI
  constructor: (n) ->
    @comments = { }
    @comments.comments = [ 1 .. n ] 
```

然后你会看到你所期待的`[1]`, `[1,2]`, `[1,2,3]`, 。`[1,2,3,4]`

> 演示：http: [//jsfiddle.net/ambiguous/qs9Zy/](http://jsfiddle.net/ambiguous/qs9Zy/)

你甚至可以抛出一个

```
console.log items[0].comments.comments == items[1].comments.comments
console.log [1] == [1] 
```

看到这些数组实际上是同一个数组；额外的`[1] == [1]`比较是为了向您证明`==`实际上是在比较对象而不是它们的内容（即 CoffeeScript`==`是 JavaScript 的`===`）。

一个经验法则：不要试图在类定义中定义实例变量，在构造函数中定义它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:51:01.337

在 CoffeeScript 中添加到 @mu 的答案太短了：

```
class X
  y: -> console.log 'y!'
  z: 'z' 
```

被翻译成：

```
var X;

X = (function() {

  function X() {}

  X.prototype.y = function() {
    return console.log('y!');
  };

  X.prototype.z = 'z';

  return X;

})(); 
```

关键的一点是，在语句体中立即`class`声明的项目是在类的**原型**上设置的。在实例之间共享原型，这意味着只有一个函数对象（或一个`'z'`字符串）在所有`X`实例之间共享 - 或者在您的情况下，在`comments`所有`API.FeedItem`s 中共享一个对象。

# ios - 查看 Outlet 和 UITabBarController

> ID：10593370
> 
> 赞同：0
> 
> 时间：2012-05-15T02:13:58.313
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller

我在设置仅包含 UITabBarController 的视图控制器的视图出口时遇到问题。我通过创建一个新文件作为 UIViewController 并在 IB 中拖入一个 UITabBarController 来创建这个视图控制器。当我运行我的应用程序并尝试打开包含此视图控制器的视图控制器时，我得到：

**-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“RootMenuViewController”笔尖，但未设置视图出口。**

这是因为我没有将 RootMenuViewController 的视图与任何东西相关联。

这个问题我试图围绕它与视图出口相关联，因为我似乎无法在 IB 中创建到 UITabBarController 的出口。添加 View 组件会在 IB 中创建另一个窗口，但将其关联会导致选项卡栏不显示。有什么建议么？

以下是我在 IB 中看到的内容。

![IB的截图](../Images/be22ec8911fb5782e2eb42b41a3a147a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:05:39.057

我只是想更新一下，我在技术上没有解决这个问题，我只是解决了这个问题。我的初衷基本上是有一个中央视图控制器来管理几个视图控制器，每个视图控制器代表一个选项卡，需要使用选项卡栏控制器。

但是，我在某处读到您不想在常规 View Controller XIB 文件中包含 Tab Bar Controller 元素。我不知道这是否属实，但这足以让我尝试解决问题。相反，我选择了一个（也是唯一一个）视图控制器来管理所有内容，并让该视图控制器负责每个选项卡的视图，而不是每个选项卡的视图控制器。

这允许我分配中央视图控制器来实现 UITabBarDelegate，我只需响应选项卡更改和交换视图。我将每个视图的大小设置为适合标签栏上方，并在中央视图控制器中引用其数据。

# php - 从 MySQL 中检索字符串

> ID：10593372
> 
> 赞同：0
> 
> 时间：2012-05-15T02:14:02.883
> 
> 标签：php, mysql

我这里有

```
 <table align="center">
  <tr>
     <td>ID No</td><td>:</td>
     <td><input type="text" name="idno" size="10px" maxlength="15px" ></td>
     <td><input type="submit" value="Search ID No." name="search"></td>
    </tr>
  </table>

  <?php
    include('connect.php');
    $sql="select * from stud where ID_No='$_POST[idno]';";
    $result=mysql_query($sql);
        $s=mysql_fetch_array($result);

     $addr = $s[Home_addr];
     echo"$addr";
   ?> 
```

如何获取整个地址？

此脚本仅返回数据库中的第一个单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:16:40.693

您需要遍历数据：

```
<?php
include('connect.php');
$idno = (integer) $_POST['idno'];
$sql="select * from stud where ID_No='$idno';";
$result=mysql_query($sql);
while ($s=mysql_fetch_array($result)) {
    $addr = $s['Home_addr'];
    echo "$addr";
}
?> 
```

另外，请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](https://stackoverflow.com/questions/13000289/create-mysql-table-with-php-variable-not-working#13000306)或[MySQLi](http://php.net/mysqli)。如果你不能决定哪个，[这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)会帮助你。另请参阅[为什么我不应该在 PHP 中使用 mysql 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T02:17:11.450

迭代`mysql_fetch_array`

```
<?php
    include('connect.php');
    $sql="select * from stud where ID_No='$_POST[idno]';";
    $result=mysql_query($sql);
    while($s=mysql_fetch_array($result))
    {

     $addr = $s[Home_addr];
     echo"$addr";
    }
   ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T02:45:18.200

抱歉，题外话。但请不要将来自 $_POST 数组的用户输入直接放入查询中。您需要先通过 mysql_real_escape_string() 传递它，否则您将容易受到 SQL 注入攻击。

此外，关联数组的键是字符串，因此请引用它们：

```
$s['Home_addr'] 
```

不是

```
$s[Home_addr] 
```

在后者中，PHP 将首先尝试将 Home_addr 视为一个常量，但当它没有找到时，它会重新将其视为一个字符串，因此它确实可以工作，但它不可靠，可能更慢，而且完全是错误的。

# android - 复制和替换（如备份）android 数据库

> ID：10593373
> 
> 赞同：0
> 
> 时间：2012-05-15T02:14:09.263
> 
> 标签：android, database, sqlite, backup

我想知道如何将我当前的 sqlite db 复制到一个单独的文件夹中。另外，我需要知道如何用存储的数据库替换一个全新的数据库。

我不能使用 Android 备份引擎，因为我还会复制一些其他文件和文件夹。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:33:43.050

热门问题。您可以找到几种不同的方式在 Android 设备上复制文件，SQLite 数据库是一个简单的、自包含的文件，您可以像大多数其他人一样复制/替换它。这段代码很有效：[如何在 Android 上将数据库文件备份到 SD 卡？](https://stackoverflow.com/q/1995320/1267661). **您也可以在“相关**”列中找到其他方法。-->

# .net - 如何从 .net 客户端与 Netty + Protobuf 服务器对话？

> ID：10593374
> 
> 赞同：0
> 
> 时间：2012-05-15T02:14:10.450
> 
> 标签：.net, client, protocol-buffers, netty

我已经开发了一个 Netty 服务器，通过纯套接字通道 + Protobuf 二进制协议遵循 netty 的示例项目，开发 Java 客户端也非常容易。

但我无法获得参考项目或示例代码来通过 .net 客户端访问这样的 Netty 服务器。

任何人都可以提供这样的示例或参考文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:47:00.737

我认为您需要使用现有的 .NET 库之一，例如[protobuf-net](http://code.google.com/p/protobuf-net/)或[protobuf-csharp-port](http://code.google.com/p/protobuf-csharp-port/)。

# mysql - MySQL：有条件地返回该父级的两个子级的父行，它们是同一个表

> ID：10593378
> 
> 赞同：0
> 
> 时间：2012-05-15T02:14:32.433
> 
> 标签：mysql, alias

我在 MySQL 中有以下设置：

*   表`Game`: `gameid`, `p1state`,`p2state`
*   表`PlayerGamestate`：`playergamestateid`，`ready`

`p1state`并且`p2state`是`PlayerGamestate`. 我想退回所有同时具有 BOTH`p1state`并`p2state`标记为`ready=1`. 这可能在单个查询中吗？

如果这很重要，我正在使用 php 进行访问，但我更愿意在一个查询中进行访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:21:29.073

是的：

```
SELECT GameID
FROM Game G
INNER JOIN PlayerGameState GS1 on G.P1state = GS1.PlayerGamestateID
INNER JOIN PlayerGameState GS2 On G.P2State = GS2.PlayerGameStateID
WHERE GS1.ready=1 and GS2.ready=1 
```

# r - 如何完成以下R图？

> ID：10593380
> 
> 赞同：0
> 
> 时间：2012-05-15T02:14:44.557
> 
> 标签：r, plot

我使用以下 R 绘图命令来创建绘图 - 在 Google 中进行了多次查找后，我设法找到了“正确”的命令 - 但它仍然不完美：

```
x = c(0.1,0.2,0.3,0.4);

y = c(100,200,300,400);

z = c(81,82,83,87);

w = 150;

v = 85.5;

plot(x,y, type="l", lwd=4, xlab="threshold", ylab="seconds");

points(x, y, col="red", cex=2, pch=19);

abline(h=w, col="red", lwd=4);

par("usr");

par(usr = c(par("usr")[1:2], 80,90));

axis(4, lwd=4);

points(x, z, col="blue", cex=2, pch=19);

points(x, z, type="l", lwd=4);

abline(h=v, col="blue", lwd=4); 
```

我正在寻找的是一些东西：

1.  在右侧 y 轴旁边添加一个文本。我在某个地方看到有人建议使用 mtext，但它对我不起作用。没有办法使用axis命令将标签附加到右y轴吗？添加 ylab 或 lab 没有帮助。

2.  我希望 y 轴旁边的文本颜色为蓝色和红色（以便清楚地根据图中的点，哪条曲线与哪个轴对应）。*是否可以只*为 y 轴的标签着色？（嗯，首先我必须为右 y 轴获得一个标签！）

3.  我想让左 y 轴（和刻度线）的线与右 y 轴上的线一样粗。x 轴也一样。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:44:46.093

尝试这样的事情：

```
par("mar")
par(mar = c(par("mar")[1:3], 5.1))

plot(x,y, type="n", lwd=4, ylab="", xlab="threshold", xaxt="n",yaxt="n")

axis(1,lwd=4)
axis(2,lwd=4)

points(x, y, col="red", cex=2, pch=19)
abline(h=w, col="red", lwd=4)

par("usr")
par(usr = c(par("usr")[1:2], 80,90))

axis(4, lwd=4)
points(x, z, col="blue", cex=2, pch=19)
points(x, z, type="l", lwd=4)
abline(h=v, col="blue", lwd=4)

mtext("Your text", side = 4, col = "blue",line=3)
mtext("seconds", side = 2, col = "red",line=3) 
```

![在此处输入图像描述](../Images/bccd8f83deb2d9285b9423cf920f2cf4.png)

# php - 更高效的 MySQL/PHP 代码

> ID：10593383
> 
> 赞同：1
> 
> 时间：2012-05-15T02:15:35.130
> 
> 标签：php, mysql, sql

我正在使用 PHP 和 MySQL DB (sugarcrm) 为 HTML 表单构建一个动态下拉框，以填充所述框。

到目前为止，对于这个我已经硬编码了很多 - 但必须有更好的方法。

必须有一种比我正在做的更有效的方法来编写这段代码。欢迎任何输入：

```
function services(){

    mysql_connect('myhost', 'myname', 'mypass');
    mysql_select_db('spaladon_sugar');
    $sqlF = "SELECT id, type, name FROM serv1_services WHERE type LIKE 'facial'";
    $resultF = mysql_query($sqlF);
    $sqlT = "SELECT id, type, name FROM serv1_services WHERE type LIKE 'treatments'";
    $resultT = mysql_query($sqlT);
    $sqlS = "SELECT id, type, name FROM serv1_services WHERE type LIKE 'salon'";
    $resultS = mysql_query($sqlS);
    $sqlWax = "SELECT id, type, name FROM serv1_services WHERE type LIKE 'waxing'";
    $resultWax = mysql_query($sqlWax);
    $sqlWell = "SELECT id, type, name FROM serv1_services WHERE type LIKE 'wellness'";
    $resultWell = mysql_query($sqlWell);
    $sqlH = "SELECT id, type, name FROM serv1_services WHERE type LIKE 'haircutting'";
    $resultH = mysql_query($sqlH);
    $sqlM = "SELECT id, type, name FROM serv1_services WHERE type LIKE 'makeup'";
    $resultM = mysql_query($sqlM);
    $sqlC = "SELECT id, type, name FROM serv1_services WHERE type LIKE 'color'";
    $resultC = mysql_query($sqlC);

    echo "<select name='services'>";
    echo "<option value=''> - Facials - </option>";
    while ($row = mysql_fetch_array($resultF)) {
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }
    echo "<br /><option value=''> - Medical Spa Treatments - </option>";
    while ($row = mysql_fetch_array($resultT)) {
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }
    echo "<option value=''> - Salon - </option>";
    while ($row = mysql_fetch_array($resultS)) {
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }
    echo "<option value=''> - Waxing - </option>";
    while ($row = mysql_fetch_array($resultWax)) {
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }
    echo "<option value=''> -  Wellness - </option>";
    while ($row = mysql_fetch_array($resultWell)) {
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }
    echo "<option value=''> - Haircutting - </option>";
    while ($row = mysql_fetch_array($resultH)) {
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }
    echo "<option value=''> - Makeup - </option>";
    while ($row = mysql_fetch_array($resultM)) {
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }
    echo "<option value=''> - Color and Highlight - </option>";
    while ($row = mysql_fetch_array($resultC)) {
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }
    echo "</select>";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T02:20:35.707

粗略的改进：

```
function services(){

    mysql_connect('myhost', 'myname', 'mypass');
    mysql_select_db('spaladon_sugar');
    $types = array(
        'facial' => 'Facials',
        'treatments' => 'Treatments',
        // and more typename => Type Label
    );

    echo "<select name='services'>";
    foreach($types as $name => $label){
        $sql = sprintf('SELECT id, type, name FROM serv1_services WHERE type LIKE \'%s\'', $name);
        $result = mysql_query($sq;);
        echo '<option value=""> - ' . $label . ' - </option>';
        while ($row = mysql_fetch_array($result)) {
            echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
        }
    }
    echo "</select>";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T02:30:08.417

只需查询一次。

```
function services(){

    mysql_connect('myhost', 'myname', 'mypass');
    mysql_select_db('spaladon_sugar');
    $sql = "SELECT id, type, name FROM serv1_services WHERE type IN ('facial', 'treatment', 'salon') ORDER BY type"; //you can add another filter on WHERE type IN (...)
    $result = mysql_query($sql);
    $type = '';

    echo "<select name='services'>";
    while ($row = mysql_fetch_array($result)) {
        if($type!=$row['type'])
        {
           if($type!='')
              echo "</optgroup>";
           switch($row['type'])
           {
              case 'facials':                     
                 echo "<optgroup label=' - Facials - '>";
                 break;
              // etc for another case...
           }
           $type=$row['type'];
        }
        echo "<option value='" . $row['name'] . "'>". $row['name'] . "</option>";
    }    
    echo "</select>";
} 
```

# registry - RegSetValueEx 的问题

> ID：10593386
> 
> 赞同：0
> 
> 时间：2012-05-15T02:16:03.850
> 
> 标签：registry

我正在使用 Qt 创建一些编辑注册表的程序，看看：

```
 HKEY hKey;
char lpData[] = "itworks";

RegSetValueExA(HKEY_CURRENT_USER, "Software\\SAMP", 0, REG_SZ, (LPBYTE)&lpData, size(lpData)); 
```

*错误：C2660：'QWidget::size'：函数不接受 1 个参数*。

至于为什么它给我这个我不知道的错误。它似乎指向函数的保留部分（“，REG_SZ”之前的0）。如果有人可以帮助我，那就太棒了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:51:52.280

好的，找到了我的问题的答案。首先，您必须包含 advapi32.lib。其次，您必须始终将任何类型的 QString 转换为 WCHAR 才能使用 RegSetValue。

# javascript - 何时需要转义正则表达式字符集中的字符（在 [] 内）？

> ID：10593387
> 
> 赞同：16
> 
> 时间：2012-05-15T02:16:06.050
> 
> 标签：javascript, regex

我在括号中转义的规则是否与我在括号外所做的不同？

例如，我应该`?`在括号内转义吗？是`/blah[^?]/`还是`/blah[^\?]/`

括号的规则是否不同，或者我应该同时转义两者？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-15T02:23:23.653

唯一需要在括号中转义的是右括号，如果它不是初始的或最终的，则为减号，如果它是初始的，则为帽子，AFAIK。显然，反斜杠本身。

原因是，这些是括号内唯一具有特殊意义的字符。右括号结束括号，中间字符串减号表示范围，初始帽子否定括号类。其他一切都应该按字面意思解释。反斜杠是转义字符，因此您需要一个双反斜杠来匹配文字反斜杠。

# c++ - 如何使用 C++ 在 Xcode 上成功执行 TDD？

> ID：10593388
> 
> 赞同：3
> 
> 时间：2012-05-15T02:16:15.353
> 
> 标签：c++, xcode, unit-testing, tdd

目前我正在使用 iOS 上的 C++ 开发 OpenGL ES 1.0 相关项目。

我只是找不到一种方法可以顺利地集成任何单元测试框架来在这个特定设置上进行 TDD。

工作环境：

1.  操作系统：OS/X 10.7
2.  目标设备：iOS
3.  主要语言：C++
4.  IDE：Xcode
5.  OpenGL ES 1.0

我尝试了 googletest，但为了使 googletest 工作，我应该能够创建命令行应用程序，但由于我使用的是 OpenGL ES 1.0，我无法真正将它们导入 Mac 上的命令行应用程序。

我尝试了一种名为 catch 的新方法，但我不知道如何与 Xcode 集成。

任何人都有这个问题的好解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:23:24.113

这就是我进行 TDD 编程的方式。首先，我建立了我需要添加的新功能，然后我建立了该功能将具有的所有外部依赖项。例如，我在当前项目中依赖于 ac api，它提供了有关我正在使用的模型的信息。我还依赖于命令行，因为客户端可以输入我必须响应的命令。这个命令行是通过一个特殊的终端，我不感兴趣的细节。

所以我为这些外部依赖创建接口类，然后在我的代码中只使用这些接口。因此，我在进行测试时不需要模型的 c++ 库或终端的 c++ 库（稍后会详细介绍）。下面是一个用于写入命令行的接口示例：

```
class ICommandLineOutput
{
public:
  virtual void WriteLine(std::string&) = 0;
}; 
```

因此，假设我被要求编写一个将时间写入命令行的类，称为 WriteTime。然后，我要做的就是将一个**ICommandLineOutput**类型的对象传递给这个类的构造函数，并且只使用这个接口。我不关心我正在使用什么样的命令行，只关心它的界面。然后，我可以使用任何我想要的命令行类，只要它以 ICommandLineOutput 类为基础。

```
class WriteTime
{
public:
  explicit WriteTime(ICommandLineOutput commandLine): _commandLine(commandLine){}
  ...
}; 
```

因此，在进行单元测试时，我将有一个单独的 C++ 项目，我将在其中测试我编写的每个类。这个项目可以使用谷歌测试，它可以是一个命令行项目。因此，即使您正在编写包含在 GUI C++ 项目中的 GUI 应用程序，测试也有自己的项目。

假设我希望测试我的类，它将时间写入命令行。我将在一个名为 TestWriteTime 的类中执行此操作。我将使用 GoogleMock 创建 ICommandLineOutput 接口的模拟。然后可以通过测试基地在测试中质疑和/或配置模拟，以确定 WriteTime 是否按预期运行。例如，我可以检查 WriteLine() 被调用的次数以及它接收的参数。

最后，在我当前的项目中，我正在使用一个基于 linux 的项目，该项目具有大量依赖项。该应用程序也需要很长时间才能启动。但是，我有一个 Windows 控制台项目，我在其中进行测试。此应用程序的执行时间不到一秒，这对于 TDD 来说是理想的。

# jquery - 使用 jQuery 或 struts2 验证表单

> ID：10593392
> 
> 赞同：0
> 
> 时间：2012-05-15T02:16:44.297
> 
> 标签：jquery, struts2

我想知道 jQuery 是否足以进行验证（例如：验证登录表单。）为什么我们使用 Struts2 来执行此操作？

问候利亚姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:23:03.847

这不是秘诀，但出于安全原因，您应该从服务器和客户端验证您的应用程序

[在我提出的这个问题中，我](https://stackoverflow.com/questions/5936020/security-problem-with-form-and-javascript)谈到了一些安全问题。因此，希望阅读本文以了解客户端和服务器端验证的一些注意事项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:07:01.620

我同意豪尔赫的观点。您必须进行服务器端验证。因为如果用户在浏览器中禁用 JavaScript，则可以绕过基于脚本的验证。所以服务器端验证总是有用的。

# junit - 带有模拟数据层的 JUnit RESTeasy 服务......我如何模拟它？

> ID：10593394
> 
> 赞同：2
> 
> 时间：2012-05-15T02:16:57.137
> 
> 标签：junit, mocking, resteasy

我正在尝试为 RESTeasy Web 服务编写 JUnit 测试用例。我想为此使用 RESTeasy MockDispatcherFactory，同时不依赖任何数据访问层。

在我之前的测试用例创作中，我使用 Mockito 来模拟数据访问，但是我在使用 RESTeasy 的 MockDispatcherFactory 时遇到了麻烦......

服务等级：

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("")
public class Service {
private StubDao stubDao;
    public Service (){
        this.stubDao = new StubDao();
    }

    public Service (StubDao stubDao){
        this.stubDao = stubDao;
    }

    @GET
    @Produces(MediaType.TEXT_HTML)
    public String get(){
        return stubDao.getTheValue();
    }
} 
```

数据访问：

```
public class StubDao {
    private String value;

    public StubDao(){

    }

    public String getTheValue(){
        //Stubbed Data Access
        return value;
    }

    public void setTheValue(String v){
        this.value = v;
    }
} 
```

单元测试：

```
import java.net.URISyntaxException;

import junit.framework.Assert;

import org.jboss.resteasy.core.Dispatcher;
import org.jboss.resteasy.mock.MockDispatcherFactory;
import org.jboss.resteasy.mock.MockHttpRequest;
import org.jboss.resteasy.mock.MockHttpResponse;
import org.jboss.resteasy.plugins.server.resourcefactory.POJOResourceFactory;
import org.junit.Test;

public class TestService {
@Test
public void testService() throws URISyntaxException{

        POJOResourceFactory factory = new POJOResourceFactory(Service.class);
    //I Need to use Mockito to mock the StubDao object!!!       

    Dispatcher dispatcher = MockDispatcherFactory.createDispatcher();
    dispatcher.getRegistry().addResourceFactory(factory); 

        MockHttpRequest request = MockHttpRequest.get("");
    MockHttpResponse response = new MockHttpResponse();

    //here my exception is thrown
    dispatcher.invoke(request, response);

    System.out.println(response.getContentAsString());

    // but I expect the response to be 404 (which works outside the mock setup      
    Assert.assertEquals(response.getStatus(), 404);
}
} 
```

通常我会使用 Mockito 来模拟数据访问，如下所示：

设置模拟

```
@Before
public void setup() {
    StubDao stubDao = new StubDao();
} 
```

定义模拟

```
when(stubDao.getTheValue()).thenReturn("the mocked value"); 
```

但是，RESTeasy 的模拟在内部创建了服务类的新实例。我的问题是，如何将模拟数据访问插入到服务的构造函数中？？？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T14:27:12.533

感谢另一篇文章（[Resteasy Server-side Mock Framework](https://stackoverflow.com/questions/6761144/resteasy-server-side-mock-framework)）找到了答案

使用以下允许我创建服务类的实例并设置数据访问：

```
dispatcher.getRegistry().addSingletonResource(svc); 
```

代替：

```
dispatcher.getRegistry().addResourceFactory(factory); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T23:08:05.467

或者，您可以使用[testfun-JEE](https://github.com/michaelyaakoby/testfun)在测试中运行轻量级 JAX-RS（基于 RESTeasy 和 TJWS），并使用 testfun-JEE 的 JaxRsServer junit 规则来构建 REST 请求和断言响应。

testfun-JEE 支持将其他 EJB 以及[mockito](http://code.google.com/p/mockito/)模拟对象注入到您的 JAX-RS 资源类中。

# jquery - 验证失败，但 jQuery valid() 为真并且 $.post 执行

> ID：10593396
> 
> 赞同：1
> 
> 时间：2012-05-15T02:17:06.437
> 
> 标签：jquery, asp.net-mvc-4, jquery-post

我在使用 jQuery 验证和帖子时遇到问题。我正在使用 MVC 4，但这不重要。我已经完成了查看源代码，并且设置了所有正确的 HTML 5 属性。

以下是我使用 jQuery 发布帖子的方式：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnsend').click(function (e) {
            if ($("#sendForm").validate().form()) {
                var contact = {
                    Name: $('#Name').val(),
                    Email: $('#Email').val(),
                    Message: $('#Message').val()
                };

                $.post('/Contact/Send', contact, function () {
                    $('#cSet').fadeOut(1000, "", function () {
                        $('#success').delay(1000).fadeIn(1000, "", function () {
                            $('#success').html("<h2>The message is sent. Thank you!</h2>");
                        });
                    });
                });
            }
            else {
                return false;
            }
            //return false;
        });
    });
</script> 
```

这是电子邮件文本框的 div 内的代码：

```
<div>
    @Html.TextBox("Email", null, new { @style = "width:400px", @Type = "email",            @placeholder="Your email" })
    @Html.ValidationMessageFor(m => m.Email)
</div> 
```

我删除脚本块一切正常。使用该脚本，电子邮件类型验证无法正常工作。我看到验证器在闪烁，但这并没有阻止帖子通过。

任何帮助表示赞赏！提前致谢！

我应该改用 $.Ajax 吗？

如果按钮类型为提交，则会出现更多验证闪烁

```
<div>
    <input id="btnsend" type="submit"  value="Send" />;
</div> 
```

如果我将其更改为按钮，它不会闪烁或停止发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:21:53.017

可能是您的表单提交的是老式方式（不使用您在 JS 函数中的 ajax 提交）。

尝试将验证绑定到表单提交事件：

```
$(form).bind("submit",function(){
    if($(this).validate())
       {
           //submit
       }
     else
       {
            return false; 
       }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:43:00.573

我从未使用过 JQuery 验证插件，但在[http://docs.jquery.com/Plugins/Validation/Validator/form](http://docs.jquery.com/Plugins/Validation/Validator/form)阅读了 form() 方法文档：

> 验证表单，如果有效则返回 true，否则返回 false。这表现为正常的提交事件，但返回结果。

似乎 form() 方法正在触发提交事件，这导致了帖子。也许尝试：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnsend').click(function (e) {
            if ($("#sendForm").validate()) {
                var contact = {
                    Name: $('#Name').val(),
                    Email: $('#Email').val(),
                    Message: $('#Message').val()
                };

                $.post('/Contact/Send', contact, function () {
                    $('#cSet').fadeOut(1000, "", function () {
                        $('#success').delay(1000).fadeIn(1000, "", function () {
                            $('#success').html("<h2>The message is sent. Thank you!</h2>");
                        });
                    });
                });
            }
            else {
                return false;
            }
        });
    });
</script> 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:32:40.083

我认为您的问题可能出在您的文本框设置中。为了使用 jQuery Validate 插件，您需要具有某些数据属性，如果您使用，这些属性会自动设置：

```
@Html.TextBoxFor(m => m.Email, new { style = "width:400px", type = "email", placeholder = "Your email" }) 
```

而不是常规的`TextBox`方法`HtmlHelper`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T02:40:59.260

与处理 html5 输入类型的 MVC 一起提供的 jquery 插件存在问题。

得到了最新的

[https://github.com/jzaefferer/jquery-validation/downloads](https://github.com/jzaefferer/jquery-validation/downloads)

奇迹般有效！！:)

我不能更快乐。:)

# arrays - 从正则表达式结果中删除大括号

> ID：10593400
> 
> 赞同：7
> 
> 时间：2012-05-15T02:17:32.280
> 
> 标签：arrays, regex, postgresql, plpgsql, set-returning-functions

## 问题

这段代码：

```
select
  x::text
from
  regexp_matches( 'i1 into o2, and g1 into o17', '[gio][0-9]{1,}', 'g' ) as x; 
```

返回这些结果：

```
{i1}
{o2}
{g1}
{o17} 
```

而不是以下结果：

```
i1
o2
g1
o17 
```

## 相关链接

*   [http://www.postgresql.org/docs/9.1/static/functions-matching.html](http://www.postgresql.org/docs/9.1/static/functions-matching.html)

## 问题

使用 PostgreSQL 9.x 删除大括号的最有效方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T11:53:21.667

## 最优解

您的[`regexp_matches()`](https://www.postgresql.org/docs/current/static/functions-string.html)模式每次模式评估只能产生一个元素，因此所有结果行都被限制为*一个*数组元素。表达式简化为：

```
SELECT x[1]
FROM   regexp_matches('i1 into o2, and g1 into o17', '[gio][0-9]{1,}', 'g') AS x; 
```

## 其他解决方案

```
SELECT unnest(x)  -- also works for cases with multiple elements per result row

SELECT trim(x::text, '{}') -- corner cases with results containing `{}`

SELECT rtrim(ltrim(x::text, '{'), '}') AS x1 -- fewer corner cases 
```

**如果**模式可以或不应该匹配每个输入值超过一次，也删除可选参数`'g'`。

如果函数*总是*返回一行，考虑一下[`regexp_match()`](https://www.postgresql.org/docs/current/static/functions-string.html#FUNCTIONS-STRING-OTHER)Postgres 10 引入的微妙不同的变体。

[`regexp_matches()`](https://www.postgresql.org/docs/current/static/functions-string.html)在 Postgres 10 或更高版本中，直接在列表中建议 set-returning function (SRF) `SELECT`（如[Rick 提供](https://stackoverflow.com/questions/10593400/remove-braces-from-regular-expression-result/10600136?noredirect=1#comment92133259_10600136)的）也是谨慎的做法，因为列表中多个 SRF 的行为`SELECT`最终已被清理：

*   [select 子句中多个集合返回函数的预期行为是什么？](https://stackoverflow.com/questions/39863505/what-is-the-expected-behaviour-for-multiple-set-returning-functions-in-select-cl/39864815#39864815)

# facebook-opengraph - 如何在增强的身份验证对话框中获得“取消”按钮以继续重定向？

> ID：10593403
> 
> 赞同：0
> 
> 时间：2012-05-15T02:17:46.143
> 
> 标签：facebook-opengraph, authentication

我们的应用程序被配置为 Facebook 中的“网站”，并且我们已打开经过身份验证的推荐。

我们的目标是让每个人在点击我们的一个故事时默认通过身份验证。但是，如果他们没有授权他们的应用程序，我们**仍然希望他们继续使用我们的应用程序**，只是没有经过身份验证。Viddy 和 SocialCam 目前似乎都采用了这种方法。

我们很难让它发挥作用。

目前，当用户单击我们的时间线故事之一时，他们会在弹出显示中获得增强的身份验证对话框，并可选择继续或“关闭”。选择“关闭”按钮只会取消推荐。您可以在此处的“经过身份验证的推荐”标题下查看我们正在查看的对话框类型：[https ://developers.facebook.com/docs/opengraph/authentication/](https://developers.facebook.com/docs/opengraph/authentication/)

我们希望看到增强的身份验证对话框在整个页面（而不是弹出窗口）中打开，并向用户显示一个“取消”按钮，如果单击该按钮仍会将用户引至 URL，但不会对其进行身份验证。此页面上的第一个屏幕截图是我们希望看到的身份验证对话框的类型：[https ://developers.facebook.com/docs/opengraph/authentication/](https://developers.facebook.com/docs/opengraph/authentication/)

我们如何使用“取消”按钮（继续重定向）而不是没有的“关闭”按钮获得增强的身份验证对话框？

我们是否需要关闭经过身份验证的推荐并通过其他方式实现这一点？

我们的应用程序是否应该在应用程序设置中配置为不同于“网站”的东西？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:37:01.937

使用经过身份验证的推荐，取消始终会将您送回新闻源，或者您来自 Facebook 的任何地方。这是无法改变的。

但是，每当您自己实例化身份验证对话框（FB.login、/dialog/oauth 等）时，取消按钮都会像以前一样工作，它将用户发送到您提供的重定向 URI。

因此，如果您想要您建议的行为，您需要禁用经过身份验证的引用并将用户还原到 /dialog/oauth，这将显示整页身份验证对话框。在此处单击“取消”仍会将用户带到您的重定向 URI。

# css - 仅限 CSS：如何在填充剩余空间的两个 div 之间居中固定宽度的 div？

> ID：10593405
> 
> 赞同：10
> 
> 时间：2012-05-15T02:17:55.960
> 
> 标签：css, css-sprites

**[JSFIDDLE](http://jsfiddle.net/ruMqY/1/)**

编辑：试图达到与[此](http://matthewjamestaylor.com/blog/holy-grail-no-quirks-mode.htm)相反的效果。
[（而不是两侧的 2 个固定宽度的 div 和中间的一个流体宽度的 div，
我试图在两侧获得 2 个流体宽度的 div 和一个居中的 div）]

我有 3 个 div：A、B 和 C。

B 需要位于 A 和 C 之间。

![我需要做什么](../Images/2a0baab9abf27d41b138b13a7c4261a7.png)

我目前正在做的几乎与上面发生的事情相匹配。但是，如果 A、B 和 C 的容器具有奇数宽度，则一些浏览器会将 A 和 C 的宽度向下舍入，而另一些则向上舍入（分别使 C 太长 1px 和太短 1px）。

[注意**C右侧的额外像素**] ![](../Images/0888a335d8a54c190a692cf32ae9e567.png)

[**请注意， C**右侧的空间要薄一个像素。] ![](../Images/7eb1d59aa45f0e2fca4fede3be867709.png)

我不在乎我需要多少嵌套的 div，但我在这方面花费了太多时间！如果有人已经有解决此问题的可靠方法，请分享！

注意：
- A、B 和 C 的父级不能隐藏溢出。
- A、B 和 C 不能重叠（它们有半透明的 png）

这是我的出发点：**[JSFIDDLE](http://jsfiddle.net/ruMqY/1/)**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T07:16:15.673

这里有两种可行的方法，都带有警告（警告，都需要包装器）：

### HTML

```
<section class="wrapper">
    <div class="column" id="a"></div>
    <div class="column" id="b"></div>
    <div class="column" id="c"></div>
</section>​​​​​​​​​​​ 
```

### 基础 CSS

```
.column {
    height: 3em;
}

#a {
 background-color: red;   
}
#b {
 background-color: green;
}
#c {
 background-color: blue;   
}

#b {
  width: 50px;   
} 
```

### CSS3 方法：

```
.wrapper {
    display:box;
    box-orient:horizontal;
    box-align:stretch;    
}

#a, #b {
    box-flex:1.0;
} 
```

警告：仅在 Firefox 和 Webkit (Chrome/Safari) 中支持（到目前为止），两者都需要前缀规则。以上就是某天的样子。

这是一个带前缀的演示：http: [//jsfiddle.net/crazytonyi/cBVTE/](http://jsfiddle.net/crazytonyi/cBVTE/)

### 表格显示方法

```
.wrapper {
    display: table;
    width: 100%;
    table-layout: fixed;

}    
.column {
    display: table-cell;
} 
```

警告： IE 直到 7 或 8 才开始支持这种显示类型。另一方面，担心旧版本 IE 的用户就像担心仍然关闭 cookie 和 javascript 的人一样。他们要么赶上，要么习惯了分页。结束炒作！

这是使用上述内容的演示：http: [//jsfiddle.net/crazytonyi/kM46h/](http://jsfiddle.net/crazytonyi/kM46h/)

在这两种情况下，都不需要浮动或定位，只需愿意对旧浏览器竖起中指。多大年龄取决于您选择哪种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:37:48.103

我想你必须像这样使用..

**HTML**

```
<div class="a">a</div>
<div class="b">b</div>
<div class="c">c</div> 
```

**CSS**

```
.a
{
width:50%;
height:25px;
background-color:#0F0;
float:left  
}
.b
{
width:13px;
height:25px;
background-color:#FFF;
margin-left:-6px;
float:left; 
position:relative;
z-index:99;
}
.c
{
width:50%;
height:25px;
background-color:#C33;
margin-left:-7px;
float:left; 
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T02:43:43.003

编辑：**请**使用安东尼的解决方案！它满足所有要求，没有任何非常hacky的CSS！如果您确实需要支持较旧的浏览器，请随意使用我的解决方案（但是，请注意，Anthony 的解决方案非常适合大多数情况）。

* * *

我不知道我还没有尝试过这个解决方案，但这似乎比[这个](https://stackoverflow.com/questions/7699552/how-to-create-a-3-columns-fluid-fixed-fluid-layout)问题的公认答案更好！没有四舍五入！

[**解决了！**](http://jsfiddle.net/ruMqY/7/)

如果我们将舍入的 50% 视为一个值 ( ***X*** ) 并将 B 的恒定宽度视为值***Y***，那么我们需要：

A 的宽度 = ***X***
C 的宽度 = 100% - ***X***

我决定使用它作为我的结构：

```
<container>
  <a></a>
  <b></b>
  <c_holder>
    <c>
    </c>
  </c_holder>
</container> 
```

问：我们怎样才能让 C 的宽度为**container_width** - **X**？
A. 我们给 C 一个名为 c_holder 的容器，宽度为 100%，并给 C 一个左偏移**X** (50%)。

暂时忘记B...

现在我们有 2 个 div 彼此相邻......每个大约 50%，但加起来正好是 100%。

将所有这些都扔到一个容器中，并给这个容器一个***Y***的边距（B div 的宽度）。现在我们有 A 和 C 彼此相邻，但占据了 100% - ***Y***的宽度。

给 c_holder 一个***Y***的左偏移量并将 B 放在 A 和 c_holder 之间。在 A 和 B 上应用左浮动。

现在 A 的宽度是***X***，B 的宽度是***Y***，C 的总左偏移量是***X*** + ***Y***，C 的可见宽度是**容器的 100%** - **X** - **Y**。

有点时髦，但它在 IE7、Chrome 和 Safari 中完美运行。我稍后会测试FF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T07:38:27.343

[dabblet.com 上的演示](http://dabblet.com/gist/2699675)：

[http://img838.imageshack.us/img838/6116/cff430b799254087b6ec991.png](http://img838.imageshack.us/img838/6116/cff430b799254087b6ec991.png)

html:

```
<div id="main">
    <div class="half left">
        <div>
            <div id="a" class="col"> </div>
         </div>
    </div>
    <div class="half right">
        <div>
            <div id="c" class="col"> </div>
         </div>
    </div>
    <div id="b" class="col"> </div>
</div> 
```

CSS：

```
#main {
    height: 40px;
    width: auto;
    border: 1px solid #cfcfcf;
    position: relative;
}

.half {
    width: 50%;
    height: 100%;
    position: absolute;
    top: 0;
}

.half.left { left: 0; }
.half.right { right: 0; }

.half > div {
    height: 100%;
    padding:0 8px;
}

.half.left > div { padding-left: 7px; }
.half.right > div { padding-right: 7px; }

.col {
    height: 100%;
    margin-top: 3px;
}

#a,
#c {
    background-color: green;
}

#b {
    background-color: red;
    margin-left: auto;
    margin-right: auto;
    width: 14px;
} 
```

**更新：**更新没有重叠

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T06:14:25.837

```
<style>

.a{ width:50%; height:25px; background-color:#0F0; float:left }
.b{ width:13px; height:25px; background-color:#FFF; float:left;
    position:relative; left:51%;}
.c{ width:50%; height:25px; background-color:#C33; float:right; }

</style> 
```

# outlook - 发送到 Outlook 2010 的 html 电子邮件中出现奇怪的间距和边框问题

> ID：10593407
> 
> 赞同：0
> 
> 时间：2012-05-15T02:18:48.343
> 
> 标签：outlook, html-email, outlook-2010

我正在发送具有一张简单表格的简单 html 邮件。该邮件在所有 Web 浏览器中看起来都很好，但 Outlook 2010 似乎很奇怪。如何解决这个问题？我尝试了几种变化，但结果是一样的。

在此处查看 Outlook 屏幕截图：

展望 2010：

![在此处输入图像描述](../Images/51f2f66023e2d42e2f5f4db01354041d.png)

火狐：

![在此处输入图像描述](../Images/181131612b89173c368ea0cdc4a15bbe.png) 这是html源代码：

```
<table style="width:500px;font:9pt Arial;background-color:#f6f6f6;" cellspacing="12px">
        <tr>
          <td style="border-bottom:1px solid #e6e6e6;">
            <span style="font-size:18px;color:#0033cc;">
              <b>
                <a href="url" target="_blank" style="text-decoration:none">Birthday Invitation</a>
              </b>
            </span>
            <br />
            <div style="clear:both;color:#666;overflow:hidden;padding:5px 0 7px;">
              Note: Testing
            </div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom:1px solid #e6e6e6;padding-bottom:13px;">
            <br />
            <br />
            <b>HOST</b>
            <br />
            <span style="color:red">Host</span>            
          </td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T18:23:06.190

派对很晚了，但你需要删除`cellspacing="12px"`，并且只用它来归零。

表格标签应如下所示：`<table width="500" border="0" cellpadding="0" cellspacing="0">`

`<td>`改为向's添加填充。

您还应该在`<td>`'s 中声明您的字体，而不是使用速记。`bgcolor="#f6f6f6"`完全支持，而 css 版本不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:01:11.463

Outlook 07 或 10 不支持填充和边距。这是由于使用文字渲染引擎而不是浏览器渲染引擎的重大决定。

您需要使用间隔 gif 来获得所需的布局。

无论您在哪里有边距或填充，都用合适大小的间隔图像替换。

# ios - 这种纹理共享技术是否适用于我的通用 iOS 应用程序？

> ID：10593411
> 
> 赞同：0
> 
> 时间：2012-05-15T02:20:25.627
> 
> 标签：ios, textures, universal, retina-display

我正在创建一个通用的 iOS 游戏，并试图提出一个好的系统来共享纹理。就我而言，所有视网膜 iPhone 纹理的大小与我的 iPad 纹理完全相同。现在我有 iPad 和 iPhone 内容的单独目录，这是非常多余的。我还想在我的项目中包含 iPad3 内容。

我的想法是为每种纹理提供三个不同的版本：

```
texture - non-retina iPhone
texture@2x - retina iPhone / non-retina iPad
texture@2x@2x - retina iPad 
```

当 iPhone 想要加载纹理时，我会将其指向基础纹理。当 iPad 想要加载纹理时，我只需在其上附加一个 @2x 即可。这个方案是否也允许 iPad 3 找到纹理@2x@2x？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:23:48.473

iPad 视网膜和 iPhone 视网膜不需要单独的图形，它们都是 @2x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:40:09.913

我测试了这项技术，它工作得很好。我没有 iPad 3 来直接测试 texture@2x@2x 是否可以工作。但是，我拍摄了一张非视网膜图像并将其命名为 image@2x。然后我制作了一个视网膜版本并命名为 image@2x@2x。iPhone 4 加载了@2x@2x 版本，认为它是视网膜，一切都很好。我认为 iPad 3 可以毫无问题地做同样的事情。通过共享所有冗余内容，我的通用应用程序的大小从 44MB 减少到了 29MB！

# sql - VBA 运行时错误 3134

> ID：10593422
> 
> 赞同：5
> 
> 时间：2012-05-15T02:22:13.897
> 
> 标签：sql, vba, syntax

以下代码创建一个 SQL 字符串，该字符串在 MS Access 中产生语法错误 (3134)。

```
 sql = "INSERT INTO tblItems (desc, descExtended, itemNumber, currentPrice) " & _
                     "VALUES (" & _
                     "'" & rs.Fields("Field6") & "', " & _
                     "'" & rs.Fields("Field7") & "', " & _
                     rs.Fields("Field1") & ", " & _
                     rs.Fields("Field8") & _
                     ")"
        db.Execute sql, dbFailOnError 
```

产生语法错误的“sql”字符串的值为：

“插入 tblItems（desc、descExtended、itemNumber、currentPrice）值（'APPLE GRANNY SMITH SLI IQF'、'GEMS OF FRUIT'、2050791、49）”

表名和字段名正确。“desc”和“descExtended”字段是文本类型。“itemNumber”和“currentPrice”是数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T02:30:52.767

这是您的字段名称。DESC 在 SQL 而不是描述中降序。DESC 是 SQL 语法中的保留字。您需要将其放入 [] 或更改它。（如果为时不晚，我会推荐后者以免将来头疼。）避免使用保留字作为表或字段名称。

```
INSERT INTO tblItems ([desc], descExtended, itemNumber, currentPrice) 
VALUES ('APPLE GRANNY SMITH SLI IQF', 'GEMS OF FRUIT', 2050791, 49) 
```

或更好

```
INSERT INTO tblItems (Descript, descExtended, itemNumber, currentPrice) 
VALUES ('APPLE GRANNY SMITH SLI IQF', 'GEMS OF FRUIT', 2050791, 49) 
```

# websphere - 如何强制浏览器在 websphere 门户中缓存页面

> ID：10593423
> 
> 赞同：1
> 
> 时间：2012-05-15T02:22:44.723
> 
> 标签：websphere, browser-cache, websphere-portal

我可以强制浏览器缓存 WPS 6.1 响应的页面吗？

强制浏览器缓存页面是满足要求的一种方式吗？

我尝试创建一个过滤器并在 wps 中配置它。

```
<filter>
   <filter-name>Cache Filter</filter-name>
   <filter-class>com.samaxes.filter.CacheFilter</filter-class>
   <init-param>
       <param-name>expirationTime</param-name>
       <param-value>120</param-value>
   </init-param>
</filter>
<filter-mapping>
   <filter-name>Cache Filter</filter-name>
   <url-pattern>/portal/*</url-pattern>
</filter-mapping> 
```

它正在工作，但 HTTP 标头仍然是：

Cache-Control no-cache
Content-Language en-US
Content-Type text/html; charset=UTF-8
Date Fri, 11 May 2012 07:50:19 GMT
Expires Thu, 01 Jan 1970 00:00:00 GMT
IBM-Web2-Location ...
Pragma no-cache
Server WebSphere Application Server/6.1 Transfer-Encoding chunked
Vary User-Agent,Cookie
如何获取正确的响应头？
缓存控制：max-age=120
过期：

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:58:10.027

关于尝试缓存整个页面，您应该注意的一件事是门户页面的 URL 是状态感知的。这意味着如果您更改门户会话的状态，那么即使您在同一个页面上，它也将是一个不同的 URL，从而使缓存变得困难。

然而，这里有一个关于如何使用 Portal 内置机制打开这种类型的缓存的链接。作者确实注意到，即使他在浏览器中看到缓存条目和正确的缓存标头，浏览器仍在向服务器发出请求。

[http://wpcertification.blogspot.com/2010/08/how-to-cache-portal-page-in.html](http://wpcertification.blogspot.com/2010/08/how-to-cache-portal-page-in.html)

编辑：在缓存页面上包含指向 Portal 6 特定文档的链接，因为我认为上面的博客专注于 Portal 7

[http://publib.boulder.ibm.com/infocenter/wpdoc/v6r0/index.jsp?topic=/com.ibm.wp.ent.doc/wpf/tune_cache.html](http://publib.boulder.ibm.com/infocenter/wpdoc/v6r0/index.jsp?topic=/com.ibm.wp.ent.doc/wpf/tune_cache.html)

# haskell - 在模拟中控制内存分配/GC？

> ID：10593435
> 
> 赞同：5
> 
> 时间：2012-05-15T02:25:29.380
> 
> 标签：haskell, random, garbage-collection, simulation, ghc

我在弄清楚如何在`State`monad 中运行的模拟中减少内存使用和 GC 时间时遇到了一些麻烦。目前我必须运行编译后的代码`+RTS -K100M`以避免堆栈空间溢出，并且 GC 统计数据非常可怕（见下文）。

以下是相关的代码片段。可以在[http://hpaste.org/68527](http://hpaste.org/68527)找到完整的、有效的 (GHC 7.4.1) 代码。

```
-- Lone algebraic data type holding the simulation configuration.
data SimConfig = SimConfig {
        numDimensions :: !Int            -- strict
    ,   numWalkers    :: !Int            -- strict
    ,   simArray      :: IntMap [Double] -- strict spine
    ,   logP          :: Seq Double      -- strict spine
    ,   logL          :: Seq Double      -- strict spine
    ,   pairStream    :: [(Int, Int)]    -- lazy (infinite) list of random vals
    ,   doubleStream  :: [Double]        -- lazy (infinite) list of random vals
    } deriving Show

-- The transition kernel for the simulation.
simKernel :: State SimConfig ()
simKernel = do
    config <- get
    let arr   = simArray      config
    let n     = numWalkers    config
    let d     = numDimensions config
    let rstm0 = pairStream    config
    let rstm1 = doubleStream  config
    let lp    = logP          config
    let ll    = logL          config

    let (a, b)    = head rstm0                           -- uses random stream    
    let z0 = head . map affineTransform $ take 1 rstm1   -- uses random stream
            where affineTransform a = 0.5 * (a + 1) ^ 2

    let proposal  = zipWith (+) r1 r2
            where r1    = map (*z0)     $ fromJust (IntMap.lookup a arr)
                  r2    = map (*(1-z0)) $ fromJust (IntMap.lookup b arr)

    let logA = if val > 0 then 0 else val
            where val = logP_proposal + logL_proposal - (lp `index` (a - 1)) - (ll `index` (a - 1)) + ((fromIntegral n - 1) * log z0)
                  logP_proposal = logPrior proposal
                  logL_proposal = logLikelihood proposal

    let cVal       = (rstm1 !! 1) <= exp logA            -- uses random stream

    let newConfig = SimConfig { simArray = if   cVal
                                           then IntMap.update (\_ -> Just proposal) a arr
                                           else arr
                              , numWalkers = n
                              , numDimensions = d
                              , pairStream   = drop 1 rstm0
                              , doubleStream = drop 2 rstm1
                              , logP = if   cVal
                                       then Seq.update (a - 1) (logPrior proposal) lp
                                       else lp
                              , logL = if   cVal
                                       then Seq.update (a - 1) (logLikelihood proposal) ll
                                       else ll
                              }

    put newConfig

main = do 
    -- (some stuff omitted)
    let sim = logL $ (`execState` initConfig) . replicateM 100000 $ simKernel
    print sim 
```

就堆而言，配置文件似乎暗示`System.Random`除了 之外的函数`(,)`是内存的罪魁祸首。我不能直接包含图像，但您可以在此处查看堆配置文件：http: [//i.imgur.com/5LKxX.png](http://i.imgur.com/5LKxX.png)。

我不知道如何进一步减少这些东西的存在。随机变量是在`State`monad 外部生成的（以避免在每次迭代时拆分生成器），并且我相信在从模拟配置中包含的惰性列表 ( ) 中提取一对时会出现`(,)`内部的唯一实例。`simKernel``pairStream`

包括GC在内的统计数据如下：

```
 1,220,911,360 bytes allocated in the heap
     787,192,920 bytes copied during GC
     186,821,752 bytes maximum residency (10 sample(s))
       1,030,400 bytes maximum slop
             449 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0      2159 colls,     0 par    0.80s    0.81s     0.0004s    0.0283s
  Gen  1        10 colls,     0 par    0.96s    1.09s     0.1094s    0.4354s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time    0.95s  (  0.97s elapsed)
  GC      time    1.76s  (  1.91s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time    2.72s  (  2.88s elapsed)

  %GC     time      64.9%  (66.2% elapsed)

  Alloc rate    1,278,074,521 bytes per MUT second

  Productivity  35.1% of total user, 33.1% of total elapsed 
```

再一次，我必须提高最大堆栈大小才能运行模拟。我知道某处一定有一个大笨蛋……但我不知道在哪里？

在这样的问题中，如何改进堆/堆栈分配和 GC？我怎样才能确定一个 thunk 可能在哪里建立？这里使用`State`monad 是不是被误导了？

--

更新：

编译时我忽略了查看分析器的输出`-fprof-auto`。这是该输出的开头：

```
COST CENTRE                       MODULE                             no.     entries  %time %alloc   %time %alloc

MAIN                              MAIN                                58           0    0.0    0.0   100.0  100.0
 main                             Main                               117           0    0.0    0.0   100.0  100.0
  main.randomList                 Main                               147           1   62.0   55.5    62.0   55.5
  main.arr                        Main                               142           1    0.0    0.0     0.0    0.0
   streamToAssocList              Main                               143           1    0.0    0.0     0.0    0.0
    streamToAssocList.go          Main                               146           5    0.0    0.0     0.0    0.0
  main.pairList                   Main                               137           1    0.0    0.0     9.5   16.5
   consPairStream                 Main                               138           1    0.7    0.9     9.5   16.5
    consPairStream.ys             Main                               140           1    4.3    7.8     4.3    7.8
    consPairStream.xs             Main                               139           1    4.5    7.8     4.5    7.8
  main.initConfig                 Main                               122           1    0.0    0.0     0.0    0.0
   logLikelihood                  Main                               163           0    0.0    0.0     0.0    0.0
   logPrior                       Main                               161           5    0.0    0.0     0.0    0.0
  main.sim                        Main                               118           1    1.0    2.2    28.6   28.1
   simKernel                      Main                               120           0    4.8    5.1    27.6   25.8 
```

我不确定如何准确解释这一点，但随机双打的懒惰流`randomList`让我畏缩。我不知道如何改进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:34:45.253

我已经用一个工作示例更新了 hpaste。看起来罪魁祸首是：

*   `SimConfig`三个字段中缺少严格性注释`simArray`：`logP`和`logL`

```
    数据 SimConfig = SimConfig {
            numDimensions :: !Int -- 严格
        , numWalkers :: !Int -- 严格
        , simArray :: !(IntMap [Double]) -- 严格的脊椎
        , logP :: !(Seq Double) -- 严格脊椎
        , logL :: !(Seq Double) -- 严格脊椎
        , pairStream :: [(Int, Int)] -- 懒惰
        , doubleStream :: [Double] -- 懒惰
        } 导出显示

```

*   `newConfig``simKernel`由于`State`懒惰，从未在循环中进行评估。另一种选择是改用严格的`State`单子。

    ```
    put $! newConfig 
    ```

*   `execState ... replicateM`还构建了 thunk。我最初将其替换为 a`foldl'`并将其移动`execState`到折叠中，但我认为交换`replicateM_`是等效的并且更易于阅读：

    ```
    let sim = logL $ execState (replicateM_ epochs simKernel) initConfig
    --  sim = logL $ foldl' (const . execState simKernel) initConfig [1..epochs] 
    ```

并且有几个电话`mapM .. replicate`被替换为`replicateM`. 特别值得注意的是`consPairList`它大大减少了内存使用量。仍有改进的余地，但最容易实现的目标涉及 unsafeInterleaveST ......所以我停止了。

我不知道输出结果是否是您想要的：

```
fromList [-4.287033457733427,-1.8000404912760795,-5.581988678626085,-0.9362372340483293,-5.267791907985331]

```

但这里是统计数据：

```
     在堆中分配了 268,004,448 字节
      GC 期间复制了 70,753,952 个字节
      16,014,224 字节最大驻留（7 个样本）
       1,372,456 字节最大斜率
              40 MB 总内存正在使用（0 MB 由于碎片丢失）

                                    总时间（经过） 平均暂停 最大暂停
  Gen 0 490 colls，0 par 0.05s 0.05s 0.0001s 0.0012s
  Gen 1 7 colls，0 par 0.04s 0.05s 0.0076s 0.0209s

  初始化时间 0.00s（经过 0.00s）
  MUT时间0.12s（经过0.12s）
  GC时间0.09s（经过0.10s）
  退出时间 0.00s（经过 0.00s）
  总时间 0.21s（经过 0.22s）

  %GC 时间 42.2%（经过 45.1%）

  分配速率 2,241,514,569 字节/MUT 秒

  生产力占总用户的 57.8%，占总使用时间的 53.7%

```

# php - Validating USA phone numbers

> ID：10593436
> 
> 赞同：3
> 
> 时间：2012-05-15T02:25:35.513
> 
> 标签：php, validation, phone-number

Okay, so my code does work. But, I need to edit some of it. For example, I want it to allow numbers 7 or 10 numbers in length.
The second part is that it is not validating my numbers with `-` or `()` in them, which it should. I want it to be able to validate numbers with the parenthesis or hyphens, no letters.

```
<?php
$phoneNumbers = array("111-1111",
                      "(111) 111-1111",
                      "111-111-1111",
                      "111111",
                      "",
                      "aaa-aaaa");

foreach ($phoneNumbers as $phone) {
    $failures = 0;
    echo "<hr /><p>Checking &ldquo;$phone&rdquo;</p><hr />";

     // Check for 7 or 10 characters long
     if (strlen($phone) < 7) {
          ++$failures;
          echo "<p><small>Warning: &ldquo;$phone&rdquo; must be 7 or 10 characters</small></p>";
     }

     // Check for numbers
     if (!preg_match("/^([1]-)?[0-9]{3}-[0-9]{3}-[0-9]{4}$/i", $phone)) {
          ++$failures;
          echo "<p><small>Warning: &ldquo;$phone&rdquo; contains non numeric characters</small></p>";
     }

     if ($failures == 0) 
          echo "<p>&ldquo;$phone&rdquo; is valid</p>";
     else
          echo "<p>&ldquo;$phone&rdquo; is not valid</p>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:28:36.357

You should look into a regular expression only solution. Something similar to:

```
//Phone Number (North America)
//Matches 3334445555, 333.444.5555, 333-444-5555, 333 444 5555, (333) 444 5555 and all     combinations thereof.
//Replaces all those with (333) 444-5555
preg_replace('\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})', '(\1) \2-\3', $text);

//Phone Number (North America)
//Matches 3334445555, 333.444.5555, 333-444-5555, 333 444 5555, (333) 444 5555 and all combinations thereof.
'\(?[0-9]{3}\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}' 
```

# linux - How can I use sort command to sort the log file only by the first field in Linux?

> ID：10593439
> 
> 赞同：3
> 
> 时间：2012-05-15T02:26:24.987
> 
> 标签：linux, sorting

I have a log file named `a.log` ! I want sort it by the fisrt field ! If two lines have the same field , the order will be original contens‘！ contents:

```
 1\. 101  c
 2\. 100  b
 3\. 100  a
 4\. 2    d 
```

I expect the result:

```
 1\. 2    d
 2\. 100  b
 3\. 100  a
 4\. 101  c 
```

So i use this command!

```
sort -nt 't' -k 1 a.log 
```

But the result is :

```
 1\. 2    d
 2\. 100  a
 3\. 100  b
 4\. 101  c 
```

Thanks very much！</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T02:33:24.547

You forgot to constrain the key fields. By default it uses until the end of the line.

```
sort -nst '\t' -k 1,1 0507.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:42:37.140

Take a peek at the [man page for sort](http://ss64.com/bash/sort.html)...

```
 `-n`, --numeric-sort

      compare according to string numerical value 
```

So here is an example...

```
sort -n filename 
```

# extjs - How to execute the javascript in tabpanel item in ExtJS4?

> ID：10593441
> 
> 赞同：0
> 
> 时间：2012-05-15T02:26:32.060
> 
> 标签：extjs, extjs4

I'm building a website that use ExtJS, once I click a button
it calls Ajax to load a html page, and add it to tabpanel as an item.

```
mainTab.add({
    xtype: 'panel',
    html: ajaxResponse.responseText
}) 
```

But the javascript in that html page does not execute ,
how to solve this problem? Thanks very much!

**EDIT** It seems I have found it out， any better solution is welcome:

```
 mainTab.add({
    html:'<iframe src="'+UrlText+'" frameborder="0" scrolling="auto"></iframe>'  
 }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:04:26.477

[您可以使用http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.IFrame](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ux.IFrame)添加 iframe

这是示例

```
mainTab.add(Ext.create('Ext.ux.IFrame',{
  src:'http://www.google.com',
  title:'google'
})) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:42:05.437

```
myCompLoaderPanel = Ext.create("Ext.panel.Panel",{
    width:200,
    height:300,
    title:"From ComponentLoader",
    loader:{
        autoLoad:true,
        scripts:true,
        url:"a.html"
    }
});

mainTab.add(myCompLoaderPanel); 
```

对我来说，这是更简单的方法..
因为我不需要手动处理 ajax 调用。只需将其放在 url 配置中。

这就是加载加载器的方法： `myCompLoaderPanel.getLoader().load()`
如果您`autoLoad: false`为加载器设置，这很有用。

# c# - LogicalOperationStack 属性可以为空吗？

> ID：10593444
> 
> 赞同：0
> 
> 时间：2012-05-15T02:26:44.347
> 
> 标签：c#, .net, trace

System.Diagnostics.Trace.CorrelationManager.LogicalOperationStack 属性可以为空吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:48:11.853

我假设你的意思是`System.Diagnostics.Trace.CorrelationManager.LogicalOperationStack`。不，它不会为空。如果`CallContext`没有现有堆栈，无论出于何种原因，都会在 getter 中分配一个新堆栈。

# nhibernate - NHibernate ExecuteUpdate does not participate in current transaction?

> ID：10593447
> 
> 赞同：4
> 
> 时间：2012-05-15T02:27:16.460
> 
> 标签：nhibernate, transactions

I have code that looks like this:

```
using (var session = this.sessionCreator.OpenSession())
using (var transaction = session.BeginTransaction())
{
    session.SaveOrUpdate(anObject);
    session.CreateSQLQuery(sql)
        .ExecuteUpdate();
    transaction.Commit();
} 
```

Surprisingly, the SQL query executes before `anObject` is saved. Apparently, the `ExecuteUpdate` command does not participate in the current transaction. Is there any way to get the update to enlist in the transaction?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T18:12:28.960

NHibernate 事务与 DB 事务不同；框架无法知道您`ExecuteUpdate`正在影响哪些实体或哪些数据，因此不会自动刷新`SaveOrUpdate`（可能会根据会话的延迟`FlushMode`）和`CreateSQLQuery`（如果您使用，则始终是即时的）之间的会话`ExecuteUpdate`。

一般来说，如果您将 NHibernate 逻辑与较低级别的 SQL 逻辑（存储过程等）结合起来，那么您将需要使用 a`TransactionScope`来保证原子性：

```
using (var tsc = new TransactionScope())
using (var session = sessionFactory.OpenStatelessSession())
using (var transaction = session.BeginTransaction())
{
    session.SaveOrUpdate(entity);
    session.Flush();
    session.CreateSQLQuery("EXEC foo").ExecuteUpdate();
    transaction.Commit();
    tsc.Complete();
} 
```

（FWIW - 严格来说，NHibernate 事务在这里应该是不必要的，因为之后你并没有真正对会话做任何事情`Flush`- 但无论如何使用显式 NH 事务以防将来逻辑发生变化是一个好习惯。）

请注意，我更喜欢将`IStatelessSession`实例用于任何批量插入/更新/等。- 如果您使用常规`ISession`实例并且需要实际检索由 所做的更新`ExecuteUpdate`，那么您可能需要使用会话`Evict`或`Clear`方法来保证获取更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T21:47:38.023

我不确定您使用的是哪个版本的 NHibernate，但鉴于现在是 2 年后，您的答案很可能适用于早期版本。我正在使用 3.3.3.GA 并且 NHibernate 事务能够毫无问题地管理 SQL Query ExecuteUpdate。我检查了在我运行 transaction.Commit() 之前我无法看到提交的数据。

```
using (var session = sessionFactory.OpenStatelessSession())
using (var transaction = session.BeginTransaction())
{
    session.SaveOrUpdate(entity);
    session.Flush();
    session.CreateSQLQuery("EXEC foo").ExecuteUpdate();
    transaction.Commit();
} 
```

# mocking - JMockIt: Is it possible to mock same class twice, in the same TestClass, to verify behaviour in different scenarios

> ID：10593453
> 
> 赞同：3
> 
> 时间：2012-05-15T02:29:30.920
> 
> 标签：mocking, jmockit

I need to write a test, where-in, the behaviour of a class can be verified, for different behaviours of a Mocked class. To support multiple behaviours for the same method, we need to mock the class multiple times, in the same TestClass.

Is it possible using JMockIt?

Here is an example of what I want. This is the main class to be tested and its test:

```
public class MyClass {

    private Foo fooObj = null;

    public setfooObj(Foo obj) {
        fooObj = obj;
    }

    public boolean process() {
        // uses fooObj.getName() to process 
    }
}

public class MyClassTest {

    @MockClass(realClass = mypackage.Foo.class)
    public static class MockFoo {

        @Mock
        public static boolean getName() {
            return "test";
        }
    }

    @Test
    public void validateProcessing() {
        MyClass testObj = new MyClass();
        assertEquals(false, testObj.process);
    }
} 
```

Now, I want to verify `testObj.process()` method's behaviour, when `MockFoo.getName()` returns different values. For my first assertion, I want to use its value as "test"(as returned by the mocked function), but for the following ones, I want to check with different values.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:08:36.667

这个很容易解决，不需要mock同一个类两次。要在不同的调用中从相同的模拟方法返回不同的值，如果使用“Expectations API”，只需记录两个（或更多）连续的返回值；如果使用“Mockups API”，请将“Invocation inv”类型的第一个参数添加到您的模拟方法中，然后使用“inv.getInvocationIndex()”来知道应该返回哪个值（不像其他选项那么好，但可以美好的）。

有关更多文档和示例，请查看 JMockit 项目站点，或在完整发行版中的“jmockit/www”目录下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:12:12.810

是的，您可以使用[@Injectable](http://jmockit.googlecode.com/svn/trunk/www/javadoc/mockit/Injectable.html)注释而不是@Mocked，然后每个模拟将是一个单独的实例。您可以对这些实例执行不同的期望/验证。

[教程](http://jmockit.googlecode.com/svn/trunk/www/tutorial/BehaviorBasedTesting.html#injectable)中的示例：

```
@Test
public void concatenateInputStreams(
  @Injectable final InputStream input1,
  @Injectable final InputStream input2)
{
  new Expectations() {{
     input1.read(); returns(1, 2, -1);
     input2.read(); returns(3, -1);
  }};

  InputStream concatenatedInput = new ConcatenatingInputStream(input1, input2);
  byte[] buf = new byte[3];
  concatenatedInput.read(buf);

  assertArrayEquals(new byte[] {1, 2, 3}, buf);
} 
```

# php - 当项目不存在时 in_array 返回 true

> ID：10593454
> 
> 赞同：1
> 
> 时间：2012-05-15T02:29:49.157
> 
> 标签：php, arrays

我有一个表格，允许我的用户根据需要编辑信息。作为此表格的一部分，用户最多可以插入 5 种类型的证明。所有证明都存储在一个单独的表中：

```
Table: Proof

proofid - primary key
banid - foreign key -> links to banlist table which stores all other information
proof - the link to which contains the proof
type - the type of proof (image, demo, league, ...)
number - the index number of the proof (0 up to 4) 
```

我还有以下代码来更新或插入证明项目。它遍历每个字段，并检查数组中当前选定的项目是否不为空。如果为真，它会检查 $i 是否在存储所选禁令 id 的所有数字的数组中。

banid 237 的数组如下所示：`Array ( [0] => [1] => 1 )`

这实际上表示第一个证明字段是空的，但第二个不是，并且表中存在一条记录。

```
for($i = 0; $i < 5; $i++)
{
    $proof = $checkprooflist[$i];
    $prooftype = $checkprooftypelist[$i];

    if (!empty($proof))
    {                       
        if(!in_array($i, $proofnumberlist))
        {
            $query2 = "INSERT INTO proof (banid, proof, type, number) VALUE ($id, '$proof', '$prooftype', $i)";
            $result2 = mysql_query($query2);
        }
        else
        {
            $query2 = "UPDATE proof SET proof = '$proof', type = '$prooftype' WHERE number = $i AND banid = $id";
            $result2 = mysql_query($query2);
        }
    }           
} 
```

然而，我遇到的问题是，对于上面的数组，该行`if(!in_array($i, $proofnumberlist))`返回 false，因此当 $i = 0 时不输入 if 语句。

It works for all other values (where $i = 1, ...) and so forth but not when $i = 0.

Thank you for reading and I appreciate any help you may be able to give me.

Jon.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:34:41.040

You have to use the `$strict` parameter of [`in_array()`](http://php.net/manual/en/function.in-array.php), it's the third one (default = false).

Due to type juggling, an empty string can be equal to 0, etc. The `$strict` parameter makes sure to also test the types.

```
if (!in_array($i, $proofnumberlist, true)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T02:38:20.607

On the other hand, you could sidestep the entire `in_array` check by using `INSERT ... ON DUPLICATE KEY UPDATE`.

This would make your code a bit clearer. See [http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T02:53:04.877

There is no 0 in this array:

```
Array ( [0] => [1] => 1 ) 
```

The element at index 0 is null, not 0\. Where did you get this array in the first place?

# android - Deleting default events in android calendar

> ID：10593459
> 
> 赞同：1
> 
> 时间：2012-05-15T02:30:05.810
> 
> 标签：android, events, calendar

I wanted to delete the default events which have been added / exist in the Android device calendar. I followed the following to delete :

[How to delete specific event in calendar](https://stackoverflow.com/questions/6924438/how-to-delete-specific-event-in-calendar)

But it deletes only the user added events, not the default ones. How to achieve it? Is it the problem with Google Server sync up?

If it is not possible to delete, is there any way that I can distinguish between user added events and the default ones?

# css - Twitter Bootstrap 输入在 row-fluid 上附加中断

> ID：10593462
> 
> 赞同：5
> 
> 时间：2012-05-15T02:30:24.513
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap 以及它们的响应式风格。我在输入附加和在输入末尾添加“%”时遇到了一些问题。我意识到从“row-fluid”中删除“-fluid”可以解决问题。

1.  在 div.container-fluid 中使用 div.row 可以吗？
2.  这怎么能解决：http: [//jsfiddle.net/zhenghao1/svrec/](http://jsfiddle.net/zhenghao1/svrec/)

提前谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T03:33:43.077

一种快速的方法是将 浮动`input`到左侧。将以下内容添加到您的 style.css 并`span2`从输入中删除该类（改用 % 或固定宽度）。

```
.input-append input { float:left; width:10% } 
```

此外，除了 bootstrap.css 之外，请务必包含 bootstrap-responsive.css 以确保根据您的视口正确调整所有内容的大小。

[http://jsfiddle.net/eterpstra/eXVuM/](http://jsfiddle.net/eterpstra/eXVuM/) （默认情况下，当屏幕尺寸缩小到 < 768px 时，表单会切换到“垂直”方向。这就是为什么如果 jsFiddle 窗口太大，您会看到标签翻转到顶部的原因狭窄的。）

# lua - 如何将 Lua 中的值传递和接收到另一个 Lua？

> ID：10593464
> 
> 赞同：3
> 
> 时间：2012-05-15T02:30:34.967
> 
> 标签：lua, coronasdk

如何将值从`a.lua`to传递`b.lua`？

让我们说`a.lua`我有这个变量代码。

```
local value = "Hello WOrld!"
director:changeScene ("b") 
```

我的问题是我怎么`value`能从`a.lua`到`b.lua`？

提前致谢....

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T02:35:20.863

当你声明一些本地的东西时，你明确告诉 Lua 不要在脚本之间共享它。只需创建一个非局部变量：

```
value = "Hello World" 
```

在 b.lua 文件中只需要 a.lua 文件并使用它，例如在 b.lua 文件中

```
local a_File  = require "a"
print(a_File.value) 
```

你会得到输出为

```
"Hello World" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T02:34:01.250

将值分配给全局表 ( `_G`)，如下所示：

```
_G.value = "Hello WOrld" 
```

在另一个脚本中，您可以执行以下操作：

```
value = _G.value 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T15:00:31.890

比把东西塞进全局表更好的是按照它的预期使用方式使用 lua 的模块系统。

假设你有两个文件，a.lua 和 b.lua。b.lua 需要来自 a.lua 的一些值。这就是你如何做到这一点：

a.lua 代码：

```
module("a", package.seeall)

local myVal = "My value in file a"
local SomeVal = 15

function GetSomeValue()
    return myVal
end 
```

b.lua 代码：

```
require "a"
print(a.GetSomeValue())  -- prints 'My value in file a'
print(a.SomeVal)         -- prints 15
print(SomeVal)           -- prints nil, unless you've declared it in b.lua 
```

这比在 _G 表中填充东西要干净得多。如果您有 3 或 4 个不同的脚本，并且您尝试存储应该命名相同的值，只是在不同的上下文中，会发生什么情况？能够说：

```
a.Value
a.Function() 
```

不仅更清楚你在哪里获取数据，而且比说清楚得多

```
_G["Value"] 
```

并希望这实际上是您希望的价值。如果您只处理一个只有两个文件的简单案例，使用 _G 可能会更容易。但最好是学习最佳实践并尽早使用它们。如果您有多个文件协同工作，使用 _G 将是一场噩梦......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T15:48:18.863

使用director API我们将一个值传输到另一个lua文件很容易。它以表或数组类型发送数据

下面的代码很有用..

**从 .lua 文件**

```
data="hellow"
director:changeScene({data},"levelroom") 
```

**来自 b.lua 文件**

```
module(...,package.seeall)
new=function(params)
   localGroup=display.newGroup()
   data=params.data
   print(data)         --output:hellow
   return localGroup 
end 
```

# java - How to get the correct XML page from Nexmo.com get-balance API by Java BufferedReader?

> ID：10593465
> 
> 赞同：1
> 
> 时间：2012-05-15T02:30:40.357
> 
> 标签：java, jsp

I tried to call a get-balance web/ RESTful API of Nexmo.com to get account's balance, but I received two kind of error response: (1)400 - page not found in GAE-Java runtme. (2)FileNotFoundException in Java SE runtime. How to get the correct XML page by Java BufferedReader?

```
String api =  "http://rest.nexmo.com/account/get-balance/{idkey}/{pwkey}";
URL url = new URL(api);
BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
while ((line = reader.readLine()) != null) {
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:45:17.220

```
 String strURL = "http://rest.nexmo.com/account/get-balance/";
    strURL += USERNAME + "/" + PASSWORD;
    GetMethod get = new GetMethod(strURL);
    get.addRequestHeader("Accept", "application/xml");
    HttpClient httpclient = new HttpClient();
    try {
        int result = httpclient.executeMethod(get);
        System.out.println("Response status code: " + result);
        String responseBodyAsString = get.getResponseBodyAsString();
        System.out.println("responseBodyAsString: " + responseBodyAsString);
    } finally {
        get.releaseConnection();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:33:47.953

我有同样的问题。您唯一需要做的就是在请求中添加“Accept”标头：

```
GetMethod get = new GetMethod("https://rest.nexmo.com/account/get-balance/{key}/{secret}");
HttpClient client = new HttpClient();

try {
    get.addRequestHeader("Accept", "application/xml"); //OR "application/json"
    int status = client.executeMethod(get);
    ... 
```

希望能帮助到你！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T05:18:55.760

我相信您获得 404 的唯一方法是如果`key`or`secret`丢失：

`http://rest.nexmo.com/account/get-balance/[key]/[secret]`

你确定他们都被设置了吗？

（*标准免责声明：我为 Nexmo 做一些开发人员宣传。*）

# ruby-on-rails - Alternative to delayed job for simple cron task on heroku?

> ID：10593467
> 
> 赞同：3
> 
> 时间：2012-05-15T02:30:54.810
> 
> 标签：ruby-on-rails, heroku, background-process

In my Rails app on Heroku, I want to execute a simple block of code at 5 specific times in the future (each about a day apart), down to the second.

Is there a good way to do this without a background process?

I don't want to use Delayed Job because it'll require a Worker instance that costs ~$30/month. Seems unnecessary.

Is there a GOOD way to do this without Delayed Job / a Heroku Worker?

# Resolved

Thanks for your answers- looks like there isn't a solid way to accomplish this. Going with Delayed Job.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T02:38:33.860

改用 rake 任务和 heroku 调度程序

[https://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)

> 调度程序附加组件将运行一次性进程，这些进程将计入您当月的 dyno-hours。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:22:09.137

您可以使用调度程序来执行此操作，您只需要在任务运行时检查日期/小时等 - 因此您可以安排每小时作业（如果这对您有用），然后检查当前日期/小时以查看是否这是您要在其中运行作业然后在支票内运行它的作业。不理想，但会工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T06:28:01.977

您可以将 Rake 任务与 Heroku 调度程序一起使用，然后添加一些智能逻辑：`sleep until job_is_available if job_is_available_in_less_than_twelve_minutes?`

然后，您需要支付运行代码的时间，以及您的 rake 任务检查作业是否可用所需的几秒钟。大约 1-3 美元，因为 Heroku 按比例计算第二个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-03T02:41:05.000

老问题，但是...

也许它可以解决你的问题：[Sucker Punch](https://github.com/brandonhilkert/sucker_punch)。

Heroku 上不需要额外的测功机。并且可以指定 5 个块之间的时间。

# database - password_verify_function not used?

> ID：10593471
> 
> 赞同：0
> 
> 时间：2012-05-15T02:31:30.850
> 
> 标签：database, oracle, database-security, lockdown

We are attempting to secure an oracle instance and the default password verification function does not meet the exact specifications established.

A new function was written and compiled by sys. This was also set as the "DEFAULT" profiles password_verify_function

```
alter profile default limit
    password_verify_function custom_function; 
```

However, when a new user is created, the password verification does not seem to occur. I receive no warnings or errors during compilation of the function. This is how the user is being created:

```
create user stackoverflowexample
    identified by easy
    default tablespace encrypted_ts
    quota unlimited on encrypted_ts
    profile default; 
```

What gotcha's am I not finding/understanding?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:44:33.033

无法重现：

```
CREATE OR REPLACE FUNCTION custom_function (
   username VARCHAR2, password VARCHAR2, old_password varchar2) RETURN BOOLEAN 
AS
BEGIN
  IF password IS NULL OR length(password) < 10 THEN
    RAISE_APPLICATION_ERROR(-20001, 'Password length less than 10.');
  ELSE
    RETURN TRUE;
  END IF;
END custom_function;
/
-- FUNCTION CUSTOM_FUNCTION compiled

ALTER PROFILE DEFAULT LIMIT PASSWORD_VERIFY_FUNCTION custom_function;
-- profile DEFAULT altered.

CREATE USER stackoverflowexample IDENTIFIED BY easy;
-- SQL Error: ORA-28003: password verification for the specified password failed

CREATE USER stackoverflowexample IDENTIFIED BY easy567890;
-- user STACKOVERFLOWEXAMPLE created. 
```

# javascript - jQuery 和 JavaScript - 允许在替换的 Div/Span 中按键下拉行为的默认第一个选择

> ID：10593482
> 
> 赞同：2
> 
> 时间：2012-05-15T02:34:39.087
> 
> 标签：javascript, jquery, jquery-selectbox

我们正在尝试使用一组样式化的 div 和 span 来使用下面的 jQuery Selectbox 脚本创建一个跨浏览器样式的下拉框。它工作得很好，但是有一个非常烦人的问题，那就是它没有做下拉输入控件通常做的一件事。

通常，当某人有一个很长的下拉菜单/列表并且用户键入项目的第一个字母时，下拉菜单/列表将为他们选择第一个项目，而无需滚动。不是自动完成的，而只是这个默认的首选行为。例如，在国家列表中，如果有人通常选择输入控件下拉菜单并按下“U”，则选择以“U”开头的第一个国家。

有没有人在使用 div 和 span 时允许这种相同行为的经验？

[http://info.wsisiz.edu.pl/~suszynsk/jQuery/demos/jquery-selectbox/](http://info.wsisiz.edu.pl/~suszynsk/jQuery/demos/jquery-selectbox/)

[http://code.google.com/p/wixet/source/browse/branch/wixet3rd/js/jquery.selectbox-0.6.1.js?r=172](http://code.google.com/p/wixet/source/browse/branch/wixet3rd/js/jquery.selectbox-0.6.1.js?r=172)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:30:08.590

看这里，你可以使用类似的...

[http://labs.abeautifulsite.net/jquery-selectBox/](http://labs.abeautifulsite.net/jquery-selectBox/)

[http://labs.abeautifulsite.net/jquery-selectBox/jquery.selectBox.js](http://labs.abeautifulsite.net/jquery-selectBox/jquery.selectBox.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T02:55:15.137

如果您使用的插件不支持该行为，您可能需要考虑尝试其他插件。我已经成功使用了可搜索的下拉插件。你有蒙皮控制，所以你应该能够让它看起来像你想要的那样。

[http://jsearchdropdown.sourceforge.net/](http://jsearchdropdown.sourceforge.net/)

# php - php 中的 XML 解析：Simple_xml_loadfile 函数永远运行

> ID：10593484
> 
> 赞同：0
> 
> 时间：2012-05-15T02:34:42.000
> 
> 标签：php, xml, simplexml

我在解析直到昨天还运行良好的 API 时遇到问题！

代码片段：

```
$checkurl = "http://api1.webpurify.com/services/rest/?method=webpurify.live.check&api_key=&text=".urlencode('test test test');

$response = simplexml_load_file($checkurl,'SimpleXMLElement', LIBXML_NOCDATA); 
```

问题是`simplexml_load_file()`没有返回任何值并且永远加载！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:40:34.573

这不是 SimpleXML 问题，但很可能是因为下载被某种方式阻止了。

打开浏览器并尝试先访问 URL；如果您可以正确下载文件，请保存并再次通过 SimpleXML 运行它。这将消除至少一个因素。

# php - 在 Android 中向数据库服务器发送数据

> ID：10593485
> 
> 赞同：2
> 
> 时间：2012-05-15T02:34:47.493
> 
> 标签：php, android, android-emulator

嘿伙计们，我想问一个关于使用 android 应用程序将数据发送到数据库到服务器的问题，我正在像这样通过 php 编写脚本代码。

```
 <?php 
            $coonect=mysql_connect("myhost of the site ","root","");
         if(!$coonect){
       echo "Data_base error";
         die(mysql_error());
         }
       ?>
       <?php
          $username=$_POST['menu_name'];
               $id=$_POST['id'];

         $db_select=mysql_select_db("TableName");
       if(!$db_select){
            die(mysql_error());
            echo" error";

     }
       $query= "INSERT INTO `DatabaseName`.`TableName` (
                   `name` ,
                    `id`
                        )
               VALUES (
                 '{$username}', '{$id}'
                        ); " ;

                  if($medo=mysql_query($query)){
             header("localhost/filename");
           exit;
               }else{
     echo"<p> Error</p>";
     die(mysql_error());
            }

               ?>

        <?php 
             mysql_close($coonect);
        ?> 
```

和像这样在android中的action buuton中的代码。

```
 public void postData() {
// Create a new HttpClient and Post Header
   HttpClient httpclient = new DefaultHttpClient();
   HttpPost httppost = new HttpPost("http://mysite/script.php");

  try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("menu_name", "any data"));
    nameValuePairs.add(new BasicNameValuePair("id", "0345644"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

   } catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
   } catch (IOException e) {
    // TODO Auto-generated catch block
  }
     } 
```

我没有更改 Androidmainfest 文件中的任何内容来建立连接，我必须这样做吗？如果我应该放一些东西是什么？！！但是apk工作正常，但它根本不起作用我在我的代码中做错了什么，或者我应该在Androidmainfest中添加任何权限我不知道有什么问题？？？任何帮助请求

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:39:43.623

据我所知，任何网络通信都需要这个

`<uses-permission android:name="android.permission.INTERNET" />`

在清单文件中。但我真的无法判断是否是因为这阻止了你做你的事情。也许在添加了这个之后，您可以使用终端模拟器或类似的应用程序从您的 android 设备进行 ping 测试。如果您在获取这些信息时需要帮助，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:21:43.077

是的，您需要在清单中提供如下所示的**INTERNET权限；**

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

如果您尝试在高于 13 的 API 级别上运行 Android 程序，则必须在后台线程而不是主线程中编写连接到 Internet 的部分。

如果您在 API 级别 13 以下运行它，则无需担心在哪里编写连接部分的代码。

PS。：这是在 Android中处理[HTTP POST](http://anujarosha.wordpress.com/2012/01/27/handling-http-post-method-in-android/)和[HTTP GET的示例](http://anujarosha.wordpress.com/2012/01/20/handling-http-get-method-in-android/)

# ruby-on-rails - Rails S 挂起，端口未断开连接？

> ID：10593490
> 
> 赞同：2
> 
> 时间：2012-05-15T02:36:45.027
> 
> 标签：ruby-on-rails, sockets, terminal

免责声明：我是一个完整的初学者，所以请多多包涵，我不知道如何命名我的问题，所以在网上寻找答案很麻烦。

我的端口有问题。

**问题：** 我通过这行命令启动 rails 服务器：

```
rails s -p 3500 
```

另一台计算机使用它。但是当服务器挂起（关闭终端并关闭服务器）时，它无法通过同一端口启动 rails 服务器。抱怨（并声称）**使用多个套接字**。我们很确定*没有其他人使用相同的端口。

* * *

**急救：**要让服务器运行，我们重新启动计算机或将端口更改为 3501。这很麻烦。

**假设：** *似乎它使端口保持连接状态。*

[在这里我找到了另一个解决方法（引用如下）](https://stackoverflow.com/questions/125730/why-do-i-get-an-error-when-starting-ruby-on-rails-app-with-mongrel-rails)

> 在任务管理器中找到ruby.exe进程并完成

有没有更简单的方法来解决这个问题？我还没有尝试过上面的方便解决方法，但我相信这会奏效。

现在，回到我的主要问题： ***服务器真的在后台使用端口吗？***

**有没有办法防止这种情况发生？**

**谁能百分百确定？如果这是导致此问题的唯一原因，请原谅我。*

***编辑：***
*操作系统：Windows 7 Professional*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:16:40.400

ruby.exe 是否出现在进程下的任务管理器中？这是杀死它的简单方法。如果它没有显示在那里，请从命令提示符处执行以下操作。

```
netstat -a -o 
```

这将列出系统正在使用的所有端口。在 tcp 部分下找到正在运行的端口。当您找到该条目时，它将列出它正在运行的进程 ID。然后，您需要按如下方式杀死该 PID

```
taskkill -F /PID 2632 
```

以下是我在 Windows 机器上使用的行。

```
Proto  Local Address          Foreign Address        State           PID
TCP    0.0.0.0:3000           fastone:0              LISTENING       2632 
```

当我使用默认的 rails 端口时，我杀死了 pid 2632。至于为什么会这样？它发生在 linux 世界以及大多数 Rails 应用程序部署的地方。问题是当终端窗口关闭等时，ruby 进程仍在运行。该进程在后台消失。该端口仍在使用中，服务仍在运行。我不确定是否有一种简单的方法可以防止它发生。欢迎来到编程世界

# jquery - Unbind specific handler on a custom event listener

> ID：10593491
> 
> 赞同：0
> 
> 时间：2012-05-15T02:36:45.407
> 
> 标签：jquery

I am using JQuery .live to listen for a custom event, ie not .click, .change, .keyup or any of the native events, but rather an event that I create using jquery .trigger. I have several places in the application that listen for this event using .live. I want to remove a single handler from the event. None of the methods I've tried seem to work including, .unbind, .die, and .undelegate. I'm using jquery 1.6 so I can't use .off. What's the best way to accomplish this?

This is essentially the form my code takes. I call unbind first to remove the handler if it already exists.

```
OBJECT 1
{
    myNameSpace.MY_CUSTOM_EVENT_STRING = "my_event";

    $cachedFieldObject.trigger(myNameSpace.MY_CUSTOM_EVENT_STRING);
}

OBJECT 2
{
    function myfunctionName(var1) {myObject.myObjectsFunction()}

    $("#divID").find(".fieldClass").unbind(myNameSpace.MY_CUSTOM_EVENT_STRING, myfunctionName).live(myNameSpace.MY_CUSTOM_EVENT_STRING, myfunctionName);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:59:58.523

[live()](http://api.jquery.com/live/)将委托的事件处理程序附加到文档元素，因此您必须将它们与文档元素解除绑定。这个[小提琴](http://jsfiddle.net/mowglisanu/6522b/)展示了如何从实时但不特定的选定元素解除绑定特定功能。
编辑：
来自文档

*   不支持链接方法。例如， $("a").find(".offsite, .external").live( ... ); 无效且无法按预期工作。

    可以取消绑定自定义事件，但您必须对所有绑定元素执行此操作
    在此[小提琴](http://jsfiddle.net/mowglisanu/6522b/2/)中，自定义事件仅在所有元素都未绑定时才变为未绑定。

# c - 捕获带有副作用的 assert()

> ID：10593492
> 
> 赞同：18
> 
> 时间：2012-05-15T02:36:46.177
> 
> 标签：c, gcc, assert

我们有几个中等大小的 C 代码库，可以接收来自具有各种经验水平的开发人员的提交。一些缺乏纪律的程序员提交`assert()`带有副作用的语句，这些语句会导致禁用断言的错误。例如

```
assert(function_that_should_always_be_called()); 
```

我们已经使用了自己的`assert()`实现，但是使用定义的表达式评估`NDEBUG`会导致不可接受的性能下降。是否有我们可以传递的 GCC 扩展或标志来触发这些的编译时警告/错误？通过足够简单的控制流程，GCC 应该可以确定您只是在调用纯函数。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-02-09T14:18:16.580

尽管这个问题收到了许多无用的非答案，但我认为它在遗留代码库的上下文中具有很多优点。

想象一下，多年来积累了许多断言，但是由于没有使用 NDEBUG 构建/测试的习惯，一些副作用已经渗透到断言中，现在你不敢再禁用断言了。

您可以打开 NDEBUG 并在您的测试套件中检测到一些测试失败，但是将测试失败与“有效”断言联系起来并不简单，因为它可能离您检测到失败的点很远。即使是具有良好覆盖率的测试套件也不能被认为是完整的。

您可以对代码中的所有断言进行代码审查，但这可能需要大量工作并且容易出现人为错误。如果一些静态分析已经可以消除所有可以*证明*没有出现副作用的断言，并且您只需要调查那些不能保证它们不存在的情况，那就更好了。

以下是如何使用编译器的优化器来进行这样的静态分析。假设您组织通过以下方式替换`assert`宏的定义：

```
extern int not_supposed_to_survive;
#define assert(expr) ((void)(not_supposed_to_survive || (expr))) 
```

如果`expr`有任何副作用，则效果的执行取决于全局变量的值`not_supposed_to_survive`。但如果`expr`不产生任何副作用，全局变量的值无关紧要（注意`expr`结果被丢弃）。**一个好的优化器知道这一点并将消除全局变量的负载`not_supposed_to_survive`**，因此变量的名称。

如果我们的程序不包含符号的定义，`not_supposed_to_survive`当负载没有消除时我们会得到一个链接错误，我们可以使用它来检测一个潜在有效的断言。

例如使用 gcc 4.8：

```
int g;

int foo() { return ++g; }

int main() {
    assert(foo());
    return 0;
}

gcc -O2 assert_effect.c
/tmp/ccunynya.o: In function `main':
assert_effect.c:(.text.startup+0x2): undefined reference to `not_supposed_to_survive'
collect2: error: ld returned 1 exit status 
```

编译器帮助我找到了一个可疑的断言！另一方面，如果我替换`++g`为`g+1`，链接错误就会消失，我不必调查。事实上，这种说法保证是无害的。

当然，可证明无副作用的概念受到优化器“可以看到”的限制。为了进行更精确的分析，我建议使用链接时优化 ( `gcc -flto`) 跨编译单元进行分析。

`error`作为一个轻微的可用性改进，在 GCC 4.4 和更高版本上，可以使用函数属性在编译时（而不是链接时）获得人类可读的错误消息。由于这个属性只对函数起作用，对变量不起作用，我们还需要告诉 GCC 它是一个纯函数，这意味着函数本身不会有副作用。这确保了如果返回值不相关，可以安全地删除对函数的调用。

```
extern int not_supposed_to_survive() __attribute__((pure)) __attribute__((error("assert() cannot be proven to have no side effects")));
#define assert(expr) do { (void)(not_supposed_to_survive() || (expr)); } while(0) 
```

**更新：**我使用 gcc 5.3 在现实生活中的 C++ 代码库上应用了带有全局变量的简单变体。要使用链接时优化，您基本上将`gcc -flto -g`其用作编译器/链接器（编译器/链接器`-g`上的选项以获取链接错误的行引用）以及`gcc-ar`任何`gcc-ranlib`静态库的存档器/索引器。

这种设置可以极大地减少我必须调查的断言数量。用最少的人力，我就能把断言清理干净。我仍然不得不手动拒绝的误报是由于：

*   虚函数调用
*   非平凡的循环/递归（优化器无法证明它们是有限的）

此外，我还会得到一些确实包含副作用的断言，但它们是无害或不重要的，例如：

*   包含日志语句的函数
*   缓存其结果的函数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-03T16:51:05.443

我不确定它对于您描述的应用程序是否足够，但 cppcheck 寻找“assertWithSideEffect”： [http ://cppcheck.sourceforge.net/devinfo/doxyoutput/checkassert_8cpp_source.html](http://cppcheck.sourceforge.net/devinfo/doxyoutput/checkassert_8cpp_source.html)

这是编译时消息的样子： [assertWithSideEffect] myFile.cpp:42: 警告：非纯函数：'myFunction' 在断言语句中被调用。断言语句从发布版本中删除，因此断言语句中的代码不会被执行。如果在发布版本中也需要代码，这是一个错误。

“Cppcheck 是 C/C++ 代码的静态分析工具。与 C/C++ 编译器和许多其他分析工具不同，它不会检测代码中的语法错误。Cppcheck 主要检测编译器通常不会检测到的错误类型。目标是只检测代码中的真正错误（即误报为零）。” [http://cppcheck.sourceforge.net/](http://cppcheck.sourceforge.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T02:47:58.220

> 通过足够简单的控制流程，GCC 应该可以确定您只是在调用纯函数。

如果它不是一个足够简单的控制流，它怎么知道它是不是纯的？

* * *

这样的事情可能是你最好的选择：

```
#ifdef NDEBUG
#define assert(s) do { (s); } while(false)
#else
// ...
#endif 
```

将编译出几个表达式，包括带有`__attribute__((pure))`.

最合乎逻辑的解决方案是检查您的代码并修复错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T05:13:47.690

即使 GCC 可以可靠地检测到纯计算（这需要解决停机问题），标志也必须具有额外的魔力才能注意到非纯计算作为参数传递给您自己开发的断言宏。扩展也无济于事——它到底应该做什么？

您的问题的解决方案是

1.  聘请有能力的开发人员。
2.  教育您的开发人员如何使用断言（除其他外）。
3.  进行代码审查。
4.  针对可交付版本进行所有测试——如果断言在可交付成果中关闭，那么 assert(function_that_should_always_be_call()) 与简单地省略 function_that_should_always_be_call() 没有什么不同，这是一个应该在测试中发现的明显错误。

# ios - reloadSections:withRowAnimation 动画出现问题

> ID：10593493
> 
> 赞同：4
> 
> 时间：2012-05-15T02:37:01.550
> 
> 标签：ios, xcode, uitableview, reloaddata

我有一个 UITableView 有两个部分（一个顶部和一个底部）。当项目在顶部（第 0 部分）被“选中”时，我将它们移动到底部（第 1 部分），反之亦然。除了动画，一切都很好。

我正在使用以下内容，但行移动缓慢 - 我在其他应用程序中看到了更好的结果。我希望顶部的行干净地动画到底部......并且底部的行在选中或未选中时干净地动画到顶部。

```
// set the guests arrival status and use animation
    [guestList beginUpdates];
    if (!guest.didArrive) {
        [guest setDidArrive:YES];
        [guestList reloadSections:sectionIndexSet withRowAnimation:UITableViewRowAnimationBottom];
    } else {
        [guest setDidArrive:NO];
        [guestList reloadSections:sectionIndexSet withRowAnimation:UITableViewRowAnimationTop];
    }
    [guestList endUpdates];

[guestList reloadData]; 
```

我应该如何编码以获得漂亮的流畅动画？

编辑：

我发现了问题。应该这样写：

```
//NSIndexSet *sectionIndexSet = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 1)];

    // set the guests arrival status and use animation
    [guestList beginUpdates];
    if (!guest.didArrive) {
        [guest setDidArrive:YES];
        [guestList reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationBottom];
    } else {
        [guest setDidArrive:NO];
        [guestList reloadSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationTop];
    }
    [guestList endUpdates];
[guestList reloadData]; 
```

请注意我注释掉的第一行。我最初忽略了添加这个。如您所见，我使用的是构造不佳的 NSIndexSet。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T02:39:01.060

问题解决了。请参阅编辑后的回复。代码应该是：

```
// set the guests arrival status and use animation
[guestList beginUpdates];
if (!guest.didArrive) {
    [guest setDidArrive:YES];
    [guestList reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationBottom];
} else {
    [guest setDidArrive:NO];
    [guestList reloadSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationTop];
}
[guestList endUpdates];
[guestList reloadData]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T06:56:35.560

为什么需要在函数结束时重新加载 guestList 的数据？您已经在重新加载您想要的部分...尝试删除它并再次检查。

# delphi - 使用 DOM delphi 7 以编程方式单击 webbrowser 中的链接

> ID：10593494
> 
> 赞同：1
> 
> 时间：2012-05-15T02:37:27.710
> 
> 标签：delphi, dom, delphi-7

`<span id="lblCommande">Bon de commande</span></a>|
<a href="retour.aspx">`

这是我想使用按钮“单击”的链接。我知道如何使用此按钮单击按钮： `WebBrowser.OleObject.Document.GetElementByID('ID HERE').Click;` 但这不适用于链接。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T02:53:46.593

好的，我找到了。就是这样： `WebBrowser.OleObject.Document.GetElementByID('lblcommande').Click;`

# .htaccess - .htaccess ：将规则从 URL 重写为 POST / SESSION 参数

> ID：10593496
> 
> 赞同：0
> 
> 时间：2012-05-15T02:38:03.070
> 
> 标签：.htaccess

如果我想转发：

```
http://www.domain.com/system/link1
http://www.domain.com/system/link2
http://www.domain.com/system/link3 
```

至 ：

```
http://www.domain.com/system/  // forward to the index.php 
```

而**index.php**可以接收参数`link1`，`link2`并且`link3`在**$_POST**或**$_SESSION**中。我应该如何写`.htaccess`规则？

我目前的规则是：

```
RewriteEngine On
RewriteRule /system/?systemkey=$1 ^system/([^/]*)$  [L] 
```

但我确信这是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:24:24.320

你不能让它在`$_SESSION`or中接收`$_POST`，只有`$_GET`：

```
RewriteEngine On
RewriteRule ^system/([^/]*)/?$ system/index.php?systemkey=$1  [L] 
```

# c# - 安全 DSA 签名

> ID：10593501
> 
> 赞同：9
> 
> 时间：2012-05-15T02:38:49.903
> 
> 标签：c#, .net, code-signing

有人可以让我放心，看看这个设置是否会验证文件是否来自我。了解这是多么安全的想法以及任何潜在的攻击媒介都会很棒。

1.  使用 DSACryptoServiceProvider 创建公钥和私钥。
2.  添加公钥作为应用程序资源
3.  创建更新
4.  使用私钥获取更新的 dsa 哈希
5.  向应用程序发送哈希和更新（假设这些可以被拦截/更改）
6.  使用公钥验证哈希是否正确。
7.  如果验证应用更新

更新是一个 exe，将被执行，所以我想确保如果有人替换或篡改它，它不会被执行。

编辑：更新第 6 点，因为公钥实际上并没有生成哈希，只是验证它。我认为这是我在安全方面苦苦挣扎的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:01:42.260

你的方法看起来不错。剩下的问题是您的应用程序在客户端上的安全性如何。有人可能篡改可执行文件吗？也许在应用程序资源中切换公钥？

这里是理论上的，但我建议对第 6 步进行小修改：具体说明您要使用哪个确切的公钥。如果某个攻击者可以切换应用程序资源中的密钥，他可以发送一个更改过的包，其中包含另一个私钥的正确散列。这可能只是一个小问题，因为攻击者已经修改了您的软件。但是，如果他只能替换应用程序资源而没有其他功能，那么他将能够让您的应用程序使用他的恶意代码进行自我更新。

# ajax - JSF2 + Primefaces 3.2 ajax 更新

> ID：10593502
> 
> 赞同：1
> 
> 时间：2012-05-15T02:38:50.910
> 
> 标签：ajax, jsf-2, primefaces

我很难同时更新 h:form 和 p:panelGrid，所以你能帮帮我吗？我也尝试过@form，但没有任何反应。仅当我按 F5 时才会发生预期的行为。

xhtml:

```
<h:form id="slct_img_form">
<p:panel header="Nova categoria">
    <div style="margin: 2% 0 1.7% 0;">
        <p><b>2.º Passo:</b> Selecione uma imagem para representar a categoria.</p></pre>
    </div>
    <p>debugging selected: #{catalogCategoryController.picasaPhoto.title}</p>
    <p:dataGrid id="imgs_to_slct" var="img" value="#{siteImgsPicasaController.picasaPhotos}"  
                columns="3" rows="6" paginator="true"
                emptyMessage="Nenhuma imagem at&eacute; o momento!"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                rowsPerPageTemplate="6,9,12">

        <p:column>

            <p:panel header="#{img.title}" style="text-align:center; width: 300px;">
                <table border="0" style="margin: 0 auto;">
                    <tr>&nbsp;</tr>
                    <tr>
                        <td colspan="3">
                            <p:lightBox group="false" transition="false">
                                <h:outputLink value="#{img.sourceUrl}" title="#{img.title}">
                                    <h:graphicImage value="#{img.thumbnailUrl}" />
                                </h:outputLink>
                            </p:lightBox> 
                        </td>
                    </tr>                                                            
                    <tr>
                        <td colspan="3">&nbsp;</td>
                    </tr>
                    <tr>
                        <td><b>Dimens&otilde;es:</b> #{img.width} x #{img.height} pixels</td>
                    </tr>
                    <tr>
                        <td>

                            <p:commandButton title="Selecionar" value="Selecionar"
                                             rendered="#{img.sourceUrl ne catalogCategoryController.picasaPhoto.sourceUrl}" 
                                             update=":slct_img_form:imgs_to_slct">

                                <f:setPropertyActionListener value="#{img}" 
                                                             target="#{catalogCategoryController.picasaPhoto}" />
                            </p:commandButton>
                                <p:commandButton title="Selecionar" value="Selecionar" icon="ui-icon-check"
                                                 rendered="#{img.sourceUrl eq catalogCategoryController.picasaPhoto.sourceUrl}"
                                                 disabled="true" />
                        </td>
                    </tr>
                    <tr>&nbsp;</tr>
                </table>
            </p:panel>

    </p:column>

</p:dataGrid>
    <div style="font-weight: bold; margin: 2% 0 1% 0;">
    <p:commandButton value="Voltar" icon="ui-icon-arrow-1-w"
                     ajax="false" type="submit"
                     action="new">

    </p:commandButton>
    <p:commandButton value="Gravar" icon="ui-icon-disk"
                     ajax="false" type="submit"
                     action="#{catalogCategoryController.add}">

    </p:commandButton>
    </div>
</p:panel>
</h:form> 
```

...

托管豆：

```
@Named
@SessionScoped
public class CatalogCategoryController implements Serializable{

...

private PicasaPhoto picasaPhoto;
public PicasaPhoto getPicasaPhoto() {
    return picasaPhoto;
}
public void setPicasaPhoto(PicasaPhoto picasaPhoto) {
    this.picasaPhoto = picasaPhoto;
    this.selectedImage = new Media(picasaPhoto, currentAccount);
}

....
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:43:58.130

添加`prependId="false"`到`form`属性，然后 primefaces 不会`form ID`在其他组件 id 之前添加，否则您必须指定组件的“完整”路径（如果它不在特定的`form`. 然后尝试使用`update="@form"`or`update=":imgs_to_slct"`

# php - PHP 日期时间字段选择今天？

> ID：10593505
> 
> 赞同：3
> 
> 时间：2012-05-15T02:39:08.587
> 
> 标签：php, mysql, sql, datetime

我今天无法让我的选择语句过滤日期时间列：我只需要行数（多少）

```
$u_today = date('Y-m-d');
$query = mysql_query("SELECT * FROM wds_sec1tasks WHERE due_date = '$u_today'");
$u_rows = mysql_num_rows($query);
echo $u_rows; 
```

我是否需要抓住日期时间的左 10 个字符进行比较？substr(due_date,0,10)?

谢谢，JM

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T02:44:54.570

您必须先通过以下方式`due_date`进行转换`DATE`：

```
SELECT * FROM wds_sec1tasks WHERE DATE(due_date) = '$u_today' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T02:40:16.100

只需使用[`CURRENT_DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-date)：

```
$query = mysql_query("SELECT * FROM wds_sec1tasks WHERE due_date = CURRENT_DATE"); 
```

# java - 如何在 PriorityQueue 中找到项目的索引？（爪哇）

> ID：10593507
> 
> 赞同：9
> 
> 时间：2012-05-15T02:39:16.103
> 
> 标签：java, priority-queue

我想知道是否可以在 PriorityQueue 中找到值的索引。只是为了看看它是“在线”的数字。有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-11T11:21:37.460

有一个普林斯顿写的索引优先级队列。

algs4.cs.princeton.edu/24pq/IndexMinPQ.java.html

关键思想是在项目与其在优先级队列中的位置之间建立两个索引映射。

当您更新优先级队列时，您还需要更新这两个索引映射。

希望这可以解决您的问题:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T02:49:50.697

PriorityQueue 不支持索引。您可以自己将整数索引与每个项目相关联。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T02:43:46.163

如果您查看文档中的第一行，您将看到：

```
An unbounded priority queue based on a priority heap. 
```

您不能使用优先级堆来有效地查找元素的索引。它只知道第一个，当你弹出它时，它会重新计算新的第一个等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-07T20:04:14.480

这是一个快速修复；更好的方法是李明提出的方法。

可以使用`poll()`and`peek()`方法解决这个问题：该`poll()`方法检索最顶层的元素并将其删除。

假设您要检查`PriorityQueue`named中的第 k 个元素`pq`：

```
for(int i=0; i<k-1; i++){
        pq.poll();
    } 
```

接下来，我们使用该`peek()`方法查看 的最顶层元素`PriorityQueue`：

```
pq.peek(); 
```

这将返回 的最顶部元素`PriorityQueue`，在这种情况下，它将是第 k 个位置的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-20T21:35:28.653

我有一个`PriorityQueue<Integer[]> queue`索引是数组的第一个元素的地方。所以我做了这个方法，它找到元素然后实际上将它从队列中删除。

由于此方法仅用于现有索引，因此我添加了`orElseThrow`处理空`Optional`的

```
static Integer[] getByIndex(Integer i, PriorityQueue<Integer[]> queue) {
  Integer[] node = queue.stream().filter(n -> n[0].equals(i)).findAny().orElseThrow(
      () -> new NullPointerException("node " + i + " not found on queue")
  );
  queue.remove(node);
  return node;
} 
```

# tridion - 无法获取发布队列项目的列表。超时已过

> ID：10593512
> 
> 赞同：5
> 
> 时间：2012-05-15T02:40:10.453
> 
> 标签：tridion, tridion2009

我在 Tridion 2009 SP1 上。在某一时刻，查看所有用户（即不是过滤器）的发布队列的功能刚刚停止工作。在 CM GUI 中收到超时错误：

```
(80040E31) Timeout expired
Unable to get list of publishing queue items.

SQLUtilities.OpenRecordsetByStoredProcedure
SystemDAL.GetListData
SystemBLST.lObjListPublishTransactions
SystemBLST.IBLSystemST_GetListData
ManagementInfo.GetListPublishQueue
Request.GetList 
```

所以我尝试使用 Publication Queue Manager Powertool 清理队列，但这只会引发 500 错误，这与队列中的项目太多是一致的。

然后我尝试使用 Tridion Purge Tool 清除队列，但它会运行几秒钟并返回相同的错误：

```
14-May-2012 21:10:12 Log cleared.
14-May-2012 21:10:12 Purge action started at 14-May-2012 21:10:12
14-May-2012 21:10:12 Keeping the last 5 versions.
14-May-2012 21:10:12 Recursive mode: False
14-May-2012 21:11:12 FAILED: <?xml version="1.0"?>
<tcm:Error xmlns:tcm="http://www.tridion.com/ContentManager/5.0" ErrorCode="80040E31" Category="7" Source="Kernel" Severity="1">
    <tcm:Line ErrorCode="80040E31" Cause="false" MessageID="4613"><![CDATA[Unable to get list of publishing queue items.]]>
        <tcm:Token>RESID_4485</tcm:Token>
        <tcm:Token>RESID_15821</tcm:Token>
    </tcm:Line>
    <tcm:Line ErrorCode="80040E31" Cause="true">
        <![CDATA[Timeout expired]]>
    </tcm:Line>
    <tcm:Details>
        <tcm:CallStack>
            <tcm:Location>SQLUtilities.OpenRecordsetByStoredProcedure</tcm:Location>
            <tcm:Location>SystemDAL.GetListData</tcm:Location>               
            <tcm:Location>SystemBLST.lObjListPublishTransactions</tcm:Location>
            <tcm:Location>SystemBLST.IBLSystemST_GetListData</tcm:Location>
            <tcm:Location>ManagementInfo.GetListPublishQueue</tcm:Location>
        </tcm:CallStack>
     </tcm:Details>
</tcm:Error> 
```

事件日志都显示完全相同的错误。哦，是的，我已经尝试重新启动 COM+、Publisher 和 Transport 服务。

因此，发布队列似乎处于不可访问状态。请您建议可能是什么原因或我的下一步？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T04:20:19.993

也许您可以查询发布事务表以获取所有事务的 tcm uri 列表，将其移动到自定义数据库中并使用 TOM.NET API / 核心服务单独打开每个事务并根据状态删除它使用API。

这样，您可以以受控方式删除事务，而无需直接处理数据库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T03:17:25.303

SQLServer 和 Internet Information Server 的超时设置是什么？如果它们处于股票违约状态（无法立即记住它们是什么），那么可能值得尝试增加它们。

如果它仍然失败，也许在数据库上放一个跟踪，看看为什么它花了这么长时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T08:11:24.087

您可以尝试很多事情；

在代码中：

1.  将数据集减少到可能的特定时间段（每周、每月）
2.  一一选择特定的统计类型（失败、成功等）

关于基础设施：

1.  我不确定您要做什么，但是如果您只是删除事务，也许只需使用清除工具（但是当您编码时，我假设它对于您的用例来说不够聪明）
2.  使用清除工具删除与您的用例无关的旧事务
3.  确保数据库完全优化
4.  （如前所述）增加 Tridion 配置管理单元中的超时时间
5.  确保您拥有适用于您的 Tridion 版本的最新补丁（2009 GA 和 SP1 的队列性能发生了许多变化
6.  通常确保硬件正在执行

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T13:33:47.000

除了此处列出的所有优点之外，您是否优化了数据库？您应该计划定期更新数据库统计信息并重新索引。请与您的 DBA 联系以安排维护计划。

除了定期清理/清除您的事务之外，快速更新 CM DB (MSSQL: sp_updatestats) 上的统计信息将有助于提高 GUI 的性能。

[您可以在此处](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=MaintainingSDLTridion.xml&docid=task_1236E6822ECB47748C15CCF4F94E25B9&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDoctask_1236E6822ECB47748C15CCF4F94E25B9)查看 Tridion 维护文档

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T08:13:40.560

我认为，这可能是由于发布队列`'N'`中的项目数量所致。`In-Progress`

不要试图一次删除所有项目。

最好按此顺序删除队列项目：-

1.  失败的
2.  进行中

除此之外，刚才我看到了一个 Hotfix。

**`Hotfix: CM_2009.1.74381`**

看看这个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T21:23:35.353

从您在队列中转储大量项目之前恢复 CM 数据库的备份。不漂亮，但它可能会让你到达那里。

否则，请与 Tridion 支持人员讨论他们可能愿意批准哪些数据库脚本来解决此问题。

# c# - C#中的模式匹配以删除括号中的系列

> ID：10593515
> 
> 赞同：0
> 
> 时间：2012-05-15T02:40:23.930
> 
> 标签：c#, regex

我正在`RegularExpressions.Regex`尝试匹配以下文本：

```
(X12345 5/10/2012 21:32) - (X12345 5/14/2012 21:32) - summary text 123 
```

我想删除字符串开头括号中的任何一系列值（包括存在的任何连字符）。一旦遇到不在括号中的文本，我想停止匹配并仅返回不匹配的内容。

例如，我希望只看到从正则表达式操作返回的“摘要文本 123”。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:44:47.847

替换此模式：

```
^\s*(\([^)]*\)[\s-]*)+[\s-]* 
```

一无所有。

# jquery - jQuery 没有正确循环 jPlayer 中的 Ci 数据

> ID：10593527
> 
> 赞同：1
> 
> 时间：2012-05-15T02:43:24.527
> 
> 标签：jquery

我想要做的是遍历我的数据库中的 2 个 url。到目前为止，我已经让它在第一行工作，但我需要它遍历两行。截至目前，它只循环通过数据库中的第一个 url 两次。我尝试将 '#jquery_jplayer_1' 设为一个类，但这似乎仍然不起作用。有什么想法或帮助吗？

```
<!DOCTYPE html>
<html lang="en">
<head>
<?php include("vh.php"); ?>
<?php $query = $this->db->query("SELECT * FROM music");
      foreach ($query->result() as $row) {
?>
        <!-- Example code to create a simple player using jPlayer 2.1.0 -->

        <!-- Skins are defined in CSS. Uncomment the following CSS reference and comment out the one below it to switch skins -->

        <!--<link href="http://jplayer.org/latest/skin/blue.monday/jplayer.blue.monday.css" rel="stylesheet" type="text/css" />--> 
        <link href="http://jplayer.org/latest/skin/pink.flag/jplayer.pink.flag.css" rel="stylesheet" type="text/css" />

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>    
        <script type="text/javascript" src="http://jplayer.org/2.1.0/js/jquery.jplayer.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {

                $(".jquery_jplayer_1").jPlayer({
                    ready: function(event) {
                        $(this).jPlayer("setMedia", {
                            mp3: "<?=$row->songURI?>",
                        });
                    },
                    swfPath: "http://www.jplayer.org/2.1.0/js",
                    supplied: "mp3"
                });
            });
        </script>

    </head>
    <body>
        <div class="jquery_jplayer_1" class="jp-jplayer"></div>

        <div id="jp_container_1" class="jp-audio">
            <div class="jp-type-single">
                <div class="jp-gui jp-interface">
                    <ul class="jp-controls">

                        <!-- comment out any of the following <li>s to remove these buttons -->

                        <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                        <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                        <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                        <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                        <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                        <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                    </ul>

                    <!-- you can comment out any of the following <div>s too -->

                    <div class="jp-progress">
                        <div class="jp-seek-bar">
                            <div class="jp-play-bar"></div>
                        </div>
                    </div>
                    <div class="jp-volume-bar">
                        <div class="jp-volume-bar-value"></div>
                    </div>
                    <div class="jp-current-time"></div>
                    <div class="jp-duration"></div>                   
                </div>

                <div class="jp-no-solution">
                    <span>Update Required</span>
                    To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                </div>
            </div>
        </div>
    </body>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">

<head>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:03:49.103

所以你在这里有一些问题。他们中的大多数都在js中。我还查看了 jplayer api，似乎它一次只能播放一首歌曲，这就是我想你在那里有那个循环的原因。

以下是您的问题：

*   理想情况下，您希望在 jquery 中有一个文档就绪功能。这使您的代码在所有地方都减少了。如果你能帮助它，我会做一个功能，在这种情况下你可以。
*   在您的代码中，选择器`$(".jquery_jplayer_1")`将返回一个包含 2 个元素的 jquery 对象（因为循环后页面上有该类的 2 个 div），但是由于您有 2 个函数将 jplayer 初始化到这 2 个元素（首先使用 mp3#1然后是 mp3#2) 您将在第二次初始化时破坏 jplayer 或将它们都设置为 mp3#2
*   您的 setMedia 对象中有一个尾随逗号：`mp3: "<?=$row->songURI?>",`- 这会以非常神秘的 js 错误破坏较旧的 IE。删除尾随逗号。
*   你在空的 jplayer div 上有 2 个类属性！

正确的方法是：

*   将循环移动到 2 个 jplayer div`container`和空播放器 div周围
*   在循环中确保将容器输出为`jquery_jplayer_1`和`jquery_jplayer_2` 相同的类
*   在 ready 函数中放置第二个循环，以将单独的 init 调用输出到 jplayer。这是第二次循环迭代输出的样子：

    ```
     $(".jquery_jplayer_2").jPlayer({
                ready: function(event) {
                    $(this).jPlayer("setMedia", {
                        mp3: "<?=$row->songURI?>"
                    });
                },
                cssSelectorAncestor: '.jp_container_2',
                swfPath: "http://www.jplayer.org/2.1.0/js",
                supplied: "mp3"
            }); 
    ```

请注意，我添加了**cssSelectorAncestor: '.jp_container_2'**你需要在你的 init 函数中有它来告诉它使用哪个容器。每个玩家都应该有一个单独的容器。

我希望这有帮助

此外，底部还有一些额外的文档类型废话。

# email - 在 Automator 中从选定的电子邮件中提取电话号码

> ID：10593528
> 
> 赞同：1
> 
> 时间：2012-05-15T02:43:39.877
> 
> 标签：email, text, automator

我正在尝试建立一个系统，人们可以在其中向某个地址发送电子邮件，以将他们的电话号码添加到数据库中。我希望使用 Automator 来完成很多这样的工作。到目前为止，这就是我的工作流程：

```
1\. Get New Mail For: DEMO
2\. Find Mail Messages where All of the following are true: Entire Message contains BEACH
3\. Get Selected Mail Messages
4\. Extract Phone Numbers From Text
5\. New Text Edit Document 
```

这可行，*但从文本中提取电话号码*“没有提供所需的数据”。还不要介意数据库的东西——这是另一个问题——我如何在 Automator 中从电子邮件的主题和发件人中提取电话号码？我显然在某处做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:23:14.700

您无法从邮件消息的文本中提取数据，因为您实际上并没有将**文本**传递给提取操作 - 您正在传递**邮件消息对象**。如果要处理消息的发件人和主题，则必须在“从文本中提取数据”操作之前插入具有以下内容的“运行 AppleScript”操作：

```
using terms from application "Mail"
    on run {input, parameters}
        set mailContents to {}
        repeat with aMessage in input
            set end of mailContents to subject of aMessage
            set end of mailContents to sender of aMessage
        end repeat
        return mailContents
    end run
end using terms from 
```

– 这将遍历所有邮件消息对象，并将它们的*发件人*和*主题*属性附加到传递给“提取”操作的列表中。

**关于您的工作流程的一些注意事项**

*   在“查找邮件项目”操作之后不需要您的“获取选定的邮件消息”操作 - 它已经返回了一个邮件列表（您需要它来返回来自帐户或邮箱的所有邮件，但您正在过滤到邮件已经水平）。
*   您可能希望过滤查找邮件的位置，因为“查找”操作在大型邮件数据库上需要很长时间。如果您首先找到一个邮件帐户，或者更好的是，邮箱（例如“收件箱”），然后您可以插入一个“过滤邮件项目”操作以仅返回符合您的搜索条件的邮件（您可以将其扩展到如果您只想查看多个邮件帐户之一的收件箱，请使用级联：找到该帐户，在收件箱中过滤，然后根据邮件条件进行过滤）。

# ruby-on-rails - 如果原始文件太小，回形针不会创建缩略图

> ID：10593540
> 
> 赞同：0
> 
> 时间：2012-05-15T02:45:29.297
> 
> 标签：ruby-on-rails, paperclip

我使用回形针和以下设置。

```
has_attached_file :attached,
      :styles => {
        :small => ["170x170>", :jpg], :large => ["400x400>", :jpg]
      } 
```

如果原始文件太小，我希望不创建缩略图。例如，如果原始文件是 250x250，则创建“小缩略图”（170x170），但不创建大缩略图。

但是，在上面的设置中，“小”和“大”都被创建了......

另外，我想切换缩略图设置。例如，case1：如果原始文件是 250x250，则“小”和“大”缩略图都被创建。case2 ：如果原始文件是 250x250，则只创建“小”缩略图。

我想动态切换case1和case2。

你有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:47:23.843

对于您问题的第一部分：如果原始文件太小，回形针不会创建缩略图，您指定回形针仅在大于您指定的尺寸时才调整图像大小。这是由 > 后缀完成的

关于你问题的第二部分：

您必须自己动手 - 检查回形针处理器的工作原理

这是写在回形针文档 [1] 中的内容

Paperclip 支持可扩展的后处理器选择。当您为附件定义一组样式时，默认情况下，这些“样式”实际上是“缩略图”。但是，您可以做的不仅仅是缩略图。**通过定义 Paperclip::Processor 的子类，您可以对附加的文件执行任何您想要的处理**。Rails 应用程序的 lib/paperclip_processors 目录中的任何文件都会由回形针自动加载，让您可以轻松定义自定义处理器。您可以使用 has_attached_file 的 :processors 选项指定处理器：

has_attached_file :scan, :styles => { :text => { :quality => :better } }, :processors => [:ocr]

这将加载假设的类 Paperclip::Ocr，它将散列“{ :quality => :better }”与上传的文件一起传递给它。有关定义处理器的更多信息，请参阅 Paperclip::Proc

[1] [https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)

# android - 这个用于发布 webService 的主体的名称是什么

> ID：10593541
> 
> 赞同：0
> 
> 时间：2012-05-15T02:45:31.623
> 
> 标签：android, iphone, ios, web-services

我在 [iOS 到服务器] 之前发送了 json 请求，

现在我必须使用这个正文向服务器发送一个发布请求：

```
---------------------------acebdf13572468
Content-Disposition: form-data; name="name"

testabc
---------------------------acebdf13572468
Content-Disposition: form-data; name="date"

2001-12-1
---------------------------acebdf13572468
Content-Disposition: form-data; name="profession"

bbbb
---------------------------acebdf13572468
Content-Disposition: form-data; name="address"

adfasfasf
---------------------------acebdf13572468
Content-Disposition: form-data; name="state"

NSW
---------------------------acebdf13572468
Content-Disposition: form-data; name="country"

Australia
---------------------------acebdf13572468
Content-Disposition: form-data; name="postcode"

1111
---------------------------acebdf13572468
Content-Disposition: form-data; name="quantity"

0
---------------------------acebdf13572468
Content-Disposition: form-data; name="expirydate"

2012-1-1
---------------------------acebdf13572468
Content-Disposition: form-data; name="batchnum"

aaaa
---------------------------acebdf13572468
Content-Disposition: form-data; name="product"

test product
---------------------------acebdf13572468
Content-Disposition: form-data; name="quantity"

3
---------------------------acebdf13572468
Content-Disposition: form-data; name="expirydate"

2012-4-1
---------------------------acebdf13572468
Content-Disposition: form-data; name="batchnum"

aaaa-2
---------------------------acebdf13572468
Content-Disposition: form-data; name="product"

test product -2
---------------------------acebdf13572468
Content-Disposition: form-data; name="territory"

A112
---------------------------acebdf13572468
Content-Disposition: form-data; name="territorymanager"

murtaza
---------------------------acebdf13572468
Content-Disposition: form-data; name="fieldNameHere"; filename="rogz.jpg"
Content-Type: image/jpeg

<@INCLUDE *C:\Users\vincent.yang\Pictures\rogz.jpg*@>
---------------------------acebdf13572468-- 
```

这个标题：

```
Content-Type: multipart/form-data; boundary=-------------------------acebdf13572468
User-Agent: Fiddler
Host: nutr.orcha.net
Content-Length: 12160 
```

那么问题来了：这种帖子主体叫什么名字？

不是 json offcourse，但它会是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T03:08:25.807

[http://en.wikipedia.org/wiki/MIME](http://en.wikipedia.org/wiki/MIME)

Mime 只是组织数据的另一种标准。

# json - 在单元测试中打印 Jersey JSON

> ID：10593543
> 
> 赞同：6
> 
> 时间：2012-05-15T02:46:06.177
> 
> 标签：json, jaxb, jersey

有没有简单的方法

*   打印 JAXB 注释的实例
*   JSON 格式（正如球衣将在 AS 中打印一样）
*   在运行单元测试时
*   没有启动任何嵌入式服务器？

我可以使用 JAXBContext、Marshaller 等在 XML 中运行和查看。

JSON有什么例子吗？

* * *

我找到了。它类似于 JAXB。

使用[泽西 API](http://jersey.java.net/nonav/apidocs/latest/jersey/index.html)

```
final JSONJAXBContext context = new JSONJAXBContext(...);

final JSONMarshaller marshaller = context.createJSONMarshaller();
marshaller.marshallToJSON(...);

final JSONUnmarshaller unmarshaller = context.createJSONUnmarshaller();
final T unmarshalled = unmarshaller.unmarshalJAXBElementFromJSON(
        ..., T.class).getValue(); 
```

* * *

为 Maven

```
<dependency>
  <groupId>com.sun.jersey</groupId>
  <artifactId>jersey-json</artifactId>
  <scope>test</scope>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T14:25:25.580

有可能的：

```
...
StringWriter writer = new StringWriter();
marshaller.marshallToJSON(objectToMarshall, writer)
logger.debug(writer.toString());
... 
```

您可以使用 an`StringWriter`来`String`表示编组的 JSON 输出。

# java - 我在哪里可以找到一些关于 google adwords 的例子？

> ID：10593544
> 
> 赞同：1
> 
> 时间：2012-05-15T02:46:10.710
> 
> 标签：java, google-ads-api

现在我正在做一个关于 google adwords 的项目。我尝试按照[教程页面](https://developers.google.com/adwords/api/docs/first-request)上的步骤进行操作。我已经添加了依赖项

```
 <dependency>
        <groupId>com.google.api-ads</groupId>
        <artifactId>ads-lib</artifactId>
        <version>RELEASE</version>
    </dependency>
    <dependency>
        <groupId>com.google.api-ads</groupId>
        <artifactId>adwords-axis</artifactId>
        <version>RELEASE</version>
    </dependency> 
```

到 pox.xml 文件中，这些客户端库位于 .m2 存储库中。但是当我尝试以下代码时：

```
 AdWordsUser user = new AdWordsUser(); 
```

找不到类 AdWordsUser。加入公会后为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:35:24.797

您正在使用新的 java 库，教程页面未涵盖该库。

[wiki 页面](http://code.google.com/p/google-api-ads-java/wiki/MigrationGuide)有更多详细信息，但基本上您将通过构建器构建 AdWordsSession。

# c# - 为什么没有为这个未使用的变量发出警告？

> ID：10593547
> 
> 赞同：19
> 
> 时间：2012-05-15T02:46:55.710
> 
> 标签：c#, visual-studio, warnings, monodevelop

在 Windows 上的 VS2010、VS2008 或 MonoDevelop 中编译以下程序时，我收到警告[CS0219](http://msdn.microsoft.com/en-us/library/4kycwe2x%28VS.71%29.aspx)，“变量 'y' 已分配，但它的值从未使用过”。

```
namespace Problem
{
    public class Program
    {        
        private static void Main(string[] args)
        {
            object x = new object();
            int y = 0;
        }
    }
} 
```

`x`为什么在 Visual Studio 中编译时没有警告？

有趣的是，在 Mac OS X 上的 MonoDevelop 中编译时`x` *，* 我确实收到了 CS0219 警告。`y`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-17T02:10:40.323

事实证明，当赋值操作的右侧不是编译时常量时，会抑制此警告。

微软的 Visual Studio 反馈网站上一篇已被删除的帖子解释说，这是因为他们收到了很多来自纯粹分配变量的人的抱怨，以便他们可以看到在调试期间返回的方法调用，并发现警告令人恼火：

> 在这种情况下，抑制“已分配但从未使用”警告的动机是来自执行此操作的用户的反馈：
> 
> ```
> int Blah(){
>     // blah
>     BlahBlah(x, y, z)
>     // blah
>     // blah
> } 
> ```
> 
> “嘿，”用户在调试时说，“我想知道 BlahBlah 返回的是什么？” 但是在调试器中检查返回值并没有简单的方法，所以用户经常这样做：
> 
> ```
> int Blah()
> {
>     // blah
>     int temp = BlahBlah(x, y, z)
>     // blah
>     // blah
> } 
> ```
> 
> 然后使用当地人或观察窗口检查温度。temp 从未在函数的其他任何地方使用过，因此它产生了一个恼人的“已分配但未读取”警告。

我认为这有点遗憾，因为：

1.  我实际上发现这些警告在 MonoDevelop 中给出时很有帮助。
2.  任何人都可以自己压制警告（诚然，他们也会压制未使用的编译时常量分配的警告——也许应该有一个单独的警告？）。

无论如何，我明白你不可能取悦所有人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T02:52:37.400

我可以离开这里，但我认为这是因为 y 仅设置，而 x 被实例化为非平凡的东西 - 实例化可能涉及 New() 方法中的单独操作，并且由于实例化变量可能会产生副作用，它不被认为是未使用的。在您的情况下，它只是一个基本对象（），所以没有影响，但也许编译器不够聪明，无法区分。

另一方面，使用 y 时，实例化没有副作用，因此它被视为未使用 - 如果完全删除，应用程序的代码路径将保持不变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T02:52:57.767

我的预感是，作为`x`引用类型，编译器不会显示任何警告，因为构造函数可能正在执行一些可能非常“有意义”的操作；相反，`y`作为一个值类型，它的值只被分配但从不使用，编译器很容易告诉你，如果你不打算引用它，那么这样做是没有意义的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T04:12:55.103

ReSharper 还会警告您 x 未使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T04:38:01.900

可能是因为它`x`是一个引用类型，因此存储在堆上，它会阻止该对象的垃圾收集，直到`x`超出范围。

例如：

```
void main(string[] args)
{
    object x = new object();
    while (true)
    {
        // Some threading stuff
        // x is never garbage collected
    }
} 
```

对比：

```
void main(string[] args)
{
    new object();
    while (true)
    {
        // Some threading stuff
        // The unreferenced object IS garbage collected
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-27T14:38:08.807

y 在堆栈上，x 在堆上（提示：x 使用 new 关键字）。因此，一些调试器/编译器警告可能会考虑将诸如 x 之类的堆/全局变量留给程序员来担心，因为低级代码或调试探针可能在幕后使用它们。但是像 y 这样的堆栈变量完全在编译器的控制之下，并且能够很容易地检测到未使用的冗余变量。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-15T02:55:13.430

Eclipse 将考虑未使用的情况。

# python - 如何从谷歌应用引擎开发应用服务器批量下载

> ID：10593549
> 
> 赞同：1
> 
> 时间：2012-05-15T02:47:19.577
> 
> 标签：python, google-app-engine

在线文档暗示可以从开发服务器下载数据（一次只能下载一种：

> 下载所有类型的所有实体仅适用于 App Engine，不适用于开发服务器。

url 开关是否应该以 localhost 作为参数传递？我已经搜索并继续搜索，但找不到任何示例。

```
 appcfg.py download_data --application=<your_app_id> --kind=<kind>
    --url=http://your_app_id.appspot.com/[remote_api_path]
    --filename=<data-filename> 
```

我已添加到 app.yaml 中：

```
 builtins:
    - remote_api: on 
```

如果您启用了内置的 remote_api，那么 remote_api_path 是什么？

我希望有人可以提供一个命令行参数的例子，允许批量下载特定类型的数据。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T06:59:01.870

尝试这样的事情：

```
appcfg.py download_data 
    --application=YourAppID --kind=YourKind
    --url=http://localhost:YourPort/_ah/remote_api 
    --filename=YourFileName 
```

# model-view-controller - 搜索表单中的缓存或会话

> ID：10593566
> 
> 赞同：-1
> 
> 时间：2012-05-15T02:49:50.333
> 
> 标签：model-view-controller, caching, search, pagination, kohana

我想缓存从帖子表单中收集的搜索条件。就像年龄 > 20 或性别是男性一样。然后，如果我使用分页，当我单击下一页时，我可以很快得到搜索。但我对在 php mvc 框架 kohana 3.2 中工作感到困惑。谁能给我一个demo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:45:00.530

看看`Session`类：

```
Session::instance()->set($key, $value);

$value = Session::instance()->get($key);
if ($value) {
    // do something with the value
} 
```

# javascript - Jquery Marquee 的动态内容 - 动态宽度也是？

> ID：10593568
> 
> 赞同：0
> 
> 时间：2012-05-15T02:50:15.470
> 
> 标签：javascript, jquery, width, marquee

我正在将数据库中的动态内容添加到我在网上找到的字幕中。问题是 - 内容长度变化很大，脚本需要一组静态宽度才能正常工作。我要么需要找出一种在拉取内容时生成宽度的方法，要么让脚本自动为项目生成宽度。实际上，这是我在这里找到的一个非常中肯的脚本。这是一个[JSFiddle](http://jsfiddle.net/NYQEL/4/)，看看它是如何工作的。

对于那些不喜欢 JSFiddle 的人，这里有一些简单的 html/css

```
<h1>This runs differently than the ticker for some reason. It's highly annoying in my personal opinion.</h1>
<div id="ticker">    
    <div class="event">test1</div>
    <div class="event">This is Test 2</div>
    <div class="event">test3</div>
    <div class="event">This is test number 4</div>
</div>​ 
```

css

```
.event{float: left;}
/* Add width and it will run, sorta fine
.event{width:100px;}
*/ 
```

​</p>

jQuery

```
(function($) {
        $.fn.textWidth = function(){
            return $(this).width();
        };

        $.fn.marquee = function(args) {
            var that = $(this);
            var $textWidth = that.textWidth(),
                offset = that.width(),
                width = offset,
                css = {
                    'text-indent' : that.css('text-indent'),
                    'overflow' : that.css('overflow'), 
                    'white-space' : that.css('white-space')
                },
                marqueeCss = {
                    'text-indent' : width,
                    'overflow' : 'hidden',
                    'white-space' : 'nowrap'
                },
                args = $.extend(true, { count: -1, speed: 1e1, leftToRight: false }, args),
                i = 0,
                stop = $textWidth*-1,
                dfd = $.Deferred();
            function go() {
                if (that.data('isStopped') != 1)
                {
                if(!that.length) return dfd.reject();
                if(width == stop) {
                    i++;
                    if(i == args.count) {
                        that.css(css);
                        return dfd.resolve();
                    }
                    if(args.leftToRight) {
                        width = $textWidth*-1;
                    } else {
                        width = offset;
                    }
                }
                that.css('text-indent', width + 'px');
                if(args.leftToRight) {
                    width++;
                } else {
                    width--;
                }
            }

                setTimeout(go, 10);
            };
            if(args.leftToRight) {
                width = $textWidth*-1;
                width++;
                stop = offset;
            } else {
                width--;            
            }
            that.css(marqueeCss);
            that.data('isStopped', 0);
            that.bind('mouseover', function() { $(this).data('isStopped', 1); }).bind('mouseout', function() { $(this).data('isStopped', 0); });
            go();
            return dfd.promise();
        };        
    })(jQuery);
        $('h1').marquee();
        $('#ticker').marquee();​ 
```

我想到的第一件事是在生成选取框之前获取每个列表项的宽度，并将宽度内联。我不知道该怎么做，在玩了一段时间后我放弃了。[这是它所在网站](http://www.multitudegaming.net/joom1/)的链接- 通过 ajax 添加内容。选框位于顶部。稍后我会删除链接。关于我应该做什么的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:24:20.303

只是一个想法，我没有看到您添加动态部分的代码，但它们必须在`<div>`标签内吗？你可以`.append()`改用吗？

就像是：

```
$('#ticker').append(response.data); //or whatever the variable would be 
```

所以基本上它只是将文本添加到该 div 而不是单独的 div。在添加所有数据之前，您可能不需要开始滚动，以便选取框插件补偿新添加的文本。

或者

以下是一些您可以使用的代码来解决您的初始问题：

将此函数添加到您的代码中：

```
$.fn.textWidthTrue = function(){
  var html_org = $(this).html();
  var html_calc = '<span>' + html_org + '</span>';
  $(this).html(html_calc);
  var width = $(this).find('span:first').width();
  $(this).html(html_org);
  return width;
}; 
```

如此处所示：[计算文本宽度](https://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery)

然后添加这个：

```
$('#ticker').find('.event').each(function(i){ // set the width correctly 
   $(this).width($(this).textWidthTrue());
}); 
```

JSFiddle：http: [//jsfiddle.net/NYQEL/12/](http://jsfiddle.net/NYQEL/12/)

# ruby - 如何使 ruby 块返回块中的变量数组？

> ID：10593570
> 
> 赞同：4
> 
> 时间：2012-05-15T02:50:54.503
> 
> 标签：ruby, block

在红宝石块中：

```
user.trips.each { |trip| trip.pickedpost.user } 
```

如何使代码返回一组用户？

如果我运行块

```
user.trips.each { |trip| puts trip.pickedpost.user } 
```

irb 节目

```
#<User:0x007fd1ab9e2148>
#<User:0x007fd1aacf3dd8>
 => [#<Trip id: 18, pickedpost_id: 25, volunteer_id: 33, created_at: "2012-05-14 23:28:36",    updated_at: "2012-05-14 23:28:36">, #<Trip id: 20, pickedpost_id: 20, volunteer_id: 33, created_at: "2012-05-15 00:12:39", updated_at: "2012-05-15 00:12:39">] 
```

该块返回一个行程对象数组，这不是我想要的。

如何使块返回用户数组？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:53:18.637

看起来你想要的是[`.collect()`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-collect)它：

```
user.trips.collect { |trip| trip.pickedpost.user } 
```

或使用`.map()`

```
user.trips.map(&:pickedpost).map(&:user) 
```

# http - HTTP 请求格式

> ID：10593573
> 
> 赞同：2
> 
> 时间：2012-05-15T02:51:56.920
> 
> 标签：http, http-headers, rfc

我从 RFC2616 第 14.23 节读到：

```
 Host = "Host" ":" host [ ":" port ] ; Section 3.2.2 
```

但例子是：

```
 GET /pub/WWW/ HTTP/1.1
   Host: www.w3.org 
```

为什么“：”和url之间有一个空格，我使用firebug和chrome检查元素，发现http头中的所有请求，键和值之间，有一个空格。根据 RFC，没有。这要怎么解释？空间是必要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:59:56.983

根据 HTTP/1.1 RFC，冒号和字段值之间的空格不是必需的，但是最好使用单个空格。冒号和第一个非空白字符之间的任何空格都不包含在字段值中。在第 4.2 节中阅读：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec4.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html)

# ios - 在 iOS 中保持树状结构的最佳方法是什么？

> ID：10593574
> 
> 赞同：0
> 
> 时间：2012-05-15T02:51:59.333
> 
> 标签：ios, tree, persistence, tree-structure

一位客户向我提供了一些树状结构的数据。它只是由是/否问题组成。结尾结果是相对较小的字符串（少于 100 个字符），但一些结尾结果以包含格式的大字符串结尾（制表符、换行符等）。

对于不同的系统，还有不止一个树状结构，所以我需要一种方法来识别它们。我目前只是将所有这些数据解析到一个 json 文件中，但保持大结果的格式往往有点乏味。iOS 5 中的 JSONSerialization 在格式化字符串方面非常挑剔。

无论如何，这是一个例子：

```
"Skin Assessment":{
    "ID" : "1",
    "Questions":[
                 "Have you completed a skin assessment?",
                 "Does your assessment include Colour, Temperature, Texture, & Turgor?",
                 "Were findings within expected range?"
                 ],
    "Answers":[
               {
               "YES":"",
               "NO":"You must complete the skin assessment prior to documenting your findings."
               },
               {
               "YES":"",
               "NO":"You must complete the skin assessment prior to documenting findings."
               },
               {
               "YES":"Document Colour as: \n\t- Consistent with genetic background\n\t- Pink\n\t- Pale\n\t- mottled\n\t- Cyanotic\n\t- Jaundiced\n\t- Flushed\n\nDocument Temperature/moisture as:\n\t- Warm, dry, intact \n\t- Cool\n\t- Clammy\n\t- Diaphoretic\n\nDocument Texture as:\n\t- Smooth\n\t- Rough \n\t- Dry\n\t- Moist\n\t- Scaly\n\t- Thick or Thin\n\t- Eczema (note colour)\n\t- Lesions (this will require extra documentation such as size, elevation, shape, colour, symmetry) \n\t- Wounds (this will require further documentation such as size, shape, discharge/drainage, dressing)\n\nDocument Turgor as:\n\t- Easily rises\n\t- Immediate return\n\t- Tenting?\n"
               }
               ]
} 
```

# html - 列未完全跨越三列表

> ID：10593575
> 
> 赞同：1
> 
> 时间：2012-05-15T02:52:07.450
> 
> 标签：html, css, html-table, tablelayout

我是 html 的新手，所以我确定这是一个基本问题。

我有一个三列的表。我希望第一列跨越表格宽度的 40%，第二列 30%，第三列 30%。我将整个表放在一个 div 中。但是这些列没有跨越整个表：

![在此处输入图像描述](../Images/cd2ffc8886af72a98555c1af25f67277.png)

这是我的html：

```
<div class="TableWrap">
    <table id="PowerPlantTable" border="1">

        <thead>
            <tr bgcolor="silver">
                <th class="firstColumn">Power Plant</th>
                <th class="secondColumn">MW Output</th>
                <th class="thirdColumn">MW Capacity</th>
            </tr>  
        </thead>

        <tbody>
            <tr>
                <td>BRUCEA-G2</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </tbody>
    </table>
</div> 
```

这是我的CSS：

```
.TableWrap{
    margin: 15px;
    text-align: center;
}

#PowerPlantTable{
    display:block;
    margin-left: auto;   
    margin-right: auto;
    font-size:12.0px;
}

.firstColumn{
   width:40%;
}

.secondColumn{
    width:30%;
}

.thirdColumn{
    width:30%;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:05:04.507

`display:block`从#PowerPlantTable 中删除。

表是默认的`display:table`。

# php - 在 PHP 中将 DateTime 字符串转换为不同的时区

> ID：10593576
> 
> 赞同：5
> 
> 时间：2012-05-15T02:52:26.690
> 
> 标签：php, datetime, timezone

好的，我有以下代码

```
$from = "Asia/Manila";
$to = "UTC";
$org_time = new DateTime("2012-05-15 10:50:00");
$org_time = $org_time->format("Y-m-d H:i:s");
$conv_time = NULL;

$userTimezone = new DateTimeZone($from);
$gmtTimezone = new DateTimeZone($to);
$myDateTime = new DateTime($org_time, $gmtTimezone);
$offset = $userTimezone->getOffset($myDateTime);
$conv_time = date('Y-m-d H:i:s', $myDateTime->format('U') + $offset);
echo $conv_time; 
```

使用此代码，我想转换`2012-05-15 10:50:00`为 UTC 和 -8 时区（我使用的是美国/温哥华），但它给了我一个奇怪的结果

> ```
> Asia/Manila > UTC  
> 2012-05-15 19:50:00 = the correct is 2012-05-15 02:50 
> ```

对于美国/温哥华

```
Asia/Manila > America/Vancouver 
2012-05-16 02:50:00 = the correct is 2012-05-14 19:50 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T03:17:23.483

你让事情变得太难了。要在时区之间进行转换，您需要做的就是创建一个`DateTime`具有正确源时区的对象，然后通过`setTimeZone()`.

```
$src_dt = '2012-05-15 10:50:00';
$src_tz =  new DateTimeZone('Asia/Manila');
$dest_tz = new DateTimeZone('America/Vancouver');

$dt = new DateTime($src_dt, $src_tz);
$dt->setTimeZone($dest_tz);

$dest_dt = $dt->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T03:23:09.657

不要用getOffset自己计算，应该用[setTimezone](http://php.net/manual/en/datetime.settimezone.php)来显示

```
<?php
function conv($fromTime, $fromTimezone, $toTimezone) {

    $from = new DateTimeZone($fromTimezone);
    $to = new DateTimeZone($toTimezone);

    $orgTime = new DateTime($fromTime, $from);
    $toTime = new DateTime($orgTime->format("c"));
    $toTime->setTimezone($to);
    return $toTime;
}

$toTime = conv("2012-05-15 10:50:00", "Asia/Manila", "UTC");
echo $toTime->format("Y-m-d H:i:s");

// you can get 2012-05-15 02:50:00

echo "\n";

$toTime = conv("2012-05-16 02:50:00", "Asia/Manila", "America/Vancouver");
echo $toTime->format("Y-m-d H:i:s");

// you can get 2012-05-15 11:50:00

echo "\n"; 
```

格式 "Ymd H:i:s" 将使用当前本地时区（来自 php.ini 或您的 ini_set），要显示时区，您可以使用格式 "c" 或 "r"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T02:56:16.843

快速浏览一下结果，您似乎需要减去偏移量而不是将其添加给我。这是有道理的：假设您在 GMT-5 并且您想将您的时间转换为 GMT。您不会减去 5 小时（时间 + 偏移量），而是会增加 5 小时（时间 - 偏移量）。诚然，我很累，所以我可能会倒退。

# java - 数组列表 > 到字符串[][]

> ID：10593577
> 
> 赞同：3
> 
> 时间：2012-05-15T02:52:35.047
> 
> 标签：java, swing, jtable

它看起来像`JTable`构造喜欢`String[][]`......但我喜欢使用更智能的容器，直到我不得不使用其他东西。一直在使用`ArrayList<ArrayList<String>>`，现在我需要让我`JTable`满意`String[][]`。

我找到了一种将 an 转换`ArrayList<String>`为`String[]`using的真正简单方法`toArray()`，但没有找到用于多维数组的简单转换器。

我想以最少的行数从`ArrayList<ArrayList<String>>`到。`String[][]`

我一直在搜索图书馆，似乎找不到这个转换器，希望有人能为此提出一个好的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T03:06:15.413

`ArrayList<ArrayList<String>>`在内存中不连续。也就是说，第二个数组列表存储了对`ArrayList<String>`s 的引用数组，并且在每个 ArrayLists 中，可能有一个数组大于您放入其中的项目数量。

所以唯一真正的方法是通过迭代：

```
ArrayList<ArrayList<String>> data;

//...

String[][] converted = new String[data.size()][];
for (int i = 0; i < converted.length; i++)
    converted[i] = data.get(i).toArray(new String[data.get(i).size()]); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T03:18:23.010

你可能想看看实现你自己的表模型： [JTable(TableModel dm)](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#JTable%28javax.swing.table.TableModel%29)

您可以创建一个扩展 AbstractTableModel 并委托给 List 或任何其他合适的数据结构的类。

# php - 选择的选项总是落入第一个值，莫名其妙

> ID：10593586
> 
> 赞同：2
> 
> 时间：2012-05-15T02:53:43.453
> 
> 标签：php, html, optional-parameters

```
echo "<td>Language</td>";
echo "<td><select id='language' name='language'>
            <option value=''>Select...</option>
            <option value='en_US'>English(US)</option>
            <option value='en_AU'>English(AU)</option>
            <option value='en_US'>English(UK)</option>
          </select>
      </td>"; 
```

我将该代码片段包含在表单中以发布 php 文件，当我选择提交表单时，我可以看到这些选项。但是，在我单击按钮保存我选择的内容后，无论如何，上面的语言总是设置为第一个选项（en_US）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:56:13.677

您需要检查您上次提交的值以确定哪个选项应该接收该`selected`属性。您目前没有这样做，因此浏览器将第一个选项设置为选定的选项。

```
// Define all languages
$l = array('en_US'=>'English(US)','en_AU'=>'English(AU)','en_UK'=>'English(UK)');

// Prepare an options variable
$o = "";

// Construct our options list
foreach ( $l as $k => $v )
  $o .= sprintf("<option value='%s'%s>%s</option>", 
          $k, $k === $_POST["language"] ? " selected" : "", $v);

// Echo our Select menu
echo "<select id='language' name='language'>$o</select>"; 
```

演示：[http ://codepad.org/PkwNYHbO](http://codepad.org/PkwNYHbO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:02:13.730

```
$selected = $_POST["language"];

echo "<td><select id='language' name='language'>
            <option value='' ".($selected==""?"selected":"").">Select...</option>
            <option value='en_US' ".($selected=="en_US"?"selected":"").">English(US)</option>
            <option value='en_AU' ".($selected=="en_AU"?"selected":"").">English(AU)</option>
            <option value='en_US' ".($selected=="en_US"?"selected":"").">English(UK)</option>
          </select>
      </td>"; 
```

我通常会做这样的事情。第一部分获取发送到服务器的语言值，然后检查每个选项是否具有相同的值，然后将“选定”放入具有相同值的元素。

万一，`($selected=="en_US"?"selected":"")`意味着，如果当前选择的语言是“en_US”，“selected”将作为它的属性连接到标签，从而给出输出：

```
<option value='en_US' selected>English(US)</option> 
```

或者你可以做乔纳森的解决方案，它更优雅。

# c# - Java版c#Array.Copy(Array sourceArray, int sourceIndex, Array destinationArray, int destinationIndex, int length)

> ID：10593588
> 
> 赞同：6
> 
> 时间：2012-05-15T02:54:23.737
> 
> 标签：c#, java, arrays

我正在尝试将一些 C# 代码转换为 Java，我遇到了调用此方法的一行：

```
Array.Copy(
    frames[row],
    0,
    concatenated,
    row*frames[row].Length,
    frames[row].Length); 
```

C# 方法的签名如下所示：

```
Array.Copy(
    Array sourceArray,
    int sourceIndex,
    Array destinationArray,
    int destinationIndex,
    int length) 
```

我试图找到在 Java 中做同样事情的方法，但没有运气。如何在 Java 中模仿相同的行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T03:02:13.010

你试过`System.arraycopy()`吗？

例子：

```
 char[] copyFrom = { 'd', 'e', 'c', 'a', 'f', 'f', 'e', 'i', 'n', 'a', 't', 'e', 'd' };
 char[] copyTo = new char[10];

 System.arraycopy(copyFrom, 1, copyTo, 2, 8);
 System.out.println(new String(copyTo)); 
```

输出将是：

```
 ecaffein 
```

# java - 为什么在尝试编写 catch 时应该有可能抛出异常是强制性的？

> ID：10593589
> 
> 赞同：3
> 
> 时间：2012-05-15T02:54:42.710
> 
> 标签：java, exception, exception-handling, language-design

我正在玩一些异常程序，遇到了一些我以前从未遇到过的东西。

```
import java.io.*;

class ExceptionTest
{
  public static void main(String[] args)
  {
    try
    {
      System.out.println("hello");
    }
    catch(IOException ioe)
    {
      System.err.println("ioexception was thrown!!");
    }
  }
} 
```

这会引发编译器错误：

```
ExceptionTest.java:10: exception java.io.IOException is never thrown in body of
corresponding try statement
catch(IOException ioe)
^
1 error 
```

我的问题是为什么会这样？

为什么编译器会担心一段它肯定永远不会到达的代码。它可能只是一个警告，而不是一个完整的错误。毕竟，我们可能希望保留 catch 块作为我们将来可能进行的一些更改的备份，或者程序员可能只是在一些编辑后忘记将其删除。

我知道我知道它可以使我们免于不必要的击键等。但是它不应该过多地打扰编译器来引发错误。还是有其他原因？？

代码中的 IOException catch 块也会产生编译器错误，但 Exception catch 块不会......为什么会这样？提前谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T03:09:08.880

因为 Java 设计者认为系统应该以这种方式提供帮助。情况与此相同：

```
public class EarlyReturn {
    public void foo() {

        return;

        System.out.println("Hi");
    }
} 
```

...这也会导致编译时错误。永远不会运行的代码是一件坏事，编译器通过让我们知道它永远不会运行来帮助我们，设计者认为它应该是错误而不是警告。

你可以改变你的代码来捕获`Exception`而不是`IOException`你喜欢，但是虽然这会让编译器让你这样做，但你仍然有永远不会运行的代码（这又是一件坏事）。

> 代码中的catch块也会`IOException`产生编译器错误，但`Exception`catch块不会……这是为什么？

`IOException`是一个已*检查*的异常，并且只有已检查的异常才会以这种方式进行检查（这就是它们被称为的原因）。有已*检查异常*、*未检查异常*（`RuntimeException`及其子类）和*错误*（`Error`及其子类）。从技术上讲，检查的异常是所有不是未经检查的异常或错误的异常（[JLS 的第 11.1.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.1)），但是——这有点暗角——并不是*所有*的检查的异常都经过检查。具体来说，检查异常会被检查*，除非*它们是`Exception`或它的*超*类。从[JLS 的第 11.2.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.2.3)：

> 如果`catch`子句可以捕获已检查的异常类，并且与该子句对应的块不能抛出作为 的子类或超类的已检查的异常类，除非是或 的超类，则这是编译时错误。`E[1]``try``catch``E[1]``E[1]``Exception``Exception`

第 11 节的全部内容可能值得一读。正如您可以猜到的，这是 Java 的一部分，在早期发生了相当大的演变，导致对检查内容的定义有些复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T03:10:11.263

答案与更一般的问题相同：“为什么编译器将无法访问的代码视为错误？”。

1.  JLS 要求这样做 - 请参阅[JLS 14.21](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)。请注意，用于检测不可达代码的 JLS 规则专门涵盖了`catch`无法抛出异常的情况。
2.  将无法访问的代码视为编译错误可以消除程序员所犯的一整类错误。这*就是*JLS 要求这样做的原因。

关于第二点，考虑一下：

```
try {
     System.out.println("Guards!! Someone is stealing the crown jewels!");
} catch(IOException ioe) {
     CallTheArmy();
} 
```

写这篇文章的人可能会认为，如果我们不能提醒警卫（由于 IOException），那么军队就会被召唤。事实上，这不会发生，因为它`println`会默默地吃掉 IOException。

在这种情况下，您会很高兴编译器通过编译错误告诉您该问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T03:13:33.310

Java 编译器不喜欢无法访问的代码。( [JLS 14.21](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21 "JLS 14.21") ) 如果程序员忘记删除`try ... catch`块，那么这个错误将使他删除它。如果您将来进行可能引发的更改，`IOException`那么编译器会告诉您`try ... catch`再次包含该块。删除不必要的块当然不会损害代码，并且很可能更容易阅读。

编辑以反映已编辑的问题：“代码中的 IOException catch 块也会产生编译器错误，但 Exception catch 块不会......为什么会这样？？提前谢谢！！”

异常捕获块更通用。它将捕获任何类型的异常（例如，包括[RuntimeException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/RuntimeException.html) s），因此如果 a`RuntimeException`被抛出，它是可访问的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T03:06:21.577

因为`IOException`不是`RuntimeException`，所以只有当里面的代码块`try ... catch`有任何声明 throws 的方法时才应该被捕获`IOException`。

原因是：为了避免程序员的错误。:) 与以下情况相同：您在方法中返回一个值，并且在return语句之后，您有一行永远不会到达的代码，这种情况总是程序员的错误。

thagorn的详细解释：这是真的。RuntimeException 是“在 Java 虚拟机正常运行期间可以抛出的那些异常的超类”。（JavaDocs）。您的编译器知道没有办法用您的代码抛出 IOException，因为它不是 RuntimeException 并且没有明确地在任何地方抛出。

# jquery - 基于当前url的jquery活动类到菜单项

> ID：10593591
> 
> 赞同：3
> 
> 时间：2012-05-15T02:54:46.260
> 
> 标签：jquery

如果菜单项 url == 当前 url，我有以下代码应该向菜单项添加一个活动的 css 类：

```
$("#accordion a").each(function() 
{   
    if (this.href.search(window.location.hostname) != -1)
    {
        $(this).addClass("active-sidebar-link");
    }
}); 
```

但这会将类添加到所有菜单项中。有小费吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T03:00:51.473

试试这个：

```
$("#accordion a").each(function() {   
    if (this.href == window.location.href) {
        $(this).addClass("active-sidebar-link");
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T03:54:09.877

```
$('#accordion a[href="'+ window.location.hostname +'"]').addClass('active-sidebar-link'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T04:07:54.500

如果你想用 jQuery 做到这一点，你可以：

```
$("#accordion a").addClass(function(){
  return this.href === window.location 
    ? "active-sidebar-link" 
    : "" ;
}); 
```

但是，有一种更好的方式来设置当前页面链接的样式。这通常涉及给`body`元素一个与您的链接相对应的类名：

```
<body class="home">
   <a class="home" href="foo.html">Home</a>
   <a class="contact" href="bar.html">Contact</a>
</body> 
```

在这种情况下，您将像这样选择活动链接样式：

```
body.home a.home,
body.contact a.contact {
  color: green;
} 
```

这种方法不需要 JavaScript 来设置初始样式，这总是好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T04:45:09.520

使用过滤功能：

```
$("#accordion a")
.filter(function(){ 
    return location.href.match($(this).attr("href"))
})
.addClass("active-sidebar-link"); 
```

仅返回过滤后的元素，在这种情况下将是与当前 URL 的链接并将类添加`active-sidebar-link`到其中。

# java - 除了必须计算的值之外，还有一个附加条件的动态规划问题

> ID：10593595
> 
> 赞同：2
> 
> 时间：2012-05-15T02:55:31.050
> 
> 标签：java, dynamic-programming, graph-algorithm, shortest-path, dijkstra

假设我有一个加权图，其中权重代表距离（以英里为单位）。我要找到从某个顶点 S 到某个顶点 T 的最短路径。此外，假设每个顶点都有相关的货币成本。现在，一开始我有 $M（即 M 美元）。我的工作是在不产生任何债务的情况下找到最短路径。

我的尝试：

我使用 Dijkstra 的算法，但我的解决方案仅适用于某些情况，但并非全部。有谁知道如何解决这个问题，所以它可以工作——请不要简单，除非你完全实现它。非常感谢 Java 工作代码。我已经看过[顶级编码器](http://www.topcoder.com/tc?d1=tutorials&d2=dynProg&module=Static)`Upper-Intermediate`上的示例，但我不知道如何实现他们的伪代码。

我尝试了许多不同的代码/方法，但它们都有太多的错误。我的尝试太多，无法发布，仅发布一个没有多大意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T18:07:32.493

你说得对，Dijkstra 的算法只在某些情况下有效，因为它只选择成本较低的边，而你必须验证两个条件的存在：

*   以美元计的路径总成本在美元的预算范围内`M`；
*   里程数最少。

这是一种保证正确但运行速度可能非常慢的方法。你做了两个步骤：

*   找出以美元为单位的所有可能路径，并将它们放入数组或列表中；
*   对于每条路径计算英里数并选择具有最小英里数的路径或路径。

这种方法的问题是生成的列表可能非常大。所以也许有更好的方法来解决这个问题。

# ajax - Twitter @anywhere：以编程方式发布状态？避免嵌入式推文框和 OAuth

> ID：10593599
> 
> 赞同：2
> 
> 时间：2012-05-15T02:56:03.283
> 
> 标签：ajax, twitter, oauth, tweets, twitter-anywhere

很长一段时间 Stack Overflow 都潜伏在这里。我找到了很多解决我的问题的方法，但是花了几天时间研究这个我觉得是时候问了......

我有一个站点，我想在其中执行一个 ajax POST，其中 textarea 的内容作为状态文本。换句话说，我想制作一个使用 @anywhere 而不是 OAuth 进行身份验证的自定义推文框。

我想从头开始编写推文框而不是使用 Twitter 提供的推文框的原因是：

1.  捕获 onclick 事件以执行附加功能（该站点可以被视为 Web 应用程序 - 用户编写的推文应立即与其他推文一起放置在 ul 中）
2.  框的完全可定制性（JQuery 动画、@media 查询等）
3.  百分比宽度 (!!!)

我意识到我可以通过 OAuth 路线实现所有这些 - 但是，@anywhere 协议非常酷，并且以这种方式工作将大大缩短开发时间。

谢谢您的帮助！纳比尔

# ios - xcode ARC 转换错误 [CFString 保留] 崩溃

> ID：10593602
> 
> 赞同：1
> 
> 时间：2012-05-15T02:56:25.057
> 
> 标签：ios, xcode, automatic-ref-counting

我使用 xcode 自动转换将我庞大的 IOS 程序转换为 ARC。之后我收到以下错误：[CFString retain]: message sent to deallocated instance

跟踪显示崩溃的以下行：

```
UIImage *image = [[UIImage alloc] initWithContentsOfFile:tile.imagePath]; 
```

跟踪中的下一行给出：__arclite_objc_retainAutoreleasedReturnValue at /SourceCache/arclite/arclite-7.1/source/arclite.m:241

有人可以建议我在哪里可以看得更远，或者我能做些什么来消除这个崩溃？

非常感谢

编辑：看起来下面代码中的 (NSString *)p 初始化需要一些更改。我应该如何更改它，以使 tile.imagePath 不会变为空？

```
- (id)initWithFrame:(MKMapRect)f path:(NSString *)p{
    if (self = [super init]) {
        imagePath = p;
        frame = f;
    }
    return self;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:33:24.747

`imagePath`可能是`__unsafe_unretained`iVar（或者您可能正在看到`weak`或`assign`）。将其更改为`strong`以便 ARC 保留它。

# php - ORDER BY RAND() 的性能命中？

> ID：10593603
> 
> 赞同：0
> 
> 时间：2012-05-15T02:57:12.647
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL：ORDER BY RAND() 的替代品](https://stackoverflow.com/questions/1823306/mysql-alternatives-to-order-by-rand)

我在 1000~2000 条记录的表中提取了大约 20 个随机行，其中大部分或全部带有 WHERE 子句。这不会增长太多，可能每年150个。

我也最多查看几千个用户，但这个查询是该网站热门区域的一部分。

我真的需要关注 ORDER BY RAND() 的性能损失吗？我听说过所有关于性能问题的恐怖故事，但是当如此小的桌子不断受到打击时，我并没有发现太多。

我不能为此做缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:03:47.800

很容易使用`ORDER BY RAND()`和忘记，但是您必须意识到 MySQL 需要检查每一行，因为`RAND()`它不是恒定的。

检查 1000 行应该不是问题，但请注意随着时间的推移查询性能。如果您只需要一条记录，您可以在这里找到答案：[ORDER BY RAND() 替代](https://stackoverflow.com/questions/1868102/order-by-rand-alternative)

**编辑**

你说你不能做缓存，但即使是一个小的生成 .php 文件也是一个缓存:)

例如，您可以将 ID 列表存储在缓存中；每次插入或删除数据库记录时都会更新它。然后，您使用 PHP 提取 20 个随机 ID 并使用它们来查询数据库（使用例如`IN (4, 7, 10, 45, etc.)`

**更新**

正如 OP 所指出的，如果查询也有条件（即并非表中的每个项目都有资格被选择），则这是不可能的。

# c - ANSI C 中的双向 IPC

> ID：10593604
> 
> 赞同：0
> 
> 时间：2012-05-15T02:57:25.687
> 
> 标签：c, sockets, filesystems, ipc, fuse

我需要在两个进程之间进行双向通信，我尝试使用经典的客户端-服务器连接，其中客户端向服务器发送比特流，但我不知道如何让服务器回复除了破坏套接字并将客户端服务器切换到服务器客户端之外。

仅供参考，这个项目的整个想法是编写一个远程文件系统和一个文件系统客户端，使用 FUSE 与 RFS 交互。在这种情况下，如果我应该向 FUSE 询问 Filesystem Client 中目录的属性，FUSE 应该将目录路径发送到 RFS，RFS 应该用这个目录属性回复。

非常感谢您对此事提出意见、建议和帮助。

非常感谢你！

```
char* receive_variable_stream(int client_desc){         //esta es la mia
char* buff
int buff_size=10;
buff = malloc(buff_size);
buff_size = recv(client_desc,buff,buff_size,MSG_PEEK);
buff = realloc(buff,buff_size);
recv(client_desc,buff,buff_size,MSG_WAITALL);
return buff; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T03:04:32.543

TCP 是一种点对点协议 - 在服务器与`accept`客户端连接之后`connect`，数据可以向任一方向发送（除非一方关闭用于发送或接收的套接字，即使您有单向应用协议）。每一方都简单地使用`write`/`send`和`read`/ `recv`。

至少对于 TCP，“客户端/服务器”简单地描述了主动客户端发起与被动侦听服务器的连接。之后，连接上的通信能力是相同的。客户端通常更简单，但是创建多个同时连接的客户端可能与处理多个客户端的服务器一样复杂。客户端也可能是服务器，甚至“服务器”进程也可以连接回它的一个客户端（恰好也是服务器）。

有大量此类连接的示例代码片段 - 我通常搜索 GNU libc 套接字示例代码，以便让我快速编写基本服务器和客户端（它说明`select()`了多个客户端的基于处理；多线程是另一个有效的替代方案） . 阅读[http://www.gnu.org/software/libc/manual/html_node/Connections.html](http://www.gnu.org/software/libc/manual/html_node/Connections.html)以获取背景信息和示例代码。

编辑：讨论您添加到问题中的代码...

```
int buff_size = 10;
char* buff = malloc(buff_size);
buff_size = recv(client_desc,buff,buff_size,MSG_PEEK);
buff = realloc(buff,buff_size);
recv(client_desc,buff,buff_size,MSG_WAITALL); 
```

第一个`recv()`调用的作用是报告客户端断开连接 [返回值 0] 或发生了其他错误/异常 [-1]，或者等待（如有必要）直到它可以窥视（复制到`buff`而不从流中删除）来自客户端的至少 1 个字节和最多 10 个字节 [返回实际读取的字节数]。

因此，假设您的客户知道他们有一个 N 字节的“逻辑”消息并将其写入连接的末尾。不久之后，他们可能会编写另一个长度为 O 字节的“逻辑”消息。然后你的应用程序被安排在 CPU 上，你的`recv()`逻辑开始运行。peek 可以检索从 1 到 max(10, N + O) 字节的任何地方......所有这些都是完全有效的非错误行为。该数据只是发送的两条消息中的第一个/几个字节。N 和 O 的值不能从“窥视”的字节数（即从`buff_size = recv(...)`）可靠地推断出来。

为了使这更具体，假设第一条消息是“ABCDEFGHIJKLMNOPQRSTUVWXYZ”。您的 peek 可以加载到缓冲区“A”（在这种情况下 buff_size 将设置为 1）、“AB”（2），直到“ABCDEFGHIJ”（10），但是您的程序无法知道还有多少字节在那条消息中。如果您的消息是“ABCD”和“EFGH”，那么您在查看时可能仍然会从“A”到“ABCDEFGH”得到任何信息。

只有几种实用的方法可以让接收方知道需要多少数据：

*   编写`recv()`代码的程序员知道`send()`代码总是发送一些特定数量的字节
*   接收到的数据嵌入了消息中数据量的指示符
    *   它可能有一个“标题”，其中数据的第一位表示总消息长度
    *   知道标头分层多长时间的问题会调用这些相同的选择，但通常决定消息标头可以是固定长度（上面的第一个选择）并且可以使用其他约定之一灵活调整消息主体的大小是很实际的
    *   它可以使用始终表示消息结尾的“分隔符”字符，流行的选择包括换行和/或回车以及 NUL 字符（用于二进制流）

这些设计决策是为服务器和客户端之间的通信创建应用程序级*协议的一部分。*该协议位于 TCP 协议之上。

当你有一个协议时，通常还有`recv()`代码的实现选择。最简单的方法通常是使用 MSG_WAIT_FOR_ALL 接收固定长度的标头，然后使用第二个 MSG_WAIT_FOR_ALL 来检索标头承诺的额外数据字节。正如我之前的评论中提到的，对于非常大的消息，可能存在缓冲问题。

如果您在要发送的消息的前面嵌入一个长度，最简单的方法可能是将其写为一个固定宽度的数字字段，如下所示：

```
const char* p = asprintf("%06d%s", message_length, message_data); 
```

然后检索器可以说：

```
char header[6 + 1];
header[6] = '\0';  // make sure it's NUL terminated as per C ASCIIZ string conventions
if (recv(client_desc,header,sizeof header,MSG_WAITALL) == sizeof header)
{
    int message_size = atoi(header);
    char* buff = malloc(message_size);
    if (recv(client_desc, buff, message_size, MSG_WAITALL) == message_size)
    {
         // use the message in buff...

    }
    else
        fprintf(stderr, "couldn't retrieve all the message body\n");
}
else
     fprintf(stderr, "couldn't retrieve all the message header\n"); 
```

使用这种方法，消息本身可能看起来像“000005hello”或“000011hello world”。计数可以选择性地包括标头中的字节。许多协议使用数字的 2 的补码编码，例如消息长度 - 您可以使用 hton 和 ntoh 来标准化大端和小端机器的异构集合中的字节顺序，就像您可能已经为 TCP 所做的那样结构中的端口号`sockaddr_in`，然后`write(descriptor, &my_32bits, sizeof(my_32bits))`.

# vb.net - 为什么我引用另一个类的方式会改变 .Value 控件的行为？

> ID：10593610
> 
> 赞同：0
> 
> 时间：2012-05-15T02:58:35.417
> 
> 标签：vb.net, visual-studio-2008, class, reference

在我的代码中，我使用了两个类。一个包含 UI 表单，另一个包含写入文件的方法。在编码过程中，我发现了一些我不理解的行为。下面的代码显示（我认为是）相关部分。为简单起见，文件写入部分由 a`MsgBox`代替。

我有以下一种形式的控件：

`NumericUpDown` `Button`

使用以下类和方法：

```
Public Class One
    Private Sub Button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button.Click
        Dim t As New Two
        t.Show()
    End Sub
End Class

Public Class Two
    Public Sub Show()
        Dim o As New One
        MsgBox(o.NumericUpDown.Value)
    End Sub
End Class 
```

现在，当我单击`Button`默认`NumericUpDown.Value`显示时。当我调整此值并再次单击按钮时，旧的默认值会继续显示。

在下面的代码中，我删除了该部分`Dim o as New One`，我只是`One` 用来引用另一个类。所以：

```
Public Class Two
    Public Sub Show()
        MsgBox(One.NumericUpDown.Value)
    End Sub
End Class 
```

现在一切正常。我点击`Button`，默认 `NumericUpDown.Value`显示。我调整数值，点击`Button`，调整数值显示。

分配如何`Dim o as New One`改变这种行为？

这是我使用 vb.net 编码的第一周，所以我可能正在做一些没有意义的事情，但对我有用。我输入实际代码的唯一原因`Dim o as New One`是，我不必每次引用该类时都输入“One”，而只需输入“o”。显然这不是要走的路，但我很想知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:04:16.893

尝试执行此代码：

```
Public Class One
    Private Sub Button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button.Click
        Dim t As New Two
        t.Show(Me)
    End Sub
End Class

Public Class Two
    Public Sub Show(ByVal o As One)
        MsgBox(o.NumericUpDown.Value)
    End Sub
End Class 
```

当您调用时，`Dim o as New One`您正在创建表单的新实例，因此它不会显示当前表单实例的值。

# html - 如何使用css选择器查 找不在一个div内的所有输入？

> ID：10593611
> 
> 赞同：0
> 
> 时间：2012-05-15T02:58:46.400
> 
> 标签：html, css, css-selectors

html代码：

```
<div id="div1">
  <div class="nest">
     <input name="i1"/>
  </div>
  <div>
      <input name="i2"/>
  </div>
  <input name="i3"/>
  <div>
      <input name="i4" />
  </div>
</div> 
```

现在我想用 css 选择器找到所有在里面`#div1`但不在里面的输入，它们是. 这个怎么做？`.nest``i2,i3,i4`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T03:07:30.953

鉴于您的标记，您*应该*能够使用`:not()`子选择器：

```
div:not(.nest) > input 
```

如果您需要将范围限制为`#div1`您可能需要一个稍微复杂的选择器：

```
#div1 > input, #div1 > div:not(.nest) > input 
```

如果您有任意和不受控制的嵌套级别，我不确定您是否能够`:not()`单独使用所有情况。

如果`:not()`由于浏览器支持问题而根本无法使用，那么使用纯 CSS 就不走运了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:00:19.907

最简单的方法是使用子选择器：

```
#div1 > input 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T05:45:52.107

```
#div1 div:nth-child(2) > input, #div1 div:last > input 
```

# node.js - Socket.IO RedisStore 和 xhr-polling

> ID：10593616
> 
> 赞同：4
> 
> 时间：2012-05-15T03:00:10.373
> 
> 标签：node.js, xmlhttprequest, redis, socket.io

我在 heroku 上扩展我的 Node.js 应用程序时遇到问题。我正在使用 RedisStore 使我的套接字连接在节点进程之间保持持久。我正在扩展到 2、3 个进程。我在这里遵循此代码[https://gist.github.com/1391583](https://gist.github.com/1391583)。在一个进程上一切正常，但是当我向外扩展时，广播不会到达其他节点。但是，连接信息是持久的，并且我不会收到持续的握手错误和断开连接。

我的理解是 socket.io RedisStore 还在内部处理 redis Pub/Sub 以保持多个进程同步。正如这里提到的[https://groups.google.com/forum/?fromgroups&hl=en#!topic/socket_io/gymBTlruYxs](https://groups.google.com/forum/?fromgroups&hl=en#!topic/socket_io/gymBTlruYxs) 顺便说一句，我应用了#848 socket.io 补丁，它似乎没有解决问题我。

截至 2012 年 5 月 14 日，Heroku 仅支持我正在使用的 socket.io 的 xhr-polling 传输。那么这个问题仅与长轮询有关吗？有解决办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:12:03.713

抱歉，如果这完全无关紧要，但是当我看到需要可扩展性、节点、redis 和 pub/sub 的问题时，我会想到[Beseda](https://github.com/GeometriaLab/Beseda) - 这是您应该研究的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T18:58:26.343

我通过实现自己的 Redis 层解决了这个问题。我让部署在不同实例上的所有节点服务器订阅中央 Redis 服务器，并从 Redis 而不是套接字侦听消息。它适用于 websockets 和 xhr 轮询。

# jsoup - 将 JSoup Selector 用于名称中带有句点的类

> ID：10593622
> 
> 赞同：0
> 
> 时间：2012-05-15T03:01:17.837
> 
> 标签：jsoup

我正在使用 JSoup 选择所有类名为 article.text 的元素。代码如下所示：

```
Document pageDoc = Jsoup.connect(pageUrl).get();
Elements body = pageDoc.select(".article.text"); 
```

body 变量始终为空。看起来 select 去掉了 .text 并且只查找类类型为“article”的元素。有什么办法可以逃脱 article.text 中的句号吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:32:40.010

您是否尝试过搜索“.article\.text”或“.article.text”？可能支持转义字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:24:21.787

好吧，我尝试了这个及其工作

```
Document pageDoc = Jsoup.connect(pageUrl).get();
Elements body = pageDoc.select("[class=article.text]"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-08T14:50:31.390

请使用这个：

`Elements body = pageDoc.getElementsByClass("article.text");`

# c# - 类属性是“属性”，但用作“类型”

> ID：10593623
> 
> 赞同：4
> 
> 时间：2012-05-15T03:01:18.440
> 
> 标签：c#

我创建了一个带有 Amount 获取/设置的类调用 Sales：

```
class Sales 
{

 public static string Amount { get; set; }

} 
```

然后我从其他类调用，超出函数范围：

```
class Test
{

  Sales.Amount = "10";

  public static VoidSales() 
  {
   .....
  }

} 
```

我收到以下错误：

```
'Fun.Sales.Amount' is a 'property' but is used like a 'type' 
```

但是当我在函数中使用时，它是正确的。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T03:09:18.257

您不能将这些类型的赋值语句放在开放类上下文中。您只能在方法内进行这些类型的分配。可以在类上下文中完成的唯一分配是类级别字段的初始化。

如果需要在实例化类时进行此分配，则应在构造函数中完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T03:09:28.670

我可能无法很好地解释它。但是 get/set 属性实际上在某种程度上等同于方法。话虽如此，我相信您不能在函数之外调用方法，对吧？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T03:27:53.973

```
class Test
{
  Sales.Amount = "10";
  public static VoidSales() 
  {
   .....
  }
} 
```

这是一个语法问题。您不能在函数之外引用 Sales.Amount - 在这里您将其定义为属性或变量，并且必须遵循变量（或属性）的规则。

您需要创建一个构造函数并将分配移到那里。IE

```
class Test
{
    Test () {
        Sales.Amount=10;
    }
} 
```

错误纯粹是您定义的项目的名称（Sales.Amount）在函数外的类的上下文中不是有效的名称。

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T03:27:05.980

如果它是一个静态值，那么它已经在您的应用程序的其他地方声明过。您基本上是在尝试在只能进行分配的地方调用方法。

如果这不是静态字段，那么您可以进行分配，然后更改“金额”，例如

```
class Test 
{ 

  public Sales sales = new Sales()
  {
     Amount = "10" //Assign Value Here
  };

  public Test()  
  { 
     sales.amount = "10"; //Or Assign Value here in constructor
  }  
} 
```

但是，如果这是一个静态字段，则在构造函数中或在声明静态字段时进行赋值。

```
class Sales  
{  
   public static string Amount = "10" //You don't require get/set here  
} 

class Test    
{ 
    public Test()
    {
        Sales.Amount = "10";    
    }
} 
```

# mysql - 如何使用 Mysql 触发“离开”、“切换”命令

> ID：10593625
> 
> 赞同：1
> 
> 时间：2012-05-15T03:01:35.513
> 
> 标签：mysql, triggers

我有触发器，如下例所示：

```
BEFORE UPDATE ON icharts_user_stats FOR EACH ROW BEGIN

IF (NEW.col1> OLD.col1
    OR NEW.col2 > OLD.col2) THEN 
    SET NEW.col3 =  NEW.col3+1;
    SET NEW.col4 =  NEW.col4+1; END  IF;

IF (NEW.col5> OLD.col5
    OR NEW.col6 > OLD.col6) THEN 
    SET NEW.col7 =  NEW.col7+1; END  IF;

IF (NEW.col8> OLD.col8
    OR NEW.col9 > OLD.col9) THEN 
    SET NEW.col10 =  NEW.col10+1; END  IF; 
```

这类似于 switch 语句，在任何时候都只会执行一个“if”。上面的代码有效，但如果第一个“if”被命中，它仍然会通过所有其他的 if。

1.  有更好的方法吗？
2.  在“结束如果”之前使用“离开”是个好主意

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-17T12:54:11.263

尝试这个。

```
BEFORE UPDATE ON icharts_user_stats FOR EACH ROW 
icharts_user_stats:BEGIN

IF (NEW.col1> OLD.col1
    OR NEW.col2 > OLD.col2) THEN 
    SET NEW.col3 =  NEW.col3+1;
    SET NEW.col4 =  NEW.col4+1; 
    leave icharts_user_stats;
END  IF;

IF (NEW.col5> OLD.col5
    OR NEW.col6 > OLD.col6) THEN 
    SET NEW.col7 =  NEW.col7+1; 
    leave icharts_user_stats;
END  IF;

IF (NEW.col8> OLD.col8
    OR NEW.col9 > OLD.col9) THEN 
    SET NEW.col10 =  NEW.col10+1; 
    leave icharts_user_stats;
END  IF; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T03:11:36.023

你试过这个吗？

```
BEFORE UPDATE ON icharts_user_stats FOR EACH ROW BEGIN

    IF (NEW.col1> OLD.col1
        OR NEW.col2 > OLD.col2) THEN 
        SET NEW.col3 =  NEW.col3+1;
        SET NEW.col4 =  NEW.col4+1; 

    ELSEIF (NEW.col5> OLD.col5
        OR NEW.col6 > OLD.col6) THEN 
        SET NEW.col7 =  NEW.col7+1; 

    ELSEIF (NEW.col8> OLD.col8
        OR NEW.col9 > OLD.col9) THEN 
        SET NEW.col10 =  NEW.col10+1; END  IF; 
```

# c# - 从构造函数创建委托

> ID：10593630
> 
> 赞同：8
> 
> 时间：2012-05-15T03:02:21.513
> 
> 标签：c#, reflection, expression-trees, .net-4.5

使用反射，我试图从这样的无参数构造函数创建一个委托：

```
Delegate del = GetMethodInfo( () => System.Activator.CreateInstance( type ) ).CreateDelegate( delType );

static MethodInfo GetMethodInfo( Expression<Func<object>> func )
{
    return ((MethodCallExpression)func.Body).Method;
} 
```

但我得到了这个异常：“无法绑定到目标方法，因为它的签名或安全透明度与委托类型的不兼容。” 什么会起作用？

请注意，至少对于此配置文件，自上一版本的 .NET 以来，已移动[CreateDelegate 。](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.createdelegate%28v=vs.110%29.aspx)现在它在 MethodInfo 上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T03:32:21.273

正如 phoog 指出的那样，构造函数不会“返回”值。加上你得到关于它的信息，`ConstructorInfo`而不是`MethodInfo`；这意味着您不能直接围绕它创建委托。您必须创建调用构造函数并返回值的代码。例如：

```
var ctor = type.GetConstructor(Type.EmptyTypes);
if (ctor == null) throw new MissingMethodException("There is no constructor without defined parameters for this object");
DynamicMethod dynamic = new DynamicMethod(string.Empty,
            type,
            Type.EmptyTypes,
            type);
ILGenerator il = dynamic.GetILGenerator();

il.DeclareLocal(type);
il.Emit(OpCodes.Newobj, ctor);
il.Emit(OpCodes.Stloc_0);
il.Emit(OpCodes.Ldloc_0);
il.Emit(OpCodes.Ret);

var func = (Func<object>)dynamic.CreateDelegate(typeof(Func<object>)); 
```

当然，如果你在编译时不知道类型，那么你只能处理`Object`......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-27T06:57:23.183

试试看：

```
Dictionary<Type, Delegate> cache = new Dictionary<Type, Delegate>();
public T Create<T>()
{
    if (!cache.TryGetValue(typeof(T), out var d))
        d = cache[typeof(T)]
            = Expression.Lambda<Func<T>>(
                Expression.New(typeof(T)),
                Array.Empty<ParameterExpression>())
            .Compile();
    return ((Func<T>)d)();
} 
```

反射很慢！速度测试在这里（俄语）：[https ://ru.stackoverflow.com/a/860921/218063](https://ru.stackoverflow.com/a/860921/218063)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T03:24:40.987

拥有一个指向构造函数的委托并不是很有用，因为构造函数没有返回值。委托将构造一个对象，但无法保留对它的引用。

您当然可以创建返回新构造的对象的委托：

```
Func<object> theDelegate = () => new object(); 
```

`Invoke()`您还可以从构造函数的方法创建一个委托`ConstructorInfo`

对于其他类型的对象：

```
Func<string> theDelegate = () => new string('w', 3);
Func<SomeClassInMyProject> theDelegate = () => new SomeClassInMyProject(); 
```

最后一行假设有一个可访问的无参数构造函数。

更新`CreateDelegate()`

```
T CallConstructor<T>() where T : new() { return new T(); }
Delegate MakeTheDelegate(Type t)
{
    MethodInfo generic = //use your favorite technique to get the MethodInfo for the CallConstructor method
    MethodInfo constructed = generic.MakeGenericMethod(t);
    Type delType = typeof(Func<>).MakeGenericType(t);
    return constructed.CreateDelegate(delType);
} 
```

# c# - 当 Event 具有添加和删除属性时，编译器会抱怨。编译OK

> ID：10593632
> 
> 赞同：0
> 
> 时间：2012-05-15T03:02:35.850
> 
> 标签：c#, c#-4.0, properties, delegates, event-handling

我在[这个 SO 回答](https://stackoverflow.com/a/756266/328397)之后对我的 C# 4.0 事件处理程序逻辑进行建模并得到错误

> ThresholdExceededEvent 只能出现在 += 或 -= 的左侧

**代码**

```
 private EventHandler<EventLogAlert> thresholdExceededEventDelegate;
    public event EventHandler<EventLogAlert> ThresholdExceededEvent
    {
        add { thresholdExceededEventDelegate += value; Console.WriteLine("add operation"); }
        remove { thresholdExceededEventDelegate -= value; Console.WriteLine("remove operation"); }
    }

    protected virtual void OnThresholdExceededEvent(EventLogAlert e)
    {
        EventHandler<EventLogAlert> handler = ThresholdExceededEvent;
        if (handler != null)
        {
            handler(this, e);
        }
    } 
```

但是当我这样做时它会编译....

```
 public event EventHandler<EventLogAlert> ThresholdExceededEvent;
    protected virtual void OnThresholdExceededEvent(EventLogAlert e)
    {
        EventHandler<EventLogAlert> handler = ThresholdExceededEvent;
        if (handler != null)
        {
            handler(this, e);
        }
    } 
```

首选方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T03:48:51.687

代替

```
EventHandler<EventLogAlert> handler = ThresholdExceededEvent; 
```

利用

```
EventHandler<EventLogAlert> handler = thresholdExceededEventDelegate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:32:29.040

使用第二种方法；如果您不需要自定义处理事件的附加和分离（并且您没有尝试`interface`显式实现 's 事件），则不需要第一个选项的更冗长的语法；无论如何，第二个中的代码将编译成与第二个选项非常相似的东西。

第一个代码块中的语法错误是您试图直接执行显式实现的事件。在这种情况下，您需要执行委托本身而不是事件。

# cakephp - CakePHP 字段未更新

> ID：10593635
> 
> 赞同：0
> 
> 时间：2012-05-15T03:03:32.033
> 
> 标签：cakephp, cakephp-1.3

我有一个非常奇怪的问题。我正在从表单中进行标准的 cakephp 保存，一点也不疯狂：

```
$this->Ride->read(null,$id);
$ride = $this->Ride->data;

$this->Ride->set(array(
                'assigned' => 2,
                'pickup_driver_id' => $driver['UserDriver']['id']
            ));

$this->Ride->save() 
```

但是，每次所有字段都更新时，分配的字段除外。分配的是数据库中的 tinyint(2)。我试过不验证......等等。任何建议都会很棒！先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-15T03:21:02.697

我建议你仔细检查你的模型定义，看看那里是否有任何有趣的事情发生。关闭验证将是我的第一个建议，但你说你已经涵盖了，所以我不会说什么。（咧嘴笑）

另外，检查 $this->Ride->save() 方法的返回值，它应该是 true。如果没有，请检查此类错误...

```
if(!$this->Ride->save()){
    debug($this->Ride->validationErrors); die();
} 
```

# php - 如何遍历图像的所有像素？

> ID：10593638
> 
> 赞同：6
> 
> 时间：2012-05-15T03:03:55.763
> 
> 标签：php, gd

我想遍历图像的所有像素，找到该像素的 rgba 值，并对这些像素做一些事情。

## 例子

假设我有一个 100x100 像素的图像。我想用我已经制作的函数找到每个像素的值：

```
function getPixel($image, $x, $y) {

  $colors = imagecolorsforindex($image, imagecolorat($image, $x, $y));
  $inrgba = 'rgba(' . $colors['red'] . ',' . $colors['green'] . ',' . $colors['blue'] . ',' . $colors['alpha'] . ')';
  return $inrgba;
} 
```

并将这些值与图像的尺寸一起存储在一个数组或数组数组中。我想在 html 页面中使用最终结果。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T03:42:12.967

```
for($x=1;$x<=$width;$x++)
{
    for($y=1;$y<=$height;$y++)
    {
        $pixel=getPixel($image, $x, $y);
        //do something
    }
} 
```

这将做的是找到每列中的每个像素。

```
i=iteration
pixel coordinate = (x,y) 
```

对于 5 x 5 图像，迭代将如下所示：

```
i1 = (1,1)
i2 = (1,2)
i3 = (1,3)
i4 = (1,4)
i5 = (1,5)
i6 = (2,1)
i7 = (2,2)
i8 = (2,3)
i9 = (2,4)
i10 = (2,5)
i11 = (3,1)
i12 = (3,2)
i13 = (3,3)
i14 = (3,4)
i15 = (3,5)
i16 = (4,1)
i17 = (4,2)
i18 = (4,3)
i19 = (4,4)
i20 = (4,5)
i21 = (5,1)
i22 = (5,2)
i23 = (5,3)
i24 = (5,4)
i25 = (5,5) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-19T12:41:46.003

这是完整的答案，没有跳出错误

```
<?php

    $src    = '2fuse.jpg';
    $im     = imagecreatefromjpeg($src);
    $size   = getimagesize($src);
    $width  = $size[0];
    $height = $size[1];

    for($x=0;$x<$width;$x++)
    {
        for($y=0;$y<$height;$y++)
        {
            $rgb = imagecolorat($im, $x, $y);
            $r = ($rgb >> 16) & 0xFF;
            $g = ($rgb >> 8) & 0xFF;
            $b = $rgb & 0xFF;
            var_dump($r, $g, $b);
        }
    } 
```

# android - Android - 无法使用外部库

> ID：10593639
> 
> 赞同：0
> 
> 时间：2012-05-15T03:04:01.737
> 
> 标签：android

我被要求让一个项目在 Android 中运行，我在这方面完全是个菜鸟，嗯......事情不工作......

我在 Java 中创建了一些使用库的代码——这段代码运行良好。我现在正试图让这段代码在 Android 上运行，但我遇到了问题......似乎我无法使用导入到我的 Android 项目的库中的任何元素。当没有创建库的实例时，该项目在手机上加载得非常好，但是当我使用该库时，应用程序崩溃并且出现错误。

[http://i.imgur.com/OILHQ.jpg](http://i.imgur.com/OILHQ.jpg)

这是项目包的样子

[http://i.imgur.com/HQEX9.jpg](http://i.imgur.com/HQEX9.jpg)

带箭头的部分是我认为导致程序崩溃的部分。当我删除这条线时，一切正常。

我在网上查看了有关 Android 和外部库的问题，但我无法理解所有内容......你能帮我准确找出问题所在以及如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:16:47.413

我第一次开始android开发时遇到了这个问题。关键是外部库似乎要求它们本身是另一个 android 项目，而不是 java 项目。创建此android项目后，右键单击“外部项目”并选择属性。在 Android Tab 下，应该有一些东西需要检查以表明它是一个库而不是应用程序。完成此操作后，链接与我们将普通 java 项目链接到外部 java 库的方式非常相似

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:34:40.813

如果您使用的是 Eclipse，那么只需在项目根目录中创建一个“libs”文件夹并将您的外部库放在那里。或者，您右键单击 jar 文件 > 构建路径 > 添加到构建路径

# android - Android - 无法让标题布局对齐

> ID：10593641
> 
> 赞同：1
> 
> 时间：2012-05-15T03:04:13.620
> 
> 标签：android, android-layout

我有这个标题：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:padding="5dip">    

 <Button android:id="@+id/home"
  android:layout_width="wrap_content" android:layout_height="wrap_content"
  android:text="Home"
/>

 <Button android:id="@+id/questions"
  android:layout_width="wrap_content" 
  android:layout_height="wrap_content"
  android:text="My Questions"
 /> 

<Button android:id="@+id/questions"
 android:layout_width="wrap_content" android:layout_height="wrap_content"
 android:text="Questions"
android:layout_toRightOf="@+id/home"  />  

 <Button android:id="@+id/businesses"
  android:layout_width="wrap_content" 
  android:layout_height="wrap_content"
  android:text="Businesses"
android:layout_toRightOf="@+id/businesses"
 />  

 <Button android:id="@+id/learn"
  android:layout_width="wrap_content" 
  android:layout_height="wrap_content"
  android:text="Learn"
  android:layout_toRightOf="@+id/learn"
 />  

 <Button android:id="@+id/extra_help"
  android:layout_width="wrap_content" 
  android:layout_height="wrap_content"
  android:text="Help"
  android:layout_toRightOf="@+id/learn"
/>  
</RelativeLayout> 
```

并且由于某种原因，按钮显示 50% 彼此叠加在一起，每个都覆盖了另一个的一半。

知道我的布局有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:07:45.403

您正在使用相对布局，您需要管理水平和垂直对齐。比如所有的android:layout_toRightOf都是用于水平定位的，你还需要添加属性来处理垂直定位。

所有可能的属性都可以在这里找到：http: [//developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

**UPDATE** Seeing your comments below, it seems you just want to have one horizontal row. In that case, just make sure each is aligned to the previous one(But then why not use a linear layout?)

Check your id's though, and @+id/learn is aligned to the right of itself. Revisit that. And you also have a button right after "Home" that isn't handled at all.

# python - ExpatError：未找到元素 - Python 脚本

> ID：10593644
> 
> 赞同：4
> 
> 时间：2012-05-15T03:04:26.090
> 
> 标签：python, elementtree, expat-parser

使用 OS X 10.6.8、libxml 2-2.7.8、libxslt-1.1.26 和 python 2.6，我正在尝试运行此处链接的 tumblrRestore.py 脚本：

[https://github.com/hughsaunders/Tumblr-Restore/blob/master/tumblrRestore.py](https://github.com/hughsaunders/Tumblr-Restore/blob/master/tumblrRestore.py)

它运行成功并在崩溃前恢复了 76 个帖子。

然而，在第二次运行时，我得到了一个 ExpatError: no element found，并且一直无法成功运行它——它现在总是产生同样的错误。错误文字：

```
Tumblr Restore
Traceback (most recent call last):
File "tumblrRestore.py", line 264, in <module>
cli.start()
File "tumblrRestore.py", line 232, in start
bp.parse()
File "tumblrRestore.py", line 51, in parse
postelement=ElementTree.fromstring(xml_string)
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/xml/etree/ElementTree.py", line 964, in XM
return parser.close()
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/xml/etree/ElementTree.py", line 1254, in close
self._parser.Parse("", 1) # end of data
xml.parsers.expat.ExpatError: no element found: line 1, column 0 
```

我想知道我是否有错误或竞争或过时的 python 或 lxml 版本，尽管这仍然不能解释为什么脚本成功运行一次。

完整的新手，任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:53:07.930

检查你`extract_xml_string`的`BackupParser`上课方法。它肯定会返回空字符串，因为您的`begin_re`正则表达式与 xml 标头不匹配。

尝试下一个：

```
begin_re = re.compile("<\? xml .*\?>") 
```

# java - 如何在java中为不同的数据库创建多个数据库连接

> ID：10593647
> 
> 赞同：17
> 
> 时间：2012-05-15T03:04:34.837
> 
> 标签：java, design-patterns, jdbc, dao, multiple-databases

我有一个应用程序，它使用不同地理位置的四个数据库。所有数据库都包含相同的表，只有数据库名称根据位置不同。我必须在我的应用程序中创建一些报告，这些报告使用来自每个数据库的数据。从 java 应用程序创建这些数据库连接的正确方法是什么，我可以使用这个任务的合适设计模式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T03:30:30.770

由于您没有用任何此类标记您的问题，，，，，`hibernate`我`JPA`假设`ORM`您正在处理普通的 JDBC。

话虽如此，我建议你有一个 DAO 层来处理底层数据库，并将连接细节留给特定的实现。`.properties`可以说，您可以在某些文件中配置连接字符串。

**[补充]**

您还可以使用 DAO 工厂，这是抽象工厂或工厂方法模式的实现，无论哪种方式都适合这里。

**[链接]**

*   [BalusC](https://stackoverflow.com/users/157882/balusc)[的 DAO 和 DAO 工厂的一个非常好的](http://balusc.blogspot.com/2008/07/dao-tutorial-data-layer.html)实现
*   [核心 J2EE 模式](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)——可以说是过时了，但可能会提供一些想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T03:25:53.803

有多种方法可以实现这一目标：

1.  如果您使用任何支持分布式事务的 Java EE 容器，那么您可以使用那里的功能。
2.  如果您使用的是普通 JDBC，那么您将必须为每个数据库维护自己的连接。对于 JDBC：
    1.  提供所有连接详细信息
    2.  有一个 Facade，它通过调用抽象的通用 DAO 为您提供所需的对象。
    3.  拥有一个基于连接创建 dao 的工厂。
3.  使用像 Hibernate 这样的 ORM 工具，您可以在其中使用多个数据库的配置。[教程](http://www.javabeat.net/2010/12/configuring-multiple-databases-in-hibernate/)。
4.  如果您使用的是 Spring，那么您可以为每个数据库配置一个数据源。[文档](http://static.springsource.org/spring/docs/2.0.x/reference/jdbc.html)

设计模式：

*   Facade Pattern - 用于隐藏复杂性和多个数据库的使用。
*   工厂 - 如果您自己管理数据库连接。
*   单例 - 用于数据源

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T03:21:04.473

您可以使用像 Hibernate 这样的 ORM 工具轻松处理多个连接。您可以在单独的配置文件中指定每个连接，并通过每次获取新的会话工厂来实例化所需的连接。

其他方法是使用数据源和 JNDI：[Java 连接到多个数据库](https://stackoverflow.com/questions/8491729/java-connecting-to-multiple-databases)

我认为您可以为此目的使用工厂模式和单例模式的组合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T03:17:20.170

实现这一目标的理想方法是使用像 OLAP 这样的多维系统。但是看看你是否可以从这些数据库中创建一个视图。然后你只需要查询视图（即只是一个单一的数据库连接）。如果需要，您仍然可以使用多个数据库连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T04:45:37.710

很容易:)

1.创建数据源尝试连接数据库

```
public DataSource getDataSource(String db) throws Exception {
DataSource dt = null;
InitialContext ic = null;
try {
    if(db.trim().equals("you_database_name")) {
        dt = (DataSource)ic.lookup("jdbc/connection_name");
    } else if(db.trim().equals("you_database_name")) {
        dt = (DataSource) ic.lookup("jdbc/connection_name");
    }
    return dt;
} catch(NamingException n) {
    throw new Exception("Err getDataSource (ServiceLocator) NamingException - " + n.getMessage());
} 
```

2.创建一个DataBase类，记住此时关闭所有连接。

```
public class DataBases {
public YouNameDataSourceClass dataSrc;
public DataBases() throws Exception {
   super();
   dataSrc = new YouNameDataSourceClass.getDataSource();
}
public Connection getConnectionAS400() throws Exception {
    return locator.getDataSource("you_database_name").getConnection();
}

public Connection getConnectionOracle() throws Exception {
    return locator.getDataSource("you_database_name").getConnection();
}

public Connection getConnectionSQLServer() throws Exception {
    return locator.getDataSource("you_database_name").getConnection();
}
} 
```

好看。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-21T10:22:22.187

假设您使用带有 XML 配置的 Hibernate 的 Spring MVC，请执行以下步骤：

1.  `spring-servlet`在文件中创建所有数据库的 bean 。

    ```
    <bean id="dataSource1" Class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
            <property name="url" value="jdbc:sqlserver://localhost:1433;databaseName=database1"/>
            <property name="username" value="abc" />
            <property name="password" value="abc@123" />
        </bean> 
    ```

2.  在 Spring-servlet 文件中创建`sessionFactory`所需的所有数据库的 bean。

    ```
    <bean id="datasource1SessionFactory" class="org.springframework.orm.hibernate5.LocalSessionFactoryBean">
            <property name="dataSource"
              ref="database1"/>
            <property name="packagesToScan"
              value="com.id4.iprod.entity"/>
            <property name="hibernateProperties">
                <props>
                    <prop key="hibernate.hbm2ddl.auto">
                    </prop>
                    <prop key="hibernate.dialect">
                        org.hibernate.dialect.SQLServer2012Dialect
                    </prop>
                </props>
            </property>
        </bean> 
    ```

3.  现在您只需要在 DAO 中打开您想要的数据库会话并从所需数据库访问所需的结果。

    ```
    Session datasource1= this.datasource1SessionFactory.openSession(); 
    ```

# python - 从字典中访问任意元素的 Pythonic 方式

> ID：10593651
> 
> 赞同：30
> 
> 时间：2012-05-15T03:05:07.197
> 
> 标签：python

我有一本字典，里面有很多东西。我想看看一个任意的项目：

```
print("Amongst our dictionary's items are such diverse elements as: %s" % arb(dictionary)) 
```

我不在乎哪个项目。它不需要是*随机*的。

我可以想到很多实现这一点的方法，但它们似乎都很浪费。我想知道是否有任何 Python 中的首选习语，或者（甚至更好）如果我错过了一个。

```
def arb(dictionary):
# Creates an entire list in memory. Could take a while.
    return list(dictionary.values())[0]

def arb(dictionary):
# Creates an entire iterator. An improvement.
    for item in dictionary.values():
        return item

def arb(dictionary):
# No iterator, but writes to the dictionary! Twice!
    key, value = dictionary.popitem()
    dictionary[key] = value
    return value 
```

我处于性能不够关键的位置，这很重要（还），所以我可能会被指责为过早优化，但我正在努力改进我的 Python 编码风格，所以如果有一个易于理解的变体，最好采用它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-15T03:09:15.860

在我看来，与您的第二个解决方案类似，但更明显：

```
return next(iter(dictionary.values())) 
```

这在 python 2 和 python 3 中都有效，但在 python 2 中这样做更有效：

```
return next(dictionary.itervalues()) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-17T01:55:17.103

避免整个`values`//混乱，这在Python2`itervalues`或`viewvalues`Python3中同样适用

```
dictionary[next(iter(dictionary))] 
```

或者，如果您更喜欢生成器表达式

```
next(dictionary[x] for x in dictionary) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-18T17:25:13.183

我相信这个问题已经得到了显着的回答，但希望这个比较能够阐明干净代码与时间的权衡：

```
from timeit import timeit
from random import choice
A = {x:[y for y in range(100)] for x in range(1000)}
def test_pop():
    k, v= A.popitem()
    A[k] = v

def test_iter(): k = next(A.iterkeys())

def test_list(): k = choice(A.keys())

def test_insert(): A[0] = 0

if __name__ == '__main__':
    print('pop', timeit("test_pop()", setup="from __main__ import test_pop", number=10000))
    print('iter', timeit("test_iter()", setup="from __main__ import test_iter", number=10000))
    print('list', timeit("test_list()", setup="from __main__ import test_list", number=10000))
    print('insert', timeit("test_insert()", setup="from __main__ import test_insert", number=10000)) 
```

结果如下：

```
('pop', 0.0021750926971435547)
('iter', 0.002003908157348633)
('list', 0.047267913818359375)
('insert', 0.0010859966278076172) 
```

似乎使用 iterkeys 只比弹出一个项目并重新插入快一点，但比创建列表并从中选择一个随机对象快 10 倍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T06:59:06.493

为什么不使用`random`？

```
import random

def arb(dictionary):
    return random.choice(dictionary.values()) 
```

这很清楚地表明结果是纯粹的任意而不是实现的副作用。在性能成为实际问题之前，始终保持清晰而不是速度。

很遗憾 dict_values 不支持索引，如果能够传入值视图就好了。

更新：由于每个人都对性能如此着迷，因此上述函数需要 <120 毫秒才能从 100 万个项目的字典中返回一个随机值。依靠清晰的代码并没有像人们所说的那样获得惊人的性能。

# asp.net-mvc - .Net Membership Provider 未捕获电子邮件重复

> ID：10593652
> 
> 赞同：4
> 
> 时间：2012-05-15T03:05:07.647
> 
> 标签：asp.net-mvc, error-handling, membership

我对 .Net/MVC3 比较陌生，并且正在开发使用默认成员资格提供程序的 C#、MVC3、EF4 应用程序。根据我的阅读，它应该会自动捕获重复的电子邮件，但它似乎没有这样做，我不确定为什么。我真正需要弄清楚的是在哪里查看正确的部分是否到位，以及它可能不进行验证检查的原因（它似乎做了大多数/所有其他的，比如重复用户名或无效的密码格式等，只有重复的电子邮件不会被抓住。）

自定义包括将新用户添加到特定角色，以及重定向到“第一次”欢迎页面。

这是代码：

```
 // POST: /Account/Register

    [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus;
            Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                Roles.AddUserToRole(model.UserName, "Registered");
                //return RedirectToAction("Index", "Home");
                return RedirectToAction("Acceptance", "Account");
            }
            else
            {
                ModelState.AddModelError("", ErrorCodeToString(createStatus));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

以下是（未触及的）验证方法：

```
 #region Status Codes
    private static string ErrorCodeToString(MembershipCreateStatus createStatus)
    {
        // See http://go.microsoft.com/fwlink/?LinkID=177550 for
        // a full list of status codes.
        switch (createStatus)
        {
            case MembershipCreateStatus.DuplicateUserName:
                return "User name already exists. Please enter a different user name.";

            case MembershipCreateStatus.DuplicateEmail:
                return "A user name for that e-mail address already exists. Please enter a different e-mail address."; 
```

等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T03:36:03.333

默认情况下，只有用户名必须是唯一的。如果您还想要唯一的电子邮件地址，那么您必须在 MembershipProvider 的 Web.config 条目中进行设置。

就像是

```
<membership>
  <providers>
    <add name="AspNetSqlMembershipProvider" [...] requiresUniqueEmail="true" [...] />
  </providers>
</membership> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:31:50.070

唯一想到的是确保 model.Email 具有价值。您可以检查的另一件事是查看 SQL Server 中的默认成员资格提供程序表，以检查正在存储哪些值。

# grails - 使用 OpenID4Java 的 Grails 导致 SSLPeerUnverifiedException

> ID：10593654
> 
> 赞同：0
> 
> 时间：2012-05-15T03:05:52.450
> 
> 标签：grails, ssl, openid

我有一个 grails 应用程序，它尝试使用 OpenID4Java 向我们自己的 OpenID 提供程序进行身份验证。

我们的提供商提供的证书来自 RapidSSL，已由 GeoTrust Global 签署。

浏览器自动接受证书。

我在 Mac 上尝试将 GeoTrustGlobalCA 添加到 cacerts 中，`/Library/Java/Home/lib/security/cacerts`结果提示`Certificate already exists in keystore under alias <keychainrootca-132>`我再次添加它。

在 STS 中启动 grails`-Djavax.net.debug=ssl run-app -https`

我可以在输出中找到以下内容；

```
adding as trusted cert:
  Subject: CN=GeoTrust Global CA, O=GeoTrust Inc., C=US
  Issuer:  CN=GeoTrust Global CA, O=GeoTrust Inc., C=US
  Algorithm: RSA; Serial number: 0x23456
  Valid from Tue May 21 14:00:00 EST 2002 until Sat May 21 14:00:00 EST 2022

adding as trusted cert:
  Subject: CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US
  Issuer:  CN=GeoTrust Primary Certification Authority, O=GeoTrust Inc., C=US
  Algorithm: RSA; Serial number: 0x18acb56afd69b6153a636cafdafac4a1
  Valid from Mon Nov 27 11:00:00 EST 2006 until Thu Jul 17 09:59:59 EST 2036 
```

但是，尝试从应用程序访问服务会导致；

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
  at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)
  at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
  at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:339)
  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:123)
  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:147)
  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:101)
  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:381)
  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:641)
  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:576)
  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:554)
  at org.openid4java.util.HttpCache.head(HttpCache.java:335)
  at org.openid4java.discovery.yadis.YadisResolver.retrieveXrdsLocation(YadisResolver.java:400)
  at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:248)
  at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:232)
  at org.openid4java.discovery.yadis.YadisResolver.discover(YadisResolver.java:166)
  at org.openid4java.discovery.Discovery.discover(Discovery.java:147)
  at org.openid4java.discovery.Discovery.discover(Discovery.java:129)
  at org.openid4java.consumer.ConsumerManager.discover(ConsumerManager.java:542)
  at org.openid4java.consumer.ConsumerManager$discover.call(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T02:26:11.207

我通过绕过证书检查解决了这个问题。当你新建一个 ConsumerManager 对象时，不要使用默认的 Constructor。示例代码在这里：

```
private ConsumerManager getFreeHttpsManager() throws NoSuchAlgorithmException, KeyManagementException {
    //ignore all
    TrustManager trm = new X509TrustManager() {
        public X509Certificate[] getAcceptedIssuers() {
            return null;
        }

        public void checkClientTrusted(X509Certificate[] certs, String authType) {

        }

        public void checkServerTrusted(X509Certificate[] certs, String authType) {
        }
    };

    SSLContext sc = SSLContext.getInstance("TLS");
    sc.init(null, new TrustManager[]{trm}, null);
    //  HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
    X509HostnameVerifier verifier = new X509HostnameVerifier() {

        @Override
        public void verify(String string, SSLSocket ssls) throws IOException {
        }

        @Override
        public void verify(String string, X509Certificate xc) throws SSLException {
        }

        @Override
        public void verify(String string, String[] strings, String[] strings1) throws SSLException {
        }

        @Override
        public boolean verify(String string, SSLSession ssls) {
            return true;
        }
    };
    Discovery discovery = new Discovery();
    discovery.setYadisResolver(new YadisResolver(new HttpFetcherFactory(sc, verifier)));
    return new ConsumerManager(
            new RealmVerifierFactory(new YadisResolver(new HttpFetcherFactory(sc, verifier))),
            discovery,  // uses HttpCache internally
            new HttpFetcherFactory(sc, verifier));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T00:17:41.153

我们通过附加的 Apache 指令解决了这个问题

`SSLCertificateChainFile /etc/pki/tls/certs/intermediate.crt`

由于我们的发行人是谁，我们似乎需要一个中间 CA 条目。

# installation - 在 NSIS 部分中创建超过 1 个卸载程序

> ID：10593657
> 
> 赞同：2
> 
> 时间：2012-05-15T03:06:09.063
> 
> 标签：installation, nsis

**NSIS 部分可以创建超过 1 个卸载程序吗？**

我的安装程序可以为 3 个不同版本的应用程序安装插件 - 因此安装程序将在 3 个不同的目录中安装文件。

在每个目录中，我想添加一个卸载程序文件，该文件将仅删除该目录中的文件。

3 个卸载文件中的每一个都在同一个 Section 区域中创建，这是否无效？如何让我的脚本创建 3 个卸载程序（如果可能）？

以下部分仅创建一个卸载程序，最后一个（版本 10 卸载程序）：

```
Section "Install Plugin Files" MainSetup

    CheckInstallVers8:
        IntCmp $installVers8  1 InstallVersion8 CheckInstallVers9 InstallVersion8
    CheckInstallVers9:
        IntCmp $installVers9  1 InstallVersion9 CheckInstallVers10 InstallVersion9
    CheckInstallVers10:
        IntCmp $installVers10 1 InstallVersion10 MainInstallation InstallVersion10  

    InstallVersion8:
        # install plugins...
        SetOutPath $VERS8DIR
        writeUninstaller "${APPNAME} Uninstall.exe"
        GoTo CheckInstallVers9
    InstallVersion9:
        SetOutPath $VERS9DIR
        writeUninstaller "${APPNAME} Uninstall.exe"
        GoTo CheckInstallVers10
    InstallVersion10:
        SetOutPath $VERS10DIR
        writeUninstaller "${APPNAME} Uninstall.exe"

SectionEnd 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T03:32:05.033

您可以根据需要多次调用 WriteUninstaller，但应使用完整路径名 ( `writeUninstaller "$VERSxDIR\${APPNAME} Uninstall.exe"`)

您没有发布完整的脚本，因此很难判断逻辑出了什么问题（您可能想使用 LogicLib.nsh 以便您可以这样做`{IF}`），但您应该能够“调试”您的解决方案。

您没有谈论的可能相关的一件事是卸载程序逻辑。如果 3 个卸载程序都执行完全相同的任务，那么这不是问题，但我预计卸载程序注册表注册至少会有所不同。

有两种方法可以解决这个问题：

*   将数据标记到[卸载程序的末尾](http://nsis.sourceforge.net/ReadCustomerData)（或同一目录中的 .ini）
*   使用 !system 调用 makesis.exe 并在编译时生成卸载程序，您可以将其包含为正常`File`s

可能与子目录中的插件相关的另一种解决方案是在卸载程序中使用组件页面，并且仅在删除所有 3 个插件后才删除卸载程序...

# ruby-on-rails - 实现 has_n 的最佳方法

> ID：10593661
> 
> 赞同：0
> 
> 时间：2012-05-15T03:06:24.587
> 
> 标签：ruby-on-rails, model-view-controller, database-design

你将如何`has_n`为给定的 Rails 实现关联`n`？比如说一个橄榄球队。它有15名球员。您是否将其实现为`has_many`并在保存之前签入以确保它有 15 个玩家，还是您更愿意将其实现为 15 个`belongs_to`？请注意，在这种情况下，顺序很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:12:16.383

编辑以反映您的订购请求...

您需要在 player 表中添加一个 sort_key。您可以使用整数，但浮点数始终是更灵活的选择。然后使用该`:order => "sort_key"`短语。

```
class Team < ActiveRecord::Base
  has_many :players, :order => "sort_key", :inverse_of => :team
end

class Player < ActiveRecord::Base
  belongs_to :team, :inverse_of => :players

  validate :validate_players_count, :on => :create
  def validate_players_count
    if team.players.size > 15
      errors[:base] << "a team can only have 15 players"
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:41:05.237

在添加新玩家时，我更喜欢通过`has_many`并验证玩家数量。

我认为这是建立一对多关系的正确方法。

# java - 使用 Java FontMetrics 的 Ballpark 文本尺寸

> ID：10593663
> 
> 赞同：0
> 
> 时间：2012-05-15T03:07:18.117
> 
> 标签：java, fonts

我目前正在使用指定字体将字符串绘制到画布上。但是，我想根据窗口大小缩放此字体。

给定一个目标字符串，我如何找到特定字体的磅值，以便打印目标字符串是`h`单位高或`w`单位宽？点大小和字体尺寸之间是否存在线性关系？

我可以想出非常难闻的方法来确定相对点大小（选择任意大小并缩小/增长，直到尺寸在目标的某个 epsilon 范围内），但宁愿做得更干净。

如果可能的话，我想只用字体来做到这一点，而不是诉诸仿射变换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T05:43:46.617

对于[最佳指标](https://stackoverflow.com/a/5998117/230513)，我更喜欢`TextLayout`，如图所示[，](https://stackoverflow.com/a/8282330/230513)但是，@StanislavL 在[此处](https://stackoverflow.com/q/9311720/230513)`deriveFont()`的答案中建议，它非常敏捷，而且一点也不难闻。

# c# - C# 调制解调器和 AT 命令

> ID：10593665
> 
> 赞同：2
> 
> 时间：2012-05-15T03:07:27.943
> 
> 标签：c#, speech-recognition, voice, modem, at-command

好吧，我的大脑短路了。我正在尝试做的是编写一个程序，允许我在计算机应答之后呼叫我的计算机。在这一点上，我将能够对我的电脑说话并利用电脑的语音识别能力。但是，我的计算机没有通过电话作为“麦克风输入”音频源接收我的声音。很可能是因为调制解调器使用 COM4 端口作为其中继源。

目前，我可以从我的电脑拨打电话并从我的电脑接听电话。计算机目前正在充当美化的电话。两个用户可以来回呼叫对方，但 PC 就像第三个人在尴尬的约会中一样坐在那里。我希望计算机在聆听呼叫者时发挥更积极的作用。

无论如何，我似乎无法敲定出能让我让电脑听来电者声音的代码。我只是在 AT 命令上打破僵局，所以请对我温柔一点。

下面是from1的代码。任何帮助都会很棒。谢谢！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System; 
using System.Collections.Generic; 
    using System.Drawing; 
    using System.Windows.Forms; 
    using System.IO.Ports; 
    using System.Threading; 
    using System.IO; 

namespace VoiceModem
{
    public partial class Form1 : Form
    {
        byte[] buffer; 
        public Form1()
        {

            InitializeComponent();
        }
        SerialPort modemPort;
        int bufferLoc;
        string strBuf;
        FileStream file; 
        StreamWriter logfile;

        //note to self: the max port speed is listed at 115200
        private void btnCALL_Click(object sender, System.EventArgs e)
        {
            string PHONENUMBER = "ATD=" + this.textBox1.Text + "\r";
            //File.Close("raw.txt", FileMode.Create);   
            //C:\Documents and Settings\Commander\Desktop
            file = File.Open("raw.txt", FileMode.Create);
            logfile = File.CreateText("log.txt");
            buffer = new byte[10 * 1024];
            modemPort = new SerialPort("COM4", 112500, Parity.None, 8, StopBits.One);
            modemPort.ReadTimeout = SerialPort.InfiniteTimeout;
            modemPort.DataReceived += new SerialDataReceivedEventHandler(modemPort_DataReceived);
            modemPort.Open();
            modemPort.Write("AT\r"); //OK
            modemPort.Write("ATA\r"); //ANSWERING IN VOICE MODE  *** NO CARRIER
            Thread.Sleep(500);
            modemPort.Write("AT+FCLASS=8\r"); ///this should be voice here
            Thread.Sleep(500);
            modemPort.Write(PHONENUMBER); //DIAL number that D equals
          //  modemPort.Write("ATH\r"); //HANG UP IN VOICE MODE   //ERROR 
            //modemPort.Write("AT+VSM=1\r"); 
         //   modemPort.Write("AT+VTX\r"); //VOICE TRANSMIT MODE  //ERROR
        //    modemPort.Write("AT+VLS=5\r"); 
            Thread.Sleep(500);
           modemPort.Write("AT+VRX\r"); //VOICE RECEIVE MODE  
           Thread.Sleep(500);
           modemPort.Write("AT+VLS=3+RX\r");
            //VLS 
            //0 - Telephone Line Select (Go on hook) 
            //2 - Speakers 
            //3 - Microphone 
            //4 - Telephone Line Select + Samples routed to/from Speakers/Mic in TX/RX modes 
            //6 - Speakerphone
        }

        private void button1_Click(object sender, System.EventArgs e)
        {
            //C:\Documents and Settings\Commander\Desktop
            file = File.Open("raw.txt", FileMode.Create); 
                logfile = File.CreateText("log.txt"); 
            buffer = new byte[10*1024]; 
                modemPort = new SerialPort("COM4",112500, Parity.None, 8,StopBits.One); 
                modemPort.ReadTimeout = SerialPort.InfiniteTimeout; 
                modemPort.DataReceived+= new SerialDataReceivedEventHandler(modemPort_DataReceived); 
                modemPort.Open(); 
                modemPort.Write("AT\r"); //OK
                //modemPort.Write("ATA\r"); //ANSWERING IN VOICE MODE  *** NO CARRIER
                modemPort.Write("AT+FCLASS=8\r");
          //  "ATD=6022626151;\r"

                //modemPort.Write(this.textBox1.Text);

            //ATD4412345679;
                //Dmn   ATDmn will dial a phone number where m is the modifier: L, W, ,, ;, @, or S. 
            //It will dial the telephone number n.

            // string str = "Hello " + userName + ". Today is " + date + ".";
            string PHONENUMBER = "ATD=" + this.textBox1.Text + "\r";

                Thread.Sleep(500);
                modemPort.Write(PHONENUMBER); //DIAL number that D equals

                Thread.Sleep(500);
                modemPort.Write("ATH\r"); //HANG UP IN VOICE MODE   //ERROR 
                //modemPort.Write("AT+VSM=1\r"); 
                Thread.Sleep(500);
                modemPort.Write("AT+VLS=?\r");
                Thread.Sleep(500);
                modemPort.Write("AT+VTX\r"); //VOICE TRANSMIT MODE  //ERROR
                //modemPort.Write("AT+VLS=1\r"); 
                Thread.Sleep(500); 
                buffer = new byte[10*1024];
                modemPort.Write("AT+VRX\r"); //VOICE RECEIVE MODE  
                //modemPort.Write("AT+VRX\r");
        }

         void modemPort_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs args) 
            { 
                int x = modemPort.BytesToRead; 
                modemPort.Read(buffer,0,x); 
                file.Write(buffer,0,x); 
                logfile.WriteLine(x.ToString()+args.EventType.ToString()); 
            } 

        private void button2_Click(object sender, System.EventArgs e)
        {

            modemPort.Close(); 
                file.Close(); 
                logfile.Close(); 

        }

        private void button3_Click(object sender, System.EventArgs e)
        {
            Form2 form2 = new Form2();
            form2.Show();
            //Form2.show();
        }

        private void button4_Click(object sender, System.EventArgs e)
        {
            this.richTextBox1.Text = System.IO.File.ReadAllText("raw.txt");
        }

        private void button5_Click(object sender, System.EventArgs e)
        {
            this.richTextBox2.Text = System.IO.File.ReadAllText("log.txt");
        }

        private void NUMBER1_Click(object sender, System.EventArgs e)
        {
            //tBox1.Text += "a";
            this.textBox1.Text += "1";
        }

        private void NUMBER2_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "2";

        }

        private void NUMBER3_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "3";

        }

        private void NUMBER4_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "4";

        }

        private void NUMBER5_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "5";

        }

        private void NUMBER6_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "6";

        }

        private void NUMBER7_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "7";

        }

        private void NUMBER8_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "8";

        }

        private void NUMBER9_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "9";

        }

        private void NUMBER0_Click(object sender, System.EventArgs e)
        {
            this.textBox1.Text += "0";

        }

        private void btnREDIAL_Click(object sender, System.EventArgs e)
        {
            buffer = new byte[10 * 1024];
            modemPort = new SerialPort("COM4", 112500, Parity.None, 8, StopBits.One);
            modemPort.ReadTimeout = SerialPort.InfiniteTimeout;
            modemPort.DataReceived += new SerialDataReceivedEventHandler(modemPort_DataReceived);
            modemPort.Open();
            modemPort.Write("AT\r"); //OK
            modemPort.Write("ATDL\r"); //OK

        }

        private void Form1_Load(object sender, System.EventArgs e)
        {
            this.textBox1.Focus();

        }

        private void btnANSWER_Click(object sender, System.EventArgs e)
        {
            //C:\Documents and Settings\Commander\Desktop
            file = File.Open("raw.txt", FileMode.Create);
            logfile = File.CreateText("log.txt");
            buffer = new byte[10 * 1024];
            modemPort = new SerialPort("COM4", 112500, Parity.None, 8, StopBits.One);
            modemPort.ReadTimeout = SerialPort.InfiniteTimeout;
            modemPort.DataReceived += new SerialDataReceivedEventHandler(modemPort_DataReceived);
            modemPort.Open();
            modemPort.Write("AT\r"); //OK
            Thread.Sleep(500);
            modemPort.Write("ATA\r"); //ANSWERING then gives beep-boops
            Thread.Sleep(500);
            //modemPort.Write("AT+VLS=1");
            //modemPort.Write("AT+FCLASS=8\r");
            // string str = "Hello " + userName + ". Today is " + date + ".";
           // string PHONENUMBER = "ATD=" + this.textBox1.Text + "\r";
           // modemPort.Write(PHONENUMBER); //DIAL number that D equals
           //modemPort.Write("ATH\r"); //HANG UP IN VOICE MODE   //ERROR 
            //modemPort.Write("AT+VSM=1\r"); 
            //modemPort.Write("AT+++\r");// disconnects data mode to allow for voice mode
            //voice mode is activated using ata
            modemPort.Write("AT+VRX\r");
            //modemPort.Write("AT+VTX\r"); //VOICE TRANSMIT MODE  //ERROR
            //modemPort.Write("AT+VLS=1\r");
           // modemPort.Write("ATH\r"); //HANG UP IN VOICE MODE   //ERROR
           //modemPort.Write("AT+VRX\r");
            //modemPort.Write("ATA\r"); //answer the call
        }

        private void btnHANGUP_Click(object sender, System.EventArgs e)
        {
            modemPort.Close();
        }

        private void textBox1_TextChanged(object sender, System.EventArgs e)
        {

            //int iPhone = 7065551212;
            //string strPhone = string.Format("{0:(###) ###-####}", iPhone);

           // this.textBox1.Mask = "(999) 000-0000";
        }

        private void textBox1_Leave(object sender, System.EventArgs e)
        {
            // Reset the colors and selection of the TextBox after focus is lost.
            string x = textBox1.Text;
            double y = Double.Parse(x);
            textBox1.Text = String.Format("{0:(###) ###-####}", y);

            textBox1.ForeColor = Color.Black;
            textBox1.BackColor = Color.White;
            textBox1.Select(0, 0);
        }

        /*
         * ACTIVE PROFILE:
    E0 L1 M1 Q0 T V1 X4 &C1 &D2 &G0 &P0 
    S00:000 S01:000 S02:043 S03:013 S04:010 S05:008 S06:002 S07:060 S08:002
    S10:014 S12:050 S29:070

    STORED PROFILE 0:
    E0 L1 M1 Q0 T V1 X4 &C1 &D2 &G0 &P0 
    S00:000 S02:043 S06:002 S07:050 S08:002 S10:014 S12:050 S29:070
         * 
         * 
         * DIAG <2A4D3263 0=10>

    DIAG <2A4D3263 1=0>

    DIAG <2A4D3263 60=1>
         * */

    } 

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T03:39:04.590

你不能用调制解调器（代表 MOdulator/DEModulator）来做到这一点。这些旨在将数字通信转换为模拟信号，以便通过电话线传输，然后将模拟信号转换回数字信号。你想要的是一张语音处理卡。

我最熟悉的是Dialogic，但那是大约10年前的事了。我快速搜索了一下，Dialogic Diva 2 Port Analog 卡正是您想要的。您还可以搜索电话板或电话卡。我看到了一家名为 Digium 的公司的另一张卡片。

语音处理卡将适合 PC 主板的 PCI 插槽。您将模拟电话线插入卡中。通过开发板的 API，您可以与电话线进行交互，就像计算机是电话一样。10 年前你可以检测到人类的语音频率，但语音识别还处于起步阶段。您可以通过电话线播放声音文件（“按 1 获得客户服务”），然后响应按键音（又名 DTMF）进行程序控制。

您可以在 PC 上编写任何内容，从简单的语音邮件到非常简洁的多线电话系统。我确信 Dialogic 卡片的 API 的功能会显着提高。这就是我接下来要看的地方。调制解调器根本不会做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T03:13:58.287

接电话的是调制解调器。它只与其他调制解调器通信。它不支持接听电话并将任何音频传递给程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:29:09.877

你所描述的是一个 IVR 系统。这是[一篇关于为什么大多数调制解调器不能与 IVR 系统一起工作的文章的链接](http://www.ivrsoft.com/voice-modems.htm)。即使你让调制解调器工作，你也需要付出大量的开发努力才能让基本的 IVR 系统工作。Voxeo[为开发人员提供了一个免费的 2 端口 IVR 系统，称为 Prophecy](http://www.voxeo.com/prophecy/)。该 IVR 系统使用诸如[VoiceXML](http://www.w3.org/TR/voicexml21/)和[CCXML](http://www.w3.org/TR/ccxml/)之类的开放 W3C 标准来对您的语音应用程序进行编程，并且捆绑了一个不错的语音识别和文本到语音 (TTS)。由于您使用的是 C#，我建议您查看开源项目[VoiceModel](http://voicemodel.codeplex.com/)，它极大地简化了使用 C# 和 ASP.NET MVC 开发将在 Prophecy（或任何 VoiceXML 兼容系统）上运行的语音应用程序。

Prophecy 的电话接口是 SIP，因此成本将是获得一个 VoIP 网关，它将您的模拟电话线转换为 SIP。如果支持 SIP，另一个答案中提到的 FXO 网关可能会工作。Voxeo 支持[AudioCodes MP-114，它是一个 4 端口模拟系统](https://rads.stackoverflow.com/amzn/click/com/B001BWORZ0)零售价约为 395 美元。您可以在 eBay 上以更低的价格找到二手的。他们过去常常通过软件 VoIP 网关支持 Dialogic 卡，但结果证明这是一场支持噩梦，并导致语音识别出现很多问题，因此他们放弃了它。您需要相当不错的语音质量才能使语音识别正常工作，这是不使用调制解调器的另一个原因。让具有模拟输入的 VoIP 网关正常工作可能具有挑战性，但我已经成功使用了 AudioCodes 产品。奥科的另一个优势是它受到 Voxeo 的支持，而且他们的支持是免费且出色的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T04:08:15.170

您需要的是一个[FXO 网关](http://www.3cx.com/PBX/FXS-FXO.html)，它可以让您将[POTS](http://en.wikipedia.org/wiki/Plain_old_telephone_service)信号转换为您的计算机可以使用的东西。[您可以获得50-70 美元范围内](https://www.google.com/search?q=fxo#q=fxo&hl=en&sa=X&tbs=p_ord%3ap&tbm=shop&prmd=imvnsz)的低端消费设备。

# list - PROLOG 根据事实创建的列表的总和

> ID：10593666
> 
> 赞同：0
> 
> 时间：2012-05-15T03:07:30.250
> 
> 标签：list, prolog

我想根据事实创建一个列表。并且该列表应仅包含事实中的一项。

例如 ：

```
%facts
abc(a, b, c).
abc(d, e, f).
abc(g, h, i). 
```

样本 ：

```
?-lists(A).
  A = [a, d, g];
  No. 
```

编辑 ：

使用`Vaughn Cato`评论中的建议，代码变为：

```
%facts
abc(a, b, c).
abc(d, e, f).
abc(g, h, i).

lists(A) :-
    findall(findall(X, abc(X, _, _), A). 
```

列表已创建，但如何总结列表`A`？

如果查询输入的列表总和，

```
sumlist([], 0).
sumlist([X|Y], Sum) :-
    sumlist(Y, Sum1),
    Sum is X + Sum1. 
```

但是如果要对现有列表求和，如何定义谓词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:13:41.300

正如 Vaughn Cato 所建议的，使用它`findall(X,abc(X, _ , _ ),A).`来创建我想要的列表对我有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:10:47.383

总结一个数字列表，例如由您的定义产生的数字列表`lists/1`，大多数 Prolog 系统（例如，[GNU](http://www.gprolog.org/manual/gprolog.html#htoc218)，[SWI](http://www.swi-prolog.org/pldoc/man?predicate=sum_list/2)）实现`sum_list/2`将数字列表作为第一个参数并在第二个参数中绑定它们的总和：

```
?- sum_list([1,2,3],Sum).
Sum = 6. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:58:57.773

您也可以使用 aggregate_all/3 解决它。如果您只需要一个总和，它就不需要在内存中构建列表。

```
sum_facts(Template, Arg, Sum) :-
   aggregate_all(sum(X), (call(Template), arg(Arg, Template, X)), Sum). 
```

在此示例中，我使用定义模板的通用调用：

```
sum_facts(abc(_, _, _), 1, Sum). 
```

如果你总是将它与 abc/3 的第一个参数一起使用，这个版本就足够了：

```
sum_facts(Template, Arg, Sum) :-
   aggregate_all(sum(X), abc(X, _, _), Sum). 
```

# c++ - 这是 C++11 for 循环的已知缺陷吗？

> ID：10593686
> 
> 赞同：89
> 
> 时间：2012-05-15T03:12:02.660
> 
> 标签：c++, for-loop, c++11, language-lawyer, foreach

假设我们有一个结构，用于保存 3 个带有一些成员函数的双精度数：

```
struct Vector {
  double x, y, z;
  // ...
  Vector &negate() {
    x = -x; y = -y; z = -z;
    return *this;
  }
  Vector &normalize() {
     double s = 1./sqrt(x*x+y*y+z*z);
     x *= s; y *= s; z *= s;
     return *this;
  }
  // ...
}; 
```

为了简单起见，这有点做作，但我相信你同意类似的代码在那里。这些方法允许您方便地链接，例如：

```
Vector v = ...;
v.normalize().negate(); 
```

甚至：

```
Vector v = Vector{1., 2., 3.}.normalize().negate(); 
```

现在，如果我们提供 begin() 和 end() 函数，我们可以在新样式的 for 循环中使用我们的 Vector，比如循环 3 个坐标 x、y 和 z（毫无疑问，您可以构建更多“有用”的示例通过用例如字符串替换向量）：

```
Vector v = ...;
for (double x : v) { ... } 
```

我们甚至可以这样做：

```
Vector v = ...;
for (double x : v.normalize().negate()) { ... } 
```

并且：

```
for (double x : Vector{1., 2., 3.}) { ... } 
```

但是，以下（在我看来）被破坏了：

```
for (double x : Vector{1., 2., 3.}.normalize()) { ... } 
```

虽然它看起来像是前两种用法的逻辑组合，但我认为最后一种用法会产生一个悬空引用，而前两种用法完全没问题。

*   这是正确的并受到广泛赞赏吗？
*   以上哪一部分是“坏”的部分，应该避免？
*   是否可以通过更改基于范围的 for 循环的定义来改进语言，以便在 for 表达式中构造的临时对象在循环期间存在？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-15T03:50:36.310

> 这是正确的并受到广泛赞赏吗？

是的，你对事物的理解是正确的。

> 以上哪一部分是“坏”的部分，应该避免？

不好的部分是对从函数返回的临时值进行左值引用，并将其绑定到右值引用。它就像这样糟糕：

```
auto &&t = Vector{1., 2., 3.}.normalize(); 
```

临时`Vector{1., 2., 3.}`的生命周期不能延长，因为编译器不知道返回值来自`normalize`引用它。

> 是否可以通过更改基于范围的 for 循环的定义来改进语言，以便在 for 表达式中构造的临时对象在循环期间存在？

这与 C++ 的工作方式高度不一致。

它会防止人们在临时变量上使用链式表达式或对表达式使用各种惰性求值方法造成的某些问题吗？是的。但它也需要特殊情况的编译器代码，并且会混淆为什么它不能与*其他*表达式构造一起使用。

更合理的解决方案是通知编译器函数的返回值始终是对 的引用`this`，因此如果返回值绑定到临时扩展构造，那么它将扩展正确的临时构造。不过，这是一个语言级别的解决方案。

目前（如果编译器支持它），您可以使它`normalize` *不能*被临时调用：

```
struct Vector {
  double x, y, z;
  // ...
  Vector &normalize() & {
     double s = 1./sqrt(x*x+y*y+z*z);
     x *= s; y *= s; z *= s;
     return *this;
  }
  Vector &normalize() && = delete;
}; 
```

这将导致`Vector{1., 2., 3.}.normalize()`编译错误，但`v.normalize()`可以正常工作。显然，您将无法执行以下正确操作：

```
Vector t = Vector{1., 2., 3.}.normalize(); 
```

但是你也不能做不正确的事情。

或者，正如评论中所建议的，您可以使右值引用版本返回一个值而不是一个引用：

```
struct Vector {
  double x, y, z;
  // ...
  Vector &normalize() & {
     double s = 1./sqrt(x*x+y*y+z*z);
     x *= s; y *= s; z *= s;
     return *this;
  }
  Vector normalize() && {
     Vector ret = *this;
     ret.normalize();
     return ret;
  }
}; 
```

如果`Vector`是具有实际资源可移动的类型，则可以`Vector ret = std::move(*this);`改用。命名的返回值优化使得这在性能方面相当优化。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-15T03:24:48.373

> for (double x : Vector{1., 2., 3.}.normalize()) { ... }

这不是语言的限制，而是您的代码的问题。该表达式`Vector{1., 2., 3.}`创建一个临时的，但该`normalize`函数返回一个*lvalue-reference*。因为表达式是*左值*，编译器假定对象是活动的，但因为它是对临时对象的引用，所以在评估完整表达式后，对象就死了，所以你留下了一个悬空引用。

现在，如果您更改设计以按值返回新对象而不是对当前对象的引用，那么就不会有问题并且代码将按预期工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T13:34:09.237

恕我直言，第二个例子已经有缺陷了。修改运算符返回`*this`以您提到的方式很方便：它允许链接修饰符。它*可以*用于简单地处理修改的结果，但是这样做很容易出错，因为它很容易被忽略。如果我看到类似的东西

```
Vector v{1., 2., 3.};
auto foo = somefunction1(v, 17);
auto bar = somefunction2(true, v, 2, foo);
auto baz = somefunction3(bar.quun(v), 93.2, v.qwarv(foo)); 
```

我不会自动怀疑这些功能会`v`作为副作用进行修改。当然，他们*可以*，但这会令人困惑。所以如果我要写这样的东西，我会确保它`v`保持不变。对于您的示例，我将添加免费功能

```
auto normalized(Vector v) -> Vector {return v.normalize();}
auto negated(Vector v) -> Vector {return v.negate();} 
```

然后写循环

```
for( double x : negated(normalized(v)) ) { ... } 
```

和

```
for( double x : normalized(Vector{1., 2., 3}) ) { ... } 
```

那是 IMO 更好的可读性，而且更安全。当然，它需要一个额外的副本，但是对于堆分配的数据，这很可能在廉价的 C++11 移动操作中完成。

# android - Android APIDemos Sensors.java 中的一些代码让我困惑

> ID：10593688
> 
> 赞同：0
> 
> 时间：2012-05-15T03:12:36.023
> 
> 标签：android, sensors

我正在阅读 Android APIDemos 中有关传感器的一些代码。但有些代码让我感到困惑。

```
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.RGB_565);
    mCanvas.setBitmap(mBitmap);
    mCanvas.drawColor(0xFFFFFFFF);
    mYOffset = h * 0.5f;
    mScale[0] = - (h * 0.5f * (1.0f / (SensorManager.STANDARD_GRAVITY * 2)));
    mScale[1] = - (h * 0.5f * (1.0f / (SensorManager.MAGNETIC_FIELD_EARTH_MAX)));
    mWidth = w;
        mHeight = h;
        if (mWidth < mHeight) {
            mMaxX = w;
        } else {
            mMaxX = w-50;
        }
        mLastX = mMaxX;
        super.onSizeChanged(w, h, oldw, oldh);
} 
```

mYOffset 和 mScale 是什么意思？为什么它们与 h(size of view) 有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:34:55.873

mYOffset 是屏幕y方向的中心

mScale 似乎用于它绘制的线条的大小

这是一个很好的例子，说明为什么你总是需要注释你的代码

# php - jquery 表示是否未选择选项

> ID：10593694
> 
> 赞同：0
> 
> 时间：2012-05-15T03:14:02.163
> 
> 标签：php, html

我想添加一个小代码片段来检查是否选择了一个选项如果页面是 html，这通常很容易完成，现在我的代码片段看起来像这样

```
echo "<td>Language</td>";
echo "<td><select id='language' name='language'>
            <option value=''>Select...</option>
            <option value='en_US'>English(US)</option>
            <option value='en_AU'>English(AU)</option>
            <option value='en_UK'>English(UK)</option>
          </select><span id="info"></span>
      </td>"; 
```

如果是html

```
<script>
   $('#language').change()
   {
     if('Select...'==$('#language').text())
     {
        $('#info').html("Please select a value...");
     }
   }
</script> 
```

[**更新**]

我想补充一点，上面用于生成 html 代码的 php 源代码放在一个 form 标记中，即

```
echo "<form action='checkdb.php' method='POST'>
    // all above and more
    </form>" 
```

页面 checkdb.php 使用发布的数据来更新数据库。

如何添加当前文件中提到的 jquery 代码片段（正在生成带有 html 代码的文件）？我在想人们曾经告诉我在 php 执行过程中不能调用 javascript，我想知道我是否需要使用 ajax get 函数。请提供一些帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:23:01.963

将您的 jQuery 更改为：

```
$('#language').change(function() {
    if ('Select...' == $('#language option:selected').text()) {
        $('#info').html("Please select a value...");
    }
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/4uz3W/)**。

*更新*：或更简短的版本：

jQuery：

```
$('#language').change(function() {
    $('#info').html(('Select...' == $('#language option:selected').text()) ? "Please select a value...":"");
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/4uz3W/1/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:35:05.797

```
// Listen, and respond to, the change even on our select
$("#language").on("change", function(e){
  // Set the html content of our info element
  $("#info").html(function(){
    // If the selected option has no value, ask to select a value
    return e.target.value === "" ? "Please select a value." : "" ;
  });
// Trigger upon page load
}).trigger("change"); 
```

演示：http: [//jsbin.com/owaqaz/2/edit](http://jsbin.com/owaqaz/2/edit)

注意最后一行，如果选择元素当前没有值，`$.trigger("change")`这将导致页面立即填充元素。`#info`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T03:21:53.210

抱歉，您的问题是什么？PHP 页面在处理后变成 HTML 页面（用户永远看不到 PHP 源代码），您可以轻松地使用 javascript 来检查值。

# c++ - 运行时初始化一个 const

> ID：10593695
> 
> 赞同：0
> 
> 时间：2012-05-15T03:14:09.777
> 
> 标签：c++, constants, extern

我有一个头文件（仅）constants.h，我在其中定义了所有常量变量，以便稍后在库中使用。但是，有一个变量，我想在实现文件中定义运行时。我试图做这样的事情：

常量.hpp

```
 extern const unsigned int numTests; 
```

run.cpp 中的其他地方

```
 const unsigned int numTests = 10; 
```

然后，另一个文件 tester.cpp 使用

```
 if ( n < numTests) {
       // do something
    } 
```

现在，当我编译它时，我在 tester.o 中得到一个链接器错误，因为未定义符号 numTests。我有点理解为什么会发生这种情况：tester.cpp 包含 constants.hpp 而不是 run.cpp，因此，它找不到在 run.cpp 中初始化的常量 numTests。

有没有更好的方法呢？

TIA，尼基尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:16:20.593

确保您正在编译两者`run.cpp`，并且`tester.cpp`在编译程序时不会出现链接器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:21:40.897

创建可执行文件时需要链接run.o：

```
g++ -o tester tester.cpp run.o   ; for GNU C++ 
```

（如果您不使用 GNU C++，请检查您自己的编译器的命令行开关）

# android - 点击按钮并关闭活动后如何显示锁屏？

> ID：10593696
> 
> 赞同：1
> 
> 时间：2012-05-15T03:14:15.030
> 
> 标签：android, android-activity, lockscreen

您好，我已经看过这两个帖子，但是他们什么也没做 xD[如何以编程方式锁定 android 以编程方式](https://stackoverflow.com/questions/4447312/how-to-lock-the-android-programatically) [锁定 android 设备](https://stackoverflow.com/questions/4545079/lock-the-android-device-programatically)

但是第二个链接确实给出了错误，但我不知道它们是什么。谢谢大家看:)

# jqgrid - 显示创建对话框后，jquery jqgrid 验证表单提交时出错

> ID：10593697
> 
> 赞同：0
> 
> 时间：2012-05-15T03:15:30.933
> 
> 标签：jqgrid

我将 jqgrid 与 MVC 3 一起使用。

我有这个页面，其代码如下所示：

```
@model VectorCheck.ViewModels.InsertUpdateInvoiceViewModel
@{
    ViewBag.Title = "Edit Invoice " + @Model.Invoice.InvoiceNumber;
    ViewBag.InvoiceId = (int)@Model.Invoice.InvoiceId;
}
<header class="controllerheader">
    <h1>Edit Invoice @Model.Invoice.InvoiceNumber</h1>
</header>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.16.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/EditorHookup.js")" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" media="screen" href="../../Scripts/jquery.jqGrid-4.1.1/css/ui.jqgrid.css" />

<script src="../../Scripts/jquery.jqGrid-4.1.1/js/i18n/grid.locale-en.js" type="text/javascript"></script>

<script src="../../Scripts/jquery.jqGrid-4.1.1/js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script src="../../Scripts/Views/Invoice/create.js" type="text/javascript"></script>

<script src="../../Scripts/Views/Invoice/edit.js" type="text/javascript"></script>
@using (Html.BeginForm()) {
    @Html.ValidationSummary()
    <input type="hidden" id="invoiceid" value="@Model.Invoice.InvoiceId" />
    <input type="hidden" id="organisationid" value="@Model.Invoice.OrganisationId" />
    <fieldset>
        <legend>Invoice</legend>
            @Html.HiddenFor(model => model.Invoice.InvoiceId)
@Html.HiddenFor(model => model.Invoice.InvoiceAttachmentId)
@Html.HiddenFor(model => model.Invoice.CreatedByUserName)
@Html.HiddenFor(model => model.Invoice.CreatedDateTime)
@Html.HiddenFor(model => model.Invoice.ProgramManagerId, new { @id = "programmanagerid"})
<div class="columnRightCreate editor-label">
    @Html.LabelFor(model => model.Invoice.AreaId)
</div>
<div class="dataRightCreate editor-field">
    @Html.DropDownListFor(model => model.Invoice.AreaId, Model.AreaList, new { @id = "areaddl" }, Model.Invoice.ActiveInvoiceLines.Count() == 0)
    @Html.ValidationMessageFor(model => model.Invoice.AreaId, "!")
</div>
<div class="invoiceHeaderCreate">
    <div class="columnLeftCreate editor-label">
        @Html.LabelFor(model => model.Invoice.OrganisationId)
    </div>
    <div class="dataLeftCreate editor-field">
        @Html.DropDownListFor(model => model.Invoice.OrganisationId, Model.OrganisationList, new { @id = "organisationddl" })
        @Html.ValidationMessageFor(model => model.Invoice.OrganisationId, "!")
    </div>
    <div class="columnLeftCreate editor-label">
        @Html.LabelFor(model => model.Invoice.InvoiceNumber)
    </div>
    <div class="dateLeftCreate editor-field">
        @Html.EditorFor(model => model.Invoice.InvoiceNumber)
        @Html.ValidationMessageFor(model => model.Invoice.InvoiceNumber, "!")
    </div>
    <div class="columnLeftCreate editor-label">
        @Html.LabelFor(model => model.Invoice.InvoiceDate)
    </div>
    <div class="dataLeftCreate editor-field" id="datepicker">
        @Html.EditorFor(model => model.Invoice.InvoiceDate)
        @Html.ValidationMessageFor(model => model.Invoice.InvoiceDate, "!")
    </div>
    <div class="columnRightCreate editor-label">
        @Html.LabelFor(model => model.Invoice.TotalExcludingGst)
    </div>
    <div class="dataRightCreate editor-field">
        @Html.EditorFor(model => model.Invoice.TotalExcludingGst)
        @Html.ValidationMessageFor(model => model.Invoice.TotalExcludingGst, "!")
    </div>
    <div class="columnRightCreate editor-label">
        @Html.LabelFor(model => model.Invoice.TotalIncludingGst)
    </div>
    <div class="dataRightCreate editor-field">
        @Html.EditorFor(model => model.Invoice.TotalIncludingGst)
        @Html.ValidationMessageFor(model => model.Invoice.TotalIncludingGst, "!")
    </div>
    <div class="columnRightCreate editor-label">
        @Html.LabelFor(model => model.Invoice.AllowMoreThanAllowedPercentageToBePaidOverride)
        @Html.CheckBoxFor(model => model.Invoice.AllowMoreThanAllowedPercentageToBePaidOverride)
    </div>
    <div class="columnRightCreate editor-label">
        @Html.LabelFor(model => model.Invoice.AllowNumberOfProgressPaymentsOverride)
        @Html.CheckBoxFor(model => model.Invoice.AllowNumberOfProgressPaymentsOverride)
    </div>
    @if (Model.Invoice.ApprovedForPayment == false) {
        <div class="columnRightCreate editor-label">
            @Html.LabelFor(model => model.Invoice.Rejected)
            @Html.CheckBoxFor(model => model.Invoice.Rejected)
        </div>
    }
</div>

<input type="submit" value="Update" />
    </fieldset>
    <fieldset>
        <legend>Invoice Lines</legend>
        <table id="list">
        </table>
        <div id="pager">
        </div>
    </fieldset>
} 
```

这处理发票及其关联的发票行。所以第一部分是发票详细信息的基本 MVC 更新。有文本框，选择等，您按下更新按钮将详细信息发送回以保存。如果您所做的一切都更改了发票详细信息，则此方法可以正常工作。

然而，下面的带有 id list 的表是一个包含发票行的 jqgrid。代码是：

```
$("#list").jqGrid({
        url: '/InvoiceLine/GridData/' + invoiceId,
        datatype: 'json',
        mtype: 'POST',
        colNames: ['InvoiceLineId', 'InvoiceId', 'Project', 'Amount', 'CreatedByUserName', 'CreatedDateTime', ''],
        colModel: [

              { name: 'InvoiceLineId', index: 'InvoiceLineId', hidden: true, key: true, editable: true, editrules: { required: false} },
              { name: 'InvoiceId', index: 'InvoiceId', hidden: true, editable: true, editrules: { required: false }, editoptions: { defaultValue: invoiceId} },
              { name: 'Project', index: 'Project' },
              { name: 'Amount', index: 'Amount', width: 150, align: 'right', formatter: 'number', formatoptions: { thousandsSeparator: "," }, editable: true, editrules: { required: true, custom: true, custom_func: iscurrencycheck} },
              { name: 'CreatedByUserName', index: 'CreatedByUserName', hidden: true, editable: true, editrules: { required: false} },
              { name: 'CreatedDateTime', index: 'CreatedDateTime', hidden: true, editable: true, editrules: { required: false} },
              { name: 'act', index: 'act', width: 55, align: 'center', sortable: false, formatter: 'actions',
                  formatoptions: { keys: true,
                      delbutton: false,
                      //Reload grid so that the price group gets updated after a save
                      onSuccess: function (rowid) { reload(); }
                  }
              }
              ],
        pager: $('#pager'),
        rowNum: 10,
        rowList: [5, 10, 20, 50],
        viewrecords: true,
        imgpath: '',
        caption: 'Invoice Lines',
        editurl: '/InvoiceLine/Save/',
        grouping: true,
        groupingView: {
            groupColumnShow: false,
            groupField: ['Project']
        }
    });
    $("#list").navGrid('#pager', { edit: false, add: true, del: true, search: false }, {  }, { width: 500 }, { url: "/../InvoiceLine/Delete" });
}); 
```

这可以很好地进行更新等。问题是它会导致 MVC 更新出现问题。如果您打开创建发票行对话框，然后在关闭它后单击更新按钮以保存发票详细信息，则会引发 jquery 验证错误。

d 未定义 [中断此错误]

....data(a.form,"validator").settings.meta;return b?c(a).metadata()[b]:c(a).metadat...

我查看了源代码，我很确定这是因为您打开对话框以创建它包含一个表单标签，即使在您关闭它之后，它仍保留在页面上，但已禁用。

有谁知道如何处理这个问题？也许如何在按下更新按钮之前摆脱对话框创建的标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:10:20.977

我想存在所描述的问题是因为您`<table id="list"></table><div id="pager"></div>`将`@using (Html.BeginForm()) {...}`. 在网格中，您使用与网格中相同的列名。所以你会在主窗体的名称和 jqGrid 的 Add 表单中的名称发生冲突。

我建议你搬到`<table id="list"></table><div id="pager"></div>`外面`@using (Html.BeginForm()) {...}`。

作为另一种解决方法，您可以尝试在关闭后**销毁编辑表单。**jqGrid 的默认行为是仅*隐藏*表单。即使设置`recreateForm: true`在这里也没有帮助，因为它仅在下次打开表单时才删除先前隐藏的网格。所以我建议你在关闭时*直接*`onClose`使用which destroy 编辑/添加表单。以下代码可以在调用之前的某处使用：*`navGrid`*

 *```
$.extend($.jgrid.edit, {
    onClose: function () {
        setTimeout(function() {
            $("#editmodlist").remove(); // "list" part is the id of the grid
        }, 100);
    }
}); 
```*

# android - RIM OS (BIS)、IOS和android中Push函数的区别

> ID：10593698
> 
> 赞同：0
> 
> 时间：2012-05-15T03:15:53.193
> 
> 标签：android, ios, blackberry, push-notification, apple-push-notifications

任何人都可以为我解释这些操作系统中推送功能之间的区别吗？我真的很好奇它们是如何工作的，以及它们与其他人的工作方式有何不同。据我所知，android 通过保持端口始终打开来应用推送功能。其他操作系统呢？
非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:20:51.653

根据定义，推送通知都应该使用相同的概念。据我了解，服务器将有一个开放端口，它可以通过该端口接收消息。更精细的细节可能会有所不同，但我相信它们都遵循始终保持通道打开的相同原则，只要您有网络连接。

实现推送通知有不同的方法。你可能想先看看这个。

[http://en.wikipedia.org/wiki/Push_technology](http://en.wikipedia.org/wiki/Push_technology)

# objective-c - 如何将两个相同的 NSDictionary 合并到 NSDictionary

> ID：10593702
> 
> 赞同：0
> 
> 时间：2012-05-15T03:16:29.517
> 
> 标签：objective-c, nsdictionary

有两个这样的字典，两个字典有相同的键但不同的值。

```
/* dictionary 1 */
paramDict1 {
    payAmount = 1000;
    payType = 1;
}
/* dictionary 2 */
paramDict2 {
    payAmount = 2000;
    payType = 2;
}

I hope merge them to one dictionary like 

paramDict {
    payAmount = 1000;
    payType = 1;
    payAmount = 2000;
    payType = 2;
}

Could you tell me how to do? Thanks. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T03:38:09.377

即使 NSDictionary 保留了键的顺序，但它没有，您所要求的也是不可能的，因为*键必须是唯一的*。

相反，您可以使用字典数组：

```
NSArray *dicts = [NSArray arrayWithObjects: paramDict1, paramDict2, nil]; 
```

或者也许不那么惯用的唯一键：

```
paramDict {
    payAmount1 = 1000;
    payType1 = 1;
    payAmount2 = 2000;
    payType2 = 2;
} 
```

# insert - 如何获取数据集表以生成插入语句。（sql ce3.5 和 Dataset with visual studio 2010 express）

> ID：10593707
> 
> 赞同：0
> 
> 时间：2012-05-15T03:16:45.743
> 
> 标签：insert, tableadapter

我能够在 ac#visual studio 2010 express 项目中使用 sql ce 3.5 生成更新语句，除了用于 ce 3.5 数据库表的数据集的文件查询的插入语句。

但是我遇到了运行时错误：Update requires a valid InsertCommand when passed DataRow collection with new rows from

```
 myTblAdaptor.Update(myTbl) 
```

我确实使填充方法生成所有更新语句并直接 db.... 但我似乎无法找到 myTblAdaptor.Insert。实际上向导结果并没有列出 Insert 语句。不知道为什么。sql 是 SELECT [category], [Value], [seq] FROM [favorite]

所以我尝试通过在数据集设计表面上向 myTbl 添加一个插入查询来创建一个。生成 Insert1 方法。

然后我尝试通过添加 InsertMethod

右键单击数据集表面，选择视图代码，

然后在文件末尾我添加了：

```
namespace myappNS.myDSTableAdapters
{
public partial class myTblAdapter
{
    public int Insert(string category, string value, int? seq)
    {
        return Insert1(category, value, seq);
    }
}
} 
```

我还尝试查看是否可以手动将 InsertCommand 定义到适配器，但找不到。

我能做些什么？

提前谢谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:16:52.810

我的错误，我应该在主查询中找到不生成插入语句或不匹配的列数。这仅仅意味着数据库表定义不同于数据集的定义或主查询！

因此要修复错误，请从 dataqset 中删除表，然后将数据库表从 DataExporer 拖放到数据集设计图面上

# search - 使用 Lucene SpanQueries 进行句子感知搜索

> ID：10593715
> 
> 赞同：7
> 
> 时间：2012-05-15T03:17:58.677
> 
> 标签：search, lucene, sentence

是否可以使用 Lucene SpanQuery 来查找“红色”“绿色”和“蓝色”这两个词都出现在一个句子中的所有事件？

我的第一个（不完整/不正确）方法是编写一个分析器，将一个特殊的句子标记标记和句子的开头放置在与句子的第一个单词相同的位置，然后查询类似于以下内容的内容：

```
SpanQuery termsInSentence = new SpanNearQuery(
  SpanQuery[] {
    new SpanTermQuery( new Term (MY_SPECIAL_SENTENCE_TOKEN)),
    new SpanTermQuery( new Term ("red")),
    new SpanTermQuery( new Term ("green")),
    new SpanTermQuery( new Term ("blue")),
  },
  999999999999,
  false
);

SpanQuery nextSentence = new SpanTermQuery( new Term (MY_SPECIAL_SENTENCE_TOKEN));

SpanNotQuery notInNextSentence = new SpanNotQuery(termsInSentence,nextSentence); 
```

当然，问题在于这`nextSentence`并不是真正的*下一个*句子，而是*任何*句子标记，包括句子中`termsInSentence`匹配的那个。因此这是行不通的。

我的下一个方法是创建将标记放在句子之前的分析器（即*在*第一个单词之前，而不是在与第一个单词相同的位置）。问题是我必须考虑由`MY_SPECIAL_SENTENCE_TOKEN`. 更重要的是，当我使用幼稚模式拆分句子（例如 split on `/\.\s+[A-Z0-9]/`）时，这首先会特别糟糕，因为当我搜索*USS Enterprise*时，我必须考虑所有（错误）句子标记。

那么......我应该如何处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:59:11.420

我会将每个句子索引为一个 Lucene 文档，包括一个标记句子来自哪个源文档的字段。根据您的源材料，句子/LuceneDoc 的开销可能是可以接受的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-01T16:17:35.740

实际上，看起来您非常接近解决方案。我认为索引句尾标志是一个好方法。问题是你的句尾标志在你的 中`SpanNearQuery`，这就是让你失望的原因。您要求它找到一个包含和*不*包含的跨度`MY_SPECIAL_SENTENCE_TOKEN`。该查询自相矛盾，因此，当然，它不会找到任何匹配项。您真正需要知道的是，这三个术语（“红色”、“绿色”和“蓝色”）出现在不重叠的跨度中`MY_SPECIAL_SENTENCE_TOKEN`（即句子标记不会出现在这些术语之间）。

此外，在`Term`ctors 中缺少字段名称会是个问题，但是 Lucene*应该*抛出一个异常来抱怨这一点，所以猜测这不是真正的问题。可能是撰写本文时的 Lucene 版本并没有抱怨 SpanNears 中的不匹配字段，所以也许值得一提。

这似乎对我有用：

```
SpanQuery termsInSentence = new SpanNearQuery(
    new SpanQuery[] {
        new SpanTermQuery( new Term ("text", "red")),
        new SpanTermQuery( new Term ("text", "green")),
        new SpanTermQuery( new Term ("text", "blue")),
    },
    9999, 
    false
);

SpanQuery nextSentence = new SpanTermQuery( new Term ("text", MY_SPECIAL_SENTENCE_TOKEN));

SpanQuery notInNextSentence = new SpanNotQuery(termsInSentence,nextSentence); 
```

至于在哪里拆分句子，而不是使用天真的正则表达式方法，我会尝试使用[`java.text.Breakiterator`](https://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html#getSentenceInstance()). 它并不完美，但它做得很好。

# ajax - 在 django 中使用 ajax 表单发布 csrf 令牌的这种方法有什么问题？

> ID：10593716
> 
> 赞同：0
> 
> 时间：2012-05-15T03:17:59.573
> 
> 标签：ajax, django, csrf

几天来我一直在寻找如何使用 jquery 将表单提交转换为 ajax，而 csrf 令牌问题让我感到困惑。

我通过添加此处找到的 javascript 片段解决了这个问题： [https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

但是当偶然发现stackoverflow时，我发现了更简单的答案（不是第一个）： [Django CSRF check failed with an Ajax POST request](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request)

一些答案建议只需将以下内容添加到帖子数据中： csrfmiddlewaretoken: '{{ csrf_token }}'

但这似乎好得令人难以置信，如果这很容易，为什么我们需要从 django 网站复制长片段？还有一个关于静态 JS 的回复的快速评论。我真的不明白。

谁能解释为什么最简单的解决方案不是最好的，并给出一些实际的例子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:12:29.893

这两种解决方案实际上在做完全相同的事情。在请求中提供`csrftoken`给 Django。他们只是以不同的方式做这件事。

**“更简单”的选项**

对于 Django 模板中的单个 jQuery 调用，使用`{{ csrf_token }}`标签添加到 post 数据可能更简单。但是，一旦在多个地方有多个调用，就变得更难维护。

**jQuery 代码**

另一方面，jQuery 代码：

*   可以包含在一个地方的静态 .js 文件中
*   不需要在 django 模板中
*   可以包含在多个页面中
*   适用于所有 jQuery Ajax 调用，无需修改单个调用
*   包括使用任何第三方 jQuery 库
*   到处都是一样的，所以很容易在 Django 文档中分享

**这个怎么运作**

jQuery 代码的额外复杂性是由于它在浏览器中运行，无需访问任何 Django 变量。

该代码通过附加到用于每个 Ajax 调用的 jQuery 事件来工作。它从存储在浏览器中的 cookie 中查找`csrftoken`，根据请求类型和主机确定是否发送令牌，并将令牌作为 发送`HTTP header`，而不是将其包含在`POST`数据中。

# javascript - 如何测试Web应用程序的客户端，尤其是商业产品的自动化测试？

> ID：10593717
> 
> 赞同：-2
> 
> 时间：2012-05-15T03:18:01.827
> 
> 标签：javascript, selenium, web, automated-tests, web-testing

我的情况是我将开发 Web 应用程序的客户端。这意味着我将开发所有的 GUI（HTML、CSS）和所有与其他人完成的服务器通信的 javascript 代码。

我唯一的责任是测试我这边的代码。顺便说一句，此 Web 应用程序一次最多只能由 4 人使用。所以不需要做压力测试。

该应用程序将是一个商业产品，所以我希望测试工具也被验证为商业可用。

对我的情况有什么建议或推荐的测试工具或方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:25:23.287

[茉莉花](http://pivotal.github.com/jasmine/)物超所值。如果你正确地构建你的脚本，你可以模拟出调用服务器的那些位，然后返回你想要的任何响应。这意味着您可以在没有服务器的情况下完全测试您的代码。

# url-rewriting - 在 Yii 中“美化”一个 URL

> ID：10593722
> 
> 赞同：0
> 
> 时间：2012-05-15T03:18:35.260
> 
> 标签：url-rewriting, yii

我想转换格式为的 URL

> path/to/my/app/Controller_action/id/2

到

> path/to/my/app/Controller_action/id/User_corresponding_to_id_2

我已经从 Yii 看过[这个](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes)教程，但它对我没有任何帮助。谁能帮我这个？

**编辑**：我还想知道这件事在 POST 场景中是否可能，即我只会在 URL 中有 path/to/my/app/Controller_action 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:35:51.387

在你的用户模型中添加一个 getUrl 方法

```
public function getUrl()
{
    return Yii::app()->createUrl('controller/action', array(
    'id'=>$this->id,
    'username'=>$this->username,
    ));
} 
```

在中添加以下规则`urlManager`组件`config/main.php`

```
'controller/action/<username:.*?>/<id: \d+>'=>'controller/action' 
```

**并在任何地方使用模型`url`虚拟属性**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T07:02:03.413

dInGd0nG 是在正确的轨道上，但如果我理解正确，您希望根据实际用户名而不是 ID 执行操作，对吗？

在 Yii 中这并不难。为简单起见，我在这里假设控制器是用户，操作是视​​图。

您的用户控制器：

```
public function actionView($id)
{
    if (is_numeric($id))
       $oUser = User::model()->findByPk($id);
    else
       // Luckily Yii does parameter binding, wouldn't be such a good idea otherwise :)
       $oUser = User::model()->findByAttributes(array('username' => $id));

    ...
} 
```

您的 urlManager 配置：

```
'user/view/<id: \w+>' => 'user/view', 
```

或更一般地说：

```
'user/<action: \w+>/<id: \w+> => 'user/<action>', 
```

在视图中生成用户 url：

```
 $this->createUrl('user/view', array('id' => $oUser->username)); 
```

# java - 编辑文本的粘贴选项

> ID：10593724
> 
> 赞同：7
> 
> 时间：2012-05-15T03:19:08.970
> 
> 标签：java, android

我有一个编辑文本，我想在其中粘贴一些文本。我可以从某个网页复制文本，但无法将文本粘贴到我的 edittext 控件中。如何启用我的 edittext 来粘贴一些文本。这是我用于 edittext 的 main.xml ；

```
enter code here

<EditText 
   android:id="@+id/enter"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight= "2"
android:scrollbars="vertical"
android:textColor="@color/black"
/> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-11T12:41:28.230

这是在 Android 4.4.2 Samsung S4 上；

[TextView](http://developer.android.com/reference/android/widget/TextView.html)的文档说：

> To allow users to copy some or all of the TextView's value and paste it somewhere else, set the XML attribute **android:textIsSelectable** to "true" or call **setTextIsSelectable(true)**. The textIsSelectable flag allows users to make selection gestures in the TextView, which in turn triggers the system's built-in copy/paste controls.

There is also another Textview attribure called [android:cursorVisible](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3acursorVisible) which determines if the system should be invoked about the copy/paste callbacks.

By default I believe both of these are true and selection/copy/paste mechanics are already enabled. I could not change that behaviour by using `android:textIsSelectable="false"` but if I set `android:cursorVisible="false"` initially you can't paste anything inside the EditText. Only after you type something in, cursor and selection behaviour becomes enabled again. Maybe this should be handled inside the code rather than in the layout xmls, or it might be related to `android:inputType` which also did not make a difference for me.

So try setting `android:cursorVisible="true"` in your EditText's layout xml if paste is not enabled by default.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T18:18:28.330

根据您的问题，如果您在系统中的任何位置复制了一些数据，并且您想将其粘贴到某个特定变量中，例如 Edit TextBox、Textview 等，那么这段代码肯定会对您有所帮助。

```
 ClipboardManager clipMan = (ClipboardManager)getSystemService(v.getContext().CLIPBOARD_SERVICE);
 myEdtTxt.setText(clipMan.getText()); 
```

注意：- 这里的 clipMan 对象将在复制过程发生时存储数据，我们将从该对象返回该数据并设置它，

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-15T06:58:53.620

To enable the standard copy/paste for TextView, U can choose one of the following: Change in layout file: Either add below property to your TextView

```
android:textIsSelectable="true" 
```

and In your Java class write this line to set it programmatically.

```
myTextView.setTextIsSelectable(true); 
```

if fragment try with

```
mContext.myTextView.setTextIsSelectable(true); 
```

And long press on the TextView you can see copy/paste action bar.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T04:08:13.827

尝试`inputType="text"`设置`EditText`字段

# flex-lexer - 如何返回到 Flex 中的某个位置？

> ID：10593725
> 
> 赞同：0
> 
> 时间：2012-05-15T03:19:10.217
> 
> 标签：flex-lexer

例如，我的词法分析器识别函数调用模式：

```
//i.e. hello(...), foo(...), bar(...)
FUNCALL     [a-zA-Z0-9]*[-_]*[a-zA-Z0-9]+[-_*][a-zA-Z0-9]*\(.\) 
```

现在 flex 识别了模式，但是它传递了模式中的最后一个字符（即存储`foo(...)`在里面之后`yytext`，词法分析器将指向之后的下一个字符`foo(...)`）

如何将词法分析器指针重置回函数模式的开头？即在识别之后`foo(..)`，我想让词法分析器指向的开始`foo(..)`，所以我可以开始标记它。

我需要这样做，因为对于每个正则表达式模式，每个模式只能返回一个标记。即匹配后`foo(...)`，我只能返回`foo`或返回语句，但不能全部返回`(`。`)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:35:24.793

Flex 有一个尾随上下文模式匹配（下面的手动摘录） 在使用它之前阅读并理解限制。

> `r/s'
> 
> ```
>  an `r' but only if it is followed by an `s'.  The text matched by
>  `s' is included when determining whether this rule is the longest
>  match, but is then returned to the input before the action is
>  executed.  So the action only sees the text matched by `r'.  This
>  type of pattern is called "trailing context".  (There are some
>  combinations of `r/s' that flex cannot match correctly. *Note
>  Limitations::, regarding dangerous trailing context.) 
> ```

大概是这样的：

```
FUNCALL     [a-zA-Z0-9]*[-_]*[a-zA-Z0-9]+[-_*][a-zA-Z0-9]*/\(.\) 
```

您可能会发现更改解析器更有意义，因此您不需要这样做。

# c++ - 函数指针问题。如何有效地与 C++ 类中的 C API（即 GSL）交互？

> ID：10593726
> 
> 赞同：2
> 
> 时间：2012-05-15T03:19:27.893
> 
> 标签：c++

这个问题似乎已经被问过很多次了，例如[here1](http://www.physicsforums.com/showthread.php?t=235922)、[here2](http://bytes.com/topic/c/answers/657124-interface-problem)和[here3](http://www.cplusplus.com/forum/general/10435/)。

我想要做的是，将`function`C-Struct的成员设置`gsl_function`为我的类的成员函数。

```
class MyClass{

    double foo(double x)
    {
        return ...;
    }

    double bar(double x)
    {
        ...
        gsl_function F;
        // Problem I cant do this (compiler error)
        F.function = &(this->foo);
    }
}; 
```

上面的第三个[链接](http://www.cplusplus.com/forum/general/10435/)提供了一个解决方案，我认为它基于此处描述的包装器方法[4](http://www.newty.de/fpt/callback.html#member)。

所以我的问题是我能做得更好吗？有没有更简单的方法？例如，可能通过使用 Boost 的函数和 Bind 对象。

我正在权衡使用 gsl 包装器的选项，例如 o2scl。但是我有点不情愿，因为如果包装纸维护不好，我可能会在以后付出代价。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T04:30:44.660

由于 GSL 允许您传入任意参数，因此您可以滥用它来保存指向问题实例的指针。然后使用静态成员函数转发到成员函数：

```
class MyClass
{
    double foo(double x)
    {
       ...
    }
    static double foo_wrapper(double x, void *params)
    {
        return static_cast<MyClass*>(params)->foo(x);
    }

    double bar(double x)
    {
        ...
        gsl_function F;
        F.function=&MyClass::foo_wrapper;
        F.params=this;

        // invoke GSL function passing in F
        ...
    }
}; 
```

你能做得更好吗？有没有更简单的方法？并不真地。您采取的任何方法都将在某处隐蔽地执行此操作。

但是您可以编写一个简单的包装器来隐藏其中的一些内容：

```
class gsl_function_pp : public gsl_function
{
public:
    gsl_function_pp(boost::function<double(double)> const& func) : _func(func)
    {
        function=&gsl_function_pp::invoke;
        params=this;
    }
private:
    boost::function<double(double)> _func;

    static double invoke(double x, void *params)
    {
        return static_cast<gsl_function_pp*>(params)->_func(x);
    }
}; 
```

这应该为您提供（由于涉及多个间接，可能会导致适度的性能损失）您想要的功能类型：

```
class MyClass
{
    double foo(double x)
    {
        ...
    }

    double bar(double x)
    {
        gsl_function_pp F(boost::bind(&MyClass::foo, this, _1));
        // invoke GSL function passing in F
        ...
    }
}; 
```

The caveat is that you'll have to ensure that any `gsl_function_pp` object stays in scope for the entire time that the GSL might invoke it. So, don't try to set up a root finder/etc in one function (using a local gsl_function_pp), return, and then perform root finding iterations in another -- you'll get a crash or worse.

# scheme - 与数学运算符的字符关联

> ID：10593731
> 
> 赞同：3
> 
> 时间：2012-05-15T03:20:43.313
> 
> 标签：scheme, operators, character, racket

有没有办法将字符与数学运算符相关联？

例如，如果我可以将字母“b”关联为加法，那么

> (b 2 2)

输出

> 4

这可能吗？如果是这样，我可以使用任何材料或示例作为指南吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T03:40:42.823

这很简单，看：

```
(define b +)
(b 2 2)
> 4 
```

现在`b`是`+`. 您可以使用相同的想法为您想要的任何*过程*创建别名，使用任何名称（不限于单字符名称）。请注意，它不适用于其他特殊形式；例如这将产生一个错误：

```
(define my-and and) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T09:11:03.823

措辞有点偏离（把它当作一个友好的说明）。

在 Scheme/Racket 中，数学函数 +、-、* 等不是关键字，因为它们在许多编程语言中都是如此。它们只是名称。

表达式 + 计算为一个值，即可以添加数字的函数。为了引入您自己的值名称，您可以使用`define`.

```
(define plus +) 
```

`plus`为计算 + 产生的值命名。因此，您可以给出自己的单字母名称，例如

```
(define p +) 
```

但是，单字母名称不是字符。字符是字符串的组成部分。

# ios - 使核心数据线程安全

> ID：10593735
> 
> 赞同：14
> 
> 时间：2012-05-15T03:20:56.167
> 
> 标签：ios, multithreading, core-data, concurrency

长话短说，我厌倦了与相关的荒谬并发规则`NSManagedObjectContext`（或者更确切地说，如果您尝试`NSManagedObjectContext`跨线程共享，它完全不支持并发并且倾向于爆炸或做其他不正确的事情），并且正在尝试实现一个线程安全的变体。

基本上我所做的是创建一个子类来跟踪创建它的线程，然后将所有方法调用映射回该线程。这样做的机制有点复杂，但关键是我有一些辅助方法，例如：

```
- (NSInvocation*) invocationWithSelector:(SEL)selector {
    //creates an NSInvocation for the given selector
    NSMethodSignature* sig = [self methodSignatureForSelector:selector];    
    NSInvocation* call = [NSInvocation invocationWithMethodSignature:sig];
    [call retainArguments];
    call.target = self;

    call.selector = selector;

    return call;
}

- (void) runInvocationOnContextThread:(NSInvocation*)invocation {
    //performs an NSInvocation on the thread associated with this context
    NSThread* currentThread = [NSThread currentThread];
    if (currentThread != myThread) {
        //call over to the correct thread
        [self performSelector:@selector(runInvocationOnContextThread:) onThread:myThread withObject:invocation waitUntilDone:YES];
    }
    else {
        //we're okay to invoke the target now
        [invocation invoke];
    }
}

- (id) runInvocationReturningObject:(NSInvocation*) call {
    //returns object types only
    [self runInvocationOnContextThread:call];

    //now grab the return value
    __unsafe_unretained id result = nil;
    [call getReturnValue:&result];
    return result;
} 
```

...然后子类按照`NSManagedContext`如下模式实现接口：

```
- (NSArray*) executeFetchRequest:(NSFetchRequest *)request error:(NSError *__autoreleasing *)error {
    //if we're on the context thread, we can directly call the superclass
    if ([NSThread currentThread] == myThread) {
        return [super executeFetchRequest:request error:error];
    }

    //if we get here, we need to remap the invocation back to the context thread
    @synchronized(self) {
        //execute the call on the correct thread for this context
        NSInvocation* call = [self invocationWithSelector:@selector(executeFetchRequest:error:) andArg:request];
        [call setArgument:&error atIndex:3];
        return [self runInvocationReturningObject:call];
    }
} 
```

...然后我用一些代码测试它：

```
- (void) testContext:(NSManagedObjectContext*) context {
    while (true) {
        if (arc4random() % 2 == 0) {
            //insert
            MyEntity* obj = [NSEntityDescription insertNewObjectForEntityForName:@"MyEntity" inManagedObjectContext:context];
            obj.someNumber = [NSNumber numberWithDouble:1.0];
            obj.anotherNumber = [NSNumber numberWithDouble:1.0];
            obj.aString = [NSString stringWithFormat:@"%d", arc4random()];

            [context refreshObject:obj mergeChanges:YES];
            [context save:nil];
        }
        else {
            //delete
            NSArray* others = [context fetchObjectsForEntityName:@"MyEntity"];
            if ([others lastObject]) {
                MyEntity* target = [others lastObject];
                [context deleteObject:target];
                [context save:nil];
            }
        }
        [NSThread sleepForTimeInterval:0.1];
    }
} 
```

所以本质上，我启动了一些针对上述入口点的线程，它们随机创建和删除实体。这几乎可以正常工作。

问题是，每隔一段时间，一个线程就会`EXC_BAD_ACCESS`在调用时得到一个`obj.<field> = <value>;`。我不清楚问题是什么，因为如果我`obj`在调试器中打印，一切看起来都很好。关于问题可能是什么的任何建议（*除了Apple建议不要继承 NSManagedObjectContext 的事实*）以及如何解决它？

PS 我知道 GCD 和`NSOperationQueue`其他通常用于“解决”这个问题的技术。这些都没有提供我想要的东西。我正在寻找的是一个`NSManagedObjectContext`可以自由、安全、直接地被任意数量的线程用来查看和更改应用程序状态而不需要任何外部同步的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T04:20:31.880

正如 noa 正确指出的那样，问题在于，尽管我使`NSManagedObjectContext`线程安全，但我并没有将`NSManagedObject`实例本身设置为线程安全的。线程安全上下文和非线程安全实体之间的交互导致了我的周期性崩溃。

如果有人感兴趣，我`NSManagedObject`通过注入我自己的 setter 方法来代替 Core Data 通常会生成的（一些）方法，从而创建了一个线程安全的子类。这是使用如下代码完成的：

```
//implement these so that we know what thread our associated context is on
- (void) awakeFromInsert {
    myThread = [NSThread currentThread];
}
- (void) awakeFromFetch {
    myThread = [NSThread currentThread];
}

//helper for re-invoking the dynamic setter method, because the NSInvocation requires a @selector and dynamicSetter() isn't one
- (void) recallDynamicSetter:(SEL)sel withObject:(id)obj {
    dynamicSetter(self, sel, obj);
}

//mapping invocations back to the context thread
- (void) runInvocationOnCorrectThread:(NSInvocation*)call {
    if (! [self myThread] || [NSThread currentThread] == [self myThread]) {
        //okay to invoke
        [call invoke];
    }
    else {
        //remap to the correct thread
        [self performSelector:@selector(runInvocationOnCorrectThread:) onThread:myThread withObject:call waitUntilDone:YES];
    }
}

//magic!  perform the same operations that the Core Data generated setter would, but only after ensuring we are on the correct thread
void dynamicSetter(id self, SEL _cmd, id obj) {
    if (! [self myThread] || [NSThread currentThread] == [self myThread]) {
        //okay to execute
        //XXX:  clunky way to get the property name, but meh...
        NSString* targetSel = NSStringFromSelector(_cmd);
        NSString* propertyNameUpper = [targetSel substringFromIndex:3];  //remove the 'set'
        NSString* firstLetter = [[propertyNameUpper substringToIndex:1] lowercaseString];
        NSString* propertyName = [NSString stringWithFormat:@"%@%@", firstLetter, [propertyNameUpper substringFromIndex:1]];
        propertyName = [propertyName substringToIndex:[propertyName length] - 1];

        //NSLog(@"Setting property:  name=%@", propertyName);

        [self willChangeValueForKey:propertyName];
        [self setPrimitiveValue:obj forKey:propertyName];
        [self didChangeValueForKey:propertyName];

    }
    else {
        //call back on the correct thread
        NSMethodSignature* sig = [self methodSignatureForSelector:@selector(recallDynamicSetter:withObject:)];
        NSInvocation* call = [NSInvocation invocationWithMethodSignature:sig];
        [call retainArguments];
        call.target = self;
        call.selector = @selector(recallDynamicSetter:withObject:);
        [call setArgument:&_cmd atIndex:2];
        [call setArgument:&obj atIndex:3];

        [self runInvocationOnCorrectThread:call];
    }
}

//bootstrapping the magic; watch for setters and override each one we see
+ (BOOL) resolveInstanceMethod:(SEL)sel {
    NSString* targetSel = NSStringFromSelector(sel);
    if ([targetSel startsWith:@"set"] && ! [targetSel contains:@"Primitive"]) {
        NSLog(@"Overriding selector:  %@", targetSel);
        class_addMethod([self class], sel, (IMP)dynamicSetter, "v@:@");
        return YES;
    }

    return [super resolveInstanceMethod:sel];
} 
```

这与我的线程安全上下文实现相结合，解决了问题并得到了我想要的；一个线程安全的上下文，我可以将它传递给我想要的任何人，而不必担心后果。

当然，这不是万无一失的解决方案，因为我至少确定了以下限制：

```
/* Also note that using this tool carries several small caveats:
 *
 *      1\.  All entities in the data model MUST inherit from 'ThreadSafeManagedObject'.  Inheriting directly from 
 *          NSManagedObject is not acceptable and WILL crash the app.  Either every entity is thread-safe, or none 
 *          of them are.
 *
 *      2\.  You MUST use 'ThreadSafeContext' instead of 'NSManagedObjectContext'.  If you don't do this then there 
 *          is no point in using 'ThreadSafeManagedObject' (and vice-versa).  You need to use the two classes together, 
 *          or not at all.  Note that to "use" ThreadSafeContext, all you have to do is replace every [[NSManagedObjectContext alloc] init]
 *          with an [[ThreadSafeContext alloc] init].
 *
 *      3\.  You SHOULD NOT give any 'ThreadSafeManagedObject' a custom setter implementation.  If you implement a custom 
 *          setter, then ThreadSafeManagedObject will not be able to synchronize it, and the data model will no longer 
 *          be thread-safe.  Note that it is technically possible to work around this, by replicating the synchronization
 *          logic on a one-off basis for each custom setter added.
 *
 *      4\.  You SHOULD NOT add any additional @dynamic properties to your object, or any additional custom methods named
 *          like 'set...'.  If you do the 'ThreadSafeManagedObject' superclass may attempt to override and synchronize 
 *          your implementation.
 *
 *      5\.  If you implement 'awakeFromInsert' or 'awakeFromFetch' in your data model class(es), thne you MUST call 
 *          the superclass implementation of these methods before you do anything else.
 *
 *      6\.  You SHOULD NOT directly invoke 'setPrimitiveValue:forKey:' or any variant thereof.  
 *
 */ 
```

但是，对于大多数典型的中小型项目，我认为线程安全数据层的好处远远超过了这些限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T05:06:42.437

为什么不使用提供的并发类型之一来实例化您的上下文，并利用 performBlock / performBlockAndWait？

这实现了必要的线程限制，不得不破坏 Core Data 的访问器方法的实现。您很快就会发现，这对于您的用户来说要么是非常痛苦，要么是非常糟糕的结局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-10T21:27:16.777

Bart Jacobs 的一篇很棒的教程，题为：[*Core Data from Scratch：Concurrency*](http://code.tutsplus.com/tutorials/core-data-from-scratch-concurrency--cms-22131)，适用于那些需要 iOS 5.0 或更高版本和/或 Lion 或更高版本的优雅解决方案的人。详细描述了两种方法，更优雅的解决方案涉及父/子托管对象上下文。

# c - 来自 OS X (C) 接口的 MAC 地址

> ID：10593736
> 
> 赞同：7
> 
> 时间：2012-05-15T03:20:57.300
> 
> 标签：c, macos, interface, ethernet, iokit

这可能是一个愚蠢的问题，如果这里已经解决了，我深表歉意，但我已经搜索了很多，但运气不佳。我正在尝试在 C 中获取接口的硬件地址，并且正在使用 OS X (x86-64)。我知道如何获取它`ifconfig`，但我希望我的程序能够为任何计算机自动获取它，至少是 OS X 计算机。我发现另一个发布此[链接](https://developer.apple.com/library/mac/#samplecode/GetPrimaryMACAddress/Listings/GetPrimaryMACAddress_GetPrimaryMACAddress_c.html#//apple_ref/doc/uid/DTS10000698-GetPrimaryMACAddress_GetPrimaryMACAddress_c-DontLinkElementID_3)的线程几乎可以满足我的要求（进行了一些修改），但我无法在其中创建`iokit`函数链接`ld`（我的编译器是`gcc`）。我尝试将标志添加到`-lIOKit`命令行，但仍然遇到相同的链接错误。这是我的代码的链接：[header](http://pastebin.com/bhF4U6Pc)和[source](http://pastebin.com/82CQbwKA)。`-framework IOKit``gcc`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T03:27:43.517

[这个小程序](http://lists.freebsd.org/pipermail/freebsd-hackers/2004-June/007415.html)无需更改即可在 OSX 上运行。

代码：（来自 freebsd 列表的 Alecs King 的学分）

```
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <sys/sysctl.h>
#include <net/if.h>
#include <net/if_dl.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    int         mib[6], len;
    char            *buf;
    unsigned char       *ptr;
    struct if_msghdr    *ifm;
    struct sockaddr_dl  *sdl;

    if (argc != 2) {
        fprintf(stderr, "Usage: getmac <interface>\n");
        return 1;
    }

    mib[0] = CTL_NET;
    mib[1] = AF_ROUTE;
    mib[2] = 0;
    mib[3] = AF_LINK;
    mib[4] = NET_RT_IFLIST;
    if ((mib[5] = if_nametoindex(argv[1])) == 0) {
        perror("if_nametoindex error");
        exit(2);
    }

    if (sysctl(mib, 6, NULL, &len, NULL, 0) < 0) {
        perror("sysctl 1 error");
        exit(3);
    }

    if ((buf = malloc(len)) == NULL) {
        perror("malloc error");
        exit(4);
    }

    if (sysctl(mib, 6, buf, &len, NULL, 0) < 0) {
        perror("sysctl 2 error");
        exit(5);
    }

    ifm = (struct if_msghdr *)buf;
    sdl = (struct sockaddr_dl *)(ifm + 1);
    ptr = (unsigned char *)LLADDR(sdl);
    printf("%02x:%02x:%02x:%02x:%02x:%02x\n", *ptr, *(ptr+1), *(ptr+2),
            *(ptr+3), *(ptr+4), *(ptr+5));

    return 0;
} 
```

但是，您应该更改`int len;`为`size_t len;`

# amazon-ec2 - 在 Amazon EC2 上运行 NServiceBus

> ID：10593739
> 
> 赞同：9
> 
> 时间：2012-05-15T03:21:11.213
> 
> 标签：amazon-ec2, nservicebus, esb

因此，我从一年 +/- 前看到了许多参考资料和链接，询问[对 Amazon EC2 上的 NServiceBus 的](https://stackoverflow.com/questions/7403838/using-nservicebus-in-an-amazon-ec2-hosted-application)支持。想知道最近是否有人试图对此做任何事情？

我看过以下文章/帖子，但担心信息和相关链接已过时。

[在 Amazon EC2 上使用 NServiceBus 的不太积极的体验](http://meisinger2.wordpress.com/2010/08/21/head-in-the-clouds/)
[正确的想法，对此有何进展？](http://tech.dir.groups.yahoo.com/group/nservicebus/message/258)
[Azure Love，但没有亚马逊？](http://tech.groups.yahoo.com/group/nservicebus/message/13085)

我在 NServiceBus 论坛上看到很多关于“下一个版本”的讨论，主要关注对云的支持（当时当前版本是 2.5）。我有一个场景，我想在 Amazon EC2 实例集群上运行带有 MSMQ 或 RabbitMQ 的 NServiceBus，但我担心没有更多关于人们在 Amazon 上实际使用 NServiceBus 的讨论。

有人成功地做到了，或者有理由避免考虑它吗？

[编辑] - 有谁知道使用保留实例是否可以解决上面文章中描述的 EC2 重启问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T02:07:02.763

在 EC2 上成功运行 NServiceBus 有多种方法。选择使用哪个选项需要权衡成本、可扩展性和运营开销之间的平衡。

## MSMQ

NServiceBus 在带有 MSMQ 的 EC2 上运行良好，但有一些障碍需要注意。主要问题是 EC2 实例上的计算机名称/DNS 名称在每次重启期间都会发生变化。这是一个问题，因为在向端点发送消息以及订阅消息时都会使用计算机名称。克服此开销的一个简单选项是将弹性 IP 附加到实例并使用其 DNS 名称。这样做的好处是很容易做到这一点。缺点是默认情况下您只能获得 5 个弹性 IP。您可以要求更多，而且亚马逊通常会非常慷慨地提供额外的弹性 IP。您的扩展方式也将受到限制。例如，您将无法简单地插入 AWS 的弹性扩展功能。您还必须处理备份。

如果您想使用消息传递，我会选择此选项，但您没有真正疯狂的 SLA，您不需要快速扩展和缩减机器，并且您不需要处理大量消息。大多数项目都是这种情况。

## 亚马逊 SQS

You could write a custom transport for SQS. The benefit of using NSB with SQS remote queues is that you get highly available queues, you don't have to manage them on your EC2 instances & you don't have to worry about backups. It's also easier to leverage elastic scaling with this approach. The downside is that each read costs $$$, so it may not be economically feasible to read at the same speeds as MSMQ or RabbitMQ - although this problem is mitigated by support for long polling and the ability to download many messages in a single call. Another downside is that it doesn't support distributed transactions with DTC. If you're using NServiceBus 5 or later, you could implement the Outbox pattern in your transport as described [here](http://docs.particular.net/nservicebus/no-dtc), to ensure your messages are still processed only once. Otherwise it's up to you to ensure that your endpoints and handlers have idempotency solutions in place. You can play around with speed vs cost by adjusting the polling intervals of each of your endpoints & perhaps even have a back-off strategy where you decrease your polling intervals if you haven't received messages in a while. You will also have to worry about the size of your messages, as SQS has a small size limitation (256 K). You don't hit this in most messages.

I'd pick this option if read / write speeds aren't an issue, but you don't want to worry about operationally supporting your queuing infrastructure.

## RabbitMQ

I haven't personally played with RabbitMQ on EC2, but a quick search came up with a few articles on how to get it up and running on an EC2 instance. There is a mature RabbitMQ transport available and it supports guaranteed once-only processing of messages as of NServiceBus version 5, as described in the link above. This would be cheaper to operate than SQS & I've heard that it's easier to cluster than MSMQ. Finally, like MSMQ, you would have to come up with a backup strategy (probably using snapshots).

## Mixed

Nobody says that you have to pick one queuing system. You could use SQS for endpoints that need high availability & you don't mind paying the $$$, then use MSMQ / RabbitMQ for the rest of your system.

# jquery - 我想在我的网页上创建一个按钮，如果可能的话，可以使用 jquery 在同一页面上激活选项卡的操作

> ID：10593749
> 
> 赞同：0
> 
> 时间：2012-05-15T03:22:30.700
> 
> 标签：jquery, html, jquery-ui, button, scrollto

我目前在我的页面上有一个选项卡（使用 Jquery UI 创建），单击该选项卡会展开一些在页面加载时折叠的内容。我希望能够通过按网站上的单独按钮来激活该选项卡的操作。例如，这里是使用 Jquery UI 核心和 scrollTo 插件使选项卡工作的 jquery 脚本：

```
<script type="text/javascript">
$(function() {
    $( "#tabs" ).tabs({
        collapsible: true,
        selected: -1
    });
});
</script>
<script type="text/javascript">
$(function(){
    $(".scrolltoanchor").click(function(){
        $.scrollTo($($(this).attr("href")), {
            duration: 750
        });
        return false;
    });
});
</script> 
```

选项卡如下所示：

```
<div id="tabs">
    <ul>
        <li ><a href="#testimonial" class="scrolltoanchor">Testimonials</a></li>
    </ul>
    <div id="testimonial">
        <p>THE CONTENT IS HERE</p>
    </div>
</div> 
```

所以我想在页面上的其他地方放置一个按钮来扩展这个内容并滚动到内容，基本上这个按钮，当点击时，会做“推荐”选项卡所做的事情`<li>`。它会扩展#testimonial，并滚动到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:41:29.327

你不能在元素上使用[.trigger()](http://api.jquery.com/trigger/)函数吗？

例如，如果您有一个 ID 为 'button' 的元素，则以下代码应该执行您想要的操作：

```
$('#button').click(function(){
    $('.scrolltoanchor').trigger('click');
});
​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/YG4HC/)**。

# android - Google Play 商店警告更新的 APK 支持的设备减少

> ID：10593751
> 
> 赞同：0
> 
> 时间：2012-05-15T03:23:04.483
> 
> 标签：android

在我的应用程序的最新版本中，我更新了清单文件以包括对 ICS 版本的支持。激活 APK 文件时，我收到一条警告（我显然忽略了）关于最新版本支持的设备比以前版本少。那天晚些时候，我在论坛上看到了几个帖子，用户说他们的 APP 与他们的设备消息不兼容。清单中的当前信息如下所示：

```
 <uses-sdk
    android:maxSdkVersion="15"
    android:minSdkVersion="7" 
    android:targetSdkVersion="14"/> 
```

清单中的先前版本具有以下信息

```
 <uses-sdk
    android:maxSdkVersion="14"
    android:minSdkVersion="7" /> 
```

我使用 targetSDK 作为 14 来启用操作栏。知道为什么尽管 maxSDK 是 15 而不是 14，这会导致更少的设备支持吗？任何帮助将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:26:56.027

第一的：

检查您是否添加了任何限制设备数量的新权限，例如`'android.hardware.touchscreen`权限。

“您设置为活动的 APK 具有阻止它在您之前支持的某些设备上运行的新功能/权限。因此，由于您的更新而不再受支持的那些设备将不会收到更新，因为它们没有支持它。”

下一个：

尝试删除您`targetSdkVersion`的`AndroidManifest.xml`. 然后您可以尝试将文件添加到与内容`project.properties`相同的目录级别`AndroidManifest.xml`：

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system use,
# "ant.properties", and override values to adapt the script to your
# project structure.

# Project target.
target=android-14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:38:27.647

根据我的用户回复，我能够确认只有拥有自定义 ROM 的人才能收到不兼容的消息，但后来能够从市场上获得更新。因此，对于仅使用自定义 ROM 且与我之前怀疑的 android:targetSdkVersion 无关的用户来说，这很可能是一个问题。

# batch-file - 使用 MRT 批量处理 MODIS 数据？

> ID：10593758
> 
> 赞同：0
> 
> 时间：2012-05-15T03:24:08.157
> 
> 标签：batch-file, satellite-image

我想使用 MRT-MODIS Reprojection Tools 批量拼接 MODIS MCD15A2 数据，这是我的脚本：

```
set  MRTDATADIR = D:/mrt/data
set /a DAY=2011009   
set /a DEADLINE=2011017  
:start
if %DAY% leq %DEADLINE% (goto ORDER) else exit
:ORDER
dir *%DAY%.*.hdf/a/b/s > MOSAICINPUT.TXT
d:/mrt/bin/mrtmosaic.exe -i MOSAICINPUT.TXT -s "0 1 0 0 0 0" -o MOSAIC_TMP_%DAY%.hdf 
copy MOSAIC_TMP_%DAY%.hdf  Result & del MOSAIC_TMP_%DAY%.hdf
del *%DAY%.*.hdf
set /a DAY= %DAY% + 8 
goto start 
```

它没有用，我收到“警告：CheckMosaicArgs：常规处理：处理镶嵌工具的 (MOSAICINPUT.TXT) 中的 input_filenames 时出错”

我怎样才能解决这个问题？我正在使用windows7。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:25:40.870

尝试一步一步调试你的BAT文件。

不要运行 BAT 文件，而是执行命令行中的每个命令

1.  首先

    ```
    dir *2011009.*.hdf /a /b /s 
    ```

    研究命令的输出。确保`dir`命令产生您期望的结果，返回您期望处理的文件。

2.  将 dir 命令重定向到`MOSAICINPUT.TXT`文件。确保输入文件列表`MOSAICINPUT.TXT`确实具有`mrtmosaic`. 确保`mrtmosaic`接受文件列表作为输入文件。请特别注意子目录的内容和文件名的格式，寻找以后可能不会被 mrtmosaic 吞下的空格或其他特殊字符。可能是 mrtmosaic 不喜欢反斜杠或空格或...

3.  执行

    ```
    d:/mrt/bin/mrtmosaic.exe -i MOSAICINPUT.TXT -s "0 1 0 0 0 0" -o MOSAIC_TMP_2011009.hdf 
    ```

    仔细阅读错误信息。一次更正一个问题，再次运行该命令。

# android - Android - unregisterReceiver 概念详解？

> ID：10593759
> 
> 赞同：1
> 
> 时间：2012-05-15T03:24:09.320
> 
> 标签：android, broadcastreceiver

我很困惑`unregisterReceiver()`。如果我们之前在代码中注册了接收器，是否必须取消注册它。我已经看到有时我们没有取消注册它，但一切正常，但有时我们需要取消注册它以摆脱运行时异常。

请详细解释这个概念，如果可能的话，请举例说明。我试过读几本书，但没有一本解释过，所以如果你知道一些可以很好解释的书，请告诉我。

我真的很感激你的努力。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:57:38.527

不，取消注册您的接收器不是强制性的。如果您不取消注册，接收器将继续从 Android 接收它注册的 Intent。当您不想再接收任何广播时，您应该取消注册它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-16T04:27:51.707

这个例子可能会有所帮助..

通过示例更好地学习

```
 package com.commonsware.android.shaker;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ScrollView;
import android.widget.TextView;

public class ShakerDemo extends Activity
  implements Shaker.Callback {
  private Shaker shaker=null;
  private TextView transcript=null;
  private ScrollView scroll=null;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    transcript=(TextView)findViewById(R.id.transcript);
    scroll=(ScrollView)findViewById(R.id.scroll);

    shaker=new Shaker(this, 1.25d, 500, this);
  }

  @Override
  public void onDestroy() {
    super.onDestroy();

    shaker.close();
  }

  public void shakingStarted() {
    Log.d("ShakerDemo", "Shaking started!");
    transcript.setText(transcript.getText().toString()+"Shaking started\n");
    scroll.fullScroll(View.FOCUS_DOWN);
  }

  public void shakingStopped() {
    Log.d("ShakerDemo", "Shaking stopped!");
    transcript.setText(transcript.getText().toString()+"Shaking stopped\n");
    scroll.fullScroll(View.FOCUS_DOWN);
  }
}

package com.commonsware.android.shaker;

import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.SystemClock;
import java.util.ArrayList;
import java.util.List;

public class Shaker {
  private SensorManager mgr=null;
  private long lastShakeTimestamp=0;
  private double threshold=1.0d;
  private long gap=0;
  private Shaker.Callback cb=null;

  public Shaker(Context ctxt, double threshold, long gap,
                  Shaker.Callback cb) {
    this.threshold=threshold*threshold;
    this.threshold=this.threshold
                    *SensorManager.GRAVITY_EARTH
                    *SensorManager.GRAVITY_EARTH;
    this.gap=gap;
    this.cb=cb;

    mgr=(SensorManager)ctxt.getSystemService(Context.SENSOR_SERVICE);
    mgr.registerListener(listener,
                          mgr.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                          SensorManager.SENSOR_DELAY_UI);
  }

  public void close() {
    mgr.unregisterListener(listener);
  }

  private void isShaking() {
    long now=SystemClock.uptimeMillis();

    if (lastShakeTimestamp==0) {
      lastShakeTimestamp=now;

      if (cb!=null) {
        cb.shakingStarted();
      }
    }
    else {
      lastShakeTimestamp=now;
    }
  }

  private void isNotShaking() {
    long now=SystemClock.uptimeMillis();

    if (lastShakeTimestamp>0) {
      if (now-lastShakeTimestamp>gap) {
        lastShakeTimestamp=0;

        if (cb!=null) {
          cb.shakingStopped();
        }
      }
    }
  }

  public interface Callback {
    void shakingStarted();
    void shakingStopped();
  }

  private SensorEventListener listener=new SensorEventListener() {
    public void onSensorChanged(SensorEvent e) {
      if (e.sensor.getType()==Sensor.TYPE_ACCELEROMETER) {
        double netForce=e.values[0]*e.values[0];

        netForce+=e.values[1]*e.values[1];
        netForce+=e.values[2]*e.values[2];

        if (threshold<netForce) {
          isShaking();
        }
        else {
          isNotShaking();
        }
      }
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
      // unused
    }
  };
} 
```

# iphone - 以模态方式呈现的 NavigationController 内委托给 SecondViewController

> ID：10593768
> 
> 赞同：0
> 
> 时间：2012-05-15T03:25:13.240
> 
> 标签：iphone, objective-c, delegation

我真的不知道如何用最少和最清楚的词来表达这个问题。但我会尽力而为。

我有一个类 ShoppingCartVC，我想向其中添加产品。因此，我以模态方式呈现 CategoriesVC。当我在 tableView 行中选择一个类别时，它会转到包含该类别中所有产品的 ProductsVC。所以现在我可以选择一个产品。但是如何将选定的对象发送回 ShoppingCartVC？在使用委托之前，我能够成功地实现这一点，但那是我没有 CategoriesVC 的时候。我只是直接转至 ProductsVC，因此在转场之前，我可以将 ShoppingCartVC（呈现 VC）设置为 ProductsVC 的代表，并在选择产品时将其关闭。

但是现在由于 ProductsVC 在我的 navigationController 中是 VC 层次结构的 1VC，所以我不能这样做。

我尝试搜索 NSNotification 但这似乎不是正确的解决方案。

我该如何解决这个问题？希望你能给我一些示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:49:18.493

也许我遗漏了一些东西，但是将 ShoppingCartVC 的引用从 CategoriesVC 传递到 ProductsVC 有什么问题？您应该能够使用委托模式或发布 ShoppingCartVC 正在侦听的 NSNotification 来完成您正在寻找的事情。

另一种方法是创建一个购物车单例（具有包含每个产品的购物车数组属性的 NSObject），您可以从任何地方添加项目，然后当您的 ShoppingCartVC 出现时，更新您所在的购物车的内容显示单例对象的当前内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T06:50:31.613

我认为委托模式是解决您问题的最佳方法。

在这种情况下有 3 个 ViewController：

1.  ShoppingCartViewController
2.  类别视图控制器
3.  产品视图控制器

ShoppingCartViewController 从 CategoryViewController 获取类别。

ShoppingCartViewController 从 ProductViewController 获取产品。

解决方案：

*   创建协议`CategoryViewControllerDelegate`和`ProductViewControllerDelegate`.

CategoryViewControllerDelegate

```
@protocol CategoryViewControllerDelegate <NSObject>
...
- (void)categoryViewController:(CategoryViewController *)categoryViewController didSelectCategoryAtIndex:(int)index;
...
@end 
```

ProductViewControllerDelegate

```
@protocol ProductViewControllerDelegate <NSObject>
...
- (void)productViewController:(ProductViewController *)productViewController didSelectCategoryAtIndex:(int)index;
...
@end 
```

*   在 ShoppingCartViewController 中实现协议并将 UINavigationController 显示为模态， CategoryViewController 为`rootViewController`.

*   从中获取所选类别`categoryViewController:didSelectCategoryAtIndex:`并将 productViewController 推送到 navigationController。

将 productViewController 推送到 navigationController

```
ProductViewController *productViewController = [ProductViewController new];
productViewController.delegate = self;
[categoryViewController.navigationViewController pushViewController:productViewController animated:YES]; 
```

您可以在 ShoppingCartViewController 中获得类别和产品。

# objective-c - 在 iOS5 视图控制器中创建链接/按钮动态列表的最佳方法

> ID：10593770
> 
> 赞同：1
> 
> 时间：2012-05-15T03:25:24.083
> 
> 标签：objective-c, ios

我想在 iOS5 视图控制器中创建一组动态链接/按钮，并试图找出最好的方法。

例如：

项目 1 项目 2 项目 3 : : 项目 N

每个项目都是一个可点击的链接/按钮，并将执行一些操作，例如基于链接加载另一个屏幕等。

我不提前知道可能有多少项目，所以如果所有项目都不适合屏幕，我需要能够滚动查看。

我的问题： 1\. 这样做的更好方法是什么？我可以动态地创建标签和按钮，但这似乎相当麻烦，而且我不完全确定如何区分不同的按钮（基本上我需要一些索引来找出单击了哪个项目）。2\. 或者，我想知道我是否可以将此页面呈现为 HTML 并且只有链接？我从来没有这样做过，也不知道如何将按钮与链接相关联。

有什么建议么？

AK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:58:20.187

1.  您可以尝试使用该`tag`属性来存储您在创建按钮时需要的索引值。然后通过使用访问在按钮点击处理程序中对其进行评估`button.tag`。

2.  也许您可以尝试[Cordova](http://incubator.apache.org/cordova/)的基于 HTML 的方法。不过我对它不是很熟悉，所以我不能肯定。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T06:11:06.563

`tag`(1) 您可以根据按钮索引分配 UIButton属性。如果要触发任何事件，您可以通过检查来识别该事件属于哪个按钮`tag`。

样本 ：

```
// Initializing some buttons
UIButton *button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button1.tag = 1;
[button1 addTarget:self 
            action:@selector(buttonPushed:) 
  forControlEvents:UIControlEventTouchUpInside];
UIButton *button2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button2.tag = 2;
[button2 addTarget:self 
            action:@selector(buttonPushed:) 
  forControlEvents:UIControlEventTouchUpInside]; 
```

按钮事件选择器：

```
- (void)buttonPushed:(id)sender {
    ...
    if ([sender tag] == 1) {
        // do something after button1 event
    } else if () {
        // do something after button2 event
    }
    ...
} 
```

(2) 如果您选择使用 HTML，您可以查看[CMHTMLView](https://github.com/mureev/CMHTMLView)

# asp.net - 当我拥有 Membership.GetUser().ProviderUserKey 时，MVC3 从另一个表中获取 Id

> ID：10593774
> 
> 赞同：2
> 
> 时间：2012-05-15T03:26:30.493
> 
> 标签：asp.net, asp.net-mvc-3, controller, membership-provider

我对 MVC 世界比较陌生，正在开发一个使用默认 Microsoft 会员提供程序的 MVC3、C# .Net、EF4 应用程序。要求将一些附加字段附加到成员资格提供程序表中，这有助于为每个用户构成扩展配置文件。（保存此数据的表称为 Profile，它有一个 ProfileId INT 的 PK，还保存了来自 aspnet_Users/aspnet_Membership 的 UserId 的 FK。）

我想为新用户提供在注册后立即填写个人资料的机会，因此我将他们重定向到一个页面，他们可以在其中立即为个人资料表输入我们想要的值。注册工作正常。用户已创建，数据库中的配置文件记录也是如此。

出错的地方是当我让用户进入该配置文件编辑页面时，我尝试提取他们的数据。我将进入 System.Web.Security.Membership.GetUser().ProviderUserKey 以获取 UserId，然后基于此查找他们的 Profile 记录。

这确实有效，我以为我已经弄清楚了，但我一定在某个地方犯了错误，现在无法让它正常工作。该错误消息相当笼统，似乎表明您无法使用 UserId 的 GUID 值找到 ProfileId INT 值。

```
 // GET: /Profile/Entry/

    public ActionResult Entry()
    {
        Guid currentUser = (Guid)System.Web.Security.Membership.GetUser().ProviderUserKey;
        Profile profile = db.Profiles.Find(currentUser);
        ViewBag.UserId = new SelectList(db.aspnet_Users, "UserId", "UserName", profile.UserId);
        return View(profile);
    } 
```

现在错误消息：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

The argument types 'Edm.Int32' and 'Edm.Guid' are incompatible for this operation. Near     WHERE predicate, line 1, column 76\. 
Description: An unhandled exception occurred during the execution of the current web     request. Please review the stack trace for more information about the error and where it     originated in the code. 

Exception Details: System.Data.EntitySqlException: The argument types 'Edm.Int32' and     'Edm.Guid' are incompatible for this operation. Near WHERE predicate, line 1, column 76.

Source Error: 
Line 127:        {
Line 128:            Guid currentUser = (    Guid)System.Web.Security.Membership.GetUser().ProviderUserKey;
Line 129:            Profile profile = db.Profiles.Find(currentUser);
Line 130:            ViewBag.UserId = new SelectList(db.aspnet_Users, "UserId",     "UserName", profile.UserId);
Line 131:            return View(profile); 
```

即使默认/假定的 Id 列是 ProfileId INT，关于如何专门针对 db.Profiles.Find(currentUser) 查找 UserId GUID 值的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T03:32:33.893

Find 根据其主键搜索表，在您的情况下，主键是一个 int 并且与 Membership Provider Key（它是一个 guid）无关。所以你不能使用查找。

相反，请使用 Linq 查询，例如：

```
Profile profile = db.Profiles.Where(x => x.AspMembershipUserID == currentUser).FirstOrDefault(); 
```

# xml - read_xml() 由于缺少双引号而引发异常

> ID：10593788
> 
> 赞同：-1
> 
> 时间：2012-05-15T03:29:00.290
> 
> 标签：xml, boost, boost-propertytree

我使用 boost::property_tree 对象来解析 xml，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <node attr="attr_str"/>
</root> 
```

当我调用 read_xml() 来解析这个内容时，它运行良好。**但是，如果我像这样删除attr**属性周围的那些双引号：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <node attr=attr_str/>
</root> 
```

它抛出**xml_parse_error**异常。

是否可以设置任何标志来忽略对双引号的检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:33:07.123

必须引用 XML 属性：

[http://www.w3schools.com/xml/xml_attributes.asp](http://www.w3schools.com/xml/xml_attributes.asp)

您将需要包含这些引号 - 否则它是无效标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T07:39:30.327

获得正确内容的责任在于生产者而不是消费者，这在很大程度上是 XML 哲学的一部分。这是因为生成正确的 XML 比修复错误的 XML 更容易也更便宜。阅读 XML 的人比编写它的人多得多。如果您发现自己被那些不了解这种对质量态度的人所生成的 XML（或者更确切地说是非 XML）所困扰，那么您就会遇到一个棘手的问题。

# python - MSDN 对 python 程序员的帮助

> ID：10593791
> 
> 赞同：0
> 
> 时间：2012-05-15T03:29:40.330
> 
> 标签：python, msdn

我是 python 新手，来自 C# 世界。是否有任何类似 MSDN 的帮助可供 python 程序员使用，我可以在其中搜索类、它们的方法属性等。

谢谢，泰摩尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:57:18.217

可以使用pydoc。例如，你想对*文件*类中的所有方法进行细化：

1.  在 Linux 终端中，键入*pydoc 文件*
2.  像 Vim 一样，要搜索你想要的方法，使用 j/k 键导航或 / 键查找

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:09:54.093

从关闭 python 文档：

您还可以使用 pydoc 在本地计算机上启动 HTTP 服务器，该服务器将为访问的 Web 浏览器提供文档。pydoc -p 1234 将在端口 1234 上启动一个 HTTP 服务器，允许您在首选 Web 浏览器中浏览**http://localhost:1234/处的文档。**pydoc -g 将启动服务器并另外打开一个基于 Tkinter 的小型图形界面来帮助您搜索文档页面。

现在您可以通过浏览器使用 pydoc，例如 msdn 网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T04:13:06.757

如果您已安装`python 2.7`：
您将`pydoc`在此路径中找到：

```
/usr/share/doc/python2.7/html/index.html 
```

但是你不能使用`search`.

* * *

如果您已安装`apache2`，请打开此网址：

```
http://localhost/doc/python2.7/html/index.html 
```

你可以使用`search`现在。

# jsf-2 - 在 facelets 中，我如何从键是 DataType Short 的 HashMap 中获取

> ID：10593794
> 
> 赞同：1
> 
> 时间：2012-05-15T03:30:15.730
> 
> 标签：jsf-2, facelets, el

我收到一个 javax.el.E​​LException: java.lang.Short cannot be cast to java.lang.Long 以下代码：

```
<ui:param name="aumSegmentType" value="#{segmentSetup.userSegmentTypes[2]}" /> 
```

我正在使用 Mojarra 2.1，facelets。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:49:12.747

那是不可能的。数字在 EL 中按[规范](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)处理为`Long`。

如果更改映射键类型不是一个选项，那么您需要创建一个方法，该方法采用 a`long`并将其强制转换为`short`.

```
public SomeObject getUserSegmentType(long key) {
    return userSegmentTypes.get((short) key);
} 
```

并按如下方式使用

```
<ui:param ... value="#{segmentSetup.getUserSegmentType(2)}" /> 
```

我当然假设您的环境已经支持 EL 2.2。鉴于您使用的是 JSF 2.1，它应该是这样的。

请注意，此问题与 JSF/Facelets 无关。

# php - 从 ajax 生成城市选择框获取城市 ID 到我原来的 php 页面

> ID：10593795
> 
> 赞同：0
> 
> 时间：2012-05-15T03:30:16.803
> 
> 标签：php, ajax

在我的注册表单中，有许多表单元素可以为用户提供在我的网站上注册的详细信息。在这些元素中，有两个选择框供用户选择他们的地区和城市。我使用 ajax 创建了这两个选择框。因此，用户选择一个地区，然后自动 ajax 为城市创建第二个选择框正在填充。我使用名为 findcity.php 的单独 PHP 页面来创建城市选择框。我通过 onChange 属性从我原来的 register.php 页面调用了这个 findcity.php 页面。然后我将带有 url 的地区 ID 传递给 findcity.php 页面。同样地，

现在，当用户从 findcity.php 页面的城市选择框中选择一个城市时，我需要将城市 ID 带到我原来的 register.php 页面。我的问题是。我试图让城市 ID 到 register.php 页面，但我仍然无法得到它。我需要城市 id 与其他表单元素的值一起发送到数据库。

有人可以帮我解决我的问题吗？

这是我的编码供您参考。

这段代码来自我的 register.php 页面

```
<div>
<label for="district">District <img src="../images/required_star.png" alt="required" /> : </label>
<?php

require_once ('../includes/config.inc.php');    
require_once( MYSQL2 );

$query="select * from district order by district_id";
$result = mysqli_query( $dbc, $query);

    echo '<select name="district" class="text" onChange="getCity(' . "'" . 'findcity.php?district=' . "'" . '+this.value)">';
    echo '<option value="">-- Select District --</option>';

    while( $row = mysqli_fetch_array($result, MYSQLI_NUM)) { 
        echo '<option value="' . $row[0] . '"';

        // Check for stickyness: 
        if ( isset( $_POST['district']) && ( $_POST['district'] == $row[0] ))    
            echo ' selected="selected"';

            echo " >$row[1]</option>";    
    }
    echo '</select>';
?> 

</div>    
<div>
<label for="city">City <img src="../images/required_star.png" alt="required" /> : </label>
<input type="hidden" name="reg_locationid" id="reg_locationid" value="56" />
<div id="citydiv" style="position: relative; top: -14px; left: 130px; margin-bottom: -26px;">
    <select name="city" class="text">
        <option>-- Select City --</option>
    </select>
</div>
</div> 
```

这是，来自我的 findcity.php 页面

```
<?php

$districtId=$_GET['district'];

require_once ('../includes/configaration.inc.php'); 
require_once( MYSQLCONNECTION );

$query="select city_id, city_name from city2 where district_id=$districtId";
$result=mysqli_query( $dbc, $query);

echo '<select name="city" class="text">
    <option>-- Select City --</option>';

while($row=mysqli_fetch_array($result, MYSQLI_NUM)) { 

echo '<option value="' . $row[0] . '"';

// Check for stickyness: 
if ( isset( $_POST['city']) && ( $_POST['city'] == $row[0] )) { 
    echo ' selected="selected"';

    //echo '<input type="hidden" name="city"  value="' . $row[0] . '"'; 

}
    echo " >$row[1]</option>";  

}

echo '</select>';

?> 
```

这些是ajax函数

```
function getXMLHTTP() { //function to return the xml http object
var xmlhttp=false;  
try{
    xmlhttp=new XMLHttpRequest();
}
catch(e)    {       
    try{            
        xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
    }
    catch(e){
        try{
        xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch(e1){
            xmlhttp=false;
        }
    }
}

return xmlhttp;
}

function getCity(strURL) {      

    var req = getXMLHTTP();

    if (req) {

        req.onreadystatechange = function() {
            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                document.getElementById('citydiv').innerHTML=req.responseText;                      
            } else {
                alert("There was a problem while using XMLHTTP:\n" + req.statusText);
            }
        }               
    }           
    req.open("GET", strURL, true);
    req.send(null);
}

} 
```

非常感谢任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T11:34:36.997

It seems the city is not selected in your findcity.php page check that!

also try clearing up citydiv's innerhtml before you replace it.

# c# - 用户控件的必填字段验证器不起作用

> ID：10593796
> 
> 赞同：1
> 
> 时间：2012-05-15T03:30:26.967
> 
> 标签：c#, asp.net, user-controls, asp.net-ajax

嗨，我已经为可调整大小的文本框创建了用户控件。

```
<asp:Panel ID="PanelText" runat="server" CssClass="frameText">
<asp:TextBox runat="server" ID="TextBoxResizable" CssClass="noborder" Width="100%"
    Height="100%" TextMode="MultiLine">
</asp:TextBox>
</asp:Panel>
<cc1:ResizableControlExtender ID="ResizableTextBoxExtender" runat="server" TargetControlID="PanelText"
ResizableCssClass="resizingText" HandleCssClass="handleText" OnClientResizing="OnClientResizeText" /> 
```

并为此控件创建了 Validator 属性，例如：

```
[ValidationProperty("Text")]
 public partial class ResizableTextBoxControl : System.Web.UI.UserControl
{ public string Validator
{
    get { return this.TextBoxResizable.Text; }
} 
protected void Page_Load(object sender, EventArgs e)
 {

 }
} 
```

在 aspx 页面中，我正在使用此控件，例如：

```
<uc1:ResizableTextBoxControl ID="tbDescription" MinimumHeight="50" MinimumWidth="100"
 MaximumHeight="300" MaximumWidth="400" runat="server" onKeyPress="javascript:Count(this,1500);" onKeyUp="javascript:Count(this,1500);" ValidationGroup="vgSubmit" ></uc1:ResizableTextBoxControl>

 <asp:RequiredFieldValidator ID="rfvDescription" runat="server" controlToValidate="tbDescription" ValidationGroup="vgSubmit" ErrorMessage="Description" Text="*" ForeColor="Red" SetFocusOnError="True"></asp:RequiredFieldValidator> 
```

当我点击提交时，“tbDescription”似乎不是强制性的。代码有什么问题？

**编辑**

好的...我知道问题出在哪里，隐藏了一个控件，并且没有禁用该控件的必需字段验证器，我使用 jquery 完成了它，现在除了星号之外一切都很好。我不明白为什么星号不可见。 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:49:45.153

尝试将您的验证器放在您的控件上，特别是如果您只是尝试验证一个文本框

```
 <asp:Panel ID="PanelText" runat="server" CssClass="frameText">
<asp:TextBox runat="server" ID="TextBoxResizable" CssClass="noborder" Width="100%"
    Height="100%" TextMode="MultiLine">

    </asp:TextBox>
     <asp:RequiredFieldValidator 
ID="rfvDescription" runat="server" controlToValidate="TextBoxResizable"
 ValidationGroup="vgSubmit" 
ErrorMessage="Description" Text="*" 
ForeColor="Red" SetFocusOnError="True">

</asp:RequiredFieldValidator
    </asp:Panel>
    <cc1:ResizableControlExtender ID="ResizableTextBoxExtender"
 runat="server" TargetControlID="PanelText"

    ResizableCssClass="resizingText" HandleCssClass="handleText OnClientResizing="OnClientResizeText" /> 
```

在用户控制器中，页面呈现后可能无法识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:35:39.043

尝试在提交按钮事件中使用**Page.IsValid 。**

```
if (!Page.IsValid) {
  return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:10:36.560

对不起，所有的烦恼，

页面上有一个控件被隐藏，并且该控件的必需字段验证器未被禁用。我使用 jQuery 禁用了它

```
$(document).ready(function () {
    if (!$("#<%=TextBoxResizable.ClientID %>").is(":visible")) {
        ValidatorEnable(<%=rfvTextBoxResizable.ClientID %>, false);
    }
}) 
```

在 Panel 外放置必填字段验证器后，Asteric 可见。

# asp.net - Facebook C# SDK 授权流程示例

> ID：10593805
> 
> 赞同：1
> 
> 时间：2012-05-15T03:32:17.743
> 
> 标签：asp.net, asp.net-mvc, facebook, facebook-c#-sdk, facebook-javascript-sdk

我正在为 Facebook C# SDK 授权流程寻找一个很好的例子。我正在升级到 SDK 版本 6，但无法理解新流程。我正在使用以下组件：

Asp.net MVC3 Web 应用程序 Facebook C# SDK v6 FB Javascript SDK

我正在尝试将 FB Javascript SDK 中的 access_token 传递给服务器以供进一步使用。

此流程在新文档中概述：

[http://csharpsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started)

我有以下问题：

1.  他们为什么在帖子中传递访问令牌而不是从 cookie 中解析出来。
2.  在信任访问令牌之前，我们不需要在服务器端验证签名请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:22:04.627

首先，您必须遵循 Facebook Javascript SDK 提供的与 C# SDK 一起使用的约定。

答案。1\. Javascript SDK 需要在登录 Facebook 后返回页面。您对从 cookie 获取令牌的想法是正确的，但想想**如果 cookie 在浏览器上被禁用怎么办？**在这两种情况下，发布访问令牌都是最佳选择。

2.访问令牌已经被Facebook加密，所以你不必担心它们。如果您想要更高的安全性，那么您可以在应用设置中**启用加密访问令牌**。

请参阅[http://developers.facebook.com/blog/post/572/](http://developers.facebook.com/blog/post/572/)。

另一件事是，如果有人以某种方式在帖子中传递了无效的访问令牌（XSS 攻击），那么您也不必担心，因为访问令牌是在 Graph API 服务器上验证的，因此影响您的 Facebook 帐户的可能性较小。您还可以启用站点的 HTTPS 以使其更安全。

这就是我所拥有的。

谢谢快乐社交.. ;)

达门陀罗。

# ajax - ajax事件的问题

> ID：10593808
> 
> 赞同：0
> 
> 时间：2012-05-15T03:32:31.360
> 
> 标签：ajax, jquery, ajax-forms

我正在使用一个 ajax 事件，当我点击提交按钮将数据添加到数据库时触发，但是因为当我最初创建这个页面时，它们都在单独的文件中用于测试目的，所以现在当我把所有代码放在一起时，我有请注意，我用来刷新页面的 4 个提交按钮，然后通过过滤更改正在看到的数据正在触发 ajax 查询，我已将代码放在下面。我很困惑唯一的解决方法是什么。 ..

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(function()
    {

$("input[type='checkbox']").on('click', function() {

    var $this = $(this);
    var isChecked = $this.prop('checked');

    var checkVal = isChecked ? $this.attr('id') : $this.attr("value");
    var process= $this.attr("value");
    var userid = $this.attr('name');

            $.ajax({
            type: "GET",
            url: 'request.php',
            data: {
            'uname': checkVal,
            'id': userid

                },
            success: function(data) {

        if(data == 1){//Success 
             alert('Sucess');
          }
        if(data == 0){//Failure 
             alert('Data was NOT saved in db!');
          }
            }
    });
  });

 $('form').bind('submit', function(){  // it is triggering this peice of code when the submit buttons are clicked ???
                $.ajax({
                    type: 'POST',
                    url: "requestadd.php",
                    data: $("form").serialize(),

                    success: function(data) {

                            if(data == 1){//Success 
                                    alert('Sucess');
                                         }
                             if(data == 0){//Failure 
                                    alert('Data was NOT saved in db!');
                                         }
                                 }
                });
                return false;
            });
                      $("#claim").change(function(){       
             $("#area").find(".field").remove();
             //or
               $('#area').remove('.field');
          if( $(this).val()=="Insurance")
             {
        $("#area").append("<input class='field' name='cost' type='text' placeholder='Cost' />");

             }
          });
  });

</script>
    </head>
        <body>
        <div id="add">
        <form name="form1aa" method="post" id="form1a" >
 <div id="area">
 <input type=text name="cases"  placeholder="Cases ID">
         <select id="claim" name="claim">
            <option value="">Select a Claim</option>
        <option value="Insurance">Insurance</option>  
        <option value="Warranty">Warranty</option>
        </select>
        </div>
    <select name="type" onChange=" fill_damage (document.form1aa.type.selectedIndex); ">
    <option value="">Select One</option>
    <option value="Hardware">Hardware</option>
    <option value="Software">Software</option>
    </select>

    <select name="damage">
    </select>
    <br />
    <input type=text name="comment"  placeholder="Comments Box">
    <input type="submit" value="Submit" name="Submit">
    </form>
    </div>
    <?  

        $sql="SELECT * FROM $tbl_name ORDER BY cases ASC";

    if(isset($_POST['tpc'])){
        $sql="select * from $tbl_name WHERE class LIKE '1%' ORDER BY cases ASC";
    }
    if(isset($_POST['drc'])){
        $sql="select * from $tbl_name WHERE class LIKE 'D%' ORDER BY cases ASC";
    }
    if(isset($_POST['bsc'])){
        $sql="select * from $tbl_name WHERE class LIKE 'B%' ORDER BY cases ASC";
    }
    $result=mysql_query($sql);

    ?>

<!-- Filter p1 (Start of) !-->
<form action="ajax-with-php.php" target="_self">
<input type="submit" name="all" value="All" />  // the issue is mainly occuring here when i click any of thesse meant to refesh the page and change the query with the if statements but is trigger the other code i commented
<input type="submit" name="tpc" value="TPC" /> 
<input type="submit" name="drc" value="DRC" />
<input type="submit" name="bsc" value="BSC" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:39:15.090

```
 $('form').bind('submit', function(event){  
    event.preventDefault();
    $.ajax({... 
```

尝试进行上述更改 1) 将`event`参数添加到回调 2) 执行`.preventDefault()`方法。将 AJAX 与提交事件一起使用时，必须阻止页面重新加载并中断您的异步请求。

可能还有更多的问题，但希望这会让你走上正轨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:40:16.587

```
$('form').bind('submit', function(){ ... 
```

将绑定到所有表单。将其更改为

```
$('form#form1a').bind('submit', function(){ ... 
```

它只会绑定到第一种形式，而不是第二种形式。

# c# - Ninject 3.0 不处理映射为 InRequestScope 的对象

> ID：10593810
> 
> 赞同：2
> 
> 时间：2012-05-15T03:32:51.943
> 
> 标签：c#, asp.net-mvc-3, ninject, ioc-container, ninject.web.mvc

我正在尝试使用 Ninject 来管理对象的生命周期。对于我的 IRepository 对象，我需要实现 IDisposable，并且在 ConcreteRepository 中，我实现了 IDisposable 来终止我的 NHibernateSession。

我的问题是我还在 ConcreteRepository 中放置了一个静态变量来计算 ConcreteRepository 的实例化和销毁/处置的数量......当我运行应用程序时，我与数据库的连接用完了，我的日志是表明我的应用程序永远不会释放我的连接。

我的 Global.asax：

```
public class Global : NinjectHttpApplication
{
    protected override void OnApplicationStarted()
    {
        base.OnApplicationStarted();

        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
        ControllerBuilder.Current.DefaultNamespaces.Add("WebPortal.Controllers");

        var log4netConfigFileInfo = new System.IO.FileInfo(Server.MapPath("~/log4net.xml"));

        log4net.Config.XmlConfigurator.ConfigureAndWatch(log4netConfigFileInfo);
        log4net.ILog log = log4net.LogManager.GetLogger(typeof(Global));
        log.Info("Started...");
    }

    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    protected override Ninject.IKernel CreateKernel()
    {
        var kernel = new Ninject.StandardKernel(
        new Utils.UtilsModule(),
        new Web.DataObjects.NHibernate.DataObjectsNHibernateModule(),
        new Payroll.PayrollModule(),
        new Web.DataObjects.DbModule()
        );

        kernel.Load(Assembly.GetExecutingAssembly());

        return kernel;
    }
} 
```

我用来测试的控制器模块：

```
public class DatabaseAreaModelModule
    : NinjectModule
{
    public override void Load()
    {
        Bind<DiscountEdit>().ToSelf().InRequestScope();
        Bind<ItemCategoryEdit>().ToSelf().InRequestScope();
        Bind<ItemEdit>().ToSelf().InRequestScope();
        Bind<ModifierEdit>().ToSelf().InRequestScope();
        Bind<ModifierSetEdit>().ToSelf().InRequestScope();
        Bind<RevenueCenterEdit>().ToSelf().InRequestScope();
        Bind<RevenueClassEdit>().ToSelf().InRequestScope();
        Bind<TaxEdit>().ToSelf().InRequestScope();
    }
} 
```

我的“NHibernate”忍者模块：

```
public class DataObjectsNHibernateModule
    : NinjectModule
{
    public override void Load()
    {
        Bind<ISessionFactory>().ToProvider<NHibernateSessionProvider>().InSingletonScope();
        Bind<IRepository>().To<NHibernateRepository>().InRequestScope();
    }
} 
```

我想弄清楚的是，为什么当我要求某些东西成为 InRequestScope() 时，它没有被处理……有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T03:43:24.783

为了`InRequestScope()`在请求完成后释放对象，您必须加载`OnePerRequestHttpModule`.

老实说，我不知道为什么每个人都觉得有必要以艰难的方式做事。只需从 nuget 安装 Ninject.MVC3，它就会为您处理所有这些。我看到的“请帮助我，Ninject 没有做它应该做的”问题的 99.9% 是因为人们觉得需要以艰难的方式做事，而他们做错了。

省得自己头疼。只需安装 Ninject.MVC3 并将您的绑定和/或模块复制到 NinjectWebCommon.cs 即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T06:52:52.830

要么你使用旧版本，要么你没有加载任何网络扩展`Ninject.Web.Common`

# tree - 如何在 VIRTUAL 模式下以编程方式在 SWT 树上触发 setData 事件

> ID：10593811
> 
> 赞同：3
> 
> 时间：2012-05-15T03:33:05.687
> 
> 标签：tree, swt, virtual

是否可以在 VIRTUAL 模式下以编程方式在 SWT 树上触发 setData 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:26:53.130

`notifyListeners`Widget 中的- 方法就是这样做的。

```
tree.notifyListeners(SWT.SetData, <EventData>) 
```

但是，您必须构建并移交适当的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T11:28:15.747

我只想补充*Fabian Zeindl*的[回答](https://stackoverflow.com/a/10626178/517705)，它对我有用，以防这些附加信息对某人有用。

使用`SWT.VIRTUAL`标志时，元素会`TreeItem`在滚动到视图时按需加载。我想在 a 中选择一个`TreeViewer`尚未加载的元素，因为`TreeItem`它`viewer.setSelection()`无法工作。
这意味着必须将给定元素显式加载为 TreeItem。

这是使它工作的简化示例代码：

```
final Tree treeViewerTree = treeViewer.getTree();
// we now assume that the indexOfElementToSelect value is set to a correct value (which is a lower value than treeViewerTree.getItemCount()!!)
TreeItem treeItem = treeViewerTree.getItem(indexOfElementToSelect);
final boolean isVirtualTree = (treeViewerTree.getStyle() & SWT.VIRTUAL) != 0;
if(isVirtualTree) {
    // trigger SWT.SetData event programmatically on SWT tree in VIRTUAL mode which loads the item explicitly
    Event virtualTreeEvent = new Event();
    virtualTreeEvent.index = indexOfElementToSelect;
    virtualTreeEvent.item = treeItem;
    // triggering SWT.SetData programmatically
    treeViewerTree.notifyListeners(SWT.SetData, virtualTreeEvent);
}

treeViewer.setSelection(new StructuredSelection(........), true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T18:56:15.290

Sam Zheng，两年后我当然希望你找到答案，但这里是为其他寻求真理的人准备的：

对根级项使用`Tree.clear(index,boolean)`or方法，对根级以下的项使用or方法。`Tree.clearAll(boolean)``TreeItem.clear(index,boolean)``TreeItem.clear(boolean)`

# php - Wordpress 插件表单提交

> ID：10593814
> 
> 赞同：3
> 
> 时间：2012-05-15T03:33:19.710
> 
> 标签：php, wordpress

我创建了一个插件来保存回复我的详细信息。但是，每当我使用插件提交表单时，它都会显示错误，并被重定向到显示“未找到道歉，但找不到您请求的页面”的其他页面。也许搜索会有所帮助。”消息。请检查我的代码

```
<?PHP
/*
Plugin Name: Register Me
Plugin URI: http://demo.net
Description: Plugin is shows a simple Registration form
Author: Sumod Nair
Version: 1.0
Author URI: http://demo.net
*/
add_action('init', 'reg_install');
function reg_install()
{
    global $wpdb;
    $table = $wpdb->prefix."reg_details";
    $structure = "CREATE TABLE $table (
        id INT(9) NOT NULL AUTO_INCREMENT,
        name VARCHAR(80) NOT NULL,
        place VARCHAR(20) NOT NULL,
        email VARCHAR(20) NOT NULL,
        mobno VARCHAR(20) NOT NULL,
        about_me VARCHAR(500) NOT NULL,
        date_apply datetime,
        UNIQUE KEY id (id)
    );";
    $wpdb->query($structure);
}

add_shortcode('register', 'process_post');

function process_post(){
//include("reg_form.php");
?>
<form id="frmRegistration" name="frmRegistration" action="<?php echo str_replace( '%7E', '~', $_SERVER['REQUEST_URI']); ?>" method="POST">
<table style="align:center; width:500px; margin: 0 0 0 0;"> 
<tr>
<td>Name </td>
<td><input type="text" name="name" id="name" maxlength="50" ><b><font color="red">*</font></b></td>
</tr>
<tr>
<td>Place </td>
<td><input type="text" name="place" id="place" maxlength="50" ><b><font color="red">*</font></b></td>
</tr>
<tr>
<td>Email </td>
<td><input type="text" name="email" id="email" maxlength="50" ><b><font color="red">*</font></b></td>
</tr>
<tr>
<td>Mobile No</td>
<td><input type="text" name="mobile_no" id="mobile_no" maxlength="50"><b><font color="red">*</font></b></td>
</tr>
<tr>
<td>About Yourself</td>
<td><textarea rows="4" cols="50" name="about" id="about" >

</textarea> <b><font color="red">*</font></b></td>
</tr>
<tr>
<td><input type="submit" name="btnSubmit" id="btnSubmit" value="Submit Details" style="color:blue;"></td>
 <td align="right"><b><font color="red">*</font></b> fileds are mandatory</td></tr>
</table>
</form>

<?PHP
   global $wpdb;
    $table = $wpdb->prefix."reg_details";
 if(isset($_POST['btnSubmit'])) {
   // process $_POST data here
   $name = $_POST['name'];
   $place = $_POST['place'];
   $email = $_POST['email'];

   $mobile_no = $_POST['mobile_no'];
   $about_yourself = $_POST['about'];
   echo $name." " .$place." " .$email ." " .$mobile_no." " .$about_yourself;
  $wpdb->query("INSERT INTO $table(name, place,email,mobno,about_me,date_apply)
        VALUES('$name', '$place',' $email', '$mobile_no', '$about_yourself',now())");
 }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:53:30.000

换成`name="name"`别的东西，我遇到了完全相同的“错误”。可以肯定的是，还要在它之前用一些唯一的字符串替换其他名称。例如`name="frm-name"`,`name="frm-mobile_no"`等。

# mysql-connect - UKHost4U 和 MySQL - 如何连接？

> ID：10593820
> 
> 赞同：0
> 
> 时间：2012-05-15T03:33:45.043
> 
> 标签：mysql-connect

等了一个小时才找到在 UKHOST4U 连接到 mysql 的正确方法，以为这里有人知道吗？

一直在使用以下代码，数据库，用户和密码都设置正确：

```
$hostn='localhost';
$dbn='cpanel1_dbname';
$passn='password';
$usern='cpanel1_usrname';
$dbh = @mysqli_connect($hostn, $usern, $passn, $dbn);
if(!$dbh)
    die('hmm that did not seem to work; please try another day..'); 
```

我已经明显改变了实际值。

我刚搬到 UKHost4U - 我错过了什么吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:32:16.080

我不得不联系他们，然后按照正常情况“然后它就起作用了”..

# linux - 内核模块中用户进程使用的堆大小

> ID：10593824
> 
> 赞同：1
> 
> 时间：2012-05-15T03:34:23.347
> 
> 标签：linux, memory-management, linux-kernel

我正在编写一个内核模块，它将接受用户进程 id ( `PID`) 作为输入并转储该用户进程的所有地址空间，如堆​​栈、堆段。

我把`mm->start_brk`作为堆的开始，`mm->brk`作为堆的结束，然后我看到，即使用户进程没有使用 33 页，堆大小显示为 33 页（`mm->brk`- `mm->start_brk`）。（这我使用验证`/proc/pid/maps`）。Stack 也有类似的行为。

那么有什么办法可以找出真正使用的堆`mm->start_brk`，这样我就可以只转储使用的堆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:11:22.720

`brk`进程可以使用和分配内存`mmap`。后者不会改变堆，而是单独分配。

`mm->mmap`是由 . 创建的映射的链表`mmap`。

# android - Android - 在制作绘画应用程序时丢失了以前的图纸

> ID：10593827
> 
> 赞同：0
> 
> 时间：2012-05-15T03:34:54.013
> 
> 标签：android, paint

下面是我的安卓新画家应用程序。

但是，它不反映先前绘制的对象。（当我触摸屏幕时，它失去了形状）

为了反映以前绘制的对象，我尝试使用“Bitmap.createBitmap”方法，但它不起作用。

请帮我。

* * *

```
public class CreativePainterActivity extends Activity {

//
 //private MyView vw;
Paint mPaint;

//--Variables to store the current figure info
private float _currentStartX;       //where mouse first pressed
private float _currentStartY;
private float _currentEndX;         //where dragged to or released
private float _currentEndY;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
}

@Override
protected void onResume() {
// TODO Auto-generated method stub
super.onResume();
setContentView(new MyView(this));
mPaint = new Paint();
mPaint.setAntiAlias(true);
mPaint.setDither(true);
mPaint.setColor(0xFFFFFF00);
mPaint.setStyle(Paint.Style.STROKE);
mPaint.setStrokeJoin(Paint.Join.ROUND);
mPaint.setStrokeCap(Paint.Cap.ROUND);
mPaint.setStrokeWidth(8);
}
//view class
public class MyView extends View{

private Canvas mCanvas;
private Bitmap mBitmap;
private Paint mBitmapPaint;
Bitmap bm;

//private Paint mBitmapPaint;

public MyView(Context context){
super(context);

//ADDED
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

mBitmap = Bitmap.createBitmap(metrics.widthPixels, metrics.heightPixels, Bitmap.Config.ARGB_8888);
mCanvas = new Canvas(mBitmap);
mBitmapPaint = new Paint(Paint.DITHER_FLAG);
mCanvas.drawColor(0xFFFFFFFF);
bm = BitmapFactory.decodeResource(getResources(),R.drawable.ic_launcher);
}

public void onDraw(Canvas canvas){
//canvas.drawColor(Color.LTGRAY);
canvas.drawBitmap(bm, 0, 0, mBitmapPaint);
canvas.drawLine(_currentStartX, _currentStartY, _currentEndX, _currentEndY, mPaint);
}

//Methods for touch events
public boolean onTouchEvent(MotionEvent event){
if (event.getAction() == MotionEvent.ACTION_DOWN){
_currentStartX=event.getX();
_currentStartY=event.getY();
return true;
}

if(event.getAction() == MotionEvent.ACTION_MOVE){
_currentEndX=event.getX();
_currentEndY=event.getY();
invalidate();
return true;
}
return true;
}

}//end of the class MyView

}//end of the class CreativePainterActivity 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T03:39:22.313

您将需要更多地了解如何绘制视图。再次绘制后，您的视图将不会保留其中的任何内容。因此，您应该以某种方式保存之前的所有内容，并重新绘制旧的内容以及新的更改。

一个更简单的解决方案是将以前的绘图保存到位图，然后先在画布上再次绘制该位图，然后添加新的东西。

流量

```
onDraw(){
    绘制位图（bmp）；
    绘制其他东西（）；
    bmp = saveOnScreenBitmap();
}

```

所以，每次都需要保存上一次绘制的位图，然后重新绘制。希望现在更清楚了。

一些示例教程：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html)

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/TouchPaint.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/TouchPaint.html)

[http://www.tutorialforandroid.com/2009/06/drawing-with-canvas-in-android.html](http://www.tutorialforandroid.com/2009/06/drawing-with-canvas-in-android.html)

# javascript - 如何创建一个随着 SQL 数据库中的数据变化而动态更新的对象？

> ID：10593830
> 
> 赞同：1
> 
> 时间：2012-05-15T03:35:27.480
> 
> 标签：javascript, sql, socket.io, visio

这是这种情况。我想创建一个图表，其中每个元素（节点）都包含一些信息。此信息将根据其实时状态动态更新（AJAX、socket.io 等）。数据将存储在 SQL 数据库中。

基本上，我使用 ORION 来监控一堆服务器，所以我在 SQL 数据库中有一个自定义视图，其中包含其监控结果（CPU、内存、网络等）。这些值是不断变化的。

我想创建在这里我称之为“节点”的东西。每个“节点”都有不同的字段（名称、CPU、内存、网络、IP 地址）。因此，我希望能够实时更新动态值以反映机器的当前状态。希望这清楚地表明了我想要做的事情。

我认为创建每个对象的最佳方法是为每个对象提供 JSON 数据格式，可能使用 JavaScript 库（如 Raphael、Joint.js 或 thejit.org 的 Infovis）来绘制形状，然后使用诸如 socket 之类的库.io 为连续数据流创建“类似 tcp”的连接。

我对如何使用表格有所了解，但我想使用用户友好的 GUI。我使用 Visio 构建了一个工作模型，但宁愿将其全部保存在网络上（Visio 中的刷新率也非常慢）。

请帮助任何人...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:38:51.480

您可以强制 Visio（包括 Viewer）每分钟更新一次数据：将注册表项 `HKEY_CURRENT_USER\Software\Microsoft\Office\<version>\Visio\Application\animation`从 60000 更改为例如 5000（毫秒）。[此示例](http://blog.bvisual.net/2012/01/30/now-then-settle-down/)可能很有用。

# java - 以小数点后 3 位显示秒数。- 爪哇

> ID：10593834
> 
> 赞同：2
> 
> 时间：2012-05-15T03:35:48.103
> 
> 标签：java, milliseconds, seconds, time-format, system.out

我在我的 java 程序中使用毫秒并将其转换为秒。在我的方法执行此操作后，它以长格式返回秒数。

```
System.out.println("[" + threadID + "]" + " " + "SeqSum res=" + grandTotal + " secs=" + stopTime); 
```

我使用变量 stopTime 来显示秒数。

我的输出目前是 secs=0 它需要是 secs=0.000

我需要使用 system.out.println() 或 system.out.format() 将其显示到小数点后 3 位

如何改写我的打印语句，以便获得输出 secs=0.000？

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T03:41:31.470

毫秒很长，没有小数位。您需要将它们除以 1000.0f 以将它们分成小数秒。然后您将需要使用格式方法将它们限制为小数点后 3 位。

就像是：

```
 final long ms;
   final float sec;

   ms = System.currentTimeMillis();
   sec = ms / 1000.0f;
   System.out.format("%.3f", sec); 
```

# java - 将 JLabel(s) 放置在所需位置并给出其坐标

> ID：10593840
> 
> 赞同：1
> 
> 时间：2012-05-15T03:36:40.647
> 
> 标签：java, swing, jpanel, jlabel, keylistener

我有一个我需要在所需坐标处`JPanel`添加一堆s 的地方。`JLabel`这些`JLabel`s 将分配给它们的键侦听器，这些侦听器将使用箭头键确定新位置。

更具体地说，当只有一个时，我知道该怎么做，`JLabel`但每当我放更多时，事情就会一团糟。当我使用箭头键时，第一个`JLabel`动作但所有其他动作都`JLabel`消失了。

任何人都可以给我一些提示，让我编写一种方法来将 a`JLabel`放在特定坐标中，并在以后使用箭头键移动它们而不会使其他`JLabel`s 消失吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T19:30:39.357

您可以尝试使用 JDesktopPane 或 JLayeredPane，它的工作原理与 JPanel 相同，但您不会使用布局，使用这些您将使用 Bounds，您总是必须像这样设置 jlabel 的边界。

```
JLabel label = new JLabel("Hello");
label.setBounds(0, 0, 100, 20);
//label.setBounds(x, y, width, height);
pane.add(label) 
```

如果您需要移动该标签，那么您可以使用类似的东西

```
int xx = label.getBounds().getX();
int yy = label.getBounds().getY();
int ww = label.getBounds().getWidth();
int hh = label.getBounds().getHeight();

//to the right 10 units
xx+=10;
label.setBounds( xx, yy, ww, hh ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:58:25.210

我假设您正在使用`repaint()`更新 UI。顺便说一句，你在调用哪个组件`repaint()`？

# android - 使用 Asynctask 在列表视图中显示数据

> ID：10593841
> 
> 赞同：1
> 
> 时间：2012-05-15T03:37:23.497
> 
> 标签：android, listview, android-asynctask

我成功地在列表视图中显示了来自 Web 服务 JSON 的数据，但我想添加 Asyntask。我可以将代码 Asyntask 放在我的代码中。

**这是我在列表视图中显示数据的代码**

```
public class Jadwal_remix extends ListActivity {
String v_date;
JSONArray r_js = null;
ArrayList<HashMap<String, String>> myArray = new ArrayList<HashMap<String,String>>();
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);

    String status ="";
    String date = "";
    String result = "";
    String url = "http://10.0.2.2/remix/view_list.php";
    JSONParser jParser = new JSONParser();
    JSONObject json = jParser.AmbilJson(url);
    try
    {
        r_js = json.getJSONArray("view_list");

        for (int i =0; i < r_js.length(); i++)
        {
            String my_array = "";
            JSONObject ar = r_js.getJSONObject(i);
            status = ar.getString("st");
            date = ar.getString("date");
            result = ar.getString("result");

            if (status.trim().equals("er"))
            {
                my_array += "Sorry "+result;
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("result", my_array);
                myArray.add(map);
            }
            else
            {
                my_array += "Date : "+date+" "+"Result : "+result;
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("result", my_array);
                myArray.add(map);
            }

        }
    }
    catch (JSONException e) 
    {
         e.printStackTrace();
    }
    adapter_listview();

}

public void adapter_listview() {

    ListAdapter adapter = new SimpleAdapter(this, jadwalRemix,R.layout.my_list,new String[] { "result"}, new int[] {R.id.txtResult});
    setListAdapter(adapter);
}
} 
```

**而这个 JSONParser**

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject AmbilJson(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
 } 
```

我可以在哪里放置 Asyntask 的代码？

**好的，我得到了示例代码，我的代码现在是这样的**

```
public class Jadwal_remix extends ListActivity {
String v_date;
JSONArray r_js = null;
ArrayList<HashMap<String, String>> myArray = new ArrayList<HashMap<String,String>>();
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);

private class myProses extends AsyncTask<Void, Void, Void> {
    ProgressDialog dialog;

    protected void onPreExecute() {
        dialog = ProgressDialog.show(Jadwal_remix.this, "", "Loading... Please wait", true);

    }
protected Void doInBackground(Void... params) {

    String status ="";
    String date = "";
    String result = "";
    String url = "http://10.0.2.2/remix/view_list.php";
    JSONParser jParser = new JSONParser();
    JSONObject json = jParser.AmbilJson(url);
    try
    {
        r_js = json.getJSONArray("view_list");

        for (int i =0; i < r_js.length(); i++)
        {
            String my_array = "";
            JSONObject ar = r_js.getJSONObject(i);
            status = ar.getString("st");
            date = ar.getString("date");
            result = ar.getString("result");

            if (status.trim().equals("er"))
            {
                my_array += "Sorry "+result;
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("result", my_array);
                myArray.add(map);
            }
            else
            {
                my_array += "Date : "+date+" "+"Result : "+result;
                HashMap<String, String> map = new HashMap<String, String>();
                map.put("result", my_array);
                myArray.add(map);
            }

        }
    }
    catch (JSONException e) 
    {
         e.printStackTrace();
    }
    return null;
protected void onPostExecute(Void unused) {
        adapter_listview();
        dialog.dismiss();
    }

}

public void adapter_listview() {

    ListAdapter adapter = new SimpleAdapter(this, jadwalRemix,R.layout.my_list,new String[] { "result"}, new int[] {R.id.txtResult});
    setListAdapter(adapter);
}
} 
```

服务器死机时我遇到问题，它仍在加载。我如何显示消息前：无法连接到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:09:46.413

[工作 ASyncTask 教程](http://davidjkelley.net/?p=48)，

[完整的 ASyncTask Eclipse 项目](http://davidjkelley.net/?p=85)，

这里有一些代码，我认为，当与上面的示例混合时，会得到你想要的列表的结果（不过，你必须稍微调整它以适应你的需要（注意列表的东西，即使虽然这是来自自定义对话框：

```
 public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle("Kies Facebook-account");
        builder.setNegativeButton("Cancel", this);
        LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View dialogLayout = inflater.inflate(R.layout.dialog, null);
        builder.setView(dialogLayout);

        final String[] items = {"Red", "Green", "Blue" };

        builder.setAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, items), 
                new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                Log.v("touched: ", items[which].toString());

            }} 
            );

        return builder.create();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:10:06.293

这是我的代码，请试试这个，

MAinActivity.java

```
public class MyActivity extends Activity {

private ListView contests_listView;
private ProgressBar pgb;
ActivitiesBean bean;
ArrayList<Object> listActivities;
ActivityAdapter adapter;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_listview);

    contests_listView = (ListView) findViewById(R.id.activity_listView);
    pgb = (ProgressBar) findViewById(R.id.contests_progressBar);
    listActivities = new ArrayList<Object>();

    new FetchActivitesTask().execute();

}

public class FetchActivitesTask extends AsyncTask<Void, Void, Void> {

    int i =0;
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
         pgb.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        String url = "Your URL Here";
        String strResponse = util.makeWebCall(url);

        try {
            JSONObject objResponse = new JSONObject(strResponse);

            JSONArray jsonnodes = objResponse.getJSONArray(nodes);

            for (i = 0; i < jsonnodes.length(); i++) 
            {
                String str = Integer.toString(i); 
                Log.i("Value of i",str);

                JSONObject jsonnode = jsonnodes.getJSONObject(i); 

                JSONObject jsonnodevalue = jsonnode.getJSONObject(node);

                bean = new ActivitiesBean();

                bean.title = jsonnodevalue.getString(title);
                bean.image = jsonnodevalue.getString(field_activity_image_fid);

                listActivities.add(bean);

            }               
        }
        catch (JSONException e) {

            e.printStackTrace();
      }

        return null;
    }

    @Override
    public void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        pgb.setVisibility(View.GONE);
        displayAdapter();
    }
}

public void displayAdapter()
{
    adapter = new ActivityAdapter(this, listActivities);
    contests_listView.setAdapter(adapter);
    contests_listView.setOnItemClickListener(new OnItemClickListener() {

        //@Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long id) {
            // your onclick Activity
        }

    });

}
} 
```

实用程序类

```
public static String makeWebCall(String url) {

    DefaultHttpClient client = new DefaultHttpClient();

    HttpGet httpRequest = new HttpGet(url);
  //  HttpPost post = new HttpPost(url);

    try {

        HttpResponse httpResponse = client.execute(httpRequest);

         final int statusCode = httpResponse.getStatusLine().getStatusCode();

         if (statusCode != HttpStatus.SC_OK) {

            return null;
         }

         HttpEntity entity = httpResponse.getEntity();

         InputStream instream = null;

         if (entity != null) {
              instream = entity.getContent();
         }

            return iStream_to_String(instream);
    }
    catch (IOException e) {
        httpRequest.abort();
      // Log.w(getClass().getSimpleName(), "Error for URL =>" + url, e);
    }

    return null;

 }

public static String iStream_to_String(InputStream is1) {
    BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 4096);
    String line;
    StringBuilder sb = new StringBuilder();
    try {
        while ((line = rd.readLine()) != null) {
            sb.append(line);
        }
        rd.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String contentOfMyInputStream = sb.toString();
    return contentOfMyInputStream;
}

} 
```

ActivityBean.java

```
public class ActivitiesBean implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 1L;

public String title;
public String image;

public String getTitle() {
    return title;
}
public void setTitle(String title) {
    this.title = title;
}
public String getImage() {
    return image;
}
public void setImage(String image) {
    this.image = image;
} 
```

# asp.net - ASP.NET 会员数据库与会员和用户数据库

> ID：10593843
> 
> 赞同：0
> 
> 时间：2012-05-15T03:37:36.133
> 
> 标签：asp.net, database-design, asp.net-membership

有什么理由我*不应该*使用自定义会员提供程序将联系人和扩展数据添加到用户数据库中？

为用户数据和会员数据保留单独的一对一表格有什么好处？据我了解，常见的方法是保留单独的表格。我认为最好为用户提供一张表，以保持 SQL 语句的简单性和成员资格提供程序的自定义代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:55:03.853

Membership 背后的理念是它提供了即插即用的通用会员解决方案。假设您想从 Sql 切换到 ActiveDirctory，您只需更改成员资格提供程序，一切正常。

只要您正在创建自定义提供程序，您就可以做任何您想做的事情。但是，为了将您的额外数据放入会员表中，您必须在会员界面之外执行此操作（因为 API 不包含它们的字段）。这意味着，您实际上是在丢弃 Membership API。

我的建议是要么 a) 使用会员资格，要么 b) 完全做你自己的事情。不要试图将会员资格硬塞到它不打算用于的东西中。

但是，编写自己的代码比您最初想象的要复杂得多，至少如果您想确保安全并涵盖所有基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:58:11.260

优点是关注点分离。通过将它们保存在单独的表中，您会处于可以单独换出或修改成员数据存储的情况。但是，在对“灵活性”过于兴奋之前，请考虑一下应用程序的实际生命周期。权衡未来需要更改的可能性与实施自定义提供程序的前期成本。

当我实现了自定义成员资格提供程序时，更多时候我发现自己实际上希望我刚刚推出了一个完全自定义的身份验证机制。一旦你实现了提供者接口，你不一定会通过“插入”提供者基础设施的其余部分来获得很多。对于简单的应用程序，我通常只建议做最简单、最简单的事情。如果您没有构建许多身份验证系统，您可能会发现实施自定义提供程序的过程具有教育意义。

# python - 附加到 Python 中的列表列表，带有条件

> ID：10593845
> 
> 赞同：2
> 
> 时间：2012-05-15T03:38:18.323
> 
> 标签：python, list, iteration

我正在迭代这些对象并创建一个列表列表。

像这样的东西：

```
#data.py
values = []
for o in objects:
    data = [o.day, o.seconds]
    values.append(data) 
```

这给了我，例如：

```
[['27/2', 34], ['23/2', 21], ['25/2', 11], ['27/2', 38]] 
```

但我需要做一个额外的操作。如果`data[0] (day)`已经在值中，我不想附加数据，我想添加`data[1]`到现有对象的`data[1]`.

所以从上面的列表中，我真正想要的是：

```
[['27/2', 72], ['23/2', 21], ['25/2', 11]] 
```

我可以在没有列表的情况下进行操作，但是最后，我需要将其转换为列表以供最终使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T03:41:06.863

如果我是你，我会使用字典。

```
values = {}
for item in object_: # changed object to object_
    values[item.day] = values.get(item.day, 0) + item.seconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T05:10:37.077

以下是如何使用`defaultdict`

```
from collections import defaultdict
values = defaultdict(int)
for o in my_object:
    values[o.day] += o.seconds 
```

这是一种使用`Counter`

```
from itertools import Counter
values = Counter()
for o in my_object:
    values += Counter({o.day: o.seconds}) 
```

您可以从这样的值中获取列表

```
values.items() # or list(values.items()) in Python3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T06:47:31.117

这是一个不错的单线（禁止进口），应该可以满足您的需要：

```
from collections import Counter
values = sum([Counter({o.day: o.seconds}) for o in objects], Counter()).items() 
```

# objective-c - 强制“共享用户默认控制器”立即保存到磁盘？

> ID：10593848
> 
> 赞同：1
> 
> 时间：2012-05-15T03:38:41.877
> 
> 标签：objective-c, cocoa, preferences

我有一个使用共享用户默认控制器的首选项窗格，它读取和保存首选项小菜一碟。似乎当对字段进行更改时，它们并没有立即保存到 plist 文件中。当我的应用程序需要在更改完成后立即重新读取文件并且 plist 仍未更新时，这会产生问题。

如何强制首选项窗格立即更新首选项文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:41:48.843

这将自动将您立即所做的任何更改保存到磁盘：

```
NSUserDefaultsController *controller = [NSUserDefaultsController sharedUserDefaultsController];
[controller setAppliesImmediately:YES]; 
```

如果您只在特定情况下需要它，您还可以使用并节省一些昂贵的 I/O（您确实应该尝试让缓存机制尽可能多地缓存，而不是立即将所有内容写入磁盘）：

```
NSUserDefaultsController *controller = [NSUserDefaultsController sharedUserDefaultsController];
[controller save:self]; 
```

另外，您确定您正在尝试解决正确的问题吗？您始终可以通过查询`NSUserDefaults`您不需要关心当前版本是缓存在 RAM 中还是已写入磁盘的位置来获取用户默认值的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T03:41:39.483

根据文档：

```
[userDefaults save:self]; 
```

或者

```
[userDefaults setAppliesImmediately:YES]; 
```

# math - md5 对短字符串（有限数量的字符串）有任何唯一性保证吗？

> ID：10593850
> 
> 赞同：9
> 
> 时间：2012-05-15T03:38:46.833
> 
> 标签：math, encryption, hash, computer-science, uniqueidentifier

所以我知道有证据表明 MD5 不能保证唯一性，因为宇宙中的字符串比 MD5 哈希字符串多，但是对于有限数量的字符串有任何逆向证明吗？

**基本上，如果我有最大长度为 X 的字符串，是否有一个 X 保证 MD5 是唯一的？如果是，那么那个 X 是什么？如果 X 有多个值，那么 X 的最大值是多少？**

或者对于任何其他散列算法、SHA-1 等是否有这样的 X？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T03:50:58.797

在这里总结出色的答案：[导致 MD5 冲突的最短字符串对是什么？](https://stackoverflow.com/questions/1999824/whats-the-shortest-pair-of-strings-that-causes-an-md5-collision)

已知最短的 MD5 攻击需要 2 个输入块，即 128 字节或 1024 位。

`sqrt(2^N)`对于任何输出 N 位的哈希算法，假设它近似随机分布输入，您可以假设在大约输入中发生冲突的可能性超过 50% 。例如，MD5 散列到 128 位，因此您可以预期所有 64 位输入之间会发生冲突。这假设一个均匀随机的散列。任何弱点都会在预计发生碰撞之前减少输入的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T03:47:39.573

你的问题的答案是肯定的。对于任何散列函数，都有一个最大长度 X，您将返回唯一的字符串。但是，找到 X 可能非常困难。这个想法是运行这个程序：

```
X= 0;
For i = 0 onward
   For all strings of length i
      Compute the hash code of that string.
      If a collision is found, return X.
   X = i 
```

这个想法是只列出越来越长的字符串，直到发现哈希冲突。最终您将不得不这样做，因为最终您将生成比可能的哈希输出更多的字符串。

按照预期，假设哈希函数实际上是非常随机的，您需要在发现冲突之前生成 O(√U) 个不同的字符串，其中 U 是哈希函数映射到的空间大小。对于 256 位哈希，这是 2 ^(256)。这意味着在实践中，除非哈希函数被严重破坏，否则上述程序永远不会真正终止，但理论上这意味着您的数字 X 存在。

希望这可以帮助！

# ruby-on-rails - 我应该将 RSpec 测试的种子数据放在哪里？

> ID：10593854
> 
> 赞同：0
> 
> 时间：2012-05-15T03:39:23.217
> 
> 标签：ruby-on-rails, ruby, testing, rspec

我应该将仅用于 RSpec 测试目的的测试数据放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T04:08:14.370

就像生活中的许多事情一样，这取决于。

1.  如果您使用的是[fixtures](http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures)，它们就存在于**test/fixtures 中**。
2.  如果您将 factory_girl 与 RSpec 一起使用，它可以从[许多地方](https://github.com/thoughtbot/factory_girl/wiki/Usage)读取，但**spec/factories/*.rb**似乎是放置它们的最明智的地方。
3.  如果您正在使用其他东西，请查看其他夹具或工厂 gem 的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:00:55.360

如果数据很简单，您可以使用`fixtures`( [1](http://guides.rubyonrails.org/testing.html) )，如果您需要更复杂的数据，请转到`factory_girl_rails`gem ( [2 )。](https://github.com/thoughtbot/factory_girl_rails)

您还可以创建一个`rake task`用于填充您的数据库。

请考虑寻找类似的[问题](https://stackoverflow.com/questions/6167165/load-seed-data-in-rails-3-project)

# javascript - Sproutcore 中的文本文件输入错误警报

> ID：10593863
> 
> 赞同：2
> 
> 时间：2012-05-15T03:41:08.793
> 
> 标签：javascript, sproutcore

我的 Sproutcore 代码中有一些文本字段。但是，我需要检查文本字段的输入验证。

有什么机制可以像传统的 html/js 那样做吗？你能附上一些代码吗？谢谢。

目前我只使用警报（）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:49:05.123

假设您正在使用`SC.TextFieldView`，您可以使用 Validator。这是一个例子：

```
SC.TextFieldView.design({              
  validator: 'Number', 
  maxLength: 20,
}), 
```

您可以创建自己的验证器来满足您的需求。有关示例和文档，请查看：

```
sproutcore/frameworks/foundation/validators 
```

# asp.net - IE8 中 ASP.NET 中的打印样式

> ID：10593864
> 
> 赞同：1
> 
> 时间：2012-05-15T03:41:18.227
> 
> 标签：asp.net, css, printing

我正在尝试使用 asp.net 将样式表链接到 SharePoint 中的母版页。它是一个只打印的样式表。我遇到的问题是@media print 在 IE8 中不起作用。我可以在 asp.net 中添加仅适用于印刷媒体的样式表吗？

```
<SharePoint:CssRegistration ID="CssRegistrationCommon"  Name="<% $SPUrl:/Style Library/CSS/common.css %>" After="corev4.css" runat="server"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:43:51.337

您还可以在样式表的链接上指定媒体。

媒体=“打印”

确保您的主样式表指向屏幕/投影仪之类的东西，这样它们就不会重叠

```
<link rel="stylesheet" href="<%= Page.ResolveUrl("~/CSS/mystyles.css") %>" type="text/css" media="screen, projection" />
<link rel="Stylesheet" href="<%= Page.ResolveUrl("~/CSS/print.css") %>" type="text/css" media="print" /> 
```

# spring - 使用 Spring 2.0 在 JSF Managed bean 中注入 Spring 依赖项

> ID：10593865
> 
> 赞同：0
> 
> 时间：2012-05-15T03:41:21.340
> 
> 标签：spring, jsf-2, jetty, myfaces

如果我需要在 JSF ManagedBean 中注入 Spring 依赖项（通过 Annotations 创建），我使用的是 spring 2.0，它不支持 @Autowire。

**如果我保持 @ManagedBean 注释原样，有没有办法注入依赖项？**

我正在使用 Myfaces 2.1.6 通过 Eclipse 与 Jetty 一起运行它。

请建议。

**面孔-config.xml**

```
<?xml version="1.0"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
      http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/wsListing.xhtml</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/wsListing.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>abcService</from-outcome>
            <to-view-id>/abcinput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
        <navigation-case>
            <from-outcome>filterAbc</from-outcome>
            <to-view-id>/filterabcinput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>

    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/abcinput.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/abcoutput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>
    <application>
        <variable-resolver>org.springframework.web.jsf.DelegatingVariableResolver</variable-resolver>
        <locale-config>
            <default-locale>en</default-locale>
            <supported-locale>en</supported-locale>
            <supported-locale>es</supported-locale>
        </locale-config>
        <message-bundle>messages</message-bundle>
    </application>
</faces-config> 
```

**WsListingBean.java**

```
package com.example.ws.ui;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

@ManagedBean(name="wsListingBean")
@RequestScoped
public class WsListingBean {  
    //want to inject some property here through spring injection

    private String webServiceId; 

    public String getWebServiceId() { 
        return webServiceId; 
    }

    public void setWebServiceId(String webServiceId) {
        this.webServiceId = webServiceId;
    }

    public String action()
    {
        return this.webServiceId;
    }

} 
```

**wsListing.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" xmlns:lang="en">

<h:head>
<meta charset="utf-8"/>
<title>Web Service Listing</title>
<link href="../resources/css/abc-style.css"  rel="stylesheet" type="text/css" media="screen" />
</h:head>

<h:body class="login-body">
<!-- start main container -->
<div id="nb-login-container"> 
  <!-- start header -->
  <div id="content-header">
    <div class="logo"><a href="#"><img src="../resources/images/abc_logo.png"  alt="Logo abc" /></a></div>
  </div>
  <!-- end header --> 

  <!-- start content container -->
  <!-- start content main -->
  <div id="content-login">
    <div class="content-main-body">

    <div id="table-container">
        <h2>Web Services</h2>
        <h:form>
          <table width="100%" class="list-table">
            <tbody><tr>
              <th width="20%">Name</th>
              <th width="80">Description</th>
              </tr>
            <tr>
              <td><h:commandLink value="First Web Service"  action="#{wsListingBean.action}"><f:setPropertyActionListener target="#{wsListingBean.webServiceId}" value="abcService" /></h:commandLink></td>
              <td>
              Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae.
              </td>
              </tr>
            <tr class="odd-row">
              <td><a href="#">Web Services 2</a></td>
              <td>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.</td>
              </tr>
            <tr>
              <td><a href="#">Web Services 3</a></td>
              <td>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident. similique sunt in culpa qui officia deserunt.</td>
              </tr>
            <tr class="odd-row">
              <td><a href="#">Web Services 4</a></td>
              <td>Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus.</td>
              </tr>
            <tr>
              <td><a href="#">Web Services 5</a></td>
              <td>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae.</td>
              </tr>
            <tr class="odd-row">
              <td><a href="#">Web Services 6</a></td>
              <td> Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.</td>
              </tr>
            <tr>
              <td><a href="#">Web Services 7</a></td>
              <td>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident. similique sunt in culpa qui officia deserunt.</td>
              </tr>
            <tr class="odd-row">
              <td><a href="#">Web Services 8</a></td>
              <td>Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus.</td>
              </tr>
            <tr>
              <td><a href="#">Web Services 9</a></td>
              <td>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae.</td>
              </tr>
          </tbody></table>
          </h:form>
        </div>

    </div>
  </div>
  <!-- end content main  --> 
  <!-- end content container --> 
</div>
<!-- end main container -->
</h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:48:42.510

如果我能在这里看到正确的东西，那么
如果你能仔细阅读你的错误，它会说标识符`wslistingBean resolved to null`
在这里你想访问名为**wsListingBean**的 bean，但在某个地方你错误地输入了**wslistingBean**（L 在这里是小写字母）
所以看看你在做什么这个打字错误。
对于managedBean，如果您只是将第一个字母更改为小字母，则无需输入bean名称 -

```
@ManagedBean(name="wsListingBean")
@RequestScoped
public class WsListingBean {} 
```

对于此类，它会自动将**wsListingBean**作为 bean 名称。
所以你可以把它写成 -

```
@ManagedBean
@RequestScoped
public class WsListingBean {} 
```

那是一回事。

希望能解开你的疑惑......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:34:08.687

这应该是在 @PostConstruct 中加载 bean 属性的一种解决方法

```
@Postconstruct
private void initTheBean(){
webServiceId=resolveValue("#{springbeanname}",String.class);
}

public static <T> T resolveValue(String inputValueExpression,
                Class<T> outputClass) {
            FacesContext context = FacesContext.getCurrentInstance();

            ELContext elContext = context.getELContext();

            ValueExpression expression = context
                    .getApplication()
                    .getExpressionFactory()
                    .createValueExpression(elContext, inputValueExpression,
                            outputClass);

            return (T) expression.getValue(elContext);
        } 
```

# ios - 具有多个 DetailView 并在 detailview 中导航的 iPad 应用程序

> ID：10593871
> 
> 赞同：0
> 
> 时间：2012-05-15T03:42:01.977
> 
> 标签：ios, ipad

我寻找一种在 iPad 应用程序中拥有多个详细视图的方法，我在苹果开发者网站[http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MultipleDetailViews/Introduction/Intro.html)中找到了示例代码，但现在我想在此示例未涵盖的详细视图中进行导航，我将 uinavigationcontroller 添加到详细视图中：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ReportsViewController_iPad *master = [[ReportsViewController_iPad alloc] initWithNibName:@"ReportsViewController_iPad" bundle:nil];

    DetailViewController_iPad *detail = [[DetailViewController_iPad alloc] initWithNibName:@"DetailViewController_iPad" bundle:nil];

    UINavigationController *masterNavController = [[[UINavigationController alloc] initWithRootViewController:master ] autorelease];

    UINavigationController *detailNavController = [[[UINavigationController alloc] initWithRootViewController:detail ] autorelease];

    splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavController , detailNavController, nil];

    [window addSubview:splitViewController.view];
    [window makeKeyAndVisible];

    return YES;
} 
```

但是当我运行示例时出现错误

`[UINavigationController showRootPopoverButtonItem:]:`无法识别的选择器发送到实例...

`showRootPopoverButtonItem`是在协议中定义的方法`RootViewController`

```
@protocol SubstitutableDetailViewController
- (void)showRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem;
- (void)invalidateRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem;
@end 
```

---- ReportsViewController.h

```
@protocol SubstitutableDetailViewController
- (void)showRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem;
- (void)invalidateRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem;
@end

@protocol DetailViewControllerManagerDelegate

-(void) didSelectRowAtIndexPathPopOver:(NSString *)ID;

@end

@interface ReportsViewController_iPad : ReportsViewController<UISplitViewControllerDelegate , DetailViewControllerManagerDelegate>
{
    UISplitViewController *splitViewController;

    UIPopoverController *popoverController;

    UIBarButtonItem *rootPopoverButtonItem;
}

@property (nonatomic, assign) IBOutlet UISplitViewController *splitViewController;

@property (nonatomic, retain) UIPopoverController *popoverController;

@property (nonatomic, retain) UIBarButtonItem *rootPopoverButtonItem;

@property(nonatomic, retain) id<DetailViewControllerManagerDelegate> delegate;

-(void)didSelectRowAtIndexPath:(NSString*)ID;

@end 
```

--DetailViewController.h

```
#import <UIKit/UIKit.h>
#import "ReportsViewController_iPad.h"

@interface DetailViewController_iPad : UIViewController<SubstitutableDetailViewController>
{
     UIToolbar *toolbar;
}

@property (nonatomic, retain) IBOutlet UIToolbar *toolbar;

@end 
```

--DetailViewController.m

```
#import "DetailViewController_iPad.h"

@implementation DetailViewController_iPad

@synthesize toolbar;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

#pragma mark -
#pragma mark Managing the popover

- (void)showRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem {

    // Add the popover button to the toolbar.
    NSMutableArray *itemsArray = [toolbar.items mutableCopy];
    [itemsArray insertObject:barButtonItem atIndex:0];
    [toolbar setItems:itemsArray animated:NO];

    [itemsArray release];
}

- (void)invalidateRootPopoverButtonItem:(UIBarButtonItem *)barButtonItem {

    // Remove the popover button from the toolbar.
    NSMutableArray *itemsArray = [toolbar.items mutableCopy];
    [itemsArray removeObject:barButtonItem];
    [toolbar setItems:itemsArray animated:NO];
    [itemsArray release];
}

- (void)dealloc {
    [toolbar release];
    [super dealloc];
}   

@end 
```

所以提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T03:55:32.327

在`showRootPopoverButtonItem`存在方法定义的地方，似乎没有定义。你需要定义它。

如果你想避免崩溃，那么你可以使用 -

```
if ([aViewController respondsToSelector:@selector(showRootPopoverButtonItem:)]) {
    [aViewController performSelector:@selector(showRootPopoverButtonItem:) withObject:self.rootPopoverButtonItem];
} 
```

编辑 -

我已经检查过了，发现你做错了什么，例如代码`willHideViewController`-

```
UIViewController <SubstitutableDetailViewController> *detailViewController =  [splitViewController.viewControllers objectAtIndex:1]; 
```

这需要一个视图控制器，而您正在传递导航控制器，而导航控制器又具有视图控制器（在其他位置类似），因此如果您想从应用程序委托传递导航控制器，您还需要更改这些代码。

# android - 如何获取 micro_kind 等缩略图

> ID：10593872
> 
> 赞同：0
> 
> 时间：2012-05-15T03:42:06.960
> 
> 标签：android, thumbnails

我的代码如下：

```
Bitmap getPreview(String path, int THUMBNAIL_SIZE) {
BitmapFactory.Options bounds = new BitmapFactory.Options();
bounds.inJustDecodeBounds = true;
BitmapFactory.decodeFile(path, bounds);
if((bounds.outWidth == -1) || (bounds.outHeight == -1)) {
return null;
}

int originalSize = (bounds.outHeight > bounds.outWidth) ? bounds.outHeight : bounds.outWidth;

BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inSampleSize = originalSize / THUMBNAIL_SIZE;

return BitmapFactory.decodeFile(path, opts);     
} 
```

但是这个代码只能得到与原始代码相同的比例。
我想得到 96 * 96 的 micro_kind 缩略图，但不使用 micro_kind。
我该如何修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:50:33.243

你试过[Bitmap#createScaledBitmap](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)吗？

例子：

```
Bitmap scaled = Bitmap.createScaledBitmap(sourceBitMap, 96, 96, false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T05:20:56.680

我通过以下代码得到答案：

```
Bitmap sourceBitMap =  BitmapFactory.decodeFile(p, opts);     
sourceBitMap = ThumbnailUtils.extractThumbnail(sourceBitMap, 96, 96); 
```

# python - 使用 MySQLdb 在 Python 中执行 .sql 文件

> ID：10593876
> 
> 赞同：5
> 
> 时间：2012-05-15T03:42:28.990
> 
> 标签：python, mysql, mysql-python

我有一个 .sql 文件，其中包含一堆 SQL 查询，每个查询跨越多行。我想通过 Python 在 MySQL 中使用`MySQLdb`.

[`sqlite3`为此目的有一个“非标准快捷方式”，称为`executescript()`](http://docs.python.org/library/sqlite3.html)，但在 中似乎没有任何等效功能`MySQLdb`。

我注意到[2 年前的这个老问题，](https://stackoverflow.com/questions/4408714/execute-sql-file-with-python-mysqldb)它提出了同样的问题，但我发现答案并不令人满意。答案基本上是：

> 用于`subprocess`运行`mysql`命令并将其发送给您的 .sql 文件。

这行得通，但它相当不优雅，并且它通过错误处理等引入了不必要的复杂性。

> 如果每个查询都在一行上，只需分别执行每一行。

但就我而言，它们跨越多行，所以这行不通。

> 如果每个查询不在一行上，请以某种方式加入它们。

但是，怎么做？我的意思是，我可以很容易地破解一些东西，所以你不需要在这里回答半生不熟的答案，也许这就是我最终要做的，但是否已经有一个成熟的图书馆可以做到这一点？我对全面而正确的解决方案而不是黑客感到更自在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T02:33:52.387

`MySQLdb`似乎允许这个开箱即用，你只需要调用`cursor.nextset()`循环返回的结果集。

```
db = conn.cursor()
db.execute('SELECT 1; SELECT 2;')

more = True
while more:
    print db.fetchall()
    more = db.nextset() 
```

如果您想绝对确定对此的支持已启用，和/或禁用支持，您可以使用以下内容：

```
MYSQL_OPTION_MULTI_STATEMENTS_ON = 0
MYSQL_OPTION_MULTI_STATEMENTS_OFF = 1

conn.set_server_option(MYSQL_OPTION_MULTI_STATEMENTS_ON)
# Multiple statement execution here...
conn.set_server_option(MYSQL_OPTION_MULTI_STATEMENTS_OFF) 
```

# ruby-on-rails - Rails 3.2 Heroku 邮件发送错误：SocketError（getaddrinfo：名称或服务未知）：

> ID：10593877
> 
> 赞同：4
> 
> 时间：2012-05-15T03:42:31.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sockets, email, heroku

我正在使用 Rails 3.2.3 和 Heroku Bamboo 堆栈，使用 Mailgun 发送电子邮件。我随机收到此错误，但不知道它的含义或来源：

```
Started POST "/invites" for 67.250.49.100 at 2012-05-14 20:17:41 -0700
Sent mail to example@example.com (10147ms)

SocketError (getaddrinfo: Name or service not known):
    app/controllers/invites_controller.rb:43:in `invite_friend'
    app/controllers/invites_controller.rb:9:in `create' 
```

奇怪的是，有时它会起作用，但很少会抛出这个错误。有任何想法吗？我似乎无法定期复制...

# javascript - JS超时未触发

> ID：10593888
> 
> 赞同：0
> 
> 时间：2012-05-15T03:44:10.323
> 
> 标签：javascript, timer

只是似乎无法弄清楚这一点，如何防止外部循环继续执行，直到使用 setTimeout 执行内部循环：

```
 function $(s) { return document.getElementById(s); }
    var i = 0;
    for (i=0; i<6; i++){
        $('t'+i).className = 'show';
        cl('t'+i);
        for (var j=0; j<50; j++){
            cl('b'+i+'='+j+'%');
            setTimeout(function(){ $('b'+i).style.width = j+'%';},200);
        }
    } 
```

这段代码应该首先使元素 t0 可见，然后以 200ms 的时间间隔以 1% 的步长设置另一个元素 b0 的宽度，然后继续 t1,b1,t2,b2 等。

但是没有 200ms 的延迟，整个代码立即执行。

- - 编辑 - -

我没有很好地解释，这就是我想要做的：

```
1\. show element Ax
2\. increase element Bx width by 1% every 200ms until 50%
3\. wait until element Bx reaches 50% before continuing
4\. increment x
5\. goto 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T03:49:06.800

两个问题：

*   超时函数看到错误`i`和`j`值
*   它们都同时运行（200 毫秒后）

### 超时函数看到错误`i`和`j`值

主要问题是您传入的函数具有对and变量`setTimeout`的持久引用，而**不是**在创建函数时它们的副本。这意味着所有函数都将在运行时看到 和 的值，分别是和。这称为“关闭”这些变量（并且该函数称为“关闭”）。`i``j`**`i``j``6``50`**

 **解决此问题的常用方法是创建函数，使其关闭不会更改的内容。有几种方法可以做到这一点；我最喜欢的是使用工厂函数：

```
function $(s) { return document.getElementById(s); }
var i = 0;
for (i=0; i<6; i++){
    $('t'+i).className = 'show';
    cl('t'+i);
    for (var j=0; j<50; j++){
        cl('b'+i+'='+j+'%');
        setTimeout(makeHandler(i, j), 200);
    }
}
function makeHandler(ivalue, jvalue) {
    return function(){ $('b'+ivalue).style.width = jvalue+'%';};
} 
```

现在我们*调用* `makeHandler`, 它返回给我们一个关闭`ivalue`and的函数`jvalue`，它不会改变。或者对上面的改进，让我们在完成后处理 maker 函数：

```
function $(s) { return document.getElementById(s); }
var i = 0;
var makeHandler = function(ivalue, jvalue) {
    return function(){ $('b'+ivalue).style.width = jvalue+'%';};
};
for (i=0; i<6; i++){
    $('t'+i).className = 'show';
    cl('t'+i);
    for (var j=0; j<50; j++){
        cl('b'+i+'='+j+'%');
        setTimeout(makeHandler(i, j), 200);
    }
}
makeHandler = undefined; 
```

如果您可以依赖 ES5 功能（因为您所针对的环境，或者因为您包含了 ES5 shim），那么您可以使用新的[`Function#bind`](http://es5.github.com/#x15.3.4.5). `Function#bind`就像创建一个新函数一样`makeHandler`，但引擎总是有可能优化一点：

```
function $(s) { return document.getElementById(s); }
var i = 0;
for (i=0; i<6; i++){
    $('t'+i).className = 'show';
    cl('t'+i);
    for (var j=0; j<50; j++){
        cl('b'+i+'='+j+'%');
        setTimeout(handler.bind(undefined, i, j), 200);
    }
}
function handler(){
    $('b'+ivalue).style.width = jvalue+'%';
} 
```

第一个参数`bind`是`this`函数中应该包含的内容；在我们的例子中我们不在乎，所以我已经指定`undefined`（这意味着函数将`this`引用全局对象——`window`在浏览器上——除非这是*严格模式*代码，在这种情况下`this`实际上是`undefined`）。

### 它们都同时运行（200 毫秒后）

您的所有功能都计划在上述代码后 200 毫秒运行。他们会的。:-) 如果你想把它们分开，你需要为每次调用增加 200ms 到`setTimeout`. 我们可以乘以`i`and `j`：

```
setTimeout(makeHandler(i, j), (200 * i * j) + 200); 
```

现在第一个将在 200 毫秒后运行，第二个将在 200 毫秒后运行，依此类推。整个过程大约需要一分钟才能完成。这假设您希望第一个元素增长，然后是下一个，然后是下一个，而不是所有六个彼此平行增长。

或者，您可能希望每个函数都调用其后继函数。这大概就是我会做的。因此，与其安排 300 个函数调用，不如安排一个，当它发生时，安排下一个：

```
function $(s) { return document.getElementById(s); }

// Our counters are here
var i = 0, j = 0;

// This handles the outer portion of the loop (mostly)
function outer() {
    $('t'+i).className = 'show';
    cl('t'+i);
    j = 0;
    // Schedule the first inner portion 200ms from now
    setTimeout(inner, 200);
}

// This handles the inner portion of the loop (mostly)
function inner() {
    // Do this bit
    $('b'+i).style.width = j+'%';
    ++j;
    if (j < 50) {
       // Continue the inner loop in 200ms
       setTimeout(inner, 200);
    }
    else {
       // Set up next outer loop
       j = 0;
       ++i;
       if (i < 6) {
           // Not done yet, keep going
           setTimeout(outer, 200);
       }
     }
}

// Kick it off
setTimeout(outer, 200); 
```

在上面，我还移动了这些行：

```
$('t'+i).className = 'show';
cl('t'+i); 
```

...进入延迟的代码，我怀疑这是合适的。

### 更多探索：

*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T03:50:33.033

这是因为您*没有*关闭`i`and `j`：

```
setTimeout(function(i, j) { 
    return function() {
        $('b'+i).style.width = j+'%';
    }
}(i, j), 200); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T08:35:12.640

```
setTimeout(function () { alert('Refreshing…'); }, 2000); 
```

这意味着在两秒（2000 毫秒）后，显示警报**

# android - 在android中设置时间表

> ID：10593890
> 
> 赞同：0
> 
> 时间：2012-05-15T03:44:18.460
> 
> 标签：android, timer, schedule

我想在我的应用程序中设置一个时间表。如果我的应用程序被应用程序任务杀手停止，我的应用程序会在它被杀死几秒钟后自动运行。

我的应用程序是这样的：

```
public class AlarmServiceDemo extends Activity 
{
    /** Called when the activity is first created. */
    private PendingIntent pendingIntent;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button buttonStart = (Button)findViewById(R.id.startalarm);
        Button buttonCancel = (Button)findViewById(R.id.cancelalarm);

        buttonStart.setOnClickListener(new Button.OnClickListener()
        {

            // @Override
            public void onClick(View arg0) {
            // TODO Auto-generated method stub

            Intent myIntent = new Intent(AlarmServiceDemo.this, MyAlarmService.class);
            pendingIntent = PendingIntent.getService(AlarmServiceDemo.this, 0, myIntent, 0);

            AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            calendar.add(Calendar.SECOND, 10);
            alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);

            Toast.makeText(AlarmServiceDemo.this, "Start Alarm", Toast.LENGTH_LONG).show();
            }
        });

        buttonCancel.setOnClickListener(new Button.OnClickListener()
        {

            //@Override
            public void onClick(View arg0) 
            {
                // TODO Auto-generated method stub
                AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
                alarmManager.cancel(pendingIntent);

                // Tell the user about what we did.
                Toast.makeText(AlarmServiceDemo.this, "Cancel!", Toast.LENGTH_LONG).show();
            }
        });
    }
} 
```

这是我的服务：

```
public class MyAlarmService extends Service
{
    @Override
    public void onCreate() 
    {
        // TODO Auto-generated method stub
        Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG).show();
    }

    @Override
    public IBinder onBind(Intent intent) 
    {
        // TODO Auto-generated method stub
        Toast.makeText(this, "MyAlarmService.onBind()", Toast.LENGTH_LONG).show();
        return null;
    }

    @Override
    public void onDestroy() 
    {
        // TODO Auto-generated method stub
        super.onDestroy();
        Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onStart(Intent intent, int startId) 
    {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);
        Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();
    }

    @Override
    public boolean onUnbind(Intent intent) 
    {
        // TODO Auto-generated method stub
        Toast.makeText(this, "MyAlarmService.onUnbind()", Toast.LENGTH_LONG).show();
        return super.onUnbind(intent);
    }
} 
```

但是我的日程安排不行。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:47:04.100

你必须通过启动应用程序准确地写出你的意思。如果你想启动一个活动，那么你可以写

```
@Override
public void onStart(Intent intent, int startId) {
 // TODO Auto-generated method stub
Intent activityIntent = new Intent(context,
                AlarmServiceDemo.class);
        activityIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(activityIntent);

 super.onStart(intent, startId);

} 
```

# javascript - 跟踪元素之外的滚动位置

> ID：10593891
> 
> 赞同：0
> 
> 时间：2012-05-15T03:44:23.647
> 
> 标签：javascript, jquery, dom

我正在整理一个 jQuery 插件。该插件采用面板，并自动调整它们的高度。所以我从这样的事情开始：

```
<div class="panel">Test 1</div>
<div class="panel">Test 2</div>
<div class="panel">Test 3</div> 
```

代码看起来像：

```
 sizePanels: function(){
      panels.each(function(){
        $(this).height(docHeight);
      });
    }, 
```

有一个向下按钮，单击该按钮时，会将用户带到下一个 $(".panel)：

```
nextPanel: function(){
  $.scrollTo($(".panel:eq(" + panelIndex + ")"), 250, { easing: "swing" });
} 
```

有了这个，我正在跟踪他们所在的面板索引：

```
 if (panelIndex < (panelCount - 1) ) {
      panelIndex += 1;
    } 
```

我试图找出一种方法来跟踪它们是否碰巧手动滚动，并传递其中一个元素，然后增加“panelIndex”，这样按钮就不会向上移动而不是向下移动，因为它从来没有由于用户使用滚动条而不是按钮而正确递增。这是我到目前为止所拥有的：

```
 $(window).scroll(function(){
    panels.each(function(index){
      if ($(window).scrollTop() > $(this).scrollTop()) { 
        panelIndex = index; 
        // console.log(index);
      }
    });

    if (panelIndex < panelCount - 1){
      s.showDownButton();
    }
  }); 
```

代码过度检查并且感觉有些过火。有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:03:48.047

一个简单的优化是只计算一次 scrollTop 并在找到匹配时退出每个循环。您可以通过返回 false 来退出 $.each 循环。

```
$(window).scroll(function(){
    var scrollTop = $(window).scrollTop();
    panels.each(function(index){
        if (scrollTop > $(this).scrollTop()) { 
            panelIndex = index; 
        } else {
            return false;
        }
    });

    if (panelIndex < panelCount - 1){
        s.showDownButton();
    }
}); 
```

我建议优化的下一个方法是在页面加载时（以及调整视口大小时）预先计算每个面板的 scrollTop。如果将这些值存储在数组中，则可以非常快速地循环它们。

这里有一些粗略的代码来说明这个想法：

```
var panelTops = [];

findPanelTops(); // calculate on load
$(window).on("resize", findPanelTops); // calculate on resize

function findPanelTops() {
    panelTops = [];
    panels.each(function(index) {
        panelTops.push($(this).scrollTop());
    });
}

$(window).scroll(function(){
    var scrollTop = $(window).scrollTop();
    for (var i = 0; i < panelTops.length; i++) {
        if (scrollTop > panelTops[i]) { 
            panelIndex = i;
        } else {
            break;
        }
    };

    if (panelIndex < panelCount - 1){
        s.showDownButton();
    }
}); 
```

滚动事件可以非常快速地触发，因此您希望尽可能减少计算量。解决所有这些问题的一种方法是实现一个滚动端处理程序。这只会在滚动事件似乎已经停止时触发。

这是执行此操作的一些基本代码。当滚动事件停止超过 500 毫秒时，它将触发：

```
var scrollTimeout = null;

function onScroll() {
    if (scrollTimeout) {
        clearTimeout(scrollTimeout);
    }
    scrollTimeout = setTimeout(onScrollEnd, 500);
}

function onScrollEnd() {
    // Scrolling has stopped
    // Do stuff ...

   scrollTimeout = null;
}

$(window).on("scroll", onScroll); 
```

# ruby - 一个类和它的父类可以包含同名的成员变量吗？

> ID：10593892
> 
> 赞同：0
> 
> 时间：2012-05-15T03:44:31.063
> 
> 标签：ruby, inheritance

我做了以下例子来演示。如果我`name`在课堂上都使用`Song`，`KarokeSong`我会得到一个错误。

```
class Song
  def initialize(name, artist, duration)
    @name = name
    @artist = artist
    @duration = duration
  end

  def to_s
    "Song: #{@name}--#{@artist} (#{@duration})"
  end
end

class KarokeSong < Song
  def initalize(name, kname, artist, duration, lyrics)
    super(name, artist, duration)
    @name = kname
    @lyrics = lyrics
  end

  def to_s
    "KS: #{@name}--#{@artist} (#{@duration}) [#{@lyrics}] **#{@name}**"
  end
end

songA = Song.new("Bicyclops", "Fleck", 260)
puts songA.to_s

songB = KarokeSong.new("John", "Casey", "The Band", 400, "And now, the...")
puts songB.to_s 
```

这是我在尝试运行文件时收到的错误。

```
stanley@ubuntu:~/Github/webdev_class/ruby$ ruby inheritance.rb
Song: Bicyclops--Fleck (260)
inheritance.rb:28:in `initialize': wrong number of arguments(5 for 3) (ArgumentError)
    from inheritance.rb:28:in `new'
    from inheritance.rb:28:in `<main>' 
```

我猜`name`如果存在继承关系，则不允许使用该名称两次。我不确定这是否与 Ruby 不支持多重继承或 V 指针这一事实有关。提前感谢您对正在发生的事情的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:47:17.800

我认为问题在于 KaraokeSong 没有从 Song 继承。

将 KaraokeSong 类定义更改为`class KaraokeSong < Song`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:49:44.073

作为对标题中问题的回答：实例变量绑定到对象，而不是类。`@name`将始终引用给定对象中的相同变量，无论访问它的方法属于哪个类。

```
super name     # assigns name to @name
@name = kname  # overwrites name with kname 
```

# .net - .net runtime 2.0 而不是最新版本？

> ID：10593896
> 
> 赞同：2
> 
> 时间：2012-05-15T03:45:27.593
> 
> 标签：.net, exception, frameworks, runtime, clr

在我的计算机上，我安装了 .NET Framework 2.0，然后安装了 .NET Fratmeworkt 3.0。但是最近我从一个程序中得到一个异常，说“事件 1000，.NET 运行时 2.0 错误报告”。我想知道，为什么这个程序仍然使用 .NET Runtime 2.0 而不是新版本。如何检查特定程序使用的 .NET Runtime 版本？有可能改变吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T04:32:03.583

“.NET 运行时”实际上是指“公共语言运行时”(CLR)，它已经是 .NET 框架 2.0、3.0 和 3.5 的 2.0 版。只有在 .NET 4.0 中，CLR 版本也增加到了 4.0（有很多问题是关于 SO 上的双版本控制的混淆，对于一个很好的概述，请参见这个[答案](https://stackoverflow.com/a/8659235/21567)）。因此，您看到的消息可能令人困惑，但仍然是正确的。

如果您尚未安装 .NET 4.0，则 .NET 运行时 2.0 是您机器上唯一存在的版本。

您可能想知道应用程序是否实际上是针对 .NET 框架 3.0 (3.5) 而不是 .NET 框架 2.0 编译/构建的。

要获取此信息，您需要查看应用程序程序集的元数据，即存储对其他程序集（包括 .NET 框架本身的引用）的引用的位置 - 以及其他程序集的版本。

要查看此信息，您可以使用 Reflector，或者`ILDASM.EXE`.NET Framework SDK（或 Visual Studio）附带的。

例如，`ILDASM.EXE`在您选择的二进制文件（可执行文件或 DLL）上使用，然后打开“MANIFEST”节点。你会看到这样的条目：

```
.assembly extern System.Windows.Forms
{
  .publickeytoken = (B7 7A 5C 56 19 34 E0 89 )                         // .z\V.4..
  .ver 4:0:0:0
} 
```

在这种情况下，这是从 .NET 4.0 应用程序中获取的，仅指 . `System.Windows.Forms.dll`，但我认为您明白了。

[`<supportedRuntime>`](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)通过在应用程序的配置文件中指定元素，您可以（部分）影响应用程序使用的运行时版本。有关这方面的更多讨论，请参阅[此 Stack Overflow](https://stackoverflow.com/q/3953063/21567)[问题](https://stackoverflow.com/search?q=supportedRuntime&submit=search)等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T04:47:28.193

**运行时**是关键字。运行时只有 4 个不同的版本：1.0、1.1、2.0 和 4.0。您仍在使用 2.0.50727 版的 CLR 和抖动。而且 mscorlib.dll 和其他核心 .NET 框架程序集仍然是 2.0.0.0

当您安装 .NET 3.0 时，您肯定获得了更多好东西，一堆支持 WCF、WPF 和 Linq 之类的新程序集以及新版本的 C# 编译器。即使它们不需要运行时的新版本，也足以保证增加版本号。

下一个 .NET 版本 4.5 也会发生同样的事情。运行时版本保持不变，4.0.30319

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T03:50:44.973

这完全取决于所讨论的应用程序是针对哪个版本的 .NET 编译的。开发者选择目标框架。据我所知，最终用户无法更改部署后使用的库版本。如果应用程序针对 2.0，即使您安装了 4.0，它也将始终在 2.0 版本的库上运行。

# wcf - 没有 SSL 但具有 Windows 组身份验证的 WCF 服务

> ID：10593897
> 
> 赞同：1
> 
> 时间：2012-05-15T03:45:41.383
> 
> 标签：wcf, ssl, web-config, windows-authentication

我们正在尝试创建一个只能由指定的 Windows 组访问的 WCF 服务。如何在服务器 web.config 和客户端配置中进行配置？

注意：我们希望能够控制允许在服务器 web.config 中访问的 Windows 组，而不是在代码中。此外，我们根本不需要/不需要 SSL。

我用谷歌搜索，然后我能找到的最好的例子都是这样的......

[WCF 服务、Windows 身份验证](https://stackoverflow.com/questions/1367653/wcf-service-windows-authentication)

但这并不能解释如何将访问权限仅限于特定组或组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T07:23:46.117

如果这是 Intranet 应用程序，您可以使用 netTcpBinding：

```
<services>
   <service name="YourService"
      behaviorConfiguration="YourServiceBehavior">
      <endpoint 
         binding="netTcpBinding"
         bindingConfiguration="SecureTransportWindows"
         contract="YourContract" />
   </service>
</services>

<bindings>
   <binding name="SecureTransportWindows">
      <security mode="Transport">
          <transport clientCredentialType="Windows" />
      </security>
   </binding>
</bindings>

<behaviors>
   <serviceBehaviors>
      <behavior name="YourServiceBehavior">          
          <serviceAuthorization principalPermissionMode="UseWindowsGroups" />
      </behavior>
   </serviceBehaviors>
</behaviours> 
```

然后在服务代码中你可以要求 windows 角色：

```
class YourService : YourContract
{
    [PrincipalPermission(SecurityAction.Demand, Role="MYDOMAIN\Administrators")]
    public string SecuredOperation(string name)
    {
       return "secured operation";
    }
} 
```

如果您需要在配置中设置它，那么您必须实现自定义授权：

```
<behavior name="YourServiceBehavior">          
   <serviceAuthorization principalPermissionMode="Custom">            
      <authorizationPolicies>
         <add policyType="YourCustomAuthorizationPolicy"/>
      </authorizationPolicies>          
   </serviceAuthorization>
</behavior> 
```

并在代码中实现 IAuthorizationPolicy 接口：

```
public class YourCustomAuthorizationPolicy : IAuthorizationPolicy
{
   //you need to check msdn 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T00:41:58.017

好的，这就是我们想出的解决方案。尽管它确实涉及代码更改（添加 AspNetCompatibilityRequirements 属性），但我们现在可以在 web.config 文件中实现组/角色的配置，而不是硬编码。

这有很多步骤...

1) 将**aspNetCompatibilityEnabled**属性添加到 serviceHostingEnvironment 元素中并设置为 true，例如...

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" /> 
```

这告诉 WCF 服务在 ASP.NET 兼容模式下运行并完全参与 ASP.NET HTTP 请求生命周期。有关完整详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa702682.aspx)。

2) 在 WCF 代码中，按照上面的链接和[本 MSDN 文章中的规定，将](http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.aspnetcompatibilityrequirementsattribute.aspx)**AspNetCompatibilityRequirements**属性添加到服务类...

```
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)> 
```

3）现在我们可以添加通常的 ASP**授权**元素来限制对指定组/用户的访问（没有上面的设置（1）和（2），这将被 WCF 忽略）...

```
<system.web>
    <authorization>
        <allow roles="MYDOMAIN\WCFAuthenticatedUsers" /> <-- allows access to users in this group
        <deny users="*" /> <-- denies access to all other users
    </authorization>
</system.web> 
```

# cookies - 鼓掌 (Phonegap) 应用程序不承认 cookie

> ID：10593904
> 
> 赞同：4
> 
> 时间：2012-05-15T03:47:46.410
> 
> 标签：cookies, cordova, applaud

[我有一个使用Phonegap](http://phonegap.com/)的网络界面[AppLaud](http://applaudcloud.com/)为 Android（希望很快是 iPhone）构建的应用程序。

它工作得几乎完美，只是它似乎没有承认 cookie 数据。

我看到了[这个问题](https://stackoverflow.com/questions/8449736/storing-and-sending-of-http-cookies-not-working-in-phonegap-app)，它解决了几乎相同的问题，除了答案是针对[Phonegap Eclipse 插件](http://wiki.phonegap.com/w/page/34483744/PhoneGap%20Eclipse%20PlugIn%20for%20Android)的。即使我理解了答案（我不完全理解），我也看不出如何在**AppLaud**界面中应用它。

如何获取 AppLaud 构建的应用程序来存储和接收 cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:21:12.090

我会尝试这里公开的方法：[Android：如何存储 cookie？](https://stackoverflow.com/questions/4082799/android-how-to-store-cookies)通过将它们添加到 PhoneGap 项目的 App.java 类的 onCreate 或 init 方法中。

您的 PhoneGap 项目中应该有一个名为 app.java 的文件，可能包含以下内容或类似内容：

```
public class App extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

将其修改为如下所示以测试 CodeSyncManager 示例：

```
public class App extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        CookieSyncManager.getInstance().sync();
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

# ruby-on-rails - 保存到数据库后，是否有额外的步骤使值出现在表单中

> ID：10593907
> 
> 赞同：0
> 
> 时间：2012-05-15T03:48:16.737
> 
> 标签：ruby-on-rails, ruby

我正在使用 Ruby on Rails。我有一个表单，当用户更改值并点击保存时，页面重新加载并将值保存到数据库中，但字段为空白。是否需要采取额外的步骤来确保在其字段中仍然可以看到这些值，或者我保存到数据库的方式是否存在错误？

# c# - 为什么不能在线程中读写流

> ID：10593910
> 
> 赞同：1
> 
> 时间：2012-05-15T03:48:40.137
> 
> 标签：c#, multithreading, delegates

我想在线程中处理http请求，代码如下，问题是OutputStream（如代码中所述）无法写入。当我把这个进程放在主线程中时，没问题。你能给我什么建议吗？

```
 public partial class MainWindow : Window
    {
       private void Window_Loaded(object sender, RoutedEventArgs e)
       {
            var server = new HttpServer();
            try
            {
                server.EndPoint = new IPEndPoint(127.0.0.0, 80); //set webServer para
                server.Start(); //start webServer
                server.RequestReceived += server_RequestReceived; //register the event
            }
            catch (Exception ex)
            {
                return;
            }
       }
       private void server_RequestReceived(object sender, HttpRequestEventArgs e)
       {
           var dataProcess = new Action<HttpRequestEventArgs>(DataProcess);
           Dispatcher.BeginInvoke(dataProcess,e); //start thread
       }
       private void DataProcess(HttpRequestEventArgs e)
       {
           StreamReader sr = new StreamReader(@"c:\test.txt");
           string text = sr.ReadToEnd();
           using (var writer = new StreamWriter(e.Response.OutputStream)) //**Cannot write stream**
           {
               writer.Write(text);
           }
           sr.Close();
       }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:28:02.383

我认为您的请求在新线程运行之前已经关闭。您可以做的是在新线程中执行整个请求。就像是：

```
public partial class MainWindow : Window
{
   private void Window_Loaded(object sender, RoutedEventArgs e)
   {
        var start = new Action<HttpRequestEventArgs>(Start);
        Dispatcher.start(start,e); //start thread
   }

   private void Start(HttpRequestEventArgs e)
   {
        var server = new HttpServer();
        server.EndPoint = new IPEndPoint(127.0.0.0, 80); //set webServer para
        server.Start(); //start webServe
        server.RequestReceived += server_RequestReceived; //register the event
   }

   private void server_RequestReceived(object sender, HttpRequestEventArgs e)
   {
       StreamReader sr = new StreamReader(@"c:\test.txt");
       string text = sr.ReadToEnd();
       using (var writer = new StreamWriter(e.Response.OutputStream)) //**Cannot write stream**
       {
           writer.Write(text);
       }
       sr.Close();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:36:23.753

大多数`e.Response.OutputStream`可能是只写流，其中包含从服务器接收到的响应。

根据您想要做什么，您可以写入请求流或从 OutputStream 读取。

注意：您正在使用一些自定义类，因此建议完全基于方法名称。

# ios - iOS 设备使用哪种色彩空间？

> ID：10593920
> 
> 赞同：8
> 
> 时间：2012-05-15T03:49:48.093
> 
> 标签：ios, rgb, uicolor

当我使用MAC Digital Color Meter检测屏幕的RGB颜色时，RGB值可以显示为sRGB、Adobe RGB、原始RGBs空间等，并且略有不同。

我想在 iOS Xcode 平台中使用这些值，并使用`UIColor`类来表示它们，我应该在 Digital Color Meter 中选择哪个颜色空间？

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-08-13T01:56:43.383

iPhone 肯定使用 sRGB。请参阅页面上的此注释`CGColorSpace Reference`：

[https://developer.apple.com/documentation/uikit/uicolor?language=objc#1968626](https://developer.apple.com/documentation/uikit/uicolor?language=objc#1968626)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-19T18:23:49.150

iOS 本身[只支持与设备相关的色彩空间](https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_color/dq_color.html#//apple_ref/doc/uid/TP30001066-CH205-TPXREF128)。我听说 sRGB 或 Adob​​e RGB 最接近 iPhone/iPad 显示器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-06T23:20:27.503

iPhone 使用 sRGB 色彩空间。

但是为了安全起见，我建议你使用`CGColorSpaceCreateDeviceRGB()`来生成色彩空间而不是`kCGColorSpaceSRGB`

# javascript - 使用 javascript 在 foreach 中引用 KnockoutJs 值

> ID：10593921
> 
> 赞同：1
> 
> 时间：2012-05-15T03:49:53.650
> 
> 标签：javascript, knockout.js

**更新** 这里的关键问题是我们现在拥有的 ruby​​ 对象和相关方法（在 erb 模板中处理）和 JSON 中的纯 viewModels 之间的阻抗不匹配，我们可以将其提供给 KnockoutJs 等。我将创建 KO-friendly viewModels w/all产品该区域所需的信息并更改其他区域以机会主义地使用 KO...

我是 KnockoutJs 的新手。我已经设置了我的 viewModel 并且可以像这样使用'comment form'foreach 来显示值

```
<!-- ko foreach: filteredProducts -->
  <span>id:</span>
   <span data-bind="text: id"></span>
   (...)
   <br/>
<!-- /ko --> 
```

但是我需要做的是像这样引用我的 foreach**中的数组条目值之一**

```
<script> current_id = $data.id </script> 
```

这样我就可以通过 ERB 使用 Id 来调用 Ruby 函数。但是这里的脚本看不到 $data 。

viewModel 是可见但类似的问题：脚本中 $index（foreach 的另一个 KnockoutJs 上下文变量）的可见性。

欢迎提出想法 - 迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T06:19:37.900

答案是你不能也不应该。您不能`$index`从嵌入式脚本中引用。`foreach`而且您不应该在 Knockout块中嵌入脚本；你可能不会喜欢这个结果。

使用绑定在视图模型 (javascript) 和视图 (html) 之间进行交互。如果需要，请使用[自定义绑定。](http://knockoutjs.com/documentation/custom-bindings.html)

# c++ - 从 int 转换为 enum

> ID：10593923
> 
> 赞同：3
> 
> 时间：2012-05-15T03:50:08.423
> 
> 标签：c++

我已经声明了以下枚举：

```
 enum periods {one, five, ten, fifteen, thirty}; 
```

现在我想在我的主函数中将它作为命令行参数传递。

```
int main(int argc, char* argv[]) {

  periods mp;
  if (argc == 2) {
      std::string min_prd(argv[2]);
      mp=atoi(min_prd.c_str());
 } 
```

编译器抱怨：

```
error: invalid conversion from ‘int’ to ‘periods’ 
```

我做了 atoi() 因为我认为 enum 是一个 int - 我该如何修复我的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T03:53:15.537

你必须明确地转换它：

```
mp=static_cast<periods>(atoi(min_prd.c_str())); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T03:59:17.837

我已经声明了以下枚举：

```
enum periods {one, five, ten, fifteen, thirty}; 
```

现在我想在我的主函数中将它作为命令行参数传递。

```
periods mp = atoi(argv[2]);   // simplified for answer... 
```

所以，有几个问题：

*   您需要将返回的 int`atoi`转换为枚举类型...`static_cast<periods>(...)`
*   您应该意识到“0”的 argv[2] 将映射到枚举标识符“一”，“1”将映射到“五”等...
    *   如果您实际上希望 "1" 映射到 "one"、"5" 到 "5" 等，最简单的方法是更改​​您的 enum: `enum periods { one = 1, five = 5, ten = 10, fifteen = 15, thirty = 30 };`，但是您的示例显然有点做作，因此无法猜测哪种方法最有效满足您的真正需求
*   没有验证

你最好创建一个函数：

```
periods to_periods(const std::string& s)
{
    if (s == "one") return one;
    if (s == "five") return five;
    if (s == "ten") return ten;
    if (s == "fifteen") return fifteen;
    if (s == "thirty") return thirty;
    throw std::runtime_error("invalid conversion from text to periods");
} 
```

（当有更多情况时，使用 a`std::map`或 sorted`std::vector`来跟踪这些关联并不少见，它允许可重用​​的算法和相同的数据支持从枚举数值到文本标识符的转换。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T19:53:09.563

直接的解决方案是使用`static_cast`（因为其他答案已经发布）：

```
periods mp;
if (argc == 2)
{
   std::string min_prd(argv[1]); //the index should be 1
   mp = static_cast<periods>(atoi(min_prd.c_str()));
} 
```

但是 then**不**`atoi`应该用于将 c-string 转换为 int，因为不检查输入字符串中的错误，因此它是**unsafe**。**`atoi`**

 ****C++11 提供了更安全的转换函数，因此您可以[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)用作：

```
try
{
   periods mp;
   if (argc == 2)
   {
      //std::stoi could throw exception on error in input
      mp = static_cast<periods>(std::stoi(argv[1]));
   }
   //use mp here
}
catch(std::exception const & e)
{
   std::cout << "exception caught with message : " << e.what() << std::endl;
} 
```

现在这是一个更好的解决方案。

* * *

但是，您可以使用另一种解决方案：

```
period mp;
if (argc == 2)
{
   mp = to_period(argv[1]); //how should we implement it?
   if (mp == period_end)
   {
       std::cout << "command line input error" << std::endl;
       return 0;
   }
} 
```

现在的问题是，我们应该如何实现`to_period`函数？

**请注意，此解决方案假定枚举值的命令行参数`one`将是其字符串表示形式，即它将是整数表示形式，`"one"`而不是`1`整数表示形式。**

我会将此解决方案实施为：

*   首先创建一个名为的头文件`period_items.h`：

    ```
    //period_items.h
    E(one)
    E(five)
    E(ten)
    E(fifteen)
    E(thirty) 
    ```

*   然后创建另一个名为`period.h`的头文件：

    ```
    //period.h
    #include <string>

    enum period 
    {
       #define E(item)  item,
         #include "period_items.h"
       #undef E
       period_end
    };

    period to_period(std::string const & name)
    {
       #define E(item)  if(name == #item) return item;
         #include "period_items.h"
       #undef E
       return period_end;
    } 
    ```

现在您可以简单地包含`period.h`和使用`to_period`函数。:-)

请注意，在替代解决方案中，我使用了单数形式而不是复数形式，这意味着我使用`period`了而不是`periods`. 我觉得`period`合适。

您还可以将此功能添加到`period.h`：

```
std::string to_string(period value)
{
    #define E(item)  if(value == item) return #item;
        #include "period_items.h"
    #undef E
    return "<error>";
} 
```

现在，你可以这样写：

```
#include "period.h"

period v = to_period(argv[1)); //string to period
std::string s = to_string(v);  //period to string 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T04:04:29.680

随机猜测，您真正想要的更像是：

```
periods mp;
if (argc < 2) {
    mp=one; // default value
} else if (strcmp(argv[1], "one")==0) {
    mp=one;
} else if (strcmp(argv[1], "five")==0) {
    mp=five;
} else if (strcmp(argv[1], "ten")==0) {
    mp=ten;
} else if (strcmp(argv[1], "fifteen")==0) {
    mp=fifteen;
} else if (strcmp(argv[1], "thirty")==0) {
    mp=thirty;
} else {
    fprintf(stderr, "I can't possibly comprehend periods = '%s'\n", argv[1]);
    return -1;
} 
```****

# inno-setup - 退出循环会退出函数

> ID：10593924
> 
> 赞同：4
> 
> 时间：2012-05-15T03:50:28.487
> 
> 标签：inno-setup, pascal

今天下午我一直在 Inno Setup 中进行编码，并且我阅读了一些[Pascal 文档](http://www.amath.unc.edu/sysadmin/DOC4.0/pascal/lang_ref/ref_state.doc.html#612)，其中说`exit`用于退出循环。我尝试在我的代码中使用它，但它退出了该函数。例如，在此函数中，消息框将永远不会显示：

```
function NextButtonClick(CurPageID: Integer): Boolean;
var i: Integer;
begin
    Result := True;

    for i := 0 to 4 do
    begin
        exit
    end;

    MsgBox('test',mbInformation,MB_OK);
end; 
```

我做了更多的谷歌搜索，Pascal 也有`break`关键字，所以我使用了它并且它工作正常。真的`exit`应该是用来退出的功能吗？我记得今天下午读到 Pascal 没有相当于 C 风格的 return 语句。

对于 Inno Setup 正在使用的 Pascal 版本，我真的需要一些好的文档。我已经阅读了 Inno 帮助页面，但它们没有涵盖这样的内容。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T05:00:58.170

您使用了错误的文档，您的链接指向[`Sun Workshop Compiler Pascal 4.2`](http://www.amath.unc.edu/sysadmin/DOC4.0/pascal/lang_ref/preface.doc.html). Inno setup 使用作为脚本语言 The [`RemObjects Pascal Script`](http://www.remobjects.com/ps.aspx)which is a Delphi-like Pascal dialect, Inno 使用的 Pascal Sripting 的官方文档位于[此处](http://www.jrsoftware.org/ishelp/index.php?topic=scriptintro)，另外您可以查看[`Marco Cantù's Essential Pascal`](http://www.marcocantu.com/epascal/English/default.htm).

# .net - winform 中 2d 矢量形状编辑器的示例

> ID：10593928
> 
> 赞同：1
> 
> 时间：2012-05-15T03:50:39.540
> 
> 标签：.net, winforms, vector-graphics

我想在winform中实现一个简单的2d矢量整形器编辑器，谁能给个启动项目供参考？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:39:08.463

我不知道，但这些链接可能会对您有所帮助： [简单矢量形状](http://www.codeproject.com/Articles/19195/Simple-Vector-Shapes) 和[“SvgPad”](http://www.codeproject.com/Articles/8207/SVGPad-Application-and-class-library-for-editing-S)和[“AC# SVG 渲染引擎”](http://svg.codeplex.com/)

如果您要构建矢量图形编辑器，请查看以下内容： [“C# 中的 SVG 框架和 SVG-GDI+ 桥”](http://www.codeproject.com/Articles/3751/An-SVG-framework-in-C-and-an-SVG-GDI-bridge) 和 [“SvgNET”](https://github.com/monoman/SvgNet) [“Gtk Sharp”](http://en.wikipedia.org/wiki/Gtk_Sharp)

还有许多用于矢量图形编辑的开源项目，例如：[“VRR”](http://atrey.karlin.mff.cuni.cz/projekty/vrr/index.html)

祝你好运

# java - Java 加载图像更快

> ID：10593935
> 
> 赞同：2
> 
> 时间：2012-05-15T03:52:11.670
> 
> 标签：java, performance, image, swing

我正在尝试用 Java 编写一个简单的轻量级图像浏览器，目前我正在使用`ImageIO.read(new File(/* PATH_TO_IMAGE */))`它来加载图像。

问题是，加载 10 个 JPEG 需要 10467 毫秒。这似乎很慢，尤其是当我计划可能加载数百张图像时。

有没有更快的方法来加载它们？

另外，我通过`paintComponent`在 JPanel 中覆盖并使用 Graphics2D 绘制缩略图来绘制缩略图，如果这有什么不同的话。（并随时提出更好的方法来做到这一点）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T05:00:55.450

如果要显示缩略图，则应考虑创建和存储缩略图。

您不能期望每秒能够加载数百个 6 MB 的文件。缩略图大约 50 KB，加载速度更快（“加载”是从硬盘读取并在内存中解码）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T05:24:14.817

放大@Thomas Mueller 关于缩略图的建议，您可以将繁重的工作卸载到 a ，`SwingWorker`如图所示[。](https://stackoverflow.com/a/4530659/230513)另请参阅有关重采样的此[答案](https://stackoverflow.com/a/6916719/230513)。

# ios - AVAudioSession - 似乎认为我一直在播放音频

> ID：10593937
> 
> 赞同：0
> 
> 时间：2012-05-15T03:52:44.247
> 
> 标签：ios, avaudioplayer, avaudiosession

我在我的 iOS 应用程序中使用背景音频。当应用程序启动时，没有音频播放，但状态栏显示播放图标，遥控器上显示暂停按钮。该应用程序似乎认为我已经在播放音频。

`viewDidLoad`

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: nil];
[[AVAudioSession sharedInstance] setActive: YES error: nil]; 
```

`viewWillAppear`

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder]; 
```

**任何想法为什么iOS认为我正在播放音频？我怎样才能解决这个问题？**

我可以毫无问题地接收远程事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T00:29:02.823

我想通了...我正在使用 Finch iOS 音频库，其初始化的一部分使 iOS 确信音频正在播放。

```
FIFactory *soundFactory = [[FIFactory alloc] init];
FISoundEngine *engine = [soundFactory buildSoundEngine];
[engine activateAudioSessionWithCategory:AVAudioSessionCategoryPlayback];
[engine openAudioDevice]; 
```

我想使用 Finch 并且想预加载我的音效，这样就可以使用了。不幸的是，如果没有显示播放图标，这似乎是不可能的。

# c++ - 如何用 Visual Studio 构建 o2scl？

> ID：10593939
> 
> 赞同：1
> 
> 时间：2012-05-15T03:52:56.253
> 
> 标签：c++, visual-studio, visual-studio-2010, visual-c++

我想用 Visual Studio 构建 o2scl。o2scl 是 GNU 库的 C++ 包装器。好像我必须使用配置和制作文件，[这里](http://o2scl.sourceforge.net/o2scl/html/install_section.html)有一些安装说明。我猜它们是 gcc 编译器的目标。我以前从来没有做过这种事情。我想知道是否有人可以告诉我如何做到这一点，或者指出我可以在哪里可以加快使用 Visual Studio 构建这些类型的库的速度？

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:29:46.123

我是 O2scl 的首席开发人员。我确实使用 gcc 以外的编译器（Pathscale、Intel C 等）安装了 O2scl，但使用 Visual Studio 进行编译似乎需要更多的努力。O2scl 目录和 makefile 结构与 GSL（GNU 科学库）使用的非常相似，因此 GSL 所需的任何 Visual Studio 文件都可能适用于 O2scl。看

[http://gladman.plushost.co.uk/oldsite/computing/gnu_scientific_library.php](http://gladman.plushost.co.uk/oldsite/computing/gnu_scientific_library.php)

例如有人设计了一个在 Visual Studio 中安装 GSL 的系统。请注意，O2scl 需要 GSL，因此您可能必须先安装 GSL。我这个周末要去旅行，但如果可以的话，我下周会去看看。

# java - Heroku中如何查看某个id对应的日志

> ID：10593945
> 
> 赞同：0
> 
> 时间：2012-05-15T03:53:36.603
> 
> 标签：java, heroku, playframework

如何在 heroku 中查看此 id 此异常已使用 id 6ac06o8ho 记录。此异常已使用 id 4bc06o8ho 记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T06:00:42.230

使用 heroku 查看日志

```
heroku logs 
```

播放在堆栈跟踪之前的日志中添加一行@6ac06o8ho

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:40:41.630

试试这个命令（选择以异常 id **开头的行）：**

```
heroku logs | grep -i "\(\@6ac06o8ho\)\|\(\@4bc06o8ho\)" 
```

或尝试不太具体（选择**包含**id 的行）：

```
heroku logs | grep -i "\(6ac06o8ho\)\|\(4bc06o8ho\)" 
```

或者这个（与上面相同，但最多过滤 1500 行）：

```
heroku logs -n 1500 | grep -i "\(6ac06o8ho\)\|\(4bc06o8ho\)" 
```

我也很惊讶可以结合`grep`实时`--tail`过滤日志：

```
heroku logs | grep -i "\@[a-z0-9]\{9\}" 
```

# php - ajaxified php邮件不起作用

> ID：10593951
> 
> 赞同：0
> 
> 时间：2012-05-15T03:54:27.043
> 
> 标签：php, jquery, ajax, html

我在 MAC 上运行，我正在尝试将 php 邮件与 ajax 实现一起使用。

我已将代码简化为简化为字符串：

在我的 .js 文件中：

```
function ajaxMail2() {

        $('#sending').show();

        $.ajax({

            type:'POST',
            url:'ajax/mail.php',

            success:function(data, status) {
                $('#sending').hide();
                $('#success').fadeIn(1000,function() {
                    //$(this).delay(200).fadeOut(1000);
                });
            },

            error:function(data, status, e) {
                $('#sending').hide();
                $('#fail').fadeIn(1000,function() {
                    $(this).delay(200).fadeOut(1000);
                });
            }

        });

    } 
```

在我的 .php 文件中：

```
<?php

$to = 'foo@gmail.com';
mail($to,'test','test');

?> 
```

提交表单后，它会转到成功功能，但没有电子邮件发送到 $to。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:19:59.403

```
<?php
$to = 'foo@gmail.com';
if(mail($to,'test','test')) {
  echo "sent";
}
else {
  echo "error";
}
exit;
?> 
```

和你的 js

```
.....
success:function(data, status) {
     if("sent" == data) { 
         $('#sending').hide();
         $('#success').fadeIn(1000,function() {
            //$(this).delay(200).fadeOut(1000);
         });
    }
    else {
        alert("Could not send mail");
    }
}, 
```

这样您就可以检查邮件是否已发送

不确定这是否能解决您的问题，但请尝试添加标题：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'To: Someone <foo@gmail.com>' . "\r\n";
$headers .= 'From: Me <my@mail.com>' . "\r\n";

$to = 'foo@gmail.com';
if(mail($to,'test','test')) {
   ..... 
```

# macos - 在 Cocos2d for MacOS X 中运行程序时出现关闭消息

> ID：10593956
> 
> 赞同：0
> 
> 时间：2012-05-15T03:54:56.003
> 
> 标签：macos, cocoa, cocos2d-iphone

目前我正在开发一个用于`Mac OS X`使用的 Cocos2d 应用程序`xCode 4.2.1`。所以我的问题是，有时在运行程序时系统会卡住并向我显示这样的消息 - `You need to restart your computer.Hold down the power button until it turns off.Then press the power button again`。收到此消息后，如果不重新启动计算机，我将无法继续进行。这个问题背后的问题可能是什么。谁能帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T06:04:16.480

你得到的是所谓的**内核恐慌**。

**解析度**

> **使用安全启动重新启动您的 Mac，看看内核恐慌是否再次发生**
> 
> 在大多数情况下，内核崩溃不是由您的 Mac 问题引起的。它们很可能是由 Mac 外部问题引起的。如果内核恐慌在几周内没有再次发生，您无需进一步排除故障。
> 
> 1.  根据您所拥有的 Mac 型号，通过以下方式之一重新启动：
>     • 按住电源按钮几秒钟以关闭您的 Mac。然后，按电源按钮启动 Mac。
>     • 如果您有重新启动按钮，请按下它。
> 2.  Mac 启动后，按住 Shift 键以安全启动进入安全模式。**注意：**如果您使用的是第三方外接键盘并且无法通过安全启动启动，请尝试改用 Apple 键盘。
> 3.  如果您的 Mac 在启动时或处于安全模式时出现内核崩溃，请跳至本文的“解决反复出现的内核崩溃”部分。
> 4.  如果您的 Mac 在安全启动后启动时没有出现内核崩溃，请通过选择 Apple 菜单 > 重新启动...重新启动您的 Mac，然后让它正常启动。**运行软件更新并安装所有可用更新，直到软件更新报告“您的软件是最新的”。**Mac OS X 更新提高了对格式错误的网络数据包等外部问题的容忍度。对于大多数内核恐慌，这就是你所要做的。

**注意：**尽管不太可能，您的网络上的某些东西可能会发送您的 Mac 格式错误的网络数据包，这可能会导致反复出现内核崩溃。如果 Mac 上的硬件和软件检查结果正常，请检查网络上的设备。确保您的路由器固件是最新的，并且路由器没有出现故障。请咨询您的路由器制造商以获得服务和支持。

* * *

您也可以尝试在`kernel.log`. 转到实用程序文件夹中的控制台应用程序，然后键入：

```
tail -f /var/log/kernel.log 
```

它会将文件打印`kernel.log`到您的控制台。

* * *

更多信息：
[Mac OS X 命令行中的内核日志](http://osxdaily.com/2011/04/20/console-logs-command-line-mac/)。
[如何记录内核恐慌](http://support.apple.com/kb/HT2546)。
[内核恐慌](http://support.apple.com/kb/TS3742)。

# c# - 重写文本文件时出现未知异常

> ID：10593958
> 
> 赞同：0
> 
> 时间：2012-05-15T03:55:05.227
> 
> 标签：c#, text-files, file-access

所以我有一个函数调用分类器，它基本上检查目录中的所有文本文件，如果有任何文本文件包含超过 50 行的单词，然后使用其他名为 Text_Classification 的类将该文本文件分类为一种类型，我确信它是正确的并且没有错误。分类后，我需要清理该文本文件并在该文本文件上写一个“行”作为第一个新行（这是其他类，所以不要打扰:)）。但是我遇到了一个异常，这意味着该`try{}`块中有问题。

知道为什么吗？

```
static void classifer(object state) {
    Console.WriteLine("Time to check if any log need to be classified");
    string[] filename = Directory.GetFiles(@"C:\Users\Visual Studio 2010\Projects\server_test\log");
    foreach(string textfile_name in filename) {
        var lineCount = File.ReadAllLines(textfile_name).Length;
        if(lineCount > 50) {
            Console.WriteLine("Start classifying 1 of the logs");
            Text_Classification classifier = new Text_Classification(textfile_name, 1);
            string type = classifier.passBack_type();  //this function passes back the type of the log(text file)
            Console.WriteLine(type);
            try {
                TextWriter tw = new StreamWriter(textfile_name); //clean the text file
                tw.WriteLine(" ");
                tw.Close();
                TextWriter tw2 = new StreamWriter(textfile_name, true);  //append <Lines> as the first new line on the text file
                tw2.WriteLine("Lines");
                tw2.Close();
            }
            catch {
                Console.WriteLine("cant re-write txt");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:22:46.503

如前所述，这条线是罪魁祸首：

```
Text_Classification classifier = new Text_Classification(textfile_name, 1); 
```

该类`Text_Classification`正在打开而不是关闭文件`textfile_name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:26:23.353

你可以尝试以下

```
 File.WriteAllLines(textfile_name, new String[]{" "});
            File.AppendAllLines(textfile_name, new String[]{" Lines "}); 
```

代替

```
 try
                {
                    TextWriter tw = new StreamWriter(textfile_name); //clean the text file
                    tw.WriteLine(" ");
                    tw.Close();

                    TextWriter tw2 = new StreamWriter(textfile_name, true);  //append <Lines> as the first new line on the text file
                    tw2.WriteLine("Lines");
                    tw2.Close();
                }
                catch {
                    Console.WriteLine("cant re-write txt");
                } 
```

# java - 通过 Java 桌面（非 Web）中的浏览器从数据库下载文件

> ID：10593962
> 
> 赞同：0
> 
> 时间：2012-05-15T03:56:06.987
> 
> 标签：java

是否可以通过 Java 桌面应用程序（非 Web 应用程序）中的浏览器（例如：mozilla、chrome）从数据库下载文件？你能用示例代码解释一下吗？
提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T04:07:16.153

使用[`Desktop#browse()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)其中您只需指定该文件的 URI（与您在普通网络浏览器的地址栏中输入的完全相同）。

```
Desktop.getDesktop().browse(new URI("http://example.com/download/file.ext")); 
```

另一方只需设置`Content-Disposition: attachment`此响应以强制进行*另存为*对话（当然，用数据库中的必要数据填充响应正文）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T04:36:19.680

任何通过浏览器可用的东西都应该对 Java 桌面应用程序可用。至少除非服务器（例如谷歌）采取措施阻止“程序访问”。

> 你能用示例代码解释一下吗？

当然，改编自[Java Sound 信息。页](https://stackoverflow.com/tags/javasound/info)。

```
import java.net.URL;
import javax.swing.*;
import javax.sound.sampled.*;

public class LoopSound {

    public static void main(String[] args) throws Exception {
        // imagine a DB is preparing/serving this - same difference.
        URL url = new URL(
            "http://pscode.org/media/leftright.wav");
        Clip clip = AudioSystem.getClip();
        AudioInputStream ais = AudioSystem.
            getAudioInputStream( url );
        clip.open(ais);
        clip.loop(-1);
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JOptionPane.showMessageDialog(null, "Close to exit!");
            }
        });
    }
} 
```

# java - 核心银行和 ATM 服务器之间的 Java 中间件的可扩展性

> ID：10593963
> 
> 赞同：1
> 
> 时间：2012-05-15T03:56:09.063
> 
> 标签：java, multithreading, sockets

我需要构建一个 Java 模块，该模块将充当 ATM 服务器或任何其他接受卡的销售点与核心银行系统之间的路由器。该模块应在与核心烘焙系统通信之前解释来自端点的请求并进行一些处理。通信将通过 TCP IP 套接字的 java 实现。像 ATM 这样的端点将是服务器，而这个中间件将是客户端。此应用程序将继续侦听服务器消息，并且应该能够解释 1k 到 2k 范围内的同时请求。

这个想法是让一个客户端套接字线程监听服务器消息并在不同的线程中处理每个接收到的消息。我的基本想法有什么问题吗？

是否有任何开源应用程序可以满足我的要求？提前感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T04:07:57.807

Apache [MINA](http://mina.apache.org/) 和[JBoss Netty](http://www.jboss.org/netty)是您可以尝试的两个著名的开源选项。有很多关于两者的[比较](https://stackoverflow.com/questions/1637752/netty-vs-apache-mina)报告。您可以搜索更多比较报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T05:54:57.673

[在http://akka.io/](http://akka.io/)上对类似的想法进行了一些评估，发现它很有用。然而，产品理念从未投入生产。

# c# - 获取数据表列值时指定的强制转换无效

> ID：10593965
> 
> 赞同：1
> 
> 时间：2012-05-15T03:56:28.920
> 
> 标签：c#, .net, web-services, datatable, datarow

当我尝试从数据表中获取列值时，会出现上述错误消息。

这是我在堆栈跟踪中找到的：

> System.Linq.Enumerable.WhereSelectEnumerableIterator 1 来源）`2.MoveNext()
> at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`

```
 and this in the TargetSite when debugging: 
```

> { 布尔 b__0(System.Data.DataRow)}

这是我的代码：DataTable hr = new DataTable();

```
 hr.Columns.Add("BookingDate");
            hr.Columns.Add("BookingId");
            hr.Columns.Add("BookingSource");
            hr.Columns.Add("CheckInDate");
            hr.Columns.Add("CheckOutDate");

            for (int i = 0; i < gmisc.GetModifiedBookings(gmoreq).Bookings.Length; i++)
            {
                hr.Rows.Add();
                hr.Rows[i]["BookingDate"] = Convert.ToDateTime(gmisc.GetModifiedBookings(gmoreq).Bookings[i].BookingDate.ToString());
                hr.Rows[i]["BookingId"] = Convert.ToInt64(gmisc.GetModifiedBookings(gmoreq).Bookings[i].BookingId.ToString());
                hr.Rows[i]["BookingSource"] = gmisc.GetModifiedBookings(gmoreq).Bookings[i].BookingSource.ToString();
                hr.Rows[i]["CheckInDate"] = Convert.ToDateTime(gmisc.GetModifiedBookings(gmoreq).Bookings[i].CheckInDate.ToString());
                hr.Rows[i]["CheckOutDate"] = Convert.ToDateTime(gmisc.GetModifiedBookings(gmoreq).Bookings[i].CheckOutDate.ToString());

            }
            Int64 BookingId = (from DataRow dr in hr.Rows
                          where (Int64)dr["BookingId"] == BookId
                          select (Int64)dr["BookingId"]).FirstOrDefault();
                TextBox1.Text = Convert.ToString(BookingId); 
```

我哪里错了，如果有人可以告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:10:27.307

如果 dr["BookingId"] 从不为空（否则添加空检查）

采用

```
 Int64 BookingId = (from DataRow dr in hr.Rows
                        where Int64.Parse(dr["BookingId"].ToString()) ==BookId
                        select Int64.Parse(dr["BookingId"].ToString())).FirstOrDefault(); 
```

代替

```
 Int64 BookingId = (from DataRow dr in hr.Rows
                      where (Int64)dr["BookingId"] == BookId
                      select (Int64)dr["BookingId"]).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T04:13:39.490

检查您的代码，前两行：

```
hr.Rows[i]["BookingDate"] = Convert.ToDateTime(gmisc.GetModifiedBookings(gmoreq).Bookings[i].BookingDate.ToString());
hr.Rows[i]["BookingId"] = Convert.ToInt64(gmisc.GetModifiedBookings(gmoreq).Bookings[i].BookingId.ToString()); 
```

如果 gmisc.GetModifiedBookings(gmoreq).Bookings[i].BookingDate 为空，那么 ??? 您正在尝试将其转换为字符串，然后转换为日期时间

如果为空，则 .ToString 将给出错误“指定成本.......”

在转换为日期时间时也会发生同样的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T04:06:22.093

当您使用重载创建数据列时`Add(string)`，该列的类型是`string`（请参阅[http://msdn.microsoft.com/en-us/library/52xzw8tf.aspx](http://msdn.microsoft.com/en-us/library/52xzw8tf.aspx)）。您不能将字符串直接转换为`Int64`or `DateTime`。

使用[`Add(string, Type)`](http://msdn.microsoft.com/en-us/library/730zyedy)重载或[`Add(string, Type, string)`](http://msdn.microsoft.com/en-us/library/632cdz7z)重载来指定列数据的类型。

# windows - bat 文件令牌或 for 循环出错：无法识别为内部或外部命令、可运行程序或批处理文件

> ID：10593967
> 
> 赞同：0
> 
> 时间：2012-05-15T03:56:50.153
> 
> 标签：windows, loops, batch-file

需要 Windows .bat 文件技术支持。我在运行遍历令牌和变量的 Win 7 bat 文件时遇到问题。下面的脚本适用于我妻子的 PC，应该适用于所有 PC，但不适用于我的 PC。

** 我在我的 Mac 上的 VMWare 中运行 Windows 7。

该文件位于 c 的根目录：

这个简短的小脚本，以及任何其他喜欢它的带有标记的脚本都会给我错误（我从 .bat 文件中复制了下面的脚本）：

```
setLocal ENABLEDELAYEDEXPANSION
set SCHEMA_one= first
set SCHEMA_two= second
set SCHEMA_three= third

@ECHO ON
FOR /F "tokens=2* delims=_=" %%A IN ('set SCHEMA_') DO (
    echo "looping through " %%A
)
endLocal 
```

我收到以下错误：

```
C:\>FOR /F "tokens=2* delims=_=" %A IN ('set SCHEMA_') DO (echo "looping through " %A )  
'set SCHEMA_' is not recognized as an internal or external command, operable program or batch file. 
```

想法？？？

提前谢谢了。我已经被困了几个小时......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:23:53.767

您可能需要查看`for /?`，特别是使用`usebackq`. 这可以改变你设置的解释。

此外，我也总是`enableextensions`在我的命令中使用，以确保*完全*按照我的需要`setlocal`设置环境。

 *另一件事是对批处理文件进行十六进制转储，以确保`set`和之间的字符`SCHEMA`实际上是一个空格。如果它是不同的角色，那么`cmd`可能会将`set.SCHEMA`（`.`那个有趣的角色在哪里）视为一个命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:37:20.360

编辑-我确实找到了答案..完整的用户错误..

在某些时候，COMSPEC 环境变量路径发生了变化，所以是错误的！！！！有错别字！！！：/太蹩脚了。

在比较新环境和旧环境之间的环境变量时，我终于注意到了错字。伙计，一个角色花了我好几个小时。我以前没有意识到（尽管现在很明显）这是用于 bat 命令的路径，否则我会对其进行更仔细的审查。不知道为什么它完全有效（？？？）

================ 好吧，我对修复不满意-因为它是一个大锤子。但是我安装了一个新的 Windows 7 VM，现在我可以运行脚本了。早些时候安装了 vm- 3.1.4 的更新版本（我的 3.1.2 的最新免费升级），但这并没有解决问题。在此之前我尝试了上面建议的东西（非常感谢上面发布的人！）

不知道我的 Windows 安装出了什么问题，但确实是这样。我与其他计算机进行了比较，我的环境参数看起来都不错。Java 很好，等等。只是关于我在那个 VM 上的用户帐户，或者......？没有把握。时间不多了，只好继续前行。:)

如果我弄清楚了，我会发布答案。同时，我将设置并希望在这个新 VM 上工作。

干杯！达斯汀*

# ruby-on-rails - 大量 WebSocket 连接

> ID：10593969
> 
> 赞同：6
> 
> 时间：2012-05-15T03:57:21.137
> 
> 标签：ruby-on-rails, ruby, html, websocket, em-websocket

我正在编写一个应用程序来跟踪特定任务的用户之间推送的内容。我正在考虑使用 WebSockets 发送新内容，因为它们可供当前正在使用该应用程序执行该给定任务的所有用户使用。

我在 Rails 上写这篇文章，客户端应用程序在 iOS 上（可能也会在 Android 上）。恐怕这个 WebSocket 解决方案可能无法很好地扩展。在决定使用 WebSockets 还是使用某种轮询解决方案时，我正在寻求一些建议和要考虑的事情。

Ruby on Rails 服务器（如 Heroku）是否支持同时打开大量 WebSocket？为了争论，假设有一百万个连接。任何人都可以向我提供这些东西的任何材料吗？

如果我以这种方式构建它，它会在服务器托管上花费更多吗？

是否有可能同时维护数百万个 WebSocket？我觉得这可能不是最好的设计决策。

这是我第一次尝试正确的 Rails API。任何意见是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:36:39.943

WebSockets 上的数百万个连接，使用 Ruby，如果您不使用集群在不同实例之间传播连接以处理所有数据处理，我看不到它的真实性。
这里的问题是序列化和反序列化数据。

您还必须研究需要多久将数据从服务器拉到客户端，以及是否值得使用 AJAX 进行定期检查，然后一直处理连接。因为如果你确实处理了连接然后你不使用它 - 这是浪费资源。WebSockets 建立在 TCP 层之上，所有连接对于操作系统来说并不“便宜”，并且再次向它们询问可用数据并不是一个简单的过程，如果不使用最先进的技术，有数百万个连接几乎是不可能的事情在世界上。

我认为 Erlang 能够处理数百万个连接，但我没有详细信息。连接是一回事，另一回事是处理数据和连接之间的交互 ​​- 您可能需要检查这一点，因为如果您有繁重的处理算法，那么您肯定需要研究集群解决方案的水平扩展选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-22T03:36:27.133

*   如果您正在实施聊天，请使用 websockets。
*   如果您正在实时实现 1 路消息，请使用服务器发送的事件。
*   如果您要实现每隔几个小时左右发送一次的单向消息，请使用 APNS。

俗话说手机在手，用websockets/server发送事件。手机放在口袋里，使用 APNS。

APNS 将缓解 wifi 下降、tcp/ip 套接字挂起和许多其他问题。真的很有用。有可能需要一点时间才能通过。但是话又说回来，websockets 有机会

最新版本的 iOS 允许您在不向客户端弹出消息的情况下向客户端发送 APNS，因此它可以向服务器询问更多信息。这与一些后台实现一起确实改善了事情。

如果可能，不要实现完全匿名的客户端。检测客户端是否重新安装应用程序非常棘手。因此，您最终会向客户端发送重复项。需要考虑到这一点。

APNS 在 ruby​​ 中实现看起来微不足道，但我建议避免这种冲动并使用支持 google 和 apple 的现有 gem/服务。实施起来比起初看起来要复杂得多。

如果您决定坚持使用 websockets，那么在 nginx 中使用 websockets 可能是有意义的，例如[https://github.com/wandenberg/nginx-push-stream-module](https://github.com/wandenberg/nginx-push-stream-module)

旁白：在速度至关重要的情况下使用 SMS 非常昂贵。每个电话号码每月 1 美元只能发送每秒 1 条消息的最大速率。所以每秒发送 100 条消息 = 100 美元/月加上消息费。请注意，以 50 条消息/秒的速率发送 100 条消息 = 50 美元/月。但如果你想发送 1k 条消息，则需要 20 秒。

祝你好运

# file - 跨平台文件修改跟踪

> ID：10593973
> 
> 赞同：1
> 
> 时间：2012-05-15T03:58:12.933
> 
> 标签：file, filesystems, cross-platform

我希望能够以与平台无关的方式跟踪对一组文件的文件修改。我不需要任何特定信息，只需文件的完整路径即可。

我宁愿避免：

*   不断循环文件。这太可怕了！

*   编写特定于平台的代码。特别是对于 Windows 或 Mac OS X，因为我无法访问运行其中任何一个的机器。

* * *

免责声明：我注意到关于 SO 的类似问题，但由于大多数都超过 4 岁，我觉得从那时起这可能已经发生了很大变化，而且它们可能已经过时了。

# android - Android NDK 链接

> ID：10593987
> 
> 赞同：4
> 
> 时间：2012-05-15T04:01:19.087
> 
> 标签：android, android-ndk, shared-libraries

我正在尝试构建一个调用 C++ 后端的 android 应用程序。此后端使用 ZeroMQ 进行消息传递。根据 ZeroMQ 指南上的[android 构建页面](http://www.zeromq.org/build%3aandroid)，我构建了一个 ndk 版本 6 的本机工具链，并使用它来（成功）构建 ZeroMQ。

但是，当我使用 JNI 实现构建自己的 .so 时，我似乎无法正确加载所有内容。具体来说，如果我调用*System.LoadLibrary("zmq")*，这将成功完成，但如果我随后调用 *System.LoadLibrary("my_lib")* 我总是收到 UnsatisfiedLinkError 抱怨：

```
Cannot load library reloc_library[1244]:   29 cannot locate zmq_msg_init'... 
```

libmy_lib.so 已经生成了几种不同的方法，每种方法都没有成功。生成它后，我总是将 libmy_lib.so（以及 libzmq.so）复制到我的 android 项目的文件夹：libs/armeabi/。

```
# Compile all object files - this part was done for all options
/opt/android-toolchain/bin/arm-linux-androideabi-g++ -fpic -c Client_Events.cpp \
Client Wrapper.cpp jni.cpp -I /opt/android-root/include/ -I /my/project/specific/stuff

# Option 1 - Don't link the lib in at all
/opt/android-toolchain/bin/arm-linux-androideabi-g++ -shared  \
-Wl,-soname,libmy_lib.so -o libmy_lib.so jni.o Client_Events.o Client_Wrapper.o 

# Option 2 - Link ZeroMQ in statically
/opt/android-toolchain/bin/arm-linux-androideabi-g++ -shared  \
-Wl,-soname,libmy_lib.so -o libmy_lib.so jni.o Client_Events.o Client_Wrapper.o \
libzmq.a libstdc++.a -Wl,--whole-archive    

# Option 3 - Explicitly link ZeroMQ in dynamically
/opt/android-toolchain/bin/arm-linux-androideabi-g++ -shared  \
-Wl,-soname,libmy_lib.so -o libmy_lib.so jni.o Client_Events.o Client_Wrapper.o \
-L /opt/android-root/lib/ -lzmq 
```

对于这些选项中的每一个，我都尝试在加载我自己的库之前显式调用*System.LoadLibrary("zmq")而不是。*结果没有任何变化。使用 nm 可以确认，至少在选项 #2 的情况下，缺少的符号 *zmq_msg_init* 确实存在于 libmy_lib.so 中。

关于为什么找不到链接的 ZeroMQ 符号的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T09:33:21.627

我刚刚学会了如何编译第二个库并将其链接到我在 android ndk 中的主库。让我看看我对你有没有用。

以下是我如何创建我的第二个库（在我的例子中，我将子弹物理库和 irrlicht 渲染引擎构建为我的游戏的 2 个单独的库）。

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_C_INCLUDES := HEADER FILES 
LOCAL_MODULE := bullet
LOCAL_SRC_FILES := SRC FILES

LOCAL_ARM_MODE := arm
LOCAL_CFLAGS := $(LOCAL_C_INCLUDES:%=-I%) -O3 -DANDROID_NDK -DDISABLE_IMPORTGL
LOCAL_LDLIBS := -ldl -llog

include $(BUILD_SHARED_LIBRARY) 
```

然后将您的 libxxxx.so（在我的情况下为 libbullet.so 和 libirrlicht.so）复制到您的 jni 文件夹。并在您的主库 .mk 文件中添加以下内容。

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_C_INCLUDES := (includes for bullet)
LOCAL_MODULE := bullet
LOCAL_SRC_FILES := libbullet.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_C_INCLUDES := (includes for irrlicht)
LOCAL_MODULE := irrlicht
LOCAL_SRC_FILES := libirrlicht.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_C_INCLUDES := (includes for bullet + includes for irrlicht + includes for main code)
LOCAL_SRC_FILES := main code src files

LOCAL_MODULE := gamescript

LOCAL_ARM_MODE   := arm
LOCAL_CFLAGS := $(LOCAL_C_INCLUDES:%=-I%) -O3 -DANDROID_NDK -DDISABLE_IMPORTGL
LOCAL_LDLIBS := -lOpenSLES -landroid -ldl -llog

LOCAL_SHARED_LIBRARIES := bullet irrlicht

include $(BUILD_SHARED_LIBRARY) 
```

现在，以正确的顺序将所有库添加到您的 java 代码中。

```
System.loadLibrary("bullet");
System.loadLibrary("irrlicht");
System.loadLibrary("gamescript"); 
```

# android - 如何提示用户输入由大写字母、小写字母、数字和符号组成的强密码？

> ID：10593989
> 
> 赞同：0
> 
> 时间：2012-05-15T04:01:36.423
> 
> 标签：android, regex, sharedpreferences

```
public class LockAppActivity extends Activity{

    EditText pass1, pass2;
    Button back, next;
    SharedPreferences prefs;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lockapp);

        pass1 = (EditText) findViewById(R.id.edit1);
        pass2 = (EditText) findViewById(R.id.edit2);

        back = (Button) findViewById(R.id.back);
        back.setOnClickListener(new View.OnClickListener() {    
            public void onClick(View v1) {
                Intent setIntent = new Intent(Intent.ACTION_MAIN);
                setIntent.addCategory(Intent.CATEGORY_HOME);
                setIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(setIntent); 
            }
        });

        next = (Button) findViewById(R.id.next);
        next.setOnClickListener(new View.OnClickListener() {
            String password1 = "";
            String password2 = "";

            public void onClick(View v){

                password1 = pass1.getText().toString();
                password2 = pass2.getText().toString();             

                if (!password1.equals("")){

                    if (password1.length() >= 15){
                        Pattern pattern = Pattern.compile("[[0-9]&&[a-z]&&[A-Z]]");
                        Matcher matcher = pattern.matcher(password1);   

                        if(matcher.matches()){                      

                            if (password1.equals(password2)){
                                //SavePreferences("Password", password1);
                                Intent intent = new Intent(LockAppActivity.this, PhoneNumActivity.class);
                                startActivity(intent);
                            }
                            else{
                                pass1.setText("");
                                pass2.setText("");
                                Toast.makeText(LockAppActivity.this,"Not equal",Toast.LENGTH_LONG).show();
                            }
                        }
                        else{
                            pass1.setText("");
                            pass2.setText("");
                            Toast.makeText(LockAppActivity.this,"Not matched",Toast.LENGTH_LONG).show();
                        }
                    }
                    else{
                        pass1.setText("");
                        pass2.setText("");
                        Toast.makeText(LockAppActivity.this,"Length",Toast.LENGTH_LONG).show();
                    }                       
                }
                else{
                    pass1.setText("");
                    pass2.setText("");
                    Toast.makeText(LockAppActivity.this,"Nothing",Toast.LENGTH_LONG).show();
                }
            }
        });
    }

    private void SavePreferences(String key, String value){
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
    }
} 
```

当我输入有效密码时遇到问题，但它会弹出一个提示“不匹配”的吐司，以及我将如何在应用程序中保存此密码，当输入新密码时，它将更新并覆盖旧密码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T05:26:12.387

在 Java regex 风格中，`&&`是一个集合交集运算符。它仅在字符类中使用。你的正则表达式：

```
[[0-9]&&[a-z]&&[A-Z]] 
```

...尝试精确匹配一个字符，该字符必须是所有三个集合`[0-9]`、`[A-Z]`和的成员`[a-z]`。显然，没有这样的性格。使用正则表达式验证密码的最常用技术是使用单独的前瞻来匹配每个所需的字符类型，然后进行“真实”匹配以验证长度和整体组成。在您的情况下，它可能如下所示：

```
^(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])[0-9A-Za-z]{15,}$ 
```

您正在使用该`matches()`方法来应用正则表达式，因此您实际上不必使用开始和结束锚点（`^`和`$`），但这并没有什么坏处，并且它可以更清楚地向必须阅读您的任何人传达您的意图稍后代码。

请注意，我只是更正您的正则表达式以符合您规定的标准，而不是评论标准本身。如果代码的特定于 Android 的部分有任何错误，我也不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:22:07.170

您可以使用正则表达式验证密码，如下所示

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class PasswordValidator{

  private Pattern pattern;
  private Matcher matcher;

  private static final String PASSWORD_PATTERN = 
          "((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})";

  public PasswordValidator(){
      pattern = Pattern.compile(PASSWORD_PATTERN);
  }

  /**
   * Validate password with regular expression
   * @param password password for validation
   * @return true valid password, false invalid password
   */
  public boolean validate(final String password){

      matcher = pattern.matcher(password);
      return matcher.matches();

  }
} 
```

请参阅此处了解更多信息：[http ://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/)

# string - Actionscript 3：通过字符串访问实例？

> ID：10593991
> 
> 赞同：0
> 
> 时间：2012-05-15T04:02:19.637
> 
> 标签：string, oop, actionscript, instance

这不一定特定于 ActionScript 3，但我无法想到如何通过字符串访问实例，或者即使这是可能的。

我所做的是一个场景中的一个函数被传递一个字符串，在我的例子中是一个电影剪辑的特定实例的名称。有没有办法使用该字符串来访问该场景中的该实例，IE 被传递了字符串，我可以更改该实例的 alpha，它与传递的字符串的名称相匹配。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:31:15.580

基本上，可以通过执行以下操作来访问对象/场景的所有公共实例：

```
myMovieClip["myInstance"] 
```

这相当于

```
myMovieClip.myInstance 
```

因此，当您将字符串传递给函数以访问该场景的特定实例时，例如，您可以执行以下操作：

```
function myFunc(name:String, alpha:Number):void {
    myMovieClip[name].alpha = alpha;
} 
```

希望有帮助！

# django - Django：用于处理未知数量字段的动态表单

> ID：10593992
> 
> 赞同：1
> 
> 时间：2012-05-15T04:02:20.370
> 
> 标签：django, django-forms

我遇到的问题是在我的模板中，有一个表单可以扩展到未知数量的输入（文件和文本）以提交图像和标题。我的照片模型有 2 个字段：ImageField 和 CharField。根据上传的图像数量，我想在我的视图中创建该数量的照片对象。

因此，用户可能想要上传 2 张照片，或者其他人将上传 10 张。我已阅读 Jacobian 关于[动态表单生成](http://jacobian.org/writing/dynamic-form-generation/)的帖子，但这似乎仅限于已知数量的字段。

你如何构造表单类来处理未知数量的参数？

到目前为止，我有：

```
class PhotoForm(forms.Form):        

def __init__(self, *args, **kwargs):
    super(PhotoForm, self).__init__(*args, **kwargs)
    print args
    self.fields['photo'] = forms.ImageField(
        label=_("Photo 1 (Required)"),
        widget=forms.FileInput( attrs={'class':''}),
            required=True)
    self.fields['photo_desc'] = forms.CharField(
        label=_("Photo 1 Description"),
        widget=forms.TextInput(),
        required=True) 
```

我相信我需要遍历将创建 N 个字段的参数。这将允许表单在我调用 form.is_valid() 时进行验证。

我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T05:16:57.200

您可以使用 javascript 创建表单，然后使用 Django 的表单集来处理表单。

[这是与代码示例类似的问题](https://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax)

# dom - knockout.js - 列表中的数据绑定子项

> ID：10593994
> 
> 赞同：0
> 
> 时间：2012-05-15T04:02:35.587
> 
> 标签：dom, data-binding, knockout.js

鉴于此页面上给我的优雅示例： [knockout.js - modify DOM in current item in list (expand list item subsection) using templates](https://stackoverflow.com/questions/10577326/knockout-js-modify-dom-in-current-item-in-list-expand-list-item-subsection-u)

我想在每个工作中添加一个名为“JobNotes”的子项目列表。假设现在 JobNote 具有“Id”和“Text”的结构。我将如何在我的工作列表中对子项目列表进行数据绑定？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:28:02.603

这个问题的答案可以在这个 jsFiddle 上找到

[http://jsfiddle.net/R4Gnw/21/](http://jsfiddle.net/R4Gnw/21/)

```
<div data-bind="foreach: jobs">
    <div>
        <div class="jobContainer">
            <label data-bind="text: data.JobTitle"></label> 
            <l`enter code here`abel data-bind="text: data.CompanyName"></label>
            <div class="jobDetails" data-bind="visible: expanded">
                <label data-bind="text: data.CityName"></label>
                <label data-bind="text: data.JobIndustry"></label>
                <div data-bind="foreach: notes">
                    <label data-bind="text: text"></label>
                     <a href="#" data-bind="click: $parent.deleteNote ">Remove</a>                    
                </div> 
            </div>                           
        <div>
        <a href="#" data-bind="click: $parent.toggle, text: linkLabel">Expand</a> 
        <a href="#" data-bind="click: $parent.addNote">Add Note</a>  
    </div>    
</div>    

​var json = [
    {
    "JobTitle": "Investment Banking Associate",
    "CompanyName": "Value Line Consulting",
    "CityName": "Sydney - Australia",
    "JobIndustry": "Consulting - General",
    "JobNotes": [
        {
        "Id": 4,
        "JobId": 1474,
        "Text": "A test Note!"}
    ],
    "Id": 1474}
]

function JobNote(data) {
    this.text= data.Text;
}

function Job(data) {
    var self = this;
    this.data = data;
    this.notes = ko.observableArray([]);
    //     new JobNote("note1"),
    //     new JobNote("note2"),
    //     ]);
    var mappedNotes = $.map(data.JobNotes, function(item) { return new JobNote(item) });
    this.notes(mappedNotes);

    this.someValue = ko.observable().extend({
        defaultIfNull: "some default"
    });

    this.expanded = ko.observable(false);

    this.linkLabel = ko.computed(function() {
        return this.expanded() ? "collapse" : "expand";
    }, this);

    this.deleteNote = function(jobNote) {
        self.notes.remove(jobNote);
    }
};

var viewModel = function() {
    var self = this;
    this.jobs = ko.observableArray([
    //    new Job(json), 
     //   new Job(), 
    //    new Job(),
    ]);

    this.toggle = function(item) {
        item.expanded(!item.expanded());
    }

    this.addNote = function(job) {
        job.notes.push(new JobNote("new note"));
    }

    var mappedJobs = $.map(json, function(item) {
        return new Job(item)
    });`enter code here`
    self.jobs(mappedJobs);
};

ko.applyBindings(new viewModel());​ 
```

# java - 在构建路径中包含其他项目时的 NoClassDefFound

> ID：10593997
> 
> 赞同：2
> 
> 时间：2012-05-15T04:03:02.810
> 
> 标签：java, android, buildpath

我有 2 个项目：dummy 和 dummy-android。dummy-android 使用来自 dummy 的 Game 类。我在 dummy-android 的构建路径中包含了 dummy 但在模拟器上运行时。它生成：

```
E/AndroidRuntime(  691): java.lang.NoClassDefFoundError: com.dummy.Game
E/AndroidRuntime(  691):    at com.dummy.activity.AndroidGame.onCreate(AndroidGame.java:13)
E/AndroidRuntime(  691):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(  691):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
E/AndroidRuntime(  691):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
E/AndroidRuntime(  691):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
E/AndroidRuntime(  691):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
E/AndroidRuntime(  691):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  691):    at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  691):    at android.app.ActivityThread.main(ActivityThread.java:4627)
E/AndroidRuntime(  691):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  691):    at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(  691):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
E/AndroidRuntime(  691):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
E/AndroidRuntime(  691):    at dalvik.system.NativeStart.main(Native Method) 
```

![在此处输入图像描述](../Images/7ee01c7f9a50fb74cc6d9b2eb5b4687c.png)

我试图从 dummy-android 的构建路径中删除 dummy，清理，重新包含它，清理但它仍然不起作用。

我的项目没有显示任何编译错误！这是 Eclipse 的一个错误！**如何解决**？谢谢你。

**更新：**尝试重新启动Eclipse，多次清理两个项目，重新运行，没有任何变化。

**更新：** @Martin Brakash。我取消选中两个项目中的项目特定设置。它生成一个新异常：

```
05-15 04:48:14.575: E/AndroidRuntime(971): FATAL EXCEPTION: main
05-15 04:48:14.575: E/AndroidRuntime(971): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.dummy.activity/com.dummy.activity.AndroidGame}: java.lang.ClassNotFoundException: com.dummy.activity.AndroidGame in loader dalvik.system.PathClassLoader[/data/app/com.dummy.activity-1.apk]
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.os.Looper.loop(Looper.java:123)
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-15 04:48:14.575: E/AndroidRuntime(971):  at java.lang.reflect.Method.invokeNative(Native Method)
05-15 04:48:14.575: E/AndroidRuntime(971):  at java.lang.reflect.Method.invoke(Method.java:521)
05-15 04:48:14.575: E/AndroidRuntime(971):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-15 04:48:14.575: E/AndroidRuntime(971):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-15 04:48:14.575: E/AndroidRuntime(971):  at dalvik.system.NativeStart.main(Native Method)
05-15 04:48:14.575: E/AndroidRuntime(971): Caused by: java.lang.ClassNotFoundException: com.dummy.activity.AndroidGame in loader dalvik.system.PathClassLoader[/data/app/com.dummy.activity-1.apk]
05-15 04:48:14.575: E/AndroidRuntime(971):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-15 04:48:14.575: E/AndroidRuntime(971):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-15 04:48:14.575: E/AndroidRuntime(971):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-15 04:48:14.575: E/AndroidRuntime(971):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-15 04:48:14.575: E/AndroidRuntime(971):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T04:18:23.460

错误消息告诉您您的项目中没有包含 jar 文件。在你的 android 项目的根目录下创建一个 libs 文件夹，并将你需要的 jar 文件放入 libs 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:48:32.300

我遇到了完全相同的问题，我无法理解 Eclipse 如何无法通过包含它来引用其他项目。尽管如此，这就是我解决它的方法：

```
1) Build Path -> Configure Build Path -> Tab Source -> Link Source

Browse for Link Folder location: /pathToMyProject/src
Folder name: src/newFolder

2) Tab Libraries -> Add Class Folder

/pathToMyProjectr/bin 
```

这使它对我有用！我希望它有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:13:42.663

在我的情况下，问题是java编译器在java项目中设置为1.7，在android项目中设置为1.6。

我改变了，所以它们会是一样的，问题就解决了。（虽然损失了很多时间）。

哦，我使用了“导出到 jar”->“将它放在 libs 文件夹中”->“添加到 java 构建路径”方法。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T04:56:57.457

对，对不起，带你去追赶鹅。我认为用户库必须用于可选的谷歌东西，比如他们的地图 api。

[http://developer.android.com/guide/developing/projects/projects-eclipse.html#SettingUpLibraryProject](http://developer.android.com/guide/developing/projects/projects-eclipse.html#SettingUpLibraryProject)

这听起来像你需要的。

右键单击要导入的项目，然后单击 Properties > Android > Check Is Library。

然后在另一个项目上进入相同的菜单，但单击添加。

您现在可以像任何其他课程一样导入它，如果您有点迷失，链接也有图片。

# php - 过滤存储在 Couchbase 中的数据

> ID：10593998
> 
> 赞同：1
> 
> 时间：2012-05-15T04:03:06.787
> 
> 标签：php, mysql, nosql, memcached, couchbase

我目前有一个读取繁重的移动应用程序（90% 读取，10% 写入），它通过 php 调用和单个 MySQL db 与单个 Web 服务器进行通信。db 存储用户配置文件信息和用户发送和接收的消息。我们每秒收到几条消息添加到数据库中。

我正在进行水平扩展、负载平衡等。所以我们将在 Web 服务器集群前面有一个负载平衡器，然后我计划在 MySQL 集群顶部放置一层 Couchbase 节点，这样我们就可以快速访问用户个人资料信息和消息信息。我们将在 Couchbase 中存储所有用户信息，但我只想在 Couchbase 中存储最近 24 小时的消息，因为这是大多数读取活动将发生的时间范围。

对于存储在 memcache 中的消息数据，我希望能够根据在消息字段（如国家、城市、时间等）中找到的各种数据过滤消息。我知道 Couchbase 使用 KV 方法，因此我无法使用 where 子句进行查询就像我使用 MySQL 一样。

有没有办法做到这一点？Couchbase Views 是答案吗？还是我完全用 Couchbase 找错了树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:39:58.257

Couchbase Server 2.0 及更高版本中的视图正是您所需要的。如果放入 Couchbase 的数据是 JSON，您可以使用这些视图对您放入 Couchbase 集群的数据执行查询。

请注意，您可以使用将日期时间作为数组发出的视图（一种常用技术），甚至可以使用它来限制您的视图时间段，这样您就可以将所有数据存储在 Couchbase 中而无需放置它在另一个系统中。但是，如果您有其他原因，您当然可以让这些项目在您将它们放入缓存后 24 小时过期。然后，如果您使用支持它的客户端之一，您将能够在需要时获取并触摸缓存中的文档以延长到期时间。唯一的缺点是您需要想出一种在更新时使文档无效的方法。

一种方法是在 mysql 中使用触发器来删除给定的密钥——另一种方法是从应用程序层使其无效。

ps：完全披露：我是 Couchbase 的一员