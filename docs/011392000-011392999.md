# StackOverflow 问答 11392000-11392999

# python - 对于给定的进程，“supervisorctl tail”是如何工作的？

> ID：11392001
> 
> 赞同：13
> 
> 时间：2012-07-09T09:06:35.440
> 
> 标签：python, logging, supervisord

从哪里`supervisorctl tail`获取某个进程的日志信息？如何获得完整的日志？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-09T09:56:18.360

从命令行帮助 ( `supervisorctl help tail`)：

```
tail [-f] <名称> [stdout|stderr]（默认标准输出）
前任：
tail -f <name> 命名进程标准输出的连续尾部
                        Ctrl-C 退出。
tail -100 <name> 进程标准输出的最后 100 *bytes*
tail <name> stderr last 1600 *bytes* of process stderr

```

因此，默认情况下，该`tail`命令尾随进程标准输出。如果您需要获取完整的日志，该[部分的](http://supervisord.org/configuration.html#program-x-section-values)[`stdout_logfile`选项`[program:x]`](http://supervisord.org/configuration.html#program-x-section-values)决定了它的存储位置；还有一个`stderr_logfile`选项。

如果该选项未设置或设置为`AUTO`，则将在进程启动时创建日志文件，但在 supervisord 重新启动时将其清除。该文件在[选项`[supervisord]` `childlogdir`设置](http://supervisord.org/configuration.html#supervisord-section-values)的目录中创建（默认情况下是您平台的[`TMP`目录](http://docs.python.org/library/tempfile.html#tempfile.gettempdir)），并生成格式为 的文件名`<program-name>-<stdout|stderr>---<supervisor-identifier>-<6-random-characters>.log`，例如`varnish-stdout---supervisor-AqY52e.log`.

因此，如果您想访问整个标准输出日志，您至少需要将`childlogdir`选项设置为固定目录，以免您不得不搜索正确的临时目录。

# image-processing - opencv 将掩码拆分为外围和中心区域

> ID：11392003
> 
> 赞同：0
> 
> 时间：2012-07-09T09:06:46.477
> 
> 标签：image-processing, opencv, contour

从图像中获取轮廓后，我想将其中的区域分成外围和中心部分。必须根据外围和整体区域之间的固定百分比阈值进行分割。我想到的一个解决方案是计算 minEnclosureCircle ，然后错误地计算点到 countour 中心的距离与圆的半径之间的比率。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:57:27.957

您正在寻找的是侵蚀和扩张

[http://opencv.itseez.com/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html](http://opencv.itseez.com/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)

腐蚀或膨胀并从原始结果中减去结果。从中您可以计算百分比阈值。

编辑：刚刚看到pointPolygonTest [http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=pointpolygon#pointpolygontest](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=pointpolygon#pointpolygontest)

似乎是更好的方法。

# android - 显示 ProgressDialog 但获得奇怪的结果

> ID：11392008
> 
> 赞同：0
> 
> 时间：2012-07-09T09:07:09.367
> 
> 标签：android

有人知道 ProgressDialog 发生了什么吗？它总是如下图所示：

![在此处输入图像描述](../Images/a4a5f70ea6b96047129565d393723aa5.png)

```
ProgressDialog dialog = new ProgressDialog(this, ProgressDialog.STYLE_SPINNER);
dialog.setMessage("Loading... Please wait...");
dialog.show(); 
```

为什么？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:15:15.307

我认为这是因为微调器主题，您作为第二个参数传递给 PD 构造函数

试试这样：

```
ProgressDialog pd = new ProgressDialog(YourActivity.this);
pd.setTitle("Downloading...");
pd.setMessage("Please wait...");
pd.show(); 
```

# jquery - 如何使用 javascript 切换滑动面板

> ID：11392011
> 
> 赞同：0
> 
> 时间：2012-07-09T09:07:13.803
> 
> 标签：jquery

第一次在这里发海报。我已经组装了一个滚动网站，它也有一个滑动面板画廊。这就是问题所在 - 当用户单击缩略图时，相应的大图像会使用“动画”命令向上滑动。用户需要再次单击大图像以返回缩略图视图，以进一步导航。

问题：事实证明这不是很直观。人们喜欢点击他们想点击的地方，而不是按照规定/推荐的顺序。在大图像视图中，即使用户点击了“主页”或其他部分，其他任何内容都看不到，点击后会滚动到适当的位置，但在大画廊图像后面是不可见的。

当用户单击图像*或*底部可见的任何其他菜单部分时，我需要找到关闭大图像视图的代码，然后滚动到相关的单击部分。所有这些部分都使用“goToByScroll”脚本。画廊的初始缩略图视图也使用“goTobyScroll”脚本滑入视图。

[根据 jquery 网站上帮助论坛的回复](https://forum.jquery.com/topic/help-advice-on-how-to-toggle-using-javascript)，#image 和 #wrapper 是点击后需要关闭的内容。

感谢您的阅读，并提供任何帮助。

更新：（在迟来的更新中道歉。作为一个业余编码人员，这些东西可能会令人生畏——我依靠其他人来做任何不仅仅是剪切粘贴的事情：-）感谢两位海报的花时间和麻烦。为了那些通过搜索访问的人的利益，这里是在这种情况下实际工作的代码：

* * *

$('#top').live('click',function(){ $this = $('#wrapper > img'); $('#description').empty().hide();

```
 $('#thumbsWrapper').css('z-index','100')
                .stop()
                .animate({'height':'100%'},speed,function(){
                    var $theWrapper = $('#wrapper > img');
                    $('#panel').css('height','0px');
                    $theWrapper.css('z-index','0');
                    /* 
                    remove the large image element
                    and the navigation buttons
                     */
                    $this.remove();
                    $('#prev').hide();
                    $('#next').hide();
                }); 
```

## });

还要感谢所有参与运行/审核 SO 的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:14:03.643

将此代码放入 goToByScroll() 函数中

```
$('#wrapper img').trigger('click') 
```

$('#wrapper img') 仅在您显示某些内容时才显示。但是在主图像中添加一些类，使其更具体。就像是

```
$('#wrapper img.big_preview').trigger('click') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:15:43.403

创建您的处理程序并将其分配给您的图像和您提到的其他区域。

```
var isOpen = false;
...

$('container').delegate('.my-image', 'click' function(e)){
   isOpen ? closeIt() : openIt();
   $(this).trigger('name', {});
}.delegate('other-area', 'click', function(){
   isOpen ? closeIt() : openIt();
   $(this).trigger('name', {});
}) 
```

使用布尔值来确定状态是打开还是关闭。如果您愿意，也可以使用类名。在 jQuery 中，您还可以选择使用 toggle() 函数。

# c# - LINQ C#按单词出现排序列表

> ID：11392014
> 
> 赞同：1
> 
> 时间：2012-07-09T09:07:21.290
> 
> 标签：c#, linq

我已将数据存储在列表中，例如

```
 List<SearchResult> list = new List<SearchResult>();
 SearchResult sr = new SearchResult();
 sr.Description = "sample description";
 list.Add(sr); 
```

假设我的数据存储在描述字段中，例如

```
"JCB Excavator - ECU P/N: 728/35700"
"Geo Prism 1995 - ABS #16213899"
"Geo Prism 1995 - ABS #16213899"
"Geo Prism 1995 - ABS #16213899"
"Wie man BBA reman erreicht"
"this test JCB"
"Ersatz Airbags, Gurtstrammer und Auto Körper Teile" 
```

现在我想用我的搜索词查询列表，比如**geo jcb**

如果你看，那么**geo**这个词已经在描述字段中存储了很多次。所以我想以这样的方式对我的列表进行排序，以使搜索词中的单词找到最大的数据将首先出现。请帮我这样做。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:19:30.980

您可以将`string.Split`and`Enumerable.OrderByDescending`与匿名类型一起使用：

```
List<SearchResult> list = new List<SearchResult>() { 
    new SearchResult(){Description="JCB Excavator - ECU P/N: 728/35700"},
    new SearchResult(){Description="Geo Prism 1995 - ABS #16213899"},
    new SearchResult(){Description="Geo Prism 1995 - ABS #16213899"},
    new SearchResult(){Description="Geo Prism 1995 - ABS #16213899"},
    new SearchResult(){Description="Wie man BBA reman erreicht"},
    new SearchResult(){Description="this test JCB"},
    new SearchResult(){Description="Ersatz Airbags, Gurtstrammer und Auto Körper Teile"},
};

string[] searchTerms = new[]{"geo", "jcb"};
var results = 
    list.Select(sr => new { Searchresult = sr, Words = sr.Description.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries) })
        .OrderByDescending(x => x.Words.Count(w => searchTerms.Contains(w.ToLower())))
        .Select(x => x.Searchresult); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:16:53.767

您可以使用简单的正则表达式，只需将模式中的搜索词与`|`：

```
var re = new Regex("geo|JCB",RegexOptions.IgnoreCase); 
```

然后计算描述中的匹配数：

```
Console.WriteLine(re.Matches(description).Count); // Outputs '5' in your example 
```

您可以通过以下方式订购您的清单：

```
searchResults.OrderByDescending(r => re.Matches(r).Count); 
```

现场示例：[http ://rextester.com/MMAT58077](http://rextester.com/MMAT58077)

* * *

**编辑**：根据您在评论中链接的新问题（希望您更新此问题的详细信息并让重复项消失）您希望对结果进行排序，以便最常见的结果显示在结果列表的前面.

为此，您可以首先计算每个搜索短语的相关权重，并使用它对结果进行排序。

Step1：通过统计每个搜索词在整个数据集中出现的总次数来计算权重：

```
var wordsToFind = "Geo JCB".Split();
// find number of times each search phrase is found
var weights = wordsToFind.Select( w => new { 
         Word = w, 
         Weight = list.Where(x => x.Description.Contains(w)).Count() 
    } ); 
```

对于目前这个问题中的数据，这给出了结果：

```
GEO: 3
JCB: 2 
```

因此，您首先想要所有`GEO`结果，然后是`JCB`. 我想最好的办法是让第一个结果成为`GEO`最常被提及的结果。

步骤 2：使用在步骤 1 中计算的权重对搜索结果进行排序。

```
var values = list.Select(x => new { 
      SearchResult = x, 
      Words = x.Description.Split(' ')
   })
   .Select(x => new { 
       SearchResult = x.SearchResult, 
       Weight = weights.Sum(w => x.Words.Contains(w.Word) ? w.Weight : 0)
   })
   .OrderByDescending(x => x.Weight)
   .Select(x => x.SearchResult); 
```

现场示例：[http ://rextester.com/SLH38676](http://rextester.com/SLH38676)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:17:33.807

```
List<SearchResult> list = new List<SearchResult>() 
{ 
   new SearchResult { Description = "JCB Excavator - ECU P/N: 728/35700" },
   new SearchResult { Description = "Geo Prism 1995 - ABS #16213899" },
   new SearchResult { Description = "Geo Prism 1995 - ABS #16213899" },
   new SearchResult { Description = "Geo Prism 1995 - ABS #16213899" },
   new SearchResult { Description = "Wie man BBA reman erreicht" },
   new SearchResult { Description = "this test JCB" },
   new SearchResult { Description = "Ersatz Airbags, Gurtstrammer und Auto Körper Teile" }            
   };

   var wordsToFind = "Geo JCB".Split();
   var values = list.Select(x => new { SearchResult = x, Count = x.Description.Split(' ')
                                             .Where(c => wordsToFind .Contains(c)).Count() })
                    .OrderByDescending(x => x.Count)
                    .Select(x => x.SearchResult); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T22:40:10.930

```
var results = db.Blogs.AsEnumerable()
    .Select(sr => new
    {
        Searchresult = sr,
        Words = Regex.Split(sr.Name, @"[^\S\r\n {1,}").Union(Regex.Split(sr.Name2, @"[^\S\r\n]{1,}"))
    })
    .OrderByDescending(x => x.Words.Count(w => {
        foreach (var item in searchTerms)
        {
            if(w.ToLower().Contains(item))
            {
                return true;
            }
        }
        return false;
    }))
    .Select(x => x.Searchresult); 
```

# css - 手机上的网站比显示器大

> ID：11392015
> 
> 赞同：0
> 
> 时间：2012-07-09T09:07:23.083
> 
> 标签：css, html, mobile

> **可能重复：**
> [移动网站大于显示](https://stackoverflow.com/questions/11165050/website-in-mobile-larger-than-display)

我已经意识到这个网站：agriandgolf.com

不幸的是，在移动设备上（我用三星 Galaxy 2 试过），网站比显示器大。

我必须**缩小每个加载的页面**。

当然我用过

```
<meta id='viewport' name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=yes'/>
<meta name='mobileoptimized' content='0'> 
```

我用过html5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:03:05.707

尝试将您的视口标签更改为：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes" /> 
```

也许摆脱那个 IE 特定的移动优化标签或将其值更改为“宽度”，看看是否有帮助。

# r - 访问环境中变量的参数值

> ID：11392016
> 
> 赞同：0
> 
> 时间：2012-07-09T09:07:25.320
> 
> 标签：r

假设我们有一个或多个环境和变量。我的问题是我们如何以参数方式访问这些变量的值。

```
rm(list = ls())

env1 <- new.env()
env1$var1 <- "value1"

env2 <- new.env()
env2$var2 <- "value2"

env <- ls.str(mode="environment")        # We get the environments

var <- ls.str(eval(parse(text = env[1])))# We get the variables of an environment

eval(var[1])                             # We fail to get the value of a variable

get(var[1], envir=env[1])                # It does not work, either 
```

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:12:40.407

您需要使用`get`，指定您希望找到对象的环境：

```
get(var[1], envir=env1)
[1] "value1" 
```

因此，如果您想以参数方式指定两个参数，请使用：

```
get(var[1], envir=get(env[1]))
[1] "value1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:25:17.083

我在您的帮助下找到的解决方案：

```
get(var[1], envir=eval(parse(text = env[1]))) 
```

# asp.net-mvc - ELMAH MVC 2 - 温莎城堡问题

> ID：11392020
> 
> 赞同：7
> 
> 时间：2012-07-09T09:07:46.470
> 
> 标签：asp.net-mvc, elmah

我刚刚将 ELMAH MVC (v2) 安装到我的 Web 应用程序中，但是当我尝试在 /elmah 查看日志时出现以下异常

**找不到支持服务 Elmah.Mvc.ElmahController 的** 组件 [ComponentNotFoundException: 找不到支持服务 Elmah.Mvc.ElmahController 的组件] Castle.MicroKernel.DefaultKernel.Resolve(Type service) +140 Castle.Windsor.WindsorContainer.Resolve （服务类型）+40 N2.Engine.Castle.WindsorServiceContainer.Resolve（类型服务）+40 N2.Engine.ContentEngine.Resolve（服务类型）+48

该网站包括 N2 CMS 系统，该系统又使用 Castle Windsor。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T20:58:24.070

我知道这已经有一个公认的答案，它与您的问题并不完全相关，但对于其他**不**使用 N2 并遇到 Elmah.MVC+Castle Windsor 问题的人，您需要在**Elmah.MVC**程序集中注册控制器温莎。我做了一个简单的安装程序来为我处理这个：

```
public class ElamhInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(Classes.FromAssemblyNamed("Elmah.Mvc")
            .BasedOn<IController>()
            .LifestyleTransient());
    }
} 
```

一旦我添加了这个Castle 似乎能找到`ElmahController`就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:56:35.553

ELMAH.MVC 自带 App_Start 代码，使用 Web.Activator 注册 ElmahController 路由。

所以，对我来说很奇怪，为什么 Windor 无法加载 ElmahController。默认情况下，它应该尝试自己解决它，然后如果不可能委托给 ControllerFactory。

您确定安装 ELMAH 后应用程序重新启动 (iisreset.exe) 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:34:54.910

发布问题后不久就制定了解决方案。我需要用 N2 注册 Elmah 控制器：

```
var engine = MvcEngine.Create();
engine.RegisterControllers(typeof(GlobalApplication).Assembly);
engine.RegisterControllers(typeof(ElmahController).Assembly); 
```

# python - 如何在 python 和 mac 应用程序之间进行通信？

> ID：11392022
> 
> 赞同：3
> 
> 时间：2012-07-09T09:07:53.160
> 
> 标签：python, macos, communicate

这可能是一个模糊的问题，但我没有正确地改写它。所以这里有一个解释。

我开发了一个应用程序，它最初是作为 Mac 应用程序开发的，使用 Carbon/Cocoa 的 API 来完成我的任务。（应用程序的目标是在鼠标移动/其他击键后向应用程序发送“击键”。我为此使用辅助功能 API）。

但是现在，我想添加脚本支持，所以可以有条件击键。如：按'Y'5次后，我想按'B'键。

在 OSX 中，Python 应用程序不可能做这样的事情，而且我找不到任何允许我这样做的库。所以我想我会把这个应用程序做成两倍。首先：我将在 Cocoa/Carbon 中编写一个具有基本功能的应用程序：SendKeyToApp(pid,key) 和 WaitForMovement()。

python 应用程序将使用这些方法调用与该应用程序通信。这里的问题是：我如何在这两个应用程序之间进行通信？我会使用 HTTP 服务器、套接字服务器、某种 subprocess.Popen() hacks。坦率地说，我不知道。

有没有人有任何想法来完成这样的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:22:14.787

更轻松。我从 Python 中使用了 Accessibility API，这一切都让我可以轻松地做到这一点，而无需任何 Cocoa / Carbon。

对于感兴趣的人，它被称为[atomac。](https://github.com/pyatom/pyatom)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:45:19.443

[PyObjC](https://developer.apple.com/cocoa/pyobjc.html)也许是您正在寻找的：

> PyObjC（发音为 pie-obz-see）是使在 Python 中编写 Cocoa 应用程序成为可能的关键部分。它使 Python 对象能够向 Objective-C 对象发送消息，就好像它们是 Python 对象一样，并且同样有助于 Objective-C 对象向 Python 对象发送消息作为兄弟。

您可以使用 PyObjC 在您的 python 应用程序和可可应用程序之间建立一座桥梁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:32:54.560

有很多方法可以在两个应用程序之间同步/通信数据，但让我解释一下最简单的：

**RESTful 序列化：**
将对象序列化为 XML/JSON 或两个应用程序框架都可以解析的任何其他自定义格式。例如。[http://docs.python.org/library/json.html](http://docs.python.org/library/json.html)
如果两个应用程序都在同一台服务器/机器上，我希望您所要做的就是将数据编码/存储到同一个文件中并读取/解析来自其他应用程序中各个文件的数据。

否则，您可能需要创建一个 Web 服务来访问数据文件。

如果您有进一步的疑问，请在评论中告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T09:33:13.950

在我看来，在两个应用程序之间建立通信的最简单方法是客户端-服务器协议**XMLRPC**。[Cocoa](http://www.ditchnet.org/xmlrpc/)和[Python](http://docs.python.org/py3k/library/xmlrpc.client.html)都支持它。

Python 部分相当简单：

```
import xmlrpc.client
rpcProxy = xmlrpc.client.ServerProxy(URL_OF_SERVER)
rpcProxy.SendKeyToApp(pid,key) 
```

至于 Cocoa 部分，我不知道，但似乎有可能：[XML-RPC Server in Cocoa](https://stackoverflow.com/questions/3909093/xml-rpc-server-in-cocoa)或[Best way to use XML-RPC in Cocoa application？](https://stackoverflow.com/questions/218538/best-way-to-use-xml-rpc-in-cocoa-application)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-30T04:45:38.163

在[osx](/questions/tagged/osx "显示标记为“osx”的问题")上，许多原生应用程序支持 AppleScript（又名 OSA）作为它们的原生脚本 API。因此，您的问题变成了 Python 和 Applescript 之间的交互（并首先弄清楚如何在 AppleScript 中与您的目标应用程序对话）。

[Python 标准库](https://docs.python.org/2/library/macosa.html)和第三方模块[py-applescript](https://pypi.python.org/pypi/py-applescript/)中有一些 OSA 支持，您可能想看看。

# arrays - 删除 arrqy 错误的元素

> ID：11392028
> 
> 赞同：-1
> 
> 时间：2012-07-09T09:08:21.187
> 
> 标签：arrays, qt

我有一个包含按钮数量的 csv 文件。我想创建一个函数来读取这些数字并设置我创建并调用 FButton 的类的编号。

首先，我在头文件中声明了一个 FButtons 数组。

```
FButton buttons[10]; 
```

现在在 cpp 文件中，我编写了以下代码来设置按钮的编号：

```
QFile f("Buttons.csv");

if (f.open(QIODevice::ReadOnly))
{
    int i=0;

    QString data;
    data = f.readAll();
    QStringList vals = data.split(';');

    while (!vals.isEmpty())
    {
        buttons[i].setNumber(vals[0].toInt());
        vals.removeAt(0);
        i++;
    }

    f.close();
 } 
```

函数 setNumber 由下式给出：

```
void FButton::setNumber(int butNumber)
{
    number=butNumber;
} 
```

我可以构建代码，但是当我尝试运行它时会发生错误：

GUI.exe 不再工作。

有人可以告诉我我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:14:45.940

您的 CSV 中的值不会比`buttons`数组（或任何集合）的大小更多吗？或者有未初始化的对象`buttons`？

# iphone - UIFont API 简化字体样式修改？

> ID：11392029
> 
> 赞同：1
> 
> 时间：2012-07-09T09:08:23.690
> 
> 标签：iphone, objective-c, uifont

我搜索了一个 API 来简化 UILabel 中的 iphone 字体样式修改（粗体、斜体、粗体等）。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:56:56.537

据我所知，使用公共方法的 UIFont 无法做到这一点。

有一个私有方法可以做到这一点，但当然你不能在 App Store 应用程序中使用它：

```
+(UIFont*)fontWithFamilyName:(NSString*)familyName traits:(GSFontTraitMask)traits size:(CGFloat)fontSize; 
```

如果您使用 Core Text，您可以将字体创建为 a `CTFontRef`，然后使用`CTFontDescriptorCreateCopyWithAttributes()`with `kCTFontTraitsAttribute`set to`kCTFontBoldTrait`或`kCTFontItalicTrait`等，这将为您提供您最初创建的字体的粗体或斜体版本。然后我想你可以做这样[的](https://stackoverflow.com/questions/6714858/iphone-convert-ctfont-to-uifont)事情来将它转换成 UIFont。虽然这是一个麻烦的解决方案。

# iphone - UItabbar settitlecolor,iPhone

> ID：11392030
> 
> 赞同：0
> 
> 时间：2012-07-09T09:08:26.030
> 
> 标签：iphone, ipad

我正在尝试以编程方式更改标签栏项目文本的颜色。我在用

```
[[UITabBar appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       [UIFont fontWithName:@"AmericanTypewriter" size:20.0f], UITextAttributeFont,
                                                       [UIColor blackColor], UITextAttributeTextColor,
                                                       [UIColor grayColor], UITextAttributeTextShadowColor,
                                                       [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                                       nil]]; 
```

这应该适用于iOS5及更高版本。但是我的应用程序在控制台上因错误而崩溃：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[_UIAppearance setTitleTextAttributes:]: unrecognized selector sent to instance 0x79f5790'
*** First throw call stack: 
```

不确定，为什么我会崩溃。另外请建议，如果有任何其他方法可以更改标签栏项目的字体颜色。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:04:10.873

这些答案都不正确（至少对于 iOS 6）。

你在`forState:`通话结束时失踪了。例子

```
[[UITabBarItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       [UIColor whiteColor], UITextAttributeTextColor,
                                                       [UIColor grayColor], UITextAttributeTextShadowColor,
                                                       [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)], UITextAttributeTextShadowOffset,
                                                       nil] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:18:00.193

`setTitleTextAttributes`是`UIBarItem`类的方法。

所以获取标签栏项目并设置它们的标题属性。

看到这个

[教程](http://ios-blog.co.uk/articles/tutorials/how-to-customize-the-tab-bar-using-ios-5-appearance-api/)

用于在标签栏中设置样式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:13:10.440

标题不属于，`UITabBar`但`UITabBarItem`因此替换`UITabBar`：

```
[[UITabBarItem appearance] setTitleTextAttributes: 
```

# python - 将 python 数组传递给 bash 脚本（并将 bash 变量传递给 python 函数）

> ID：11392033
> 
> 赞同：7
> 
> 时间：2012-07-09T09:08:35.610
> 
> 标签：python, bash

我编写了一个 Python 模块，其中包含返回数组的函数。我希望能够访问从 python 模块返回的字符串数组，并在 bash 脚本中进行迭代，所以我可以迭代数组元素。

例如：

# Python 模块 (mymod)

```
def foo():
    return ('String', 'Tuple', 'From', 'Python' )

def foo1(numargs):
    return [x for x in range(numargs)] 
```

# bash 脚本

```
foo_array  = .... # obtain array from mymod.foo()
for i in "${foo_array[@]}"
do
    echo $i
done

foo1_array = .... # obtain array from mymod.foo1(pass arg count from bash)
for j in "${foo1_array[@]}"
do
    echo $j
done 
```

如何在 bash 中实现这一点？

**版本信息：**

Python 2.6.5 重击：4.1.5

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T09:21:08.627

第二次尝试——这一次 shell 首当其冲。

鉴于*foo.py*包含以下内容：

```
def foo():
        foo = ('String', 'Tuple', 'From', 'Python' )
        return foo 
```

然后编写您的 bash 脚本，如下所示：

```
#!/bin/bash
FOO=`python -c 'from foo import *; print " ".join(foo())'`
for x in $FOO:
do
        echo "This is foo.sh: $x"
done 
```

其余部分是从 Python 端驱动集成的第一个答案。

*Python*

```
import os
import subprocess

foo = ('String', 'Tuple', 'From', 'Python' )

os.putenv('FOO', ' '.join(foo))

subprocess.call('./foo.sh') 
```

*重击*

```
#!/bin/bash
for x in $FOO
do
        echo "This is foo.sh: $x"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:14:37.860

此外，您可以告诉 python 进程用“-”读取 STDIN，如

```
echo "print 'test'" | python - 
```

现在您可以定义[多行](https://serverfault.com/questions/72476/clean-way-to-write-complex-multi-line-string-to-a-variable)python 代码片段并将它们传递到子shell

```
FOO=$( python - <<PYTHON

def foo():
    return ('String', 'Tuple', 'From', 'Python')

print ' '.join(foo())

PYTHON
)

for x in $FOO
do
    echo "$x"
done 
```

您还可以使用**env**并**设置**从 bash 到 python 列出/传递环境和局部变量（到“..”字符串）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:30:57.390

In lieu of something like object serialization, perhaps one way is to print a list of comma separated values and pipe them from the command line.

Then you can do something like:

```
> python script.py | sh shellscript.sh 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-03T20:00:13.303

以及 Maria 的从 python 获取输出的方法，您可以使用该`argparse`库从 bash 将变量输入到 python 脚本；[这里](https://docs.python.org/3/library/argparse.html)有 python 3的教程和更多文档，[这里](https://docs.python.org/2/howto/argparse.html)有 python 2 的教程和更多文档。

一个示例 python 脚本`command_line.py`：

```
import argparse
import numpy as np

if __name__ == "__main__":

    parser = argparse.ArgumentParser()

    parser.add_argument('x', type=int)

    parser.add_argument('array')

    args = parser.parse_args()

    print(type(args.x))
    print(type(args.array))
    print(2 * args.x)

    str_array = args.array.split(',')
    print(args.x * np.array(str_array, dtype=int)) 
```

然后，从终端：

```
$ python3 command_line.py 2 0,1,2,3,4 
```

```
# Output
<class 'int'>
<class 'str'>
4
[0 2 4 6 8] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-03T20:21:13.813

这也有帮助。脚本.py：

```
 a = ['String','Tuple','From','Python']

    for i in range(len(a)):

            print(a[i]) 
```

然后我们制作以下 bash 脚本 pyth.sh

```
#!/bin/bash

python script.py > tempfile.txt
readarray a < tempfile.txt
rm tempfile.txt

for j in "${a[@]}"
do 
      echo $j
done 
```

sh pyth.sh

# iphone - 如何在 iOS 应用程序中在 Google Plus 上发布图像

> ID：11392037
> 
> 赞同：1
> 
> 时间：2012-07-09T09:08:53.667
> 
> 标签：iphone, ios, ios5, google-plus

我在 iphone 中使用 Google Plus API 成功发布了内容和（链接）URL。使用以下代码：

```
googleShare =[[[GooglePlusShare alloc] initWithClientID:@"my key"] autorelease];

    [googleShare setDelegate:self];
     appDelegate.shareGOOGLe =googleShare;

    NSString *inputURL = @"";
    NSURL *urlToShare = [inputURL length] ? [NSURL URLWithString:inputURL] : nil;

    NSLog(@"%@",urlToShare);
    NSString *inputText = @"TEst Sharing testing from iOS 5.0";
    NSString *text = [inputText length] ? inputText : nil;
      NSLog(@"%@",text);

    [[[[googleShare shareDialog]
       setURLToShare:urlToShare]
      setPrefillText:shareMessge] open]; 
```

但我想将图片发布到 google plus。

谁能帮我？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:47:00.090

目前无法使用 Google+ iOS SDK 在 Google+ 上共享图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T06:50:29.427

这可以与 google plus 共享图像

```
- (IBAction) didTapShare: (id)sender {
    id<GPPNativeShareBuilder> shareBuilder = [[GPPShare sharedInstance] nativeShareDialog];
    [shareBuilder attachImage:[UIImage imageNamed:@"yourImagename.png"]];
    [shareBuilder open];
} 
```

引用自[https://developers.google.com/+/mobile/ios/share/](https://developers.google.com/+/mobile/ios/share/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-28T07:17:58.307

这些链接将有所帮助：

链接 显示可以共享的方式和内容。

1.  [https://developers.google.com/+/mobile/ios/share/](https://developers.google.com/+/mobile/ios/share/)

在链接 1 的底部，它提到**“将媒体附加到您的共享帖子中。您可以将图片和电影附加到您的帖子中，以便您的用户共享到他们的信息流中。”**

2.  [https://developers.google.com/+/mobile/ios/share/media](https://developers.google.com/+/mobile/ios/share/media)

**链接 2 显示了共享媒体的代码片段；图片和视频**

以下是在 google+ 上分享图片的代码片段

```
- (IBAction) didTapShare: (id)sender {
 id<GPPNativeShareBuilder> shareBuilder = [[GPPShare sharedInstance] nativeShareDialog];

 // Set any prefilled text that you might want to suggest
 [shareBuilder setPrefillText:@"Achievement unlocked! I just scored 99 points. Can you beat me?"]

 NSString *fileName = @"samplemedia1";
 [shareBuilder attachImage:[UIImage imageNamed:fileName];

 [shareBuilder open];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T18:27:30.693

@Chirag ...您应该会看到适用于 iPhone/iPad 的 Flipboard 应用程序。它在 Google+ 帐户上分享链接、评论和图片。请看一下，如果我在任何时候错了，请告诉我。

# javascript - 获取 hashchange 之前的哈希值

> ID：11392046
> 
> 赞同：9
> 
> 时间：2012-07-09T09:09:28.283
> 
> 标签：javascript, jquery, html, hash

假设我的 html 是

```
<a href="#one">One</a>
<a href="#two">Two</a> 
```

和 Js 是

```
$(window).on("hashchange"){
alert(document.location.hash);
} 
```

我想获取哈希更改之前的哈希值。这可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T09:12:43.970

用那个

```
$(window).on("hashchange", function(e){
    console.log(e.originalEvent.oldURL)
    console.log(e.originalEvent.newURL)
})​; 
```

演示：http: [//jsbin.com/ulumil/](http://jsbin.com/ulumil/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-09T09:18:33.713

您必须跟踪最后一个哈希，例如：

```
var currentHash = function() {
  return location.hash.replace(/^#/, '')
}

var last_hash
var hash = currentHash()

$(window).bind('hashchange', function(event){
  last_hash = hash
  hash = currentHash()
  console.log('hash changed from ' + last_hash + ' to ' + hash)
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T07:57:45.183

实际上，Amit 提供的解决方案适用于 jquery 库和跨平台。

这是一个使用核心 javascript 和跨浏览器的更简化的解决方案。（检查最新版本的 IE/FF/Chrome/Safari）

```
window.onhashchange = function(e){
  console.log(e);
  var oldURL = e.oldURL; 
  var newURL = e.newURL; 
  console.log("old url = " + oldURL);
  console.log("new url = " + newURL);
  var oldHash = oldURL.split("#")[1];
  var newHash = newURL.split("#")[1];
  console.log(oldHash);
  console.log(newHash);
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-08T23:13:23.100

不要使用

```
$(window).on("hashchange", function(e){
    console.log(e.originalEvent.oldURL)
    console.log(e.originalEvent.newURL)
})​; 
```

它不适用于 IE，也可能不适用于其他地方。

而是使用这个。

```
(function(w, $){
  var UrlHashMonitor = {};
  UrlHashMonitor.oldHash = '';
  UrlHashMonitor.newHash = '';
  UrlHashMonitor.oldHref = '';
  UrlHashMonitor.newHref = '';
  UrlHashMonitor.onHashChange = function(f){
    $(window).on('hashchange', function(e){
      UrlHashMonitor.oldHash = UrlHashMonitor.newHash;
      UrlHashMonitor.newHash = w.location.hash;
      UrlHashMonitor.oldHref = UrlHashMonitor.newHref;
      UrlHashMonitor.newHref = w.location.href;
      f(e);
    });
  };
  UrlHashMonitor.init = function(){
    UrlHashMonitor.oldHash = UrlHashMonitor.newHash =   w.location.hash;
    UrlHashMonitor.oldHref = UrlHashMonitor.newHref = w.location.href;
  };
  w.UrlHashMonitor = UrlHashMonitor;
  return UrlHashMonitor;

})(window, window.jQuery);

/*
 * USAGE EXAMPLE
 */
UrlHashMonitor.init();
UrlHashMonitor.onHashChange(function(){
  console.log('oldHash: ' + UrlHashMonitor.oldHash);
  console.log('newHash: ' + UrlHashMonitor.newHash);
  console.log('oldHref: ' + UrlHashMonitor.oldHref);
  console.log('newHref: ' + UrlHashMonitor.newHref);
  //do other stuff
}); 
```

这应该适用于所有现代浏览器。

演示：[https ://output.jsbin.com/qafupu#one](https://output.jsbin.com/qafupu#one)

# autocomplete - 如何通过 Excel 加载项 (.xlam) 在 Excel 2007 中使用 VBA 函数的自动完成功能

> ID：11392060
> 
> 赞同：3
> 
> 时间：2012-07-09T09:11:10.053
> 
> 标签：autocomplete, excel, excel-2007, vba

我在 VBA 中创建了一个函数。我希望 Excel 2007 在单元格的 Excel 中编写此函数时显示自动完成功能。详情为 ![在此处输入图像描述](../Images/4e1a4a805a21f62ee4edc01eee924cf1.png)

如何通过 Excel 加载项 (.xlam) 在 Excel 2007 中使用 VBA 函数的自动完成功能？

附言。

在 Excel 2010 中，自动完成功能有效

在带有 Excel 启用宏的工作表 (.xlsm) 的 Excel 2007 中，自动完成功能有效。测试文件[在这里](https://dl.dropbox.com/u/50358043/test%20autocomplete.xlsm)。

但是，在带有 Excel 加载项 (.xlam) 的 Excel 2007 中，自动完成功能不起作用。测试文件[在这里](https://dl.dropbox.com/u/50358043/test%20autocomplete.xlam)。

# php - 函数file_exists在php中不起作用

> ID：11392074
> 
> 赞同：4
> 
> 时间：2012-07-09T09:12:17.323
> 
> 标签：php, html

我一直在尝试查找目录中是否存在 file_exist。如果不是，我想使用不同的图像。但是当我使用 file_exists 函数时，它总是返回 false。

我使用的代码是

```
while($r=mysql_fetch_row($res))
    {  
        if(!file_exists('http://localhost/dropbox/lib/admin/'.$r[5]))
            {
                $file='http://localhost/dropbox/lib/admin/images/noimage.gif';
            }
        else
            $file='http://localhost/dropbox/lib/admin/'.$r[5];} 
```

但是即使文件退出，该函数也总是返回 false。我通过使用检查了

```
<img src="<?php echo 'http://localhost/dropbox/lib/admin/'.$r[5]; ?>" /> 
```

这正确显示了图像。

**请有人帮助我**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:16:18.337

`file_exists`使用*文件系统路径*，而不是 URL。您在浏览器中使用 URL 通过网络浏览器和网络服务器访问您的 PHP 脚本。PHP脚本本身可以访问本地文件系统并使用它，它不会通过网络堆栈来访问文件。

所以使用类似`file_exists('C:\\foo\\bar\\dropbox\\lib\\admin\\' ...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:16:55.383

`file_exists`不支持使用 HTTP 的地址（您可以看到这一点，因为`stat`它不包含在[HTTP 支持的包装器列表中](http://www.php.net/manual/en/wrappers.http.php)）。如[`file_exists`](http://php.net/manual/en/function.file-exists.php)文档所述，可以使用一些包装器（例如 FTP）检查远程文件，但不能通过 HTTP 进行检查，因此`file_exists`将始终返回 false。

假设此文件位于本地计算机上（由 建议`localhost`，您需要使用本地文件路径访问它。很难猜测这可能适合您，但它可能看起来`/var/www/dropbox...`像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:17:19.373

[`file_exists()`](http://php.net/manual/en/function.file-exists.php)检查文件是否存在于本地文件系统中。您正在传递一个 URL。将其更改为您的保管箱目录的本地路径，它应该可以工作：

```
if(file_exists('/path/to/your/dropbox')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T09:18:25.177

该函数仅适用于 PHP 中`file_exists`该函数支持的 URL 协议。`stat()`

目前，`http`此包装器不支持该协议。

[http://uk3.php.net/manual/en/wrappers.http.php](http://uk3.php.net/manual/en/wrappers.http.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T09:20:44.043

您正在将 URL 传递给错误参数的 file_exists 函数。而不是在那里传递您的本地路径。

要了解有关 file_exist() 函数的更多信息，请阅读此 php 手册：

[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T09:55:23.817

您将 URL 传递给错误的 file_exists 函数。而不是传递文件夹的本地路径。

```
while($r=mysql_fetch_row($res))
{  
 if(!file_exists('/dropbox/lib/admin/'.$r[5]))
 {
  $file='/dropbox/lib/admin/images/noimage.gif';
 }
 else
 $file='/dropbox/lib/admin/'.$r[5];
} 
```

# amazon-ec2 - 如何使用 IAM 在 EC2 中启动私有实例

> ID：11392077
> 
> 赞同：1
> 
> 时间：2012-07-09T09:12:29.920
> 
> 标签：amazon-ec2, amazon-web-services, instance, private, amazon-iam

如何由用户 A 启动 EC2 实例。

并且用户 A 启动的实例无法被用户 B 看到。

我可以用 IAM 做到这一点吗？

我试过这套：

```
{
  "Statement": [
    {
      "Sid": "Stmt1341824399883",
      "Action": [
        "ec2:DescribeInstanceAttribute",
        "ec2:DescribeInstanceStatus",
        "ec2:DescribeInstances"
      ],
      "Effect": "Deny",
      "Resource": [
        "*"
      ]
    }
  ]
} 
```

但它隐藏了所有内容，包括用户 A 启动的实例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:54:08.277

不幸的是，[没有适用于 Amazon EC2 的 Amazon 资源名称 (ARN)](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/UsingIAM.html)：您不能编写仅适用于某些 EC2 实例的策略。

如果您需要在两者之间进行隔离，我知道的唯一方法是创建一个单独的 AWS 账户。您可以使用合并计费，以便将计费与您的其他账户汇总在一起，并且您可以在账户之间共享一些内容，例如 EBS 快照。然而，大多数东西不能在帐户之间共享。

# c - 动态分配字符串数组的问题

> ID：11392079
> 
> 赞同：0
> 
> 时间：2012-07-09T09:12:37.557
> 
> 标签：c, arrays, dynamic-allocation

我正在尝试动态分配`frags2`大小数组`numberOfFrags`并将原始数组的内容复制到它。我尝试了许多方法和搜索，但不明白这里出了什么问题。`sizeof`在新数组上返回`0`而不是我想`malloc`的。

任何帮助将非常感激！

```
 int main(int argc, const char* argv[]) {
     char* frags[MAX_FRAG_COUNT];  
     FILE* fp = fopen(argv[1], "r");
     int numberOfFrags = ReadAllFragments(fp, frags, MAX_FRAG_COUNT);
     fclose(fp);
     char** frags2 = (char**)malloc(numberOfFrags * sizeof(char*));
     for (int i = 0; i < numberOfFrags; i++) {
         frags2[i] = frags[i];
     }
     qsort(frags2, sizeof(frags2) / sizeof(char *), sizeof(char*), cstring_cmp); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:14:27.190

> 新数组上的 Sizeof 返回 0 而不是我认为的 malloc'd

**它不是一个数组，它是一个指针**。在这种情况下，运算符`sizeof`产生指针的大小，而不是您分配的数量。

所以代替那些`sizeof`东西，你可以试试

```
qsort(frags2, numberOfFrags, sizeof(char*), cstring_cmp); 
```

# r - R中包含人名的两列的聚类分析

> ID：11392087
> 
> 赞同：0
> 
> 时间：2012-07-09T09:13:10.543
> 
> 标签：r

我是 R 的初学者。我必须对包含两列人名的数据进行聚类分析。我将它转换为数据框，但它是字符类型。要使用 dist() 函数，数据框必须是数字。我的数据示例：

```
 Interviewed.Type                 interviewed.Relation.Type
1\.            An1                           Xuan
2\.            An2                           The
3\.            An3                           Ngoc
4\.            Bui                            Thi
5\.            ANT                           feed
7\.           Bach                            Thi
8\.           Gian1                            Thi
9\.           Lan5                            Thi
.
.
.
1100\.       Xung                           Van 
```

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:16:48.343

您可以使用 将字符向量转换为因子`factor`。因子基本上是一个数字向量以及一个属性，该属性给出了与每个数字相关联的文本，`levels`在 R 中被调用。人们可以使用`as.numeric`或`unclass`获取原始数字。然后可以将这些输入到需要数字的算法中，例如`dist`.

请注意，数字与文本相关联的顺序几乎是任意的（实际上是按字母顺序排列的），因此数字之间的差异在大多数应用程序中没有意义。因此，调用`dist`此结果在技术上是可行的，但不一定有意义。出于这个原因，这个答案的作者对此并不满意，即使原始发布者似乎对此感到高兴。:-)

另请注意，如果有不同的向量，分别转换每个向量将意味着相同的数字将表示不同的文本值，反之亦然，除非两个向量都是从完全相同的一组不同值中折衷的。如果您希望这两个因素的水平相同，则必须格外小心。一种方法是连接两个向量，将其转换为一个因子，然后将结果拆分为两个因子向量。

# css - 使用 Css3 的背景中的水平线

> ID：11392089
> 
> 赞同：18
> 
> 时间：2012-07-09T09:13:34.250
> 
> 标签：css, background, border

如何仅使用css3对文本实现这种类型的样式，意味着标签中间有一条水平线......可以使用纯css吗......

![在此处输入图像描述](../Images/0c28f713be7c0f7cd5b05f438f325f3d.png)

这是我的结构：-

```
<p class="datedAside">4 weeks ago</p> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2016-10-09T11:25:35.577

您可以使用纯 CSS 使用线性渐变作为背景来实现这一点：

```
<p class="datedAside">4 weeks ago</p>
<style>
p {
    background: linear-gradient(180deg, 
        rgba(0,0,0,0) calc(50% - 1px), 
        rgba(192,192,192,1) calc(50%), 
        rgba(0,0,0,0) calc(50% + 1px)
    );
}
</style> 
```

[https://jsfiddle.net/klesun/aujrkpLk/](https://jsfiddle.net/klesun/aujrkpLk/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-09T09:18:16.877

这是通过在 p 中添加跨度的一种方法。

HTML：

```
<p class="datedAside"> <span> 4 weeks ago </span> </p>​ 
```

CSS：

```
p {background: #000; height:1px; margin-top:10px;}
p span{background: #fff; padding:10px; position:relative; top:-10px; left: 20px}​ 
```

**演示：http:** [//jsfiddle.net/9GMJz/](http://jsfiddle.net/9GMJz/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-09T09:18:20.750

我知道的最简单的方法之一，你可以这样实现：

**HTML**

```
<p>Your text goes here</p>
<hr> 
```

**​CSS**

 **```
p {
    background: #fff; // or whatever is your bg-color
    display:inline-block;
    padding-right: 1em;
    line-height: 1.2em;
}

p+hr {
    margin-top: -0.6em;
} 
```

**JSFiddle** [http://jsfiddle.net/cTMXa/1/](http://jsfiddle.net/cTMXa/1/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-02T08:28:54.193

你可以像这样使用 1% 的渐变

```
.datedAside {
     background: linear-gradient(0deg, transparent 49%, #000 50%, transparent 51%);
}
.datedAside span{
     background: #FFF;
     padding: 0 0.5rem;
} 
```

您需要将额外的跨度设置为与组件背景相同的背景颜色，以使其看起来像是“删除”了文本后面的行。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-06T06:51:54.420

您可以像这样向段落选择器添加一个伪元素：

```
p {
  ::before {
    border-top: 10px solid #0066a4;
    content:"";
    margin: 0 auto; /* this centers the line to the full width specified */
    position: absolute; /* positioning must be absolute here, and relative positioning must be applied to the parent */
    top: 12px; left: 0; right: 0; bottom: 0;
    z-index: -1;
  }
} 
```

有关工作示例，请参见 Eric Rasch 的 CodePen：[https ://codepen.io/ericrasch/pen/Irlpm](https://codepen.io/ericrasch/pen/Irlpm)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-03-25T11:17:59.503

flex 和 ::before 和 ::after 的替代方案。使用此解决方案，您无需为内容使用背景。

使用此 HTML 标记：

```
<p class="datedAside"><span>4 weeks ago</span></p> 
```

而这个 CSS ：

```
.datedAside {
  display: flex;
  flex-flow: nowrap;
  justify-content: space-between;
  align-items: center;
}

.datedAside span {
  padding: 1em;

}

.datedAside::before, 
.datedAside::after {
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  content: " ";
  height: 0px;
  border-bottom: 1px solid black;
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-01-09T10:24:09.270

Artur 的解决方案创建了一条线，但是如果您增加 px 值，很明显该线仍然是渐变。这可以通过使用中间颜色的开始和停止来解决，如下所示：

```
p {
    background: linear-gradient(to bottom, white calc(50% - 1px), black calc(50% - 1px) calc(50% + 1px), white calc(50% + 1px));
} 
```

这条线将是给定 px 值的两倍（由于 +px -px），因此上面给出了穿过元素中心的水平 2px 线。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-26T09:01:08.530

我从 fork 更新了我的解决方案。

[http://jsfiddle.net/0f9catjy/](http://jsfiddle.net/0f9catjy/)

**html块**

```
<h1 class="lined"><span>H1 Lined Sample</span></h2>
<h2 class="lined"><span>H2 Lined Sample</span></h2>
<h3 class="lined"><span>H3 Lined Sample</span></h2>

<h1 class="lined lined-double"><span>H1 Double-lined Sample</span></h1>
<h2 class="lined lined-double"><span>H1 Double-lined Sample</span></h2> 
```

**CSS块**

```
/**
 * Horizontal Type Line Behind Text
 * Inspired by this discussion @ CSS-Tricks: http://css-tricks.com/forums/discussion/comment/51357#Comment_51357
 * Available on jsFiddle: http://jsfiddle.net/ericrasch/jAXXA/
 * Available on Dabblet: http://dabblet.com/gist/2045198
 * Available on GitHub Gist: https://gist.github.com/2045198
 */

h1, .h1 { font-size: 2.5rem; }
h2, .h2 { font-size: 2rem; }
h3, .h3 { font-size: 1.75rem; }
h4, .h4 { font-size: 2.5rem; }
h5, .h5 { font-size: 1.25rem; }
h6, .h6 { font-size: 1rem; }

h1.lined, h2.lined, h3.lined, h4.lined, h5.lined, h6.lined
{
    font-family: sans-serif;
    position: relative;
    text-align: left;
    z-index: 1;
}

h1.lined:before,
h2.lined:before,
h3.lined:before,
h4.lined:before,
h5.lined:before,
h6.lined:before
{
        border-top: 2px solid #dfdfdf;
        content: "";
        margin: 0 auto;
        position: absolute;
        top: calc(50% - 2px);
        left: 0;
        right: 0;
        bottom: 0;
        width: 95%;
        z-index: -1;
    }

h1.lined span,
h2.lined span,
h3.lined span,
h4.lined span,
h5.lined span,
h6.lined span
{
        background: #fff;
        padding: 0 15px;
    }

h1.lined-double:before, 
h2.lined-double:before, 
h3.lined-double:before, 
h4.lined-double:before, 
h5.lined-double:before, 
h6.lined-double:before
{
        border-top: none;
    }

h1.lined-double:after,
h2.lined-double:after,
h3.lined-double:after,
h4.lined-double:after,
h5.lined-double:after,
h6.lined-double:after
{
    border-bottom: 1px solid blue;
    -webkit-box-shadow: 0 3px 0 0 red;
    -moz-box-shadow: 0 3px 0 0 red;
    box-shadow: 0 3px 0 0 red;
    content: "";
    margin: 0 auto;
    position: absolute;
    top: calc(50% - 6px);
    left: 0;
    right: 0;
    width: 95%;
    z-index: -1;
    transform: translateY(calc(-50% + 3px));
}
/** END
 * Horizontal Type Line Behind Text
 */ 
```**

# jdbc - 使用连接池一段时间后自动提交更改为 TRUE

> ID：11392090
> 
> 赞同：6
> 
> 时间：2012-07-09T09:13:36.120
> 
> 标签：jdbc, connection-pooling

我遇到了一些奇怪的问题。

我使用池来创建和管理数据库连接，我将`DefaultAutocommit`选项设置为`FALSE`.

但过了一会儿，当发生错误并`rollback`调用 a 时，会抛出异常：`Can't call rollback when autocommit=true`

重新启动 JBoss 将解决问题，因为将创建一个新的 DataSource。

这是我创建数据源的方式：

```
protected DataSource getDataSource(String driverClassName, String dbUrl, String dbUser, String dbPwd) {
    PoolProperties poolProperties = new PoolProperties();
    poolProperties.setUrl(dbUrl);
    poolProperties.setDriverClassName(driverClassName);
    poolProperties.setUsername(dbUser);
    poolProperties.setPassword(dbPwd);

    poolProperties.setDefaultAutoCommit(false);
    poolProperties.setTestWhileIdle(false);
    poolProperties.setTestOnBorrow(true);
    poolProperties.setDefaultTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);
    poolProperties.setValidationQuery("SELECT 1");
    poolProperties.setTestOnReturn(false);
    poolProperties.setLogAbandoned(false);
    poolProperties.setRemoveAbandoned(true);
    poolProperties.setRemoveAbandonedTimeout(20);
    poolProperties.setMaxActive(100);
    poolProperties.setInitialSize(10);
    poolProperties.setJdbcInterceptors("org.apache.tomcat.jdbc.pool.interceptor.ConnectionState;org.apache.tomcat.jdbc.pool.interceptor.StatementFinalizer");

    return new DataSource(poolProperties);
} 
```

以及我如何获得连接：

```
xxx.getDataSource().getConnection(); 
```

我还没有尝试，但我的第一个电话是使用`setAutoCommit(false)`.

虽然我不明白为什么`poolProperties.setDefaultAutoCommit(false);`停止工作。

堆栈跟踪 ：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Can't call rollback when autocommit=true
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
    at com.mysql.jdbc.Util.getInstance(Util.java:384)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1015)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:929)
    at com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4805)
    at sun.reflect.GeneratedMethodAccessor302.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.jdbc.pool.ProxyConnection.invoke(ProxyConnection.java:125)
    at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:94)
    at org.apache.tomcat.jdbc.pool.interceptor.AbstractCreateStatementInterceptor.invoke(AbstractCreateStatementInterceptor.java:71)
    at org.apache.tomcat.jdbc.pool.JdbcInterceptor.invoke(JdbcInterceptor.java:94)
    at org.apache.tomcat.jdbc.pool.interceptor.ConnectionState.invoke(ConnectionState.java:140)
    at $Proxy333.rollback(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:23:44.070

所以这就是今天的内容，我强制`AutoCommit`池创建的每个连接上的属性。

这行得通，所以它肯定是池类的一个错误。

编辑：我也遇到了以相同方式设置但未考虑在内的事务隔离问题。经过一番研究，我发现这可能与 Mysql 连接器/JI 的使用有关（[http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html)）。

我在文档中发现了这个有趣的参数：

**使用LocalSessionState**

> 驱动程序是否应该参考 Connection.setAutoCommit() 和 Connection.setTransactionIsolation() 设置的自动提交和事务隔离的内部值以及协议维护的事务状态，而不是查询数据库或盲目地向数据库发送命令commit() 或 rollback() 方法调用？

**默认值：**假

# c# - 编写一种优雅的方式来剥离字符串

> ID：11392091
> 
> 赞同：0
> 
> 时间：2012-07-09T09:13:42.907
> 
> 标签：c#, string, algorithm

我正在使用 C#，在其中一个地方我得到了所有人姓名的列表，他们的电子邮件 ID 格式为

`name(email)\n`

我刚刚想到了这个子字符串的东西。我正在寻找更优雅、更快（在访问时间、它执行的操作方面）、易于记忆的代码行来执行此操作。

```
string pattern =  "jackal(jackal@gmail.com)";
string email = pattern.SubString(pattern.indexOf("("),pattern.LastIndexOf(")") - pattern.indexOf("("));

//extra
string email =  pattern.Split('(',')')[1]; 
```

我认为执行上述操作将对每个字符进行顺序访问，直到找到字符的索引。现在工作正常，因为名字很短，但是当名字很大时会很困难（希望人们没有名字）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:28:01.387

A dirty hack would be to let microsoft do it for you.

```
try
{
    new MailAddress(input);
    //valid
}
catch (Exception ex)
{
    // invalid
} 
```

I hope they would do a better job than a custom reg-ex.

Maintaining a custom reg-ex that takes care of everything might involve some effort.

Refer: [MailAddress](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddress.aspx)

Your format is actually very close to some supported formats. Text within () are treated as comments, but if you replace ( with < and ) with > and get a supported format.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:29:26.380

The second parameter in Substring() is the length of the string to take, not the ending index.

Your code should read:

```
string pattern = "jackal(jackal@gmail.com)";

int start = pattern.IndexOf("(") + 1;
int end = pattern.LastIndexOf(")");
string email = pattern.Substring(start, end - start); 
```

Alternatively, have a look at [Regular Expression to find a string included between two characters while EXCLUDING the delimiters](https://stackoverflow.com/questions/1454913/regular-expression-to-find-a-string-included-between-two-characters-while-exclu)

# html - 无法使绝对定位的伪元素出现在其父元素的前面

> ID：11392098
> 
> 赞同：1
> 
> 时间：2012-07-09T09:14:08.570
> 
> 标签：html, css, pseudo-element

我正在尝试在其父级下方添加一个伪元素。两者都是绝对定位的，但伪元素仍然堆叠在其父元素之上。

[这是一个jsfiddle。](http://jsfiddle.net/vb2mS/)

## HTML：

```
<div></div> 
```

## CSS

```
div{
    position: absolute;
    top: 10px;
    left: 10px;
    height: 20px;
    width: 20px;
    background: red;
    z-index: 10;
}
div:before{
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    height: 40px;
    width: 40px;
    background: blue;
    z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:02:37.110

您只需要添加另一个 z-index 为 1 和相对定位的父级。

示例：http: [//jsfiddle.net/D6mwn/1/](http://jsfiddle.net/D6mwn/1/)

阅读更多：[是否可以在其父元素下方设置伪元素的堆叠顺序？](https://stackoverflow.com/questions/3032856/z-index-of-before-or-after-to-be-below-the-element-is-that-possibale)

# javascript - Mobile Safari 是否清理 DOM 应用程序缓存 - 以及何时清理？

> ID：11392107
> 
> 赞同：0
> 
> 时间：2012-07-09T09:14:37.830
> 
> 标签：javascript, html, caching, manifest

我们正在使用 DOMApplicationCache / 缓存清单做一个 Web 应用程序，我想知道 Mobile Safari 是否会在任何时候清理/清除我的项目的 DOMApplicationCache（例如，如果在一定时间内没有访问该网站） .

我还被告知，将 Web 应用程序保存到主屏幕会将其应用程序缓存沙箱化，从而有效避免“正常”Mobile Safari 中的 DOMApplicationCache 上可能存在的任何时间限制。

那么有人知道目前的情况吗？或者你能不能给我指出一个相关的资源？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:22:05.160

从我在Apple关于在客户端存储Web内容的文档中可以阅读到它似乎不应该自动清除缓存：[https ://developer.apple.com/library/safari/#documentation/AppleApplications/Reference /SafariWebContent/Client-SideStorage/Client-SideStorage.html#//apple_ref/doc/uid/TP40002051-CH4-SW5](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/Client-SideStorage/Client-SideStorage.html#//apple_ref/doc/uid/TP40002051-CH4-SW5)

*但是，我可能会使用applicationCache*对象的*status*属性来实施一种措施来确保缓存有效并且存在。如果您还没有，请在此处查看类参考：[https ://developer.apple.com/library/safari/#documentation/DataManagement/Reference/DOMApplicationCacheClassReference/DOMApplicationCache/DOMApplicationCache.html#//apple_ref/javascript/cl/](https://developer.apple.com/library/safari/#documentation/DataManagement/Reference/DOMApplicationCacheClassReference/DOMApplicationCache/DOMApplicationCache.html#//apple_ref/javascript/cl/DOMApplicationCache) [DOMApplicationCache](https://developer.apple.com/library/safari/#documentation/DataManagement/Reference/DOMApplicationCacheClassReference/DOMApplicationCache/DOMApplicationCache.html#//apple_ref/javascript/cl/DOMApplicationCache)

# php - Zend 框架，具有默认和移动布局

> ID：11392114
> 
> 赞同：0
> 
> 时间：2012-07-09T09:14:55.107
> 
> 标签：php, zend-framework, wurfl

目前我有一个 zend 框架应用程序，我将它与 wurfl 用户代理集成，所以我可以在移动和桌面版本之间切换，我的插件驻留在库中

```
<?php
 class Zc_Controller_Plugin_TemplatePicker extends Zend_Controller_Plugin_Abstract
  {
protected $useragent;

public function postDispatch(Zend_Controller_Request_Abstract $request)
{
    $bootstrap = Zend_Controller_Front::getInstance()->getParam('bootstrap');
    $this->useragent = $bootstrap->getResource('useragent');

    if($this->useragent->getDevice()->getType() == 'mobile')
    {
        Zend_Layout::getMvcInstance()->setLayout('mobile');
    }

}
 } 
```

现在我在脚本文件mobile.phtml和layout.phtml中有2个布局，我可以使用一些控制器功能以便它可以用于移动布局，而且我在引导程序中有布局加载器

```
 protected function _initLayoutHelper()
{
   // $front = Zend_Controller_Front::getInstance();
   // $front->registerPlugin(new Zc_Controller_Plugin_TemplatePicker());  
    if(!stristr($_SERVER['REQUEST_URI'], '/admin')){
        $this->bootstrap('frontController');
    }
    $layout = Zend_Controller_Action_HelperBroker::addHelper(new Zc_Controller_Action_Helper_LayoutLoader());
} 
```

并且布局加载器代码是

```
<?php

class Zc_Controller_Action_Helper_LayoutLoader extends   
  Zend_Controller_Action_Helper_Abstract
 {
public function preDispatch(){

    $bootstrap = $this->getActionController()->getInvokeArg('bootstrap');
    $config = $bootstrap->getOptions();
    Zend_Registry::set('config', $config);
    $module = $this->getRequest()->getModuleName();
    $controller = $this->getRequest()->getControllerName();
    $action = $this->getRequest()->getActionName();

    $layoutScript = "layout";
    if (isset($config[$module]['resources']['layout']['layout'])) {
        $layoutScript = $config[$module]['resources']['layout']['layout'];
    }
    $this->getActionController()->getHelper('layout')->setLayout($layoutScript);
}
 } 
```

我现在应该在哪里调整，以便我可以拥有 1 个具有 2 个单独布局的控制器类。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:54:05.170

如果您希望为某个控制器设置某些特定布局，您可以使用以下代码：

```
class Custom_Plugin_Layout extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch()
    {
        $front = Zend_Controller_Front::getInstance();
        $layout = Zend_Layout::getMvcInstance();

        switch ($front->getRequest()->getControllerName()) {
            case "index":
                $layout->setLayout('home');
                break;
            case "login":
                $layout->setLayout('login');
                break;
            default:
                $layout->setLayout('default');
        }
    }

} 
```

# java - 构建自定义地图时如何开始？

> ID：11392117
> 
> 赞同：0
> 
> 时间：2012-07-09T09:15:07.980
> 
> 标签：java, android, maps, latitude-longitude

我想构建一个可以根据需要自定义的空地图。现在，我知道整个系统如何使用瓷砖和 lon/lat 坐标，但我仍然不明白如何在瓷砖的像素和 lon/lat 之间建立联系。我想要一张只显示我的国家的空地图，并且我可以按照自己喜欢的方式编辑内容（我使用 Android - 不知道这是否重要）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:26:15.070

编写一个派生自[Overlay](http://code.google.com/intl/de-DE/android/add-ons/google-apis/reference/com/google/android/maps/Overlay.html)类的类并覆盖[onTap()](http://code.google.com/intl/de-DE/android/add-ons/google-apis/reference/com/google/android/maps/Overlay.html#onTap%28com.google.android.maps.GeoPoint,%20com.google.android.maps.MapView%29)方法。然后，您可以将叠加层添加到您的[MapView](http://code.google.com/intl/de-DE/android/add-ons/google-apis/reference/com/google/android/maps/MapView.html)。当您在地图上的某个位置使用 Tab 时，代表您点击位置的 GeoPoint 对象将传递给 onTap()方法[。](http://code.google.com/intl/de-DE/android/add-ons/google-apis/reference/com/google/android/maps/GeoPoint.html)

您也可以使用 onTouchEvent()。给定触摸的屏幕坐标，您可以使用 Projection（来自 MapView 上的 getProjection()）将其转换为纬度和经度。

这是一个[示例项目](http://mobiforge.com/developing/story/using-google-maps-android)。

# java - Stored procedure for getting value from one table which are no inserted in other table?

> ID：11392123
> 
> 赞同：0
> 
> 时间：2012-07-09T09:15:26.907
> 
> 标签：java, sql-server

I have a table named `platform_Users` and other table `Assigned_Users`.

I want MSSQL sp "`getAllUnAssignedUSER`" which get all users records from `platform_user` which are not inserted in `Assigned_User`..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:25:18.813

left join the tables together

Then in the where clause return where Assigned_Users.UserID is null

Should return all records from 1st table where they have no joined entry in the assigned table

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:28:10.813

Try this

```
DELIMITER $$

CREATE    
    PROCEDURE `getAllUnAssignedUSER`() 

    BEGIN
    SELECT * FROM platform_Users pu WHERE pu.id NOT IN (SELECT DISTINCT id FROM Assigned_Users);
    END$$

DELIMITER ; 
```

# javascript - 提交时显示进度条对话框

> ID：11392126
> 
> 赞同：0
> 
> 时间：2012-07-09T09:15:37.950
> 
> 标签：javascript, jquery, asp.net, ajax

如果可能的话，我想在每次回发时显示一个弹出式 jquery 样式，例如说 Loading... 我不知道如何完成，也不知道使用哪种技术。我想把代码放在一个超类上，这样我只需要编码一次。原则上，我希望当我按下提交按钮时，页面会自行隐藏。希望你能帮助我。

编辑：应该是这样的。我有一个页面，我打开一个带有 iframe 和提交按钮的 jquery 对话框。当我提交表单时，必须隐藏带有表单的对话框，并且必须出现一个说正在加载...的新对话框；当操作完成时，此对话框必须隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:37:46.793

您可以使用of you 页面`onsubmit`上的触发器来执行此操作：`form`

```
<form id="form1" runat="server" onsubmit="return disableForm(this);">
 ...
</form> 
```

在 javascript 上，我所做的是在第一次提交时单击我让提交，然后关闭/打开我喜欢的对话框。如果用户单击两次提交，我会向他显示一条消息并停止第二次提交。

```
var submitted = false;
function disableForm(theform) {
       if (true == submitted) {
            alert("form already submitted... please wait...");
            return false;
        }
        else {            
            // here you close the dialog, open an other
            submitted = true;
            return true;
        }
} 
```

我无法编写如何关闭您打开的对话框，因为您没有提供任何线索/代码，但我认为这很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:29:53.557

假设您正在使用更新面板。您将需要像这样的处理程序和图像“LoadingImage”

```
<script type="text/javascript" language="javascript">  
      Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
          Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
          function beginRequestHandle(sender, Args) {
    document.getElementById("LoadingImage").style.visibility = "visible";

          //Do something when call begins.
            }

    function endRequestHandle(sender, Args) {
    document.getElementById("LoadingImage").style.visibility = "hidden";
    }
          </script> 
```

它的作用是在 ajax 调用开始时显示图像，并在完成时将其隐藏。您可以使用动画 gif 来达到您的目的。

# azure - 部署单独的网站 azure

> ID：11392134
> 
> 赞同：0
> 
> 时间：2012-07-09T09:15:59.833
> 
> 标签：azure

我有一个想要在 Azure 中部署的 Web 项目。

我想为每个国家/地区创建一个 IIS 网站，并且我希望能够独立部署每个网站（不是一次全部部署）。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:23:35.367

好吧，你有两个选择：

1.  使用[Windows Azure](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)网站托管您的网站
2.  使用[Windows Azure Accelerator for WebRoles](https://github.com/microsoft-dpe/wa-accelerator-webroles)或类似该方法的您自己的项目。

[但是，您必须注意，第二个选项是由于Azure 网站](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)的可用性而不再受支持的项目。借助 Azure 网站，您几乎可以拥有通过加速器获得的一切。您可以在专用实例上托管您的网站，并单独管理它们。您可以通过 FTP/GIT/TFS/WebDeploy 更新/部署您的网站数据，无论您最喜欢哪种方法。我看到的网站唯一的缺点是缺少[启动任务](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)和自定义环境（Windows、IIS 设置等）的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:29:58.313

When you have set up your Azure account you can go the the web sites section and start the construction of your Azure web spaces, the interface in the preview is very straight forward to use and intuitive.

For deployment using the publish command in from Visual Studio 2012 (which I found the easiest) here are the steps you will need to undertake:

1.  For each of your countries you will need to set up the web site in azure.
2.  Then for each of those web sites you have created go to their dashboard page and download the publish profile settings.
3.  It is these settings that you can import into you Visual Studio solution by selecting the publish command and browsing for the settings profile file you downloaded and importing it.
4.  Then in future when you right click on the web site in your solution and select publish it will publish to your web site in Azure.

I have created a fictional website for Spain below is the link you will need in order to initiate a publish from Visual Studio.

![How to download the publish profile settings](../Images/e9d3c9992893ff34dfa2351ee1a848f4.png)

------------ EDIT -------------

For Visual Studio 2010 I met some difficulties trying to publish, in fact the publish profile you can download was not importable to Visual Studio 2010, well at least I could not figure it out.

Instead I created a deployment user by clicking on the 'Reset Deployment Credentials' link on the Azure dashboard (see the link in the image), created the user and then published via FTP from Visual Studio 2010.

**What I would like to flag up is the maintenance issue of having one site for each country rather than one site with Localization, (if it is a language issue). A small change multiplied just 20 times for 20 different countries becomes a larger task and if you have lots of little changes it soon becomes a large task to maintain them all.**

# android - Android：网格滚动上的奇怪崩溃

> ID：11392135
> 
> 赞同：0
> 
> 时间：2012-07-09T09:16:01.733
> 
> 标签：android, user-interface, gridview, adapter

我正在通过标准方案创建网格：`GridView`使用自定义`BaseAdapter`衍生设置：

```
class EventGridAdapter extends BaseAdapter {

    private GregorianCalendar gregorianCalendar;
    Context context;
    GridView gridView;

    public EventGridAdapter(Context context, GridView gridView) {
        this.context = context;
        this.gridView = gridView;
    }

    public int getCount() {
        return 31;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        CalendarItem cell = null;
        if (convertView == null) {
            cell = new CalendarItem(context);
            int viewHeight = gridView.getHeight();
            int spacing = 1;
            int height = viewHeight / 5 - spacing; 
            cell.setMinimumHeight(height);
        } else {
            cell = (CalendarItem) convertView;
        }
        return cell;
    }
} 
```

关于这一行：

```
cell = new CalendarItem(context) 
```

到目前为止`CalendarItem`是纯`View`的，例如所有内容都被注释掉了，所以没有什么会导致崩溃......

和标准`GridView`输出：

```
public class CalendarActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.calendar);

    GridView g = (GridView) findViewById(R.id.gridCalendar);
    g.setAdapter(new EventGridAdapter(this, g));        
}
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gridCalendar"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center"
android:horizontalSpacing="1dp"
android:verticalSpacing="1dp" 
android:numColumns="7"
android:padding="10dp"
android:stretchMode="columnWidth"
/> 
```

**有什么问题**：

当我在 ICS 4.0.3 的模拟器中运行此代码时，网格完美显示，但是当我尝试滚动它时 - 程序崩溃并出现奇怪的异常：

`D/AndroidRuntime( 1087): Shutting down VM W/dalvikvm( 1087): threadid=1: thread exiting with uncaught exception (group=0x409c01f8) E/AndroidRuntime( 1087): FATAL EXCEPTION: main E/AndroidRuntime( 1087): java.lang.IllegalArgumentException: bitmap size exceeds 32bits E/AndroidRuntime( 1087): at android.graphics.Bitmap.nativeCreate(Native Method) E/AndroidRuntime( 1087): at android.graphics.Bitmap.createBitmap(Bitmap.java:605) E/AndroidRuntime( 1087): at android.graphics.Bitmap.createBitmap(Bitmap.java:585) E/AndroidRuntime( 1087): at android.view.View.buildDrawingCache(View.java:10626) E/AndroidRuntime( 1087): at android.view.View.getDrawingCache(View.java:10476) E/AndroidRuntime( 1087): at android.view.ViewGroup.drawChild(ViewGroup.java:2743) E/AndroidRuntime( 1087): at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489) E/AndroidRuntime( 1087): at android.widget.AbsListView.dispatchDraw(AbsListView.java:2092) E/AndroidRuntime( 1087): at android.view.View.draw(View.java:11083) E/AndroidRuntime( 1087): at android.widget.AbsListView.draw(AbsListView.java:3398) E/AndroidRuntime( 1087): at android.view.ViewGroup.drawChild(ViewGroup.java:2887) E/AndroidRuntime( 1087): at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489) E/AndroidRuntime( 1087): at android.view.ViewGroup.drawChild(ViewGroup.java:2885) E/AndroidRuntime( 1087): at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489) E/AndroidRuntime( 1087): at android.view.ViewGroup.drawChild(ViewGroup.java:2885) E/AndroidRuntime( 1087): at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489) E/AndroidRuntime( 1087): at android.view.View.draw(View.java:10981) E/AndroidRuntime( 1087): at android.widget.FrameLayout.draw(FrameLayout.java:450) E/AndroidRuntime( 1087): at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2126) E/AndroidRuntime( 1087): at android.view.ViewRootImpl.draw(ViewRootImpl.java:2026) E/AndroidRuntime( 1087): at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634) E/AndroidRuntime( 1087): at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442) E/AndroidRuntime( 1087): at android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime( 1087): at android.os.Looper.loop(Looper.java:137) E/AndroidRuntime( 1087): at android.app.ActivityThread.main(ActivityThread.java:4424) E/AndroidRuntime( 1087): at java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime( 1087): at java.lang.reflect.Method.invoke(Method.java:511) E/AndroidRuntime( 1087): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) E/AndroidRuntime( 1087): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) E/AndroidRuntime( 1087): at dalvik.system.NativeStart.main(Native Method)`

当我在 2.3.3 的模拟器中运行相同的代码时 - 一切都很好！

经过一番调查，我找到了问题的“根源”（-。再看一下`getView`方法`EventGridAdapter`：

```
 int viewHeight = gridView.getHeight();
        int spacing = 1;
        int height = viewHeight / 5 - spacing; 
        cell.setMinimumHeight(height); 
```

问题线是：

```
cell.setMinimumHeight(height); 
```

当我将其更改为：

```
cell.setMinimumHeight(10); 
```

...崩溃消失

但我不知道我做错了什么？一切看起来逻辑上都是正确的：我需要 5 行。此外，`height`降低也无济于事（当所有行都在视图区域中时，例如不需要滚动）：

```
int height = viewHeight / 7 - spacing; 
```

你的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:25:35.103

问题是听到...

```
gridView.getHeight() 
```

**为什么？** 因为你不会有gridview的高度@刚刚创建的时间

您可以在其中使用此方法，也可以`onWindowfocuschanged`使用 viewTreeobserver

像下面的那个

```
ViewTreeObserver vto1 = gridView.getViewTreeObserver();
        vto1.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

            public void onGlobalLayout() {
                // write hear for height

                Log.i(TAG, "from VTO" + gridView.getHeight());
                ViewTreeObserver obs = gridView.getViewTreeObserver();
                obs.removeGlobalOnLayoutListener(this);
            }
        }); 
```

# javascript - 如何检测按钮/图像上的长按

> ID：11392138
> 
> 赞同：0
> 
> 时间：2012-07-09T09:16:15.253
> 
> 标签：javascript, iphone, dom, cordova, dom-events

我正在做一个phonegap项目。我需要实现一个长按事件。我们如何使用 JavaScript 检测长按图像/按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:22:33.383

```
$('#target').mousedown(function() {
  alert('Handler for .mousedown() called.');
  //start a timer
});

$('#target').mouseup(function() {
  alert('Handler for .mouseup() called.');
  //stop the timer and decide on long click

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:21:52.907

我想到的一种方法是：

1.  在 onclick 事件的开始，记录时间，这给你第一次点击的时间。

2.  然后检查时间跨度。假设，您说 5 秒的时间跨度是长按事件。如果检查成功，这是一个长按事件。

# sql - 审计触发器 - 列名或提供的值的数量与表定义不匹配

> ID：11392143
> 
> 赞同：1
> 
> 时间：2012-07-09T09:16:31.617
> 
> 标签：sql, triggers, audit

我正在尝试创建一个数据库触发器，该触发器能够创建“事务”表的快照并将其与与插入、更新或删除任何数据行的日期有关的信息一起存储在“审计”表中。

提前道歉，但我对这种东西非常陌生！

就目前而言，我的触发器如下：

```
create trigger AuditTransactions
on dbo.Transactions
after insert, update, delete
as

    if exists(select * from inserted)
    begin
        if exists(select * from deleted)
        begin
            -- this is for an update
            update Audit
            set DeleteDate = getdate()
            where TransactionId in (select TransactionId from deleted)
        end 

        -- this is just for an insert
        insert into Audit
        select *, getdate() as CreateDate
        from inserted
    end
    else
    begin
        -- this is just for a delete
        update Audit
        set DeleteDate = getdate()
        where TransactionId in (select TransactionId from deleted)
    end

go 
```

我的审计表如下所示：

```
CREATE TABLE [dbo].[Audit](
    [TransactionId] [int] NOT NULL,
    [InvoiceNumber] [nvarchar](1) NULL,
    [InvoiceType] [nvarchar](1) NULL,
    [InvoiceIssueDate] [datetime] NULL,
    [InvoiceTotalexclVat] [nvarchar](1) NULL,
    [InvoiceTotalVat] [numeric](18, 0) NULL,
    [InvoiceDiscount] [numeric](18, 0) NULL,
    [InvoiceTotalPayable] [numeric](18, 0) NULL,
    [AccountCode] [nvarchar](1) NULL,
    [Reference1] [nvarchar](1) NULL,
    [Reference2] [nvarchar](1) NULL,
    [Reference3] [nvarchar](1) NULL,
    [Level1CustomOrg] [nvarchar](1) NULL,
    [Level2CustomOrg] [nvarchar](1) NULL,
    [Level3CustomOrg] [nvarchar](1) NULL,
    [Level4CustomOrg] [nvarchar](1) NULL,
    [ScanLocation] [nvarchar](1) NULL,
    [ScanDateTime] [datetime] NULL,
    [CaptureInkjetId] [nvarchar](1) NULL,
    [CaptureBatchId] [nvarchar](1) NULL,
    [CaptureDateTime] [datetime] NULL,
    [InputSource] [nvarchar](1) NULL,
    [CurrencyCode] [nvarchar](1) NULL,
    [DebitCredit] [nvarchar](1) NULL,
    [OrderNumberHeader] [nvarchar](1) NULL,
    [SupplierName] [nvarchar](1) NULL,
    [BancPaySupplierId] [nvarchar](1) NULL,
    [SupplierIDERP] [nvarchar](1) NULL,
    [PaymentDate] [datetime] NULL,
    [DeliveryDate] [datetime] NULL,
    [CustomRef1] [nvarchar](1) NULL,
    [CustomRef2] [nvarchar](1) NULL,
    [CustomRef3] [nvarchar](1) NULL,
    [CustomRef4] [nvarchar](1) NULL,
    [CustomRef5] [nvarchar](1) NULL,
    [CustomRef6] [nvarchar](1) NULL,
    [CustomRef7] [nvarchar](1) NULL,
    [CustomRef8] [nvarchar](1) NULL,
    [CustomRef9] [nvarchar](1) NULL,
    [CustomRef10] [nvarchar](1) NULL,
    [CustomRef11] [nvarchar](1) NULL,
    [CustomRef12] [nvarchar](1) NULL,
    [CustomRef13] [nvarchar](1) NULL,
    [CustomRef14] [nvarchar](1) NULL,
    [CustomRef15] [nvarchar](1) NULL,
    [CustomAmount1] [numeric](18, 0) NULL,
    [CustomAmount2] [numeric](18, 0) NULL,
    [CustomAmount3] [numeric](18, 0) NULL,
    [CustomAmount4] [numeric](18, 0) NULL,
    [CustomAmount5] [numeric](18, 0) NULL,
    [CustomDate1] [datetime] NULL,
    [CustomDate2] [datetime] NULL,
    [Country1] [nvarchar](1) NULL,
    [Country2] [nvarchar](1) NULL,
    [Country3] [nvarchar](1) NULL,
    [Country4] [nvarchar](1) NULL,
    [Country5] [nvarchar](1) NULL,
    [Country6] [nvarchar](1) NULL,
    [Country7] [nvarchar](1) NULL,
    [Country8] [nvarchar](1) NULL,
    [Country9] [nvarchar](1) NULL,
    [Country10] [nvarchar](1) NULL,
    [CheckedOut] [bit] NULL,
    [CheckedOutDate] [datetime] NULL,
    [BlobUrl] [nvarchar](1) NULL,
    [GLCode] [nvarchar](1) NULL,
    [RejectReason] [nvarchar](1) NULL,
    [RejectComment] [nvarchar](1) NULL,
    [ReferMessage] [nvarchar](1) NULL,
    [PaymentTerms] [nvarchar](1) NULL,
    [CheckedOutByUserId] [int] NULL,
    [LastUpdatedByUserId] [int] NULL,
    [TransactionFormatTypeId] [int] NULL,
    [RequestOriginalStatusTypeId] [int] NULL,
    [GLCodeComment] [nvarchar](1) NULL,
    [SenderOrganizationId] [int] NULL,
    [ReceiverOrganizationId] [int] NULL,
    [TransactionStatusTypeId] [int] NULL,
    [TransactionTypeId] [int] NULL,
    [OrganizationId] [int] NULL,
    [OrganizationId1] [int] NULL,
    [CreateDate] [datetime] NOT NULL,
    [DeleteDate] [datetime] NULL
) ON [PRIMARY]

GO 
```

尝试执行触发器查询时，我收到以下错误消息：

```
Msg 213, Level 16, State 1, Procedure AuditTransactions, Line 17
Column name or number of supplied values does not match table definition. 
```

这似乎是“插入审计”命令，但我不知道从这里做什么！

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:35:18.130

[`INSERT`](http://msdn.microsoft.com/en-us/library/ms174335.aspx)似乎记录得很差。对于`VALUES()`元素，它声明以下内容：

> 如果 Value 列表中的值与表中的列的顺序不同，或者表中的**每一列都没有值**，则`column_list`必须用于显式指定存储每个传入值的列。

（**重点**补充）

但是，我的理解和信念是，无论值/行的来源是什么，都适用相同的约束 - 除非您完全匹配表中的所有列，否则您需要提供`column_list`.

现在，对于您的实例，如果您只为表中的*每一*列提供一个值，可能会更容易：

```
insert into Audit
select *, getdate() as CreateDate,null as DeleteDate
from inserted 
```

现在，我的另一个观察结果是，所有这些与条件控制流有关的事情都是毫无意义的——0`insert`行将没有任何效果，而对空表`update`使用`in`同样没有效果。所以我只有：

```
create trigger AuditTransactions
on dbo.Transactions
after insert, update, delete
as

    update Audit
    set DeleteDate = getdate()
    where TransactionId in (select TransactionId from deleted)

    insert into Audit
    select *, getdate() as CreateDate,null as DeleteDate
    from inserted 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:35:36.050

```
 insert into Audit
        select *, getdate() as CreateDate, null
        from inserted 
```

您的“审计”表的列数比您插入的多（删除日期）；您需要命名所有列，或插入空值。

从风格上讲，为列命名更好——它可以清楚地说明什么在哪里，并在添加新列时避免错误。

# c# - XPath 函数：子字符串、带有 XPathNavigator.Select 的子字符串后

> ID：11392148
> 
> 赞同：1
> 
> 时间：2012-07-09T09:16:50.810
> 
> 标签：c#, .net, xml, xpath

是否可以使用 XPathNavigator.Select 选择选定节点值的子字符串？

例如，我想做的是：

```
xPath = @"//object/@data/substring-after(., '\')"

var pathNavigator = xdoc.CreateNavigator();
var pathNodeIterator = pathNavigator.Select(xPath); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:53:59.350

在.NET 实现中——不是。获得所需结果后，您应该使用 .NET 字符串函数。

# mysql - 两列的Mysql if条件

> ID：11392149
> 
> 赞同：0
> 
> 时间：2012-07-09T09:16:51.780
> 
> 标签：mysql

我想在 MYSQL 中检查以下条件。请帮我找到以下情况的解决方案

健康）状况 ：

```
If(fld_intime == null)
{
    'InMiss' 
}
else if(fld_outtime == null)
{
   'Outmiss'
}
else 
{
    'Present'
} 
```

我如何使用 select 语句创建它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:22:18.737

```
SELECT IF(fld_intime IS NULL, 'InMiss', IF(fld_outtime IS NULL, 'Outmiss', 'Present')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:19:02.650

你在找这个吗：

```
select case when fld_intime is null 
            then 'InMiss'
            when fld_outtime  is null 
            then 'Outmiss'
            else 'Present'
       end as Remarks
from your_table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:22:15.240

```
SELECT CASE 
        WHEN fld_intime is null THEN 'InMiss'
        WHEN fld_outtime is null THEN 'OutMiss'
        ELSE 'Present'
    END AS fld_status  from yourtable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T09:22:37.253

编写 sql examplee .. 在 where 查询中使用[Case](http://dev.mysql.com/doc/refman/5.0/en/case-statement.html)语句

```
select 
      case when fld_intime is null then 'InMiss' 
           when fld_outtime is null then 'Outmiss' 
      else 'Present' end
from yourTable; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T09:22:49.063

试试这个：：

```
Select 
 CASE

 WHEN fld_inTime is null
  THEN 'InMiss' 
WHEN fld_outTime is null
THEN 'outMiss' 
ELSE
'Present'
END
from table 
```

# php - 用相似的内容替换关键字

> ID：11392152
> 
> 赞同：1
> 
> 时间：2012-07-09T09:16:56.667
> 
> 标签：php

使用如下数组中的关键字列表：

```
$keywordlist = array(
    'Apple iPhone' => 'http://www.example.com/apple/iphone/',
    'Apple iPad' => 'http://www.example.com/apple/ipad',
    'Samsung Galaxy Ace' => 'http://www.example.com/samsung/galaxy-ace',
    'Samsung Galaxy Nexus' => 'http://www.example.com/samsung/galaxy-nexus',
    'Samsung' => 'http://www.example.com/samsung/',
    'Apple' => 'http://www.example.com/apple/'
); 
```

我想用与它们关联的 URL 替换关键字。

我尝试遍历它们并使用`str_replace`and `preg_replace`，但这会替换所有关键字中的制造商名称，因此所有关键字都变成了“三星”和“苹果”的链接。有点想不通接下来要去哪里，有大神指点一下吗？

**编辑：**

我使用下面的代码循环 -

```
foreach($keywordlist as $name => $link){ 
    $content = str_replace($name, '<a href="'.$link.'">'.$name.'</a>', $content);
} 
```

**解决方案：**

我相信问题出在我要替换的链接文本上。然后它再次被具有相似关键字的其他短语替换，我已经完成了以下工作。

有人想到更好的方法吗？

```
$content = "<p>This Apple iPhone is from Apple</p>
            <p>This Apple iPad is from Apple</p>
            <p>This Samsung Galaxy Ace is from Samsung</p>
            <p>This Samsung Galaxy Nexus is from Samsung</p>
            <p>This is a Samsung</p>
            <p>This is an Apple</p>";

$keywordlist = array(
    'Apple iPhone' => '[1]',
    'Apple iPad' => '[2]',
    'Samsung Galaxy Ace' => '[3]',
    'Samsung Galaxy Nexus' => '[4]',
    'Samsung' => '[5]',
    'Apple' => '[6]'
);

$content = str_replace(array_keys($keywordlist), array_values($keywordlist), $content);

$urllist = array(
    '[1]' => '<a href="http://www.example.com/apple/iphone/">Apple iPhone</a>',
    '[2]' => '<a href="http://www.example.com/apple/ipad">Apple iPad</a>',
    '[3]' => '<a href="http://www.example.com/samsung/galaxy-ace">Samsung Galaxy Ace</a>',
    '[4]' => '<a href="http://www.example.com/samsung/galaxy-nexus">Samsung Galaxy Nexus</a>',
    '[5]' => '<a href="http://www.example.com/samsung/">Samsung</a>',
    '[6]' => '<a href="http://www.example.com/apple/">Apple</a>'
);

$content = str_replace(array_keys($urllist), array_values($urllist), $content);

echo $content; 
```

输出：

这款[Apple iPhone](http://www.example.com/apple/iphone/)来自[Apple](http://www.example.com/apple/)

这款[Apple iPad](http://www.example.com/apple/ipad/)来自[Apple](http://www.example.com/apple/)

这款[三星 Galaxy Ace](http://www.example.com/samsung/galaxy-ace/)来自[三星](http://www.example.com/samsung/)

这款[三星 Galaxy Nexus](http://www.example.com/samsung/galaxy-nexus)来自[三星](http://www.example.com/samsung/)

这是[三星](http://www.example.com/samsung/)

这是一个[苹果](http://www.example.com/apple/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:20:42.657

[`str_replace()`](http://php.net/manual/en/function.str-replace.php)应该足以满足您的尝试。

```
foreach($keywordlist as $key => $link) {
     $content = str_replace($key, '<a href="$link">$key</a>', $content);
} 
```

正如我所评论的那样，由于键上重复的重复关键字，这将无法按预期工作。

您需要有一个固定的格式来表示一个键。我建议的一个类似于`[Apple]`and `[Apple iPad]`。当你实现类似的东西时，每个关键字都会不同，尽管它们内部包含相同的内部代码。

之后，您更新的关键字结构将看起来像这样。

```
$keywordlist = array(
    '[Apple iPhone]' => 'http://www.example.com/apple/iphone/',
    '[Apple iPad]' => 'http://www.example.com/apple/ipad',
    '[Samsung Galaxy Ace]' => 'http://www.example.com/samsung/galaxy-ace',
    '[Samsung Galaxy Nexus]' => 'http://www.example.com/samsung/galaxy-nexus',
    '[Samsung]' => 'http://www.example.com/samsung/',
    '[Apple]' => 'http://www.example.com/apple/'
); 
```

如果是这样，则选项不可行，因为这会显着增加开发内容时的复杂性，因为需要用`[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:22:28.610

这对我来说听起来有点没用，因为您拥有与值相同的键。也许我误解了你的意图。但是你去：这使得键与值（url）相同

```
$newkeywordlist = array_combine (array_values($keywordlist),array_values($keywordlist)); 
```

[http://nl.php.net/manual/en/function.array-combine.php](http://nl.php.net/manual/en/function.array-combine.php)

[http://nl.php.net/manual/en/function.array-values.php](http://nl.php.net/manual/en/function.array-values.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:32:08.797

你可以使用这个：

```
$s = "this is a test";
$arr = array(
   "this" => "THIS",
   "a" => "A"
);

echo str_replace(array_keys($arr), array_values($arr),$s); 
```

输出：

```
THIS is A test 
```

# javascript - 24 小时制时间轴

> ID：11392161
> 
> 赞同：1
> 
> 时间：2012-07-09T09:17:42.310
> 
> 标签：javascript, d3.js

我希望能够使用 24 小时制显示时间。当我生成时间轴时，默认显示为 12 小时制。到目前为止，我还没有找到改变这种情况的方法。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:24:52.620

（没有看到任何代码很难提出确切的答案）

但您可以使用以下内容创建 24 小时时间格式：

```
var format = d3.time.format("%H:%M"); 
```

[在此处查看 d3 时间格式化文档](https://github.com/mbostock/d3/wiki/Time-Formatting#format)

# c# - 这个测试对测试并发问题有意义吗？

> ID：11392162
> 
> 赞同：2
> 
> 时间：2012-07-09T09:17:51.463
> 
> 标签：c#, multithreading, unit-testing, concurrency

我想测试当从多个线程调用一个方法时，没有并发问题。我模拟该方法同时调用 3 次，并在我的缓存中插入 2000 个客户，以确保不存在并发问题。

```
public void Should_Insert_2000_Customers_Using_Concurrency()
{
    var fakeCustomers = InitCustomersFromDb();
    Action insertCustomersFrom_0_to_1000 = new Action(() => 
    {
        Parallel.For(0, 1000, x =>
        {
            CustomerCache.Instance.SetCustomer(x.ToString(), fakeCustomers[0]);
        });

    });
    Action insertCustomersFrom_1000_to_2000 = new Action(() => 
    {
        Parallel.For(1000, 2000, x =>
        {
            CustomerCache.Instance.SetCustomer(x.ToString(), fakeCustomers[0]);
        });
    });
    Action insertCustomersFrom_0_to_2000 = new Action(() => 
    {
        Parallel.For(0, 2000, x =>
        {
            CustomerCache.Instance.SetCustomer(x.ToString(), fakeCustomers[0]);
        });
    });
    List<Task> tasks = new List<Task>();
    tasks.Add(Task.Factory.StartNew(insertCustomersFrom_0_to_1000));
    tasks.Add(Task.Factory.StartNew(insertCustomersFrom_1000_to_2000));
    tasks.Add(Task.Factory.StartNew(insertCustomersFrom_0_to_2000));

    Task.WaitAll(tasks.ToArray());
    var customers = CustomerCache.Instance.GetCustomers();
    Assert.That(customers.Count == 2000);
} 
```

对我运行多个同时`Parallel.For`迭代`CustomerCache`是否能有效地显示任何并发问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:03:16.703

IMO，这种测试并没有透露太多。当然，对于这种特殊情况，很明显结果最终将是正确的，但在一般情况下，您同时在集合中插入项目，测试实际添加的项目数量会产生误导，因为得到你expect 并不排除某处存在数据竞争并且您只是“走运”的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:02:34.783

测试需要测试特定场景。并发测试需要创建一个并发问题，而不是希望一个问题发生。测试应该需要一次运行。如果这在您的代码中很困难，请记住那里的功能代码比可测试的代码多得多。但是......为了降低风险......你想让你的代码可测试。

因此，请确定“并发”的含义并使其发生。要有主见。调用一个方法并模拟它正在调用的内容。当它调用一些告诉你它在关键部分的东西时，然后使用模拟框架来调用另一个调用。

您现在可能想知道“但这意味着多个线程”。线程是一个概念，注入用于创建线程的对象和处理冲突的任何东西。

你一定是在看一两行，然后想……“两个人能做到这一点吗”。测试守卫。

# xaml - ListView 和 GridView WinRT xaml 中的粘性标题

> ID：11392163
> 
> 赞同：5
> 
> 时间：2012-07-09T09:17:53.530
> 
> 标签：xaml, header, windows-runtime, scrollviewer

如何实现 ListView 或 GridView 组的标题不随内容滚动但保持固定直到内容结束并且随后的标题成为焦点的行为。

当您滚动浏览 GridView 项目时，可以在 Windows 8 Release Preview 上的财务应用程序中观察到该行为。

我并不期待整个代码，但我想听听一些想法、链接、代码片段、示例等，这将有助于我入门。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:41:43.373

您也许可以在主列表视图的数据模板中嵌入列表视图。然后，您可以在模板列表视图中嵌入 gridview 和 gridviewcolumns 并以这种方式获取列标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-08T07:11:55.933

将 ListView 包装在 ScrollViewer 中。ListView 的内部 SrollViewer 将不会被使用，您将拥有外部 ScrollViewer 的控制权，这将允许您设置它的`TopHeader`.

```
<ScrollViewer>
    <ScrollViewer.TopHeader>
        ... Your header content here ...
    </ScrollViewer.TopHeader>
    <ListView HorizontalAlignment="Left" VerticalAlignment="Top">
        ... Your body content here ...
    </ListView>
</ScrollViewer> 
```

# ios - 在 iOS 中以编程方式在标签栏上添加图像

> ID：11392165
> 
> 赞同：1
> 
> 时间：2012-07-09T09:17:55.790
> 
> 标签：ios, objective-c, uitabbar

如何在 iOS（Xcode 4.2）中以编程方式在标签栏上添加图像？

[我已经问过问题，但在无法以编程方式在 Xcode 4.2 中设置选项卡栏图像时](https://stackoverflow.com/questions/11385234/could-not-set-tabbar-image-in-xocde-4-2-programmatically)没有得到满意的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:25:34.447

iOS 5 外观 api，

```
UIImage* tabBarBackground = [UIImage imageNamed:@"tabbar.png"];
    [[UITabBar appearance] setBackgroundImage:tabBarBackground]; 
```

另请参阅此[线程](https://stackoverflow.com/questions/7800474/custom-uitabbar-background-image-not-working-in-ios-5)，投票第二高的答案解释了 <5.0 和 =>5.0 两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:25:04.680

在您的 ViewController 中编写此方法：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        self.tabBarItem.image = [UIImage imageNamed:@"image.png"];

    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:28:06.613

试试下面的代码

```
UITabBarItem *tabItem = [[[UITabBarItem tabBar] items] objectAtIndex:yourIndex];
    [tabItem setTitle:@"theTitle"];
    [tabItem setImage:[UIImage imageNamed:@"yourImage.png"]]; 
```

# c# - 无锁计算：如何对其他线程更改的 N 个双数求和？

> ID：11392169
> 
> 赞同：1
> 
> 时间：2012-07-09T09:18:09.607
> 
> 标签：c#, performance, locking

**upd：**让我稍后重新表述我的问题。有N个双数。有 N 个专用线程，每个线程都更新自己的双数（`_cachedProduct`在下面的示例中）。

不知何故，我需要`sum`这些数字，并且我需要`IndexUpdated`在更改任何双数字后尽快引发事件（如果可以在 10 µs 或更短的时间内引发此类事件，那就太好了）。

以下是我尝试执行此任务的方式

================================================

为了计算证券交易所指数，我创建了`private double[] _cachedProduct;`字段。这些字段由许多线程编写

```
 // called from another threads
    public override void InstrumentUpdated(Instrument instrument)
    {
        if (!_initialized)
        {
            if (!Initialize())
            {
                return;
            }
        }
        int instrumentId = instrument.Id;
        OrderBook ob = Program.market.OrderBook(instrument);
        if (ob.MedianOrAskOrBid == null)
        {
            _cachedProduct[instrumentId] = 0;
        }
        else
        {
            _cachedProduct[instrumentId] = ((double) ob.MedianOrAskOrBid)*_ammounts[instrumentId];
        }
    } 
```

`_ammounts`是预初始化的数组，请忽略`Initialize`方法和变量 - 它们可以正常工作。

在循环中，我只是对所有 _cachedProduct 求和，当值发生变化时，我会通知其他人。

```
 Task.Factory.StartNew(() =>
                {
                    while(true)
                    {
                        if (_initialized)
                        {
                            break;
                        }
                    }
                    while (true)
                    {
                        CalculateAndNotify();
                        //Thread.Sleep(5);
                    }
                }
            , TaskCreationOptions.LongRunning);

    protected void CalculateAndNotify()
    {
        var oldValue = Value;
        Calculate();
        if (oldValue != Value)
        {
            NotifyIndexChanged();
        } 
    }

    protected override void Calculate()
    {
        double result = 0;
        for (int i = 0; i < _instrumentIds.Count(); i++)
        {
            int instrumentId = _instrumentIds[i];
            if (_cachedProduct[instrumentId] == 0)
            {
                Value = null;
                return;
            }
            result += _cachedProduct[instrumentId];;
        }
        Value = result;
    } 
```

我必须用它`Interlocked`来更新我的双精度`_cachedProduct` 值，但现在请忽略这个事实，您还看到此代码的其他问题吗？

我是否应该`Calculate`在内部调用方法，`while(true)`以便我`always`使用一个核心而不会延迟。我的机器有 24 个内核，所以我认为这没问题。

但是，如果没有`Thread.Sleep(5)`（评论），我确实看到整个程序的速度明显放缓，我不明白为什么。程序在许多地方执行慢了几十倍。

问题是我是否完全不使用`while(true)`任何锁定的想法是可以的。或者我应该引入一些锁定方法，以便仅`Calculate`在其中一个更新时进行索引`_cachedProduct`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:06:28.297

我认为如果您不使用额外的线程和循环来计算总和，您可能会获得更好的性能和更清晰的代码。每次更改工具时，您都会计算差异并立即更新索引并执行通知

因此，如果一个线程为单个仪器调用 InstrumentUpdated；

```
 change = newvalue - currentvalue;
  // used interlocked here to change the index threadsafe
  StockExchangeSum = Interlocked.Add(ref StockExchangeSum,change);
  NotifyIndexChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:56:52.057

double[] 可以是更复杂的类型吗？WaitHandle.WaitAny 如何比较性能？

如下所示。

```
private Index[] indicies;

public class Index
{
    public WaitHandle Updated =
        new EventWaitHandle(false, EventResetMode.AutoReset);
    public double _value;
    public double Value
    {
        get {return _value;}
        set
        {
            if(_value != value)
            {
                _value = value;
                Updated.Set();
            }
        }
    }
}

TaskFactory.StartNew(() =>
{
    while(true)
    {
        WaitHandle.Any(indicies.Select(i => i.Updated));
        CalculateAndNotify();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:17:19.070

你需要考虑的几点

*   您是否尝试过将计算块与其余代码隔离开来？我在您的计算函数中注意到了这一点：

    for (int i = 0; i < _instrumentIds.Count(); i++)

    _instrumentIds.Count() 调用整个集合的迭代，并且有可能在循环的每次行程中调用它。即您正在执行 _instrumentIds 的 N^2/2 次迭代

*   _instrumentIdsIEnumerable 在此计算操作期间是否被修改？如果是这样，您可能会遇到各种导致错误答案的竞争条件。

*   包含CalculateAndNotify 的任务是调用一次还是调用多次（嵌套）？例如，CalculateAndNotify 中是否有一些操作可能导致它被递归触发？

    如果是这样，您可能会发现同时执行多个计算（使用多个线程直到池耗尽）。您能否在操作开始/结束时包含一些日志记录，并可能计算同时计算的数量来检查这一点？

    如果这是一个问题，您可以包含一些逻辑，从而使 CalculateAndNotify 操作排队，并且在前一个计算操作完成之前无法执行新的计算操作。

# iphone - 用户位置气泡注释更改为自定义注释

> ID：11392175
> 
> 赞同：1
> 
> 时间：2012-07-09T09:18:31.340
> 
> 标签：iphone, objective-c, ios5, xcode4.3

我正在添加一个自定义注释以及用户的当前位置默认气泡注释，但用户位置注释在某个时间不关注地图视图后更改为另一个自定义位置。

我的 viewForAnnotation 方法是：

```
 -(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
 {

     NSString* annotationidentifier = @"customview";
     CustomAnnotationView *customannotationview = (CustomAnnotationView*) [self.mapview dequeueReusableAnnotationViewWithIdentifier:annotationidentifier];

     if([annotation isKindOfClass:[MKUserLocation class]])
     {
         customannotationview = [[CustomAnnotationView alloc] initWithAnnotationWithImage:annotation reuseIdentifier:annotationidentifier annotationviewimage:[UIImage imageNamed:@"location pin28.png"]];

         customannotationview.canShowCallout = YES;
         return customannotationview;

     }

     else if(![annotation isKindOfClass:[MKUserLocation class]] && annotation != _mapview.userLocation && (annotation.coordinate.latitude != _locationmanager.location.coordinate.latitude && annotation.coordinate.longitude != _locationmanager.location.coordinate.longitude))
     {
         customannotationview = [[CustomAnnotationView alloc] initWithAnnotationWithImage:annotation reuseIdentifier:annotationidentifier annotationviewimage:[UIImage imageNamed:@"image1.png"]];

         return customannotationview;

     }
     return customannotationview;

 } 
```

我已经在自定义注释中添加了条件，但是如果用户位置在某些时候失去焦点，它仍然会在一段时间后更改为 image1.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:56:07.167

我相信您的问题是您的用户注释和位置注释都使用相同的标识符。发生的情况是，当您滚动地图时，您的注释会被重用（与表格重用单元格的方式相同），最终，您的一个位置注释将用于您的用户注释。

尝试为注释提供不同的标识符，或者，如果您有少量位置，请删除重用代码，这应该可以解决它。

# android - 一个 Parcel 可以存储多少数据？

> ID：11392176
> 
> 赞同：0
> 
> 时间：2012-07-09T09:18:32.827
> 
> 标签：android, out-of-memory, parcelable, parcel

`Parcelables`我在 Activity 之间共享信息时遇到了问题。我对实施没有问题，但在某些手机上的行为。看来，里面存储的信息实在是太多了。当对象被解组时，这会导致 MemoryExceptions 抛出。我在文档中找不到任何类型的内存限制。如果给定的信息足够小，可以在将其写入a`Parcel`之前将它们写入/从 a 中写入/读取它们，那么找出的最佳方法是什么？`Parcelable``Parcel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:41:05.143

我猜 <= Integer.MAX_VALUE

```
/**
 * Returns the total amount of data contained in the parcel.
 */
public final native int dataSize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:26:02.530

您在包裹中存储什么类型的数据？我注意到，如果你搞砸了（即不确保以相同的方式存储和检索数据），你最终会得到非常奇怪的结果，有些甚至会导致你的应用程序抛出 OutOfMemoryException。

TLDR；确保您以相同的顺序读取和写入包裹。

# java - 添加新记录时错误更新 ArrayList 记录

> ID：11392179
> 
> 赞同：0
> 
> 时间：2012-07-09T09:18:54.097
> 
> 标签：java, arraylist

我正在尝试创建一个任务表并操作其内容。我正在处理一个我不理解的错误，非常感谢您的帮助。我对问题的长度表示赞同，但试图带来尽可能多的细节。

类**tasksRepository将在类****taskDef**中构造的记录存储为数组列表。setTask () 和**getTask**方法包含 ArrayList 类的 add() 和 get() 方法**。**

 **taskDef对象的参数是使用本地 set 方法创建的**。**以下是这种方法的一个示例：如果传递的参数与存储的值不同，则将其存储值并将事件添加到日志记录中。在任何情况下，都会重新调整成功标志。

```
public static Boolean setProjectNumber(String projectNumberI)
{ // All the 
    if (projectNumberI != projectNumber)
    {
        projectNumber = projectNumberI;
        logAccumulator = logAccumulator + "; project number (" + projectNumberI + ")";
    }
    return true;
}

private static void setLog ()
{ // When all the parameters are set, the log parameter is updated with time tag
    String t = formatterFull.format(GregorianCalendar.getInstance().getTime());
    log = log + "\n" + t + ": " + logAccumulator;       
} 
```

类**tasksTableProcessing**包含任务操作。以下包含构造函数。它以更简单的形式开始，但在调查期间我改变了它。类**taskStatus**是返回字符串的 ENUM。**getLog** ()方法只是简单地返回日志字段

```
public tasksTableProcessing () 
{ // constructor. Creates the tableRepository object with test records
    tasksRepository.clearDb ();

    taskDef task = null; 
    task = new taskDef ("P1000", "O1", taskStatus.started (), "1", "false", "false");
    tasksRepository.addTask (task);
    System.out.println("\nLog 0: \n" + tasksRepository.getTask(0).getLog());

    task = null;
    task = new taskDef ("P1000", "O1", taskStatus.started(), "2", "false", "true");
    tasksRepository.addTask (task);
    System.out.println("\nLog 1: \n" + tasksRepository.getTask(1).getLog());

    task = null;
    task = new taskDef ("P2000", "O2", "closed", "63", "true", "false");
    tasksRepository.addTask (task);
    System.out.println("\nLog 2: \n" + tasksRepository.getTask(2).getLog());

    task = null;
    task = new taskDef ("P2000", "O2", "closed", "64", "true", "true");
    tasksRepository.addTask (task);
    System.out.println("\nLog 3: \n" + tasksRepository.getTask(3).getLog());
} 
```

以下是日志。它表明，当引入新记录时，所有旧记录都会更新。

> > 日志 0：
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）
> > 
> > 日志 1：
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）；任务（任务 2）；任务 ID (2); 交货标志（真）
> > 
> > 日志 2：
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）；任务（任务 2）；任务 ID (2); 交货标志（真）
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）；任务（任务 2）；任务 ID (2); 交货标志（真）；项目编号（P2000）；任务（任务 63）；任务 ID (63)；所有者（O2）；状态（关闭）；关键路径（真）；交货标志（假）
> > 
> > 日志 3：
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）；任务（任务 2）；任务 ID (2); 交货标志（真）
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）；任务（任务 2）；任务 ID (2); 交货标志（真）；项目编号（P2000）；任务（任务 63）；任务 ID (63)；所有者（O2）；状态（关闭）；关键路径（真）；交货标志（假）
> > 
> > 09/07/2012 10:21: ; 项目编号（P1000）；任务（任务 1）；任务 ID (1); 所有者（O1）；状态（开始）；任务（任务 2）；任务 ID (2); 交货标志（真）；项目编号（P2000）；任务（任务 63）；任务 ID (63)；所有者（O2）；状态（关闭）；关键路径（真）；交货标志（假）；任务（任务 64）；任务 ID (64); 交货标志（真）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:28:52.730

Given the method signatures, you store the members of your TaskDefs as static fields, rather than instance fields. A static field is a field of the class TaskDef itself, and not a field of a specific TaskDef instance.

Read the Java tutorial about [instance and class members](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html).**

# php - 在输入文件解析中通过删除 eval() 来保护片段

> ID：11392181
> 
> 赞同：0
> 
> 时间：2012-07-09T09:19:04.653
> 
> 标签：php, parsing, eval, php-5.3

我有一个模板式系统，它可以加载*批量模板*（一个文件中的多个模板条目）并相应地存储它们。问题是当前的方法使用`preg_replace()`and`eval`并且它真的很容易出错。这个错误的一个例子可能是一个放置不正确的字符，它破坏了正则表达式并产生了一个解析错误：

```
Parse error: syntax error, unexpected '<' in tsys.php: eval()'d code 
```

执行此操作的代码如下：

```
// Escaping
$this->_buffer = str_replace( array('\\', '\'', "\n"), array('\\\\', '\\\'', ''), $this->_buffer);

// Regular-expression chunk up the input string to evaluative code
$this->_buffer = preg_replace('#<!--- BEGIN (.*?) -->(.*?)<!--- END (.*?) -->#', "\n" . '$this->_tstack[\'\\1\'] = \'\\2\';', $this->_buffer);

// Run the previously created PHP code
eval($this->_buffer); 
```

*此批量模板*的示例文件如下所示：

```
<!--- BEGIN foo -->
<p>Some HTML code</p>
<!--- END foo -->

<!--- BEGIN bar -->
<h1>Some other HTML code</h1>
<!--- END bar --> 
```

在此输入上运行代码时，`$this->_tstack`将给出两个元素：

```
array (
  'foo' => "<p>Some HTML code</p>",
  'bar' => "<h1>Some other HTML code</h1>",
); 
```

这是预期的行为，但我正在寻找一种我们可以放弃`eval`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:53:34.313

你可以用它`preg_match_all`来做到这一点：

```
// Remove CR and NL
$buffer = str_replace(array("\r", "\n"), '', $this->_buffer);

// Grab interesting parts
$matches = array();
preg_match_all('/\?\?\? BOT (?P<group>[^ ]+) \?\?\?(?P<content>.*)!!! EOT \1 !!!/', $buffer, $matches);

// Build the stack
$stack = array_combine(array_values($matches['group']), array_values($matches['content'])); 
```

将输出：

```
Array
(
    [foo] => <p>Some HTML code</p>
    [bar] => <h1>Some other HTML code</h1>
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:50:09.223

好吧，这就去。给定`$template`包含：

```
<!--- BEGIN foo -->
    <p>Some HTML code</p>
<!--- END foo -->

<!--- BEGIN bar -->
    <h1>Some other HTML code</h1>
<!--- END bar --> 
```

然后：

```
$values = array();
$pattern = '#<!--- BEGIN (?P<key>\S+) -->(?P<value>.+?)<!--- END (?P=key) -->#si';
if ( preg_match_all($pattern, $template, $matches, PREG_SET_ORDER) ) {
    foreach ($matches as $match) {
        $values[$match['key']] = trim($match['value']);
    }
}
var_dump($values); 
```

结果是：

```
array(2) {
  ["foo"]=>
  string(21) "<p>Some HTML code</p>"
  ["bar"]=>
  string(29) "<h1>Some other HTML code</h1>"
} 
```

*如果保留空白很重要，请删除`trim()`.*

# android - 如何以编程方式检查 Android 中是否安装了应用程序？

> ID：11392183
> 
> 赞同：167
> 
> 时间：2012-07-09T09:19:06.380
> 
> 标签：android, apk

我们以编程方式安装了应用程序。

1.  如果应用程序已安装在设备中，则应用程序会自动打开。
2.  否则安装特定的应用程序。

引导我。我不知道。谢谢。

* * *

## 回答 #1

> 赞同：338
> 
> 时间：2012-07-09T09:25:20.230

试试这个：

```
public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Add respective layout
        setContentView(R.layout.main_activity);

        // Use package name which we want to check
        boolean isAppInstalled = appInstalledOrNot("com.check.application");  

        if(isAppInstalled) {
            //This intent will help you to launch if the package is already installed
            Intent LaunchIntent = getPackageManager()
                .getLaunchIntentForPackage("com.check.application");
            startActivity(LaunchIntent);

            Log.i("SampleLog", "Application is already installed.");          
        } else {
            // Do whatever we want to do if application not installed
            // For example, Redirect to play store

            Log.i("SampleLog", "Application is not currently installed.");
        }
    }

    private boolean appInstalledOrNot(String uri) {
        PackageManager pm = getPackageManager();
        try {
            pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
            return true;
        } catch (PackageManager.NameNotFoundException e) {
        }

        return false;
    }

} 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2015-01-27T16:27:07.503

比接受的答案更清洁的解决方案（基于[这个问题](https://stackoverflow.com/q/6711295/56285)）：

```
public static boolean isAppInstalled(Context context, String packageName) {
    try {
        context.getPackageManager().getApplicationInfo(packageName, 0);
        return true;
    }
    catch (PackageManager.NameNotFoundException e) {
        return false;
    }
} 
```

我选择将它作为静态实用程序放在帮助类中。使用示例：

```
boolean whatsappFound = AndroidUtils.isAppInstalled(context, "com.whatsapp"); 
```

[这个答案](https://stackoverflow.com/a/11753070/808808)显示了如果应用程序丢失，如何从 Play 商店获取应用程序，但需要注意没有 Play 商店的设备。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-07-10T03:10:54.630

上面的代码对我不起作用。以下方法有效。

使用适当的信息创建一个 Intent 对象，然后使用以下函数检查 Intent 是否可调用：

```
private boolean isCallable(Intent intent) {  
        List<ResolveInfo> list = getPackageManager().queryIntentActivities(intent,   
        PackageManager.MATCH_DEFAULT_ONLY);  
        return list.size() > 0;  
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-06-08T11:41:56.390

如果您知道包名称，则无需使用 try-catch 块或迭代一堆包即可：

```
public static boolean isPackageInstalled(Context context, String packageName) {
    final PackageManager packageManager = context.getPackageManager();
    Intent intent = packageManager.getLaunchIntentForPackage(packageName);
    if (intent == null) {
        return false;
    }
    List<ResolveInfo> list = packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    return !list.isEmpty();
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-05-20T21:40:46.690

此代码检查以确保应用程序已安装，但也检查以确保它已启用。

```
private boolean isAppInstalled(String packageName) {
    PackageManager pm = getPackageManager();
    try {
        pm.getPackageInfo(packageName, PackageManager.GET_ACTIVITIES);
        return pm.getApplicationInfo(packageName, 0).enabled;
    }
    catch (PackageManager.NameNotFoundException e) {
        e.printStackTrace();
        return false;
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-01-16T05:59:16.117

> 使用 kotlin 检查 Android 中是否安装了应用程序。

创建 kotlin 扩展。

```
fun PackageManager.isAppInstalled(packageName: String): Boolean = try {
        getApplicationInfo(packageName, PackageManager.GET_META_DATA)
        true
    } catch (e: Exception) {
        false
    } 
```

现在，可以检查应用程序是否已安装

```
if (packageManager.isAppInstalled("AppPackageName")) {
    // App is installed
}else{
    // App is not installed
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-12-27T20:02:20.110

使用**Kotlin的更简单的实现**

```
fun PackageManager.isAppInstalled(packageName: String): Boolean =
        getInstalledApplications(PackageManager.GET_META_DATA)
                .firstOrNull { it.packageName == packageName } != null 
```

并这样称呼它（寻找 Spotify 应用程序）：

```
packageManager.isAppInstalled("com.spotify.music") 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-04-09T14:10:41.337

比接受的答案（基于[AndroidRate Library](https://github.com/Vorlonsoft/AndroidRate) ）更清洁的解决方案（没有 try-catch ）：

```
public static boolean isPackageExists(@NonNull final Context context, @NonNull final String targetPackage) {
    List<ApplicationInfo> packages = context.getPackageManager().getInstalledApplications(0);
    for (ApplicationInfo packageInfo : packages) {
        if (targetPackage.equals(packageInfo.packageName)) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-10-09T13:52:26.663

我认为使用 try/catch 模式对性能来说不是很好。我建议使用这个：

```
public static boolean appInstalledOrNot(Context context, String uri) {
    PackageManager pm = context.getPackageManager();
    List<PackageInfo> packageInfoList = pm.getInstalledPackages(PackageManager.GET_ACTIVITIES);
    if (packageInfoList != null) {
        for (PackageInfo packageInfo : packageInfoList) {
            String packageName = packageInfo.packageName;
            if (packageName != null && packageName.equals(uri)) {
                return true;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-09-04T07:24:37.783

# 试试这个

> 此代码用于检查是否安装了带有包名称的应用程序的天气，如果没有，它将打开您的应用程序的 Playstore 链接，否则您已安装的应用程序

```
String your_apppackagename="com.app.testing";
    PackageManager packageManager = getPackageManager();
    ApplicationInfo applicationInfo = null;
    try {
        applicationInfo = packageManager.getApplicationInfo(your_apppackagename, 0);
    } catch (PackageManager.NameNotFoundException e) {
        e.printStackTrace();
    }
    if (applicationInfo == null) {
        // not installed it will open your app directly on playstore
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/details?id=" + your_apppackagename)));
    } else {
        // Installed
        Intent LaunchIntent = packageManager.getLaunchIntentForPackage(your_apppackagename);
        startActivity( LaunchIntent );
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-26T17:50:12.327

所有答案仅检查是否安装了某些应用程序。但是，众所周知，一个应用程序可以安装但被用户禁用，无法使用。

因此，**此解决方案同时检查两者。即，安装并启用的应用程序**。

```
public static boolean isPackageInstalled(String packageName, PackageManager packageManager) {
     try {
          return packageManager.getApplicationInfo(packageName, 0).enabled;
     }
     catch (PackageManager.NameNotFoundException e) {
          return false;
     }
} 
```

调用方法`isPackageInstalled()`：

```
boolean isAppInstalled = isPackageInstalled("com.android.app" , this.getPackageManager()); 
```

现在，使用布尔变量`isAppInstalled`并做任何你想做的事情。

```
if(isAppInstalled ) {
    /* do whatever you want */
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-01T12:44:05.650

@Egemen Hamutçu 在 kotlin B-) 中的回答

```
 private fun isAppInstalled(context: Context, uri: String): Boolean {
        val packageInfoList = context.packageManager.getInstalledPackages(PackageManager.GET_ACTIVITIES)
        return packageInfoList.asSequence().filter { it?.packageName == uri }.any()
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-03T10:46:17.253

对其他问题的一个很酷的答案。例如，如果您不想区分“com.myapp.debug”和“com.myapp.release”！

```
public static boolean isAppInstalled(final Context context, final String packageName) {
    final List<ApplicationInfo> appsInfo = context.getPackageManager().getInstalledApplications(0);
    for (final ApplicationInfo appInfo : appsInfo) {
        if (appInfo.packageName.contains(packageName)) return true;
    }
    return false;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-18T15:19:23.457

使用 Kotlin suger 更好：

```
 private fun isSomePackageInstalled(context: Context, packageName: String): Boolean {

    val packageManager = context.packageManager

    return runCatching { packageManager.getPackageInfo(packageName, 0) }.isSuccess
  } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-15T07:36:45.423

您可以使用 Kotlin 扩展来做到这一点：

```
fun Context.getInstalledPackages(): List<String> {
    val packagesList = mutableListOf<String>()
    packageManager.getInstalledPackages(0).forEach {
        if ( it.applicationInfo.sourceDir.startsWith("/data/app/") && it.versionName != null)
            packagesList.add(it.packageName)
    }
    return packagesList
}

fun Context.isInDevice(packageName: String): Boolean {
    return getInstalledPackages().contains(packageName)
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-26T21:47:35.857

**Android 11 更新**
您必须在清单中指定要搜索的确切捆绑包 ID。

facebook 和 whatsapp 的示例：

在“应用程序”上方的清单内（权限所在）

```
<queries>
    <package android:name="com.whatsapp" />
    <package android:name="com.facebook.katana" />
</queries> 
```

这将允许您检查是否安装了 facebook 和 whatsapp，否则您将始终得到错误的检查。

关于该主题的进一步阅读：
[https ://medium.com/androiddevelopers/package-visibility-in-android-11-cc857f221cd9](https://medium.com/androiddevelopers/package-visibility-in-android-11-cc857f221cd9)

# java - 我想在没有测试框架的情况下使用 selenium RC

> ID：11392185
> 
> 赞同：0
> 
> 时间：2012-07-09T09:19:31.627
> 
> 标签：java, selenium

我想在没有 TestCase、Junit 或 SeleneseTestCase 的情况下使用 selenium RC。

我想编写一个代码来执行我的网站自动化。我不想使用任何来自 ework 链接 testCase 或 SeleneseTestCase 的测试。

我只想编写代码并运行我的代码而无需任何测试用例。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:28:52.043

You can try the Selenium Webdriver API [http://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html). It does not force you to use JUnit or the like. It simply starts a browser and executes your commands. You can still access page contents and examine them if you like.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T07:06:37.597

## 是的你可以！:D

当我无聊时，我通常使用 Selenium 在 Twitter 上发推文或在 Facebook 上发帖。我仍然对 Selenium 的功能感到惊讶。但在某种程度上，我们并没有充分利用 Selenium 的功能。

仅供参考，您可以在 Selenium RC 和 WebDriver 中做到这一点：D

# javascript - 如何在javascript中检查日期是否在本周或当月或下个月？

> ID：11392186
> 
> 赞同：5
> 
> 时间：2012-07-09T09:19:36.553
> 
> 标签：javascript, jquery, date

我有一些朋友的生日，想将它们分开如下：

*   本周内的生日（从当天开始的本周剩余天数内）。
*   当月内的生日（从当天开始的当月剩余天数内）。
*   下个月内的生日。

所以我想知道如何在javascript中测试每个日期，看看它是否在当前周/当前月/下个月的剩余天数内。

注意：假设我有 m/d/Y(06/29/1990) 格式的日期。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T10:18:30.407

将您的日期和当前时间转换为[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)对象并将其用于比较。一些干代码：

```
var now = new Date()
if (
   (check.getFullYear() == now.getFullYear()) &&
   (check.getMonth() == now.getMonth()) &&
   (check.getDate() >= now.getDate())
) {
   // remanining days in current month and today. Use > if you don't need today.
}

var nextMonth = now.getMonth() + 1
var nextYear = now.getFullYear()
if (nextMonth == 12) {
   nextMonth = 0
   nextYear++
}
if (
   (check.getFullYear() == nextYear) &&
   (check.getMonth() == nextMonth)
) {
   // any day in next month. Doesn't include current month remaining days.
}

var now = new Date()
now.setHours(12)
now.setMinutes(0)
now.setSeconds(0)
now.setMilliseconds(0)
var end_of_week = new Date(now.getTime() + (6 - now.getDay()) * 24*60*60*1000 )
end_of_week.setHours(23)
end_of_week.setMinutes(59)
end_of_week.setSeconds(59) // gee, bye-bye leap second
if ( check >=now && check <= end_of_week) {
   // between now and end of week
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:00:19.170

使用解析日期的代码是

```
var selecteddate = '07/29/1990';
var datestr = selecteddate.split('/');

var month = datestr[0];
var day = datestr[1]; 
var year = datestr[2];

var currentdate = new Date();
var cur_month = currentdate.getMonth() + 1;
var cur_day =currentdate.getDate();
var cur_year =currentdate.getFullYear();

if(cur_month==month && day >= cur_day)
{
 alert("in this month");
}

   else
   {
  alert("not in this month");
   }    ​ 
```

# string - 如何在 Bash 中将字符串从大写转换为小写？

> ID：11392189
> 
> 赞同：115
> 
> 时间：2012-07-09T09:19:50.690
> 
> 标签：string, bash, shell, uppercase, lowercase

我一直在寻找一种将字符串值从大写转换为小写的方法。所有的搜索结果都显示了使用`tr`命令的方法。

该`tr`命令的问题是，只有当我使用带有 echo 语句的命令时才能获得结果。例如：

```
y="HELLO"
echo $y| tr '[:upper:]' '[:lower:]' 
```

以上工作并导致“你好”，但我需要将结果分配给一个变量，如下所示：

```
y="HELLO"
val=$y| tr '[:upper:]' '[:lower:]'
string=$val world 
```

当像上面那样分配值时，它给了我一个空的结果。

PS：我的 Bash 版本是 3.1.17

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-07-09T09:24:22.687

如果您使用的是 bash 4，则可以使用以下方法：

```
x="HELLO"
echo $x  # HELLO

y=${x,,}
echo $y  # hello

z=${y^^}
echo $z  # HELLO 
```

仅使用一个`,`or`^`来制作第一个字母`lowercase`or `uppercase`。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-07-09T09:38:42.100

实现代码的正确方法是

```
y="HELLO"
val=$(echo "$y" | tr '[:upper:]' '[:lower:]')
string="$val world" 
```

这使用`$(...)`符号来捕获变量中命令的输出。还要注意变量周围的引号`string`- 您需要它们来表示`$val`并且`world`是要分配给的单一事物`string`。

如果您有`bash`4.0 或更高版本，更高效和优雅的方法是使用`bash`内置字符串操作：

```
y="HELLO"
string="${y,,} world" 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-12-15T09:17:46.547

请注意，`tr`它只能处理纯 ASCII，使得任何`tr`基于 - 的解决方案在面对国际字符时都会失败。

基于 bash 4 的`${x,,}`解决方案也是如此。

`awk`另一方面，该工具甚至可以正确支持 UTF-8 / 多字节输入。

```
y="HELLO"
val=$(echo "$y" | awk '{print tolower($0)}')
string="$val world" 
```

回答由[liborw](https://stackoverflow.com/a/3270937/60281)提供。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-07-09T09:22:54.340

为什么不执行反引号？

```
 x=`echo "$y" | tr '[:upper:]' '[:lower:]'` 
```

这会将反引号中的命令结果分配给变量`x`。（即它不是特定的，`tr`但它是 shell 脚本的常见模式/解决方案）

您可以使用`$(..)`而不是反引号。请参阅[此处](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)了解更多信息。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-02-18T16:32:39.637

我在 Ubuntu 14.04 上，使用 Bash 版本 4.3.11。但是，我仍然没有内置字符串操作的乐趣`${y,,}`

这是我在脚本中用来强制大写的：

```
CAPITALIZED=`echo "${y}" | tr '[a-z]' '[A-Z]'` 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-11-06T17:29:28.637

如果您使用 declare (old: typeset) 定义变量，那么您可以在整个变量使用过程中说明值的大小写。

```
$ declare -u FOO=AbCxxx
$ echo $FOO
ABCXXX 
```

`"-l"`lc。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-09-26T18:16:34.097

这对我有用。谢谢罗迪！

```
y="HELLO"
val=$(echo $y | tr '[:upper:]' '[:lower:]')
string="$val world" 
```

一个小的修改，如果你在变量旁边使用下划线你需要将变量名封装在{}中。

```
string="${val}_world" 
```

# delphi - 使用 OLE 从 Delphi XE 调用带有字符串参数的 MATLAB 函数

> ID：11392191
> 
> 赞同：0
> 
> 时间：2012-07-09T09:19:54.933
> 
> 标签：delphi, matlab, delphi-xe, ole

我正在尝试使用[OLE](http://en.wikipedia.org/wiki/Object_Linking_and_Embedding)对象从[Delphi XE调用 MATLAB 函数。](http://en.wikipedia.org/wiki/Embarcadero_Delphi#Versions)该函数有两个字符串参数。当我在 MATLAB (2008a) 本身中尝试 MATLAB 代码时，一切正常，但由于某种原因，我无法从 Delphi XE 获取 MATLAB 的输入参数。我如何实现这一目标？

正如您在我的代码中看到的那样，我还尝试在工作区中设置变量，这对我来说是一种可以接受的解决方法。

```
function Matlab_DoIt(const aInput, aOutput: string): string;
var
    vMatlab, vInput: Variant;
begin
    vInput := aInput;
    vMatlab := CreateOleObject('matlab.application');
    vMatlab.visible := 1;
    vMatlab.Execute('cd c:\localdata\LSCT\Matlab');
    // vMatlab.Execute('input=' + aInput); // nothing happens
    // vMatlab.PutCharArray('input', 'base', aInput); // nothing happens
    // vMatlab.PutCharArray('input', 'base', vInput); // bad variable type error
    // vMatlab.PutCharArray('input', 'global', aInput); // nothing happens
    // vMatlab.PutWorkspaceData('input', 'base', aInput); // nothing happens
    // vMatlab.PutWorkspaceData('input', 'base', vInput); // bad variable type error
    // vMatlab.PutWorkspaceData('input', 'global', aInput); // nothing happens
    // vMatlab.Execute(Format('LSCT_tool_run(%s,%s)', [aInput, aOutput])); // nothing happens
    // vMatlab.Execute(Format('LSCT_tool_run(''%s'',''%s'')', [aInput, aOutput])); // nothing happens
    // vMatlab.Execute(Format('LSCT_tool_run("%s","%s")', [aInput, aOutput])); // nothing happens
    vMatlab.Execute('LSCT_tool_run'); // creates the file, but it is empty
end; 
```

MATLAB 代码写入一个包含两个参数的 txt 文件：

```
function LSCT_tool_run(input_path, output_path)
    diary ([c:\localdata\LSCT\Matlab\MyFile.txt]);
    diary on;
    % fprintf(input); Only when I try to set the input variable.
    fprintf(inpput_path);
    fprintf(output_path);
    diary off; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:06:43.593

在与 Mathworks 协商后，事实证明这是不可能的。在这方面，2012 版将再次可用。

# perl - HTTP::Proxy，在服务器端检查传输是否成功

> ID：11392193
> 
> 赞同：2
> 
> 时间：2012-07-09T09:20:00.003
> 
> 标签：perl, proxy

我正在使用[HTTP::Proxy](http://search.cpan.org/~book/HTTP-Proxy-0.25/lib/HTTP/Proxy.pm)来检查客户端-服务器应用程序的行为。我已经制作了一个过滤器来向客户端提供任意内容。

我要测试的应用程序是[cvmfs](http://cernvm.cern.ch/portal/filesystem)。它是一个使用标准 http 连接挂载远程文件系统的软件。我们需要检查当服务器发送大于 cvmfs 缓存分区的文件时会发生什么。我们想检查cvmfs是否需要在丢弃它之前下载整个文件，或者它是否在清楚文件错误后立即停止。

客户端需要一个 10mb 的文件，而服务器将发送一个 100mb 的文件。当然，客户端会识别假文件，不会挂载存储库。我想检查客户端是否在 10mb 后停止加载，或者是否在关闭连接之前加载整个文件，我必须在服务器端检查它。

因此，一旦服务器开始发送文件（这项工作将由 HTTP::Proxy 完成，它将拦截调用并提供假文件），我想知道客户端何时停止下载它。

有没有办法做到这一点？知道转移是否成功就足够了，尽管直接检查转移了多少 mb 可能很有用。

编辑

这是我用来记录传输数据的过滤器（我正在使用建议的两种代理方法），它可以满足我的需求。不幸的是，它仅适用于纯文本文件。我怎样才能为可执行文件完成相同的操作（我正在导出可执行文件）？

```
package Filters::RecordTransfer;

######################################
# This filter is intended to be used for response
######################################

use strict;
use warnings;
use HTTP::Proxy::BodyFilter::simple;

our $body = HTTP::Proxy::BodyFilter::simple->new (
    sub {
        my ( $self, $dataref, $message, $protocol, $buffer ) = @_;
        my $record_file = '/tmp/transferred_data';

        if (-e $record_file) {
            my $fh;
            open($fh, '<', $record_file);
            my $actual_size = $fh->getline;
            close($fh);
            my $new_size = $actual_size + (length($$dataref));
            open($fh, '>', $record_file);
            print $fh $new_size;
            close($fh);
        }
        else {
            open (my $fh, '>', $record_file);
            print $fh length($$dataref);
            close($fh);
        }
    }
);

1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:29:25.300

您以错误的方式读取文件。您必须设置适当的[IO 层](http://p3rl.org/PerlIO)。

```
use File::Slurp qw(read_file);
$$dataref = read_file '/tmp/cvmfs.faulty', { binmode => ':raw' }; 
```

* * *

当响应完成时，`$count`变量将包含经过过滤器的八位字节数。

```
use HTTP::Proxy qw();
use HTTP::Proxy::BodyFilter::simple qw();

my $count;
my $body = HTTP::Proxy::BodyFilter::simple->new(sub {
    $count += length ${ $_[1] };
    warn $count;
});

my $proxy = HTTP::Proxy->new(port => 3128);
$proxy->push_filter(response => $body, mime => '*/*');
$proxy->start; 
```

# ios - 当前应用的新应用内购买产品

> ID：11392194
> 
> 赞同：1
> 
> 时间：2012-07-09T09:20:07.163
> 
> 标签：ios, in-app-purchase

我正在为内容下载进行应用购买。

产品列表也会从服务器和产品 ID 返回。我不清楚一件事：

我可以在不更新应用的情况下添加新的应用内购买吗？因为产品列表将来自服务器端。

我只想添加来自 iTunesConnect 的应用内购买和服务器端的产品列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:05:01.493

是的，您可以在不更新应用的情况下添加新的应用内购买。

您需要将所有产品添加到 iTunes 连接并确保获得 Apple 批准。

当您退回产品时，如使用相同的 IAP ID 保留它。

# php - 从字段中获取最大值和最小值

> ID：11392195
> 
> 赞同：0
> 
> 时间：2012-07-09T09:20:08.737
> 
> 标签：php, mysql, sql

我有两张桌子：

```
First:
id | title 
1  | aaa
2  | bbb
3  | ccc

Second:
id | first_id | one | two | three | four
1  |    1     | 3   | 1   | 4     | 6
2  |    2     | 4   | 4   | 1     | 2
3  |    3     | 1   | 2   | 3     | 4 
```

我想展示：

```
id | title | min | max 
1  | aaa   |  1  | 6
2  | bbb   |  1  | 4
3  | ccc   |  1  | 4 
```

这可以用 SQL 实现吗？如何？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:21:33.513

**规范化您的数据库**。使用您当前的设置，这并非不可能，但绝对不推荐。

-edit-
如果必须，您可以使用LEAST [()](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_least)和[GREATEST()](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_greatest)

-edit2-

```
SELECT 
    a.id,
    a.title,
    LEAST(b.one,b.two,b.three,b.four) min,
    GREATEST(b.one,b.two,b.three,b.four) max
FROM first a
INNER JOIN second b ON a.id=b.first_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:25:27.550

阅读汤姆的回答，这将是最好的做法。

无论如何，让我感到羞耻：

```
SELECT f.id, f.title
 MIN(LEAST(s.one, s.two, s.three, s.four)) as min,
 MAX(GREATEST(s.one, s.two, s.three, s.four)) as max
 FROM First f
 INNER JOIN Second s on f.id = s.first_id
 GROUP BY f.id, f.title 
```

如果 Second 不能有许多具有相同 first_id 的行，则可以删除 MIN 和 MAX（以及 Group by）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:27:07.347

您可以使用`UNION`. 试试这个：

```
SELECT a.id, a.title, MIN(b.c) `Min`, MAX(b.c) `Max`
FROM First a INNER JOIN 
(
    SELECT first_id, `one` c FROM `Second`
       UNION
    SELECT first_id, `two` c FROM `Second`
       UNION
    SELECT first_id, `three` c FROM `Second`
       UNION
    SELECT first_id, `four` c FROM `Second`
) b on a.id = b.First_ID
GROUP BY a.id 
```

**[在此处查看演示](http://sqlfiddle.com/#!2/85a68/1)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T09:35:20.987

```
select first_id,F.title ,MIN(num) [min],MAX(num) [max] from (
select first_id,[one] [num]from [Second]  union all
select first_id,[two] [num]from [Second]  union all
select first_id,[three] [num]from [Second]  union all
select first_id,[four] [num] from [Second] )[Second]
join [First] F
on Id=first_id
group by first_id,F.title 
```

# sql - 具有两个 id 列的动态数据透视表

> ID：11392199
> 
> 赞同：0
> 
> 时间：2012-07-09T09:21:00.457
> 
> 标签：sql, sql-server, sql-server-2008, pivot

这可能很简单，但我只是没有看到它。感谢您的帮助。我在 MS SQLServer 中有一个看起来像这样的表

```
CustomerID     Time                         ItemID
1              2008-10-07 06:32:53:00.000    87432
1              2008-10-07 06:32:53:00.000    26413
2              2010-06-23 03:45:10:00.000    6312
2              2011-09-14 07:36:03:00.000    87432
2              2011-09-14 07:36:03:00.000    87432 
```

我想最终得到一个表格，其中包含每个客户、时间戳和在该时间戳期间购买的物品的数量，看起来像这样

```
CustomerID    Time                         87432  26413   6312
1             2008-10-07 06:32:53:00.000    1       1       0
2             2010-06-23 03:45:10:00.000    0       0       1
2             2011-09-14 07:36:03:00.000    2       0       0 
```

在源表中，时间和 itemID 是可变的（并且很多），所以我认为动态枢轴可以解决问题。这可能与枢轴有关吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:30:54.530

您可以使用动态[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)执行此操作。这将计算`ItemId`任意数量的`Time`s 的数量。

请参阅[带有 Demo 的 SQL Fiddle](http://sqlfiddle.com/#!3/d2fef/1)。这个演示留下了`varchar`你所说的时间。但是，如果数据也是如此，这将起作用`datetime`。

由于您想要`time`在最终结果中，那么当您`select`列时，您将需要添加`time`列两次。我打电话给它`time1`和`time`。这使您可以`time1`在 PIVOT 中进行聚合，并且仍然有一个`time`列用于您的最终产品。

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(itemid) 
                    from temp
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT customerid, [time], ' + @cols + ' from 
             (
                select customerid, [time] as time1, [time] as [time], itemid
                from temp
            ) x
            pivot 
            (
                count([time1])
                for itemid in (' + @cols + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T16:57:19.520

## 方法 #1 -**[单击此处查看演示](http://sqlfiddle.com/#!3/47cbf/2)**

```
Declare @ItemIDs varchar(1000) = ''
Declare @Query varchar(8000) = ''

Select @ItemIDs = ISNULL(QuoteName(Convert(varchar, ItemID)) + ',', '') 
+ @ItemIDs 
From
(
    Select distinct ItemID From #MyTable
)K

SET @ItemIDs = SUBSTRING(@ItemIDs,0,len(@ItemIDs))

SET @Query = 'Select CustomerID, [Time],' + 
@ItemIDs + ' From 
(
    Select CustomerID, [Time], ItemID from #MyTable
)K Pivot
(
    count(ItemID) FOR ItemID IN (' + @ItemIDs + ')
) AS pvt'

EXEC(@Query) 
```

* * *

## 方法 #2 - **[单击此处查看演示](http://sqlfiddle.com/#!3/47cbf/1)**

```
Select CustomerID, [Time], [87432] as [87432], 
[26413] as [26413], [6312] as [6312] From 
(
    Select CustomerID, [Time], ItemID from #MyTable
)K Pivot
(
    count(ItemID) FOR ItemID IN ([87432] , [26413],[6312])
) AS pvt 
```

# tridion - 无法让核心服务客户端工作

> ID：11392207
> 
> 赞同：1
> 
> 时间：2012-07-09T09:21:40.753
> 
> 标签：tridion, tridion-2011

我正在尝试使用核心服务发布组件，为此，我刚刚创建了一个控制台应用程序，并从服务器执行。我收到以下错误消息。

> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集“Tridion.ContentManager.CoreService.Client，Version=6.1.0.996，Culture=neutral，PublicKeyToken=ddfc895746e5ee6b”或其依赖项之一。该系统找不到指定的文件。

以下是我的代码，任何人都可以遇到这个问题吗？

```
static void Main(string[] args)
{

    try
    {
        string compid = "tcm:56-935";

        var client = new SessionAwareCoreServiceClient();
        var readoption = new ReadOptions();
        var component = (ComponentData)client.Read(compid, readoption);
        var ItemToPublish = new List<string>();
        ItemToPublish.Add(component.Id);
        var instruction = new PublishInstructionData();
        var pubtarget = (PublicationTargetData)client.Read(
                                               "tcm:0-21-65537", readoption);
        List<string> target = new List<string>();
        target.Add(pubtarget.Id);
        client.Publish(ItemToPublish.ToArray(), instruction, target.ToArray(), 
                       PublishPriority.Normal, readoption);
        Console.WriteLine("component published");
        Console.WriteLine(component.Title);
        Console.WriteLine(pubtarget.Title);
        Console.ReadLine();

    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:39:11.150

错误很清楚，它表示您没有适当的依赖关系。您必须将 Tridion.ContentManager.CoreService.Client.dll 放在可执行文件所在的同一目录中（或者，您可以放在 GAC 中）。通常在 Visual Studio 中有一个关于项目“复制本地”的引用程序集的选项，您可以尝试将其设置为 true 并尝试再次执行您的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T10:47:33.887

看起来（根据您对伊戈尔的回答的评论）您缺少一些配置。在 Tridion Practice 网站上查看 Frank 的 wiki 帖子 - [https://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithoutConfigFile](https://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithoutConfigFile)

# json - GWT、restygwt、Spring MVC、JSON 编码错误。ISO-8859-1 与 utf-8？

> ID：11392211
> 
> 赞同：1
> 
> 时间：2012-07-09T09:21:46.807
> 
> 标签：json, gwt, rest, spring-mvc, utf-8

我真的不知道问题出在哪里，但我可以告诉以下内容：

首先我使用了 GWT RequestBuilder：

```
RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, "/myRESTResource/test");
rb.setHeader("Content-Type", "application/json");
rb.setRequestData("");
rb.setCallback(new RequestCallback() {
    @Override
    public void onResponseReceived(Request request, Response response) {
        Window.alert(response.getText());
    }
    @Override
    public void onError(Request request, Throwable exception) {
        Window.alert(exception);
    }
});
rb.send(); 
```

我的弹簧控制器：

```
@Controller
@RequestMapping("/myRESTResource")
public class TranslationController {
    @RequestMapping(value="/{param}", method=RequestMethod.GET)
    public @ResponseBody String get(@PathVariable("param") String param, HttpServletResponse response) {
        // get some data and output it as JSON
    }
} 
```

在 Chrome 浏览器中，我可以看到以`Content-type: text/html; charset=iso-8859-1`. `Window.alert()`很好。

现在我想切换到restygwt。我正在使用`Resource`：

```
Resource r = new Resource("myRESTResource/test");
r.get().send(new JsonCallback() {
    @Override
    public void onSuccess(Method method, JSONValue response) {
        Window.alert(response.toString());
    }

    @Override
    public void onFailure(Method method, Throwable exception) {
        Window.alert(exception.getLocalizedMessage());
    }
}); 
```

在这里，我的 Spring 控制器返回`Content-type: application/json`. 这`Window.alert()`对于 ASCII 字符来说很好，但所有特殊的东西都变成了一个黑盒子，里面有一个问号。该问题发生在 GWT 开发模式（带有集成 Jetty 的 Eclipse 4.2）中，并且还部署在外部 Tomcat 7 上。

如果我使用 restygwt 并放

```
response.setCharacterEncoding("ISO-8859-1"); 
```

在我的 Spring Controller 中，`Window.alert()`按预期显示数据。

很明显，我不想`response.setCharacterEncoding("ISO-8859-1");`在每个 Controller 方法中编写代码。

我希望有一个简单的方法来解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:31:24.097

解决方案非常简单：

`Resource`只需说出它想从服务器获取的编码的restygwt ：

`Accept: application/json; charset=utf-8`

或者：

`Accept: application/json; charset=iso-8859-1`

代码示例：

```
HashMap<String, String> header = new HashMap<String, String>();
header.put(Resource.HEADER_ACCEPT, Resource.CONTENT_TYPE_JSON+"; charset=utf-8");

Resource r = new Resource("myRESTResource/test", header);
r.get().send(new JsonCallback() {
    @Override
    public void onSuccess(Method method, JSONValue response) {
        Window.alert(response.toString());
    }

    @Override
    public void onFailure(Method method, Throwable exception) {
        Window.alert(exception.getLocalizedMessage());
    }
}); 
```

Spring 会自动返回预期的编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:18:27.697

哟似乎没有从服务器生成 json。你只是返回一个字符串。

尝试将其放入您的服务中：

`@RequestMapping(value="/{param}", method=RequestMethod.GET**, produces = "application/json"**)`

您可以使用 RestClient 之类的工具来验证服务器是否实际返回 json。

# c# - C#反射：是否可以查看使用反射获得的构造函数的代码？

> ID：11392213
> 
> 赞同：0
> 
> 时间：2012-07-09T09:21:51.327
> 
> 标签：c#, reflection

> **可能重复：**
> [c#我可以使用反射来检查方法中的代码吗？](https://stackoverflow.com/questions/2693881/c-sharp-can-i-use-reflection-to-inspect-the-code-in-a-method)

所以我在胡思乱想，有些东西打动了我。是否可以查看使用 GetConstructor() 方法获得的构造函数的代码，而无需导航到文件并在 Visual Studio 中查看它。例如，是否有可能获取 ConstructorInfo 对象，然后将与该构造函数关联的代码打印到控制台窗口？可能看起来是一个愚蠢的问题，但我以前从来没有真正需要过反思，所以我对它很陌生，不确定它有多少能力。

另外作为一个旁注，是什么决定了哪个构造函数将被用作默认值？它只是参数最少的那个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:26:45.350

基本上，代码仅以 MSIL 指令的形式提供。请参阅[我可以使用反射来检查方法中的代码吗？](https://stackoverflow.com/questions/2693881/c-sharp-can-i-use-reflection-to-inspect-the-code-in-a-method)了解更多信息。

# 3d - SVG 3d 旋转 X

> ID：11392222
> 
> 赞同：1
> 
> 时间：2012-07-09T09:22:32.437
> 
> 标签：3d, svg, rotation

我正在尝试创建 5 个矩形，随着它们远离居中的矩形，它们在 y 轴上旋转得越来越多。

但我不知道如何使用变换和透视属性来实现它。我只能在 2d 中旋转，但是当我指定 rotateY 或 rotateX 时，它不会响应并保持不变。

有什么帮助吗？教程？例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:36:35.447

所以这里有一些关于如何在 SVG 中使用透视效果的很好的解释： [https ://www.svgopen.org/2008/papers/86-Achieving_3D_Effects_with_SVG/#section_4_4_creating_perspective_effects_using_future_features](https://www.svgopen.org/2008/papers/86-Achieving_3D_Effects_with_SVG/#section_4_4_creating_perspective_effects_using_future_features)

该页面来自 2008 年，他们正在谈论未来，似乎这在大多数 SVG 查看器中还不起作用。他们网站上的图像是PNG，我已经在最新版本的firefox和inkscape中尝试了他们的示例代码，但图像显示不正确。

因此，您的 svg 代码可能没有任何问题，您只是不能期望它在每个查看器中都能正确显示。尝试找到一个能够渲染 3D SVG 并导出位图图形的程序，如果您想让您的图形对更广泛的受众可见，这可能是您唯一的选择。

# php - 在每个按钮单击时提交表单

> ID：11392226
> 
> 赞同：-2
> 
> 时间：2012-07-09T09:22:38.597
> 
> 标签：php, html

我的代码是

```
<form action="test.php" name="test">
<?php foreach($result as $res)
{
 ?>
  <div>
  <label><?php echo $res->name;?></label>
    <input type="text" name="<?php echo $res->val;?>">
    <input type="submit" value="submit" />
  </div>
<?php }
?>
</form> 
```

我需要为每个提交按钮执行相同的操作，只要用户单击它，就`test.php`应该调用该操作。我已经尝试过这样但它不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:26:45.413

对于每个提交，您需要一个不同的表单。干得好：

```
<?php foreach($result as $res)
{
echo "<form action=\"test.php\" name=\"".$res->name."\">";
 ?>
  <div>
  <label><?php echo $res->name;?></label>
  <input type="text" name="<php echo $res->val;?>">
  <input type="submit" value="submit"
  </div>
<?php
echo "</form>";
 }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:27:16.863

首先，看一下[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)。

# eclipse - Google App Engine NO_MODIFICATION_ALLOWED_ERR Eclipse 构建错误

> ID：11392227
> 
> 赞同：5
> 
> 时间：2012-07-09T09:22:41.450
> 
> 标签：eclipse, google-app-engine, eclipse-plugin

我已经为 Eclipse Indigo 安装了 Google App Engine 插件。我已经使用自动生成的示例代码创建了新的 Web 应用程序项目。创建项目时，我取消选中“使用 Google Web Toolkit”。我的项目如下所述：[Google App Engine HTTP Error 403](https://stackoverflow.com/questions/11365100/google-app-engine-http-error-403)

在构建项目时，我收到以下错误：

> 构建过程中发生错误。
> 
> 在项目“测试”上运行构建器“Google App Engine 项目更改通知程序”时出错
> 
> NO_MODIFICATION_ALLOWED_ERR：尝试修改不允许修改的对象。

我可以在本地主机上运行 servlet，没有任何问题，但是当我部署应用程序时，它不起作用。日志显示：

> servlet 未捕获的异常
> 
> java.lang.UnsupportedClassVersionError：测试/测试：不支持的major.minor 51.0版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:54:55.893

该问题是由 Java 7 引起的。Google App Engine 仅支持 Java 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T12:40:28.333

我认为这可能与[这个问题](http://code.google.com/p/google-plugin-for-eclipse/issues/detail?id=90)有关，线程中建议的解决方法对我有用（为方便起见，粘贴在这里）：

> 作为临时解决方法，导航到 Project Properties -> Builders 并禁用“Google App Engine Change Notifier”构建器。

# android - 如何获取在android的用户空间上运行的指定进程的调用堆栈？

> ID：11392236
> 
> 赞同：1
> 
> 时间：2012-07-09T09:22:55.163
> 
> 标签：android, linux, debugging, process

我知道有一些方法可以获取调用堆栈

1.  使用“dalvik.vm.stack-trace-file”获取**内核线程堆栈**
2.  或使用回溯获取**当前进程**的堆栈。

但是现在我需要跟踪一个**用户空间**进程，只有当一些特殊事件发生时，才会有许多子进程（**线程**），由另一个进程（我们可以将其视为临时调试器）。有没有办法做这样的事情？

ptrace ( [http://linux.die.net/man/2/ptrace](http://linux.die.net/man/2/ptrace) ) 是一个很好的建议，但似乎没有办法跟踪线程？

**更新**

1.  [http://man7.org/linux/man-pages/man2/ptrace.2.html](http://man7.org/linux/man-pages/man2/ptrace.2.html)似乎“每个线程都可以单独附加到（可能不同的）跟踪器”！？

2.  我试图使用 ptrace 来获取进程的堆栈。但我发现我没有权限？我用

    > ptrace(PTRACE_ATTACH, tid2, NULL, NULL);

    但 -1 是返回，而 errno 是 1（**不允许操作**）

    我错过了什么吗？

3.  我在一个安卓平台上工作。似乎我无权附加某些进程？（gdb 工具是 root，但我的应用程序不是。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:56:43.410

如果要附加到进程，则进程与要附加的进程之间必须存在父/子关系，或者您的进程以 root 身份运行。

# apache - 使用 mod_rewrite 进行递归

> ID：11392240
> 
> 赞同：0
> 
> 时间：2012-07-09T09:23:10.140
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试以以下形式重写我的网址

```
localhost/myapp/view/something or 
localhost/myapp/crud/something 
```

到

```
localhost/myapp/view.pl?view=something or
localhost/myapp/crud.pl?action=something 
```

所有其他请求应该像这样映射：localhost/myapp/login to localhost/myapp/login.pl

我用这个 .htaccess 文件尝试过，但如果我启用最后一个 RewriteRule，我会得到递归，我不明白为什么，因为我用 RewriteCond 保护了它。这是我的第一个 .htacces mod_rewrite 文件，所以请耐心等待我；）

```
RewriteEngine On

RewriteRule ^/?crud/([^/]*)$    /myapp/crud.pl?action=$2 [QSA]

RewriteRule ^/?view/([^/]*)$    /myapp/view.pl?view=$2 [QSA]

RewriteCond $1                     !^/(view|crud)$
RewriteRule ^/?([^/]*)$            /myapp/$1.pl [QSA] 
```

更新：

我删除了前导 / 并添加了 [L] 标志，现在我在 apache 的 error.log 中收到以下错误：

```
[Mon Jul 09 11:55:33 2012] [error] [client 127.0.0.1] File does not exist: /srv/http/myapp/myapp 
```

新文件：

```
RewriteRule ^crud/([^/]*)$    myapp/crud.pl?action=$2 [L,QSA]
RewriteRule ^view/([^/]*)$    myapp/view.pl?action=$2 [L,QSA]

RewriteCond $1                !^(view|crud)$
RewriteRule ^([^/]*)$         myapp/$1.pl [QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:16:56.280

由于您的 URI 包含 myapp，我假设这是 in `DOCroot/myapp/.htaccess`，在这种情况下，您的基础是 /myapp/ 并且所有重写都与此相关。（在文档中查找“每个目录”。）

```
RewriteEngine On
RewriteBase   /myapp/

RewriteRule ^crud/([^/]*)$    crud.pl?action=$2 [L,QSA]
RewriteRule ^view/([^/]*)$    view.pl?action=$2 [L,QSA]

RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(\w+)$            $1.pl             [L,QSA,NS] 
```

我还更改了最后一条规则，将 /myapp/xxxxx（任何单词）的 UTI 重写为 /myapp/xxxxx.pl，只要它不映射到文件或目录名称。

另请查看[调试 .htaccess 重写规则的提示，](https://stackoverflow.com/questions/9153262/tips-for-debugging-htaccess-rewrite-rules)如果您可以访问 Apache 配置，请考虑在您的系统配置中启用`RewriteLog`和（或者如果您使用的是 Apache 2.4）。`RewriteLogLevel``LogLevel alert rewrite:trace3`

# .net - HttpWebRequest - 区分客户端和服务器异常

> ID：11392242
> 
> 赞同：0
> 
> 时间：2012-07-09T09:23:21.670
> 
> 标签：.net, windows-phone-7, httpwebrequest

假设处理http web响应异常的常规方式：

```
void BeginGetResponseCallback(IAsyncResult asyncResult)
    {
        try
        {
            var req = asyncResult.AsyncState as HttpWebRequest;
            using (HttpWebResponse response = req.EndGetResponse(asyncResult) as HttpWebResponse)
            {
                ...
            }
        }
        catch (WebException we)
        {
            ...
        }
    } 
```

这里的问题是，如果服务器存在连接问题或服务器实际回复“未找到”状态，则可能会引发具有相同错误代码（“未找到”）的 WebException。这似乎是 HttpWebRequest 实现中的一个错误。

那么我们应该如何正确区分这些情况，即抛出的异常是“源自”客户端还是服务器？

Edit1：我在 Windows Phone 7.1 平台上运行此代码。

Edit2：建议的 WebException 的 Status 属性在 WP7 上几乎没有用，因为它总是设置为 UnknownError，即使它应该是 ProtocolError。WP7 上可能的 HttpWebRequest 实现错误？

Edit3：Silverlight 中 WebException.Status 的 MSDN 文档页面声明不支持 ProtocolError 枚举成员，所以这解释了它......虽然不知道为什么它不受支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:28:36.397

You can inspect the `Status` field of the `WebException`. That will help tell you, at a high level, where the error occurred. You can find the docs for it [here](http://msdn.microsoft.com/en-us/library/system.net.webexceptionstatus.aspx) and a very simple piece of sample code [here](http://msdn.microsoft.com/en-us/library/system.net.webexception.response.aspx).

# c# - C# 中的 Http 监视器

> ID：11392250
> 
> 赞同：0
> 
> 时间：2012-07-09T09:24:30.063
> 
> 标签：c#, http, sockets, proxy

这是我的监控 Http 代码：

```
static void Main(string[] args)
{
     try
     {
          byte[] input = BitConverter.GetBytes(1);
          byte[] buffer = new byte[4096];
          Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);
          s.Bind(new IPEndPoint(IPAddress.Parse("127.0.0.1"), 80));
          s.IOControl(IOControlCode.ReceiveAll, input, null);
          s.BeginReceive(arrResponseBytes, 0, arrResponseBytes.Length, SocketFlags.None, new AsyncCallback(OnClientReceive), s);
          System.Threading.ManualResetEvent reset = new System.Threading.ManualResetEvent(false);
          reset.WaitOne();
      }
      catch (Exception ex)
      {
          Console.WriteLine(ex);
      }
      Console.ReadKey();
}

static byte[] arrResponseBytes = new byte[1024 * 5];
protected static void OnClientReceive(IAsyncResult ar)
{
     Socket socket = (Socket)ar.AsyncState;
     int count = socket.EndReceive(ar);
     if (count > 0)
     {
          Console.WriteLine(Encoding.ASCII.GetString(arrResponseBytes, 0, count));
          socket.BeginReceive(arrResponseBytes, 0, arrResponseBytes.Length, SocketFlags.None, new AsyncCallback(OnClientReceive), socket);
     }
} 
```

但我无法获得 http 主机。不知道什么数据。我想获取 http 主机，例如： http: [//google.com](http://google.com) 我如何监控系统 http？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:04:36.247

您在链接中看到的是[IP + TCP headers](http://nmap.org/book/tcpip-ref.html)。您应该解析 IP&TCP 标头以提取内容。TCP 内容*大约*从偏移量 40 开始。因此您可以尝试如下修改程序的版本，以查看每个**HTTP**请求的内容。（工作但不完整的程序只是为了给你一个想法）

PS：见`s.Bind(new IPEndPoint(IPAddress.Broadcast, 80));`

```
static void Main(string[] args)
{
    try
    {
        byte[] input = new byte[]{1};
        byte[] buffer = new byte[4096];
        Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);
        s.Bind(new IPEndPoint(IPAddress.Broadcast, 80));
        s.IOControl(IOControlCode.ReceiveAll , input, null);
        s.BeginReceive(arrResponseBytes, 0, arrResponseBytes.Length, SocketFlags.None, new AsyncCallback(OnClientReceive), s);
        System.Threading.ManualResetEvent reset = new System.Threading.ManualResetEvent(false);
        reset.WaitOne();
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
    }
    Console.ReadKey();
}

static byte[] arrResponseBytes = new byte[1024 * 64];
static void OnClientReceive(IAsyncResult ar)
{
    Socket socket = (Socket)ar.AsyncState;
    int count = socket.EndReceive(ar);
    if (count >= 40)
    {
        try
        {
            string s = Encoding.UTF8.GetString(arrResponseBytes, 40, count - 40);
            string bin = BitConverter.ToString(arrResponseBytes, 40, count - 40).Replace("-", " ");
            if(s.StartsWith("GET"))
                Console.WriteLine(s + " - " + bin);
            //Thread.Sleep(1000);
        }
        catch { }
    }
    socket.BeginReceive(arrResponseBytes, 0, arrResponseBytes.Length, SocketFlags.None, new AsyncCallback(OnClientReceive), socket);
} 
```

# magento - 购物车的magento自定义网址

> ID：11392251
> 
> 赞同：2
> 
> 时间：2012-07-09T09:24:32.323
> 
> 标签：magento, routes, router

有什么办法可以为magento的购物车提供自定义URL？例如：当您将产品添加到购物车时，您将获得链接，因为您将转到[http://www.domain.com/magento/checkout/cart/](http://www.domain.com/magento/checkout/cart/)

我想将其更改为 [http://www.domain.com/magento/checkout/CUSTOM_NAME_GOES_HERE/](http://www.domain.com/magento/checkout/CUSTOM_NAME_GOES_HERE/)

我试图编辑

```
class Mage_Checkout_Helper_Url extends Mage_Core_Helper_Url
public function getCartUrl()
{
return $this->_getUrl('checkout/cart');
} 
```

但它确实有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:12:51.397

简单易行：转到目录 > URL 重写管理并添加您的重写条件并根据您的喜好重写它。并更改结帐/购物车以指示新路线

# c# - 关于弹出搜索的 WPF MVVM 建议

> ID：11392253
> 
> 赞同：2
> 
> 时间：2012-07-09T09:24:35.190
> 
> 标签：c#, wpf, mvvm

我对 WPF MVVM 模型很陌生，所以请多多包涵。我正在尝试编写一个库存管理系统。我有一个维护页面，我成功链接到我的视图模型。但是，我想启用一个可以从维护页面触发的搜索控件，以弹出一个网格，用户可以在其中搜索一个项目，选择它并返回到维护屏幕，并显示所选项目。

如何在 MVVM 中实现这种类型的功能最好？维护屏幕上的搜索按钮可以链接到搜索 ICommand，但 Viewmodel 不了解 UI，因此它不知道显示搜索控件的名称或如何显示它。我能想到的唯一想法是在 UI 后面的代码中编写搜索按钮事件，但这不会破坏 MVVM 模式吗？

如果这是一个愚蠢的问题，请提前致谢并道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:19:02.903

解决问题的一个好方法是使用[用户交互模式](http://msdn.microsoft.com/en-us/library/gg405494%28v=PandP.40%29.aspx#sec10)。

> 就 MVVM 模式而言，视图模型负责启动与用户的交互以及消费和处理任何响应，而视图负责使用任何适当的用户体验实际管理与用户的交互。保持视图模型中实现的表示逻辑与视图实现的用户体验之间的关注点分离，有助于提高可测试性和灵活性。
> 
> 在 MVVM 模式中实现这些类型的用户交互有两种常见的方法。一种方法是实现一个服务，视图模型可以使用该服务来启动与用户的交互，从而保持其对视图实现的独立性。另一种方法使用视图模型引发的事件来表达与用户交互的意图，以及绑定到这些事件并管理交互的视觉方面的视图中的组件。

这是用于执行 DialogServices 等的 MVVM 模式，因此它也符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:37:33.663

这里的主要问题是如何以 MVVM 友好的方式显示搜索弹出窗口。我的github 帐户上有一个为此目的而设计的自定义控件的[示例（完整的源代码可供下载）。](https://github.com/BenjaminGale/ModalContentPresenter)

该控件可以这样使用：

```
<c:ModalContentPresenter IsModal="{Binding DialogIsVisible}">

    <!-- This is the main content e.g. your maintenance screen -->
    <TabControl Margin="5">
            <Button Margin="55"
                    Padding="10"
                    Command="{Binding ShowModalContentCommand}">
                This is the primary Content
            </Button>
        </TabItem>
    </TabControl>

    <c:ModalContentPresenter.ModalContent>
        <!-- This is the modal content e.g. your search popup -->
        <Button Margin="75"
                Padding="50"
                Command="{Binding HideModalContentCommand}">
            This is the modal content
        </Button>
    </c:ModalContentPresenter.ModalContent>

</c:ModalContentPresenter> 
```

模态内容直接显示在主要内容上（在您的情况下为维护屏幕），其可见性由`IsModal`可以绑定到 viewModel 中的属性的属性控制。该属性将由搜索命令设置为 true，并且您的搜索网格将显示在维护屏幕的前面。

您的搜索屏幕“视图”将有一个关闭按钮，该按钮绑定到另一个 ICommand 对象，该对象只是将属性设置为 false 并隐藏弹出内容。

请注意，无需“传递”任何信息，因为主要内容和模态内容都由同一控件管理，因此它们共享相同的`DataContext`内容，在您的情况下，这将是对您的 viewModel 的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:44:51.577

为了避免 UI 和视图模型之间的直接耦合，我之前使用了一个[调解器](http://joshsmithonwpf.wordpress.com/?s=mediator)将新 UI 元素的创建转发回 UI 类。但是，我从来没有完全相信这种方法，所以有兴趣看看是否有人有更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T11:17:53.383

如果您在编写弹出窗口时指的是对话框，那么我会使用像[这样](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)的对话框服务。

在您的维护视图模型中打开命令：

```
var result = this.uiDialogService.ShowDialog("Dialogwindow title goes here", dialogwindowVM);//in your case the viewmodel for your search

//check the result and just take the SelectedItem from your dialogwindowVM
if(result)
  this._selected = dialogwindowVM.MySelectedItem; 
```

# java - 如何在 Extjs 的不同页面中使用相同的商店

> ID：11392260
> 
> 赞同：0
> 
> 时间：2012-07-09T09:24:57.867
> 
> 标签：java, extjs4

我的要求是我有搜索条件页面，点击搜索按钮我正在获取搜索条件数据，我想在商店中使用该数据，点击搜索按钮页面重定向到图表页面。如何使用第一页数据到第二页。

我想使用该数据使用商店显示图表。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:17:16.830

在 app.js 中声明一个全局变量变量

```
 var gVar = {}; 
```

将您的存储添加到全局变量并使用它

```
 gVar.cStore=yourStore; 
```

# ruby-on-rails-3 - Ruby on Rails Web 表单的国家/地区选择

> ID：11392261
> 
> 赞同：0
> 
> 时间：2012-07-09T09:24:57.913
> 
> 标签：ruby-on-rails-3

我想在我的 Rails Web 表单中包含国家/地区选择框。在 Ruby on Rails 中怎么可能？我的表格是这样的

```
<%= form_for :User, :url => {:action => :create } do |f| %>              
  <div class="field">
    <%= f.label :select_countries %><br />
    <%= f.select(:countries, country_list)  %>
  </div>
  <%= f.submit "Create" %>
<% end %> 
```

我可以包含什么来代替 country_list？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:59:31.480

我的意见是在数据库中播种国家列表。

使用字段“名称”创建一个模型国家。

在 app/models/country.rb

```
attr_accessible :name 
```

将 YAML 文件中的国家/地区列表和种子加载到数据库中。

在 config/country.yml

```
-
 name: India
 name: Pakistan
 name: Cuba
 #add required country name 
```

在 db/seed.rb

```
COUNTRIES  = YAML.load_file(Rails.root.join('config/country.yml'))
COUNTRIES.each do |country|
  Country.create(country)
end 
```

跑

```
rake db:seed 
```

在您的用户模型中添加 country_id 字段（编写迁移以添加字段）。

在 app/models/user.rb

```
class User < ActiveRecord::Base
 #associate user with country
 belongs_to :country
end 
```

在您的新用户表单中添加以下代码。

```
 <%= f.select :country_id, Country.all.collect { |country| [country.name, country.id] },
  { :prompt => "Select Country" } %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:39:33.587

```
<%= f.country_select :country, ["United States"] %> 
```

它确实适用于 country_select gem

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:44:27.850

Rails 过去曾提供国家选择功能。该功能已从核心中提取出来，现在已打包到[country_select](https://github.com/chrislerum/country_select)插件中。

使用插件启用该功能。

# android - OnLongClick 监听器中的 setContentView

> ID：11392262
> 
> 赞同：0
> 
> 时间：2012-07-09T09:25:00.170
> 
> 标签：android, layout, onlongclicklistener

我遇到了 setContentView 的问题，它给我一个空指针。

在我的 mainFrame 中，我有一个小的 SurfaceView，它占据了大约 50% 的屏幕。如果您长时间单击它，我想实现一种方法，使 SurfaceView 进入全屏状态。我是这样做的：

```
final FrameLayout frame = (FrameLayout) findViewById(R.id.frame_layout);
frame.setOnLongClickListener(new OnLongClickListener() {
    boolean clicked = false;
    @Override
    public boolean onLongClick(View v) {
        if (clicked){
            clicked = false;
            (MyActivity.this).setContentView(R.layout.main);    
        } else {
            clicked = true;
            (MyActivity.this).setContentView(R.layout.fullScreen);
        }

        return true;
    }
}); 
```

有人可以帮我解决这个问题吗？

问候

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="right"
android:orientation="vertical"
android:weightSum="1" 
android:background="@drawable/background_new" >

<TextView

    android:text="@string/measures"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:id="@+id/text_measures"
    android:textColor="#ff444444"
    android:layout_marginTop="30dp"
    android:layout_marginLeft="10dp"
    />

<ImageButton
android:contentDescription="@string/desc_edge"
android:layout_toRightOf="@id/text_measures"
android:id="@+id/edges_button"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/edges_black"
android:layout_marginTop="10dp"
android:layout_marginLeft="10dp"
android:layout_marginBottom="30dp"
android:onClick="edge_handler"
android:background="@null"              
 />

<FrameLayout
    android:background="@xml/border"
    android:id="@+id/camera_preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="10dp"
    android:layout_marginBottom="35dp"
    android:layout_marginRight="200dp"
    android:layout_marginTop="80dp"
    android:layout_below="@id/text_measures"        
     >
   </RelativeLayout> 
```

我知道它看起来像 FrameLayout，但不要误会它是由其他人完成的，它实际上是 SurfaceView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:38:55.437

只需更改SurfaceView onLong 点击frame 的布局参数即可。无需再次设置内容视图。

```
 LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);

  surfaceView.setLayoutParams(lp); 
```

# qt - Qt View/Model/Data Paradigm：如何修改数据？

> ID：11392264
> 
> 赞同：3
> 
> 时间：2012-07-09T09:25:01.467
> 
> 标签：qt

我刚刚阅读了 Qt 4.8 的模型/视图文档。我相信了解模型/视图（代表/选择模型）是如何工作的。我不确定的一件事是当我有一个例如 TreeView 时如何操作数据。

想象一下，当一个项目/行被选中时，有一个 TreeView 来显示一个列表和一个按钮来从这个列表中删除元素。我在这里看到两种方法

1) 在 PushButton 的插槽中，我检索 TreeView 的 SelectionModel 和 ItemModel 并调用 model->removeRow(index.row ...)。通过这种方式，模型（我从 QAbstractItemModel 子类化）操纵它应该表示的数据。

2) 在 PushButton 的插槽中，我直接从数据源中删除了 TreeView 模型所代表的项目。然后我可以通过信号/槽将数据与模型链接起来，这样模型就可以告诉 TreeView 底层数据已经改变。

可以通过添加元素来想象相同的场景。我应该将新元素添加到数据中，将其更改状态信号通知给 TreeView 的 ItemModel，还是应该通过 ItemMode 添加新项目？

我还没有找到任何关于此的最佳实践文档。这两种方法有很大的不同，所以我想提前知道哪一种更可取。

有人建议走哪条路吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:31:24.620

1) 更可取-您可能应该避免直接从 UI 代码操作数据源-如果您通过模型，您的生活会更好。至少在你的模型中添加一个方法来进行数据操作，并从你的 UI 代码中调用该方法。

您会发现 Qt 的一些方法受到保护，因此只能从模型本身调用它们（例如 endInsertRows 等）

# 3g - 如何判断移动数据模块（WCDMA）中的USIM卡不平衡？

> ID：11392265
> 
> 赞同：0
> 
> 时间：2012-07-09T09:25:01.743
> 
> 标签：3g, at-command, dial-up

我用的是现代的3G(WCDMA)移动数据，在嵌入式linux下拨号，有时候发现USIM卡不平衡，不能正常拨号，我搜了现代手册，找到AT指令就可以了帮助。

我使用名为“SYSINFO”的命令，但它不起作用。是否有判断USIM状态失衡的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:03:19.843

您将需要拨打 USSD 命令。这对每个运营商来说都是不同的。

例如，在 Vodafone UK 上它是 *#1345# - 在其他网络上它可以是 *100#

根据您的调制解调器，您需要发送

```
AT+CUSD=1,"*100#",15 
```

或者

```
AT+CUSD=1,"*100#" 
```

# objective-c - ALAsset 上的 defaultRepresentation fullScreenImage 不返回全屏图像

> ID：11392268
> 
> 赞同：7
> 
> 时间：2012-07-09T09:25:06.007
> 
> 标签：objective-c, ios, uiimageview, alasset

在我的应用程序中，我将图像作为资产保存到相册中。我还想检索它们并全屏显示它们。我使用以下代码：

```
ALAsset *lastPicture = [scrollArray objectAtIndex:iAsset]; 

ALAssetRepresentation *defaultRep = [lastPicture defaultRepresentation];

UIImage *image = [UIImage imageWithCGImage:[defaultRep fullScreenImage] 
                                          scale:[defaultRep scale] orientation:
    (UIImageOrientation)[defaultRep orientation]]; 
```

问题是返回的图像是**nil**。我在`ALAssetRepresentation`参考资料中读到，当图像不适合时，它会返回零。

我把这张图片放到了一个`UIImageView`有 iPad 屏幕大小的地方。我想知道你是否可以帮助我解决这个问题？

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-05T08:54:43.040

我不是 fullScreenImage 或 fullResolutionImage 的粉丝。我发现当您对队列中的多个资产执行此操作时，即使您立即释放 UIImage，内存使用量也会急剧增加，而它不应该。此外，当使用 fullScreenImage 或 fullResolutionImage 时，返回的 UIImage 仍然是压缩的，这意味着它会在第一次绘制之前被解压缩，因此在主线程上会阻塞你的 UI。

我更喜欢使用这种方法。

```
-(UIImage *)fullSizeImageForAssetRepresentation:(ALAssetRepresentation *)assetRepresentation
{
    UIImage *result = nil;
    NSData *data = nil;

    uint8_t *buffer = (uint8_t *)malloc(sizeof(uint8_t)*[assetRepresentation size]);
    if (buffer != NULL) {
        NSError *error = nil;
        NSUInteger bytesRead = [assetRepresentation getBytes:buffer fromOffset:0 length:[assetRepresentation size] error:&error];
        data = [NSData dataWithBytes:buffer length:bytesRead];

        free(buffer);
    }

    if ([data length])
    {
        CGImageSourceRef sourceRef = CGImageSourceCreateWithData((__bridge CFDataRef)data, nil);

        NSMutableDictionary *options = [NSMutableDictionary dictionary];

        [options setObject:(id)kCFBooleanTrue forKey:(id)kCGImageSourceShouldAllowFloat];
        [options setObject:(id)kCFBooleanTrue forKey:(id)kCGImageSourceCreateThumbnailFromImageAlways];
        [options setObject:(id)[NSNumber numberWithFloat:640.0f] forKey:(id)kCGImageSourceThumbnailMaxPixelSize];
        //[options setObject:(id)kCFBooleanTrue forKey:(id)kCGImageSourceCreateThumbnailWithTransform];

        CGImageRef imageRef = CGImageSourceCreateThumbnailAtIndex(sourceRef, 0, (__bridge CFDictionaryRef)options);

        if (imageRef) {
            result = [UIImage imageWithCGImage:imageRef scale:[assetRepresentation scale] orientation:(UIImageOrientation)[assetRepresentation orientation]];
            CGImageRelease(imageRef);
        }

        if (sourceRef)
            CFRelease(sourceRef);
    }

    return result;
} 
```

你可以像这样使用它：

```
// Get the full image in a background thread
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

    UIImage* image = [self fullSizeImageForAssetRepresentation:asset.defaultRepresentation];
    dispatch_async(dispatch_get_main_queue(), ^{

    // Do something with the UIImage
    });
}); 
```

# php - 从 php 重启 Sphinx

> ID：11392274
> 
> 赞同：0
> 
> 时间：2012-07-09T09:25:17.927
> 
> 标签：php, linux, bash, sphinx

有谁能够帮助我？我正在使用 sphinx searcher，但我有很多数据库。我动态控制它们（更改 sphinx 配置文件），但是在我向配置文件添加索引后，sphinx 需要重新启动。我为此创建了一个 bash 脚本（停止 shpinx，启动它，索引器 --rotate --all ），当我从终端运行脚本时它没问题，但是当我从 apache 服务器运行时它不起作用。在不将 apache 服务器的所有者更改为 root 的情况下如何做到这一点（它会降低我服务器的安全性）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:38:46.197

> 在不将 apache 服务器的所有者更改为 root 的情况下如何做到这一点

sudo 怎么样？把这样的东西放在你的 sudoers 中......

```
apache ALL= NOPASSWD: /path/to/script command 
```

关键是确保脚本不能被利用......因为它以root身份运行......即对于apache是​​只读+ exec，确保您发送到脚本的命令/开关经过健全性检查。

我希望这会有所帮助，
亲切的问候，
尼克

# ios - 如何在 iOS 中正确组合标签栏视图和导航栏

> ID：11392285
> 
> 赞同：10
> 
> 时间：2012-07-09T09:25:45.320
> 
> 标签：ios, uitabbarcontroller, uinavigationbar

在我的 iOS 应用程序中，我有一个带有三个视图的选项卡栏视图。我希望每个视图的顶部都有一个“导航”栏。我希望导航栏有一个左栏按钮项目，它在所有三个视图中都具有相同的功能，然后是每个视图唯一的右栏按钮项目。我应该如何构建这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T10:09:27.097

在每个选项卡中，放置一个`UINavigationController`. 这是每个选项卡的单独选项。

将每个导航控制器的根视图控制器设置为管理要显示的内容视图的视图控制器。

您可以将三个导航控制器中的每一个的左侧按钮项设置为相同的内容，并将右侧按钮项设置为不同的内容。

# iphone - 如何从 iPhone 的键盘更改返回按钮内的文本？

> ID：11392286
> 
> 赞同：1
> 
> 时间：2012-07-09T09:25:47.897
> 
> 标签：iphone, ios, keyboard

是否可以将返回键中的文本更改为“隐藏”？

![这里附上键盘图像供您参考，将返回键文本更改为](../Images/7d5c52f709fe481c935b85777de6432c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:31:05.730

您不能将其更改为任意文本，只能更改为一组预定义选项。您需要将`returnKeyType`文本字段的属性设置为[这些选项](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/occ/intfp/UITextInputTraits/returnKeyType)之一。

```
typedef enum {
    UIReturnKeyDefault,
    UIReturnKeyGo,
    UIReturnKeyGoogle,
    UIReturnKeyJoin,
    UIReturnKeyNext,
    UIReturnKeyRoute,
    UIReturnKeySearch,
    UIReturnKeySend,
    UIReturnKeyYahoo,
    UIReturnKeyDone,
    UIReturnKeyEmergencyCall,
} UIReturnKeyType; 
```

# codeigniter - 将查询结果显示到发送邮件控制器

> ID：11392297
> 
> 赞同：0
> 
> 时间：2012-07-09T09:26:15.650
> 
> 标签：codeigniter

我想将我的查询结果显示到我的 sendmail 控制器中，如下所示：

控制器

```
function contact()
{
    $data['email'] = $this->Pgallery_model->get_Email();
            $config['protocol'] = 'sendmail';

            $this->email->initialize($config);

            $this->email->to(/*here query result*/);

            $this->email->send();               
            $this->load->view('contact_success', $data);
    } 
```

模型

```
function get_Email()
{
    $query = $this->db->query('select email from setup');
    return $query->result();
} 
```

如何查询到我的投递邮件？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:46:10.237

要获得查询结果，您应该使用：

```
$result  = $this->db->result(); 
```

这将为您提供一个*对象*，然后您必须执行以下操作：

```
echo $result->email; 
```

我想向您指出，使用驼峰和下划线大多是不好的做法。

```
get_Email() should either be getEmail() or get_email() 
```

# iphone - 如何从给定字符串中获取数组中所有源url的值

> ID：11392298
> 
> 赞同：0
> 
> 时间：2012-07-09T09:26:17.117
> 
> 标签：iphone, objective-c, ios

```
{
    数据 = (
                {
            "created_time" = "2011-09-28T07:29:37+0000";
            从 = {
                ID = 100002944043966;
                name = "alok sinha";
            };
            高度 = 500；
            图标=“https://s-static.ak.facebook.com/rsrc.php/v2/yz/r/StEh3RhPvjk.gif”；
            ID = 114750595299741；
            图片 = (
                                {
                    高度 = 2048;
                    来源=“https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/s2048x2048/300035_114750595299741_1543248164_n.jpg”；
                    宽度 = 2048;
                },
                                {
                    高度 = 500；
                    来源=“https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/300035_114750595299741_1543248164_n.jpg”；
                    宽度 = 500；
                },
                                {
                    高度 = 500；
                    来源=“https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/300035_114750595299741_1543248164_n.jpg”；
                    宽度 = 500；
                },
                                {
                    高度 = 480；
                    来源=“https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/s480x480/300035_114750595299741_1543248164_n.jpg”；
                    宽度 = 480；
                },
                                {
                    高度 = 320;
                    来源=“https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/s320x320/300035_114750595299741_1543248164_n.jpg”；
                    宽度 = 320;
                },
                                {
                    高度 = 180；
                    来源=“https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/300035_114750595299741_1543248164_a.jpg”；
                    宽度 = 180;
                },
                                {
                    高度 = 130；
                    来源=“https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/300035_114750595299741_1543248164_s.jpg”；
                    宽度 = 130;
                },
                                {
                    高度 = 130；
                    来源=“https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/s75x225/300035_114750595299741_1543248164_s.jpg”；
                    宽度 = 130;
                }
            );
            链接=“https://www.facebook.com/photo.php?fbid=114750595299741&set=a.114750591966408.20279.100002944043966&type=1”；
            图片=“https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/300035_114750595299741_1543248164_s.jpg”；
            位置 = 1;
            来源=“https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/300035_114750595299741_1543248164_n.jpg”；
            "updated_time" = "2011-09-28T07:29:38+0000";
            宽度 = 500；
        }
    );
    分页 = {
        下一个 = "https://graph.facebook.com/114750591966408/photos?value=1&redirect=1&limit=25&after=MTE0NzUwNTk1Mjk5NzQx";
    };
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:50:54.720

```
NSArray *jsonArray; // your parsed array

NSDictionary *dict = [jsonArray objectAtIndex:0]; // there might be more of the objects and you might need to put that into a forin cycle, but for simplicity this is an example for an array with only one dictionary in it

NSArray *images = [dict objectForKey:@"images"];

NSMutableArray *links = [NSMutableArray array];

for (NSDictionary *img in images) {
  [links addObject:[img valueForKey:@"source"]];
} 
```

现在链接是您需要的 NSString 对象数组。如果需要，您还可以将它们转换为 NSURL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:51:22.113

好吧，您的图像数组就是`[jsonObject objectForKey:@"images"]`如此循环所有这些并拍摄`[loopObject objectForKey:@"source"]`，最后，不要忘记`[jsonObject objectForKey:@"source"]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:52:22.733

`[yourDictionary objectForKey:@"data"]`给字典。

```
NSDictionary *dictionary = [yourDictionary objectForKey:@"data"]

    NSArray *images = [dictionary objectForKey:@"images"];

          NSMutableArray *sourceUrls = [[NSMutableArray alloc] initWithCapacity:0];

            for (NSDictionary *subDictionary in images]) {

                    [sourceUrls addObject:[subDictioanary objectForKey:@"source"]];
                } 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T09:51:04.730

在您的代码中包含 SBJSON 解析器。然后在实现文件中导入SBJson.h。然后使用下面的代码。

```
NSMutableDictionary *responseDictionary = [yourJsonString JSONValue];
NSArray *imageArray = [responseDictionary objectForKey:@"images"];

NSMutableArray *sourceImage=[[NSMutableArray alloc]init]
for(int i=0;i<[imageArray count];i++){
{
[sourceImage appendString:[[imageArray objectAtIndex:i]objectForKey:@"source"]];
} 
```

# sql-server - sql server 2008 r2 express edition 中的 xp_cmdshell 失败？

> ID：11392299
> 
> 赞同：0
> 
> 时间：2012-07-09T09:26:25.570
> 
> 标签：sql-server, sql-server-2008, administrator, database-administration

我遇到了 xp_cmdshell 过程的问题。我正在从连接到 sql server 2008 r2 express edition 的 ssms 运行以下命令。

**exec xp_cmdshell '回声 abc'**

它导致 null 和消息 1 行影响。它不会返回 abc 作为结果。xp_cmdshell 从上面的结果中启用，没有显示任何错误。

请查看问题。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:40:35.413

If you tried everything then try to close and open the SSMS again and also you can try refresh the cache (Edit-->Intellisense-->Refresh Local cache (Ctrl+Shift+R))

# python - 让 ejabberd 通知外部模块客户端存在更改

> ID：11392302
> 
> 赞同：1
> 
> 时间：2012-07-09T09:26:37.047
> 
> 标签：python, xmpp, ejabberd

我在 jabber.domain.com 有一个 ejabberd 服务器，在 Presence.domain.com 有一个用 python 编写的 xmpp 组件（使用 slimxmpp）。

我希望每次客户将其状态从可用更改为不可用时组件都能收到通知，反之亦然。

客户本身没有任何联系方式。

目前，我已将我的客户设置为将他们可用的在线状态节发送到 admin@presence.domain.com，并且我确实收到了他们的在线/离线在线状态通知。但我觉得这不是正确的方法。

我希望客户端不会知道 Presence.domain.com 上的组件，他们只会连接到 jabber.domain.com，并且组件应该以某种方式从服务器收到有关客户端存在的通知。

有没有办法做到这一点？我的组件设置是否正确？或者我应该考虑使用 xmpp 插件/模块/等。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T00:08:00.360

为此编写一个自定义的 ejabberd 模块并不难。它将需要在 ejabberd 中注册到存在更改挂钩，并在每个存在数据包上将通知路由到您的外部组件。

您的模块可以注册一对钩子“set_presence_hook”和“unset_presence_hook”，以便在用户开始/结束会话时得到通知。

如果您需要跟踪其他在线状态，还有一个挂钩“c2s_update_presence”会触发您的用户发送的任何在线数据包。

不使用自定义模块的其他可能性是使用共享名册。将 admin@presence.domain.com 添加到所有用户的共享名册中，但在这种情况下，他们会看到此项目反映在他们的名册上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T20:32:49.667

组件可以以与用户完全相同的方式订阅用户的出席信息。用户也可以订阅组件的存在。您只需要遵循通常的模式，即组件/用户发送一个`<presence/>`类型`subscribe`，用户/组件可以通过发送一个`<presence/>`类型来接受`subscribed`。

您也可以让用户直接向组件发送出席信息。

无需编写自定义挂钩或创建代理用户。

# php - phpactiverecords - not equal to

> ID：11392306
> 
> 赞同：0
> 
> 时间：2012-07-09T09:26:50.517
> 
> 标签：php, phpactiverecord

How to add a not equal condition in phpactiverecords?

```
Code_reference::find('all', array('code' => $name), array('conditions' => 'id != '.$code_id)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:42:43.170

尝试使用`<>`

```
Code_reference::find('all', array('code' => $name), array('conditions' => 'id <> '.$code_id)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:07:43.397

在您的示例中，第二个`$options`数组将被忽略。您必须自己合并它们，因此不能再使用紧凑的*hash*模式。

```
CodeReference::all(array('code = ? AND id != ?', $name, $code_id)); 
```

要打印 SQL 查询，您可以使用`last_sql`.

```
CodeReference::table()->last_sql 
```

有关更多详细信息，请参阅官方（但滞后）文档：

[http://www.phpactiverecord.org/projects/main/wiki/Finders#conditions](http://www.phpactiverecord.org/projects/main/wiki/Finders#conditions)

# python - Django/mod_wsgi OSError: [Errno 13] Permission denied: 'static' when DEBUG = OFF

> ID：11392309
> 
> 赞同：7
> 
> 时间：2012-07-09T09:26:57.810
> 
> 标签：python, django, permissions, mod-wsgi, django-staticfiles

I have a Django 1.4 application on a Centos 6.2 server (running apache, mysql, php) using mod_wsgi with my project deployed in a virtual env. The application itself is one I've been using for several years on a hosted service and I am now deploying on my own rackspace cloud server. The exact version of the app is running fine elsewhere, so this issue is about how I have deployed it. It's my first python/django deployment - I have set up dozens of LAMP sites previously, so it's my lack of familiarity with Django deployments that is clearly holding me back.

The app works fine on my server with `DEBUG = TRUE` in the project's settings.py file, but when I change this to FALSE the front-end of the site produces [500] Internal Server Errors.

I am aware that with DEBUG set to OFF, apache is now serving my static files via mod_wsgi (mod_wsgi is working fine), which leads me to believe 'something' in my configuration is preventing this. I have run the `./manage.py collectstatic` command which populated the `/static` directory in the `/myproject` folder.

I have been working on this for weeks now, reading as many deployment guides as I can find, but so far no joy. Your assistance would be very much appreciated.

Here are the relevant declarations in my project's settings.py file:

```
############ settings.py #############

SITE_ROOT = os.path.realpath(os.path.dirname(__file__))
MEDIA_ROOT = '/opt/virtual/myproject/static/localtv/media/'
MEDIA_URL = 'http://example.org/static/localtv/media/'
STATIC_ROOT = '/opt/virtual/myproject/static/'
STATIC_URL = 'http://example.org/static/' 
```

And here is the wsgi.py file:

```
############# wsgi.py #################
import os
import sys
import site
site.addsitedir('/opt/virtual/myapp/lib/python2.7/site-packages')

apache_configuration= os.path.dirname(__file__)
project = os.path.dirname(apache_configuration)

sys.path.append('/opt/virtual')
sys.path.append('/opt/virtual/myproject')

os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

My virtual host declaration in httpd.conf looks like this:

```
############ virtual host declaration in httpd.conf ##############
<VirtualHost *:80>
ServerName example.org
ServerAlias www.example.org
DocumentRoot /opt/virtual/myproject

Alias /robots.txt /opt/virtual/myproject/static/robots.txt
Alias /favicon.ico /opt/virtual/myproject/static/favicon.ico

AliasMatch ^/([^/]*\.css) /opt/virtual/myproject/static/styles/$1

Alias /static/ /opt/virtual/myproject/static/
Alias /media/ /opt/virtual/myproject/static/media
Alias /images /opt/virtual/myproject/static/images

<Directory /opt/virtual/myproject/static>
Order deny,allow
Allow from all
</Directory>

<Directory /opt/virtual/myproject/static/media>
Order deny,allow
Allow from all
</Directory>

WSGIDaemonProcess example.org python-path=/opt/virtual/myapp/lib/python2.7/site-packages
WSGIProcessGroup example.org

WSGIScriptAlias / /opt/virtual/myproject/application/wsgi.py

<Directory /opt/virtual/myproject>
<Files wsgi.py>
Order allow,deny
Allow from all
</Files>
</Directory> 
```

My .bashrc file in /ROOT looks like this:

```
########### .bashrc ##################

# User specific aliases and functions

alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Source global definitions
if [ -f /etc/bashrc ]; then
    . /etc/bashrc
fi

# User specific aliases and functions
alias python='/opt/bin/python2.7'

export PYTHONPATH=/opt/virtual/myapp/lib/python2.7/site-packages:$PYTHONPATH 
```

And finally, my error_log showing the Traceback:

```
 ############### error_log ###############
    [Mon Jul 09 09:21:13 2012] [error] <WSGIRequest
    [Mon Jul 09 09:21:13 2012] [error] path:/,
    [Mon Jul 09 09:21:13 2012] [error] GET:<QueryDict: {}>,
    [Mon Jul 09 09:21:13 2012] [error] POST:<QueryDict: {}>,
    [Mon Jul 09 09:21:13 2012] [error]  'DOCUMENT_ROOT': '/opt/virtual/myproject',
    [Mon Jul 09 09:21:13 2012] [error]  'GATEWAY_INTERFACE': 'CGI/1.1',
    [Mon Jul 09 09:21:13 2012] [error]  'HTTP_ACCEPT': "*/*",
    [Mon Jul 09 09:21:13 2012] [error]  'HTTP_HOST': 'example.org',
    [Mon Jul 09 09:21:13 2012] [error]  'HTTP_USER_AGENT': 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)',
    [Mon Jul 09 09:21:13 2012] [error]  'PATH_INFO': u'/',
    [Mon Jul 09 09:21:13 2012] [error]  'PATH_TRANSLATED': '/opt/virtual/myproject/application/wsgi.py/',
    [Mon Jul 09 09:21:13 2012] [error]  'QUERY_STRING': '',
    [Mon Jul 09 09:21:13 2012] [error]  'REMOTE_ADDR': '99.99.99.99',
    [Mon Jul 09 09:21:13 2012] [error]  'REMOTE_PORT': '99999',
    [Mon Jul 09 09:21:13 2012] [error]  'REQUEST_METHOD': 'GET',
    [Mon Jul 09 09:21:13 2012] [error]  'REQUEST_URI': '/',
    [Mon Jul 09 09:21:13 2012] [error]  'SCRIPT_FILENAME': '/opt/virtual/myproject/application/wsgi.py',
    [Mon Jul 09 09:21:13 2012] [error]  'SCRIPT_NAME': u'',
    [Mon Jul 09 09:21:13 2012] [error]  'SERVER_ADDR': '111.111.111.111',
    [Mon Jul 09 09:21:13 2012] [error]  'SERVER_ADMIN': 'root@localhost',
    [Mon Jul 09 09:21:13 2012] [error]  'SERVER_NAME': 'example.org',
    [Mon Jul 09 09:21:13 2012] [error]  'SERVER_PORT': '80',
    [Mon Jul 09 09:21:13 2012] [error]  'SERVER_PROTOCOL': 'HTTP/1.0',
    [Mon Jul 09 09:21:13 2012] [error]  'SERVER_SIGNATURE': '<address>Apache/2.2.15 (CentOS) Server at example.org Port 80</address>\\n',
    [Mon Jul 09 09:21:13 2012] [error]  'SERVER_SOFTWARE': 'Apache/2.2.15 (CentOS)',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.application_group': 'example.org|',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.callable_object': 'application',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.handler_script': '',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.input_chunked': '0',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.listener_host': '',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.listener_port': '80',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.process_group': 'example.org',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.request_handler': 'wsgi-script',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.script_reloading': '1',
    [Mon Jul 09 09:21:13 2012] [error]  'mod_wsgi.version': (3, 3),
    [Mon Jul 09 09:21:13 2012] [error]  'wsgi.errors': <mod_wsgi.Log object at 0x7f34321aa530>,
    [Mon Jul 09 09:21:13 2012] [error]  'wsgi.file_wrapper': <built-in method file_wrapper of mod_wsgi.Adapter object at 0x7f34320e4e40>,
    [Mon Jul 09 09:21:13 2012] [error]  'wsgi.input': <mod_wsgi.Input object at 0x7f34320e02b0>,
    [Mon Jul 09 09:21:13 2012] [error]  'wsgi.multiprocess': False,
    [Mon Jul 09 09:21:13 2012] [error]  'wsgi.multithread': True,
    [Mon Jul 09 09:21:13 2012] [error]  'wsgi.run_once': False,
    [Mon Jul 09 09:21:13 2012] [error]  'wsgi.url_scheme': 'http',
    [Mon Jul 09 09:21:13 2012] [error]  'wsgi.version': (1, 1)}>
    [Mon Jul 09 09:21:13 2012] [error] -------------------------------------------------------------------------------
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99] mod_wsgi (pid=21520): Exception occurred processing WSGI script '/opt/virtual/myproject/application/wsgi.py'.
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99] Traceback (most recent call last):
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 241, in __call__
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     response = self.get_response(request)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/core/handlers/base.py", line 179, in get_response
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/core/handlers/base.py", line 228, in handle_uncaught_exception
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return callback(request, **param_dict)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/utils/decorators.py", line 91, in _wrapped_view
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     response = view_func(request, *args, **kwargs)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/views/defaults.py", line 33, in server_error
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return http.HttpResponseServerError(t.render(Context({})))
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 140, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return self._render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return self.nodelist.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 823, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     bit = self.render_node(node, context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return node.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/loader_tags.py", line 123, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return compiled_parent._render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return self.nodelist.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 823, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     bit = self.render_node(node, context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return node.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/loader_tags.py", line 62, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     result = block.nodelist.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 823, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     bit = self.render_node(node, context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     response = view_func(request, *args, **kwargs)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/views/defaults.py", line 33, in server_error
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return http.HttpResponseServerError(t.render(Context({})))
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 140, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return self._render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return self.nodelist.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 823, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     bit = self.render_node(node, context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return node.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/loader_tags.py", line 123, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return compiled_parent._render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return self.nodelist.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 823, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     bit = self.render_node(node, context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return node.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/loader_tags.py", line 62, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     result = block.nodelist.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 823, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     bit = self.render_node(node, context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/template/base.py", line 837, in render_node
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return node.render(context)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/compressor/templatetags/compress.py", line 91, in render
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     rendered_output = compressor.output(self.mode, forced=forced)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/compressor/css.py", line 53, in output
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     ret.append(subnode.output(*args, **kwargs))
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/compressor/css.py", line 55, in output
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return super(CssCompressor, self).output(*args, **kwargs)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/compressor/base.py", line 221, in output
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     finished_content = self.handle_output(mode, filtered_content, forced)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/compressor/base.py", line 233, in handle_output
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     return output_func(mode, content, forced)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/compressor/base.py", line 245, in output_file
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     self.storage.save(new_filepath, ContentFile(content))
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/core/files/storage.py", line 45, in save
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     name = self._save(name, content)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/site-packages/django/core/files/storage.py", line 168, in _save
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     os.makedirs(directory)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]   File "/opt/virtual/myapp/lib/python2.7/os.py", line 157, in makedirs
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99]     mkdir(name, mode)
    [Mon Jul 09 09:21:13 2012] [error] [client 99.99.99.99] OSError: [Errno 13] Permission denied: '/opt/virtual/myproject/static/CACHE/css' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-15T12:41:44.317

在几乎相似的条件下（我运行的是 Ubuntu，而不是 CentOS），我一直收到与您相同的错误。

正如您所注意到的，当使用 DEBUG = FALSE 运行时，您实际上是在通过 wsgi 运行。这意味着当使用 DEBUG = TRUE 运行时，您实际上是在使用您的用户权限，而在使用 DEBUG = FALSE 运行时，您正在使用 Apache 的用户权限运行。Apache 使用的用户是`www-data`.

`www-data`既不是所有者，也不是拥有`/var/www`. 这意味着它`www-data`被视为`other`并具有设置给其他人的权限。

对此的**坏**解决方案是：

```
sudo chmod -R 777 /var/www/ 
```

这将使每个人都可以完全访问 中的所有内容`/var/www/`，这显然是一个非常糟糕的主意。

另一个**不好**的解决方案是：

```
sudo chown -R www-data /var/www/ 
```

这会将所有者更改为`www-data`，从而打开安全漏洞。

**好的**解决方案是：

```
sudo groupadd varwwwusers
sudo adduser www-data varwwwusers
sudo chgrp -R varwwwusers /var/www/
sudo chmod -R 770 /var/www/ 
```

这将添加`www-data`到`varwwwusers`组中，然后将其设置为组`/var/www/`及其所有子文件夹。`chmod`将授予所有者和组读、写、执行权限，同时阻止任何其他用户访问它。

# c++ - custom cursor not showing on custom button

> ID：11392310
> 
> 赞同：2
> 
> 时间：2012-07-09T09:26:58.673
> 
> 标签：c++, winapi

I registered a custom button in `WM_CREATE` but my custom cursor resource is not recognized and I am getting a double arrow cursor when hovering over the custom buttons that I create at run time. Any solutions? I have included `resource.h` and triplechecked that the custom resource with `IC_CURSOR2` is there in the resources.

```
 WNDCLASSEX buttonx; //subclass our custom buttons
        buttonx.cbSize = sizeof(WNDCLASSEX);
        GetClassInfoEx(NULL,TEXT("BUTTON"), &buttonx);
        buttonx.lpszClassName = "CustomButton";
        buttonx.hInstance = hInst;
        buttonx.hCursor = LoadCursor(hInst, MAKEINTRESOURCE(IDC_CURSOR2));
        RegisterClassEx(&buttonx);

        hButton1 = CreateWindowEx(NULL, "CustomButton", "Close", WS_CHILD 
            | WS_VISIBLE | BS_OWNERDRAW, 410, 570, 100, 30, hWnd, 
            (HMENU)ID_BUTTON1, g_hInstance, NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:50:53.717

> 我得到一个双箭头光标

这听起来像是库存游标之一，例如 IDC_SIZENS。这表明您*的 hInst*变量为 NULL。也许您应该使用 g_hInstance，从问题中并不清楚。

# html - Zero-width non-breaking space

> ID：11392312
> 
> 赞同：35
> 
> 时间：2012-07-09T09:27:03.867
> 
> 标签：html, css

I have a piece of text and at the end I want to insert two icons.

```
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim 
veniam, quis nostrud exercitation ullamco laboris <img ...><img ...> 
```

I want to keep the two images joined and if an image overflows both should go to the new line, so what I need is something like a `&nbsp;` but with zero width.

Is there an html entity to do that or another way to archieve this without using a wrapper?

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2015-02-09T08:55:46.613

No-Break Space 与 Word-Joiner 非常相似，就像它与 Space 非常相似一样。但是每个都有非常不同的用法。存在所有这些变化以表示空格字符的不同宽度和功能。

*   U+00A0 **No-Break Space** `&nbsp;`表示类似于空格字符，它可以防止自动换行。
*   U+2007 **Figure Space** `&#8199;`一个与数字 (0–9) 字符相等的空间。
*   U+202F **Narrow No-Break Space** `&#8239;`或`&nnbsp;`) 用于将后缀与词干分开，而不指示词边界。尽管可能因字体而异，但大约是普通空间的代表空间的 1/3。
*   U+2060 **Word-Joiner** `&#8288;`代表无可见字符，禁止在其位置换行。

### 其他不间断字符

*   不间断连字符 (U+2011)
*   人物空间 (U+2007)
*   狭窄的无间断空间 (U+202F)
*   西藏标记分隔符 TSHEG BSTAR (U+0F0C)

* * *

W3C 建议您在需要连接两个字符或单词时使用 Word-Joiner，以免它们换行。^(**[1]**)

> 要获得相同的功能，以前通过零宽度非中断空间提供，作者应该改用 WORD JOINER (U+2060)

但是，HTML4 字符参考中没有`Word-Joiner`提到任何地方。^(**[2]**)

> 除了这些字符之外，`SOFT HYPHEN (U+00AD)`还可用于在 UA 在其自己的连字字典中可能没有的单词中提供换行提示。

唯一明确不鼓励的字符是`ZERO WIDTH NON-JOINER (U+200C)`: 防止字符之间的连接和草书连接，否则这些字符会以草书方式连接或连接。

*   `ZERO WIDTH JOINER (U+200D)`: 鼓励结扎和草书连接。

* * *

### 参考：

1.  [W3C Wiki：HTML 字符使用](http://www.w3.org/html/wg/wiki/HTMLCharacterUsage#head-77638abc13541d600a7972b79038f55a0ad8de81_Separators_and_joiners)
2.  [HTML 4 中的字符实体引用](http://www.w3.org/TR/html4/sgml/entities.html)

* * *

### 更远：

1.  [Unicode.org 更正 U+00A0 NBSP 的 Word_Break 属性值](http://www.unicode.org/L2/L2006/06115-wordbreak.txt)
2.  [Unicode v.3.2.0 换行符属性](http://www.unicode.org/Public/3.2-Update/LineBreak-3.2.0.txt)
3.  [Unicode？提议？换行属性](http://unicode.org/reports/tr14/tr14-12.html)
4.  [Unicode v7 完整标准](http://www.unicode.org/versions/Unicode7.0.0/)
5.  [Jukka Korpela 解释的 Unicode](https://books.google.com/books?id=lxndiWaFMvMC&pg=PA274&lpg=PA274&dq=word+joiner+vs+no+break+space&source=bl&ots=Nctt5IW7IB&sig=Lge2gaBHGTjES4anyGEdEplHkDw&hl=en&sa=X&ei=NW3YVPSAOsyoogT0oILYAQ&ved=0CFsQ6AEwCQ#v=onepage&q=word%20joiner%20vs%20no%20break%20space&f=false_)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-09T11:01:21.263

HTML 中没有针对 ZWNBSP（零宽度不间断空格）的实体引用，但它与任何 Unicode 字符一样，可以使用字符引用来表示：（`&#xfeff;`或等效地，`&#65279;`）。但是，将图像保持在同一行中是无效的。图像不是字符，即使在字符之间使用，浏览器也不需要为 ZWNBSP 实现 Unicode 语义。这同样适用于 WORD JOINER，U+2060。

最有效的方法是将`img`标签包装在一个[`nobr`元素](http://www.cs.tut.fi/~jkorpela/html/nobr.html#nobr)中：`<nobr><img ...><img ...></nobr>`。虽然不是任何 HTML 规范的一部分，并且在 HTML5 草案中被称为“过时”，但此方法适用于跨浏览器。如果您宁愿以一种在禁用 CSS 时不起作用的笨拙方式来做事，您可以使用人工包装器元素并`white-space: nowrap`在其上进行设置。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-09T09:30:40.050

Try to wrap the images in a span with css property `white-space: nowrap;`:

```
<span style="white-space: nowrap;"><img ...><img ...></span> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-13T09:59:02.487

您可以访问这个网站：[符号](https://coolsymbol.com)- 它提供了对许多特殊符号和字符的轻松访问。在页面底部，您会看到“零宽度空间”字符的按钮，只需单击该按钮即可将“零宽度空间”字符复制到剪贴板中。

# html - hover on image displays text next to the image

> ID：11392316
> 
> 赞同：0
> 
> 时间：2012-07-09T09:27:13.167
> 
> 标签：html, css

I am trying to display text next to the image when the cursor is over the image. i found many codes that display the text OVER the image but Can somebody give me a code for doing that ? i tried this code but it displays the text above the image

```
<i><div class='element7' style='position: absolute; right:-250px; bottom: 400px; z-      index: 4;'>
<img src='".$donnees[1]."' height='100' width='170' /></td><p style='bottom :  300px;right : 300px;'>some text : image 1 </p></i>

<style type="text/css"> 

.element7 {
width: 730px;
height: 133px;
line-height: 0px;
color: transparent;
font-size: 50px;
font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue",     Helvetica, Arial, "Lucida Grande", sans-serif;
   font-weight: 200;
text-transform: uppercase;
-webkit-transition: all 0.1s ease;
-moz-transition: all 0.1s ease;
-o-transition: all 0.1s ease;
}

.element7 :hover {
line-height: -20px;
color: #fff;
top:100px;
left:100px;

}

.element7 img{
float: right;
margin: 0 50px;
}
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:55:33.560

取决于你如何制作你的`html`，但[这个 DEMO](http://jsfiddle.net/KdVaj/1/)作品，它只是简单的 css。如果您的 html 更复杂，您可以使用 jquery 来执行此操作。

您将鼠标悬停在容器上并显示这样的文本。

```
<div id="contain">
    <div class="fake-image"></div>
    <div class="text">some text</div>
</div>​

#contain{
    clear: both;
}

.fake-image{
    width: 100px;
    height: 100px;
    background-color: aqua;
    float: left;
    margin-right: 14px;
    cursor: pointer;
}

#contain:hover div.text{
    display: block;
}

.text{
    background-color: yellow;
    float: left; 
    display: none;    
}​ 
```

**编辑**

查看您提供的 html 完全没有意义，因为您有一个`</td>`但没有开始标签，如果这是表格的一部分，最好发布它的完整 html。

# concurrency - How to implement asynchronyous response?

> ID：11392317
> 
> 赞同：0
> 
> 时间：2012-07-09T09:27:14.800
> 
> 标签：concurrency, playframework, playframework-1.x, java.util.concurrent

I have controller with method that blocks the Play server thread due to very slow Database query. I need to implement controller method in a way that it don't block the thread. I have read documentation: [http://www.playframework.org/documentation/1.2.4/asynchronous](http://www.playframework.org/documentation/1.2.4/asynchronous)

There's absolutely no examples anywhere on how to do this. The only thing that I found close is this [https://github.com/playframework/play/blob/master/samples-and-tests/chat/app/controllers/LongPolling.java](https://github.com/playframework/play/blob/master/samples-and-tests/chat/app/controllers/LongPolling.java) It simply wraps result in await();

When I try to do that it doesn't work.

routes:

`GET /blog Controller.blog`

Controller (this is not an actual slow query but everything else is identical):

```
public static void blog() {
    String queryStr = "SELECT b FROM Blog b ORDER BY createTime DESC";
    JPAQuery q = Blog.find(queryStr);

    List<Blog> bList = q.fetch(100);
    List<BlogDTO> list = new ArrayList<BlogDTO>(bList.size());
    for (Blog b : bList) {
        BlogDTO obj = new BlogDTO(b);
        list.add(obj);
    }
    renderJSON(list);
} 
```

I tried `List<Blog> bList = await(q.fetch(100));` but that doesn't work.

I have not worked with Future and promises before. Can anyone give me any pointers on how to approach this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:35:28.197

因为 JDBC 使用阻塞 IO，任何慢速数据库查询都会阻塞一个线程。唯一的方法似乎是为此目的使用 Job。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:36:38.937

For me the best way to do this is to use a Job that returns a List object. Then in your controller you can await for the job termination :

```
public static void blog() {
    List<BlogDTO> list = await(new BlogPostJob().now());
    renderJSON(list);
} 
```

and you put your jpa code in your job

# javascript - How to Disable the Mouse wheel click Button?

> ID：11392318
> 
> 赞同：6
> 
> 时间：2012-07-09T09:27:15.943
> 
> 标签：javascript, jquery, mousewheel

I'm trying to find a way of disabling the default action of the mouse wheel button which is to open the link in a new tab.

Is that possible?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T09:32:48.797

[绑定一个专门检查中间点击的通用点击事件处理程序](https://stackoverflow.com/questions/1795734/triggering-onclick-event-using-middle-click)。在该事件处理程序中，调用`e.preventDefault()`：

```
$("#foo").on('click', function(e) { 
   if( e.which == 2 ) {
      e.preventDefault();
   }
}); 
```

请注意，并非所有浏览器都支持阻止此默认操作。对我来说，它只适用于 Chrome。Firefox、Opera 和 IE9 都不会通过鼠标中键单击引发 click 事件。他们确实提出了 mouseup 和 mousedown。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-17T11:00:32.660

这对我有用...

```
$(document).on("mousedown", "selector", function (ev) {
    if (ev.which == 2) {
        ev.preventDefault();
        alert("middle button");
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T09:44:12.487

**使用 JAVASCRIPT 禁用鼠标滚轮事件**：

在**IE**中：

```
document.attachEvent('onmousewheel', function(e){
     if (!e) var e = window.event;
     e.returnValue = false;
     e.cancelBubble = true;
     return false;
}, false); 
```

在**Safari**中：

```
document.addEventListener('mousewheel', function(e){
    e.stopPropagation();
    e.preventDefault();
    e.cancelBubble = false;
    return false;
}, false); 
```

在**歌剧**中：

```
document.attachEvent('mousewheel', function(e){
    if (!e) var e = window.event;
    e.returnValue = false;
    e.cancelBubble = true;
    return false;
}, false); 
```

在**火狐**中：

```
document.addEventListener('DOMMouseScroll', function(e){
    e.stopPropagation();
    e.preventDefault();
    e.cancelBubble = false;
    return false;
}, false); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-04T11:23:47.843

我的代码：

```
$(document).on('auxclick', 'a', function(e) {
if (e.which === 2) { //middle Click
    e.preventDefault();
    e.stopPropagation();
    e.stopImmediatePropagation();
    return false;
}
return true; 
```

# javascript - How does this JavaScript random number generator work?

> ID：11392320
> 
> 赞同：0
> 
> 时间：2012-07-09T09:27:24.260
> 
> 标签：javascript, loops, random, numbers, generator

I can’t seem to understand this loop.

```
for (i = 1; i < 50; i++) {
    rand = Math.ceil(Math.random() * 49);
    temp = nums[i];
    nums[i] = nums[rand];
    nums[rand] = temp;
} 
```

It is part of a larger code. `nums[i]` is an array of 1-49 filled with their respective index numbers, then it is run through this `for` loop and filled with random numbers.

I don’t understand why the temp variable is created, how the `nums[rand]=temp;` line of code works and what does it do, and why is it not even initialized without the `var` keyword.

Can someone explain how this loop works?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:29:35.973

What the code attempts to do is to shuffle the array. It works by going through the array, and for each position, store the value in a temp variable, pick another position in the array and swap the values with the other position.
The temp variable is required as this is the most simple way to swap the values of the variables.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:31:05.290

It's just randomly swapping two values in the nums array. Although ignoring the very first one; javascript arrays start at 0, but the loop only starts at 1, so it only starts from the 2nd array element.

So stepping through the code, every time it goes round the loop it does something like this:

```
nums = [a, b, c];  // just mocking some data

rand = 0..2;  // lets say it = 2
temp = nums[1]; // = 'b', the 2nd array element
nums[1] = temp;  // so nums[1] goes from 'b' to 'c'
nums[temp] = temp; // and nums[2] goes from 'c' to 'b' 
```

overall it's pretty bad code. If it's working with an array it should use array.length instead of hardcoding 50 for the upper limit of the loop.

# javascript - how to submit the form (without submit button) when DHTMLXslider change value?

> ID：11392322
> 
> 赞同：0
> 
> 时间：2012-07-09T09:27:33.493
> 
> 标签：javascript, html, forms, slider

I am using DHTMLXslider in a form and I want form to auto submit slider value to php file whenever slider value change. I tried using onchange and onclick event but it doesn't work. Here is my code. Is there any solution? Please help. Thanks.

```
<form method="POST" target="content" action="here.php" id="myform">
<input class="dhtmlxSlider" skin="ball" min="10" max="20" step="1" type="text" name="slider2" id="slider" style="width:200px" value="20" onclick="this.form.submit()"/>  
<br>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:45:15.933

我不清楚你的问题。检查您的应用程序是否可以。`onChange=formname.submit();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:06:13.933

尝试使用

```
onmouseup="this.form.submit();" 
```

# apache - How to redirect on custom url after NTLM authentication failure

> ID：11392325
> 
> 赞同：-1
> 
> 时间：2012-07-09T09:28:03.433
> 
> 标签：apache, ntlm, ntlmv2

I am using NTLM authentication with ldap.

![enter image description here](../Images/072fb89582a6ace4ab94966e1d4d6eb8.png)

When i click 'cancel' in the above popup, it gives 'Authorization required' message as below![enter image description here](../Images/cfa08353e2d80f7b50c3d06c4f6d5fff.png)

I want it to redirect on a custom url on 'Cancel' click. How can i achieve it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:21:35.733

取消与不进行身份验证具有相同的效果，因此您将获得取消和错误授权的 401 错误代码。[在这种情况下，您可以按照此处](http://httpd.apache.org/docs/current/custom-error.html)所述设置错误代码的自定义 URL 。如果我没记错的话，自定义错误是虚拟主机范围的，因此对于该特定域的所有身份验证错误都会显示此错误。

如果您想对其进行更多控制，则必须防止身份验证挑战在服务器级别通过 http 发生。这意味着将其降低到 Web 应用程序级别，您需要让您的页面检查身份验证是否正确发生。如果您提供静态网页，这显然是行不通的。

# c# - 设备信息 wp7

> ID：11392329
> 
> 赞同：1
> 
> 时间：2012-07-09T09:28:11.333
> 
> 标签：c#, windows-phone-7, device

我试图以编程方式检索一些设备信息，所以我使用 DeviceStatus（DeviceExtendedProperties 相同）和 Environment 类找到了我需要的东西。

是一切吗？我想获得更多信息，例如内存（“硬盘”）总/空空间，或 cpu 频率，屏幕 dpi..等。

在每个 wp7 设备的设置 > 信息中，我还可以获得更多信息，如软件/硬件版本、硬件/软件无线电版本、引导加载程序版本和处理器版本。

希望有可能获得更多的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:02:56.427

没有其他可用信息。对于可用的可用空间，您可以使用 IsolatedStorageFile 的属性 (AvailableFreeSpace)

[http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.availablefreespace(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.availablefreespace(v=vs.95).aspx)

没有其他东西可以访问（除了设备扩展属性）。

# eclipse - Trouble installing Rational Team Concert Eclipse client

> ID：11392330
> 
> 赞同：1
> 
> 时间：2012-07-09T09:28:17.127
> 
> 标签：eclipse, rtc, rational-team-concert

I'm having trouble installing the Rational Team Concert 4.0 Eclipse client onto my existing Eclipse installation.

My Eclipse installation is Eclipse Java EE IDE for Web Developers, Indigo Service Release 2.

When I try to install the RTC client into it, I get the following error:

```
Offering cannot be installed into this existing Eclipse installation configuration because it would invalidate existing bundle constraints 
```

Details:

```
Message ID: CRIMA1056E

  CRIMA1054E: Installing bundle "org.eclipse.xsd_2.6.0.v20100914-1218" into this existing Eclipse installation does not meet the version tolerance of "[2.7.0,3.0.0)" for the existing bundle "org.eclipse.xsd.edit" 
```

I checked [http://www.ibm.com/developerworks/wikis/display/rationalinstall/Install+into+an+existing+Eclipse+instance](http://www.ibm.com/developerworks/wikis/display/rationalinstall/Install+into+an+existing+Eclipse+instance), but there is not yet a section for Rational Team Concert 4.0.

Are there prerequisites I need to install into Eclipse? Does anyone have any advice?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:51:42.717

正如“[使用 Installation Manager 将 RTC Eclipse Client 4.0 安装到现有的 Eclipse 3.6.2 中](https://jazz.net/library/article/949/)”中所述，您必须使用 Installation Manager，以及一种特殊的 RTC 版本：
请参阅“ [RTC 何时支持 Eclipse 3.7 (Indigo)](https://jazz.net/forum/questions/71887/when-will-rtc-support-eclipse-37-indigo) ”

> [您可以从All Downloads 选项卡](https://jazz.net/downloads/rational-team-concert/releases/4.0?p=allDownloads)下载 p2 Install Repository zip 。
> 
> 使用 Eclipse 安装程序（帮助 -> 安装新软件）将其安装到您自己的 Eclipse 3.7 安装中

[p2 安装存储库](https://jazz.net/downloads/rational-team-concert/releases/4.0/RTC-Client-p2Repo-4.0.zip)

（确保您对 Juno 没有与[此问题](https://stackoverflow.com/questions/11261634/ibm-clearcase-plugin-installation-issue-with-eclipse-juno)类似的依赖问题，这与 RTC 无关，但也可能相关）。

其他需求在“ [CLMSystemRequirements](https://jazz.net/wiki/bin/view/Main/CLMSystemRequirements) ”中描述
（您需要一个 jazz.net 登录，但您可以轻松请求并创建一个）
（CLM 2012 的系统需求，包括 Jazz Foundation、Rational Team Concert、Rational Quality Manager 和 Rational Requirements Composer）
请参阅[“ Eclipse IDE”部分](https://jazz.net/wiki/bin/view/Main/CLMSystemRequirements#Eclipse)：RTC4.0（CLM2012 的一部分）支持 Eclipse 3.7.2。

# java - Reading values from two properties files in java?

> ID：11392331
> 
> 赞同：0
> 
> 时间：2012-07-09T09:28:18.237
> 
> 标签：java

i want to read values from two properties files. i have below code. is there any good approach? from props i am getting values.here i have servletcontext available.

```
InputStream stream = event.getServletContext().getResourceAsStream("someOne.properties");
InputStream streams = event.getServletContext().getResourceAsStream("someTwo.properties");
Properties props = new Properties();
props.load(stream);
Properties props2 = new Properties();
props2.load(streams); 
```

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:29:52.090

If you want to merge the properties of the two files, simply use the same Properties instance :

```
Properties props = new Properties();
props.load(stream);
props.load(streams); 
```

As can be verified [in the source code](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Properties.java#Properties.load%28java.io.InputStream%29) of the Properties class, old properties with the same key will be replaced but the properties with different keys won't be erased (this point doesn't seem to be explicitly specified in javadoc).

Don't forget to close the streams afterwards :

```
stream.close();
streams.close(); 
```

# android - How to get size of a custom dialog in android?

> ID：11392334
> 
> 赞同：7
> 
> 时间：2012-07-09T09:28:49.407
> 
> 标签：android, dialog, size

I have a custom Dialog which is extended from dialog. in order to place component on it, I need to know the width of the dialog. how could I do it? Thanks

EDIT:

```
public class AnswerTypeDialog extends Dialog{
    public AnswerTypeDialog(Context context) {
        super(context);
        mContext = context;
    }

    @Override
    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        init();
    }

    protected void init(){
        ll=(RelativeLayout) LayoutInflater.from(mContext).inflate(R.layout.answertype_layout, null);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(ll);
        mWindowWidth = this.getWindow().getAttributes().width;
    }
} 
```

mWindowWidth is zero.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-13T15:21:23.877

这将起作用。

```
@Override
    public void onWindowFocusChanged (boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        int height=mDialog.getWindow().getDecorView().getHeight();
    int width=mDialog.getWindow().getDecorView().getWidth();
} 
```

# mysql - Is it possible to use a single query to achieve related purchase history?

> ID：11392335
> 
> 赞同：0
> 
> 时间：2012-07-09T09:28:50.920
> 
> 标签：mysql, sql

My table consists of all order history like this:

```
table: orderhistory

OrderID       ProductID       CustomerID        Quantity        
     1                   4                       1                        1
     1                   5                       1                        2
     1                   6                       1                        1
     2                   4                       2                        1
     2                   3                       2                        1
     2                   5                       2                        1 
```

OrderID and ProductID are primary keys.
So purchase history related to product 4 consists of product 3, 5 and 6\. And product 5 should be prior to other records as it appears twice together with 4 in a single order. How can I use a single query to grab that information?

Desired result: (query for related history of product 4)

```
ProductID       Freq       
     5                   2
     6                   1
     3                   1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:45:57.277

```
select ProductID, count(ProductID) as Freq from orderhistory group by ProductID; 
```

您可以根据需要放置在哪里，例如..

```
select ProductID, count(ProductID) as Freq from orderhistory 
where ProductID in (5,6,3) group by ProductID; 
```

或者

```
select ProductID, count(ProductID) as Freq from orderhistory 
where ProductID != 4 group by ProductID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:42:44.567

以下查询将获取必要的数据。

```
SELECT 

      DISTINCT PRODUCTID

 FROM 

      [ORDERHISTORY] oh

 WHERE

      oh.OrderID IN (SELECT ORDERID FROM ORDERHISTORY WHERE PRODUCTID = 4 ) 
```

# syntax - Transforming large immutable messages

> ID：11392338
> 
> 赞同：2
> 
> 时间：2012-07-09T09:28:57.693
> 
> 标签：syntax, f#, functional-programming, immutability

Coming from an OOP background, I've got some issues with the concept of immutable objects/records/messages in functional programming.

Lets say I pass an PurchaseOrder record through a pipeline of functions where each function is supposed to add or update data in this record.

When dealing with mutable state, I would simply set some specific properties of the message beeing passed around.

When dealing immutable records, are there some design tricks making things easier on this matter? Copying every single field in order to change just one field is just a pain.

```
{ A = x.A ; B = x.B ; C = x.C ; D = x.D ; E = somethingnew; } 
```

I guess grouping data as much as possible is a good way to deal with it, thus avoiding to copy all fields. Are there any other ways or design guidelines for this?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T09:38:51.513

你可以做

```
 let myRecord3 = { myRecord2 with Y = 100; Z = 2 } 
```

（来自 MSDN 记录页面的示例 - [http://msdn.microsoft.com/en-us/library/dd233184.aspx](http://msdn.microsoft.com/en-us/library/dd233184.aspx)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T02:54:11.240

我来自一个非常纯粹和极端主义的 OOP 背景，我的 OOP 设计往往是 99% 的不可变对象（即使是允许变异的语言）。如果您有一个函数管道，其中每个函数都应该添加或更新记录中的数据，根据我的经验，每个函数都将处理该记录的子问题和子概念，因此您应该为每个函数创建一个类/类型/任何内容其中遵循 OOP 最佳实践，如[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)、[SoC](http://en.wikipedia.org/wiki/Separation_of_concerns). 如果任何类/记录/类型有超过 4 或 5 个字段/变量/属性，我认为您可能在那里承担了太多责任。如果将问题拆分为多个子问题，则管道的每个函数都会创建记录的子记录，而主函数会将它们全部组合起来以创建主记录。根据我遵循传统 OOP 的经验，您可以进行一种设计，使您能够在没有任何变化的情况下实现您想要实现的目标。

# iphone - How to load two arrays into the same tableview?

> ID：11392339
> 
> 赞同：5
> 
> 时间：2012-07-09T09:29:00.983
> 
> 标签：iphone, ios, ipad

I have an iPhone application in which I want to add two arrays to the same tableview, ie news array and deals array, which are returned by a web service. I need to load them in the same view, ie in a tableview, as if loading from a single array. Can anybody help me in achieving this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:14:23.400

最后我把它弄成这样。首先取两个数组。然后将它合并到一个数组中，然后从该数组中加载表格视图。如果你需要单独的操作，那么在你的 didselect 方法中检查对象是否包含在第一个数组中然后做某事，否则做另一件事...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:38:01.050

将代码放在将`news`和`deals`数组视为两个单独部分的委托方法中。例如，使用[`-tableView:cellForRowAtIndexPath:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006941-CH3-SW6)来填充具有索引路径的第一组单元格和具有`news`索引路径的第二组单元格`deals`。查看[`UITableViewDataSource`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006941-CH3-DontLinkElementID_1)委托协议。

# iphone - One pixel between two UITableViewCellStyleDefault cells -- Can't draw over it

> ID：11392340
> 
> 赞同：1
> 
> 时间：2012-07-09T09:29:03.650
> 
> 标签：iphone, ios, uitableview, uibutton

I want to draw 2 buttons in one cell and when the button is pressed, the blue image will cover half of the cell.

But there is 1 pixel I can't draw.

Here is the situation:

![enter image description here](../Images/d40fcca921634ee702ba59110b83bb35.png)

And the code:

```
[self addGood12ToView:cell.contentView productDetail:productDetail]; 
```

In this function, I called:

```
UIButton *lbGood1 = [UIButton buttonWithType:UIButtonTypeCustom];
[lbGood1 setFrame:CGRectMake(0, 0, 150, lbGood1_Size.height+19)];
...
[cell.contentView addSubview:lbGood1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:00:50.527

检查这可能对您有帮助。

```
self.yourTableView.separatorStyle=UITableViewCellSeparatorStyleNone; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:59:50.610

在检查器中将 Single Line Etched 更改为“separator: Single Line”。祝你好运

从 Apple 文档编辑 1

ell 分隔符样式 用作分隔符的单元格样式。

```
typedef enum {
    UITableViewCellSeparatorStyleNone,
    UITableViewCellSeparatorStyleSingleLine,
    UITableViewCellSeparatorStyleSingleLineEtched
} UITableViewCellSeparatorStyle; 
```

常数

```
UITableViewCellSeparatorStyleNone 
```

隔板没有明显的风格。在 iOS 2.0 及更高版本中可用。宣布于`UITableViewCell.h.`

```
UITableViewCellSeparatorStyleSingleLine 
```

隔板有一条横穿其宽度的线。这是 iOS 2.0 及更高版本中可用的默认值。中宣布`UITableViewCell.h`。

```
UITableViewCellSeparatorStyleSingleLineEtched 
```

**隔板有双线横跨其宽度，使其具有蚀刻外观。此样式当前仅支持分组样式表视图。**

# extjs - Ext.MessageBox.show() 不显示消息

> ID：11392352
> 
> 赞同：1
> 
> 时间：2012-07-09T09:29:39.627
> 
> 标签：extjs, sencha-touch-2

我目前正在从一本书中学习 Sencha Touch。按照示例对我不起作用：

```
Ext.require('Ext.data.Store');
Ext.require('Ext.dataview.List');
Ext.require('Ext.MessageBox');
new Ext.application({
  name: 'TouchStart',
  launch: function() {
    this.viewport = new Ext.Panel ({
      fullscreen: true,
      items: [{
        docked: 'top',
        xtype: 'toolbar',
        ui: 'light',
        items: [{
          text: 'Panic',
          handler: function(){
            Ext.Msg.alert('Don\'t Panic!','Keep calm');
          }
        },
        {
          text:'Greetings',
          handler: function() {
            Ext.Msg.prompt('Greetings!','What is your name?',
            function (btn,text){
              var response = new Ext.MessageBox().show({
                title: 'Howdy',
                msg: 'Pleased to meet you ' + text,
              });
            });
          }
        }]
      }]
    });
  }
}); 
```

特别是：

```
new Ext.MessageBox().show({
  title: 'Howdy',
  msg: 'Pleased to meet you ' + text,
}); 
```

当我运行它时，只显示标题，不显示任何消息：

![问题](../Images/04c6947d4093833818ded1b10d96162f.png)

任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T09:43:13.133

试试这个：

```
new Ext.MessageBox().show({
   title: 'Howdy',
   message: 'Pleased to meet you ' + text,
}); 
```

# sql - 使所有选项成为必需

> ID：11392358
> 
> 赞同：1
> 
> 时间：2012-07-09T09:29:58.017
> 
> 标签：sql, opencart

我的 opencart 客户端没有做出所有需要的选项，这意味着客户端可以结账而无需选择尺寸或颜色等。

有没有办法更新这个而不必在管理员中手动更新产品？我已经搜索了 SQL 数据库以查看是否有所需的文件，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:29:16.307

使用 SQL，您可以使用

```
UPDATE `product_option` SET `required` = 1 
```

假设您没有表前缀。如果这样做，请将 `product_option` 更改为 `your_prefix_product_option`

# ruby-on-rails - HTTP basic authentication - additional date parameter (Rails)

> ID：11392360
> 
> 赞同：0
> 
> 时间：2012-07-09T09:30:05.787
> 
> 标签：ruby-on-rails, security, authentication, authlogic, basic-authentication

I'm writing a rails web service and i would like to use authlogic for authentication, since this seems to be one of the most used and active authentication gem. Our clients should be abled to authenticate with their user credentials, so i deciced to use http basic auth (authenticate_or_request_with_http_basic) with ssl.

I would like to add some more security by replacing the original password for authentication by a hash of password, url and request time to ensure that a request can be used only in a short time window. Since webservice and client time are not synchronized, i have to send the client time besides the login credentials. How can i add the client date to the authentication header and read it using the authenticate_or_request_with_http_basic method?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:05:06.127

为什么需要将时间详细信息发送给客户？您可以存储身份验证服务器端的 TTL，并根据该 TTL 验证所有未来的请求。

成功的身份验证可能会导致向客户端发送一条消息，说他们有 xxx 分钟/天（TTL）来做他们需要做的事情。当 TTL 过期时，您的 Web 服务应该向客户端返回中性响应（就像身份验证尝试失败一样 - 以保护自己免受黑客攻击）。

最好不要乱用客户日期信息。如果他们机器上的日期有误怎么办？

更新：我仍然担心整个客户约会的事情。看看其他人如何[使用 rails 实现 API](http://www.djkiger.com/?p=41)

# android - While importing project in eclipse workspace showing error invalid project description?

> ID：11392361
> 
> 赞同：1
> 
> 时间：2012-07-09T09:30:25.737
> 
> 标签：android

I have taken code from server repository in a folder in D drive. while i import project in workspace it shows error invalid project description ?what is solution of it.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T13:04:52.600

您的项目位置不应与当前工作空间的位置相同。将项目复制到其他位置并尝试导入...确保当前工作空间中不存在同名文件夹。

检查此[链接](https://stackoverflow.com/questions/5784652/eclipse-invalid-project-description-when-creating-new-project-from-existing-so)以获得更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:34:37.733

尝试创建一个新的 Android 项目并选择“从现有源创建”（执行此操作的确切方法因您拥有的 ADT 版本而异）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T19:28:07.870

将您的项目文件夹降低或提高一个目录。

例如，如果您的项目文件夹路径是： C:\ProjectFolder ，则将其移动到新的位置，例如 C:\NewFolder\ProjectFolder 。现在导入这个 ProjectFolder .Bingo。

希望能帮助到你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T07:10:52.673

您的工作区中可能有另一个项目 .. 指向相同的位置

# php - Wordpress h1 title on static home and h2 on other pages not working

> ID：11392362
> 
> 赞同：1
> 
> 时间：2012-07-09T09:30:32.653
> 
> 标签：php, wordpress, tags, title

I'm using this code with success on some wordpress installation, but with my new theme it doesn't work.

```
<?php echo is_home() ? '<h1>' : '<h2>'; ?>
 <a href="<?php echo home_url(); ?>/">
    <?php bloginfo('name'); ?>
 </a>
 <?php echo is_home() ? '</h1>' : '</h2>'; ?> 
```

On this website I have a static page as front page which might be the reason of it not working.

I'm not so good with PHP so any help would be appreciated. I guess if i call the page name instead of home it might work but not sure about the syntax

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:37:33.487

尝试将 is_home() 更改为 is_front_page() ，这应该对其进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:06:42.697

不应该所有页面标题都使用H1吗？你在“其他页面”的H1中放了什么？

如果您将网站标题放在那里，您可能会重新考虑这样做。因为网站标题不应该是 H1。这是因为谷歌看到你所有的页面都有相同的 H1 标签，这对你在谷歌中的页面排名有负面影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:37:42.380

你想用这段代码做什么？哪个部分不工作？是三元运算符没有显示 h1/h2 还是 php 函数没有打印出正确的信息？

# android - How to store cookies values in an Android device using Phonegap and jQuery Mobile?

> ID：11392364
> 
> 赞同：4
> 
> 时间：2012-07-09T09:30:34.397
> 
> 标签：android, jquery, jquery-plugins, jquery-mobile, cordova

I am developing an app using jQuery1.6.1, Phonegap 1.5(cordova-1.5.0.js), jQuery Mobile 1.0.1, and the cookies plugin (jquery.cookies.2.2.0.js) in Android.

I want to set cookies in one page and want to access the same cookies in another page.

To Set

```
$.cookies.set('sample', 'Cookies_Value'); 
```

To Get

```
 $.cookies.get('sample'); 
```

While accessing the app on device, I am unable to set and get the cookies values. Is there any other way to store the cookies in device?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-19T11:06:38.227

在 Android 上将 cookie 与 PhoneGap/Cordova 一起使用是不可靠的，因此我建议改用**[localStorage](http://www.html5rocks.com/en/features/storage)**。

就这么简单：

*   设置一个值：`window.localStorage.setItem("sample", "value");`
*   获取值：`window.localStorage.getItem("sample");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:17:22.897

在您登录后的第一个 html 页面中（我想您必须登录）..... 使用 javascript write document.cookie=""; .. 它将沿着稍后将调用的每个网页传递..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:49:35.063

我已经在不同的模拟器版本中测试了相同的应用程序。

我能够将 cookie 存储在 Android 2.2 中。但它不适用于 Android 4.0.3。

据我了解，最新的 android 版本（Android 4.0.3）不支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T08:17:58.007

我不认为 Phonegap 提供存储 cookie 的功能。

因为您已经在使用 JQuery。你可以看看下面的插件。

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

希望这有帮助。

# javascript - knockout partial binding issue

> ID：11392367
> 
> 赞同：0
> 
> 时间：2012-07-09T09:30:52.540
> 
> 标签：javascript, knockout.js, knockout-2.0

I have just come across a problem which is quite bizarre, where I have multiple applyBindings() but they all target different elements. Now this all used to work fine, as it would all happen once all resources were loaded (a yepnope complete callback), however now its happening based on an event being raised (from our internal event system) it seems to have a weird error (saying view model does not have observable, but its because its not looking in the right one).

The issue is that the last binding seems to for some reason overwrite all other bindings, so if I had 4 elements with unique ids and 4 view models each which are bound to their coresponding element, so I would expect the bindings to occur like so:

```
element_a -> view_model_a
element_b -> view_model_b
element_c -> view_model_c
element_d -> view_model_d 
```

However for some reason the bindings seem to change when view_model_d is bound so they all become:

```
element_a -> view_model_d
element_b -> view_model_d
element_c -> view_model_d
element_d -> view_model_d 
```

As I said this used to work fine, but since we turned to an asynchronous way of applying the bindings it seems to be a bit broken, all of the bound elements are in the html and self contained (i.e none of them are dynamically injected and dont overlap in the DOM). Also when debugging in firebug the viewmodels and the elements are correct and not undefined, which could have explained why the last one called would overwrite all others.

I would try and do a jsfiddle but due to the complex nature of the project and the external templates and dependencies it would not be possible.

All things point to me doing something wrong, not KnockoutJS, but I cannot understand why it used to work fine the only thing that has changed is the order and timing of the apply bindings.

Anyone ever seen applyBindings bleeding over into other elements or overwriting previous bindings before?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:32:28.967

像往常一样，答案归结为我是个白痴。由于我使用了一个使用 templateUrl 作为其选项之一的外部模板加载器，出于某种原因，它是 templateurl，由于某种原因，它最初必须有效，但由于现在加载的顺序，它正在重新加载同一页面，不是所需的模板，这意味着将重新加载整个页面绑定:(

# iphone - 使用缩放后 MKMapView 应用程序崩溃

> ID：11392376
> 
> 赞同：1
> 
> 时间：2012-07-09T09:31:15.123
> 
> 标签：iphone, objective-c, ios, mkmapview, mapkit

首先，MKMapView 中只有用户位置。经过一些操作后，我调用方法： `[self mapView:self.mapView didAddAnnotationViews:self.pointersArray];` 我的`didAddAnnotationViews`方法：

```
-(void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    if (views.count == 1) {
        MKAnnotationView *annotationView = [views objectAtIndex:0];
        id<MKAnnotation>mp = [annotationView annotation];
        MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([mp coordinate], 500, 500);
        [mapView setRegion:region animated:YES]; 
    }
    else {
        [mapView addAnnotations:views];
    } 
} 
```

在不使用缩放之前，应用程序不会崩溃。但是当缩放使用超过 10 次（大约）时，我会在这个`[mapView addAnnotations:views];`或有时在`return UIApplicationMain(argc, argv, nil, NSStringFromClass([BIDAppDelegate class]));`. 错误 - `EXC_BAD_ACCESS`。有我的问题吗？

**编辑**

更改为`[self.mapView setRegion:region animated:YES];`但现在我在主线程中有错误`MKNormalizedPointForLayer EXC_BAD_ACCESS`。通常缩放工作正常，应用程序在使用缩放 7 次或更多次后崩溃。我的按钮操作：

```
- (void)showKantorsOnMap {
    if (self.kantorsData.count != self.pointersArray.count) {
        NSLog(@"need to wait more");
    }
    NSMutableArray *toRemove = [[NSMutableArray alloc] init];
    for (id annotation in self.mapView.annotations)
    if (annotation != self.mapView.userLocation)
        [toRemove addObject:annotation];
    [self.mapView removeAnnotations:toRemove];
    [self.mapView addAnnotations:self.pointersArray];
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(self.mapView.userLocation.coordinate,6500, 6500);
    [self.mapView setRegion:region animated:YES]; 
} 
```

**解决方案** 问题出在称为递归的`didAddAnnotationViews`方法中。`[mapView addAnnotations:views];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:41:15.473

而不是使用上面的代码，你可以尝试这些代码..这对我有用......

在 NSObject 下创建新类并在 mapclass.h 中命名为 MapClass

```
 #import <UIKit/UIKit.h>
 #import <MapKit/MapKit.h>

@interface MapClass : NSObject <MKAnnotation>{
CLLocationCoordinate2D coordinate;
NSString *title;
NSString *subtitle;
}
@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle; 
@end 
```

在 MapClass.m 文件中

```
#import "MapClass.h"

@implementation MapClass
@synthesize coordinate,title,subtitle;
@end 
```

将其插入 .h 文件

```
#import <MapKit/MapKit.h>
@interface MapViewController : UIViewController

{

MKMapView *mapview;

}

@property (nonatomic, retain) IBOutlet MKMapView *mapview;
@end 
```

将其插入 .m 文件

```
[mapview setMapType:MKMapTypeStandard];
    [mapview setZoomEnabled:YES];
    [mapview setScrollEnabled:YES];

    MKCoordinateRegion region = { {0.0, 0.0 }, {0.0, 0.0 } };
    region.center.latitude = xxx;//your longitude
    region.center.longitude = xxx;//your latitude
    region.span.longitudeDelta = 0.01f;
    region.span.latitudeDelta = 0.01f;
    [mapview setRegion:region animated:YES];

    MapClass *ann = [[MapClass alloc] init];
    ann.title = @"Title";
    ann.subtitle = @"Subtitle.";
    ann.coordinate = region.center;
    [mapview addAnnotation:ann]; 
```

//mapview 是 .h 文件中声明的 MKmapview 的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:20:03.620

首先，您不应该`didAddAnnotationViews`自己调用委托方法。地图视图本身将在实际显示您添加到地图的注释后调用它（使用`addAnnotation`或`addAnnotations`）。

其次，在该方法中，这一行：

```
[mapView addAnnotations:views]; 
```

至少有两个原因是错误的：

*   该`views`参数是一个`NSArray`（*不是*对象）`MKAnnotationViews`。该方法需要一个对象。 *`id<MKAnnotation>``addAnnotations``NSArray``id<MKAnnotation>`*
**   `addAnnotations`在委托方法内调用`didAddAnnotationViews`可能不是一个好主意（可能会导致委托方法被递归调用导致堆栈溢出）*

 *最后，如果您想缩放地图以显示所有注释，已经有许多可能的解决方案的答案（例如，搜索“mkmapview annotations region fit zoom”或类似的东西）。以下是您可以尝试的一些答案：

*   [缩放 MKMapView 以适应注释图钉？](https://stackoverflow.com/questions/4680649/zooming-mkmapview-to-fit-annotation-pins)
*   [定位 MKMapView 以一次显示多个注释](https://stackoverflow.com/questions/1336370/positioning-mkmapview-to-show-multiple-annotations-at-once)
*   [在 MapKit 中缩小和适合所有注释的最佳方法是什么](https://stackoverflow.com/questions/4169459/whats-the-best-way-to-zoom-out-and-fit-all-annotations-in-mapkit)

基本上，循环遍历`mapView.annotations`数组以找到最小和最大纬度/经度值。然后从中创建一个`MKCoordinateRegion`（中心是中点，增量是差异）。然后调用`setRegion`。*

# php - .htaccess 不会将 /something 重写为 index.php?menu=something。它显示了一些东西.htm

> ID：11392377
> 
> 赞同：0
> 
> 时间：2012-07-09T09:31:22.523
> 
> 标签：php, .htaccess, mod-rewrite

我希望我的网站将 URI 视为查询字符串的一部分。
使用**sub.domain.cz/something**正确访问时，它可以正常工作。
如果我既不使用**www**也不使用**sub**，它会重写 URL 并工作。
但是当我使用**www时，它会将****www.domain.cz**重写为**sub.domain.cz**，但它显示**sub.domain.cz/something.htm**而不是威胁**“某物”之**类的参数。

我认为多次使用存在问题，但添加`Options -MultiViews`并没有改变任何东西（删除`!-f`使它失去与样式的联系）。

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www\.)?domain\.cz$ [NC]
RewriteRule ^(.*)$ http://sub.domain.cz/$1 [L,R=301]

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteCond %{REQUEST_URI} !=style.css
RewriteRule ^(.*)$ index.php?menu=$1 [L,QSA] 
```

我不是任何专家。大多数情况下，我只是在尝试我在 Internet 上找到的一堆东西，同时尝试理解它们以备将来使用。但现在我不知道出了什么问题。我试过改变顺序和标志。也许所有这些都改变了一些东西，但我看不到。请问你有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:51:02.780

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www\.)?domain\.cz$ [NC]
RewriteRule ^(.*)$ http://sub.domain.cz/$1 [L,R=301]

RewriteBase /something/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteCond %{REQUEST_URI} !=style.css
RewriteRule ^(.*)$ index.php?menu=$1 [L,QSA] 
```

# java - 泛型实际上是什么意思？

> ID：11392380
> 
> 赞同：53
> 
> 时间：2012-07-09T09:31:26.723
> 
> 标签：java, generics

> **可能重复：**
> [List<?> 在 java 泛型中是什么意思？](https://stackoverflow.com/questions/1844770/what-does-list-mean-in-java-generics)
> [Java泛型的类型参数中的问号是什么意思？](https://stackoverflow.com/questions/3009745/what-does-the-question-mark-in-java-generics-type-parameter-mean)

道歉，但很难尝试搜索`<?>`。

关于 Java 泛型是什么意思？我理解`<A extends B>`and `<A super B>`，但我以前从未单独见过这个问号。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-09T09:34:00.783

`<?>`是 的简写`<? extends Object>`，也称为*无界通配符*。因此，您可以在泛型中指定任何类型的对象。

例如，`List`该类被声明为`List<?>`，因为它可以是您想要的任何内容的列表。

* * *

**资源：**

*   [有效的java - 泛型.pdf](http://java.sun.com/docs/books/effective/generics.pdf)
*   [Java 语言规范 - 类型参数和通配符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)
*   [oracle.com - Java 教程，通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-09T09:34:18.607

它是一种`wildcard`类型。它是缩写`? extends Object`

如果你明白了，你只知道它是一个`Object`. 如果您尝试设置，则无法设置，因为它可能是 Object 的任何子类。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T09:35:59.057

通配符 Generic 是“某物”。它将作为从 Object 扩展而来的东西来处理。

来自 Java[文档](http://docs.oracle.com/javase/tutorial/java/generics/wildcards.html)：

> 在通用代码中，称为通配符的问号 (?) 表示未知类型。通配符可用于多种情况：作为参数、字段或局部变量的类型；有时作为返回类型（尽管更具体的是更好的编程实践）。通配符永远不会用作泛型方法调用、泛型类实例创建或超类型的类型参数。

因此，例如，a`List<?>`是一个包含未知类型对象的列表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T09:35:39.853

它是一个通配符。假设您有一个集合，但该集合的类型未知，因此您用“？”表示它。它只是指定类型未知。有关更多详细信息，请参阅[http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf) 我相信它会有所帮助。

# paypal - 用于实施退款和虚拟积分的贝宝支付网关

> ID：11392386
> 
> 赞同：2
> 
> 时间：2012-07-09T09:31:49.063
> 
> 标签：paypal, credit-card, paypal-adaptive-payments, credits

我们想为澳大利亚国家/地区集成 Paypal，在这里我们尝试使用 Website Payment Pro 方法通过使用 Website Payment Pro 的 DoNonReferencedCredit API 向客户信用卡/借记卡退款。但是这个 API 在澳大利亚不起作用。

在我们的应用程序中，我们使用了自适应支付网关的退款方式。通过在客户进行支付时使用自适应支付网关，它会为每笔关联交易创建交易 ID（支付密钥）。在我们的网站上，客户可以要求全额退款或记入他们之前在结账时进行交易的金额。

1) 对于全额退款，可以在该交易的 90 天内使用自适应支付系统的 Refund() 方法退还金额。

2) 对于 Credit Amount 选项我们将带有客户 ID 的贷记金额保存在我们的数据库中。根据我们数据库中保存的值，客户在其帐户中拥有贷记金额作为余额。为了在网站上进一步购物，客户可以使用他们的信用（余额）金额在结帐页面支付金额，该金额实际上存储在数据库中而不是贝宝上，在这种情况下，我们无法使用自适应支付系统创建参考交易 ID（支付密钥）因此，如果客户再次要求通过这些非参考交易全额退款（虚拟支付的金额），则 Refund() 方法无法执行或退款，因为交易未记录在贝宝上，余额几乎在主要的贝宝持有账户上.

# php - ajax jquery调用codeigniter中的函数后，会话值被破坏

> ID：11392389
> 
> 赞同：0
> 
> 时间：2012-07-09T09:31:59.273
> 
> 标签：php, codeigniter, jquery

`function ResponseOnline($qid,$response)`当我通过 ajax jQuery传递一些值时，我无法同时存储新会话值和旧会话值。

这是我的问题

**1** . 在会话中登录一些值存储后

**2** . 然后我通过ajax jquery将一些值传递给函数并将其存储在数组中，然后存储在会话中。

**3** . 当我通过 ajax jquery 获得会话值时，我做对了，

**4** . 但是当我传递第二个值时，我会丢失我在前一次传递中存储的会话值。

这是我的函数调用：

```
public function ResponseOnline($qid,$response)
  {

 $d=$qid;

 $s=$response;

if($this->session->userdata('countnew')==0)   //  algo for this function i check the                                       
                                               //countnew session varaible   if 0 do this 
{                                                
$sc=$this->session->userdata('countnew');     // store the countnew variable
echo $sc=$sc+1;                               // increment the counter variable
$this->session->set_userdata('countnew',$sc);  // store it in session 

echo $this->session->userdata('countnew');
$r2[$d]=$s;                               // store array value $r2 with key $d and 
$this->session->set_userdata('res',$r2);  //set this array value in session 
}
else{                                  // if session countnew!=0 then do this
$r2=$this->session->userdata('res');  // first store $r2 as array return from session
 $r2[$d]=$s;                         //then add value to this array                      

 $this->session->set_userdata('res',$r2); // storing this array to session
}
echo '<pre>';
print_r($r2);       // printing the array

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:11:43.717

```
public function ResponseOnline($qid,$response)
{
    if($this->session->userdata('res'))
    {
         $result = $this->session->userdata('res');
         $result[$qid] = $response;
         $this->session->set_userdata($result);
    }
    else
    {
         $result = array();
         $result[$qid] = $response;
         $this->session->set_userdata($result);
    }
} 
```

# lwuit - 如何使用 LWUIT 位图字体？

> ID：11392403
> 
> 赞同：1
> 
> 时间：2012-07-09T09:32:57.110
> 
> 标签：lwuit, bitmap-fonts

我正在尝试在波斯语的 J2ME 应用程序中使用 LWUIT BitmapFonts ...请帮助我如何完成这项工作...

致以最诚挚的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:38:51.740

1.  在您的系统中安装波斯语字体。现在，波斯语将在资源编辑器中可用。
2.  选择安装的字体后，在资源编辑器中创建字体。现在，将创建位图字体。
3.  在您的应用程序中导入该字体并使用它。

# java - 如何使用带有 JBOSS 工具的 hibernate 在数据库中添加新记录？

> ID：11392404
> 
> 赞同：1
> 
> 时间：2012-07-09T09:33:02.710
> 
> 标签：java, mysql, hibernate, pojo, jboss-tools

我正在使用 Eclipse 和 JBOSS 工具从 MySQL 生成休眠类。工资表有复合键，一个是 FK(userId)，一个是 AUTO_INCREMENT。所以 JBOSS Tool 生成了 Salary 和 User 类，它也生成了 SalaryId 类。我在 User 类的 getSalaries 方法中添加了级联，但是当我尝试保存新用户时，我总是得到异常： **org.hibernate.exception.ConstraintViolationException：无法添加或更新子行：外键约束失败**

有没有人有任何想法可以帮助我解决这个问题？谢谢大家~

下面是我的表结构：

```
CREATE TABLE IF NOT EXISTS `salary` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `userId` int(11) NOT NULL,
 `amount` int(11) NOT NULL,
 `comingDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 PRIMARY KEY (`id`,`userId`),
 KEY `userId` (`userId`)
) 
```

下面是我生成的类：[用户类]

```
@Entity
@Table(name = "user", catalog = "lab")
public class User implements java.io.Serializable {

    private Integer id;
    private String name;
    private String password;
    private String email;
    private Set<Salary> salaries = new HashSet<Salary>(0);

    public User() {
    }

    public User(String name, String password, String email, Set<Salary> salaries) {
        this.name = name;
        this.password = password;
        this.email = email;
        this.salaries = salaries;
    }

    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "id", unique = true, nullable = false)
    public Integer getId() {
        return this.id;
    }
    public void setId(Integer id) {
        this.id = id;
    }

    @Column(name = "name", nullable = false, length = 100)
    public String getName() {
        return this.name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @Column(name = "password", nullable = false, length = 100)
    public String getPassword() {
        return this.password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

    @Column(name = "email", nullable = false, length = 50)
    public String getEmail() {
        return this.email;
    }
    public void setEmail(String email) {
        this.email = email;
    }

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "user", cascade = CascadeType.ALL)
    public Set<Salary> getSalaries() {
        return this.salaries;
    }
    public void setSalaries(Set<Salary> salaries) {
        this.salaries = salaries;
    }
} 
```

[薪资等级]

```
@Entity
@Table(name = "salary", catalog = "lab")
public class Salary implements java.io.Serializable {

    private SalaryId id;
    private User user;
    private int amount;
    private Date comingDate;

    public Salary() {
    }

public Salary(SalaryId id, User user, int amount) {
        this.id = id;
        this.user = user;
        this.amount = amount;
    }

    public Salary(SalaryId id, User user, int amount, Date comingDate) {
        this.id = id;
        this.user = user;
        this.amount = amount;
        this.comingDate = comingDate;
    }

    @EmbeddedId
    @AttributeOverrides({
            @AttributeOverride(name = "id", column = @Column(name = "id", nullable = false)),
            @AttributeOverride(name = "userId", column = @Column(name = "userId", nullable = false)) })
    public SalaryId getId() {
        return this.id;
    }

    public void setId(SalaryId id) {
        this.id = id;
    }

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "userId", nullable = false, insertable = false, updatable = false)
    public User getUser() {
        return this.user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    @Column(name = "amount", nullable = false)
    public int getAmount() {
        return this.amount;
    }

    public void setAmount(int amount) {
        this.amount = amount;
    }

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "comingDate", nullable = false, length = 19)
    public Date getComingDate() {
        return this.comingDate;
    }

    public void setComingDate(Date comingDate) {
        this.comingDate = comingDate;
    }
} 
```

以下是 JBOSS Tool 自动生成的：

[SalaryId 类]

```
@Embeddable
public class SalaryId implements java.io.Serializable {

    private int id;
    private int userId;

    public SalaryId() {
    }

    public SalaryId(int id, int userId) {
        this.id = id;
        this.userId = userId;
    }

    @Column(name = "id", nullable = false)
    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @Column(name = "userId", nullable = false)
    public int getUserId() {
        return this.userId;
    }

    public void setUserId(int userId) {
        this.userId = userId;
    }

    public boolean equals(Object other) {
        if ((this == other))
            return true;
        if ((other == null))
            return false;
        if (!(other instanceof SalaryId))
            return false;
        SalaryId castOther = (SalaryId) other;

        return (this.getId() == castOther.getId())
                && (this.getUserId() == castOther.getUserId());
    }

    public int hashCode() {
        int result = 17;

        result = 37 * result + this.getId();
        result = 37 * result + this.getUserId();
        return result;
    }
} 
```

【主班】

```
transaction = session.beginTransaction();
SalaryId salaryId = new SalaryId();
Set<Salary> salaries = new HashSet<Salary>();

User user = new User();
user.setName("JW");
user.setPassword("123456");
user.setEmail("jjj@jj.cc");

salaries.add(new Salary(salaryId, user, 10000));
user.setSalaries(salaries);

session.save(user);

transaction.commit(); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T10:18:03.403

尝试这样做：

```
transaction = session.beginTransaction();
SalaryId salaryId = new SalaryId();
Set<Salary> salaries = new HashSet<Salary>();

User user = new User();
user.setName("JW");
user.setPassword("123456");
user.setEmail("jjj@jj.cc");

session.save(user);

salaries.add(new Salary(salaryId, user, 10000));
//user.setSalaries(salaries);

transaction.commit(); 
```

# visual-studio-2010 - 1000个并发用户的负载测试

> ID：11392406
> 
> 赞同：7
> 
> 时间：2012-07-09T09:33:05.430
> 
> 标签：visual-studio-2010, load-testing

我们计划使用 Visual Studio 2010 负载测试对我们的应用程序进行压力测试。我们想知道我们的 MVC3 应用程序是否可以处理 1000 个并发用户。

为此，我们需要多少台物理机器？

我们目前的计划如下。

1.  服务器 1（Web 服务器 + MS SQL）：此服务器用于托管我们的应用程序。
2.  服务器 2（测试控制器 + 它的数据库）
3.  机器 1（200 个并发用户的测试代理 1）* 5

所以，看起来我们需要 7 台物理机。我们是否高估了物理机器？任何负载测试 1000 个并发用户的想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:50:28.630

根据我在负载测试方面的经验，`Visual Studio 2010`我建议：

1.  上`server2`你也可以加一个`Test Agent`。控制器不是一个繁重的过程。它的工作只是在代理之间共享测试并控制它们。
    它还收集`Data and Diagnostics`，但我建议遵循此[MSDN 帖子](http://msdn.microsoft.com/en-us/library/ff426235.aspx)而不使用它们。
2.  我认为 1000 个用户的 5 个代理太多了。我可以为每个代理运行大约 700-800 个用户。当然，这取决于硬件和`Unit Tests/ Web Performance Tests`您在负载测试中使用的内容。
3.  除非这是您项目的生产部署方案，否则我建议您将与您`server1` 分开，因为在负载测试时两者都需要更多和.`Web Server``Db``CPU``Memory`

# android - 具有多行的 ListView

> ID：11392410
> 
> 赞同：0
> 
> 时间：2012-07-09T09:33:17.273
> 
> 标签：android, listview

在我的应用程序中，我将数据库显示在`ListView`. 在那我有2列。我将从数据库中检索数据并显示在`ListView`. 我的问题出在数据库中，在显示第一个条目后它应该进入下一行并打印下一个条目，但事实并非如此，它是按列显示的。请帮我。

我的代码如下：

```
ListView lv=(ListView)findViewById(R.id.listView1);  
db.open();
Cursor c = db.getAllTitles();
startManagingCursor(c); 
System.out.println("cursor="+c.getCount());
String[] from = new String[] { db.KEY_INCOME,db.KEY_INCOME};
int[] to = new int[] {R.id.text1 ,R.id.text2,R.id.text3};
SimpleCursorAdapter notes =
      new SimpleCursorAdapter(this, R.layout.columnview, c, from, to);
//    System.out.println("notes="+notes.getCount());
//    setListAdapter(notes);    
lv.setAdapter(notes);    
System.out.println("subbu");
//    System.out.print("tot="+db.add().toString());
String sumtotal=  db.add(); 
```

我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">    
    <TextView android:id="@+id/text3"   
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:drawSelectorOnTop="false" >
    </ListView>  
</LinearLayout> 
```

我的 column.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:paddingTop="4dip"
    android:paddingBottom="6dip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView android:id="@+id/text1"       
        android:textSize="18sp"
        android:layout_width="30dip"
        android:layout_height="wrap_content"/>
    <TextView android:id="@+id/text2"
        android:textSize="18sp"
        android:layout_width="110dip"
        android:layout_height="wrap_content" 
        android:layout_marginLeft="100dp"
        android:layout_weight="1"/>
    <TextView android:id="@+id/text3"       
        android:textSize="18sp"
        android:layout_width="30dip"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:50:53.157

**问题：**

问题是您给出了两列 db 和三列`TextView`。*这里*

```
String[] from = new String[] { db.KEY_INCOME,db.KEY_INCOME};
int[] to = new int[] {R.id.text1 ,R.id.text2,R.id.text3}; 
```

**解决方案：**

添加另一列或从中删除任何`TextView`id `int[] to`，这意味着 和 的长度`String[] from`应该`int[] to`相同。

# javascript - 使用 Javascript 对 cookie 进行排队

> ID：11392411
> 
> 赞同：0
> 
> 时间：2012-07-09T09:33:17.593
> 
> 标签：javascript, cookies

有没有办法使用 javascript 来阻止立即设置 cookie 并可能将它们排队？例如，谷歌分析 cookie？

我很抱歉，这个问题没有更详细，但我不知道在哪里看，我已经尝试搜索各种术语。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:52:04.953

试试这个

> [http://www.civicuk.com/cookie-law/index](http://www.civicuk.com/cookie-law/index)

它是一个现成的解决方案

# c# - 为具有 ACL 的用户设置只读文件夹

> ID：11392413
> 
> 赞同：0
> 
> 时间：2012-07-09T09:33:24.973
> 
> 标签：c#, security, acl

我想为特定用户设置一个只读文件夹，他应该无法编辑或删除它，我尝试了下面的代码但它不起作用，我需要对其进行哪些更改

```
 try
 {
     string folderPath = textBox1.Text;
     string username = comboBox1.SelectedItem.ToString();
     DirectorySecurity ds = Directory.GetAccessControl(folderPath);
     FileSystemAccessRule fsa =
         new FileSystemAccessRule(username,
                                  FileSystemRights.ReadAndExecute,
                                  AccessControlType.Allow);
     ds.AddAccessRule(fsa);
     Directory.SetAccessControl(folderPath, ds);
     MessageBox.Show("ReadOnly");
 }
 catch (Exception ex)
 {
     MessageBox.Show(ex.Message);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:51:51.687

用户可能通过组成员身份继承了对文件夹的附加权限，例如`Everyone`，因此设置**允许**规则只是允许他做他已经可以做的事情。

例子：

```
- 根
  [允许：读/写（所有人）]
  - 父文件夹
    [允许：读/写（所有人）- 继承自 Root]
    - 受限文件夹
      [允许：读/写（所有人）- 继承自 Root]
      [允许：读取（受限用户）- 这没有效果！]

```

您可能想改为设置**拒绝**规则。这应确保防止用户写入或删除文件夹，无论继承的权限或允许写入该文件夹的组的成员身份如何。

```
DirectorySecurity ds = Directory.GetAccessControl(folderPath);
FileSystemRights allExceptRead =
    FileSystemRights.FullControl & ~FileSystemRights.ReadAndExecute;
// Use AccessControlType.Deny instead of Allow.
FileSystemAccessRule fsa = new FileSystemAccessRule(username,
                                                    allExceptRead,
                                                    AccessControlType.Deny);
ds.AddAccessRule(fsa);
Directory.SetAccessControl(folderPath, ds); 
```

所以之后，层次结构如下所示：

```
- 根
  [允许：读/写（所有人）]
  - 父文件夹
    [允许：读/写（所有人）- 继承自 Root]
    - 受限文件夹
      [拒绝：写入（受限用户） - 这会覆盖继承的权限]
      [允许：读/写（所有人）- 继承自 Root]

```

如果有可能不允许用户通过继承或组成员身份读取文件夹，那么您将必须添加两个访问规则，一个像您已经拥有的（明确允许读取），另一个像我的（明确防止阅读以外的任何事情）。之后的示例层次结构：

```
- 根
  [允许：读/写（所有人）]
  - 父文件夹
    [允许：读/写（所有人）]
    // 防止 ParentFolder 的权限传播给子文件夹
    [防止子文件夹继承权限]
    - 受限文件夹
      [拒绝：写入（受限用户）]
      // 注意“Everyone”权限不是继承的。
      // 如果没有明确允许读取，用户不能对此文件夹执行任何操作
      [允许：阅读（受限用户）- 明确允许阅读]

```

* * *

# 更新

根据[这个链接](http://technet.microsoft.com/en-us/library/cc787794%28WS.10%29.aspx)，拒绝`Delete`文件夹本身的权限是不够的。您还需要拒绝`Delete subfolders and files`该文件夹的*父*文件夹。因此，您的文件夹层次结构必须如下所示：

```
- 根
  [允许：读/写（所有人）]
  - 父文件夹
    [拒绝：删除子文件夹和文件（受限用户）]
    [允许：读/写（所有人）- 继承自 Root]
    - 受限文件夹
      [拒绝：写入（受限用户） - 这会覆盖继承的权限]
      [允许：读/写（所有人）- 继承自 Root]

```

# c# - 如何在 ASP.Net 中获取请求内容

> ID：11392414
> 
> 赞同：4
> 
> 时间：2012-07-09T09:33:29.427
> 
> 标签：c#, asp.net, http

我有以下代码将文件发布到 ASP.net 页面：

```
using (var Client = new WebClient())
    Client.UploadFile("http://localhost:1625/Upload.aspx", @"TestFile.csv"); 
```

在服务器页面上，我阅读了请求的内容：

```
 var Contents = new byte[Request.InputStream.Length];
        Request.InputStream.Read(Contents, 0, (int)Request.InputStream.Length); 
```

这是我在内容中得到的：

```
-----------------------8cf2bdc76fe2b40
Content-Disposition: form-data; name="file"; filename="TestFile.csv"
Content-Type: application/octet-stream

1;Test 1
2;Test 2
3;Test 3
4;Test 4
5;Test 5
-----------------------8cf2bdc76fe2b40-- 
```

实际文件内容只是`1;Test 1 ... 5;Test 5`. 我的问题是如何仅获取文件内容而不是带有标头的整个请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:13:23.853

试试这个，先获取发布的文件：

```
 {
    HttpFileCollection files = Request.Files;
    HttpPostedFile file = files[0];
    int filelength = file.ContentLength;
    byte[] input = new byte[filelength ];
    file.InputStream.Read(input, 0, filelength );

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:42:42.457

尝试使用[HttpRequest](http://msdn.microsoft.com/en-us/library/h55b6cak)类。它有一个属性[Files](http://msdn.microsoft.com/en-us/library/system.web.httprequest.files)，它声明保存了客户端上传的文件。我没有测试这个...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:51:25.687

您可以使用 NameValueCollection 在 ASP.Net 中获取请求内容：

```
NameValueCollection nvc = Request.Form;
string firstname, lastname;
if (!string.IsNullOrEmpty(nvc["txtFirstName"]))
{
  firstname = nvc["txtFirstName"];
}

if (!string.IsNullOrEmpty(nvc["txtLastName"]))
{
  lastname = nvc["txtLastName"];
} 
```

这里`txtFirstName`和`txtLastName`两者都是上一页控件的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T10:29:03.457

尝试

```
var Content = Client.UploadFile("http://localhost:1625/Upload.aspx", @"TestFile.csv");
string fileContents = Encoding.ASCII.GetString(Contents)); 
```

# c - 袖带执行多少算术运算？

> ID：11392418
> 
> 赞同：1
> 
> 时间：2012-07-09T09:33:49.403
> 
> 标签：c, time, cuda, fft

我需要计算 cufft forward and inverse algorithm 的 gflops 。

我有 ：

```
double gflops = 1.0e-9 * dNumOps/gpuTime; 
```

但我不知道如何设置 dNumOps ，我需要知道 cufft 正向和反向的总操作。

我记得 fft 通常有一个 N*logr(N) 操作，其中 r 是 fft 中数据集划分的数量，但是对于 cufft 呢？

# c++ - MFC C++，将秒（int）添加到当前 CTime 变量

> ID：11392421
> 
> 赞同：0
> 
> 时间：2012-07-09T09:34:02.093
> 
> 标签：c++, mfc, ctime

菜鸟到 C++。我有一个`CTime`（实际上是一个`CTimeEx`）对象。时间值的值为：

```
CExTime now = now.GetSystemTime(); 
```

我收到一个`int`，例如 60，以添加到那个时间；这意味着如果我有 12:01:30 ，那么我想要 12:02:30。

我怎样才能添加`int`到`CTime`？这行得通吗？

```
currBERecored.m_BeUpdateTime = now + secondsFromFile; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:39:35.900

您可以通过`+`运算符将[CTimeSpan](https://docs.microsoft.com/en-us/cpp/atl-mfc-shared/reference/ctimespan-class?view=msvc-160#ctimespan)添加到`CTime`对象。是表示时间间隔的`CTimeSpan`正确类，您可以使用此构造函数构造一定秒数的 CTimeSpan：

```
CTimeSpan(
   __time64_t time 
) throw( ); 
```

其中时间是所需的秒数。

# java - Google App Engine - Java - JSP 编译部署失败

> ID：11392425
> 
> 赞同：1
> 
> 时间：2012-07-09T09:34:27.867
> 
> 标签：java, google-app-engine, jsp, exception, deployment

我正在使用 Google App Engine 在 Slim3 框架上编写一个网站，我正在尝试部署我的代码，但 Eclipse 向我报告了这个异常：

```
 Unable to update:
    com.google.appengine.tools.admin.JspCompilationException: Failed to compile jsp files.
        at com.google.appengine.tools.admin.Application.compileJsps(Application.java:628)
        at com.google.appengine.tools.admin.Application.createStagingDirectory(Application.java:479)
        at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:339)
        at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:52)
        at com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:407)
        at com.google.appengine.eclipse.core.deploy.DeployProjectJob.runInWorkspace(DeployProjectJob.java:148)
        at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

显然部署不会完成。我怎样才能知道哪些 JSP 文件实际上包含错误？

典型代码页：

```
<%@page pageEncoding="UTF-8" isELIgnored="false" session="false"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@taglib prefix="f" uri="http://www.slim3.org/functions"%>
<%@ page import="com.google.appengine.api.users.User" %>
<%@ page import="com.google.appengine.api.users.UserService" %>
<%@ page import="com.google.appengine.api.users.UserServiceFactory" %>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css" href="/css/global.css" />
<link rel="shortcut icon" href="/img/Italy.ico">
<title>${f:h(titolo)} - Associazione nazionale ricerca e sviluppo energie rinnovabili</title>
</head>
<body>
<div id="container">

    <%@ include file="/Home/header.jsp"%>

    <%@ include file="/Home/menu.jsp"%>

    <div id="content">
    <p id="orientationInfo"><a href="/Home">Home</a> > <a href="/Home/Progetti">Progetti</a> > ${f:h(titolo)}</p>
        <center><H2>${f:h(titolo)}</H2></center>

        <H3>Descrizione</H3>
        <p class="paragrafo">${f:h(descrizione)}</p>

        <H3>Anno di inizio</H3>
        <p class="paragrafo">${f:h(anno)}</p>       

        <c:set var="partnerUrl" value="Progetto/Partners?key=${f:h(key)}&version=${version}"/>
        <H3><a href="${f:url(partnerUrl)}">Partners</a></H3>

        <c:set var="eventiUrl" value="Progetto/Eventi?key=${f:h(key)}&version=${version}"/>
        <H3><a href="${f:url(eventiUrl)}">Eventi Promozionali</a></H3>

        <c:set var="eventiUrl" value="Progetto/Risultati?key=${f:h(key)}&version=${version}"/>
        <H3><a href="${f:url(eventiUrl)}">Risultati</a></H3>

    </div>

    <%@ include file="/Home/footer.jsp"%>

</div>
</body>
</html>

header.jsp
<div id="header">
    <center>
        <h1>Associazione nazionale ricerca e sviluppo energie rinnovabili</h1>
    </center>
</div>

menu.jsp
<div id="menu">
    <ul>
        <li><a href="/Home">HOME</a></li>
        <li><a href="/Home/Progetti">PROGETTI</a></li>
        <li><a href="/Home/Eventi">EVENTI</a></li>
        <li><a href="/Home/Partners">PARTNERS</a></li>
    </ul>

</div>

footer.jsp
<div id="footer">
    <ul id="footer">
            <li>
                <span>
                <a href="/Home/ChiSiamo">CHI SIAMO</a>
                </span>
            </li>
            <li>
                <span>
                <a href="/Home/ProfiloDiRicerca">PROFILO DI RICERCA</a>
                </span>
            </li>
            <li>
                <span>
                <a href="/Home/Contatti">CONTATTI</a>
                </span>
            </li>
    </ul>
</div> 
```

# ruby-on-rails - 会话中的 Rails 迭代

> ID：11392426
> 
> 赞同：0
> 
> 时间：2012-07-09T09:34:28.810
> 
> 标签：ruby-on-rails, ruby, iteration

我的会话中存储了以下内容：

```
session[:quoteResponse]['6000']['something'][...]
session[:quoteResponse]['6000']['something_else'][...]

session[:quoteResponse]['8000']['something'][...]
session[:quoteResponse]['8000']['something_else'][...]

session[:quoteResponse]['10000']['something'][...]
session[:quoteResponse]['10000']['something_else'][...] 
```

我如何遍历它们以实现以下目标？

```
<div class="product">
    <%= radio_button_tag 'form[baseMiles]', '6000' %>
    <label for="form_baseMiles_6000">6,000 Policy Miles</label>
    <a class="need-more-miles" href="#">Need more miles? <span>View</span></a>
</div>

<div class="product">
    <%= radio_button_tag 'form[baseMiles]', '8000' %>
    <label for="form_baseMiles_8000">8,000 Policy Miles</label>
    <a class="need-more-miles" href="#">Need more miles? <span>View</span></a>
</div>

<div class="product">
    <%= radio_button_tag 'form[baseMiles]', '10000' %>
    <label for="form_baseMiles_10000">10,000 Policy Miles</label>
    <a class="need-more-miles" href="#">Need more miles? <span>View</span></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:48:42.237

好吧，取决于 'something' 和 'something_else' 应该去哪里，你可以

```
<% session[:quoteResponse].each do |num, arr| %>
  <% arr.each do |item| %>
    ...
    here you can use num to refer to 6000, 10000 and item to each 'something', 'something_else'
    ...
  <% end %>
<% end %> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:51:12.477

我不明白为什么这不起作用

```
<% session[:quoteResponse].each do |miles, other_properties| %>
  <div class="product">
    <%= radio_button_tag 'form[baseMiles]', miles.to_s %>
    <label for="form_baseMiles_<%= miles %>"><%= miles %> Policy Miles</label>
    <a class="need-more-miles" href="#">Need more miles? <span>View</span></a>
  </div>
<% end %> 
```

其他属性将包含“something”和“something else”作为哈希值，以备不时之需。

# f# - F# 参数传递

> ID：11392427
> 
> 赞同：6
> 
> 时间：2012-07-09T09:34:33.043
> 
> 标签：f#, tuples, currying

我一直认为 F# 有两种不同的方式来传递参数，咖喱风格和元组风格。这真的正确吗？

不就是*一种风格*吗，咖喱风格，参数既可以是简单的值，也可以是元组。

例如

```
someFunc (a,b) = 
```

这不是一个带有*一个*恰好是元组的咖喱风格参数的函数吗？因此允许我使用管道运算符将元组传递给这个函数？（元组的元素被命名的地方）

```
(1,2) |> someFunc 
```

它是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T09:43:52.157

这会很好用 - 不同之处在于你有

```
let f (a,b) = ...
let f2 a b = ... 
```

那么您可以轻松地创建一个部分应用的 f2，但是对于 f 它并不能很好地工作 - 您必须这样做

```
let partial = fun t -> f (1,t)
let partial2 = f2 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T15:08:28.660

是的，所有 F#*函数*都是“咖喱风格”。当您有如下定义时：

```
let someFunc (a,b) = a + b 
```

你有一个函数，它接受一个参数，一个元组，它被*模式匹配*分解（是的，模式匹配在像这样令人惊讶的甜蜜地方可用）。它等效于以下定义，它将模式匹配移动到函数的主体：

```
let someFunc t = 
    match t with 
    | a, b -> a + b 
```

这也相当于

```
let someFunc = function
    | a, b -> a + b 
```

第一个版本，在参数本身中具有模式匹配，在这个简单命名绑定的实例中显然更可取。

但是请注意，[F#*方法*](http://msdn.microsoft.com/en-us/library/dd483468.aspx)是“元组样式”（这是 F# 与标准 .NET 面向对象功能相结合的地方之一）。

# tableview - javafx-2，将 TableView 连接到常规 bean，即字段不提供 Property 的 bean

> ID：11392429
> 
> 赞同：0
> 
> 时间：2012-07-09T09:34:52.017
> 
> 标签：tableview, javafx-2

我的表格视图：

```
TableView<Person> = new TableView<Person>(); 
```

但人是这样的：

```
class Person {

    String firstName;

    public getFirstName() {return firstName;} 
```

}

那就是它没有新的 javafx 样式属性。它是一个现有的类，由我使用的库实例化。

我使用以下代码创建列：

```
TableColumn columnFirstName = new TableColumn("First Name");

columnCodfis.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<Person,   String>,ObservableValue<String>>(){
        @Override
        public ObservableValue<String> call(CellDataFeatures<Person, String> arg) {
            if (arg.getValue()==null) return null;
            return new ReadOnlyStringWrapper(arg.getValue().firstName);
        }
    }); 
```

这很麻烦，但很有效。
我的**问题**是：

1.  返回 ObservableValue 是没有意义的，因为 bean 无法触发更改事件。因此，我想避免所有 ObservableValue 开销，该怎么做？
2.  因为 javabean 不会自己触发事件，所以我需要一些老式的 resfresh 事件，比如 fireCellUpdate。是这样的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:55:01.963

对于第一点，我认为你不能。

对于第二点，我认为你也不能。反正不是直接的。我认为最好的解决方案是使用[JavaBeanStringProperty](http://docs.oracle.com/javafx/2/api/javafx/beans/property/adapter/JavaBeanStringProperty.html)来包装`firstname`属性并在`fireValueChangedEvent()`每次要更新单元格时调用。

# c# - 在 Asp.net 中滚动和暂停数据列表

> ID：11392435
> 
> 赞同：0
> 
> 时间：2012-07-09T09:35:15.787
> 
> 标签：c#, javascript, asp.net, datalist, marquee

我正在一个网站上工作，并在主页上使用显示员工照片和姓名的 DataList。

我正在使用选取框标签，但我想使用 javascript 在“向上”方向滚动员工的图像和姓名。我希望它暂停 3-4 秒，然后滚动到下一张图片。我正在使用这段代码：

```
<marquee onMouseOver="this.scrollAmount=0" onMouseOut="this.scrollAmount=2" scrollamount="2" Interval="5"  loop="true"  direction="up">
                            <asp:DataList ID="DataList2" runat="server" DataSourceID="SqlDataSource2" 
                                RepeatDirection="Vertical" RepeatColumns="1">
                                <ItemTemplate>
                            <table>
                            <tr><td valign="top"><asp:Image ID="img" runat="server" ImageUrl='<%# Eval("picpath") %>' Height="100" Width="100" /></td>
                            <td><asp:Label ID="teachernameLabel" runat="server" Text='<%# Eval("teachername") %>' Font-Size="Smaller" /><br />
                            <asp:Label ID="Label1" runat="server" Text='<%# Eval("designation") %>' Font-Size="Smaller" />
                            </td>
                            </tr>
                            <tr align="center"><td valign="bottom"></td></tr>

                            </table>
                                </ItemTemplate>
                            </asp:DataList></marquee> 
```

# ios - Webview滚动和透明层

> ID：11392439
> 
> 赞同：0
> 
> 时间：2012-07-09T09:35:23.053
> 
> 标签：ios, uiwebview, iscroll

我正在使用 uiwebview 在 iOS 上开发 Web 应用程序。
看到这张图片。

![在此处输入图像描述](../Images/61d58b78b47f9a17bb3f6daaa443528d.png)

我有一个 UIWebview 并让它们可以使用[iScroll](http://cubiq.org/iscroll-4)滚动。

问题是，
菜单栏是一个有一些透明区域的矩形。
（此图中的左上角）。
我期望在透明区域中，我可以看到底层内容。但是，在透明区域，我看不到可滚动的内容。
该区域仅显示 webview 的背景图像。（来自objective-c）。

这不可能在可滚动内容的顶部显示固定和弯曲形状的菜单栏吗？
我应该使用objective-c代码而不是网络语言来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:45:28.470

我为自己找到了解决方案。

首先将[iScroll](http://cubiq.org/iscroll)用于可滚动视图。

然后制作 0*0 像素大小的 div（相对位置）。

使用绝对位置将菜单栏放在 div 中。

应该很好用~^^;

# android - 如何使用 SQLiteDatabase.CursorFactory

> ID：11392449
> 
> 赞同：14
> 
> 时间：2012-07-09T09:36:04.350
> 
> 标签：android, sqlite, android-sqlite, android-cursor

有谁知道如何`SQLiteDatabase.CursorFactory`在Android上使用？我希望获得一个持久的 SQLiteCursor 对象，该对象使用 SQL SELECT 语句，其中几个 WHERE 子句表达式使用可以在重新查询之前以编程方式更改的参数。

例如：

```
SELECT LocationID FROM Locations WHERE Latitude < northlimit AND Latitude > southlimit AND Longitude < eastlimit AND Longitude > westlimit; 
```

限制参数会动态变化，每 200ms 一次

我正在尝试解决一个问题，即如果我只是使用`SQLiteDatabase.rawQuery("SELECT ...");`系统为每个新查询创建一个新的 CursorWindow，最终内存不足。所以我试图找到一种方法来强制系统不要创建新的 CursorWindows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T13:09:44.140

您可以查看本教程..它完美地总结了它：

[http://www.youtube.com/watch?v=j-IV87qQ00M](http://www.youtube.com/watch?v=j-IV87qQ00M)

并且您应该在任何使用后关闭数据库.. 另一种方法是创建类变量 Cursor cr 并且每次使用它时都检查一下： if(cr==null) cr = new .... else //do something / /

cr.close();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-08T03:03:59.457

我不相信使用**CursorFactory**会有所帮助或需要。

在以下示例中，创建了一个基于您的表并加载了 100000 行。

单个游标用于每 50 毫秒提取可变数量的行 10000 次。

当 Cursor 返回时，将获得计数（导致扫描 Cursor 并因此访问数据库）并更新 TextView 以显示迭代和获得的行数。

该应用程序运行时不会崩溃，并且分析器显示内存正在按以下方式进行管理：-

[![在此处输入图像描述](../Images/2126be604088cf7696cf3f9fd61cf991.png)](https://i.stack.imgur.com/pvVrf.png)

使用的代码是：-

# 数据库助手：-

```
public class DBHelper extends SQLiteOpenHelper {

    public static final String DBNAME = "mydb";
    public static final int DBVERSION = 1;

    public static final String TBL_LOCATIONS = "Locations";
    public static final String COl_LOCATIONS_ID = "LocationId";
    public static final String COl_LATITUDE = "Lattitude";
    public static final String COl_LONGITUDE = "Longitude";
    public static final String COL_OTHER = "other";

    public DBHelper(@Nullable Context context) {
        super(context, DBNAME, null, DBVERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE IF NOT EXISTS " + TBL_LOCATIONS +
                "(" +
                COl_LOCATIONS_ID + " INTEGER PRIMARY KEY," +
                COl_LATITUDE + " REAL," +
                COl_LONGITUDE + " REAL," +
                COL_OTHER + " TEXT," +
                " UNIQUE(" + COl_LONGITUDE + "," +  COl_LATITUDE + ")" +
                ")"
        );
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

    public long insertLocation(double longitude, double latitude, String other) {
        ContentValues cv = new ContentValues();
        cv.put(COl_LONGITUDE,longitude);
        cv.put(COl_LATITUDE,latitude);
        cv.put(COL_OTHER,other);
        return this.getWritableDatabase().insert(TBL_LOCATIONS,null,cv);
    }

    public Cursor getLocations(double northlimit, double southlimt, double eastlimit, double westlimit) {
        return this.getWritableDatabase().query(
                TBL_LOCATIONS,
                new String[]{COl_LOCATIONS_ID},
                COl_LATITUDE + " <? AND " + COl_LATITUDE + ">? AND " + COl_LONGITUDE + "<? AND " + COl_LONGITUDE + "<?",
                new String[]{
                        String.valueOf(northlimit),
                        String.valueOf(southlimt),
                        String.valueOf(eastlimit),
                        String.valueOf(westlimit)},
                null,null,null );
    }
} 
```

活动是：-

```
public class MainActivity extends AppCompatActivity {

    private int mInterval = 50;
    private int mCounter = 0;
    private final int mLimit = 10000;
    private Handler mHandler;
    private DBHelper mDBHlpr;
    private Cursor mCsr; //<<<<<<<<<< Just this 1 Cursor is used.
    TextView mTV;
    Random mRnd;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mTV = this.findViewById(R.id.tv);
        mRnd = new Random();
        mDBHlpr = new DBHelper(this);
        addSomeDataIfNone();
        mHandler = new Handler();
        mRunIt.run();

    }

    private void addSomeDataIfNone() {

        SQLiteDatabase db = mDBHlpr.getWritableDatabase();
        if (DatabaseUtils.queryNumEntries(db,DBHelper.TBL_LOCATIONS) > 0) return;
        Random rnd = new Random();
        db.beginTransaction();
        for (int i=0; i < 100000; i++ ) {
            mDBHlpr.insertLocation(abs(mRnd.nextDouble()),abs(mRnd.nextDouble()),"LOCATION" + String.valueOf(i));
        }
        db.setTransactionSuccessful();
        db.endTransaction();
    }

    Runnable mRunIt = new Runnable() {
        @Override
        public void run() {
            if (mCounter > mLimit) return;
            getData(mCounter);
            mCounter++;
            mHandler.postDelayed(mRunIt, mInterval);
        }
    };

    private void getData(int iteration) {
        Log.d("GETTINGDATA","Getting data for iteration " + String.valueOf(iteration));
        double latlim1 = abs(mRnd.nextDouble());
        double latlim2 = abs(mRnd.nextDouble());
        double  lnglim1 = abs(mRnd.nextDouble());
        double lnglim2 = abs(mRnd.nextDouble());
        double nlim = 0.0, slim = 0.0, elim = 0.0, wlim = 0.0;

        if (latlim1 > latlim2) {
            nlim = latlim1;
            slim = latlim2;
        } else {
            nlim = latlim2;
            slim = latlim1;
        }
        if (lnglim1 > lnglim2) {
            elim = lnglim1;
            wlim = lnglim2;
        } else {
            elim = lnglim2;
            wlim = lnglim1;
        }

        mCsr = mDBHlpr.getLocations(nlim,slim,elim,wlim);
        mTV.setText("Iteration " + String.valueOf(iteration) + " Rows returned = " + String.valueOf(mCsr.getCount()));
    }
} 
```

# php - 使用组检索最新记录

> ID：11392450
> 
> 赞同：1
> 
> 时间：2012-07-09T09:36:07.740
> 
> 标签：php, mysql, group-by

```
table(ms_replies)  
|------------------------------------------|
| id | ticketID |  replyStamp              |
|------------------------------------------|
| 1  |  7       | Tue 11 Oct 2011, 8:56am  |
| 2  |  7       | Wed 12 Oct 2011, 9:20am  |
| 3  |  8       | Wed 12 Oct 2011, 16:24pm |
| 4  |  7       | Thu 27 Oct 2011, 20:28pm |
| 5  |  8       | Tue 18 Oct 2011, 9:54am  |
|------------------------------------------| 
```

到目前为止我的代码是：

```
SELECT 
    ticketID,
    MAX(replace(replace(replyStamp, 'pm',''), 'am','')) AS time
FROM 
    ms_replies 
WHERE 
    `ticketID` IN ($IDs)
GROUP BY 
    ticketID 
```

但这不会返回最近的条目。

请注意`replace`查询中的必须删除 am | pm ，这不是我做的，但不幸的是，我无法改变它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:39:39.827

我认为 group 将在通过 ticketID 减少它们时获取第一条记录（正如您所发现的那样）尝试通过 ticketID DESC 对它们进行排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:39:53.780

使用此解决方案：

```
SELECT a.ticketID, a.replyStamp
FROM ms_replies a
INNER JOIN 
(
    SELECT MAX(id) AS maxid
    FROM ms_replies
    WHERE ticketID IN ($IDs)
    GROUP BY ticketID
) b ON a.ticketID = b.maxid 
```

顺便说一句，你真的应该让`replyStamp`列是一个`TIMESTAMP`或`DATETIME`类型而不是一个字符串。这样，您可以对其进行各种日期/时间计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:55:37.747

如果要将字符串作为日期进行比较，则必须将它们转换为日期：

```
SELECT ticketID,
         MAX(STR_TO_DATE(
           REPLACE(REPLACE(replyStamp, 'am', ''), 'pm', ''), 
           '%a %d %b %Y, %T')) AS max_time
    FROM ms_replies 
   WHERE ticketID IN (7, 8)
GROUP BY ticketID; 
```

但如果最新条目总是具有最大 id（如您的示例中所示），则实际上不需要；那么你可以只检查 MAX(id) ，就像在@ZaneBien 回答中一样 - 或者在这里：

```
SELECT m.ticketID, m.replyStamp
  FROM ms_replies AS m
 WHERE m.id = (
         SELECT MAX(id) FROM ms_replies 
         WHERE ticketID = m.ticketID
       ); 
```

# asp.net - 如何配置 Windows 2008 R2 以接收 asp.NET webapps 部署

> ID：11392457
> 
> 赞同：1
> 
> 时间：2012-07-09T09:36:36.047
> 
> 标签：asp.net, deployment, windows-server-2008

我尝试按照教程进行操作，但我发现的所有教程都不完整，而且我在 Windows 2008 R2 Server 上部署 asp.net Web 应用程序一直没有成功。

我已经安装了所有必要的包（IIS、Web 部署服务），但在尝试部署时出现错误。

有人知道开始配置服务器的好教程吗？

我正在运行 Windows 2008 R2 网络版。开发的客户端是Windows 7机器，我需要在Windows 2008 Server Web版上部署。

# php - PHP如何将数据库中的日期与当前日期进行比较

> ID：11392461
> 
> 赞同：-1
> 
> 时间：2012-07-09T09:36:57.457
> 
> 标签：php, mysql

我分别存储了日（10）、月（4）和年（1993）。如何将其与当前日期进行比较？如果日期匹配，则使用 cron 向 myemail@gmail.com 发送电子邮件。

**这是代码：**

```
<?php
include"connect_mysql.php";
$reminder_dates = mysql_query("SELECT*FROM registration_form");
while($row = mysql_fetch_array($reminder_dates)){
$main_dob_day = $row['main_dob_day'];
$main_dob_month = $row['main_dob_month'];   
$main_dob_year = $row['main_dob_year'];
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:57:57.577

```
$main_date   = "{$main_dob_year}-{$main_dob_month}-{$main_dob_day}";
$todays_date = date("Y-m-d");
$today       = strtotime($todays_date);
$main_dt     = strtotime($main_date);

if($main_dt == $today)
{
  $valid = "send email";
  echo $valid;
} 
```

它会起作用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:42:29.850

也许是这样的：

```
$old_date = "2006-01-16"; // Create this from the 3 strings you have in the db
$old_date = strtotime($old_date); 

$todays_date = date("Y-m-d"); 
$todays_date = strtotime($todays_date); 

if ($old_date == $todays_date)
 print "equal";
else
 .... 
```

编辑：在回复您的评论时，您可以使用日期函数获取当前日期和月份，如下所示：

```
$m = date("m");
$d = date("d"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:50:17.533

您可以在 SQL 查询中直接进行比较，然后循环将向查询返回的所有行发送电子邮件：

```
<?php
    include"connect_mysql.php";
    $sql = "
        SELECT *
        FROM registration_form
        WHERE 
            main_dob_month = MONTH(CURDATE()) AND 
            main_dob_day = DAYOFMONTH(CURDATE())";

    $reminder_dates = mysql_query($sql);
    while($row = mysql_fetch_array($reminder_dates))
    {
        // send email(s)
    }
?> 
```

# android - Android 照片方向传感器

> ID：11392462
> 
> 赞同：0
> 
> 时间：2012-07-09T09:37:01.470
> 
> 标签：android, orientation, accelerometer

我有我的应用程序，我在其中使用来自 cam 或画廊的照片，如果我从画廊拍摄照片，它可以颠倒过来。我怎样才能做出正确的照片方向？

# asp.net - 如何为 Web 服务“允许服务与桌面交互”？

> ID：11392464
> 
> 赞同：0
> 
> 时间：2012-07-09T09:37:04.857
> 
> 标签：asp.net, web-services, windows-services

我正在尝试通过我编写的 Web 服务运行一些应用程序。我已授予必要的用户权限，但我仍然看不到已启动应用程序的任何用户界面，即使我知道它们正在运行，因为它们已列在任务管理器中。

当我研究这个问题时，我想出了一个解决方案：启用“允许服务与桌面交互”复选框。但是当我在服务中寻找我的服务时，我找不到它在那里运行。我什至不知道我的服务名称是什么：有人可以帮我解决这个问题吗？

我的 Web 服务在运行时会变成 Windows 服务吗？如果没有，我怎么能找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:44:08.893

您的 Web 服务不是将出现在服务中的“服务”——它们是[Windows 服务](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685967%28v=vs.85%29.aspx)......非常不同的概念。

[除非服务主机进程有权访问交互式用户的Window Station](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687096%28v=vs.85%29.aspx)，否则您不能在服务器上拥有“与桌面交互”的 Web 服务。这对于由 IIS 托管的 ASP.NET Web 服务是不可能的，它将在与非交互式 Window Station 的单独会话中运行。

如果您改为使用 WCF 实现 Web 服务，将其托管在由登录的交互式用户运行的应用程序中，您可能会绕过阻止已启动的应用程序显示可见 UI 的安全障碍。

但是，我不知道您所说的“通过网站控制的系统”是什么意思：这听起来像是需要 IIS 并且不应该由交互式用户运行的东西 - 所以您可能会遇到其他问题。如果您更详细地解释您正在尝试做什么，我们可能会建议更好的解决方案架构。

# pdf - 在 Window 8 中渲染 PDF

> ID：11392465
> 
> 赞同：2
> 
> 时间：2012-07-09T09:37:05.410
> 
> 标签：pdf, windows-8, windows-runtime, pdfrenderer

我正在寻找能够呈现 PDF 的 WinRT (Windows 8 Metro) 组件。出于安全原因，我无法使用 Reader 应用程序，我必须在呈现的 PDF 上添加一些覆盖。

有人有想法吗？任何在 WINRT 中工作的 PDF 库？我还可以想象将页面渲染为图像，然后显示图像

# jquery - 现场的 jQuery 滑块

> ID：11392469
> 
> 赞同：0
> 
> 时间：2012-07-09T09:37:25.283
> 
> 标签：jquery

我需要在现场设置[此滑块。](http://livedemo00.template-help.com/magento_39139/)我创建了相同的 html 表单。连接脚本：jquery.min.js jquery.easing.1.3.js、tms-0.3.js、tms_presets.js

并调用代码

```
<script>
    jQuery(window).load(function() {
        jQuery('.slider')._TMS({
            duration:600,
            easing:'easeOutQuad',
            preset:'simpleFade',
            nextBu:'.slider-next',
            prevBu:'.slider-prev',
            slideshow:9000,
            banners:'fromLeft',
            waitBannerAnimation:false,
            pauseOnHover:true
        });
    });
</script> 
```

图片移动是作品，但文字不动。特别是带有“横幅”类的容器。Tnx 提前。

[链接](http://pr2.zoo.dmsh1.kz/index.html)到 html 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:54:13.920

问题是你的 HTML

只需比较您的 HTML 文件和实时站点

你的看起来像

```
<ul class="items">
<li>
     <img src="http://livedemo00.template-help.com/magento_39139/skin/frontend/default/theme321/images/media/slider1.png" alt="">
</li>
<li>
    <img src="http://livedemo00.template-help.com/magento_39139/skin/frontend/default/theme321/images/media/slider2.png" alt="">
</li>
<li>
  <img src="http://livedemo00.template-help.com/magento_39139/skin/frontend/default/theme321/images/media/slider3.png" alt="">
</li> 
```

其次是你的 div

```
<div class="banner">
<!--code here -->
</div> 
```

这应该是

```
 <li><img src="http://livedemo00.template-help.com/magento_39139/skin/frontend/default/theme321/images/media/slider1.png" alt="">
       <!-- place your banner code within the li tags-->
            <div class="banner">
              <div class="banner-padding">
                <div class="slog-banner">
                   <span class="banner-title">Philips </span>
                   <span class="banner-slog">Medical Equipment (CY-A03)</span>
                   <span class="banner-desc">Ipsum dolor sit amet conse ctetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</span>
                   <a class="banner-button" href="http://livedemo00.template-help.com/magento_39139/diagnostic-supplies/heavy-duty-x-ray-system.html/">Read more</a>
                </div>
           </div>
         </div>
        </li> 
```

# javascript - 检测大写锁定是否关闭

> ID：11392470
> 
> 赞同：1
> 
> 时间：2012-07-09T09:37:29.223
> 
> 标签：javascript, jquery

我需要的是检测此时的大写锁定键是否已关闭。所以我不需要状态（开/关），我想检查用户是否按住大写锁定。可以用javascript吗？我想在浏览器中创建类似 Enso Launcher 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:45:22.847

> 我想检查用户是否按住大写锁定。

在大多数浏览器上，您将获得CapsLock 的事件，`keydown`请[在此处尝试](http://jsbin.com/ecikif)（只需聚焦页面并按一个键）。（[这篇文章](http://unixpapa.com/js/key.html)有很多关于键盘事件的有用信息。）`keyup`

`keydown`CapsLock 似乎并没有像其他人那样重复，但您可以观察`keydown`并假设它已关闭，直到您看到`keyup`.

# jboss - 如何将我的 Web 应用程序的上下文根设置为“/”。

> ID：11392471
> 
> 赞同：1
> 
> 时间：2012-07-09T09:37:31.737
> 
> 标签：jboss, jboss5.x, contextroot

我在 Web 应用程序中设置上下文根时遇到问题。我想将上下文根设置为“/”，但是当我启动我的应用程序服务器（jboss-5.1.0.GA）时，出现以下异常：

> 12:21:23,257 错误 [AbstractKernelController] 安装到开始时出错：name=jboss.web.deployment:war=/ state=Create mode=Manual requiredState=Installed org.jboss.deployers.spi.DeploymentException：Web 映射已经存在用于部署URL 文件：/D:/jboss-5.1.0.GA/jboss-5.1.0.GA/server/letu-prod/deploy/ATG.ear/store.war/ at org.jboss.web.tomcat.service。 deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:187) at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:142) at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment. java:461) 在 org.jboss.web.deployers.WebModule.startModule(WebModule.java:118) 在 org.jboss.web.deployers.WebModule.start(WebModule.java:97) 在 sun.reflect.NativeMethodAccessorImpl。invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java: 597) 在 org.jboss.mx.server.Invocation.dispatch(Invocation.java:96) 在 org.jboss.mx.server.Invocation .invoke(Invocation.java:88) 在 org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264) 在 org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668) 在 org. jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206) at $Proxy38.start(Unknown Source) at org.jboss.system。microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42) at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37) at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java: 62) 在 org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) 在 org.jboss.dependency.plugins 的 org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) .AbstractControllerContext.install(AbstractControllerContext.java:348) 在 org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286) 在 org.jboss.dependency。plugins.AbstractController.install(AbstractController.java:1631) at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934) at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)在 org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984) 在 org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822) 在 org.jboss.dependency.plugins.AbstractController.change (AbstractController.java:553) 在 org.jboss.system.ServiceController.doChange(ServiceController.java:688) 在 org.jboss.system.ServiceController.start(ServiceController.java:460) 在 org.jboss.system.deployers。 ServiceDeployer.start(ServiceDeployer.java:163) 在 org.jboss。system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99) at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46) at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy( AbstractSimpleRealDeployer.java:62) at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50) at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)在 org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439) 在 org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157) 在 org.jboss.deployers.plugins .deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178) 在 org.jboss.deployers.plugins。deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1210) at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098) at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java: 348) 在 org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631) 在 org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934) 在 org.jboss.dependency.plugins.AbstractController .resolveContexts(AbstractController.java:1082) 在 org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984) 在 org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822) 在 org. jboss.dependency.plugins.AbstractController。更改（AbstractController.java:553）在 org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781) 在 org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)在 org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70) 在 org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117) .system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53) 在 org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361) 在 org.jboss.dependency.plugins .AbstractControllerContext.install(AbstractControllerContext.java:348) 在 org.jboss。org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934) 上的dependency.plugins.AbstractController.install(AbstractController.java:1631) org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java: 1082) 在 org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984) 在 org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822) 在 org.jboss.dependency.plugins.AbstractController .change(AbstractController.java:553) at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306) at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java :271) 在组织。jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461) 在 org.jboss.Main.boot(Main.java:221) 在 org.jboss.Main$1.run(Main.java:556) 在 java.lang。线程.run(线程.java:662)

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:54:48.260

默认。JBoss 的部署文件夹中有一个 ROOT.war，它绑定到 / 上下文。当其他一些应用程序也尝试将其上下文绑定到 / 时，早期版本的 JBoss 没有抛出异常。

请看下面的链接

[已存在用于部署的 Web 映射](https://community.jboss.org/message/250374)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T22:37:00.627

我还在使用 eclipse indigo (STS 2.9.2) 运行 jBoss 5.1 我将我的 Web 项目设置保留到我的原始根上下文 myWarName.war 例如在 eclipse 中，但必须将 jBoss.web.xml 文件更改为：

从：

```
<jboss-web>
     <context-root>myWarName</context-root>
</jboss-web> 
```

至：

```
<jboss-web>
    <context-root>/</context-root>
</jboss-web> 
```

然后我将 jBoss 部署文件夹下的 ROOT.war 重命名为 jBossROOT.war，如 Arun 的链接中所述，一切正常。我不想删除 ROOT.war，所以我选择了这个选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-05T08:04:26.390

默认情况下，Web 应用程序的上下文根（也称为上下文路径）设置为 Web 应用程序存档 (WAR) 的根名称（不带 .war 扩展名的名称）。您可以使用用于 EAR 部署的标准应用程序描述符（即 application.xml）或用于独立 WAR 的 JBoss AS Web 描述符（即 jboss-web.xml）覆盖上下文根。让我们先谈谈独立的 WAR。

**独立 WAR 部署**

您在 jboss-web.xml 中的独立 WAR 中覆盖 Web 应用程序的上下文路径（上下文根），该文件位于 WAR 的 WEB-INF 目录中。在这里，我们将上下文根设置为 /，这就是所谓的根上下文。当应用程序被分配到根上下文时，它将响应所有未被更具体的上下文根处理的请求。

*/WEB-INF/jboss-web.xml（在 WAR 中）*

```
<?xml version="1.0" encoding="UTF-8"?>  
<jboss-web>  
    <context-root>/</context-root>  
</jboss-web> 
```

此文件可以配置许多其他设置。尽管不是必需的，但您可以将 XSD（或在早期版本中为 DTD）添加到 XML 根目录。让我们在 JBoss AS 模式目录中添加 JBoss AS 5.1 的 XSD，并将上下文根更改为 /myapp。

*/WEB-INF/jboss-web.xml（在 WAR 中）*

```
<?xml version="1.0" encoding="UTF-8"?>  
<jboss-web xmlns="http://www.jboss.com/xml/ns/javaee"  
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
   xsi:schemaLocation="  
      http://www.jboss.com/xml/ns/javaee  
      http://www.jboss.org/j2ee/schema/jboss-web_5_1.xsd">  
   <context-root>myapp</context-root>  
</jboss-web> 
```

（注意：如果您在部署时遇到问题，只需不使用模式声明即可）。

虽然在独立 WAR 中设置上下文路径的方式是专有的，但当部署在 EAR 中时，Java EE 确实提供了一种将上下文路径分配给 WAR 的标准方法。

**EAR 部署**

在 EAR 文件中部署 Web 应用程序时，使用 Web 模块内的 context-root 元素在 EAR 的 application.xml 文件中指定上下文根。在以下示例中，bank-webapp.war 应用程序的上下文根设置为 /mymoney。

*/META-INF/application.xml（在 EAR 中）*

```
<application version="5" xmlns="http://java.sun.com/xml/ns/javaee"  
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
   xsi:schemaLocation="  
      http://java.sun.com/xml/ns/javaee  
      http://java.sun.com/xml/ns/javaee/application_5.xsd">  
   <module>  
      <ejb>bank-ejb.jar</ejb>  
   </module>  
   <module>  
      <web>  
         <web-uri>bank-webapp.war</web-uri>  
         <context-root>mymoney</context-root>  
      </web>  
   </module>  
</application> 
```

# java - 如何以编程方式从 android 的收件箱中读取未读短信？

> ID：11392472
> 
> 赞同：1
> 
> 时间：2012-07-09T09:37:31.430
> 
> 标签：java, android, sms

嗨，我是 android 应用程序开发的新手，我在 android 中开发了一个简单的应用程序。在我的应用程序中，我必须添加一个新功能。

我想从 android 的收件箱中读取短信。我已经搜索并应用了一些代码但没有用，我没有得到结果。以下代码是我的第一个活动代码。它将执行并转到索引页面并且工作正常。在这种情况下，我想从收件箱中读取未读短信。我想在哪里编写代码以及我想编写哪些类型的代码....请非常清楚地告诉我为什么，因为对于 android 来说是一个非常新的东西。

所以请帮助我。提前致谢。

代码：

```
 import org.apache.cordova.*;  
 import android.os.Bundle;
 public class SMSActivity extends DroidGap 
 {
     /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       super.setIntegerProperty("splashscreen", R.drawable.fg_logo);
       super.loadUrl("file:///android_asset/www/index.html");

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T03:42:56.187

它真的有效...用 Message.java 保存

```
package mzsay.com.provider;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;
public class Message {

final Uri SMS_INBOX = Uri.parse("content://sms/inbox");
@SuppressWarnings("unused")
private ContentResolver resolver;

public Message(ContentResolver ConResolver){
    resolver = ConResolver;
}

public String getMessage(int batas) {
      Cursor cur = resolver.query(SMS_INBOX, null, null, null,null);
      String sms = "Message >> \n";
      int hitung = 0;
      while (cur.moveToNext()) {
          sms += "From :" + cur.getString(2) + " : " + cur.getString(11)+"\n";
          if(hitung == batas)
              break;
          hitung++;
      }
      return sms;
}

public int getMessageCountUnread(){
    Cursor c = resolver.query(SMS_INBOX, null, "read = 0", null, null);
    int unreadMessagesCount = c.getCount();
    c.deactivate();
    return unreadMessagesCount;
}

public String getMessageAll(){
      Cursor cur = resolver.query(SMS_INBOX, null, null, null,null);
      String sms = "Message >> \n";
      while (cur.moveToNext()) {
          sms += "From :" + cur.getString(2) + " : " + cur.getString(11)+"\n";
      }
      return sms;
}

public String getMessageUnread() {
    Cursor cur = resolver.query(SMS_INBOX, null, null, null,null);
      String sms = "Message >> \n";
      int hitung = 0;
      while (cur.moveToNext()) {
          sms += "From :" + cur.getString(2) + " : " + cur.getString(11)+"\n";
          if(hitung == getMessageCountUnread())
              break;
          hitung++;
      }
      return sms;
}

public void setMessageStatusRead() {
    ContentValues values = new ContentValues();
    values.put("read",true);
    resolver.update(SMS_INBOX,values, "_id="+SmsMessageId, null);
}

} 
```

而不是在您的主要活动中使用此方法调用

```
public synchronized String getMessage(int batas) {
    Message ambilpesan = new Message(context.getContentResolver());
            //this a return of All unread from your Inbox
    return ambilpesan.getMessageUnread();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:00:13.980

如果是扩展 DroidGap，onCreate 不需要 setContentView，DroidGap 会默认显示 webView。

* * *

创建一个类说 ReadSMS 具有读取未读短信的方法并将 ReadSMS 类对象作为 javascriptInterfcae 添加到 droidGap webview，如下所示：

```
Class ReadSMS{

public ReadSMS(){
}

public String[] readUnreadSMS(){
return smsArray;
}

} 
```

* * *

在 SMSActivity 的 onCreate 中添加：

```
ReadSMS readSms = new ReadSMS();
appView.addJavascriptInterface(readSms , "ReadUnreadSMS");
super.loadUrl("file:///android_asset/www/index.html"); 
```

* * *

然后在 Javascript 中，您可以访问 ReadSMS 类中的 readUnreadSMS()，如下所示：

```
<script>
  $(function(){
        var smsArray[] = window.ReadUnreadSMS.readUnreadSMS();
  });
</script> 
```

# ios - 在视图控制器之间传递数据 - iOS Xcode - 什么是好方法？

> ID：11392473
> 
> 赞同：1
> 
> 时间：2012-07-09T09:37:33.057
> 
> 标签：ios, xcode, nsstring, textfield

好吧，我会尽量让这件事变得简单（当我试图问这个问题时，我似乎在 chat.stackoveflow.com 上到处乱跑）。我想将文本从一个视图控制器中的文本字段传递到另一个视图控制器。

我应该使用*Model*类并将 textfield.text 存储在 Model.[h/m] 文件中，然后让第二个视图控制器访问存储在模型中的数据吗？

基本上这就是我所拥有的，

**ViewControllerWelcome.h**

```
@interface ViewControllerWelcome : UIViewController { }

@property (weak, nonatomic) IBOutlet UITextField *textFieldUsername; 
```

**ViewControllerWelcome.m**

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
                ViewControllerHome *home = (ViewControllerHome *)[storyboard instantiateViewControllerWithIdentifier:@"Home"];
                NSString *username = _textFieldUsername.text;
                home.lblUSERNAME.text=username;
                [self presentModalViewController:home animated:YES]; 
```

**ViewControllerHome.h**

```
@interface ViewControllerHome : UIViewController {
NSString *username;
UILabel *lblUSERNAME;
}

@property (weak, nonatomic) IBOutlet UILabel *lblUSERNAME; 
```

**ViewControllerHome.m**

```
- (void)changeUSERNAME {

 // get username from welcome tf
ViewControllerWelcome *welcome = [[ViewControllerWelcome alloc] init];
 welcome.username = [self lblUSERNAME.text];
 // _lblUSERNAME.text = welcome._textFieldUsername.text;
 //welcome.textFieldUsername.text = _username;
 // username = welcome.textFieldUsername.text;
 NSLog(@"username = %@",username);
// welcome.textFieldUsername.text = _lblUSERNAME.text;
// NSLog(@"username = %@",welcome.textFieldUsername.text);
} 
```

如您所见，我尝试了几种不同的方法，但无法提出可行的解决方案：-l

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T10:05:31.620

由于您使用的是 Storyboard，因此使用 Segue 执行 ViewController 之间的转换更有意义。如果你不熟悉 segues，你可以看看这里：

[http://developer.apple.com/library/IOs/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html](http://developer.apple.com/library/IOs/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomSegues/CreatingCustomSegues.html)

在 IB 中创建 segue 非常简单。一旦你完成了设置，你就可以实现
`-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`并配置你的目标视图控制器。所以你会有类似下面的东西。

```
-(void)prepareForSegue(UIStoryboardSegue *)segue sender:(id)sender{
    // Assume you have a viewHomeSegue defined that has the name of the segue you want to perform
    NSString * segueIdentifier = [segue identifier];
    if([segueIdentifier isEqualToString:viewHomeSegue]){
        ViewControllerHome * homeController = (ViewControllerHome *)[segue destinationViewController];
        homeController.lblUSERNAME.text = _textFieldUsername.text;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:43:49.550

您不应该在这两个 ViewControllers 之间在两个方向上保持强引用。例如，您可以做的是在您的协议中声明一个`ViewControllerWelcome`带有委托的协议。您可以让`ViewControllerHome`另一个控制器实例化，然后成为它的代表，一旦用户完成输入用户名就会得到通知。

```
@protocol ViewControllerWelcomeDelegate <NSObject>    
- (void) userNameEntered:(NSString *)userName;    
@end

@interface ViewControllerWelcome : UIViewController
@property (nonatomic, weak) id <ViewControllerWelcomeDelegate> delegate;
...
@end 
```

在您的@implementation 中：

```
- (BOOL)textFieldShouldReturn:(UITextField *)theTextField
{
   [theTextField resignFirstResponder];
   [delegate userNameEntered:theTextField.text];

   return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:55:44.843

如果你有一个 .storyboard 文件，你可以像使用界面生成器一样在其中布局你的视图。

这些文件第一次真的帮助了我：

第 1 部分：[http ://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

第 2 部分：[http ://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2](http://www.raywenderlich.com/5191/beginning-storyboards-in-ios-5-part-2)

如果您只想查看 segues 部分，我建议您只阅读第 2 部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:21:01.197

我用另一个关于 SO 的问题来完善这个问题，可以在[这里](https://stackoverflow.com/questions/11405636/obj-c-how-to-pass-data-between-viewcontrollers-using-a-singleton)找到 基本上，我创建了一个单例来在视图控制器之间传递数据。到目前为止，我还没有遇到任何问题（敲木头）。

# linux - 如何在linux命令行中替换多个文件中的字符串

> ID：11392478
> 
> 赞同：663
> 
> 时间：2012-07-09T09:37:47.687
> 
> 标签：linux, string

我需要替换文件夹中许多文件中的字符串，只能`ssh`访问服务器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：827
> 
> 时间：2012-07-09T09:39:40.697

```
cd /path/to/your/folder
sed -i 's/foo/bar/g' * 
```

出现的“foo”将替换为“bar”。

在像 macOS 这样的 BSD 系统上，您需要根据手册`-i '.bak'`页提供一个备份扩展，否则“风险损坏或部分内容”。

```
cd /path/to/your/folder
sed -i '.bak' 's/foo/bar/g' * 
```

* * *

## 回答 #2

> 赞同：289
> 
> 时间：2014-01-24T14:45:23.357

类似于 Kaspar 的答案，但使用 g 标志替换一行上的所有事件。

```
find ./ -type f -exec sed -i 's/string1/string2/g' {} \; 
```

对于全局不区分大小写：

```
find ./ -type f -exec sed -i 's/string1/string2/gI' {} \; 
```

* * *

## 回答 #3

> 赞同：262
> 
> 时间：2013-12-21T16:52:35.993

@kev 的回答很好，但只影响直接目录中的文件。下面的示例使用 grep 递归查找文件。它每次都对我有用。

```
grep -rli 'old-word' * | xargs -i@ sed -i 's/old-word/new-word/g' @ 
```

* * *

命令分解

**grep -r** : *--recursive*，递归读取每个目录下的所有文件。
**grep -l** : *--print-with-matches*，打印每个匹配的文件的名称，而不是打印匹配的行。
**grep -i** : *--ignore-case*。

**xargs**：将 STDIN 转换为参数，遵循这个[答案](https://superuser.com/a/600273/682757)。
**xargs -i@ ~command 包含 @~ ：在****~command~**中的特定位置使用的参数的占位符，@ 符号是一个占位符，可以被任何字符串替换。

**sed -i**：在原地编辑文件，**无需**备份。
**sed s/regexp/replacement/** ：用**replacement替换**匹配**regexp**的字符串。 sed s/regexp/replacement/ **g** : *global*，对每个匹配项进行替换，而不是仅对第一个匹配项进行替换。

 ****** * *

## 回答 #4

> 赞同：50
> 
> 时间：2015-03-22T06:09:25.533

已经列出了一些标准答案。通常，您可以使用**find**递归列出文件，然后使用**sed**或**perl**执行操作。

## rpl

对于大多数快速使用，您可能会发现命令**rpl**更容易记住。

在所有文件上替换`foo`为：`bar``.txt`

```
rpl -v foo bar '*.txt' 
```

模拟递归替换所有文件`foo.*`中`bar`的正则表达式：`.txt`

```
rpl --dry-run 'foo.*' bar '**/*.txt' 
```

您可能需要安装它（`apt-get install rpl`或类似的）。

## 代表

但是，对于涉及正则表达式和反向替换或文件重命名以及搜索和替换的更棘手的工作，我所知道的最通用和最强大的工具是[**repren**](https://github.com/jlevy/repren)，这是我不久前编写的一个小型 Python 脚本更棘手的重命名和重构任务。您可能更喜欢它的原因是：

*   支持文件重命名以及文件内容的搜索和替换。
*   在您承诺执行搜索和替换之前查看更改。
*   支持具有反向替换、整个单词、不区分大小写和保留大小写（替换 foo -> bar、Foo -> Bar、FOO -> BAR）模式的正则表达式。
*   适用于多个替换，包括交换（foo -> bar 和 bar -> foo）或非唯一替换集（foo -> bar，f -> x）。

要使用它，`pip install repren`. [检查 README](https://github.com/jlevy/repren)以获取示例。

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2012-10-29T13:15:37.753

这对我有用：

```
find ./ -type f -exec sed -i 's/string1/string2/' {} \; 
```

然而，这并没有：`sed -i 's/string1/string2/g' *`。也许“foo”不应该是 string1，“bar”不是 string2。

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2014-05-22T08:09:21.300

**要替换多个文件中的字符串，您可以使用：**

```
grep -rl string1 somedir/ | xargs sed -i 's/string1/string2/g' 
```

例如

```
grep -rl 'windows' ./ | xargs sed -i 's/windows/linux/g' 
```

[源博客](http://vasir.net/blog/ubuntu/replace_string_in_multiple_files)

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2014-12-03T15:56:27.487

要替换文件中的路径（避免转义字符），您可以使用以下命令：

```
sed -i 's@old_path@new_path@g' 
```

@ 符号表示应忽略后面字符串中的所有特殊字符。

* * *

## 回答 #8

> 赞同：24
> 
> 时间：2019-08-26T10:22:53.863

鉴于您要搜索字符串`search`并将其替换为`replace`跨多个文件，这是[我经过实战测试的单行公式](https://www.internalpointers.com/post/linux-find-and-replace-text-multiple-files)：

```
grep -RiIl 'search' | xargs sed -i 's/search/replace/g' 
```

快速grep解释：

*   `-R`- 递归搜索
*   `-i`- 不区分大小写
*   `-I`- 跳过二进制文件（你想要文本，对吧？）
*   `-l`- 打印一个简单的列表作为输出。需要其他命令

然后将 grep 输出通过管道传输到 sed（通过 xargs），用于实际替换文本。该`-i`标志将直接更改文件。删除它以获得一种“试运行”模式。

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2017-12-14T14:04:42.590

如果您的字符串中包含正斜杠（/），您可以将分隔符更改为“+”。

```
find . -type f -exec sed -i 's+http://example.com+https://example.com+g' {} + 
```

此命令将在当前目录中递归运行。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2014-05-08T19:10:45.863

如果您有可以使用的文件列表

```
replace "old_string" "new_string" -- file_name1 file_name2 file_name3 
```

如果您拥有所有可以使用的文件

```
replace "old_string" "new_string" -- * 
```

如果您有带有扩展名的文件列表，则可以使用

```
replace "old_string" "new_string" -- *.extension 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2017-03-20T08:30:29.953

第一行出现的“foo”将被替换为“bar”。您可以使用第二行进行检查。

```
grep -rl 'foo' . | xargs sed -i 's/foo/bar/g'
grep 'foo' -r * | awk -F: {'print $1'} | sort -n | uniq -c 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2015-01-16T13:56:47.110

“你也可以使用 find 和 sed，但我发现这一小行 perl 工作得很好。

```
perl -pi -w -e 's/search/replace/g;' *.php 
```

*   -e 表示执行以下代码行。
*   -i 表示就地编辑
*   -w 写警告
*   -p 循环

"（摘自[http://www.liamdelahunty.com/tips/linux_search_and_replace_multiple_files.php](http://www.liamdelahunty.com/tips/linux_search_and_replace_multiple_files.php)）

我最好的结果来自使用 perl 和 grep （以确保文件具有搜索表达式）

```
perl -pi -w -e 's/search/replace/g;' $( grep -rl 'search' ) 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2019-01-28T17:21:30.337

在 MacBook Pro 上，我使用了以下内容（灵感来自[https://stackoverflow.com/a/19457213/6169225](https://stackoverflow.com/a/19457213/6169225)）：

```
sed -i '' -e 's/<STR_TO_REPLACE>/<REPLACEMENT_STR>/g' * 
```

> `-i ''`将确保您没有备份。
> 
> `-e`对于现代正则表达式。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-03-29T07:03:03.707

在找到这个问题（和答案）之前，我确实制定了自己的解决方案。我搜索了“replace”、“several”和“xml”的不同组合，因为那是我的应用程序，但没有找到这个特定的应用程序。

我的问题：我有包含复杂对象的测试用例数据的 spring xml 文件。对 java 源代码的重构更改了很多类，并且不适用于 xml 数据文件。为了保存测试用例数据，我需要更改分布在多个目录中的所有 xml 文件中的所有类名。同时保存原始 xml 文件的备份副本（尽管这不是必须的，因为版本控制会在这里救我）。

我一直在寻找`find`+的某种组合`sed`，因为它在其他情况下对我有用，但不能同时替换多个。

然后我发现[ask ubuntu response](https://askubuntu.com/questions/84007/find-and-replace-text-within-multiple-files)它帮助我构建了我的命令行：

```
find -name "*.xml" -exec sed -s --in-place=.bak -e 's/firstWord/newFirstWord/g;s/secondWord/newSecondWord/g;s/thirdWord/newThirdWord/g' {} \; 
```

而且效果很好（嗯，我的案例有六种不同的替代品）。但请注意，它会触及当前目录下的所有 *.xml 文件。正因为如此，如果你对版本控制系统负责，你可能想先过滤，然后只传递给`sed`那些真正拥有你想要的字符串的人；像：

```
find -name "*.xml" -exec grep -e "firstWord" -e "secondWord" -e "thirdWord" {} \; -exec sed -s --in-place=.bak -e 's/firstWord/newFirstWord/g;s/secondWord/newSecondWord/g;s/thirdWord/newThirdWord/g' {} \; 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2017-08-24T22:02:34.843

真的很蹩脚，但我无法让任何 sed 命令在 OSX 上正常工作，所以我做了这个愚蠢的事情：

```
:%s/foo/bar/g
:wn 
```

^- 将这三行复制到我的剪贴板中（是的，包括结尾的换行符），然后：

六 *

并按住 command-v 直到它说没有文件了。

愚蠢...hacky...有效...

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2014-03-05T22:20:34.210

```
grep --include={*.php,*.html} -rnl './' -e "old" | xargs -i@ sed -i 's/old/new/g' @ 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-11-10T16:32:38.000

我只想添加一个注释来一次做两件事 - 找到一个包含字符串的文件，然后使用 find 'chaining' 方法进行替换：

```
find  . -type f -iname \*.php -exec fgrep -l "www." {} \; -exec sed -i "s|www||g" {} \; 
```

*   在这个真实案例中，从 PHP 文件中的 url 中删除不合时宜的“www”。

*   'fgrep -l' 只有在文件中找到至少一个匹配项时才会触发，它不会产生其他输出。不要忘记'\;' 分隔符！

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2014-10-04T23:00:17.800

当使用开关调用时，流编辑器确实会“就地”修改多个文件，该`-i`开关以备份文件结尾作为参数。所以

```
sed -i.bak 's/foo/bar/g' * 
```

在此文件夹中的所有文件中替换`foo`为`bar`，但不会下降到子文件夹中。但是，这将为您目录中的每个文件生成一个新`.bak`文件。要对此目录及其所有子目录中的所有文件递归执行此操作，您需要一个帮助程序，如`find`，来遍历目录树。

```
find ./ -print0 | xargs -0 sed -i.bak 's/foo/bar/g' * 
```

`find`允许您进一步限制要修改的文件`find ./ -name '*.php' -or -name '*.html' -print0`，如有必要，通过指定更多参数，如 .

* * *

注意：GNU`sed`不需要文件结尾，`sed -i 's/foo/bar/g' *`也可以使用；FreeBSD`sed`需要一个扩展，但允许在两者之间留一个空间，所以`sed -i .bak s/foo/bar/g *`可以。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2014-11-08T01:51:46.343

**multiedit 命令的脚本**

```
multiedit [-n PATTERN] OLDSTRING NEWSTRING 
```

根据 Kaspar 的回答，我制作了一个 bash 脚本来接受命令行参数，并可选择限制与模式匹配的文件名。保存在您的 $PATH 中并使其可执行，然后只需使用上面的命令。

这是脚本：

```
#!/bin/bash
_help="\n
Replace OLDSTRING with NEWSTRING recursively starting from current directory\n
multiedit [-n PATTERN] OLDSTRING NEWSTRING\n

[-n PATTERN] option limits to filenames matching PATTERN\n
Note: backslash escape special characters\n
Note: enclose STRINGS with spaces in double quotes\n
Example to limit the edit to python files:\n
multiedit -n \*.py \"OLD STRING\" NEWSTRING\n"

# ensure correct number of arguments, otherwise display help...
if [ $# -lt 2 ] || [ $# -gt 4 ]; then echo -e $_help ; exit ; fi
if [ $1 == "-n" ]; then  # if -n option is given:
        # replace OLDSTRING with NEWSTRING recursively in files matching PATTERN
        find ./ -type f -name "$2" -exec sed -i "s/$3/$4/g" {} \;
else
        # replace OLDSTRING with NEWSTRING recursively in all files
        find ./ -type f -exec sed -i "s/$1/$2/" {} \;
fi 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-04-16T23:14:09.080

如果文件包含反斜杠（通常是路径），您可以尝试以下操作：

```
sed -i -- 's,<path1>,<path2>,g' * 
```

前任：

```
sed -i -- 's,/foo/bar,/new/foo/bar,g' *.sh (in all shell scripts available) 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-09-24T20:11:28.180

为了维护我的个人英文节点，我编写了一个实用程序脚本，帮助递归地替换目录下的所有文件的多对旧/新字符串。

多对旧/新字符串在哈希映射中进行管理。

目录可以通过命令行或环境变量设置，地图在脚本中是硬编码的，但如果需要，您可以修改代码以从文件加载。

由于一些新功能，它需要 bash 4.2。

**en_standardize.sh：**

```
#! /bin/bash
# (need bash 4.2+,)
# 
# Standardize phonetic symbol of English.
# 
# format:
#   en_standardize.sh [<dir>]
# 
# params:
# * dir
#   target dir, optional,
#   if not specified then use environment variable "$node_dir_en",
#   if both not provided, then will not execute,
# * 
# 

paramCount=$#

# figure target dir,
if [ $paramCount -ge 1 ]; then # dir specified
    echo -e "dir specified (in command):\n\t$1\n"
    targetDir=$1
elif [[ -v node_dir_en ]]; then # environable set,
    echo -e "dir specified (in environment vairable):\n\t$node_dir_en\n"
    targetDir=$node_dir_en
else # environable not set,
    echo "dir not specified, won't execute"
    exit
fi

# check whether dir exists,
if [ -d $targetDir ]; then
    cd $targetDir
else
    echo -e "invalid dir location:\n\t$targetDir\n"
    exit
fi

# initial map,
declare -A itemMap
itemMap=( ["ɪ"]="i" ["ː"]=":" ["ɜ"]="ə" ["ɒ"]="ɔ" ["ʊ"]="u" ["ɛ"]="e")

# print item maps,
echo 'maps:'
for key in "${!itemMap[@]}"; do
    echo -e "\t$key\t->\t${itemMap[$key]}"
done
echo -e '\n'

# do replace,
for key in "${!itemMap[@]}"; do
    grep -rli "$key" * | xargs -i@ sed -i "s/$key/${itemMap[$key]}/g" @
done

echo -e "\nDone."
exit 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-01-29T19:44:15.350

像这样使用 ack 命令会快很多：

```
ack '25 Essex' -l | xargs sed -i 's/The\ fox \jump/abc 321/g' 
```

此外，如果您在搜索结果中有空格。你需要逃避它。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-06-05T07:12:04.153

以下命令可用于首先搜索文件并替换文件：

```
find . | xargs grep 'search string' | sed 's/search string/new string/g' 
```

例如

```
find . | xargs grep abc | sed 's/abc/xyz/g' 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-02-23T20:16:56.367

我给出了一个修复 python 源代码中常见 shebang 错误的示例。

您可以尝试 grep/sed 方法。这是一个适用于 GNU sed 并且不会破坏 git repo 的工具：

```
$ grep -rli --exclude '*.git*' '#!/usr/bin/python' . | xargs -I {} \
gsed -i '' -e 's/#!\/usr\/bin\/python/#!\/usr\/bin\/env python/' {} 
```

或者你可以使用[greptile](https://pypi.python.org/pypi/Greptile) :)

```
$ greptile -x .py -l -i -g '#!/usr/bin/env python' -r '#!/usr/bin/python' . 
```

我刚刚测试了第一个脚本，第二个应该也可以。小心转义字符，我认为在大多数情况下使用 greptile 应该更容易。当然，您可以使用 sed 做很多有趣的事情，为此，最好掌握将它与 xargs 一起使用。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-03-29T16:01:19.070

我从另一篇文章中找到了这个（不记得是哪个），虽然不是最优雅的，但它很简单，作为一个 Linux 新手用户没有给我带来任何麻烦

```
for i in *old_str* ; do mv -v "$i" "${i/\old_str/new_str}" ; done 
```

如果您有空格或其他特殊字符，请使用 \

```
for i in *old_str\ * ; do mv -v "$i" "${i/\old_str\ /new_str}" ; done 
```

对于子目录中的字符串，使用 **

```
for i in *\*old_str\ * ; do mv -v "$i" "${i/\old_str\ /new_str}" ; done 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-07-31T09:16:29.113

使用简单的脚本文件有一种更简单的方法：

```
 # sudo chmod +x /bin/replace_string_files_present_dir 
```

在 gedit 或您选择的编辑器中打开文件，我在这里使用 gedit。

```
 # sudo gedit /bin/replace_string_files_present_dir 
```

然后在编辑器中将以下内容粘贴到文件中

```
 #!/bin/bash
   replace "oldstring" "newstring" -- *
   replace "oldstring1" "newstring2" -- *
   #add as many lines of replace as there are your strings to be replaced for 
   #example here i have two sets of strings to replace which are oldstring and 
   #oldstring1 so I use two replace lines. 
```

保存文件，关闭**gedit**，然后退出终端或关闭它然后启动它以加载您添加的新脚本。

导航到您要编辑多个文件的目录。然后运行：

```
 #replace_string_files_present_dir 
```

按回车键，这将自动将包含它们的所有文件中的**oldstring**和**oldstring1分别替换为正确的****newstring**和**newstring1**。

它将跳过所有不包含旧字符串的目录和文件。

如果您有多个目录包含需要字符串替换的文件，这可能有助于消除繁琐的打字工作。您所要做的就是导航到每个目录，然后运行：

`#replace_string_files_present_dir`

您所要做的就是确保您已经包含或添加了所有替换字符串，正如我在上面向您展示的那样：

`replace "oldstring" "newstring" -- *`

在文件**/bin/replace_string_files_present_dir**的末尾。

要添加新的替换字符串，只需在终端中键入以下内容打开我们创建的脚本：

`sudo gedit /bin/replace_string_files_present_dir`

不要担心您添加的替换字符串的数量，如果未找到旧字符串，它们将**无效**。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-07-06T00:50:46.967

我对许多答案的问题是我需要替换许多文件中的文件路径。尽管提供的一个答案提到了这一点，但它对我不起作用。我的解决方案：

首先，生成要更改的文件名列表。

```
filelist=($(find /path/to/your/folder | xargs grep '/path/to/fix' | cut -d : -f 1 | tr '\n' ' ')) 
```

上面的命令所做的是通过`find`管道`grep`生成`/path/to/fix`内部文件的名称。但是，`grep`也会打印出找到该字符串的行，因此该`cut`命令会删除它并仅保留文件名。`tr`用空格替换换行符，允许`filelist`存储为数组。

```
for file in "${filelist[@]}"; do sed -i.bak 's+/path/to/fix+/new/path/for/my/file+g' $file; done 
```

该`sed`命令借鉴了该问题的其他答案，并`+`用作分隔符而不是普通的`/`，因为`/`文件路径中使用了字符。*****

# ruby-on-rails - 将 Galleria 与 Rails 应用程序集成

> ID：11392486
> 
> 赞同：4
> 
> 时间：2012-07-09T09:38:38.253
> 
> 标签：ruby-on-rails, galleria

我在将 Galleria 与我的 rails 应用程序集成时遇到问题。这是交易：

这些是我的文件的位置：

```
/root/rails_project/sample_app/app/assets/stylesheets/galleria.classic.css.scss
/root/rails_project/sample_app/app/assets/javascript/galleria-1.2.7.min.js
/root/rails_project/sample_app/app/assets/javascript/galleria-1.2.7.min.js
/root/rails_project/sample_app/app/assets/javascript/galleria.classic.js
/root/rails_project/sample_app/app/assets/javascript/classic-loader.gif
/root/rails_project/sample_app/app/assets/javascript/classic-map.png 
```

在我的 application.css 中，我添加了这一行：

```
*= require galleria.classic 
```

在我的 application.js 中，我添加了这一行：

```
//= require galleria-1.2.7
//= require galleria.classic 
```

最后，这恰好是我的视图文件：

```
<h1>Displaying Photos</h1>
<script src="/root/rails_project/sample_app/app/assets/javascript/galleria-1.2.7.min.js"></script>
<div id="abc">
<% @pictures.each do |picture| %>
    <% if (picture.tag).include? @tag %>
            <ol class="microposts">
            <li id="<%= picture.id %>">
            <span class="content">
                    <%= image_tag picture.photo.url(:medium) %>
            </span>
            </li>
            </ol>
    <% end %>
<% end %>
</div>
<script>
            Galleria.loadTheme('/root/rails_project/sample_app/app/assets/javascript/galleria.classic.min.js');
        Galleria.run('#abc');
</script> 
```

当我刷新页面时，没有显示任何图像。最重要的是，我收到以下错误消息：

> 致命错误：/root/rails_project/sample_app/app/assets/javascript/galleria.classic.min.js 的主题无法加载，请检查主题路径。

请帮我弄清楚我的文件到底放在哪里。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:25:43.420

更新您的代码：

```
Galleria.loadTheme("<%= javascript_path('galleria.classic.js') %>"); 
```

# facebook - Facebook 发布了一个 在用户墙上

> ID：11392494
> 
> 赞同：1
> 
> 时间：2012-07-09T09:39:10.490
> 
> 标签：facebook, html, facebook-apps, facebook-wall

有没有办法通过我的 Facebook 应用程序将整个 div 发布到用户 Facebook 墙上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:41:39.810

不，那是不可能的。您只能包含基本的 HTML 标记（例如`<b>`），并且可以附加图片或视频。但是整个 div 或额外的 CSS 是不可能的，因为它会允许任何人弄乱 Facebook 的标记。

# java - 在 DAO 接口方法中声明或不声明 DataAccessException？

> ID：11392498
> 
> 赞同：0
> 
> 时间：2012-07-09T09:39:24.170
> 
> 标签：java, spring, exception, dao

`DataAccessException`我看到一些 Spring/Hibernate 代码具有不同的关于在 DAO 接口方法中声明的策略。

有些确实明确声明了它，有些则没有（或只是不时）：

```
public interface FlightDao {

    boolean decrementSeat(Long flightId, int quantity);

    List<Flight> findFlights(String fromAirportCode, String toAirportCode) throws DataAccessException;

    public List<Flight> getFlights();

    Flight getFlight(Long id);

    Flight getFlight(String flightNumber);

    void save(Flight flight);

} 
```

什么被认为是最佳实践，为什么？

**更新**

从[spring 教程](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/orm.html)的第 13.2.2 节开始，使用 @Repository 注释实现 DAO pojo 以确保将底层 ORM（或 JDBC）异常自动转换为 DataAccessException（运行时）异常层次结构非常重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:48:52.503

正如您[在此处](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/dao/DataAccessException.html)看到的，这是一个 RuntimeException，因此无论您是否声明它在编程方面都没有区别。当用户实现该方法时，他可以选择从方法签名中忽略此异常。

我能想到的将它放在方法签名中的唯一原因是对其进行标记，以便用户知道此方法可能会抛出此异常，因此他可以选择是否捕获并处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T16:00:44.983

如果在查找航班/获取航班/减少座位时出现任何类型的异常，调用这些“服务”方法的应用程序应该对如何处理这些异常有最终决定权。作为服务的 FlightDAO 应该简单地捕获并抛出所有异常。您可能会发现创建一个新的用户定义的异常很有用...调用它 ServiceException 或 MyDAOException 并使 FlightDAO 中的所有方法都抛出这个用户定义的异常。

# php - ASIHTTP 上传白色图片

> ID：11392499
> 
> 赞同：0
> 
> 时间：2012-07-09T09:39:25.513
> 
> 标签：php, iphone, file-upload, asihttprequest, image-uploading

我正在使用 ASIHTTP 将数据 POST 到服务器，并且所有数据都按应有的方式接收

我正在上传图片

```
 [request1 setData:imageData withFileName:@"upload.png" andContentType:@"image/png" forKey:@"Image"]; 
```

其中 imageData 是 NSData

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    [self dismissModalViewControllerAnimated:YES];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {

        UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"] ;
        UIGraphicsBeginImageContext(CGSizeMake(320,480)); 

        UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext(); 
        UIGraphicsEndImageContext();
        CGSize kMaxImageViewSize = {.width = 100, .height = 100};

        //[self resizeImage:newImage newSize:kMaxImageViewSize];
        imageData=UIImageJPEGRepresentation([self resizeImage:newImage newSize:kMaxImageViewSize], 0.5); 

}
- (UIImage *)resizeImage:(UIImage*)image newSize:(CGSize)newSize {
    CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
    CGImageRef imageRef = image.CGImage;

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Set the quality level to use when rescaling
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, newSize.height);

    CGContextConcatCTM(context, flipVertical);  
    // Draw into the context; this scales the image
    CGContextDrawImage(context, newRect, imageRef);

    // Get the resized image from the context and a UIImage
    CGImageRef newImageRef = CGBitmapContextCreateImage(context);
    UIImage *newImage = [UIImage imageWithCGImage:newImageRef];

    CGImageRelease(newImageRef);
    UIGraphicsEndImageContext();    

    return newImage;
} 
```

这就是我重新调整图像大小的方式。我遇到的问题是，当图像保存在服务器上时，我只得到一张白色的图像，空白的。是服务器问题还是我没有从应用程序发送的东西

**编辑** 这是我的服务器代码

```
$filename="upload";
$target_path = "uploads/";
$target_path = $target_path .$filename.".png"; 
if(move_uploaded_file($_FILES['file']['tmp_name'], $target_path)) {
echo "uploaded an image";
} else{
    echo "There was an error uploading the file, please try again!";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:01:53.557

```
 if (newImagesTaken.size.width > 320 || newImagesTaken.size.height > 480) {
                                // resize the image
                                float actualHeight = newImagesTaken.size.height;
                                float actualWidth = newImagesTaken.size.width;
                                float imgRatio = actualWidth/actualHeight;
                                float maxRatio = self.view.frame.size.width/self.view.frame.size.height;

                                if(imgRatio < maxRatio){
                                    imgRatio = self.view.frame.size.height / actualHeight;
                                    actualWidth = imgRatio * actualWidth;
                                    actualHeight = self.view.frame.size.height;
                                }
                                else{
                                    imgRatio = self.view.frame.size.width / actualWidth;
                                    actualHeight = imgRatio * actualHeight;
                                    actualWidth = self.view.frame.size.width;
                                }
                                CGRect rect = CGRectMake(0.0, 0.0, actualWidth, actualHeight);
                                UIGraphicsBeginImageContext(rect.size);
                                [newImagesTaken drawInRect:rect];
                                newImagesTaken = UIGraphicsGetImageFromCurrentImageContext();
                                UIGraphicsEndImageContext();
                            }    

                            /////////////////////////////////////////////////////////////////////////////

                            NSData *imageData = UIImageJPEGRepresentation(newImagesTaken, 1.0);
     [request addData:imageData withFileName:@"ByDefault.jpeg" andContentType:@"image/jpeg" forKey:@"Filedata"];

$target_path = "uploads/";

$target_path = $target_path .  $_FILES['media']['name']; 

if(move_uploaded_file($_FILES['media']['tmp_name'],$target_path)) {
echo "The file ".  basename( $_FILES['media']['name']). 
" has been uploaded";
} 
else
{
echo "There was an error uploading the file, please try again!";
} 
```

# wpf - 主窗口最小化时WPF焦点可见窗口

> ID：11392500
> 
> 赞同：0
> 
> 时间：2012-07-09T09:39:27.680
> 
> 标签：wpf, focus

我有一个始终可见的子窗口，想想一个任务托盘通知窗口。我的问题是当主窗口最小化时，我无法单击此窗口。

子窗口仍然知道鼠标何时进入它，所以我希望编写一些代码使其具有焦点。

关于我需要设置什么的任何想法，而不恢复主窗口，即不将其置于前台并使其最小化

此致

埃姆林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:37:54.970

也许你可以教你的 App 类（或一些 Util）来处理你的 childForm 实例。

```
public partial class App : Application
{
    private MyFormClass forminstance = null;

    internal static void ShowMyForm()
    {
        if (forminstance == null)
            forminstance = new MyFormClass();

        if (!forminstance.IsVisible)
            forminstance.Show();
    }

    internal static void HideMyForm()
    {
        if (forminstance != null && forminstance.IsVisible)
            forminstance.Hide();
    }

} 
```

并从您的主窗口调用方法。如果是你控制孩子的地方。

```
App.ShowMyForm(); 
```

（我没有测试这段代码）。

# java - Java ExecutorService JDBC 连接超时

> ID：11392502
> 
> 赞同：0
> 
> 时间：2012-07-09T09:39:33.210
> 
> 标签：java, jdbc, connection, executorservice

我在服务器端 spring bean 中使用 ExecutorService。我认为的问题是，当 ExecutorService 为池创建线程时，它还会从连接池（C3P0）中获取一个 DB 连接，然后不释放它，一段时间后连接超时。如果我启动我的服务器，那么一切都会正常运行一段时间，但是在周末之后，这里是个例外：

```
2012-07-09 11:12:10,825 ERROR [JDBCExceptionReporter] : The last packet successfully received from the server was259505 seconds ago.The last packet sent successfully to the server was 259505 seconds ago, which  is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.
javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: could not execute query
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1215)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1148)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:255)
    at za.co.bsg.ems.server.webservices.MWLWebServiceImpl.getUnpaidLeaveForms(ebff4f5 --------------:166)
    at za.co.bsg.ems.server.webservices.MWLWebServiceImpl.access$300(ebff4f5 --------------:37)
    at za.co.bsg.ems.server.webservices.MWLWebServiceImpl$2.run(ebff4f5 --------------:136)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: org.hibernate.exception.JDBCConnectionException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2536)
    at org.hibernate.loader.Loader.listUsingQueryCache(Loader.java:2319)
    at org.hibernate.loader.Loader.list(Loader.java:2268)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:452)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:246)
    ... 6 more 
```

为什么执行完成后我的线程没有释放连接？

# java - 自定义 Bootstrap 构造函数在 Play 中不起作用！可重复使用的块

> ID：11392507
> 
> 赞同：1
> 
> 时间：2012-07-09T09:39:47.153
> 
> 标签：java, playframework, twitter-bootstrap

我在 play framework 中定义了一个自定义的 Bootstrap 字段构造函数

```
@(elements: helper.FieldElements)

<div class="control-group@if(elements.hasErrors) { error}">
    <label class="control-label" for="@elements.id">CIAO@elements.label(elements.lang)</label>

    <div class="controls">
        @elements.input

        @elements.errors(elements.lang).map { error =>
            <span class="help-inline">@error</span>
        }
    </div>
</div> 
```

它按预期工作，除非我将字段放在重用视图块中：@(editForm: Form[Azienda]) @import helper._ @import crudder.viewhelpers.html.bootstrap.f @implicitField = @{ FieldConstructor(crudder. viewhelpers.html.bootstrap.f) }

```
@editFields() = {
    @inputText(editForm("descrizione"), '_label -> "Ragione sociale")
}

@main("Amministrazione - Aziende") {
         <!--This one use my customized block-->  
         @inputText(editForm("descrizione"), '_label -> "Ragione sociale")
         <!--This one don't work!-->  
         @editFields()

} 
```

关于如何使可重用块使用我的自定义构造函数的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:10:43.067

好的，看来这个问题不是那么吸引人，但是我发布了一个我发现的解决方法，以防万一它对其他人有用。

似乎隐式构造函数在块内不可见，因此我将构造函数显式传递给 inputText：

```
@(aziende: List[crudder.models.Persistent], editForm: Form[Azienda],id:Long)

@import helper._
@import crudder.viewhelpers.html.bootstrap.f
@Field = @{ FieldConstructor(crudder.viewhelpers.html.bootstrap.f) }

@editFields() = {

    @inputText(editForm("descrizione"), '_label -> "Ragione sociale")(Field,null)
}

@main("Amministrazione - Aziende") {
<!--This one use my customized block-->
@inputText(editForm("descrizione"), '_label -> "Ragione sociale")
<!--Now this work too!-->
@editFields()

} 
```

# wireless - 移动网络中的 SPDY

> ID：11392508
> 
> 赞同：0
> 
> 时间：2012-07-09T09:39:50.500
> 
> 标签：wireless, spdy

这对 SPDY 来说是一个稍微正交的障碍。我一直在寻找合适的文章或围绕这一特定问题进行的研究，但徒劳无功。

SPDY 的重要先决条件是持久连接。所有具有非常大的无线移动客户端访问权限的主要站点都切换到 SPDY 意味着 SPDY 的好处可能会丢失。这就是为什么 - 大多数基于数据包的移动网络无法在无线电网络的黑点和弱信号区域维持弹性 TCP 连接机制。如果是这样，那么采用 SPDY 究竟有什么意义呢？

我还没有看到任何关于 SPDY 在无线网络中的可衡量优势的报告。有人见过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:59:27.033

[https://developers.google.com/speed/articles/spdy-for-mobile](https://developers.google.com/speed/articles/spdy-for-mobile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:38:01.483

这些是正交问题。如果物理层无法传递有效载荷，那么它上面的软件也将无法创造任何奇迹——这不是 SPDY 的意义所在。您所描述的当然是一个有效的问题，但对于您的移动 ISP 来说更是如此，然后是 SPDY。

如果我们假设您居住在覆盖范围较差的区域，并且您的手机和信号塔不断丢失信号，那么重新建立 SPDY 连接并不比重新建立 TCP 连接（模 SSL 握手）更糟糕。这样一来，真的没有什么区别。

# c++ - C++ 缓冲流 IO

> ID：11392511
> 
> 赞同：4
> 
> 时间：2012-07-09T09:40:10.647
> 
> 标签：c++, iostream, buffered

我知道默认情况下，C++ 支持的所有流 IO 都是缓冲的。

这意味着要输出的数据被放入缓冲区直到它满了，然后发送到输出设备，同样对于输入，一旦缓冲区为空，数据就会被读取......所有这些都是为了减少昂贵系统的数量可以最小化通话。

但是如何在行动中验证这种行为。我的意思是考虑以下代码

```
int main()
{
    cout << "Hello world\n";
    return 0
} 
```

缓冲在这里出现在哪里？我知道发生了缓冲，但是如何解释呢？输出会立即在屏幕上看到，那么实际看到缓冲 I/O 的代码示例是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T10:12:55.143

首先，并非所有 iostream 都被缓冲；缓冲由附加的 `streambuf`. 在`filebuf`( 由`ifstream`and 使用`ofstream`) 的情况下，输入将尽可能多地读取，直到缓冲区的大小，并且输出将在溢出时刷新缓冲区，当显式刷新或关闭发生时，或者当对象被破坏时 (隐式调用close）。

的情况`cout`有点特殊，因为它永远不会被破坏也不会关闭。系统保证在`flush`被调用后至少会调用一次`exit`（当你从返回时会发生这种情况`main`）。这意味着从 main 返回之前的任何输出都将被刷新；如果你在`cout`静态对象的析构函数中使用，你仍然需要明确的刷新来确定。

也可以将`tie`输出流转换为输入流；`cout` 默认情况下绑定到`cin`。在这种情况下，任何从绑定流输入的尝试都会刷新输出。

通常的约定是只使用`std::endl`而不是简单地输出`'\n'`; `std::endl`输出 a`'\n'`然后刷新流。对于所有输出都迅速出现非常重要的流，`unitbuf`可以设置一个标志，这意味着流将在每个`<<`运算符结束时刷新。（`std::cerr`默认设置了这个。）

最后，如果你想看看缓冲的效果， `sleep(10)`在你的输出后面加上类似的东西。如果它立即出现输出，则它已被刷新；如果不是，则它已被缓冲，并且刷新隐式发生在`sleep`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T10:03:49.360

试试下面的程序。`sleep(1)`用于引入延迟（1 秒），我使用的是 linux，所以`sleep`对我有用。如果你不能让它工作，尝试其他方法来延迟这个程序（例如，简单的`for`循环）。如果您没有看到任何缓冲效果，您也可以尝试增加缓冲区大小（取消注释代码行）。

在我的操作系统（`Linux 3.2.0`）和编译器（`g++ 4.6.3`）上，这个程序打印“Portion1Portion2”，然后是“Portion3Portion4”，然后是“Portion5”。std::endl[保证刷新](http://www.cplusplus.com/reference/iostream/manipulators/endl/)缓冲区，但如您所见，换行符对我也适用。

```
#include <iostream>
#include <unistd.h>

using namespace std;

int main () {
    // Try uncommenting following lines to increase buffer size
    // char mybuf[1024];
    // cout.rdbuf()->pubsetbuf(mybuf, 1024);

    cout << "Portion1";
    sleep(1);
    cout << "Portion2\n";
    sleep(1);
    cout << "Portion3";
    sleep(1);
    cout << "Portion4" << endl;
    sleep(1);
    cout << "Portion5" << endl;
    sleep(1);
    cout << "Done!" << endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T09:44:42.567

试试下面的代码：

```
int main()
{
    for( int i =0 ; i < 10; i ++ )
    {
        cout << i << " ";
        cerr << i << " ";
    }
} 
```

缓冲的输出通常会随着流对象的销毁而刷新，因此上面的代码将打印（并非总是如此，ofc，但它适用于 gcc 4.6.3）

```
0 1 2 3..9
0 1 2 3..9 
```

代替

```
0 0 1 1 2 2 3 3 .... 9 9 
```

![我的输出](../Images/881920f6c4f1a8f897ec09eb85f2ae29.png)

因为 unbuffered`cerr`会立即打印（第一个序列），而 buffered`cout`会在`main()`.

# asp.net-mvc - 即使用户输入的数据没有错误，我的模型状态也始终无效

> ID：11392512
> 
> 赞同：2
> 
> 时间：2012-07-09T09:40:17.807
> 
> 标签：asp.net-mvc, asp.net-mvc-3, telerik-mvc, asp.net-mvc-3-areas

嗨，我的控制器中有一个方法，并且有以下代码

```
if (ModelState.IsValid)

{

    IDataOperations ops = DataSession.GetDataOperations(null);
    List<Department> dept = new List<Department>();
    ops.Load(dept);
    ops.Commit();
    int deptId = dept[dept.Count - 1].Id + 1;
    Department department = new Department()
    {
      Id = deptId,
      CompanyId = deptModel.CompanyId,
      Active = deptModel.Active,
      Name = deptModel.Name
    };

    ops.Create(department);
    ops.Commit();
    return RedirectToAction("CompanyDepartment", "Task");
}

else

{
  //some code 
```

每次页面运行时，它总是转到 else 部分，这意味着模型状态是无效的。如何检查页面中的错误在哪里，我可以添加什么代码来显示页面中的错误在哪里。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:52:11.323

你可以通过下面的代码来遍历模型状态集合，通过调试，你会看到，你的代码将进入 for 循环，你可以理解错误是什么。

```
#if DEBUG
       /// <summary> 
 /// Output the properties which are causing the issues when 
 /// the model is binding. 
 /// </summary>
  public static void ModelStateErrors (ModelStateDictionary modelState)
        {
            var errors = modelState.Where(a => a.Value.Errors.Count > 0)
                .Select(b => new { b.Key, b.Value.Errors })
                .ToArray();

            foreach (var modelStateErrors in errors)
            {
                 System.Diagnostics.Debug.WriteLine("...Errored When Binding.",                                  modelStateErrors.Key.ToString());

            }

        }
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T12:31:53.463

问题很可能出在模型中未显示在视图中的字段中。如果您正在执行验证，请在页面上放置验证摘要。（指定不应抑制字段级错误。）这将向您显示所有错误，包括那些不属于可见字段的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:45:10.593

上次我遇到这样的问题是因为有些东西不应该是空的。

在你说的那一行的代码中放置一个断点：

```
 if (modelState.IsValid) 
```

您可以通过深入到 modelState 找到代码的哪一部分有错误。你应该能够从那里解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-14T23:49:45.230

您可以通过执行以下操作来检查错误所在。

```
var errors = ModelState.Values.SelectMany(v => v.Errors);
        if (ModelState.IsValid)
        {

        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-04T06:36:17.393

[请查看此图像](https://i.stack.imgur.com/i7Iud.png)向下钻取模型状态 1) 选择值 2) 向下钻取每个成员并查找错误

请找到图片链接并查看@RBT

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-03-30T09:49:19.533

创建视图时自动生成字段并复制所需字段，然后根据需要隐藏其中一些字段

# c - c 基于 fstat 的动态数组大小

> ID：11392513
> 
> 赞同：0
> 
> 时间：2012-07-09T09:40:18.170
> 
> 标签：c, arrays

我使用 fstat 来获取文件大小。我想使用这个大小来声明一个数组，然后用另一个 fstat 更改大小并重新使用同一个数组。例子：

```
fstat(file1, &fileStat);
fsize = filestat.st_size;
char filebuffer[size-of-file1];
/* do something */
fstat(file2, &fileStat);
fsize = filestat.st_size;
char filebuffer[size-of-file2];
/* do something */ 
```

显然**我不能**重新声明文件缓冲区数组，我必须声明一个新的。但是，如果我想重新使用具有不同大小的相同数组，我该怎么做呢？
谢谢！！

编辑：

```
filebuffer = malloc(fsize);
if(filebuffer == NULL){
    perror("malloc");
    onexit(sockd, 0, fd, 4);
} 
```

和

```
tmpfilebuf = realloc(filebuffer, fsize);
if(tmpfilebuf){
    filebuffer = tmpfilebuf;
}
else{
    perror("realloc");
    free(filebuffer);
    onexit(sockd, 0, fd, 4);
} 
```

但现在我有一个段错误:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T09:41:21.987

不要使用可变长度数组。第一次使用`malloc`，然后`realloc`根据需要使用。

```
char *filebuffer;    
filebuffer = malloc(...);

tmp = realloc(filebuffer, ...);
if (tmp)
    filebuffer = tmp; 
```

您现在使用的是一个有趣且有些危险的功能，称为“可变长度数组”。也就是说，您声明一个长度在运行时计算的数组。这种方法的问题在于它使用堆栈，如果空间不足，无法通知您。

# c++ - 在不损失性能的情况下提高代码可读性

> ID：11392514
> 
> 赞同：0
> 
> 时间：2012-07-09T09:40:18.907
> 
> 标签：c++, boolean, default-arguments, member-functions

我们有几个类，其中对成员函数的调用可能会改变状态，有时不依赖于具有默认值的布尔值。

```
 A a;
 a.set( "foobar" );
 assert( a.changed() == true ); 
```

相对

```
 A a;
 a.set( "foobar", false );
 assert( a.changed() == false ); 
```

请注意，这些成员函数是虚拟的。我倾向于使用别名来更好地阅读代码，并使私有成员函数仍然允许旧方法，并且只将包装器提供给公众：

```
 a.silentlySet( "foobar" ) {
    a.set( "foobar", false );
 } 
```

我想这无论如何都会被内联。我知道我可以编写枚举和常量，这也可以提高可读性：`a.set( "foobar", SILENTLY );`但我感觉不太好，因为问题是布尔性质的（做或不做）。另一方面。但是，我想听听您如何处理这种情况。（我想我会得到一个“视情况而定”的答案，因为我肯定错过了一些关键细节）接受它吗？

这些成员函数不经常被调用和使用，但也不是很少。我担心的是，有时您可能会将布尔值误解为silent/not_silent-flag，而这具有其他含义。

这也可能具有误导性的示例：

```
if( b->getData( false ) && something_other ) 
```

这可能与`b->getData() == false`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:46:13.967

> 但我对 [在此处使用枚举] 感觉不好，因为问题是布尔性质的（做或不做）

不，枚举非常适合这个，使用它。FWIW，CodeReview 上有[关于这个案例的另一个讨论。](https://codereview.stackexchange.com/q/11300/308)

也就是说，是的，包装函数很可能是内联的。C++ 就是提供没有运行时成本的抽象。内联函数调用是这方面的基本工具，因此编译器在任何适用的地方都使用它。

# mono - MonoTouch 应用程序崩溃

> ID：11392517
> 
> 赞同：1
> 
> 时间：2012-07-09T09:40:56.090
> 
> 标签：mono, xamarin.ios

嗨，我的单点触控应用程序在应用程序的不同屏幕上发生了一些崩溃，在这个应用程序上我有一些在后台运行的任务可能是原因，我应该怎么做才能找出问题？

```
0   iShowRoomIPAD                       0x00a848f1 mono_handle_native_sigsegv + 244
1   iShowRoomIPAD                       0x00a75c6d mono_sigsegv_signal_handler + 172
2   libsystem_c.dylib                   0x34bbe7ed _sigtramp + 48
3   UIKit                               0x3072de0f -[UIAlertView(Private) _popoutAnimationDidStop:finished:] + 854
4   UIKit                               0x305e3aab -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 470
5   UIKit                               0x305e93d5 -[UIViewAnimationState animationDidStop:finished:] + 52
6   QuartzCore                          0x35d6fc2f _ZN2CA5Layer23run_animation_callbacksEPv + 202
7   libdispatch.dylib                   0x3464bee7 _dispatch_main_queue_callback_4CF$VARIANT$mp + 194
8   CoreFoundation                      0x3746d2ad __CFRunLoopRun + 1268
9   CoreFoundation                      0x373f04a5 CFRunLoopRunSpecific + 300
10  CoreFoundation                      0x373f036d CFRunLoopRunInMode + 104
11  GraphicsServices                    0x375e9439 GSEventRunModal + 136
12  UIKit                               0x305fccd5 UIApplicationMain + 1080
13  iShowRoomIPAD                       0x0012fdec wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr + 240
14  iShowRoomIPAD                       0x004689b0 iShowRoomIPAD_Application_Main_string__ + 152
15  iShowRoomIPAD                       0x00946a6c wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
16  iShowRoomIPAD                       0x00a771f7 mono_jit_runtime_invoke + 1054
17  iShowRoomIPAD                       0x00ae78e7 mono_runtime_invoke + 90
18  iShowRoomIPAD                       0x00aea527 mono_runtime_exec_main + 306
19  iShowRoomIPAD                       0x00aed87f mono_runtime_run_main + 482
20  iShowRoomIPAD                       0x00a7a25f mono_jit_exec + 94
21  iShowRoomIPAD                       0x00a74a3b main + 2166
22  iShowRoomIPAD                       0x00002998 start + 40 
```

==================================================== =============== 在执行本机代码时获得了 SIGSEGV。这通常表示单声道运行时或本机库之一中的致命错误

# 由您的应用程序使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:27:34.440

此错误有时表明您为仍在使用的本机对象处置（释放）C# 包装器。例如，如果您处置仍处于活动状态的动画实例，或者从其事件处理程序之一处置视图控制器。

这个异常的坏处可能不会在你释放一个对象后立即发生。应用程序失败可能需要一些时间。因此，请检查您的应用是否存在此类情况。

# javascript - 用于输入多个未知电子邮件地址的插件

> ID：11392524
> 
> 赞同：1
> 
> 时间：2012-07-09T09:41:12.983
> 
> 标签：javascript, jquery, forms, validation, input

我需要一个电子邮件表单，用户可以在其中添加多个收件人电子邮件地址。文本框应验证为电子邮件地址的 csv（或 ; 或其他），最重要的是，地址在输入时应该变得有点分开并且在视觉上更具吸引力。（例如，像 stackoverflow 上的标签输入字段）

有没有一个 Javascript 库/jQuery 插件呢？

或者换句话说（尤其是在没有即插即用解决方案的情况下）：您认为哪种可能的实现方式会创造最好和最容易理解的用户体验？

注意： - 自动完成在这里不起作用，因为用户可以输入他想要的任何电子邮件地址。- 纯验证已经存在，但是当存在较大的 csv 时，它并不能帮助输入字段在视觉上对用户更具吸引力......这里有一些验证示例： [jQuery 验证插件多个电子邮件地址](https://stackoverflow.com/questions/10352221/jquery-validation-plugin-multiple-email-addresses) 或[https://gist .github.com/1118247](https://gist.github.com/1118247)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T21:57:31.850

听起来 selectize.js 具有您正在寻找的大部分功能：

[http://brianreavis.github.io/selectize.js/](http://brianreavis.github.io/selectize.js/)

# objective-c - iOS SBJsonWriter 返回 null

> ID：11392525
> 
> 赞同：1
> 
> 时间：2012-07-09T09:41:15.700
> 
> 标签：objective-c, ios, null, sbjson

我是第一次使用 SBJson 框架，我遇到了一个大问题，下面的代码总是返回 null。NSDictionary 已正确填充（我打印了每个值！）。

```
NSDictionary *nsDictionary = [NSDictionary dictionaryWithObjects:values forKeys:keys];
SBJsonWriter *jsonWriter = [[SBJsonWriter alloc] init];
NSString *jsonString = [jsonWriter stringWithObject:nsDictionary];
NSLog(@"%@", jsonString); 
```

我也试过这个：

```
NSDictionary *nsDictionary = [NSDictionary dictionaryWithObjects:values forKeys:keys];
SBJsonWriter *jsonWriter = [SBJsonWriter new];
NSString *jsonString = [jsonWriter stringWithObject:nsDictionary];
NSLog(@"%@", jsonString); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:09:52.430

字典可能包含无法写入的对象`SBJsonWriter`。

您可以使用`-[SBJsonWriter stringWithObject:error:]`来获取失败的原因。

```
NSDictionary *nsDictionary = [NSDictionary dictionaryWithObjects:values forKeys:keys];
SBJsonWriter *jsonWriter = [SBJsonWriter 新];
NSError *error = nil;
NSString *jsonString = [jsonWriter stringWithObject:nsDictionary 错误:&error];
如果（！jsonString）{
    NSLog(@"错误：%@", 错误);
}
```

# linux - 如何按最新修改日期按时间顺序对“grep -l”的输出进行排序？

> ID：11392526
> 
> 赞同：36
> 
> 时间：2012-07-09T09:41:16.323
> 
> 标签：linux, unix, grep

我将 -l 标志与 grep 一起使用来打印匹配的文件名。

然后我想按升序列出结果（文件），即最新的最后一个。

明显地

```
grep -l <pattern> *.txt | ls -rt 
```

不是我需要的，因为*ls -lrt*仅输出*所有*文件。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-09T09:48:34.087

尝试：

```
ls -rt *.txt | xargs grep -l <pattern> 
```

我们首先使用`ls`列出`*.txt`文件并按修改时间（最新最后）对它们进行排序，然后为每个条目运行它们，`grep`因此我们只打印出包含该模式的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-29T16:40:39.990

我知道这是一个老问题，但我想为正在寻找相同问题的人添加我的建议。

`for i in $(ls -rt *.txt); do grep <pattern> $i; done`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-22T22:02:49.267

这是另一种方式

```
grep -l <pattern> *.txt | xargs ls -ltr --time-style="+%Y%m%d_%H%M" 
```

例如

```
$ grep -l argparse * | xargs ls -ltr --time-style="+%Y%m%d_%H%M"
-rwxr-xr-x 1 raju 197121   979 20171030_2323 list_dep.py
-rwxr-xr-x 1 raju 197121 14329 20180129_2216 grep_installed.py
-rwxr-xr-x 1 raju 197121  7517 20180129_2216 popsort.py 
```

仅列出没有时间戳等的文件，

```
grep -l <pattern> * | xargs ls -1tr 
```

例如

```
$ grep -l argparse * | xargs ls -1tr
list_dep.py
grep_installed.py
popsort.py 
```

# xslt - XSLT：从 xml 生成 csv，它有多次出现的标签

> ID：11392528
> 
> 赞同：2
> 
> 时间：2012-07-09T09:41:26.687
> 
> 标签：xslt

我有一个格式为：<

```
G>
 <P>
  <A>
    <b>value b</b>
    <c>value c</c>
   </A>
   <A>
    <b>value b2</b>
    <c>value c2</c>
   </A>
  <D>value e</D>
  <E>value f</E>
 </P>
</G> 
```

有很多标签，如“A”，可能会出现多次。问题是，如果 A 在 CSV 中输出一次出现，因此 xl 表（导出数据的地方）是：
column1 column2 column3 column4
value b value c value e value f

如果 A 在 xl 中出现两次输出，则为

column1 column2 column3 column4
value b value c value b2 value c2 value e value f

我希望它作为
column1 column2 column3 column4
value b value c value e value f
value b2 value c2 value e value f

为了制作 csv，我有这样的 xslt 代码：

```
 <xsl:value-of select="G/P/A"/>
    <xsl:text>,</xsl:text>
  <xsl:value-of select="D"/>
    <xsl:text>,</xsl:text>
  <xsl:value-of select="E"/>
    <xsl:text>,</xsl:text> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:51:33.173

这会给你你想要的，虽然不会检查你的格式是否与你所说的不同

```
<xsl:for-each select="//A">
    <xsl:value-of select="b"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="c"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="ancestor::P/D"/>
    <xsl:text>,</xsl:text>
    <xsl:value-of select="ancestor::P/E"/>
    <xsl:text>  
</xsl:text>
</xsl:for-each> 
```

并测试多行：

```
 <G>
        <P>
            <A>
                <b>value b</b>
                <c>value c</c>
            </A>
            <A>
                <b>value b2</b>
                <c>value c2</c>
            </A>
            <D>value e</D>
            <E>value f</E>
        </P>
        <P>
            <A>
                <b>value bx</b>
                <c>value cx</c>
            </A>
            <A>
                <b>value b2x</b>
                <c>value c2x</c>
            </A>
            <D>value ex</D>
            <E>value fx</E>
        </P>
    </G> 
```

给出一个输出

```
value b,value c,value e,value f  
value b2,value c2,value e,value f  
value bx,value cx,value ex,value fx  
value b2x,value c2x,value ex,value fx 
```

# jquery - 为什么它返回未定义？（Jquery xml 解析问题）

> ID：11392529
> 
> 赞同：0
> 
> 时间：2012-07-09T09:41:29.480
> 
> 标签：jquery, xml, arrays, parsing

我试图通过解析 xml 填充一个二维数组，但由于某种未知原因，我的函数没有存储第一个项目。（所以它正确存储 [0][1] 和 [1][1]，但它不存储 [0][0] 和 [0][1]）；

数组结构背后的思想是：

```
first word-  >  first choice  ->[0][0]; 
first word  ->  second choice ->[0][1]; 
second word ->  first choice  ->[1][0];
... you can guess 
```

它每次都会发出警报（只是为了检查计数器是否正确。）

XML：

```
<?xml version="1.0" encoding="utf-8" ?>
 <Page>
  <Word id = "0">
    <Choice id = "0">
     <text>First word - 1\. choice</text>
    </Choice>
    <Choice id = "1">
     <text>First word - 2\. choice</text>
    </Choice>
  </Word>
 <Word id= "1">
  <Choices>
    <Choice id = "0">
      <text>Second word - First choice</text>
    </Choice>
    <Choice id= "1">
     <text>Second word - Second Choice</text>
    </Choice>
  </Choices>
 </Word>
</Page> 
```

功能：

```
$(document).ready(function()
{
 $.ajax({
 type: "GET",
 url: "xml.xml",
 dataType: "xml",
 success: parseXml2
  });
});

function parseXml2(xml) {

var myArray = [];
var a = 0;

$(xml).find("Word").each(function() {
    var i = $(this).attr("id");
    a = 0;

    $(this).find("Choice").each(function() {
        alert('I:' + i + 'A:' + a);
        alert('Id:' + $(this).attr("id") + $(this).text());
        myArray[i] = [];
        var text = $(this).text();
        myArray[i][a] = text;
        a++;
    });
});

alert(myArray[0][0]);

}

parseXml2(xml);​ 
```

代码也可以在[这里](http://jsfiddle.net/3vBk6/3/)找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:02:41.803

这是因为您设置`myArray[i] = [];`了每次迭代。将其设置在此循环中，`$(xml).find("Word").each(function() {`而不是第二个。vágod :D?

这应该工作：

```
$(xml).find("Word").each(function() {
    var i = $(this).attr("id");
    a = 0;
    myArray[i] = [];
    $(this).find("Choice").each(function() {
        alert('I:' + i + 'A:' + a);
        alert('Id:' + $(this).attr("id") + $(this).text());

        var text = $(this).text();
        myArray[i][a] = text;
        a++;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:06:00.450

您的代码中的问题在于该`myArray[i] = [];`行。

使用这一行，您将在每次迭代时重新定义数组。

克服这一问题的一种解决方案是编写

```
if(typeof(myArray[i]) === "undefined"){
    myArray[i] = [];
} 
```

为了确保你没有写它，如果它存在

[更新的小提琴](http://jsfiddle.net/3vBk6/5/)

# c# - 在 Unity 中是替代方案，如 Ninject 有：Global.Inject(this)

> ID：11392536
> 
> 赞同：0
> 
> 时间：2012-07-09T09:42:06.950
> 
> 标签：c#, ninject, unity-container

我使用 Unity，我有一堂课：

```
public class A
{
    [Dependency]
    IRepository<User> User { get; set; }
} 
```

我也有B类：

```
public class B
{
    public B()
    {
        /* In Ninject I would use */
        /* Global.Inject(this) */
        /* Is it possible to do in Unity? */
    }
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:43:19.380

`container.BuildUp()`听起来与您要实现的目标相似。但我强烈建议不要在构造函数中使用此功能，除非您绝对必须这样做。从我的角度来看，ASP.NET 网络表单是唯一有意义的场景，因为您无法`Page`自己控制对象的实例化，并且必须接受框架决定向您抛出的内容。

`BuildUp`应该为外部框架或应用程序提供给您的“第三方”对象保留（您再次无法控制对象实例化），并且您永远不应该直接调用业务或服务对象中的容器（参见[ServiceLocator anti -模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)）。

# prestashop - 将客户组分配给来宾 (Prestashop 1.4.1)

> ID：11392537
> 
> 赞同：1
> 
> 时间：2012-07-09T09:42:07.573
> 
> 标签：prestashop

在 Prestashop 上：

我有一家正在使用“客人结账”的商店；我有兴趣创建一些客户组，但可以将其分配给来宾用户；有人知道与客人一起与任务小组一起工作吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:28:20.883

登录后，转到“客户”选项卡。在选项卡下，您应该在“组”子选项卡下创建一个新组。完成后，返回“客户”选项卡。向下滚动，您将看到客户的姓名。单击小铅笔图标（操作），然后滚动到底部。

您将看到“默认”，然后检查您希望此人关联的组。

# php - 如何对多维数组中的多维数组进行排序以消除重复？

> ID：11392540
> 
> 赞同：0
> 
> 时间：2012-07-09T09:42:18.707
> 
> 标签：php

这是我打印其内容时的示例输出：

```
Array
(
[0] => Array
    (
        [CountryA] => Array
            (
                [ProvinceA] => Array
                    (
                        [CityA] => Array
                            (
                                [SuburbA] => 
                            )
                    )
            )
    )

[1] => Array
    (
        [CountryA] => Array
            (
                [ProvinceA] => Array
                    (
                        [CityA] => Array
                            (
                                [SuburbB] => 
                            )
                    )
            )
    )

[2] => Array
    (
        [CountryA] => Array
            (
                [ProvinceB] => Array
                    (
                        [CityB] => Array
                            (
                                [SuburbC] => 
                            )
                    )
            )
    )

[3] => Array
    (
        [CountryB] => Array
            (
                [ProvinceD] => Array
                    (
                        [CityE] => Array
                            (
                                [SuburbE] => 
                            )
                    )
            )
    ) 
```

我想做的是创建一个以某种方式解析它的函数（并且可能创建一个新数组），以便结果看起来像：

```
Array
(
[0] => Array
    (
        [CountryA] => Array
            (
                [ProvinceA] => Array
                    (
                        [CityA] => Array
                            (
                                [SuburbA] => 
                                [SuburbB} =>
                            )                       
                    )
                [ProvinceB] =>
                  (
                        [CityB] => Array
                            (
                                [SuburbC] => 
                            )                       
                    )
            )
    )

[1] => Array
    (
        [CountryB] => Array
            (
                [ProvinceD] => Array
                    (
                        [CityE] => Array
                            (
                                [SuburbE] => 
                            )
                    )
            )
    ) 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:26:51.913

改变你的结构，你的数组不应该是这样的：

```
 Array(
   [0] => Array([Country A] => data),
   [1] => Array([Country B] => data)
 ) 
```

但更像这样：

```
 Array(
   [Country A] => data,
   [Country B] => data
 ) 
```

完成此操作后，在您的数组中添加一个城市将是微不足道的：

*   如果数组中存在国家，则添加到国家，否则将其添加到数组并停止
*   [添加到国家：]如果该国存在该省，则添加该省，否则将该省添加到数组中并停止
*   城市，郊区也一样......你明白了

# iphone - UItableView 的内容偏移不起作用

> ID：11392542
> 
> 赞同：3
> 
> 时间：2012-07-09T09:42:25.250
> 
> 标签：iphone, uitableview, uitextview, contentoffset

我正在开发一个应用程序，其中我有 a`UITableview`和每个单元格 a `UITextview`。当我选择一个位置时，如果光标位置不等于该位置，它将使用两行跳转向上跳转，并且在到达该位置后，在每个换行时它只会进行一行跳转。但是两行跳转不起作用。这是代码。

```
CGPoint cursorPosition = [textView caretRectForPosition:textView.selectedTextRange.start].origin;
CGRect cellYPos = [tableView rectForRowAtIndexPath:indexpath];

float newposition = cellYPos.origin.y - self.tableView.contentOffset.y;
newposition += cursorPosition.y;

if(cursorPreviousPosition < cursorPosition.y)
{
    cursorPreviousPosition = cursorPosition.y;
    CGPoint contentOffset = self.tableView.contentOffset;

    if(previousLocation > contentOffset.y)
    {
        previousLocation = contentOffset.y;
    }

    if (contentOffset.y < 0)
        contentOffset.y = 0;

    if(self.isLandScape)
    {
        if(newposition > 55 && newposition <= 106)
        {
            if(newposition - 55 > 21)
            {
                contentOffset.y += textView.font.lineHeight;
                contentOffset.y += textView.font.lineHeight;
            }
            else if(newposition - 55 == 21)
            {
                contentOffset.y += textView.font.lineHeight;
            }
            else
            {
                contentOffset.y += (newposition - 55);
            }
            [UIView animateWithDuration:0.2 animations:^{
                self.tableView.contentOffset = contentOffset;
            }];
        }
        else if(newposition >= 55)
        {
            contentOffset.y += textView.font.lineHeight;
            [UIView animateWithDuration:0.2 animations:^{
                self.tableView.contentOffset = contentOffset;
            }];
        }
    }
    else
    {
        if(newposition > 108 && newposition <=196)
        {
            if(newposition - 108 > 21)
            {
                NSLog(@"Two lines jump");
                contentOffset.y += textView.font.lineHeight;
                contentOffset.y += textView.font.lineHeight;
            }
            else if(newposition - 108 == 21)
            {
                contentOffset.y += textView.font.lineHeight;
            }
            else
            {
                contentOffset.y += (newposition - 108);
            }

            [UIView animateWithDuration:0.2 animations:^{
                self.tableView.contentOffset = contentOffset;
            }];
        }
        else if(newposition >= 108)
        {
            contentOffset.y += textView.font.lineHeight;
            [UIView animateWithDuration:0.2 animations:^{
                self.tableView.contentOffset = contentOffset;
            }];
        }
    } 
```

# javascript - Span 元素在动态添加时溢出

> ID：11392547
> 
> 赞同：0
> 
> 时间：2012-07-09T09:42:37.763
> 
> 标签：javascript, jquery, html, css

我正在将输入字段中的 span 元素动态添加到 div 中。当他们到达 div 的右端时。它在同一行溢出。

但是，当 span 元素的数量预定义到 div 元素中时，它们不会溢出，它们会下降并从新行开始。我想要这种方式。

我分析了萤火虫中的元素结构，两者看起来都一样。

这里是演示的小提琴 - [FIDDLE](http://jsfiddle.net/ashwyn/uJj4g/1/)

请让我知道我正在做的任何错误以及是否有任何解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:48:59.057

由于`span`是一个内联元素，它受 HTML 中的空格影响。

在您的预定义示例中，每个`span`.

要使您的 JavaScript 版本正常工作，您需要添加一些空格。

添加换行符：

```
$("#box1").append("<span>"+val+"</span>\r\n"); 
```

或者只是一个空格：

```
$("#box1").append("<span>"+val+"</span> "); 
```

选项是等效的，但您的意图可能会通过换行更清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:50:10.833

添加CSS怎么样

```
.span{
display: inline-block
} 
```

# javascript - 使用 Jquery 复制表单

> ID：11392548
> 
> 赞同：0
> 
> 时间：2012-07-09T09:42:39.550
> 
> 标签：javascript, jquery, forms

我在互联网上找到了一个插件并添加了一些新行来形成这个：

```
 (function($){

 $countForms = 1;
 $countFormsA = 1;

      $.fn.addForms = function(idform){

          var myform = "<table>"+
          "  <tr>"+
          "     <td>Field A ("+$countForms+"):</td>"+
          "     <td><input type='text' name='fielda["+$countForms+"]'></td>"+
          "     <td>Field B ("+$countForms+"):</td>"+
          "     <td><textarea name='fieldb["+$countForms+"]'></textarea></td>"+
          "     <td><button>remove</button></td>"+
          "  </tr>"+
          "</table>";

          var myform2 = "<table>"+
          "  <tr>"+
          "     <td>Field C</td>"+
          "     <td><input type='text' name='fieldc["+$countFormsA+"]'></td>"+
          "     <td>Field D ("+$countFormsA+"):</td>"+
          "     <td><textarea name='fieldd["+$countFormsA+"]'></textarea></td>"+
          "     <td><button>remove</button></td>"+
          "  </tr>"+
          "</table>";

    if(idform=='mybutton'){
       alert(idform);
       myform = $("<div>"+myform+"</div>");
$("button", $(myform)).click(function(){ $(this).parent().parent().remove(); });
$(this).append(myform);
$countForms++;
}
    else{

    if(idform=='mybutton1'){
       alert(idform);
    myform2 = $("<div>"+myform2+"</div>");
$("button", $(myform2)).click(function(){ $(this).parent().parent().remove(); });
    $(this).append(myform2);

    $countFormsA++;

                        }
                    }                     
      };

})(jQuery);         

 $(function(){
    $("#mybutton1").bind("click", function(){

    var idform=this.id;

        if($countFormsA<3){
            $("#container1").addForms(idform);
        }       
    });
});

$(function(){
    $("#mybutton").bind("click", function(){

    var idform=this.id;

        if($countForms<3){
            $("#container").addForms(idform);
        }       
    });
}); 
```

但是我遇到了问题。如果我单击“添加表单”一切正常，但是当我单击“添加表单 1”时，会添加新表单，但 1 秒后它会消失。任何提示我该如何解决这个问题？谢谢！

html代码：

```
<button id="mybutton">add form</button>
<div id="container"><div>
<form method="post" name="b" >
<table>
    <tr>
        <td>Field A</td>
        <td><input type='text' name='dadoA'></td>
        <td>Field B</td>
        <td><textarea name="dadoB"></textarea></td>
                             <td><button>remove</button></td>
                          </tr>
                         </table></div></div>

                         <div align="center">
<p><input type="submit" value="Registar" name="registar"></p>
</div>
<!-- -->

<button id="mybutton1">add form1</button>
<div id="container1"><div>
<form method="post" name="a" >
<table>
    <tr>
        <td>Field A</td>
        <td><input type='text' name='dadoA'></td>
        <td>Field B</td>
        <td><textarea name="dadoB"></textarea></td>
                             <td><button>remove</button></td>
                          </tr>
                         </table></div></div>

                         <div align="center">
<p><input type="submit" value="Registar1" name="registar1"></p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:53:31.897

表单将消失，因为该按钮的默认行为正在刷新页面。

您需要在点击绑定中防止这种行为。我建议通过事件对象并使用`preventDefault()`ie：

```
$("#mybutton1").bind("click", function(e){
    e.preventDefault();
    var idform=this.id;

    if($countFormsA<3){
        $("#container1").addForms(idform);
    }       
}); 
```

# ios - Amazon S3：无需密钥即可访问

> ID：11392554
> 
> 赞同：0
> 
> 时间：2012-07-09T09:42:50.893
> 
> 标签：ios, api, amazon-s3, photo, bucket

我正在开发一个将图片保存在 Amazon S3 服务器中的 iOS 应用程序。不幸的是，服务器的所有者不愿意给我他的密钥。相反，他生成并向我提供了他说我可以用来上传文件的签名。

问题是我找不到执行此操作的方法。尤其是 Amazon S3 示例“S3Uploader”。

你对此有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:06:07.870

密钥仅用于计算签名，因此如果您已经有签名，则不需要它。但是，您确实需要访问密钥 ID（以便亚马逊知道使用哪个密钥来验证签名）。

我快速浏览了 iOS sdk 文档，看起来它们并没有提供一种方法来缩短签名计算过程。上传文件很容易，您只需发出 PUT 请求：

```
PUT /ObjectName HTTP/1.1
Host: BucketName.s3.amazonaws.com
Date: date
Authorization: signatureValue
Content-Length: 1234 
```

您可以在[文档](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectPUT.html)中使用额外标题的详细信息。

[另一个工作流程是，远程服务可以使用亚马逊STS](http://docs.amazonwebservices.com/STS/latest/APIReference/Welcome.html?r=2830) api 返回临时凭证，而不是为您提供签名值，而是仅授权将文件上传到指定的存储桶。如果你走这条路，那么你将能够使用亚马逊提供的 SDK。

# asp.net-mvc - mvc pagedlist asp.net 会员资格

> ID：11392555
> 
> 赞同：1
> 
> 时间：2012-07-09T09:42:54.037
> 
> 标签：asp.net-mvc, asp.net-membership, pagedlist

我正在使用具有 ASP.NET 成员资格的 PagedList.mvc 助手在表中显示应用程序用户详细信息。寻呼机使用 Membership.GetAllUsers() 方法可以正常工作，但我希望能够利用返回单页数据而不是整个表的重载，如[本文](https://stackoverflow.com/questions/1214162/working-with-pagedlist-and-membership)所建议的那样：

```
 int pageSize = int.Parse(ConfigurationManager.AppSettings["gridPageSize"]);
        int totalRecords;
        IEnumerable<MembershipUser> users = Membership.GetAllUsers((page ?? 0), pageSize, out totalRecords).Cast<MembershipUser>();
        return View(users.ToPagedList((page ?? 1), pageSize)); 
```

上面的代码使用了有问题的重载，不幸的是只显示了第一页数据，并且没有提供到第二页或后续页面的链接。这似乎是因为 PagedList 助手根据传递给它的集合的大小而不是表的实际大小来配置自己（可从 GetAllUsers(int, out int) 的输出参数中获得。

有谁知道绕过这个明显限制的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:05:12.163

根据 PagedList README 的示例 2，使用 StaticPagedList：

[https://github.com/troygoode/pagedlist#example-2-manual-paging](https://github.com/troygoode/pagedlist#example-2-manual-paging)

```
var users = Membership.GetAllUsers(pageIndex, pageSize, out totalUserCount);
var usersAsIPagedList = new StaticPagedList<MembershipUser>(users, pageIndex + 1, pageSize, totalUserCount); 
```

# php - 动态下拉列表无法正常工作

> ID：11392557
> 
> 赞同：0
> 
> 时间：2012-07-09T09:42:58.757
> 
> 标签：php, mysql, html-select

我正在做一个小项目，我需要动态创建一个下拉列表。我已经找到了一种方法并根据它开发了代码。我正在使用`php`with`Zend Framework`我的数据库是`mysql`.

这是我的代码：

下面是`PVHandler.php`我用来连接到数据库并检索值的类。

```
class PVHandler {

public function generateSelect(){

    try {
        $con = mysql_connect("localhost","root","");
        mysql_select_db("accounts_db",$con);

    $data = mysql_query('SELECT `desc` FROM `expense` LIMIT 0 , 30');
    } catch (Exception $e) {
        die('Error!!!'.$e);
    }
    $desc = mysql_fetch_array($data);
    $html = '<select name="expenses">';
    foreach ($desc as $des){
        $html.='<option value='.$des.'>'.$des.'</option>';
    }
    $html.='</select>';
    return $html;
}

}

?> 
```

上述类中的`generateSelect()`方法在`newPV.phtml`文件内部调用。

就这个。

```
<html xmlns="http://www.w3.org/1999/xhtml" lang = "en">
<style>
</style>
<head></head>
<body>
 <div><?php include APPLICATION_PATH.'/views/scripts/layouts/header.php';?></div>
  <div id="title"><h3>TSDC Lanka (Private) Ltd.</h3>
  <h2>Payment Voucher</h2></div>
   <div id="content"><form action="#" method="post">
    Date : <input type="text" name="date" id="dt" value=<?php echo date("j/M/Y");?>></td>
<span style="align:right;">Document No: <input type="text" name="docNo"><br><br></span>
Cheque No: <input type="text" name="cheqNo" ><br><br>
Payment in favour of : <input type="text" name="payin" style="width:700px"><br><br>
Description :  <?php include APPLICATION_PATH.'/models/db/PVHandler.php';
 $pv = new PVHandler();             /*Here I have called the method*/
 $html= $pv->generateSelect();
  echo $html; ?>
</form></div>
</body>
</html> 
```

我想`expense`在`accounts_db`数据库中检索表中的费用。

我已将这些值输入数据库进行测试。

```
exid      desc
 1         Water
 2         Electricity
 3         Salaries
 4         Printing and Stationary 
```

输出仅显示带有“水”的下拉列表。“水”显示两次。

为什么会这样？请帮我。

提前致谢

查鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:56:42.847

mysql_fetch_array 仅选择数据库的一 (1) 行。要选择所有结果，您需要使用 while 循环：

```
$html = '<select name="expenses">'; 
while($desc = mysql_fetch_array($data)) {
    $html.='<option value='.$desc['desc'].'>'.$desc['desc'].'</option>'; 
} 
```

您可以使用数据创建一个数组，然后使用 foreach 写入数据。

# android - 我无法将我的 apk 安装到我的 HTC 手机中

> ID：11392558
> 
> 赞同：1
> 
> 时间：2012-07-09T09:43:06.890
> 
> 标签：android, mobile

我有一部 Android HTC 手机。当我使用 Eclipse 运行我的程序时，它显示错误为

```
BouncingBallSample] ERROR: Application requires API version 7\. Device API version is 1 (Android 1.0).
BouncingBallSample] Launch canceled! 
```

在清单文件中，我将 sdk 版本设置为

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.immersion.bouncingballsample"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="7" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".BouncingBallActivity"
                  android:label="@string/app_name"
                  android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
                <application android:debuggable="true" />
            </intent-filter>
        </activity>
    </application>
    <uses-permission android:name="android.permission.VIBRATE"></uses-permission>
    <uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:47:31.927

更改以下行：

```
<uses-sdk android:minSdkVersion="7" /> 
```

至

```
<uses-sdk android:minSdkVersion="1" /> 
```

或者您甚至可以根据需要删除此行，默认值为 1。

额外信息：[Android sdk 页面](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:49:05.467

您可以更改`MinSdkVersion`为较低的 no like 1 或`android:targetSdkVersion="1"`在同一标签中使用。

# android - android如何在重新安装应用程序时将数据保存在数据库sqlite中

> ID：11392560
> 
> 赞同：1
> 
> 时间：2012-07-09T09:43:13.827
> 
> 标签：android

在我的android应用程序中，我使用数据库Sqlite，我从文件.txt中输入一些记录到数据库中，直到一切正常，但是在我运行数据库的一小段时间后，我发现没有数据，所以如何我可以在下次运行时保存数据而不被删除吗？

# c# - 无法获取 HTML

> ID：11392564
> 
> 赞同：0
> 
> 时间：2012-07-09T09:43:35.950
> 
> 标签：c#, .net, httpwebrequest

我正在尝试使用 httpwebrequest 打开 adfoc.us/504....9 链接。但是它没有给我任何 HTML 代码。

```
 try
    {
        req = WebRequest.Create(txtLink.Text);
        WebProxy wp = new WebProxy(proxies[0]);
        //req.Proxy = wp;

        WebResponse wr = req.GetResponse();
        StreamReader sr = new StreamReader(wr.GetResponseStream());
        string content = sr.ReadToEnd();
        MessageBox.Show(content);
        sr.Close();
    }
    catch (UriFormatException)
    {
        MessageBox.Show("URL should be in this format:\nhttp://www.google.com");
        return;
    } 
```

如果我使用 [google.com][1] 之类的网站 - 我会得到带有 google html 源代码的 mbox。如果我使用`adfoc.us/50....`链接，我会得到一个空字符串。

问题可能出在哪里？谢谢你。

编辑：我通过安装 GeckoFx 组件解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:52:14.723

这只是一个猜测。

如果您可以在浏览器中打开链接而不是从代码中打开链接，则可能意味着 adfoc.us 会阻止您，因为它找不到 useragent 标头。尝试添加浏览器使用的用户代理标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:22:45.380

初始化时`WebRequest`，添加以下内容：

```
req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"; 
```

似乎它不喜欢默认标题。我从 Firefox 请求标头中获得了上述信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:57:53.023

尝试这个 `var req = (System.Net.HttpWebRequest) System.Net.WebRequest.Create(""); req.AllowAutoRedirect = true;`

你可以手动设置`MaximumAutomaticRedirections`

# mongodb - Mongo 地理空间索引和 Meteor

> ID：11392566
> 
> 赞同：13
> 
> 时间：2012-07-09T09:43:44.920
> 
> 标签：mongodb, meteor, minimongo

我想知道是否可以将 mongodb 地理空间索引与 Meteor 架构一起使用。

Minimongo 没有实现地理空间索引，但这是否意味着我们不能在服务器端使用这个 mongo 功能？

例如，使用[todos](https://www.meteor.com/examples/todos)应用程序，如果我们在 todo 上使用位置，是否可以执行以下操作：

```
// Publish complete set of lists to all clients.
Meteor.publish('todos', function (lon,lat) {
   return Todos.find({loc: {$near:[lon,lat]}}).limit(2);
}); 
```

在客户端：

```
Meteor.subscribe('todos', lon, lat ); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T11:05:24.103

是的，您可以在 Meteor 中使用 MongoDB 地理空间索引，**也**可以在 Meteor 应用程序中创建该索引。

**- 地理空间搜索**

我正在使用`$within`下面的运算符，而不是`$near`上面提到的运算符，但这仍然适用：

```
Meteor.publish('places', function(box) {
    return Places.find({ loc : { $within : { $box : box }}});
}); 
```

*提醒*：这些类型的地理查询仅在**服务器**上可用（当前）。

**- 在 Meteor 中创建地理空间索引**（而不是在 MongoDB shell 中）

```
Places._ensureIndex({ loc : "2d" }); 
```

例如，您可以在`bootstrap.js`.

此外，您可能想要放入`ensureIndex`in `Meteor.startup`，或者在插入一些初始数据时。

* * *

**警告**：正如[这里](https://groups.google.com/d/msg/meteor-talk/8PvWXKocIGI/kjPn8vQJ6DQJ)提到的，上述调用方法`ensureIndex`是一种解决方法，因为缺少官方调用方式，所以请期待这可能会改变。

**更新**：现在反映 Meteor 0.5.0 的变化，请参阅下面的[@Dror](https://stackoverflow.com/users/460278)评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T03:04:32.437

是的，我认为你可以。

在服务器端，Meteor 将 find/update/.. 委托给 node-mongo-native 调用。您可以查看 packages/mongo-livedata/mongo_driver.js 中的代码。据我所知，node-mongo-native 支持地理空间索引。

# objective-c - 如何返回到 Objective-C 中的先前视图？

> ID：11392567
> 
> 赞同：8
> 
> 时间：2012-07-09T09:43:48.837
> 
> 标签：objective-c, ios, uinavigationcontroller

我是 iOS 编程的初学者，我想实现返回主视图的功能。

我用过这段代码：

```
-(IBAction)onclickhome:(id)sender
{

    [self.navigationController popViewControllerAnimated:YES];
} 
```

我在主页按钮单击事件中使用了导航控制器，但它没有跳转到主屏幕。

您有任何适用于我的代码的建议和源代码吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T09:55:13.090

我不确定我是否理解你的问题。

你是什​​么意思

> 我在主页按钮单击事件中使用了 navigationController 但它没有跳转到主屏幕

?

如果你想弹出到根控制器，你可以使用`popToRootViewControllerAnimated`.

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

来自 Apple 文档`UINavigationController`

```
popToRootViewControllerAnimated:

Pops all the view controllers on the stack except the root view controller and updates the display.
- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated 
```

如果您设置了 a`UINavigationController`并且它的根控制器称为 A，那么如果您从 A 导航到 B，然后从 B 导航到 C，您有两种可能返回到前一个控制器（您可以拥有其他控制器，但我列出了主要的控制器） ):

*   从 C 导航回 B 与`popViewControllerAnimated`
*   从 C 导航回 A`popToRootViewControllerAnimated`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-01T04:24:02.767

来回导航视图的最佳方法是从导航视图控制器堆栈中推送和弹出视图。

要返回一个视图，请使用以下代码。这将确保保留视图之间的平滑过渡。

```
UINavigationController *navigationController = self.navigationController;
[navigationController popViewControllerAnimated:YES]; 
```

要返回两个视图，请执行以下操作

```
UINavigationController *navigationController = self.navigationController;
[navigationController popViewControllerAnimated:NO];
[navigationController popViewControllerAnimated:YES]; 
```

如果您不返回预期的视图，请在弹出任何视图之前执行以下代码...

```
UINavigationController *navigationController = self.navigationController;
NSLog(@"Views in hierarchy: %@", [navigationController viewControllers]); 
```

您应该会看到如下所示的数组，这将帮助您验证堆栈是否按预期维护。

```
Views in hierarchy: (
    "<Main_ViewController: 0x1769a3b0>",
    "<First_ViewController: 0x176a5610>",
    "<Second_ViewController: 0x176af180>" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-30T11:55:29.930

我用

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

因为其他答案在 Xcode 8.0 中不起作用

# c++ - c++ 转换 const 成员

> ID：11392574
> 
> 赞同：-4
> 
> 时间：2012-07-09T09:44:18.383
> 
> 标签：c++, type-conversion

我有一个成员 L ，它是我想在 const 函数中使用的整数对列表。因此，我不应该修改 L，但我不知道如何遍历 L 以读取其内容（而不是修改它们）。

编译器一直说存在转换问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:47:24.297

假设您正在使用`std::list<std::pair<int,int>>`您需要`std::list<std::pair<int,int>>::const_iterator`用作迭代器的类型。

# perl - 用于连接oracle数据库的模块

> ID：11392575
> 
> 赞同：1
> 
> 时间：2012-07-09T09:44:21.830
> 
> 标签：perl, oracle, class

我正在尝试为 Oracle Connection 编写一个包装器（请参阅 Ora 包）。我正在使用它，如下所示：

```
 $fine->dbconnect()or die $_;
        my $h = $fine->execSql("update qot set qot_sup_xpressfeed='$s' where qot_id=$h->{$k}->{'QOT_ID'}") ;
        print "update qot set qot_sup_xpressfeed='$s' where qot_id=$h->{$k}->{'QOT_ID'}";
        $fine->dbdisconnect() or die $_; 
```

这里是 Ora 类：

```
package Ora;

use strict;
use warnings;
use DBI;
use DBD::Oracle;
use DBD::Oracle qw(:ora_types);
use Utils;
sub new
{
    my ($class, $dbname, $user) = @_;
    my $self = {
        _dbname => lc($dbname),
        _user   => lc($user),
       # _sth    => {}
    };

    bless $self, $class;
    return $self;
}

sub dbconnect
{
        use Ora::Ora_db;
        my ($this)  = @_;
        my $dberror = "";
        my $dbdriver;
        my $OS = $^O;
        $ENV{'ORACLE_SID'}  = $this->{_dbname};
        $ENV{'ORACLE_TERM'} = "vt220";
        if ($OS =~ /linux/ )
        {
             $ENV{'ORACLE_HOME'} = "/opt/oracle/product/10.2";
                $ENV{'ORACLE_BASE'} = "/opt/oracle";
                $ENV{'TNS_ADMIN'}   = "/opt/oracle/product/10.2/network/admin";
                $ENV{'ORA_NLS33'}   = "/opt/oracle/product/10.2/ocommon/nls/admin/data";    ## TODO: Weg, wenn nur noch 1 Client!!
                $ENV{'NLS_LANG'}    = "GERMAN_GERMANY.WE8ISO8859P1";
        }

        $dbdriver = DBI->install_driver('Oracle')
        or return("DB-Treiber konnte nicht geladen werden");
        my $utils=new Utils();
        $utils->meldung( 'Basis',"Starte DB-Verbindung|". $this->{_dbname});
        my $oradb = new Ora_db($this->{_dbname});
        $this->{_connection} = $dbdriver->connect(
            $this->{_dbname},
            "QF",
            $oradb->getParam() ,
            {
                RaiseError => 1,
                AutoCommit => 0
            }) || die "Database connection not made: $DBI::errstr";

    return 1;
}
sub dbdisconnect
{
     my ($this ) = (@_);
     return($this->{_connection}->disconnect);
}
sub execSql
{
    my ($this, $mysql, $key) = (@_);
    my $sth;
    my $i=0;
    my @rs_to;  # 2dim Array!

    $sth = $this->{_connection}->prepare($mysql) || die "$mysql -> ".$this->{_connection}->errstr;
    $sth->execute() or die "Fehler bei sth->execute: ".$this->{_connection}->errstr;
    ##my $rs = $this->_toArray($sth);
    my $rs = $this->_toHash($sth, $key);
    $sth->finish();
    $this->{_connection}->commit;

    return $rs;
}

sub _toHash
{
    my ($this, $sth, $key) =@_;
    $sth->fetchall_hashref($key)or die($_);
} 
```

但我收到了这个错误：

```
Assertion i == (((((SV *) (name_av))->sv_flags & 0x00008000)) ? Perl_mg_size(my_perl, (SV *) name_av) : ((XPVAV*) (name_av)->sv_any)->xav_fill)+1 failed: file "DBI.xs", line 1844 at /usr/lib/perl5/site_perl/5.8.7/i586-linux-thread-multi/DBI.pm line 1999.
Issuing rollback() for database handle being DESTROY'd without explicit disconnect(). 
```

谁能给我任何线索我做错了什么？

TIA，问候河。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:49:22.233

我明白了...这解决了我的问题！

```
 my $rs ;
    $rs = $this->_toHash($sth, $key) if ($key);

    $sth->finish();
    $this->{_connection}->commit;

    return $rs; 
```

问候和感谢！

# core-audio - 如何找到系统卷？

> ID：11392583
> 
> 赞同：0
> 
> 时间：2012-07-09T09:45:07.277
> 
> 标签：core-audio, avaudioplayer, audio

我在 iPhone 应用程序上遇到问题。我正在查看 SystemVolumeDidChangeNotification 和相关文档并浏览网络。但我找不到一种简单的方法来获取 SystemVolume 的当前值。我不敢相信这些信息不可能简单地获得，但由于某种原因我没有成功。

我还注意到 iPod touch 上的音乐应用程序，完全符合我的要求，所以它一定很简单。

有人知道答案吗？

感谢您提供任何相关信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:56:50.193

这是获取当前音量的代码，结果输出将从 0.0 到 1.0。

```
Float32 volume;
UInt32 dataSize = sizeof(Float32);

Float32 currentVolume= AudioSessionGetProperty (
                         'chov',
                         &dataSize,
                         &volume
                         ); 
```

# android - 按给定字符串搜索收件箱内容

> ID：11392584
> 
> 赞同：1
> 
> 时间：2012-07-09T09:45:07.927
> 
> 标签：android, search, full-text-search, sms

我想开发一个应用程序，其中的一小部分将从我设备收件箱中的 EditText 中搜索消息字符串......

我已经提到了一些链接，例如

[搜索短信收件箱](https://stackoverflow.com/questions/11301046/search-sms-inbox)

[https://stackoverflow.com/questions/8941228/how-to-read-all-sms-from-inbox-in-android-2-2-and-above](https://stackoverflow.com/questions/8941228/how-to-read-all-sms-from-inbox-in-android-2-2-and-above)

[http://androidforums.com/android-applications/1773-how-read-sms-android.html](http://androidforums.com/android-applications/1773-how-read-sms-android.html)

[读取来自特定发件人的所有短信](https://stackoverflow.com/questions/10870230/read-all-sms-from-a-particular-sender/10870333#10870333)

但无法使它成为可能...任何人都可以帮助我提供一段有用的代码...在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:15:29.957

我终于得到了答案，但不知道它是否是最有效的解决方案。如果有更有效的解决方案，请纠正我。

我首先检查了收件箱中的特定文本到我在搜索框中插入的文本。如果文本匹配，那么我将其插入到 ArrayList 中。最后我打印整个 ArrayList。

```
public ArrayList<String> check(String str)
{

    boolean fullContainsSub = str.toUpperCase().indexOf(content.toUpperCase()) != -1;
    //String styledText = "This is <font color='red'>simple</font>.";
    //item.setText(Html.fromHtml(styledText), ListView.BufferType.SPANNABLE);

    if(fullContainsSub)
    {
     itemList.add(str);
    }
    return itemList;
} 
```

这里***str***是收件箱中的文本，而***内容***将是搜索框文本。

# javascript - 如何在 android 上运行我的 node.js 项目？

> ID：11392590
> 
> 赞同：33
> 
> 时间：2012-07-09T09:45:24.233
> 
> 标签：javascript, android, node.js, webserver

我的 android 平板电脑上有一个工作的 php 服务器，所以我希望它也可以以某种方式运行 nodejs。源代码在 github 上可用，也可以在 linux 上构建，但我不太明白如何构建它。

提前致谢，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T10:26:07.973

网站上缺少构建说明：

1.  下载它：

    `wget http://nodejs.org/dist/v0.8.1/node-v0.8.1.tar.gz`

2.  打开包装：

    `tar xzf node-v0.8.1.tar.gz`

3.  进入解压后的文件夹：

    `cd node-v0.8.1/`

4.  跑

    `./configure`&& `make`&&`sudo make install`

您可能需要先安装一些依赖项，例如`g++`or和。`build-essential``curl``libssl-dev`

还有一个[打包的 Android 端口](https://github.com/paddybyers/anode)，但似乎没有得到积极维护。

**编辑**：显然您需要根据您的设备修改一些构建选项。谷歌搜索“node android”+你的模型应该会给你更多的细节。以下是 G1 和 Galaxy S 的：http: [//mitchtech.net/node-js-on-android-linux/](http://mitchtech.net/node-js-on-android-linux/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-21T13:10:48.873

[截至 2015 年 9 月，来自https://nodejs.org/dist/latest/](https://nodejs.org/dist/latest/)的 ARM 有 Node.js 4.x 发行版

# blackberry - 如何在 BB RIM 中进行即时更新？

> ID：11392591
> 
> 赞同：0
> 
> 时间：2012-07-09T09:45:40.897
> 
> 标签：blackberry

我想手动显示一个字段。

```
public class Main_NewsDetail extends MainScreen {
private Custom_FontField slider;
private boolean a;

public Main_NewsDetail() {
    super(USE_ALL_WIDTH);

    slider = new Custom_FontField(
            Bitmap.getBitmapResource("slider_thumb_normal.png"),
            Bitmap.getBitmapResource("slider_progress_normal.png"),
            Bitmap.getBitmapResource("slider_base_normal.png"),
            Bitmap.getBitmapResource("slider_thumb_focused.png"),
            Bitmap.getBitmapResource("slider_progress_focused.png"),
            Bitmap.getBitmapResource("slider_base_focused.png"),
            Bitmap.getBitmapResource("slider_thumb_pressed.png"),
            Bitmap.getBitmapResource("slider_progress_pressed.png"),
            Bitmap.getBitmapResource("slider_base_pressed.png"), 35, 10, 5,
            5, FOCUSABLE);
    if(a)
    add(slider);

}

public class Custom_NewsDetailBottom extends Manager implements
        FieldChangeListener {

    Custom_NewsDetailBottom() {
        super(Manager.USE_ALL_WIDTH | Manager.NO_VERTICAL_SCROLL
                | Manager.NO_HORIZONTAL_SCROLL);
        Background background = BackgroundFactory
                .createBitmapBackground(bg);
        setBackground(background);
        fontbtn = new Custom_ButtonField(font, fontactive, fontactive) {
            protected boolean navigationClick(int status, int time) {
                a = !a;   <-- here is to control field display
                return true;
            }
        };
        fontbtn.setChangeListener(this);
        add(fontbtn);

    }

    protected void sublayout(int width, int height) {
        Field field = getField(0);
        layoutChild(field, font.getWidth(), font.getHeight());
        setPositionChild(field, getGap(), 5);

        width = Math.min(width, getPreferredWidth());
        height = Math.min(height, getPreferredHeight());
        setExtent(width, height);
    }

    public int getPreferredHeight() {
        return 70;
    }

    public int getPreferredWidth() {
        return Display.getWidth();
    }

    protected void paint(Graphics graphics) {
        int rectHeight = getPreferredHeight();
        int rectWidth = getPreferredWidth();
        graphics.drawRect(0, 0, rectWidth, rectHeight);
        super.paint(graphics);
    }

    private int getGap() {
        return ((getPreferredWidth() / 4) - font.getWidth()) / 2;
    }

    public void fieldChanged(Field field, int context) {
        if (field == sharebtn) {

        } else if (field == commentbtn) {
            Main.getUiApplication().pushScreen(new Main_Comments());
        } else if (field == otherbtn) {
            Main.getUiApplication().pushScreen(new Menu_Others());
        }
    }

    public boolean keyDown(int keycode, int status) {
        if (Keypad.key(keycode) == Keypad.KEY_ESCAPE) {
            delete(slider);
            return true;
        }
        return super.keyDown(keycode, status);
    }
}
} 
```

以上是显示屏幕的代码。在 fontbtn 中，单击时将更改变量`true / false`。但是，它不能立即更新以显示该字段`slider`。

`slider`类似于 seekbar in `Android`。在android中，当click然后可以`setvisibility`但不是blackberry RIM，那么如何控制呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:10:50.173

尝试调用 Manager 的[invalidate](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#invalidate%28%29)方法来强制重新绘制托管区域：

```
Marks this entire manager as requiring repainting.
Invoke this method to signal that this manager's entire region requires repainting. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:58:18.260

首先，如果可以避免的话，我建议不要使用具有这样名称的变量：

```
private boolean a; 
```

尝试给它起一个更具描述性的名称，因为这将有助于我们更好地理解您的代码。

接下来，看起来您`a`在构造函数中测试变量之前它有机会更改`Main_NewsDetail`。所以这行不通。也许在`Main_NewsDetail`课堂上试试这个：

```
/** separate boolean used because Field.isVisible() doesn't seem totally robust */
private boolean isSliderVisible = false;

private void setSliderVisible(boolean isVisible) {
   if (isVisible != isSliderVisible) {
      if (isVisible) {
          add(slider);
      } else {
          delete(slider);
          // but, we still retain the "slider" member variable, so it can be
          // added again later
      }
      isSliderVisible = isVisible;

      // I'm not actually sure that this is needed.  I include it because I can't run this code right now!
      invalidate();
   }  
} 
```

然后，在您的按钮单击处理程序中：

```
fontbtn = new Custom_ButtonField(font, fontactive, fontactive) {
     protected boolean navigationClick(int status, int time) {
         setSliderVisible(!isSliderVisible);
         return true;
     }
}; 
```

现在，这段代码可以工作了，因为你`Main_NewsDetail`只有一个`Field`，滑块。如果实际上有多个`Field`对象（您可能会有），那么您可能需要更复杂的逻辑。您可能希望每次都在同一位置显示滑块。为此，您可以`index`在所有 s 字段的列表中记录滑块的`Main_NewsDetail`（例如，滑块是第 1 字段、第 2 字段、第 5 字段吗？）。然后，而不是调用`add(slider)`，你会这样做：

```
private void setSliderVisible(boolean isVisible) {
   if (isVisible != isSliderVisible) {
      if (isVisible) {
         insert(slider, sliderIndex); 
```

您可能需要创建`Main_NewsDetail`一个子类`Manager`并实现该`sublayout()`方法。这样，您可以确保如果`isSliderVisible`，您始终将滑块布置在相同的位置。

# java - 再次出现 NullPointerException - intersects()

> ID：11392592
> 
> 赞同：0
> 
> 时间：2012-07-09T09:45:43.340
> 
> 标签：java, multithreading

**Ball.java**

```
public class Ball {
    int x = 500, y = 10, speed = 1;
    GameBoard board;
    boolean keepRunning = true;
    Thread thread;

    Ball(GameBoard board) {
        this.board = board;
        new Thread(r1).start();
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    Runnable r1 = new Runnable() {
        public void run() {
            try {
                while (true) {
                    if (board.ball.intersects(board.pPaddle)) {
                        speed = -speed;
                    } else {
                        System.out.println(board.ball + " z " + board.pPaddle);
                    }
                    x -= speed;
                    board.repaint();
                    Thread.sleep(10L);

                }
            } catch (InterruptedException iex) {
            }
        }

    };
} 
```

**游戏板.java**

```
@SuppressWarnings("serial")
public class GameBoard extends Canvas {
    Image dbi;
    Graphics db;
    JFrame okno;
    Player p = new Player(this);
     Ball b = new Ball(this);
     Ai a = new Ai(this);
     Rectangle aiPaddle = new Rectangle(10, 590, 10, 50);
     Rectangle pPaddle = new Rectangle(10, 100, 10, 50);
     Rectangle ball = new Rectangle(500, 10, 10, 10);
    GameBoard() {
        okno = new JFrame();
        okno.setTitle("Pink Ponk");
        okno.setSize(600, 300);
        okno.getContentPane().setBackground(Color.black);
        okno.setResizable(false);
        okno.setVisible(true);
        okno.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        addKeyListener(p);
    }

    public static void main(String[] args) {
        GameBoard gra = new GameBoard();
        gra.okno.add(gra);
    }

    @Override
    public void update(Graphics g) {
        pPaddle.setBounds(p.getX(), p.getY(), 10, 50);
        aiPaddle.setBounds(a.getX(), a.getY(), 10, 50);
        ball.setBounds(b.getX(), b.getY(), 10, 10);
        dbi = createImage(10, 50);
        db = dbi.getGraphics();
        paint(db);
        g.clearRect(0, 0, 600, 300);
        g.drawRect(p.getX(), p.getY(), 10, 50);
        g.fillRect(p.getX(), p.getY(), 10, 50);
        g.drawOval(b.getX(), b.getY(), 10, 10);
        g.fillOval(b.getX(), b.getY(), 10, 10);
    }

    @Override
    public void paint(Graphics g) {
        pPaddle.setBounds(p.getX(), p.getY(), 10, 50);
        aiPaddle.setBounds(a.getX(), a.getY(), 10, 50);
        ball.setBounds(b.getX(), b.getY(), 10, 10);
        g.clearRect(0, 0, 600, 300);
        g.setColor(Color.white);
        g.drawRect(p.getX(), p.getY(), 10, 50);
        g.fillRect(p.getX(), p.getY(), 10, 50);
        g.drawOval(b.getX(), b.getY(), 10, 10);
        g.fillOval(b.getX(), b.getY(), 10, 10);
    }

} 
```

它一直有效，直到我编写了这行代码（Ball.java 中的 24 行）：

```
if (board.ball.intersects(board.pPaddle)) 
```

我收到错误：

> 线程“Thread-0”中的异常 java.lang.NullPointerException at Ball$1.run(Ball.java:24) at java.lang.Thread.run(Unknown Source)

我确定 GameBoard.java 中的矩形不是空的。我不知道该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:52:26.597

据我所知，有两种可能性：

*   `board`，传递给 Ball 的构造函数的参数为​​ null
*   `board`，传递给 Ball 的构造函数的参数不为 null，但是因为您在构造函数中启动了一个线程，所以该线程可以看到 Ball 对象的部分构造（例如，可能尚未分配 ball.board）...

你应该做什么：

1.  检查`board`不为空（例如使用打印语句）
2.  无论如何，[不​​要在构造函数中启动新线程](https://stackoverflow.com/questions/8057510/java-starting-a-new-thread-in-a-constructor)

您可以在构造函数中创建线程并提供启动线程的另一种方法（例如 start 或 init）。

* * *

一旦你这样做了，你可能不会再得到你的 NPE。但是，请注意，该行`Ball b = new Ball(this);`之前已执行，`Rectangle ball = new Rectangle(500, 10, 10, 10);`因此如果您`board.ball`在 Ball 的构造函数中访问，您将看到它为 null。

通常，您应该避免`this`在构造函数或实例初始化程序中转义（即不要编写类似的东西`ObjectXX o = new ObjectXX(this);`），因为`this`可能没有完全构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:54:35.353

球矩形很可能为空，您首先创建 b 启动一个线程，该线程将尝试访问*board.ball*。*ball*稍后在 GameBoard 构造函数中创建。

# asp.net-mvc-3 - 如何使用 jQuery 对 MVC3 控制器使用以下命令进行 ajax 调用

> ID：11392596
> 
> 赞同：0
> 
> 时间：2012-07-09T09:45:48.120
> 
> 标签：asp.net-mvc-3, jquery

我有一个输入

```
<input type="button" id="test" value="test" /> 
```

我对“主页”控制器的操作：

```
public ActionResult DataUsage(DateTime startDate, DateTime endDate, string userName)
{
  var data = FetchDataFromDB(startDate, endDate, uName);
  return PartialView("DataUsageChartViewPartial", data);
} 
```

我要在其中加载结果表单 DataUsage 的 div

```
<div id="myChart"></div> 
```

jQuery代码

```
$(function() {
    $("#test").click(function () {
        $.ajax({
               url: '/Home/DataUsage',
               type: 'POST',
               data: { startDate: $('#startDate').val(), endDate: $('#endDate').val(), userName: $('#userName').val() },
               success: function (result) {
                   alert("success " +result);
              },
              error: function (err) {
                 alert("error "+err);
             }
            });
            return false;
        });
    }
 ); 
```

当我单击按钮时，我希望 div(myChart) 填充控制器中操作的结果。我不确定我的 jQuery 是否正确，因为我不断收到错误并且我的控制器/动作中的断点从未被命中。有人可以告诉我我做错了什么以及如何纠正它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:00:50.760

确保您在文本框中输入的日期格式正确并与您的服务器端文化设置相匹配。例如，根据您的应用程序配置的文化，12/15/2012 和 15/12/2012 可能向用户指示相同的日期，具体取决于用户来自哪里，但默认模型绑定器将使用当前的文化设置。

另外要调试这些问题，请使用 javascript 调试工具（例如 FireBug）并检查 AJAX 请求。如果您这样做了，您将看到从服务器发送的确切错误消息，在您的情况下，该消息应该很长：*`15/12/2012`is not a valid DateTime*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:09:07.517

伙计，初学者代码中的问题是您已经为 Ajax 指定了 Post 方法来调用控制器，而根据您放置的代码显示该方法在 get 方法中可用。最简单的方法是`[HttpPost]`在控制器操作方法上添加注释。

即控制器中的方法如下所示：

```
[HttpPost]
public ActionResult DataUsage(DateTime startDate, DateTime endDate, string userName)
{
  var data = FetchDataFromDB(startDate, endDate, uName);
  return PartialView("DataUsageChartViewPartial", data);
} 
```

所以这将解决断点没有被调用的问题。

当您想提供要从 ajax 或任何地方调用的 url 时，建议的其他事情始终是用户 Url.Action(...) 方法。否则在部署等时可能会产生问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:55:36.550

莫里斯，

我认为这很可能是一个非常简单的情况，即没有调用正确的 url。您应该尝试在 mvc 中使用帮助程序：

```
url: '@Url.Action("DataUsage", "Home")' 
```

此外，您可能希望使用 HttpPost 装饰您的操作，以确保它与您的 ajax 类型一致，即：

```
[HttpPost]
public ActionResult DataUsage(...) 
```

如果不能完全解决问题，这应该会让您更近一步。

最后一步是确保在“调用”视图中有一个名为“myChart”的 div，然后按如下方式填充它：

```
<div id='myChart'></div>

success: function (result) {
    $('#myChart').html(result);
} 
```

希望这可以帮助

# java - 关于Java中的正则表达式（很简单，但我不知道为什么它不起作用

> ID：11392599
> 
> 赞同：1
> 
> 时间：2012-07-09T09:46:03.297
> 
> 标签：java, regex

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.println(Pattern.matches("[^A-Za-z0-9]","@#%abc"));
} 
```

这是关于 Java 中正则表达式的非常非常简单的代码。

据我所知， [^A-Za-z0-9] 与任何特殊字符匹配时应该返回 true，因为 [^ 表示否定，A-Za-z0-9 表示包括数字在内的所有字符。我不知道为什么上面的代码一直返回 false，而不是 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:47:17.183

添加一个+：

```
System.out.println(Pattern.matches("[^A-Za-z0-9]+.*","@#%abc"));
// no, this will only match the first few characters,
// added wildcard to catch the rest 
```

`Pattern.matches()`表示完全匹配，即整个模式从头到尾匹配文本。在您的情况下，您正在执行 find()，即文本中有多个 Pattern 匹配，但不是一个完整匹配，因为您的模式仅匹配一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:49:21.963

您的匹配试图单独匹配*一个*字符。

相反，您应该重新配置匹配以指示第一个字符和您不关心的其余字符，例如

```
Pattern.matches("[^A-Za-z0-9].*","@#%abc") 
```

注意第一个字符匹配后的**.* 。**

# android - HttpUrlConnection setConnectTimeout 不起作用？

> ID：11392601
> 
> 赞同：5
> 
> 时间：2012-07-09T09:46:20.973
> 
> 标签：android

我正在尝试像这样使用 setConnectTimeout 函数：

```
protected HttpURLConnection getConnection() throws SocketTimeoutException, IOException{
    Log.d("HTTPRequest", address);
    URL page = new URL(address);
    HttpURLConnection connection = (HttpURLConnection) page.openConnection();

    connection.setUseCaches(cacheResult);
    connection.setConnectTimeout(3000);
    connection.connect();
    return connection;
} 
```

进而：

```
public String getTextData() throws InternetConnectionUnavailableException {
    try{
        HttpURLConnection conn = getConnection();
        StringBuffer text = new StringBuffer();
        InputStreamReader in = new InputStreamReader((InputStream) conn.getContent());
        BufferedReader buff = new BufferedReader(in);
        String line;

        while (true) {
            if((line = buff.readLine()) != null){
                text.append(line);
            }else{
                break;
            }
        }
        return (text.toString());
    } catch (SocketTimeoutException socketTimeoutException) {
            throw new InternetConnectionUnavailableException();
    } catch (IOException ioException) {
            throw new InternetConnectionUnavailableException();
    }
} 
```

但是，它永远不会进入“catch (SocketTimeoutException socketTimeoutException)”块。这里有什么问题。

PS 对于测试，我制作了一个页面，让我的服务器进入睡眠状态 10 秒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T09:59:20.673

试试这个：

```
try {

   HttpURLConnection con = (HttpURLConnection) new URL(url).openConnection();
   con.setRequestMethod("HEAD");

   con.setConnectTimeout(5000); //set timeout to 5 seconds
   con.setReadTimeout(socketTimeout);
   return (con.getResponseCode() == HttpURLConnection.HTTP_OK);
} catch (java.net.SocketTimeoutException e) {
   e.printStackTrace();
} catch (java.io.IOException e) {
    e.printStackTrace();
} 
```

# asp.net - 如果 Roles.AddUserToRole(..) 不起作用，原因是什么？

> ID：11392602
> 
> 赞同：0
> 
> 时间：2012-07-09T09:46:22.267
> 
> 标签：asp.net, asp.net-membership

我在 asp.net 中实现了成员资格，我有一个可以定义用户的经理，用户具有 USER 角色，当我使用以下代码分配角色时，它不起作用：

```
Roles.AddUserToRole(txtUsername.Text, "USER"); 
```

现在我的问题是：原因是什么？

当我登录并检查其角色时，没有角色。我将此代码用于检测角色：

```
string[] role = Roles.GetRolesForUser(txtUserName.Text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:54:34.987

来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.security.roles.addusertorole.aspx)：

1.  角色管理未*启用*。- 或 - 用户已分配给指定的角色。
2.  roleName 为空字符串或包含逗号 (,)。- 或 - 用户名是空字符串或包含逗号 (,)。
3.  角色名称为空。- 或 - 用户名为空。

# objective-c - tableView:cellForRowAtIndexPath: 从未调用，但行和标题 > 0

> ID：11392603
> 
> 赞同：1
> 
> 时间：2012-07-09T09:46:26.543
> 
> 标签：objective-c, ios

我的 UIViewController 中的 tableView 有一个 NSMutableArray 作为数据源。

在向可变数组添加新对象后，我调用 [tableView reloadData]，它正确调用：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

返回数组中元素的正确更新量。然而方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

之后不调用。我想当我重新加载表格视图的数据时，会调用这种方法。

分段方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)aTableView 
```

在我的代码中总是返回 1。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:58:16.620

什么是

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

方法返回？

您是否设法返回您提到的 NSMutableArray 数据源的计数？

在此方法调用中：

```
[array count]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:25:14.967

这是一个线程问题......我已经修复了它：

```
 dispatch_async( dispatch_get_main_queue(), ^{
 [table reloadData];
}); 
```

# qt4 - Ubuntu 12.04LTS 中的 QtMultimedia 模块

> ID：11392604
> 
> 赞同：7
> 
> 时间：2012-07-09T09:46:27.193
> 
> 标签：qt4

我在 Ubuntu 12.04 中的 QtMultimedia 模块有一些问题。我在`/usr/include`. 我应该为此安装额外的软件包吗？如果是，它的名字是什么？

注意：我从 Ubuntu 包中安装了 QtSDK，而不是诺基亚提供的 SDK。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T15:09:39.340

我一直有同样的问题，我刚刚解决了。似乎 QtMultimedia 模块现在驻留在 QtMobility 包中。所以你需要安装 QtMobility，它提供了 QtMultimediaKit ：

```
sudo apt-get install qtmobility-dev 
```

编译时，必须添加以下标志：

```
-I/usr/include/QtMultimediaKit -I/usr/include/QtMobility
-lQtMultimediaKit 
```

# visual-studio-2010 - 报告查看器 2010 不显示数据集中的所有行

> ID：11392607
> 
> 赞同：0
> 
> 时间：2012-07-09T09:46:34.867
> 
> 标签：visual-studio-2010, visual-studio, reportviewer, report-viewer2010

HY
我有一个reportviewer 2010，我想显示我的数据集中的一些行。
在 mydataset 中，我有 5 行，但`reportViewer.LocalReport.DataSources.Add(ds);` 在 DataSource 中看到后仅显示 1 行。

有人知道为什么吗？

以下是我的代码，如果您需要更多信息，请告诉我。

```
 reportViewer.LocalReport.DataSources.Clear();
        reportViewer.LocalReport.Refresh();
        reportViewer.RefreshReport();
        reportViewer.Reset();
        reportViewer.Clear();
        ReportDataSource ds = new ReportDataSource("DataSet1", mydataSet);
        reportViewer.LocalReport.DataSources.Add(ds); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:33:25.143

我重新制作了我的 rdlc 文件，现在它工作正常。
我想我第一次做 rdlc 时做错了什么......

# java - 合并排序。错误——类型不匹配：无法从双精度转换为字符串

> ID：11392608
> 
> 赞同：0
> 
> 时间：2012-07-09T09:46:39.803
> 
> 标签：java, file-io, mergesort, type-mismatch

下面的程序使用归并排序来排列文件中的前 10,000 个单词。我遵循了 Thomas Cormen 在他的《算法导论》第二版中的伪代码。

```
import java.io.*;
import java.util.*;

public class SortingAnalysis {

    public static void merge(String[] A, int p, int q, int r) {
        int n1 = q-p+1;
        int n2 = r-q;
        double infinity = Double.POSITIVE_INFINITY;
        int i, j;
        String[] L = null;
        String[] R = null;
        for (i=1; i<=n1; i++) {
            L[i] = A[(int) (p+i-1)];
        }
        for (j=1; j<=n2; j++) {
            R[j] = A[(int) (q+j)];
        }
        L[n1+1] = infinity; //type mismatch: cant convert from double to string
        R[n2+1] = infinity; //same as above
        i=1;
        j=1;
        for (int k=(int) p; k<=r; k++) {
            int comparison = L[i].compareTo(R[j]);
            if (comparison<=0) {
                A[k] = L[i];
                i++;
            }
            else {
                A[k] = R[j];
                j++;
            }
        }

    }

    public static void mergeSort(String[] A, int p, int r) {
        if (p<r) {
            int q = (int) Math.floor((p+r)/2); //I typecasted q here so I can still pass the variables
            mergeSort(A, p, q);
            mergeSort(A, q+1, r);
            merge(A, p, q, r);
        }
    }

    public static void main(String[] args) {
        final int NO_OF_WORDS = 10000;
        try {
            Scanner file = new Scanner(new File(args[0]));
            String[] words = new String[NO_OF_WORDS];

            int i = 0;
            while(file.hasNext() && i < NO_OF_WORDS) {
                words[i] = file.next();
                i++;
            }
            long start = System.currentTimeMillis();
            mergeSort(words, 0, words.length-1);
            long end = System.currentTimeMillis();
            System.out.println("Sorted Words: ");
            for(int j = 0; j < words.length; j++) {
                System.out.println(words[j]);
            }   
            System.out.print("Running time of insertion sort: " + (end - start) + "ms");

        }
        catch(SecurityException securityException) {
            System.err.println("Error");
            System.exit(1);
        }
        catch(FileNotFoundException fileNotFoundException) {
            System.err.println("Error");
            System.exit(1);
        }
    }
} 
```

控制台中显示错误提示
`Exception in thread "main" java.lang.Error: Unresolved compilation problems: Type mismatch: cannot convert from double to String Type mismatch: cannot convert from double to String`

```
at SortingAnalysis.merge ... mergeSort and main </code> 
```

我认为这是因为 Math.floor 方法应该是双精度的，但我确实将它类型转换为 int，因此在传递参数时不会有问题。

另外，我认为将字符串分配给无穷大时存在错误。但我只是在遵循 Cormen 的伪代码。这似乎是正确的，因为我自己手动“调试”了代码。但是，当我将其放入代码中时，它不起作用。我哪里错了？我需要你的帮助，伙计们。我是 Java 新手，我仍在缓冲过程中。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:51:07.820

> 我认为这是因为 Math.floor 方法应该是双精度的，但我确实将它类型转换为 int，因此在传递参数时不会有问题。

不，它比那更简单。您正在尝试将*双精度*值分配给*字符串*数组。你根本做不到。

我强烈怀疑您应该将整个代码更改为使用`double[]`而不是`String[]`. 请注意，即使它正在编译（并且在您真正修复所有编译错误之前，您不应该尝试*运行*它），您也会因此遇到问题：

```
String[] L = null;
String[] R = null;
for (i=1; i<=n1; i++) {
    L[i] = A[(int) (p+i-1)];
} 
```

这显然会抛出一个`NullPointerException`. 您没有初始化数组变量以引用数组对象。你想要这样的东西：

```
double[] L = new double[n1 + 1];
double[] R = new double[n1 + 1];
for (i=1; i<=n1; i++) {
    L[i] = A[(int) (p+i-1)];
} 
```

以 1 为基础的方式使用数组是很奇怪的，顺便说一句...做类似的事情会更惯用*：*

```
double[] L = new double[n1];
double[] R = new double[n1];
for (i = 0; i < n1; i++) {
    L[i] = A[p + i];
} 
```

感觉就像你在挣扎，因为你想在这里学习两件事：

*   合并排序的工作原理
*   Java 的工作原理

*我将首先*专注于理解 Java 语言——那时您将能够更好地将伪代码转换为真实代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:50:18.707

无论如何，铸造到一个`(int)`会做一个地板。

```
 L[n1+1] = infinity; //type mismatch: cant convert from double to string 
```

这是一个错误，因为您不能将 aa转换`double`为 a`String`即使您用`toString()`它转换它也不正确，因为您只会得到“NaN”，这不是您的目标的 maixmum 字符串值。

您可以在不添加虚拟“无限”值的情况下对其进行编码，我建议您改为这样做。

# javascript - Javascript图表未在不同的android api版本上绘制

> ID：11392612
> 
> 赞同：0
> 
> 时间：2012-07-09T09:47:05.217
> 
> 标签：javascript, android, android-webview

在开发`Android`使用[Rickshaw](http://code.shutterstock.com/rickshaw/)绘制图表的应用程序时，我遇到了这个奇怪的问题：在 Galaxy Nexus S（具有 OS 4.0.4）上，图表绘制完美，而在摩托罗拉 Defy（CyanogenMod7，具有 OS 2.3.7）上却可以不是。这可能是操作系统版本问题吗？谁能帮我这个？

这是代码：

```
public class RickshawTestActivity extends Activity {
    private WebView webView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        webView = new WebView(this);

        webView.getSettings().setJavaScriptEnabled(true);

        setContentView(webView);

        webView.loadUrl("file:///android_asset/chart.html");

    }
} 
```

这是`assets/chart.html`

```
<!doctype>
<script src="vendor/d3.min.js"></script>
<script src="vendor/d3.layout.min.js"></script>
<script src="rickshaw.min.js"></script>

<div id="chart"></div>

<script>
    var data = [ {
        x : 1910,
        y : 92228531
    }, {
        x : 1920,
        y : 106021568
    }, {
        x : 1930,
        y : 123202660
    }, {
        x : 1940,
        y : 132165129
    }, {
        x : 1950,
        y : 151325798
    }, {
        x : 1960,
        y : 179323175
    }, {
        x : 1970,
        y : 203211926
    }, {
        x : 1980,
        y : 226545805
    }, {
        x : 1990,
        y : 248709873
    }, {
        x : 2000,
        y : 281421906
    }, {
        x : 2010,
        y : 308745538
    } ];

    var graph = new Rickshaw.Graph({
        element : document.querySelector("#chart"),
        width : 580,
        height : 250,
        series : [ {
            color : 'steelblue',
            data : data
        } ]
    });

    graph.render();
</script> 
```

数据有效，所有引用的`.js`文件都找到了。这也适用于我的 Mozilla 13 浏览器。

谢谢

* * *

**编辑：**

我还在不同的模拟器上测试了这段代码，并得出结论，上面的代码只适用于 3.0 及更高版本的操作系统。在 3.0 以下的操作系统版本上，这不起作用。

现在我怎样才能让它工作？谢谢

**编辑：** 我需要一个跨平台的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:38:56.527

我假设 Rickshaw/D3 使用的一个或多个功能没有（正确/完全）在 3.0 之前的 Android 附带的 WebKit 版本中实现。由于 Webkit 是操作系统的一部分，您不能单独更改或更新它。

您唯一的机会是使用具有自己的渲染引擎的不同网络浏览器应用程序 - 例如，据我所知，Android 的 Firefox 有一个。

如果您需要在 2.1+ 上运行的 Android 应用程序，我只能看到在您的应用程序中嵌入网络渲染器或使用客户端图表生成的可能性。有一些可用的库允许您这样做：

*   [http://code.google.com/p/afreechart/](http://code.google.com/p/afreechart/)
*   [http://code.google.com/p/droidcharts/](http://code.google.com/p/droidcharts/)

这两个库都是不依赖 JavaScript 的纯 Java 库 - 因此它们独立于操作系统包含的 WebKit 版本。

# android - AutoCompleteTextView 无法正确显示带有 ActionBarSherlock 主题的文本

> ID：11392613
> 
> 赞同：3
> 
> 时间：2012-07-09T09:47:08.993
> 
> 标签：android, actionbarsherlock

我将 ActionBarSherlock 与 Theme.Sherlock.Light.DarkActionBar 主题一起使用，我的 AutoCompleteTextView 中的文本与背景颜色相同。我尝试调用 setTextColour() 并传入指向 Black 的 int，但它似乎没有任何区别。

这是一个已知的错误？还是未知的错误？还是我只是错过了什么？

这是一个屏幕截图，显示了它在选择时的外观 - 这表明它不仅仅是与背景颜色相同的情况：

![问题的屏幕截图 - 选择了文本](../Images/a565a50d4414171f4fca9c622a97b9cb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:47:06.337

您是否使用`getSupportActionBar().getThemedContext()`扩展适配器中的视图？操作栏上下文与常规上下文不同，因为颜色是相反的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T09:50:33.227

我的问题似乎与 ABS 无关。我在这里遇到了解决方案：

[http://code.google.com/p/android/issues/detail?id=5237](http://code.google.com/p/android/issues/detail?id=5237)

使用 android.R.layout.simple_dropdown_item_1line 而不是 android.R.layout.simple_list_item_1 在所有 Android 版本中都对我有用。

# java - 使用 jsoup 访问 HTTPS url 时出现 UnknownHostException

> ID：11392614
> 
> 赞同：2
> 
> 时间：2012-07-09T09:47:10.700
> 
> 标签：java, https, html-parsing, jsoup

我正在尝试使用[jsoup](http://jsoup.org/)解析和操作 HTML 。它对于 HTTP URL 工作得非常好，但`UnknownHostException`如果使用 HTTPS URL，它就会抛出异常。以下是我的代码：

```
System.setProperty("http.proxyHost", "192.168.0.1");
System.setProperty("http.proxyPort", "8080");

Document doc = Jsoup.connect("https://www.google.com/").get(); 
```

我更期待与 SSL 证书相关的异常，但可能是什么原因`UnknownHostException`？请注意，以下代码可完美运行[http://www.google.com/](http://www.google.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:12:28.547

[在这里](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)检查 ，您需要以单独的方式为 https 指定代理。

```
System.setProperty("https.proxyHost", "your host");
System.setProperty("https.proxyPort", "your port"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-13T09:36:25.830

我不确定它是否对你有帮助。我正在使用 JSoup。考虑这个示例网站，

字符串 url = [https://trickideas.com](https://trickideas.com)；

Jsoup.connect(url).get();

如果我尝试连接到 [https://www.trickideas.com/ ，我会收到未知主机异常](https://www.trickideas.com/)

[如果我连接到https://trickideas.com/](https://trickideas.com/)，我不会收到未知主机异常

我插手了 SSL 证书，认为这可能是问题，但事实并非如此。问题是一个简单的错字。

只是检查一下，如果这是问题。

# scala - 如何调查对象/类型/等。来自 Scala REPL？

> ID：11392622
> 
> 赞同：42
> 
> 时间：2012-07-09T09:47:24.923
> 
> 标签：scala, read-eval-print-loop, exploratory

我已经使用 Scala 有一段时间了，并用它编写了一个超过 10,000 行的程序，但我仍然对一些内部工作感到困惑。在已经非常熟悉 Java、C 和 Lisp 之后，我从 Python 来到了 Scala，但即便如此，它仍然进展缓慢，一个巨大的问题是我在尝试研究对象/类型的内部工作时经常发现令人沮丧的困难/类/等。与 Python 相比，使用 Scala REPL。在 Python 中，您可以调查任何对象`foo`（类型、全局变量中的对象、内置函数等），`foo`以查看事物的评估结果、`type(foo)`显示其类型、`dir(foo)`告诉您可以调用的方法，以及`help(foo)`获取内置文档。你甚至可以做类似的事情`help("re")`找出有关名为`re`（包含正则表达式对象和方法）的包的文档，即使没有与之关联的对象。

在 Scala 中，您可以尝试在线阅读文档，查找库的源代码等，但这对于您不知道它们在哪里甚至是什么的事情通常非常困难（而且通常考虑到庞大的类型层次结构，一大块要咬掉）——东西在各个地方浮动（包`scala`，，`Predef`各种隐式转换，像`::`这样的符号对谷歌来说几乎是不可能的）。REPL 应该是直接探索的方式，但实际上，事情要神秘得多。假设我在`foo`某处看到了引用，但我不知道它是什么。显然没有“使用 REPL 系统地研究 Scala 事物的指南”这样的东西，但以下是我的

1.  如果`foo`是一个值（大概包括存储在变量中的东西加上伴随对象和其他 Scala `object`s），您可以直接评估`foo`。这应该告诉您结果的类型和值。有时结果是有帮助的，有时没有。
2.  如果`foo`是一个值，您可以使用`:type foo`它来获取它的类型。（不一定有启发性。）如果您在函数调用中使用 this，您将获得返回值的类型，而无需调用该函数。
3.  如果`foo`是一个值，您可以使用`foo.getClass`它来获取它的类。（通常比前面的更有启发性，但是对象的类与其类型有何不同？）
4.  对于一个 class `foo`，您可以使用`classOf[foo]`，尽管结果的含义并不明显。
5.  从理论上讲，您可以`:javap foo`用来反汇编一个类——这应该是最有用的，但对我来说完全一致地失败了。
6.  有时您必须将错误消息拼凑在一起。

使用失败的例子`:javap`：

```
scala> :javap List
Failed: Could not find class bytes for 'List' 
```

启发性错误消息的示例：

```
scala> assert
<console>:8: error: ambiguous reference to overloaded definition,
both method assert in object Predef of type (assertion: Boolean, message: => Any)Unit
and  method assert in object Predef of type (assertion: Boolean)Unit
match expected type ?
              assert
              ^ 
```

好的，现在让我们尝试一个简单的例子。

```
scala> 5
res63: Int = 5

scala> :type 5
Int

scala> 5.getClass
res64: java.lang.Class[Int] = int 
```

够简单...

现在，让我们尝试一些不太明显的真实案例：

```
scala> Predef
res65: type = scala.Predef$@3cd41115

scala> :type Predef
type

scala> Predef.getClass
res66: java.lang.Class[_ <: object Predef] = class scala.Predef$ 
```

这是什么意思？为什么`Predef`简单的类型是`type`，而类是`scala.Predef$`？我认为 $ 是伴随对象被硬塞到 Java 中的方式......但是 Google 上的 Scala 文档告诉我`Predef`——`object Predef extends LowPriorityImplicits`我如何从 REPL 中推断出这一点？我怎样才能查看其中的内容？

好的，让我们尝试另一个令人困惑的事情：

```
scala> `::`
res77: collection.immutable.::.type = ::

scala> :type `::`
collection.immutable.::.type

scala> `::`.getClass
res79: java.lang.Class[_ <: object scala.collection.immutable.::] = class scala.collection.immutable.$colon$colon$

scala> classOf[`::`]
<console>:8: error: type :: takes type parameters
              classOf[`::`]
                      ^

scala> classOf[`::`[Int]]
res81: java.lang.Class[::[Int]] = class scala.collection.immutable.$colon$colon 
```

好的，这让我感到非常困惑，最终我不得不去阅读源代码来理解这一切。

所以，我的问题是：

1.  真正的 Scala 专家推荐使用 REPL 来理解 Scala 对象、类、方法等的最佳方法是什么，或者至少可以从 REPL 中尽可能地研究它们？
2.  我如何`:javap`从 REPL 获得内置的东西？（它不应该默认工作吗？）

感谢您的任何启发。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-09T11:47:16.710

您提到了 Scala 缺少的一点：文档。

REPL 是一个很棒的工具，但它并没有它可以做的那么出色。有太多缺失的功能和可以改进的功能 - 您的帖子中提到了其中一些。Scaladoc 也是一个不错的工具，但距离完美还差得很远。此外，API 中的许多代码还没有记录或记录得太少，并且经常缺少代码示例。IDE 完全是 ob 错误，与 Java IDE 向我们展示的可能性相比，它们看起来像一些幼儿园玩具。

然而，与我 2-3 年前开始学习 Scala 时可用的工具相比，Scalas 当前的工具有巨大的不同。那时 IDE 在后台永久编译了一些垃圾，编译器每隔几分钟就会崩溃，并且一些文档完全不存在。我经常受到愤怒的攻击，并希望 Scala 作者死亡和腐败。

现在？我不再有这些狂暴攻击了。因为我们目前拥有的工具虽然并不完美，但非常棒！

有[docs.scala-lang.org](http://docs.scala-lang.org)，它总结了很多很棒的文档。有教程、备忘单、词汇表、指南和许多更棒的东西。另一个很棒的工具是[Scalex](http://scalex.org/)，它甚至可以找到人们能想到的最奇怪的运算符。它是 Scalas [Hoogle](http://www.haskell.org/hoogle/)，尽管它还不如他的伟大理想，但它非常有用。

Scala2.10 以 Scala 自己的反射库的形式出现了巨大的改进：

```
// needs Scala2.10M4
scala> import scala.reflect.runtime.{universe => u}
import scala.reflect.runtime.{universe=>u}

scala> val t = u.typeOf[List[_]]
t: reflect.runtime.universe.Type = List[Any]

scala> t.declarations
res10: Iterable[reflect.runtime.universe.Symbol] = SynchronizedOps(constructor List, method companion, method isEmpty, method head, method tail, method ::, method :::, method reverse_:::, method mapConserve, method ++, method +:, method toList, method take, method drop, method slice, method takeRight, method splitAt, method takeWhile, method dropWhile, method span, method reverse, method stringPrefix, method toStream, method removeDuplicates) 
```

新反射库的文档仍然缺失，但正在进行中。它允许人们在 REPL 中以一种简单的方式使用 scalac：

```
scala> u reify { List(1,2,3) map (_+1) }
res14: reflect.runtime.universe.Expr[List[Int]] = Expr[List[Int]](immutable.this.List.apply(1, 2, 3).map(((x$1) => x$1.$plus(1)))(immutable.this.List.canBuildFrom))

scala> import scala.tools.reflect.ToolBox
import scala.tools.reflect.ToolBox

scala> import scala.reflect.runtime.{currentMirror => m}
import scala.reflect.runtime.{currentMirror=>m}

scala> val tb = m.mkToolBox()
tb: scala.tools.reflect.ToolBox[reflect.runtime.universe.type] = scala.tools.reflect.ToolBoxFactory$ToolBoxImpl@32f7fa37

scala> tb.parseExpr("List(1,2,3) map (_+1)")
res16: tb.u.Tree = List(1, 2, 3).map(((x$1) => x$1.$plus(1)))

scala> tb.runExpr(res16)
res18: Any = List(2, 3, 4) 
```

当我们想知道 Scala 代码是如何在内部翻译时，这就更重要了。以前 wen 需要输入`scala -Xprint:typer -e "List(1,2,3) map (_+1)"` 才能获得内部表示。此外，在新版本中还发现了一些小的改进，例如：

```
scala> :type Predef
scala.Predef.type 
```

Scaladoc 将获得一些[类型层次结构图](https://scala-webapps.epfl.ch/jenkins/view/scaladoc/job/scaladoc-diagram-nightly/ws/build/scaladoc/library/index.html#scala.collection.immutable.List)（点击类型层次结构）。

使用宏现在可以很好地改进错误消息。有一个名为[expecty](https://github.com/pniederw/expecty)的库，它执行以下操作：

```
// copied from GitHub page
import org.expecty.Expecty

case class Person(name: String = "Fred", age: Int = 42) {
  def say(words: String*) = words.mkString(" ")
}

val person = Person()
val expect = new Expecty()

// Passing expectations

expect {
  person.name == "Fred"
  person.age * 2 == 84
  person.say("Hi", "from", "Expecty!") == "Hi from Expecty!"
}

// Failing expectation

val word1 = "ping"
val word2 = "pong"

expect {
  person.say(word1, word2) == "pong pong"
}

/*
Output:

java.lang.AssertionError:

person.say(word1, word2) == "pong pong"
|      |   |      |      |
|      |   ping   pong   false
|      ping pong
Person(Fred,42)
*/ 
```

有一个工具可以让人们找到托管在 GitHub 上的库，名为[ls.implicit.ly](http://ls.implicit.ly/)。

IDE 现在有一些语义突出显示，以显示成员是否是对象/类型/方法/其他。[ScalaIDE](http://scala-ide.org/docs/helium/features/semantic-highlighting/index.html)的语义高亮功能。

REPL 的 javap 特性只是对原生 javap 的调用，因此它不是一个功能非常丰富的工具。您必须完全限定模块的名称：

```
scala> :javap scala.collection.immutable.List
Compiled from "List.scala"
public abstract class scala.collection.immutable.List extends scala.collection.AbstractSeq implements scala.collection.immutable.LinearSeq,scala.Product,scala.collection.LinearSeqOptimized{
... 
```

前段时间我写了一篇[关于如何将 Scala 代码编译为 Bytecode 的总结](https://stackoverflow.com/questions/9350528/how-to-work-with-javap-for-scala-java-interop)，其中提供了很多要了解的东西。

最好的：这一切都是在过去几个月内完成的！

那么，如何在 REPL 中使用所有这些东西呢？好吧，这是不可能的……还没有。;)

但我可以告诉你，有一天我们会有这样的 REPL。如果我们想查看它，它会向我们显示文档的 REPL。一个让我们与之通信的 REPL（可能像[lambdabot](http://www.haskell.org/haskellwiki/Lambdabot)）。一个 REPL 让我们做一些我们仍然无法想象的很酷的事情。我不知道什么时候会这样，但我知道过去几年做了很多事情，我知道未来几年会做更多的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T20:49:45.733

Javap 有效，但您将其指向`scala.Predef.List`，这是 a `type`，而不是`class`. 将其指向`scala.collection.immutable.List`.

现在，在大多数情况下，只需输入一个值并查看结果的类型就足够了。使用`:type`有时会有所帮助。不过，我发现使用`getClass`是一种非常糟糕的方式。

此外，您有时会混合类型和值。例如，在这里您指的是对象`::`：

```
scala> `::`.getClass res79: java.lang.Class[_ <: object
scala.collection.immutable.::] = class
scala.collection.immutable.$colon$colon$ 
```

在这里你指的是类`::`：

```
scala> classOf[`::`[Int]] res81: java.lang.Class[::[Int]] = class
scala.collection.immutable.$colon$colon 
```

对象和类不是一回事，事实上，对象和类有一个共同的模式，它们同名，它们的关系有一个特定的名称：同伴。

而不是`dir`，只需使用制表符完成：

```
scala> "abc".
+                     asInstanceOf          charAt                codePointAt           codePointBefore       codePointCount
compareTo             compareToIgnoreCase   concat                contains              contentEquals         endsWith
equalsIgnoreCase      getBytes              getChars              indexOf               intern                isEmpty
isInstanceOf          lastIndexOf           length                matches               offsetByCodePoints    regionMatches
replace               replaceAll            replaceFirst          split                 startsWith            subSequence
substring             toCharArray           toLowerCase           toString              toUpperCase           trim

scala> "abc".compareTo
compareTo             compareToIgnoreCase

scala> "abc".compareTo
                             def compareTo(String): Int 
```

如果您进入电源模式，您将获得更多信息，但这对于初学者来说几乎没有。上面显示了类型、方法和方法签名。Javap 会反编译东西，但这需要你很好地处理字节码。

里面还有其他东西——一定要查一下`:help`，看看有什么可用的。

文档只能通过 scaladoc API 获得。在浏览器上保持打开状态，并使用其*搜索*功能快速查找类和方法。另外，请注意，与 Java 不同，您不需要浏览继承列表来获取方法的描述。

他们确实可以很好地搜索符号。我怀疑您没有在 scaladoc 上花费太多时间，因为那里的其他文档工具无法胜任。想到 Javadoc —— 浏览包和类是很糟糕的。

如果您有 Stack Overflow 风格的特定问题，请使用[Symbol Hound](http://symbolhound.com/)使用符号进行搜索。

使用[每晚](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html)的Scaladocs：它们会与您使用的任何版本不同，但它们始终是最完整的。此外，现在它们在很多方面都好得多：您可以使用 TAB 来在帧之间切换，自动聚焦在搜索框上，您可以使用箭头在过滤后在左侧帧上导航，以及 ENTER 具有选定的元素出现在右侧框架上。它们具有隐式方法列表，并具有类图。

我已经使用了一个功能更弱的 REPL 和一个更差的 Scaladoc——它们确实可以一起工作。诚然，我跳到主干（现在是 HEAD）只是为了完成制表符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-14T08:30:06.140

请注意，[Scala REPL 中的 scala 2.11.8 New tab-completion](http://www.scala-lang.org/news/2.11.8/#new-tab-completion-in-the-scala-repl)可以促进类型探索/发现。

它现在包括：

*   CamelCase 完成：
    try:
    `(l: List[Int]).rro``TAB`，
    它扩展为：
    `(l: List[Int]).reduceRightOption`

*   通过键入名称的任何 CamelCased 部分来查找成员：
    try:
    `classOf[String].typ``TAB`、to get`getAnnotationsByType`和`getComponentType`其他

*   无需键入 get 即可完成 bean getter：
    尝试：
    `(d: java.util.Date).day``TAB`

*   按`TAB`两次查看方法签名：
    try:，完成 为：
    `List(1,2,3).part``TAB`; 再按一次显示：

    `List(1,2,3).partition`
    `TAB`
    `def partition(p: Int => Boolean): (List[Int], List[Int])`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T10:53:07.390

您需要将完全限定的类名传递给`javap`.

首先使用它`classOf`：

```
scala> classOf[List[_]]
res2: java.lang.Class[List[_]] = class scala.collection.immutable.List 
```

然后使用`javap`（对我来说不适用于 repl：“：javap 在此平台上不可用。”）所以示例来自命令行，我相信在 repl 中，您不需要指定类路径：

```
d:\bin\scala\scala-2.9.1-1\lib>javap -classpath scala-library.jar "scala.collection.immutable.List" 
```

但我怀疑这会对你有所帮助。可能您正在尝试使用您在动态语言中使用的技术。我很少在 scala 中使用 repl（而在 javascript 中经常使用它）。IDE 和资源就是我的全部。

# osgi - OSGi 运行时中的 Commons Logging 包

> ID：11392623
> 
> 赞同：2
> 
> 时间：2012-07-09T09:47:26.620
> 
> 标签：osgi, slf4j, equinox, apache-commons-logging

我目前正在尝试在 Equinox 中捆绑启动。

此捆绑包需要公共日志记录。

我尝试包含来自 Maven Central 的最新公共日志记录 jar。没运气。

然后我搬到了 slf4j。这是我在 OSGi 控制台中的当前状态：

```
11      ACTIVE      jcl.over.slf4j_1.6.6
12      ACTIVE      slf4j.api_1.6.6
                    Fragments=14
14      RESOLVED    slf4j.simple_1.6.6
                    Master=12 
```

在日志中，我看到以下异常：

```
!ENTRY org.eclipse.osgi 4 0 2012-07-09 11:36:56.157
!MESSAGE Error starting bundle: initial@file:/C:/test/slf4j-simple-1.6.6.jar
!STACK 0
org.osgi.framework.BundleException: A fragment bundle cannot be started: slf4j.simple_1.6.6 [14]
    at org.eclipse.osgi.framework.internal.core.BundleFragment.startWorker(BundleFragment.java:224)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startBundle(EclipseStarter.java:1119)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startBundles(EclipseStarter.java:1112)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.loadBasicBundles(EclipseStarter.java:631)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:277)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:176)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.main(EclipseStarter.java:151)

!ENTRY org.eclipse.osgi 4 0 2012-07-09 11:36:56.205
!MESSAGE Bundle slf4j.simple_1.6.6 [14] is not active. 
```

在 Equinox 3.8 中启动和运行公共日志记录兼容包的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T11:11:15.363

`slf4j-simple`是一个片段，片段无法启动。

你在你的 config.ini`@start`中最后列出了吗？只需删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T12:21:49.330

来自 OSGi 服务平台核心规范

```
A Fragment bundle must enter the resolved state only if it has been successfully
attached to its host bundle.

All class or resource loading of a fragment is handled through the host’s
class loader, a fragment must never have its own class loader. Fragment bundles
are treated as if they are an intrinsic part of their host. 
```

很多时候，我们启动片段包，然后生成`org.osgi.framework.BundleException: A fragment bundle cannot be started Exception.`

根据规范，不需要启动片段包。这不是您的代码的问题。

# php - 如何将自定义视图助手添加到 Zend Framework 2

> ID：11392624
> 
> 赞同：5
> 
> 时间：2012-07-09T09:47:27.743
> 
> 标签：php, zend-framework, zend-view, zend-framework2

我之前问过[这个](https://stackoverflow.com/questions/11062923/how-to-add-custom-view-helpers-to-zend-framework-2)问题，我在那里得到了很好的答案。但是，那是针对 beta4 的，不再有效。

那么我在哪里以及如何将我自己的视图助手添加到 ZF2 中？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T11:21:48.250

您应该像这样将它们添加到您的`module.config.php`下面`view_helpers`：

```
'view_manager' => array(
    'template_path_stack' => array(
        'ModuleName' => __DIR__ . '/../view',
    ),
),

'view_helpers' => array(
    'factories' => array(
        'showmessages' => function($sm) {
            $helper = new ModuleName\Helper\MessageShower();
            // do stuff with $sm or the $helper
            return $helper;           
        },
    ),
    'invokables' => array(
        'selectmenu' => 'ModuleName\Helper\SelectMenu',   
        'prettyurl'  => 'ModuleName\Helper\PrettyUrl',
    ),  
), 
```

在这里，我展示了两种创建助手的方法。如果他们需要做的只是实例化，只需将他们的名称（包括命名空间）添加为`invokables`. 如果您需要对它们或 进行处理，请通过关键字`ServiceManager`创建它们。`factories`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:44:27.090

beta5 有一个关于 servicemanager 的 BC。这也适用于视图助手管理器。看看[这里](https://github.com/zendframework/zf2/pull/1695)——甚至还有一个视图助手的例子。

# objective-c - 检查空值

> ID：11392628
> 
> 赞同：0
> 
> 时间：2012-07-09T09:47:52.380
> 
> 标签：objective-c, ios

我正在以下列方式打印 URL：

```
 NSLog(@"url is %@",cacheManager.url); 
```

这个的输出是：

```
url is (null) 
```

我应该如何在 if 条件下检查 URL，以免输入空 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:51:22.000

检查喜欢

```
if(cacheManager.url.length == 0) 
```

或者

```
if(cacheManager.url == nil) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:55:05.420

```
if(!cacheManager.url)
{
    // do something.
} 
```

以上应该工作。你也可以试试。。

```
if(![cacheManager.url isEqual:[NSNull null]])
{
    // do something.
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T09:52:56.047

```
NSString *string = cacheManager.url;

if ((NSNull *)string == [NSNull null]){

} 
```

# android - 在我的应用上禁用多点触控

> ID：11392629
> 
> 赞同：6
> 
> 时间：2012-07-09T09:47:53.783
> 
> 标签：android, multi-touch

由于某些原因，我必须在我的应用程序上禁用多点触控功能。用户一次只能按一个按钮，否则应用程序会崩溃。有没有办法实现这个要求？

非常感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-27T15:21:22.660

为防止这种情况发生，您应该关闭按钮所在的 ViewGroup 内的[splitMotionEvents](http://developer.android.com/reference/android/R.attr.html#splitMotionEvents)或[windowEnableSplitTouch](http://developer.android.com/reference/android/R.attr.html#windowEnableSplitTouch)属性。

```
android:splitMotionEvents="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:53:10.913

将此行添加到您的清单

```
< uses-feature android:name="android.hardware.touchscreen.multitouch" android:required="false" /> 
```

# java - 用于实现作业注册表的数据结构，分发到从属 VM

> ID：11392630
> 
> 赞同：0
> 
> 时间：2012-07-09T09:47:55.640
> 
> 标签：java, virtual-machine, distributed-computing, apache-httpclient-4.x, master-slave

**背景资料：**

我有一个基于主/从模式的分布式应用程序。master 会定期收到一个 JSON 文件，格式如下

```
[{'key' : 'a_hashed_unique_key', 'partner_name' : 'name1'}] 
```

我将所有具有相同***'partner_name'***的 JSON 对象聚合并写入一个文件，这会产生多个 JOB 文件（每个文件对应一个 partner_name）。

所有这些生成的文件都被写入 **在 Master 和 Slave 之间共享的网络存储中**。

Slave VM 开机后请求一个 JOB 文件，master 共享网络存储上的 JOB 文件的路径，slave 开始处理它。

**问题：** 跟踪作业和处理作业文件的从属计算机的最佳方法是什么？

基于哈希的集合，即 HashMap 看起来很合适，我会同时访问它，并且可以考虑以下场景

*   从属请求作业文件。
*   从集合中删除已完成的作业。
*   在收到新的输入文件时添加新的作业文件。

我更喜欢具有内部同步的实现，以便可以跨线程原子地读取/修改作业注册表。

# mysql - MYSQL 3 表有金额列总和

> ID：11392633
> 
> 赞同：0
> 
> 时间：2012-07-09T09:48:14.907
> 
> 标签：mysql

Mysql sum 3列不同的表

下表列表

## 预算

## |b_id |金额 |

| 1| 100|
| 2| 200|

* * *

## 预借现金

## |ca_id |b_id |ca_amount |

| 1| 1| 100 |
| 2| 2| 200 |

* * *

## 花费

## |exp_id|ca _id|exp_amount|

| 1| 1| 100|
| 2| 2| 40|
| 3| 2| 160|

我想要这个结果

## 结果

## |sum(b_amount)|sum(ca_amount)|sum(exp_amount)|

| 100| 100| 100|
| 200| 200| 200|

任何mysql查询？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T06:02:33.943

您正在尝试访问您的 UI 线程上的网络。这很糟糕，因为它会冻结 UI，直到网络响应返回。您应该在单独的线程上进行此网络访问。

有很多选择，但最简单的选择是：

在 MimeMessage 中转换 msg msg = new MimeMessage(session); 成为最终的。包装 Transport.send(msg); 作为新线程（new Runnable() { @Override public void run() { Transport.send(msg); } }).start();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:57:08.470

日志表明您正在主线程 UI / Activity 线程上执行网络任务。改为使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来完成这些任务。

Android 禁止在您的主线程上执行这些任务，因为它们会阻塞 UI 并使其在您的任务完成之前无法使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:18:30.953

在 android 3.0 及更高版本中，不允许主线程上的网络连接，strictMode 会自动打开。

要解决此问题，您必须在单独的线程上执行网络连接...例如，使用`AsyncTask`, `Threads`, `Handler`.

# javascript - javascript - 检查div是否为空

> ID：11392634
> 
> 赞同：0
> 
> 时间：2012-07-09T09:48:15.140
> 
> 标签：javascript, jquery, html, css

我有以下设置：

```
 <div id="whatever">
           <!-- Here some dynamic divs will be loaded -->
      </div> 
```

我需要知道什么时候“whateverdiv”里面什么都没有。问题是，当我什么都不说时，我的意思是用户什么都看不到。所以如果在 div 里面有类似的东西

```
 <div style="display: none">LOOOONG TEXT</div> 
```

已加载，我认为它是空的。

如果充满空格也是空的，等等......如果用户没有看到任何东西是空的。

由于要涵盖的情况太多（高度为 0 的内容、不显示的内容、空格、制表符、隐藏的输入等……根据情况，几乎所有东西都可以在那里加载）我尝试使用 height 属性来查看是否有内容（div 会根据内容展开）。这个想法行之有效，但现在我遇到了另一个问题：有时我必须添加 display: none 。当我这样做时，高度总是加载为 0。我不能使用可见性，因为 div 有 10px 填充，我不想看到什么时候没有显示。所以我回到第一个问题......找到某种方法来查看在所有情况下 div 是否为空。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T09:55:07.687

```
var d = $('#myDiv');
var empty = d.text().trim().length === 0 || !d.is(':visible'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T09:52:22.923

这个应该可以的。 [http://jsfiddle.net/fedmich/SmRnT/](http://jsfiddle.net/fedmich/SmRnT/)

我正在通过 Regex 清理 html 注释

```
 $(function() {
    var w = $('#whatever').clone();
    w.find(':hidden').remove();

    var html = w.html();
    html = html.replace(/<!--.*-->/g,'')
    html = $.trim(html);

    alert( html );
});​ 
```

总结

```
 clone the object
 remove hidden elements
 remove html comments
 $.trim(  ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T09:55:15.807

如果你不把空格算作不是空的：

```
$("selector").is(":empty") 
```

或者

```
$("selector").contens().length 
```

行得通。

如果您不想将文本节点计为空：

```
$("selector").children().length 
```

见： http: [//api.jquery.com/empty-selector/](http://api.jquery.com/children/)
[http://api.jquery.com/contents/](http://api.jquery.com/empty-selector/)
[http://api.jquery.com/children/](http://api.jquery.com/contents/)

# c# - MVVM-Light => 将命令参数和 EventArgs 传递给命令

> ID：11392636
> 
> 赞同：9
> 
> 时间：2012-07-09T09:48:19.430
> 
> 标签：c#, silverlight, mvvm-light, commandparameter, eventtocommand

在 Silverlight 5 中使用**，**`MVVM-Light Toolkit`我试图找到一种方法以事件到命令的行为将两者都传递给 ViewModel。`Command Parameters` **`EventArgs`**

 **我确实找到了一篇建议将 EventArgs 作为命令参数传递的帖子，但在我的情况下，我想在 ViewModel 中使用两者`EventArgs`。`Command Parameter`

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T03:56:31.800

解决了问题....以防万一其他人想知道...

概念：我们只需要通过 MVVM-Light Event 将 EventArgs 传递给 Command。在命令事件中，有一个属性**Source**。我们可以将此“源”属性强制转换为生成此命令的对象。

例子 ：

我们在 ViewModel Constructor 中使用 eventargs 声明命令

```
FilterQuotationsCommand = new RelayCommand<GridViewFilteredEventArgs>(FilterQuotationsCommandExecute); 
```

我们在将其投射到发送控件后通过“源”访问发送者。

```
private void FilterQuotationsCommandExecute(GridViewFilteredEventArgs e)
    {
        var grid = (RadGridView) e.Source; // we casted the Source to Grid
        var item = grid.SelectedItem;      // we can access grid's selected items
    } 
```**

# javascript - CloudZoom 与 Fancybox

> ID：11392637
> 
> 赞同：2
> 
> 时间：2012-07-09T09:48:21.677
> 
> 标签：javascript, jquery, html, wordpress, fancybox

我对 javascript 有点陌生，因为我在开发网页时大多只是在使用 CSS 样式。

我在尝试将 Fancybox 与 Cloudzoom 集成时遇到了问题。我一直在尝试按照此处的指示进行操作：http: [//blog.codestars.eu/2010/cloud-zoom-in-der-fancybox/](http://blog.codestars.eu/2010/cloud-zoom-in-der-fancybox/)

除了一个小错误外，我能够使效果完美地工作——出于某种原因（我所有的图像都在画廊中，以便更容易地滚动浏览fancybox），缩放只显示该系列中的第一张图像。

如果有人可以帮我解决这个问题？在此处预览任何画廊：http: [//bit.ly/LaPzEH](http://bit.ly/LaPzEH)

这是我认为有点不对劲的花絮-我认为这与此代码中的 href 行关闭有关：

```
 $j('a[rel=gallery]').fancybox({ 
    padding: 0,
    overlayColor: '#'+$j('#skin_color').val(), 
    transitionIn: 'fade',
    transitionOut: 'fade',
    overlayOpacity: .9,
    onComplete    :   function(arg) {
        $('#fancybox-img').wrap(
         $('<a>')
         .attr('href', $(arg[0]).attr('href'))
         .addClass('cloud-zoom')
         .attr('rel', "position: 'inside'")
    );
    $('.cloud-zoom').CloudZoom();
}
}); 
```

非常感谢任何帮助！

编辑：通过改变让它工作

```
$(arg[0]).attr('href') 
```

至

```
this.href 
```

顺便说一句（因为我找不到很多 cloudzoom/fancybox 线程），您还可以通过编辑 fancybox 的 JS 代码来将位置从内部更改为右/左等，以使 fancybox-inner 显示为可见而不是隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:49:46.490

如果想法是`#fancybox-img`用一个锚包装选择器，该锚的属性与打开fancybox的锚`class="cloud-zoom"`的属性相同`href`

```
<a href="{same as anchor}" class="cloud-zoom" rel="position: 'inside'">
 <img id="fancybox-img" src="{big image}" alt=" " />
</a> 
```

...所以*Cloud Zoom*可以在特定图像上工作，然后我会重新编写`onComplete`回调，如：

```
'onComplete' : function(){
  $('#fancybox-img').wrap(
    $('<a />')
     .attr('href', this.href) // this.href gets the "href" of the current image
     .addClass('cloud-zoom')
     .attr('rel', "position: 'inside'")
    ); // wrap
  $('.cloud-zoom').CloudZoom();
} // onComplete 
```

（不知道到底`onComplete : function(arg)` 会做什么，但无论如何最好使用`'onComplete' : function(currentArray, currentIndex)`标准的fancybox代码）

**旁注**：

1.  当您实际上需要一个实例（最好是最新版本）以避免意外错误时，您正在加载两个版本的 jQuery（1.4.2 和 1.7.1）。

2.  您正在使用 fancybox v1.3.0 ...至少升级到[v1.3.4不会有什么坏处](http://fancybox.net/)

3.  在引号之间设置所有您的fancybox API选项，例如

    ```
    "padding": 0, // it's OK 0 without quotes (integer and Boolean values go without them)
    "overlayColor": '#'+$j('#skin_color').val(),  
    "transitionIn": 'fade',
    "transitionOut": 'fade',
    "overlayOpacity": .9,
    "onComplete": ...etc 
    ```

    存在已知问题（主要是 IE），因为（fancybox v1.3.x）

# django - Django ascii 显示错误

> ID：11392638
> 
> 赞同：2
> 
> 时间：2012-07-09T09:48:29.147
> 
> 标签：django, view, asciiencoding

Ascii 解码错误

文字 =`"Hanuman (Sanskrit: हनुमान्, Hanumān), a Hindu deity who was an ardent devotee of Rama according to Hindus legends, and a central character in the Indian epic Ramayana."`

我将文本保存到 MYSQL 表中的 novarchar 列中，它插入成功。

当我在控制台中检索此数据时，它显示正确。但是当我试图通过 django 检索它并在模板中显示它时，它显示为一些 ascii 字符。

显示为`"Hanuman (Sanskrit: à¤¹à¤¨à¥à¤&reg;à¤¾à¤¨à¥, HanumÄn), is a Hindu deity who is an ardent devotee of Rama, a central character in the Indian epic Ramayana."`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:43:05.433

我猜你错过了模板中的内容类型元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

# iphone - 目标c中的数组

> ID：11392642
> 
> 赞同：1
> 
> 时间：2012-07-09T09:48:40.817
> 
> 标签：iphone, objective-c

我对如何在 NSLOg 声明下增加订单有疑问。例如我的代码是

```
 int anBray[ ] = {0,5, 89, 34,9,189,9,18,9 34,89, 34,2,600,-2,0};

 int i;    

NSLog (@"Input:");

     for (i=0; i<sizeof(anBray)/sizeof(int); i++)
    NSLog(@ " anBray[i]= %i ",anBray[i]); 
```

实际上我得到了输出-：

```
 anBray[i]=0                               
                               anBray[i]=5
                               anBray[i]=89.....and so on. 
```

但我怎样才能得到这样的输出 - ：

```
 anBray[0]=0
                                 anBray[1]=5
                                 anBray[2]=89....and so on. 
```

请任何人帮助我谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:50:56.257

更改 `NSLog(@ " anBray[i]= %i ",anBray[i],anBray[i]);` 为 `NSLog(@ " anBray[%i]= %i ",i,anBray[i]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:51:57.513

为您解决了这个问题：

```
for (i=0; i<sizeof(anBray)/sizeof(int); i++) {
   NSLog(@ " anBray[%d]= %d ",i,anBray[i]); 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T09:57:09.537

您可以使用此代码

```
 for (i=0; i<sizeof(anBray)/sizeof(int); i++) {
   NSLog(@ " anBray[%d]= %d ",i,anBray[i]); 
 } 
```

愿这对你有帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T10:01:01.400

```
for (i=0; i<sizeof(anBray)/sizeof(int); i++)
    NSLog(@ " anBray[%d]= %i ",i,anBray[i]); 
```

# c# - 访问抽象类的成员

> ID：11392644
> 
> 赞同：0
> 
> 时间：2012-07-09T09:48:47.487
> 
> 标签：c#, oop, object-oriented-analysis

我有以下类层次结构：

```
public abstract class BaseClass : IBaseInterface
{

    public int PropertyA{
        get
        {
            return this.propertyA;
        }

        set
        {
            this.propertyA = value;
            // ... some additional processing ...
        }
    }
}

DerivedClassB : BaseClass
{
    // some other fields
}

public class ContainingClassC
{
    public IBaseInterface BaseInterfaceObjectD
    {
        get;
        set;
    }
} 
```

现在，为了访问 DerivedClassB-Object（继承自 BaseClass）的 PropertyA，我必须将对象强制转换为 BaseClassA 的祖先，如下所示：

```
// This ContainingClassC is returned from a static, enum-like class:
// containingObject.PropertyA is DerivedClassB by default.
ContainingClassC containingObject = new ContainingClassC();

((IBaseInterface)containingObject.BaseInterfaceObjectD).PropertyA = 42; 
```

有没有办法可以重组这些类以取消演员表？这段代码是图书馆的一部分，我的同事希望我摆脱演员阵容。

目标是简单地编写`containingObject.BaseInterfaceObjectD.PropertyA = 42`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:33:07.873

首先，在该行中，`((IBaseInterface)containingObject.BaseInterfaceObjectD).PropertyA = 42;`您将成员转换为与其声明的类型相同的类型，因此该转换实际上并没有做任何事情。

为了能够访问派生类中的 PropertyA - 因为您将其转换为接口 - 必须在接口中声明属性，然后在 BaseClass 中实现。

```
public interface IBaseInterface{
  int PropertyA{get;set;}
}

public abstract class BaseClass : IBaseInterface{
  public int PropertyA{
    get{ return this.propertyA;}
    set {this.propertyA = value;}
   }
} 
```

只要接口被正确实现，ProprtyA 就应该在基类、派生类中可用，或者将它们中的任何一个转换为接口类型。

如果只是 IntelliSense 中没有显示该属性的问题，则可能是您的设置有问题。查看 Options->Text Editor->C# 并确保您已打开 IntelliSense 并且未设置为隐藏任何内容。

# c# - 从分组集合中选择

> ID：11392645
> 
> 赞同：0
> 
> 时间：2012-07-09T09:48:47.070
> 
> 标签：c#, linq

我有一个`HallPlan`包含字段的表（）：

```
Row, Seat, Width, Height, X, Y 
```

并按以下方式分组集合`Y`：

```
var ordered = hallPlans.GroupBy(s => s.Y).OrderBy(o => o.Key); 
```

现在我想从每个组的所有最小 X 中选择最大 X。例如`ordered`包含三个组，我们有：

```
first group contains 3 records with X coordinates: 15, 50, 80;
second group contains: 16, 50,80;
and last group contains: 15, 40, 60; 
```

从每个组中选择所有最小值：`15, 16, 15`
并从上面选择最大值：`16`。

我怎样才能用 LINQ 做到这一点？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:56:47.877

您可以使用`Min`和`Max`功能。

```
class HallPlan { public int X { get; set; } }

...

var groups = new[]{
                    new []{new HallPlan{X=15},new HallPlan{X=50},new HallPlan{X=80}},
                    new []{new HallPlan{X=16},new HallPlan{X=50},new HallPlan{X=80}},
                    new []{new HallPlan{X=15},new HallPlan{X=40},new HallPlan{X=60}}
                };

var maxmin = groups.Select(g => g.Min(h => h.X)).Max(); // result is 16 
```

`groups.Select(g => g.Min(h => h.X))``HallPlan.X`将从每组中选择`.Max()`最小值，然后返回其中最大值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:58:47.967

```
var allMinX = ordered.Select(g => g.Min(s => s.X));
var minMax  = allMinX.Max(); 
```

# c - 头文件未正确包含

> ID：11392650
> 
> 赞同：0
> 
> 时间：2012-07-09T09:49:05.790
> 
> 标签：c, operating-system

不包括头文件（stdint.h）。我知道很多代码都在后面，但我真的不知道。

我的文件：

gdt.c

```
/* We need 8 segments */
#include <stdint.h>
#include "gdt.h"
#define GDT_SIZE 8
uint32_t intr;

gdt_entry gdtable[GDT_SIZE]; 
```

包括/gdt.h

```
#ifndef GDT_H
#define GDT_H
#include <stdint.h>
struct gdt_entry{
    uint_16t limit;
    uint_32t base :24;
    uint_32t accessbyte :8;
    uint_32t limit2 :4;
    uint_32t flags2 :4;
    uint_32t base2 :8;
}__attribute__((packed));
#endif 
```

包括/stdint.h

```
#ifndef STDINT_H
#define STDINT_H

typedef unsigned long long uint64_t;
typedef unsigned int uint32_t;
typedef unsigned short uint16_t;
typedef unsigned char uint8_t;

typedef signed long long int64_t;
typedef signed int int32_t;
typedef signed short int16_t;
typedef signed char int8_t;

#endif 
```

生成文件：

```
SRCS = $(shell find -name '*.[cS]')
OBJS = $(addsuffix .o,$(basename $(SRCS)))

CC = gcc
LD = ld

ASFLAGS = -m32
CFLAGS = -m32 -Wall -g -fno-stack-protector -I include
LDFLAGS = -melf_i386 -Tkernel.ld

kernel: $(OBJS)
    $(LD) $(LDFLAGS) -o $@ $^

%.o: %.c
    $(CC) $(CFLAGS) -c -o $@ $^

%.o: %.S
    $(CC) $(ASFLAGS) -c -o $@ $^

clean:
    rm $(OBJS)

.PHONY: clean 
```

内核.ld

```
/*  start should be executed first */
ENTRY(_start)

/*
 * thats how the sections should be written in the .elf binary
 */
SECTIONS
{
    /*
     * the first section has a 1MB Offset for the grub bootloader
     */
    . = 0x100000;

     /*
      * the multiboot header comes first
      */
     .text : {
         *(multiboot)
         *(.text)
     }
     .data ALIGN(4096) : {
         *(.data)
     }
     .rodata ALIGN(4096) : {
         *(.rodata)
     }
     .bss ALIGN(4096) : {
         *(.bss)
     }
} 
```

gcc 输出：

```
gcc -m32 -c -o start.o start.S
gcc -m32 -Wall -g -fno-stack-protector -I include -c -o gdt.o gdt.c
In file included from gdt.c:3:0:
include/gdt.h:5:2: error: unknown type name ‘uint_16t’
include/gdt.h:6:2: error: unknown type name ‘uint_32t’
include/gdt.h:7:2: error: unknown type name ‘uint_32t’
include/gdt.h:8:2: error: unknown type name ‘uint_32t’
include/gdt.h:9:2: error: unknown type name ‘uint_32t’
include/gdt.h:10:2: error: unknown type name ‘uint_32t’
gdt.c:7:1: error: unknown type name ‘gdt_entry’
make: *** [gdt.o] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T09:50:40.023

我认为你应该使用`uint32_t`而不是非标准的`uint_32t`. 这至少是我遇到的第三个变种，以前我也见过`u_int32_t`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:16:59.887

还有另一个问题：gdt_entry gdtable[GDT_SIZE]; 应该是 struct gdt_entry gdtable[GDT_SIZE]

# jython - 记录磨床时出错

> ID：11392656
> 
> 赞同：1
> 
> 时间：2012-07-09T09:49:52.283
> 
> 标签：jython, grinder

我正在使用磨床测试我的 webapp。我使用 tcp 代理生成了脚本。它工作得很好，但是当我向它添加记录器时，会产生以下错误：

```
Error running worker process
    net.grinder.scriptengine.jython.JaythonScriptExceutionException: 
    SyntaxError ('invalid syntax', ('c:\\........ \\script_name.py', 79, 9,
     "\tlog('Arvind Purohit')"))
    (no code object) at line 0 
```

这是我的脚本：

```
# The Grinder 3.9.1
# HTTP script recorded by TCPProxy at 9 Jul, 2012 3:08:10 PM

from net.grinder.script import Test
from net.grinder.script.Grinder import grinder
from net.grinder.plugin.http import HTTPPluginControl, HTTPRequest
from HTTPClient import NVPair
log = grinder.logger.info
connectionDefaults = HTTPPluginControl.getConnectionDefaults()
httpUtilities = HTTPPluginControl.getHTTPUtilities()

# To use a proxy server, uncomment the next line and set the host and port.
# connectionDefaults.setProxyServer("localhost", 8001)

# These definitions at the top level of the file are evaluated once,
# when the worker process is started.

connectionDefaults.defaultHeaders = \
  [ NVPair('Accept-Encoding', 'gzip, deflate'),
    NVPair('User-Agent', 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0)'), ]

headers0= \
  [ NVPair('Accept', '*/*'),
    NVPair('Referer', 'http://192.168.1.53:8081/JSP-LOGIN/login.jsp'),
    NVPair('Accept-Language', 'en-IN'), ]

headers1= \
  [ NVPair('Accept', 'image/jpeg, application/x-ms-application, image/gif, application/xaml+xml, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*'),
    NVPair('Referer', 'http://192.168.1.53:8081/JSP-LOGIN/login.jsp'),
    NVPair('Accept-Language', 'en-IN'), ]

headers2= \
  [ NVPair('Accept', 'image/jpeg, application/x-ms-application, image/gif, application/xaml+xml, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*'),
    NVPair('Referer', 'http://192.168.1.53:8081/JSP-LOGIN/welcome.jsp'),
    NVPair('Accept-Language', 'en-IN'), ]

url0 = 'http://192.168.1.53:8081'

# Create an HTTPRequest for each request, then replace the
# reference to the HTTPRequest with an instrumented version.
# You can access the unadorned instance using request101.__target__.
# ========= START -================
request101 = HTTPRequest(url=url0)
request101 = Test(101, 'GET login.jsp').wrap(request101)

request102 = HTTPRequest(url=url0, headers=headers0)
request102 = Test(102, 'GET valid.js').wrap(request102)

request103 = HTTPRequest(url=url0)
request103 = Test(103, 'GET favicon.ico').wrap(request103)

# ====== login=============
request201 = HTTPRequest(url=url0, headers=headers1)
request201 = Test(201, 'POST loginmid.jsp').wrap(request201)

request202 = HTTPRequest(url=url0, headers=headers1)
request202 = Test(202, 'GET welcome.jsp').wrap(request202)

# ==========LOGOUT============
request301 = HTTPRequest(url=url0, headers=headers2)
request301 = Test(301, 'GET logout.jsp').wrap(request301)

request302 = HTTPRequest(url=url0, headers=headers2)
request302 = Test(302, 'GET login.jsp').wrap(request302)

request303 = HTTPRequest(url=url0, headers=headers0)
request303 = Test(303, 'GET valid.js').wrap(request303)

class TestRunner:
  """A TestRunner instance is created for each worker thread."""

  # A method for each recorded page.
  def page1(self):
    """GET login.jsp (requests 101-103)."""
    result = request101.GET('/JSP-LOGIN/login.jsp', None,
      ( NVPair('Accept', 'image/jpeg, application/x-ms-application, image/gif, application/xaml+xml, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*'),
        NVPair('Accept-Language', 'en-IN'), ))
    log('ARVIND PUROHIT')
    grinder.sleep(13)
    request102.GET('/JSP-LOGIN/valid.js')

    grinder.sleep(62)
    request103.GET('/favicon.ico', None,
      ( NVPair('Accept', '*/*'), ))

    return result

  def page2(self):
    """POST loginmid.jsp (requests 201-202)."""

    # Expecting 302 'Moved Temporarily'
    result = request201.POST('/JSP-LOGIN/loginmid.jsp',
      ( NVPair('userName', 'A'),
        NVPair('password', 'A'),
        NVPair('Submit', 'Login'), ),
      ( NVPair('Content-Type', 'application/x-www-form-urlencoded'), ))

    grinder.sleep(15)
    request202.GET('/JSP-LOGIN/welcome.jsp')
    self.token_flag = \
      httpUtilities.valueFromBodyURI('flag') # 'edit'

    return result

  def page3(self):
    """GET logout.jsp (requests 301-303)."""

    # Expecting 302 'Moved Temporarily'
    result = request301.GET('/JSP-LOGIN/logout.jsp')

    request302.GET('/JSP-LOGIN/login.jsp')

    request303.GET('/JSP-LOGIN/valid.js', None,
      ( NVPair('If-Modified-Since', 'Tue, 03 Jul 2012 10:18:40 GMT'),
        NVPair('If-None-Match', 'W/\"4436-1341310720000\"'), ))

    return result

  def __call__(self):
    """Called for every run performed by the worker thread."""
    self.page1()      # GET login.jsp (requests 101-103)

    grinder.sleep(12893)
    self.page2()      # POST loginmid.jsp (requests 201-202)

    grinder.sleep(16403)
    self.page3()      # GET logout.jsp (requests 301-303)

def instrumentMethod(test, method_name, c=TestRunner):
  """Instrument a method with the given Test."""
  unadorned = getattr(c, method_name)
  import new
  method = new.instancemethod(test.wrap(unadorned), None, c)
  setattr(c, method_name, method)

# Replace each method with an instrumented version.
# You can call the unadorned method using self.page1.__target__().
instrumentMethod(Test(100, 'Page 1'), 'page1')
instrumentMethod(Test(200, 'Page 2'), 'page2')
instrumentMethod(Test(300, 'Page 3'), 'page3') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:07:16.387

我只是在学习 Python（不到一周），但我认为这可能是`\t`.

Python 正在阅读：

```
\tlog('Arvind Purohit') 
```

但是，它需要 4 个空格，而不是制表符，如下所示：

```
 log('Arvind Purohit') 
```

这就是为什么当你复制/粘贴它时它必须工作。确保您使用的编辑器显示所有字符以避免这种情况和垂直线缩进，因此您还可以避免*“（第 0 行无代码对象）”*错误。

# javascript - 如何在javascript中将字符串值（例如：双精度值）转换为百分比？

> ID：11392663
> 
> 赞同：-1
> 
> 时间：2012-07-09T09:50:18.343
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 浮点数问题的优雅解决方法](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)

我想知道我们如何将以下值转换为javascript中的百分比？

第一个预期输出

```
 Input Value   :  0.03222772304422584
 Expected Value:  0.03 
```

第二个预期产出

```
 Input Value   :  0.03222772304422584
 Expected Value:  .03 
```

提前致谢，

卡西尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T09:58:03.950

您可以使用[`toFixed()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)并[`slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/slice)喜欢：

```
var n = +"0.0322277230442258"; //converts String to Number
var r = n.toFixed(2); // returns 0.03

var r2 = r.slice(1): // returns .03 by removing the first character 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T09:54:37.253

```
var val = "0.03222772304422584";

(+val).toPrecision(1);  // 0.03
(+val).toPrecision(1).slice(1);  // .03 
```

参考：[MDN .toPrecision()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toPrecision)

# regex - bash：如何合并包含特定位置数字的文件

> ID：11392664
> 
> 赞同：0
> 
> 时间：2012-07-09T09:50:18.460
> 
> 标签：regex, bash, cat

我想合并所有在某个位置有一位或两位数字的文件。基本上我想匹配1-22的数字。

我用 bash 写：

```
cat chr[0-9][0-9]{0,}_from6_new_mono.txt >all_autosomes_from6_new_mono.txt 
```

我收到此错误：

```
cat: chr[0-9][0-9]0_from6_new_mono.txt: No such file or directory 
```

但是文件名看起来像这样：

```
chr22_from6_new_mono.txt 
```

或者

```
chr1_from6_new_mono.txt 
```

有人可以告诉我哪里可能有问题吗？谢谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:00:52.550

您可以使用`bash`花括号扩展来表示数字范围：

```
cat chr{1..22}_from_6_new_mono.txt >merged 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T09:58:33.583

你确定，你正确使用了大括号扩展吗？

查看[http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)了解更多信息

# java - JApplet 加载库的安全性

> ID：11392667
> 
> 赞同：0
> 
> 时间：2012-07-09T09:50:25.047
> 
> 标签：java, swing, jfreechart, japplet

我创建了一个使用库 JFreeChart（和 JCommon）的 JApplet。我的应用程序是一个客户端-服务器之类的。我请求服务器创建它的图表并返回一个包含该图表的 JPanel。这个特定的 JPanel 是一个类 (ChartPanel) 的实例，它是 JPanel 的子类。现在问题是这样的：当我从服务器读取 JPanel 时，我得到了这个堆栈跟踪[http://pastebin.com/WnLcp9kQ](http://pastebin.com/WnLcp9kQ)（你可以在第 36 行看到我的类）这是什么意思？与我使用两个（JFreeChart 和 JCommon）jar 作为外部库的事实有关吗？在这里你可以看到我创建 jar 的项目结构[http://i45.tinypic.com/zw136p.png](http://i45.tinypic.com/zw136p.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:30:57.573

我什至想不出从哪里开始。

首先，不要通过网络传递 Swing 组件。这只是混乱，将导致永无止境的问题。

您面临的问题与在不同上下文中创建的组件的期望有关。然后该组件违反了小程序安全管理器的限制。

将 JFreeChart 对象传回然后自己将其应用到面板会（稍微）好一点，假设它不是 JFreeChart 试图链接到本机库。

更好的解决方案是将系列数据传递回客户端并在客户端构建整个购物车。

# c++ - BMP 纹理不显示

> ID：11392668
> 
> 赞同：1
> 
> 时间：2012-07-09T09:50:34.207
> 
> 标签：c++, linux, opengl, textures, bmp

我在学习如何在 OpenGL 中进行纹理处理时遇到了一个问题（来自 OpenGL 第 5 版圣经）。问题是我**无法显示我的纹理**。我使用我自己编写的函数从 BMP 文件加载它。

由于代码很长，我上传了所有必需的文件。你可以从[这里](http://rob1n92.pl/download/opengl.tar.bz2)下载。

编辑：我尝试从提到的书中复制代码（那里描述了 TGA 加载），但效果不佳。加载似乎卡在从文件加载图像数据（奇怪）。我想就我的问题而言，这无关紧要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T16:19:38.603

有用于检查问题的一般调试步骤。我将在下面列出它们，希望您能找到错误（以及未来的读者）：

*   文件是否存在？文件是否根据格式正确读取？你是否让它与 OpenGL 很好地融合在一起？我的建议：不要自己弄这些东西。使用图书馆。有一个非常轻的[SOIL（简单的 OpenGL 图像库）](http://www.lonesock.net/soil.html)
*   您是否在初始化 OpenGL 之前加载纹理？这一直是我的问题，因为我曾经“加载”并`glBindTexture(..)`在（某些类的）构造函数中执行。这些对象是在 OpenGL 初始化之前创建的。
*   你启用了`GL_TEXTURE_2D`吗？检查初始化代码，使用：`glEnable(GL_TEXTURE_2D)`
*   您是否使用四边形或您想要的形状正确映射纹理？在这里扩展这个（有点）超出了范围。那里有很棒的[教程](http://www.gamedev.net/page/resources/_/technical/opengl/opengl-texture-mapping-an-introduction-r947)。
*   （看起来很愚蠢，但有时会发生）你把物体涂黑了`glColor3f(0,0,0)`吗？

*[可能会有更多的检查，但这些是我现在头疼的]*

# c# - 在 Unity 容器中注册 null 作为实例

> ID：11392670
> 
> 赞同：19
> 
> 时间：2012-07-09T09:50:36.873
> 
> 标签：c#, .net, unity-container

我有一个具有可选依赖项的存储库类：

```
class MyRepository : BaseRepository, IMyRepository
{
    public MyRepository(IDataContext dataContext, ICacheProvider cacheProvider = null)
        : base(dataContext, cacheProvider)
    {}

    // …
} 
```

cacheProvider 参数的存在充当存储库的策略。我想像这样设置 Unity 容器：

```
Container.RegisterType<IDataContext, MyDataContext>(new PerResolveLifetimeManager(), new InjectionConstructor())
         .RegisterInstance<ICacheProvider>(null) // ???
         .RegisterType<IMyRepository, MyRepository>(); 
```

即没有用一个参数为MyRepository 指出特定的InjectionConstructor，而是使用带有null 作为*cacheProvider*参数的默认构造函数。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-07T01:44:59.457

我发现 RegisterType，而不是 Register 实例，支持返回 null。

```
container.RegisterType<IInterface>(new InjectionFactory((c) => null)); 
```

这是获得实际`null`返回的最直接的方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-10T10:48:44.317

在`.RegisterType<IMyRepository, MyRepository>()`调用中，使用OptionalParameter[指定](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.optionalparameter%28PandP.20%29.aspx)[InjectionConstructor](http://msdn.microsoft.com/en-us/library/microsoft.practices.unity.injectionconstructor%28PandP.20%29.aspx)，如

```
.RegisterType<IMyRepository, MyRepository>(new InjectionConstructor(
new ResolvedParameter<IDataContext>(), 
new OptionalParameter<ICacheProvider>())); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-09T10:21:15.347

对于*“很高兴拥有”*依赖项，您应该使用属性注入而不是 ctor 注入。配置看起来像这样：

```
public class MyRepository
{
  public ICacheProvider Cache { get; set; }
}

container.RegisterType<MyRepository>(new InjectionProperty("Cache", typeof(ICacheProvider))); 
```

这会将 的实现注入`ICacheProvider`到名为`Cache`您的`MyRepository`. 因为无论您在什么地方调用`Cache`存储库类中的属性，您都必须实施空检查，所以我将采用@dtryon 的提议并实施`NullCacheProvider`. 这更方便，更不容易出错。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-09-20T00:01:24.780

**最简单的非过时解决方案**

使用 InjectionFactory 调用 RegisterType 目前已过时，因此这是当前推荐的方法：

```
container.RegisterFactory<ITypeToResolve>(c => null); 
```

* * *

**灵活的扩展方法**

或者，如果您想创建一个扩展方法来返回您想要的任何内容，您可以执行以下操作：

```
public static void RegisterFactory<TToResolve>(IUnityContainer container, Func<TToResolve> factory) => 
        container.RegisterFactory<TToResolve>(c => factory.Invoke()); 
```

然后消费你会做的：

```
container.RegisterFactory<ITypeToResolve>(() => new MyTypeToResolve()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T10:38:55.323

我已经在我的可选依赖项上实现了某种 NullObject 模式：

```
public class NullCacheProvider : ICacheProvider
{
    // …
} 
```

在基础存储库类中，我检查了：

```
public class BaseRepository
{
    protected readonly ICacheProvider CacheProvider;
    protected readonly bool ShouldUseCache;

    protected BaseRepository(IDataContext context, ICacheProvider cacheProvider)
    {
        CacheProvider = cacheProvider;
        ShouldUseCache = 
            CacheProvider != null && !(CacheProvider is NullCacheProvider);
    }
} 
```

然后在我不需要缓存的项目中，我像这样配置了 Unity：

```
container
    .RegisterType<IDataContext, MyDataContext>(new PerResolveLifetimeManager(), new InjectionConstructor())
    .RegisterType<ICacheProvider, NullCacheProvider>() 
    .RegisterType<IMyRepository, MyRepository>(); 
```

所有这一切的重点是特定存储库可能会根据可选依赖项的存在事实而采取不同的行动。这似乎是一些架构缺陷，但该解决方案符合我的要求。

# c# - 静态变量的初始化顺序不明确

> ID：11392671
> 
> 赞同：6
> 
> 时间：2012-07-09T09:50:38.040
> 
> 标签：c#, c++, .net, initialization, initialization-order

在我研究在 C# 中构建单例的最佳方法期间，我偶然发现了以下[文章](http://msdn.microsoft.com/en-us/library/ff650316.aspx)，其中简要提到了 C++

> “C++ 规范在静态变量的初始化顺序上留下了一些歧义。”

我最终调查了这个问题，发现[了 this](https://stackoverflow.com/questions/211237/static-variables-initialisation-order)和[this](https://stackoverflow.com/questions/1005685/c-static-initialization-order)。基本上重点（据我所知）是 C++ 中静态变量的初始化顺序是未定义的。好吧，我想到目前为止还不错，但是后来我想了解这篇文章稍后所做的以下陈述

> “幸运的是，.NET Framework 通过对变量初始化的处理解决了这种歧义。”

所以我找到了他们说的[这个页面](http://msdn.microsoft.com/en-us/library/aa645758%28v=vs.71%29.aspx)

> 类的静态字段变量初始化器对应于一系列赋值，它们按照它们在类声明中出现的文本顺序执行。

并举个例子

```
using System;
class Test
{
   static void Main() {
      Console.WriteLine("{0} {1}", B.Y, A.X);
   }
   public static int F(string s) {
      Console.WriteLine(s);
      return 1;
   }
}
class A
{
   static A() {}
   public static int X = Test.F("Init A");
}
class B
{
   static B() {}
   public static int Y = Test.F("Init B");
}

the output must be: 
Init B 
Init A
1 1 
```

> “因为静态构造函数何时执行的规则（如第 10.11 节所定义）规定 B 的静态构造函数（以及因此 B 的静态字段初始值设定项）必须在 A 的静态构造函数和字段初始值设定项之前运行。”

但是我感到困惑的是，我的理解是这些示例中静态变量的初始化顺序将基于第一次调用类中的方法或字段的时间，而这又基于代码块的执行顺序（本例从左到右）。IE：完全独立于类声明的位置或顺序。然而，根据我对那篇文章的解释，它说它是这些类的声明顺序的结果，我的测试没有支持？

有人可以为我澄清这一点（以及这篇文章试图提出的观点），或许可以提供一个更好的例子来说明所描述的行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T09:55:37.813

> 类的静态字段变量初始化器对应于一系列赋值，它们按照它们在类声明中出现的文本顺序执行。

这意味着在同一个类中，静态字段按照源代码中出现的顺序进行初始化。例如：

```
class A
{
   public static int X = Test.F("Init A.X");
   public static int Y = Test.F("Init A.Y");
} 
```

当需要初始化静态字段时，`X`保证在`Y`.

> “因为静态构造函数何时执行的规则（如第 10.11 节中所定义）规定 B 的静态构造函数（以及因此 B 的静态字段初始值设定项）必须在 A 的静态构造函数和字段初始值设定项之前运行。”

这意味着当访问这些类的表达式出现时，每个类的静态构造函数和成员初始化将按评估顺序运行¹。源代码中类定义的相对出现顺序没有任何作用，即使它们出现在同一个源文件中（他们肯定没有义务这样做）。例如：

```
static void Main() {
    Console.WriteLine("{0} {1}", B.Y, A.X);
} 
```

假设既`A`没有也`B`没有静态初始化，求值顺序保证 的所有字段`B`将在 的任何字段之前初始化`A`。每个类的字段将按照第一条规则指定的顺序进行初始化。

* * *

¹出于本次讨论的目的，我忽略了[`beforefieldinit`](https://stackoverflow.com/questions/610818/what-does-beforefieldinit-flag-do).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T11:10:33.550

在 C++ 中，具有静态存储持续时间的变量在单个翻译单元中的初始化顺序是此类变量的定义发生的顺序。未指定具有静态存储持续时间的变量的初始化顺序在不同的翻译单元中是什么。

也就是说，C++ 标准确实提供了与您引用的内容类似的保证，将类中的声明顺序替换为定义此类变量的单个翻译单元中的定义顺序。但这不是重要的区别。

虽然在 C++ 中这是唯一的保证，但在 C# 中还有额外的保证，即所有静态成员都将在第一次使用类之前被初始化。这意味着，如果您的程序依赖于`A`（考虑不同程序集中的每种类型，这是最坏的情况），它将开始初始化 中的所有静态字段`A`，如果`A`反过来依赖于`B`这些静态初始化中的任何一个，则初始化的`B`静态成员将在那里触发。

与 C++ 相比，在静态初始化^([*]期间，)*假定*所有其他具有静态持续时间的变量都已初始化。这是主要区别：C++ 假定它们已初始化，C# 确保它们在使用之前。

* * *

^([*])从技术上讲，有问题的情况可能是标准中的*动态*初始化。在每个翻译单元内初始化具有静态存储持续时间的变量是一个两步过程，其中在第一轮*静态*初始化中将变量设置为固定的常量表达式，然后在第二轮称为*动态*初始化中，所有具有静态存储的变量，其初始化程序不是常量表达式被初始化。

# .net - WP8 (Windows Phone 8) - SDK

> ID：11392673
> 
> 赞同：0
> 
> 时间：2012-07-09T09:50:43.570
> 
> 标签：.net, html, windows-phone

我对 WP7 最大的问题之一是 SDK 在某些领域的局限性。我无法更改音量，也无法自动发送短信（虽然我可以使用 Android 操作系统）。所以，如果我想让我的手机在周一至周日晚上 9 点到早上 7 点之间静音且不振动……我做不到。

如果我想在以后安排文本，我不能——我所能做的就是填充消息，准备好发送。

为什么？限制这些是没有意义的。好的，在阻止开发人员访问发送短信方面是有道理的（以保护消费者免受恶意人员的伤害（尤其是在涉及文本费用的情况下））......但不！这就是互联网安全所做的——或 Windows 中的 UAC……它允许用户设置权限。程序应该尝试发送文本，操作系统检测到它并创建一个新规则以始终允许/拒绝（取决于用户输入）（记住我的偏好设置）。

无论如何，对不起，这两个功能对于我被要求创建的应用程序的风格至关重要。所以，最后，我的问题是：我知道 WP8 的 SDK 据说会在 2012 年 7 月下旬发布，但我们知道我上面提到的限制是否会被取消吗？

我的第二个问题是，是否有任何 .NET 开发人员跑出去学习 javscript，因为他们觉得 C# 或 VB.Net 会像 silverlight 一样受苦或走同样的路。我不认为它会，但由于关于 HTML 5 的营销活动如此之多，我很想看看是否有人对此感到担忧。

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:36:37.963

Windows Phone 8 SDK 现已推出：
[https ://dev.windowsphone.com/en-us/downloadsdk](https://dev.windowsphone.com/en-us/downloadsdk)

# php - 在 SQL 中跳过 0 和 NULL

> ID：11392677
> 
> 赞同：2
> 
> 时间：2012-07-09T09:50:53.997
> 
> 标签：php, mysql, sql

我之前的问题和解决方法：

[从字段中获取最大值和最小值](https://stackoverflow.com/questions/11392195/get-max-and-min-from-fields)

这工作正常，但我想在这个例子中跳过 0 和 NULL。

例如：

```
First:
id | title 
1  | aaa
2  | bbb
3  | ccc

Second:
id | first_id | one | two    | three | four
1  |    1     | 3   | 0      | 4     | 6
2  |    2     | 4   | 4      | 1     | 2
3  |    3     | 1   | NULL   | 3     | 4 
```

这应该告诉我：

```
id | title | min | max 
1  | aaa   |  3  | 6
2  | bbb   |  1  | 4
3  | ccc   |  1  | 4 
```

而**不是**：

```
id | title | min | max 
1  | aaa   |  0  | 6
2  | bbb   |  1  | 4
3  | ccc   |  0  | 4 
```

在我上一个问题的哪个示例中，实现跳过 0 和 NULL 的最佳方法是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T09:53:47.683

将这些添加到您的子句中

```
SELECT 
    f.id, 
    f.title
    MIN(LEAST(greatest(coalesce(s.one,0),1), greatest(coalesce(s.two,0),1), greatest(coalesce(s.three,0),1), greatest(coalesce(s.four,0),1))) as min,
    MAX(GREATEST(greatest(coalesce(s.one,0),1), greatest(coalesce(s.two,0),1), greatest(coalesce(s.three,0),1), greatest(coalesce(s.four,0),1))) as max
FROM 
    First f
        INNER JOIN Second s
        on f.id = s.first_id
GROUP BY 
    f.id, 
    f.title 
```

您可以使用`coalesce(fieldName, 1)`将 null 变为 1。

同样，正如您在上一个问题中所说，这是使用查询来强制回答的可怕做法。您应该更改数据库的布局。

编辑：我已经整理出了你想要的数据，但在你看之前，请注意，如果我的一位同事写了这样的脚本，他会当场被解雇。这是可怕的，不应该使用。

```
select
    f.id,
    f.title,
    (select min(z.myVal) from
        (
select
    b.id,
    b.first_id,
    b.one as myVal
from
    second b
where
    b.one is not null
    and b.one > 0
union
select
    b.id,
    b.first_id,
    b.two as myVal
from
    second b
where
    b.two is not null
    and b.two > 0
union
select
    b.id,
    b.first_id,
    b.three as myVal
from
    second b
where
    b.three is not null
    and b.three > 0
union
select
    b.id,
    b.first_id,
    b.four as myVal
from
    second b
where
    b.four is not null
    and b.four > 0
        ) z
    where
    f.id=z.first_id) as miniVal,
    greatest(
        coalesce(s.one,0),
        coalesce(s.two,0),
        coalesce(s.three,0),
        coalesce(s.four,0)  
    ) as maxiVal
from
    first f,
    second s
where
    f.id=s.first_id 
```

输出数据

```
+------+-------+---------+---------+
| id   | title | miniVal | maxiVal |
+------+-------+---------+---------+
|    1 | aaaa  |       3 |       6 |
|    2 | bbbb  |       1 |       4 |
|    3 | cccc  |       1 |       4 |
+------+-------+---------+---------+
3 rows in set (0.00 sec) 
```

运行这个查询让我有点呕吐。像这样写SQL是多么的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:10:17.610

虽然看起来很笨重，但这个解决方案应该可以工作：

```
SELECT 
    a.id, a.title, MIN(b.num) AS min, MAX(b.num) AS max
FROM 
    first a
LEFT JOIN
(
    SELECT first_id, one AS num FROM second UNION ALL
    SELECT first_id, two FROM second UNION ALL
    SELECT first_id, three FROM second UNION ALL
    SELECT first_id, four FROM second 
) b ON 
    a.id = b.first_id AND 
    b.num IS NOT NULL AND 
    b.num > 0
GROUP BY 
    a.id, a.title 
```

这样做是它实际上将每个数字列放入自己的行中，但***只有***不为空且 > 0 的数字。在 之前`GROUP BY`，结果`LEFT JOIN`将如下所示：

```
id  |  title  |  num
---------------------
1   |  aaa    |  3
1   |  aaa    |  4
1   |  aaa    |  6
2   |  bbb    |  1
2   |  bbb    |  2
2   |  bbb    |  4
2   |  bbb    |  4
3   |  ccc    |  1
3   |  ccc    |  3
3   |  ccc    |  4 
```

`first`然后通过每个( )的分组`GROUP BY a.id, a.title`，我们可以使用列上的`MIN()`和`MAX()`聚合函数来提取每个组的`num`最小值和最大值：`first`

```
id  |  title  |  min  |  max
----------------------------
1   |  aaa    |  3    |  6
2   |  bbb    |  1    |  4
3   |  ccc    |  1    |  4 
```

如果 a 的`first_id`所有四列都具有`NULL`'s 或's，则由于使用 a而不是a 而`0`显示最小值和最大值，因为我相信这对于您的情况来说是更好的行为：`NULL``LEFT JOIN``INNER JOIN`

```
id  |  title  |  min  |  max
----------------------------
4   |  ddd    |  NULL |  NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T16:33:29.057

我认为您只需要嵌套 LEAST 表达式：

```
LEAST(
    NULLIF(one,0),
    LEAST(
        NULLIF(two,0),
            LEAST(
                NULLIF(three,0),
                LEAST(
                    NULLIF(four,0),
                    null )))) 
```

**编辑**我刚刚查了一下。LEAST 函数接受多个参数：

```
LEAST( NULLIF(one,0), NULLIF(two,0), NULLIF(three,0), NULLIF(four,0)) 
```

**编辑 2**我看到你想要最小值和最大值。显然，您只需根据需要将 LEAST 更改为 GREATEST 或将 MIN 更改为 MAX。

这可能更直接，或者您可能没有方便的最少功能。

```
SELECT
    f.id, f.title,
    (
        SELECT MIN(NULLIF(val, 0))
        FROM
            (
                SELECT one AS val UNION ALL
                SELECT two UNION ALL
                SELECT three UNION ALL
                SELECT four
            ) AS vals
        ) 
    ) as minval

FROM First f INNER JOIN Second s on f.id = s.first_id 
```

您尚未指定是否所有四列都可能为 null/0。我们可能需要针对这种情况进行调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T10:00:04.077

利用：

```
WHERE COLUMN IS NOT NULL AND COLUMN <> 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T10:26:33.403

您可以使用`IFNULL()`：

```
WHERE IFNULL(fieldname, 0) != 0 
```

# c++ - 在Linux上接受时相同的SOCKET id？

> ID：11392684
> 
> 赞同：2
> 
> 时间：2012-07-09T09:51:10.850
> 
> 标签：c++, linux, intercept, ld-preload

我写了 LD_PRELOAD 来拦截 accept() 函数。我有一个问题，因为有时接受函数给了我相同的文件描述符。我只为一个进程加载这个预加载

我的代码：

```
int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen)
{
 int fd;
 fd = (*realAccept)(sockfd, addr, addrlen);
 if(fd >= 0)
 {
  printf("file descriptor: %d\n", fd);
  ...
  return fd;
 }
}

int close(int fd)
{
 printf("close decriptor: %d\n", fd);
 return (*realClose)(fd);
} 
```

输出是：

> 文件描述符：213
> 
> 文件描述符：213 <-- 为什么？
> 
> ...
> 
> 关闭描述符：213

为什么接受函数返回相同的文件描述符？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:36:00.430

我敢打赌，这是由于`stdout`. 也许还有其他一些线程在使用它......这增加了您没有包含结尾的事实`\n`可能会导致输出中出现重复的行。

如果您想确定，请`\n`在字符串末尾添加 ，并`fflush(stdout)`在每次调用`printf()`.

# actionscript-3 - 如何在 AS3 中提取嵌入图像的宽度和高度？

> ID：11392691
> 
> 赞同：0
> 
> 时间：2012-07-09T09:51:33.997
> 
> 标签：actionscript-3, flash, apache-flex, flashdevelop

如何在 AS3 中提取嵌入图像的宽度和高度，而不是明确说明尺寸？这是我正在尝试做的事情：

```
 [Embed(source="../../lib/spaceship.png")]
    private var ShipImage:Class;
    private var ship_image:BitmapData;

    public function Ship(x:int, y:int, width:Number, height:Number) 
    {
        super(x, y, 36, 64);
        ship_image = new ShipImage().bitmapData;
        speed = new Point(0, 0);
    } 
```

由于 super 应该在构造函数中的所有其他内容之前调用，我如何事先了解尺寸？我使用 FlashDevelop 作为我的 IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:04:17.063

您可以通过以下方式阅读这些属性[`BitmapData#rect`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#rect)：

```
public function Ship(x:int, y:int, width:Number, height:Number) 
{
    // Would be better if you haven't to pass width and height
    super(x, y, 0, 0);

    // Get the bitmap data
    ship_image = new ShipImage().bitmapData;

    // Set width and height
    width  = ship_image.rect.width;
    height = ship_image.rect.height;

    // ...
} 
```

其他静态解决方案：

```
[Embed(source="../../lib/spaceship.png")]
private static const ShipImage:Class;

private static var spriteWidth:int;
private static var spriteHeight:int;

private static function calculateSpriteSize():void
{
    // Get the sprite "rectangle"
    var rect:Rectangle = new ShipImage().bitmapData.rect;

    // Set width and height
    spriteWidth  = ship_image.rect.width;
    spriteHeight = ship_image.rect.height;
}

// Call the method into the class body
// (yes you can do that!)
calculateSpriteSize();

public function Ship(x:int, y:int, width:Number, height:Number) 
{
    // Retrieve the sprite size
    super(x, y, spriteWidth, spriteHeight);

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:49:06.050

您可以使用缩放提取/调整图像大小。您可以调整具有相同纵横比或不同纵横比的图像大小。如果您不想重新调整大小，则**scaleX && scaleY**的值为**1.0 ，**如果您想以原始大小的一半重新调整大小，则两个因子的值为**0.5** 如果您想旋转图像，则使用平移。

```
var matrix:Matrix = new Matrix();
matrix.scale(scalex, scaley);
matrix.translate(translatex, translatey);

var resizableImage:BitmapData = new BitmapData(size, size, true);
resizableImage.draw(data, matrix, null, null, null, true); 
```

此 resizableimage 返回位图数据。

愿这对你有用！

# spring - @Autowired 在静态类中

> ID：11392692
> 
> 赞同：32
> 
> 时间：2012-07-09T09:51:44.620
> 
> 标签：spring, hibernate, spring-mvc, autowired, static-classes

这是一个带有 Hibernate 的 Spring MVC 项目。我正在尝试创建一个 Logger 类，该类负责将日志输入数据库。其他类只是调用具有某些属性的正确方法，而这个类应该做所有的魔法。从本质上讲，它应该是一个具有静态方法的类，但这会导致自动装配 dao 对象出现问题。

```
public class StatisticLogger {
    @Autowired
    static Dao dao;
    public static void AddLoginEvent(LogStatisticBean user){
        //TODO code it god damn it
    }
    public static void AddDocumentEvent(LogStatisticBean user, Document document, DocumentActionFlags actionPerformed){
        //TODO code it god damn it
    }
    public static void addErrorLog(Exception e, String page,  HashMap<String, Object> parameters){
        ExceptionLogBean elb=new ExceptionLogBean();
        elb.setStuntDescription(e);
        elb.setSourcePage(page);
        elb.setParameters(parameters);
        if(dao!=null){ //BUT DAO IS NULL
            dao.saveOrUpdateEntity(elb);
    }
} 
```

如何使它正确？我应该怎么做才能使 dao 对象为空？我知道我可以将它作为方法参数传递，但这不是很好。我猜 autowired 不能在静态对象上工作，因为它们是在早期创建的，但尚未创建自动装配机制。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-02-18T11:14:27.453

您不能`@Autowired`使用静态字段。但是有一个棘手的技巧来处理这个问题：

```
@Component
public class StatisticLogger {

  private static Dao dao;

  @Autowired
  private Dao dao0;

  @PostConstruct     
  private void initStaticDao () {
     dao = this.dao0;
  }

} 
```

总之，`@Autowired`一个实例字段，并在构造对象时将值分配给静态字段。顺便说一句，该`StatisticLogger`对象也必须由 Spring 管理。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-09T09:57:44.103

经典的自动装配可能不起作用，因为静态类不是 Bean，因此不能由 Spring 管理。有一些方法可以解决这个问题，例如通过使用[XML 中](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-class-static-factory-method)[的`factory-method`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-class-static-factory-method)方法，或者通过在静态初始化程序块中从 Spring 上下文加载 bean，但我建议更改您的设计：

不要使用静态方法，使用您在需要的地方注入的服务。如果你使用Spring，你还不如正确使用它。依赖注入是一种面向对象的技术，只有当你真正接受 OOP 时它才有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-01T20:59:00.400

我知道这是一个老问题，但只是想分享我所做的，@Weibo Li 的解决方案还可以，但它引发了关于将非静态变量分配给静态变量的声纳严重警报

我在没有声纳警报的情况下解决它的方法如下

1.  我像这样将 StatisticLogger 更改为 singlton 类（不再是静态的）

    ```
    public class StatisticLogger {
    private static StatisticLogger instance = null;
    private Dao dao;

    public static StatisticLogger getInstance() {
        if (instance == null) {
            instance = new StatisticLogger();
        }
        return instance;
    }

    protected StatisticLogger() {
    }

    public void setDao(Dao dao) {
        this.dao = dao;
    }
    public void AddLoginEvent(LogStatisticBean user){
        //TODO code it god damn it
    }
    public void AddDocumentEvent(LogStatisticBean user, Document document, DocumentActionFlags actionPerformed){
        //TODO code it god damn it
    }
    public  void addErrorLog(Exception e, String page,  HashMap<String, Object> parameters){
        ExceptionLogBean elb=new ExceptionLogBean();
        elb.setStuntDescription(e);
        elb.setSourcePage(page);
        elb.setParameters(parameters);
        if(dao!=null){ 
            dao.saveOrUpdateEntity(elb);
    }
    } 
    ```

2.  我创建了一个服务（或组件），它自动连接我想要的服务并将其设置在单例类中这是安全的，因为在春天它会在做任何其他事情之前初始化所有托管 bean，这意味着下面的 PostConstruct 方法总是在之前被调用任何东西都可以像这样访问 StatisticLogger

    ```
    @Component
    public class DaoSetterService {

    @Autowired
    private Dao dao0;

    @PostConstruct     
    private void setDaoValue () {
        StatisticLogger.getInstance().setDao(dao0);
    }

    } 
    ```

3.  我没有将 StatisticLogger 用作静态类，而是将其用作 StatisticLogger.getInstance() 并且我可以访问其中的所有方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-08T14:22:52.723

您可以将 DAO 传递到`StatisticLogger`您调用它的位置。

```
public static void AddLoginEvent(LogStatisticBean user, DAO dao){
    dao.callMethod();
} 
```

# java - Eclipse - 相同的包名不同的项目。哪个会被 Eclipse 激活？

> ID：11392703
> 
> 赞同：0
> 
> 时间：2012-07-09T09:52:39.213
> 
> 标签：java, eclipse, project, visibility, packages

我有两个不同的 Eclipse IDE 项目，它们包含一个同名的包。

**项目一：**

```
 com.example.test
 |_ lib.java 
```

**项目二：**

```
 com.example.test
 |_ lib.java 
```

现在，当我导入包一内的 lib.java 时 - 使用包二内的 lib.java。

**问题：**

不同项目中的文件不应该相互独立吗？
这怎么可能，我可以从另一个 Eclipse 项目中输入文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:00:51.560

这是构建路径问题。您要么将#2 作为#1 的构建路径上的必需项目，要么将#2 作为#1 的构建路径上的jar。

最好的解决方案是不在两个项目中使用相同的包。选择区分这两个项目的包名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:50:42.540

您不应使用与您的项目没有依赖关系的其他项目中的类。这不是可移植的，因为尝试使用您的项目的其他用户将无法在哪里找到丢失的类。

您应该在构建路径中显式添加所需的项目作为依赖项。否则，Eclipse 将尝试猜测他在哪里可以找到您的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:28:56.070

Eclipse 添加来自所有项目的包，这些包在工作区中打开。当存在两个具有相同包名的项目时，未定义将使用哪个包。

# javascript - javascript 鼠标悬停时间延迟，如电子书网站

> ID：11392706
> 
> 赞同：1
> 
> 时间：2012-07-09T09:52:45.150
> 
> 标签：javascript

我需要鼠标悬停时间延迟的代码，例如 ebooks.com（畅销书标签），这是我的 javascript 代码，一切都很好，但我需要鼠标悬停的时间延迟，

```
 var prevnum=0;
   var cate="cat1";
function mouseoverfn(id){

    document.getElementById("bestsellerin_book_"+id).style.display='block';
    prevnum!=id?document.getElementById("bestsellerin_book_"+prevnum).style.display='none':'';
    document.getElementById(cate).style.background='#ffffff';
    document.getElementById(cate).style.color='#000';
    document.getElementById(cate).style.posistion='absolute';
    mouseoutfn(id)
    prevnum=id;
}

function mouseoutfn(id){

    document.getElementById("bestsellerin_book_"+prevnum).style.display='none';
    document.getElementById("bestsellerin_book_"+id).style.display='block';
    document.getElementById("cat"+id).style.background='#94B83E';
    document.getElementById("cat"+id).style.color='#ffffff';

    cate="cat"+id;
} 
```

HTML：

```
<div class="bestsellerin_txt_content" id="cat<?php echo $i; ?>" onmouseout="mouseoutfn(<?php echo $i; ?>)" onmouseover="mouseoverfn(<?php echo $i; ?>)">
    <span style="padding-left:4px;"><?php 
        echo substr(ucwords(strtolower($assigned_cat[$i]['Category']['name'])) , 0, 22);
        if( strlen($assigned_cat[$i]['Category']['name']) > 22){ 
            echo "..";
        }
    ?></span>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:17:01.833

您可以在鼠标悬停函数中设置超时。如果用户 mouseout 在超时时间结束之前，超时将被取消。（出于这个原因，你的 mouseover 和 mouseout 处理程序都需要可以访问超时，正如我在这里演示的那样）。

```
(function() {

    var mo_timeout;

    function mouseover() {
        mo_timeout = setTimeout(function() {
            //mouseover code here
        }, 1000);

    }

    function mouseoutfn(id){
        clearTimeout(mo_timeout);
        //mouseout code here
    }

})(); 
```

此外，您要手动添加很多样式；添加一个应用样式的类怎么样？

# html - 最大高度的div：200px；溢出：自动；可能的 ？

> ID：11392707
> 
> 赞同：1
> 
> 时间：2012-07-09T09:52:55.353
> 
> 标签：html, css

有一个 Div 来显示图像的垂直列表`Scroll-able div`。

```
 <div id="sd" align="center"  style=" max-height: 200px; overflow: auto; " >

      <li><img src="1.jpg" .....
      <li><img src="1.jpg" .....
      <li><img src="1.jpg" .....
      <li><img src="1.jpg" .....
      <li><img src="1.jpg" .....
      <li><img src="1.jpg" .....

      ...
      ...

 </div> 
```

我希望这个 div 在我们更改浏览器的高度或在不同的屏幕尺寸上打开它而不丢失滚动条时自动调整它的高度， `max-height: 100%;`在这里不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:35:46.243

您必须使用**jQuery**来设置 max-height 属性。例如试试这个：

```
$("#sd").height($(window).height()); 
```

或者：

```
$("#sd").css("max-height", $(window).height()) 
```

你也可以做任何算术运算：

```
$("#sd").height($(window).height() / 2);
$("#sd").css("max-height", $(window).height() / 3) 
```

等等

# python - 如何捕获特定的pyodbc错误消息

> ID：11392709
> 
> 赞同：24
> 
> 时间：2012-07-09T09:52:58.543
> 
> 标签：python, odbc, pyodbc

我尝试了以下代码，

```
import pyodbc
try:
    pyodbc.connect('DRIVER={%s};SERVER=%s;DATABASE=%s;UID=%s;PWD=%s' % (driver, server, database, uid, password))
except pyodbc.Error, err:
    logging.warn(err) 
```

我得到的错误消息格式是

```
('HY000', "[HY000] [MySQL][ODBC 5.1 Driver]Access denied for user 'root'@'192.168.2.27' (using password: YES) (1045) (SQLDriverConnect)") 
```

我只想接收错误的消息部分，即

```
Access denied for user 'root'@'192.168.2.27'(using password: YES) 
```

我不知道我是否可以特别捕获错误，例如找不到驱动程序，主机关闭等。

我还尝试将错误捕获为：

```
 except pyodbc.OperationalError, err:
    logging.warn(err)
except pyodbc.DataError, err:
    logging.warn(err)
except pyodbc.IntegrityError, err:
    logging.warn(err)
except pyodbc.ProgrammingError, err:
    logging.warn(err)
except pyodbc.NotSupportedError, err:
    logging.warn(err)
except pyodbc.DatabaseError, err:
    logging.warn(err)
except pyodbc.Error, err:
    logging.warn(err) 
```

但最后一个总是捕捉到错误。

Fruthermore 我看到**pyodbc.Error.message**总是空的。我怎样才能得到错误中的消息。

谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2017-02-09T17:57:09.590

这对我有用。

```
 try:
        cnxn = pyodbc.connect(...)
    except pyodbc.Error as ex:
        sqlstate = ex.args[0]
        if sqlstate == '28000':
            print("LDAP Connection failed: check password") 
```

有不同的 SQLSTATES，您可以使用 if-else 语句来打印出原因。

相似地，

```
 try:
        cnxn = pyodbc.connect(...)
  except pyodbc.Error as ex:
        sqlstate = ex.args[1]
        print(sqlstate) 
```

将为您提供带有描述的错误的第二部分。例如`ex.args[0]`给你`28000`和`ex.args[1]`给`[28000] LDAP authentication failed for user 'user' (24) (SQLDriverConnect)`

然后，您可以在那里使用字符串操作技术来打印出您想要的内容。希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T16:18:42.747

pyodbc 似乎只是包装了底层 ODBC 实现中的错误/异常，因此您不太可能这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-02T22:36:29.613

在 pyodbc 3.0.7 中，它可以很好地捕获 pyodbc.ProgrammingError （可能还有其他错误类型，尽管我没有尝试过）。但是，错误的内容仍然有点神秘，因此可能很难对错误进行更细粒度的处理。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-20T18:40:41.963

op问这个问题已经很久了，但是这里有一段代码可以将pyodbc错误消息解析成可以使用的漂亮Python异常。这也意味着要扩展，我没有处理所有可能的 sqlserver 错误代码。

```
import re
from enum import Enum, IntEnum, unique

class PyODBCError(Exception):
    """
    Handle errors for PyODBC. Offers a error message parser
    to apply specific logic depending on the error raise

    ODBC error identifier: 23000

    pyodbc_error_message (str) -- message raised by PyODBC
        Example:
            [23000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server] \
            Cannot insert explicit value for identity column in table \
            'building' when IDENTITY_INSERT is set to OFF.
            (544) (SQLExecDirectW) \
    """

    error_pattern = re.compile(
        r"\[(?P<error_id>.*?)\] \[(?P<operator>.*?)\]\[(?P<driver>.*?)\]\[(?P<database_type>.*?)\](?P<error_message>.+?(?= \()) \((?P<sql_server_error_id>\d*?)\) \(SQLExecDirectW\)"
    )
    sql_error_code_pattern = re.compile(r"\((?P<sql_server_error_code>\d*?)\) \(SQLExecDirectW\)")
    column_pattern = re.compile(r"column \'(?P<column_name>.+?)\'")
    table_pattern = re.compile(r"table \'(?P<table_name>.+?)\'")
    pyodbc_error_code = 'HY000'

    def __init__(self, pyodbc_error_message: str) -> None:
        self._parse_error_message(pyodbc_error_message)

    def __str__(self) -> str:
        return self.error_message

    def _parse_error_message(self, pyodbc_error_message: str) -> None:
        m = re.match(self.error_pattern, pyodbc_error_message)
        self.operator = m.group('operator')
        self.error_id = m.group('error_id')
        self.driver = m.group('driver')
        self.database_type = m.group('database_type')
        self.error_message = m.group('error_message')
        self.sql_server_error_id = m.group('sql_server_error_id')

    @classmethod
    def get_message(cls, pyodbc_exception: Exception) -> str:
        if pyodbc_exception.args[1] == cls.pyodbc_error_code:
            return pyodbc_exception.args[0]
        else:
            return pyodbc_exception.args[1]

    @classmethod
    def get_pyodbc_code(cls, pyodbc_exception: Exception) -> str:
        if pyodbc_exception.args[1] == cls.pyodbc_error_code:
            return pyodbc_exception.args[1]
        else:
            return pyodbc_exception.args[0]

    @staticmethod
    def get_exception(error_code: int):
        return {
            515: IdentityInsertNull,
            544: IdentityInsertSetToOff,
            2627: PrimaryKeyViolation,
            8114: FailedTypeConversion,
            102: IncorrectSyntax,
            32: InvalidNumberParametersSupplied
        }.get(error_code, DefaultException)

    @classmethod
    def get_sql_server_error_code(cls, pyodbc_code: str, message: str) -> int:
        """
        Parses error message raised by PyODBC and return SQL Server Error Code

        Looks for the following pattern:
            (544) (SQLExecDirectW) -> 544

        Args:
            pyodbc_error_message (str): Error string raised by PyODBC

        Returns:
            (int) - SQL Server Error Code
        """

        if pyodbc_code == cls.pyodbc_error_code:
            return 32
        else:
            m = re.search(cls.sql_error_code_pattern, message)
            if m:
                return int(m.group('sql_server_error_code'))
            else:
                raise ValueError(f"Error raised is not from SQL Server: {message}")

    @classmethod
    def build_pyodbc_exception(cls, pyodbc_exception: Exception):
        pyodbc_code = cls.get_pyodbc_code(pyodbc_exception)
        error_message = cls.get_message(pyodbc_exception)
        error_code = cls.get_sql_server_error_code(pyodbc_code, error_message)
        exception = cls.get_exception(error_code)
        raise exception(error_message)
class IdentityInsertNull(PyODBCError):
    """
    Handle specific PyODBC error related to Null Value Inserted on Identity Column
    """

    def __init__(self, pyodbc_error_message):
        super().__init__(pyodbc_error_message)
        m = re.search(self.table_pattern, self.error_message)
        self.table_name = m.group('table_name')
        m = re.search(self.column_pattern, self.error_message)
        self.column_name = m.group('column_name')

class IdentityInsertSetToOff(PyODBCError):
    """
    Handle specific PyODBC error related to Identity Not Set to On/Off
    """

    def __init__(self, pyodbc_error_message):
        super().__init__(pyodbc_error_message)
        m = re.search(self.table_pattern, self.error_message)
        self.table_name = m.group('table_name')

class FailedTypeConversion(PyODBCError):
    """
    Handle specific PyODBC error related to data type conversion
    """

    def __init__(self, pyodbc_error_message):
        super().__init__(pyodbc_error_message)

class PrimaryKeyViolation(PyODBCError):
    """
    Handle specific PyODBC error related to Primary Key Violation
    """

    def __init__(self, pyodbc_error_message):
        super().__init__(pyodbc_error_message)

class IncorrectSyntax(PyODBCError):
    """
    Handle specific PyODBC error related to incorrect syntax in query
    """

    def __init__(self, pyodbc_error_message):
        super().__init__(pyodbc_error_message)

class DefaultException(PyODBCError):
    """
    Handle default PyODBC errors
    """

    def __init__(self, pyodbc_error_message):
        super().__init__(pyodbc_error_message)

    def __str__(self) -> str:
        return f"{self.sql_server_error_id} - {self.error_message}"

class InvalidNumberParametersSupplied(Exception):
    def __init__(self, error_message) -> None:
        self.message = error_message

    def __str__(self) -> str:
        return self.message 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-02T20:28:45.640

当使用 myodbc 连接到 mssql 时，这将为您提供更清晰易读的错误消息：

```
try:
    cnxn = pyodbc.connect(...)
except pyodbc.Error as ex:
    sqlstate = ex.args[1]
    sqlstate = sqlstate.split(".")
    print(sqlstate[-3]) 
```

# php - 无法在 PHP 中删除文件

> ID：11392717
> 
> 赞同：0
> 
> 时间：2012-07-09T09:53:58.643
> 
> 标签：php, file, quotes, delete-file, unlink

我有一个用于以文本形式存储数据的网站（在获取 db 之前），所以现在我在删除文件时遇到了问题......

该文件的名称中有一个单引号字符，（“I'mHere.txt”），站点文件管理器无法删除此文件，而且越来越烦人......所以我尝试使用 php 删除它：

```
<?php
unlink("I'mHere.txt");
unlink("I\'mHere.txt");
 ?> 
```

它们都不起作用，所以我该怎么做才能删除文件？

编辑：文件是这样创建的：

```
$file=fopen($sentence.'.txt',"w");
fwrite($file,$cont);
fclose($file); 
```

编辑2：我从另一个文件中调用删除代码，不再创建带引号的文件，它就在那里并且不能以任何方式删除，尝试这会导致“找不到文件”错误（路径正确，它有效对于任何没有引号的文件）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:09:04.623

写入文件后是否关闭文件？

```
fclose($filename);

// Then unlink
unlink($filename); 
```

# python - python结构mysql权限

> ID：11392721
> 
> 赞同：2
> 
> 时间：2012-07-09T09:54:08.770
> 
> 标签：python, string-formatting

试图用fabric设置mysql用户权限。

```
run("mysql -u %s -p%s -e 'grant all on %s.* to '%s'@'localhost' identified by 'PASSWORD'" % (user, dbpasswd, account)) 
```

错误

```
TypeError: not enough arguments for format string 
```

任何的想法 ？非常感谢 ！

```
run('mysql -u %s -p%s -e "grant all on %s.* to '%s\'@\'localhost' identified by 'PASSWORD'"' % (user, dbpasswd, account, account))

SyntaxError: unexpected character after line continuation character 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T09:57:40.423

将您的元组更改为`(user, dbpasswd, account, user)`，您应该会很好。发生此错误是因为您有 4 个替换标记 (%s) 但元组中只有 3 个项目。

# c# - 更改查询的值

> ID：11392724
> 
> 赞同：0
> 
> 时间：2012-07-09T09:54:29.580
> 
> 标签：c#, datatable

我有查询我需要更改值，如果值 =“0000-00-00 00:00:00”那么**新值**行 =“没有时间”，如何？

```
dt.Load(cmd.ExecuteReader());
source.DataSource = dt; 
```

所以我用

```
source[2] = (source[2] == "0000-00-00 00:00:00") ? "no time" : source[2]; 
```

但这是错误的，我认为需要使用**while？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:01:40.197

押注更改数据源的查询，但是如果您无权访问该查询，例如您从某些第三方 Web 服务获取数据，假设您不想更改从数据源获取数据的原因（Web 服务 /数据库）您可以在 C# 代码中更改数据表并分配给您的 GUI 控件的数据源。

```
foreach (DataRow dr in dt.Rows)
{
     if (dr[2] == "0000-00-00 00:00:00")
         dr[2] = "No time"; // Use column name instead if possible dr["yourcolumnname"]
}

source.DataSource = dt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:12:05.690

更改为 if 语句：

```
if (source[2] == "0000-00-00 00:00:00") source[2] = "no time."; 
```

# objective-c - 检测 Cocoa 动画是否正在进行（使用 BOOL）以防止同时出现多个动画

> ID：11392729
> 
> 赞同：0
> 
> 时间：2012-07-09T09:54:38.207
> 
> 标签：objective-c, cocoa, animation

在我的应用程序中，我运行了许多动画、移动对象和形状等。许多动画会导致其他对象的动画。该应用程序的一个问题是，如果一个动画正在运行并且您启动另一个涉及当前正在动画的对象之一的动画，那么屏幕会变白/我们会得到意想不到的结果。

我编写了一些示例代码来展示我们正在尝试做的事情：

```
UIButton *button;
BOOL currentlyShowingQuestion;
- (void)viewDidLoad
{
    [self moveButton:button];
    currentlyShowingQuestion = NO;
    [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(hasBoolChanged) userInfo:nil repeats:YES];
}
- (void)moveButton:(UIButton *)buttonToUse {
    currentlyShowingQuestion = YES;
    NSLog(@"moveButton Called!  Yippee!!!!!!!");
    [UIView animateWithDuration:0.5 delay:0.5 options:nil animations:^{
        buttonToUse.frame = CGRectMake(10, 10, 300, 440);
    } completion:^(BOOL finished){
        currentlyShowingQuestion = NO;
    }];
}

-(void)hasBoolChanged {
    if (currentlyShowingQuestion == YES) {
        NSLog(@"Yes");
    }
    else if (currentlyShowingQuestion == NO) {
        NSLog(@"No");
    }
} 
```

我最终实际看到的就像 currentShowingQuestion BOOL 在方法运行时都会立即更改，因此它会更改为 YES 并立即返回 NO。然后动画运行。为什么是这样？订单有什么问题？

任何帮助表示赞赏。对不起代码格式 - 我无法弄清楚这里的语法。

提前致谢，

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:13:33.813

我对 UIView 不太熟悉，但根据文档，可能会在动画完成之前调用完成块。在将 currentShowingQuestion 更改为 NO 之前，尝试添加条件是否已完成是 YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:15:53.127

我真的不明白你试图达到什么目的。在开始时，您启动一​​个计时器来检查布尔值是否已更改。我认为这对这项任务来说有点矫枉过正，但没关系。由于某种原因，您的动画延迟了 0.5 秒，然后您的动画持续时间为 0.5 秒，这非常快，因此您似乎可以立即更改值。

# c# - 需要帮助将列表框项目文本从辅助表单获取到主表单

> ID：11392731
> 
> 赞同：-1
> 
> 时间：2012-07-09T09:55:01.483
> 
> 标签：c#

我一直在互联网上寻找这个并且发现了类似的，但没有一个对我有用。我发现的所有内容都假定列表框位于主窗体而不是辅助窗体上，或者代码适用于旧版本的 C# 或 Visual Studio（我使用的是 VS2008）。

我正在创建一个 Web 浏览器，它在主窗体（称为 frmMyBrowser）上有一个按钮，用于打开一个对话框（frmBookmarks），其中包含一个带有书签 URL 的列表框（lstBookmark）。我需要能够双击一个项目（带有书签的 URL）并将文本粘贴到主窗体的地址栏（cmbAddress）中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T02:21:48.740

我发现如果我在运行时创建窗口，我可以让它工作。如果有人感兴趣，我使用的代码如下。

公共无效 frmMyBrowser_ShowFavorites（对象发送者，EventArgs e）

```
{

        frmFavorites.ShowIcon = false;
        frmFavorites.ShowInTaskbar = false;
        frmFavorites.MinimizeBox = false;
        frmFavorites.MaximizeBox = false;
        frmFavorites.ControlBox = false;
        frmFavorites.Text = "Bookmarks";
        frmFavorites.Width = 500;
        frmFavorites.Height = 350;
        frmFavorites.Controls.Add(lstFavorites);
        frmFavorites.Controls.Add(btnRemoveFavorite);
        frmFavorites.Controls.Add(btnAddFavorite);
        frmFavorites.Controls.Add(btnCloseFavorites);
        frmFavorites.Controls.Add(txtCurrentUrl);
        lstFavorites.Width = 484;
        lstFavorites.Height = 245;
        btnRemoveFavorite.Location = new Point(8, 280);
        btnAddFavorite.Location = new Point(8, 255);
        btnCloseFavorites.Location = new Point(400, 255);
        txtCurrentUrl.Location = new Point(110, 255);
        txtCurrentUrl.Size = new Size(255, 20);
        btnAddFavorite.Text = "Add";
        btnRemoveFavorite.Text = "Remove";
        btnCloseFavorites.Text = "Close";
        txtCurrentUrl.Text = wbBrowser.Url.ToString();
        btnAddFavorite.Click += new EventHandler(btnAddFavorite_Click);
        btnRemoveFavorite.Click += new EventHandler(btnRemoveFavorite_Click);
        frmFavorites.Load += new EventHandler(frmFavorites_Load);
        btnCloseFavorites.Click += new EventHandler(btnCloseFavorites_Click);
        lstFavorites.MouseDoubleClick += new MouseEventHandler(lstFavorites_MouseDoubleClick);
        frmFavorites.Show();
}

public void btnCloseFavorites_Click(object sender, EventArgs e)
{
if (lstFavorites.Items.Count > 0)
{
using (StreamWriter writer = new System.IO.StreamWriter(@Application.StartupPath + "\\favorites.txt"))
{
for (int i = 0; i < lstFavorites.Items.Count; i++)

{

writer.WriteLine(lstFavorites.Items[i].ToString());

}

writer.Close();
}

}
    frmFavorites.Hide();
}

public void btnAddFavorite_Click(object sender, EventArgs e)

    {
        string strFavoriteAddress = wbBrowser.Url.ToString();
        if (!lstFavorites.Items.Contains(strFavoriteAddress))
        {
            lstFavorites.Items.Add(strFavoriteAddress);
            MessageBox.Show("Favorite Added", "Message");

        }
        else if (lstFavorites.Items.Contains(strFavoriteAddress))
        {   
            MessageBox.Show("This site already exists in your Favorites list!", "Error");

        }
        else 
        {

        }

    }
    public void btnRemoveFavorite_Click(object sender, EventArgs e)
    {
        try
        {
            lstFavorites.Items.RemoveAt(lstFavorites.SelectedIndices[0]);

        }

        catch
        {
            MessageBox.Show("You need to select an item", "Error");

        }

    }
    public void frmFavorites_Load(object sender, EventArgs e)
    {
        try
        {
            using (StreamReader reader = new System.IO.StreamReader(@Application.StartupPath + "\\favorites.txt"))
            {
                while (!reader.EndOfStream)
                {
                    for (int i = 0; i < 4; i++)
                    {
                        string strListItem = reader.ReadLine();
                        if (!String.IsNullOrEmpty(strListItem))
                        {
                            lstFavorites.Items.Add(strListItem);
                        }
                    }

                }
                reader.Close();
            }

        }
        catch
        {
            MessageBox.Show("An error has occured", "Error");
        }

    }
    private void lstFavorites_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        string strSelectedAddress = lstFavorites.Text.ToString();
        cmbAddress.Text = strSelectedAddress;
        wbBrowser.Navigate(strSelectedAddress);
        frmFavorites.Hide();
    } 
```

# wpf - Caliburn.Micro：用户控件之间的通信

> ID：11392740
> 
> 赞同：1
> 
> 时间：2012-07-09T09:55:24.627
> 
> 标签：wpf, caliburn.micro

我正在构建我的第一个 Caliburn WPF 应用程序，我发现自己遇到了以下问题。

我有一个父视图，加载了两个用户控件：搜索和结果。在搜索用户控件上单击搜索按钮时，我不想在结果用户控件中加载结果。

**父视图：**

```
<ContentControl x:Name="SearchViewModel"/>
<ContentControl x:Name="ResultsViewModel"/> 
```

**父虚拟机**

```
 [Export(typeof(IMainViewModel))]
public class ParentViewModel : Screen, IMainViewModel{

public SearchViewModel SearchViewModel { get; set; }
public ResultsViewModel ResultsViewModel { get; set; }
public ParentViewModel()
{
    SearchViewModel = new SearchViewModel();
    ResultsViewModel = new ResultsViewModel();
}
}
```

**搜索视图**

```
<TextBox x:Name="Term"/>        
<Button Content="Search" x:Name="Search"/> 
```

**搜索虚拟机**

```
 public class SearchViewModel : PropertyChangedBase
{
        private string _term;

        public string Term
        {
            get { return _term; }
            set
            {
                _instrumentId = value;
                NotifyOfPropertyChange(() => _term);
            }
        }

        public void Search()
        {
            //Call WCF Service
            //Send results to results user control?
        }
} 
```

**那么实际上我如何使用 caliburn micro 在不同的用户控件/视图模型之间传递或访问数据/方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T09:57:52.600

您可以通过[Caliburn Micro Event Aggregator](http://devlicio.us/blogs/rob_eisenberg/archive/2011/05/30/caliburn-micro-soup-to-nuts-part-8-the-eventaggregator.aspx)使用事件。您可以在一个视图模型中发布事件并在另一个视图模型中订阅该事件。这使模型保持解耦 - 唯一的耦合由事件本身完成 - 您可以在其中存储要传输的数据。

# cakephp - 找不到组控制器

> ID：11392745
> 
> 赞同：0
> 
> 时间：2012-07-09T09:55:39.467
> 
> 标签：cakephp, model, controller

我正在制作我的 CakePHP 项目的管理部分。我已经成功制作了登录-注销模块。现在我正在制作一个名为“用户组”的模块，其中列出了不同的用户组。为此，我制作了一个`GroupsController.php`文件。但是当我将 URL 加载为 localhost/testblog/groups 时，我收到此错误：

```
Error: GroupsController could not be found.

Error: Create the class GroupsController below in file: 
```

admin\Controller\GroupsController.php

```
<?php
class GroupsController extends AppController {
}

Notice: If you want to customize this error message, create admin\View\Errors\missing_controller.ctp 
```

请问谁能告诉我解决方案？我已经搜索了很多，但无法得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:53:59.000

你的文件名应该是 groups_controller.php

# c# - 是否有任何类似于 Silverlight 的 AutomationFactory for .NET 的类？

> ID：11392748
> 
> 赞同：2
> 
> 时间：2012-07-09T09:55:48.847
> 
> 标签：c#, .net, silverlight, events, com

我在 Silverlight 中找到了[AutomationFactory](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.automation.automationfactory%28v=vs.95%29.aspx)类，当您想使用 COM 对象订阅事件时，它非常有用：

```
AutomationEvent quitEvent = AutomationFactory.GetEvent(word,"Quit");
quitEvent.EventRaised += new EventHandler<AutomationEventArgs>(quitEvent_EventRaised); 
```

*   你知道任何可以从**.NET**中使用的类似类吗？
*   您知道**使用自动化绑定事件**的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:16:43.353

我很确定有一个，所以经过一番搜索后，我找到了 .Net 4.0 的列表，其中包括 System.Windows.Automation；IIRC 应该是 Silverlight 的 AutomationFactory 的基础。[系统.Windows.自动化](http://msdn.microsoft.com/en-us/library/system.windows.automation "系统.Windows.自动化")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T13:34:50.917

在 .Net 4.0 中似乎没有`AutomationFactory`模拟但您可以使用 System.Type 将其存档：

```
 var type = Type.GetTypeFromProgID("Excel.Application");  
 var obj = Activator.CreateInstance(type); 
 obj.InvokeMember("Visible", BindingFlags.SetProperty, null, obj, parameter); 
```

# checkbox - 时间：2019-04-01 标签：c#programatically created list event-handler howto

> ID：11392756
> 
> 赞同：0
> 
> 时间：2012-07-09T09:56:12.177
> 
> 标签：checkbox, event-handling, windows-phone

谁能告诉我如何在以编程方式创建的列表中连接复选框的单击事件？到目前为止，我只看到了连接静态创建而不是从代码动态分配的对象的事件的示例。

该列表的创建如下面的片段中所述：

```
namespace CustomListApp
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            for (int i = 1; i <= 10; ++i)
            {
                CustomListBoxItem clbi = new CustomListBoxItem();
                clbi.Title.Text = "This is item " + i;
                clbi.Condition.IsChecked = i % 2 == 0;
                CustomListBox.Items.Add(clbi);
            }
        }
    }
} 
```

并且 CustomListBoxItem 具有以下结构：

```
<UserControl x:Class="CustomListApp.CustomListBoxItem"[...]>

    <Grid x:Name="ListBoxItemGrid" Background="{StaticResource PhoneChromeBrush}" Height="65">
        <CheckBox x:Name="Condition" Height="67" HorizontalAlignment="Right" VerticalAlignment="Top" Width="65" Click="Condition_Click" />
        <TextBlock x:Name="Title" Height="65" HorizontalAlignment="Left" Margin="84,0,0,0" Text="TextBlock" VerticalAlignment="Center" Width="294" />
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:40:56.690

也许您可以创建您想要添加到列表框中的元素类型。然后你可以像这样检查点击：

```
<YOUR DATA TYPE> data = (sender as ListBox).SelectedItem as <YOUR DATA TYPE>; 
```

然后您可以使用这些数据。我希望我能帮助你回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:46:20.613

你的意思是喜欢

```
cbi.Condition.Click += new_click_handler; 
```

new_click_handler 是您要添加的新点击处理程序？

但是您是否*需要*以编程方式为每个项目添加一个新的处理程序？`Condition_Click`您不能只引用您在 xaml 中已有的处理程序中的项目吗？

# c++ - 单元测试时操作迭代器

> ID：11392757
> 
> 赞同：1
> 
> 时间：2012-07-09T09:56:12.233
> 
> 标签：c++, googlemock

我依赖于使用以下结构的 ac api（函数名称只是一个示例）：

```
getRoot(FolderHandle* out)
getFirstChildFolder(FolderHandle in, FolderHandle* out)
getNextFolder(FolderH in, FolderHandle* out)
getChildFolder(FolderH in, FolderHandle* out)
getProperties(FolderH in, PropertiesH* out)
getChildFolder(FolderH in, FolderH* out)
getName(PropertiesH in, char** out)
getFile(FolderH in, FileH* out)
getNextFile(FileH in, FileH* out)
getProperties(FileH in, PropertiesH* out) 
```

所以我首先调用 getRoot 来获取根的文件夹句柄。为了获得根文件夹中第一个文件的句柄，我调用 getFile() 并传入文件夹句柄。要获取此级别的第二个和后续文件，我调用 getNextFile，传入前一个文件句柄。

我以一组 C++ 接口的形式包装了它，如下所示：

```
class IEntry
{
public:
    ...
    virtual IFolder* root() = 0;    
};

class IFolder
{
public:
    ...
    typedef Iterator<IFile, FolderH, FileH> FileIterator;
    virtual FileIterator filesBegin() const = 0;
    virtual FileIterator filesEnd() const = 0;
};

class File
{
public:
    ...    
    virtual IProperties* properties() = 0;
};

class Properties
{
public:
    ...
    virtual std::string name() = 0;
}; 
```

在单元测试中，我需要做的就是使用 IEntry、IFolder、IFile 等的 Google Mock 实现，这非常方便。此外，接口以更易于理解和使用的方式组织来自 c api 的功能。特定接口的实现包装了相关的句柄。

我使用迭代器将 getFile 和 getNextFile 之类的函数调用联系在一起，在这种情况下，它们会遍历文件夹中的文件。api中有很多这样的函数对，所以我使用一个名为Iterator的模板类来创建我的C++风格的迭代器。

我实际上使用的是 std::shared_ptrs，而不是普通的指针。

所以这里是一个单元测试的例子：

```
std::string a(IEntry& e) 
{
    std::shared_ptr<IFolder> f = e.root();
    return f->properties()->name();
}

TEST (FooTest, a) 
{
    MockEntry e;
    std::shared_ptr<MockFolder> f(new MockFolder());
    std::shared_ptr<MockProperties> p(new MockProperties());

    EXPECT_CALL(e, root()).WillOnce(testing::Return(f));
    EXPECT_CALL(*f, properties()).WillOnce(testing::Return(p));
    EXPECT_CALL(*p, name()).WillOnce(testing::Return("Root"));

    EXPECT_EQ(a(e), "Root");
} 
```

然而，当涉及到迭代器的使用时，事情变得更加棘手。这是我在这种情况下使用的方法：

```
std::string b(IEntry& e)
{
    std::shared_ptr<IFolder> folder = e.root();
    IFile::FileIterator i = folder->filesBegin();
    if(i!=f->filesEnd())
    {
        return i->properties()->name();
    }
    else
    {
        return "";
    }
}

TEST (FooTest, b) 
{
    MockEntry e;
    std::shared_ptr<MockFolder> f(new MockFolder());
    loadFileIteratorWithZeroItems(f);
    loadFileIteratorEnd(f);
    std::shared_ptr<MockProperties> p(new MockProperties());

    EXPECT_CALL(e, root()).WillOnce(testing::Return(f));
    EXPECT_EQ(b(e), "");
} 
```

该测试正在测试 else 子句。我还有另外两个测试测试其余代码（一个文件和多个文件）。

函数 loadFileIteratorWithZeroItems 正在操作迭代器的内部结构，以便迭代零个项目。loadFileIteratorEnd 设置 filesEnd() 的返回值。这是 loadFileIteratorWithZeroItems：

```
void loadFileIteratorWithZeroItems (std::shared_ptr<MockFolder> folder)
{
    std::shared_ptr<MockFile> file(new MockFile());
    std::shared_ptr<MockFileFactory> factory(new MockFileFactory());
    std::shared_ptr<MockFileIterator> internalIterator(new MockFileIterator());
    FolderH dummyHandle = {1};

    EXPECT_CALL(*internalIterator, getFirst(testing::_,testing::_)).WillOnce(testing::Return(false));
    MockFolder::FileIterator iterator = MockFolder::FileIterator(factory,internalIterator,dummyHandle);

    EXPECT_CALL(*folder, filesBegin()).WillOnce(testing::Return(iterator));
} 
```

工厂用于创建迭代器指向的项目。在单元测试的情况下，这是一个模拟版本。内部迭代器是函数 getFile() 和 getNextFile() 以及所有此类对的包装器，带有接口 getFirst() 和 getNext()。

我还有名为 loadFileIteratorWithOneItem 和 loadFileIteratorWithTwoItems 的函数。

任何人都可以建议一种更好的方法来测试上面的函数 b 吗？

我的设计从根本上被剥削了吗？迭代器实现有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:24:30.523

在我看来，您实际上并没有充分发挥模拟的潜力。要`b`在这种情况下进行测试，我只需使用以下测试用例：

```
TEST (FooTest, b) 
{
    MockEntry e;
    MockFolder f;
    IFile::FileIterator it; // I don't know how you construct one,
                            // just make sure that it == it

    ON_CALL(e, root()).WillByDefault(Return(&f));
    ON_CALL(f, filesBegin()).WillByDefault(Return(it));
    ON_CALL(f, filesEnd()).WillByDefault(Return(it));

    EXPECT_CALL(e, root()).Times(1);
    EXPECT_CALL(f, filesBegin()).Times(1);
    EXPECT_CALL(f, filesEnd()).Times(1);

    EXPECT_EQ(b(e), "");
} 
```

在我看来，这是使用模拟的最优雅的方法。很清楚正在发生什么，并且您不依赖任何其他代码来设置行为。这*仅*测试函数的 else 子句`b`。

# android - 如何在 android 上使用 Facebook 意图？

> ID：11392758
> 
> 赞同：1
> 
> 时间：2012-07-09T09:56:13.073
> 
> 标签：android, facebook, android-intent

为了在 facebook 上分享帖子（也是 gmail ，sms ...），我使用了

```
public class ShareActivity extends Activity {

    // the button + the editText
    Button button= (Button) findViewById(R.id.share);
    EditText text= (EditText)findViewById(R.id.edittext);   

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_share);          

        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent intent = new Intent(Intent.ACTION_SEND);
                // type of intent 
                intent.setType("text/plain");
                intent.putExtra(Intent.EXTRA_TEXT, text.getText().toString());
                ShareActivity.this.startActivity(Intent.createChooser(intent, "Share :  "));
            }
        });
    }      
} 
```

但是当我开始我的活动时，它意外停止了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:31:17.183

最终代码：

公共类 ShareActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_share);     

 // the button + the editText
    Button button= (Button) findViewById(R.id.share);
    final EditText text= (EditText)findViewById(R.id.edittext);

    button.setOnClickListener(
            new OnClickListener() {
                public void onClick(View v) {
                Intent intent = new Intent(Intent.ACTION_SEND);
                    // type of intent 
                        intent.setType("text/plain");
                        intent.putExtra(Intent.EXTRA_TEXT, text.getText().toString());
                        ShareActivity.this.startActivity(Intent.createChooser(intent, "Share :  "));
                }
                }
        );

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:14:36.797

通话`text= (EditText)findViewById(R.id.edittext);`后放置此线路。`setContentView(R.layout.activity_share);`

# android - 应用程序在调用 Web 服务期间关闭

> ID：11392759
> 
> 赞同：0
> 
> 时间：2012-07-09T09:56:13.657
> 
> 标签：android

我正在编写一个应用程序，它必须从 Web 服务中获取一些 json 对象。它运行良好。但是，如果无法下载这些 json 对象，我想找到一种方法来避免用户。所以，我使用了一个虚假的 URL。现在我的应用程序强制关闭而不避开用户。

来电：

```
/*
 * Async call to fill the category spinner
 */
private class CallCategory extends AsyncTask<Void,Void,Void>{
private ProgressDialog dialog;

protected void onPreExecute() {
    this.dialog = ProgressDialog.show(ApPictureActivity.this, "Chargement", "Récupération des catégories...", true);
}
    protected void onPostExecute(Void v) {
        dialog.cancel();
        Log.i("fill the spiner", _ListCategory.toString());
        if(!_ListCategory.isEmpty())
            FillSpinner();
        else
        {
            AlertDialog alertDialog = new AlertDialog.Builder(ApPictureActivity.this).create();
            alertDialog.setTitle(getResources().getString(R.string.errorCategoryTitle));
            alertDialog.setMessage(getResources().getString(R.string.errorCategoryMessage));
            //add "Ok button"
             alertDialog.setButton("OK", new DialogInterface.OnClickListener() {  
                  public void onClick(DialogInterface dialog, int which) {  
                    return;  
                } }); 
            alertDialog.show();
            //log
            Log.i("List category empty", "No categories");
            //ApPictureActivity.this.finish();
        }
    }

    protected Void doInBackground(Void... params) {
        try{
        _ListCategory = ServerCall.GetCategory();}
        catch (Exception e) {
            Log.i("load categories error",e.toString());
        }
        return null;
    }
} 
```

和 ServerCall.GetCategory 方法：

```
public static List<Category> GetCategory (){
    try{
        Log.i("Call", "Call categories");
        String url =  "http://appicture.cloudapp.net/API/yoyo";
        RestClient client = new RestClient(url);

        //Call
        client.Execute(RequestMethod.GET);

        if(client.getResponseCode() == 200){

        //Get the response
        String response = client.getResponse();

        //build list of categories
        Type listType = new TypeToken<ArrayList<Category>>() {
    }.getType();
    List<Category> categories = new Gson().fromJson(response, listType);

     Log.i("Response", response.toString());
     return  categories;
    }   
    }
    catch (Exception e) {
        Log.i("Error", e.toString());
    }
    return null;
} 
```

Logcat 异常：

```
07-09 09:37:49.446: E/AndroidRuntime(4322): Uncaught handler: thread main exiting due to uncaught exception
07-09 09:37:49.455: E/AndroidRuntime(4322): java.lang.NullPointerException
07-09 09:37:49.455: E/AndroidRuntime(4322):     at ApPicture.Android.ApPictureActivity$CallCategory.onPostExecute(ApPictureActivity.java:299)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at ApPicture.Android.ApPictureActivity$CallCategory.onPostExecute(ApPictureActivity.java:1)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at android.os.AsyncTask.finish(AsyncTask.java:417)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at android.os.Looper.loop(Looper.java:123)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at android.app.ActivityThread.main(ActivityThread.java:4363)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at java.lang.reflect.Method.invoke(Method.java:521)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-09 09:37:49.455: E/AndroidRuntime(4322):     at dalvik.system.NativeStart.main(Native Method) 
```

我确切地说此代码使用正确的 URL。所以这不是实施问题。也许一个异常没有捕获。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:38:52.660

我跟随 dj aquell adivies 并通过以下方式更改我的 onPostExecute 方法：

```
 protected void onPostExecute(Void v) {
        dialog.cancel();
        if(_ListCategory != null){
            Log.i("fill the spiner", _ListCategory.toString());
            FillSpinner();}
        else
        {
            AlertDialog alertDialog = new AlertDialog.Builder(ApPictureActivity.this).create();
            alertDialog.setTitle(getResources().getString(R.string.errorCategoryTitle));
            alertDialog.setMessage(getResources().getString(R.string.errorCategoryMessage));
            //add "Ok button"
             alertDialog.setButton("OK", new DialogInterface.OnClickListener() {  
                  public void onClick(DialogInterface dialog, int which) {  
                        //log
                        Log.i("List category empty", "No categories");
                        ApPictureActivity.this.finish();
                } }); 
            alertDialog.show();
        }
    } 
```

# android - 拉动刷新上下刷新android中的动态表格布局

> ID：11392762
> 
> 赞同：0
> 
> 时间：2012-07-09T09:56:28.620
> 
> 标签：android

我在我的活动中添加动态视图，它位于`TableLayout`.how to do pullup 和 pulldown refresh 下。

```
TableLayout tl =(TableLayout)findViewById(R.id.myTableLayout);
LayoutInflater vi =(LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:01:11.790

关注这个问题 :) 它肯定会帮助你 :) 祝你好运

[滚动视图上的 Android PullTo 刷新](https://stackoverflow.com/questions/11373362/android-pullto-refresh-on-scrollview/11391896#11391896)

# java - Java rmi 代理代码示例

> ID：11392763
> 
> 赞同：0
> 
> 时间：2012-07-09T09:56:28.907
> 
> 标签：java, proxy, rmi

我不太清楚如何在 java rmi 中创建代理。我的客户端 A 成功调用了服务器 B（单播）。现在我希望客户端 A 调用代理服务器 C，它调用服务器 B。我如何创建代理？我需要一个代码示例来适应我的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:08:32.423

如果您只想代理一个远程接口，这很容易：只需编写它的另一个实现，通过 RMI 查找并调用实际实现，并将自身绑定到客户端可以查找的注册表。

如果你想为任意远程接口做这件事，相信我，如果你想让代理做任何有用的事情，比如访问控制、SSL等。有商业产品可以做到这一点，我卖了其中一个。

# android - 根据密度和屏幕尺寸有条件地使用 Android 可绘制资源

> ID：11392764
> 
> 赞同：2
> 
> 时间：2012-07-09T09:56:39.250
> 
> 标签：android, size, drawable, dpi

我想在`ImageButton`各种设备上创建一个看起来不错且大小合适的 Android 应用程序。我知道可以在 Android drawables 中内置多个级别的条件，最简单的方法是创建文件夹，例如

```
drawable-ldpi
drawable-mdpi
drawable-hdpi
drawable-xhdpi 
```

对于不同密度的位图。但是，在 mdpi 手机上看起来不错的按钮在 mdpi 平板电脑上看起来很笨拙，我宁愿为该应用程序使用 hdpi 位图。有一种方法可以使用名为的文件夹

```
drawable-small-ldpi
drawable-normal-ldpi
drawable-large-ldpi
drawable-xlarge-ldpi
drawable-small-mdpi
drawable-normal-mdpi ... 
```

等等如您所见，有 16 个不同的文件夹来覆盖每个密度的条件屏幕尺寸。我可能可以通过使用默认值来减少这种情况

```
drawable-ldpi
drawable-large-ldpi
drawable-xlarge-ldpi ... 
```

但我的意图是将相同的可绘制对象用于一种密度的大屏幕和超大屏幕，就像上面密度的小屏幕和普通屏幕一样。我觉得这种方法在APK中是浪费资源空间。有没有办法创建包含目标图像的单个可绘制文件夹：

*   小型低密度设备
*   大型低密度和小型中密度设备
*   大型中密度和小型高密度设备
*   大型高密度和小型超高密度设备
*   大型超高密度设备？

或者，是否有另一种方法可以根据设备大小和设备密度断言条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:39:01.783

取自[http://developer.android.com/guide/topics/resources/providing-resources.html#AliasResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AliasResources)：

“当您有一个资源想要用于多个设备配置（但不想作为默认资源提供）时，您不需要将同一资源放在多个替代资源目录中。相反，您可以（在某些情况下）创建一个替代资源，作为保存在默认资源目录中的资源的别名。”

# python - 使用父指针删除二叉搜索树

> ID：11392773
> 
> 赞同：4
> 
> 时间：2012-07-09T09:57:11.670
> 
> 标签：python, tree, binary-search-tree, parent

我已经尝试解决在线挑战 9 天了。我有一个重复 100,000 次的在线插入删除，我需要找到其中的中位数。我尝试了两个堆，但实现随机删除不起作用。我现在开始使用二叉搜索树，因为它们似乎在 2 秒内在我的计算机上插入和删除了 100,000 个数据。我正在研究 python，我需要在 16 秒内运行。

我已经在线检查了解决方案，但完全不能满足我的需要。我发现在插入和删除时计算中位数可能是一个好策略。这我写了两个方法来获得一个节点的顺序后继或前驱。

*问题是我认为是 - 在递归删除期间不正确地分配父指针。*

我尝试了两种技术，但都效果不佳，如果我能得到一些帮助，我将不胜感激！

编码：

```
import sys
class BSTNode:
    def __init__(self,x,parent):
        self.data = x
        self.left = None
        self.right = None
        self.count = 1
        self.parent = parent

def delete(x,T):
    if T is None:
        print('Element Not Found')
    elif x<T.data:
        T.left = delete(x,T.left)
    elif x>T.data:
        T.right = delete(x,T.right)
    elif T.left and T.right:
        TempNode = findMin(T.right)
        T.data = TempNode.data
        T.right = delete(TempNode.data,T.right)
    else:
        if T.left is None:
            T = T.right
        elif T.right is None:
            T = T.left
    return T

def findMin(T):
    if T.left:
        return findMin(T.left)
    else:
        return T

def insert(x,T,parent=None):
    if T is None:
        T = BSTNode(x,parent)
    elif x<T.data:
        T.left = insert(x,T.left,T)
    elif x>T.data:
        T.right = insert(x,T.right,T)
    else:
        T.count = T.count + 1
    return T

def inorder(T):
    if T is None:
        return
    else:
        inorder(T.left)
        b = back(T)
        if b:
            print("back:",b.data)
        print(T.data)
        n = next(T)
        if n:
            print("next:",n.data)
        inorder(T.right)

def preorder(T,i=0):
    if T is None:
        return
    else:
        for j in range(i):
            sys.stdout.write("    ")
        print(T.data)
        preorder(T.left,i+1)
        preorder(T.right,i+1)

def next(node):
    if node is None:
        return
    if node.right:
        n = node.right
        while n.left:
            n = n.left
        return n
    else:
        n = node
        while n.parent and n.parent.right is n:
            n = n.parent
        if n.parent and n.parent.left is n:
            return n.parent
        else:
            return

def back(node):
    if node is None:
        return
    if node.left:
        n = node.left
        while n.right:
            n = n.right
        return n
    else:
        n = node
        while n.parent and n.parent.left is n:
            n = n.parent
        if n.parent and n.parent.right is n:
            return n.parent
        else:
            return

T = None
T = insert(7,T)
T = insert(4,T)
T = insert(2,T)
T = insert(1,T)

T = insert(13,T)
T = insert(15,T)
T = insert(16,T)
T = insert(6,T)

T = insert(5,T)
T = insert(3,T)
T = insert(11,T)
T = insert(14,T)

T = insert(12,T)
T = insert(9,T)
T = insert(8,T)
T = insert(10,T)

T = delete(11,T)
T = delete(12,T)
T = delete(13,T)
T = delete(8,T)
preorder(T)
inorder(T) 
```

输出

```
7
    4
        2
            1
            3
        6
            5
    14
        9
            10
        15
            16
1
('next:', 2)
('back:', 1)
2
('next:', 3)
('back:', 2)
3
('next:', 4)
('back:', 3)
4
('next:', 5)
('back:', 4)
5
('next:', 6)
('back:', 5)
6
('next:', 7)
('back:', 6)
7
('next:', 9)
9
('next:', 10)
('back:', 9)
10
('next:', 12)
('back:', 10)
14
('next:', 15)
('back:', 14)
15
('next:', 16)
('back:', 15)
16 
```

预期 - 9 的后面是 7

我的答案

```
def delete(x,T,parent=None):
    if T is None:
        print('Element Not Found')
    elif x<T.data:
        T.left = delete(x,T.left,T)
    elif x>T.data:
        T.right = delete(x,T.right,T)
    elif T.count==1:
        # 2 CHILDREN
        if T.left and T.right:
            TempNode = findMin(T.right)
            T.data = TempNode.data
            T.right = delete(TempNode.data,T.right,T)
        # 0 CHILDREN
        elif T.left is None and T.right is None:
            T = None
        # 1 CHILDREN
        elif T.right is not None:
            T = T.right
            T.parent = parent
        elif T.left is not None:
            T = T.left
            T.parent = parent
    else:
        T.count = T.count - 1
    return T 
```

现在

```
9
    4
        2
            1
            3
        5
    14
        10
        15
            16
1 (2) 
('next:', 2)
('back:', 1)
2 (4) 
('next:', 3)
('back:', 2)
3 (2) 
('next:', 4)
('back:', 3)
4 (9) 
('next:', 5)
('back:', 4)
5 (4) 
('next:', 9)
('back:', 5)
9  
('next:', 10)
('back:', 9)
10 (14) 
('next:', 14)
('back:', 10)
14 (9) 
('next:', 15)
('back:', 14)
15 (14) 
('next:', 16)
('back:', 15)
16 (15) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:29:30.153

您似乎没有在例程之后和部分更新 T的父`T = T.right`指针。另一种选择可能是在您替换左或右孩子时更新父指针。我认为在整个代码中始终遵循这两种约定中的任何一种都必须解决您的问题。`T = T.left``else:``delete(x,T):`

# sql - IN SQL 运算符

> ID：11392780
> 
> 赞同：-1
> 
> 时间：2012-07-09T09:57:50.470
> 
> 标签：sql

如何修改此查询？

```
SELECT column_a,  
  ( SELECT GROUP_CONCAT(column_b) 
    FROM table_b 
    WHERE column_b IN (main_tbl.column_a) ) AS alias_a   
FROM table_a main_tbl 
```

假设 column_a 的值为 1,2,3。

上述查询的输出与此类似：

```
SELECT column_a,  
  ( SELECT GROUP_CONCAT(column_b) 
    FROM table_b 
    WHERE column_b IN ('1,2,3') ) AS alias_a   
FROM table_a main_tbl 
```

我需要的是：

```
SELECT column_a,  
  ( SELECT GROUP_CONCAT(column_b) 
    FROM table_b 
    WHERE column_b IN (1,2,3) ) AS alias_a   
FROM table_a main_tbl 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:11:31.547

首先，您应该**强烈**考虑修改您的表结构。我看不出有任何理由将整数列表作为字符串存储在关系数据库中，这违背了关系数据库的要点。

但是，您可以使用`LIKE`.

```
SELECT column_a,  
  ( SELECT GROUP_CONCAT(column_b) 
    FROM table_b 
    WHERE CONCAT(',', main_tbl.column_a, ',') LIKE CONCAT('%,', column_b, ',%') ) AS alias_a   
FROM table_a main_tbl 
```

不理想，但它有效。[SQL Fiddle](http://sqlfiddle.com/#!2/a88ef/3)示例

# java - 将数据从另一个 android 应用程序插入数据库

> ID：11392784
> 
> 赞同：0
> 
> 时间：2012-07-09T09:57:53.773
> 
> 标签：java, android, android-intent

将数据从另一个应用程序数据库插入到当前应用程序数据库。有什么例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:05:45.473

我建议您可以通过两种方式来实现这一目标。

1.  您可以将数据库保存在外部存储中并从那里访问它。见[这里](http://developer.android.com/guide/topics/data/data-storage.html)。
2.  您可以将数据库保存在内部应用程序存储中并通过[内容提供程序](http://developer.android.com/guide/topics/providers/content-providers.html)访问它。

**编辑**我建议使用内容提供者的第二种方式，因为它是推荐的方式，而且它也更安全。如果您将数据库保存到外部存储中，则用户可以访问和修改它，这可能会导致麻烦。

# java - 将文件从一个位置复制到另一个位置

> ID：11392797
> 
> 赞同：0
> 
> 时间：2012-07-09T09:58:57.033
> 
> 标签：java, spring, spring-mvc

想在 Spring MVC Web 应用程序中将文件从一个位置复制到另一个位置，如何在 Web 应用程序中配置路径和读取路径。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:37:15.823

There is a tag in your web.xml (or must be) that you can specify where your spring configurations are. The tag is < context-param >

Here I give you an example:

```
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>
        /WEB-INF/applicationContext-hibernate.xml
        /WEB-INF/spring/applicationContext-security.xml
    </param-value>
</context-param> 
```

The former configuration is in the WEB-INF folder,
and the latter is in the WEB-INF/spring (as you may have noticed).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:51:29.593

尝试使用[Apache Commons IO FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)

# ffmpeg - 如何在命令行上使用 FFmpeg 将 *.flv 文件转换为 *.ts 文件？

> ID：11392802
> 
> 赞同：2
> 
> 时间：2012-07-09T09:59:09.840
> 
> 标签：ffmpeg, flv

如何在命令行上使用 FFmpeg 将 *.flv 文件转换为 *.ts 文件？有这方面的文件吗？

最好的问候，Defonds

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:36:32.140

`ffmpeg -i abc.flv abc.ts` 这将生成带有 mpeg2video 和 mp2 音频的 .ts。使用 h264 视频生成

```
ffmpeg -i abc.flv -vcodec libx264 abc.ts 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-14T05:50:38.277

如果你不想编码，你可以使用这个：“ffmpeg -i input.flv -c copy -bsf h264_mp4toannexb output.ts”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-15T21:06:19.527

要获得 .ts 视频，您需要使用 h264 对视频进行编码，而使用 ffmpeg 的最佳方法是通过 libx264。如果您想要音频，请务必使用 aac 对音频进行编码。该命令看起来像这样

```
ffmpeg -i in.flv -vcodec libx264 -acodec aac out.ts 
```

# c++ - 如何解码包数据，包分析

> ID：11392804
> 
> 赞同：0
> 
> 时间：2012-07-09T09:59:12.227
> 
> 标签：c++, network-programming, udp, winsock, packets

我的项目需要帮助。我不擅长这个。这是我的服务器接收器。此编码是为物理 PC 完成的。基本上物理PC中的这种编码是从虚拟接收器接收数据包。有用。但不知何故，我在解码数据包信息时遇到了问题，我对此一无所知。

```
#define HAVE_REMOTE
#define MAX_BUF_SIZE 1024
#define snprintf _snprintf
#define ETH_ALEN 6
#define IP_ALEN 4
#define ARP_REQUEST 1
#define ARP_REPLY 2

#include <stdlib.h>
#include <stdio.h>
#include <winsock2.h>
#include <pcap.h>

#pragma comment(lib, "wpcap.lib")
#pragma comment(lib, "Ws2_32.lib")

// A sample of the select() return value
int recvfromTimeOutUDP(SOCKET socket, long sec, long usec)
{
  // Setup timeval variable
  struct timeval timeout;
  struct fd_set fds;

  timeout.tv_sec = sec;
  timeout.tv_usec = usec;
  // Setup fd_set structure
  FD_ZERO(&fds);
  FD_SET(socket, &fds);
  // Return value:
  // -1: error occurred
  // 0: timed out
  // > 0: data ready to be read
  return select(0, &fds, 0, 0, &timeout);
}

int main(int argc, char **argv)
{
  WSADATA            wsaData;
  SOCKET             ReceivingSocket;
  SOCKADDR_IN        ReceiverAddr;
  int                Port = 5150;
  char          ReceiveBuf[6000];
  int                BufLength = 6000;
  SOCKADDR_IN        SenderAddr;
  int                SenderAddrSize = sizeof(SenderAddr);
  int                ByteReceived = 5, SelectTiming, ErrorCode;
  char ch = 'Y';

 // Initialize Winsock version 2.2
 if( WSAStartup(MAKEWORD(2,2), &wsaData) != 0)
 {
     printf("Server: WSAStartup failed with error %ld\n", WSAGetLastError());
     return -1;
 }
 else
       printf("Server: The Winsock DLL status is %s.\n", wsaData.szSystemStatus);

       // Create a new socket to receive datagrams on.
       ReceivingSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);

       if (ReceivingSocket == INVALID_SOCKET)
       {
         printf("Server: Error at socket(): %ld\n", WSAGetLastError());
         // Clean up
         WSACleanup();
         // Exit with error
         return -1;
        }
        else
        printf("Server: socket() is OK!\n");

        // Set up a SOCKADDR_IN structure that will tell bind that we
        // want to receive datagrams from all interfaces using port 5150.

        // The IPv4 family
        ReceiverAddr.sin_family = AF_INET;
        // Port no. 5150
        ReceiverAddr.sin_port = htons(Port);
        // From all interface (0.0.0.0)
        ReceiverAddr.sin_addr.s_addr = htonl(INADDR_ANY);

        // Associate the address information with the socket using bind.
        // At this point you can receive datagrams on your bound socket.
        if (bind(ReceivingSocket, (SOCKADDR *)&ReceiverAddr, sizeof(ReceiverAddr)) == SOCKET_ERROR)
         {
                   printf("Server: bind() failed! Error: %ld.\n", WSAGetLastError());
                   // Close the socket
                   closesocket(ReceivingSocket);
                   // Do the clean up
                   WSACleanup();
                   // and exit with error
                   return -1;
                 }
                 else
                 printf("Server: bind() is OK!\n");

       // Some info on the receiver side...
      getsockname(ReceivingSocket, (SOCKADDR *)&ReceiverAddr, (int *)sizeof(ReceiverAddr));

      printf("Server: Receiving IP(s) used: %s\n", inet_ntoa(ReceiverAddr.sin_addr));
      printf("Server: Receiving port used: %d\n", htons(ReceiverAddr.sin_port));
      printf("Server: I\'m ready to receive a datagram...\n");

      SelectTiming = recvfromTimeOutUDP(ReceivingSocket, 100, 0);

      switch (SelectTiming)
      {
         case 0:
             // Timed out, do whatever you want to handle this situation
             printf("Server: Timeout while waiting for client!...\n");
             break;
         case -1:
             // Error occurred, maybe we should display an error message?
            // Need more tweaking here and the recvfromTimeOutUDP()...
             printf("Server: Some error encountered with code number: %ld\n", WSAGetLastError());
             break;
         default:
             {
                  while (1)

                  {
                       // Call recvfrom() to get it then display the received data...
                       ByteReceived = recvfrom(ReceivingSocket, ReceiveBuf, BufLength,
                                                0, (SOCKADDR *)&SenderAddr, &SenderAddrSize);
                       if ( ByteReceived > 0 )
                       {
                           printf("\n\nServer: Total Bytes received: %d\n", ByteReceived);
                           printf("Server: The data is \"%s\"\n", ReceiveBuf);
                       }
                       else if ( ByteReceived <= 0 )
                            printf("Server: Connection closed with error code: %ld\n",
                                        WSAGetLastError());
                       else
                            printf("Server: recvfrom() failed with error code: %d\n",
                                    WSAGetLastError());

                       // Some info on the sender side
                       getpeername(ReceivingSocket, (SOCKADDR *)&SenderAddr, &SenderAddrSize);
                       printf("Server: Sending IP used: %s\n", inet_ntoa(SenderAddr.sin_addr));
                       printf("Server: Sending port used: %d\n", htons(SenderAddr.sin_port));

                       printf("TIME -", ReceiveBuf);
                  }

             }

        }

       // When your application is finished receiving datagrams close the socket.
          printf("Server: Finished receiving. Closing the listening socket...\n");
          if (closesocket(ReceivingSocket) != 0)
              printf("Server: closesocket() failed! Error code: %ld\n", WSAGetLastError());
          else
              printf("Server: closesocket() is OK...\n");

      // When your application is finished call WSACleanup.
       printf("Server: Cleaning up...\n");
       if(WSACleanup() != 0)
          printf("Server: WSACleanup() failed! Error code: %ld\n", WSAGetLastError());
       else
          printf("Server: WSACleanup() is OK\n");
       // Back to the system
       // system("PAUSE");
       return 0;
 } 
```

* * *

下面是我在物理 PC 中的 CLI 中获取的示例。我相信这是从虚拟接收器接收到的数据包。我很困惑如何将其解码为

Time|Sender Mac Addr|Target Mac Addr|Packet Len|Ether Type|Src IP Addr| 目标 IP 地址

```
 Server: Total Bytes received: 4000
 Server: The data is "Time : 10:32:24.759385   
 0050568214540064403a1c000800450000285aeb40007f06b0c4ac10a40bac10f3f3c0990d3d740222860176142f5010054e40620000000000000000"
 Server: Sending IP used: 172.16.243.243
 Server: Sending port used: 59079

 Server: Total Bytes received: 4000
 Server: The data is "Time : 10:32:24.759385
 0050568214540064403a1c000800450000285aeb40007f06b0c4ac10a40bac10f3f3c0990d3d740222860176142f5010054e40620000000000000000"
 Server: Sending IP used: 172.16.243.243
 Server: Sending port used: 59080 
```

我如何解码数据包信息分析？

解码它，像这样。

Time|Sender Mac Addr|Target Mac Addr|Packet Len|Ether Type|Src IP Addr| 目标 IP 地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:11:38.233

您大概将数据写入字节缓冲区以便发送它。接收它时，您只需要以与写入数据相同的方式从接收缓冲区中读回数据。我们只能看到您的接收代码，因此我们只能猜测您发送的内容，但假设您将 4 x 4 字节整数写入 char 缓冲区，然后通过套接字发送。接收代码将需要执行类似的操作

```
 int iData1 = 0;
   int iData2 = 0;
   int iData3 = 0;
   int iData4 = 0;
   char* szIt = ReceiveBuff;          // set a pointer to start of receive buffer
   memcpy(&iData1,szIt,sizeof(int);   // memcpy first item
   szIt += sizeof(int);               // point to location in buffer of next item   
   memcpy(&iData2,szIt,sizeof(int);   // memcpy second....
   szIt += sizeof(int);

   // Now do the rest of the data items until you have read 
   // everything in the packet 
```

等等下一个项目。如果您有不同的类型，那么您需要将指针增加这些类型的大小。还有其他方法可以做同样的事情，但这会奏效。执行此操作时需要考虑的一件非常重要的事情是您发送和接收的机器的一致性。您可以强制您的数据写入 big endean，以便客户端知道并且可以处理它，如果它本身就是 little endean。

重要的是您发送的数据的顺序并在客户端以相同的方式解释您的字节缓冲区。

希望这可以帮助

# java - Spring data - 域对象继承和泛型方法

> ID：11392808
> 
> 赞同：6
> 
> 时间：2012-07-09T09:59:44.050
> 
> 标签：java, generics, jpa, spring-data

我有一些域对象：

```
@Entity
public class Log {

}

@Entity
public class LogLetter extends Log {

}

@Entity
public class LogAction extends Log {

} 
```

而且我只想拥有一个存储库，它可以让我获取 Log 的孩子。

我可以在理论上做这样的事情吗？

```
public interface LogRepository extends CrudRepository<Log, Long> {

    @Query("select from ?1)
    public <T> List<T> getLog(Class<T> clazz);

} 
```

并调用此方法：

```
List<LogLetter> logLetters = getLog(LogLetters.class); 
```

是否存在任何其他方法来做我描述的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:01:19.497

我认为它不可能开箱即用（特别是考虑到您不能在 中使用参数`from`），但您可以将其实现为自定义方法（请参阅[1.4\. 自定义实现](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.custom-implementations)）：

```
public <T> List<T> getLog(Class<T> clazz) {
    return em.createQuery("from " + clazz.getSimpleName()).getResultList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T12:59:18.227

您还可以使用以下方法实现它`#{#entityName}`：

```
@Query("SELECT o FROM #{#entityName} o where o.attribute1=:attribute1")
Page<T> findByAttribute1Custom(@Param("attribute1") String attribute1, Pageable pageable); 
```

# c# - 如何为组合键制作全局键盘挂钩？

> ID：11392811
> 
> 赞同：1
> 
> 时间：2012-07-09T09:59:50.853
> 
> 标签：c#, winforms, hook, keyboard-hook

我用[它](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook)来制作全局键盘钩子。有这样的行：

```
gkh.HookedKeys.Add(Keys.A);
gkh.HookedKeys.Add(Keys.B); 
```

注册挂钩的热键。如何修改该解决方案以制作组合挂钩，例如 A+B，但不是单个 A 或 B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:15:49.893

全局热键的标准解决方案是`RegisterHotkey`API。它支持开箱即用的带有修饰符（Control、Shift、Alt、Windows）的热键，并且不会受到挂钩的全局副作用的影响。

# jasper-reports - iReports 不会读取我的 JavaBeans 数据源，但它会加载类文件

> ID：11392816
> 
> 赞同：2
> 
> 时间：2012-07-09T10:00:14.337
> 
> 标签：jasper-reports, ireport

在过去的一周里，我一直在为此失去理智。我已经尝试了大量的教程和论坛，但没有任何效果。

概述如下：我想在一个简单的表中显示 JavaBean 对象。我已经创建了 JavaBean 对象，我已经设置了类路径，但是无论我尝试什么，iReport 都无法使用它。这是整个Java代码：

```
package mypack;
public class Person
{

    private String name;

    private static Person[] data = {new Person("John"), new Person("Mark")};

    public Person() {}

    public Person(String newName) { name = newName; }

    public String getName() { return name; }

    public void setName(String newName) { name = newName; }

    public static Person[] getPersons() { return data; }
} 
```

在 iReport 中，我创建了一个新的“JavaBeans 设置数据源”连接。这是它的填充方式：

![iReport](../Images/533300cf78c1fafb666fb8d0e9682885.png)

但是，当我单击“测试”时，什么也没有发生。没有错误，但也没有数据。如果我更改工厂类的名称，那么我会得到“找不到类”异常，所以 iReport 显然确实加载了我的类，但它仍然无法正常工作。

我真的不知道我在 Java 文件中做错了什么，因为 iReport 似乎可以很好地加载它，但不能与它“交谈”。

我已经使用 Eclipse Juno 创建了 Java 类，并且正在使用 iReport 4.6.0。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:27:05.367

问题解决了。我正在针对 1.7 构建 Java 文件，iReports 似乎无法读取它。为 1.6 构建解决了这个问题，上面的代码工作正常。

# dynamics-ax-2009 - AX 可以管理数据库副本/镜像吗？

> ID：11392818
> 
> 赞同：0
> 
> 时间：2012-07-09T10:00:24.627
> 
> 标签：dynamics-ax-2009, axapta

以后我公司会开两个远程办公室，所以我们会有3个可以访问Dynamics AX的单办公室。

我可以配置的最佳“场景”是什么？

是否可以有 3 个 AOS（每个办公室一个）访问 3 个相互同步的物理数据库（每个办公室一个），所以如果 HDSL 线路掉线，每个办公室都可以独立工作？

或者这是不可能的，所以任何 AOS 都必须访问同一个“单一”数据库？

如您所见，我的主要“担忧”是关于 DSL 线路，而不是关于“服务器硬件”故障。我们有总部的地方，DSL线路最差，所以我们关心的是“如果线路掉线，如何让远程办公室继续工作？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:04:12.623

您所有的 AOS 和数据库服务器都应该集中，我还可以从您的 3 个办公室远程访问终端服务器。您的 AOS 和 DB 应该通过服务器机房中的光纤连接，我认为只有在您可以访问一些重要的光纤链路时，才能让它们在地理上相距很远。

您的问题似乎是您的 HDSL。考虑投资租用线路，通过指向不同交换机的第二条线路进行备份，甚至是具有 3g 备份的 3g 加密狗或 adsl 调制解调器（您可以为 3g 加密狗获得带有 USB 端口的调制解调器）。如果您通过 term server 或 citrix desktop 进行远程连接，3g 将是一个足够的备份策略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T22:36:03.027

终端服务器是您最好的选择。如果您的“主要办公室”的 DSL 很差，那么您的其他办公室之一可能会被视为您的“AX 主要办公室”，服务器和可靠性将在那里。

AX[确实支持数据库镜像](http://blogs.msdn.com/b/axinthefield/archive/2011/01/18/database-mirroring-with-dynamics-ax.aspx)，但不是出于您的目的。它用于故障转移。您还可以创建一个 VPN 隧道，您的其他网络都可以使用 VPN 上的本地客户端。

# ruby-on-rails - Rails3 在用户身份验证时重定向到先前的操作？(before_filter & store_location)

> ID：11392819
> 
> 赞同：3
> 
> 时间：2012-07-09T10:00:24.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, authentication, routing

我已经阅读了几乎所有与 Rails 友好重定向相关的帖子，但我似乎无法弄清楚如何在使用 Devise 进行身份验证后将用户重定向到先前的操作。

这就是我想做的。

1.  未登录用户点击“投票”
2.  由于“before_filter :authenticate_user！”，用户被定向到登录页面 （我已经走到这一步了）
3.  用户登录后，“after_sign_in_path_for(resource)”将用户重定向到上一个操作（投票）。
4.  投票动作被投下，然后被重定向到用户单击投票按钮的原始页面。（如果用户已经登录，'request.referer' 会这样做，但由于在这种情况下用户必须通过登录页面，request.referer 不起作用。）

*请注意，我想重定向到上一个“动作”，而不仅仅是“页面”。换句话说，我希望在用户登录后已经执行了预期的操作。

这是我的代码。

```
class MissionsController < ApplicationController
  before_filter :store_location
  before_filter :authenticate_user!, :except => [:show, :index] 

  def vote_for_mission
    @mission = Mission.find(params[:id])
    if @mission.voted_by?(current_user) 
      redirect_to request.referer, alert: 'You already voted on this mission.'
    else
      @mission.increment!(:karma)
      @mission.active = true
      @mission.real_author.increment!(:userpoints) unless @mission.real_author.blank?

      current_user.vote_for(@mission)
      redirect_to request.referer, notice: 'Your vote was successfully recorded.'
    end
  end
end 
```

在我的应用程序控制器中，

```
class ApplicationController < ActionController::Base

  protect_from_forgery                                                                                                       

  def after_sign_in_path_for(resource)
    sign_in_url = "http://localhost:3000/users/sign_in"                                     
    if (request.referer == sign_in_url)
        session[:user_return_to] || env['omniauth.origin'] || request.env['omniauth.origin']  || stored_location_for(resource) || root_path      
    else
      request.referer
    end
  end

  private
  def store_location
    session[:user_return_to] = request.referer
  end 
```

我认为我的主要问题是，当用户需要登录时，vote_for_mission 操作中的“request.referer”会出现意外，因为前一页是登录页面。不知何故，我想将用户单击投票的页面保存为 FOO -> 将投票操作保存为 BAR -> 重定向到登录页面 -> 当用户登录时，重定向到 BAR -> 执行 BAR 操作后，重定向到 FOO .

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:52:23.893

我通常做的是在 ApplicationController 中有这样的方法：

```
def remember_location
  session[:back_paths] ||= []
  unless session[:back_paths].last == request.fullpath
    session[:back_paths] << request.fullpath
  end

  # make sure that the array doesn't bloat too much
  session[:back_paths] = session[:back_paths][-10..-1]
end

def back
  session[:back_paths] ||= []
  session[:back_paths].pop || :back
end 
```

然后，在任何操作（在您的情况下是登录处理程序）中，您可以

```
redirect_to back # notice, there is no symbol 
```

并且在您希望能够跳回的每个动作中，只需调用

```
remember_location 
```

我希望这有帮助。

# soapui - 使用 SOAPUI 使用安全的 WSO2 Web 服务“签名和加密 - X509 身份验证”

> ID：11392820
> 
> 赞同：0
> 
> 时间：2012-07-09T10:00:25.790
> 
> 标签：soapui, wso2, x509

我正在尝试使用“签名和加密 - X509 身份验证”方案调用 WSO2 安全代理服务。我已经在 WSO2 中配置了 X509 证书，并且对于 WSO2 来说一切看起来都很好。

在客户端，我使用的是 SOAPUI 4.5.1。我已经按照几个教程让它工作但没有成功......我得到的最后一个错误是这个：一般安全错误（WSSecurityEngine：回调没有提供密码：null）；嵌套异常是：javax.security.auth.callback.UnsupportedCallbackException

不知道哪个密码为空....服务器端有什么要开发的吗？Soap 请求包含时间戳、签名和加密部分，看起来没问题。

任何想法？

谢谢

洛朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:24:46.053

这篇博文 [1] 将帮助您使用 SoapUI 配置安全场景。您是否在服务器端收到此错误？服务端和客户端都需要解析keystore的密码和私钥来完成加密和签名过程。如果你在 WSO2 端使用 UI 安全向导，很可能这些密码必须默认配置，你不想做任何额外的配置。因此可能是 SoapUI 方面的问题。

[1] [http://blog.thilinamb.com/2011/02/invoking-secured-web-service-with.html](http://blog.thilinamb.com/2011/02/invoking-secured-web-service-with.html)

# android - 如何在Android中剪切图像？

> ID：11392821
> 
> 赞同：2
> 
> 时间：2012-07-09T10:00:27.537
> 
> 标签：android, image-manipulation

可以在Android中剪切图像吗？好像找不到任何教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:49:23.677

也许您已经找到了解决方案，但以防万一，我认为这就是您所需要的：

```
Bitmap src = BitmapFactory.decodeResource(this.getResources(), drawable.sample);
int width = src.getWidth();
int height = src.getHeight();
float skewX = 5.0;
float skewY = 6.0;
Matrix matrix = new Matrix();
matrix.setSkew(skewX, skewY);
Bitmap img = Bitmap.createBitmap(src, 0, 0, width, height, matrix, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:04:36.577

这可能会帮助你

位图 bitmapOrg = BitmapFactory.decodeResource(getResources(), R.drawable.flower_blue);

```
 Bitmap croppedBmp = Bitmap.createBitmap(bitmapOrg, 0, 0,
                bitmapOrg.getWidth() / 2, bitmapOrg.getHeight());
        int h = bitmapOrg.getHeight();
        canvas.drawBitmap(bitmapOrg, 10, 10, paint);
        canvas.drawBitmap(croppedBmp, 10, 10 + h + 10, paint); 
```

# css - styles.less div 上的两个过渡

> ID：11392823
> 
> 赞同：0
> 
> 时间：2012-07-09T10:00:35.353
> 
> 标签：css, less

我有一个 div 元素，当我浏览它时我想要它的背景变化和它的内部跨度改变颜色。例如，如果我使用一种转换，则只有背景工作，否则不起作用，转换立即立即生效。这是我的 style.less 代码：

```
.transition{
    transition-property: color; /*standard*/
    transition-duration: 0.4s;

    -webkit-transition-property: color; /*Safari e Chrome */
    -webkit-transition-duration: 0.4s;

    -o-transition-property: color;      /*Opera*/
    -o-transition-duration: 0.4s;

    -moz-transition-property: color;    /*Firefox*/
    -moz-transition-duration: 0.4s; 
}

.transition_bg{
    transition-property: background; /*standard*/
    transition-duration: 0.4s;

    -webkit-transition-property: background; /*Safari e Chrome */
    -webkit-transition-duration: 0.4s;

    -o-transition-property: background;      /*Opera*/
    -o-transition-duration: 0.4s;

    -moz-transition-property: background;    /*Firefox*/
    -moz-transition-duration: 0.4s; 
}

.riquadri{
    background:#fff;
    width:230px;    
    height:230px;
    float:left;
    text-align:center;
    .transition_bg;
        .transition
}

.riquadri:hover{
    background:#575757;
}

.riquadri:hover span{
    color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:03:03.643

将转换合并为一个：

```
.transition{
    transition-property: color, background; /*standard*/
    transition-duration: 0.4s;

    -webkit-transition-property: color, background; /*Safari e Chrome */
    -webkit-transition-duration: 0.4s;

    -o-transition-property: color, background;      /*Opera*/
    -o-transition-duration: 0.4s;

    -moz-transition-property: color, background;    /*Firefox*/
    -moz-transition-duration: 0.4s; 
} 
```

# jquery - 强制选择一个 jQuery-ui-tab 作为默认值

> ID：11392833
> 
> 赞同：3
> 
> 时间：2012-07-09T10:01:04.847
> 
> 标签：jquery, jquery-ui, jquery-selectors, jquery-ui-tabs, jquery-tabs

目前，我有 2 个单独的函数，它们在 jquery 选项卡 ui 中创建选项卡。从这两个函数生成的选项卡最终成为默认显示的选项卡似乎有点随机。

例如，如果`function tabs_a`创建 4 个选项卡，然后`function tabs_b`再创建 4 个选项卡，则第一个选项卡`tabs_a`显示为默认选项卡，或者第一个选项卡显示为默认选项卡`tabs_b`。

两个功能完成加载/创建选项卡后，如何选择自动显示/选择特定选项卡？

例如，如果函数`tabs_a`创建：

```
tab_a_1
tab_a_2
tab_a_3
tab_a_4 
```

和 tabs_b 创建：

```
tab_b_1
tab_b_2
tab_b_3
tab_b_4 
```

目前，`tab_a_1`或者`tab_b_1`默认情况下会被选中，这两个中的哪一个最终被默认选中似乎是随机的。

例如，我如何强制`tab_b_3`默认被选中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:15:44.973

选项卡创建后，可以强制调用如下

```
$("#tabs").tabs('select', "#tab_b_3"); 
```

这里，`#tabs`是您调用该`.tabs()`函数的 div 的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T19:27:06.830

请注意，在 v1.9 中，'select' 方法已从 jQuery UI 中删除。要完成您想要做的事情，只需使用“活动”选项来设置活动选项卡：

```
$('#tab_b').tabs({ active: true }); 
```

或者

```
$('#tab_b').tabs('option', 'active', true); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T11:43:37.217

创建选项卡后。

//强制选择标签
$("#tab_b").tabs("select", "tab_b_2");

在这里查看 [http://jsfiddle.net/75XFM/3/](http://jsfiddle.net/75XFM/3/)

或者查看下面的代码：

```
<script type="text/javascript">
$("#tab_a").tabs();
$("#tab_b").tabs();
//force select the tab  
$("#tab_b").tabs("select", "tab_b_2");
</script> 

<div id="tab_a">
    <ul>
        <li><a href="#tab_a_1">TabA1</a>

        </li>
        <li><a href="#tab_a_2">TabA2</a>

        </li>
        <li><a href="#tab_a_3">TabA3</a>

        </li>
    </ul>
    <div id="tab_a_1">I'm Tab A1</div>
    <div id="tab_a_2">I'm Tab A2</div>
    <div id="tab_a_3">I'm Tab A3</div>
</div>
<div id="tab_b">
    <ul>
        <li><a href="#tab_b_1">TabA1</a>

        </li>
        <li><a href="#tab_b_2">TabA2</a>

        </li>
        <li><a href="#tab_b_3">TabA3</a>

        </li>
    </ul>
    <div id="tab_b_1">I'm Tab A1</div>
    <div id="tab_b_2">I'm Tab A2</div>
    <div id="tab_b_3">I'm Tab A3</div>
</div> 
```

# html - div中不需要的文本行

> ID：11392835
> 
> 赞同：7
> 
> 时间：2012-07-09T10:01:10.680
> 
> 标签：html, css

所以，我遇到了一个我一直试图弄清楚的问题。我在我的 DOM 结构中得到了额外的一行文本（或者看起来如此），据我所知，它是由浏览器添加的。这发生在我运行代码的所有浏览器（IE8、IE9、Chrome 20、Firefox 11）中，我想删除它。

这是我的 HTML：

```
<div id="wrapper">
    <div id="inner">
        <div class="item">
            content
        </div>
    </div>
</div>​ 
```

这是我的 CSS：

```
#wrapper {
    bottom: 0;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
}
.item {
    float: left;
    width: 171px;
    position: relative;
    background: #fc0;
} 
```

这是一个显示我的问题的 jsfiddle：http: [//jsfiddle.net/henrikandersson/wMg2m/](http://jsfiddle.net/henrikandersson/wMg2m/)

如您所见，顶部和黄色项目之间有一个间隙，据我所知，这是由#inner-div 上方的一行不应该存在的文本引起的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T10:12:26.037

`&65279;`关闭`>`包装器 div后，您有一个不可见的控制命令。它实际上是 HTML 编码的[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)。

只需删除那个，你会没事的。

看到[这个更新的小提琴](http://jsfiddle.net/wMg2m/10/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T10:12:14.943

在那之后你有一个特殊的字符`<div id="wrapper">`是不可见的。

所以这有效：

```
<div id="wrapper">
    <div id="inner">
        <div class="item">
            s
        </div>
    </div>
</div> 
```

我重新输入了您的代码，这解决了问题。

问题可能是复制和粘贴代码，或您的文本编辑器。

[Notepad++](http://notepad-plus-plus.org)是最好的免费 Windows 文本编辑器。

我通过将代码粘贴到 Notepad++ 中的 ANSI 编码文本文件中发现了问题。ANSI 无法显示该字符，因此它更改为`?`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:12:20.603

添加

`#inner { float:left; }`

[http://jsfiddle.net/wnhqY/](http://jsfiddle.net/wnhqY/)

# java - java - 如何通过提供绝对路径直接在Java Swing中生成文件树？

> ID：11392836
> 
> 赞同：3
> 
> 时间：2012-07-09T10:01:12.193
> 
> 标签：java, swing, jtree

我的要求是我的 UI 上有一个浏览按钮。当我选择一个目录并按打开时，然后使用选定的路径会出现一个树结构。父/根目录将从我选择的文件夹开始。

例如：如果我选择 c:/mydocuments/myfiles，那么树的根将是 myfiles，然后它应该在树中显示它的所有子项。

目前在 Swings JTree 可用于生成树结构，但为此我们需要创建一个列表，然后将其提供给 JTree。

在我的场景中，这变得很困难，因为每次我需要在路径更改时生成一个列表。

所以我想知道在java中我们有没有像[jqueryfiletree](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/)这样的东西，它采用绝对路径并自动生成树。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T10:05:16.410

您无需列出清单。`TreeModel`您应该只拥有可以基于文件路径生成的代码。

并且该代码在互联网上的许多位置都可用。例如在[这篇 Sun`JTree`文章中](http://java.sun.com/products/jfc/tsc/articles/jtree/)

另一个很好的例子是 Andrew Thompson 的[“文件浏览器 GUI”](https://codereview.stackexchange.com/questions/4446/file-browser-gui/4451#4451)，他也活跃在这个网站上

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-18T20:00:06.447

这是一个最小的工作代码示例：

```
public class FileTree extends JTree
{   
   public FileTree(String path)
   {
      super(scan(new File(path)));
   }

   private static MutableTreeNode scan(File node)
   {
      DefaultMutableTreeNode ret = new DefaultMutableTreeNode(node.getName());
      if (node.isDirectory())
         for (File child: node.listFiles())
            ret.add(scan(child));
      return ret;
   }
} 
```

# magento - Magento - 在客户控制面板上显示附加信息

> ID：11392841
> 
> 赞同：1
> 
> 时间：2012-07-09T10:01:43.427
> 
> 标签：magento, module

一位客户要求我将 Magento 的客户控制面板与一些附加信息集成，以便从外部 Web 服务中检索。目前，我有一些小的独立代码可以查询此类 Web 服务并检索必要的数据。我需要做的是在 Magento 中集成这些代码并在控制面板上显示数据。

从我所见，最快（也是最肮脏）的方法是将调用“残酷地”硬编码到dashboard.phtml文件中。数据并不太复杂，因此这可能是让概念验证快速运行的一种选择。

但是，我想在多个网站上重用此功能，并且它还需要一些配置，将其作为硬编码变量进行维护会很痛苦。此外，以上是一个黑客，不仅仅是一个解决方案。

很明显，我需要开发一个合适的模块。

**这个问题**
我知道如何创建一个基本模块，它的配置页面和一个简单的控制器。我想了解的是，一旦我实现了一种获取外部数据的方法，如下所示：

*   我应该把方法放在哪里，我应该如何调用它？
*   我应该如何将数据传递给dashboard.phtml进行渲染？

我可能会找到执行上述操作的“方法”，但我很确定我最终会得到一个 hack 而不是解决方案，因此欢迎任何学习 Magento 方法的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:19:45.370

你可以 ：

*   创建一个新模块
*   为您的仪表板添加一个观察者 before_html 或 after_html 事件（一个在模板渲染之前调用，另一个在模板已经渲染时调用）
*   将您的方法添加到您的观察者，该观察者将您从 web 服务收到的内容自动输出到块输出（在内容之前或之后）

你可以 ：

*   创建一个新模块
*   创建一个包含您的网络服务方法的块
*   使用块引用将布局处理程序添加到布局文件
*   编辑模板并从那里调用您的块并获取此数据
*   您也可以选择制作自己的模板并在模板中调用块输出

你可以：

*   创建一个新模块
*   添加模板并实现模板中的所有内容
*   使用布局文件替换原来使用的模板

# ajax - Grails：在服务器端检测请求中止（ajax、escape、reload）

> ID：11392843
> 
> 赞同：3
> 
> 时间：2012-07-09T10:01:53.887
> 
> 标签：ajax, grails, request, server-side, abort

我有一个在多个边缘使用 ajax 的 grails 应用程序。

我通过 ajax 触发大型计算 ( `client -> controller -> service -> controller -> client`)，有时会调用`abort()`所有当前正在运行的请求。（例如，如果用户更改了某些参数）

现在的问题是，当我调用`abort()`我的 ajax 请求时，这些请求确实在客户端停止（完美！），但服务器一直在计算那些中止的请求 -**它不知道用户中止并且进一步处理是无用的**。

我搜索了一种方式/插件等来告诉服务器“嘿，停止此请求，不再需要它”，但没有找到解决方案。

关于我如何解决这个问题或其他人如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T17:42:20.320

正如其他人所说，要让服务器停止处理请求，您无能为力。*您可以*施加一些控制的唯一地方是在您的服务中处理长时间运行的计算。

想到的一种解决方案是计算服务检查某种指示它中止的标志，如果它发现它被设置，那么它会立即返回或返回一些小的垃圾值，因为客户端反正已经不听了。

由于默认情况下服务是事务安全的（我认为），因此您必须小心以与事务无关的方式设置标志，这意味着会话和数据库（假设您使用的是事务关系数据库）已关闭限制，因为您的服务不会看到后续“停止”请求所做的更改。相反，像 Redis 这样的东西可能是理想的，因为它是一个外部的、非事务性的、非常*快速*的键值数据存储。

作为示例“架构”，您基本上会有一个“停止”操作，为该特定用户或会话设置一个 redis 键，告诉计算停止。然后，您的计算服务会在运行时检查该键，如果发现它已设置则停止处理。

还有其他（也许更好）架构可以让你做这种事情，但考虑到你当前的系统，我认为这将是最简单的一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:24:25.973

我怀疑有比向服务器发送另一个 ajax 请求并让控制器“停止”服务中的预览处理更简单的方法。

检查这个问题：[如何取消已运行的 ajax 请求（在服务器端）](https://stackoverflow.com/questions/799717)

# gwt - 无需 HTML 5 的跨域 iframe 通信

> ID：11392846
> 
> 赞同：2
> 
> 时间：2012-07-09T10:02:02.497
> 
> 标签：gwt, iframe, cross-domain

我想了解一些方法，例如`window.postMessage()`在不使用 HTML 5 的情况下在 GWT 中进行跨域 IFrame 通信，因为旧浏览器不支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T22:58:46.707

查看[http://mattsnider.com/hash-hack-for-cross-domain-iframe-communication/](http://mattsnider.com/hash-hack-for-cross-domain-iframe-communication/)。这真的很好。

# google-docs - 将两个不同的 Google 表单数据作为不同的列添加到一个电子表格中

> ID：11392849
> 
> 赞同：0
> 
> 时间：2012-07-09T10:02:12.460
> 
> 标签：google-docs, google-apps-script

我的谷歌网站上基本上有两种不同的形式。

我想将两个不同的谷歌表单数据添加到一个电子表格中，其中不同的列标题为。

那么，我需要在我的代码中放入什么样的谷歌应用程序脚本。

我不知道方式...如何做到这一点？

请告诉我方法..如何使这成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:44:28.963

有几种方法可以做到这一点。

a) 一种是让两个表单将数据输入单独的电子表格，然后编写一个脚本来协调每次提交的条目（取决于您要应用的标准）。

b) 另一种选择是使用 Apps 脚本 UI 设计表单，然后将表单提交到相应的列中。

# c# - 在 Windows 8 Metro 风格应用程序中使用什么代替 webclient

> ID：11392850
> 
> 赞同：0
> 
> 时间：2012-07-09T10:02:22.053
> 
> 标签：c#, windows, httpclient, webclient

过去，我在 windows phone 中开发了一个应用程序，其中我使用 webclient 下载了 json 数据，语法为“ `openreadasync`”，然后调用“ `openreadcompleted`”事件处理程序。现在我正在开发一个适用于 Windows 8 Metro 风格的应用程序，但由于 Visual Studio 12 RC 中不存在 webclient，我正在寻找它的替代方案......

我想过使用“ `httpclient`”但无法理解如何将 json 数据作为流下载，然后调用它的事件处理程序....我应该调用什么事件处理程序？

你能举一些例子吗？...我是 C# 新手，所以请解释一下谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:16:34.520

中没有事件处理程序`HttpClient`。相反，您调用[`GetAsync()`](http://msdn.microsoft.com/en-us/library/hh158912%28v=vs.110%29.aspx)返回`Task`s 之类的方法。要获得 的结果`Task`，您可以使用 new`await`关键字（这也需要您将整个方法标记为`async`）。

因此，您的代码可能如下所示：

```
Stream responseStream = await httpClient.GetStreamAsync(url); 
```

# mysql - 程序中的MySql错误

> ID：11392851
> 
> 赞同：-1
> 
> 时间：2012-07-09T10:02:25.877
> 
> 标签：mysql, mysql-error-1064

```
DELIMITER $$
CREATE PROCEDURE `InsertInfo`(
    IN AId VARCHAR(20),
    IN Number VARCHAR(30),
    IN Address VARCHAR(30)
)
BEGIN
    DECLARE @BId VARCHAR(100);
    SET @BId = AId + '_' + Number + '_' + Address;
END$$

DELIMITER ; 
```

得到错误：

错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '@BId VARCHAR(100); 附近使用的正确语法；

```
SET @BId = AId + '_' + Number + '_' + Address;
END' at line 7
(0 ms taken) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:09:22.087

你必须删除`@`.

```
 DECLARE BId VARCHAR(100);
 SET BId = AId + '_' + Number + '_' + Address; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:17:25.307

正如@AVD 所说，您需要删除`@`，我猜您想在过程中连接字符串？

这是正确的做法。

```
DROP PROCEDURE IF EXISTS `InsertInfo`;
DELIMITER $$
CREATE PROCEDURE `InsertInfo`(
    IN AId VARCHAR(20),
    IN Number VARCHAR(30),
    IN Address VARCHAR(30)
)
BEGIN
    DECLARE BId VARCHAR(100);
    SET BId = CONCAT(AId,'_',Number,'_',Address);
    SELECT BId;
END$$

DELIMITER ; 
```

打电话`InsertInfo`

```
CALL InsertInfo('a','b','c'); 
```

返回

```
a_b_c 
```

# asp.net-mvc-3 - 在生产环境中检查 OutputCache 和 HttpRuntime.Cache

> ID：11392852
> 
> 赞同：0
> 
> 时间：2012-07-09T10:02:27.530
> 
> 标签：asp.net-mvc-3, caching

生产环境中是否有便于 OutputCache 和 HttpRuntime.Cache 检查的工具或 nuget 包？

在开发环境中，我可以设置一个断点并从即时窗口检查缓存。

我总是可以推出自己的缓存检查控制器，但如果已经为此构建了一个工具，我宁愿不要浪费精力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:05:38.093

你可以使用[`Glimpse`](http://getglimpse.com/). 它允许您检查重要的服务器端变量的值。AFAIK 它不支持缓存，但编写[自定义插件](https://stackoverflow.com/a/9997580/29407)并启用支持非常容易。

# c# - 如何将 Mvvmlight 应用到 VB.Net 项目中。？

> ID：11392857
> 
> 赞同：0
> 
> 时间：2012-07-09T10:02:41.293
> 
> 标签：c#, vb.net, integration, mvvm-light

我已经尝试使用 vb.net 项目，但它不允许访问 C# View 和 ViewModel，因为 VB.NET 还没有为 MvvmLight 做好准备。？

所以我的问题是我在 vb.net 中有现有项目，我想知道如何在 VB.NET 中使用 MvvmLight>

我做了什么，我使用 MvvmLight 模式在 C# 中创建了小地址，我正在尝试将此项目集成到我现有的 VB.NET 项目中，但它不兼容所以有什么独特的方法可以实现我的 MvvmLight 模式。？

谢谢...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:51:41.220

我在 VB.Net 中使用 MVVM Light。C# 编译为 DLL 并在您的项目中引用时可以在 VB.net 中使用。C# 中的 VB.Net DLL 的情况正好相反。这就是 .NET CLR 的优点。

至于 MVVM Light 的细节，请安装最新的软件包[http://www.galasoft.ch/mvvm/installing/](http://www.galasoft.ch/mvvm/installing/)并引用正确的程序集。

使用 Imports 语句将 GalaSoft.MVVMLight 命名空间引入您的项目。

```
Imports GalaSoft.MvvmLight
Imports GalaSoft.MvvmLight.Messaging
Imports GalaSoft.MvvmLight.Threading
Imports GalaSoft.MvvmLight.Helpers
Imports GalaSoft.MvvmLight.Command

Public Class UseMVVMLightInVB 
```

# c++ - C++调用驻留在多个类中的函数

> ID：11392859
> 
> 赞同：-2
> 
> 时间：2012-07-09T10:02:45.733
> 
> 标签：c++

```
#define classAnum 2;
#define classBnum 3;

class Base
{
  virtual int open()=0;
  virtual int close()=0;
}
class A:public Base
{
 virtual int open();
 virtual int close();
};

class B:public Base
{
 virtual int open();
 virtual int close();
}

int main()
{
    A classA[classAnum];
    B classB[classBnum];

openAnyClass(1);
CloseAnyClass(2);   
} 
```

我想实现这样的功能。

```
openAnyClass(1);
CloseAnyClass(2); 
```

这两个函数应该能够从 A 类和 B 类中的任何一个调用 open() 和 close()。

openAnyClass(1) 将调用 classA 或 classB 数组中第一个对象的 open() 函数。

open() --> 在 A 类和 B 类中会有不同的实现。A 类中的 open() 可以从多个客户端调用，并且最多可以调用。不。客户的数量是 # 定义的。

一次只调用一个来自 classA 或 classB 的 open()。我不想拥有相同代码的多个副本。

只有一个函数，我想调用任何 A 类和任何客户端的 open()。

例如：在下面的语句中，我想调用 client1 的 A 类的 open()。openAnyClass(int) 的参数表示客户端 ID。这也可能意味着`classB[1].open();`

```
'openAnyClass(1) = classA[1].open();' 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:26:56.017

这就是拥有您从中派生的命令基类的原因；这样你就可以拥有一个类的指针或引用，并通过虚函数调用派生类中的打开/关闭方法。

所以如果你有

```
Base *generic_class_pointer = new class A();

generic_class_pointer->open(); 
```

generic_class_pointer->open() 将调用类 A 中定义的代码。

您尝试对两个存储对象的数组执行什么操作，一个用于 A 类，一个用于 B 类，您可以拥有一个引用 Base 类型的类并通过它访问的单个数组。

原始代码并不是真正的好工作方式，最好通过列表（例如[stl::vector](http://www.sgi.com/tech/stl/Vector.html)）来做到这一点。

```
Base* class_storage[StorageSize];

int openAnyClass(int id)
{
    if (id < 0 || id >= StorageSize || class_storage[id] == 0)
        return 0; // or other error indication
    else
        return class_storage[id]->open();
}
int CloseAnyClass(int id)
{
    if (id < 0 || id >= StorageSize || class_storage[id] == 0)
        return 0; // or other error indication
    else
        return class_storage[id]->close();
}

int main()
{
    memset(class_storage,0,sizeof(class_storage));

    class_storage[1] = new A();
    class_storage[2] = new B();

    openAnyClass(1);
    CloseAnyClass(2);   
} 
```

上面的代码不是一个完整的解决方案，例如原始代码没有虚拟析构函数，这是一个始终使用的好习惯——以防派生类需要进行清理。

此外，在我的示例中，分配给 class_storage 的对象的删除也没有被释放。在全局级别上无关紧要，因为它们将在退出时被释放，但是大多数时候您需要管理通过获取的所有内容，`new()`否则您会遇到内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:27:13.137

所以 classA 是 A 的数组，与 classB 相同。调用 openAnyClass(1) 意味着对 A 的所有实例调用 open()，而 closeAnyClass() 意味着对 classB 的所有实例调用 close()。好吧，如果是这样的话，这个问题真的很复杂

无论如何，没有已知的开箱即用的方法可以做到这一点。您必须迭代数组的所有元素并调用 open() 或 close()。或者，您可以使用 boost foreach [http://www.boost.org/doc/libs/1_39_0/doc/html/foreach.html](http://www.boost.org/doc/libs/1_39_0/doc/html/foreach.html) 或实现您自己的 foreach 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:32:30.053

如果我正确理解您的问题，您想调用纯虚函数的不同实现。假设您已经提供了 A 类和 B 类的实现，您应该能够利用[多态性](http://en.wikipedia.org/wiki/Polymorphism_(computer_science))并从指向 Base 而不是 A 或 B 的指针/引用调用 open()/close()。

您可以只创建一个 Base 指针数组，而不是为 A 和 B 创建两个数组。

例子：

```
Base* base[basenum];

void openAnyClass( const int i )
{
   if( i < basenum && i >=0 && base[i] != NULL )
       base[i]->open();
}

int main(void)
{
   base[0] = new A();
   base[1] = new B();
   ...
   openAnyClass(1);
   closeAnyClass(2);

   for( int i = 0 ; i < basenum ; i++ )
      delete base[i];
} 
```

作为旁注，我认为最好使用以下打开和关闭功能：

```
void openAnyClass( Base& base );
void closeAnyClass( Base& base ); 
```

与其使用全局变量来存储对象并传递索引，不如将对象的指针/引用传递给函数，函数将调用适当的方法（无论是 A 还是 B 的方法）。

# jakarta-ee - 我可以使用外部文件来管理 JNDI 名称吗？

> ID：11392860
> 
> 赞同：1
> 
> 时间：2012-07-09T10:02:51.397
> 
> 标签：jakarta-ee, jndi, jboss7.x, ejb-3.1

我使用不同的容器来调用`EJB3`（JBOSS AS 7.1 上的 EJB 和 Tomcat 7.0 上的 Struts2）。所以我需要`JNDI`用来查找 EJB 服务。但是，JNDI 名称非常长，并且带有类的硬编码：

```
ejb:[EAR Project name]/[EJB project name]/[Distinct Name]/[Session Bean Name]![Remote Interface Name] 
```

那么有什么方法可以使用外部文件来管理/保存/定义名称`@Stateless(name="XXX"))`吗？

有没有人有想法或建议？

谢谢大家。

# codeigniter - 在 Codeigniter 的控制器中动态设置配置值？

> ID：11392861
> 
> 赞同：1
> 
> 时间：2012-07-09T10:02:51.553
> 
> 标签：codeigniter, file-upload, configuration, image-upload

我正在尝试使用 Codegniter 的上传库上传图像，图像应该上传到模型创建和返回的目录，上传目录每次都更改，这是我应该用来更改的代码配置上传数组：

```
 if ($_FILES['image']['size']!=0) {
                $path = $this->homeModel->createDirectories($id);
                $this->config->load('upload');
                $this->config->set_item('upload', array('upload_path' => $path));
                // I've also used
                // $this->config->set_item('upload_path', $path);

    if (!$this->upload->do_upload('image'))
                echo $this->upload->display_errors();
                else {
                    $image = $this->upload->data();
                    $data['image'] = $image['file_name'];
                }        
            } 
```

但它似乎不起作用。upload_path 没有改变，图像仍然上传到我在 config/upload.php 文件中指定的路径中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:08:22.430

尝试这个：

```
if ($_FILES['image']['size']!=0) {

   $path = $this->homeModel->createDirectories($id);
   $this->config->load('upload', TRUE);
   $config = $this->config->item('upload');
   $config['upload_path'] = $path;
   $this->upload->initialize($config);

   //etc.
} 
```

# makefile - 如何从终端覆盖makefile中的变量

> ID：11392863
> 
> 赞同：2
> 
> 时间：2012-07-09T10:02:56.767
> 
> 标签：makefile, gnu-make, multiple-makefiles

我创建了一个简单的makefile，即

```
COMMON=hello
all:
  gcc $(COMMON).c -o $(COMMON).o 
```

我在其中运行 makefile 的目录包含三个文件：hello.c add.c multiply.c factorial.c 和 subtraction.c。

当我使用`make`命令在终端中编译它时，会打印 hello。现在我想在程序中进行更改，以便当我编写“make add”或“make multiply”或“make factorial”时，相应的程序将编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T11:17:23.577

只需在命令行上提供它。

```
make COMMON=bye 
```

如果目标可以从当前目录中的文件名中预测，那么您根本不需要 Makefile，因为 Make 已经知道如何`multiply`从`multiply.c`.

```
.PHONY: all
all: hello add multiply factorial 
```

如果你真的想要一个明确的食谱，试试这样的。

```
%: %.c
        gcc -o $@ $^ 
```

# ios - 将 MPMoviePlayerController 的视图添加到 UIView

> ID：11392870
> 
> 赞同：4
> 
> 时间：2012-07-09T10:03:18.107
> 
> 标签：ios, uiview, mpmovieplayercontroller

我想添加`MPMoviePlayerController`到`UIView`. 首先，我在 xib 文件中放置了一个视图，命名为 youTubeView。youtubePlayer 是`MPMoviePlayerController`.

```
[youtubePlayer.view setFrame:youTubeView.frame];
[youTubeView addSubview:youtubePlayer.view];
[youtubePlayer play]; 
```

我想在 youTubeView 上查看 youtubePlayer 叠加层的视图。但是 youtubePlayer 的视图很宽，它只是覆盖了 youTubeView 的一部分。为什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T10:46:58.990

试试这个

```
[youtubePlayer.view setFrame:youTubeView.bounds];
[youTubeView addSubview:youtubePlayer.view];
[youtubePlayer play]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:51:44.720

只需像这样为电影分配缩放模式`youtubePlayer.scalingMode = MPMovieScalingModeFill;`

这将解决您的问题。

快乐编码:)

# android - Sqlite 数据库 Android 光标/锁定

> ID：11392872
> 
> 赞同：1
> 
> 时间：2012-07-09T10:03:27.230
> 
> 标签：android, database, sqlite, locking, cursor

我只是在阅读我的表格，但我无法启动应用程序，因为它给了我这些错误：

这是连接到 dbclass 的代码。它调用 DBclass 中的 id 方法，然后关闭 db。

```
public int return_id_phone(Context contxt) {
    Database db = new Database(contxt);
    db.open();
    int id_phone = db.id(2);
    db.close();
    return id_phone;
} 
```

这是要提取的代码。只返回一个数字，它很简单，我不知道它为什么会崩溃。它在下面的错误中说我没有关闭游标并且数据库也被锁定。

这是我的数据库类。昨天工作完美，今天不工作......

> 包com.background；

公共类数据库{

```
public static final String KEY_ROWID = "id";
public static final String KEY_NAME = "sync";

public static final String ID_ROW = "_ids";
public static final String VALUE_ROW = "_value";

public static final String ID = "id";
public static final String STATE = "state";

public static final String ID_CONTACTS = "idcontacts";
public static final String NAME = "name";
public static final String NUMBER = "phone";

private static final String DATABASE_NAME = "faraway";
private static final String DATABASE_TABLE = "sync";
private static final String DATABASE_TABLE_2 = "user";
private static final String DATABASE_TABLE_3 = "service";
private static final String DATABASE_TABLE_4 = "contacts";
private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;
ArrayList<String> list = new ArrayList<String>();
String proba = "";

private static class DbHelper extends SQLiteOpenHelper {

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_NAME
                + " INTEGER NOT NULL);");

        db.execSQL("CREATE TABLE " + DATABASE_TABLE_2 + " (" + ID_ROW
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + VALUE_ROW
                + " INTEGER NOT NULL);");

        db.execSQL("CREATE TABLE " + DATABASE_TABLE_3 + " (" + ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + STATE
                + " INTEGER NOT NULL);");

        db.execSQL("CREATE TABLE " + DATABASE_TABLE_4 + " (" + ID_CONTACTS
                + " INTEGER PRIMARY KEY AUTOINCREMENT, " + NAME
                + " TEXT NOT NULL, " + NUMBER + " TEXT NOT NULL);");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        db.execSQL("DROP TABLE IF EXIST " + DATABASE_TABLE);
        onCreate(db);

    }

}

public Database(Context c) {
    ourContext = c;

}

public Database open() throws SQLException {

    ourHelper = new DbHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close() {
    ourHelper.close();

}

public long primerCop() {

    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, 1);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);

}

public long updateSync(int ids, int value) {

    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, value);
    return ourDatabase.update(DATABASE_TABLE, cv, KEY_ROWID + "=" + ids,
            null);

}

public long zeroAll(int ids) {

    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, 0);
    return ourDatabase.update(DATABASE_TABLE, cv, KEY_ROWID + "=" + ids,
            null);

}

public List<String> check() {

    String[] columns = new String[] { KEY_ROWID, KEY_NAME };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NAME + "=1",
            null, null, null, null);

    if (c != null) {
        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            list.add(c.getString(0));
        }

        return list;

    } else {
        return null;
    }
}

public long personaldata(Integer id) {
    ContentValues cv = new ContentValues();
    cv.put(VALUE_ROW, id);
    return ourDatabase.insert(DATABASE_TABLE_2, null, cv);
}

public int id(int row) {
    String[] columns = new String[] { ID_ROW, VALUE_ROW };
    Cursor c = ourDatabase.query(DATABASE_TABLE_2, columns, ID_ROW + "='"
            + row+"'", null, null, null, null);
    if (c != null) {
        c.moveToFirst();
        int id= c.getInt(1);
        c.close();
        return id;
    } else {
        return 0;
    }
}

public long prepare_service() {
    ContentValues cv = new ContentValues();
    cv.put(STATE, 0);
    return ourDatabase.insert(DATABASE_TABLE_3, null, cv);
}

public int chech_state(int id) {
    String[] columns = new String[] { ID, STATE };
    Cursor c = ourDatabase.query(DATABASE_TABLE_3, columns, ID + "=" + id,
            null, null, null, null);

    if (c != null) {
        c.moveToFirst();
        int a = c.getInt(1);
        c.close();
        return a;
    } else {
        return 2;
    }
}

public long update_s(int value, int id) {
    ContentValues cv = new ContentValues();
    cv.put(STATE, value);
    return ourDatabase.update(DATABASE_TABLE_3, cv, KEY_ROWID + "=" + id,
            null);
}

public boolean Preferences(int id) {
    String[] columns = new String[] { KEY_ROWID, KEY_NAME };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
            + id, null, null, null, null);

    if (c != null) {
        c.moveToFirst();
        int number = c.getInt(1);
        if (number == 1) {
            c.close();
            return true;
        } else {
            c.close();
            return false;
        }
    } else {
        c.close();
        return false;
    }
}

public long contact_table(String name, String number) {
    ContentValues cv = new ContentValues();
    cv.put(NAME, name);
    cv.put(NUMBER, number);
    return ourDatabase.insert(DATABASE_TABLE_4, null, cv);

}

public long update_name(String name, String number) {
    ContentValues cv = new ContentValues();
    cv.put(NAME, name);
    return ourDatabase.update(DATABASE_TABLE_4, cv, NUMBER + "='" + number
            + "'", null);
}

public long update_phone(String name, String number) {
    ContentValues cv = new ContentValues();
    cv.put(NUMBER, number);
    return ourDatabase.update(DATABASE_TABLE_4, cv, NAME + "='" + name
            + "'", null);
}

public JSONObject select_contact(String name, String number) {

    String queryf = "select * from " + DATABASE_TABLE_4 + " where " + NAME
            + "='" + name + "' or " + NUMBER + "='" + number + "'";
    Cursor c = ourDatabase.rawQuery(queryf, null);
    JSONObject json = new JSONObject();

    if (c.getCount() == 0) {
        // No hay usuario y lo insertamos en la db
        c.close();
        try {
            json.put("type", "upload");
            json.put("name", name);
            json.put("phone", number);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return json;

    } else {
        c.close();
        String queryf2 = "select * from " + DATABASE_TABLE_4 + " where "
                + NAME + "='" + name + "' and " + NUMBER + "='" + number
                + "'";
        Cursor c2 = ourDatabase.rawQuery(queryf2, null);

        if (c2.getCount() != 0) {
            c2.close();
            try {
                json.put("type", "exists");
            } catch (Exception ex) {
                ex.printStackTrace();
            }
            return json;

        } else {

            c2.close();
            String queryf3 = "select * from " + DATABASE_TABLE_4
                    + " where " + NAME + "='" + name + "'";
            Cursor c3 = ourDatabase.rawQuery(queryf3, null);

            if (c3.getCount() != 0) {
                c3.close();
                try {
                    json.put("type", "change_phone");
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
                return json;

            } else {
                String queryf4 = "select * from " + DATABASE_TABLE_4
                        + " where " + NUMBER + "='" + number + "'";
                Cursor c4 = ourDatabase.rawQuery(queryf4, null);

                if (c4.getCount() != 0) {
                    c4.close();
                    try {
                        json.put("type", "change_name");
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                    return json;
                }
            }

        }
        return null;
    }
} 
```

}

我不知道我做错了什么......

```
> 07-09 11:54:05.460: E/SQLiteDatabase(6938): close() was never explicitly called on database '/data/data/com.anonyme.app/databases/faraway' 
07-09 11:54:05.460: E/SQLiteDatabase(6938): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:2069)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1123)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1081)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1167)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:833)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.background.Database.open(Database.java:89)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.extract.Contacts.phoneandname(Contacts.java:124)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.anonyme.app.IntroActivity.uploadall(IntroActivity.java:85)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.anonyme.app.IntroActivity.onCreate(IntroActivity.java:76)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.Activity.performCreate(Activity.java:4465)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.os.Looper.loop(Looper.java:137)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at android.app.ActivityThread.main(ActivityThread.java:4507)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at java.lang.reflect.Method.invoke(Method.java:511)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-09 11:54:05.460: E/SQLiteDatabase(6938):     at dalvik.system.NativeStart.main(Native Method)
07-09 11:54:05.460: E/System(6938): Uncaught exception thrown by finalizer
07-09 11:54:05.465: E/System(6938): java.lang.IllegalStateException: Don't have database lock!
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2227)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2319)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2315)
07-09 11:54:05.465: E/System(6938):     at android.util.LruCache.trimToSize(LruCache.java:197)
07-09 11:54:05.465: E/System(6938):     at android.util.LruCache.evictAll(LruCache.java:285)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2280)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1252)
07-09 11:54:05.465: E/System(6938):     at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:2040)
07-09 11:54:05.465: E/System(6938):     at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
07-09 11:54:05.465: E/System(6938):     at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
07-09 11:54:05.465: E/System(6938):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:35:48.430

问题在于 onCreate() 您的日志最终只指向那里。请验证您在哪里扩展您的课程的代码：

```
extends SQLiteOpenHelper 
```

如果您无法解决，请提供您创建表格的代码或您的日志指向的代码。因为它只是一个盲目的猜测，否则。

# yui - YUI: Dynamically add extra parameters to pjax calls(before the call is made)

> ID：11392873
> 
> 赞同：2
> 
> 时间：2012-07-09T10:03:49.343
> 
> 标签：yui, pjax

Is there a way to add extra parameters to [YUI pjax calls](http://yuilibrary.com/yui/docs/pjax/), the only event handlers i found were like load, navigate and error. There we no handlers for before making the pjax call. Even i didn't found any help for this using Config Attributes of pjax calls.

Its like if default call is:

```
http://localhost:8000?pjax=1 
```

and dynamic one added should be like:

```
http://localhost:8000?pjax=1&param=test 
```

The value of param can change on calls.

Any help would be appreciated.. Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:58:51.320

The purpose of pjax is to provide enhanced navigation for capable browsers, as such, the links and parameters should be entirely clickable without any additional modification.

Any links in the source should already have the `&param=test` in the markup.

If you are adjusting the content of the markup via JavaScript, simply changing the link href should work fine. The selector (`yui3-pjax`) is bubbled, and the `href` will be parsed when the event is fired.

Rather than tying into the pjax event, as soon as you know what that link should be you should be doing the `node.setAttribute('href', newLinkValue);`.

This will ensure that when pjax is not available, the link still points the user to the right location.

# java - Netbeans 调色板中的 setVisible 在哪里？

> ID：11392882
> 
> 赞同：7
> 
> 时间：2012-07-09T10:04:27.997
> 
> 标签：java, netbeans, netbeans-7

我在设计模式下使用 Netbeans 来制作 gui。我正在寻找与`setVisible`java的方法对应的属性，但我找不到它。

我查看了属性和绑定，但一无所获。

最后我`this.component.setVisible(false);`在托盘代码部分写了Post-Init Code。

还有另一种方法可以做到这一点吗？

PS：我使用 Netbeans 7.1

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-28T08:13:47.837

我所做的是右键单击标签并转到自定义代码并使标签可见性为假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:43:06.450

没有！

如果您使用的是 netbeans，则默认是打开可见的组件。据我所知，除非您不使用诸如 netbeans 之类的 GUI 构建器，否则这是无法更改的。

正如您在问题中所说，您可以根据您的需要简单地将组件的 .setVisible() 参数设置为 false 或 true ！

# javascript - 如何制作多列无序列表？

> ID：11392891
> 
> 赞同：7
> 
> 时间：2012-07-09T10:05:00.247
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个如下所示的项目列表：

![浮动列表](../Images/255870708a5a671f787c916d92f6f6a0.png)

主要要求是列表应该灵活，可以在不接触代码的情况下添加或删除列表项。

到目前为止，我发现的最佳解决方案是将所有列表项（包括标题）放入`<li>`标签中，并使用此[A List Apart 文章](http://www.alistapart.com/articles/multicolumnlists/)中介绍的一种技术设置它们的样式：

```
<ul>
  <li class="header">Drinks</li>
  <li>Drink 1</li>
  <li>Drink 2</li>
  <li>Drink 3</li>
  <li class="header">Meat</li>
  <li>Meat 1</li>
  <li>Meat 2</li>
  <li>Meat 3</li>
  <li>Meat 4</li>
  <li>Meat 5</li>
  <li>Meat 6</li>
  etc.
</ul> 
```

我想知道 Stack Overflow 上是否有更好的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T10:19:48.830

可能您可以干净利落地实现这一点（无需 javascript）的唯一方法是使用`column-count`CSS 属性。IE 仅支持 10+ 版本：http: [//caniuse.com/multicolumn](http://caniuse.com/multicolumn)

这是一个演示：http: [//jsbin.com/efiqov/2/](http://jsbin.com/efiqov/2/)

此外，标题应该是标题，而不是列表项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:08:47.470

只要您不需要支持旧版浏览器，您就可以使用 CSS3 多列...

[http://www.quirksmode.org/css/multicolumn.html](http://www.quirksmode.org/css/multicolumn.html)

然后只需为每个类别使用一个无序列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T10:30:30.683

您可以使用 css3 多列轻松克服这个问题。对于 ie 浏览器，您也可以使用脚本。请参阅链接查看更多细节

[http://www.cvwdesign.com/txp/article/360/multi-column-layout-with-css3-and-some-javascript](http://www.cvwdesign.com/txp/article/360/multi-column-layout-with-css3-and-some-javascript)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T10:57:28.760

由于您具有进行预处理的完整能力并且具有固定`<li>`的高度，因此请考虑 PHP 中的以下内容：

```
$menu=array(
    "header" => "Drinks",
    "item" => "Drink 1",
    "item" => "Drink 2",
    "item" => "Drink 3",
    "item" => "Drink 4",
    "header" => "Meats",
    "item" => "Meat 1",
    "item" => "Meat 2",
    "item" => "Meat 3",
    "item" => "Meat 4"
);

$item_count = 0;
$items_per_column = 5;

echo "<ul>";
foreach($menu as $key=>$value)
{
    if($item_count % $items_per_column == 0)
    {
        echo "</ul><ul>";
    }

    $item_count ++;

    echo "<li class='".$key."'>".$value."</li>";
}
echo "</ul>"; 
```

这是未经测试的，但应该可以正常工作。只需给每个`<ul>`a `float: left`，它们就会彼此堆叠在一起。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-02T18:55:04.673

从根本上讲，这就是您所需要的，无需 css3、js 或 php，适用于任何浏览器的任何版本等。

四列

```
li {width: 25%; float: left;}

<ul>
<li>content</li>
<li>content</li> etc.
</ul> 
```

三列

```
li {width: 33%; float: left;}

<ul>
<li>content</li>
<li>content</li> etc.
</ul> 
```

等等。

少即是多，拥抱简单！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-03T14:17:43.490

[您可以使用jQuery-Columns 插件](http://github.com/fzondlo/jquery-columns)非常轻松地做到这一点，例如将具有 .mylist 类的 ul 拆分为 5 列

```
$(document).ready( function () {
  $('.mylist').cols(5);
}); 
```

[这是jsfiddle 上](http://jsfiddle.net/EebVF/5)的一个活生生的例子

# c# - 在 C# 中将复杂对象绑定到 DataTable 的单元格

> ID：11392894
> 
> 赞同：5
> 
> 时间：2012-07-09T10:05:07.767
> 
> 标签：c#, binding, datatable

我有一个`DataTable`复杂的对象。

例如，

```
class ComplexDataWrapper
{
    public string Name{ get; set; }

    public ComplexData Data{ get; set; }

    public ComplexDataWrapper(ComplexData data)
    {
        this.Data = data;
        this.Name = "Something";
    }

    public override string ToString()
    {
        return Name;
    }
} 
```

现在我想将单元格从`DataTable`对象绑定到`ComplexDataWrapper` 所以，我尝试这样的事情：

```
...
var column = new DataColumn() { ColumnName = columnName, DataType = typeof(ComplexDataWrapper)};
row[column] = new ComplexDataWrapper(data); 
```

但是，我只想绑定一个属性，例如`Name`. 在gridview（`DataTable`是这个视图的数据源）中，我想编辑这个属性（名称）。

```
var complexDataWrapper = row[column] as ComplexDataWrapper; 
```

complexDataWrapper 始终等于 NULL。

我知道我错过了什么。

所以我的问题是：如何将我的单元格绑定`DataTable`到复杂对象？另外在网格视图中我想编辑复杂对象的一个​​属性。

谢谢。希望一切都清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-13T19:01:59.337

> 所以我的问题是：如何将我的 DataTable 单元格绑定到复杂对象？另外在网格视图中我想编辑复杂对象的一个​​属性。

您在这里需要的是绑定到所谓的**属性路径**（例如`obj.Prop1.Prop2`）的能力。不幸的是，WinForms 对此的支持有限 - 它支持**简单**的数据绑定（如`control.DataBindings.Add(...)`），但不支持控件和类似 使用的**列表**数据绑定。`DataGridView`

幸运的是，它仍然可以通过一些（大多数时候是微不足道的）编码来实现，因为数据绑定是围绕一个名为[`PropertyDescriptor`](https://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor(v=vs.110).aspx). 默认情况下，它是通过反射实现的，但没有什么能阻止您创建自己的实现并在其中做任何您喜欢的事情。这使您可以做许多反射无法完成的事情，特别是模拟实际上不存在的“属性”。

在这里，我们将利用这种可能性来创建一个“属性”，该“属性”实际上从原始属性的子属性获取/设置其值，而从外部看，它仍然看起来像单个属性，因此允许数据绑定到它：

```
public class ChildPropertyDescriptor : PropertyDescriptor
{
    public static PropertyDescriptor Create(PropertyDescriptor sourceProperty, string childPropertyPath, string displayName = null)
    {
        var propertyNames = childPropertyPath.Split('.');
        var propertyPath = new PropertyDescriptor[1 + propertyNames.Length];
        propertyPath[0] = sourceProperty;
        for (int i = 0; i < propertyNames.Length; i++)
            propertyPath[i + 1] = propertyPath[i].GetChildProperties()[propertyNames[i]];
        return new ChildPropertyDescriptor(propertyPath, displayName);
    }
    private ChildPropertyDescriptor(PropertyDescriptor[] propertyPath, string displayName)
        : base(propertyPath[0].Name, null)
    {
        this.propertyPath = propertyPath;
        this.displayName = displayName;
    }
    private PropertyDescriptor[] propertyPath;
    private string displayName;
    private PropertyDescriptor RootProperty { get { return propertyPath[0]; } }
    private PropertyDescriptor ValueProperty { get { return propertyPath[propertyPath.Length - 1]; } }
    public override Type ComponentType { get { return RootProperty.ComponentType; } }
    public override bool IsReadOnly { get { return ValueProperty.IsReadOnly; } }
    public override Type PropertyType { get { return ValueProperty.PropertyType; } }
    public override bool CanResetValue(object component) { var target = GetTarget(component); return target != null && ValueProperty.CanResetValue(target); }
    public override object GetValue(object component) { var target = GetTarget(component); return target != null ? ValueProperty.GetValue(target) : null; }
    public override void ResetValue(object component) { ValueProperty.ResetValue(GetTarget(component)); }
    public override void SetValue(object component, object value) { ValueProperty.SetValue(GetTarget(component), value); }
    public override bool ShouldSerializeValue(object component) { var target = GetTarget(component); return target != null && ValueProperty.ShouldSerializeValue(target); }
    public override AttributeCollection Attributes { get { return ValueProperty.Attributes; } }
    public override string Category { get { return ValueProperty.Category; } }
    public override TypeConverter Converter { get { return ValueProperty.Converter; } }
    public override string Description { get { return ValueProperty.Description; } }
    public override bool IsBrowsable { get { return ValueProperty.IsBrowsable; } }
    public override bool IsLocalizable { get { return ValueProperty.IsLocalizable; } }
    public override string DisplayName { get { return displayName ?? RootProperty.DisplayName; } }
    public override object GetEditor(Type editorBaseType) { return ValueProperty.GetEditor(editorBaseType); }
    public override PropertyDescriptorCollection GetChildProperties(object instance, Attribute[] filter) { return ValueProperty.GetChildProperties(GetTarget(instance), filter); }
    public override bool SupportsChangeEvents { get { return ValueProperty.SupportsChangeEvents; } }
    public override void AddValueChanged(object component, EventHandler handler)
    {
        var target = GetTarget(component);
        if (target != null)
            ValueProperty.AddValueChanged(target, handler);
    }
    public override void RemoveValueChanged(object component, EventHandler handler)
    {
        var target = GetTarget(component);
        if (target != null)
            ValueProperty.RemoveValueChanged(target, handler);
    }
    private object GetTarget(object source)
    {
        var target = source;
        for (int i = 0; target != null && target != DBNull.Value && i < propertyPath.Length - 1; i++)
            target = propertyPath[i].GetValue(target);
        return target != DBNull.Value ? target : null;
    }
} 
```

代码不是那么小，但它所做的基本上就是将调用委托给表示从原始属性到子属性的路径的属性描述符链的相应方法。另请注意，许多方法`PropertyDescriptor`仅在设计时使用，因此创建自定义具体运行时属性描述符通常只需要实现[`ComponentType`](https://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.componenttype(v=vs.110).aspx)、、[`PropertyType`](https://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.propertytype(v=vs.110).aspx)和[`GetValue`](https://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.getvalue(v=vs.110).aspx)（[`SetValue`](https://msdn.microsoft.com/en-us/library/system.componentmodel.propertydescriptor.setvalue(v=vs.110).aspx)如果支持）。

到目前为止，一切都很好。这只是谜题的第一部分。我们可以创建一个“属性”，现在我们需要一种方法让数据绑定使用它。

为了做到这一点，我们将使用另一个数据绑定相关的接口，称为[`ITypedList`](https://msdn.microsoft.com/en-us/library/system.componentmodel.itypedlist(v=vs.110).aspx)：

> 提供发现可绑定列表架构的功能，其中可用于绑定的属性与要绑定到的对象的公共属性不同。

换句话说，它允许我们为列表元素提供“属性”。但是怎么做？如果我们正在实现数据源列表，那将很容易。但是在这里，我们希望对我们事先不知道的列表执行此操作（我正在尝试保持解决方案的通用性）。

解决方案是将原始列表包装在另一个将实现`IList`（列表数据绑定的最低要求）的列表中，方法是将所有调用委托给底层列表，但通过实现`ITypedList`将控制用于绑定的属性：

```
public static class ListDataView
{
    public static IList Create(object dataSource, string dataMember, Func<PropertyDescriptor, PropertyDescriptor> propertyMapper)
    {
        var source = (IList)ListBindingHelper.GetList(dataSource, dataMember);
        if (source == null) return null;
        if (source is IBindingListView) return new BindingListView((IBindingListView)source, propertyMapper);
        if (source is IBindingList) return new BindingList((IBindingList)source, propertyMapper);
        return new List(source, propertyMapper);
    }

    private class List : IList, ITypedList
    {
        private readonly IList source;
        private readonly Func<PropertyDescriptor, PropertyDescriptor> propertyMapper;
        public List(IList source, Func<PropertyDescriptor, PropertyDescriptor> propertyMapper) { this.source = source; this.propertyMapper = propertyMapper; }
        // IList
        public object this[int index] { get { return source[index]; } set { source[index] = value; } }
        public int Count { get { return source.Count; } }
        public bool IsFixedSize { get { return source.IsFixedSize; } }
        public bool IsReadOnly { get { return source.IsReadOnly; } }
        public bool IsSynchronized { get { return source.IsSynchronized; } }
        public object SyncRoot { get { return source.SyncRoot; } }
        public int Add(object value) { return source.Add(value); }
        public void Clear() { source.Clear(); }
        public bool Contains(object value) { return source.Contains(value); }
        public void CopyTo(Array array, int index) { source.CopyTo(array, index); }
        public IEnumerator GetEnumerator() { return source.GetEnumerator(); }
        public int IndexOf(object value) { return source.IndexOf(value); }
        public void Insert(int index, object value) { source.Insert(index, value); }
        public void Remove(object value) { source.Remove(value); }
        public void RemoveAt(int index) { source.RemoveAt(index); }
        // ITypedList
        public string GetListName(PropertyDescriptor[] listAccessors) { return ListBindingHelper.GetListName(source, listAccessors); }
        public PropertyDescriptorCollection GetItemProperties(PropertyDescriptor[] listAccessors)
        {
            var properties = ListBindingHelper.GetListItemProperties(source, listAccessors);
            if (propertyMapper != null)
                properties = new PropertyDescriptorCollection(properties.Cast<PropertyDescriptor>()
                    .Select(propertyMapper).Where(p => p != null).ToArray());
            return properties;
        }
    }

    private class BindingList : List, IBindingList
    {
        private IBindingList source;
        public BindingList(IBindingList source, Func<PropertyDescriptor, PropertyDescriptor> propertyMapper) : base(source, propertyMapper) { this.source = source; }
        private ListChangedEventHandler listChanged;
        public event ListChangedEventHandler ListChanged
        {
            add
            {
                var oldHandler = listChanged;
                if ((listChanged = oldHandler + value) != null && oldHandler == null)
                    source.ListChanged += OnListChanged;
            }
            remove
            {
                var oldHandler = listChanged;
                if ((listChanged = oldHandler - value) == null && oldHandler != null)
                    source.ListChanged -= OnListChanged;
            }
        }
        private void OnListChanged(object sender, ListChangedEventArgs e)
        {
            var handler = listChanged;
            if (handler != null)
                handler(this, e);
        }
        public bool AllowNew { get { return source.AllowNew; } }
        public bool AllowEdit { get { return source.AllowEdit; } }
        public bool AllowRemove { get { return source.AllowRemove; } }
        public bool SupportsChangeNotification { get { return source.SupportsChangeNotification; } }
        public bool SupportsSearching { get { return source.SupportsSearching; } }
        public bool SupportsSorting { get { return source.SupportsSorting; } }
        public bool IsSorted { get { return source.IsSorted; } }
        public PropertyDescriptor SortProperty { get { return source.SortProperty; } }
        public ListSortDirection SortDirection { get { return source.SortDirection; } }
        public object AddNew() { return source.AddNew(); }
        public void AddIndex(PropertyDescriptor property) { source.AddIndex(property); }
        public void ApplySort(PropertyDescriptor property, ListSortDirection direction) { source.ApplySort(property, direction); }
        public int Find(PropertyDescriptor property, object key) { return source.Find(property, key); }
        public void RemoveIndex(PropertyDescriptor property) { source.RemoveIndex(property); }
        public void RemoveSort() { source.RemoveSort(); }
    }

    private class BindingListView : BindingList, IBindingListView
    {
        private IBindingListView source;
        public BindingListView(IBindingListView source, Func<PropertyDescriptor, PropertyDescriptor> propertyMapper) : base(source, propertyMapper) { this.source = source; }
        public string Filter { get { return source.Filter; } set { source.Filter = value; } }
        public ListSortDescriptionCollection SortDescriptions { get { return source.SortDescriptions; } }
        public bool SupportsAdvancedSorting { get { return source.SupportsAdvancedSorting; } }
        public bool SupportsFiltering { get { return source.SupportsFiltering; } }
        public void ApplySort(ListSortDescriptionCollection sorts) { source.ApplySort(sorts); }
        public void RemoveFilter() { source.RemoveFilter(); }
    }
} 
```

实际上，如您所见，我已经为其他数据源接口（如`IBindingList`和）添加了包装器`IBindingListView`。同样，代码并不是那么小，但它只是将调用委托给底层对象（为您的具体数据创建一个时，您通常会继承`List<T>`或`BiundingList<T>`仅实现这两个`ITypedList`成员）。必不可少的部分是[`GetItemProperties`](https://msdn.microsoft.com/en-us/library/system.componentmodel.itypedlist.getitemproperties(v=vs.110).aspx)方法实现，它与`propertyMapper`lambda 一起允许您用另一个属性替换一个属性。

有了所有这些，解决帖子中的特定问题很简单，只需将属性包装`DataTable`并将属性映射`Complex`到`Complex.Name`属性：

```
class ComplexData
{
    public int Value { get; set; }
}

class ComplexDataWrapper
{
    public string Name { get; set; }
    public ComplexData Data { get; set; } = new ComplexData();
}

static class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        var form = new Form();
        var gridView = new DataGridView { Dock = DockStyle.Fill, Parent = form };
        gridView.DataSource = ListDataView.Create(GetData(), null, p =>
        {
            if (p.PropertyType == typeof(ComplexDataWrapper))
                return ChildPropertyDescriptor.Create(p, "Name", "Complex Name");
            return p;
        });
        Application.Run(form);
    }

    static DataTable GetData()
    {
        var dt = new DataTable();
        dt.Columns.Add("Id", typeof(int));
        dt.Columns.Add("Complex", typeof(ComplexDataWrapper));
        for (int i = 1; i <= 10; i++)
            dt.Rows.Add(i, new ComplexDataWrapper { Name = "Name#" + i, Data = new ComplexData { Value = i } });
        return dt;
    }
} 
```

回顾一下，自定义`PropertyDescriptor`并`ITypedList`允许您创建无限类型的数据视图，然后可以由任何数据绑定感知控件使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-09T00:03:13.413

我相信您的架构对于您想要实现的目标存在缺陷。

如果您使用 gridView 编辑复杂类型的单个属性，则无需将整个类型绑定到数据表中，因为数据表是网格的数据源。

相反，您应该只绑定您希望编辑的属性，当数据返回时，只需将其分配给正确位置的复杂类型。

# c++ - 如何在我的程序中创建日志系统？

> ID：11392895
> 
> 赞同：0
> 
> 时间：2012-07-09T10:05:14.283
> 
> 标签：c++, logging, project-management

我正在编写程序时突然出现一个疯狂的想法：在我的程序中创建日志系统的最佳方法是什么？我的意思是如何将日志保存在代码中的任何位置（当然不包括头文件）？就像是

```
myLogs << "Ups, somthing failed :("; 
```

你知道，早些时候我只是打开文件并保存我想要的，但现在我想以专业的方式进行：DI 正在考虑将由所有其他类继承的类，但这有点问题。我也想过静态函数，但我不确定它是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:12:53.077

没有一个简单的答案；这取决于应用程序。我参与过一些非常大的项目，您可以在其中为不同的子系统配置不同的日志记录；这样的系统在较小的应用程序中将是多余的。如果应用程序必须长时间保持运行，这也会有所不同；在这种情况下，您需要在不停止应用程序的情况下重新配置日志。

但是，一般来说，您或多或少需要一个日志配置文件，指定不同级别的日志记录，以及如何处理日志消息。您还需要确保在没有日志记录时执行最少的操作。我使用的一种解决方案是为每个可用操作（写入文件、发送电子邮件或发送到系统日志）维护各种流缓冲区。然后，我将有一个按日志级别索引的 ostream* 表；如果该级别有任何日志记录，我将创建一个 streambuf 转发到所有必要的操作 streambuf，并将使用它的 ostream 的地址放入表中。这些特殊的 streambuf 还具有启动和停止每个日志记录的功能：启动记录的将使用文件名和行号调用，并且停止记录的将刷新每个托管流。如果给定级别上没有日志记录，则 ostream 指针为空。

基本的记录器是：

```
class Logger
{
    std::ostream* myDest;
    int* myUseCount;
public:
    Logger( int level, char const* filename, int lineNumber )
        : myDest( ourLogTable[level] )
        , myUseCount( new int( 1 ) )
    {
        if ( myDest != NULL ) {
            myDest->rdbuf()->startLogRecord( filename, lineNumber );
        }
    }

    Logger( Logger const& other )
        : myDest( other.myDest )
        , myUseCount( other.myUseCount )
    {
        ++ *myUseCount;
    }

    ~Logger()
    {
        -- *myUseCount;
        if ( *myUseCount == 0 && myDest != NULL ) {
            myDest->flush();
        }
    }

    template <typename T>
    Logger& operator<<( T const& obj )
    {
        if ( myDest != NULL ) {
            *myDest << obj;
        }
    }
}; 
```

（对于 C++11，您应该使用移动语义而不是我的引用计数。简单得多。）

最后，您通过宏调用记录器：

```
#define LOG(level) Logger( level, __FILE__, __LINE__ ) 
```

如果要自动插入文件名和行号，则必须使用宏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:21:15.657

创建一个类，并重载`operator<<`以实现写入文件或您想要的任何内容。

```
#include <fstream>
#include <iostream>

using namespace std;

class logger
{
public:
    void operator<<( const std::string & input );
}MyLogger;

void logger::operator <<(const string &input)
{
    std::ofstream of("filename.txt");
    of << input;
    of.close();
}

int main()
{
    MyLogger<<"sometext";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:21:35.497

不确定我是否完全理解这个问题，但我所做的是使用 WM_SETTEXT 消息（然后是另一个自定义消息来提交数据）将日志数据发送到另一个应用程序 - 您还需要编写一个基本的侦听器应用程序将读取和存储数据，最好在列表框之类的控件中。这非常快，因为它不涉及文件系统、管道、套接字等。您还可以在头文件中使用条件编译（由#define/#ifdef 指令控制）来打开或关闭日志记录。

# ios - Iphone Pixel RGBA值编辑

> ID：11392898
> 
> 赞同：0
> 
> 时间：2012-07-09T10:05:23.663
> 
> 标签：ios, uiimage, cgbitmapcontextcreate, cgcontextref

我的目标如下。

当玩家触摸屏幕时，程序应该找出触摸位置的像素值，然后循环遍历每个像素，任何具有完全相同 RGBA 值的像素都将被编辑，此时我只想设置alpha 为 0 以使它们全部不可见。

到目前为止，我已经设法检索信息，找出哪些对应于触摸的像素，但是当我设置像素并从新数据创建 UIImage 并设置它时。没有什么变化。

一点帮助将不胜感激。

代码如下

功能

(UIImage*)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy

```
// First get the image into your data buffer
CGImageRef imageRef = [image CGImage];

NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);

//convert phone screen coords to texture coordinates.
xx *= width/[[UIScreen mainScreen] bounds].size.width;
yy *= height/[[UIScreen mainScreen] bounds].size.height;

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));

NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel * width;
NSUInteger bitsPerComponent = 8;

CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
CGContextRelease(context);

/*                             MY STUFF                                     */
int counter = 0;
/*                             MY STUFF                                     */

// Now your rawData contains the image data in the RGBA8888 pixel format.
// Get the byteIndex of pixel tapped.

int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;

CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
byteIndex += 4;

for(int x = 0; x < width; x++) 
{
    for(int y = 0; y < height; y++) 
    {
        byteIndex = (x + (y * width)) * bytesPerPixel;

        CGFloat redVal   = ( rawData[byteIndex]     * 1.0) / 255.0;
        CGFloat greenVal = ( rawData[byteIndex + 1] * 1.0) / 255.0;
        CGFloat blueVal  = ( rawData[byteIndex + 2] * 1.0) / 255.0;
        CGFloat alphaVal = ( rawData[byteIndex + 3] * 1.0) / 255.0;
        byteIndex += 4;

        if( alphaVal != 0 )
        {
            if( redVal == red && greenVal == green && blueVal == blue )
            {
                rawData[byteIndex]     = 255; 
                rawData[byteIndex + 1] = 255; 
                rawData[byteIndex + 2] = 255; 
                rawData[byteIndex + 3] = 1; 
                counter ++;
            }
        }
    }
}

UIImage *newImage = [UIImage imageWithCGImage: imageRef];
image = newImage;

NSLog(@"Pixels amount: %i", counter);

free(rawData);

return image; 
```

它是这样称呼的

```
 tempBGRef.image = [MainMenuViewController getRGBAsFromImage:[tempBGRef image] atX:touchPointInView.x andY:touchPointInView.y]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:18:02.760

我认为按照你的目标，你应该看看[这个](http://115.com/file/bhk0hig0)

该页面是中文的，但是如果您打开绿色框，那么您应该下载一个 zip 文件。它使用扭曲技术来编辑背景。如果您查看触摸检测，您应该为您的项目奠定良好的基础。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:19:12.047

您修改 rawData 对象，但它不是 imageRef 包含的数据。您将 imageRef 数据复制到 rawData 对象，但是当您更改 rawData 值时 imageRef 不会更新。你应该调用[CGImageCreate](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageCreate)方法从你的 rawData 数组创建一个新的 CGImage 对象。

# android - 无法在android中打开本地数据库

> ID：11392901
> 
> 赞同：0
> 
> 时间：2012-07-09T10:05:39.827
> 
> 标签：android, database, cordova

我在android中有服务，从那个服务我开始了一个活动。我从服务中调用了活动中的方法。在那个方法中，我打开数据库并尝试插入值。不使用数据库，它工作正常。但是我的应用程序当我使用数据库时强制关闭

插件（java文件）-->服务-->活动（这里我尝试将数据插入数据库）

**服务.java**

```
public class MyService extends Service 
{
    @Override
    public IBinder onBind(Intent intent) 
    {
        return null;
    }

    @Override
    public void onCreate() 
    {
        Log.d(TAG, "onCreate");
    }

    @Override
    public void onDestroy() 
    {
        Log.d(TAG, "onDestroy");
    }

    public void onStart(Intent intent, int startid) 
    {
        Timer mTimer = new Timer(user);
        mTimer.scheduleAtFixedRate(new mainTask(), 5000,60000);//1 hour=3600 s

    }

    private class mainTask extends TimerTask 
    { 
        public void run() 
        {
            toastHandler.sendEmptyMessage(0);
        }
    }  

    private final Handler toastHandler = new Handler() 
    {
        public void handleMessage(Message msg) 
        {
             StorageHelper s=new StorageHelper();
             String a= s.UpdateValues(userid);
        }
    };    
} 
```

**活动.java**

```
public class StorageHelper extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState); 
    }

    public  String UpdateValues(int userid)
    {
        try {
            DBAdapter1 database=new DBAdapter1(this);
            database.open();
            long id=database.insert(71,4,"yes");
            database.close();
        } catch (SQLException e) {

        }
        return "success";
    }
} 
```

**请注意** ，当我在 oncreate 中打开数据库时，它的工作，但在 updatavalues() 数据库内部无法打开插入。

```
try {
    DBAdapter1 database=new DBAdapter1(this);
    database.open();
    long id=database.insert(71,4,"yes");
    database.close();
} catch (SQLException e) {

} 
```

我有两种力量接近

错误编号 1

```
07-09 15:16:27.859: E/AndroidRuntime(1211): FATAL EXCEPTION: main
07-09 15:16:27.859: E/AndroidRuntime(1211): java.lang.NullPointerException
07-09 15:16:27.859: E/AndroidRuntime(1211):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at com.app.mobilyzer.DBAdapter1.open(DBAdapter1.java:68)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at com.app.mobilyzer.StorageHelper.UpdateValues(StorageHelper.java:33)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at com.app.mobilyzer.MyService$1.handleMessage(MyService.java:121)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at android.os.Looper.loop(Looper.java:123)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at java.lang.reflect.Method.invoke(Method.java:521)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at dalvik.system.NativeStart.main(Native Method) 
```

错误号 2

```
07-09 15:16:36.889: E/AndroidRuntime(1237): FATAL EXCEPTION: main
07-09 15:16:36.889: E/AndroidRuntime(1237): java.lang.RuntimeException: Unable to start service com.app.mobilyzer.MyService@44fc6280 with null: java.lang.NullPointerException
07-09 15:16:36.889: E/AndroidRuntime(1237):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3063)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at android.app.ActivityThread.access$3600(ActivityThread.java:125)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2096)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at android.os.Looper.loop(Looper.java:123)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at java.lang.reflect.Method.invokeNative(Native Method)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at java.lang.reflect.Method.invoke(Method.java:521)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at dalvik.system.NativeStart.main(Native Method)
07-09 15:16:36.889: E/AndroidRuntime(1237): Caused by: java.lang.NullPointerException
07-09 15:16:36.889: E/AndroidRuntime(1237):     at com.app.mobilyzer.MyService.onStart(MyService.java:81)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at android.app.Service.onStartCommand(Service.java:420)
07-09 15:16:36.889: E/AndroidRuntime(1237):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3053)
07-09 15:16:36.889: E/AndroidRuntime(1237):     ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:16:10.660

这两个异常都是**NullPointerException**类型，是 database.open() 方法中的第一个。`DBAdapter1.java`:68。看看你在 DBAdapter1 类的第 68 行做什么。如果您怀疑该值可以为空/空，请始终进行空检查

```
07-09 15:16:27.859: E/AndroidRuntime(1211): java.lang.NullPointerException
07-09 15:16:27.859: E/AndroidRuntime(1211):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
07-09 15:16:27.859: E/AndroidRuntime(1211):     at com.app.mobilyzer.DBAdapter1.open(DBAdapter1.java:68) 
```

第二个例外是在第 81 行的 MyService.java 服务中。在 onstart 方法中。

```
07-09 15:16:36.889: E/AndroidRuntime(1237): Caused by: java.lang.NullPointerException
07-09 15:16:36.889: E/AndroidRuntime(1237):     at com.app.mobilyzer.MyService.onStart(MyService.java:81) 
```

# forms - CasperJS 中的填充方法

> ID：11392907
> 
> 赞同：0
> 
> 时间：2012-07-09T10:05:51.510
> 
> 标签：forms, phantomjs, casperjs

我想填写表格并提交。

检查我的脚本的一部分：

```
casper.then(function(){
    if(this.exists('#msisdn')){
        this.echo('ok found');
        **this.test.assertExists('form[id="internetPlus"]', 'form is found');
        this.fill('form[id="internetPlus"]', {
            'numero': 'xxxxxxxx'  
        },true);**
        this.click('#button'); 
```

我得到了这个错误：

```
**PASS form is found**
[info] [remote] attempting to fetch form element from selector:   
'form[id="internetPlus"]'
**[error] [remote] TypeError: 'undefined' is not an object (evaluating   
'field.getAttribute')
FAIL CasperError: Unable to fill form
#    type: uncaughtError
#    error: "CasperError: Unable to fill form"
CasperError: Unable to fill form                                               
  /home/soufyan/workspace/casperjs:524 in fill
  /home/soufyan/workspace/casperjs/kkostoreHomeTest.js:45
  /home/soufyan/workspace/casperjs:909 in runStep
  /home/soufyan/workspace/casperjs:252 in checkStep** 
```

我不明白为什么我无法填写表格，因为断言结果是好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:30:54.943

The form probably does not contain any inputs or fields with the name 'numero'. Make sure there is an input with that name.

I tried to reproduce your problem by simply adding a junk variable to the object literal that is passed to fill method. I got the exact same error.

# compilation - opa : stringmap 编译错误和 HttpRequest.Generic.get_form_data(HttpRequest.request x)

> ID：11392908
> 
> 赞同：1
> 
> 时间：2012-07-09T10:05:51.713
> 
> 标签：compilation, opa

我正在尝试编译以下代码，但它失败了：

```
import stdlib.core.map

function f()
{
        stringmap(string) myM = StringMap.add("rabbit", "horse", StringMap_empty)
        string rabbit= myM["rabbit"]
} 
```

这是为什么 ？我觉得这段代码可以与我之前发布的 opa (0.9.*) 一起使用。

如何访问存储在 StringMap 中的数据？在我的代码中，我想通过

```
HttpRequest.Generic.get_form_data(HttpRequest.request x). 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:25:30.387

不，您的代码不能在任何先前版本的 Opa 上运行。我们已经在您在此处打开的上一个线程中讨论了 Opa 和 StringMap 的某些方面：[Opa : howo to operating stringmap (and other map)](https://stackoverflow.com/questions/10586367/opa-howo-to-manipulate-stringmap-and-other-map)

总之：

*   Opa 是一种函数`f`式编程语言，您的函数不能以`rabbit = v`.
*   没有`myM["rabbit"]`语法，你必须`StringMap.get`在你的情况下使用。

这是一个工作代码：

```
import stdlib.core.map

function f()
{
        stringmap(string) myM = StringMap.add("rabbit", "horse", StringMap_empty)
        match (StringMap.get("rabbit", myM)) {
        case {none}: "not found"
        case {some:value}: value
        }
} 
```

# c++ - 矢量的 emplace_back

> ID：11392910
> 
> 赞同：18
> 
> 时间：2012-07-09T10:06:08.237
> 
> 标签：c++, stl, c++11

您能解释一下“完美转发”的工作原理吗？

我读到向量的 emplace_back 不需要复制或移动对象，因为它的参数是作为可变参数模板实现的。

```
std::vector<T>::emplace_back(_Args&&... __args) 
```

你能更详细地描述一下吗？为什么它不会复制也不会移动？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T10:13:46.577

`emplace_back`直接在向量中的正确位置构造元素。想想就好像

```
vector<T> v;
v.emplace_back(a,b,c); 
```

转换为（idx 为新索引）

```
new (v.data()+idx) T(a,b,c); 
```

（实际情况有点复杂，涉及转发参数 as`std::forward<_Args>()...`但获取 emplace 操作的密钥可能会更令人困惑）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T10:17:47.233

在 emplace_back 中实际上发生了两件事：

1.  您不会将 T 类型的对象传递给 T 的构造函数，而是将参数传递给 T 的构造函数。这样，​​对象构造就会被延迟：向量被扩展以适应新对象所需的内存，并调用构造函数来初始化对象在向量中。可变参数模板与副本没有任何关系，它们只允许将可变数量的参数转发给构造函数。
2.  构造函数本身的参数不会被复制，因为它们作为右值引用传递，并且 std::move 用于将它们转发给构造函数。基本上，移动语义避免了对象的深拷贝。

# objective-c - 从另一个对象返回对象时的目标c内存管理

> ID：11392912
> 
> 赞同：1
> 
> 时间：2012-07-09T10:06:11.573
> 
> 标签：objective-c, memory-management

我在理解内存管理的一个概念时遇到问题，因为我是目标 C 的新手。例如，假设我有一个类 Bar 和 Foo。

在我调用的主要功能中：

```
Foo *foo = [bar getFoo]; //In my bar method I return foo
[foo retain];
[foo callMethod];
[foo release]; 
```

我知道这是正确的做法。但是为什么我们在从另一个对象中获取它之后必须保留它，这是否意味着返回对象的保留计数为 0 ？所以我们必须重新计算它才能使用它？但如果它的计数为 0，我们怎么知道它仍然存在。我们可以假设，因为它是增加保留计数的下一行，所以对象内存不会被重新分配，但是如果我们有多线程程序怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:09:32.837

当一个类方法返回一个对象时，它会返回，`autorelease`这样你就不必费心了；通常：

```
- (Foo *)getFoo
{
    return [[_foo retain] autorelease];
} 
```

如果您只`foo`在调用方法的生命周期内使用它，则不需要它，因为直到下次通过运行循环时`retain`它才会d ，所以您的代码实际上应该是：`autorelease`

```
Foo *foo = [bar getFoo]; //In my bar method I return foo
[foo callMethod]; 
```

但是，如果你想`foo`在调用方法的范围之外保持一段时间，你需要`retain`它，然后`release`再过一段时间。

还有一件事; getter 方法名称的约定只是“名称”，所以你的 setter 应该是`setFoo`，你的 getter 应该是`foo`. 遵守命名约定是一个好主意，因为它可以让你知道一个方法在 7 个月内做了什么，并且静态分析之类的工具可以理解这些约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:04:36.823

该方法`getFoo`不返回保留计数为 0 的对象。它返回一个具有**+0 保留计数**的对象，这意味着：

*   对象的保留计数不为空（否则，该对象将不存在）
*   并且保留计数没有被方法的调用改变，或者如果它是，它是以一种平衡的方式（与`release`/ `autorelease`as `retain`/ `alloc`/ `new`/一样多`copy`）。

因此，对象的生命周期完全取决于它被保留的位置和方式。我们不知道该对象将有效多长时间，因为任何方法调用*都可能*释放该对象。

例如，让我们考虑以下代码：

```
id anObject = [anArray objectAtIndex:0];
[anArray removeObjectAtIndex:0];
```

当我们删除它时，该对象`anObject`不再被数组保留。因此它可能已被破坏（但也许不是因为它仍在其他地方使用）。

`alloc`通常，当从方法（除、或）获取对象时`copy`，我们可以假设：`new``retain`

*   要么对象被保留然后自动释放，
*   要么对象被返回它的对象保留。

所以我们知道对象`foo`是有效的，直到我们从当前方法/函数返回，或者我们调用改变对象状态的方法/函数`bar`，以先到者为准。在那之后，它可能已经被破坏了。

因此，在您的情况下，您可以安全地省略`retain`/`release`对。

然而，除非我们知道我们调用的每个方法的实现，否则很难保证一个对象不会被释放。因此，保留（然后释放）我们获得的每一个对象是更安全的方法，这也是当您启用 ARC（自动引用计数）时编译器将执行的操作。

但这将需要您编写大量`retain`/`release`并且您的代码将变得难以阅读、理解和维护。而且，你写的代码越多，得到的 bug 就越多（除非你从不写 bug）。

总之，除非您有理由怀疑它可能会消失，否则您不需要保留对象。

# .htaccess - .htaccess 重定向到子域

> ID：11392915
> 
> 赞同：1
> 
> 时间：2012-07-09T10:06:18.863
> 
> 标签：.htaccess

我想将链接重定向
`www.example.com/ex.php?name=andy`
到
`www.andy.example.com`
可以给我代码吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:43:20.170

为什么使用.htaccess？你可以用 PHP 做到这一点。

```
<?php
$url = 'http://www.'. $_GET['name'] .'.example.com';

header('Location: '. $url);
?> 
```

只需确保在使用 header() 之前不输出任何文本。

要从子域 URL 获取名称，请执行以下操作。

```
<?php
$new_url = $_SERVER["SERVER_NAME"];
$url_parts = explode('.', $new_url);

echo 'Name is: '. $url_parts[0];
?> 
```

james.example.com 的结果是“名字是：詹姆斯”。

# java - Apache Felix 错过了 javax.sql.Datasource

> ID：11392916
> 
> 赞同：3
> 
> 时间：2012-07-09T10:06:23.727
> 
> 标签：java, sql, osgi, apache-felix

我刚从 Equinox 迁移到 Apache Felix。现在缺少 javax.sql.datasource 类：

```
java.lang.NoClassDefFoundError: javax/sql/DataSource 
```

我的包正在清单文件中导入 javax.sql，我尝试将以下行添加到 felix 配置中：

```
org.osgi.framework.system.packages.extra=javax.sql 
```

有什么方法可以教 felix 导出捆绑包，还是有一个捆绑包可以做到这一点？即使清单中没有 import 语句，它在 Equinox 中也能正常工作。

编辑：清单文件：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Database
Bundle-SymbolicName: ...database
Bundle-Version: 1.0.0
Import-Package: javax.sql,
 org.osgi.framework;version="1.3.0",
 org.osgi.service.component;version="1.1.0"
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-ClassPath: lib/mysql-connector-java-5.1.20-bin.jar,
 .
Export-Package: ...database.model,
 ...database.service
Service-Component: OSGI-INF/component.xml 
```

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T11:06:38.687

Felix 已经导出了这个包。

`Import-Package`更有可能的是你的陈述可能有问题。您确实声明您的捆绑包导入包，但请发布您的 MANIFEST.MF 的副本以确保。

# struts2 - ajax struts2-dojo-plugin 提交两次

> ID：11392919
> 
> 赞同：0
> 
> 时间：2012-07-09T10:06:48.930
> 
> 标签：struts2, dojo

我正在为 ajax 使用“struts2-dojo-plugin-2.1.8.1.jar”这个插件。但我面临几个问题。以下是我的 jsp 代码我有一个 HTML 按钮要提交

```
> <button value="Approve" id="BTN_ID"
> onclick="saveUser();">Save</button> 
```

然后我在点击保存时调用一个javascript函数如下

```
> function saveUser(){  
>   dojo.event.topic.publish("userSaveTopic");
>   $('#BTN_ID').attr('disabled', true);    var
> } 
```

我有一个 ajax div

```
<sd:div id="SAVE_DIV"
    autoStart="false"
    showLoadingText="false"
    listenTopics="userSaveTopic"
    href="userSaveAction"
    theme="ajax"
    formId="UserCreationForm">
</sd:div> 
```

问题：- 1）`href="userSaveAction"`虽然我已经设置，但在加载 HTML 表单时执行的操作`autoStart="false"` 2）第二个问题是，当我实际单击按钮保存数据时，它被提交了两次并插入了数据冗余记录数据库。

请告诉我如何解决 优先级的**第二个问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T13:20:32.740

我没有使用 listenTopics ，而是使用了 notifyTopics

早年

```
<sd:div id="saveExpense"
showLoadingText="false"
listenTopics="saveClaimDetails"
href="SaveClaimDetail"
theme="ajax"
formId="expenseClaim" >
</sd:div> 
```

现在

```
<sd:div id="saveExpense"
showLoadingText="false"
notifyTopics="saveClaimDetails"
href="SaveClaimDetail"
theme="ajax"
formId="expenseClaim" >
</sd:div> 
```

# jquery - 如何一次仅将 jquery 效果应用于一个元素，而不是整个列表？

> ID：11392920
> 
> 赞同：1
> 
> 时间：2012-07-09T10:06:49.913
> 
> 标签：jquery

我有一个 CMS，它生成如下列表：

```
<div class="span-feed">
<div class="project-thumb"><img src="..." /></div>
<div class="info-overlay"><h1>Something</h1></div>
</div><!--.span-feed--> 
```

我希望隐藏 info-overlay 类并仅在用户将鼠标悬停在缩略图上时才可见。单个缩略图很容易实现，但是当生成的列表中有多个项目时，悬停效果会在所有缩略图上触发，这在逻辑上是正确的，但我不希望这种情况发生。我是一个 jQuery 菜鸟，请建议我如何将效果一次限制为一个缩略图。我只希望在用户悬停的缩略图上触发效果。

编辑：CMS 正在生成一个 ul 列表，如下所示：

```
<ul>
<li><div class="span-feed">
<div class="project-thumb"><img src="..." /></div>
<div class="info-overlay"><h1>Something</h1></div>
</div><!--.span-feed--></li>

<li><div class="span-feed">
<div class="project-thumb"><img src="..." /></div>
<div class="info-overlay"><h1>Something</h1></div>
</div><!--.span-feed--></li>

<li><div class="span-feed">
<div class="project-thumb"><img src="..." /></div>
<div class="info-overlay"><h1>Something</h1></div>
</div><!--.span-feed--></li>

</ul> 
```

jQuery如下：

```
$('.project-thumb').mouseover(function(){
    $('.info-overlay').fadeIn("slow");
});

$('.project-thumb').mouseout(function(){
    $('.info-overlay').fadeOut();
}); 
```

谢谢你的时间。

编辑：谢谢@NimChimpsky 和@Simon，我已经成功了 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:19:25.400

```
$('.project-thumb').hover(function(){
    $(this).next('.info-overlay').fadeIn("slow");
  }, function(){
    $(this).next('.info-overlay').fadeOut();
  }); 
```

将悬停功能与下一个选择器一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:18:34.757

您可以使用这个 next，它选择与选择器匹配的下一个元素。

```
$('.project-thumb').mouseover(function(){
    $(this).next('.info-overlay').fadeIn("slow");
});

$('.project-thumb').mouseout(function(){
    $(this).next('.info-overlay').fadeOut();
}); 
```

# c - 双链表和二叉树的节点结构有什么区别？

> ID：11392922
> 
> 赞同：4
> 
> 时间：2012-07-09T10:06:54.943
> 
> 标签：c, linked-list, binary-tree

我在一次采访中被问到双向链表和二叉树的节点结构之间的区别。

**双向链表结构**

```
typedef struct
{
int data;
struct node * next;
struct node * prev;
}node; 
```

**二叉树结构**

```
typedef struct
{
int data;
struct node * left;
struct node * right;
}node; 
```

1.  在双向链表中，我们使用指针在线性排列的列表中前后遍历。

2.  但是其中左右指针用于访问左右节点。

除了使用方式之外，我没有发现节点结构有任何区别。你能给我一些不同吗？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T10:11:59.177

我想你已经回答了你自己的问题。除了指针 (`next/prev`和`left/right`) 的名称有明显差异外，差异是：

*   在双向链表中，如果`n.next`链接到`m`则`m.prev`链接到`n`. 在二叉树中情况并非如此。
*   在双向链表中，一个节点最多可以有两个链接。在二叉树中，每个节点最多有一个链接。
*   在双向链表中，可以跟随链接并最终到达您开始的节点。这在二叉树中是不可能的。

如果双向链表也是循环的，则以下也成立：

*   在具有一个节点的循环双向链表中，`n.next`链接到`n`并且`n.prev`还链接到`n`。这在二叉树中是不可能的：`n.left`并且`n.right`不要链接到同一个节点。
*   在具有一个节点的二叉树中，`n.next`可以`n.prev`不指向任何节点（即，树只是一个叶节点），但在具有一个节点的循环双向链表中，两个链接总是有一个值（尽管指向同一个节点）。
*   在二叉树中，为`n.left`or取值是可选的`n.right`。如果二叉树不平衡，则可能是所有节点都有值 for`n.right`而不是 for `n.left`。对于所有指针都有值的循环双向链表，情况并非如此。

在结构和内容方面，节点是相同的，但不同之处在于指针的使用方式以及它们的值可以是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T10:15:43.803

您可以概括：双向链表和二叉树都是有向图的示例，其中每个节点最多可以有两个传出边（因为这是结构中有多少指针字段）。

每个数据结构都施加了额外的限制（例如，在这两种情况下，整个图都可以从根节点到达，但只有在双向链表中，整个图才能从每个节点到达）。这些限制表征了不同的数据结构，但对用于表示节点的结构没有影响。

有时你想要一个二叉树，其中每个节点都有一个指向其父节点的指针——在这种情况下，两个结构会不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T10:12:47.880

您是绝对正确的：假设相同的有效负载类型（在您的情况下是`int`），这两种节点类型的二进制布局是相同的。只有两个指针的使用使两种节点类型不同。

如果您不关心可读性，则可以使用节点

```
typedef struct node {
    int data;
    struct node *p1;
    struct node *p2;
} node; 
```

表示二叉树和双向链表。不过，这不是一个好主意，因为代码会立即变得难以被其他程序员识别。

# url - 为什么 .NET 有 UriBuilder 而不是 UrlBuilder？

> ID：11392924
> 
> 赞同：8
> 
> 时间：2012-07-09T10:07:08.713
> 
> 标签：url, uri, uribuilder

[好的，所以在消化了 URL 和 URI 之间的这一](https://stackoverflow.com/questions/176264/)区别这样出色的答案后，我想我现在了解了两者之间的区别。

我现在*不*明白的是为什么 .NET Framework 有一个 UriBuilder 类，据我所知，它只适用于作为资源*定位器*的 URI，因此应该正确地称为 UrlBuilder。

有人可以给我一个`UriBuilder`用于构建*不是*资源定位器的 URI 的示例吗？或者在 .NET 框架的设计中做出这个决定的一些理由？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T01:24:57.567

仔细想想，a`UriBuilder`比 URL Builder 更强大、更广泛。由于每个 URL 都是一个 URI，因此 UriBuilder 本质上是一个 URL Builder。

所以基本上问题是你什么时候可以将 UriBuilder 用于非 URL URI。好吧，我想最好的例子是[URN](http://en.wikipedia.org/wiki/Uniform_resource_name)（因为 URL 和 URN 基本上是定位符和名称——URI 的两种分类）。例如，可以使用 URN 来构建 uuid (ie `urn:uuid:6e8bc430-9c3a-11d9-9669-0800200c9a66`) 或 ISBN (ie `ISBN 0-486-27557-4`)。这些 URN 不像 URL 那样包含指向资源的位置信息，它们只包含名称或 ID。UriBuilder 不仅可以构建 URL（指向资源），还可以构建 URN。如果您查看[Uri.Scheme 属性](http://msdn.microsoft.com/en-us/library/system.uri.scheme.aspx)，您将在 Uri 的可能方案列表中看到 uuid。

此外，.NET 在*技术上*确实有一个[UrlBuilder 类](http://msdn.microsoft.com/en-us/library/system.web.ui.design.urlbuilder.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:25:41.943

```
Uri _uri = new Uri(URL);
            string tURL = _uri.Scheme + "://" + _uri.Host + _uri.LocalPath;
            Console.WriteLine("Before: " + tURL);
            uri = new UriBuilder(tURL);
            Console.WriteLine("After:  " + uri.Uri.ToString()); 
```

# jquery - jquery ajax 函数在边 jquery 每个函数

> ID：11392927
> 
> 赞同：0
> 
> 时间：2012-07-09T10:07:25.623
> 
> 标签：jquery, ajax

我有以下代码：

```
$(document).ready(function () {

        $('div.env').each(function (index, item) {

            var vm = $(item).text();
            alert(vm);
            var url = "http://localhost:56656/HTML" + vm + ".htm";
            alert(url);
            $.ajax(url, {
                type: "GET",
                dataType: "html",
                success: function (data) {
                    alert("Colouring");
                    var style = $(data).filter('div').attr('style');
                    var styleObj = {};
                    $.each(style.split(';'), function () {
                        var rule = this.split(':');
                        styleObj[$.trim(rule[0])] = $.trim(rule[1]);
                    });

                    $(item).css('background', styleObj.background);

                },
                error: function () {
                    alert("Error");
                    $('div').css('background', '#f00');
                }
            });

        }); 
```

问题是在执行 Ajax 函数之前，我对 div 类“env”中的每个值都有一个警报。

我想要的是，对于每个 div，获取值，执行 ajax，获取下一个值。似乎 ajax 是在最后完全执行的。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:12:20.510

默认情况下，Ajax 调用是异步的，因此您的循环将继续执行并且很可能在第一次 ajax 调用完成之前完成。

老实说，在循环中进行 ajax 调用似乎不是一个好方法——如果我是你，我会尝试不同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:12:39.310

这就是您已经使用的回调函数的全部内容。他们在查询完成时被调用，例如

```
$.ajax(url, {
    type: "GET",
    dataType: "html",
    success: function (data) {
        /* this code will be run when the query is complete */
    },
    error: function () {
        /* this code will be run when the query fails */
    }
}); 
```

尝试这样的事情：

```
$(document).ready(function () {

        $('div.env').each(function (index, item) {

            $.ajax(url, {
                type: "GET",
                dataType: "html",
                success: function (data) {
                    alert("Colouring");
                    var style = $(data).filter('div').attr('style');
                    var styleObj = {};
                    $.each(style.split(';'), function () {
                        var rule = this.split(':');
                        styleObj[$.trim(rule[0])] = $.trim(rule[1]);
                    });

                    $(item).css('background', styleObj.background);

                    var vm = $(item).text();
                    alert(vm);
                    var url = "http://localhost:56656/HTML" + vm + ".htm";
                    alert(url);

                },
                error: function () {
                    alert("Error");
                    $('div').css('background', '#f00');
                }
            });

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:15:36.607

设置`async: false`您的 ajax 调用。它会更慢，但它会做你想做的事。

### 参考：

*   [http://api.jquery.com/jQuery.ajax/#options](http://api.jquery.com/jQuery.ajax/#options)
*   [如何使所有 AJAX 调用顺序？](https://stackoverflow.com/questions/1151598/how-to-make-all-ajax-calls-sequential)

# c# - 计划任务未在 Windows Server 2008 R2 上触发 exe

> ID：11392929
> 
> 赞同：0
> 
> 时间：2012-07-09T10:07:34.113
> 
> 标签：c#, .net, scheduled-tasks, console-application, windows-server-2008-r2

我有一个控制台应用程序，其目标版本是 .Net Framework 3.5。当我尝试手动触发编译的 exe 时，程序执行并完美地完成了它的工作。但是当使用任务计划程序时，exe 根本不会被触发。

Task Sceduler 中的错误详情如下：

**上次运行结果 0xE0434F4D**

**编辑：**

事件日志如下，

```
Fault bucket , type 0
Event Name: CLR20r3
Response: Not available
Cab Id: 0

Problem signature:
P1: flvtomp4converter.exe
P2: 1.0.0.0
P3: 4ffa8abc
P4: mscorlib
P5: 2.0.0.0
P6: 4e1539fa
P7: 349e
P8: 119
P9: System.IO.DirectoryNotFound
P10: 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T20:12:55.747

欢迎来到 Windows 2008 家族的精彩世界。这是关于您的应用程序计划在任务计划程序中运行的用户以及特定用户对您的应用程序处理所涉及的所有（！！！）文件夹的权限。此外，您必须确保该用户授权在安全设置中运行批处理。仅仅成为管理员组的成员已经不够了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-14T08:27:06.423

就我而言，这是因为我的控制台应用程序试图在其中创建一个`log.txt`文件`C:\Windows\System32`，而任务计划程序无权在该文件夹中创建一个新文件。

发生这种情况是因为我没有指定放置日志文件的绝对文件名。

* * *

让我用我的代码示例来解释这一点：

我在这个目录中有一个程序`D:\somefolder\`，`.exe`目录是`D:\somefolder\program.exe`

这是我的代码的快照（visual basic）

错误的 ：

```
Dim logFileName As String = "log.txt"
/*
     Create file based on logFileName directory 
*/ 
```

*   如果我`.exe`通过 Windows 资源管理器执行 -> 它将创建一个带有目录的日志文件`D:\somefolder\log.txt` **（没问题）**
*   如果我`.exe`通过任务调度程序执行 - >它将创建一个带有目录的日志文件`C:\Windows\System32\log.txt` **（这将留下最后的运行结果 0xE0434F4D**）

正确的 ：

```
Dim logFileName As String = AppDomain.CurrentDomain.BaseDirectory + "/log.txt"
/*
     Create file based on logFileName directory 
*/ 
```

*   如果我`.exe`通过 Windows 资源管理器执行 -> 它将创建一个带有目录的日志文件`D:\somefolder\log.txt` **（没问题）**

*   如果我`.exe`通过任务调度程序执行 - >它将创建一个带有目录的日志文件`D:\somefolder\log.txt` **（没问题）**

因此，您需要指定一个绝对文件名来放置日志文件。在我的示例中，我使用`AppDomain.CurrentDomain.BaseDirectory`

# excel - currentchart.export 兼容性 excel 2010 与 2003

> ID：11392930
> 
> 赞同：0
> 
> 时间：2012-07-09T10:07:45.160
> 
> 标签：excel, excel-2007, excel-2003, vba

我需要从 excel 中导出图表。我在 excel 2010 中完成了它并且工作正常，但是在 excel 2003 中也需要该应用程序。当我在 2003 年使用相同的代码时，图像没有正确导出（它是一个圆环图，并且“部分”没有很好地嵌入）。

这是我正在使用的代码：

```
Sheets("SLA Chart").Select
ActiveSheet.Shapes.Range(Array("Dibujo")).Select
Selection.Copy
Range("H5").Select
ActiveSheet.Pictures.Paste.Select
Selection.Name = "imagen"
Selection.Copy
Charts.Add
ActiveChart.Paste
Selection.ShapeRange.PictureFormat.Crop.PictureWidth = 282
Selection.ShapeRange.PictureFormat.Crop.PictureHeight = 213
Selection.ShapeRange.PictureFormat.Crop.PictureOffsetX = 0
Selection.ShapeRange.PictureFormat.Crop.PictureOffsetY = 40
Selection.ShapeRange.ScaleWidth 0.75, msoFalse, msoScaleFromTopLeft
Selection.ShapeRange.ScaleHeight 0.8, msoFalse, msoScaleFromTopLeft
Selection.ShapeRange.IncrementLeft 275
Selection.ShapeRange.IncrementTop 175 'I can see here the image right
archivo = ThisWorkbook.Path & Application.PathSeparator _
& "temp.gif"
ActiveChart.Export Filename:=archivo, FilterName:="GIF" 'The image is not well embedded
Application.DisplayAlerts = False
ActiveChart.Delete
Application.DisplayAlerts = True
Sheets("SLA Chart").Select
ActiveSheet.Shapes.Range(Array("imagen")).Delete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:58:47.440

我找到了其他解决方案...您可以将图像复制为位图，然后从剪贴板中保存。

```
Sheets("SLA Chart").Select
'ActiveSheet.Shapes.Range(Array("Cuentakilometros")).Select
ActiveSheet.Shapes(3).CopyPicture
ActiveSheet.Paste
imagen = Selection.Name
Selection.CopyPicture Appearance:=xlScreen, Format:=xlBitmap

Clip2File

archivo = ThisWorkbook.Path & Application.PathSeparator & "\temp.bmp"
ActiveSheet.Shapes.Range(Array(imagen)).Delete 
```

其中 Clip2file 是从页面[http://www.vbaexpress.com/forum/archive/index.php/t-6046.html](http://www.vbaexpress.com/forum/archive/index.php/t-6046.html)获得的函数 （Killian 的解决方案谢谢！！）

```
'##############################################
 '### Paste into a standard module - call Clip2File ###
 '##################################################

' Checks the clipboard for a bitmap
' If found, creates a standard Picture object from the
' clipboard contetnts and saves it to a file
' The code requires a reference to the "OLE Automation" type library
' The code in this module has been derived primarily from _
' the PatsePicture sample on Stephen Bullen's Excel Page _
' - http://www.bmsltd.ie/Excel/Default.htm
'Windows API Function Declarations
Private Declare Function IsClipboardFormatAvailable Lib "user32" _
(ByVal wFormat As Integer) As Long
Private Declare Function OpenClipboard Lib "user32" _
(ByVal hwnd As Long) As Long
Private Declare Function GetClipboardData Lib "user32" _
(ByVal wFormat As Integer) As Long
Private Declare Function CloseClipboard Lib "user32" () As Long
Private Declare Function OleCreatePictureIndirect Lib "olepro32.dll" ( _
PicDesc As uPicDesc, RefIID As GUID, ByVal fPictureOwnsHandle _
As Long, IPic As IPicture) As Long
Private Declare Function CopyImage Lib "user32" (ByVal handle _
As Long, _
ByVal un1 As Long, ByVal n1 As Long, ByVal n2 As Long, _
ByVal un2 As Long) As Long

'The API format types we need
Const CF_BITMAP = 2
Const IMAGE_BITMAP = 0
Const LR_COPYRETURNORG = &H4

'Declare a UDT to store a GUID for the IPicture OLE Interface
Private Type GUID
Data1 As Long
Data2 As Integer
Data3 As Integer
Data4(0 To 7) As Byte
End Type

 'Declare a UDT to store the bitmap information
Private Type uPicDesc
Size As Long
Type As Long
    hPic As Long
    hPal As Long
End Type

Sub Clip2File()

    Dim strOutputPath As String, oPic As IPictureDisp

     'Get the filename to save the bitmap to
    strOutputPath = ThisWorkbook.Path & Application.PathSeparator & "temp.bmp"

     'Retrieve the picture from the clipboard...
    Set oPic = GetClipPicture()

     '... and save it to the file
    If Not oPic Is Nothing Then
        SavePicture oPic, strOutputPath
        'MsgBox "File saved: " & strOutputPath
    Else
        MsgBox "Unable to retrieve bitmap from clipboard"
    End If
End Sub

Function GetClipPicture() As IPicture

    Dim h As Long, hpicavail As Long, hPtr As Long, _
    hPal As Long, hCopy As Long

     'Check if the clipboard contains a bitmap
    hpicavail = IsClipboardFormatAvailable(CF_BITMAP)

    If hpicavail <> 0 Then
         'Get access to the clipboard
        h = OpenClipboard(0&)
        If h > 0 Then
             'Get a handle to the image data
            hPtr = GetClipboardData(CF_BITMAP)
            hCopy = CopyImage(hPtr, IMAGE_BITMAP, 0, 0, LR_COPYRETURNORG)
             'Release the clipboard to other programs
            h = CloseClipboard
             'If we got a handle to the image, convert it into _
             'a Picture object and return it
            If hPtr <> 0 Then Set GetClipPicture = CreatePicture(hCopy, _
            0, CF_BITMAP)
        End If
    End If

End Function

Private Function CreatePicture(ByVal hPic As Long, ByVal hPal As Long, _
    ByVal lPicType) As IPicture

     ' IPicture requires a reference to "OLE Automation"
    Dim r As Long, uPicInfo As uPicDesc, IID_IDispatch As GUID, _
    IPic As IPicture

     'OLE Picture types
    Const PICTYPE_BITMAP = 1

     ' Create the Interface GUID (for the IPicture interface)
    With IID_IDispatch
        .Data1 = &H7BF80980
        .Data2 = &HBF32
        .Data3 = &H101A
        .Data4(0) = &H8B
        .Data4(1) = &HBB
        .Data4(2) = &H0
        .Data4(3) = &HAA
        .Data4(4) = &H0
        .Data4(5) = &H30
        .Data4(6) = &HC
        .Data4(7) = &HAB
    End With

     ' Fill uPicInfo with necessary parts.
    With uPicInfo
        .Size = Len(uPicInfo) ' Length of structure.
        .Type = PICTYPE_BITMAP ' Type of Picture
        .hPic = hPic ' Handle to image.
        .hPal = 0 ' Handle to palette (if bitmap).
    End With

     ' Create the Picture object.
    r = OleCreatePictureIndirect(uPicInfo, IID_IDispatch, True, IPic)

     ' Return the new Picture object.
    Set CreatePicture = IPic

End Function 
```

# php - Symfony2 中 $em->clear() 的未定义索引错误

> ID：11392931
> 
> 赞同：19
> 
> 时间：2012-07-09T10:08:08.720
> 
> 标签：php, symfony, unit-of-work, undefined-index, memory-limit

我编写了一个 Symfony 命令来从 API 导入一些数据。它可以工作，但问题是当我在我的数据库中插入一个大 JSON 时，我的 PHP 内存使用量会增加。每次活动导入后，我的 unitOfWork 都会增加“2”。

我已经取消设置所有使用过的对象，并且当您想要进行大量批处理时，我已经阅读了 Symfony2 的文档：http: [//www.doctrine-project.org/blog/doctrine2-batch-processing.html](http://www.doctrine-project.org/blog/doctrine2-batch-processing.html)

但是当我使用`$em->clear()`我的实体管理器时会出现这个错误：

> 注意：未定义的索引：000000007b56ea7100000000e366c259 在 path-to-application\vendor\doctrine\lib\Doctrine\ORM\UnitOfWork.php 行 2228

这是我的完整代码：

```
 /**
 * @see Command
 */
protected function configure() {
  $this
    ->setName('ks:user:runkeepersync')
    ->setDescription('Synchroniser les activités d\'un utilisateur runkeeper')
    ->setDefinition(array(
      new InputArgument('access_token', InputArgument::REQUIRED, 'Access token'),
    ))
}

/**
 * @see Command
 */
protected function execute(InputInterface $input, OutputInterface $output) {
  $accessToken = $input->getArgument('access_token');
  $em = $this->getContainer()->get('doctrine')->getEntityManager();
  $UserHasServices = $em->getRepository('KsUserBundle:UserHasServices')->findOneByToken($accessToken);
  if (!is_object($UserHasServices) ) {
    echo "Impossible de trouver l'utilisateur qui possède le jeton ".$accessToken."";
  }
  $user    = $UserHasServices->getUser();
  $service = $UserHasServices->getService();
  echo "avant de requérir l'api : ".memory_get_usage()."\n";
  try {
    $rkApi = $this->getContainer()->get('ks_user.runkeeper');
    $rkApi->setAccessToken($accessToken);
    $activities  = $rkApi->getFitnessActivities(0,25);
    $nbParPages  = 25;
    $nomberActivitites = $activities->size;
    $aActivities = $activities->items;
    $nbPages =  floor ($nomberActivitites/$nbParPages);
    $aEndurance = array("Running", "Cycling", "Mountain Biking", "Walking", "Hiking", "Downhill Skiing", "Cross-Country Skiing", "Snowboarding", "Skating","Wheelchair", "Rowing", "Elliptical", "Other");
    $aEnduranceUnderWater = array("Swimming");
    $enduranceOnEarthType = $em->getRepository('KsActivityBundle:SportType')->findOneByLabel("endurance");
    if (!is_object($enduranceOnEarthType) ) {
      echo "Impossible de trouver le type de sport d'endurance";
    }
    $enduranceUnderWaterType = $em->getRepository('KsActivityBundle:SportType')->findOneByLabel("endurance_under_water");
    if (!is_object($enduranceUnderWaterType) ) {
      echo "Impossible de trouver le type de sport d'endurance sous l'eau ";
    }
    echo "Après avoir récupéré 25 activités : ".memory_get_usage()."\n";
    $a = 0;
    for($i=0;$i<=$nbPages;$i++){
      if($i!=0){
        $activities  = $rkApi->getFitnessActivities($i,25);
        $aActivities = $activities->items;
      }
      foreach ($aActivities as $activity) {
        $a = $a+1;
        $codeSport = $this->formatNameSport($activity->type);
        $sport = $em->getRepository('KsActivityBundle:Sport')->findOneByCodeSport($codeSport);
        if (!is_object($sport) ) {
          $sport = new \Ks\ActivityBundle\Entity\Sport();
          $sport->setLabel($codeSport);
          $sport->setCodeSport($codeSport);
          $sport->setSportType($enduranceOnEarthType);
          $em->persist($sport);
          $em->flush();
        }
        $activityDetail = json_decode($rkApi->requestJSONHealthGraph($activity->uri));
        if(in_array($activity->type, $aEndurance)){
          $urlActivitieDetail = $activityDetail->activity;
          $ActivitySessionEnduranceOnEarth = new \Ks\ActivityBundle\Entity\ActivitySessionEnduranceOnEarth($user);
          isset($activity->total_distance)? $ActivitySessionEnduranceOnEarth->setDistance($activity->total_distance) : "";
          isset($activity->duration)? $ActivitySessionEnduranceOnEarth->setDuration($this->secondesToTimeDuration($activity->duration)) : "";
          isset($activity->start_time)?  $ActivitySessionEnduranceOnEarth->setIssuedAt(new \DateTime($activity->start_time)) : "";
          $ActivitySessionEnduranceOnEarth->setModifiedAt(new \DateTime('Now'));
          $ActivitySessionEnduranceOnEarth->setSport($sport);
          isset($activityDetail->total_calories)?  $ActivitySessionEnduranceOnEarth->setCalories($activityDetail->total_calories) : "";
          isset($activityDetail->climb)?  $ActivitySessionEnduranceOnEarth->setElevationGain($activityDetail->climb) : "";
          $maxElevation = 0;
          $minElevation = 10000;
          if(isset($activityDetail->path)){
            foreach($activityDetail->path as $gpsPoint){
              if($gpsPoint->altitude > $maxElevation){
                $maxElevation = $gpsPoint->altitude;
              }
              if($gpsPoint->altitude < $minElevation){
                $minElevation = $gpsPoint->altitude;
              }
            }
            $ActivitySessionEnduranceOnEarth->setElevationMin($minElevation);
            $ActivitySessionEnduranceOnEarth->setElevationMax($maxElevation);
          }
          $em->persist($ActivitySessionEnduranceOnEarth);
          $em->flush();
          //Pour chaque activité on a un identifiant relatif au service qu'on synchronise
          $ActivityComeFromService = new \Ks\ActivityBundle\Entity\ActivityComeFromService();
          $ActivityComeFromService->setActivity($ActivitySessionEnduranceOnEarth);
          $ActivityComeFromService->setService($service);
          $ActivityComeFromService->setIdWebsiteActivityService($activity->uri);
          $ActivityComeFromService->setSourceDetailsActivity($rkApi->requestJSONHealthGraph($activity->uri));
          $ActivityComeFromService->setTypeSource("JSON");
          $em->persist($ActivityComeFromService);
          $em->flush();
          echo "Import de l'activite num ".$a." type :".$activity->type." effectue avec success \n";
          unset($ActivitySessionEnduranceOnEarth);
          unset($ActivityComeFromService);
          echo "UnitOFWOrk -> ".$em->getUnitOfWork()->size()."\n";
        }
        if(in_array($activity->type, $aEnduranceUnderWater)){
          $ActivitySessionEnduranceUnderWater = new \Ks\ActivityBundle\Entity\ActivitySessionEnduranceUnderWater($user);
          isset($activity->total_distance)? $ActivitySessionEnduranceUnderWater->setDistance($activity->total_distance) : "";
          isset($activity->duration)? $ActivitySessionEnduranceUnderWater->setDuration($this->secondesToTimeDuration($activity->duration)) : "";
          isset($activity->start_time) && !empty($activity->start_time)?  $ActivitySessionEnduranceUnderWater->setIssuedAt(new \DateTime($activity->start_time)) : "";
          $ActivitySessionEnduranceUnderWater->setModifiedAt(new \DateTime('Now'));
          $ActivitySessionEnduranceUnderWater->setSport($sport);
          isset($activityDetail->total_calories)?  $ActivitySessionEnduranceUnderWater->setCalories($activityDetail->total_calories) : "";
          isset($activityDetail->notes)?  $ActivitySessionEnduranceUnderWater->setDescription($activityDetail->notes) : "";
          $em->persist($ActivitySessionEnduranceUnderWater);
          $em->flush();
          $ActivityComeFromService = new \Ks\ActivityBundle\Entity\ActivityComeFromService();
          $ActivityComeFromService->setActivity($ActivitySessionEnduranceUnderWater);
          $ActivityComeFromService->setService($service);
          $ActivityComeFromService->setIdWebsiteActivityService($activity->uri);
          $ActivityComeFromService->setSourceDetailsActivity($rkApi->requestJSONHealthGraph($activity->uri));
          $ActivityComeFromService->setTypeSource("JSON");
          $em->persist($ActivityComeFromService);
          $em->flush();
          echo "Import de l'activité num ".$a." type :".$activity->type." effectué avec succès\n";
          unset($ActivitySessionEnduranceUnderWater);
          unset($ActivityComeFromService);
        }
        echo "Après chaque activité : ".memory_get_usage()."\n";
        unset($sport);
        unset($activityDetail);
        $em->clear();
      }
    }
  } catch (\Exception $e) {
    throw $e;
  }
} 
```

谢谢，@AdrienBrault。我用 测试过`--env=prod --no-debug`，确实它消耗的内存少了，但是内存还是增加了。我怎样才能真正清除实体管理器？并稳定记忆？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-28T07:34:43.993

Symfony 在开发环境中记录所有 SQL 查询，所以首先你需要禁用它

```
// disable logger
$em->getConnection()->getConfiguration()->setSQLLogger(null); 
```

您可以在实体上使用事件侦听器，它也可能会增加内存使用量。你可以像这样禁用它们

```
// remove all listeners
foreach ($em->getEventManager()->getListeners() as $event => $listeners) {
    foreach ($listeners as $listener) {
        $em->getEventManager()->removeEventListener($event, $listener);
    }
} 
```

从您的代码中删除`unset`，不需要它们，因为您在循环的每一步都清除了实体管理器。

```
// save and clear
$em->flush();
$em->getUnitOfWork()->clear(); 
```

请记住，如果您将查询归为一组，则学说可以优化您的查询并提高性能`flush`。因此，最佳做法是对`flush`数据的某些部分执行一次。例如：

```
// collect 100 entities and then save them
if (($i % 100) == 0) {
    $em->flush();
    $em->getUnitOfWork()->clear();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:44:39.033

尝试使用以下命令重置实体管理器：

```
$this->getContainer()->get('doctrine')->resetEntityManager(); 
```

接着：

```
$em = $this->getContainer()->get('doctrine')->getEntityManager(); 
```

# html - 菜单在 Firefox 中未正确显示

> ID：11392934
> 
> 赞同：0
> 
> 时间：2012-07-09T10:08:27.140
> 
> 标签：html, css, firefox

我正在创建的网站在 Chrome 和 Safari 中显示的首页与它在 Chrome 和 Safari 中应该做的完全一样，但是当我在 Firefox 中测试时，菜单显示不正确。
- 所有浏览器都是最新版本并且在 Mac 上。

[这是分别比较 Firefox 和 Safari 的屏幕截图！](http://i.stack.imgur.com/ZlECQ.png)

这是我用于菜单的css代码，请原谅。

```
nav {
width: 650px;
height: 220px;
margin: 10px auto;
}

nav ul {
list-style: none;
margin: 0 auto;
display: block;
}

nav ul li {
margin: 10px;
display: inline-block;
height: 100px;
line-height: 200px;
} 
```

我尝试过不同的方法，但这会弄乱工作浏览器中的菜单。

根据请求，这是导航栏的 HTML 代码：

```
<nav>
<ul>
    <li><h2><a href="#cykler.html">Cykler</a></h2></li>
    <li><h2><a href="#service.html">Service</a></h2></li>
    <li><a href="#index.html"><img src="images/logo.png" name="logo" alt="Søgaard Cykler" width="220" height="200"></a></li>
    <li><h2><a href="#info.html">Info</a></h2></li>
    <li><h2><a href="#kontakt.html">Kontakt</a></h2></li>
</ul>
</nav> 
```

这是 jsfiddle 上的功能代码的链接：http: [//jsfiddle.net/DaCqS/](http://jsfiddle.net/DaCqS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:39:23.867

这对你有用吗？[http://jsfiddle.net/WWkWw/](http://jsfiddle.net/WWkWw/)

```
.top-menu{
    background-image:url('foo/logo.png');
    height:22px;
}
.left{
    float:left;
}
.right{
    float:right;
}
.top-menu li{
    margin:60px 10px 10px 10px;
    height:100px;
} 
```

HTML：

```
<nav>
<ul class="top-menu">
<li class="left"><h2><a href="#cykler.html">Cykler</a></h2></li>
<li class="left"><h2><a href="#service.html">Service</a></h2></li>
<li class="right"><h2><a href="#info.html">Info</a></h2></li>
<li class="left"><h2><a href="#kontakt.html">Kontakt</a></h2></li>
</ul>
</nav> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:30:26.417

最好避免定位元素的行高。边距更有效。摆脱 line-height 并尝试使用

```
margin-top:100px; 
```

在导航或 ul 上。

**编辑**：现在我看到了您的 HTML ...由于大中心徽标在风格上与四个按钮不同，您应该将它们的 CSS 选择器分开。您当前的 CSS 都无法区分这四个按钮和大中心徽标。解决此问题的一种快速简便的方法是添加此样式：

```
nav ui li h2 {margin-top:100px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:35:36.887

好的，所以我浮动了`<li>`并使用了 margin-top:100px 作为 h2。

试试这个，让我知道是否可以解决它[http://jsfiddle.net/hfxKW/](http://jsfiddle.net/hfxKW/)

# php - 如何在imagemagick上上传图片

> ID：11392936
> 
> 赞同：-1
> 
> 时间：2012-07-09T10:08:46.703
> 
> 标签：php, command-line, imgur

我正在使用 API 向需要图像 URL 的图像添加文本。我想在 imgur 上上传我的图片，这样我就有了可以使用的有效 URL。我正在使用带有 imgur 的 php 脚本，因为它是应用程序的一部分。由于我使用 PHP，我可以轻松使用命令行实用程序。请提出一些解决这个问题的方法。

PS：不建议使用 PHPGd 或 imagemagick 将文本添加到图像。他们不满足我的需要。我也尝试了谷歌，但大多数结果假设上传是在本地主机/服务器上上传，而我想在网上上传以使用有效的 URL。此外，我认为我不具备为此目的使用 VPS 的技术知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:48:15.840

如果您希望使用 HTML/php 允许用户将文件上传到您的服务器，这里有一个教程：

[http://www.tizag.com/phpT/fileupload.php/](http://www.tizag.com/phpT/fileupload.php/)

请注意，此过程与您以后可能使用 ImageMagick 或 GD 等工具执行的任何图像处理无关。

编辑：如果您想使用 php 在 Internet 上提供图像，Flickr 是一个不错的选择：

[使用 Flickr 上传照片](https://stackoverflow.com/questions/4936615/uploading-a-photo-with-flickr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:53:52.323

ImageMagick 是一个图像处理库。它没有在任何地方上传文件的功能。

如果您想上传文件，那么您将需要一个服务来将它们上传到（发现这样的服务对于 SO 来说是题外话，创建一个对于 SO 来说太宽泛，为您创建的一个寻找托管对于 SO 来说是题外话） .

该服务将提供某种 API（尽管可能不是用于自动访问的 API），您必须编写一个客户端与之交互。

如果所述服务使用 HTTP 进行上传，那么您应该查看[cURL](http://php.net/curl)库。

# iphone - 从A点到B点的经纬度路线图

> ID：11392939
> 
> 赞同：-1
> 
> 时间：2012-07-09T10:08:54.833
> 
> 标签：iphone, objective-c, ios, maps, allocation

我正在处理地图和位置。我想要从一个位置到另一个位置的路线图。我提供了位置（目的地和来源）的纬度和经度。所以请帮我准备这张地图。

我阅读了有关 Google map api 的信息，但没有找到完美的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:17:50.857

使用以下 google map API 的 URL 查找两个位置之间的路线图路线

```
http://maps.google.com/?saddr=STARTINGADDRESS&daddr=DESTINATIONADDRESS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:51:51.257

首先，您必须从 Google 获取指示。像这样：

```
NSError     *error = nil;
NSString    *directionsInJSON = [NSString stringWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/directions/json?origin=%f,%f&destination=%f,%f&sensor=true",start.coordinate.latitude , start.coordinate.longitude , destination.coordinate.latitude, destination.coordinate.longitude]]encoding:NSUTF8StringEncoding error:&error]; 
```

之后，解析上面得到的 JSON：

```
if (error == nil) 
{
    NSError *JSONError = nil;
    SBJsonParser *JSONParser = [[SBJsonParser alloc] init];
    id  directions = [JSONParser objectWithString:directionsInJSON error:&JSONError];
    if (JSONError == nil) 
    {
        directions = (NSDictionary*)directions;

        NSString *status = [directions objectForKey:@"status"];
        if ([status isEqualToString:@"OK"]) 
        {
            NSArray         *routes = [directions objectForKey:@"routes"];
            NSDictionary    *route  = [routes objectAtIndex:0];
            NSDictionary    *polylineOverview = [route objectForKey:@"overview_polyline"];

            NSString *polylinePoints = [polylineOverview objectForKey:@"points"];
            NSArray *decodedPolyline = [self decodePolyLine:polylinePoints];

            [self loadRouteWithPoints:decodedPolyline];
        }
        else
        {
            UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"No routes found" message:@"Sorry , we couldn't find any routes between you two." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil] autorelease];
            [alert show];
        }
    }
}
else
{
    NSLog(@"error: %@",error.description);
} 
```

现在你需要这些方法：

```
-(void) loadRouteWithPoints:(NSArray *) routes
{

    CLLocationCoordinate2D coords[[routes count]];
    for(int i = 0; i < routes.count; i++)
    {
        CLLocation* loc = (CLLocation*)[routes objectAtIndex:i];//[NSKeyedUnarchiver unarchiveObjectWithData:[routes objectAtIndex:i]];
        CLLocationCoordinate2D c;
        c.latitude  = loc.coordinate.latitude;
        c.longitude = loc.coordinate.longitude;
        coords[i]   = c;
    }

    MKPolyline *line = [[MKPolyline polylineWithCoordinates:(CLLocationCoordinate2D*)coords count:[routes count]] retain];
    [self.mapsView addOverlay:line];
} 
```

和：

```
- (NSMutableArray *)decodePolyLine: (NSString *)encoded 
{
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[[NSMutableArray alloc] init] autorelease];
    NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) 
    {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;
        do 
        {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);

        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do 
        {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);

        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber    *latitude   = [[[NSNumber   alloc] initWithFloat:lat * 1e-5] autorelease];
        NSNumber    *longitude  = [[[NSNumber   alloc] initWithFloat:lng * 1e-5] autorelease];
        CLLocation  *loc        = [[[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]] autorelease];
        [array addObject:loc];
    }

    return array;
} 
```

瞧！

干杯!

# vim - 禁用帮助缓冲区的自动命令

> ID：11392941
> 
> 赞同：1
> 
> 时间：2012-07-09T10:09:06.470
> 
> 标签：vim

我的 中有以下几行`.vimrc`：

```
" UNIX fileformat
au BufRead,BufNewFile * set fileformats=unix,dos
au BufRead,BufNewFile * set fileformat=unix 
```

这些是使用 unix 文件格式制作任何打开的文件。

除了帮助消息外，它几乎适用于所有情况。如果我输入，让我们说：

```
:h help 
```

Vim 首先抱怨：

```
"helphelp.txt" [readonly] 350L, 13662C Error detected while processing
BufRead Auto commands for "*": E21: Cannot make changes, 'modifiable'
is off: fileformat=unix 
```

显然，我试图在不可修改的缓冲区上设置 fileformat 选项，所以这个错误是可以预料的。但是，在不删除其他文件功能的情况下摆脱它的最干净的方法是什么？

有没有办法有条件地应用/不应用帮助缓冲区的自动命令？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:27:55.977

这`'fileformats'`是一个全局设置，只需在 .vimrc 中设置一次就足够了：

```
set fileformats=unix,dos 
```

任何其他不可修改的文件都会发生该错误，而不仅仅是帮助文件。因此，最好以`'modifiable'`缓冲区设置为条件进行设置：

```
au BufRead,BufNewFile * if &l:modifiable | setlocal fileformat=unix | endif 
```

(Alternatively, you could also just `:silent!` the error, but I regard the conditional as cleaner.)

# spring - Jackson+Spring3.0.5 自定义对象映射器

> ID：11392944
> 
> 赞同：2
> 
> 时间：2012-07-09T10:09:17.017
> 
> 标签：spring, jackson

我很难在我的 Spring 应用程序上配置 Jackson。我可以让它工作，但它似乎不接受任何类型的配置。基本上我想要实现的是拥有一个扫描 Spring 格式注释的 ObjectMapper。

我正在尝试的是：

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <bean
                class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
                <property name="objectMapper" ref="jacksonObjectMapper" />
            </bean>
        </list>
    </property>
</bean>

<bean id="jacksonObjectMapper" class="ro.softwin.cnfp.ConversionServiceAwareObjectMapper" />

<bean
    class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
            <entry key="html" value="text/html" />
        </map>
    </property>
    <property name="viewResolvers">
        <list>
            <bean
                class="org.springframework.web.servlet.view.InternalResourceViewResolver">
                <property name="viewClass"
                    value="org.springframework.web.servlet.view.JstlView" />
                <property name="prefix" value="/jsp/" />
                <property name="suffix" value=".jsp" />
            </bean>
        </list>
    </property>
    <property name="defaultViews">
        <list>
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
                <property name="prefixJson" value="false" />
                <property name="objectMapper" value="jacksonObjectMapper" />
            </bean>
        </list>
    </property>
</bean> 
```

映射器的代码是：

```
public class ConversionServiceAwareObjectMapper extends ObjectMapper {
@Autowired
public ConversionServiceAwareObjectMapper(
        ConversionService conversionService) {
    AnnotationIntrospector introspector = AnnotationIntrospector.pair(
            new FormatAnnotationIntrospector(conversionService),
            DEFAULT_ANNOTATION_INTROSPECTOR);

    this.setDeserializationConfig(this.getDeserializationConfig()
            .withAnnotationIntrospector(introspector));
    this.setSerializationConfig(this.getSerializationConfig()
            .withAnnotationIntrospector(introspector).withSerializationInclusion(JsonSerialize.Inclusion.NON_NULL));

} 
```

}

初始化服务器时出现以下错误：

java.lang.IllegalStateException：无法将类型 [java.lang.String] 的值转换为属性“objectMapper”所需的类型 [org.codehaus.jackson.map.ObjectMapper]：在 org.springframework 中找不到匹配的编辑器或转换策略。 beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:241) 在 org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470) ... 55 更多

我尝试切换到普通视图解析器并在 AnnotationMethodHandler 中使用对象映射器，这在服务器启动方面有效，但它完全忽略了任何配置。

我完全不知道下一步该做什么。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:21:18.600

更新 ：

```
<property name="objectMapper" value="jacksonObjectMapper" /> 
```

和：

```
<property name="objectMapper" ref="jacksonObjectMapper" /> 
```

参考不是价值。

# java - 如何以编程方式按名称 getBean()

> ID：11392948
> 
> 赞同：1
> 
> 时间：2012-07-09T10:09:31.963
> 
> 标签：java, spring

我正在使用 Spring3.1

我以编程方式注册了一个 Bean，我也想以编程方式检索它，但没有成功。

```
public void createBean(String beanName, String beanParam) {
    System.out.println("beanName=" + beanName + " beanParam=" + beanParam);
    ApplicationContext context = ApplicationContextSingleton.getApplicationContext();
    StaticApplicationContext innerContext;= new StaticApplicationContext(context);
    innerContext.registerSingleton("beanName", FixSessionBean.class);
    configureBean(innerContext, beanName, beanParam);
} 

public void configureBean(ApplicationContext innerContext, String beanName, String beanParam) {
    innerContext.getBean(beanName);
    FixSessionBean fixSessionBean = (FixSessionBean) innerContext.getBean(beanName);
} 
```

从我的应用程序上下文中：

```
<bean id="FixSessionBean" class="com.finbird.fixgw.beans.FixSessionBean" /> 
```

这是一些日志证据：

```
beanName=mm1 beanParam=mm2
2012-07-09 13:07:31,016 com.fixgw.test.TriggerBean [ERROR] org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'mm1' is defined
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'mm1' is defined 
```

知道为什么进展不顺利吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:16:33.620

这条线不是

```
innerContext.registerSingleton("beanName", FixSessionBean.class); 
```

使用名称“beanName”注册您的 bean，而不是`beanName`-parameter 的值？也许您打算改用该参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:13:10.883

您应该传递 bean 类名称，就`FixSessionBean.class`好像您想获得那个一样，如果您发布的只是这些，那么您的 appctx 中没有定义 mm1。

# sqlite - 重新安装android应用程序后如何使我的数据od数据库Sqlitepersistant

> ID：11392951
> 
> 赞同：1
> 
> 时间：2012-07-09T10:10:03.697
> 
> 标签：sqlite

在模拟器中重新安装我的应用程序后，我在数据库 Sqlite 中找不到我的数据，所以我该怎么办（注意：我从文件 .txt 填充数据库）。这是从 SqliteOpenHelper 扩展的类的一些代码

```
private static final String CREATE_TABLE_CATEGORIE = "CREATE TABLE " + TABLE_CATEGORIE + " ("
        + COL_ID_CATEGORIE + " INTEGER PRIMARY KEY AUTOINCREMENT, " + COL_INTITULE + " TEXT NOT NULL);";

private static final String CREATE_TABLE_BLAGUE = "CREATE TABLE " + TABLE_BLAGUE + " ("
        + COL_ID_BLAGUE + " INTEGER PRIMARY KEY AUTOINCREMENT, " + COL_TITRE_BLAGUE + " TEXT NOT NULL, "
        + COL_DESC_BLAGUE + " TEXT NOT NULL, "+ COL_FAVORIS+" INTEGER DEFAULT 0, "
        +COL_ID_CATEGBLAGUE+" INTEGER NOT NULL, FOREIGN KEY (" 
        + COL_ID_CATEGBLAGUE+") REFERENCES "+TABLE_CATEGORIE+"("+COL_ID_CATEGORIE+"));";

public DbBlague(Context context, String name, CursorFactory factory,int version) {

    super(context, name, factory, version);

}

@Override
public void onCreate(SQLiteDatabase db) {

    db.execSQL(CREATE_TABLE_CATEGORIE);
    db.execSQL(CREATE_TABLE_BLAGUE);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

} 
```

# tornado - 在 Tornado 应用程序中优雅地处理应用程序异常

> ID：11392952
> 
> 赞同：13
> 
> 时间：2012-07-09T10:10:08.720
> 
> 标签：tornado

基于一些谷歌搜索，我安装了以下错误处理程序。然而，似乎返回 http 500 的 python 异常并没有被这些东西所困，尽管 404 是。使用我在下面的代码中留下的打印语句，我可以看到它没有遇到任何这些例程。我真的应该做什么？

```
class ErrorHandler(tornado.web.RequestHandler):
"""Generates an error response with status_code for all requests."""
def __init__ (self, application, request, status_code):
    print 'In ErrorHandler init'
    tornado.web.RequestHandler.__init__(self, application, request)
    self.set_status(status_code)

def get_error_html (self, status_code, **kwargs):
    print 'In get_error_html. status_code: ', status_code
    if status_code in [403, 404, 500, 503]:
        filename = '%d.html' % status_code
        print 'rendering filename: ', filename
        return self.render_string(filename, title=config.get_title())

    return "<html><title>%(code)d: %(message)s</title>" \
            "<body class='bodyErrorPage'>%(code)d: %(message)s</body>"\
            "</html>" % {
            "code": status_code,
            "message": httplib.responses[status_code],
            }

def prepare (self):
    print 'In prepare...'
    raise tornado.web.HTTPError(self._status_code) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-09T15:46:28.840

首先，您提出的异常`prepare`有 code `200`，因此它没有被`get_error_html`函数捕获。

其次，`get_error_html`不推荐使用：使用`write_error`, 代替（[write_error](http://www.tornadoweb.org/documentation/web.html?highlight=write_error#tornado.web.RequestHandler.write_error)）。

最后，您不需要调用`__init__`on `ErrorHandler`: 来初始化处理程序使用`initialize`( [initialize](http://www.tornadoweb.org/documentation/web.html?highlight=write_error#tornado.web.RequestHandler.initialize) )，但在这种情况下您不需要它。

这是一个工作示例：

```
import tornado
import tornado.web

class ErrorHandler(tornado.web.RequestHandler):
    """Generates an error response with status_code for all requests."""

    def write_error(self, status_code, **kwargs):
        print 'In get_error_html. status_code: ', status_code
        if status_code in [403, 404, 500, 503]:
            self.write('Error %s' % status_code)
        else:
            self.write('BOOM!')

    def prepare(self):
        print 'In prepare...'
        raise Exception('Error!')

application = tornado.web.Application([
        (r"/", ErrorHandler),
        ])

if __name__ == "__main__":
    application.listen(8899)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-24T16:01:31.437

1.  处理程序。让我们定义一些我们要使用的默认处理程序

```
import tornado.web

class BaseHandler(tornado.web.RequestHandler):
    """
    Base handler gonna to be used instead of RequestHandler
    """
    def write_error(self, status_code, **kwargs):
        if status_code in [403, 404, 500, 503]:
            self.write('Error %s' % status_code)
        else:
            self.write('BOOM!')

class ErrorHandler(tornado.web.ErrorHandler, BaseHandler):
    """
    Default handler gonna to be used in case of 404 error
    """
    pass

class MainHandler(BaseHandler):
    """
    Main handler
    """
    def get(self):
        self.write('Hello world!') 
```

2.  设置。`default_handler_class`我们还需要`default_handler_args`定义

```
settings = {
    'default_handler_class': ErrorHandler,
    'default_handler_args': dict(status_code=404)
} 
```

3.  应用。

```
application = tornado.web.Application([
    (r"/", MainHandler)
], **settings) 
```

结果。除 404 之外的所有错误都将由 BaseHandler 处理。404 - 错误处理程序。而已 ：）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-05T08:11:59.087

```
import tornado.web

class BaseHandler(tornado.web.RequestHandler):
    def write_error(self, status_code, **kwargs):
        print status_code
        super(BaseHandler, self).write_error(status_code, **kwargs) 
```

# javascript - 如何在 Graphiti.js 中的矩形上添加点击事件

> ID：11392956
> 
> 赞同：0
> 
> 时间：2012-07-09T10:10:31.913
> 
> 标签：javascript, graphiti-js

我想在graphiti的矩形上注册点击事件。我试过这个

```
var innerrect = new graphiti.shape.basic.Rectangle(100, 20);
        innerrect.onClick = function(){
            alert("Hi");
        }
rect.addFigure(innerrect , new graphiti.layout.locator.BottomLocator(rect));
canvas.addFigure(rect, 100, 100); 
```

但不会工作。请让我知道它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:15:37.753

像这样创建从 Rectangle 继承的自己的形状。乍一看，这看起来有点不舒服，但通常情况下，您会使用大量自定义代码编写自己的形状。在这种情况下，创建一个新类是一次性的。

请记住，这些示例是一个很好的起点。还有一个带有单击事件侦听器的示例。

```
MyFigure = graphiti.shape.basic.Rectangle.extend({

NAME : "MyFigure",

init : function()
{
    this._super();

    this.createPort("output");
    this.setDimension(30,30);
    this.setResizeable(false);

    this.value=false;

    this.colors={};
    this.colors[true]="#00f000";
    this.colors[false]="#f00000";

    this.setBackgroundColor(this.colors[this.value]);
},

/**
 * @method
 * Change the color and the internal value of the figure.
 * Post the new value to related input ports.
 * 
 */
onClick: function(){
    this.value = !this.value;
    this.setBackgroundColor(this.colors[this.value]);

    var connections = this.getOutputPort(0).getConnections();
    connections.each($.proxy(function(i, conn){
        var targetPort = conn.getTarget();
        targetPort.setValue(this.value);
        conn.setColor(this.getBackgroundColor());
    },this));
}

}); 
```

# css - CSS 和篮子：如何做一个“始终可见”的篮子？

> ID：11392959
> 
> 赞同：0
> 
> 时间：2012-07-09T10:11:06.427
> 
> 标签：css, shopping-cart

在这个网站上，如果你尝试任何一家餐厅，你会看到一个总是在右侧可见的篮子，如果你向下滚动，它就是“神奇的”：它像“粘性”一样停留在屏幕顶部。[http://takeaway.com](http://takeaway.com)

他们是怎么做到的，你有什么好的网站/教程来做这些事情（我不知道谷歌实际上是什么！）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:16:51.747

当浏览器滚动超过某个点时，以下 CSS 将应用于购物篮：

```
position: fixed; top: 0px; 
```

您可以使用 jQuery 插件（如 Waypoints）相当轻松地做到这一点，它具有创建“粘性”元素的特殊功能。

获取插件并在此处查看教程：http: [//imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

请参阅此处的示例：http: [//imakewebthings.com/jquery-waypoints/sticky-elements/](http://imakewebthings.com/jquery-waypoints/sticky-elements/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:23:13.510

你想要我在我的项目中所做的，看看[我们](http://homecollective.in/)在购物车中使用了类似的东西的项目。我们使用了下面的css关键点是Position和z-index

```
#your wrapper{
    margin:0 0 14px 0px;
    /*margin: 30px auto;*/
}
.sticky{
    position: fixed;
    bottom:-30px;
    width:74%;
    left:13%;
    z-index: 100;
} 
```

# string - coq中字符串的证明

> ID：11392960
> 
> 赞同：0
> 
> 时间：2012-07-09T10:11:07.723
> 
> 标签：string, coq

我想证明字符串的“自反性”属性。请如果你能帮助我如何进行证明。这是我的代码：

```
 Fixpoint beq_str (sa sb : String.string) {struct sb}: bool := 
   match sa, sb with
 | EmptyString, EmptyString  => true
 | EmptyString, String b sb' => false
 | String a sa', EmptyString => false
 | String a sa', String b sb'=> match (ascii_dec a b) with 
                                | left _ => beq_str sa' sb'
                                | right _ => false
                                end
 end.
 (* compares two string names [n1] and [n2] of type [id'] - returs bool. *) 
 Definition beq_names n1 n2 :=
  match (n1, n2) with
    (name s1, name s2) => beq_str s1 s2
  end.

 Theorem reflexivty : forall i,
  true = beq_str i i.
Proof.
  intros. induction i.
  auto.  simpl. Admitted. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:58:51.280

不知道是家庭作业还是独立学习...

```
Theorem beq_str_refl : forall i,
  true = beq_str i i.
Proof.
  induction 0; simpl; try (rewrite <- IHi; case (ascii_dec a a));
  try reflexivity; intro C; elimtype False; apply C; reflexivity.
Qed. 
```

这应该有效。

如果这是家庭作业并且你很懒惰，你的导师可能会拒绝这个。如果您想自己理解和证明它，那么您需要的构建块就在那里，只需将它拆开并在您当前的证明状态下扔掉碎片。

这个证明中有两件令人讨厌的事情。第一个是摆脱`(ascii_dec a a)`. （案例分析`a`不起作用。）对整个事情（即`(ascii_dec a a)`）进行案例分析以获得两个子目标，一个带有添加的假设`a = a`，另一个带有`a <> a`。

第二个问题可能是处理矛盾，除非你以前做过。

`a <> a`相当于`a = a -> False`。 `a = a`根据定义为真，它允许构造一个类型的值`False`（矛盾——`False`没有构造函数）。这使您可以放弃当前的目标（`true = false`无论如何都无法证明），而只是构建那个不可能的`False`值。

告诉 Coq你`elimtype False`想继续对`False`. 由于`False`没有构造函数，这使您只有一个目标，即构造一个`False`. 通常这是不可能的，但你的假设之间存在矛盾。 `apply`这个矛盾（`C`在我上面的证明脚本中命名）和你剩下要做的就是 show `a = a`，它来自`reflexivity`.

* * *

这是一个更易读的版本，您可以逐步完成：

```
Theorem beq_str_refl : forall i, true = beq_str i i.
  intro i. induction i as [ | a i IHi ].
    (* base case: Empty String *) reflexivity.
    (* inductive case: *) simpl. rewrite <- IHi.
      (* do case analysis on ascii_dec (or {a=a}+{a<>a}) *)
      destruct (ascii_dec a a) as [ Heq | C ].
      (* {a =  a} *) reflexivity.
      (* {a <> a} *) unfold not in C. elimtype False. apply C. reflexivity. 
```

另一种处理矛盾的方法：

```
(* just a quick nonsensical goal *)
Theorem foo: forall i, i <> i -> 2 + 2 = 5.
  intros i C.
  (* explicitly construct a 'False' value *)
  assert False as H.
    apply C. reflexivity.
  (* 'inversion' generates one goal per possible constructor *)
  (* as False has no constructors, this gives 0 subgoals, finishing the proof *)
  inversion H.
Qed. 
```

# jquery - 点击后停止悬停效果

> ID：11392964
> 
> 赞同：5
> 
> 时间：2012-07-09T10:11:30.823
> 
> 标签：jquery

我在 jQuery 中有一个非常简单的问题，我似乎找不到解决方案：我有一个 mouseOver 和 mouseOut 效果，但我需要一个转折点，如果单击而不是保持该框打开，即使它们是 mouseOut。

这是我到目前为止的一个例子：

[jsfiddle](http://jsfiddle.net/Grmej/1/)

提前致谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T10:15:37.107

```
$(".rock").click(function() {
      $('.rock').unbind('mouseout');
}); 
```

在 .rock 单击时取消绑定 mouseout 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:15:11.217

您必须取消绑定事件，然后它会永远保持打开状态。

[让你在这里更新小提琴](http://jsfiddle.net/Grmej/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:14:10.960

```
$(".rock").click(function() {
     $(this).off('mouseout'); 
```

如果您有多个 mouseOut 事件，您可能希望为它们命名空间并仅删除有问题的事件（上面的代码删除了绑定到`.rock`元素的所有 mouseOut 事件）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T10:26:06.657

试试这个

```
 $(".rock").hover(function() {
    $(".box_content.rock").stop().animate(
          {"height": "100px"},
          "normal");
    $(".box.rock").stop().animate(
          {"height": "140px"},
          "normal");
    $(".hide.rock").removeClass("hide").addClass("show");
    })

    $('.box_content.rock').click(function(){    
    $('.box_content.rock').unbind("hover");
    }); 
```

# c# - 数据绑定如何工作？

> ID：11392971
> 
> 赞同：0
> 
> 时间：2012-07-09T10:11:49.157
> 
> 标签：c#, windows-phone-7, data-binding

我现在正在尝试将数据添加到列表框中。如果您查看我的 XAML，这是我构建的列表框：

```
<ListBox 
            Height="517" 
            HorizontalAlignment="Left" 
            Margin="12,84,0,0" 
            Name="searchList" 
            VerticalAlignment="Top" 
            Width="438" 
            SelectionChanged="SearchList_SelectedEvent">

            <!-- What each listbox item will look like -->
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding firstName}" FontSize="28" />
                        <TextBlock Text="{Binding lastName}" FontSize="28" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>

</ListBox> 
```

在与包含列表框的屏幕相关联的 .css 类中：

```
public Search()
    {
        InitializeComponent();

        //The variables that I want to render in the list         
        string firstName = "John";
        string lastName = "Smith";
    } 
```

所以我的问题是，数据绑定到底是如何工作的？您可以在 XAML 中看到我尝试绑定变量，但我不知道这是否可行，或者我是否正确执行？

对于初学者，XAML 如何知道在哪里可以找到这些变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T10:25:46.383

我建议您阅读Tomas Jansson 在另一个答案中建议的[本教程。](http://jesseliberty.com/2010/11/10/windows-phone-from-scratch-6-data-binding-really/)除了在您的代码中，

首先，您需要创建一个 List 或 ObservableCollection，其中包含可绑定到 ListBox 的数据。

```
List myList = new List()
          {new Name() { firstName = "sdfjsdk", lastName= "sdfsfsjdf"},
           new Name() { firstName = "bthbbh", lastName= "ereyyyu"},
           new Name() { firstName = "svbfbb", lastName= "sdfertbn"} }; 
```

名称在哪里

```
class Name()
{
    string firstName;
    string lastName;
} 
```

然后在后面的代码中，

```
myList.ItemsSource = myList; //this lets the XAML from where to fetch the data to bind 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:52:48.967

值得注意的是，您当前的代码将不起作用。

每个控件都存在于称为逻辑树的东西中。逻辑树是一个树状的控件层次结构，在此示例中，您的 ListBox 是根，其中的控件是子控件。

例如

```
RootControl
|
|---| ChildOfRootControl
    |
    |----| ChildOfChildOfRootControl
    |    |
    |    | AnotherChildOfChildOfRootControl
    |
    | AnotherChildOfRootControl 
```

每个控件都有一个 DataContext 属性 - 此属性会自动从根向下传播到所有子控件（例如，如果您在任何控件上设置 DataContext，则所有控件的子控件都会看到此 DataContext - 除了任何派生的`ItemsControl`其中孩子通常具有绑定`ItemsSource`属性的 DataContext ）。此 DataContext 仅沿树向下传递到子控件 - 如果您将新值放入子控件的 DataContext 中，它将覆盖父 DataContext

DataContext 是您的控件将绑定到的默认对象：即，如果您未在绑定中指定任何其他参数，则 DataContext 将是目标对象

```
Text="{Binding FirstName}" 
```

上面的绑定着眼于 DataContext。为了绑定到其他东西，您需要在绑定等中指定 Source 或 ElementName

除了 DataContext 之外，还有一个名为 ItemsControl 的基本控件，大多数类似列表的控件都将从该控件继承。

ItemsControl 公开了一个名为 ItemsSource 的属性，该属性指定将出现在控件中的项目列表。这与 DataContext 有点不同，因为您可以同时拥有 DataContext 和 ItemsSource。

此外，ItemsControl 中的任何子项（例如每个列表框项）都不会从其父控件继承 DataContext，而是它们的 DataContext 将指向它们单独绑定到的项。

示例 - 假设您将“MyObject”的 DataContext 分配给根控件（网格），并将“MyListOfObjects”分配给 ListBox：

```
Grid (DataContext = MyObject)
|
|---| ListBox (DataContext = MyObject) (ItemsSource = MyListOfObjects)
    |
    |----| ListBoxItem (DataContext = MyListOfObjects[0])
    |    |
    |    | ListBoxItem (DataContext = MyListOfObjects[1])
    |    |
    |    | ListBoxItem (DataContext = MyListOfObjects[2])
    |    |
    |    | ListBoxItem (DataContext = MyListOfObjects[3])
    |
    | TextBox (DataContext = MyObject) 
```

在您的情况下， ListBox.ItemsSource 属性将为 NULL，因此您的绑定路径将不起作用。当您运行此代码时，您很可能会在输出窗口中看到绑定表达式错误，因为绑定将评估为不存在的属性（实际上在这种情况下您不会，因为没有从 ItemsSource 创建的项目）

通常你绑定到一个对象——比如一个业务对象，甚至是页面上的其他控件。

因此，在您的情况下，您可能想要创建一个包含 FirstName 和 LastName 属性的对象。似乎因为您使用的是 ListBox ，所以您需要这些项目的集合来绑定 - 所以理想情况下，您需要一个实现某种更改通知机制的集合。这可确保在列表更改时更新 UI。

ObservableCollection 实现了这一点 - 因此创建一个 ObservableCollection 并将其分配给 ListBox 上的 ItemsSource 应该可以工作。

It might also be worth noting that change notification on ObservableCollection only happens at the list level - (if the list is changed, an item added for instance) but does not happen at the object level. If you also want changes on the objects contained in the list to reflect in the UI then you need to implement change notification on these objects. This is done by implementing the INotifyPropertyChanged interface.

Finally - if you want to be able to edit a binding, make sure you specify this in the binding - Silverlight by default assumes all bindings are read-only. I'm not sure what Windows Phone 7 does, but it may be that you need to specify **Mode** in your bindings

e.g.

```
Text="{Binding SomeText, Mode=TwoWay}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:17:10.810

你试过搜索它吗？这有望解释很多数据绑定的工作原理：http: [//jesseliberty.com/2010/11/10/windows-phone-from-scratch-6-data-binding-really/](http://jesseliberty.com/2010/11/10/windows-phone-from-scratch-6-data-binding-really/)

# ant - 如何将java编译器警告更改为错误

> ID：11392973
> 
> 赞同：1
> 
> 时间：2012-07-09T10:12:03.957
> 
> 标签：ant, preferences

我正在尝试将 java 编译器警告更改为错误并将错误更改为警告。例如：

```
fallthroughCase=error
nullReference=error
enumIdentifier=error
וnusedObjectAllocation=warning
redundantNullCheck=warning` 
```

它在 Eclipse 环境中很容易完成，但我还没有找到在我们的构建服务器 ANT 构建上执行相同操作的方法。

任何帮助将不胜感激！

谢谢，德罗

# jquery - 无限循环 each() 循环

> ID：11392974
> 
> 赞同：1
> 
> 时间：2012-07-09T10:12:04.113
> 
> 标签：jquery

我正在使用 jQuery 循环遍历 ul 下的每个 li 元素，一个一个地显示它们。这是代码：

```
 $('.article_ticker li:first').siblings().hide();
  var list=$('.article_ticker li:first').siblings();

  list.each(function(index)
  {
      $(this).siblings().hide().delay(2000).fadeOut();
      $(this).fadeIn('fast');
  }); 
```

此代码工作正常，但一旦“每个”循环结束，它就不会重复该序列。我想循环无限重复。就像在最后一个元素淡出之后，第一个元素应该淡入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:17:21.397

您可以执行以下操作...

```
$('.article_ticker li:first').siblings().hide();
var list=$('.article_ticker li:first').siblings();

(function repeatTicker() {
  list.each(function(index) {
    $(this).siblings().hide().delay(2000).fadeOut();
    $(this).fadeIn('fast');
  });
  setTimeout(repeatTicker, 10);
} ()); 
```

我在这里使用了 setTimeout，否则浏览器会抱怨您的页面没有响应。现在我使用了 10ms，但我会尽可能增加它。

# android - 何时使用带有选项卡的两行与一行布局的 ActionBar？

> ID：11392977
> 
> 赞同：0
> 
> 时间：2012-07-09T10:12:11.887
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我之前问过一个关于 Android ActionBar 的类似问题：[Change ActionBar Tabs background color](https://stackoverflow.com/questions/11318750/change-actionbar-tabs-background-color)

我仍然没有一个问题的答案：什么时候使用两线设计/何时使用单线设计？我为标签栏设置了一个自定义分隔线，它也用于水平布局。但是，要根据方向/屏幕尺寸等创建可绘制对象/样式，我需要知道何时使用哪种布局。查看Android源代码似乎他们对两种布局都使用相同的drawable，所以这对我没有帮助。更改选项卡视图的字体颜色时也会出现同样的问题。

我担心它会在代码中决定使用哪种格式，所以实际上没有任何办法解决这个问题。谁能证实这一点？或者至少有一种方法可以在代码中找出操作栏是单行还是两行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:27:27.837

当 Android 认为屏幕尺寸/方向很窄时（如在正常尺寸的纵向屏幕上，或在小尺寸屏幕上，无论方向如何），Android 将在操作栏下方堆叠选项卡。同样，如果有很多选项卡，在某些情况下它们会显示为下拉列表，以确保最适合操作栏。

操作栏是一个高度自适应的 UI 控件。如果您打算使用它的导航模式，我强烈建议不要尝试预测它们的配置或尝试应用特定于每个的样式。无论如何，您的选项卡可绘制对象始终需要为 9patch，因为基本操作栏高度也会因方向和屏幕尺寸而异（请注意，其高度在横向时略小）。

也就是说，您可以在运行时使用其`getHeight()`方法查询操作栏高度。SDK 中包含的这个[Honeycomb Gallery 示例](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.3_r1/com/example/android/hcgallery/TitlesFragment.java)使用了一堆逻辑`OnGlobalLayoutListener`来确保 Fragment 布局适当地响应各种操作栏大小。

# c# - c# 在回调中调用 endinvoke，使用泛型

> ID：11392978
> 
> 赞同：4
> 
> 时间：2012-07-09T10:12:12.007
> 
> 标签：c#, generics, asynchronous, c#-2.0

Inisde 之后的回调`BeginInvoke`，`AsyncResult.AsyncDelegate`需要转换为正确的类型，然后才`EndInvoke`可以访问。

但是我使用的是泛型，所以我需要为 N 个泛化方法定义 N 个回调吗？

这是课程：

```
public class Async
    {
        public delegate object Func(); //void with no parameter
        public delegate TResult Func<T, TResult>(T arg); //one parameter with result

        public static void Execute(IAsyncSubscriber subscriber, Func action)
        {
            action.BeginInvoke(Callback, subscriber);
        }

        public static void Execute<T, T1>(IAsyncSubscriber subscriber, T param, Func<T, T1> action)
        {
            action.BeginInvoke(param, Callback, subscriber);
        }

        private static void Callback(IAsyncResult ar)
        {
            AsyncResult result = (AsyncResult)ar;
            IAsyncSubscriber subscriber = (IAsyncSubscriber)result.AsyncState;
            Func action = (Func) result.AsyncDelegate;
            object returnValue = action.EndInvoke(result); //To call endinvoke 
            subscriber.Callback(returnValue);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:24:42.210

有几种方法可以避免定义 N 个回调：

1.  您可以在 BeginInvoke 调用中将相应的 EndInvoke 方法作为状态传递。例如

    ```
    private delegate T EndInvokeDelegate<T>(IAsyncResult ar);

    public static void Execute<T, T1>(IAsyncSubscriber subscriber, T param, Func<T, T1> action)
    {
        action.BeginInvoke(param, Callback<T1>, new object[]{subscriber, new new EndInvokeDelegate<T1>(action.EndInvoke)});
    }

    public static void Execute<T, T1, T2>(IAsyncSubscriber subscriber, T param1, T1 param2, Func<T, T1, T2> action)
    {
        action.BeginInvoke(param1, param2, Callback<T2>, new object[]{subscriber, new new EndInvokeDelegate<T2>(action.EndInvoke)});
    }

    private static void Callback<TR>(IAsyncResult ar)
    {
        object[] stateArr = (object[])ar.AsyncState;
        IAsyncSubscriber subscriber = (IAsyncSubscriber)stateArr[0];
        EndInvokeDelegate<TR> action = (EndInvokeDelegate<TR>)stateArray[1];
        TR returnValue = action(ar);
        subscriber.Callback(returnValue);
    } 
    ```

    您还可以通过将 stateArray[1] 视为 MultiCastDelegate 并在其上使用 DynamicInvoke 来使 Callback 非泛型，但这会很慢。

2.  对于 .Net 2.0 和 3.0，您可以使用反射，例如

    ```
    Type actionType= result.AsyncDelegate.GetType();
    var minfo = actionType.GetMethod("EndInvoke");
    object returnValue = minfo.Invoke(res.AsyncDelegate, new object[] { ar }); 
    ```

3.  对于 .Net 4.0，您可以使用动态。例如

    ```
    dynamic action = result.AsyncDelegate; 
    object returnValue = action.EndInvoke(result); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T10:43:38.933

如果我理解正确，您的假设是正确的。您将需要定义`N`回调。

从好的方面来说，你只会做一次，所以没什么大不了的，只是一些重复的工作:)

# python - python中的JSON生成和验证库

> ID：11392995
> 
> 赞同：4
> 
> 时间：2012-07-09T10:13:03.643
> 
> 标签：python, json, validation

我有许多 JSON 对象的定义。它们包括可选元素和几种不同的类型。还有一些定义是相互关联的。例如：如果您对*'address' 的*外观有一个定义，则*'user'*定义的一个元素可能是*'address'*。

您使用什么 python 库来编写有助于生成通用 JSON 对象并且还能够验证的 JSON 模式。

如果我可以生成最小 JSON（仅必需元素）、完整 JSON（所有必需和可选元素）甚至指定为列表生成的元素数量，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:08:26.310

[Dictshield](http://pypi.python.org/pypi/dictshield)对我来说看起来不错。

来源[https://github.com/j2labs/dictshield](https://github.com/j2labs/dictshield)

# sqlite - Sqlite3版本如何更新最新版本？

> ID：11392996
> 
> 赞同：1
> 
> 时间：2012-07-09T10:13:06.223
> 
> 标签：sqlite

操作系统：Mac OS X 10.7.4 现在 Sqlite3 版本是 3.7.7 2011-06-25，我希望它使用终端更新到 3.7.13 版本。怎么可能实现？