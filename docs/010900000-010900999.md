# StackOverflow 问答 10900000-10900999

# crash - NSMutableDictionary 设置值导致崩溃

> ID：10900000
> 
> 赞同：0
> 
> 时间：2012-06-05T15:14:12.803
> 
> 标签：crash, nsmutabledictionary

```
NSMutableDictionary             *firstCurr;

NSLog(@"currency list count=%d",[self.currencyList count]);

for (int j=0; j<[self.currencyList count]; j++)
{
NSLog(@"j=%d",j);
firstCurr                   =   [self.currencyList objectAtIndex:j];
[firstCurr                      setValue:[NSNumber numberWithFloat:     [[currencyItems objectAtIndex:j]floatValue]] forKey:kSelectedCurrencyINR];
} 
```

我有一组称为货币列表的 nsmutabledictionary 对象，我正在尝试设置 nsmutabledictionary 的一个字段。访问标记行中的 firstCurr 会导致崩溃！

```
NSMutableArray                          *arr;
arr                                 =   [[[NSMutableArray alloc] init] autorelease];

[[NSUserDefaults standardUserDefaults]  setObject:arr forKey:kSelectedCurrencies]; 
```

这就是我在数组中添加的方式

```
NSDictionary *dict = [[[NSMutableDictionary alloc] init] autorelease];

[dict setValue:countryCode[pos] forKey:kSelectedCurrencyCode];
[dict setValue:countryName[pos] forKey:kSelectedCurrencyCountry];
[dict setValue:[NSNumber numberWithFloat:2.0] forKey:kSelectedCurrencyINR];
[dict setValue:currencyName[pos] forKey:kSelectedCurrencyName];
[temp addObject:dict];
[[NSUserDefaults standardUserDefaults] setObject:temp forKey:kSelectedCurrencies];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

# ms-access - 为什么我的 MS Access 的 VBA 是错误的？

> ID：10900005
> 
> 赞同：8
> 
> 时间：2012-06-05T15:14:30.157
> 
> 标签：ms-access, ms-access-2007, vba

这是一个模糊的问题，很难解释。我正在尝试编写我的访问数据库，但 VBA 部分真的让我很烦。每当我输入内容并点击空格时，它会自动重做该空格并将我重新设置为我输入的前一个单词。此外，Intellisense 会出现片刻，闪烁并消失，并将光标恢复到我刚刚输入的文本。这导致我经常在不应该出现的地方输入内容，并且代码元素之间缺少空格。有谁知道为什么会发生这种情况？我使用的数据库是在 Access 2007 中创建的，但我在 2010 年开发它。顶部显示 Microsoft Access 2007-2010。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T15:18:29.253

最可能的原因是您打开了一个带有活动计时器事件的表单。

正在发生的事情是，当您编辑代码时，代码会定期运行。每次其他代码运行时，VBA 的即时编译器都会运行。

通常，当您编写代码时，每当您从一行代码移动到另一行代码时，就会发生这种实时编译：引发编译错误，修剪尾随空格等。

但是，在您的情况下，您有一些正在运行的代码。在它可以运行之前，编译器必须运行。它做的事情和平常一样。最烦人的是，它会从您的行中修剪尾随空白。

* * *

解决方案是使用活动计时器事件关闭表单，或在编辑代码时将计时器间隔设置为 0。

# css - 如何仅针对后面跟着另一个（特定）元素的元素？

> ID：10900006
> 
> 赞同：11
> 
> 时间：2012-06-05T15:14:31.293
> 
> 标签：css, css-selectors

我有一些由 Drupal 视图生成的代码。它看起来像这样（为了清楚起见，将其剥离）：

```
<div class="group_content">
  <h3>Header Link</h3>
  <div class="row odd">Here's some content</div>
  <h3>Another Header Link</h3>
  <div class="row even">Here's some more content</div>
</div>

<div class="group_content">
  <h3>Header Link 2</h3>
  <div class="row odd">Here's some content 2</div>
</div> 
```

因为这是由 CMS 生成的，所以我可以对呈现的代码执行的操作是有限制的 - 例如，我无法将偶数/奇数类添加到 h3 元素。

我如何（在 css 中）只针对`div class=row`后面跟着另一个的`div class=row`？如果一组中有不止一行，我需要在 div 中添加一个底部边框以充当视觉分隔符。因此，使用我的示例代码，将应用一个边框，`div class="row odd">Here's some content</div>`因为它后面有另一行。

我是后端开发人员，所以 CSS 不是我的强项。我们确实需要支持 IE7。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T15:19:06.727

### 修改逻辑

由于您需要 IE7 支持，请将边框放在`h3`元素上：

```
div.row + h3 {
    border-top: 1px solid black;
} 
```

这几乎适用于所有现代浏览器和 IE7：

小提琴：http: [//jsfiddle.net/jonathansampson/BjUf9/1/](http://jsfiddle.net/jonathansampson/BjUf9/1/)

### 选择器中的显式主题

如果你坚持只把它放在`div.row`除最后一个之外的每一个上，那就是另一回事了。您正在询问移动选择器的主题，这目前是不可能的，但是当浏览器实现 4 级选择器时：

```
div.row! + div.row {
    /* These styles apply to the first div.row
       $div.row + div.row is another potential 
       syntax */
} 
```

### :last-child，在 IE9+ 中

由于你不能这样做，你可以做的是为所有`div.row`元素设置一个样式，添加你的边框，然后覆盖任何`div.row:last-child`将删除`div.row`其父元素中最后一个元素的边框的任何元素：

```
div.row {
    border-bottom: 1px solid #333;
}
div.row:last-child {
    border-bottom: 0px;
} 
```

小提琴：http: [//jsfiddle.net/jonathansampson/BjUf9/](http://jsfiddle.net/jonathansampson/BjUf9/)

我应该注意到，不幸的是，这在 IE7 中不起作用。但是第一个解决方案中提出的修改后的逻辑应该在那里照顾你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T15:19:24.013

您可以还原逻辑并将 a`border-top`应用于`.row + .row`元素

```
.row + .row {
   border-top : 1px #ccc solid;
} 
```

相邻的兄弟选择器 ( `+`) 可以正常工作`IE7+`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:38:44.860

这适用于 ie7 和其他

```
.row + h3 {
  border-top : 1px black solid;
} 
```

# eclipse - Eclipse 批量搜索

> ID：10900008
> 
> 赞同：0
> 
> 时间：2012-06-05T15:14:40.650
> 
> 标签：eclipse, search

目前我每次插入一个字符串时都必须按 ctrl+H 并且必须在 *.java 文件中找到它。我有大约 600 个字符串要搜索。我想运行批处理搜索，在其中我提供一个包含所有字符串（逗号分隔或单行）的文件，然后 eclipse 对其运行搜索，最好生成一个文件或控制台输出以显示哪些字符串匹配，哪些不匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:20:39.020

`grep`从命令行使用怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:08:59.407

Eclipse 不会为你做这件事。您需要编写一个自定义程序。你可以写java程序。使用 eclipse 提供的 Search API。或者干脆使用 grep。如果我没记错的话，grep 命令是

> find $dir_path -name *.java -exec grep -i $text '{}' ; -打印

# ruby-on-rails-3 - Paypal 经常性分期付款

> ID：10900009
> 
> 赞同：3
> 
> 时间：2012-06-05T15:14:44.633
> 
> 标签：ruby-on-rails-3, paypal, recurring-billing, paypal-adaptive-payments

我有一个网站，用户可以`10USD`每月订阅一个包含数字商品的月包。每次订阅的 90% 归内容所有者所有；每次订阅的 10% 归网站所有者所有（金额正在拆分）。我想自动化这个过程。

需要提及的是，我的网站是使用 Ruby on Rails 3 构建的。我已经[看过 fnando/paypal-recurring](https://github.com/fnando/paypal-recurring)、[tc/paypal_adaptive](https://github.com/tc/paypal_adaptive "tc/paypal_adaptive")、[jpablobr/active_paypal_adaptive_payment](https://github.com/jpablobr/active_paypal_adaptive_payment)等gem，但没有一个特别的 gem 可以帮助我解决我的问题。

有什么想法吗？有没有有用的宝石可以解决这个问题？还是网络服务？

**更新（2012 年 6 月 5 日 17:24）：**

我尝试使用 Adaptive Payments 解决问题，但订阅时间限制为一年；另一方面，定期付款不支持拆分金额。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:03:04.113

PayPal Adaptive Chained and preapproved payments would have been one way. Another option is to create a normal PayPal recurring payment via Express Checkout Recurring Payments, and then use the MassPay API to send 90% to the content owner, and 10% to the website owner.
The only downside on this solution, is that they are 2 separate transactions, and you will pay fees 2 times.

Did you already check with PayPal whether they are willing to extend the 1-year term for preapproved payments?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:41:53.737

你检查过条纹吗？

他们不支持订阅拆分，但他们确实在其常见问题解答中描述了如何在市场上接受付款，请参阅*Stripe 是否支持代表其他用户（如市场）接受付款的企业？*在[https://stripe.com/help/faq](https://stripe.com/help/faq)

话虽这么说，似乎最简单的方法是接受订阅付款，然后编写应用程序的管理部分，该部分会降低 10% 的价格并从您的企业银行账户中打印出支票，然后每月发送出去。

您可能想要签出的另一个 ruby​​ 库是 ActiveMerchant。[http://activemerchant.org](http://activemerchant.org)。

# android - 如何使用视图对象刷新片段

> ID：10900010
> 
> 赞同：0
> 
> 时间：2012-06-05T15:14:45.963
> 
> 标签：android, android-fragments, android-view

我正在构建一个经典的菜单/细节片段平板电脑活动。

我的详细信息片段是由外部库生成的 Graph。这个库给了我一个意图或我的图表的视图。

当我点击我的菜单时，我想刷新我的图表。

这是我的活动代码：

```
public class myActivity extends FragmentActivity {

Context context;
Graphical graphical;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    context = this;
    setContentView(R.layout.fragment_suivi_conso_graph);
}

/**
 * Called when clicking on the menu Fragment
 */
public void onChooseGraph(UrlAction urlAction){
    GraphFragment graphFragment = (GraphFragment)                         getSupportFragmentManager().findFragmentById(R.id.graph_fragment);

    if (graphFragment == null || !graphFragment.isInLayout()) {
        Intent intentGraph;
    intentGraph = graphical.executeForIntent(this, urlAction);
    startActivity(intentGraph);
    } 
    else {
       View graphView = graphFragment.loadGraph(urlAction);
           // I don't know what to do with this View !
    }
} 
```

这是我的详细片段代码：

```
public class GraphFragment extends Fragment {

private Context context;
private Graphical graphical;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    context = this.getActivity();
    graphical = new Graphical();

    View graphView = null;
        graphView = graphical.executeForView(context, UrlAction.CONSO_WEEKS);
    return graphView;
}

public View loadGraph(UrlAction urlAction) {
    Log.d("GraphFragment","[loadGraph] START");
    View graphView = graphical.executeForView(context, urlAction);
            //This graphView contains the graph I want to display in my graphFragment
    return graphView;
}
 } 
```

我不知道我是否可以将片段视图重新加载到片段的*loadGraph*函数中。或者我是否需要在*onChooseGraph*函数中进行活动。

在这两种情况下，我都不知道如何刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:23:29.073

我找到了解决方案：

在我的详细片段上：`GraphFragment`，这里是正确的`loadGraph`方法：

```
 public void loadGraph(UrlAction urlAction) {
    Log.d(TAG,"[loadGraph] START, for urlAction : " + urlAction);

    View graphView = null;
    try {
        graphView = graphical.executeForView(context, urlAction);
    } catch (Exception e) {
        Log.e(TAG, "[loadGraph] Error during Parsing : "+e.getMessage());
        e.printStackTrace();
        if(e.getMessage().equals(XmlParserSuivitConso.XML_IS_ERROR)){
            Toast.makeText(context, getString(R.string.checkYouParameters), Toast.LENGTH_LONG).show();
            Intent intentSettings = new Intent(context, SettingsActivity.class);
            startActivity(intentSettings);
            getActivity().finish();
        }
    }

    setFragmentContentView(graphView);
}

void setFragmentContentView(View view) {
    LinearLayout.LayoutParams layoutParams = 
            new LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, 
                                          ViewGroup.LayoutParams.FILL_PARENT);
    mRootLayout.removeAllViews();
    mRootLayout.addView(view, layoutParams);
} 
```

在活动中`myActivity`，我使用以下代码调用`loadGraph`：

```
 public void onChooseGraph(UrlAction urlAction){
    GraphFragment graphFragment = (GraphFragment) getSupportFragmentManager().findFragmentById(R.id.graph_fragment);
    // On essaye de récupérer notre fragment.

    // S'il n'est pas présent, on le crée en lançant son Activity
    if (graphFragment == null || !graphFragment.isInLayout()) 
    {
        Intent intentGraph;
        try {
            intentGraph = graphical.executeForIntent(this, urlAction);
            startActivity(intentGraph);
        } catch (Exception e) {
            Log.e(TAG, "[onListItemClick] Error during Parsing : "+e.getMessage());
            e.printStackTrace();
            if(e.getMessage() == null || e.getMessage().equals(XmlParserSuivitConso.XML_IS_ERROR)){
                Toast.makeText(this, getString(R.string.checkYouParameters), Toast.LENGTH_LONG).show();
                Intent intentSettings = new Intent(this, SettingsActivity.class);
                startActivity(intentSettings);
                finish();
                return;
            }
        }
    } 
    else 
    // Sinon on met à jour le choix de l'utilisateur
    {
       graphFragment.loadGraph(urlAction);
    } 
```

我希望它可以帮助一些人！

# c# - 如何从字符串生成唯一整数？

> ID：10900014
> 
> 赞同：13
> 
> 时间：2012-06-05T15:15:06.897
> 
> 标签：c#, .net

我有一些具有异构键的类 - int 和 string - 我想通过公共接口使用它们。将 int 转换为 string 非常简单，但显然会导致性能问题。我看到的另一个选项是将它们装箱到“对象”，这似乎也不完美，或者以某种方式从字符串生成唯一整数（以前的“字符串”和“int”之间不会有连接，所以它们只能在“ string” 域），这里的问题是“如何”？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T15:17:35.440

只需从具有非常低碰撞概率的 a`string.GetHashCode()`中返回一个即可。`int``string`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-03T15:48:09.007

Be wary of `string.GetHashCode()`.

The .Net documentation states [https://msdn.microsoft.com/en-us/library/system.string.gethashcode(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.string.gethashcode(v=vs.110).aspx)

> The hash code itself is not guaranteed to be stable. Hash codes for identical strings states can differ across versions of the.NET Framework and across platforms (such as 32-bit and 64-bit) for a single version of the .NET Framework. In some cases, they can even differ by application domain

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T16:18:28.417

正如@tudor 指出的那样，GetHashCode 是从字符串（和其他对象）生成哈希码的受支持方式。不幸的是，没有办法进行这样的转换，所以一个整数代表唯一的字符串，除非你对字符串集施加严格的限制。

即，如果您的字符串足够短（即 2 个 Unicode 或 4 个 ASCII 字符）而不是明显的一对一映射，或者您的字符串集是有限的并且事先已知。

关于这个主题的一些阅读：被称为[鸽巢原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)的潜在问题保证了碰撞。由于[生日悖论](http://en.wikipedia.org/wiki/Birthday_paradox)，碰撞很可能发生在相当小的集合上。

# java - Android Spinner 抛出 Java.lang.nullpointerexception - Android 初学者

> ID：10900016
> 
> 赞同：1
> 
> 时间：2012-06-05T15:15:20.120
> 
> 标签：java, android, android-layout, android-intent, nullpointerexception

我是初学者，所以请多多包涵。我创建了一个带有微调器的应用程序，用于控制编辑文本的可见性。当我运行这个应用程序时，一个 catch 语句会捕获一个空点异常，并且微调器没有填充我的字符串数组。有什么想法或帮助吗？

这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        try {

        player1.findViewById(R.id.editTextPlayer1);
        player2.findViewById(R.id.editTextPlayer2);
        player3.findViewById(R.id.editTextPlayer3);
        player4.findViewById(R.id.editTextPlayer4);
        player5.findViewById(R.id.editTextPlayer5);
        player6.findViewById(R.id.editTextPlayer6);
        player7.findViewById(R.id.editTextPlayer7);
        player8.findViewById(R.id.editTextPlayer8);

        Spinner spinner = (Spinner)findViewById(R.id.spinnerplayers);

        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.peoplearray, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

        spinner.setOnItemSelectedListener(this);
        }catch (Exception e) {

            // handle any errors

            Log.e("TestActivity", "Error in activity", e);  // log the error

            // Also let the user know something went wrong

            Toast.makeText(getApplicationContext(), e.getClass().getName() + " " + e.getMessage(),Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int pos,
            long id) {
            numberOfPlayers = pos + 2;

        switch(pos){
        case 0:
            player1.setVisibility(View.VISIBLE);
            player2.setVisibility(View.VISIBLE);
            break;
        case 1:
            player1.setVisibility(View.VISIBLE);
            player2.setVisibility(View.VISIBLE);
            player3.setVisibility(View.VISIBLE);
            break;
        case 2:
            player1.setVisibility(View.VISIBLE);
            player2.setVisibility(View.VISIBLE);
            player3.setVisibility(View.VISIBLE);
            player4.setVisibility(View.VISIBLE);
            break;
        case 3:         
            player1.setVisibility(View.VISIBLE);
            player2.setVisibility(View.VISIBLE);
            player3.setVisibility(View.VISIBLE);
            player4.setVisibility(View.VISIBLE);
            player5.setVisibility(View.VISIBLE);
            break;
        case 4:
            player1.setVisibility(View.VISIBLE);
            player2.setVisibility(View.VISIBLE);
            player3.setVisibility(View.VISIBLE);
            player4.setVisibility(View.VISIBLE);
            player5.setVisibility(View.VISIBLE);
            player6.setVisibility(View.VISIBLE);
            break;
        case 5:
            player1.setVisibility(View.VISIBLE);
            player2.setVisibility(View.VISIBLE);
            player3.setVisibility(View.VISIBLE);
            player4.setVisibility(View.VISIBLE);
            player5.setVisibility(View.VISIBLE);
            player6.setVisibility(View.VISIBLE);
            player7.setVisibility(View.VISIBLE);
            break;
        case 6:
            player1.setVisibility(View.VISIBLE);
            player2.setVisibility(View.VISIBLE);
            player3.setVisibility(View.VISIBLE);
            player4.setVisibility(View.VISIBLE);
            player5.setVisibility(View.VISIBLE);
            player6.setVisibility(View.VISIBLE);
            player7.setVisibility(View.VISIBLE);
            player8.setVisibility(View.VISIBLE);
            break;
        }

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    } 
```

这是 logcat 错误：

```
06-05 15:10:03.986: E/TestActivity(1815): Error in activity
06-05 15:10:03.986: E/TestActivity(1815): java.lang.NullPointerException
06-05 15:10:03.986: E/TestActivity(1815):   at com.brightdesign.truthordare.Main.onCreate(Main.java:42)
06-05 15:10:03.986: E/TestActivity(1815):   at android.app.Activity.performCreate(Activity.java:4465)
06-05 15:10:03.986: E/TestActivity(1815):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-05 15:10:03.986: E/TestActivity(1815):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-05 15:10:03.986: E/TestActivity(1815):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-05 15:10:03.986: E/TestActivity(1815):   at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-05 15:10:03.986: E/TestActivity(1815):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-05 15:10:03.986: E/TestActivity(1815):   at android.os.Handler.dispatchMessage(Handler.java:99)
06-05 15:10:03.986: E/TestActivity(1815):   at android.os.Looper.loop(Looper.java:137)
06-05 15:10:03.986: E/TestActivity(1815):   at android.app.ActivityThread.main(ActivityThread.java:4424)
06-05 15:10:03.986: E/TestActivity(1815):   at java.lang.reflect.Method.invokeNative(Native Method)
06-05 15:10:03.986: E/TestActivity(1815):   at java.lang.reflect.Method.invoke(Method.java:511)
06-05 15:10:03.986: E/TestActivity(1815):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-05 15:10:03.986: E/TestActivity(1815):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-05 15:10:03.986: E/TestActivity(1815):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:24:45.077

**代替**

```
 Spinner spinner = (Spinner)findViewById(R.id.spinnerplayers);  
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.peoplearray, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter); 
```

**这样**

```
 Spinner spinner = (Spinner)findViewById(R.id.spinnerplayers);
    ArrayAdapter<String> adapter=new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item, getResources().getStringArray(R.array.peoplearray))
    spinner.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T13:48:37.813

确保您在此语句中没有得到 null。

```
Spinner spinner = (Spinner)findViewById(R.id.spinnerplayers); 
```

您可以清理项目，然后再次重建。它可能会解决您的问题。

# android - android-maven-plugin 和资源过滤

> ID：10900017
> 
> 赞同：4
> 
> 时间：2012-06-05T15:15:20.467
> 
> 标签：android, maven, android-maven-plugin, maven-resources-plugin

我是 maven 的新手，并尝试将其配置为使用 android-maven-plugin 构建我的 android 项目。我在 assets 目录中有一个 application.properties 文件，其中包含不同的应用程序设置。我想从我的 pom.xml 中获取这些值。在属性文件中，我将一个属性定义为

```
myFilteredProperty=${helloFromPOM} 
```

并在 POM 中定义相同的属性：

```
 <properties>
        <helloFromPOM>MY PROPERTY</helloFromPOM>
    </properties> 
```

打开对资产目录的过滤

```
<build>
    ...
    <resources>
        <resource>
            <directory>${project.basedir}/assets</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    ...
</build> 
```

并按照android-maven-plugin的[示例](http://github.com/jayway/maven-android-plugin-samples/archives/stable)配置资源插件

```
 <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <executions>
                <execution>
                    <phase>initialize</phase>
                    <goals>
                        <goal>resources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

但是，当我尝试在我的应用程序中使用此属性显示 Toast 时，我看到的是 ${helloFromPOM} 而不是我的属性。

在我由 maven 生成的目标目录中，我在两个地方看到了这个属性文件：

*   /target/generated-sources/combined-assets/assets/application.properties
*   /target/myapp-0.0.1-SNAPSHOT.apk\application.properties

首先是错误的，它包含 ${helloFromPOM} 而不是 MY PROPERTY。二、里面的apk文件是正确的。但是当我在设备上安装这个 apk 时，它会显示错误的值 ${helloFromPOM}。

我做错什么了？

**编辑**

感谢您的回答，我试过了，但得到这个错误：

> [错误] 生成源时出错。org.apache.maven.plugin.MojoExecutionException：在 com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.execute( GenerateSourcesMojo.java:102) at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101) at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209) at org.apache .maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder .buildProject(LifecycleModuleBuilder.java:84) 在 org.apache.maven.lifecycle。 [http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException](http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException)

当我`<resourceDirectory>${project.build.directory}/filtered-assets</resourceDirectory>`在 POM 中评论时，构建完成成功，但它不使用过滤的资产。

我也尝试`cmd.exe /X /C ""C:\Program Files\Android\android-sdk\platform-tools\aapt.exe" package -m -J D:\projects\myapp\target\generated-sources\r -M D:\projects\myapp\AndroidManifest.xml -S D:\projects\myapp\target\filtered-assets --auto-add-overlay -A D:\projects\myapp\assets -I "C:\Program Files\Android\android-sdk\platforms\android-8\android.jar""`在我的命令行中执行这个并得到这个错误：`invalid resource directory name: D:\projects\myapp\target\filtered-assets/application.properties`。过滤后的资产后使用错误的斜线而不是反斜线。更改`<resourceDirectory>${project.build.directory}/filtered-assets</resourceDirectory>`为`<resourceDirectory>${project.build.directory}\filtered-assets</resourceDirectory>`也无济于事。

PS我的插件部分看起来像这样

```
 <plugin>
        <artifactId>maven-resources-plugin</artifactId>
        <executions>
            <execution>
                <phase>initialize</phase>
                <goals>
                    <goal>resources</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
            <source>1.6</source>
            <target>1.6</target>
        </configuration>
    </plugin>
    <plugin>
        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
        <artifactId>android-maven-plugin</artifactId>
        <version>3.2.0</version>
        <configuration>
            <sdk>
                <platform>8</platform>
            </sdk>
            <emulator>
                <avd>2.3.3_API-10</avd>
            </emulator>
            <undeployBeforeDeploy>true</undeployBeforeDeploy>
            <resourceDirectory>${project.build.directory}/filtered-assets</resourceDirectory>
        </configuration>
        <extensions>true</extensions>
    </plugin> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T07:29:00.323

现在它可以工作了，我更改`<resourceDirectory>${project.build.directory}/filtered-assets</resourceDirectory>`为`<assetsDirectory>${project.build.directory}/filtered-assets</assetsDirectory>`. 结果 POM：

```
<properties>
    <myProperty>MY PROPERTY!!!!111</myProperty>
</properties>

    <resources>
        <resource>
            <directory>${project.basedir}/assets</directory>
            <filtering>true</filtering>
            <targetPath>${project.build.directory}/filtered-assets</targetPath>
            <includes>
                <include>**/*.properties</include>
            </includes>
        </resource>
    </resources>

    <plugins>
        <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <executions>
                <execution>
                    <phase>initialize</phase>
                    <goals>
                        <goal>resources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.2.0</version>
            <configuration>
                <sdk>
                    <platform>8</platform>
                </sdk>
                <emulator>
                    <avd>2.3.3_API-10</avd>
                </emulator>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
                <assetsDirectory>${project.build.directory}/filtered-assets</assetsDirectory>
            </configuration>
            <extensions>true</extensions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:16:12.297

如果您在 pom 中指定属性，则也不应该在单独的文件中声明它。相反，如果你想在一个单独的文件中指定它，你不应该在你的 POM 中声明它。

但是，我不确定您到底要做什么 - maven 属性仅在您的 pom 文件中有效，并且在构建过程中使用。您无法从应用程序中访问它们。Android/java 不知道它们存在并且看不到它们，所以您`${helloFromPOM}`在代码中看到 的原因`MY PROPERTY`是 android/java 只是显示文本 - 它不知道它代表一个属性并且它无法将其解析为变量或其他值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:17:42.683

有时它是由不适当的平台版本引起的。尝试在您的 pom 文件中正确设置它。寻找类似的东西

```
<sdk>
    <platform>17</platform>
</sdk> 
```

# c# - 测试一个对象是否为任何泛型类型实现了泛型接口

> ID：10900021
> 
> 赞同：6
> 
> 时间：2012-06-05T15:15:43.697
> 
> 标签：c#, generics, reflection, interface

我想测试一个对象以查看它是否实现`IDictionary<TKey,TValue>`，但我不在乎什么`TKey`和`TValue`是什么。

我可以测试是否是这样的框架的具体实例`Dictionary<,>`：

```
bool isDict = type.IsGenericType && 
    (typeof(Dictionary<,>).IsAssignableFrom(type.GetGenericTypeDefinition()); 
```

但我想不出一种方法来测试实现的东西`IDictionary<,>`。该技术不适用于界面；`IsAssignableFrom`如果我针对泛型基类型进行测试，则返回 false `IDictionary<,>`，这似乎很奇怪，因为它适用于具体类型。

通常你会`is`用来测试某个东西是否实现了一个接口，但当然这只有在我想测试一个特定的通用接口时才有效。或者我只是测试一个通用的祖先接口，但与其他通用数据结构（例如`IList<>`and ）不同`ICollection<>`，没有唯一的非泛型接口可以`IDictionary<TKey,TValue>`继承泛型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T15:19:23.753

像这样的东西怎么样

```
return type.GetInterfaces()
           .Where(t => t.IsGenericType)
           .Select(t => t.GetGenericTypeDefinition())
           .Any(t => t.Equals(typeof(IDictionary<,>))); 
```

我相信您可以轻松地将其概括为任何泛型类型定义。

# php - 做什么 可能重复：

> ID：10900026
> 
> 赞同：0
> 
> 时间：2012-06-05T15:15:53.997
> 
> 标签：php

> **可能重复：**
> [<?= 是什么意思？](https://stackoverflow.com/questions/1959256/what-does-mean)
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

有谁知道是什么`<?`意思？它与我习惯看到的通常的 php 不同，并且正在调试一个文件，所以我想了解更多关于它的信息，但无法在网络上获得任何点击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:17:19.193

它的含义与 相同`<?php`，但仅在打开[短标签](http://www.php.net/manual/en/language.basic-syntax.phptags.php)时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:17:42.053

这是简短的开放标签。配置里面有个设置可以开启或者关闭，所以不推荐使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:19:19.970

这是简短的 php 开始标签，您可以使用

`<? //CODE HERE ?>`,

```
`<?PHP //CODE HERE ?> 
```

或显示您可以使用的信息

```
`<?= //CODE HERE ?>` 
```

要使用 Short 标签，您需要在配置文件中设置

你可以看看这里：

[http://php.net/manual/en/ini.core.php](http://php.net/manual/en/ini.core.php)

告诉 PHP 是否应该允许 PHP 的 open 标记的短格式 ()。如果您想将 PHP 与 XML 结合使用，您可以禁用此选项以使用内联。否则，您可以使用 PHP 打印它，例如：'; ?>。此外，如果禁用，您必须使用长格式的 PHP 开放标记 ()。

```
Note:

This directive also affected the shorthand <?= before PHP 5.4.0, which is identical to <? echo. Use of this shortcut required short_open_tag to be on. Since PHP 5.4.0, <?= is always available. 

Name         Default    Changeable      Changelog
short_open_tag  "1"     PHP_INI_ALL     PHP_INI_ALL in PHP 4.0.0\. PHP_INI_PERDIR in PHP < 5.3.0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T15:18:13.070

它是一个速记脚本标签，但它有一个服务器配置设置，所以如果你打算部署你的脚本，你不应该使用它，因为有些人可能没有启用该设置并且不理解这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T16:23:51.843

它相当于`<?php`，但绝不应该使用它。只有 Chuck Norris 可以使用短标签……

# .net - 从 sql 查询/脚本检查 Internet 连接....？

> ID：10900030
> 
> 赞同：0
> 
> 时间：2012-06-05T15:16:11.133
> 
> 标签：.net, sql, sql-server-2008-r2

我们可以从 sql 脚本检查互联网的可用性吗？我google了很多都没用。

对此的任何建议都将受到高度赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:28:39.103

您可以使用[SQL CLR](http://en.wikipedia.org/wiki/SQL_CLR) UDF 执行此操作。这是一个例子：

```
[Microsoft.SqlServer.Server.SqlFunction]
public static SqlBoolean HasConnectivity(SqlString url)
{
    try
    {
        if (url.IsNull)
        {
            return false;
        }
        var httpRequest = (HttpWebRequest)HttpWebRequest.Create(url.ToString());
        using(var response = (HttpWebResponse)httpRequest.GetResponse())
        {
            //Make sure the Http Repsonse was HTTP 200 OK.
            return response.StatusCode == HttpStatusCode.OK;
        }
    }
    catch
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:21:39.560

编写一个包含 WebClient/TcpClient 代码的 SQL 程序集来检查互联网，然后安装 aseembly 并在 SQL 中调用其方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:26:03.953

You can try to [ping some hosts using T-SQL procedure](http://5mins.wordpress.com/2009/08/20/pingscanner-using-t-sql-in-sql-server/).

# jsf - JSF，显示取自 bean 方法的 FTP 下载链接

> ID：10900034
> 
> 赞同：0
> 
> 时间：2012-06-05T15:16:49.987
> 
> 标签：jsf

我有一个“字符串 getFileLocation();” 我的 mbean 中的方法。我需要在我的 JSF 页面上显示此方法生成的 FTP 链接。单击链接时，应出现标准的“另存为”对话框。此外，在此之前/之后不得重新加载页面。您能否就我如何实现它提出一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:23:50.070

“另存为”对话框不是 JSF 的一部分（也不是 HTML），它只是 Web 浏览器识别传入的数据不是 HTML 并弹出选项。

只需在您的页面中添加一个指向新窗口的链接即可。

# xcode - 在 Xcode，如何更改“运行”“停止”按钮和“iPhone 5.1 模拟器”之间的显示内容

> ID：10900038
> 
> 赞同：0
> 
> 时间：2012-06-05T15:17:09.737
> 
> 标签：xcode

我更改了项目名称/产品名称，但在“运行”“停止”按钮和“iPhone 5.1 Simulator”之间仍然看到旧项目名称。

我该如何改变它？项目名称在不同位置有多少个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:23:54.440

该名称称为方案名称。假设您使用的是 xcode 4，您应该可以通过单击“产品 -> 管理方案”菜单来更改它。您应该在列表中看到您的方案名称并轻松重命名它。

# php - GotoWebinar REST API - 自定义问题

> ID：10900043
> 
> 赞同：1
> 
> 时间：2012-06-05T15:17:17.253
> 
> 标签：php, json, api

请保存我的堆栈溢出.. 我祈祷有人使用 API 注册了参与者（并提交了自定义问题的答案）。

好的，首先，这是创建注册人的文档：

```
POST https://api.citrixonline.com/G2W/rest/organizers/73563532324/webinars/89... HTTP/1.1
Accept: application/json
Accept: application/vnd.citrix.g2wapi-v1.1+json
Content-Type: application/json
Authorization: OAuth oauth_token={oauthToken}

{
  "firstName":"Saumil",
  "lastName":"Jhaveri",
  "email":"test@test.com",
  "address":"650+Townsend+St,+St.+325",
  "city":"San+Francisco",
  "state":"California",
  "zipCode":"94103",
  "country":"United+States",
  "phone":"3123751884",
  "industry":"Accounting",
  "organization":"Citrix",
  "jobTitle":"Software+Engineer",
  "purchasingTimeFrame":"13+months",
  "roleInPurchaseProcess":"Decision+Maker",
  "numberOfEmployees":"120",
  "questionsAndComments":"No+Comments!",
  "responses":[
    {
      "questionKey":152,
      "responseText":"Fantastic!"
    }, {
      "questionKey":151,
      "answerKey":152
    }
  ]
} 
```

因此，正如您从上面的 json rest 示例中看到的那样，REST 主体需要是一个数组，用于存储“正常”值，例如姓名、电子邮件等……

如果您查看示例底部附近，您会在该数组中看到一个数组，称为响应。

此数组包含自定义问题 ID 和用户响应的数组。

那么当只有一个自定义问题时会发生什么？

我努力了：

```
array('firstName' => $fname, 'lastName' => $lname, 'email' => $em, 
'responses' => array('questionKey' => 300000000000042400, 'responseText' => $custom)); 
```

并且还尝试了（即使只有一个问题，也尝试了一组数组）：

```
array('firstName' => $fname, 'lastName' => $lname, 'email' => $em, 
'responses' => array(array('questionKey' => 300000000000042400, 'responseText' => $custom))); 
```

如果我对我的数据运行 json_encode，这是输出

```
{
   "firstName":"Ellis",
   "lastName":"Ryan",
   "email":"ryanthecloser@gmail.com",
   "responses":[
      {
         "questionKey":3.0e+17,
         "responseText":"http:\/\/facebook.com\/doubleyourlikes"
      }
   ]
} 
```

当我输入这个问题时，我想我看到了这个问题......我的 json 数据（更具体地说是 questionkey）正在转换为科学记数法......我尝试将 questionKey 作为字符串提交，但这不起作用......

我希望科学记数法是问题所在。任何人都知道如何在 php 中制作这么大的数字：300000000000042400

并且能够在没有数字转换的情况下进行 encode_json 吗？或者，如果有人使用 api 成功获得了为注册人显示的自定义问题回复，请告诉我！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T16:17:41.873

*叹*

将 questionKey 作为字符串传递是 100% 没问题的，所以问题就消失了……

我的问题实际上是有两个版本的创建注册人：

版本一：接受姓名和电子邮件并丢弃其他所有内容 版本二：添加
接受：application/vnd.citrix.g2wapi-v1.1+json

到标题以选择第二个版本。第二个版本允许自定义字段。

因为我没有包含额外的标头参数，所以我的自定义字段数据被丢弃了！

Grrrr 我在文档中阅读了无数次...... RTM！，并按照它所说的去做，哈哈！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T23:06:31.267

为了使 LARGE 整数保持为数字，您要么必须将 PHP 更新到版本 5.4+ 并使用类似的东西

```
$response = curl_exec( $ch );

$json = json_decode( $response, true, 512, JSON_BIGINT_AS_STRING ); 
```

或者

```
$response = curl_exec( $ch );

$response = preg_replace('/("\w+"):(\d+)/', '\\1:"\\2"', $response );  # quote the number
$json = json_decode( $response ); 
```

# listview - Corona SDK：如何删除列表视图项侦听器？

> ID：10900046
> 
> 赞同：0
> 
> 时间：2012-06-05T15:17:20.923
> 
> 标签：listview, coronasdk, ontouchlistener

我在 Corona 中创建了列表视图：

```
myList = tableView.newList{
            data=data,
            default="res/blueBg.png",
            backgroundColor={255,2552,255},
            onRelease=listButtonRelease,
            top=135,
            bottom=100,
            --data in rows etc.
         } 
```

并添加了 onRelease 监听器：

```
function listButtonRelease( event )
    self = event.target
    local id = self.id
    print(self.id)

    storyboard.gotoScene( "scene2", "slideLeft", 200 )
end 
```

但是在我切换到 scene2 之后，监听器仍然响应触摸事件。我尝试在 exitScene 上使用它：

```
myList:removeEventListener( "onRelease",  listButtonRelease) 
```

但由于某种原因它不起作用。那么如何从 listview 及其项目中删除侦听器呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:48:10.010

一个万无一失的解决方法。

`sceneExited = true` 在您的 exitScene 侦听器中设置一个标志。

在您的 listButtonRelease 函数中，检查

```
if sceneExited then return end 
```

`sceneExited = false`并在您的 enterScene 侦听器中设置标志

# email - 在 SMTP 中对用户隐藏文本/纯文本

> ID：10900056
> 
> 赞同：0
> 
> 时间：2012-06-05T15:17:58.970
> 
> 标签：email, mime-types, mime, email-client

为了解决[SMTP 服务器不显示内容类型设置为 multipart/alternative 的电子邮件附件](https://stackoverflow.com/questions/10873269/correct-email-format-for-email-with-plain-html-and-an-attachment-in-smtp/10899430#10899430)的问题，我不得不将电子邮件设置为 multipart/mixed，但这有一个不幸的副作用，即同时显示纯文本和 HTML，它们会创建毫无意义的重复并且对用户来说是难看的。

使用多部分/混合集，有什么方法可以从用户隐藏“文本/纯文本”（不删除它，因为它将被解析器使用）并只显示 HTML？我仅指将其隐藏用于 cilent 程序（例如 hotmail、yahoo 等），而不是用户可以看到所有内容的 IMAP 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:32:40.717

如果您不希望将文本显示给用户，那么将其作为多部分/混合消息的一部分似乎是错误的，因为您的文本/普通部分的内容更正确地是元数据。如果可以的话，我可能会把它放在标题或其他东西中。

如果它必须是多部分消息的一部分，我会尝试使用邮件客户端不知道的自定义 mime 类型进行测试，看看是否会导致相关部分被隐藏。这感觉有点hacky，但它可能会起作用。

# c - 在 C 中使用 EOF 和 getchar() 进行字符计数

> ID：10900064
> 
> 赞同：0
> 
> 时间：2012-06-05T15:18:19.793
> 
> 标签：c, windows, eof, getchar

> **可能重复：**
> [为什么 getchar() 不能在 Windows 控制台中将返回识别为 EOF？](https://stackoverflow.com/questions/1793616/why-doesnt-getchar-recognise-return-as-eof-in-windows-console)

我是 C 的新手，想弄清楚 EOF 和 getChar() 是如何工作的。

```
#include <stdio.h>

main()
{

int number = 0;
while(getchar() != EOF)
     number++;

printf("%d", number);
} 
```

当我键入一些随机字符时，程序什么也不做，我认为它永远不会退出那个 while 循环。这是为什么？我在 Windows 7 上使用 CodeBlocks。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:19:55.650

因为你没有发送一个`EOF`字符。“EOF”代表“文件结束”；控制台输入（称为“标准输入”）是文件的一种特殊情况。但是为了表示这个特殊的文件已经结束，你需要发送一个特殊的信号。您可以在 Windows 上通过按 Ctrl+Z 来获得这种效果（由于某种原因，后跟 Enter）。

# jquery - Fancybox 和 JQuery Accordian 不能在同一页面上工作

> ID：10900070
> 
> 赞同：0
> 
> 时间：2012-06-05T15:18:30.237
> 
> 标签：jquery, fancybox

我在同一页面上有一个精美的盒子和一个 jquery 手风琴。每个人都独立工作，但不能一起工作。某处发生冲突。我查看了几个论坛和帖子，但无法修复。有人说先放 jquery-ui 脚本。那没有用。有人说将这些功能组合到一个脚本中。那没有用。

这是我页面的头部。

```
`<head>
`<title>Transportation Business Group</title>
`<meta name="KEYWORDS" content="International business group.">
`<link rel="stylesheet" href="/stylesheets/voglobalstyle.css" type="text/css" media="screen,projection">
`<link rel="stylesheet" href="stylesheets/style.css" type="text/css" media="screen,projection">
`<meta http-equiv="content-type" content="text/html; charset=utf-8">

`<script src="/scripts/jQuery-UI/1.8.17/jquery-ui.js" type="text/javascript"></script>
`<link rel="stylesheet" href="/scripts/jQuery-UI/1.8.17/Content/themes/base/twisty.ui.css"
    type="text/css" media="screen,projection" />
`<script type="text/javascript" src="/scripts/jquery/Plugins/fancybox/jquery-1.4.2.min.js"></script>
`<script type="text/javascript" src="/scripts/jquery/Plugins/fancybox/jquery.mousewheel-3.0.2.pack.js"></script>
`<script type="text/javascript" src="/scripts/jquery/Plugins/fancybox/jquery.fancybox-1.3.1.js"></script>
`<script src="/scripts/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        /*
        *   Examples - images
        */
        $("#accordion").accordion({
            autoHeight: false,
            navigation: true,
            collapsible: true,
            active: true
        });
        $("a#MikeFormal").fancybox({
            'titleShow': true,
            'titlePosition': 'over',

            'autoScale': false
        });

        $("a#MikeInformal").fancybox({
            'titleShow': true,
            'titlePosition': 'over',

            'autoScale': false
        });

    });
</script>
 </head> 
```

我将不胜感激您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:15:38.900

出于实际原因，一些插件在下载中包含了一个 jQuery 版本，但您只需要加载一个实例（可能的最新版本）。此外，必须首先加载 jQuery，在任何插件之前，甚至在 jQuery UI 之前。

在您的情况下，您在 jQuery UI 之后加载了 jQuery 两次。使用单个实例并将其放在文档中任何插件的前面。

此外，我没有看到您在代码中的任何位置加载了 fancybox CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:19:20.593

您的脚本顺序应为：

```
<!-- Jquery must load first -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="/scripts/jQuery-UI/1.8.17/Content/themes/base/twisty.ui.css"
    type="text/css" media="screen,projection" />
<script type="text/javascript" src="/scripts/jquery/Plugins/fancybox/jquery.mousewheel-3.0.2.pack.js"></script>
<script type="text/javascript" src="/scripts/jquery/Plugins/fancybox/jquery.fancybox-1.3.1.js"></script> 
```

我注意到您还使用了旧版本的 jquery 核心和最新版本的 jQuery UI。我注意到的第二件事是您正在从本地服务器而不是 CDN 加载 jQuery Core 和 UI js 文件。我已将它们替换为 Google CDN 版本。

对于 Fancybox，您可能还想查看从[CDNJS](http://www.cdnjs.com/)加载它们，但我暂时保留它们。

# php - Joomla 菜单问题以显示当前项目

> ID：10900072
> 
> 赞同：0
> 
> 时间：2012-06-05T15:18:35.303
> 
> 标签：php, joomla

我的 Joomla 网站中有两个不同的菜单。一个是带有菜单项（主页、投资组合、联系我们等）的顶部菜单，第二个是带有菜单项（p1、p2、p3 等）的左侧菜单。我为顶部菜单和左侧菜单创建了不同的菜单。现在我想要的是当我从顶部菜单中选择“投资组合”时，它应该显示为当前项目，并且“p1”（从左侧菜单中）也应该是当前的。同样，当我从左侧菜单中选择任何菜单项时，投资组合必须保持选中状态（当前）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:45:08.623

这可以使用菜单别名来完成。

在您的第二个菜单中，将每个菜单项的类型更改为`alias`。这样做将为您提供从主菜单中选择菜单项的选项。选择相应的主菜单项并保存。

现在，当您单击任一菜单中的菜单项时，另一个菜单中的相应项将与您单击的菜单项一起处于活动状态。

# c# - 由具有 ChannelFactory 的接口调用时，如何从 WCF 工作流 (WF4) 返回字符串？

> ID：10900074
> 
> 赞同：1
> 
> 时间：2012-06-05T15:18:42.140
> 
> 标签：c#, wcf, workflow-foundation-4

如果我有一个托管工作流（WF4 + WCF）并在 IIS 中运行，实现以下接口：

```
[ServiceContract]
public interface IMessageService
{   
     [OperationContract]
     string SendMessage(string message);
} 
```

（使用`RecieveActivity`和`SendReply`从`System.ServiceModel.Activities`）

并像这样调用它：

```
 var channel = new ChannelFactory<IMessageService>().CreateChannel(<init params>);
    string answer = channel.SendMessage("Testmessage"); 
```

然后`answer`始终为空。如果我通过 WcfTestClient 使用工作流，我可以看到有一个返回的 xml 对象。

> 如何使工作流返回要填充的字符串`answer`？

（我想避免“添加 ServiceReference 并返回大量 xml-approach”）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T18:32:58.367

您需要一个`[return]`属性来指定如何查找结果。

在 中，`SendReplyToReceive`您可以选择发回 a`Message`或`Parameters`。根据我的经验，您需要选择`Parameters`但只发回一个。假设您将返回参数命名为“result”，那么您需要在接口合同上使用此属性：

```
[return: MessageParameter(Name = "result")] 
```

这是我的一个完整示例；

```
namespace NewOrbit.ExVerifier.Model.Workflow.Case
{
    using System;
    using System.ServiceModel;

    using NewOrbit.ExVerifier.Model.Workflow;

    [ServiceContract(Namespace = "urn://exverifier.neworbit.co.uk/")]
    public interface ICaseWorkflow
    {
        [OperationContract(Action = "urn://exverifier.neworbit.co.uk/NewOrbit.ExVerifier.Model.Workflow.Case.ICaseWorkflow/Start",
            ReplyAction = "urn://exverifier.neworbit.co.uk/NewOrbit.ExVerifier.Model.Workflow.Case.ICaseWorkflow/StartReply")]
        [return: MessageParameter(Name = "result")]
        WorkflowInstanceIdentifier Start(int caseID);

        [OperationContract(Action = "urn://exverifier.neworbit.co.uk/NewOrbit.ExVerifier.Model.Workflow.Case.ICaseWorkflow/ApplicationStateChanged",
            ReplyAction = "urn://exverifier.neworbit.co.uk/NewOrbit.ExVerifier.Model.Workflow.Case.ICaseWorkflow/ApplicationStateChangedReply")]
        [return: MessageParameter(Name = "result")]
        bool ApplicationStateChanged(Guid instanceID, int applicationID);

        [OperationContract(Action = "urn://exverifier.neworbit.co.uk/NewOrbit.ExVerifier.Model.Workflow.Case.ICaseWorkflow/Cancel",
            ReplyAction = "urn://exverifier.neworbit.co.uk/NewOrbit.ExVerifier.Model.Workflow.Case.ICaseWorkflow/CancelReply")]
        [return: MessageParameter(Name = "result")]
        bool Cancel(Guid instanceID);
    }
} 
```

顺便说一句，在您的示例中，我不确定您如何摆脱不指定 OperationContract 但您很好 - 它们真的很痛苦，因为您必须指定它们的格式在合同和工作流程中是*不同的。*

此外，以防万一您不知道并且它可能会导致一些非常微妙的错误：您传入的参数*是*通过名称识别的，因此您在界面中为入站参数指定的名称与您在工作流程。当你想到它时很明显，但可以抓住你。哦，避免方法名称太长，因为它们也会因误导性错误消息而中断。

# jquery - 子组件“空”时隐藏 div（无显示）

> ID：10900076
> 
> 赞同：0
> 
> 时间：2012-06-05T15:18:55.603
> 
> 标签：jquery, dom, html, traversal

在 jQuery 方面相当新手，所以在此先感谢您对我的支持 :)

对于设置宽度和高度的 div，我正在寻找一种方法来隐藏（设置显示：无；）当浏览器上不显示任何内容时这些容器。更常见的是，当它们嵌套了 HTML 会使事情变得有点复杂时，因为需要检查子组件是否为空/显示：无；。

到目前为止，我最接近的是使用 .text() 方法，将其修剪为空白，并检查长度。然而， .text() 会忽略样式并抓取隐藏的文本，并且由于它不返回 DOM 结构，因此很难过滤掉。

这是我一直在玩的小提琴：http: [//jsfiddle.net/JbBkQ/5/](http://jsfiddle.net/JbBkQ/5/) 我希望其中包含“隐藏内容”的 div 被第一个 jQuery 函数捕获，因为

隐藏的内容被包围，它的显示设置为无。

那有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:58:44.947

选择您要查找的 div 迭代它们并根据是否可见过滤子集合。如果没有可见的子元素隐藏它自己的元素。

```
$("div").each(function(){
   if(!this.children().find(":visible").length){
       this.hide();
   }
} 
```

如果您选择的 div 可以相互嵌套，这将不会正常工作（一个 div 与另一个被隐藏的 div 可能不会自己隐藏，具体取决于选择的顺序）

**编辑**

如果您只想下降一层，则可以使用 filter 而不是 find

```
$("div").each(function(){
     if(!this.children().filter(":visible").length){
         this.hide();
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:52:09.997

如果理解正确，您可以尝试使用[`:empty`伪类](http://www.w3.org/TR/selectors/#empty-pseudo)

## [在线演示](http://dabblet.com/gist/2875872)

```
div:empty {
    display: none;
} 
```

# c# - 用C#在数组中移动元素

> ID：10900079
> 
> 赞同：2
> 
> 时间：2012-06-05T15:19:01.683
> 
> 标签：c#, arrays, element

有没有办法在数组中移动项目？例如：

```
int[] myArray = {1,2,3,4}; 
```

第二个元素成为最后一个：

```
int[] myArray = {1,3,4,2}; 
```

PS：不，这不是家庭作业。我可以想到至少一种解决方案，但它需要相当困难的实现：

*   首先我们将第二个元素保存到 Int
*   然后我们从数组中删除这个元素
*   然后我们在数组的最后添加新元素

任何其他（阅读 - 更容易）的方式来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T15:24:43.167

使用数组没有简单的方法来做到这一点。您必须遍历数组，将每个元素向上移动到正在移动的索引，然后在末尾重新插入该元素。你总是可以使用 a`List<int>`来做到这一点。

```
List<int> list = myArray.ToList();
int value = list[1];
list.RemoveAt(1);
list.Add(value);
myArray = list.ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T15:23:17.480

使用`List<int>`. 数组并不适合所有元素的这种运动。

或者尝试交换最后一个元素和选择的元素，但它会弄乱顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:27:52.173

If the array is always a fixed size then:

```
myArray = new int[4] { myArray[0], myArray[2], myArray[3], myArray[1] }; 
```

But if it is variable in size then it becomes trickier and is best done in a List first

```
int lastElement = 0;
List<int> newArray = new List<int>();
for ( int index=0; index<myArray.Length; index++)
{
     if ( index == 1 ) lastElement = myArray[index];
     else newArray.Add(myArray[index]);
}
newArray.Add(lastElement);
myArray = newArray.ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T15:35:48.320

```
 myArray = new List<int>(myArray.Where((x, i) => (i != 1))) 
               { myArray[1] }.ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:28:23.783

对于这种情况，您可以使用[XOR 交换](http://en.wikipedia.org/wiki/XOR_swap_algorithm)：

```
[Test]
public void TestSwap()
{
    int[] myArray = { 1, 2, 3, 4 };

    Console.WriteLine(string.Join(", ", myArray));

    Swap(myArray, 1, 2);
    Swap(myArray, 2, 3);

    Console.WriteLine(string.Join(", ", myArray));
}

static void Swap(int[] vals, int x, int y)
{
    vals[x] = vals[x] ^ vals[y];
    vals[y] = vals[y] ^ vals[x];
    vals[x] = vals[x] ^ vals[y];
} 
```

# css - 为什么有人会在位图/SpriteSheet 技术上使用纯 CSS 样式按钮？

> ID：10900088
> 
> 赞同：5
> 
> 时间：2012-06-05T15:19:48.567
> 
> 标签：css, css-sprites

在我的工作中，我们一直在讨论在我们的网站上部署按钮的最佳方式。一些艺术总监要求纯 CSS 中的按钮，我更喜欢在 Photoshop 中制作 Spritesheets。我的论点 - 字距调整、阴影和锯齿等文本效果从 Photoshop 中看起来都更好。他们的论点——你失去了 SEO 积分，翻译引擎不能改变按钮。

我确信双方都有论据——我是否遗漏了这些论点中的任何一个明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:28:38.300

好吧，一方面，纯 CSS 按钮肯定会加载得更快，因为它们只是几行代码。许多事情不能在 CSS/JS 中完成，那些必须是图像，并且会消耗大量带宽。但是，在您可以节省带宽的地方，您应该这样做。如果速度是您项目的优先事项，那么仅此一项就是一个杀手锏。

.

关于从 Photoshop 中看起来更好的效果......我不一定同意这里。我真的不认为浏览器实现看起来很糟糕，所以你必须首先打败那些。

.

此外，绘制按钮图像可能会比编写几行代码花费更多的时间。同样适用于更改按钮。可维护性在 CSS 方面；）

.

我认为翻译论点不适用。如果“本地化引擎”可以处理不同语言的不同 CSS 样式/样式类/文本，它应该也能够处理不同语言的不同图像/精灵。

.

关于 SEO：如果您有按钮或图像的后备文本（以防无法加载，IMO 标准行为），这应该适用于搜索引擎以及任何字符串。虽然我在这里不是 100% 确定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:26:51.453

使用纯 CSS 而不是图像的另一个可能的论点是*速度*。根据您拥有的按钮数量，加载图像而不是 CSS/纯文本可能需要相当长的时间。

让事情变得更快在软件开发中始终是一件大事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:35:53.010

**1-**速度，css加载速度比图像快得多

**2-**带宽，如果您的所有网站都有 20 个按钮，并且每天有 50000 个唯一用户，那么它确实会产生影响。

**3-** SEO提升，搜索者更喜欢css而不是图像，当然最重要的是文本。

现在，有了图像，你可以做 css 不能做的事情（至少现在不行）。

这一切都取决于你想要完成什么，你想要制作什么样的网站。你关注的观众。

看看 Stackoverflow，它的图片很少。其余的都是纯CSS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T17:54:43.647

还有一点；Photoshop 不能做 cleartype（使用子像素），因为它取决于查看器的显示规格。所以浏览器文本看起来更清晰、更清晰。

我更喜欢完全基于 CSS 的、带有灯光效果的简单按钮。如果他们真的需要更重的外观和更多的效果，那么方法是使用位图背景和 HTML 文本制作一个按钮，最好可以使用 CSS 调整其大小以覆盖可变的文本大小。

Fully bitmapped buttons really look ugly especially in smaller text sizes, is a headache to maintain, duplicate, mass modifications (esp if you don't have the original PSD), takes much more bandwidth and load time, can't be typed using code, etc.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:25:19.723

也可能存在性能问题。坦率地说，更多/更大的图像=更多的下载。如果您有许多图形元素，这最终会降低网站的速度。在您的宽带/光纤连接上，这可能不是一个大问题，但在较慢的连接上会是一个问题——尤其是如果由于某种原因禁用了缓存。

与纯 CSS 相比，前端开发人员实现 spritemap 解决方案也需要更多时间。

不过，不要误会我的意思。Spritemap 非常棒，因为它们在性能方面比多张图像要好得多，但 CSS 的下载速度更快，开发速度更快，更灵活，结构更好。

最后，这取决于项目。如果它是关于性能、开发速度和成本的，那么它就是 CSS。但是，如果客户要求网站在他的石器时代浏览器中看起来像素完美，那么您最好使用 spritemap。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T15:27:15.850

当您使用图形在按钮上显示文本时，您可以将 CSS`text-indent: -100000;`与常规文本一起使用 - 搜索引擎会看到它，但用户不会。

```
<div class="button">Button text</div>
<style>
    .button {
        text-indent: -100000;
        background: url('path/to/image/with/button/text.jpg') no-repeat center center transparent;
    }
</style> 
```

Sprites 很好而且很漂亮，但是（例如）50kB 的图像和 3kB 的代码确实存在差异，它们的作用相同。如果您的网站每天被访问数百次，您将看不到这种差异，但当它可能是数十亿时......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T15:32:13.843

除了加载更快（请求更少）之外，css 按钮更易于维护。需要更长的按钮，更改文本颜色，禁用样式，另一组颜色。随着时间的推移，这是巨大的差异。

css 按钮的一个缺点是，例如某些版本的 IE 不支持 text-shadow - 您的按钮在每个浏览器中看起来并不完全相同，但如果您正确编码，它仍然会锁定得体。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-05T15:34:15.060

他们的观点是正确的，但 Photoshop、MS Word 和各种 DTP 平台的字距调整和排版不是总是比基于浏览器的解决方案更好吗？考虑一下浏览器使用完全对齐的类型有多糟糕 - 这是废话。通过同样的论点，是否会放弃所有基于 CSS 的解决方案，因为非 Web 工具可以做得更好？答案是否定的，否则我们仍然会使用 Flash，因为它为用户提供了“更好的体验”。

您必须考虑用户体验的重要性与易于开发和开放标准的关系。我相信尽可能将内容层与设计层分开是值得的，这意味着要为弯角、按钮和许多其他现在可以使用 CSS3 呈现的东西留下图像。要做到这一点，我们有时必须权衡一点控制和完美，以推进可用的技术。

# hibernate - Grails：belongsTo缓存问题

> ID：10900090
> 
> 赞同：2
> 
> 时间：2012-06-05T15:20:09.783
> 
> 标签：hibernate, caching, grails

大家好，缓存有问题，请帮助有 2 个实体

```
class User {
   FacebookUser facebookUser
   static mapping {
      cache true
   }
   def getImage() {
      return facebookUser.image
   }
} 
```

和

```
class FacebookUser {
   static belongsTo = [user:User]
   static mapping = {
      cache true
   }
} 
```

从缓存中获取用户时，它总是尝试使用 facebook_user_id = ? 选择用户。但是，当我删除 belongsTo 时，它会按我的意愿工作。所以我有一个问题：为什么？谢谢

显示由 Hibernate 生成的查询

```
Hibernate: select user0_.id as id69_3_, ... from user user0_ left outer join fb_user facebookus1_ on user0_.facebook_user_id=facebookus1_.id where user0_.id=?

Hibernate: select user0_.id as id69_3_, ... from user user0_ left outer join fb_user facebookus1_ on user0_.facebook_user_id=facebookus1_.id where user0_.facebook_user_id=? 
```

第一个查询休眠缓存但第二个总是执行如果我删除 belongsTo 没有任何变化但第二个查询永远不会出现

# .net - 正则表达式正在删除省略号字符

> ID：10900091
> 
> 赞同：0
> 
> 时间：2012-06-05T15:20:13.627
> 
> 标签：.net, regex

我不能很好地阅读正则表达式，并且继承了一些我试图解释的代码。我有两个问题。

首先，您能解释一下正则表达式模式的各个部分在做什么吗？

其次，我们有一个问题，省略号字符被此代码替换为空格，我们希望保留省略号。语句中需要更改哪些内容以保留省略号？

```
Dim Test As String = "Test...test" 'this is three dots and not an ellipsis, but just as an example
Dim NotGoodCharacters As String = "[^\w\,<>:;~`@#$%^&*()_=+\-{}|[\]\\?/! ""'']"
Return System.Text.RegularExpressions.Regex.Replace(Test, NotGoodCharacters, " ") 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:22:23.823

这是替换**不在**集合中的任何字符：

```
\w\,<>:;~@#$%^`&*()_=+-{}|[]\?/! ""'' 
```

有一个空格。每当您看到正则表达式匹配任何不是和`[^...]`之间的字符之一的字符时。匹配任何单词字符，匹配逗号，匹配反斜杠。我猜椭圆不是这些字符，所以它会被剥离是有道理的。`[^``]``\w``\,``\\`

更新：

在@Alan 的评论之后，我注意到更多应该解释的内容。`\-`匹配破折号，`\]`匹配右方括号。

如果您想排除椭圆，您可以尝试将您的正则表达式更改为：

```
Dim NotGoodCharacters As String = "[^\w\,<>:;~`@#$%^&*()_=+\-{}|[\]\\?/! ""''\x85]" 
```

与水平省略号的`\x85`ascii 代码匹配。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T15:32:34.100

这是一个不错的小闪存工具，可帮助您构建正则表达式。 [正则表达式](http://gskinner.com/RegExr/)

# c - GLUT 不会画画

> ID：10900092
> 
> 赞同：1
> 
> 时间：2012-06-05T15:20:17.863
> 
> 标签：c, visual-c++, opengl, graphics, glut

当我尝试绘制圆环时，没有显示任何内容，但代码在我朋友的 PC 上完美运行。绘制立方体或其他简单形状时我没有问题。我是否忘记了什么或可能是什么问题？

代码：

```
#include <GL/glut.h>
#include <stdio.h>

GLint width = 600;
GLint height = 600;

GLdouble eyex = 3.0, eyey = 0.0, eyez = 5.0;
GLdouble atx = 0.0, aty = 0.0, atz = 0.0;
GLdouble vupx = 0.0, vupy = 1.0, vupz = 0.0;

GLdouble fovy = 120.0, aspect = 1.0, Znear = 1.0, Zfar = 10.0;

GLfloat position[] = {10.0, 0.0, 1.5, 10.0 };

static void display(void)
{

glClear(GL_COLOR_BUFFER_BIT);
glColor3f(0.5,0.1,1.1);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt(eyex, eyey, eyez, atx, aty, atz, vupx, vupy, vupz);
glColor3f(1.0,0.0,0.0);

glutSolidTorus(1.0,2.0,100,100);
glFlush();

}

void init(void)
{
glClearColor(1.0, 1.0, 1.0, 0.0);
glEnable(GL_DEPTH_TEST);
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glShadeModel(GL_FLAT);
}

void reshape(int winw, int winh) {
glViewport(0,0,winw,winh); //Otvor
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(fovy, aspect, Znear, Zfar);

}

static void key(unsigned char key, int x, int y)
{
switch (key)
{
    case 27 :
        exit(0);
        break;
}
}

void mouse(int button, int state, int x, int y)
{

if (button == GLUT_LEFT_BUTTON)
{
    glPushMatrix();
glRotatef(60,0.0,5.0,0.0);;

glLightfv(GL_LIGHT0,GL_POSITION,position);
glPopMatrix();
glFlush();
}
}

int main(int argc, char *argv[])
{
glutInit(&argc, argv);
glutInitWindowSize(width,height);
glutInitWindowPosition(10,10);
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);

glutCreateWindow("Light");
init();

glutDisplayFunc(display);
glutReshapeFunc(reshape);
glLightfv(GL_LIGHT0,GL_POSITION,position);

glutKeyboardFunc(key);
glutMainLoop();

//return EXIT_SUCCESS;
//return exit_success;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:55:00.370

请求深度缓冲区：

```
glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB | GLUT_DEPTH); 
```

并确保清除它：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

# eclipse - 如何仅禁用 Eclipse/Geppetto 中的特定错误？

> ID：10900094
> 
> 赞同：1
> 
> 时间：2012-06-05T15:20:27.000
> 
> 标签：eclipse, puppet

我正在使用基于 Eclipse 引擎的 Geppetto 2.1.2 build R201202021616。我使用的是独立安装，而不是 Eclipse 插件版本。

我的 puppet 文件中出现了一些常见警告，因为我正在编码的模块是 Geppetto 不知道的更大项目的一部分。

我想让它忽略某些警告。

我找到了如何禁用所有错误和警告，以及如何根据“Xtext Check”等类型禁用，但这并不能完全涵盖我想要做的事情。

我想让它忽略的两个具体警告是：

> 名称中的连字符“-”仅在某些 puppet 版本中非官方支持。

和

> 不合格和未知变量：'$<varname>'

可以做到这一点，如果可以，怎么做？我只能找到有关禁用/忽略更广泛类别的警告和错误的信息。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:25:47.083

这些错误/标记都不能由 Geppetto 中的用户配置（2.2.0 是当前版本）。[建议您使用Geppetto 问题跟踪器](https://github.com/cloudsmith/geppetto/issues)记录增强请求。*（可以在 Preferences/Puppet 下找到可以*配置错误/警告/忽略的检查，这些选项卡称为*潜在问题*和*文体问题*。）

有两个技巧可用于引入由于所有模块都不存在而丢失的变量。

*   您可以将这些变量添加到“平台”.pptp 文件中，如 Geppetto 常见问题条目中所述[如何使 Geppetto 知道全局变量？](http://cloudsmith.github.com/geppetto/faq.html#2011/11/01/how-do-i-add-global-variables).

或者

*   创建一个虚拟人偶项目，添加清单并使用虚拟值定义变量。然后将虚拟项目添加为“项目依赖项”。这会将变量暴露给项目中的所有代码，并且变量将被解析。

# uitableview - 我在 Interface Builder 上看不到所有静态单元格

> ID：10900095
> 
> 赞同：0
> 
> 时间：2012-06-05T15:20:31.450
> 
> 标签：uitableview, interface-builder, xcode4.2

好吧，也许这是一个愚蠢的问题，但我真的不知道我错过了什么。

我正在使用带有 UiTableView 的 Xcode 4.2，并且我正在尝试使用静态单元格。如果我只使用几个细胞，一切都很好。但是当我尝试使用大量单元格时，我无法编辑在界面生成器中看不到的单元格。

我真的不知道如何展示他们！我一直在寻找答案，但我看到的所有例子都只使用了 4 或 5 个细胞..!!

有人可以帮我解决这个问题，也许我只需要修改一些属性？太奇怪了，我看不到和修改所有的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:54:08.087

您可以向下滚动到它们...只需单击界面生成器上的 uitableview 并使用鼠标或触控板向下滚动...这应该会显示剩余的单元格并允许您编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T23:14:00.597

尝试先在编辑器中滚动，如果这不起作用。签出[Can't scroll to the bottom of a long Static TableViewController in XCode 5 Interface Builder 以编辑折叠下方的单元格](https://stackoverflow.com/questions/18964823/cant-scroll-to-the-bottom-of-a-long-static-tableviewcontroller-in-xcode-5-inter)

# javascript - 在 JavaScript 中使用 RegEx 从字符串中删除一次出现的子字符串

> ID：10900104
> 
> 赞同：1
> 
> 时间：2012-06-05T15:21:09.600
> 
> 标签：javascript, regex

> **可能重复：**
> [如何替换 javascript 中最后出现的单词？](https://stackoverflow.com/questions/843049/how-to-replace-last-occurence-of-a-word-in-javascript)

我有一个字符串，例如：" **345** ,456,678, **345** , **345** ,678343,232"

我需要从字符串中删除最后出现的**345**（在此示例中位于中间，但可以不在字符串中的位置）。考虑过使用 RegEx，但找不到正确的模式，也无法在任何地方找到解决方案。

有人能帮忙吗？

ps 我知道我可以为此使用 JavaScript 字符串操作，但我认为这就是 RegEx 的用途......

谢谢...埃雷兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:28:18.537

你可以这样做...

```
var str = "345,456,678,345,345,678,343,232",
    last_idx = str.lastIndexOf(345);

str = str.replace(/345/g, function(s, i) { return i === last_idx ? '' : s; }); 
```

* * *

正如[@Crayon Violent](https://stackoverflow.com/users/184595/crayon-violent)指出的那样，`RegExp`如果集成变量，则应从构造函数构建正则表达式。

```
function removeLast(str, v) {
    var re = new RegExp(v, 'g'),
        last_idx = str.lastIndexOf(v);

    return str.replace(re, function(s, i) { return i === last_idx ? '' : s; });
} 
```

* * *

如果要删除的值是作为字符串的正则表达式，并且它应该用于`lastIndexOf`，那么您可以`.exec()`改用它。

```
function removeLast(str, v) {
    var re = new RegExp(v, 'g'),
        match,
        last_idx;

    while (match = re.exec(str))
        last_idx = re.lastIndex - match.length

    return str.replace(re, function(s, i) { return i === last_idx ? '' : s; });
} 
```

但是，如果您要使用`.exec()`，您总是可以在循环中构建新字符串。您只需要确保在循环完成后排除最后一个匹配项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:31:16.660

[从如何替换javascript中最后出现的单词](https://stackoverflow.com/questions/843049/how-to-replace-last-occurence-of-a-word-in-javascript)的最佳答案修改？：

```
function removeLast(str, target) {
    return str.replace(new RegExp("(.*)"+target), "$1");
} 
```

这使用了贪婪`.*`——它将尝试尽可能多地抓取字符串，包括所需目标的实例，直到它到达目标的最后一个实例。因此，整个正则表达式匹配整个字符串，直到并包括最后一个 bigt 实例，然后将其替换为匹配`(.*)`的，即目标字符串之前的所有内容。

# c++ - 如何将国际字符发送到 Windows 控制台？

> ID：10900106
> 
> 赞同：1
> 
> 时间：2012-06-05T15:21:19.183
> 
> 标签：c++, windows, utf-8, console, mingw

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:27:13.703

Use `_wsystem` one for wide strings.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:44:07.230

Is this VC++?

If so, your file appears to be using UTF-8 without BOM, which means that VC++ will assume that the source charset and execution charset are the same, so it will not do any encoding conversion when producing the string literal "echo Ιλιάδα". It will simply output the UTF-8 data directly. This means that the compiler believes you wrote `system("echo Î™Î»ÎąÎ¬Î´Î±");` where that garbage is your UTF-8 string viewed as though it were the system's locale encoding.

By default the `system()` function takes a string in the system's locale encoding. **The console output codepage has no effect on `system()`'s operation**, and so the above string is exactly what it sees as well.

* * *

Because you're using UTF-8 without BOM, you'll have trouble with wide strings. Generating wide strings requires correctly converting the source charset to the wide execution charset. If you're using UTF-8 without BOM, then VC++ doesn't know the correct source encoding and therefore cannot do this conversion correctly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T19:58:21.830

You can try system("cmd /c lambdabath") or system("lambdabath") as in the example:

```
//Save As UTF-8 withput BOM signature

#include <stdlib.h>
#include <windows.h>

int main() {
    SetConsoleOutputCP(CP_UTF8);
    //system("cmd /c lambdabath");
    system("lambdabath");
} 
```

lambdabath.bat (also save as UTF-8 without BOM signature):

```
chcp 65001
echo Ιλιάδα 
```

But if the question is: how to send international characters to windows console?
Then you can try different encoding. Using function system() is not necessary.

**Windows 1253** encoding:

```
//Save As Windows 1253

 #include <stdio.h>
 #include <windows.h>

int main()
{
    SetConsoleOutputCP(1253);
    char *ansichar_ = "Ιλιάδα";
    unsigned char lambda1253char = 'λ';
    printf("ansichar_: %s\n", ansichar_);
    printf("λ %#x\n", lambda1253char);
} 
```

Result:

```
ansichar_: Ιλιάδα
λ 0xeb 
```

**UTF-16** encoding:

```
 //Save As UTF16 (Unicode)

    #include <stdio.h>
    #include <io.h>
    #include <fcntl.h>
    #include <wchar.h>

    int main()
    {
        _setmode(_fileno(stdout), _O_U16TEXT);
        wchar_t *wchar_ = L"Ιλιάδα";
        wchar_t lambdaWchar = L'λ';
        wprintf(L"wchar_: %s\n", wchar_);
        wprintf(L"λ %#x\n", lambdaWchar);
    } 
```

Result:

```
wchar_: Ιλιάδα
λ 0x3bb 
```

**UTF-8** encoding:

```
 //Save As UTF8 without BOM signature

    #include <stdio.h>
    #include <windows.h>

    int main()
    {
        SetConsoleOutputCP(65001);
        char *utf8char_ = "Ιλιάδα";
        int lambdaUTF8char = 'λ';
        printf("utf8char_: %s\n", utf8char_);
        printf("λ %#x\n", lambdaUTF8char);
    } 
```

Result:

```
utf8char_: Ιλιάδα
λ 0xcebb 
```

In any case, set the default console font: Lucida Console.

# mysql - 我需要启用远程数据库访问吗？

> ID：10900107
> 
> 赞同：0
> 
> 时间：2012-06-05T15:21:20.570
> 
> 标签：mysql, database, cpanel, remote-server

我正在构建一个应用程序，它使用本地计算机的结果自动更新在线 MySQL 数据库。

我计划运行[以下命令](https://stackoverflow.com/q/10723742/773263)

```
C:>mysqldump -uUSER -pPASSWORD DATABASE > database.sql
C:>mysql -hHOST -pPORT -uUSER -pPASSWORD DATABASE < database.sql 
```

这样做是否需要我将我的 IP 地址添加到我的 cpanel 的远程数据库访问主机部分？

![在此处输入图像描述](../Images/1e6c632cbbc2db2df31db52d434db4b1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:29:46.497

您需要启用对 mysql 数据库服务器的远程访问：[启用远程访问](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

# node.js - Node/Express 服务图像（如果存在）；缓存问题

> ID：10900108
> 
> 赞同：1
> 
> 时间：2012-06-05T15:21:21.407
> 
> 标签：node.js, express, cache-control, static-files, image-caching

使用 SO 已经有一段时间了，但这是我在这里的第一个问题，因为我找不到这个特定问题的解决方案。我会尽量说得清楚一些，有什么不清楚的就告诉我，所以我会相应地更新问题。

我正在使用路由根据路由中作为参数（）传递的 userId 来提供用户的照片。它可以工作，但是每次遇到标签时，它都会从服务器请求图像并且从不使用缓存版本。

我玩了一点 Cache-Control，但要么全有，要么全无：如果启用了缓存并且用户更改了他的照片，它仍将使用旧照片。

我的问题是：如果照片没有更改，是否可以使用缓存版本，但如果它确实使用了服务器中的那个？我尝试使用“must-revalidate”以及“max-age”或“no-cache”无济于事。

如果有帮助，这是路线代码：

```
Module.exports.getPhoto = function(req, res) {
    var mime = require('mime-magic'),
        memberId = req.params.memberId,
        imgUrl;

    path.exists('public/images/memberPhotos/' + memberId, function(exists) {
        if(exists) {
            imgUrl = 'public/images/memberPhotos/' + memberId;
        }else{
            imgUrl = 'public/images/memberPhotos/noPhoto.jpg';
        }

        fs.readFile(imgUrl, function(err, img) {
            mime.fileWrapper(imgUrl, function(err, mimeType) {
                if(!err) {
                    console.log(mimeType);
                    res.writeHead(200, {
                        'Content-Type': mimeType,
                        'Cache-Control': "max-age=" + 43800*60 + ", must-revalidate"
                    });
                    res.end(img, 'binary'); 
                }
            });

        });
    });
}; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:57:06.113

你想使用一个`ETag`和`If-None-Match`标题。您将需要在服务器上跟踪您的图像 ETag，如果传入`If-None-Match`与当前 ETag 匹配，您将使用 304 - Not Modified 响应请求。否则，您将提供图像并在标题中包含一个新的 ETag。

有关更多详细信息，请参阅[http://blog.phyber.com/supporting-cache-controls-in-nodejs](http://blog.phyber.com/supporting-cache-controls-in-nodejs)。

# c# - 如何根据绑定的复杂对象值更改 DataGridCell 上的背景

> ID：10900113
> 
> 赞同：0
> 
> 时间：2012-06-05T15:21:43.290
> 
> 标签：c#, wpf, .net-4.0, datagrid, datatrigger

这就是我想要完成的：DataGridd 上的绑定集合包含 RowModel 的实例，如下图所示（为简单起见已最小化），然后 RowModel 可以包含 ValidationClass 的实例。

```
public class RowModel
{
    public int RowId { get; set; }
    public string Column1 { get; set; }
    public string Column2 { get; set; }
    public string Column3 { get; set; }
    public ICollection<ValidationClass> Validations { get; set; }
}

public class ValidationClass
{
    public string Tag { get; set; }
    public string SourceColumn { get; set; }
    public string ErrorText { get; set; }
} 
```

ValidationClass.SourceColumns 引用 RowModel 中有错误的列。ValidationClass 的 Tag 属性可以是“Critical”或“Warning”。

验证是从由外部验证器填充的数据库中获取的。如果一个或多个列发生验证错误，则每个错误都会用一个 ValidationClass 填充 Collection。

现在，如果我想在有严重错误的单元格上设置红色背景颜色，在有警告的单元格上设置黄色背景，我该怎么做？

DataTriggers 或 Converters，还是别的什么？需要一些帮助来指出我正确的方向。

编辑：为了清除，我为此使用 C# .net4 WPF DataGrid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:27:31.990

triggers and converters are both equaly valid for that problem. Here the solution with trigger:

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridCell}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=Tag}" Value="Critical">
                <Setter Property="Background" Value="Red"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=Tag}" Value="Warning">
                <Setter Property="Background" Value="Yellow"/>
            </DataTrigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T08:25:24.883

这就是我使用转换器解决它的方法。

拥有一个带有指定列的 DataGrid，每个列的定义如下：

```
<MyOwn:CustomDataGridColumn Header="Column1Header" Name="Column1" ElementStyle="{StaticResource ElementStyleWithMultiConverterAndTriggers}">
    <MyOwn:CustomDataGridColumn.Binding>
        <Binding Path="RowModel.ColumnName"  ValidatesOnDataErrors="True" >
            <Binding.ValidationRules>
                <Validators:CustomCellDataInfoValidationRule />
                    </Binding.ValidationRules>
            </Binding>
    </MyOwn:CustomDataGridColumn.Binding>
</MyOwn:CustomDataGridColumn> 
```

然后我附加了一个带有 DataTriggers 的样式，如下所示：

```
<Style TargetType="{x:Type TextBlock}" x:Key="ElementStyleWithMultiConverterAndTriggers">
    <Style.Resources>
        <Utils:ErrorTypeConverter x:Key="ErrorTypeConverter"/>
    </Style.Resources>
    <Setter Property="TextBlock.Padding" Value="2" />
    <Setter Property="Validation.ErrorTemplate" Value="{x:Null}" />

    <Style.Triggers>
        <DataTrigger Value="Critical" >
            <DataTrigger.Binding>
                <MultiBinding Converter="{StaticResource ErrorTypeConverter}">
                    <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type DataGridCell}}" Path="Column.Name"/>
                    <Binding Path="RowModel" /> <!--Sending the whole row object as one of the parameters to the converter-->
                </MultiBinding>
            </DataTrigger.Binding>
            <Setter Property="Background" Value="Red"/>             
        </DataTrigger>

        <DataTrigger Value="Warning" >
            <DataTrigger.Binding>
                <MultiBinding Converter="{StaticResource ErrorTypeConverter}">
                    <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type DataGridCell}}" Path="Column.Name"/>
                    <Binding Path="RowModel" />
                </MultiBinding>
            </DataTrigger.Binding>
            <Setter Property="Background" Value="Yellow"/>                              
        </DataTrigger>            
    </Style.Triggers>        
</Style> 
```

MultiValueConverter 看起来像这样。

```
public class ErrorTypeConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        var rowObject = values[1] as RowModel;
        var param = values[0].ToString();
        if (rowObject == null) return "";
        if (rowObject.ValidationClass.Any())
        {
            var validationErrors = rowObject.ValidationClass.FirstOrDefault(x => x.SourceColumn == param);
            if (validationErrors != null )
                return validationErrors.Tag; // Will return "Critical" or "Warning"
        }
        return "";
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

这个套件是我的需要，但在搜索结果中有 1000 多行的 DataGrid 上却很重。但总比没有好。欢迎任何改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:30:23.827

使用[CellFormatting](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)事件。在那里您可以检查您的状况并使用 -

> e.CellStyle.BackColor

请参阅链接中的 msdn 示例。

# javascript - 删除父删除子jquery

> ID：10900115
> 
> 赞同：0
> 
> 时间：2012-06-05T15:21:54.777
> 
> 标签：javascript, jquery

我只想删除父 div 并保持他们的孩子原样：

```
 <div id="main">
        <div id="1"></div>
        <div id="2"></div>
      </div> 
```

我们如何才能只删除`#main div`而不删除它的`children div #1 & #2`？。我试过`detach()`了，但没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T15:24:16.600

尝试[unwrap()](http://api.jquery.com/unwrap/)。

```
​$('#main div')​.unwrap();​​​​​​​​​​ 
```

[**jsFiddle 示例**](http://jsfiddle.net/j08691/jnCAr/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T15:23:48.610

也许[unwrap](http://api.jquery.com/unwrap/)是你想要的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:23:24.347

将元素替换为其内容。

```
$('#main').replaceWith($(this).html()) 
```

# jquery - Firefox 中的 jQuery popstate 事件处理

> ID：10900121
> 
> 赞同：0
> 
> 时间：2012-06-05T15:22:07.427
> 
> 标签：jquery, events, firefox, google-chrome, popstate

我有这样的东西：

```
jQuery(document).ready(function () {
    jQuery(window).bind('popstate', function () { do sth;});
}); 
```

它在 chrome 中就像一个魅力，但在 FF 中不起作用（不触发事件处理程序）。当我将此代码放在就绪块之外时，可以处理事件，但我不喜欢它在就绪块之外。

你知道有什么解决办法吗？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T23:37:54.643

问题解决了，刚刚做了 window.onpopstate = function () {} :)

# entity-framework - 当需要对模型进行更改时，EF 代码优先，有什么方法不必删除数据库？

> ID：10900122
> 
> 赞同：4
> 
> 时间：2012-06-05T15:22:07.563
> 
> 标签：entity-framework, ef-code-first

我试图掌握 Code First，到目前为止，每次我对模型进行更改时，我都需要删除并重新创建数据库。数据库中当前的数据呢？我只是觉得我每次都必须这样做很烦人，并且除非您 100% 确定您永远不必进行更改，例如在表格中添加新列，否则这并不能成为一种好的 Web 方法。还有其他方法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:35:15.807

默认情况下，数据库初始值设定项设置为 DropCreateDatabaseIfModelChnages。您可以将数据库初始化程序设置为 null 以避免重新创建，

```
Database.SetInitializer<YourContext>(null); 
```

另一种选择是使用[数据库迁移](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)来更新数据库而不重新创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T17:36:10.953

如果您在开发期间尝试维护测试数据，请考虑使用 IDatabaseInitializer 的 Seed 方法（即您的数据库初始化程序）。Seed 方法在初始化期间调用（在应用任何模型更改之后）并将填充您指定的任何测试数据。

指定希望 EF 使用的初始化程序的最佳方法是在 global.asax.cs 文件中。

这是一个例子：

**[全球.asax.cs]**

```
Database.SetInitializer<MyApplicationDbContext>(new MyApplicationDbContextInitializer()); 
```

**[MyApplicationDbContextInitializer.cs]**

```
public class MyApplicationDbContextInitializer : DropCreateDatabaseAlways<MyApplicationDbContext>
{
    protected override void Seed(TitleDB context)
    {

        context.Products.Add(new Product { Id = 1, Name = "Foobar XL" });
        context.Products.Add(new Product { Id = 2, Name = "Foobar LG" });
        context.Products.Add(new Product { Id = 3, Name = "Foobar MD" });

        context.SaveChanges();

        base.Seed(context);
    }
} 
```

# entity-framework - Include() EF LINQ 扩展应该定位在调用链的哪个位置？

> ID：10900125
> 
> 赞同：6
> 
> 时间：2012-06-05T15:22:22.643
> 
> 标签：entity-framework, linq-to-entities

我很好奇在使用实体框架时应该在调用链中的哪个位置调用。考虑以下方法：

```
// sample usage from service layer
// _customerRepository.Paginate(1, out totalRecords, 25, "DateJoined DESC, AmountSpent", "DateJoined >= '2009-02-01'", "Invoices, Refunds");
public virtual IQueryable<T> Paginate(int page, out int total, int pageSize, string sort = "Id", string filter = null, string includes = null)
{
    IQueryable<T> query = DatabaseSet;

    total = query.Count(); // get total # of records (required for pagination)...
    var skipTo = GetValidSkipCount(page, total, pageSize);

    if (!String.IsNullOrWhiteSpace(filter))
    {
        query.Where(filter);
    }
    // should includes be before filtering? 
    // should query.Count() be called after query.Include? 
    // does it matter?
    if (!String.IsNullOrWhiteSpace(includes))
    {
        query.IncludeMany(includes); // my own extension that takes comma separated string of entities to include
    }

    return query.OrderBy(sort).Skip(skipTo).Take(pageSize);
} 
```

我的问题是：

1.  Include 应该始终位于调用链的首位吗？
2.  Count() 会受到 Include 的影响吗？如果是这样，我想我应该在包含后进行计数
3.  应该包括在过滤之前还是之后（在哪里）？
4.  这真的很重要，因为 EF 足够“聪明”，可以弄清楚所有事情吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T17:32:35.110

> Include 应该始终位于调用链的首位吗？

`Include`不必是链中的第一个。`Include`是非常特殊的运算符，它不是查询的一部分。这就像查询的扩展。它也不是 LINQ 运算符 - 它是定义的 EF 运算符`ObjectQuery<T>`（`IQueryable<T>`扩展和`DbQuery<T>`版本都在内部获取此实现）。定义查询的`T`形状和 的根`Include`。`Include`仅当查询的结果形状与`Include`调用中使用的根匹配时才使用。因此，如果您添加`Include`到调用`IQueryable<T>`并且您的查询返回`IQueryable<T>`您`Include`的应用但如果您的查询返回例如`IQueryable`匿名类型，则您更改了查询的形状并且`Include`未应用。

> Count() 会受到 Include 的影响吗？如果是这样，我想我应该在包含后进行计数

`Include`如果`Count`对查询执行，则不使用。`Count`执行查询并且它不返回数据记录集 - 它改变了形状并且没有任何内容可以包含。

> 应该包括在过滤之前还是之后（在哪里）？

没关系。包括创建连接，我希望 EF（构建查询时）和数据库中的查询引擎（执行查询时）都应该在应用连接之前使用过滤。

> 这真的很重要，因为 EF 足够“聪明”，可以弄清楚所有事情吗？

仅当您更改查询的形状时才重要 - 您使用投影或自定义连接。在这种情况下`Include`，以前的形状将丢失（根本不使用）。

# ruby-on-rails - Ruby：对有异常的数组进行排序

> ID：10900130
> 
> 赞同：2
> 
> 时间：2012-06-05T15:22:37.223
> 
> 标签：ruby-on-rails, ruby, sorting

我想按对象 last_name 对对象数组进行排序，但总是将某个对象放在数组的第一个位置。为了实现这一点，我已经尝试了很多，但总是以数组的结果结构失败。这是我失败的尝试之一，因为我无法在结果数组对象上运行任何方法（例如`@team.each do |m| puts m.username end`失败）：

```
if @team = UserGroup.find_by_name("team").users.sort_by(&:last_name)
  if first_member = @team.detect{|m| m.username == "test"}
    @team.unshift @team.reject{|m| m.username == "test"}
  end
end 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:46:28.760

您可以使用 SQL 的 ORDER BY 功能，比 Ruby 更快（顺便说一句，您应该使用`find_by_attribute!`）。未经测试，但玩这样的东西：

```
@team = UserGroup.find_by_name!("team").users.
  order("username = 'test' DESC, last_name ASC") 
```

当然你也可以用同样的想法来使用 Ruby：

```
@team = UserGroup.find_by_name!("team").users.
  sort_by { |u| [u.username == 'test' ? 0 : 1, u.last_name] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:28:22.327

试试这个：

```
@team = UserGroup.find_by_name("team").users.sort_by(&:last_name)
first_member = @team.select{|m| m.username == "test"}
@team = first_member + (@team - first_member) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:30:05.210

如果我的理解正确，这应该有效：

```
@team = UserGroup.find_by_name("team").users.sort_by(&:last_name)
test=nil
@team=@team.delete_if {|obj| obj.username == "test" ? (test=obj; true) : false}
@team.insert(0, test) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-27T20:01:22.517

回答问题的标题：“对有异常的数组进行排序”：

这里的例外是 13，所以它总是排名最高：

```
(1..15).to_a.shuffle.sort { |a,b| a == 13 ? -1 : b == 13 ? 1 : a <=> b } 
```

irb 中的输出：

```
=> [13, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15] 
```

如果需要，也可以使用用户名：

```
%w{mike bob mario toad test}.sort {|a,b| a == 'test' ? -1 : b == 'test' ? 1 : a <=> b }
=> ["test", "bob", "mario", "mike", "toad"] 
```

# php - 将具有 onchange 属性的文本字段添加到滑块

> ID：10900139
> 
> 赞同：0
> 
> 时间：2012-06-05T15:23:22.473
> 
> 标签：php, javascript, html

我在互联网的某个地方有这个滑块，我想在这个滑块上添加一个文本框，所以当这个滑块内的值发生变化时，滑块将自己设置为文本框中的给定值。

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Papermashup.com | jQuery UI Slider Demo</title>
    <link href="../style.css"
    rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js"></script>
    <style type="text/css">
        #container {
            background:url(bg.jpg)!important;
            padding:100px 50px 0px 50px;
        }
        /*the slider background*/
        .slider {
            width:230px;
            height:11px;
            background:url(slider-bg.png);
            position:relative;
            margin:0;
            padding:0 10px;
        }
        /*Style for the slider button*/
        .ui-slider-handle {
            width:24px;
            height:24px;
            position:absolute;
            top:-7px;
            margin-left:-12px;
            z-index:200;
            background:url(slider-button.png);
        }
        /*Result div where the slider value is displayed*/
        #slider-result {
            font-size:50px;
            height:200px;
            font-family:Arial, Helvetica, sans-serif;
            color:#fff;
            width:250px;
            text-align:center;
            text-shadow:0 1px 1px #000;
            font-weight:700;
            padding:20px 0;
        }
        /*This is the fill bar colour*/
        .ui-widget-header {
            background:url(fill.png) no-repeat left;
            height:8px;
            left:1px;
            top:1px;
            position:absolute;
        }
        a {
            outline:none;
            -moz-outline-style:none;
        }
    </style>
</head>
<body>
    <div class="slider"></div>
    <div id="slider-result">50</div>
    <div class="ui-widget-header"></div>
    <input type="hidden" id="hidden" />
    <script>
        $(".slider").slider({
            animate: true,
            range: "min",
            value: 50,
            min: 0,
            max: 80,
            step: 1,
            //this gets a live reading of the value and prints it on the page
            slide: function (event, ui) {
                $("#slider-result").html(ui.value);
            },
            //this updates the hidden form field so we can submit the data using a form
            change: function (event, ui) {
                $('#hidden').attr('value', ui.value);
            }
        });
    </script>
</body>

</html> 
```

希望我解释得足够好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:34:10.433

好吧，您正在使用 jQuery UI。就像您复制的脚本一样，您可以在这部分的评论中阅读：

```
slide: function (event, ui) {
                $("#slider-result").html(ui.value);
} 
```

您的结果实时更新。

所以如果你做一点修改：

添加此 HTML：

```
<input type="text" id="showslider" /> 
```

并修改活动滑动的东西/

```
slide: function (event, ui) {
     $("#slider-result").html(ui.value);
     $("#showslider").val(ui.value);
} 
```

那么事情应该会奏效。

编辑：

您可以在文本框中添加一个事件侦听器，以便在每次用户键入或按下回车键时更改值（这就是您想要的方式），例如：

```
$("#showslider").keyup(function (e){
     $(".slider").slider("value", $("#showslider").val());
} 
```

更多信息可以在这里找到：

[http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

# performance - 多点的快速平面拟合

> ID：10900141
> 
> 赞同：6
> 
> 时间：2012-06-05T15:23:24.823
> 
> 标签：performance, matlab, plane

我正在寻找将飞机安装到一组 ~ 6-10k 3D 点上。我希望尽可能快地做到这一点，而准确性并不是最关心的问题（坦率地说，飞机在任何基本轴上都可以偏离 +-10 度）。

我目前的方法是使用最佳拟合，但它非常慢（我希望每次运行算法时以大约 10-50k 次的速度提取平面，并且按照这个速度它会在几周内完成，因为相对于小时），因为它适用于 6000 点的所有可能组合，因此 ~35,000,000,000 次迭代，坦率地说，它的准确度比我需要的要高得多。

有没有人知道任何较弱的平面拟合技术可能会大大加快我的算法？

编辑：

我设法通过在每个可能的 3D 角度创建平面（每次以 5 度步进）并针对这些点测试现有点以找到最佳平面，而不是将平面拟合到我有积分。

我敢肯定，通过分而治之也可以在这里获得一些东西，尽管我担心我会直接跳过最好的飞机。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T20:11:48.773

使用标准平面方程`Ax + By + Cz + D = 0`，并将方程写为矩阵乘法。 `P`是你的未知数`4x1 [A;B;C;D]`

```
g = [x y z 1];  % represent a point as an augmented row vector
g*P = 0;        % this point is on the plane 
```

现在将其扩展到所有实际点，一个 Nx4 矩阵`G`。结果不再是 0，而是您试图最小化的错误。

```
G*P = E;   % E is a Nx1 vector 
```

所以你想要的是最接近 G 的零空间的向量，可以从 SVD 中找到。让我们测试一下：

```
% Generate some test data
A = 2;
B = 3;
C = 2.5;
D = -1;

G = 10*rand(100, 2);  % x and y test points
% compute z from plane, add noise (zero-mean!)
G(:,3) = -(A*G(:,1) + B*G(:,2) + D) / C + 0.1*randn(100,1);

G(:,4) = ones(100,1);   % augment your matrix

[u s v] = svd(G, 0);
P = v(:,4);             % Last column is your plane equation 
```

好的，请记住 P 可以随标量变化。所以只是为了表明我们匹配：

```
scalar = 2*P./P(1);
P./scalar 
```

答案 = 2.0000 3.0038 2.5037 -0.9997

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-21T23:15:07.453

在计算机视觉中，一种标准方法是使用 RANSAC 或 MSAC，在您的情况下；

1.  从总体中随机抽取 3 个点
2.  计算由 3 个点定义的平面
3.  将所有点到该平面的误差（到平面的距离）相加。
4.  保留显示最小误差总和的 3 个点（并且在阈值内）。
5.  重复 N 次迭代（参见 RANSAC 理论选择 N，我可以建议 50 次吗？）

[http://en.wikipedia.org/wiki/RANSAC](http://en.wikipedia.org/wiki/RANSAC)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:30:16.260

看起来[`griddata`](http://www.mathworks.com/help/techdoc/ref/griddata.html)可能是你想要的。该链接中有一个示例。

如果这不起作用，请查看[`gridfit`](http://www.mathworks.com/matlabcentral/fileexchange/8998)MATLAB File Exchange。它是为了匹配比`griddata`.

您可能不想滚动自己的表面拟合，因为那里有几个记录良好的工具。

举个例子`griddata`：

```
x = % some values 
y = % some values
z = % function values to fit to

ti = % this range should probably be greater than or equal to your x,y test values
[xq,yq] = meshgrid(ti,ti);
zq = griddata(x,y,z,xq,yq,'linear'); % NOTE: linear will fit to a plane!
Plot the gridded data along with the scattered data.

mesh(xq,yq,zq), hold
plot3(x,y,z,'o'), hold off 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:53:43.277

你可以试试 John D'Errico 的[consolidator](http://www.mathworks.com/matlabcentral/fileexchange/8354)。它聚合给定容差内的点，这将允许减少数据量并提高速度。您还可以检查 John 的[gridfit](http://www.mathworks.com/matlabcentral/fileexchange/8998-surface-fitting-using-gridfit)函数，它通常比`griddata`

# perl - 查找名为“archive”的目录并删除文件

> ID：10900151
> 
> 赞同：0
> 
> 时间：2012-06-05T15:24:03.700
> 
> 标签：perl, shell, sysadmin

我需要删除名为“存档”的目录中早于 X 天的所有文件。有多个名为“archive”的目录位于目录树的不同深度。

我的问题是使用什么工具来查找目录？我的第一个冲动是使用 Perl`File:Find`模块，但过去我很尴尬地发现一个 shell 脚本单行来做我为之编写多行 Perl 脚本的同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:28:34.880

也许这对你有用：

```
# Delete one at a time.
find /path/to/your/files* -type f -mtime +10 -exec rm {} \;

# Use one rm for multiple dirs. (GNU find)
find /path/to/your/files* -type f -mtime +10 -exec rm {} +

# Use one rm for multiple dirs. (Any find)
find /path/to/your/files* -type f -mtime +10 -print0 | xargs -0 rm 
```

在这种情况下，它将从您的路径中删除所有超过 10 天的文件。小心使用它。:-)

如果您只想删除文件夹存档中的文件，则应添加

```
-ipath '*/archive/*' 
```

至

```
find /path/to/your/files* -ipath '*/archive/*' -type f -mtime +10 -exec rm {} \; 
```

也许您应该通过将找到的文件写入文本文件来测试整个场景，以确保它是正确的。

```
find /path/to/your/files* -ipath '*/archive/*' -type f -mtime +10 > filelist.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:04:58.103

我建议使用该`Path::Class`模块，它的`traverse`方法与`File::Find`工作方式相似，但更方便。

该程序将搜索给定的目录树，并查找位于名为的文件夹中`archive`且修改时间为三天或更早的所有文件。

就目前而言，该程序将简单地打印它找到的符合条件的文件。要实际删除它们，您应该`#`从包含`$node->remove`.

```
use strict;
use warnings;

use Path::Class;

my $dir = dir '/path/to/root';

$dir->traverse(sub {
  my ($node, $cont) = @_;
  if ($node->is_dir) {
    $cont->();
  }
  elsif ($node->dir->basename eq 'archive') {
    my $age = (time - $node->stat->mtime) / (60 * 60 * 24);
    printf "%s %.1f days old\n", $node, $age;
    # $node->remove if $age > 3;
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:36:00.290

这将适用于 Linux 和 Mac：

```
$ find . -name archive -type d -mtime -$X_DAYS -delete 
```

但是，我的偏好是首先运行它：

```
$ find . -name archive -type d -mtime -$X_DAYS -ls | tee find.out 
```

这将列出您要删除的文件并将它们放在一个名为`find.out`. 您可以查看输出并确保其中没有任何会导致任何问题的内容。也许有一个超过 10 天的存档目录，但您不想删除它。

您可以编辑此文件以删除您想要保留的任何内容。然后您可以运行以下命令：

```
$ awk '{print "rm -rf " $NF}' find.out | tee command.out 
```

这将创建一个命令文件以删除目录。看一下`command.out`，如果一切正常，请执行以下操作：

$ sh 命令.out

为什么要经历所有这些繁琐的事情？因为您要确保删除的是要删除的内容，而不是要保留的内容。如果您要删除内容，最好采取一些额外的步骤并确保一切正常。

# azure - 嵌套的虚拟应用程序不起作用？

> ID：10900153
> 
> 赞同：0
> 
> 时间：2012-06-05T15:24:04.150
> 
> 标签：azure

我在设置一个包含三个站点的 Web 角色时遇到问题（Azure v1.6，完全信任）。

下面是它在 IIS Express 中的配置方式：

```
<site name="Empty.Dummy.Site" id="2">
   <application path="/" applicationPool="appPool">
     <virtualDirectory path="/" physicalPath="c:\Sites\Empty.Dummy.Site" />
   </application>
   <application path="/mainSite">
      virtualDirectory path="/" physicalPath="C:\Sites\mainSite" />
   </application>
  <application path="/mainSite/virtualChild">
     <virtualDirectory path="/" physicalPath="c:\Sites\virtualChild" />
  </application>
   <bindings>
      <binding protocol="http" bindingInformation="*:55555:localhost" />
   </bindings>
</site>

What's missing in ServiceDefinition.csdef is the "path" attribute.

I've tried a lot using nested virtual path and things but not got it to work.

For example:
<Sites>
   <Site name="Empty.Dummy.Site" physicalDirectory="c:\Sites\Empty.Dummy.Site >
      <VirtualApplication  name="mainSite" physicalDirectory="C:\Sites\mainSite">
          <VirtualApplication name="virtualChild" physicalDirectory="c:\Sites\virtualChild"/>
     </VirtualApplication>
      <Bindings><Binding name="Endpoint1" endpointName="HttpIn"  /></Bindings>
</Site> 
```

有什么建议或其他选择吗？

我正在寻找的解决方案应该在同一个网络角色中产生 3 个站点！

1.  [http://demo.cloudapp.net/](http://demo.cloudapp.net/)
2.  [http://demo.cloudapp.net/MainSite/](http://demo.cloudapp.net/MainSite/)
3.  [http://demo.cloudapp.net/MainSite/VirtualChild](http://demo.cloudapp.net/MainSite/VirtualChild)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:37:26.817

用于产生如您所描述的 URL 的虚拟应用程序的语法是（据称）

```
<Site name="Web">
   <VirtualApplication name="application-name" physicalDirectory="relative-location" />
   …
</Site> 
```

不过，我不确定它是否支持[http://demo.cloudapp.net/MainSite/VirtualChild](http://demo.cloudapp.net/MainSite/VirtualChild)场景。

[http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)有一些不错的选项演练。

就我个人而言，我更喜欢使用主机头并获取类似的 URL

1.  [http://demo.myapp.com/](http://demo.myapp.com/)
2.  [http://main.myapp.com](http://main.myapp.com)
3.  [http://virtualchild.myapp.com](http://virtualchild.myapp.com)

如果您的设置不是静态的 - 即您计划动态添加站点 - 非常值得一看[Windows Azure Acceleratorfor Web Roles](http://blog.ntotten.com/2011/07/05/windows-azure-accelerator-for-web-roles/)

# ajax - 如何使用 dojo 和 struts2 在对话框中显示异步获取的信息？

> ID：10900155
> 
> 赞同：1
> 
> 时间：2012-06-05T15:24:08.617
> 
> 标签：ajax, struts2, dojo

我正在构建一个代码，使用 Struts2 和 Dojo 来支持 Ajax。当使用某个链接时，我正在尝试启动一个对话框。此对话框应包含单击所述链接时异步获取的信息。

这是我的代码：

```
<s:url id="buscar_usuarios_url" value="/buscar_usuarios.action"/>
<li id="menu_buscar_usuarios"><sx:a targets="buscar_usuarios_dialog" href="%{buscar_usuarios_url}">Buscar usuarios</sx:a></li> 
```

这段代码获得了我需要在我在这个脚本中使用的对话框中显示的 html：

```
$(document).ready(function() {
   $("#menu_buscar_usuarios").live('click', function() {
        $("#buscar_usuarios_dialog").dialog({
            modal:true
        });
   });
} 
```

我遇到的问题是，当我单击 < sx:a > 标记时，只获取信息但不显示对话框。而当我单击 <a> 外的 <li> 时，仅显示对话框，但信息未更新。

我试图将 ID“menu_buscar_usuarios”赋予 < sx:a > 标签，但它也不起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:50:37.437

我修好了它。我只是给了 < sx:tag > id “menu_buscar_usuarios”，而不是使用已弃用的 live() 函数，我使用了 on() 函数，如下所示：

```
$(document).ready(function() {
   $("#menu_buscar_usuarios").live('click', function() {
        $("#buscar_usuarios_dialog").dialog({
            modal:true
        });
   });
} 
```

谢谢你们

# ios - 迁移到 iOS 5 Core Data 新 API：了解 NSConfinementConcurrencyType

> ID：10900158
> 
> 赞同：3
> 
> 时间：2012-06-05T15:24:36.683
> 
> 标签：ios, core-data

我正在慢慢迁移到 iOS 5 Core Data 新 API，我正在调查`NSConfinementConcurrencyType`.

来自 Apple 文档

> 限制（NSConfinementConcurrencyType）。这是默认设置。您保证上下文不会被除您创建它的线程之外的任何线程使用。（这与您在以前的版本中使用的线程要求完全相同。）

对我来说，在这种情况下*默认的含义并不是很明显。*它的真正含义是什么？

通常，如果我需要在 CD 中执行非常长的导入操作，我会设置一个新`NSOperation`类并创建它自己的上下文。

```
- (void)main
{
    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];

    // other code here...
} 
```

现在，我可以利用父上下文并执行以下操作：

```
- (void)main
{
    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
    [moc setParentContext:[self masterMoc]];

    // other code here...
} 
```

说了这么多，怎么`NSConfinementConcurrencyType`办？什么是典型的使用示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:26:15.503

Apple 的“默认”意味着这是 Core Data MOC 一直工作的标准方式。MOC 必须在使用它的线程上创建。在上面的代码中，您遵循标准的历史有效 MOC 使用模式。其他风格的 MOC 创建和管理自己的后台队列或绑定到主队列。这可以在一定程度上简化事情。或不。首先，它们是 MOC 的面向块的接口。有时这很好。（虽然块是新的热点，但它们并不是纯粹的好东西。我见过由懒惰的程序员编写的面向块的代码。它们在方法中留下了太多的复杂性。通过微妙的交互来维护这些代码可能非常困难。 )

父上下文的想法与线程限制的想法是正交的。父上下文是快速关联 MOC 所需的大多数参数的一种方法。（Apple 不清楚 MOC 之间实际传递的内容。他们也没有讨论合并政策问题。）我相信，你仍然必须抓住 MOC 间的通知。

如果我可以建议，不要过度思考这些事情。Lion/iOSv5 对 Core Data 的更改相当温和。

# iphone - 如何在 iTunes 中查看设备上已安装的配置证书

> ID：10900163
> 
> 赞同：2
> 
> 时间：2012-06-05T15:24:47.867
> 
> 标签：iphone, ios, xcode

如何检查设备上已安装的证书并查看是否安装了任何证书。因为我在设备上安装应用程序时遇到问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:40:43.267

改用 iPhone 配置实用程序，它比 iTunes 快得多，而且您可以查看设备上所有已安装的配置文件。Mac： http: [//support.apple.com/kb/DL1465](http://support.apple.com/kb/DL1465) 赢：http: [//support.apple.com/kb/DL1466](http://support.apple.com/kb/DL1466)

或者按照亚当所说的去做：设置->常规-配置文件。

# php - Youtube - 如何使用 PHP 从 youtube 潮流页面获取所有视频

> ID：10900164
> 
> 赞同：0
> 
> 时间：2012-06-05T15:24:50.333
> 
> 标签：php, youtube, youtube-api

我正在使用 youtube API 来获取趋势页面的视频。但我发现 google youtube API 服务仅适用于少数特定国家或地区。但是，如果我想获取埃及或沙特阿拉伯国家的所有视频列表？

[http://www.youtube.com/trendsdashboard#loc0=egy&feed=views](http://www.youtube.com/trendsdashboard#loc0=egy&feed=views)

请指教..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:50:35.247

为了获取给定区域的热门 YouTube 视频，您可以发出 GET 请求，例如`[http://gdata.youtube.com/feeds/api/standardfeeds/regionID/feedID?v=2][1]`where regionID 是此[图表](https://developers.google.com/youtube/2.0/reference#Region_specific_feeds)中指定的国家区域。此 API 目前似乎不支持埃及和沙特阿拉伯。

# unit-testing - 将单元测试链接到 TFS 中的测试用例

> ID：10900166
> 
> 赞同：0
> 
> 时间：2012-06-05T15:24:51.970
> 
> 标签：unit-testing, tfs, automated-tests

在我们的应用程序中，我们创建了大量的单元测试（使用 MsTest），并且从每个单元测试中，我们返回并在 TFS 2010 中针对每个单元测试手动创建了测试用例。然后，我们将测试用例链接到相关的用户故事。这似乎将测试用例与单元测试联系起来，我们现在可以了解每个用户故事测试的测试用例。

我们现在遇到的问题是我们希望看到从单元测试到测试用例的链接。我们担心的是如果我们创建了一个单元测试，但在创建测试用例时设法跳过它。

我查看了 tfs_warehouse 数据库，可以看到每个单元测试的测试结果，但 testcaseid 始终为 0。

我的问题是我们是否错过了从单元测试到测试用例的链接中的某些内容来完成此链接？确实感觉我们只完成了一半我们需要做的事情来获得用户故事 -> 测试用例 -> 单元测试和单元测试 -> 测试用例 -> 用户故事的完整链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:20:15.237

从单元测试到测试用例没有链接。只有一个包含您的单元测试的程序集的引用。这不是通常的工作项链接，因此不会出现在数据仓库中。

您可以尝试将测试用例链接到包含您的单元测试的变更集（或签入）。但这可能仍然不会给你你正在寻找的结果。

# javascript - 通过输入字段切换时保持占位符 | jQuery

> ID：10900169
> 
> 赞同：2
> 
> 时间：2012-06-05T15:25:14.563
> 
> 标签：javascript, jquery, forms, input, watermark

我正在使用这个 jQuery 水印输入插件：[http ://digitalbush.com/projects/watermark-input-plugin/](http://digitalbush.com/projects/watermark-input-plugin/)

我想在我浏览字段时保持占位符文本可见。只有当我单击该字段时才会消失。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:39:54.860

在水印插件的js文件中，最后会看到一组函数，然后

```
input.focus(clearMessage);
input.blur(insertMessage);                                
input.change(insertMessage); 
```

如果您将焦点更改为单击，它应该可以按您的意愿工作。

```
input.click(clearMessage);
input.blur(insertMessage);                                
input.change(insertMessage); 
```

这是一个例子：http: [//jsfiddle.net/jTUzv/](http://jsfiddle.net/jTUzv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:28:26.490

在现代浏览器中，您可以在输入字段上放置一个“占位符”属性。

如果输入有焦点（标签或单击），则将显示占位符文本，但一旦您开始输入内容就会消失。

这是一个例子：http: [//jsfiddle.net/jTUzv/](http://jsfiddle.net/jTUzv/)

# bash - Bash 避免文件名解释

> ID：10900175
> 
> 赞同：0
> 
> 时间：2012-06-05T15:25:34.547
> 
> 标签：bash, variables, interpretation

我正在查看一些别名以快速保存当前目录，以便以后打开它。

```
ALIAS cdo='pwd|sed 's/ /\ /g' > ~/.cdo'
AIIAS cdn='cd "$(cat ~/.cdo)"' 
```

sed 命令显然处理空格。

但是，我仍然有一个无法解决的奇怪问题，它必须涉及变量解释。

```
jk@bt:~# cd Hello\ World/
jk@bt:~/Hello World# pwd|sed 's/ /\\ /g' > ~/.cdo
jk@bt:~/Hello World# cat ~/.cdo
/home/jk/Hello\ World
jk@bt:~/Hello World# cd ..
jk@bt:~# cd "$(cat ~/.cdo)"
bash: cd: /home/jk/Hello\ World: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:32:28.920

在我看来，好像您将掩蔽加倍。

处理空格的一种方法是用反斜杠单独屏蔽它们：

```
 cd here\ I\ go 
```

或用双引号掩盖所有这些：

```
 cd "here I go" 
```

虽然这也是允许的：

```
 cd here" I "go 
```

然而，混合它们意味着，你想要字面上的反斜杠：

```
 cd "here\ I\ go" 
```

这就是正在发生的事情。

Note that while not very common, tabs and newlines can be included in files as well. Masking them works the same way, but reading them from a file might be different, and multiple blanks are often condensed by the shell to a single one.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:30:51.137

`\`如果文件名不在 and 之间`"`，您必须转义`"`

在 cdn 中转义`cdo`但不使用`"`

```
ALIAS cdo='pwd|sed 's/ /\ /g' > ~/.cdo'
AIIAS cdn='cd $(cat ~/.cdo)' 
```

不逃避和使用`""`（我认为这**更好**）

```
ALIAS cdo='pwd > ~/.cdo'
AIIAS cdn='cd "$(cat ~/.cdo)"' 
```

# c# - Caller ID - Cannot obtain incoming Number

> ID：10900179
> 
> 赞同：2
> 
> 时间：2012-06-05T15:25:42.217
> 
> 标签：c#

The Label on the UI keeps reading "RING RING" and then back to empty "". It doesn't however display the incoming number, which is what I want. I tried to add an if function checking if there is a '0' in the data but that for some reason still doesn't work.

The following is my code:

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;

namespace CallerID
{
    public partial class CallerID : Form
    {
        public CallerID()
        {
            InitializeComponent();
            port.Open();
            WatchModem();
            SetModem();
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);
            WatchModem();
        }

        private SerialPort port = new SerialPort("COM3");
        string CallName;
        string CallNumber;
        string ReadData;

        private void SetModem()
        {
            port.WriteLine("AT+VCID=1\n");
            port.RtsEnable = true;
        }

        private void WatchModem()
        {
            port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);
        }

        public delegate void SetCallerIdText();

        private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            ReadData = port.ReadExisting();
            //Add code to split up/decode the incoming data
            if (lblCallerIDTitle.InvokeRequired)
            {
                if (ReadData.Contains('0'))
                    lblCallerIDTitle.Invoke(new SetCallerIdText(() => lblCallerIDTitle.Text = ReadData));
            }
            else
                lblCallerIDTitle.Text = ReadData;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:17:13.630

自从我使用调制解调器以来已经有一段时间了，但是您的调制解调器必须支持 CallerID（我相信现在大多数都支持），您必须从您的电信公司获得 CallerID 服务（我相信您支持），最后，在初始化期间将有一个 AT 命令发送到调制解调器以打开 CallerID 报告。根据您使用的调制解调器型号，命令可能会有所不同，但通常是`AT#CID=1`. 您的调制解调器手册应该有使用的 AT 代码。

请注意，传入号码本身是在第一次和第二次响铃之间发送的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:20:11.393

这可能会为您指明正确的方向。

[http://www.yes-tele.com/modem.html](http://www.yes-tele.com/modem.html)

# mongoid - 奇怪的 :id in :path with Mongoid-Paperclip — /4f8b/5a82/ef1a/7750/b800/0077/

> ID：10900183
> 
> 赞同：0
> 
> 时间：2012-06-05T15:26:02.240
> 
> 标签：mongoid, paperclip, ruby-on-rails-3.2

我刚刚从 Rails 3.1.3 升级到 3.2.3 并注意到浏览器不再显示图像。所以我查看了图像路径，`/system/photos/images/4fce/1fb6/3ee5/1d01/a800/0006/original/IMG_2842new2.jpg?1338908598`例如。模型中没有`:path`声明，所以它应该使用 default `:rails_root/public/system/:attachment/:id/:style/:filename`。

未显示图像的关键是该`:id`参数`4fce1fb63ee51d01a8000006`存储在 DB 中，由斜杠 ( `/`) 划分为 4 个符号组：`4fce/1fb6/3ee5/1d01/a800/0006`，但该文件夹按原样命名，`4fce1fb63ee51d01a8000006`. 这很奇怪。

我用

```
mongo (1.6.2) 
mongoid (2.4.10) 
paperclip (3.0.4) 
mongoid-paperclip (0.0.7) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:20:37.463

这是我的错误，没有注意到当我更新 Paperclip 时也更新了，并且 3.0 版需要`:path`和`:url`选项显式传递：

```
:path => ":rails_root/public/system/:attachment/:id/:style/:filename",
:url => "/system/:attachment/:id/:style/:filename" 
```

# objective-c - 两个值有什么不同

> ID：10900187
> 
> 赞同：1
> 
> 时间：2012-06-05T15:26:09.740
> 
> 标签：objective-c, arrays, cgfloat

有什么不同：

```
CGFloat gray[4] = {0.9f, 0.9f, 0.9f, 1.0f}; 
```

和

```
CGFloat gray[4] = {0.9, 0.9, 0.9, 1.0}; 
```

?

我认为它们是相同的，但我不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:30:39.940

我相信这表明数字是浮点数（即单精度浮点数）而不是双精度数（双精度浮点数），

# mysql - Mysql - Is there a better way to retrieve data from two tables with the same id?

> ID：10900196
> 
> 赞同：1
> 
> 时间：2012-06-05T15:27:00.583
> 
> 标签：mysql, select, join

Hi I have the following Mysql code that works but I was wondering if there was a better, shorter, more efficient way of doing it?

```
select
images.*,
posts.*
from
mjbox_images AS images,
mjbox_posts AS posts
where
images.post_id = 3 AND posts.post_id = 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:27:39.010

```
SELECT * FROM mjbox_images JOIN mjbox_posts USING (post_id) WHERE post_id = 3 
```

# python - 在python中处理浮点计数器值的任何方法

> ID：10900207
> 
> 赞同：4
> 
> 时间：2012-06-05T15:27:38.400
> 
> 标签：python

我正在编写一个程序来平均一些值。详细信息：我有一个文件夹，其中有许多`.txt`带有`float`数字的文件。
我所做的只是总结浮点值并将它们存储在`Counter`每个文件的 a 中。
之后，我想将所有值相加，`Counter`然后除以总数。文件（即`.txt`）。

但是直到存储在 a`Counter`中都很好，但是当我想`Counter`通过使用`sum(Counter.values())`将存在的值相加时，它会引发一个错误，表明`'float' object has no attribute 'values'`
我也已经阅读了手册，他们还说整数值是可能的。
但是是否有任何方法可以`float`在计数器中添加值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T15:36:46.123

为什么要使用[`Counter`对象](http://docs.python.org/dev/library/collections.html#collections.Counter)对文件中的值求和？其声明的目的是“用于计算可散列对象”（即，如果您有多个要计算实例的*离散对象）。*

如果要存储每个文件中的总和浮点值，请尝试使用常规字典：

```
floatsums = {}
floatsums['file1.txt'] = ... // insert code to sum the floats

total = sum(floatsums.values())
numfiles = len(floatsums) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-19T08:57:17.087

更简单：

```
from collections import defaultdict
sums = defaultdict(lambda: 0) 
```

然后：

```
sums['a'] += 1. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-18T23:37:46.997

尽管文档说了什么，但将浮点值放入`Counter`. 自己试试。

```
 from collections import Counter

    a = Counter()
    a['a'] += 1
    a['a'] += 0.1
    a['b'] += 0.1
    print(list(a.items())) 
```

至少在 Python 3 中。这给

```
 [('a', 1.1), ('b', 0.1)] 
```

这适用于 Python 2 和 3。当然，由于这不是文档所说的，它在技术上是未定义的行为，所以它可能在未来的版本中不起作用，但我对此表示怀疑。不过，如果您想完全符合规范，您可以这样做：

```
 from collections import defaultdict

    a = defaultdict(float) 
```

这将为您提供与上述相同的结果，并且仅使用记录的功能。

# android - Leaking window when changing orientation

> ID：10900209
> 
> 赞同：0
> 
> 时间：2012-06-05T15:27:42.360
> 
> 标签：android, android-alertdialog

I'm popping up an AlertDialog so users can type in a new item to add to a list. However, whenever the screen orientation changes, the LogCat spits out a bunch of errors regarding a window leak. I can't quite figure out what I'm doing wrong here.

```
private void launchPopup() {
    if (mTypedText == null) {
        mTypedText = "";
    }

    LayoutInflater inflater = (LayoutInflater) ActivityTags.this.getSystemService(LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.layout_additem, (ViewGroup) findViewById(R.id.additem_root));

    final TextView text = (TextView)layout.findViewById(R.id.additem_text);
    text.setText("Type in the name of the new item.");
    text.setLines(1);

    final EditText name = (EditText)layout.findViewById(R.id.additem_name);
    name.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {}

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

        public void afterTextChanged(Editable s) {
            if (s != null) {
                mTypedText = s.toString();
            }
            else {
                mTypedText = null;
            }
        }
    });
    if (mTypedText != null) {
        name.setText(mTypedText);
    }

    mAddDialog = new AlertDialog.Builder(ActivityItems.this);
    mAddDialog.setTitle("Add Item");
    mAddDialog.setView(layout);
    mAddDialog.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialogInterface, int i) {
        // TODO
    }
});
    mAddDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialogInterface, int i) {
        mTypedText = null;
    }
});
    mAddDialog.show();
} 
```

In onStop(), mAddDialog is set to null if it is not already null.

Here is the error:

```
Activity com.myapp.app.activity.ActivityItems has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@45164f30 that was originally added here
android.view.WindowLeaked: Activity com.myapp.app.activity.ActivityItems has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@45164f30 that was originally added here
at android.view.ViewRoot.<init>(ViewRoot.java:247)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
at android.view.Window$LocalWindowManager.addView(Window.java:424)
at android.app.Dialog.show(Dialog.java:241)
at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
... 
```

# google-chrome - 在 Google Chrome 中溢出隐藏和输入文本滚动

> ID：10900210
> 
> 赞同：4
> 
> 时间：2012-06-05T15:27:42.837
> 
> 标签：google-chrome, input, overflow, drag, hidden

这是我的代码片段：

[http://jsfiddle.net/7CuBV/6/](http://jsfiddle.net/7CuBV/6/)

如果我单击并拖动输入文本字段，我会得到带有溢出的 div：隐藏滚动，就像使用溢出：自动一样。如果我在 div 上设置了溢出：隐藏，我希望像其他浏览器一样锁定滚动。

奇怪的是，如果我在输入字段上设置 padding:0px，Chrome 上的问题就不会再出现了。

它是谷歌浏览器的错误吗？任何解决方法可以使其在不使用 Javascript 的情况下工作？

编辑：这种行为也发生在 Safari 5 上。也许这是一个 Webkit 问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T14:41:02.357

这是为我解决的问题：

```
input:active { pointer-events:none; } 
```

感谢[https://stackoverflow.com/users/498031/vken](https://stackoverflow.com/users/498031/vken)在类似的问题上指出了这一点：[文本输入字段中的单击拖动选择问题也会滚动父元素、webkit 错误或功能？](https://stackoverflow.com/questions/10036044/issue-with-click-drag-select-in-text-input-field-also-scrolls-parent-element-we)

**2013-11 更新：** `pointer-events:none`修复了该问题，但有许多缺点。该问题的最佳解决方法实际上是确保您没有溢出内容，如“`overflow:hidden`容器的内容不大于所述容器。如果您想通过 JavaScript 滚动内容，只要它被隐藏，就给它 width&height=0并仅在将其移入之前调整其大小（通过关键帧动画或定时转换轻松完成）

重要提示：我在 Chrome 中遇到了一个带有自定义`<input type=file>`字段的奇怪案例，当我通过 CSS 调整它的大小时，它不应该导致任何溢出问题 - 开发工具证实了这一点，但是：在查看**Shadow-DOM**之后，我意识到Chrome 自己的“按钮”溢出了实际的输入字段，因此导致整个容器变大。

**如何显示 Shadow-DOM：**如果一切正常，但问题仍然存在，请转到 Chrome 开发工具，单击右下角的设置按钮。在“元素”部分的“常规”选项卡上是启用“显示阴影 DOM”的选项。这将为您提供正在发生的事情的全貌......虽然大多数时候它只是增加了另一层复杂性，但它真的很有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T00:11:15.340

我也遇到了这个。到目前为止，我做得最好的事情是使用`pointer-events:none;`. 我可以应用它的唯一方法是设置`display: none;`. 否则它会被忽略，所以会有一个短暂的闪烁。

[http://jsfiddle.net/7CuBV/21/](http://jsfiddle.net/7CuBV/21/)

```
var tx = document.getElementById('tx'),
    bod = document.body;

tx.addEventListener('mousedown', tx_ondown);

function tx_ondown() {
    bod.addEventListener('mousemove', b_onmove);
    bod.addEventListener('mouseup', b_onup);  
    bod.addEventListener('mouseout', b_onup);    
}

function b_onmove() {
    tx.style.pointerEvents = 'none';
    tx.style.display = 'none';

    setTimeout(function() {
        tx.style.display = '';
    }, 0);
    bod.removeEventListener('mousemove', b_onmove);
}

function b_onup() {
    if (tx.style.pointerEvents === 'none') {
        tx.style.pointerEvents = '';
    } else {
        bod.removeEventListener('mousemove', b_onmove);
    }
    bod.removeEventListener('mouseup', b_onup);
    bod.removeEventListener('mouseout', b_onup);        
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:11:20.963

我使用 JQuery 尝试了 tiffon 的解决方案，但无法让它与多个字段一起使用，在我将指针事件设置为 none 后，mouseup 不会触发。

因此，将输入 'pointer-events' 设置为 none 可以解决滚动到隐藏内容的问题，但会阻止用户使用鼠标事件聚焦该字段。但我注意到单击标签仍然可以集中该字段。

所以我做了这个可行的解决方法，因为我的所有字段都嵌套在 div 中。基本上单击该字段不会使其聚焦，但仍会将事件冒泡到它的父级：

```
 $('label').click(function(e){
    e.stopPropagation();
});
$('input[type="text"], textarea').parent().click(function(){
    $(this).find('label').click();
});
$('input[type="text"], textarea').on({
    mousedown:function(){
        $(this).css('pointer-events', 'none');                  
    }
}); 
```

问题是它不允许您选择字段内的文本，除非您使用键盘箭头键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T14:09:42.720

在“onscroll”事件中将 scrollLeft 和/或 scrollTop 设置为 0，这将禁用滚动：

```
var div = $(".overflow-hidden");
div.scroll(function() { div.scrollTop(0).scrollLeft(0); }); 
```

# php - 使用带有撇号的 GET 变量在 MySQL 表中提取基于文本的字段

> ID：10900211
> 
> 赞同：0
> 
> 时间：2012-06-05T15:27:44.983
> 
> 标签：php, mysql

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

在下面的代码中，字段`title`和变量`$submission`是文本中的名称。查询通常工作得很好。但是，如果`title`和`$submission`包含撇号，则查询不包括结果。

如何使查询与撇号一起使用？

```
$submission = $_GET['submission'];

$query2 = "SELECT
               title, 
               1ad1, 
               1adcit, 
               1adst, 
               zip, 
               1adph, 
               1site, 
               neighborhood
           FROM 
               submission 
           WHERE 
               title = '$submission'
           ORDER BY 
               neighborhood ASC"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:29:51.547

javascript 的 encodeURI() 绝对是你的朋友。 [https://developer.mozilla.org/en/Referencia_de_JavaScript_1.5/Funciones_globales/encodeURI](https://developer.mozilla.org/en/Referencia_de_JavaScript_1.5/Funciones_globales/encodeURI)

但是它不会解决您的撇号问题，因为这是一个完全允许的字符。在 sql 操作之前，您必须在 php 中对其进行过滤，其中之一是：

*   mysql_real_escape_string
*   mysqli_real_escape_string
*   pdo 准备好的语句。

注册表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:30:52.400

您需要转义 MySQL 特有的字符。这[`mysql_real_escape_string()`](http://us.php.net/manual/en/function.mysql-real-escape-string.php)就是需要的地方。对所有可能包含特殊字符（如撇号）的数据使用它。

# grails - 使用控制器（grails）从视图中检索复选框数组和选择框

> ID：10900213
> 
> 赞同：1
> 
> 时间：2012-06-05T15:27:47.877
> 
> 标签：grails

我正在查看一些旧代码，并试图达到将选择的联系人实例 ID（复选框）与报告附加到将填充远程字段的选择框的目标。例如，这是传递给控制器​​的参数：

> [id:1, reportsToResults:[x, y, z, ], reportsTo.id:[56, 55, 55], reportsTo:[id:[56, 55, 55]], contactList:[55, 57], _contactList:[, , , ], _select:, action:index, controller:tempController]

我理论上需要的是这样的东西：

```
contactList:[ , , 55, 57, ] (where empty spaces are checkboxes that are NOT selected.    
reportsTo.id:[ , , 56, 56, ] (where empty spaces are empty selection boxes. 
```

如何传递值数组？因为我可以传递所有contactList ID 和reportsTo.id - 但我无法根据数组槽正确匹配它们或将它们捆绑在一起。

任何的想法：？

```
<!doctype html>
<html>
    <head>
        <meta name="layout" content="main">
    </head>
    <body>
        <div id="company-roster" class="company-roster">
        <h1>${companyName} Roster</h1>
            <g:form>
                <g:hiddenField name="id" value="${id}" />
                <div class="choicePanel">
                    <div class="choicePanel-reportsTo">
                        <label>Save all reports to additions:</label>
                        <g:actionSubmit value="Update Reports To" action="addReportsTo"/>
                    </div>
                </div>
                <script>
                    function all() {
                        $(':checkbox[name=select]').click (function () {
                          $(':checkbox[name=contactList]').prop('checked', this.checked);
                        });            
                    }
                </script>
                <div style="position:absolute; margin-top:10px; width: 1350px; height: 650px; overflow: auto;">
                <table>
                    <thead>
                        <tr>
                            <th><g:checkBox name="select" onclick="all();"/></th>
                            <g:sortableColumn property="firstName" action="roster" title="${message(code: 'contact.firstName.label', default: 'First Name')}" />
                            <g:sortableColumn property="lastName" action="roster" title="${message(code: 'contact.lastName.label', default: 'Last Name')}" />
                            <th>Reports To</th>
                        </tr>
                    </thead>
                    <tbody>
                        <g:each in="${companyRoster}" status="i" var="contactInstance">
                                <tr class="${(i % 2) == 0 ? 'even' : 'odd'}">

                                <td><g:checkBox name="contactList" value="${contactInstance.id}" checked="${false}"/></td>
                                <td>${fieldValue(bean: contactInstance, field: "firstName")}</td>
                                <td>${fieldValue(bean: contactInstance, field: "lastName")}</td>
                                <td>
                                    Reports To: <g:remoteField action="getReportsToResults" controller="contact" id="" update="rtResult_${contactInstance.id}" paramName="search" name="reportsToResults" value="" />
                                    <br/>
                                    <g:each in ="${contactInstance?.reportsTo}" var="reportsTo" status="x">
                                        <li style="list-style-type:none;">${reportsTo}<g:link controller="contact" action="removeReportsTo" params="${[reportsToID: reportsTo.id, contactInstanceID: contactInstance.id, comp_id:id]}">Remove</g:link></li>
                                    </g:each>
                                </td>
                                <td>
                                    <div id="rtResult_${contactInstance.id}" class="rtResult_${contactInstance.id}">
                                        <g:select name="reportsTo.id" from="${rtResults}" value="" />
                                    </div>
                                </td>
                                </tr>
                        </g:each>
                    </tbody>
                </table>
                </div>
            </g:form>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:46:35.350

我通常通过给表单上的每个复选框一个唯一且可识别的名称以及它在`hiddenField`类似...中引用的相应ID来做到这一点

```
<g:checkBox name="contact.${i}.checkBox" checked="${false}"/>
<g:hiddenField name="contact.${i}.id" value="${contactInstance.id}" /> 
```

上面，我使用了循环中的`i`变量，`g:each`这将确保每个变量都是有序且唯一的。

接下来，您需要将项目数存储在中，`g:form`以便您的控制器操作知道要查找多少个复选框参数，就像这样（在 g:each 之外但在`g:form`....

```
<g:hiddenField name="contactCount" value="${companyRoster.size()}" /> 
```

最后，您可以遍历`params`地图并处理选择或未选择的那些。

```
def doStuff = {
    def contactCount = params.contactCount.toInteger();

    for( i in 0..contactCount){

        def contact = Contact.get(params.contact."${i}".id);

        if (params.contact."${i}".checkBox){ //<-- this will return 'on' or ''
            println("you selected: ${contact}");
        }else{
            println("you DID NOT select: ${contact}");
        }

    }
} 
```

有几种方法可以解决这个问题，但上述解决方案是我一直这样做的方式。代码没有经过语法测试，只是在我脑海中浮现，但希望你能明白。享受！

# android - EditText 的 android:text 的默认值是什么，而 android:text 未定义？

> ID：10900215
> 
> 赞同：1
> 
> 时间：2012-06-05T15:27:54.140
> 
> 标签：android, layout, user-interface, android-edittext

我是Android开发的初学者。在我的项目中，我创建了一个 TableLayout——我认为 GridLayout 可以提供更多帮助，但由于我不熟悉 GridLayout，因此使用了 TableLayout——使用一些 EditTexts 从用户那里获取值。该活动实际上是一个可提交的表单。在每个 EditText 的左侧，有一个 TextView 定义了相应 EditText 的预期内容，因此我不必也没有为 EditText 设置默认文本（通常用作提示）。此活动中还有一个用于提交此表单的按钮。我选择了一些 EditTexts 作为 MUST_FILLED 的，所以在按钮的自定义侦听器类中，我必须检查这些 MUST_FILLED 是否已被填充。遵循我编码如下的直觉：

```
String s4 = machine_id.getText().toString().trim();
if(s4 == null || s4 == ""){
    Toast.makeText(v.getContext(), 
            "Please Input the machine ID", Toast.LENGTH_SHORT).show();
} 
```

machine_id`android:id`用于 EditText。此代码最终没有显示吐司。所以我认为 EditText 有一个默认的文本值，即使`android:text`没有手动定义。然后我写了一个简单的项目来证实我的想法。这是 MainActivity.java

```
public class EditText_testActivity extends Activity implements View.OnClickListener{
/** Called when the activity is first created. */
private String text;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        EditText et = (EditText)findViewById(R.id.et01);
        text = et.getText().toString();

        Button btn = (Button)findViewById(R.id.btn01);
        btn.setOnClickListener(this);
    }

@Override
public void onClick(View v) {
    if(text != null)
        Toast.makeText(v.getContext(), text, Toast.LENGTH_SHORT).show();
    else
        Toast.makeText(v.getContext(), "null", Toast.LENGTH_SHORT).show();

}
} 
```

和 main.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/et01" />
    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:id="@+id/btn01"
        android:text="TouchMe"/>

</LinearLayout> 
```

它确实证明了 EditText 有一个默认的文本值，因为`Toast.makeText(v.getContext(), text, Toast.LENGTH_SHORT).show();`它确实显示了一个 toast。但是，它显示的东西看起来像一个空白，但不完全是。

最后，我想知道 EditText 中 android:text 的默认值是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:38:09.540

我相信默认值是一个空字符串。它永远不会为 null，因为如果是这种情况，您应该已经在这一行遇到了 NullPointerException：

```
String s4 = machine_id.getText().toString().trim(); 
```

查看您的代码，吐司没有出现的原因是因为您使用`(s4 == null || s4 == "")`了 if 条件。**==**运算符与**.equals()**不同。尝试将您的条件更改为`"".equals(s4)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:34:56.227

您面临的问题没有默认值`EditText`是由于 String 的不正确匹配，因为 String 是对象所以

```
s4 == ""; 
```

就像匹配他们的对象引用而不是字符串，所以你应该使用

```
s4.equals(""); 
```

而不是上面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T17:03:21.770

似乎默认值是一个空字符串：“”这在我的程序中对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T15:37:51.320

在做之前使用空检查器

```
machine_id.getText().toString().trim(); 
```

并且还使用

```
s4.isEmpty(); 
```

（在某些 android 版本上）或

```
s4.length()==0; 
```

方法。

不要对 String 使用 == ，因为它会检查参考而不是实际值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T15:44:03.490

比较字符串的正确方法是，

```
s1.equals(s2) 
```

以这种方式使用它

```
if(s4.equals(null)||s4.equals("")){
    Toast.makeText(v.getContext(), 
            "Please Input the machine ID", Toast.LENGTH_SHORT).show();
} 
```

# actionscript-3 - Set datechooser "event" based on "if"

> ID：10900216
> 
> 赞同：0
> 
> 时间：2012-06-05T15:27:58.150
> 
> 标签：actionscript-3, flash-builder, flex4.6, datechooser

I have a `dateChooser` in an app I'm working on; the app is to submit time cards.

I'm trying to figure out a way to set a color based on number of hours submitted -- i.e. red for less than 8, green for 8 exactly, yellow for more than 8\. I already have the number of hours for that day being pulled from quick base as a number. Is there anyway set it to something like

```
if (hoursDateSelected <= 7){
   calendar.something = green
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:13:17.433

这可能是您正在寻找的：

[Flex 4 日期选择器](https://stackoverflow.com/questions/3813216/flex-4-datechooser)

基本上它是在扩展组件。

# java - CFHTTP 是否有 Java 替代品以使用 ColdFusion 的 NTLM 身份验证？

> ID：10900222
> 
> 赞同：2
> 
> 时间：2012-06-05T15:28:22.417
> 
> 标签：java, coldfusion, ntlm

事实

1.  我需要访问受 NTLM 身份验证保护的 Web 服务。
2.  我正在使用 Coldfusion 8。
3.  我需要这个解决方案是跨平台的，例如。Windows、Linux、OS-X（又名无 .NET 组件）
4.  Java 似乎是要走的路，但我无法理解在线提供的有限建议。

给定

1.  网址：“http://webservice.com/EndPoint.asmx”
2.  方法：POST
3.  用户名：“联合国”
4.  密码：“PW”
5.  正文：“姓名=bob&email=bob@bob.bob”

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-13T22:28:19.183

我知道这个问题很老，但它可能对那些想知道coldfusion cfhttp 支持ntlm 身份验证的版本有所帮助。

如果您查看 cfhttp Coldfusion 11 文档

> 添加了对 NTLM 身份验证的支持。添加了三个属性 - authType、域和工作站

ColdFusion 11 cfhttp 现在支持 NTLM 身份验证。那是好消息！！！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:33:17.533

是的，有一个基于 Apache 的 HTTP 客户端组件。

[http://ntlmhttpclient.riaforge.org/](http://ntlmhttpclient.riaforge.org/)

它确实支持 POST 方法和 NTLM 身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T08:40:46.810

Railo 4 现在支持 NTLM [http://webonix.net/post/railo-can-do-ntlm-authentication](http://webonix.net/post/railo-can-do-ntlm-authentication) 如果 IIS7 有多个身份验证提供程序，则需要 Railo 4.1

# jquery - 如何编写嵌套的多维 json 对象

> ID：10900235
> 
> 赞同：16
> 
> 时间：2012-06-05T15:28:55.147
> 
> 标签：jquery, json

我正在研究 json，我想知道这是否是编写嵌套的多维 json 对象的正确方法。我写道：

```
var foo = {
    "logged_in":true,
    "town":"Dublin",
    "state":"Ohio",
    "country":"USA",
    "products":2,
    "0":{
        "pic_id":"1500",
        "description":"Picture of a computer",
        "localion":"img.cloudimages.us/2012/06/02/computer.jpg",
        "type":"jpg",
        "childrenimages":2

        "0":{
        "pic_id":"15011",
        "description":"Picture of a cpu",
        "localion":"img.cloudimages.us/2012/06/02/mycpu.png",
        "type":"png"
          }
        "1":{
        "pic_id":"15012",
        "description":"Picture of a cpu two",
        "localion":"img.cloudimages.us/2012/06/02/thiscpu.png",
        "type":"png"
          }
    },
    "1":{
        "pic_id":"1501",
        "description":"Picture of a cpu",
        "localion":"img.cloudimages.us/2012/06/02/cpu.png",
        "type":"png"
    }
}; 
```

如果我的对象嵌套太深，这是对的还是我应该遵循的约定。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T15:37:02.183

考虑使用数组而不是数字对象。

json 中的数组使用 [] [http://www.json.org/定义](http://www.json.org/)

这是一个例子：

```
var foo = {
    "logged_in":true,
    "town":"Dublin",
    "state":"Ohio",
    "country":"USA",
    "products":
    [
        {
            "pic_id":"1500",
            "description":"Picture of a computer",
            "localion":"img.cloudimages.us/2012/06/02/computer.jpg",
            "type":"jpg",
            "childrenimages":
            [
                {
                    "pic_id":"15011",
                    "description":"Picture of a cpu",
                    "localion":"img.cloudimages.us/2012/06/02/mycpu.png",
                    "type":"png"
                },
                {
                    "pic_id":"15012",
                    "description":"Picture of a cpu two",
                    "localion":"img.cloudimages.us/2012/06/02/thiscpu.png",
                    "type":"png"
                }
            ]
        },
        {
            "pic_id":"1501",
            "description":"Picture of a cpu",
            "localion":"img.cloudimages.us/2012/06/02/cpu.png",
            "type":"png"
        }
    ],
}; 
```

（如果我忘记关闭 { 或 [ 或 ，请原谅我，在 SO :p 中输入代码非常困难）

这样你甚至不需要像

```
"products":2, 
```

或者

```
"childrenimages":2 
```

你只是做

```
foo.products.length 
```

或者

```
foo.products[0].childrenimages.length 
```

祝你好运 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:37:14.443

这实际上不是您在那里拥有的数组，它只是一个包含属性的对象，这些属性也是对象。您还缺少一些逗号，因此甚至无法编译。

在这种情况下，对您来说更方便的是同时使用数组和对象来形成 JSON。例如：

```
 var this_json_string = {
    "state":"Ohio",
    "country":"USA",
    "products":[
        {
          "pic_id":"1500",
          "description":"Picture of a computer",
        },

        {
          "pic_id":"15011",
          "description":"Picture of a cpu"
        },
        {
          "pic_id":"15012",
          "description":"Picture of a cpu two"
        },
        {
          "pic_id":"1501",
          "description":"Picture of a cpu"
        }
    ]
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:43:22.520

这是您的数据的正确格式（注意我自己更改了一些数据）

```
{
    "logged_in":true,
    "town":"Dublin",
    "state":"Ohio",
    "country":"USA",
    "products":2,
    "productinfo":[
        {
            "0":{
                "pic_id":"1500",
                "description":"Picture of a computer",
                "localion":"img.cloudimages.us/2012/06/02/computer.jpg",
                "type":"jpg",
                "childrenimages":2
            },
            "1":{
                "pic_id":"15011",
                "description":"Picture of a cpu",
                "localion":"img.cloudimages.us/2012/06/02/mycpu.png",
                "type":"png"
            },
            "2":{
                "pic_id":"15012",
                "description":"Picture of a cpu two",
                "localion":"img.cloudimages.us/2012/06/02/thiscpu.png",
                "type":"png"
            },
            "3":{
                "pic_id":"1501",
                "description":"Picture of a cpu",
                "localion":"img.cloudimages.us/2012/06/02/cpu.png",
                "type":"png"
            }
        }
    ]
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-05T15:37:19.530

不要写 JSON。说真的，除了简单的配置文件，不要写JSON。

在大多数语言（如果没有的话）中，您都有将对象转换为 JSON 字符串的实用程序。

PHP：`json_encode($array);`

Javascript：`JSON.stringify( obj );`

等等。

手动编写 JSON 通常会导致语法错误。在您看到缺少的逗号或 w/e 之前会让您头疼的那种。你有很好的工具来做到这一点，使用它们。您可以将其与 XML 进行比较，但 JSON 在您输入时没有工具（IDE、文本编辑器）说“此语法错误”。例如，没有编辑器会告诉您您使用了单引号而不是双引号。

只是不要写 JSON。

# jquery - 如何设置提交按钮到文本大小

> ID：10900238
> 
> 赞同：0
> 
> 时间：2012-06-05T15:29:17.360
> 
> 标签：jquery, css, jquery-mobile

我正在使用 jquery mobile 并有一个带有提交按钮的表单。不幸的是，在做了一些研究之后，我了解到 jquery mobile 的 data-inline 属性不适用于输入元素。我希望提交按钮只是其文本的大小。Firefox 必须注意这一点，因为按钮是我想要的大小。但是，IE 将按钮的宽度设置为容器的大小。有什么方法可以将提交按钮的样式设置为其文本大小而不是更大？我试着做：

```
$('#element').css('display','inline') 
```

但是，那没有用。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:59:15.123

这是一个`<input type="button" />`元素的演示，当您将属性添加到它时，该元素正确地进入“内联” `data-inline="true"`（这是在 IE8/IE9 中测试的）：http: [//jsfiddle.net/eVTef/](http://jsfiddle.net/eVTef/)

要在 IE7 中解决此问题，您需要添加“inline hack”：

```
.ui-btn-inline {
    *display : inline !important;
    zoom     : 1;
} 
```

以星号 ( ) 为前缀的属性`*`不会被 IE8/IE9 或任何其他现代浏览器读取，但会被 IE7 读取。`zoom : 1`必须添加，以便元素获取CSS `hasLayout`（不能手动添加到元素）。

这是上述修复的演示：http: [//jsfiddle.net/eVTef/1/](http://jsfiddle.net/eVTef/1/)

**奖金回合**

您也可以在 IE6 中解决此问题，但您需要为元素指定高度。要为 IE6 指定高度，而没有其他浏览器，我们可以执行类似于 IE7 的星号 hack 的操作：

```
.ui-btn-inline {
    *display : inline !important;
    zoom     : 1;
    _height  : 30px;
} 
```

即使 IE7 会忽略下划线 ( `_`) 前缀的属性，但 IE6 会使用属性声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:56:30.267

将文本包装在`<span>`标签中，并计算其宽度。

见例子：http: [//jsbin.com/oxocil/2/edit](http://jsbin.com/oxocil/2/edit)

编辑：您也可以通过 javascript 添加 span 标签，然后在必要时以相同的方式将其删除。

# java - 如何从 Java 上的 BAM 文件格式中获取一致序列（通过 Picard）

> ID：10900239
> 
> 赞同：1
> 
> 时间：2012-06-05T15:29:21.783
> 
> 标签：java, media, picard

如何使用 Java 查看 Picard BAM 文件格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:56:39.703

您是否尝试过[http://picard.sourceforge.net/](http://picard.sourceforge.net/) - 这是一个用于 SAM 和 BAM Picard 文件的 Java 库，它位于 SourceForge 上，因此您应该可以使用源代码。

# ruby - 学习轨道。例如，产品、:product、@product、product.id、product_id 之间的差异

> ID：10900243
> 
> 赞同：1
> 
> 时间：2012-06-05T15:29:44.277
> 
> 标签：ruby, ruby-on-rails-3

Rails 中的许多变量和约定看起来与我非常相似。如果某些东西不起作用并且我怀疑某个特定变量是罪魁祸首，我可能会将其更改为

```
variable 
```

到

```
@variable 
```

或者我可能会改变

```
product_id 
```

到

```
product.id 
```

不过，我真的只是在黑暗中拍摄。我不确切知道在哪里使用了什么，我真的很想知道关键概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:33:01.687

```
variable 
```

可以是当前范围内的局部变量或方法。

```
@variable 
```

是一个实例变量，就像任何其他类中的任何实例变量一样。

```
product_id 
```

又是当前范围内的局部变量或方法。

最后一个：

```
product.id 
```

**product**可以是一个局部变量或方法，然后你调用它的**id**方法。在尝试使用 Rails 之前，您可能应该花更多时间尝试学习 Ruby。

# asp.net - 使用实体框架选择所有行

> ID：10900250
> 
> 赞同：59
> 
> 时间：2012-06-05T15:30:10.240
> 
> 标签：asp.net, entity-framework

我正在尝试使用实体框架从数据库中选择所有行进行操作，然后再将它们发送到表单

```
var ptx = [modelname].[tablename]();
ptx.[tablename].Select(????) 
```

里面有什么？？？？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-06-05T22:22:37.477

我使用了 entitydatasource，它提供了我想做的一切所需的一切。

`_repository.[tablename].ToList();`

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2016-02-10T12:29:54.320

实体框架有一件很漂亮的事情，比如：

```
var users = context.Users; 
```

这将选择 Table 中的所有行`User`，然后您可以使用您的`.ToList()`等。

* * *

**对于实体框架的新手来说，就像：**

```
PortalEntities context = new PortalEntities();
var users = context.Users; 
```

这将**选择**表中的所有行`User`

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-06-05T15:33:55.767

怎么样：

```
using (ModelName context = new ModelName())
{
    var ptx = (from r in context.TableName select r);
} 
```

ModelName 是设计者自动生成的类，继承自`ObjectContext`.

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-07-10T19:02:52.067

您可以使用此代码选择所有行：

C＃ ：

```
var allStudents = [modelname].[tablename].Select(x => x).ToList(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-09T11:34:51.280

您可以简单地遍历 DbSet context.tablename

```
foreach(var row in context.tablename)
  Console.WriteLn(row.field); 
```

或立即评估到您自己的列表中

```
var allRows = context.tablename.ToList(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-13T09:48:05.810

我知道旧帖子，但是使用`Select(x => x)`可以将 EF Core（甚至只是 Linq）表达式拆分为查询构建器。

这对于添加动态条件很方便。

例如：

```
public async Task<User> GetUser(Guid userId, string userGroup, bool noTracking = false)
{
    IQueryable<User> queryable = _context.Users.Select(x => x);

    if(!string.IsNullOrEmpty(userGroup))
        queryable = queryable.Where(x => x.UserGroup == userGroup);

    if(noTracking)
        queryable = queryable.AsNoTracking();

    return await queryable.FirstOrDefaultAsync(x => x.userId == userId);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-17T02:20:38.350

这里有几种方法（假设我正在为 DbConext 使用依赖注入）

```
public class Example
{
    private readonly DbContext Context;

    public Example(DbContext context)
    {
        Context = context;
    }

    public DbSetSampleOne[] DbSamples { get; set; }

    public void ExampleMethod DoSomething()
    {
        // Example 1: This will select everything from the entity you want to select
        DbSamples = Context.DbSetSampleOne.ToArray();

        // Example 2: If you want to apply some filtering use the following example
        DbSamples = Context.DbSetSampleOne.ToArray().Where(p => p.Field.Equals("some filter"))

    } 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-05T15:35:30.923

您可以使用：

```
ptx.[tablename].Select( o => true) 
```

# c# - Crystal Reports 导出为 pdf，报表在首次导出后不应用新参数

> ID：10900251
> 
> 赞同：1
> 
> 时间：2012-06-05T15:30:12.077
> 
> 标签：c#, batch-file, pdf-generation, crystal-reports-2010

我实现了一个将水晶报表导出为 pdf 的循环。这个想法是用它的连接实例化初始报告，然后在循环中应用参数，然后再导出为 PDF（所以我为每条记录获取一个 pdf），但报告会继续使用第一个循环执行的数据导出 pdf。应用新参数后如何强制它刷新数据？

示例代码：

```
ReportDocument reportDoc=new ReportDocument();
reportDoc.Load("c:\\reportx.rpt");
ConnectionInfo cinfo = FunctionLibrary.getCrystalConection();
foreach (Table table in reportDoc.Database.Tables)
{
    table.LogOnInfo.ConnectionInfo = cinfo;
    table.ApplyLogOnInfo(table.LogOnInfo);
}
string[] docnumbers=new[]{"1","2","3","4"};

for(int i=0;i<docnumbers.Lenght; i++)
{
    report.SetParameterValue(0, docnumbers[i]);
    report.Refresh();
    DiskFileDestinationOptions CrDiskFileDestinationOptions = new DiskFileDestinationOptions();
    PdfRtfWordFormatOptions CrFormatTypeOptions = new PdfRtfWordFormatOptions();
    CrDiskFileDestinationOptions.DiskFileName = "C:\\generatedpdf " + docnumbers[i] + ".pdf";
    ExportOptions CrExportOptions = reportDoc.ExportOptions;
    {
        CrExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;
        CrExportOptions.ExportFormatType = ExportFormatType.PortableDocFormat;
        CrExportOptions.DestinationOptions = CrDiskFileDestinationOptions;
        CrExportOptions.FormatOptions = CrFormatTypeOptions;
    }
    reportDoc.Export();
}
reportDoc.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:34:11.970

问题出在 report.Refresh(); 当我删除那条线时它起作用了......

# wcf - WCF Web 服务国际化 NumberFormat 和 DateFormat

> ID：10900260
> 
> 赞同：1
> 
> 时间：2012-06-05T15:30:48.250
> 
> 标签：wcf, web-services, internationalization

我正在尝试确定在 wcf Web 服务中处理国际化的正确方法，特别是与数字格式和日期格式有关。我的服务将支持多种语言和文化。我的问题是我们应该如何处理不同日期和数字格式的输入和输出序列化。

1.  对于日期，我想我只希望它们以 UTC 提交和返回。对我来说，这似乎是合理的，荷兰的一位开发人员说，应该能够处理这种格式。

2.  我的另一个问题是数字类型，特别是小数。我正在使用 xsd:decimal 数据类型，它使用“。” 字符作为小数点分隔符。我想知道对于使用“，”而不是“。”的荷兰开发人员来说，这是否会成为问题。作为小数分隔符。

我没有返回任何翻译文本，所以这不是问题。我只是想确保返回并接受标准的数字和日期格式是正确的做法。由于我不是国际开发人员，我很难设身处地为他们着想。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:57:32.820

如果可能的话，我会让 WCF 服务以与文化无关的方式与值类型（数字和日期/时间）一起工作。由于 XSD 标准使用句点字符作为小数分隔符定义十进制，因此客户端软件应负责反序列化它并应用任何特定于文化的格式。这同样适用于日期/时间序列化，除了您指出的时间应该是UTC。

# api - 一个实现 OAuth2.0 的 Restful Zend Fr API 提供者？

> ID：10900263
> 
> 赞同：2
> 
> 时间：2012-06-05T15:30:53.213
> 
> 标签：api, zend-framework, rest, oauth, provider

有没有人遇到过解释开发实现 OAuth2.0 的 Restful Zend Framework API 提供程序的教程？我一直在使用 OAuth1.0，但是这个协议有一些 OAuth2.0 解决的限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T22:39:18.043

你检查过 Zend 最近在[ZendCon](http://apigility.org/)上宣布的 apigility 吗？创建 api 真的很容易，使用 Zend_Oauth 你可以很容易地创建自己的服务。

# iphone - iOS 上的 AES-256 加密不会产生与 openssl 相同的结果

> ID：10900278
> 
> 赞同：4
> 
> 时间：2012-06-05T15:32:01.830
> 
> 标签：iphone, ios, openssl, aes, commoncrypto

我已经看了好几个小时了。我拼命想让iOS使用AES-256加密来加密一小段文本，然后可以通过openssl解密。

直线前进？没有。

我为 iOS 找到的代码与 openssl 的密钥和 IV 不兼容，所以我不得不对其进行调整，但它显然不起作用。

所以这是我正在使用的加密代码......传入一个字符串来加密（dataString）一个字符串密钥（key）和一个字符串初始化向量（iv）......

```
- (NSData *)AES256Encrypt:(NSString *)dataString WithKey:(NSString *)key iv:(NSString *)iv {

    // 'key' should be 32 bytes for AES256, will be null-padded otherwise
    //char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)
    //bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    //[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    //NSLog(@"keyPtr: '%s'", keyPtr);

    NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];
    NSLog(@"keyPtr: '%s'", keyData.bytes);
    NSData *dataToEncrypt = [dataString dataUsingEncoding:NSUTF8StringEncoding];
    NSData *ivData = [iv dataUsingEncoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [dataToEncrypt length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          keyData.bytes, kCCKeySizeAES256,
                                          ivData.bytes, // initialisation vector
                                          dataToEncrypt.bytes, 
                                          dataToEncrypt.length, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
} 
```

对于要编码的相同字符串，这不会产生与使用具有相同键和 iv 的 openssl 时相同的值......例如这个命令行：

```
openssl enc -aes-256-cbc -e -in secrets.txt -a -iv 0000 -K 0000 -p 
```

secrets.txt 只是一个包含要加密的字符串的文本文件

这会输出如下内容：

```
salt=3C66000000000000
key=0000000000000000000000000000000000000000000000000000000000000000
iv =00000000000000000000000000000000
qTMfgtAxbF8Yyh27ZDrcIQ== 
```

而要解密，则做相反的操作（假设上面加密的最后一行数据在 test.secrets.out 中）

```
openssl enc -aes-256-cbc -d -in test.secrets.out -a -iv 0000 -K 0000 -p 
salt=3C66000000000000
key=0000000000000000000000000000000000000000000000000000000000000000
iv =00000000000000000000000000000000
< text of the secrets.txt file > 
```

现在，如果我使用 4 个字符的 key 和 iv，这在 iOS 中编码不正确。如果我使用全长密钥和 iv，这也不会正确编码。

基本上，这是一个检查，如果我发送一段加密数据，它是正确的数据。

我错过了什么？

我查看了一些代码以尝试找到答案...

[http://robnapier.net/blog/aes-commoncrypto-564](http://robnapier.net/blog/aes-commoncrypto-564)

[https://github.com/rnapier/RNCryptor](https://github.com/rnapier/RNCryptor)

[http://pastie.org/426530](http://pastie.org/426530)

在这里也进行了广泛搜索，但找不到答案。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:17:49.883

OpenSSL 有一种独特的（读作“不接近任何标准，也不是特别安全”）将密码转换为 IV 和密钥的方法。如果您查看[RNOpenSSLCryptor](https://github.com/rnapier/RNCryptor/blob/master/RNCryptor/RNOpenSSLCryptor.m)，您会看到使用的算法：

```
// For aes-128:
//
// key = MD5(password + salt)
// IV = MD5(Key + password + salt)

//
// For aes-256:
//
// Hash0 = ''
// Hash1 = MD5(Hash0 + Password + Salt)
// Hash2 = MD5(Hash1 + Password + Salt)
// Hash3 = MD5(Hash2 + Password + Salt)
// Hash4 = MD5(Hash3 + Password + Salt)
//
// Key = Hash1 + Hash2
// IV = Hash3 + Hash4
//

// File Format:
//
// |Salted___|<salt>|<ciphertext>|
// 
```

使用`RNOpenSSLCryptor`允许`RNCryptor`支持 OpenSSL 格式。我目前正在重新编写[`async`](https://github.com/rnapier/RNCryptor/tree/async)分支上的代码以支持异步操作，并且该分支尚不支持 OpenSSL，但我确实计划在短期内（到 2012 年 7 月中旬）重新编写。

如果您想要实现此功能的代码供您自己使用，请查看`keyForPassword:salt:`and `IVForKey:password:salt:`。

请注意，OpenSSL 文件格式有几个安全问题，如果可以避免，我不推荐它。它没有使用非常好的 KDF 来生成其密钥，没有应有的随机 IV，并且没有提供用于身份验证的 HMAC。这些安全问题是我设计[不同文件格式](https://github.com/rnapier/RNCryptor/wiki/Data-Format)的原因，就像我讨厌创建“又一个不兼容的容器”一样。

# javascript - 从包含多维的字符串构建 JSON 对象

> ID：10900283
> 
> 赞同：4
> 
> 时间：2012-06-05T15:32:20.607
> 
> 标签：javascript, json, multidimensional-array

我有一组名称/值对象（如下）。名称被格式化以表示多维数组。

我需要用它构建一个完整的 JavaScript 对象（底部）。

```
[{
name: "getQuote[origin]",
value: "Omaha,NE"
}, 
{
name: "getQuote[destination]",
value: "10005"
}, 
{
name: "getQuote[country]",
value: "us"
}, 
{
name: "getQuote[vehicles][0][year]",
value: "1989"
},
{
name: "getQuote[vehicles][0][make]",
value: "Daihatsu"
}, 
{
name: "getQuote[vehicles][0][model]",
value: "Charade"
}, 
{
name: "getQuote[vehicles][0][count]",
value: "1"
}] 
```

变成这样：

```
{getQuote : 
  { origin : Omaha},
  { destination : 10005},
  {vehicles : [
   {
    year : 1989,
    make: Honda,
    model : accord
   },
   {
   //etc
}] 
```

n

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:17:01.080

您可以手动执行此操作，如下所示：

```
var source = [ /* Your source array here */ ];
var dest = {};

for(var i = 0; i < source.length; i++)
{
    var value = source[i].value;

    var path = source[i].name.split(/[\[\]]+/);

    var curItem = dest;

    for(var j = 0; j < path.length - 2; j++)
    {
        if(!(path[j] in curItem))
        {
            curItem[path[j]] = {};
        }

        curItem = curItem[path[j]];
    }

    curItem[path[j]] = value;
} 
```

`dest`是结果对象。

检查它在这里工作：http: [//jsfiddle.net/pnkDk/7/](http://jsfiddle.net/pnkDk/7/)

# netsuite - 如何使用多个术语创建 NetSuite SuiteTalk 搜索？

> ID：10900289
> 
> 赞同：4
> 
> 时间：2012-06-05T15:32:54.713
> 
> 标签：netsuite

如何创建一个 SuiteTalk (NetSuite web api) 搜索查询，指定多个表示逻辑 OR 运算符的搜索词？

例如，我想检索其*创建*或*最后修改日期*在特定范围内的 TimeBill 记录。这是我的代码，适用于单个搜索词。简单地添加另一个搜索词似乎可以创建逻辑 AND 操作。

```
 /// <summary>
    /// Return the list of time bills whose last modified date is within 
    /// the indicated date range.
    /// </summary>
    /// <param name="from">Required from date</param>
    /// <param name="to">Optional to date</param>
    /// <returns>List of time bills</returns>
    public IEnumerable<TimeBill> GetTimeBills(DateTime from, DateTime to)
    {
        _log.Debug(String.Format("Enter TimeBill(DateTime from='{0}', DateTime to='{1}')", from, to));

        // Build search criteria.
        TimeBillSearch search = new TimeBillSearch();
        TimeBillSearchBasic searchBasic = new TimeBillSearchBasic();
        SearchDateField searchDateField = new SearchDateField();
        searchDateField.@operator = SearchDateFieldOperator.within;
        searchDateField.operatorSpecified = true;
        searchDateField.searchValue = from;
        searchDateField.searchValueSpecified = true;
        searchDateField.searchValue2 = to;
        searchDateField.searchValue2Specified = true;
        searchBasic.dateCreated = searchDateField;            
        search.basic = searchBasic;

        return this.Get<TimeBill>(search);
    }  

    /// <summary>
    /// Perform a paged search and convert the returned record to the indicated type.
    /// </summary>
    private IEnumerable<T> Get<T>(SearchRecord searchRecord)
    {
        _log.Debug("Enter Get<T>(SearchRecord searchRecord)");

        // This is returned.
        List<T> list = new List<T>();

        // The suitetalk service return this.
        SearchResult result = null;

        using (ISuiteTalkService service = SuiteTalkFactory.Get<SuiteTalkService>())
        {
            do
            {
                // .search returns the first page of data.
                if (result == null)
                {
                    result = service.search(searchRecord);
                }
                else // .searchMore returns the next page(s) of data.
                {
                    result = service.searchMoreWithId(result.searchId, result.pageIndex + 1);
                }

                if (result.status.isSuccess)
                {
                    foreach (Record record in result.recordList)
                    {
                        if (record is T)
                        {
                            list.Add((T)Convert.ChangeType(record, typeof(T)));
                        }
                    }
                }
            }
            while (result.pageIndex < result.totalPages);
        }
        return list;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:53:07.460

根据 NetSuite 用户社区（论坛），我不认为这是目前可能的（至少它没有出现在 SuiteTalk/Web 服务的 WSDL 中）：[https://usergroup.netsuite.com/users/showthread.php? t=29818](https://usergroup.netsuite.com/users/showthread.php?t=29818)

但是，您可以使用 nlobjSearchFilter 方法 setLeftParens()、setRightParens() 和 setOr() 动态创建一个复杂的已保存搜索（在 Suitelet 中使用 SuiteScript），其中包括 AND/OR 和括号（正如您推测的那样，逻辑“AND " 是存在多个过滤器时的默认行为）。

动态创建的保存搜索（我知道这里的术语令人困惑）也可以保存和加载以供以后重用。因此，您可以通过让您的 Web 服务代码调用保存的搜索并检索结果来潜在地利用 NetSuite 服务器上动态创建的保存的搜索，但仍然让一切都是动态的（没有硬编码的搜索过滤器/值）。

正如论坛上提到的，您还可以自己执行多个搜索并将结果拼接在一起（在您的 SuiteTalk C#/Java 等代码中）。

# java - Android - 读取大文本文件的更有效方法

> ID：10900292
> 
> 赞同：1
> 
> 时间：2012-06-05T15:33:05.870
> 
> 标签：java, android, string, text

我在我的 Android 应用程序中有一个大的 txt 文件（1.5 Mb）作为私有资源。
该文件的结构如下：

```
"A1|A2|A3|A4#B1|B2|B3|B4#C1|C2|C3|C4#..." 
```

其中 A1、A2、A3、B1... 是字母数字字符串。我需要为每组字符串创建一个对象，如下所示：

```
MyObject objA = new MyObject("A1", "A2", "A3", "A4");
MyObject objB = new MyObject("B1", "B2", "B3", "B4");
... 
```

我开发了一个阅读器类来阅读这个文件......但它看起来有点慢。
这里是：

```
public class TextFileReader {

    private static Charset charset = Charset.defaultCharset();
    private InputStream stream;
    private InputStreamReader reader;
    private StringBuffer buffer;

    public TextFileReader(Context c, String s) {
        try {
            this.stream = c.openFileInput(s);
            this.reader = new InputStreamReader(this.stream, charset);
            this.buffer = new StringBuffer();
        } catch (FileNotFoundException e) {
        }
    }

    public String readNextSubstring(char div) throws IOException {
        buffer.delete(0, buffer.length());
        int i;
        char c;
        while ((i = reader.read()) > -1) {
            c = (char) i;
            if (c == div) break;
            buffer.append(c);
        }
        return buffer.toString();
    }
} 
```

我`TextFileReader`以这种方式使用：

```
TextFileReader reader = new TextFileReader(context, "big_file.txt");

//First group
String group = reader.readNextSubstring('#');
String[] info = group.split("\\|");
MyObject objA = new MyObject(info[0], info[1], info[2], info[3]);

//Second group
group = reader.readNextSubstring('#');
info = group.split("\\|");
MyObject objB = new MyObject(info[0], info[1], info[2], info[3]);

//Obviously this is done in a while loop :)
... 
```

你觉得这个方法怎么样？它可以以更有效的方式构建吗？
我不在乎空间，我在乎时间（模拟器需要很多时间才能读取文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:07:15.523

我可以找到一个简单的调整，它可以通过增加你花在这上面的时间来加快你​​的速度：`group.split("\\|");`

java 这样做的方式是，每次运行此行时，它都会编译一个新的`regex`.

如果你这样做：

```
Pattern pattern = Pattern.compile("\\|");
TextFileReader reader = new TextFileReader(context, "big_file.txt");

while (reader.hasMoreData) 
{
  String group = reader.readNextSubstring('#');
  String[] info = pattern.split(group);
  MyObject objA = new MyObject(info[0], info[1], info[2], info[3]);
  ...
} 
```

这将减少编译模式所需的时间——这对于您的数据量来说是相当可观的。

此外，1.5MB 也不算多，也许使用 a 将其全部加载到内存中`BufferedReader`可能会进一步提高您的性能。

# c# - C# 中两个几乎相同的 Web 引用的接口

> ID：10900301
> 
> 赞同：2
> 
> 时间：2012-06-05T15:33:35.497
> 
> 标签：c#, .net-3.5, interface, web-reference

我有 2 个无法更改的网络参考：

它们几乎相同，但在引用时只接受*ProperCase*和另一个*Uppercamelcase*。

例子

不仅是道具，而是整个类及其道具和方法

@EDIT：对不起，我意识到它比最初所说的更复杂：

不仅是道具，还有整个类及其道具和方法***以及内部类****。虽然只用作结构，但内部类也有同样的问题*。

```
public class Foobar
{
     public string Logmsgno;
     public string Revno;
     public string Reqsox;
     public void Dosomething();
     public Barbaz Mybarbaz;
     public List<quux> Myquuxlist;
} 
```

另一个名字像

```
public class FooBar
{
     public string LogMsgNo;
     public string RevNo;
     public string ReqSox;
     public void DoSomething();
     public BarBaz MyBarBaz;
     public List<Quux> MyQuuxList;
} 
```

有没有一种简单的方法可以为两者制作接口？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:35:52.500

很不幸的是，不行。没有。C# 区分大小写（包括接口）。为了让它们都符合单个接口，名称大小写必须匹配。如果你这样做了，无论如何课程都是一样的。

您唯一的选择是创建一个使用其中一种套管方法的接口，在两个类上实现它，然后将代码添加到一个类（使用您未选择的命名约定）以通过调用：

```
public interface IFooBar
{
    string LogMsgNo { get; set; }
    string RevNo { get; set; }
    string ReqSox { get; set; }
    void DoSomething();
}

public class Foobar : IFooBar
{
    public string Logmsgno;
    public string Revno;
    public string Reqsox;
    public void Dosomething();

    public string LogMsgNo
    {
        get { return Logmsgno; }
        set { Logmsgno = value; }
    }

    // And so on
} 
```

**更新**

看到您的编辑后，事情变得更加复杂。您必须对所有内部类执行相同的操作，然后让您的接口引用较低级别的接口。相同的概念，只是更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:05:47.433

如果没有适当的重构来更新所有内容和更改名称，是的，你可以用一点点烟雾和镜子。根据您希望它们成为的新值创建一个接口，然后将它们更改为分别使用 getter/setter 来保留原始值而不破坏它。

***从您的扩展问题扩展。*** 你也必须调整每个级别。为“Barbaz”和“BarBaz”类定义一个接口，这样你的外部类就可以有一个对象

```
public interface IYourBarBazInterface
{
     string BarBazProp1 { get; set; }
     string AnotherProp { get; set; }
}

public interface IQuux
{
    int QuuxProp { get; set; }
    string AnotherQuuxProp { get; set; }
}

public interface IYourCommonInterface
{
     string LogMsgNo { get; set; };
     string RevNo { get; set; };
     string ReqSox { get; set; };

     // Similar principle of declarations, but interface typed objects
     IYourBarBazInterface MyBarBaz { get; set; }
     List<IQuux> MyQuuxList;
     void DoSomething();
}

public class Foobar : IYourCommonInterface
{
     public string Logmsgno;
     public string Revno;
     public string Reqsox;
     public void Dosomething();

     // your existing old versions keep same name context
     // but showing each of their respective common "interfaces"
     public IYourBarBazInterface mybarbaz;
     public List<IQuux> myQuuxlist = new List<IQuux>();

     // these are the implementations of the interface...
     public string LogMsgNo
     { get { return Logmsgno; }
       set { Logmsgno = value; }
     }

     public string RevNo
     { get { return Revno; }
       set { Revno = value; }
     }

     public string ReqSox
     { get { return Reqsox; }
       set { Reqsox = value; }
     }

     public void DoSomething()
     { Dosomething(); }

     // Now, the publicly common Interface of the "IYourCommonInterface"
     // that identify the common elements by common naming constructs.
     // similar in your second class.
     public IYourBarBazInterface MyBarBaz 
     { get { return mybarbaz; }
       set { mybarbaz = value; }
     }

     public List<IQuux> MyQuuxList
     { get { return myQuuxlist; }
       set { myQuuxlist = value; }
     }
}

public class FooBar : IYourCommonInterface
{
     // since THIS version has the proper naming constructs you want,
     // change the original properties to lower case start character
     // so the interface required getter/setter will be properly qualified

     public string logMsgNo;
     public string revNo;
     public string reqSox;

     public IYourBarBazInterface MyBarbaz;
     public List<IQuux> Myquuxlist;

     // these are the implementations of the interface...
     public string LogMsgNo
     { get { return logMsgMo; }
       set { logMsgNo = value; }
     }

     public string RevNo
     { get { return revNo; }
       set { revNo = value; }
     }

     public string ReqSox
     { get { return reqSox; }
       set { reqSox = value; }
     }

     // Since your "DoSomething()" method was already proper case-sensitive
     // format, you can just leave THIS version alone
     public void DoSomething()
     { .. do whatever .. }

     public IYourBarBazInterface MyBarBaz 
     { get { return MyBarbaz; }
       set { MyBarbaz = value; }
     }

     public List<IQuux> MyQuuxList
     { get { return myquuxlist; }
       set { myquuxlist = value; }
     }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:40:42.383

如果我必须处理这个问题，我可能会编写一个扩展方法来从一种类型转换为另一种类型。一些反思将完成大部分工作。`new Foobar().ToFooBar().ToFoobar()`或者编写一个我总是与之交互的类，最后你需要访问正确的实现，调用`ToFoobar()`.

# c++ - 打印数组中的元素

> ID：10900302
> 
> 赞同：3
> 
> 时间：2012-06-05T15:33:39.553
> 
> 标签：c++, c, arrays, printf

> **可能重复：**
> [对 C 宏扩展和整数算术](https://stackoverflow.com/questions/950051/confused-about-c-macro-expansion-and-integer-arithmetic)
> [A 谜语（在 C 中）感到困惑](https://stackoverflow.com/questions/5611724/a-riddle-in-c)

以下 C 程序的输出是打印数组中的元素。但是当实际运行时，它并没有这样做。

```
 #include<stdio.h>

  #define TOTAL_ELEMENTS (sizeof(array) / sizeof(array[0]))
  int array[] = {23,34,12,17,204,99,16};

  int main()
  {
      int d;

      for(d=-1;d <= (TOTAL_ELEMENTS-2);d++)
          printf("%d\n",array[d+1]);

      return 0;
  } 
```

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:44:42.527

`sizeof()`返回`unsigned int`等在 <= 比较中，`d`被转换为`unsigned int`. -1 转换`unsigned int`为`0xffffff`. 因为`0xffffff > (7-2)`，for循环体甚至不会被执行一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T15:43:47.620

这失败了，因为`sizeof`它返回了一个`size_t`无符号类型的值。这会导致比较将 提升`-1`为无符号，这通常是一个非常大的值，从而使比较失败。

您应该收到符号不匹配的警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T15:42:46.957

重点是`sizeof`返回值的类型。

> 它是 a `size_t`，它是一个无符号类型，因此转换`-1`为该类型进行比较会产生该类型的最大值，该最大值远大于 5。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T15:45:59.567

```
for(d=-1;d <= ((int)TOTAL_ELEMENTS-2);d++) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-05T15:49:34.263

我想这更清楚：

```
for(d = 0; d < TOTAL_ELEMENTS; d++)
   printf("%d\n",array[d]); 
```

`size_t`案例应该不再是问题了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T15:40:26.857

编写此有效循环的更标准方法是

```
for(d = 0; d < TOTAL_ELEMENTS; d++)
   ... 
```

正如其他几个人已经正确指出的那样，问题在于比较有符号/无符号值。这种结构可以避免这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T15:52:48.057

当我执行以下操作时，您的原始问题有效：

```
#define TOTAL_ELEMENTS 7
int array[] = {23,34,12,17,204,99,16};

int main()
{
  int d;

  for(d=-1; d <= (TOTAL_ELEMENTS - 2); d++)
      printf("%d\n",array[d+1]);

  return 0;
} 
```

这与将负数 d=-1 与 (TOTAL_ELEMENTS-2) 进行比较有关。我相信它可能是 sizeof，但我会把找出原因作为练习。

保持原来的#define 不变——

`#define TOTAL_ELEMENTS (sizeof(array) / sizeof(array[0]))`

- 但使用从零开始的索引也有效。

我不确定为什么您原来的 TOTAL_ELEMENTS 定义导致循环不打印。

# heroku - 在 heroku db:push 中，“重置序列”是什么意思

> ID：10900303
> 
> 赞同：0
> 
> 时间：2012-06-05T15:33:39.470
> 
> 标签：heroku

它与表中的自动递增 ID 有关吗？

# jquery - 当用作 JQuery 选择器时，'>' 是什么意思？

> ID：10900304
> 
> 赞同：1
> 
> 时间：2012-06-05T15:33:49.207
> 
> 标签：jquery

抱歉，如果这是一个愚蠢的问题，但使用搜索引擎很难找到，但是当用作选择器时，'>' 运算符是什么意思？

例如

```
$('div.form-input > label').... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:34:55.317

和 CSS 中的一样，直接在 div 中带有 class 的标签`form-input`

```
$('div.form-input label') // label can be anywhere inside the div

$('div.form-input > label') // label must be directly inside the div (at top level) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T15:36:38.777

它是 parent > child - 选择与第二个选择器匹配的所有元素，这些元素是与第一个选择器匹配的元素的子级。例如：

```
div.myclass > p.yourclass 
```

将选择 myclass 的 div 中的所有你的类的 p。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-05T15:36:16.910

```
jQuery('parent > child') 
```

说明：选择“parent”指定的元素的“child”指定的所有直接子元素。

[http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-05T15:35:15.740

与 css 选择器相同，直接子选择。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-05T15:35:41.793

它选择一个带有“form-input”类的div的子元素，它是一个标签。您可以在此处阅读有关子选择器的更多信息[http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-05T15:36:10.570

是`child`选择器。[在这里](http://css-tricks.com/child-and-sibling-selectors/)查看更多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-05T15:35:26.157

`div.form-input > label`选择器将`label`匹配`div.form-input`

# sql-server - 防止在列中指定值

> ID：10900306
> 
> 赞同：1
> 
> 时间：2012-06-05T15:34:04.393
> 
> 标签：sql-server

有没有办法防止在列中指定显式值？identity 属性防止指定显式值（只要 IDENTITY_INSERT 关闭），这是我想要的行为类型。

```
create table testguid (
    ID uniqueidentifier default newsequentialid() not null primary key
    ,somedate datetime
) 
```

[这里是约束还是触发？]

```
insert into testguid (somedate) values (getdate()) -- this is ok
insert into testguid (ID, somedate) values (newid(), getdate()) -- this is not ok 
```

我希望数据库插入值，但我想阻止以任何方式指定它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:39:55.923

您可以使用 INSTEAD OF TRIGGER 基本上重写 INSERT 语句，省略 ID 列。

```
CREATE TRIGGER dbo.testguid_beforeinsert
INSTEAD OF INSERT
AS
BEGIN
    SET NOCOUNT ON;

    INSERT dbo.testguid(somedate --, other columns
    ) SELECT GETDATE() --, other columns
    FROM inserted;
END
GO 
```

可能也想要 UPDATE 类似的东西。

# java - 使用hibernate anvers时如何创建自定义字段

> ID：10900310
> 
> 赞同：1
> 
> 时间：2012-06-05T15:34:16.210
> 
> 标签：java, spring, hibernate, auditing, change-tracking

我正在使用 spring 3.1、hibernate 4 开始一个新项目，并且需要跟踪应用程序上的任何活动。活动跟踪示例`who changed what?` `from what to what?`，`at which time?`我已经阅读了有关 hibernate anvers 的介绍性教程。对我来说，似乎更多的是数据历史而不是活动跟踪，除非我根本没有得到它。

有没有办法将自定义字段添加到该 *_aud 表以插入更多用户定义的表。像`date_created`, `last_modified`, `created_by`,`updated_by`有自己的`databefore`和`dataafter`有点字段。所以基本上我想添加`createdby`,`updatedby`到 anvers 创建的表

有没有办法做到这一点。如果是，请指出我正确的资源。

谢谢阅读 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:43:51.297

在 Envers 中，每个“生产”表都有一个对应的 *_AUD 表，用于存储实体的历史状态。还有一个全局 REVINFO ( `org.hibernate.envers.DefaultRevisionEntity`) 表，其中包含修订号、时间戳和自定义的用户定义列。可以在文档中找到显示如何扩展 DefaultRevisionEntity 的示例。目前无法自定义 *_AUD 表，但是 Envers 应该回答您提出的所有问题。

1.  谁改变了什么？- 将用户凭据存储在 REVINFO 表中。
2.  从什么到什么？- 这是一个很笼统的问题:)。尝试探索`org.hibernate.envers.AuditReader`和`org.hibernate.envers.query.AuditQueryCreator`.
3.  什么时候？- 时间戳存储在 REVINFO 表中。此时间戳反映用户提交更改的时间。

# android - Google I/O 应用程序“DashboardLayout.java”代码不适用于自定义视图

> ID：10900312
> 
> 赞同：1
> 
> 时间：2012-06-05T15:34:20.410
> 
> 标签：android, android-layout

根据 Google 设计模式，我一直在使用 Google 在 Google IO 应用程序中使用的[DashboardLayout.java文件来实现仪表板布局。](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/ui/widget/DashboardLayout.java)这在使用按钮时工作正常，但是一旦我添加自定义视图，由 DashboardLayout.java 文件生成的网格视图就会分崩离析：

在没有自定义视图的情况下工作：

![在此处输入图像描述](../Images/19b2e32f0581fbb18f6fd4bfaecb4ecc.png)

不使用自定义视图：

![在此处输入图像描述](../Images/4482103cb7ec4d0464bedef9ecc3ea11.png)

自定义视图的代码是：

```
public class Countdown extends View {

int viewWidth;
int viewHeight;
Paint textPaint;
Paint titlePaint;
Paint labelPaint;
Paint rectanglePaint;
PeriodFormatter daysFormatter;
PeriodFormatter hoursFormatter;
PeriodFormatter minutesFormatter;
PeriodFormatter secondsFormatter;
DateTimeZone frenchTimeZone;
DateTime expiry;
Context ctx;
static int[] rectWidth;
static int[] rectHeight;
boolean flag = true;

public Countdown(Context context) {
    super(context);
    ctx = context;
    init();
}

public Countdown(Context context, AttributeSet attrs) {
    super(context, attrs);
    ctx = context;
    init();
}

public Countdown(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    ctx = context;
    init();
}

private void init()
{
    rectWidth = new int[]{0,0,0,0};
    rectHeight = new int[]{0,0,0,0};

    textPaint = new Paint();
    titlePaint = new Paint();
    labelPaint = new Paint();
    rectanglePaint = new Paint();
    frenchTimeZone = DateTimeZone.forID("Europe/Paris");
    expiry = new DateTime(2012, 6, 17, 8, 30, frenchTimeZone);

    //setup paints
    //turn antialiasing on
    textPaint.setAntiAlias(true);
    int timerScaledSize = getResources().getDimensionPixelSize(R.dimen.text_size_dashboard_timer);
    textPaint.setTextSize(timerScaledSize);       
    textPaint.setColor(Color.WHITE);
    textPaint.setTextAlign(Align.CENTER);

    labelPaint.setAntiAlias(true);
    int labelScaledSize = getResources().getDimensionPixelSize(R.dimen.text_size_dashboard_timer_boxes_label);
    labelPaint.setTextSize(labelScaledSize);
    labelPaint.setColor(Color.BLACK);
    labelPaint.setTextAlign(Align.CENTER);
    labelPaint.setTypeface(Typeface.defaultFromStyle(Typeface.BOLD));

    titlePaint.setAntiAlias(true);
    int titleScaledSize = getResources().getDimensionPixelSize(R.dimen.text_size_dashboard_title);
    titlePaint.setTextSize(titleScaledSize);
    titlePaint.setTypeface(Typeface.defaultFromStyle(Typeface.BOLD));
    titlePaint.setColor(Color.WHITE);

    rectanglePaint.setAntiAlias(true);

    daysFormatter = new PeriodFormatterBuilder()
    .printZeroIfSupported()
    .minimumPrintedDigits(2)
    .appendDays()
    .toFormatter(); 

    hoursFormatter = new PeriodFormatterBuilder()
    .printZeroIfSupported()
    .minimumPrintedDigits(2)
    .appendHours()
    .toFormatter(); 

    minutesFormatter = new PeriodFormatterBuilder()
    .printZeroIfSupported()
    .minimumPrintedDigits(2)
    .appendMinutes()
    .toFormatter(); 

    secondsFormatter = new PeriodFormatterBuilder()
    .printZeroIfSupported()
    .minimumPrintedDigits(2)
    .appendSeconds()
    .toFormatter(); 

}

@Override
public void onDraw(Canvas canvas)
{
    DateTime now = new DateTime(); 

    Period p = new Period(now, expiry, PeriodType.dayTime());

    canvas.drawColor(Color.TRANSPARENT);

    if(flag)
    {
        // To ensure the rectangles will be wide enough for all numbers we cheat and initially set the width based upon 00.
        flag = false;
        drawTextRectangle(0, textPaint, labelPaint, canvas, "00", "", scaleForDensity(20, ctx), scaleForDensity(33, ctx));
        drawTextRectangle(1, textPaint, labelPaint, canvas, "00", "", scaleForDensity(53, ctx), scaleForDensity(33, ctx));
        drawTextRectangle(2, textPaint, labelPaint, canvas, "00", "", scaleForDensity(87, ctx), scaleForDensity(33, ctx));
        drawTextRectangle(3, textPaint, labelPaint, canvas, "00", "", scaleForDensity(120, ctx), scaleForDensity(33, ctx));     
    }

    String title = "Countdown";
    float textWidth = titlePaint.measureText(title);
    float titleStartPositionX = (viewWidth - textWidth) / 2;
    canvas.drawText(title, titleStartPositionX, viewHeight - scaleForDensity(5, ctx), titlePaint);

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.dashboard_counter);
    canvas.drawBitmap(bitmap, 0, 0, null);

    drawTextRectangle(0, textPaint, labelPaint, canvas, daysFormatter.print(p), "DAYS", scaleForDensity(20, ctx), scaleForDensity(33, ctx));
    drawTextRectangle(1, textPaint, labelPaint, canvas, hoursFormatter.print(p), "HRS", scaleForDensity(53, ctx), scaleForDensity(33, ctx));
    drawTextRectangle(2, textPaint, labelPaint, canvas, minutesFormatter.print(p), "MINS", scaleForDensity(87, ctx), scaleForDensity(33, ctx));
    drawTextRectangle(3, textPaint, labelPaint, canvas, secondsFormatter.print(p), "SECS", scaleForDensity(120, ctx), scaleForDensity(33, ctx));        

    invalidate();
}

private void drawTextRectangle(int index, Paint paint, Paint labelPaint, Canvas canvas, String text, String label,  float x, float y) {
    paint.setTextAlign(Align.CENTER);

    Rect bounds = new Rect();

    bounds = new Rect();

    paint.getTextBounds(text, 0, text.length(), bounds);

    if(rectWidth[index] == 0)
    {
        rectWidth[index] = Math.abs(bounds.right - bounds.left);
        rectWidth[index] += scaleForDensity(5, ctx);
    }

    if(rectHeight[index] == 0)
    {
        rectHeight[index] = Math.abs(bounds.bottom - bounds.top);
        rectHeight[index] += scaleForDensity(5, ctx);
    }

    bounds.left = (int) (x - (rectWidth[index] / 2));
    bounds.top = (int) (y - rectHeight[index]);
    bounds.right = bounds.left + rectWidth[index];
    bounds.bottom = (int) (bounds.top + rectHeight[index] + scaleForDensity(7, ctx));       

    Paint rectanglePaint = new Paint();
    rectanglePaint.setAntiAlias(true);
    rectanglePaint.setShader(new LinearGradient(bounds.centerX(), bounds.top, bounds.centerX(), bounds.bottom, 0xff8ed8f8, 0xff207d94, TileMode.MIRROR));

    RectF boundsF = new RectF(bounds);

    canvas.drawRoundRect(boundsF, 2f, 2f, rectanglePaint);

    canvas.drawText(text, x, y, paint);

    canvas.drawText(label, x, y + rectHeight[index], labelPaint);
}

public float scaleForDensity(float px, Context context)
{
    Resources resources = context.getResources();
    DisplayMetrics metrics = resources.getDisplayMetrics();
    return px * metrics.density + .5f;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    int width = measureWidth(widthMeasureSpec);
    int height = measureHeight(heightMeasureSpec, widthMeasureSpec);
    viewWidth = width;
    viewHeight = height;
    setMeasuredDimension(width, height);
}

private int measureWidth(int measureSpec)
{
        int result = 0;
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if (specMode == MeasureSpec.EXACTLY) {
            // We were told how big to be
            result = specSize;
        } else {
            // Measure the text
            result = measureSpec;
            if (specMode == MeasureSpec.AT_MOST) {
                // Respect AT_MOST value if that was what is called for by measureSpec
                result = Math.min(result, specSize);
            }
        }

    return result;
}

private int measureHeight(int measureSpecHeight, int measureSpecWidth) {
    int result = 0;
    int specMode = MeasureSpec.getMode(measureSpecHeight);
    int specSize = MeasureSpec.getSize(measureSpecHeight);

    if (specMode == MeasureSpec.EXACTLY) {
        // We were told how big to be
        result = specSize;
    } else {
        // Measure the text (beware: ascent is a negative number)
        result = viewWidth;
        /*if (specMode == MeasureSpec.AT_MOST) {
            // Respect AT_MOST value if that was what is called for by measureSpec
            result = Math.min(result, specSize);
        }*/
    }
    return result;
}
} 
```

我正在使用的 DashboardLayout 代码：

```
/**
 * Custom layout that arranges children in a grid-like manner, optimizing for even   horizontal and
* vertical whitespace.
*/
public class DashboardLayout extends ViewGroup {

private static final int UNEVEN_GRID_PENALTY_MULTIPLIER = 10;
boolean run = true;

private int mMaxChildWidth = 0;
private int mMaxChildHeight = 0;

public DashboardLayout(Context context) {
    super(context, null);
}

public DashboardLayout(Context context, AttributeSet attrs) {
    super(context, attrs, 0);
}

public DashboardLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    if(run)
    {
        run = false;

        mMaxChildWidth = 0;
        mMaxChildHeight = 0;

        // Measure once to find the maximum child size.

        int childWidthMeasureSpec = MeasureSpec.makeMeasureSpec(
                MeasureSpec.getSize(widthMeasureSpec), MeasureSpec.AT_MOST);
        int childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(
                MeasureSpec.getSize(widthMeasureSpec), MeasureSpec.AT_MOST);

        final int count = getChildCount();
        for (int i = 0; i < count; i++) {
            final View child = getChildAt(i);
            if (child.getVisibility() == GONE) {
                continue;
            }

            child.measure(childWidthMeasureSpec, childHeightMeasureSpec);

            mMaxChildWidth = Math.max(mMaxChildWidth, child.getMeasuredWidth());
            mMaxChildHeight = Math.max(mMaxChildHeight, child.getMeasuredHeight());
        }

        // Measure again for each child to be exactly the same size.

        childWidthMeasureSpec = MeasureSpec.makeMeasureSpec(
                mMaxChildWidth, MeasureSpec.EXACTLY);
        childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(
                mMaxChildHeight, MeasureSpec.EXACTLY);

        for (int i = 0; i < count; i++) {
            final View child = getChildAt(i);
            if (child.getVisibility() == GONE) {
                continue;
            }

            child.measure(childWidthMeasureSpec, childHeightMeasureSpec);
        }
    }

    setMeasuredDimension(
            resolveSize(mMaxChildWidth, widthMeasureSpec),
            resolveSize(mMaxChildHeight, heightMeasureSpec));
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    int width = r - l;
    int height = b - t;

    final int count = getChildCount();

    // Calculate the number of visible children.
    int visibleCount = 0;
    for (int i = 0; i < count; i++) {
        final View child = getChildAt(i);
        if (child.getVisibility() == GONE) {
            continue;
        }
        ++visibleCount;
    }

    if (visibleCount == 0) {
        return;
    }

    // Calculate what number of rows and columns will optimize for even horizontal and
    // vertical whitespace between items. Start with a 1 x N grid, then try 2 x N, and so on.
    int bestSpaceDifference = Integer.MAX_VALUE;
    int spaceDifference;

    // Horizontal and vertical space between items
    int hSpace = 0;
    int vSpace = 0;

    int cols = 1;
    int rows;

    while (true) {
        rows = (visibleCount - 1) / cols + 1;

        hSpace = ((width - mMaxChildWidth * cols) / (cols + 1));
        vSpace = ((height - mMaxChildHeight * rows) / (rows + 1));

        spaceDifference = Math.abs(vSpace - hSpace);
        if (rows * cols != visibleCount) {
            spaceDifference *= UNEVEN_GRID_PENALTY_MULTIPLIER;
        }

        if (spaceDifference < bestSpaceDifference) {
            // Found a better whitespace squareness/ratio
            bestSpaceDifference = spaceDifference;

            // If we found a better whitespace squareness and there's only 1 row, this is
            // the best we can do.
            if (rows == 1) {
                break;
            }
        } else {
            // This is a worse whitespace ratio, use the previous value of cols and exit.
            --cols;
            rows = (visibleCount - 1) / cols + 1;
            hSpace = ((width - mMaxChildWidth * cols) / (cols + 1));
            vSpace = ((height - mMaxChildHeight * rows) / (rows + 1));
            break;
        }

        ++cols;
    }

    // Lay out children based on calculated best-fit number of rows and cols.

    // If we chose a layout that has negative horizontal or vertical space, force it to zero.
    hSpace = Math.max(0, hSpace);
    vSpace = Math.max(0, vSpace);

    // Re-use width/height variables to be child width/height.
    width = (width - hSpace * (cols + 1)) / cols;
    height = (height - vSpace * (rows + 1)) / rows;

    int left, top;
    int col, row;
    int visibleIndex = 0;
    for (int i = 0; i < count; i++) {
        final View child = getChildAt(i);
        if (child.getVisibility() == GONE) {
            continue;
        }

        row = visibleIndex / cols;
        col = visibleIndex % cols;

        left = hSpace * (col + 1) + width * col;
        top = vSpace * (row + 1) + height * row;

        child.layout(left, top,
                (hSpace == 0 && col == cols - 1) ? r : (left + width),
                (vSpace == 0 && row == rows - 1) ? b : (top + height));
        ++visibleIndex;
    }
}
} 
```

最后但并非最不重要的布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<TextView
    style="@style/HeaderTextView"
    android:text="@string/header_dashboard" />

<View
    android:layout_width="fill_parent"
    android:layout_height="@dimen/content_divider_height"
    android:layout_marginLeft="@dimen/content_divider_margin"
    android:layout_marginRight="@dimen/content_divider_margin"
    android:background="@color/content_divider_colour" /> 

<com.a.b.ui.DashboardLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    style="@style/Container">

    <!-- The custom view that once un-commented cause the problem -->
    <!-- <com.a.b.widget.Countdown
        style="@style/DashboardButton" /> -->

    <Button android:id="@+id/home_btn_news"
        style="@style/DashboardButton"
        android:text="A"
        android:drawableTop="@drawable/dashboard_counter" />

    <Button android:id="@+id/home_btn_feed"
        style="@style/DashboardButton"
        android:text="B"
        android:drawableTop="@drawable/dashboard_counter" />

    <Button android:id="@+id/home_btn_guide"
        style="@style/DashboardButton"
        android:text="C"
        android:drawableTop="@drawable/dashboard_counter" />

    <Button android:id="@+id/home_btn_sessions"
        style="@style/DashboardButton"
        android:text="D"
        android:drawableTop="@drawable/dashboard_counter" />

    <Button android:id="@+id/home_btn_events"
        style="@style/DashboardButton"
        android:text="E"
        android:drawableTop="@drawable/dashboard_counter" />

</com.a.b.ui.DashboardLayout>

</LinearLayout> 
```

对发布的代码量表示歉意，但我希望它可以更容易地查看问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:34:41.313

此后，我在自定义视图的 onMeasureWidth 函数中发现了该错误。代替：

```
 private int measureWidth(int measureSpec)
 {
    int result = 0;
    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getSize(measureSpec);

    if (specMode == MeasureSpec.EXACTLY) {
        // We were told how big to be
        result = specSize;
    } else {
        // Measure the text
        result = measureSpec;
        if (specMode == MeasureSpec.AT_MOST) {
            // Respect AT_MOST value if that was what is called for by measureSpec
            result = Math.min(result, specSize);
        }
    }

return result;
} 
```

它应该是：

```
private int measureWidth(int measureSpec)
{
        int result = 0;
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if (specMode == MeasureSpec.EXACTLY) {
            // We were told how big to be
            result = specSize;
        } else {
            // Measure the text
            result = viewWidth;

        }

    return result;
} 
```

# c++ - 使用 Boost.build 构建并链接到 boost

> ID：10900313
> 
> 赞同：3
> 
> 时间：2012-06-05T15:34:24.417
> 
> 标签：c++, boost, bjam, boost-build

当我使用 boost lib 开始一个项目时，我的设置似乎不起作用：

主.cpp：

```
#include <boost/asio.hpp>
int main(int argc, char* argv[])
{
    boost::asio::io_service io_service_;
    return 0;
} 
```

果酱文件：

```
exe node
: main.cpp ; 
```

`bjam`将产生：

```
...found 30 targets...
...updating 2 targets...
gcc.compile.c++ bin/gcc-4.7.0/debug/main.o
gcc.link bin/gcc-4.7.0/debug/node
bin/gcc-4.7.0/debug/main.o: In function `__static_initialization_and_destruction_0':
/usr/include/boost/system/error_code.hpp:214: undefined reference to `boost::system::generic_category()'
/usr/include/boost/system/error_code.hpp:215: undefined reference to `boost::system::generic_category()'
/usr/include/boost/system/error_code.hpp:216: undefined reference to `boost::system::system_category()'
bin/gcc-4.7.0/debug/main.o: In function `boost::system::error_code::error_code()':
/usr/include/boost/system/error_code.hpp:315: undefined reference to `boost::system::system_category()'
bin/gcc-4.7.0/debug/main.o: In function `boost::asio::error::get_system_category()':
/usr/include/boost/asio/error.hpp:216: undefined reference to `boost::system::system_category()'
bin/gcc-4.7.0/debug/main.o: In function `boost::asio::detail::posix_tss_ptr_create(unsigned int&)':
/usr/include/boost/asio/detail/impl/posix_tss_ptr.ipp:34: undefined reference to `pthread_key_create'
bin/gcc-4.7.0/debug/main.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::task_io_service, boost::asio::detail::task_io_service::thread_info>::context>::~posix_tss_ptr()':
/usr/include/boost/asio/detail/posix_tss_ptr.hpp:48: undefined reference to `pthread_key_delete'
bin/gcc-4.7.0/debug/main.o: In function `boost::asio::detail::posix_tss_ptr<boost::asio::detail::call_stack<boost::asio::detail::strand_service::strand_impl, unsigned char>::context>::~posix_tss_ptr()':
/usr/include/boost/asio/detail/posix_tss_ptr.hpp:48: undefined reference to `pthread_key_delete'
collect2: error: ld returned 1 exit status

    "g++"    -o "bin/gcc-4.7.0/debug/node" -Wl,--start-group "bin/gcc-4.7.0/debug/main.o"  -Wl,-Bstatic  -Wl,-Bdynamic  -Wl,--end-group -g 

...failed gcc.link bin/gcc-4.7.0/debug/node...
...failed updating 1 target...
...updated 1 target... 
```

似乎 bjam 正确找到了标头，但没有找到库。所以我试图告诉 bjam 在哪里可以找到 boost ：

果酱文件：

```
use-project /boost : /usr/lib/boost ;

exe node
    : main.cpp
      /boost//system
    ; 
```

但是 bjam 现在将产生：

```
/usr/share/boost-build/build/project.jam:270: in find-jamfile from module project
error: Unable to load Jamfile.
error: Could not find a Jamfile in directory '/usr/lib/boost'.
error: Attempted to find it with pattern '[Bb]uild.jam [Jj]amfile.v2 [Jj]amfile [Jj]amfile.jam'.
error: Please consult the documentation at 'http://www.boost.org'.
/usr/share/boost-build/build/project.jam:290: in load-jamfile from module project
/usr/share/boost-build/build/project.jam:68: in project.load from module project
/usr/share/boost-build/build/project.jam:718: in project.use from module project
/usr/share/boost-build/build/project.jam:94: in load-used-projects from module project
/usr/share/boost-build/build/project.jam:79: in load from module project
/usr/share/boost-build/build/project.jam:170: in project.find from module project
/usr/share/boost-build/build-system.jam:248: in load from module build-system
/usr/share/boost-build/kernel/modules.jam:261: in import from module modules
/usr/share/boost-build/kernel/bootstrap.jam:132: in boost-build from module
/usr/share/boost-build/boost-build.jam:1: in module scope from module 
```

它理解 bjam 想要重建 boost，这就是它在`/usr/lib/boost`.

有什么遗漏吗？我怎么能告诉 bjam 要链接的缺失库在哪里？

前段时间，我用

```
LINKLIBS = -lboost_system -lboost_filesystem ; 
```

但我不知道如何为 Boost.build v2 翻译这个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:04:27.443

最后，我得到了解决方案。我希望`<linkflags>`能够获取多个库，但我错了。

这是修复，我将 Jamfile 更改为：

```
exe node
: main.cpp
: <linkflags>-lpthread
  <linkflags>-lboost_system
; 
```

# asp.net - ASP.NET Membership.CreateUser 似乎创建了多个用户记录

> ID：10900317
> 
> 赞同：1
> 
> 时间：2012-06-05T15:34:41.353
> 
> 标签：asp.net, security

# 底线在前面

对于每个用户映射到 aspnet_Applications 表中指定的每个应用程序，我是否应该在 aspnet_Users 中看到多个用户记录？

# 情况

我有一个使用 ASP.NET 表单安全性的 Web 应用程序。创建了许多用户后，我决定查看指定为我的提供者的 AspApplicationServices 数据库。在 aspnet_Applications 表中有两个应用程序记录（“/”和“/MyAppNameHere”），每个记录都有其唯一的应用程序 ID。

在 aspnet_Users 表中，我注意到我的用户数是预期的两倍。两个应用程序各一个（即每个用户都有一条记录，指定“/”和“/MyAppNameHere”应用程序记录的ID）。

这是它应该工作的方式吗？我环顾四周并没有发现任何提及此活动，或者它是否是设计的以及它可能用于什么。如果是设计使然，我必须得出结论，用户信息的任何更改都将传播到所有匹配的用户记录，而不仅仅是“根”或其他。

注意：这些用户是通过应用程序（使用 Membership.Create()）和配置小应用程序（Security->Create User）创建的。

# 网络配置

```
<roleManager enabled="true">
  <providers>
    <clear />
    <add applicationName="/" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices"  />
    <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" />
  </providers>
</roleManager> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:05:57.497

原因是您的成员资格提供程序和角色管理器提供程序中有不同的应用程序名称。

您将会员提供商的应用程序名称设置为“/MyAppNameHere”。最初，您没有设置角色管理器提供程序的应用程序名称。默认情况下，它使用[http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.applicationname.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.applicationname.aspx)中记录的[ApplicationVirtualPath](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.applicationvirtualpath.aspx)。通常它是您网站的虚拟路径（在许多情况下为“/”）。

因此，当您调用 Membership.CreateUser() 时，它会在 aspnet_users 中创建两条记录。一个用于会员应用程序 ID，一个用于角色提供者的应用程序 ID。这两条记录具有相同的用户名，但具有不同的用户 ID（每个应用程序 ID 一个）。

The call also creates one record in aspnet_membership table (application id, userid, password etc). the Applicatin id and user id are from the record corresponding to the membership provider's application name, i.e., "/MyAppNameHere".

When you create a user role using call such as Roles.AddUserRole(), it will create a record in aspnet_UsersInRoles that uses the user id corresponding to the application id of role manager provider.

I couldn't find official document but [http://weblogs.asp.net/gurusarkar/archive/2010/01/09/asp-net-mebership-creates-two-users-in-aspnet-users-table.aspx](http://weblogs.asp.net/gurusarkar/archive/2010/01/09/asp-net-mebership-creates-two-users-in-aspnet-users-table.aspx) has some explanation. [This diagram](http://msdn.microsoft.com/en-us/library/Aa478948.asp2prvdr0102l%28l=en-us%29.gif) helps understand the table relationships.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T19:55:47.467

`RoleProvider`您很可能在没有正确配置开箱即用的情况下添加具有角色的用户。

如果您未在 web.config 部分中指定 an `ApplicationName`，`roleManager`它将`"/"`在您尝试创建用户时使用默认应用程序名称创建另一个用户。

```
<system.web>
    <roleManager enabled="true">
        <providers>
            <clear/>
            <add name="AspNetSqlRoleProvider"
                 connectionStringName="[ConnectionStringName]"
                 applicationName="[ApplicationName]"
                 type="System.Web.Security.SqlRoleProvider" />
        </providers>
    </roleManager>
</system.web> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:34:27.487

在 asawyer 用他的评论发布答案之前，我只会自己标记答案。

看起来多条记录将特定于应用程序的用户联系在一起。创建了一般记录，并创建了与应用程序相关的记录，大概是为了提供应用程序之间的连续性。

# python - 在 Web 服务器上将 Python 文件相互导入

> ID：10900319
> 
> 赞同：0
> 
> 时间：2012-06-05T15:34:44.843
> 
> 标签：python, sqlite, web

使用 CGI 脚本，我可以在我的服务器上运行单个 Python 文件，然后在我的网站上使用它们的输出。

但是，我的计算机上有一个更复杂的程序，我想在服务器上运行。它涉及我自己编写的几个模块，以及用 Python 构建的 SQLITE3 模块。该程序涉及从 .db 文件中读取，然后使用该数据。

从浏览器运行我的主要 Python 可执行文件后，我会收到“500：内部服务器错误”错误。

我只是想知道是否需要更改权限设置中的某些内容或允许 Python 文件导入其他 Python 文件或从 .db 文件中读取的内容。

我很感激任何指导，如果我不清楚我对这个网站的任何新手和一般的编码，我很抱歉。

跟进：所以，据我所知，在服务器上导入 Python 文件本身并没有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:44:57.083

您可以通过在 CGI 脚本的开头添加以下行来获得大量错误消息：

```
import cgitb
cgitb.enable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:38:44.567

我建议您查看服务器日志以找出导致 500 错误的原因。

# c++ - 未在范围内声明，即使在 .h 中声明

> ID：10900321
> 
> 赞同：5
> 
> 时间：2012-06-05T15:34:48.940
> 
> 标签：c++, header, struct, scope

我一直坚持这个，我的老师甚至不知道发生了什么。如果有人可以请帮助我，将不胜感激。

我已经在 Line 结构的头文件中声明了 item。但是，在 Line::display() 方法中调用它时，我收到一条错误消息，指出该变量未在范围内声明。我已经向我的老师和我的同龄人展示过，但似乎没有人知道解决方案。

这是我的.h：

```
//Line.h
#define MAX_CHARS 40
struct Line {
    public:
    bool set(int n, const char* str);
    void display() const;

    private:
    char item[MAX_CHARS];
    int no;
    }; 
```

这是我的 .cpp 文件。

```
// Line.cpp
#include "Line.h"
#include <iostream>
using namespace std;

#define MAX_CHARS 40

void Line::display() const {
    cout << no << ' ' << item << endl;
} 
```

对此的任何帮助都很棒。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T15:38:10.483

如果这是您的实际代码，您可能是从其他地方获取标题。尝试：

```
#include "C:\\fullPathToHeader\\Line.h"
#include <iostream>
using namespace std;

void Line::display() const {
    cout << no << ' ' << item << endl;
} 
```

还：

*   不要`MAX_CHARS`在`cpp`文件中重新定义。
*   对标题使用包含防护。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-06-05T15:39:24.040

要使 Line::display const 意味着您不需要实例变量数据。

```
// Line.cpp
#include "Line.h"
#include <iostream>
using namespace std;

void Line::display()
{
    cout << no << ' ' << Line::item << endl;
} 
```

# sql-server-2008 - 新行/换行符之前的 MS SQL 反斜杠删除换行符

> ID：10900330
> 
> 赞同：1
> 
> 时间：2012-06-05T15:35:21.693
> 
> 标签：sql-server-2008, asp-classic, escaping

我正在使用经典的 ASP 并试图简单地将一些用户输入插入到我的 MS SQL 2008 数据库中。这是我基本上每天都在做的事情，但我认为我以前从未经历过这个错误。

我得到的错误是，如果用户以反斜杠结束一行文本，并在下面开始一个新行，则在数据存储到数据库后，反斜杠和换行符都会丢失。

如果我尝试以下语句，从 ASP 文件硬编码：

```
UPDATE TBLarticle_text SET Introduction = 'Text on first line \" & vbCrLf & " text on second line' WHERE ArticleGuid = 28 
```

结果数据没有反斜杠或换行符。如果存储在变量中并打印在页面上，则该字符串是正确的。

这是示例用户输入（通常来自表单，但并不真正相关）。输入：

```
Text on first line \
text on second line 
```

...存储为：

```
Text on first line  text on second line 
```

如果反斜杠后跟换行符以外的任何内容，我看不到任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-13T16:49:44.763

我知道这很旧，但我刚刚看到一篇讨论此问题的 MS 知识库文章：http: [//support.microsoft.com/kb/164291/en-us](http://support.microsoft.com/kb/164291/en-us)。总而言之，这三个字符加`\<CR><LF>`在一起是一些奇怪的转义序列，在插入或更新时需要将所有出现的 替换为`\<CR><LF>`因为`\\<CR><LF><CR><LF>`第一个反斜杠转义了奇怪的转义序列，`\\<CR><LF><CR><LF>`即接下来的三个字符`\<CR><LF>`附加`<CR><LF>`项将回车符放回原位。烦人，是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:56:14.540

我看到了类似的问题。我想说解决此问题的最佳方法是不要让 ASP 将此类字符串传递给 SQL Server。您可以通过简单地替换该字符序列并在这一行的末尾注入一个空格来清理它（用户不太可能注意到）：

```
sql = REPLACE(sql, "\" & vbCrLf, "\ " & vbCrLf) 
```

您不必使用 ASP 或 VBScript 来观察此行为：

```
CREATE TABLE #floobar(i INT, x VARCHAR(255));

INSERT #floobar SELECT 1, 'foo \
bar';
INSERT #floobar SELECT 2, 'foo \\
bar';
INSERT #floobar SELECT 3, 'foo 
bar';

SELECT * FROM #floobar; 
```

我不知道您是否会让 Microsoft 修复此问题以不将此字符序列视为特殊，因此“修复”将解决它。您可能还需要注意非传统的 CR/LF，例如 CHR(10) 或 CHR(13) 本身，或者 vbTab (Chr(9)))。

# jquery - struts2 jquery 网格插件：动态设置宽度

> ID：10900337
> 
> 赞同：1
> 
> 时间：2012-06-05T15:35:42.857
> 
> 标签：jquery, jquery-plugins, width, jqgrid, struts2

我正在使用 struts2 jquery 网格插件

```
 <@sjg.grid
    ...
    id="mygrid"
    shrinkToFit="true"
    resizable="true"
    shrinkToFit="true"
    width= "1000"
    ... 
```

这会在我的页面上显示一个部门内的表格（即 div="foo"）。“foo”分区是随着屏幕分辨率的变化而变化的。我需要做的是将网格的宽度动态更新为 foo 分区的大小。IE：

```
$(document).ready(function() {
    var foo_width = $("#foo").width();
    // dynamically update mygrid width to foo_width
} 
```

任何想法？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:25:09.797

刚刚发现struts2-jquery 插件中有*autowidth属性：*

```
<@sjg.grid
    ...
    id="mygrid"
    shrinkToFit="true"
    resizable="true"
    shrinkToFit="true"
    width= "1000"
    ...
    autowidth="true" 
```

该*autowidth*属性自动将网格的宽度设置为父元素之一。此处的文档[http://code.google.com/p/struts2-jquery/wiki/GridTag](http://code.google.com/p/struts2-jquery/wiki/GridTag)

# jlayer - 无法使用滚动窗格使 Jlayer 更改位置

> ID：10900341
> 
> 赞同：1
> 
> 时间：2012-06-05T15:35:53.770
> 
> 标签：jlayer

我有一个 jlayer 装饰一个添加到 jscrollpane 上的面板。当我向下滚动时，面板组件以正确的方式滚动，但我无法让我的 jlayer 随之移动。关于如何做到这一点的任何想法？

```
jlayer = new JLayer<JComponent>(scrollPane, ui);
pane.add(jlayer); 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:51:00.783

我通过在新的 JScrollPane 上添加 jlayer 找到了解决方案：

```
jlayer = new JLayer<JComponent>(scrollPane, ui);
JScrollPane scroll=new JScrollPane(jlayer);
pane.add(scroll); 
```

# c++ - 标准::数组 到 std::string

> ID：10900345
> 
> 赞同：25
> 
> 时间：2012-06-05T15:36:07.587
> 
> 标签：c++, arrays, string, c++11, std

从 a 转换为 a 的最佳方法是`std::array<char, N>`什么`std::string`？

我尝试过制作模板方法，但没有运气。我认为我的 C++ 技能还达不到标准。在 C++ 中有没有一种惯用的方式来做到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-05T15:38:11.903

我不会说这是“最好的方法”，但*一种方法*是使用`std::string`的[迭代器构造函数](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)：

```
std::array<char, 10> arr;
... // fill in arr
std::string str(std::begin(arr), std::end(arr)); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-26T16:14:44.330

如果数组中有一个以空字符结尾的字符串，那么：

```
std::array<char, 4> arr = {'a','b','c',0};
std::string str(arr.data()); 
```

# android - EditText & TextChangeListener

> ID：10900348
> 
> 赞同：1
> 
> 时间：2012-06-05T15:36:11.250
> 
> 标签：android, android-edittext

我需要你的帮助。我有 EditText 字段，它充当搜索字段，用于搜索列表中的许多项目。现在我使用 TextWatcher 的 afterTextChanged(Editable s) 方法，但它对我来说并不完美。在快速输入和擦除之后的某些时候，下一个搜索过程并不涉及用户输入的所有文本。原因是在漫长的搜索过程中，我无法缩短它。就我而言，我需要知道，wnen 用户完全结束了他的输入，但是 afterTextChanged() 处理每个符号更改。我会欣赏任何想法。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:26:38.473

我猜您正在使用 a 是`TextWatcher`因为您想进行实时搜索。在这种情况下，您无法知道用户何时完成输入，但您可以限制搜索频率。

这是一些示例代码：

```
searchInput.addTextChangedListener(new TextWatcher()
{
    Handler handler = new Handler();
    Runnable delayedAction = null;

    @Override
    public void onTextChanged( CharSequence s, int start, int before, int count)
    {}

    @Override
    public void beforeTextChanged( CharSequence s, int start, int count, int after)
    {}

    @Override
    public void afterTextChanged( final Editable s)
    {
        //cancel the previous search if any
        if (delayedAction != null)
        {
            handler.removeCallbacks(delayedAction);
        }

        //define a new search
        delayedAction = new Runnable()
        {
            @Override
            public void run()
            {
                //start your search
                startSearch(s.toString());
            }
        };

        //delay this new search by one second
        handler.postDelayed(delayedAction, 1000);
    }
}); 
```

知道输入是否结束的唯一方法是让用户按下回车键或搜索按钮或其他东西。您可以使用以下代码侦听该事件：

```
searchInput.setOnEditorActionListener(new OnEditorActionListener()
{

    @Override
    public boolean onEditorAction( TextView v, int actionId, KeyEvent event)
    {
        switch (actionId)
        {
        case EditorInfo.IME_ACTION_SEARCH:
            //get the input string and start the search
            String searchString = v.getText().toString();
            startSearch(searchString);
            break;
        default:
            break;
        }
        return false;
    }
}); 
```

只需确保添加`android:imeOptions="actionSearch"`到`EditText`布局文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:38:21.263

你需要的是 TextWatcher

[http://developer.android.com/reference/android/text/TextWatcher.html](http://developer.android.com/reference/android/text/TextWatcher.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:31:20.563

我通常这样做是使用`onFocusChange`

```
editText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (!hasFocus) {
            // Do your thing here
        }
    }
}); 
```

这有一个缺点，即用户必须离开edittext字段，所以我不确定它是否适合你想要做的事情......

# java - 3.0 之前版本中异步 Servlet 的解决方案？

> ID：10900351
> 
> 赞同：1
> 
> 时间：2012-06-05T15:36:22.160
> 
> 标签：java, servlets, asynchronous

我有一个长时间运行的任务（报告），它会在开始返回数据之前超过任何 TCP 连接超时。异步 servlet（在 Servlets 3.0 中引入）正是我所需要的，但是我仅限于 Servlet v2.4。有没有“自己动手”的解决方案？我正在做的事情感觉被黑了——我在一个线程中异步启动任务，然后立即返回客户端。然后客户端每隔几秒轮询一次（使用 ajax），并检查此任务 ID 的“就绪”状态（静态列表维护它们的状态和线程处理的对象的一些句柄）。准备就绪后，我将输出流注入工作对象，以便线程可以将结果写回客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:44:03.990

您可以实现 Reverse ajax 技术，这意味着您无需多次轮询以获得响应，而是在任务完成后获得响应。[这里有一个使用DWR](http://directwebremoting.org/dwr/documentation/reverse-ajax/index.html)来实现反向 ajax 技术的快速解决方案。但是你应该保持静态列表的使用。如果您的后台任务业务逻辑很复杂，您可以使用 ESB 或更复杂的东西。

# c - Haskell FFI - 你能从 Haskell 数据结构中获得 C 指针吗？

> ID：10900354
> 
> 赞同：2
> 
> 时间：2012-06-05T15:36:40.753
> 
> 标签：c, haskell, ffi

我有很多 C 结构，如

```
typedef struct {
    unsigned int a;
    unsigned int b;
} StructA; 
```

还有很多功能，比如

```
void doSomethingWith(StructA*,StructB*,StructC*); 
```

有没有一种简单的方法可以用 Haskell FFI 调用这些函数？就像，有什么东西表现得像 C 中的 & 运算符吗？（我想没有，但如果有我想知道）。我*是否*必须使 Haskell side`data`的可存储实例（我没有这些结构的任何构造函数）。

另外：如果我必须传递一个结构而不是一个结构指针（不是一个假设的问题，我有一些这样的函数 - 这不是我的代码，所以我无能为力），我可以只传递结构代替？就像我想打电话一样

```
void function(StructA); 
```

我可以这样做吗

```
foreign import ccall "function" :: CUInt -> CUInt -> IO() 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:59:38.140

要将 Haskell 数据的引用传递给 C，其中内存分配在 Haskell 堆中，C 将直接对数据进行操作，您需要：

*   确保它在内存中具有正确的形状（通过[`Storable`](http://hackage.haskell.org/packages/archive/base/4.3.0.0/doc/html/Foreign-Storable.html#t%3aStorable)将 A 映射到与 相同的字节结构的实例`StructA`）。
*   [通过mallocForeignPtr](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Foreign.html#v%3amallocForeignPtr)在 Haskell 堆上分配和填充固定内存

这种方法有几个后果需要考虑：

*   一旦您删除了对 ForeignPtr 的所有引用，GHC 将取消分配该值——因此您需要确保 C 端不会再次触及它
*   你让 C 把 Haskell 堆上的东西弄乱了，所以要确保它是正确的

其他选项：

*   通过 a 传递对 C 的不透明引用`StablePtr`
*   在 C 端分配和内存，并使用终结器来释放它。

# ios - 在 iOS 中存储一个 ViewController

> ID：10900360
> 
> 赞同：1
> 
> 时间：2012-06-05T15:37:03.373
> 
> 标签：ios, xcode, store

我有 3 个通过滑动手势切换的视图控制器（如旋转木马）。数据是动态的，所以无论如何要存储视图控制器，所以当我滑回它时，它不必重新加载数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:42:39.883

您不需要存储，只是不要释放它们另一种确保您不释放它们的方法

在您的应用委托 .h 文件中

添加属性

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    NSMutableArray *viewControllers;
}
@property (retain, nonatomic) NSMutableArray *viewControllers; 
```

在 .m 文件中合成它并分配在`didFinishLaunchingWithOptions`

```
self.viewControllers = [[NSMutableArray alloc] init]; 
```

现在将所有视图控制器添加到这个可变数组中

```
AppDelegate *delegate = [UIApplication sharedApplication].delegate;
[delegate.viewControllers addObject:myViewController]; 
```

现在，当您想使用您拥有的任何视图控制器时。你可以从

```
AppDelegate *delegate = [UIApplication sharedApplication].delegate;
myViewContoller = [delegate.viewControllers objectAtIndex:0]; 
```

# algorithm - 运行彩票的pythonic方式是什么？

> ID：10900370
> 
> 赞同：2
> 
> 时间：2012-06-05T15:37:37.800
> 
> 标签：algorithm, python

我需要从加权集中选择几个随机项目。重量较高的物品更有可能被选中。我决定在抽签后对此进行建模。我觉得我的解决方案可以制作出好的 C++，但我不认为它可以制作出好的 python。

这样做的pythonic方式是什么？

```
def _lottery_winners_by_participants_and_ticket_counts(participants_and_ticket_counts, number_of_winners):
    """
    Returns a list of winning participants in a lottery. In this lottery,
    participant can have multiple tickets, and participants can only win
    once.
    participants_and_ticket_counts is a list of (participant, ticket_count)
    number_of_winners is the maximum number of lottery winners
    """

    if len(participants_and_ticket_counts) <= number_of_winners:
        return [p for (p, _) in participants_and_ticket_counts]

    winners = []

    for _ in range(number_of_winners):
        total_tickets = sum(tc for (_, tc) in participants_and_ticket_counts)
        winner = random.randrange(0, total_tickets)

        ticket_count_offset = 0
        for participant_ticket_count in participants_and_ticket_counts:
            (participant, ticket_count) = participant_ticket_count

            if winner < ticket_count + ticket_count_offset:
                winners.append(participant)
                participants_and_ticket_counts.remove(participant_ticket_count)
                break

            ticket_count_offset += ticket_count

    return winners 
```

* * *

编辑：对不起，我之前忘记了，但重量是一个整数，可能是数千。

* * *

**编辑：**我想我有基于@Flo 评论的最终解决方案

笔记

*   我在 Python 2.7 中工作，所以我创建了自己的累积（）。它的工作方式与 Python 3 中的 accumulate() 不同（我认为更好）。我的版本可以从基于 add 函数的元组迭代中累积。

*   我也有特殊的知识，participants_and_ticket_counts 是一个可变列表，在 _lottery_winners_by_participants_and_ticket_counts() 被调用后不会被使用。这就是为什么我可以 pop() 它。

这是我的解决方案：

```
def _lottery_winners_by_participants_and_ticket_counts(participants_and_ticket_counts, number_of_winners):
    """
    Returns a list of winning participants in a lottery. In this lottery,
    participant can have multiple tickets, and participants can only win once.
    participants_and_ticket_counts is a list of (participant, ticket_count)
    number_of_winners is the maximum number of lottery winners
    """
    def _accumulate(iterable, func):
        total = 0
        for element in iterable:
            total = func(total, element)
            yield total

    if len(participants_and_ticket_counts) <= number_of_winners:
        return list(winner for (winner, _) in participants_and_ticket_counts)

    winners = list()
    for _ in range(number_of_winners):
        accumulation = list(_accumulate(participants_and_ticket_counts, lambda total, ptc: total + ptc[1]))
        winning_number = random.randrange(0, accumulation[-1])
        index_of_winner = bisect.bisect(accumulation, winning_number)
        (winner, _) = participants_and_ticket_counts.pop(index_of_winner)
        winners.append(winner)
    return winners 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:51:21.117

[numpy.random.choice 对此](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.choice.html)有一个很好的解决方案。以下是您可以使用它的方法：

```
>>> import numpy as np
>>> from numpy.random import choice
>>> names = ['Harry', 'Sally', 'Joe', 'Bob', 'Angela', 'Jack', 'Jill', 'Jeff']
>>> weights = [1,4,6,3,5,7,10,14]
>>> p = np.array(weights, dtype=float) / sum(weights)
>>> p
array([ 0.02,  0.08,  0.12,  0.06,  0.1 ,  0.14,  0.2 ,  0.28])

>>> choice(names, size=5, p=p)
array(['Jill', 'Jack', 'Jeff', 'Jeff', 'Angela'], 
      dtype='|S6')
>>> choice(names, size=5, p=p)
array(['Jill', 'Jack', 'Joe', 'Jill', 'Sally'], 
      dtype='|S6')
>>> choice(names, size=5, p=p)
array(['Jack', 'Angela', 'Joe', 'Sally', 'Jill'], 
      dtype='|S6') 
```

但是，这个函数是在 numpy 1.7 中添加的。如果你有旧版本，你可以复制函数： http: [//pastebin.com/F5gti0qJ](http://pastebin.com/F5gti0qJ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:15:00.433

这个怎么样？

```
def lottery(participant_and_ticket_count, number_of_winners):
    # Creates list where each person is represented multiple times based on the number of tickets they have.
    population = [person for (person, count) in participant_and_ticket_count for i in range(count)]

    winners = []

    for i in range(number_of_winners):
        try:
            winner = random.choice(population)
        except IndexError:
            # There aren't enough people in the lottery, so return the results early.
            return winners
        winners.append(winner)

        # Remove the winner from the lottery to prevent duplication.
        population = [person for person in population if person != winner]

    return winners 
```

样品运行：

```
>>> foo = [('Alex', 5),
           ('Betty', 1),
           ('Carl', 2),
           ('Daniella', 10)]
>>> lottery(foo, 2)
['Daniella', 'Alex']
>>> lottery(foo, 2)
['Alex', 'Daniella']
>>> lottery(foo, 2)
['Daniella', 'Betty']
>>> lottery(foo, 9)
['Daniella', 'Alex', 'Carl', 'Betty'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:30:51.003

```
>>> from random import shuffle, choice
>>> 
>>> def lottery_winners(players, win_number):
    choosefrom = sum(([name] * count for name, count in players), [])
    shuffle(choosefrom)
    winners = []
    while len(winners) < win_number:
        choice = choosefrom.pop()
        if choice not in winners:
            winners.append(choice)
    return winners

>>> players = [('Alex', 5),
           ('Betty', 1),
           ('Carl', 2),
           ('Daniella', 10)]
>>> lottery_winners(players, 3)
['Alex', 'Carl', 'Daniella']
>>> lottery_winners(players, 3)
['Daniella', 'Alex', 'Carl']
>>> lottery_winners(players, 3)
['Carl', 'Betty', 'Daniella']
>>> lottery_winners(players, 2)
['Alex', 'Daniella']
>>> lottery_winners(players, 2)
['Carl', 'Daniella']
>>> 
```

# c# - 如果构造函数抛出异常，是否有更合适的测试？

> ID：10900373
> 
> 赞同：25
> 
> 时间：2012-06-05T15:37:55.573
> 
> 标签：c#, .net, unit-testing, xunit.net, fluent-assertions

通常你测试，如果在某个方法中抛出异常，如下所示。我使用**FluentAssertions**：

```
[Fact]
public void Exception_gets_thrown()
{
    // Arrange
    var foo = new Foo("validArgument");

    // Act/Assert
    foo.Invoking(f => f.Bar(null))            // null is an invalid argument
       .ShouldThrow<ArgumentNullException>();
} 
```

但是如何测试，如果在构造函数中抛出异常？我只是这样做了，但是通过**FluentAssertions**是否有更合适的方法？

```
[Fact]
public void Constructor_throws_Exception()
{
    // Arrange
    Action a = () => new Foo(null);         // null is an invalid argument

    // Act/Assert
    a.ShouldThrow<ArgumentNullException>();
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T17:31:12.253

这正是你应该如何测试异常，这就是`ShouldThrow<T>()` 最初`ShouldNotThrow<T>()`设计的目的。事实上，该`Invoking()`方法可能会在下一个大版本（2.0.0）中被标记为过时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-09T15:26:23.210

在测试构造函数时，我添加了一个如下所示的辅助方法：

```
static Action Constructor<T>(Func<T> func)
{
    return () => func();
} 
```

然后我像这样使用它：

```
Constructor(() => new Foo("bar", null))
.ShouldThrow<ArgumentNullException>()
.And
.ParamName
.Should()
.Be("baz"); 
```

我知道这是个人喜好问题，但我发现这比需要先声明和分配代表要干净一些。

这将使原始问题中的代码如下所示：

```
[Fact]
public void Constructor_throws_Exception()
{    
    // Act/Assert
    Constructor(() => new Foo(null)).ShouldThrow<ArgumentNullException>();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-31T05:25:33.180

有一个内置的。

```
FluentActions.Invoking(() => new Foo(null)).ShouldThrow<ArgumentNullException>(); 
```

# xpath - 在 XPath 表达式中过滤带有样式 display:none 的内容

> ID：10900375
> 
> 赞同：14
> 
> 时间：2012-06-05T15:37:55.787
> 
> 标签：xpath

我正在尝试在 python 中使用 lxml 进行解析，这是我的输出

```
<td>
    <span style="display:inline">text1</span>
    <span style="display:none">text2</span>
    <span>text3</span>
    text4
</td> 
```

以为我足够聪明，可以使用以下内容

```
tree = tr.xpath("//*[contains(@style,'inline')]/text()") 
```

但后来我以为我只会看到 text1。我想要的也是查看 text3 和 text4 以便输出为

['text1'，'text3'，'text4']

任何人都可以把我送到正确的方向吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T16:01:49.243

明确排除任何带有`display:none`:

```
tree = tr.xpath("//*[not(contains(@style,'display:none'))]/text()") 
```

也就是说——这只是浏览器实际功能的一个遥远的近似；如果您需要严格准确的结果，您会想要驱动一个实际的浏览器（如 Selenium、嵌入 API 等）。

# android - 当主 UI 线程被阻塞时如何显示进度对话框？

> ID：10900378
> 
> 赞同：0
> 
> 时间：2012-06-05T15:38:06.333
> 
> 标签：android, database, thread-safety

在我被讽刺之前，为了阻塞主 UI 线程，这里是场景：

1.  服务每天运行一次 - 大约需要 15 秒才能完成。繁重的数据库事务
2.  巧合的是，用户在那段时间启动了应用程序
3.  主屏幕从数据库加载数据
4.  但是由于数据库被锁定（步骤 1），这会引发错误。

所以我需要冻结 UI 线程，直到服务完成。没有 AsyncTask，因为 UI 将继续执行并抛出错误。我已经设法让“onResume”功能进入睡眠状态，直到服务完成。但在那段时间里，我无法显示任何对话框告诉用户等待或任何进度条告诉用户坐好。

如果我尝试

```
start onResume

if (service is running?)
    show progress dialog
    while the service is running, thread.sleep
    dismiss progress dialog

end onResume 
```

线程睡得很好，醒来很好。但是该死的进度对话框直到 onResume...resumes 才会显示！底线，我如何在让主线程进入睡眠状态之前显示一个指示器（progressdialog 或对话框）？

我对加载另一个活动直到服务恢复的解决方案持开放态度。我已经尝试过了，但是之前的活动继续愉快地进行：|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:46:20.553

如果您阻止 UI 线程，则无法显示进度对话框。

我猜你想在 onResume 中调用对话，但是在 onResume 和 onPaused 完成之前 UI 不会开始显示对话。但是，当您在 OnResume 中阻塞 UI 线程时，在阻塞结束之前不会达到此状态。因此它是不可能的。

您需要将等待放在异步任务中，并在完成后回调您的 UI 线程。好的是在数据库更新完成时进行加载活动来启动您的实际活动。

# php - 从drupal 7中的链接调用函数

> ID：10900384
> 
> 赞同：0
> 
> 时间：2012-06-05T15:38:34.360
> 
> 标签：php, drupal, drupal-7

我正在创建一个表，每行都有一个删除字段。删除字段是链接。现在我想知道；单击链接时如何调用函数（从数据库中删除数据）。

表的代码：

```
 $header = array("booking day" , "where" , "nr of people", "cancel");
        $rows = null;
        foreach ($res as $booking) {              
            if(isset($venues[$booking->nid]->title)){
                $rows[] = array(
                date("d-m-Y", 
                $booking->date), 
                $venues[$booking->nid]->title, 
                $booking->num_guests,
                l('delete', "LINK HERE" ),
                );
            }
        } 
```

我在网上找到了一个示例，它要求我制作一个像这样的新菜单页面：

```
$items['node/%node/delete_slot'] = array(
'title' => 'Delete slot',
'page callback' => 'bookings_delete_booking',
'page arguments' => array(2),
'access arguments' => array('access content'), // whatever see above
'type' => MENU_CALLBACK 
```

);

还有一个像这样的新功能：

```
function bookings_delete_booking($identifier_for_what_percent_is) {
dsm('test'); 
```

}

当我单击链接时，它会转到 404 页面。

有谁知道如何使这项工作？

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:35:28.020

表是如何生成的？你不能通过视图生成它，因为它已经包含 node[delete] 选项吗？

您将需要刷新缓存（页面注册表），因为它不会拾取您的代码。

您还希望页面参数行如下

```
'page arguments' => array(1) 
```

因为您的论点在 URL 中排在第二位

# github - GitHub 的甘特图

> ID：10900389
> 
> 赞同：35
> 
> 时间：2012-06-05T15:39:10.713
> 
> 标签：github, gantt-chart

我们已经使用 GitHub 6 个月了，并且在如何放置任务、里程碑等方面或多或少地想出了“最佳实践”。但是，从管理的角度来看，有一些功能可以缺乏。例如，在 RedMine 等解决方案中发现的甘特图功能，甚至覆盖在日历任务/里程碑标记、路线图等之上。

是否有某种“附加”或第 3 方网站可以连接到 GitHub 并为我生成这些？由于我们已经在 GitHub 中集成了这么多，我想继续使用它，但如果可以使用我们需要的功能迁移到另一个系统，我可能愿意迁移。

任何建议/帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T09:25:39.983

I started a project which does exactly that :

[https://github.com/neyric/gh-issues-gantt](https://github.com/neyric/gh-issues-gantt)

It only handles issue durations in days, but we found it to be easier to maintain and quite accurate for our usage.

# c# - 简单的 COM+ 服务器抛出意外的异常

> ID：10900391
> 
> 赞同：0
> 
> 时间：2012-06-05T15:39:16.940
> 
> 标签：c#, .net, com+

我写了一个简单的 ServicedComponent

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;
using System.EnterpriseServices;

namespace ComPlusServer
{
    [ComVisible(true)]
    [ClassInterface(ClassInterfaceType.AutoDual)]
    [Guid("9C674ECA-1B71-42EA-9DB2-9A0EA57EC121")]
    [Description("Hello Server")]
    public class HelloServer : ServicedComponent
    {
        [Description("Say Hello!")]
        public String SayHello()
        {
            return "Hello!, "; 
        }
    }
} 
```

和一个 Windows 窗体应用程序

```
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using ComPlusServer;

namespace Client
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            HelloServer server = new HelloServer();

            MessageBox.Show(server.SayHello(), "Message from HelloServer");
        }
    }
} 
```

在组件服务 MMC 上，在应用程序属性、安全选项卡上，我将调用的身份验证级别降低为**无**，并降低模拟级别以**识别**和取消选中在授权时对此应用程序执行访问检查。

我不断收到 ServicedComponentException 异常说

> 方法级基于角色的安全性需要类方法的接口定义。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:10:03.060

我相信这意味着您的 Component 类的方法需要在接口中定义。

```
[ComVisable(true)]
public interface IHelloServer
{
    public String SayHello(); 
} 
```

现在让您的组件类实现接口：

```
[ComVisable(true)]
[ClassInterface(ClassInterfaceType.AutoDual)]
[ComDefaultInterface(typeof(IHelloServer))]     
[Guid("9C674ECA-1B71-42EA-9DB2-9A0EA57EC121")]     
[Description("Hello Server")]     
public class HelloServer : ServicedComponent, IHelloServer     
{         
    [Description("Say Hello!")]         
    public String SayHello()         
    {             
        return "Hello!, ";          
    }     
} 
```

# responsive-design - 有没有办法在响应式网站中实现显示隐藏 div？

> ID：10900394
> 
> 赞同：0
> 
> 时间：2012-06-05T15:39:32.497
> 
> 标签：responsive-design

一旦视口收缩说宽度为 500 像素，有没有办法在响应式网站中实现显示隐藏 div？

我想要做的是当视口收缩到 500 像素的宽度时，每个当前 div 可以通过显示隐藏或切换或某种手风琴隐藏？

这意味着这些函数在视口收缩到这个宽度之前不会“启动”。

这可能吗？

这是我需要执行此操作的网站：

[http://surfingthebluemarble.com/mnews.html](http://surfingthebluemarble.com/mnews.html)

现在当这个网站收缩时，内容太长了。我需要隐藏才能在点击时隐藏和显示这些 div。

提前感谢您一如既往的帮助。

问候， umbre gachoong

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:43:51.910

是的，您可以`css`针对某些视口（屏幕）创建目标

例如

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen
and (min-device-width : 320px)
and (max-device-width : 480px) {
/* Styles */
} 
```

参考[这个](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# google-maps-api-3 - 选择链接或复选框以显示类别标记

> ID：10900395
> 
> 赞同：1
> 
> 时间：2012-06-05T15:39:44.320
> 
> 标签：google-maps-api-3

我有点坚持试图告诉 Javascript 做我想做的事。

我有一个示例地图[http://calwestculture.com/sgs/backup/example-map.html](http://calwestcultural.com/sgs/backup/example-map.html)并且左侧的快速菜单中有类别。我希望这些类别是可点击的，并且只显示该类别的标记。

我想： 1\. 加载时隐藏标记 2\. 当您单击一个类别时（例如“吃”“银行”等），我只想显示该类别中的标记

*如果在菜单中创建一个复选框使这更容易，我愿意这样做。我只是挂在地图的这一部分上，需要继续前进。

有人可以帮忙吗？有人告诉我这是一个简单的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:44:35.177

如果您想将标记保存在不同的类别中，请为每个标记类别创建一个数组，并使用它们来存储每组标记。然后执行以下操作：

要在加载时隐藏标记，请创建标记，但将标记映射属性设置为`null`：

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var myOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var marker = new google.maps.Marker({
    position: myLatlng,
    map: null,
    title:"Hello World!"
}); 
```

要仅显示给定类别中的标记，请侦听应触发显示标记的事件，然后设置标记的 map 属性：

```
for ( var i = 0; i < markerCategoryArray.length; i++ ) {
    markerCategoryArray[i].setMap( map );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:29:19.293

在没有多个类别数组的情况下，我从[这个答案](https://stackoverflow.com/a/3531781/576)中得到了一个关于如何做到这一点的线索。更重要的是，那里[链接的谷歌地图 v3 示例](http://www.geocodezip.com/v3_MW_example_categories.html)显示了以下内容。

```
var gmarkers = [];
var marker = new google.maps.Marker({
    position: latlng,
    icon: gicons[category],
    shadow: iconShadow,
    map: map,
    title: name,
    zIndex: Math.round(latlng.lat()*-100000)<<5
});
// === Store the category and name info as a marker properties ===
marker.mycategory = category;                                 
marker.myname = name;
gmarkers.push(marker); 
```

然后只需按示例中描述的标记上的类别进行过滤。

```
// == shows all markers of a particular category, and ensures the checkbox is checked ==
function show(category) {
   for (var i=0; i<gmarkers.length; i++) {
      if (gmarkers[i].mycategory == category) {
        gmarkers[i].setVisible(true);
      }
   }
   // == check the checkbox ==
   document.getElementById(category+"box").checked = true;
}

// == hides all markers of a particular category, and ensures the checkbox is cleared ==
function hide(category) {
   for (var i=0; i<gmarkers.length; i++) {
      if (gmarkers[i].mycategory == category) {
        gmarkers[i].setVisible(false);
      }
   }
   // == clear the checkbox ==
   document.getElementById(category+"box").checked = false;
   // == close the info window, in case its open on a marker that we just hid
   infowindow.close();
} 
```

# xml - Titanium - xml 属性查找和替换

> ID：10900396
> 
> 赞同：0
> 
> 时间：2012-06-05T15:39:45.890
> 
> 标签：xml, parsing, xpath, titanium

我在 Titanium 移动设备中工作，我正在尝试解析和 xml 提要。提要解析得很好，但我正在寻找确切的属性，例如标题、作者和描述。但是每隔一段时间，提要不会提供我正在寻找的项目之一。例如，标题和描述将出现在项目中，但作者将丢失，因为从未提供过。

例子

```
<item>
    <title></title>
    <author></author>
    <desc></desc>
<item>
<item>
    <title></title>
    <desc></desc>
<item> 
```

请注意，第二项中缺少作者。我的代码将出现“表达式“作者”的结果。item(0)'[null] 不是对象。”

如果它不存在，我如何跳过该属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:42:27.687

我使用以下代码来解决我的问题。

```
if(items.item(i).getElementsByTagName('author').length > 0){
//do something
} 
```

# javascript - Chrome 控制台到文件

> ID：10900397
> 
> 赞同：4
> 
> 时间：2012-06-05T15:39:52.333
> 
> 标签：javascript, debugging, google-chrome, logging

我想将我的 javascript 的控制台输出存储在一个文件中。

好吧，我更愿意在文件中查看输出，也可以使用 /usr/bin/tail 或其他 linux 命令查看。

有谁知道它是否可能？，以及如何做到这一点？

# jquery - jquery ui autocomplete _renderItem 似乎干扰了选择事件

> ID：10900401
> 
> 赞同：10
> 
> 时间：2012-06-05T15:39:56.013
> 
> 标签：jquery, jquery-ui, select, autocomplete, jquery-ui-autocomplete

如果我使用 _renderItem，我的选择事件将不起作用。如果我注释掉调用 _renderItem 的最后一段代码，则选择事件有效。当我使用 _renderItem 时，选择事件根本不会触发。

```
var cache = {}, lastXhr; 

$("#hifind-find").autocomplete({
  source: function(request, response) {

    var term = request.term; 
    if (term in cache) {
      response(cache[term]);
      return;
    }

    var posturl = '/hifind/jquery_ui/autocomplete/'+term; 
    lastXhr = $.post(posturl, function(data, status, xhr) {
      cache[term] = data; 
      if (xhr === lastXhr) {
        response(data); 
      } 
    }, 'json');
  },
  delay: 300,
  minLength: 1,
  select: function(event, ui){
    window.location = ui.item.dest;
  }
});

$.ui.autocomplete.prototype._renderItem = function(ul, item) {
  return $("<li></li>")
    .data("item.autocomplete", item)
    .append('<img src="' + iconImgPath + item.flag + '-search.png" class="icon-autocomplete-bundle">' + item.label )
    .appendTo( ul );
}; 
```

如果我做类似的事情，我会得到相同的结果......

```
$("#hifind-find").autocomplete(myConfig).data("autocomplete")._renderItem = renderItemFunction; 
```

无论哪种方式，选择都不会触发。_renderItem 做了它应该做的事情。它修改了项目并且没有错误，但似乎破坏了选择。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T15:49:45.973

我*相信*这是因为您没有将项目包装在锚 ( `a`) 标记中。更新您的代码以将其包装`img`在一个锚点中，它会正常工作：

```
$.ui.autocomplete.prototype._renderItem = function(ul, item) {
  return $("<li></li>")
    .data("item.autocomplete", item)
    .append('<a><img src="' + iconImgPath + item.flag + '-search.png" class="icon-autocomplete-bundle">' + item.label + '</a>')
    .appendTo( ul );
}; 
```

以下是一些可能有帮助的示例：

*   `a`在生成的标记中不包含标记的示例`_renderItem`（`select`在这里像您的问题一样被破坏）：http: [//jsfiddle.net/MaLqe/](http://jsfiddle.net/MaLqe/)

*   在生成的标记中*带有*`a`标记的示例：http: [//jsfiddle.net/3zSMG/](http://jsfiddle.net/3zSMG/)

# objective-c - 如何通过 NSInvocation 调用类方法？

> ID：10900403
> 
> 赞同：6
> 
> 时间：2012-06-05T15:40:04.363
> 
> 标签：objective-c

我们可以`NSMethodSignature`过`+ (NSMethodSignature *)instanceMethodSignatureForSelector:(SEL)aSelector`的`NSObject`。然后`NSInvocation`由`+ (NSInvocation *)invocationWithMethodSignature:(NSMethodSignature *)signature`

这是问题所在。我们只能获取*实例*的方法签名，那么类方法呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T03:15:44.710

您可以通过以下方式获取类方法：

```
NSMethodSignature *pMS = [[YourObject class] methodSignatureForSelector: (SEL)aSelector]; 
```

该片段`[YourObject class]`返回一个类对象的实例（单例），然后您可以使用它来获取类方法。

**添加：**来自以下评论的新信息。您可以执行以下操作：

```
NSMethodSignature *pMS = [YourObject methodSignatureForSelector: (SEL)aSelector]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-10T18:06:18.320

`methodForSignature:`这是有关通过 NSInvocation 显示和调用类（和实例方法）的其他详细信息`instanceMethodForSignature:`

```
@interface SomeObject : NSObject
+ (void)instanceAndClass;
- (void)instanceAndClass;
+ (void)classOnly;
- (void)instanceOnly;
@end

@implementation SomeObject
+ (void)instanceAndClass { NSLog(@"Class version"); }
- (void)instanceAndClass { NSLog(@"Instance version"); }    
+ (void)classOnly { NSLog(@"Class only"); }
- (void)instanceOnly { NSLog(@"Instance only"); }
@end

@implementation Foo

- (void)invoke:(id)receiver signature:(NSMethodSignature *)signature selector:(SEL)selector {
    if (!signature) {
        NSLog(@"method signature is nil");
        return;
    }        
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
    invocation.selector = selector;
    invocation.target = receiver;
    [invocation invoke];
}

- (void)foo {
    NSMethodSignature *signature;
    SomeObject *someObject = [SomeObject new];

    signature = [someObject methodSignatureForSelector:@selector(instanceAndClass)];
    [self invoke:someObject signature:signature selector:@selector(instanceAndClass)];
    // 2015-07-10 11:01:10.227 FooBar[65312:3097866] Instance version
    [self invoke:[someObject class] signature:signature selector:@selector(instanceAndClass)];
    // 2015-07-10 11:01:10.227 FooBar[65312:3097866] Class version

    signature = [someObject methodSignatureForSelector:@selector(classOnly)];
    [self invoke:someObject signature:signature selector:@selector(classOnly)];
    // 2015-07-10 11:01:10.227 FooBar[65312:3097866] method signature is nil

    signature = [[someObject class] methodSignatureForSelector:@selector(classOnly)];
    [self invoke:[someObject class] signature:signature selector:@selector(classOnly)];
    // 2015-07-10 11:01:10.228 FooBar[65312:3097866] Class only

    signature = [someObject methodSignatureForSelector:@selector(instanceOnly)];
    [self invoke:someObject signature:signature selector:@selector(instanceOnly)];
    // 2015-07-10 11:01:10.228 FooBar[65312:3097866] Instance only

    signature = [[someObject class] methodSignatureForSelector:@selector(instanceOnly)];
    [self invoke:[someObject class] signature:signature selector:@selector(instanceOnly)];
    2015-07-10 11:01:10.228 FooBar[65312:3097866] method signature is nil

    signature = [[someObject class] instanceMethodSignatureForSelector:@selector(instanceOnly)];
    [self invoke:someObject signature:signature selector:@selector(instanceOnly)];
    // 2015-07-10 11:01:10.228 FooBar[65312:3097866] Instance only
} 
```

# php - 在uploadify中限制图片上传

> ID：10900404
> 
> 赞同：1
> 
> 时间：2012-06-05T15:40:07.013
> 
> 标签：php, html

我正在使用 uploadify 上传图片。除了宽度：670px 高度：200px 的图像之外，还有什么方法可以限制用户上传。这是我的 uploadify.php 代码

```
<?php
require_once("includes/connection.php");

$targetFolder = '/workbench/sudeepc/photogallery/uploads' ; 

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);

 $query="INSERT INTO `photo` ( `id` , `path` , `uname` )
 VALUES (
 '','${targetFile}', 'testnn');";
 mysql_query($query,$connection);

    } else {
        echo 'Invalid file type.';
    }
}
?> 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:43:01.363

您无法限制实际上传 - 必须上传文件才能让服务器端逻辑测试其有效性 - 文件扩展名、尺寸等...

有一个内置的 PHP 函数来确定图像大小 - [http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

```
getimagesize() 
```

> getimagesize() 函数将确定任何给定图像文件的大小，并返回尺寸以及文件类型和要在普通 HTML IMG 标记和相应 HTTP 内容类型中使用的高度/宽度文本字符串。
> ...
> 返回一个包含 7 个元素的数组。
> 索引 0 和 1 分别包含图像的宽度和高度。

检查文件扩展名后，您可以在图像上调用此函数并根据您的要求测试其尺寸。

这是该函数的示例输出 -

```
Array ( 
  [0] => 84 // width
  [1] => 52 // height
  ... 
) 
```

# vim - Vim 中的行依赖

> ID：10900406
> 
> 赞同：2
> 
> 时间：2012-06-05T15:40:16.293
> 
> 标签：vim, editor, vi

我正在考虑一个可能在 Vim 和其他编辑器中有用的特性 [将其命名为行依赖]。

什么是行依赖？

让`S`当前缓冲区中的一组行号完全相同。`S'`标记为依赖的(of )子集`S`意味着对 in 中任何行的任何更改`l`都会`S'`反映在所有 中`S'`。

`S'`根据缓冲区中的更改进行更新，即可以追溯到行的初始点。

用例：自动复制多行中的更改而不记录宏。

在 Vim 中可以做到这一点吗？实施这个想法有什么固有的困难吗？这个想法有什么根本缺陷吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T15:03:03.787

插件[vim-multiple-cursors](https://github.com/terryma/vim-multiple-cursors)可以帮助同时编辑多个相同的文本部分。希望这是您正在寻找的。

![在此处输入图像描述](../Images/0232105c001068d1ce970483791c1770.png)

![在此处输入图像描述](../Images/7cae626c56fb1428eb895dfae1c38e3e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:22:41.687

在 Vimscript 中，您可以通过事件挂钩对“源”行的修改`CursorMovedI`，但通过普通模式 (p) 和 Ex 命令 (:put) 对修改做出反应更难，可能`CursorHold`需要延迟。

要在上面有插入/删除时跟踪行，可以使用标记，但只有 26 个。

可以通过 轻松“克隆”行更新`setline()`。

一般来说，在 Vimscript 中执行此操作并不完美且难以实现。将此添加到核心 Vim 需要对 Vim 内部结构和源代码有深入的了解，并且不太可能被 Vim 的维护者接受。仔细想想这是否真的值得。

# c++ - cvCalcOpticalFlowHS 未被识别 C++

> ID：10900407
> 
> 赞同：1
> 
> 时间：2012-06-05T15:40:19.000
> 
> 标签：c++, opencv, undeclared-identifier

我最近安装了 OpenCV，到目前为止一切正常，但由于某种原因，即使我包含：cv.h、highgui.h 当我想使用该功能时出现此错误：

```
 cvCalcOpticalFlowHS: error C2065: 'cvCalcOpticalFlowHS' : undeclared identifier. 
```

我试图查找需要包含哪个头文件，但到目前为止我还没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:54:41.260

做

```
#include "opencv2/legacy/legacy.hpp" 
```

# emacs - 如何在 Lisp 上使用这个参数“KEEP-BACKUP-VERSION”

> ID：10900412
> 
> 赞同：3
> 
> 时间：2012-06-05T15:40:32.450
> 
> 标签：emacs, elisp

那里。

我总是使用 emacs 编辑器。我写了一些 lisp(emacs-lisp) 代码。

但是，我不知道如何使用 file-name-sans-versions 的参数。

手动上，

=====

(file-name-sans-versions NAME &optional KEEP-BACKUP-VERSION)

返回文件 NAME 没有备份版本或字符串。这是一个单独的过程，因此您的站点初始化或启动文件可以重新定义它。如果可选参数 KEEP-BACKUP-VERSION 不为零，我们不会删除备份版本号，只删除真实的文件版本号。

=====

我不明白这句话=>我们不删除备份版本号，只删除真实的文件版本号。

所以，请通过示例代码教我“如何”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:04:55.537

[elisp 手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/index.html)中有一个示例，在[(elisp) File Name Components](http://www.gnu.org/software/emacs/manual/html_node/elisp/File-Name-Components.html#File-Name-Components)节点中：

> 如果 KEEP-BACKUP-VERSION 不为“nil”，则**文件系统所理解的**真实文件版本号将从返回值中丢弃，但保留备份版本号。

```
 (file-name-sans-versions "~rms/foo.~1~")
           => "~rms/foo"
      (file-name-sans-versions "~rms/foo~")
           => "~rms/foo"
      (file-name-sans-versions "~rms/foo")
           => "~rms/foo" 
```

`backup version numbers`这并不能解释和之间的区别`true file version numbers`。但是我加粗的部分表明这取决于使用的特定文件系统。同一页面包括以下内容：

> 出于某些目的，非目录部分进一步细分为专有名称和“版本号”。在大多数系统上，只有备份文件的名称中有版本号。

我认为这意味着大多数操作系统不会将 a`true file version number`作为文件名的一部分。

# objective-c - 带“+”的类名

> ID：10900414
> 
> 赞同：1
> 
> 时间：2012-06-05T15:40:36.093
> 
> 标签：objective-c, xcode

我正在 Xcode 中处理一个 iOS 项目，我看到一些名称带有“+”的类；例如： `TableViewController+TableView.h`然后该类被命名为：`@interface RKTableViewController (TableView)`而不是`RKTableViewController+TableView`.

这是`+`什么`(TableView)`？如果它的子类`UITableView`化不应该将该类声明为：`Subclassed name : Parent class name`格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:44:02.850

文件名中的 + 在语义上并不重要。命名文件“ClassName+CategoryName.h/m”只是命名包含类别的文件的流行约定。

```
@interface RKTableViewController (TableView)
@end 
```

在类上声明一个名为“TableView”的`RKTableViewController`类别。类别用于向其主要实现之外的类添加方法。在此处查看有关类别的 Apple 文档：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T15:43:24.467

这些是类别。有时非常有帮助。

> 您可以通过在接口文件中以类别名称声明它们并在实现文件中以相同名称定义它们来将方法添加到类。类别名称表明这些方法是对在别处声明的类的添加，而不是新类。但是，您不能使用类别将其他实例变量添加到类中。
> 
> 类别添加的方法成为类类型的一部分。例如，添加到类别中的 NSArray 类的方法被包含为编译器期望 NSArray 实例在其曲目中具有的方法。但是，在子类中添加到 NSArray 类的方法不包含在 NSArray 类型中。（这只对静态类型的对象很重要，因为静态类型是编译器知道对象类的唯一方法。）
> 
> 类别方法可以做任何在类中定义的方法可以做的事情。在运行时，没有区别。类别添加到类的方法被该类的所有子类继承，就像其他方法一样。

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

**例子：**

这是我一直使用的类别的示例。我没有 NSMutableArray，但我希望有一个简单的移动功能。我附加了一个类别，而不是仅仅为了添加一个简单的函数而进行子类化。

```
// NSMutableArray+Move.h

@interface NSMutableArray (move)

- (void)moveObjectFromIndex:(NSUInteger)from toIndex:(NSUInteger)to;

@end

// NSMutableArray+Move.m

@implementation NSMutableArray (move)

- (void)moveObjectFromIndex:(NSUInteger)from toIndex:(NSUInteger)to
{
    if (to != from) {
        id obj = [self objectAtIndex:from];
        [self removeObjectAtIndex:from];
        if (to >= [self count]) {
            [self addObject:obj];
        } else {
            [self insertObject:obj atIndex:to];
        }
    }
} 
```

这使我可以使用已经在我的应用程序中创建的类来做新的事情。因此，在我使用 NSMutableArray 的任何地方，我都可以像这样调用我添加的方法

```
NSMutableArray *myArray = [NSMutableArray arrayWithObjects:@"Object A", @"Object B", @"Object C", nil];

[myArray moveObjectFromIndex:0 toIndex:2]; 
```

# database - ZF Db 附加到列

> ID：10900418
> 
> 赞同：2
> 
> 时间：2012-06-05T15:40:43.283
> 
> 标签：database, zend-framework, zend-db

我正在尝试使用 Zend_Db 进行类似的更新：

```
UPDATE `TABLE` SET
  column = column + 'new value'
WHERE
  foo = 'bar' 
```

你们中有人做过吗？是否可以？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:44:23.867

[在Zend_Db_Expr](http://framework.zend.com/manual/en/zend.db.select.html#zend.db.select.building.columns-expr)的帮助下，这是可能的。

例子：

```
$newValue = 101;
$data     = array('column' =>
                  new Zend_Db_Expr($db->quoteInto('column + ?', $newValue)));
$where    = $db->quoteInto('foo = ?', 'bar');

$updated = $db->update('TABLE', $data, $where); 
```

结果查询：

```
UPDATE `TABLE` SET `column` = `column` + 101 WHERE `foo` = 'bar'; 
```

`+`如果您询问如何附加字符串，则代码类似，但在处理字符数据时不能使用运算符，而是使用[CONCAT()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)。

例如，将`$data`数组更改为：

```
$data  = array('varcharCol' =>
               new Zend_Db_Expr(
                   $db->quoteInto('CONCAT(varcharCol, ?)', ' append more text!')
         )); 
```

# c# - 非静态类中的私有静态变量是否可用于整个应用程序？

> ID：10900420
> 
> 赞同：1
> 
> 时间：2012-06-05T15:40:44.443
> 
> 标签：c#

我有这样的事情：

```
...
public partial class MyPage : System.Web.UI.Page
{

    private static string _code = null;
... 
```

该`_code`变量是否会与我的应用程序中加载的每个人共享`MyPage`？

# 这个问题不是重复的

可能的重复不涉及非静态类中的静态变量。我现在知道没关系，但是，“重复”并没有这么说。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:42:01.527

是的，非静态类的静态成员无论如何都是静态的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:42:18.963

是的，它将在应用程序域中共享。由于在 IIS 工作线程中为每个 IIS 应用程序创建了一个应用程序域，因此可以认为静态变量的值是全局共享的。

# objective-c - 关于 Objective C 中的内存管理

> ID：10900421
> 
> 赞同：0
> 
> 时间：2012-06-05T15:40:54.853
> 
> 标签：objective-c, ios

根据静态分析器，如果我们具有以下属性：

```
@property (retain, nonatomic) SomeObject * object; 
```

然后我们像这样分配属性：

```
self.object = [SomeObject alloc] init]; 
```

发生泄漏。这是有道理的，因为 alloc init 将 +1 添加到保留计数，然后保留属性也会增加保留计数。这里最好的解决方案是什么？通常我只是像这样添加一个自动释放：

```
self.object = [[SomeObject alloc] init] autorelease]; 
```

但有时这会给我带来问题，我最终会过度释放导致我的应用程序崩溃的对象。我现在没有任何具体的例子，但我记得我不得不取出一些导致应用程序崩溃的自动释放。我在这里缺少什么吗？

编辑：我现在有一个具体的例子来说明我遇到的问题。

```
 NSMutableArray *newData = [NSMutableArray array];

    //If this is true then we are showing all of the items in that level of hierarchy and do not need to show the summary button.
    if (!(contextID.count >= 1 && [[contextID objectAtIndex:contextID.count - 1] isEqual:[NSNull null]]) && contextID.count != 0)
    {
        GeographyPickerItem * firstItem = [[GeographyPickerItem alloc] init];

        firstItem.primaryString = [NSString stringWithString:@"Summary"];
        firstItem.subString = [NSString stringWithString:@""];
        firstItem.isSummaryItem = YES;

        [newData addObject:firstItem];
        [firstItem release]; //TODO: Figure out why this is causing EXC_BAD_ACCESS errors
    }

    self.hierData = newData; 
```

上面的代码在视图控制器的 init 方法中。HierData 是一个保留属性，在 viewControllers 的 dealloc 方法中释放。GeographyPickerItem 保留了两个字符串，primaryString 和 subString，并在自己的 dealloc 方法中释放它们。当导航控制器弹出后取消分配视图控制器时，我的应用程序崩溃（有时）。它在 GeographyPickerItem 的 dealloc 方法（在 [substring release] 或 [primaryString release] 上）中因 EXC_BAD_ACCESS 信号而崩溃。

我不明白为什么会发生这种情况，因为我相信我遵循了正确的内存管理指南。如果我注释掉 firstItem release 一切都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:45:39.180

您提到的自动释放方法很好，其他常见的习惯用法也是如此：

```
SomeObject *thing = [[SomeObject alloc] init];
self.object = thing;
[thing release]; 
```

如果你后来过度释放，*那*就是你的问题。这部分，你显然做得正确，不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:45:36.667

```
SomeObject * new_object = [SomeObject alloc] init];
self.object = new_object;
[new_object  release]; 
```

或使用 ARC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T22:31:30.730

检查 GeographyPickerItem，是否分配了字符串属性（并更改为保留），或者检查您是否总是初始化它们（在发布之前）。

还要记住手动分配的区别：

```
[[NSString alloc] initWith...] 
```

您必须释放或自动释放。

```
[NSString stringWith...] 
```

无需释放。

或者像 meggar 说的那样使用 ARC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T00:16:44.323

原来问题很简单，我的 dealloc 方法在方法的开始而不是结束时调用了 super dealloc。在调用 [super dealloc] 之前，您总是必须释放实例变量！

# php - 我将 $_GET 发送到 php 的 ajax/jquery 脚本不起作用？（WordPress）

> ID：10900422
> 
> 赞同：0
> 
> 时间：2012-06-05T15:40:58.437
> 
> 标签：php, jquery, ajax, wordpress, get

这是我用来将变量（通过 GET）发送到另一个 php 文件的代码：（基本上，我单击一个按钮，然后 js 获取 id 并通过 ajax 将 id 发送到 php 文件。

```
$(document).ready(function() {
   $(".doClick").click(function() {
     var category=$(this).attr('id');
     $.ajax({
       url:'aFile.php',
       type:'GET',
       data: $category,
       success: function(data){
           alert("It worked?"); // this is the response
    }
 });
alert($(this).attr("id"));
  });
 }); 
```

这是我的 aFile.php 中的代码： php 文件通过 $_GET[] 获取信息，然后将其分配给一个变量并在函数调用中使用该变量。

```
<head>
<script type="text/javascript">  
$(document).ready(function() {
   function JS() {
 //code
});
</script>
</head>
<body onload="JS()">
<?php
$category = $_GET['category'];

if (function_exists('inventory_insert')) {
echo inventory_insert('{category_name = '.$category.'}');

} else echo('warning');
?> 
```

它应该在我的主页上给我一个回复，但似乎什么都没有发生。我什至没有收到我在 ajax 脚本之后发布的警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:42:01.927

你的变量是`category`，但你正在发送`data: $category`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:50:36.260

您必须将键/值对发送到服务器

要接收`$_GET['category']`在 ajax 中发送的数据，需要：

```
 data: 'category='+category 
```

或者

```
 data: {category: category} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:53:50.813

您已将 id 分配到 jquery 中的类别中。在数据参数中如此正确。

```
 data: {category : category}, 
```

以这种方式发送到服务器或php文件。

```
$(document).ready(function() {
 $(".doClick").click(function() {
 var category=$(this).attr('id');
 $.ajax({
   url:'aFile.php',
   type:'GET',
   data: {category : category},
   success: function(data){
       alert("It worked?"); // this is the response
}
});
    alert($(this).attr("id"));
});
}); 
```

# c++ - glDrawPixels 输出一些与预期 RGB 值不完全一致的像素

> ID：10900425
> 
> 赞同：1
> 
> 时间：2012-06-05T15:41:05.310
> 
> 标签：c++, opengl, glut

我目前正在使用 OpenGL 开发适用于 Windows 的视频播放器。它工作得很好，但我的主要目标之一是准确性。也就是说，显示的图像应该正是保存为视频的图像。

拿走所有与视频/文件/输入相关的东西，我有一些类似的东西作为我的 glutDisplayFunc：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
GLubyte frame[256*128*4]; // width*height*RGBA_size
for (int i=0;i<256*128;i++)
{
   frame[i*4] = 0x00; // R
   frame[i*4+1] = 0xAA; // G
   frame[i*4+2] = 0x00; // B
   frame[i*4+3] = 0x00; // A
}
glRasterPos2i(0,0);
glDrawPixels(256,128,GL_RGBA,GL_UNSIGNED_BYTE,frame);
glutSwapBuffers(); 
```

结合 glut 的代码..

```
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
glutInitWindowSize(256, 128);
glutCreateWindow("...");
glutDisplayFunc(Render);
glPixelZoom(1,-1); // use top-to-bottom display
glEnable(GL_DEPTH_TEST);
glutMainLoop(); 
```

这非常简单，并且是对实际代码的巨大简化。使用 glDrawPixels 创建和绘制具有 RGB 值 #00AA00 的帧。正如预期的那样，输出是一个绿色窗口。乍一看，一切似乎都很好。

但是当我使用[http://instant-eyedropper.com/](http://instant-eyedropper.com/)之类的工具来了解像素的确切 RGB 值时，我意识到并非所有像素都显示为 #00AA00。一些像素的值为#00A900。它将是左上角的第一个像素，以及同一行上的第 3 个、第 5 个等，以及每条不均匀的行。

现在它不会成为 Instant Eyedropper 或 Windows 的问题，因为其他程序会为同一文件输出正确的颜色。

现在我的问题是：glDrawPixels 是否有可能以某种方式改变像素值，也许是一种更快的方式？我希望这样的函数能够准确地显示我们在其中输入的内容，所以我不太确定该怎么想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:59:12.833

OpenGL 默认启用了颜色抖动。因此，您的 GPU 实际上可能出于某种原因执行颜色抖动。尝试使用禁用它`glDisable(GL_DITHER);`。还要注意色彩管理问题。

# iphone - 将 iPad xib 转换为 iPhone xib

> ID：10900427
> 
> 赞同：3
> 
> 时间：2012-06-05T15:41:18.713
> 
> 标签：iphone, ipad, xib

我看过很多关于将 iPhone xib 转换为 iPad xib 的帖子和教程，但我想反过来做。

我能找到的唯一资源是： [将 iPad 应用程序转换为 iPhone？](https://stackoverflow.com/questions/6855001/convert-ipad-application-to-iphone)

它只涵盖编译和代码偏差。我知道 ~ipad / ~iphone xib 后缀技巧，但想抢先生成 iPhone xib，这样我就不必从头开始创建它，而是可以从自动修改的版本开始原始 xib 并从那里开始工作。

我见过以相反方式执行此操作的工具（来自 iPhone xib 的 iPad xib），但这不是我想要的。有谁知道这样的工具，或者手动的方式来获得这个先机？

（主要问题是调整元素的大小以适应它们在较低分辨率中的相对位置）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:58:58.640

您可以复制并粘贴 xib 文件并将其重命名为“nameXib_iPad.xib”。通过这种方式，您的对象与原始类链接。现在您必须更改笔尖名称的代码并切换 iPone - iPad。

你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T06:01:53.393

您可以使用约束使 xib 文件与 iPhone 和 iPad 兼容。

# apache-flex - 如何在我的 AIR 应用程序中获取 AIR 运行时的版本？

> ID：10900428
> 
> 赞同：2
> 
> 时间：2012-06-05T15:41:18.917
> 
> 标签：apache-flex, air

在 Flex Web 应用程序中，您可以使用以下命令打印正在使用的 Flash 播放器的版本：

```
var version:String = Capabilities.version 
```

根据[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html#version)，这应该返回 Flash 播放器或 AIR 运行时版本，但在我的测试中没有。在 AIR 中运行时，我不断获得 Flash 播放器版本。

有没有办法获得 AIR 版本？我在 AIR 3.2 上运行

（我想在我的应用程序的 about 框中显示 AIR 运行时版本以进行故障排除）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:53:18.177

[这对你](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118676a5f3b-8000.html#WS5b3ccc516d4fbf351e63e3d118666ade46-7cc6)有用吗？

去引用：

> NativeApplication 对象有一个 runtimeVersion 属性，它是运行应用程序的运行时版本（一个字符串，例如“1.0.5”）。NativeApplication 对象还有一个 runtimePatchLevel 属性，它是运行时的补丁级别（一个数字，例如 2960）。以下代码使用这些属性：
> 
> air.trace(air.NativeApplication.nativeApplication.runtimeVersion); air.trace(air.NativeApplication.nativeApplication.runtimePatchLevel);

# delphi - 我的包裹单位到底在哪里？

> ID：10900429
> 
> 赞同：1
> 
> 时间：2012-06-05T15:41:20.203
> 
> 标签：delphi, packages, delphi-xe

我使用包，甚至创建它们，但恐怕我从来没有理解它们。我最近安装了 JCL 和 JVCL（顺便说一句很棒的软件包！）。在表单上放置一些控件。一切都好。我的测试应用程序中也使用了相同的表单。编译器会询问绝地单元在哪里：例如 JvExControls。到目前为止，我通过将单元添加到我的项目中解决了这个问题，但这对于 Jedi 文件是不可行的。

这似乎是一个路径问题，但据我所知，Jedi 设置了路径。我究竟做错了什么？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T15:51:11.733

JVCL 安装程序通常会为您执行此操作。您的计算机环境中可能有一些奇怪的东西阻止安装程序执行此操作，或者您可能在安装后搞砸了。我希望您尝试了通常的第一件事，即重新运行 Jedi JCL，然后重新运行 JVCL 安装程序？（JVCL 取决于 JCL，因此您要查找的单元可能是 JCL 的一部分，而不是 JVCL。）

所以有 BPL 文件，它们位于必须位于系统`PATH`环境变量中的文件夹中，因此它们可以由 RAD Studio IDE 定位。

其次，有 PAS 文件，通常通过浏览全局目录中的目录来找到这些文件`library path`——安装程序通常会为你设置这些文件，在 Jedi 的情况下，它通常指向 DCU 文件而不是 PAS 文件——如果你没有自从安装程序运行以来，不要弄乱你的库路径，那么它*应该*包含所有 delphi 单元的路径，包括 Jedi JVCL 单元和其他组件供应商的文件夹。

第三，一些开发人员选择`Search Path`在 Project Options 中为他们拥有的每个单独的项目文件设置他们的 Project 选项，以便 Delphi 可以找到东西。

您不仅应该检查所有三件事（`PATH`如果 IDE 在启动时无法加载包，则检查环境变量，以及其他，如果您的代码无法构建），您还应该寻找重复或额外的副本。

不要将单位添加到您的项目中，而是尝试使用您的项目`Search Path`选项。

**更新**这可能是因为您通过将 jvcl/jcl 单元添加到您的项目中来显式地重新编译它们，并且因为您（因此）在 jedi Library Dcu 文件夹之外的所有地方都有 Jedi JVCL DCU 文件，所以您有一个混乱。您的解决方案是每次都从源代码构建它，这有点慢，但有利于为您工作，所以没关系。

# objective-c - GKLeaderboardViewController 初始排行榜

> ID：10900430
> 
> 赞同：2
> 
> 时间：2012-06-05T15:41:26.227
> 
> 标签：objective-c, ios, game-center, presentmodalviewcontroller, leaderboard

出现时`GKLeaderboardViewController`，它会显示列表中的第一个排行榜，即使`GKLeaderboardViewController`未设置 的排行榜类别。查看所有排行榜列表的唯一方法是单击顶部的**排行榜按钮。**

有没有办法在出现时显示所有排行榜的列表`GKLeaderboardViewController`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T08:28:19.667

您可以将类别设置为零。

```
 GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];
    if (leaderboardController != NULL)
    {
        //leaderboardController.category = kLeaderboardID;
        leaderboardController.category = nil;
        leaderboardController.timeScope = GKLeaderboardTimeScopeWeek;
        leaderboardController.leaderboardDelegate = self;
        [self presentModalViewController: leaderboardController animated: YES];
    }
    [leaderboardController release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T18:03:40.150

在 iOS 6 及更高版本中不推荐使用 category 属性。

尝试这个：

```
leaderboardController.identifier = @"Your leaderboard identifier as defined on iTunes connect"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:44:34.803

苹果文档：

> 类别属性必须为 nil，或者必须与您在 iTunes Connect 上创建排行榜时定义的类别标识符匹配。如果为 nil，则视图显示聚合排行榜的分数。默认为零。

[http://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLeaderboardViewController_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKLeaderboardViewController/category](http://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLeaderboardViewController_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKLeaderboardViewController/category)

# html - IE中表格单元格内的绝对定位

> ID：10900433
> 
> 赞同：4
> 
> 时间：2012-06-05T15:41:34.503
> 
> 标签：html, css, internet-explorer

我在 Internet Explorer 中的表格单元格内的绝对定位存在一些问题（特别是 9，但我确信问题也存在于 <9 中）。我试图强制表格单元格内的 div 占据整个单元格。在 chrome/ff/safari 中使用：

```
div {
    position: absolute;
    top:0;
    bottom:0;
    right:0;
    left:0;
}

td {
    position: relative;
} 
```

但是由于某种原因，IE 的行为完全不同。我根本无法根据表格单元格为 div 提供动态高度。[这是](http://jsfiddle.net/x7UP6/2/)一个例子来说明我在说什么。它可以在 chrome/ff/safari 中按我的需要工作，但在 IE 中已损坏。有没有办法让它在 IE 中以同样的方式工作？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-16T13:56:20.560

如果有人仍然对此感兴趣；一个简单的解决方案将解决 IE 10（我当前的目标）上的问题。

您需要有一个嵌套的 div 来定位您的绝对定位元素：

```
<td>
    <div>
        <a href="#">FULL HEIGHT</a>
    </div>
</td> 
```

然后添加一些 css，包括 IE 的 lil 技巧：

```
td {
    position: relative;
    height: 1px; // IE FIx
}
td > div {
    height: 100%;
}
td > div a {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    // Beauty only
    background-color: orange;
    color: white;
    text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:49:12.530

我建议你不要将你的元素定位到所有方向，只使用其中两个，而是为你的 div 使用 size。

喜欢：

```
div {
    position: absolute;
    top:0;
    bottom:0;
    width: 100%;
    height: 100%
}

td {
    position: relative;
    width: 400px;
    height: 400px;
} 
```

# php - 抓取 HTML 表格数据并创建 XML 或 JSON 文档

> ID：10900436
> 
> 赞同：0
> 
> 时间：2012-06-05T15:41:41.030
> 
> 标签：php, xml, xpath, screen-scraping, web-scraping

我需要从网站上的表格中抓取一些网站数据，并创建一个将由应用程序使用的 XML 或 JSON 文档。我在获取以下数据时遇到了一些问题。

该表如下所示：

```
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#DDEEFF" width="100%">
<tr>
<td width="20%" ><font face="Verdana, Arial" size="1">SRC</a></td></font>
    <td width="58%" ><font face="Verdana, Arial" size="1"><a href="http://example.com/this/news?id=1&by=today" onMouseOver="a('Open Bulletin');return true" onMouseOut="b()">Welcome</font></a></td>
<td width="17%" align="center"><font face="Verdana, Arial" size="1">Event</td></font>
    </tr>   

<tr>
<td width="20%" ><font face="Verdana, Arial" size="1">FMD</a></td></font>
    <td width="58%" ><font face="Verdana, Arial" size="1"><a href="http://example.com/this/news?id=2&by=today" onMouseOver="a('Open Bulletin');return true" onMouseOut="b()">Another News</font></a></td>
<td width="17%" align="center"><font face="Verdana, Arial" size="1">Updates</td></font>
    </tr>   
</td> 
```

我想创建一个如下所示的 XML 提要或 JSON：

```
<bulletins>
    <title>Welcome</title>
    <id>1</id>
    <type>News</type>
</bulletins>

<bulletins>
    <title>Another News</title>
    <id>2</id>
    <type>Updates</type>
</bulletins> 
```

这是我当前的代码：

```
<?php
$body = explode('<table border="0" cellpadding="3" cellspacing="0" bgcolor="#DDEEFF" width="100%">', $html);

$xml = simplexml_load_string("<?xml version='1.0' encoding='utf-8'?><xml />");

$rows = array();
foreach (array_slice(explode('<tr>', end($body)), 1) as $row)
{   
    preg_match('#<a.*?href="(.*?)".*?>(.*?)</a>#i', $row, $title);
    preg_match('/<a.*href="(.*)".*>(.*)<\/a>/iU', $row, $id);
   // preg_match('/type">([^<]+)<\/td>/', $row, $type); 

    $node = $xml->addChild('bulletins');

    $node->addChild('title', $title[1]);
    $node->addChild('id', $id[1]);
   // $node->addChild('type', $due[1]);
}

header('Content-Type: text/xml');
echo $xml->asXML();
?> 
```

但是我得到了这个问题

```
<xml>
    <bulletins>
        <title>http://example.com/this/news?id=1</title>
        <id>http://example.com/this/news?id=1</id>
    </bulletins>
    <bulletins>
        <title>http://example.com/this/news?id=2</title>
        <id>http://example.com/this/news?id=2</id>
    </bulletins>
</xml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:51:29.400

主要问题是 HTML 一开始就无效，因此大多数 PHP XML/HTML 解析器在尝试解析这个特定的 HTML 表时都会失败。我使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)将您的表格转换为 JSON。此代码假定 table.html 仅包含您在上面指定的表。

```
<?php
include 'simplehtmldom/simple_html_dom.php';

$html = file_get_html('table.html');

$row_count = 0;

foreach($html->find('tr') as $row) {
  $row_count++;
  foreach($html->find('td') as $cell) {
    $cell_text = $cell->plaintext;
    // There are no CSS classes or IDs to differentiate between columns in the
    // table, so we're using the width instead
    switch ($cell->attr['width']) {
      case '58%':
        $bulletins[$row_count]['title'] = $cell_text;
        break;
      case '17%':
        $bulletins[$row_count]['type'] = $cell_text;
        break;
    }
    $bulletins[$row_count]['id'] = $row_count;
  }
}

// Remove the invalid </a> tags from the cell text, and convert to JSON
$json = str_replace('<\/a>', '', json_encode($bulletins));

// Output:
// {"1":{"id":1,"title":"Another News","type":"Updates"},"2":{"id":2,"title":"Another     News","type":"Updates"}}
echo $json;

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T00:40:23.533

这是一个简单的示例，可让您开始仅使用 dom 函数：

```
$dom = new DOMDocument();
@$dom->loadHTMLFile(url);
$xpath = new DOMXPath($dom);

$xml = new DOMDocument();
foreach($xpath->query('//table/tr') as $tr) {
  $bulletin = $xml->appendChild($xml->createElement("bulletin"));
  $title = $xpath->query('.//td[2]//a', $tr)->item(0)->nodeValue;
  $bulletin->appendChild($xml->createElement("title",$title));
  $type = $xpath->query('.//td[3]/font', $tr)->item(0)->nodeValue;
  $bulletin->appendChild($xml->createElement("type",$type));
}
echo $xml->saveXML(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T01:33:32.520

假设您有一个有效的 HTML 表，我已经为您编写了一个脚本： [https ://github.com/tremblay/HTML-Table-to-JSON](https://github.com/tremblay/HTML-Table-to-JSON)

使用这样格式化的表格，您将运行 htmlToJSON('url.com', false, null, null, null, true);

# jquery - 使用 jQuery.html5Uploader 传递会话

> ID：10900439
> 
> 赞同：1
> 
> 时间：2012-06-05T15:41:50.803
> 
> 标签：jquery, html, file-upload, jquery-html5uploader

我正在使用[jQuery.html5Uploader 插件](http://www.igloolab.com/jquery-html5-uploader/)。我正在使用的 CMS 在发送任何页面之前检查用户是否已登录。所以我需要在上传一个或多个文件时传递一些额外的参数。

如何使用 jQuery.html5Uploader 做到这一点？

# android - Android“可绘制”文件夹选择问题

> ID：10900441
> 
> 赞同：0
> 
> 时间：2012-06-05T15:41:54.960
> 
> 标签：android

我目前正在构建一个 Android 应用程序（游戏）。我已经创建了所有图像的 ldpi、mdpi 和 hdpi（所有这些图像的尺寸都已适当计算）。

当我在三星 S3 上测试游戏时，以下代码的值为 2.0。

```
getResources().getDisplayMetrics().density; 
```

这是正确的，应用程序中使用的所有图像都是从 drawable-hdpi 文件夹中自动选择的。

但是，当我在我的 Google Nexus One 上测试应用程序时，上述代码的计算结果为 1.5（正确），但仍会自动选择 drawable-hdpi 文件夹中的图像。

作为参考，我以这种方式加载位图：

```
BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
bmpFactoryOptions.inScaled = false;
Bitmap exampleBitmap = BitmapFactory.decodeResource(gamePanel.getResources(), R.drawable.example, bmpFactoryOptions); 
```

*编辑：删除第二行仍然不能解决问题。*

难道我做错了什么？如果是这样，是什么？或者，是否有解决方法？

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:59:26.840

三星 Galaxy SIII 是一款 XHDPI 设备。

Nexus One 是一种 HDPI 设备。

参考：

[http://blog.blundellapps.com/list-of-android-devices-with-pixel-density-buckets/](http://blog.blundellapps.com/list-of-android-devices-with-pixel-density-buckets/)

因此，因为您没有 XHDPI 资源，它使用下一个最接近的 SIII (hdpi)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:56:19.823

我相当肯定 S3（2.0 密度）是 xhdpi，而 Nexus One（1.5 密度）是 hdpi。1.0 是参考密度 (mdpi)。最有可能发生的是 S3 回退到 hdpi 文件夹，因为您没有提供 xhdpi 资源，并且 Nexus One 正确地从 hdpi 文件夹中提取。

# android - 当用户登录凭据存储在浏览器中时，Android 上的 Twitter OAuth 回调问题

> ID：10900449
> 
> 赞同：3
> 
> 时间：2012-06-05T15:42:23.783
> 
> 标签：android, twitter, twitter-oauth, twitter4j

我已将 twitter4j 集成到一个 android 应用程序中，并且在大多数情况下它可以无缝运行，但我注意到当用户指示将其登录凭据保存在浏览器中时，尝试使用 twitter 进行身份验证时会发生零星问题。调用 getOAuthRequestToken(callbackURL) 后，android 浏览器照常打开，但随后浏览器弹出如下错误页面：

`Web page not available The web page at [https://api.twitter.comtwitter-callback-uri:///?oath_token=](https://api.twitter.comtwitter-callback-uri:///?oath_token=).....................`

因此，看起来正在发生的事情是浏览器被重定向到无效的 url。我认为重定向应该看起来像这样：twitter-callback-uri:///?oath_token=................

为了提供更多信息，对令牌的请求如下所示：

```
rToken = twit.getOAuthRequestToken("twitter-callback-uri:///"); 
```

并且在 android manifest 中添加了一个意图过滤器来识别这个 uri。意图过滤器如下所示：

```
 <activity android:name=".LoginActivity" 
        android:screenOrientation="unspecified"
        android:finishOnTaskLaunch="true">
        <intent-filter> 
            <action android:name="android.intent.action.VIEW" /> 
            <category android:name="android.intent.category.DEFAULT" /> 
            <category android:name="android.intent.category.BROWSABLE" /> 
            <data android:scheme="twitter-callback-uri"/> 
        </intent-filter> 
    </activity> 
```

这通常有效，唯一的问题似乎是用户的 twitter 登录凭据是否保存在浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:16:47.267

我和你有同样的问题。我问了我的问题后发现了你的问题:) 看看这个

[Twitter API 返回无效回调 - 无法授权](https://stackoverflow.com/questions/11013689/twitter-api-returns-invalid-callback-cannot-authorize)

具体来说，请查看我的问题中的代码片段。

# c# - 我的屏幕保护程序正在停止屏幕暂停，但我不希望它停止

> ID：10900450
> 
> 赞同：6
> 
> 时间：2012-06-05T15:42:25.080
> 
> 标签：c#, c#-4.0, power-management

我在.Net 4.0 中做了一个屏幕保护程序。它基本上只是移动图像中的位并在计时器上使用 .Invalidate 并覆盖 onPaint 事件来显示它。

到目前为止，它工作得很好——但是——我注意到它有一个问题。

它在暂停超时后停止监视器暂停。自从我安装它以来，我的显示器现在保持 24/7 全天候运行。

问题是，我没有做任何事情来专门停止省电功能 - 我已经确保我的计算机的省电设置已设置（它们是）。所以我选择了另一个屏幕保护程序，以确保设置仍然有效。超时后监视器暂停。

然后我需要做什么才能很好地使用电源管理？我在谷歌上搜索了这个答案，我发现的一切都是如何阻止电源管理，我没有明确阻止它！我只想在适当的时候允许暂停。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T00:38:29.813

[您是否会意外捕获WM_SYSCOMMAND](http://msdn.microsoft.com/en-us/library/ms646360.aspx)的 0xF170 (SC_MONITORPOWER) 子命令？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T17:21:51.707

我能够让我的程序“玩得很好”。我不知道为什么这有效而原始代码无效，但这不仅有效 - 它实际上使程序更加“节能”友好，因为它通过在屏幕暂停后不进行计算来减少 CPU 周期。简而言之，我预览 WndProc 消息并查找监视器正在暂停消息，一旦收到它，我就会停止重绘，直到它恢复（可以恢复并使屏幕保护程序仍然处于活动状态）。

代码更改：

```
 // Field Definitions
    /// <summary>
    /// Constants that relate to the WndProc messages we wish to intercept and evaluate.
    /// </summary>
    [System.Diagnostics.CodeAnalysis.SuppressMessage("StyleCop.CSharp.NamingRules", "SA1310:FieldNamesMustNotContainUnderscore", Justification = "Standard practice to use this naming style for Win32 API Constants.")]
    private const int WM_SYSCOMMAND = 0x0112, SC_MONITORPOWER = 0xF170;

    /// <summary>
    /// Gets or sets whether we are suspended. Should coincide with whether the display is turned on or not.
    /// </summary>
    private bool isSuspended = false;

    // New overridden method
    /// <summary>
    /// Intercepts WndProc messages. We are looking for the screen suspend activity. From it, we will return that we are able to suspend and we ourselves will suspend.
    /// </summary>
    /// <param name="m">Message to be checked.</param>
    protected override void WndProc(ref Message m)
    {
        if (m.Msg == WM_SYSCOMMAND)
        {
            // The 0x000F bits are used to indicate the specific state and must be ignored to see if this is a monitor power event.
            if ((m.WParam.ToInt32() & 0xFFF0) == SC_MONITORPOWER)
            {
                switch (m.WParam.ToInt32() & 0x000F)
                {
                    case -1:
                        // Display powering on - resume operation
#if DEBUG
                        System.Diagnostics.Debug.WriteLine("Display powered on.");
#endif
                        this.isSuspended = false;
                        break;
                    case 0:
                    case 1:
                    case 2:
                        // Display being powered off - suspend operation
#if DEBUG
                        System.Diagnostics.Debug.WriteLine("Display suspended");
#endif
                        this.isSuspended = true;
                        break;
                    default:
#if DEBUG
                        System.Diagnostics.Debug.WriteLine(string.Format("Unknown power state: {0}", (m.WParam.ToInt32() & 0x000F).ToString("0")));
#endif
                        // Assuming that unknown values mean to power off. This is a WAG.
                        this.isSuspended = true;
                        break;
                }
            }
        }

        base.WndProc(ref m);
    }

    // Change to my refreshing timer.
    /// <summary>
    /// Called when the refresh timer ticks. This invalidates the form, forcing it to be redrawn, which creates a framerate for us.
    /// </summary>
    /// <param name="sender">Who called this method.</param>
    /// <param name="e">Event Arguments.</param>
    private void RefreshTimer_Tick(object sender, EventArgs e)
    {
        if (this.isSuspended)
        {
            // Program is in suspended mode, so don't do anything this update.
            return;
        }

        // Program is not suspended, so invalidate the client area so it can be painted again.
        this.Invalidate();
    } 
```

进行此更改会在调用挂起时停止所有重绘（并停止 GDI+ 计算），并且在进行此更改后，屏幕保护程序会根据电源管理设置“运行”。

# javascript - 页面上有多个 iframe - 只有 IE 正确更改另一个框架

> ID：10900451
> 
> 赞同：0
> 
> 时间：2012-06-05T15:42:35.470
> 
> 标签：javascript, asp.net, vb.net, internet-explorer, firefox

我在一个页面上有多个 iframe 项目（基于 vb.net 的应用程序），特别是一个框架，其中包含生成详细信息框架的链接。目前 javascript 适用于 IE，但在任何其他浏览器中使用时，它无法正常工作。这是导致此错误的行

```
window.parent.detailFrame.location.href = form + "?cat=" + cat + "&par=" + par + "&HighlightID=" + HighlightID; 
```

我可以说这行在 Firefox 中是不正确的，因为在此行之后的函数中放置警报时，它们不会触发，但在 IE 中会触发。谁能看到需要做什么才能在 Firefox 和 IE 中工作？谢谢你。

编辑：

我可以使用诸如 window.parent.getElementById('detailFrame').location 或 window.parent.getElementById('detailFrame').href 之类的项目，但不像 window.parent.getElementById('detailFrame').location.href -仅使用 .location 或 .href 时，iframe 不会刷新到新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:11:34.897

能够使用 .src 重做，而不是 location.href

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T15:46:49.963

我认为您需要做的就是设置位置，而不是位置的href：

```
window.parent.detailFrame.location = form + "?cat=" + cat + "&par=" + par + "&HighlightID=" + HighlightID; 
```

# c# - 这是否可以在 C# - WPF 中生成自过期下载链接？

> ID：10900454
> 
> 赞同：0
> 
> 时间：2012-06-05T15:42:43.970
> 
> 标签：c#, wpf, download

我正在开发一个 C# - WPF 项目，例如 Zune，并希望通过它销售一些数字商品，例如应用程序，所以我想创建一个指向服务器中文件的一次性链接，并在我的应用程序中成功付款后，生成一个新的下载链接对于请求的文件。此链接也应在下载后过期。

这可能吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T19:25:19.807

先生或女士，

我认为你的设计有点错误。你说你正在做一个 Zune'esk 项目。这意味着您应该能够放弃使用链接并使用 WCF 或 SOAP 等 Web 服务。更改您的设计并使您的 WPF 项目调用 Web 服务。然后，一旦您的应用程序下载了内容，让它回调 API 并标记在您的持久性存储中下载的项目，然后就可以收工了。您还可以在 1 天后过期的令牌上设置“已颁发”日期时间戳。这样，如果用户再也没有回来取货，它将自动过期。

一旦你得到这个工作，那么你可以继续添加身份验证和验证结构，以确保一个用户下载。有许多身份验证框架可供选择，例如 Windows、用户名/密码等。

# xml - 在 Word 2007 中访问 xml 文件的属性

> ID：10900457
> 
> 赞同：-2
> 
> 时间：2012-06-05T15:42:53.910
> 
> 标签：xml, xslt, ms-office, word-2007, wordml

我正在为 MS Word 2007 编写样式表，我想使用 < xsl : template > 元素添加一个模板，该元素访问 Word 2007 文档的属性。（模板、TotalTime 等）有人可以为我提供启动此代码的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:04:38.410

在样式表级别，声明您希望在 Word 2007 Flat OPC XML 中用于命名空间的命名空间前缀：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
    xmlns:ep="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"
    xmlns:pkg="http://schemas.microsoft.com/office/2006/xmlPackage"
    xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"> 
```

要删除 <Template> 扩展属性（从压缩文档中的 app.xml 中删除）：

```
<xsl:template match="ep:Template" /> 
```

# spring - 在 Tomcat 中部署 Spring 应用，在 Micro cloud Foundry 中运行 Mongodb

> ID：10900460
> 
> 赞同：0
> 
> 时间：2012-06-05T15:43:12.720
> 
> 标签：spring, mongodb, cloud-foundry

尝试通过在 localhost Tomcat 服务器中运行的 Spring 应用程序连接 Micro cloud Foundry Mongodb 服务器时出现以下异常。

```
Exception:
Jun 05, 2012 4:30:44 PM com.mongodb.DBTCPConnector fetchMaxBsonObjectSize
WARNING: Exception determining maxBSON size using0
java.io.IOException: couldn't connect to [/192.168.80.128:27017] bc:java.net.ConnectException: Connection refused: connect
    at com.mongodb.DBPort._open(DBPort.java:228)
    at com.mongodb.DBPort.go(DBPort.java:112)
    at com.mongodb.DBPort.go(DBPort.java:93)
    at com.mongodb.DBPort.findOne(DBPort.java:146) 
```

设想：

为 Cloud Foundry 配置的 Spring 应用程序，在 Micro cloud Foundry 设置中工作。
它在部署到 Live cloudfoundry.com 时也可以工作
我将应用程序部署在 Spring 工具套件（STS）内的 VMWare Vfabric Tomcat 中，
指向在我的虚拟机（192.168.80.128）中运行的 mongodb

Root-context.xml：（随着主机配置的变化）

```
<beans profile="default">
<mongo:db-factory id="mongoDbFactory" dbname="pwdtest" host="192.168.80.128" 
port="27017" username="test_user" password="efgh"/>
</beans 
```

此主机正在从 localhost 机器 ping。

请建议在 mongodb 设置中需要更改的内容。

我无法通过上帝网站找到..我的意思是谷歌..:)

干杯库姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:08:48.710

如果 Tomcat 应用程序没有在 Micro Cloundfoundry VM 上运行，那么它将无法通过端口 27017 访问 MongoDB 实例，该端口只能通过 VM 本身上的 localhost 访问。

如果应用程序在 MCF VM 之外运行，则您需要使用 VMC 创建到该实例的隧道，然后相应地调整应用程序中的连接。有关“vmc 隧道”的更多详细信息，请查看[http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

干杯

担

# javascript - Ajax 和 jQuery：将数据发送到 php 脚本

> ID：10900461
> 
> 赞同：0
> 
> 时间：2012-06-05T15:43:14.023
> 
> 标签：javascript, jquery, ajax

```
$("a.star").click(function(e){ 

e.preventDefault(); 

var dataID = $(this).data('id');

$.ajax({
    type: "POST",
    url: "/engine/save.php",
    data: "id=dataID"
    success: {

         alert("FFS WORK " + data);

    }
});
return false;
});

<a href="javascript:void(0)" data-id="7" class="star">test</a> 
```

如何成功发送 data-id 到 save.php (/engine/save.php?id=7)？几乎尝试了一切，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:44:31.053

只是与

```
data: { id : dataID }, 
```

使用对象（而不是字符串连接）的好处是您无需担心转义与 ajax 调用一起传递的值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:44:15.203

```
url: "/engine/save.php?id=" + dataID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:44:24.000

首先，您应该了解如何将字符串与 js 变量连接起来。您应该使用`+`运算符来连接字符串和 js 变量。

用这个

```
data: "id=" + dataID; 
```

您也可以将其作为一个对象发送，它将`jQuery`负责将其附加到请求中。

```
data: { id: dataID } 
```

# mongodb - Morphia Single dao 用于多集合 MongoDB

> ID：10900488
> 
> 赞同：2
> 
> 时间：2012-06-05T15:44:31.317
> 
> 标签：mongodb, dao, morphia

morphia 单个BasicDAO 可以处理/查询多个集合，可以通过类参数通过重载函数。

```
public class GenericDAO extends BasicDAO<T, K> {

  /* override count impl*/
  public long count(Class<T> clazz) {
     return ds.getCount(clazz);
  }
} 
```

有没有其他方法可以使用单个 DOA 查询两个不同的集合，或者最好为每个集合创建单独的 DAO。

用户和 BlogEntry 集合的示例

```
public class BlogEntryDAO extends BasicDAO<BlogEntry, ObjectId>
public class UserDAO extends BasicDAO<User, ObjectId> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:42:06.457

我认为 Morphia 中的 DAO 的目的是为每个类/集合提供单独的数据访问对象。

我会创建两个单独的类，每个类都扩展 BasicDao。

我相信您可以按照您的建议通过重载所需的方法来实现它，但我们的想法是拥有一个对象，您可以通过该对象获取给定模型的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:56:34.723

简单回答是不，

BasicDAO 是在处理单个集合/实体的假设下进行的，因为 DOA 的许多功能都是基于实体/类和 _id/主键类型的。

```
public class BasicDOA<T,K> implements DOA<T,K> 
```

T 应该是一个特定的类
K 应该是一个特定的键（可以为不同的类分开）例如 ObjectId、String、Long 等

示例函数

```
public Class<T> getEntityClass()
public T get(K id) 
```

如果您想在单个 DAO 中处理多个集合，则使用自定义方法创建您自己的通用 DAO，并使用 DataStore 来处理不同/特定的集合。

```
public class MyDAO {
  protected DatastoreImpl ds;

  public count(Class<T> clazz) {
    return ds.getCount(clazz);
  }

  public T get(Class<T> clazz, K id) {
     return ds.get(clazz, id);
  }
} 
```

# java - 如何使用 Joda 计算 UTC 偏移量？

> ID：10900494
> 
> 赞同：12
> 
> 时间：2012-06-05T15:44:59.013
> 
> 标签：java, jodatime

我想以以下形式结束一个字符串`-5:00`（例如，如果我们在纽约）。使用 Joda 执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T15:59:04.310

不确定这是否是*最好*的方法，但这是一种方法：

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("ZZ");

DateTimeZone zone;

zone = DateTimeZone.forID("America/Los_Angeles");
System.out.println(dtf.withZone(zone).print(0));  // Outputs -08:00

zone = DateTimeZone.forOffsetHoursMinutes(-5, 0);
System.out.println(dtf.withZone(zone).print(0)); // Outputs -05:00

DateTime dt = DateTime.now();
System.out.println(dtf.print(dt)); // Outputs -05:00 (time-zone dependent) 
```

但是，您给出的示例不包括小时的前导零。如果那是您真正要问的（如何排除前导零），那么我无济于事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-29T01:54:54.413

## 以小时为单位获取偏移量的简单方法

```
public static String getCurrentTimeZoneOffset() {

    DateTimeZone tz = DateTimeZone.getDefault();
    Long instant = DateTime.now().getMillis();

    long offsetInMilliseconds = tz.getOffset(instant);
    long hours = TimeUnit.MILLISECONDS.toHours( offsetInMilliseconds );
    String offset = Long.toString( hours );

    return offset + " Hours";

} 
```

### 几个警告：

*   `DateTimeZone`这从**JodaTime**获取默认值。您可以对其进行修改以接受传递给该方法的特定 DateTimeZone。
*   这会以“-7 小时”之类的格式返回它，但您可以很容易地按照您认为合适的格式对其进行格式化。

希望有帮助。

J.P

# java - 将 TextField 的值设置为随机数

> ID：10900497
> 
> 赞同：0
> 
> 时间：2012-06-05T15:45:01.990
> 
> 标签：java, android, random, if-statement

我正在编写一个具有`Button`which 调用的 Android 应用程序`SelfDestruct()`。还有一个`TextView`应该显示`1`或`2`随机选择的。但是，如果它显示`1`，总是`1`会被设置，对于`2`。它应该始终创建一个随机数。

这是我的代码，有人可以帮我实现这个...

```
public class MainActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }
    @Override
    public void SelfDestruct(View View)
    {
        TextView tx= (TextView) findViewById(R.id.text);
        Random r = new Random();
        int x=r.nextInt(2-1) + 1;
        if(x==1)
        {
            tx.setText("1");
        }
        else if(x==2)
        {
            tx.setText("2");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:51:49.183

我很确定问题出在这一行：

```
r.nextInt(2-1) + 1; 
```

`nextInt(n)`返回一个介于 0（包括）和 n（不包括）之间的数字。这意味着您可以获得 0 到 .99 之间的任何数字，因为您将 1 作为参数传递给`nextInt()`. 你总是在这里得到 1，因为在 0 - .99 + 1 范围内转换为整数的任何数字都是 1。

你真正想要的数字在 1 - 2 的范围内，试试这个：

```
r.nextInt(2) + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:49:04.093

这将为您做：

```
public class MainActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }
    @Override
    public void SelfDestruct(View View)
    {
        TextView tx= (TextView) findViewById(R.id.text);
        Random r = new Random();
        int x=r.nextInt(2) + 1;  // r.nextInt(2) returns either 0 or 1
        tx.setText(""+x);  // cast integer to String
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:51:24.963

使用此代码，这应该可以完美运行

```
TextView tx= (TextView) findViewById(R.id.text);
        Random r = new Random();
        int x = r.nextInt(2) % 2 + 1;
        tx.setText("" +x); 
```

# python - 如何在 Python 中创建生成对象（即列表）的函数

> ID：10900501
> 
> 赞同：0
> 
> 时间：2012-06-05T13:49:18.460
> 
> 标签：python, function, list, generator

我找不到可以在这方面帮助我的指南。所以我希望有人可以帮助我解释这种 Python 编程。我正在尝试编写如下代码：

```
def Runner():
    for G in range(someRange):
        makeListObjectcalled 'ListNumber'+'G'
        ListNumberg.append(G*500000 or whatever)
        print ListNumberG 
    #so I would have a someRange amount of lists 
    #named 0,1,2,3...(up to someRange) I could look through 
```

我认为这可以通过课程来完成（事实上我猜这就是他们的目的......）但我不确定。有人可以给我一些澄清吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:18:45.377

您希望动态创建存储值数组的列表类型变量。

一种更简单更好的方法（比处理未知变量名）是使用字典来保存列表，因此您可以通过名称/键查找它们：

（伪代码，不要带我的 Python 解释器）

```
# create a dictionary to store your ListNumberG's
dict_of_lists = {}

# down the line in your loop, add each generated list to the dict:
dict_of_lists['ListNumberG'] = ListNumberG 
```

稍后您可以通过它的名称/键找到一个列表

```
print(dict_of_lists['ListNumberG']) 
```

或遍历它们

```
for idx in range(bestguess):
    print(dict_of_lists['ListNumber%s' % (idx,)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:54:39.200

看起来您真正想要的是列表列表。

```
def Runner():
    Lists = []
    for G in range(someRange):
        Lists[G] = []
        Lists[G].append(G*500000 or whatever)
        print Lists[G]
        #This way, you have Lists[0], Lists[1], ..., Lists[someRange] 
```

# mysql - 远程数据库访问主机 - 通配符

> ID：10900504
> 
> 赞同：0
> 
> 时间：2012-06-05T15:45:15.643
> 
> 标签：mysql, database, remote-server

我正在尝试使我的计算机能够远程访问 MySQL 数据库。

该网站不允许我按原样输入 IP 地址，因此我需要以 % 通配符开始地址。（与免费托管限制有关的原因）。

IP：192.168.0.78

远程访问：%.168.0.%

该设置是否允许我的 IP 连接到数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:47:36.963

192\. *** * 是您在家中的个人网络中的 IP。

访问[http://www.whatsmyip.org/](http://www.whatsmyip.org/)。找到您的 IP 并从那里开始。

至于通配符，我从未尝试过，但它似乎在逻辑上是正确的。但是请尝试使用正确的 IP。

# gradle - 如何将测试输出设置为控制台而不是 gradle 中的 html for specs2

> ID：10900506
> 
> 赞同：11
> 
> 时间：2012-06-05T15:45:29.290
> 
> 标签：gradle, specs2

我正在使用 specs2/scala 进行单元测试并使用 gradle 来构建。默认情况下，单元测试输出到一个 html 文件。我想让输出直接进入标准输出（就像 sbt 一样）。

有谁知道魔法咒语吗？

谢谢翼

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T07:23:14.030

You can use

```
test {
  //makes the standard streams (err and out) visible at console when running tests
  testLogging.showStandardStreams = true
} 
```

But this logs stdout at the info level so you need to run gradle -i to see it (it seems this will be fixed in 1.1: [http://issues.gradle.org/browse/GRADLE-1966](http://issues.gradle.org/browse/GRADLE-1966))

Alternatively, you can add an event handler:

```
test {
  onOutput { descriptor, event ->
    logger.lifecycle("Test: " + descriptor + " produced standard out/err: " + event.message )
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:05:09.903

这不是一个真正的答案，而是更多的建议，因为我没有使用 Gradle。您可以将参数传递给测试操作吗？您是否尝试传递“控制台”参数？

# bluetooth - 从蓝牙设备从 pic18f4525 上的 RCREG 读取数据

> ID：10900509
> 
> 赞同：2
> 
> 时间：2012-06-05T15:45:59.710
> 
> 标签：bluetooth, pic, usart

我有一个项目，我试图通过蓝牙设备将数据从安卓手机发送到 pic18f4525。目前，我只是想让图片识别像“A”这样的简单字母。

据我了解，当 pic 通过 PORTC.7（RX 引脚）接收数据时，它会将 8 位信息存储到 RCREG 寄存器中，然后我要做的就是读取数据。我知道图片正在接收数据，因为正在设置接收标志。此外，我将示波器连接到图片的接收引脚，它正在接收正确的 01 序列。

我的问题是，我如何读取 RCREG 寄存器来访问信息？据我所知，我可以只使用 usart.h 中的 ReadUSART 但是这个头文件不会为我编译，所以我试图在没有那个头文件的情况下访问这些数据。有没有办法做到这一点？我试过直接存储数据（即值 = RCREG），我可以“读取”寄存器（接收标志被重置，所以我知道我正在读取它）但无论我做什么，图片总是认为该值为 0xFF发送。

我正在使用带有 ICD2 和 CC8E 编译器的 MPLAB 8.85 版。任何有关如何读取数据的帮助将不胜感激。我还完全阅读了在图片上使用 usart 的数据表，阅读了编译器手册，并在这个主题上进行了多次搜索，但无济于事。

谢谢你的帮助。

更新：

完毕！！！在又搞砸了几个小时后，我终于让它工作了。这实际上是一个波特率问题。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:41:56.567

你正在做的应该工作。这听起来像是波特率不匹配（不知何故，您可能忽略了设置 BRG 寄存器或错误计算了其中的值。）我会尝试写入 TXREG，触发 TX 引脚上的写入，您可以在示波器上捕获并验证实际波特率是否与 RX 上的波特率相同。

# ios - ZXing 在 iPod 上运行（崩溃...）

> ID：10900513
> 
> 赞同：2
> 
> 时间：2012-06-05T15:46:34.577
> 
> 标签：ios, xcode, qr-code, ipod, sigabrt

我在 iPod touch（版本：5.1.1）上使用 ZXing 2.0 时遇到了一个非常奇怪的问题。我在 Internet 和 Stackoverflow 上进行了搜索，但我认为我只是忽略了该问题的根源，所以我找不到任何东西。我编写了一个应用程序，该应用程序成功使用在 iPhone Simulator 5.1 上运行的 ZXing，当我尝试在任何 iPod 设备上运行时（我还没有测试其他设备），它在没有登录控制台的情况下编译并在运行时崩溃（我无法输入上面的任何东西）。

这是出现在 XCode 上的屏幕（我得到了开发人员版本 4.3.2），最后一行粘贴了一个绿色箭头，并写了“信号 SIGABRT”。

```
libsystem_kernel.dylib __pthread_kill:
0x35e70324:  mov    r12, #328
0x35e70328:  svc    #128
0x35e7032c:  blo    0x35e70344; __pthread_kill + 32 (arrow for this line) 
```

我认为它与 libZXingWidget.a 静态库有关，我在两种不同的配置中配置了 armv6 armv7 和 i386 的构建设置，但也没有工作。

我已经不知道了，谢谢你的建议！

**编辑**：我忘了提到线程堆栈上的下一件事是`GSRegisterPurpleNamedPort`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:30:46.050

尝试重新启动设备。在某些情况下，取芯`GSRegisterPurpleNamedPort`非常常见，例如在调试版本和存档 ipa 之间切换。在那种情况下，这是马赫的事情，似乎需要重新启动。从你所说的来看，这听起来不像是问题，但值得排除。

除此以外：

1.  您是否在您的设备上运行过任何应用程序，即一切是否都已正确配置？
2.  你可以`ScanTest`在你的设备上运行吗？
3.  发布整个堆栈跟踪。

# ruby-on-rails - 将产品添加到购物车

> ID：10900525
> 
> 赞同：1
> 
> 时间：2012-06-05T15:47:37.043
> 
> 标签：ruby-on-rails, forms, controller, shopping-cart

**有关解决方案，请参阅下面的更新 1 和 2**

我一直在关注“使用 Rails 进行敏捷 Web 开发”一书中创建购物车的教程。他们有我一直关注的章节：http: [//media.pragprog.com/titles/rails4/cart .pdf](http://media.pragprog.com/titles/rails4/cart.pdf)

在书中，他们让您创建了一个 line_item，该 line_item 被传递到购物车并使用此行存储在会话中**<%= button_to 'Add to Cart', line_items_path(product_id: product) %>**在我的情况下，这显然会改变to **<%= button_to '', line_items_path(gear_id: gear), id: 'rent_it' %>**

如果我想改变它，它是一个也接受其他参数的表单，我该怎么做？

以下是我使用并尝试完成此操作但到目前为止未成功的代码。使用下面的代码，我得到一个错误，没有“id”就找不到装备。我是 Rails 和一般编程的新手，所以我很感激帮助。

**更新 1（我也在下面更新了我的视图）**

我现在可以从我的服务器日志中看到我在表单中传递了 Gear 的 ID。这就是我最初想要做的。

```
Processing by LineItemsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"0QnJShABOV+avPx0AJHxuMmskfwtwFlkpMa6cBhTU3s=", "line_item"=>{"rentstart"=>"", "rentend"=>"", "gear_id"=>"13"}, "commit"=>""}
  Cart Load (0.4ms)  SELECT `carts`.* FROM `carts` WHERE `carts`.`id` = 18 LIMIT 1
Completed 500 Internal Server Error in 2ms

ActiveRecord::RecordNotFound (Couldn't find Gear without an ID):
  app/controllers/line_items_controller.rb:44:in `create' 
```

我仍然收到错误找不到没有 ID 的 Gear。以下是 2 行：

```
 gear = Gear.find(params[:gear_id])
    @line_item = @cart.add_gear(gear.id) 
```

*我错过了什么？*

**订单项的控制器**

```
 def create
    @cart = current_cart
    gear = Gear.find(params[:gear_id])
    @line_item = @cart.add_gear(gear.id)

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to @line_item.cart }
        format.json { render json: @line_item, status: :created, location: @line_item }
      else
        format.html { render action: "new" }
        format.json { render json: @line_item.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**购物车型号**

```
class Cart < ActiveRecord::Base
  has_many :line_items, dependent: :destroy

  def add_gear(gear_id)
    current_item = line_items.find_by_gear_id(gear_id)
    if current_item
      current_item.quantity += 1
    else
      current_item = line_items.build(params[:line_item])
    end
    current_item
  end

  def total_price
    line_items.to_a.sum { |item| item.total_price }
  end

end 
```

**从齿轮显示页面查看**

```
<div class="gearside_date_main">
        <h3>Rental Date</h3>
        <script>
        $(function() {
            var dates = $( "#rentstart, #rentend" ).datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                onSelect: function( selectedDate ) {
                    var option = this.id == "rentstart" ? "minDate" : "maxDate",
                        instance = $( this ).data( "datepicker" ),
                        date = $.datepicker.parseDate(
                            instance.settings.dateFormat ||
                            $.datepicker._defaults.dateFormat,
                            selectedDate, instance.settings );
                    dates.not( this ).datepicker( "option", option, date );
                }
            });
        });
        </script>

    <%= form_for LineItem.new do |f| %>
        <%= f.text_field :rentstart, id: 'rentstart'  %>
        <%= f.text_field :rentend, id: 'rentend'  %>
        <%= f.hidden_field :gear_id, :value => @gear.id %>
        <%= f.submit "", id: 'rent_it' %>
    <% end %>
        <% end %>
    </div> 
```

**更新 2**

在 Murifox 的评论之后，我终于让它工作了。传递哈希时，我并不完全理解语法的结构。因此，经过多次试验和错误，它正在工作。我在下面包含了我的更新代码，以查看我所做的更改。我知道当我看到答案时，我总是在寻找改变。我希望这对其他人有帮助....

**视图（齿轮显示页面**

```
<%= form_for LineItem.new do |f| %>
    <%= f.text_field :rentstart, id: 'rentstart'  %>
<%= f.text_field :rentend, id: 'rentend'  %>
<%= f.hidden_field :gear_id, :value => @gear.id %>
    <%= f.submit "", id: 'rent_it' %>
<% end %> 
```

**控制器（创建动作）**

```
 def create
    @cart = current_cart
    gear = Gear.find(params[:line_item][:gear_id])
    lineitem = params[:line_item]
    @line_item = @cart.add_gear(lineitem, gear.id)

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to @line_item.cart }
        format.json { render json: @line_item, status: :created, location: @line_item }
      else
        format.html { render action: "new" }
        format.json { render json: @line_item.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**购物车模型**

```
 def add_gear(lineitem, gear_id)
    current_item = line_items.find_by_gear_id(gear_id)
    if current_item
      current_item.quantity += 1
    else
      current_item = line_items.build(lineitem)
    end
    current_item
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:18:28.023

尝试使用

```
gear = Gear.find(params[:line_item][:gear_id]) 
```

# asp.net-mvc - ASP.NET MVC - 无法设置可覆盖属性 = 什么都没有？

> ID：10900526
> 
> 赞同：1
> 
> 时间：2012-06-05T15:47:50.817
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, entity-framework

假设我有以下实体：

```
Public Class Dodo
    Public Property ID As Integer

    Public Property Name As String

    Public Overridable Property Mother As DodoMother
End Class

Public Class DodoMother
    Public Property ID As Integer

    Public Property Name As String

    Public Property Age As Integer
End Class 
```

我需要能够在设置后将 Dodo.Mother 设置为空。

IE

```
Dim ndodo as dodo = db.Dodos.find(1)
ndodo.Mother = nothing
db.SaveChanges() 
```

当我执行上面的代码时，我没有收到错误或异常或任何表明该语句不起作用的东西。ndodo 对象似乎没有将 Mother 设置为 null 并且数据库没有得到更新。

难道我做错了什么？我也尝试添加 db.Entry(ndodo).State = EntityState.Modified 但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:54:51.043

您需要为 DodoMother 向 Dodo 添加一个 Id 属性并将其设置为空。

```
Public Property MotherId as Integer? 
```

您的财产“母​​亲”是 Navagation 财产。导航属性不是数据库表的一部分，它们是实体类的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:39:06.640

谢谢JLH :)

```
Public Property MotherID() As Nullable(Of Integer)

Public Overridable Property Mother() As DodoMother 
```

和以下代码删除母亲

```
Dim ndodo as dodo = db.Dodos.find(1)
ndodo.MotherID = nothing
db.SaveChanges() 
```

# git - Windows 7 中的 msysgit 非常慢

> ID：10900529
> 
> 赞同：3
> 
> 时间：2012-06-05T15:48:04.087
> 
> 标签：git, msysgit

我最近在我的计算机（Windows 7 SP1 64 位）上安装了 msysgit。我从[Google Code](http://code.google.com)下载了[Git 版本 1.7.10](http://code.google.com/p/msysgit/downloads/detail?name=Git-1.7.10-preview20120409.exe&can=2&q=)并运行了安装程序。我选择了“从 Windows 命令提示符运行 Git”，然后将其余部分保留为默认值。

然后我以管理员身份启动命令提示符并`git init`在项目文件夹上运行以初始化存储库。该命令需要 48 秒才能完成。运行`git add *`或`git commit`采取大致相同。该项目包含一些文件夹和文件。

这是正常的吗？我的印象是 git 比其他 DVCS 更快。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:04:19.830

显然您必须在安装 msysgit 后重新启动 Windows。感谢瑞安里纳尔迪的帮助！

**编辑**：自从我升级到版本 1.8.0.msysgit.0 之后就没有再发生过

# iphone - 一种在大型 Xcode 项目中查找孤立图像的方法

> ID：10900531
> 
> 赞同：3
> 
> 时间：2012-06-05T15:48:19.323
> 
> 标签：iphone, ios, xcode, interface-builder, nib

我有一个多年来不断发展的大项目，我必须清理所有不再使用的图像。

如果我从 Xcode 中删除图像，该图像可能仍会在 nib 文件中被引用，这使得追踪不再需要的资源变得非常困难。

我目前在 TextMate 中打开整个项目文件夹作为一个项目，我可以在其中搜索所有文件。所以我需要一个接一个地搜索文件。

有没有更有效的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:17:24.320

**编辑：**

我刚刚在 Mac App Store 上发现了 Slender：[链接](http://itunes.apple.com/us/app/slender/id493656257?mt=12)

这看起来是适合这项工作的工具。

**旧答案：**

您可以使用诸如 opensnoop 或 dtrace（opensnoop 在后台使用）之类的工具来跟踪 iOS 模拟器的文件访问。

[在此处阅读有关 opensnoop 的信息。](https://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man1/opensnoop.1m.html)

确保您使用正在运行的此类工具访问应用程序的所有区域以获得全面覆盖，并且您将获得仍在使用的文件列表。

您需要一些命令行来将输出按摩到一个列表中，您可以轻松地将其与项目中的图像列表进行比较。

根据您的项目的大小，这可能有点过头了，但由于您说项目已经发展了几年，它可能比手动搜索更不容易出错，而且更有趣。

# android - 在计时器上删除 Imageview

> ID：10900532
> 
> 赞同：0
> 
> 时间：2012-06-05T15:48:24.767
> 
> 标签：android, timer, imageview

我有这样的代码，我想在点击后删除图像视图。我使用相对布局。我必须做什么？我必须删除它而不是隐藏它，因为我有很多图像视图并且我想销毁它以便程序可以更快地运行。

```
banyakmusuh= new CountDownTimer(50000,1500) {

    @Override
    public void onTick(long millisUntilFinished) {
        // TODO Auto-generated method stub

        Random a = new Random();
        int posisix = a.nextInt(500);
        btn = new ImageView(level2.this);
        btn.setImageResource(R.drawable.salju);
        i= i+1;
        btn.setId(i);                               
        RelativeLayout.LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        params.setMargins(posisix, 0, 0, 0);
        btn.setLayoutParams(params);
        RelativeLayout linearLayout = (RelativeLayout) findViewById(R.id.tingkat2);                 
        linearLayout.addView(btn);
        btn.setOnClickListener(new View.OnClickListener() {
        @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                    data.nilai+=10;
                    TextView score1 = (TextView) findViewById(R.id.skore);
                    score1.setText(String.valueOf(data.nilai));
                //what the code for delete imageview? 
                //some people say to write this code but it cant, there are a green line when i debug it 
               //((RelativeLayout)v.getParent()).removeView(v);
                                }
                            });

                        }

                        @Override
                        public void onFinish() {
                            // TODO Auto-generated method stub
                            //banyakmusuh.start();
                        }
                    }.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:17:16.330

如果您有对特定视图的引用，则可以使用：

```
yourRelativeLayout.removeView(imageViewToRemove); 
```

我会做：

```
// I would consider renaming your layout, btw
final RelativeLayout linearLayout = (RelativeLayout) findViewById(R.id.tingkat2);
btn.setOnClickListener(new OnClickListener() 
            {
               @Override
               public void onClick(View v)
               {
                   linearLayout.removeView(btn);
               }
             }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:18:14.060

Android 在 Java 上运行。您不能在 java 中销毁或删除对象。您只能对 java 机器说，如果需要，机器可以自由地销毁对象。

是的，我认为，您应该从`removeView(btn)`. 但也不要忘记设置`btn=null`。因此，您告诉 java 机器可以释放内存。

# asp.net - asp.net RijndaelManaged 类属性的默认值是什么

> ID：10900533
> 
> 赞同：4
> 
> 时间：2012-06-05T15:48:25.043
> 
> 标签：asp.net, encryption, rijndaelmanaged

RijndaelManaged 类属性 KeySize 、 BlockSize 、 FeedbackSize 和 Padding 的默认值是什么？默认值是否也是最好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T15:56:18.910

这是 Rijndeal 类的无参数构造函数（RijndaelManaged 继承自该类）

```
protected Rijndael()
{
    this.KeySizeValue = 256;
    this.BlockSizeValue = 128;
    this.FeedbackSizeValue = this.BlockSizeValue;
    this.LegalBlockSizesValue = Rijndael.s_legalBlockSizes;
    this.LegalKeySizesValue = Rijndael.s_legalKeySizes;
} 
```

什么是最佳值，很难说，这取决于您的使用情况。这就是它们被定义为属性的方式:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T11:38:24.000

如果您查看 Rijndael 继承自的“System.Security.Cryptography”类，您将在评论中看到。

```
// Summary:
//     Gets or sets the padding mode used in the symmetric algorithm.
//
// Returns:
//     The padding mode used in the symmetric algorithm. The default is System.Security.Cryptography.PaddingMode.PKCS7.
//
// Exceptions:
//   T:System.Security.Cryptography.CryptographicException:
//     The padding mode is not one of the System.Security.Cryptography.PaddingMode values.

public virtual PaddingMode Padding { get; set; } 
```

# ios - iPad 3.2 模拟器和设备中的 PhotoScroller iOS 应用程序内存泄漏

> ID：10900534
> 
> 赞同：1
> 
> 时间：2012-06-05T15:48:39.630
> 
> 标签：ios, ipad, memory

我打算开发一个基于 Apple Developer 的 PhotoScroller iOS 应用程序的应用程序。但是我发现当 PhotoScroller 在滚动视图中加载 3 张照片时 - 在 Instrument 中它显示分配了 28+ MB 内存，并且在图像中滑动会增加内存使用并最终崩溃。示例应用程序在 iOS 4+ 模拟器和设备中没有问题，仅分配 1-2 MB 内存。

有谁知道实际发生了什么，或者如何解决这个问题。我们正计划开发一款从 iPad 3.2 开始支持的应用程序。

# sql-server - SQL Server 数据库已删除但仍包含表结构？

> ID：10900535
> 
> 赞同：0
> 
> 时间：2012-06-05T15:48:51.847
> 
> 标签：sql-server

在 SQL Server Management Studio 2008 中，我删除了我的数据库并检查了数据库文件最初存储的目录，文件已经消失。

如果我现在从 SQL Server Management Studio 使用与已删除数据库相同的名称执行“新数据库”，并期望它为空，我发现已删除数据库中的表仍然存在。

所以我的问题是，这些表如何存在于与我删除的数据库同名的新数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:08:48.923

创建数据库时，SQL Server 将`model`数据库用作模板。数据库被复制，然后`model`重命名为新数据库。

也许`model`数据库包含一些表。要验证这一理论，请检查`model`“系统数据库”下的数据库。

# .net - Spring.Net（& NHibernate？），缺少异常转换器

> ID：10900536
> 
> 赞同：2
> 
> 时间：2012-06-05T15:48:56.043
> 
> 标签：.net, asp.net-mvc, nhibernate, spring.net

我正在将使用 Spring.Net 和 NHibernate 运行的 ASP.NET Webform 应用程序移植到 ASP.NET MVC3。创建一个新项目并验证 Spring.Net 可以在同一解决方案中正确地跨项目注入依赖项后，我继续在新解决方案中导入服务和持久层项目。

我的映射现在看起来还不错（在本文末尾有更多关于它的信息），但是当我启动应用程序时，我收到以下错误：

> 在容器中找不到持久性异常翻译器。无法执行异常翻译。
> 
> [ConfigurationErrorsException：创建上下文'spring.root'时出错：在容器中找不到持久性异常翻译器。无法执行异常翻译。]

如果我理解得很好，这意味着引发了一个异常，并且 Spring.Net 不知道如何映射/处理它......对吗？

假设它来自 NHibernate，并且如与 NHibernate 集成相关[的 SpringFramework 文档中的第 44.3.3 节所述](http://www.springframework.net/doc-latest/reference/html/nh-quickstart.html)，我在映射中添加了一个 ExceptionTranslationProcessor...

```
<object type="Spring.Dao.Attributes.PersistenceExceptionTranslationPostProcessor, Spring.Data"/> 
```

...但它似乎没有做任何事情，我不知道在哪里进一步寻找。任何有绝妙想法或提示的人？

提前致谢！

* * *

以下是一些数据供参考：

在 web.config 文件中，我添加了`spring section group`和对 xml 定义文件的引用：

```
<configuration>
    <!-- Snip -->
    <configSections>
        <sectionGroup name="spring">            
            <section name="context" type="Spring.Context.Support.MvcContextHandler, Spring.Web.Mvc3"/>
            <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core"/>
            <section name="parsers" type="Spring.Context.Support.NamespaceParsersSectionHandler, Spring.Core"/>
        </sectionGroup>
    </configSections>
    <spring>
        <context>
            <resource uri="file://~/Config/controllers.xml"/>
            <resource uri="assembly://Service/Service.Config/Service.xml"/>
            <resource uri="assembly://Persistence.Hibernate/Persistence.Hibernate.Config/Persistence.xml"/>
        </context>
    </spring>
    <!-- Snip -->
</configuration> 
```

`PersistenceExceptionTranslationPostProcessor`我在 Persistence.xml 文件中添加。出于想法，我也尝试将其添加到其他 xml，但它没有做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T10:00:15.127

除了@Marijn 的帖子，根据您的配置，有时异常`No persistence exception translators found in container.`涵盖了真正的原因。附加到您的进程启动并捕获所有 spring.net 异常（Ctrl+Alt+E / CLR 异常）通常会揭示根本原因。

例如，`SessionFactory`即使正确`PersistenceExceptionTranslationPostProcessor`设置并注册到上下文，也会配置错误。

我通常从我的 DAO 中删除该`Repository`属性（它通过 AOP 添加异常转换并覆盖错误），以消除`PersistenceExceptionTranslationPostProcessor`导致底层错误显示的需要。

此外，您可以发布您的相关部分`web.config`和`Persistence.xml`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T08:24:34.570

`IPersistenceExceptionTranslator`当您的容器中没有实现的对象时，您会收到此错误。当您有一个 Spring.Net+NHibernate 应用程序时，这通常是 Spring.Net 的`LocalSessionFactoryObject`。`PersistenceExceptionTranslationPostProcessor`检查已注册`IPersistenceExceptionTranslator`实例的上下文。

在 NHibernate 异常中不会出现此错误，但在容器启动时会出现此错误。问题是 Spring 容器想要进行[异常翻译](http://www.springframework.net/doc-latest/reference/html/dao.html#dao-exceptions)，但在容器中找不到单个异常翻译器。

如果您不使用 Spring.net `LocalSessionFactoryObject`（无论出于何种原因），您应该在容器中注册自己`IPersistenceExceptionTranslator`的。界面非常简单：

```
public interface IPersistenceExceptionTranslator
{
    DataAccessException TranslateExceptionIfPossible(Exception ex);
} 
```

你可以以[`LocalSessionFactoryObject`实现`IPersistenceExceptionTranslator`](https://github.com/SpringSource/spring-net/blob/master/src/Spring/Spring.Data.NHibernate/Data/NHibernate/LocalSessionFactoryObject.cs#L982)为例。

# c++ - 将类布局添加到另一个类布局：“程序意外完成。”

> ID：10900538
> 
> 赞同：2
> 
> 时间：2012-06-05T15:49:03.203
> 
> 标签：c++, qt

我创建了一个类，我想在另一个类中添加这个类（两者都是布局），但我得到的唯一错误消息是程序崩溃了。

我觉得有一些明显的逻辑缺陷，但我没有找到，我可以分别显示它们，但是当我尝试将一个添加到另一个时，程序崩溃了。这是代码：

测量.h：

```
class Mesure : public QWidget
{
    public:
    Mesure(QString angle);

    private:
    QToolButton *m_buttonClose;
    QHBoxLayout *m_hlayoutMesure;
    QCheckBox *m_checkboxMesure;
    QLabel *m_labelAngle;
}; 
```

测量.cpp：

```
Mesure::Mesure(QString angle) : QWidget()
{
    QHBoxLayout *m_hlayoutMesure = new QHBoxLayout;
    QCheckBox *m_checkboxMesure = new QCheckBox(this);
    QToolButton *m_buttonClose = new QToolButton(this);
    QLabel *m_labelAngle = new QLabel(angle, this);

    m_buttonClose->setText("X");

    m_hlayoutMesure->addWidget(m_checkboxMesure);
    m_hlayoutMesure->addWidget(m_labelAngle);
    m_hlayoutMesure->addWidget(m_buttonClose);

    setLayout(m_hlayoutMesure);
} 
```

PanneauMesure.h：

```
class PanneauMesure : public QWidget
{
    public:
    PanneauMesure();
    void add(Mesure *mesure);

    private:
    QVBoxLayout *m_vlayoutMesures;
}; 
```

PanneauMesure.cpp：

```
PanneauMesure::PanneauMesure() : QWidget()
{
    QVBoxLayout *m_vlayoutMesures = new QVBoxLayout;
    setLayout(m_vlayoutMesures);
}

void PanneauMesure::add(Mesure *mesure)
{
    m_vlayoutMesures->addWidget(mesure);
    setLayout(m_vlayoutMesures);
} 
```

主.cpp：

```
int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    PanneauMesure panneau;
    Mesure mesure("14°");
    panneau.add(&mesure);

    return app.exec();
} 
```

编辑：问题解决了，我只需要像这样修改文件：

测量.cpp：

```
Mesure::Mesure(QString angle) : QWidget(),
    m_hlayoutMesure(new QHBoxLayout(this)),
    m_checkboxMesure(new QCheckBox(this)),
    m_buttonClose(new QToolButton(this)),
    m_labelAngle(new QLabel(angle, this))
{
    m_buttonClose->setText("X");

    m_hlayoutMesure->addWidget(m_checkboxMesure);
    m_hlayoutMesure->addWidget(m_labelAngle);
    m_hlayoutMesure->addWidget(m_buttonClose);

    setLayout(m_hlayoutMesure);
} 
```

PanneauMesure.cpp：

```
PanneauMesure::PanneauMesure() : QWidget(),
    m_vlayoutMesures( new QVBoxLayout(this))
{
    setLayout(m_vlayoutMesures);
}

void PanneauMesure::add(Mesure *mesure)
{
    m_vlayoutMesures->addWidget(mesure);
    setLayout(m_vlayoutMesures);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:58:55.927

在您的构造函数中，您创建隐藏类成员的局部变量。您将指向已分配元素的指针存储在这些局部变量中，但您的实际类变量是默认初始化的（即它们包含垃圾）。

`PanneauMesure::add`当访问这些垃圾值时（就像你在

作为旁注，您可能应该使用初始化列表来初始化您的类变量，如下所示：

```
Mesure::Mesure(QString angle):
    QWidget(),
    m_hlayoutMesure(new QHBoxLayout(this)), // always use parented constructor
                                            // when available in Qt
    // ...
{
    // logic
} 
```

此外，您不需要`setLayout`重复调​​用。

# java - h:selectManyListBox 的转换错误设置值

> ID：10900540
> 
> 赞同：1
> 
> 时间：2012-06-05T15:49:05.907
> 
> 标签：java, drop-down-menu, seam

我正在使用 seam 尝试制作一个 Web 应用程序，并且我正在尝试制作一个下拉框，显示存储在数据库中的车辆并允许用户选择多个车辆。一切正常，直到它尝试将其存储在对象中。

它给了我错误“sourceId=createEmployee:vehicle[severity=(ERROR 2), summary=(Conversion Error setting value '1 6' for '#{employeePort.vehicle}'.), detail=(Conversion Error setting value' 1 6' 为 '#{employeePort.vehicle}'。)]"

1 和 6 是车辆 ID，我试图将它们存储在我的 bean 中的字符串中。

这是我的下拉代码：

```
<h:selectManyListBox id="vehicle" value="#{employeePort.vehicle}" required="false">
    <s:selectItems value="#{employeePort.getVehicleIdList()}" var="veh" label="#{veh} #{employeePort.getModel(veh)}"/> 
</h:selectManyListBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:33:33.823

您正在从列表中选择多个项目（`value="#{employeePort.getVehicleIdList()}"`）并尝试将它们保存为字符串（`value="#{employeePort.vehicle}"`）。将它们设置为 list( `value="#{employeePort.vehicleList}"`) 或创建您自己的自定义转换器以将列表转换为字符串。

# visual-studio - Visual Studio 2011 Beta 是否已重命名为 VS2012？

> ID：10900541
> 
> 赞同：3
> 
> 时间：2012-06-05T15:49:08.373
> 
> 标签：visual-studio

还是 VS2012 是一个完全不同的版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T15:52:29.283

实际上，Visual Studio 11 已重命名为 Visual Studio 2012。从来没有 Visual Studio 2011 这样的东西。

# eclipse - 如何配置 Eclipse 的 Package Explorer 以像 IntelliJ IDEA 的包视图一样显示？

> ID：10900543
> 
> 赞同：8
> 
> 时间：2012-06-05T15:49:14.393
> 
> 标签：eclipse, intellij-idea

在 IntelliJ IDEA 中，左侧的“项目”窗格有“查看为：”，具有以下选项：

*   项目
*   套餐
*   范围
*   收藏夹

如果您选择“项目”，它会显示类似于 Eclipse 的“包资源管理器”的内容，但是如果您选择“包”并遵循以下约定：

*   源代码
    *   主要的
        *   爪哇
        *   组织
            *   ...
        *   资源
    *   测试
        *   爪哇
        *   组织
            *   ...
        *   资源

它显示了一个合并“main”和“test”文件夹的视图，从而在它们的关联类（它们测试的类）旁边显示单元测试。这是非常方便的IMO，有没有办法在Eclipse（3.7.2）中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-27T13:19:43.667

这是这样做的方法：

三角形图标 -> 包展示 -> 层次结构

请注意，IntelliJ 和 AndroidStudio 使用 Gradle 样式的文件夹，也就是说`src/main...`，eclipse 还不支持 Gradle 并使用较旧的样式。

![日食截图](../Images/6c9443f9309045f5e2d3cef749789bcd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:41:27.850

对于我们这些完全不熟悉 IntelliJ 的人来说，屏幕截图会有所帮助。您是否尝试过 Java Browsing Perspective 及其项目和包视图？

# mongodb - Casbah - 参数查找或 findOne 不返回那里的内容

> ID：10900544
> 
> 赞同：0
> 
> 时间：2012-06-05T15:49:17.903
> 
> 标签：mongodb, casbah

我遇到的问题与标题中描述的完全一样。

例如，如果我尝试：

```
 val key = "myKey"
  val value = "myVal"

  val one = Option(collection.findOne(MongoDBObject(key -> value)))
  val all = collection.find(MongoDBObject(key -> value)) 
```

然后我检查内容并：

```
 println(one)        =>    None
  println(all.size)   =>    0 
```

但是，如果我不使用 MongoDBObject 参数，它会起作用——它会找到所有的东西。

我究竟做错了什么？我假设参数对象指定了一个`key-value`条件，该条件应该使搜索只返回包含这些`key-value`对的结果......

而且不得不说key和value都是有效的。但是，该值是数字的，但是对于这些语句来说是字符串化的，所以应该没问题。或不？

**更新：**

在尝试捕获更精确地描述问题所需的数据时，我已经运行了足以了解问题根源的测试。事实证明，Casbah 不会留下“1”来保持 a `String`，它会自动将其转换为 a `Integer`，因此，将 String 与 Integer 进行比较，肯定永远不会返回`true`。好的，所以我可以考虑这样解决问题：

```
def getObjectBy(key: String, value: String) = {
  val all = collection.find()
  val buffer = Buffer[DBObject]()
  while(all.hasNext) { buffer += all.next }
  val haveTheKey = buffer.filter(_.keySet.contains(key))

  if(haveTheKey.size > 0) {
    val one = haveTheKey(0)
    val v = one.get(key)

    // 1st way (hell)
    v match {
      case i: Int => if(i == value.toInt) Some(one)
      case s: String => if(s == value) Some(one)
      case f: Float => if(s == value.toFloat) Some(one)
      //... and so on..
      case _ => None
    }

    // 2nd way (better?)
    if(v.toString == value) Some(one) else None

  } else None

} 
```

但这太荒谬了……我想，我只是在这里没有得到什么，请告诉我，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:58:57.903

好的，最后我想出了某种解决方案。在我的情况下，值只能是后裔`AnyVal`或非常`java.lang.String`。所以共同的父母将是`Any`。这就是为什么我将传递的`value`类型更改为`Any`：

```
def getObjectBy(key: String, value: Any) = {
  // ...
} 
```

它确实有效！哦，这太容易了！我从未`Object`在 Java 或`Any`Scala 中使用过，并且不认为它会那样工作......但是......

# android - HTC Evo 3D - 立体相机图像 + OpenGL 叠加

> ID：10900545
> 
> 赞同：2
> 
> 时间：2012-06-05T15:49:21.247
> 
> 标签：android, opengl-es, 3d, overlay, android-camera

我们使用 HTC Evo 3D，我们试图在自动立体模式下在相机的自动立体绘制预览图像上获得 3D 叠加层（使用 OpenGL ES 绘制的立方体），但我们无法让它工作。我们可以做的是拥有相机视图（2D 或 3D），或者我们可以让 OpenGL 立方体处于 3D 模式，但是当我们尝试将两者结合起来时，整个设备都会冻结（使用“ *W/SharedBufferStack(11043) : waitForCondition(LockCondition) 超时（身份=425，状态=0）。CPU 可能被锁定。再试一次。* “）或者我们只看到相机图像但没有覆盖。

对于冻结的问题，我们已经在网上阅读了一些信息，似乎除了修补内核之外没有真正的解决方案，因此我们目前专注于另一个问题。所以我们所拥有的是一个`S3DGLSurfaceView`可以扩展的`GLSurfaceView`，我们通过调用来启用 3D 支持

```
Surface surface = holder.getSurface();
formatResult = DisplaySetting.setStereoscopic3DFormat(surface,
                      DisplaySetting.STEREOSCOPIC_3D_FORMAT_SIDE_BY_SIDE); 
```

在这个视图上我们绘制我们的立方体（当我们只将这个视图添加到我们的活动时，它工作得很好）。但是，我们还有一个`CameraPreview`对象，它封装了一个`Surfaceview`我们通过调用给立体相机的对象

```
camera = Camera.open(CAMERA_STEREOSCOPIC);
camera.setPreviewDisplay(holder); 
```

`preview.getHolder()`持有人的存储位置`preview`是我们的`SurfaceView`。对于活动本身，我们使用 a `RelativeLayout`，首先添加相机预览，然后添加 OpenGL 表面 - 我们也尝试了相反的方法，但这并没有改变任何东西。我们也尝试过使用 z 顺序，但这也没有效果。

目前，我们的想法是不可能有两个视图都启用了自动立体模式（自动启用它的相机预览和我们手动启用它的 OpenGL 表面），但我们希望这是错误的，我们想念别的东西。

如果有人能告诉我们如何在 3D 相机图像上进行 3D 叠加，那就太好了——无论是在自动立体模式下。

# magento - Magento 电子邮件模板：$_item -> getDescription 返回 null

> ID：10900548
> 
> 赞同：4
> 
> 时间：2012-06-05T15:49:37.403
> 
> 标签：magento, email, templates

## 项目

修改 Magento 的电子邮件模板以包含长描述

## Magento 版本

1.6.2.0

## 正在编辑的文件

```
app/design/frontend/default/<template name>/template/email/order/items/order/default.phtml 
```

此文件中带有行号的感兴趣代码：

```
31 <strong style="font-size:11px;"><?php echo $this->htmlEscape($_item->getName()) ?></strong>
46 <?php echo $this->escapeHtml($_item->getDescription()) ?> 
```

## 问题

**$_item -> getName()**有效，但**$_item -> getDescription()**返回 null

## 调试

**$_item**的 Zend 转储（显示定义的“名称”；“描述”为空）：

```
array(79) {
["item_id"] => string(3) "584"
["order_id"] => string(3) "398"
["parent_item_id"] => NULL
["quote_item_id"] => string(4) "1951"
["store_id"] => string(1) "1"
["created_at"] => string(19) "2012-06-04 14:15:39"
["updated_at"] => string(19) "2012-06-04 14:16:18"
["product_id"] => string(3) "156"
["product_type"] => string(6) "simple"
["product_options"] => string(140) "a:1:{s:15:"info_buyRequest";a:3:{s:4:"uenc";s:48:"aHR0cDovL2Rldi5hcHBvZ2VlLmNvbS9iYXNlL21hYy5odG1s";s:7:"product";s:3:"156";s:3:"qty";i:1;}}"
["weight"] => string(6) "0.0100"
["is_virtual"] => string(1) "0"
["sku"] => string(9) "MC969LL/A"
["name"] => string(21) "11" MacBook Air 128GB"
["description"] => NULL
["applied_rule_ids"] => NULL
["additional_data"] => NULL
["free_shipping"] => string(1) "0"
["is_qty_decimal"] => string(1) "0"
["no_discount"] => string(1) "0"
["qty_backordered"] => NULL
["qty_canceled"] => string(6) "0.0000"
["qty_invoiced"] => string(6) "0.0000"
["qty_ordered"] => string(6) "1.0000"
["qty_refunded"] => string(6) "0.0000"
["qty_shipped"] => string(6) "1.0000"
["base_cost"] => NULL
["price"] => string(9) "1199.0000"
["base_price"] => string(9) "1199.0000"
["original_price"] => string(9) "1199.0000"
["base_original_price"] => string(9) "1199.0000"
["tax_percent"] => string(6) "7.0000"
["tax_amount"] => string(7) "83.9300"
["base_tax_amount"] => string(7) "83.9300"
["tax_invoiced"] => string(6) "0.0000"
["base_tax_invoiced"] => string(6) "0.0000"
["discount_percent"] => string(6) "0.0000"
["discount_amount"] => string(6) "0.0000"
["base_discount_amount"] => string(6) "0.0000"
["discount_invoiced"] => string(6) "0.0000"
["base_discount_invoiced"] => string(6) "0.0000"
["amount_refunded"] => string(6) "0.0000"
["base_amount_refunded"] => string(6) "0.0000"
["row_total"] => string(9) "1199.0000"
["base_row_total"] => string(9) "1199.0000"
["row_invoiced"] => string(6) "0.0000"
["base_row_invoiced"] => string(6) "0.0000"
["row_weight"] => string(6) "0.0100"
["base_tax_before_discount"] => NULL
["tax_before_discount"] => NULL
["ext_order_item_id"] => NULL
["locked_do_invoice"] => NULL
["locked_do_ship"] => NULL
["price_incl_tax"] => string(9) "1282.9300"
["base_price_incl_tax"] => string(9) "1282.9300"
["row_total_incl_tax"] => string(9) "1282.9300"
["base_row_total_incl_tax"] => string(9) "1282.9300"
["hidden_tax_amount"] => NULL
["base_hidden_tax_amount"] => NULL
["hidden_tax_invoiced"] => NULL
["base_hidden_tax_invoiced"] => NULL
["hidden_tax_refunded"] => NULL
["base_hidden_tax_refunded"] => NULL
["is_nominal"] => string(1) "0"
["tax_canceled"] => NULL
["hidden_tax_canceled"] => NULL
["tax_refunded"] => NULL
["gift_message_id"] => NULL
["gift_message_available"] => string(1) "0"
["base_weee_tax_applied_amount"] => string(6) "0.0000"
["base_weee_tax_applied_row_amnt"] => string(6) "0.0000"
["base_weee_tax_applied_row_amount"] => string(6) "0.0000"
["weee_tax_applied_amount"] => string(6) "0.0000"
["weee_tax_applied_row_amount"] => string(6) "0.0000"
["weee_tax_applied"] => string(6) "a:0:{}"
["weee_tax_disposition"] => string(6) "0.0000"
["weee_tax_row_disposition"] => string(6) "0.0000"
["base_weee_tax_disposition"] => string(6) "0.0000"
["base_weee_tax_row_disposition"] => string(6) "0.0000"
} 
```

## 问题

为什么这里的描述为空？

我发现在下订单后更改产品名称不会更改订单中的名称，因此订单对象似乎在订购的产品上有自己的数据，该数据与实时目录分开（我想有道理：您希望该信息是静态且不可更改的）。

由于浪费了数据库中的空间，它不会在每次订购商品时尝试存储商品的长和/或短描述也是有道理的。但是为什么要包含描述字段只是为了将其留空？

我获取该信息以加载目录/产品模型、找到我想要的产品和属性的唯一方法是（[就像这里](https://stackoverflow.com/questions/10588616/magento-product-getname-empty)）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T16:53:44.763

你在所有方面都是正确的。我不知道他们为什么包含该`description`字段，但在我所有的 250,000 个订单中它都是空的。

您可以通过以下方法获取描述：

```
$_description = Mage::getModel('catalog/product')
    ->load($_item->getProductId())
    ->getDescription(); 
```

`null`如果产品已被删除，这很可能会返回。

# flash - SWFTools 和事件 - 创建内部链接

> ID：10900552
> 
> 赞同：2
> 
> 时间：2012-06-05T15:50:01.227
> 
> 标签：flash, actionscript-2, pdf2swf

我正在使用 FlashPage 生成基于 PDF 的翻页。基本上我们使用 swftools (pdf2swf) 将每个 pdf 页面转换为 swf 并在 FlashPage 中显示。

要跟踪内部链接，FlashPage 建议我们将以下操作附加到按钮：

```
on(rollOver, dragOver){
            _root.canflip=false; // flipping disabled
}
on(rollOut, dragOut, releaseOutside){
            _root.canflip=true; // flipping enabled
}

on(release){
            _root.canflip=true; // flipping enabled
            _root.gotoPage(4,true); // go to page
} 
```

在 swftools 中，我们可以使用以下方法将函数附加到内部链接`-s internallinkfunction=<name>`

我怎样才能将这些事件附加`on(release){}`到`internallinkfunction`

另外，有一种简单的方法可以调试 swftools 生成的 swf 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:11:22.043

我终于想出了一个解决方案。

我创建了一个很长的帖子来解释如何解决它：[http ://www.zeletron.com.br/2012/06/reverse-engineering-swf-to-fix-limitation-in-swftools.html](http://www.zeletron.com.br/2012/06/reverse-engineering-swf-to-fix-limitation-in-swftools.html)

# html - IE8 上带有嵌套 img 布局错误的 HTML 输入

> ID：10900555
> 
> 赞同：0
> 
> 时间：2012-06-05T15:50:09.620
> 
> 标签：html, css, internet-explorer, internet-explorer-8

我在使用 IE8 和我的 html/css 时遇到问题 =/

该代码在 Chrome、IE9、Mozilla 和 Safari 中运行良好。但在 IE8 上它很难看：

![在此处输入图像描述](../Images/8d855322a7d1308f9281c935d16f8212.png)

我尝试了很多东西，但没有结果。好像是填充有问题...

HTML：

```
<div class="TituloDasTelas">
<span id="MainContent_LabelTituloTela">Test</span>
<span style="font-size: x-large">|</span>
<div class="buttons">

<input name="ctl00$MainContent$TextBoxFiltro" type="text" maxlength="100" id="MainContent_TextBoxFiltro" title="" class="TextBox300">

<input type="submit" name="ctl00$MainContent$ButtonPesquisar" value="Pesquisar" id="MainContent_ButtonPesquisar" class="regular">

<input type="button" id="PesqAvancada" value="" class="ButtonPesqAvancada" title="">

<img id="MainContent_ImagePesquisaAvancada" class="imgPesqAvancada" src="../../Include/Imagens/down.gif" alt="Pesq.Avançada">

<input type="submit" name="ctl00$MainContent$ButtonExportarParaExcel" value="Exportar" id="MainContent_ButtonExportarParaExcel" title="" class="positive">
</div>
</div> 
```

CSS：

```
.buttons
{
    margin: 0 0 10px;
    display: inline-block;
}
 .buttons input[type=submit], .buttons input[type=button]
{
    border-right: 1px solid #dedede;
    border-bottom: 1px solid #dedede;
    display: inline;
    float: center;
    background-color: #f5f5f5;
    border-top: 1px solid #eee;
    border-left: 1px solid #eee;
    font-family: "Lucida Grande" , Tahoma, Arial, Verdana, sans-serif;
    font-size: 12px;
    line-height: 130%;
    text-decoration: none;
    font-weight: 700;
    color: #565656;
    cursor: pointer;
    margin-left: 5px;
    margin-right: 0;
    margin-top: 10px;
}
.buttons input[type=submit], .buttons input[type=button]
{
    width: 150px;
    overflow: visible;
    padding: 4px 10px 3px 7px;
}

.buttons button[type]
{
    line-height: 17px;
    padding: 5px 10px 5px 7px;
}
:first-child + html button[type]
{
    padding: 4px 10px 3px 7px;
}
.buttons button img, .buttons a img
{
    border: none;
    width: 16px;
    height: 16px;
    margin: 0 3px -3px 0 !important;
    padding: 0;
}
input[type=submit].positive, .buttons a.positive
{
    color: #529214;
}
.buttons a.positive:hover, input[type=submit].positive:hover, .buttons input[type=button]:hover
{
    background-color: #E6EFC2;
    border: 1px solid #C6D880;
    color: #529214;
}
.buttons a.positive:active
{
    background-color: #529214;
    border: 1px solid #529214;
    color: #fff;
}
.buttons a.negative, input[type=submit].negative, .buttons input[type=button]
{
    color: #d12f19;
}
.buttons a.negative:hover, input[type=submit].negative:hover, .buttons input[type=button]:hover
{
    background: #fbe3e4;
    border: 1px solid #fbc2c4;
    color: #d12f19;
}
.buttons a.negative:active
{
    background-color: #d12f19;
    border: 1px solid #d12f19;
    color: #fff;
}
input[type=submit].regular, .buttons a.regular, .buttons input[type=button]
{
    color: #369;
}
input[type=submit]:hover, .buttons a:hover, .buttons a.regular:hover, input[type=submit].regular:hover, .buttons input[type=button]:hover
{
    background-color: #dff4ff;
    border: 1px solid #c2e1ef;
    color: #369;
}
.buttons a:active, .buttons a.regular:active
{
    background-color: #6299c5;
    border: 1px solid #6299c5;
    color: #fff;
}

.ButtonPesqAvancada, .buttons input[type=button]
{
    width: 6px;
    margin-left: -6px;
    z-index: 2;
}

.imgPesqAvancada 
{
    cursor:pointer;
    margin-left:-20px;
    z-index: -1px;
} 
```

严重不知道是什么问题。有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:23:21.043

好的，我发现了问题。它与输入的字体有关。我在输入值上写了“1”，并使其与背景颜色相同。现在它在所有浏览器上都很好。

# html - 使用firefox时右边距有空白

> ID：10900556
> 
> 赞同：0
> 
> 时间：2012-06-05T15:50:11.067
> 
> 标签：html, css

使用 Firefox 查看网站时，在右边距中有一些不需要的空白。其他浏览器不会出现问题。

我尝试在所有元素周围放置一个 2px 边框，以查看是否有隐藏的 div，但似乎没有。

该页面的链接是 。. .

[http://msmdesignz-testing.info/wp/](http://msmdesignz-testing.info/wp/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:17:23.033

有一个 Facebook iframe 被注入到`<div id="fb-root"></div>`您的页面中。该 iframe（标识为 iframe id="fabb7e18d7b7ca" class="FB_UI_Hidden"）具有内联样式 width="575px"，这会导致 FF 页面右侧出现额外的空白。

您需要找到一种方法来消除该宽度定义。在您的 css 中的某处添加样式级联，如下所示：（`.FB_UI_Hidden { width: 100px !important; }`或具有适当的宽度）将解决您的问题。

# c# - Excel 互操作打印

> ID：10900565
> 
> 赞同：7
> 
> 时间：2012-06-05T15:50:42.967
> 
> 标签：c#, excel, printing, interop

我需要使用以下打印设置打印 Excel 工作表的选定区域（我使用 Range.Select() 选择的区域）：

打印机：Microsoft XPS Document Writer
打印选择
横向
A4
正常页边距
适合一页纸

如何使用 _Worksheet.PrintOut 或 _Worksheet.PrintOutEx 实现此目的？

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T16:52:27.173

我假设您已经设置了对 Excel 的引用并且已经声明了您的对象，例如

```
Microsoft.Office.Interop.Excel.Application xlexcel;
Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;
Microsoft.Office.Interop.Excel.Range xlRange;
object misValue = System.Reflection.Missing.Value; 
```

这在代码的后面部分。

```
// Get the current printer
string Defprinter = null;
Defprinter = xlexcel.ActivePrinter;

// Set the printer to Microsoft XPS Document Writer
xlexcel.ActivePrinter = "Microsoft XPS Document Writer on Ne01:";

// Setup our sheet
var _with1 = xlWorkSheet.PageSetup;
// A4 papersize
_with1.PaperSize = Excel.XlPaperSize.xlPaperA4;
// Landscape orientation
_with1.Orientation = Excel.XlPageOrientation.xlLandscape;
// Fit Sheet on One Page 
_with1.FitToPagesWide = 1;
_with1.FitToPagesTall = 1;
// Normal Margins
_with1.LeftMargin = xlexcel.InchesToPoints(0.7);
_with1.RightMargin = xlexcel.InchesToPoints(0.7);
_with1.TopMargin = xlexcel.InchesToPoints(0.75);
_with1.BottomMargin = xlexcel.InchesToPoints(0.75);
_with1.HeaderMargin = xlexcel.InchesToPoints(0.3);
_with1.FooterMargin = xlexcel.InchesToPoints(0.3);

// Print the range
xlRange.PrintOutEx(misValue, misValue, misValue, misValue, 
misValue, misValue, misValue, misValue);

// Set printer back to what it was
xlexcel.ActivePrinter = Defprinter; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T15:30:56.903

为了使“在一页上调整表格”起作用，我们还应该将 Zoom 属性设置为 false。

// 将工作表放在一页上

```
_with1.FitToPagesWide = 1;

_with1.FitToPagesTall = 1;

_with1.Zoom = False; 
```

# c++ - 升压未能获得锁定

> ID：10900566
> 
> 赞同：2
> 
> 时间：2012-06-05T15:50:48.180
> 
> 标签：c++, boost, boost-thread

我正在开发一个实时音乐应用程序。作为新手使用 boost 库。[我用受保护的 SyncronizedQueue 实现了生产者/消费者关系，实际上我实现了https://www.quantnet.com/cplusplus-multithreading-boost/](https://www.quantnet.com/cplusplus-multithreading-boost/)的 18.11 和 18.12 部分。解析 midi 输入时，出现以下异常：

```
terminate called after throwing an instance of 'boost::exception_detail::clone_impl
<boost::exception_detail::error_info_injector<boost::lock_error> >'
what():  boost::lock_error 
```

在生产者中解析输入的代码：

```
RtMidiIn *midiin = new RtMidiIn();
std::vector<unsigned char> message;
int nBytes, i;
double stamp;
m_queue=queue;        

// Check available ports.
unsigned int nPorts = midiin->getPortCount();
if ( nPorts == 0 ) {
    std::cout << "No ports available!\n";
    goto cleanup;
}

midiin->openPort( 1 );

// Don't ignore sysex, timing, or active sensing messages.
midiin->ignoreTypes( false, false, false );

// Install an interrupt handler function.
done = false;
(void) signal(SIGINT, finish);

// Periodically check input queue.
std::cout << "Reading MIDI from port ... quit with Ctrl-C.\n";
while ( !done ) {
  stamp = midiin->getMessage( &message );
  nBytes = message.size();
  if(nBytes>0){
    if((message.size()!=1)&&((int)message.at(0)!=137)){
            for ( i=0; i<nBytes; i++ )
            std::cout << "Byte " << i << " = " << (int)message[i] << ", ";
            if ( nBytes > 0 )
            std::cout << "stamp = " << stamp << std::endl;
            m_queue->Enqueue("asd");
    }
}
} 
```

它在第一次遇到时中断：

```
m_queue->Enqueue("asd"); 
```

尝试执行时：

```
boost::unique_lock<boost::mutex> lock(m_mutex); 
```

任何帮助表示赞赏！

编辑1：

这是 SynchronizedQueue 对象。调用 Enqueue() 时抛出异常。

```
template <typename T>
class SynchronizedQueue
{
private:
    std::queue<T> m_queue;                      // Use STL queue to store data
    mutable boost::mutex m_mutex;                       // The mutex to synchronise on
    boost::condition_variable m_cond;       // The condition to wait for

public:

    // Add data to the queue and notify others
    void Enqueue(const T& data)
    {
        // Acquire lock on the queue
            boost::unique_lock<boost::mutex> lock(m_mutex);
        // Add the data to the queue
        m_queue.push(data);
            // Notify others that data is ready
        m_cond.notify_one();
        } // Lock is automatically released here

    // Get data from the queue. Wait for data if not available
    T Dequeue()
    {

        // Acquire lock on the queue
        boost::unique_lock<boost::mutex> lock(m_mutex);
        //lock();
        // When there is no data, wait till someone fills it.
        // Lock is automatically released in the wait and obtained 
        // again after the wait
        while (m_queue.size()==0) m_cond.wait(lock);

        // Retrieve the data from the queue
        T result=m_queue.front(); m_queue.pop();
        return result;
    } // Lock is automatically released here
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T20:01:46.833

大多数时候，当我偶然发现这样的问题时，是被锁定的互斥体已经被破坏或尚未构造。当解析器线程开始解析时，您确定要传递给解析器的队列已经构建了吗？或者可能是，包含队列作为局部变量的循环的退出停止了？也许您可以进行快速测试并将 d'tor 添加到队列中并在那里设置断点。

问候托尔斯滕

# c# - 奇怪：按下按钮后 WinForms 表单会自动关闭

> ID：10900569
> 
> 赞同：8
> 
> 时间：2012-06-05T15:51:07.887
> 
> 标签：c#, .net, winforms

我的应用程序是 WinForms .NET 4 (C#)，其中一个表单在按下按钮后会自动关闭。

*   表单确实有默认的接受和取消按钮，但这些都没有被触及。
*   有一个 ButtonTestConnection_Click 事件，当单击它时，它会完成它的工作，但会以某种方式关闭表单。
*   我正在使用鼠标单击按钮，因此这不是级联击键的情况。
*   我没有在这个函数中设置 DialogResult。

我还尝试检查流浪 this.Close / this.Dispose 调用，但没有找到。

这是代码：

```
private void ButtonTestConnection_Click (object sender, System.EventArgs e)
{
    this.Enabled = false;
    this.Cursor = System.Windows.Forms.Cursors.WaitCursor;

    this.ProgressBar.Minimum = 0;
    this.ProgressBar.Maximum = 500;
    this.ProgressBar.Value = 0;

    this.ProgressBar.Visible = true;
    this.ButtonTestConnection.Visible = false;

    try
    {
        while (this.ProgressBar.Value < this.ProgressBar.Maximum)
        {
            // Some proxy code.
            this.ProgressBar.Value++;
        }
    }
    catch
    {
    }

    this.ProgressBar.Visible = false;
    this.ButtonTestConnection.Visible = true;

    this.ProgressBar.Invalidate();
    System.Windows.Forms.Application.DoEvents();
    System.Threading.Thread.Sleep(10);

    this.Cursor = System.Windows.Forms.Cursors.Default;
    this.Enabled = true;

    System.Windows.Forms.MessageBox.Show(result.ToString());
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-05T15:53:47.167

检查按钮上的属性是否`DialogResult`等于`None`。
如果没有，那么当您点击该按钮时表单将关闭，并且表单将返回 Button 的 DialogResult 属性的设置。

通常，当您复制/粘贴现有​​表单的按钮但忘记在粘贴的按钮上删除原始 DialogResult 设置时，这种情况经常发生

# asp.net - ASP.Net Web Service 部署后不返回数据

> ID：10900570
> 
> 赞同：0
> 
> 时间：2012-06-05T15:51:10.330
> 
> 标签：asp.net, web-services, deployment, iis-7, web

```
Visual Studio 2010
.Net framework 4.0
IIS 7.0
Windows Server 2008 
```

> ```
> within a visual studio solution I have: 
> 
> - Website project 
> - Webservice project 
> ```

基本上，网站功能调用网络服务方法来选择/插入/更新数据。

```
This works fine when I try to run through the visual studio, but does not work on the server. 
 - using Visual Studio 2010 express on the server, the solution compiles successfully and gets the requested data. 
 - however, if I try to retrieve some data from deployed web service like:
 http://localhost/LTC_webservice/LTCWebService.asmx/GetWorkTypes 
```

我没有桌子..所以我的网站得到这个页面：

找不到表 0。

```
IIS Settings: 
- using ASP.Net v4.0 application pool 
- Managed Pipeline = Classic
- ISAPI and CGI Restrictions: allowed on ASP.NET v4.0.30319 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:26:39.907

数据库连接应该是SQL认证，不是windows认证。我的连接字符串使用 Windows 身份验证连接到数据库，而不是使用用户 ID 和密码的 SQL 身份验证。

# user-interface - IlegalStateException：布局期间请求布局

> ID：10900572
> 
> 赞同：0
> 
> 时间：2012-06-05T15:51:13.537
> 
> 标签：user-interface, blackberry, blackberry-jde

我试图`LabelField`在其布局期间（在 layout() 方法内）设置一些文本，具体取决于显示器的方向，方法如下：

```
LabelField roomDescLabel = new LabelField("", Field.FIELD_VCENTER) {
    protected void layout(int width, int height) {
        if (Display.ORIENTATION_LANDSCAPE == orientation) {
            setText("LANDSCAPE");
        } else {
            setText("NOT LANDSCAPE");
        }
        super.layout(width, height);
    }
}; 
```

有时，我会在布局消息期间捕获一个`IllegalStateException`with **Layout 请求。**该消息是有道理的，因为这正是我正在做的（我正在调用`setText()`它反过来请求布局更新）。是否有任何可接受的方法来根据显示器的方向设置文本值？

我已经找到了解决这个问题的方法，但我对此并不完全满意。解决方案是覆盖`LabelField`管理器的`sublayout()`方法，并将现有标签字段替换为具有更新文本的新标签字段（并且仅调用 to `super.sublayout()`）。令人惊讶的是，此解决方法按预期工作，并且不会触发布局更新。

**更新**`invokeLater()`：另一种可能的解决方案`setText()`是调用. 与我之前提出的解决方案相比，这种方法的缺点是和方法将被调用两次。`layout()``LabelField``sublayout()``paint()`

# javascript - 检查是否使用Javascript在GridView的一行中选中了asp Checkbox

> ID：10900576
> 
> 赞同：0
> 
> 时间：2012-06-05T15:51:28.227
> 
> 标签：javascript, asp.net

我有一个网格视图，我想看看第一列中的复选框是否被选中。如果选中该复选框，则会打开一个新窗口。我不知道如何查看复选框是否被选中。请帮助下面的功能不起作用，我不知道为什么。

```
function mapSelectedClick() 
    {
        var CustomerIDs = "";
        var grid = document.getElementById('<%=grdCustomers.ClientID %>');

        for (var i = 1; i < grid.rows.length; i++)
        {
            var Row = grid.rows[i];
            var CustomerID = grid.rows[i].cells[1].innerText;
            if (grid.rows[i].cell[0].type == "checkbox")
            {
                if (grid.rows[i].cell[0].childNodes[0].checked)
                {
                    customerIDs += CustomerID.toString() + ',';
                }
            }
        }

        customerIDs = customerIDs.substring(0, customerIDs.length-1);
        window.open("MapCustomers.aspx?CustomerIDs=" + customerIDs);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:29:01.020

您的代码中存在一些问题：

1.  在这两种`if`情况下，您都使用`cell[0]`而不是`cells[0]`
2.  在您使用的外部`if`条件下`cell[0].type == "checkbox"`。单元格不能有类型复选框，它包含`chekbox`控件作为其子项

像这样修改你的函数：

```
function mapSelectedClick() 
{
    var CustomerIDs = "";
    var grid = document.getElementById('<%=grdCustomers.ClientID %>');

    for (var i = 1; i < grid.rows.length; i++)
    {
        var Row = grid.rows[i];
        var CustomerID = Row.cells[1].innerText;
        var ctrl = Row.cells[0].childNodes[0];
        if (ctrl.type == "checkbox")
        {
            if (ctrl.checked)
            {
                customerIDs += CustomerID.toString() + ',';
            }
        }
    }

    customerIDs = customerIDs.substring(0, customerIDs.length-1);
    window.open("MapCustomers.aspx?CustomerIDs=" + customerIDs);
} 
```

请注意，这`innerText`不是跨浏览器兼容的，请尽可能使用 innerHTML。

# vb.net - DateTimePicker VB.Net 在关闭时保存值

> ID：10900578
> 
> 赞同：0
> 
> 时间：2012-06-05T15:51:33.497
> 
> 标签：vb.net, datetimepicker, savestate

我有 2 个 Forms.Form 1 是主要的，并拥有一个按钮，该按钮应显示 msgbox，其日期是在 Form 2 上的 datetimepicker 上选择的。msgbox 上显示的日期应为短格式（dd.MM.yyyy。）。

在程序开始时，datetimepicker 应重置为今天，msgbox 应显示今天日期，除非用户在 Form2 上选择另一个日期。如果用户转到 From 2 并更改日期 Form 2 应保存新值，并且 msgbox 应在按钮单击 form1 后显示它。我该怎么做呢？

我在“日期”类型的设置中设置了 myDate 参数，但没有设置值。在form1加载我有： `my.Settings.myDate = Today`

在 Form2 负载上我有：

```
datetimepicker1.Value = my.Settings.myDate 
```

在 Form2 关闭时，我有：

```
 my.Settings.myDate = datetimepicker1.Value 
```

这会正确设置选择器上的日期，但是当我转到 form2 并更改值，然后关闭 form2 并重新打开它时，它仍然显示我选择的日期，但 msgbox 显示初始值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:45:53.710

将显示消息框的行更改为：

```
MsgBox(my.Settings.myDate) 
```

或者更好的是，将其更改为 .NET 方式而不是 VB6 方式：

```
MessageBox.Show(my.Settings.myDate.ToShortDateString()) 
```

我认为它对您失败的原因是因为您正在使用全局 Form2 对表单的引用，该表单可能与您显示的表单的实例相同，也可能不同？如果没有看到更多代码，很难说。

# java - 如何判断 Java 是 Sun / Oracle / OpenJDK？

> ID：10900579
> 
> 赞同：17
> 
> 时间：2012-06-05T15:51:40.057
> 
> 标签：java, oracle, openjdk, sun

> **可能重复：**
> [我正在使用哪个 JRE](https://stackoverflow.com/questions/8472121/which-jre-i-am-using)

我试图弄清楚我的 HPC 环境中的 Java 安装是否正在运行 Sun JVM、Oracle 或 OpenJDK。由于我没有管理员访问权限并且我没有安装 Java，有没有一种快速的方法可以确定我安装了哪个 JVM？

```
standage@login4:~$ which java
/usr/bin/java
standage@login4:~$ java -version
java version "1.6.0_03"
Java(TM) SE Runtime Environment (build 1.6.0_03-b05)
Java HotSpot(TM) Server VM (build 1.6.0_03-b05, mixed mode)
standage@login4:~$ uname
Linux 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:57:38.373

System.getProperties()有一个`java.vendor`属性，它应该为您提供您正在寻找的信息。

在我的 Mac 上是：

```
java.vendor=Apple Inc. 
```

# ios - 单个 TTImageView 中的多个图像

> ID：10900584
> 
> 赞同：1
> 
> 时间：2012-06-05T15:52:21.197
> 
> 标签：ios, uiimage, three20

我想`UIImage`在我的`TTPhotoView`. 有什么好的总体策略来实现这一点的想法吗？父类`TTImageView`有一个单一的属性`UIImage`，因此支持多个图像似乎并不简单。我尝试使用石英合并多个图像，然后将单个合并图像传递给`TTPhotoView`. 这样做时性能很慢。我希望有一种干净的方法可以将多个视图添加到单个`TTImageView`.

# asp.net - 将文件从 Web 应用程序复制到网络目录

> ID：10900586
> 
> 赞同：0
> 
> 时间：2012-06-05T15:52:27.130
> 
> 标签：asp.net, impersonation, network-share

我计划在 Web 应用程序中使用模拟将文件复制到目标网络共享位置。我想将许多文件复制到许多网络位置，并且高峰时段的流量很高。我可以每隔一段时间将许多文件批量复制到许多网络位置。

我将使用以下代码来实现 [http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

请告诉我应该使用哪种 LogonType。根据我的理解，适用于我的场景的 LogonType 如下。

*   LOGON32_LOGON_INTERACTIVE = 2
*   LOGON32_LOGON_NETWORK = 3
*   LOGON32_LOGON_NETWORK_CLEARTEXT = 8

目前我打算使用LOGON32_LOGON_INTERACTIVE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:10:14.747

LOGON32_LOGON_INTERACTIVE should be avoided since it should open a prompt on client terminal asking for password, consider LOGON32_LOGON_NETWORK or LOGON32_LOGON_BATCH instead. If you considering using batch process, the impersonation should use the desktop LogonUser api : [http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)

Or schedule the task and run it as a specific user.

# android - 进度对话框显示太晚

> ID：10900588
> 
> 赞同：2
> 
> 时间：2012-06-05T15:52:32.403
> 
> 标签：android, android-asynctask, progressdialog

我有一个要执行以下操作的应用程序：

1.  显示一个带有按钮和 TextView 的活动。
2.  用户单击按钮，应用程序会显示一个进度对话框。
3.  应用程序调用 Web 服务来获取列表。
4.  进度对话框被隐藏，并出现一个列表选择对话框以显示检索到的列表。
5.  用户选择列表中的一项。
6.  项目显示在 TextView 中。

问题是会发生这种情况：

1.  显示一个带有按钮和 TextView 的活动。
2.  用户单击按钮和按钮状态更改为选中。
3.  几秒钟后，列表选择对话框出现，显示检索到的列表。
4.  用户选择列表中的一项。
5.  进度对话框显示几秒钟，然后隐藏。
6.  项目显示在 TextView 中。

Web 服务在 AsyncTask 中执行，进度对话框显示在 onPreExecute() 方法中，并在 onPostExecute() 方法中关闭：

```
public class WebService extends AsyncTask<Void, Void, Boolean> {

  public void onPreExecute() {
    _progressDialog = ProgressDialog.show(_context, "", message);
  }

  protected Boolean doInBackground(Void... params) {
    try {
      // Execute web service
    }
    catch (Exception e) {
      e.printStackTrace();
    }

    return true;
  }

  protected void onPostExecute(Boolean result) {
    _progressDialog.hide();
  }
} 
```

执行 Web 服务并显示对话框的代码：

```
WebService ws= new WebService();
ws.execute();

// Web service saves retrieved list in local db

// Retrieve list from local db

AlertDialog.Builder db = new AlertDialog.Builder(context);
db.setTitle("Select an Item");
ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(context,
        android.R.layout.simple_selectable_list_item, list);
db.setAdapter(listAdapter, null);
db.show(); 
```

我是否需要在代码中添加一些内容以确保进度对话框显示在列表选择对话框之前？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:54:28.430

我有同样的问题。我试图在任务之前显示进度对话框，使用 post runnable，使用 runOnUiTask 可运行。没有什么能做到这一点。
对话框总是在工作完成后出现，或者根本不出现。

我刚刚找到并且证明对我有用的解决方案是将**doInBackground**代码放入**try{}catch{}**块中。

不要问我为什么有效。我的结论是，在某些情况下阻止消息处理程序发送消息的 Android 操作系统设计存在问题。并且以某种方式 try/catch 给处理程序一个刹车并发送消息。

注意：即使我的代码没有抛出任何异常，我也使用了 try/catch 块，只是使用了

```
try {
     // code
}
catch( Exception e) { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:59:41.043

这是我的做法：

```
public OnClickListener loginListener = new OnClickListener() {
    public void onClick(View v) {
        ProgressDialog progressDialog = new ProgressDialog(activity);
        progressDialog.setMessage("Logging in...");
        LoginTask loginTask = new LoginTask(activity, progressDialog, loginLayout, loggedInLayout);
        loginTask.execute();
    }
}; 
```

异步任务：

```
protected void onPreExecute() {
    progressDialog.show();
}

protected void onPostExecute(Integer responseCode) {
if (responseCode == 1) {
        progressDialog.dismiss();
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(activity.getApplicationContext(), "Logged in.", duration);
        toast.show();
        activity.bar.getTabAt(0).setText(dbHandler.getUserDetails().get("email")); 
```

因此，我实际上在主要活动中创建了 ProgressDialog，并在我什至声明/执行任务之前设置了它的消息。然后，任务显示和**关闭**（而不是隐藏）对话框。

让我知道这个是否奏效！

# joomla - 后端访客柜台 - Joomla 1,5 网站

> ID：10900590
> 
> 赞同：1
> 
> 时间：2012-06-05T15:52:41.040
> 
> 标签：joomla, visitor-statistic

是否可以在 Joomla 1.5 站点的前端设置不可见但在后端可见的访客计数器？我想知道有多少人在我的网站上在线，并在后端查看这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:26:30.090

我在所有以前的 Joomla 1.5 网站上都使用过这个扩展。告诉你用户名、IP、国家、城市等。

[http://extensions.joomla.org/extensions/site-management/analytics/visitors/8946](http://extensions.joomla.org/extensions/site-management/analytics/visitors/8946)

希望这可以帮助

# javascript - 统计数组中的重复项

> ID：10900591
> 
> 赞同：2
> 
> 时间：2012-06-05T15:52:43.900
> 
> 标签：javascript, arrays, sorting

我有以下 JavaScript 数组：

```
var President = new Array();
President[0]="Thomas Jefferson";
President[1]="Thomas Jefferson";
President[2]="Thomas Jefferson";
President[3]="Thomas Jefferson";
President[4]="Thomas Jefferson";
President[5]="Thomas Jefferson";
President[6]="Thomas Jefferson";
President[7]="Thomas Jefferson";
President[8]="Thomas Jefferson";
President[9]="Thomas Jefferson";
President[10]="Thomas Jefferson";
President[11]="Thomas Jefferson";
President[12]="Thomas Jefferson";
President[13]="James Madison";
President[14]="James Madison";
President[15]="James Madison";
President[16]="James Madison";
President[17]="James Madison";
President[18]="James Madison";
President[19]="James Madison";
President[20]="Abraham Lincoln";
President[21]="Abraham Lincoln";
President[22]="Abraham Lincoln";
President[23]="Abraham Lincoln";
President[24]="Abraham Lincoln";
President[25]="George Washington"; 
```

如何统计重复的项目，以便输出如下：

```
Thomas Jefferson: 13
James Madison: 7
Abraham Lincoln: 5
George Washington: 1 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:07:11.920

@Tyson：不应该使用 for.. in 遍历数组。

```
 for (var stats = {}, potus, i = President.length; i--;) {
    if (!((potus = President[i]) in stats)
      stats[potus] = 0; // Initialize a new counter
    stats[potus]++;
  }

  // Now stats['Thomas Jefferson'] will be 13 etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:58:51.697

我不是 javascript 开发人员，但根据[这篇](http://www.mojavelinux.com/articles/javascript_hashes.html)关于 js 中的哈希表的文章，您似乎需要以下内容：

```
var h = new Object();
for (var p in President) {
    if (h.hasItem(p)) {
        h.setItem(p, h.getItem(p) + 1);
    }
    else {
        h.setItem(p, 1);
    }
}

for (var p in h)
{
    document.write(p);
    document.write(":");
    document.write(h.getItem(p));
    document.write("<br />");
} 
```

# sql - 动态插入视图

> ID：10900594
> 
> 赞同：0
> 
> 时间：2012-06-05T15:52:48.780
> 
> 标签：sql, sql-server, sql-server-2008

我通过引用两个同义词创建了一个视图。我要收获我的视图表的当前查询如下

```
SELECT  dbo.synonym1.JobNo
      , dbo.synonym1.Customer
      , dbo.synonym2.PostalService
      , dbo.synonym2.FirstDate
      , dbo.synonym2.SecondDate
FROM dbo.synonym1 
  INNER JOIN dbo.synonym2 ON dbo.synonym1.JobNo = sbo.synonym2.JobNo
WHERE dbo.synonym2.PostalService = 'UPS' 
```

现在我想找到每一行和`dbo.synonym2.FirstDate`同一行之间的差异，只要有差异就可以多次进入视图表。`dbo.synonym2.SecondDate``INSERT`

例如，如果`FirstDate`is`2012-06-03 00:00:00.000`和`SecondDate`is`2012-06-05 00:00:00.000`那么它应该插入同一行两次。

我正在使用 SQL Server 2008 R2，我是 SQL 的新手。请帮帮我

当前在视图中使用上述查询填充的示例数据如下，

```
JobNo  Customer PostalService FirstDate                 SecondDate  
1      ABC      UPS           2012-06-03 00:00:00.000   2012-06-03 00:00:00.000
2      DEF      UPS           2012-06-03 00:00:00.000   2012-06-06 00:00:00.000
3      XYZ      UPS           2012-06-03 00:00:00.000   2012-06-05 00:00:00.000 
```

我需要如下结果

```
JobNo  Customer PostalService FirstDate                 SecondDate  
1      ABC      UPS           2012-06-03 00:00:00.000   2012-06-03 00:00:00.000
2      DEF      UPS           2012-06-03 00:00:00.000   2012-06-05 00:00:00.000
2      DEF      UPS           2012-06-03 00:00:00.000   2012-06-05 00:00:00.000
2      XYZ      UPS           2012-06-03 00:00:00.000   2012-06-05 00:00:00.000
3      XYZ      UPS           2012-06-03 00:00:00.000   2012-06-06 00:00:00.000
3      XYZ      UPS           2012-06-03 00:00:00.000   2012-06-06 00:00:00.000 
```

如果您看到 JobNo 2 的日期之间的差异为 3，则数据将重复 3 次。JobNo 3 为 2，因此数据重复两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:12:07.567

您的请求有点令人困惑，因为通常不会插入视图。

但是，以下内容会将行插入表中

```
insert into ViewTable(JobNo, Customer, PostalService, FirstDate, SecondDate)
    SELECT dbo.synonym1.JobNo, dbo.synonym1.Customer, dbo.synonym2.PostalService,
           dbo.synonym2.FirstDate, dbo.synonym2.SecondDate
     FROM dbo.synonym1 INNER JOIN
          dbo.synonym2
          ON dbo.synonym1.JobNo = sbo.synonym2.JobNo
     WHERE dbo.synonym2.PostalService = 'UPS' and
           datediff(d, FirstDate, SecondDate) <> 0 
```

不过，您需要将 ViewTable 定义为实际表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:07:05.257

听起来你想要的是下面的联合语句来填充这个临时表。除非我误解了你的要求。

```
DECLARE @MyTable as TABLE(JobNo VARHCAR(50), Customer VARCHAR(50), 
                       Postalservice VARCHAR(50), MyDate DateTime)

INSERT into @MyTable 
SELECT  dbo.synonym1.JobNo 
  , dbo.synonym1.Customer 
  , dbo.synonym2.PostalService 
  , dbo.synonym2.FirstDate 

FROM dbo.synonym1  
INNER JOIN dbo.synonym2 ON dbo.synonym1.JobNo = sbo.synonym2.JobNo 
WHERE dbo.synonym2.PostalService = 'UPS'  
UNION
SELECT  dbo.synonym1.JobNo 
  , dbo.synonym1.Customer 
  , dbo.synonym2.PostalService 

  , dbo.synonym2.SecondDate 
FROM dbo.synonym1  
INNER JOIN dbo.synonym2 ON dbo.synonym1.JobNo = sbo.synonym2.JobNo 
WHERE dbo.synonym2.PostalService = 'UPS' 
```

从@MyTable 插入您的视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:20:51.520

```
Create Table #temp
(
    StartDate DateTime,
    EndDate DateTime
)

Insert into #temp(StartDate, EndDate)
                    Values('2012-06-03 00:00:00.000', '2012-06-03 00:00:00.000');
Insert into #temp(StartDate, EndDate)
                    Values('2012-06-03 00:00:00.000', '2012-06-06 00:00:00.000');
Insert into #temp(StartDate, EndDate)
                    Values('2012-06-03 00:00:00.000', '2012-06-05 00:00:00.000');

With DateRange As
(
    select Convert(DateTime, '2012-06-02 00:00:00.000') as StartDate, 
          DATEADD(dd, 1, Convert(DateTime, '2012-06-02 00:00:00.000')) as EndDate
    Union All
    select EndDate, DATEADD(dd, 1, EndDate) From DateRange 
                    Where EndDate <= Convert(DateTime, '2012-06-10 00:00:00.000')
)

Select T.* from #temp T
Left Join DateRange R on ((T.StartDate < R.EndDate and T.EndDate > R.StartDate) 
          or (T.StartDate = R.EndDate and T.EndDate = R.StartDate))
order  by T.EndDate

Drop table #temp 
```

# java - 当应用程序的用户进行更新时，Facebook 是否会触发事件？

> ID：10900595
> 
> 赞同：0
> 
> 时间：2012-06-05T15:52:50.057
> 
> 标签：java, facebook, facebook-graph-api

我是 facebook 应用程序开发的新手，并尝试使用 servlet 制作应用程序。我想在我的应用程序的帮助下关注用户更新。当有人发布任何内容或我们必须继续轮询 FB 以获取最新更新时，图形 API 是否会向我的应用服务器发送任何触发器或事件？我问这个是因为我们可能会运行一些数据分析来处理 FB 数据。为此，我们可能必须将从 FB 获得的数据存储到本地数据库以运行分析工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:57:20.653

您可以使用实时更新 API 来获取此信息

请参阅：[https ://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)

# javascript - 数组排序。论据从何而来？

> ID：10900596
> 
> 赞同：0
> 
> 时间：2012-06-05T15:52:54.753
> 
> 标签：javascript

这个排序函数中的参数 a 和 b 来自哪里？他们是自动通过的吗？

```
dir = "asc"
sortArray = new Array("hello", "Link to Google", "zFile", "aFile");

//sort array
if (dir == "asc") {
    sortArray.sort(function(a, b) {
        return a.toLowerCase() > b.toLowerCase()
    });
} else {
    sortArray.sort(function(a, b) {
        return b.toLowerCase() > a.toLowerCase()
    });
}

    for (var i = 0; i < sortArray.length; i++) {
    console.log(sortArray[i]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:55:39.200

> 他们是自动通过的吗？

是的。

您正在创建一个匿名比较器函数，该`sort`函数在需要比较两个对象时调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:57:54.870

这些会*自动*传递给您的排序功能。将它们的名称放在匿名函数的参数列表中只是为了方便。`arguments`您可以通过记录集合来查看传递给您的函数的所有项目：

```
sortArray.sort(function() {
    console.log( arguments );
}); 
```

这导致以下日志：

```
["hello", "Link to Google"] // 0 vs 1
["Link to Google", "zFile"] // 1 vs 2
["zFile", "aFile"]          // 2 vs 3 
```

这两个变量是`arguments[0]`and `arguments[1]`，代表数组中应该比较的两个项目。此比较的返回值应为`-1`、`0`或`1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:02:13.383

Sorting algo including two parts - pick-rearrange logic and element comparison logic. Javascript runtime library will handle pick-rearrange logic (e.g. quick sort), and when it picking two elements and need a comparison result, it will call the function in the array.sort parameter to get it.

# types - 如何确定变量的数据类型

> ID：10900600
> 
> 赞同：23
> 
> 时间：2012-06-05T15:53:12.660
> 
> 标签：types, common-lisp

这是一个很容易回答的问题（我猜），但我找了一段时间没有找到任何东西，所以我会把我的问题直接问你。

可以确定给定变量是否`typep`属于某种特定的数据类型，例如整数、哈希表等，但是是否有返回数据类型的函数？

例如

```
(defvar *x* 1)
*x*

(typep *x* 'integer)
T

(the-type-function *x*)
INTEGER 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-05T19:51:50.153

> 有 typep 来确定给定变量是否属于某种特定的数据类型，例如整数、哈希表等，

并不真地。在 Common Lisp 中，变量的类型不是你想象的那样。

```
(defvar *x* 1)
*x*

(typep *x* 'integer)
T 
```

上面没有说明变量的类型`*x*`。它确认对象`1`是 type `integer`。

> 但是有没有返回数据类型的函数？

并不真地。有一个函数`TYPE-OF`，它返回对象的类型，而不是变量的类型。

```
> (type-of 1)
FIXNUM 
```

当我们从变量中获取值时没有区别。

```
> (type-of *x*)
FIXNUM 
```

但这并不意味着变量具有那种类型。

注意：Common Lisp 有类型和类型声明。但这看起来略有不同。

# java - 在struts 2中将可变数量的参数从表单传递到动作

> ID：10900605
> 
> 赞同：2
> 
> 时间：2012-06-05T15:53:32.623
> 
> 标签：java, jsp, struts2, struts-action

我在我的应用程序中使用 struts2 并在 jsp 中有一个表单，该表单提交给一个动作类。

表单中输入字段的数量在运行时可能会有所不同，因此操作类不能有固定的参数设置器和获取器。我试图在单个动作类中捕获这些可变数量的输入。我想知道它是否可以通过 Struts 2 实现，如果可以，我该怎么做？我知道表单中的输入字段名称（通过 jsp 表单中的迭代器填充的输入字段名称）。

注意：1）我知道通过适当的 getter 和 setter 为动作类中的所有表单值捕获动作类中的表单值（参数）的方法。2) 我已经完成了 struts 2 [http://struts.apache.org/2.3.1/docs/model-driven.html中描述的模型驱动操作](http://struts.apache.org/2.3.1/docs/model-driven.html)

我无法获得任何搜索解决方案，感谢您提供任何帮助。

表格人口代码：

```
<s:form action="/reports/getReport.action" cssClass="table_with_padding">
   <s:iterator value="reportParamsList.items" id="paramList_item">
       <tr><td><s:property value="#paramList_item.paramdesc" /></td><TD><s:textfield name="#paramList_item.paramname" /></TD></tr>
    </s:iterator>
    <s:submit theme="ajax" loadingText="%{getResource('SiteWide.Loading.Text')}" targets="app_area" type="button" align="left" cssClass="app_form_button" value="Submit" />
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:01:22.843

对所有人使用相同`name`的属性`textfields`并使用相应的`hidden`字段来识别它

```
<s:iterator value="reportParamsList.items" id="paramList_item">
       <tr>
           <td>
               <s:property value="#paramList_item.paramdesc" />
           </td>
           <td>
                <s:textfield name="element" />
                <s:hidden name="myValue" value="#paramList_item.paramname" />
           </td>
       </tr>
</s:iterator> 
```

然后在您的操作类中声明这些变量及其 getter/setter

```
private List<String> element;
private List<String> myValue; 
```

现在您可以遍历`myValue`list 并获取其对应`textfield`的 ' 值

```
Iterator<String> it = myValue.iterator();
int index = 0;
while(it.hasNext()){
 System.out.println("hidden field's value="+it.next());
 System.out.println("textfield's value="+element.get(index));
 index++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:55:22.993

只需`List`输入表单并将[数据与视图列表绑定](http://struts.apache.org/2.3.1/docs/tabular-inputs.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T18:10:14.570

对于可变参数，我认为 Struts2 没有任何内置功能，而是在您提交表单之前将所有可变参数的值保存在某个字段中，例如分隔字符串，然后将其发送到您的操作。

然后，在您的 Action 中，您可以解析分隔字符串并获取结果。

您可以使用`s:hidden`来保存您的分隔值

# sql - 需要将值添加到现有的行和列中

> ID：10900609
> 
> 赞同：3
> 
> 时间：2012-06-05T15:54:03.240
> 
> 标签：sql, oracle

我有一个名为 CUSTOMERS 的表，有**5 列**和**3 行**：LAST_NAME、FIRST_NAME、ADDRESS、CITY、ORDER_PRICE，我一直搞砸了，不得不删除我创建的新行，因为我不确定如何插入 ORDER_PRICE 列，值对于第 1 2 和 3 行。

我试过插入，更新表子句，但我做错了什么。谁能告诉我如何将值插入第 1、2 和 3 行或 ORDER_PRICE 列？ORDER_PRICE 的 SATA 类型为 NUMBER

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T16:05:10.907

假设名字+姓氏是唯一的：

```
update  CUSTOMERS
set     ORDER_PRICE = 4.7
where   FIRST_NAME = 'The' and LAST_NAME = 'Dude'

update  CUSTOMERS
set     ORDER_PRICE = 4.2
where   FIRST_NAME = 'Big' and LAST_NAME = 'Lebowsky'

... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T17:00:00.283

要更改现有行中的一列或多列的值，您应该使用 UPDATE 语句，如

```
UPDATE CUSTOMERS
  SET ORDER_PRICE = 123.45,
      CITY = 'San Luis Obispo'
  WHERE FIRST_NAME = 'Bob' AND
        LAST_NAME = 'Jarvis'; 
```

如果要创建新行，则需要使用 INSERT 语句：

```
INSERT INTO CUSTOMERS
  (LAST_NAME, FIRST_NAME, ADDRESS, CITY, ORDER_PRICE)
VALUES
  ('Jarvis', 'Bob', '12345 Sixth St', 'Cucamonga', '123.45'); 
```

分享和享受。

# java - 来自java的mongodb upsert：如何获取现有对象的_id？

> ID：10900611
> 
> 赞同：5
> 
> 时间：2012-06-05T15:54:05.920
> 
> 标签：java, mongodb, mongo-java

我将 mongo-jackson-wrapper 与 java 和 MongoDB 一起使用。我通过查询我的一个字段（不是 _id 字段）找到一个对象，然后我需要知道 _id 字段值，最终结果是更新还是插入。但是，我得到一个例外：

```
com.mongodb.MongoException: No objects to return
    at net.vz.mongodb.jackson.WriteResult.getSavedId(WriteResult.java:97) 
```

异常来自包装器，而不是 MongoDB 驱动程序本身。

```
WriteResult<EntityDocument, String> wr 
   = coll.update(DBQuery.is("corefEntityId", corefEntityId), up, true,  false); 
```

什么（如果有的话）是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T15:43:23.130

您需要使用**findAndModify**并将*returnNew*设置为*true*

您可以查看[JavaDoc](http://vznet.github.io/mongo-jackson-mapper/apidocs/net/vz/mongodb/jackson/JacksonDBCollection.html#findAndModify%28com.mongodb.DBObject,%20com.mongodb.DBObject,%20com.mongodb.DBObject,%20boolean,%20com.mongodb.DBObject,%20boolean,%20boolean%29)

这段代码应该可以解决问题，但我还没有测试过。

`coll.findAndModify(DBQuery.is("corefEntityId", corefEntityId), null, null, false, up, true, false);`

# routing - 强制使用别名控制器

> ID：10900613
> 
> 赞同：0
> 
> 时间：2012-06-05T15:54:20.287
> 
> 标签：routing, controller, cakephp-1.3, alias

我有一个控制器，名为：`SomeLongUnfriendlyName`
在路由器中，我给了它一个别名：`CoolName`
现在，每当有人调用 时`/CoolName/theAction`，`/SomeLongUnfriendlyName/theAction`都会执行。到目前为止，一切都很好。
我的问题是我想拒绝使用原始`SomeLongUnfriendlyName`名称。

怎么做到呢？

* * *

流行流行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:21:51.067

您应该能够将其添加为重定向路由（如果您使用的是 Cake 2.x）。除了根据我对路由系统的了解之外，我从未尝试过任何事情，如果你把它放在最后并且没有其他路由捕获，它将正确重定向到别名控制器。

```
Router::redirect(
  '/SomeLongUnfriendlyName/*', 
  array('controller' => 'CoolName'), 
  array('status' => 302)
); 
```

在这里，我们将您不想使用的名称重定向到新名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:16:57.553

您可以使用 App 控制器的 beforeFilter 方法来检查给定的 URI 是否具有相应的路由。如果是这样，只需向路由类发出重定向。确保检查浏览器上显示的 URL 以避免无限重定向。

# mysql - MySQL 和 SQL Server 术语

> ID：10900614
> 
> 赞同：1
> 
> 时间：2012-06-05T15:54:24.800
> 
> 标签：mysql, sql-server, terminology

在 SQL Server 中，我们有：

```
Instance->Database->Schema->Objects (tables etc) 
```

我很困惑 MySQL 的等价物是什么，特别是“数据库”和“模式”。据我所知，它是这样的：

```
| SQL Server | MySQL    |
|------------|----------|
| Instance   | Instance |
| Database   | Schema   |
| Schema     | N/A      |
| Objects    | Objects  | 
```

我错了多远？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:59:33.057

在 MySQL 数据库/模式中是同义词，所以你的方法是可以的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:59:32.890

来自[http://lists.mysql.com/mysql/211616](http://lists.mysql.com/mysql/211616)：

> 在 MySQL 中，两者是等价的。无论出现在何处，关键字 DATABASE 或 DATABASES 都可以替换为 SCHEMA 或 SCHEMAS。例子：
> 
> 创建数据库 <=> 创建模式
> 
> 显示数据库 <=> 显示模式

值得一提的是，Oracle 也是如此。

# touch - sencha touch 2 history.back() 不起作用？

> ID：10900615
> 
> 赞同：0
> 
> 时间：2012-06-05T15:54:33.060
> 
> 标签：touch, extjs, sencha-touch-2

我正在使用 sencha touch 2 MVC 应用程序。在我的 app.js 文件中，我没有 launch() 方法，并且

```
controllers: ['HomeController'], 
```

和我的 HomeController 路线

```
 routes: {
        '': 'viewHomePage',                       //1st page
        'ap': 'viewContactPage',                  //2nd page
        'ap/:id': 'viewContactPageById'           //3rd page
       //others
    } 
```

在第二页和第三页我有一个按钮

```
xtype:'button',
listeners: {
                    tap: function () {
                        history.back();
                    }
                } 
```

现在的问题是 history.back() 在 page2 的情况下不起作用。但它在第 3 页的情况下效果很好。

如果这是特殊情况，那么如何重新启动我的应用程序。

如果它在 MVC 的情况下不起作用，那么解决方案是什么？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:51:05.073

对不起，克里斯，但 history.back() 可以与 Sencha Touch 2 应用程序一起使用。只要您的控制器使用redirectTo(url)，标准的history.back() 就会按预期运行。

因此，如果在控制器中您从当前 url 重定向到另一个，在重定向后使用 history.back() 将使您返回到原始 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T15:08:07.213

If you have copied old buttons and their tap events than you have a naming conflict which causes this problem.

Rename all your new buttons to unique names and delete and create the tap events again

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T11:07:54.893

history.back() 重定向到上一个 URL。sencha touch 应用程序包含在单个 URL 中，没有任何重定向。它通过将一堆容器彼此叠放来工作。但是，它们都包含在同一页面中，因此 history.back() 将不起作用。

您需要改变在 sencha touch 应用程序中考虑重定向的方式。基本上，为了“返回”，您需要切换视图。您可以使用以下代码执行此操作：

```
 Ext.Viewport.setActiveItem({
      xtype: 'yourxtype'
 }); 
```

此代码将视图从当前视图切换到您选择的 xtype。

# python - 在意外标记 `;' 附近出现语法错误 在蟒蛇

> ID：10900617
> 
> 赞同：5
> 
> 时间：2012-06-05T15:54:34.970
> 
> 标签：python

我是 Python 新手，所以请帮助我...

```
#!/usr/bin/python -tt

import sys
import commands

def runCommands():
  f = open("a.txt", 'r')
  for line in f:  # goes through a text file line by line
    cmd = 'ls -l ' + line 
    print "printing cmd = " + cmd,
    (status, output) = commands.getstatusoutput(cmd)
  if status:    ## Error case, print the command's output to stderr and exit
      print "error"
      sys.stderr.write(output)
      sys.exit(1)
  print output
  f.close()

def main():
  runCommands()

# Standard boilerplate at end of file to call main() function.
if __name__ == '__main__':
  main() 
```

我按如下方式运行它：

```
$python demo.py
sh: -c: line 1: syntax error near unexpected token `;'
sh: -c: line 1: `; } 2>&1'
error 
```

跑步`less $(which python)`说：

```
#!/bin/sh bin=$(cd $(/usr/bin/dirname "$0") && pwd) exec -a "$0" "$bin/python2.5" "$@" 
```

如果我删除`for loop`然后它工作正常

```
$cat a.txt
dummyFile

$ls -l dummyFile
-rw-r--r-- 1 blah blah ...................

$python demo.py
printing cmd = ls -l dummyFile
sh: -c: line 1: syntax error near unexpected token `;'
sh: -c: line 1: `; } 2>&1'
error 
```

我使用 'ls' 只是为了显示问题。实际上我想使用一些内部 shell 脚本，所以我只能以这种方式运行这个 python 脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T15:59:43.837

问题是由这一行引起的：

```
 cmd = 'ls -l ' + line 
```

应修改为：

```
 cmd = 'ls -l ' + line.strip() 
```

当您从文本文件中*读取*该行时，您还读取了结尾的**`\n`**. 您需要[剥离](http://docs.python.org/library/stdtypes.html?highlight=strip#str.strip)它以使其正常工作。`getstatusoutput()`不喜欢尾随的换行符。请参阅此交互式测试（这是我验证它的方式）：

```
In [7]: s, o = commands.getstatusoutput('ls -l dummyFile')

In [8]: s, o = commands.getstatusoutput('ls -l dummyFile\n')
sh: Syntax error: ";" unexpected 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T15:56:41.310

这似乎是“python”命令的问题，也许它是一个 shell 包装脚本或其他东西。

跑

```
$ less $(which python) 
```

**更新**：

尝试直接调用 Python 可执行文件，它似乎位于`/usr/bin/python2.5`：

```
$ /usr/bin/python2.5 demo.py 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:45:06.593

[commands 模块](http://docs.python.org/release/2.5.2/lib/module-commands.html)的文档指出，当您运行时`getstatusoutput(cmd)`，

> `cmd`实际上运行为`{ cmd ; } 2>&1`

这应该解释`; } 2>&1`来自哪里。

我的第一个猜测是，问题是由于没有从您从文件中读取的每一行的末尾剥离换行符，因此您实际运行的命令类似于

```
{ ls -l somedir
; } 2>&1 
```

但是，我不太了解 shell 编程，所以我不知道如何`sh`处理`{ ... }`两行拆分的内容，也不知道为什么现在有两行时它会在第 1 行报告问题。

第二个猜测是你的文件中有一个空行，在这种情况下`sh`可能会抱怨，因为它正在寻找一个参数，`ls`而是找到`; } 2>&1`了。

第三个猜测是其中一个文件包含 a `}`，或者可能是 a`;`后跟 a `}`。

最终，如果没有看到文件的内容，我无法确定问题出在哪里`a.txt`。

顺便说一句，我希望这个文件不包含 line `/ && sudo rm -rf /`，因为这可能会给您带来一两个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T17:00:38.747

从其他地方得到这个答案：

当您作为迭代器遍历文件时，不会删除换行符。以下实际上是您的脚本正在执行的内容。您的打印语句中有一个尾随逗号（以及您的输出中的换行符）这一事实是赠品。

```
ls -l dummyFile \n 
```

哪些命令解释为

```
{ ls -l dummyFile
; } 2>&1 
```

调用 line.rstrip() （或只是剥离）来修复它。

```
cmd = 'ls -l ' + line.strip() 
```

# java - 安卓书景

> ID：10900620
> 
> 赞同：1
> 
> 时间：2012-06-05T15:54:39.500
> 
> 标签：java, android, views

我想创建一些像书一样工作的东西（内容会一直显示到填满一页，超出的内容将显示在下一页中），作为 android 的视图。我扩展了一个框架布局，在构造函数上添加了一个列表视图和一个带有 2 个按钮和一个文本（用于页码）的线性布局。

如果它只是文本，我可以使用 onDraw（而不是列表）轻松绘制它，获取文本边界并轻松地将任意数量的文本分布在页面上并仅显示与当前页面关联的文本。

但我希望我的内容是任何东西，所以我决定改用列表视图。我如何知道添加新内容时内容将占用多少空间？我不介意我是否必须等待某个电话。您可以假设我确切地知道在创建或添加新内容时它将具有什么类型的内容。

示例 1：我有 10 个图标和 10 个文本视图。Line1: Icon1 Text1 Line2: Icon2 Text2 ... Line10: Icon10 Text10

想象一下，每个页面只能容纳 4 行图标/文本。然后第一页有 4 行，第二页有 4 行，第三页（最后一页）有 2 行。

这就是我现在所拥有的......： [书籍示例](http://s17.postimage.org/lflihnjkv/exbook.png)

我必须能够即时添加内容（作为适配器或函数，我不在乎）。

非常感谢

# session - express.js 路由中的全局会话变量？

> ID：10900622
> 
> 赞同：4
> 
> 时间：2012-06-05T15:54:50.007
> 
> 标签：session, express

当我在 express.js 路由中设置会话时

```
app.get('/', function(req, res() {
req.session.foo = 'bar';
}); 
```

我无法在其他路线中访问它（未定义）。这可能吗？有没有我必须考虑的特殊配置？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:14:32.987

我实际上通过设置这样的会话来解决它：

```
global.session.email = JSON.parse(chunk).email; 
```

通过这个，会话变量是全局的！

**解决了**！

# php - 使用 PHP 的简单 MVP 示例

> ID：10900627
> 
> 赞同：4
> 
> 时间：2012-06-05T15:55:31.150
> 
> 标签：php, model-view-controller, mvp

我知道如何使用**MVC**模型，但我不知道如何使用 MVP。我阅读了它们之间的差异，但不知道如何完成它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T11:54:25.487

区别是双重的：

*   视图是被动的，不知道模型
*   演示者（控制器）更改模型的状态，读取信息并将其传递给视图

```
public function showUsers()
{
    // -- snip
    $data = $accountManager->getUserDetails($from = 10, $to = 20);
    $view->bind('list', $data);
    // -- snip
} 
```

这将是演示者方法的简化示例。[这](https://stackoverflow.com/a/7622038/727208)是一个旧答案，简要解释了 php 中使用的类似 MVC 的模式之间的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:08:16.847

MVP 模式通常用于事件驱动开发，显然有一些 PHP 框架支持这种模式。这是几年前的另一个 Stackoverflow 问题，可能会帮助您指出正确的方向：

[PHP 是否支持 MVP 模式？](https://stackoverflow.com/questions/4530023/does-php-supports-mvp-pattern)

# r - R 每年从数据框返回日期和关闭

> ID：10900628
> 
> 赞同：0
> 
> 时间：2012-06-05T15:55:34.837
> 
> 标签：r, quantmod

我有一个`df`带有日期`df$Date`和关闭`df$Close`列的 data.frame。我正在尝试获得年度回报，但我遇到了问题

我试过

```
library(quantmod)
yr <- data.frame( periodReturn(df, period='yearly', subset='2008::')) 
```

并且还具有日期作为行名，但无法使其正常工作。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:23:26.503

如果您只是转换为，您的代码几乎可以工作`xts`。如果您在转换`data.frame`为时遇到困难`xts`，请按照问题评论中的要求提供有关您的数据的更多信息。

```
getSymbols("SPY", src='yahoo', return.class='data.frame')
#[1] "SPY"
class(SPY)
#[1] "data.frame"
as.data.frame(periodReturn(xts(SPY[["SPY.Close"]], as.Date(rownames(SPY))), 
                           'yearly', subset="2008/"))
           yearly.returns
2008-12-31   -0.382805554
2009-12-31    0.234929078
2010-12-31    0.128409907
2011-12-30   -0.001988072
2012-06-04    0.020717131 
```

# html - 命名表格有什么意义？

> ID：10900630
> 
> 赞同：2
> 
> 时间：2012-06-05T15:55:38.213
> 
> 标签：html, forms

标签中的`name=""`html 属性有什么意义？[这里](http://www.w3schools.com/tags/att_form_name.asp)只是说：`<form>`

> name 属性指定表单的名称。name 属性用于引用 JavaScript 中的元素。

为什么我们不能使用`id`or`class`属性来引用 Javascript 的元素？

`name`标签的用途是什么？今天有什么真正的重要性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:02:29.007

名称属性早于在 JavaScript 中使用 ID的`<form>`日期，因此它具有向后兼容性。它还形成了一个集合`document.forms`，在解析页面时可以很方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:02:25.973

您可以使用 javascript 中的名称引用访问表单。
在 jquery 被发明之前，javascript 使用名称和 ID 来访问 DOM 元素。您可以参考[this](http://www.javascript-coder.com/javascript-form/javascript-get-all-form-objects.phtml)以获得进一步的说明。

对于其他 HTML 元素，在服务器端使用元素名称来检索 POST 参数。

```
$test = $_POST['name']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:38:24.687

W3C 在这里说同样的[http://www.w3.org/TR/html401/interact/forms.html#h-17.3](http://www.w3.org/TR/html401/interact/forms.html#h-17.3) `name`属性仅用于脚本。是的，可以为此使用`id`属性，并且 id 通常与 jQuery 等一起使用。

然而，有一些事情，对应于 w3c 的状态，你可以用名字来做。一个例子是`document.forms['formname']`访问表单元素的 javascript。此处描述[http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-40002357](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-40002357)

# ios - 了解用于分配的 xcode 工具

> ID：10900631
> 
> 赞同：1
> 
> 时间：2012-06-05T15:55:38.987
> 
> 标签：ios, xcode, cocoa-touch, instruments

![在此处输入图像描述](../Images/eb2f95054ea1d6ab243b5926e0017f09.png)

我的假设是**红线**是我的对象仍然保留的罪魁祸首。是这样吗？我在哪里可以找到有关这条线路的更多信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T18:44:42.423

红线告诉你，当前方法中分配的内存的 90.4% 是在对 fadeOutSplash 的调用中分配的。无法从屏幕截图中的视图确定该代码行是否导致您的对象被保留。

如果您查看屏幕截图，您会在 90.4% 列表旁边看到一个信息按钮。单击该按钮将显示最重的回溯，即内存分配最大的回溯。我不确定这些信息对您的情况有多大帮助，但它是关于该代码行的附加信息。

# ruby-on-rails - 生成现有数组的所有组合的数组

> ID：10900636
> 
> 赞同：1
> 
> 时间：2012-06-05T15:55:54.507
> 
> 标签：ruby-on-rails, ruby, algorithm

如果我在 Ruby 中有一个数组，如下所示：

```
["foo", "bar", "bat"] 
```

如何使用每种值组合生成一个新数组？

我需要输出如下所示：

```
["foo", "bar", "bat", "foo-bar", "foo-bat", "bar-bat", "foo-bar-bat"] 
```

顺序不重要。另外，我不需要*两者* `"foo-bar"`和`"bar-foo"`。

原始数组最多可以有 5-6 个成员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:09:45.313

```
ar = ["foo", "bar", "bat"]
p 1.upto(ar.size).flat_map {|n| ar.combination(n).map{|el| el.join('-')}}
#=>["foo", "bar", "bat", "foo-bar", "foo-bat", "bar-bat", "foo-bar-bat"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:04:29.250

您可以尝试查看两个数组的叉积

```
arr = %w(foo bar bat)

arr.product(arr).collect{|el| el.uniq.join("-")} 
```

# php - 雅虎股票行情不正常

> ID：10900638
> 
> 赞同：-1
> 
> 时间：2012-06-05T15:56:03.307
> 
> 标签：php, javascript, html

我正在研究股票代码和搜索股票代码的网站编号。[我在这个网站上](http://techblog.shanock.com/articles/9/simple-php-stock-ticker-and-javascript-marquee-for-valid-xhtml)找到了一个代码。

但是我在显示屏幕时遇到错误 - 哪里出错了？

![在此处输入图像描述](../Images/27dff97e4d9e71767bb0c90f2c239a7e.png)

我在下面的代码中感到错误，但我不知道如何修复它。

```
 // ...format, and output them. I made the symbols into links to Yahoo's stock pages.
        echo "<span class=\"stockbox\"><a href=\"http://finance.yahoo.com/q?s=".$stock_info[0]."\">".$stock_info[0]."</a> ".sprintf("%.2f",$stock_info[1])." <span style=\"";
        // Green prices for up, red for down
        if ($stock_info[2]>=0) { echo "color: #009900;\">&uarr;";   }
        elseif ($stock_info[2]<0) { echo "color: #ff0000;\"> }
        echo sprintf("%.2f",abs($stock_info[2]))."</span></span>\n";
        // Done!
        fclose($local_file); 
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:59:58.530

您必须通过支持 PHP 的 Web 服务器运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:03:05.953

您的错误存在于第 5 行：

```
elseif ($stock_info[2]<0) { echo "color: #ff0000;\"> } 
```

应该

```
elseif ($stock_info[2]<0) { echo "color: #ff0000;\">"; } 
```

或者

```
elseif ($stock_info[2]<0) { echo 'color: #ff0000;">'; } 
```

作为一项规则，我总是尽我所能避免转义`quotes`，这迫使我知道报价何时关闭或打开。例如，我宁愿做

```
echo "My name is '$bernard'";   
//and if the " quotes are compulsory
echo 'My name is "'.$bernard.'"'; 
```

比

```
echo "My name is \"bernard\""; 
```

它更干净，更易于阅读。

## 更新

我没有注意到 URL，它是一个 *.htm 文件。为了使代码甚至可以运行，您需要通过可以处理 PHP 代码的服务器来运行它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:59:53.650

您没有关闭此行的引号：

```
elseif ($stock_info[2]<0) { echo "color: #ff0000;\"> } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-08T17:33:42.693

发现问题在它说的原始站点中查找

> “如果 stockcache 目录有问题，脚本可能会为每个股票条目打印“0.00↑0.00”。相反，它看起来好像您的 HTTP 服务器正在吐出 PHP 代码而不是正确解析它。这可能是与页面上其他地方的服务器错误配置或冲突代码有关。不幸的是，如果不了解更多上下文，我无法更具体，例如相关网页的源代码、服务器操作系统、HTTPD 和 PHP 版本，及其配置。”

在托管帮助中查找，发现它必须允许 php（如果它在 html 中），必须创建一个 .htaccess 文件并添加托管公司给我的行，在与他们的支持问题进行简短交谈后解决了

# javascript - 如何将小数四舍五入到小数点后 n 位？

> ID：10900639
> 
> 赞同：2
> 
> 时间：2012-06-05T15:56:10.913
> 
> 标签：javascript, algorithm, math

在 JavaScript 中，我想根据另一个小数 (y) 将给定的数字 (x) 向上舍入。例如：

```
x = 8.6333
y = 0.5
result = 9

x = 8.6333
y = 0.2
result = 8.8

x = 8.6333
y = 0.1
result = 8.7 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:59:59.937

x除以y。将其四舍五入，然后再次乘以 y。

```
var answer = Math.ceil(x/y)*y; 
```

# soap - SugarCRM 肥皂电话未将联系人链接到目标列表

> ID：10900640
> 
> 赞同：1
> 
> 时间：2012-06-05T15:56:11.953
> 
> 标签：soap, sugarcrm

我正在使用 SugarCRM 6.4.4 和 php 5.3.10 并尝试使用肥皂调用将联系人添加到目标列表中......我也尝试过直接使用 ProspectList 类，但我无法让它工作。我知道 SOAP 调用正在通过，因为我可以很好地创建联系人，但是当我尝试创建联系人和目标列表 (PropsectList) 之间的关系时，问题就来了。我究竟做错了什么？

这是我尝试的 SOAP 调用。我收到一条错误消息：“在第 1350 行的 /data/servers/thesite.com/web/administrator/sales/soap/SoapSugarUsers.php 中的非对象上调用成员函数 add()”。 .这是第 1350 行的代码

```
if (!empty($key)) {
    $mod->load_relationship($key);
    $mod->$key->add($module2_id);
    return $error->get_soap_array();
} 
```

这是 SOAP 的完整代码：

```
// set up options array
$options = array(
        "location" => 'http://www.thesite.com/sales/soap.php',
        "uri" => 'http://www.sugarcrm.com/sugarcrm',
        "trace" => 1
        );

//user authentication array
$user_auth = array(
"user_name" => 'theuser',
"password" => MD5('thepass'),
"version" => '.01'
);

// connect to soap server
$client = new SoapClient(NULL, $options);

// Login to SugarCRM
$response = $client->login($user_auth,'test');

$session_id = $response->id;

$user_id = $client->get_user_id($session_id);

//Add Contact to SugarCRM
$response = $client->set_entry($session_id, 'Contacts', array(
array('name' => 'first_name','value' => 'roneFirst2'),
array('name' => 'last_name','value' => 'roneLast2'),
array('name' => 'account_name','value' => 'jdam Props'),
array('name' => 'email1','value' => 'roneEmail2@gmail.com'),
array('name' => 'work_phone','value' => '1.888.888.8888'),
array('name' => 'description','value' => 'This is the message'),
array('name' => 'assigned_user_id','value' => $user_id)
));
$contact_id = $response->id;

//Add Contact to TARGET LIST
$relationship = array(
'module1' => 'Contacts',
'module1_id' => "$contact_id",
'module2' => 'ProspectLists',
'module2_id' => "24053784-f8d3-22a4-5e99-4fc6a7d5159f"  //Note: this id was pulled from the table in the database directly for the target list we want to link the contact with.
);

//call set_relationship()
$response = $client->set_relationship($session_id, $relationship); 
```

谷歌搜索并试图解决这个问题已经 3 天了......感谢您愿意提供的任何帮助。

# java - 如何从 base64 编码的字符串构造 java.security.PublicKey 对象？

> ID：10900643
> 
> 赞同：41
> 
> 时间：2012-06-05T15:56:18.587
> 
> 标签：java, security, rsa

我有一个来自外部源（Android 商店）的 bse64 编码字符串公钥，我需要使用它来验证签名内容。如何将字符串转换为 java.security.PublicKey 接口的实例。如果这有所作为，我正在使用 Java 6。

密钥（可能）是使用标准 java lib 生成的，而不是充气城堡（它来自远程团队，所以我不确定）。他们的示例代码说要使用 Security.generatePublicKey(base64EncodedPublicKey); 但是标准java中的Security对象没有这样的方法。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-07-01T03:59:14.800

上述答案的代码

```
public static PublicKey getKey(String key){
    try{
        byte[] byteKey = Base64.decode(key.getBytes(), Base64.DEFAULT);
        X509EncodedKeySpec X509publicKey = new X509EncodedKeySpec(byteKey);
        KeyFactory kf = KeyFactory.getInstance("RSA");

        return kf.generatePublic(X509publicKey);
    }
    catch(Exception e){
        e.printStackTrace();
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-05T18:35:47.443

好笑...试试这个

*   base64解码关键数据得到字节数组（byte[]）
*   使用字节数组创建一个新的 X509EncodedKeySpec
*   在这里假设 RSA 使用 KeyFactory.getInstance("RSA") 获取 KeyFactory 的实例
*   使用 X509EncodedKeySpec 调用方法 generatePublic(KeySpec)
*   结果/应该/是供您使用的公钥。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-26T14:52:22.083

试试这个....

```
PublicKey getPublicKey(byte[] encodedKey) throws NoSuchAlgorithmException, InvalidKeySpecException
{
    KeyFactory factory = KeyFactory.getInstance("RSA");
    X509EncodedKeySpec encodedKeySpec = new X509EncodedKeySpec(encodedKey);
    return factory.generatePublic(encodedKeySpec);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-21T10:04:04.123

使用海绵城堡

```
public static PublicKey getPublicKeyFromString(String key) throws Exception {
    KeyFactory keyFactory = KeyFactory.getInstance(ALGORITHM);
    org.spongycastle.asn1.pkcs.RSAPublicKey pkcs1PublicKey
            = org.spongycastle.asn1.pkcs.RSAPublicKey.getInstance(decodeB64(key));
    RSAPublicKeySpec keySpec
            = new RSAPublicKeySpec(pkcs1PublicKey.getModulus(), pkcs1PublicKey.getPublicExponent());
    PublicKey publicKey = keyFactory.generatePublic(keySpec);
    return publicKey;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-19T22:19:02.980

你可以试试这个解决方案：

添加此依赖项：

```
<dependency>
<groupId>org.bouncycastle</groupId>
<artifactId>bcpkix-jdk15on</artifactId>
<version>1.61</version> 
```

并使用此方法：

```
private Key parsePublicKey(String publicKey) throws IOException {
    PEMParser pemParser = new PEMParser(new StringReader(publicKey));
    JcaPEMKeyConverter converter = new JcaPEMKeyConverter();
    SubjectPublicKeyInfo publicKeyInfo = SubjectPublicKeyInfo.getInstance(pemParser.readObject());
    return converter.getPublicKey(publicKeyInfo);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-28T05:59:14.627

这是一个代码片段：

```
import java.math.BigInteger;
import java.security.KeyFactory;
import java.security.NoSuchAlgorithmException;
import java.security.PublicKey;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.RSAPublicKeySpec;

import org.apache.commons.codec.binary.Base64;
try {
    KeyFactory kf = KeyFactory.getInstance("RSA");
    BigInteger modulus = new BigInteger(1, Base64.decodeBase64(this.stringValue("n")));
    BigInteger exponent = new BigInteger(1, Base64.decodeBase64(this.stringValue("e")));
    return kf.generatePublic(new RSAPublicKeySpec(modulus, exponent));
} catch (InvalidKeySpecException var4) {
    throw new InvalidPublicKeyException("Invalid public key", var4);
} catch (NoSuchAlgorithmException var5) {
    throw new InvalidPublicKeyException("Invalid algorithm to generate key", var5);
} 
```

# javascript - Greasemonkey 脚本似乎忽略了 setInterval？

> ID：10900646
> 
> 赞同：0
> 
> 时间：2012-06-05T15:56:20.293
> 
> 标签：javascript, onclick, greasemonkey, setinterval

我正在尝试在 GreaseMonkey 中制作一个玩具脚本，当我单击一个按钮时，它会导致我的屏幕反复跳到屏幕顶部，并在我再次单击该按钮时停止跳动。

这是我的代码：

```
var perpetualScroll = function () {
    var scrolling = false;

    var scroll = function () {
        if (scrolling) {
            window.scrollTo(0, 0);
        }
    };

    var scrollDiv = document.createElement("div");
    scrollDiv.id = "topScroll0x2a";
    scrollDiv.innerHTML = '<a class="topScroll" onclick="scrolling = !scrolling;" style="display:block; position:fixed; bottom: 1em; right: 1em; color:#fff; background-color:#000; padding:.5em;" href="#">Start scroll</a>';
    document.body.appendChild(scrollDiv);

    var intervalId = window.setInterval(scroll, 50);
};

perpetualScroll(); 
```

当我单击脚本创建的下角的按钮时，它会跳到屏幕顶部，但不会继续永远这样做。

我对 Javascript 和 GreaseMonkey 真的很陌生，所以我不太确定问题出在哪里。我怀疑这可能是由于链接的 onclick 部分中的问题，但如果是这样，我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:34:11.217

这样做`onclick`不会像你期望的那样工作。你`innerHTML`只是一个字符串，所以 JS 不知道它在你的`perpetualScroll`函数范围内。

`onclick`作为字符串的处理程序在全局范围内进行评估，因此您所拥有的等同于：

```
 window.scrolling = !window.scrolling; 
```

`scrolling`你想要的变量是不同的。

您应该像这样创建一个实际的函数：

```
var a = document.createElement('a');
a.className = (a.className || "") + ' topScroll';
a.style.display = 'block';
a.style.position = 'fixed';
a.style.bottom = '1em';
a.style.right = '1em';
a.style.color = '#FFF';
a.style.backgroundColor = '#000';
a.style.padding = '0.5em';
a.href = '#';
a.onclick = function(e){
    scrolling = !scrolling;
    return false;
};
scrollDiv.appendChild(a); 
```

显然，设置 CSS 很糟糕，所以无论如何你都应该把它放在单独的样式表中。

# android - 无法从 Preference 类中的内部类调用“persistInt”

> ID：10900651
> 
> 赞同：0
> 
> 时间：2012-06-05T15:56:43.523
> 
> 标签：android, android-preferences

我正在尝试建立自己的`Preference`课程，但遇到了一些麻烦。看起来将数据保存到首选项的方式是通过`Preference`类中的“持久”组方法。但是，在我的偏好中，我打开了一个颜色选择器对话框，我需要从对话框的`colorChanged`覆盖中保存偏好。每当我运行应用程序并尝试更改颜色偏好时，我都会得到：

```
06-05 10:21:46.396: ERROR/AndroidRuntime(516): FATAL EXCEPTION: main
java.lang.IllegalAccessError: tried to access method android.preference.Preference.persistInt:(IIII)V from class android.preference.ColorSelectionPreference$1
at android.preference.ColorSelectionPreference$1.colorChanged(ColorSelectionPreference.java:55)
at android.apis.graphics.ColorPickerDialog.onClick(ColorPickerDialog.java:168) 
```

（更新：2012 年 6 月 5 日 12:20）我尝试使用`callChangeListener`强制`onPreferenceChangeListener`触发，但它崩溃并出现相同的错误。没有`callChangeListener`，偏好数据（可能）被保存，但`onPreferenceChangeListener`不会被触发：

```
06-05 12:20:23.691: ERROR/AndroidRuntime(2834): FATAL EXCEPTION: main
java.lang.IllegalAccessError: tried to access method android.preference.ColorSelectionPreference.callChangeListener:(IIII)V from class android.preference.ColorSelectionPreference$1
at android.preference.ColorSelectionPreference$1.colorChanged(ColorSelectionPreference.java:52)
at android.apis.graphics.ColorPickerDialog.onClick(ColorPickerDialog.java:168) 
```

这是实际的课程：

```
package android.preference;

import android.apis.graphics.ColorPickerDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.graphics.Color;
import android.util.AttributeSet;

public class ColorSelectionPreference extends Preference {
    private Context mContext;
    private int mColor;

    public ColorSelectionPreference(Context context) {
        super(context);
        mContext = context;
    }

    public ColorSelectionPreference(Context context, AttributeSet attr) {
        super(context, attr);
        mContext = context;
    }

    public int getColor() {
        return mColor;
    }

    public void setColor(int color) {
        mColor = color;
    }

    @Override
    public void onClick() {
        //get original preference
        //set ColorPickerDialog to original preference color or default color
        ColorPickerDialog dialog = new ColorPickerDialog(mContext, new ColorPickerDialog.OnColorChangedListener() {
            public void colorChanged(int a, int r, int g, int b) {
                int selectedColor = Color.argb(a,r,g,b);
                setColor(selectedColor);

                /*** crashes on callChangeListener ***/
                //SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mContext);
                //SharedPreferences.Editor edit = prefs.edit();
                //edit.putInt(getKey(), selectedColor);
                //edit.commit();
                //callChangeListener(selectedColor);

                /*** the offending code, error refers to this line ***/
                persistInt(selectedColor);

                /*** tried this as well by request on IRC ***/
                //ColorSelectionPreference.this.persistInt(selectedColor);
            }
        }, mColor);
        dialog.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:00:34.307

这是一个 hacky 解决方法，它使用 Handler 从内部类回调主类。它不漂亮，但它有效。

```
package android.preference;

import android.apis.graphics.ColorPickerDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.AttributeSet;

public class ColorSelectionPreference extends Preference {
    private Context mContext;
    private int mColor;

    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            if(msg.getData().containsKey("color")) {
                int color = msg.getData().getInt("color");
                setColor(color);
            }
        }
    };

    public ColorSelectionPreference(Context context) {
        super(context);
        mContext = context;
    }

    public ColorSelectionPreference(Context context, AttributeSet attr) {
        super(context, attr);
        mContext = context;
    }

    public int getColor() {
        return mColor;
    }

    public void setColor(int color) {
        mColor = color;
        persistInt(new Integer(color));
    }

    @Override
    public void onClick() {
        //get original preference
        //set ColorPickerDialog to original preference color or default color
        ColorPickerDialog dialog = new ColorPickerDialog(mContext, new ColorPickerDialog.OnColorChangedListener() {
            public void colorChanged(int a, int r, int g, int b) {
                int selectedColor = Color.argb(a,r,g,b);
                Bundle bundle = new Bundle();
                bundle.putInt("color", selectedColor);
                Message msg = new Message();
                msg.setData(bundle);
                mHandler.sendMessage(msg);

                //setColor(selectedColor);

                /*** tried this, but the onPreferenceChangedListener never gets triggered, so this won't work ***/
                //SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(mContext);
                //SharedPreferences.Editor edit = prefs.edit();
                //edit.putInt(getKey(), selectedColor);
                //edit.commit();
                //callChangeListener(selectedColor);

                /*** the offending code, error refers to this line ***/
                //container.

                /*** tried this as well by request on IRC ***/
                //ColorSelectionPreference.this.persistInt(selectedColor);
            }
        }, mColor);
        dialog.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T14:22:30.647

我自己也遇到了这个问题。我不会假装理解它，但这似乎更容易解决：

```
// ...why is this necessary?  what is special about Preference.persistInt?
@Override protected boolean persistInt(int value)
{
    return super.persistInt(value);
} 
```

# java - 与 Web 应用程序的 MySql 连接管理

> ID：10900653
> 
> 赞同：0
> 
> 时间：2012-06-05T15:57:01.143
> 
> 标签：java, mysql, servlets, amazon-web-services

我有许多 servlet（Spring MVC、Rest 等），它们都需要数据库连接

我有一个 MYSQL 数据库，我使用 mysql-connector-java-5.1.20-bin.jar 进行连接

servlet 每小时被命中几百次，我想提高性能

那么如何改进当前的设计呢？（当前系统是每个进入平台的请求都由创建数据库连接的 servlet 处理）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:59:37.623

> 当前系统是每个进入平台的请求都由创建数据库连接的 servlet 处理

使用[连接池](https://stackoverflow.com/tags/connection-pooling/info)

**另见**

*   [连接池选项与 jdbc-dbcp-vs-c3p0](https://stackoverflow.com/questions/520585/connection-pooling-options-with-jdbc-dbcp-vs-c3p0)

# php - PHP 停止输出撇号上的数据

> ID：10900654
> 
> 赞同：2
> 
> 时间：2012-06-05T15:57:03.853
> 
> 标签：php, mysql

我编写了一个 php 脚本，它从数据库中提取一些数据并以 XML 格式显示它。由于某种原因，当它到达数据中的撇号时，它会停止输出。这是一个 SELECT 语句，而且是一个简单的语句，所以我不明白为什么撇号或引号会有任何问题。我尝试过使用addslashes() 和mysql_real_escape_string()，尽管我的理解是这些是为了清理插入到数据库中的数据，但它没有帮助。我难住了。以下是代码，提前感谢您的任何建议！

```
<? if($result = $mysqli->query("SELECT * FROM ".$tbl)){
while($row = $result->fetch_object()){ ?>
<slide>
    <id><?= $row->id ?></id>
    <title><?= $row->title ?></title>
    <chatter><?= $row->description ?></chatter>
    <image><?= $row->path ?></image>
    <link><?= $row->href ?></link>
    <active><?= $row->active ?></active>
</slide>
<? }
}else{
    echo $mysqli->error;
} 
```

编辑：原来我误解了这个问题。它们不是撇号，而是正确的单引号。如果我将它们更改为实际的撇号，脚本可以工作，但我仍然不明白为什么它不简单地输出它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:04:29.127

撇号**(')**是*XML*的无效字符！`$safe_string = str_replace("'","&apos;",$string)`在输出 .XML 文件之前，您必须调用所有字段。

点此了解这些字符并构建更完整[的](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)[str_replace](http://php.net/manual/en/function.str-replace.php)

**编辑：**

我在用什么：

```
// save ubercart products in XML
function replace_characters_for_xml($str) {
   return str_replace(
      array("&",">","<","'",'"'),
      array("&amp;","&gt;","&lt;","&apos;","&quot;"),$str
   );
}
...
$row->title = replace_character_for_xml($row->title);
$row->href = replace_character_for_xml($row->href);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:01:15.740

尝试`str_replace("'", "\'", $field_to_be_replaced);`

如果您愿意，可以将`'`字符替换为空格，仅用于测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:19:42.320

您确定它在数据输出时停止，而不是在处理数据时停止吗？撇号在 XML 中具有特殊含义，因此如果它们包含在您的 XML 数据中，您必须将它们替换为实体引用。XML 中有 5 个预定义的实体引用，分别用于小于、大于、与号、撇号和一个引号。或者，您可以将文本标记为 CDATA，以便 XML 解析器不会尝试解析它。

尝试让您的程序将 XML 数据输出到一个文本文件，而不是输出到它现在要去的任何地方。它仍然停在撇号上吗？如果不是，那肯定是因为解析数据有问题。如果即使仅将数据输出到文本文件时您的程序仍然在撇号处停止，则程序中处理该数据的其他地方可能存在问题。检查对包含数据的变量的所有引用，看看你是否能找到程序中断的确切行。

# c# - 如何将 sfx 设置传递给 SevenZipSfx 类

> ID：10900655
> 
> 赞同：1
> 
> 时间：2012-06-05T15:57:05.843
> 
> 标签：c#, 7zip, sfx, sevenzipsharp

有谁知道如何传递位于[http://sevenzipsharp.codeplex.com/](http://sevenzipsharp.codeplex.com/)的 SevenZipSfx 类的 sfx 设置。我需要指定要运行的文件等。我只取了其中一个示例，例如

```
;!@Install@!UTF-8!
RunProgram="setup.exe /s"
GUIMode="2"
;!@InstallEnd@! 
```

并通过 sfx.ModuleFileName 属性设置它，但是当我调用 sfx.MakeSfx(@"C:\a.7z", @"C:\test.exe"); 在 GetSettingsStream(...) 中，因为 settings.key 为空

我认为这不是正确的方法，但似乎无法找到它从哪里读取设置。我不想在源代码中对此进行硬编码。

# mysql - 计算第一个值，第二个值或两者

> ID：10900660
> 
> 赞同：1
> 
> 时间：2012-06-05T15:57:26.697
> 
> 标签：mysql

我需要做一个计数，如果第一个或第二个值为真，它应该是一个，如果两者都正确，则该值应该是两个：

```
 select count(*) from table1 where (cond1 or cond2) 
```

它应该是这样的，但我无法理解。

我该怎么做？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:58:54.610

```
SELECT SUM(cond1) + SUM(cond2) FROM table1 WHERE cond1 OR cond2 
```

# ruby-on-rails - Rails：设计：如何编辑用户信息？

> ID：10900664
> 
> 赞同：6
> 
> 时间：2012-06-05T15:57:54.817
> 
> 标签：ruby-on-rails, devise-confirmable

我有一个使用 Devise 设置的 Rails 应用程序，带有一个注册控制器。

到目前为止的工作：

新用户注册登录注销首页关于确认密码重置

不工作是编辑，因为我无法弄清楚我应该进行的 URL/REST 调用以显示编辑。我确实有一个views/registrations/edit.html.erb 页面。

以下是我的特定于注册的路线部分：

```
cancel_user_registration GET    /cancel(.:format)              registrations#cancel
       user_registration POST   /                              registrations#create
   new_user_registration GET    /request_invite(.:format)      registrations#new
  edit_user_registration GET    /edit(.:format)                registrations#edit 
```

以下是我的 routes.rb 中专门设计的部分：

```
devise_for :users, :controllers => { :registrations => 'registrations', :confirmations => 'confirmations' }, :path => '', :path_names => { :sign_in => "login", :sign_up => "request_invite" } 
```

我尝试了以下方法：

```
http://localhost:3000/edit  
http://localhost:3000/edit/:id
http://localhost:3000/registrations/:id/edit
http://localhost:3000/user/:id/edit 
```

我得到：没有路线匹配 [GET] ...

StackOverfloww 上有几个有用的问答环节，但我不知道如何让这里的建议对我有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T16:03:41.230

我通常只是添加一个

```
resources :users, only: [:show, :edit, :update] 
```

这将为您提供 /users/:id 路线（您的个人资料），并且可以对其进行编辑和更新。这样，您就可以像往常一样在 Devise 之外与 User 模型进行交互。

# android - Android，试图弄清楚如何为位图设置动画，有计时器工作，但不知道如何更新屏幕

> ID：10900668
> 
> 赞同：0
> 
> 时间：2012-06-05T15:58:24.357
> 
> 标签：android

我从她那里得到了一些示例代码来更新计时器的文本控件。接下来我创建了一个自定义视图并覆盖了 onDraw，这样我就可以为视图制作动画了。自定义视图有一个位图，现在只需在每次计时器关闭时将其向下移动一个像素，然后在工作后变得更加精美。

我正在考虑从计时器调用中调用我的自定义视图无效，因此将调用我的 OnDraw 函数。但是我不知道它是否来自计时器，这意味着我将不得不移动位图，或者只是来自 android 更新屏幕。

做这个的最好方式是什么？？？带计时器的代码

```
package besttecksolutions.tellafortune;

/////////////
import java.util.Timer;
import java.util.TimerTask;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.Handler.Callback;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;

public class cShuffle2  extends Activity   {
    TextView text3;
    long starttime = 0;
    //this  posts a message to the main thread from our timertask
    //and updates the textfield

   //runs without timer be reposting self
   Handler h2 = new Handler();
   Runnable run = new Runnable() {

        @Override
        public void run() {
           long millis = System.currentTimeMillis() - starttime;
           int seconds = (int) (millis / 1000);
           int minutes = seconds / 60;
           seconds     = seconds % 60;

           text3.setText(String.format("%d:%02d", minutes, seconds));

           h2.postDelayed(this, 500);
        }
    };

      @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.shuffle2);

        text3 = (TextView)findViewById(R.id.text3);

        h2.postDelayed(run, 0);

        LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);

        // Add the adView to it
        cShuffleView2 myView;
        myView=new cShuffleView2(this);
            layout.addView(myView);

    }

} 
```

执行动画的自定义视图类

```
package besttecksolutions.tellafortune;

import android.content.res.AssetManager;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import java.io.InputStream;
import java.io.IOException;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.content.Intent;
import android.content.Context;

import android.os.Bundle;
import android.view.View;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.os.Bundle;
import android.view.*;
import android.view.View.OnClickListener;

public class cShuffleView2 extends View {

 View t;
 Bitmap icon;

 cShuffleView2( Context context)
    {
        super(context);

        // load in bitmaps
        try {
        AssetManager assetManager= context.getAssets();
       InputStream inputStream;
       inputStream=assetManager.open("bio.png");  
       icon=BitmapFactory.decodeStream(inputStream);
       inputStream.close();
        } catch( IOException e)
        {

        }

    }

 protected void onDraw( Canvas canvas)
    {
    Paint color = new Paint();
    color.setColor(0xffffff00);
    canvas.drawRect(0,0, getWidth(),getHeight(),color);
    canvas.drawBitmap(icon, 100,100,null);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:12:14.197

Create a public boolean field, or private with get/set, and set it to true in your timer callback (e.g. myView.updateBitmap = true;). In onDraw, you can then test it:

```
if (this.updateBitmap){

    // update bitmap
    this.updateBitmap = false;

} 
```

updateBitmap can only be true if it was set in your timer callback (assuming you don't use it anywhere else).

Even better would be to implement your own callback on your extended View then call that directly from the timer.

# javascript - javascript递归函数中的错误

> ID：10900671
> 
> 赞同：1
> 
> 时间：2012-06-05T15:58:37.453
> 
> 标签：javascript, jquery, html, dom, nodes

我有以下代码*（对于目前的情况，它可以被视为从作为输入提供的有效 html 字符串中删除属性的函数）：*

```
function parse(htmlStr)
{
console.log(htmlStr);
result+="<"+htmlStr.tagName.toLowerCase()+">";
var nodes=htmlStr.childNodes;
for(i=0;i<nodes.length;i++) {
    var node=nodes[i];
    if(node.nodeType==3) {
        var text=$.trim(node.nodeValue);
        if(text!=="") {
            result+=text;
        }
    }
    else if(node.nodeType==1) {
        result+=parse(node);
    }
}
result+="</"+htmlStr.tagName.toLowerCase()+">";
return result;
} 
```

但它没有按预期工作。例如，在以下情况下，当我将以下 html 作为输入提供给它时​​：

```
<div id="t2">
    Hi I am
    <b>
      Test
    </b>
</div> 
```

它返回`<div>Hi I am<div>Hi I am<b>Test</b></div>`。

如果给函数提供一些大的输入，页面也会崩溃。

**注意：我知道使用 jQuery 从字符串中删除属性有更好的实现，但我需要在这里使用上面的函数，而且完整的代码不是用于删除属性，上面只是代码的缩短部分**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T16:22:12.110

你的`result`变量有问题。它是未定义的和全局的。在每次递归中，您都会将相同的字符串附加到自身，这也会使其因大量输入而崩溃。（我无法重现任何东西，它会立即因`Undefined variable`错误而崩溃）

顺便说一句：你的论点是不`htmlStr`，它是`domNode`。而且你没有解析任何东西。请不要使用错误的自记录变量名称。

修正版：

```
function serialize(domElement) {
    var tagname = domElement.tagName.toLowerCase();
    var result = "<"+tagname+">";
//  ^^^       ^ not a +=
    var children = domElement.childNodes;
    for (var i=0; i<children.length ;i++) {
//       ^^^ was also missing
         if (children[i].nodeType == 3) {
             result += children[i].data;
         } else if (children[i].nodeType == 1) {
             result += serialize(children[i]);
//                  ^^ add a child's result here
         }
    }
    result += "</"+tagname+">";
    return result;
} 
```

我不会使用 trim()，它会`<div>Hi<b>I</b>am</div>`从`<div>Hi <b>I</b> am</div>`. 你可能会做类似的事情`.replace(/\s+/g, " ")`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T16:23:15.497

这`result+=parse(node);`- >在你的情况下，你不应该像那样将结果合并到递归中..

会发生什么是`<b>`递归调用的返回结果将现有结果附加到返回的结果中。现有结果在哪里，`<div>Hi I am`返回的结果在哪里`<div>Hi I am<b>Test`，所以在递归结束时你有`<div>Hi I am<div>Hi I am<b>Test`.

```
var result = '';
function parse(htmlStr) {        
    result += "<" + htmlStr.tagName.toLowerCase() + ">";    
    var nodes = htmlStr.childNodes;
    for (i = 0; i < nodes.length; i++) {
        var node = nodes[i];        
        if (node.nodeType == 3) {
            var text = $.trim(node.nodeValue);
            if (text !== "") {
                result += text;
            }
        } else if (node.nodeType == 1) {            
            parse(node);
        }
    }
    console.log(result);
    result += "</" + htmlStr.tagName.toLowerCase() + ">";
    return result;
} 
```

**固定小提琴：http:** [//jsfiddle.net/FBnYT/](http://jsfiddle.net/FBnYT/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:41:07.840

改变

```
result+="<"+htmlStr.tagName.toLowerCase()+">"; 
```

至：

```
var result="<"+htmlStr.tagName.toLowerCase()+">"; 
```

在演示中工作正常：http: [//jsfiddle.net/qtuUA/](http://jsfiddle.net/qtuUA/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T00:23:43.813

发生崩溃是因为循环控制变量不是本地范围的。因此，除了其他推荐的更改：

for ( **var** i = 0; i < nodes.length; i++)

...

# php - php mysql 检查现有语法

> ID：10900680
> 
> 赞同：0
> 
> 时间：2012-06-05T15:58:54.590
> 
> 标签：php, mysql, syntax

我有一个从 1 到 6（包括两者）的订购系统，订单号`featured`由用户选择分配给表中的新闻。当用户保存新闻订单时，表格`featured`中会插入一个新行，其中包含以下字段：`id_news`、`id_user`和`id_category``order`

我正在寻找一种更好的语法来检查是否已经有消息给`X`带有 order的客户`Y`。

现在我在一个单独的查询中做每件事，这些操作：

1.  用户选择将新闻 1241 展示给订单号 3
2.  `X`脚本检查订单号为 3的客户是否存在任何消息
3.  如果存在，则将其删除
4.  添加新的精选新闻。

无论如何用更少的动作/代码来做这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:01:23.483

使用`ON DUPLICATE KEY UPDATE`.

假设`(id_user,order)`是唯一键，那么您只需插入新值，如果订单已经存在，则使用新的`id_news`.

```
INSERT INTO `featured` VALUES (...) ON DUPLICATE KEY UPDATE `id_news`=VALUES(`id_news`) 
```

# algorithm - 第一次迭代开始时循环不变

> ID：10900683
> 
> 赞同：1
> 
> 时间：2012-06-05T15:58:56.117
> 
> 标签：algorithm, loops, insertion-sort, invariants, loop-invariant

我正在学习数据结构和算法的基础课程，我们使用的书是 CLRS 的开创性著作。我在理解循环不变量时遇到了一些麻烦，如第 2.1 章所述：插入排序。

书上说：

> 在第 1-8 行的 for 循环的每次迭代开始时，子数组 A[1..j -1] 由最初在 A[1..j-1] 中的元素组成，但按排序顺序。

现在，这让我很困惑。为什么在第一次迭代开始时会保持这种状态？假设要排序的数组看起来像 { 5, 2, 4, 6, 1, 3 }。现在，当 for 循环的第一次迭代开始时，A[1.. j-1] 不是按排序顺序排列的，但当迭代结束时它是有序的。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:01:28.080

> A[1.. j-1] 不是排序顺序，但当迭代结束时它是。

假设 的值`j`最初从 2 开始，`A[1.. j-1]`将只包含一个长度为 1 的数组，根据定义，它是排序的。

# batch-file - 尝试使用 CMD (windows) 递归搜索文件名中包含特定单词的文件

> ID：10900688
> 
> 赞同：0
> 
> 时间：2012-06-05T15:59:08.147
> 
> 标签：batch-file, cmd

我正在尝试编写一个脚本，它将递归地搜索文件夹中的所有文件并在每个文件上运行命令和/或命令列表。这是我需要它如何工作的示例：

*   在文件夹中搜索文件名中包含“1080p”的文件
*   将此文件复制到本地目录*，但从*文件名中删除“1080p”
*   在这些文件上运行另一个批处理脚本（我已经让那部分工作）

所有这些都需要自动化。

我需要在 Windows 命令提示符下执行此操作，并且我愿意使用所需的任何其他程序。
我已经在类似的批处理脚本中使用了 SED。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:41:23.357

```
@echo off
setlocal disableDelayedExpansion

set "src=sourcePath"
set "dst=destinationPath"
set "search=1080p"

for /r "%src%" %%F in (*%search%*) do (
  set "full=%%~fF"
  set "name=%%~nxF"
    setlocal enableDelayedExpansion
    copy "!full!" "%dst%\!name:%search%=!"
    endlocal
)
REM call your batch script here to process the copied files 
```

如果多个源文件夹中存在相同的文件名，您可能会遇到问题。但这是您陈述的要求的普遍问题。

***解释：***

`%%~fF`给出包含在 %%F 中的文件的完整路径

`$$~nxF`仅给出 %%F 中包含的文件的名称和扩展名

类型`HELP FOR`或`FOR /?`有关可用于 FOR 变量扩展的修饰符的更多信息。

`!name:%search%=!`使用延迟扩展来搜索 name 的内容并将搜索值替换为空。在本例中，%search%=1080p。请注意，搜索不区分大小写。

在循环内进行搜索和替换时，我需要使用延迟扩展，因为在解析语句时会发生使用百分比的正常扩展。但是整个 FOR 结构，包括括号的内容，被解析为一个逻辑语句。所以正常的扩展会在循环执行之前给出 name 的值。那是行不通的 :-) 每次执行该行时，延迟扩展都会给出当前值。

键入`HELP SET`或`SET /?`以获取有关搜索和替换以及延迟扩展的更多信息。

我需要打开和关闭延迟扩展，因为`!`它是文件名中的有效字符，如果 %%F 扩展包含`!`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:19:28.307

我建议使用 cygwin 来轻松利用一些常见的 Unix 实用程序，尽管您可能可以一一找到 Windows 编译的版本（即 perl）：

**按名称查找文件列表，对每个文件执行命令：**

```
find . -name \*1080p\* | xargs <command> 
```

**查找文件列表，创建移动/重命名命令列表以去除“1080p”字符串：**

```
find . -name \*1080p\* | perl -ne 'chomp();$x=$_;s/1080p//g;print"cp $x /target/$_\n"'
# add "| sh" to run the commands, or "> commands.sh" to generate a script 
```

**应该在 CMD 中运行的命令只需要 PERL**

```
dir /s /b | perl -ne 'chomp();$x=$_;s/1080p//g;print"copy $x c:\target\$_\n"' > cmds.bat 
```

调整脚本，当然，做你需要的。但是，我相信这将实现您的目标。使用 Windows CMD 可能有一个聪明的方法来做到这一点，但我不是 CMD 专家。Unix实用程序（恕我直言）更加简单！

# css - 在不拉入整个 CSS 的情况下使用 Bootstrap 弹出框？

> ID：10900693
> 
> 赞同：4
> 
> 时间：2012-06-05T15:59:28.980
> 
> 标签：css, twitter-bootstrap

我对使用令人印象深刻的 Bootstrap popover jquery 插件很感兴趣，但不想引入整个庞大的 bootstrap.css，因为它运行在我现有的样式表上。

我试图从 CSS 中挑选出仅工具提示的组件，但失败了。关于解决此问题的最佳方法的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T18:37:17.823

您需要在自定义下载页面上选中两个复选框。在第一步中选择合适的 CSS JS 组件，然后在第二步中选择对应的 jQuery 插件。

见[http://twitter.github.com/bootstrap/download.html](http://twitter.github.com/bootstrap/download.html)

# java - 如何在没有 JFileChooser 的 Java Swing 中打开文件

> ID：10900696
> 
> 赞同：3
> 
> 时间：2012-06-05T15:59:33.197
> 
> 标签：java, swing, file-io, swt, jfilechooser

我正在使用 Java Swing (GUI)，我想在我的项目中添加一个按钮来打开文件。

我不喜欢它，`JFileChooser`因为它会打开一个小窗口来浏览目录的文件。我可以使用其他东西代替`JFileChooser` **Java Swing 下**的东西吗？

我尝试使用 SWT 的元素但它不起作用，意思是使用按钮对象然后在内部使用它`JFrame`，但是失败了，所以我猜 SWT 和 Swing 不混合在一起？

这是[带有 JFileChooser 的 Java Swing](http://www.java2s.com/Code/Java/Swing-JFC/DemonstrationofFiledialogboxes.htm)示例， 我正在寻找[类似](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/FileDialogExample.htm)的东西放入我的`JFrame`.

![Windows 文件对话框](../Images/427d524d9062679d8b2f0ce147659aec.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:30:05.663

`JFileChooser`与本地 PLAF 似乎可以满足规定的要求。

![原生 PLAF 文件选择器](../Images/fba58fb5a8613bb5188604949b700f36.png)

```
import javax.swing.JFileChooser;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class NativeFileChooser {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());
                } catch(Exception e) {
                    e.printStackTrace();
                }
                JFileChooser jfc = new JFileChooser();
                jfc.showOpenDialog(null);
            }
        });
    }
} 
```

还是不太合你的意？然后你可以从[这个](https://stackoverflow.com/questions/6182110/file-browser-gui)开始并将其更改为需要：

![](../Images/23cdb3ac31746680c2928b202bef1f23.png)

* * *

> ..所以我猜 SWT 和 Swing 不会混合在一起？

**在同一个顶级容器**中混合 Swing/AWT/SWT 组件通常不是一个好主意。`FileDialog`在基于 Swing 的基础上打开 AWT 不是问题，`JFrame`因为它们都是顶级容器。我很确定这同样适用于 Swing/SWT 或 AWT/SWT。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T16:06:56.527

如果您不需要 的灵活性`JFileChooser`，您可以选择`FileDialog`使用本机 OS 文件对话框。另请参阅[代码牧场主题](http://www.coderanch.com/t/345134/GUI/java/FileDialog-JFileChooser)和[这个答案](https://stackoverflow.com/a/798287/1076463)

# python - 在 Python 中逐块读取、切片和重构数据文件

> ID：10900702
> 
> 赞同：2
> 
> 时间：2012-06-05T15:59:45.303
> 
> 标签：python, text, format, block

Fortran 程序生成的文本文件包含需要重新格式化的“块”数据（Python 脚本）。

此文件中的每个数据“块”对应于块开头指定的“时间：”。所有“块”都有固定的大小和结构。

我需要从每个“时间：”的不同“深度”（0、-1 和-2）对应的“头部”和“水分”列中提取数据。

注意：开头的标题不是重复数据“块”的一部分。

示例输入文件：

```
 ******* Program Simulation
 ******* 
 This is initial header information for Simulation                              
 Date:   1\. 6\.    Time:  15: 3:39
 Units: L = cm   , T = min  , M = mmol 

 Time:        0.0000

 Node      Depth      Head Moisture       K         
           [L]        [L]    [-]        [L/T]      

   1     0.0000     -37.743 0.0630   0.5090E-05  
   2    -1.0000     -36.123 0.0750   0.5090E-05  
   3    -2.0000     -33.002 0.0830   0.5090E-05  
end

 Time:      360.0000

 Node      Depth      Head Moisture       K         
           [L]        [L]    [-]        [L/T]     

   1     0.0000 -0.1000E+07 0.0450   0.1941E-32  
   2    -1.0000    -253.971 0.0457   0.4376E-10  
   3    -2.0000     -64.510 0.0525   0.2264E-06  
end

 Time:      720.0000

 Node      Depth      Head Moisture       K         
           [L]        [L]    [-]        [L/T]     

   1     0.0000 -0.1000E+07 0.0550   0.1941E-32  
   2    -1.0000    -282.591 0.0456   0.2613E-10 
   3    -2.0000     -71.829 0.0513   0.1229E-06  
end 
```

**期望的输出**：

```
Time        Head(Depth=0)   Head(Depth=-1)  Head(Depth=-2)  Moisture(Depth=0)   Moisture(Depth=-1)  Moisture(Depth=-2)
0.0000      -37.743         -36.123         -33.002         0.0630              0.0750              0.0830
360.0000    -0.1000E+07     -253.971        -64.510         0.0450              0.0457              0.0525
720.0000    -0.1000E+07     -282.591        -71.829         0.0550              0.0456              0.0513 
```

我如何从每个“时间：”到“结束”关键字逐块读取输入文件并重新格式化为所需的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:33:08.360

下面是解析部分：

```
import re

data = []

with open(xxxx) as f:
    for line in f:
        m = re.match(r'^\s+Time:\s+([\d.]+)', line)
        if m:
            data.append([float(m.group(1))])
        elif re.match(r'^\s+\d+', line):
            data[-1].append(map(float, line.strip().split())) 
```

产生：

```
[[0.0,
  [1.0, 0.0, -37.743, 0.063, 5.09e-06],
  [2.0, -1.0, -36.123, 0.075, 5.09e-06],
  [3.0, -2.0, -33.002, 0.083, 5.09e-06]],
 [360.0,
  [1.0, 0.0, -1000000.0, 0.045, 1.941e-33],
  [2.0, -1.0, -253.971, 0.0457, 4.376e-11],
  [3.0, -2.0, -64.51, 0.0525, 2.264e-07]],
 [720.0,
  [1.0, 0.0, -1000000.0, 0.055, 1.941e-33],
  [2.0, -1.0, -282.591, 0.0456, 2.613e-11],
  [3.0, -2.0, -71.829, 0.0513, 1.229e-07]]] 
```

从这里打印所需的表格应该很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:36:54.833

**编辑：**我做了一些更改，所以它*实际上运行了*.

```
from itertools import chain

def get_lines(f, n=1):
    return [f.next() for i in xrange(n)]

class BlockReader(object):
    def __init__(self, f, n=1):
        self.f = f
        self.n = n
    def __iter__(self):
        return self
    def next(self):
        return [self.f.next() for i in xrange(self.n)]

fmt = "{:<12}" + "{:<16}"*6 + "\n"
cols = [
    "Time",
    "Head(Depth=0)",
    "Head(Depth=-1)",
    "Head(Depth=-2)",
    "Moisture(Depth=0)",
    "Moisture(Depth=-1)",
    "Moisture(Depth=-2)"
]

def main():
    with open("simulation.txt") as inf, open("result.txt","w") as outf:
        # throw away input header
        get_lines(inf, 5)
        # write output header
        outf.write(fmt.format(*cols))

        # read input file in ten-line chunks
        for block in BlockReader(inf, 10):
            # grab time value
            time = float(block[1].split()[1])

            # grab head and moisture columns
            data = (line.split()[2:4] for line in block[6:9])
            values = (map(float,dat) for dat in data)
            h,m = zip(*values)

            # write data to output file
            outf.write(fmt.format(*chain([time],h,m)))

if __name__=="__main__":
    main() 
```

输出是

```
Time        Head(Depth=0)   Head(Depth=-1)  Head(Depth=-2)  Moisture(Depth=0)Moisture(Depth=-1)Moisture(Depth=-2)
0.0         -37.743         -36.123         -33.002         0.063           0.075           0.083           
360.0       -1000000.0      -253.971        -64.51          0.045           0.0457          0.0525          
720.0       -1000000.0      -282.591        -71.829         0.055           0.0456          0.0513 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:04:54.660

如果文件不是太大，你可以这样做：

```
f = open('somefile')
file = f.read()
blocks = file.split('Time:')[1:] 
```

# javascript - 如何调出分配给变量的javascript函数？

> ID：10900703
> 
> 赞同：8
> 
> 时间：2012-06-05T15:59:51.470
> 
> 标签：javascript

```
function test1 (){
    //do something
} 
```

要调用上面的函数，我只需要写`test1();`

```
var check_day = function($select_d){
    //do something
}; 
```

如何调用分配给变量的函数？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T16:01:22.103

同样的方式——使用 parens 调用函数`()`：

```
check_day(the_parameter); 
```

# multithreading - 调用线程无法访问此对象，因为不同的线程拥有它

> ID：10900705
> 
> 赞同：2
> 
> 时间：2012-06-05T15:59:57.113
> 
> 标签：multithreading, powershell, printing

我正在尝试从 PowerShell 中检索打印队列列表，如下所示。但我越来越

`The calling thread cannot access this object because a different thread owns it`.

是否因为 PowerShell 无法支持多线程而发生？
有没有办法解决这个问题？

![在此处输入图像描述](../Images/ba4ec097799303fb8c966437d8b6dbd3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:48:28.767

据我了解，您必须使用 -STA （单线程公寓）参数启动 PowerShell 才能使您的代码正常工作：

```
PowerShell -STA
Add-Type -AssemblyName  "system.Printing"
$f = @([system.Printing.EnumeratedPrintQueueTypes]::local, [system.Printing.EnumeratedPrintQueueTypes]::shared)
$ps = New-Object system.Printing.localprintserver
$pq = $ps.GetPrintQueues($f) 
```

# css - 棘手的 CSS 滚动长度

> ID：10900709
> 
> 赞同：0
> 
> 时间：2012-06-05T16:00:10.013
> 
> 标签：css, scroll, overflow, positioning

```
<div class="container1"></div>
<div class="container2"><div class="container2-inner"></div></div>

.container1 { height: 5000px; }
.container2 { height: 100%; width: 100%; position:absolute; }
.container2-inner { height: 1000px; margin: 0 auto; } 
```

`.container2-inner`高度取决于里面的内容（`.container2`是覆盖弹出窗口）。

目前，浏览器垂直滚动始终为 5000 像素，无论`.container2-inner`超过 5000 像素或更多。当弹出窗口处于活动状态时，我希望滚动只有 1000 像素，但我仍然希望在`.container1`下方保持 5000 像素高。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:11:41.853

我不知道我是否正确理解了你的问题。

您可以通过使用实现模态的内部滚动。

```
overflow:scroll 
```

但它不适用于所有浏览器。

我在其他可能对您有所帮助的[Stack Overflow Question上找到了这个](https://stackoverflow.com/questions/5820304/hidden-scrollbars-in-firefox-allows-scrolling-but-just-no-scrollbar)[小提琴。](http://jsfiddle.net/qqPcb/)

```
<div id="wrapper">
    <div id="scroller">
     </div>
</div>​

#wrapper {
    width: 150px;
    overflow: hidden;
}

#scroller {
    width: 170px;
    height: 100px;
    overflow: auto;
} 
```

谢谢Pumbaa80。在这里你可以看到#scroller 比#wrapper 多20px，你可以在没有滚动条的情况下实现滚动效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:32:10.743

根据您的描述，不确定我是否理解您的问题，但可能类似于...

CSS

```
HTML, BODY {padding:0;margin:0;}
.container1 {height:5000px;background:red;}
.container2 {height:100%;width:100%;position:absolute;top:0;left:0;background:green}
.container2-inner {height:1000px;width:400px;overflow-x:hidden;overflow-y:scroll; margin:0 auto;background:yellow} 
```

HTML

```
<div class="container1"></div>
<div class="container2">
    <div class="container2-inner">
    Start Here<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    ...<br />...<br />...<br />...<br />...<br />...<br />
    End Here
    </div>
</div> 
```

[您可以在http://dabblet.com/gist/2876726](http://dabblet.com/gist/2876726)查看结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:14:26.827

听起来您希望 .container2 成为模式弹出窗口？尝试`overflow:hidden`在弹出窗口处于活动状态时设置在主体上，并在关闭时将其移除。

# search - 如何对一个或多个集合中的文档执行 MarkLogic 搜索

> ID：10900710
> 
> 赞同：3
> 
> 时间：2012-06-05T16:00:13.130
> 
> 标签：search, collections, xquery, marklogic

我有基于它所描述的 mime 类型图像的集合中的文档：image/jpg、image/png、image/gif。

我希望能够指定一个`$mime-type`as`"image"`或`"image/jpg"`以便我可以跨所有图像类型或跨特定子类型搜索文档。

```
let $mime-type-pattern := fn:concat($mime-type, "*")
let $mime-type-collection-uris := cts:collection-match($mime-type-pattern) 
```

搜索`$mime-type` `"image"`将返回 URIs `("image/jpg", "image/png", "image/gif")`。我希望能够在任何这些集合中搜索文档。

搜索`$mime-type` `"image/jpg"`将返回 URI `("image/jpg")`。然后我只会搜索“image/jpg”集合的文档。

使用 Search API 进行搜索需要创建什么结构`search:options`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:19:52.190

您可以使用嵌套在节点`cts:collection-query`内的选项内部：`<additional-query>``<options>`

```
search:search("foo",
  <options xmlns="http://marklogic.com/appservices/search">
    <additional-query>
      {cts:collection-query($mime-type-collection-uris)}
    </additional-query>
  </options>) 
```

这会将搜索限制在`$mime-type-collection-uris`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T20:11:55.487

埃文的回答看起来不错。Joe 可能已经考虑过这一点，但我想提一下以这种方式使用集合的潜在设计问题。

集合只是一个扁平的字符串。因此，虽然单独的 mime 类型很好，但您可能会与稍后添加的其他集合发生命名冲突。您可以通过为集合名称提供一些类似名称空间的结构来添加一些保护，`mime-type=image/jpg`例如。在某些情况下，这也可以加速收集匹配。

在大多数情况下，我建议使用元素而不是集合，只是为了避免这个陷阱。但是对于图像，这个元素必须进入属性片段，如果你没有其他属性要存储，这可能会花费更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T03:06:07.890

在 qconole 上，根据集合名称搜索 -

```
fn:collection("collection-name"); 
```

获取分配给 URI 的集合名称 -

```
xdmp:document-get-collection("uri of document"); 
```

# mysql - 将 VB.net 标签插入 mysql 表

> ID：10900711
> 
> 赞同：-1
> 
> 时间：2012-06-05T16:00:16.890
> 
> 标签：mysql, vb.net, visual-studio-2010

如何将 Label.text 数据插入到 mySql 表中。我对 textbox.text 没有问题，但我不知道如何使用 Label.text 我尝试使用 textbox.text 相同的代码

```
parameterB_Answer.Value = TextBox1.Text 
```

它可以找到但是当我尝试使用

```
parameterB_Answer.Value = Label1.Text 
```

mySqlReader 似乎无法读取它。

更新：

1.1.1 是 label1.text。我的想法是从 Label1 插入文本“1.1.1”作为主键和 Textbox(textbox1.text) 如下

我的代码是：

```
Try
    Dim StrSQL As String = "INSERT INTO boranga" & _
                           "(IdBorangA,Answers)" & _
                           "VALUES (@B_IdA,@B_Answer);"
    Dim myCommand As MySqlCommand = New MySqlCommand(StrSQL, conn.open)
    myCommand.CommandType = CommandType.Text
    Dim parameterB_IdA As MySqlParameter = New MySqlParameter("@B_IdA", MySqlDbType.VarChar, 300)
    parameterB_IdA.Value = Label1.Text
    Dim parameterB_Answer As MySqlParameter = New MySqlParameter("@B_Answer", MySqlDbType.VarChar, 300)
    parameterB_Answer.Value = TextBox1.Text
    With myCommand.Parameters
        .Add(parameterB_IdA)
        .Add(parameterB_Answer)
    End With

    Dim result As MySqlDataReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection)
    MsgBox("Tersimpan", vbYes, "boranga")

Catch SqlEx As MySqlException
    Throw New Exception(SqlEx.Message.ToString())
End Try 
```

但是当我将 Label1.text (1.1.1) 的值更改为 111 时，它工作得很好。可能是因为我为 label1.text 的列填充 INT 而“1.1.1”不是整数

非常感谢

PS：似乎我不能发布图片，因为声誉低

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T23:03:00.147

首先尝试使用这种代码格式：

```
Private Sub btnLogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLogin.Click
Dim conn As MySqlConnection

'Connect to the database using these credentials
conn = New MySqlConnection
conn.ConnectionString = "server=your server site (generally long url); user id=login id for mysql user; password=self explanatory; database=name of the DB you're trying to reach"

'Try and connect (conn.open)
Try
    conn.Open()

Catch myerror As MySqlException 'If it fails do this... (i.e. no internet connection, etc.)
    MsgBox("Error connecting to database. Check your internet connection.", MsgBoxStyle.Critical)
End Try

'MySQL query (where to call for information)
Dim myAdapter As New MySqlDataAdapter

'Tell where to find the file with the emails/passes stored
Dim sqlquery = "SELECT * FROM the database you selected above WHERE Email = '" & txtEmail.Text & "' AND Password = '" & txtPassword.Text & "'"
Dim myCommand As New MySqlCommand
myCommand.Connection = conn
myCommand.CommandText = sqlquery

'Start query
myAdapter.SelectCommand = myCommand
Dim myData As MySqlDataReader
myData = myCommand.ExecuteReader

If myData.HasRows = 0 Then
    MsgBox("Invalid email address or password.", MsgBoxStyle.Critical)

Else
    MsgBox("Logged in as " & txtEmail.Text & ".", MsgBoxStyle.Information)

    Me.Close()

End If 
```

结束子

并插入 label.text 尝试首先替换其中一个 textbox.text 字段，看看它是否会接受它。如果是这样，那么答案就在格式中。

另外，不要忘记致电：

```
imports mysql.data.mysqlclient 
```

并确保添加 mysql.data 引用。

# c# - 使用批处理文件从命令行调用 C# exe

> ID：10900713
> 
> 赞同：1
> 
> 时间：2012-06-05T16:00:36.733
> 
> 标签：c#, batch-file

我想使用 C# 创建一个 exe 文件，它将发送电子邮件。我想使用批处理文件调用这个 exe。我应该创建一个 Web 表单应用程序还是只创建一个类库？可以从命令提示符使用批处理文件调用 exe 吗？

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T16:02:49.987

通常，如果您想从命令行调用应用程序，您将创建一个**Console Application**。

这允许您的命令提示符调用应用程序并（可选）接受来自控制台（提示符）的输入以及将输出写入控制台（通过[Console 类](http://msdn.microsoft.com/en-us/library/system.console.aspx)）。

您也可以直接从控制台应用程序的 Main 例程中读取命令行参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:03:01.567

编写一个在命令行上接受参数的控制台应用程序。然后您可以从脚本（即批处理文件）中调用它。您传递的参数可能包含电子邮件的所有元素 - 正文可能有点大，我不确定字符串 args 的长度的限制（如果有的话），但只要正文是合理的在大小上你会没事的。

我更喜欢将这样的“工具”编写为控制台应用程序（而不是 Windows 应用程序），因为您在执行应用程序方面具有很大的灵活性。您可以通过键入 cmd.exe（命令行）直接调用它，您可以编写一个脚本来调用它（如您所建议的那样），您可以编写另一个可以调用它的 .NET 应用程序，等等... A Windows 应用程序只有一种调用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:04:03.060

当然。创建应用程序，并将二进制 exe 存储在某个文件夹（即 C:\folder）中。
如果您的 exe 名称为“name.exe”，请在批处理文件中写入

```
cd C:\folder
name 
```

这适用于所有类型的应用程序，您可以在这两种应用程序中访问命令行数据，但在控制台应用程序中是最简单的。

你会写：

```
cd C:\Users\asif\Desktop\EmailSender\ConsoleApplication1\bin\Debug\
::Space here
ConsoleApplicati‌​on1 
```

*用新线*。

# postgresql - 条件 PostgreSQL 外键

> ID：10900716
> 
> 赞同：12
> 
> 时间：2012-06-05T16:00:53.610
> 
> 标签：postgresql

在 PostgreSQL 中是否可以有条件地添加外键？

就像是：`ALTER TABLE table1 ADD FOREIGN KEY (some_id) REFERENCES other_table WHERE some_id NOT IN (0,-1) AND some_id IS NOT NULL;`

具体来说，我的参考表具有所有正整数 (1+)，但我需要添加外键的表可以包含零 (0)、空和负一 (-1)，所有这些都意味着不同的东西。

笔记：

> **我完全意识到这是糟糕的表格设计**，但这是 10 多年前建立的一个聪明的把戏，当时我们可用的功能和资源并不存在。该系统正在运行数百家零售店，因此此时返回并更改方法可能需要几个月的时间，而我们没有。
> 
> 我不能使用触发器，**这必须使用外键来完成**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:07:46.827

简短的回答是否定的，Postgres 没有*条件*外键。您可能会考虑的一些选项是：

1.  只是没有 FK 约束。将此逻辑移至数据访问层并在没有参照完整性的情况下生存。
2.  在列中允许`NULL`，即使有 FK 约束也是完全有效的。然后，使用另一列存储`0`and`-1`的任何含义。
3.  `0`在引用表中为和添加一个虚拟行`-1`。即使它只是有虚假数据，它也会满足 FK 约束。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T17:42:56.283

您可以添加另一个“影子”列，`table1`其中包含已清理的值（即除`0`and之外的所有内容`-1`）。使用此列进行参照完整性检查。这个影子列由一个简单的触发器更新/填充，该触发器将`table1`所有值写入影子列。两者和都可以映射到.`0``-1``0``-1``null`

然后你有参考完整性和你不变的原始列。缺点：您还有一些触发器和一些冗余数据。但是，唉，这是遗留模式的命运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T16:33:11.013

您的要求等效于此检查约束：

```
create table t (a float check (a >= -1 and a = floor(a) or a is null)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-18T00:41:14.430

您可以使用检查约束和外键来实现这一点。

```
CREATE TABLE table1 (some_id INT, some_id_fkey INT REFERENCES other_table(other_id), CHECK (some_id IN (0,-1) OR some_id IS NOT DISTINCT FROM some_id_fkey)); 
```

（未测试）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T21:56:19.083

Here's another possibility. Use PG Inheritance to enforce a partition of the table into has +1 in the flag column and otherwise. (Usual rules/triggers for maintaining this.) Then have the FK relationship between only the Has_PLUS_ONE child table and the referenced table.

# php - 使用 PHP 解析 SNMP 响应

> ID：10900717
> 
> 赞同：0
> 
> 时间：2012-06-05T16:00:54.283
> 
> 标签：php, encoding, snmp, asn.1

我目前正在使用 php 成功读取我们的 SNMP 交换机上的几个属性。现在，我正在考虑为我们的 API 的消费者制作最终的输出`snmpget`并`snmpwalk`真正有用。

问题是响应看起来像这样：`INTEGER: up(1)`并且`INTEGER: 10103`......

是否有关于如何解析此响应格式的约定/标准，或者响应供应商是否特定于我们尝试读取的每个设备？

是否已经有一个 PHP 库、函数或扩展可以将这些响应转换为 php 本机变量，或者至少是我们可以使用的有用的东西？

* * *

更新：

我发现了一些新东西，即 php 中确实有几个库可以解析二进制 ASN.1 字符串，如果我是对的，这些字符串基本上是 BER 编码的字符串。问题是我似乎无法找到一种方法来使用 php 从设备中获取二进制数据......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:55:30.243

我不确定您的特定 PHP 方法，但您的两个`INTEGER`示例之间的区别可能在于您的系统是否具有对应于 OID 的 SNMP MIB（例如，确定 1 表示“向上”）。

如果您只想要整数，您应该能够将参数传递给您的 get 或 walk 命令。例如，net-snmp 的 snmpget 或 snmpwalk 命令将`-Oe`用于删除符号标签。从[手册页](http://net-snmp.sourceforge.net/docs/man/snmpcmd.html)：

```
 $ snmpget -c public -v 1 localhost ipForwarding.0
              IP-MIB::ipForwarding.0 = INTEGER: forwarding(1)
              $ snmpget -c public -v 1 -Oe localhost ipForwarding.0
              IP-MIB::ipForwarding.0 = INTEGER: 1 
```

如果您正在解析 net-snmp 输出，我建议您阅读[snmpcmd 手册页](http://net-snmp.sourceforge.net/docs/man/snmpcmd.html)，因为它有很多您会感兴趣的输出选项，尤其是其他类型的显示，例如时间刻度和字符串。

如果您确实想在 PHP 中检索 SNMP，您可以查看[Cacti 是如何做到](http://docs.cacti.net/manual:088:1_installation.1_install_unix.1_configure_php#configure_php)的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T16:41:48.880

您可以简单地在脚本开头使用此函数：

```
snmp_set_quick_print(TRUE); 
```

它只会返回您正在搜索的值，没有前导“INTEGER”左右;）

希望这可以帮助 ！

# entity-framework - 在哪里放置审计字段？

> ID：10900719
> 
> 赞同：0
> 
> 时间：2012-06-05T16:00:56.190
> 
> 标签：entity-framework, database-design, orm

在我们的商店中，当我们设计数据库时，我们通常包括每个表的审计属性（LastUpdateUser、LastUpdateDate 等）。这是常见的做法，但是，我注意到当您拥有从其他表“继承”的表时，这将成为一个日益严重的问题，尤其是使用实体框架等工具时。

例如，如果您有表 Customers 和 Employees，并且这些表具有表 People 的外键，那么在您的实体/类模型中，当您建立继承时，您需要更改审计字段的名称，因为它们都存在于表。也许他们需要成为 PersonLastUpdatedUser 和 PersonLastUpdatedDate，而来自Employees 的人仍然只是LastUpdatedUser 和LastUpdatedDate。

在为继承设计表时，您是在两个表中都放置这样的审计字段，还是将它们放在父表中并在子表中的属性更改时更新父表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:12:14.450

如果您想使用继承而不是那些属性属于父表，因为具有相关表的父表形成单个实体，并且您跟踪整个实体的审计。如果您出于任何原因在两个表中都需要这些属性，则应该首先警告这些表不适合继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:38:15.943

如果您想要真正的审计，您可以创建由触发器填充的单独审计表（永远不要由应用程序填充，否则您将错过需要审计的项目）。它们会显示旧值和新值以及进行更改的日期和用户或应用程序。

如果您想要每个表中的最后一个更新的列（我认为这比仅在父级中更好，因为这不会告诉您哪些表最后更改）并且您想要使用继承，那么您可能需要创建通过将表名添加到 lastUpdated 的唯一名称。所以 PersonLastUpdated 和 OrderLastUpdated 等。

或者你不使用继承。

# php - 动态添加已动态插入的复选框的值？

> ID：10900722
> 
> 赞同：0
> 
> 时间：2012-06-05T16:01:00.870
> 
> 标签：php, ajax, shopping-cart, dynamically-generated

我们如何动态显示php中已选中的复选框的所有值的总和。

它基本上就像购物车中的结帐。要检查的每个项目都有一个值，并且最终金额（在底部的同一页面中）应该是所有已检查项目的费率总和（没有清爽）。

我可能需要使用 AJAX。任何人都可以提供一个简单的示例代码吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:15:49.047

对于复选框，您需要将它们制成一个数组，例如：

```
<input type="checkbox" name="items[]" id="items[]" value="25" /><br />
<input type="checkbox" name="items[]" id="items[]" value="40" /><br />
<input type="checkbox" name="items[]" id="items[]" value="12" /><br />
... <!-- as many as you want -->
<input type="checkbox" name="items[]" id="items[]" value="20" /><br /> 
```

在 PHP 方面，您可以像这样处理它......（注意：它将作为数组进入 PHP）

```
$items = $_POST["items"];
//it's an array -- feel free to do a var_dump($items) to see its content
//to sum you could even do an $total_amount = array_sum($items);
//but i would advise cleaning up the values first 
```

是的，如果您使用 AJAX（例如通过 jQuery）提交表单，您可以实现同样的效果
快乐编码 :)

# php - PhP/Login 空输入框问题

> ID：10900725
> 
> 赞同：0
> 
> 时间：2012-06-05T16:01:04.827
> 
> 标签：php

我正在创建一个网站，要求用户输入用户名和密码才能访问该网站。一切都很完美。如果输入正确的密码和用户名，则授予访问权限。如果不是，它会将用户重定向到相同的登录表单页面。但是，我面临的问题是 php 中的以下代码：

```
 if (!$_POST['username'] | !$_POST['pw'] ) {

        die("At least one box was left empty");

    } 
```

这段代码检查用户是否将 2 个输入框中的任何一个留空。它会杀死网站并输出想要的句子。但是，我想做的是将用户重定向到登录表单页面。有什么帮助吗？谢谢各位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:03:51.450

错误的：

```
 if (!$_POST['username'] | !$_POST['pw'] ) { 
```

您的示例中的语法错误，您需要添加一个符号以使其正确：

正确的：

```
 if (!$_POST['username'] || !$_POST['pw'] ) {
                            ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:02:35.260

你甚至没有尝试重定向。

使用`header("Location: login.php");`（无论您的登录页面的位置是什么，如果不是`login.php`），那么`exit`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:04:32.693

有两种可能：

*   使用 header() 函数：`header('Location: login.php');`
*   Echo/ 打印一个 java-script 标签：`echo "<script language="javascript">window.location.href='login.php';</script>`

`header()`只有在调用它之前不输出一些文本时，才能使用 -function 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:05:45.020

您可以使用**空**和**标题**功能！

```
<?php
if(empty($_POST['username']) OR empty($_POST['pw']))
{
    header('Location: pathtoyourloginpage.php');
}

else
{
    echo "OK";
}
?> 
```

*empty*检查 $_POST['username'] 和 $_POST['pw'] 是否为空。如果是这样，他们返回 TRUE，否则返回 FALSE。

*OR*是一个逻辑运算符，您可以在这里找到更多信息：[http ://www.php.net/manual/en/language.operators.logical.php](http://www.php.net/manual/en/language.operators.logical.php)

**关于 empty() 的更多信息；和标头（）；**

[http://php.net/manual/fr/function.empty.php](http://php.net/manual/fr/function.empty.php)

[http://fr2.php.net/manual/fr/function.header.php](http://fr2.php.net/manual/fr/function.header.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T16:07:26.070

首先，你必须使用double`|`来比较，正确的方法是：`value || value`

使用重定向到登录`header('Location: login.php');`

如果您希望在登录表单中显示带有错误的额外消息，您可以执行以下操作：`header('Location: login.php?error=1');`

然后，`login.php`您可以在 中检查`$_GET['error']`，执行以下操作：

```
if($_GET['error'] == 1){
     echo "You have to fill username and password in order to continue.";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-16T03:43:58.480

这是解决您的问题的最佳方法：

例如，您需要首先在 core.php 文件中声明此变量，然后在所有 php 文件中使用它，或者只在您正在处理的文件中声明它：

```
$current_file = $_SERVER['SCRIPT_NAME']; 
```

然后只需在 header() 函数中使用它：

```
header('Location: '.$current_file); 
```

此方法的机会是您使用通用变量在标头函数或任何其他函数中指定 url。

# ruby - 为什么在 *a = "" 之前调用 p 时，splat/unary 运算符会更改分配的值 a？

> ID：10900726
> 
> 赞同：7
> 
> 时间：2012-06-05T16:01:06.317
> 
> 标签：ruby

就我如何理解这个问题提供一些背景信息。

在字符串上使用 splat collect 将 :to_a 或 :to_ary 发送到字符串

```
class String
  def method_missing method, *args, &block
    p method #=> :to_ary
    p args   #=> []
    p block  #=> nil
  end
end

*b = "b" 
```

所以我在想重新定义 :to_ary 方法将是我所追求的。

```
class String
  def to_ary
    ["to_a"]
  end
end

p *a = "a" #=> "a"
p a        #=> "a"

*b = "b"
p b        #=> ["to_a"] 
```

现在，这让我无所适从。

从 *a = "a" 打印结果会更改分配给 a?

为了进一步证明

```
class String
  def to_ary
    [self.upcase!]
  end
end

p *a = "a" #=> "a"
p a        #=> "a"

*b = "b"
p b        #=> ["B"] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T16:15:59.617

非常有趣的问题！Ruby 采用以下表达式：

```
 p *a = "a" 
```

并将其翻译成这样的：

```
 temp = (a = "a")
 p *temp 
```

所以发生的第一件事就是`a`被分配给`"a"`，然后分配表达式的*结果*`"a"`被喷溅并发送给`p`。由于`p`发送多个参数时的默认行为只是迭代并打印每个参数，因此您只会看到`"a"`出现。

简而言之，它遵循“先分配然后分解”的评估顺序。所以在字符串被喷溅之前`a`被分配给。`"a"`

但是，当您没有函数调用时，它被解释为如下所示：

```
# *a = "a" gets interpreted as:
temp = "a"
a = *temp 
```

这遵循“先分配后分配”的评估顺序。所以在字符串被喷溅后被*分配*`a`。

 *您可以通过以下方式查看函数接收到的内容：

```
def foo *args
  puts args.inspect
end

foo *a = "a"    # outputs ["a"]
a               # outputs "a" 
```

希望这能弄清楚发生了什么！

简而言之（感谢 Mark Reed）：

```
p *a = "a"    # interpreted as: p(*(a = "a"))
*a = "a"      # interpreted as: a = *("a") 
```*

# haskell - newtype 语句的含义

> ID：10900732
> 
> 赞同：0
> 
> 时间：2012-06-05T16:01:28.793
> 
> 标签：haskell, newtype

我有这样的声明：

```
newtype State st a = State (st -> (st, a)) 
```

因此类型`State`为：

```
State :: (st -> (st, a)) -> State st a 
```

我无法理解其中的含义：

*   是`st`并且`a`只是两种数据类型的占位符？正确的？
*   该语句是否意味着 State 是一个以函数为参数的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:47:27.370

是的。数据构造函数是 Haskell 中的函数，具有可以对它们进行模式匹配的附加功能。因此，例如，如果您有类型列表，则`fs : [st -> (st, a)]`可以执行`map State fs :: [State st a]`.

状态单子通常的工作方式是`State st a`表示**状态转换**器：一个接受初始状态的事物，执行一些可能依赖或改变该状态的计算，并产生类型的结果`a`。组合两个状态转换器意味着创建一个复合的，它以初始状态执行第一个，然后以第一个执行后保持的状态执行第二个。

所以`State`monad 实现模型直接作为 type 的函数`st -> (st, a)`。组合两个这样的函数只是生成一个复合函数的问题，该函数将初始状态提供给第一个，将由此产生的状态传递给第二个，并返回第二个的最终状态和结果。在代码中：

```
bindState :: State st a -> (a -> State st b) -> State st b
bindState (State function1) f = 
    State $ \initialState -> let (nextState, firstResult) = function1 initialState
                             in f firstResult 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:12:55.333

是的，是的。`st`是状态类型，是`a`答案类型。

# javascript - 为什么我的 ExtJS 表单没有提交？

> ID：10900735
> 
> 赞同：2
> 
> 时间：2012-06-05T16:01:48.187
> 
> 标签：javascript, extjs, submit

我正在使用 ExtJS 弹出一个带有简单编辑表单的窗口，但是在按下提交按钮时，没有进行 XHR 调用，并且我`this.form.el.dom is undefined`在控制台中报告了一个错误。

这是我的代码：

```
var myNameSpace = new function(){
    var editForm, editWindow;

    this.init = function(){

        Ext.Ajax.request({
            url: '/server/action.php',
            success: function(result){
                console.log('ajax is working ok');  // I get this
            }
        });

        editForm = new Ext.form.FormPanel({
            width:450,
            autoHeight: true,
            header : false,
            items:  [{
                name: 'color', 
                fieldLabel: 'Color', 
                xtype: 'textfield', 
                value: 'blue'
            }],
            buttons: [{
                text:"Submit",
                scope: this,  // tried without this, too
                handler: function(){
                    // editForm.getForm().getValues() returns normal values
                    editForm.getForm().submit({
                        url: '/server/action.php',
                        success: function(form, action) {
                            console.log('Yes! Success!');  // I don't get this
                        },
                        failure: function(form, action) {
                            console.log('failed.');  // I don't get this
                        }
                    });
                    editWindow.close();  // works
                    console.log('the form is now closed'); // I get this
                }
            }]
        });

        editWindow = new Ext.Window(
        {
            title:'Enter your color',
            autoWidth: true,
            autoHeight: true,
            layout: 'fit',
            modal: true,
            items: editForm,
            closeAction: 'hide'
        });
        editWindow.show();
    };

};

Ext.onReady(function () {
    myNameSpace.init();
}); 
```

任何关于这个主题的观点都将受到极大的赞赏和热烈的支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T21:39:37.027

我要说这个问题是表单提交的异步性质。您的表单在收到来自 Ajax 提交事件的响应之前关闭。尝试`editWindow.close()`在成功处理块内移动您的线路。

# android - Android XML 架构验证

> ID：10900737
> 
> 赞同：2
> 
> 时间：2012-06-05T16:01:50.357
> 
> 标签：android, xml, validation, xsd

我正在尝试在将在 android 上运行的应用程序中使用本地模式文件 (xsd) 验证 XML。[我按照这里](http://developer.android.com/reference/javax/xml/validation/package-summary.html)的 android 开发者文档中的说明进行操作。

我能够在 java 中验证我的 xml 文件，但是在 android 上运行时会引发 IllegalArgument 异常（下面提到的代码）。

```
SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI); 
```

请就如何在 android 上进行 XML 模式验证提出建议。是否有适用于 android 的架构验证库？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:15:22.690

API 在 Android 中，但不是实现（[更多](https://stackoverflow.com/a/6362749/715269)）。因此，唯一的方法是通过一些外部 jar、Crimson 或 Xerces 添加功能。不是什么大问题。你看过[这里](http://developer.android.com/reference/javax/xml/validation/package-summary.html)吗？

# mysql - 如何在 Python 和 MySQL 中更优雅地进行这种查找？

> ID：10900739
> 
> 赞同：2
> 
> 时间：2012-06-05T16:02:06.347
> 
> 标签：mysql, cursor, python, fetchall

**我在一个名为nameid_cityid.txt**的目录中有一堆文件，nameid 和 cityid 是**mydata**表中 name **(integer(10))**和 city **(integer(10))**的id。

 **虽然以下解决方案有效，但我正在进行类型转换，因为 fetchall 获取 'L' 并且 nameid、cityid 的文件名元组是字符串，..

如果你能提出一个 pythonic 或更优雅的方式来做同样的事情，那对我和社区来说太棒了！

**我要实现的目标：** 从数据库中没有记录的目录中查找那些文件，然后对该文件执行某些操作，例如解析/移动/删除它。

**MySQL 表 mydata ：**

```
nameid  cityid
15633   45632
2354    76894 
```

**Python ：**

```
for pdffile in os.listdir(filepath):
    cityid, nameid = pdffile.strip('.txt').split('_')[0], pdffile.strip('.txt').split('_')[1]    
    cursor.execute("select cityid, nameid from mydata")
    alreadyparsed = cursor.fetchall()
    targetvalues = ((str(cityid), str(nameid)) for cityid, nameid in alreadyparsed)
    if (int(cityid), int(nameid)) in alreadyparsed:
        print cityid, nameid, "Found"
    else:
        print cityid, nameid, "Not found" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:04:30.740

您可以在 SQL 中执行连接，这将返回一个字符串：

```
SELECT CONCAT(nameid, '_', cityid, '.txt') FROM mydata 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:19:30.067

我会使用一组进行快速简便的测试：

```
cursor.execute("select CONCAT(nameid, '_', cityid, '.txt') from mydata")
present = set([r[0] for r in cursor])

for pdffile in os.listdir(filepath):
    nameid, cityid = map(int, pdffile.rsplit('.', 1)[0].split('_'))
    print nameid, cityid,
    print "Found" if pdffile in present else "Not found" 
```

首先，我将查询拉到文件名循环之外；每次都查询同一组行是没有意义的。

其次，我将让 MySQL 为我生成文件名，`CONCAT`以便将信息收集到一个集合中。

第三，因为我们现在有一组文件名，所以针对该组测试每个单独的文件名是一个简单的`pdffile in present`测试。

最后，我已将您的文件名拆分逻辑简化为一行。

现在，如果您想要的只是数据库中尚不存在的一组文件名（而不是枚举哪些文件名和哪些文件名不存在），只需使用 set 操作：

```
cursor.execute("select CONCAT(nameid, '_', cityid, '.txt') from mydata")
present = set([r[0] for r in cursor])

for pdffile in (set(os.listdir(filepath)) - present):
    nameid, cityid = map(int, pdffile.rsplit('.', 1)[0].split('_'))
    print nameid, cityid, "Found" 
```

在这里，我们使用[`.difference`操作（使用`-`运算符）](http://docs.python.org/library/stdtypes.html#set.difference)通过一个简单的操作删除数据库中已经存在行的所有文件名。**

# c++ - 尝试在 Xcode 中编译时出现 Mach-O 错误

> ID：10900742
> 
> 赞同：1
> 
> 时间：2012-06-05T16:02:18.167
> 
> 标签：c++, xcode, compiler-errors, mach-o

我正在使用 Xcode 中的 C++ 程序，当我尝试构建和运行应用程序时，我不断收到 Mach-O 错误（加上“构建失败”错误消息）。下面是我正在使用的代码：

```
//
//  QuadSolver.cpp
//  Calculator
//
//
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <cmath>
using namespace std;

int main(int nNumberofArgs, char* pszArgs[])
{
    //enter the three variables
    double a;
    double b;
    double c;
    cout << "Enter A";
    cin >> a;

    cout << "Enter B";
    cin >> b;

    cout << "Enter C";
    cin >> c;

    //calculating a discriminant
    double d;
    d = b * b - 4 * a * c;
    double x1, x2;

    if (d == 0)
    {
        x1 = x2 = -b / (2 * a);
        cout << "There's only one solution: ";
        cout << x1;
        system("PAUSE");
        return 0;
    }

    else if (d < 0)
    {
        cout << "There are no possible solutions, as the discriminant is smaller than zero";
        system("PAUSE");
        return 0;
    }
    else if (d > 0)
    {
        x1 = (-b - sqrt(d)) / (2 * a);
        x2 = (-b + sqrt(d)) / (2 * a);
        cout << "There are two solutions:";
        cout << "x1=";
        cout << x1;
        cout << "x2=";
        cout << x2;
    }
} 
```

错误消息类似于：

```
ld: duplicate symbol _main in /Users/myusername/Library/Developer/Xcode/DerivedData/Calculator-cwpaasypxtqkpvfsbfjekrgrgvbq/Build/Intermediates/Calculator.build/Debug/Calculator.build/Objects-normal/x86_64/QuadSolver.o and /Users/myusername/Library/Developer/Xcode/DerivedData/Calculator-cwpaasypxtqkpvfsbfjekrgrgvbq/Build/Intermediates/Calculator.build/Debug/Calculator.build/Objects-normal/x86_64/main.o for architecture x86_64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:05:46.300

您的`main`函数在两个地方定义。在你上面的小程序和一个名为 的源文件中`main`，它可能是模板的一部分。我不确定您使用的是哪个模板，但请在您的项目中查找名为的文件并将`main`其删除或注释掉其对`main`函数的实现。

# python - python + django + ftp app .. 处理文件，索引和下载

> ID：10900743
> 
> 赞同：0
> 
> 时间：2012-06-05T16:02:25.470
> 
> 标签：python, django, ftp, ftplib

我对构建一个非常简单的 django 应用程序有疑问，它从 ftp 帐户的用户那里获取用户名和密码，我的应用程序将检索文件列表，他可以通过修改、名称等方式订购文件。然后下载文件

有一个工具 ftptool 0.5.1 但问题是我找不到像创建时那样获取文件信息的方法？

[http://pypi.python.org/pypi/ftptool/0.5.1](http://pypi.python.org/pypi/ftptool/0.5.1)

任何解决方案？

```
>> a_host.listdir("/a_dir")
(['other_dir', 'some_dir'], ['foo', 'bar']) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:24:11.493

查看文档和 ftptools 的源代码，除非您下载文件，否则似乎无法获取文件的元信息。

使用 python 包含的低级 ftplib，有一个 FTP 协议命令`MLSD`，它可能是您正在寻找的命令。不过，您可能需要检查您的 FTP 服务器是否支持

# vb6 - VBScript：通过 createobject 分配数组 (2)

> ID：10900746
> 
> 赞同：2
> 
> 时间：2012-06-05T16:02:30.123
> 
> 标签：vb6, vbscript, exchangewebservices

我在将此 VB6 代码转换为 VBScript 时遇到问题。我正在调用一个 COM 对象来创建一个数组作为 EmailAddressType。这是工作的 VB6 代码：

```
'Assign TO: addresses
Dim toAdresses(2) As New EmailAddressType
toAdresses(0).EmailAddress = "someone@whocares.com"
toAdresses(0).RoutingType = "SMTP"
toAdresses(1).EmailAddress = "someoneelse@whocares.com"
toAdresses(1).RoutingType = "SMTP"
email.ToRecipients = toAdresses 
```

我似乎无法弄清楚如何将其转换为 VBScript。我已经尝试了以下方法，但是一旦我收到电子邮件就会收到类型不匹配错误。ToRecipients = toAdresses

```
 'Assign TO: addresses
   dim toAdresses(2)
   set toAdresses(0) = createobject("EWS.EWSWebSvc.EmailAddressType")
   set toAdresses(1) = createobject("EWS.EWSWebSvc.EmailAddressType")
    toAdresses(0).EmailAddress = "someone@whocares.com"
    toAdresses(0).RoutingType = "SMTP"
    toAdresses(1).EmailAddress = "someoneelse@whocares.com"
    toAdresses(1).RoutingType = "SMTP"
    email.ToRecipients = toAdresses 
```

顺便说一句，这是 Exchange Web 服务的 COM 包装器，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:15:47.167

我认为问题在于 .ToRecipients 属性需要一个*EmailAddressType 数组，*而您在 VBScript 中可以轻松获得的只是一个变体或变体数组。

看起来这个 API 并不是为了编写脚本而构建的。

奇怪的是，有一个暗示可以从 JScript 中使用：[MessageType.ToRecipients 属性](http://msdn.microsoft.com/en-us/library/exchangewebservices.messagetype.torecipients%28EXCHG.80%29.aspx)

不过，我怀疑他们正在改写历史，这些天在 MSDN 上逐渐删除了任何提及 VBScript 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:04:33.763

只是猜测，试试这个

```
toAdresses.EmailAddress = "someone@whocares.com;someoneelse@whocares.com"
toAdresses.RoutingType = "SMTP"
email.ToRecipients = toAdresses 
```

如果它不适用于 ; 试试看，

# python - 正确退出python

> ID：10900748
> 
> 赞同：3
> 
> 时间：2012-06-05T16:02:35.883
> 
> 标签：python

我知道 sys.exit() 引发了一个 Exit 异常，所以当我运行它时，我知道它不会退出：

```
In [25]: try:
   ....:     sys.exit()
   ....: except:
   ....:     print "oops"
   ....:     
oops 
```

但我认为 os._exit() 是为了使用 C 调用退出，但它也会导致异常：

```
In [28]: try:
   ....:     os._exit()
   ....: except:
   ....:     print "oops"
   ....:     
oops 
```

有没有办法在不杀死 PID 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T16:07:08.903

我不确定我是否理解您的问题，但`os._exit`没有引发异常——您`os._exit`使用错误数量的参数调用是：

```
try:
    os._exit()
except Exception as e:
    print e

#output: _exit() takes exactly 1 argument (0 given) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T16:07:04.373

不要在没有`except`Exception 类的情况下使用，这样`sys.exit`就可以在不触发异常处理的情况下正常工作：

```
>>> import sys
>>> try:
...     sys.exit()
... except Exception:
...     print 'oops'
... 
$ 
```

还有其他异常是用普通的 except 子句触发的（通常不应该），尤其是`KeyboardInterrupt`.

# java - SOAPFactory 在寻址标头标记中为“soap”命名空间创建“null”值

> ID：10900749
> 
> 赞同：0
> 
> 时间：2012-06-05T16:02:38.247
> 
> 标签：java, soap, namespaces

在 JBoss4.2.3 中运行的 J2EE 应用程序中，我们正在创建一个 SOAPConnection 来调用第 3 方的 Web 服务。在 SOAP Header 中，我们必须设置 Addressing To 和 Action 标记，将“mustUnderstand”设置为“1”。此“mustUnderstand”属性位于`http://www.w3.org/2003/05/soap-envelope`命名空间中。我们通过调用来创建它：

`SOAPFactory#createName("mustUnderstand", "soap", "http://www.w3.org/2003/05/soap-envelope");`

*当我们在 WEB-INF/lib 文件夹中包含 saaj.jar 和 saaj-impl.jar 时，*这会正确显示。如果我把这些拿出来，命名空间就会出现 null 为： xmlns:soap='null' 而不是`xmlns:soap="http://www.w3.org/2003/05/soap-envelope"`. 这是整个坏标签：

`<wsa:To xmlns:wsa='http://schemas.xmlsoap.org/ws/2004/08/addressing' xmlns:soap='null' soap:mustUnderstand='1'>http://domain/web-service.url</wsa:To>`.

但是，如果我们将这 2 个 jar 文件与应用程序一起部署，我们自己托管的 Web 服务会在创建故障时失败（由于类转换异常：

`javax.xml.soap.SOAPException: java.lang.ClassCastException: com.sun.xml.messaging.saaj.soap.ver1_1.SOAPMessageFactory1_1Impl)`

我们的 J2EE 应用程序是一个 JBossWS Web 服务，它自己调用第 3 方 Web 服务。与 jar 文件存在明显冲突。

关于如何`http://www.w3.org/2003/05/soap-envelope`在生成的 SOAP 标记中写出命名空间的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:49:08.073

我最终使用 API 直接调用 SOAPHeaderElement#mustUnderstand(true)。这看起来已经解决了这个问题，因为不需要另一个命名空间声明（它使用来自信封本身的soap-env命名空间声明。

我还有另一个问题（JBoss 想要发送一个分块的 HTTP 请求，第 3 方网络服务不喜欢它，但我还没有深入研究那个）

# html - 使用 XSLT 计算唯一的 XML 元素属性

> ID：10900750
> 
> 赞同：0
> 
> 时间：2012-06-05T16:02:38.203
> 
> 标签：html, xml, xslt

我刚刚开始使用 XSLT 并试图解决这个问题。您的帮助将不胜感激。

示例 XML 文件

```
<purchases>
    <item id = "1" customer_id = "5">
    </item>
    <item id = "2" customer_id = "5">
    </item>
    <item id = "7" customer_id = "4">
    </item>
</purchases> 
```

所需的 HTML 输出：

```
<table>
    <tr><th>Customer ID</th><th>Number of Items Purchased</th></tr>
    <tr><td>5</td><td>2</td></tr>
    <tr><td>4</td><td>1</td></tr>
</table> 
```

ID 为 5 的客户购买了 2 件商品。ID 为 4 的客户购买了 1 件商品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:38:21.800

XSLT 1.0 解决方案....

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>

      <xsl:template match="/">
        <table>
          <xsl:apply-templates select="purchases/item"/>     
        </table>
      </xsl:template>

   <xsl:template match="item">
     <xsl:if test="not(
       preceding-sibling::*[@customer_id=current()/@customer_id]
       )">     
         <tr><td><xsl:value-of select="@customer_id"/></td>
           <td><xsl:value-of select="count(following-sibling::item
             [@customer_id=current()/@customer_id])+1"/></td>
         </tr> 
     </xsl:if>   
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:42:42.153

一个可能的 Xslt 1.0 解决方案是

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>

    <xsl:key name="kCustomer" match="item" use="@customer_id"/>

    <xsl:template match="/">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="purchases">
        <xsl:element name="table">
            <xsl:element name="tr">
                <xsl:element name="th">Customer ID</xsl:element>
                <xsl:element name="th">Number of Items Purchased</xsl:element>
                <xsl:for-each select="item[generate-id(.) = generate-id(key('kCustomer', @customer_id))]">
                    <xsl:variable name="total" select="count(/purchases/item[@customer_id=current()/@customer_id]/@id)" />
                    <xsl:element name="tr">
                        <xsl:element name="td">
                            <xsl:value-of select="./@customer_id" />
                        </xsl:element>
                        <xsl:element name="td">
                            <xsl:value-of select="$total" />
                        </xsl:element>
                    </xsl:element>
                </xsl:for-each>
            </xsl:element>
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

取自[Dimitres](https://stackoverflow.com/a/758749/205233)关于[How can I Group and sort based on sum 的](https://stackoverflow.com/q/758527/205233)回答。

* * *

正如 Dimitre 所指出的，*购买*模板可以简化为

```
 <xsl:template match="purchases">
        <table>
            <tr>
                <th>Customer ID</th>
                <th>Number of Items Purchased</th>
            </tr>
            <xsl:for-each select="item[generate-id(.) = generate-id(key('kCustomer', @customer_id))]">
                <xsl:variable name="total" select="count(/purchases/item[@customer_id=current()/@customer_id]/@id)" />
                    <tr>
                        <td>
                            <xsl:value-of select="./@customer_id" />
                        </td>
                        <td>
                            <xsl:value-of select="$total" />
                        </td>
                    </tr>
            </xsl:for-each>
        </table>
    </xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:17:47.467

如果您想要 XSLT 2.0，那么下面的 XSLT 应该可以解决问题：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output indent="yes"/>
    <xsl:template match="/purchases">
        <table>
            <tr>
                <th>Customer ID</th>
                <th>Number of Items Purchased</th>
            </tr>
            <xsl:for-each-group select="item" group-by="@customer_id">
                <tr>
                    <td>
                        <xsl:value-of select="current-grouping-key()"/>
                    </td>
                    <td>
                        <xsl:value-of select="count(current-group())"/>
                    </td>
                </tr>
            </xsl:for-each-group>
        </table>
    </xsl:template>
</xsl:stylesheet> 
```

# ruby - 安装 gem linecache19：意外令牌附近的语法错误

> ID：10900751
> 
> 赞同：0
> 
> 时间：2012-06-05T16:02:42.790
> 
> 标签：ruby, gem, ruby-debug

我尝试了几种安装方式，但每次都失败了。你能帮我吗？结果总是一样的：

```
...
creating Makefile

make
generating trace_nums-i386-mingw32.def
/usr/bin/sh: -c: line 1: syntax error near unexpected token `Init_trace_nums.sub(/'
/usr/bin/sh: -c: line 1: `C:/Ruby193/bin/ruby -e \puts EXPORTS,  + Init_trace_nums.sub(/\..*\z/,)\  > trace_nums-i386-mingw32.def'
make: *** [trace_nums-i386-mingw32.def] Error 258 
```

我看过几个相关的帖子，但没有一个与此消息有关。我正在使用**pik**，以防万一。

我不知道如何解释这个错误信息。如果我应该打开其中一个 gem 源文件并更正其语法，那么哪个文件有此问题？（我在搜索中打开了几个。）

**规格：** Windows 7、Ruby 1.9.3、Rails 3.2.3

## 我试过的：

我在命令行上试过：

```
gem install linecache19 
```

我尝试将它添加到我的 Gemfile 中，然后调用`bundle install`

```
gem 'linecache19' 
```

我尝试从 ruby​​forge 下载它并调用：

```
gem install linecache19-0.5.13.gem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:03:36.520

将近一个月后，我成功了。解决方案是使用 Ruby DevKit。它的安装说明（不要只是解压）在[这里](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)。

# gcc - 如何检测 gcc？

> ID：10900753
> 
> 赞同：2
> 
> 时间：2012-06-05T16:02:49.220
> 
> 标签：gcc, instrumentation

出于某些目的，我必须对 gcc 进行检测。目标是能够跟踪在特定编译期间调用了哪些 GCC 函数。不幸的是，我对 GCC 的架构并不是很熟悉，所以我需要一点帮助。我尝试了以下步骤：

1) 破解 gcc/Makefile.in 并将“-finstrument-functions”标志添加到 T_CFLAGS。
2) 我有一个已经实现和测试的**start_test**和**end_test**函数版本。它们在调用 toplev_main() 之前和之后从 gcc/main.c 中调用。包含文件链接到 gcc（该对象被添加到 OBJS-common 并且依赖项稍后在 gcc/Makefile.in 中定义）
3) 使用 contrib/download_prerequisites 下载先决条件。
4) 从干净的构建目录执行配置（与源目录在同一级别）：`./../gcc-4.6.2/configure --prefix="/opt/gcc-4.6.2/" --enable-languages="c,c++"`
5) 使用“make all”启动构建

这样我的内存就用完了，虽然我有 28G。
接下来，我尝试从 Makefile 中删除 T_CFLAGS 设置，并将 -finstrument-functions 赋予 make 命令：`make CFLAGS="-finstrument-functions"`. 以这种方式构建成功，但是当我尝试编译某些内容时，它导致输出文件为空。（理论上**end_test**应该将其结果写入给定文件。）

我做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:52:17.130

除非您明确将其排除在仪器之外，否则它`main`本身会受到仪器的影响，因此对您的内部`start_test`和`end_test` *内部* `main`进行调用并不是您想要的方式。确保文件在正确时间打开和关闭的“正确”方法是定义“构造函数”和“析构函数”，GCC 会在前后自动生成对它们的调用`main`：

```
void start_test (void)
  __attribute__ ( (no_instrument_function, constructor));

void end_test (void)
  __attribute__ ( (no_instrument_function, destructor));

/* FILE to write profiling information.  */
static FILE *profiler_out;

void start_test (void)
{
  profiler_out = fopen ("profiler.out", "w");
  if (profiler_out == NULL)
    exit (-1);
}

void end_test (void)
{
  fclose (profiler_out);
} 
```

脚注：

1.  [在此处](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)阅读更多关于`constructor`和属性`destructor`的信息。它们是 GCC 理解的函数属性。`no_instrument_function`
2.  在 IBM 网站上阅读此[出色的检测指南。](http://www.ibm.com/developerworks/library/l-graphvis/)

# multithreading - PowerShell 线程

> ID：10900755
> 
> 赞同：1
> 
> 时间：2012-06-05T16:02:51.963
> 
> 标签：multithreading, powershell, printing

> **可能重复：**
> [调用线程无法访问此对象，因为不同的线程拥有它](https://stackoverflow.com/questions/10900705/calling-thread-cannot-access-this-object-because-a-different-thread-owns-it)

我正在尝试从 PowerShell 中检索打印队列列表，如下所示。但我收到一个错误，如下图所示

是否因为 PowerShell 无法支持多线程而发生？
有没有办法解决这个问题？

![在此处输入图像描述](../Images/ba4ec097799303fb8c966437d8b6dbd3.png)

# mysql - 复制从属锁定

> ID：10900759
> 
> 赞同：3
> 
> 时间：2012-06-05T16:03:12.837
> 
> 标签：mysql, locking, replication

我有一个主 mysql 服务器和 2 个从属服务器作为备份。

其中一个奴隶配备了固态存储，因此大量用于报告。

生成的一些数据需要一些时间（在某些情况下大约半小时到一个小时）并使用和生成数据分配（大约几场演出，这让我对使用事务犹豫不决）。报告表只是整个数据库的一小部分，因此完全关闭复制在某种程度上是不可能的。

手头的问题是在生成数据时生成的报告显然不完整且错误。

1.  在主服务器和报告服务器上锁定表的最佳方法是什么？
2.  是否会将“LOCK TABLES”语句复制到从属服务器，或者我最好的做法是在临时表中生成数据，然后在一个 INSERT ... SELECT 语句中将它们复制到最终表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:56:35.250

Try the following

You could try the following:

Step 01) On the Master, run this

```
FLUSH TABLES WITH READ LOCK; SELECT CONNECTION_ID(); SELECT SLEEP(300); 
```

Step 02) `SHOW SLAVE STATUS\G` on both Slaves (or just the Reporting Slave)

Step 03) Repeat Step 02 Until

*   Relay_Log_Space stops changing
*   Relay_Log_Pos stops changing
*   Seconds_Behind_Master is 0

At this point, since both Slaves have not received any new SQL to process, you have effectively frozen MySQL on the Slaves at the Same Point-In-Time as the Master

Step 04) On the Slaves (or just the Reporting Slave), run `STOP SLAVE;`

Step 05) On the Master, (if the CONNECTION_ID() return 789) run `mysql> KILL 789;` in another mysql session.

Step 06) Run your reports

Step 07) Run `START SLAVE;` on the Slaves (or just the Reporting Slave)

## *UPDATE 2012-06-05 15:15 EDT*

Since this seems a little heavy handed for the sake of a few tables in one particular schema, the simplest thing would just be to run `STOP SLAVE;` on the Slave you do the Reporting from.

# internet-explorer-9 - IE9 中的 F12 开发人员工具不适用于某些网站

> ID：10900761
> 
> 赞同：6
> 
> 时间：2012-06-05T16:03:21.153
> 
> 标签：internet-explorer-9

我可以在 IE9 中启动 F12 开发人员工具，但对于某些站点，它们什么都不做。窗口打开，但在 HTML 选项卡中显示“正在加载...”，并且所有控件都不起作用。

知道可能出了什么问题吗？

**更新**我用 Chrome 检查了网络标签，没有看到任何挂起的请求。此外，页面本身在 IE 中是响应式的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T02:14:57.677

好的，我想通了——问题是我安装了 Google Chrome Frame，并且某些网站正在激活它，这实际上接管了 DOM/CSS 渲染。

我没有意识到它还在那里，因为它没有出现在工具/管理加载项下以禁用。干净卸载后，一切正常。

所以我自己对环境的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:05:44.240

您的页面上可能有一个资源挂起，并阻止工具完全加载。等待这些资源超时，和/或考虑下载[Fiddler2 之](http://fiddler2.com)类的东西来监视您的网络流量。查找正在请求的文件，但会大大延迟页面的加载。

# java - Selenium Java~没有按预期删除cookie

> ID：10900763
> 
> 赞同：0
> 
> 时间：2012-06-05T16:03:24.413
> 
> 标签：java, jakarta-ee, selenium

我正在尝试使用 Selenium Java/Firefox Eclipse 插件对 webapp 进行自动化测试。我正在尝试付款，然后删除 cookie，以删除所有存储的信息。由于某种原因，这不起作用。

```
public void validationCards(BufferedWriter out){
    outFile = out;
    ArrayList<String> methodList = new ArrayList<String>();
    methodList.add("validationVisaFrench");
    methodList.add("validationMCFrench");
    methodList.add("validationDiscoverFrench");
    methodList.add("validationDinerClubFrench");
    methodList.add("validationJCBFrench");
    Method method = null;

    for(String testToRun:methodList){
        try{
            method = this.getClass().getMethod(testToRun);
        }catch(NoSuchMethodException e){
            System.out.println("This failed horribly");
            e.printStackTrace();
        }catch(RuntimeException ex){
            ex.printStackTrace();
        }catch (Exception e) {
            e.printStackTrace();
        }

        try{
            PPSCTests tempObj = this;
            this.testDriver.manage().deleteAllCookies();
            method.invoke(tempObj);
            this.testDriver.manage().deleteAllCookies();
        }catch (Exception e) {
            System.out.println("Cant invoke method for shits and giggles");
            e.printStackTrace();
        }
    }
} 
```

这是我正在尝试运行的测试之一的示例：

```
public void validationMCFrench(){
    System.out.println("MC French Stored Card");
    this.testDriver.manage().deleteAllCookies();
    payment("5555555555554444", "frenchQuery");

    testSelenium.waitForPageToLoad("20000");
    String source = Jsoup.parse(testDriver.getPageSource()).text();
    System.out.println("validationMCFrench: "+source);
    successOrFail(source, "validationMCFrench", "Example");

    this.testDriver.manage().deleteAllCookies();
} 
```

但似乎实际上并没有删除任何 cookie。我有点卡住了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:46:55.213

所以 deleteAllCookies() 事情没有奏效。deleteAllVisibleCookies() 也没有。我为支付方式创建了一个新的 WebDriver 实例。

```
public void payment(String ccNumber, String queryType){
    WebDriver driverTest = new FirefoxDriver(profile);
    this.testDriver = driverTest; //then assigning it to the local WebDriver
    if(queryType.equals("query"))
        testDriver.get(testUrl + query());
    else if(queryType.equals("queryClean"))
        testDriver.get(testUrl + queryClean());
    else {
        System.out.println(testUrl + frenchQuery());
        testDriver.get(testUrl + frenchQuery());
    }
    testSelenium.waitForPageToLoad("7000");
    WebElement ccElement1 = null;
    WebElement ccExpiryElement = null;

    ccElement1 = testDriver.findElement(By.id("ccNumber"));
    ccExpiryElement = testDriver.findElement(By.id("ccExpiryDate"));

    WebElement cvv2Element1 = testDriver.findElement(By.name("ccCvv2"));
    ccElement1.sendKeys(ccNumber);
    ccExpiryElement.sendKeys("1112");//MMYY
    cvv2Element1.sendKeys("1111");
    WebElement submit = testDriver.findElement(By.id("oneTouchSubmit"));
    submit.submit();
    testSelenium.waitForPageToLoad("10000");
    //driverTest.close();
} 
```

它不是一个优雅的解决方案，但它适用于我需要做的事情。创建一个新实例基本上与删除 cookie 相同。

# asp.net-membership - SQL Azure 和成员资格提供者租户 ID

> ID：10900768
> 
> 赞同：0
> 
> 时间：2012-06-05T16:03:56.317
> 
> 标签：asp.net-membership, azure-sql-database

将 BIGINT 引入 ASP.NET 成员资格功能以唯一地引用用户并将该 BIGINT 字段用作租户 ID 的好方法是什么？以 GUID 的形式保留现有的生成 UserId 的功能，而不是从零开始实现成员资格提供者，这将是完美的。由于应用程序将在多个服务器上运行，因此 BIGINT 租户 ID 必须是唯一的，并且不应依赖于生成这些 ID 的某些中央机构。将这些tenant_id 与SPLIT AT 命令一起使用将很容易，这将允许将用户分桶到新的联合成员中。对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:49:08.927

你可以使用大整数。但是您可能必须修改所有依赖于用户 ID 的存储过程。使 ID 全局唯一通常不是问题。只要 ID 是主键，数据库就会强制它是唯一的。否则插入新数据时会报错（这种情况下，可以修改 ID 并重试）。

所以最重要的区别是你可能需要修改存储过程。你在这里有一个选择。如果您使用 GUID，则无需执行任何操作。但是可能很难预测如何拆分联合以平衡查询。正如另一个线程（http://stackoverflow.com/questions/10885768/sql-azure-split-on-uniqueidentifier-guid/10890552#comment14211028_10890552）中所指出的，您可以在中点对现有数据进行排序。但是你不知道未来的数据会被插入到哪个联邦。联邦存在不平衡的潜在风险，您可能需要定期合并和拆分它们以保持它们的形状。

通过使用 bigint，您可以更好地控制密钥。例如，您有两个联盟。第一个 ID 从 1 到 10000，第二个 ID 从 10001 到 20000。创建新用户时，首先检查每个联合中的记录数。假设联邦 1 有 500 条记录，联邦 2 有 1000 条记录，为了平衡负载，您选择插入到联邦 1，因此您选择 1 到 10000 之间的 ID。但是使用 bigint，您可能需要做更多的工作来修改存储程序。

# actionscript-3 - 如何使用动作脚本 3.0 拍摄视频快照？

> ID：10900769
> 
> 赞同：0
> 
> 时间：2012-06-05T16:03:58.050
> 
> 标签：actionscript-3, actionscript

我有一个带有按钮和 FLVPlayback 组件的 swf 播放器。单击按钮时，我必须保存视频的当前关键帧。如何在动作脚本 3.0 中实现这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:41:12.583

你必须使用类`draw`的方法`BitmapData`。示例代码可能如下所示：

```
var bd:BitmapData = new BitmapData(vidWidth, vidHeight);

bd.draw(yourFLVPlaybackInstance);
//or you may use an instance of Video from FLVPlayer

//now you can assign your bitmapData to a Bitmap
var bitmap:Bitmap = new Bitmap(bd); 
```

# php - 我在哪里可以找到我的 yii 应用程序的 yii 版本？

> ID：10900770
> 
> 赞同：38
> 
> 时间：2012-06-05T16:03:59.750
> 
> 标签：php, yii

我最近开始使用 yii，在哪里可以找到我的 yii 应用程序的 yii 版本？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-05T16:13:21.110

你可以使用[`getVersion()`YiiBase](http://www.yiiframework.com/doc/api/1.1/YiiBase#getVersion-detail)

```
Yii::getVersion(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-26T05:43:30.130

在 Linux 中，在基本目录中运行 ./yii。在 Windows 中，运行`yii.bat`. 你会得到类似的东西：

```
./yii

This is Yii version 2.0.3.

The following commands are available:
[...] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-18T18:41:19.573

grep -A 5 getVersion 框架/YiiBase.php

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-09T12:19:29.777

从框架文件夹和文件“YiiBase.php”。查找函数：getVersion()

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-01-31T09:51:49.743

在 require_once ($yii) 之后添加以下行；在索引文件中

```
echo Yii::getVersion(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-21T12:43:09.797

您可以在 CHANGELOG 中找到 Yii 版本 - YII 安装文件夹中的文件

# xml - XML XPATH 查询具有多个同级属性的同级值

> ID：10900777
> 
> 赞同：0
> 
> 时间：2012-06-05T16:04:14.537
> 
> 标签：xml, xpath

给定以下 XML，我想构建一个 XPath 查询来获取包含 HTML 的 Body 节点的文本

```
<documents>
 <document>
  <items>
   <item name='Form'>
    Procedure
   </item>
   <item name='Body'>
    <![CDATA[<p>arbitrary html</p>]]>
   </item>
  </items>
 </document>
 <document>
  <items>
   <item name='Form'>
    Process
   </item>
   <item name='Body'>
    Some arbitrary value
   </item>
  </items>
 </document>
</documents> 
```

我能够接近，我只是错过了一些东西。（这可能不是到达那里的最佳方式，但它是我能够接近的唯一方式）

```
//document/items/item[@name='Form'][text()='Procedure']/../item[@name='Body'] 
```

结果在 CDATA 包装的内容中，我不知道如何选择内部文本。

```
//document/items/item[@name='Form'][text()='Procedure']/../item[@name='Body']/text() 
```

正在产生一个空字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:42:56.390

使用此 XPATH 来获得您的预期结果：-

```
//document[items/item[@name='Form']/text()='Procedure']/items/item[@name='Body']/text() 
```

## 结果：

```
<p>arbitrary html</p> 
```

## 更新：

我在您的 XML 上遇到了实际问题。

表单节点的值包含空格，这会导致问题。

要解决此问题，请将此新 XPATH 与`normalize-space()`

```
//document[normalize-space(items/item[@name='Form']/text())='Procedure']/items/item[@name='Body']/text() 
```

## 结果：

```
<p>arbitrary html</p> 
```

# ruby-on-rails-3 - Rails 迁移使列为 null => true

> ID：10900778
> 
> 赞同：88
> 
> 时间：2012-06-05T16:04:15.757
> 
> 标签：ruby-on-rails-3, migration

我最初创建了一个表，其列为

```
t.string   "email",  :default => "", :null => false 
```

要求已更改，现在我需要允许电子邮件为空。如何编写迁移以使 :null => true

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2014-08-20T07:21:21.227

我无法将上述解决方案与 Active Record 4.0.8 和 Postgresql 9.3 一起使用

但是[change_column_null](http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/change_column_null) 工作得很好。

```
change_column_null :users, :email, true 
```

当不允许 null 时，反向有一个很好的选项来更新现有记录（但不设置默认值）。

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-06-05T17:02:15.257

尝试：

```
change_column :table_name, :email, :string, null: true 
```

# html - 在 HTML 表单中，如何将一个字段的内容复制到另一个字段

> ID：10900784
> 
> 赞同：0
> 
> 时间：2012-06-05T16:04:39.727
> 
> 标签：html, forms

我需要一个按钮，它将您输入的信息放入其中`div`，并将其放入另一个中。基本上我有一个`div`要求提供交货信息，而另一个要求提供帐单信息。我想要一个按钮，你可以按下它来检查你是否已经填写了送货信息，然后按下按钮会使输入到送货信息中的信息转移到账单信息中。我将如何制作一个按钮来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:08:49.853

Javascript:

```
<script language="javascript">
    document.getElementById('your-button').addEventListener("click", moveContent);
    function moveContent() {
        document.getElementById('your-div').textContent = document.getElementById('other-div').textContent;
    }​
</script> 
```

HTML:

```
<button id="your-button">Move Content</button><br />
<div id="other-div">This Text will go into the div below</div>
<div id="your-div">Click button to move text from above text here</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:08:36.600

制作一个表格，然后创建一个`<input onClick="copy();" type="button" >`标签。创建一个复制数据的 javascript 函数副本。不要向表单添加提交属性。

IE，

```
<script type="text/javascript">
function copy()
{
    //Copy the data from one div to another.  I recommend setting ID attributes and using document.getElementById(id);
}
</script>
<form>
    <input onClick="copy();" type="button" value="Copy data!" ></input>
</form> 
```

# mysql - 在mysql存储过程中做无符号参数的正确方法是什么

> ID：10900794
> 
> 赞同：4
> 
> 时间：2012-06-05T16:05:13.730
> 
> 标签：mysql, stored-procedures

我有一个程序可以从我们数据库中的所有表中删除用户信息。

```
CREATE PROCEDURE `unrollme_version3`.`del_user` (in v_user_id int(10))
BEGIN
START TRANSACTION; 
    DELETE FROM user_table1 WHERE `user_id` = v_user_id;
    DELETE FROM user_table2 WHERE `user_id` = v_user_id;
    DELETE FROM user_table3 WHERE `user_id` = v_user_id;
COMMIT;
END 
```

我想以某种方式使输入变量仅无符号以匹配数据库结构的设置方式。这可能吗，最佳做法是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T16:35:35.463

只需添加单词`unsigned`。我删除了`(10)`just 因为它无关紧要。它只是描述了应显示多少位，但它始终是一个 4 字节的 int。

```
CREATE PROCEDURE `unrollme_version3`.`del_user` (in v_user_id int unsigned)
BEGIN
START TRANSACTION; 
    DELETE FROM user_table1 WHERE `user_id` = v_user_id;
    DELETE FROM user_table2 WHERE `user_id` = v_user_id;
    DELETE FROM user_table3 WHERE `user_id` = v_user_id;
COMMIT;
END 
```

您可以通过执行强制抛出错误而不是警告

```
SET sql_mode='STRICT_ALL_TABLES'; 
```

有关详细信息，请参阅[手册。](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:31:48.453

您可以将 v_user_id 的代码签入负数并返回错误。

```
CREATE PROCEDURE `unrollme_version3`.`del_user` (in v_user_id int(10))
BEGIN
if v_user_id < 0 then
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Invalid user_id passed';
end if;
START TRANSACTION; 
    DELETE FROM user_table1 WHERE `user_id` = v_user_id;
    DELETE FROM user_table2 WHERE `user_id` = v_user_id;
    DELETE FROM user_table3 WHERE `user_id` = v_user_id;
COMMIT;
END 
```

编辑了未签名的部分。以上只是在提供超出范围的数据时执行引发错误或信号的普通 SQL。

# javascript - jquery字符串比较变量

> ID：10900796
> 
> 赞同：2
> 
> 时间：2012-06-05T16:05:33.117
> 
> 标签：javascript, jquery, string

我有以下代码：

```
arr = ["abc", "def", "ghi", "jkl"]
arr2 = ["abc", "def", "ghi", "jkl"]

$(arr).each(function(){
    thiselem = this;

    $(arr2).each(function(){
        if(thiselem == "abc" && this == "abc")
            alert("case 1");
        if(thiselem == this)
            alert('case 2');
    });
}); 
```

当我运行这个时，只会弹出“case 1”。从逻辑上讲，传递属性应该是正确的，所以我猜这是一些 JavaScript 字符串语法问题，或者 jQuery 范围的事情搞砸了。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:47:23.870

其他海报提出了解决方法，我将尝试回答为什么您的原始代码不起作用的问题。答案相当重要，并揭示了一些众所周知的 javascript 陷阱。

`jQuery.each`使用[apply](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)传递`this`给它的回调。当 apply 的参数是原始值时，如字符串，它将被“装箱”，即转换为对象（具体而言，`String`对象）：

```
console.log(typeof("cat"))  // string

logger = function() { console.log(typeof(this)) }
logger.apply("cat")  // object 
```

现在考虑以下几点：

```
a = ["abc"]
b = ["abc"]

$(a).each(function() {
   var that = this
   $(b).each(function() {
       console.log(this == that) // false!
   })
}) 
```

尽管 a[0] 和 b[0] “显然”相等，但`==`运算符返回 false，因为它们都是对象，并且两个对象变量只有在物理上是相同的对象时才相等。另一方面，这按预期工作：

```
a = ["abc"]
b = ["abc"]

$(a).each(function() {
     console.log(this == "abc") // true
     console.log(this == b[0]) // true
}) 
```

当 JS 将对象与字符串进行比较时，对象会使用`toString`. 由于`this`是一个 String 对象，它`toString`返回组成它的原始字符串，如果两个原始字符串的字符相等，则它们相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:10:03.460

Try like below,

```
var arr = ["abc", "def", "ghi", "jkl"]
var arr2 = ["abc", "def", "ghi", "jkl"]

$(arr).each(function(idx, el){
    $(arr2).each(function(idx, iEl){
        if(el == "abc" && iEl == "abc")
            alert("case 1");       
        if(el == iEl)
            alert('case 2');
    });
 }); 
```

**Note:** I assume the above is just a pseudo code. We can help better if you let us know what you are trying to do.

[**DEMO**](http://jsfiddle.net/feyEt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:06:07.767

```
arr = ["abc", "def", "ghi", "jkl"]
arr2 = ["abc", "def", "ghi", "jkl"]

$(arr).each(function(index, val1) {
    $(arr2).each(function(i, val2) {
        if (val1 == "abc" && val2 == "abc") alert("case 1");
        if (val1 == val2) alert('case 2');
    });
}); 
```

**[示例锻炼](http://jsfiddle.net/thecodeparadox/feyEt/2/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:24:36.480

尝试这个：

```
var arr = ["abc", "def", "ghi", "jkl"]
var arr2 = ["abc", "def", "ghi", "jkl"]

jQuery.each(arr,function(key1, val1){
  jQuery.each(arr2,function(key2, val2 ){
    if(val1 == "abc" && val2 == "abc")
        alert("case 1");       
    if(val1 == val2)
        alert('case 2');
   });
});​ 
```

这是[演示](http://jsfiddle.net/fqWK2/1/)

# php - 警告：从数据库中检索数据时为 foreach() 提供的参数无效

> ID：10900797
> 
> 赞同：0
> 
> 时间：2012-06-05T16:05:35.103
> 
> 标签：php, mysql, join, foreach

我试图从两个表中检索数据并回显结果，sql 似乎是正确的，但它告诉我参数无效。这是我的代码：

```
// Retrieve all information related to this post
    function get_post_data($post_id){

        //test the connection
        try{
            //connect to the database
            $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
        //if there is an error catch it here
        } catch( PDOException $e ) {
            //display the error
            echo $e->getMessage();
        }

        $sql = 'SELECT * FROM mjbox_images JOIN mjbox_posts USING (post_id) WHERE post_id = $post_id';
        $result = $dbh->query( $sql );

        foreach($result as $row):

            echo $row['img_id'];

        endforeach;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:14:33.177

您的`$post_id`查询中的 不会被扩展，因为该字符串是单引号的。

它应该在以下情况下更好地工作：

```
$sql = "SELECT * FROM mjbox_images JOIN mjbox_posts USING (post_id) WHERE post_id = $post_id"; 
```

或者：

```
$sql = 'SELECT * FROM mjbox_images JOIN mjbox_posts USING (post_id) WHERE post_id = '.$post_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:08:49.953

You need to tell PDO to throw errors:

```
$dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

That will probably tell you what is happening (except for a potential problem when creating the pdo object the line before it...).

I would also recommend switching to prepared statements to avoid potential sql injection or malformed query problems.

And I hope that is not your real password...

# jquery - jquery-如何将此代码写入函数

> ID：10900805
> 
> 赞同：0
> 
> 时间：2012-06-05T16:05:51.987
> 
> 标签：jquery, function

我有三个模块/sectinos，它们基本上做同样的事情，但有一些细微的差别。我试图将主要部分写入一个 jquery 函数，以便我可以根据需要调用它，但我无法正确构造它。有人可以告诉我如何构造这个吗？

**这是我需要作为单独函数然后由其他人调用的部分**

```
var mytextareaFld = $('#ta_holdAll');
        var fld_1 = $('#firstname').attr('name')+':  '+$('#firstname').val();
        var fld_2 = $('#lastname').attr('name')+':  '+$('#lastname').val();
        var fld_3 = $('#street_number').attr('name')+':  '+$('#street_number').val();
        mytextareaFld.val(fld_1 +'\n' + fld_2 +'\n' + fld_3); 
```

**jsfiddle：http:** [//jsfiddle.net/justmelat/v4sZb/](http://jsfiddle.net/justmelat/v4sZb/)

**html/jquery 代码如下：**

```
<form>
    <p>First name: <input type="text" name="firstname" id="firstname" value="Paul"/></p>
    <p>Last name: <input type="text" name="lastname"  id="lastname" value="Ryan" /></p>
<p>Street #: <input type="text" name="street_number"  id="street_number" value="4605"/></p>
<p>Address: <input type="text" name="address" id="address"/></p>
<p>City: <input type="text" name="city" id="city" /></p>
<p>State: <input type="text" name="state" id="state"/>

<span id="myzip">Zip:</span> <input type="text" name="zip"  id="zip" />
    <br /><br />
<span id="allInfo">All Info:</span> <textarea id="ta_holdAll" rows="10" cols="30"></textarea><div id="charCnt"></div><br /><br />
    <input type="button" value="Add to Field" id="addField">
</form>

    $(document).ready(function(){
    $('#addField').on('click',function(){
        var mytextareaFld = $('#ta_holdAll');
        var fld_1 = $('#firstname').attr('name')+':  '+$('#firstname').val();
        var fld_2 = $('#lastname').attr('name')+':  '+$('#lastname').val();
        var fld_3 = $('#street_number').attr('name')+':  '+$('#street_number').val();
        mytextareaFld.val(fld_1 +'\n' + fld_2 +'\n' + fld_3);
    });

    $('#allInfo').on('click',function(){
        var mytextareaFld = $('#ta_holdAll');
        var fld_1 = $('#firstname').attr('name')+':  '+$('#firstname').val();
        var fld_2 = $('#lastname').attr('name')+':  '+$('#lastname').val();
        var fld_3 = $('#street_number').attr('name')+':  '+$('#street_number').val();
        mytextareaFld.val(fld_1 +'\n' + fld_2 +'\n' + fld_3);
        var $mytextareaFld = $('#ta_holdAll');
        var $outPutCount = $("#charCnt");
        var $ofText = " characters of 1000 remaining";
        var val = $mytextareaFld.val();
        var val2 = $outPutCount.text(val.length).append("<strong>"+$ofText+"</strong>");
    });

    $("#firstname,#lastname, #street_number").blur(function(){
        var mytextareaFld = $('#ta_holdAll');
        var fld_1 = $('#firstname').attr('name')+':  '+$('#firstname').val();
        var fld_2 = $('#lastname').attr('name')+':  '+$('#lastname').val();
        var fld_3 = $('#street_number').attr('name')+':  '+$('#street_number').val();
        mytextareaFld.val(fld_1 +'\n' + fld_2 +'\n' + fld_3);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:10:13.837

JS 小提琴演示：http: [//jsfiddle.net/lucuma/jmhmE/1/](http://jsfiddle.net/lucuma/jmhmE/1/)

```
$(document).ready(function(){

    function AddStuff(event) {
          var mytextareaFld = $('#ta_holdAll');
        var fld_1 = $('#firstname').attr('name')+':  '+$('#firstname').val();
        var fld_2 = $('#lastname').attr('name')+':  '+$('#lastname').val();
        var fld_3 = $('#street_number').attr('name')+':  '+$('#street_number').val();
        mytextareaFld.val(fld_1 +'\n' + fld_2 +'\n' + fld_3);
    }

    $('#addField').on('click', AddStuff);

    $('#allInfo').on('click',function(event){
        AddStuff(event);
        var $mytextareaFld = $('#ta_holdAll');
        var $outPutCount = $("#charCnt");
        var $ofText = " characters of 1000 remaining";
        var val = $mytextareaFld.val();
        var val2 = $outPutCount.text(val.length).append("<strong>"+$ofText+"</strong>");
    });

    $("#firstname,#lastname, #street_number").blur(AddStuff);
});​ 
```

# r - 小数字的 Y 轴缩放问题

> ID：10900809
> 
> 赞同：5
> 
> 时间：2012-06-05T16:06:11.413
> 
> 标签：r, ggplot2, autoscaling

我对小于 1e-10 的数字的 y 缩放有问题：它们都出现在同一水平线上。

这是一个可重现的示例：

```
file <- structure(list(I = c(-7.254574e-11, -5.649333e-11, -5.015416e-11, 
-4.228137e-11, -3.287486e-11, -2.714915e-11, -2.203692e-11, -1.784489e-11, 
-1.150574e-11, -1.058553e-11, -6.189018e-12, -3.735149e-12, -2.303724e-12, 
6.610914e-13, 1.274374e-12, -3.610768e-13, 5.465134e-12, 6.691699e-12, 
8.020478e-12, 1.139353e-11, 1.537988e-11, 1.926399e-11, 2.130825e-11, 
2.45791e-11, 3.204071e-11, 3.582262e-11, 4.287535e-11, 4.624839e-11, 
5.16657e-11, 6.035387e-11), V = c(-2, -1.867, -1.733, -1.6, -1.467, 
-1.333, -1.2, -1.067, -0.933, -0.8, -0.667, -0.533, -0.4, -0.267, 
-0.133, 0, 0.133, 0.267, 0.4, 0.533, 0.667, 0.8, 0.933, 1.067, 
1.2, 1.333, 1.467, 1.6, 1.733, 1.867)), .Names = c("I", "V"), class = "data.frame", row.names = c(NA, 
-30L))

plot(file$V,file$I)

gg <- ggplot(file,aes(x = V,y=I))
print(gg + geom_point()) 
```

如您所见，使用基本绘图功能，点可以正确显示，而使用 ggplot2 它们显示在水平线上。

我在 2011 年 5 月的邮件列表上看到了一个类似的帖子，Hadley 回答说它与 ggplot2 的开发版本一起工作。但是，使用下面描述的 R 版本我仍然得到错误。

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=fr_FR.UTF-8       LC_NUMERIC=C               LC_TIME=fr_FR.UTF-8       
 [4] LC_COLLATE=fr_FR.UTF-8     LC_MONETARY=fr_FR.UTF-8    LC_MESSAGES=fr_FR.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=fr_FR.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] tikzDevice_0.6.2 filehash_2.2-1   scales_0.2.0     plyr_1.7.1       reshape2_1.2.1  
[6] ggplot2_0.9.0   

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.0        MASS_7.3-18       
 [6] memoise_0.1        munsell_0.3        proto_0.3-9.2      RColorBrewer_1.0-5 stringr_0.6       
[11] tools_2.15.0 
```

有人有线索吗？

先感谢您 ！蒂博·鲁勒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:37:50.373

正如布赖恩·迪格斯在回复[@joran 上面指出的相关帖子时](https://stackoverflow.com/questions/10808056/producing-this-base-plot-with-ggplot2-is-this-ggplot2-bug)评论的那样，问题是由函数引起的`scales::zero_range()`。它用于`all.equal()`测试最小和最大 y 值是否在彼此之内`tolerance = .Machine$double.eps ^ 0.5 = 1.490116e-08`；如果是，则使用示例中使用的“零比例”绘制数据。

作为临时修复，您可以使用`fixInNamespace()`删除`zero_range()`.

```
library(scales)  ## (The scales package needs to be on your search path)
fixInNamespace("zero_range", pos="package:scales") 
```

在由 启动的编辑器中`fixInNamespace()`，替换以下定义`zero_range()`：

```
function (x) 
{
    length(x) == 1 || isTRUE(all.equal(x[1] - x[2], 0))
} 
```

使用这个（确保保存编辑后的版本）：

```
function (x) 
{
    length(x) == 1 
} 
```

然后您提供的代码运行良好：

![在此处输入图像描述](../Images/311a20a8c6cf990e0863de52c9e1705f.png)

# asp.net - 提交和保存包含多个 ICollection 项目的表单的最有效方法是什么？

> ID：10900810
> 
> 赞同：1
> 
> 时间：2012-06-05T16:06:17.037
> 
> 标签：asp.net, asp.net-mvc-3, razor, icollection

我让用户填写需要大量“教育背景”数据的表格：

```
public class EducationalBackground
{
    public int EducationalBackgroundID { get; set; }

    public string UniversityOrCollege { get; set; }

    public string AreaOfStudy { get; set; }

    public string Degree { get; set; }

    public int YearReceived { get; set; }

    public virtual Application Application { get; set; }
} 
```

这是完整应用程序的模型：

```
public class Application
{
    public int ApplicationID { get; set; }

    public Profile BasicInfoGatheredFromProfile { get; set; }

    public virtual ICollection<EducationalBackground> EducationalBackground { get; set; }

    public bool WillingToTravel { get; set; }
} 
```

我正在制作一个页面，用户可以在其中填写完整的应用程序，它会呈现一个局部视图，允许他们添加“教育背景”数据片段，无论他们拥有多少。

允许用户在此应用程序中添加无限数量的“教育背景”信息的最有效方法是什么？

我在想什么：当我发布表单时，我需要一个 ViewModel 来允许 EducationalBackground 的 IColleciton。jQuery 是为“教育背景”添加附加字段的最简洁方式吗？

除了能够提供的任何信息之外，还将欣赏示例 POST 操作。

# android-layout - 您为平板电脑应用推荐哪些资源文件夹？

> ID：10900811
> 
> 赞同：0
> 
> 时间：2012-06-05T16:06:25.070
> 
> 标签：android-layout, embedded-resource, android

目前，我设置了这些资源文件夹：

```
/res
    /drawable
    /drawable-large-hdpi
    /layout
    /layout-port
    /layout-large-hdpi 
```

`large-hdpi`文件夹用于 Galaxy Tab，而其他文件夹用于其他平板电脑。

您建议添加哪些其他资源文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:35:43.477

我们使用 large-land、large-port、xlarge-land 和 xlarge-port，但我不建议这样做。

我建议根据像素密度过滤可绘制对象并根据屏幕尺寸过滤布局。另外，请阅读[此](http://developer.android.com/guide/practices/screens_support.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T05:41:03.437

```
 drawable-large 
```

我正在为所有平板电脑使用这个文件夹

# osgi - OSGi 包中的奇怪错误

> ID：10900814
> 
> 赞同：0
> 
> 时间：2012-06-05T16:06:34.810
> 
> 标签：osgi

我有一个 WAR 包变成了 OSGi 包。我想在包中使用 PrimeFaces。这是捆绑包的 POM 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.DX_57</groupId>
    <artifactId>History-Module-57</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>History-Module-57</name>
    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <dependencies>
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.3</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>        
        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.core</artifactId>
            <version>4.2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.compendium</artifactId>
            <version>4.2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish</groupId>
            <artifactId>osgi-cdi-api</artifactId>
            <version>3.1-b41</version>
            <type>jar</type>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <build>
        <pluginManagement>           
            <plugins>
                <plugin>
                    <groupId>org.apache.felix</groupId>
                    <artifactId>maven-bundle-plugin</artifactId>
                    <version>2.1.0</version>
                    <extensions>true</extensions>
                    <configuration>
                        <supportedProjectTypes>
                            <supportedProjectType>ejb</supportedProjectType>
                            <supportedProjectType>war</supportedProjectType>
                            <supportedProjectType>bundle</supportedProjectType>
                            <supportedProjectType>jar</supportedProjectType>
                        </supportedProjectTypes>
                        <instructions>
                            <!-- Read all OSGi configuration info from this optional file -->
                            <_include>-osgi.properties</_include>
                            <!-- By default, we don't export anything -->
                            <Export-Package>*</Export-Package>
                        </instructions>
                    </configuration>
                    <executions>
                        <execution>
                            <id>bundle-manifest</id>
                            <phase>process-classes</phase>
                            <goals>
                                <goal>manifest</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>bundle-install</id>
                            <phase>install</phase>
                            <goals>
                                <goal>install</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin> 

                <plugin> <!-- Need to use this plugin to build war files -->
                    <artifactId>maven-war-plugin</artifactId>
                    <groupId>org.apache.maven.plugins</groupId>
                    <!-- Use version 2.1-beta-1, as it supports the new property failOnMissingWebXml -->
                    <version>2.2</version>
                    <configuration>
                        <archive>
                            <!-- add bundle plugin generated manifest to the war -->
                            <manifestFile>
                                ${project.build.outputDirectory}/META-INF/MANIFEST.MF
                            </manifestFile>
                            <!-- For some reason, adding Bundle-ClassPath in maven-bundle-plugin
                            confuses that plugin and it generates wrong Import-Package, etc.
                            So, we generate it here.
                            -->
                            <manifestEntries>
                                <Bundle-ClassPath>WEB-INF/classes/
                                </Bundle-ClassPath>
                            </manifestEntries>
                        </archive>
                    <!-- We don't have a web.xml -->
                        <failOnMissingWebXml>false</failOnMissingWebXml>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <!-- Enable this plugin for all modules -->
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
    <repositories>
        <repository>
            <id>glassfish-repo</id>
            <name>The Glassfish repository</name>
            <url>http://download.java.net/maven/glassfish/</url>
        </repository>
        <repository>  
            <id>prime-repo</id>  
            <name>PrimeFaces Maven Repository</name>  
            <url>http://repository.primefaces.org</url>  
            <layout>default</layout>  
        </repository>  
    </repositories>
    <description>Module History Module</description>
</project> 
```

当我将包部署到 Glassfish 并打开 JSF 页面以使用 Primefaces 组件时，我收到此错误：

```
Warning: This page calls for xml namespace http://primefaces.org/ui declared with prefix p but no taglibtrary exist for that namespace 
```

如果我用简单的 WAR 包配置替换该部分，Primefaces 正在工作。POM 配置似乎有问题。你有没有发现什么奇怪的东西？

最好的祝愿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T00:59:55.193

不确定你在做什么。我们有一个使用 primefaces 的测试 WAB，它工作正常。您可以在这里找到它并进行比较，看看您的应用有什么问题：

[https://svn.java.net/svn/glassfish~svn/trunk/fighterfish/test/testapp/test.app9](https://svn.java.net/svn/glassfish~svn/trunk/fighterfish/test/testapp/test.app9)

我不会在这里进一步回复。在 glassfish 用户列表中联系我们。

萨虎

# android - 在 Android 浏览器中使用 HTML5 播放音频

> ID：10900816
> 
> 赞同：8
> 
> 时间：2012-06-05T16:06:50.713
> 
> 标签：android, html, audio, browser, mp3

我想在**Android**浏览器中播放音频，使用**html5** `<audio>`标签。它在 iPhone 浏览器中运行良好，但在 Android 中却不行。我正在使用**Android Virtual Device 4.0.3**。

有谁知道为什么？

安卓源码：

> `webView.loadUrl("file:///android_asset/www/test.html");`

HTML 文件：

```
<audio controls="controls" format="mp3">
    <source src="achievement.mp3" /> 
</audio> 
```

（我也听不到带有`<embed>`和`<object>`标签的音频）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-27T21:53:00.007

我在这里找到了解决方案 [Embed Background Audio in Android >= 2.3 Browser](https://stackoverflow.com/questions/9505228/embed-background-audio-in-android-2-3-browser)

```
<audio id="audio1" controls="controls" loop="loop" autoplay="autoplay" >
   <source src="scene1.mp3" type="audio/mpeg" />
   <source src="scene1.ogg" type="audio/ogg" />
</audio> 
```

这对我有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:18:13.957

我进行了快速搜索，并[在谷歌代码上找到了这个问题报告。](http://code.google.com/p/android/issues/detail?id=10546) 似乎该标签不受支持。但是，该标签可以播放 mp3 文件。不利的一面是（如果我没看错的话）控件不可用。给它一个阅读，让我们知道你是怎么做到的。

我发现另一个问题有很多不同的可能解决方案：[检查一下](https://stackoverflow.com/questions/3069124/playing-html5-audio-in-android-browser)

# node.js - 尝试加载有效图像时，Node.js ImageMagick 和 GM 都会导致错误 127

> ID：10900821
> 
> 赞同：0
> 
> 时间：2012-06-05T16:07:07.457
> 
> 标签：node.js, imagemagick

我有一个节点应用程序，它接受上传的图像（使用强大的）并将其存储到 Amazon S3 存储桶中。在将其保存到 S3 之前，我想获取图像的宽度、高度等以供将来考虑。我发现这个问题有帮助：[Open images on NodeJS and find out width/height](https://stackoverflow.com/questions/5530946/opening-images-on-nodejs-and-finding-out-width-height)

但是，当我尝试使用 imagemagick（或 gm，就此而言，我都尝试过）打开图像时，我收到错误 127。具体来说，imagemagick 报告：

```
{"timedOut":false,"killed":false,"code":127,"signal":null} 
```

我知道该文件存在（因为它已正确上传到 S3 存储桶），并且我可以通过 fs 对其进行操作（例如，重命名），但我找不到有关错误代码 127 的任何文档来确定 IM 失败的原因。考虑到上传到强大的文件可能有些奇怪导致它无法正确读取，我尝试使用 imagemagick 在同一文件夹中加载一个简单的“test.jpg”图像：

```
 im.identify('test.jpg', function(err, features){
        if(!err) 
        {
            // my image processing code
        }
        else
        {
            // my err handling code; spits out the error above
        }
    }); 
```

不幸的是，这以完全相同的方式失败，即使我确定 test.jpg 是一个很好且格式正确的图像。

那么，任何人都可以帮助我理解错误 127 是什么以及为什么 ImageMagick 会在 fs 能够很好地读取文件时抛出它......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:18:58.730

这些是几个 php 命令，用于查找 Imagemagick 的路径，应该确认它已安装。有时在 php 中仅使用 convert 就会出现问题，您需要使用完整路径；类似 /usr/local/bin/convert

```
echo "<pre>";
system("type convert"); 
system('which convert',$path); print_r($path); 
echo "</pre>"; 
```

我知道您没有使用 php，但您仍然应该能够使用这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:15:28.140

确保安装了“转换”

sudo apt-get 更新

sudo apt-get install imagemagick --fix-missing

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T19:03:02.990

德普。我没有安装 ImageMagick 本身。我认为安装 NPM 就足够了。没有意识到还有其他依赖项，并且错误消息有点神秘；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T20:22:57.303

我有同样的问题，只需安装 Graphics Magick，[http://www.graphicsmagick.org/](http://www.graphicsmagick.org/)

测试您的安装是否按照向导的建议工作，仅此而已。

# symfony - 对对象进行的所有查询添加条件

> ID：10900822
> 
> 赞同：2
> 
> 时间：2012-06-05T16:07:07.520
> 
> 标签：symfony, doctrine

我想在我的所有查询中添加一个“隐藏”查询。我解释：

以桌车为例：

```
## id # color # constructor # model # destroyed
   1     blue    bmw         model1     false
   2    green  citroen       modelab    false
   3     red    nissan       modelz     false
   4     blue    bmw         modelw     true
   5    black  peugeot       modely     false 
```

我想当我提出像`SELECT * FROM Car WHERE colour = 'blue'` 真正的查询将是什么这样的请求时：`SELECT * FROM Car WHERE colour = 'blue' AND destroyed = false`

在我的所有查询中，被毁坏的汽车都将被排除在外。如果我写`WHERE is destroyed = true`在我的查询中，则执行。

我去年在 symfony 1.4.x 中看到过，但我不知道如何在 symfony 2.x 中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:53:03.933

我认为这个软删除过滤器是你想要实现的一个很好的例子 - [https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/softdeleteable.md)

# asp.net - 在 ASP.NET 中自动重写 URL

> ID：10900823
> 
> 赞同：1
> 
> 时间：2012-06-05T16:07:08.813
> 
> 标签：asp.net, url-rewriting

我使用 VS2010,C# 开发一个 ASP.NET 网站，我的客户希望我有这样的页面：

mysite.com/customer（实际上他们调用 mysite/customer/default.aspx）

所以我为每个客户手动创建了几个文件夹，并在文件夹中插入了一个 default.aspx 文件，以便用户可以通过键入 mysite.com/customer 查看客户页面

有没有更好的方法来执行这种情况？我不想拥有 mysite.com/customer1.aspx，我想要拥有 mysite.com/customer1，无论如何我可以删除文件夹（及其包含 default.aspx 文件）并使用我的客户数据库自动生成一些东西?

我应该使用 URL 重写吗？无论如何我可以创建页面 mysite.com/customer1.aspx，并且用户可以通过键入 mysite.com/customer1 来查看它？

我认为可以在 web.config 中重写 URL，但我不想在 web.config 中手动执行，因为我的页面每天都会增加

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:24:17.860

如果您真的想在代码中而不是在配置中执行此操作，您可以使用 HttpContext 的 RewritePath 方法在 Application_BeginRequest 中自己重写路径

例如（这是一个非常简化的示例），如果您的 aspx 位于根目录的子文件夹中，它可能会像这样：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    if (HttpContext.Current.Request.Path.StartsWith("/customer"))
        HttpContext.Current.RewritePath("/customer/whatever.aspx");
} 
```

注意：这会忽略任何必须提取和重新添加的查询字符串，如果您希望它不区分大小写，您也必须处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T05:44:08.303

如果您（实际上）愿意尝试 url 重写等为什么不尝试[ASP.net 4 Web Pages](http://www.asp.net/web-pages)呢？

*   您可以在 C# (cshtml) 或 VB (vbhtml) 中执行 Razor 语法。
*   默认情况下，您会获得“漂亮的 url”（没有配置也没有 global.asax 路由）
*   您可以使用 Visual Studio 甚至 WebMatrix

可能的挑战：

*   （新）语法 - 但它并不难 - 主要是`@`而不是`<%=..%>`
*   如果您对 ASP.Net 控件更熟悉，那么它可能会比简单得多的控件更难...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T22:00:38.550

ASP.NET 路由是最好的方法， http: [//msdn.microsoft.com/en-us/library/cc668201.aspx](http://msdn.microsoft.com/en-us/library/cc668201.aspx)

我已经编写了一个导航项目，它也会对您有所帮助， http: [//navigation.codeplex.com/](http://navigation.codeplex.com/) - 如果您对此感兴趣并需要任何帮助，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T16:18:46.037

基于配置的 URL 重写是您的最佳选择。看这里：http: [//msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx)。重写是基于模式的，因此您所描述的（mysite.com/customer1.aspx 到 mysite.com/customer1）是可能的。

# android - 活动结束时保留位图

> ID：10900825
> 
> 赞同：0
> 
> 时间：2012-06-05T16:07:11.837
> 
> 标签：android, bitmap, surfaceview

Android专家，我需要一些帮助。我是安卓菜鸟。我有一个应用程序，我需要在主 UI 线程之外使用画布绘制位图。我偶然发现了 SurfaceView 类并模拟了一个快速演示。我创建了一个单独的位图实例并绘制到其中。当 SurfaceView 的 OnDraw 发生时，我将此位图复制到 SurfaceView 中。在活动结束之前，它工作得很好，例如，返回主屏幕。那时，SurfaceView 线程似乎停止了，我似乎丢失了我正在处理的位图图像。当您返回应用程序时，它会从头开始。

出于性能原因，我想使用与主 UI 线程分开的线程中的画布 2D 绘图调用来创建位图图像。我需要不时将该位图放入主用户界面。当活动暂停或停止时，我需要保留位图图像并继续绘制（以保持其最新状态）。

由于您必须在主 UI 线程中进行所有绘图，SurfaceView 似乎是唯一的解决方案。但它也不像我希望的那样工作。

我需要一个永不停止运行的后台任务或线程，我需要在那里创建一个位图图像，并且我需要不时将该位图放入主用户界面（比如 10 赫兹更新）。

帮助！我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:42:32.070

使用 asynctask 将图像绘制到您的 ui 上。

但是，重新打开应用程序时需要重新绘制画布。如果您想保存您创建的位图，您需要将其存储在某个地方。我认为这可以使用缓存来处理：

```
view.setDrawingCacheEnabled(true); 
```

否则请自行管理位图：

```
v1.setDrawingCacheEnabled(true); 
bitmap = Bitmap.createBitmap(v1.getDrawingCache()); 
```

# java - Jaxb2marshaller - 使用 contextPath 和 classesToBeBound

> ID：10900828
> 
> 赞同：1
> 
> 时间：2012-06-05T16:07:30.447
> 
> 标签：java

这可能吗？我有一项服务可能需要从大量项目中编组对象，每个项目都有几个对象工厂。我目前只指定了一些需要定期编组的特定类。我可以为其他项目添加上下文列表，并保留我当前的类列表吗？还是我必须做一个或另一个？

有这么多可能需要编组的单个类，仅使用上下文路径列表是否更聪明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:57:55.250

不，您不能组合这些方法，它会`public final void afterPropertiesSet()`在 Jaxb2Marshaller 类中针对此类用法进行检查。但是在 Spring 3.1 中有另一个可以使用的属性，它叫做**packagesToScan**，它接受通配符 (com.foo.*.schemas)，你也可以提供这样的表达式列表。

`@XmlRootElement`但是您应该知道的一件事是，由于 Jaxb2Marshaller 中的方法，它对于没有众所周知的注释的类无法正常工作，对于没有此注释的元素`private boolean supportsInternal(Class<?> clazz, boolean checkForXmlRootElement)`，它将返回**false**。

祝你好运。

# c# - 在 ASP.NET 网站中使用静态成员是不好的做法吗？

> ID：10900829
> 
> 赞同：1
> 
> 时间：2012-06-05T16:07:30.800
> 
> 标签：c#, asp.net

我了解静态成员将由 ASP.NET 网站的所有用户共享；但在这种特殊情况下 - 这正是我想要的。

这是一个私人使用的网页，我拼凑在一起以促进两个用户之间的基于网络的聊天。我想避免将数据持久化到数据库或数据文件中，并认为我可以将最后 X 条消息存储在静态并发队列中。这似乎在我的开发机器上工作得很好。

我对 ASP.NET 非常缺乏经验，但是在我发现的所有示例中，都没有使用这种方法。这是一种不好的做法，是否有我应该注意的“陷阱”？我可以看到，另一种选择是使用数据库。但我觉得这需要更多的努力，而且我猜是更多的资源（我认为我的消息“缓冲区”将占用大约 40kb 的内存，并节省不少访问数据库的次数）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T16:10:24.440

Assuming that you make sure that the entire thing is thread-safe, that will work.

However, IIS can recycle your AppDomain at any time, so your queue may get blow away when you don't expect it.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T16:13:34.710

即使 IIS 不会时不时地刷新和重新启动您的 AppDomain，但为此目的使用静态变量对我来说听起来像是一个臭名昭著的黑客攻击。

该类`HttpApplicationState`提供对可用于存储信息的应用程序范围的缓存的访问。

[ASP.NET 应用程序状态概述](http://msdn.microsoft.com/en-us/library/ms178594.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:36:07.877

只要您的要求没有改变，并且您可以随机丢失服务器端的所有消息，这完全没问题。

我会稍微重构代码以提供“消息存储”接口以简化代码测试（如果您决定使其更复杂/持久/多用户在未来有潜在的好处）。

静态存储方法（或 HttpApplicationState）的优点：

*   消息的服务器端存储没有问题 - 更少的隐私问题。没有什么是永远存储的，所以你可以说任何你想说的。
*   极其简单的实现。
*   非常适合 IM/电话交谈。
*   在单服务器情况下不太可能出现性能问题

缺点：

*   消息可能会丢失。可以通过在客户端存储历史来缓解（即在同一网页上使用 AJAX 查询检索消息）
*   如果涉及更多用户/或应用程序与其他代码共享时数据敏感，则需要更加小心，因为每个人都可以看到静态数据。与任何其他存储也没有太大区别。
*   不能直接迁移到多服务器/网园场景。2 人聊天服务器真的不太可能出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T16:17:34.230

当然，我过去看到的一个问题是使用静态变量和`Web Gardens`.

看到这个问题： [Web Garden and Static Objects hard to understand](https://stackoverflow.com/questions/8312788/web-garden-and-static-objects-difficult-to-understand)

请注意讨论中的一个关键点：

> 静态对象不在网络花园/网络农场中共享。

# device - Windows 驱动程序 - 与用户进程通信

> ID：10900834
> 
> 赞同：0
> 
> 时间：2012-06-05T16:08:00.363
> 
> 标签：device, drivers

我在 Qt 中编写了一个应用程序，以及在 Windows 下与自定义 USB 设备（不属于任何类 - 需要为其编写自定义驱动程序）通信的最佳方式是什么。在 Linux 中，我可以只与来自 /dev 或 /sys 文件系统的用户空间共享数据。Windows 中的等效替代方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:28:24.017

有几个用于 Windows 的用户空间 USB 库。虽然 Microsoft 确实直接提供[WinUSB](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540196%28v=vs.85%29.aspx)，但我建议使用[libusbx](http://libusbx.org/ "Libusbx")或[libusb并使用](http://libusb.org/ "libusb")[zadig](http://sourceforge.net/projects/libwdi/files/zadig/ "扎迪格")为您的设备安装驱动程序。

直接使用 libusbx 而不是 Microsoft 驱动程序具有更容易移植到其他操作系统的优点，这可能是您在使用 Qt 时需要考虑的一个因素。

# c# - 使用 Itextsharp 读取本地化的 PDF 文件

> ID：10900838
> 
> 赞同：3
> 
> 时间：2012-06-05T16:08:13.187
> 
> 标签：c#, asp.net, itextsharp, hindi

我正在尝试使用 iTextSharp 阅读 PDF 文件。问题是当尝试阅读非英语的 PDF 文件（例如印地语或阿拉伯语）时，它没有得到正确的单词。

我想知道，我应该在我的系统上安装印地语或阿拉伯语字体还是需要对编码做一些事情？

```
ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
string currentText = PdfTextExtractor.GetTextFromPage(pdfReader, page, strategy);
currentText = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(currentText)));
text.Append(currentText); 
```

**编辑：**

示例 PDF 作为图像：

![在此处输入图像描述](../Images/7872b8b894d26d84d4e5196136e7b7a0.png)

提取文本：

uxj ikfydk ifj"kn fuokZpd ukekoyh& 2011 i`"B la[;k % 1 1 1 1& & & ftys dk uke ftys dk uke ftys dk uke ftys dk uke % % % % 0701-ò¶âã£ûæ– 2 2 2 2& & & & fudk fudk fudk fudk; ; ; ; dk uke dk uke dk uke dk uke % % % % 1-¢âî™ 3 3 3 3& & & & okMZ la okMZ la okMZ la okMZ la[ [ [ [; ; ; ;ko uke ko uke ko uke ko uke % % % % 1-¯â“¯â™®â£û¶âû §âîºâã®â£û¶âû Õô¯âû®â£û¶âû 4 4 4 4& & & & Hkkx la Hkkx la Hkkx la Hkkx la[ [ [ [; ; ; ;kkkk % % % %

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:27:13.373

> 不要使用任何类型的编码，因为你不知道 pdf 文件有什么编码。

. 我认为它会起作用。

```
ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
string currentText = PdfTextExtractor.GetTextFromPage(pdfReader, page, strategy);
text=text+currentText;

///do what you want with text
MessageBox.Show(text); 
```

如果仍然无法正常工作，那么您必须安装特定的字体。

# java - Java 选择排序

> ID：10900839
> 
> 赞同：-6
> 
> 时间：2012-06-05T16:08:20.873
> 
> 标签：java, sorting, selection

```
A - an array containing the list of numbers
numItems - the number of numbers in the list

for i = 0 to numItems - 1
    for  j = i+1 to numItems 
        if A[i] > A[j]
            // Swap the entries
            Temp = A[i]
            A[i] = A[j]
            A[j] = Temp  
        End If    
    Next j
Next i\ 
```

comeone可以帮我把它转换成java吗？我已经尝试过，但无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:11:31.780

```
 public static void selectionSort1(int[] x) {
    for (int i=0; i<x.length-1; i++) {
        for (int j=i+1; j<x.length; j++) {
            if (x[i] > x[j]) {
                // Exchange elements
                int temp = x[i];
                x[i] = x[j];
                x[j] = temp;
            }
        }
    }
} 
```

# sql - 将 SUM 数据以 24 小时为单位进行分组

> ID：10900843
> 
> 赞同：1
> 
> 时间：2012-06-05T16:08:46.337
> 
> 标签：sql, sql-server, sql-server-2008

我在 Microsoft SQL Server 2008 中有需要求和的数据。问题是我需要按 24 小时的时间段对总和进行分组。24 小时时段是从一天下午 3:00 到第二天下午 3:00。

例如

> 退出日期，值
> 
> 1/1/2012 15:00, 5
> 
> 1/1/2012 15:04, 6
> 
> 1/1/2012 17:00, 7
> 
> 2012 年 1 月 2 日 00:00，-5
> 
> 1/2/2012 09:00, 10
> 
> 1/2/2012 15:00, 31

总和应该是 54。我有以下查询，但是它将午夜到午夜的所有内容分组，而不是 3:00 pm 到 3:00 pm

```
SELECT dateadd(day,datediff(day,0, dateadd(hh, 0, DateExited) ),0) As SummaryDate, SUM(Value) as s1
FROM Test
where DateExited BETWEEN dateadd(year,datediff(year,0,GETDATE()),0) AND GetDate()
GROUP BY dateadd(day,datediff(day,0, dateadd(hh, 0, DateExited) ),0)
ORDER BY SummaryDate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:15:04.130

从您的日期/时间值中减去 15 小时应该可以得到您正在寻找的结果。

此外，使用 SQL 2008，您可以将日期时间转换为日期，而不是将天数添加到 0。

```
SELECT CONVERT(DATE, DATEADD(hour, -15, DateExited)) As SummaryDate, SUM(Value) as s1
FROM Test
WHERE DATEADD(hour, -15, DateExited) BETWEEN @StartDate AND @EndDate
GROUP BY CONVERT(DATE, DATEADD(hour, -15, DateExited))
ORDER BY SummaryDate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:16:45.863

您可以添加负 15 小时，然后将结果转换为日期：

```
select  cast(dateadd(hour,-15,'2012-05-06 14:30') as date) -- 2012-05-05
select  cast(dateadd(hour,-15,'2012-05-06 15:30') as date) -- 2012-05-06 
```

给你一个`group by`赞：

```
group by cast(dateadd(hour,-15,'2012-05-06 03:30') as date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:32:13.893

您可以创建一个函数来返回给定日期输入参数所需的值：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION GetValueSum 
(
    @StartDate DATETIME
)
RETURNS INT
AS
BEGIN
DECLARE @ValueSum INT
DECLARE @StartDateTime DATETIME
DECLARE @EndDateTime DATETIME

-- Set the starting time to 3 PM on the datetime sent in:
SET @StartDateTime = DATEADD(hh, 15, CAST(CAST(@StartDate AS DATETIME) AS DATETIME))

-- Set the end time to one day later, minus 3 milliseconds (this smallest unit sql server can use)
SET @EndDateTime = DATEADD(ms, -3, DATEADD(dd, 1, @StartDateTime))

SELECT @ValueSum = SUM(Value)
FROM dbo.test
WHERE DateExited BETWEEN @StartDateTime AND @EndDateTime

RETURN @ValueSum

END
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:14:12.510

最简单的方法是投射到日期：

```
SELECT cast(SummaryDate as date), SUM(Value) as s1
FROM Test
where DateExited BETWEEN dateadd(year,datediff(year,0,GETDATE()),0) AND GetDate()
GROUP BY cast(SummaryDate as date)
ORDER BY 1 
```

# image - Normalization of a sequence of images via ImageMagick or other means?

> ID：10900849
> 
> 赞同：3
> 
> 时间：2012-06-05T16:09:09.080
> 
> 标签：image, image-processing, ffmpeg, imagemagick, video-processing

I have a series of images that change relatively little during the day, but suffer from severe over and underexposure sometimes. There's nothing I can do in the way of fixing the loss of details, however I want to make it so that one from to the next is not so jolting. In other words, I'd like to normalize brightness / color levels the sequence of images so that it feels more consistent from one from to the next. Ultimately this sequence is being encoded to a video and therefore why this is important to me.

How can I normalize these values for a series of a few hundred frames via ImageMagick or some other means?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:13:44.030

使用 ImageMagick 命令行的[-equalize](http://www.imagemagick.org/script/command-line-options.php?ImageMagick=quc2uajippmh7ab07lp92csoo4#equalize)选项，应该可以解决问题。这只会调整当前图像以正确使用其全色范围。

如果您希望一张图像将其直方图和/或饱和度与另一张图像匹配，请使用[此 ImageMagick 脚本](http://www.fmwconcepts.com/imagemagick/histmatch/index.php)。

# python - May near seeds in random number generation give similar random numbers?

> ID：10900852
> 
> 赞同：10
> 
> 时间：2012-06-05T16:09:15.110
> 
> 标签：python, random, seed

I'm using sequential seeds (1,2,3,4,...) for generation of random numbers in a simulation. Does the fact that the seeds are near each other make the generated pseudo-random numbers similar as well?

I think it doesn't change anything, but I'm using python

Edit: I have done some tests and the numbers don't look similar. But I'm afraid that the similarity cannot be noticed just by looking at the numbers. Is there any theoretical feature of random number generation that guarantees that different seeds give completely independent pseudo-random numbers?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:42:38.927

根据定义，种子和生成的随机数之间肯定存在相关性。问题是随机化算法是否足以产生*看似*不相关的结果，您应该研究评估随机性的方法来回答这个问题。

不过，你的担心是对的。以下是 Microsoft 的 C++`rand`函数的结果，种子值从 0 到 9：

```
 38  7719 21238  2437  8855 11797  8365 32285 10450 30612
   41 18467  6334 26500 19169 15724 11478 29358 26962 24464
   45 29216 24198 17795 29484 19650 14590 26431 10705 18316
   48  7196  9294  9091  7031 23577 17702 23503 27217 12168
   51 17945 27159   386 17345 27504 20815 20576 10960  6020
   54 28693 12255 24449 27660 31430 23927 17649 27472 32640
   58  6673 30119 15745  5206  2589 27040 14722 11216 26492
   61 17422 15215  7040 15521  6516 30152 11794 27727 20344
   64 28170   311 31103 25835 10443   497  8867 11471 14195
   68  6151 18175 22398  3382 14369  3609  5940 27982  8047 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T13:01:24.720

当使用顺序种子进行多次模拟时，我发现从 Mersenne Twister 生成的随机数中存在可测量但很小的相关性——其结果被平均以产生最终结果。在 linux 上的 python 中，如果我使用系统随机函数（非伪随机数）通过 random.SystemRandom() 生成的种子，相关性就会消失。我将 SystemRandom 数字存储在文件中，并在模拟中需要种子时读取它们。要生成种子：

```
import random
myrandom = random.SystemRandom
x = myrandom.random       # yields a number in [0,1)
dump x out to file... 
```

然后当需要种子时

```
import random
read x from file...
newseed = int(x*(2**31))  # produce a 32 bit integer
random.seed(newseed)
nextran = random.random()
nextran = random.random()... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:23:38.827

你在做什么模拟？

出于模拟目的，您的论点是有效的（取决于模拟的类型），但如果您在模拟以外的环境中实现它，那么如果它要求基于生成的随机数存在环境安全问题，那么它很容易被黑客入侵.

如果您正在模拟机器的结果，无论它是否对社会有害，那么您的结果结果将是不可接受的。它需要尽可能多的随机性，我永远不会相信你的推理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:48:16.030

第一：定义相似性。下一步：编写相似性测试。然后：检查相似性。

只有对相似性的模糊描述，很难检查它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T21:20:28.547

引用 random 模块中的文档：

> 关于底层 Mersenne Twister 核心生成器的一般说明：
> 
> *   周期为 2**19937-1。
> *   它是现存最广泛测试的生成器之一。

我更担心我的代码被破坏而不是我的 RNG 不够随机。一般来说，你对随机性的直觉是错误的——人类的大脑非常善于发现模式，即使它们不存在。

只要您知道由于缺乏随机播种，您的结果不会是“安全的”，那么您应该没问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T11:45:26.153

如果您担心顺序种子，请不要使用顺序种子。设置一个具有已知种子的主 RNG，然后从该主 RNG 获取连续输出，以根据需要为各种子 RNG 播种。

因为您知道主 RNG 的初始种子，所以如果需要，可以像以前一样再次运行整个模拟。

```
masterSeed <- 42
masterRNG <- new Random(masterSeed)

childRNGs[] <- array of child RNGs

foreach childRNG in childRNGs
   childRNG.setSeed(masterRNG.next())
endforeach 
```

# c# - ASP.NET Request QueryString says value is null

> ID：10900854
> 
> 赞同：0
> 
> 时间：2012-06-05T16:09:20.743
> 
> 标签：c#, asp.net

I have this link here...

`<li><a href="/?fileDownloadable=downloadableProducts/MyPDF.pdf" target="_blank" runat="server">MyPDF</a></li>`

and in my code behind I try to a Request.QueryString["fileDownloadable"] and it says it returning null...which in the link its not..

Any Ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:35:54.070

放一个“。” 在斜线前面或删除斜线

```
<a href="./?fileDownloadable=downloadableProducts/MyPDF.pdf" target="_blank" runat="server">MyPDF</a>

OR

<a href="?fileDownloadable=downloadableProducts/MyPDF.pdf" target="_blank" runat="server">MyPDF</a> 
```

注意：这将引用/重定向当前页面。那是你要的吗？

# ruby-on-rails - Use global or constant variable in Ruby/Rails?

> ID：10900855
> 
> 赞同：20
> 
> 时间：2012-06-05T16:09:24.617
> 
> 标签：ruby-on-rails, ruby

Say we have a connection to memcache or redis... which style is preferred and why?

```
MEMCACHE = Memcache.new(...)
REDIS = Redis.new(...) 
```

OR

```
$memcache = Memcache.new(...)
$redis = Redis.new(...) 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-05-10T03:23:09.140

您可能想在[此处](https://github.com/redis/redis-rb/blob/master/lib/redis.rb#L23)`Redis.current`使用更多信息

例如，在初始化程序中：

```
Redis.current = Redis.new(host: 'localhost', port: 6379) 
```

然后在您的其他课程中：

```
def stars
  redis.smembers("stars")
end

private

def redis
  Redis.current
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-05T16:19:58.927

它们不是等效的构造。根据您的应用程序，它们可能可以互换，也可能不能互换，但它们在语义上是不同的。

```
# MEMCACHE is a constant, subject to scoping constraints.
MEMCACHE = Memcache.new(...)

# $memcache is a global variable: declare it anywhere; use it anywhere.
$memcache = Memcache.new(...) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-05T16:17:46.913

IMO 是一个“常数”，因为它表明它应该是……常数。

全局变量并不意味着它们不应该被突变。

# php - Soap error "Object reference not set to an instance of an object" while using .net service in php

> ID：10900856
> 
> 赞同：0
> 
> 时间：2012-06-05T16:09:24.643
> 
> 标签：php, .net, web-services, soap, dotnetnuke

I'm trying to use a .net soap webservice in php, I've tried everything but I keep getting the error "Object reference not set to an instance of an object". Here's the code I've got right now:

```
$client = New SoapClient('http://url.com/DesktopModules/IWebCSharp/webservice.asmx?WSDL', array('trace' => true));
$head = array();
$head['PortalID'] = 0;
$head['UserID'] = 1;
$head['Username'] = 'foo';
$head['Password'] = 'bar';
$head['Encrypted'] = 'false';
$head['WebPageCall'] = 'false';
$head['ModuleId'] = 523;
$header = new SoapHeader('http://schemas.xmlsoap.org/soap/envelope/', 'IWebAuthendication', $head);
$client->__setSoapHeaders($header);
$client->GetUser(array('GetUser' => array('someuser', 'Username'))); 
```

When I run this and check the request sent ($client->__getLastRequest()) I get the following:

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://webservices.DotNetNuke.com/"><SOAP-ENV:Header><SOAP-ENV:IWebAuthendication><!-- ALL THE AUTHENTICATION STUFF //--></SOAP-ENV:IWebAuthendication></SOAP-ENV:Header><SOAP-ENV:Body><ns1:GetUser/></SOAP-ENV:Body></SOAP-ENV:Envelope> 
```

The relevant part there is of course this:

```
<SOAP-ENV:Body><ns1:GetUser/></SOAP-ENV:Body> 
```

Why am I not getting the parameter through? What am I doing wrong? I've searched a LOT, both here on SO and Google, but every solution I've seen that has been working for others is not working for me. This webservice is part of a DotNetNuke system and I can make this work if I use CURL so I know the webservice can't be broken but I really want to use SoapClient() calls instead because it's a lot easier and a lot less code.

Here is the relevant code from the .net webservice:

```
public UserInfo GetUser(string Username) {
 UserInfo objResponse = new UserInfo();
 try {
  IWebAuthendication objIWebAuthendication = new IWebAuthendication(IWebCredentials);
  if (!(objIWebAuthendication.ValidAndAuthorized())) {
   objResponse.UserID = -1;
   objResponse.Username = "Not Authorized";
   return objResponse;
  }

  objResponse = IWebUser.GetUserInfo(IWebCredentials.PortalID, Username);

  //  Do not return the password for a administrator 
  if ((objResponse.IsSuperUser == false & objResponse.IsInRole("Administrators") ==    false)) {
   objResponse.Membership.Password = UserController.GetPassword(ref objResponse, "").ToString();
  }
  else {
   objResponse.Membership.Password = "Administrator password is supressed";
  }
 }
 catch (Exception ex) {
  objResponse.UserID = -1;
  objResponse.Username = ex.Message;
 }
 return objResponse;
} 
```

And here's the relevant part of the WSDL:

```
<wsdl:operation name="GetUser">
 <soap:operation soapAction="http://webservices.DotNetNuke.com/GetUser" style="document"/>
 <wsdl:input>
  <soap:body use="literal"/>
  <soap:header message="tns:GetUserIWebAuthendicationHeader" part="IWebAuthendicationHeader" use="literal"/>
 </wsdl:input>
 <wsdl:output>
  <soap:body use="literal"/>
 </wsdl:output>
</wsdl:operation> 
```

How can I make this work in PHP with SoapClient()?

# macos - 右侧有向下三角形的 NSButton

> ID：10900858
> 
> 赞同：0
> 
> 时间：2012-06-05T16:09:37.187
> 
> 标签：macos, cocoa, geometry, nsbutton, accessory

我正在尝试在 IB 中创建一个本机 NSButton 对象。当我选择附件作为按钮类型时，标题消失。当我尝试写标题时，按钮没有调整大小并且三角形不断消失。

如何制作一个带有文本的 NSButton 和右侧向下的附件三角形，指示这是您可以单击并弹出的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:37:33.593

也许[NSPopUpButton](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSPopUpButton_Class/Reference/Reference.html)是您正在寻找的。

# wpf - Tips for creating scalable WPF user control

> ID：10900859
> 
> 赞同：2
> 
> 时间：2012-06-05T16:09:38.287
> 
> 标签：wpf, xaml, user-controls

I'm new to WPF. I am creating an application that will allow me to control my MIDI devices. For this, I created a keyboard user control. I think it looks great, but I can't figure out how to design it so that it scales when drawn to a window. Can anybody help with any tips on modifying the below xaml?

```
<Grid>
    <StackPanel Orientation="Horizontal">
        <Grid>
            <Polygon Name="A0" Tag="21" Points="0,130 0,200 36,200 36,130 31,130 31,0 0,0 0,130" Stroke="Black" StrokeThickness="1" HorizontalAlignment="Left" Margin="0,0,0,0" />
            <Polygon Name="Asharp0" Tag="22" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="31,0,0,0" />
            <Polygon Name="B0" Tag="23" Points="0,130 0,200 36,200 36,0 15,0 15,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="36,0,0,0" />
        </Grid>
        <Grid>
            <Polygon Name="C1" Tag="24" Points="0,0 0,200 36,200 36,130 22,130 22,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="0,0,0,0" />
            <Polygon Name="Csharp1" Tag="25" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="22,0,0,0" />
            <Polygon Name="D1" Tag="26" Points="0,130 0,200 36,200 36,130 29,130 29,0 7,0 7,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="36,0,0,0" />
            <Polygon Name="Dsharp1" Tag="27" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="65,0,0,0" />
            <Polygon Name="E1" Tag="28" Points="0,130 0,200 36,200 36,0 14,0 14,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="72,0,0,0" />
            <Polygon Name="F1" Tag="29" Points="0,0 0,200 36,200 36,130 21,130 21,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="108,0,0,0" />
            <Polygon Name="Fsharp1" Tag="30" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="129,0,0,0" />
            <Polygon Name="G1" Tag="31" Points="0,130 0,200 36,200 36,130 26,130 26,0 5,0 5,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="144,0,0,0" />
            <Polygon Name="Gsharp1" Tag="32" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="170,0,0,0" />
            <Polygon Name="A1" Tag="33" Points="0,130 0,200 36,200 36,130 31,130 31,0 10,0 10,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="180,0,0,0" />
            <Polygon Name="Asharp1" Tag="34" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="211,0,0,0" />
            <Polygon Name="B1" Tag="35" Points="0,130 0,200 36,200 36,0 15,0 15,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="216,0,0,0" />
        </Grid>
        <Grid>
            <Polygon Name="C2" Points="0,0 0,200 36,200 36,130 22,130 22,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="0,0,0,0" />
            <Polygon Name="Csharp2" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="22,0,0,0" />
            <Polygon Name="D2" Points="0,130 0,200 36,200 36,130 29,130 29,0 7,0 7,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="36,0,0,0" />
            <Polygon Name="Dsharp2" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="65,0,0,0" />
            <Polygon Name="E2" Points="0,130 0,200 36,200 36,0 14,0 14,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="72,0,0,0" />
            <Polygon Name="F2" Points="0,0 0,200 36,200 36,130 21,130 21,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="108,0,0,0" />
            <Polygon Name="Fsharp2" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="129,0,0,0" />
            <Polygon Name="G2" Points="0,130 0,200 36,200 36,130 26,130 26,0 5,0 5,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="144,0,0,0" />
            <Polygon Name="Gsharp2" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="170,0,0,0" />
            <Polygon Name="A2" Points="0,130 0,200 36,200 36,130 31,130 31,0 10,0 10,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="180,0,0,0" />
            <Polygon Name="Asharp2" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="211,0,0,0" />
            <Polygon Name="B2" Points="0,130 0,200 36,200 36,0 15,0 15,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="216,0,0,0" />
        </Grid>
        <Grid>
            <Polygon Name="C3" Points="0,0 0,200 36,200 36,130 22,130 22,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="0,0,0,0" />
            <Polygon Name="Csharp3" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="22,0,0,0" />
            <Polygon Name="D3" Points="0,130 0,200 36,200 36,130 29,130 29,0 7,0 7,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="36,0,0,0" />
            <Polygon Name="Dsharp3" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="65,0,0,0" />
            <Polygon Name="E3" Points="0,130 0,200 36,200 36,0 14,0 14,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="72,0,0,0" />
            <Polygon Name="F3" Points="0,0 0,200 36,200 36,130 21,130 21,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="108,0,0,0" />
            <Polygon Name="Fsharp3" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="129,0,0,0" />
            <Polygon Name="G3" Points="0,130 0,200 36,200 36,130 26,130 26,0 5,0 5,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="144,0,0,0" />
            <Polygon Name="Gsharp3" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="170,0,0,0" />
            <Polygon Name="A3" Points="0,130 0,200 36,200 36,130 31,130 31,0 10,0 10,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="180,0,0,0" />
            <Polygon Name="Asharp3" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="211,0,0,0" />
            <Polygon Name="B3" Points="0,130 0,200 36,200 36,0 15,0 15,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="216,0,0,0" />
        </Grid>
        <Grid>
            <Polygon Name="C4" Points="0,0 0,200 36,200 36,130 22,130 22,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="0,0,0,0" />
            <Polygon Name="Csharp4" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="22,0,0,0" />
            <Polygon Name="D4" Points="0,130 0,200 36,200 36,130 29,130 29,0 7,0 7,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="36,0,0,0" />
            <Polygon Name="Dsharp4" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="65,0,0,0" />
            <Polygon Name="E4" Points="0,130 0,200 36,200 36,0 14,0 14,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="72,0,0,0" />
            <Polygon Name="F4" Points="0,0 0,200 36,200 36,130 21,130 21,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="108,0,0,0" />
            <Polygon Name="Fsharp4" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="129,0,0,0" />
            <Polygon Name="G4" Points="0,130 0,200 36,200 36,130 26,130 26,0 5,0 5,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="144,0,0,0" />
            <Polygon Name="Gsharp4" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="170,0,0,0" />
            <Polygon Name="A4" Points="0,130 0,200 36,200 36,130 31,130 31,0 10,0 10,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="180,0,0,0" />
            <Polygon Name="Asharp4" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="211,0,0,0" />
            <Polygon Name="B4" Points="0,130 0,200 36,200 36,0 15,0 15,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="216,0,0,0" />
        </Grid>
        <Grid>
            <Polygon Name="C5" Points="0,0 0,200 36,200 36,130 22,130 22,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="0,0,0,0" />
            <Polygon Name="Csharp5" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="22,0,0,0" />
            <Polygon Name="D5" Points="0,130 0,200 36,200 36,130 29,130 29,0 7,0 7,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="36,0,0,0" />
            <Polygon Name="Dsharp5" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="65,0,0,0" />
            <Polygon Name="E5" Points="0,130 0,200 36,200 36,0 14,0 14,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="72,0,0,0" />
            <Polygon Name="F5" Points="0,0 0,200 36,200 36,130 21,130 21,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="108,0,0,0" />
            <Polygon Name="Fsharp5" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="129,0,0,0" />
            <Polygon Name="G5" Points="0,130 0,200 36,200 36,130 26,130 26,0 5,0 5,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="144,0,0,0" />
            <Polygon Name="Gsharp5" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="170,0,0,0" />
            <Polygon Name="A5" Points="0,130 0,200 36,200 36,130 31,130 31,0 10,0 10,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="180,0,0,0" />
            <Polygon Name="Asharp5" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="211,0,0,0" />
            <Polygon Name="B5" Points="0,130 0,200 36,200 36,0 15,0 15,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="216,0,0,0" />
        </Grid>
        <Grid>
            <Polygon Name="C6" Points="0,0 0,200 36,200 36,130 22,130 22,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="0,0,0,0" />
            <Polygon Name="Csharp6" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="22,0,0,0" />
            <Polygon Name="D6" Points="0,130 0,200 36,200 36,130 29,130 29,0 7,0 7,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="36,0,0,0" />
            <Polygon Name="Dsharp6" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="65,0,0,0" />
            <Polygon Name="E6" Points="0,130 0,200 36,200 36,0 14,0 14,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="72,0,0,0" />
            <Polygon Name="F6" Points="0,0 0,200 36,200 36,130 21,130 21,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="108,0,0,0" />
            <Polygon Name="Fsharp6" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="129,0,0,0" />
            <Polygon Name="G6" Points="0,130 0,200 36,200 36,130 26,130 26,0 5,0 5,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="144,0,0,0" />
            <Polygon Name="Gsharp6" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="170,0,0,0" />
            <Polygon Name="A6" Points="0,130 0,200 36,200 36,130 31,130 31,0 10,0 10,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="180,0,0,0" />
            <Polygon Name="Asharp6" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="211,0,0,0" />
            <Polygon Name="B6" Points="0,130 0,200 36,200 36,0 15,0 15,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="216,0,0,0" />
        </Grid>
        <Grid>
            <Polygon Name="C7" Points="0,0 0,200 36,200 36,130 22,130 22,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="0,0,0,0" />
            <Polygon Name="Csharp7" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="22,0,0,0" />
            <Polygon Name="D7" Points="0,130 0,200 36,200 36,130 29,130 29,0 7,0 7,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="36,0,0,0" />
            <Polygon Name="Dsharp7" Points="0,0 0,130 21,130 21,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="65,0,0,0" />
            <Polygon Name="E7" Points="0,130 0,200 36,200 36,0 14,0 14,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="72,0,0,0" />
            <Polygon Name="F7" Points="0,0 0,200 36,200 36,130 21,130 21,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="108,0,0,0" />
            <Polygon Name="Fsharp7" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="129,0,0,0" />
            <Polygon Name="G7" Points="0,130 0,200 36,200 36,130 26,130 26,0 5,0 5,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="144,0,0,0" />
            <Polygon Name="Gsharp7" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="170,0,0,0" />
            <Polygon Name="A7" Points="0,130 0,200 36,200 36,130 31,130 31,0 10,0 10,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="180,0,0,0" />
            <Polygon Name="Asharp7" Points="0,0 0,130 20,130 20,0" Stroke="Black" Fill="Black" StrokeThickness="1" Width="21" Height="130" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="211,0,0,0" />
            <Polygon Name="B7" Points="0,130 0,200 36,200 36,0 15,0 15,130" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="216,0,0,0" />
        </Grid>
        <Grid>
            <Polygon Name="C8" Points="0,0 0,200 36,200 36,0" Stroke="Black" StrokeThickness="1" Width="36" HorizontalAlignment="Left" Margin="0,0,0,0" />
        </Grid>
    </StackPanel>
</Grid> 
```

I used a series of stacked panel grids because I got lazy with the margin-left. I don't mind restructuring that if needed. It was just easy to create a single octave and cut+paste that way.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:29:29.550

您可以使用 a`ViewBox`作为父容器。它将缩放您的内容`StackPanel`以适合窗口的大小。

# jsf - 处理 JSF 时禁用按钮并显示加载图像

> ID：10900860
> 
> 赞同：0
> 
> 时间：2012-06-05T16:09:42.210
> 
> 标签：jsf, richfaces, loading-image

我的 webapp 中有这个模块，我需要更新目录。

这个想法是**禁用**并**显示**a `h:commandButton`，这两个动作都应该在单击按钮后立即发生。最后，当更新过程结束时，它应该以另一种方式，**隐藏**，**启用**，但这次也会显示一个标签，上面写着“更新成功”或“更新失败”。**`h:graphicImage`**`h:graphicImage`**`h:commandButton``h:outputText`******

 ******我的代码中的问题是图像和标签在过程完成后立即出现，我找不到执行上述操作的方法。

我在哪里或错过了什么？

干杯。

```
 <a4j:commandButton id="btnActualiza" value="Actualizar catálogos"
                       render="messageCatalogos actualizacionCorrecta
                       @this imgProcesando"
                       onclick="this.disabled=true;"
                       oncomplete="this.disabled=false"
                       actionListener="#{administrationBean.doImgProcesandoVisible}"
                       action="#{administrationBean.doActualizaCatalogos}"/>
    <a4j:outputPanel id="imgProcesando">
        <h:graphicImage rendered="#{administrationBean.imgProcesandoRendered}"
                        url="img/imgLoading.gif"/>
    </a4j:outputPanel>
    <h:panelGroup/>
    <h:panelGroup/>
    <a4j:outputPanel id="actualizacionCorrecta" style="font-size: 14px; color: #D17100">
        <h:outputText rendered="#{administrationBean.actualizacionCorrectaLabelRendered}"
                      value="Actualización correcta !"/>
        <h:outputText rendered="#{administrationBean.actualizacionFalloLabelRendered}"
                      value="Fallo la actualización !"/>
    </a4j:outputPanel> 
```

**更新**

我的开发环境：

*   莫哈拉 2.1.6
*   RichFaces 4.1.0.Final
*   Tomcat 7.0.14（测试）/Tomcat 7.0.22（产品）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:30:37.037

您需要改为通过 JS 显示和隐藏图像。

```
<h:graphicImage id="loading" url="img/imgLoading.gif" style="display:none" /> 
```

和

```
<a4j:commandButton ...
    onbegin="this.disabled=true; $('#formId\\:loading').show()"
    oncomplete="this.disabled=false; $('#formId\\:loading').hide()"
/> 
```******

# php - Best practices for website permissions system

> ID：10900867
> 
> 赞同：5
> 
> 时间：2012-06-05T16:10:33.073
> 
> 标签：php, permissions, web

Current project I am working on is a web application, that has to be delivered to multiple customers on their own servers. The website needs a permission control system, that will manage areas and features users can or can not use.
As for know, I'm designing a database-driven permissions system, with permissions stored in database. Every user has a role. The role defines the list permissions available. The schema looks like this:

**users** table
1\. user_id
2\. name
3\. role_id

**roles** table
1\. role_id
2\. name

**permissions** table
1\. permission_id
2\. name

**roles_permissions** table:
1\. role_id
2\. permission_id

In the code I would fetch logged users role and permissions, and check if the user is able to perform action or see area like so:

```
if($user->hasPermission('Edit HR')) {
  // let user see the editing HR section
} 
```

The hasPermission would check if user has a permission with a name 'Edit HR' and will return the needed result. The problem I see is the database table has to have the permission record with a name being exactly 'Edit HR', not 'Edit_hr' or 'HR Editing'. So I have to make sure the data for the permissions system is the same for every database the applications are using. Which kind of makes me think this is a flawed design and needs to be re-designed. Creating new sections and features would also require to update all the databases, which also makes me a sad panda.

So, basically, the question is: what is the best way to design the database driven permission system and keep the database integrity on multiple databases?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:45:29.297

The scheme you've come up with looks fine. The only thing I would add to that is on the `permissions` table I would add a field called `tag` or similar.

The permission `tag` would be something like `EDIT_HR`, and you would use this as the reference in your code instead of its `name`. Use the `name` just for display purposes for example `HR Editing`. This way the name can vary as required, and it won't affect your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:36:25.663

我正在使用的解决方案是拥有一个全局 $current_user 对象，该对象在创建时读取权限表并存储对其有效的所有权限操作。每当您需要检查操作时，就会搜索此数组。它节省了数据库查询，尽管如果将此类数据存储在全局对象中存在安全隐患，我还没有找到它。

只需要 1 个 db 表（示例）：

```
user_id | user_role | user_action
---------------------------------
0       |   10      |   view_dashboard
0       |   1       |   view_users 
```

用户角色对应于最低用户类型（管理员、编辑、访问者等），因此所有具有 user_role >= $current_user 角色的操作都可用。user_id 列允许您覆盖特定用户的某些级别。

通过这种设置，也很容易拥有一个列出所有权限的页面，并允许用户通过简单的下拉菜单修改值（但要确保不是每个用户都可以这样做）。

# google-maps - 删除/隐藏谷歌地图中的默认地图图层并添加图像叠加层

> ID：10900868
> 
> 赞同：1
> 
> 时间：2012-06-05T16:10:51.793
> 
> 标签：google-maps, google-maps-api-3

所以基本上我想要实现的是谷歌地图v3中的这个功能，他们在openlayers中拥有：[http ://dev.openlayers.org/releases/OpenLayers-2.11/examples/image-layer.html](http://dev.openlayers.org/releases/OpenLayers-2.11/examples/image-layer.html)

隐藏 googlemaps 的基础层（实际地图），然后添加放置在地图整个表面上的图像叠加层。

这可能吗？有没有人手头有任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:57:55.980

它被称为 GroundOverlay：[https ://developers.google.com/maps/documentation/javascript/reference#GroundOverlay](https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay)

但是，虽然 a`GroundOverlay`覆盖了基本地图，但它不会删除它。您需要一个自定义地图类型：[https ://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes)

开发始终返回空白图块的自定义地图类型相当容易。

# java - How do I write a method which would work on both lists and arrays?

> ID：10900869
> 
> 赞同：4
> 
> 时间：2012-06-05T16:10:52.667
> 
> 标签：java, arrays, list

I have a method which looks like this:

```
void foo (List<String> list, ...) {
  ...
  for (String s : list) { // this is the only place where `list` is used
    ...
  }
  ...
} 
```

the exact same code would work if I replace `List<String> list` with `String[] list`, however, to avoid spaghetti code, I keep the single method, and when I need to call it on an array `a`, I do it like this: `foo(Arrays.asList(a))`.

I wonder if this is The Right Way.

Specifically,

*   What is the overhead of `Arrays.asList()`?
*   Is there a way to write a method which would accept both arrays and lists, just like the `for` loop does?

Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T16:15:20.110

`Arrays.asList()`开销很小。没有真正的方法可以为`List`和实现一种方法`arrays`。

但您可以执行以下操作：

```
void foo (List<String> list, ...) {
  ...
  for (String s : list) { // this is the only place where *list* is used
    ...
  }
  ...
}

void foo (String[] arr, ...) {
  if ( arr != null ) {
      foo(Arrays.asList(arr),...);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:19:04.943

从[openjdk](http://www.docjar.com/html/api/java/util/Arrays.java.html)的源代码，`Arrays.asList`：

```
public static <T> List<T> asList(T... a) {
   return new ArrayList<>(a);
} 
```

此外：

```
ArrayList(E[] array) {
   if (array==null)
      throw new NullPointerException();
   a = array;
} 
```

所以基本上所有这些都发生在分配中，所以开销应该可以忽略不计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:15:59.083

开销在于它将一个数组转换为一个列表——它*如何*做到这一点将取决于实现，它只需要履行合同。

如果您担心潜在的运行时开销，IMO 您应该编写两种方法：这是 Java 的本质；方法具有类型签名，必须遵守。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T16:16:15.977

请避免这种情况，我只使用并允许列表、集合和地图（[就像 Joshua Bloch 告诉我们](http://books.google.de/books?id=ka2VUBqHiWkC&pg=PA119&lpg=PA119&dq=josh%20bloch%20list%20array&source=bl&ots=yYFnRfq1UZ&sig=wsNV5tRBEzVGQ7djG1VGbFiyUHg&hl=en&sa=X&ei=yjLOT6XMF8rdsgb7x4T_Cg&redir_esc=y#v=onepage&q&f=false)的那样）。无法合并这两种“集合类型”。

另一种方法是使用[番石榴](https://code.google.com/p/guava-libraries/)（迭代器/迭代器）。因此，您可以在没有深度副本的情况下迭代您的集合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-05T16:37:28.800

好问题。

这是一种非常常见的情况，通常通过编写两个单独的方法来处理。然而，重复代码确实是一个坏主意，每当你发现自己在重复代码时，你应该开始寻找机会来更好地分解你的代码。（正如你现在所做的那样！）

现在，如果您查看 的源代码`java.util.Arrays`，您会注意到它`Arrays.asList`重新运行了一个私有内部类的实例，该实例`Arrays.ArrayList`只是普通数组的一个薄包装器，并将所有相关的方法调用委托给它。（这被称为数据结构的投影或视图。）因此产生的开销是微不足道的（除非您正在努力提取最后一点性能），并且在我看来，您应该继续使用这种方法而不必担心关于性能。

* * *

我个人使用的解决方案如下。

我有一个`RichIterable`在我的个人实用程序中命名的类。顾名思义，该类包含`Iterable`并提供了一些尚不存在的其他有用方法。该类还有一个工厂方法，可以`RichIterable`从数组中创建一个。这是类定义。

```
public class RichIterable<A> implements Iterable<A> {
  private Iterable<A> xs;

  private RichIterable(Iterable<A> xs) {
    this.xs = xs;
  }

  public static <A> RichIterable<A> from(Iterable<A> xs) {
    if (xs instanceof RichIterable) {
      return (RichIterable<A>) xs;
    } else {
      return new RichIterable<A>(xs);
    }
  }

  public static <A> RichIterable<A> from(final Enumeration<A> xs) {
    Iterable<A> iterable = new Iterable<A>() {
      @Override
      public Iterator<A> iterator() {
        return new Iterator<A>() {
          @Override
          public boolean hasNext() {
            return xs.hasMoreElements();
          }

          @Override
          public A next() {
            return xs.nextElement();
          }

          @Override
          public void remove() {
            throw new UnsupportedOperationException(
              "Cannot remove an element from an enumeration.");
          }
        };
      }
    };
    return RichIterable.from(iterable);
  }

  public static <A> RichIterable<A> from(final A[] xs) {
    Iterable<A> iterable = new Iterable<A>() {
      @Override
      public Iterator<A> iterator() {
        return new Iterator<A>() {
          private int i = 0;

          @Override
          public boolean hasNext() {
            return i < xs.length;
          }

          @Override
          public A next() {
            A x = xs[i];
            i++;
            return x;
          }

          @Override
          public void remove() {
            throw new UnsupportedOperationException(
              "Cannot remove an element from an array.");
          }
        };
      }
    };
    return RichIterable.from(iterable);
  }

  public boolean isEmpty() {
    if (xs instanceof Collection) {
      return ((Collection) xs).isEmpty();
    }
    for (A x : xs) {
      return false;
    }
    return true;
  }

  public int size() {
    if (xs instanceof Collection) {
      return ((Collection) xs).size();
    }
    int size = 0;
    for (A x : xs) {
      size++;
    }
    return size;
  }

  public ArrayList<A> toArrayList() {
    ArrayList<A> ys = new ArrayList<A>();
    for (A x : xs) {
      ys.add(x);
    }
    return ys;
  }

  public <B> RichIterable<B> map(F1<A, B> f) {
    List<B> ys = new ArrayList<B>();
    for (A x : xs) {
      ys.add(f.apply(x));
    }
    return RichIterable.from(ys);
  }

  public RichIterable<A> filter(F1<A, Boolean> pred) {
    List<A> ys = new ArrayList<A>();
    Arrays.asList();
    for (A x : xs) {
      if (pred.apply(x)) {
        ys.add(x);
      }
    }
    return RichIterable.from(ys);
  }

  public boolean exists(F1<A, Boolean> pred) {
    for (A x : xs) {
      if (pred.apply(x)) {
        return true;
      }
    }
    return false;
  }

  public boolean forall(F1<A, Boolean> pred) {
    for (A x : xs) {
      if (!pred.apply(x)) {
        return false;
      }
    }
    return true;
  }

  public Maybe<A> find(F1<A, Boolean> pred) {
    for (A x : xs) {
      if (pred.apply(x)) {
        return Just.of(x);
      }
    }
    return Nothing.value();
  }

  public String mkString(String beg, String sep, String end) {
    Iterator<A> i = xs.iterator();
    if (!i.hasNext()) {
      return beg + end;
    }
    StringBuilder sb = new StringBuilder();
    sb.append(beg);
    while (true) {
      A e = i.next();
      sb.append(e.toString());
      if (!i.hasNext()) {
        return sb.append(end).toString();
      }
      sb.append(sep);
    }
  }

  public String mkString(String sep) {
    return mkString("", sep, "");
  }

  public String mkString() {
    return this.mkString(", ");
  }

  public Iterable<A> getRaw() {
    return xs;
  }

  @Override
  public Iterator<A> iterator() {
    return xs.iterator();
  }
} 
```

# php - PHP MVC - handling views

> ID：10900870
> 
> 赞同：1
> 
> 时间：2012-06-05T16:11:01.680
> 
> 标签：php, model-view-controller, view, frameworks

I've found a framework that handles the views in a different way than just plain html. To be honest, I've no idea how are the big frameworks handling this issue because I've mostly worked with some tiny frameworks, so that's why it was an interesting thing for me. A quick example:

Instead of writing

```
<h2>Click on this <a href="www.example.com">example</a></h2> 
```

You'd have to type

```
echo $html->h2('Click on this' . $html->link('www.example.com', 'example')); 
```

So, my question is which one is better? Isn't plain html going to be faster? And let's say more understandable for others? Or let's leave the understandable part away, I want to know more about the performance and maybe other stuff that people know and can be mentioned on this issue.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:33:29.307

就像编程世界中的一切一样，这是一个品味问题。

虽然，我强烈反对它，有几个原因：

*   它使非 PHP 程序员更难编写视图。
*   以后调试很烦
*   我喜欢以与浏览器相同的方式查看我的视图。
*   给非常简单的东西增加了很多开销
*   失去漂亮（和合乎逻辑）的 HTML 缩进
*   **丑陋的！**

无论如何，如果您正确缩进 HTML 标记，HTML 问题很容易被发现。所以对我来说 - 一直都是纯 HTML。

虽然，一些视图助手很棒——创建链接、处理元素类、验证等。在我看来，试着找到最佳位置——不要用太多的 PHP 弄乱你的视图，但不要放弃确保您的代码尽可能动态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:22:07.873

你不能这么说... 通常，MVC 框架将代码分成模块，通过分离数据库操作、逻辑操作和视图来使站点干净。还有其他一些情况，比如发送邮件、分页、图像处理和操作等，这些都是普通编程中的复杂任务，可以在 MVC 中用几行代码完成，因为每件事都是预定义的。您在上面定义的示例仅遵循该模式，但您也可以以其他方式使用它。所以，它是一个替代方案。无论哪种方式，您都可以使用它。因此，当您发现在某些情况下 MVC 可能很复杂时，您可以按照自己的方式进行操作。所以，我想它更灵活，让我们可以选择两种方式。

希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:25:57.780

我亲自使用过 Yii PHP 框架，即使它也有处理 HTML 视图（CHtml）的方式，尽管我选择使用其中任何一个。渲染纯 HTML 比编写一些由框架解释然后生成为 HTML 的代码更快的解释是有道理的，事实上，我确实认为纯 HTML 更快。

然而，这允许在创建动态 HTML 内容时具有更好的灵活性，例如表单支持方法（验证等）和其他辅助方法。此外，我认为这更多地是从对面向对象编程的痴迷中演变而来的。

但习惯它只是时间问题。如果您考虑性能，请认为它不会真正产生影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:16:05.393

CodeIgniter 是提供 HTML 帮助程序以允许您通过 PHP 代码生成 HTML 的框架之一（就像您问题中的后一种情况一样）。

虽然这会稍微慢一些，但优点是它可以确保输出有效的 HTML。举个例子：

`<h2>This is a header without a closing tag`

以上是一个常见的错误，它会默默地失败。但是，如果使用 HTML 帮助函数，就不会犯同样的错误

`echo heading('This is a header',2);`

至于可读性，任何熟悉 PHP 的人都应该能够轻松理解任一代码片段。

# ms-access - ACCESS VBA Comparing a string against a string in another table

> ID：10900873
> 
> 赞同：0
> 
> 时间：2012-06-05T16:11:08.233
> 
> 标签：ms-access, vba

here's my problem. I have 2 tables tvehicle and tPMCL the tVehicle table has a list of our vehicles, and the tPMCL holds when preventitive maint. is done.

tvhhicle.VehicleTagnumber holds the actual plate number, and tPMCL.Tag holds only a Index of a look up of that number from when it was entered, I wish it had the tag number so when i do loops through my data comparing it would be able to match up, as it is:

it's comparing something along the lines of "XPE 269" to 1 and that's not working so well.

Any ideas? the answer may not be a VBA answer it may be a diferent way to do the lookup in the first place. But I just can't find another way to do the lookup and actually store the plate number and not an index of it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:39:58.773

看来您认为的索引实际上是外键。这是一件好事。这意味着如果 VehicalTagNumber 在哪里更改（例如错误的输入），则不需要更新引用表。

如果您需要遍历 tPMCL 并且需要相应的标签号，您可以执行以下两项操作之一。

您可以使用 Dlookup 在每个循环中获取它。例如

```
Dim strTag As String
strTag = DLookup("[VehicleTagnumber]", "tvhhicle","[Id] = 1") 
```

但是，对于大量记录，这将很慢。

相反，只需将您的记录集基于连接两个表的 SQL 语句，而不是直接打开一个表。

```
Dim dbVehicle As Object 
Dim rstVehicle As Object 
Dim fldEnumerator As Object 
Dim fldColumns As Object 
Dim strSQL as String

Set dbVehicle = CurrentDb 
Set rstVehicle = dbVehicle.OpenRecordset("tVehicle") 
Set fldColumns = rstVehicle.Fields 

strSQL = "SELECT * FROM tMPCL m INNER JOIN tVehicle v ON m.Tag = v.ID" 

Set rsttPMCL = dbVehicle.OpenRecordset(strSQL) 
```

# java - Springframework 豆类

> ID：10900874
> 
> 赞同：0
> 
> 时间：2012-06-05T16:11:10.533
> 
> 标签：java, spring, jakarta-ee

直到现在我还没有使用过 spring 框架。我尝试阅读和阅读 spring 文档，但找不到以下简单问题的答案。

该应用程序是 ant 构建到构建目录的。到目前为止，当我尝试启动**JBOSS**（或 apache）服务器时，日志显示它无法构建 bean，因为它找不到

> var/config/madagascar.prop。. **在WEB-INF/applicationContext.xml**中写入以下代码段

 **```
<bean id="application.home" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetClass" value="java.lang.System"/>
    <property name="targetMethod" value="getProperty"/>
    <property name="arguments">
        <list>
            <value>application.home</value>
        </list>
    </property>
</bean>
<bean id="propertyFile" class="java.io.File">
    <constructor-arg ref="application.home"/>
    <constructor-arg value="var/config/madagascar.prop"/>
</bean> 
```

你能告诉我在哪里`{application.home}`以及`var/config`预计在哪里？

它是相对于 Eclipse 项目主页还是相对于 WEB-INF？

bean id=" **application.home** " 试图做什么 - 它是否试图从系统环境中读取 " **application.home** " 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:46:29.010

“application.home”是运行时值，`System.getProperty("application.home")`“propertyFile”bean 是一个 java.io.File 对象，它是从调用返回`new java.io.File(String, String)`的任何 application.home 和第二个字符串。

如果您想要的 bean 是“propertyFile”，则运行时等效项将是：

```
File file = new File(System.getProperty("application.home"),"var/config/madagascar.prop"); 
```

该配置是一种非常 Spring 1.x（阅读旧）的做事方式。XML 是一种非常笨拙的方式来执行许多这些类型的初始化，这也是 Spring 的`@JavaConfig`方法如此流行的原因之一。**

# sql - Azure data sync not syncing all databases

> ID：10900881
> 
> 赞同：0
> 
> 时间：2012-06-05T16:12:12.887
> 
> 标签：sql, azure, sync

I've searched for what should be a seemingly simple thing, and I can't find a reference to this issue anywhere. I have a very simple Azure Sync setup... one master database that needs to do a one way sync to three client databases.

It's only syncing three tables right now (all fields), and there's no filtering at all. I've verified that the schema on all four databases is identical and my sync process returns with no errors, but when I check the data, it's only ever updated one of the three client databases.

Like I say, this should be really simple. I've tried clearing the tables and re-adding them, even deleting the whole Sync Group, but no matter what I do, only one database updates. Any idea what I could be missing, or does Azure only allow one table to be sync'd?

# php - PHP：Preg_Match，试图在匹配之前返回一定数量的字符

> ID：10900882
> 
> 赞同：1
> 
> 时间：2012-06-05T16:12:13.993
> 
> 标签：php, regex, preg-match

我正在尝试匹配某个字符串 - 然后返回，让我们在该字符串之前和之后说 3 个字符。我该怎么做？这是我当前的代码：

```
<?php
$data = file_get_contents('all.htm');
$regex = '/span/';
preg_match($regex,$data,$match);?>
<pre>
<?php var_dump($match);?>
</pre> 
```

这会返回：

```
array(1) {
  [0]=>
  string(4) "span"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:18:22.627

这将匹配指定字符串前后最多 3 个字符（这里是“span”）

```
/(.{0,3})span(.{0,3})/ 
```

您可以从匹配数组中选取相邻的字符。

# c++ - 是否有 C++ 的无堆栈或无堆实现？

> ID：10900885
> 
> 赞同：22
> 
> 时间：2012-06-05T16:12:26.163
> 
> 标签：c++, standards, heap-memory, stack-memory, stackless

**C++ 标准没有提到堆栈或堆的任何内容，它们是特定于实现的**，这是真的。

尽管它们不是 C++ 标准的一部分，但我们最终还是会使用它们，以至于它们就像是语言本身的一部分，并且必须考虑到内存或性能目的。

因此我的问题**是有不使用堆栈和堆的 C++ 实现吗？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T19:49:27.400

其他人已经对堆给出了很好的答案，所以我将不理会它。

一些实现（例如，在 IBM 大型机上）不像大多数人所想的那样使用堆栈，原因很简单，硬件不支持它。相反，当您调用函数时，会从堆（它们的版本）分配激活记录（即，用于本地、参数和返回地址的空间）。这些激活记录被构建到一个链表中。

从纯粹抽象的角度来看，这肯定是一个堆栈——它支持后进先出语义，就像任何其他堆栈一样。不过，您确实必须非常抽象地看待它才能将其称为堆栈。如果您向人们展示链接在一起的内存块的图表，我认为可以肯定地猜测大多数程序员会将其描述为链表。如果你推送它们，我想大多数人会这样判断它“是的，你可以以类似堆栈的方式*使用*它，但它仍然是一个链表”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T16:39:47.683

> C++ 标准没有提及堆栈或堆的任何内容

它实际上是——只是不是用这些话，也没有指定堆栈和堆是如何实现的。

在 C++03 中有三种变量：

1.  具有*静态存储持续时间*的那些(3.7.1)。这些在计划期间是“范围内”的。
2.  具有*自动存储期限*的那些（3.7.2）。这些仅在声明它们的上下文中才在范围内。一旦它们超出范围，变量就会被销毁并释放。
3.  具有*动态存储期限*的那些(3.7.3)。这些是用`new`表达式创建的，并用`delete`. 对象本身是无范围的，因为它们的生命周期不受`new`编辑它们的上下文的约束。指向这些对象的立即*指针*当然是有作用域的。指针是自动的，或者很少（通常是错误的）静态存储持续时间。

“堆栈”和“堆”实际上只是后两种类型的对象所在的位置。它们是实现语言要求的平台相关实现细节。

所以，从技术上讲，你是对的。该标准没有说明堆和堆栈。但它确实说了很多关于不同风格的存储持续时间，这需要在真实平台上进行某种实现*。*在大多数现代 PC 类型的硬件上，这被实现为堆和堆栈。是否可以在不使用堆或堆栈的情况下在平台上实现不同类型的存储持续时间？一切皆有可能——我想它可以。但无论该实现最终是什么，它都可能具有至少与两者之一相似的特征。

除此之外，还需要考虑**标准要求**自动和动态存储持续时间。不满足这两个要求的任何语言实现都不是 C++。它可能很接近，但它不会真的是 C++。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-05T16:41:56.770

对于小型编程环境，例如基于 8K Atmel 微处理器（现在它有 32K 或更多）的[arduino 平台，没有实现堆，也没有库定义的新运算符。](http://www.arduino.cc)所有对象都是静态创建或在堆栈上创建的。您失去了标准库的优势，但获得了能够使用面向对象的语言来编写一个非常小的平台 - 例如，创建类来表示配置为特定输出模式或串行端口的引脚，创建该类的对象给它引脚号，然后调用该对象上的函数，而不必将引脚号传递给您的例程。

如果您`new`在 arduino 上使用，您的程序会编译但不会链接 - 编译器是针对 avr 指令集的 g++，所以是真正的 C++ 编译器。如果您选择提供自己的实现，则可以这样做，但在大多数情况下，在如此小的空间内提供实现的成本并不值得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T16:57:00.780

这基本上是在回应 TA 先生的回答（+1 BTW）。栈和堆是抽象概念。

`new`and`delete`运算符（and`malloc`和`free`函数）实际上只是称为堆的抽象的接口。因此，当您要求 C++ 实现“无堆”时，您实际上是在要求实现不允许您使用这些接口。我认为没有什么可以阻止实现总是使这些接口失败。

调用函数并在调用返回后恢复当前执行（以及可选地检索返回值）是堆栈抽象的接口。当您要求 C++ 实现“无堆栈”时，您要求 C++ 实现禁止程序执行这些操作。我想不出一种让编译器强加这种条件的合规方式。语言规定允许源代码定义函数，并定义代码来调用函数。

所以我的回答是：“无堆栈”不，“无堆”是的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-16T12:58:14.267

是的，主要是像飞思卡尔和PIC这样的MCU

> # 2\. 现在正在使用无堆栈处理器。
> 
> 我们不像汇编程序员那样看待内核。只要存在所需的基础知识，我们就对基本程序员的模型感到满意。堆栈不是其中之一：我们最近遇到了几个无堆栈内核，并且为它们开发 C 编译器没有问题。
> 
> eTPU 是一个 24 位增强型时间处理单元，用于汽车和通用航空发动机控制以及过程控制。eTPU 可能是一个协处理器，但它有完整的指令集和完整的 CPU 内核，而且它是无堆栈的。它是一款中等容量的处理器：今晚你可能会开车或飞回家，这要归功于无堆栈处理器上的 C。
> 
> 我们有一个基于 C99 和 ISO/IEC 18037 的 eTPU 的 C 编译器。我们在这个处理器上运行标准的 C 测试套件。
> 
> 飞思卡尔 RS08 是一种更传统的无堆栈 MCU。在“减少”HC08/HCS08内核的过程中，飞思卡尔移除了CPU堆栈。我们咨询了 RS08 的架构，从没觉得有必要坚持硬件栈。
> 
> 提到我们咨询过的另一个协处理器，飞思卡尔 XGATE 有一个非常友好的 ISA 和程序员模型，但它没有堆栈。
> 
> 然后是“几乎无堆栈”。Microchip PIC 从来没有数据堆栈，只有一个 8 入口（或增强型 14 位内核中的 16 入口）调用返回堆栈。没有人怀疑 C 可用于 PIC。
> 
> 这些部分，尤其是 eTPU，被设计为对编译器友好并鼓励机器生成代码。
> 
> 还有其他基于非堆栈的处理器，其中一些是最近创建的，涵盖一系列应用程序并享受自己的 C 编译器。有中到大批量的无堆叠零件。性能通常是零件没有堆栈的主要原因。
> 
> [http://www.bytecraft.com/Stack_controversy](http://www.bytecraft.com/Stack_controversy)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T16:17:31.510

由于 C++ 定义了诸如函数和 new 运算符之类的构造，因此不可能有无堆栈和无堆的实现。调用函数需要一个堆栈，而“新建”一个实例需要一个堆。这些实现方式在平台之间可能有所不同，但想法是相同的。总是需要有一个用于实例对象的内存区域，以及另一个用于跟踪执行点和调用层次结构的内存区域。

由于 x86（和 x64）对这些东西有方便的设施（即 ESP 寄存器），编译器使用它。其他平台可能不同，但最终结果在逻辑上是等效的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T16:50:21.123

我敢说没有这样的 C++ 实现，只是因为堆栈和堆是非常有用的抽象，基本上市场上的所有处理器都提供了一些硬件支持以使其非常高效。

由于 C++ 以效率为目标，因此 C++ 实现将利用它们。此外，C++ 程序通常不会在真空中运行。[它们必须集成到由平台的应用程序二进制接口](http://en.wikipedia.org/wiki/Application_binary_interface)定义的平台生态系统中。ABI - 出于同样的原因 - 定义了 C++ 实现需要遵守的堆栈和其他内存结构。

然而，让我们假设您的 C++ 程序是针对一个简单、小型、资源受限的嵌入式平台，它有一个奇异的微控制器，没有操作系统（您的应用程序将是操作系统！），没有线程或进程。

首先，平台可能根本不提供动态内存。您将需要使用在链接时定义的静态内存池，并开发自己的内存分配管理器 ( `new`)。C++ 允许它，并且在某些环境中确实使用它。

此外，CPU 可能使得堆栈抽象不是那么有用，因此不值得实现。例如，像 SPARC 这样的 CPU 定义了一种滑动[寄存器窗口机制](http://www.sics.se/~psm/sparcstack.html)- 结合大量寄存器 - 使用堆栈对函数调用效率不高（如果你看一下，堆栈已经在硬件中完成了！）。

长话短说，所有 C++ 实现都使用堆栈，大多数使用堆，但原因与平台属性密切相关。

# c - Arduino通过串口传递多个参数

> ID：10900887
> 
> 赞同：0
> 
> 时间：2012-06-05T16:12:30.467
> 
> 标签：c, arduino

对于我的项目，我有两个伺服系统，每次程序循环时我都需要将它们设置为正确的角度。为了做到这一点，我使用串行 USB 连接并发送一个数字来设置其中一个伺服系统。但是对于第二个伺服，我需要在一条消息中传递两个数字。我正在考虑一个字符串“X，Y”，我可以发送它并在 arduino 上的逗号之间拆分它，但似乎我只能通过串行端口发送数字和 1 个数字？我将如何去做这件事。

```
Serial.write("90,90");//does not work... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:18:30.723

[根据文档](http://arduino.cc/en/Serial/Write)，诸如`Serial.write("90,90");`应该工作的调用将导致发送给定的字符串。没有提到逗号有一些单独的含义。

您可能应该检查返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:14:20.477

你可以做：

```
Serial.write(90);
Serial.write(90); 
```

或者：

```
 byte buf[] = {90, 90};
 Serial.write(buf, sizeof buf); 
```

# objective-c - 理解 Objective-C 实例变量的继承

> ID：10900889
> 
> 赞同：0
> 
> 时间：2012-06-05T16:12:49.110
> 
> 标签：objective-c, inheritance, scope, instance-variables, protected

我想`A`通过在`B`. 由于实例变量默认为`@protected`，因此访问它们应该没问题。`x`但是，我在方法中对实例变量所做的更改`A`不会反映到`B`，反之亦然。

```
@interface A : NSObject {
    X *x;
}

- initWithX:(X *)anX;

@end

@implementation A

- initWithX:(X *)anX
{
    assert(anX != nil);
    if (self = [super init]) {
        x = anX;
    }
    assert(self != nil);
    return self;
}

@end

@interface B : A

@end

@implementation B

- initWithX:(X *)anX
{
    assert(anX != nil);
    if (self = [super initWithX:anX]) {
        assert(x != nil);      <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< FAILS
    }
    return self;
}

@end 
```

**如何在和`x`之间共享变量？`A``B`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:23:46.407

再次检查您的代码。甚至再一次。这段代码**一定**可以工作，真的……这是继承接口和父接口之间的一种基本关系，它应该像你期望的那样运行。

它必须是您从示例中剥离的代码中的某些内容。

# c# - 如何知道文本是否大于文本框？

> ID：10900892
> 
> 赞同：6
> 
> 时间：2012-06-05T16:13:01.007
> 
> 标签：c#, wpf

有没有办法知道我在 wpf 文本框中的文本是否超过了它的长度？

**注意：我说的是像素长度而不是 MAXLENGTH 的字符长度**

所以基本上，如果文本框是 50 像素长。我在里面有一段文字是：“Supercalifragilisticexpialidocious！尽管它的声音是非常恶劣的”

那它不适合那里吗？我想知道它不适合它。但是如果文本框是 900 像素宽。它只是可能。

我目前正在检查类似以下内容。

```
private double GetWidthOfText()
{
    FormattedText formattedText = new FormattedText(MyTextbox.Text,
        System.Globalization.CultureInfo.GetCultureInfo("en-us"),
        FlowDirection.LeftToRight, new Typeface(new FontFamily("Arial"), FontStyles.Normal, FontWeights.Bold, FontStretches.Normal), MyTextbox.FontSize, Brushes.Black);
    return formattedText.Width;
} 
```

...

```
if (textBox.Width < GetWidthOfText()) ... 
```

但我发现它非常老套，而且从来没有真正起作用。我正在努力寻找更可靠的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:55:09.187

您可以从文本框继承，然后创建一个自定义方法来返回您想要的值：

```
public class MyTextBox :TextBox 
{
    public bool ContentsBiggerThanTextBox()
    {
        Typeface typeface = new Typeface(this.FontFamily, this.FontStyle, this.FontWeight, this.FontStretch);
        FormattedText ft = new FormattedText(this.Text, System.Globalization.CultureInfo.CurrentCulture, System.Windows.FlowDirection.LeftToRight, typeface, this.FontSize, Brushes.Black);
        if (ft.Width > this.ActualWidth)
            return true;

        return false;
    }
} 
```

您将 XAML 中的文本框声明为 MyTextBox 而不是 TextBox，然后您可以简单地执行以下操作：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    if (tb.ContentsBiggerThanTextBox())
        MessageBox.Show("The contents are bigger than the box");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-23T16:27:40.643

```
if (textBox.ExtentWidth > textBox.ActualWidth)
{
    // your textbox is overflowed
} 
```

适用于 .NET 4.5.2

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-03T17:32:33.740

如果您的目标不是 .NET 4.5 或更高版本的框架，John Koemer 的回答将不起作用。

如果您像我一样针对 .NET 4.0 框架，请使用此方法：

```
 private bool IsContentsBiggerThanTextBox(TextBox textBox)
    {
        Size size = TextRenderer.MeasureText(textBox.Text, textBox.Font);
        return ((size.Width > textBox.Width) || (size.Height > textBox.Height));
    } 
```

这也适用于多行文本框。因此，如果您的行数多于文本框可以显示的行数，则此方法也可以使用。

请注意，这实际上是在 Windows 窗体应用程序而不是 WPF 应用程序中完成的，因此我不保证它会在 WPF 端工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-09T09:32:24.510

最好是使用隐藏的 TextBlock 并将其 MinWidth 和 Text 属性绑定到相应的 TextBox。将此 TextBlock 保持为隐藏状态。当文本超出边界时，隐藏文本块的宽度将增加，因为它设置了 MinWidth 而不是 Width。在它的 SizeChanged 事件中，我们检查并比较 TextBlock 和 TextBox 的 ActualWidth。如果 TextBlock 的 ActualWidth 大于 TextBox 的 ActualWidth，则表示文本较大。

我已经用多种字体大小检查了这种方法并且效果很好。

```
<TextBox x:Name="textBox" Width="120" AcceptsReturn="False" TextWrapping="NoWrap" />
<TextBlock x:Name="tblk" TextWrapping="NoWrap" Text="{Binding Text, ElementName=textBox}" MinWidth="{Binding Width, ElementName=textBox}" Visibility="Hidden" SizeChanged="TextBlock_SizeChanged" /> 
```

代码隐藏：

```
private void TextBlock_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            //if (e.NewSize.Width > tblk.MinWidth)
            if(tblk.ActualWidth > textBox.ActualWidth)
                tbStatus.Text = "passed";
            else
                tbStatus.Text = "";
        } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-05T16:19:25.917

这应该这样做。

```
 int tblength = txtMytextbox.MaxLength;
        string myString = "My text";
        if (myString.Length > tblength) 
```

我是在 web 表单中完成的，但由于它全部在后端，我认为它应该与 winform 相同。

# android - 从 imageview 将图像保存到 sdcard

> ID：10900893
> 
> 赞同：0
> 
> 时间：2012-06-05T16:13:01.183
> 
> 标签：android, listview, imageview, sd-card

我有自定义一些文本视图和一个图像视图的列表视图。当我长按项目时，我已将该项目信息存储到数据库中，但问题是如何将图像存储在 sdcard 中并将相关路径存储到数据库。图像已经下载为缓存现在我不想重新下载该图像。

有没有办法将该图像存储到 SD 卡。

我正在使用此示例下载列表视图的图像[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

**编辑我得到了解决方案**

**使用此示例时无需额外处理。只需将图像的 Web 路径存储到数据库中，然后将该图像视图传递到具有路径的 ImageLoader 对象中，如果图像存在于相同的 URL 中，它将使用缓存图像**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:54:42.810

不需要额外的过程，使用这个例子，它将关心未来的使用，也适用于相同`URL`的图像。如果图像发现使用该图像，这将从缓存目录中获取，否则下载它然后使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:33:33.347

如果您使用[Prime](https://github.com/DHuckaby/Prime)缓存将是透明的，当您再次请求图像时，它将自动从内存缓存（如果可用）或磁盘缓存中获取它。获取图像也很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:09:47.917

您可以保存通过`Bitmap bitmap=memoryCache.get(url);`使用[save-file-to-sd-card](http://android-er.blogspot.com/2010/07/save-file-to-sd-card.html)获得的位图。

* * *

您还可以从 ImageView 中获取位图（如果需要），例如：

```
//say your ImageView object is i;
i = (ImageView) findViewById(R.id.img);
Drawable d = i.getBackground();
Bitmap bitmap = ((BitmapDrawable)d).getBitmap(); 
```

# ios - iOS 加密 AES128/CBC/nopadding 为什么不起作用？

> ID：10900894
> 
> 赞同：5
> 
> 时间：2012-06-05T16:13:05.900
> 
> 标签：ios, encryption, aes

我有一个应用程序需要使用 AES/CBC/无填充对一些数据进行编码。该应用程序也移植到android上。那里的编码是这样完成的：

```
byte[] encodedKey = getKey();
    SecretKeySpec skeySpec = new SecretKeySpec(encodedKey, "AES");
    AlgorithmParameterSpec paramSpec = new IvParameterSpec(initializationVector);

    Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec, paramSpec);

    int blockSize = cipher.getBlockSize();
    int diffSize = decrypted.length % blockSize;
    System.out.println("Cipher size: " + blockSize);
    System.out.println("Current size: " + decrypted.length);
    if (diffSize != 0) {
      diffSize = blockSize - diffSize;
      byte[] oldDecrypted = decrypted;
      decrypted = new byte[decrypted.length + diffSize];
      System.arraycopy(oldDecrypted, 0, decrypted, 0, oldDecrypted.length);
      for (int i = 0; i < diffSize; i++) {
        decrypted[i + oldDecrypted.length] = " ".getBytes()[0];
      }
      System.out.println("New size: " + decrypted.length);

    }
    return cipher.doFinal(decrypted); 
```

初始化向量看起来像这样：

```
private byte[] initializationVector = new byte[] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }; 
```

在iOS上我有这样的加密：

```
- (NSData *)AES128EncryptWithKey:(NSString *)key 
{
    // 'key' should be 16 bytes for AES128, will be null-padded otherwise
    char keyPtr[kCCKeySizeAES128+1]; // room for terminator (unused)
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

    // fetch key data
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    NSUInteger dataLength = [self length];

    //See the doc: For block ciphers, the output size will always be less than or 
    //equal to the input size plus the size of one block.
    //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, 
                                          kCCAlgorithmAES128, 
                                          0x0000,
                                          keyPtr, 
                                          kCCKeySizeAES128,
                                          NULL /* initialization vector (optional) */,
                                          [self bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesEncrypted);
    if (cryptStatus == kCCSuccess) {
        //the returned NSData takes ownership of the buffer and will free it on deallocation
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    free(buffer); //free the buffer;
    return nil;
} 
```

上述方法是 NSData 类别的一部分。该方法是这样调用的：

```
NSData *data = [@"4915200456727" dataUsingEncoding:NSUTF8StringEncoding];
    NSData *cipher  = [data AES128EncryptWithKey:@"@x#zddXekZerBBw6"];
    NSString *ecriptedString = [NSString stringWithFormat:@"%.*s", [cipher length], [cipher bytes]]; 
```

我遇到的问题是我在 iOS 和 android 上没有收到相同的加密数据。在 iOS 上，加密数据的长度为 0 字节。

您能否就如何使用带有 CBC 且没有填充的 AES128 加密字符串以及可能的示例给出任何指示？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T09:21:29.640

我找到了解决我的问题的方法。为了使加密在没有填充的情况下工作，我必须添加 0x0000 而不是处理的 kCCOptionPKCS7Padding 或 kCCOptionECBMode 。

此外，如果需要编码的数据的长度不是 kCCKeySizeAES128 ( 16 ) 的倍数，则必须调整保存数据的向量的大小，使其具有 kCCKeySizeAES128 的长度倍数，并且空值填充一些东西。我添加了空格。

```
 - (NSData *)AES128EncryptWithKey:(NSString *)key
{
    char keyPtr[kCCKeySizeAES128+1];
    bzero(keyPtr, sizeof(keyPtr));

    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

    int dataLength = [self length];
    int diff = kCCKeySizeAES128 - (dataLength % kCCKeySizeAES128);
    int newSize = 0;

    if(diff > 0)
    {
        newSize = dataLength + diff;
    }

    char dataPtr[newSize];
    memcpy(dataPtr, [self bytes], [self length]);
    for(int i = 0; i < diff; i++)
    {
        dataPtr[i + dataLength] = 0x20;
    }

    size_t bufferSize = newSize + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);

    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt,
                                          kCCAlgorithmAES128,
                                          0x0000, //No padding
                                          keyPtr,
                                          kCCKeySizeAES128,
                                          NULL,
                                          dataPtr,
                                          sizeof(dataPtr),
                                          buffer,
                                          bufferSize,
                                          &numBytesEncrypted);

    if(cryptStatus == kCCSuccess)
    {
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
    }

    return nil;
} 
```

# api - Foursquare API：获取给定区域的详尽场地列表

> ID：10900896
> 
> 赞同：4
> 
> 时间：2012-06-05T16:13:09.093
> 
> 标签：api, foursquare

我正在使用 Foursquare API 来获取某个类别的场地列表。一个重要的要求是清单是详尽的，即包括所有相关点。v2/venues/search API 端点对输出实施了 50 个场所的限制。所以想到的第一个想法是将区域分成几个部分（使用“sw”和“ne”参数），然后组合结果。

显然，点的密度会因位置而发生巨大变化，因此我们需要使用某种自适应算法来灵活调整搜索窗口的大小，使其包含所有点。此外，遇到速率限制的风险也会增加，因此我们可能需要算法在其请求配额用完时停止。

最后，似乎判断搜索窗口是否应该进一步缩小的唯一方法是计算结果中的点数：如果我们有少于 50 个的点，那么我们就有了这部分的完整列表，并且可以继续下一个；否则，我们应该进一步拆分它。这似乎很浪费，因为我们将丢弃中间结果（即我们的搜索树中除了叶子之外的所有结果）。

所以这里有一些问题：

*   这是整理详尽清单的最佳方式吗？也许我缺少一些 API 功能？
*   在这种情况下您会使用任何特定的算法吗？
*   您将如何减少必须丢弃的结果数量？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T12:47:53.423

**一个重要的免责声明是，当您在同一区域执行大量搜索时，foursquare 不喜欢它。**

话虽如此，您应该考虑在场地搜索 api 中尝试使用 categoryId 过滤器。foursquare 上的大部分数据都与食物（餐馆）和夜生活相关。

因此，如果您排除这些（通过包括其他人，无法排除），您可以在更大的区域进行搜索，但仍会得到 50 个以下的结果。

从来没有真正尝试过使用这样的算法，因为 categoryId 过滤效果很好，但理论上，算法很简单，每个 lat/lng 0.001 约为 111 米。

使用小半径（大都市地区约为 200）和三角（扫描）区域进行搜索。

让我们最初执行大量搜索（后来停止这样做）的原因是有时foursquare会在不询问您的情况下过滤掉结果（对我来说，它看起来像错误，对他们来说是算法的一部分）。因此，例如，我会在 50 米半径范围内搜索，找到我想要的地方（我知道我在搜索什么），扩展到 500 米，但没有找到它（得到的结果少于 50 个 - 所以它没有被丢弃，因为我击中了上限，它被退出了，因为???），将我的搜索位置向北移动约 300 米，找到它 -> 零星行为。

我的观点是（以及我们停止进行大量搜索并改变方法的原因），鉴于当前的 API 和当前的使用政策，您想要实现的目标是“完全覆盖”*非常*困难，并且 - > 这真的不重要。在玩了几个月之后，我们发现我们应该查询foursqaure 以了解**我们的**用户正在寻找和需要什么，我们缓存结果 - 随着时间的推移，我们将获得完整的覆盖，也许一开始我们会错过几个点，但从长远来看，它并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:33:15.670

希望这不是您正在做的事情，但作为一个友好的提醒：抓取foursquare 的网站和/或API 是其服务条款非常禁止的。

# sql-server-2008 - 将 org.hibernate.dialect.SQLServer2008Dialect 与 hibernate3-maven-plugin 一起使用时出现不兼容的 API 错误

> ID：10900897
> 
> 赞同：1
> 
> 时间：2012-06-05T16:13:10.670
> 
> 标签：sql-server-2008, sql-server-2005, hbm2ddl, hibernate3-maven-plugin

我之前已经将我的项目设置为使用 hibernate3-maven-plugin 和 org.hibernate.dialect.SQLServerDialect 作为 hibernate.dialect 并且一切正常。

但是当我把方言改成org.hibernate.dialect.SQLServer2005Dialect时，hibernate3-maven-plugin遇到如下错误：

> 执行 org.codehaus.mojo:hibernate3-maven-plugin:2.2:hbm2ddl: java.land.NoSuchMethodError: org.hibernate.dialect.SQLServer2005Dialect.registerColumnType(IJLjava/lang/String;)V 时遇到 API 不兼容

hbm2ddl 是否支持 SQLServer2005Dialect 或 SQLServer2008Dialect（我也遇到与 2008 相同的错误）？

我正在使用 2.2 版的插件和 hibernate.4.1.0.Final 和 JPA 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:38:01.430

刚刚因为 gradle 和 glassfish 的同样错误而失去了几天。我从源代码中添加了自己的 SqlServer2005Dialect，并注释掉了 registerColumnType() 行。从这里，错误变为“java.lang.NoSuchFieldError: INSTANCE”

这是一个更适合[google 的](http://robert-reiz.com/2011/05/07/caused-by-java-lang-nosuchfielderror-instance/)错误，基本上意味着您有 2 组休眠 jar。

在我的例子中，在将 hibernate 放入 gradle 构建之前，我已经通过 glassfish 安装了 hibernate。从 glassfish 卸载休眠修复了我的错误，我现在可以运行 2008 或 2005 的方言。

# java - 使用ehcache处理文件

> ID：10900898
> 
> 赞同：0
> 
> 时间：2012-06-05T16:13:12.790
> 
> 标签：java, spring, caching, ehcache

我对`ehcache`概念及其用法不熟悉。在我的应用程序中，我正在加载许多文件`java.io`（假设一次 100 个。它可能不止于此）并使用多个线程处理这些文件。

从性能的角度来看，我想为此实现一个缓存机制。任何人都可以让我知道我应该怎么做，最好的做法是什么？

PS - 处理文件步骤 1\. 读取文件 2\. 创建 java 文件对象。3.处理文件。4\. 将文件移动到不同的位置。

（我在我的应用程序中使用弹簧）

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:20:51.230

我们正在运营一个高流量门户网站，每月约有 9500 万个 PI。我们使用代理服务器和清漆[https://www.varnish-cache.org/](https://www.varnish-cache.org/)来缓存静态内容。同时，您从应用程序服务器外包缓存，它们有更多的空闲内存可供操作。我认为在您的情况下这也是一个正确的解决方案。

# javascript - 通过 JavaScript 与 NTP 同步时间的良好精度

> ID：10900907
> 
> 赞同：3
> 
> 时间：2012-06-05T16:13:44.213
> 
> 标签：javascript, synchronization, ntp

我想通过 JavaScript 与 NTP 同步时间。客户端可以是普通电脑或智能手机或平板电脑。连接可以是 WLAN 或 3G 等。

我已经找到了这个问题和网站

*   [如何通过javascript获取ntp时间](https://stackoverflow.com/questions/9818411/how-to-get-ntp-time-from-through-javascript)
*   [JavaScript NTP 时间](https://stackoverflow.com/questions/5522191/javascript-ntp-time)
*   [http://jehiah.cz/a/ntp-for-javascript](http://jehiah.cz/a/ntp-for-javascript)
*   [以良好的精度（> 0.5s）在javascript中同步时间（类似NTP）](https://stackoverflow.com/questions/8478179/synchronize-time-in-javascript-with-a-good-precision-0-5s-ntp-like)

第一个和第二个链接使用来自该服务器的时间戳：`http://json-time.appspot.com/time.json` 但日期对象只有第二个精度。我想要一个更好的精度，如果可能的话~ 10 ms。（我知道精度取决于连接和往返时间）
**编辑：** *10 毫秒几乎是不可能的。我想要最精确的偏移量。*

第三个链接显示了一个 JavaScript 库，但它不使用与 ntp 服务器的直接连接。第四个链接的解决方案最接近我想要的。但它用于通过“自己的”服务器同步两个客户端。有没有办法将它直接同步到 ntp 池中`pool.ntp.org`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:42:13.973

NTP 客户端为计算机自己的内部时钟提供服务以进行解析。客户端必须估计 UDP 往返时间并缓慢更改内部时钟*速率*，以最小化平均错误。

# asp.net - ASP.NET 数据集添加关系空引用异常

> ID：10900912
> 
> 赞同：0
> 
> 时间：2012-06-05T16:14:04.023
> 
> 标签：asp.net, data-binding, nullreferenceexception

我使用这篇文章作为对我的两个表 'Comment' 'CommentOtherAuthor' 进行嵌套数据绑定的指南：http: [//support.microsoft.com/kb/306154](http://support.microsoft.com/kb/306154)。一条评论可能有很多作者。我的代码在这里：

**.ASPX：**

```
<asp:Repeater ID="rptComments" runat="server">
    <ItemTemplate>
            <div class="comment-data">
                <h3 class="item">Submitted to <%# GetPageDetails(Eval("nodeid")) %> article on <%# Eval("created") %></strong></h3>
                <p class="item"><strong>Name</strong> <%# Eval("firstname") %> <%# Eval("surname") %></p>
                <p class="item"><strong>Occupation</strong> <%# Eval("occupation") %></p>
                <p class="item"><strong>Affiliation</strong> <%# Eval("affiliation") %></p>
                <p class="item"><strong>Email</strong> <a href='mailto:<%# Eval("email") %>'><%# Eval("email") %></a> <em>Publish email: <%# Eval("publishemail") %></em></p>
                <p class="item"><strong>Competing interests?</strong> <%# Eval("competingintereststext") %>&nbsp;</p>
                <p class="item"><strong>eLetter title</strong> <%# Eval("title") %></p>
                <p><%# Eval("comment").ToString().Replace("\n", "<br/>")%></p>

                <div class="additional-authors">
                    <h3>Additional authors</h3>
                    <asp:Repeater id="rptAdditionalAuthors" runat="server" datasource='<%# ((DataRowView)Container.DataItem).Row.GetChildRows("myrelation") %>' >
                        <ItemTemplate>
                            <%# DataBinder.Eval(Container.DataItem, "[\"firstname\"]")%><br>    
                        </ItemTemplate>
                    </asp:Repeater>
                </div>
            </div>
    </ItemTemplate>
</asp:Repeater> 
```

**代码隐藏：**

```
 private void BindData()
    {

        SqlConnection cnn = new SqlConnection(GlobalSettings.DbDSN);
        SqlDataAdapter cmd1 = new SqlDataAdapter(string.Format("select * from Comment {0} order by created desc", Filter), cnn);

        //Create and fill the DataSet.
        DataSet ds = new DataSet();
        cmd1.Fill(ds, "comments");

        //Create a second DataAdapter for the additional authors table.
        SqlDataAdapter cmd2 = new SqlDataAdapter("select * from CommentOtherAuthor", cnn);
        cmd2.Fill(ds, "additionalAuthors");

        //Create the relation between the comments and additional authors tables.
        ds.Relations.Add(
            "myrelation",
            ds.Tables["Comment"].Columns["id"],
            ds.Tables["CommentOtherAuthor"].Columns["commentid"]
        );

        //Bind the Authors table to the parent Repeater control, and call DataBind.
        rptComments.DataSource = ds.Tables["additionalAuthors"];
        rptComments.DataBind();
    } 
```

但是，当运行它时，它会在行上抛出*System.NullReferenceException*`ds.Relations.Add(`

我真的不确定从哪里开始解决这个问题，因为我在这里已经超出了我的深度。

谁能建议如何使它工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:44:17.273

知道了！没有实际的外键约束加入这些表。有了这些，现在就可以了。

# linux - MongoDB shell 打破了长查询的语法

> ID：10900913
> 
> 赞同：2
> 
> 时间：2012-06-05T16:14:05.443
> 
> 标签：linux, bash, mongodb, mongoid, vi

我有一个需要 3 行的查询。在 mongo shell 中，我可以输入它，所以它在一行，但如果我粘贴它，它会变成 3 行，这会破坏语法。

当我编写一个 JavaScript Shell 脚本来执行一些 mongo 查询时，也会发生同样的事情。

有没有办法解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:36:24.807

听起来您使用的是早期版本 2，其中存在一些多行问题。我认为你正在做的应该工作。如果可以，请尝试升级 Mongo。

# wpf - bing 映射 RouteResponse.Results.RoutePath.Points = null?

> ID：10900914
> 
> 赞同：0
> 
> 时间：2012-06-05T16:14:06.137
> 
> 标签：wpf, bing-maps

我的 Bing 地图服务有点问题。我想在 WPF 应用程序中绘制路线。除非我从 Result 中读取 RoutePath.Points ，否则它一切正常。在字段 Legs 中有所有方向，但在 RoutePath 中没有任何数据。

这很奇怪。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:16:20.100

我已经弄清楚了问题所在。我需要定义 routerequest 的选项，使 routePath 带有点。

```
routeRequest.Options = new RouteOptions() { RoutePathType = RoutePathType.Points }; 
```

你可以关闭这个话题......

# wsdl - ServiceMix + 广播消息

> ID：10900920
> 
> 赞同：0
> 
> 时间：2012-06-05T16:14:24.790
> 
> 标签：wsdl, apache-servicemix

ServiceMix 的新手，我不确定它是否能满足我的需求：

*   我有一个由 wsdl 定义的接口
*   我有几个端点实现了 wsdl 定义的接口
*   我有一项只能将消息发送到一个端点的服务。

服务组合可以执行以下操作：

1.  生产者发送到 servicemix 中的端点（使用 wsdl）。
2.  ServiceMix 将消息广播到不同的端点。

感谢您的建议和/或指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:10:01.373

最简单的方法是使用[Camel Recipient List](http://camel.apache.org/recipient-list.html "骆驼收件人名单")。这将允许您为广播设置静态或动态目的地。

听起来好像您的应用程序不需要在 ServiceMix 使用者处终止 SOAP 消息（将负载反序列化到对象/从对象序列化）。因此，使用 Camel Jetty 代理可以保持非常简单：

上面的链接有更多关于如何配置静态（上面的例子）和动态路由的详细信息。

如果您的应用程序发生更改并且将来确实需要在 ServiceMix 使用者处终止 SOAP 消息，则将 Camel Jetty 使用者端点更改为[Camel CXF](http://camel.apache.org/cxf.html "骆驼CXF")端点并将 bridgeEndpoint 设置为 false。

至于 ServiceMix，您需要启用 Camel Jetty 组件。要默认启用它，您需要编辑 etc/org.apache.karaf.features.cfg 文件并将 camel-jetty 添加到 featuresBoot 属性。这通常是应用程序所需功能的最佳实践。您还可以使用命令“features:install camel-jetty”在 ServiceMix 控制台上安装该功能。

收件人列表功能是默认安装的 Camel Core API 的一部分，如果没有安装，则作为任何其他 Camel 组件的依赖项。

最好的问候，斯科特 ES

# ruby-on-rails - 当我尝试访问属性时，rails fields_for 对象为零

> ID：10900922
> 
> 赞同：1
> 
> 时间：2012-06-05T16:14:35.660
> 
> 标签：ruby-on-rails, activerecord, fields-for

拥有三种型号：

```
class Offer < ActiveRecord::Base
   has_many :offer_items
end

class OfferItem < ActiveRecord::Base
  belongs_to :offer
  belongs_to :partner_product
  accepts_nested_attributes_for :partner_product
end

class PartnerProduct < ActiveRecord::Base
 has_many :offer_items
 accepts_nested_attributes_for :offer_items
end 
```

在编辑offer的表单中，有fields_for可以编辑offer_item

```
<% f.fields_for :offer_items do |offer_item_form| -%>
 <div class='offer_item'>
   <%= render :partial => 'offer_item_fields', :locals => {:offer_item_form => offer_item_form}%>
      </div>
<% end -%> 
```

部分代码块：

```
<%= offer_item_form.object.partner_product.name%> 
```

抛出错误

> nil:NilClass 的未定义方法“名称”
> 
> 提取的源代码（第 29 行附近）：

```
<%= offer_item_form.object.partner_product.name%> 
```

但是当我不问名字时，就像这样

```
<%= offer_item_form.object.partner_product%>
<%= debug( offer_item_form.object.partner_product)%> 
```

进入浏览器：

```
#<PartnerProduct:0x007fa8785ff938>

--- !ruby/ActiveRecord:PartnerProduct 
attributes: 
id: 1
partner_id: 586
name: a
stock_volume: 0
source_price: 0
created_at: 2012-05-31 14:05:47 Z
updated_at: 2012-05-31 14:05:47 Z 
```

我不只是想知道，为什么我无法访问“名称”属性并将 partner_product 更改为 nil，但我真的应该展示它。欢迎任何帮助！谢谢

# google-maps - 重新创建嵌入 Google Maps API 的标准 Google Map

> ID：10900927
> 
> 赞同：2
> 
> 时间：2012-06-05T16:14:54.360
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

因此，最近对常规谷歌地图“嵌入”（iframe）代码缺乏可定制性感到有些失望；我已经开始修补 Google Maps API v3。真的，我想做的只是在地图上显示一个企业的标记，以便您可以单击它并转到 mapsgoogle.com 上的那个“地方”。

差不多了，我只想重新创建下面 iframe 代码的功能。我花了大约一个小时阅读文档，但仅将标记与“地点”相关联似乎非常复杂

**这个地方**

[https://maps.google.com/maps?cid=1311411133662139490](https://maps.google.com/maps?cid=1311411133662139490)

***标准*嵌入_**

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?cid=1311411133662139490&amp;ie=UTF8&amp;hq=&amp;hnear=&amp;t=m&amp;iwloc=A&amp;ll=41.097905,-73.405006&amp;spn=0.006295,0.006295&amp;output=embed"></iframe><br /><small><a href="https://maps.google.com/maps?cid=1311411133662139490&amp;ie=UTF8&amp;hq=&amp;hnear=&amp;t=m&amp;iwloc=A&amp;ll=41.097905,-73.405006&amp;spn=0.006295,0.006295&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

似乎 api 中没有使用`cid`.

**详细说明**

一般来说，我只会将它用于小型企业网站。我对常规的 iframe 嵌入和缺乏可定制性感到沮丧。本质上，我想要一个起点，我可以从中玩东西并大量自定义外观/感觉，但无法在与“地点”数据相关联的标记中放置 - 允许小弹出窗口， ETC..

老实说，在提出这个问题之前，我并没有真正做足够的研究——并且产生了一些误解。 *我认为*，我可能错了，API 仍然是我最终想要使用的，但如果我知道 Rick 的回答中的功能，我可能会解决这个问题，并在学习 gmaps API 上拖延更长时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T01:04:34.663

请允许我解释实现目标的一种选择。我使用 Google Maps API v3 提供的标记和 infoWindow 对象，您可以在我在链接中附加的文档中找到它们。随意跟随我创建的 jsFiddle：http: [//jsfiddle.net/bgvYH/](http://jsfiddle.net/bgvYH/)

首先，你想用它的选项来启动你的地图——我假设你知道下面代码片段中的不同变量代表什么：

```
var myLatlng = new google.maps.LatLng(41.097905,-73.405006);
  var myOptions = {
  zoom: 16,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

如果您想根据自己的喜好自定义地图，请查看您可以在 API 参考中设置的不同选项，您将在 myOptions 对象中设置这些选项（[https://developers.google.com/maps /documentation/javascript/reference#MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)）。注意：我将地图的中心设置为餐厅的纬度/经度坐标 - 我取自您在 iframe 中提供的 URL `ll=41.097905,-73.405006`。

现在您接下来要做的是确定要在 infoWindow 中显示的内容，因此餐厅信息：

```
var contentString = "<div id='content'>";
    contentString += "<div id='title'>Mr. Frosty's Deli and Grill</div>";
    contentString += "<div id='info'><p>10 1st Street</p><p>Norwalk, CT 06855</p><p>(203) 956-5767</p><p><a href='http://thebeachburger.com/'>thebeachburger.com‎&lt;/a></p></div></div>"; 
```

您甚至可能最终从数据库或 JSON 对象中提取这些信息，具体取决于您对该项目的深入程度（现在我将其作为静态 HTML）。

接下来我们初始化 infoWindow 对象并将 contentString 设置为 infoWindow 的 content 选项。您可以在此处自定义其他选项（就像地图选项一样，再次查看 InfoWindowOptions 的参考：[https](https://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions) ://developers.google.com/maps/documentation/javascript/reference#InfoWindowOptions ）

```
var infowindow = new google.maps.InfoWindow({
    content: contentString
}); 
```

设置好 infoWindow 对象后，初始化标记对象 - 这会将气泡放置在地图上。再一次，您在初始化时设置标记的选项，就像您对地图对象和 infoWindow 对象所做的那样 - 您可以通过查看参考进一步自定义它（我认为那里甚至还有一个选项用于您可以在其中使用自定义图标的标记 - 您可以在这里获得非常有创意的东西）。

```
var marker = new google.maps.Marker({
  position: myLatlng,
  map: map,
  title:"Mr. Frosty's Deli and Grill"
}); 
```

最后，您需要将 Marker 和 infoWindow 绑定在一起 - 这样当用户单击标记时，信息就会弹出。这是通过使用事件侦听器来实现的，您可以在标记变量上侦听“单击”操作。阅读此文档以获取有关 google 地图[https://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events)上的事件的信息。同样，通过 API 参考查看您可以在对象上监听的不同事件。

```
google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
}); 
```

应该这样做，您应该有一个替代您包含的 iframe 的工作 - 除了现在您可以自定义地图以及您在其上执行的操作，无论您想要什么。在 jsFiddle 中，我还包含了一些样式，只是为了让 infoWindow 中的内容看起来不错。

* * *

Now, I want to let you know - I believe there is another option to what your looking for - but I have yet to experiment with this API. It is the Google Places API, which you'll have register for. But from what I read through the documents, I think you may be able to achieve what you want to do. Have a look at it ( [https://developers.google.com/maps/documentation/places/](https://developers.google.com/maps/documentation/places/) ), and see what's good.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:14:05.520

看起来这是通过“我的地点”创建并公开的。如果您不想弄乱 API，那么这是您最好的选择。

访问 maps.google.com，点击“我的地点”和“创建地图”。自定义并获取嵌入代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:59:01.827

如果地图不需要交互（除了点击操作），请使用[静态地图](https://developers.google.com/maps/documentation/imageapis/)。它只是一个图像，因此您可以将其包裹在一个精确指向您想要的位置的锚中。

# android - 使用系统权限静默卸载应用程序

> ID：10900928
> 
> 赞同：13
> 
> 时间：2012-06-05T16:14:54.433
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-firmware

我的应用程序具有系统权限。它将在固件内部，现在它位于 /system/app

我可以通过这篇文章静默安装应用程序

[以编程方式安装/卸载 APK（PackageManager 与 Intents）](https://stackoverflow.com/questions/6813322/install-uninstall-apks-programmatically-packagemanager-vs-intents)

**有效的示例应用程序**

[http://paulononaka.wordpress.com/2011/07/02/how-to-install-a-application-in-background-on-android/](http://paulononaka.wordpress.com/2011/07/02/how-to-install-a-application-in-background-on-android/)

但我仍然无法以同样的方式卸载应用程序。我尝试像安装示例一样使用反射。

```
public ApplicationManager(Context context) throws SecurityException, NoSuchMethodException {

    observer = new PackageInstallObserver();
    pm = context.getPackageManager();

    Class<?>[] types = new Class[] {Uri.class, IPackageInstallObserver.class, int.class, String.class};
    Class<?>[] uninstalltypes = new Class[] {String.class, IPackageInstallObserver.class, int.class};
    method = pm.getClass().getMethod("installPackage", types);
    uninstallmethod = pm.getClass().getMethod("deletePackage", uninstalltypes);
}

public void uninstallPackage(String packagename) throws IllegalArgumentException, IllegalAccessException, InvocationTargetException {
        uninstallmethod.invoke(pm, new Object[] {packagename, observer, 0});
    }
    public void installPackage(Uri apkFile) throws IllegalArgumentException, IllegalAccessException, InvocationTargetException {
        method.invoke(pm, new Object[] {apkFile, observer, INSTALL_REPLACE_EXISTING, null});
    } 
```

我添加了 uninstallPackage 方法并编辑了 ApplicationManager 方法。仍然无法正常工作。

当我运行它时，我找不到方法（在调用“deletePackage”行上）。

**这不是我的更改的工作项目：** [https ://dl.dropbox.com/u/1928109/InstallInBackgroundSample.zip](https://dl.dropbox.com/u/1928109/InstallInBackgroundSample.zip)

这是函数的描述：[http](http://www.androidjavadoc.com/1.0_r1_src/android/content/pm/PackageManager.html#deletePackage(java.lang.String) ://www.androidjavadoc.com/1.0_r1_src/android/content/pm/PackageManager.html#deletePackage(java.lang.String, android.content.pm.IPackageDeleteObserver, int)

参数没问题。似乎我应该指定 DeletePackageObserver 类而不是 InstallPackageObserver。但我不知道该怎么做（我没有这样的课程）。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-10T09:58:47.303

这是我的做法：

**ApplicationManager.java（更改部分）：**

```
private PackageInstallObserver observer;
private PackageDeleteObserver observerdelete;
private PackageManager pm;
private Method method;
private Method uninstallmethod;

 class PackageDeleteObserver extends IPackageDeleteObserver.Stub { 

    public void packageDeleted(String packageName, int returnCode) throws RemoteException {
        /*if (onInstalledPackaged != null) {
            onInstalledPackaged.packageInstalled(packageName, returnCode);
        }*/
    }
}
public ApplicationManager(Context context) throws SecurityException, NoSuchMethodException {

observer = new PackageInstallObserver();
observerdelete = new PackageDeleteObserver(); 
pm = context.getPackageManager();

Class<?>[] types = new Class[] {Uri.class, IPackageInstallObserver.class, int.class, String.class};
Class<?>[] uninstalltypes = new Class[] {String.class, IPackageDeleteObserver.class, int.class};

    method = pm.getClass().getMethod("installPackage", types);
      uninstallmethod = pm.getClass().getMethod("deletePackage", uninstalltypes);
}
public void uninstallPackage(String packagename) throws IllegalArgumentException, IllegalAccessException, InvocationTargetException {
uninstallmethod.invoke(pm, new Object[] {packagename, observerdelete, 0});
} 
```

**PackageDeleteObserver.java（在 android.content.pm 中）：**

```
package android.content.pm;

public interface IPackageDeleteObserver extends android.os.IInterface {

    public abstract static class Stub extends android.os.Binder implements android.content.pm.IPackageDeleteObserver {
        public Stub() {
            throw new RuntimeException("Stub!");
        }

        public static android.content.pm.IPackageDeleteObserver asInterface(android.os.IBinder obj) {
            throw new RuntimeException("Stub!");
        }

        public android.os.IBinder asBinder() {
            throw new RuntimeException("Stub!");
        }

        public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags)
                throws android.os.RemoteException {
            throw new RuntimeException("Stub!");
        }
    }

    public abstract void packageDeleted(java.lang.String packageName, int returnCode)
            throws android.os.RemoteException;
} 
```

也不要忘记**为清单添加权限**：

```
<uses-permission android:name="android.permission.DELETE_PACKAGES"/> 
```

**工作示例项目**（apk 需要放在设备上的“/system/app”路径中）**：** [http ://www.mediafire.com/file/no4buw54ed6vuzo/DeleteInBackgroundSample.zip](http://www.mediafire.com/file/no4buw54ed6vuzo/DeleteInBackgroundSample.zip)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T01:04:04.990

这是该方法的定义方式：

```
 public abstract void deletePackage(
             String packageName, IPackageDeleteObserver observer, int flags); 
```

要使用反射调用它，您需要以下内容：

```
Class<?>[] uninstalltypes = new Class[] {String.class, 
         IPackageDeleteObserver.class, int.class};
uninstallmethod = pm.getClass().getMethod("deletePackage", uninstalltypes); 
```

注意观察者的类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T02:10:10.297

如果您将应用程序内置到系统映像中，并且您正在使用内部 API，那么您最好停止假装自己是第三方应用程序并链接到 SDK。针对完整平台 .jar 构建并直接使用这些 API。无论如何，您都想这样做，因为这些是私有 API，因此它们可以并且确实会改变。您想根据实际声明它们的内容进行构建，因此如果它们确实发生了变化，您将在构建过程中发现这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T07:47:09.080

在 android 2.3.x 中，接口 IPackageDeleteObserver 在方法 packageDeleted 中有所不同。

# java - 当网络连接失败时如何处理 Java Singletons？

> ID：10900931
> 
> 赞同：0
> 
> 时间：2012-06-05T16:15:02.637
> 
> 标签：java, singleton, memcached, spymemcached

我为我的类创建了一个包含 MemcachedClient 实例的 Singleton（这可以是任何需要连接到服务器的对象，但我提供了一个具体示例）。我在静态初始化块中初始化 MemcachedClient。如果 MemcachedClient 由于连接错误而无法创建实例，这意味着我的类现在毫无价值，因为它有一个空的 MemcachedClient 实例。

我的问题：这种情况的最佳解决方案是什么？其他人如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:28:31.240

这个问题（如标题中所述）太宽泛了，这取决于单例的用途。

就您而言，一个明显的问题是：如果初始化失败，您能否期望该问题会在不久的将来得到解决？继续尝试（重新设计以使您的应用程序不会以奇怪的方式向下崩溃）而不是仅仅重新启动您的应用程序的成本是多少？

如果您不希望错误能够轻松解决，只需使您的应用程序崩溃（使用正确的日志/警报/通知）。如果您希望它继续运行直到问题解决，那么步骤将是：

1）将初始化传递给单例的构造函数（如果可以控制对构造函数的访问，为什么要把它放在静态块中）。

2a) 当构造函数失败时，调用`getInstance`将返回 null。修改您的应用程序以使其能够处理。

2b) 如果存在问题，请在没有正确初始化的情况下创建单例。在解决初始化问题/对象已初始化之前，对该对象的方法的调用不会执行任何操作。修改您的应用程序以能够处理这些虚拟方法。这种方法更快但更复杂。

3）当请求一个新的实例（如果是2a）或者一个方法被调用（如果是2b）时，再次检查对象是否可以被初始化。

将之前所有的成本与问题解决后重新启动应用程序的成本进行比较。

# vim - Vimscript：如何获得操作系统版本？

> ID：10900933
> 
> 赞同：-1
> 
> 时间：2012-06-05T16:15:12.043
> 
> 标签：vim

即使它与[this](https://stackoverflow.com/questions/2783224/is-there-a-command-in-vimscript-to-get-the-current-operating-system)和[this](https://stackoverflow.com/questions/6146633/vimscript-how-do-i-get-the-os-that-is-running-vim) question类似，我也需要在vim运行时知道操作系统的当前版本。前面的问题对我没有帮助，因为它们描述了可执行文件的功能集；我需要的是一个函数来返回操作系统版本的名称或编号（例如，在这个[寡妇版本图表](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx)中列出）。

有吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:07:33.633

我不知道 Windows 但在 Mac OS X 上你可以这样做：

```
$ sw_vers -productVersion 
```

在 Ubuntu 上，您可以执行以下操作：

```
$ lsb_release -rs 
```

这个快速破解似乎有效，您必须根据您的需要对其进行调整：

```
function! GetSysVersion()
  let os=substitute(system('uname'), '\n', '', '')
  if os == 'Darwin' || os == 'Mac'
    let sys_version=substitute(system('sw_vers -productVersion'), '\n', '', '')
  elseif os == 'Linux'
    let sys_version=substitute(system('lsb_release -rs'), '\n', '', '')
  endif
  echo sys_version
endfunction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:09:33.663

（只需制作30个字符）

`echo exec('cat "/etc/issue"')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T08:09:28.687

要调用 Win32 函数`GetVersionEx()`，您必须编写一个公开该函数的 DLL，并通过 Vim 从 Vim 调用它`libcall()`。有关所有实现细节，请参阅

```
:help libcall() 
```

或者，您可以编写一个可执行文件并使用`system()`它来解析其输出。

# mongodb - MongoDB 存储过程不在 javascript 中

> ID：10900937
> 
> 赞同：3
> 
> 时间：2012-06-05T16:15:44.427
> 
> 标签：mongodb, stored-procedures, triggers

我有一些集合，我想对该集合的每个插入执行操作。问题是执行此操作的代码是用 Java 编写的。在 Oracle 中，可以将 Java 甚至 C 代码包装到 PL/SQL 过程中，然后在触发器中使用这个过程。在 CouchDB 中，我们可以编写一个视图。**MongoDB 最接近的类比是什么？** 我能想到的最好的可能性是将我的代码包装到 REST 服务器中，然后使用存储的 javascript 与之交互。

我已经看到[了这个](https://stackoverflow.com/questions/3876049/mongodb-stored-procedure-equivalent)问题，但是由于依赖于 java 库，我不能在我的工作流程中只使用 javascript，如果还有其他方法可以做的话，我也不想与 mongodb 一起运行新的繁重服务这。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T18:09:35.980

关于您的请求，有很多话要说：

> 我有一些集合，我想对该集合的每个插入执行操作。

1）您在这里要求的并不是真正的“存储过程”，而是真正的“数据库触发器”。MongoDB 不提供任何类型的“数据库触发器”功能。

这与 MongoDB 的总体设计目标是一致的，即提供非常快速、可扩展的数据存储，而无需传统 DBMS 系统的沉重负担。有关 MongoDB 设计目标的更多详细信息，请参阅此演示文稿：[http ://www.10gen.com/presentations/mongosf2011/whymongodb](http://www.10gen.com/presentations/mongosf2011/whymongodb)

2) 如果您想在每次插入时执行一些数据处理，则需要在 MongoDB 连接的客户端进行。这必然涉及在您的应用程序中编写一些代码。

3) 我建议您尽可能避免在 mongod 服务器中运行 JavaScript。JavaScript 在服务器端进行解释，因此您的查询速度会受到影响。另外，在mongod服务器中运行的所有JavaScript都是单线程的，所以没有任何JavaScript执行的并发。

我希望我有一个更好的答案给你。

# css - 为什么我的超链接没有改变颜色或下划线？

> ID：10900942
> 
> 赞同：0
> 
> 时间：2012-06-05T16:16:09.143
> 
> 标签：css, visual-studio-2010, visual-studio

为什么我的超链接没有改变颜色或下划线？我在标准 VS 2010 站点中的 CSS 中有：

```
a:link, a:visited
{
color: #034af3;
outline: none;
}

a:hover
{
color: #1d60ff;
text-decoration: none;
outline: none;
}

a:active
{
color: #034af3;
outline: none;
}

p
{
margin-bottom: 10px;
line-height: 1.6em; 
```

}

我究竟做错了什么？我在错误的地方吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:22:06.540

首先要做的是排除以后没有应用其他样式规则来覆盖您的样式，或者没有更早的更具体（或使用`!important`）不会被您的样式覆盖的样式规则。

还要确保您的 CSS 在 HTML 中的正确位置。

确保链接中没有其他元素（例如 a `span`）可能应用了覆盖样式的`a`样式。

还有许多其他的调试步骤需要执行，但我希望这能让你找到正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:24:12.423

您已将其设置为在悬停时不显示任何文本装饰。

带有悬停装饰：http: [//jsfiddle.net/KbZNb/](http://jsfiddle.net/KbZNb/)

没有悬停装饰：http: [//jsfiddle.net/KbZNb/1/](http://jsfiddle.net/KbZNb/1/)

看起来它正在改变颜色，但由于`#1d60ff`和`#034af3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:27:05.947

颜色几乎相同，这就是您没有看到变化的原因。将 a:hover 更改为 #ff0000 并查看结果

```
a:hover {color:#ff0000} 
```

# excel - 将数据从 MS Word 移动到 Excel

> ID：10900945
> 
> 赞同：1
> 
> 时间：2012-06-05T16:16:17.923
> 
> 标签：excel, vba, ms-word

我有一个包含 400 个多项选择题的 Microsoft Word 文档。我需要将所有这些文本放入 Microsoft Excel 图表中，我认为如果我能够有一个宏允许我选择所有`a.`以`a.`.

我尝试寻求帮助，并被告知使用以下宏，但宏不执行任何操作。我只希望宏只选择所有文本。如果我要在 Microsoft Word 中手动执行此操作，我将按住`ctrl`并突出显示以第一个段落对象开头`a.`和结尾的所有文本。

```
 Sub Aselection()
'
' Aselection Macro
'

Dim pgh As Paragraph
For Each pgh In ThisDocument.Paragraphs
With pgh
If Left(.Range.Text, 2) = "a." And Left(Right(.Range.Text, 3), 2) = "a." Then
Debug.Print .Range.Text
End If
End With
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:41:34.253

`ThisDocument`通常是指包含执行代码的模板文档。改为使用`ActiveDocument`。

同样正如@assylias 在他的评论中所说，`Debug.Print`仅用于代码调试目的。将整行替换为`.Range.Select`.

**这应该有效：**

```
Sub Aselection()

    Dim o As Object
    Dim pgh As Paragraph

    Set o = CreateObject("excel.application")
    o.workbooks.Open ("E:\Aashay Data\Projects\Excel\Carton\Screen Printing.xlsx")
    o.ActiveWorkbook.worksheets.Add.Name = "x"
    o.ActiveWorkbook.worksheets("x").Activate

    For Each pgh In ActiveDocument.Paragraphs
        With o.ActiveWorkbook.worksheets("x")
            Debug.Print pgh.Range.Text
            If Left(pgh.Range.Text, 2) = "a." And Left(Right(pgh.Range.Text, 3), 2) = "a." Then
                .Cells(i, 2).Value = pgh.Range.Text
                i = i + 1
            End If
        End With
    Next
    o.Quit

End Sub 
```

编辑：在审查了这个并测试了一个 lorem ipsum 文本之后，我意识到 Word VBA 不允许您选择多个不连续的段（有关更多信息，请参阅 MS 支持文章[KB288424](http://support.microsoft.com/kb/288424/n)）。我想最简单的方法是简单地导出到 debug.print 所在的 excel，并且我已经相应地编辑了我的代码。

# objective-c - 在 iOS 中转换 UIView 时遇到问题

> ID：10900946
> 
> 赞同：0
> 
> 时间：2012-06-05T16:16:41.700
> 
> 标签：objective-c, ios, casting

我有一个名为`FooView`的类，它是的子类，`UIView`我正在尝试将`UIView`对象转换为`FooView`.

我这样做如下

```
FooView *myView = (FooView*) MyViewController.view
NSLog(@"Leg is a class of %@",NSStringFromClass([myView class])); // Get UIView here. 
```

的 ivar`MyViewController`是一种`UIView`类型。

我得到一个 UIView 结果，知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:21:56.763

强制转换是一种编译时操作。它不会神奇地改变对象的类型。它主要用于编译时检查和一点运行时魔法。`myView`仍然是一个`UIView`，不是一个`FooView`。

您问题中的这两行应该会给您答案：

> MyViewController 的 ivar 是一个 UIView 类型。我得到一个 UIView 结果

所有 Objective-C 对象都有一个指针`isa`，它指向一个类型为 的对象`Class`。强制转换不会更改该指针，也不会更改对象的大小。

如果您想使用 a `FooView`，您需要更改控制器中的属性类型，如果您使用的是 Interface Builder，请在右侧的检查器中更改 UIView 的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:40:04.257

您可以在 MyViewController 中创建一个 loadView 方法，该方法创建一个 FooView 并将其设置为 self.view。它适用于您不使用 NIB 时。

# php - 使用 php 脚本在 Windows 上复制图像而不修改创建日期

> ID：10900947
> 
> 赞同：0
> 
> 时间：2012-06-05T16:16:41.900
> 
> 标签：php, windows

我创建了一个小的 php 脚本来在 Windows 中按文件夹/日期对图片进行分类。一切都很好，文件去了好地方，但它改变了我的“创建日期”，我想保持不变。

我使用了一个非常简单的 php copy() 函数。

我使用了 touch() + filectime 但仍然无法更改文件的创建日期

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:27:06.120

来自 php.net：

```
It's worth noting that copy() sets the destination file's last modified time/date. 
```

使用这个有什么问题？

```
clearstatcache();
$oldstamp = filemtime("file.txt");
copy("file.txt","newfolder/file.txt");
touch("newfolder/file.txt",$oldstamp); 
```

# c# - Java 通过 comm/串行端口发送消息

> ID：10900953
> 
> 赞同：2
> 
> 时间：2012-06-05T16:17:00.417
> 
> 标签：c#, java, arduino

有没有办法使用 java 通过计算机上的 comm 端口发送和接收消息？我有一个 arduino 在 USB 端口上监听消息。我想通过 java gui 而不是 arduino 处理 gui 与它交谈。我有什么方法可以实现这一目标？C# 也可以！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:24:22.827

我使用 RXTX lib 在 java 中为 arduino 编写了应用程序。您可以在 RXTX 主页和其他网站上阅读许多教程。例如： [http](http://arduino.cc/playground/Interfacing/Java) ://arduino.cc/playground/Interfacing/Java http://rxtx.qbang.org/wiki/index.php/Examples

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:54:53.710

[jUSB](http://www.steelbrothers.ch/jusb/)可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:56:42.100

只要您在受支持的平台（例如 Solaris）上，“JavaComm”就可以很好地工作。您有操作系统要求吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T17:13:09.517

我只是在阅读[这个网站](http://arduino.cc/playground/Main/DisablingAutoResetOnSerialConnection)，并认为这个小问题可能会在你开始试验时咬你一口。基本上发生的事情是每次启动串行通信时，arduino 都会自动重置。该站点详细描述了该问题，并根据您的技能和/或舒适度提供了几种解决方法。玩得开心黑客。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T07:50:17.330

@GETah我很确定ardruino只是通过USB端口使用串行。它仍然通过与 ardruino 的 USB 连接创建一个 COM 端口。

# java - 从同一个 Jetty 服务器同时提供 Thrift/TServlet 和静态文件

> ID：10900955
> 
> 赞同：0
> 
> 时间：2012-06-05T16:17:05.527
> 
> 标签：java, servlets, jetty, thrift, embedded-jetty

我正在尝试从同一 Jetty 服务器提供静态文件和 Thrift 服务。到目前为止，我有以下代码：

```
val server = new Server();
val connector = new SelectChannelConnector();
connector.setPort(4567);
server.addConnector(connector);

val servlet_handler = new ServletContextHandler(server,"/thrift",ServletContextHandler.SESSIONS);
servlet_handler.addServlet(new ServletHolder(new SomeThriftServlet()), "/thrift/*");

val resource_handler = new ResourceHandler();
resource_handler.setWelcomeFiles(new String[]{ "index.html" });
resource_handler.setResourceBase(".");

val handlers = new HandlerList();
handlers.setHandlers(new Handler[] { resource_handler, servlet_handler, new DefaultHandler() });
server.setHandler(handlers);

server.start();
server.join(); 
```

静态文件提供得很好，但 Thrift 服务不断给我 404 错误。我究竟做错了什么？

* * *

**注意**：提供静态文件的代码取自[这个问题](https://stackoverflow.com/questions/10284584/serving-static-files-w-embedded-jetty)，“val”类型由[项目 lombok](http://projectlombok.org/)处理，但我把它们留在那里，因为我认为当前代码更具可读性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:00:42.633

问题的症结在于您必须将其包装`ResourceHandler`在自己的上下文中，然后为两个（或更多）上下文提供自己的基本路径。这是因为 ResourceHandler 没有它自己的基本路径。

在此之后，您可以在 a 中向服务器提供上下文`ContextHandlerCollection`，它根据最长匹配路径前缀确定要使用的上下文。

```
Server server = new Server();

val connector = new SelectChannelConnector();
connector.setPort(4567);
server.addConnector(connector);

val thr = new SomeThriftServlet();

val ct0 = new ServletContextHandler(ServletContextHandler.SESSIONS);
ct0.setContextPath("/thr");
ct0.addServlet(new ServletHolder(thr), "/*");

val rsc = new ResourceHandler();
rsc.setDirectoriesListed(true);
rsc.setWelcomeFiles(new String[]{ "index.html" });
rsc.setResourceBase(".");

val ct1 = new ContextHandler();
ct1.setContextPath("/rsc");
ct1.setHandler(rsc);

val contexts = new ContextHandlerCollection();
contexts.setHandlers(new Handler[] {ct0, ct1, new DefaultHandler() });

server.setHandler(contexts);

server.start();
server.join(); 
```

# java - 使用 DateFormat.getDateInstance 在 Java 中进行日期本地化

> ID：10900956
> 
> 赞同：1
> 
> 时间：2012-06-05T16:17:11.130
> 
> 标签：java, date, date-format

我有一个必须本地化的日期。下面的代码返回**5/1/12 19:06:34**但我想要的结果是**05/01/12 19:06:34** 你能告诉我如何管理这个。

```
 private String localizeDate(String date){ //Format is 2012-05-01 19:30:49

    Locale loc = DataContextHolder.getDataContext().getLocale();
    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", loc);

    Date parsed=null;
    try {
        parsed = formatter.parse(date);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT, loc);

    String localizedDate = df.format(parsed) + " " + date.substring(11, 13) + ":"
            + date.substring(14, 16) + ":"
            + date.substring(17, 19);

    return localizedDate;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:25:15.543

您可以通过减少该特定元素的连续模式字母的数量来避免前导零。连续的多个模式字母告诉日期格式化程序，您至少希望有那么多字符来表达该值。

在您的示例中，以下内容应该可以解决您的问题。

```
new SimpleDateFormat("y-M-d H:m:s", loc); 
```

[在`SimpleDateFormat`文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)中查找更多信息。

为清楚起见，请参阅以下示例。

```
SimpleDateFormat a = new SimpleDateFormat("yyyyy-MMMM-dddd HHH:mmmm:sssss");
SimpleDateFormat b = new SimpleDateFormat("y-M-d H:m:s");

System.out.println(a.format(new Date())); 
// Prints 02012-June-0005 012:0027:00026
System.out.println(b.format(new Date()));
// Prints 12-6-5 12:27:26 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T11:16:50.310

# 问题

您的代码出现了多个问题。

## 时区

一个问题是您在不处理时区的情况下进行本地化。解析将应用 JVM 的默认时区。这意味着在具有不同时区设置的不同计算机上运行会产生不同的结果。通常最好指定一个时区而不是依赖默认值。

## 格式化，而不是本地化

另一个问题是，如果您真正进行本地化，您将不会指定格式的详细信息。您将让语言环境驱动格式化，无论适合该语言环境和用户自己的本地化设置。

## 避免使用 java.util.Date

另一个问题是您正在使用与 Java 捆绑在一起的 java.util.Date 类。该类及其兄弟 java.util.Calendar 是出了名的麻烦。避开他们。使用[Joda-Time](http://www.joda.org/joda-time/)框架或 Java 8 中的新[java.time.* 包](http://download.java.net/jdk8/docs/api/java/time/package-summary.html)。

# ISO 8601

您的输入字符串非常接近标准[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式，如下所示：`2014-02-07T07:06:41+03:00`. 您的文本只是缺少`T`中间的 a 和时区偏移量。

[Joda-Time](http://www.joda.org/joda-time/)框架默认使用ISO 8601。所以用“T”替换那个空格可以让你将字符串直接传递给[`DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)构造函数。不需要格式化程序和解析，因为[DateTime 构造函数](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#DateTime%28java.lang.Object,%20org.joda.time.DateTimeZone%29)会自动为您完成这项工作。

请注意，包括或省略从字符串输入末尾开始的时区偏移会改变构造 DateTime 的行为。如果没有偏移量，则字符串被解析为好像它发生在传递的时区内的指定时间（第二个参数，请参见下面的代码示例）。另一方面，如果您*在*输入中包含偏移量，则字符串会被解析为好像它发生在偏移量位置的指定时间，然后将时间*调整*为传递的时区参数。

# Joda-Time 示例

这是 Joda-Time 2.3 中的一些示例代码。

```
DateTimeZone timeZone = DateTimeZone.forID( "Europe/Istanbul" );

String inputOriginal = "2012-05-01 19:30:49";
String input = inputOriginal.replace( " ", "T" );

DateTime dateTime = new DateTime( input, timeZone );
// Or if your input is UTC/GMT (no time zone offset), pass a predefined DateTimeZone constant.
//DateTime dateTime = new DateTime( input, DateTimeZone.UTC ); 
```

我们手头有我们的日期时间值。现在我们继续从该日期时间生成格式化字符串。我们通过使用 Joda-Time 的[Locale](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html)敏感格式化工具来做到这一点。请注意，不仅格式已本地化，月份和日期名称的文本也已本地化为适当的语言。

```
// Create a formatter from a two-character style pattern.
// The first character is the date style, and the second character is the time style. 
// Specify a character of 'S' for short style, 'M' for medium, 'L' for long, and 'F' for full. 
// A date or time may be ommitted by specifying a style character '-'. 
java.util.Locale locale = new java.util.Locale( "tr", "TR" ); // Turkey chosen as an example.
String output_ShortShort = DateTimeFormat.forStyle( "SS" ).withLocale( locale ).print( dateTime );
String output_LongShort = DateTimeFormat.forStyle( "LS" ).withLocale( locale ).print( dateTime ); 
```

转储到控制台...</p>

```
System.out.println( "input: " + input );
System.out.println( "dateTime: " + dateTime );
System.out.println( "dateTime in UTC/GMT: " + dateTime.toDateTime( DateTimeZone.UTC ) );
System.out.println( "output_ShortShort: " + output_ShortShort );
System.out.println( "output_LongShort: " + output_LongShort ); 
```

运行时……</p>

```
input: 2012-05-01T19:30:49
dateTime: 2012-05-01T19:30:49.000+03:00
dateTime in UTC/GMT: 2012-05-01T16:30:49.000Z
output_ShortShort: 01.05.2012 19:30
output_LongShort: 01 Mayıs 2012 Salı 19:30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:22:56.823

您需要选择适当的日期格式化程序。请在此处阅读文档：

[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# asp.net - 在 web.config 中写入连接字符串是否安全？

> ID：10900957
> 
> 赞同：3
> 
> 时间：2012-06-05T16:17:11.793
> 
> 标签：asp.net, web-config, connection-string, security

在 ASP.net 应用程序的 web.config 中写入连接字符串是否安全。该应用程序将使用 2 个数据库，我认为可以轻松检索连接字符串。任何人都可以建议一个安全的地方（web.config 或其他文件）来编写连接字符串，除了加密它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:21:10.940

`Web.config`是正确的地方。如果您担心的话，您可以加密连接字符串。在 Web.config 中加密连接字符串，它已经在 ASP.NET 中得到支持，而且您似乎已经知道...

[链接供参考。](http://msdn.microsoft.com/en-us/library/dx0f3cf2%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T16:21:58.527

如果您担心外部“黑客”窃取您的 web.config 文件，那么存储它的位置并没有什么不同，因为如果他们可以访问 web.config 文件，他们可能可以访问任何其他位置无论如何，您都可以存储 CS。

另一方面，如果您想保护免受内部威胁，请尝试将其保存到单独的文件中（即使是简单的文本文件也可以）并赋予该文件特殊的访问权限，仅允许您和应用程序访问，而不允许其他人访问。此外，您也许可以对 web.config 本身做同样的事情。

# f# - F# - 函数顺序

> ID：10900961
> 
> 赞同：2
> 
> 时间：2012-06-05T16:17:28.820
> 
> 标签：f#

> **可能重复：**
> [如何让两个方法互相调用？](https://stackoverflow.com/questions/680606/how-to-have-two-methods-calling-each-other)

我需要编写 2 个相互调用的函数。（里面有条件 - 所以他们最终会停止）

```
let x () : int =
   ...
   if (------) then
     y num
   ...

let y () : int =
   ...
   if (------) then
     x num
   ... 
```

问题是，据我了解，F# 按出现顺序评估函数..所以写这个会产生编译错误......

有没有办法解决这个问题？那么这两个函数会互相认识吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T16:22:22.343

您需要[相互递归函数](http://msdn.microsoft.com/en-us/library/dd233232.aspx)`and`的关键字：

```
let rec x num =
   ...
   if (------) then
     y num
   ...

and y num =
   ...
   if (------) then
     x num
   ... 
```

# linux - 在 Linux 内核模块中制作 ICMP 数据包

> ID：10900964
> 
> 赞同：3
> 
> 时间：2012-06-05T16:17:38.190
> 
> 标签：linux, network-programming, linux-kernel

我正在尝试使用 ICMP 协议，并为 linux 创建了一个内核模块，用于分析 ICMP 数据包（仅当 ICMP 代码字段为幻数时才处理数据包）。现在要测试这个模块，我必须创建一个 ICMP 数据包并将其发送到运行此分析模块的主机。事实上，如果我能在内核本身（作为一个模块）实现它会很好。我正在寻找内核中的 packetcrafter 之类的东西，我在 google 上搜索了很多解释数据包生命周期的文章，而不是创建它的教程。用户空间packetcrafters 将是我最后的手段，那些高度灵活的工具也是如此，比如我可以设置ICMP 代码等。而且我并不担心内核恐慌:-) !!!!!! 欢迎任何包制作想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:58:03.583

Linux 内核包含一个数据包生成器工具**pktgen**，用于使用预配置的数据包测试网络。该模块的源代码位于 net/core/pktgen.c

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:46:52.657

先生，我强烈建议您不要使用内核模块来构建 ICMP 数据包。

您可以使用用户空间原始套接字来制作 ICMP 数据包，甚至可以逐字节构建 IP 标头本身。因此，您可以尽可能灵活地使用它。

请看看这个

```
ip = (struct iphdr*) packet;
    icmp = (struct icmphdr*) (packet + sizeof(struct iphdr));

    /*  
     *  here the ip packet is set up except checksum
     */
    ip->ihl         = 5;
    ip->version         = 4;
    ip->tos         = 0;
    ip->tot_len         = sizeof(struct iphdr) + sizeof(struct icmphdr);
    ip->id          = htons(random());
    ip->ttl         = 255;
    ip->protocol        = IPPROTO_ICMP;
    ip->saddr           = inet_addr(src_addr);
    ip->daddr           = inet_addr(dst_addr);

    if ((sockfd = socket(AF_INET, SOCK_RAW, IPPROTO_ICMP)) == -1)
    {
    perror("socket");
    exit(EXIT_FAILURE);
    }

    /* 
     *  IP_HDRINCL must be set on the socket so that
     *  the kernel does not attempt to automatically add
     *  a default ip header to the packet
     */

    setsockopt(sockfd, IPPROTO_IP, IP_HDRINCL, &optval, sizeof(int));

    /*
     *  here the icmp packet is created
     *  also the ip checksum is generated
     */
    icmp->type          = ICMP_ECHO;
    icmp->code          = 0;
    icmp->un.echo.id        = 0;
    icmp->un.echo.sequence  = 0;
    icmp->checksum      = 0;
    icmp-> checksum     = in_cksum((unsigned short *)icmp, sizeof(struct icmphdr));

    ip->check           = in_cksum((unsigned short *)ip, sizeof(struct iphdr)); 
```

如果这部分代码看起来足够灵活，那么请阅读原始套接字：D 也许它们是满足您需求的最简单和最安全的答案。

请查看以下链接以获取更多信息
[http://courses.cs.vt.edu/~cs4254/fall04/slides/raw_6.pdf](http://courses.cs.vt.edu/~cs4254/fall04/slides/raw_6.pdf)
[http://www.cs.binghamton.edu/~steflik/cs455/rawip.txt](http://www.cs.binghamton.edu/~steflik/cs455/rawip.txt)
[http://cboard.cprogramming.com/networking-device-communication/107801-linux-raw-socket-programming.html](http://cboard.cprogramming.com/networking-device-communication/107801-linux-raw-socket-programming.html) 一个非常好的话题，非常有用的imo

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:10:24.823

您可以尝试[使用 libcrafter](http://code.google.com/p/libcrafter/)在用户空间进行数据包制作。非常好用！该库能够制作或解码大多数常见网络协议的数据包，通过网络发送它们，捕获它们并匹配请求和回复。

例如，下面的代码制作并发送一个 ICMP 数据包：

```
string MyIP = GetMyIP("eth0");

/* Create an IP header */
IP ip_header;

/* Set the Source and Destination IP address */
ip_header.SetSourceIP(MyIP);                      
ip_header.SetDestinationIP("1.2.3.4"); 

/* Create an ICMP header */
ICMP icmp_header;

icmp_header.SetType(ICMP::EchoRequest);
icmp_header.SetIdentifier(RNG16());

/* Create a packet... */
Packet packet = ip_header / icmp_header;

packet.Send(); 
```

为什么要在内核空间制作 ICMP 数据包？纯娱乐？:-p

# ruby-on-rails - Hartl 的 Ruby on Rails 教程第 8 章

> ID：10900970
> 
> 赞同：0
> 
> 时间：2012-06-05T16:17:48.330
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, railstutorial.org

[在完成Hartl 的第 8 章时](http://ruby.railstutorial.org/chapters/sign-in-sign-out#top)，我确实犯了某种严重的错误，但我不确定它是如何出错的。我在[8.2.2](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-a_working_sign_in_method)之前参加了测试。运行

```
$ bundle exec rspec spec/models/user_spec.rb 
```

测试返回

```
sis-macbook-pro:sample_app Lagaspi$ bundle exec rspec spec/models/user_spec.rb
/Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require': /Users/Lagaspi/rails_projects/sample_app/app/models/user.rb:33: syntax error, unexpected keyword_end, expecting $end (SyntaxError)
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_or_load'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `each'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:229:in `block in constantize'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `each'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in `constantize'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:259:in `safe_constantize'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/core_ext/string/inflections.rb:66:in `safe_constantize'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:152:in `_default_wrap_model'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:169:in `_set_wrapper_defaults'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:133:in `inherited'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/abstract_controller/railties/routes_helpers.rb:7:in `block (2 levels) in with'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/action_controller/railties/paths.rb:7:in `block (2 levels) in with'
from /Users/Lagaspi/rails_projects/sample_app/app/controllers/users_controller.rb:1:in `<top (required)>'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_or_load'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:313:in `depend_on'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:225:in `require_dependency'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/engine.rb:438:in `each'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/engine.rb:438:in `block in eager_load!'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/engine.rb:436:in `each'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/engine.rb:436:in `eager_load!'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/Lagaspi/rails_projects/sample_app/config/environment.rb:5:in `<top (required)>'
from /Users/Lagaspi/rails_projects/sample_app/spec/spec_helper.rb:3:in `require'
from /Users/Lagaspi/rails_projects/sample_app/spec/spec_helper.rb:3:in `<top (required)>'
from /Users/Lagaspi/rails_projects/sample_app/spec/models/user_spec.rb:12:in `require'
from /Users/Lagaspi/rails_projects/sample_app/spec/models/user_spec.rb:12:in `<top (required)>'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'
from /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

当我运行 Rails 服务器并将浏览器指向

```
http://localhost:3000/signup 
```

它返回：

```
SyntaxError in UsersController#new

/Users/Lagaspi/rails_projects/sample_app/app/models/user.rb:33: syntax error, unexpected     keyword_end, expecting $end
Rails.root: /Users/Lagaspi/rails_projects/sample_app 
```

当我的浏览器被指向

```
http://localhost:3000/home 
```

它返回：

```
Routing Error

No route matches [GET] "/home"
Try running rake routes for more information on available routes. 
```

因此，在运行 rake 路由之后，这是终端中返回的内容：

```
sis-macbook-pro:sample_app Lagaspi$ rake routes
  users GET    /users(.:format)          users#index
        POST   /users(.:format)          users#create
new_user GET    /users/new(.:format)      users#new
edit_user GET    /users/:id/edit(.:format) users#edit
   user GET    /users/:id(.:format)      users#show
        PUT    /users/:id(.:format)      users#update
        DELETE /users/:id(.:format)      users#destroy
sessions POST   /sessions(.:format)       sessions#create
new_session GET    /sessions/new(.:format)   sessions#new
session DELETE /sessions/:id(.:format)   sessions#destroy
 signup        /signup(.:format)         users#new
 signin        /signin(.:format)         sessions#new
signout DELETE /signout(.:format)        sessions#destroy 
```

这是我的 app/models/user.rb 文件

```
class User < ActiveRecord::Base
attr_accessible :name, :email, :password, :password_confirmation
has_secure_password

before_save { |user| user.email = email.downcase }
before_save :create_remember_token

validates :name, presence: true, length: { maximum: 50 }
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
validates :email, presence:   true,
                format:     { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }
validates :password, presence: true, length: { minimum: 6 }
validates :password_confirmation, presence: true
end

private

def create_remember_token
  self.remember_token = SecureRandom.urlsafe_base64
end
end 
```

这个真的让我陷入困境。

路线.rb

```
resources :sessions, only: [:new, :create, :destroy]

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete
end 
```

users_controller.rb

```
class UsersController < ApplicationController

  def show
@user = User.find(params[:id])
  end

  def new
@user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
   flash[:success] = "Welcome to the Sample App!"
    redirect_to @user
    else
      render 'new'
    end
  end
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:47:29.360

您的用户模型有两个目的：

```
class User < ActiveRecord::Base
    attr_accessible :name, :email, :password, :password_confirmation
    has_secure_password

    before_save { |user| user.email = email.downcase }
    before_save :create_remember_token

    validates :name, presence: true, length: { maximum: 50 }
    VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
    validates :email, presence:   true,
                format:     { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }
    validates :password, presence: true, length: { minimum: 6 }
    validates :password_confirmation, presence: true
    # end - this one doesn't exist, remove it
    private

    def create_remember_token
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

这应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T20:19:04.620

另外，请注意，如果您在开发过程中迷路（并且会发生），请注意您可以到[这里](https://github.com/railstutorial/sample_app_2nd_ed)查看完整的代码。这不是作弊:-)，但它会让你走上正轨。如果你有一个 github 帐户（你应该），你可以轻松地把它全部卸载并检查哪里出了问题。

# ios - 使用 CaptiveNetwork 验证 wifi 网络

> ID：10900971
> 
> 赞同：4
> 
> 时间：2012-06-05T16:18:03.357
> 
> 标签：ios, captivenetwork

我正在尝试使用 CaptiveNetwork api 让我的应用程序通过已知的 wifi 网络进行身份验证。我可以使用 注册我的应用程序`CNSetSupportedSSIDs`，这会阻止操作系统显示网页。但是，关于一旦建立与注册网络的连接后如何通知我的应用程序的文档，似乎几乎没有任何信息。也许我错过了什么？

如果有人对在哪里查看有任何建议，或者知道执行 wifi 身份验证的应用程序，以便我可以检查他们的用例，或者发现我明显错过的东西，请告诉我。

谢谢。

# ios - IOS：课堂交流

> ID：10900979
> 
> 赞同：-2
> 
> 时间：2012-06-05T16:18:27.367
> 
> 标签：ios, xcode, class, uiviewcontroller

我有这个问题：

我有一个 FirstViewController 和它的 xib；在这个xib里面有一个视图，它的类是PaintingView（一个来自glpaint的类，它不是视图控制器，而是用于视图）。

然后在 firstviewcontroller 我导入“PaintingView.h”，但如果我调用 PantingView 的方法它不起作用

在 firstViewcontroller 我做，在 viewdidload：

```
paintingView = [[PaintingView alloc]init]; 
```

但在 IBAction 里面我做：

```
[paintingView method1]; 
```

（method1在PaintingView中），它不起作用，为什么？？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:45:46.780

所以：

> 在这个 xib 里面有一个视图，它的类是 PaintingView

如果它是`UIView`子类并且在您的 Xib 中，我假设您正在使用 iBOutlet 来实际访问它。但是你这样做：

```
paintingView = [[PaintingView alloc]init]; 
```

我的问题是为什么？您已经在 Xib 中实例化了它。

# c# - 检测 SerialPort 何时准备好执行下一个命令

> ID：10900983
> 
> 赞同：2
> 
> 时间：2012-06-05T16:18:38.313
> 
> 标签：c#, serial-port

我有一块硬件，我通过 RS232 使用 .NET SerialPort 类连接到该硬件。根据其文档，它不支持任何类型的流量控制。

我可以向设备写入查询和命令，对于查询，它将立即响应读取，如果设备的 echo 处于打开状态，并且我必须在写入命令后进行读取，那么命令写入也可以正常工作。命令和响应最多为 7 个字符。

但是，如果 echo 关闭并且我快速连续编写 2 个命令，则不会执行第二个命令，除非我在写入之间放入 Thread.Sleep(15)，大概是复制 echo 时执行 ReadLine 所需的时间在。

我不一定能保证 echo 会打开，并且明确地打开它也不是一个真正的选择，所以我基本上需要处理我发现的行为。

SerialPort 设置如下：

```
SerialPort _serialPort = new SerialPort
{
    PortName = "COM1",
    BaudRate = 9600,
    Parity = Parity.None,
    DataBits = 8,
    ReadTimeout = 5000,
    WriteTimeout = 5000,
    NewLine = "\x0D"
}; 
```

我正在使用 WriteLine 和 ReadLine 与之通信。

睡觉线程感觉就像一个黑客，我还没有找到我所有的谷歌搜索的替代方案。
那么，我错过了什么吗，有什么方法可以检查下一个写入串行端口的命令何时可以执行，或者 Thread.Sleep 几乎是我的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:46:04.567

[http://msmvps.com/blogs/coad/archive/2005/03/23/SerialPort-_2800_RS_2D00_232-Serial-COM-Port_2900_-in-C_2300_-.NET.aspx](http://msmvps.com/blogs/coad/archive/2005/03/23/SerialPort-_2800_RS_2D00_232-Serial-COM-Port_2900_-in-C_2300_-.NET.aspx)

将握手属性设置为 RTSCTS 并在 CTS 变为 true 时处理 PinChanged 事件？

> 表中标记为“输出”的行可以由串行端口设置为高或低状态（True 或 > > False），“输入”行可以读取为高或低。当输入引脚之一发生变化时，您可以使用 PinChanged 事件来获得 > > 通知。Handshake 属性可以设置为使用 RTS/CTS > > >（使用硬件控制线）或 XON/XOFF（使用软件）或两者。
> 
> 控制线名称 DB9 引脚 SerialPort 属性 I/O DTR 数据终端就绪 4 DtrEnable 输出 RTS 请求发送 7 RtsEnable 输出 CTS 清除发送 8 CtsHolding 输入 DSR 数据设置就绪 6 DsrHolding 输入 CD（或 DCD）数据载波检测 1 CDHolding 输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:22:31.060

不幸的是，由于我的系统缺乏对流控制的支持，Thread.Sleep 似乎是解决方案。
我已经设置了我的代码，以便它检查 echo 是否打开，然后如果它只使用 ReadLine，如果它关闭则它使用 Thread.Sleep(15)。
感觉很糟糕，但它工作可靠，所以我只需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T20:02:03.497

我只是有一个类似的问题。使用低波特率我试图将命令写入端口太快（显然“写入”命令在写入完成之前返回）。

我通过修改“串行端口就绪？”解决了这个问题。我在每个命令之前调用的函数。当“BytesToWrite”属性大于零时，我添加了一个 while 循环来休眠 5ms。之后工作正常。

# asp.net - 在 ASP.NET 中大型资源文件与分离资源文件？

> ID：10900984
> 
> 赞同：2
> 
> 时间：2012-06-05T16:18:42.003
> 
> 标签：asp.net, asp.net-mvc-3, localization, resources, internationalization

我们有一个很大的应用程序，我们正在尝试找出每种语言都有一个巨大的资源文件或将资源放在单独的文件中之间的区别。

任何策略的性能都会受到影响吗？

各有什么优缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:28:38.627

如果你的意思是巨大的，那么性能当然是一个问题。但除此之外，请参阅此相关问题以获得支持将资源分开的理由：[ASP.net MVC 中的全球化（每个视图与域的资源文件）](https://stackoverflow.com/questions/10896463/globalization-in-asp-net-mvc-resource-file-per-view-vs-domain/10918035#10918035)

# ajax - dojo.io.script.get vs dojo.xhrGet

> ID：10900985
> 
> 赞同：0
> 
> 时间：2012-06-05T16:18:42.133
> 
> 标签：ajax, dojo, jsonp

我花了好几天的时间在这上面工作，真的觉得很愚蠢。当我使用自己的 url 在本地尝试时，我一直在研究无法正常工作的演示和示例。我有一个以 json 格式返回结果的 Web 服务，我基本上只是尝试使用 dojo 调用它，现在只查看结果。我使用了搜索 google 示例，只是替换了 url 和参数。现在也许我仍然不了解基础知识： - io.script.get 与 xhrGet 如果使用跨域 url，最好使用 io.script.get？正确的？现在什么是回调参数？这是在 web 服务中调用的函数吗？我的网络服务网址如下：http: [//xxx.xxx.x.xxx/WcfServices/WcfInstance/Service1.svc/RetrievData ?query=Word](http://xxx.xxx.x.xxx/WcfServices/WcfInstance/Service1.svc/RetrievData?query=Word)

当我使用以下代码时，我什么也没有显示。

```
function searchGoogle() {
    // Look up the node we'll stick the text under.
    var targetNode = dojo.byId("rules");

    // The parameters to pass to xhrGet, the url, how to handle it, and the callbacks.
    var jsonpArgs = {
        url: "http://xxx.xxx.x.xxx/WcfServices/WcfInstance/Service1.svc/RetrieveData?",
        callbackParamName: "callback",
        content: {

            query:"dojowords"
        },
        load: function (data) {
            // Set the data from the search into the viewbox in nicely formatted JSON
            targetNode.innerHTML = "<pre>" + dojo.toJson(data, true) + "</pre>";
        },
        error: function (error) {
            targetNode.innerHTML = "An unexpected error occurred: " + error;
        }
    };
    dojo.io.script.get(jsonpArgs);
}
dojo.ready(searchGoogle); 
```

以下是 Web 服务结果的样子：

```
"{\"rules\":[{\"value\":\"AllState\"},
 {\"value\":\"Cidade de Goa beach\"},{\"value\":\"Euro 2012\"},     
 {\"value\":\"Euro2012\"},{\"value\":\"European&Championship\"},
 {\"value\":\"Holiday  Inn Resort\"},
 {\"value\":\"Holiday Inn Resort goa\"},
 {\"value\":\"Hotel Goa\"},{\"value\":\"Hyatt Goa\"},{\"value\":\"I buy car\"},... 
```

如果我把这部分弄对了，那么至少我知道我有数据，然后我可以绑定到数据网格或图表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:21:08.803

dojo.io.script.get 适用于所有跨域请求。xhrGet 用于相同的域请求。

dojo.io.script.get 使用了一个 hack，它期望 jsonp 或 json 填充作为结果。这将 Web 服务调用的响应包装在一个自执行函数中。函数名称是回调名称。这必须在调用之前进行连接，以便它知道在响应返回时要调用的已定义函数。

所有的论点都有据可查[http://dojotoolkit.org/reference-guide/1.7/dojo/io/script.html](http://dojotoolkit.org/reference-guide/1.7/dojo/io/script.html)

我猜测您的服务为什么不起作用是因为您编写了 Web 服务并且它不处理 jsonp。它没有将其响应包装在回调参数名称中。

你的结果应该看起来像

```
 callback({json}); 
```

其中 callback 是您在 callbackParamName 中设置的任何内容

你也可以删除？来自您的网址，应该为您处理。

# perl - 如何使用 Perl 的 XML::LibXML 提取标签之间的内容？

> ID：10900988
> 
> 赞同：0
> 
> 时间：2012-06-05T16:19:00.910
> 
> 标签：perl, xml-libxml

我有一个包含如下内容的 XML 文件：

```
<Node id="7"/>
www
<Node id="10"/> 
```

如何使用 XML::LibXML 和 Perl 获取两个节点之间的内容，即“www”？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:38:35.737

您处理的 XML 格式很*糟糕*！*

给定一个节点，您希望节点是它的兄弟节点，紧随其后（可能除了中间注释）并且是文本节点。

```
use strict;
use warnings;
use feature qw( say );

use XML::LibXML qw( XML_COMMENT_NODE XML_TEXT_NODE );

sub following_text {
   my ($node) = @_;
   my $text = '';
   while ($node = $node->nextSibling()) {
      my $node_type = $node->nodeType();
      next if $node_type == XML_COMMENT_NODE;
      last if $node_type != XML_TEXT_NODE;
      $text .= $node->data();   
   }

   return $text;
}

my $parser = XML::LibXML->new();
my $doc    = $parser->parse_fh(\*DATA);
my $root   = $doc->documentElement();
my ($node) = $root->findnodes('//Node[@id="7"]');
my $text   = following_text($node);

say $text; 
```

```
__DATA__
<root>
<Node id="7"/>
www
<Node id="10"/>
bar
</root> 
```

* —`www`应该是`Node`. 例如，`<Node id="7">www</Node>`会更好。

# .net - Rally API：如何使用新缺陷更新故事

> ID：10900991
> 
> 赞同：1
> 
> 时间：2012-06-05T16:19:15.703
> 
> 标签：.net, api, rally

我是使用 .NET 的 Rally API 的新手，我将非常感谢任何帮助。我已经获得了故事对象，但我不确定如何使用新缺陷对其进行更新。我可以根据各种示例创建新缺陷，但它们与任何特定故事无关。我当前的错误带回来：[“在处理此请求期间忽略 JSON 元素分层要求。缺陷。”]。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:15:43.813

HierarchicalRequirement 上的缺陷集合是只读的，因此您无法通过更改缺陷集合将缺陷与故事相关联。但是，您可以做的是，在使用 API 创建/更新缺陷时，将缺陷的 Requirement 属性设置为现有故事的 Ref。这是一个简单的例子：

```
//Set our Workspace and Project scopings
String workspaceRef = "/workspace/12345678910";
String projectRef = "/project/12345678911";
String userRef = "/user/12345678912";
String storyRef = "/hierarchicalrequirement/12345678913";

for (int i = 0; i < 3; i++)
{
    DynamicJsonObject myDefect = new DynamicJsonObject();

    myDefect["Name"] = "My Defect from REST: " + i;
    myDefect["Priority"] = "Normal";
    myDefect["Workspace"] = workspaceRef;
    myDefect["Project"] = projectRef;
    myDefect["SubmittedBy"] = myUserReference;
    myDefect["Requirement"] = storyRef ;

    CreateResult createDefect = restApi.Create("Defect", myDefect);
    Console.WriteLine("Created: " + myDefect["Name"] + "\n");

    DynamicJsonObject fetchedDefect = restApi.GetByReference(createDefect.Reference, "FormattedID");
    Console.WriteLine("Created Defect with FormattedID: " + fetchedDefect["FormattedID"]);

} 
```

其中长整数是 Rally 中在感兴趣的参考中使用的对象的 ObjectID (OID)。

# ios - Apple Push Notification 不适用于临时构建

> ID：10900992
> 
> 赞同：7
> 
> 时间：2012-06-05T16:19:23.827
> 
> 标签：ios, apple-push-notifications, adhoc, testflight

在开发模式下，我可以向设备发送推送通知，而不是在生产中，我的设置是：

*   .pem 文件，它是配置门户的 aps_production.cer 和我的临时证书的私钥的组合
*   苹果服务器 apn：带有 2196 端口的“gateway.push.apple.com”
*   我有一个 Rails 服务器，它保存来自设备的令牌，然后使用这些设备令牌和以前的 .file 向苹果发送通知以打开连接
*   ad-hoc 构建应用程序有（它是 ruby​​motion）： entitlements['aps-environment'] = 'production' entitlements['get-task-allow'] = false
*   应用程序启动时，将令牌正确发送到我的应用程序服务器
*   我刚刚检查了令牌与开发模式不同

问题是我的 rails 应用程序发送通知并且没有收到任何错误，但没有任何东西到达设备上。

我正在使用 testflight 分发我的应用程序的临时版本，但我不知道使用 testlight 和 APNS 有任何问题。

可以是什么？

* * *

**编辑**我解决了：端口错误，2195而不是2196 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:33:30.440

APNs 有一个单独的 SSL 证书用于生产和开发。

您可能正在将您的开发证书与生产版本一起使用。

# sql - 插入多个子查询作为值

> ID：10900994
> 
> 赞同：7
> 
> 时间：2012-06-05T16:19:26.817
> 
> 标签：sql, sql-server, sql-server-2005

假设我必须插入一个有很多 fk 的表，只是为了在下面解释**错误的语句**：

```
insert into mytable
values
(
somevalue
,somevalue
,select id from othertable1 where ...condition
,select id from othertable2 where ...condition
,select id from othertable3 where ...condition
) 
```

所以基本上要插入的值来自不同的子查询，是否有可能实现这种行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T16:36:40.843

```
insert into mytable (columns)
select somevalue, somevalue, a.id, b.id, c.id
from
 othertable1 a
 cross join othertable2 b
 cross join othertable3 c
where
 a ... condition
 b ... condition
 c ... condition 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:39:58.257

您可以使用 select 语句进行插入吗？

```
INSERT INTO MYTABLE
SELECT (SOMEVALUE,
    SOMEVALUE,
    T1.ID,
    T2.ID
)
FROM ANOTHERTABLE T1
JOIN YETANOTHERTABLE T2
    ON T1.BLAH = T2.BLAH
WHERE condition1... 
```

# javascript - 在选择中选择选项时的事件名称

> ID：10900997
> 
> 赞同：7
> 
> 时间：2012-06-05T16:19:35.903
> 
> 标签：javascript, jquery, html

当我们在选择中更改某些内容时，我知道事件名称是`change`(html: `onchange`)，但我想知道当我选择（单击）特定选项时的事件名称是什么。

例子 ：

```
<select>
    <option>Option 1</option>
</select> 
```

当我点击时`Option 1`，会发生什么事件？仅`change`（在选择本身和所有选项上）还是其他？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:21:02.970

默认情况下，在大多数浏览器`change`中，当您更改`select`和`click`事件时会发生事件`option`。

```
$('select').on('change', function(event) {
  console.log(event.type);   // event.type is to get event name
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:25:53.740

在 SELECT 上“更改”并在 OPTION 上“单击”。此外，在 Opera 中，如果您使用 addEventListener() 添加侦听器，“输入”也可能会在 SELECT 上触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:38:59.243

event.type 返回事件的性质。参考[演示](http://jsfiddle.net/gFdkF/1/)

```
$('select').bind('change', function(event) {
    alert("Event :"+ event.type);   
}); 
```

您可以在元素上使用 .on/.bind。​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:25:12.907

您可以将它放在您感兴趣的选项的 onclick 事件中，如下所示：

```
<select id="MySelect">
    <option id="optionA" onclick="alert('You clicked A')">a</option>
    <option id="optionB">b</option>  
</select> 
```

# javascript - 使用图像提交表单问题

> ID：10900998
> 
> 赞同：2
> 
> 时间：2012-06-05T16:19:36.743
> 
> 标签：javascript, form-submit

我尝试了几个不同的提交按钮，但似乎无法正常工作。

```
<form id="logForm" action="<?php $retpage; ?>" method="POST" name="logForm">
    <div>
        <table width="400px" border="0" cellpadding="4" cellspacing="4" class="loginform">
            <tr> 
                <td colspan="2">
                </td>
            </tr>
            <tr> 
                <td width="28%">Email:</td>
                <td width="72%">
                    <input name="usr_email" type="text" class="required" id="txtbox" size="25" value="<?php
if(isset($_COOKIE['user_name'])){
            print ($_COOKIE['user_name']);
} else if(isset($_POST['usr_email'])){
            print ($_POST['usr_email']);
} else {
            print '';} ?>">
                </td>
            </tr>
            <tr> 
                <td>Password:</td>
                <td><input name="pwd" type="password" class="required password" id="txtbox" size="25"></td>
            </tr>
            <tr> 
                <td colspan="2">
                    <div align="center">
                        <input name="remember" type="checkbox" id="remember" value="1"> Remember me
                    </div>
                </td>
            </tr>
            <tr> 
                <td colspan="2">
                    <div align="center"> 
                        <p><input name="doLogin" type="image" id="doLogin" value="Login" src="images/login.png" style="vertical-align: middle; height: 30px; width: 66px;" onsubmit="document.logForm.submit(); return false;" /></p>           
                        <p><a href="signup.php">Register Free</a><font color="#FF6600">|</font> <a href="forgot.php">Forgot Password</a> <font color="#FF6600"></font></p>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</form> 
```

当我使用下面的提交按钮时，它可以正常工作，但我想使用图像提交。上面的登录按钮不起作用。

```
<input name="doLogin" type="submit" id="doLogin" value="Login"> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:20:46.073

取出`onsubmit`属性并使用：

```
<input type="image" src="foo.png" /> 
```

这将在单击时提交表单。

小提琴：http: [//jsfiddle.net/jonathansampson/q3SN8/](http://jsfiddle.net/jonathansampson/q3SN8/)

此外，您没有打印您的操作：

```
action="<?php $retpage; ?>" // should be <?php echo $retpage; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:39:20.920

或jQuery：

```
<img src="images/login.png" class="submitImage">

<script>
   $(".submitImage").click(function() {
       $("#logForm").submit();      
   });
</script> 
```

Ofc，把这个放在你的 html 页面的标签之间：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:59:15.397

我在顶部有这个：

```
if ($_POST['doLogin']=='Login') 
```

{ php & mysql 代码 }

我把它拿出来，它工作正常。

我现在的问题是，为什么 javascript 不发布 doLogin？