# StackOverflow 问答 000304000-000304999

# c# - 当用户会话持有基于该 DataTable 的 DataViews 时处理对 Cached DataTable 的更新

> ID：304004
> 
> 赞同：0
> 
> 时间：2008-11-20T00:43:22.510
> 
> 标签：c#, asp.net, ado.net, datatable, dataview

我的网站在单个服务器上运行。我正在缓存一个数据表。每个会话都有一个对它自己的 DataView 的引用，该 DataView 引用该 DataTable。我担心的是，当我需要对底层数据表进行更改时，它们会传播到对它的每个会话引用。

或者有没有更好的方法来处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-20T08:55:20.427

原则上，是的。如果您继续使用相同的 DataTable，更改将传播到视图。但是，根据您的实现方式，可能会出现问题：

*   第一次生成缓存的 DataTable 时，您有一个潜在的竞争条件：对服务器的多个请求可能会检测到缓存的 DataTable 不存在，并尝试生成它 - 在这种情况下，您可能有一个重复的 DataTable。

*   如果重新生成缓存的 DataTable（例如，如果由于超时到期而将其从 ASP.NET 缓存中删除），则 Session 中的现有 DataView 将继续引用旧的 DataTable。

# c++ - 挂在 _dl_sysinfo_int80 上的多线程应用程序

> ID：304010
> 
> 赞同：2
> 
> 时间：2008-11-20T00:46:57.340
> 
> 标签：c++, linux, multithreading, gdb

我有一个多线程应用程序挂起对_dl_sysinfo_int80() 的调用。根据gdb，所有线程都卡在这个调用中。

堆栈跟踪的顶部如下所示：

```
#0  0x002727a2 in _dl_sysinfo_int80 () from /lib/ld-linux.so.2
#1  0x004f23de in __lll_mutex_lock_wait () from /lib/tls/libpthread.so.0
#2  0x004ef00b in _L_mutex_lock_35 () from /lib/tls/libpthread.so.0
#3  0x092828ac in construction vtable for std::ostream-in-std::basic_stringstream<char, std::char_traits<char>, std::allocator<char> > () 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T01:47:55.640

int 80 是进行内核级系统调用的软件中断。我的猜测是 pthread 正在调用挂起的内核。为什么你的所有线程都会像这样挂在互斥锁上的原因可能有很多：
- 互斥锁被另一个线程锁定，该线程在没有释放锁
的情况下退出 - 互斥锁被一个正在键入锁定的线程锁定它并没有被声明为递归
的 - 互斥锁根本没有初始化
- 互斥锁已被错误的指针、堆栈问题、其他类型的一般内存损坏损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T13:23:52.553

快速浏览一下 glibc 源代码告诉我：

*   `_dl_sysinfo_int80`正如已经提到的另一个答案，是对`int $0x80`（调用内核）的调用；
*   `__lll_mutex_lock_wait`[似乎是futex](http://en.wikipedia.org/wiki/futex)实现的用户空间一半的功能之一。

这意味着在该堆栈跟踪或类似的线程中阻塞的所有线程实际上都在等待某种 pthread 同步对象（可能是 pthread 互斥锁）。@SoapBox 的答案中给出的所有原因都可能是原因。

[除非您怀疑select is broken](http://www.codinghorror.com/blog/archives/001079.html)，否则无需查看该系统调用的内核端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T02:22:31.623

SoapBox 是对的 - 你将不得不连接一个内核调试器来找出调用堆栈的内核部分并找出真正阻塞的内容

# c++ - 在 C++ 中截断十进制值

> ID：304011
> 
> 赞同：10
> 
> 时间：2008-11-20T00:48:25.713
> 
> 标签：c++, decimal, truncate

将值为 0.6000002的 C++`float`变量截断为值为 0.6000 并将其存储回变量中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-20T00:57:09.970

*关于为什么*会发生这种情况的一个很好的参考可以在David Goldberg的[What Every Computer Scientist Should Know About Floating Point Arithmetic中找到。](http://docs.sun.com/source/806-3568/ncg_goldberg.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-20T00:49:53.153

首先，重要的是要知道浮点数是近似的。请参阅@Greg Hewgill 提供的链接，了解为什么这个问题无法完全解决。

但这里有几个可能会满足您需求的问题的解决方案：

可能是更好的方法，但效率较低：

```
char sz[64];
double lf = 0.600000002;
sprintf(sz, "%.4lf\n", lf); //sz contains 0.6000

double lf2 = atof(sz);

//lf == 0.600000002;
//lf2 == 0.6000

printf("%.4lf", lf2); //print 0.6000 
```

更有效的方法，但可能不太精确：

```
double lf = 0.600000002;
int iSigned = lf > 0? 1: -1;
unsigned int uiTemp = (lf*pow(10, 4)) * iSigned; //Note I'm using unsigned int so that I can increase the precision of the truncate
lf = (((double)uiTemp)/pow(10,4) * iSigned); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-20T00:53:54.843

实际上这是不可能的。这不是 C++ 的限制，而是浮点的工作方式。对于许多值，没有精确的表示，因此您不能简单地截断为多个数字。

使用 printf 格式字符串打印时可以截断。

如果您确实需要能够仅存储有限数量的数字，我建议您改用固定精度数据类型。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-20T02:07:54.133

我认为这里应该问的问题是：为什么需要截断它？

如果它用于值之间的比较，也许您应该考虑使用 epsilon 测试。（在您的情况下，具有额外的容差值，因为它似乎远大于普遍接受的 epsilon）。

如果您只想将其打印为 0.6000 ，请使用其他人建议的方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-23T02:13:31.843

```
roundf(myfloat * powf(10, numDigits)) / powf(10, numDigits); 
```

例如，在您的情况下，您要截断三位数（numDigits）。你会使用：

```
roundf(0.6000002 * 1000) / 1000
// And thus:
roundf(600.0002) / 1000
600 / 1000
0.6 
```

（您可能会将 powf 的结果存储在某处，因为您使用了两次。）

由于浮点数通常存储在计算机上的方式，可能会有不准确之处。不过，这就是使用浮点数所得到的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-02-07T04:21:34.770

用这个：

```
floor(0.6000002*10000)/10000 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-20T18:58:17.033

与其他答案类似，但您不能忘记 round、floor 和 trunc 在定义上是不同的。请参阅以下定义和输出示例：

[http://www.cplusplus.com/reference/cmath/trunc/](http://www.cplusplus.com/reference/cmath/trunc/)

在这种情况下，我们需要以 4 位小数的精度进行 trucate 并去掉不重要的小数：

```
trunc(valueToTrunc*10000)/10000 
```

或者

```
value = (double)((int)(valueToTrunc*10000))/(double)10000 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-28T19:04:19.803

对于 C++11，您可以使用`std::round`在 header 中定义`<cmath>`：

```
auto trunc_value = std::round(value_to_trunc * 10000) / 10000; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-14T16:33:39.170

这是一个使用其他答案中的建议的函数及其使用示例：

```
#include <iostream>
#include <cmath>

static void Truncate(double& d, unsigned int numberOfDecimalsToKeep);

int main(int, char*[])
{

  double a = 1.23456789;
  unsigned int numDigits = 3;

  std::cout << a << std::endl;

  Truncate(a,3);

  std::cout << a << std::endl;

  return 0;
}

void Truncate(double& d, unsigned int numberOfDecimalsToKeep)
{
    d = roundf(d * powf(10, numberOfDecimalsToKeep)) / powf(10, numberOfDecimalsToKeep);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-03T11:50:13.723

你可以使用这个：

```
int n = 1.12378;
cout << fixed << setprecision(4) << n; 
```

输出将是：`1.1238`

不是：`1.1237`

它只是海最后一个十进制数字不是全部：12.123447 ==> 12.1234

小心那个...

# silverlight - 如何在 Silverlight 中设置右键单击上下文菜单？

> ID：304017
> 
> 赞同：14
> 
> 时间：2008-11-20T00:53:56.827
> 
> 标签：silverlight, silverlight-2.0

我想为我的文本框创建一个右键单击上下文菜单，以提供典型的复制/粘贴功能。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2010-05-03T16:41:23.087

右键单击上下文菜单现在是[Silverlight Control Toolkit](http://silverlight.codeplex.com/)的一部分。

它可以做什么和不能做什么：http: [//blogs.msdn.com/delay/archive/2010/04/15/alive-and-kickin-new-silverlight-4-toolkit-released-with-today-s -silverlight-4-rtw.aspx](http://blogs.msdn.com/delay/archive/2010/04/15/alive-and-kickin-new-silverlight-4-toolkit-released-with-today-s-silverlight-4-rtw.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-20T01:47:30.353

看起来这是一种[方法在这里](http://www.wintellect.com/cs/blogs/sporter/archive/2007/12/09/right-click-event-in-silverlight-1-1-2-0.aspx)，[另一个例子在这里](http://blogs.microsoft.co.il/blogs/justinangel/archive/2007/10/22/question-from-silverlight-forums-custom-context-menu-and-mouse-right-click-event.aspx)，[最近的一个在这里](http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2008/02/07/how-to-handle-rightclick-mouse-event-in-silverlight.aspx)。使用这些方法，您应该能够显示自己的上下文菜单。一旦你有了它，你将需要访问剪贴板，这里有一个[例子](http://www.jeff.wilcox.name/2008/05/21/clipboard-access/)。

祝你好运！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-27T09:33:26.603

只是为了完整性。以上链接适用于 1.1 版（在 2 的 beta 版之前）。Silverlight 2 的最新版本位于[http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2008/05/28/how-to-handle-rightclick-mouse-event-in-silverlight-take- 2.aspx](http://blogs.microsoft.co.il/blogs/alex_golesh/archive/2008/05/28/how-to-handle-rightclick-mouse-event-in-silverlight-take-2.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-05-24T18:09:14.670

这个开源项目中的演示在支持嵌套菜单的同时做到了这一点：

[http://sl4popupmenu.codeplex.com/](http://sl4popupmenu.codeplex.com/)

# c# - 如何从 C# 扩展方法中访问“this”？

> ID：304041
> 
> 赞同：1
> 
> 时间：2008-11-20T01:07:39.810
> 
> 标签：c#, pass-by-reference, this

我一直在使用 Vector2 和 XNA，我发现在零向量上调用 Normalize() 成员函数会将其归一化为 {NaN，NaN} 的向量。这一切都很好，但在我的情况下，我更喜欢它而不是将它们保留为零向量。

将此代码添加到我的项目中启用了一个可爱的扩展方法：

```
using ExtensionMethods;

namespace ExtensionMethods
{
    public static class MyExtensions
    {
        public static Vector2 NormalizeOrZero(this Vector2 v2)
        {
            if (v2 != Vector2.Zero)
                v2.Normalize();
            return v2;
        }
    }
} 
```

不幸的是，这个方法*返回*了标准化的向量，而不是简单地标准化我用来调用这个扩展方法的向量。我想改为像*vector2Instance* .Normalize() 那样行事。

除了使这个无效之外，我该如何调整它以修改“v2”？（本质上，我需要访问“this”对象，或者我需要通过引用传递“v2”。）

编辑：

是的，我试过这个：

```
 public static void NormalizeOrZero(this Vector2 v2)
    {
        if (v2 != Vector2.Zero)
            v2.Normalize();
    } 
```

不行，v2只是NormalizeOrZero范围内的一个变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T01:40:31.957

这不起作用，因为 Vector 2[实际上是一个 struct](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.aspx)。这意味着它是按值传递的，您不能修改调用者的副本。我认为你能做的最好的就是lomaxxx指定的解决方法。

这说明了为什么您通常应该避免使用结构。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/85553/when-should-i-use-a-struct-instead-of-a-class)。Vector2 违反了结构应该是不可变的准则，但在 XNA 的上下文中这样做可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T01:49:43.763

好吧，如果你真的很想*这样*做，你可以这样做：

```
public static void NormalizeOrZero(this Vector2 ignore, ref Vector2 v2)
{
    if (v2 != Vector2.Zero)
        v2.Normalize();
} 
```

你会这样称呼它：

```
v2.NormalizeOrZero(ref v2); 
```

它非常丑陋，但它会起作用，因为它的价值。但是此时您也可以首先调用静态方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T01:30:27.250

我不确定为什么您的第二个代码示例不起作用，但如果第一批代码符合您的要求，您可以简单地通过以下方式解决它：

```
Vector2 v2 = new Vector2()
v2 = v2.NormalizeOrZero(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T01:42:06.743

您需要参数上的 the`ref`和`this`修饰符，这似乎不太可能起作用。

# sql - id 上的 SQLite 自连接中的错误？

> ID：304043
> 
> 赞同：3
> 
> 时间：2008-11-20T01:08:19.200
> 
> 标签：sql, sqlite, join

我正在尝试根据它们的 id 生成行的成对组合。SQLite 版本是 3.5.9。表格内容如下：

```
id|name|val  
1|A|20
2|B|21
3|C|22 
```

表架构为：

```
CREATE TABLE mytable (
    id INTEGER NOT NULL, 
    name VARCHAR, 
    val INTEGER, 
    PRIMARY KEY (id)
); 
```

然后是 ids 上的自加入：

```
sqlite> select t1.id, t2.id from mytable as t1, mytable as t2 where t2.id > t1.id;
id|id
2|2
2|3
3|3 
```

这显然不是我想要的。现在，更改 t2 和 t1 的顺序会产生正确的结果：

```
sqlite> select t1.id, t2.id from mytable as t2, mytable as t1 where t2.id > t1.id;
id|id
1|2
1|3
2|3 
```

现在，对于另一个实验，我尝试在除行 ID 之外的数字列上进行组合。另一方面，这在两种情况下都给出了正确的结果。

我希望有人可以深入了解这里发生的事情。据我了解，它要么是 SQLite 中的错误，要么是我不知道的 SQL 的某些微妙方面。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-20T01:22:28.203

似乎是 SQLite 中的一个错误 - 正如您所怀疑的那样，您发布的第一个结果是错误的。我已经在我的工作站上的 PG8.3 和 sqlite3.6.4 上对其进行了测试，无法重现。在所有情况下都得到正确的结果。可能与您的 sqlite 版本相关联；尝试升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T15:36:01.663

```
SQLite version 3.6.2
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> create table mytable (
   ...> id integer not null,
   ...> name varchar,
   ...> val integer,
   ...> primary key (id)
   ...> );
sqlite> insert into mytable values(null,'A',20);
sqlite> insert into mytable values(null,'B',21);
sqlite> insert into mytable values(null,'C',22);
sqlite> select t1.id, t2.id from mytable as t1, mytable as t2 where t2.id > t1.id;
1|2
1|3
2|3 
```

# visual-studio-2008 - 使用 /clr 编译器选项构建的 MFC - CString/System::String 转换

> ID：304044
> 
> 赞同：1
> 
> 时间：2008-11-20T01:08:30.853
> 
> 标签：visual-studio-2008, .net-3.5, mfc, clr

我有一个相当大的 MFC 应用程序，它刚刚从 VS6.0 迁移到 VS2008。这是一个非常痛苦的过程，但现在我想探索任何可用的托管代码选项。我能够使用 /clr 开关成功构建项目，这似乎让我可以访问托管类型。

我想知道 System::String 和 CString 之间的转换是否是自动的。我发现的 MSDN 文档表明这种转换不是自动的，但我没有发现这种情况。以下所有三个示例都有效，并且 1 和 2 均由 MSDN 记录。我很好奇的是示例 3，它也有效，但我不知道为什么。CurrentDirectory 属性返回一个指向托管堆 String^ 的指针，但为什么我可以将它分配给 CString？示例 3 到底在做什么以及内存管理的含义是什么？

示例 1)

```
    marshal_context ^ context = gcnew marshal_context();
    字符串 ^env = System::Environment::CurrentDirectory;
    const char* env2 = context->marshal_as(env);
    AfxMessageBox(env2);
    删除上下文；

```

例 2)

```
    CString s(System::Environment::CurrentDirectory);
    AfxMessageBox(s);

```

例 3)

```
    CString s = System::Environment::CurrentDirectory;
    AfxMessageBox(s);

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T02:31:54.757

选项 3 的工作原理与选项 2 几乎相同。CString::operator= 对 System::String 有重载。不要忘记赋值运算符可以做的不仅仅是复制引用。

此页面： [如何：在各种字符串类型之间进行转换](http://msdn.microsoft.com/en-us/library/ms235631.aspx) 对于混合应用程序*非常有用。*[pin_ptr](http://msdn.microsoft.com/en-us/library/1dz8byfh(VS.80).aspx)很棒。

小心散布托管代码。我还在一个大型 MFC 应用程序上工作，该应用程序转到 /clr，我有时希望我们只在选择的库中完成它。当调用堆栈上有很多托管本机转换时，它会使调试变得痛苦。还有[性能方面的考虑](http://msdn.microsoft.com/en-us/library/ky8kkddw.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T01:13:55.817

您可以从 system::String 转到 CString，因为它们共享一个公共转换 (lptstr?) 从 CString 转到 System::String 将始终需要 System::String^ test = gcnew System::String( CStringVar );

# python - Emacs 23 和 iPython

> ID：304049
> 
> 赞同：24
> 
> 时间：2008-11-20T01:12:16.507
> 
> 标签：python, emacs, ipython, emacs23

有没有人使用带有 emacs 23 的 iPython？emacs wiki 上的文档有点混乱，我很想听听任何使用 emacs 进行 Python 开发的人的意见。你使用下载的python-mode和ipython.el吗？你有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-23T17:26:07.180

我让它在 emacs 23 上运行得很好。唯一的开放问题是焦点在将缓冲区发送到 iPython 解释器后没有返回到 python 缓冲区。

[http://www.emacswiki.org/emacs/PythonMode#toc10](http://www.emacswiki.org/emacs/PythonMode#toc10)

```
(setq load-path
      (append (list nil
                    "~/.emacs.d/python-mode-1.0/"
            "~/.emacs.d/pymacs/"
            "~/.emacs.d/ropemacs-0.6"
                    )
              load-path))
(setq py-shell-name "ipython")

(defadvice py-execute-buffer (around python-keep-focus activate)
  "return focus to python code buffer"
  (save-excursion ad-do-it))

(setenv "PYMACS_PYTHON" "python2.5") 
(require 'pymacs)

(pymacs-load "ropemacs" "rope-")

(provide 'python-programming) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T02:50:33.360

我自己从未使用过它，但我确实遵循了 ipython 邮件列表，几个月前就有一个[线程。](http://lists.ipython.scipy.org/pipermail/ipython-user/2008-September/thread.html)

也许这会有所帮助

[http://lists.ipython.scipy.org/pipermail/ipython-user/2008-September/005791.html](http://lists.ipython.scipy.org/pipermail/ipython-user/2008-September/005791.html)

如果您遇到麻烦，它也是一个非常敏感的邮件列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T15:50:21.380

我在 python 开发中使用了 ipython 和 emacs cvs（现在是 emacs 23）。但是，我用另一种方式使用它：我通过 $EDITOR 环境变量从 ipython 提示符调用 emacs。我尝试了相反的方法，但对所有进程缓冲区有点厌倦了。

Emacs 很棒，但命令行功能更加通用。

# sql - T-SQL 距离公式，使用以英里为单位的中心位置周围的半径

> ID：304052
> 
> 赞同：0
> 
> 时间：2008-11-20T01:13:57.050
> 
> 标签：sql, sql-server, sql-server-2005, tsql

使用以英里为单位的半径计算中心位置周围距离公式的最佳方法是什么？我们通常使用圆形半径公式，但正在考虑使用普通正方形，因为它更快且效率更高。

有时我们需要精确，所以我们会使用圆形，但有时我们可以只使用方形来进行更快的计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T02:28:30.537

下个月必须解决这个问题，所以最近正在和一个 gis 人聊这个。

显然，诀窍是首先计算出围绕中心点的 1 度盒子的大小（以公里或英里为单位），因为这取决于您在世界的哪个位置。

例如阿拉斯加与赤道附近的某个地方非常不同，然后用它来计算出多少度，或百分之十等来制作你的盒子。如果需要，可以预先计算一组这些，取决于您需要的准确度。

# complexity-theory - 管理软件复杂性/可视化组件的最佳实践？

> ID：304054
> 
> 赞同：7
> 
> 时间：2008-11-20T01:16:54.767
> 
> 标签：complexity-theory

我们正在构建用于从网络中挖掘信息的工具。我们有几件，例如

*   从网络抓取数据
*   根据模板和业务规则提取信息
*   将结果解析到数据库
*   应用规范化和过滤规则
*   等等等等。

问题在于解决问题并对每个阶段发生的事情有一个很好的“高级图片”。

**哪些技术帮助您理解和管理复杂的流程？**

*   使用工作流工具，如 Windows Workflow Foundation
*   将单独的函数封装到命令行工具中并使用脚本工具将它们链接在一起
*   编写一种领域特定语言 (DSL) 来指定在更高级别上应该发生的事情的顺序。

只是好奇您如何处理具有许多交互组件的系统。我们希望记录/了解系统如何在比跟踪源代码更高的级别上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T01:41:31.613

我使用 AT&T 著名的[Graphviz](http://www.graphviz.org/)，它很简单，而且效果很好。它也是 Doxygen 使用的同一个库。

此外，如果您付出一点努力，您可以获得非常漂亮的图表。

忘了提一下，我使用它的方式如下（因为 Graphviz 解析 Graphviz 脚本），我使用替代系统以 Graphviz 格式记录事件，所以我只解析 Logs 文件并得到一个漂亮的图表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T01:46:43.317

代码说明了每个阶段会发生什么。使用 DSL 将是一个福音，但如果它以编写自己的脚本语言和/或编译器为代价，则可能不会。

Higher level documentation should not include details of what happens at each step; it should provide an overview of the steps and how they relate together.

Good tips:

*   Visualize your database schema relations.
*   Use visio or other tools (like the one you mentioned - haven't used it) for process overviews (imho it belongs to the specification of your project).
*   Make sure your code is properly structured / compartmentalized / etc.
*   Make sure you have some sort of project specification (or some other "general" documentation that explains what the system does on an abstract level).

I wouldn't recommend building command-line tools unless you actually have a use for them. No need in maintaining tools you don't use. (That's not the same as saying it can't be useful; but most of what you do sounds more like it belongs in a library rather than executing external processes).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T02:12:00.710

My company writes [functional specifications](http://en.wikipedia.org/wiki/Functional_specification) for each major component. Each spec follows a common format, and uses various diagrams and pictures as appropriate. Our specs have a functional part and a technical part. The functional part describes what the component does at a high-level (why, what goals it solves, what it does not do, what it interacts with, external documents that are related, etc.). The technical part describes the most important classes in component and any high-level design patterns.

We prefer text because is the most versatile and easy to update. This is a big deal -- not everyone is an expert (or even decent) at Visio or Dia, and that can be a obstacle to keeping the documents up-to-date. We write the specs on a wiki so that we can easily link between each specification (as well as track changes) and allows for a non-linear walk though the system.

For an argument from authority, Joel recommends Functional Specs [here](http://www.joelonsoftware.com/articles/fog0000000036.html) and [here](http://www.joelonsoftware.com/articles/fog0000000035.html).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T18:30:59.190

I find a [dependency structure matrix](http://en.wikipedia.org/wiki/Dependency_Structure_Matrix) a helpful way to analyze the structure of an application. A tool like [lattix](http://www.lattix.com/) could help.

Depending on your platform and toolchain there are many really useful static analysis packages that could help you to document the relationships between subsystems or components of your application. For the .NET platform, [NDepend](http://www.ndepend.com/) is a good example. There are many other for other platforms though.

Having a good design or model before building the system is the best way to have an understanding for the team of how the application should be structured but tools like those I mentioned can help enforce architectural rules and will often give you insights into the design that just trawling through the code cannot.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T20:15:32.270

I wouldn't use any of the tools you mentioned.

You need to draw a high-level diagram (I like pencil and paper).

I would design a system that has different modules doing different things, it would be worthwhile do design this so that you can have many instances of every module running in parallel.

I would think about using multiple queues for

*   URLs to Crawl
*   Crawled pages from the web
*   Extracted information based on templates & business rules
*   Parsed results
*   normalizationed & filtered results

You would have simple (probably command-line with no UI) programs that would read data from the queues and insert data into one or more queues (The Crawler would feed both the **"URLs to Crawl"** and **"Crawled pages from the web"**), You could use:

*   A web crawler
*   A data extractor
*   A parser
*   A normalizer and filterer

These would fit between the queues, and you could run many copies of these on separate PCs, allowing this to scale.

The last queue could be fed to another program that actually posts everything into a database for actual use.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T18:34:38.107

Top down design helps a lot. One mistake I see is making the top down design sacred. Your top level design needs to be reviewed and update just like any other section of code.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-22T16:30:45.453

It's important to partition these components throughout your software development life cycle - design time, development time, testing, release and runtime. Just drawing a diagram isn't enough.

I have found that adopting a microkernel architecture can really help "divide and conqure" this complexity. The essence of the microkernel architecture is:

*   Processes (each component runs in an isolated memory space)
*   Threads (each component runs on a separate thread)
*   Communication (components communicate through a single, simple message passing channel)

I have written a fairly complex batch processing systems which sound similar to your system using:

Each component maps to .NET executable Executable lifetimes are managed through Autosys (all on the same machine) Communication takes place through TIBCO Rendezvous

If you can use a toolkit that provides some runtime introspection, even better. For example, Autosys lets me see what processes are running, what errors have occurred while TIBCO lets me inspect message queues at runtime.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-10-18T17:57:37.780

I like to use NDepend to reverse engineer complex .NET code base. The tool comes with several great visualization features like:

Dependency Graph: ![alt text](https://i.stack.imgur.com/pZT2j.png)

Dependency Matrix: ![alt text](https://i.stack.imgur.com/dwXPE.png)

Code metric visualization through treemaping: ![alt text](https://i.stack.imgur.com/Wer0h.png)

# proxy - Specifying a proxy to use with DotNetOpenID

> ID：304064
> 
> 赞同：4
> 
> 时间：2008-11-20T01:23:57.483
> 
> 标签：proxy, openid, dotnetopenauth

I'm using DotNetOpenID to provide relying party OpenID support for our website. All external requests have to be brokered via a proxy server, and I'm looking for a way to tell DotNetOpenID to use this proxy. I know I can set up a global proxy config in web.config, but I currently only want this to apply to the calls made to the OpenID provider during authentication. Is this possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T19:49:28.483

I ended up solving this by using specifying a proxy in `web.config`, with a bypasslist specified so only external requests would use the proxy server:

```
<system.net>
  <defaultProxy>
    <proxy
      usesystemdefault = "False"
      proxyaddress="http://myproxyserver:8080"
      bypassonlocal="True"
    />
    <bypasslist>
      <add address="[a-z]+\.mydomain\.com"/>
      <add address="[a-z]+\.myotherdomain\.com"/>
    </bypasslist>
  </defaultProxy>
</system.net> 
```

# c# - 泛型/JSON JavaScriptSerializer C#

> ID：304081
> 
> 赞同：12
> 
> 时间：2008-11-20T01:32:49.757
> 
> 标签：c#, json

我正在使用 VS2008Express 在 NET3.5SP1 中构建一个 winForms 应用程序。我正在尝试使用 System.Web.Script.Serialization 库反序列化对象。

错误是：类型'jsonWinForm.Category'不支持数组的反序列化。

干杯!

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Web;
using System.Net;
using System.IO;
using System.Web.Script.Serialization;

namespace jsonWinForm {
    public class Category
    {
        public int categoryid;
        public string name;
        public int serverimageid;
        public DateTime dateuploaded;
        public bool enabled;
    }

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            using (WebClient client = new WebClient())
            {
                //manipulate request headers (optional)
                client.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
                string targetUri = "http://www.davemateer.com/ig/genius/category.php";

                //execute request and read response as string to console
                using (StreamReader reader = new StreamReader(client.OpenRead(targetUri)))
                {
                    string s = reader.ReadToEnd();
                    textBox1.Text = s;

                    Category cat = new Category();
                    JavaScriptSerializer serializer = new JavaScriptSerializer();

                    // this fails with a 
                    //Type 'jsonWinForm.Category' is not supported for deserialization of an array.
                    serializer.Deserialize<Category>(s);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-20T02:21:37.193

我发现我的错误..应该是：

干杯

```
JavaScriptSerializer serializer = new JavaScriptSerializer();

// create a generic list of categories
List<Category> listOfCategories = new List<Category>();

// deserialize as a list of Categories, and put into listOfCategories
listOfCategories = serializer.Deserialize<List<Category>>(s);

//iterate through list and display in text box
foreach (Category item in listOfCategories)
{
    textBox2.Text += item.categoryid.ToString() + "\r\n";
    textBox2.Text += item.name.ToString() + "\r\n";
    textBox2.Text += item.serverimageid.ToString() + "\r\n";
    textBox2.Text += item.dateuploaded.ToString() + "\r\n";
    textBox2.Text += item.enabled.ToString() + "\r\n";
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-11-20T02:31:49.937

很高兴你发现了你的错误。如果您正在寻找另一种用于 JSON 序列化的工具，您可能想尝试[JSON.Net](http://james.newtonking.com/pages/json-net.aspx)。

# security - 是否有安全的浏览器缓存？

> ID：304086
> 
> 赞同：3
> 
> 时间：2008-11-20T01:34:09.740
> 
> 标签：security, browser, caching, google-gears, privacy

注意：这是与 https 不同的问题 - 它与隐私安全有关

我试图弄清楚是否有办法通过将信息推送到浏览器来减轻我们的服务器 [缓存] 的负载。是否有任何技术可以提供绑定到会话的安全缓存？

我们有经常使用但不会有太大变化的隐私敏感数据。一直从服务器/数据库重新请求更新会降低敏感度。

该解决方案不能依赖于任何页面一直保持打开状态（例如，没有框架集）。允许离开页面（或打开新标签）导航。

Google Gears 适合这里吗？我找不到将缓存绑定到会话的任何方法。

问题域是多个 Web 应用程序用户的咖啡馆/共享机器登录。例如，当会话到期或用户注销时，任何地方都不应有缓存数据。当他们登录时，我认为没有其他人可以物理访问计算机。

另请参阅[HTML5 sessionStorage 可以写入磁盘吗？](https://stackoverflow.com/questions/304284/can-html5-sessionstorage-be-written-to-disk)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T01:37:40.950

您将拥有具有类似本地数据库功能的 HTML5.0。但是，您所说的安全是什么意思？HTML5.0 可以防止跨站点问题，但用户仍然可以完全访问数据，我认为不需要加密。

Google gears 确实适合，但它不是标准，而 HTML5.0 是，Safari 支持 5.0，我猜 Opera 和 Firefox 到 2009 年中期也会支持，如果他们还没有的话。Explorer，可能会有一些错误的实现，因此他们可以强制开发人员使用 Silverlight。

**编辑：**斯蒂芬，我看到你需要在他们离开后销毁缓存，当然，除非他们的机器有接近传感器，否则这是不可能的:) 但是你可以让你的 Javascript 在他们注销时删除所有内容。

链接到[HTML5.0 规范](http://www.w3.org/html/wg/html5/)，

链接到[HTML5.0 缓存规范](http://www.whatwg.org/specs/web-apps/current-work/#appcache)

链接到[HTML5.0 会话存储规范](http://www.whatwg.org/specs/web-apps/current-work/#the-sessionstorage-attribute)（应受欢迎的要求 :)

# c++ - C 代码仍然被认为是 C++ 吗？

> ID：304088
> 
> 赞同：10
> 
> 时间：2008-11-20T01:36:10.187
> 
> 标签：c++, c

[对这个答案](https://stackoverflow.com/questions/200090/how-do-you-convert-a-c-string-to-an-int#200099)的评论让我想知道。我一直认为 C 是 C++ 的真子集，也就是说，任何有效的 C 代码通过扩展都是有效的 C++ 代码。我错了吗？是否可以编写不是有效 C++ 代码的有效 C 程序？

[编辑：这与此问题](https://stackoverflow.com/questions/145096/is-c-actually-a-superset-of-c#145098)非常相似，但不是完全相同。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-20T01:37:33.133

通常，是的，C 代码被认为是 C++ 代码。

但 C 不是严格意义上的真子集。有几个例外。

以下是一些在 C 中有效但在 C++ 中无效的内容：

```
int *new;//<-- new is not a keyword in C
char *p = malloc(1024); //void * to char* without cast 
```

还有更多的例子，但你明白了。

[我之前在这里](https://stackoverflow.com/questions/145096/is-c-actually-a-superset-of-c#145098)的一个类似问题中写了一个更广泛的答案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-20T03:03:55.410

另请注意，C99 添加了 C++ 中不允许的一些特性（或仅使用供应商扩展支持），例如内置`_Complex`和`_Imaginary`数据类型、可变长度数组（在运行时而不是编译时调整大小的数组）、灵活的数组成员（声明为结构的最后一个成员的数组，可能包含未指定数量的元素）等等。

有关 C 和 C++ 之间不兼容的详尽列表，包括对 C99 的更改，请参阅[http://david.tribble.com/text/cdiffs.htm](http://david.tribble.com/text/cdiffs.htm)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-20T02:38:58.143

还有几个：

C 允许递归调用 main，C++ 不允许

`char foo[3] = "abc"`是合法的 C，而不是 C++

`sizeof('A') == sizeof(int)`在 C 中为真，在 C++ 中为假

C99还有更多变化

编辑：我发现一篇列出了大部分差异的帖子。[http://c-faq.com/misc/cplusplus.nr.html](http://c-faq.com/misc/cplusplus.nr.html)

总结为什么 C 不是 C++ 的真子集：

1.  自动转换`void *`为任何对象/不完整类型
2.  新关键字（其中一些）
3.  由于`struct`s 成为范围
4.  由于`struct`标签成为`typedef`s
5.  由于需要原型
6.  隐含`int`规则
7.  递归调用`main`
8.  由于`//`评论
9.  由于字符文字是类型`char`而不是`int`等。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-20T02:33:57.013

其他一些有效的 C 但不是 C++ 的东西：

```
int func();
func(0,0); //Error in C++, but not in C 
```

也不要低估 C++ 拥有更多关键字的影响：

```
int new;  //Obviously an error in C++ 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-11-20T02:34:41.257

将两者区分开并在日常开发中出现的一件事是链接和函数名称修改。用 C 编译器编译的 AC 函数不能被 C++ 访问，除非原型用`extern "C"`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-20T01:40:54.437

```
typedef struct {
     int a, b, c;
} st;

st s = {
    .a = 1,
    .b = 2,
}; 
```

*这是在大多数*C++ 编译器中无法编译的有效 C 代码。据我所知，它不是 C++ 规范的一部分。然而，一些 C++ 编译器对语言的某些部分是“自由的”，允许他们不应该做的事情，就像很多人错过了规范中但几乎从未使用过的一些细微差别一样。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-20T01:54:52.007

我认为说 ANSI C 是 C++ 的子集可能更正确。不是 K&R C。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-20T02:22:52.857

另请参阅[是否真的不需要学习 C，因为 C++ 包含一切](https://stackoverflow.com/questions/145096/)。C 和 C++ 有一个很大的通用子集；C++ 中有很多 C 语言没有的扩展；C 中有一些 C++ 中没有的位（主要是您不想使用的位）；并且有一些位在 C 和 C++ 中但不同。

# c++ - 为什么 shared_ptr 有一个显式的构造函数

> ID：304093
> 
> 赞同：4
> 
> 时间：2008-11-20T01:37:47.877
> 
> 标签：c++, boost, refcounting

我想知道为什么`shared_ptr`没有隐式构造函数。这里没有提到它的事实：[为此获得 boost::shared_ptr](https://stackoverflow.com/questions/142391/getting-a-boostsharedptr-for-this)

（我找到了原因，但认为无论如何发布这将是一个有趣的问题。）

```
#include <boost/shared_ptr.hpp>
#include <iostream>

using namespace boost;
using namespace std;

void fun(shared_ptr<int> ptr) {
    cout << *ptr << endl;
}

int main() {
    int foo = 5;
    fun(&foo);
    return 0;
}

/* shared_ptr_test.cpp: In function `int main()':
 * shared_ptr_test.cpp:13: conversion from `int*' to non-scalar type `
 *  boost::shared_ptr<int>' requested */ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-20T02:30:01.140

在这种情况下，shared_ptr 将尝试释放您分配的 int 堆栈。您不希望这样，因此显式构造函数可以让您考虑它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-10-07T14:38:13.050

合乎逻辑的原因是：

*   调用`delete`运算符在 C++ 中并不隐含
*   **创建任何拥有的智能指针**（`shared_`无论什么，`scoped_`随便......）**实际上是对`delete`操作员的（延迟）调用**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T02:05:21.440

长期潜伏者，以及这里的 3 年级软工程学生，偶然的猜测是，阻止您尝试将“自然”指针转换为 shared_ptr，然后释放指向的对象，而 shared_ptr 不知道释放。

（另外，引用计数问题等等）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-11-20T02:37:09.817

```
int main() {

    int foo = 5;
    fun(&foo);

    cout << foo << endl; // ops!!

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2011-03-25T07:06:13.750

我认为没有理由在这个构造函数中有明确的。

提到的不正确使用偏移地址运算符 (&) 的示例没有任何意义，因为在现代 C++ 中没有使用此类运算符的地方。除了赋值/比较运算符中的惯用代码，例如“this == &other”，也许还有一些测试代码。

# haskell - 我需要多少数学才能在 Haskell 中变得富有成效？

> ID：304103
> 
> 赞同：9
> 
> 时间：2008-11-20T01:48:03.767
> 
> 标签：haskell, theory

我有兴趣在自己的时间（而不是通过课程）学习 Haskell，但我怀疑我的数学背景可能不足以理解重要的语言概念 (TBD)。

我有一年的大学微积分（单变量），但没有离散数学或逻辑。

我会在数学上遇到空白吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-20T01:58:33.043

你为什么不试试看呢？

Haskell 的设计借鉴了范畴论（monads、arrows、transformers）等领域的数学思想，但大多数 Haskell 程序员只了解这些与编程的关系:-)

你不需要任何特别高级的数学来学习 Haskell，除了能够在数学意义上思考一个函数（比如，“a map f: X -> Y”而不是作为执行某些操作的“子程序”）动作），能够考虑高阶函数（例如，说“'compose f g' 是一个在输入 x 处具有值 f(g(x)) 的函数”）等等。Haskell 的符号非常干净，所以这也不应该是一个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-20T01:57:07.947

Haskell 的重要概念对所有纯函数式语言也很重要，我相信不一定需要高等数学。

考虑到你已经有一年的微积分，你会没事的。

虽然有 lambda 演算的背景可能很好，但这对 Haskell 来说并不是硬性要求。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-20T02:14:05.947

你会没事的。水是温暖的。跳进去！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-20T02:35:33.547

数学？嗯，没有。你根本不需要数学（就像代数、微积分、几何这个词的常识中的数学），但你确实需要一个逻辑（逻辑==数学？）大脑来编程，就像使用任何其他语言一样

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-04T22:27:30.127

大约八年前，我自学了 Haskell，只学过商业微积分，我认为不需要任何数学。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-02T06:58:35.310

我相信 Haskell 会教给你很多逻辑和离散数学，然后学习 Haskell，你也会获得一些数学技能 :)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-13T03:32:08.813

你知道的代数和范畴论越通用越好，因为 Haskell 从这些数学分支（即 Monad、代数类型系统、箭头和函子）中汲取了很多东西。

# testing - 用于验证文件名和格式的预先存在的工具

> ID：304104
> 
> 赞同：2
> 
> 时间：2008-11-20T01:48:35.890
> 
> 标签：testing, deployment, build, qa

我们必须验证大量资源文件的命名约定和格式完整性等。

是否有可用的框架/工具使这更容易？我想到了像 Ant/Phing 这样的构建工具，但我想知道是否有更专注于这种测试的东西。

理想情况下，它将根据修改时间缓存结果并生成不合格文件的报告。它应该足够灵活，可以快速轻松地将任意测试添加到适合某个正则表达式的文件中。就像测试所有位于 3 个目录深处的 *.psd 并确保它们的颜色空间是 CMYK。添加依赖关系也应该很容易，这样如果其中一个 PSD 失败，父目录 .. 说 2 级，也会被标记为无效。理想情况下，它是可插入的，因此我们可以编写一个 shell 脚本或其他东西来执行返回 true/false 的新测试（如 CMYK 测试）。

当然，我们可以自己动手……但不要重新发明轮子。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T02:05:45.010

[Checkstyle](http://checkstyle.sourceforge.net/)是最好的工具。

具体来说，您可能需要编写[FileSetCheck](http://checkstyle.sourceforge.net/writingchecks.html#Writing%20FileSetChecks)。

# c# - 获取与正在运行的应用程序关联的图标

> ID：304109
> 
> 赞同：8
> 
> 时间：2008-11-20T01:51:08.020
> 
> 标签：c#, winapi

有了打开的应用程序的窗口句柄，我就可以使用 GetWindowText 函数从应用程序的标题栏中检索文本。我想更进一步，检索与同一应用程序关联的图标。

我该怎么做呢？我浏览了我认为是相关的 Win32 API 部分，但没有任何东西跳出来。

任何指针将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-11-20T01:56:59.180

```
Icon ico = Icon.ExtractAssociatedIcon(theProcess.MainModule.FileName); 
```

[来自 TheSoftwareJedi](https://stackoverflow.com/questions/203456/how-can-i-get-the-icon-from-the-executable-file-only-having-an-instance-of-its#203490)

[最初，这似乎与如何从可执行文件中获取图标](https://stackoverflow.com/questions/203456/how-can-i-get-the-icon-from-the-executable-file-only-having-an-instance-of-its)完全相同，只有在 C# 中它的进程实例，但似乎主要关注如何从它自己的内部获取它，而你可能是询问如何使用与正在运行的进程分开的程序来获取图标。

-亚当

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T11:12:45.930

您可以执行以下操作：

```
[DllImport("user32.dll")]
static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

[DllImport("user32.dll")]
static extern IntPtr LoadIcon(IntPtr hInstance, IntPtr lpIconName);

[DllImport("user32.dll", EntryPoint = "GetClassLong")]
static extern uint GetClassLong32(IntPtr hWnd, int nIndex);

[DllImport("user32.dll", EntryPoint = "GetClassLongPtr")]
static extern IntPtr GetClassLong64(IntPtr hWnd, int nIndex);

/// <summary>
/// 64 bit version maybe loses significant 64-bit specific information
/// </summary>
static IntPtr GetClassLongPtr(IntPtr hWnd, int nIndex)
{
    if (IntPtr.Size == 4)
        return new IntPtr((long)GetClassLong32(hWnd, nIndex));
    else
        return GetClassLong64(hWnd, nIndex);
}

uint WM_GETICON = 0x007f;
IntPtr ICON_SMALL2 = new IntPtr(2);
IntPtr IDI_APPLICATION = new IntPtr(0x7F00);
int GCL_HICON = -14;

public static Image GetSmallWindowIcon(IntPtr hWnd)
{
    try
    {
        IntPtr hIcon = default(IntPtr);

        hIcon = SendMessage(hWnd, WM_GETICON, ICON_SMALL2, IntPtr.Zero);

        if (hIcon == IntPtr.Zero)
            hIcon = GetClassLongPtr(hWnd, GCL_HICON);

        if (hIcon == IntPtr.Zero)
            hIcon = LoadIcon(IntPtr.Zero, (IntPtr)0x7F00/*IDI_APPLICATION*/);

        if (hIcon != IntPtr.Zero)
            return new Bitmap(Icon.FromHandle(hIcon).ToBitmap(), 16, 16);
        else
            return null;
    }
    catch (Exception)
    {
        return null;
    }
} 
```

此代码检索小窗口图标，该图标显示在标题栏中的窗口文本旁边。

# asp.net-mvc - 有没有办法将可选参数发送到操作？

> ID：304110
> 
> 赞同：6
> 
> 时间：2008-11-20T01:52:38.750
> 
> 标签：asp.net-mvc, optional-parameters

我可以通过 asp.net mvc 中的 GET 请求将可选参数（空字符串、null int？等）发送到操作吗？（一句话问题！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T02:07:52.980

你可以很容易地使用路由表来做可选参数，只需在 global.cs 文件的路由中指定默认值。

因此，对于带有可选查询和页面的搜索页面，您将拥有类似

```
RouteTable.Routes.Add(new Route
{
    Url = "Search/[query]/[page]",
    Defaults = new { controller="Search", action="Results", page=1 },
    RouteHandler = typeof(MvcRouteHandler)
}); 
```

您搜索的默认页面为 1。

[此示例可在 Scott Gu 的博客上找到。](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)

# python - Google App Engine 上博客标签系统的数据建模建议

> ID：304117
> 
> 赞同：8
> 
> 时间：2008-11-20T01:56:32.207
> 
> 标签：python, google-app-engine, data-modeling

我想知道是否有人可以就构建数据模型以完成下面描述的简单系统的有效方法提供一些概念性建议。对以非关系方式思考有点陌生，并想尝试避免任何明显的陷阱。我的理解是，一个基本原则是“存储很便宜，不用担心数据重复”，就像在规范化的 RDBMS 中一样。

我想建模的是：

可以给定 0-n 个标签的博客文章。许多博客文章可以共享相同的标签。检索数据时希望允许检索与标签匹配的所有文章。在许多方面与stackoverflow 采用的方法非常相似。

我的正常心态是在标签和博客文章之间建立多对多的关系。然而，我认为在 GAE 的背景下这会很昂贵，尽管我已经看到了它正在完成的例子。

也许使用包含每个标签作为文章实体的一部分的 ListProperty，以及在添加和删除标签时跟踪标签的第二个数据模型？这种方式不需要任何关系，并且 ListProperty 仍然允许查询任何列表元素匹配将返回结果。

关于在 GAE 上解决此问题的最有效方法有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-21T03:22:38.600

感谢你们两位的建议。我已经实现（第一次迭代）如下。不确定这是否是最好的方法，但它正在工作。

A 类 = 文章。有一个可以在它的列表元素上查询的 StringListProperty

B 类 = 标签。每个标签一个实体，还保留使用每个标签的文章总数的运行计数。

对 A 的数据修改伴随着对 B​​ 的维护工作。在读取繁重的环境中，预先计算计数是一种好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T21:41:10.937

预先计算 counts~~不仅~~实用~~，而且很有必要，因为 count() 函数最多返回 1000~~。如果写争用可能是一个问题，请务必查看分片计数器示例。

[http://code.google.com/appengine/articles/sharding_counters.html](http://code.google.com/appengine/articles/sharding_counters.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T02:31:29.140

多对多听起来很合理。也许您应该先尝试一下，看看它是否真的很贵。

GAE 的好处是它会在您使用太多周期时告诉您。免费分析！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T23:43:15.813

一种可能的方法是使用`Expando`，您可以在其中添加如下标签：

```
setattr(entity, 'tag_'+tag_name, True) 
```

然后您可以使用以下标签查询所有实体：

```
def get_all_with_tag(model_class, tag):
    return model_class.all().filter('tag_%s =' % tag, True) 
```

当然，您必须清理标签以成为正确的 Python 标识符。我还没有尝试过，所以我不确定它是否真的是一个好的解决方案。

# sql - 如何从 sql 语句中返回常量？

> ID：304129
> 
> 赞同：22
> 
> 时间：2008-11-20T02:02:01.867
> 
> 标签：sql, sql-server, tsql, sql-server-2000

如何从 sql 语句中返回常量？

例如，如果我的（布尔表达式）为真，我将如何更改下面的代码以便返回“我的消息”

```
if (my boolean expression)
 "my message"
else
 select top 1 name from people; 
```

我正在使用 ms sql 2000

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-11-20T02:08:23.167

你试过了吗：

```
select 'my message'; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-20T02:40:03.833

```
select "my message" as message 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-20T02:13:49.003

我没有方便的 MSSQL，但请检查 CASE 语句的语法以防我弄错了，而且我不确定 TOP 1 是否应该像我把它放在这里那样放在案例之外还是应该放在里面（ ELSE TOP 1 名称）。这个想法是：

```
SELECT TOP 1 CASE WHEN myexpression = 'true' THEN 'my message' ELSE name END
FROM people; 
```

这里 myexpression 必须是常量或与查询中存在的表相关，例如

```
CASE WHEN address LIKE '%Michigan%' 
```

其中地址是 people 表中的另一个字段。

[PS：在这里](https://stackoverflow.com/questions/4622/sql-case-statement-syntax)找到 MSSQL CASE 语法:-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-20T04:23:00.507

```
select top 1 name 
from people
where @MyParameter = whatever

union

select 'my message' as name
where @MyParameter != whatever 
```

全部在一份声明中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T02:41:01.947

我刚刚在 AdventureWorks 数据库上试过这个，它可以工作

```
Use AdventureWorks

Declare @myVar int
SET @myVar = 1

if (@myVar = 2)

     select top 2 * from HumanResources.Department

else

     select top 1 * from HumanResources.Department 
```

# windows-vista - RegDelete 无法删除 WSH 5.7 中的注册表项

> ID：304130
> 
> 赞同：0
> 
> 时间：2008-11-20T02:03:05.517
> 
> 标签：windows-vista, vbscript, registry, wsh

根据[http://www.tweakguides.com/VA_4.html](http://www.tweakguides.com/VA_4.html)提供的建议，以防止 Windows Vista 在 Windows 资源管理器中“智能地”重新排列列格式，我编写了一个脚本来稍微自动化该过程。

```
Dim WshShell
Set WshShell = WScript.CreateObject("WScript.Shell")

'Remove the "filthy" reg keys first.
regKey = "HKCU\Software\Classes\Local Settings\Software\Microsoft\Windows\Shell\BagMRU\"

WScript.Echo "Deleting " & regKey & VbCrLf
WshShell.RegDelete regKey

regKey = "HKCU\Software\Classes\Local Settings\Software\Microsoft\Windows\Shell\Bags\"

WScript.Echo "Deleting " & regKey & VbCrLf
WshShell.RegDelete regKey

'Then recreate a clean Bags key, with sub-keys and FolderType value.
regKey = "HKCU\Software\Classes\Local Settings\Software\Microsoft\ Windows\Shell\Bags\AllFolders\Shell\FolderType"

WScript.Echo "Creating " & regKey & " as 'NotSpecified' REG_SZ " & VbCrLf
WshShell.RegWrite regKey, "NotSpecified", "REG_SZ"

WScript.Echo "Now define the columns of your preference in Windows Explorer," & VbCrLf
WScript.Echo "and click the Apply to Folders button in Folder Options." & VbCrLf 
```

但它拒绝删除注册表项

```
E:\archive\settings\Windows Vista Explorer columns.vbs(9, 1) WshShell.RegDelete:
 Unable to remove registry key "HKCU\Software\Classes\Local Settings\Software\Mi
crosoft\Windows\Shell\BagMRU\". 
```

建议是在后面加上“\”来表示一个键，我这样做了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-16T19:23:58.163

您的注册表设置是否有子项？我认为您必须先删除它们，然后才能删除密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-19T14:41:47.837

在 Windows Vista 中禁用 UAC，然后这个脚本就可以正常工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-03-10T09:05:33.223

打破它：）

```
Const HKCR=&H80000000:Const HKCU=&H80000001:Const HKLM=&H80000002:Const HKU=&H80000003:Const HKCC=&H80000005

dim pc,o,hive,key,name,value,i
pc="."
Set o=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & pc & "\root\default:StdRegProv")

hive=HKCU
key="Software\Microsoft\Windows\CurrentVersion\Explorer\Wallpapers\knownfolders\0\windows wallpapers\mergefolders"
regrid 5

sub regrid(levels)
dim a,n,j,base,s
    a=split(key,"\")
    n=ubound(a)
    base="":for i=0 to levels-1:base=base & a(i) & "\":next
    for i=n to levels step -1
        s="":for j=levels to i:s=s & a(j) & "\":next
        o.DeleteKey hive,base & s
    next
end sub 
```

感谢大家对解放教育的支持

# php - 如何最好地在页面之间为用户传递消息

> ID：304139
> 
> 赞同：4
> 
> 时间：2008-11-20T02:08:31.230
> 
> 标签：php, session, messages, status-message

所以事件链是：

1.  用户提交表单。
2.  在处理提交的过程中，会生成一条消息，例如“您的记录已保存”。
3.  用户被重定向到一个新页面，比如搜索结果。
4.  新页面需要显示消息。

那么，问题是如何从第 2 步到第 3 步获取消息？这只是一个简单的例子……还有许多其他更复杂的例子。

我正在使用 PHP。

需求：

*   支持多条消息，需要在接收机器上按要求进行格式化
*   可以在同一页面上添加消息（例如在第 4 步中）
*   从任何函数或对象内部添加的消息

我想出了一些选择：

*   以数组形式存储在会话变量中，并在每次显示后清空
*   作为获取或查询参数传递；当您不断处理此问题并且必须记住要获取它时，可能会很烦人；因为它可能会变长，它很容易超过查询字符串的最大长度
*   在每个会话的基础上存储在数据库中（可能并不总是用于登录用户）；这将需要在添加它们的每个页面上进行额外的插入，可能是多个插入，并且在每个页面上进行额外的选择

目前我一直在将会话中的消息存储在一个数组中，但我想知道是否有更好的方法。我不认为上面的其他 2 个选项非常好。

**编辑：**我对会话方法使用 2 个函数：AddStatusMsg()（将元素添加到数组）和 DisplayStatusMsg()（返回 HTML 格式的消息并清空数组）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-20T03:42:15.800

I would recommend AGAINST storing these messages either in the database or in the session, for one simple reason: tabs. (Well, really, the stateless nature of HTTP.)

Think of a person who's got multiple tabs open of different sections of your website. This person performs some action and while that loads, switches to another tab and clicks on a link. If you're storing the messages in the session/database and the switched-to tab is a page that can display these messages too, the user has now entered a race condition where depending on which request the server responds to first, the messages may display where they were not intended.

Now, there are some situations where this legitimately might not matter, but it could also be extremely confusing in some cases.

Putting the messages in the request doesn't have to be as bad as it initially seems. Perhaps you could store all the messages you want to display in the database with a numeric (or, for bonus obfuscation, hash) ID, and pass a list of IDs in the query string. This keeps the query string short, and all you have to do is keep track of what ID corresponds to what message in your code.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-20T02:22:25.367

I would stick with the session approach only perhaps adding support for this messaging system on the master page. You are on the right way as the all other approaches have a greater cost, of simplicity or performance.

I suppose you have a master page which is the template for all other pages. If you don't have it's a good reason to have one, so you don't need to take care of handling the displaying of the messages on every page you need it as long as you have a specific place to show them.

You can also use a specific div rendered by the master page for that and let the position be handled by the current page. If I understand correctly you need some kind of timing between the showing of the message and the user redirection to another page. This could be achieved using any AJAX library to show that div I said before and then redirecting to a new page.

I suggest taking a look into [jQuery](http://www.jquery.com).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-20T02:34:24.330

This is how I like to do it:

```
function set_message($message_type, $message)
{
    $_SESSION['messages'][$message_type][] = $message
}

function get_messages()
{
    $messages_array = $_SESSION['messages'];
    unset($_SESSION['messages']);
    return $messages_array;
} 
```

where `$message_type` can be "warning", "error", "success", etc. and depending on the type you can show the user a different image/color/whatever.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T03:29:11.927

This problem is a classic example of how to have data persist in a "stateless protocol" like http.

Your options are:

1.  Pass it in the GET parameters (not user friendly)
2.  Store it in the DB
3.  Store it in Session

Options 2) and 3) require the user to have a cookie (otherwise, there's no way to match the user to the message). Between them, I'd go with PHP's built in sessions. Simply set a session variable at your step 2, and have the search page always check for the variable in your step 4

Nothing to it. Don't over complicate things.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T04:04:00.687

Probably the best way is to store it in the session. It's the simplest way and as John said, 'Don't over complicate things'.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T02:22:40.673

Store it in the database as well as the session. This way the user can get to his history if he needs it, and you have easy access through the session data.

Don't use a query parameter, it'll only confuse the user at some point when the message is displayed when it shouldn't be.

Displaying the messages should be a part of your main template (in other words; done once).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-20T02:24:43.430

Maybe a slight improvement would be to store, instead of an array, an object's instance that gets populated and knows how to display the messages appropriately, deleting the data itself after any display routine gets called. That way you don't have to repeat the display and delete logic everywhere, plus, you can code different output routines in the object depending on the need.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-20T02:29:36.087

I think you're doing it the right way. You should stay away from the database for this and putting it in the URL is ugly. You could write a nice little class for this which can make it simpler.

Here's a little session class:

```
<?php class session 
```

{

```
public function __construct()
{
    session_start();
}

public function set($name, $value)
{
    $_SESSION[$name] = $value;
}

public function get($name)
{
    return (isset($_SESSION[$name])) ? $_SESSION[$name] : false ;
}

public function delete($name)
{
    unset($_SESSION[$name]);
}

public function destroy()
{
    $_SESSION = array();
    #session_destory();
    #session_regenerate_id();
} 
```

}

A little message class can be built on that pretty easily.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-28T21:24:15.440

I'm at this crossroad myself and I've considered all options extensively.

1.  How about storing two browser cookies, one called page and the other called message.
2.  On redirect you overwrite the cookie.
3.  When the page loads you check if said cookie exists (in the http headers sent by the client).
4.  Check if it's for that page, if it is, store the message in a variable and unset the cookies.
5.  If it's not for that page, ignore it, it will be output on the other tab that is loading or if it is for a page that for some reason never unset the cookie it will eventually expire.

This avoids using the database and session cookies.

# project-management - 项目设计/规范批评，这是正确的想法吗？

> ID：304145
> 
> 赞同：2
> 
> 时间：2008-11-20T02:12:38.353
> 
> 标签：project-management, agile, specifications, requirements

假设我们正在创建 Acme CMS。此 CMS Web 应用程序将允许您创建无限数量的具有子类别（无限深度）的类别，并且每个类别可以有 0+ 个与之关联的内容页面。

所以这个项目，在高层次上将有：

*前端* 1\. 索引页面 2\. 带有内容页面列表的类别页面 3\. 内容页面

*管理控制面板* 1\. 类别（添加/更新/删除） 2\. 页面（添加/更新/删除/）

架构设计 1\. 表 2\. 存储过程 3\. 数据访问层

问题：我正在使用错误跟踪器和 Wiki，那么我应该如何分解这个项目？

我正在考虑将每个部分（前端/管理面板）分解为单独的页面，然后为每个页面（或主题）编写简单的用户故事。

当我完成用户故事后，我将在我的错误跟踪器中创建一个案例列表，代表我必须开发的功能，以及对每个案例的估计。

**我是否正确地分解了这个项目？计划中的任何重大差距都会导致该项目失败（理论上无论如何！）**

**请提供详细的答案，也许是我应该做什么的大致想法，并附有详细的示例来解释它以及原因等。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T02:48:46.360

“我正在考虑将每个部分（前端/管理面板）分解为单独的页面，然后为每个页面（或主题）编写简单的用户故事。”

页面没有故事。用户有故事。页面是您为实现用户故事而构建的东西。

主题——如果有这么小的东西的话——是“管理内容”。也许有两个主题：关于写作/编辑的故事集和围绕浏览/阅读的故事。

一些用户（'编辑'？）想要创建、组织、更新和删除内容，以便他们可以*做一些事情*[问题没有说]。你强迫他们使用网页，因为它比 5x8 卡片和记号笔更好——更便宜——更快。

一些用户（“读者”？）想要检查内容并进行导航，以便他们能够——谁知道呢？——在某事上更快乐、更有成效。你强迫他们使用网页，因为它比用磁铁固定在白板上的 5x8 卡片要好。

您有关于创建和管理内容主题的故事。

“然后在我的错误跟踪器中创建一个案例列表，代表我必须开发的功能，以及每个案例的估计”

正确的。并且功能必须首先从数据模型开始，然后以某种有用的形式呈现。也许在页面上。确实，一旦您拥有一个广泛满足用例的模型，您就可以微调演示文稿以使模型更可用。

“业务层和表示是我需要详细说明的”

模型 == 业务层。他们是一样的。

页面 == 演示文稿。笔记。这是最后一次。一旦你有了用例和支持这些用例的模型，你就可以向人们展示你的东西，这样他们就可以与模型进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-08T12:01:22.633

据我所见，您的设计中有一些明显的差距，部分功能是隐含的（类别和页面的链接），有些则完全被遗漏了（管理员登录、用户管理、预览等）。这些将占您小型应用程序的大约一半，您最好将它们包含在初始大纲中。也许您可能希望采用更系统的方法来设计 CMS。您可以采取至少三种一般路线：

1.  首先设计领域模型，然后设计业务层，然后是 UI 和数据模型。

2.  从数据模型开始，在其之上构建业务层和 UI。

3.  首先对 UI 建模，然后是其他一切。

无论您更愿意采取（或组合）哪条道路，都有一些一般准则：

1.  从您想要自动化的工作的大图开始。这称为“工作范围”。这里的“大图”可以按字面意思表示，虽然它可能只是一个描述过程的故事，但最好使用包含动作、人工制品、其他应用程序、用户等的丰富图片来可视化。至于“大”图片需要包含比预期产品更多的部分，大于您想要自动化的工作部分。

2.  然后概述您希望您的产品处理的具体工作。这通常被称为“产品范围”。

3.  为您的应用程序制作用户角色（或配置文件）列表、输入和输出列表、外部接口列表。

4.  现在您可能想开始编写一些用户故事。每个用户配置文件至少需要一个，因为您需要提供所有用户视角的说明。

5.  在这一点上，您可以使用足够的信息来开始使用领域模型、UI 模型或数据模型对问题进行更精确的建模，无论您喜欢或感觉更舒服。

所有步骤都非常迭代。一旦您对应用程序、其更广泛的上下文以及需要实现的功能列表来满足您的要求有更多的了解，您就可以给出一些非常粗略的估计，然后进行优先级排序过程。

不用说，这只是一个简化的框架，许多软件开发人员会根据他们的技能、需求、偏好等采用不同的方法来设计应用程序。但这可能是对问题进行更系统评估的一个很好的起点你想解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T02:20:35.387

“无限”部分被打破......即使GMail也有上限......

编辑：虽然我的回答被否决了，但我认为这是正确的。一旦您与非程序员交谈，“无限”部分就会变得非常危险，并且可能会在背后刺伤您。此外，您不能真正拥有用于无限嵌套的可扩展数据模式......但这应该是显而易见的。

# iis-7 - IIS 7 中的 ISAPI_Rewrite

> ID：304148
> 
> 赞同：4
> 
> 时间：2008-11-20T02:13:39.927
> 
> 标签：iis-7, url-rewriting, isapi-rewrite

多年来，我一直在 Server 2003 机器上使用 Helicon ( [http://www.helicontech.com/isapi_rewrite/](http://www.helicontech.com/isapi_rewrite/) ) 的 ISAPI_Rewrite，并且一直很幸运。

我正在将 2003 机器上的所有站点迁移到一个新的闪亮的 Server 2008 机器上。我宁愿不购买新许可证，而且我听说 IIS 7 将具有内置功能。

所有重写都设置在 .htaccess 配置文件中，就像 Apache 的 mod_rewrite 一样。

有谁知道此功能是否已融入 IIS 7，如果是，您是否知道任何解释如何启用它的好文章？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T02:16:04.787

正如您所提到的，IIS7 确实具有内置的功能。您可以使用自定义 HttpModule，如[Tip/Trick: Url Rewriting with ASP.NET](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)中所述。

或者，您可以按照[此处所述安装](http://www.hanselman.com/blog/ASPNETMVCAndTheNewIIS7RewriteModule.aspx)[IIS7 重写模块](http://www.iis.net/downloads/default.aspx?tabid=34&g=6&i=1691)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T02:34:26.093

是的，请查看[IIS 7 URL 重写模块](http://www.iis.net/extensions/URLRewrite)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-01T14:17:12.830

在您安装应用程序请求路由器 (ARR) IIS 扩展及其所有依赖项之前，它不是内置的，您必须按特定顺序执行这些操作：

1.  网络农场框架模块。
2.  外部缓存模块。
3.  URL 重写模块。

然后是 ARR 模块。

[每个都需要从download.microsoft.com](http://download.microsoft.com)单独下载，但都是免费的。

参考： [https ://blogs.technet.microsoft.com/erezs_iis_blog/2013/11/27/installing-arr-manually-without-webpi/](https://blogs.technet.microsoft.com/erezs_iis_blog/2013/11/27/installing-arr-manually-without-webpi/)

# python - 扭曲的 FTPFileListProtocol 和带空格的文件名

> ID：304152
> 
> 赞同：2
> 
> 时间：2008-11-20T02:16:38.173
> 
> 标签：python, ftp, twisted

我正在使用 Python 和[Twisted](http://twistedmatrix.com/trac/)框架连接到 FTP 站点以执行各种自动化任务。如果相关的话，我们的 FTP 服务器恰好是 Pure-FTPd。

**在FTPClient**上连接和调用**list**方法时，生成的**FTPFileListProtocol**的**文件**集合不包含任何包含空格 (' ') 的目录或文件名。

 ******有没有其他人看过这个？是创建 FTPFileListProtocol 的子类并覆盖其**unknownLine**方法，手动解析文件/目录名称的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-22T11:33:06.613

首先，如果您在检索的 FTP 列表上执行自动化任务，那么您可能应该查看`NLST`而不是[RFC 959 第 4.1.3 节](https://www.rfc-editor.org/rfc/rfc959#page-33)`LIST`中所述：

```
名单 (NLST)
 ...
            此命令旨在返回信息
            程序可以使用它来进一步处理
            文件自动。

```

[Twisted](http://twistedmatrix.com/documents/current/api/twisted.protocols.ftp.FTPClient.html#list)文档`LIST`说：

```
它可以处理最常见的文件列表格式。

```

这让我很怀疑；我不喜欢“应付”的解决方案。`LIST`旨在供人类消费而非机器处理。

如果您的目标服务器支持它们，那么您应该更喜欢`MLST`并`MLSD`按照[RFC 3659 第 7 节](https://www.rfc-editor.org/rfc/rfc3659#section-7)中的定义：

```
7\. 机器处理清单（MLST 和 MLSD）

   MLST 和 MLSD 命令旨在标准化文件和
   server-FTP进程返回的目录信息。这些
   命令与 LIST 命令的不同之处在于
   回复虽然可以扩展，但被严格定义。

```

但是，这些较新的命令可能在您的目标服务器上不可用，而且我在 Twisted 中看不到它们。因此`NLST`可能是您最好的选择。

至于问题的关键，可能有三个原因：

1.  返回结果的处理不正确（Twisted 可能有问题，正如您所建议的那样，或者可能是其他地方）
2.  服务器有问题，没有发送正确（完整）的响应
3.  正在发送错误的命令（不太可能使用直接`NLST`/ `LIST`，但如果为这些命令提供参数，某些服务器会做出不同的反应）

您可以通过查看通过线路发送的内容来消除（2）和（3）并证明原因是（1）。如果作为 Twisted API 或 Pure-FTPD 服务器日志配置的一部分，您无法使用此选项，那么您可能需要断开网络嗅探器，例如 tcpdump、snoop 或 WireShark（假设您被允许在你的环境）。请注意，您不仅需要跟踪控制连接（端口 21），还需要跟踪数据连接（因为它携带`LIST`/`NLST`命令的结果）。WireShark 很好，因为它会为您执行协议级别的分析。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-25T09:26:35.777

这在某种程度上是意料之中的。FTPFileListProtocol 不能理解每一个 FTP 输出，因为，有些是古怪的。如文档字符串中所述：

如果你对古怪的 FTP 服务器需要不同的邪恶，你可以覆盖 C{fileLinePattern} 或 C{parseDirectoryLine()}。

在这种情况下，它可能是一个错误：也许您可以改进 fileLinePattern 并使其理解带有空格的文件名。如果是这样，欢迎您在 Twisted 跟踪器中打开一个错误。

# web-services - 矢量或图表绘图 web 服务

> ID：304190
> 
> 赞同：1
> 
> 时间：2008-11-20T02:41:55.017
> 
> 标签：web-services, charts

我有一个网络应用程序，我想从中快速轻松地插入图表和图像。我希望在某个地方有一个 web 服务，它将接受一个带有参数的 URL，该参数描述矢量图形或图表并返回图像。

与谷歌图表对图形数据所做的没什么不同。

关于这方面的任何资源或想法？

如果我必须自己构建它，您对我如何实现它有一些想法吗？

例如，PHP/asp/etc 是否有能够呈现简单矢量图形的图形库？

-亚当

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T03:00:59.517

看看[拉斐尔](http://raphaeljs.com/)。由澳大利亚这里的一个家伙完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T04:07:39.477

> 与谷歌图表对图形数据所做的没什么不同。

为什么不直接使用 Google Chart API？

[http://code.google.com/apis/chart/](http://code.google.com/apis/chart/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T04:57:05.650

您是否考虑过类似[http://www.walterzorn.com/jsgraphics/jsgraphics_e.htm](http://www.walterzorn.com/jsgraphics/jsgraphics_e.htm)在客户端生成实际矢量图形，而不是向服务器发出请求？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T04:58:24.930

一种可能性是在浏览器中实时生成 SVG。这会降低浏览器的兼容性，但会随着时间的推移而降低。

# javascript - 使用 YUI 拖放时如何检测点击？

> ID：304205
> 
> 赞同：1
> 
> 时间：2008-11-20T02:54:48.923
> 
> 标签：javascript, yui

我正在使用 YUI 向 div 添加拖放支持。它还响应点击。不幸的是，即使在拖放操作之后，单击行为也会生效。这是一个代码片段：

```
// Create a DOM object for the group tag.
div = document.createElement('div');
div.className = 'group';
div.onclick = function() { beginEditName(); }
container.appendChild(div);

// Enable drag/drop for the group tag.
dragdrop = new YAHOO.util.DD(div);
dragdrop.scroll = false;
dragdrop.on('dragEvent', function(ev) { onDrag(ev); });
dragdrop.on('endDragEvent', function(ev) { onEndDrag(ev); });
dragdrop.setXConstraint(0,0); 
```

单击应该编辑文本，而拖放应该移动标签。但是，onclick 事件正在触发，以便在移动标记后开始文本编辑。

我可以围绕这个问题编写代码，但是有没有更直接的 YUI 方法来区分简单的单击和拖放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T04:40:28.537

迈克尔，

[http://ericmiraglia.com/yui/demos/ddclick.php](http://ericmiraglia.com/yui/demos/ddclick.php)

查看源代码，如果您对此有任何进一步的问题，请告诉我（yahoo dot com 的 ericmiraglia）。

修改。我会在这里复制代码，这样如果这个人从他的服务器上取下代码，人们就可以检查源代码。

```
var beingDragged = false;
var dd = new YAHOO.util.DD("drag");

dd.subscribe("mouseDownEvent", function(e){
    beingDragged = false;
});
dd.subscribe("startDragEvent", function(e) {
    beingDragged = true;
});
dd.subscribe("mouseUpEvent", function(e) {
    if(beingDragged) {
        alert("dragged")
    } else {
        alert("clicked");
    }
}) 
```

# asp.net - 如何使用来自 ASP.NET Script-Only ajax 控件工具包的 ModalPopup？

> ID：304213
> 
> 赞同：0
> 
> 时间：2008-11-20T03:02:38.127
> 
> 标签：asp.net, asp.net-mvc, asp.net-ajax

我在我的 asp.net MVC 应用程序中使用 ASP.NET**客户端**ajax 控件工具包。我看到 AjaxControlToolkit 文件夹中有一个名为“AjaxControlToolkit.ModalPopup.ModalPopupBehavior.js”的 .js 文件。但是，我找不到任何有关如何使用它的示例。

[编辑] - 如前所述，我正在使用客户端、仅脚本控制工具包。对于那些不熟悉的人，这里是 CodePlex 的描述：

> AjaxControlToolkit-ScriptFilesOnly.zip 包含工具包使用的脚本文件、CSS 样式表和图片。如果您不想使用嵌入式资源并更喜欢基于文件的模型，请使用此下载。

我还没有找到很多关于如何使用其中包含的一些脚本的资源。CodePlex 链接： http: [//www.codeplex.com/AjaxControlToolkit/Release/ProjectReleases.aspx](http://www.codeplex.com/AjaxControlToolkit/Release/ProjectReleases.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-17T07:33:07.313

昨天我同样需要使用弹出扩展器，这里是你应该首先包含的 js 文件。

```
<script src="javascripts/MicrosoftAjax.js" type="text/javascript" ></script>
<script src="javascripts/AjaxControlToolkit/AjaxControlToolkit.Compat.Timer.Timer.js" type="text/javascript"></script>
<script src="javascripts/AjaxControlToolkit/AjaxControlToolkit.Common.Common.js" type="text/javascript"></script>
<script src="javascripts/AjaxControlToolkit/AjaxControlToolkit.ExtenderBase.BaseScripts.js" type="text/javascript"></script>
<script src="javascripts/AjaxControlToolkit/AjaxControlToolkit.Animation.Animations.js" type="text/javascript"></script>
<script src="javascripts/AjaxControlToolkit/AjaxControlToolkit.DropShadow.DropShadowBehavior.js" type="text/javascript"></script>
<script src="javascripts/AjaxControlToolkit/AjaxControlToolkit.DynamicPopulate.DynamicPopulateBehavior.js" type="text/javascript"></script>
<script src="javascripts/AjaxControlToolkit/AjaxControlToolkit.PopupExtender.PopupBehavior.js" type="text/javascript"></script> 
```

下一步是从 javascript 创建 PopupBehavior，如下所示：

```
$create(AjaxControlToolkit.PopupControlBehavior, {"PopupControlID":"div_to_popup","Position":3}, null, null, $get("textbox_input_id")); 
```

如果您只需要使用 AjaxControlToolkit 中的另一个控件而没有 asp 的负担，那么这里是查找必要的包含 js 文件的一种简单方法。[在此处](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/PopupControl/PopupControl.aspx)转到其演示页面并查看该页面的源代码。在底部，您将看到如何创建控件。要查找此控件所需的包含文件，请选择 CombineScriptsHandler.ashx 并搜索“//START”。带有“//START”的每一行都显示了一个包含在页面中的脚本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-11-20T03:06:10.287

查看[AJAX 工具包示例](http://www.asp.net/ajax/ajaxcontroltoolkit/samples/modalpopup/modalpopup.aspx)。有现场演示、演练和文档。

# python - 使用 cElementTree 从 XML 中查找所有节点

> ID：304216
> 
> 赞同：2
> 
> 时间：2008-11-20T03:06:00.227
> 
> 标签：python, xml, search, celementtree

有没有办法使用 cElementTree 查找 xml 树中的所有节点？findall 方法仅适用于指定的标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T03:13:16.623

您可以在 findall 方法上使用[XPath 路径：](http://effbot.org/zone/element-xpath.htm)

> 1.2 版本支持简单的元素位置路径。在最简单的形式中，位置路径是一个或多个标记名称，由斜杠 (/) 分隔。
> 
> 您还可以使用星号 (*) 代替标记名称来匹配该级别的所有元素。例如，*/subtag 返回所有子标签的孙子标签。
> 
> 空标签 (//) 用于搜索树的所有级别，位于当前级别之下。空标签必须始终后跟标签名称或星号。

```
etree.findall('.//*') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T03:13:17.997

你看过 node.getiterator() 吗？

# .net - .NET - 您会向该领域的初学者推荐什么 IoC 容器框架？

> ID：304218
> 
> 赞同：5
> 
> 时间：2008-11-20T03:06:24.390
> 
> 标签：.net, inversion-of-control, ioc-container

您会向该领域的初学者推荐什么 Inversion of Control Container 框架？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-20T03:35:03.770

James Kovacs 做了一个 dnrtv[截屏视频](http://www.dnrtv.com/default.aspx?showID=126)，展示了如何创建自己的 IOC 容器。我向初学者推荐这个不是因为它一定是你想要使用的那个，而是因为它展示了为什么你需要一个 IOC 容器以及基本功能是什么的基础知识。在此之后，尝试继续前往[温莎城堡](http://www.castleproject.org/container/index.html)或[结构图](http://sourceforge.net/projects/structuremap)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-01T07:17:24.697

[自动法。](http://code.google.com/p/autofac/)

轻量级、简单、快速、面向 C# 3.0 并且（对我而言）在复杂项目中比任何其他 IoC 容器（甚至 Windsor）都更好。

主要特点：

*   组件的确定性处置
*   基于表达式的配置
*   正确支持多范围组件分辨率
*   高性能
*   精益代码库

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-20T03:40:18.113

我记得有一些[来自 BitterCoder](http://wiki.bittercoder.com/Default.aspx?Page=ContainerTutorials)关于[Castle's Windsor 的](http://www.castleproject.org/container/index.html)非常简单的教程，我发现这些教程很有帮助且易于理解。

即使您决定是否使用 Windsor，这些演练仍然应该让您对其他容器的特性/功能类型有一个很好的了解。

*   第 1 部分 -[简单配置](http://blog.bittercoder.com/PermaLink,guid,bc382e38-a6c6-4e98-840e-ea00d635fc5e.aspx)
*   第 2 部分 -[更多配置（阵列）](http://blog.bittercoder.com/PermaLink,guid,3233bd70-4885-4292-8aac-c94bf9910401.aspx)
*   第 3 部分 -[更多配置（字典）](http://blog.bittercoder.com/PermaLink,guid,01697ea5-3175-455b-8e7c-b81436e67235.aspx)
*   第 4 部分 -[开关配置](http://blog.bittercoder.com/PermaLink,guid,d577122f-f5eb-4d8e-a446-ec81e9e5a661.aspx)
*   第 5 部分 -[配置参数](http://blog.bittercoder.com/PermaLink,guid,4b0c6c3c-4280-4fae-bf22-b3218b1ee59d.aspx)
*   第 6 部分 -[在生活方式之间切换](http://blog.bittercoder.com/PermaLink,guid,dfebb0b5-c5e8-4de1-8551-b7e7fe1f14ce.aspx)
*   第 7 部分 -[切换实现](http://blog.bittercoder.com/PermaLink,guid,ff608602-ad65-48b8-9e03-0049eb6c6cd6.aspx)
*   第 8 部分 -[按键引用实现](http://blog.bittercoder.com/PermaLink,guid,02f909e1-b680-4401-b8ff-a2fa98a0aea4.aspx)
*   第 9 部分 -[构造函数注入](http://blog.bittercoder.com/PermaLink,guid,6ce3f22e-763e-445c-9b96-1ca8e6116c34.aspx)
*   第 10 部分 - [Setter 注入](http://blog.bittercoder.com/PermaLink,guid,99c8d05e-8050-4a38-bfa0-50b69b64bff0.aspx)
*   第 11 部分 -[工厂](http://blog.bittercoder.com/PermaLink,guid,07925133-ae33-41dd-bc50-2b49a5434e19.aspx)
*   第 12 部分 -[装饰器](http://blog.bittercoder.com/PermaLink,guid,4863e460-2985-475c-9266-80b4895e80de.aspx)
*   第 13 部分 -[注入服务阵列](http://blog.bittercoder.com/PermaLink,guid,3e8c3c7f-169e-4f2c-8e1d-b702ece1f63c.aspx)
*   第 14 部分 -[可启动设施](http://blog.bittercoder.com/PermaLink,guid,a621ddda-acb5-4afd-84ff-faafb96a2fa1.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-20T03:30:19.443

[Ninject](http://ninject.org/)似乎在这些问题上得到了很多支持

[https://stackoverflow.com/questions/71041/which-single-iocdi-container-would-you-recommend-using-and-why](https://stackoverflow.com/questions/71041/which-single-iocdi-container-would-you-recommend-using-and-why)

[哪些 .NET 依赖注入框架值得研究？](https://stackoverflow.com/questions/21288/which-cnet-dependency-injection-frameworks-are-worth-looking-into)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-01-04T05:17:36.283

[Mark Seemann](https://stackoverflow.com/users/126014/mark-seemann)有一本很棒的书，叫做[.Net 中的依赖注入](http://manning.com/seemann/)。本书的后半部分详细介绍了 6 个流行的框架，让您对它们有所了解。值得一看以帮助新人做出决定。他还为那些还没有准备好尝试容器，但希望至少以一种可以轻松转换为使用 IoC 容器的方式编写他们的应用程序的人介绍穷人的依赖注入。

他涵盖的容器是：

*   [温莎城堡](http://stw.castleproject.org/Windsor.MainPage.ashx)
*   [结构图](http://structuremap.net/structuremap/index.html)
*   [春天网](http://www.springframework.net/)
*   [自动法](http://code.google.com/p/autofac/)
*   [统一](http://unity.codeplex.com/)
*   [MEF](http://mef.codeplex.com/)（尽管我相信他说 MEF 不完全是 IoC 容器）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-09T02:15:03.080

Danial Cazzulino 有[一堆（紧缩？）](http://blogs.clariusconsulting.net/kzu/funq-screencast-series-on-how-to-building-a-di-container-using-tdd/)关于创建[Funq](http://funq.codeplex.com/) DI 容器的截屏视频。Funq 是轻量级和快速的，但缺少一些更大、更成熟的框架的花里胡哨。

我使用 Funq 派生的[Munq](http://munq.codeplex.com/)，它也是轻量级和快速的，并且是通过 Nuget 将 DI 容器添加到 MVC3 项目的简单方法。到目前为止，我还没有发现任何需要迁移到不同的框架 - Munq 已经非常足够了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-20T03:20:43.037

我对[Spring.NET 端口](http://www.springframework.net/)做了一些评估。它提供了 AOP、容器的配置文件设置和其他很酷的东西。我认为他们的网站组织得很好，文档也写得很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-20T11:43:23.347

我会说结构图。它是更成熟的框架之一，并且非常易于使用。此外，它可以很好地与 NMock 集成以创建对单元测试非常有用的模拟对象。Microsoft 支持的框架是 Unity，因此您也可以查看它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-20T17:33:27.730

我同意dp。该截屏视频的作者甚至说你应该滚动你的。这样你就会知道它们是如何工作的。然后，一旦你把它弄下来，你就可以继续使用功能更全的。

也有人提到，真的没有“一个 IOC 容器来统治他们”。这是因为它们几乎都具有相同的功能。这取决于您喜欢哪种实施方式。例如，如果您大量使用 Enterprise Library Framework，那么您可能更喜欢 Unity 容器，因为您可以免费绑定到 EntLib 的其余部分。或者你可能对 XML 过敏，那么你可以使用 Ninject，它有一个非常流畅的界面。每个框架都有其优点和缺点，但从初学者的角度来看，它们几乎是相同的。

# cocoa - 如何检测 NSTableView 中的行数发生了变化？

> ID：304226
> 
> 赞同：2
> 
> 时间：2008-11-20T03:19:17.890
> 
> 标签：cocoa

我有一个自定义的 NSTableView 子类，它绑定到异步更新的数据源（一个 NSArray）。将项目添加到数组时，行会自动添加到表格视图中。惊人的！

我的问题是：我怎样才能检测到这种魔法已经发生，以便我可以执行与自定义表格视图的显示相关的其他一些任务？是否有一种方法可以在我的子类中覆盖，当更新 tableview 时将调用该方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T04:10:25.463

您不需要继承 NSTableView 以根据行数更改其高度。`enclosingScrollView`在您的控制器中，只需使用 KVO 监视数据数组，并在添加或删除行时调整 tableview 的滚动视图的帧大小（您可以使用 找到它）。我以前用过这种技术，效果很好。您可以使用 tableview 的`rowHeight`和`intercellSpacing`方法来计算框架的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-13T17:31:52.023

在这个解决方案上看起来高低几天。它就像一个魅力，谢谢！这是我的代码示例，供其他人遵循：

```
 // tv = NSTableView
// view = NSView

int height = ([tv rowHeight] + [tv intercellSpacing].height)  * [itemNodes count];

NSScrollView *sv = [tv enclosingScrollView];

NSRect svFrame = [sv frame];
svFrame.size.height = height;
[sv setFrame:svFrame];

NSRect viewFrame = [view frame];
viewFrame.size.height = height;
[view setFrame:viewFrame]; 
```

# javascript - 如何将 Ajax.BeginForm MVC 助手与 JSON 结果一起使用？

> ID：304233
> 
> 赞同：21
> 
> 时间：2008-11-20T03:25:24.943
> 
> 标签：javascript, asp.net-mvc, asp.net-ajax

我正在尝试使用 ASP.NET MVC Ajax.BeginForm 帮助程序，但不想在调用完成时使用现有的内容插入选项。相反，我想使用自定义 JavaScript 函数作为回调。

这可行，但我想要的结果应该作为 JSON 返回。不幸的是，该框架只是将数据视为字符串。下面是客户端代码。服务器代码只返回一个带有一个字段的 JsonResult，即 UppercaseName。

```
<script type='text/javascript'>
    function onTestComplete(content) {
        var result = content.get_data();
        alert(result.UppercaseName);
    }
</script>

<% using (Ajax.BeginForm("JsonTest", new AjaxOptions() {OnComplete = "onTestComplete" })) { %>
    <%= Html.TextBox("name") %><br />
    <input type="submit" />
<%} %> 
```

它不是显示大写结果，而是显示未定义。content.get_data() 似乎包含 JSON，但仅以字符串形式。如何将其转换为对象？

这一切似乎真的有点令人费解。有没有更好的方法来使用 Ajax.BeginForm 获取结果内容？如果这很难，我可能会完全跳过 Ajax.BeginForm 而只使用 jQuery 表单库。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2011-09-19T06:06:40.127

您可以使用`OnFailure`and`OnSuccess`代替`OnComplete`; `OnSuccess`将数据作为适当的 JSON 对象提供给您。您可以找到隐藏在页面上的回调方法签名`~/Scripts/jquery.unobtrusive-ajax.min.js`。

在你的`Ajax.BeginForm`：

```
new AjaxOptions
    {
        OnFailure = "onTestFailure",
        OnSuccess = "onTestSuccess"
    } 
```

脚本块：

```
<script>
//<![CDATA[

    function onTestFailure(xhr, status, error) {

        console.log("Ajax form submission", "onTestFailure");
        console.log("xhr", xhr);
        console.log("status", status);
        console.log("error", error);

        // TODO: make me pretty
        alert(error);
    }

    function onTestSuccess(data, status, xhr) {

        console.log("Ajax form submission", "onTestSuccess");
        console.log("data", data);
        console.log("status", status);
        console.log("xhr", xhr);

        // Here's where you use the JSON object
        //doSomethingUseful(data);
    }

//]]>
</script> 
```

这些签名[在 $.ajax(...) 中匹配](http://api.jquery.com/jQuery.ajax/)[`success`和`error`](http://api.jquery.com/jQuery.ajax/)回调，毕竟这可能并不令人惊讶。

这是使用带有[jquery](/questions/tagged/jquery "show questions tagged 'jquery'") 1.6.3 和 1.7.2[的 asp.net-mvc-3测试的。](/questions/tagged/asp.net-mvc-3 "显示标记为“asp.net-mvc-3”的问题")

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-20T06:51:03.453

试试这个：

```
var json_data = content.get_response().get_object(); 
```

这将为您提供 JSON 格式的结果，您可以使用它`json_data[0]`来获取第一条记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-21T06:59:10.327

尝试使用以下代码：

```
<script type='text/javascript'>
    function onTestComplete(content) {
        var result = eval( '(' + content.get_data() + ')' );
        alert(result.UppercaseName);
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T19:33:21.623

我用：

```
 function onTestComplete(data, status, xhr) {
       var data2 = JSON.parse(data.responseText);
       //data2 is your object
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2010-08-25T15:48:39.887

确保您已包含 MicrosoftAjax.js 和 MicrosoftMvcAjax.js。然后在返回的上下文中使用以下调用从返回中获取一个 json 对象。

```
var json = context.get_data();
var data = Sys.Serialization.JavaScriptSerializer.deserialize(json); 
```

# php - 基于 Windows 2000 的网站的最佳语言

> ID：304235
> 
> 赞同：0
> 
> 时间：2008-11-20T03:27:41.383
> 
> 标签：php, asp.net, iis-5, legacy-code, windows-server-2000

有人联系我以了解有关更新使用 ASP 和 Access 构建的旧式 Web 应用程序的信息。该服务器正在运行 Windows 2000 Advanced Server，我相信 IIS 5.0（我正在尝试对此进行确认，但该公司不是技术公司，因此我非常怀疑 Apache 是否在服务器上运行）。

哪些语言可以在上述平台上更新此 Web 应用程序？我从来没有接触过经典的 ASP，更不用说针对 Windows 2000/IIS 5 的任何 Web 开发工作了。由于预算问题，没有计划将服务器更新为任何新的东西。

我目前倾向于迁移到基于 SQLite 的数据库（客户目前不太热衷于安装 MySQL，但我仍处于规划阶段，这是一个流量相对较低的网站），但是什么语言会我和那个配对？ASP.NET 在 IIS 5 下运行良好吗？在这种设置下，PHP 的表现是否有价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T03:37:16.573

如果公司关心成本，我会非常保守地做出改变。专注于他们想要更新的原因——他们想要添加新功能吗？他们对该网站的中长期计划是什么？他们在维护网站上有困难吗？除非他们愿意在开发上进行一些持续投资，否则使用定制的 .NET 解决方案可能只会使事情变得更加复杂。

如果它是一个相对简单的网站，他们可能会考虑像 DotNetNuke 这样的平台。有一些主机出售准备配置的网站，这些网站可以用最少的配置做很多事情。结合专业开发的 DotNetNuke UI 模板（TemplateMonster.com 提供）可能是一个很好的解决方案。

如果他们确实想使用自定义解决方案，ASP.NET 在 IIS 5.0 上运行良好。我相信您可以将 .NET Framework 运行到至少 2.0，不确定是 3.0 还是 3.5。语言不会对功能产生影响，所以 C# 或 VB.NET 都可以，一切都是平等的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T03:50:42.553

我有类似的情况，大约一年前做过，最后使用了 asp.net 2.0。

总体还可以，但是机器老了，我一般每个月左右都要找人给它三指敬礼，最近它吹了一个psu。

如果它只是小容量，您也许可以安装 sql express，这将使您的生活比 SQLlite 之类的工具更轻松，因为 dotnet 与其他 MS 东西配合得最好，并且内置了很多节省劳动力的优点。

如果您使用 sql express，您还可以使用对 sql 迁移工具的访问。

还建议您查看 subsonic 或 nhibernate 之类的东西，它会为您处理很多无聊且容易出错的东西。

这实际上取决于您的经验在哪里，以及项目有多大，如果您以前从未使用过 dotnet，那么从小事开始，这可能是也可能不是。

显然php在win 2008上表现良好，但至于2000，从未尝试过。多年前确实在 2k 盒子上安装了 apache，但没有使用 php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T03:39:54.353

在这种情况下，我可能会使用 ASP.NET。由于您在 Microsoft 服务器上运行，因此 MS 将提供大量有关安装、配置和运行该站点的文档。可以说，当所有组件都“在同一个系列中”时，支持某些东西要容易得多。Asp.net 将在 IIS 5 下正常运行。它没有 IIS 6 所做的大量安全性和可伸缩性升级，但它可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T12:11:37.833

我能够获得更多信息。盒子运行的是 IIS 5.0，处理它的 IT 人员非常乐意让我安装我需要的任何东西。从下面的谷歌搜索和响应看来，我最好的选择是将站点转换为 ASP.NET 2.0，并将 SQL Server Express 2005 作为数据库运行。

# php - 如何在 PHP 5 中动态调用子类方法？

> ID：304240
> 
> 赞同：0
> 
> 时间：2008-11-20T03:29:35.170
> 
> 标签：php, oop, parent-child

```
<?php
class foo
{
    //this class is always etended, and has some other methods that do utility work
    //and are never overrided
    public function init()
    {
        //what do to here to call bar->doSomething or baz->doSomething 
        //depending on what class is actually instantiated? 
    }

    function doSomething()
    {
        //intentionaly no functionality here
    }

}

class bar extends foo
{
    function doSomething()
    {
        echo "bar";
    }
}

class baz extends foo
{
    function doSomething()
    {
        echo "baz";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T03:33:56.253

你只需要调用 $this->doSomething(); 在您的 init() 方法中。

由于多态性，子对象的正确方法将在运行时根据子对象的类被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T03:33:46.533

```
public function init() {
    $this->doSomething();
}

$obj = new bar();
$obj->doSomething(); // prints "bar"

$obj2 = new baz();
$obj->doSomething(); // prints "baz" 
```

# c - 是否有通过网络发送数据的最佳字节大小？

> ID：304249
> 
> 赞同：15
> 
> 时间：2008-11-20T03:34:57.297
> 
> 标签：c, network-programming

我假设 100 字节太小，并且可能会减慢所有写入的较大文件传输速度，但是像 1MB 这样的大小似乎太多了。有没有人对通过网络发送数据的每次写入的最佳字节块有任何建议？

为了详细说明，我正在实现通过网络连接发送数据并显示发送数据的进度的东西。我注意到如果我以每次写入大约 100 字节的速度发送大文件，它会非常慢，但进度条效果很好。但是，如果我以每次写入 1M 的速度发送，它会快得多，但由于发送的块较大，进度条的工作效果不佳。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-20T03:45:52.563

不，没有通用的最佳字节大小。

TCP 数据包容易产生碎片，虽然假设从这里到目的地的所有东西都是真正的以太网，数据包大小很大，但现实情况是，即使您可以从一个数据包中获取所有单个网络的数据包大小需要，您发送的每个数据包都可能通过互联网采用不同的路径。

这不是您可以“解决”的问题，也没有通用的理想尺寸。

尽可能快地将数据提供给操作系统和 TCP/IP 堆栈，它会动态调整数据包大小以适应网络连接（您应该看到他们用于此优化的代码 - 这真的非常有趣。至少在更好的堆栈上。）

但是，如果您控制所有正在使用的网络和堆栈以及客户端/服务器之间的所有网络和堆栈，那么您可以进行一些手动调整。但通常即使那样，在我建议您接近它之前，您也必须非常了解网络和您发送的数据。

-亚当

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-20T03:40:32.997

如果可以的话，就让IP栈来处理吧；大多数操作系统已经内置了很多优化。例如，Vista 将动态改变各种参数以最大化吞吐量；事后猜测算法不太可能是有益的。

在远离实际线路的高阶语言中尤其如此，例如 C#；你和实际的 TCP/IP 数据包之间有足够的层，我希望你的代码对吞吐量的影响相对较小。

在最坏的情况下，为自己测试各种情况下的各种消息大小；很少有解决方案是一刀切的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-20T03:55:22.840

如果您在以太网上使用 TCP/IP，则最大数据包大小约为 1500 字节。如果您尝试一次发送多个数据包，则数据将被拆分为多个数据包，然后再通过网络发送出去。如果您的应用程序中的数据已经打包，那么您可能希望选择小于 1500 的数据包大小，以便在发送完整数据包时，底层堆栈不必将其分解。例如，如果您执行的每次发送都是 1600 字节，则 TCP 堆栈将必须为每次发送发送两个数据包，第二个数据包大部分为空。这是相当低效的。

话虽如此，我不知道这会对性能产生多大的明显影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-20T10:08:56.377

制作一个名为 CalcChunkSize 的函数，将一些私有变量添加到您的类中：

```
Private PreferredTransferDuration As Integer = 1800 ' milliseconds, the timespan the class will attempt to achieve for each chunk, to give responsive feedback on the progress bar.
Private ChunkSizeSampleInterval As Integer = 15    ' interval to update the chunk size, used in conjunction with AutoSetChunkSize. 
Private ChunkSize As Integer = 16 * 1024           ' 16k by default  
Private StartTime As DateTime
Private MaxRequestLength As Long = 4096            ' default, this is updated so that the transfer class knows how much the server will accept 
```

在每次下载块之前，检查是否需要使用 ChunkSizeSampleInterval 计算新的块大小

```
 Dim currentIntervalMod As Integer = numIterations Mod Me.ChunkSizeSampleInterval
            If currentIntervalMod = 0 Then
                Me.StartTime = DateTime.Now
            ElseIf currentIntervalMod = 1 Then
                Me.CalcChunkSize()
            End If 
```

numIterations 在下载循环之外设置为 0，并且在每个下载的块设置为 numIterations += 1 之后

让 CalcChunkSize 这样做：

```
Protected Sub CalcAndSetChunkSize()
    ' chunk size calculation is defined as follows 
    ' * in the examples below, the preferred transfer time is 1500ms, taking one sample. 
    ' * 
    ' * Example 1 Example 2 
    ' * Initial size = 16384 bytes (16k) 16384 
    ' * Transfer time for 1 chunk = 800ms 2000 ms 
    ' * Average throughput / ms = 16384b / 800ms = 20.48 b/ms 16384 / 2000 = 8.192 b/ms 
    ' * How many bytes in 1500ms? = 20.48 * 1500 = 30720 bytes 8.192 * 1500 = 12228 bytes 
    ' * New chunksize = 30720 bytes (speed up) 12228 bytes (slow down from original chunk size) 
    ' 

    Dim transferTime As Double = DateTime.Now.Subtract(Me.StartTime).TotalMilliseconds
    Dim averageBytesPerMilliSec As Double = Me.ChunkSize / transferTime
    Dim preferredChunkSize As Double = averageBytesPerMilliSec * Me.PreferredTransferDuration
    Me.ChunkSize = CInt(Math.Min(Me.MaxRequestLength, Math.Max(4 * 1024, preferredChunkSize)))
    ' set the chunk size so that it takes 1500ms per chunk (estimate), not less than 4Kb and not greater than 4mb // (note 4096Kb sometimes causes problems, probably due to the IIS max request size limit, choosing a slightly smaller max size of 4 million bytes seems to work nicely) 
End Sub 
```

然后在请求下一个块时只需使用 ChunkSize。

我在 Tim_mackey 的“使用 MTOM Web 服务和 .Net 2.0 以块发送文件”中发现了这一点，并且发现动态计算最有效的块大小非常有用。

整个源代码在这里： http: [//www.codeproject.com/KB/XML/MTOMWebServices.aspx](http://www.codeproject.com/KB/XML/MTOMWebServices.aspx)

作者在这里：[http ://www.codeproject.com/script/Membership/Profiles.aspx?mid=321767](http://www.codeproject.com/script/Membership/Profiles.aspx?mid=321767)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-01T14:21:32.290

我相信你的问题是你使用阻塞套接字而不是非阻塞套接字。

当您使用阻塞套接字并发送 1M 数据时，网络堆栈可以等待所有数据放入缓冲区中，如果缓冲区已满，您将被阻塞，您的进度条将等待整个 1M接受到缓冲区，这可能需要一段时间，你的进度条会跳动。

但是，如果您使用非阻塞套接字，则无论您使用什么缓冲区大小都不会阻塞，并且您需要使用 select/poll/epoll/whatever-works-on-your-platform 来等待自己（尽管 select 是最便携的）。这样，您的进度条将快速更新并反映最准确的信息。

请注意，在发送方，进度条以任何方式被部分破坏，因为内核将缓冲一些数据，并且您将在对方真正收到数据之前达到 100%。解决此问题的唯一方法是，如果您的协议包含对接收方接收到的数据量的回复。

正如其他人所说，第二次猜测操作系统和网络大多是徒劳的，如果你继续使用阻塞套接字选择一个足够大的大小来包含比单个数据包更多的数据，这样你就不会在数据包中发送太少的数据作为这将不必要地降低您的吞吐量。我会使用类似 4K 的东西，一次至少包含两个数据包。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-20T03:56:56.113

我要补充的一件事是，对于给定的以太网连接，发送一个小数据包和发送一个大数据包所花费的时间差不多。正如其他人所说：如果您只是发送数据流，请让系统处理它。但是，如果您担心来回发送单个短消息，则*典型的*以太网数据包大约为 1500 字节-只要您将其保持在以下范围内就可以了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-20T04:01:22.517

您需要使用[Path MTU Discovery](http://en.wikipedia.org/wiki/Maximum_transmission_unit#Path_MTU_discovery)，或使用良好的默认值（即小于 1500 字节）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-20T12:45:20.273

如果您还没有，您可以进行的一项经验测试当然是使用嗅探器（tcpdump、Wireshark 等）并查看使用其他软件进行上传/下载时达到的数据包大小。这可能会给你一个提示。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-20T17:52:09.873

这是您需要的公式：

```
int optimalChunkSize = totalDataSize / progressBar1.Width; 
```

使用它，您发送的每个块都会将进度条增加 1 个像素。就用户反馈而言，比这更小的块大小是没有意义的。

# .net - 针对 64 位

> ID：304251
> 
> 赞同：1
> 
> 时间：2008-11-20T03:36:17.560
> 
> 标签：.net, web-applications, 64-bit

我正在.Net 上构建一个 Web 应用程序，它将在 64 位服务器上运行。为了充分利用 64 位，我应该做些什么特别的事情？

唯一想到的是，64 位的 RAM 便宜且“无限”，也许我应该尽可能多地缓存。

编辑：作为副本关闭[我可以做些什么来优化我的 .NET 网站和应用程序以实现 64 位？](https://stackoverflow.com/questions/291675/what-can-i-do-to-optimize-my-net-web-sites-and-applications-for-64-bit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T03:48:26.520

[这里](http://petesbloggerama.blogspot.com/2006/04/iis-aspnet-and-64-bit-performance.html)有一些很好的信息。

快速阅读后，看起来处理无限（基本上）内存的能力使应用程序表现得更好。只要操作系统和 .NET CLR 是 64 位版本，您就会自动获得好处。

我要提醒的是，这并不是写得不好的应用程序的万能药，也不意味着你现在有一个无底洞来填充缓存项。保持您的分析器得心应手，并继续在强大的平台上编写好的代码。

# python - 找到 datetime.isocalendar() 的倒数的最佳方法是什么？

> ID：304256
> 
> 赞同：57
> 
> 时间：2008-11-20T03:38:52.280
> 
> 标签：python, datetime

Python[`datetime.isocalendar()`](http://www.python.org/doc/2.5.2/lib/datetime-datetime.html)方法返回`(ISO_year, ISO_week_number, ISO_weekday)`给定`datetime`对象的元组。有对应的反函数吗？如果没有，是否有一种简单的方法可以计算给定年份、星期数和星期几的日期？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2009-11-09T09:57:08.727

Python 3.8 添加了[fromisocalendar()](https://docs.python.org/3/library/datetime.html#datetime.date.fromisocalendar)方法：

```
>>> datetime.fromisocalendar(2011, 22, 1)
datetime.datetime(2011, 5, 30, 0, 0) 
```

Python 3.6 添加了[`%G`,`%V`和`%u`指令](https://docs.python.org/3.6/whatsnew/3.6.html#datetime)：

```
>>> datetime.strptime('2011 22 1', '%G %V %u')
datetime.datetime(2011, 5, 30, 0, 0) 
```

**原始答案**

我最近不得不自己解决这个问题，并提出了这个解决方案：

```
import datetime

def iso_year_start(iso_year):
    "The gregorian calendar date of the first day of the given ISO year"
    fourth_jan = datetime.date(iso_year, 1, 4)
    delta = datetime.timedelta(fourth_jan.isoweekday()-1)
    return fourth_jan - delta 

def iso_to_gregorian(iso_year, iso_week, iso_day):
    "Gregorian calendar date for the given ISO year, week and day"
    year_start = iso_year_start(iso_year)
    return year_start + datetime.timedelta(days=iso_day-1, weeks=iso_week-1) 
```

几个测试用例：

```
>>> iso = datetime.date(2005, 1, 1).isocalendar()
>>> iso
(2004, 53, 6)
>>> iso_to_gregorian(*iso)
datetime.date(2005, 1, 1)

>>> iso = datetime.date(2010, 1, 4).isocalendar()    
>>> iso
(2010, 1, 1)
>>> iso_to_gregorian(*iso)
datetime.date(2010, 1, 4)

>>> iso = datetime.date(2010, 1, 3).isocalendar()
>>> iso
(2009, 53, 7)
>>> iso_to_gregorian(*iso)
datetime.date(2010, 1, 3) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-03-09T12:02:00.643

从 Python 3.6 开始，您可以使用 new和`%G`指令。请参阅[问题 12006](http://bugs.python.org/issue12006)和[更新的文档](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior)：`%u``%V`

> `%G`
> 带有世纪的 ISO 8601 年份表示包含 ISO 周大部分时间的年份 ( `%V`)。
> 
> `%u`
> ISO 8601 weekday 作为十进制数，其中 1 是星期一。
> 
> `%V`
> ISO 8601 周为十进制数，星期一为一周的第一天。第 01 周是包含 1 月 4 日的那一周。

给定一个带有年份、周数和工作日数的字符串，很容易将它们解析为日期：

```
from datetime import datetime

datetime.strptime('2002 01 1', '%G %V %u').date() 
```

或作为具有整数输入的函数：

```
from datetime import datetime

def date_from_isoweek(iso_year, iso_weeknumber, iso_weekday):
    return datetime.strptime(
        '{:04d} {:02d} {:d}'.format(iso_year, iso_weeknumber, iso_weekday),
        '%G %V %u').date() 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-10-13T11:14:57.273

```
import datetime

def iso_to_gregorian(iso_year, iso_week, iso_day):
    "Gregorian calendar date for the given ISO year, week and day"
    fourth_jan = datetime.date(iso_year, 1, 4)
    _, fourth_jan_week, fourth_jan_day = fourth_jan.isocalendar()
    return fourth_jan + datetime.timedelta(days=iso_day-fourth_jan_day, weeks=iso_week-fourth_jan_week) 
```

这是改编自@BenJames 的非常好的答案。你不必知道一年的第一天。您只需要知道肯定在同一 ISO 年份的日期示例，以及该日期的 ISO 日历周和日。

1 月 4 日只是一个例子，因为正如 Ben 指出的那样，1 月 4 日总是属于同一个 ISO 年和公历年，并且是一年中的第一天。

由于周的长度相同，您可以简单地减去所需日期的 ISO 和您在两种形式中都知道的日期的 ISO 之间的天数和周数，然后加上该天数和周数。（这些数字是正数还是负数都没有关系，因此您可以选择其他“固定日期”，例如 12 月 28 日。）

# 编辑

我更正了这一点，因为正如@JoSo 有用地指出的那样，也属于 ISO 年的公历年的第一天是 1 月 4 日而不是 1 月 5 日。正如解释所说，选择哪个日期作为参考点并不重要，但选择 1 月 4 日会使这个选择不那么“神奇”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-09T16:02:46.843

对于接下来来到这里的人，Ben 的好解决方案的更短的、单分辨率版本：

```
def iso_to_gregorian(iso_year, iso_week, iso_day):
    jan4 = datetime.date(iso_year, 1, 4)
    start = jan4 - datetime.timedelta(days=jan4.isoweekday()-1)
    return start + datetime.timedelta(weeks=iso_week-1, days=iso_day-1) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-03T02:23:42.727

从 Python 3.6 开始，`datetime.strptime()`将支持`%G`,`%V`和`%u`指令，因此您可以简单地执行`datetime.strptime('2015 1 2', '%G %V %u').date()`. 见：[https ://hg.python.org/cpython/rev/acdebfbfbdcf](https://hg.python.org/cpython/rev/acdebfbfbdcf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T23:21:07.700

请注意，%W 是周# (0-53)，它与 ​​ISO 周 (1-53) 不同。将存在 %W 不起作用的边缘情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-02T17:43:10.757

我想出了一个类似于 Ben James 发布的解决方案，但使用了一个函数：

```
import datetime
def getDateFromWeek(year,week,day):
    """Method to retrieve the date from the specified week, year and weekday"""

    year_start = datetime.date(year,1,1)
    ys_weekday =  year_start.weekday()
    delta = (week*7)+(day-ys_weekday)
    if ys_weekday<4:
        delta -= 7

    return  year_start  + datetime.timedelta(days=delta) 
```

我用 2020 年最后一周和 2021 年第一周等边界值对其进行了测试，结果非常好。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-11-20T03:56:10.390

*编辑：忽略这一点，边缘情况很痛苦。选择本的解决方案。*

好的，经过仔细检查，我注意到`strptime`has`%W`和`%w`参数，所以以下工作：

```
def fromisocalendar(y,w,d):
   return datetime.strptime( "%04dW%02d-%d"%(y,w-1,d), "%YW%W-%w") 
```

几个问题：ISO 周数从 开始`1`，而`%W`从 开始`0`。ISO 工作日从`1`（星期一）开始，与 相同`%w`，因此星期日可能必须是`0`，而不是`7`...

# c# - 访问修改后的闭包 (2)

> ID：304258
> 
> 赞同：101
> 
> 时间：2008-11-20T03:39:57.100
> 
> 标签：c#, .net, resharper, closures

[这是从Access 到 Modified Closure](https://stackoverflow.com/questions/235455/access-to-modified-closure)的问题的延伸。我只是想验证以下内容对于生产使用是否足够安全。

```
List<string> lists = new List<string>();
//Code to retrieve lists from DB    
foreach (string list in lists)
{
    Button btn = new Button();
    btn.Click += new EventHandler(delegate { MessageBox.Show(list); });
} 
```

每次启动我只运行一次以上。现在它似乎工作正常。正如 Jon 在某些情况下提到的违反直觉的结果。那么我在这里需要注意什么？如果列表不止一次运行可以吗？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2008-11-20T05:13:58.063

*在 C# 5 之前，您需要在*foreach中重新声明一个变量- 否则它是共享的，并且您的所有处理程序都将使用最后一个字符串：

```
foreach (string list in lists)
{
    string tmp = list;
    Button btn = new Button();
    btn.Click += new EventHandler(delegate { MessageBox.Show(tmp); });
} 
```

值得注意的是，请注意，从 C# 5 开始，这种情况发生了变化，*特别是在 的情况下`foreach`*，您不再需要这样做：问题中的代码将按预期工作。

要显示没有此更改就无法正常工作，请考虑以下事项：

```
string[] names = { "Fred", "Barney", "Betty", "Wilma" };
using (Form form = new Form())
{
    foreach (string name in names)
    {
        Button btn = new Button();
        btn.Text = name;
        btn.Click += delegate
        {
            MessageBox.Show(form, name);
        };
        btn.Dock = DockStyle.Top;
        form.Controls.Add(btn);
    }
    Application.Run(form);
} 
```

**在 C# 5 之前**运行上述程序，虽然每个按钮显示不同的名称，但单击按钮会显示“Wilma”四次。

这是因为语言规范 (ECMA 334 v4, 15.8.4)（在 C# 5 之前）定义：

> `foreach (V v in x)` *`embedded-statement`*然后扩展为：
> 
> ```
> {
>     E e = ((C)(x)).GetEnumerator();
>     try {
>         V v;
>          while (e.MoveNext()) {
>             v = (V)(T)e.Current;
>              embedded-statement
>         }
>     }
>     finally {
>         … // Dispose e
>     }
> } 
> ```

请注意，变量`v`（即您的`list`）是在循环*之外声明的。*所以根据捕获变量的规则，列表的所有迭代都将共享捕获的变量持有者。

从 C# 5 开始，这发生了变化：迭代变量 ( `v`) 被限定**在**循环内。我没有规范参考，但它基本上变成了：

```
{
    E e = ((C)(x)).GetEnumerator();
    try {
        while (e.MoveNext()) {
            V v = (V)(T)e.Current;
            embedded-statement
        }
    }
    finally {
        … // Dispose e
    }
} 
```

* * *

重新退订；如果您主动想取消订阅匿名处理程序，诀窍是捕获处理程序本身：

```
EventHandler foo = delegate {...code...};
obj.SomeEvent += foo;
...
obj.SomeEvent -= foo; 
```

同样，如果您想要一个一次性事件处理程序（例如 Load 等）：

```
EventHandler bar = null; // necessary for "definite assignment"
bar = delegate {
  // ... code
  obj.SomeEvent -= bar;
};
obj.SomeEvent += bar; 
```

这现在是自我退订；-p

# django - Django 部署

> ID：304267
> 
> 赞同：0
> 
> 时间：2008-11-20T03:44:58.290
> 
> 标签：django, deployment, tracking, release-management

在我的项目中，我有责任开发具有以下要求的设备跟踪工具

1.  管理员可以将新设备添加到特定用户
2.  一旦设备被分配给一个人，他将请求接受该请求，因此他将负责
3.  用户可以将他的设备转让给其他用户。
4.  同时，只要状态发生变化，应向管理员发送邮件或消息。
5.  它应该本地部署在 PC 上（所以它实际上不是一个 Web 应用程序），它连接到每个人都可以访问的网络

我以为我可以为此使用 Django（我是新手），但我对本地 PC 上的部署知之甚少，我该怎么做，或者有什么更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T05:23:09.823

听起来您仍然想要一个 Web 应用程序，只是不会将它部署在传统的 Web 服务器上。需要注意的一点是，Windows 的客户端版本（XP、Vista）会将您限制为每台计算机 10 个传入连接。

您需要按照这些[说明安装 Django](http://docs.djangoproject.com/en/dev/intro/install/#intro-install)。如果您还没有安装 python，我建议您[安装 2.5 版本](http://www.python.org/download/releases/2.5.2/)，因为它包含 sqlite，这是一个嵌入式数据库，可以*很容易*地开始使用 Django 进行开发。[Django 包含它自己的开发 Web 服务器，您在阅读本教程](http://docs.djangoproject.com/en/dev/intro/tutorial01/#intro-tutorial01)时会自然而然地遇到它。

从安装开始，然后直接进入教程。一旦您熟悉了在 Django 中进行开发，您的部署选项就会更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T05:31:14.643

试试[http://docs.djangoproject.com/en/dev/howto/deployment/#howto-deployment-index](http://docs.djangoproject.com/en/dev/howto/deployment/#howto-deployment-index)

如果您应该使用 IIS 进行部署，请尝试[http://code.djangoproject.com/wiki/DjangoOnWindowsWithIISAndSQLServer](http://code.djangoproject.com/wiki/DjangoOnWindowsWithIISAndSQLServer)

# java - 在 Java 中获取文件的 MD5 校验和

> ID：304268
> 
> 赞同：549
> 
> 时间：2008-11-20T03:45:39.757
> 
> 标签：java, md5, checksum

我希望使用 Java 来获取文件的 MD5 校验和。我真的很惊讶，但我找不到任何显示如何获取文件的 MD5 校验和的东西。

它是如何完成的？

* * *

## 回答 #1

> 赞同：581
> 
> 时间：2008-11-20T04:46:08.620

有一个输入流装饰器，`java.security.DigestInputStream`这样您就可以像往常一样使用输入流来计算摘要，而不必对数据进行额外的传递。

```
MessageDigest md = MessageDigest.getInstance("MD5");
try (InputStream is = Files.newInputStream(Paths.get("file.txt"));
     DigestInputStream dis = new DigestInputStream(is, md)) 
{
  /* Read decorated stream (dis) to EOF as normal... */
}
byte[] digest = md.digest(); 
```

* * *

## 回答 #2

> 赞同：329
> 
> 时间：2010-05-28T21:04:23.570

使用[Apache Commons Codec](http://commons.apache.org/codec/)库中的[DigestUtils ：](http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html)

```
try (InputStream is = Files.newInputStream(Paths.get("file.zip"))) {
    String md5 = org.apache.commons.codec.digest.DigestUtils.md5Hex(is);
} 
```

* * *

## 回答 #3

> 赞同：174
> 
> 时间：2008-11-20T03:48:42.137

[在Real 的 Java-How-to](http://www.rgagnon.com/javadetails/java-0416.html)中有一个使用[MessageDigest](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html)类的示例。

检查该页面以获取使用 CRC32 和 SHA-1 的示例。

```
import java.io.*;
import java.security.MessageDigest;

public class MD5Checksum {

   public static byte[] createChecksum(String filename) throws Exception {
       InputStream fis =  new FileInputStream(filename);

       byte[] buffer = new byte[1024];
       MessageDigest complete = MessageDigest.getInstance("MD5");
       int numRead;

       do {
           numRead = fis.read(buffer);
           if (numRead > 0) {
               complete.update(buffer, 0, numRead);
           }
       } while (numRead != -1);

       fis.close();
       return complete.digest();
   }

   // see this How-to for a faster way to convert
   // a byte array to a HEX string
   public static String getMD5Checksum(String filename) throws Exception {
       byte[] b = createChecksum(filename);
       String result = "";

       for (int i=0; i < b.length; i++) {
           result += Integer.toString( ( b[i] & 0xff ) + 0x100, 16).substring( 1 );
       }
       return result;
   }

   public static void main(String args[]) {
       try {
           System.out.println(getMD5Checksum("apache-tomcat-5.5.17.exe"));
           // output :
           //  0bb2827c5eacf570b6064e24e0e6653b
           // ref :
           //  http://www.apache.org/dist/
           //          tomcat/tomcat-5/v5.5.17/bin
           //              /apache-tomcat-5.5.17.exe.MD5
           //  0bb2827c5eacf570b6064e24e0e6653b *apache-tomcat-5.5.17.exe
       }
       catch (Exception e) {
           e.printStackTrace();
       }
   }
} 
```

* * *

## 回答 #4

> 赞同：91
> 
> 时间：2010-12-24T11:18:45.937

[com.google.common.hash](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/hash/package-summary.html) API 提供：

*   适用于所有哈希函数的统一用户友好 API
*   murmur3 的可播种 32 位和 128 位实现
*   md5(), sha1(), sha256(), sha512() 适配器，只改一行代码就可以在这些之间切换，杂音。
*   goodFastHash(int bits)，当你不关心你使用什么算法时
*   HashCode 实例的通用实用程序，例如 combineOrdered / combineUnordered

阅读用户指南（[IO 解释](https://github.com/google/guava/wiki/IOExplained)，[散列解释](https://github.com/google/guava/wiki/HashingExplained)）。

对于您的用例[`Files.hash()`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/io/Files.html#hash-java.io.File-com.google.common.hash.HashFunction-)，计算并返回文件的摘要值。

例如[sha-1](/questions/tagged/sha-1 "显示标记为“sha-1”的问题")摘要计算（将 SHA-1 更改为 MD5 以获得 MD5 摘要）

```
HashCode hc = Files.asByteSource(file).hash(Hashing.sha1());
"SHA-1: " + hc.toString(); 
```

请注意，[crc32](/questions/tagged/crc32 "显示标记为“crc32”的问题")比[md5](/questions/tagged/md5 "显示标记为“md5”的问题")快得多，因此如果您不需要加密安全校验和，请使用[crc32 。](/questions/tagged/crc32 "显示标记为“crc32”的问题")另请注意，不应该使用[md5](/questions/tagged/md5 "显示标记为“md5”的问题")来存储密码等，因为它很容易暴力破解，密码使用[bcrypt](/questions/tagged/bcrypt "显示标记为“bcrypt”的问题")， [scrypt](/questions/tagged/scrypt "显示标记为“加密”的问题")或[sha-256](/questions/tagged/sha-256 "显示标记为“sha-256”的问题")代替。

对于使用哈希的长期保护， [Merkle 签名方案](https://en.wikipedia.org/wiki/Merkle_signature_scheme)增加了安全性，并且由欧盟委员会赞助的后量子密码学研究小组建议使用这种密码学来长期保护量子计算机（[参考文献](https://en.wikipedia.org/wiki/Post-quantum_cryptography#Hash-based_cryptography_.E2.80.93_Merkle_signature_scheme)）。

请注意，[crc32](/questions/tagged/crc32 "显示标记为“crc32”的问题")的冲突率高于其他。

* * *

## 回答 #5

> 赞同：72
> 
> 时间：2014-10-07T08:12:48.980

使用 nio2 (Java 7+) 并且没有外部库：

```
byte[] b = Files.readAllBytes(Paths.get("/path/to/file"));
byte[] hash = MessageDigest.getInstance("MD5").digest(b); 
```

要将结果与预期的校验和进行比较：

```
String expected = "2252290BC44BEAD16AA1BF89948472E8";
String actual = DatatypeConverter.printHexBinary(hash);
System.out.println(expected.equalsIgnoreCase(actual) ? "MATCH" : "NO MATCH"); 
```

* * *

## 回答 #6

> 赞同：41
> 
> 时间：2012-10-08T22:08:14.380

[Guava](http://code.google.com/p/guava-libraries/)现在提供了一个新的、一致的哈希 API，它比 JDK 中提供的各种哈希 API 更加用户友好。请参阅[散列解释](http://code.google.com/p/guava-libraries/wiki/HashingExplained)。对于文件，您可以轻松获得 MD5 和、CRC32（版本 14.0+）或许多其他哈希值：

```
HashCode md5 = Files.hash(file, Hashing.md5());
byte[] md5Bytes = md5.asBytes();
String md5Hex = md5.toString();

HashCode crc32 = Files.hash(file, Hashing.crc32());
int crc32Int = crc32.asInt();

// the Checksum API returns a long, but it's padded with 0s for 32-bit CRC
// this is the value you would get if using that API directly
long checksumResult = crc32.padToLong(); 
```

* * *

## 回答 #7

> 赞同：33
> 
> 时间：2013-03-20T15:09:25.613

行。我不得不补充。对于那些已经拥有 Spring 和 Apache Commons 依赖项或计划添加它的人的一条线实现：

```
DigestUtils.md5DigestAsHex(FileUtils.readFileToByteArray(file)) 
```

对于和 Apache commons only 选项（信用@duleshi）：

```
DigestUtils.md5Hex(FileUtils.readFileToByteArray(file)) 
```

希望这可以帮助某人。

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2014-10-31T08:23:19.233

使用 Java 7 没有第三方库的简单方法

```
String path = "your complete file path";
MessageDigest md = MessageDigest.getInstance("MD5");
md.update(Files.readAllBytes(Paths.get(path)));
byte[] digest = md.digest(); 
```

如果你需要打印这个字节数组。如下使用

```
System.out.println(Arrays.toString(digest)); 
```

如果您需要此摘要中的十六进制字符串。如下使用

```
String digestInHex = DatatypeConverter.printHexBinary(digest).toUpperCase();
System.out.println(digestInHex); 
```

其中 DatatypeConverter 是 javax.xml.bind.DatatypeConverter

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2008-11-20T05:30:06.957

我最近不得不为一个动态字符串做这个，`MessageDigest`可以用多种方式表示哈希。**[要像使用md5sum](http://en.wikipedia.org/wiki/Md5sum)**命令那样获得文件的签名，我必须执行以下操作：

```
try {
   String s = "TEST STRING";
   MessageDigest md5 = MessageDigest.getInstance("MD5");
   md5.update(s.getBytes(),0,s.length());
   String signature = new BigInteger(1,md5.digest()).toString(16);
   System.out.println("Signature: "+signature);

} catch (final NoSuchAlgorithmException e) {
   e.printStackTrace();
} 
```

这显然没有回答您关于如何专门针对文件执行此操作的问题，上面的答案很好地解决了这个问题。我只是花了很多时间让总和看起来像大多数应用程序的显示一样，并认为您可能会遇到同样的麻烦。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2012-12-31T06:22:55.877

```
public static void main(String[] args) throws Exception {
    MessageDigest md = MessageDigest.getInstance("MD5");
    FileInputStream fis = new FileInputStream("c:\\apache\\cxf.jar");

    byte[] dataBytes = new byte[1024];

    int nread = 0;
    while ((nread = fis.read(dataBytes)) != -1) {
        md.update(dataBytes, 0, nread);
    };
    byte[] mdbytes = md.digest();
    StringBuffer sb = new StringBuffer();
    for (int i = 0; i < mdbytes.length; i++) {
        sb.append(Integer.toString((mdbytes[i] & 0xff) + 0x100, 16).substring(1));
    }
    System.out.println("Digest(in hex format):: " + sb.toString());
} 
```

或者您可以获得更多信息 [http://www.asjava.com/core-java/java-md5-example/](http://www.asjava.com/core-java/java-md5-example/)

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2010-12-24T07:38:25.990

我们使用的代码类似于上一篇文章中的代码

```
...
String signature = new BigInteger(1,md5.digest()).toString(16);
... 
```

但是，请注意在`BigInteger.toString()`这里使用，因为它会截断前导零...（例如，尝试`s = "27"`，校验和应该是`"02e74f10e0327ad868d138f2b4fdd6f0"`）

我赞同使用 Apache Commons Codec 的建议，我用它替换了我们自己的代码。

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2010-07-12T15:43:28.763

```
public static String MD5Hash(String toHash) throws RuntimeException {
   try{
       return String.format("%032x", // produces lower case 32 char wide hexa left-padded with 0
      new BigInteger(1, // handles large POSITIVE numbers 
           MessageDigest.getInstance("MD5").digest(toHash.getBytes())));
   }
   catch (NoSuchAlgorithmException e) {
      // do whatever seems relevant
   }
} 
```

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2015-05-12T18:54:34.627

非常快速且干净的 Java 方法，不依赖于外部库：

（如果需要，只需将 MD5 替换为 SHA-1、SHA-256、SHA-384 或 SHA-512）

```
public String calcMD5() throws Exception{
        byte[] buffer = new byte[8192];
        MessageDigest md = MessageDigest.getInstance("MD5");

        DigestInputStream dis = new DigestInputStream(new FileInputStream(new File("Path to file")), md);
        try {
            while (dis.read(buffer) != -1);
        }finally{
            dis.close();
        }

        byte[] bytes = md.digest();

        // bytesToHex-method
        char[] hexChars = new char[bytes.length * 2];
        for ( int j = 0; j < bytes.length; j++ ) {
            int v = bytes[j] & 0xFF;
            hexChars[j * 2] = hexArray[v >>> 4];
            hexChars[j * 2 + 1] = hexArray[v & 0x0F];
        }

        return new String(hexChars);
} 
```

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2016-08-27T16:26:47.183

```
String checksum = DigestUtils.md5Hex(new FileInputStream(filePath)); 
```

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2018-09-08T22:27:06.690

这是一个使用`InputStream.transferTo()`Java 9 和`OutputStream.nullOutputStream()`Java 11 的便捷变体。它不需要外部库，也不需要将整个文件加载到内存中。

```
public static String hashFile(String algorithm, File f) throws IOException, NoSuchAlgorithmException {
    MessageDigest md = MessageDigest.getInstance(algorithm);

    try(BufferedInputStream in = new BufferedInputStream((new FileInputStream(f)));
        DigestOutputStream out = new DigestOutputStream(OutputStream.nullOutputStream(), md)) {
        in.transferTo(out);
    }

    String fx = "%0" + (md.getDigestLength()*2) + "x";
    return String.format(fx, new BigInteger(1, md.digest()));
} 
```

和

```
hashFile("SHA-512", Path.of("src", "test", "resources", "some.txt").toFile()); 
```

返回

```
"e30fa2784ba15be37833d569280e2163c6f106506dfb9b07dde67a24bfb90da65c661110cf2c5c6f71185754ee5ae3fd83a5465c92f72abd888b03187229da29" 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2011-03-16T13:10:27.463

另一个实现：[Java 中的快速 MD5 实现](http://www.twmacinta.com/myjava/fast_md5.php)

```
String hash = MD5.asHex(MD5.getHash(new File(filename))); 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2013-10-17T12:43:08.227

[标准 Java 运行时环境方式](http://vyshemirsky.blogspot.ru/2007/08/computing-md5-digest-checksum-in-java.html)：

```
public String checksum(File file) {
  try {
    InputStream fin = new FileInputStream(file);
    java.security.MessageDigest md5er =
        MessageDigest.getInstance("MD5");
    byte[] buffer = new byte[1024];
    int read;
    do {
      read = fin.read(buffer);
      if (read > 0)
        md5er.update(buffer, 0, read);
    } while (read != -1);
    fin.close();
    byte[] digest = md5er.digest();
    if (digest == null)
      return null;
    String strDigest = "0x";
    for (int i = 0; i < digest.length; i++) {
      strDigest += Integer.toString((digest[i] & 0xff) 
                + 0x100, 16).substring(1).toUpperCase();
    }
    return strDigest;
  } catch (Exception e) {
    return null;
  }
} 
```

结果等于 linux md5sum 实用程序。

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2016-12-09T22:25:40.443

这是一个简单的函数，它包装了 Sunil 的代码，以便将 File 作为参数。该函数不需要任何外部库，但它确实需要 Java 7。

```
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

import javax.xml.bind.DatatypeConverter;

public class Checksum {

    /**
     * Generates an MD5 checksum as a String.
     * @param file The file that is being checksummed.
     * @return Hex string of the checksum value.
     * @throws NoSuchAlgorithmException
     * @throws IOException
     */
    public static String generate(File file) throws NoSuchAlgorithmException,IOException {

        MessageDigest messageDigest = MessageDigest.getInstance("MD5");
        messageDigest.update(Files.readAllBytes(file.toPath()));
        byte[] hash = messageDigest.digest();

        return DatatypeConverter.printHexBinary(hash).toUpperCase();
    }

    public static void main(String argv[]) throws NoSuchAlgorithmException, IOException {
        File file = new File("/Users/foo.bar/Documents/file.jar");          
        String hex = Checksum.generate(file);
        System.out.printf("hex=%s\n", hex);            
    }

} 
```

示例输出：

```
hex=B117DD0C3CBBD009AC4EF65B6D75C97B 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2010-07-09T20:04:05.503

如果您使用 ANT 构建，这非常简单。将以下内容添加到您的 build.xml：

```
<checksum file="${jarFile}" todir="${toDir}"/> 
```

其中 jarFile 是您要针对其生成 MD5 的 JAR，而 toDir 是您要放置 MD5 文件的目录。

[更多信息在这里。](http://ant.apache.org/manual/Tasks/checksum.html)

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2013-10-23T23:37:19.070

Google guava 提供了一个新的 API。找到下面的一个：

```
public static HashCode hash(File file,
            HashFunction hashFunction)
                     throws IOException

Computes the hash code of the file using hashFunction.

Parameters:
    file - the file to read
    hashFunction - the hash function to use to hash the data
Returns:
    the HashCode of all of the bytes in the file
Throws:
    IOException - if an I/O error occurs
Since:
    12.0 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-03-24T06:54:02.453

```
public static String getMd5OfFile(String filePath)
{
    String returnVal = "";
    try 
    {
        InputStream   input   = new FileInputStream(filePath); 
        byte[]        buffer  = new byte[1024];
        MessageDigest md5Hash = MessageDigest.getInstance("MD5");
        int           numRead = 0;
        while (numRead != -1)
        {
            numRead = input.read(buffer);
            if (numRead > 0)
            {
                md5Hash.update(buffer, 0, numRead);
            }
        }
        input.close();

        byte [] md5Bytes = md5Hash.digest();
        for (int i=0; i < md5Bytes.length; i++)
        {
            returnVal += Integer.toString( ( md5Bytes[i] & 0xff ) + 0x100, 16).substring( 1 );
        }
    } 
    catch(Throwable t) {t.printStackTrace();}
    return returnVal.toUpperCase();
} 
```

# javascript - 如何将参数传递给动态设置的 JavaScript 函数？

> ID：304270
> 
> 赞同：16
> 
> 时间：2008-11-20T03:46:34.667
> 
> 标签：javascript

好的，我有一个 JavaScript 可以在这样的表中创建行：

```
 function AddRow(text,rowID) {
    var tbl = document.getElementById('tblNotePanel');
    var row = tbl.insertRow(tbl.rows.length);

    var cell = row.insertCell();
    var textNode = document.createTextNode(text);
    cell.id = rowID;
    cell.style.backgroundColor = "gold";

    cell.onclick = clickTest;

    cell.appendChild(textNode);
  } 
```

在上面的函数中，我将单元格的`onclick`函数设置为调用另一个名为`clickTest`. 我的问题是当我将`onclick`事件分配给 call`clickTest`时，如何设置`clickTest`在单元格事件上调用该方法时要发送的参数信息`onclick`？或者，我如何在`clickTest`函数中访问单元格的 ID？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-11-20T03:52:57.870

试试这个：

```
cell.onclick = function() { clickTest(rowID); }; 
```

这个想法是您将 onclick 处理程序绑定到匿名函数。匿名函数以 rowID 作为参数调用 clickTest。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T03:52:28.307

在 clickTest 函数中，您应该可以访问`this`变量。`clickTest`在函数内部试试这个：

```
alert(this.id); 
```

这将引用触发事件的 DOM 元素。

基本上，没有办法将参数传递给事件处理函数。原因是浏览器正在根据事件执行函数，而您实际上并没有调用该函数。

当您分配事件处理函数时，您可以使用允许您访问局部变量（到闭包）的闭包。看起来像这样：

```
cell.onclick = function() { alert(this.id); alert(cell.id); }; 
```

Were`cell.id`是在执行事件处理程序时仍然在范围内考虑的局部范围变量。

# actionscript-3 - AS3 中的安全沙箱

> ID：304271
> 
> 赞同：4
> 
> 时间：2008-11-20T03:47:20.580
> 
> 标签：actionscript-3, flashdevelop

什么是安全沙盒违规，我该如何覆盖它？我正在 FlashDevelop 中制作一个项目，今天它不会加载外部文件，即使它以前已经加载过。它提供以下输出：

> ************* 违反安全沙盒 ********* 连接到 file:///C|/Documents%20and%20Settings/Kevin.PC885314341208/Desktop/Import%20 .txt/StockData/1.txt 已停止 - 不允许从 file:///C|/Documents%20and%20Settings/Kevin.PC885314341208/Desktop/Import%20.txt/import.swf

我希望这不是一个严重的问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-01T02:31:42.727

您发布的错误消息显示您正在尝试从本地 swf 加载本地文件。可以针对您的方案修复此错误。

在 FlashDevelop 中，将“使用网络服务”设置为 false（项目属性 -> 编译器选项选项卡）。这将阻止您的 swf 访问互联网，但可以让您加载本地文件。将其设置为 true 将允许访问 Internet，但不允许访问本地文件。

在 Flash 中，该设置位于 Flash 选项卡的“发布设置”下。它被称为“本地播放安全”，设置为“仅访问本地文件”或“仅访问网络”。它与 FlashDevelop 中的设置相同，只是名称不同。

您还可以使用 Adob​​e 的免费+打开[本地内容更新程序](http://www.adobe.com/support/flashplayer/downloads.html)在发布/编译后切换 swf 文件的“使用网络”标志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T04:01:59.300

您正在加载本地文件，这是不允许的。但是，当您正在开发它时，您当然可以允许它。

将您的项目文件夹添加到受信任的位置： http: [//www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)

编辑：我可能会补充说，如果您在禁用网络的情况下运行它，它将起作用（这是出于开发目的）。例如，当您从 Flash IDE 运行它时会发生这种情况，这可以解释为什么它以前可能工作过？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T15:12:16.780

当您尝试通过 Web 浏览器运行 SWF 时，您无法加载桌面文件。Flash 不允许您访问本地硬盘驱动器，因为这将是一个主要的安全问题。您必须将这些文件放在服务器上的某个位置，然后将直接 URL 传递给 Flash。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T01:44:36.007

好的。我通过使用 FlashDevelop 的内置 flashplayer 发布它来让它工作（我不知道如何更好地描述它）。我无法使用 Antti 建议的安全设置。

# sql - 经典 ASP 从 SQL2005 获取 SCOPE_IDENTITY() 值

> ID：304281
> 
> 赞同：2
> 
> 时间：2008-11-20T03:52:11.147
> 
> 标签：sql, asp-classic, identity

我不知道如何从 SQL2005 存储过程中将 SCOPE_IDENTITY() 恢复到我的变量中。

我的 sSQL 字符串：

```
sSQL = "EXEC [sp_NewClaim] " & Chr(34) & ClaimNumber & Chr(34) & ", " & Request.Cookies("UserID") & ", " & Request.Cookies("MasterID") & ", " & Chr(34) & strRestaurante & Chr(34) & ", " & Chr(34) &  Fecha & Chr(34) & ", " & Chr(34) & Hora & Chr(34) & ", " & Chr(34) & Request("Tiempo") & Chr(34) & ", " & Chr(34) & Request("Luz") & Chr(34) & ", " & Chr(34) & Request("Desc") & Chr(34) & ", " & Chr(34) & Request("incidente") & Chr(34) & ", " & Chr(34) & Request("codigos") & Chr(34) & ", False, 0; SELECT RecordNumber = SCOPE_IDENTITY()" 
```

我的 sSQL 输出：

```
EXEC [sp_NewClaim] "W200811", 7, 8, "Otro -- WORK PLEASE", "11/19/2008", "01:19 PM", "Nublado", "Mala", "asdasd", "uyiuyui", "C-Junta", False, 0; SELECT RecordNumber = SCOPE_IDENTITY() 
```

执行我的 SQL 命令：

```
Set rsData= Server.CreateObject("ADODB.Recordset")
rsData.Open sSQL, conDB, adOpenKeyset, adLockOptimistic 
```

尝试输出 SCOPE_IDENTITY() 会产生一个空变量（无输出）：

```
Response.Write("<br />Record Number: " & rsData("RecordNumber")) 
```

存储过程正确运行。我的信息毫无问题地存储到我的数据库中。RecordNumber 是具有标识的列，存储过程已将 @RecordNumber 定义为输出：

```
USE [db_clcinsurance_com]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE sp_NewClaim
 (
    @ClaimNumber nvarchar(50),
    @blah............
    .................
    @RecordNumber INT OUTPUT
    )
AS

BEGIN

    INSERT INTO Accidente (ClaimNumber,........., RecordNumber)

    VALUES (@ClaimNumber,....., @RecordNumber)

    SET @RecordNumber = SCOPE_IDENTITY();

END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T04:01:22.003

对于您的存储过程，请执行以下操作：

```
CREATE PROCEDURE sp_NewClaim
 (
    @ClaimNumber nvarchar(50),
    @blah............
    .................
)
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO Accidente (ClaimNumber,........., RecordNumber)
        VALUES (@ClaimNumber,....., @RecordNumber)

    SELECT SCOPE_IDENTITY()
END 
```

然后以与检索任何其他查询结果相同的方式获取 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T04:40:15.013

我同意 Joel Coehoorn 的回复，但我想指出，您将 SCOPE_IDENTITY() 变量作为输出参数发回，而不是在 ado 调用中以这种方式检索它。您无法使用调用存储过程的方法检索输出参数。

如果您好奇，这里有一些 ado 示例[来](http://support.microsoft.com/kb/164485)调用存储过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T04:05:07.063

您可以尝试测试以确保`SCOPE_IDENTITY()`函数按预期工作 - 添加`SELECT @RecordNumber`到 sproc 的末尾并在 Management Studio 中手动运行它以确认变量是否按照您期望的方式设置。如果这不起作用，请尝试`SELECT SCOPE_IDENTITY()`确认它完全有效。最后，将变量值硬编码为测试，以确保 OUTPUT 参数正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T04:17:30.207

Asp classic 不是我的强项，但思路是一样的。

问题是您没有将身份作为记录集返回，而是作为 OUT 参数返回。这意味着您尝试阅读它的方式不正确。

试试 Joel 的建议，或者通过返回码得到它：

```
Return Scope_Identity() 
```

或者，您应该使用参数构建查询并将最后一个指定为您的输出参数。然后执行查询并检查最后一个参数的值。在 .NET 中（根据需要转换为 VB）：

```
SqlCommand cmd = new SqlCommand("INSERT INTO Foo (Description) VALUES (@Description); SET @Result = SCOPE_IDENTITY()");
SqlParameter paramDesc = new SqlParameter("@Description", SqlDbType.Int);
cmd.Parameters.Add(paramDesc);
SqlParameter paramResult = new SqlParameter("@Result", SqlDbType.Int);
paramResult.Direction = ParameterDirection.Output;
cmd.Parameters.Add(paramResult); 
```

我希望您正在对输入进行一些清理，因为它们的查询方法很容易受到 SQL 注入攻击。

抢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T05:14:42.417

我同意罗伯特。如果您要在存储过程中使用输出参数并使用动态 SQL 调用它，那么在您的构建中，您必须将 SQL 变量分配给输出参数，然后选择该变量。分配 SQL 变量时还必须使用 OUTPUT 关键字，例如：

```
sSQL = "DECLARE @RecNo int; EXEC [sp_NewClaim] 'param1', 'param2', etc..... @RecNo OUTPUT; SELECT @RecNo;" 
```

# security - HTML5 sessionStorage 可以写入磁盘吗？

> ID：304284
> 
> 赞同：10
> 
> 时间：2008-11-20T03:53:48.630
> 
> 标签：security, browser, caching, html, privacy

（与[是否有安全的浏览器缓存有关？](https://stackoverflow.com/questions/304086/is-there-a-secure-browser-cache)）：

HTML5 会话存储的任何实现是否曾经写入磁盘？

例如，我是否可以依靠拥有一个“安全”/“私有”缓存，我知道它无法在浏览器会话之外持续存在，无论它

*   超时
*   已结束/注销
*   浏览器关闭/崩溃/计算机上的电源按钮

看

*   [HTML5 浏览器应用缓存](http://www.whatwg.org/specs/web-apps/current-work/#appcache)
*   [HTML5 会话存储](http://www.whatwg.org/specs/web-apps/current-work/#the-sessionstorage-attribute)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-20T04:29:22.413

Safari 使用 SQLite，可能其他人也会使用该解决方案。至于标准，它说：

**Quote:**浏览上下文的生命周期可能与实际用户代理进程本身的生命周期无关，因为用户代理可能支持重启后恢复会话。

这意味着它可能会存储在磁盘上，这意味着如果有人真的想窥探，他们可以检查已删除的文件并恢复它，就像使用恢复软件时所做的那样。

但是，我个人希望他们也支持仅内存的临时存储，但这不在规范中，所以它可能会被排除在外。

> **编辑：**我在最后一句话中说“希望”，但是“希望”伴随着我发送给联盟的关于这个问题的电子邮件，所以我“希望”他们考虑我的建议。在我们都对确定标准有发言权之后，请发出您的声音，没有人或团队是完美的，所有这些标准联盟都在积极寻求反馈。

# c++ - 关于 Visio 2007 的简单问题（试图创建一个简单的 UML 图（C++））？

> ID：304285
> 
> 赞同：2
> 
> 时间：2008-11-20T03:55:18.910
> 
> 标签：c++, uml, diagram, visio

我只是想创建一个 UML 图，我可以在其中显示头文件声明。

我能够显示以下内容：

```
Bitmap * getImage()
Coordinate * getCoordinates(Object o) 
```

类似的东西。问题是，我不知道如何将指针显示为返回类型（它只让我们从 UML 图中选择对象）或参数。我可以通过将返回类型包含在函数名称中来绕过它们，但我仍然不知道如何显示参数（例如：`Object o`前面列出的）或者只是找到一个快速修复它。我不能以同样的方式快速修复它，因为 Visio 会自动在我的函数末尾放置一个括号（例如：`Coordinate * getCoordinates(Object o)`会输出`Coordinate * getCoordinates(Object o)()`

有没有办法输入可能包含指针的参数和参数？还是快速解决它？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T04:00:28.103

转到对话框的“操作”区域中的相关方法。然后点击“属性”按钮，得到“UML操作属性”对话框。在那里，将“后缀”设置为“*”。

# asp.net - 为什么 ASP.NET 网络表单需要 Runat="Server" 属性？

> ID：304290
> 
> 赞同：208
> 
> 时间：2008-11-20T03:58:00.760
> 
> 标签：asp.net, runatserver

为什么我必须`runat="server"`在我的所有 ASP.NET 控件上指定它是一个强制属性，并且`server`是我对 ASP.NET 的有限知识中唯一可用的选项，并且如果我不使用它会出现错误？

我确实知道我可以选择在我的 HTML 标记上使用它，并且我确实了解客户端/服务器范例及其实际指定的内容。

它是作为 ASP.NET 控件的控件可能只是暗示的冗余标记，还是有潜在的原因？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2008-11-20T04:14:21.990

我一直认为，您可以混合使用 ASP.NET 标记和 HTML 标记，而 HTML 标记可以选择存在`runat="server"`或不存在。将标签留在其中并不会造成任何伤害，并且会导致编译器错误将其取出。你对 Web 语言的暗示越多，一个初露头角的程序员就越不容易进入并学习它。这与任何关于标签属性的详细理由一样好。

这段对话是在 Mike Schinkel 的[博客](http://mikeschinkel.com/blog/whyrunatserverforaspnetpart2/)上，他和 Microsoft National Services 的 Talbot Crowell 之间进行的。相关信息如下（由于来源中的语法错误而改写了第一段）：

> *[...]*但更重要的`<runat="server">`是一致性和可扩展性。
> 
> 如果开发人员必须标记一些标签（即`<asp: />`）以供 ASP.NET 引擎忽略，那么标签之间的命名空间冲突和未来的增强功能也存在潜在问题。通过要求该`<runat="server">`属性，这被否定了。

它继续：

> 如果`<runat=client>`所有客户端标签都需要，则解析器将需要解析所有标签并删除该`<runat=client>`部分。

他继续：

> 目前，如果我的猜测是正确的，解析器会简单地忽略所有文本（标签或无标签），除非它是带有 `runat=server`属性或“<code><%”前缀或 ssi “<code><!– #include... *(...)* 此外，由于 ASP.NET 的设计允许将 Web 设计者 (foo.aspx) 与 Web 开发者 (foo.aspx.vb) 分开，因此 Web 设计者可以使用他们自己的 Web 设计器工具来放置 HTML和客户端 JavaScript，而无需了解 ASP.NET 特定标签或属性。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2008-11-20T04:21:39.730

我通常不喜欢猜测，但我会去这个......

如果您还记得当时（2001 年？）微软对 .NET 的营销炒作，就很难说 .NET 到底是什么了。是服务器吗？编程平台？一种语言？全新的东西？考虑到广告，它是您想要的任何模棱两可的东西 - 它只是解决了您可能遇到的任何问题。

所以，我的猜测是，ASP.NET 代码可以在任何地方运行——服务器端或客户端，在与 .NET 运行时绑定的 Internet Explorer 副本中，存在一个隐藏的宏伟愿景。runat="server" 只是一个残留的残余物，因为它的客户端等价物从未投入生产，所以被抛在了后面。

还记得那些奇怪的广告吗？

相关：[来自 The Register 的文章，其中](http://www.theregister.co.uk/2008/11/27/microsoft_ignored_ajax/)包含一些 .NET 历史。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-11-20T04:14:02.553

并非所有可以包含在页面中的控件都*必须*在服务器上运行。例如：

`<INPUT type="submit" runat=server />`

这与以下内容基本相同：

`<asp:Button runat=server />`

从第一个标签中删除 runat=server 标签，您就有了一个在浏览器中运行的标准 HTML 按钮。有理由支持和反对在服务器上运行特定控件，并且 ASP.NET 无法根据您包含的 HTML 标记“假设”您想要的内容。可能可以“推断”该`<asp:XXX />`控件系列的 runat=server，但我的猜测是微软会认为这是对标记语法和 ASP.NET 引擎的破解。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-04-05T05:54:12.683

Microsoft Msdn 文章[The Forgotten Controls: HTML Server Controls](https://msdn.microsoft.com/en-us/library/aa478973.aspx)通过文本框的示例解释了 runat="server" 的使用`<input type="text">`，将其转换为`<input type="text" id="Textbox1" runat="server">`

> 这样做将使您在创建网页并将其发送到客户端之前以编程方式访问服务器上的 HTML 元素。HTML 元素必须包含一个 id 属性。此属性用作元素的标识，使您能够通过元素的特定 ID 对元素进行编程。除此属性外，HTML 元素还必须包含 runat="server"。这告诉处理服务器该标签是在服务器上处理的，不应被视为传统的 HTML 元素。

**简而言之，要启用对 HTML 元素的编程访问，请将`runat="server"`其添加。**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-20T04:16:04.920

我怀疑它与处理过程中如何识别服务器端控件有关。它不必在运行时按名称检查每个控件以确定是否需要进行服务器端处理，而是通过标记对内部节点表示进行选择。编译器会检查以确保所有需要服务器标签的控件在验证步骤中都有它们。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-02T07:34:12.287

默认情况下，ASP.NET 文件中的 HTML 元素被视为文本。要使这些元素可编程，`runat="server"`请向 HTML 元素添加一个属性。此属性指示该元素应被视为服务器控件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-20T04:17:43.000

如果您在普通 html 标签上使用它，这意味着您可以在事件处理程序等中以编程方式操作它们，例如在页面加载时更改锚标签的 href 或类...只有在必须时才这样做，因为 vanilla html 标签走得更快。

至于用户控件和服务器控件，不，没有它们它们就无法工作，没有深入研究 aspx 预处理器的内部结构，无法确切说明原因，但猜测可能有充分的理由，他们只是写了解析器以这种方式寻找明确标记为“做某事”的事情。

如果@JonSkeet 在任何地方，他可能会提供更好的答案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-22T19:30:22.313

它存在是因为 ASP .NET 中的所有控件都继承自 System.Web.UI.Control，后者具有“runat”属性。

在 System.Web.UI.HTMLControl 类中，该属性不是必需的，但是，在 System.Web.UI.WebControl 类中，该属性是必需的。

**编辑：** 让我更具体一点。由于 asp.net 几乎是 HTML 的抽象，编译器需要某种指令，以便它知道特定标签需要在服务器端运行。如果该属性不存在，则不知道首先在服务器上处理它。如果不存在，则假定它是常规标记并将其传递给客户端。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-11-19T23:37:51.173

我认为微软可以通过让编译器在页面被编译之前添加 runat 属性来解决这种歧义，就像 java 对泛型的类型擦除一样，而不是擦除，它可以在它看到的任何地方写 runat=server asp：标签的前缀，因此开发人员无需担心它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-27T18:16:07.513

将数据提交到 ASP.NET Web 服务器时，作为 Runat = “server” 提及的控件将在服务器应用程序中表示为 Dot Net 对象。您可以在 HTML 控件中手动键入代码，也可以通过在设计视图中单击鼠标右键来使用*Run As Server*选项。一旦您从 HTML 控件通常不提供的工具箱中拖动它，ASP.NET 控件将自动获取此属性。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-01T08:11:19.683

相当多余的属性，考虑到“asp”标签显然是一个 ASP 元素，应该足以将其识别为服务器端可访问元素。

然而，在其他地方，它曾经提升在代码隐藏中使用的普通标签。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-30T15:17:28.660

我只是通过反复试验得出了这个结论：需要 runat="server" 在服务器端运行时访问元素。删除它们，重新编译并观察会发生什么。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-02T17:37:53.040

任何带有 runat=server 的标签都被添加为 Page 中的服务器控件，并且其之间的任何 html 内容都作为 LiteralControls 处理，这些内容也被添加到 Page 控件集合中。

* * *

## 回答 #14

> 赞同：-5
> 
> 时间：2014-03-01T20:02:14.327

`runat="Server"`表示将对 HTML“控件”进行回发。

Web 窗体`postback`不断地使用信号通知服务器来处理页面控制事件。

`.NET` `MVC`页面不要使用`postback`（除了表格`"submit"`）。 `MVC`依赖于`JQUERY`在客户端管理页面（从而绕过了`postback`向服务器发送大量消息的需要）。

所以： `.NET`Web 表单...`"runat"`在页面标记中大量使用属性。

`.NET` `MVC`几乎从不`"runat"`在页面标记中使用属性。

希望这有助于澄清为什么`runat`是必要的......

# c# - WebClient.DownloadFileAsync：有很多文件下载

> ID：304292
> 
> 赞同：0
> 
> 时间：2008-11-20T04:00:24.717
> 
> 标签：c#, webclient, download

我正在使用`WebClient`该类的多个实例，以便同时从 Internet 上的 Web 服务器异步下载许多小文件。
我使用的 URI 的 IP 采用数字表示法，以避免不必要的 DNS 解析。

我正在推动它，例如同时使用 50 多个该类的实例。

我注意到虽然大多数文件都正确下载，但其中一小部分的长度为 0，这意味着该线程从未成功完成——可能是由于错误。
但是`AsyncCompletedEventArgs`从未报告错误。

我是不是推得太多了？但是话又说回来，它不应该发出错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-09T22:14:57.513

如果有人遇到这个*非常*老的问题，最好的猜测是在下载完成之前线程已经被杀死，导致文件大小等于 0。

例如，让我们比较一下

```
namespace ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            WebClient client = new WebClient();
            client.DownloadFileAsync(new Uri("http://ipv4.download.thinkbroadband.com/5MB.zip"), "C:\\5MB.zip");
            Thread.Sleep(30000);
        }
    }
} 
```

和

```
namespace ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            WebClient client = new WebClient();
            client.DownloadFileAsync(new Uri("http://ipv4.download.thinkbroadband.com/5MB.zip"), "C:\\5MB.zip");
        }
    }
} 
```

在第二种情况下，一旦开始下载，程序就会退出，导致下载中断，这表现为在 C: 驱动器上创建大小为 0 的文件。

# caching - 我的页面是否必须具有 HTML5 文档类型才能访问 sessionStorage

> ID：304299
> 
> 赞同：4
> 
> 时间：2008-11-20T04:05:52.710
> 
> 标签：caching, html, html4

我们的开发商店继续支持 IE6 等。我想[使用会话存储](https://stackoverflow.com/questions/304284/can-html5-sessionstorage-be-written-to-disk)来制作应用缓存，但想知道它需要做多少工作......

是否可以在兼容 HTML5 的浏览器中使用 HTML4 文档类型并仍然访问 sessionStorage，或者我是否必须浏览器嗅探并返回不同的页面（可能只是更改文档类型）才能使其正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T18:08:41.293

事实上，你可以。浏览器*不关心*文档类型。HTML 4 strict 或 HTML 5 不会产生影响，只需确保您的页面处于标准模式，而不是[Quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)。

就个人而言，我认为没有理由不使用 HTML5 文档类型，因为您将使用 HTML5，而且，与其他任何人不同，您可以*记住*它！

当然，HTML5 中定义的会话存储在 IE6 中不起作用——但由您决定提供哪种回退方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T04:20:29.857

好问题......理论上答案是否定的，但实际上它取决于供应商。我的解决方案是让服务器检查用户代理并根据您在测试跨浏览器实现时发现的内容动态标记页面。不幸的是，这是您无法在客户端上动态执行的操作之一（更改文档类型），就像使用 Javascript 实现修复一样。

# database - 在索引中使用布尔或枚举列？

> ID：304312
> 
> 赞同：11
> 
> 时间：2008-11-20T04:17:29.240
> 
> 标签：database, indexing

我已经读过为索引选择的列应该在行之间很好地区分，即索引列不应该包含大量具有相同值的行。这表明布尔值或诸如性别之类的枚举对于索引来说是一个糟糕的选择。

但是假设我想按性别查找用户，并且在我的特定数据库中，只有 2% 的用户是女性，那么在这种情况下，在获取女性用户时，性别列似乎是一个有用的索引，但在获取所有用户时却不是男性用户。

那么在这样的列上放置索引通常是一个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T04:40:02.750

索引低基数列以提高搜索性能在我的世界中很常见。Oracle 支持为这些情况设计的“位图索引”。有关简短概述，请参阅[本文](http://www.dba-oracle.com/art_9i_indexing.htm)。

我的大部分经验是使用 Oracle，但我认为其他 RDBMS 支持类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T04:43:17.190

不过不要忘记，您可能只会在大约 2% 的时间里选择女性。其余时间，您将寻找男性。为此，直接表扫描（而不是索引扫描加上从表中访问数据）会更快。

有时，您还可以使用复合索引，将低基数列（枚举、布尔值）与高基数列（也许是出生日期）结合起来。这在很大程度上取决于完整的数据以及您将真正使用的查询。

我的经验是，男性/女性指数很少真正有用。一般建议是有效的。还有一点要记住 - 添加或删除（或更新）行时必须维护索引。索引越多，每个修改操作要做的工作就越多，从而降低系统速度。

有整本关于索引设计的书籍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T04:24:35.153

在这种情况下，我会让服务器统计信息告诉我何时创建索引。除非您知道此查询将占主导地位，或者运行此类查询不会先验地满足您的性能目标，否则过早地创建索引可能只会降低性能而不是提高性能。此外，您可能需要考虑如何实际使用查询。在这种情况下，我的猜测是您通常会根据此列进行某种聚合，而不是简单地选择符合条件的用户。在那种情况下，无论如何您都会进行表扫描，而索引不会给您带来任何好处。

# mysql - MySQL是否自动索引外键列？

> ID：304317
> 
> 赞同：296
> 
> 时间：2008-11-20T04:19:26.020
> 
> 标签：mysql, database, indexing

MySQL是否自动索引外键列？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2008-11-20T04:33:23.793

是的，但仅限于[innodb](/questions/tagged/innodb "显示标记为“innodb”的问题")。Innodb 是目前唯一一种实现了外键的表格式。

* * *

## 回答 #2

> 赞同：147
> 
> 时间：2009-07-17T19:22:52.093

[显然，根据 robert 已发布的链接](http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html)中的指定，会自动创建一个索引。

> InnoDB 需要外键和引用键上的索引，以便外键检查可以快速且不需要表扫描。在引用表中，必须有一个索引，其中外键列按相同顺序列为第一列。**如果引用表不存在，则会在引用表上自动创建此类索引。**（这与一些旧版本形成对比，在这些旧版本中，索引必须显式创建，否则外键约束的创建将失败。） index_name，如果给定，如前所述使用。

[InnoDB 和外键约束](http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-11-20T04:23:03.940

是的，请参阅[InnoDB 和 FOREIGN KEY 约束](http://dev.mysql.com/doc/refman/5.6/en/innodb-foreign-key-constraints.html)。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-02-08T08:50:46.060

如果您执行 ALTER TABLE（而不是 CREATE TABLE），则不会自动获取索引，至少根据[文档](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)（链接适用于 5.1，但适用于 5.5）：

> [...] 当您使用 ALTER TABLE 向表添加外键约束时，请记住首先创建所需的索引。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-07-25T08:51:53.147

对于那些正在寻找`5.7` [docs](https://dev.mysql.com/doc/refman/5.7/en/create-table-foreign-keys.html)报价的人：

> MySQL 需要外键和引用键上的索引，以便外键检查可以快速且不需要表扫描。在引用表中，必须有一个索引，其中外键列按相同顺序列为第一列。如果引用表不存在，则会在引用表上自动创建此类索引。如果您创建另一个可用于强制外键约束的索引，则此索引可能会在稍后被静默删除。index_name，如果给定，如前所述使用。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-06-28T23:35:28.110

如前所述，它适用于 InnoDB。起初我觉得奇怪的是许多其他（特别是 MS SQL 和 DB2）没有。只有当表行很少时，表空间扫描才比索引扫描好 - 所以在绝大多数情况下，外键都希望被索引。然后它有点打击我——这并不一定意味着它必须是一个独立的（一列）索引——它在 MySQL 的自动 FK 索引中。所以，这可能是 MS SQL、DB2（我不确定 Oracle）等将其留给 DBA 的原因；毕竟大型表上的多个索引可能会导致性能和空间问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-11-24T11:56:07.377

是的，`Innodb`提供这个。您可以在子句之后放置一个外键名称，`FOREIGN KEY`也可以让 MySQL 为您创建一个名称。MySQL 自动使用名称创建索引`foreign_key_name`。

```
CONSTRAINT constraint_name
FOREIGN KEY foreign_key_name (columns)
REFERENCES parent_table(columns)
ON DELETE action
ON UPDATE action 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-12-24T06:45:35.047

无法自动使用索引键

```
ALTER TABLE (NAME OF THE TABLE) ADD INDEX (FOREIGN KEY) 
```

您创建的表格的名称，例如照片和 FOREIGN KEY `photograph_id`。代码应该是这样的

```
ALTER TABLE photographs ADD INDEX (photograph_id); 
```

# c# - SilverLight DataGrid：复制和粘贴

> ID：304318
> 
> 赞同：2
> 
> 时间：2008-11-20T04:19:35.350
> 
> 标签：c#, asp.net, silverlight, datagrid

1.  有没有一种方法可以让我从 SilverLight DataGrid 中选择一堆行或单元格并将它们复制以粘贴到例如 excel 中？

DataGrid 似乎没有内置此功能！

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-10-18T22:15:10.627

Silverlight 4 很棒，Ctrl-A 一个datagrid，复制粘贴到Excel 中。

您甚至可以使用 ClipboardContentBinding 自定义要复制的内容，如果您使用的是 TemplateColumn，这将非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-17T18:02:25.557

我会查看这个链接 - 似乎相当有用 [http://weblogs.asp.net/manishdalal/archive/2008/11/12/cross-browser-copy-and-paste-in-datagrid-with-excel-support-第 1 部分.aspx](http://weblogs.asp.net/manishdalal/archive/2008/11/12/cross-browser-copy-and-paste-in-datagrid-with-excel-support-part-1.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T04:24:01.097

Silverlight 使用矢量渲染系统。文本与记事本中的文本不同 - 它被呈现为矢量图像。您无法在 Silverlight 或 Flash 中突出显示文本。

如果您正在编写应用程序，请提供一个“下载 Excel 文件”按钮，该按钮将重定向到 Excel 文件生成器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-31T02:13:00.897

您是否希望以编程方式执行此操作？如果是这样，那么您对 ​​Silverlight 3 不走运。Silverlight 4 应该添加此功能。

# windows - Windows 命令行上是否有相当于“which”的功能？

> ID：304319
> 
> 赞同：2638
> 
> 时间：2008-11-20T04:19:35.380
> 
> 标签：windows, command-line, path-variables

由于我有时会遇到路径问题，我自己的一个 cmd 脚本被另一个程序（路径的早期）隐藏（阴影），我希望能够在 Windows 命令行上找到程序的完整路径，给定只是它的名字。

是否有等效于 UNIX 命令“哪个”？

在 UNIX 上，`which command`打印给定命令的完整路径以轻松查找和修复这些阴影问题。

* * *

## 回答 #1

> 赞同：2824
> 
> 时间：2008-11-20T05:52:50.717

Windows Server 2003 及更高版本（即 Windows XP 32 位之后的任何版本）提供的`where.exe`程序可以执行某些`which`操作，但它匹配所有类型的文件，而不仅仅是可执行命令。（它不匹配像 . 这样的内置 shell 命令`cd`。）它甚至可以接受通配符，因此`where nt*`可以在您和当前目录中查找`%PATH%`名称以 . 开头的所有文件`nt`。

尝试`where /?`寻求帮助。

请注意，Windows PowerShell 定义`where`为[cmdlet](http://technet.microsoft.com/en-us/library/hh849715.aspx)[的`Where-Object`](http://technet.microsoft.com/en-us/library/hh849715.aspx)别名，因此如果需要`where.exe`，您需要键入全名而不是省略`.exe`扩展名。或者，您可以为其设置别名：

```
Set-Alias which where.exe 
```

**更新：**建议使用`Get-Command`(alias: `gcm`)，因为它是 PS 原生的，并且将获取所有命令类型：别名、cmdlet、可执行文件和函数。例子：

```
gcm notepad* 
```

* * *

## 回答 #2

> 赞同：307
> 
> 时间：2008-11-20T05:48:16.437

虽然更高版本的 Windows 有一个`where`命令，但您也可以通过使用环境变量修饰符在 Windows XP 中执行此操作，如下所示：

```
c:\> for %i in (cmd.exe) do @echo.   %~$PATH:i
   C:\WINDOWS\system32\cmd.exe

c:\> for %i in (python.exe) do @echo.   %~$PATH:i
   C:\Python25\python.exe 
```

您不需要任何额外的工具，并且不限于`PATH`因为您可以替换您希望使用的任何环境变量（当然是路径格式）。

* * *

而且，如果您想要一个可以处理 PATHEXT 中的所有扩展（就像 Windows 本身一样），这个可以解决问题：

```
@echo off
setlocal enableextensions enabledelayedexpansion

:: Needs an argument.

if "x%1"=="x" (
    echo Usage: which ^<progName^>
    goto :end
)

:: First try the unadorned filenmame.

set fullspec=
call :find_it %1

:: Then try all adorned filenames in order.

set mypathext=!pathext!
:loop1
    :: Stop if found or out of extensions.

    if "x!mypathext!"=="x" goto :loop1end

    :: Get the next extension and try it.

    for /f "delims=;" %%j in ("!mypathext!") do set myext=%%j
    call :find_it %1!myext!

:: Remove the extension (not overly efficient but it works).

:loop2
    if not "x!myext!"=="x" (
        set myext=!myext:~1!
        set mypathext=!mypathext:~1!
        goto :loop2
    )
    if not "x!mypathext!"=="x" set mypathext=!mypathext:~1!

    goto :loop1
:loop1end

:end
endlocal
goto :eof

:: Function to find and print a file in the path.

:find_it
    for %%i in (%1) do set fullspec=%%~$PATH:i
    if not "x!fullspec!"=="x" @echo.   !fullspec!
    goto :eof 
```

它实际上返回所有可能性，但您可以很容易地调整它以适应特定的搜索规则。

* * *

## 回答 #3

> 赞同：208
> 
> 时间：2014-11-26T02:07:07.443

在 PowerShell 下，[`Get-Command`](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Core/Get-Command?view=powershell-5.1)将在`$Env:PATH`.

```
$ Get-Command eventvwr

CommandType   Name          Definition
-----------   ----          ----------
Application   eventvwr.exe  c:\windows\system32\eventvwr.exe
Application   eventvwr.msc  c:\windows\system32\eventvwr.msc 
```

而且由于powershell让你定义别名，`which`可以这样定义。

```
$ sal which gcm   # short form of `Set-Alias which Get-Command`
$ which foo
... 
```

PowerShell*命令*不仅仅是可执行文件（`.exe`、、`.ps1`等）。它们也可以是 cmdlet、函数、别名、在 中设置的自定义可执行后缀`$Env:PATHEXT`等[`Get-Command`](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Core/Get-Command?view=powershell-5.1)，能够找到并列出所有这些命令（非常类似于 Bash 的`type -a foo`）。仅此一项就使其优于`where.exe`,`which.exe`等，后者通常仅限于查找可执行文件。

### 仅使用部分名称查找可执行文件

```
$ gcm *disk*

CommandType     Name                             Version    Source
-----------     ----                             -------    ------
Alias           Disable-PhysicalDiskIndication   2.0.0.0    Storage
Alias           Enable-PhysicalDiskIndication    2.0.0.0    Storage
Function        Add-PhysicalDisk                 2.0.0.0    Storage
Function        Add-VirtualDiskToMaskingSet      2.0.0.0    Storage
Function        Clear-Disk                       2.0.0.0    Storage
Cmdlet          Get-PmemDisk                     1.0.0.0    PersistentMemory
Cmdlet          New-PmemDisk                     1.0.0.0    PersistentMemory
Cmdlet          Remove-PmemDisk                  1.0.0.0    PersistentMemory
Application     diskmgmt.msc                     0.0.0.0    C:\WINDOWS\system32\diskmgmt.msc
Application     diskpart.exe                     10.0.17... C:\WINDOWS\system32\diskpart.exe
Application     diskperf.exe                     10.0.17... C:\WINDOWS\system32\diskperf.exe
Application     diskraid.exe                     10.0.17... C:\WINDOWS\system32\diskraid.exe
... 
```

### 查找自定义可执行文件

与 UNIX 不同，其中可执行文件是`+x`设置了可执行 ( ) 位的文件，Windows 上的可执行文件是存在于`$PATH`env 中指定的目录之一中的文件。`$PATHEXT`文件名后缀在env中命名的变量。变量（默认为`.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL`）。

也[`Get-Command`](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Core/Get-Command?view=powershell-5.1)尊重这个环境。变量，它可以扩展为列出自定义可执行文件。例如

```
$ $Env:PATHEXT="$Env:PATHEXT;.dll;.ps1;.psm1;.py"     # temporary assignment, only for this shell's process

$ gcm user32,kernel32,*WASM*,*http*py

CommandType     Name                        Version    Source
-----------     ----                        -------    ------
ExternalScript  Invoke-WASMProfiler.ps1                C:\WINDOWS\System32\WindowsPowerShell\v1.0\Invoke-WASMProfiler.ps1
Application     http-server.py              0.0.0.0    C:\Users\ME\AppData\Local\Microsoft\WindowsApps\http-server.py
Application     kernel32.dll                10.0.17... C:\WINDOWS\system32\kernel32.dll
Application     user32.dll                  10.0.17... C:\WINDOWS\system32\user32.dll 
```

有关[`Get-Command`](http://go.microsoft.com/fwlink/?LinkId=821482)更多选项和示例，请参阅。

* * *

## 回答 #4

> 赞同：68
> 
> 时间：2012-11-30T23:00:43.940

在 Windows PowerShell 中：

```
set-alias which where.exe 
```

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2008-11-20T05:16:34.300

如果您安装了 PowerShell（我推荐），则可以使用以下命令作为大致等效命令（将 programName 替换为可执行文件的名称）：

```
($Env:Path).Split(";") | Get-ChildItem -filter programName* 
```

更多在这里： *[我的曼维奇！PowerShell 哪个](http://www.codeassassin.com/blog/PermaLink,guid,fd1967d1-f844-4e29-82e2-f2d6424b4ef9.aspx)*

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2008-11-20T06:44:18.583

[GnuWin32](http://gnuwin32.sourceforge.net/)工具有，`which`以及一大堆其他 Unix 工具。

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2016-04-01T12:02:00.997

在 Windows CMD`which`调用中`where`：

```
$ where php
C:\Program Files\PHP\php.exe 
```

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2010-10-12T17:02:50.700

[Cygwin](http://www.cygwin.com)是一个解决方案。如果您不介意使用第三方解决方案，那么 Cygwin 就是您的最佳选择。

Cygwin 为您提供了在 Windows 环境中使用 *nix 的舒适性（您可以在 Windows 命令 shell 中使用它，或者使用您选择的 *nix shell）。它为您提供了一整套`which`适用于 Windows 的 *nix 命令（如 ），您只需将该目录包含在您的`PATH`.

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2015-09-11T11:32:27.977

在 PowerShell 中，它是`gcm`，它提供有关其他命令的格式化信息。如果您只想检索可执行文件的路径，请使用`.Source`.

例如：`gcm git`或`(gcm git).Source`

花絮：

*   适用于 Windows XP。
*   从 PowerShell 1.0 开始可用。
*   `gcm`是[`Get-Command`cmdlet](http://ss64.com/ps/get-command.html)的别名。
*   没有任何参数，它会列出主机 shell 提供的所有可用命令。
*   您可以创建一个自定义别名`Set-Alias which gcm`并像这样使用它：`(which git).Source`.
*   官方文档：[https ://technet.microsoft.com/en-us/library/ee176842.aspx](https://technet.microsoft.com/en-us/library/ee176842.aspx)

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2015-07-31T08:59:57.177

我的 PowerShell 配置文件中有一个名为“which”的函数

```
function which {
    get-command $args[0]| format-list
} 
```

这是输出的样子：

```
PS C:\Users\fez> which python

Name            : python.exe
CommandType     : Application
Definition      : C:\Python27\python.exe
Extension       : .exe
Path            : C:\Python27\python.exe
FileVersionInfo : File:             C:\Python27\python.exe
                  InternalName:
                  OriginalFilename:
                  FileVersion:
                  FileDescription:
                  Product:
                  ProductVersion:
                  Debug:            False
                  Patched:          False
                  PreRelease:       False
                  PrivateBuild:     False
                  SpecialBuild:     False
                  Language: 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2010-03-26T00:08:43.000

从这里获取 unxutils：http: [//sourceforge.net/projects/unxutils/](http://sourceforge.net/projects/unxutils/)

windows平台上的gold，将所有漂亮的unix实用程序放在标准的windows DOS上。多年来一直在使用它。

它包含一个“哪个”。请注意，它是区分大小写的。

注意：要安装它，请在某处爆炸 zip 并将 ...\UnxUtils\usr\local\wbin\ 添加到您的系统路径 env 变量中。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2010-03-26T00:50:50.313

如果你能找到一个免费的 Pascal 编译器，你可以编译它。至少它有效并显示了必要的算法。

```
program Whence (input, output);
  Uses Dos, my_funk;
  Const program_version = '1.00';
        program_date    = '17 March 1994';
  VAR   path_str          : string;
        command_name      : NameStr;
        command_extension : ExtStr;
        command_directory : DirStr;
        search_dir        : DirStr;
        result            : DirStr;

  procedure Check_for (file_name : string);
    { Check existence of the passed parameter. If exists, then state so   }
    { and exit.                                                           }
  begin
    if Fsearch(file_name, '') <> '' then
    begin
      WriteLn('DOS command = ', Fexpand(file_name));
      Halt(0);    { structured ? whaddayamean structured ? }
    end;
  end;

  function Get_next_dir : DirStr;
    { Returns the next directory from the path variable, truncating the   }
    { variable every time. Implicit input (but not passed as parameter)   }
    { is, therefore, path_str                                             }
    var  semic_pos : Byte;

  begin
      semic_pos := Pos(';', path_str);
      if (semic_pos = 0) then
      begin
        Get_next_dir := '';
        Exit;
      end;

      result := Copy(Path_str, 1, (semic_pos - 1));  { return result   }
      { Hmm! although *I* never reference a Root drive (my directory tree) }
      { is 1/2 way structured), some network logon software which I run    }
      { does (it adds Z:\ to the path). This means that I have to allow    }
      { path entries with & without a terminating backslash. I'll delete   }
      { anysuch here since I always add one in the main program below.     }
      if (Copy(result, (Length(result)), 1) = '\') then
         Delete(result, Length(result), 1);

      path_str := Copy(path_str,(semic_pos + 1),
                       (length(path_str) - semic_pos));
      Get_next_dir := result;
  end;  { Of function get_next_dir }

begin
  { The following is a kludge which makes the function Get_next_dir easier  }
  { to implement. By appending a semi-colon to the end of the path         }
  { Get_next_dir doesn't need to handle the special case of the last entry }
  { which normally doesn't have a semic afterwards. It may be a kludge,    }
  { but it's a documented kludge (you might even call it a refinement).    }
  path_str := GetEnv('Path') + ';';

  if (paramCount = 0) then
  begin
    WriteLn('Whence: V', program_version, ' from ', program_date);
    Writeln;
    WriteLn('Usage: WHENCE command[.extension]');
    WriteLn;
    WriteLn('Whence is a ''find file''type utility witha difference');
    Writeln('There are are already more than enough of those :-)');
    Write  ('Use Whence when you''re not sure where a command which you ');
    WriteLn('want to invoke');
    WriteLn('actually resides.');
    Write  ('If you intend to invoke the command with an extension e.g ');
    Writeln('"my_cmd.exe param"');
    Write  ('then invoke Whence with the same extension e.g ');
    WriteLn('"Whence my_cmd.exe"');
    Write  ('otherwise a simple "Whence my_cmd" will suffice; Whence will ');
    Write  ('then search the current directory and each directory in the ');
    Write  ('for My_cmd.com, then My_cmd.exe and lastly for my_cmd.bat, ');
    Write  ('just as DOS does');
    Halt(0);
  end;

  Fsplit(paramStr(1), command_directory, command_name, command_extension);
  if (command_directory <> '') then
  begin
WriteLn('directory detected *', command_directory, '*');
    Halt(0);
  end;

  if (command_extension <> '') then
  begin
    path_str := Fsearch(paramstr(1), '');    { Current directory }
    if   (path_str <> '') then WriteLn('Dos command = "', Fexpand(path_str), '"')
    else
    begin
      path_str := Fsearch(paramstr(1), GetEnv('path'));
      if (path_str <> '') then WriteLn('Dos command = "', Fexpand(path_str), '"')
                          else Writeln('command not found in path.');
    end;
  end
  else
  begin
    { O.K, the way it works, DOS looks for a command firstly in the current  }
    { directory, then in each directory in the Path. If no extension is      }
    { given and several commands of the same name exist, then .COM has       }
    { priority over .EXE, has priority over .BAT                             }

    Check_for(paramstr(1) + '.com');     { won't return if file is found }
    Check_for(paramstr(1) + '.exe');
    Check_for(paramstr(1) + '.bat');

    { Not in current directory, search through path ... }

    search_dir := Get_next_dir;

    while (search_dir <> '') do
    begin
       Check_for(search_dir + '\' + paramstr(1) + '.com');
       Check_for(search_dir + '\' + paramstr(1) + '.exe');
       Check_for(search_dir + '\' + paramstr(1) + '.bat');
       search_dir := Get_next_dir;
    end;

    WriteLn('DOS command not found: ', paramstr(1));
  end;
end. 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2008-11-20T04:28:14.117

Windows 没有库存，但它由[Services for Unix](http://technet.microsoft.com/en-us/interopmigration/bb380242.aspx)提供，并且有几个简单的批处理脚本漂浮在周围，可以完成同样的事情，比如[这个](http://www.pankaj-k.net/archives/upload/which.cmd)。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2008-11-20T05:09:19.853

我在 Windows 上找到的最好的版本是 Joseph Newcomer 的“whereis”实用程序，可以从[他的网站](http://www.flounder.com/whereis.htm)获得（有源代码） 。

关于“whereis”发展的文章值得一读。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2014-12-18T13:29:59.033

我在 Internet 上找到的 Unix 的 Win32 端口没有一个是令人满意的，因为它们都有以下一个或多个缺点：

*   不支持 Windows PATHEXT 变量。（它定义了在扫描路径之前隐式添加到每个命令的扩展列表，以及按什么顺序。）（我使用了很多 tcl 脚本，并且没有公开可用的工具可以找到它们。）
*   不支持 cmd.exe 代码页，这使它们无法正确显示非 ascii 字符的路径。（我对此非常敏感，我的名字中有ç :-)）
*   不支持 cmd.exe 和 PowerShell 命令行中的不同搜索规则。（没有公开可用的工具会在 PowerShell 窗口中找到 .ps1 脚本，但在 cmd 窗口中却找不到！）

所以我最终写了我自己的，它正确地支持了上述所有内容。

可用：http: [//jf.larvoire.free.fr/progs/which.exe](http://jf.larvoire.free.fr/progs/which.exe)

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2016-09-25T01:45:38.527

此批处理文件使用 CMD 变量处理来查找将在路径中执行的命令。注意：当前目录总是在路径之前完成）并且根据使用的 API 调用，在路径之前/之后搜索其他位置。

```
@echo off
echo. 
echo PathFind - Finds the first file in in a path
echo ======== = ===== === ===== ==== == == = ====
echo. 
echo Searching for %1 in %path%
echo. 
set a=%~$PATH:1
If "%a%"=="" (Echo %1 not found) else (echo %1 found at %a%) 
```

见`set /?`寻求帮助。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2017-08-02T06:40:45.337

您可以先从*[Downloading Git](https://git-scm.com/download/win)*安装 Git ，然后打开 Git Bash 并输入：

```
which app-name 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2017-12-13T08:58:21.117

我正在使用 GOW（Windows 上的 GNU），它是 Cygwin 的轻量级版本。[你](https://github.com/bmatzelle/gow)可以从 GitHub 获取它。

> GOW（Windows 上的 GNU）是 Cygwin 的轻量级替代品。它使用一个方便的 Windows 安装程序来安装大约 130 个非常有用的开源 UNIX 应用程序，这些应用程序编译为本地 win32 二进制文件。它被设计为尽可能小，大约 10 MB，而 Cygwin 可以运行超过 100 MB，具体取决于选项。-[关于描述(Brent R. Matzelle)](http://Brent%20R.%20Matzelle)

GOW 中包含的命令列表的屏幕截图：

[![在此处输入图像描述](https://i.stack.imgur.com/MUeFR.png)](https://i.stack.imgur.com/MUeFR.png)

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2008-11-20T09:39:21.383

我创建了类似于 Ned Batchelder 的工具：

[在 PATH 中搜索 .dll 和 .exe 文件](http://code.activestate.com/recipes/576522/)

虽然我的工具主要用于搜索各种 dll 版本，但它会显示更多信息（日期、大小、版本），但它不使用 PATHEXT（我希望尽快更新我的工具）。

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2019-10-08T11:37:56.077

只需发布此 Windows 的一个衬里批处理文件：

```
C:>type wh.cmd
@for %%f in (%*) do for %%e in (%PATHEXT% .dll .lnk) do for %%b in (%%f%%e) do for %%d in (%PATH%) do if exist %%d\%%b echo %%d\%%b 
```

一个测试：

```
C:>wh ssh
C:\cygwin64\bin\ssh.EXE
C:\Windows\System32\OpenSSH\\ssh.EXE 
```

`setlocal enableextensions`如果您将代码包装在和中，则不完全是单行代码`endlocal`。

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2015-09-02T14:59:42.553

对于 Windows XP 用户（没有`where`内置命令），我编写了一个“where like”命令作为 ruby​​gem，名为`whichr`.

要安装它，请安装 Ruby。

然后

```
gem install whichr 
```

像这样运行它：

C:> whichr cmd_here

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2017-02-09T23:31:11.057

JPSoft 的 TCC 和 TCC/LE 是 CMD.EXE 替代品，增加了重要功能。与 OP 的问题相关的`which`是 TCC 系列命令处理器的内置命令。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2018-06-01T02:02:25.593

我使用`which`npm 的模块已经有一段时间了，效果很好：[https](https://www.npmjs.com/package/which) ://www.npmjs.com/package/which 它是一个很棒的多平台替代方案。

现在我切换到`which`Git 附带的那个。只需将`/usr/bin`来自 Git 的路径添加到您的路径中，该路径通常位于`C:\Program Files\Git\usr\bin\which.exe`. `which`二进制文件位于`C:\Program Files\Git\usr\bin\which.exe`. 它速度更快，也可以按预期工作。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2019-05-03T13:00:18.793

试试这个

```
set a=%~$dir:1
If "%for%"=="" (Echo %1 not found) else (echo %1 found at %a%) 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-07-04T17:44:52.023

可以下载为 Windows 编译的所有 UNIX 命令，包括`which`从这个 GitHub 存储库：[https ://github.com/George-Ogden/UNIX](https://github.com/George-Ogden/UNIX)

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2020-08-05T03:27:18.173

这是我用来查找可执行文件的函数，类似于 Unix 命令“WHICH”

**app_path_func.cmd：**

```
@ECHO OFF
CLS

FOR /F "skip=2 tokens=1,2* USEBACKQ" %%N IN (`reg query "HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\%~1" /t REG_SZ  /v "Path"`) DO (
 IF /I "%%N" == "Path" (
  SET wherepath=%%P%~1
  GoTo Found
 )
)

FOR /F "tokens=* USEBACKQ" %%F IN (`where.exe %~1`) DO (
 SET wherepath=%%F
 GoTo Found
)

FOR /F "tokens=* USEBACKQ" %%F IN (`where.exe /R "%PROGRAMFILES%" %~1`) DO (
 SET wherepath=%%F
 GoTo Found
)

FOR /F "tokens=* USEBACKQ" %%F IN (`where.exe /R "%PROGRAMFILES(x86)%" %~1`) DO (
 SET wherepath=%%F
 GoTo Found
)

FOR /F "tokens=* USEBACKQ" %%F IN (`where.exe /R "%WINDIR%" %~1`) DO (
 SET wherepath=%%F
 GoTo Found
)

:Found
SET %2=%wherepath%
:End 
```

**测试：**

```
@ECHO OFF
CLS

CALL "app_path_func.cmd" WINWORD.EXE PROGPATH
ECHO %PROGPATH%

PAUSE 
```

**结果：**

```
C:\Program Files (x86)\Microsoft Office\Office15\
Press any key to continue . . . 
```

[https://www.freesoftwareservers.com/display/FREES/Find+Executable+via+Batch+-+Microsoft+Office+Example+-+WINWORD+-+Find+Microsoft+Office+Path](https://www.freesoftwareservers.com/display/FREES/Find+Executable+via+Batch+-+Microsoft+Office+Example+-+WINWORD+-+Find+Microsoft+Office+Path)

# c# - Silverlight DataGrid：导出到 excel 或 csv

> ID：304322
> 
> 赞同：22
> 
> 时间：2008-11-20T04:21:42.240
> 
> 标签：c#, asp.net, silverlight, datagrid

有没有办法可以将我的 Silverlight DataGrid 数据导出到 excel 或 csv？

我在网上搜索但找不到任何示例！

非常感谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-08-03T11:58:26.147

Silverlight 3 改变了这个问题的答案，因为它使用户能够在用户桌面上他们指定的位置创建文件。我修改了 DaniCE 提交的代码，为了便于阅读，将内容拆分为几种方法，并使用 Excel 应该识别的松散定义的 CSV 格式。

```
private void exportHistoryButton_Click(object sender, RoutedEventArgs e) 
{
    string data = ExportDataGrid(true, historyDataGrid);
    SaveFileDialog sfd = new SaveFileDialog()
    {
    DefaultExt = "csv",
    Filter = "CSV Files (*.csv)|*.csv|All files (*.*)|*.*",
    FilterIndex = 1
    };
    if (sfd.ShowDialog() == true)
    {
    using (Stream stream = sfd.OpenFile())
    {
        using (StreamWriter writer = new StreamWriter(stream)) {
        writer.Write(data);
        writer.Close();
        }
        stream.Close();
    }
    }
}

private string FormatCSVField(string data) {
    return String.Format("\"{0}\"",
        data.Replace("\"", "\"\"\"")
        .Replace("\n", "")
        .Replace("\r", "")
        );
}

public string ExportDataGrid(bool withHeaders, DataGrid grid)
{
    string colPath;
    System.Reflection.PropertyInfo propInfo;
    System.Windows.Data.Binding binding;
    System.Text.StringBuilder strBuilder = new System.Text.StringBuilder();
    System.Collections.IList source = (grid.ItemsSource as System.Collections.IList);
    if (source == null)
    return "";

    List<string> headers = new List<string>();
    grid.Columns.ToList().ForEach(col => {
    if (col is DataGridBoundColumn){
        headers.Add(FormatCSVField(col.Header.ToString()));
    }
    });
    strBuilder
    .Append(String.Join(",", headers.ToArray()))
    .Append("\r\n");

    foreach (Object data in source)
    {
    List<string> csvRow = new List<string>();
    foreach (DataGridColumn col in grid.Columns)
    {
        if (col is DataGridBoundColumn)
        {
        binding = (col as DataGridBoundColumn).Binding;
        colPath = binding.Path.Path;
        propInfo = data.GetType().GetProperty(colPath);
        if (propInfo != null)
        {
            csvRow.Add(FormatCSVField(propInfo.GetValue(data, null).ToString()));
        }
        }
    }
    strBuilder
        .Append(String.Join(",", csvRow.ToArray()))
        .Append("\r\n");
    }

    return strBuilder.ToString();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-09T18:02:15.307

我使用剪贴板找到[了这个。](https://silverlight.net/forums/p/17484/59175.aspx "断链")

要使代码通用，您可以修改第一个示例以读取列绑定并使用反射将它们应用于数据：

```
public String ExportDataGrid(DataGrid grid)
{
    string colPath;
    System.Reflection.PropertyInfo propInfo;
    System.Windows.Data.Binding binding;
    System.Text.StringBuilder strBuilder = new System.Text.StringBuilder();
    System.Collections.IList source = (grid.DataContext as System.Collections.IList);
    if (source == null)
        return "";

    foreach (Object data in source)
    {
        foreach (DataGridColumn col in datagrid.Columns)
        {
            if (col is DataGridBoundColumn)
            {
                binding = (col as DataGridBoundColumn).Binding;
                colPath = binding.Path.Path;
                propInfo = data.GetType().GetProperty(colPath);
                if (propInfo != null)
                {
                    strBuilder.Append(propInfo.GetValue(data, null).ToString());
                    strBuilder.Append(",");
                }                        
            }

        }
        strBuilder.Append("\r\n");
    }

    return strBuilder.ToString();
} 
```

当然，它只有在绑定的路径是属性名称时才有效。对于更高级的路径，您必须将绑定应用于数据（我想这将是一个更好的解决方案，但我现在不确定如何执行此操作）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T04:27:46.660

我不认为 Silverlight 提供下载文件的方法。您可以在应用程序中添加一个调用 URL 的按钮，即[http://www.mysite.com/generateexcelfile.aspx](http://www.mysite.com/generateexcelfile.aspx)。将用于生成 Silverlight 应用程序中显示的数据的参数作为 Querystring 值包括在内，运行您的查询并使用您最喜欢的 Excel 文件生成组件即时生成文件。重定向到它，它将下载到用户的系统。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-11-20T21:30:25.713

我知道这是一个旧帖子，但它确实帮助了我。我进行了一些编辑以使其与 silverlight 4、converts 和 excel 一起使用。我想要快速导出，所以我首先使用 CSV，然后用 excel 打开它。此代码适用于 silverlight web 和 oob 提升信任。在 Web 中不会在 excel 中打开。

```
 private static void OpenExcelFile(string Path)
    {
        dynamic excelApp;
        excelApp = AutomationFactory.CreateObject("Excel.Application");
        dynamic workbook = excelApp.workbooks;
        object oMissing = Missing.Value;

        workbook = excelApp.Workbooks.Open(Path,

           oMissing, oMissing, oMissing, oMissing, oMissing,

           oMissing, oMissing, oMissing, oMissing, oMissing,

           oMissing, oMissing, oMissing, oMissing);

        dynamic sheet = excelApp.ActiveSheet;

        // open the existing sheet

        sheet.Cells.EntireColumn.AutoFit();
        excelApp.Visible = true;
    }
    private static string FormatCSVField(string data)
    {
        return String.Format("\"{0}\"",
            data.Replace("\"", "\"\"\"")
            .Replace("\n", "")
            .Replace("\r", "")
            );
    }
   public  static string ExportDataGrid(DataGrid grid,string SaveFileName,bool AutoOpen)
    {
        string colPath;
        System.Reflection.PropertyInfo propInfo;
        System.Windows.Data.Binding binding;
        System.Text.StringBuilder strBuilder = new System.Text.StringBuilder();
       var source = grid.ItemsSource;

        if (source == null)
            return "";

        List<string> headers = new List<string>();
        grid.Columns.ToList().ForEach(col =>
        {
            if (col is DataGridBoundColumn)
            {
                headers.Add(FormatCSVField(col.Header.ToString()));
            }
        });
        strBuilder
        .Append(String.Join(",", headers.ToArray()))
        .Append("\r\n");

        foreach (var data in source)
        {
                List<string> csvRow = new List<string>();
                foreach (DataGridColumn col in grid.Columns)
                {
                    if (col is DataGridBoundColumn)
                    {
                        binding = (col as DataGridBoundColumn).Binding;
                        colPath = binding.Path.Path;

                        propInfo = data.GetType().GetProperty(colPath);
                        if (propInfo != null)
                        {
                            string valueConverted = "";
                            if (binding.Converter.GetType().ToString() != "System.Windows.Controls.DataGridValueConverter")
                                valueConverted = binding.Converter.Convert(propInfo.GetValue(data, null), typeof(System.String), binding.ConverterParameter, System.Globalization.CultureInfo.CurrentCulture).ToString();
                            else
                                valueConverted = FormatCSVField(propInfo.GetValue(data, null) == null ? "" : propInfo.GetValue(data, null).ToString());

                            csvRow.Add(valueConverted.ToString());
                        }
                    }
                }
                strBuilder
                    .Append(String.Join(",", csvRow.ToArray()))
                    .Append("\r\n");
            }

        if (AutomationFactory.IsAvailable)
        {
            var sampleFile = "\\" + SaveFileName;
            var path = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
            path += "\\Pement";

            if (!System.IO.Directory.Exists(path))
            {
                System.IO.Directory.CreateDirectory(path);
            }
            else
            {
                var files = System.IO.Directory.EnumerateFiles(path);
                foreach (var item in files)
                {
                    try
                    {
                        System.IO.File.Delete(item);
                    }
                    catch { }
                }
            }

            StreamWriter sw = File.CreateText(path + sampleFile);
            sw.WriteLine(strBuilder.ToString());
            sw.Close();

            if (AutoOpen)
                OpenExcelFile(path + sampleFile, true, true);
        }
        else
        {
            SaveFileDialog sfd = new SaveFileDialog()
            {
                DefaultExt = "csv",
                Filter = "CSV Files (*.csv)|*.csv|All files (*.*)|*.*",
                FilterIndex = 1
            };
            if (sfd.ShowDialog() == true)
            {
                using (Stream stream = sfd.OpenFile())
                {
                    using (StreamWriter writer = new StreamWriter(stream))
                    {
                        writer.Write(strBuilder.ToString());
                        writer.Close();
                    }
                    stream.Close();
                }
            } 
        }
        return strBuilder.ToString();
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-04T15:08:14.257

我想说的是，您可以使用 a 添加导出按钮`ControlTemplate`，然后遍历 中的每个项目`DataSource`，然后使用 in 中的每一列`Columns`使用该方法获取每个单元格的内容`GetCellContent`，或者使用 DataGridColumn 的绑定信息来获取适当的单元格值。然后，您可以获取此内容的显示值并将其写入您的报告。

就像是...

```
foreach (YourType item in grid.DataSource)
{
   foreach (DataGridColumn column in grid.Columns)
   {
      FrameworkElement cellContent = column.GetCellContent(item);

      // Now, determine the type of cell content and act accordingly.
      TextBlock block = cellContent as TextBlock;
      if (block != null)
      {
         // Report text value...
      }

      // ...etc...

   }
} 
```

[或者使用DaniCE](https://stackoverflow.com/questions/304322/silverlight-datagrid-export-to-excel-or-csv/353671#353671)描述的绑定信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-03-07T16:43:10.410

这些解决方案对我不起作用，因此我将它们修改为有效的解决方案。（我的解决方案不需要在字段周围加上引号，所以我省略了 FormatCSVField 函数）

```
 public void SaveAs(string csvPath)
    {
        string data = ExportDataGrid(true, _flexGrid);
        StreamWriter sw = new StreamWriter(csvPath, false, Encoding.UTF8);
        sw.Write(data);
        sw.Close();
    }

    public string ExportDataGrid(bool withHeaders, Microsoft.Windows.Controls.DataGrid grid) 
    {
        System.Text.StringBuilder strBuilder = new System.Text.StringBuilder();
        System.Collections.IEnumerable source = (grid.ItemsSource as System.Collections.IEnumerable);

        if (source == null) return "";

        List<string> headers = new List<string>();

        grid.Columns.ToList().ForEach(col =>
        {
            if (col is Microsoft.Windows.Controls.DataGridBoundColumn)
            {
                headers.Add(col.Header.ToString());
            }
        });

        strBuilder.Append(String.Join(",", headers.ToArray())).Append("\r\n");
        foreach (Object data in source)
        {
            System.Data.DataRowView d = (System.Data.DataRowView)data;
            strBuilder.Append(String.Join(",", d.Row.ItemArray)).Append("\r\n");
        }

        return strBuilder.ToString();
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-12-02T22:16:19.420

检查 Ryan 的解决方案。看起来不错，但不能保证，因为我刚刚找到它。Ryan 做了上面要求的 DLL。

[http://www.rshelby.com/post/exporting-data-from-silverilght-datagrid-to-excel.aspx](http://www.rshelby.com/post/exporting-data-from-silverilght-datagrid-to-excel.aspx)

上面 Dakota 的解决方案中的 David 看起来更容易实现，并且总是重定向到经典的 asp.net 页面，上面有一个数据网格，内容类型设置为 excel，但是这样你就有更多的代码需要支持可能不适用于离线的浏览器解决方案（实际上不起作用）。

无论如何，这是一项常见的任务。我希望这里或微软的一些人想出一个 Mort 即插即用的解决方案:)

我从 Silverlight 数据网格中找到了 CVS 导出的扩展方法-

[http://www.codeproject.com/KB/silverlight/SilverlightDataGridExport.aspx](http://www.codeproject.com/KB/silverlight/SilverlightDataGridExport.aspx)

它具有即插即用的潜力，但我不得不稍微调整一下以使其与具有项目数据源的数据网格一起使用（请参阅帖子中的评论）。比我更聪明、更有经验的人应该能够调整到完美。检查一下，它应该让你接近你所需要的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-23T15:59:14.453

我需要做同样的事情。我使用了 t3rse 的实现，但必须进行一些更改。我没有足够的声誉来评论他的回答，所以我会在这里列出：

*   对于表示 propInfo.GetValue(data, null).ToString() 的行，我在调用 ToString() 之前检查了 GetValue 返回的值是否为 Null。

*   在方法 FormatCSVField() 中，它用三个双引号替换了一个双引号。它应该只用两个双引号替换它。

*   该实现仅使用 DataGridBoundColumn 类型的列，而忽略其他列。我有一些不是我想要包含的 DataGridBoundColumn 的列，因此我使用 col.SortMemberPath 获得了这些列的数据源的属性名称。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-05-24T12:39:52.217

这是一个对我有用的好方法 [http://forums.silverlight.net/forums/p/179321/404357.aspx](http://forums.silverlight.net/forums/p/179321/404357.aspx)

# php - 将外部脚本与 Zend 框架集成

> ID：304323
> 
> 赞同：4
> 
> 时间：2008-11-20T04:21:52.960
> 
> 标签：php, zend-framework

将外部脚本集成到 Zend 框架中的最佳方式是什么？让我解释一下，因为我可能会以错误的方式问这个问题。我有一个下载和解析 XML 文件的脚本。该脚本作为日常 cron 作业运行，需要将其数据转储到数据库中。

我正在为使用此脚本的站点使用 Zend Framework，在我看来，最好使用我的子类模型`Zend_Db_Abstract`来添加和更新数据库。如何做到这一点？我的脚本是否在 Zend 组件旁边的库中（即 library/Mine/Xmlparse.php），因此可以访问各种 ZF 组件？我是否只需要在文件本身中包含正确的模型文件和 Zend DB 组件？处理这种集成的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T15:52:54.513

是的，您应该放置您自己的类，这些类可能继承 Zend Framework 类，或者将更多类添加到您自己的文件夹中，靠近库中 Zend Framework 文件夹。

当您启用 Zend_Loader 的自动加载时，类名将自动映射到您创建的类，例如：

```
My_Db_Abstract will map to My/Db/Abstract.php . 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-28T06:25:17.877

在您的库目录中，您应该在 Zend 库文件夹旁边有您自己的库。无论你怎么称呼它（Mylib、Project、...），你都应该将它包含在 Zend Autoloader 中，并按如下方式完成：

```
require_once 'Zend/Loader/Autoloader.php';
$loader = Zend_Loader_Autoloader::getInstance();
$loader->registerNamespace('Project_');
$loader->setFallbackAutoloader(true);
if ($configSection == 'development')
{
    $loader->suppressNotFoundWarnings(false);
} 
```

为了让您的库与 ZF 和 Autoloader 很好地集成，您应该遵守 ZF 命名约定。这意味着两件事：

*   如果您扩展现有的 ZF 类，请复制 ZF 文件夹结构，以便您的文件具有相同的路径和名称，但库名称除外。例如 /library/Zend/Db/Abstract.php => /library/Project/Db/Abstract.php。
*   如果您编写自己的类，仍然要遵守 ZF 命名约定，以便自动加载器找到它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T04:34:31.747

我刚刚遇到了一些可能与这个问题密切相关的东西。[这篇 IBM developerWorks 文章。](http://www.ibm.com/developerworks/opensource/library/os-php-fwk5/?ca=dgr-btw01PHP-CRON-Tasks)

作者建议在 ZF 层次结构中简单地创建一个脚本文件夹，然后像在 ZF 中一样使用它（尽管他确实设置了 ini 路径并调用 autoload）。就这么简单吗？仅仅是在框架的层次结构中并包括路径和自动加载器就可以让您的脚本访问所有的好东西吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T10:06:56.570

我不是 100% 确定您要问什么，但我会尽力提供帮助。如果在任何时候您将“/path/to/zend/framework”的引用添加到您的 php 包含路径中，那么您实质上已经启用了 Zend 框架。如果你这样做，从那里开始：

```
require_once('Zend/Loader.php');
Zend_Loader::registerAutoload(); 
```

然后在您的脚本中的任何一点，您几乎都可以创建新的 Zend Framework 对象，而 Zend_Loader 将处理其余的。

Zend 框架的一大优点是不会强迫你以某种方式做事。这就是为什么有时有几种方法可以完成同一件事。因此，如果您觉得您需要让您的脚本使用 Zend 框架只是为了这样做，那么这并不是真正必要的。但是，如果您认为它可能会以某种方式改进您的脚本，那就去做吧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T13:59:02.263

我通常将我认为可以跨项目使用的自定义内容放在库中的自定义文件夹中。所以我有一个 library/Ak33m 文件夹，其中包含可能在框架之外的脚本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-28T06:11:33.333

作为一个 ZF 菜鸟，我想我理解 OP 试图弄清楚的一些内容。所以，我只是解释一下我的理解，希望它对 OP 有帮助（或者更有可能对未来的读者有帮助，因为原来的问题太老了，我想 OP 现在是 ZF大师）。

我了解 ZF 声称主要是“随意使用”，因此您无需购买整个结构，例如 Zend_Application、Zend_Bootstrap 类、整个 MVC 方法等。

此外，我了解能够轻松自动加载的类命名和文件位置的约定。例如：`class App_Model_User`驻留在文件夹中`App/Model/User.php`

我认为可能令人困惑的是，在脚本上下文中，您还没有

*   完成了将所有请求推送到的 .htaccess 魔术`public/index.php`
*   设置您的`APPLICATION_PATH`并包含路径`public/index.php`
*   创建了绑定到配置文件的`Application`或对象`Bootstrap`

可能有点不清楚如何最好地利用我们在这种情况下获得的大部分 ZF 优点，并在另一种情况下想要。

我想我对原始问题的回答是通常的入口点序列

http 请求 -> .htaccess -> index.php -> 配置

为我们设置了大部分环境，我们需要为不同的入口路径复制其中的一些。

因此，对于您的脚本，我的第一反应是创建一个通用的包含文件，以反映 index.php 中发生的大部分内容 - 设置包含路径、APPLICATION_PATH、实例化并调用引导程序，然后执行特定于脚本的处理.

更好的是，可能需要为所有脚本创建一个入口点，就像我们在 http/web 上下文中所做的那样。为您自己的脚本目的扩展 Zend_Application 以便`$application->run();`不再启动 MVC 路由器-控制器-调度处理，而是做您自己的事情。这样，这个单一的脚本入口点看起来几乎与 Web 入口点相同，唯一的区别是实例化了哪个应用程序对象。然后将所需的应用程序类的名称作为命令行参数传递给脚本。

但在这里，我承认自己不那么自信，只是抛出了一些想法。

希望这一切对某人有所帮助。它实际上帮助我把它写下来。谢谢和欢呼！

**2009-09-29 更新：**刚刚看到这篇文章：[从命令行使用 Zend Framework](http://webfractor.wordpress.com/2008/08/14/using-zend-framework-from-the-command-line/)

**2009-11-20 更新：**另一篇文章：[Zend 框架中的 Cron 作业 | GS设计](http://www.gsdesign.ro/blog/cron-jobs-in-zend-framework/)

**2010-02-25 更新：** [使用 Zend 应用程序的简单命令行脚本 - David Caunt](http://www.davidcaunt.co.uk/2010/02/25/easy-command-line-scripts-with-zend-application/)

# c# - 从 C# WinForm POST 数据到 PHP 页面

> ID：304337
> 
> 赞同：4
> 
> 时间：2008-11-20T04:30:52.050
> 
> 标签：c#, php, winforms

我有一个 winForms NET3.5SP1 应用程序，并且想将数据发布到 PHP 页面。

我也将把它作为 JSON 传递，但想先让 POST 直接工作。

这是代码：

```
 Person p = new Person();
    p.firstName = "Bill";
    p.lastName = "Gates";
    p.email = "asdf@hotmail.com";
    p.deviceUUID = "abcdefghijklmnopqrstuvwxyz";

    JavaScriptSerializer serializer = new JavaScriptSerializer();
    string s;
    s = serializer.Serialize(p);
    textBox3.Text = s;
    // s = "{\"firstName\":\"Bill\",\"lastName\":\"Gates\",\"email\":\"asdf@hotmail.com\",\"deviceUUID\":\"abcdefghijklmnopqrstuvwxyz\"}"
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.davemateer.com/ig/genius/newuser.php");
    //WebRequest request = WebRequest.Create("http://www.davemateer.com/ig/genius/newuser.php");
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";
    //byte[] byteArray = Encoding.UTF8.GetBytes(s);
    byte[] byteArray = Encoding.ASCII.GetBytes(s);
    request.ContentLength = byteArray.Length;
    Stream dataStream = request.GetRequestStream();
    dataStream.Write(byteArray, 0, byteArray.Length);
    dataStream.Close ();

    WebResponse response = request.GetResponse();
    textBox4.Text = (((HttpWebResponse)response).StatusDescription);
    dataStream = response.GetResponseStream ();

    StreamReader reader = new StreamReader(dataStream);
    string responseFromServer = reader.ReadToEnd ();
    textBox4.Text += responseFromServer;

    reader.Close ();
    dataStream.Close ();
    response.Close (); 
```

PHP5.2代码是：

```
<?php
echo "hello world";
var_dump($_POST);
?> 
```

这返回：

```
array(0) {} 
```

有任何想法吗？我希望它返回我刚刚传递给它的值，以证明我可以从服务器端访问数据。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-20T05:00:31.197

我相信您需要正确编码和发送实际的帖子内容。看起来您只是在序列化为 JSON，PHP 不知道如何处理（即，它不会将其设置为`$_POST`值）

```
string postData = "firstName=" + HttpUtility.UrlEncode(p.firstName) +
                  "&lastName=" + HttpUtility.UrlEncode(p.lastName) +                    
                  "&email=" + HttpUtility.UrlEncode(p.email) +
                  "&deviceUUID=" + HttpUtility.UrlEncode(p.deviceUUID);
byte[] byteArray = Encoding.ASCII.GetBytes(postData);
// etc... 
```

这应该让你的`$_POST`变量在 PHP 集中。稍后当您切换到 JSON 时，您可以执行以下操作：

```
string postData = "json=" + HttpUtility.UrlEncode(serializer.Serialize(p) ); 
```

并从 PHP 中获取：

```
$json_array = json_decode($_POST['json']); 
```

# .net - 有人使用 ASP .NET Membership 吗？

> ID：304341
> 
> 赞同：6
> 
> 时间：2008-11-20T04:34:46.490
> 
> 标签：.net, asp.net, asp.net-membership

是否有人使用 ASP .NET 成员资格？如果你这样做，请告诉我你对此的看法。

如果你不使用它，你打算在未来的项目中使用它吗？如果不是，为什么？

温迪

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-20T04:45:34.597

是的。已经使用了很多，它会为你节省很多工作。

客户经常会要求更改用户名和管理密码重置等痛点，而您将不得不绕过它们。

角色提供程序也非常方便，并且有很多预构建的控件可以使用它，尽管最近在角色管理器和 aspnet ajax 之间遇到了一个错误，它是一个 PITA。

该模型通常非常好，即使您货比三家，可以找到一些适合您需求的不同供应商。

总的来说，它并不完美，但如果你能忍受它并解决它的问题，它将为你节省大量代码。

在某些情况下，当黄油刀可以使用时，它可能会使用电锯，但它就在那里，它有效，而且还有很多其他人在使用它。

它的一种锤子，就价格而言，还可以，但没有金锤子。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-20T07:16:21.593

我在我的大部分项目中都使用它。有时它没有做我想做的事，但几乎总有办法解决这个问题。我们已将它与 Active Directory、Novell EDirectory 和 Forms 身份验证一起使用。

提供者模型非常适合创建这些变通方法。比滚动您自己的会员代码要好得多。

[Table Profile Provider](http://www.asp.net/downloads/sandbox/table-profile-provider-samples/)是一个很好的工具，可以解决 SqlProfileProvider 开箱即用的低效实现。

还有一种我听说过但从未尝试过的产品，叫做[Visual Guard](http://www.visual-guard.com/)。我会对任何人对此发表的任何评论感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-22T23:35:10.963

我几乎在所有项目中都使用过它。它将为您节省大量工作，易于使用，并且 .NET 带有许多预构建的控件，因此您不必担心编写自己的检索密码控件、登录控件等。

不要听那些告诉您无法收集您感兴趣的信息的人。这就是 profile-provider 的用途（我同意 Brian，使用 Table Profile Provider 来实现更有效的实现，这也是更容易维护）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T06:29:07.943

请注意，配置文件提供程序仅适用于网站模板：

[http://www.codersbarn.com/post/2008/06/01/ASPNET-Web-Site-versus-Web-Application-Project.aspx](http://www.codersbarn.com/post/2008/06/01/ASPNET-Web-Site-versus-Web-Application-Project.aspx)

安东尼:-)

# c# - 标记 MSI，因此它必须作为提升的管理员帐户运行

> ID：304353
> 
> 赞同：24
> 
> 时间：2008-11-20T04:47:11.643
> 
> 标签：c#, windows-installer, uac, custom-action

我有一个 CustomAction 作为 MSI 的一部分。

它必须作为域帐户运行，该域帐户也是本地管理员帐户的成员。

它不能使用 NoImpersonate 标志以 NT Authority\System 的身份运行自定义操作，因为它将无法访问网络资源。

在启用了 UAC 的 Vista/2008 上，如果 NoImpersonate 关闭，那么它将作为执行用户运行，但使用**非特权**令牌，并且无法访问本地资源，例如 .installState。[请参阅 UAC 架构](http://technet.microsoft.com/en-us/library/cc709628.aspx)

任何人都知道一种方法

*   以与从提升的命令提示符运行相同的方式强制 MSI 使用提升的令牌运行？

*   强制 CustomAction 运行提升（清单中的 requireAdministrator 似乎不起作用）？

*   确定 UAC 是否已启用，是否尚未提升，如果是，则警告或取消安装？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-11-22T22:10:50.260

为任何其他可怜的 s0d 回答我自己的问题。

*   您不能将清单添加到 MSI。您可以添加一个 SETUP.EXE 或引导程序来壳 MSI 并使用 requireAdministrator 显示它，但这会破坏使用 MSI 的某些要点。

*   将清单添加到 CustomAction 不起作用，因为它是从 msiexec.exe 运行的

我解决此问题的方法是将[MSIUSEREALADMINDETECTION](http://msdn.microsoft.com/en-us/library/aa816403(VS.85).aspx)属性设置为 1，以便 Privileged 条件真正起作用，并为[Privileged](http://msdn.microsoft.com/en-us/library/aa370852(VS.85).aspx)添加一个启动条件，该条件会提供有关通过提升的命令提示符运行的错误消息，然后退出安装。

这有一个令人愉快的副作用 - 当从提升的命令提示符运行 msi 时，无论[NoImpersonate](http://blogs.msdn.com/rflaming/archive/2006/09/23/768248.aspx)设置如何，CustomActions 都会以具有完整管理员令牌（而不是标准用户令牌）的当前用户身份运行。

更多细节 - [http://www.microsoft.com/downloads/details.aspx?FamilyID=2cd92e43-6cda-478a-9e3b-4f831e899433](http://www.microsoft.com/downloads/details.aspx?FamilyID=2cd92e43-6cda-478a-9e3b-4f831e899433)

[编辑] - 我在这里放了脚本，[可以让你添加 MSIUSEREALADMINDETECTION 属性](https://stackoverflow.com/questions/312490/script-to-add-msiuserealadmin-to-msi)，因为 VS 没有能力这样做，而且 Orca 很痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T04:57:56.787

清单中的 requireAdministrator 应该可以工作。

您还可以使用引导加载程序 .exe 文件，该文件可以使用带有“RUNAS”作为动词的 ShellExecute（您可以使用 7-zip 来创建引导加载程序，或者还有许多其他方式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-15T09:47:33.107

您可以使用 Winrar 和以下选项为 msi 文件创建一个简单的**sfx 存档文件：**

*   设置选项卡 >*执行后运行输入*：您的 msi 文件名

*   高级选项卡 > 标记*请求管理访问*选项复选框

# apache - 共享主机上的文件权限

> ID：304356
> 
> 赞同：1
> 
> 时间：2008-11-20T04:52:20.837
> 
> 标签：apache, permissions, shared-hosting

我编写了一个脚本，它将订单摘要存储到一个 XML 文件中，但问题是我不希望人们能够在他们的浏览器中打开 XML 文件，显然。

我托管在一个功能有限的非常狡猾的共享服务器上：对于初学者来说，没有 SSH。

**有没有我可以放置这个文件的地方，以便 PHP 仍然能够读取/写入它，但 Web 浏览器将无法访问它？**

通常，我会在文档根目录之外创建一个文件夹并将其放在那里，但是当我尝试这样做时会收到“权限被拒绝”消息。

那里的文件夹*有*：

*   anon_ftp
*   斌
*   证书
*   cgi-bin
*   会议
*   错误文档
*   ETC
*   httpdocs
*   https文档
*   PD
*   私人的
*   统计数据
*   子域
*   web_users

当文件位于文件夹中时，PHP 无法访问该`private`文件。这可以使用.htaccess 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T05:47:52.647

您可以创建一个目录，其中包含`.htaccess`如下所示的文件：

```
Deny from all 
```

这将指示 Apache 不提供该目录中的文件；任何访问目录或其内容的尝试都会收到来自服务器的“403 Forbidden”响应。

**注意：**这取决于主机没有`Limit`从其`AllowOverride`指令中的选项列表中删除；大多数共享主机不应该有这样做的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T05:10:39.303

我通过将 XML 文件放在我的 httpdocs 文件夹中来解决它，但在其中添加了一个 .htaccess 文件：

```
<Files ~ "myfile.xml">
    Order allow,deny
    Deny from all
</Files> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T05:29:03.633

您不能要求共享主机提供商为您创建一个外部网络根文件夹**吗**？我过去确实这样做过。

# minix - 这里有没有人有为 Minix 开发的经验？

> ID：304358
> 
> 赞同：6
> 
> 时间：2008-11-20T04:54:20.677
> 
> 标签：minix

最近我对 Minix OS 产生了好奇。[http://www.minix3.org/](http://www.minix3.org/)

我对它的健壮性和可靠性特性的描述非常感兴趣，但我注意到该平台可用的软件包明显缺乏。

这里有没有人为 Minix 开发软件（或移植软件）？这个过程有什么意外吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-20T06:25:15.660

Minix 3 是一个新版本；LINUX 是在原来的 Minix 上提示的。

Minix 确实最适合嵌入式系统的小型系统。如果您周围有一台旧的 x86 PC，它应该可以轻松运行 minix，为您提供一个非常类似于 80 年代中期我们所说的“令人惊叹的工作站”的环境。

我喜欢在那种环境中编程；我会说去吧，但请记住，这是一个实验环境，而不是你想要的日常系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T01:55:15.970

编码循环调度程序等带有 nano 的 SSH 连接可用于在新时尚平台上编码并发送回文件。Minix 是学习操作系统基础知识的好方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-23T13:18:54.907

我在了解如何为 minix 做贡献时遇到了这篇文章。我喜欢它： http: [//prasannakumartsm.wordpress.com/](http://prasannakumartsm.wordpress.com/)

# c# - Visual Studio 可扩展性，如何枚举解决方案中的项目？

> ID：304361
> 
> 赞同：5
> 
> 时间：2008-11-20T04:56:53.217
> 
> 标签：c#, visual-studio-2008

只是想跟上 SDK 的速度……

所以，我创建了自己的工具窗口......

现在我想遍历当前加载的解决方案中的现有项目，并在工具窗口中显示它们的名称......

但不太确定枚举项目的最佳方法是什么？任何线索？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-20T05:08:16.140

[Microsoft](https://github.com/Microsoft/VSSDK-Extensibility-Samples/blob/8d2b8fdbb6f2ba1c83f403eefab49cad3710b650/Code_Sweep/C%23/VsPackage/ProjectUtilities.cs#L129-L150)检查此代码：

```
 static public IEnumerable<IVsProject> LoadedProjects
    {
        get
        {
            var solution = _serviceProvider.GetService(typeof(SVsSolution)) as IVsSolution;
            if (solution == null)
            {
                Debug.Fail("Failed to get SVsSolution service.");
                yield break;
            }

            IEnumHierarchies enumerator = null;
            Guid guid = Guid.Empty;
            solution.GetProjectEnum((uint)__VSENUMPROJFLAGS.EPF_LOADEDINSOLUTION, ref guid, out enumerator);
            IVsHierarchy[] hierarchy = new IVsHierarchy[1] { null };
            uint fetched = 0;
            for (enumerator.Reset(); enumerator.Next(1, hierarchy, out fetched) == VSConstants.S_OK && fetched == 1; /*nothing*/)
            {
                yield return (IVsProject)hierarchy[0];
            }
        }
    } 
```

# c# - 如何使用 SQLAnywhere 10 从 ADO.NET 2.0 中的 SPROC 中获取 LongVarchar 参数？

> ID：304366
> 
> 赞同：1
> 
> 时间：2008-11-20T04:58:49.703
> 
> 标签：c#, stored-procedures, ado.net, sqlanywhere

我有 sproc 'up_selfassessform_view' ，它具有以下参数：

```
in ai_eqidentkey SYSKEY
in ai_acidentkey SYSKEY
out as_eqcomments TEXT_STRING
out as_acexplanation TEXT_STRING 
```

 - 属于域对象 - SYSKEY 是“整数”，TEXT_STRING 是“long varchar”。

我可以使用以下代码从 iSQL 调用存储过程：

```
create variable @eqcomments TEXT_STRING;
create variable @acexamples TEXT_STRING;
call up_selfassessform_view (75000146, 3, @eqcomments, @acexamples);
select @eqcomments, @acexamples; 
```

 - 从数据库返回正确的值（所以我知道 SPROC 很好）。

我已经像这样在 ADO.NET 中配置了 out 参数（到目前为止，它一直适用于 'integer'、'timestamp'、'varchar(255)' 等）：

```
SAParameter as_acexplanation   = cmd.CreateParameter();

as_acexplanation.Direction     = ParameterDirection.Output;
as_acexplanation.ParameterName = "as_acexplanation";
as_acexplanation.SADbType      = SADbType.LongVarchar;

cmd.Parameters.Add(as_acexplanation); 
```

当我运行以下代码时：

```
SADataReader reader = cmd.ExecuteReader(); 
```

我收到以下错误：

```
Parameter[2]: the Size property has an invalid size of 0. 
```

哪个（我想）是有道理的......

但问题是，我不知道字段的大小（它只是“long varchar”，它没有预先确定的长度 - 不像 varchar(XXX)）。

无论如何，只是为了好玩，我添加以下内容：

```
as_acexplanation.Size = 1000; 
```

并且上面的错误消失了，但是现在当我打电话时：

```
as_acexplanation.Value 
```

我得到一个长度 = 1000 的字符串，它只是 '\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0...' （ \0 重复 1000 次）。

所以我真的被困住了......对此的任何帮助将不胜感激。

干杯! ;)

托德·T。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-08-06T19:59:33.993

您是否尝试将大小设置为-1？

看看[这个](https://stackoverflow.com/questions/222661/can-i-return-a-varcharmax-from-a-stored-procedure/265975#265975)答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T04:18:32.833

您是否尝试过不传递参数数据类型并让 ADO.NET 自行解决？

# .net - .Net Entity Framework 可以与 .mdb 一起使用吗？

> ID：304367
> 
> 赞同：2
> 
> 时间：2008-11-20T04:59:07.253
> 
> 标签：.net, entity-framework, ms-access

可以使用 .mdb 文件作为使用 Microsoft Jet OLEDB 数据提供程序的实体框架模型的数据源吗？如果是这样，我将如何受到限制？例如，没有存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-04T15:57:34.220

不是实体框架专家，但似乎不适用于 MS Access。

# jquery - jQuery - 循环帮助

> ID：304371
> 
> 赞同：0
> 
> 时间：2008-11-20T05:02:49.430
> 
> 标签：jquery, slideshow, cycle

[我正在寻找有关使用 jQuery循环](http://malsup.com/jquery/cycle/)库的一些帮助。我在[初学者](http://malsup.com/jquery/cycle/begin.html)演示中，我完成了绝对的第一个演示。这是页面上的第二个。

```
<script src="jquery-1.2.6.min.js" type="text/javascript"></script>
<script src="jquery.cycle.all.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {

    $('.pics').cycle({
        fx:      'scrollDown',
        speed:    300,
        timeout:  2000
    });
</script> 
```

我的 CSS 与页面上的相同，这就是我将 .pics 放在引号中的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T06:20:11.597

我会猜测这对你不起作用。
您需要平衡大括号和括号。
**请**帮助其他人通过说下一次实际问题是什么来帮助您。

尝试这个：

```
$(document).ready(function() { 
    $('.pics').cycle({  
        fx: 'scrollDown',     
        speed: 300,     
        timeout: 2000 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T19:53:26.993

重新打开这个问题可以吗？它工作正常，但我很难设计这个。[我正在尝试使图像向左浮动，并且文本像在演示](http://malsup.com/jquery/cycle/int2.html)中一样向右环绕它（非图像内容）。

我的脚本是：

```
<script type="text/javascript">

$(document).ready(function() {
    $('.text')
    .before('<div id="slidenav">')
    .cycle({
        fx:     'fade',
        speed:  'slow',
        timeout: 6000,
        pager:  '#slidenav',
       pause: 1
    });
});

</script> 
```

...

```
<div id="featured">
    <div class="text">
        <txp:article_custom form="slidetext" section="slide" limit="5" />
    </div>
</div> 
```

我的CSS是：

```
.text { width: 600px; height: 200px; border: 1px solid #ddd; background-color: green; }
.text div { width: 500px; height: 200px; padding: 15px; color: #333; text-align: left; font-size: 16px; background-color:red; }
.text div img {width: 200px; height: 200px; padding: 3px; background: orange }
.text div p{ background-color:black;} 
```

抱歉，这里没有浮动属性，因为它们都没有工作。我从 jQuery 循环演示页面中抓取了那个 CSS。

结果是

[http://img147.imageshack.us/img147/4434/jqueryhelpdl5.jpg http://img147.imageshack.us/img147/4434/jqueryhelpdl5.jpg](http://img147.imageshack.us/img147/4434/jqueryhelpdl5.jpg)

[http://img147.imageshack.us/img147/4434/jqueryhelpdl5.jpg](http://img147.imageshack.us/img147/4434/jqueryhelpdl5.jpg)

# php - Zend 框架更新？

> ID：304372
> 
> 赞同：3
> 
> 时间：2008-11-20T05:04:24.200
> 
> 标签：php, zend-framework

在将 Zend Framework 的更新推送到生产项目之前，您通常会测试多长时间。我们可以将此问题分解为次要更新 1.6.0 -> 1.6.1 或者可能是主要更新 1.6.2 -> 1.7.0。显然，如果它在您的代码中添加错误，您就不会发布它。

此外，与大多数其他服务器软件更新一样，人们通常有一段时间他们喜欢等待并观察社区，然后再尝试对开发环境进行更新。你甚至要等多久才能开始这个过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T06:07:47.003

似乎最好的方法是进行一组全面的测试，以执行应用程序中的所有功能。有了一种好的测试方法，您似乎可以很快将其投入生产。

您可以做的另一件简单的事情来帮助您做出决定，那就是简单地对存储库进行比较，以查看哪些更改应用于您使用的任何模块。如果没有变化，那么升级应该没有任何区别。如果某些内容经历了重大的重写，您可能需要进行更深入的调查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-12T04:48:03.167

我经常会毫不犹豫地跳过更新版本（1.7.1 -> 1.7.2）。当未成年人进来时，这是另一套花样。例如，Zend 的文件上传元素有很多变化，Zend 形式在 1.5、1.6 和 1.7 之间。

我是否继续发布新版本取决于已完成的工作。检查提供的更新列表对于决定是否去非常重要。

至于时间，因人而异。没有一成不变的过程。

通过单元测试可以快速找到“什么中断”。但是，谁真正为他们的应用程序提供了一整套单元测试，对吧？;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T13:50:09.473

使用单元测试将有助于捕捉一些增量。Zend Framework 现在带有 Zend_Test 以使测试应用程序更容易一些。我在项目之间升级（因此即将推出的新项目将获得最新版本）。

# asp.net - 在 Web 浏览器中查看 ASPX 页面

> ID：304373
> 
> 赞同：2
> 
> 时间：2008-11-20T05:05:14.337
> 
> 标签：asp.net

我有以下 .aspx 页面，我想在 IE 或 Google Chrome 等网络浏览器中直接在这些浏览器中打开它来查看它：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
</html> 
```

但不知何故，浏览器无法呈现它。在 IE 中，错误是

> 无法使用 XSL 样式表查看 XML 输入。请更正错误，然后单击“刷新”按钮，或稍后重试。名称以无效字符开头。错误处理资源'文件：/

```
 <%@ Page Language="C#"AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %> -^* 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T05:10:14.953

删除或注释掉

<`%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %>`

作为浏览器的行不知道如何处理它。这通常由 iis 解释，而不是发送到浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T05:18:07.120

除非它由某种网络服务器“服务”，否则它实际上不会正常工作。

如果您使用的是 Visual Studio，请启动调试器，默认情况下会打开 IE，然后从位置栏中获取 url，并将其粘贴到您要检查的浏览器中。否则，将网站安装在 IIS 中，然后以这种方式浏览它。

仅在浏览器中打开源文件可能不会为您提供所需的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-05T00:08:54.213

最近的 Visual Studio（至少 2010+）有一个新功能，称为**在浏览器中查看**，您可以在*.aspx*文件上运行。请注意，根据[文档](https://msdn.microsoft.com/en-us/library/df5x06h3(v=vs.110).aspx)，即使启用了调试，调试断点也不会生效。

右键单击*解决方案资源管理器*或*编辑器*中的文件，然后选择在浏览器中查看（此处为您的默认浏览器）。

键盘快捷键：`Ctrl`+ `Shift`+`W`

# asp.net - 何时附加自定义事件处理程序？

> ID：304377
> 
> 赞同：1
> 
> 时间：2008-11-20T05:09:10.447
> 
> 标签：asp.net, event-handling

我在 GridView 中有一个 UserControl。自定义事件处理程序何时附加到 UserControl ？请告诉我，因为我不知道。

在下面的场景中，在触发 UserCreated 事件时，即在 DataBinding 期间，UserCreated 事件处理程序为空。一旦页面完全加载，事件处理程序就可用。

用户控制

```
 public event EventHandler UserCreated;
    public event EventHandler UserSelected;

     /// 
    /// Bubble up the  UserCreated event
    /// 
    protected virtual void OnUserCreated(object sender, UserCreatedArgs e)
    {
        EventHandler handler = UserCreated;
       /* 
            UserCreated above is null during databinding. No handler is present
            A handler is present after page has fully loaded i.e. UserCreated != null
        */

        if (handler != null)
        {
            handler(this, e);
        }
    }

    /// 
    /// Raise the OnDataBindingEvent
    /// 
    protected override void OnDataBinding(EventArgs e)
    {            
        base.OnDataBinding(e);
        InitialiseControl();
    }

    /// 
    /// Initialises the data in the UserControl.
    /// 
    private void InitialiseControl()
    {           
       List userList =
            UserController.GenerateUserNameDropDownList(UserGroupName);
       OnUserCreated(userList);
    } 
```

托管 UserControl 的页面

```
 /// 
    /// Handles the Load event of the Page control.
    /// 
    protected void Page_Load(object sender, EventArgs e)
    {
         UserCreatedHandler += UserControl.UserCreated
    }

    protected void UserCreatedHandler(object sender, UserControl.UserCreatedArgs e)
    {
          ...handle userCreated event
    } 
```

页面标记

asp:GridView ID="keyPersonnelGridView" runat="server" 列 asp:TemplateField ItemTemplate userControl:UserName ID="personnelList" runat="server" UserGroupName="All Users" /ItemTemplate /asp:TemplateField ..其余标签关闭 / asp:网格视图

任何善良的灵魂都可以解释为什么在事件触发时我的事件处理程序不存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-01T04:24:54.603

你需要翻转它

```
UserCreatedHandler += UserControl.UserCreated 
```

变成

```
UserControl.UserCreated += new EventHandler(UserCreatedHandler); 
```

目前，“UserCreatedHandler”的 UserCreated 事件签名错误。当你声明 UserCreated 事件时，你应该使用通用的 EventHandler：

```
public event EventHandler<UserCreatedArgs> UserCreated; 
```

# svn - 如何编辑已在 Subversion 中提交的日志消息？

> ID：304383
> 
> 赞同：577
> 
> 时间：2008-11-20T05:13:19.330
> 
> 标签：svn, commit

有没有办法在 Subversion 中编辑某个版本的日志消息？我不小心在我的提交消息中写了错误的文件名，这可能会在以后造成混淆。

我已经看到*[如何在 Git 中编辑不正确的提交消息？](https://stackoverflow.com/questions/179123/how-do-i-edit-an-incorrect-commit-message-in-git)*，但该问题的解决方案似乎与 Subversion 不同（根据`svn help commit`）。

* * *

## 回答 #1

> 赞同：473
> 
> 时间：2008-11-20T05:16:20.633

本质上，您必须拥有存储库的管理员权限（直接或间接）才能执行此操作。您可以将存储库配置为允许所有用户执行此操作，也可以直接在服务器上修改日志消息。

请参阅[Subversion FAQ](http://subversion.apache.org/faq.html)的[这一部分](http://subversion.apache.org/faq.html#change-log-msg)（强调我的）：

> 日志消息作为附加到每个修订版的属性保存在存储库中。**默认情况下，日志消息属性（svn:log）一旦提交就无法编辑**。这是因为对修订属性（其中 svn:log 是其中之一）的更改会导致该属性的先前值被永久丢弃，并且 Subversion 会试图防止您意外地这样做。但是，有几种方法可以让 Subversion 更改修订属性。
> 
> 第一种方法是让存储库管理员启用修订属性修改。这是通过创建一个名为“pre-revprop-change”的钩子来完成的（有关如何执行此操作的更多详细信息，请参见 Subversion 手册中的此部分）。“pre-revprop-change”钩子可以在旧日志消息被更改之前访问它，因此它可以以某种方式保留它（例如，通过发送电子邮件）。启用修订属性修改后，您可以通过将 --revprop 开关传递给 svn propedit 或 svn propset 来更改修订的日志消息，如下所示：
> 
> ```
> $svn propedit -r N --revprop svn:log URL 
> $svn propset -r N --revprop svn:log "new log message" URL 
> ```
> 
> 其中 N 是您希望更改其日志消息的修订号，URL 是存储库的位置。如果从工作副本中运行此命令，则可以省略 URL。
> 
> 更改日志消息的第二种方法是使用 svnadmin setlog。 **这必须通过参考存储库在文件系统上的位置来完成。您不能使用此命令修改远程存储库。**
> 
> ```
> $ svnadmin setlog REPOS_PATH -r N FILE 
> ```
> 
> 其中 REPOS_PATH 是存储库位置，N 是您希望更改其日志消息的修订号，FILE 是包含新日志消息的文件。如果“pre-revprop-change”钩子没有到位（或者由于某种原因你想绕过钩子脚本），你也可以使用 --bypass-hooks 选项。但是，如果您决定使用此选项，请务必小心。您可能会绕过诸如更改的电子邮件通知或跟踪修订属性的备份系统之类的东西。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2009-06-18T21:54:44.987

当你运行这个命令时，

```
svn propedit svn:log --revprop -r NNN 
```

以防万一您看到此消息：

> DAV 请求失败；存储库的 pre-revprop-change 挂钩可能失败或不存在

这是因为 Subversion 不允许您修改日志消息，因为它们是未版本化的并且将永久丢失。

### Unix 托管的 SVN

转到您的 Subversion 服务器上的 hooks 目录（将 ~/svn/reponame 替换为您的存储库的目录）

```
cd ~/svn/reponame/hooks 
```

删除扩展

```
mv pre-revprop-change.tmpl pre-revprop-change 
```

使其可执行（不能执行 chmod +x！）

```
chmod 755 pre-revprop-change 
```

[来源](http://jacqueschirag.wordpress.com/2007/07/22/changing-revision-property-in-subversion-with-tortoisesvn/)

### Windows 托管的 SVN

不能使用 hooks 目录中的模板文件，因为它们是 Unix 特定的。您需要将 Windows 批处理文件复制`pre-revprop-change.bat`到 hooks 目录，例如[此处](https://stackoverflow.com/a/468475/4340584)提供的那个。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2009-04-12T21:37:03.600

这是我在常见问题解答中没有提到的一个方便的变体。您可以通过指定文本编辑器返回当前消息进行编辑。

```
svn propedit svn:log --revprop -r N --editor-cmd vim 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2008-11-20T05:17:58.680

```
svnadmin setlog /path/to/repository -r revision_number --bypass-hooks message_file.txt 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-09-15T06:06:32.027

在 Windows 上，使用 Tortoise SVN 客户端：

1.  右键单击您的项目文件夹并选择“显示日志”
2.  在“日志消息”窗口中，右键单击修订并选择“编辑日志消息”

如果它不起作用，可能是因为服务器上的 SVN 设置方式，请在此处阅读其他响应。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2013-08-01T21:55:51.920

我最近也接到了这个任务。

我们希望允许我们的程序员只修改他们自己的提交消息，并限制他们被允许这样做的时间。我们决定允许他们修改当天提交的任何日志消息，修复错字等。

在网上看了几个其他的例子后，我一起破解了这个，我们在 Windows 环境中，所以这是我们的内容`pre-revprop-change.bat`：

```
@ECHO OFF

set repos=%1
set rev=%2
set user=%3
set propname=%4
set action=%5

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Only allow changes to svn:log. The author, date and other revision
:: properties cannot be changed
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
if /I not '%propname%'=='svn:log' goto ERROR_PROPNAME

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Only allow modifications to svn:log (no addition/overwrite or deletion)
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
if /I not '%action%'=='M' goto ERROR_ACTION

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Only allow user to modify their own log messages
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
set AUTHOR=
for /f "delims=" %%a in ('svnlook author -r %REV% %REPOS%') do @set AUTHOR=%%a

if /I not '%AUTHOR%'=='%user%' goto ERROR_WRONGUSER

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Only allow user to modify log messages from today, old messages locked down
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
set DATESTAMP=
for /f "delims=" %%a in ('svnlook date -r %REV% %REPOS%') do @set DATESTAMP=%%a

for /F "tokens=1-2 delims= " %%a in ("%DATESTAMP%") do (
 set DATESTAMPDATE=%%a
 set DATESTAMPTIME=%%b )

:: Expects DATESTAMPDATE in the format: 2012-02-24
for /F "tokens=1-3 delims=-" %%a in ("%DATESTAMPDATE%") do (
 set DATESTAMPYEAR=%%a
 set DATESTAMPMONTH=%%b
 set DATESTAMPDAY=%%c )

:: Expects date in the format: Thu 08/01/2013
for /F "tokens=1-4 delims=/ " %%a in ("%date%") do (
 set YEAR=%%d
 set MONTH=%%b
 set DAY=%%c )

if /I not '%DATESTAMPYEAR%'=='%YEAR%' goto ERROR_MSGTOOOLD
if /I not '%DATESTAMPMONTH%'=='%MONTH%' goto ERROR_MSGTOOOLD
if /I not '%DATESTAMPDAY%'=='%DAY%' goto ERROR_MSGTOOOLD

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Make sure that the new svn:log message contains some text.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
set bIsEmpty=true
for /f "tokens=*" %%g in ('find /V ""') do (
 set bIsEmpty=false
)
if '%bIsEmpty%'=='true' goto ERROR_EMPTY

goto :eof

:ERROR_EMPTY
echo Empty svn:log properties are not allowed. >&2
goto ERROR_EXIT

:ERROR_PROPNAME
echo Only changes to svn:log revision properties are allowed. >&2
goto ERROR_EXIT

:ERROR_ACTION
echo Only modifications to svn:log revision properties are allowed. >&2
goto ERROR_EXIT

:ERROR_WRONGUSER
echo You are not allowed to modify other user's log messages. >&2
goto ERROR_EXIT

:ERROR_MSGTOOOLD
echo You are not allowed to modify log messages older than today. >&2
goto ERROR_EXIT

:ERROR_EXIT
exit /b 1 
```

编辑：最初的想法来自[这个线程](http://www.svnforum.org/threads/39203-Pre-revprop-change-shell-script-allows-commiters-to-change-own-log-within-X-hours)：

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-12-26T11:25:53.613

如果您使用的是 Eclipse 之类的 IDE，则可以使用这种简单的方法。

```
Right click on the project -> Team - Show history 
```

在那`right click on the revision id for your commit and select 'Set commit properties'`。

您可以从此处根据需要修改消息。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2008-11-20T10:32:26.830

如果您的存储库允许通过 pre-revprop-change 挂钩设置修订属性，您可以更轻松地更改日志消息。

```
svn propedit --revprop -r 1234 svn:log url://to/repository 
```

或者在 TortoiseSVN、AnkhSVN 和许多其他颠覆客户端中，通过右键单击日志条目然后“更改日志消息”。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-08-07T14:43:02.533

[Subversion FAQ](http://subversion.apache.org/faq.html#change-log-msg)涵盖了这一点，但使用了一堆令人困惑的未定义术语，例如`REPOS_PATH`没有给出任何实际示例。

可能需要几次尝试才能使其正常工作，因此请将更新的提交消息保存在文件中。与`svn-commit.tmp`文件不同，如果出现问题，Subversion 不会保留您的输入。

在您的工作目录中，运行

`svn propedit -r N --revprop svn:log`

编辑提交消息。如果这行得通，那就太好了！但它可能不会，因为`svn:log`修订属性是未版本化的，并且默认情况下 Subversion 会阻止你覆盖它，无论是使用[钩子脚本](http://svnbook.red-bean.com/en/1.1/ch05s02.html#svn-ch-5-sect-2.1) `pre-revprop-change`，还是你没有这样的钩子的错误消息。

要更改挂钩，您需要访问托管存储库的文件系统。`svn info`将告诉您存储库根目录。假设它是`~/svnrepo`.

1.  `cd`到`~/svnrepo/hooks`
2.  有没有`pre-revprop-change`脚本 `pre-revprop-change.bat`？如果是这样，请暂时注释掉如果您尝试更改则中止的部分`svn:log`。
3.  否则，在 Windows 上，创建一个名为`pre-revprop-change.bat`. 这是一种方法：

    ```
    copy con pre-revprop-change.bat
    ^Z 
    ```

4.  否则，在 Unix 上，运行

    ```
    echo '#!/bin/sh' > pre-revprop-change
    chmod +x pre-revprop-change 
    ```

5.  在工作副本中，`svn propedit -r N --revprop svn:log`再次运行

6.  `~/svnrepo/hooks/svn-revprop-change`撤消对( `.bat`)的更改

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-19T14:45:51.747

我在 svnforum 找到了服务器端 pre-rev-prop-change 挂钩的一个很好的实现：[https ://www.svnforum.org/forum/opensource-subversion-forums/scripts-contributions/8571-pre-revprop-change -shell-script-allows-commiters-to-change-own-log-within-x-hours](https://www.svnforum.org/forum/opensource-subversion-forums/scripts-contributions/8571-pre-revprop-change-shell-script-allows-commiters-to-change-own-log-within-x-hours)

它实现

*   用户检查，即只能编辑自己的提交消息。
*   SVN 管理员覆盖；管理员可以编辑任何内容。
*   时间戳比较：只能编辑小于特定时间的提交

从那里抓取并随意编辑。我不想在这里复制它，因为我不是原作者，也没有版权声明允许我这样做。

# c# - 如何比较两张图像并识别图像中的图案？

> ID：304384
> 
> 赞同：3
> 
> 时间：2008-11-20T05:13:27.770
> 
> 标签：c#, image-processing, computer-vision, pattern-recognition, feature-extraction

如何比较两个图像并识别图像中的图案，而不管其大小和图案大小，并使用.Net C#？另外，图像处理中使用了哪些算法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-20T05:21:16.363

请参阅[尺度不变特征变换](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)、[模板匹配](http://en.wikipedia.org/wiki/Template_matching)和[霍夫变换](http://en.wikipedia.org/wiki/Hough_transform)。快速且不准确的猜测可能是制作颜色直方图并进行比较。如果图像足够复杂，您可能能够区分几组图像。

为简单起见，假设我们有 R、G 和 B 的三个桶。一个完全白色的图像将有 (100%, 100%, 100%) 的 (R, G, B)。一个完全红色的图像将具有 (100%, 0%, 0%)。一个复杂的图像可能有类似 (23%, 53%, 34%) 的东西。如果你取那个 (R, G, B) 空间中的点之间的距离，你可以比较哪个“更接近”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T06:32:02.743

我不是图像识别方面的专家，因为我曾经偶然发现[AForge](http://code.google.com/p/aforge/)库是用 C# 编写的并进行图像识别。也许它可以帮助...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T07:08:43.090

图像匹配和图像识别的技术可能非常不同。对于第一个任务，您可以使用 SIFT 或根据 RGB 或其他方式手工制作您自己的距离函数。对于识别，您可以使用大量的机器学习技术，更流行的技术包括 Adaboost、SVM 和其他混合神经网络方法。该领域不乏相关研究论文。谷歌是你的朋友。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-25T11:55:26.517

你可能正在寻找这个

System.Drawing.Bitmap sourceImage = (Bitmap)Bitmap.FromFile(@"C:\SavedBMPs\1.jpg"); System.Drawing.Bitmap 模板 = (Bitmap)Bitmap.FromFile(@"C:\SavedBMPs\2.jpg"); // 创建模板匹配算法的实例 // (将相似度阈值设置为 92.5%)

```
 ExhaustiveTemplateMatching tm = new ExhaustiveTemplateMatching(0.921f);
            // find all matchings with specified above similarity

            TemplateMatch[] matchings = tm.ProcessImage(sourceImage, template);
            // highlight found matchings

       BitmapData data = sourceImage.LockBits(
            new Rectangle(0, 0, sourceImage.Width, sourceImage.Height),
            ImageLockMode.ReadWrite, sourceImage.PixelFormat);
        foreach (TemplateMatch m in matchings)
        {

                Drawing.Rectangle(data, m.Rectangle, Color.White);

            MessageBox.Show(m.Rectangle.Location.ToString());
            // do something else with matching
        }
        sourceImage.UnlockBits(data); 
```

我警告你，处理 1024x768 的图像在 50x50 大小的图片中找到的图像非常慢，大约需要 6 秒。`enter code here`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-31T19:31:36.420

Jinmala，你在这里提出了一个非常广泛的问题。文献中关于这些主题的论文数以千计。没有正确的答案，而且图像比较中还有很多未解决的问题，所以你真的可能不能指望一个简单的解决方案就行了（除非你的情况非常简单和受限）

如果您缩小范围，我也许可以提供帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-20T05:21:19.173

查找模式识别。除了名字，我对它知之甚少。

*警告：*如果这是你想要的，那它是已知的最难的“现实世界”编程问题之一。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-26T15:45:19.847

模板匹配，你可以用 EmguCV ,OpendotnetCV,Aforge.net

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-20T05:21:46.007

[尺度不变特征变换 (SIFT)](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)可能是您正在寻找的。然而，理解或实施并不简单。

# qt - 如何为 QtWebKit 开发插件？

> ID：304386
> 
> 赞同：1
> 
> 时间：2008-11-20T05:13:43.430
> 
> 标签：qt, plugins, webkit, qtwebkit

我正在尝试为[QtWebkit](http://trac.webkit.org/wiki/QtWebKit)开发插件。但是我找不到如何为 QtWebKit 开发一个插件，希望它可以被 JavaScript 调用。有谁知道解释如何做到这一点的任何教程或文档？

Webkit 已集成到 Qt 中，这个集成包称为 QtWebkit。他们为插件创建提供了新的方法。

-问候，维韦克·古普塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-07T12:38:33.170

简单的答案是编写一个子类`QWebPage`并将其设置在您的`webview`. 然后你可以展示你自己的 HTML 页面，并在[`createPlugin`](http://doc.qt.io/archives/4.6/qwebpage.html#createPlugin)方法中对合适的对象标签做出反应；

```
protected:
   QObject* createPlugin(const QString &classid, const QUrl &url, const QStringList &paramNames, const QStringList &paramValues)
   {
      if (classid=="lineedit") {
         QLineEdit *lineedit = new QLineEdit;
         return lineedit;
      }
      return 0;
} 
```

并显示类似于以下 HTML 的内容；

```
<object type="application/x-qt-plugin" classid="lineedit" id="lineedit">
can't load plugin
</object> 
```

请记住，您需要打开插件，如果您想在[`QWebSettings`](http://doc.qt.io/archives/4.6/qwebsettings.html#WebAttribute-enum)

要拥有更高级的功能，您应该使用[`QWebPluginFactory`](http://doc.qt.io/archives/4.6/qwebpluginfactory.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-08T10:16:38.977

实际上，Webkit 已经集成到 Qt 中，这个集成包称为 QtWebkit。他们为插件创建提供了新方法。我只需要一个链接或步骤来在 QtWebkit 中创建一个插件，并且该插件应该由 java 脚本调用。

问候维韦克古普塔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-11-05T13:21:09.567

要将对象公开给 Javascript，请使用

```
this->mainFrame()->addToJavaScriptWindowObject("lineedit", this); 
```

`lineedit`可用于从 javascript 访问对象的名称在哪里

Qt 属性将作为 JavaScript 属性公开，插槽作为 JavaScript 方法公开。（见[http://doc.qt.io/archives/qt-4.7/qwebframe.html#addToJavaScriptWindowObject](http://doc.qt.io/archives/qt-4.7/qwebframe.html#addToJavaScriptWindowObject)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-29T04:09:14.793

[WebKit插件编程专题介绍](http://developer.apple.com/documentation/InternetWeb/Conceptual/WebKit_PluginProgTopic/WebKitPluginTopics.html)是针对WebKit的，QtWebKit有那么特别吗？

# vb.net - VB.NET 中的函数重载与默认参数？

> ID：304389
> 
> 赞同：6
> 
> 时间：2008-11-20T05:15:53.100
> 
> 标签：vb.net, overloading

在VB.NET中，哪个更好用：函数重载还是默认参数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-20T05:32:32.677

如果参数是可选的（即重载是完整过程签名接受的参数的子集），那么默认或可选参数会更有意义。

如果重载允许参数使用不同的类型，或者是语义不同的参数，例程会以不同的方式解释，那么重载会更有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T06:29:55.883

代码会被其他语言使用吗？如果是这样，这会使平衡转向超载，同时仍然牢记哈米什的答案。特别是，C# 不支持可选参数 - 但...

诚然，这实际上并不会阻止某人使用您的 C# 代码，这对他们来说可能是一种痛苦。

如果有很多参数并且它们在逻辑上代表某些东西，您可能需要考虑将它们封装在一起，就像`Process`使用`ProcessStartInfo`. 由于对象初始化器，这在 C# 中特别好。

如果这是用于构造，您也可以将构建器模式视为它的变体。例如，在协议缓冲区中，我可以执行以下操作：

```
Person jon = new Person.Builder { Name="Jon", Age=32,
                                  Spouse="Holly", Kids=3 }.Build(); 
```

它最终变得非常易读，同时仍然一口气创建了一个人（在一个表达式中，并且不必改变人本身 - 实际上消息类型是不可变的；只有构建器不是）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-17T16:52:54.277

供参考

如果要将参数添加到从其他程序集调用的函数或方法，则：

您可以通过使用额外参数创建附加函数来重载。

或者您可以添加一个可选参数，但是：您必须重新编译所有调用此函数的程序集，即使它们不需要使用新的可选参数！这通常不是人们所期望的（尤其是那些习惯于 VB6 工作方式的人）。基本上，您不能将新的可选参数滑入函数并期望它完全向后兼容。另外，据我了解，如果您更改默认值，则需要重建所有调用程序集才能使更改生效。

# php - 分隔键的最有效方法

> ID：304391
> 
> 赞同：0
> 
> 时间：2008-11-20T05:16:28.370
> 
> 标签：php, string

假设我有一个由 16 个数字字符组成的字符串（即 0123456789012345），在 PHP 中将其划分为多个集合的最有效方法是什么：0123-4567-8901-2345？

注意：我正在重写一个非常缓慢的现有系统。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-20T05:26:09.333

使用[str_split()](http://php.net/str_split)：

```
$string = '0123456789012345';
$sets = str_split($string, 4);
print_r($sets); 
```

输出：

```
Array
(
    [0] => 0123
    [1] => 4567
    [2] => 8901
    [3] => 2345
) 
```

然后当然要在集合之间插入连字符，您只需将它们一起[implode() ：](http://php.net/implode)

```
echo implode('-', $sets); // echoes '0123-4567-8901-2345' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-23T03:11:19.170

如果您正在寻找更灵活的方法（例如电话号码），请尝试正则表达式：

```
preg_replace('/^(\d{4})(\d{4})(\d{4})(\d{4})$/', '\1-\2-\3-\4', '0123456789012345'); 
```

如果看不到，则第一个参数接受四组，每组四位数。第二个参数格式化它们，第三个参数是你的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-23T17:27:04.870

这有点笼统：

```
<?php

// arr[string] = strChunk(string, length [, length [...]] );
function strChunk() {
    $n = func_num_args();
    $str = func_get_arg(0);
    $ret = array();

    if ($n >= 2) {
        for($i=1, $offs=0; $i<$n; ++$i) {
            $chars = abs( func_get_arg($i) );
            $ret[] = substr($str, $offs, $chars);
            $offs += $chars;
        }
    }

    return $ret;
}

echo join('-', strChunk('0123456789012345', 4, 4, 4, 4) );

?> 
```

# c++ - 如何创建 sqllite3 内存数据库？

> ID：304393
> 
> 赞同：11
> 
> 时间：2008-11-20T05:16:51.087
> 
> 标签：c++, c, database, sqlite, in-memory-database

[sqlite3](http://www.sqlite.org)的[适当用途](http://www.sqlite.org/whentouse.html)之一是“内存数据库”。对于我的 C++ 应用程序来说，这听起来像是一个非常有用的工具。有没有人有一个例子说明这是如何在 C 或 C++ 中完成的？我正在寻找一种规范的方法来将几个平面文件放入内存数据库中，然后进行一些连接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-11-20T05:21:49.623

这实际上很容易。使用 C/C++ API 打开数据库时，只需指定 ':memory:' 作为数据库文件名。这是引擎将识别的特殊常数。这实际上适用于其他语言，例如 Python 或 Ruby，因为它们通常只是包装 C/C++ API。有关完整的详细信息，请参见[http://sqlite.org/c3ref/open.html](http://sqlite.org/c3ref/open.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-20T05:21:12.170

只需打开文件 :memory: 就可以了（至少在 PHP 中是这样）。

您提到您想读取几个平面文件并对其进行连接。如果可以将平面文件存储为 SQLite 数据库，则可以通过将一个附加到另一个来直接使用两者：

```
ATTACH foo.db AS foo 
```

然后像这样引用 foo 中的表：

```
SELECT * FROM foo.users 
```

通过这种方式，您无需创建内存数据库即可进行连接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-02T04:31:29.443

如果您希望 SQLite 不使用临时文件作为日志，例如，除了手动请求连接、断开连接、附加或分离时，您不需要任何文件活动。然后在连接到 ":memory:" 数据库后在运行时使用以下两个 pragma。

```
PRAGMA temp_store=MEMORY;
PRAGMA journal_mode=MEMORY; 
```

从[文档。](http://www.sqlite.org/pragma.html#pragma_journal_mode)

# jquery - 什么是最简单的订购方式 / 在 jQuery 中？

> ID：304396
> 
> 赞同：44
> 
> 时间：2008-11-20T05:18:17.900
> 
> 标签：jquery, sorting

我正在寻找一些示例代码，这些代码将按字母顺序对 HTML 列表中的列表项进行排序。任何人都可以帮忙吗？

以下是供人们一起工作的示例列表：

```
<ul class="alphaList">
    <li>apples</li>
    <li>cats</li>
    <li>bears</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2008-11-20T05:37:43.960

```
var items = $('.alphaList > li').get();
items.sort(function(a,b){
  var keyA = $(a).text();
  var keyB = $(b).text();

  if (keyA < keyB) return -1;
  if (keyA > keyB) return 1;
  return 0;
});
var ul = $('.alphaList');
$.each(items, function(i, li){
  ul.append(li); /* This removes li from the old spot and moves it */
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-25T11:31:33.973

试试这个：

```
var elems = $('.alphalist li').detach().sort(function (a, b) {
  return ($(a).text() < $(b).text() ? -1 
        : $(a).text() > $(b).text() ? 1 : 0);
}); 
$('.alphalist').append(elems); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-13T10:37:22.757

对于未来的谷歌用户，我发现这个插件非常有用。它可以选择为非拉丁语言定义字符顺序。

**旧版本（依赖于 jQuery）**

```
$('.submenu > li').tsort({
    charOrder: 'abcçdefgğhıijklmnoöprsştuüvyz'
}); 
```

对于纯英文字符，无需选项来定义

```
$('.submenu > li').tsort(); 
```

**当前版本（独立于 jQuery）（2016 年 3 月 29 日）**

当前版本的 tinysort 现在独立于 jQuery。纯 JavaScript。我更新了 jsfiddle 以供新版本使用。

```
tinysort('.submenu > li', {
    charOrder: 'abcçdefgğhıijklmnoöprsştuüvyz'
}); 
```

**演示** [http://jsfiddle.net/ergec/EkScy/](http://jsfiddle.net/ergec/EkScy/)

**网站** [http://tinysort.sjeiti.com/](http://tinysort.sjeiti.com/)

# php - 将 Microsoft Word 文档转换为 XHTML 的最佳方法是什么？

> ID：304410
> 
> 赞同：1
> 
> 时间：2008-11-20T05:25:15.170
> 
> 标签：php, xhtml, ms-word

我想以编程方式将 Microsoft Word 文档转换为 XHTML。选择的语言是 PHP，所以我会很感激任何关于 PHP 的建议。

最初的想法是尝试将 doc 文件转换为 odt，然后使用[Odt2Xhtml](http://odt2xhtml.eu.org/index_en.html) PHP 类将其转换为 XHTML 格式。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T07:52:35.593

如果您正在运行 Linux，一种方法是在服务器上安装 OpenOffice。

可以在[此处](http://www.oooforum.org/forum/viewtopic.phtml?t=6691)找到“无头”（即无 UI）安装的示例说明。

然后，您可以使用一个不错的 CLI 应用程序，例如通过 shell_exec 执行的[unoconv来通过 PHP 进行转换。](http://dag.wieers.com/home-made/unoconv/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T06:22:55.617

最可靠的方法是[使用 COM 让 Word 将文档保存为 HTML](http://www.joelonsoftware.com/items/2008/02/19.html)。

不知道Word是否可以直接生成XHTML；如果没有，谷歌会显示[很多选项](http://www.google.com/search?q=convert+HTML+to+XHTML)来进行这种转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-27T02:26:43.267

请参阅[http://www.codeplex.com/OpenXMLViewer](http://www.codeplex.com/OpenXMLViewer)，其中包含您可以适应的 XSLT，这是我在 docx4j 中所做的。但是请注意，XSLT 不适合胆小的人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-14T07:00:16.533

**phpLiveDocx**提供了一种非常简单的方法来转换 Microsoft Word 文档。

在项目网站了解更多信息：

[http://www.phplivedocx.org](http://www.phplivedocx.org)

您还可以使用 phpLiveDocx 将文本数据与 MS Word 模板合并，并将生成的文档保存为 DOC、DOCX、RTF、PDF 或 TXT。

该组件是企业级的，并且是为 Zend 框架编写的。

# .net - PostgreSQL 还是 MS SQL Server？

> ID：304413
> 
> 赞同：5
> 
> 时间：2008-11-20T05:26:13.937
> 
> 标签：.net, sql-server, postgresql, web-applications

我正在考虑将 PostgreSQL 与 .Net Web 应用程序一起使用。基本上3个原因：

1.  成熟的地理查询
2.  占用空间小 + Linux
3.  价格

不过，我想知道一些工具，SQL Server Profiler 和查询计划以及性能监视器很有帮助。这个世界如何使用 Postgres？还有一些我应该考虑的事情吗？

编辑：很可能会使用 NHibernate 作为 ORM

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-21T02:03:48.417

Postgres 带有 pgAdmin，它会进行图形解释以帮助您优化查询。在 SQL 输入窗格中输入查询并按 F7 可以非常清楚地指示查询是如何计划和执行的。更多关于这个，在这里：

[图形解释计划](http://www.postgresonline.com/journal/index.php?/archives/27-Reading-PgAdmin-Graphical-Explain-Plans.html)。

如果您正在开发一个 Web 应用程序并且正在存储或使用 IP 地址，则可以使用 INET 数据类型，它允许您将 IP 地址存储为真实类型，并直接对其进行各种操作 - 是例如，禁止子网中的 IP 地址。无需存储 4 批四边形并在代码中重新组合它们，或将其存储在字符串中。

如果它是一个 .NET 应用程序，那么在 Linux 上运行是否是一种奖励？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-03-11T17:51:23.530

PostgreSQL 有很多工具，有些是免费的，有些不是... PgAdmin + Explain ANALYZE 通常会给你你需要的一切，而且它是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T05:31:07.483

由于 LINQ to SQL，我会考虑 MS SQL。

dbLinq 仍处于早期 alpha 阶段，但它适用于非常简单的查询。

# c# - SQL DataReader 在循环中缺少一行

> ID：304430
> 
> 赞同：2
> 
> 时间：2008-11-20T05:38:18.327
> 
> 标签：c#, sql, datareader

运行以下代码时，它会遗漏一行。当我执行 files.Count 时，它说有 4 行，但没有为第 4 行存储数据。当我从 SQL 管理器中运行存储过程时，它会返回所有 4 行和所有数据。有什么帮助吗？

```
 List<File> files = new List<File>();
            SqlConnection active_connection = new SqlConnection(m_connection_string);
            SqlCommand cmd = new SqlCommand();
            SqlDataReader dr = null;

            try
            {
                active_connection.Open();
                cmd.Connection = active_connection;
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandText = "dalsp_Select_Organization_Files";

                SqlParameter param;

                param = cmd.Parameters.Add("@p_organization_guid", SqlDbType.UniqueIdentifier);
                param.Value = new Guid(organization_guid);

                param = cmd.Parameters.Add("@p_file_type", SqlDbType.NVarChar, 50);
                param.Value = file_type;

                dr = cmd.ExecuteReader(CommandBehavior.CloseConnection);

                if (dr.HasRows)                    
                {                    
                    while (dr.Read())
                    {
                        File file = new File();
                        file.OrganizationGuid = dr["OrganizationGuid"].ToString();
                        file.FileGuid = dr["FileGuid"].ToString();
                        file.FileLocation = dr["FileLocation"].ToString();
                        file.FileName = dr["FileName"].ToString();
                        file.FileType = (FileTypeEnum)Enum.Parse(typeof(FileTypeEnum), dr["FileType"].ToString());
                        file.FileExtension = dr["FileExtension"].ToString();
                        file.FileDescription = dr["FileDescription"].ToString();
                        file.ThumbnailPath = dr["ThumbnailPath"].ToString();
                        files.Add(file);
                    }       
                }
                dr.Close();
                dr = null;

                active_connection.Close();
                cmd = null;

            }
            catch (Exception)
            {
                throw;
            }
            finally
            {
                if (active_connection.State != ConnectionState.Closed)
                {
                    active_connection.Close();
                    active_connection.Dispose();
                }
            }

            return files; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T06:24:32.400

如果您说您的文件集合有 4 个项目，但 4 个项目不包含任何值，那是什么意思？是 null，对象没有数据，还是抛出索引超出范围异常？

你在做一个文件[4]或类似以下的东西吗？

```
for(int x = 1; x < files.length; x++)
{
     files[x]
} 
```

那是行不通的。记住 C# 中基于 0 的索引。

作为旁注，您可以通过执行以下操作来取消您的 try catch 语句：

```
using (SqlConnection connection = new SqlConnection(conn_string))
{
    connection.Open();
    using (SqlCommand cmd = new SqlCommand("SELECT * FROM MyTable", connection))
    {
         using (SqlDataReader dr = cmd.ExecuteReader())
         {
             return result;
         }
    }
} 
```

using 语句将保证读取器和连接的处置（并因此关闭）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T08:35:08.643

您应该放弃“if (dr.HasRows)”，它所做的只是在 while 循环中重复检查。

您不应该在连接上调用 Close，也不应该将其设置为 null。相反，您应该将连接包装在“使用”块中，如下所示：

```
using (SqlCommand cmd = new SqlCommand()) {
   //use the connection
} 
```

数据阅读器和 SQL 命令也是如此。

下一点什么都不做，删除它。

```
 catch (Exception) { throw; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T06:08:49.140

您是否尝试过在调试器中逐步执行此操作，并在执行阅读器之前检查您的命令参数？您在结果集中获得的值是否与直接在 sql 上运行 sproc 时相同？

我可能是错的，因为有几种方法可以做到这一点，但是在您将参数添加到命令的方式中看起来有些古怪。

我通常使用的模式更像：

```
SqlParameter param = new SqlParameter();  
// set param stuff - here or in ctor   
cmd.Parameters.Add(param); 
```

主要是关于什么对你有用....

大多数情况下，我遇到存储过程问题的时候是我对参数进行处理的时候。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T06:26:18.620

代码对我来说看起来是正确的。我认为您肯定希望通过调试器来查看从 ExecuteReader 返回了多少行。我的一条评论是“if (dr.HasRows)”有点多余，因为“while (dr.Read())”会给你同样的效果。

我想问的另一个问题是你知道你是错过了第一条记录还是最后一条记录？

布赖恩

# c# - 模拟 COM 对象

> ID：304435
> 
> 赞同：2
> 
> 时间：2008-11-20T05:42:30.753
> 
> 标签：c#, unit-testing, com, moq, mocking

我一直在为只能获取和返回字符串的 COM 对象开发一个包装器。COM 对象的接口如下所示：

```
 interface IMapinfo
    {
        void Do(string cmd);
        string Eval(string cmd);
    } 
```

现在我已经制作了包含如下基本功能的类：

```
 public class Table 
    {
        IMapinfo MI;
        public string Name
        {
            //pass the command to the COM object and get back the name.
            get{return MI.Eval("TableInfo(1,1")");}
        }

    } 
```

现在我想对这些类进行单元测试，而不必每次都创建真正的 COM 对象，设置世界然后运行测试。所以我一直在研究使用模拟对象，但我对在这种情况下如何使用模拟有点困惑。

我打算使用起订量，所以我这样写了这个测试：

```
 [Test]
        public void MockMapinfo()
        {
            Moq.Mock<Table> MockTable = new Moq.Mock<Table>();
            MockTable.ExpectGet(n => n.Name)
                .Returns("Water_Mains");

            Table table = MockTable.Object;
            var tablename = table.Name;

            Assert.AreEqual("Water_Mains", tablename,string.Format("tablename is {0}",tablename));
            Table d = new Table();
         } 
```

这是模拟我的 COM 对象的正确方法吗？发送到 eval 函数的字符串如何正确？还是我做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T06:18:28.510

这是重复的吗？[我将如何使用 COM OLE 对象进行 TDD](https://stackoverflow.com/questions/258627/how-would-i-do-tdd-with-a-com-ole-object)

EDIT: Looks like you're asking the same question, but to validate your mocking code (OOPS).

You're not quite there for your mocking scenario. You're in the right that you want to isolate external dependencies, and your COM object certainly meets that criteria. Though I'm not a moq guy (I prefer RhinoMocks) the idea behind mocks is *interaction testing...*

Interaction testing is about how cohesive sets of objects work together. A valid test in this scenario would be to write a test for the component that is dependent on your COM object's behavior.

In this case, your "Table" which acts like a wrapper for your COM object, is also dependent on the COM object's behavior. For argument sake, let's say your Table object performs custom logic against the values that are returned from your COM object.

Now you can write isolated tests for your Table object while *simulating* your COM object's behavior using Mocks.

```
public class Table
{
   public Table(IMapInfo map)
   {
      _map = map;
   }

   public string Name
   {
      get 
      {
        string value = _map.Eval("myexpression");
        if (String.IsNullOrEmpty(value))
        {
            value = "none";
        }
        return value;
      }
   }

   private IMapInfo _map;
}

[TestFixture]
public class TableFixture // is this a pun?
{
   [Test]
   public void CanHandleNullsFromCOM()
   {
       MockRepository mocks = new MockRepository(); // rhino mocks, btw
       IMapInfo map = mocks.CreateMock<IMapInfo>();

       using (mocks.Record())
       {
          Expect.Call(map.Eval("myexpression").Return(null);
       }

       using (mocks.PlayBack())
       {
          Table table = new Table(map);
          Assert.AreEqual("none", table.Name, "We didn't handle nulls correctly.");
       }

       mocks.verify();
   }
} 
```

Maybe your COM object throws exceptions when it's called, or maybe it doesn't handle string expressions very well. We're actually testing how our Table object interacts with the IMapInfo without being tied to the COM object's implementation. We're also enforcing a relationship between Table and IMapInfo in that the IMapInfo object must be called during the test.

Hope this helps.

# documentation - 跟踪网站配置详细信息、操作项、文档？

> ID：304448
> 
> 赞同：2
> 
> 时间：2008-11-20T05:53:24.570
> 
> 标签：documentation, tracking

有谁知道我可以用来跟踪许多网站的详细信息的应用程序（托管或其他方式）？我管理 50 多个网站，从定制解决方案到开源平台（WordPress、Joomla）。我开始自己写，但想看看那里是否已经有任何东西。

以下是我想要的一些功能：

*   能够跟踪最新版本的软件，以便在有可用补丁时知道哪些站点需要更新。

*   我想添加任务来提醒我需要执行的期间维护项目。

*   添加有关该站点的注释。（文档、功能请求等）

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T21:45:00.670

您可以使用来自[37 Signals](http://37signals.com)的 Backpack 或 Highrise 来单独跟踪每个项目（例如创建任务、里程碑、笔记，甚至使用写板创建文档）。这些更多的是项目经理和 Intranet 类型的软件，所以我不确定这是否是您要寻找的。我喜欢他们的产品，它们非常易于使用，并且具有精简的功能集，可让您完成任务而不会被淹没在大量功能之下。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T14:00:19.280

我不知道有任何特定的应用程序可以执行您所描述的操作。但是，Joomla！有一个基于电子邮件的发布通知系统，您可以连接到：[http ://www.joomla.org/download.html](http://www.joomla.org/download.html)

这后面应该有一个RSS提要，但我现在找不到。

# .net - 如何在 Asp.NET MVC 中干净地重用编辑/新视图

> ID：304451
> 
> 赞同：9
> 
> 时间：2008-11-20T05:56:14.780
> 
> 标签：.net, asp.net-mvc

在 ASP.NET MVC 中重用相同的 ViewUserControl 时，我试图避免这样的代码。有什么建议么？

```
<% if (ViewContext.ViewData["editMode"].ToString() == "edit"){ %>
    <%= Html.SubmitButton("submit", "Update Brand")%><span class="or">Or</span><a href="#" class="cancel">Cancel</a>
<% } else { %>
    <%= Html.SubmitButton("submit", "Create New Brand")%><span class="or">Or</span><a href="#" class="cancel">Cancel</a>
<%} %> 
```

和 ...

```
<% if (ViewContext.ViewData["editMode"].ToString() == "edit"){ %>
    <h1 class="edit">Edit Brand Details</h1>
<% } else { %>
    <h1 class="create">Create A New Brand</h1>
<%} %> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-20T08:07:39.633

我总是为 New 和 Edit 创建单独的视图，否则感觉就像我的应用程序逻辑开始蔓延到我的视图中。同样，我对创建和更新有不同的控制器操作。解决此问题的更好方法可能是获取两个视图共享的位并将它们移动到用户控件并执行 RenderPartial。这样，您可以使用单一模式获得干净的视图，但只编写一次公共部分。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-20T11:33:39.473

为您的实体创建一个（或多个）部分视图（使用联系人实体的示例） - IdChange.ascx（显示 Id 和更改信息） - PersonalInfo.ascx - Address.ascx

只有在编辑视图中才需要 IdChange.ascx

创建两个单独的视图以进行编辑和创建，然后使用 RenderPartial 将模型数据带到视图中。创建.aspx

```
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
<%= Html.ValidationSummary("Create was unsuccessful. Please correct the errors and try again.") %>
<% using (Html.BeginForm())
   { %>
<fieldset>
    <legend>Create a new contact</legend>
    <div id="pagecontent">
        <div id="left">
        </div>
        <div id="center">
            <% Html.RenderPartial("PersonalInfo", Model); %>
        </div>
    </div>

    <p>
        <input type="submit" value="Create" /> 
```

编辑.aspx

```
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
<%= Html.ValidationSummary("Edit was unsuccessful. Please correct the errors and try again.") %>
<% using (Html.BeginForm())
   { %>
<fieldset>
    <legend>Edit existing contact</legend>
    <div id="pagecontent">
        <div id="left">
            <% Html.RenderPartial("IdChange", Model); %>
        </div>
        <div id="center">
            <% Html.RenderPartial("PersonalInfo", Model); %>
        </div>
    </div>

    <p>
        <input type="submit" value="Edit" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-31T00:15:16.007

```
<% string submitLabel = (ViewData["editMode"].ToString() == "edit") ? "Update Brand" : "Create New Brand" %>
<%= Html.SubmitButton("submit", submitLabel)%><span class="or">Or</span><a href="#" class="cancel">Cancel</a> 
```

如果您有多个这样的标签，您可以在页面顶部定义它们。

```
<% 
  string submitLabel = (ViewData["editMode"].ToString() == "edit") ? "Update Brand" : "Create New Brand";
  string h1Class = (ViewData["editMode"].ToString() == "edit") ? "edit" : "create";
  string h1Label = (ViewData["editMode"].ToString() == "edit") ? "Edit Brand Details" : "Create a New Brand";
%>

<h1 class="<%= h1Class %>"><%= h1Label %></h1> 
```

# linux - 用于个人桌面的 Virtual PC 2007 或 Hyper-V？

> ID：304453
> 
> 赞同：3
> 
> 时间：2008-11-20T05:58:56.053
> 
> 标签：linux, virtual-pc, hyper-v

我在笔记本电脑上运行 Vista，但想虚拟化 Ubuntu，以便我可以不时启动它以供我个人使用（例如运行代码、测试 Linux 程序）。我在 Virtual PC 2007 上试过这个（我为 Ubuntu 分配了 1G 的 RAM），它非常慢。我应该改用 Hyper-V 吗？（注意：我对虚拟化知之甚少，所以我不确定这是 Hyper-V 的用途类型。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-20T06:00:28.563

我正在使用免费的[Virtual Box](http://www.virtualbox.org/)，这对我来说效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-02T21:29:12.993

我相信要运行 Hyper-V，您必须安装 Windows Server 2008。

我现在正在运行 Win2008，我可以告诉你已经尝试过 Hyper-V 有点慢，它只有有限的图形支持。

## 超V

Slow 需要 Windows Server 2008，是一个合适的虚拟机管理程序（即它位于 Windows 之下（包括 Server 2008）。它是 1.0 版，所以请这样对待。它是微软的旗舰虚拟化解决方案，虽然它有光明的未来。但目前要避开. Magic Version 3 我认为。它也大大落后于竞争对手。

## 虚拟PC

我用这个工作，但没有用它来虚拟化 Ubuntu。我认为它相当不错，XP guest 运行得足够快。

## VMWare 服务器

制作精良的软件目前的市场领导者。对我来说它只是工作，虽然管理界面有点重。非常好的产品会推荐它。运行 3 个 Ubuntu 实例（2 个服务器 1 个 gui）和一台 XP 机器没有问题。

在我看来，这是衡量其他人的标准。

## 太阳虚拟盒子

我现在在我的 Windows Server 2008 机器上的 Virtual Box 内运行的 Ubuntu GUI 中输入这个。我对它印象深刻，它速度极快，声音作品必须安装工具包才能获得不错的屏幕分辨率，但这一切都很容易。绝对值得一看。还没有在 Vista 上尝试过，但我相信它会工作。

运行在英特尔四核、4Gb 内存和 Windows Server 2008 x64 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T06:01:20.247

我喜欢 VMWare 工作站。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T06:08:05.943

Virtual PC 2007 应该足以供个人桌面使用吗？Hyper-V 具有在桌面上使用之前必须考虑的处理器要求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-10T07:29:52.450

我想我会从 Hpyer-V 切换回 Virtual PC / VMWare，甚至可能切换回 Vista，因为 UI 缓慢。

只有在删除 Hyper-V 角色后，系统才会变得更加响应。我在登录/注销、锁定/解锁计算机和其他任务时延迟了 30 多秒。

[“当基于 Windows Server 2008 的计算机启用 Hyper-V 角色并](http://support.microsoft.com/kb/961661)[安装了](http://support.microsoft.com/kb/961661)[**加速显示适配器**](http://support.microsoft.com/kb/961661)时，视频性能可能会降低”*似乎*是一个问题。[](http://support.microsoft.com/kb/961661)

 **另请参阅有关 MS Connect 的讨论： [Hyper-V 使机器无法使用：SUPER SLOW](http://connect.microsoft.com/WindowsServerFeedback/feedback/ViewFeedback.aspx?FeedbackID=356939)。

[PS：是的，我尝试了将您的 Windows Server 2008 转换为工作站](http://www.win2008workstation.com/wordpress/)中提到的所有调整。

[使用 Hyper-V 在具有 6GB Ram 和 ATI Radeon HD 3400 的 Intel Core i7 上的 Windows Server 2008 x64 标准版上进行 Web 开发。]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T06:08:52.743

如果您不需要同时运行 Windows 和 Ubuntu，您可以尝试[Wubi，基于 Windows 的 Ubuntu 安装程序](http://wubi-installer.org/)，该程序将 Ubuntu 安装到 Windows 磁盘上的一组文件中，并将您设置为双启动，而无需重新分区或类似的东西。最新版本的 Ubuntu 随 CD 中的 Wubi 一起提供。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-20T13:44:48.690

我在Virtual PC 2007 下做Linux 的结果真的很差。VirtualBox 对我来说要好得多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-20T14:14:12.310

对 linux 不太确定，但在 windows 下，如果从外部硬盘驱动器运行 VHD，您可以获得显着的性能改进。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-10T07:49:22.247

我认为 VMWare 是对 USB 等设备提供最佳支持的最佳解决方案。

如果您将 vmware 播放器（免费）与生成您的 VMWare 映像的网站 ( [http://easyvmx.com/](http://easyvmx.com/) ) 结合使用，您将拥有一个出色的免费工作解决方案。

# mysql - 在 MySQL 中生成整数序列

> ID：304461
> 
> 赞同：72
> 
> 时间：2008-11-20T06:04:53.703
> 
> 标签：mysql

我需要使用包含整数的表/结果集/任何内容进行`n`连接`m`。有没有一种简单的方法可以在不建立表格的情况下获得它？

（顺便说一句，这种类型的构造会被称为“*元查询*”吗？）

`m-n`受限于合理的东西（< 1000's）

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2009-05-24T16:27:52.177

我在网上找到了这个解决方案

```
SET @row := 0;
SELECT @row := @row + 1 as row, t.*
FROM some_table t, (SELECT @row := 0) r 
```

单个查询，速度快，完全符合我的要求：现在我可以“编号”从复杂查询中找到的“选择”，其唯一编号从 1 开始，并为结果中的每一行递增一次。

我认为这也适用于上面列出的问题：调整初始起始值`@row`并添加限制子句来设置最大值。

顺便说一句：我认为“r”并不是真正需要的。

ddsp

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2010-04-16T10:04:04.133

以下将返回 1..10000 并且不是那么慢

```
SELECT @row := @row + 1 AS row FROM 
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t,
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t2, 
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t3, 
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t4, 
(SELECT @row:=0) numbers; 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-01-08T12:51:41.470

如果您碰巧使用[MySQL 的 MariaDB 分支](https://mariadb.org/)，[该`SEQUENCE`引擎](https://mariadb.com/kb/en/mariadb/sequence/)允许直接生成数字序列。它通过使用虚拟（假）一列表来做到这一点。

例如，要生成从 1 到 1000 的整数序列，请执行以下操作

```
 SELECT seq FROM seq_1_to_1000; 
```

对于 0 到 11，请执行此操作。

```
 SELECT seq FROM seq_0_to_11; 
```

对于从今天开始的一周的连续 DATE 值，请执行此操作。

```
SELECT FROM_DAYS(seq + TO_DAYS(CURDATE)) dateseq FROM seq_0_to_6 
```

`DATE`对于以“2010-01-01”开头的十年连续值，请执行此操作。

```
SELECT FROM_DAYS(seq + TO_DAYS('2010-01-01')) dateseq
  FROM seq_0_to_3800
 WHERE FROM_DAYS(seq + TO_DAYS('2010-01-01')) < '2010-01-01' + INTERVAL 10 YEAR 
```

如果您碰巧没有使用 MariaDB，请考虑一下。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-02-14T10:24:56.717

试试这个..它在mysql 8.0版中对我有用。您可以根据您需要的范围修改以下查询

```
WITH recursive numbers AS (
    select 0 as Date
   union all
   select Date + 1
   from numbers
   where Date < 10)
select * from numbers; 
```

是的，没有创建您帖子中提到的表格

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-11-20T08:33:47.427

MySQL中没有序列号生成器（[CREATE SEQUENCE](http://www.postgresql.org/docs/7.4/static/sql-createsequence.html)）。最接近的是`AUTO_INCREMENT`，它可以帮助您构建表格。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-10-07T13:34:13.187

1 到 100.000 之间的数字序列：

```
SELECT e*10000+d*1000+c*100+b*10+a n FROM
(select 0 a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t1,
(select 0 b union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t2,
(select 0 c union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t3,
(select 0 d union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t4,
(select 0 e union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t5
order by 1 
```

我用它来审核某个数字是否乱序，如下所示：

```
select * from (
    select 121 id
    union all select 123
    union all select 125
    union all select 126
    union all select 127
    union all select 128
    union all select 129
) a
right join (
    SELECT e*10000+d*1000+c*100+b*10+a n FROM
    (select 0 a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t1,
    (select 0 b union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t2,
    (select 0 c union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t3,
    (select 0 d union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t4,
    (select 0 e union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t5
    order by 1
) seq on seq.n=a.id
where seq.n between 121 and 129
and   id is null 
```

结果将是 121 和 129 之间序列号 122 和 124 的间隙：

```
id     n
----   ---
null   122
null   124 
```

也许它可以帮助某人！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-30T17:55:06.243

你可以尝试这样的事情：

```
SELECT @rn:=@rn+1 as n
FROM (select @rn:=2)t, `order` rows_1, `order` rows_2 --, rows_n as needed...
LIMIT 4 
```

Where`order`只是一些具有相当大的行集的表的示例。

编辑：最初的答案是错误的，任何功劳都应该归功于 David Poor，他提供了相同概念的工作示例

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2011-02-02T09:35:04.680

有一种方法可以在单个查询中获取一系列值，但它有点慢。它可以通过使用缓存表来加速。

假设您想要一个包含所有 BOOLEAN 值范围的选择：

```
SELECT 0 as b UNION SELECT 1 as b; 
```

我们可以做一个视图

```
CREATE VIEW ViewBoolean AS SELECT 0 as b UNION SELECT 1 as b; 
```

然后你可以做一个字节

```
CREATE VIEW ViewByteValues AS
SELECT b0.b + b1.b*2 + b2.b*4 + b3.b*8 + b4.b*16 + b5.b*32 + b6.b*64 + b7.b*128 as v FROM
ViewBoolean b0,ViewBoolean b1,ViewBoolean b2,ViewBoolean b3,ViewBoolean b4,ViewBoolean b5,ViewBoolean b6,ViewBoolean b7; 
```

然后你可以做一个

```
CREATE VIEW ViewInt16 AS
SELECT b0.v + b1.v*256 as v FROM
ViewByteValues b0,ViewByteValues b1; 
```

然后你可以做一个

```
SELECT v+MIN as x FROM ViewInt16 WHERE v<MAX-MIN; 
```

为了加快速度，我跳过了字节值的自动计算并让自己成为

```
CREATE VIEW ViewByteValues AS
SELECT 0 as v UNION SELECT 1 as v UNION SELECT ...
...
...254 as v UNION SELECT 255 as v; 
```

如果您需要一系列日期，您可以这样做。

```
SELECT DATE_ADD('start_date',v) as day FROM ViewInt16 WHERE v<NumDays; 
```

或者

```
SELECT DATE_ADD('start_date',v) as day FROM ViewInt16 WHERE day<'end_date'; 
```

您可以使用稍快的 MAKEDATE 函数来加快速度

```
SELECT MAKEDATE(start_year,1+v) as day FRON ViewInt16 WHERE day>'start_date' AND day<'end_date'; 
```

请注意，这个技巧非常慢，只允许在预定义的域中创建有限序列（例如 int16 = 0...65536 ）

我相信您可以通过提示 MySQL 在哪里停止计算来稍微修改查询以加快速度；）（使用 ON 子句而不是 WHERE 子句之类的东西）

例如：

```
SELECT MIN + (b0.v + b1.v*256 + b2.v*65536 + b3.v*16777216) FROM
ViewByteValues b0,
ViewByteValues b1,
ViewByteValues b2,
ViewByteValues b3
WHERE (b0.v + b1.v*256 + b2.v*65536 + b3.v*16777216) < MAX-MIN; 
```

将使您的 SQL 服务器忙碌几个小时

然而

```
SELECT MIN + (b0.v + b1.v*256 + b2.v*65536 + b3.v*16777216) FROM
ViewByteValues b0
INNER JOIN ViewByteValues b1 ON (b1.v*256<(MAX-MIN))
INNER JOIN ViewByteValues b2 ON (b2.v*65536<(MAX-MIN))
INNER JOIN ViewByteValues b3 ON (b3.v*16777216<(MAX-MIN)
WHERE (b0.v + b1.v*256 + b2.v*65536 + b3.v*16777216) < (MAX-MIN); 
```

运行速度会相当快——即使 MAX-MIN 很大，只要你用 LIMIT 1,30 或其他东西限制结果。但是，一个 COUNT(*) 将需要很长时间，如果您在 MAX-MIN 大于 100k 时错误地添加 ORDER BY，则将再次需要几秒钟的时间来计算...

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-05-21T06:57:41.817

从 1 到 1000 的计数器：

*   无需创建表
*   执行时间 ~ 0.0014 秒
*   可以转换成视图

```
 select tt.row from
    (
    SELECT cast( concat(t.0,t2.0,t3.0) + 1 As UNSIGNED) as 'row' FROM 
    (select 0 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t,
    (select 0 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t2, 
    (select 0 union select 1 union select 2 union select 3 union select 4 union select 5 union select 6 union select 7 union select 8 union select 9) t3
    ) tt
    order by tt.row 
```

* * *

学分：[答案](https://stackoverflow.com/a/2652051/5372400)，Seth McCauley 在答案下方发表评论。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-11-21T05:48:34.203

您似乎能够构建相当大的集合：

```
select 9 colname union all select 10 union all select 11 union all select 12 union all select 13 ... 
```

我在 5.0.51a 的 5300 中遇到了解析器堆栈溢出。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-03-01T14:33:01.280

此查询生成从 0 到 1023 的数字。我相信它适用于任何 sql 数据库风格：

```
select
     i0.i
    +i1.i*2
    +i2.i*4
    +i3.i*8
    +i4.i*16
    +i5.i*32
    +i6.i*64
    +i7.i*128
    +i8.i*256
    +i9.i*512
    as i
from
               (select 0 as i union select 1) as i0
    cross join (select 0 as i union select 1) as i1
    cross join (select 0 as i union select 1) as i2
    cross join (select 0 as i union select 1) as i3
    cross join (select 0 as i union select 1) as i4
    cross join (select 0 as i union select 1) as i5
    cross join (select 0 as i union select 1) as i6
    cross join (select 0 as i union select 1) as i7
    cross join (select 0 as i union select 1) as i8
    cross join (select 0 as i union select 1) as i9 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-11-20T09:03:46.417

m有多大？

您可以执行以下操作：

```
create table two select null foo union all select null;
create temporary table seq ( foo int primary key auto_increment ) auto_increment=9 select a.foo from two a, two b, two c, two d;
select * from seq where foo <= 23; 
```

其中auto_increment设置为n，where子句与m比较，两个表重复的次数至少为ceil(log(m-n+1)/log(2))。

（可以通过在创建临时表序列中将两个替换为 (select null foo union all select null) 来省略非临时两个表。）

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-07-15T11:04:07.113

这是此处其他答案中使用的技术的紧凑二进制版本：

```
select ((((((b7.0 << 1 | b6.0) << 1 | b5.0) << 1 | b4.0) 
                  << 1 | b3.0) << 1 | b2.0) << 1 | b1.0) << 1 | b0.0 as n
from (select 0 union all select 1) as b0,
     (select 0 union all select 1) as b1,
     (select 0 union all select 1) as b2,
     (select 0 union all select 1) as b3,
     (select 0 union all select 1) as b4,
     (select 0 union all select 1) as b5,
     (select 0 union all select 1) as b6,
     (select 0 union all select 1) as b7 
```

没有唯一或排序阶段，没有字符串到数字的转换，没有算术运算，每个虚拟表只有 2 行，所以应该很快。

此版本使用 8 个“位”，因此它从 0 计数到 255，但您可以轻松地对其进行调整。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-07-19T10:36:39.740

# 最简单的方法是：

```
SET @seq := 0;
SELECT @seq := FLOOR(@seq + 1) AS sequence, yt.*
FROM your_table yt; 
```

# 或在一个查询中：

```
SELECT @seq := FLOOR(@seq + 1) AS sequence, yt.*
FROM (SELECT @seq := 0) s, your_table yt; 
```

此处使用该`FLOOR()`函数来`INTEGER`代替 a `FLOAT`。有时它是需要的。

我的回答受到[David Poor answer](https://stackoverflow.com/a/904110/4217744)的启发。谢谢大卫！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-12-30T18:54:34.877

警告：如果您一次插入一行数字，您最终将执行 N 个命令，其中 N 是您需要插入的行数。

您可以通过使用临时表将其降低到 O(log N)（请参阅下文以插入从 10000 到 10699 的数字）：

```
mysql> CREATE TABLE `tmp_keys` (`k` INTEGER UNSIGNED, PRIMARY KEY (`k`));
Query OK, 0 rows affected (0.11 sec)

mysql> INSERT INTO `tmp_keys` VALUES (0),(1),(2),(3),(4),(5),(6),(7);
Query OK, 8 rows affected (0.03 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> INSERT INTO `tmp_keys` SELECT k+8 from `tmp_keys`;
Query OK, 8 rows affected (0.02 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> INSERT INTO `tmp_keys` SELECT k+16 from `tmp_keys`;
Query OK, 16 rows affected (0.03 sec)
Records: 16  Duplicates: 0  Warnings: 0

mysql> INSERT INTO `tmp_keys` SELECT k+32 from `tmp_keys`;
Query OK, 32 rows affected (0.03 sec)
Records: 32  Duplicates: 0  Warnings: 0

mysql> INSERT INTO `tmp_keys` SELECT k+64 from `tmp_keys`;
Query OK, 64 rows affected (0.03 sec)
Records: 64  Duplicates: 0  Warnings: 0

mysql> INSERT INTO `tmp_keys` SELECT k+128 from `tmp_keys`;
Query OK, 128 rows affected (0.05 sec)
Records: 128  Duplicates: 0  Warnings: 0

mysql> INSERT INTO `tmp_keys` SELECT k+256 from `tmp_keys`;
Query OK, 256 rows affected (0.03 sec)
Records: 256  Duplicates: 0  Warnings: 0

mysql> INSERT INTO `tmp_keys` SELECT k+512 from `tmp_keys`;
Query OK, 512 rows affected (0.11 sec)
Records: 512  Duplicates: 0  Warnings: 0

mysql> INSERT INTO inttable SELECT k+10000 FROM `tmp_keys` WHERE k<700;
Query OK, 700 rows affected (0.16 sec)
Records: 700  Duplicates: 0  Warnings: 0 
```

编辑：仅供参考，不幸的是，这不适用于[具有 MySQL 5.0 的真正临时表，](http://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html)因为它无法插入自身（您可以在两个临时表之间来回反弹）。

编辑：您可以使用[MEMORY 存储引擎](http://dev.mysql.com/doc/refman/5.0/en/storage-engines.html)来防止这实际上是对“真实”数据库的消耗。我想知道是否有人开发了一个“NUMBERS”虚拟存储引擎来实例化虚拟存储来创建这样的序列。（唉，在 MySQL 之外不可移植）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-30T18:32:45.387

如果您使用的是 Oracle，那么“流水线函数”将是您的最佳选择。不幸的是，MySQL 没有这样的结构。

根据您想要的数字的规模，我看到了两种简单的方法：您可以使用单个查询所需的数字（可能使用由存储过程填充的内存表）填充临时表，或者，向上前面，您构建一个从 1 到 1,000,000 计数的大表并选择它的有界区域。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-06-16T04:43:13.800

```
with t1 as (
select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9
)
SELECT ROW_NUMBER() over ()
FROM
t1,
t1 as t2; 
```

无论您想要多大的表（10 次方），都可以继续为 t1 表起别名。然后可以添加一个限制X来切断它。

# asp.net - FireFox 位于“从...传输数据”或“读取...”

> ID：304471
> 
> 赞同：9
> 
> 时间：2008-11-20T06:15:04.713
> 
> 标签：asp.net, firefox, selenium

我正在使用 Selenium 为网站构建一些功能测试，但我遇到了一个奇怪的浏览器问题，页面似乎永远无法完成加载。状态栏显示“从...传输数据”或“读取...”。

由于页面永远不会完成加载，我的硒测试超时。

*这个问题似乎只发生在 FireFox 上。* 我们的测试依赖 FireFox *chrome 来测试文件上传，因此 FireFox 对我们的测试策略至关重要。

我检查了 FireBug 和 Fiddler，但我没有看到任何不完整的长期运行请求。所有请求均以正常响应代码完成（无 404 错误）。

我应该看什么来解决这个问题？

*   文档类型？
*   无效标记？
*   低级别的 FireFox 设置？
*   注册表黑客？
*   IIS设置？

尽管为地球解决问题会很棒，但我只需要为我的测试解决问题。

如果有帮助，它是一个基于 MOSS 的 .NET 3.5 解决方案，我们正在使用带有 sifr 的 Flash。我们的标记是遗留的（它是一个 MOSS 站点），所以它的边缘有点粗糙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-08-07T14:22:27.010

这是 Firefox 中的一个已知错误：[https ://bugzilla.mozilla.org/show_bug.cgi?id=383811](https://bugzilla.mozilla.org/show_bug.cgi?id=383811)

如果您认为该错误与您的情况相关，请考虑在 bugzilla 中投票。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-26T14:56:58.353

讨厌回答我自己的问题，但是在开发人员开始去除无效标记、未关闭的表或没有表的 TR 通常不好之后，问题就自行消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T15:50:44.270

试试[Live HTTP Headers](http://livehttpheaders.mozdev.org/)扩展。使用此扩展，您可以在线获取请求和响应标头。您也可以尝试在安全模式下启动 Firefox 进行测试。这将禁用所有已安装的扩展。在 dos 框中运行 firefox -h 以查看安全模式的命令行开关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T05:13:11.217

同样的问题，似乎是一个错误。有人说这是一个“安全问题”。确实找到了一个简单的解决方法。我没有尝试过，而且很可能不会，因为我讨厌为单个浏览器修复添加额外的代码，但这种方法看起来不错。见：[http ://board.flashkit.com/board/showthread.php?t=759308](http://board.flashkit.com/board/showthread.php?t=759308)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T05:56:18.543

尝试禁用 Firebug。这为我解决了类似的问题。

# performance - 在 Windows 2003/IIS 6.0 中监控 ASP/COM+ 应用程序性能

> ID：304473
> 
> 赞同：1
> 
> 时间：2008-11-20T06:17:13.320
> 
> 标签：performance, com, asp-classic, iis-6, windows-server-2003

我们正在运行一个使用**Active Server Pages 和 COM+ 组件**的网站。ASP 页面调用 COM+ 组件，这些组件依次与外部系统通信并响应 ASP 页面请求。

我们发现应用程序在一段时间内变得缓慢并且需要重新启动（比如几天后）。该网站在良好的硬件上运行并且没有巨大的流量，因此我们认为这不是容量问题。

该应用程序是由不再支持我们的外部供应商用 ASP 3.0、VB 6.0 (COM) 编写的。在这种情况下，我们想通过监控 ASP 网站和 COM+ 组件的性能来找出问题所在。

因此我的问题是：

*   对于这种情况，哪些性能计数器最适合监控？
*   应该以什么间隔记录计数器？
*   在您开始分析计数器之前，它们会被监控多长时间？我意识到这可能因不同的应用程序而异，但是否有一般指导方针？
*   一旦收集了计数器，如何理解它？使用 MS Excel 进行手动分析或有什么好的工具推荐吗？你对此有何经验？

任何帮助高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T12:47:34.577

看到[这个线程](https://stackoverflow.com/questions/37425/what-is-the-best-way-to-interpret-perfmon-analysis-into-application-specific-ob#158314)。

您应该从 PAL Perfmon_Template_for_System_Overview.htm 设置文件开始，并添加以下 Active Server Pages 计数器：

*   脚本运行时的错误
*   来自 ASP 预处理器的错误
*   请求执行
*   排队的请求
*   会话总数
*   来自脚本编译器的错误
*   调试请求
*   请求执行时间
*   请求等待时间
*   请求/秒
*   请求总数
*   请求成功
*   请求失败总数
*   模板缓存命中率
*   处理 (inetinfo) 私有字节

模板的默认采样间隔 15 秒应该足够好，只要您监控足够长的时间。如果您在白天有几个小时的高峰使用时间，那么在这段时间内进行监控可能就足够了；您只是在寻找趋势来帮助您集中精力进行故障排除。

PAl 工具带有开箱即用的 IIS 5.0 和 6.0 分析器，但不是经典的 ASP。您可以创建一个新的分析器（在 PAL 中称为阈值文件）以包含 ASP 分析。代码太长，无法在此处发布，但如果您有兴趣，请给我留言，我们将研究如何将我拥有的内容发送给您。

此外，如果您拥有 Visual Studio 企业版，则可以使用[Visual Studio Analyzer](http://msdn.microsoft.com/en-us/library/aa728806(VS.71).aspx) (VSA) 跟踪所有 ASP 和 COM 调用。它可以很好地分析时间花费的位置，并且您可以包含 Perfmon 计数器来监视以查看系统级别的情况。

# cocoa - 确定 Unicode 字符是否可见？

> ID：304483
> 
> 赞同：2
> 
> 时间：2008-11-20T06:28:56.243
> 
> 标签：cocoa, unicode, hidden-characters

我正在编写一个文本编辑器，它可以选择显示一个项目符号来代替任何不可见的 Unicode 字符。不幸的是，似乎没有简单的方法来确定 Unicode 字符是否不可见。

我需要找到一个包含每个 Unicode 字符的文本文件，以便我可以查看不可见的字符。有人知道我在哪里可以找到这样的文件吗？

编辑：我正在 Cocoa 中为 Mac OS X 编写这个应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T06:42:57.590

哦，我明白了......实际的隐形字符；）这个常见问题解答可能会有用：

[http://www.unicode.org/faq/unsup_char.html](http://www.unicode.org/faq/unsup_char.html)

它列出了当前不可见的代码点，并包含您可能会发现有用的其他信息。

**编辑：添加了一些 Cocoa 特定的信息**

由于您使用的是 Cocoa，因此您可以获得控制字符的 unicode 字符集并与之进行比较：

```
NSCharacterSet* controlChars = [NSCharacterSet controlCharacterSet]; 
```

您可能还想查看我在上面发布的 FAQ 链接，并根据那里的信息将您认为可能需要的任何字符添加到 controlCharacterSet 返回的字符集中。

**编辑：添加了一个从 Unicode 字符创建 Unicode 字符串的示例**

```
unichar theChar = 0x000D;
NSString* thestring = [NSStirng stringWithCharacters:&theChar length:1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T09:10:20.177

让我知道这段代码是否有帮助：

```
-(NSString*)stringByReplacingControlCharacters:(NSString*)originalString
{
    NSUInteger length = [originalString length];
    unichar *strAsUnichar = (unichar*)malloc(length*sizeof(unichar));
    NSCharacterSet* controlChars = [NSCharacterSet controlCharacterSet];
    unichar bullet = 0x2022;

    [originalString getCharacters:strAsUnichar];
    for( NSUInteger i = 0; i < length; i++ ) {
        if( [controlChars characterIsMember:strAsUnichar[i]] )
            strAsUnichar[i] = bullet;
    }

    NSString* newString = [NSString stringWithCharacters:strAsUnichar length:length];
    free(strAsUnichar);

    return newString;
} 
```

重要警告：

这可能不是执行此操作的最有效方式，因此您必须在开始工作后决定如何优化。这仅适用于 BMP 上的字符，如果您有这样的要求，则必须添加对堆肥字符的支持。这根本没有错误检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T06:35:37.727

一个很好的起点是[Unicode Consortium](http://www.unicode.org/versions/Unicode5.1.0/)本身，它提供了大量数据，其中一些是您正在寻找的。

我也在生成一个 DLL，你给它一个字符串，它会返回每个字符的 UCN。但不要屏住呼吸。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T06:36:21.563

当前的官方 Unicode 版本是 5.1.0，描述其中所有代码点的文本文件可以在[http://www.unicode.org/standard/versions/components-latest.html找到](http://www.unicode.org/standard/versions/components-latest.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T06:57:22.303

对于 Java，[java.lang.Character.getType](http://java.sun.com/j2se/1.4.2/docs/api/java/lang/Character.html#getType(char))。对于 C，[u_charType()](http://www.icu-project.org/apiref/icu4c/uchar_8h.html#bac78638e20ed7a2ab471b35a1858d02)或[u_isgraph()](http://www.icu-project.org/apiref/icu4c/uchar_8h.html#51a643f80fb02bed12dd705e9f6545ea)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T08:13:32.913

您可能会发现此代码很有趣： http: [//gavingrover.blogspot.com/2008/11/unicode-for-grerlvy.html](http://gavingrover.blogspot.com/2008/11/unicode-for-grerlvy.html)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-11-20T06:33:17.407

这是一项不可能完成的任务，Unicode 甚至支持克林贡语，所以它不会工作。然而，大多数文本编辑器使用标准的 ANSI 不可见字符。如果您的 Unicode 库很好，它将支持查找等效字符和/或类别，您可以使用这两个功能以及任何编辑器来完成它

**编辑：**是的，我对克林贡语的支持很傻，但这并不意味着它不是真的......当然，联盟不支持克林贡语，但是在 Unicode 的“私人使用区”中定义了克林贡语的运动克林贡字母 (U+F8D0 - U+F8FF)。[有兴趣的可以在这里链接](http://www.wazu.jp/gallery/Test_Klingon.html)：）

**注意：**想知道克林贡程序员使用什么编辑器...

# perl - 如何从 Perl 打开其他人的 Outlook 日历？

> ID：304487
> 
> 赞同：1
> 
> 时间：2008-11-20T06:33:00.137
> 
> 标签：perl, outlook, calendar, shared

我可以通过以下方式访问我的日历条目：

```
$folder = $namespace->Folders("Joe Cool")->Folders("Calendar"); 
```

如何打开“简酷”日历？Outlook 将该日历显示为：

```
People's Calendar
   Jane Cool 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T06:55:31.883

相信你正在寻找[GetSharedDefaultFolder](http://msdn.microsoft.com/en-us/library/aa220116(office.11).aspx) () 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T01:07:00.887

您是否尝试过查看整个 $namespace 数据结构？

尝试：

使用 Data::Dumper;打印 Dumper $namespace;exit;

$namespace 创建/初始化后不久的某个地方。

伊恩

# java - 最近的 Java 参考资料？

> ID：304488
> 
> 赞同：3
> 
> 时间：2008-11-20T06:33:06.470
> 
> 标签：java, reference

我一直在编程 Java，但已经离开它一段时间了。任何人都可以推荐一个非常好的 Java 参考，其中“非常好的”是由“良好的语言覆盖、最近扩展的详细覆盖以及为技术读者编写的（而不是“傻瓜”类的书）”定义的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-20T07:18:07.363

除了说明语言发生了哪些变化的参考资料（其他答案已经比我能涵盖的更好），我不能高度推荐[Joshua Bloch 撰写的 Effective Java 第二版](https://rads.stackoverflow.com/amzn/click/com/0321356683)- 它解释了使用该语言的最有效方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T11:25:04.913

对于与并发有关的任何事情，请获取[Java Concurrency In Practice](http://www.javaconcurrencyinpractice.com/)。

除了帮助您避免等待您的许多讨厌的陷阱中的大多数之外，它还很好地处理了 Java 5 和 6 的新[java.util.concurrent](http://java.sun.com/javase/6/docs/api/java/util/concurrent/package-frame.html) API 成员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T06:39:13.697

Bruce Eckel 的[Java 思考第 4 版](https://rads.stackoverflow.com/amzn/click/com/0131872486)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T07:14:05.590

我一直很喜欢 cay horstmann 的书： http: [//www.horstmann.com/corejava.html](http://www.horstmann.com/corejava.html)。这些是第 8 版。还有 gosling 的[http://java.sun.com/docs/books/javaprog/](http://java.sun.com/docs/books/javaprog/)。还没有看到1.6的任何东西。

# windows - 保留桌面空间，使最大化的窗口不会覆盖它

> ID：304489
> 
> 赞同：2
> 
> 时间：2008-11-20T06:33:14.003
> 
> 标签：windows, screen, maximize

我想“保留”屏幕的一部分，以便最大化的窗口不会覆盖该区域（想想任务栏（Win）或停靠（mac）。

我见过其他程序已经做到了这一点，但真的不喜欢它们，而且由于我从事这项业务，我想我可能会参与其中……至少对于我个人而言。

我更喜欢使用 VS 支持的语言，但如果它可以通过 Java 或其他语言完成，那也很好 - 只是有更多的学习机会:)

有人知道这样做的方法或对此问题的良好参考吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T07:13:36.310

看看[这个](http://www.codeproject.com/KB/shell/csdoesshell3.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T14:35:11.520

请参阅 MSDN C 示例 (SHAPP) 正是这样做的（codeproject 示例只是一个糟糕的副本..）

# javascript - Javascript 正则表达式 - 必填字段验证

> ID：304491
> 
> 赞同：8
> 
> 时间：2008-11-20T06:34:18.090
> 
> 标签：javascript, validation

如何使用javascript RegExp检查字段（文本框）是否为空或仅填充空格（空格/输入/制表符等）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-20T06:41:46.810

```
if (myField.value.match(/\S/)) {
  // field is not empty
}
// or
if (/\S/.test(myField.value)) {
  // field is not empty
} 
```

解释，因为其他人似乎有一些~~疯狂~~的不同想法：

`\s`将匹配空格、制表符或换行符。
`\S`将匹配除空格、制表符或新行之外的任何内容。
如果您的字符串有一个不是空格、制表符或换行符的字符，则它不是空的。
因此，您只需要搜索一个字符：`\S`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-20T07:24:50.220

```
/^\s*$/.test(string) 
```

可以这样使用：

```
var empty_string = /^\s*$/; //create RegExp object for re-use

if (empty_string.test(myFormField.value))
{
  alert("Please be a bit more elaborate!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T07:30:32.970

通过测试

```
/\s/ or /\S/
```

你只会测试一个字符。因此，最好改为测试：

```
/^\s+$/ or /^\S+$/
```

编辑：请注意**or**不是代码的一部分。

编辑2：

匹配测试：

```
 if(string.match(/^\s+$/)) {
   alert("string is empty!");
} 
```

以及不匹配的测试：

```
 if(!string.match(/^\S+$/)) {
   alert("string is empty!");
} 
```

您可以使用其中任何一个来获得相同的结果。

# security - 从另一个站点（基本身份验证）捎带身份验证有哪些安全问题？

> ID：304495
> 
> 赞同：0
> 
> 时间：2008-11-20T06:37:19.143
> 
> 标签：security, login, basic-authentication

我有一个位于基本身份验证/SSL 后面的 WSS 安装（它托管在公共 Web 主机上）。我正在 ASP.NET 中创建一个姊妹站点，并且正在考虑只运行凭据并允许用户登录到新系统，前提是没有返回 401 Not Authorized 错误。

两者都是面向互联网的应用程序，将被大约 20-50 人使用。

我错过了什么？我以前从未听说过这个推荐，但我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T16:05:12.493

我看不出有任何重大问题 - 如果您必须通过 Internet 发送它，您显然希望确保两台服务器都使用 SSL，但除此之外，这听起来像是一种在两者之间共享凭据的优雅方式应用程序。

# php - PHP中的变量类扩展——可能吗？

> ID：304509
> 
> 赞同：5
> 
> 时间：2008-11-20T06:44:54.793
> 
> 标签：php, class, object, variable-variables

在 PHP 中是否可能出现以下情况？

```
$blah = 'foo1';

class foo2 extends $blah {
    //...
}

class foo1 {
    //...
} 
```

这给出了一个错误。

我想动态设置 $blah 所以我可以扩展我想要的任何类。

**编辑：**想要这样做的原因是因为我想在相关类中使用另一个类中的函数。最后它会是这样的：

```
Final extends foo1 extends foo2 extends foo3 extends foo4 extends parent { ... } 
```

最后我决定在类中实例化另一个类并使用它。不是最好的选择，因为他们都是同一类的两个，但这不会经常使用，所以它现在可以工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-20T07:55:57.567

你假设这里 php 从上到下执行，但它并不像那样工作：

```
<?php
foo();  # works

function foo(){
  print "bar";
} 
```

* * *

```
<?php

foo();  #dies

if( $i == 1 )
{
  function foo(){
    print "bar";
  }
} 
```

* * *

```
<?php
$i = 1;
if( $i == 1 )
{
  function foo(){
    print "bar";
  }
}

foo(); #works 
```

* * *

现在，虽然您可以有条件地创建类：

```
<?php

class A { }
class B { }
if( false ){ 
  class C extends B { 
    public static function bar(){
      print "baz"; 
    }
  }
}
C::bar(); # dies 
```

您不能在运行时从变量实例化一个：

```
<?php
class A { }
class B { }
$x = 'B'; 
if( false ){ 
  class C extends $x { 
    public static function bar(){
      print "baz"; 
    }
  }
}
C::bar();
---> Parse error: syntax error, unexpected T_VARIABLE, expecting T_STRING in /tmp/eg.php on line 7 
```

有一种使用 Eval 的方法，但你*真的*不想去那里：

```
<?php

class A { }
class B { }
$x = 'B'; 
if( true ){ 
 $code =<<<EOF
  class C extends $x { 
    public static function bar(){
      print "baz"; 
    }
  }
EOF;

  eval( $code );
}
C::bar();
$o = new C; 
if ( $o instanceof $x )
{
  print "WIN!\n";
}
--->barWIN! 
```

然而，这里还有一个更重要的问题：

**为什么你*要*在运行时扩展一个不同的类**

任何使用您的代码的人都会想要压制您并为此*鞭打*您。

（或者，如果你喜欢鞭打，做那个评估技巧）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T07:20:09.057

我看不出这会特别有用，但是要回答您的问题……不。没有办法动态地做到这一点，因为必须在评估变量之前实例化生成的类（如果这有意义的话）。

简单来说：类必须存在，代码才能正确执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T08:04:04.850

我认为这是为了便于维护，对吧？在运行时扩展一个类真的很疯狂。

```
class SuperClassOne { /* code */ }
class SuperClassTwo { /* code */ }

class IntermediateClass extends SuperClassOne { /* empty! */ }

class DescendantClassFoo extends IntermediateClass{ }
class DescendantClassBar extends IntermediateClass{ }
class DescendantClassBaz extends IntermediateClass{ } 
```

然后，当您想更改所有`DescendantClass*`类时，只需更改 IntermediateClass 扩展的内容：

```
class IntermediateClass extends SuperClassTwo { } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-20T08:56:46.790

如果你没有太多的 $blah 值，你可以在不同的文件中扩展每个值`require_once "classes/foo_$blah.php"`

否则，您将无法解决`eval()`问题...祝您好运... :)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T14:29:08.160

我知道这个问题很久以前就被问过了，但答案比较简单。

假设你想扩展类 foo 如果类 foo 存在，或者类 bar 如果它不存在，你会使用：

```
if(!class_exists('foo')) {
    class foo extends bar {
        function __construct() {
            parent::__construct();
        }
    }
}

class myclass extends foo{
    //YOUR CLASS HERE
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-27T22:38:45.637

使用[PHP 重载](http://php.net/oop5.overloading)可以在一定程度上实现这一点。

```
class variable_class {
    public $orginalBaseClass;
    public $orginalArgs;

    public function __construct() {
        // Get constructor parameters.
        $this->orginalArgs = func_get_args();
        // Get class name from args or 3rd party source.
        $classname = 'stdClass';

        // Pass along args to new class.
        $this->orginalBaseClass = new $classname($this->orginalArgs);
    }

    public function __call($name, $arguments) {
        // Pass all method calls to the orginalBaseClass.
        return call_user_func_array(array($this->orginalBaseClass, $name), $arguments);
    }
} 
```

I'm using this pattern inside a [Drupal module](https://www.drupal.org/project/apdqc) for [prefetching data from the cache](http://cgit.drupalcode.org/apdqc/tree/apdqc.module#n104).

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-05-27T15:04:10.537

我用定义和吠叫测试了一些东西：

```
<?php
    define("INHERIT",A);

    class A{
        public function bark(){
            return "I'm A";
        }
    }
    class B{
        public function bark(){
            return "I'm B";
        }
    }

    class C extends INHERIT{}

    //main?
    $dog = new C();
    echo $dog->bark();
?> 
```

输出是：

> 致命错误：在第 15 行的 D:\sites\inherit.php 中找不到类 'INHERIT'

那么“变量类扩展是否可能？”的答案是什么？没有。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-11-02T14:33:51.010

你应该尝试过 $$

```
$blah = 'foo1';
class foo2 extends $$blah {
    //...
}

class foo1 {
    //...
} 
```

# file - 存储在服务器上的二进制文档的往返编辑

> ID：304511
> 
> 赞同：2
> 
> 时间：2008-11-20T06:46:01.403
> 
> 标签：file, upload, download, editing, attachment

我正在寻找为内容管理系统构建一些功能，用于编辑存储在服务器上的文件。

我想让用户能够轻松地将文件本地下载到他们的计算机，打开文件进行编辑，然后将其保存回服务器。该过程应尽可能无缝。

今天的步骤如下：

1.  单击链接以在 Web 浏览器中下载文件（例如 PSD）
2.  将其保存到磁盘
3.  找到文件，在 Photoshop 中打开它进行编辑
4.  进行更改，保存文件
5.  返回浏览器，导航到下载的文件。
6.  点击“替换文件”
7.  找到文件，将其上传回服务器。

这就是我想要的：

1.  点击链接打开PSD文件
2.  文件已下载，Photoshop 启动
3.  进行更改，保存文件
4.  文件上传回服务器，替换原始文件

使用过 Sharepoint 的人都知道这可以（使用 WebDAV）但仅适用于 Office 应用程序（PPT、DOC、XLS）。我希望它适用于所有文件类型。

这将需要在本地安装某种软件——可能是单独安装的应用程序，注册了 mime 类型、签名的 java 小程序或 firefox 扩展。

这似乎是一个应该解决的问题。有没有人见过这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-26T11:36:43.870

Windows 客户端操作系统有一个 WebDAV 重定向器，并且已经使用了很长时间，所以 a) 你不应该需要一个客户端，b) 它不是特定于 Office 文件的。

有趣的是服务器端，实现了一个 WebDAV 服务器。

WebDAV 在 Vista 等客户端操作系统上不支持（IIS5.1 支持，6.0 不支持），仅在服务器上（2K3、2K8...）

有可用于实现 WebDAV 服务器的 goo/examples/frameworks（不记得从什么时候开始研究的），但它需要一个服务器操作系统 [所以我不得不打折它，因为我的主机可能是 Vista/7 ，而不是服务器/XP）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-31T04:59:27.140

[WebDAV Resources](http://www.webdav.org/)站点包含一个指向至少[一个开源服务器实现](http://milton.ettrema.com/index.html)的链接。我没有用过这个软件，我只是引用参考。

[自从Jakarta Slide 项目退出](http://jakarta.apache.org/slide/)以来，Apache 似乎已经弃用或放弃了对服务器端 WebDAV的支持。

# f# - App_Code 子文件夹中的 F# 代码

> ID：304513
> 
> 赞同：0
> 
> 时间：2008-11-20T06:46:49.780
> 
> 标签：f#, app-code

我有一个项目，在 App_code 文件夹中有 2 个子文件夹，一个用于 VB，一个用于 F#（C# 文件位于根目录中）。我可以很好地访问 VB 类（通过命名空间），但不能访问 F# 代码。有没有人遇到过这样的问题，如果有，您是如何解决的？

附录：*不在*App_Code 文件夹中的 F# 代码运行良好。就好像编译器和 IDE 看不到位于 App_Code 文件夹名为 FS_Code 的子文件夹中的 F# 代码。我添加了 codeSubDirectories 元素

```
<codeSubDirectories>                
<add directoryName="VB_Code"/>
    <add directoryName="FS_Code"/>
</codeSubDirectories> 
```

VB_Code 子文件夹中的 VB 代码编译得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T06:50:36.153

请注意，默认情况下，如果您不声明命名空间或模块，顶级 F# 代码将在与文件名同名的模块中结束。见第一部分

[http://lorgonblog.spaces.live.com/blog/cns!701679AD17B6D310!444.entry](http://lorgonblog.spaces.live.com/blog/cns!701679AD17B6D310!444.entry)

详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T07:01:41.637

第 3 步：利润！！

说真的，仅仅在 App_Code 下放置一个 F# 源文件是不会做任何事情的。

为了让 ASP.NET 应用程序可以编译 F# 代码，您做了哪些准备工作？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T07:18:15.100

也许看看

[http://cs.hubfs.net/blogs/tomasp/archive/2008/03/08/aspnet_in_fsharp.aspx](http://cs.hubfs.net/blogs/tomasp/archive/2008/03/08/aspnet_in_fsharp.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T06:47:54.240

通过 Reflector 打开实际生成的程序集 - 查看实际的命名空间是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T23:59:36.293

我相信将 F# 语言的 <compiler ... /> 配置元素添加到 web.config 应该会有所帮助（请参阅 Brian 发布的链接）-但是，我怀疑您会在 C# IntelliSense 中看到任何内容。但是，我不清楚如何从另一种语言的代码中引用一种语言的代码......

您还可以查看此链接：[http ://shailkpatel.blogspot.com/2007/10/multiple-programming-languages-in.html](http://shailkpatel.blogspot.com/2007/10/multiple-programming-languages-in.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-01T19:36:51.547

我问这个问题已经有一段时间了，但我认为它最终成为了 F# 编译器不在 $PATH 中的问题（我将它安装在非标准位置）。

# php - 如果输入元素是数组，如何使用 JQuery 发送序列化表单数据

> ID：304518
> 
> 赞同：14
> 
> 时间：2008-11-20T06:53:50.187
> 
> 标签：php, jquery

我的 PHP 代码中有这段代码：

```
while ($row = mysqli_fetch_assoc($result))
{
    extract($row);
    echo "<tr>";
    echo "<td bgcolor='#FFFFFF'><input id='bookArray[]' name='bookArray[]' type='checkbox' value='$book_id' />$book_id</td>";
    echo "<td bgcolor='#FFFFFF'>$threat_name</td>";
    echo "</tr>";
} 
```

在 HTML 页面中，我想使用 jQuery serialize() 方法在 bookArray[] 中发送所选书籍的数组。在我的 JavaScript 中，

```
var selectedbooks = $("book_form").serialize();
alert (selectedbooks); 
```

在警报消息框中，我没有得到任何值（空字符串）。

以前当我使用 Prototype 时，它​​工作得很好。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-11-27T06:03:34.827

简单的：`serialize().replace(/%5B%5D/g, '[]')`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-02-11T01:55:31.113

我想出了一种方法，当使用 post 发送数据时

另一方面，您可以使用`$_['post']['name']`

如果它是一个数组（例如多选），那么在您的服务器上，您可以再次将其作为数组访问`$_POST['myselect'][0]...`

代码： [序列化表单数据以进行发布的函数](http://jquery.webspirited.com/2011/02/jquery-serializepost/ "jquery@webspirited 博客")

```
function serializePost(form) {
    var data = {};
    form = $(form).serializeArray();
    for (var i = form.length; i--;) {
        var name = form[i].name;
        var value = form[i].value;
        var index = name.indexOf('[]');
        if (index > -1) {
            name = name.substring(0, index);
            if (!(name in data)) {
                data[name] = [];
            }
            data[name].push(value);
        }
        else
            data[name] = value;
    }
    return data;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-03-10T20:24:06.653

```
var arTags = new Array();

jQuery.map( $("input[name='tags[]']") , function(obj,index)
{
   arTags .push($(obj).val());
});

var obj = {'new_tags'           : $("#interest").val() ,
           'allready_tags[]'  : arTags };

var post_data = jQuery.param(obj,true);

$.ajax({
      type :  'POST',
      url  :  'some_url',
      data :  post_data,
      dataType : "html",
      success: function(htmlResponse)
      {

      }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-30T11:27:22.923

Prototype / Scriptaculous serialize functionality for jQuery:

```
<script>
function toObjectMap( queryString )
{
    return '{\'' + queryString.replace(/=/g, '\':\'').replace(/&/g, '\',\'') + '\'}';
}
</script>
...
<div id="result"></div>
...
<form onSubmit="$('#result').load( ajaxURL, toObjectMap( $('#formId').serialize() ) );" ...>
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-25T12:18:54.797

@Tomalak您可以在XHTML中使用方括号字符“[”和“]”参见 [http://www.w3.org/TR/xhtml1/dtds.html#dtdentry_xhtml1-transitional.dtd_input](http://www.w3.org/TR/xhtml1/dtds.html#dtdentry_xhtml1-transitional.dtd_input)

所以这意味着一个名称可以合法地在 XHTML 中包含许多不同的字符，尽管使用斜杠或括号没有多大意义。PHP 支持在表单名称中使用数组表示法，因此如果在某些情况下不使用数组表示法，您可能会错过一个技巧。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-06-27T12:02:32.403

**jQuery 1.4**

```
var myform = $("book_form").serialize();

decodeURIComponent(myform); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-19T11:33:47.203

正常工作 jquery =>

```
var data = $('form').serialize();
            $.post(baseUrl+'/ajax.php',
                    {action:'saveData',data:data},
                    function( data ) {
                        alert(data);
                    }); 
```

php =>

```
parse_str($_POST['data'], $searcharray);
    echo ('<PRE>');print_r($searcharray);echo ('</PRE>'); 
```

输出 =>

```
[query] => 
[search_type] => 0
[motive_note] => 
[id_state] => 1
[sel_status] => Array
    (
        [8] => 0
        [7] => 1
    ) 
```

并且您可以对数组数据做任何您想做的事情，这要感谢[Aridane https://stackoverflow.com/questions/1792603](https://stackoverflow.com/a/11280554/1540635)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-20T09:21:36.410

谢谢托马拉克。

在 PHP 文件中，我现在使用以下代码：

```
while ($row = mysqli_fetch_assoc($result)) {
    extract($row);
    echo "<tr>";
        echo "<td bgcolor='#FFFFFF'><input id='$book_id' name='bookArray[]' type='checkbox' value='$book_id' />$book_id</td>";
        echo "<td bgcolor='#FFFFFF'>$book_name</td>";
    echo "</tr>";
} // while 
```

** book_id 是唯一的。

使用 tvanfosson 解决方案，现在我可以获得输入值数组

var selectedBooks = $('form#book_form').serialize(); 警报（选定的书籍）；

从警报消息框中，我得到 ==> bookArray%5B%5D=T2.05&bookArray%5B%5D=T2.81

现在，当我使用 JQuery 将序列化输入值发送到 PHP 文件时

```
var selectedBooks   = $('form#book_form').serialize();
alert (selectedBooks);

var url = 'saveBookList.php';

// Send to server using JQuery
$.post(url, {bookArray: selectedBooks}, function(responseData) {
    $("#save-result").text(responseData);
}); 
```

在 saveBookList.php 中处理序列化表单时，我收到此错误“为 foreach() 提供的参数无效”。

在 saveBookList.php 中，

```
// If you have selected from list box.
if(isset($_POST['bookArray'])) {

    // Get array or bookID selected by user
    $selectedBookId = $_POST['bookArray'];
    echo $selectedBookId;

    foreach($selectedBookId as $selectListItem) {
        echo "You sent this -->" . $selectListItem . "\n";
    }
} 
```

如果我使用 Prototype 发送，上面的 PHP 代码可以正常工作。

对于原型，当我回显 $selectedBookId;

我得到了数组。

对于 JQuery，当我回显 $selectedBookId;

我得到了 ==> bookArray%5B%5D=T4.11&bookArray%5B%5D=T4.38

我的问题，jQuery 是否支持 post 方法的数组值？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-10-10T00:32:52.940

这不是 jQuery Post 的问题，使用 serialize 你可以这样做：

```
 var my_query_str = ''; 
    $("input[@type='checkbox'][@name='books']").each( function() { 
       if(this.checked) { my_query_str += "&bookArray[]=" + this.value; } 
    }); 
   jQuery.post(
      "saveBookList.php",
      "dummy_data=a" + my_query_str ,
       function(responseData){   
          $("#save-result").empty().append(responseData); 
       }, 
       error: function() { 
            $("#save-result").append("An error occured during processing"); 
       }
   }); 
```

但你真正需要做的就是在序列化它们之后将'['＆']'替换回它们自己。因为序列化（）；将它们更改为它们的 htmlencoded 值！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-20T10:39:14.290

问题解决了！这就是我所做的。

在 PHP 文件中创建动态复选框行，

```
 while ($row = mysqli_fetch_assoc($result))
  {
   extract($row);
   echo "<tr>";
   echo "<td bgcolor='#FFFFFF'><input name='books' type='checkbox' value='$book_id' />$book_id</td>";
   echo "<td bgcolor='#FFFFFF'>$book_name</td>";
   echo "</tr>";
  } // while 
```

我不再使用 JQuery $.post 方法了。我将代码更改为以下

```
 var my_query_str = '';

$("input[@type='checkbox'][@name='books']").each(
  function()
  {
    if(this.checked)
    {
           my_query_str += "&bookArray[]=" + this.value;
    }
  });

$.ajax(
{
    type: "POST",
    url: "saveBookList.php",
    data: "dummy_data=a" + my_query_str,
    success:
        function(responseData)
        {
            $("#save-result").empty().append(responseData);
        },
    error:
        function()
        {
            $("#save-result").append("An error occured during processing");
        }
}); 
```

现在，在 saveBookList.php 页面中，$_POST['bookArray'] 的值是一个数组。耶！耶！

我确实希望并希望 JQuery 的 $.post 方法可以像 Prototype 一样支持数组数据类型。:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-20T07:20:37.513

您可能需要按照@Tomalak 的建议更改您的 PHP，但您还需要更改您的 javascript。要引用命名元素，请使用 #name 选择器：

```
var selectedbooks = $('form#book_form').serialize();; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-12-11T16:21:10.400

```
var data = $(form).serialize();
$.post('post.php', '&'+data); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-31T10:53:06.500

如果您必须只发布该数组而不是其他输入字段，这是一个干净而快速的解决方案：

```
var selectedbooks = $('book_form input[name^="bookArray["]').serialize();
alert (selectedbooks); 
```

解释：

选择器 ^= 选择 name 属性值以“bookArray”开头的所有元素，左方括号“[”确保元素是我们要序列化的数组，而不仅仅是以字符串“bookArray”开头的变量。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-04-14T16:15:36.330

你必须用这个替换左方括号和右方括号：

```
data: $(this).serialize().replace(/%5B/g, '[').replace(/%5D/g, ']'), 
```

# php - PHP在外部调用时无法打开本地文件

> ID：304526
> 
> 赞同：0
> 
> 时间：2008-11-20T07:05:08.793
> 
> 标签：php, curl

我在我正在开发的网站上使用 WorldPay 支付网关。它处理所有信用卡授权，然后在我的服务器上调用一个包含交易信息的 PHP 文件。它从我的脚本中获取输出并将其显示在 WorldPay chrome 中。

我不知道内部工作原理，但我想他们会使用类似于 cURL 的东西将事务详细信息发布到我的脚本，然后检索输出。

我的脚本将必要的信息写入一个 XML 文件，发送一封电子邮件，然后感谢客户与我们一起购物。

我的问题是，当我通过直接调用它来测试我的文件（通过关闭安全检查并`http://example.com/mysite/myscript.php`在我的浏览器中访问）时，一切都按计划进行，但是当我通过支付系统时（所以我假设我的脚本是通过调用cURL），它在这一行失败：

```
$xml = simplexml_load_file('./info.xml'); 
```

有任何想法吗？？

*澄清：该行返回**false**，这打破了以下行。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T09:11:33.920

检查您的 HTTP 错误日志——确保它们已打开。

这可能类似于读取文件权限问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T07:30:20.783

这可能是一个延伸，但请检查 php 与相对路径分辨率的第一个混淆。

```
'./' 
```

相对于入口点所在的位置，而不是脚本，这就是我使用的原因

```
dirname(__FILE__).'/' 
```

而是无处不在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T07:28:11.850

你确定路径`info.xml`正确吗？有时当我包含子目录中的文件时，这会让我感到困惑。

# ajax - 跨域ajax调用问题

> ID：304530
> 
> 赞同：2
> 
> 时间：2008-11-20T07:09:39.157
> 
> 标签：ajax, cross-domain

我有两台服务器一个主站点和一个静态服务器。我想在运行时从 ajax 获取文件的内容，该文件存储在静态服务器中。显然会出现跨域问题。

所以我想要做的是将 ajax .js 存储在静态服务器中，这样调用本地文件就不会成为问题。

但是在我从静态中包含那个js文件之后，这个问题仍然存在......

有什么解决办法吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-05-04T17:45:39.057

看看[EasyXDM](http://easyxdm.net/)。它是一个包装跨浏览器怪癖的库，并提供了一个易于使用的 API，用于使用该浏览器的最佳可用机制在不同域之间的客户端脚本中进行通信（例如[postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)如果可用，其他机制如果不可用）。

警告：您需要控制两个域才能使其正常工作（其中“控制”意味着您可以在两个域上放置静态文件）。但是您不需要任何服务器端代码更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T08:07:00.213

不要使用 X 域 Ajax 请求。在您自己的服务器（域）上创建一个“代理”，然后将呼叫转发到另一个域，缓存它，检查安全问题并将其再次发送回客户端......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-27T00:59:00.720

根据您希望 ajax 请求接收的信息，您始终可以使用类似 jsonp 的东西，它可以进行跨站点调用。

尝试在这里寻找一些例子： [http ://remysharp.com/2007/10/08/what-is-jsonp/](http://remysharp.com/2007/10/08/what-is-jsonp/)

# c++ - 有谁知道 C/C++ Unix 二维码库？

> ID：304537
> 
> 赞同：12
> 
> 时间：2008-11-20T07:14:26.730
> 
> 标签：c++, c, qr-code

我正在寻找 C/C++ 的二维码库，而不是 Java 或 .Net。有人知道吗？

注意：不久前有一个[类似的问题](https://stackoverflow.com/questions/231741/qr-code-2d-barcode-coding-and-decoding-algorithms)，但没有得到正确的回答。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-20T07:23:01.063

这个怎么样？

[http://megaui.net/fukuchi/works/qrencode/index.en.html](http://megaui.net/fukuchi/works/qrencode/index.en.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-14T12:27:59.397

[zxing 库](http://code.google.com/p/zxing)主要是 Java，但包括[QR 码检测器和解码器到 C++ 的端口](http://code.google.com/p/zxing/source/browse/#svn/trunk/cpp)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-02-08T23:35:24.833

查看我的 Psytec QR 图像生成器的广泛跨平台 C 端口 [https://github.com/swex/QR-Image-embedded](https://github.com/swex/QR-Image-embedded)

# sql - SQLite 是否支持 SCOPE_IDENTITY？

> ID：304543
> 
> 赞同：22
> 
> 时间：2008-11-20T07:19:57.967
> 
> 标签：sql, sqlite

我正在尝试执行一个简单的 INSERT 并返回标识（自动递增主键）。我试过了

```
cmd.CommandText = "INSERT INTO Prototype ( ParentID ) VALUES ( NULL ); SELECT SCOPE_IDENTITY();"; 
```

我收到以下错误

```
环境错误：SQLite 错误
没有这样的功能：SCOPE_IDENTITY
```

SQLite 是否支持 SCOPE_IDENTITY？
如果是这样，我该如何使用它？
如果不是，我的（最好是“线程安全的”）替代方案是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-28T13:22:30.777

如果您不使用 C 接口进行编程并且想从 SQL 命令执行该过程，请尝试：`SELECT last_insert_rowid()`

[http://www.sqlite.org/lang_corefunc.html](http://www.sqlite.org/lang_corefunc.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-11-20T07:38:33.187

查看[常见问题解答](http://www.sqlite.org/faq.html#q1)。[sqlite3_last_insert_rowid()](http://www.sqlite.org/c3ref/last_insert_rowid.html)函数会做到这一点。不过要小心触发器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-11T03:07:49.573

`last_insert_rowid()`来自最后一个插入 ANY 表的行 ID 中的结果。绝对不是其他答案中提到的线程安全。

如果您绝对*需要*确保返回正确的行 ID，无论线程、异步等如何（例如，如果您打算将 rowid 用作另一个表中的外键），这里有一种方法：

1.  在所需的表中插入一个文本列（这将包含一个 GUID）
2.  手动生成 GUID（使用您的语言中可用的任何库）并将其保存在内存中
3.  将数据与刚刚生成的 GUID 一起插入表中
4.  通过检索（假定的）rowid`last_insert_rowid()`
5.  使用此 rowid 从表中检索行（或仅 GUID）
6.  将检索到的行中的 GUID 与内存中的 GUID 进行比较
    *   if they are the same, happy days, you have the correct rowid
    *   if they are different, you need to query the table for a match to the GUID you have in memory for the correct rowid

Obviously this solution has considerable performance drawbacks and you need to make a judgement call on whether the risks of mismatched data outweigh the performance toll. In my case, I needed to be certain of the integrity of my data above all else so it was fine for performance to take the hit. (Just how big a hit, I can't say.)

You might get the urge to skip the 4th and 5th steps and get the rowid using your GUID; you might also get the urge to just use the GUID as the primary identifier and foreign key. After all these *would* make the code simpler and mean less columns in your table... RESIST THAT URGE. Integers as primary identifiers are easily indexable which makes them faster/more efficient in WHERE clauses and JOINS; a GUID or string just doesn't index as well as an integer.

# delphi - Delphi 中的自旋控制

> ID：304550
> 
> 赞同：3
> 
> 时间：2008-11-20T07:23:29.643
> 
> 标签：delphi, controls

我想在我的 Delphi Win 32 应用程序（我使用的是 Delphi 2007）中使用“旋转按钮控件”（也称为上下控件）。

目的是拥有一个类似于 Microsoft Office 的控件：

[Powerpoint 中向上/向下控制的图像。http://img167.imageshack.us/my.php?image=updownzn8.png](http://img167.imageshack.us/my.php?image=updownzn8.png)

我在 Microsoft 网站上找到了这个：[CSpinButtonCtrl 类](http://msdn.microsoft.com/de-de/library/sfac27cz(VS.80).aspx)

但是到目前为止，我还没有找到使用此类的控件-这是我一直在搜索的地方：

*   Delphi中的SpinEdit控件看起来不错……不太好，而且好像没有用微软官方的控件
*   JVCL 类有自己的实现
*   谷歌搜索没有返回任何结果（除了一些自制的向上/向下控件）
*   我在 Jedi API 中也找不到东西

有人可以指出我在哪里可以找到 Microsoft 的通用旋转控件的 Delphi 实现，或者我自己如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-20T07:51:22.083

看看 TUpDown。它包装了 Win32 控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-13T03:48:16.850

Raize Components [Raize.com](http://www.raize.com)有一个不错的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-13T09:07:37.377

[TMS Software](http://tmssoftware.com)提供了广泛的组件，包括旋转编辑（喜欢 iPhone 风格的！），我发现他们通过新闻组提供的支持非常好。

# linux - Linux下的MASM？

> ID：304555
> 
> 赞同：15
> 
> 时间：2008-11-20T07:27:04.457
> 
> 标签：linux, masm

有没有办法让我在 Linux 下使用[MASM 。](http://en.wikipedia.org/wiki/Microsoft_Macro_Assembler)即使是坚韧的 NASM 在 Linux 下也很流行，但对于代码的某些指令风格来说，它仍然存在差异。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-20T07:34:16.347

维基说

> MASM32 EULA 不允许在开源软件的开发中使用，只允许在 Windows 操作系统中运行。

所以这是一个不。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-02-20T15:34:22.407

我使用 DosBox，它对我来说确实很好用。

详情[在这里](http://web.archive.org/web/20141115062140/http://www.prashanthpai.com/blog/run-masm-8086-assembler-in-ubuntu-or-windows-7x64-using-dosbox/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-20T07:41:34.740

您应该能够在[Wine](http://www.winehq.org/)下运行 MASM 。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-10-03T02:06:01.547

MASM 不与 WINE 一起运行，我在 Virtual Box 下运行 MASM

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-20T07:50:09.747

我个人更喜欢 NASM 风格，但您可能可以在 Wine 下运行 MASM（或者在 VM 中失败）。毕竟它不应该需要任何外来的 API 调用。

我已经能够在 Linux 上的 Wine 下运行 Win32 NASM 二进制文件而没有任何问题[长篇大论，没有网络连接]。

如果您想将 Microsoft 的 OMF 二进制格式转换为 ELF，那么您应该能够使用`objcopy`.，但您可能需要编译以支持正确的对象格式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-10-12T13:42:04.860

在 Wine 下运行 MASM 或在 wiki 上查看 MASM 只能在 Windows 上运行。

问候。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-01T16:49:35.513

MASM 的替代品是[UASM](http://www.terraspace.co.uk/uasm.html)。

UASM 是基于 JWasm 的免费 MASM 兼容汇编程序。

它适用于创建通用 Linux 二进制文件。但是，UASM 无法使用需要 -fPIC 选项的共享对象。

# unicode - 克林贡语有没有好的 K++ Kode 编辑器？

> ID：304564
> 
> 赞同：14
> 
> 时间：2008-11-20T07:30:53.310
> 
> 标签：unicode, editor

好的，我知道这是一个奇怪的问题，但是对于克林贡字母表有一个“标准”（至少是粉丝方面的）Unicode 支持，并且由于可以毫无问题地用 Unicode 编写代码，这意味着可以编写带有克林贡标记（变量、函数名等）的 Kode。

作为记录，我用日语编写了 C++ 并且它可以工作，所以克林贡语中的 K++ 也应该可以工作。但我不知道有任何支持克林贡语的文本编辑器。有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-20T07:36:26.047

不太可能，尤其是当您考虑[编写完美代码的克林贡指南第 9 条时](http://www.aumha.org/a/klingon.php)

> “缩进？！当我缩进你的头骨时，我会教你如何缩进！”</p>

而 7 号对于任何编辑来说都不是好兆头：

> “克林贡函数调用没有“参数”。他们有“论据”。. . 他们总是能赢！”</p>

`[`说真的，这是一个有趣的[Unicode 编辑器问题](http://www.oocities.org/harry_robinson_testing/klingon.htm)`]`

![替代文字](https://i.stack.imgur.com/OT01m.gif)

毕竟，iTunes 有克林贡语的许可协议！

![iTunes 许可证](https://i.stack.imgur.com/K5DER.png)

你需要正确的键盘，当然 \o/

![键盘克林贡语 i.telegraph.co.uk/multimedia/archive/01239/kling_1239147c.jpg](https://i.stack.imgur.com/fxkWH.jpg)

现在......也许你可以尝试“谷歌”;-)

![克林贡谷歌](https://i.stack.imgur.com/WzxkA.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-20T07:47:12.467

> 第一：“我们的用户会在我们的软件之前知道恐惧和畏缩！装运它！运送它，让他们像狗一样逃跑！”</p>

猜猜那里的克林贡程序员比你想象的要多得多......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-25T23:26:12.010

Cherry 制造了一个克林贡键盘：

[http://www.cherrykeyboardsrus.co.uk/Klingon+Language-Details.htm](http://www.cherrykeyboardsrus.co.uk/Klingon+Language-Details.htm)

而且，从新闻稿中：

“Cherry 推出了克林贡语个人计算机 (PC) 键盘，使用户能够在运行 Windows、OS-X (Mac) 或 Linux 的计算机上使用克林贡语和字体。根据克林贡帝国外交使团的 Stalker Zantai Subaiesh 总理的说法在地球上，“PC 用户现在将能够直接在克林贡语中工作，并与商业克林贡语系统无缝对接，将人类和克林贡语文化更加紧密地结合在一起。”

Cherry Electrical Products 的总经理 Michael Groom 评论说：“克林贡键盘是为所有联邦文化提供 PC 输入设备的第一步，它将有助于地球与联邦内不属于星际舰队指挥范围的其他文化之间的通信. 当然，这款键盘展示了我们提供定制键盘设计、键帽和布局的能力——无论是在这个星球上还是在宇宙的其他地方！” 该设备是各种 Cherry 键盘的一部分，其主要特点是节省空间、设计紧凑、使用寿命长且操作舒适。它也是回收友好的。键盘还提供统一的开关特性，并带有耐磨的键帽铭文。

选项包括智能卡和/或指纹识别支持、单个按键提供超过 5000 万次操作的长寿命版本、薄型键盘、集成 USB 集线器、触摸板、条形码解码器和可书写按键等。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-28T15:50:19.990

[重要的](http://ttp://code.google.com/p/googleappengine/issues/detail?id=2134)明显支持：克林贡语

> （没有用 unicode 2000 拒绝支持彗星、雪人、4 剪刀等） gra...@gmail.com 的评论 1，2009 年 9 月 22 日 我们如何在没有克林贡语支持的情况下使用应用程序引擎？:( 评论 2 ，今天（27 分钟前）从图像文件中恢复克林贡字体将对用户起作用，非常怀疑工程是否可行。标志有不同的大小。我们可以同意为克林贡语提供动态图像。评论 3 ，今天（18 分钟前） )

知识库 [http://std.dkuug.dk/jtc1/sc2/wg2/docs/n1643/n1643.htm](http://std.dkuug.dk/jtc1/sc2/wg2/docs/n1643/n1643.htm) [http://wazu.jp/gallery/Test_Klingon.html](http://wazu.jp/gallery/Test_Klingon.html) [http://www.evertype.com/standards/csur /klingon.html](http://www.evertype.com/standards/csur/klingon.html)

# jboss - 如何将接缝集成到现有项目中。或者反过来

> ID：304565
> 
> 赞同：1
> 
> 时间：2008-11-20T07:31:27.007
> 
> 标签：jboss, seam

有没有关于将 jBoss seam 引入旧的 Hibernate/JSF 项目的文档？

试过谷歌，我发现是：启动新的接缝项目，将现有代码复制并粘贴到新项目中。在开始之前多了解一点会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-24T00:11:08.893

最好的方法可能是将 Seam 库添加到您现有的项目中，然后逐步重构您的代码以利用 Seam 的功能。为此，请[通读 Seam 手册](http://docs.jboss.com/seam/2.1.1.GA/reference/en-US/html/)并为每个 Seam 功能重构代码，以简化 JSF 方法。这包括以下内容：

*   将你的 JSF 动作监听器类变成[Seam 组件](http://docs.jboss.com/seam/2.1.1.GA/reference/en-US/html/concepts.html#d0e3698)（即添加一个注解）
*   合并动作监听器和 EJB 类（动作监听器可以是 Seam 中的 EJB）
*   注入一个[Seam 管理的持久化上下文](http://docs.jboss.com/seam/2.1.1.GA/reference/en-US/html/persistence.html#persistence.seam-managed-persistence-contexts)而不是你现有的 Hibernate 会话
*   [使用Seam 导航语法](http://docs.jboss.com/seam/2.1.1.GA/reference/en-US/html/events.html#events.pageaction.navigation)简化页面导航规则
*   如果您仍在使用 JSP，请将视图迁移到 Facelets。

基本上，Seam 可能会给你很多方法来简化你现有的代码，所以一次应用一个来看看它们是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-11T14:12:10.873

这似乎是解决方案的一部分：

[http://www.mastertheboss.com/en/seam/63-jboss-seam-tutorial-1.html](http://www.mastertheboss.com/en/seam/63-jboss-seam-tutorial-1.html)

# python - 让 TRAC 在 IIS7 上运行

> ID：304567
> 
> 赞同：1
> 
> 时间：2008-11-20T07:33:39.250
> 
> 标签：python, iis, trac

我试图使用这个常见问题解答 Trac upp 并在我的 IIS/w2008 服务器上运行：[TracOnWindowsIisAjp](http://trac.edgewall.org/wiki/TracOnWindowsIisAjp)

直到“3\. 为 IIS 安装 Tomcat AJP 连接器”之前的一切都可以正常工作。然后我将我的目录定义为：C:\wwwroot\trac.evju.biz\AJP\，在 bin 目录中我放置 dll 文件和 3 个具有此内容的配置文件：

isapi_redirect-1.2.26.properties # ISAPI 重定向器的配置文件

```
# The path to the ISAPI Redirector Extension, relative to the website
# This must be in a virtual directory with execute privileges
extension_uri=/AJP/isapi_redirect-1.2.26.dll

# Full path to the log file for the ISAPI Redirector
log_file=C:\wwwroot\trac.evju.biz\AJP\logs\isapi_redirect.log

# Log level (debug, info, warn, error or trace)
log_level=info

# Full path to the workers.properties file
worker_file=C:\wwwroot\trac.evju.biz\AJP\conf\workers.properties

# Full path to the uriworkermap.properties file
worker_mount_file=C:\wwwroot\trac.evju.biz\AJP\conf\uriworkermap.properties 
```

worker.properties

```
# Define 1 real worker
worker.list=trac
# Set properties for trac (ajp13)
worker.trac.type=ajp13
worker.trac.host=localhost
worker.trac.port=8009
worker.trac.socket_keepalive=0 
```

uriworkermap.properties

```
/C:\wwwroot\trac.evju.biz\irm\*=trac 
```

然后我遇到了问题：

*   定义一个名为 AJP-Connector 的虚拟目录，指向您的 bin 子目录，具有执行可执行文件（不仅是脚本）的权限。

我定义了一个名为 AJP 的虚拟目录，将其指向 bin 子目录，但我找不到任何方式赋予它执行权限

其余的说明显然并不完全适用于 IIS7

*   允许将 DLL 作为 Web 服务扩展执行
*   在 IIS 管理器中，打开 Web 服务扩展。
*   定义一个名为 AJP-Connector（或任何您想要的）的新 Web 服务扩展。
*   将 C:\AJP-Connector\bin\isapi_redirect-1.2.26.dll 添加到所需文件中（将“C:\AJP-Connector”替换为您的实际目录）。
*   将扩展程序状态设置为允许。

我尝试将 dll 添加为 ISAPI 扩展，这导致 bin 目录中的 web.config 文件具有以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <handlers accessPolicy="Read, Execute, Script">
            <remove name="ISAPI-dll" />
            <add name="AJP" path="*.ajp" verb="*" modules="IsapiModule" scriptProcessor="C:\wwwroot\trac.evju.biz\AJP\bin\isapi_redirect-1.2.26.dll" resourceType="Unspecified" requireAccess="Execute" />
        </handlers>
    </system.webServer>
</configuration> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-17T02:30:03.830

@Jeff Mc - 我实际上正在考虑在 IIS7 上设置 trac 并偶然发现了这个线程，就像你一样。我很想知道在 IIS7 上使用 FastCGI 以及任何其他带有 trac 的陷阱的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-16T04:58:07.683

刚刚从不相关的谷歌搜索中偶然发现了这个问题。奇怪的是怎么发生的...... IIS7 本身支持 FastCGI，我强烈建议在 AJP 上使用它。如果您仍在观看此问题，请发表评论，我将跟进如何安装的详细信息。

# asp.net-mvc - Linq to SQL 更新不使用存储库模式工作

> ID：304570
> 
> 赞同：5
> 
> 时间：2008-11-20T07:36:32.643
> 
> 标签：asp.net-mvc, linq, linq-to-sql

我正在将 asp.net mvc 用于应用程序。我从 Rob Conery 的 MVC 店面系列中获得了一些指导。我使用的数据访问模式与他在店面中使用的模式非常相似。

但是，我在模式中添加了一个小的差异。我在模型中创建的每个类都有一个名为 IsNew 的属性。这样做的目的是让我指定是否应该在数据库中插入或更新。

这是一些代码：

在我的控制器中：

```
OrderService orderService = new OrderService();
Order dbOrder = orderService.GetOrder(ID);

if (ModelState.IsValid)
{
    dbOrder.SomeField1 = "Whatever1";
    dbOrder.SomeField2 = "Whatever2";
    dbOrder.DateModified = DateTime.Now;
    dbOrder.IsNew = false;

    orderService.SaveOrder(dbOrder);
} 
```

然后在 SQLOrderRepository 中：

```
public void SaveOrder(Order order)
{
    ORDER dbOrder = new ORDER();

    dbOrder.O_ID = order.ID;
    dbOrder.O_SomeField1 = order.SomeField1;
    dbOrder.O_SomeField2 = order.SomeField2;
    dbOrder.O_DateCreated = order.DateCreated;
    dbOrder.O_DateModified = order.DateModified;

    if (order.IsNew)
        db.ORDERs.InsertOnSubmit(dbOrder);

    db.SubmitChanges();
} 
```

如果我更改控制器代码以使 dbOrder.IsNew = true; 然后代码工作，并且正确插入了值。

但是，如果我设置 dbOrder.IsNew = false; 然后什么都没有发生......没有错误 - 它只是不更新​​订单。

我在这里使用 DebuggerWriter：[http](http://www.u2u.info/Blogs/Kris/Lists/Posts/Post.aspx?ID=11) ://www.u2u.info/Blogs/Kris/Lists/Posts/Post.aspx?ID= 11 来跟踪正在生成的 SQL，并且正如预期的那样，当 IsNew 值为 true 时, Insert SQL 生成并正确执行。但是，当 IsNew 设置为 false 时，似乎没有生成 SQL，因此没有执行任何操作。

我已经验证这里的问题（[LINQ 没有在 .SubmitChanges() 上更新](https://stackoverflow.com/questions/206532/linq-not-updating-on-submitchanges)）不是问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-20T07:54:47.023

在您的 SaveOrder 方法中，您总是在创建一个新的 ORDER 对象。您需要更改它，以便如果 order.IsNew 为 false，它会从数据库中检索现有的并更新它。

```
public void SaveOrder(Order order)
{
    ORDER dbOrder;
    if (order.IsNew)
    {
        dbOrder = new ORDER();
        dbOrder.O_ID = order.ID;
    }
    else
    {
        dbOrder = (from o in db.ORDERS where o.O_ID == order.ID select o).Single();
    }

    dbOrder.O_SomeField1 = order.SomeField1;
    dbOrder.O_SomeField2 = order.SomeField2;
    dbOrder.O_DateCreated = order.DateCreated;
    dbOrder.O_DateModified = order.DateModified;

    if (order.IsNew)
        db.ORDERs.InsertOnSubmit(dbOrder);

    db.SubmitChanges();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T07:57:28.593

我认为您遇到的问题是您的实体与您的上下文分离。

如果您想更新，您应该尝试将您的实体附加到您的上下文中。LINQtoSQL 的缺点是，对于重新连接，您需要对象在分离时的原始状态......

另一种解决方案是从上下文中重新获取您的实体，并从参数中的实体复制所有数据。这将一直持续到您拥有更复杂的实体为止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T20:31:20.273

tvanfosson 所说的。

我只想补充一点，如果 Id 等于默认值（如果使用 guid，则为 0 或空），我使用逻辑，那么我假设它是新的。否则，如果我传入了 id，那么我将获取现有对象并对其进行更新。

# variables - 一个变量可以有多个值吗

> ID：304576
> 
> 赞同：2
> 
> 时间：2008-11-20T07:42:00.527
> 
> 标签：variables

在代数中，如果我声明 x + y = 3，我使用的变量将保存值 2 和 1 或 1 和 2。我知道编程中的赋值不是一回事，但我想知道。如果我想表示一个量子怪异粒子的值，我希望我的变量同时具有两个值，然后让它分解为一个或另一个。或者我只是在做梦？

可以说类似的话`i = 3 or 2;`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-20T08:07:21.053

这是为 Perl 6（联结）计划的功能之一，其语法应如下所示`my $a = 1|2|3`；

如果曾经实施，它将直观地工作，就像`$a==1`同时为真`$a==2`。此外，例如，`$a+1`会给你一个值`2|3|4`。

这个特性实际上在 Perl5 中也可以通过[Perl6::Junction](http://search.cpan.org/~cfranks/Perl6-Junction-1.40000/lib/Perl6/Junction.pm)和[Quantum::Superpositions](http://search.cpan.org/~dconway/Quantum-Superpositions-1.03/lib/Quantum/Superpositions.pm)模块使用，但没有语法糖（通过 'functions'`all`和`any`）。

至少为了比较 ( `b < any(1,2,3)`) 它也可以在 Microsoft [Cω](http://research.microsoft.com/Comega/)实验语言中使用，但是它没有在任何地方记录（我只是在查看 Cω 时尝试过它，它确实有效）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-20T07:46:37.913

您不能使用本机类型执行此操作，但没有什么能阻止您创建一个变量对象（假设您使用的是 OO 语言），该对象具有一系列值甚至是概率密度函数而不是实际值。

您还需要定义变量与变量和本机标量之间的所有数学运算符。相等和赋值运算符也是如此。

numpy 数组对向量和矩阵执行类似的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T08:06:15.300

Damien Conways Quantum::Superpositions 可以做你想做的事，

[https://metacpan.org/pod/Quantum::Superpositions](https://metacpan.org/pod/Quantum::Superpositions)

但是，您可能需要您的裂纹管。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-20T08:40:59.143

这也是你可以在 Prolog 中做的事情。您定义约束变量的规则，然后让 Prolog 解决它们......

习惯它需要一些时间，但是一旦你知道如何使用它，它对于某些问题来说是很棒的......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T07:55:01.763

您要问的似乎是如何实现[模糊逻辑](http://en.wikipedia.org/wiki/Fuzzy_logic)系统。这些已经存在了一段时间，毫无疑问，您可以很容易地为常用编程语言挑选一个库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T07:46:20.940

您可以使用结构并手动处理操作。否则，没有一个变量一次只有 1 个值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-20T07:47:15.150

变量只不过是内存中的地址。这意味着一个变量恰好描述了内存中的一个位置（长度取决于类型）。因此，只要我们没有“量子记忆”（而且我们没有，而且看起来我们在不久的将来不会拥有它），答案就是“**否**” 。如果您想对此行为进行编程和建模，您的方法是使用一个数组（长度等于最大多个值的数量）。随之而来的是增加的运行时间，因此必须对每个值进行计算（例如 x+y，必须使用 2 个不同的值 x1+y1、x2+y2、x1+y2 和 x2+y1 进行计算）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-20T07:51:52.333

在 Perl 中，您可以 . 如果你使用[Scalar::Util](http://perldoc.perl.org/Scalar/Util.html)，你可以让一个 var 取 2 个值。如果在字符串上下文中使用一个，如果在数字上下文中使用另一个。

# genetic-algorithm - 您是否曾经在实际应用中使用过遗传算法？

> ID：304580
> 
> 赞同：39
> 
> 时间：2008-11-20T07:47:04.603
> 
> 标签：genetic-algorithm

我想知道在商业代码中找到遗传算法方法有多普遍。

在我看来，某些调度程序可以从 GA 引擎中受益，作为主要算法的补充。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-23T06:55:38.950

遗传算法已在商业上广泛使用。优化火车路线是一个早期的应用。最近，战斗机使用 GA 来优化机翼设计。我在工作中广泛使用 GA 来生成具有极大搜索空间的问题的解决方案。

许多问题不太可能从 GA 中受益。我不同意托马斯的观点，他们太难理解了。GA 实际上非常简单。我们发现，通过将 GA 优化到可能很困难的特定问题可以获得大量知识，并且一如既往地管理大量并行计算仍然是许多程序员的问题。

可以从 GA 中受益的问题将具有以下特征：

*   编码潜在解决方案的好方法
*   一种计算数值分数以评估解决方案质量的方法
*   答案不明显的大型多维搜索空间
*   好的解决方案就足够了，不需要完美的解决方案

有许多问题可能会从 GA 中受益，并且在未来它们可能会得到更广泛的部署。我相信 GA 在尖端工程中的使用比人们想象的要多，但是大多数人（就像我的公司一样）非常严密地保护着这些秘密。不久之后，才发现使用了 GA。

大多数处理“普通”应用程序的人可能对它们没有太多用处。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-20T07:59:19.540

如果您想找到一个示例，请查看 Postgres 的 Query Planner。它使用了许多技术，其中一种恰好是遗传的。

[http://developer.postgresql.org/pgdocs/postgres/geqo-pg-intro.html](http://developer.postgresql.org/pgdocs/postgres/geqo-pg-intro.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-20T08:01:51.500

我在硕士论文中使用了 GA，但在那之后，我在日常工作中没有发现任何 GA 可以解决的问题，而我无法用其他算法更快地解决。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-20T07:53:00.677

我没有，但我听说过这家公司（不记得他们的名字），它使用变异的遗传算法从我的朋友那里计算天线（或其他东西）的位置和长度。他们应该（据我的朋友说）在这方面取得了巨大的成功。我想 GA 对于“普通的 Joe 开发人员”来说太复杂了，无法成为主流。有点像 Map Reduce - 非常酷，但太先进了，无法进入“主流”......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-20T13:12:00.230

我认为在日常商业代码中找到遗传算法并不常见。它们更常见于学术/研究代码中，在这些代码中，找到“最佳算法”的需求不如找到问题的好解决方案的需求重要。

尽管如此，我还是咨询了几个使用 GA 的商业项目（主要是因为我参与了[GAUL](http://gaul.sourceforge.net)）。我认为最有趣的例子是在一家生物技术公司。作为药物发现应用程序的一部分，他们使用 GA 优化了用于虚拟筛选的评分函数。

今年早些时候，在我[现在的公司](http://www.medit-pharma.com/)，我为我们的一个产品添加了一项新功能，该产品使用另一个 GA。我想我们可能会从下个月开始营销这个。基本上，GA 用于探索具有与蛋白质结合潜力的分子，因此可以作为靶向该蛋白质的药物进行进一步研究。也使用 GA 的竞争产品是[EA 发明者](http://tripos.com/index.php?family=modules,SimplePage,sybyl_eainventor)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-12-31T12:29:10.100

As part of my thesis I wrote a generic java framework for the multi-objective optimisation algorithm mPOEMS (Multiobjective prototype optimization with evolved improvement steps), which is a GA using evolutionary concepts. It is generic in a way that all problem-independent parts have been separated from the problem-dependent parts, and an interface is povided to use the framework with only adding the problem-dependent parts. Thus one who wants to use the algorithm does not have to begin from zero, and it facilitates work a lot.

[你可以在这里](http://code.google.com/p/mpoems-in-java/)找到代码。

您可以使用此算法找到的解决方案已在科学工作中与最先进的算法 SPEA-2 和 NSGA 进行了比较，并且已证明该算法的性能相当甚至更好，具体取决于您的指标采取措施来衡量性能，尤其是取决于您正在寻找的优化问题。

你可以在[这里](http://www.sciencedirect.com/science?_ob=ArticleURL&_udi=B6W86-506J0FF-1&_user=10&_coverDate=01/31/2011&_rdoc=1&_fmt=high&_orig=search&_origin=search&_sort=d&_docanchor=&view=c&_searchStrId=1592523780&_rerunOrigin=scholar.google&_acct=C000050221&_version=1&_urlVersion=0&_userid=10&md5=b186457829f2884fb8a724ae25df4398&searchtype=a)找到它。

此外，作为我的论文和工作证明的一部分，我将这个框架应用于投资组合管理中的项目选择问题。它是关于选择最能为公司增加价值、最支持公司战略或支持任何其他任意目标的项目。例如，从特定类别中选择一定数量的项目，或最大化项目协同效应，...

我的论文将此框架应用于项目选择问题： [http ://www.ub.tuwien.ac.at/dipl/2008/AC05038968.pdf](http://www.ub.tuwien.ac.at/dipl/2008/AC05038968.pdf)

之后，我在财富 500 强之一的投资组合管理部门工作，他们使用商业软件，该软件也将 GA 应用于项目选择问题/投资组合优化。

更多资源：

框架的文档：http: [//thomaskremmel.com/mpoems/mpoems_in_java_documentation.pdf](http://thomaskremmel.com/mpoems/mpoems_in_java_documentation.pdf)

mPOEMS 演示文稿： [http ://portal.acm.org/citation.cfm?id=1792634.1792653](http://portal.acm.org/citation.cfm?id=1792634.1792653)

实际上，只要有一点热情，每个人都可以轻松地将通用框架的代码改编为任意多目标优化问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-06T15:53:09.357

LibreOffice Calc 在其 Solver 模块中使用它。

# c++ - 类似 Hibernate 的 C++ 框架

> ID：304587
> 
> 赞同：22
> 
> 时间：2008-11-20T07:52:05.157
> 
> 标签：c++, database, hibernate, caching

我正在寻找提供以下内容的 C++ 数据库缓存框架：

*   通过一些伪语言（宏/模板）生成对象/表表示
*   需要时按键从数据库中检索对象
*   LRU 缓存
*   在对象更新时立即和延迟更新数据库（通过 getter/setter 方法）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-22T10:28:20.053

试试[LiteSQL](http://litesql.sourceforge.net/)和[Hiberlite](http://code.google.com/p/hiberlite/)，看看它们是否对你有用。

# jsp - Action 和 Jsp 获取迭代器并显示

> ID：304595
> 
> 赞同：1
> 
> 时间：2008-11-20T07:56:22.933
> 
> 标签：jsp, struts

这是我的行动课

```
public Iterator<CgConsultant> getSearchresult() {

        List<CgConsultant> list =userSearch.getConsultantMatches(searchstring);
        System.out.println("The size of the resutl list:"+list.size());
        Iterator<CgConsultant> iterator = list.iterator();
        CgConsultant obj;
        while(iterator.hasNext()){
            obj = (CgConsultant)iterator.next();
            System.out.println(obj.getUsername());
            System.out.println(obj.getFirstName());
            System.out.println(obj.getLastName());
        }
        return iterator;
    } 
```

我必须在jsp中填充数据并在jsp中显示

我得到了返回状态，但是如何填充数据并显示它..

这是我的jsp

```
<head>
    <title><fmt:message key="signup.title"/></title>
    <meta name="heading" content="<fmt:message key='signup.heading'/>"/>
</head>

<body>

        <h1> Search Complete</h1>
        <h2> Details are..</h2><br>

        <s:property value="Searchresult"/>

</body>
</html> 
```

请指定任何建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-20T08:01:22.097

Taglib c 是[http://java.sun.com/jsp/jstl/core](http://java.sun.com/jsp/jstl/core)

```
 <c:forEach items="${Searchresult}" var="cgConsultant">
                    <c:out value="${cgConsultant.username}"/>
                    <c:out value="${cgConsultant.firstName}"/>
                    <c:out value="${cgConsultant.lastNameName}"/>
            </c:forEach> 
```

添加一些漂亮的html

# plsql - 如何使Oracle过程返回结果集

> ID：304600
> 
> 赞同：1
> 
> 时间：2008-11-20T08:01:38.850
> 
> 标签：plsql

SQL Server 过程可以返回结果集。我有一个表**emp(emp__id, emp__name, ...)**。下面的过程将返回与提供的名称匹配的员工列表。

```
CREATE OR REPLACE PROCEDURE get_employee_by_name ( @name VARCHAR(100) )
AS
SELECT emp_id, emp_name
FROM emp
WHERE emp_name = @name; 
```

所以在客户端代码中，我使用 ADO.NET 来获取数据。

```
SQLDataAdapter adapter = new SQLDataAdapter("get_employee_by_name", cnString);
SQLDataAdapter.SelectCommand.CommandType = CommandType.StoredProcedure;
DataTable dt = new DataTable("employee");

adapter.Fill(dt); 
```

如何在 PL/SQL 中进行等效编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T08:50:15.973

为存储过程使用 Ref 光标：
[http ://www.oradev.com/ref_cursor.jsp](http://www.oradev.com/ref_cursor.jsp)

对于客户端部分，请使用 Oracle 数据提供程序。您可以从 Oracle 下载它，语法类似于 SQLDataAdapter。像这样的东西：

```
OracleDataAdapter da = new OracleDataAdapter();
da.SelectCommand = new OracleCommand("get_employee_by_name", Connection);
OracleParameter prm = da.SelectCommand.Parameters.Add("pName", OracleDbType.VarChar2);
prm.Direction = ParameterDirection.Input;
prm.Value = "MyName";
prm = da.SelectCommand.Parameters.Add("pResult", OracleDbType.RefCursor);
prm.Direction = ParameterDirection.Output;
DataTable dt = new DataTable();
da.Fill(dt); 
```

# makefile - stange -I 效果与 make 和 bad -L

> ID：304603
> 
> 赞同：0
> 
> 时间：2008-11-20T08:02:31.080
> 
> 标签：makefile

我正在尝试构建一个自动构建系统。我花了一点时间将一个工作的wii通用makefile更改为一个工作的win32（使用mingw32）makefile。

我的品牌在这里[http://pastie.org/319482](http://pastie.org/319482)

奇怪的效果是，如果我删除了 ABS_INCL（第 31 行）中路径之前的 a，则构建不起作用并抱怨缺少第一个路径指定的标头。为什么要这样做？我无法追踪问题。

下一个问题是当我放入需要 libcurl 的代码时，我仍然可以编译但不再按预期链接。我将 curl 添加到我的库（第 47 行）和路径（第 53 行）中，看起来我正确地包含它并且库的顺序正确（我在将 wii 转换为 win32 时尝试尽可能少地触摸）和我看不到问题。有谁知道为什么会这样？

这是用于测试的简单来源

```
#include <stdio.h>
void main2();
int main( int argc, const char* argv[])
{
    int a=0;
    printf("hey");
    main2();
    return 0;
}
#include <curl/curl.h>
void main2()
{
    CURL *curl = curl_easy_init();
    curl_easy_cleanup(curl);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T08:34:32.810

你在这里没有得到很多答案 - 我要出去告诉你这是因为你的标题写得非常糟糕。当它向下滚动主页时​​，我可能已经阅读了 20 次，但我仍然没有真正理解它。有一个明显的拼写错误，我想进去修复它，但是“-l”和“-L”的整个奇怪之处，我不知道你要去哪里。

因此，大多数人会看到这一点，然后空白并继续前进。假设他们过去了，您未能将 makefile 中包含的有用信息添加到问题中，因此您必须离开并在其他站点上阅读它。

最后，作为另一个障碍，您的 makefile 太长而难以阅读和吸收。所以假设像我这样有决心的人去读它，很难说问题出在哪里。您需要将其编辑到大概十行或更少，然后假设您无法找出问题所在，然后您可以只发布在您的问题中显示问题的那几行，然后加上一个体面的标题和一些好的描述性文字，你可能会得到你的答案。

我猜你的问题的答案甚至没有那么难，你已经成功地将它混淆到大多数人甚至不会打扰的地步。

# c# - 使用 -=-Operator 取消注册事件

> ID：304606
> 
> 赞同：0
> 
> 时间：2008-11-20T08:05:26.377
> 
> 标签：c#, winforms, events, event-handling

当打开一个窗口时，我在我的业务对象上注册了一个 Deleted-event-handler。它被传递给构造函数`business`：

```
business.Deleted += new EventHandler<EventArgs>(business_Deleted); 
```

现在用户可以单击一个按钮来删除它（删除记录，你知道的）。注册事件处理程序以捕获其他编辑器窗口的删除并通知用户（“项目已在另一个编辑器窗口中删除。”）。

如果用户在当前窗口中将其删除，则此消息将是愚蠢的，因此我想在此之前取消注册该事件：

```
Business business = (Business)businessBindingSource.DataSource;
business.Deleted -= new EventHandler<EventArgs>(business_Deleted); 
```

我的问题很简单：无论如何都会显示该消息，因此取消注册不起作用。我尝试将 EventHandler 存储在一个单独的成员中。也不行。

任何帮助都会很酷。

马蒂亚斯

PS阅读[这篇文章](https://stackoverflow.com/questions/99790/is-it-safe-to-add-delegates-to-events-with-keyword-new#100719)，我担心正确取消注册事件可能会使它在所有编辑器窗口中取消注册。可能是下一个问题。;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T08:51:16.830

如果您真的想要这种行为（我认为这不是很好的模式，没关系），您可以从 EventArgs 类派生并为删除作者添加属性。然后你可以这样做：

```
c.Delete( this ); //this = window
// ...
void business_Deleted(object sender, EventArgs e) {
    bool isDeletedFromMe = false;
    if ( e is DeletedEventArgs ) { isDeletedFromMe = object.ReferenceEquals( this, e.Author ); }
    if ( false == isDeletedFromMe ) {
        MessageBox.Show("Item has been deleted in another editor window.",
            "...", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        Close();
    }
} 
```

或者你可以这样做：

```
void business_Deleted(object sender, EventArgs e)
{
    if ( false == object.ReferenceEquals( sender, this.currentlyDeletingBusiness ) ) {
        MessageBox.Show("Item has been deleted in another editor window.",
            "...", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    }
    Close();
}

Business currentlyDeletingBusiness;
private void deleteButton_Activate(object sender, EventArgs e)
{
    Business c = (Business)businessBindingSource.DataSource;
    try {
        this.currentlyDeletingBusiness = c;
        c.Delete();
    }
    finally {
        this.currentlyDeletingBusiness = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-24T18:43:45.760

我不确定为什么您的示例代码不能按预期工作，但您可以尝试添加一个私有成员变量来检查该用户是删除记录还是其他用户。

```
private bool otherUser = true;

void business_Deleted(object sender, EventArgs e)
{
    if(otherUser) {
        /* Show message */
    }
}

void deleteButton_Activate(object sender, EventArgs e)
{
    otherUser = false;
    /* Delete record */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-30T04:05:19.727

活动可以注册多次吗？我会在之后放一个断点

```
business.Deleted -= new EventHandler(business_Deleted);
```

并检查 business.Deleted 的 _invocationCount 和 _invocationList （在 Base -> Non-Public members 下）以确保没有更多事件注册。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T08:13:26.690

从我看到的几行来看，这可能是问题所在：

```
Business business = (Business)businessBindingSource.DataSource; 
```

看起来您正在将业务持有的引用更改为不同的对象。也许您的只是一个示例，并且您每次都使用相同的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T08:31:35.217

当然，这是最短的完整示例：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Globalization;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsApplication
{
    public partial class BusinessEditor : Form
    {
        private EventHandler<EventArgs> businessDeletedHandler;

        public BusinessEditor(Business business)
            : this()
        {
            InitializeComponent();

            businessBindingSource.DataSource = business;

            // Registering
            businessDeletedHandler = new EventHandler<EventArgs>(business_Deleted);
            business.Deleted += businessDeletedHandler;
        }

        void business_Deleted(object sender, EventArgs e)
        {
            MessageBox.Show("Item has been deleted in another editor window.",
                "...", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            Close();
        }

        private void deleteButton_Activate(object sender, EventArgs e)
        {
            Business c = (Business)businessBindingSource.DataSource;
            // Unregistering
            c.Deleted -= businessDeletedHandler;
            c.Delete();
            Close();
        }
    }
} 
```

我认为应该是同一个例子，Ed。我说得对吗？

问候，并感谢你！

# css - CSS 整洁的配置

> ID：304607
> 
> 赞同：0
> 
> 时间：2008-11-20T08:05:28.967
> 
> 标签：css, compression

我正在使用 CSS Tidy。由于它的所有压缩措施，在某些情况下，它会通过组合或重新排列选择器等来搞乱我的页面。即使使用下面显示的选项，具有压缩 CSS 的页面也不会像未压缩的那样呈现。

我的问题是：如何配置 CSS Tidy 以将我所有的 CSS 文件合并为一个，除此之外什么都不做？

```
$this->settings['remove_bslash'] = false;
$this->settings['compress_colors'] = false;
$this->settings['compress_font-weight'] = false;
$this->settings['lowercase_s'] = false;
$this->settings['optimise_shorthands'] = 0;
$this->settings['remove_last_;'] = false;
$this->settings['case_properties'] = 0;
$this->settings['sort_properties'] = false;
$this->settings['sort_selectors'] = false;
$this->settings['merge_selectors'] = 0;
$this->settings['discard_invalid_properties'] = false;
$this->settings['css_level'] = 'CSS2.1';
$this->settings['preserve_css'] = true;
$this->settings['timestamp'] = false; 
```

* * *

@ypnos：在配置方面，我没有配置文件，我在初始化类时没有设置配置选项。我只是在实际类中编辑了 csstidy() 函数。我确信我编辑的设置正在被读取，因为一些——但不是几乎所有的——问题都得到了修复。

@Ambrose：CSS 是 30k 压缩的，并且有许多我难以追踪的问题。我可以清楚地看到渲染页面上的问题，但更难在 CSS Tidy 生成的文件中找到它们。在某些情况下，选择器的顺序正在改变，但通过编辑这些设置，我至少纠正了这个问题。您关于 CSS Tidy 的两个假设（URL 和 PHP 的用法）都是正确的。

由于 http-compression 可以从空白的角度压缩 CSS，所以我需要 CSS Tidy 做的就是将我所有的 CSS 文件合并为一个，而无需尝试操作内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-20T08:54:31.457

你向我们展示你的 CSS 之前和之后的效果如何？

以及如何链接到 CSS Tidy 本身？我猜是[这个](http://csstidy.sourceforge.net/)？被用作 PHP 脚本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-22T01:59:03.527

I was able to track down the source of my problem. I had incorrectly attributed it to CSS Tidy, when something else was actually at fault. Thanks for the help.

# java - Swing 应用程序全局模态

> ID：304609
> 
> 赞同：0
> 
> 时间：2008-11-20T08:06:01.167
> 
> 标签：java, swing, modal-dialog

简单的问题：

摆动框架可以完全模态（阻止所有其他窗口）吗？

我尝试了以下，但我仍然可以点击其他应用程序窗口（比如这个浏览器）

```
JDialog myDialog  = .... 
myDialog.setModalityType(Dialog.ModalityType.APPLICATION_MODAL); 
```

如果可能，请粘贴一些代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T17:27:53.450

对话框并不意味着是全局模式的。每个现代操作系统都强烈反对其 HIG 中的全局模式，他们甚至可能已经弃用了该功能（正如您无法让它工作的事实所表明的那样）。你的应用不应该*从*整个系统中窃取事件；这不仅是糟糕的设计，而且在我的书中几乎是犯罪。

忽略大多数人喜欢在多个应用程序之间执行多任务这一事实，您打开全局模式对话框然后您的应用程序冻结的场景呢？Ctrl+Alt+Del 应该可以在 Windows 上杀死应用程序，但我不确定 Mac 上的 Cmd+Opt+Escape 是否有全局模式对话框（Cocoa 甚至*有*全局模式吗？）。正如您所建议的那样，所有 Linux 平台都没有任何很好的方法来杀死已经完全控制 UI 的应用程序（您必须完全杀死 X11 并从头开始一个新实例）。

我的回答：**另辟蹊径。** 我不在乎你的客户要求什么，他们不想要这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T09:11:40.737

JFrame 并非设计为模态的。使用 JDialog，但这样做会丢失一些 JFrame 功能。如果您无法忍受损失，则必须阻止 EventQueue 并将其替换为您自己的，以便仅接受来自阻塞的事件。

有关使用内部框架的解释，请参阅[创建模态内部框架](http://java.sun.com/developer/JDCTechTips/2001/tt1220.html)，该内部框架也应该适用于 JFrame。

编辑：哎呀，我的回答似乎有点不对劲，因为您的代码示例显示您已经为此使用了 Dialog 子类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T08:57:42.060

我不知道全局模式，但这是一个想法。

1.  截取桌面截图。
2.  进入全屏。
3.  弹出你的对话框。

由于桌面是假截图，你可以忽略任何点击它的尝试。

[全屏示例](http://terai.xrea.jp/Swing/FullScreen.html)：

```
private void toggleFullScreenWindow() {
  GraphicsEnvironment graphicsEnvironment
    = GraphicsEnvironment.getLocalGraphicsEnvironment();
  GraphicsDevice graphicsDevice
    = graphicsEnvironment.getDefaultScreenDevice();
  if(graphicsDevice.getFullScreenWindow()==null) {
    dialog.dispose(); //destroy the native resources
    dialog.setUndecorated(true);
    dialog.setVisible(true); //rebuilding the native resources
    graphicsDevice.setFullScreenWindow(dialog);
  }else{
    graphicsDevice.setFullScreenWindow(null);
    dialog.dispose();
    dialog.setUndecorated(false);
    dialog.setVisible(true);
    dialog.repaint();
  }
  requestFocusInWindow();
} 
```

仅供参考：[全屏独占模式 API](http://java.sun.com/docs/books/tutorial/extra/fullscreen/index.html)。

# windows - Windows 安装程序上的 Haskell

> ID：304614
> 
> 赞同：30
> 
> 时间：2008-11-20T08:09:21.160
> 
> 标签：windows, haskell

不幸的是，我无法在工作或家里使用 *nix 盒子。我可以使用 Haskell 的唯一方法是在 Windows 上。这里有人在 Windows 上使用 Haskell 吗？你的设置是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-10-26T19:58:39.603

免责声明：以下内容在 2013 年 10 月有效。因此很有可能它很快就会过时。欢迎您的编辑和评论。

这就是我在 Windows 7 x64 上设置 Haskell 所做的工作

### 1\. 安装 Haskell 平台

[从http://www.haskell.org/platform/windows.html](http://www.haskell.org/platform/windows.html)下载并安装 Haskell 平台

### 2\. 安装 Sublime Text 3

[从http://www.sublimetext.com/3](http://www.sublimetext.com/3)下载并安装 Sublime Text 3

### 3\. 在 Sublime 中启用包管理器

1.  运行崇高
2.  打开控制台：`View`>>`Show console`
3.  将以下代码粘贴到控制台并按 Enter（根据[this](https://sublime.wbond.net/installation)）：

`import urllib.request,os; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); open(os.path.join(ipp, pf), 'wb').write(urllib.request.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ','%20')).read())`

4.  打开命令面板：`Tools`>>`Command palette`
5.  在命令面板弹出窗口中输入：`Package Control: Install Package`
6.  选择包：`SublimeHaskell`

### 4\. 安装 Haskell 工具

Cabal 是 Haskell 的标准包管理器。你需要做的是：

1.  启动具有管理权限的控制台
2.  跑：

    ```
    cabal install cabal-install
    cabal update
    cabal install aeson
    cabal install haskell-src-exts
    cabal install ghc-mod
    cabal install cmdargs
    cabal install haddock 
    ```

### 5.安装hdevtools

您不能通过运行以下命令在 Windows 上安装 hdevtools：cabal instal hdevtools。你需要做的是：

1.  [从https://github.com/mvoidex/hdevtools](https://github.com/mvoidex/hdevtools)下载适用于 Windows 的 hdevtools 源代码*（* 目前不适用于 GHC 7.10。[请参阅此 fork](https://github.com/flashus/hdevtools)以使用 GHC 7.10 及更高版本进行构建）

2.  解压到某个文件夹

3.  转到该文件夹​​并运行：

    ```
    runhaskell Setup.hs configure --user
    runhaskell Setup.hs build
    runhaskell Setup.hs install 
    ```

4.  注意安装 hdevtools 的路径（在控制台输出中）。在 Sublime 中设置 SublimeHaskell 插件时，您将需要此路径。路径应如下所示：`C:\Users\Aleksey Bykov\AppData\Roaming\cabal\bin`where`Aleksey Bykov`是当前用户的名称。

### 6\. 在 Sublime 中设置 SublimeHaskell 插件：

1.  开始崇高
2.  前往`Preferences`>> `Package settings`>> `SumblimeHaskell`>>`Settings - User`
3.  确保您的配置如下所示：

    ```
    {
        "add_to_PATH":
        [
            "C:/Users/Aleksey Bykov/AppData/Roaming/cabal/bin/"
        ],
        "enable_hdevtools": true
    } 
    ```

hdevtools `C:/Users/Aleksey Bykov/AppData/Roaming/cabal/bin/`（所有其他工具都已安装）的路径（您在步骤 5 中获得）在哪里 4\. 保存文件并重新启动 Sublime

### 7.你好世界

1.  开始崇高
2.  创建一个新文件并立即将其另存为`hello-world.hs`
3.  将以下代码放在那里：

    ```
    main::IO()
    main = putStrLn "Hello world!" 
    ```

4.  通过`Tools`>> `Build`x 2 次构建和运行（首先构建，然后运行）

### 8\. 参见

还有另一篇很棒的文章：[http ://howistart.org/posts/haskell/1](http://howistart.org/posts/haskell/1)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-07T21:23:33.123

我在 Windows 上使用过 Haskell，但只有在被迫时才使用。不是因为 Haskell+Windows 的组合特别糟糕，而是因为我不是很喜欢 Windows。

我的设置基本上如下：

*   GHC
*   [维姆](http://vim.org/)
*   [明威](http://www.mingw.org/)
*   [安慰](http://sourceforge.net/projects/console)
*   [制作](http://www.cmake.org/)
*   [Visual Studio 速成版](http://www.microsoft.com/express/)

如您所见，我试图获得一个尽可能类似于 Unix 的环境（不使用 cygwin，因为我觉得它完全令人困惑）。Vim 是我最喜欢的编辑器。使用 Visual Studio 的原因是 GHC 附带的 C 环境并未涵盖*所有*Win32API。我使用 CMake 来获得一个不错的构建环境。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-12-25T14:27:36.833

[Haskell Platform](http://hackage.haskell.org/platform/)现在或多或少是 haskell 的标准发行版，它有一个 windows 安装程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T08:27:16.490

[GHC](http://www.haskell.org/ghc/index.html)是用于函数式语言 Haskell 的最先进的开源编译器和交互式环境。

GHC有一个[Windows 安装程序](http://www.haskell.org/ghc/download_ghc_642.html#windows)，但它适用于 6.4.2 版。

版本 6.10.1的 Windows `.exe`（不是安装程序）位于[http://www.haskell.org/ghc/dist/6.10.1/](http://www.haskell.org/ghc/dist/6.10.1/) 目前尚不清楚（GHC 6.10.1）版本何时提供 Windows安装程序。`.msi`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-22T17:48:06.667

似乎还没有人提到[Atom](https://atom.io/)，我已经使用了几个星期了。它还没有 ST3 那样稳定和成熟，但它看起来很有前途，并通过插件提供了 cabal（部分）和 ghc-mod（良好）集成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T08:43:18.827

我记得不久前使用[拥抱](http://www.haskell.org/hugs/)取得了一些成功。不过我只是在玩。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-03-06T11:36:19.010

我基于 Magnus 解决方案。我必须声明我通常是 GNU/Linux 用户，我必须移植低级别的包（[比如这个](http://hackage.haskell.org/package/ioctl)）。

*   [安慰](http://sourceforge.net/projects/console)
*   [Haskell 平台](http://hackage.haskell.org/platform/)（它包含[GHC](http://www.haskell.org/ghc/)和在 Windows 上的[MinGW](http://www.mingw.org/)）
*   带有[X的](http://www.x.org/wiki/)[Cygwin](http://www.cygwin.com/)
*   [XEmacs](http://www.xemacs.org/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-12T15:49:11.647

在 Windows 上安装它比在 Mac 上安装它更困难和痛苦（几乎所有开发软件都是如此）。话虽如此，这是在 Windows 10 上设置 Haskell 环境的最简单方法：

以管理员身份打开 Powershell（右键单击，然后“以管理员身份运行”）。

1 在 Powershell 中，检查您的执行策略，如下所示：

```
Get-ExecutionPolicy 
```

2 如果你得到“限制”，你需要改变它。执行这个命令：

```
Set-ExecutionPolicy Bypass -Scope Process 
```

3 当您收到问题提示时，键入：

```
A 
```

点击输入。

4 使用 Get-ExecutionPolicy 再次验证您的策略。现在您的策略应该是“绕过”。

5 仔细检查您是否有 Chocolatey：

```
choco 
```

6 安装 Haskell：

```
choco install haskell-dev 
```

需要一段时间。。

7 开始在 Haskell 中编码！

[http://learnyouahaskell.com/starting-out](http://learnyouahaskell.com/starting-out)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-03T09:41:32.437

如何在 windows10 中安装 Haskell：

Step01：打开windows powershell（以管理员身份运行），按照提示运行以下命令：

命令 1：命令 = Get-ExecutionPolicy，如果返回“Restricted”，则运行此命令 = Set-ExecutionPolicy AllSigned

命令 2：命令 = Set-ExecutionPolicy Bypass -Scope Process -Force；[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1')) （注意：在询问时键入“Y”并单击 enter ）

step02：运行以下命令（在windows powershell中（以管理员身份运行））： command = choco install haskell-dev haskell-stack （注意：在询问时输入“Y”并单击回车）运行此命令后关闭powershell

step03：验证是否一切正确：打开命令提示符并运行以下代码： command = ghc --version 输出应为 = The Glorious Glasgow Haskell Compilation System, version 9.2.1（最小化命令提示符）

如何运行一个简单的代码并获得输出： step01：打开命令提示符并一一运行以下命令： cd \ cls mkdir dev cd dev cls notepad hello.hs 记事本将打开，现在编写以下程序并保存：程序: main = do print "我的第一个 Haskell 程序" name <- getLine print ("Hello, " ++name)

写下这个并保存步骤02：运行之前最小化的程序打开命令提示符并运行以下命令：commands=

1.  ghc你好.hs
2.  你好你应该得到输出：我的第一个 Haskell 程序。

要在 vs 代码中使用相同的内容：执行上述步骤后，在 c 驱动器 dev 文件夹中打开（使用 vs 代码打开）hello.hs 文件，然后在扩展中安装 Haskell 语法突出显示并在终端中运行相同的命令，选择命令提示符作为默认值而不是windows powershell。（注意在 vs 代码中打开 .hs 之前，请确保删除除 hello.hs 文件之外的所有其他文件）

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-11-20T09:02:16.683

或者您可以在 linux 和 windows 之间对硬盘进行分区：)

不回答你的问题，但它是一种选择。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-12-17T22:40:33.833

您可以安装 Sun 的 VirtualBox，并在其上安装 Linux。

# asp.net - 登录尝试后 GoDaddy 上的另一个安全异常

> ID：304616
> 
> 赞同：8
> 
> 时间：2008-11-20T08:11:13.933
> 
> 标签：asp.net, security, exception

主机：GoDaddy 共享主机

信任级别：中

在我提交有效的用户/通行证后会发生以下情况。数据库具有读/写权限，当我删除更新数据库的管理页面上的登录要求时，按预期工作。

有没有其他人遇到过这个问题或知道问题是什么？任何人？

```
Server Error in '/' Application.
Security Exception
Description: The application attempted to perform an operation not allowed by the security policy.  To grant this application the required permission please contact your system administrator or change the application's trust level in the configuration file.

Exception Details: System.Security.SecurityException: Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[SecurityException: Request for the permission of type 'System.Security.Permissions.FileIOPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.]
   System.Security.CodeAccessSecurityEngine.Check(Object demand, StackCrawlMark& stackMark, Boolean isPermSet) +0
   System.Security.CodeAccessPermission.Demand() +59
   System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy) +684
   System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share) +114
   System.Configuration.Internal.InternalConfigHost.StaticOpenStreamForRead(String streamName) +80
   System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.OpenStreamForRead(String streamName, Boolean assertPermissions) +115
   System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.OpenStreamForRead(String streamName) +7
   System.Configuration.Internal.DelegatingConfigHost.OpenStreamForRead(String streamName) +10
   System.Configuration.UpdateConfigHost.OpenStreamForRead(String streamName) +42
   System.Configuration.BaseConfigurationRecord.InitConfigFromFile() +437

Version Information: Microsoft .NET Framework Version:2.0.50727.1433; ASP.NET Version:2.0.50727.1433 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-10-16T16:12:26.563

[http://www.codeproject.com/Questions/586223/SecurityplusExceptionpluscomingplusinplusaplusrunn](http://www.codeproject.com/Questions/586223/SecurityplusExceptionpluscomingplusinplusaplusrunn)

解决方案 4 System.Security.SecurityException：请求“System.Net.SocketPermission, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型的权限失败

以下错误的解决方案

```
<system.web>
    <customErrors mode="Off"/>
    <trust level="Full" />
</system.web> 
```

适用于我的 en godady 托管

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-04T05:29:00.373

您是否尝试过使用站点中文件和文件夹的权限？我在 godaddy 上遇到了一个错误，因为该目录没有写权限，所以无法写入新文件。您可以尝试将整个根设置为读/写，看看是否可以解决您的问题。要访问您的权限设置：

*   登录到 GoDaddy
*   单击站点名称旁边的“我的主机帐户”和“管理帐户”
*   点击“我的文件”
*   选中正在访问的文件旁边的框，然后单击顶部的权限图标

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-04T17:46:15.407

如果您正在使用任何第三方组件，您可能需要检查这些组件是否正在执行某种类型的安全操作。大约一年前，我遇到了 GoDaddy 和 SubSonic ORM 的问题，它与要求一定安全级别的特定代码行存在问题。我在反射器中破解了代码，看了看，验证了它。

这可能是个问题。如果组件让您*感到*痛苦，请尝试下载代码并删除可疑代码，重新编译并运行。这正是我在一两年前必须使用 SubSonic 代码所做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-21T20:27:04.690

我目前正在将我的网站移至 GoDaddy 并遇到此错误。我有一个自定义成员资格提供程序，它使用基于 web.config 中的机器密钥的散列密码。所以正是这段代码导致了错误：

```
// Get encryption and decryption key information from the configuration.
Configuration cfg =
  WebConfigurationManager.OpenWebConfiguration(System.Web.Hosting.HostingEnvironment.ApplicationVirtualPath);
machineKey = (MachineKeySection)cfg.GetSection("system.web/machineKey");

if (machineKey.ValidationKey.Contains("AutoGenerate"))
    if (PasswordFormat != MembershipPasswordFormat.Clear)
        throw new ProviderException("Hashed or Encrypted passwords are not supported with auto-generated keys."); 
```

所以问题是尝试使用 WebConfigurationManager.OpenWebConfiguration 打开 web.config，我通过将 OpenWebConfiguration 和 GetSection 行替换为以下内容来解决此问题：

```
machineKey = (MachineKeySection)WebConfigurationManager.GetWebApplicationSection("system.web/machineKey"); 
```

# asp.net-mvc - 用于的 HTML 助手

> ID：304617
> 
> 赞同：133
> 
> 时间：2008-11-20T08:12:49.887
> 
> 标签：asp.net-mvc, razor, file-upload, upload, html-helper

有`HTMLHelper`文件上传吗？具体来说，我正在寻找替换

```
<input type="file"/> 
```

使用 ASP.NET MVC HTMLHelper。

或者，如果我使用

```
using (Html.BeginForm()) 
```

文件上传的 HTML 控件是什么？

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2011-08-23T15:42:11.747

**HTML 上传文件 ASP MVC 3.**

**模型**：（*请注意 FileExtensionsAttribute 在 MvcFutures 中可用。它将验证文件扩展名客户端和服务器端。*）

```
public class ViewModel
{
    [Required, Microsoft.Web.Mvc.FileExtensions(Extensions = "csv", 
             ErrorMessage = "Specify a CSV file. (Comma-separated values)")]
    public HttpPostedFileBase File { get; set; }
} 
```

**HTML 视图**：

```
@using (Html.BeginForm("Action", "Controller", FormMethod.Post, new 
                                       { enctype = "multipart/form-data" }))
{
    @Html.TextBoxFor(m => m.File, new { type = "file" })
    @Html.ValidationMessageFor(m => m.File)
} 
```

**控制器动作**：

```
[HttpPost]
public ActionResult Action(ViewModel model)
{
    if (ModelState.IsValid)
    {
        // Use your file here
        using (MemoryStream memoryStream = new MemoryStream())
        {
            model.File.InputStream.CopyTo(memoryStream);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2011-06-14T19:17:45.663

您还可以使用：

```
@using (Html.BeginForm("Upload", "File", FormMethod.Post, new { enctype = "multipart/form-data" }))
{ 
    <p>
        <input type="file" id="fileUpload" name="fileUpload" size="23" />
    </p>
    <p>
        <input type="submit" value="Upload file" /></p> 
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-11-20T10:34:42.550

不久前我也有同样的问题，偶然发现了 Scott Hanselman 的一篇帖子：

[使用 ASP.NET MVC 实现 HTTP 文件上传，包括测试和模拟](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-08-04T09:37:05.370

或者你可以正确地做到这一点：

在您的 HtmlHelper 扩展类中：

```
public static MvcHtmlString FileFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression)
    {
        return helper.FileFor(expression, null);
    }

public static MvcHtmlString FileFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes)
    {
        var builder = new TagBuilder("input");

        var id = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(ExpressionHelper.GetExpressionText(expression));
        builder.GenerateId(id);
        builder.MergeAttribute("name", id);
        builder.MergeAttribute("type", "file");

        builder.MergeAttributes(new RouteValueDictionary(htmlAttributes));

        // Render tag
        return MvcHtmlString.Create(builder.ToString(TagRenderMode.SelfClosing));
    } 
```

这一行：

```
var id = helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(ExpressionHelper.GetExpressionText(expression)); 
```

生成模型唯一的 id，你知道在列表和东西中。型号[0].名称等

在模型中创建正确的属性：

```
public HttpPostedFileBase NewFile { get; set; } 
```

然后您需要确保您的表单将发送文件：

```
@using (Html.BeginForm("Action", "Controller", FormMethod.Post, new { enctype = "multipart/form-data" })) 
```

然后这是你的助手：

```
@Html.FileFor(x => x.NewFile) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-16T10:42:54.123

Paulius Zaliaduonis 答案的改进版本：

为了使验证正常工作，我必须将模型更改为：

```
public class ViewModel
{
      public HttpPostedFileBase File { get; set; }

        [Required(ErrorMessage="A header image is required"), FileExtensions(ErrorMessage = "Please upload an image file.")]
        public string FileName
        {
            get
            {
                if (File != null)
                    return File.FileName;
                else
                    return String.Empty;
            }
        }
} 
```

并认为：

```
@using (Html.BeginForm("Action", "Controller", FormMethod.Post, new 
                                       { enctype = "multipart/form-data" }))
{
    @Html.TextBoxFor(m => m.File, new { type = "file" })
    @Html.ValidationMessageFor(m => m.FileName)
} 
```

这是必需的，因为@Serj Sagan 所写的有关 FileExtension 属性仅适用于字符串的内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-21T01:17:06.747

要使用`BeginForm`，这是使用它的方法：

```
 using(Html.BeginForm("uploadfiles", 
"home", FormMethod.POST, new Dictionary<string, object>(){{"type", "file"}}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-10T07:11:09.627

这也有效：

**模型：**

```
public class ViewModel
{         
    public HttpPostedFileBase File{ get; set; }
} 
```

**看法：**

```
@using (Html.BeginForm("Action", "Controller", FormMethod.Post, new 
                                       { enctype = "multipart/form-data" }))
{
    @Html.TextBoxFor(m => m.File, new { type = "file" })       
} 
```

**控制器动作：**

```
[HttpPost]
public ActionResult Action(ViewModel model)
{
    if (ModelState.IsValid)
    {
        var postedFile = Request.Files["File"];

       // now you can get and validate the file type:
        var isFileSupported= IsFileSupported(postedFile);

    }
}

public bool IsFileSupported(HttpPostedFileBase file)
            {
                var isSupported = false;

                switch (file.ContentType)
                {

                    case ("image/gif"):
                        isSupported = true;
                        break;

                    case ("image/jpeg"):
                        isSupported = true;
                        break;

                    case ("image/png"):
                        isSupported = true;
                        break;

                    case ("audio/mp3"):  
                        isSupported = true;
                        break;

                    case ("audio/wav"):  
                        isSupported = true;
                        break;                                 
                }

                return isSupported;
            } 
```

[内容类型列表](http://www.sitepoint.com/web-foundations/mime-types-complete-list/)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-03-24T01:09:45.317

我猜这有点 hacky，但它会导致应用正确的验证属性等

```
@Html.Raw(Html.TextBoxFor(m => m.File).ToHtmlString().Replace("type=\"text\"", "type=\"file\"")) 
```

# c++ - Pocket PC 上的屏幕旋转

> ID：304621
> 
> 赞同：2
> 
> 时间：2008-11-20T08:14:30.120
> 
> 标签：c++, windows-mobile, pocketpc

我正在为应该在横向模式下运行的掌上电脑开发一个应用程序。

我编写了函数 SetScreenOrientation(int angle)，它可以旋转屏幕。此函数在应用程序启动和应用程序关闭时调用。当我最小化/最大化方向时，我想更改屏幕方向。为此，我编辑了以下函数：

```
void CMainFrame::OnSize(UINT nType, int cx, int cy)
{
    RECT r;
    GetWindowRect(&r);

    RECT rstatus;
    rstatus.left = 0;
    rstatus.top = 0;
    rstatus.right = r.right;
    rstatus.bottom = TOOLBAR_HEIGHT;
    m_wndStatus.MoveWindow(&rstatus, TRUE);

    RECT rcamera;
    rcamera.left = 0;
    rcamera.top = 0;
    rcamera.right = r.right;
    rcamera.bottom = r.bottom - TOOLBAR_HEIGHT;
    m_wndCameraView.MoveWindow(&rcamera, TRUE);

    if(nType == SIZE_MAXIMIZED)
    {
        CScreenOrientation::SetScreenOrientation(270);
    }
    if(nType == SIZE_MINIMIZED)
    {
        CScreenOrientation::SetScreenOrientation(0);
    }
} 
```

问题是，当我最小化应用程序时，该函数会多次执行，因此屏幕首先旋转回 0 度，然后旋转到 270 度。

在调试时，我可以看到第二次执行该函数时执行了以下一段 wincore 代码：

```
BOOL CWnd::OnWndMsg(UINT message, WPARAM wParam, LPARAM lParam, LRESULT* pResult)
{
...
switch (lpEntry->nSig)
    {
...
case AfxSig_v_u_ii:
        (this->*mmf.pfn_v_u_i_i)(static_cast<UINT>(wParam), LOWORD(lParam), HIWORD(lParam));
        break;
...
}
} 
```

有谁知道在应用程序最小化/最大化上设置屏幕方向的任何其他方法或任何可能阻止多个功能执行的技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T08:29:25.440

一方面，SetScreenOrientation 似乎很可能会给您另一个 OnSize 通知，因此您希望检测递归调用并且在发生这种情况时什么也不做。

更重要的是，你怎么知道用户真正想要什么方向？当您的应用程序启动时，您可以检查方向并保存它。但是如果用户在你跑步的时候改变了方向，当你把它改回来时，他们不会高兴的。也许您可以检查系统设置更改的通知并检测用户是否自己更改了方向。

# vb6 - 如何将源代码放入 VB6 的子文件夹中？

> ID：304626
> 
> 赞同：3
> 
> 时间：2008-11-20T08:18:56.257
> 
> 标签：vb6, packages

我将所有表单放在一个文件夹中，并将所有代码模块放在 VB6 的另一个文件夹中。如何为源文件创建更好的文件夹结构？

例如，如果我有 20 个表单和 20 个代码模块，我如何创建子文件夹 Main、Sales 和Employees，并将源文件放在这些子文件夹下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T08:22:05.563

您可以（并且应该）在文件系统中创建子文件夹来组织您的文件。但是，VB6 项目浏览器不会反映这种层次结构，它基本上提供了一个平面层次结构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-20T13:20:45.740

您应该调查您的某些文件是否可以驻留在 ActiveX DLL 而不是主 EXE 项目中。正如 Konrad 指出的 VB6 IDE 项目资源管理器不支持文件夹。大型 VB6 项目，如我自己的，将类组织成 ActiveX DLL 的层次结构。例如实用程序 DLL，它具有跨公司应用程序（文件处理等）使用的常用例程。具有应用程序使用的特定类的业务对象 DLL。报告 DLL 具有处理该应用程序报告的类。等等。

问题是您必须担心版本之间的兼容性问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T08:56:33.403

好吧，如果您正在谈论从 vb6 项目资源管理器视图中添加新文件夹，我不确定您是否可以这样做。

但如果你想对其进行排序，你可以应用一些命名约定，即module1_xxx、module1_yyy。

# java - 我可以将泛型属性存储到对象的字段中吗

> ID：304640
> 
> 赞同：3
> 
> 时间：2008-11-20T08:31:14.827
> 
> 标签：java, generics

假设以下类存根：

```
public class Foo<T> {
  private Class<T> type;

  public Foo<T> () {}
} 
```

我可以将泛型类型存储`T`到构造函数的字段`type`中，而不将构造函数的签名更改为“ `public Foo<T> (Class<T> type)`”吗？

如果是，如何？如果不是，为什么？

” `type = T`“似乎不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-20T08:45:07.483

否 - 类型擦除意味着您必须在执行时提供*一些东西。*您可以提供 或 的实例，`T`但`Class<T>`类本身只会将每次出现的 T 替换为`Object`.

这种事情是 Java 的泛型与 .NET 中的泛型相比的最大缺点之一。（另一方面，Java 中的差异故事比 .NET 中的差异更大——如果更令人困惑的话。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T09:08:43.193

正如在这个[线程](http://forums.sun.com/thread.jspa?threadID=5284624)中所说，

例如 List<Integer>

```
list.get (index).getClass() 
```

不会为您提供存储在列表中的对象类型***：***

*   当列表为空时
*   即使列表不为空，因为任何元素都可以是泛型类型参数的任何子类。

由于类型参数在编译时被删除，它们在运行时不存在（对不起，乔恩，在[*执行*时](http://safari.oreilly.com/9781933988368/pref04)）：因此您无法通过 java 中的反射获取泛型类型信息。

有一个需要更多[**具体化**](http://blogs.oracle.com/ahe/entry/reification)的案例（Java 7？），并且会促进你所追求的。

人们会希望转换为 T 的错误类型会引发 Cast 异常，该异常会在执行时显示用于 T 的原始类型，但可惜，这也不起作用。

考虑以下测试类：

```
import java.util.ArrayList;

/**
 * @param <T>
 */
public class StoreGerenericTypeInField<T>
{

    private T myT = null;
    private ArrayList<T> list = new ArrayList<T>();

    private void setT(final T aT) { myT = aT; }
    /**
     * Attempt to do private strange initialization with T, in the hope to provoke a cast exception
     */
    public StoreGerenericTypeInField()
    {
        StringBuilder aFirstType = new StringBuilder();
        StringBuffer aSecondType = new StringBuffer();
        this.list.add((T)aFirstType);
        this.list.add((T)aSecondType);
        System.out.println(this.list.get(0).getClass().getName());
        System.out.println(this.list.get(1).getClass().getName());

        setT((T)aFirstType);
        System.out.println(this.myT.getClass().getName());
        setT((T)aSecondType);
        System.out.println(this.myT.getClass().getName());
    }
    /**
     * @param args
     */
    public static void main(String[] args)
    {
        StoreGerenericTypeInField<Integer> s = new StoreGerenericTypeInField<Integer>();
    }
} 
```

构造函数试图将讨厌的东西存储到它的 T 变量（或它的 T 列表）中......并且一切都运行顺利！？

它打印：

```
java.lang.StringBuilder
java.lang.StringBuffer
java.lang.StringBuilder
java.lang.StringBuffer 
```

类型擦除本身[不应该受到责备](http://cakoose.com/wiki/type_erasure_is_not_evil)......这是类型擦除（Java 的新功能）和***不安全强制转换*****（Java 遗留旧功能）的组合**，这使得 T 在执行时真正遥不可及（直到你真正尝试与 ' ' 特定方法一起使用）*`T`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T08:47:00.053

好吧，为什么不在你的班级里有一个 T 的实例呢？我的意思是，如果不是这种情况，T 会给你买什么？因此，如果您有 T x，您可以使用 x.GetType()。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-11-20T08:38:59.850

做

```
type = T.getClass(); 
```

工作？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-11-20T08:42:19.033

你应该试试这个：

```
type = T.GetType(); 
```

# cocoa - 如何使我的 NSScroller 子类具有不同的宽度？

> ID：304649
> 
> 赞同：1
> 
> 时间：2008-11-20T08:36:10.480
> 
> 标签：cocoa

我正在尝试创建 NSScroller 的自定义子类。我已经创建了这个类，并将其设置为 IB 中 NSScrollView 上的垂直滚动条。当我运行我的项目时，`drawRect:`会为我的子类调用该方法，因此我知道它已正确连接。

现在，如何更改我喜欢的新 NSScroller 的宽度？无论我对它的边界和框架做什么，它总是想画一个 15 像素宽的矩形（默认 NSScroller 的大小）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T09:17:16.200

在您的 NSScroller 子类中，您必须重写 scrollerWidth：

```
+(CGFloat)scrollerWidth
{
    return 30.0;
} 
```

这是 NSScrollView 在设置组件时用来定义组件框架的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-07-24T06:12:26.213

您可以使用类别来覆盖所有 NSScrollers 的滚动条宽度方法。

例如。在 NSScroller-MyScroller.h 中：

```
#import <Cocoa/Cocoa.h>

@interface NSScroller (MyScroller)

+ (CGFloat)scrollerWidth;
+ (CGFloat)scrollerWidthForControlSize: (NSControlSize)controlSize;

@end 
```

在 NSScroller-MyScroller.m 中：

```
#import "NSScroller-MyScroller.h"
#define SCROLLER_WIDTH 30.0

@implementation NSScroller (MyScroller)

+ (CGFloat)scrollerWidth {
    return SCROLLER_WIDTH;
}

+ (CGFloat)scrollerWidthForControlSize: (NSControlSize)controlSize {
    return SCROLLER_WIDTH;
}

@end 
```

# python - 在 Python 类声明中调用方法的最佳方式是什么？

> ID：304655
> 
> 赞同：4
> 
> 时间：2008-11-20T08:40:40.377
> 
> 标签：python, class, declaration, static-methods, invocation

假设我正在声明一个类`C`，其中一些声明非常相似。我想使用一个函数`f`来减少这些声明的代码重复。`f`可以像往常一样声明和使用：

```
>>> class C(object):
...     def f(num):
...             return '<' + str(num) + '>'
...     v = f(9)
...     w = f(42)
... 
>>> C.v
'<9>'
>>> C.w
'<42>'
>>> C.f(4)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unbound method f() must be called with C instance as first argument (got int instance instead) 
```

哎呀！我无意中接触`f`到了外界，但这不需要`self`争论（并且不能出于明显的原因）。一种可能性是`del`我使用该功能后：

```
>>> class C(object):
...     def f(num):
...             return '<' + str(num) + '>'
...     v = f(9)
...     del f
... 
>>> C.v
'<9>'
>>> C.f
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: type object 'C' has no attribute 'f' 
```

但是如果我想`f`在声明之后再次使用呢？删除该功能是不行的。我可以将其设为“私有”（即，在其名称前加上`__`）并对其进行处理，但通过异常通道`@staticmethod`调用对象变得非常时髦：`staticmethod`

```
>>> class C(object):
...     @staticmethod
...     def __f(num):
...             return '<' + str(num) + '>'
...     v = __f.__get__(1)(9)   # argument to __get__ is ignored...
... 
>>> C.v
'<9>' 
```

我必须使用上述疯狂`staticmethod`，因为作为描述符的对象本身不可调用。我需要恢复被`staticmethod`对象包裹的函数，然后才能调用它。

必须有更好的方法来做到这一点。如何在类中干净地声明一个函数，在其声明期间使用它，以及稍后在类中使用它？我应该这样做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-20T08:50:18.190

很简单，解决方案是 f 不需要是类的成员。我假设您的思维过程已经通过了 Java 语言过滤器，从而导致了心理障碍。它有点像这样：

```
def f(n):
    return '<' + str(num) + '>'

class C(object):

    v = f(9)
    w = f(42) 
```

然后当你想再次使用 f 时，只需使用它

```
>>> f(4)
'<4>' 
```

我认为这个故事的寓意是“在 Python 中，您不必将所有内容*都*强制归入一个类”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-20T12:00:16.200

扩展[Ali A](https://stackoverflow.com/questions/304655/the-best-way-to-invoke-methods-in-python-class-declarations#304679)的答案，如果你真的想在模块命名空间中避免 f （并且使用像 _f 这样的非导出名称，或者设置 __all__ 是不够的），那么你可以通过在闭包中创建类来实现这一点.

```
def create_C():
    def f(num):
        return '<' + str(num) + '>'

    class C(object):
        v = f(9)
        def method_using_f(self, x):  return f(x*2)
    return C

C=create_C()
del create_C 
```

这样，C 可以在其定义和方法中访问 f，但没有其他权限（除非对其方法进行相当复杂的自省 ( `C.method_using_f.im_func.func_closure`)）

不过，对于大多数用途来说，这可能有点过头了——通过使用“_”前缀命名约定来记录 f 是内部的通常就足够了。

**[编辑]** 另一种选择是在您希望使用它的方法中保存对预包装函数对象的引用。例如，通过将其设置为默认参数：

```
class C(object):
    def f(num):
        return '<' + str(num) + '>'

    v = f(9)
    def method_using_f(self, x, f=f):  return f(x*2)

    del f 
```

（虽然我认为关闭方法可能更好）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T13:09:46.683

我相信您正在尝试这样做：

```
class C():
...     class F():
...         def __call__(self,num):
...             return "<"+str(num)+">"
...     f=F()
...     v=f(9)
>>> C.v
'<9>'
>>> C.f(25)
'<25>'
>>> 
```

也许有更好或更多的pythonic解决方案......

> “在类中声明一个函数，在其声明期间使用它，稍后在类中使用它”
> 
> 对不起。做不到。

“做不到”似乎和 Python 不搭调

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T11:37:17.777

这是一种可能性：

```
class _C:
    # Do most of the function definitions in here
    @classmethod
    def f(cls):
        return 'boo'

class C(_C):
    # Do the subsequent decoration in here
    v = _C.f() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T23:21:16.373

一个选择：写一个更好的`staticmethod`：

```
class staticfunc(object):
    def __init__(self, func):
        self.func = func
    def __call__(self, *args, **kw):
        return self.func(*args, **kw)
    def __repr__(self):
        return 'staticfunc(%r)' % self.func 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T12:15:14.627

让我们从头开始。

“在类中声明一个函数，在其声明期间使用它，稍后在类中使用它”

对不起。做不到。“在课堂上”与“在声明期间使用”相矛盾。

*   在一个类中意味着作为声明的一部分创建。
*   在声明期间使用意味着它存在于类之外。通常作为一个元类。但是，还有其他方法。

目前尚不清楚 Cw 和 Cv 应该是什么。它们只是字符串吗？如果是这样，外部函数`f`是最好的解决方案。“不要使命名空间混乱”有点似是而非。毕竟，您想再次使用它。

它与 C 在同一个模块中。这就是 Python 具有模块的原因。它将函数和类绑定在一起。

```
import myCmod

myCmod.C.w
myCmod.C.v
myCmod.f(42) 
```

如果 w 和 v 不是简单的字符串，那么有一个非常好的解决方案可以提供很大的灵活性。

通常，对于像这样的类级别（“静态”）变量，我们可以使用其他类。不可能完全实现所需的 API，但这很接近。

```
>>> class F(object):
    def __init__( self, num ):
        self.value= num
        self.format= "<%d>" % ( num, )

>>> class C(object):
    w= F(42)
    v= F(9)

>>> C.w
<__main__.F object at 0x00C58C30>
>>> C.w.format
'<42>'
>>> C.v.format
'<9>' 
```

这样做的好处是 F 是一个适当的、可以扩展的一流的东西。不是我们试图避免暴露的“隐藏”事物。这是生活中的事实，所以我们不妨遵循 Open/Closed 原则，让它对扩展开放。

# encryption - 在 PKCS#7 内使用 ISO 10126 填充的 CBC 模式下使用 AES 时的算法标识符是什么？

> ID：304658
> 
> 赞同：2
> 
> 时间：2008-11-20T08:42:00.453
> 
> 标签：encryption, standards, aes, pkcs#7

我想使用 PKCS#7 作为一些加密、签名内容的容器格式，我们需要在 CBC 模式下使用基于 ISO 10126 的填充的 AES。我似乎找不到对用于此组合的算法标识符的具体引用。我可以自己发明，但会失去与其他工具的互操作性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-04-28T21:43:21.807

不需要指定填充模式。这是真的，因为 PKCS#7（与许多其他加密容器一样）使用 ASN.1/BER 编码。由于 BER 编码包含填充纯文本内消息的确切长度，因此填充的实际值无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-10T08:00:27.430

事实证明，填充模式不需要指定，只有加密算法很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-09-14T16:04:56.140

我相信如果您使用 PKCS#7 作为您的格式，则填充被规定为“PKCS7”填充（n 个八位字节的值“n”，请参阅[RFC 2315](http://www.ietf.org/rfc/rfc2315.txt)，第 10.3.2 节）。

AES/CBC 的算法标识符在例如[RFC 3565](http://www.ietf.org/rfc/rfc3565.txt)中给出：

```
-- AES information object identifiers --

aes OBJECT IDENTIFIER ::= { joint-iso-itu-t(2) country(16) us(840)
               organization(1) gov(101) csor(3)_ nistAlgorithms(4)  1 }

-- AES using CBC-chaining mode for key sizes of 128, 192, 256

id-aes128-CBC OBJECT IDENTIFIER ::= { aes 2 }
id-aes192-CBC OBJECT IDENTIFIER ::= { aes 22 }
id-aes256-CBC OBJECT IDENTIFIER ::= { aes 42 } 
```

因此，例如 CBC 模式下 128 位 AES 的 OID 是 2.16.840.1.101.3.4.1.2

从技术上讲，这些是针对[CMS](http://www.ietf.org/rfc/rfc3852.txt)的，本质上是更新的 PKCS#7。

# java - 如何在不创建单独对话框的情况下验证参数？

> ID：304663
> 
> 赞同：1
> 
> 时间：2008-11-20T08:44:14.990
> 
> 标签：java, validation, swing

我将制作一个使用树来可视化数据结构（JTree）的应用程序（在 Swing 中）。一棵树将在窗口的左侧。用户将能够浏览树。每个树节点的参数将显示在窗口的右侧。示例窗口将如下所示

```
===========================
| tree panel | data panel |
|            |            |
|            |            |
|            |            |
--------------------------- 
```

当用户想要更改该数据时，就会出现问题。我应该什么时候验证它们？简单的方法是打开一个新的模态对话框（JDialog）并让用户更改其中的数据。数据验证将在“确定”按钮侦听器方法中进行，但这有点笨拙。我想允许用户直接在数据面板中编辑这些数据。在那种情况下，我应该什么时候验证它们？

Swing 中是否有这种解决方案的模式？

或者任何在线教程如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T18:08:56.550

对话很糟糕。

立即丢弃任何完整的无意义输入。例如，在数字字段中输入一个字母（使用文档过滤器）。不要哔哔声。不需要任何特定的提交步骤。您可能保留了部分输入的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T08:49:51.297

我不完全确定你在追求什么，但是..

您可以将此“确定”按钮（或“提交更改”或其他）添加到数据面板，当按下按钮时，如果更改有效，您将验证数据并保存更改？

（所以你在数据面板上有可编辑的组件）

编辑：如果这不好，你能澄清一下吗：

*   数据面板是否一次显示树中一项的数据？
*   有哪些数据需要更改（和验证）

无论如何，如果您想直接验证对编辑组件（例如 JTextField）所做的更改，您可以使用例如

*   格式化文本字段，请参阅[如何使用格式化文本字段](http://java.sun.com/docs/books/tutorial/uiswing/components/formattedtextfield.html)
*   有关更一般的验证，请参阅[InputVerifier](http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/InputVerifier.html)
*   更多想法，请参阅[验证 JTextField](http://java.sun.com/developer/JDCTechTips/2001/tt1120.html)中的数字输入（数字输入集中但也可用于其他目的）

# performance - 为什么 Direct3D 应用程序在全屏模式下表现更好？

> ID：304669
> 
> 赞同：24
> 
> 时间：2008-11-20T08:47:16.073
> 
> 标签：performance, directx, fullscreen, direct3d

与窗口模式相比，Direct3D 应用程序在全屏模式下的性能似乎要好得多。这背后的技术原因是什么？

我想这与全屏应用程序可以获得对显示的独占控制这一事实有关。但为什么应用程序无法获得对*部分*屏幕（即窗口）的独占控制权，并具有相同的性能优势呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-16T19:02:09.887

以下是关于事情如何在下面工作的悬崖笔记。

监视器屏幕总是需要与所谓的主表面相关联才能显示任何内容，即显卡只能从显存中的一个表面扫描出来。

当应用程序全屏时（并且一切都设置正确以启用翻转），主表面只是应用程序后台缓冲区之一，并且每帧都翻转到另一个后台缓冲区。这是在屏幕上呈现的最有效方式，但它要求应用程序拥有整个监视器区域（即整个主表面）。

当没有全屏应用程序并且 DWM 关闭时，主表面归操作系统所有，每个窗口应用程序都会执行从应用程序后台缓冲区到主表面的 blit。此 blit 需要一些 GPU 时间才能完成（以及来自屏幕上可见的其他应用程序的 blit），因此它不如全屏演示高效。XP就是这样工作的。

当 DWM 组成屏幕时，事情变得更加复杂。在这里，DWM 拥有主表面，需要在那里绘制应用程序窗口。为了使它成为可能，每个窗口都有一个关联的表面来保存其内容，称为重定向表面（它允许 DWM 启用窗口重影、玻璃效果和所有这些好东西）。每次 D3D 应用程序发出一个帧时，它都会向重定向表面添加一个 blit。这样，需要发生几个 blit：应用程序 blit 到重定向表面，DWM 从重定向表面到主表面 blit，与全屏相比，这又是一些开销。

请注意，所有这些额外工作都在 GPU 上，因此不会影响 CPU 性能。

进一步阅读的东西：

[http://blogs.msdn.com/greg_schechter/archive/2006/03/19/555087.aspx](http://blogs.msdn.com/greg_schechter/archive/2006/03/19/555087.aspx)

[http://blogs.msdn.com/greg_schechter/archive/2006/05/02/588934.aspx](http://blogs.msdn.com/greg_schechter/archive/2006/05/02/588934.aspx)

[http://blogs.msdn.com/greg_schechter/archive/2006/03/05/544314.aspx](http://blogs.msdn.com/greg_schechter/archive/2006/03/05/544314.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-20T08:54:32.957

MSDN 上有[一点](http://msdn.microsoft.com/en-us/library/bb205075(VS.85).aspx#Flipping)说全屏模式使用缓冲区翻转，如果设置正确，而不是 blitting。这说得通。

当然，您可以（并且在某种程度上，确实可以）将部分屏幕的独占控制权交给应用程序，但是屏幕的其余部分会发生什么情况呢？您仍然需要在其余窗口上进行 blit、遮挡检查等，我认为这就是导致性能下降的原因。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-20T09:11:49.643

我将在@ [aib](https://stackoverflow.com/questions/304669/why-direct3d-application-performs-better-in-full-screen-mode#304689)的回答中添加屏幕的其余部分由操作系统管理。因此，如果需要同时绘制/处理其他任何内容，则必须对性能造成影响。

例如，如果您在 Windows Media Player 的一个窗口中播放视频，然后在另一个窗口中启动 Civilization，当 Civ 开始制作精美的图形时，它将需要与其他所有内容共享屏幕空间（例如视频。

而如果 DirectX 应用程序具有全屏，则其他所有内容都可能正在“更新”或“播放”，但*不会*被绘制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-22T05:59:06.157

基本上，视频硬件完全专用于独占模式应用程序。

不存在视频资源争用（管道、纹理内存等...）

特别是，纹理上传可能是一个很大的瓶颈。你必须做的越少（因为你拥有一切）越好。

# visual-studio - 依赖项和在 vs 安装程序 6 中手动添加 dll/ocx 之间的区别是什么？

> ID：304685
> 
> 赞同：0
> 
> 时间：2008-11-20T08:52:21.197
> 
> 标签：visual-studio, vb6, windows-installer, installation, vsinstaller

我正在使用 vs 安装程序为我的 vb6 应用程序构建安装程序包。问题是我可以看到在项目资源管理器下有一个附加到我的 exe 文件的依赖项列表。

[替代文字 http://img505.imageshack.us/img505/9696/croppercapture259lr8.png](http://img505.imageshack.us/img505/9696/croppercapture259lr8.png)

在目标机器树视图上的文件系统下，我实际上可以将 dll/ocx 存储在一个文件夹或 Windows 系统文件夹本身[左侧窗口]中。

[替代文字 http://img101.imageshack.us/img101/9224/croppercapture251qm1.png](http://img101.imageshack.us/img101/9224/croppercapture251qm1.png)

所以我不明白的是..实际上有区别吗？如果我只是设置了依赖项并且没有将 dll 或 ocx 添加到文件夹或 win sys 文件夹中，那么 dll 是否也会自动被复制过来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T13:34:37.197

不能保证所有这些 dll 都将存在于安装软件的系统上。因此，它们需要包含在您的安装程序中。从那里你有两个选择。

您可以将它们安装在 Windows 系统文件夹或应用程序文件夹中。不同之处在于，如果您将它们安装在您的应用程序文件夹中，您可以在 XP 和 Vista 上进行设置，以便可以启动具有不同版本组件的不同版本软件并同时运行。将它们安装到系统文件夹将破坏任何依赖旧版本组件的旧版本。

如果一个组件依赖于其他无法更新的组件，那么在应用程序文件夹中安装很少会不起作用。发生这种情况时，通常与 Microsoft 库一起使用。多年来，他们在这个问题上做得更好。

[您可以在此处](http://msdn.microsoft.com/en-us/library/8477k21c.aspx)阅读有关并行执行问题的更多信息

最后，依赖项需要在您的安装程序中，以便它们在 Windows 注册表中注册。与大多数 .NET 程序集不同，任何 ActiveX/COM 应用程序都需要注册组件才能使用它，即使您使用 CreateObject 和 Variant 类型来访问它。

我承认整个过程是特殊的，并且是关于 DLL Hell 的故事的来源之一。从 MSDN 文章开始，使用 wikipedia，当然还可以在这里提出更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-17T19:26:55.607

对于普通的安装程序包，您通常不应该在 app 文件夹下有“dlls”文件夹，但其中涉及许多因素（私有标准 DLL、Reg-Free COM 等）。是的，包含依赖项（除非您*排除*它们）。它们每个都应该有一个属性来确定它们在目标系统上的安装位置。

该列表中还有许多组件不能以这种方式重新分发，因为它们是依赖于操作系统的系统组件、MDAC 组件，或者未获得 redist 许可（例如 fm20.dll）。

可悲的是，这是可以直接导致用户系统的 DLL Hell 的包类型的一个示例。解决此问题可能意味着研究 MS 知识库文章中的每个 MS 组件，以确定可以或应该重新分发哪些内容以及如何重新分发。

Deployment can be a messy business to get right.

# asp.net - ASP .net 会员交易

> ID：304692
> 
> 赞同：4
> 
> 时间：2008-11-20T08:55:03.407
> 
> 标签：asp.net, transactions

我想在一个事务中进行两个数据库操作。这两个操作是

1.  执行一次插入操作。
2.  创建一个用户（使用成员资格 - sql 成员资格提供程序）

我尝试了**TransactionScope**但它在该行进入分布式事务： -- Membership.CreateUser("test", "password", "test@test.com");

由于我只有数据库，如何使用轻量级事务来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-20T08:57:56.943

如果您使用单个数据库连接，则 TransactionScope 的当前实现将仅使用轻量级事务。因此，在您的场景中无法实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-03T20:56:37.020

我有一个类似的问题。我的解决方案是（我仍然不确定它是否会工作）下载 ASP.Net Membership Provider 代码并重建它，劫持 SqlConnectionHolder 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-05-10T06:01:34.880

我一直在寻找这个话题，我想我已经找到了答案。它仅适用于 SQLServer 2008。它不需要更改 System.Transactions 命名空间或我们的应用程序代码。这真有趣。;)

[http://blogs.msdn.com/b/adonet/archive/2008/03/26/extending-lightweight-transactions-in-sqlclient.aspx](http://blogs.msdn.com/b/adonet/archive/2008/03/26/extending-lightweight-transactions-in-sqlclient.aspx)

希望这可以帮助！

# c# - 查找附加到类型的属性时出现问题

> ID：304695
> 
> 赞同：0
> 
> 时间：2008-11-20T08:55:20.643
> 
> 标签：c#, .net, reflection, attributes

运行下面的代码时，永远不会返回类型，尽管有一个分配了正确属性的类。实际上 attr 数组的长度始终为 0。

```
Assembly a = Assembly.LoadFile(file);
foreach (Type t in a.GetTypes())
{
    object[] attr = t.GetCustomAttributes(typeof(SchemeNameAttribute), false);

    foreach (object attribute in attr)
    {
        SchemeNameAttribute schemeName = attribute as SchemeNameAttribute;
        if (schemeName != null && schemeName.Name.ToLower() == brickName.ToLower() )
        {
            return t;
        }
    }
} 
```

如果我将其更改为使用：

```
object[] attr = t.GetCustomAttributes(false); 
```

然后它为该类型选择一个 SchemeNameAttribute 类型的自定义属性，但是

```
SchemeNameAttribute schemeName = attribute as SchemeNameAttribute; 
```

总是为 schemeName 返回一个空值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T09:16:22.397

您混合了加载程序集的两种不同上下文：运行应用程序的“加载上下文”和使用 LoadFile 加载辅助程序集的“无上下文”。您想阅读[这篇](http://blogs.msdn.com/suzcook/archive/2003/05/29/57143.aspx)和[那篇](http://blogs.msdn.com/suzcook/archive/2003/09/19/loadfile-vs-loadfrom.aspx)文章以了解有关加载上下文的想法。这里最重要的部分是加载到不同上下文的程序集，即使是从同一个位置，也被认为是不同的。因此它们中的类型被认为是不同的。因此，**加载**程序集中的 SchemeNameAttribute 类型与应用程序中的 SchemeNameAttribute 类型不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T09:15:41.960

我怀疑您已经重新声明了该属性 - 即 SchemeNameAttribute 类型是在两个程序集中（单独）声明的（可能通过复制 .cs）。这行不通；类型由它们的程序集限定，因此 Foo.dll 中的 SchemeNameAttribute 与 Bar.dll/Bar.exe 中的 SchemeNameAttribute 是不同的类型。

您应该确保 SchemeNameAttribute 类型只声明一次 - 如有必要，将其移动到现有程序集都可以引用的 dll 中。

# .net - CLR 是否会自动检测垃圾收集器是否应该在服务器模式下运行？

> ID：304700
> 
> 赞同：0
> 
> 时间：2008-11-20T08:57:17.067
> 
> 标签：.net, garbage-collection, clr

从上一个问题中，我看到 CLR 的垃圾收集器具有工作站和服务器模式。我知道这些可以使用[`gcServer`](http://msdn.microsoft.com/en-us/library/ms229357.aspx)元素从配置中设置。

**如果你不指定这个，CLR 是否会使用一些魔法来决定垃圾收集器是否应该在服务器模式下运行？** 基于 CPU 计数或内存分析的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T08:59:59.887

当然不是。CLR 在并发模式下运行，除非您明确告诉它不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T09:03:53.980

根据您链接到的文档，默认值为“false”。我希望这在所有安装和实例上都保持不变，MS 文档在这类事情上非常好。

唯一需要注意的是，安装程序（或某人）可能在服务器 O/S 上将 machine.config（对于 ASP.NET）中的此设置设置为“true”。这纯粹是猜测，可能并非如此。

# javascript - 雅虎没有 DOM！小部件网络对象？

> ID：304706
> 
> 赞同：0
> 
> 时间：2008-11-20T09:00:08.763
> 
> 标签：javascript, dom, yahoo-widgets

[我有一个雅虎！Widgets Web 对象](http://manual.widgets.yahoo.com/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Konfabulator_HTML&file=DOM_Web.html)，我想在加载完成后访问其中的元素。我已经通过 Y!W 提供的 WebEvents 很好地处理了所有事情，但是有一个小问题。

Web 对象似乎没有加载页面的任何 DOM。

我可以访问 webObj.html，它是加载页面的源，但作为一个字符串。

我找不到任何东西可以将该 html 解析为 DOM 对象。XMLDOM.parse() 是文档中唯一匹配“parse”的东西，这是不行的。

[Y!W 文档说 getElementById 仅适用于内部的 Frame、Window 和 Widget 对象。](http://manual.widgets.yahoo.com/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Konfabulator_HTML&file=DOM_CommonFunctions_getElementById.html) 我想做的事（抓取一个页面，通过该页面中的已知 id 获取值，用这些值做一些事情）不是 Y!W 想要你做的事情吗？我必须只与 xml/json 服务交互吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-12T11:46:23.607

您可以像这样访问 Web 对象的文档：

```
document.getElementById('WebObjectID').base.document.getElementById('HTMLElementID') 
```

`webObj.base`返回内部 DOM

# web-services - BPEL 初学者指南

> ID：304713
> 
> 赞同：20
> 
> 时间：2008-11-20T09:03:57.570
> 
> 标签：web-services, business-logic, bpel

什么是 BPEL？我正在寻找一些 BPEL 用法的简单示例。维基百科页面不是太有启发性。BPEL 中的“Hello world”怎么样？BPEL 外壳？BPEL IDE？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-20T20:05:52.977

BPEL 只是一种从一个集中的地方构建对不同但相互依赖的系统的集中控制的方法。

用户可以创建规则、工作流和其他控制结构，以确保一切顺利。

例如，假设您经营一个学区；特别是学区的信息基础设施。多年来，您积累了各种各样的硬件和软件。针对您所在地区的各个方面；评分、考勤、公交路线、营养、工资单等，您拥有由不同供应商以不同语言编写的各种不同软件。好吧，您的数据有一些重叠，不同的最终用户使用不同的软件，他们希望这一切都相互一致——您使用您的 BPEL 系统来确保所有数据都在它应该在的位置应该在那里。

在另一个系统上成功完成另一个进程后，您还必须运行一些进程。您使用 BPEL 来确保它们是协调的。BPEL 是关于集中协调的，除非您在一个大型组织和许多不同的系统中，否则您可能不需要它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-01-20T18:25:09.850

本 BPEL 教程介绍了如何从头开始编写 BPEL。
[为 WSO2 BPS 和 Apache ODE 编写一个简单的 WS-BPEL 流程](http://wso2.org/library/articles/writing-simple-ws-bpel-process-wso2-bps-apache-ode)

本文介绍了基于 IDE 的 BPEL 流程开发。[使用 WSO2 Carbon Studio 开发 WS-BPEL 流程](http://wso2.org/library/tutorials/2011/04/using-carbon-studio-model-wsbpel-process-using-bpel-editor)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T09:55:18.387

看看[ActiveBPEL](http://www.activevos.com/community-open-source.php) IDE。您还可以在[Oracle](http://otn.oracle.com/bpel)中找到简短的 101 BPEL 指南。该演示是关于 Oracle 的 BPEL 引擎的，但源代码足够通用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-14T14:31:33.297

**背景**

我将在已经说过的内容中添加一点。BPEL 是一个过程编排器。您可以使用它来执行任何类型的并行过程自动化序列化。例如：客户在公司“AAA”的网站上购买了一些东西，这在该公司的面向服务的架构 (SOA) 中引发了一个 BPEL 流程。在这个 BPEL 中，一系列 BPEL 组件对消费者购买产生的有效负载进行工作。此有效负载可以包含有关买方和所购买物品的各种信息，例如`<shippingAdress>`和`<itemId`. 调用 BPEL 组件可用于将信息从有效负载发送到另一个 BPEL 流程或通过 BPEL 所在的组合中的 Web 服务调用发送到另一个链接的公司。该公司可以负责所购买物品的运输，另一家公司可以负责处理款项。所有这些公司的交易都是通过包含一系列 BPEL 流程的复合应用程序实现的。所有人都通过（a）同步网络服务调用在网络上传递信息。BPEL 部分是逻辑所在，功能的真正自动化/编排所在。

**入门** 对于那些愿意阅读的人来说，soa 套件 11g 和 12c 的 Oracle 文档网站非常广泛。如果你喜欢从基础开始做一个教程，你可以使用他们建议的代码开始。将他们的文档应用到现有的 BPEL 项目时会有点棘手，但它仍然是许多关于 SOA 的基本问题和示例的良好来源。

[https://docs.oracle.com/cd/E12483_01/integrate.1013/b28981/async.htm](https://docs.oracle.com/cd/E12483_01/integrate.1013/b28981/async.htm) 此外，快速谷歌搜索将引导您找到一些博主编写的专家指南。其中一些比 oracle 文档对初学者更友好，但大多缺乏与您自己的项目有关的详细信息。

[http://javaoraclesoa.blogspot.com/2016/02/asynchronous-interaction-in-oracle-bpel.html](http://javaoraclesoa.blogspot.com/2016/02/asynchronous-interaction-in-oracle-bpel.html)

您也可以在 youtube 上发布一些有关 BPEL 的视频，以了解其中的精华 :)。

祝好运并玩得开心点！

# oracle - 用于 Pl/SQL 开发的 IDE

> ID：304716
> 
> 赞同：15
> 
> 时间：2008-11-20T09:05:57.177
> 
> 标签：oracle, debugging, plsql

是否有任何免费的 IDE 用于 Pl/SQL 开发

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-20T09:50:21.907

我每天都使用[SQL Developer来开发包。](http://www.oracle.com/technology/products/database/sql_developer/index.html)虽然它并不完美，但它有一些有用的功能：

*   语法高亮；
*   自动完成；
*   调试（尽管据我所知不是实时请求）；
*   简单的连接配置（基于 JDBC 以及 TNSNAMES）；
*   ...

它也是免费的，不像前面提到的（当然更好）[Toad 。](http://www.toadsoft.com/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-20T09:20:28.863

[Toad](http://www.toadsoft.com/)从我周围必须与 Oracle 合作的开发人员那里得到了合理的评价。每个人都讨厌[Oracle SQL 开发人员](http://www.oracle.com/technology/products/database/sql_developer/index.html)。我个人经验很少。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-10-15T20:41:58.283

我也在使用Allround 自动化的[PL/SQL Developer](https://www.allroundautomations.com/plsqldev.html)。

我非常讨厌它的所有错误，并且我们支付了整年的维护费用，但在那期间没有看到任何新内容。但是由于一些相当奇怪的原因，它仍然在所有其他极度高估和功能不足的 PL/SQL 工具中胜出。而且我不是在谈论 Oracle 管理，它也可以做得很好，感谢在其中编写脚本的速度有多快。它的重点是 PL/SQL，而不是点击式表创建。但是，我的奶奶可以构建一个用于管理表、用户等的工具。一个好的代码编辑器并不容易。*G*

有一件事，除了每次遇到的无数小错误之外，它完全不知道 Oracle 有非标准标识符的转义语法这一事实。您不能对此类对象使用它的 GUI，但必须求助于命令窗口或任何其他编辑器自己编写脚本。

顺便说一句，我仍然使用它并且更喜欢它的替代品这一事实并不能很好地反映在 IMO 商业 Oracle IDE 市场上。我认为对于编写 DB 代码来说，它比我迄今为止遇到的任何 DBMS 中的任何东西都要好。它对东西的 GUI 支持很少，但它的不同代码编辑器非常有能力和生产力。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-20T09:10:54.997

我个人喜欢[http://www.allroundautomations.nl/plsqldev.html](http://www.allroundautomations.nl/plsqldev.html)

通常对 PL/SQL 和 Oracle 非常有用。但不是免费的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-04-28T19:01:01.010

SQL Tools 是一款轻量级、快速、无约束的撤销PL/SQL IDE。尽管它不存在的一个维度是调试器同意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-09T23:51:24.090

[SQL Tools](http://www.sqltools.net/)是一个免费的 PL/SQL IDE，它轻量级、快速，而且是免费的。尽管它缺少的一个功能是调试器支持。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-04-21T14:39:48.213

还有一个用于 NetBeans 的开源插件，名为[PL/SQL Editor](http://code.google.com/p/pl-sql-editor/)。

它目前（2.1 版）非常初级，需要一个实时数据库才能工作（不能使用磁盘上的 PL/SQL 脚本源进行离线工作），而且我无法在我的 Oracle 上使用导航（“Go To Declaration”） 10 申请。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-30T13:39:30.053

我多年来一直在使用 Squirrel SQL，并且喜欢它 b/c 它独立于数据库。它确实有一些限制，但如果我需要更多 DBA 工具，我也会使用 SQL Developer。

# asp.net - 如何不使用 AJAXToolkit AutoComplete Extender 提交表单？

> ID：304723
> 
> 赞同：0
> 
> 时间：2008-11-20T09:10:01.597
> 
> 标签：asp.net, javascript, asp.net-ajax, autocomplete, ajaxcontroltoolkit

我在我的项目中使用了 AJAXToolkit AutoComplete 扩展器。它工作正常。但问题在于页面的形式。当我输入自动完成时，我得到建议列表。当我点击自动完成以外的页面时，表单被提交。任何建议如何在我单击页面时停止提交整个表单？我使用 .net 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T20:49:04.947

您的 TextBox 是否设置了 AutoPostBack="True"？如果是这样，它会在您“完成”时自动回发（当输入控件失去焦点时）。如果是这种情况，只需将其设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-22T13:48:08.247

我认为这就像向您的元素添加必需的验证器以查看用户是否选择了任何东西一样简单。

埃里克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-23T05:53:00.777

使用 jquery 添加检测点击的事件处理程序。发生单击时，停止浏览器。如果您需要代码，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T04:10:24.447

是的，我的 TextBox AutoPostBack 设置为 true，我现在将其更改为 false。

但我的每个建议都有一个 url。点击建议后，用户将导航到该特定 url。当我执行 AutoPostback="false" 时，我不会导航到该页面。

我该如何处理？

# sharepoint - 在共享点列表预览视图样式中添加额外的列

> ID：304734
> 
> 赞同：0
> 
> 时间：2008-11-20T09:13:33.417
> 
> 标签：sharepoint, moss

我正在使用开箱即用的预览视图样式来显示列表。我的要求是在视图的左侧显示和额外的列，以及标题列。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T22:09:29.200

您可以通过修改默认视图来添加额外的列。为此，您应该在列表的右上角看到“查看全部”视图。
- 单击该标签并从下拉菜单中选择“修改当前视图”。
- 您将进入一个表单，该表单允许您选择希望（或不希望）在“默认”视图中显示的列。
- （您还可以选择排序、过滤等...此视图满足您的需求）。

此外，从我提到的下拉列表中，您可以创建一个“新视图”而不是修改默认视图，然后，在列表设置中，您可以选择所有可用视图中的哪个视图作为默认视图.

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-26T00:00:20.197

可悲的是，没有简单的、受支持的方法来做到这一点。您必须修改预览 ViewStyle（定义在 C:\Program Files\Common Files\Microsoft Shared\web server extensions\12\TEMPLATE\GLOBAL\XML\VWSTYLES.XML 中）以显示您的列。现在这当然可以完成 - 显示 CAML 很痛苦，但并非不可能，但它会修改整个 sharepoint 安装的预览视图样式。有关更多信息，请参见[http://mo.notono.us/search?q=viewstyle](http://mo.notono.us/search?q=viewstyle)

另一种方法可能是通过 javascript（我会使用 jQuery），尽管我不完全确定您将如何完成它。我确实知道 EndUserSharePoint.com 的 Paul 用客户端脚本做了一些了不起的事情......

# c# - POCO 对象中的非空约束

> ID：304745
> 
> 赞同：2
> 
> 时间：2008-11-20T09:18:12.847
> 
> 标签：c#, nhibernate, class-design, dbnull

我目前正在编写一个财务应用程序，我们有一个非常标准的客户表。它由许多必填字段和一些可选字段组成，例如 Cell/Fax 等。我使用 NHibernate 作为 ORM 并且所有映射都正确。它已经起作用了。

我只是想知道，我如何在代码中“表达”一个字段不为空而不注释？我有记录这个的 hbm.xml 文件，但是对于这样的事情来看它们有点尴尬。

想到的另一件事是我不希望存储库在我的逻辑上抛出 NHibernate 异常，所以也许我应该在控制器中进行验证。不过，我怎样才能让 POCO 代码表达某些字段可以为空？

![类图](https://www.tigraine.at/wp-content/uploads/2008/11/demo.png)

如您所见，我希望蜂窝和传真是可选的，而电话是必需的。它们都只是复合映射，所以映射文件只是指定每个元素的单个元素必须不为空，但我讨厌一直执行 Person.Cellular != null 检查以避免出现 NullReferenceException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T12:28:27.860

根据您的 POCO 行为和编码风格，有几种方法可以做到这一点。首先，您可以使用可空类型来表示该字段可以为空，因此暗示其余字段不可为空。或者，您可以引入 Phone 值类型作为您说明的 POCO 的 Phone 属性的类型，这意味着因为它不是原始类型，所以它“更重要” - 这也将使您能够在类中封装电话号码验证本身。

在我看来，要成为一个真正的 POCO 对象，它不必担心它所在的数据库表中的潜在可空性……它实际上应该具有将其行为表达为独立实体的验证和值类型；因此在它到达 NHibernate 之前它已经处于有效状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-28T23:58:42.227

将 notnull 属性设为只读并通过公共构造函数写入它们。使默认构造函数受保护或私有。

```
public class DomainObject{
private string nnp;
protected DomainObject(){}
public DomainObject(string nnp){
this.nnp = nnp;
}
public string NotNullProp {get {return nnp;}}
public string NullableProp {get;set;} 
} 
```

# html - 电子邮件中的视频？

> ID：304748
> 
> 赞同：1
> 
> 时间：2008-11-20T09:19:04.933
> 
> 标签：html, email, video

我们经常为客户发送 HTML 格式的电子邮件（不喜欢但不是我的选择）

有没有人有关于电子邮件客户端中的 dynsrcc 属性或 img 支持的任何信息或链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T09:25:21.613

我的解决方案是为您的电影制作一个屏幕截图（可能带有“点击观看”叠加层），该屏幕截图链接到其中包含播放器的非邮件页面。

根据我的经验，处理 html 电子邮件与其说是制定标准，不如说是学会妥协。Web 客户端和（越来越少见的）桌面客户端具有不同的行为，相比之下，网站浏览器合规性看起来像是幼儿园。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-04-13T21:14:46.963

同意“dynsrc”不起作用，句号。

你有三个选择：

1.  在顶部放置一个带有播放按钮的静止图像 - 根据我的经验，这非常有效。
2.  使用动画 GIF - 你没有任何声音，而且质量很差，但你可以让它看起来像视频。这在 Outlook 2007/10 中也不起作用，因为动画 gif 在那里不起作用。
3.  检查您的客户查看基础 - 如果在 Gmail 中它非常高，您可以考虑只使用 YouTube 标签，因为它会在 Gmail 中播放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T14:12:58.163

忘记 dynsrc。它在 IE 中无法可靠运行，在任何其他浏览器中也无法运行，甚至在考虑邮件客户端和 Web 邮件服务的各种限制以及将像 base64 编码的视频文件一样大的文件下推的困难之前邮件管。

正如本所说，链接到一个普通的旧网页，包括一个 Flash 播放器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T18:06:52.243

问题是电子邮件支持中的视频不是通用的，不幸的是——可能在一段时间内不会通用。电子邮件营销服务提供商 - Pinpointe [http://www.pinpointe.com](http://www.pinpointe.com)，在各种电子邮件客户端中测试了视频支持，最终结论是只有 Apple 邮件对电子邮件中的视频支持较好，而 Gmail 支持 youtube 视频的预览。有几种可能的方法可以在电子邮件中嵌入视频 - 以下是可能性的简要说明：

*   闪光。Flash 可以通过使用带有 EMBED 标记的 OBJECT 标记嵌入到网页中，以嵌入将检测是否安装了 Flash 的 Javascript。但是……电子邮件不支持 Javascript。Bummer – 这意味着无法检测是否安装了 Flash。

*   快速时间。在网页设计中，Quicktime 通常以与 Flash 相同的方式插入网页中——使用 OBJECT 和 EMBED 标签嵌入 Javascript 片段。删除 Quicktime。

*   视窗媒体。再说一遍——在网页中嵌入 Windows Media 依赖于使用 OBJECT 标签来嵌入媒体文件。又被打出来了。

*   嵌入式 MPEG。事实证明，嵌入式 MPEG 可以在 Outlook 上运行

*   而已。即便如此——您正在发送一个嵌入的视频文件。最终结果：不实用。

*   动画 GIF。啊。动画 GIF 应该看起来就像 GIF 图像，对吗？好吧，Outlook 2007 明确不支持嵌入的动画 GIF（Outlook 只显示动画 GIF 的第一帧——感谢微软……）对于其他支持动画 GIF 的电子邮件客户端——仍然有一些棘手的考虑。

    **简而言之：**

    *   动画 GIF 不包括声音。动画 GIF 电子邮件大多不适合移动设备。

    *   动画 GIF 仍会受到图像屏蔽。由于 70% 的电子邮件客户端现在默认阻止图像 - 图像很可能被完全阻止。

    *   没有用户控制 - 动画 GIF 在打开时播放

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T10:16:59.967

我在这里找到了一些信息[http://stylecampaign.com/blog/?p=29](http://stylecampaign.com/blog/?p=29)

不全面。

如果适合这种情况，我会考虑 Ben 的建议

# asp-classic - 经典 ASP - IIS 5 到 IIS 6 迁移会导致图像缓存问题？

> ID：304749
> 
> 赞同：1
> 
> 时间：2008-11-20T09:19:40.393
> 
> 标签：asp-classic, iis-6, iis-5

提前为这个冗长的问题道歉。

我真的是一名数据库程序员，但继承了对最近从 IIS 5 迁移到运行 IIS 6 的新服务器的经典 ASP Intranet 应用程序的支持。用户群大约有十几个，全部使用 IE 6。

UI 显示从数据库返回的项目的层次结构，使用 HTML 无序列表和 javascript 的组合在用户导航时隐藏/展开分支。

图像显示在具有 CSS 的列表成员旁边（使用 list-style-image），每种类型的项目使用不同的图像。层次结构中不同项目类型（以及图像）的数量在 2 到 10 之间变化。层次结构在 20 到 200 之间变化。

**问题：**

自从迁移到 IIS 6 以来，一些用户遇到了一个问题，这似乎是由于图像未能正确应用于层次结构中的一个或多个项目引起的；列表显示正确，但缺少一张或多张图片，单击任何链接会导致加载空白页面。

使用 Wireshark 和 IIS 日志分析网络流量表明问题不在服务器端 - 所有内容都已正确提供给客户端。

该问题似乎与客户端的内容缓存有关：它似乎更经常影响以前未在当前 PC 上使用过该应用程序或一段时间未使用过该应用程序的用户。此外，我可以通过启动会话、清除浏览器缓存然后刷新页面来复制大约三分之一的问题。但是，在 IIS 5 上运行的应用程序也是如此，因此在迁移到 IIS 6 之前可能已经存在此问题，但发生频率较低。有时，如果我离开会话 20 分钟左右，浏览器似乎会“找到”丢失的图像，并且一切正常。

如果通过本地代理（我使用 Fiddler）访问应用程序，则问题永远不会发生，尽管 Fiddler 连接日志显示与服务器建立的一个或多个连接以检索图像已中止。和以前一样，网络流量显示图像是由服务器返回的。但是，使用代理似乎使 IE 能够从缓存中找到其他成功检索到的图像副本。

我已经到了我对调试 ASP/IIS 问题的有限知识的尽头。从 CSS 中删除 list-style-images 可以解决问题，但这必须是最后的选择，因为它会使应用程序更难使用。

任何关于我如何进行的建议将不胜感激。

**编辑**

AnonJr 建议这一定是客户端配置问题，因为所有其他组件似乎都在正常运行。

我忽略了一个简单的客户端配置问题，因为这是唯一受所描述问题影响的应用程序我已经测试了工具 > Internet 选项 > 临时文件 > 设置下的所有选项，但行为没有变化。

我应该考虑哪些其他客户端配置选项？

**编辑 2 - 一个解决方案**

当从客户端脚本生成 HTML 时，接受的答案提示我搜索 IE6 请求多个图像副本的已知问题 - [http://support.microsoft.com/default.aspx?scid=kb;en-us; 319546](http://support.microsoft.com/default.aspx?scid=kb;en-us;319546)。

该文章（已声明此行为是“设计使然”）建议通过将所需图像加载到不可见的 DIV 中来预缓存所需图像的解决方法：

```
<DIV style='display:none'><IMG SRC='image.gif'></DIV> 
```

这似乎对我有用 - 我无法再通过在会话中间清除浏览器缓存来复制问题，并且 Fiddler 跟踪显示每个图像仅被请求一次。

我确实发现了一个我以前不知道的警告；IE 缓存区分大小写，因此仅当不可见 DIV 中指定的文件名的大小写与页面中其他地方使用的大小写匹配时才会使用缓存的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T22:11:05.733

这有点 IE6 错误的味道，即浏览器对同一资源发出多个请求。例如，如果内容要求在列表中显示重复 20 次的小图标，则它不会仅获取该图像一次，而是尝试获取 20 次。OK 19 的响应是 304 Not Modified 但这仍然是到服务器的 19 次额外往返。

我过去发现这种过度请求最终会导致太多未完成的请求。那时，对服务器的进一步请求，即使是其他页面也很难得到响应，至少在一段时间内是这样。

我不确定这是否是您的情况，检查此问题的一种方法是使用 IE7 来查看您是否遇到相同的问题，此错误已在 IE7 中修复。

**编辑**：现在问题已确认是我所指的错误，您还应该注意 KB 对“短时间延迟”的引用。潜在的问题是，为了重新使用新获取的图像，浏览器需要执行推迟到当前 javascript 块完成之前的工作。不仅需要“短时间延迟”，还需要异步方法。

我已经使用 display:none DIV 方法来预取图像，这适用于 AJAX 风格的工作。但是，如果您在窗口的 onload 事件期间或之前运行代码，则在此代码中添加图像时仍然会遇到问题。为了在 onload 事件完成后运行进一步的代码，需要一个 setTimeout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T22:20:36.277

您可能希望将注意力集中在调整客户端的缓存设置上。如果图像是由服务器发送的，则不太可能是 IIS 问题。如果将图像的 HTML 发送到浏览器，则它不是 ASP 问题。这离开了客户。

代理可能正在缓解一些问题，和/或它可能是 IE6 决定缓存图像等的一个因素。

# c++ - 如何估计线程上下文切换开销？

> ID：304752
> 
> 赞同：61
> 
> 时间：2008-11-20T09:21:23.197
> 
> 标签：c++, c, multithreading, windows-mobile

我正在尝试通过实时截止日期提高线程应用程序的性能。它在 Windows Mobile 上运行并用 C/C++ 编写。我怀疑高频率的线程切换可能会导致有形的开销，但无法证明或反驳它。众所周知，缺乏证据并不是相反的证据:)。

因此，我的问题是双重的：

*   如果存在，我在哪里可以找到切换线程上下文成本的任何实际测量值？

*   在不花时间编写测试应用程序的情况下，有哪些方法可以估算现有应用程序中的线程切换开销？

*   有谁知道找出给定线程的上下文切换（开/关）数量的方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-11-20T10:46:15.040

我怀疑您是否可以在任何现有平台的网络上的某个地方找到此开销。存在太多不同的平台。开销取决于两个因素：

*   CPU，因为在不同的 CPU 类型上，必要的操作可能更容易或更难
*   系统内核，因为不同的内核必须在每个交换机上执行不同的操作

其他因素包括转换是如何发生的。切换可以发生在

1.  该线程已使用其所有时间段。当一个线程启动时，它可能会运行给定的时间，然后才必须将控制权返回给将决定下一个线程的内核。

2.  线程被抢占了。当另一个线程需要 CPU 时间并具有更高的优先级时，就会发生这种情况。例如，处理鼠标/键盘输入的线程可能就是这样的线程。不管现在哪个线程*拥有*CPU，当用户输入或点击某些东西时，他不想等到当前线程的时间段完全用完，他希望看到系统立即做出反应。因此，一些系统会立即停止当前线程并将控制权返回给具有更高优先级的其他线程。

3.  线程不再需要 CPU 时间，因为它阻塞了某些操作或者只是调用了 sleep() （或类似的）来停止运行。

这 3 种场景理论上可能有不同的线程切换时间。例如，我希望最后一个最慢，因为对 sleep() 的调用意味着 CPU 被归还给内核，内核需要设置一个唤醒调用，以确保线程在大约它请求睡眠的时间量，然后它必须将线程从调度进程中取出，一旦线程被唤醒，它必须再次将线程添加到调度进程中。所有这些陡峭的斜坡都需要一些时间。所以实际的睡眠调用可能比切换到另一个线程所需的时间更长。

我认为，如果您想确定，则必须进行基准测试。问题是您通常必须让线程进入睡眠状态，或者您必须使用互斥锁同步它们。休眠或锁定/解锁互斥体本身就有开销。这意味着您的基准测试也将包括这些开销。如果没有强大的分析器，以后很难说实际切换使用了多少 CPU 时间以及睡眠/互斥调用使用了多少。另一方面，在现实生活中，你的线程要么休眠，要么通过锁同步。纯粹测量上下文切换时间的基准是综合基准，因为它不模拟任何现实生活场景。如果基准基于现实生活场景，它们会更加“现实”。如果这个结果在现实生活中的 3D 应用程序中永远无法实现，那么 GPU 基准测试告诉我理论上我的 GPU 每秒可以处理 20 亿个多边形有什么用？知道现实生活中的 3D 应用程序可以让 GPU 每秒处理多少个多边形不是更有趣吗？

不幸的是，我对 Windows 编程一无所知。我可以用 Java 或 C# 为 Windows 编写应用程序，但 Windows 上的 C/C++ 让我哭了。我只能为您提供一些 POSIX 的源代码。

```
#include <stdlib.h>
#include <stdint.h>
#include <stdio.h>
#include <pthread.h>
#include <sys/time.h>
#include <unistd.h>

uint32_t COUNTER;
pthread_mutex_t LOCK;
pthread_mutex_t START;
pthread_cond_t CONDITION;

void * threads (
    void * unused
) {
    // Wait till we may fire away
    pthread_mutex_lock(&START);
    pthread_mutex_unlock(&START);

    pthread_mutex_lock(&LOCK);
    // If I'm not the first thread, the other thread is already waiting on
    // the condition, thus Ihave to wake it up first, otherwise we'll deadlock
    if (COUNTER > 0) {
        pthread_cond_signal(&CONDITION);
    }
    for (;;) {
        COUNTER++;
        pthread_cond_wait(&CONDITION, &LOCK);
        // Always wake up the other thread before processing. The other
        // thread will not be able to do anything as long as I don't go
        // back to sleep first.
        pthread_cond_signal(&CONDITION);
    }
    pthread_mutex_unlock(&LOCK); //To unlock
}

int64_t timeInMS ()
{
    struct timeval t;

    gettimeofday(&t, NULL);
    return (
        (int64_t)t.tv_sec * 1000 +
        (int64_t)t.tv_usec / 1000
    );
}

int main (
    int argc,
    char ** argv
) {
    int64_t start;
    pthread_t t1;
    pthread_t t2;
    int64_t myTime;

    pthread_mutex_init(&LOCK, NULL);
    pthread_mutex_init(&START, NULL);   
    pthread_cond_init(&CONDITION, NULL);

    pthread_mutex_lock(&START);
    COUNTER = 0;
    pthread_create(&t1, NULL, threads, NULL);
    pthread_create(&t2, NULL, threads, NULL);
    pthread_detach(t1);
    pthread_detach(t2);
    // Get start time and fire away
    myTime = timeInMS();
    pthread_mutex_unlock(&START);
    // Wait for about a second
    sleep(1);
    // Stop both threads
    pthread_mutex_lock(&LOCK);
    // Find out how much time has really passed. sleep won't guarantee me that
    // I sleep exactly one second, I might sleep longer since even after being
    // woken up, it can take some time before I gain back CPU time. Further
    // some more time might have passed before I obtained the lock!
    myTime = timeInMS() - myTime;
    // Correct the number of thread switches accordingly
    COUNTER = (uint32_t)(((uint64_t)COUNTER * 1000) / myTime);
    printf("Number of thread switches in about one second was %u\n", COUNTER);
    return 0;
} 
```

输出

```
Number of thread switches in about one second was 108406 
```

超过 100'000 并不算太糟糕，即使我们有锁定和条件等待。我猜如果没有所有这些东西，每秒至少可以进行两倍的线程切换。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-11-20T14:07:08.363

你无法估计。你需要测量它。它会因设备中的处理器而异。

有两种相当简单的方法可以测量上下文切换。一个涉及代码，另一个不涉及。

一、代码方式（伪代码）：

```
DWORD tick;

main()
{
  HANDLE hThread = CreateThread(..., ThreadProc, CREATE_SUSPENDED, ...);
  tick = QueryPerformanceCounter();
  CeSetThreadPriority(hThread, 10); // real high
  ResumeThread(hThread);
  Sleep(10);
}

ThreadProc()
{
  tick = QueryPerformanceCounter() - tick;
  RETAILMSG(TRUE, (_T("ET: %i\r\n"), tick));
} 
```

显然，循环执行并平均会更好。请记住，这不仅仅测量上下文切换。您还在测量对 ResumeThread 的调用，并且不能保证调度程序会立即切换到您的另一个线程（尽管 10 的优先级应该有助于增加它的可能性）。

通过挂钩调度程序事件，您可以使用 CeLog 获得更准确的测量结果，但这远非简单且没有很好的文档记录。如果你真的想走这条路，Sue Loh 有几个搜索引擎可以找到的博客。

非代码路线是使用远程内核跟踪器。安装 eVC 4.0 或 Platform Builder 的 eval 版本来获取它。它将以图形方式显示内核正在执行的所有操作，您可以使用提供的光标功能直接测量线程上下文切换。同样，我确信 Sue 也有一篇关于使用 Kernel Tracker 的博客文章。

综上所述，您会发现 CE 进程内线程上下文切换非常非常快。进程切换是昂贵的，因为它需要交换 RAM 中的活动进程，然后进行迁移。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-11-20T09:37:23.413

虽然您说您不想编写测试应用程序，但我这样做是为了之前在 ARM9 Linux 平台上进行的测试，以了解开销是多少。只有两个线程会 boost::thread::yield() （或者，你知道）并增加一些变量，大约一分钟后（没有其他正在运行的进程，至少没有做某事），应用程序打印它每秒可以进行多少次上下文切换。当然，这并不完全准确，但关键是两个线程都相互让出 CPU，而且速度如此之快，以至于不再考虑开销。因此，只需继续编写一个简单的测试，而不是过多地考虑可能不存在的问题。

除此之外，您可以尝试使用性能计数器建议的 1800。

哦，我记得有一个在 Windows CE 4.X 上运行的应用程序，其中我们也有四个线程，有时需要频繁切换，并且从未遇到性能问题。我们还尝试在完全没有线程的情况下实现核心线程，并没有看到性能提升（GUI 只是响应慢了很多，但其他一切都一样）。也许您可以通过减少上下文切换的数量或完全删除线程（仅用于测试）来尝试相同的方法。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2010-05-15T14:50:47.343

我的[50 行 C++](http://bobah.net/d4d/source-code/misc/context-switch-benchmark-posix-cpp)显示了 Linux（QuadCore Q6600）的上下文切换时间 ~ 0.9us（2 个线程为 0.75us，50 个线程为 0.95）。在此基准测试中，线程在获得一定时间后立即调用 yield。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2011-08-19T08:21:06.803

上下文切换很昂贵，根据经验，它会花费 30µs 的 CPU 开销[http://blog.tsunanet.net/2010/11/how-long-does-it-take-to-make-context.html](http://blog.tsunanet.net/2010/11/how-long-does-it-take-to-make-context.html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-03-14T11:42:53.023

上下文切换非常昂贵。不是因为 CPU 操作本身，而是因为缓存失效。如果你有一个密集的任务正在运行，它将填充 CPU 缓存，包括指令和数据，内存预取、TLB 和 RAM 将优化内存的某些区域的工作。

当您更改上下文时，所有这些缓存机制都将被重置，并且新线程从“空白”状态开始。

除非您的线程只是增加一个计数器，否则接受的答案是错误的。当然，在这种情况下不涉及缓存刷新。在没有像真实应用程序那样填充缓存的情况下对上下文切换进行基准测试是没有意义的。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-11-20T12:16:50.817

我只尝试过一次估计，那是在 486 上！结果是处理器上下文切换需要大约 70 条指令才能完成（请注意，这发生在许多 OS api 调用以及线程切换中）。我们计算出在 DX3 上每个线程切换（包括操作系统开销）大约需要 30us。我们每秒执行的几千次上下文切换占用了 5-10% 的处理器时间。

我不知道这将如何转化为多核、多 ghz 的现代处理器，但我猜想除非你完全超越线程切换它的开销可以忽略不计。

请注意，线程创建/删除比激活/停用线程更昂贵的 CPU/OS 占用。对于线程较多的应用程序，一个好的策略是使用线程池并根据需要激活/停用。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-02-28T10:37:17.130

上下文切换的问题在于它们有固定的时间。GPU 在线程之间实现了 1 个周期的上下文切换。例如，以下示例不能在 CPU 上线程化：

```
double * a; 
...
for (i = 0; i < 1000; i ++)
{
    a[i] = a[i] + a[i]
} 
```

因为它的执行时间远小于上下文切换成本。在 Core i7 上，此代码大约需要 1 微秒（取决于编译器）。所以上下文切换时间确实很重要，因为它定义了小型作业的线程化方式。我想这也提供了一种有效测量上下文切换的方法。检查数组（在上面的示例中）必须有多长，以便线程池中的两个线程与单线程线程相比开始显示出一些真正的优势。这可能很容易变成 100 000 个元素，因此有效的上下文切换时间将在同一应用程序中的 20us 范围内。

线程池使用的所有封装都必须计入线程切换时间，因为这就是全部归结为（最后）的原因。

阿特马普里

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-20T09:27:04.107

我不知道，但你有 Windows Mobile 中常用的性能计数器吗？您可以查看上下文切换/秒之类的内容。我不知道是否有专门测量上下文切换时间的方法。

# visual-studio - .dbproj 文件的 VSTS 版本是什么？

> ID：304761
> 
> 赞同：3
> 
> 时间：2008-11-20T09:25:47.340
> 
> 标签：visual-studio, visual-studio-2008

我可以使用哪个版本的 VS2008/VSTS 处理 .dbproj 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-20T10:57:23.957

您绝对可以使用[Team Edition for Database Professionals](http://msdn.microsoft.com/en-us/library/aa833253(VS.80).aspx)。坏消息是，您似乎[只能使用此](http://msdn.microsoft.com/en-us/library/aa833253(VS.80).aspx)版本，当然也只能使用超集版本的[Team Suite](http://msdn.microsoft.com/en-us/vsts2008/default.aspx)，但这会让您在团队中退缩很多。

如果整个团队可以编辑这些文件而不必为这些昂贵的额外许可证付出代价，那就太好了。[从好的方面来说，可以使用 Team Build 构建](http://blogs.msdn.com/buckh/archive/2007/09/11/vsts-2005-and-2008-building-database-projects-with-team-build.aspx)dbproj 项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-26T03:26:36.423

值得一提的是，最近 Microsoft 更改了许可，因此如果您已经拥有 Team System Developer Edition，则可以免费使用 Team Edition for DB Pro（反之亦然）。

[公告](http://www.microsoft.com/defyallchallenges/teamsystem/default.aspx?WT.mc_id=R)

# apache-flex - 我可以更改 FlexBuilder 3 中的默认布局标尺指南吗？

> ID：304763
> 
> 赞同：0
> 
> 时间：2008-11-20T09:25:52.393
> 
> 标签：apache-flex, layout, flex3, canvas, flexbuilder

我正在使用 FlexBuilder 3。我喜欢布局指南告诉您何时放置在画布上的组件与下一个组件相距甚远（大概 8 像素）的方式。是否可以更改标尺指南弹出的距离？我将一系列标签放在一起，并希望将其更改为 4 像素。

我可以手动排列组件，但这很耗时并且容易出现人为错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-22T04:46:01.303

据我所知，这是不可能的。您只能启用/禁用对齐标尺，但没有指定间距的选项。

# .net - 使用委托会减慢我的 .NET 程序的速度吗？

> ID：304770
> 
> 赞同：16
> 
> 时间：2008-11-20T09:29:28.750
> 
> 标签：.net, delegates

使用代表会减慢我的程序吗？

我一直在避开它们，因为我真的不知道它们是否会使我的程序变慢。我知道我是否会导致（捕获）异常，这会占用大量 CPU 资源，但我不知道委托和事件以及 .NET 对它们做了什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-11-20T09:32:36.140

代表们非常非常快。不如直接方法调用快，但也不远。它们成为瓶颈的可能性微乎其微。

（同样的例外，如果使用得当，[实际上很少会导致性能问题](https://stackoverflow.com/questions/161942/how-slow-are-net-exceptions)。）

使用委托会让你的代码更简单、更易读、更健壮吗？如果是这样，请使用它们。仔细衡量你的表现，并密切关注它。只有在数据清晰时才为了性能而远离可读性。

我确信有一些图表显示了委托、接口和非虚拟方法调用的速度等——我不知道它们在哪里，但如果你真的担心的话，你总是可以自己运行测试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-20T09:41:59.210

只是对 Jon 的帖子的一个小补充：当以正常的 C# 方式使用时（即通过 lambdas/匿名方法/事件处理程序/等），它们肯定非常快 - 但请注意，委托的另一个重要用途是执行动态代码（在运行时构建的方法，或通过反射和 Delegate.CreateDelegate 的现有方法）。当以第二种方式使用时，委托提供了非常显着的速度*提升*（与反射调用等相比）。

所以不要羞于使用代表。特别是，如果有疑问 - 为实际代码测量它：如果它仍然只占总执行时间的 0.01%，它是否需要 1 或 100 个微型黄鼠狼* 是没有意义的。

*=只是一些任意少量的时间......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-20T11:32:09.143

在编程方面，性能可能是一个敏感的话题。例如，有些人坚决认为拳击是万恶之源。其他人认为字符串连接对性能有很大影响。

实际上，一切都是相对的，这一切都归结为您所谈论的背景。如果您在移动设备上编程，那么您将比在桌面应用程序上进行更多优化。

它通常归结为性能和代码优雅之间的权衡。假设您制作了世界上最优雅、可维护和可理解的代码库。一旦我们进行了一些性能优化，我们就开始用一些可能违反直觉的、非常专业的东西来混淆代码。如果我们去城里优化它，我们可能会节省 5% 或 10% 的性能，但在此过程中完全破坏了代码的优雅。

问题是“值得吗？”。

如果性能对您的项目至关重要，那么请在您的代码上运行分析器。如果您发现 90% 的处理器时间被一种效率特别低的方法占用，那么该方法是一个很好的优化候选者。除非您正在开发性能关键的应用程序，否则通常不值得追求低性能优势。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-11-20T11:59:27.933

我在 Windows CE 上工作，所以这种事情有时更相关。例如，粗鲁的反射应用真的很伤人，所以我们倾向于在合理的地方避免反射（显然反射的小应用就*可以了*）。显然我在桌面上没有这种疯狂。

我听到人们抱怨代表和 CE 的表现，但就我而言，这完全是胡说八道。我听说它“将方法调用减慢了 30%”，但如果那是糟糕算法的 30%，那么这是谁的错呢？CE 中的另一个慢点是虚拟方法，因为没有查找表，它第一次手动计算它们并缓存结果。这意味着如果你把所有的内存都弄脏了，这些缓存将被清除，这将导致下一轮的性能命中。但考虑到这一点，您是否应该为了性能而放弃有用的 OOP 技能？

我发现很多这些“OMG 不要使用它太慢”只是借口。主要是借口，因为人们不知道他们的应用程序真正出了什么*问题*，并且很容易将责任归咎于 CLR 的某些内部工作而不是他们自己的代码。如果你的表现很糟糕，那么我认为 99.9% 的时间你可以在你的应用程序或设计部分中进行一些更改，而不会丢弃工具并带来更好的改进。

# websphere - WAS 挂起线程

> ID：304775
> 
> 赞同：-5
> 
> 时间：2008-11-20T09:31:31.133
> 
> 标签：websphere

> [11/18/08 10:13:08:772 GMT+05:30] 690f5641 ThreadMonitor W WSVR0606W：线程“Servlet.Engine.Transports : 2162”(690f5641) 先前被报告为挂起但已完成。它活跃了大约 1,032,152 毫秒。服务器中总共有 21 个线程仍然可能被挂起。[11/18/08 10:13:08:775 GMT+05:30] 73f09641 ThreadMonitor W WSVR0606W：线程“Servlet.Engine.Transports : 2149”(73f09641) 之前报告为挂起但已完成。它活跃了大约 1,139,386 毫秒。服务器中总共有 17 个线程仍然可能被挂起。[11/18/08 10:13:08:775 GMT+05:30] 696c9641 ThreadMonitor W WSVR0606W：线程“Servlet.Engine.Transports : 2144”(696c9641) 以前报告为挂起但已完成。它活跃了大约 1,139，374 毫秒。服务器中总共有 18 个线程仍然可能被挂起。[11/18/08 10:13:08:828 GMT+05:30] 4e961648 SystemOut O actionIDs.size() = 0 [11/18/08 10:13:08:774 GMT+05:30] 690b5641 ThreadMonitor W WSVR0606W: 线程“Servlet.Engine.Transports : 2163”(690b5641) 先前报告为挂起但已完成。它活跃了大约 993,865 毫秒。服务器中总共有 20 个线程仍然可能被挂起。[11/18/08 10:13:08:840 GMT+05:30] 4e961648 SystemOut O 进入空主题默认.JSP [11/18/08 10:13:08:775 GMT+05:30] fd71646 ThreadMonitor W WSVR0606W: 线程“Servlet.Engine.Transports : 2155” (fd71646) 先前报告为挂起但已完成。它活跃了大约 1,139,386 毫秒。服务器中总共有 19 个线程仍然可能被挂起。[11/18/08 10:13:08:951 GMT+05:30] 4e961648 WebGroup I SRVE0180I: [WebSphere Portal Server] [/wps] [Servlet.LOG]: /screens/html/Login.jsp: init [ 11/18/08 10:13:09:100 GMT+05:30] 4e961648 SystemOut O 从公司默认退出.JSP [11/18/08 10:14:58:445 GMT+05:30] 7f025647 TimeoutManage I WTRN0006W : 事务 57415344:000000000000302d00000003abdd0ab33759ecaaaf88a04568d6b035df3281225765625370686572655f506f7274616c[] 已在 120 秒后超时。[11/18/08 10:14:58:444 GMT+05:30] 7f325647 ThreadMonitor W WSVR0605W：线程“Servlet.Engine.Transports : 2178”(40535641) 已激活 833,039 毫秒，可能已挂起。服务器中总共有 18 个线程可能被挂起。[11/18/08 10:14:58:479 GMT+05: 30] 7f325647 ThreadMonitor W WSVR0605W：线程“Servlet.Engine.Transports : 2192”(72769641) 已活动 833,040 毫秒，可能已挂起。服务器中总共有 19 个线程可能被挂起。[11/18/08 10:14:58:484 GMT+05:30] 7f025647 TimeoutManage I WTRN0006W: Transaction 57415344:000000000000303000000003abdd0ab33759ecaaaf88a04568d6b035df3281225765625370686572655f506f7274616c[] has timed out after 120 seconds. [11/18/08 10:14:58:485 GMT+05:30] 7f025647 TimeoutManage I WTRN0006W: Transaction 57415344:000000000000303200000003abdd0ab33759ecaaaf88a04568d6b035df3281225765625370686572655f506f7274616c[] has timed out after 120 seconds. [11/18/08 10:14:58:485 GMT+05:30] 238e564c TimeoutManage I WTRN0006W：事务 57415344：000000000000303100000003abdd0ab33759ecaaaf88a04568d6b035df3281225765625370686572655f506f7274616c[] 已在 120 秒后超时。[11/18/08 10:14:58:495 GMT+05:30] 7f325647 ThreadMonitor W WSVR0605W：线程“Servlet.Engine.Transports : 2195”(724a9641) 已激活 833,038 毫秒，可能已挂起。服务器中总共有 20 个线程可能被挂起。[11/18/08 10:14:58:498 GMT+05:30] 7f325647 ThreadMonitor W WSVR0605W：线程“Servlet.Engine.Transports : 2153”(fdf1646) 已激活 833,070 毫秒，可能已挂起。服务器中总共有 21 个线程可能被挂起。[11/18/08 10:14:58:504 GMT+05:30] 7f325647 ThreadMonitor W WSVR0605W：线程“Servlet.Engine.Transports : 2193”(72729641) 已激活 833,039 毫秒，可能已挂起。服务器中总共有 22 个线程可能被挂起。[11/18/08 10:14:58:514 GMT+05:30] 7f325647 ThreadMonitor W WSVR0605W：线程“Servlet.Engine.Transports : 2196”(72469641) 已激活 833,039 毫秒，可能已挂起。服务器中总共有 23 个线程可能被挂起。[11/18/08 10:14:58:517 GMT+05:30] 7f325647 ThreadMonitor W WSVR0605W：线程“Ser ...

我的 wAS 服务器非常慢并且挂起……我必须重新启动。

任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-17T17:26:44.550

它通常是一个应用程序挂起（等待外部资源等）。尝试关闭最后更改的应用程序，等待线程是否最终死亡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-02-24T19:37:37.000

有一个类似的问题：[WAS 线程正在挂起](https://stackoverflow.com/questions/6843157/was-threads-are-getting-hung)

主要思想是避免挂起的线程。强制进行线程转储，然后分析某个线程挂起的原因。挂起线程的典型原因是未响应的连接尝试、无限循环或只是代码的一部分实际上运行时间很长（例如写得不好的看门狗或类似的东西）。

# cruisecontrol.net - Cruise Control .Net 服务器无法检测在 Starteam 上所做的修改

> ID：304777
> 
> 赞同：2
> 
> 时间：2008-11-20T09:32:38.400
> 
> 标签：cruisecontrol.net, starteam

我正在使用 Cruise Control .Net 1.4 进行持续集成，并将其安装在我的 Windows 2000 桌面上。我有用于构建的 Nant 0.85。我的源代码控制在 Borland Starteam 2005 中。我安装了用于创建 VB.Net Windows 应用程序的 .Net 2003 框架。我已经安装了 CCNet，我认为我的 CCnet.config 文件配置正确。

我面临的问题是，每当我更改任何代码并签入 Starteam 时，CCNet 服务器都不会检测到修改，因此我无法根据修改触发我的构建。为此，我必须依靠 forcebuild。但是对于我的项目来说，每 1 分钟使用一次 forcebuild 是不可接受的。我希望触发器基于修改。即，一旦在 Starteam 上检测到更改，就会自动进行构建。

我的 CCNet.config 文件是这样的：

```
<workingDirectory>C:\Documents and Settings\uj0011637\Desktop\StarteamCruiseControl\CCNet17Nov08</workingDirectory>
<webURL>http://172.24.120.37/ccnet</webURL>

<triggers>
    <intervalTrigger name="continuous" seconds="120" buildCondition="ForceBuild" initialSeconds="120"/>         
    </triggers>

<sourcecontrol type="starteam">
   <executable>C:\Program Files\Borland\StarTeam Cross-Platform Client 2005 R2\stcmd.exe</executable>
   <project>DEL_CA_ROBOTS\Tools\CCNet17Nov08</project>
   <username>600513221</username>
   <password>car0b0ts</password>
   <host>oscar.nat.bt.com</host>
   <port>51234</port>
   <autoGetSource>true</autoGetSource>
   <timeout units="minutes">10</timeout>
</sourcecontrol>

<tasks>
      <!-- Configure NAnt to compile the updated files -->c:\
    <nant>
    <executable>C:\Documents and Settings\uj0011637\Desktop\Cruise Control\nant\nant-0.85\bin\NAnt.exe</executable>
    <baseDirectory>C:\Documents and Settings\uj0011637\Desktop\StarteamCruiseControl\CCNet17Nov08</baseDirectory>
    <nologo>false</nologo>
    <buildFile>CCNet17Nov08.build</buildFile>
    <logger>NAnt.Core.XmlLogger</logger>
    <buildTimeoutSeconds>1200</buildTimeoutSeconds>
    </nant>
</tasks>

<!--Publishers will be done after the build has completed-->
 <publishers>
  <xmllogger>
    <logDir>C:\Documents and Settings\uj0011637\Desktop\StarteamCruiseControl\Log</logDir>
  </xmllogger>
 </publishers>

 <modificationDelaySeconds>10</modificationDelaySeconds> 
```

我的构建文件是这样的：

```
<target name="clean" description="Delete all previously compiled binaries.">
    <delete>
        <fileset> 
```

```
 <include name="**/bin/${project::get-name()}.dll" />
            <include name="**/obj/**" />
            <include name="**/*.user" />
        </fileset>
    </delete>
</target> 
```

```
<target name="rebuild" dependsontarget="clean, build ">
<zip zipfile="${project::get-name()}.zip"  verbose="true">
    <fileset>
    <include name="**/bin/*.dll" />
    <include name="**/bin/*.exe" />
    </fileset>
    <fileset>
    <include name="*.aspx" />
    <include name="*.css" />
    <include name="*.config" />
    <include name="*.js" />
    <include name="*.asax" />
    <include name="**.txt" />
    <include name="**.vb" />
    <include name="**.vbproj" />
    <include name="**.user" />
    <include name="**.sln" />
    <include name="**.suo" />
    <include name="**.resx" />

    </fileset>
    <fileset prefix="SQL">
    <include name="*.sql" />
    </fileset>
</zip>

</target>

<target name="unit_test" description="Run unit tests.">

     <exec program="${nunit.dir}\nunit-console.exe" commandline="bin/${prjname}.exe /xml=${prjname}.xml /nologo" />

   </target>

    <target name="build.Console">

    <solution configuration="release" solutionfile="CCNet17Nov08.sln">

    </solution>

    <property name="expected.output" value="bin/${prjname}.exe"/>
    <fail unless="${file::exists(expected.output)}">Output file doesn't exist in ${expected.output}</fail>

</target> 
```

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T12:08:11.753

我在理解使用 StarTeam 作为运行 IIS 7 的 Vista 系统中的源控件安装和配置 CruiseControl.Net 的文档方面遇到了挑战。最后，我成功地设置了巡航控制工作。我列出了让它工作的步骤。

第 1 步：从此处获取 CruiseControl.Net 的副本。运行设置。作为安装的一部分，安装程序会安装 ccnet 服务器和 webdashboard。

第 2 步：安装后，要启动并运行 webdashboard，请启动浏览器并键入。[http://localhost/ccnet](http://localhost/ccnet)（这是安装时的默认虚拟目录。它指向构建服务器中的 $InstallFolder/webdashboard 文件夹。如果系统运行的是 IIS5 或 6，那么您将看到 CruiseControl.Net 页面，在 IIS7 中，抛出 500 错误。要解决此问题，请执行步骤 3，如果没有遇到问题，请执行步骤 4。

第三步：以管理员身份运行以下命令。注意：这里的 ccnet 是虚拟目录，指向系统中 webdashboard 的物理位置。

%SystemRoot%\system32\inetsrv\appcmd 迁移配置“默认网站/ccnet”

运行命令后，只需重新启动 iis 并浏览到[http://localhost/ccnet](http://localhost/ccnet)。它应该显示 CruiseControl.Net 仪表板。

第四步：下一步是配置ccnet服务器。打开位于安装目录的“服务器”文件夹中的 ccnet.config 文件进行编辑。

项目部分：

定义项目部分。项目名称可以是任何标识符，不一定是您的项目名称。CruiseControl.Net 将使用它来识别您的项目。

源代码控制部分

就我而言，源代码控制是 StarTeam。需要设置各种属性，如登录凭据、项目等。

可执行文件：Star Team 命令行实用程序“stcmd.exe”的路径。

项目：Star Team 中定义的项目名称，必须提取。

用户名、密码、主机、端口：Star Team Server 连接设置。

路径：必须从 StarTeam 中提取文件的路径。示例：假设 StarTeam 中的项目根文件夹是“Test”。让项目和解决方案文件位于层次结构“Test\TestProject\MyProject”中。要从此位置提取项目文件和解决方案，请为项目指定“Test”，为路径指定“TestProject\MyProject”。

覆盖文件夹工作目录：Star Team 中的文件将被签出以进行构建的路径。如果未指定，StarTeam 中指定的原始工作文件夹将用于提取文件。

自动获取源：将此指定为“真”将允许 CruiseControl.Net 自动从 StarTeam 签出文件

fileHistoryRegEx：我必须更改 Date 正则表达式，因为我的区域设置配置为英语（印度），其中 DateTime 指定为 DD-MM-YYYY HH:MI:SS (IST)。我不得不改变它，因为在运行期间我得到了一个 Format invalid:System.DateTime 异常。

TimeOut：指定 StarTeam 轮询的超时时间。

以下是 starteam 配置块的完整列表。星队

星队

MSBuild 部分

我将 MsBuild 用于构建任务。以下部分解释了获取 CruiseControl.Net 的 MsBuild 设置所涉及的属性。

可执行文件：系统中“MsBuild.exe”文件的路径。

工作目录：要构建的文件的位置。即，StarTeam 提取需要构建的文件的位置。

项目文件：需要构建的 .proj 文件或 .sln 文件。

Build Args：指定传递给 msbuild.exe 的其他参数。

目标：要采取的行动。在这里，我想在解决方案上完成“清洁”然后“构建”。

超时：如果碰巧调用构建失败，将显示错误消息的时间。

记录器：将用于生成构建结果的记录器程序集的位置。

以下是 msbuild 配置块的完整列表。微软构建

微软构建

触发器部分

触发器部分指定必须调用项目构建的时间和条件。在测试的初始设置期间，将 buildCondition 设置为“ForceBuild”（强制构建），一旦测试完成，将其更改为“IfModificationExists”（仅在检测到修改时执行构建）。

以下是触发器配置块的完整列表。触发器

触发器

第 5 步：运行位于 CruiseControl.Net 安装位置的“服务器”文件夹中的 ccnet.exe 应用程序。代码将从 StarTeam 拉到指定的位置，并且应该继续构建。构建结果存储在 $InstallFolder\ProjectName\Artifacts\ms-build.xml 文件中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-07T12:30:26.393

如果可能的话，你有没有尝试过用 Starteam 来设置文化`<culture>en-US</culture>`？

我在使用 Visual Source Safe 时遇到了同样的问题。唯一的问题是文化设置不正确。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-22T01:13:22.560

我并不感到惊讶，我使用过 Star Team 一次，我只能说，我不得不在那个存储库工具中习惯的垃圾水平在我的整个编程生涯中被 Source Safe 超越过......

不要使用 Star Team，如果我今天要开始一个大的新项目，我可能会使用 GIT ......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T09:36:22.417

尝试这个：

*   更改配置文件中的项目设置

> `<project>DEL_CA_ROBOTS\Tools\CCNet17Nov08</project>`

至

```
 <project>Project_name\View_name</project>
   <path>StarteamFolderName</path> 
```

例如，如果您的项目名称是`DEL_CA_ROBOTS`并且视图名称也是`DEL_CA_ROBOTS` ，则脚本应该类似于 ..

```
 <project>DEL_CA_ROBOTS\DEL_CA_ROBOTS</project>
   <path>Tools\CCNet17Nov08</path> 
```

希望能帮助到你。

# python - Adobe Flash 和 Python

> ID：304779
> 
> 赞同：3
> 
> 时间：2008-11-20T09:33:44.420
> 
> 标签：python, flash, flashdevelop

是否可以使用[CPython](http://www.python.org/)开发基于 Adob​​e Flash 的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T10:36:30.457

您可以尝试[ming](http://www.libming.org/)，一个用于生成 Macromedia Flash 文件 (.swf) 的库。

它是用 C 编写的，但它具有允许它在 C++、PHP、Python、Ruby 和 Perl 中使用的包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-26T22:43:51.670

看看 Flex PyPy：[http ://code.google.com/p/flex-pypy/](http://code.google.com/p/flex-pypy/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T09:54:53.787

我想可以使用此[http://labs.adobe.com/downloads/alchemy.html](http://labs.adobe.com/downloads/alchemy.html)将 python 解释器编译为闪存字节码，然后使用它来运行 python 程序。但除此之外，答案是否定的。

# java - 什么是 JDBC？

> ID：304782
> 
> 赞同：1
> 
> 时间：2008-11-20T09:37:13.260
> 
> 标签：java, jdbc

什么是 JDBC，我可以从哪里开始学习？

我知道这是一种使用 Java 访问数据库的方法，但它解决了哪些问题？它是一个 ORM（或者它试图成为）？它是否在语法级别抽象出数据库之间的差异？它有什么作用？它不做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-20T09:41:17.230

JDBC 是一个允许您访问数据库的驱动程序。它为您提供了一种非常原始的方式来使用 SQL 访问数据库。它的主要功能是允许您（用户）在数据库上运行 SQL 命令。它不是 ORM，也永远不会是。sun 网站[http://java.sun.com/docs/books/tutorial/jdbc/](http://java.sun.com/docs/books/tutorial/jdbc/)有一个很好的 JDBC 教程。如果您对 ORM 感兴趣，请尝试[http://www.hibernate.org/](http://www.hibernate.org/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T09:39:58.870

不，JDBC 不是 ORM。它是[Java 数据库连接](http://java.sun.com/javase/technologies/database/index.jsp)API，基本上它提供了一个与数据库无关的访问层和提供者模型（以便可以轻松添加新的数据库驱动程序）。如果他们愿意，供应商可以为特定的数据库特性添加更多功能，但如果他们希望使用多个数据库，开发人员可以忽略这些特性。

不涉及映射 - 只是为连接（和池）、准备好的语句、存储过程、结果集等建模。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T09:40:45.297

[Java 数据库连接 (JDBC)](http://en.wikipedia.org/wiki/Jdbc)是一种用于 Java 编程语言的 API，它定义了客户端如何访问数据库。它提供了查询和更新数据库中数据的方法。JDBC面向关系数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T09:40:30.757

你实际上已经回答了你自己的问题。

它为访问数据库提供了一个通用接口，这意味着无论单个数据库的细微差别如何，或者它们是如何实现的，您的 API 调用都是相同的。它不是 ORM。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-15T22:46:36.543

JDBC 是一组 Java 接口类，可将您的应用程序与任何关系数据库管理系统连接起来。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-08T19:23:03.523

JDBC - Java 数据库连接

JDBC 是一种通过适用于每种类型的关系数据库（Oracle、MySql、MariaDB、AWS...）的驱动程序将您的数据库连接到您的 Java 开发的方法！

可以使用项目中的 MAVEN 将 JDBC 下载到您的 java 项目中！从那里，您可以在 MAVEN 的 arquive POM 中为您的项目提取 JDBC 依赖项。依赖链接：[https ://mvnrepository.com/artifact/mysql/mysql-connector-java](https://mvnrepository.com/artifact/mysql/mysql-connector-java)

`Maven:`

 ````
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
    https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>NameId</groupId>
    <artifactId>NameProjectJava</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>Package</name>

    <dependencies>

        <!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.22</version>
        </dependency>

    </dependencies> 
```

Instance database in the Java with JDBC:` 

```
public class DB {

Connection con;
MysqlDataSource dataSource = new MysqlDataSource();
private Statement stmt;
private ResultSet rs;
static private DB instance;

private DB(String host, String user, String password, int port, String dbName) throws SQLException {
    dataSource.setDatabaseName(dbName);
    dataSource.setServerName(host);
    dataSource.setUser(user);
    dataSource.setPassword(password);
    dataSource.setPort(port);
    dataSource.setServerTimezone("UTC");
}

private Connection getConnection() throws SQLException {
    return this.dataSource.getConnection();
}

public static DB getInstance() {
    if (instance == null) {
        try {
            instance = new DB("localhost", "root", null, 3306, "group3_hr");
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    return instance;
} 
```

# c++ - 使用 fork/execvp 和系统调用的区别

> ID：304784
> 
> 赞同：14
> 
> 时间：2008-11-20T09:37:43.837
> 
> 标签：c++, c, linux, unix

使用 system() 执行二进制文件和使用 fork/execvp 的组合有什么区别。

是否有任何安全性/便携性/性能差异。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-20T09:47:35.017

系统还使用了`fork`/ `exec`... 组合。如果您`fork`/`exec`您自己这样做，您可以与正在运行的进程并行执行，而`system`被阻塞（包括`wait`）。也不是直接执行命令，而是通过 shell（这`system`会导致 setuid 位出现问题）并`system`阻止/忽略某些信号（SIGINT、SIGCHILD、SIGQUIT）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-20T09:40:41.740

是`system()`的，通过 shell 运行命令，而`exec()`直接运行命令。当然，引入 shell 会导致漏洞和漏洞利用。

编辑：当然，[手册页](http://linux.die.net/man/3/system)提供了更多详细信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-20T10:28:06.480

`system()`will `fork()`/ `exec()`shell，然后 shell will `fork()`/`exec()`你要启动的程序。

所以是/`system()`的两倍重`fork()``exec()`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-20T09:43:38.300

system() 适用于 Windows，但 fork() 不适用。

除非您使用诸如 Cygwin 之类的兼容层，但即便如此，fork 也可能非常昂贵。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-20T10:22:32.310

还有popen()，类似于system()，但允许读取孩子的输出并提供输入

# java - 是否有 XML 编辑器 swing 组件的免费（LGPL、BSD 等）实现

> ID：304800
> 
> 赞同：2
> 
> 时间：2008-11-20T09:46:13.693
> 
> 标签：java, swing

我需要一个能够编辑 xml 文档的 JComponent，这样我就可以将它嵌入到我的应用程序中。

它不需要花哨。

纯文本编辑和突出显示就足够了。

预先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T09:56:07.463

也许这个[Xml 编辑器](http://darwin-it.blogspot.com/2008/09/java-swing-xml-editor-and-tester.html)会这样做：

> 我必须增强和重组我的 XML 编辑器，使其成为“可插入”的 JPanel。

否则，您仍然拥有可能同样出色的[SimpleEditor.java 。](http://www.xmlmind.com/xmleditor/_distrib/doc/dev/embed1.html)

[![替代文字](https://i.stack.imgur.com/NTi24.png)](https://i.stack.imgur.com/NTi24.png)
[（来源：[xmlmind.com](http://www.xmlmind.com/xmleditor/_distrib/doc/dev/resources/SimpleEditor.png)）]

# java - 是否有用于 swing 的免费（LGPL< BSD 等）RDF 编辑器组件？

> ID：304802
> 
> 赞同：2
> 
> 时间：2008-11-20T09:48:10.290
> 
> 标签：java, swing, rdf

我正在寻找可以嵌入到我的应用程序中的基于 JComponenet 的 RDF 编辑器？

它不需要花哨。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-28T19:54:58.280

Swoop is a good editor that's released under an MIT style license. It's [available on Google code](http://code.google.com/p/swoop/source/browse/#svn/trunk). They also have an example test.java ([http://code.google.com/p/swoop/source/browse/trunk/test.java](http://code.google.com/p/swoop/source/browse/trunk/test.java)) that seems to be a good start towards what you need.

Also, it was created by the team at the MIND lab in University of Maryland, including Bijan Parsia of Clark & Parsia.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-25T11:30:25.080

你也可以试试：

[Sourceforge jrdf](http://jrdf.sourceforge.net/)

或者

[Java-source（工具列表）](http://java-source.net/open-source/rss-rdf-tools)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T18:44:00.053

我不知道它是否可嵌入（或者它是否有效），但请查看[http://sourceforge.net/projects/rdfeditor/](http://sourceforge.net/projects/rdfeditor/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-10T16:35:28.907

我会在[Protégé](http://protege.stanford.edu/)的源代码中四处寻找并窃取任何看起来有用的东西。它在 Mozilla 公共许可证下。

# javascript - 在 Javascript 中的图像上绘图

> ID：304804
> 
> 赞同：5
> 
> 时间：2008-11-20T09:49:21.800
> 
> 标签：javascript, image, browser, graphics, draw

我想让用户在浏览器中绘制图像。换句话说，我需要位图图形和绘图功能，无论是矢量还是位图*。*

Canvas 看起来不错，但是 IE 不支持，虽然有 ExCanvas，但我想知道 ExCanvas 是否足够稳定，可以在 IE6 到 8 中一致使用。

或者最重要的是，是否有开箱即用的支持所有这些的开源图像/绘图库？我找到了大约两打基于 Web 的图像编辑器或绘图工具，但没有一个支持这些要求。（而且我想避免使用 Flash/Flex/Silverlight/JavaFX。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-20T10:27:23.797

看看[RaphaelJS](http://raphaeljs.com/) ...它是绘图功能的跨浏览器实现，在可用的情况下使用 Canvas、VML 或 SVG。我不确定它是否能让用户开箱即用，但它可能值得一看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-20T09:53:49.997

即使你说你想避免它，我还是建议使用 Flash。您可以轻松使用 Flash 6 或 7，它们的采用率 > 90%。如果您可以使用 JavaScript 获得这种级别的支持，我会感到惊讶。Flash 真正实现了一次写入，随处运行，这将减少您的开发时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-20T10:17:49.387

查看道场 x

[http://dojotoolkit.org/projects/dojox](http://dojotoolkit.org/projects/dojox)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-24T05:29:36.910

使用[dojox.gfx](http://docs.dojocampus.org/dojox/gfx)。它是跨浏览器（SVG/VML/Canvas/Silverlight），看起来符合要求。您可以从[Dojo 主站点](http://dojotoolkit.org/)下载它。你可以试试它的[测试](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/gfx/tests/)和[演示](http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/gfx/demos/)。警告：后两个链接会很慢，因为代码是为调试问题而设计的，而不是为了速度（没有最小化，没有合并，没有压缩，从文件服务器提供）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T10:23:38.953

你也许可以用 VML 做到这一点

[http://en.wikipedia.org/wiki/Vector_Markup_Language](http://en.wikipedia.org/wiki/Vector_Markup_Language)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-20T10:28:33.157

这是我不久前遇到的一个非常聪明且非常广泛的库： [JS-Graphics](http://www.walterzorn.com/jsgraphics/jsgraphics_e.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-24T03:23:01.110

我会在 Kieron 的回答中添加一些内容；Water Zorn 的网站有一个功能非常完善的矢量图形包。我在一个大型应用程序中使用过它，它与 .NET 和手写 javascript 完美集成。我还使用他的拖放 API 来平滑拖动 html 元素。

# java - 编码和解码 rfc2396 URL

> ID：304806
> 
> 赞同：10
> 
> 时间：2008-11-20T09:49:44.733
> 
> 标签：java, rfc2396

对 URL 字符串进行编码以使其符合 rfc2396 并解码符合 rfc2396 的字符串（例如 %20 被替换为空格字符）的最佳方法是什么？

编辑： URLEncoder 和 URLDecoder 类**不**编码/解码符合 rfc2396 的 URL，它们编码为 MIME 类型的 application/x-www-form-urlencoded，用于编码 HTML 表单参数数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-23T20:21:26.913

使用 URI 类，如下所示：

```
URI uri = new URI("http", "//www.someurl.com/has spaces in url", null);
URL url = uri.toURL(); 
```

或者如果你想要一个字符串：

```
String urlString = uri.toASCIIString();
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T14:02:14.083

您的组件部分可能包含必须转义的字符，在连接到 URI 之前应该已经使用 URLEncoder 进行了转义。

如果您的 URI 中包含带外字符（如空格、“<>[]{}\|^` 和非 ASCII 字节），则它不是真正的 URI。您可以尝试通过以下方式修复它们手动%-转义它们,但这是最后的修复操作而不是标准形式的编码.当您从用户输入中接受可能格式错误的 URI 时,这通常是必要的,但这不是标准化操作,我不不知道有什么内置的 Java 库函数可以为你做这件事；你可能不得不自己用 RegExp 破解一些东西。

在另一个方向上，您必须先将您的 URI 分解为其组成部分（每个单独的路径部分、查询参数名称和值等），然后才能取消转义每个部分（使用 URLDecoder）。没有明智的方法可以一次性对整个 URI 进行 % 解码；您可以尝试“解码不解码为分隔符的 %-escapes”（例如 /?=&;%），但您会得到一个奇怪的不一致字符串，该字符串不符合任何 URI 处理标准。

URLEncoder/URLDecoder 可以很好地处理 URI 查询组件，包括名称和值。但是，它们对于处理 URI 路径部分组件并不*完全正确。*不同之处在于“+”字符并不表示路径部分中的空格。您可以通过简单的字符串替换来解决这个问题：在 URLEncoding 之后，将 '+' 替换为 '%20'; 在 URLDecoding 之前，将 '+' 替换为 '%2B'。如果您不打算在路径中包含包含空格或加号的段，则可以忽略差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-20T12:22:26.937

javadocs 推荐使用 java.net.URI 类来完成编码。为确保 URI 类正确编码 url，必须使用多参数构造函数之一。这些构造函数将执行所需的编码，但要求您将任何 url 字符串解析为参数。

如果要解码，则必须使用单参数构造函数构造 URI，该构造函数不进行任何编码。然后，您可以调用 getPath() 等方法来检索和构建解码后的 URL。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2008-11-20T11:18:17.347

使用[java.net.URLEncoder](http://java.sun.com/javase/6/docs/api/java/net/URLEncoder.html)和[java.net.URLDecoder](http://java.sun.com/javase/6/docs/api/java/net/URLDecoder.html)。

# sql-server - SQLServer 2005 - 更改 NVarChar 中的字符

> ID：304809
> 
> 赞同：1
> 
> 时间：2008-11-20T09:51:25.400
> 
> 标签：sql-server, character, nvarchar

我将一些参数接收到存储过程中。这些参数是 NVARCHAR 的。

我有一个问题，当我需要将其中一些值转换为 FLOATS 时，因为它们被接收为例如

@VALUE1 NVARCHAR(100)

声明 @ChangedValue SET @ChangedValue = CAST(@Value1 AS FLOAT)

例如@Value1 = "0,001"

给我一个问题，因为它期望“0.001”

我无法更改输入的格式，但我可以在 SQL 服务器端以某种方式更改它吗？通过将所有“，”更改为“。” 反而？

最好的问候，肯恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T10:02:05.737

你可以使用`@VALUE1 = REPLACE(@VALUE1, ',', '.')`

不过，这似乎是一件可怕的事情！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T12:13:02.977

正如 Mitch 所说，这听起来不太好，如果提供的参数首先是 float 类型，那就更好了。他为您提供了解决您现在问题的解决方案，但正如他指出的那样，您将来可能会遇到一些麻烦。

我假设该过程由某些应用程序代码调用，并且我怀疑这些数字是用户输入的。如果是这种情况，那么转换应该发生在应用程序级别，因为这将处理区域设置，并且这是唯一可以控制用户输入格式的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T15:27:15.097

我不熟悉您的数据，但请确保您没有任何有效的逗号值，例如 1,000。使用 replace 将其更改为 1.000 会极大地改变所涉及的实际数字。

我会修复用户界面，以便不能在字段中放置无效数字。我还会在数据库中的表上设置一个约束，要求数字在一定范围内或在清理数据后为有效数字。这样一开始，不良数据就无法进入该领域。

# ide - 适用于 Windows 的方案 IDE

> ID：304815
> 
> 赞同：36
> 
> 时间：2008-11-20T09:54:02.977
> 
> 标签：ide, scheme

什么是适用于 Windows 的好的 Scheme IDE？好吧，我承认；我没有达到 RMS 的水平，也不想使用 Emacs 或任何基于字符的界面——我想要一个具有着色功能的图形 IDE、REPL 以及针对特定的、有据可查的方言的可用内联帮助计划。我四处搜索，PLT Scheme/DrScheme 似乎是最好的，但即使这样看起来也不太复杂。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-11-25T14:25:25.703

[DrScheme](http://racket-lang.org/)是我发现的最好的 Scheme IDE。它具有 JIT 编译器，可以构建独立的可执行文件或在传统的 Scheme [REPL](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)中运行，具有智能语法编辑，以及其他传统 IDE 功能，如菜单栏更改功能。运行/停止程序就像单击“运行”/“停止”一样简单。它还包括一个宏扩展器（如果您正在编写宏）以及一个调试器。它的帮助菜单包括 DrScheme 特定的文档，以及各种 Scheme 规范（例如，R5RS 和 R6RS）。

如果您希望在 DrScheme 中没有的 Scheme IDE 中有一些东西，我相信开发人员会很想收到您的来信。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-20T10:18:07.670

我想你已经完成了。[DrScheme](http://plt-scheme.org/)是最受欢迎的 Scheme IDE。

[Scheme 是一种小众语言，所以如果没有发现 Java/VisualBasic WIMP 爱好者](http://en.wikipedia.org/wiki/WIMP_(computing))所期望的那种超级流畅的 IDE 支持，请不要感到惊讶。

光顾？嗯，是。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-20T10:20:31.113

[PLT Scheme](http://plt-scheme.org/)是一款非常值得一看的优秀产品。它具有您要求的所有功能

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-19T20:00:16.607

我认为您实际上想要的是 Emacs。让我们来看看：

*   *我想要一个图形 IDE*，最新版本的 Emacs 是建立在 gtk 之上的。
*   *使用 colorization*，它是**Mx font-lock-mode**
*   *一个 REPL*，Emacs 的查找[Quack 模式](http://www.neilvandyke.org/quack/)，
*   *以及适用于特定的、有据可查的 Scheme 方言的在线帮助*，它也内置在 Quack 中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-20T10:17:14.893

我一直在玩 Xacc.Ide 和 Iron Scheme，发现它们非常好，尽管在某些地方感觉还没有完成。它们对于尝试方案来说已经足够好了，不过我不确定我是否会用它们来编写商业软件。我见过他们两个的作者在这里闲逛所以也许他可以告诉更多..

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-20T14:37:40.097

据我所知（在切换到 Emacs 之前，我使用了 DrScheme 几个月），DrScheme 具有许多类似 IDE 的功能，但由于其教育重点，它们以简化的界面呈现。做一些挖掘，我想你会很高兴你找到的。

另外，我无法抗拒，因为我*确实*使用 Emacs —— 一个特定于操作系统的 emacs 安装几乎不是基于字符的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-04-05T14:28:43.790

刚找到eclipse的scheme插件，还没试过。它看起来很不错。 [http://sourceforge.net/apps/wordpress/schemeway/the-schemescript-plugin/features/](http://sourceforge.net/apps/wordpress/schemeway/the-schemescript-plugin/features/) 及其 git 存储库 [https://github.com/schemeway/SchemeScript](https://github.com/schemeway/SchemeScript)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-23T19:04:14.640

我个人使用 ChezScheme。我从控制台运行方案脚本并在 Eclipse 中使用 SchemeWay 插件对其进行编辑。在我看来，Eclipse 优于 Emacs，而且它有一些不错的特性，比如自动缩进和自动完成定义的名称。

# c# - 在 C# 中追加数组的最有效方法？

> ID：304816
> 
> 赞同：67
> 
> 时间：2008-11-20T09:54:28.653
> 
> 标签：c#, arrays, memory-management

我以双精度数组的形式从老式 ActiveX 中提取数据。我最初不知道我将实际检索到的最终样本数量。

当我将它们从系统中拉出时，在 C# 中将这些数组连接在一起的最有效方法是什么？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-11-20T09:58:04.403

您不能附加到实际数组 - 数组的大小在创建时是固定的。相反，使用`List<T>`可以根据需要增长的 a。

或者，保留一个数组列表，并仅在您获取所有内容后将它们全部连接起来。

请参阅[Eric Lippert 的关于数组的博客文章，](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/arrays-considered-somewhat-harmful)以获得比我实际提供的更多细节和见解：)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-12T11:05:14.530

使用 .Net 4 标配的 linq 扩展连接数组很简单

要记住的最重要的事情是 linq 与`IEnumerable<T>`对象一起工作，所以为了得到一个数组作为你的结果，那么你必须`.ToArray()`在最后使用该方法

连接两个字节数组的示例：

```
byte[] firstArray = {2,45,79,33};
byte[] secondArray = {55,4,7,81};
byte[] result = firstArray.Concat(secondArray).ToArray(); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2009-12-23T16:14:08.720

我相信，如果您有 2 个相同类型的数组想要组合成第三个数组，那么有一种非常简单的方法可以做到这一点。

这是代码：

```
String[] theHTMLFiles = Directory.GetFiles(basePath, "*.html");
String[] thexmlFiles = Directory.GetFiles(basePath, "*.xml");
List<String> finalList = new List<String>(theHTMLFiles.Concat<string>(thexmlFiles));
String[] finalArray = finalList.ToArray(); 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2012-05-02T10:26:51.320

我推荐在这里找到的答案：[如何在 C# 中连接两个数组？](https://stackoverflow.com/questions/1547252/how-do-i-concatenate-two-arrays-in-c)

例如

```
var z = new int[x.Length + y.Length];
x.CopyTo(z, 0);
y.CopyTo(z, x.Length); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-09-01T08:22:42.913

该解决方案看起来很有趣，但可以仅在两个语句中连接数组。当您处理大字节数组时，我认为使用链接列表来包含每个字节是低效的。

这是一个用于从流中读取字节并动态扩展字节数组的代码示例：

```
    字节[] buf = 新字节[8192]；
    字节[] 结果 = 新字节[0]；
    整数计数 = 0；
    做
    {
        计数 = resStream.Read(buf, 0, buf.Length);
        如果（计数！= 0）
        {
            Array.Resize(ref result, result.Length + count);
            Array.Copy(buf, 0, result, result.Length - count, count);
        }
    }
    而（计数> 0）；// 还有更多数据要读取吗？
    resStream.Close();

```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-08-02T11:17:48.597

> **使用它我们可以添加两个数组而没有任何循环。**

我相信如果您有 2 个相同类型的数组想要组合成一个数组，那么有一种非常简单的方法可以做到这一点。

这是代码：

```
String[] TextFils = Directory.GetFiles(basePath, "*.txt");
String[] ExcelFils = Directory.GetFiles(basePath, "*.xls");
String[] finalArray = TextFils.Concat(ExcelFils).ToArray(); 
```

**或者**

```
String[] Fils = Directory.GetFiles(basePath, "*.txt");
String[] ExcelFils = Directory.GetFiles(basePath, "*.xls");
Fils = Fils.Concat(ExcelFils).ToArray(); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-11-20T11:24:17.537

如果您可以估计最后将出现的项目数，请使用将 count 作为参数的 List 构造函数的重载。您将节省一些昂贵的列表重复。否则你必须为此付出代价。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-11-20T18:49:21.927

您可能不需要将最终结果连接到连续数组中。相反，请按照 Jon 的建议继续附加到列表中。最后你会得到一个[锯齿状的数组](http://en.csharp-online.net/All_about_Arrays_in_CSharp%E2%80%94Jagged_Arrays)（嗯，实际上几乎是矩形的）。当您需要按索引访问元素时，请使用以下索引方案：

```
double x = list[i / sampleSize][i % sampleSize]; 
```

对锯齿状数组的迭代也很简单：

```
for (int iRow = 0; iRow < list.Length; ++iRow) {
  double[] row = list[iRow];
  for (int iCol = 0; iCol < row.Length; ++iCol) {
    double x = row[iCol];
  }
} 
```

这样可以节省内存分配和复制，但元素访问速度会稍慢。这是否会带来净性能提升取决于您的数据大小、数据访问模式和内存限制。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-11-21T14:55:12.103

这是一个基于康斯坦丁所说的可用类：

```
class Program
{
    static void Main(string[] args)
    {
        FastConcat<int> i = new FastConcat<int>();
        i.Add(new int[] { 0, 1, 2, 3, 4 });
        Console.WriteLine(i[0]);
        i.Add(new int[] { 5, 6, 7, 8, 9 });
        Console.WriteLine(i[4]);

        Console.WriteLine("Enumerator:");
        foreach (int val in i)
            Console.WriteLine(val);

        Console.ReadLine();
    }
}

class FastConcat<T> : IEnumerable<T>
{
    LinkedList<T[]> _items = new LinkedList<T[]>();
    int _count;

    public int Count
    {
        get
        {
            return _count;
        }
    }

    public void Add(T[] items)
    {
        if (items == null)
            return;
        if (items.Length == 0)
            return;

        _items.AddLast(items);
        _count += items.Length;
    }

    private T[] GetItemIndex(int realIndex, out int offset)
    {
        offset = 0; // Offset that needs to be applied to realIndex.
        int currentStart = 0; // Current index start.

        foreach (T[] items in _items)
        {
            currentStart += items.Length;
            if (currentStart > realIndex)
                return items;
            offset = currentStart;
        }
        return null;
    }

    public T this[int index]
    {
        get
        {
            int offset;
            T[] i = GetItemIndex(index, out offset);
            return i[index - offset];
        }
        set
        {
            int offset;
            T[] i = GetItemIndex(index, out offset);
            i[index - offset] = value;
        }
    }

    #region IEnumerable<T> Members

    public IEnumerator<T> GetEnumerator()
    {
        foreach (T[] items in _items)
            foreach (T item in items)
                yield return item;
    }

    #endregion

    #region IEnumerable Members

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    #endregion
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-20T14:47:40.870

Olmo 的建议非常好，但我要补充一点：如果您不确定尺寸，最好将其做得大一点而不是小一点。当列表已满时，请记住它会将其大小加倍以添加更多元素。

例如：假设您需要大约 50 个元素。如果您使用 50 个元素的大小并且最终的元素数是 51，那么您将以 100 个大小的列表结束，其中包含 49 个浪费的位置。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-04T04:23:30.583

我有同样的问题要解决，需要附加一个特定的计数而不是整个数组，我的第一个解决方案与 Hugo 建议的相同。但我的感觉说“效率低下”，因为调整了这么多。

然后我记得这`StringBuilder`是容量优化的。接下来我问自己，它是否也适用于`MemoryStream`。经过一些尝试，我可以说是的。

以 256 字节的`MemoryStream`最小容量开始，如有必要，会增长其最后容量的两倍，如 256、512、1024、2048、4096、8192 等。

我的下一个问题是，与使用`MemoryStream`. 使用 a`MemoryStream`比调整数组大小和复制要快得多。

因此，我想使用 a`MemoryStream`是最有效的方法。

# .net - 检测 IIS 是否启用

> ID：304819
> 
> 赞同：1
> 
> 时间：2008-11-20T09:55:27.590
> 
> 标签：.net, iis, installshield

有没有办法检测IIS是否启用？

我知道如何检查它是否已安装，但我需要知道它是否已安装但未启用。

此外，这可以通过 InstallShield 本地完成吗？通过 .NET 进行检查是可以接受的，因为我们可以编写自定义操作，但如果有 IS 调用，那将是理想的。

感谢任何提示/提示，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T10:31:39.110

要检查服务状态，请使用无处不在的 WMI（代码是 VBScript，只是为了让您了解必要的 WMI 查询）：

```
IISrunning = false
wql        = "SELECT state FROM Win32_Service WHERE name = 'W3SVC'"
Set w3svc  = GetObject("winmgmts://.").ExecQuery(wql)

For Each service in w3svc
  IISrunning = (service.State = "Running")
Next

WScript.Echo IISrunning 
```

编辑：我尝试用它制作一个 IS 脚本。如果有语法错误，不要打我。

```
function BOOL DetectIIS()
OBJECT wmi, slist, obj;
NUMBER i;
BOOL IISrunning;
begin

  IISrunning = false;
  try
    set wmi = CoGetObject( "winmgmts://.", "" );
    if ( !IsObject(wmi) ) then 
      MessageBox("Failed to connect to WMI.", WARNING);
      return false;
    endif;
    set slist = wmi.ExecQuery("SELECT state FROM Win32_Service WHERE name = 'W3SVC'");
    if ( !IsObject(slist) ) then
      MessageBox("Failed to get query W3SVC service state.", WARNING);
      return false;
    endif;
    for i = 0 to slist.Count-1
      set obj = slist.Item(i);
      IISrunning = (obj.state = "Running");
    endfor;
  catch
    MessageBox(Err.Description, WARNING);
    return false;
  endcatch;

  return IISrunning;
end; 
```

*[从这里](http://community.macrovision.com/showpost.php?p=360664&postcount=1)和[这里](http://www.installsite.org/pages/en/isp_misc.htm)借来的代码，因为我对 IS 脚本语言了解为零。;-)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T16:23:11.427

除了 W3svc 服务之外，您还应该检查网站是否已启动

```
c:\Inetpub\scripts>adsutil.vbs get W3SVC/1/ServerState
ServerState                     : (INTEGER) 2 
```

其中服务器状态 =

```
Value  Meaning  Friendly ID  
1      Starting    MD_SERVER_STATE_STARTING
2      Started     MD_SERVER_STATE_STARTED  <-- What you want
3      Stopping    MD_SERVER_STATE_STOPPING
4      Stopped     MD_SERVER_STATE_STOPPED
5      Pausing     MD_SERVER_STATE_PAUSING
6      Paused      MD_SERVER_STATE_PAUSED
7      Continuing  MD_SERVER_STATE_CONTINUING 
```

所以上面使用 Win32_Service 的答案会告诉你服务是否启动，除了告诉你服务是否正在运行之外，它还会告诉你网站是否正在运行。

# sql-server-2005 - 有没有办法仅从 LDF 恢复 SQL 2005 中的数据库？

> ID：304824
> 
> 赞同：0
> 
> 时间：2008-11-20T10:00:45.473
> 
> 标签：sql-server-2005

我们的数据库服务器坏了，我们需要恢复它的一些数据库。我们只能找到所需数据库的 LDF 文件。有没有可以用来恢复的工具？我们使用的是 SQL 2005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T10:03:44.813

不，您还需要 .mdf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T10:03:39.057

LDF 文件是事务日志，我怀疑您能否单独从中获得任何有用的信息。

你有备份，对吧？

# model-view-controller - 我在哪里可以找到 MVC 的清晰示例？

> ID：304828
> 
> 赞同：45
> 
> 时间：2008-11-20T10:02:12.227
> 
> 标签：model-view-controller

我已经阅读了一些关于 MVC 的东西，但我仍然不明白什么时候应该使用它们，什么时候不应该使用它们。我正在寻找明确的例子，比如“*如果你正在开发这个，那么你应该使用 MVC，就像这样*”和“*如果你正在开发这个，你不应该使用 MVC。* ”我已经看过的大多数例子所见依赖于已经实现了一切的复杂框架，您必须学习该框架并大量使用它来了解真正发生的事情。对于许多程序员来说，诸如“ *UI 业务逻辑*”之类的措辞听起来像是营销术语——例如，本文中使用了“*相反，视图直接绑定到演示模型*”[这样的词。](https://stackoverflow.com/questions/2056/what-are-mvp-and-mvc-and-what-is-the-difference#101561)

我知道隐藏在阴影中的危险，因为 MVC 是一个概念，每个人都觉得他们最了解它，但没有人真正知道如何使用它，因为可能涉及很多变量，每个人都可以拥有关于如何将项目分解为模型、视图和控制器的不同观点。那里有很多理论，但很少有明确的例子。我正在寻找的不是“最好”的方法，所以这不应该被认为是主观的；我正在寻找不同的**简单**实现，让我自己决定哪些是最好的方法。

简而言之：有哪些好的在线资源可以提供在各种情况下使用 MVC 的优缺点，并提供清晰的示例来帮助读者理解这个概念？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-20T12:51:38.950

IMO，最好的例子是代码和/或入门工具包。

[Rob Conery](http://blog.wekeroad.com/)有[大量文章](http://blog.wekeroad.com/mvc-storefront/ "Rob 发布的 Mvc 帖子")解释了如何使用 ASP.NET MVC 创建 MVC 站点。其中每一个都有一个贯穿博客文章讨论的[视频教程。](http://www.asp.net/learn/mvc-videos/#MVCStorefrontStarterKit)

[ASP.NET MVC](http://www.asp.net/mvc/)官方网站也有一些[视频帖子](http://www.asp.net/learn/mvc-videos/)、入门工具包（[这里](http://www.codeplex.com/mvcsamples/SourceControl/ListDownloadableCommits.aspx "Rob Conery 的 Storefront Starter Kit @ Codeplex")、[这里](http://haacked.com/archive/2008/05/23/updated-northwind-demo.aspx "Phil Haack 的演示魔术")和[这里](http://codeplex.com/kigg "Digg 克隆 mvc 爱@Codeplex")）和[额外](http://forums.asp.net/1146.aspx "ASP.NET MVC 论坛 .. clicky 点击！")的帮助。

IMO，MVC 是网站的必经之路。在不吐出所有行话和营销语言的情况下，它确实将您的代码分解为漂亮的、单独的和定义的部分。这些部分中的每一个都可以进行测试.. 这确实有助于保护开发过程，因为您知道触摸系统的一个部分不会破坏另一个部分（因为在您最近的更改之后测试全部通过），您可以放心。

您应该查看的其他博客：

*   [菲尔·哈克](http://haacked.com/)
*   [斯蒂芬·瓦尔特](http://weblogs.asp.net/stephenwalther/default.aspx)
*   [Scott Guthrie](http://weblogs.asp.net/scottgu/default.aspx) (aka Guru Gu, ScottGu, The Gu, Gu...)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T12:34:03.027

假设您的意思是 Web 的 MVC，您将很难找到比以下 60 行代码更简洁的东西：

[http://code.google.com/p/barebonesmvc-php/](http://code.google.com/p/barebonesmvc-php/)

特别注意 sendResponse “模板方法”，它本质上由以下 2 个方法调用组成：

应用请求模型

应用模型到视图

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T21:57:28.050

我见过的最高评价之一是[Learn MVC in 7 days](http://www.codeproject.com/Articles/207797/Learn-MVC-Model-View-Controller-step-by-step-in-7) post。当然，尽管它很好，但与[Pro ASP.NET MVC 4这样的书相比仍然相形见绌](http://tinyurl.com/d26xj5e)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T10:22:01.373

我已经为各种项目做了这一切。从用一个伟大的 PHP 脚本编写应用程序的所有内容（好吧，它最初是一个刚刚成长的小型 PHP 脚本）。使用最新最好的 Spring/Freemarker 框架，我的 5O 行 java 代码在 XML 和模板编码的海洋中丢失了。

您可以在没有框架的情况下执行 MVC，并且在 php 中这可能是最简单的方法。如果你所有的导航代码都在一个只有导航逻辑的脚本中，那么你就是在做 MVC！

对于 QDP（快速脏页）以外的任何东西，我建议使用某种 MVC。想象一下，如果企业说“我可以有法语版本”或“很棒的程序，但我想将数据存储在 xxxxx 数据库中”，你需要做什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T12:04:27.907

mvc 有一些风格：[http://en.wikipedia.org/wiki/Presentation-abstraction-control](http://en.wikipedia.org/wiki/Presentation-abstraction-control)，[http://en.wikipedia.org/wiki/Model_View_Presenter](http://en.wikipedia.org/wiki/Model_View_Presenter)。

另见：[http ://c2.com/cgi/wiki/like?ModelModelViewController](http://c2.com/cgi/wiki/like?ModelModelViewController)

相关问题：[Hierarchical-Model-View-Controller (HMVC) 的示例？](https://stackoverflow.com/questions/91478/any-examples-of-presentation-abstraction-control-aka-hierarchical-model-view-co)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T10:29:07.943

通常很难清楚地将视图逻辑与业务逻辑分开。如果您阅读 Abit 上的 JSF 和 JSP 示例，您可以看到使用中的 MVC 的清晰示例。将视图与业务逻辑完全分离。

如果您正在寻找有关 MVC 的好信息，我可以建议[http://en.wikipedia.org/wiki/Model-view-controller](http://en.wikipedia.org/wiki/Model-view-controller)

这是一个重要的话题，我真的很喜欢分离不同逻辑的想法。它可以帮助程序员和其他从事该项目的人。

# asp.net - 在 SQLServer 2005 中启用审核功能

> ID：304830
> 
> 赞同：9
> 
> 时间：2008-11-20T10:02:42.757
> 
> 标签：asp.net, sql-server

您是否曾经在生产数据库上使用过 SQL Server 审计功能？

这对性能有何影响，您是否注意到不同版本的 SQL Server 之间存在差异。

还有我们需要如何启用审计功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-19T21:48:31.180

C2审计模式存在多种问题，你的问题只涉及其中一个——性能。C2 审计具有巨大的性能影响，非常高。

抛开性能问题不谈，管理起来非常困难。它不是一劳永逸的配置开关。您必须花费大量时间进行配置，设置日志以转到文件，然后当您完成后，其他人可以很容易地摆脱审计文件。没有办法快速轮询所有服务器并确保 C2 审计正常工作，或者没有人丢弃文件。

SQL Server 2008 使合规性变得更加容易。我建议您查看[SQL Server 2008 合规性门户网站](http://www.microsoft.com/sqlserver/2008/en/us/compliance.aspx)，该门户网站上有一份关于如何配置 2008 新合规性功能的优秀白皮书。2008 年的新审计员使用 xEvent 处理，它对性能的要求大大降低，并且更易于管理。您可以使用 2008 的基于策略的管理来检查您的服务器，确保您正在审核，并在出现问题时帮助重新配置审核。

不幸的是，一个弱点仍然是对审计输出文件的控制——坏人可以简单地删除文件。另一个弱点是缺乏报告——仅仅因为你有大量的审计数据并不意味着你可以用它做任何事情。您仍然需要编写自己的报告来分析审计数据并找出谁在做什么。这并不容易——但它比 SQL 2005 的 C2 审计更容易且影响更小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-07T06:06:28.380

C2 审计模式是您正在寻找的，触发器似乎不是审计的方式。你最终用了什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-14T15:25:01.280

C2 审计模式可能会为您提供一些您正在寻找的功能。虽然它没有专门记录用于访问数据的 SQL 语句，但它会为您提供 SQL Server 上成功/失败的安全请求的全面记录。

[http://msdn.microsoft.com/en-us/library/ms187634.aspx](http://msdn.microsoft.com/en-us/library/ms187634.aspx)

我们使用[Idera SQL 合规管理器](http://www.idera.com/Products/SQLcm/Default.aspx)来执行符合 SOX 的 SQL 审计。我不是特别喜欢它，但它似乎是行业领导者之一，所以我认为它和任何产品一样好，并且可以完成工作。如果您希望满足一些外部要求（如在 Sarbanes-Oxley 中），自己滚动可能不符合要求，您可以使用这样的产品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-10T12:26:06.147

Redgate 的新免费工具[DLM Dashboard](https://www.red-gate.com/products/dlm/dlm-dashboard/)使用 DDL 触发器将更改存储到单独的数据库中，而该数据库又由仪表板服务定期轮询，从而最大限度地减少对性能的影响。

这记录了架构更改，而不是（尚未）数据更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-23T03:57:36.703

恐怕没有“审计功能”之类的东西。相反，您需要根据自己的要求自己构建它。有很多方法可以做到这一点，例如

*   每次审计表中的数据更改时都会触发触发器。这里有一个例子：http: [//web.archive.org/web/20071006100909/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-audit-changes-to-sql-server-data。 html](http://web.archive.org/web/20071006100909/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-audit-changes-to-sql-server-data.html)
*   在此处使用您的 ORM，并带有 NHIbernate 的想法： [NHibernate 和 SqlServer 中的数据审计](https://stackoverflow.com/questions/15917/data-auditing-in-nhibernate-and-sqlserver)

# database - 应对模式演变的策略？

> ID：304834
> 
> 赞同：6
> 
> 时间：2008-11-20T10:04:50.457
> 
> 标签：database, continuous-integration, agile

目前，我们在数据访问对象和大量存储过程和触发器中使用手动 SQL，总计大约 20k 行代码。我们发现，简单的更改会导致几天的工作得以修复，并导致最后期限的推迟。

更改包括修改表以处理额外的数据、基于 QA/用户报告的架构的一般重构等。它是一个非常活跃的系统，正在构建以替换旧的和缓慢的东西。

我们查看了可用的 PHP ORM 解决方案来尝试限制这些更改的影响，但是它们太慢了，无法应对我们的模式；“简单” sql 结果的返回时间比我们的自定义查询要长几个数量级，并导致约 0.5 秒的页面浏览量超过 20 秒。

在一般情况下，我可以研究哪些最佳实践/策略来应对关系数据库的模式演变？

**编辑：**忘了提及触发器；我们有很多依赖于级联变化的数据，例如。此用户的价格更改会更新该用户*的*价格*等*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T16:38:31.943

您可能想查看这本关于[重构数据库：进化数据库设计](https://rads.stackoverflow.com/amzn/click/com/0321293533)的书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T16:39:42.267

我建议使用**连续（或至少每晚）构建**策略。
在每次签入时重建数据库，或者每天至少重建一次。
同样每天一次，运行单元测试来运行每一位代码，无论是在存储过程、触发器还是数据访问层。

编写存储过程的成本很高，但这将立即识别中断。
一旦你知道中断在哪里，你就可以修复它。

我很想听听其他人将这种策略应用于数据库更改的经验。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T14:17:17.437

我们使用[Enterprise Architect](http://www.sparxsystems.com.au/)进行数据库定义。我们包括在 UML 中定义的存储过程、触发器和所有表定义。该程序的三个出色功能是：

1.  从 ODBC 连接导入 UML 图。
2.  一次为整个数据库生成 SQL 脚本 (DDL)
3.  生成数据库的自定义模板文档。

在我作为开发人员的 10 多年中，我从未对任何其他工具印象深刻。EA 一举支持 Oracle、MySQL、SQL Server（多个版本）、PostGreSQL、Interbase、DB2 和 Access。每当我遇到问题时，他们的论坛都会及时回答我的问题。强烈推荐！！

当 DB 发生更改时，我们在 EA 中进行然后生成 SQL，并将其签入我们的版本控制 (svn)。我们使用[Hudson](http://hudson-ci.org/)进行构建，当它看到您修改了签入的 sql 时，它会从脚本中自动构建数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T10:09:10.310

我的建议是摆脱存储过程，而是使用内联 SQL，可能在 text/xml 文件中维护。我发现 SProcs 更烦人且维护起来更耗时。一旦生成查询计划（第一次执行查询），您会注意到性能差异可以忽略不计。另外，您将能够对整个数据库脚本进行版本控制...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-08T04:45:05.463

以下是我的建议：

1.  尝试摆脱最少使用的功能。质疑一直不使用的功能。应用程序中的每个功能都有与其相关的多个级别的成本（维护、支持、回归测试、代码复杂性等）。
2.  远离存储过程，除非绝对没有办法在代码中以可扩展的方式高效地完成它。
3.  逐步引入 ORM 解决方案（使用重构从 JDBC 迁移到 ORM）以减少 CRUD 操作中的代码量和代码复杂度
4.  当您修复错误并将这些测试合并到持续集成系统中时，构建功能、集成和单元测试。尽可能自动化您的回归测试，以便在签入时立即识别问题。
5.  In general, whenever you fix a bug, use that opportunity to refactor to decouple the implementations/code modules.

If you have have questions about Database migration problems, this might help: [http://shashivelur.com/blog/2008/07/hibernate-db-migration/](http://shashivelur.com/blog/2008/07/hibernate-db-migration/)

# delphi - 检测 citrix“应用模式”？

> ID：304836
> 
> 赞同：4
> 
> 时间：2008-11-20T10:06:13.823
> 
> 标签：delphi, citrix

请原谅我可能对这种“应用程序模式”使用了错误的术语。

我们的应用程序在启动过程中存在一个问题，即在主窗口启动之前它不会显示任务栏图标，即使在此之前屏幕上有加载进度窗口、登录窗口等。

我们更改代码来解决这个问题，但不幸的是，当通过 citrix 运行应用程序时，此修复程序现在显示两个图标，一个只有图标，没有文本。

有没有办法让我检测到应用程序正在通过 citrix 运行？我不知道正确的术语，但只有应用程序窗口被带到用户桌面，而不是整个远程桌面。

如果重要，该应用程序是用 Delphi 编写的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-20T10:22:11.063

不确定如何在 delphi 中执行此操作，但如果您可以调用 user32.dll 并调用该函数：

```
if (GetSystemMetrics(SM_REMOTESESSION) != 0)
{
   // We are in a remote session
} 
```

这应该告诉您是在 Citrix 还是终端服务环境中运行。SM_REMOTESESSION 定义为：

```
#define SM_REMOTESESSION        0x1000 
```

有关 GetSystemMetrics api 的更多信息： [链接到 msdn](http://msdn.microsoft.com/en-us/library/ms724385.aspx)

**编辑** 以下页面描述了如何在 delphi 中完成上述操作。适用于终端服务的内容也适用于 Citrix：

[您的 Delphi 应用程序是否作为远程会话在终端服务下运行](http://delphi.about.com/od/delphitips2008/qt/isremotesession.htm)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-06T12:04:50.850

这对我有用：

```
return System.Windows.Forms.SystemInformation.TerminalServerSession; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-13T19:06:13.877

好奇的旁注：“open-collar”提出的解决方案只是 John Sibly 给出的解决方案的 .NET 包装器。他们应该在每种情况下返回相同的结果。我通过反汇编 System.Windows.Forms.SystemInformation 类确认了这一点。

# javascript - javascript用户选择突出显示

> ID：304837
> 
> 赞同：26
> 
> 时间：2008-11-20T10:06:53.823
> 
> 标签：javascript, highlight

我试图找到一种使用 javascript 的方法来突出显示用户在单击一些奇怪的突出显示按钮时选择的文本（如 <span style="background-color:yellow">突出显示的文本</span>）。它只需要与 WebKit 或 Firefox 一起工作，但它似乎几乎是不可能的，因为它必须在以下情况下工作：

```
<p>this is text</p>
<p>I eat food</p> 
```

当用户在浏览器中从“是文本”到“我吃”中选择时（不能只是在那里放一个跨度）。

这种情况：

```
<span><span>this is text</span>middle text<span>this is text</span></span> 
```

当用户在浏览器中从“是文本”选择“这是”时（即使您可以将突出显示范围环绕选择中的每个元素，我希望看到您尝试突出显示中间文本）。

这个问题似乎在任何地方都没有得到解决，坦率地说我怀疑这是可能的。

如果您可以获得从选择中获得的范围作为一个完整的字符串，该字符串可以被解析然后替换，但据我所知，您无法获得范围的原始 html。遗憾。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-10T15:59:07.950

这个答案对你来说可能已经晚了几年，但我遇到了类似的问题并想在这里记录它，因为它是谷歌的第一次点击。

重申一下，**问题**在于您只想从用户选择中捕获 Range 对象，并用一个样式化的 div 包围它，如下所示：

```
function highlightSelection() {
    var userSelection = window.getSelection().getRangeAt(0);
    highlightRange(userSelection);

}

function highlightRange(range) {
    var newNode = document.createElement("div");
    newNode.setAttribute(
       "style",
       "background-color: yellow; display: inline;"
    );
    range.surroundContents(newNode);
} 
```

但正如原始父母所说，这是不安全的。如果选择不跨越元素边界，它将起作用，但如果用户选择创建的范围是跨越 HTML 标签边界的不安全范围，它将引发 DOM 错误。

* * *

**解决方案**是生成一个较小的 Range 对象数组，其中没有一个单独跨越元素屏障，而是共同覆盖用户选择的 Range。这些安全范围中的每一个都可以如上所述突出显示。

```
function getSafeRanges(dangerous) {
    var a = dangerous.commonAncestorContainer;
    // Starts -- Work inward from the start, selecting the largest safe range
    var s = new Array(0), rs = new Array(0);
    if (dangerous.startContainer != a)
        for(var i = dangerous.startContainer; i != a; i = i.parentNode)
            s.push(i)
    ;
    if (0 < s.length) for(var i = 0; i < s.length; i++) {
        var xs = document.createRange();
        if (i) {
            xs.setStartAfter(s[i-1]);
            xs.setEndAfter(s[i].lastChild);
        }
        else {
            xs.setStart(s[i], dangerous.startOffset);
            xs.setEndAfter(
                (s[i].nodeType == Node.TEXT_NODE)
                ? s[i] : s[i].lastChild
            );
        }
        rs.push(xs);
    }

    // Ends -- basically the same code reversed
    var e = new Array(0), re = new Array(0);
    if (dangerous.endContainer != a)
        for(var i = dangerous.endContainer; i != a; i = i.parentNode)
            e.push(i)
    ;
    if (0 < e.length) for(var i = 0; i < e.length; i++) {
        var xe = document.createRange();
        if (i) {
            xe.setStartBefore(e[i].firstChild);
            xe.setEndBefore(e[i-1]);
        }
        else {
            xe.setStartBefore(
                (e[i].nodeType == Node.TEXT_NODE)
                ? e[i] : e[i].firstChild
            );
            xe.setEnd(e[i], dangerous.endOffset);
        }
        re.unshift(xe);
    }

    // Middle -- the uncaptured middle
    if ((0 < s.length) && (0 < e.length)) {
        var xm = document.createRange();
        xm.setStartAfter(s[s.length - 1]);
        xm.setEndBefore(e[e.length - 1]);
    }
    else {
        return [dangerous];
    }

    // Concat
    rs.push(xm);
    response = rs.concat(re);    

    // Send to Console
    return response;
} 
```

然后可以（似乎）使用此修改后的代码突出显示用户选择：

```
function highlightSelection() {
    var userSelection = window.getSelection().getRangeAt(0);
    var safeRanges = getSafeRanges(userSelection);
    for (var i = 0; i < safeRanges.length; i++) {
        highlightRange(safeRanges[i]);
    }
} 
```

* * *

请注意，您可能需要一些更精美的 CSS 来使用户可以将许多不同的元素放在一起看起来不错。我希望最终这能帮助互联网上其他一些疲惫的灵魂！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-11-25T13:53:30.620

好吧，您可以使用 DOM 操作来做到这一点。这适用于 Firefox：

```
var selection = window.getSelection();
var range = selection.getRangeAt(0);
var newNode = document.createElement("span");
newNode.setAttribute("style", "background-color: pink;");
range.surroundContents(newNode); 
```

似乎也适用于当前版本的 Safari。请参阅[https://developer.mozilla.org/en/DOM/range.surroundContents](https://developer.mozilla.org/en/DOM/range.surroundContents)和[http://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113/ranges.html](http://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113/ranges.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-31T08:35:42.520

这是我第一次在这里发帖，但是看看你的答案，这样的东西不会有用吗？我在这里有一个样本：http: [//henriquedonati.com/projects/Extension/extension.html](http://henriquedonati.com/projects/Extension/extension.html)

```
function highlightSelection() {
    var userSelection = window.getSelection();
    for(var i = 0; i < userSelection.rangeCount; i++) {
        highlightRange(userSelection.getRangeAt(i));
    }

}

function highlightRange(range) {
    var newNode = document.createElement("span");
    newNode.setAttribute(
       "style",
       "background-color: yellow; display: inline;"
    );
    range.surroundContents(newNode);
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-08-11T07:29:15.053

**这是突出和取消突出显示文本的完整代码**

```
<!DOCTYPE html>
    <html>
        <head>
            <style type="text/css">
                .highlight
                {
                    background-color: yellow;
                }
                #test-text::-moz-selection { /* Code for Firefox */

                    background: yellow;
                }

                #test-text::selection {

                    background: yellow;
                }

            </style>
        </head>

        <body>
            <div id="div1" style="border: 1px solid #000;">
                <div id="test-text">
                    <h1> Hello How are you </h1>
                    <p >
                        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
                    </p>
                </div>
            </div>
            <br />

        </body>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
            <script type="text/javascript">
                mouseXPosition = 0;
                $(document).ready(function () {

                    $("#test-text").mousedown(function (e1) {
                        mouseXPosition = e1.pageX;//register the mouse down position
                    });

                    $("#test-text").mouseup(function (e2) {
                        var highlighted = false;
                        var selection = window.getSelection();
                        var selectedText = selection.toString();
                        var startPoint = window.getSelection().getRangeAt(0).startOffset;
                        var endPoint = window.getSelection().getRangeAt(0).endOffset;
                        var anchorTag = selection.anchorNode.parentNode;
                        var focusTag = selection.focusNode.parentNode;
                        if ((e2.pageX - mouseXPosition) < 0) {
                            focusTag = selection.anchorNode.parentNode;
                            anchorTag = selection.focusNode.parentNode;
                        }
                        if (selectedText.length === (endPoint - startPoint)) {
                            highlighted = true;

                            if (anchorTag.className !== "highlight") {
                                highlightSelection();
                            } else {
                                var afterText = selectedText + "<span class = 'highlight'>" + anchorTag.innerHTML.substr(endPoint) + "</span>";
                                anchorTag.innerHTML = anchorTag.innerHTML.substr(0, startPoint);
                                anchorTag.insertAdjacentHTML('afterend', afterText);
                            }

                        }else{
                            if(anchorTag.className !== "highlight" && focusTag.className !== "highlight"){
                                highlightSelection();  
                                highlighted = true;
                            }

                        }

                        if (anchorTag.className === "highlight" && focusTag.className === 'highlight' && !highlighted) {
                            highlighted = true;

                            var afterHtml = anchorTag.innerHTML.substr(startPoint);
                            var outerHtml = selectedText.substr(afterHtml.length, selectedText.length - endPoint - afterHtml.length);
                            var anchorInnerhtml = anchorTag.innerHTML.substr(0, startPoint);
                            var focusInnerHtml = focusTag.innerHTML.substr(endPoint);
                            var focusBeforeHtml = focusTag.innerHTML.substr(0, endPoint);
                            selection.deleteFromDocument();
                            anchorTag.innerHTML = anchorInnerhtml;
                            focusTag.innerHTml = focusInnerHtml;
                            var anchorafterHtml = afterHtml + outerHtml + focusBeforeHtml;
                            anchorTag.insertAdjacentHTML('afterend', anchorafterHtml);

                        }

                        if (anchorTag.className === "highlight" && !highlighted) {
                            highlighted = true;
                            var Innerhtml = anchorTag.innerHTML.substr(0, startPoint);
                            var afterHtml = anchorTag.innerHTML.substr(startPoint);
                            var outerHtml = selectedText.substr(afterHtml.length, selectedText.length);
                            selection.deleteFromDocument();
                            anchorTag.innerHTML = Innerhtml;
                            anchorTag.insertAdjacentHTML('afterend', afterHtml + outerHtml);
                         }

                        if (focusTag.className === 'highlight' && !highlighted) {
                            highlighted = true;
                            var beforeHtml = focusTag.innerHTML.substr(0, endPoint);
                            var outerHtml = selectedText.substr(0, selectedText.length - beforeHtml.length);
                            selection.deleteFromDocument();
                            focusTag.innerHTml = focusTag.innerHTML.substr(endPoint);
                            outerHtml += beforeHtml;
                            focusTag.insertAdjacentHTML('beforebegin', outerHtml );

                        }
                        if (!highlighted) {
                            highlightSelection();
                        }
                        $('.highlight').each(function(){
                            if($(this).html() == ''){
                                $(this).remove();
                            }
                        });
                        selection.removeAllRanges();
                    });
                });

                function highlightSelection() {
                    var selection;

                    //Get the selected stuff
                    if (window.getSelection)
                        selection = window.getSelection();
                    else if (typeof document.selection != "undefined")
                        selection = document.selection;

                    //Get a the selected content, in a range object
                    var range = selection.getRangeAt(0);

                    //If the range spans some text, and inside a tag, set its css class.
                    if (range && !selection.isCollapsed) {
                        if (selection.anchorNode.parentNode == selection.focusNode.parentNode) {
                            var span = document.createElement('span');
                            span.className = 'highlight';
                            span.textContent = selection.toString();
                            selection.deleteFromDocument();
                            range.insertNode(span);
    //                        range.surroundContents(span);
                        }
                    }
                }

            </script>
    </html> 
```

[https://jsfiddle.net/Bilalchk123/1o4j0w2v/](https://jsfiddle.net/Bilalchk123/1o4j0w2v/)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-11-20T23:02:24.490

```
 function load(){
      window.document.designMode = "On";
      //run this in a button, will highlight selected text
      window.document.execCommand("hiliteColor", false, "#768");
    } 
```

```
 <html>
    <head>

    </head>
    <body contentEditable="true" onload="load()">
      this is text
    </body>
    </html>
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-07-12T03:01:26.130

我刚刚发布了一个包，它是 texthighlighter（一个已弃用的库）的 typescript 端口。只是将其转换为 typescript 就发现了一些错误，并使其在未来更容易工作。结帐[https://www.npmjs.com/package/@funktechno/texthighlighter](https://www.npmjs.com/package/@funktechno/texthighlighter)。这没有依赖关系，并允许突出显示用户选择、合并突出显示、删除突出显示、序列化和反序列化（从数据应用）突出显示。

请注意，您将需要使用 javascript mouseup 事件来正确触发它。

```
import { doHighlight, deserializeHighlights, serializeHighlights, removeHighlights, optionsImpl } from "@/../node_modules/@funktechno/texthighlighter/lib/index";
const domEle = document.getElementById("sandbox");
const options: optionsImpl = {};
if (this.color) options.color = this.color;
if (domEle) doHighlight(domEle, true, options); 
```

这就是我在 vue ts 项目中触发它的方式

```
<div
     id="sandbox"
     @mouseup="runHighlight($event)"
>text to highlight</div> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-31T09:39:04.833

我今天遇到了同样的问题，突出显示了多个标签上的选定标签。解决方案：

1.  **找到一种方法来提取所选部分以及 HTML 标记**。
2.  **用 span 元素包装提取的部分并将其放回 DOM 中**。

请参阅下面的代码，以获得进一步的说明。

```
function getRangeObject(selectionObject){
    try{ 
        if(selectionObject.getRangeAt)
            return selectionObject.getRangeAt(0);
    }
    catch(ex){
        console.log(ex);
    }
}
document.onmousedown = function(e){
    var text;
    if (window.getSelection) {
        /* get the Selection object */
        userSelection = window.getSelection()

        /* get the innerText (without the tags) */ 
        text = userSelection.toString();

        /* Creating Range object based on the userSelection object */
        var rangeObject = getRangeObject(userSelection);

        /* 
           This extracts the contents from the DOM literally, inclusive of the tags. 
           The content extracted also disappears from the DOM 
        */
        contents = rangeObject.extractContents(); 

        var span = document.createElement("span");
        span.className = "highlight";
        span.appendChild(contents);

        /* Insert your new span element in the same position from where the selected text was extracted */
        rangeObject.insertNode(span);

    } else if (document.selection && document.selection.type != "Control") {
            text = document.selection.createRange().text;
    }
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-06T06:36:40.757

由于 HTML 使用`<mark>`元素作为突出显示的文本，也许使用这个节点很容易，而不是使用你自己的 css，更干净的代码：

```
function highlightRange(range) {
   var newNode = document.createElement('mark');
   range.surroundContents(newNode);
}
// original select range function
function highlight() {
    var userSelection = window.getSelection();
    for(var i = 0; i < userSelection.rangeCount; i++) {
        highlightRange(userSelection.getRangeAt(i));
    }
} 
```

# c# - 为什么在单元测试中实例化 ListView 时 SelectedIndices 和 SelectedItems 不起作用？

> ID：304844
> 
> 赞同：5
> 
> 时间：2008-11-20T10:11:20.833
> 
> 标签：c#, .net, winforms, unit-testing, listview

我本着回答你自己问题的精神写这个问题，因为我找到了解决问题的方法，但如果有人有更好的解决方案，我很乐意听。

在我当前正在处理的应用程序中，我将 ListView 控件子类化以添加一些功能，其中一些功能与 ListView SelectedIndices 和 SelectedItems 属性交互。

问题是当我尝试对我的子类进行单元测试时，当我将项目添加到选择时，SelectedIndices 和 SelectedItems 属性不会更新。我都试过了

```
item.Selected = true 
```

和

```
listView.SelectedIndices.Add(...) 
```

但是 SelectedIndices 或 SelectedItems 似乎根本没有受到影响。功能其他部分的单元测试工作正常。

如何对我的 ListView 子类的选择相关部分进行单元测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T23:07:52.817

我发现了一个可以用来填充这些属性的技巧：

listView.AccessibilityObject.ToString(); //解决方法来刷新选定的项目属性

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-20T10:17:05.177

问题似乎是，如果未绘制 ListView，则 SelectedIndices 和 SelectedItems 无法正确更新，如[ListViewItem.Selected 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.selected(VS.85).aspx)的 MSDN 文档中的此评论所述：

> 如果您的 ListView 从未被绘制过（例如，它在 TabControl 中，在尚未被选中的选项卡中），则 Selected 属性不能被信任。在这种情况下，父 ListView 的 SelectedItems 和 SelectedIndices 未正确更新，仍将为空。

这个问题的一种解决方案是在您的测试中创建一个简单的虚拟表单类，将 ListView 添加到表单并简单地显示表单。之后 SelectedIndices 和 SelectedItems 属性按预期工作。

像这样的东西：

```
 [Test]
    public void CanGetSelectedItems()
    {
        // simple test to make sure that the SelectedIndices
        // property is updated
        using (var f = new DummyForm(listView))
        {
            f.Show();

            listView.SelectedIndices.Add(0);
            Assert.AreEqual(1, listView.SelectedIndices.Count);
        }
    }

    private class DummyForm : Form
    {
        public DummyForm(ListView listView)
        {
            // Minimize and make it not appear in taskbar to
            // avoid flicker etc when running the tests
            this.WindowState = FormWindowState.Minimized;
            this.ShowInTaskbar = false;
            this.Controls.Add(listView);
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T15:53:14.923

我发现在 ListView 对象上调用 .CreateControl() 会刷新 SelectedItems 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T15:21:12.893

“我发现在 ListView 对象上调用 .CreateControl() 会刷新 SelectedItems 属性。”

没错，但前提是您也使用多选。

# c# - 在 finally 块中访问返回值是否合法且可能？

> ID：304847
> 
> 赞同：3
> 
> 时间：2008-11-20T10:14:21.267
> 
> 标签：c#, .net, vb.net, try-catch, seh

我希望在离开函数之前设置一个 usererror 字符串，具体取决于函数中的返回码和变量。

我目前有：

```
Dim RetVal as RetType

try
...
if ... then
    RetVal = RetType.FailedParse
    end try
endif
...

finally
    select case RetVal
        case ...
            UserStr = ...
    end select
end try

return RetVal 
```

是否可以使用 return RetType.FailedParse，然后在 finally 块中访问它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-20T10:18:40.260

在 C# 中这样做的唯一真正方法是在方法的开头声明一个变量来保存值 - 即

```
SomeType result = default(SomeType); // for "definite assignment"
try {
   // ...
   return result;
}
finally {
    // inspect "result"
} 
```

在 VB 中，您*也许*可以直接访问结果 - 因为 IIRC 它有点像上面的工作方式（方法名称为“结果”）。警告：我**真的**不是 VB 人...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T10:28:34.013

从 try 块中声明变量，并检查 finally 块是否已设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-05T14:52:43.273

我想知道在 VB 中是否可以（合法地）这样做：

```
Public Function MyFunc() as integer
    Try
      if DoSomething() = FAIL Then
        return FAIL
      end if

  Finally
      if MyFunc = FAIL then
          Me.ErrorMsg = "failed"
      endif
  End Try
End Function 
```

我知道设置 MyFunc = FAIL 是合法的（作为 VB 的后遗症），它是只写的还是可读的？我担心这是糟糕的编码，因为

```
if MyFunc = FAIL Then 
```

太相似了

```
if MyFunc() = FAIL Then 
```

这有非常不同的后果！

# c++ - 在 DLL 中使用时 Boost Spirit 崩溃

> ID：304850
> 
> 赞同：4
> 
> 时间：2008-11-20T10:15:09.937
> 
> 标签：c++, boost, boost-thread, boost-spirit

我在我的应用程序中使用 Boost.Spirit 和 Boost.Thread 库时遇到了崩溃。仅当我在主线程的进程生命周期内使用 Spirit 解析器时才会发生这种情况。

崩溃发生在退出时，似乎与 Spirit 解析器分配的线程特定存储的清理有关。它可能由于卸载 DLL 的顺序而崩溃，因为线程特定的内存是在已经卸载的 DLL 内分配的。然而，在应用程序本身退出之前，Boost.Thread DLL 不会被卸载。

有没有办法让我强制 Spirit 清除其线程特定的存储，例如当我收到进程分离通知时在我的 dll-main 中？

任何解决方案/提示将不胜感激。

PS！我的平台和设置：

*   视觉工作室 2005
*   BOOST_ALL_DYN_LINK
*   BOOST_SPIRIT_THREADSAFE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T17:46:44.207

好吧，我找到了解决方法。

在我使用 boost::spirit::parse 调用的每个地方，我基本上都会产生一个工作线程来运行它，而调用线程在与工作线程的连接调用上阻塞。不理想，但到目前为止它似乎没有任何副作用。

仍然对任何替代方案感兴趣，因为我的直觉是不需要单独的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T16:31:37.307

Boost.Spirit 是header-only，即它不驻留在自己的dll 中，所以可能不是dll 的卸载顺序，而是另一个问题。

确保删除包含您的精神解析器的实例并且不留下悬空指针。

# unit-testing - 单元测试可以有执行时间标准吗？

> ID：304857
> 
> 赞同：5
> 
> 时间：2008-11-20T10:18:00.773
> 
> 标签：unit-testing

有一个单元测试来指定某个函数返回一个值需要多长时间是一种好习惯。我正在对 curl 函数进行单元测试，并希望指定它需要在 5 秒后超时。这符合单元测试的工作方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-20T10:49:57.810

这取决于。如果函数被指定为在 5 秒后超时，那么这是要进行单元测试的东西。我认为在这样的单元测试中衡量性能并不是一个好主意，因为它增加了太多其他导致单元测试失败的原因。例如，如果您开始在构建服务器上并行运行单元测试，您不希望额外的负载使您的测试失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T12:29:11.087

测试你的函数加上 curl 和服务器是比单元测试更多的集成测试。话虽如此，你不必那么教条，如果你只有一个这样的测试，这肯定是可行的。我已经写过，并且仍然有一些不是纯单元测试的测试，但它们完成了他们的工作。只要它们不妨碍我，我就会一直保留它们。

唯一让我烦恼的是五秒超时，这对于单元测试来说非常长。现在，这取决于它发生的频率。您是否考虑过在启动 curl 之前进行基本测试（例如 ping 服务器）以避免启动不必要的测试。

如果您正在寻找替代方案，那么将您的测试分成两部分怎么样： 1/ 测试 curl 是如何被调用的；2/测试你的函数对结果做了什么？这样，您将与服务器隔离，并且不需要任何超时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T10:24:58.373

我不认为，这是对方法契约的测试。这就是为什么我会说不，这不是单元测试。但这听起来像是某种系统测试。

使您的示例不符合单元测试资格的另一点是，它需要很长时间（5 秒）才能执行。通常，您应该能够在每次进行更改时执行完整的单元测试套件。你不能等待很长时间。

这就是为什么我认为您的测试应该在另一组测试中，而不是单元测试。它应该在您的日常构建/持续集成中执行，而不是在每个程序员每次签入之前执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T10:37:22.983

我认为这可能值得一个主观标签，因为你问的每个人都会有他们自己的一个真正的单元测试定义。

在我看来，在*大多数*情况下，时间超出了单元测试的范围，但对于验证超时正确行为的特定情况，只要执行时间合理，它就是合适的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T10:51:02.703

纯粹主义者的回答：是的，长时间运行的单元测试是代码异味，应该更改

务实的回答：如果您对长时间运行的测试有疑问，并且希望确保您的测试套件快速失败，请添加超时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T10:54:47.237

我认为你应该嘲笑函数用来检测它已经花费了足够长的等待时间的方法，然后你可以立即测试超时而不是实时等待。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-20T11:11:37.390

也许更多的是性能测试，但是是的。nunit 有它们：[http](http://weblogs.asp.net/egarmon/archive/2005/02/14/372114.aspx) ://weblogs.asp.net/egarmon/archive/2005/02/14/372114.aspx 。junitperf 有它们：[http ://clarkware.com/software/JUnitPerf.html](http://clarkware.com/software/JUnitPerf.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-20T11:18:53.180

如果答案是否定的怎么办？这是否意味着您不会编写测试？

如果是特殊情况，我会编写测试，现在担心它。

如果我盯着很多涉及计时的测试，我可能会将它们与正常的单元测试分开，这样我就可以独立或一起运行这些集合。

# .net - 我应该在我的版本中分发 log4net 吗？

> ID：304859
> 
> 赞同：4
> 
> 时间：2008-11-20T10:18:28.167
> 
> 标签：.net, log4net, dependencies, release, release-management

我想知道在依赖关系方面什么是最佳实践以及应该如何完成发布。就我而言，我有一个依赖于 log4net 的库，我想知道是否应该将 log4net.dll （将 log4net 引用设置为复制本地）与发行版一起分发？

我可以简单地说 log4net 应该安装在 GAC 中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-20T10:21:00.550

我不太喜欢将 log4net（或 NUnit）放入 GAC。我更喜欢将 3rd 方库保留在本地 - 它可以更清楚地了解依赖项是什么以及您正在使用什么版本。这也意味着任何想要开始您的项目的人都可以下载、提取和构建。

所以是的，我建议您分发 log4net.dll 及其许可协议。

例如，查看我的ProtoBuf[端口的 lib 目录](http://github.com/jskeet/dotnet-protobufs/tree/master/lib)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-20T10:39:46.097

依赖 GAC 中的库可能会导致版本冲突和其他难以排除和调试的问题。我总是尝试用我的软件分发所有东西。

# regex - 如何在 bash 脚本中使用正则表达式？

> ID：304864
> 
> 赞同：83
> 
> 时间：2008-11-20T10:21:22.920
> 
> 标签：regex, bash, conditional

我想使用正则表达式检查变量是否具有有效年份。阅读[bash 手册](http://www.gnu.org/software/bash/manual/html_node/Conditional-Constructs.html)，我知道我可以使用运算符 =~

查看下面的示例，我希望看到“不正常”，但我看到“正常”。我究竟做错了什么？

```
i="test"
if [ $i=~"200[78]" ]
then
  echo "OK"
else
  echo "not OK"
fi 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2008-11-20T10:45:17.070

它在 3.1 和 3.2 之间进行了更改：

> 这是对自 bash-3.1 发布以来添加到 bash-3.2 的新功能的简要描述。
> 
> 将字符串参数引用到 [[ 命令的 =~ 运算符现在强制字符串匹配，与其他模式匹配运算符一样。

因此，使用它不带引号：

```
i="test"
if [[ $i =~ 200[78] ]] ; then
    echo "OK"
else
    echo "not OK"
fi 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-02-24T00:54:58.997

您需要在运算符周围有空格 =~

```
我=“测试”
如果 [[ $i =~ "200[78]" ]];
然后
  回声“确定”
别的
  回声“不好”
菲

```

# java - Java/Swing 有哪些好的对接框架？

> ID：304874
> 
> 赞同：38
> 
> 时间：2008-11-20T10:25:15.347
> 
> 标签：java, swing, frameworks, docking

我正在寻找一个好的轻量级Java 对接框架。

我知道 Netbeans 和 Eclipse 可以用作 RCP，但我正在寻找更轻量级的东西。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-10-22T14:01:02.230

*   [乌鸦对接](http://raven.java.net/ravenDocking/download.html)Apache 2；0.2 MB
*   [MyDoggy](http://mydoggy.sourceforge.net/) LGPL；仅 JAR：0.7 MB；2010 年 12 月
*   [VL对接](http://code.google.com/archive/p/vldocking/)LGPL；0.4 MB
*   [NetBeans](http://netbeans.org/features/platform/index.html) CDDL/GPL；4.6 MB（平台.zip）
*   Eclipse CPL 还是 EPL？只有 swt (?)
*   [InfoNode](http://sourceforge.net/projects/infonode/) GPL 或商业
*   [Sanaware](http://www.javadocking.com/) GPL 或 Commercial full zip 0.3MB
*   [对接框架](http://dock.javaforge.com/)LGPL；3 MB
*   [吉德](http://www.jidesoft.com/products/dock.htm)商业；<3MB
*   [麻省理工](http://forge.scilab.org/index.php/p/flexdock/)学院弹性码头；0.4 MB；2011 年 11 月

非活动项目

*   [SwingDocking](http://sourceforge.net/projects/swingdocking/)在我看来功能齐全且速度快；阿帕奇许可证 2；2007 年 10 月
*   [XUI](http://sourceforge.net/projects/xui/)会在这里进一步发展吗？MPL; 1.6 MB (XUI-jdk15.zip); 2008 年 2 月
*   JDocking CDDL；1.3 MB (v0.8.zip) netbeans 的对接部分
*   [JRichClient](http://code.google.com/p/jrichclient/) GPL；flexdock的派生；2007 年 11 月

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-08-18T07:15:27.073

我曾经评估过几个对接框架（包括已经提到的[flexdock](https://flexdock.dev.java.net/)和[mydoggy](http://mydoggy.sourceforge.net/)和[jdocking](https://jdocking.dev.java.net/)。

最后我来到了[Docking Frames](http://dock.javaforge.com/index.html)，我真的可以推荐它。它易于使用，但仍然具有丰富的 + 良好的文档和开发人员通过论坛提供的快速支持。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-02T06:50:37.087

我过去曾成功使用**过 FlexDock**，但它似乎没有得到很好的支持，而且很难开始（这是一个非常复杂的对接框架）。FlexDock 是开源的。

此外，最近，我喜欢使用**MyDoggy**，它得到了很好的支持并且非常易于使用（非常有据可查，有足够的示例和教程）。它的主要缺点（对我而言）是在使用 3rd-party LAF（例如 Substance）时难以适应其外观。但总的来说，我真的很喜欢它。如果我没记错的话，它是一个相当轻量级的库。我会推荐它用于任何用途（它是开源的并且可以免费使用），因为它具有良好的 API。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-20T11:22:16.183

请参阅[infonode 停靠窗口](http://www.infonode.net/index.html?idw)。

他们有 gpl 版本和商业版本，但许可证并不昂贵。如果您选择了合适的皮肤，它会变得强大且好看（我们使用看起来有点像 eclipse 的 ShapedGradientDockingTheme）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-21T09:24:11.973

我们在我们的 3 个产品中非常成功地使用了来自 vlsolutions ( [http://vldocking.com ) 的 VLDocking。](http://vldocking.com)他们有一些与 GPL 兼容的开源许可证。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-21T18:22:59.643

JIDE 有很多组件，包括一个对接框架。JIDE 的核心是开源的，但他们也有几个商业库。对接框架是商业的。

[http://www.jidesoft.com/products/component.htm](http://www.jidesoft.com/products/component.htm)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-12-17T15:28:03.170

我刚刚发布了另一个对接框架。它非常轻量级，并且在 Apache 2.0 许可下可用。

乌鸦对接：

[http://raven.java.net/ravenDocking/index.html](http://raven.java.net/ravenDocking/index.html)

# internet-explorer - 网页如何对信息栏做出反应

> ID：304877
> 
> 赞同：0
> 
> 时间：2008-11-20T10:25:52.227
> 
> 标签：internet-explorer, asp-classic, vbscript, activex

为了便于在我们的 Web 应用程序上上传，我们在上传页面上安装/加载 ActiveX 控件。人们没有意识到信息栏要求他们安装此控件。我如何设置页面，以便它指示/支持用户并帮助他们安装插件，并且只有在完成后才能继续？我找不到可以检查的触发器/http 状态代码。

我注意到 Microsoft 下载中心显示了一个页面，其中包含要求在继续之前安装 Windows Genuine Advantage 的说明，但我现在找不到它，并且不知道我可以研究的其他示例。

编辑：因为我发现可以使用 javascript 来确定是否安装了对象控件，请参阅[http://www.velocityreviews.com/forums/t98678-check-to-see-if-active-x-control-is-安装和显示说明-if-needed.html](http://www.velocityreviews.com/forums/t98678-check-to-see-if-active-x-control-is-installed-and-display-instructions-if-needed.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-21T22:24:41.963

Adobe 在安装最新 Flash 插件的页面上有一个信息位。我会做一些小的信息，就像 Adob​​e 为您的网站所做的那样。教育确实是解决这类问题的最佳方法。...或找到更好的上传解决方案。;)

# visual-studio-2008 - VC++ 2008 Express 中缺少“多线程调试”功能？

> ID：304878
> 
> 赞同：0
> 
> 时间：2008-11-20T10:26:07.327
> 
> 标签：visual-studio-2008

我看到[评论](https://stackoverflow.com/questions/86562/what-is-missing-in-the-visual-studio-express-editions)说 VC++ 2008 Express 调试器中缺少一些功能，特别是与多线程调试相关的功能。我尝试在 Visual C++ 2008 Express 中调试一个多线程程序，它似乎工作正常。真正缺少什么？

看[这里](http://msdn.microsoft.com/en-us/vstudio/products/cc149003.aspx)（如一个答案中所述），我发现：

“多线程/多进程调试更容易通过改进的线程窗口和其他用户界面改进使多线程调试更容易”

但目前还不清楚真正缺少什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T10:38:37.597

Visual C++ 2008 Express**缺少**以下特性：

*   转储使您可以保存程序信息以供以后调试

*   附加到远程进程使您可以将调试器附加到已设置为远程调试的远程计算机上的进程

此外，Visual C++ 2008 Express 不包括 OpenMP 支持、64 位编译器或资源编辑器。

参考：http: [//msdn.microsoft.com/en-us/vstudio/products/cc149003.aspx](http://msdn.microsoft.com/en-us/vstudio/products/cc149003.aspx)

这些资源可能也很有趣：

[Visual Studio Express 常见问题解答](http://www.microsoft.com/express/support/faq/)

[Visual Studio 2008 维基文章](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio_Express)

# python - 我在linux上使用什么来使python程序可执行

> ID：304883
> 
> 赞同：104
> 
> 时间：2008-11-20T10:27:57.650
> 
> 标签：python, linux, file-permissions

我刚刚安装了一个 linux 系统（Kubuntu），想知道是否有一个程序可以使 python 程序对 linux 可执行。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2008-11-20T10:32:27.860

只需将其放在脚本的第一行：

```
#!/usr/bin/env python 
```

使文件可执行

```
chmod +x myfile.py 
```

执行

```
./myfile.py 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-09T09:53:50.073

如果您想在 Python 中获取独立的二进制应用程序，请尝试使用 py2exe 或[PyInstaller 之](http://www.pyinstaller.org/)类的工具。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-12-12T17:12:12.470

您可以使用 PyInstaller。它会生成一个构建 dist，因此您可以将其作为单个“二进制”文件执行。

[http://pythonhosted.org/PyInstaller/#using-pyinstaller](http://pythonhosted.org/PyInstaller/#using-pyinstaller)

Python 3 还具有创建构建 dist 的本机选项：

[https://docs.python.org/3/distutils/builtdist.html](https://docs.python.org/3/distutils/builtdist.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-09T07:55:36.957

将这些行放在代码的开头将告诉您的操作系统查找执行 python 脚本所需的二进制程序，即它是 python 解释器。

所以这取决于你的操作系统，它保存了 python 解释器。由于我有 Ubuntu 作为操作系统，它保留了 python 解释器，`/usr/bin/python`所以我必须在我的 python 脚本的开头编写这一行；

```
#!/usr/bin/python 
```

完成并保存代码后

1.  启动你的命令终端

2.  确保脚本位于您当前的工作目录中

3.  类型`chmod +x script_name.py`

4.  现在您可以通过单击脚本来启动脚本。将出现一个警告框；在警告框中按“运行”或“在终端中运行”；或者，在终端提示符下，键入`./script_name.py`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-07T10:24:26.427

如果一个人想使可执行`hello.py`

首先找到python在你的操作系统中的路径：`which python`

它通常位于“/usr/bin/python”文件夹下。

在第一行`hello.py`应该添加：`#!/usr/bin/python`

然后通过linux命令`chmod`

一个应该让它像可执行一样：`chmod +x hello.py`

并执行`./hello.py`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-23T01:48:14.467

我执行以下操作：

1.  放 ＃！/usr/bin/env python3 在脚本顶部
2.  chmod u+x 文件.py
3.  将文件名中的 .py 更改为 .command

这实际上将文件转换为 bash 可执行文件。当你双击它时，它应该运行。这适用于基于 Unix 的系统。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-11T14:49:37.097

另一种方法是创建别名。例如在终端写：

```
alias printhello='python /home/hello_world.py' 
```

编写`printhello`将运行 hello_world.py，但这只是暂时的。要使别名永久化，您必须将它们添加到 bashrc，您可以通过在终端中编写以下代码来编辑它：

```
gedit ~/.bashrc 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-19T06:57:07.817

执行以下步骤：

1.  将此作为第一行添加到执行入口点 python 文件中

```
#!/usr/bin/python 
```

2.  修改脚本为可执行

```
 chmod +x <script-name>.py 
```

3.  创建一个符号链接到您的`<script-name>.py`from`/usr/local/bin`

```
ln -s /usr/local/bin/<executable-name-you-want> <path-to-your-script> 
```

**无论您是否有单个独立的 python 脚本或是否有多个由主文件调用的依赖脚本，这些步骤都有效。**

# objective-c - 无法从 C 函数调用 Objective C 方法

> ID：304885
> 
> 赞同：15
> 
> 时间：2008-11-20T10:28:11.347
> 
> 标签：objective-c

我正在为 GUI 应用程序使用 MVC 架构。模型类有一些 C 函数。其中一个 C 函数调用了 Objective-C 类的一些方法。我使用该类的对象调用这些方法。发生的奇怪事情是 xyz 方法之前的方法被完美地调用，但是当调用该 xyz 方法时，该方法和它之后的方法没有被执行。我没有收到任何错误。所以无法弄清楚到底发生了什么。关于这可能是什么原因的任何想法？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2008-11-20T11:17:56.490

正如 Marc 指出的那样，您可能正在使用对 OBJC 对象的引用，该对象在 Objective-c 范围之外未初始化。

这是调用 ObjC 对象方法的 C 代码的工作示例：

```
#import <Cocoa/Cocoa.h>

id refToSelf;

@interface SomeClass: NSObject
@end

@implementation SomeClass
- (void) doNothing
{
        NSLog(@"Doing nothing");
}
@end

int otherCfunction()
{
        [refToSelf doNothing];
}

int main()
{

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    SomeClass * t = [[SomeClass alloc] init];
    refToSelf = t;

    otherCfunction();

    [pool release];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T11:01:13.993

您绝对可以从 C 函数对 Obj-C 对象运行方法，因此在某些时候您的代码中可能存在错误。如果我不得不猜测，听起来一个对象在你不希望它是 nil 的时候它是 nil 。通常，您首先会在函数中设置断点，这样您就可以找出相关对象的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:43:24.270

断点在xyz之前的方法上，然后在调试器中开始单步执行。通过单步调试器中的代码，您可以发现多少错误，这真是令人惊讶。事实上，这实际上是一种推荐的避免错误的技术，可以始终单步执行您编写的任何新代码的代码。

我同意 Marc 的观点，“那个方法和它之后的方法没有被执行”的典型原因是对象引用是 nil，因为 [nil doAnything] 不会做任何事情并且不会报告错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-18T06:01:37.580

有一个简单的方法可以做到这一点：

```
@implementation
// Define a object
ClassName *thisClass; 
```

然后用 self 初始化

```
thisClass = self; 
```

您可以在 C-Method 中使用任何 var 和方法

# powershell - PSake 扩展？

> ID：304907
> 
> 赞同：7
> 
> 时间：2008-11-20T10:37:03.607
> 
> 标签：powershell, scripting, build-automation, psake

我最近发现了 Powershell 并通过那个[PSake](http://code.google.com/p/psake/)。如果您正在使用它并且您已经对其进行了扩展或为其创建了任务，请分享！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T03:22:55.543

JP Boodhoo[显然延长了psake](http://blog.developwithpassion.com/2008/10/30/interested-in-trading-in-your-nant-builds-a-teaser/)。只是希望他能释放他的所作所为......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-17T22:04:20.873

如果仍然对 psake 感兴趣，有新项目[psake-contrib](http://github.com/JamesKovacs/psake-contrib)。还是空的，但我希望不会太久:)

# .net - 引用第 3 方程序集的最佳实践

> ID：304909
> 
> 赞同：7
> 
> 时间：2008-11-20T10:38:21.047
> 
> 标签：.net, dependencies

我一直想知道在引用第 3 方程序集时有哪些最佳做法。前段时间我问了一个问题“[依赖和引用：我到底应该引用什么](https://stackoverflow.com/questions/268214/dependencies-and-references-what-exactly-should-i-reference)“并收到了一些要考虑的事情，但我并不完全相信。我有一个构建我的项目所需的第 3 方程序集，根据我目前所读到的内容，我应该只引用构建我的项目所需的程序集。这留下了问题第 3 方程序集的运行时依赖项。如果我也引用它们，那么引用列表会变得很大（因为有几个依赖项）并且包含很多程序集，我不知道做什么，并且与我的项目实际上无关。另外我想避免在其中任何一个中使用公共方法，而只使用主要的第 3 方大会。我怎样才能以一种体面的方式做到这一点？感谢任何帮助，因为我很困惑。

为了让我了解我在这里处理的内容是第 3 方库使用 hibernate 和 log4net 以及办公室互操作程序集。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T11:12:06.593

如果我必须处理未在 GAC 中注册的库，我使用以下方法：

*   创建一个文件夹“Libs”，其中包含所有第三方库及其依赖项
*   参考我需要的
*   创建一个构建后操作，将“Libs”文件夹中的所有文件复制到“bin/debug”（或发布）文件夹

如果您不知道依赖项，可以使用[Dependency Walker](http://www.dependencywalker.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T11:26:32.337

我在许多（C#）项目中使用的替代方法是：

*   在解决方案目录中创建一个“Bin”文件夹（与项目目录同级）
*   制作所有项目的输出 ../Bin 而不是 bin/debug 或 bin/release
*   将任何不是构建结果的文件放在“Bin”中，包括库依赖项、某些数据文件或其他任何文件，具体取决于项目
*   “Bin”的内容也进入源代码管理（当然没有构建输出）
*   无论您的项目直接引用什么库，都会进入“References”或“Libs”文件夹（有时我也尝试将它们放入 Bin 中，但在这种情况下，您需要记住在添加时禁用对输出目录的引用的复制参考您的项目，这在大型项目中变得乏味）

不确定这是否是一个好的解决方案，但到目前为止一直对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T09:23:24.643

您还可以使用[NDepend](http://www.NDepend.com)来准确了解和控制您从层库中使用的内容。我写了一篇关于这个[控制库的使用的文章](http://codebetter.com/blogs/patricksmacchia/archive/2008/10/20/controlling-the-usage-of-libraries.aspx)

# ms-access - 替换 MS Access 表单

> ID：304914
> 
> 赞同：3
> 
> 时间：2008-11-20T10:40:16.067
> 
> 标签：ms-access, data-entry

我们有许多非常古老的数据输入表单，它们是在 Access 中创建的，它们链接到我们的 SQL Server 数据库。每个表格可以有任意数量的子表格。

我们希望不再使用这些访问前端，但没有时间创建新的应用程序或 Web 应用程序来替换我们拥有的每个表单。

是否有另一个选项可以链接到 SQL Server 并允许表单的可视化设计和自动链接到数据库？

或者，如果这个问题太大了，你能想出一种方法来简化表格的手工编码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-20T10:46:59.843

根据经验，我认为您不会发现任何产品、工具或技术比 Access 更容易创建带有数据库的表单。

您有[Access Developer's Handbook](https://rads.stackoverflow.com/amzn/click/com/0782140114)的副本吗？过去，我发现这是在非常复杂的项目中实施最佳实践的宝贵资源，其中 Access 作为 SQL Server 的前端。

如果你想转向网络表单，我会看看[IronSpeed Designer](http://www.ironspeed.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-15T13:08:53.757

我同意其他评论者的观点。

Access 前端最糟糕的事情是部署问题（尽管轻度使用的 Access 应用程序可以在网络文件共享上正常运行，这让事情变得简单一些。）

但是，如果开发速度是一个目标，Access 仍然是一个很棒的工具。因此，对于内部应用程序，Access 可以工作。

只是我的 2 美分。

赛斯

# silverlight - 如何模拟来自 Silverlight 的 ADO.Net 数据服务调用

> ID：304915
> 
> 赞同：2
> 
> 时间：2008-11-20T10:40:32.820
> 
> 标签：silverlight, unit-testing, mocking, wcf-data-services

有没有人找到从 Silverlight 应用程序模拟 ADO.Net 数据服务调用的好方法？

数据服务的力量似乎是使用 linq，客户端，而不是实体。但是，在测试进行数据访问的对象时，您如何模拟服务？

一种方法是创建一个完整的模拟数据服务，但随后需要重新创建所有对象。

是否有任何模拟框架可以提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-20T14:49:51.537

我理解，但使用 ADO.Net 数据服务的优势之一似乎是您可以免费获得实体对象。但是，如果您不能模拟它所调用的服务，则无济于事。

也许一种方法是传入不同的 uri，但它可能仍然不是所有相同的对象？

如果你最终编写了新的接口或外观来隐藏对象，你会觉得你已经失去了所有已经获得的东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-22T04:44:09.390

*如果您为服务*创建了自己的接口和包装器，则不必模拟服务返回的实际对象。

因此，您可能有一个 ICustomerRepository 包装了公开您的客户表的 ADO.NET 数据服务。然后，您可以模拟 ICustomerRepository，但仍返回数据服务返回的相同 Customer 对象。

# delphi - Win32 中的 SOAP for Delphi 入门

> ID：304918
> 
> 赞同：6
> 
> 时间：2008-11-20T10:43:33.330
> 
> 标签：delphi, soap, remobjects

我有一个使用 RemObjects SDK 在 Delphi/C++Builder 中构建的服务器进程，它声称支持 SOAP 请求。

测试 SOAP 支持的最快和最简单的方法是什么？我宁愿不必学习一门新语言/安装一个新的 IDE/花费超过一天...

为了澄清这一点，我已经愉快地使用 RO 本机协议连接到服务器，并启用了 SOAP，但我想测试不基于 RO SDK 的系统如何使用它。对客户端和服务器都使用 RO SOAP 并不能做到这一点......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T11:48:19.983

我没有用 RemObjects 尝试过，但如果服务器已经支持 SOAP，我想不出比使用 Delphi 简单地使用 Web 服务并调用每个方法更简单的方法来测试它。这出乎意料地直截了当。

*   创建一个新的应用程序。
*   在 File|New|Other|WebServices 中选择 WSDL Importer。
*   进入服务器的 WSDL 页面。为您创建了一个包装器单元，其中包含所有 Web 服务方法和 Web 服务使用的任何其他类/枚举。

在实现部分的正上方，您将看到一个返回 Web 服务类实例的方法：

```
function GetMyServerSoap(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): MyServerSoap; 
```

使用默认值实例化它并开始调用方法。

如果您希望/需要查看正在发送和接收的 XML，请提供您自己的 HTTPRIO 组件并使用 OnBeforeExecute 和 OnExecute 事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-12-12T14:31:00.417

试试[soapUI](http://www.soapui.org/) - 它是一个免费的SOAP 工具包，可以轻松分析和测试SOAP 服务。

> soapUI 是一个免费的开源桌面应用程序
> 
> ```
> * inspecting Web Services
> * invoking Web Services
> * developing Web Services
> * Web Services Simulation and Mocking
> * Functional, Load and Compliance testing of Web Services 
> ```
> 
> 它主要面向提供或使用基于 WSDL 或 REST 的 Web 服务（Java、.net 等）的开发人员和测试人员。功能和负载测试可以在soapUI 中以交互方式完成，也可以在使用soapUI 命令行工具的自动构建或集成过程中完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T11:39:41.467

按照他们网站上的教程进行操作。这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-20T12:31:40.363

只需使用 TROSOAPMessage 发布您的服务，就像其他消息格式（如 TROBinMessage）一样。

查看有关该主题的 RO 网站教程

# rdf - 哪个 Triplestore 用于快速语义 Web 开发？

> ID：304920
> 
> 赞同：10
> 
> 时间：2008-11-20T10:44:53.903
> 
> 标签：rdf, semantic-web, owl, ontology, triplestore

易于安装/使用是这里最重要的因素 - 而不是性能。

小是可以的，因为不需要大型数据集。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-08T20:14:06.243

我还推荐[sesame](http://www.openrdf.org)，它轻量级，非常易于安装，并且为小型数据集提供了良好的性能。Sesame 1.2.x 的查询性能比 Sesame 2.x 好得多，因为 2.x 系列增加了上下文支持。

我已经使用 tomcat、resin 和 jetty 测试了 sesame 的安装/部署，并且它们都可以轻松地工作。我不建议绑定到诸如 Postgres 或 MySQL 之类的 RDBMS 组件，至少在 1.x 系列中，性能是不可接受的，即使对于原型应用程序也是如此。内存和本机实现提供了良好的查询性能并提供了简单的持久性，尽管它们缺乏真正的事务。

[Jena](http://jena.sourceforge.net/)有一个不错的 API，对数据库、推理器等有更多的支持，但占用空间更大，总体上使用起来也比较麻烦。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-08T20:48:15.067

[ARC2](http://arc.semsol.org/)作为 PHP/MySQL 产品给我留下了深刻的印象。该项目网站有一个有用的“入门”，可以让您快速启动和运行，并且可以在邮件列表中快速解决问题/问题。根据您要执行的操作，SPARQLscript，一个用于处理查询结果的 ARC2 迷你语言插件可能非常有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-15T10:38:08.433

老问题，但只是作为更新：

我尝试过 Virtuoso、OpenRDF Sesame 和 4store（都在 2012 年 6 月的版本中），发现 4store 最适合使用，因为加载数据、启动和停止服务器等非常简单。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-04T18:14:57.597

查看[SWI-Prolog 语义网络库](http://www.swi-prolog.org/packages/semweb.html)。应该很容易使用，即使对 Prolog 知之甚少。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-04T18:52:09.580

我们用[芝麻](http://www.openrdf.org/)。它是用 Java 实现的，因此您将获得跨平台支持。如果您习惯使用[Tomcat](http://tomcat.apache.org/)，它应该很容易安装。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-04-25T17:11:59.287

如果您熟悉 Ruby，[RDF.rb](http://rdf.rubyforge.org/)库可以很快上手；通过 RubyGems 安装非常简单：

```
$ sudo gem install rdf 
```

除了处理内存中的 RDF 数据，当前可用的 RDF.rb 存储适配器包括 SQLite、PostgreSQL、MongoDB、Cassandra、RedStore 和 Sesame。

从 Web 加载和解析 RDF 数据也再简单不过了：

```
graph = RDF::Graph.load("http://datagraph.org/jhacker/foaf.rdf") 
```

有关教程、代码示例和 API 文档，请参阅 RDF.rb 项目页面。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-23T18:04:11.200

我尝试了 Virtuoso Open Source、Jena 和 Sesame....而后者，也多亏了[这个](http://www.snee.com/bobdc.blog/2009/02/getting-started-with-sesame.html)...更容易安装。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-09-06T22:33:49.143

如果您是 .NET 开发人员，您可能对[Intellidimensions Semantic SDK](http://www.intellidimension.com/products/semantics-sdk/)感兴趣。如果你想在内存中加载一个图，然后对该图执行 SPARQL 查询，代码很简单：

```
var gds = new GraphDataSource();
gds.Read<RdfXmlReader>(File.ReadAllText(@"C:\graph.owl"));
Table results = gds.Query("select ?s ?p ?o where {?s ?p ?o} limit 10"); 
```

如果您是学生或研究人员，他们通常会在您联系他们时提供免费许可证。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-12-17T14:30:13.137

4store 是我合作过的最简单、最快的三联商店

# java - JFileChooser 有时会挂起

> ID：304932
> 
> 赞同：6
> 
> 时间：2008-11-20T10:48:50.883
> 
> 标签：java, jfilechooser

我遇到了以下线程中描述的“挂起 JFileChooser”的问题：

[http://forums.sun.com/thread.jspa?threadID=5309960](http://forums.sun.com/thread.jspa?threadID=5309960)

[http://forums.sun.com/thread.jspa?threadID=724817](http://forums.sun.com/thread.jspa?threadID=724817)

[http://x86.sun.com/thread.jspa?threadID=5275999&messageID=10156541](http://x86.sun.com/thread.jspa?threadID=5275999&messageID=10156541)

我正在使用 JVM 1.6.0_07-b06。它发生在 Windows XP 和 Windows Vista 上。

有人找到解决方法了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-20T16:57:03.573

有一个错误，如果您将网络驱动器映射到桌面上，它有时会挂在 JFileChooser 上。那或者它可能是网络驱动器的快捷方式。类似的东西...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T14:05:13.873

我自己也遇到过这个问题，更新没有帮助。奇怪的是，从我的桌面（JFileChooser 的默认位置）中删除所有 zip 文件（尤其是大文件）解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-26T01:22:19.933

.10 更新应该修复与 zipfile 相关的更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-26T20:58:34.600

是的，这是一个错误，但我相信 Java 的最新版本不再有它。
有一些解决方法（尽管它们都是肮脏的黑客）：

1.  使用线程等待直到它被初始化
2.  重用相同的 JFileChooser（将其存储在变量中）而不是创建新的。如果可能，懒惰地初始化它们：

```
 public static JFileChooser chooser = null;

public static void doSomething(){
    if(chooser==null)
         chooser = new JFileChooser();
    //use JFileChooser
} 
```

这样，您的用户必须等待更少......但他们仍然需要等待。真正解决此问题的唯一方法是更新您的 JRE。

# lucene.net - 如何负载平衡 Lucene.Net？

> ID：304934
> 
> 赞同：3
> 
> 时间：2008-11-20T10:49:34.067
> 
> 标签：lucene.net, load-balancing

是否可以跨多个进程/服务器对 Lucene.NET 索引进行负载平衡？

由于 Lucene.NET 是基于文件的，是否可以将索引的简单文件复制（使用即 robocopy）复制到服务查询的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T10:54:31.153

是的，这是可能的，如果您真的只是在阅读/搜索索引，则不会出现任何问题。

# sql - 如何在 SELECT FOR XML 查询中选择返回的列名？

> ID：304940
> 
> 赞同：55
> 
> 时间：2008-11-20T10:53:31.063
> 
> 标签：sql, sql-server, xml, sql-server-2005

MS SQL 有一个方便的解决方法，可以将多行中的列值连接成一个值：

```
SELECT col1
 FROM table1
 WHERE col2 = 'x'
 ORDER by col3
 FOR XML path('') 
```

并返回一个不错的记录集：

```
XML_F52E2B61-18A1-11d1-B105-00805F49916B                                     
---------------------------------------- 
<col1>Foo</col1><col1>Bar</col1> 
```

只有返回记录集中的列名相当讨厌！

列名似乎包含随机元素（或 GUID），因此我不愿意在我的应用程序中使用它（不同的实例或不同的服务器可能有另一个 GUID）。不幸的是，我不能使用 * 来选择值，并且由于现有应用程序中的限制，我不能遍历返回的列，要么......

有没有办法强制返回记录集中的列名更合理？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2008-11-20T11:11:22.850

那应该这样做：

```
select(
SELECT col1
 FROM table1
 WHERE col2 = 'x'
 ORDER by col3
 FOR XML path('')
) as myName 
```

不漂亮，但应该给出你需要的结果

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-18T11:07:29.947

试试这个...

```
select
(
    select '@greeting' = 'hello', '@where' = 'there', '@who' = 'world'
    for xml path ('salutation'), type
) as 'MyName' 
```

注意：如果在“for xml”之后省略“type”，你会得到*（我认为）*一个字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T08:37:07.913

存储过程

```
declare @requestResultXML xml

set @requestResultXML =
            (
                SELECT 'NPOIT-1.0' AS '@Interface',
                (
                    select  'Query'     as '@Type',
                            'GetBill'   as '@Query',
                            'True'      as '@CompressResult'
                        FOR XML PATH('Head'), TYPE
                ),
                (
                    select  @pin        as '@PIN',
                            @period     as '@Period',
                            @number     as '@Number',
                            @barcode    as '@Barcode'
                        FOR XML PATH('QueryParams'), TYPE
                )   as Data

                FOR XML PATH('DataExchangeModule')              
            )

select @requestResultXML as GetBillRequest 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-16T16:05:52.303

对于 EXPLICIT xml 生成 - 使用联合，您需要再次包装结果（作为 XML 的奖励结果）：

```
SELECT 
    CAST(  
        (
            SELECT 
                * 
            FROM (
                SELECT 
                    1 AS Tag
                    ,NULL AS Parent
                    ...
                UNION ALL
                SELECT ...
                FOR XML EXPLICIT
            )
        ) as XML) as [MyName] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-27T10:07:37.657

```
DECLARE @XmlData XML;
SET @XmlData =(SELECT * FROM [dbo].[Users] ORDER by UserName FOR XML path(''))
SELECT @XmlData AS Result 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-27T09:54:55.480

```
DECLARE @XmlData XML;

SET @XmlData = (
        SELECT *
        FROM [dbo].[TABLE1]
        FOR XML PATH('ChildNodeDetailsResponse')
            ,ROOT('ParentNode')
        )

SELECT @XmlData AS Result 
```

# sharepoint - 以声明方式或编程方式创建 Sharepoint 列表？

> ID：304949
> 
> 赞同：2
> 
> 时间：2008-11-20T10:57:21.193
> 
> 标签：sharepoint

最好是使用 xml (schema.xml) 在功能中创建共享点列表，还是使用使用 API 创建列表的自定义代码？

我问是因为我希望声明性方法是最简单的，但是根据我发现的所有教程，似乎我必须通过复制和修改现有的 schema.xml 或通过自动生成它来创建一个巨大的 schema.xml 文件现有清单。schema.xml 似乎包含很多冗余数据。

编辑：我说的是带有自定义列的自定义列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T14:42:51.893

Schema.xml 是一团糟。如果您想控制各种视图，或者如果您希望用户在“创建列表”页面上找到您的自定义列表，您应该使用它。否则，我将使用标准模板创建一个列表，并根据需要添加列，所有这些都在代码中。（请记住还要将列添加到相应的视图中。）

使用代码的另一个原因是如果您想使用查找字段。我还没有找到在 xml 中设置目标列表的好方法。

也就是说，使用 schema.xml 并不难。缺点是美观：您在项目中添加了大量数据，其中大部分您永远都不想接触，并且会吓到未来的维护者。代码很干净。

# oracle - 检测是否安装了 Oracle 数据库

> ID：304960
> 
> 赞同：8
> 
> 时间：2008-11-20T11:01:46.990
> 
> 标签：oracle, installation, detection

我想知道是否有办法判断系统上的 Oracle 实例是否安装了数据库？

这是一个安装脚本，在继续将我自己的表空间加载到该数据库之前，我需要验证是否有一个实际的数据库。有没有人解决过这个问题？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-20T11:07:30.863

检查 ORACLE_HOME 是否存在。预期应该为安装配置此环境也是合理的，因此测试环境变量并退出并进行合理的诊断（可能表明它们运行 oraenv）是一个很好的开始。如果您设置了 ORACLE_HOME、ORACLE_SID 或其他适当的环境变量，则可以检查是否存在 oracle home 并测试数据库连接和权限。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-20T18:49:48.883

对于 Oracle 10g，在 Windows 上：

*   检查注册表：
    *   密钥`HKLM\SOFTWARE\ORACLE`必须存在。
    *   必须存在一个子项：
        *   具有以开头的名称`KEY_`（例如`KEY_OraDb10g_home1`，结束字符串是 Oracle 主名称）。
        *   具有名称以 开头`ORA_`和结尾的值`_AUTOSTART`。（例如`ORA_XE_AUTOSTART`，中间字符串是实例名称）。

请注意，安装 Oracle 客户端（那时没有数据库实例）会在注册表中创建条目并可以设置环境变量（如`ORACLE_HOME`）。这就是为什么上面的模式有点复杂。

这种模式很可能也适用于 Oracle 9i，也可能适用于 Oracle 8i。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-20T11:05:39.023

您可以使用它`tnsping`来检查数据库侦听器是否处于活动状态，这将是一个很好的指示。除此之外，为什么不简单地做一个测试连接呢？如果它是安装程序过程的一部分，如果您事先不知道它们将是什么，您可以提示用户输入适当的连接凭据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-12T12:23:44.230

在 /etc/oratab 文件中查找 oracle home。这些 home 安装了数据库软件以及该 home 的数据库名称。然后您可以通过启动它来检查数据库是否健全。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T21:55:32.513

我不确定 Oracle，但对于 MySQL 和 PostgreSql，我执行以下操作：

```
$yum grouplist | grep SQL 
```

这将返回：

```
MySQL Database client
MySQL Database server
PostgreSQL Database client
PostgreSQL Database server 
```

所以我认为你应该尝试：

```
$yum grouplist | grep Orac 
```

# .net - 检测 .NET 中命名空间之间的依赖关系

> ID：304967
> 
> 赞同：7
> 
> 时间：2008-11-20T11:04:05.690
> 
> 标签：.net, dependencies, coupling

是否有任何实用程序可以检查一组托管程序集并告诉您一个命名空间中的任何类型是否依赖于另一个命名空间中的任何类型？例如，假设我有一个`MyApp.BusinessRules`命名空间并且不希望它直接访问 中的任何内容`MyApp.GUI`，但两个命名空间都在同一个程序集中。我的目标是能够编写一个自定义的 MSBuild 任务来验证各种耦合规则是否被破坏。

到目前为止，我遇到的唯一一个看起来可能会这样做的工具是[NDepend](http://www.ndepend.com/)，但我想知道是否有更简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T11:06:21.643

老实说，我怀疑 NDepend 将是最简单的方法。

但是，如果您真的不希望一个程序集的各个部分相互引用，则几乎可以肯定地将程序集拆分为更多的逻辑单元。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-20T18:57:46.293

> 到目前为止，我遇到的唯一一个看起来可能会这样做的工具是 NDepend，但我想知道是否有更简单的解决方案。

我是工具[NDepend](http://www.NDepend.com)的开发者之一。请您告诉我们您在 NDepend 中发现的复杂之处以及您如何为您设想一个更简单的解决方案？

NDepend 提供了 3 种不同的方式来做你想做的事：[依赖矩阵](http://www.ndepend.com/Doc_Matrix.aspx)、[依赖图](http://www.ndepend.com/Doc_VS_Arch.aspx)，你还可以[在 LINQ 查询 (CQLinq)](http://www.ndepend.com/Features.aspx#CQL)和规则上编写一些代码规则来[检测命名空间之间的循环](http://www.ndepend.com/DefaultRules/webframe.html?Q_Avoid_namespaces_dependency_cycles.html)，或者强制执行一些特定的依赖关系。

> 例如，假设我有一个 MyApp.BusinessRules 命名空间，并且不希望它直接访问 MyApp.GUI 中的任何内容，但两个命名空间都在同一个程序集中。

为此，可以编写以下 CQLinq 规则，还能比这更简单吗？：

```
warnif count > 0
let businessRules = Application.Namespaces.WithNameLike("^MyApp.BusinessRules")
let gui = Application.Namespaces.WithNameLike("^MyApp.GUI")

from n in businessRules.UsingAny(gui)
let guidNamespacesUsed = n.NamespacesUsed.Intersect(gui)
select new { n, guidNamespacesUsed } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-08T19:59:57.677

[您可以使用 .NET Reflector 的DSM 插件](http://www.tom-carter.net)分析命名空间依赖项（我是它的开发人员）

分析完程序集后，您可以将项目保存到文件中。此文件只是结构简单的 XML，因此您可以将其传递给脚本以进行自定义分析

**[更新]**：这个插件现在以 Visual Studio 插件的形式提供

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-22T18:31:12.660

您可以尝试 Visual Studio 2010 Ultimate 的 RC 版本来为 .NET 代码生成依赖关系图。您可以生成所有程序集、命名空间、类或它们的某种组合的图表，或者您可以使用架构资源管理器来选择特定的工件和您想要可视化的关系。

您还可以从依赖关系图或现有工件创建层图，绘制允许的依赖关系，然后将层验证作为 MSBuild 过程的一部分，以确保不引入无效的依赖关系：

**如何：从代码生成图形文档**：http : [//msdn.microsoft.com/en-us/library/dd409453%28VS.100%29.aspx#SeeSpecificSource](http://msdn.microsoft.com/en-us/library/dd409453%28VS.100%29.aspx#SeeSpecificSource)

> 您可以使用 Visual Studio Ultimate 通过生成有向图文档来探索现有代码中的关系和组织。这些图将代码元素及其关系表示为一组通过链接或边连接的节点。您可以使用这些图表来帮助您可视化、探索和分析代码。

**如何：使用架构资源管理器查找代码**：http : [//msdn.microsoft.com/en-us/library/dd409431%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd409431%28VS.100%29.aspx)

> 您可以使用 Architecture Explorer 选择要可视化的代码的垂直部分或“切片”。您可以探索 Visual Studio 解决方案中的源代码或 .dll 文件或 .exe 文件中的已编译托管代码。您可以使用 Architecture Explorer 通过安装其他提供程序来浏览其他域。当您找到要可视化的代码时，您可以生成图表来探索该代码中的关系。

**如何：从工件创建层图**：http : [//msdn.microsoft.com/en-us/library/dd465141%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd465141%28VS.100%29.aspx)

> ...使用层图可视化系统的高级架构并验证代码是否符合此设计。要执行此任务，请将 Visual Studio 解决方案中的工件组织并关联到逻辑、抽象组或层中。这些层描述了这些工件执行的主要任务或系统的主要组件。层之间的箭头表示这些工件之间存在或应该存在的相互依赖关系。要对代码实施架构约束，请描述图表上的预期依赖关系，然后根据图表验证代码。通过以这种方式使用层图，您可以帮助使代码更易于理解、重用和维护。

[层图 http://i.msdn.microsoft.com/Dd465141.UML_LayerRefReading(en-us,VS.100).png](http://i.msdn.microsoft.com/Dd465141.UML_LayerRefReading(en-us,VS.100).png)

**如何：根据层图验证代码**：http : [//msdn.microsoft.com/en-us/library/dd409395%28VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd409395%28VS.100%29.aspx)

> 根据层图验证代码有助于您在代码发展时对代码实施架构约束。执行此任务时，会将代码中的依赖项与图表上的依赖项进行比较。

**RC 下载**：[http](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=457bab91-5eb2-4b36-b0f4-d6f34683c62a) ://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=457bab91-5eb2-4b36-b0f4-d6f34683c62a 。

**Visual Studio 2010 架构发现和建模工具**论坛：[http ://social.msdn.microsoft.com/Forums/en-US/vsarch/threads](http://social.msdn.microsoft.com/Forums/en-US/vsarch/threads)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-21T06:18:41.977

很可能马克很久以前就解决了他的问题，所以*这个答案适用于*使用 VS 社区的新手。最近我遇到了[NsDepCop](https://github.com/realvizu/NsDepCop)，它碰巧既免费又有用。

我在使用 VS 2019 社区构建的项目中使用它，尽管设置`config.nsdepcop`可能有些麻烦，但它仍然有效——毕竟它是在编辑 XML 规则。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T11:07:07.073

反射器做到了这一点。

右键单击命名空间，单击分析，中提琴！:)

# jboss - 你可以在 JBoss 中使用 mod_python 吗？

> ID：304977
> 
> 赞同：0
> 
> 时间：2008-11-20T11:09:11.107
> 
> 标签：jboss, mod-python

任何人都知道是否可以像 Apache HTTPD 一样将 mod_python 放在 JBoss 下？鉴于 JBoss 内部有 Tomcat，这似乎是一件合理的事情。

如果不是 mod_python，JBoss 下是否有任何 python 支持可以将解释器保留在内存中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T11:15:04.357

我不确定`mod_perl`在 JBoss 中运行，但您可能需要考虑以下几种方法：

### 启用 CGI

您可以在 tomcat 中启用 CGI。请参阅[此处](http://www.wellho.net/forum/Perl-Programming/Running-Perl-CGI-scripts-under-Apache-Tomcat.html)的示例？

### 使用 jython

Java 6 对在 JVM 中运行其他语言有很好的支持。其中之一是python的[jython变体？](http://www.jython.org/Project/)

希望这可以帮助。

编辑：固定链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T11:12:37.763

你看过[Jython](http://www.jython.org/Project/)吗？毕竟Tomcat是用Java构建的。

# c++ - 正确替换 C++ 中缺失的“finally”

> ID：304979
> 
> 赞同：11
> 
> 时间：2008-11-20T11:10:37.050
> 
> 标签：c++, exception, finally, c++-faq

由于`finally`C++中没有，因此如果您希望代码具有异常安全性，则[必须改用 RAII设计模式。](http://www.research.att.com/~bs/bs_faq2.html#finally)一种方法是使用本地类的析构函数，如下所示：

```
void foo() {
    struct Finally {
        ~Finally() { /* cleanup code */ }
    } finalizer();
    // ...code that might throw an exception...
} 
```

与直接解决方案相比，这是一个很大的优势，因为您不必编写 2 次清理代码：

```
try {
    // ...code that might throw an exception...
    // cleanup code (no exception)
} catch (...) {
    // cleanup code (exception)
    throw;
} 
```

本地类解决方案的一大缺点是您不能直接访问清理代码中的局部变量。因此，如果您需要访问它们，它将使您的代码膨胀很多：

```
void foo() {
    Task* task;
    while (task = nextTask()) {
        task->status = running;
        struct Finally {
            Task* task;
            Finally(Task* task) : task(task) {}
            ~Finally() { task->status = idle; }
        } finalizer(task);
        // ...code that might throw an exception...
    }
} 
```

**所以我的问题是：**有没有结合这两种优势的解决方案？这样您 a) 不必编写重复的代码，并且 b) 可以访问清理代码中的局部变量，就像`task`在上一个示例中一样，但没有这样的代码膨胀。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-11-20T11:57:24.257

`struct Finally`您可以在类的函数中提取清理代码`Task`并使用 Loki 的[ScopeGuard](http://loki-lib.sourceforge.net/index.php?n=Idioms.ScopeGuardPointer) ，而不是定义。

```
ScopeGuard guard = MakeGuard(&Task::cleanup, task); 
```

有关 ScopeGuard 的更多信息，另请参阅此[DrDobb 的文章](http://www.ddj.com/cpp/184403758)和此[其他文章](http://www.zete.org/people/jlehrer/scopeguard.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-20T11:35:42.287

我认为没有更清洁的方法可以实现您想要做的事情，但我认为您示例中“最终方法”的主要问题是[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)不当。

例如，函数 foo() 负责 Task 对象的一致性，这很少是一个好主意，Task 本身的方法应该负责将状态设置为合理的值。

我确实意识到有时确实需要 finally，而您的代码显然只是一个简单的示例来说明一个观点，但这种情况很少见。在极少数情况下，我可以接受更多人为的代码。

我想说的是，您应该很少需要 finally 构造，并且对于您这样做的少数情况，我想说不要浪费时间构建更好的方法。它只会鼓励你最终使用比你真正应该使用的更多......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-20T17:24:35.250

这是一种丑陋的做法：（你是从 Java 来的吗？）

请阅读这篇文章：
[C++ 是否支持“finally”块？（我一直听到的这个“RAII”是什么？）](https://stackoverflow.com/questions/161177/does-c-support-finally-blocks-and-whats-this-raii-i-keep-hearing-about)

它解释了为什么 finally 是一个如此丑陋的概念，以及为什么 RIAA 更加优雅。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-24T11:39:15.213

我通常使用更像这样的东西：

```
class Runner {
private:
  Task & task;
  State oldstate;
public:
  Runner (Task &t, State newstate) : task(t), oldstate(t.status); 
  {
    task.status = newstate;
  };

  ~Runner() 
  {
    task.status = oldstate;
  };
};

void foo() 
{
  Task* task;
  while (task = nextTask())
  {
    Runner r(*task, running);
            // ...code that might throw an exception...
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T16:17:38.193

正如其他人所说，“解决方案”是更好地分离关注点。在您的情况下，为什么任务变量不能自行清理？如果需要对其进行任何清理，那么它不应该是一个指针，而是一个 RAII 对象。

```
void foo() {
//    Task* task;
ScopedTask task; // Some type which internally stores a Task*, but also contains a destructor for RAII cleanup
    while (task = nextTask()) {
        task->status = running;
        // ...code that might throw an exception...
    }
} 
```

在这种情况下，您可能需要智能指针（默认情况下，boost::shared_ptr 将删除指针，但您可以指定自定义删除器函数，它可以执行任意清理任务。对于指针上的 RAII，这通常是您将想。

问题不在于缺少 finally 关键字，而是您使用无法实现 RAII 的原始指针。

但通常，每种类型都应该知道如何清理自己。不是在抛出异常时范围内的每个对象之后（这是最终所做的，以及您试图做的），只是在其自身之后。如果每个对象都这样做，那么您根本不需要大的包罗万象的“在范围内的每个对象之后清理”功能。

# windows - 如何在 Windows 中获取 COM 端口的友好名称？

> ID：304986
> 
> 赞同：16
> 
> 时间：2008-11-20T11:12:46.890
> 
> 标签：windows, serial-port, device-manager

我有一个通过 USB 连接的 GSM 调制解调器。调制解调器创建 2 个串行端口。第一个自动连接到调制解调器，第二个在设备管理器中显示为“HUAWEI Mobile Connect - 3G PC UI Interface (COM6)”

第二个端口用于从调制解调器获取重要信息，例如信号质量；发送和接收短信；以及许多其他功能。

我正在编写一个应用程序，它将包含第二个端口提供的一些功能。我需要的是一种确定哪个 COM 端口是备用端口的可靠方法。迭代端口并检查对“ATE0”的响应是不够的。调制解调器的端口通常是编号较低的端口，当拨号连接未激活时，它将与第二个端口一样响应“ATE0”。

我想做的是迭代端口并检查它们的友好名称，如设备管理器中所示。这样我就可以将我的应用程序中的端口链接到设备管理器中标有“HUAWEI Mobile Connect - 3G PC UI Interface (COM6)”的端口。我还没有找到任何可以让我以编程方式获取该名称的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-20T11:31:38.037

很久以前，我为客户端编写了一个实用程序来执行此操作，但用于 GPS 而不是调制解调器。

我刚刚看过它，可能有帮助的部分是：

```
 GUID guid = GUID_DEVCLASS_PORTS;

SP_DEVICE_INTERFACE_DATA interfaceData;
ZeroMemory(&interfaceData, sizeof(interfaceData));
interfaceData.cbSize = sizeof(interfaceData);

SP_DEVINFO_DATA devInfoData;
ZeroMemory(&devInfoData, sizeof(devInfoData));
devInfoData.cbSize = sizeof(devInfoData);

if(SetupDiEnumDeviceInfo(
    hDeviceInfo,            // Our device tree
    nDevice,            // The member to look for
    &devInfoData
    ))
{
    DWORD regDataType;

    BYTE hardwareId[300];
    if(SetupDiGetDeviceRegistryProperty(hDeviceInfo, &devInfoData, SPDRP_HARDWAREID, &regDataType, hardwareId, sizeof(hardwareId), NULL))
    {
... 
```

（您在循环中调用此位，并增加 nDevice）

进而

```
BYTE friendlyName[300];
        if(SetupDiGetDeviceRegistryProperty(hDeviceInfo, &devInfoData, SPDRP_FRIENDLYNAME, NULL, friendlyName, sizeof(friendlyName), NULL))
        {
            strFriendlyNames += (LPCTSTR)friendlyName;
            strFriendlyNames += '\n';
        } 
```

找到设备的名称。

希望这将帮助您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-28T15:12:58.593

在确定串行端口设备是您想要的设备后（通过查看其友好名称、检查其父设备等），获取端口名称的正确方法可能是：

*   调用`SetupDiOpenDevRegKey(hDevInfo, devInfoData, DICS_FLAG_GLOBAL, 0, DIREG_DEV, KEY_READ)`以获取`HKEY`所谓的设备密钥
*   在此注册表项中查询`REG_SZ`值“PortName”
*   不要忘记关闭`HKEY`:)

但是，这可能需要在 C# 中进行如此多的互操作，这甚至都不好笑，所以如果您坚持使用字符串解析解决方案，我不会责怪您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-20T15:11:24.240

[Will Dean](https://stackoverflow.com/users/987/will-dean)发布的信息最有帮助。这是最终对我有用的代码。PInvoke 类中的所有内容均来自[http://www.pinvoke.net](http://www.pinvoke.net)。我确实必须在这里或那里更改数据类型以使其工作（例如使用枚举而不是 uint 时），但应该很容易弄清楚。

```
internal static string GetComPortByDescription(string Description)
{
    string Result = string.Empty;
    Guid guid = PInvoke.GUID_DEVCLASS_PORTS;
    uint nDevice = 0;
    uint nBytes = 300;
    byte[] retval = new byte[nBytes];
    uint RequiredSize = 0;
    uint PropertyRegDataType = 0;

    PInvoke.SP_DEVINFO_DATA devInfoData = new PInvoke.SP_DEVINFO_DATA();
    devInfoData.cbSize = Marshal.SizeOf(typeof(PInvoke.SP_DEVINFO_DATA));

    IntPtr hDeviceInfo = PInvoke.SetupDiGetClassDevs(
        ref guid, 
        null, 
        IntPtr.Zero, 
        PInvoke.DIGCF.DIGCF_PRESENT);

    while (PInvoke.SetupDiEnumDeviceInfo(hDeviceInfo, nDevice++, ref devInfoData))
    {
        if (PInvoke.SetupDiGetDeviceRegistryProperty(
                hDeviceInfo, 
                ref devInfoData, 
                PInvoke.SPDRP.SPDRP_FRIENDLYNAME,
                out PropertyRegDataType, 
                retval, 
                nBytes, 
                out RequiredSize))
        {
            if (System.Text.Encoding.Unicode.GetString(retval).Substring(0, Description.Length).ToLower() ==
                Description.ToLower())
            {
                string tmpstring = System.Text.Encoding.Unicode.GetString(retval);
                Result = tmpstring.Substring(tmpstring.IndexOf("COM"),tmpstring.IndexOf(')') - tmpstring.IndexOf("COM"));
            } // if retval == description
        } // if (PInvoke.SetupDiGetDeviceRegistryProperty( ... SPDRP_FRIENDLYNAME ...
    } // while (PInvoke.SetupDiEnumDeviceInfo(hDeviceInfo, nDevice++, ref devInfoData))

    PInvoke.SetupDiDestroyDeviceInfoList(hDeviceInfo);
    return Result;
} 
```

我认为这条线`Result = tmpstring.Substring(tmpstring.IndexOf("COM"),tmpstring.IndexOf(')') - tmpstring.IndexOf("COM"));`有点笨拙，关于如何清理它的建议将不胜感激。

感谢您对此事的帮助 Will，如果没有您，我仍然会在 Google 上搜索。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-10T12:33:34.487

基于@Will Dean 答案的C++ 版本。

```
#include <windows.h>
#include <initguid.h>
#include <devguid.h>
#include <setupapi.h>

void enumerateSerialPortsFriendlyNames()
{
    SP_DEVINFO_DATA devInfoData = {};
    devInfoData.cbSize = sizeof(devInfoData);

    // get the tree containing the info for the ports
    HDEVINFO hDeviceInfo = SetupDiGetClassDevs(&GUID_DEVCLASS_PORTS,
                                               0,
                                               nullptr,
                                               DIGCF_PRESENT
                                               );
    if (hDeviceInfo == INVALID_HANDLE_VALUE)
    {
        return;
    }

    // iterate over all the devices in the tree
    int nDevice = 0;
    while (SetupDiEnumDeviceInfo(hDeviceInfo,            // Our device tree
                                 nDevice++,            // The member to look for
                                 &devInfoData))
    {
        DWORD regDataType;
        DWORD reqSize = 0;

        // find the size required to hold the device info
        SetupDiGetDeviceRegistryProperty(hDeviceInfo, &devInfoData, SPDRP_HARDWAREID, nullptr, nullptr, 0, &reqSize);
        BYTE* hardwareId = new BYTE[(reqSize > 1) ? reqSize : 1];
        // now store it in a buffer
        if (SetupDiGetDeviceRegistryProperty(hDeviceInfo, &devInfoData, SPDRP_HARDWAREID, &regDataType, hardwareId, sizeof(hardwareId) * reqSize, nullptr))
        {
            // find the size required to hold the friendly name
            reqSize = 0;
            SetupDiGetDeviceRegistryProperty(hDeviceInfo, &devInfoData, SPDRP_FRIENDLYNAME, nullptr, nullptr, 0, &reqSize);
            BYTE* friendlyName = new BYTE[(reqSize > 1) ? reqSize : 1];
            // now store it in a buffer
            if (!SetupDiGetDeviceRegistryProperty(hDeviceInfo, &devInfoData, SPDRP_FRIENDLYNAME, nullptr, friendlyName, sizeof(friendlyName) * reqSize, nullptr))
            {
                // device does not have this property set
                memset(friendlyName, 0, reqSize > 1 ? reqSize : 1);
            }
            // use friendlyName here
            delete[] friendlyName;
        }
        delete[] hardwareId;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-20T18:56:09.607

很高兴它奏效了。

你可以试试：

正则表达式.Match(tmpstring, @"COM\s\d+").ToString()

为您的字符串匹配。

作为 .NET 风格点，我会添加一个“使用 System.Text”，并且我不会以大写字母开头的局部变量名称，如果我觉得自己很善良，我可能会将 SetupDiDestroyDeviceInfoList 放在 finally{} 子句中.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-24T06:05:51.777

我建立了一个用于串口控制的库。它可以在注册表中搜索友好名称。链接在这里。

[https://github.com/kcwongjoe/serial_port](https://github.com/kcwongjoe/serial_port)

```
std::vector<SerialPortInfo> comPorts = SerialPort::getSerialPortList();
std::cout << comPorts[0].friendlyName << std::endl; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-20T02:37:51.413

使用[LiGenChen](http://gaiger-programming.blogspot.tw/2015/07/methods-collection-of-enumerating-com.html)发布的方法。ComPortSetupAPISetupDiClassGuids 方法给出了最好的时间和友好的名称。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-07T02:44:16.993

基于此处的答案组合，这是一个获取 COM 编号、VID / PID 和友好名称等的解决方案。

这是一些用于获取已连接设备列表的示例代码。

```
public static class SerialPortUtils
{
    private static Guid GUID_DEVCLASS_PORTS = new Guid(0x4d36e978u, 0xe325, 0x11ce, 0xbf, 0xc1, 0x08, 0x00, 0x2b, 0xe1, 0x03, 0x18);

    private unsafe static bool GetPortRegistryProperty(HDEVINFO classHandle, SP_DEVINFO_DATA* deviceInfo, uint spdrp, out string result)
    {
        DWORD size;
        SetupAPI.SetupDiGetDeviceRegistryPropertyW(classHandle, deviceInfo, spdrp, null, null, 0, &size);
        if (size == 0)
        {
            result = null;
            return false;
        }

        var resultBuffer = new byte[(int)size];
        fixed (byte* resultBufferPtr = resultBuffer)
        {
            if (SetupAPI.SetupDiGetDeviceRegistryPropertyW(classHandle, deviceInfo, spdrp, null, resultBufferPtr, size, null))
            {
                result = Encoding.Unicode.GetString(resultBufferPtr, (int)size - sizeof(char));
                return true;
            }
            else
            {
                result = null;
                return false;
            }
        }
    }

    public unsafe static List<SerialPortDeviceDesc> GetSerialPortDevices()
    {
        var results = new List<SerialPortDeviceDesc>();

        // get present ports handle
        var classHandle = SetupAPI.SetupDiGetClassDevsW(ref GUID_DEVCLASS_PORTS, null, IntPtr.Zero, SetupAPI.DIGCF_PRESENT);
        if (classHandle == Common.INVALID_HANDLE_VALUE || classHandle == HDEVINFO.Zero) throw new Exception("SetupDiGetClassDevsW failed");

        // enumerate all ports
        var deviceInfo = new SP_DEVINFO_DATA();
        uint deviceInfoSize = (uint)Marshal.SizeOf<SP_DEVINFO_DATA>();
        deviceInfo.cbSize = deviceInfoSize;
        uint index = 0;
        while (SetupAPI.SetupDiEnumDeviceInfo(classHandle, index, &deviceInfo))
        {
            // get port name
            string portName;
            HKEY regKey = SetupAPI.SetupDiOpenDevRegKey(classHandle, &deviceInfo, SetupAPI.DICS_FLAG_GLOBAL, 0, SetupAPI.DIREG_DEV, WinNT.KEY_READ);
            if (regKey == Common.INVALID_HANDLE_VALUE || regKey == IntPtr.Zero) continue;
            using (var regHandle = new SafeRegistryHandle(regKey, true))
            using (var key = RegistryKey.FromHandle(regHandle))
            {
                portName = key.GetValue("PortName") as string;
                if (string.IsNullOrEmpty(portName)) continue;
            }

            // get registry values
            if (!GetPortRegistryProperty(classHandle, &deviceInfo, SetupAPI.SPDRP_FRIENDLYNAME, out string friendlyName)) continue;
            if (!GetPortRegistryProperty(classHandle, &deviceInfo, SetupAPI.SPDRP_HARDWAREID, out string hardwareID)) continue;

            // add device
            results.Add(new SerialPortDeviceDesc(friendlyName, portName, hardwareID));

            // setup for next device
            ++index;
            deviceInfo = new SP_DEVINFO_DATA();
            deviceInfo.cbSize = deviceInfoSize;
        }

        // finish
        SetupAPI.SetupDiDestroyDeviceInfoList(classHandle);
        return results;
    }
} 
```

这是 SerialPortDeviceDesc 类

```
public enum SerialPortType
{
    Unknown,
    COM
}

public class SerialPortDeviceDesc
{
    public readonly string friendlyName, portName, hardwareID;
    public readonly string vid, pid;
    public readonly int portNumber = -1;
    public readonly SerialPortType portType = SerialPortType.Unknown;

    public SerialPortDeviceDesc(string friendlyName, string portName, string hardwareID)
    {
        this.friendlyName = friendlyName;
        this.portName = portName;
        this.hardwareID = hardwareID;

        if (portName.StartsWith("COM") && int.TryParse(portName.Substring("COM".Length), out portNumber))
        {
            portType = SerialPortType.COM;
        }
        else
        {
            portNumber = -1;
        }

        var rx = Regex.Match(hardwareID, @"VID_(\w*)&PID_(\w*)", RegexOptions.IgnoreCase);
        if (rx.Success)
        {
            vid = rx.Groups[1].Value;
            pid = rx.Groups[2].Value;
        }
    }
} 
```

# c# - 如何从 ac# Web 应用程序向 Active Directory 通讯组发送电子邮件？

> ID：304992
> 
> 赞同：1
> 
> 时间：2008-11-20T11:18:33.773
> 
> 标签：c#, active-directory, smtp, email, active-directory-group

我正在尝试向 Active Directory 通讯组发送电子邮件。

我知道您可以使用以下方式发送邮件：

```
 mail.From = new MailAddress("steveb@microsoft.com");
 mail.To.Add("billg@microsoft.com");

 //set the content
 mail.Subject = "This is an email";
 mail.Body = "this is a sample body with html in it.";
 mail.IsBodyHtml = true;

 //send the message
 SmtpClient smtp = new SmtpClient("127.0.0.1");
 // i seem to need this too....
 smtp.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;
 smtp.Send(mail); 
```

但是，当我尝试在该`To`字段中加入（有效的）AD 组（例如“我的测试组”）时，它会将其踢出，因为它不是有效的电子邮件地址。

我敢肯定这真的很简单，但我似乎被卡住了......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T11:22:36.447

您的通讯组有一个邮件地址，这就是您需要在“收件人”参数中添加的内容。

# web-services - 标记 Web 服务端点

> ID：304994
> 
> 赞同：2
> 
> 时间：2008-11-20T11:19:57.217
> 
> 标签：web-services, label, soa, endpoints

Web 服务端点通常在项目的早期阶段定义。由于它遵循“合同优先”原则，因此在与客户端系统通信后不应更改。

因此，以良好的方式标记 Web 服务至关重要。

您将如何标记 Web 服务？

例如

```
http://my.domain.com/businessProcess/services/concreteServiceName 
```

其他想法？

**将此问题视为民意调查...随意投票选出最佳创意。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-24T21:31:36.063

我们通过与开发人员、业务人员和支持人员交谈来决定名称。我们成立了一个名为“接口控制委员会”的委员会，我们的处理方式就像你在问题中描述的那样。我们希望服务名称具有描述性，反映它们支持的流程，并满足技术和业务利益相关者的需求。

当我们召开 ICC 会议时，我们还会讨论模式以及应该如何开发它们。业务人员在这方面也很关键，因为他们知道要公开哪些数据以及为什么要公开。

K A

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-02T03:25:23.070

我会在 URL 中包含一个版本号。

# c# - 在 C# 项目之间添加引用的经验法则？

> ID：304995
> 
> 赞同：3
> 
> 时间：2008-11-20T11:19:59.963
> 
> 标签：c#, visual-studio

我有一个关于解决方案中项目之间引用的问题。我之前的大多数应用程序在解决方案中都只有一两个项目，但是这次我想进一步划分应用程序。

我现在在 Visual Studio 2008 中开始一个新的解决方案，并创建了几个基础项目来划分我的应用程序的各个部分。

但目前我只是一时兴起创建不同的项目，并在需要时在它们之间创建引用。有时我会遇到两个项目需要相互引用的情况，但这是不允许的，因为它会导致循环依赖。

当我创建不同的项目并将它们链接在一起时，是否应该记住任何规则/提示/模式？

我应该从内部开始，然后走出去吗？让“核心”项目引用所有外部项目，或者可能从外部进入，独立项目都引用“核心”？或者我在两个项目中有业务的第三种选择，它们都引用了第三个项目？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-20T11:30:28.913

确实，您不能有循环引用，但老实说，如果您在所有解决方案之间存在相互依赖关系，那么将解决方案拆分为小项目有什么好处？

通常在我打开 Visual Studio 之前，我会拿一张纸，将我的问题拆分为逻辑功能区域。您可以在顶部绘制一个 Utilities 程序集，在底部绘制所有 GUI、Web 服务和其他最终项目。Utilities 项目不会引用任何其他项目，并且底部的项目不会被任何东西引用。然后你认为这些功能是通用的，例如所有的 GUI 可以与通用的用户控件和对话框共享一个通用的 UI 项目，并且这个 UI 项目将引用“对象模型”项目等。底部的项目只能引用什么在他们之上。

通常，当您需要循环引用时，您可以通过在较低级别的程序集中定义一个接口并在较高级别提供实现来很好地绕过它。

在不知道你到底在做什么的情况下，恐怕这是我能给你的唯一建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-20T12:22:58.230

这有点过时，但为了帮助决定如何拆分项目，您可以在维基百科中查找“耦合”和“内聚”。

此外，虽然我们有时将这些决定视为“风格”而不是“实质”，但我们应该记住，程序集边界确实对编译器和运行时都有意义。有几个例子......

1.  C# 编译器理解一个称为“内部”的关键字。为了做出关于将因素分解到单独项目中的最佳决策，您应该真正了解它的力量。

2.  运行时中的 JIT 编译器永远不会内联跨越程序集边界的函数调用，这会影响性能。（原因与代码访问安全性有关）。

还有更多的例子，所以这个决定确实会产生影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-20T12:46:13.113

我将使用 Winforms 应用程序作为示例。我开始进入的模式是这样的。该解决方案称为示例。

**Example.Entities** - 这个项目将包含我的业务对象和相关的类层次

**Example.Dal** - 我将所有业务逻辑和数据访问逻辑放在这个项目（命名空间）中，这是加载您的业务对象然后将它们传递到另一层的代码。

**Example.Gui** - 我把我所有的 Winforms 和 GUI 实用程序代码和我的“主要”开始输入方法放在这里。您也可以选择将此项目称为示例。我仍然喜欢使用命名空间 Example.Gui 进行代码分离。

**Example.Test** - 您可以将所有测试代码放入此项目中。

如果代码属于业务对象之一或业务对象集合，我会尝试将代码驱动到**实体中。**

Gui 将引用实体和 Dal（数据访问层）。根据您编写 Dal 的方式，它可能会引用您的实体。测试应该引用实体、Dal，也许还有 Gui。

实体是它自己的程序集 dll，因此您可以在其他项目中使用它。或者从 .NET SOAP 服务返回它们。

GUI 层应将 DAL 的内部视为黑盒。您的主应用程序不应该关心业务对象是如何加载或持久化的。但是您应该使用您的测试项目来彻底测试您的 DAL。

# c# - C# 中的悖论表

> ID：304996
> 
> 赞同：1
> 
> 时间：2008-11-20T11:20:22.490
> 
> 标签：c#, odbc, paradox

我正在尝试将 Paradox 5 表读入数据集或类似数据结构，并将其放入 SQL Server 2005 表中。我已经搜索了谷歌和 SO，但运气不佳。我试过 ODBC：

```
public void ParadoxGet()
{
    string ConnectionString = @"Driver={Microsoft Paradox Driver (*.db )};DriverID=538;Fil=Paradox 5.X;DefaultDir=C:\Data\;Dbq=C:\Data\;CollatingSequence=ASCII;";

    DataSet ds = new DataSet();
    ds = GetDataSetFromAdapter(ds, ConnectionString, "SELECT * FROM Growth");
    foreach (String s in ds.Tables[0].Rows)
    {
        Console.WriteLine(s);
    }
}
public DataSet GetDataSetFromAdapter(DataSet dataSet, string connectionString, string queryString)
{
    using (OdbcConnection connection = new OdbcConnection(connectionString))
    {
        OdbcDataAdapter adapter = new OdbcDataAdapter(queryString, connection);
        connection.Open();
        adapter.Fill(dataSet);
        connection.Close();
    }
    return dataSet;
} 
```

这只是返回错误

> 错误 [HY000] [Microsoft][ODBC Paradox Driver] 外部表不是预期的格式。

我也厌倦了 OELDB (Jet 4.0) 但得到相同的 External table is not in the expected format 错误。

我在 Data 文件夹中有 DB 文件和 PX（增长表的）......任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:35:32.663

我有同样的错误。它出现在我在 Win2008 64（以前的操作系统是 Win2003 32）上启动我的 C# 项目时。我还发现它在控制台应用程序中运行良好，并在 winforms 中给出了不同的错误。似乎问题来自在 64 位系统上工作的 32 ODBC 驱动程序的细节。我的解决方案是：

```
// Program.cs
static void Main()
{
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        // it is important to open paradox connection before creating
        // the first form in the project
        if (!Data.OpenParadoxDatabase())
            return;
        Application.Run(new MainForm());
} 
```

连接字符串很常见：

```
string connStr = @"Driver={{Microsoft Paradox Driver (*.db )}};DriverID=538;
                   Fil=Paradox 7.X;DefaultDir=C:\\DB;Dbq=C:\\DB;
                   CollatingSequence=ASCII;"; 
```

打开连接后，您可以在创建第一个表单后在任何地方关闭它（如果您需要大部分时间保持数据库关闭），例如：

```
private void MainForm_Load(object sender, EventArgs e)
{
    Data.CloseParadoxDatabase();
} 
```

之后，您可以在执行应用程序期间每次需要打开和关闭连接，并且不会出现任何异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T11:46:54.697

也许这会帮助你，

[http://support.microsoft.com/support/kb/articles/Q237/9/94.ASP?LN=EN-US&SD=SO&FR=1](http://support.microsoft.com/support/kb/articles/Q237/9/94.ASP?LN=EN-US&SD=SO&FR=1) [http://support.microsoft.com/support/kb/articles/Q230 /1/26.ASP](http://support.microsoft.com/support/kb/articles/Q230/1/26.ASP)

似乎是最新版本的 Microsoft Jet 数据库引擎

(JDE) 不完全支持 Paradox，除非 Borland 数据库引擎

(BDE) 也已安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-14T06:50:43.907

尝试以“以管理员身份运行”权限运行所有应用程序，尤其是以“以管理员身份运行”权限运行 VS.NET ......我相信你的问题会得到解决

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T16:23:36.153

这不是答案，而是更多的问题：您尝试使用 C# 进行数据操作而不是使用 SQL Server 工具直接加载数据的任何特定原因？DTS 或 SSIS 之类的东西似乎是完成这项工作的更好工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-24T11:25:41.260

谢谢，我试试看。我想使用 C#，这样我就可以将它放在一些网页上，而无需额外将它放在 SQL 服务器中。

# php - 编辑用户配置文件后更新 Zend_Auth_Storage

> ID：304997
> 
> 赞同：3
> 
> 时间：2008-11-20T11:20:23.457
> 
> 标签：php, zend-framework, authentication, zend-auth

我有以下情况：我已经登录用户，使用 DB 表进行标准身份验证

```
$authAdapter = new Zend_Auth_Adapter_DbTable(Zend_Db_Table::getDefaultAdapter()); 
$authAdapter->setTableName('users'); 
$authAdapter->setIdentityColumn('user_name'); 
$authAdapter->setCredentialColumn('password'); 
```

当用户编辑他的个人资料时，我将其保存到 Db 中，但我还需要更新存储（使用标准 Zend_Auth_Storage_Session）。有什么简单的方法可以做到吗？非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-20T13:45:39.217

```
$user = Zend_Auth::getInstance()->getIdentity();
$user->newValue = 'new value'; 
```

假设您正在更新数据库的同一语句中更新会话数据，则无需再次调用数据库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-20T18:30:30.313

您最好的选择是不使用 Zend_Auth 的存储来保存可能更改的信息——默认情况下它只保存身份（有充分的理由）。我可能会创建一个 User 类，它包含所有 Auth、ACL（可能还有配置文件）功能，该功能使用静态 get_current() 方法来加载隐藏在会话中的用户。这绕过了您在将其填充到会话中时遇到的所有一致性问题，并在您实际需要性能提升时为您提供一个实现缓存的点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-20T11:50:45.267

我已经这样做了，它可以工作，但我不知道是否有更好的方法，如何做到这一点

```
$user_data = User::getUser($user_id)->toArray();
unset($user_data['password']);

$std_user = new stdClass();

foreach ($user_data as $key => $value)
{
   $std_user->$key = $value;
}

$auth = Zend_Auth::getInstance();     
$auth->getStorage()->write($std_user); 
```

# sharepoint - 保存超过 60 条记录的重复表时，为什么 Infopath 2007 表单显示错误消息？

> ID：304999
> 
> 赞同：0
> 
> 时间：2008-11-20T11:21:43.517
> 
> 标签：sharepoint, sharepoint-2007, infopath

我们目前正在创建一个 InfoPath 2007 表单，该表单部署在 SharePoint 2007 中。在表单中，我们使用 60 多条记录填充重复表。但是，当我们提交表单时，会出现一条错误消息。重复表中的记录数会影响表单的提交吗？还提供一些解决方法来解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-24T21:54:57.870

我有超过 60 条记录的重复表，所以这可能不是你的问题。你得到的错误是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T23:03:32.133

我相信填写表格时允许的回发次数默认设置为 75 左右。我有一个类似的问题，不得不提高中央管理页面的限制。*********