# StackOverflow 问答 10009000-10009999

# selection - 比赛选择

> ID：10009000
> 
> 赞同：3
> 
> 时间：2012-04-04T10:05:20.927
> 
> 标签：selection, genetic-algorithm, tournament

我试图用锦标赛选择来实现一个 GA，但我有点困惑。我知道首先我们从整个人口中随机选择 k 个成员。然后我们使用锦标赛规模（假设 ts=2）选择最好的一个。然后我们将获胜者添加到交配池中进行交叉。但我也知道我必须填满交配池，直到它再次达到 k 大小。在这种情况下，如果我选择的 k 个候选者始终是相同的选择者，那么交配池会不会与所选群体相同？还是每一步我都必须为新的获胜者选择 k 成员？有一点帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:18:00.357

是的，每一步都涉及从总体中选择一个新的*k个元素。*没有什么能阻止同一个元素多次出现并赢得多个锦标赛，但除非你的锦标赛规模非常大（即大约等于人口规模），否则你会在交配池中获得一些随机性。

# ios - 无法在 iOS 5.1 中加载 MKMapView

> ID：10009003
> 
> 赞同：1
> 
> 时间：2012-04-04T10:05:34.937
> 
> 标签：ios, mkmapview, mapkit

我正在尝试在 MKMapView 中显示某个位置。加载 mapViewController 时，我在控制台中收到以下错误消息。

> __GEORegisterNetworkDefaults_block_invoke_0：无法连接到 com.apple.geod.defaults 上的 geod

我正在为我的应用程序使用 xcode 4.3 和 iOS 5.1。

我正在使用以下代码来显示地址：

```
- (void) showAddress 
{
    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta = 0.2;
    span.longitudeDelta = 0.2;

    CLLocationCoordinate2D location = [self addressLocation];
    region.span = span;
    region.center = location;
} 
```

并从以下代码中获取地址位置。

```
-(CLLocationCoordinate2D) addressLocation 
{
    NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                           [@"cupertino" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSError *err;
    NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSUTF8StringEncoding error:&err];
    NSArray *listItems = [locationString componentsSeparatedByString:@","];

    double latitude = 0.0;
    double longitude = 0.0;

    if([listItems count] >= 4 && [[listItems objectAtIndex:0] isEqualToString:@"200"]) 
    {
        latitude = [[listItems objectAtIndex:2] doubleValue];
        longitude = [[listItems objectAtIndex:3] doubleValue];
    }

    CLLocationCoordinate2D location;
    location.latitude = latitude;
    location.longitude = longitude;

    return location;
} 
```

当我在谷歌上搜索 mapkit 教程时，我从[http://mithin.in/2009/06/22/using-iphone-sdk-mapkit-framework-a-tutorial找到了上面的代码](http://mithin.in/2009/06/22/using-iphone-sdk-mapkit-framework-a-tutorial)

有谁知道我为什么会收到上述错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:47:34.733

您是否告诉 XCode 您的应用需要访问位置信息？我认为这是项目配置中的“特权”或类似的东西。

# asp.net - 如何在 ASP.Net 中基于本地化对象创建 UI？

> ID：10009005
> 
> 赞同：2
> 
> 时间：2012-04-04T10:05:35.953
> 
> 标签：asp.net, .net, localization

我在基于 Web 的应用程序中有一个场景，用户从下拉列表中选择一个国家/地区。选择国家后，国家列表框下方的本地化字段也会显示为与该国家相对应。在这里，我还需要根据该国家/地区的语言环境预先选择该国家并预先填充下拉列表。

让我用例子来说明这一点：

**例子**：

```
Country: United States

Corresponding Fields:
State:
Zip Code:
Time: 
Currency:
Date:

Country: United Kingdom  

Corresponding Fields:
County:
Postal Code:
Time: 
Currency:
Date:

Country: India

Corresponding Fields:
Province:
District:
PO Box: 
Currency:
Date:
Time: 
```

我怎样才能在 ASP.Net（3.5 或 4.0）中实现这一点？

想知道我们是否可以使用 Google Web Service API 来满足这个要求？期待以经过验证的经验寻求答案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:41:34.443

我可以看到国家“印度”的字段数比其他国家多 1 个。这是故意的吗？如果是，您可以在数据库中设置与国家/地区相关的字段，并将其本地化文本存储在其他“链接”表中。每个国家/地区的字段数可能不同。

如果字段相同，您可以创建特定于语言环境的资源文件并向其中添加不同的文本。当您更改下拉菜单中的选择时，只需设置`System.Threading.Thread.CurrentThread.CurrentUICulture`为相关的语言环境代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:38:49.283

从长远来看，利用资源文件来存储翻译文本将为您提供更大的灵活性。

请查看以下有关如何使用资源文件的链接：

[http://www.codeproject.com/Articles/334820/Using-Globalization-and-Localization-in-ASP-NET](http://www.codeproject.com/Articles/334820/Using-Globalization-and-Localization-in-ASP-NET)

[http://www.codeproject.com/Articles/14818/ASP-NET-2-0-Globalization-Localization-solution](http://www.codeproject.com/Articles/14818/ASP-NET-2-0-Globalization-Localization-solution)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T16:35:13.677

这与本地化无关，而是与市场特定的标准有关。具体来说，国际地址格式。我不知道有现成的解决方案，但您可以找到定义这些格式的现有资源（例如在 MSDN 上：http: [//msdn.microsoft.com/en-us/library/cc195167。 .aspx](http://msdn.microsoft.com/en-us/library/cc195167.aspx)）。

我想您可以使用您喜欢的方法（可能是 XML，可能是硬编码的数据定义）为每个市场定义格式，以定义其适当的“结构”（我所说的结构是指哪些字段和以何种顺序）并使用标准本地化来翻译每个市场对应的标签。

**编辑：**

关于日期、时间和货币，您可以使用 .NET Framework 的区域性定义，可以通过 CultureInfo 的 DateTimeFormat 和 NumberFormat 属性（[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.datetimeformat.aspx)）访问。我不确定您是想通过示例（例如今天的日期或当前时间）还是格式本身（例如 mm/dd/yy 和 hh:mm:ss）来显示日期、时间和货币。对于前者，您实例化一个 CultureInfo 并将其传递给采用 IFormatProvider 的 ToString 覆盖。日期和时间的一个很好的例子显示在[这个 MSDN 页面上](http://msdn.microsoft.com/en-us/library/8tfzyc64.aspx)。这同样适用于货币格式（[MSDN 链接](http://msdn.microsoft.com/en-us/library/d8ztz0sa.aspx)）。它是这样工作的：

```
CultureInfo cultureInfo = new CultureInfo("en-GB"); // Change en-GB to the desired culture name
DateTime now = DateTime.Now;
string sampleTime = now.ToString("T", cultureInfo); // Result: 5:04:32 PM
string sampleDate = now.ToString("d", cultureInfo); // Result: 13/3/2012
double value = 16325.62901; 
string sampleCurrency = value.ToString("C", cultureInfo); // Result: £16,325.63 
```

另一方面，如果您想显示格式，则可以通过获取 DateTimeFormatInfo 和 NumberFormatInfo 的相关属性来获取此数据。例如：

```
CultureInfo cultureInfo = new CultureInfo("en-GB");
string shortDatePattern = cultureInfo.DateTimeFormat.ShortDatePattern; // Result: d/M/yyyy 
string shortTimePattern = cultureInfo.DateTimeFormat.ShortTimePattern; // Result: h:mm tt 
string currencySymbol = cultureInfo.NumberFormat.CurrencySymbol; // Result: £ 
```

# java - 在java中读取大型xls文件（有7-8张，每张有30-40,000行）

> ID：10009006
> 
> 赞同：1
> 
> 时间：2012-04-04T10:05:38.197
> 
> 标签：java, file-io, xls

有没有办法读取大型 xls 文件？

我已经使用 Apache POI 来读取文件，但只到了一些限制。

我有一个包含一些数据的数据库，现在我想上传一个大文件（就像我说的那样）。与数据库中的数据相比，该文件在其中一张表中包含的数据很少。现在我应该如何在不设置 xls 文件的情况下更新 oracle 数据库中的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:14:44.060

对于大型 xls 文件，您应该使用 XSSF 的流式扩展，称为[SXSSF](http://poi.apache.org/spreadsheet/how-to.html#sxssf)。它应该能够在没有内存问题的情况下处理您的要求。

至于数据库问题：我建议您使用 XSSF 读取 xls 文件并为数据库中的每个文件创建临时表（取决于您的需要）。一旦所有行都存储在临时表中，您就可以轻松地将它们与现有数据合并。

# asp.net-mvc-3 - 回发多个部分视图的视图

> ID：10009008
> 
> 赞同：1
> 
> 时间：2012-04-04T10:05:40.337
> 
> 标签：asp.net-mvc-3

我是 MVC (MVC3) 的新手，所以不确定实现这一点的最佳方法。

我想创建一个单一的“主”视图（非强类型）。这个“主”视图将包含多个强类型的局部视图，每个视图都包含一个表单。因此，每个部分视图都将回发到它们自己的 POST 操作，该操作可以执行任何操作。我看到的问题是，当局部视图回发时，它只需要更新局部视图本身，而不影响页面上的其他局部视图。

当我现在从部分视图回发时，它只是单独返回部分视图，而不是整个“主”页面。

如何在 MVC3 中实现此功能？（从高层的角度）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T06:46:56.867

您可以通过 AJAX 发布数据。在我的示例中，我使用 jQuery：

```
<div id="first-form" class="form-container">
   @Html.Partial("FirstPartial")
</div>

<div id="second-form" class="form-container">
   @Html.Partial("SecondPartial")
</div>

// and here go rest forms 
```

您的部分观点可能如下：

```
@model YourModelClass
@using (Html.BeginForm())
{
    // some fields go there
}
<input type="button" value="Save Form Data" class="save-button"/> 
```

Js将遵循：

```
$("input.save-button").on("click", function () {
    var button = $(this);
    var container = button.closest("div.form-container");
    var url = container.find("form").attr("action");   

    container.busy($.post(url, function (response) {
       container.html(response);
    }));

    return false;
}); 
```

# java - 使用 Eclipse、Tomcat 和 Jersey 的 Java 中的 Restful WebServices

> ID：10009010
> 
> 赞同：1
> 
> 时间：2012-04-04T10:05:56.633
> 
> 标签：java, web-services, tomcat, jersey

如何使用 Eclipse、Tomcat 和 Jersey 创建简单的 Java 网络服务器，即要遵循的步骤？

我们正在使用以下链接创建简单的网络服务器：

*   [http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/](http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/)
*   [http://www.vogella.de/articles/REST/article.html](http://www.vogella.de/articles/REST/article.html)

但我们遇到了这样的错误：

```
java.lang.ClassNotFoundException: com.sun.jersey.spi.container.servlet.ServletContainer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:57:35.783

让 Maven 运行。然后运行此命令（如果询问某事，请按 Enter）：

```
mvn archetype:generate -DgroupId=com.test.rest -DartifactId=test -DarchetypeArtifactId=maven-archetype-webapp 
```

它将为您创建一个简单的 web 应用程序。现在将源包创建为 src/main/java/com/test/rest，并创建一个简单的类，如下所示，其中包含名称“test”：

```
 package com.test.rest;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.core.Response;

@Path("/test")
public class test{

@GET
@Path("/{param}")
public Response getMsg(@PathParam("param") String msg) {

    String output = "Jersey say : " + msg;

    return Response.status(200).entity(output).build();

    }

} 
```

此时你应该得到错误，通过将这个依赖添加到你的 pom 来解决它们：

```
 <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.8</version>
    </dependency> 
```

您可以运行一个虚拟的“mvn clean install”，以便 maven 下载存储库并且您的错误将消失。

现在，转到 webapp/WEB-INF 并配置您的 web.xml，如下所示：

```
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>Restful Web Application</display-name>

<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>
                 com.sun.jersey.spi.container.servlet.ServletContainer
            </servlet-class>
    <init-param>
         <param-name>com.sun.jersey.config.property.packages</param-name>
         <param-value>com.test.rest</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

在这里，我们说要加载哪些类，并且还给了一个带有“/rest”的小前缀。所以你的网络服务将以此前缀开始。

现在你已经准备好了，构建应用程序，并在 tomcat/webapps 文件夹下添加 jar 文件。当你运行你的 tomcat 时，你可以通过以下方式访问你的网络服务：

(url_to_tomcat_server/jar_name/prefix_at_web_xml/prefix_at_java_rest_class/dummy_text_requested_byclass)

```
localhost:8080/test/rest/test/blabla 
```

注意：测试并运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T15:45:17.083

复制您的所有 Jersey jar，包括 jersey-servlet-1.12.jar，在您的 lib 文件夹中。看看您是否已将其包含在构建路径中。

# php - 简单调用获取类别图像并在列表中显示

> ID：10009012
> 
> 赞同：3
> 
> 时间：2012-04-04T10:06:02.193
> 
> 标签：php, magento, imageurl

我正在按父类别 ID 显示子类别列表，并且希望显示类别图像来代替类别名称。

这是我到目前为止...

```
<div id="menu_brands">
<div class="brand_head">
    <h3><?php echo $this->__('Browse By Brand') ?></h3>
</div>
<div class="brand_list">
    <?php
        $cats = Mage::getModel('catalog/category')->load(6)->getChildren();
        $catIds = explode(',',$cats);

        $categories = array();
            foreach($catIds as $catId) {
                $category = Mage::getModel('catalog/category')->load($catId); 
                $categories[$category->getName()] = $category->getUrl();
                $img = $category->getImageUrl(); //I suspect this line is wrong
        }

        ksort($categories, SORT_STRING);
    ?>

        <ul>
            <?php foreach($categories as $name => $url): ?>
                <li>
                    <!--<a href="<?php echo $url; ?>"><?php echo $name; ?></a>-->
                    <a href="<?php echo $url; ?>" title="<?php echo $name; ?>">
                        <img src="<?php echo $img; ?>" width="auto" alt="<?php echo $name; ?>" /> <!--I suspect this line is wrong-->
                    </a>
                </li>
            <?php endforeach; ?>
        </ul>
</div>
</div> 
```

我尝试了无数种方法来显示图像来代替类别名称，但似乎没有任何东西可以使图像出现。目前使用上述内容，输出是一个空的“img src”，因此我正在尝试的内容显然存在错误（并且可能是实现我所追求的更好的方法）。

请有人能指出问题所在吗？

如果它有任何相关性，我打算之后做的是以网格格式（每行 3 或 4 个）显示类别图像。

提前谢谢了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-23T11:18:02.837

zigojacko 的解决方案并不理想，因为它在循环中单独加载模型。这不能很好地扩展，并且有许多类别会破坏您的数据库。理想情况下，您会将图像添加到子集合中。

更快的解决方案是将图像属性添加到具有 ID 过滤器（如 B00MER）的集合中：

```
// Gets all sub categories of parent category 'Brands'
$parent = Mage::getModel('catalog/category')->load(6);

// Create category collection for children
$childrenCollection = $parent->getCollection();
// Only get child categories of parent cat
$childrenCollection->addIdFilter($parent->getChildren());
// Only get active categories
$childrenCollection->addAttributeToFilter('is_active', 1);

// Add base attributes
$childrenCollection->addAttributeToSelect('url_key')
        ->addAttributeToSelect('name')
        ->addAttributeToSelect('all_children')
        ->addAttributeToSelect('is_anchor')
        ->setOrder('position', Varien_Db_Select::SQL_ASC)
        ->joinUrlRewrite();

// ADD IMAGE ATTRIBUTE
$childrenCollection->addAttributeToSelect('image');

?>
<ul>
    <?php foreach($childrenCollection as $cat): ?>
        <li>
            <a href="<?php echo $cat->getURL(); ?>" title="<?php echo $cat->getName(); ?>">
                <img class="cat-image" src="<?php echo $cat->getImageUrl(); ?>" />
            </a>
        </li>   
    <?php endforeach; ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T15:05:30.193

我们设法自己解决了这个问题 - 请参阅下面的修复。

```
<?php
    //gets all sub categories of parent category 'Brands'
    $cats = Mage::getModel('catalog/category')->load(6)->getChildren();
    $catIds = explode(',',$cats);

    $categories = array();
    foreach($catIds as $catId) {
        $category = Mage::getModel('catalog/category')->load($catId); 
        $categories[$category->getName()] = array(
            'url' => $category->getUrl(),
            'img' => $category->getImageUrl()
        );
    }

    ksort($categories, SORT_STRING);
?>
    <ul>
        <?php foreach($categories as $name => $data): ?>
            <li>
                <a href="<?php echo $data['url']; ?>" title="<?php echo $name; ?>">
                    <img class="cat-image" src="<?php echo $data['img']; ?>" />
                </a>
            </li>   
        <?php endforeach; ?>
    </ul> 
```

很惊讶我们没有得到更多的支持，因为它是一个相对简单的 Magento 问题。不过，感谢 B00MER 的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T14:49:59.470

试试这个方法而不是你`$img = $category->getImageUrl();`的`$img = getCategoryImage($category);`

```
function getCategoryImage($category) {
    $categoryCollection = Mage::getModel('catalog/category')->setStoreId(Mage::app()->getStore()->getId())->getCollection()->addAttributeToSelect('image')->addIdFilter($category->getId());

    foreach($categoryCollection as $category) {
        return $category->getImageUrl();
    }
} 
```

（现已失效）参考： http: [//www.magentocommerce.com/boards/viewthread/5026/P45/](http://www.magentocommerce.com/boards/viewthread/5026/P45/)

# php - Joomla 2.5 - 无密码登录用户

> ID：10009014
> 
> 赞同：3
> 
> 时间：2012-04-04T10:06:04.003
> 
> 标签：php, login, joomla

我正在构建一个自定义 joomla 组件，并且正在研究如何在不使用帐户密码的情况下设置登录会话。我已经有了：

```
$app = &JFactory::getApplication('site');

$result = $app->login(array(

    'username' => 'james',
    'password' => 'password'

)); 
```

这显然需要用户密码。我可以访问用户 ID 和用户名，因此可以使用其中任何一个句柄。是否有其他对象或方法我可以用来登录用户，或者是否有一些我可以使用的自定义解决方案，例如手动设置所有必需的 $_SESSION 变量？

在此先感谢，非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T15:03:22.997

重要提示：是否需要在 // 注册所需的会话变量之后添加会话对象

```
// Register the needed session variables
$session =& JFactory::getSession();
$session->set('user', $jUser); 
```

太好了，谢谢

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T19:31:31.210

```
//log user in
if(!JFactory::getUser()->id)
{
    $email = (string)$response['linkedin']->{'email-address'};

    $db = JFactory::getDbo();
    $app = JFactory::getApplication();

    $sql = "SELECT * FROM #__users WHERE email = " . $db->quote($email);
    $db->setQuery($sql);
    $result = $db->loadObject();

    if($result->id)
    {
            $jUser = JFactory::getUser($result->id);
            //$userarray = array();
            //$userarray['username'] = $jUser->username;
            //$userarray['password'] = $jUser->password;
            //$app->login($userarray);              

            $instance = $jUser;     
            $instance->set('guest', 0);

            // Register the needed session variables
            $session =& JFactory::getSession();
            $session->set('user',$jUser);

            // Check to see the the session already exists.                        
            $app->checkSession();

            // Update the user related fields for the Joomla sessions table.
            $db->setQuery(
                    'UPDATE '.$db->quoteName('#__session') .
                    ' SET '.$db->quoteName('guest').' = '.$db->quote($instance->get('guest')).',' .
                    '   '.$db->quoteName('username').' = '.$db->quote($instance->get('username')).',' .
                    '   '.$db->quoteName('userid').' = '.(int) $instance->get('id') .
                    ' WHERE '.$db->quoteName('session_id').' = '.$db->quote($session->getId())
            );
            $db->query();

            // Hit the user last visit field
            $instance->setLastVisit();          

            //return true;

            $app->redirect('index.php?option=com_community&view=profile');
    }
    else
    {

            $url = "index.php?option=com_community&view=register";
            $app->redirect($url,'We did not find your email address in our system. Please register.');
            //echo "redirect to registration page";
            //exit();

            //$url = 'index.php?option=com_users&view=registration&name=' . $user_profile['name'] . '&username=' . $user_profile['username'] . '&email=' . $user_profile['email'];
            //$url = JRoute::_($url);
            //$app->redirect($url);
    }

} 
```

# php - 显示对象的所有公共属性（名称和值）

> ID：10009015
> 
> 赞同：3
> 
> 时间：2012-04-04T10:06:08.943
> 
> 标签：php, class, object, attributes

[这个线程](https://stackoverflow.com/questions/1372127/phps-function-to-list-all-objectss-attributes)没有帮助我。

如果我使用

```
$class_vars = get_class_vars(get_class($this));

foreach ($class_vars as $name => $value) {
    echo "$name : $value\n";
} 
```

我明白了

attrib1_name : attrib2_name : attrib3_name

没有价值观。还显示了一个我不想要的私有属性。

如果我使用

```
echo "<pre>";
print_r(get_object_vars($this));
echo "</pre>"; 
```

我明白了

数组（ [attrib1_name] => attrib1_value [attrib2_name] => attrib2_value ）

这里我又有一个私有属性和所有子属性。但这一次我有价值观。如何将其限制在一个级别？

是否有可能显示所有公共属性及其对象的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:12:37.523

您看到的是非公共属性，因为**根据当前范围**`get_class_vars`工作。由于您使用的代码位于类*内部*，因此可以从当前范围访问*非*公共属性。这同样适用于这可能是一个更好的选择。**`$this`**`get_object_vars`****

 ****无论如何，一个好的解决方案是将检索属性值的代码移出类。

如果您不想为此创建一个免费函数（为什么？认真考虑一下！），您可以使用涉及匿名函数的技巧：

```
$getter = function($obj) { return get_object_vars($obj); };
$class_vars = $getter($this); 
```

**[看到它在行动](http://codepad.viper-7.com/pwUijI)**。

**更新：**由于您使用的是 PHP < 5.3.0，因此您可以使用以下等效代码：

```
$getter = create_function('$obj', 'return get_object_vars($obj);');
$class_vars = $getter($this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T10:10:05.863

您可以使用[php Reflection api轻松完成此操作](http://php.net/manual/en/book.reflection.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-26T12:57:16.823

扩展[Mr.Coder 的答案](https://stackoverflow.com/a/10009066/5808894)，这里是一个片段，用于获取对象的公共属性（名称和值）作为数组

```
public function getPublicProperties()
{
    $results = [];

    $reflectionObject = (new ReflectionObject($this));
    $properties = $reflectionObject->getProperties(ReflectionProperty::IS_PUBLIC);

    foreach ($properties as $property) {
        $results[$property->getName()] = $property->getValue($this);
    }

    return $results;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-20T15:45:54.333

我完全认识到您要实现的目标，所以为什么不提供这样的外部帮助...（从 PHPFiddle 粘贴）

```
<?php

final class utils {
    public static function getProperties(& $what) {
        return get_object_vars($what);
    }
}
class ball {
    var $name;
    private $x, $y;

    function __construct($name,$x,$y) {

    }

    function publicPropsToArray() {
        return utils::getProperties($this);
    }
    function allPropsToArray() {
        return get_object_vars($this);
    }
}

$ball1 = new ball('henry',5,6);
//$ball2 = new ball('henry',3,4);

echo "<pre>";
print_r($ball1->publicPropsToArray());
echo "\r\n\r\n";
print_r($ball1->allPropsToArray());

echo "\r\n\r\n";

?> 
```

这样，我既可以访问对象的所有属性，也可以访问诸如数据库访问层之类的东西，或者类似地访问将“安全”数据发送到视图或另一个非特权模型的函数，我可以只发送公共属性，但有对象内定义的行为。

当然这会导致与实用程序类耦合，但公平地说，并非所有耦合都是坏的，有些耦合是为了实现最终目标，不要被这些事情所困扰

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T10:10:50.940

使用 get_object_vars。见：[http ://dk.php.net/manual/en/function.get-object-vars.php](http://dk.php.net/manual/en/function.get-object-vars.php)****

# java - 将参数设置为持久值

> ID：10009019
> 
> 赞同：2
> 
> 时间：2012-04-04T10:06:30.940
> 
> 标签：java, null, static-methods

我已经阅读了一点，我知道在 java 中你不能改变给定参数的原始值，并期望这些参数在方法结束后仍然存在。但我真的很想知道一个很好的方法来做到这一点。有人可以给我一些关于我可以做些什么来使这种方法起作用的指示吗？谢谢。

```
/**
* This will set values in the given array to be "" (or empty strings) if they are null values
*
* @param checkNull
*/
public static void setNullValuesBlank(String... checkNull) {
  for (int i = 0; i < checkNull.length; i++) {
    String check = checkNull[i];
    if (check == null) {
      check = "";
    }
  }
} 
```

**编辑**

所以我必须像几个人提到的那样将它设置为数组，如果我首先构造数组，它会很好用，但如果我不这样做，它就不起作用。

这是固定的方法：

```
/**
  * This will set values in the given array to be "" (or empty strings) if they are null values
  *
  * @param checkNull
  */
public static void setNullValuesBlank(String... checkNull) {
  for (int i = 0; i < checkNull.length; i++) {
    if (checkNull[i] == null) {
      checkNull[i] = "";
    }
  }
} 
```

这是一个有效的调用：

```
String s = null;
String a = null;
String[] arry = new String[]{s, a};
for (int i = 0; i < arry.length; i++) {
  System.out.println(i + ": " + arry[i]);
}
setNullValuesBlank(arry);
for (int i = 0; i < arry.length; i++) {
  System.out.println(i + ": " + arry[i]);
} 
```

这是一个**不起作用**的电话，但我希望它：

```
String q = null;
String x = null;
System.out.println("q: " + q);
System.out.println("x: " + x);
setNullValuesBlank(q, x);
System.out.println("q: " + q);
System.out.println("x: " + x); 
```

输出：

```
q: null
x: null
q: null
x: null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:08:43.160

您需要分配给数组：

```
if (checkNull[i] == null) {
  checkNull[i] = "";
} 
```

分配给检查不会更改数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:09:06.353

```
public static void setNullValuesBlank(String... checkNull)
{
    for(int i = 0; i < checkNull.length; i++) if(checkNull[i] == null) checkNull[i] = "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:11:05.277

您必须将值保存到数组中：

```
import java.util.Arrays;

public class NullCheck {

    public static void main( final String[] args ) {
        final String[] sa = { null, null };
        System.out.println( Arrays.toString( sa ) );
        check( sa );
        System.out.println( Arrays.toString( sa ) );
    }

    private static void check( final String... a ) {
        for ( int i = 0; i < a.length; i++ ) {
            if ( a[i] == null ) a[i] = "";
        }
    }

} 
```

# service - ESB 或 SCA——架构视角

> ID：10009021
> 
> 赞同：2
> 
> 时间：2012-04-04T10:06:52.443
> 
> 标签：service, esb, sca

现代**ESB**与**SCA**相比如何（在路由/聚合服务方面）？

这就是我的想法[根据过去的经验]。

假设我们有两个服务 S1 和 S2，以及一个由 S1 和 S2 组成的复合服务 S3。假设 S1 和 S2 有两个不同的端点和协议。

**如何使用 ESB 访问？** （WSO2/Apache 突触）

1.  我们可以先访问 S1，然后再访问 S2（创建管道）
2.  我们可以直接访问 S3 来提供输出。（协议转换/转换/编排）在这里完成。

**如何使用 SCA 访问？** （阿帕奇托斯卡纳）

1.  首先查找 S1，然后查找 S2（使用 SCA API）
2.  从 S1 和 S2 创建一个复合 S3 并调用在此处完成的 S3（协议转换/转换/编排）。

人们是否同时使用 SCA 组合和 ESB 编排？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T10:12:30.693

SCA 不是 ESB 的替代品，它只是构建面向服务架构的一种方式。

正如 david.a 所说，您可以使用面向 SCA ESB 的 Websphere ESB 或 Oracle SOA 套件，后者是面向 SCA 的集成解决方案。

您可以在此处了解有关 SCA 的更多信息：[http ://www.davidchappell.com/writing/Introducing_SCA.pdf](http://www.davidchappell.com/writing/Introducing_SCA.pdf)

在 Oracle 和 IBM 的使用中，SCA 组合是一种组合不同类型实现的方法，它可以用于在另一个元素（BPEL、java bean 等）前面构建一个带有中介部分（ESB）的解决方案。

从面向服务架构的角度来看，SCA 帮助您将 ESB 与上层（BPEL、BR 等）结合起来

# iphone - 如何将 subView 从第三个视图添加到另一个视图？

> ID：10009022
> 
> 赞同：1
> 
> 时间：2012-04-04T10:06:52.643
> 
> 标签：iphone, objective-c, xcode, uiview, methods

理解我遇到的问题非常简单。

我有一个名为“菜单”的视图 - 它有几个按钮。我有另一个名为“Main”的视图 - 谁需要显示菜单选择的视图。最后一个我有我想在主视图中看到的视图。

我试图用这段代码解决这个问题 -

```
-(IBAction)opertunity:(id)sender{
OpertunityViewController *temp = [[OpertunityViewController alloc]initWithNibName:@"OpertunityViewController" bundle:nil];
MainViewController *main = [[MainViewController alloc]init];
[main.handlerView addSubview:temp.view];
} 
```

但它根本不起作用..我记得我过去做过很多次但无法在我的项目中得到答案......很奇怪/：

更新 - 我正在尝试别的东西。我在我的主类中创建了一个方法，然后从菜单中调用它。但它仍然有效 - 我 NSLOG 该方法及其完美调用。（当我从类内部调用该方法时，它的工作..）

现在怎么办 ？！我从来没有遇到过这样的问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:53:13.980

我不确切知道，但我猜这可能是您的问题。您是否将框架设置为视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:02:08.883

由于您正在分配和创建 的新对象`OpertunityViewController`，因此您的视图不会添加到该视图控制器中。

为此，您需要保留`OpertunityViewController`in may be的引用对象，`Menu`并且您需要`Menu`调用该方法`OpertunityViewController`，然后将子视图添加到您的`OpertunityViewController`.

否则，您可以为此功能创建委托。

希望这可以帮助。

此外，如果您使用的是导航控制器，那么您可以从导航控制器堆栈中获取视图控制器，然后相应地添加子视图。请注意，您需要从堆栈中获取正确的视图控制器，并确保在该时间点添加的视图控制器的顺序和数量没有变化。仅当您的导航流程固定或您需要将子视图添加到前一个视图控制器时，这才有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T15:07:17.043

这将有助于我想：

```
-(IBAction)opertunity:(id)sender {
   OpertunityViewController *temp = [[OpertunityViewController alloc] init];
   MainViewController *main = [[MainViewController alloc]init];
   [main.view addSubview:temp.view];
} 
```

如果有帮助请标记:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:44:09.567

也许您应该将主视图添加到窗口或当前视图。例子：

```
-(IBAction)opertunity:(id)sender{
    OpertunityViewController *temp = [[OpertunityViewController alloc]initWithNibName:@"OpertunityViewController" bundle:nil];
    MainViewController *main = [[MainViewController alloc]init];
    [main.handlerView addSubview:temp.view];
    [self.view addSubview:main.handlerView];
} 
```

# php - 使用 PHP DOM 从 MySQL 数据创建 XML 文件

> ID：10009029
> 
> 赞同：0
> 
> 时间：2012-04-04T10:07:23.920
> 
> 标签：php, mysql, xml, dom

我创建了一个 MySQL 表，并希望将表的内容保存在 XML 文件中以供其他应用程序使用。我可以很好地访问数据并在浏览器窗口上回显数据，但是在使用 DomDocument::save('thexmlfile.xml') 保存时，我看不到在正在运行的 PHP 文件的目录位置创建的任何新文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:24:06.210

您必须从 mysql 数据创建 dom xml，然后将其保存在 xml 文件中。示例：

```
$sql = 'select * from messages';
$run = mysql_query($sql, $link);

if( $run && mysql_num_rows( $run ) ) {
    $doc = new DOMDocument( '1.0' );
    $doc->formatOutput = true;
    $doc->preserveWhiteSpace = true;

    $root = $doc->createElement( 'data' );
    $doc->appendChild( $root );

    while( ( $fetch = mysql_fetch_assoc( $run ) )!== false ) {
        $node = $doc->createElement( 'node' );
        $root->appendChild( $node );

        foreach( $fetch as $key => $value ) {
            createNodes( $key, $value, $doc, $node );
        }
    }
    $doc->save("thexmlfile.xml");
}

function createNodes( $key, $value, $doc, $node ) {
    $key = $doc->createElement( $key );
    $node->appendChild( $key );
    $key->appendChild( $doc->createTextNode( $value ) );
} 
```

现在，您应该看到 xml 文件。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T22:48:09.207

嗯，你的问题是关于`DOM`，接受的答案是关于`DOM`，但你似乎不需要这个功能，那么 libxml 的兄弟`SimpleXML`似乎更直接......我认为你的问题已经结束了，但只是为了完整起见：

```
$sql = 'select * from messages';
$run = mysql_query($sql, $link);

if( $run && mysql_num_rows( $run ) ) {
    $xml = new SimpleXMLElement('<data/>');
    while($fetch = mysql_fetch_assoc($run)) {
        $node = $root->addChild('node');
        foreach( $fetch as $key => $value ) {
            $node->addChild($key,$value);
        }
    }
    $xml->asXML("thexmlfile.xml");
} 
```

# svn - 为什么同一 URL 上的“svn mkdir URL”不起作用而“svn import ... URL”工作正常？

> ID：10009032
> 
> 赞同：0
> 
> 时间：2012-04-04T10:07:30.113
> 
> 标签：svn

我有一个 svn 存储库设置在

```
https://hostname/svn/repo 
```

里面有多个项目，比如

```
https://hostname/svn/repo/proj_a
https://hostname/svn/repo/proj_b
https://hostname/svn/repo/proj_c 
```

我可以毫无问题地处理现有项目，我可以签出其中任何一个，提交更改，列出内容......

现在我想在存储库中创建一个新项目，但是如果我尝试

```
svn mkdir https://hostname/svn/repo/new_project 
```

在命令行上我得到了臭名昭著的

```
Repository moved permanently to 'https://hostname/svn/repo/'; please relocate 
```

错误信息。如果我尝试使用`svn ls`. 如果不是之前创建新项目文件夹并稍后添加文件，我右键单击`new_project`Eclipse 中的文件夹并“共享项目”一切正常。在 Eclipse 中共享项目应该相当于做

```
svn import new_project https://hostname/svn/repo/new_project/trunk 
```

在命令行上，对吗？什么是我不明白的？存储库有什么问题？

**编辑**上面的`mkdir`命令是错误的，因为 Álvaro G. Vicario 在[他的回复中注意到](https://stackoverflow.com/a/10009242/6069)

**更新**看起来[FAQ中的这个条目](http://subversion.apache.org/faq.html#http-301-error)可能是相关的（通过[serverfault](https://serverfault.com/a/129135/241)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:11:37.530

问题可能是您的 Subversion***存储库***（是的，您可能有多个存储库）是如何使用 Apache 设置的。

使用 Apache，有两种方法可以设置 Subversion 存储库。您可以像这样单独执行每个存储库：

```
<Location /svn/repos>
   DAV svn
   SVNPath /path/to/repositories/repos
</Location>
<Location /svn/repos2>
   DAV svn
   SVNPath /path/to/repositories/repos2
</Location> 
```

在这种情况下，您可以通过`https://hostname/svn/repos`和访问这些存储库`http://hostname/svn/repos2`。

正如您可以想象的那样，如果您有大量存储库，那么维护起来可能会相当困难。每次创建新存储库都意味着更新 Apache 配置。如果您有 50 个左右的存储库，那么您将拥有一个很难维护的非常长的配置文件。

为了处理这个问题，Apache 允许您在一个配置中配置一大堆 Subversion 存储库：

```
<Location /svn/repo>
   DAV svn
   SVNParentPath /path/to/all/svn_repositories
</Location> 
```

现在，如果您有存储库`/path/to/all/svn_repositories/proj_a`and `/path/to/all/svn_repositories/proj_b`，您可以通过`http://myserver/svn/repo/proj_a`and访问它们`http://myserver/svn/repo/proj_b`。

请注意，这`https://myserver/svn/repo`不是单个存储库的根目录，而是代表包含所有存储库的目录的 Apache*虚拟目录。*

现在，这是 573,198.52 美元的问题（通货膨胀的 64,000 美元问题）：如果您提交`http://hostname/svn/repo/proj_a`，它是否`http://myserver/svn/repo/proj_b`也会更新最新的修订号？如果不是，那么每个项目都是一个单独的 Subversion 存储库，并且配置如我的第二个示例中所示，其中多个 Subversion 存储库可以共享同一个瞬间。

这意味着要创建`new_project`，您需要登录到您的 Subversion 服务器，并使用`svnadmin create`命令来创建您的新存储库。然后它将通过您的`https://hostname/svn/repos/new_project`URL 立即可用。

如果提交更改`proj_a`确实增加了 上的最新修订`proj_b`，那么所有项目都在一个 Subversion 存储库中，您应该能够将其`https://hostname/svn/repo`用作有效的 Subversion 目录。尝试结帐：

```
$ svn co --depth=immediates https://hostname/svn/repo 
```

将`--depth=immediates`只签出目录，而不是递归所有子目录。这样，您就有了一个可以使用的工作目录：

```
$ svn co --depth=immediates https://hostname/svn/repo
$ cd repo
$ svn mkdir --parents new_project/trunk new_project/tags new_project/branches
$ cd ..
$ svn status
A  new_project/trunk
A  new_project/tags
A  new_project/branches
$ svn commit -m "added new_project" 
```

看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:40:06.823

The problem was a mis-configured apache server. Server configuration was like

```
<DocumentRoot /path>
...
<Location /path/repo>
   DAV svn
   SVNPath /path/repo
   ...
</Location> 
```

and as the [subversion FAQ](http://subversion.apache.org/faq.html#http-301-error) points out the document root and the repository path should not overlap.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:24:13.337

```
 svn mkdir https://hostname/svn/     new_project
svn import new_project https://hostname/svn/repo/new_project/trunk
                                            ^^^^ 
```

# wpf - GridSplitter：缩放与 GridSplitter 不直接相邻的单元格

> ID：10009033
> 
> 赞同：2
> 
> 时间：2012-04-04T10:07:33.433
> 
> 标签：wpf, layout, grid, gridsplitter

我有一个 WPF 网格，它有四列，只包含一个 GridSplitter。其中两列（0 和 3）是可缩放的，但一列可缩放的列不直接与 GridSplitter 相邻（第 2 列）。

第 0 列和第 3 列必须具有相同的初始大小。所以我不能将第 0 列和第 1 列放在嵌套网格中。

我该如何解决这个问题？

```
<Grid Height="40">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Rectangle Grid.Column="0" Fill="Blue" Margin="8" />
    <Rectangle Grid.Column="1" Fill="Yellow" Margin="8" Width="24" />
    <GridSplitter Grid.Column="2" Width="8" VerticalAlignment="Stretch" />
    <Rectangle Grid.Column="3" Fill="Red" Margin="8" />
</Grid> 
```

**编辑：我在**[nickolay.laptev](https://stackoverflow.com/users/1262265/nickolay-laptev)的帮助下解决了这个问题

```
<Grid Height="40">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Rectangle Grid.Column="0" Fill="Blue" Margin="8" />
    <Rectangle Grid.Column="1" Fill="Yellow" Margin="8 8 16 8" Width="24" />
    <GridSplitter Grid.Column="1" Width="8" VerticalAlignment="Stretch" HorizontalAlignment="Right" ResizeBehavior="PreviousAndNext" />
    <Rectangle Grid.Column="2" Fill="Red" Margin="8" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T14:12:41.327

我提供 2 个选项：

1.  不要对 GridSplitter 使用单列。而是将其添加到可调整大小的列之间的列中（在您的情况下为第二列）。您可以使用水平对齐将拆分器放置在列内的任何位置。
2.  手动调整列大小。如果启用预览，请使用 GridSplitter.DragCompleted 事件。更改其中所需的列宽。如果预览被禁用，请使用另一个带有 Preview 前缀的事件。

它解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:24:07.993

像这样的东西

```
 <ColumnDefinition Width="{Binding ElementName=sizedColumn.ActualWidth}" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" x:Name="sizedColumn"/> 
```

但是您需要添加一个多转换器并传递窗口大小和第 1 列大小。

# javascript - jQuery Mobile 加载微调器在移动设备上不起作用

> ID：10009035
> 
> 赞同：2
> 
> 时间：2012-04-04T10:07:34.263
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我似乎在使用 jQuery Mobile 微调器时遇到了问题。当我使用我的桌面浏览器 Chrome 时，它​​似乎工作正常，但在我的 Android ICS 上的移动浏览器上不起作用

我在下面使用的代码

```
$(document).live('pageinit', (function() {
    $(document).ajaxStart($.mobile.showPageLoadingMsg());
    $(document).ajaxStop($.mobile.hidePageLoadingMsg());
})); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:25:27.920

以下可能会将页面 ID 设为“主”

```
$(document).delegate('div[data-role=page][id=main]', 'pageshow', function() {
    $.mobile.showPageLoadingMsg();
}); 
```

谢谢， Prodeveloper

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:12:18.980

可能是您的 ajax 启动/停止发生得太快以至于您看不到它。查看这篇文章的答案，看看它们是否有帮助：[jQuery modal dialog on ajaxStart event](https://stackoverflow.com/questions/2953559/jquery-modal-dialog-on-ajaxstart-event)

# html - 提供来自无 cookie 域的静态内容

> ID：10009036
> 
> 赞同：3
> 
> 时间：2012-04-04T10:07:38.073
> 
> 标签：html, css, wordpress, yslow

我正在努力推荐 Yslow 和 Google 页面速度，以提供来自 cookie 免费域的静态内容。

我创建了两个子域来提供图像以及 JS 和 CSS 文件

```
static.images.mymaindomainname.com
static.mymaindomainname.com 
```

我什至将它们配置为指向相同的域（别名），它们似乎工作正常。我对使用这些子域来提供静态内容感到困惑。

在我的 CSS 文件中，我使用图像作为`images/my_image.jpg`并且解析为`www.mymaindomainname.com/images/my_image.jpg`，现在我必须将其指向子域，我是否需要使用子域 URL 更改每个图像路径，例如

```
images/my_image.jpg-->static.images.mymaindomainname.com/images/my_image.jpg 
```

JS 文件也是如此，我们有很多 CSS 文件。我是否需要更改每个条目的路径？请建议

我正在使用 wordpress 进行门户开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:08:45.957

您可以使用 .htaccess 和 mod_rewrite 动态重写 url，而无需触及当前的 css 或 js 文件。看看这篇文章：

[站点通过 mod_rewrite 快 5 倍，但 CSS 图像损坏](https://stackoverflow.com/questions/634089/site-5x-faster-via-mod-rewrite-but-css-images-are-broken)

# php - 将屏幕宽度转换为 javascript 变量并通过 ajax 将其发送到 php 页面以避免页面加载

> ID：10009040
> 
> 赞同：0
> 
> 时间：2012-04-04T10:08:12.790
> 
> 标签：php, javascript, ajax, width, screen-resolution

这是`JS`在我的页面命名上检测屏幕分辨率`index.html`并将其发送到 php，以便可以使用以下方法检索值`$_GET`：-

```
<script type="text/javascript">

width = screen.availwidth;
height = screen.availheight;

if (width > 0 && height >0) {
    window.location.href = "http://localhost/main.php?width=" + width + "&height=" + height;
} else 
    exit();

</script> 
```

这是我的 PHP 文件命名的内容`process.php`：-

```
<?php
$screen_width = $_GET['width'];
$screen_height = $_GET['height'];

//EDITED PORTION
echo '<style>#Wrapper {width:'.$screen_width.';}</style>';
?> 
```

现在在获得屏幕尺寸后，我想显示`index.php`.

***请注意这些步骤，以了解我想要的工作方式：-***

1.  页面加载开始
2.  Javascript 检测到可用的屏幕宽度。
3.  它将它传递给 php 文件，PHP 变量获取屏幕可用的屏幕宽度。
4.  然后使用该 php 变量显示页面（意味着使用该 php 变量设置页面宽度）

在整个过程中`index.php`不应重新加载。**那么，如何做到呢？**

**编辑：**

当`JS`将值传递给它加载的 php 文件时，我想要的是获取屏幕分辨率并相应地设置网站页面宽度。但是，如果`JS`将数据发送到 php 文件，并且如果我们通过 ajax 获取它，则可能会发生我的网站已完全加载并且样式不会被实现，因为它已经在 ajax 工作之前加载了所有内容。

有没有足够有效的方法，或者我们可以以一种有效的方式来做这个。

**这是我的编辑：2**

为了更清楚，我将使用下图解释我想要实现的目标：-

![其实我想实现这样的事情](../Images/7d62b0a040cf71451e3d6905e19be59f.png)

现在如果我得到屏幕分辨率说`800px`然后我知道我想从中扣除`200px`左​​侧，所以它会变成`600px`我`divs`现在`250px`只能添加两个。因此，为了避免显示`100px`在右侧，我将我的网站页面宽度调整为`700px`.

我可以在 php 中做的事情，但是如何在同一页面上同时完成所有事情？

**您可以将整个区域称为** `#Wrapper` **Right One 作为** `#SideBar` **Left Area** `#LeftContent`

希望我已经很好地解释了事情。所以请如果有人可以帮助我做必要的事情:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:39:32.643

我不确定我是否理解您的问题，但这就是我所得到的：如果您只想获取屏幕宽度然后设置类，我不鼓励您这样做。这不好，将来如果您需要更改页面布局，您将注定要在 php 中使用所有这些回显，并且您将避免大量重定向（index.html -> process.php -> index.php ）。

通过您的示例，您可以使用 Javascript 完成所有操作。

这是使用 JQuery 的示例

```
var width = $(window).width(); //get the width of the screen
$('#Wrapper').css("width",width); //set the width to the class 
```

如果这个想法是针对非常不同的屏幕分辨率（从 PC 到智能手机），你应该考虑改变你的方法。

祝你好运 ：）

* * *

**试试这个：（**我相信这是你想要的）

你可以只用 JS 和 CSS 来做到这一点。这是一个例子：

为你的 body margin 和你的测试 div 设置样式：

```
<style type="text/css">
    body {
        margin: 0px 0px 0px 200px;
}
    .divForTesting {
        width: 250px;
        border: 1px solid green;
        height: 100px;
        float: left;
}
</style> 
```

然后添加这个脚本：

```
<script>
    // get the screen width
    var width = $(window).width();
    // get the number of pixels left in the screen (which is the width
    // minus the margin you want, rest by 250px which is the "inner boxes" width)
    var size = (width - 200) % 250;
    // then re-set the margin (the "-10" is because you'll need extra space
    // for borders and so on)
    $('body').css("margin-left",200+(size-10));
</script> 
```

并用这个 html 测试它：

```
<!-- I've aligned the outter div to the right -->
<div style="border: 1px solid red; float:right;" id="test">
<div class="divForTesting">test</div>
<div class="divForTesting">test</div>
<div class="divForTesting">test</div>
<div class="divForTesting">test</div>
<div class="divForTesting">test</div>
<div class="divForTesting">test</div>
<div class="divForTesting">test</div>
<div class="divForTesting">test</div>
<div class="divForTesting">test</div>
</div> 
```

它适用于不同的分辨率。

试试看 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:50:24.783

我终于得到了我自己问题的解决方案:)

```
<script type="text/javascript">
var width = screen.availWidth;
var fwidth = (width - 270);
var i, k = 0;
var j =2;
for (i=1; i<=j; i++)
{
    fwidth = fwidth - 220;
    if (fwidth < 220)
    {
        j = j -1;
    }
    else {
        k = k + 1;
        j = j + 1;
    }
}
var containerwidth = (width - (fwidth + 10));
var contentwidth = containerwidth - 250;
document.write('<style type="text/css"> .container {width:' + containerwidth + 'px; } .mainContent { width:' + contentwidth + 'px; } </style>');
</script> 
```

`contentwidth`灰色内容在哪里，`containerwidth`是`#Wrapper`我提出的问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:16:27.657

您可以使用像 jQuery 这样的 javascript 库。代替：

```
window.location.href = "http://localhost/main.php?width=" + width + "&height=" + height; 
```

您可以致电：

```
$.get("http://localhost/main.php?width=" + width + "&height=" + height, function(data, textStatus, jqXHR) {
    // replace the html body with the output of main.php
    $('body').html(data); // you might want to customize that
}); 
```

[$.get() jQuery 函数的文档](http://api.jquery.com/jQuery.get/)。

# c - Mac 上的 dl_iterate_phdr 等效项

> ID：10009043
> 
> 赞同：4
> 
> 时间：2012-04-04T10:08:13.983
> 
> 标签：c, macos

我想遍历所有加载的共享库并获取它们的基地址以及它们的文件名。这基本上是[`dl_iterate_phdr`](http://linux.die.net/man/3/dl_iterate_phdr)在Linux上。

但我想对 Mac 做同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:32:21.973

dyld(3) 手册页中记录的功能（似乎不再在线）似乎提供了类似的功能。

这是内容：

> ## 姓名
> 
> ```
>  _dyld_image_count, _dyld_get_image_header, _dyld_get_image_vmaddr_slide,
>  _dyld_get_image_name, _dyld_register_func_for_add_image,
>  _dyld_register_func_for_remove_image, NSVersionOfRunTimeLibrary,
>  NSVersionOfLinkTimeLibrary _NSGetExecutablePath 
> ```
> 
> ## 概要
> 
> ```
>  #include <mach-o/dyld.h>
> 
>  uint32_t
>  _dyld_image_count(void);
> 
>  const struct mach_header*
>  _dyld_get_image_header(uint32_t image_index);
> 
>  intptr_t
>  _dyld_get_image_vmaddr_slide(uint32_t image_index);
> 
>  const char*
>  _dyld_get_image_name(uint32_t image_index);
> 
>  void
>  _dyld_register_func_for_add_image(void (*func)(const struct mach_header* mh, intptr_t vmaddr_slide));
> 
>  void
>  _dyld_register_func_for_remove_image(void (*func)(const struct mach_header* mh, intptr_t vmaddr_slide));
> 
>  int32_t
>  NSVersionOfRunTimeLibrary(const char* libraryName);
> 
>  int32_t
>  NSVersionOfLinkTimeLibrary(const char* libraryName);
> 
>  int
>  _NSGetExecutablePath(char* buf, uint32_t* bufsize); 
> ```
> 
> ## 描述
> 
> 这些例程提供了对 dyld 的额外自省，超出了`dlopen()`和`dladdr()`
> 
> `_dyld_image_count()`返回 dyld 映射的当前图像数量。请注意，使用此计数来迭代所有图像不是线程安全的，因为另一个线程可能在迭代期间添加或删除图像。
> 
> `_dyld_get_image_header()`返回指向 image_index 索引的图像的 mach 标头的指针。如果`image_index`超出范围，则返回 NULL。
> 
> `_dyld_get_image_vmaddr_slide()`返回由 索引的图像的虚拟内存地址滑动量`image_index`。如果`image_index` 超出范围，则返回零。
> 
> `_dyld_get_image_name()`返回由 索引的图像的名称 `image_index`。C 字符串继续归 dyld 所有，不应删除。如果`image_index`超出范围，则返回 NULL。
> 
> `_dyld_register_func_for_add_image()`注册在程序中添加新图像（捆绑包或动态共享库）时要调用的指定函数。当这个函数第一次注册时，它会为当前进程中的每个图像调用一次。
> 
> `_dyld_register_func_for_remove_image()`注册从进程中删除图像（包或动态共享库）时要调用的指定函数。
> 
> `NSVersionOfRunTimeLibrary()`返回由 libraryName 指定的当前加载的 dylib 的 current_version 号。libraryName 参数将是 /path/libbar.3.dylib 的“bar”和 /path/Foo.framework/Versions/A/Foo 的“Foo”。如果没有加载此类库，则此函数返回 -1。
> 
> `NSVersionOfLinkTimeLibrary()`返回主可执行文件在构建时链接的 current_version 号。libraryName 参数将是 /path/libbar.3.dylib 的“bar”和 /path/Foo.framework/Versions/A/Foo 的“Foo”。如果主可执行文件没有链接到指定的库，则此函数返回 -1。
> 
> `_NSGetExecutablePath()`将主可执行文件的路径复制到缓冲区`buf`中。该`bufsize`参数最初应该是缓冲区的大小。如果路径复制成功，此函数返回 0，并且 *`bufsize`保持不变。如果缓冲区不够大，则返回 -1，并将 *`bufsize`设置为所需的大小。请注意，这 `_NSGetExecutablePath()`将返回可执行文件的“路径”，而不是可执行文件的“真实路径”。也就是说，路径可能是符号链接而不是真实文件。对于深层目录，所需的总 bufsize 可能超过`MAXPATHLEN`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T10:22:39.077

只是为了完成：

输入是指向某些静态内容（例如函数）的任何指针，目标是找到库及其部分。

我在函数中实现[了](https://github.com/albertz/openlierox/blob/0.59/src/common/Debug_extended_backtrace.cpp)`ptr_is_in_exe`这个：

```
static bool
ptr_is_in_exe(const void *ptr, const struct mach_header *& header, intptr_t& offset, uintptr_t& vmaddr, std::string& image_name)
{
    uint32_t i, count = _dyld_image_count();

    for (i = 0; i < count; i++) {
        header = _dyld_get_image_header(i);
        offset = _dyld_get_image_vmaddr_slide(i);

        uint32_t j = 0;
        struct load_command* cmd = (struct load_command*)((char *)header + sizeof(struct mach_header));
        if(header->magic == MH_MAGIC_64)
            cmd = (struct load_command*)((char *)header + sizeof(struct mach_header_64));

        while (j < header->ncmds) {
            if (cmd->cmd == LC_SEGMENT) {
                struct segment_command* seg = (struct segment_command*)cmd;
                if (((intptr_t)ptr >= (seg->vmaddr + offset)) && ((intptr_t)ptr < (seg->vmaddr + offset + seg->vmsize))) {
                    vmaddr = seg->vmaddr;
                    image_name = _dyld_get_image_name(i);
                    return true;
                }
            }
            if (cmd->cmd == LC_SEGMENT_64) {
                struct segment_command_64* seg = (struct segment_command_64*)cmd;
                if (((uintptr_t)ptr >= (seg->vmaddr + offset)) && ((uintptr_t)ptr < (seg->vmaddr + offset + seg->vmsize))) {
                    vmaddr = seg->vmaddr;
                    image_name = _dyld_get_image_name(i);
                    return true;
                }
            }

            j++;
            cmd = (struct load_command*)((char*)cmd + cmd->cmdsize);
        }
    }

    return false;
} 
```

# sql - SQL查询选择最小数量的框

> ID：10009044
> 
> 赞同：2
> 
> 时间：2012-04-04T10:08:22.470
> 
> 标签：sql

我有包含不同尺寸的相同物品的盒子。

```
 Boxes             S   M   L   XL  XXL

00001               2   4   4       
00002                           4   2
00003               8               
00004                   8           
00005                       8   8   
00006                               8
00007               1   2   2   2   2
00008               1   2   2   2   
00009               2   4   4   4   2
00010               3   5   4   4   2
00011               2   3   4   4   2 
```

现在，我需要得到这个尺寸的模型：

```
 S   M   L   XL  XXL
                    2   4   4   4   2 
```

我需要哪些箱子来装我的必需品？

我可以使用框 00003、00004、00005、00006，这样，我会收集：

```
 S   M   L   XL  XXL
                   8   8    8   8   8 
```

但是很多东西会被浪费掉。

我还可以使用框 00007、00008 并获得：

```
 S   M   L   XL  XXL
                   2   4    4   4   2 
```

这适合我，但我仍然必须移动 2 个盒子，同时 BOX 00009 正是我需要的东西，而且工作量很小。

总而言之，我需要多少箱子才能满足我的必需品？我找不到构建查询的起点或某种代码解决了这个问题。任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:38:31.003

以下将在 SQL-Server 上工作以解决您的问题。它通过使用递归 CTE 来确定**所有**框组合的每个尺寸的数量（对于大量框，这可能会变得很麻烦并且需要`MAXRECURSION`更改）。然后它确定这些组合中的哪些满足每个尺寸的最小数量的标准，然后按照所需的盒子数量的顺序排列剩余的组合，然后是为了满足最小标准而浪费的总数。在函数中更改 order by`RANK()`将更改解决方案的排名方式。

```
DECLARE @S INT = 2,
        @M INT = 4,
        @L INT = 4,
        @XL INT = 4,
        @XXL INT = 2

CREATE TABLE #Boxes (Model VARCHAR(5), S INT, M INT, L INT, XL INT, XXL INT)
INSERT #Boxes VALUES
    ('00001', 2, 4, 4, 0, 0),
    ('00002', 0, 0, 0, 4, 2),
    ('00003', 8, 0, 0, 0, 0),
    ('00004', 0, 8, 0, 0, 0),
    ('00005', 2, 0, 8, 8, 0),
    ('00006', 2, 0, 0, 0, 8),
    ('00007', 1, 2, 2, 2, 2),
    ('00008', 1, 2, 2, 2, 0),
    ('00009', 2, 4, 4, 4, 2),
    ('00010', 3, 5, 4, 4, 2),
    ('00011', 2, 3, 4, 4, 2)

;WITH CTE AS
(   SELECT  *, CONVERT(VARCHAR(1000), Model + ';') [Models], 1 [Boxes]
    FROM    #Boxes
    UNION ALL
    SELECT  a.Model, 
            a.S + b.S, 
            a.M + b.M, 
            a.L + b.L, 
            a.XL + b.XL,
            a.XXL + b.XXL,
            CONVERT(VARCHAR(1000), b.Models + a.Model + ';'), 
            Boxes + 1
    FROM    #Boxes a
            INNER JOIN CTE b
                ON a.Model > b.Model
), CTE2 AS
(   SELECT  Models, 
            S, 
            M, 
            L, 
            XL, 
            XXL, 
            Boxes, 
            (S + M + L + XL + XXL) - (@S + @M + @L + @XL + @XXL) [Wasted]
    FROM    CTE
    WHERE   S >= @S
    AND     M >= @M
    AND     L >= @L
    AND     XL >= @XL
    AND     XXL >= @XXL
)
SELECT  *,
        RANK() OVER(ORDER BY Boxes, Wasted) [Rank]
FROM    CTE2

DROP TABLE #Boxes 
```

# wpf - 画布和 ClipToBounds 的 WPF DropShadowEffect

> ID：10009049
> 
> 赞同：0
> 
> 时间：2012-04-04T10:08:47.527
> 
> 标签：wpf, xaml

我在滚动查看器中有一个画布。Canvas 也支持缩放功能。我想要画布的 DropShadowEffect。仅当 Canvas 的 ClipToBounds 设置为 False 时，DropShadowEffect 才有效。但我想将其设置为 True。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:44:22.053

您可以做的一件事是在网格中分层不同的控件并将 DropShadowEffect 附加到后台的控件。

像这样的东西：

```
<ScrollViewer>
  <Grid>
    <Canvas ClipToBounds="true" Background="Transparent" />
    <Border Margin="2,2,5,5" Background="LightBlue" >
      <Border.Effect>
        <DropShadowEffect BlurRadius="2"></DropShadowEffect>
      </Border.Effect>
    </Border>
  </Grid>
</ScrollViewer> 
```

# java - 使用java反射调用setter方法

> ID：10009052
> 
> 赞同：51
> 
> 时间：2012-04-04T10:08:57.263
> 
> 标签：java, reflection

我需要使用反射调用一个类的setter方法，代码如下：

```
try {             
   Method method = myObj.getClass().getMethod("set" + fieldName, new Class[] { value.getClass() });               
   method.invoke(myObj, value);
     } catch (Exception ex) {
         ex.printStackTrace();
     } 
```

`value`is an和`ArrayList`setter 方法如下：

```
public void setNames(List<String> names){
    this.names = names;
} 
```

运行此代码时会抛出A `java.lang.NoSuchMethodException`，但是当将 setter 方法参数类型更改为`ArrayList`from时，`List`它可以正常执行。有没有办法在从类中获取方法时将setter方法参数保持在超类型并且仍然使用反射而不手动给出参数的类型？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-05T07:48:46.813

你可以使用[BeanUtils](http://commons.apache.org/proper/commons-beanutils/)：

**第1步**

```
Customer customer = new Customer(); 
```

**第2步**

```
BeanUtils.setProperty(customer,"firstName","Paul Young"); 
```

您可以使用反射迭代所有类成员并相应地设置值，假设客户对象具有：

```
private String firstName;
// Getter and Setter are defined 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-04-12T13:46:10.260

如果您碰巧使用*spring framework*，您可以使用[PropertyAccessorFactory](http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/PropertyAccessorFactory.html)来检索[PropertyAccessor](http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/beans/PropertyAccessor.html)接口的实现：

## 直接访问属性

```
PropertyAccessor myAccessor = PropertyAccessorFactory.forDirectFieldAccess(object);
// set the property directly, bypassing the mutator (if any)
myAccessor.setPropertyValue("someProperty", "some value"); 
```

## 通过访问器/修改器访问属性

如果您需要使用它们的*getter*和*setter*访问您的属性，您可以使用以下`forBeanPropertyAccess`方法：

```
PropertyAccessor myAccessor = PropertyAccessorFactory.forBeanPropertyAccess(object);
// a `setSomeProperty()` method will be used
myAccessor.setPropertyValue("someProperty", "some value"); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-04T10:25:13.797

与其他答案相反，有一个非常简单的解决方案。见`java.beans.Statement`。它为您提供了一种执行任意反射代码的方法，而不必担心实际类型与正式类型（以及其他一些事情）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-04T10:18:26.863

有一个[简单的解决方案](https://stackoverflow.com/a/10009255/59279)，但这种简单是以性能为代价的。

我正在使用这个怪物：

```
public static Method findMethod(Class<?> clazz, String methodName, Class<?>... parameterTypes) throws NoSuchMethodException {

    // First try the trivial approach. This works usually, but not always.
    try {
        return clazz.getMethod(methodName, parameterTypes);
    } catch (NoSuchMethodException ex) {
    }

    // Then loop through all available methods, checking them one by one.
    for (Method method : clazz.getMethods()) {

        String name = method.getName();
        if (!methodName.equals(name)) { // The method must have right name.
            continue;
        }

        Class<?>[] acceptedParameterTypes = method.getParameterTypes();
        if (acceptedParameterTypes.length != parameterTypes.length) { // Must have right number of parameters.
            continue;
        }

        boolean match = true;
        for (int i = 0; i < acceptedParameterTypes.length; i++) { // All parameters must be right type.
            if (null != parameterTypes[i] && !acceptedParameterTypes[i].isAssignableFrom(parameterTypes[i])) {
                match = false;
                break;
            }
            if (null == parameterTypes[i] && acceptedParameterTypes[i].isPrimitive()) { // Accept null except for primitive fields.
                match = false;
                break;
            }
        }

        if (match) {
            return method;
        }

    }

    // None of our trials was successful!
    throw new NoSuchMethodException();
} 
```

`parameterTypes`是你从你的`value.getClass()`. 它们中的一些或全部也可以为空。然后它们被视为任何非原始参数字段的匹配。

即使这样也不是完美的：如果有几个方法在多态上是合适的，但没有一个完全匹配，那么返回的方法是任意选择的（`clazz.getMethods()`返回数组中的第一个匹配项）。此行为不同于 Java 语言行为，其中始终使用“最接近的匹配”。

如果按名称获取方法就足够了（即，如果名称匹配，您假设参数是合适的），那么您可以更简单（并且更快）进行管理：

```
public static Method findMethod(Class<?> clazz, String methodName) {
  for (Method method : clazz.getMethods()) {
    if (method.getName().equals(methodName)) {
      return method;
    }
  }
  throw new NoSuchMethodException();
} 
```

为了进一步提高它，考虑某种缓存。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-25T16:14:44.707

反射类有时被称为动态调用。

例如，让我们看看使用反射的 getter 方法

考虑有一个类被调用`MyReflectionClass`并且有一个方法被调用`getreflect()`。（例如类型字符串）让我们看看如何使用反射类

```
MyReflectionClass  obj = new MyReflectionClass();

<? extends MyReflectionClass> tempClass = obj.getClass();
String a = (String) obj.getMethod("getreflect").invoke(obj); 
```

现在设置方法

```
(String) obj.getDeclaredMethod("setreflect", String.class).invoke(obj,"MyString"); 
```

如果您需要对字符串序列执行相同的操作，那么

```
 (String) obj.getDeclaredMethod("setreflect",
 new String.class{}).invoke(obj,"MyString1","MyString2"); 
```

希望它可能有用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-06T17:34:14.903

示例 set 所有字段使用 setter 方法通过 ResultSet 获取值。

```
private Object setAllSetters(Object ob, ResultSet rs) throws SQLException{
    // MZ: Find the correct method
    Class cls = ob.getClass();
    while (rs.next()) {
        for (Field field : cls.getDeclaredFields()){
            for (Method method : cls.getMethods())
            {
                if ((method.getName().startsWith("set")) && (method.getName().length() == (field.getName().length() + 3)))
                {
                    if (method.getName().toLowerCase().endsWith(field.getName().toLowerCase()))
                    {
                        // MZ: Method found, run it
                        try
                        {
                            method.setAccessible(true);
                            if(field.getType().getSimpleName().toLowerCase().endsWith("integer"))
                                method.invoke(ob,rs.getInt(field.getName().toLowerCase()));
                            else if(field.getType().getSimpleName().toLowerCase().endsWith("long"))
                                method.invoke(ob,rs.getLong(field.getName().toLowerCase()));
                            else if(field.getType().getSimpleName().toLowerCase().endsWith("string"))
                                method.invoke(ob,rs.getString(field.getName().toLowerCase()));
                            else if(field.getType().getSimpleName().toLowerCase().endsWith("boolean"))
                                method.invoke(ob,rs.getBoolean(field.getName().toLowerCase()));
                            else if(field.getType().getSimpleName().toLowerCase().endsWith("timestamp"))
                                method.invoke(ob,rs.getTimestamp(field.getName().toLowerCase()));
                            else if(field.getType().getSimpleName().toLowerCase().endsWith("date"))
                                method.invoke(ob,rs.getDate(field.getName().toLowerCase()));
                            else if(field.getType().getSimpleName().toLowerCase().endsWith("double"))
                                method.invoke(ob,rs.getDouble(field.getName().toLowerCase()));
                            else if(field.getType().getSimpleName().toLowerCase().endsWith("float"))
                                method.invoke(ob,rs.getFloat(field.getName().toLowerCase()));
                            else if(field.getType().getSimpleName().toLowerCase().endsWith("time"))
                                method.invoke(ob,rs.getTime(field.getName().toLowerCase()));
                            else 
                                method.invoke(ob,rs.getObject(field.getName().toLowerCase()));
                        }
                        catch (IllegalAccessException | InvocationTargetException | SQLException e)
                        {
                            System.err.println(e.getMessage());
                        }
                    }
                }
            }
        }
    }
    return ob;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-16T06:45:55.977

使用字符串处理检测方法名称可能看起来不像是正确的方法。将此视为解决方案之一。

```
 try {
            Animal animal = new Animal();
            BeanInfo beaninfo = Introspector.getBeanInfo(Animal.class);
            PropertyDescriptor pds[] = beaninfo.getPropertyDescriptors();
            Method setterMethod=null;
            for(PropertyDescriptor pd : pds) { 
                setterMethod = pd.getWriteMethod(); // For Setter Method

           /*
               You can get Various property of Classes you want. 
           */

                System.out.println(pd.getName().toString()+ "--> "+pd.getPropertyType().toString()+"--Setter Method:->"+pd.getWriteMethod().toString());

                if(setterMethod == null) continue;
                else
                    setterMethod.invoke(animal, "<value>");
            }
        }catch(Exception e) {e.printStackTrace();} 
```

# javascript - 检查 div 之后是否存在某些东西

> ID：10009059
> 
> 赞同：2
> 
> 时间：2012-04-04T10:09:32.657
> 
> 标签：javascript, jquery, html

只是想知道，我可以做些什么来检查 div 之后是否存在任何东西。在这个例子中，在这种情况下应该返回**True**：

[http://jsfiddle.net/BsqTg/1/](http://jsfiddle.net/BsqTg/1/)

[http://jsfiddle.net/BsqTg/2/](http://jsfiddle.net/BsqTg/2/)

在这种情况下应该返回**False**：

[http://jsfiddle.net/BsqTg/3/](http://jsfiddle.net/BsqTg/3/)

我尝试使用 $('#text').next().length ，但不起作用。第一个示例特别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:31:38.777

但是，不确定是否存在更短的方式：

```
var text = $("#text"), 
    hasNext = !!(text.next().length || (text[0].nextSibling && $.trim(text[0].nextSibling.nodeValue))); 
```

基本上我们首先检查是否有任何元素节点使用`next()`（so，`<br/>`或其他元素），如果有，那就足够了。否则，我们检查是否有任何`nextSibling`对象，以及它的值是否不是空字符串（因此不考虑任何空格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:17:28.420

是的，您可以为此使用 DOM

```
alert($('div#text').is(':not(:last)') || $.trim($('div#text')[0].nextSibling.nodeValue).length > 0); 
```

在您的第三种情况下返回 false：

[http://jsfiddle.net/BsqTg/8/](http://jsfiddle.net/BsqTg/8/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:43:17.500

看看[**这个演示**](http://jsfiddle.net/salman/PLyDe/)。我将所有三个案例合二为一。代码是这样的：

```
var $contents = $(this).contents().filter(function() {
    // modify the following line to indicate what recon as "something"
    return (this.nodeType == 1 || this.nodeType == 3) && /\S/.test(this.nodeValue);
});
var $text = $(this).find(".text:first");
if (console && console.log) {
    console.log($contents, $contents.index($text), $contents.length);
}
if ($contents.index($text) == $contents.length - 1) {
    $(this).css({
        background: "#F99"
    });
}
else {
    $(this).css({
        background: "#9F9"
    });
} 
```

此代码执行以下操作：

1.  抓取所有节点，包括文本和评论节点并检查它们是否是*某物*
2.  它计算这些节点
3.  查找该列表中特定元素的索引 检查它是否是最后一个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T10:17:05.477

这是因为 jquery 没有提供获取文本节点的便捷方式。您可以使用容器 .contents() 它确实返回文本节点，然后循环通过它来查看有问题的 div 之后有什么。要查看一个节点是否是一个文本节点，它的 nodeType == 3。

# html - iPad 上的 iFrame 没有在里面渲染整个内容

> ID：10009061
> 
> 赞同：2
> 
> 时间：2012-04-04T10:09:50.857
> 
> 标签：html, css, ios, ipad, iframe

我设法让 iFrame/HTML 对象在 iPad (iOS 5.1) 上滚动工作。但仍然存在一些问题。

一个这样的问题是，当我在 iPad 屏幕上滚动 iFrame 时，Safari 的渲染引擎似乎无法重新加载该区域的内容 - 并且它只是在滚动之前变得可见。希望大家明白我的意思。[你可以在这里](http://dl.dropbox.com/u/4118251/scrollSample.html)试试这是一个非常基本的页面，只是为了演示问题。这里有没有人遇到过这个问题并有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:42:00.573

您可以使用以下 javascript，其作用类似于 iframe，但渲染效果更好：

```
$("#divID").load("index.html"); 
```

# java - 从内部 Action 类调用外部类的方法 getContentPane()

> ID：10009063
> 
> 赞同：0
> 
> 时间：2012-04-04T10:09:54.300
> 
> 标签：java, jframe, abstract-action

我想从内部 Action 类调用外部类的方法 getContentPane()。我不明白为什么我的代码不起作用。

```
public class MainFrame extends JFrame {
    public MainFrame() {
        super("My app");
        JMenuBar menuBar = new JMenuBar();
        setJMenuBar(menuBar);

        JMenu myMenu = new JMenu("File");
        menuBar.add(myMenu);
        Action myAction = new AbstractAction("Do everything") {
            public void actionPerformed(ActionEvent e) {
                JPanel panel = new JPanel();
                panel.setBackground(Color.CYAN);
                getContentPane().add(panel, BorderLayout.CENTER);
            }
        };
        myMenu.add(myAction);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:51:55.830

您必须在 之后调用`validate();`方法`getContentPane().add(...);`。

> validate 方法用于使容器重新布置其子组件。在容器显示后修改此容器的子组件（添加到容器或从容器中删除，或更改布局相关信息）时，应调用它。

# ios - 根据 Instruments 的 MKMapView 泄漏

> ID：10009068
> 
> 赞同：1
> 
> 时间：2012-04-04T10:10:09.613
> 
> 标签：ios, memory-leaks, mkmapview, mkannotationview

当我使用 MKMapView 时，根据 Instruments，我得到了泄漏。我的代码如下：

```
mapView = [[MKMapView alloc] initWithFrame:self.bounds];
mapView.mapType = MKMapTypeStandard;
mapView.delegate = self;
[self addSubview:mapView]; 
```

我们释放地图视图；以下代码适用于 MKAnnotationView：

```
-(MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
    WeatherItem *weatherItem = (WeatherItem *)annotation;
    static NSString *AnnotationViewID = @"annotationViewID";

    WeatherAnnotationView *annotationView = (WeatherAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationViewID];
    if (annotationView == nil)
    {
        annotationView = [[[WeatherAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationViewID] autorelease];
    }

    SWPeripheryIndicator *perpheryIndicator = [[SWPeripheryCache sharedPeripheryCache] onePeripheryCityInfo:[weatherItem cityCode]];
    if (perpheryIndicator==nil && MKMapRectContainsPoint(map.visibleMapRect, MKMapPointForCoordinate(annotation.coordinate))) 
    {
        [[SWeatherEngine sharedSWeatherEngine] getPeriphyWeather:weatherItem.cityCode];
        [onDownLoadView setObject:annotationView forKey:weatherItem.cityCode];
    }

    annotationView.cityCode = weatherItem.cityCode;
    annotationView.annotation = annotation;
    [annotationView updatePeripheryInfo:weatherItem.cityName shouldDisplayData:perpheryIndicator];

    return annotationView;
} 
```

# php - MySQL WHERE 条件是否将括号视为与 PHP 相同？

> ID：10009069
> 
> 赞同：4
> 
> 时间：2012-04-04T10:10:41.983
> 
> 标签：php, mysql, operators, conditional-statements

MySQL 是否完全考虑 WHERE 条件中的括号？它像 PHP 一样工作吗？

```
WHERE (condition1 OR condition2) AND condition3 
```

是相同的

```
if ((condition1 || condition2) && condition3) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:16:37.857

是的，这会奏效。例如，我在项目中有类似于此查询的内容：

```
SELECT * FROM translation WHERE (language='en' AND translation_label='lbl_submit') OR (language='en' AND translation_label='lbl_submit_btn') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:16:49.033

是的，它们的计算方式相同，尽管我不确定是否以相同的顺序。

# c# - 从双阵列播放声音

> ID：10009070
> 
> 赞同：3
> 
> 时间：2012-04-04T10:10:47.487
> 
> 标签：c#, arrays

我有一个问题，表面上看起来很简单，但我正在解决巨大的问题。

我有 2 个双阵列（左右通道），其中包含由 DAQ 以 350KHz 采样的数据，我已将其下变频为 44.1KHz。

我想要做的就是拿这两个阵列并播放它们，但似乎有很多选项可用于输出声音，即directx、NAudio等，所以我希望那里可能有人可以建议我最好的方法是什么，也许可以为我指明正确的方向！

提前感谢您的任何建议 - 我们将不胜感激。

戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-13T16:16:49.323

NAudio 是我多次听到人们提到的一种选择（正如您所做的那样）。我知道这是一个开源的 3rd 方库。你可能想看看那个。

不幸的是，据我所知，在我看来，DirectX 正在退出，MS 多年来已经改变了他们对一些不同的东西的推动，现在他们似乎在推动人们使用 XNA，这确实是一个完整的框架，当您在 XNA 中制作项目时，它可以在桌面环境中的 Windows、Xbox 360 或 Windows Phone 上运行。对我来说，Windows Phone 并不是什么大不了的，因为看起来 MS 在移动世界中并不是一个大玩家，但是一个在 Xbox 上运行的应用程序对我很有吸引力。但我在 XNA 框架/体系结构中看到了常规 .NET 框架所缺乏的几个更好的功能，包括视频播放和音频播放。除此之外，我不知道太多细节，因为我还没有开始在 XNA 中进行开发（还）。

此外，您可能希望使用 System.Media.SoundPlayer 直接在 .NET 中播放它们，而无需任何 3rd 方库。

我发现下面的代码播放一个简单的正弦波，使用它。它生成声音样本，然后将其提供给 a `MemoryStream`，然后使用 SoundPlayer 播放。SoundPlayer 本身采用 WAV 格式的 Stream，我知道它可以播放立体声，但我不需要立体声，所以我没有研究如何将其添加到 WAV 文件格式中。我非常喜欢它的是它不需要 3rd 方 DLL。如果这个方法对你有用，那么这里是：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Windows.Forms;

public static void PlayBeep(UInt16 frequency, int msDuration, UInt16 volume = 16383)
{
    var mStrm = new MemoryStream();
    BinaryWriter writer = new BinaryWriter(mStrm);

    const double TAU = 2 * Math.PI;
    int formatChunkSize = 16;
    int headerSize = 8;
    short formatType = 1;
    short tracks = 1;
    int samplesPerSecond = 44100;
    short bitsPerSample = 16;
    short frameSize = (short)(tracks * ((bitsPerSample + 7) / 8));
    int bytesPerSecond = samplesPerSecond * frameSize;
    int waveSize = 4;
    int samples = (int)((decimal)samplesPerSecond * msDuration / 1000);
    int dataChunkSize = samples * frameSize;
    int fileSize = waveSize + headerSize + formatChunkSize + headerSize + dataChunkSize;
    // var encoding = new System.Text.UTF8Encoding();
    writer.Write(0x46464952); // = encoding.GetBytes("RIFF")
    writer.Write(fileSize);
    writer.Write(0x45564157); // = encoding.GetBytes("WAVE")
    writer.Write(0x20746D66); // = encoding.GetBytes("fmt ")
    writer.Write(formatChunkSize);
    writer.Write(formatType);
    writer.Write(tracks);
    writer.Write(samplesPerSecond);
    writer.Write(bytesPerSecond);
    writer.Write(frameSize);
    writer.Write(bitsPerSample);
    writer.Write(0x61746164); // = encoding.GetBytes("data")
    writer.Write(dataChunkSize);
    {
        double theta = frequency * TAU / (double)samplesPerSecond;
        // 'volume' is UInt16 with range 0 thru Uint16.MaxValue ( = 65 535)
        // we need 'amp' to have the range of 0 thru Int16.MaxValue ( = 32 767)
        double amp = volume >> 2; // so we simply set amp = volume / 2
        for (int step = 0; step < samples; step++)
        {
            short s = (short)(amp * Math.Sin(theta * (double)step));
            writer.Write(s);
        }
    }

    mStrm.Seek(0, SeekOrigin.Begin);
    new System.Media.SoundPlayer(mStrm).Play();
    writer.Close();
    mStrm.Close();
} // public static void PlayBeep(UInt16 frequency, int msDuration, UInt16 volume = 16383) 
```

当然，如果您选择最后一个选项，您需要弄清楚如何将立体声格式化为 WAV 格式并自己研究（或询问）。快乐编码！

# regex - 提取带有标题的 Google 搜索结果

> ID：10009077
> 
> 赞同：1
> 
> 时间：2012-04-04T10:11:22.003
> 
> 标签：regex, vb.net

我想问一下如何从 google 搜索结果中提取文本和 url，就像在 google 中一样。我只有这段代码，但我不知道如何制作 vb.net 正则表达式。我只需要知道如何提取文本和网址的所有内容。或者您可以建议其他正则表达式代码，但要与示例中的相同。

例子：

![在此处输入图像描述](../Images/e85ad5c765ae46f0996479e6c71e9ca0.png)

文本 -`<h3 class="r"><a href="http://www..com/"><b>Welcome to dog training courses</b></a>`

网址 -`<a href="http://..com/">Any link</a>`

例子：

文字 -`Welcome to dog training courses`
网址 - `www.dogtraining.com`

文字 -`Welcome to Learning About Dogs`
网址 - `www.learningaboutdogs.com`

```
ListBox1.Items.Clear()
        将 wc 变暗为新的 WebClient
        暗淡源为 String = wc.DownloadString("http://www.google.com/search?&q=" + TextBox1.Text)
        Dim m1 As MatchCollection = Regex.Matches(source, "", RegexOptions.Singleline + RegexOptions.IgnoreCase)
        对于每个 m 作为匹配在 m1
            暗值作为 String = m.Groups(0).Value

            If Not value.Contains("google") Then
                ListBox1.Items.Add(值)
            万一
        下一个

```

# html - 使用 Fabric.js 的交互式文本字段

> ID：10009080
> 
> 赞同：29
> 
> 时间：2012-04-04T10:11:33.017
> 
> 标签：html, text, canvas, fabricjs

在过去的几周里，我一直在使用 Fabric.js，但是关于文本字段，我发现只能在创建时设置文本。

是否有任何可能的方法来制作交互式文本字段，或者我是否必须找到解决方法来实现这一点？（对于交互式文本字段，我的意思是画布的一个区域，我可以单击并直接在其中写入。）

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2014-03-02T11:22:36.527

最新版本的 fabric.js 包含一个 IText 类，它包含动态编辑和选择文本的交互。使用最新版本的 fabric.js 尝试下面的代码

```
canvas.add(new fabric.IText('Tap and Type', { 
  fontFamily: 'arial black',
  left: 100, 
  top: 100 ,
})); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-08T10:15:12.750

我最近使用fabric.js 构建了一个思维导图工具，我遇到了同样的问题。

为了实现您所描述的（在画布中创建文本元素时和之后更改文本），我使用 jquery 来检测 keydown 事件。假设您在织物画布中选择了所需的文本元素，以下代码段将更改文本。

```
$(document).keydown(function(e){
    var keyPressed = String.fromCharCode(e.which);
    var text = canvas.getActiveObject();
    if (text)
    {
        var newText = '';
        var stillTyping = true;
        if (e.which == 27) //esc
        {
            if (!text.originalText) return; //if there is no original text, there is nothing to undo
            newText = text.originalText;
            stillTyping = false;
        }
        //if the user wants to make a correction
        else
        {
            //Store the original text before beginning to type
            if (!text.originalText)
            {
                text.originalText = text.text;
            }
            //if the user wants to remove all text, or the element entirely
            if (e.which == 46) //delete
            {
                activeObject.element.remove(true);
                return;
            }
            else if (e.which == 16) { //shift
                newText = text.text;
            }
            else if (e.which == 8) //backspace
            {
                e.preventDefault();
                newText = text.text.substr(0, text.text.length - 1);
            }
            else if (e.which == 13) //enter
            {
                //canvas clear selection
                canvas.discardActiveObject();
                canvas.renderAll();
                canvasBeforeSelectionCleared({ memo: { target: text} });

                newText = text.text;
                stillTyping = false;
            }
            //if the user is typing alphanumeric characters
            else if (
                (e.which > 64 && e.which < 91) || //A-Z
                (e.which > 47 && e.which < 58) || //0-9
                (e.which == 32) || //Space
                (keyPressed.match(/[!&()"'?-]/)) //Accepted special characters
            )
            {
                if (text.text == text.originalText) text.text = '';
                if (keyPressed.match(/[A-Z]/) && !e.shiftKey)
                    keyPressed = keyPressed.toLowerCase();
                newText = text.text + keyPressed;
            }
        }
        text.set({ text: newText }); //Change the text
        canvas.renderAll(); //Update the canvas

        if (!stillTyping)
        {
            this.text.originalText = null;
        }
    }
}); 
```

使用这种技术，我可以在织物画布中选择一个文本元素，开始输入并替换文本。您可以对其进行更改，以便在每次选择元素时都不会删除文本。

这种方法有一些妥协。例如，您不能像在常规 HTML 输入文本元素中一样选择文本，并且没有闪烁的光标，因此“虚拟”光标始终位于文本的末尾。

如果你真的想要，你可以在文本的末尾画一个闪烁的光标。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-31T06:59:04.247

我想为时已晚，但这可能对其他人有帮助。

[有一个关于 fabricjs 的演示可以做同样的事情。](http://fabricjs.com/kitchensink)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-12T12:34:11.090

```
 text.set({ text: newText }); //Change the text
    canvas.renderAll(); //Update the canvas 
```

这就是我要找的:) 非常感谢！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T15:10:04.140

假设您在脚本中同时拥有画布和上下文作为变量：

```
// write text
context.fillText("text1",0,0);

// refresh canvas and write new text
context.clearRect(0,0,canvas.width,canvas.height);
context.fillText("text2",0,0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T18:25:27.687

试试这个（这是来自我的应用程序）：

```
Text Color: <input id="text-color" type="text" value = "#FF0000" name="textColor" />

textColor.onchange = function() {
            canvas.getActiveObject().setColor(this.value);
            canvas.renderAll();
        };

function updateControls() {         
            textControl.value = canvas.getActiveObject().getText();
        }

        canvas.on({
            'object:selected': updateControls,
        }); 
```

# jaxb - JAXB：在 JAXB 中创建 Unmarshaller 时抛出 NullPointerException

> ID：10009084
> 
> 赞同：1
> 
> 时间：2012-04-04T10:12:00.053
> 
> 标签：jaxb

我已经为我的 XML 创建了一个结构来使用 JAXB 解组 问题是 taht，Unmarshaller 没有被创建。

```
JAXBContext jc =  JAXBContext.newInstance("A Fully qualified class name");
Unmarshaller um =  jc.createUnmarshaller();

java.lang.NullPointerException is being thrown at 
Unmarshaller um =  jc.createUnmarshaller(); 
```

除了 java.lang.NullPointerException 之外，statcktrace 上没有任何内容，因此也无法对其进行调试。有人可以告诉我在创建 Unmarshaller 期间如何解决这个问题吗？对于 JAXB 2.0

供参考，这是我的 Parser 类

```
public class BADFMMessageParser  {
private static JAXBContext jc = null;
    static {
        try {
        jc = JAXBContext.newInstance("My Fully Qualified class name");
        } catch (Exception x) {
        }
    }
    public static MyClass parse(String str) throws Exception {
        Unmarshaller um = jc.createUnmarshaller();
        BADFM  badfmMessage = (BADFM) um.unmarshal(new StringReader(requestStr));
        JAXBElement<? extends MyClass> value = badfmMessage.getMessage();
        return value.getValue();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:41:20.677

我不确定您为什么会看到 NPE，但您似乎创建`JAXBContext`错误。假设您在指定的包中有一个`jaxb.index`文件或`ObjectFactory`类，您可以执行以下操作：

```
JAXBContext jc =  JAXBContext.newInstance("your.domain.model.package"); 
```

否则，您可以`JAXBContext`直接在一个或多个类上创建您的：

```
JAXBContext jc = JAXBContext.newInstance(Foo.class,Bar.class); 
```

**`jaxb.index`文件示例**

*   [http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html)

**`JAXBContext`生成模型示例的引导程序**

*   [http://blog.bdoughan.com/2010/09/processing-atom-feeds-with-jaxb.html](http://blog.bdoughan.com/2010/09/processing-atom-feeds-with-jaxb.html)

**`JAXBContext`类示例的引导程序**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)

# c# - Winform 和线程 (C#)

> ID：10009089
> 
> 赞同：0
> 
> 时间：2012-04-04T10:12:15.157
> 
> 标签：c#, winforms, multithreading

我对使用线程更新 UI 的 winform 应用程序有疑问。我的应用程序确实从云上传和下载文件。同时我也在同一个窗口上显示网络速度详细信息。这三个操作（上传、下载、显示 n/w 速度）由 3 个不同的线程调用。问题是，当我开始下载/上传时，整个窗口冻结并且 n/w 速度显示不刷新（它被写入每隔 1 秒刷新一次）。会有什么问题？提前致谢。

代码如下......我写的下载方式相同。如果我先调用 **Upload** 然后 **Download** 一个接一个，第一个线程将暂停并开始下载线程。**下载**完成后，**上传**继续。它不会并行。UI 也不会立即响应其他按钮单击或窗口大小调整、移动操作。

```
public delegate void UploadDelgt();
UploadDelgt UpldDlgtObj;
 private void Form1_Load(object sender, EventArgs e)
{
    UpldDlgtObj = new UploadDelgt(DoUpload);
}

public void load()
{
    Form1 form = this;
    form.Invoke(UpldDlgtObj);
}

private void button1_Click(object sender, EventArgs e)
{
    thrd = new Thread(new ThreadStart(load));
    thrd.Start();
    thrd.IsBackground = true;
}

public void DoUpload()
{
//uploads file block by block and updates the progressbar accordingly..
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:15:49.693

> 这三个操作（上传、下载、显示 n/w 速度）由 3 个不同的线程调用。问题是，当我开始下载/上传时，整个窗口冻结

您的一个工作线程正在阻塞 UI 线程。确保这些操作均未在 UI 线程上完成，并且您使用`InvokeRequired`/`Invoke`如下所述：http: [//www.codeproject.com/Articles/37642/Avoiding-InvokeRequired](http://www.codeproject.com/Articles/37642/Avoiding-InvokeRequired)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:16:58.927

您的 UI 冻结，因为您正在调用`form.Invoke`您的`load`方法。来自[MSDN](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)的关于`Invoke`：`Executes the specified delegate on the thread that owns the control's underlying window handle.` 所以，以为您是`DoUpload`在单独的线程中调用，它仍然在 GUI 线程（拥有表单句柄）上执行，因为它是用`Invoke`.

# java - 接收未定义数量的数组的方法

> ID：10009091
> 
> 赞同：2
> 
> 时间：2012-04-04T10:12:21.740
> 
> 标签：java, arrays, list, arguments, variable-length

不久前，我在玩使用可变长度参数列表（java）的方法，这些方法定义如下

```
public static int[] makeArray (int... a) {
return a;
} 
```

这是一个愚蠢的程序，但它会做的是接收未定义数量的整数并从中创建一个数组，这样下面的所有内容都会调用相同的方法

```
makeArray(1);
makeArray(1,2);
makeArray(1,2,3); 
```

现在我要做的是创建一个具有相同效果但使用数组而不是整数的方法。我在想它可以通过将数组放入二维数组来做到这一点，但我不能 100% 确定这是否可能，因为添加的数组的大小可能会有所不同。（甚至可能因为这个原因它是不可能的？）。但据我所知，二维数组是制作数组数组的唯一方法。

我试过（请注意这不是我的实际用途，我只是用它来试验看看如何做到这一点）

```
public static int countArrays(int[]... a) {
return a.length;
} 
```

这没有编译。

任何人都可以提出任何建议吗？

对于任何有兴趣的人。我想要做的是创建一个方法，该方法将接受 X 多个数组，然后基于该运行 for 循环，以便添加所有数组，

例如：

```
int[] sum = new int[a[0].length];
for (int i=0; i<a.length; i++){
for (int j=0; j<a[0].length; j++){
n[i] += a[i][j];
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:21:53.150

不知道你为什么说它不编译 - 以下示例适用于我（编译并打印 2）：

```
public static void main(String[] args) throws Exception {
    int[] i1 = new int[]{1,2,3};
    int[] i2 = new int[]{1,2,3};
    int count = countArrays(i1, i2);
    System.out.println(count);
}

public static int countArrays(int[]... a) {
    return a.length;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:29:55.470

关于数组大小可能不同的点。您可以使用以下内容：

```
int[][] b = new int[10][];
int[] c = new int[2];
int[] d = new int[2131231];
b[0] = c;
b[1] = d; 
```

不要预先定义数组内部数组长度 - 这将完成所有业务。

# unit-testing - 在 CakePHP 2.0 上尝试 PHPUnit 测试时找不到控制器

> ID：10009098
> 
> 赞同：1
> 
> 时间：2012-04-04T10:12:45.240
> 
> 标签：unit-testing, cakephp, controller, phpunit, cakephp-2.0

我正在尝试在 CakePHP 2.0 上运行 PHPUnit 测试。我的模型测试没有问题，但是当我尝试运行我的控制器测试时，我得到了这个错误：

```
Fatal error: Class 'Controller' not found in `/Applications/MAMP/htdocs/mysite/app/Controller/AppController.php on line 7` 
```

这是怎么回事？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:20:42.020

你总是需要正确定义使用的类（你想要扩展的）——即使在你的控制器中：

```
App::uses('Controller', 'Controller');

class AppController extends Controller {} 
```

你错过了 App::uses 声明。

# java - 不要等待 HtmlUnit 中的 click() 响应

> ID：10009102
> 
> 赞同：0
> 
> 时间：2012-04-04T10:13:26.053
> 
> 标签：java, htmlunit

在我使用 HtmlUnit 解析的其中一个页面上，我需要单击（）一个链接，该链接加载一个加载时间很长的页面。

问题是我不需要等待响应；我只需单击链接并继续使用我的 WebClient 对象进行操作。

```
HtmlElement linkIdontCareAboutButHaveToClick = wc.checkAndGetElement("//div[@class='next']/a");

if (linkIdontCareAboutButHaveToClick != null)
{
    wc.click(lienValidationPropocom);
}

// do some more thing with wc without waiting
... 
```

有没有办法告诉 HtmlUnit 做某种异步 click() ？

不用说，一切都必须绑定到会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:38:26.723

我认为您需要实例化一个新的后台线程来执行 .click() 以便您的主事件调度线程可以继续而不会停止。

首先将要在后台完成的工作封装在它自己的类中。（您可能必须将您的 wc 元素作为参数传递，具体取决于它的范围）：

```
class backgroundWork extends Thread {
    public void run() {
        wc.click(lienValidationPropocom);
    }
} 
```

然后你可以从你的主线程执行它：

```
if (linkIdontCareAboutButHaveToClick != null)
{
    Thread thread = new backgroundWork();
    thread.start();
} 
```

# c++ - 在 C++ 中使用字符串库

> ID：10009104
> 
> 赞同：2
> 
> 时间：2012-04-04T10:13:31.877
> 
> 标签：c++, string, netbeans

我在 Netbeans 工作，用 C++ 编程，但我有一个问题：我的程序在视觉上运行完美，但是一旦我将它复制到 Netbeans，`strlen`and `strcpy`（字符串库的函数）就不起作用。

编译器说：

```
unable to resolve identifer strlen
error: 'strlen' was not declared in this scope. 
```

我已经做到了`#include <string>`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:16:42.007

你搞好了没

```
#include <cstring>  or 

#include <string.h> 
```

还要检查 gcc 或 cygwin 编译器是否正确配置了 netbeans

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T13:31:28.660

除了使用

```
#include <cstring> 
```

还要确保你已经把

```
using namespace std; 
```

或者

```
using std::strlen;
using std::strcpy; 
```

提前你的程序

# c# - 如何在 C# 中对 sql 数据库使用删除查询？

> ID：10009113
> 
> 赞同：1
> 
> 时间：2012-04-04T10:14:35.323
> 
> 标签：c#

我想删除与特定 IP 地址对应的行。我写了这个查询：

```
 string dlt = @"DELETE [LocationIP], [LocationName],[LocationID],
                [NoOfUsers],[MinutesUsed] FROM [LocationInfo] WHERE LocationIP=@ipadd";
  SqlCommand cmd = new SqlCommand(dlt, sqlcon_QOEMetrices);
  cmd.Parameters.Add("@ipadd", SqlDbType.NChar, 15);

  cmd.Parameters["@ipadd"].Value = ipadd; 
```

其中 ip 地址存储在字符串变量 ipadd 中此查询没有显示任何结果，但甚至没有给出任何错误...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:16:04.457

你需要[*执行*](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)你的命令。

就像是：

```
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:17:41.977

您的查询在哪里执行？

```
 cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:22:24.240

您的 SQL 错误，您不希望在`DELETE`语句中使用选择列表。

```
string dlt = @"DELETE FROM [LocationInfo] WHERE LocationIP=@ipadd";
SqlCommand cmd = new SqlCommand(dlt, sqlcon_QOEMetrices);
cmd.Parameters.Add("@ipadd", SqlDbType.NChar, 15); 
```

就足够了。然后我假设你正在做类似的事情

```
cmd.ExecuteNonQuery() 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-04T10:18:15.427

试试这个简单的查询并执行，

```
 "DELETE FROM LocationInfo WHERE LocationIP=@ipadd"

  SqlCommand cmd = new SqlCommand(dlt, sqlcon_QOEMetrices);
  cmd.Parameters.Add("@ipadd", SqlDbType.NChar, 15);

  cmd.Parameters["@ipadd"].Value = ipadd;
cmd.ExecuteNonQuery(); 
```

# sql - 如何使用 NHibernate 将 XML 类型列映射到强类型对象属性？

> ID：10009117
> 
> 赞同：5
> 
> 时间：2012-04-04T10:14:57.203
> 
> 标签：sql, xml, nhibernate, xml-serialization

我有下表：

```
CREATE TABLE [dbo].[Data] (
    [Id]            UNIQUEIDENTIFIER NOT NULL,
    [Data]   XML              NOT NULL,
); 
```

我需要将它映射到对象：

```
class Data
{
    public virtual Guid Id {get; set;}
    public virtual StronglyTypedData Data {get; set;}
} 
```

其中，StronglyTypedData 类似于：

```
class StronglyTypedData
{
    public string Name {get; set;}
    public int Number {get; set;}
} 
```

默认情况下，XML 列映射到 XmlDocument 属性，但我希望 XML 序列化/反序列化到 StronglyTypedData 属性而不是在映射时发生。

我需要做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:50:43.103

我打算对 Diego 的帖子发表评论，但它太长了，我想要语法突出显示。我修改了 Diego 发布的 XmlDocType，以便它使用 xml 序列化来往来于强类型对象。

我制作了自己的通用 IUserType 来处理强类型：

```
//you'll need these at the top of your file
//using System;
//using System.Collections.Generic;
//using System.Linq;
//using System.Text;
//using NHibernate.UserTypes;
//using NHibernate.SqlTypes;
//using System.Data;
//using System.Xml;
//using NHibernate.Type;

[Serializable]
public class XmlType<T> : MutableType
{
    public XmlType()
        : base(new XmlSqlType())
    {
    }

    public XmlType(SqlType sqlType)
        : base(sqlType)
    {
    }

    public override string Name
    {
        get { return "XmlOfT"; }
    }

    public override System.Type ReturnedClass
    {
        get { return typeof(T); }
    }

    public override void Set(IDbCommand cmd, object value, int index)
    {
        ((IDataParameter)cmd.Parameters[index]).Value = XmlUtil.ConvertToXml(value);
    }

    public override object Get(IDataReader rs, int index)
    {
        // according to documentation, GetValue should return a string, at list for MsSQL
        // hopefully all DataProvider has the same behaviour
        string xmlString = Convert.ToString(rs.GetValue(index));
        return FromStringValue(xmlString);
    }

    public override object Get(IDataReader rs, string name)
    {
        return Get(rs, rs.GetOrdinal(name));
    }

    public override string ToString(object val)
    {
        return val == null ? null : XmlUtil.ConvertToXml(val);
    }

    public override object FromStringValue(string xml)
    {
        if (xml != null)
        {
            return XmlUtil.FromXml<T>(xml);
        }
        return null;
    }

    public override object DeepCopyNotNull(object value)
    {
        var original = (T)value;
        var copy = XmlUtil.FromXml<T>(XmlUtil.ConvertToXml(original));
        return copy;
    }

    public override bool IsEqual(object x, object y)
    {
        if (x == null && y == null)
        {
            return true;
        }
        if (x == null || y == null)
        {
            return false;
        }
        return XmlUtil.ConvertToXml(x) == XmlUtil.ConvertToXml(y);
    }
}

//the methods from this class are also available at: http://blog.nitriq.com/PutDownTheXmlNodeAndStepAwayFromTheStringBuilder.aspx
public static class XmlUtil
{
    public static string ConvertToXml(object item)
    {
        XmlSerializer xmlser = new XmlSerializer(item.GetType());
        using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
        {
            xmlser.Serialize(ms, item);
            UTF8Encoding textconverter = new UTF8Encoding();
            return textconverter.GetString(ms.ToArray());
        }
    }

    public static T FromXml<T>(string xml)
    {
        XmlSerializer xmlser = new XmlSerializer(typeof(T));
        using (System.IO.StringReader sr = new System.IO.StringReader(xml))
        {
            return (T)xmlser.Deserialize(sr);
        }
    }

} 
```

然后，最后，您可以使用 Fluent.NHibernate 像这样映射您的列：

```
public partial class MyTableEntityMap: ClassMap<MyTableEntity>
{
    public MyTableEntityMap()
    {
        Table("MyTable");
         //...

        Map(x => x.MyStronglyTypedProperty).Column("SomeXmlTypeSqlColumn").CustomType(typeof(XmlType<TypeOfMyProperty>));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T13:05:21.503

您需要编写一个`IUserType`负责转换的代码。

您可以从[XmlDocType](https://raw.github.com/nhibernate/nhibernate-core/master/src/NHibernate/Type/XmlDocType.cs)开始，它实际上是从原始 XML 转换为 XmlDocument 的那个。

# jquery-mobile - Jquery Mobile 和触摸溢出跳转到屏幕顶部

> ID：10009124
> 
> 赞同：0
> 
> 时间：2012-04-04T10:15:31.150
> 
> 标签：jquery-mobile, scroll, overflow

我正在为 iPad 设置拆分视图 HTML 应用程序。我正在使用 jQuery Mobile。我找到了一种很好的 CSS 方法来执行 splitview（使用 -webkit-overflow-scrolling: touch; overflow:auto;
），这对表单字段很有效，但是当我单击任何输入时包含 jQuery Mobile 脚本字段 div 滚动到顶部（尽管输入似乎确实集中在被点击的表单字段上。）

对于如何抑制滚动到顶部行为的任何建议，我将不胜感激。

我搜索并发现很多人抱怨滚动到顶部以进行页面转换，但我相信这是不同的。

[您可以在此 jsfiddle 上看到此行为，向下滚动右侧并单击任何输入字段，屏幕滚动到顶部](http://jsfiddle.net/MarkGreene/VkvYN/17/show/)（[在此处编辑小提琴](http://jsfiddle.net/MarkGreene/VkvYN/17/)）删除 jqm 脚本会删除此行为。

我们确实尝试了出色的[asyraf9 splitview](https://github.com/asyraf9/jquery-mobile/)，但随着我们添加更多表单项，性能显着下降，而且我不愿意选择 jqm 的自定义分支，并且一直在尝试直接的 css 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:22:52.470

这对我们来说也是一个问题，在页面的输入字段中输入会导致屏幕疯狂地上下跳动。造成这种情况的一个原因是 3D webkit 在 Android 中被破坏了。

[Android浏览器textarea到处滚动，无法使用](https://stackoverflow.com/questions/4489809/android-browser-textarea-scrolls-all-over-the-place-is-unusable)

所以使用任何这样的东西作为输入可能会导致这种行为。但我们并没有使用有任何这样的东西。来自 [http://www.sencha.com/forum/archive/index.php/t-132885.html?s=8cb1ed44a5383de62ffee964654a338](http://www.sencha.com/forum/archive/index.php/t-132885.html?s=8cb1ed44a5383de62fffee964654a338)和 [http://java-cerise.blogspot.in/2012/02/android-browser-jumping -up-and-down.html](http://java-cerise.blogspot.in/2012/02/android-browser-jumping-up-and-down.html)

似乎有一个奇怪的问题，即固定 div 必须具有比页面中任何绝对 div 更高的 z-index。我找不到它的原因，但是为我们的固定 div 付诸行动解决了这个问题。

试试这个，看看它是否同样的问题。

关于 JQM 的自定义分支，更改很少，我将 splitview jqm 升级到 jqm 的最后一个稳定版本，即 1.0.1。

# mysql - 测量所有先前日期行的最大值

> ID：10009131
> 
> 赞同：2
> 
> 时间：2012-04-04T10:15:52.210
> 
> 标签：mysql

我想添加一列（maxPrice），它将测量所有先前日期行的另一列（价格）的最大值。例如 - 表 1 有以下数据：

```
 Date       Price   
......................
    12/19/2008  5
    12/18/2008  7
    12/17/2008  5
    12/16/2008  3
    12/15/2008  4 
```

希望输出为：

```
 Date     Price    MaxPrice
.................................
12/19/2008   5      7
12/18/2008   7      7
12/17/2008   5      5
12/16/2008   3      4
12/15/2008   4      4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:32:36.950

```
SELECT
`Date`, Price, (SELECT MAX(Price) FROM yourTable t2 WHERE t2.Date < t1.Date) AS MaxPrice
FROM
yourTable t1 
```

# c++ - g++ 实现如何处理这种情况？

> ID：10009132
> 
> 赞同：6
> 
> 时间：2012-04-04T10:16:04.200
> 
> 标签：c++, visual-c++, gcc

[这是对此](https://stackoverflow.com/questions/10002082/typecasting-with-virtual-functions)问题的后续问题。

考虑这个例子：

```
#include <iostream>

class A
{
};

class B : public A
{
    public:
    int i;
    virtual void Func() = 0;
};

class C : public B
{
    public:
    char c;
    void Func() {}
};

int main()
{
    C* pC = new C;
    A* pA = (A*)pC;
    std::cout << "pC == " << std::hex << pC << "\n";
    std::cout << "pA == " << std::hex << pA << "\n";
    return 0;
} 
```

使用 Visual Studio 2010，输出是（在我的机器上）：

```
PC == 002DEF90
pA == 002DEF94

```

（这可以通过问题的[公认答案](https://stackoverflow.com/a/10002457/140367)来解释）。

使用 g++，[输出为](http://ideone.com/PbZ4z)：

```
PC == 0x96c8008
pA == 0x96c8008

```

那么，问题来了，g++的实现是如何处理这种情况的呢？`C`当应该有一个 vtable时，是什么使地址相同？（我知道这是一个实现细节，不要这么说：）出于好奇，我对这个实现细节感兴趣）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:57:58.630

折腾了好久，我终于想起了什么。

空**基优化**。

一拿到会员，结果就`A`变了。但是，只要它没有，编译器就不需要为 生成真正的布局`A`，重要的是保证每个`A`“对象”将具有与任何其他`A`对象不同的地址。

因此，编译器只需将`B`子对象（继承自`A`）的地址用作合适的地址。事实证明，`B`并且`C`具有相同的地址（第一个基数 + 都具有虚拟方法）。

另一方面，如果`A`有一个成员，或者如果第一个成员`B`是 a `A`（还有其他条件），那么**EBO**就不能再适用了，您会注意到地址发生了跳跃。

# function - 没有看到子类的功能

> ID：10009135
> 
> 赞同：0
> 
> 时间：2012-04-04T10:16:13.857
> 
> 标签：function, cocos2d-iphone

我需要你的广告：我有 2 个类，首先我初始化第二类的对象，我想使用第二类的功能，例如：

在第一堂课中，我初始化了第二堂课的对象

```
self.keys = [KeyLayer node];
self.keys.position = CGPointMake(-0.f, -0.f);
[self addChild:self.keys z:1]; 
```

我想将第二类的**关闭功能应用于****self.keys**对象，例如：

```
[self.keys.sprite self.keys.close]; 
```

**但它不起作用**

二等

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface KeyLayer : CCLayer  {

    CCLabelTTF *_label;
    CCAction *_actionOpen;
    CCAction *_actionClose;
    CCSprite *_sprite;
    CCAnimation *_animation;

}
@property (nonatomic, retain) CCSprite *sprite;
@property (nonatomic, retain) CCAction *actionOpen;
@property (nonatomic, retain) CCAction *actionClose;
@property (nonatomic, retain) CCAnimation *animation;
@property (nonatomic, retain) CCLabelTTF *label;

+(id) scene;
-(void) open;
-(void) close;
@end 
```

// ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***

```
#import "KeyLayer.h"
#import "GameLayer.h"

@implementation KeyLayer

@synthesize sprite = _sprite;
@synthesize actionOpen = _actionOpen;
@synthesize actionClose = _actionClose;
@synthesize animation = _animation;
@synthesize label = _label;

+(id) scene
{
    CCScene *scene = [CCScene node];

    return scene;
}

-(id) init
{
    if ((self = [super init]))
    {           
                CGSize screenSize = [[CCDirector sharedDirector] winSize];

        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile: [NSString stringWithFormat:@"key.plist"]];
        CCSpriteBatchNode *animationSpriteSheet = [CCSpriteBatchNode batchNodeWithFile:[NSString stringWithFormat:@"key.png"]];
        [self addChild:animationSpriteSheet];

        //*************************************************

        NSMutableArray *animationFrames = [NSMutableArray array];
        for(int i = 1; i <= 5; ++i) {

                    [animationFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"key_%d.png", i]]];
        }
        _animation = [CCAnimation animationWithFrames:animationFrames delay:0.1f];
        self.sprite = [CCSprite spriteWithSpriteFrameName: [NSString stringWithFormat:@"key_1.png"]]; 
        self.actionOpen = [CCRepeat actionWithAction:[CCAnimate actionWithAnimation:_animation restoreOriginalFrame:NO] times:1];

        //*********************************************

        for(int i = 3; i <= 5; ++i) {

            [animationFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"key_%d.png", i]]];
        }
        _animation = [CCAnimation animationWithFrames:animationFrames delay:0.1f];
        self.sprite = [CCSprite spriteWithSpriteFrameName: [NSString stringWithFormat:@"key_1.png"]]; 
        self.actionClose = [CCRepeat actionWithAction:[CCAnimate actionWithAnimation:_animation restoreOriginalFrame:NO] times:1];

        //*********************************************************  

        self.sprite.anchorPoint = ccp([self.sprite boundingBox].size.width/800, [self.sprite boundingBox].size.height/800);
        self.sprite.position = CGPointMake(-0.f, -0.f); 
        [animationSpriteSheet addChild:self.sprite z:1];

        //****************************************************

        self.label = [CCLabelTTF labelWithString:[NSString stringWithFormat:@"A"] dimensions:CGSizeMake(self.sprite.contentSize.width, self.sprite.contentSize.height) alignment:UITextAlignmentCenter fontName:@"Arial" fontSize:40];
        self.label.anchorPoint = ccp([self.label boundingBox].size.width/800, 0.25);
        self.label.position = CGPointMake(-0.f, -0.f);   
        [self addChild:self.label z:1];

    }
    return self;
}

-(void) openKey
{
    [self.sprite runAction:self.actionOpen];
}
-(void) closeKey
{
    [self.sprite runAction:self.actionClose];
}
- (void) dealloc
{
    self.sprite = nil;
    self.actionOpen = nil;
    self.actionClose = nil;
    self.label=nil;
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:39:05.950

首先，这不是您在任何对象上调用方法的方式：

```
[self.keys.sprite self.keys.close]; // even if self.keys.close was defined this is not how you call it 
```

现在，我猜你想在你的精灵上调用 closeKey 以便可以通过以下方式轻松完成：

```
[self.keys closeKey]; // self.keys is your object and closeKey is the method you desire to call on your object. 
```

# google-analytics - 如何跟踪谷歌分析推荐路径

> ID：10009143
> 
> 赞同：-1
> 
> 时间：2012-04-04T10:16:31.280
> 
> 标签：google-analytics, referrer

在没有 Google Analytics URL Builder (UTM) 的情况下，谷歌将如何跟踪从 site1 到 site2 的推荐路径？

谁能回答我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:23:21.353

您可以使用纯 javascript document.referrer

```
if ('referrer' in document)
            {
                if (document.referrer != '')
                    ref = encodeURIComponent(document.referrer);

            } 
```

# qt - 为什么使用 QObject::setObjectName()？

> ID：10009150
> 
> 赞同：12
> 
> 时间：2012-04-04T10:17:01.077
> 
> 标签：qt

为什么我们要在 QObject 中添加对象名称？我仍然可以在不设置名称的情况下加载和运行任何对象。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T10:30:40.073

好吧，这取决于您计划以后如何访问 QObject。有几个 QObject.find() 函数可用于访问 QObject。该名称添加了一个“键”来过滤您的搜索。

例如，在您自己的类中，您可能为此使用实例变量而不是进行搜索，但实际上您可能会传递一些您通常不拥有的东西，但您知道有一个特定的按钮要编辑（例如， Qt 的内置 QInputDialogs 之一中的 QPushButton）。给按钮一个名字可以很容易找到（如果按钮消失、在布局中移动等，它是健壮的），而检查按钮文本或计算它在层次结构中的位置会更加脆弱（例如，按钮文本可能会在版本之间发生变化，或者由于本地化，有人添加了新的布局、额外的按钮）。

或者，当您打印指针值时，您可能只需要一些漂亮的调试文本（即，您想知道哪个 QObject 导致了问题）。它还使编写脚本更容易，但我不会在这里解释原因。

这真的只是冰山一角。你真的只需要在需要时设置名称并且只有你知道那个答案。:-)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-05T14:33:20.477

您可以使用对象的名称作为Qt 样式表中的[ID 选择器。](http://doc.qt.io/qt-5/stylesheet-syntax.html#selector-types)

示例：如果您希望一个属性仅适用于一个特定的 QLineEdit，您可以使用 QObject::setObjectName() 为其命名并使用 ID 选择器来引用它：

```
 myDialog->setStyleSheet("QLineEdit#nameEdit { background-color: yellow }"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-04T10:29:10.403

有几个原因，我使用对象名称的一个重要原因是用于调试目的，如[Qt qdebug guide 中所述](http://doc.qt.nokia.com/4.6/debug.html)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-04T10:25:01.743

在对象是可编写脚本的情况下这是有意义的，并且可以与 findChild 一起使用

```
//button is the object name, which needs to be define in qml for the component.e.g. objectName: "button"
QObject *buttonQML = view.rootObject()->findChild<QObject*>("button"); 
```

其中“按钮”是对象名称

# java - 基于文件的 java.util.concurrent.locks.Lock 等价物？

> ID：10009152
> 
> 赞同：1
> 
> 时间：2012-04-04T10:17:02.587
> 
> 标签：java, java-6, file-locking

我正在寻找一种基于文件的锁，其 API 类似于`java.util.concurrent.locks.Lock`（例如`ReentrantLock`）。我真的很想拥有`tryLock()`和它有时间限制的小妹妹一样，不需要创建和操作文件，自己清理并花时间完善并发实现（这很难和容易出错）。

它是否在核心 Java 6 或一些流行且广泛使用（和测试）的库中可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:27:48.547

我认为很难锁定文件。我使用[FileChannel.lock()](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html#lock%28%29)或 tryLock()

# android - Android - 带有过渡动画的 TabActivity

> ID：10009155
> 
> 赞同：6
> 
> 时间：2012-04-04T10:17:27.113
> 
> 标签：android, animation, android-tabhost

我正在尝试向我的 TabActivty 添加动画。例如，当用户选择第二个选项卡时，我希望新活动来自右侧。当用户选择第一个选项卡时，我希望活动来自左侧。

我找到了如何添加一个动画，但我想再添加一个。这是我正在使用的代码：

```
public Animation inFromRightAnimation()
{
    Animation inFromRight = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, +1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    inFromRight.setDuration(240);
    inFromRight.setInterpolator(new AccelerateInterpolator());
    return inFromRight;
} 
```

和

```
getTabHost().setOnTabChangedListener(new OnTabChangeListener() {
       public void onTabChanged(String tabId)
       {
           View currentView = getTabHost().getCurrentView();
           currentView.setAnimation( inFromRightAnimation() );
       }
}); 
```

我怎样才能做到这一点？

谢谢。

问候。

五。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T11:32:21.790

这可以正常工作：

```
getTabHost().setOnTabChangedListener(new OnTabChangeListener() {
     public void onTabChanged(String tabId)
     {
            View currentView = getTabHost().getCurrentView();
            if (getTabHost().getCurrentTab() > currentTab)
            {
                currentView.setAnimation( inFromRightAnimation() );
            }
            else
            {
                currentView.setAnimation( outToRightAnimation() );
            }

            currentTab = getTabHost().getCurrentTab();
     }
}); 
```

和动画：

```
public Animation inFromRightAnimation()
{
    Animation inFromRight = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, +1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    inFromRight.setDuration(240);
    inFromRight.setInterpolator(new AccelerateInterpolator());
    return inFromRight;
}

public Animation outToRightAnimation()
{
    Animation outtoLeft = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, -1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    outtoLeft.setDuration(240);
    outtoLeft.setInterpolator(new AccelerateInterpolator());
    return outtoLeft;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T12:17:43.547

我根据我想分享的这段代码编写了一个自定义 OnTabChangeListener。希望有人可以使用它:)。原始代码归功于 Vomenki。

```
package net.danielkvist.receipttracker.listener;

import android.view.View;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;

/**
 * A custom OnTabChangeListener that uses the TabHost its related to to fetch information about the current and previous
 * tabs. It uses this information to perform some custom animations that slide the tabs in and out from left and right.
 * 
 * @author Daniel Kvist
 * 
 */
public class AnimatedTabHostListener implements OnTabChangeListener
{

    private static final int ANIMATION_TIME = 240;
    private TabHost tabHost;
    private View previousView;
    private View currentView;
    private int currentTab;

    /**
     * Constructor that takes the TabHost as a parameter and sets previousView to the currentView at instantiation
     * 
     * @param tabHost
     */
    public AnimatedTabHostListener(TabHost tabHost)
    {
        this.tabHost = tabHost;
        this.previousView = tabHost.getCurrentView();
    }

    /**
     * When tabs change we fetch the current view that we are animating to and animate it and the previous view in the
     * appropriate directions.
     */
    @Override
    public void onTabChanged(String tabId)
    {

        currentView = tabHost.getCurrentView();
        if (tabHost.getCurrentTab() > currentTab)
        {
            previousView.setAnimation(outToLeftAnimation());
            currentView.setAnimation(inFromRightAnimation());
        }
        else
        {
            previousView.setAnimation(outToRightAnimation());
            currentView.setAnimation(inFromLeftAnimation());
        }
        previousView = currentView;
        currentTab = tabHost.getCurrentTab();

    }

    /**
     * Custom animation that animates in from right
     * 
     * @return Animation the Animation object
     */
    private Animation inFromRightAnimation()
    {
        Animation inFromRight = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, 1.0f, Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f);
        return setProperties(inFromRight);
    }

    /**
     * Custom animation that animates out to the right
     * 
     * @return Animation the Animation object
     */
    private Animation outToRightAnimation()
    {
        Animation outToRight = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 1.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f);
        return setProperties(outToRight);
    }

    /**
     * Custom animation that animates in from left
     * 
     * @return Animation the Animation object
     */
    private Animation inFromLeftAnimation()
    {
        Animation inFromLeft = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, -1.0f, Animation.RELATIVE_TO_PARENT, 0.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f);
        return setProperties(inFromLeft);
    }

    /**
     * Custom animation that animates out to the left
     * 
     * @return Animation the Animation object
     */
    private Animation outToLeftAnimation()
    {
        Animation outtoLeft = new TranslateAnimation(Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, -1.0f,
                Animation.RELATIVE_TO_PARENT, 0.0f, Animation.RELATIVE_TO_PARENT, 0.0f);
        return setProperties(outtoLeft);
    }

    /**
     * Helper method that sets some common properties
     * @param animation the animation to give common properties
     * @return the animation with common properties
     */
    private Animation setProperties(Animation animation)
    {
        animation.setDuration(ANIMATION_TIME);
        animation.setInterpolator(new AccelerateInterpolator());
        return animation;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:27:16.377

您必须使用`String tabId`并检查`if`它`tabId==firstTab`，然后从右侧放置左侧`else`动画。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T11:51:06.260

如果您愿意，可以使用 Android 支持包 - [http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)

您可以毫不费力地修改您的活动以使用片段，以便您的标签可以像 YouTube 应用程序一样具有过渡动画。这是如何实现它的示例代码 - [http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)

编辑：如果您不想使用支持包，也许这个实现会有所帮助

私有类 MyGestureDetector 扩展 SimpleOnGestureListener {

```
 private static final int SWIPE_MIN_DISTANCE = 120;
      private static final int SWIPE_MAX_OFF_PATH = 250;
      private static final int SWIPE_THRESHOLD_VELOCITY = 200;

      public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        //get density   
          final DisplayMetrics metrics = getResources().getDisplayMetrics();
          final float density = metrics.density;
       //System.out.println(" in onFling() :: ");
          //off path
          if (Math.abs(e1.getY() - e2.getY()) > density*SWIPE_MAX_OFF_PATH)
              return false;
          //fling from right to left
          if (e1.getX() - e2.getX() > density*SWIPE_MIN_DISTANCE && Math.abs(velocityX) > density*SWIPE_THRESHOLD_VELOCITY) {
              //if the first tab is selected
              if(currentSelection.equalsIgnoreCase(getString(R.string.tab_details_info))) {
                  //switch to second tab and save current selection
                  tabs.setCurrentTab(1);
                  currentSelection = tabs.getCurrentTabTag();
              }
              //if the second tab is selected
              else if(currentSelection.equalsIgnoreCase(getString(R.string.tab_details_details))) {
                  //switch to second tab and save current selection
                  tabs.setCurrentTab(2);
                  currentSelection = tabs.getCurrentTabTag();
              }
          }
          //fling from left to right
          else if (e2.getX() - e1.getX() > density*SWIPE_MIN_DISTANCE && Math.abs(velocityX) > density*SWIPE_THRESHOLD_VELOCITY) {

              //if the second tab is selected
              if(currentSelection.equalsIgnoreCase(getString(R.string.tab_details_details))) {
                  //switch to second tab and save current selection
                  tabs.setCurrentTab(0);
                  currentSelection = tabs.getCurrentTabTag();
              }
              //if the third tab is selected
              else if(currentSelection.equalsIgnoreCase(getString(R.string.tab_details_company))) {
                  //switch to second tab and save current selection
                  tabs.setCurrentTab(1);
                  currentSelection = tabs.getCurrentTabTag();
              }
          }
          return super.onFling(e1, e2, velocityX, velocityY);
      }
} 
```

然后在您的选项卡上更改侦听器只需加载适当的动画，因为您知道在手势之前选择了哪一个，以及我们在之后切换到的那个。

```
 @Override
        public void onTabChanged(String tabId) {

            //if the first tab is selected
            if(currentSelection.equalsIgnoreCase(getResources().getString(R.string.tab_details_info))) {
                //if we switch to second
                if(tabId.equalsIgnoreCase(getResources().getString(R.string.tab_details_details))) {
                    linearInfo.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_left_out));
                    linearDetails.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_left_in));
                    linearCompany.setAnimation(null);
                }
                //if switch to third
                else if(tabId.equalsIgnoreCase(getResources().getString(R.string.tab_details_company))) {
                    linearInfo.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_left_out));
                    linearDetails.setAnimation(null);
                    linearCompany.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_left_in));
                }
            }
            //if the second tab is selected
            else if(currentSelection.equalsIgnoreCase(getResources().getString(R.string.tab_details_details))) {
                //if we switch to first
                if(tabId.equalsIgnoreCase(getResources().getString(R.string.tab_details_info))) {
                    linearInfo.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_right_in));
                    linearDetails.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_right_out));
                    linearCompany.setAnimation(null);
                }
                //if switch to third
                else if(tabId.equalsIgnoreCase(getResources().getString(R.string.tab_details_company))) {
                    linearInfo.setAnimation(null);
                    linearDetails.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_left_out));
                    linearCompany.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_left_in));
                }
            }
            //if the third tab is selected
            else if(currentSelection.equalsIgnoreCase(getResources().getString(R.string.tab_details_company))) {
                //if we switch to first
                if(tabId.equalsIgnoreCase(getResources().getString(R.string.tab_details_info))) {
                    linearInfo.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_right_in));
                    linearDetails.setAnimation(null);
                    linearCompany.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_right_out));
                }
                //if switch to second
                else if(tabId.equalsIgnoreCase(getResources().getString(R.string.tab_details_details))) {
                    linearInfo.setAnimation(null);
                    linearDetails.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_right_in));
                    linearCompany.setAnimation(AnimationUtils.loadAnimation(getApplicationContext(), R.anim.push_right_out));
                }
            }

            currentSelection = tabId;
        }
    }; 
```

您还需要通过使用自定义手势检测器覆盖 onTouchListener 来捕捉手势（并且在确定手势是否为滑动动作时可能会考虑不同的屏幕密度）

对不起，答案很长，但我希望它有所帮助:)

# deployment - 部署不适用于 Sencha SDK 工具

> ID：10009159
> 
> 赞同：1
> 
> 时间：2012-04-04T10:17:41.897
> 
> 标签：deployment, extjs

[由于似乎没有人在Sencha 论坛](http://www.sencha.com/forum/showthread.php?191339-About-Sencha-SDK-Tools&p=771902)上找到我的问题的解决方案，所以我在这里问我的问题......

我正确地将 Sencha SDK 安装到 C:\Program Files\SenchaSDKTools-2.0.0-Beta

我输入了以下命令：

```
sencha create jsb -a index.html -p app.jsb3 
```

我第一次得到：

```
Error: Can not find ..\command\sencha.js 
```

我又试了一次，现在我没有任何消息，但没有任何反应，没有创建 jsb3 文件......

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:05:56.427

我也在试图弄清楚整个 Sencha 的安装，而且看起来 beta 工具在 Windows 上不能很好地工作。您需要部署到 C:\Program Files 而**不是**C:\Program Files\SenchaSDKTools-2.0.0-Beta

我注意到，当我将它安装到默认文件夹时，我得到了诸如*创建*之类的选项，并且我还得到了您在某一时刻遇到的错误，这表明安装时路径不正确。当您将它安装到正确的路径（不是说明中的路径）时，您会得到一组不同的选项。Create 不再存在，但 generate 存在。

# java - unicode中的字符串替换不起作用

> ID：10009165
> 
> 赞同：-2
> 
> 时间：2012-04-04T10:18:05.773
> 
> 标签：java

执行 mysql 查询时，我得到了以下 unicode 字符串。

**\u30ad\u30e3\u30f3\u30bb\u30eb**

我尝试打印上面没有正确更改为 utf 字符的字符串。所以，我尝试将“\”替换为“\”。

> **str.replace("\\\\","\\");** //没有正确替换

替换功能在我的场景中不起作用。

在我的情况下，如何将“\\”替换为“\”。

对不起我的英语不好 ！！

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:28:32.147

字符串是不可变的，一旦创建就无法更改。您需要将从`replace()`方法返回的对象分配给新的字符串引用（或使用相同的引用）：

```
str = str.replace("\\\\","\\"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:19:29.110

`String`像这样的文字`"\u30ad\u30e3\u30f3\u30bb\u30eb"`被 java 编译器转换为 unicode 字符串（“キャンセル”）。这意味着它仅适用于您放入源文件中的字符串。

如果您`\u30ad\u30e3\u30f3\u30bb\u30eb`从数据库中收到 string: ，则将`\`其视为任何其他字符。如果你删除它，你只会得到：`u30adu30e3u30f3u30bbu30eb`.

相反，您应该编写一种方法（或使用现有的方法），该方法将`\u????`在 a 中找到所有转义序列 ( )`String`并将它们转换为真实字符。例如，请参见[此处](http://www.koders.com/java/fidD26ED81BEBE41932C405904AD53AEE8459BB8509.aspx#L182)。

# c# - 项目编译但似乎没有构建

> ID：10009167
> 
> 赞同：0
> 
> 时间：2012-04-04T10:18:12.307
> 
> 标签：c#, visual-studio, visual-studio-2010, build

我有几个项目的解决方案。项目相互引用，项目 A 使用项目 B，依此类推（当然没有循环引用）

问题是当我对其中一个项目进行更改并点击`F5`调试和运行我的主 Web 应用程序时，它没有构建并且应用程序运行。例如，如果我有一个断点，断点会显示一条消息

“当前不会命中断点。来源与原始版本不同”

要解决这个问题，我必须右键单击项目，选择“清理”，对解决方案执行相同操作，重新构建项目，然后重新构建解决方案。我的意思是，这很麻烦。

有谁知道为什么会发生这种情况以及如何防止它？如何使项目完全构建`F5`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:26:07.410

您是否检查了构建“配置管理器”以确保项目被“勾选”以进行构建？

![配置管理器](../Images/033528721dcc6d6cb624f2f5e30a0633.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:21:33.680

检查您的项目是否设置为针对您正在使用的配置构建。

右键单击解决方案并转到配置管理器。确保在“构建”列下选择了您的项目。

# javascript - 包含多个文件的 Javascript 项目

> ID：10009171
> 
> 赞同：2
> 
> 时间：2012-04-04T10:18:27.233
> 
> 标签：javascript, ide

在多个文件上管理 javascript 项目的最佳 IDE/编辑器/其他任何东西是什么？我的意思是，有没有办法在多个文件上开发项目，然后将项目“构建”成一个缩小的文件？我已经看到这是在网上的许多项目中完成的。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:06:34.363

我认为（目前）还没有任何一体化解决方案。您需要结合几个工具：

*   IDE：WebStorm、Aptana 甚至 Notepad++
*   交叉编译器：Sass、CoffeeScript 等
*   压缩器：Google Closure Compiler、UglifyJS 或 YUICompressor
*   构建工具触发构建过程，管理文件夹结构等。
    就我个人而言，我使用大量的 Bash 脚本，但我见过人们使用 Maven 或 Ant
*   还有带有集成构建工具的框架，支持开发/生产模式，例如 qooxdoo、Sencha、...

如果您从事的是中小型项目，则手动运行工具可能是成本效益比方面的最佳解决方案，因为自动化需要大量工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:36:38.370

有很多方法可以做到这一点。在我的例子中，我们使用带有 uglify lib 的 nodejs 和 requirejs。[你可以在这里阅读它](http://requirejs.org/docs/node.html)

它使我能够使用一个 bash 脚本部署缩小文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:37:33.050

多文件项目的最佳编辑器是 JetBrains 的 WebStorm ！！！您可以使用在线资源来合并文件。[http://jscompress.com/](http://jscompress.com/)是一个很好的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T10:07:34.990

[您可以使用Web Essentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)在 Visual Studio 2012 中轻松完成此操作

* * *

可以轻松编辑捆绑包，并且每次保存其中一个捆绑文件时，它们都会输出组合和组合的缩小文件。

![在此处输入图像描述](../Images/bccd0c243d5957f0bd0b51ba813e2308.png)

# iphone - NSInternalInconsistencyException 将行添加到 UITableView

> ID：10009172
> 
> 赞同：4
> 
> 时间：2012-04-04T10:18:30.877
> 
> 标签：iphone, ios, ipad

我在向 UITableView 添加新行时遇到问题。我在stackoverflow上阅读了类似的问题，用谷歌搜索了它，......并没有帮助我。

我有空的 NSMutableArray *dataForList 和 UITableView 的数据。单击屏幕后，我想添加新行。此错误显示：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“尝试将第 0 行插入第 0 节，但更新后第 0 节中只有 0 行”

代码：

```
NSArray *insertIndexPaths = [NSArray arrayWithObject: 
                             [NSIndexPath indexPathForRow:
                              [self.dataForList count] // is zero now
                              inSection:0]];

[self.dataForList addObject:newRow];
// [self.dataForList count] is 1 now

[self.unsignedTableView beginUpdates];
[self.unsignedTableView insertRowsAtIndexPaths:insertIndexPaths withRowAnimation:UITableViewRowAnimationNone];
[self.unsignedTableView endUpdates]; // on this line error ocours 
```

我错过了什么？

所有 UITableView 方法

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *) indexPath {}

- (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}

- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger) section {
return [self.mainController.dataForList count];
}

- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *) indexPath{
return 38.0f;
}

- (UITableViewCell *) tableView: (UITableView *) tableView
      cellForRowAtIndexPath: (NSIndexPath *) indexPath {
// call render method in view, it works fain
return [self.signUpToTestView renderUnsignedCell:tableView cellForRowAtIndexPath:indexPath];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T05:39:40.450

确保您创建的表视图具有委托和数据源集。

例如：

```
 [self.unsignedTableView setDelegate:self];
 [self.unsignedTableView setDatasource:self]; 
```

我认为这次崩溃的原因是数据源和委托方法没有被调用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T10:23:50.963

`insertRowsAtIndexPaths`确保添加行时，您的[UITableViewDataSource](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)方法还会返回添加的单元格的新数量和新对象。

检查`tableView:numberOfRowsInSection:`和`tableView:cellForRowAtIndexPath:`。

否则你会得到一个`NSInternalInconsistencyException`例外。

如果您尝试使用 insertRowsAtIndexPaths 添加所有单元格，请停止您的操作并阅读[此](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451)内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T10:24:33.727

您是否在单击后根据您的数组更改`numberOfSection`and ？`numberOfRowsInSection`

```
return [arr count]; 
```

并尝试重新加载表格

```
 [table reloadData]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T19:55:30.040

我遇到了同样的问题，但意识到将数据添加到列表中更简单，然后重新加载表，如下所示：

```
 [self.dataForList addObject:newRow];
    [self.unsignedTableView reloadData]; 
```

然后，委托方法接管以返回正确的行数：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        // Return the number of rows in the section.
        return [self.unsignedTableView count];
     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T12:56:20.417

您的问题的原因是您在两个不同的点更改数据源和用户界面。您对数据源的更新和插入调用都必须在同一个开始/结束块中。

因此，只需将 beginUpdates 调用移到 addObject 调用前面即可解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T10:28:27.680

这是一个想法

在事件调用时（当数组的内容发生变化时）将布尔值设置为 true [tableView reloadData]; 一个 in tableView:numberOfRowsInSection: 重置数字。

确保也相应地更改 tableView:cellForRowAtIndexPath:

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T11:27:49.107

```
if (indexpath) {
      [self.tableView beginUpdates];
      [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexpath] withRowAnimation:UITableViewRowAnimationMiddle];
      [self.tableView endUpdates];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T07:03:42.120

我遇到了同样的问题并解决了我的问题，我没有初始化填充我的表的 NSMutableArray。我做的一切都是正确的，但忘记了重要的一点。

```
myArrayName = [[[NSMutableArray alloc] init]]; 
```

您的情况可能会有所不同，我建议您在尝试修改代码之前退一步查看您的代码。几个月后，但希望这会有所帮助！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-20T12:52:04.383

一个老问题的答案..

```
NSArray *insertIndexPaths = [NSArray arrayWithObject: 
                             [NSIndexPath indexPathForRow:
                              [self.dataForList count] // is zero now
                              inSection:0]];

[self.dataForList addObject:newRow];
// [self.dataForList count] is 1 now 
```

交换这些，它应该可以工作：

```
[self.dataForList addObject:newRow];
// [self.dataForList count] is 1 now

NSArray *insertIndexPaths = [NSArray arrayWithObject: 
                             [NSIndexPath indexPathForRow:
                              [self.dataForList count] // is also 1 now, hooray
                              inSection:0]]; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-14T20:04:22.337

当我遇到这个问题时，让我印象深刻的是我的 ReuseIdentifiers 不一样。对我来说，唯一的区别是大写字母。不要认为你的问题一开始是非常复杂的。仔细检查所有简单的事情。

如果您使用 Storyboard，您应该从界面构建器中的单元格属性中复制字符串并将其粘贴到 tableView 代码中的 ReuseIdentifier 中。

# mysql - MySQL - 组合 2 个相似的表

> ID：10009173
> 
> 赞同：0
> 
> 时间：2012-04-04T10:18:40.010
> 
> 标签：mysql

我有以下 2 个表，我想获取 table2 的内容并将其添加到 table1 的末尾（例如：将 2 个表合并为 1 个）。希望 ID 继续自动递增。

表格1：

```
 CREATE TABLE IF NOT EXISTS `world` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `country` varchar(2) DEFAULT NULL,
   `region1` varchar(60) DEFAULT NULL,
   `region2` varchar(60) DEFAULT NULL,
   `region3` varchar(60) DEFAULT NULL,
   `zip` varchar(10) DEFAULT NULL,
   `city` varchar(60) DEFAULT NULL,
   `latitude` double DEFAULT NULL,
   `longitude` double DEFAULT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5871647 ; 
```

表2：

```
 CREATE TABLE IF NOT EXISTS `extra` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `country` varchar(2) DEFAULT NULL,
   `city` varchar(60) DEFAULT NULL,
   `latitude` double DEFAULT NULL,
   `longitude` double DEFAULT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=687421 ; 
```

玩过以下游戏：

```
INSERT INTO world (country, city, latitude, longitude) 
VALUES SELECT country, city, latitude, longitude FROM extra; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:26:33.883

试试这个

```
INSERT INTO world (country, city, latitude, longitude) 
    SELECT country, city, latitude, longitude FROM extra; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:28:43.507

尝试不使用以下值。[检查这个](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

```
INSERT INTO world (country, city, latitude, longitude) 
SELECT country, city, latitude, longitude FROM extra; 
```

# php - 加载具有相互关联的下拉列表的要编辑的表单

> ID：10009174
> 
> 赞同：1
> 
> 时间：2012-04-04T10:18:43.477
> 
> 标签：php, jquery, ajax, drop-down-menu

所以我的问题如下：很容易获取有关某些记录的数据并以表格形式提供。

问题是：它的一部分是一个位置（大陆、国家、城市），由 3 个相互关联的下拉列表表示。

我得到的是浏览器停止响应，我需要一些想法来提出更好的解决方案。

这是一个代码示例，其中包含关于它停止位置的注释，所以也许有人可以给我一个提示：

```
 // To load the drop-down lists I use similar ajax code as the one shown below in the edit case

 function processRow(command, id) {
    switch(command){

    case 'Delete': {    
        $("#deleteId").val(id);
        $('#deleteEventModal').reveal();
    }
    break;
    case 'Edit': {
        /* Fetch Data to Fill up the form */
        $.ajax({
            type: "GET",
            url: "scripts/fetchEventById.php?eventId=" + encodeURIComponent(id),
            dataType: "json",
            success: function(response){
                    /* On Successful Posting to server side */
                                // THIS DROP DOWN LOADS AND SETS DB VAL OK
                    loadContinents("#editEventContinents");
                    $("#editEventContinents").val(response.eventData.continentId);           

                     // FROM THIS MOMENT ON IT WILL STALL
                     // last instruction sets continent drop-down with proper value BUT
                     // when fetching the countries for that continent (below)
                     // the continent drop-down value comes empty as if nothing 
                     // was selected
                     // but it was, I visually confirmed that 
                     // after setting it with val() above
                    loadCountries("#editEventContinents", "#editEventCountries", "#editEventCities");
                    $("#editEventCountries").val(response.eventData.countryId);

                   loadCities("#editEventCountries", "#editEventCities");
                   $("#editEventCities").val(response.eventData.cityId);

                   $("#editEventStartDate").val(response.eventData.startDate);
                   $("#editEventEndDate").val(response.eventData.endDate);
                   $("#editEventUserName").val(response.eventData.userName);
                   $("#editEventName").val(response.eventData.eventName);
                   $("#editEventDetails").val(response.eventData.details);
            },
            error: function(jqXHR, textStatus, errorThrown){            
                /* log the error to the console */
                console.log(
                    "The following error occured: " + 
                    textStatus, errorThrown
                );
            }
        });

        // Get the overlay with the form for editing to pop up                              
        $('#editEventModal').reveal();
    }
    break;
    default:
        // oops, something wrong happened
    break;
}
return false;
}

// Here is the load continents function
function loadContinents(continentObj) {     
// fetch continent data

$.ajax({
    type: "GET",
    url: "scripts/fetchContinents.php",
    dataType: "json",
    success: function(data){
        /* On Successful Posting to server side */

        // Add fetched options to the select object responsible for holding the continents list
        $(continentObj).empty(); //clear current available selections
        if( data == "" ){
            $(continentObj).append("<option value=\"\">No continents found</option>");
        }
        else{
            for( i = 0; i < data.id.length; i++ ){
                $(continentObj).append("<option value=\"" + data.id[i]  + "\">" + data.name[i]  + "</option>");
            }
        }

    },
    error: function(jqXHR, textStatus, errorThrown){
        /* log the error to the console */
        console.log(
            "The following error occured: " + 
            textStatus, errorThrown
        );

        $(countryObj).append("<option selected value=\"\">Select Continent</option>");

        $("#searchEventError").fadeOut(200);
        $("#searchEventError").fadeIn(200).html("<div class=\"alert-box error\">Something went wrong with the server request, please try again later</div>");
    }
});

return false;
}

// Load Countries
function loadCountries(continentObj, countryObj, cityObj) {
var continentOption = $(continentObj).val();

// clear/reset countries and cities selections
$(countryObj).empty();
$(cityObj).empty().append("<option selected value=\"-1\">Please Select Country First</option>");

$.ajax({
    type: "GET",
    url: "scripts/fetchCountries.php?continent=" + encodeURIComponent(continentOption),
    dataType: "json",
    success: function(data){
        /* On Successful Posting to server side */

        // Add fetched options to the select object responsible for holding the countries list
        if( data == "" ){
            $(countryObj).append("<option value=\"0\">No countries found</option>");
        }
        else{
            for( i = 0; i < data.id.length; i++ ){
                $(countryObj).append("<option value=\"" + data.id[i]  + "\">" + data.name[i]  + "</option>");
            }
        }

    },
    error: function(jqXHR, textStatus, errorThrown){
        /* log the error to the console */
        console.log(
            "The following error occured: " + 
            textStatus, errorThrown
        );

        $(countryObj).append("<option selected value=\"-1\">Please Select Continent First</option>");

        $("#searchEventError").fadeOut(200);
        $("#searchEventError").fadeIn(200).html("<div class=\"alert-box error\">Something went wrong with the server request, please try again later</div>");

    }
});

return false;
}

// Load Cities
function loadCities(countryObj, cityObj) {
var countryOption = $(countryObj).val();

// clear/reset cities selections
$(cityObj).empty();

$.ajax({
    type: "GET",
    url: "scripts/fetchCities.php?country=" + encodeURIComponent(countryOption),
    dataType: "json",
    success: function(data){
        /* On Successful Posting to server side */

        // Add fetched options to the select object responsible for holding the cities list     
        if( data == "" ){
            $(cityObj).append("<option value=\"0\">No cities found</option>");
        }
        else{
            for( i = 0; i < data.id.length; i++ ){
                $(cityObj).append("<option value=\"" + data.id[i]  + "\">" + data.name[i]  + "</option>");
            }
        }

    },
    error: function(jqXHR, textStatus, errorThrown){            
        /* log the error to the console */
        console.log(
            "The following error occured: " + 
            textStatus, errorThrown
        );

        $(cityObj).append("<option selected value=\"-1\">Please Select Country First</option>");

        $("#searchEventError").fadeOut(200);
        $("#searchEventError").fadeIn(200).html("<div class=\"alert-box error\">Something went wrong with the server request, please try again later</div>");
    }
});

return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:13:00.280

您`loadCountries`包含在 中`processRow`，因此事件值会返回并被设置，但随后 loadCountries 会进入并再次覆盖该值。

我建议根据初始负载中的选定值提取您的国家和城市数据，这样您就不必等待多次。获取您的活动详细信息以包括所选大陆的所有国家/地区、所选国家/地区的所有城市，并在您的活动详细信息 JSON 中输出。

您可以尝试的另一件事是嵌套您的 AJAX 调用，以便每个调用都需要像这样等待下一个（我不建议这样做）：

```
function processRow(command, id) {
    console.log('Starting the processing of row #' +id);
    switch(command){

        case 'Delete': {    
            $("#deleteId").val(id);
            $('#deleteEventModal').dialog( "open" );
        }
        break;
        case 'Edit': {
            /* Fetch Data to Fill up the form */    

            $.ajax({
                type: "GET",
                url: "stackAjax.php?Action=Event&eventId=" + encodeURIComponent(id),
                dataType: "json",
                success: function(response){
                    $("#editEventStartDate").val(response.eventData.startDate);
                    $("#editEventEndDate").val(response.eventData.endDate);
                    $("#editEventUserName").val(response.eventData.userName);
                    $("#editEventName").val(response.eventData.eventName);
                    $("#editEventDetails").val(response.eventData.details);
                    $("#editEventContinents").val(response.eventData.continentId);

                    /* On Successful Posting to server side */
                    window.currentContinent = response.eventData.continentId;
                    window.currentCountry = response.eventData.countryId;
                    window.currentCity = response.eventData.cityId;

                    var countryObj = $("#editEventCountries"),
                    cityObj = $("#editEventCities");

                    $(countryObj).empty();
                    $(cityObj).empty().append("<option selected value=\"-1\">Please Select Country First</option>");

                    $.ajax({
                        type: "GET",
                        url: "stackAjax.php?Action=Countries&continent=" + encodeURIComponent(window.currentContinent),
                        dataType: "json",
                        success: function(countryData){
                            /* On Successful Posting to server side */

                            // Add fetched options to the select object responsible for holding the countries list
                            if( countryData == "" ){
                                $(countryObj).append("<option value=\"0\">No countries found</option>");
                            }
                            else{
                                for( i = 0; i < countryData.id.length; i++ ){
                                    $(countryObj).append("<option value=\"" + countryData.id[i]  + "\">" + countryData.name[i]  + "</option>");
                                }
                            }

                            $(cityObj).empty();

                            console.log('about to set the country');        
                            $("#editEventCountries").val(response.eventData.countryId);
                            $.ajax({
                                type: "GET",
                                url: "stackAjax.php?Action=Cities&country=" + encodeURIComponent(window.currentCountry),
                                dataType: "json",
                                success: function(cityData){
                                    /* On Successful Posting to server side */

                                    // Add fetched options to the select object responsible for holding the cities list     
                                    if( cityData == "" ){
                                        $(cityObj).append("<option value=\"0\">No cities found</option>");
                                    }
                                    else{
                                        for( i = 0; i < cityData.id.length; i++ ){
                                            $(cityObj).append("<option value=\"" + cityData.id[i]  + "\">" + cityData.name[i]  + "</option>");
                                        }
                                    }

                                console.log('about to set the city');       
                                $("#editEventCities").val(response.eventData.cityId);
                                },
                                error: function(jqXHR, textStatus, errorThrown){            
                                    /* log the error to the console */
                                    console.log(
                                        "The following error occured: " + 
                                        textStatus, errorThrown
                                    );

                                    $(cityObj).append("<option selected value=\"-1\">Please Select Country First</option>");

                                    $("#searchEventError").fadeOut(200);
                                    $("#searchEventError").fadeIn(200).html("<div class=\"alert-box error\">Something went wrong with the server request, please try again later</div>");
                                }
                            });
                        },
                        error: function(jqXHR, textStatus, errorThrown){
                            /* log the error to the console */
                            console.log(
                                "The following error occured: " + 
                                textStatus, errorThrown
                            );

                            $(countryObj).append("<option selected value=\"-1\">Please Select Continent First</option>");

                            $("#searchEventError").fadeOut(200);
                            $("#searchEventError").fadeIn(200).html("<div class=\"alert-box error\">Something went wrong with the server request, please try again later</div>");

                        }
                    });

                    //console.log('A: Country DB: ' + response.eventData.countryId);
                    //$("#editEventCountries").change();

                    //console.log('A: Selected Country: ' + $("#editEventCountries").val());

                    //console.log('A: Selected City: ' + $("#editEventCities").val());

                    //$('#editEventModal').dialog( "open" );
                },
                error: function(jqXHR, textStatus, errorThrown){            
                    /* log the error to the console */
                    console.log(
                        "The following error occured: " + 
                        textStatus, errorThrown
                    );
                },
                complete: function(){

                }
            });
        }
        break;
        default:
            alert("Don't know what to do but id is "+id);
        break;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T14:48:53.003

我的意思是：你写的和我写的之间唯一实际的区别似乎是明确地调用了从一个盒子到另一个盒子的变化的触发器。

另一方面，我也有这样的事情：

```
 $("#editEventContinents").change(function(){ // continents on change
    return loadCountries("#editEventContinents", "#editEventCountries", "#editEventCities");
});

$("#editEventCountries").change(function(){ // countries on change
    return loadCities("#editEventCountries", "#editEventCities");
}); 
```

这意味着，它的作用几乎相同，对吧？

我的问题实际上是在处理表格行以对其进行编辑并因此进行更新时。这就是下拉菜单失败的地方。

使用类似的东西

```
 loadContinents("#editEventContinents");
 $("#editEventContinents").val(response.eventData.continentId); 
```

不会触发大陆下拉框的更改事件。如果我明确地这样做，结果也不好，加载国家仍然无法识别所选对象。这意味着查询字符串将变为空到后端，然后所有的混乱都会发生。

# git - 如何正确使用 git 和分支

> ID：10009175
> 
> 赞同：37
> 
> 时间：2012-04-04T10:18:44.923
> 
> 标签：git, version-control, branch

我对使用 GIT 进行版本控制有点陌生。我阅读了本[指南并遵循](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide)[此处](http://nvie.com/posts/a-successful-git-branching-model/)图表中显示的基本方法。尽管如此，我还是对如何使用 git 分支将新功能的开发与现有代码分开存在一些疑问。

这是一个例子。假设一开始，我的存储库包含以下两个主要分支：

*   Master 分支（包含发布版本）
*   开发分支（包含新的修复或功能以将它们与现有项目功能分开）

当我需要开发新功能或模块时，我会从 Develop 创建分支并在那里启动新的代码项目。例如，我创建了三个新分支来添加与 、 和 相关`Sun`的`Star`功能`SuperNova`。现在，我的存储库包含五个分支：

*   主分支：发布 1.0.0
*   开发分支：1.0.0 发布后的修改
*   NewModule_Sun 分支：将 Sun 添加到项目（从 Develop 分支创建）
*   NewModule_Star 分支：将 Star 添加到项目（从 Develop 分支创建）
*   NewModule_SuperNova 分支：将 SuperNova 添加到项目（从开发分支创建）

对于 1.0.1 版，我想包含`Sun`and`Star`模块，但不包含`SuperNova`. 因此，我将它们与 Develop 合并，然后将 Develop 与 Release 合并：

1.  合并 NewModule_Sun 到 Develop
2.  将 NewModule_Star 合并到 Develop
3.  将 Develop 合并为 Master（1.0.1 版）

Develop 分支需要永久保留，但不再需要`Sun`and分支。`Star`他们被删除：

1.  删除 NewModule_Sun 分支
2.  删除 NewModule_Star 分支

在这些更改之后，我的存储库包含以下三个分支：

*   主分支：发布 1.0.1
*   开发分支：1.0.1 发布后的修改
*   NewModule_SuperNova 分支：1.0.0 版后的修改（在没有与 Star/Sun 分支合并时从 Develop 创建）

==

首先，我是否正确使用了 git 分支？

其次，我回顾了最终开发分支的历史，似乎丢失了一些关于`NewModules`. 这正常吗？而且，是否可以将所有历史信息传输到开发分支？

谢谢！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-04T14:49:18.487

> 我在正确使用 git 吗？

是的，您描述的工作流程几乎是标准工作流程。你创建一些分支，你在它上面工作，当你完成后，你合并它并删除不需要的分支（除非你要继续在那个分支上开发）。

> 删除分支后，查看历史记录，在我看来，我丢失了有关分支本身的所有信息……这正常吗？

是的，这很正常。

> 是否可以删除分支但不破坏历史信息？

不知道你在这里的意思。只要您在删除之前合并了分支，历史仍然存在。您刚刚将其合并到另一个分支中，并且可以在该分支上看到历史记录。如果这是您要求的，则无法知道何时删除了分支。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-04T10:22:09.310

我建议您阅读[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)它定义了 git 分支的良好模式。

我发现我将开发分支保留了一段时间，直到时间使您在这些修订中所做的更改历史不值得保留（大约 6 个月），然后将其删除。

# sql-server - ValidateRequest 错误还是 SQL Server 错误？

> ID：10009177
> 
> 赞同：3
> 
> 时间：2012-04-04T10:18:54.537
> 
> 标签：sql-server, validation, xss

我正在读这篇[文章](http://software-security.sans.org/blog/2011/07/22/bypassing-validaterequest-in-asp-net)。它说 ：

> 该字符以值 %uff1c 表示。如果将此值传递给 SQL 数据库中的 varchar 字段，它将被转换为真正的 < 字符。我还没有在 nvarchar 字段上看到这项工作

好吧，我认为这是一个 SQL Server 错误，而不是 ValidateRequest hack！如果我写`%uff1c`，SQL Server 必须将它保存为`%uff1c`. 或者，至少，它应该`%uff1c`由管理员选择的字符集“再次”编码。

我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:51:45.910

It's not a bug, but a feature (but you cannot use it).

The point of the article is: if you want to post a string containing a '<', convert each < to a ＜ (Unicode codepoint FF1C) to avoid a validation error.

SQL Server receives a Unicode character string containing ＜ and tries to process it. If the data type of a table column or procedure parameter was Unicode-enabled (NCHAR, NVARCHAR, 2 bytes per character), no conversion would take place, and SQL Server stores the original value.

If the value is passed to a VARCHAR (1 byte per character) column or variable, however, the character ＜ (2-byte codepoint) is transformed to a <. Extending AakashM's code to illustrate:

```
DECLARE @nv nvarchar, @v varchar
SET @nv = N'＜'
SET @v = '＜'
SELECT @nv, @v, CONVERT(varchar, @nv)

＜   <   < 
```

But, since this is the 21st century, and databases should be able to support every standardized language and symbol and character, there are very few scenarios left that justify using VARCHAR data.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T15:22:34.363

SQL Server 不能在`varchar`字段中存储＜。在这种情况下你希望发生什么：

```
DECLARE @v varchar(1)

SET @v = '＜'

SELECT @v 
```

（请注意，< 不是通常的左尖括号字符，而是带有 codepoint 的 Unicode 字符`FF1C`）。

上面的结果将是`<`（通常的左尖括号字符）。如果你想说这是一个错误，你应该说你的*预期*结果是什么。

# mysql - SQl 脚本文件需要在 Mysql 中执行

> ID：10009179
> 
> 赞同：0
> 
> 时间：2012-04-04T10:19:09.270
> 
> 标签：mysql, mysqldump

我在 D:/xxx/User.sql 文件中有 .sql 文件，在 C 盘中有 mysql home。现在我想在 Pr Schema 中导入这个 .sql 文件直到现在我尝试的是`msql -u root -p<d:/xxx/User.sql file`。我试图通过在链接上关注一个以这种方式转储。任何 1 请让我知道在 mysql 中执行 sql 文件的确切过程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:44:39.097

连接到您的 mysql 实例并选择要执行此文件的架构。使用以下命令：

```
source d:/xxx/User.sql; 
```

另请参阅[mysql 文档 - 批处理命令](http://dev.mysql.com/doc/refman/5.0/en/batch-commands.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:48:19.457

```
msql -u root -p<d:/xxx/User.sql file 
```

好吧，这有几个错误。

命令`mysql`不是`msql`。

`-p`和之间需要有一个空格`<d:/xxx/User.sql file`

`file`这个命令的结尾是什么？这不应该在那里。

请注意，当您实际指定密码时，-p 后不应有空格。

您还没有指定一个数据库，您的脚本应该在其中运行。

正确的方法应该是

```
mysql -u root -p yourDatabaseName < d:/xxx/User.sql 
```

Flo Doe 的回答也很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:24:08.733

您可以通过 phpmyadmin 导入 .sql 文件，然后将其导入您必须导入的数据库，然后在右侧上方的列名导入是否选择确切位置并将其导入

# mvvm - 将 Prism 与 MVVM 结合使用时的 WindowState 更改

> ID：10009180
> 
> 赞同：0
> 
> 时间：2012-04-04T10:19:11.833
> 
> 标签：mvvm, prism

类似于问题中提到的场景：[Binding the "WindowState" property of a window in WPF using MVVM](https://stackoverflow.com/questions/4671368/binding-the-windowstate-property-of-a-window-in-wpf-using-mvvm)

使用 Prism（视图、模块、shell）我有一个 Shell.xaml（属于 WPFProject），它按顺序加载 2 个视图：

1.  来自 SecurityModule（另一个类库项目）的 LoginView.xaml（usercontrol）
2.  ProductModule（另一个类库项目）中的 MainScreenView.xaml（usercontrol） - 单击 LoginView.xaml 上的“登录”按钮

LoginView.xaml 较小，例如 width=300、height=300。但是 MainScreenView.xaml 需要以最大化尺寸显示。

现在要在 shell 上显示 MainScreenView.xaml，需要最大化窗口状态。

如何公开 Shell WindowState 属性，以便在使用 Prism 和 MVVM 在 shell 上加载视图时进行更改？

请参阅链接中的示例 Prism MVVM 示例：[http ://weblogs.asp.net/sujithkjagini/archive/2011/02/02/building-applications-with-wpf-and-prism-aka-cag.aspx](http://weblogs.asp.net/sujithkjagini/archive/2011/02/02/building-applications-with-wpf-and-prism-aka-cag.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:29:35.550

一个简单的解决方案是使用 Prism 事件。Prism 包含一个允许模块之间通信的 EventAggregator。您可以在帖子中链接的页面末尾找到一个示例，但可能不太清楚。此其他链接可能会帮助您[链接](http://msdn.microsoft.com/en-us/library/ff921173%28v=PandP.40%29.aspx)

# string - TCL 字符串前置

> ID：10009181
> 
> 赞同：2
> 
> 时间：2012-04-04T10:19:12.260
> 
> 标签：string, tcl, prepend

只是一个简单但经常需要的操作 - 如何将字符串添加到变量：

```
set s "world!!!"
prepend s "Hello " #how to accomplish this effectively?
puts $s
#should print "Hello world!!!" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:46:28.133

你可以写一个程序`prepend`：

```
proc prepend {s_var txt} {
  upvar 1 $s_var s
  set s "${txt}${s}"
} 
```

这正是你想要的。但我认为通常写起来更简单：

```
set s "Hello ${s}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T10:52:50.763

自从我使用 TCL 已经有一段时间了，但是你有没有试过这个：

```
set s "world!"
set s "hello $s"
puts $s 
```

# javascript - javascript拼写检查

> ID：10009183
> 
> 赞同：1
> 
> 时间：2012-04-04T10:19:14.787
> 
> 标签：javascript, spell-checking

我需要一个快速的 javascript 拼写检查解决方案。尽管所有的浏览器都在拼写错误的单词下划线。我需要相同但自己手动操作。实际上我的应用程序也在 mac 上运行，并且拼写检查在那里不起作用。

请尽快在这方面帮助我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T10:22:39.023

试试这个 [jquery-spellchecker](http://code.google.com/p/jquery-spellchecker/)

这是一个[样本](http://spellchecker.jquery.badsyntax.co.uk/example.html)

# javascript - Jquery：灯箱自动关闭:(

> ID：10009188
> 
> 赞同：0
> 
> 时间：2012-04-04T10:19:54.547
> 
> 标签：javascript, jquery-ui, jquery

灯箱在几秒钟内自动关闭。请问你能帮帮我吗

```
$(document).ready(function(){
    $('.lightbox').click(function(){
        $('.backdrop, .box').animate({'opacity':'.50'}, 300, 'linear');
        $('.box').animate({'opacity':'1.00'}, 300, 'linear');
        $('.backdrop, .box').css('display', 'block');
    });

    $('.close').click(function(){
        close_box();
    });

    $('.backdrop').click(function(){
        close_box();
    });

});

function close_box()
{
    $('.backdrop, .box').animate({'opacity':'0'}, 300, 'linear', function(){
        $('.backdrop, .box').css('display', 'none');
    });
} 
```

CSS

```
 .backdrop
    {
        position:absolute;
        top:0px;
        left:0px;
        width:100%;
        height:100%;
        background:#000;
        opacity: .0;
        filter:alpha(opacity=0);
        z-index:50;
        display:none;
    }

    .box
    {
        position:absolute;
        top:20%;
        left:30%;
        width:500px;
        height:300px;
        background:#ffffff;
        z-index:51;
        padding:10px;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        -moz-box-shadow:0px 0px 5px #444444;
        -webkit-box-shadow:0px 0px 5px #444444;
        box-shadow:0px 0px 5px #444444;
        display:none;
    }

    .close
    {
        float:right;
        margin-right:6px;
        cursor:pointer;
    } 
```

HTML

```
 <a href="" class="lightbox">Open Lightbox</a>

 <div class="backdrop">
    <div class="box"><div class="close">x</div>This is the lightbox!!!</div>
 </div> 
```

**[演示](http://jsfiddle.net/sweetmaanu/yx6W3/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T06:33:10.227

当表单重新加载时发生这种情况（回发发生）......通过在代码中添加“return false”来防止它......所以你的代码会像......

```
 $('.lightbox').click(function(){
            $('.backdrop, .box').animate({'opacity':'.50'}, 300, 'linear');
            $('.box').animate({'opacity':'1.00'}, 300, 'linear');
            $('.backdrop, .box').css('display', 'block');
             return false;
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:41:00.843

Tyr 使用此代码 [http://jsfiddle.net/sweetmaanu/yx6W3/](http://jsfiddle.net/sweetmaanu/yx6W3/)

# networking - IPv6 路由查找顺序

> ID：10009189
> 
> 赞同：-1
> 
> 时间：2012-04-04T10:19:55.170
> 
> 标签：networking, ipv6

```
bash-3.00# /usr/sbin/ip -6 route show
default via fdc6:3001:8e20:9ce9::1 dev int0  metric 1024  expires 2133437sec mtu 1500 advmss 1440 metric10 4294967295
unreachable default dev lo  proto none  metric -1  error -101 metric10 255
unreachable default dev lo  proto none  metric -1  error -101 metric10 255
unreachable default dev lo  proto none  metric -1  error -101 metric10 255
fdc6:3001:8e20:b06::/64 dev ext0  metric 256  expires 2132985sec mtu 1500 advmss 1440 metric10 4294967295
fdc6:3001:8e20:9ce9::/64 dev int0  metric 256  expires 2132977sec mtu 1500 advmss 1440 metric10 4294967295
fe80::/64 dev int0  metric 256  expires 2132977sec mtu 1500 advmss 1440 metric10 4294967295
fe80::/64 dev ext0  metric 256  expires 2132985sec mtu 1500 advmss 1440 metric10 4294967295
default via fe80::226:88ff:fee2:5d01 dev int0  proto kernel  metric 1024  expires 154sec mtu 1500 advmss 1440 metric10 64
default via fe80::226:88ff:fee2:5d02 dev ext0  proto kernel  metric 1024  expires 175sec mtu 1500 advmss 1440 metric10 64
default via fdc6:3001:8e20:b06::1 dev ext0  metric 1024  expires 2133059sec mtu 1500 advmss 1440 metric10 4294967295
unreachable default dev lo  proto none  metric -1  error -101 metric10 255
ff00::/8 dev int0  metric 256  expires 2132977sec mtu 1500 advmss 1440 metric10 4294967295
ff00::/8 dev ext0  metric 256  expires 2132985sec mtu 1500 advmss 1440 metric10 4294967295
unreachable default dev lo  proto none  metric -1  error -101 metric10 255 
```

* * *

在上面的输出中，路由的顺序是否表示查找路由的顺序？或者“hoplimit”（最后一列）是否会影响查找的顺序？“hoplimit”和“metric”有什么区别，两者中的哪一个影响查找顺序？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:28:59.897

1.  首先通过最长匹配查找路线。因此，如果有 /64 路由、/48 路由和默认路由（即 /0）都与数据包的目的地匹配，则将使用 /64 路由，而忽略其他路由。

    示例：给定目的地**fdc6:3001:8e20:9ce9:1:2:3:4**和以下路由：

    ```
    default via fdc6:3001:8e20:9ce9::1 dev int0  metric 1024  expires 2133437sec mtu 1500 advmss 1440 metric10 4294967295
    fdc6:3001:8e20:9ce9::/64 dev int0  metric 256  expires 2132977sec mtu 1500 advmss 1440 metric10 4294967295 
    ```

    /64 路线将始终被选中。

    尽管您的评论另有暗示。你在评论中描述的不应该发生。请提供有问题的数据包的确切源和目标 IP 地址以及源和目标 MAC 地址，以进一步诊断。

2.  如果有多个到目的地的路由具有相同的前缀长度，则首选具有最佳度量的路由。

    您的路由表中没有任何按度量标准打破联系的示例。您需要具有相同目的地和前缀长度但指标不同的路线。

3.  如果仍然有多个路由，则会在每个可用路径上进行负载平衡。

在路由查找过程中根本不使用 hoplimit。它用于在选择路由后设置本地发起的传出数据包的跳数限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:34:38.473

IPv6 的路由查找与传统 IPv4 没有根本不同。

IP 堆栈将找到与目标 IP 最匹配（即最长前缀）并具有最低度量的路由。

跳数限制不影响路由决策。该指标表示路线的“成本”。它应该根据到目的地的跳数和路由的带宽、延迟、价格等来设置。跳数限制仅用于预先设置 IPv6 头中的跳数限制字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T20:36:59.313

您将看到重定向 ICMP 消息的效果。

说`ip -6 route flush cache`让你的路由再次工作。

说`sysctl -w net.ipv6.conf.all.accept_redirects=0`忽略未来的重定向。

最可能的原因是网关在启动/重启时路由不完整。您可能想告诉该系统不要发送重定向数据包。

# c# - Post Build Events 条件语句偏向于文本文件值

> ID：10009191
> 
> 赞同：2
> 
> 时间：2012-04-04T10:20:20.497
> 
> 标签：c#, asp.net, msbuild

我有一些后期构建事件来使用 ajaxmin 缩小我的 css 和 javascript

```
if $(ConfigurationName) == Debug  $(ProjectDir)..\Tools\ajaxmin.exe -xml $(ProjectDir)Scripts\Combine.xml -js -clobber
if $(ConfigurationName) == Debug $(ProjectDir)..\Tools\ajaxmin.exe 
```

这将我的构建时间从大约 7 或 8 秒增加到大约 12 - 15 秒，（在开发过程中构建项目的那几秒加起来你知道。我已经付出了很多努力来减少这个应用程序的构建时间。）

仅当 combine.xml 中的文件已更改时，我才想运行此任务。

我最初的想法是设置一个文件监视windows服务来将更改写入一个txt文件，

然后检查 post build 命令上的文本文件，

但我不知道如何做到这一点。

有没有办法使用构建后事件检查文本文件中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:59:25.373

您可以使用 PowerShell 脚本作为构建后事件，并检查文件修改日期，例如

```
(Get-Item .\combine.xml).LastWriteTime 
```

然后，仅当`LastWriteTime`部分文件的 大于`LastWriteTime`组合文件的 时，才重新生成文件。

我不知道您是否可以使用常规的构建后脚本来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:06:36.577

你可以试试[FC 命令](http://technet.microsoft.com/en-us/library/bb490904.aspx) 这会返回两个文件的差异。

```
fc file1 file2 
if %ERRORLEVEL%==0
Run your postbuild event here 
```

# blackberry - 黑莓 RichTextField 焦点问题

> ID：10009192
> 
> 赞同：0
> 
> 时间：2012-04-04T10:20:21.903
> 
> 标签：blackberry, focus, richtextbox

我正在使用以下代码进行列表。我已经用于`RichTextField`列表项目。

```
public class ListScreen extends MainScreen {

    private UiApplication application;
    private VerticalFieldManager listManager;

    /**
     * 
     */
    public ListScreen() {
        super(NO_VERTICAL_SCROLL | NO_HORIZONTAL_SCROLL | USE_ALL_HEIGHT
                | USE_ALL_WIDTH);
        // TODO Auto-generated constructor stub

        this.application = UiApplication.getUiApplication();

        LabelField screenHeading = new LabelField("Category",
                FIELD_HCENTER) {
            protected void paint(net.rim.device.api.ui.Graphics g) {
                g.setColor(Color.WHITE);
                super.paint(g);
            }
        };
        final VerticalFieldManager labelMngr = new VerticalFieldManager(USE_ALL_WIDTH);
        labelMngr.setBackground(BackgroundFactory
                .createBitmapBackground(LangValue.labelbg));
        labelMngr.add(screenHeading);
        labelMngr.setPadding(5, 0, 5, 0);
        add(labelMngr);

        try {

            listManager = new VerticalFieldManager(Manager.VERTICAL_SCROLL
                    | Manager.VERTICAL_SCROLLBAR) {

                protected void sublayout(int maxWidth, int maxHeight) {
                    int width = Display.getWidth();
                    int height = Display.getHeight()
                            - labelMngr.getHeight();

                    super.sublayout(width, height);
                    setExtent(width, height);
                }
            };

            listManager.setPadding(5, 0, 5, 0);

            int i=0;
            RichTextField rtf;
            Background background = BackgroundFactory
                    .createSolidBackground(Color.WHITE);
            Border border = BorderFactory.createSimpleBorder(new XYEdges(0, 0,
                    2, 0));

            CategoryHelper categoryHelper = new CategoryHelper();
            final String[][] cetegoryList = categoryHelper.getCategoryList();
            for(; i < cetegoryList.length ; i++) {

                rtf = new RichTextField(cetegoryList[i][1], Field.FOCUSABLE) {
                    protected boolean navigationClick(int status, int time) {

                        fieldChangeNotify(1);

                        return true;
                    }

                    protected boolean touchEvent(
                            net.rim.device.api.ui.TouchEvent message) {
                        if (TouchEvent.CLICK == message.getEvent()) {
                            FieldChangeListener listener = getChangeListener();
                            if (null != listener)
                                listener.fieldChanged(this, 1);
                        }
                        return super.touchEvent(message);
                    }

                };
                rtf.setBackground(Field.VISUAL_STATE_NORMAL, background);
                rtf.setBorder(border);
                rtf.setPadding(1, 2, 1, 3);
                rtf.setCookie(new Category(Integer.parseInt(cetegoryList[i][0]),cetegoryList[i][1]));
                rtf.setChangeListener(new FieldChangeListener() {
                    public void fieldChanged(Field field, int context) {
                        // Dialog.alert("play the video");
                        // System.out.print("play the video");
                        // code for play video
                    }
                });
                listManager.add(rtf);
            }
            if (i == 0) {
                listManager.add(new RichTextField("No word found."));
            }

            add(listManager);

        } catch (Exception e) {
            System.out.println(e.getMessage());
            e.printStackTrace();
        }
    } 
```

}

它适用于模拟器。我可以滚动列表，并可以通过滚动将焦点设置在任何项目上，并且焦点项目获得蓝色标记。但是当我在测试 BB 设备时，该项目已聚焦，但聚焦状态不可见且颜色不变，这意味着用户无法识别哪个是聚焦的。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:46:47.080

I have added the following code in anonymous class of RichTextField.

```
protected void onFocus(int direction){
        super.onFocus(direction);
        this.setBackground(BackgroundFactory.createSolidBackground(0x001865D6));
        invalidate();
    }

    protected void onUnfocus(){
        super.onUnfocus();
        this.setBackground(BackgroundFactory.createSolidBackground(Color.WHITE));
        invalidate();
    } 
```

# c# - 继承标签类：单击事件未出现

> ID：10009196
> 
> 赞同：1
> 
> 时间：2012-04-04T10:20:37.220
> 
> 标签：c#, wpf

我尝试为自己制作一个自定义标签以携带更多属性，因为我需要的不仅仅是 label `tag`。我生成了一个继承 Label 类的新类，如下所示：

```
public class BigLabel : Label
    {
        private int t;
        private string h;
        public int ST
        {
            get
            {
                return t;
            }
            set
            {
                t = value;
            }
        }
        public string HyperLink
        {
            get
            {
                return h;
            }
            set
            {
                h = value;
            }
        }
    } 
```

但是，当我在我的`MainWindow.xaml.cs`, BigLabel lb = new BigLabel();中使用它时
`lb.Click`在我继承了 Label 类后，这里没有出现事件。有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:23:35.533

那是因为`Label`类没有`Click`事件。无论如何，这是您可以添加的方法：

```
public static RoutedEvent ClickEvent;         

static BigLabel()    
{    
    ClickEvent = ButtonBase.ClickEvent.AddOwner(typeof(BigLabel));    
}    

public event RoutedEventHandler Click    
{    
    add { AddHandler(ClickEvent, value); }    
    remove { RemoveHandler(ClickEvent, value); }    
} 
```

而且您必须在以下时间提出事件`MouseUp`：

```
RaiseEvent(new RoutedEventArgs(ClickEvent, this)); 
```

# java - 使用 Jersey 的 Java 中的 WebServices

> ID：10009199
> 
> 赞同：3
> 
> 时间：2012-04-04T10:20:59.203
> 
> 标签：java, web-services, tomcat, jersey

我们尝试通过以下链接使用 Jersey 和 Tomcat 在 Java 中创建示例 Web 服务 helloworld：

*   [http://www.vogella.de/articles/REST/article.html](http://www.vogella.de/articles/REST/article.html)
*   [http://www.ibm.com/developerworks/library/wa-aj-tomcat/](http://www.ibm.com/developerworks/library/wa-aj-tomcat/)

但是在运行应用程序时，我们收到如下错误：

```
java.lang.ClassNotFoundException: com.sun.jersey.spi.container.servlet.ServletContainer
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

我的 ‍‍‍<code>web.xml 文件是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
  <display-name>Jersey</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>sample.hello.resources</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>

</web-app> 
```

所以请给我任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:25:48.693

您是否已将所有 Jersey 下载的文件复制到 lib 文件夹？

它`ClassNotFoundException`在`com.sun.jersey.spi.container.servlet.ServletContainer`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T23:22:28.960

谢谢@AurA-我缺少的依赖项是 jersey-servlet-。

# c# - VB.NET 应用程序中的 C# 代码？

> ID：10009202
> 
> 赞同：2
> 
> 时间：2012-04-04T10:21:16.980
> 
> 标签：c#, .net, vb.net, visual-studio

我现在有一个使用**VB.NET构建的应用程序**

我需要在现有的**VB.NET**应用程序中添加一些**C# 代码**，这**可能****吗**？

 ******* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T10:24:41.213

为 C# 代码创建一个单独的项目。然后将对 C# 项目的引用放入 VB.Net 项目中。然后，您可以访问 C# 对象，就好像它们是用 VB.Net 编写的一样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T10:25:40.547

不可以。您需要在解决方案中创建一个单独的项目并将代码放入其中。如果项目是类库，那么您的原始项目可以引用它并调用库例程。如果做不到这一点，有很多在线 C#<->VB.NET 转换器可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T10:54:25.173

就像其他人说的那样，你不能直接混合这两种语言，因为编译器只会理解它所编写的语言。因此，VB.NET 编译器无法理解 C# 代码，除非 MS 创建了一个扩展来这样做。像这样的东西来自我的想象:) -

```
Dim v as int
%for(int i = 0; i < $v; ++i){}% 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T11:13:31.627

> 您不能将不同的语言添加到同一个项目中，但您应该能够将两个项目添加到同一个解决方案中，并将 C# 项目的引用添加到 VB 项目或 VB 项目到 C# 项目，并使用他创建的类型- 当然，只要它们是公开的。

遵循这种方法：
1）[创建多项目解决方案](http://msdn.microsoft.com/en-us/library/23x5fk78.aspx)

*   [如何：创建多项目解决方案](http://msdn.microsoft.com/en-us/library/h970wzkb.aspx)

2) 在您的项目中添加您的 CSharp 项目的引用

*   [如何：将项目引用添加到 Visual Studio Web 项目](http://msdn.microsoft.com/en-us/library/f3st0d45.aspx)

然后，您可以创建这些类/表单等的对象，并访问您在 CSharp 项目中创建的方法：

```
Dim obj As New YourCSharpProject.SomeClass()
obj.UpdateData() 
```

参考：[从 C# 表单启动 VB 表单](https://stackoverflow.com/questions/9704358/launch-vb-form-from-a-c-sharp-form/9704570#9704570)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T10:25:35.107

是的，只要它是一个单独的类/页面/webcontrol/usercontrol 并且它被指定为 C#。Visual Studio 不会喜欢它，而 VS 中的简单方法是在解决方案中设置一个新项目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-04T15:26:35.873

如果只是一点 C# 代码，您可以先使用[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)之类的转换器将其转换为 VB.NET ，也可以手动转换。

否则，如前所述，您必须将 C# 代码放在同一解决方案中的另一个项目中。然后，您可以在同一解决方案中从您的 VB.NET 代码调用 C# 代码。******

# c - 在 C 中使用带有 for 循环的数组

> ID：10009203
> 
> 赞同：-5
> 
> 时间：2012-04-04T10:21:20.497
> 
> 标签：c, arrays

我正在使用 C 并且我有一个数组`t[]`

我写了一个`for`循环，但答案是错误的。

请帮我找出错误。我的代码是：

```
for(j = 0; j < tags; j++)
{
    for(k = j; k < nb_of_subscribers*tags; k = k+tags)
    {
        avr[j] = (float)(avr[j]+t[k]);
    }
    printf("avr[j]:%f", avr[j]);
} 
```

实际上， t[] 的值在 for 循环中被错误地读取，我不知道为什么。如果我只使用 for 循环来打印数组 t 的值，则响应是正确的，否则（在 for 循环中）它是不正确的

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:25:26.257

`avr[j]`在开始迭代求和之前，您应该设置为 0：

```
for(j = 0; j < tags; j++)
{
    avr[j] = 0; // <-----
    for(k = j; k < nb_of_subscribers*tags; k = k+tags)
    {
        avr[j] = (float)(avr[j]+t[k]);
    }
    printf("avr[j]:%f", avr[j]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:36:47.833

所以我假设 t 是一个大小为 nb_of_subscribers*tags 的数组，而 avr 是一个大小标签的数组。

如果我没记错的话，你打算做的是以下几点：

```
for(int j = 0; j < tags; j++)
{
    for(int k = 0; k < nb_of_subscribers; k++)
    {
        avr[j] += (float)(t[j + k*tags]);
    }
    printf("avr[j]:%f", avr[j]);
} 
```

也就是说，假设标签为 2，nb_of_subscribers 为 3，数组 t[6] = {0, 5, 1, 6, 2, 7}，那么数组 avr[2] 将是 {3, 18}。我是否正确，这就是您想要做的？

# c# - ASP.NET MVC3 自定义转换输入参数的最佳方式

> ID：10009218
> 
> 赞同：0
> 
> 时间：2012-04-04T10:22:30.293
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, timezone

我将在我的 ASP.NET MVC3 应用程序中添加对不同时区的支持。

解决方案是以 UTC 时间存储日期值，并存储用户时区偏移量。

所以，我需要两件事：

1.  在“用户时间”中向用户发送日期值（很明显，我将日期传递给将时间转换为用户时间的包装器）

2.  在“用户时间”中从用户那里检索日期并将其转换为 UTC。

问题是 - 将**所有**输入日期值转换为 UTC 时间的好方法是什么。或者是否有一种通用的方法可以向 ASP.NET MVC 添加一些转换规则？

这是我想要的理想模式（控制器接收已转换的值）

![在此处输入图像描述](../Images/2d5d002e685f645e677f2cb1e1c7eb23.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:15:35.610

一种方法可能是创建您自己的 ModelBinder，它为控制器中的操作方法执行映射和准备数据的工作。

[Hanselman 博客中的这篇文章](http://www.hanselman.com/blog/SplittingDateTimeUnitTestingASPNETMVCCustomModelBinders.aspx)应该让您了解我的意思。显然，我假设您可以在方法中获取所需的所有数据

```
BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext); 
```

就像使用存储库或帖子中的隐藏字段获取用户时区一样。

# sql - ORACLE 约束允许空值，IF

> ID：10009219
> 
> 赞同：4
> 
> 时间：2012-04-04T10:22:32.313
> 
> 标签：sql, oracle, oracle10g, oracle11g

我是第一次使用 oracle，我有一个名为 ExpenseReport 的表，其中存储有关费用的详细信息。

我希望 ApprUserNo 允许 Nulls IF ERStatus = 'PENDING' 任何帮助将不胜感激，我整个早上都在尝试排序

```
CREATE TABLE ExpenseReport 
(
  ERNo           NUMBER(10) NOT NULL,
  ERDesc         VARCHAR2(255) NOT NULL,
  ERSubmitDate   DATE NOT NULL,
  ERStatusDate   DATE NOT NULL,
  ERStatus       VARCHAR2(8) DEFAULT 'PENDING' NOT NULL,
  SubmitUserNo   NUMBER(10) NOT NULL,
  ApprUserNo     NUMBER(10) NOT NULL CONSTRAINT BEN_Check CHECK (ERStatus LIKE('PENDING')),
  UsersUserNo    NUMBER(10) NOT NULL,
  AssetAssetNo   NUMBER(10) NOT NULL,
  PRIMARY KEY (ERNo),
  CONSTRAINT Check_ER_Date CHECK (ERStatusDate >= ERSubmitDate),
  CONSTRAINT ERStatus_Null_Exception CHECK (IF ERStatus = 'PENDING',AppUserNo = NULLABLE),
  CONSTRAINT ERStatus_Option CHECK (ERStatus = 'PENDING','APPROBED','DENIED')
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T10:47:37.837

你需要重新形成你的约束。

首先，如果您希望一个字段包含空值，无论任何其他规则如何，它都必须是一个可为空的字段。

```
ApprUserNo     NUMBER(10)   NULL,   -- No Check Constrain 
```

其次，创建一个约束，说 ApprUserNo 不能为 NULL，除非`ErStatus = 'PENDING'`

```
CONSTRAINT ERStatus_Null_Exception CHECK (AppUserNo IS NOT NULL OR ERStatus = 'PENDING'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:31:26.950

这应该这样做：

```
CONSTRAINT ERStatus_Null_Exception 
     CHECK (ERStatus <> 'PENDING' AND AppUserNo IS NOT NULL) 
```

您还应该更改：
`CONSTRAINT BEN_Check CHECK (ERStatus LIKE('PENDING'))`
因为
`CONSTRAINT BEN_Check CHECK (ERStatus = 'PENDING')`
a) LIKE 不是函数并且 b) LIKE 没有通配符没有意义。

然后你在这里有另一个错误：
`CONSTRAINT ERStatus_Option CHECK (ERStatus = 'PENDING','APPROBED','DENIED')`
那应该是
`CONSTRAINT ERStatus_Option CHECK (ERStatus IN ('PENDING','APPROBED','DENIED'))`

请重新阅读 Oracle 手册中记录 CREATE TABLE 和 SQL 条件的语法的章节。

# render - 最好的搅拌机渲染

> ID：10009221
> 
> 赞同：0
> 
> 时间：2012-04-04T10:22:36.487
> 
> 标签：render, renderer, blender-2.61

我需要知道，[Sintel](http://www.sintel.org/)项目中使用了什么渲染器。我认为这不是默认的 Blender Render，因为默认的 Blender Render 渲染质量很差（如果不正确，请纠正我）。我需要在搅拌机 2.60 的 64 位操作系统（W7 HP）上运行它。我正在寻找的，最好的是[Sunflow](http://sunflow.sourceforge.net/index.php)。你有什么想法/你有什么更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:29:06.427

我很确定他们确实使用了搅拌机内部渲染器。使用适当的照明和材料，您可以从搅拌机渲染器中获得出色的质量。如果您使用的是最新的搅拌机版本之一，您可能还想尝试循环渲染器。它附带搅拌机，但仍处于测试阶段。但是如果没有像样的材质和照明，没有渲染器会给您带来令人满意的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T07:10:46.433

Sintel 使用搅拌机内部渲染器。创建了一个分支，其中有一些在 sintel 中使用的特定功能，现在这些功能中的大部分都合并到了主干 *（截至 2.64）。

Blender 现在带有循环渲染引擎，如果您追求的是与其他现代光线追踪器相当有竞争力的光线追踪器，尽管当然不那么成熟。

对 Sunflow 的最后一次提交是在 2008 年，似乎它不再处于开发阶段。

* * *

更新：与 Blender 内部渲染器相比，从 Blender 2.70 开始，Cycles 几乎是完整的功能。

# android - 如何使用 JSoup 查找元素（HTML 解析）？

> ID：10009225
> 
> 赞同：1
> 
> 时间：2012-04-04T10:22:48.377
> 
> 标签：android, html-parsing, jsoup, elements

我知道在 Jsoup 中，当你想找到某个带有链接的元素时，你可以这样做：

```
Document doc = Jsoup.parse(text); 
Element links = doc.select("[href]"); 
```

但是，这会将所有链接带到页面中的每个网站...

但是如果我有多个链接，我只想检索那些专门链接到谷歌的链接。例如：

```
<a href="http://www.google.com">Google</a>
<a href="http://www.bing.com">Bing</a>
<a href="http://www.google.com">Another Google</a> 
```

我希望它只接受那些有谷歌的人。我试着做这样的事情：

```
Element links = doc.select("[href=\"http://www.google.com\"]"); 
```

但这不起作用......有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:36:52.580

你有没有简单地尝试过：

```
Element links = doc.select("[href=http://www.google.com]"); 
//Or,
Element links = doc.select("a[href=http://www.google.com]");

//Or with the 'attribute contains' form, the most likely to work:
Element links = doc.select("a[href*=google]"); 
```

# sharepoint-2010 - infopath 和 sharepoint 2010 中的属性提升

> ID：10009228
> 
> 赞同：0
> 
> 时间：2012-04-04T10:23:00.910
> 
> 标签：sharepoint-2010, infopath-2007

我有一个 SharePoint 2010 文档库，其中包含从 infopath 表单（Infopath 2007）创建的 > 7000 个 xml 文档。现在我想将表单中的几个字段推广到 SharePoint 文档库。我只能对从升级后的表单创建的文档执行此操作，但不能对所有以前创建的文档执行此操作。虽然重新提交旧表单会起作用，但我无法更新所有 7000 条记录以将值提升到列。考虑到这些更改也需要在生产环境中实施，是否有更简单的解决方案。

注意：提升的列将用于生成图形报告。任何可接受的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T01:50:53.873

我以前也经历过，没有好的答案。如果我理解正确，您在文档库中有现有的 InfoPath 表单，并且您现在想要将字段提升到文档库，但您不想一个一个地打开每个表单，对吗？

请注意，您很可能不必打开然后重新提交每个表单，您只需打开表单，然后将其关闭。一旦你这样做了，提升的领域就会出现。

所以......我之前所做的是：首先，获取notepad++（这允许您在选项卡中打开多个文件）。其次，通过 WebDav 访问文档库（即在 SharePoint 中转到该库，然后转到“库”选项卡，然后单击“使用资源管理器打开”）。第三，使用notepad++一次打开大量文件（选择文件，右键单击，使用notepad++打开）。所有文件都需要一点时间才能加载到记事本++中的选项卡中。一旦它们都在记事本++中打开，尽可能快地按 ctrl-w （关闭每个文件）。冲洗并重复。

这并不漂亮，我确信有更好的方法来做到这一点（也许以编程方式），但这应该可行。至少您不必一一打开每个表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T10:38:29.247

您可以通过 powershell 或通过高级设置重新链接文档来执行此操作。

# javascript - ember.js - 在 jquery UI 更新上设置对象属性

> ID：10009230
> 
> 赞同：1
> 
> 时间：2012-04-04T10:23:08.633
> 
> 标签：javascript, ember.js

在对我的最后一个问题做出如此迅速的回应之后，我想我会用另一个来试试运气:o)

我正在使用可排序的 jQuery UI 对 ember 视图进行排序。视图中的每个项目也是一个视图（就像一个预告片）。

我在这里向 didInsertElement 的父视图添加可排序。

```
<script type="text/x-handlebars">
  App.SimpleRowListView = Em.View.extend({
    didInsertElement: function() {
      this.$().sortable({
        handle: '.dragger',
        items: '.simple-row',
        axis: 'y',
        update: function(event, ui) {
          // update is probably the best event...
        }
     });
    },
  });
</script> 
```

每当更新列表时，我想将我的 simpleRow.listPosition 值更新为其父元素中每个 .simple-row 的当前索引

我开始向用于每一行的视图添加一个 updateListPosition 函数

```
<script>
updateListPosition : function() {
  var index = $('#simple-row-wrapper .simple-row').index(this.$());
  this.getPath('content').set('listPosition',index);
},
</script> 
```

我的目标是连接我的 UI 更新事件以在每个子视图上触发它。

我现在正在徘徊更新事件是否应该调用控制器上的函数来循环所有对象并设置listPosition。但是在控制器中我无法访问 this.$() ，因此无法计算索引

我的计划是使用 listPosition 作为控制器数组的排序属性。但是，如果有更好的方法对控制器数组进行排序，以便它反映使用 .sortable() 所做的更改

再次感谢。我认为这可能是很多人在某个时候想要答案的原因:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:32:38.880

您需要浏览视图。您可以循环每次调用您的 updateListPosition 函数（这是一项繁重的工作），也可以执行类似的操作

```
<script type="text/javascript">
  App.SimpleRowListView = Em.View.extend({
    didInsertElement: function() {
      var self = this;
      this.$().sortable({
        handle: '.dragger',
        items: '.simple-row',
        axis: 'y',
        update: function(event, ui) {
          var rows = self.$('.simple-row').toArray();
          rows.forEach(function(row) {
            var view = Ember.View.views[$(row).attr('id')];
            view.updateListPosition();
          });
        }
     });
    },
  });
</script> 
```

或者一个看起来更轻的版本：

```
<script type="text/javascript">
  App.SimpleRowListView = Em.View.extend({
    didInsertElement: function() {
      var self = this;
      this.$().sortable({
        handle: '.dragger',
        items: '.simple-row',
        axis: 'y',
        update: function(event, ui) {
          var rows = self.$('.simple-row').toArray();
          rows.forEach(function(row, position) {
            var view = Ember.View.views[$(row).attr('id')];
            view. updateListPosition(position);
            // pass the new position provided by forEach here and use it instead of calculating again
          });
        }
     });
    },
  });
</script> 
```

# iphone - iphone：如何去除底部的白条？

> ID：10009232
> 
> 赞同：0
> 
> 时间：2012-04-04T10:23:22.400
> 
> 标签：iphone, objective-c, ios, ipad

我将背景颜色更改为黑色。

```
- (void)viewDidLoad {
    [super viewDidLoad];
        self.view.backgroundColor = [UIColor colorWithRed: (10.0/255) green: (10.0/255) blue: (10.0/255) alpha: 1.0];
} 
```

但无论是在设备还是模拟器中，它最后都会显示一条白色条带。如何摆脱这个...请帮助

![在此处输入图像描述](../Images/52f466516db57c11cc818f9e3c349ba4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:33:59.023

为此，您可能正在添加一个白色的子视图，或者您的视图的帧大小错误，或者您的帧的初始点错误。

尝试使用此代码将视图框架更改为等于您的设备框架：

```
[self.view setFrame:[[UIScreen mainScreen] bounds]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T10:27:23.087

将视图的`y`原点位置设置为 20.0f 。

我希望你有视图的 nib 文件。检查视图的框架位置。如果原点 y 为 0，则高度应为 480.0f。否则，如果原点 y 是 20.0f，那么高度应该是 460.0f。

# jquery - 模拟点击的选项卡式锚点

> ID：10009237
> 
> 赞同：1
> 
> 时间：2012-04-04T10:23:55.003
> 
> 标签：jquery, triggers, anchor

所以我在jquery中有这个标签的代码，href设置为about，我想做的是在菜单中提供一个链接，点击时触发这个标签，所以[http://myurl.com#about](http://myurl.com#about)

```
$('#info-nav li').click(function(e) {
    $('#info div').hide();
    $('#info-nav .current').removeClass("current");
    $(this).addClass('current');

    var clicked = $(this).find('a:first').attr('href');
    $('#info ' + clicked).fadeIn('fast');
    e.preventDefault();
 }).eq(0).addClass('current'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:28:45.350

我会将处理程序附加到`<a>`元素而不是`<li>`

```
$('#info-nav li a:first').click(function(e) {
    $('#info div').hide();
    $('#info-nav .current').removeClass("current");
    $(this).closest('li').addClass('current');

    var clicked = $(this).attr('href');
    $('#info ' + clicked).fadeIn('fast');
    e.preventDefault();

}).eq(0).closest('li').addClass('current'); 
```

这样在`DOMready`事件中我会读取 URL 中的哈希（带有`location.hash`），我会在其 href 属性等于该哈希的元素上触发`click`事件（或带有 的处理程序）`.triggerHandler()`

```
$(function() {
    var hash = location.hash, tgt = $('a[href="' +  hash + '"]');
    if (hash !== '' && tgt.length) {
       tgt.trigger('click');
    }
}); 
```

在事件上调用相同的函数[`window.onhashchange`](https://developer.mozilla.org/en/DOM/window.onhashchange)（如果您提供的链接实际上并未更改整个页面）

```
$('window').bind('hashchange', function() {
    var hash = location.hash, tgt = $('a[href="' +  hash + '"]');
    if (hash !== '' && tgt.length) {
       tgt.trigger('click');
    }
}); 
```

# jsf - mojarra 未定义

> ID：10009238
> 
> 赞同：0
> 
> 时间：2012-04-04T10:24:03.420
> 
> 标签：jsf, jsf-2, mojarra

我正在用 mojarra 开发 JSF 应用程序。

我收到 javascript 错误“未定义 mojarra”。

部署一切正常后，ajax 调用工作正常。但是刷新页面后，出现错误。

刷新后head标签中缺少javascript包含。

它似乎工作得非常喜怒无常。

我在 Tomcat 和 Glassfish 上的行为相同，Mojarra 版本为 2.0.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-23T13:15:10.330

出现此错误的原因之一是使用`<head>..</head>`and`<body>...</body>`标记而不是`<h:head>...</h:head>`and `<h:body>...</h:body>`。

命名空间 -`xmlns:h="http://java.sun.com/jsf/html"`

# wordpress - 301 htaccess 从旧的永久链接重定向到新的永久链接

> ID：10009239
> 
> 赞同：2
> 
> 时间：2012-04-04T10:24:03.687
> 
> 标签：wordpress, .htaccess, url-redirection, permalinks

我最近将我的 Blogger 博客转移到了 WordPress，我想将旧的 Blogger 永久链接重定向到新站点。

老的：

```
http://sitename.com/2012/04/my-post-url.html 
```

到新：

```
http://sitename.com/my-post-url/ 
```

我试过遵循 .htaccess 代码。它会删除年和月，但不会删除`.html`. 谁能告诉我如何获取`/`而不是`.html`在链接末尾？

以下代码有任何修改吗？

```
RedirectMatch 301 /\d{4}/\d{2}/\d{2}/(.*) http://mydomain.com/$1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:28:47.643

```
RedirectMatch 301 /\d{4}/\d{2}/\d{2}/(.*)\.html http://mydomain.com/$1 
```

这应该够了吧。:)

# javascript - 打开模式对话框时如何禁用控件单击事件

> ID：10009246
> 
> 赞同：1
> 
> 时间：2012-04-04T10:24:40.310
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-plugins

据我所知，一旦我在 jquery 中打开模式对话框，所有输入控件都将被禁用。但我仍然可以点击按钮、div 等控件。在 jquery 中有什么方法可以在打开模式对话框后禁用所有交互。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-04T10:31:58.673

您必须使用 div 覆盖整个页面，以便所有控件都放在覆盖 div 后面。

```
<div class="overlay" style="z-index: 1001; width: 1440px; height: 504px; "></div>
.overlay {
background: #AAA 
opacity: .3;
filter: Alpha(Opacity=30);
} 
```

更多信息：http: [//jqueryui.com/demos/dialog/modal.html](http://jqueryui.com/demos/dialog/modal.html)

# javascript - 检查类按钮，如果它有某个类，则创建一个“完成”div

> ID：10009248
> 
> 赞同：1
> 
> 时间：2012-04-04T10:24:43.323
> 
> 标签：javascript, jquery, validation, html

我是 Jquery 的新手。我有一个上传表单，当上传某些内容时，上传按钮会更改类：

```
<a class="upload-button upload buy" id="upload-button"><span>Upload a document</span></a> 
```

到：

```
<a class="upload-button buy white" id="upload-button"><span>Upload a document</span></a> 
```

如果文件已经上传（按钮中的类已更改），我尝试编写一个添加名为“完成”的 div 的函数。

这是我到目前为止所得到的：

```
$('a#upload-button').ready(function() {
            if ($(this).hasClass('white')) {
                $('#three')
                    .append('<div class="done rotateone wiggler"></div>')
                    .addClass('grey');
        }
        }) 
```

我不确定为什么它不起作用。请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:28:46.160

你应该这样做（如果你想在页面加载时检查一个按钮是否有一个类，否则只需`if`把它放在你需要的地方

```
//this is a shorthand methot for $(document).ready() 
//you should use this to wait for the dom to load
$(function(){
 //if the link has the class
  if($('a#upload-button').hasClass('white')){
     //append the button
     $('#three')
        .append('<div class="done rotateone wiggler"></div>')
        .addClass('grey');
  }
}); 
```

编辑 - 你应该修改你的脚本

```
function verifyFileUploadState(up) {
    if ($(".file-title").length == 0) {
        $("#upload-button span").html("Upload a document");
        $("#upload-button").addClass("upload");
        $("#upload-button").removeClass("white");
    } else {
        $("#upload-button span").html("Upload another document");
        $("#upload-button").removeClass("upload");
        $("#upload-button").addClass("white");
         $('#three')
            .append('<div class="done rotateone wiggler"></div>')
            .addClass('grey');
    }
    up.refresh();
} 
```

# linux - 堆大小和位置

> ID：10009250
> 
> 赞同：0
> 
> 时间：2012-04-04T10:24:45.940
> 
> 标签：linux, memory-management

我正在编写自己的内存分配器。如果我的想法是正确的，内核的地址空间从 0 到 1-GB，用户空间从 1 到 4，其中包含不同的部分，例如：代码、堆栈、数据、堆等。

1.  对不对，在程序执行期间不能改变堆段的大小和位置？
2.  我怎样才能得到大小和位置？
3.  在获得堆区域后，我需要做的就是根据我的判断分配内存，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:54:50.220

你为什么担心这个？

如果您正在编写一个分配器 a-la libc，请使用`sbrk`和/或`mmap`从内核中保留内存。您无需担心没有这些系统调用的堆放置位置。

如果你想检测 libc 的`malloc`// `calloc`，`realloc`事情就更简单了——只需将它们包装在你的分配器函数中。

1.  是的，分配器通过向内核请求内存来有效地管理堆。通常，与 的情况一样`brk`，它的位置位于数据段的末尾之后，并且它随着地址的增加而增长（或使用 mmap 以页面大小的倍数分配等）

2.  分配器管理大小；就分配器而言，堆的位置无关紧要，但它处于知道它的位置。

3.  分配器有效地从内核请求内存。一旦拥有该内存，它就可以将其分配给它认为合适的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:58:55.193

1.  它是一个定义堆的分配器。如果您有一个自定义分配器，并且它确定所有内存客户端都返回了所有内存，那么删除它的堆或创建一个新的堆来提供内存请求是完全有效的。

2.  由于分配器本身定义了堆，它应该知道它的大小和位置。如果您正在谈论的是用您自己的分配器篡夺操作系统分配器的责任，您应该只通过使用操作系统分配器来获取一块内存然后将其用作您自己的分配器的堆。

3.  同样，一旦您的分配器拥有内存块，您就可以自行决定使用它。您不能简单地获取由另一个分配器管理的内存及其空闲池中的内存并在没有严重潜在后果的情况下使用它。

# asp.net-mvc-3 - FluentValidation + Ninject：如何为依赖注入设置 AbstractValidator

> ID：10009251
> 
> 赞同：1
> 
> 时间：2012-04-04T10:24:50.837
> 
> 标签：asp.net-mvc-3, ninject, fluentvalidation

我正在使用 FluentValidation 和 Ninject。我正在尝试将服务注入 AbstractValidator

```
[Validator(typeof(CompetitionFormModelValidator))]
public class CompetitionFormModel
{

    public string FirstName { get; set; }     

} 
```

为了我的验证：

```
public class CompetitionFormModelValidator : AbstractValidator<CompetitionFormModel>
{

    IUserService UserService;

    public CompetitionFormModelValidator(IUserService UserService)
    {

        this.UserService= UserService;

        RuleFor(c => c.FirstName).NotEmpty().WithMessage(" ").Length(1, 100);

        Custom(c =>
        {
            //.. try uusing UserService here

            return null;
        });      

    }
} 
```

在我的 global.asax.cs

```
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        var ninjectValidatorFactory = new NinjectValidatorFactory(new StandardKernel());
        ModelValidatorProviders.Providers.Add(new FluentValidationModelValidatorProvider(ninjectValidatorFactory));
        DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false;
        FluentValidationModelValidatorProvider.Configure(x => x.ValidatorFactory = ninjectValidatorFactory);            

    } 
```

在 NinjectWebCommon.cs

```
private static void RegisterServices(IKernel kernel)
    {
        AssemblyScanner.FindValidatorsInAssembly(Assembly.GetExecutingAssembly())
.ForEach(match => kernel.Bind(match.InterfaceType)
    .To(match.ValidatorType));

        kernel.Bind<IUserService>().To<UserService>();

    } 
```

该项目编译得很好。当我不尝试使用 DI 时，验证也可以正常工作。现在我正在尝试注入 IUserService，不会调用验证。

我是否正确设置了 ninject.web.mvc.fluentvalidation 的配置？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:38:13.933

在您的 Application_Start 中，您`NinjectValidatorFactory`使用新的`StandardKernel`而不是使用现有的内核来更新 - 所以您在现有内核上注册的验证器不会被`NinjectValidatorFactory`.

将此代码块移动到您可以访问现有内核的位置并将其传入应该可以解决问题。

# java - 将视频文件保存在资产文件夹中？

> ID：10009263
> 
> 赞同：2
> 
> 时间：2012-04-04T10:25:41.530
> 
> 标签：java, android, video, assets

我们可以在资产文件夹中保留一个视频吗？我正在开发一个应用程序，我在其中教授通过显示应用程序如何工作的视频而不是快照和文本来指导用户？？？？

这是保留视频的好方法还是我们需要保留文本和短片？有人可以帮助我，因为我是 android 新手。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:45:02.903

我认为您可以将视频保存`your_video.avi`在文件夹中，这样您就可以通过传递来`raw`播放它；`VideoPlayer``R.raw.your_video`

这比将视频存储在资产中要好，因为在资产中，所有资产文件都在内部存储为一个大文件，这可能会导致播放多媒体文件时出现复杂情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:44:43.840

任何文件都可以保存在 assets 文件夹中并使用

活动.getAssets().open("");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T11:14:21.510

您可以将视频文件放在原始文件夹而不是资产中。

如果您使用 videoview 或媒体播放器实例播放这些文件，则需要文件的 Uri 来播放它。下面是播放视频文件的 Uri

“android.resource://com.com.com/raw/filename”

//用你的包名替换com.com.com，用你的文件名替换文件，但不包括扩展名

# ios - IOS图像无法拉伸

> ID：10009264
> 
> 赞同：0
> 
> 时间：2012-04-04T10:25:45.020
> 
> 标签：ios, uiimage

环境：Xcode4.3.1、sdk5.1

我只想拉伸图像的一部分，所以我用这样的代码编写：

```
 leftImage = [UIImage imageNamed:@"leftStyleBackground.png"];
UIEdgeInsets insets = UIEdgeInsetsMake(2, 14, 2, 2);
if ([leftImage respondsToSelector:@selector(resizableImageWithCapInsets:)])
    leftImage = [leftImage resizableImageWithCapInsets:insets];
else {
    leftImage = [leftImage stretchableImageWithLeftCapWidth:14 topCapHeight:2];
} 
```

但是，结果是原始图像仅重复出现以填充 uiimageview 框架。

如果我使用 –stretchableImageWithLeftCapWidth:topCapHeight: 方法，图像可以正确拉伸。

知道为什么 ios5 中的新方法不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:54:59.253

`resizableImageWithCapInsets`：平铺图像区域。

如果您需要拉伸：

对于 6.0 及更高版本 - 使用: `resizableImageWithCapInsets:resizingMode`: 并`resizingMode`设置为`UIImageResizingModeStretch`.

在 6.0 之前 - 使用：`stretchableImageWithLeftCapWidth:topCapHeight:`

# javascript - 将Android webview渲染为位图，html5 javascript，回调问题

> ID：10009265
> 
> 赞同：6
> 
> 时间：2012-04-04T10:25:45.357
> 
> 标签：javascript, android, html, webview

我有一个带有按钮、图像和 web 视图的活动。我的目标是加载一个页面，然后在其上执行 javascript 以使用 HTML5 等绘制图形。

html5绘制的图片高度是未知/可变的，但宽度应该始终与手机的宽度/或浏览器窗口相同。

我有一个javascript接口来获取一个回调，其中包含它现在已经完成调用绘图函数的信息，它给了我高度。

这是网络视图的设置

```
mWeb = (WebView) findViewById(R.id.webView1);
mWeb.clearCache(true);
mWeb.addJavascriptInterface(new IJavascriptHandler(), "cpjs");

mWeb.getSettings().setJavaScriptEnabled(true);

mWeb.loadUrl(" http://theURL.com ");
mWeb.setInitialScale(100);
mWeb.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);

mWeb.setWebViewClient(new WebViewClient() {
            public void onPageFinished(WebView view, String url){
                mWidth = mWeb.getWidth();
                mHeight = mWeb.getHeight();

                view.loadUrl("javascript: Tools.adjustWidth(" + mWidth + " )");

                String javaCouponRender = "renderCoupon(" + kupongJson + ", 0); void(0)";
                view.loadUrl("javascript: " + javaCouponRender);

            }
             });

        } 
```

我在我的视图中拥有的按钮，我已经使用此功能启动将我的 webview 渲染到纹理：

```
void renderCoupon(int width,int height){

    bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    final Canvas c =new Canvas(bitmap);
    mWeb.draw(c);
    imgView.setMinimumWidth(width);
    imgView.setMinimumHeight(height);
    imgView.setImageBitmap(bitmap);
    imgView.setVisibility(View.VISIBLE);
} 
```

这行得通。按下按钮，将绘制的内容渲染到纹理，并且图像视图具有正确的结果。唯一的警告是我必须等到页面加载/绘制后才能按下按钮。

现在，我已经实现了从 javascript 获得的回调，如下所示：

```
final class IJavascriptHandler {
       IJavascriptHandler() {
       }

       public void couponRenderedCallback(final int height){

           mHasGotRenderCallback = true;
           mHeight = height;
              Toast t = Toast.makeText(getApplicationContext(), "see if it helps sleeping", 2000);
              t.show();
              try{
                Thread.sleep(5000);
            }
            catch(InterruptedException ex){

            }
              runOnUiThread(new Runnable() {
                    @Override
                    public void run() {

                        Toast t2 = Toast.makeText(getApplicationContext(), "and now we render to texture", 2000);
                        t2.show();       
                        renderCoupon(mWidth, mHeight);
                    }
                });

       }

    } 
```

并且每一次，这个回调函数都会渲染一个白页。有趣的是，如果我一看到这个回调被调用就物理地按下渲染到纹理按钮，它会显示预期的结果。是 runOnUiThread 以某种方式失败了吗？

睡眠是我添加的内容，以查看 webview 渲染和我从 javascript 获得的回调是否存在某种有趣的延迟。

我也尝试将 sleep 移到 runOnUiThread 中，这也没有帮助。

我希望有人知道我应该朝哪个方向寻求解决这个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T15:41:54.743

找到了一个解决方案，即将 renderCoupon 更改为：

```
void renderCoupon(final int width,final int height){

    mWeb.postDelayed(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
            final Canvas c =new Canvas(bitmap);
            mWeb.draw(c);

            imgView.setMinimumWidth(width);
            imgView.setMinimumHeight(height);
            imgView.setImageBitmap(bitmap);
            imgView.setVisibility(View.VISIBLE);
        }
    }, 100);
} 
```

当然，我删除了回调中的睡眠内容。感谢我的同事告诉我这个问题。:)

# git - 使用 Gitolite 自动部署 PHP 脚本

> ID：10009279
> 
> 赞同：2
> 
> 时间：2012-04-04T10:26:38.737
> 
> 标签：git, gitolite

我想在本地为我的测试服务器设置自动部署脚本。
我在 ubuntu 桌面 11.04 上使用 gitolite。我使用 apt-get install gitolite 安装 gitolite，所以它是创建用户 gitolite 和组 gitolite。
现在我使用具有用户和组 ivan:ivan 的 apache 设置我的测试网络服务器，
并在该用户名下执行 git clone。
所以所有文件和文件夹都有相同的文件所有者 ivan:ivan。

我在 /var/lib/gitolite/repository/testrepo/hooks/ 下设置了接收后挂钩，并在里面有这个脚本：

```
#!/bin/bash
#CONFIG
LIVE="/home/ivan/public_html/testrepo"

read oldrev newrev refname
if [ $refname = "refs/heads/master" ]; then
  echo "===== DEPLOYING TO TEST SITE ====="
  unset GIT_DIR
  cd $LIVE
  git pull origin master:
  echo "===== DONE ====="
fi 
```

由于 post-receive 钩子是由 gitolite 用户执行的，因此访问使用用户 ivan 的测试服务器存在权限问题。

我已经将 gitolite 添加到 ivan 组并使其组访问写入，但它仍然无法运行。
我知道这是一个权限问题，但我不知道解决方案。
如果您有相同的经验或有任何提示，我将不胜感激。

谢谢伊万
_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T04:31:11.077

我终于自己找到了解决方案，感谢 VonC 的指点。
我的解决方案可能不美观但仍然有效。

因此，以下是我的解决方案中适用的步骤：

1.  我创建了一个裸存储库，它将与 Web 应用程序具有相同的用户权限。

2.  在 Gitolite Repositories 文件夹（在 Ubuntu 中：/var/lib/gitolite/repositories）中，我创建了一个 post-receive 挂钩，它将镜像存储库和我刚刚创建的裸存储库。代码是：

    `#!/bin/bash
    echo '==== DO MIRROR ===='
    git push --mirror user@host:path/to/bare.git
    echo '==== DONE MIRROR ===='`

3.  在我的 Web 应用程序中，我将创建一个远程连接到该裸仓库。

4.  然后我在镜像的裸仓库中创建一个接收后挂钩，它将要求 Web 应用程序从中提取。编码：

    `#!/bin/bash
    WORK_DIR="/home/ivan/public_html/test/testing"
    read oldrev newrev refname
    if [ $refname = "refs/heads/master" ]; then
    echo "===== DEPLOYING TO LIVE SITE ====="
    unset GIT_DIR
    cd $WORK_DIR
    git pull mirror-repo master
    echo "===== DONE ====="
    fi`

5.  不要忘记 chmod +x 后接收。

正如我之前所说，它可能并不漂亮但仍然有效，至少对于我目前的情况。我不只是从 gitolite 存储库中提取它的原因是因为用户文件权限。在 Ubuntu 中（从 apt-get 安装），gitolite 保存用户和组，gitolite:gitolite。我的 Web 应用程序位于我的主文件夹下（我使用的是 suPHP），其中包含用户和组 ivan:ivan。因此，当我推送到 gitolite 存储库时，它将在 gitolite 用户下运行 bash 脚本，该用户无法访问我的主文件夹下的 .git 文件夹。

所以，是的，对于那些有更好解决方案的人，我很想听听你的意见。
谢谢希望我的解决方案可以帮助其他人。
伊万

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T16:05:38.090

经过长时间的谷歌搜索，当发生任何推送时，我很沮丧地实现了这个自动拉取功能。但我自己的方式只需要 3 个简单的步骤。

1.  添加状态变量 /var/lib/gitolite/stat/project

    ```
    vim /var/lib/gitolite/repositories/project.git/hooks/post-receive
    #!/bin/bash
    echo '==== DO MIRROR ===='
    echo '1'>/var/lib/gitolite/stat/project
    echo '==== DONE MIRROR ====' 
    ```

2.  通过 root 准备脚本权限

    ```
    vim /var/lib/gitolite/stat/autopull.sh
    #!/bin/bash
    hstat=`cat /var/lib/gitolite/stat/project
    enter code here
    if [ "$hstat" == 1 ]; then
    cd /home/suphpuser/public_html_staging/project
    git pull
    chown -R suphpuser.suphpuser /home/suphpuser/public_html_staging/project
    echo '0'>/var/lib/gitolite/stat/project
    fi 
    ```

3.  运行脚本

    ```
    /var/lib/gitolite/stat/autopull.sh 
    ```

就这样 ：）

# c - 在 c 的子函数中分配内存时出现奇怪的分段错误

> ID：10009281
> 
> 赞同：0
> 
> 时间：2012-04-04T10:26:58.030
> 
> 标签：c, segmentation-fault

这是我的代码，它为参数指定大小的矩阵分配空间，并返回指向所述矩阵的指针：

```
int **allocateSpace(int row, int col){  
   int i;
   int **a;
   a = malloc(sizeof(int *) * row);
   for(i = 0; i < row; i ++)                                               
      a[i] = malloc(sizeof(int) * col);  
   return a;
} 
```

上面的代码按预期工作。

但是，当我将代码更改为以下形式时，会出现分段错误：

```
void allocateSpace(int **a, int row, int col){
    int i;
    a = malloc(sizeof(int *) * row);
    for(i = 0; i < row; i ++)
      a[i] = malloc(sizeof(int) * col);
} 
```

似乎从`allocateSpace()`函数返回时，分配的内存被释放（因为我遇到了分段错误）。但为什么？我所做的只是为给定的指针分配内存，这一切都在子函数中完成。

总结我的问题：为什么我在第二段代码中出现分段错误？非常感谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T10:29:39.370

因为您需要传入指向指针的指针才能分配分配的内存：

```
void allocateSpace(int ***a, int row, int col){
    int i;
    *a = malloc(sizeof(int *) * row);
    for(i = 0; i < row; i ++)
      ( *a )[i] = malloc(sizeof(int) * col);
} 
```

要调用它，您需要传递 a 的地址`int**`：

```
int** ppData;

allocateSpace( &ppData, 10, 10 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:32:14.710

问题是您正在尝试更改按值传递的指针：

```
void allocateSpace(int **a, int row, int col){
  // ...
} 
```

`int** a`这里是按**值**传递的（即指针值被复制到堆栈中以便将其用作函数参数）。

当你这样做时

```
a = malloc(sizeof(int *) * row); 
```

您只更改指针的**副本**，一旦函数返回，您的更改将被丢弃。

解决方法是通过引用传递指针，即

```
void allocateSpace(int ***a, int row, int col){
//...
} 
```

并按照参考更改实际值：

```
*a = malloc(sizeof(int *) * row); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:33:04.860

在第二种情况下，您正在修改函数的参数`a`——即按值传递的本地副本。所以，如果你调用这样的函数：`allocateSpace(myptr,N,M)`，`myptr`将不会被修改 - 函数的本地副本将。因此，`myptr`包含它在调用之前包含的任何内容 - 可能是垃圾。您需要将函数参数更改为：（哦，太恐怖了），然后在函数体中的每个引用之前`int ***a`添加一个额外的（取消引用操作）。`*``a`

将此与您想要修改函数中的简单 int 的情况进行比较 - 参数应该是`int *`并且函数体中的分配应该去`*a`。这里同样适用 - 需要额外的取消引用级别才能实现您的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T10:33:26.563

在第二个函数中，int **a 通过值（指针）传递，因此函数中的更改不会影响调用者的函数。您必须通过引用传递此值。

# iphone - 通过 monotouch 将 ipad/iphone 部署到设备

> ID：10009282
> 
> 赞同：0
> 
> 时间：2012-04-04T10:27:06.003
> 
> 标签：iphone, xcode, ipad, mono, xamarin.ios

我已经构建了 2 个应用程序：一个用于 iPhone，一个用于 iPad。它们都构建得非常好并在模拟器中运行。在更新到 Xcode 4.3.2 之前，它们在设备上也运行良好。
当我使用 MonoTouch 构建设备时，我收到以下消息：

```
Please ensure your device is connected...  
Connected to: Steve’s iPad  
Initializing file service...  
Uploading application  
Finalizing file service...   
Installing application  
Installation failed: AMDeviceInstallApplication returned: 0xe8008017  
The application was terminated by a signal: SIGHUP 
```

当我通过 Xcode/Organizer 查看控制台时，我看到以下消息：

```
Apr  4 10:22:22 unknown installd[819] <Error>: libMobileGestalt loadBasebandMobileEquipmentInfo: CommCenter error: 1:45  
Apr  4 10:22:22 unknown installd[819] <Error>: libMobileGestalt copyInternationalMobileEquipmentIdentity: Could not get mobile equipment info dictionary  
Apr  4 10:22:22 unknown com.apple.mobile.lockdown[17] <Notice>: Could not receive size of message  
Apr  4 10:22:22 unknown lockdownd[17] <Error>: 010f4000 handle_connection: Could not receive USB message #6 from Xcode. Killing connection  

Apr  4 10:22:23 unknown installd[819] <Error>: 2ffa4000 verify_signer_identity: Could not copy validate signature: -402620393  
Apr  4 10:22:23 unknown installd[819] <Error>: 2ffa4000 preflight_application_install: Could not verify executable at /var/tmp/install_staging.5kF0E7/EastmaniPad.app  
Apr  4 10:22:23 unknown installd[819] <Error>: 2ffa4000 install_application: Could not preflight application install  
Apr  4 10:22:23 unknown mobile_installation_proxy[818] <Error>: handle_install: Installation failed  
Apr  4 10:22:23 unknown com.apple.mobile.lockdown[17] <Notice>: Could not receive size of messageCould not receive size of message  
Apr  4 10:22:23 unknown lockdownd[17] <Error>: 2fff5000 handle_connection: Could not receive USB message #7 from mtouch. Killing connection  
Apr  4 10:22:23 unknown lockdownd[17] <Error>: 2fef1000 handle_connection: Could not receive USB message #14 from mtouch. Killing connection  
Apr  4 10:22:23 unknown installd[819] <Error>: 2ffa4000 handle_install: API failed  
Apr  4 10:22:23 unknown installd[819] <Error>: 2ffa4000 send_message: failed to send mach message of 71 bytes: 10000003  
Apr  4 10:22:23 unknown installd[819] <Error>: 2ffa4000 send_error: Could not send error response to client 
```

有没有其他人遇到过这个问题，或者有没有人有能力更好地破译上面的堆栈跟踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:17:48.723

关键部分是这样的：

```
Could not copy validate signature: -402620393 
```

如果你google这个错误，你会发现一些想法：

*   请先从设备中手动删除该应用程序，然后再次尝试上传。
*   确保配置文件在 Xcode 中正确配置。这通常意味着将它们全部删除并重新下载。

我也可以提出一些我自己的想法：

*   检查模板中的新项目是否发生同样的事情。如果可行，则说明您的应用程序中存在导致签名验证失败的问题。
*   检查新的 Xcode 项目是否发生同样的事情（如果它有效，请再试一次您的项目；Xcode 知道在某些情况下会进行一些自动配置）
*   重新启动您的设备和 Mac。
*   如果您有其他设备，请在那里尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T15:20:34.757

我有同样的问题，但它原来是由项目选项“可执行”设置被设置为“**带 GUI**的可执行文件”而不是“**可执行文件**”引起的

# asp.net - Sql Server 错误 26 本地

> ID：10009285
> 
> 赞同：0
> 
> 时间：2012-04-04T10:27:23.273
> 
> 标签：asp.net, sql, sql-server

（数据库在我的电脑上）

我的数据库正常运行了一个月，然后出现了这个错误。它与特定文件无关，也与特定项目无关（即使我将创建一个新网站并尝试添加新的数据库文件，也会弹出此错误）

我猜这是因为 sql server 没有在我的 PC 上运行，而且我确实没有看到任何与 sql 相关的进程正在运行。

我如何修复它？

PS我知道这个错误在互联网上有很多线程，甚至在SO中也是如此。但它们中的大多数解决了与远程服务器建立复杂、安全连接的问题。我想要的只是创建一个新的空 ASP.NET 网站并在我的 PC 上为其添加一个新的 .mdf 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:39:40.187

它可能与您必须从控制面板->管理工具->服务中验证的 SQL 服务身份验证有关。找到 SQL Server(Express) 尝试更改登录为网络服务而不是本地系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:30:40.477

这是定位服务器或实例的错误。

尝试通过 IP 连接。

您是否禁用了 SQL Server 浏览器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T21:26:16.383

我面临着类似的事情，所以我将分享我是如何解决它的，它可能对你有用，但这是我的 2 美分。

**我的环境：** Windows 10（从 SQL Server 工作正常的 Windows 8 升级）SQL Server 2014 Express

**解决方案：**我打开服务程序，发现 SQL Server 服务，我看到除了一个被禁用的“ **SQL Server 代理**”之外，所有这些服务都已启动，我启用它并能够连接到我的数据库实例.

希望能帮助到你

问候

# c# - 无法在 Azure 服务器上安装 VHD 驱动器

> ID：10009286
> 
> 赞同：1
> 
> 时间：2012-04-04T10:27:23.693
> 
> 标签：c#, azure

请帮我。我正在编写以下代码来挂载 vhd 文件。但我无法安装它。它在本地运行良好，但是当我将它部署在 azure 服务器上时，webrole 仍然处于脱机状态。我尝试通过删除下面的 foreach 块但徒劳无功。但是当我删除代码“Global.driveLetter = drive.Mount(localCache.MaximumSizeInMegabytes - 20, DriveMountOptions.Force);”时 角色已在服务器上准备就绪。但我不能这样做，因为这是安装驱动器的关键语句。

会有什么问题？

```
 private static void MountAzureDrive()
    {
        string connectionStringSettingName = "AzureConnectionString";
        string azureDriveContainerName = "azuredrives";
        string azureDrivePageBlobName = Guid.NewGuid().ToString("N").ToLowerInvariant();
        string azureDriveCacheDirName = Path.Combine(Environment.CurrentDirectory, "cache");

        CloudStorageAccount.SetConfigurationSettingPublisher((a, b) =>
        {
            b(RoleEnvironment.GetConfigurationSettingValue(connectionStringSettingName));
        });

        //CloudStorageAccount storageAccount=CloudStorageAccount.FromConfigurationSetting(connectionStringSettingName);
CloudStorageAccount storageAccount=CloudStorageAccount.DevelopmentStorageAccount;

        LocalResource localCache=RoleEnvironment.GetLocalResource("InstanceDriveCache");
        CloudDrive.InitializeCache(localCache.RootPath + "cache", localCache.MaximumSizeInMegabytes);

        // Just checking: make sure the container exists
        CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
        blobClient.GetContainerReference("drives").CreateIfNotExist();

        // Create cloud drive
     //WebRole.drive=storageAccount.CreateCloudDrive(blobClient.GetContainerReference("drives").GetPageBlobReference("Test.VHD").Uri.ToString());
        WebRole.drive = storageAccount.CreateCloudDrive("drives/Test.VHD");

        try
        {
            WebRole.drive.CreateIfNotExist(512);
        }
        catch (CloudDriveException ex)
        {
            // handle exception here
            // exception is also thrown if all is well but the drive already exists
        }

        foreach (var d in CloudDrive.GetMountedDrives())
        {
            var mountedDrive = storageAccount.CreateCloudDrive(d.Value.PathAndQuery);
            mountedDrive.Unmount();
        }
        //Global.driveLetter = drive.Mount(25, DriveMountOptions.Force);
        Global.driveLetter = drive.Mount(localCache.MaximumSizeInMegabytes - 20, DriveMountOptions.Force);
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:23:58.883

也许这是显而易见的，但是......当您部署到 Windows Azure 时，您是否从开发存储更改了存储帐户？您有硬编码的 dev 存储模拟器：

`CloudStorageAccount storageAccount=CloudStorageAccount.DevelopmentStorageAccount;`

# ruby-on-rails - will_paginate on Ruby on Rails 3.2 与多个数据库

> ID：10009287
> 
> 赞同：2
> 
> 时间：2012-04-04T10:27:33.847
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3, will-paginate

我的 rails 应用程序连接到 mysql 数据库，但在一个模型（“客户”）中，我使用不同的 sql server 数据库。我的应用程序运行良好，我可以使用 获得所有客户`Customer.all`，但是当我尝试添加分页时出现此错误：

```
Mysql2::Error: Table 'mysql_database.Customers' doesn't exist: SHOW CREATE TABLE `Customers` 
```

出于某种原因，will_paginate 正在我的主数据库（mysql）而不是 sql server db 中搜索表。

在我的客户控制器中，我有这个：

```
def index
  @customers = Customer.paginate :page=>params[:page], :order=>'name1, name2 asc',
      :per_page => 20

  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @customers }
  end
end 
```

这是我的 SQL Server 模型，它连接到 mssql_db

```
class Customer < ActiveRecord::Base
  self.primary_key = :CustomerCode

  alias_attribute :id, :CustomerCode

  has_many :tickets

  establish_connection Rails.configuration.database_configuration["mssql_db"] 
end 
```

我不明白我做错了什么......

# ember.js - 在 emberdata 中持久化 hasMany assoc

> ID：10009288
> 
> 赞同：2
> 
> 时间：2012-04-04T10:27:38.053
> 
> 标签：ember.js, ember-data

使用 hasMany associacion 持久化新模型实体的任何示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:04:19.223

这是一个例子，见[http://jsfiddle.net/pangratz666/vuT2v/](http://jsfiddle.net/pangratz666/vuT2v/)

```
App.Comment = DS.Model.extend({
    text: DS.attr('string')
});

App.Post = DS.Model.extend({
    title: DS.attr('string'),
    comments: DS.hasMany('App.Comment')
});

var first = App.Comment.createRecord({
    id: 'firstComment',
    text: 'first comment'
});
var second = App.Comment.createRecord({
    id: 'secondComment',
    text: 'second comment'
});

var post = App.Post.createRecord({
    id: 1,
    title: 'post title'
});

var comments = post.get('comments');
comments.addObject(first);
comments.addObject(second);

App.store.commit();​ 
```

# php - 点击返回时如何选择网页

> ID：10009294
> 
> 赞同：2
> 
> 时间：2012-04-04T10:27:54.170
> 
> 标签：php, codeigniter, button, redirect, back

我有一个php页面（硬编码php），我的目标是当用户点击浏览器的后退按钮时，他会自动重定向到其他页面（这个页面是用代码点火器编写的）。我下载 [了后退按钮检测库](http://www.bajb.net/2010/02/browser-back-button-detection/) 并在 js 中尝试了这种方法：

```
<script type="text/javascript">
bajb_backdetect.OnBack = function(){
    //window.location.href =  "http://google.com";
    //window.history.back(-2);
    //window.navigate('http://google.com');
    //self.location='http://google.com';
    alert("back");
     window.history.back();
} 
```

我也尝试使用 $_SESSION （在硬编码的 php 上设置值，如果值相同，请检查 codeigniter 页面上的值，我尝试将它们重定向到另一个页面），但它不能正常工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:02:59.867

不要这样做！如果浏览器本身没有按预期执行，您的用户会感到非常困惑，并且可能会非常生气。最好在您的站点中设置一个按钮，将用户重定向到您希望他们去的地方，但要确保按钮的作用非常清楚。我不完全清楚您要达到的目标，但如果您看到“确认表单重新提交”消息，这是一条标准浏览器消息，此时正在加载的页面是表单提交的结果。

# jquery - jQuery post 返回变量

> ID：10009295
> 
> 赞同：0
> 
> 时间：2012-04-04T10:27:54.460
> 
> 标签：jquery, post

我需要根据来自 jQuery 帖子的 Javascript 变量设置表格的宽度。

```
$.post("get.php", {this: 'that'}, function(data){ 
var width = data // eg '300'

? set table width to 'width' 
```

我是 jQuery 新手，我知道如何将 return 设置为 div 标签，但我猜在这种情况下这对我没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:31:13.420

首先使用转换为数值，`parseInt`然后设置`width`jQuery 对象的属性：

```
var width = parseInt(data, 10);
$("#myTable").width(width); 
```

“myTable”应更改为实际`<table>`元素的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:34:28.187

正如影子向导所说，这里是 jquery 文档页面 [http://api.jquery.com/width/](http://api.jquery.com/width/)

# jquery - 从列表底部删除 li

> ID：10009296
> 
> 赞同：0
> 
> 时间：2012-04-04T10:27:57.953
> 
> 标签：jquery, jquery-selectors

我有一个包含一些 lis 的列表。

```
<ul>
        <li id="eup">....</li>
        <li id="1">a</li>
        <li id="2">b</li>
        <li id="3">c</li>
        <li id="4">d</li>
        <li id="5">e</li>
        <li id="ebtm">....</li>
    </ul> 
```

我想从底部删除 li，从 id=5 的 li 到 id 为 3 的 li。不应删除 id=ebm 的 li。对此有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:31:03.643

您可以使用[`.nextUntil`](http://api.jquery.com/nextUntil/)来获取开始和结束元素之间的所有元素：

```
var $start = $("#3");
var $end = $("#5");
$start.nextUntil($end).add($start).add($end).remove(); 
```

如果您不希望开始和结束元素本身也被删除，只需不包括相应的`.add`调用。

**[看到它在行动](http://jsfiddle.net/defacer/tSVAK/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:13:08.630

使用 jQuery **slice()**方法。
[http://api.jquery.com/slice/](http://jQuery%20slice)

像这样：

```
$("ul li").slice(3, 6).remove(); 
```

# vb.net - 为什么要在 finally 块中将对象设置为 Nothing？

> ID：10009297
> 
> 赞同：3
> 
> 时间：2012-04-04T10:28:00.157
> 
> 标签：vb.net, object, try-catch-finally, nothing

在这个 VB.NET 代码中：

```
Dim o as SomeClass
Try
   o = new SomeClass
   'call some method on o here
Catch(...)
   ...
Finally
   o = Nothing
End Try 
```

为什么需要将 o 设置为`Nothing`？如果我不将其设置`Nothing`为`Finally`块怎么办？我认为如果你不设置它是可以的，`Nothing`因为该对象将被标记为 GC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:31:12.087

如果对象在 try catch 之外使用不安全，应该这样做。例如，如果这是一个流，您会看到流关闭，然后设置为空。这并不总是正确的做法，但这段代码经常被看到。

考虑这段代码

```
Sub Main()
    Dim o As String
    Try
        o = "Hello"
        Console.Out.WriteLine("hi {0}", o)
    Catch ex As Exception
        ' do something here
    Finally
        o = Nothing
    End Try

    ' unable to do something here
End Sub 
```

尽管这是一个愚蠢的例子，但这确实意味着您现在不能在外部引用 o ，因为它不再设置为对象的实例。这就是为什么很多人都这样做的原因。如果您在一个函数中并且函数在该点结束，则无需设置为 Nothing，因为该对象超出范围，但是很多人会`Nothing`出于习惯将东西设置为**我认为不正确和糟糕的代码设计**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:30:04.830

这是因为在 try..catch..finally 块之外使用该对象是不安全的。不能保证它处于一致状态，因此将其设置为 Nothing 以表明不应该使用 t。

# asp.net - 无法在我的代码隐藏中引用库

> ID：10009299
> 
> 赞同：0
> 
> 时间：2012-04-04T10:28:13.993
> 
> 标签：asp.net, asp.net-3.5

我正在尝试使用以下 ExcelReader 库：

[http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)

代码示例显示：

```
//1\. Reading from a binary Excel file ('97-2003 format; *.xls)
IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream); 
```

我的应用程序（不幸的是）在 VB.NET 中。我写了以下内容：

```
Dim excelReader as IExcelDataReader 
```

但是我只是得到“IExcelDataReader 未定义”。

我尝试通过执行以下操作导入 Excel.dll：

```
Imports Excel 
```

但我又得到了一个错误。

为什么是这样？我怎样才能引用这个库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:46:32.103

尝试这个

```
Dim excelReader As IExcelDataReader = ExcelReaderFactory.CreateBinaryReader(stream) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:32:27.483

无论如何，您的项目是否定义为 .NET 4.0 客户端配置文件？如果是这样，请将其更改为完整的 .NET 4.0。

# ruby-on-rails - 如何从流水号创建行？

> ID：10009300
> 
> 赞同：0
> 
> 时间：2012-04-04T10:28:17.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, ruby-on-rails-3.1, data-migration

我正在尝试从文档编号编写运行编号的代码，具有以下值

牢记数据：

```
 document_types records :
       {:document_type_code => 'PR', :running_no => 2, ...}
       {:document_type_code => 'SO', :running_no => 1, ...}

   transactions records :
       {:id => 1, :document_no=> 'PR000001', :document_type_code=> 'PR', ...}
       {:id => 2, :document_no=> 'SO000001', :document_type_code=> 'SO', ...}
       {:id => 3, :document_no=> 'PR000002', :document_type_code=> 'PR', ...} 
```

该设计：

```
create_table :runnings do |t|
  t.string :document_type_code, :null => false, :limit => 2
  t.integer :running_no, :null => false, :default => 0
  ...
  t.timestamps
end

create_table :transactions do |t|
  t.string :document_no, :null => false
  t.string :document_type_code, :null => false, :limit => 2      
  ...
  t.timestamps
end 
```

如何在 Transactions 中生成 document_no？

```
 document = Transaction.new
 document.document_type_code = 'PR'
 document.document_no = ??????
 ...
 document.save! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:04:49.217

使用 ruby​​ 方法 'next' ：

```
irb(main):019:0> 'PR000001'.next
=> "PR000002" 
```

你也可以使用方法'succ'：

```
irb(main):022:0> 'PR000001'.succ
=> "PR000002" 
```

看看链接：

[http://www.devarticles.com/c/a/Ruby-on-Rails/Iterating-and-Incrementing-Strings-in-Ruby/3/](http://www.devarticles.com/c/a/Ruby-on-Rails/Iterating-and-Incrementing-Strings-in-Ruby/3/)

**编辑：**

您可以获得不一样的增量文档：

```
transaction = Transaction.last 
transaction.nil? 'PR000001' ? : transaction.document_no.succ
OR
transaction.nil? 'PR000001' ? : transaction.document_no.next 
```

希望有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:47:15.900

您可以获得每个“document_type_code”的所有运行数字的计数，并将其从 1 递增

你可以为此写一个范围

高温高压

# c# - 如何从动态转换的类中获取子成员值？

> ID：10009307
> 
> 赞同：0
> 
> 时间：2012-04-04T10:28:35.663
> 
> 标签：c#, asp.net, dynamic, casting

好吧，我正在尝试从动态转换的类中获取类成员值，但我无法找到它的子类成员值。
现在我正在获取 TotalWeight 成员属性，但我也想获取 AnotherClass 的子成员属性，例如 AnotherClass.child。我怎样才能得到那些成员？

```
string ClassName="something";
Type  types = Type.GetType(ClassName, false);
var d = from source in types.GetMembers().ToList()
        where source.MemberType == MemberTypes.Property
        select source;

List<MemberInfo> members = d.Where(memberInfo => 
                                   d.Select(c => c.Name)
                                    .ToList()
                                    .Contains(memberInfo.Name))
                            .ToList();

PropertyInfo propertyInfo;
object value;
foreach (var memberInfo in members)
{
  propertyInfo = typeof(T).GetProperty(memberInfo.Name);
  if (myobj.GetType().GetProperty(memberInfo.Name) != null)
  {
    value = myobj.GetType()
                 .GetProperty(memberInfo.Name)
                 .GetValue(myobj, null);
   //how to get child members value here?

  }
}

//Where class something has member 

public class something 
{
  private decimal _totalWeight;       
  private Anotherclass _another;
  public decimal  TotalWeight
  {
    get
    {
      return this._totalWeight;
    }
    set
    {
      this._totalWeight = value;
    }
  }   

  public Anotherclass Another
  {
    get
    {
      return this._another;
    }
    set
    {
      this._another= value;
    }
  }     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:11:27.063

您可以获取属性的类型，然后在代码开头使用此类型。

```
foreach( var memberInfo in members )
{
  propertyInfo = types.GetProperty( memberInfo.Name );
  if( propertyInfo != null )
  {
     Console.WriteLine( propertyInfo.PropertyType ); 
     // type of every property
  }
} 
```

# symfony1 - Symfony, url_for 搜索参数

> ID：10009308
> 
> 赞同：0
> 
> 时间：2012-04-04T10:28:39.260
> 
> 标签：symfony1

我目前正在扩展一个站点，并且对 symfony 没有太多经验。

目前有一个看起来像这样的搜索表单：

```
<form id="search_huts_form" action="<?php echo url_for('hut/search') ?>" method="get">
  <fieldset>
    <legend><strong><?php echo __('Search huts') ?></strong></legend>
    <table id="spielplantabelle">
      <tr>
        <td><?php echo __('Your arrival date?') ?></td>
        <td>
          <select name="arrival">
            <option value=""><?php echo __('no preference') ?></option>
            <?php foreach ($checkInDates as $date): ?>
                <option value="<?php echo $date ?>"><?php echo $date ?></option>
            <?php endforeach; ?>
          </select>
    </table>
    <input type="submit" value="<?php echo __('Search') ?>" name="Submit" class="inputbuchen" />
  </fieldset>
</form> 
```

现在我必须在搜索表单下方创建一个包含特价商品的类别列表，也可以使用表单中使用的搜索功能找到这些商品。这是我到目前为止所拥有的：

```
<ul>
    <?php foreach ($types as $typ): ?>
        <?php if (preg_match('#[0-9]#',$typ)): ?>
            <li> <a href="<?php echo url_for('hut/search') ?>"><?php echo($typ) ?></a> </li>
            <?php endif; ?>
    <?php endforeach; ?>
</ul> 
```

链接正确转发到搜索页面，但我不知道如何根据用户单击的链接设置参数。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:34:39.740

我希望我能解决你的问题。您可以在链接中添加一些额外的 url 参数。

例如

`<li> <a href="<?php echo url_for('hut/search?id='.$id) ?>"><?php echo($typ) ?>`

然后您可以在您打开的页面上查询此 id。

```
$request->getGetParameter('id'); 
```

希望这可以帮助。

# c - 使用指针 C/C++ 进行索引

> ID：10009312
> 
> 赞同：-4
> 
> 时间：2012-04-04T10:28:47.337
> 
> 标签：c

嘿，我正在尝试编写一个程序来执行牛顿法并找到方程 exp(-x)-(x^2)+3 的根。它的工作原理是找到根，但我也希望它在每次迭代后打印出根，但我无法让它工作，谁能指出我的错误，我认为它与我的索引有关？

太感谢了 ：）

```
#include <stdio.h>
#include <math.h>
#include <malloc.h>

//Define Functions:
double evalf(double x)
{
        double answer=exp(-x)-(x*x)+3;
        return(answer);
}
double evalfprime(double x)
{
        double answer=-exp(-x)-2*x;
        return(answer);
}
double *newton(double initialrt,double accuracy,double *data)
{
        double root[102];
        data=root;
        int maxit = 0;
        root[0] = initialrt;
        for (int i=1;i<102;i++)
        {
                *(data+i)=*(data+i-1)-evalf(*(data+i-1))/evalfprime(*(data+i-1));
                if(fabs(*(data+i)-*(data+i-1))<accuracy)
                {
                        maxit=i;
                        break;
                }
                maxit=i;
        }

        if((maxit+1==102)&&(fabs(*(data+maxit)-*(data+maxit-1))>accuracy))
        {
                printf("\nMax iteration reached, method terminated");
        }      
        else
        {
                printf("\nMethod successful");
                printf("\nNumber of iterations: %d\nRoot Estimate: %lf\n",maxit+1,*(data+maxit));
        }

        return(data);
}

int main()
{
    double root,accuracy;
    double *data=(double*)malloc(sizeof(double)*102);

    printf("NEWTONS METHOD PROGRAMME:\nEquation: f(x)=exp(-x)-x^2+3=0\nMax No iterations=100\n\nEnter initial root estimate\n>> ");
    scanf("%lf",&root);
    _flushall();
    printf("\nEnter accuracy required:\n>>");
    scanf("%lf",&accuracy);
    *data= *newton(root,accuracy,data);
    printf("Iteration        Root           Error\n ");
    printf("%d          %lf             \n", 0,*(data));
    for(int i=1;i<102;i++)
    {
        printf("%d             %5.5lf           %5.5lf\n", i,*(data+i),*(data+i)-*(data+i-1));
        if(*(data+i*sizeof(double))-*(data+i*sizeof(double)-1)==0)
        {
            break;
        }
    }
    getchar();
    getchar();
    free(data);
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:39:33.170

没有冒犯，但是您的问题对否决票非常诱人。不相关的问题标题，荒谬的编码风格（我的意思是制表）。

同样在您的`newton`函数中，实际上不需要存储所有中间结果，Newton-Raphson 不应使用额外的内存（即 O(1)）。

只需在迭代循环内部`printf`添加即可。`newton`这是一个问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:40:08.803

在`newton`中，您将返回函数返回后不再存在的局部变量的地址。之后访问它是未定义的行为。

在`main`你有

```
if(*(data+i*sizeof(double))-*(data+i*sizeof(double)-1)==0) 
```

`data`是 a `double*`，所以从头开始`data + i`处理第 i 个。`double`通过将偏移量乘以`sizeof(double)`，您可以访问超出数组末尾的 if `i > number_of_elements/sizeof(double)`，还有更多未定义的行为。

而且，感谢 JeremyP 在`main`您的电话中找到它`newton`

```
*data= *newton(root,accuracy,data); 
```

它取消引用返回的指针`newton`（未定义的行为，但此时可能会做你想做的事）并将该值存储在`data`分配的第一个插槽中`main`。这可能会为您提供`root`数组的初始元素 from `newton`，但不会更改分配给`data`in的内存块中的任何其他内容`main`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:20:30.860

```
void newton(double initialrt,double accuracy,double *data)
{
    double root[102];
    data=root;
    // at this moment the values in the original argument data[]
    // are no longer accessible to this function.
    int maxit = 0;
    root[0] = initialrt;
    for (int i=1; i < 102; i++)
        {
                data[i] = data[i-1] 
                 - evalf(data[i-1]) / evalfprime( data[i-1] );
                if ( fabs(data[i] - data[i-1]) < accuracy )
                {
                        maxit=i;
                        break;
                }
                maxit=i;
        }

        if ( maxit+1 == 102 && fabs(data[maxit] - data[maxit-1] ) > accuracy )
        {
                printf("\nMax iteration reached, method terminated");
        }      
        else
        {
                printf("\nMethod successful");
                printf("\nNumber of iterations: %d\nRoot Estimate: %lf\n",maxit+1
                ,data[maxit);
        }
    return;
} 
```

（这只是一种风格上的评论，因为真正的问题已经解决了）

*   指针解引用和数组索引在 C 中是等价的。你`*(data+i) = ...`的等价于`data[i] = ...`
*   返回值是无用的，该函数可以返回一些有用的东西（例如准确性）
*   return 不是函数。没必要`return(something);`只是`return something;`会做。
*   你返回一个指向本地数组根的指针，当调用者看到它时，它超出了范围。
*   空格会改变阅读体验

更新：再想一想，我认为在内部循环中，OP 的*意图*是：

```
root[i] = root[i-1] 
        - evalf(data[i-1]) / evalfprime( data[i-1] );
if ( fabs(data[i] - data[i-1]) < accuracy )
     {
     maxit=i;
     break;
     }
maxit=i; 
```

# php - 为什么 Form->select 没有包装 div？

> ID：10009314
> 
> 赞同：1
> 
> 时间：2012-04-04T10:28:53.633
> 
> 标签：php, forms, select, cakephp

我想知道为什么`$this->Form->select()`在 CakePHP 2.1 中没有包装`div`和`label`.

我是否必须像这样自己包装它：

```
<?php
     echo '<div><label for="MyModel">MyModel</label>';
     echo $this->Form->select('MyModel', $options, array('empty' => 'choose one'));
     echo '</div>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:41:23.523

这就是为什么我从不使用其他任何东西

```
$this->Form->input(); 
```

在你的情况下：

```
$this->Form->input('name', array('type'=>'select', 'empty' => 'choose one', 'options'=>$options)); 
```

无需使用 select()、text() 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:42:30.533

```
<?php
echo $this->Form->input('MyModel', array(
        'options' => array(
            'val1' => 'option1',
            'val2' => 'option2'
        )
        ,
        'empty' => __('choose one'),
    ));
?> 
```

将实现相同的目标

# liferay - 为所有 liferay 表添加默认表名前缀

> ID：10009316
> 
> 赞同：0
> 
> 时间：2012-04-04T10:28:56.537
> 
> 标签：liferay, prefix

我可以通过做一些配置更改来为它最初创建的所有 Liferay 表添加前缀吗？

我是 Liferay 的新手，我正在分析它以供我使用。

我收集到正在创建的新表是前缀以避免任何冲突，但我有一种情况，如果反过来，它更适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:45:59.857

对于 Liferay 在第一次启动时创建的表格，答案是否定的。正如您发现使用 servicebuilder 新创建的表是肯定的（使用命名空间标记）

# java - Server 2008 上的 Java bat 脚本

> ID：10009317
> 
> 赞同：0
> 
> 时间：2012-04-04T10:29:01.777
> 
> 标签：java, windows

我需要使用 .bat 文件来启动我的 Java 程序。java程序检测到java可用（图标是java），但是，我有点不确定启动应用程序的脚本命令。

有没有办法明确说明 javaw.exe 的位置？

我有：

> ```
> cd C:\My_Jar_Folder
> java -jar My_Program.jar 1000 32
> pause 
> ```

但它找不到“java”，所以我想明确告诉它 bin 文件夹在哪里。这是在服务器 2008 上

编辑：已解决，创建了一个新的环境变量，键“PATH”和值“C:\Program Files (x86)\Java\jre6\bin”

# android - 如何重复使用一个屏幕进行多项活动？

> ID：10009319
> 
> 赞同：0
> 
> 时间：2012-04-04T10:29:03.410
> 
> 标签：android, xml, android-activity, reusability

在我的情况下，我有一个带有 20 个字段的 XML，基于我们想要显示表单的类型，但每种类型都不需要所有字段我如何隐藏字段并显示特定类型的相应字段。我想为所有类型重用同一个屏幕但是我们想隐藏字段而不影响填充？

提前致谢.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:37:03.187

隐藏您最初不想在活动中显示的字段..

# ruby-on-rails - Rspec 和非 RestFul 路由

> ID：10009324
> 
> 赞同：1
> 
> 时间：2012-04-04T10:29:14.837
> 
> 标签：ruby-on-rails, rspec, routes

我正在做作业，但我对非 RestFul 路线有疑问。我的规格是：

```
require 'spec_helper'

describe MoviesController do
  describe 'searching TMDb' do
    before :each do
      @fake_results = [mock('Movie'), mock('Movie')]
    end
    it 'should call the model method that performs TMDb search' do
      Movie.should_receive(:find_in_tmdb).with('Star Wars').
        and_return(@fake_results)
      get :search_similar_movies, { :search_terms => 'Star Wars' }
    end
  end
end 
```

在 config/routes.rb 我有：

```
resources :movies
  'movies/search_similar_movies/:search_terms' 
```

但是当我运行自动测试时，它给了我以以下开头的错误：

```
/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.1.0/lib/action_dispatch/routing/mapper.rb:181:in `default_controller_and_action': missing :action (ArgumentError) 
```

很明显，config/routes.rb 出了点问题。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:34:05.003

你的路线应该是这样的

```
resources :movies do
    get 'search_similar_movies', :on => :collection
end 
```

或者

`match 'movies/search_similar_movies/:search_terms' => 'movies#search_similar_movies', :via => :get`

# jsf-2 - JBoss 没有响应有效的 URL

> ID：10009326
> 
> 赞同：1
> 
> 时间：2012-04-04T10:29:24.273
> 
> 标签：jsf-2, jboss7.x

我在 linux 服务器上遇到了 JBoss AS 7 的奇怪行为。当我使用我的应用程序部署战争时，服务器不会响应此应用程序的有效 HTTP 请求。当我尝试获取一个有效的 URL 时，我可以在日志中看到调用了后端函数（例如 DAO 方法），调试日志显示我的 JSF 中的后续标记已呈现，我什至可以看到一条消息`Rendering View index.xml`，但响应从未到达客户端。当我使用不存在的 URL（例如`index.asd`）时，响应为 404，而当我使用错误的页面名称（例如`inswxasd.xhtml`）时，响应为 500。因此，只有有效请求才会失败。

我尝试远程连接（使用 firefox）和本地连接（使用`wget`），我重现了这个问题。奇怪的是，我部署了我已经使用过的战争，然后它起作用了。

**编辑1：**

我刚刚注意到，当我发送请求时，服务器进程占用了 200% 的 CPU。此外，只有一个具有堆栈的应用程序会发生这种情况：Hibernate、Spring、JSF 2.0、Primefaces。

**编辑2：**

这是[带有 jstack 输出](http://pastie.org/private/5ibhlq0uyycbwhnrivqqaq)( `jstack -l -F <PID>`) 的馅饼。所有线程都被阻塞。

此外，我注意到（使用`top`和转储 JBoss 进程的堆栈）问题很可能是由一个名为`http--0.0.0.0-8080-1`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T07:19:41.450

感谢帮助。我将数据库恢复到以前的状态，它开始工作。显然数据中存在导致此无限循环的问题。现在我们需要找到它，但由于它是可重现的，我会管理的。

# sql - 获取相同类型的两个数据库列的关联名称

> ID：10009329
> 
> 赞同：0
> 
> 时间：2012-04-04T10:29:33.430
> 
> 标签：sql

我的架构如下：

*   该`airports`表包含机场名称。它的主键是一个整数，`id`.
*   该`flights`表包含飞行数据。它有两个外键，`departure_airport_id`并且`arrival_airport_id`

我正在尝试获取航班上出发机场和到达机场的名称。现在我的SQL如下：

```
SELECT name AS departure_airport, name AS arrival_airport FROM flights, airports WHERE departure_airport_id = airports.id OR arrival_airport_id = airports.id 
```

我可以看出这是多么模棱两可，因为数据库不知道`departure_airport`我的意思是“arrival_airport_id”的名称`departure_airport_id`，`arrival_airport`但是在飞行记录上获取两个机场的名称的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:31:43.107

从航班加入到 airports 表中两次，如下所示：

```
SELECT dep.name AS departure_airport, arr.name AS arrival_airport 
FROM flights f
    JOIN airports dep ON f.departure_airport_id = dep.id 
    JOIN airports arr ON f.arrival_airport_id = arr.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:34:09.607

```
 SELECT departure_airport.name AS departure_airport, 
           arrival_airport.name AS arrival_airport 
      FROM flights
INNER JOIN airports departure_airport
        ON departure_airport.id = flights.departure_airport_id
INNER JOIN airports arrival_airport
        ON arrival_airport.id = flights.arrival_airport_id 
```

如果您使用不同的别名，则多次加入表没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:34:25.847

```
SELECT depart.name AS departure_airport, arr.name AS arrival_airport 
FROM flights, airports arr,airports depart 
WHERE departure_airport_id = depart.id and
arrival_airport_id = arr.id 
```

# php - 从 csv 文件中获取值，查看数据库，获取与该值匹配的记录的 id

> ID：10009334
> 
> 赞同：1
> 
> 时间：2012-04-04T10:29:50.607
> 
> 标签：php, mysql

好的，伙计们，这对你来说很有趣。

所以我们的后台系统包含所有的游轮票价，我们制作了一个不错的小脚本，允许后台系统导出的票价导入网站。

这是一个简洁的脚本，除了...后台系统导出游轮代码，例如 P210，并且网站的数据库有一个票价表，其中包含作为记录的每个票价，通过“cruise_id”连接到相关的游轮

所以游轮表是这样的

id 标题代码离开.....等等

票价表是这样的

id Cruise_id 票价优惠...等

在网站上运行良好，但后台导出不知道网站上游轮的唯一 ID。

那么有没有可能，在我们上传 csv 文件之后，在它插入之前，使用代码从 Cruises 表中查找 Cruise_id，并在插入查询中使用它？

这是到目前为止的上传脚本

```
<?php
 require_once('includes/connection.php');
 if(isset($_POST['submit']))
   {
     $filename=$_FILES['filename']['tmp_name'];
     $handle = fopen("$filename", "r");
     while (($data = fgetcsv($handle, 100000, ",")) !== FALSE)
     {

       $import="INSERT into fares_usa(cruise_id, active, type, category, placement, deck, fare, offered, status, sortorder) 
       values('".mysql_real_escape_string($data[0])."',
       '".mysql_real_escape_string($data[1])."',
       '".mysql_real_escape_string($data[2])."',
       '".mysql_real_escape_string($data[3])."',
       '".mysql_real_escape_string($data[4])."',
       '".mysql_real_escape_string($data[5])."',
       '".mysql_real_escape_string($data[6])."',
       '".mysql_real_escape_string($data[7])."',
       '".mysql_real_escape_string($data[8])."',
       '".mysql_real_escape_string($data[9])."')";
       mysql_query($import, $connection) or die(mysql_error());
     }
     fclose($handle);
     print "Import done";
   }
   else
   {

      print "<form enctype='multipart/form-data' action='fileupload.php' method='POST'>";
      print "Select file to import:";
      print "<input type='file' name='filename' size='20'>";
      print "<input type='submit' name='submit' value='submit'></form>";
   }
   ?> 
```

我希望我已经解释过了...

富有的 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:11:13.957

嗯，前触发器不会起作用吗？触发“在每行插入 xy 之前”，然后检查“如果 new.cruise_id 为空，则选择进入 Cruise_id”。也许您必须为代码（P120）添加一个额外的列，因为代码不是像 ID 这样的数字。为了节省空间，您可以在查找 id 后在同一触发器中将代码列值设置为 null。

单独的加载器表或可插入视图（也许）也可以是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:30:22.303

修复它...这是代码

```
<?php
 require_once('includes/connection.php');
 if(isset($_POST['submit']))
   {
     $filename=$_FILES['filename']['tmp_name'];
     $handle = fopen("$filename", "r");
     while (($data = fgetcsv($handle, 100000, ",")) !== FALSE)
     {
         $lookup_cruise = mysql_real_escape_string($data[0]);

    $query_cruiseid = "SELECT id FROM cruises WHERE code = '{$lookup_cruise}'";
    $get_cruiseid = mysql_query($query_cruiseid, $connection);
        $cruise_id = mysql_fetch_assoc($get_cruiseid);

       $import="INSERT into fares_usa(cruise_id, active, type, category, placement, deck, fare, offered, status, sortorder) 
   values('".mysql_real_escape_string($cruise_id['id'])."',
   '".mysql_real_escape_string($data[1])."',
   '".mysql_real_escape_string($data[2])."',
   '".mysql_real_escape_string($data[3])."',
   '".mysql_real_escape_string($data[4])."',
   '".mysql_real_escape_string($data[5])."',
   '".mysql_real_escape_string($data[6])."',
   '".mysql_real_escape_string($data[7])."',
   '".mysql_real_escape_string($data[8])."',
   '".mysql_real_escape_string($data[9])."')";
   mysql_query($import, $connection) or die(mysql_error());
     }
     fclose($handle);
     print "Import done";
   }
   else
   {

  print "<form enctype='multipart/form-data' action='fileupload.php' method='POST'>";
  print "Select file to import:";
  print "<input type='file' name='filename' size='20'>";
  print "<input type='submit' name='submit' value='submit'></form>";
   }
  ?> 
```

# jsp - 使用 Tomcat 时图片放在哪里？

> ID：10009335
> 
> 赞同：2
> 
> 时间：2012-04-04T10:29:55.603
> 
> 标签：jsp, tomcat

> **可能重复：**
> [调用转发到 JSP 的 Servlet 时，浏览器无法访问 CSS 和图像](https://stackoverflow.com/questions/3655316/browser-cant-access-css-and-images-when-calling-a-servlet-which-forwards-to-a-j)

我知道这个问题被一次又一次地问到，但我就是无法让它发挥作用。

[文件夹结构 http://kauko.pingtimeout.net/venttiCap.JPG](http://kauko.pingtimeout.net/venttiCap.JPG)

我在 WebContent/kuvat/ 文件夹中有我的图像。我还将其中一张图片直接放入 WebContent 文件夹 (hertta1.gif)。但是当我尝试使用这样的图像时

```
<img src="kuvat/hertta1.gif" /> or <img src="hertta1.gif" /> 
```

什么都没发生。kuvat/*gif 请求导致 404，而另一个显然是空响应。

GameServlet 是唯一的 Servlet，它映射到 '/'。所以在使用应用程序时，我使用地址“ [http://localhost:8080/VenttiWeb/](http://localhost:8080/VenttiWeb/) ”

我正在使用Tomcat7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T15:42:19.253

你有没有尝试过这样的事情？

```
<img src="/kuvat/hertta1.gif" /> or <img src="/hertta1.gif" /> 
```

此外，硬编码上下文路径可能不是一个好主意。在 JSP 中，您可能会尝试以下操作：

```
<img src="${pageContext.request.contextPath}/kuvat/hertta1.gif"/> 
```

类似的事情可以通过使用 ServletContext 而不是 PageContext 的 servlet 完成。

参考： http: [//www.coderanch.com/how-to/java/ResourceUrlProblems](http://www.coderanch.com/how-to/java/ResourceUrlProblems)

# java - JAVA - 它是 java.util.Calendar 类中的错误还是什么？

> ID：10009339
> 
> 赞同：7
> 
> 时间：2012-04-04T10:30:02.177
> 
> 标签：java, android, date, calendar

我多次遇到同样的问题。

这个问题也有同样的问题，并且得到了同样的解决方案， [如何在android中比较已知时间和当前时间？](https://stackoverflow.com/questions/9795464/how-to-compare-known-hours-ad-current-hour-in-android/9817945#9817945)

**问题 ：**

当我`Calendar calCurr = Calendar.getInstance();`用来获取当前日期和时间的日历对象时，它总是返回错误。

我已经放了日志并检查了它，为了使它正确，我必须添加年和月，然后我得到了当前日期和时间的正确对象。

**见我的例子：**

```
 Calendar calCurr = Calendar.getInstance();
    Log.i("Time in mili of Current - Normal", ""+calCurr.getTimeInMillis()); 
                // see what it gives? dont know why?

    Date date = new Date();
    calCurr.set(date.getYear()+1900, date.getMonth()+1, date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());
                // so added one month to it

    Log.i("Time in mili of Current - after update", ""+calCurr.getTimeInMillis()); 
                // now get correct 
```

**问题 ：**

*   为什么它给出错误的输出？
*   是那里的错误还是我对 Calendar 类的概念是错误的？
*   告诉我应该为此做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T10:36:10.070

如果您更改`getDate()`它的输出，它会按预期完美运行：

> 电流以英里为单位的时间 - 正常 Wed Apr 04 11:34:34 BST 2012
> 
> 当前时间以英里为单位 - 更新后 Fri May 04 11:34:34 BST 2012

你能指望什么 ？以毫秒为单位也等于 30 天：

> 电流以英里为单位的时间 - 正常 1333535834557
> 
> 当前时间以英里为单位 - 更新后 1336127834557

并且计算是（差异，除以一天中的毫秒数）：

```
1336127834557 - 1333535834557 = 2 592 000 000

2592000000 / 86400000 = 30 
```

1970 年之后的今天日期（以毫秒为单位）是[1333536754](http://www.esqsoft.com/javascript_examples/date-to-epoch.htm) ......这很合适，我认为没有问题。

**编辑**

**您的问题是您将月份设置为 3 月……您需要设置 2..因为月份的索引从 0 到 11。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T10:36:19.503

不要使用`date.getXXX()`. 不要使用任何 setter 或 getter，除了`Date.getTime()`. 它们都已被弃用。使用它们会导致意想不到的结果。

如果您调用`Calendar.getInstance()`，则它已设置为当前日期。如果您想设置或添加天、月等，请将它们设置在日历上。

例如`calCurr.set(Calendar.MONTH,2)`或`calCurr.add(Calendar.DAY,1)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T13:33:43.977

这不是错误，日历正在返回它应该返回的内容（至少在这里是这样）。

```
Calendar calCurr = Calendar.getInstance();
Log.i("Time in mili of Current - Normal", ""+calCurr.getTimeInMillis()); 
            // see what it gives? dont know why? 
```

我得到了 1333546375707 毫秒，这是正确的值（也是手工计算的）。
你在这里期待什么价值？你怎么知道是错的？

* * *

```
Date date = new Date();
calCurr.set(date.getYear()+1900, date.getMonth()+1, date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());
            // so added one month to it 
```

为什么要在月份中添加 ONE？日期和日历中的月份都是从零开始的 - 无需加 1。

* * *

**编辑**
手工计算（近似值）：

```
2012  - 42 years * 365.24 days/year * 86400 seconds/day
April - (31 + 29 + 31) days * 86400
4th   - 3 days * 86400
13:30 - 13.5 hours * 3600 seconds/hour
        ====================
        1333553112 seconds 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T10:37:31.933

> 日历月份是零索引的。所以当想要设置为 3 月 2 日而不是 3 日

另外，不要从 Date 对象中设置年、月和日期。如果您必须将日历初始化为日期，请执行以下操作：

```
 Calendar cal = Calendar.getInstance();
   cal.setTime(date); 
```

请注意，您的 Date 对象可能与您认为的语言环境不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T10:41:35.140

Java 基于日期的 API 设计不正确。在未来的版本中，我认为 API 的一些问题是计划解决的。

我建议使用[JodaTime](http://joda-time.sourceforge.net/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T12:29:12.980

当使用 Calendar.getInstance() 创建 Calendar 对象时，会设置 Calendar 对象中的实例变量“time”，并且只有在使用 Calendar.setTimeInMillis() 函数时才会更改此值。
来自日历对象的代码片段：

```
public long getTimeInMillis() {
        if (!isTimeSet) {
        updateTime();
    }
        return time;
    } 
```

当调用 Calendar.getInstance() 时，这里的“isTimeSet”将变为“true”，并且每次都返回“time”而不更新时间。

这就是每次调用 calCurr.getTimeInMillis(); 时获得相同时间值的原因；

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T10:35:03.687

这是`Calendar`. 由于某些原因，一月是第 0 个月，年份也不是很合乎逻辑。

我推荐 Joda 时间图书馆。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-04T10:39:40.723

我们正在使用下面的代码行来查找当前日期和时间它在我们这边工作正常。

```
 java.util.Calendar calc = java.util.Calendar.getInstance();

        int day = calc.get(java.util.Calendar.DATE);
        int month = calc.get(java.util.Calendar.MONTH)+1;
        int year = calc.get(java.util.Calendar.YEAR);

        String dayStr,monthStr;
        if(day<10){
            dayStr = "0"+day;
        }else{
            dayStr = ""+day;
        }
        if(month<10){
            monthStr = "0"+month;
        }else{
            monthStr = ""+month;
        }
        /*String currentdate = monthStr+"/"+dayStr+"/"+year+" ";*/
        String currentdate = dayStr+"/"+monthStr+"/"+year+" ";

        /*String currenttime = currentdate + String.valueOf(calc.get(java.util.Calendar.HOUR_OF_DAY))+ ":"+
        String.valueOf(calc.get(java.util.Calendar.MINUTE))+":"+String.valueOf(calc.get(java.util.Calendar.SECOND));*/

        return currentdate; 
```

# java - 在小部件android上绘制画布

> ID：10009342
> 
> 赞同：4
> 
> 时间：2012-04-04T10:30:21.293
> 
> 标签：java, android, xml, widget

我正在尝试在小部件上绘制画布，但我什么都没有。我有一个带有imageviev的表格，它的位图，我会在里面画出所有的美，但是它没有画出来……这是我的一段代码，它不能用什么？

我画的供应商

```
public class MainActivity extends AppWidgetProvider {

private Bitmap bmp;
private RemoteViews views;

public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    views = new RemoteViews(context.getApplicationContext().getPackageName(), R.layout.main);

    Paint paint = new Paint();
    paint.setStyle(Paint.Style.FILL);
    paint.setColor(Color.RED);
    paint.setTextSize(16);

    paint.setAntiAlias(true);
    paint.setTypeface(Typeface.MONOSPACE);

    Bitmap bmp = Bitmap.createBitmap(100, 16, Bitmap.Config.ALPHA_8);
    Canvas c = new Canvas(bmp);

    c.drawText("fdgfdgfdgfdfdfdgGFDFGFDDDDG", 0, 0, paint);

     views.setImageViewBitmap(R.id.imageView1, bmp);
} 
```

}

和我的 main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget_layout"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="8dip"
android:background="@drawable/ic_launcher" >
<ImageView 
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</ImageView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T05:28:40.587

看起来你可能有几个问题，但这可能对几个有帮助。

首先，您的 onUpdate 方法需要能够为每个将其 ID 传递给您的小部件提供服务。请注意，用户可以同时在一个或多个屏幕上创建您的小部件的多个实例。所以你需要做的第一件事是创建一个循环来绘制所有这些。

接下来，您需要在每个小部件准备好更新时通知小部件管理器。

您可能还需要使用不同的位图深度。ALPHA_8 在我的测试中不起作用，只显示黑色，但 ARGB_4444 起作用。

另请注意，您的 Bitmap 和 RemoteViews 成员变量隐藏了您在方法主体中创建的成员变量。我建议删除 RemoteViews 成员和堆栈位图。

将所有这些放在一起，结果如下所示：

```
public class MainActivity extends AppWidgetProvider {
    private Bitmap bmp = Bitmap.createBitmap(100, 16, Bitmap.Config.ARGB_4444);

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        for(int appWidgetId : appWidgetIds) {
            RemoteViews views = new RemoteViews(...);
            ...
            views.setImageViewBitmap(R.id.imageView1, bmp);
            appWidgetManager.updateAppWidget(appWidgetId, views);
        }
    } 
```

您也可能面临其他问题。例如，重要的是所有图形调用都在图形线程上执行。实现小部件比应用程序复杂得多。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:41:41.907

尝试为 x 和 y 设置不同的值。目前它正在绘制但超出位图的范围......所以试试......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T22:25:09.140

你需要打电话

```
appWidgetManager.updateAppWidget(appWidgetIds, views); 
```

# android - Android - 按钮上的 9patch 填充

> ID：10009343
> 
> 赞同：1
> 
> 时间：2012-04-04T10:30:23.417
> 
> 标签：android, android-layout, android-button

我创建了一个以 9patch 图像为背景的按钮。在 9patch 图像中，我使用底部和右侧的线来指定内容区域/填充，以将文本定位在按钮上。这在 TextView 上效果很好，但在 Button 上，内容行似乎对文本位置没有影响。设置“paddingTop”/“paddingBottom”似乎也没有效果——只有“padding”才有效果。

这是我的布局 XML：

```
<Button 
            android:layout_width="450dp"
            android:layout_height="198dp"
            android:text="Some text here"
            android:gravity="center"
            android:background="@drawable/my_button"/> 
```

有没有办法设置填充？也许我可以使用不同的视图而不是按钮？例如，我可以尝试只使用 TextView 并使其可点击，但我不确定这会产生什么其他副作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:34:39.503

明确设置`android:padding="@null"`解决了我的问题。

问题似乎是按钮（或我正在使用的主题中的一种样式）正在设置填充，它会覆盖按钮中的所有其他填充 - 背景可绘制中的填充，以及`paddingTop`等`paddingLeft`。

我的按钮布局现在定义如下：

```
<Button 
        android:layout_width="450dp"
        android:layout_height="198dp"
        android:text="Some text here"
        android:gravity="center"
        android:padding="@null"
        android:background="@drawable/my_button"/> 
```

我的 IDE (IntelliJ IDEA 11.1) 发现它`@null`是一个错误，即使它已编译。将其设置为`-1px`也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:47:20.550

如果您使用 9-patch 图像作为背景，则填充和拉伸区域都在背景中定义。

如果您使用 draw9patch 工具，它会非常形象化：填充（间接）使用内容区域（右侧和底部的线）定义：http: [//developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

# iphone - UILabel 中的英镑符号被神秘地编码为 HTML 实体

> ID：10009344
> 
> 赞同：1
> 
> 时间：2012-04-04T10:30:23.597
> 
> 标签：iphone, uilabel, html-entities

在我的 iPhone 应用程序中，应用程序从服务器接收 XML 格式的数据并将其显示在 UILabel 中。来自服务器的数据可能包含`£`符号。这个符号没有以任何方式编码 - 只是在 XML 字符串中传递。该应用程序获取此字符串并将其显示在 UILabel 中。

这在大多数情况下都可以正常工作。它在模拟器中总是可以正常工作，包括 iOS 5.1，但是其中一个用户报告了一个错误，表明`£`UILabel 实际显示而不是显示`&pound;`- 这是最奇怪的。

UILabel 文本是用这行简单的代码设置的：

```
contentLabel.text = [node getValueForKey:keyName]; 
```

我已经使用调试器逐步完成了代码，可以看到正在传递和设置正确的字符串值。我还可以在模拟器上看到正确的结果。

但是（如下图所示）该用户的手机出现了问题。有什么我想念的吗？这里可能是什么问题？而且，更重要的是，我该如何解决这个问题？事情变得复杂，因为我的手机和模拟器上一切正常，而且这个用户在全国各地，所以我无法物理访问他们的手机。

这是模拟器的屏幕截图：

![模拟器截图](../Images/85079a38548ff58459f3bfdeab521678.png)

这是受影响用户手机的屏幕截图：

![用户手机截图](../Images/503aef3ba25e9a1ad0481fe6532b8ffb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:39:46.883

您使用什么库来解析 XML？

尝试通过启用大量 NSLogging 的电子邮件向用户发送一个新版本（甚至可以使用 testflight，它非常棒 - 让您可以在它们进入时通过无线方式查看所有日志）以查看问题出现在哪里。

它们是否与您正在测试的模拟器使用不同的 iOS 版本？他们的 iPhone 是否总是出现问题。你自己的 iOS 设备呢，它永远不会发生吗？

很抱歉所有随机建议，我只是把东西扔在那里，以防其中一个人修复它。

如果他们运行与您相同的应用程序版本、相同的设备（真正的 iPhone 不是模拟器）和相同的 iOS 版本，我不知道问题是什么或可能是什么。

如果你觉得懒惰（我建议不要这样做，它很*老套*）你总是可以使用：

```
finalString = [firstString stringByReplacingOccurancesOfString:@"&pound;" withString:@"£"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:09:43.980

这个问题似乎已经自行解决了。我无法在 iOS 4 或 iOS 5 上重现它，我与之交谈的其他几个用户也无法重现。在与最初报告该问题的用户核实后，她说将 iOS 从 5.1 升级到 5.1.1 后，问题就消失了。那好吧... ：）

# html - C# 掘金服务器错误

> ID：10009346
> 
> 赞同：1
> 
> 时间：2012-04-04T10:30:34.133
> 
> 标签：html, version, websocket

我目前正在尝试启动并运行一个简单的客户端\服务器 websocket 演示，并且我正在尝试使用[C# Nugget 项目](http://nugget.codeplex.com/)作为我的服务器。我可以通过 Netscape (v5.1.4) 连接到服务器，但不能通过 Chrome (v18.0.1) 连接，并且我已经将问题追溯到客户端握手。

Nugget 期望客户端握手采用以下格式，这正是 Netscape 发送它的方式：

![预期的客户握手](../Images/c57523c425d65018ea51b64796b1e341.png)

另一方面，Chrome 的客户端握手看起来像这样：

![chrome客户端握手](../Images/ea4d2831f6eacb4e92ca8a92e6299218.png)

我已经强调了导致 Nugget 服务器出现问题的两个请求的差异 - sec-websocket 参数。

我猜测客户端握手的 Netscape 和 Chromes 实现是基于不同版本的 websocket 规范。 **有没有人有更多关于这方面的信息？是否可以只添加代码来处理这两种类型的握手，或者是否已弃用其中一种？**

欢迎任何见解，

詹姆士

*资源：[了解 Websocket 客户端握手](http://xebee.xebia.in/2010/12/30/understanding-websocket-handshake/)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:43:40.860

看起来 Netscape 正在使用该协议的较旧的、已弃用的[Hixie](https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76)变体。Safari 也使用这个。Chrome 使用更现代的[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)。您可以期望所有浏览器最终都使用 RFC 6455。

假设您想支持尽可能多的客户端类型，可以（确实正确）添加代码来处理这两种变体。请注意，握手后读取/写入的数据帧也会根据所使用的协议变体而变化。

# java - Java停放线程

> ID：10009347
> 
> 赞同：24
> 
> 时间：2012-04-04T10:30:35.253
> 
> 标签：java, multithreading

java中的停放线程和等待线程有什么区别？我有一个 jboss 核心转储，分析它显示了很多停放的线程。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-04T10:34:03.613

看[Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/LockSupport.html#park%28%29)的`park()`方法：

> 除非许可可用，否则禁用当前线程以进行线程调度。如果许可可用，则使用它并立即返回调用；否则，当前线程将出于线程调度目的而被禁用并处于休眠状态，直到发生以下三种情况之一：
> 
> 其他一些线程以当前线程为目标调用 unpark；或者其他一些线程中断当前线程；或 虚假（即无缘无故）的调用返回。此方法不报告哪些导致该方法返回。调用者应该重新检查导致线程首先停止的条件。例如，调用者还可以确定线程在返回时的中断状态。

因此，停放的线程是使用`LockSupport.park()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-01-28T23:05:13.543

park() 和 wait() 都会导致线程被禁用。使禁用的线程再次处于活动状态取决于它是如何被禁用的。

通过调用禁用的线程[`LockSupport.park()`](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/LockSupport.html#park%28%29)将保持禁用状态，直到：

*   其他一些线程调用[`unpark()`](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/LockSupport.html#unpark(java.lang.Thread))，或
*   其他一些线程调用[`interrupt()`](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#interrupt())，或
*   “电话虚假（即无缘无故）返回”

通过调用 Object 的[wait()](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait())禁用的线程（相当于调用[`wait(0)`](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait(long))）将保持禁用状态，直到：

*   其他一些线程调用[`notify()`](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#notify())或[`notifyAll()`](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#notifyAll())，或
*   [`interrupt()`](https://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#interrupt())禁用线程上的一些其他线程调用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-14T02:19:33.733

在 Java 中，通过调用方法而**停住**的线程是等待线程（在 中）。`LockSupport.park()``Thread.state.WAITING`

请参阅[Thread.state.WAITING](https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html#WAITING)的 Java 文档。

有 3 种方法可以使线程处于 WAITING 状态：

1.  Object.wait 没有超时
2.  没有超时的 Thread.join
3.  LockSupport.park

处于等待状态的线程正在等待另一个线程执行特定操作。

例如，一个对对象调用 Object.wait() 的线程正在等待另一个线程对该对象调用 Object.notify() 或 Object.notifyAll()。已调用 Thread.join() 的线程正在等待指定线程终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-02T15:23:07.767

**停车**意味着在获得许可之前暂停执行。**许可**是指继续执行的许可。线程可以暂停其执行，直到允许可用。当 permit 可用时，停放的线程使用它并退出**park() 方法**。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-04-01T12:20:14.640

LockSupport - 类采用设施基本线程阻塞原语来创建锁和其他同步类。

除非许可可用，否则方法 park() 将禁用当前线程以进行线程调度。

unpark(Thread thread) 使给定线程的许可可用（如果它尚不可用）。

像这样使用它：
finally { LockSupport.unpark(thread); }

# objective-c - 禁用剪切、复制、粘贴，但在 UITextview 中启用链接和滚动

> ID：10009348
> 
> 赞同：0
> 
> 时间：2012-04-04T10:30:37.037
> 
> 标签：objective-c

如何在 UITextview 中禁用`cut`, `copy`,`paste`但我想在 uitextview 中启用链接 有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:39:15.713

您可以使用总是返回 NO的`UITextFieldDelegate`协议。`textField:shouldChangeCharactersInRange:`这样，您可以获取事件但使该字段不可编辑。

# forms - Symfony 2自定义表单字段类型：如何只添加一次javascript和css？

> ID：10009352
> 
> 赞同：19
> 
> 时间：2012-04-04T10:30:48.110
> 
> 标签：forms, symfony, twig

我想在自定义 Symfony 2 表单字段类型扩展中使用 javascript。所以，我有这样的 Twig 扩展模板：

```
{% block some_widget %}
    <input ... />

    <script src="some.js"></script>
    <link href="some.css" />
{% endblock %} 
```

但我只想在我的 HTML 中使用这些脚本和链接标签一次，最好是在头标签中，而不需要修改基本模板。我尝试扩展 Twig 块，但我无法访问表单模板中的操作模板块。或者可能是这样的：

```
{# widget tempate #}
{% block some_widget %}
    <input ... />

    {{ use_javascript('some.js') }}
    {{ use_css('some.css') }}
{% endblock %}

{# main action template #}
...
<head>
{{ dump_javascripts() }}
{{ dump_css() }}
</head>
... 
```

如何用 Symfony 2 Forms + Twig 做到这一点？

PS对不起我的英语不好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-30T19:10:53.123

我必须编写一个需要 javascript 的自包含表单小部件，我能够通过`event_dispatcher`侦听`kernel.response`将 javascript 附加到`Symfony\Component\HttpFoundation\Response`. 这是我的表单类型的片段：

```
<?php

namespace AcmeBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\EventDispatcher\EventDispatcherInterface;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\FormInterface;

class AcmeFileType extends AbstractType{

  private $twig;
  private $dispatcher;

  public function __construct(\Twig_Environment $twig, EventDispatcherInterface $dispatcher){
    $this->twig = $twig;
    $this->dispatcher = $dispatcher;
  }

  public function buildView(FormView $view, FormInterface $form, array $options){

    $javascriptContent = $this->twig->render('AcmeBundle:Form:AcmeFileType.js.twig', array());

    $this->dispatcher->addListener('kernel.response', function($event) use ($javascriptContent) {

      $response = $event->getResponse();
      $content = $response->getContent();
      // finding position of </body> tag to add content before the end of the tag
      $pos = strripos($content, '</body>');
      $content = substr($content, 0, $pos).$javascriptContent.substr($content, $pos);

      $response->setContent($content);
      $event->setResponse($response);
    });

  }

  ... 
```

当您在 services.yml 中定义表单类型时，它看起来像这样：

```
acme.form.acme_file_type:
    class: AcmeBundle\Form\AcmeFileType
    arguments:
        - @twig
        - @event_dispatcher
    tags:
        - { name: form.type, alias: acmefile } 
```

所以现在，每次您使用 javascript 构建表单时`acmefile`，都会将其附加到`<body>`. 尽管此解决方案**不会阻止**javascript**多次出现**，但您应该可以轻松地对其进行改进以满足您的需求。

如果您愿意，您也可以使用`$response`对象来修改**标题。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:51:19.710

最好的方法是提供带有 css 和脚本加载的单独模板。有了自述文件中的评论，开发人员唯一要做的就是

```
{% block stylesheets %}
  {{ parent() }}

  include "@MyBestBundle/Resources/view/styles.html.twig"

{% endblock %} 
```

或者尝试使用 DI 拦截表单渲染并添加资产。但如果可能的话，它更难做到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-17T11:50:39.823

我的做法是创建一个自定义的 twig 扩展，在其中我将 JS 添加到缓冲区并在表单呈现期间，然后将其转储到我的布局中。

像这样的东西：

```
<?php

namespace AppBundle\Twig;

use Twig\Extension\AbstractExtension;
use Twig\TwigFunction;

class WysiwygExtension extends AbstractExtension
{
    /**
     * @var array
     *
     * A pool of elements IDs for Wysiwyg binding.
     */
    private $wysiwygElements = [];

    /**
     * {@inheritdoc}
     */
    public function getFunctions()
    {
        return array(
            new TwigFunction('addWysiwygBinding', [$this, 'addWysiwygBinding']),
            new TwigFunction('popWysiwygBindings', [$this, 'popWysiwygBindings']),
        );
    }

    public function addWysiwygBinding(string $id): void
    {
        $this->wysiwyglements[] = $id;
    }

    public function popWysiwygBindings(): array
    {
        $elements = array_unique($this->wysiwygElements);

        $this->wysiwygElements = [];

        return $elements;
    }
} 
```

然后`form-fields.html.twig`：

```
...
{% block wysiwyg_widget %}
{% apply spaceless %}
    {{ form_widget(form) }}
    {% do addWysiwygBinding(id) %}
{% endapply %}
{% endblock %}
... 
```

然后`layout.html.twig`：

```
<!DOCTYPE html>
<html>
  <head>
    ...
  </head>
  <body>
    ...

        {% set ids = popWysiwygBindings() %}

        {% if ids is not empty %}
            {% javascripts
                'bundles/admin/plugins/wysiwyg_1.js'
                'bundles/admin/plugins/wysiwyg_2.js'
            %}
                <script type="text/javascript" src="{{ asset_url }}"></script>
            {% endjavascripts %}
        {% endif %}

        {% for id in ids %}
            {{ include('_wysiwyg.html.twig', { id: id }) }}
        {% endfor %}
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T21:17:28.117

这就是我使用它的方式。希望它是你正在寻找的。

base.html.twig

```
<head>
   {% block stylesheets %}
       css...
   {% endblock %}
</head> 
```

foo.html.twig

```
{% extends '::base.html.twig' %}

{% block stylesheets %}
   {{ parent() }}

   css that you need in foo.html.twig

{% endblock %} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-22T15:07:29.217

我发现许多人在其他情况下使用了一些“肮脏”的方法。我们在客户端检查脚本的加载。如果我们有一个 zlkladr.js 文件，它有一个全局对象“zlkladr”

```
{% block our_widget %}
{% spaceless %}
  ...
  <script>
    // We must load the script only once, even if many widgets on form
    if ( !window.zlkladr ) {
      document.write('<script src="{{ asset('bundles/kladr/js/zlkladr.js') }}"></sc'+'ript>');
    }
  </script>
{% endspaceless %}
{% endblock %} 
```

# javascript - jQuery自动完成超时

> ID：10009353
> 
> 赞同：4
> 
> 时间：2012-04-04T10:30:47.810
> 
> 标签：javascript, jquery-ui, jquery, jquery-autocomplete

出于某种原因，我在我正在处理的网站上发出的 ajax 请求有一半的时间会中止。当我为 ajax 请求设置超时时，此问题已解决，如下所示。

```
$.ajax({
    url: "/question/why_wont_it_work",
    timeout : 1000,
    success: function(){ /*do stuff*/ }
}); 
```

遗憾的是，超时修复似乎不适用于 jquery 自动完成功能。我这样使用它：

```
$( "#questionTags" ).autocomplete({
    source: "/question/tags",
    timeout: 1000,
    select: function(event, ui) { /*do stuff*/ },
}); 
```

我检查了网站上的 jQueryUI 文档，也没有看到超时选项。现在这很烦人，因为有一半的时间我的请求会中止并且我不会得到我想要的结果。有没有解决的办法？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T11:01:33.193

您可以为参数提供任意函数`source`。因此，您可以手动发出 AJAX 请求并指定`timeout`选项：

```
var xhr = null; /* To prevent multiple calls from happening while one is in progress */
$("#questionTags").autocomplete({
    source: function (request, response) {
        if (!xhr) {
            xhr = $.ajax({
                url: "/question/tags",
                timeout: 20000,
                data: request,
                dataType: "json",
                success: function (data) {
                     xhr = null;
                     response(data);
                },
                error: function () {
                    response([]);
                }
            });
        }
    },
    select: function(event, ui) { /*do stuff*/ },
}); 
```

但我和[@El Ronnoco 在一起](https://stackoverflow.com/questions/10009353/jquery-autocomplete-timeout#comment12796140_10009353)，你可能想认真加快你的请求。20秒是很长的等待时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T10:49:30.473

如果`source`是字符串，jQuery 自动完成会执行下面显示的代码来加载数据，因此它不会设置超时。

您可以像这样使用[ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)全局设置超时：

```
$.ajaxSetup({
    timeout: 20000,
}); 
```

但这会影响您所有的 ajax 请求。

* * *

**来自 jquery.ui.autocomplete.js :: _initSource 的代码**

```
self.xhr = $.ajax({
    url: url,
    data: request,
    dataType: "json",
    context: {
        autocompleteRequest: ++requestIndex
    },
    success: function( data, status ) {
        if ( this.autocompleteRequest === requestIndex ) {
            response( data );
        }
    },
    error: function() {
        if ( this.autocompleteRequest === requestIndex ) {
            response( [] );
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T10:04:37.697

```
$target.autocomplete('/question/why_wont_it_work',{
        delay: 2000
    }); 
```

# haskell - 在 Haskell 中使用并行策略时速度变慢

> ID：10009361
> 
> 赞同：14
> 
> 时间：2012-04-04T10:31:31.637
> 
> 标签：haskell, parallel-processing

我正在完成 Andre Loh 在 haskell 练习中的确定性并行编程练习。我试图通过使用策略将 N-Queens 顺序代码转换为并行代码，但我注意到并行代码的运行速度比顺序代码慢得多，并且还会因堆栈空间不足而出错。

这是并行 N-Queens 的代码，

```
import Control.Monad
import System.Environment
import GHC.Conc
import Control.Parallel.Strategies
import Data.List
import Data.Function

type PartialSolution = [Int] -- per column, list the row the queen is in
type Solution = PartialSolution

type BoardSize = Int

chunk :: Int -> [a] -> [[a]]
chunk n [] = []
chunk n xs = case splitAt n xs of
         (ys, zs) -> ys : chunk n zs

-- Generate all solutions for a given board size.
queens :: BoardSize -> [Solution]
--queens n = iterate (concatMap (addQueen n)) [[]] !! n
queens n = iterate (\l -> concat (map (addQueen n) l `using` parListChunk (n `div`            numCapabilities) rdeepseq)) [[]] !! n

-- Given the size of the problem and a partial solution for the
-- first few columns, find all possible assignments for the next
-- column and extend the partial solution.
addQueen :: BoardSize -> PartialSolution -> [PartialSolution]
addQueen n s = [ x : s | x <- [1..n], safe x s 1 ]

-- Given a row number, a partial solution and an offset, check
-- that a queen placed at that row threatens no queen in the
-- partial solution.
safe :: Int -> PartialSolution -> Int -> Bool
safe x []    n = True
safe x (c:y) n = x /= c && x /= c + n && x /= c - n && safe x y (n + 1)

main = do
        [n] <- getArgs
        print $ length $ queens (read n) 
```

该行`(\l -> concat (map (addQueen n) l using parListChunk (n div numCapabilities) rdeepseq))`是我从原始代码中更改的内容。我已经看过 Simon Marlow 的解决方案，但我想知道我的代码速度变慢和错误的原因。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T09:21:31.450

你的工作量太大了。的`parListChunk`参数`div n numCapabilities`可能是你系统上的 7 （2 个核心，你正在运行 n ~ 14）。该列表将很快变大，因此引发如此小的工作单元毫无意义（而且我不明白为什么将它与 的值联系起来是有意义的`n`）。

如果我增加 10 倍（在这种情况下使火花单元为 70），那么我将获得明显优于单线程的性能。另外，我没有您提到的堆栈问题-如果它随着您的`parListChunk`值的更改而消失，那么我会将其报告为错误。

如果我每 800 次进行一次分块，那么时间会在 5.375 秒和 7.9 秒之间达到顶峰。超过800，性能又开始变差了，ymmv。

编辑：

```
[tommd@mavlo Test]$ ghc --version
The Glorious Glasgow Haskell Compilation System, version 7.0.4
[tommd@mavlo Test]$ ghc -O2 so.hs -rtsopts -threaded -fforce-recomp ; time ./so 13 +RTS -N2
[1 of 1] Compiling Main             ( so.hs, so.o )
Linking so ...
73712
real    0m5.404s

[tommd@mavlo Test]$ ghc -O2 so.hs -rtsopts -fforce-recomp ; time ./so 13
[1 of 1] Compiling Main             ( so.hs, so.o )
Linking so ...
73712
real    0m8.134s 
```

# java - HashMap.toString() 方法的线程安全

> ID：10009367
> 
> 赞同：1
> 
> 时间：2012-04-04T10:32:02.210
> 
> 标签：java, thread-safety, hashmap, tostring

我有以下代码：

```
public Hashmap<String,String> tempmap = new HashMap<String,String>(); 
```

和一个类函数：

```
void f1(){
    synchronized(onClassVariable1){
    ....Some code onClassVariable1...
    String tempString = tempMap.toString();
    ... Some work onClassVarible1 and tempString ...
    }
  } 
```

多个线程通过这个类的一个对象调用这个函数 f1 ..

这个函数是线程安全的吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T10:33:58.213

这取决于是否存在不同步`onClassVariable1`和修改的方法`tempMap`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:43:43.147

*没有什么*是`HashMap`线程安全的，Javadoc 是这么说的：“如果多个线程同时访问一个哈希映射，并且至少有一个线程在结构上修改了映射，那么它必须在外部同步。”

# java - 为每个活动应用应用程序的配置

> ID：10009369
> 
> 赞同：0
> 
> 时间：2012-04-04T10:32:14.510
> 
> 标签：java, android, configuration, android-activity

如何在应用程序的每个活动中应用用户选择的配置，而无需重写每个活动中的代码？例如，如果我可以在全屏模式下使用应用程序，现在我强制在每个活动中添加此代码

```
if(useFullscreen)  
{  
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);  
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);  
}  
else  
{
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);  
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);  
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:36:50.687

我建议您为您的应用程序创建一个主活动并将该代码添加到每个活动中，然后保存用户的配置。现在您可以轻松地将配置应用到每个页面，而无需更多 LOC。

[http://mfarhan133.wordpress.com/2010/09/19/maser-layout-tutorial-reusing-layouts/](http://mfarhan133.wordpress.com/2010/09/19/maser-layout-tutorial-reusing-layouts/)

查看上面的链接以制作母版页

# asp.net - 如何过滤数据视图中的多行

> ID：10009371
> 
> 赞同：0
> 
> 时间：2012-04-04T10:32:16.727
> 
> 标签：asp.net, dataview, rowfilter

我需要在数据视图中过滤多行。这里我使用了行过滤器。但是，我想过滤多行。可以使用哪个命令？我的代码是：

```
foreach (string s1 in list)  
{  
     if (s1 != string.Empty)
     {
         dvData.RowFilter = "(code like '" + searchText + "*') AND (code <> '" + s1 + "')";
     }
} 
```

问题是，它只取一个值，并且在循环期间被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:53:06.920

如果你想为字段添加所有*代码*，那么你可以试试这个：`code``RowFilter`

```
StringBuilder sb = new StringBuilder();

foreach(string s in list){
    if (s != string.Empty)
        sb.Append(string.Format(" AND (code <> '{0}')", s));
}

string rowFilter = string.Format("(code like '{0}*')", searchText) + sb.ToString();

dvData.RowFilter = rowFilter; 
```

# jquery - jQuery每个数字

> ID：10009373
> 
> 赞同：0
> 
> 时间：2012-04-04T10:32:20.907
> 
> 标签：jquery, each

我有个主意做这样的桌子

```
 1\. something1
 2\. something2
 3\. something3 
```

我做了一张桌子：

```
<table>
   <tr><td id="rb">...
   <tr><td id="rb">...
</table> 
```

所以在#rb中是这个从1开始的序列号。

我有这个 jQuery 代码，但它不起作用。你能帮忙吗:)

```
 $('tr').each(function(index) 
            {
                  $('#rb').append(index);
             }); 
```

它只是让

```
 012345 
```

在第一个#rb

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:36:43.907

您不能`#id`多次使用。

相反，您可以使用任何一个类`.rb`：

```
$('tr').each(function(index){
   $(this).children('.rb')append(index+1);
}); 
```

或者像这样的方法，只需选择每个的孩子`tr`（根据您的 HTML 结构可能不起作用）：

```
$('tr').each(function(index) { //index will start at 0
   $(this).children('td').append(index+1); //$(this) is the tr, its child element of td is selected, then the index is appended
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:33:37.863

您不应该为同一 HTML 文档中的多个元素提供相同的 id。您可以使用`class="rb"`代替。

```
$('tr').each(function(index) {
   $(this).find('.rb').append(index);
}); 
```

# jquery - 在 asp.net 页面中加载 jquery

> ID：10009375
> 
> 赞同：0
> 
> 时间：2012-04-04T10:32:26.093
> 
> 标签：jquery, asp.net, load

我正在使用 asp.net c# 和 jquery

我创建了一个包含两个更新面板（UpdateMode = 条件）的页面，每个页面中都有一个带有搜索过滤器（名称、描述等）的表单

每个表单都有一个按钮，当按下该按钮时，将通过在 jQuery 中创建的效果显示高级搜索选项（功能 ToggleAdvOptions，当您单击按钮时会展开一个 div 并且当您返回按合同时）

要加载 jquery 函数，请使用以下脚本：

```
<script type="text/javascript">   
        function load() {
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_endRequest(function () {
            BindEvents();
        });
    } 
```

然后我从页面的body onload事件中调用函数load()：

```
<body onload="load();"> 
```

问题是，如果我从 UpdatePanel1 进行回发，然后单击按钮以显示高级选项 UpdatePanel2，则 ToggleAdvOptions 函数会执行两次。效果是生成的 div 扩展然后收缩

有谁知道如何解决这个问题？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T06:58:50.327

我假设您的页面上已经有以下内容：

1.  ScriptManager 控件。
2.  您已经在更新面板控件上声明了触发器，例如

    ```
     <Triggers>
                   <asp:AsyncPostBackTrigger ControlID="Button1" />
                 </Triggers> 
    ```

如果它不同，或者仍然不能与声明的触发器一起工作，那么更多的代码应该会极大地帮助我们理解您面临的问题。

# java - .Net 中生成的 SHA1 哈希的 java 等效项是什么？

> ID：10009377
> 
> 赞同：4
> 
> 时间：2012-04-04T10:32:29.907
> 
> 标签：java, .net, character-encoding

我正在尝试验证肥皂网络服务，但我在 java 中生成的 SHA1 哈希不起作用，但使用 .Net 生成的哈希有效。

这个 .Net 代码的 java 等价物是什么？

//。网

```
var token = "H?OIgSJ35~LKJ:9~~7&sUtHDeKAv*O@is?cEwV[}!i@u%}";
var shaProvider = new SHA1Managed();
var rawKey = Encoding.Unicode.GetBytes(token);
var rawHash = shaProvider.ComputeHash(rawKey);
var signature = BitConverter.ToString(rawHash).Replace("-", "").ToLower(); 
```

产生的哈希：a508a29efeea2821e519fcbf64f164dd5d672233

//Java - 这是我尝试使用 commons-codec-1.4.jar

```
String token = "H?OIgSJ35~LKJ:9~~7&sUtHDeKAv*O@is?cEwV[}!i@u%}";
MessageDigest cript = null;
try {
    cript = MessageDigest.getInstance("SHA1");
} catch (NoSuchAlgorithmException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
cript.reset();
cript.update(token.getBytes());
String password = new String(Hex.encodeHex(cript.digest()));
System.out.println(password); 
```

产生的哈希值：88e7c8fc13ac75e8efc8d0c00182caa6dc087093

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:44:11.253

我的猜测是它`token.getBytes()`不使用与 相同的编码`Encoding.Unicode.GetBytes(token)`，因为您不太可能将 UTF-16 Little Endian 作为您的默认字符集。如果将其更改为 会发生什么`token.getBytes(StandardCharsets.UTF_16LE)`？

# coffeescript - 从 CoffeeScript 访问控制器变量

> ID：10009389
> 
> 赞同：0
> 
> 时间：2012-04-04T10:33:49.663
> 
> 标签：coffeescript, ruby-on-rails-3.2

我的控制器中有@list 值，并且我可以查看我添加产品的位置。Form 看起来像 product_name 和 Add Button。我需要使用 coffe 脚本或其他方式将所有这些值添加到 @list 认为 ajax 请求，我不会提交整个表格。如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:35:34.383

你的问题听起来很奇怪...

首先，任何 CoffeScript 源代码都将被编译为 Javascript，并在客户端（在浏览器中）下载。您的控制器在服务器端运行，因此只能通过 HTTP 请求进行寻址。

然而，一个`@list`属性在两个 HTTP 请求之间不是持久的，所以如果你需要积累数据，你必须坚持任何更改，正如你在问题中所说的那样。

要实现 AJAX 调用，我建议使用 JQuery 的帮助程序：[http :](http://api.jquery.com/jQuery.getJSON/) [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)，或类似[http://api.jquery.com/jQuery.get/、http://](http://api.jquery.com/jQuery.get/)这样的快捷方式[/api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/) , ...

其余的是 Rails 路由，可以在[http://guides.rubyonrails.org/action_controller_overview.html#methods-and-actions](http://guides.rubyonrails.org/action_controller_overview.html#methods-and-actions)和[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)中教授。

希望这可以帮助。

# android - 如何将数据从本地Excel工作表复制到android中的sqlite数据库表

> ID：10009407
> 
> 赞同：4
> 
> 时间：2012-04-04T10:34:52.840
> 
> 标签：android, excel, sqlite

我的 D 驱动器中有两个 excel 表我想将数据从中复制到我的 Android 应用程序中，以将其保存在 sqlite 数据库表中并在我的应用程序中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:15:22.510

考虑到excel和sqlite之间没有直接关系，我只能想到3个解决方案：

1.  您在 sqlite 中构建表（使用 SQLite 浏览器）并将其推送到您的应用程序中

2.  使用 Google 电子表格

3.  你可以使用这个答案：[How to convert excel sheet into database of sqlite in android](https://stackoverflow.com/questions/7412293/how-to-convert-excel-sheet-into-database-of-sqlite-in-android)

# android - 在android中禁用完全擦除功能

> ID：10009408
> 
> 赞同：3
> 
> 时间：2012-04-04T10:34:56.607
> 
> 标签：android, mdm

我们如何禁用设备的完全擦除功能以防止在任何情况下发生完全擦除？

我们是否可以防止设备被擦除？如果是，如何？

我查看了设备管理 API，但我只能看到擦除设备数据的设备的擦除 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:29:47.863

我不相信你不能在不生根手机并安装自定义 ROM 的情况下禁用此功能。[HTCSense.com](http://htcsense.com)和[Device Policy Admin](http://support.google.com/a/bin/answer.py?hl=en&answer=1056433)应用程序都使用它。这些分别由 HTC 和 Google 提供。

HTC 或 Google 都不太可能让应用禁用其服务所依赖的核心功能。

# ios - 如何在 iBook 中像打开的书一样制作动画？

> ID：10009415
> 
> 赞同：4
> 
> 时间：2012-04-04T10:35:31.967
> 
> 标签：ios, xcode, animation, xcode4, ibooks

我想单击图像并打开，就像我们在 iBook 中单击书架中的书时一样。只是简单的翻转，而不是卷曲。像我们打开精装书一样制作动画 :)

你能指导我这是什么电话吗？或者你能指导我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:09:58.403

您可以试试这个 Apple 示例[https://developer.apple.com/library/ios/#samplecode/ViewTransitions/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/ViewTransitions/Introduction/Intro.html)

不过需要ios5。

但是示例基本上使用 UIView 方法

```
transitionFromView:toView:duration:options:completion: 
```

在 ios4 中可用。这是它的链接：[Apple docs](https://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/clm/UIView/transitionWithView%3aduration%3aoptions%3aanimations%3acompletion%3a)

# model-view-controller - 用于大规模应用的 GWT

> ID：10009416
> 
> 赞同：3
> 
> 时间：2012-04-04T10:35:32.153
> 
> 标签：model-view-controller, gwt, jakarta-ee, smartgwt

我听说 Google Web Toolkit 对于超过 5 个页面和通用布局的网站不太适用。真的吗？我们至少有 100 个子页面和 CSS 中定义的通用布局。今天使用的是 PHP，但我们将转向 Java 前端，无论是 Spring MVC 还是 GWT。我们正在使用 som jQuery AJAX 和其他 jQuery 组件，例如 jqGrid。我们还有一些 .swf 电影和融合图表。选择结合 GWT 的 Spring 是一个不错的选择，还是带有 jQ​​uery 库的 Spring MVC 对我们来说是一个更好的选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:50:26.917

现在不是真的。早期的 GWT 版本确实存在一些可伸缩性问题（例如 IE 中的 JS 代码大小问题 - [http://code.google.com/p/google-web-toolkit/issues/detail?id=1440](http://code.google.com/p/google-web-toolkit/issues/detail?id=1440)），但从 GWT 2.0 开始你在这里没有限制。

此外，最新的 GWT 版本支持将项目拆分为可在需要时动态加载的部分的功能。请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)以了解其工作原理。

还要考虑到由于 Spring 是 Java，您可以在服务器端和客户端之间共享类。此外，Java 在 IDE 中有很好的支持——所有类型的重构都可供您使用（如果您使用 jQuery，它就不那么方便了）。

所以 Spring+GWT 看起来是更可取的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T14:56:16.493

GWT 不是一个从头开始构建任何 web 应用程序的通用框架。当您在客户端有很多复杂的逻辑时（图像编辑、实时协作、图表绘制、游戏、复杂的报表构建等），它非常有用。但是所有这些都可以在没有 GWT 的情况下完成。GWT 可用于以下情况：

*   你的团队讨厌/不喜欢 JS（并且无法用 JS 构建任何复杂的东西，只是因为他们讨厌 JS）
*   您的团队在 Java 方面非常有经验
*   您的团队了解所有这些与浏览器相关的东西是如何工作的（HTTP、JS、DOM、CSS 等）
*   在这个项目中将有很多在客户端运行的逻辑

我见过很多完全使用 GWT 构建的大型项目。他们中的一些人永远不应该使用 GWT，因为他们没有理由以这种方式使用它。对于大多数项目，仅将 GWT 用于应用程序的某些部分就足够了。

选择取决于您的团队和您正在做的项目。如果您的团队无法真正看到 GWT 将为项目带来什么好处，那么您不应该使用 GWT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:31:06.020

我们的企业级应用程序同时利用了两者，我们对结果非常满意。GWT 是一个功能强大的工具包，可将开发时间缩短几个数量级。也就是说，GWT 仍然有一些事情不能很好地处理，或者只是简单地不适合（这没关系......这就是 Spring MVC 就在附近的原因）。我们让 GWT-RPC 直接访问 Spring 服务，它运行得非常好。

我们的项目虽然是一个真正的 web 应用程序，而不是一个网站。我们使用跨越所有“页面”的统一设计（使用 a`DockLayoutPanel`并仅换出`center`使这变得超级容易）。

IMO，无论谁告诉你 GWT 不适合在众多“页面”上进行一致的设计，都是疯了……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:46:39.480

根据我对 GWT 的经验，我唯一不好的经验是由于大量排列导致 GWT 编译缓慢。我们的应用程序有超过 20 种语言需要支持，对于特定的浏览器，乘以 6 会产生 120 种排列，结果证明性能很糟糕。

但这不是一个真正的错误问题，因为您将主要使用开发模式，即时代码更新，并且您可以拥有减少浏览器和语言集的特殊编译单元（即使是一种语言和一种浏览器 => 一个排列如果你希望）。

因此，在我的例子中，使用 Jenkins，我们在夜间完成了大产品目标的完整构建，部署在 QA 平台上，以便 QA 团队测试每种浏览器语言组合。在每次提交时，都会在开发验证平台上部署一个精简的构建（在我们的例子中是 1 个浏览器和 2 种语言）。

GWT 绝对是大型应用程序的绝佳工具。;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T12:38:50.420

我认为任何关于 GWT（或任何其他方法）将开发时间降低一个数量级的断言已经被 Frederic Brooks 在肩垫和 Jan Hammer 的合成器流行的时候揭穿了：[http ://en.wikipedia.org/维基/No_Silver_Bullet](http://en.wikipedia.org/wiki/No_Silver_Bullet)。

但说真的，如果你是一家 PHP 商店，转向 100% Java 将是一项巨大的投资，不能掉以轻心。

# wordpress - Wordpress 帮助：如何从 P2 主题中删除作者和标签？

> ID：10009423
> 
> 赞同：0
> 
> 时间：2012-04-04T10:36:02.563
> 
> 标签：wordpress, wordpress-theming

我最近在我的网站上安装了 P2 主题：http: [//news.nocamels.com/](http://news.nocamels.com/) 我想知道如何从 P2 主题中删除作者和标签？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:01:52.003

有一个分步指南在这里给出了[链接](http://perfectwebtutorials.com/2011/how-to-remove-is-proudly-powered-by-wordpress-in-footer/)。请务必阅读下面的评论，但这会让您排序：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:20:22.490

您应该能够`<span class="tags">`在您的 loop.php 文件中`<span class="meta">`找到。`get_the_tags()`我看到你已经按照@janw 的建议隐藏了它。如果您真的想删除它，您将不得不摆脱 PHP 中的调用。

# c++ - 如何减去两个 FILETIME？

> ID：10009426
> 
> 赞同：6
> 
> 时间：2012-04-04T10:36:13.630
> 
> 标签：c++, windows

我试图在 Windows 中以毫秒为单位获取经过的时间。我发现这样做的唯一方法是使用 FILETIME 结构获取自 1601 年以来的 100 纳秒数。但是 FILETIME 结构将值存储在两个变量中，我想知道如何减去其中两个结构，将它们除以 10000（以获得毫秒）并将结果存储在一个变量中我正在使用 c++ 和可视化工作室 2008 速成版

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T10:54:35.207

阅读以下文档[`FILETIME`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)：

> 不建议您从**FILETIME**结构中添加和减去值以获得相对时间。相反，您应该将文件时间的低位和高位部分复制到[ULARGE_INTEGER结构，对](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383742%28v=vs.85%29.aspx)**QuadPart**成员执行 64 位算术，并将**LowPart**和**HighPart**成员复制到**FILETIME**结构中。

你也有你的单一号码（`QuadPart`结构`ULARGE_INTEGER`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:56:07.667

```
FILETIME ft1;
FILETIME ft2;

int iDifferenceInMS = (*((ULONGLONG*)&ft2) - *((ULONGLONG*)&ft1))/10000; 
```

# list - OCaml 布尔表达式 [[]] == [[]]

> ID：10009427
> 
> 赞同：8
> 
> 时间：2012-04-04T10:36:18.357
> 
> 标签：list, boolean, ocaml, expression

我有一个返回函数，`[[]]`我想将结果作为单元测试进行测试。但我发现表达式`[[]] == [[]]`return `false`。这里有一个简单的测试代码：

```
# [[]] == [[]];;
- : bool = false 
```

有人能解释一下为什么这个表达式被评估为假吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T11:26:59.717

使用`=`，因为你有比较两个值的*结构相等：*

```
# [[]] = [[]];;
- : bool = true 
```

因为`==`是*引用相等*，所以只有在引用相同的内存位置时才返回 true：

```
let a = [[]]
let b = a

# b == a;;
- : bool = true 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-04T10:57:33.360

`==`OCaml 中的运算符表示“物理平等”。但是，您有两个（物理上）不同的列表。可能，您想要“结构平等”，它由`=`.

# jquery - 通过模拟 $.ajax 在 Jquery $.post 中超时

> ID：10009430
> 
> 赞同：3
> 
> 时间：2012-04-04T10:36:24.280
> 
> 标签：jquery

我们如何模拟`$.ajax`using的超时`$.post`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:41:11.093

`$.POST`是 的预设版本`$.ajax`，因此已经设置了很少的参数。

> 事实上，a`$.post`等于
> 
> ```
> $.ajax({
>   type: 'POST',
>   url: url,
>   data: data,
>   success: success,
>   dataType: dataType
> }); 
> ```

但是，您可以创建自己的 post 函数来`$.ajax`最后发送请求。

这是我刚刚编写的自定义 POST 插件。

```
(function( $ ){
  $.myPOST = function( url, data, success, timeout ) {      
    var settings = {
      type : "POST", //predefine request type to POST
      'url'  : url,
      'data' : data,
      'success' : success,
      'timeout' : timeout
    };
    $.ajax(settings)
  };
})( jQuery ); 
```

现在自定义 POST 功能已准备就绪

用法：

```
$.myPOST(
    "test.php", 
    { 
      'data' : 'value'
    }, 
    function(data) { },
    5000 // this is the timeout   
); 
```

## 享受 ：）

# c# - 在 .NET 中将索引放入转发器控件的最简单方法是什么？

> ID：10009431
> 
> 赞同：10
> 
> 时间：2012-04-04T10:36:25.217
> 
> 标签：c#, asp.net, repeater, asprepeater

我想要一个 ASP:NET WebForms Repeater 控件自动在其每个输出行旁边放置一个索引。我怎样才能做到这一点？

例子：

```
 Name
1  John
2  Jack
3  Joe 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-04T10:42:57.443

尝试以下操作：

```
<asp:Repeater ID="myRepeater" runat="server">
    <HeaderTemplate>
        <table>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td><%# Container.ItemIndex %></td>
            <!-- or maybe -->
            <td><%# Container.ItemIndex + 1 %></td>
            <td><%# DataBinder.Eval(Container, "DataItem.Name") %></td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

# linux - 具有单独输入区域和输出区域的 Linux 终端仿真器？

> ID：10009433
> 
> 赞同：4
> 
> 时间：2012-04-04T10:36:42.397
> 
> 标签：linux, shell, terminal, ncurses

我正在寻找任何终端仿真器（如果有的话），它将有 2 个单独的区域用于输入命令和输出区域。

终端仿真器

```
 Output
    more output
    more output still...

    blah blahh
    blaahh blah
    words
=================================================
>input here 
```

我尝试在 Google 中搜索，但没有发现任何有用的信息，我也在某处阅读了这可以使用 ncurses 库来实现，但我不知道如何做到这一点。另外我觉得，以前一定有人做过，如果有人做过这种事情，请与我分享你的解决方案，或者任何知道如何做到这一点的人，如果你能给我一些指示，我将不胜感激实现这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T07:28:49.253

您可以使用任何终端模拟这种行为，方法是打开它的两个实例。在终端 #2，通过以下方式获取当前 PTS：

```
$ tty
/dev/pts/10 # for example 
```

然后，在终端 #1 上键入：

```
$ exec &> /dev/pts/10
$ echo you can see this message on terminal \#2
$ echo this is also true for standard error > /dev/stderr 
```

# maven-3 - 使用 maven-javadoc-plugin 和 Maven 3 生成多个 javadoc 报告

> ID：10009439
> 
> 赞同：6
> 
> 时间：2012-04-04T10:36:52.340
> 
> 标签：maven-3, maven-site-plugin, maven-javadoc-plugin

我们使用自定义 doclet 从自定义 javadoc 标记生成报告，并使用 Maven 站点插件和 javadoc 插件生成此报告和常规 java API 文档。

POM 的部分如下所示：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <reportSets>
        <reportSet>
            <id>html</id>
            <reports>
                <report>javadoc</report>
            </reports>
        </reportSet>
        <reportSet>
            <id>custom_report</id>
            <configuration>
                ...
            </configuration>
            <reports>
                <report>javadoc</report>
            </reports>
        </reportSet>
    </reportSets>
</plugin> 
```

在 Maven 2 下，这可以正常工作，但在 Maven 3 中只生成一个报告，这是 POM 中指定的最后一个报告（通过交换`reportSet`元素来确定）。

经过一些实验，我发现如果我将常规报告的目标从“javadoc”更改为“test-javadoc”，那么我会从两个报告集中获得输出。所以问题似乎是使用 Maven 3 我无法生成两个使用相同 javadoc-plugin 目标的报告。

这是一个错误，还是我错过了一些配置？如[http://maven.apache.org/plugins/maven-site-plugin-3.0-beta-3/maven-3.html](http://maven.apache.org/plugins/maven-site-plugin-3.0-beta-3/maven-3.html)`reporting`所述，我将 maven-javadoc-plugin 设置从站点插件移至徒劳无功。我正在使用 Maven 3.0.4、maven-site-plugin 3.0-beta-3 和 maven-javadoc-plugin 2.8.1。`configuration`

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:43:38.097

[这是maven-reporting-exec 组件中](http://jira.codehaus.org/browse/MSHARED-271)的一个错误。

报告集以报告目标为键保存在地图中。

# ios - 如何在 iPad (iOS 5) 上检测取消停靠、停靠或拆分

> ID：10009444
> 
> 赞同：3
> 
> 时间：2012-04-04T10:37:00.580
> 
> 标签：ios, ipad, uitextview

我正在尝试检测我的 iPad 上是否按下了停靠键。此停靠键是 iOS 5 中的一项新功能。按下此键时，键盘会消失。我需要检测它。按下此键时，我需要更改视图的框架，但按此键无法获得任何事件。

我正在尝试使用以下功能：

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    NSLog(@"TEXT: %@", text);
    return YES;
} 
```

当我按下“A”时，这个函数被调用并打印 TEXT：A，但是当我按下停靠键时，这个函数没有被调用！

有没有办法在 iPad 上检测基座键？为澄清起见，Dock 键位于键盘右下角的 iPad（仅适用于 iOS 5）上。

**回答：：：：**

我在 viewDidLoad 中使用了以下代码：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide) name:UIKeyboardWillHideNotification object:nil]; 
```

我在方法 -(void)keyboardWillHide 中得到了事件

```
-(void)keyboardWillHide
{
    NSLog(@"Pressed...");
} 
```

谢谢博登。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:14:28.170

当用户按下停靠键时，您将通过 NSNotificationCenter 的 UIKeyboardWillHideNotification 收到通知。

# xslt - 相对于每个元素在 XSLT 中选择不同的

> ID：10009452
> 
> 赞同：3
> 
> 时间：2012-04-04T10:37:34.450
> 
> 标签：xslt, xslt-1.0

我尝试检索元素子项的属性值列表，但我希望这些值只出现一次。

例如，我有以下 XML

```
<root>
    <sec>
        <nom-title>
            <nom-chapter>
                <nom-article><data att="1.1"/></nom-article>
                <nom-article>
                    <nom-item><data att="1.1"/></nom-item>
                    <nom-item><data att="1.2"/></nom-item>
                </nom-article>
             </nom-chapter>
             <nom-chapter>
                <nom-article><data att="2.1"/></nom-article>
                <nom-article><data att="1.1"/></nom-article>
             </nom-chapter>
         </nom-title>
         <nom-title>
             <nom-chapter>
                 <nom-article><data att="1.1"/></nom-article>
             </nom-chapter>
         </nom-title>
     </sec>
 </root> 
```

我想要这样的结果：

```
<root>
    <nom-title>
        <att>1.1</att>
        <att>1.2</att>
        <att>2.1</att>
        <nom-chapter>
            <att>1.1</att>
            <att>1.2</att>
            <nom-article>
                <att>1.1</att>
            </nom-article>
            <nom-article>
                <att>1.1</att>
                <att>1.2</att>
                <nom-item><att>1.1</att></nom-item>
                <nom-item><att>1.2</att></nom-item>
            </nom-article>
         </nom-chapter>
    </nom-title>
    <nom-title>
         <att>1.1</att>
         <nom-chapter>
             <att>1.1</att>
             <nom-article>
                 <att>1.1</att>
             </nom-article>
         </nom-chapter>
     </nom-title>
</root> 
```

我尝试使用 xsl:key 元素，但它只返回一个元素的值。在示例中，它只为第一个标题返回 1.1，而不是第二个。我用过的xsl：

```
 <xsl:key name="allAtt"
    match="//*[starts-with(name(.),'nom-')]/data"
    use="@att"/>
 <xsl:template match="nom-title|nom-chapter|nom-article|nom-item">
     <xsl:element name="name(.)">
         <xsl:apply-templates select=".//*[starts-with(name(.),'nom-')]/data
     </xsl:element>
 </xsl:template>        
 <xsl:template match="data">
      <xsl:variable name="att" select="@att"/>
      <xsl:if test="generate-id(.)=generate-id(key('allAtt',$att)[1]">
           <xsl:element name="att"><xsl:value-of select="$att"></xsl:element>
      </xsl:if>
 </xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:47:16.327

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kData-nom-article" match="data" use=
 "concat(generate-id(ancestor::nom-article[1]),
         '+', @att)"/>
 <xsl:key name="kData-nom-chapter" match="data" use=
 "concat(generate-id(ancestor::nom-chapter[1]),
         '+', @att)"/>
 <xsl:key name="kData-nom-title" match="data" use=
 "concat(generate-id(ancestor::nom-title[1]),
         '+', @att)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="sec"><xsl:apply-templates/></xsl:template>

 <xsl:template match="nom-title|nom-article|nom-chapter">
  <xsl:copy>
    <xsl:apply-templates mode="list" select=
     ".//data[generate-id()
             =
              generate-id(key(concat('kData-', name(current())),
                              concat(generate-id(current()),
                                     '+', @att
                                    )
                              )
                                [1]
                          )
             ]"/>
    <xsl:apply-templates/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="data" mode="list">
  <att><xsl:value-of select="@att"/></att>
 </xsl:template>

 <xsl:template match="non-item/data">
  <att><xsl:value-of select="@att"/></att>
 </xsl:template>

 <xsl:template match="*[not(self::nom-item)]/data"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<root>
    <sec>
        <nom-title>
            <nom-chapter>
                <nom-article>
                    <data att="1.1"/>
                </nom-article>
                <nom-article>
                    <nom-item>
                        <data att="1.1"/>
                    </nom-item>
                    <nom-item>
                        <data att="1.2"/>
                    </nom-item>
                </nom-article>
            </nom-chapter>
            <nom-chapter>
                <nom-article>
                    <data att="2.1"/>
                </nom-article>
                <nom-article>
                    <data att="1.1"/>
                </nom-article>
            </nom-chapter>
        </nom-title>
        <nom-title>
            <nom-chapter>
                <nom-article>
                    <data att="1.1"/>
                </nom-article>
            </nom-chapter>
        </nom-title>
    </sec>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <nom-title>
      <att>1.1</att>
      <att>1.2</att>
      <att>2.1</att>
      <nom-chapter>
         <att>1.1</att>
         <att>1.2</att>
         <nom-article>
            <att>1.1</att>
         </nom-article>
         <nom-article>
            <att>1.1</att>
            <att>1.2</att>
            <nom-item>
               <data att="1.1"/>
            </nom-item>
            <nom-item>
               <data att="1.2"/>
            </nom-item>
         </nom-article>
      </nom-chapter>
      <nom-chapter>
         <att>2.1</att>
         <att>1.1</att>
         <nom-article>
            <att>2.1</att>
         </nom-article>
         <nom-article>
            <att>1.1</att>
         </nom-article>
      </nom-chapter>
   </nom-title>
   <nom-title>
      <att>1.1</att>
      <nom-chapter>
         <att>1.1</att>
         <nom-article>
            <att>1.1</att>
         </nom-article>
      </nom-chapter>
   </nom-title>
</root> 
```

**解释**: 通过动态构造要执行的实际分组的键名，将三个不同的 Muenchian 分组表示为一个。

**记住**：键名是一个*字符串*，必要时（如本例），名称可以动态构造，或作为参数传递。

# javascript - JavaScript传递字符串数组问题

> ID：10009457
> 
> 赞同：0
> 
> 时间：2012-04-04T10:37:59.220
> 
> 标签：javascript, playframework

来自我的游戏！框架视图我将一个字符串数组传递给我的 js 方法，例如：

```
 <script type="text/javascript">
        buildMapWithMarkers('map_canvas', ${hotelsLat}, ${hotelsLng}, ${hotelsNames}), 'false'); 
    </script> 
```

问题是有时包含具有or`hotelsNames`的字符串，例如：`'``&``Hyatt's Green`

```
buildMapWithMarkers('map_canvas', [43.3484420, 43.614980, 43.549480], [-97.4318550, -97.61660500000001, -97.5021910], [Sportsmans Acres Pheasant Hunts, Hyatt's Green Acres, Guest Room Motel]), 'false'); 
```

所以它抛出了一些异常：

`Uncaught SyntaxError: Unexpected identifier`

您能帮我如何编码（在视图或控制器中）吗？

我试过：`encodeURIComponent(${hotelsNames})`但不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:08:54.857

您的字符串需要用引号括起来并转义反斜杠。

这样 " 和 ' 打印为 \" 和 \'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:54:46.780

我能够通过以下方式解决问题：

*   转义字符 JS 不“喜欢”
*   用引号包围

    `final String hotelName = StringEscapeUtils .escapeJavaScript(hotel.name); hotelsNames.add("'" + hotelName + "'");`

# php - 从 MySQL 数据库获取数据到 html 下拉列表

> ID：10009464
> 
> 赞同：15
> 
> 时间：2012-04-04T10:38:36.960
> 
> 标签：php, mysql, html

我有一个包含 html 表单的网站，在这个表单中我有一个下拉列表，其中包含在公司工作的代理列表，我想从 MySQL 数据库中获取数据到这个下拉列表，所以当你添加一个新代理时，他的名字会出现作为下拉列表中的一个选项。

你能帮我编写这个php代码吗，谢谢

```
<select name="agent" id="agent">
</select> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-04T11:02:19.753

为此，您需要遍历查询结果的每一行，并将此信息用于每个下拉选项。您应该能够相当容易地调整下面的代码以满足您的需求。

```
// Assume $db is a PDO object
$query = $db->query("YOUR QUERY HERE"); // Run your query

echo '<select name="DROP DOWN NAME">'; // Open your drop down box

// Loop through the query results, outputing the options one by one
while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
   echo '<option value="'.$row['something'].'">'.$row['something'].'</option>';
}

echo '</select>';// Close your drop down box 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-09T10:44:55.763

```
# here database details      
mysql_connect('hostname', 'username', 'password');
mysql_select_db('database-name');

$sql = "SELECT username FROM userregistraton";
$result = mysql_query($sql);

echo "<select name='username'>";
while ($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['username'] ."'>" . $row['username'] ."</option>";
}
echo "</select>";

# here username is the column of my table(userregistration)
# it works perfectly 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-05T12:29:45.773

您需要从数据库中获取所有行，然后对其进行迭代，`<option>`为每一行显示一个新行。注意避免使用`htmlspecialchars()`.

```
$pdo = new \PDO("mysql:host=localhost;dbname=test;charset=utf8mb4", 'user', 'password', [
    \PDO::ATTR_ERRMODE => \PDO::ERRMODE_EXCEPTION,
    \PDO::ATTR_EMULATE_PREPARES => false
]);

// Select all values from the table Agents
$stmt = $pdo->prepare("SELECT Id, Name FROM Agents");
$stmt->execute();

echo '<select name="agent" id="agent">';
// For each row from the DB display a new <option>
foreach ($stmt as $row) {
    // value attribute is optional if the value and the text is the same
    echo '<option value="'.htmlspecialchars($row['Id']).'">';
    echo htmlspecialchars($row['Name']); // The text to be displayed to the user
    echo '</option>';
}
echo '</select>'; 
```

如果要预选其中一个值，则需要将`selected`属性应用于以下之一`<options>`：

```
$selected = 'Somebody';

echo '<select name="agent" id="agent">';
foreach ($stmt as $row) {
    if ($selected === $row['Name']) {
        echo '<option value="'.htmlspecialchars($row['Id']).'" selected >';
    } else {
        echo '<option value="'.htmlspecialchars($row['Id']).'">';
    }
    echo htmlspecialchars($row['Name']);
    echo '</option>';
}
echo '</select>'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T10:56:36.653

你问的很简单

1.  对您的数据库执行查询以获取结果集或使用 API 获取结果集

2.  循环遍历结果集或简单地使用 php 的结果

3.  在每次迭代中，只需将输出格式化为一个元素

以下参考应该有帮助

[HTML 选项标签](http://www.w3schools.com/tags/tag_option.asp "HTML 选项标签")

[从 MySQL 数据库中获取数据](http://www.php.net/manual/en/function.mysql-fetch-array.php)

希望这可以帮助 ：）

# c++ - 使用双击事件创建 QLabel 的链接器错误

> ID：10009466
> 
> 赞同：1
> 
> 时间：2012-04-04T10:38:48.323
> 
> 标签：c++, qt, mouseevent, qlabel

我正在创建一个 QLabel 子类，它将 DoubleClickEvent 添加到它。我已经创建了以下内容，但是我遇到了一些奇怪的链接器错误，也许有人可以指出我做错了什么？

```
//Header
#ifndef IMAGE_LABEL_H
#define IMAGE_LABEL_H

#include <QLabel>
#include <QMouseEvent>

class image_label : public QLabel
{
    Q_OBJECT
public:
image_label(QWidget* parent = 0);
~image_label();

signals:
    void doubleClicked();

protected:
    void mouseDoubleClickEvent(QMouseEvent * e);

};

#endif

//CPP 

#include "image_label.h"
#include <QMouseEvent>

image_label::image_label(QWidget* parent) : QLabel(parent)
{
}

image_label::~image_label()
{
}

void image_label::mouseDoubleClickEvent(QMouseEvent* e)
{
    if (e->button() == Qt::LeftButton)
    {
        emit doubleClicked();
        QLabel::mouseDoubleClickEvent(e);
    }
} 
```

编译时出现以下链接器错误：

```
 image_label.obj : error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall image_label::metaObject(void)const " (?metaObject@image_label@@UBEPBUQMetaObject@@XZ)

  image_label.obj : error LNK2001: unresolved external symbol "public: virtual void * __thiscall image_label::qt_metacast(char const *)" (?qt_metacast@image_label@@UAEPAXPBD@Z)

  image_label.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall image_label::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@image_label@@UAEHW4Call@QMetaObject@@HPAPAX@Z)

  image_label.obj : error LNK2019: unresolved external symbol "protected: void __thiscall image_label::doubleClicked(void)" (?doubleClicked@image_label@@IAEXXZ) referenced in function "protected: virtual void __thiscall image_label::mouseDoubleClickEvent(class QMouseEvent *)" (?mouseDoubleClickEvent@image_label@@MAEXPAVQMouseEvent@@@Z) 
```

谁能帮助我为什么会收到这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:07:18.300

您必须对文件运行 MOC 预处理器`image_label.h`。这会生成一个`moc_image_label.cpp`您必须包含在构建中的文件。错误消息表明您尚未执行此操作。`image_label::metaObject`（错误消息中提到的符号等在 中定义`moc_image_label.cpp`。）

# android - Android 错误“应用程序图标无效。使用 48x48 PNG 文件。” 在谷歌播放

> ID：10009467
> 
> 赞同：3
> 
> 时间：2012-04-04T10:38:50.303
> 
> 标签：android, google-play

您好，我尝试将我的应用程序的更新上传到 Google Play，我发现了这个错误，在 google 中查看它我找到了多种解决方案，但似乎没有一个有效。

-我在我的 strings.xml 上寻找“/n”。

-drawable-hdpi、drawable-mdpi、drawable-ldpi 和 drawable 文件夹上的图标文件大小正确。分别为 72x72、48x48、36x36 和 48x48 .png 文件。

- 在我的清单中，我没有 android:debuggable 标签。

我贴上我的清单，以防有人看到任何错误。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="es.gleb" android:versionCode="1" android:versionName="201204041800">

    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.SEND_SMS" />

    <uses-sdk android:minSdkVersion="7" />

    <application android:icon="@drawable/icon" 
                 android:label="@string/app_name" 
                 android:name="es.gleb.GlebApplication"
                 >

        <activity android:name="es.gleb.ui.MainActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="es.gleb.ui.EventsListActivity" android:label="@string/app_name" android:launchMode="singleTop">
        </activity>

        <activity android:name="es.gleb.ui.EventActivity" android:label="@string/app_name">
        </activity>     

        <activity android:name="es.gleb.ui.LocationsActivity" android:label="@string/app_name">
        </activity>

        <activity android:name="es.gleb.ui.ExecutionActivity" android:label="@string/app_name">
        </activity>

        <activity android:name="es.gleb.ui.ExecutionsActivity" android:label="@string/app_name">
        </activity>

        <activity android:name="es.gleb.ui.OptionsActivity" android:label="@string/app_name">
        </activity>     

        <activity android:name="es.gleb.ui.StationsListActivity" android:label="@string/app_name">
        </activity>             

        <activity android:name="es.gleb.ui.WebViewActivity" android:configChanges="orientation|keyboardHidden" 
        android:label="@string/app_name">
        </activity>             

        <service android:name="es.gleb.ui.ForegroundService" />

        <!--  android:process=":remote"-->
        <provider android:name="es.gleb.provider.ZenerLanProvider" 
            android:authorities="es.gleb.provider.ZenerLanProvider">
        </provider>

        <receiver android:name="es.gleb.poller.OnAlarmReceiver"  />

        <service android:name="es.gleb.poller.PollerService"  />

        <service android:name="es.gleb.service.QueueService"/>

        <receiver android:name="es.gleb.poller.OnBootReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:38:44.163

很抱歉有几个答案......它们已被删除，但我想说一下我的解决方案：app_name 字符串末尾的“\n”导致了这个问题。

# python - Python Pandas 中的 GroupBy 函数，如 SUM(col_1*col_2)、加权平均等

> ID：10009468
> 
> 赞同：9
> 
> 时间：2012-04-04T10:38:56.000
> 
> 标签：python, pandas

是否可以直接计算两列的乘积（或例如总和）而不使用

```
grouped.apply(lambda x: (x.a*x.b).sum() 
```

使用起来要快得多（不到我机器上时间的一半）

```
df['helper'] = df.a*df.b
grouped= df.groupby(something)
grouped['helper'].sum()
df.drop('helper', axis=1) 
```

但我真的不喜欢这样做。例如，计算每组的加权平均值很有用。这里的 lambda 方法是

```
grouped.apply(lambda x: (x.a*x.b).sum()/(df.b).sum()) 
```

并且再次比将助手除以 b.sum() 慢得多。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T20:18:37.160

我想最终构建一个嵌入式数组表达式评估器（类固醇上的 Numexpr）来做这样的事情。现在我们正在处理 Python 的局限性——如果你实现了一个 Cython 聚合器，`(x * y).sum()`那么它可以与 groupby 连接，但理想情况下你可以将 Python 表达式编写为一个函数：

```
def weight_sum(x, y):
    return (x * y).sum() 
```

这将得到“JIT 编译”并且与 groupby(...).sum() 一样快。我所描述的是一个非常重要（数月）的项目。如果有一个与 BSD 兼容的 APL 实现，我可能会更快地完成上述操作（只是大声思考）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:02:28.190

直接对xa*xb的结果进行分组怎么样，例如：

```
from pandas import *
from numpy.random import randn
df = DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
               'foo', 'bar', 'foo', 'foo'],
        'B' : ['one', 'one', 'two', 'three',
               'two', 'two', 'one', 'three'],
        'C' : randn(8), 'D' : randn(8)})

print (df.C*df.D).groupby(df.A).sum() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-02T13:48:44.293

多年后通过[pydata blaze得到了答案](http://blaze.pydata.org/)

```
from blaze import *
data = Data(df)
somethings = odo(
by(data.something, 
   wm = (data.a * data.weights).sum()/data.weights.sum()),
pd.DataFrame) 
```

# java - 使用 JiBX (Un) Marshalling 转义特殊字符

> ID：10009469
> 
> 赞同：0
> 
> 时间：2012-04-04T10:38:59.197
> 
> 标签：java, xml, jibx

我希望在编组过程中特殊字符应该转义，有没有办法做到这一点？

```
alt="<i><b> image alt</b></i>" 
```

这被保存为

```
&lt;b>&lt;i>image alt&lt;/b>&lt;/i> 
```

我想按原样保存价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:04:01.023

如果您将某些内容存储为 XML，则必须转义该符号。否则你的 XML 将变得无效：

```
<xml>text</xml>

if test == </xml> the XML will be clearly invalid:

<xml></xml></xml> 
```

这必须是：

```
<xml>&lt;/xml></xml> 
```

如果你解组它，它应该再次成为正确的值。

您也可以使用[CDATA](http://de.wikipedia.org/wiki/CDATA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T08:19:41.157

我以为我分享了我的经验，因为我找到的答案并不全面（而且我仍然不确定这是否是最专业的解决方案）。

在我们的项目中，我们使用**maven-jibx-plugin**从 XSD 生成 POJO（照常运行两次：1\. *.xsd->binding.xml，然后 2\. binding.xml-> *.java）。

基于[value 节点的文档](http://jibx.sourceforge.net/details/value-element.html)和[Dennis Sosnoski](http://planetjava.org/java-jibx-users/2010-11/msg00009.html)在 jibx 邮件列表上的回答，我将**xml-maven-plugin**添加到我们的项目构建过程中。在 POJO 生成之前，我使用它在生成的 binding.xml 上应用 XSL 文件。关键是将适当值节点上的样式属性值从文本更改为cdata。

到目前为止，它已经解决了我的编码问题，现在我可以返回到客户端 xml，例如：

```
<Description><![CDATA[<strong>Valuable content goes here</strong>...<br />]]></Description> 
```

希望这能让人们的生活更轻松。:)

# java - 我应该使用什么数据结构在java中存储二进制代码？

> ID：10009484
> 
> 赞同：2
> 
> 时间：2012-04-04T10:39:43.000
> 
> 标签：java, arrays, string, binary, image-compression

我有二进制代码**10111**、**100011**、**11101111**等。现在我应该使用什么**数据结构**来存储这些代码，以便存储它们需要最小大小？

我不能使用**字符串数组**，因为与存储上述二进制代码的十进制等效值相比，所需的大小将更多。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T10:47:03.797

[`java.util.BitSet`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)如果长度不固定，则专为此设计。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T10:42:36.457

根据代码的长度，只需使用`int`或`long`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T10:46:11.623

如果它们很短，请使用`byte`, `int`, `long`（取决于有多短）。

如果它们会更长一点，请使用`byte`s、`int`s 或`long`s 的数组。例如，如果您需要存储 256 位代码，您可以在`long[4]`.

如果您需要存储的代码的长度变化很大，您可以考虑一个类，其`length`成员给出位数和一个`byte`, `int`, `long`, `byte[]`,`int[]`或`long[]`用于存储它们的成员（取决于大小和您想要的粒度类型）。或者，如果您真的想尽可能多地打包，您可以从存储区域中留出一些位来保存代码中的位数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T10:48:04.337

每个二进制代码可以按 8 位（一个字节）分成几部分。如果尾部小于 8 位，则有必要定义如何处理尾部。字节数组应该在这里很好地存储每个部分。

# android - 从 BroadcastReceiver 类开始意图

> ID：10009485
> 
> 赞同：0
> 
> 时间：2012-04-04T10:39:46.257
> 
> 标签：android

我的应用程序接收 SMS 和活动更改以在我的应用程序中显示警报对话框。`Toast`运行良好，但不会改变活动。`onReceive()`接收包含电子邮件的 SMS，并根据该电子邮件 ID，我的应用程序搜索关联的联系号码并将其以回复消息的形式发回。

```
public void onReceive( Context context, Intent intent ) 
{
    // Get SMS map from Intent
    Bundle extras = intent.getExtras();

    String messages = "";

    if ( extras != null )
    {
        // Get received SMS array
        Object[] smsExtra = (Object[]) extras.get( "pdus" );

        // Get ContentResolver object for pushing encrypted SMS to incoming folder
        //ContentResolver contentResolver = context.getContentResolver();

        for ( int i = 0; i < smsExtra.length; ++i )
        {
            SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

            String body = sms.getMessageBody().toString();
            String address = sms.getOriginatingAddress();

            messages += "SMS from " + address + " :\n";                    
            messages += body + "\n";

            // Here you can add any your code to work with incoming SMS
            // I added encrypting of all received SMS 

        }

        // Display SMS message
        Toast.makeText( context, messages, Toast.LENGTH_SHORT ).show();
        Intent i=new Intent(context,AlertActivity.class);
       // context.startActivity(i);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:45:48.180

您`addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)`在启动 AlertActivity 活动后添加。使用这种方式：

```
Intent i=new Intent(context,AlertActivity.class);

i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 

context.startActivity(i); 
```

# iphone - 如何定义变量取决于XCode中的条件

> ID：10009494
> 
> 赞同：0
> 
> 时间：2012-04-04T10:40:11.507
> 
> 标签：iphone, ios, xcode, ipad

我想定义一些变量取决于它是在 Iphone 还是 Ipad 应用程序上运行。所以我写了这段代码

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    #define ABC @"122"
    NSLog(@"Ipad");
} else {
    #define ABC @"123"
    NSLog(@"iphone ");
}
NSLog(@" %@", ABC); 
```

但在 iphone 和 Ipad 中都显示 123。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:47:01.347

`#define``ABC`告诉预处理器通过与之关联的值来修改源代码中的每个出现。

`ABC`将被替换为`@"122"`在该行之后的所有行中`#define ABC @"122"`以及`@"123"`在该行之后的所有行中`#define ABC @"123"`。

此步骤发生在构建时而不是运行时。所以你应该定义`ABC`为一个字符串并设置它的值如下：

```
NSString *ABC;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    ABC = @"122";
    NSLog(@"Ipad");
} else {
    ABC = @"123";
    NSLog(@"iphone ");
}
NSLog(@"%@", ABC); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T11:12:52.380

试试这个：

```
#define ABC (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad ? @"122" : @"123") 
```

这应该适合你。

# python - cherrypy 配置文件中的常量

> ID：10009495
> 
> 赞同：0
> 
> 时间：2012-04-04T10:40:11.827
> 
> 标签：python, configuration, constants, cherrypy

我有以下 Cherrypy 配置文件：

```
[/tmp]
tools.staticdir.on: True
tools.staticdir.dir: "../something/path/" 
```

是否可以将字符串`"../something/path/`" 作为常量放在此文件中并使用它：`tools.staticdir.dir:MY_PATH_CONST`？如果可能，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:58:15.767

将标识符添加到您的配置文件...

```
[custompath]
path : "../something/path/" 
```

然后以这种方式访问​​代码中的路径：

```
cherrypy.request.app.config['custompath']['path'] 
```

希望这可以帮助。

安德鲁

# c# - 降价到 PDF

> ID：10009498
> 
> 赞同：12
> 
> 时间：2012-04-04T10:40:25.717
> 
> 标签：c#, .net, markdown

有没有可以将 Markdown 转换为 PDF 的库？还是直接生成令牌而不是 HTML 的完整降价解析器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T09:53:40.193

我首先使用 MarkdownSharp 生成 HTML，然后使用`https://wkhtmltopdf.org/`.

任何其他链接到基于令牌的解析器或可以直接生成 PDF 的库的答案都将被授予答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T01:50:24.487

你可能想检查你的 Markdown 解析器的 LaTeX 扩展，它可以很容易地转换成 PDF。显然有 python-markdown 解析器。例如，[https://github.com/justinvh/Markdown-LaTeX](https://github.com/justinvh/Markdown-LaTeX)。

看起来您也可以使用 pandoc 将 markdown 转换为 LaTeX： [https ://pandoc.org/](https://pandoc.org/)

# mongodb - 子级别问题的mongodb索引

> ID：10009499
> 
> 赞同：1
> 
> 时间：2012-04-04T10:40:28.583
> 
> 标签：mongodb

我在 mongodb 中有一个文档结构如下

```
{
  "_id": "some_id",
    "key1": "value1",
    "key2": "value2",
    "key3": [
             {"subkey1":"subval1", "subkey2":"subval2",   "subkey3":"subval3"},
             {"subkey1":"subval11", "subkey2":"subval21", "subkey3":"subval31"},
             {"subkey1":"subval12", "subkey2": "subval22", "subkey3":"subval32"}
            ],
    "key4": "value4"
} 
```

我想把索引放在“subkey1”上。怎么做？？？

还是不可能（在这种情况下，它是否可以有效地使用“key3”上的索引）？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:44:25.430

只需使用[ensureIndex](http://www.mongodb.org/display/DOCS/Indexes)为您想要的键添加索引

```
db.foos.ensureIndex({"key3.subkey1": 1}) 
```

如[文档](http://www.mongodb.org/display/DOCS/Indexes#Indexes-IndexingArrayElements)中所示：

> 当文档的索引键字段的存储值是数组时，MongoDB 索引数组的每个元素

如果您使用“key3.subkey1”进行查询，则不会单独为 key3 添加索引。

# android - 使用 Sencha 的应用程序中的 Android 设备上的文本字段样式崩溃

> ID：10009500
> 
> 赞同：3
> 
> 时间：2012-04-04T10:40:46.430
> 
> 标签：android, sencha-touch, textfield

我在文本输入和密码字段的 Sencha 的默认样式（或 Android 不确定）上遇到问题，它在 iOS 设备和某些 android 设备上工作正常，但 HTC 和其他人把他们糟糕的默认样式（白色背景和灰色边框），我无法更改或隐藏。正因为如此，所有的布局看起来都非常糟糕...... [请看图片。](http://www.flickr.com/photos/76912779@N08/6898479772/) 即使是 Sencha Touch 的样品也有同样的问题。 [请参阅此处的第二张图片](http://www.flickr.com/photos/76912779@N08/7044576267/)。如果您有任何建议是什么原因或如何隐藏，我将不胜感激！！这就是我为此所做的一切

```
input { 
background: transparent !important; 
border: 0 transparent !important; 
-webkit-appearance: none; 
} 
input[type=text] { 
background: transparent !important; 
border: 0 transparent !important; 
-webkit-appearance: none; 
}
input:focus{ 
outline:none; 
background: transparent !important; 
border-color: transparent !important; 
-webkit-focus-ring-color: transparent; 
-webkit-appearance: none; 
} 
```

在此先感谢安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:45:30.117

您所看到的实际上是一个 Android“功能”，它在您的样式输入字段之上生成一个本机控件。

如果您尝试将您的领域移动到焦点上，您应该会看到该领域是完整的，请尝试以下 css 规则来查看现象：

```
input:focus {
    position: absolute;
    left: -20px;
} 
```

您可以做的是尝试设置`-webkit-user-modify: read-write-plaintext-only;`在某些手机上可以使用的功能（不确定< 2.3），但可能会破坏某些功能。例如，对于数字字段，您仍然会得到一个 qwerty 键盘而不是数字键盘等。

所以尝试一下，希望它对您有所帮助并适合您的需求。

# android - 使用 ImageButton 运行应用程序时出现 Android 错误

> ID：10009504
> 
> 赞同：0
> 
> 时间：2012-04-04T10:41:18.193
> 
> 标签：android, exception, imagebutton

尝试将自定义图像添加到 ImageButton 时，出现以下错误：

```
E/AndroidRuntime(3304): Caused by: java.io.FileNotFoundException: res/drawable/btn_default.xml 
```

这有效：

```
<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@android:drawable/btn_plus" /> 
```

这不会：

```
<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/elec" /> 
```

在设计器上，我可以在按钮上看到很好的图像，但是一旦我尝试运行它，就会出现上述错误。elec.png 文件位于 drawable-hdpi 中。

烧了3个小时试图找到问题。任何帮助真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:44:01.093

您还应该将图像放在`drawable`文件夹中（+ 中正确大小的版本，`drawable-ldpi`以遵循 Android 指南）`drawable-mdpi``drawable-xhdpi`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:11:39.907

最后，事实证明我的模拟器不知何故损坏了。该代码在真实设备和新生成的模拟器上完美运行。

# lisp - Lisp：'nil 和 nil 有什么区别吗？

> ID：10009508
> 
> 赞同：3
> 
> 时间：2012-04-04T10:41:30.943
> 
> 标签：lisp, common-lisp

两个都

```
(not 'nil) 
```

和

```
(not nil) 
```

评估为，那么和`T`之间有什么区别吗？那么呢？如果评估为，不应该评估为吗？`'nil``nil``''nil``''nil``'nil``''nil``nil`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T14:03:02.827

`(quote <anything>)``<anything>`从字面上看，计算结果为 。符号`'<anything>`表示`(quote <anything>)`，无论是什么`<anything>`，它都只是简单地返回而不被评估。

此外，`nil`对自身进行评估。

其他对象，当引用为文字时，也会对自己进行评估：某些符号和所有非符号原子都是这种方式。

`'2`和 和有什么不一样`2`？他们都评价为`2`！

`'"abc"`另外， and和`"abc"`之间有什么区别？`:foo``':foo`

不同的是，`'2`是形式`(quote 2)`，而`2`只是`2`。他们评估同一件事，但不是同一件事。

评估 Lisp 意味着将数据视为表达式的源代码。两个表达式可以具有相同的值，但由不同的数据组成。例如和。`4`_`(+ 2 2)``(* 2 2)`

`4`说，和有什么区别`(+ 2 2)`？

如果`4`和`(+ 2 2)`都产生 4，为什么`'4`产生`4`，但是`'(+ 2 2)`产生`(+ 2 2)`？

引用的意思是，“给我这段程序代码作为数据，而不是它所表示的值。”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T12:07:23.050

When you evaluate `NIL` you get the value of the [variable named NIL](http://clhs.lisp.se/Body/v_nil.htm#nil), and when you evaluate `'NIL` you get the symbol named NIL. However, these two things are defined by the spec to be the same object. See [the Hyperspec on nil](http://clhs.lisp.se/Body/26_glo_n.htm#nil):

> **nil** *n.* the object that is at once the symbol named `"NIL"` in the `COMMON-LISP` package, the empty list, the boolean (or generalized boolean) representing false, and the name of the empty type.

You can check that for yourself:

```
(eq NIL 'NIL) ==> T 
```

However, the equivalence stops there. `''NIL` evaluates to the list `(quote NIL)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:07:12.363

There is no difference, as long as you consider only the result of evaluation, i.e.,

```
nil 
```

and

```
'nil 
```

evaluate to the same value (namely, `nil`). There is, however, a true difference, as far as the reader is concerned, since

```
nil  ===> nil 
```

whereas

```
'nil ===> (quote nil) 
```

This is interesting in particular, if you have nested forms like

```
((nil) 'nil) 
```

which is read as

```
((nil) (quote nil)) 
```

# php - 在没有浏览器/用户的情况下定期更新数据库

> ID：10009510
> 
> 赞同：2
> 
> 时间：2012-04-04T10:41:37.820
> 
> 标签：php, mysql, live, arduino

我目前有一个 MySQL 数据库，我希望用它来存储来自连接到 Internet 的温度传感器的定期更新数据。

我目前有一个页面，当打开时，它将获取当前温度和当前时间戳并将其作为条目添加到数据库中，但我正在寻找一种方法来做到这一点，而无需每 5 秒刷新一次页面。

详细信息：数据来自 Arduino 以太网，发布到 IP 地址。目前，我正在使用 cURL 从 IP 中获取数据，添加时间戳并将其保存到数据库中。显然只有在页面刷新时才会更新（它使用 PHP）。

这是数据的实时提要 - [http://wetdreams.org.uk/ChrisProject/UI/live_graph_two.html](http://wetdreams.org.uk/ChrisProject/UI/live_graph_two.html)

TL;DR - 基本上我需要一个中间人从 IP 中获取数据并将其发布到 MySQL

**编辑：**感谢所有建议。可能会有一点混乱，我正在寻找一个（理想情况下）根本不需要计算机（除了包含数据库的服务器）的解决方案。由于我希望在很长一段时间（几周）内存储数据，我想设置它并在服务器（或 Arduino）上运行一个脚本，该脚本获取临时并将其发布到数据库。

在我的脑海中，我想在服务器上有一个页面自动（无需打开任何浏览器，或除计时器之外的任何其他提示）调用 PHP 脚本。

希望这能说明问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:49:03.920

you can post directly to web server from your arduino using [ArduinoEtherenetClient](http://arduino.cc/en/Reference/EthernetClient) (click link to get example)

`POST /insertData.php` - in insertData.php use `$_POST["tempCaptured"]` to get the temp value and insert that in db.

Good article on using ArduinoEthernetClient [http://interactive-matter.eu/how-to/arduino-http-client-library/](http://interactive-matter.eu/how-to/arduino-http-client-library/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:50:28.240

编写一个代码（ping.php），以固定的时间间隔 ping 这个 url。

现在，设置一个以固定间隔运行此代码的[cronjob 。](http://en.wikipedia.org/wiki/Cron)

你的 cron 可以是`0 */2 * * * PATH_TO_{ping.php} // will run every 2 hours`

您的 ping.php 文件将连接到实时提要，获取数据并将结果存储到数据库。：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:36:14.793

在这种情况下，最好的解决方案是使用 Arduino 将请求发布到 PHP 脚本，该脚本完成它的工作并将检索到的值添加到数据库中。我刚才运行它的方式（为简单起见）是使用 EthernetClient 来自 Arduino 的 GET 请求。

代码：

```
char server[] = "www.example.com"; 
```

和

```
if(client.connect(server, 80)){
  client.println("GET /test.php?input_val=99 HTTP/1.0");
  client.println("HOST: www.example.com");
} 
```

然而，由于我已经围绕数据发布到独立服务器/IP* 的事实构建了我的网站，所以我选择使用 cron 来安排任务。在这种情况下，我想每 5 到 10 秒更新一次数据库。但是，我正在搭载其他人的服务器，所以我联系了服务器所有者并要求他们设置一个 cron 作业，每分钟调用一次“/mysubdir/cron_update.php”（最快的 cron 可以调用）。从那里我做了一些'ScriptCeption'并在PHP脚本中，在完成脚本之前每10秒完成我的调用一分钟。

感谢所有帮助我的人，我在这里发布这个作为完整的答案和解释，因为从技术上讲每个人都是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T10:48:20.660

You can use JavaScript to auto refresh the page

```
<script type="text/javascript">
    function timedRefresh(timeoutPeriod) {
        setTimeout("location.reload(true);", timeoutPeriod);
}
</script> 
```

A better solution would be ajax and send the date regulary in the background to the database.

Another way is to use a [PHP-CLI script](http://php.net/manual/en/features.commandline.php) and to schedule it with [cron jobs](http://www.unixgeeks.org/security/newbie/unix/cron-1.html) that gets the values from your sensor automatically.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T10:49:51.580

如果我理解这个问题。您只需要更换每 5 秒刷新一次网页吗？
没有得到数据？

我会设置一个 ajax 连接，并让 php 在一种无限循环中运行。将新数据回显到您的 javascript 以更新图表。PHP 循环必须进行超时检查才能最终关闭脚本。

# linux - 如何更新 Ubuntu 中当前目录下的所有文件，并在文件开头添加一些注释

> ID：10009511
> 
> 赞同：0
> 
> 时间：2012-04-04T10:41:43.263
> 
> 标签：linux, ubuntu

我有一个问题，我试图在项目中的所有文件中添加版权信息。由于它会影响许多目录和文件，我们的团队已经拆分了任务。所以我们每个人都将手动更新文件。我可以自动化它。

我试过：
`find -exec sed -i "1i # x CONFIDENTIAL\n# _____________________\n#\n# 1997 - 2012 x Incorporated\n# All Rights Reserved.\n#\n# NOTICE: All information contained herein is, and remains\n# the property of x Incorporated and its suppliers,\n# if any. The intellectual and technical concepts contained\n# herein are proprietary to x Incorporated\n# and its suppliers and may be covered by U.S. and Foreign Patents,\n# patents in process, and are protected by trade secret or copyright law.\n# Dissemination of this information or reproduction of this material\n# is strictly forbidden unless prior written permission is obtained\n# from x Incorporated.\n" -- {} \;`

它只是停止，只要它遇到 . 文件夹和当前目录下的任何文件夹。

我们可以通过指定文件的完整/部分名称来控制命令影响目录中的某些文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:01:49.440

您可以通过对每个文件执行以下命令来做到这一点：

```
cp file temp
cat copy_right_notice temp > file 
```

请注意`>`覆盖`file`（虽然`>>` **附加**到文件，这不是您想要的（参考您的评论））

# html - 如何使div的内容居中

> ID：10009514
> 
> 赞同：4
> 
> 时间：2012-04-04T10:42:06.293
> 
> 标签：html, css

我有一个非常简单的问题，但我似乎无法解决它。我在 div 中有一个表格，这是主要元素。现在我在表格中有一个 td 标签，其宽度和高度设置为 iphone 屏幕尺寸。现在我基本上想将该表与 div 标记内的 td 单元格居中，以便“屏幕”将在任何浏览器窗口中居中。我怎么做？

用表格替换那个 div 解决了我的问题，但我想用一个 div 代替。

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T11:20:34.007

试试这个，我做这个代码 -[演示在这里](http://jsfiddle.net/ERuX4/1/)，非常简单的代码（我只为 IE 旧版本使用了 hack 代码和额外的 span 标签） [http://jsfiddle.net/ERuX4/1/](http://jsfiddle.net/ERuX4/1/)

```
<div class="demo wraptocenter">
   <span></span>
   <img src="http://www.spitzer.caltech.edu/images/twitter.png?1295473781" alt="" />
</div> 
```

**css**

```
.wraptocenter * {
    vertical-align: middle;
}
.wraptocenter span {
    display: inline-block;
    height: 100%;
    width: 1px;
}
.wraptocenter {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
}

/*End wraptocenter - image Vcenter  patch styles*/    
.demo  {
         width:100px;
         height:100px;
         border:1px solid red;
         position:absolute;
         top:50%;
         left:50%;
         margin-top:-100px;
         margin-left:-100px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:48:59.500

```
<style type="text/css">
.outer { width:800px; height:640px; }
.inner {
    position:relative; top:50%; left:50%;
    width: 320px;
    margin-left: -160px; /* half the width */
    height: 240px;
    margin-top: -120px; /* half the height */
</style>

<div class="outer">
    <div class="inner">I'm centered!</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:50:00.030

试试这个：

```
div#centerlayout 
{ 
    position:absolute; 
    left:50%; 
    top:50%; 
    height:XXXpx; 
    width:XXXpx; 
    margin-top:-XXXpx; 
    margin-left:-XXXpx; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:14:19.987

**HTML**

```
 <div class="img_thumb">
    <table>
        <tr><td>adfasfdasf</td></tr>
        <tr><td>adfasfdasf</td></tr>
        <tr><td>adfasfdasf</td></tr>
        <tr><td>adfasfdasf</td></tr>
        <tr><td>adfasfdasf</td></tr>
    </table>
</div> 
```

**CSS**

```
.img_thumb {
    background: none repeat scroll 0 0 red;
    display: table-cell;
    height: 200px;
    vertical-align: middle;
    width: 200px;

}
table {
    border: 1px solid;
    width: 100px;
    margin:auto;
} 
```

或查看演示：- [http://jsfiddle.net/QHEnL/16/](http://jsfiddle.net/QHEnL/16/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T21:01:40.283

我没有在 IE 中测试过（在 FF 和 Safari 中工作），但是如果你使用 jQuery，你可以使用它来`page`使页面中的类居中 div：

```
var pageMargin = ($(document).width() - $("div.page").width()) / 2;
$("div.page").css("margin-left", pageMargin).css("margin-right", pageMargin); 
```

# ios - 没有在 UITableViewCell 中点击 UISwitch 的 indexPath

> ID：10009515
> 
> 赞同：3
> 
> 时间：2012-04-04T10:42:06.120
> 
> 标签：ios, ios5, uitableview, uiswitch

我在一个UITableViewCell中添加了一个UISwitch，表格内容是动态的，也就是说一个tableview中可能有很多UISwitch，我需要获取每个UITableViewCell的UISwitch状态，但是没有获取到`indexPath`in`accessoryButtonTappedForRowWithIndexPath`方法。

我的代码是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    LocationCell *cell = (LocationCell *)[tableView 
                                          dequeueReusableCellWithIdentifier:@"LocationCell"];

    UISwitch *useLocationSwitch = [[UISwitch alloc] initWithFrame:CGRectZero];
    [cell addSubview:useLocationSwitch];
    cell.accessoryView = useLocationSwitch;

    [useLocationSwitch addTarget: self
               action: @selector(accessoryButtonTapped:withEvent:)
     forControlEvents: UIControlEventTouchUpInside];

    return cell;
}

- (void) accessoryButtonTapped: (UIControl *) button withEvent: (UIEvent *) event
{
    NSIndexPath * indexPath = [showLocationTableView indexPathForRowAtPoint: [[[event touchesForView: button] anyObject] locationInView: showLocationTableView]];
    if ( indexPath == nil )
        return;

    [showLocationTableView.delegate tableView: showLocationTableView accessoryButtonTappedForRowWithIndexPath: indexPath];
}

-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"index path: %@", indexPath.row);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:48:05.107

The control event should be `UIControlEventValueChanged`.

Not `UIControlEventTouchUpInside`. Change that and try again.

So the action setting statement should be as follows:

```
[useLocationSwitch addTarget: self
                      action: @selector(accessoryButtonTapped:withEvent:)
            forControlEvents: UIControlEventValueChanged]; 
```

**Edit:**

```
- (void) accessoryButtonTapped: (UIControl *) button withEvent: (UIEvent *) event
{
    UISwitch *switch1 = (UISwitch *)button;
    UITableViewCell *cell = (UITableViewCell *)switch1.superview;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

    //NSIndexPath * indexPath = [showLocationTableView indexPathForRowAtPoint: [[[event touchesForView: button] anyObject] locationInView: showLocationTableView]];
    if ( indexPath == nil )
        return;

    [showLocationTableView.delegate tableView: showLocationTableView accessoryButtonTappedForRowWithIndexPath: indexPath];
} 
```

# ruby-on-rails - 带空格的 mongoid 数组

> ID：10009517
> 
> 赞同：4
> 
> 时间：2012-04-04T10:42:23.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我在 mongoid 中使用一个数组来存储用户角色，它大部分工作正常，但是我遇到了 rails 将空白传递给数组并且 mongoid 保存它的问题。

```
["", "admin", "editor", "author"] 
```

Formtastic 会自动执行此操作以避免另一个问题，我想知道什么。但问题是 mongoid 将空白保存在数组中。我怎么能告诉它忽略空白？

```
<input id="user_roles_none" name="user[roles][]" type="hidden" value="" /> 
```

代码：

```
 field :roles, :type => Array, :default => ["author"]

  ##USER ROLES

  ROLES = %w[admin editor author]

  class << self
    def with_role(*args)
      any_in(:roles => args)
    end
  end 
```

我确定我可以在 before_save 之前进行回调并删除 nils，但肯定还有另一种我忽略的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:51:22.263

您可以覆盖角色编写器方法并对其进行压缩。

```
def roles=(values)
  write_attribute(:roles, values.map{|v| v.blank? ? nil : v}.compact)
end 
```

[编辑]：就像 Mik_Die 对评论的解释一样。你可以这样做：

```
def roles=(values)
  write_attribute(:roles, values.reject(&:blank?)
end 
```

# javascript - 用 ASP.NET 上的服务器端连接交换现有的 Javascript SQL Server 连接？

> ID：10009518
> 
> 赞同：0
> 
> 时间：2012-04-04T10:42:23.897
> 
> 标签：javascript, asp.net, sql-server

客户端计算机无权访问 SQL Server 端口，并且无法向客户端计算机打开端口。

场景：我们有一个完全用 javascript 编写的旧客户端应用程序。javascript 包含一个明文连接字符串，包括一个 sql server 帐户用户名和密码。我们还使用 ASP.NET 来托管其他应用程序。

我们希望无需重写整个 javascript 应用程序即可将连接移动到服务器。

有没有办法只用服务器端连接替换 .js 文件中的连接，而不必为 .js 文件中的每个数据函数编写 AJAX（或类似的东西）调用？

以下是在 SQL Server 端口更改之前客户端用于连接的方式：

```
var conn_str = "DRIVER=SQL SERVER;SERVER=MyServer;DATABASE=MyDb;UID=sqluser;PWD=mypassword;";

function openConn() {
    //alert("openConn() ");
    this.conn = getAdoDb("ADODB.Connection");
    conn.ConnectionTimeout = 240;
    conn.CommandTimeout = 240;
    conn.open(conn_str, "", "");
    //alert("Current Connection String: " + conn_str);} 
```

上面的代码在一个包含数千行代码的 javascript 文件中。我们想简单地用 ASPX 页面或 AJAX 或 .js 文件可能使用的东西替换 javascript 的这个连接部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:17:04.613

> 有没有办法只用服务器端连接替换 .js 文件中的连接，而不必为 .js 文件中的每个数据函数编写 AJAX（或类似的东西）调用？

如果您打算使用服务器端技术，AJAX 只是一种选择。您可以将调整后的数据嵌入到页面中以供 javascript 使用（即，将 JSON 输出到页面）等。

您可以创建一个通用的服务器端数据函数，该函数将接受 SQL 和参数，但需要验证传入的查询和参数以避免 SQL 注入和篡改。

在我看来，替换所有数据函数没有安全的方法。

# database - 学生跟踪系统的数据库设计

> ID：10009521
> 
> 赞同：0
> 
> 时间：2012-04-04T10:42:35.230
> 
> 标签：database, erd

编辑：我修改后的实体关系图一个学生可以有很多联系时间，但这与他们所学的课程无关。所以 tblContact 中的 courseID 是不必要的，所以我习惯于 tblStudent 中的主键与特定导师标记的作业的成绩以及特定学生使用该 TMA 的课程相关。唷

[http://i.imgur.com/cf3td.png](https://i.imgur.com/cf3td.png)

/编辑

我的**旧**ERD

![ERD](../Images/fb99b2e00040efd97b3ec4b42118b827.png)

请注意，StudID 和 CourseID 是合并的复合主键

我的问题：我应该在 tblContact 中有 studID 和 courseID 吗？或者我应该只拥有StudID，因为我使用的是复合主键，我认为我应该在tblContact 和tblStudentTMA 中同时拥有这两个值？这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:04:04.310

答案取决于联系人是否与课程相关。

如果它与课程有关，那么您需要某种方式从联系人中识别课程，但您可以从 tblContact 链接到 tblCourse 表。

我对多对多表的偏好是在您的示例中使用单独的主键`StudentCourseID`，这是一个[标识](http://en.wikipedia.org/wiki/Identity_column)列，这消除了在相关表中存储多个外键的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:18:06.387

tblContact 中的主键必须至少有两列。其中之一必须是 StudID。

它必须至少有两列，因为您需要为每个学生存储多个联系人。其中一列必须是 StudID 以保证联系人行指的是实际学生。第二列可能需要是 DateOfContact。

主键 {StudID, DateOfContact} 允许每个学生每天有一个联系人。如果您改用 {StudID, TimeOfContact}（使用时间戳而不是日期），则每位学生每天可以有多个联系人。

除此之外，如果tblContact 中的*每一*行都必须引用一个学生和该学生的一门课程，那么您可能应该在主键中包含 CourseID。您还需要从 tblContact (StudID, CourseID) 到 tblStudentCourse (StudID, CourseID) 的外键引用。

如果 tblContact 中的每一行都不需要引用课程，那么 tblContact.CourseID 应该可以为空，并且它不应该是主键的一部分。但是您仍然应该有一个从 tblContact (StudID, CourseID) 到 tblStudentCourse (StudID, CourseID) 的外键引用。

# python - 在 python 中使用正则表达式解析 URL

> ID：10009523
> 
> 赞同：2
> 
> 时间：2012-04-04T10:42:38.067
> 
> 标签：python, regex

我想从 URL 中获取要显示的查询名称和值。例如。`url='http://host:port_num/file/path/file1.html?query1=value1&query2=value2'` 由此解析查询名称及其值并打印它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T10:46:43.683

不要使用正则表达式！使用[urlparse](https://docs.python.org/3/library/urllib.parse.html)。

```
>>> import urlparse
>>> urlparse.parse_qs(urlparse.urlparse(url).query)
{'query2': ['value2'], 'query1': ['value1']} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T11:02:10.493

我同意最好不要使用`regex`，最好使用，`urlparse`但这是我的`regex`. 像这样的类是专门为有效地处理所有 url 而开发的，并且比使用它们`urlparse`要可靠得多。`regex`

```
>>> x = 'http://www.example.com:8080/abcd/dir/file1.html?query1=value1&query2=value2'
>>> query_pattern='(query\d+)=(\w+)'
>>> # query_pattern='(\w+)=(\w+)'    a more general pattern
>>> re.findall(query_pattern,x)
[('query1', 'value1'), ('query2', 'value2')] 
```

# math - 用尺寸减小的数字填充网格

> ID：10009528
> 
> 赞同：1
> 
> 时间：2012-04-04T10:43:06.057
> 
> 标签：math, geometry, 2d

有一个有趣的游戏，在网格中有数字，每个数字的字体逐渐变小。玩家的任务是连续点击数字。

我对为数字创建框的算法感兴趣，我想不出它的工作方式。

显然网格有 N 个数字（除了图中的 1.88），数字 1 的字体最大，字体大小依次减小。然后以某种方式将数字放置在网格上，并在它们周围增长盒子。但它似乎并不完全随机，因为有一些水平线穿过整个网格。

你知道这可能如何工作吗？

![在此处输入图像描述](../Images/9d69bf0a82017596957c8cc1703561a8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:31:45.790

在我看来，这些盒子好像是通过连续划分生成的。即从整个矩形开始，放置一条分割线（水平或垂直），然后将得到的两个矩形依次细分，直到有足够的矩形供游戏使用。

这是我将尝试的第一个算法的草图。*N*是我想将原始矩形划分成的矩形数量，*A*是用于阻止小矩形变得太窄的关键纵横比。（也许*A* = 1.5 会是一个好的开始。）

1.  创建一个空的[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)并将整个矩形添加到其中。

2.  如果优先队列的长度大于或等于*N*，则停止。

3.  从优先级队列中删除最大的矩形*R 。*

4.  选择是水平分割还是垂直分割：如果它的纵横比（宽/高）大于*A*，则垂直分割；如果小于 1/ *A*，则将其水平划分，否则随机选择。

5.  决定在哪里放置分界线。（可能沿所选维度随机介于 40% 和 60% 之间。）

6.  这将*R*分成两个较小的矩形。将它们都添加到优先级队列中。转到第 2 步。

当这个算法完成时，队列中有*N*个矩形。~~将数字 1 放在其中最大的位置，将数字 2 放在第二大的位置，依此类推。~~

事实证明，将数字放入框中并不像我第一次尝试时想象的那么简单。面积度量可以很好地细分矩形，但它不适用于将数字放入框中，因为要将文本放入框，高度和宽度都必须考虑（面积不是这样）有用）。

我不会解释将数字放入框中的算法，而是给你一些 Python 示例代码，让你对其进行逆向工程！

```
import heapq, itertools, random 
import Image, ImageDraw, ImageFont

# ALGORITHM PARAMETERS
aspect_max = 1.5                # Above this ratio, always divide vertically
aspect_min = 1.0                # Below this ratio, always divide horizontally
div_min = 0.4                   # Minimum position for dividing line
div_max = 0.6                   # Maximum position for dividing line
digit_ratio = 0.7               # Aspect ratio of widest digit in font
label_margin = 2                # Margin around label (pixels)

class Rectangle(object):
    def __init__(self, x, y, w, h):
        self.x = x
        self.y = y
        self.w = w
        self.h = h
        self.area = self.w * self.h
        self.aspect = float(self.w) / self.h

    def __le__(self, other):
        # The sense of this comparison is inverted so we can put
        # Rectangles into a min-heap and be able to pop the largest.
        return other.area <= self.area

    def __repr__(self):
        return 'Rectangle({0.x}, {0.y}, {0.w}, {0.h})'.format(self)

    def divide(self, n):
        """
        Divide this rectangle into `n` smaller rectangles and yield
        them in order by area (largest first).
        """
        def division(l):
            return random.randrange(int(l * div_min), int(l * div_max))
        queue = [self]
        while len(queue) < n:
            r = heapq.heappop(queue)
            if (r.aspect > aspect_max 
                or r.aspect > aspect_min
                and random.random() < 0.5):
                # Vertical division
                w = division(r.w)
                heapq.heappush(queue, Rectangle(r.x, r.y, w, r.h))
                heapq.heappush(queue, Rectangle(r.x + w, r.y, r.w - w, r.h))
            else:
                # Horizontal division
                h = division(r.h)
                heapq.heappush(queue, Rectangle(r.x, r.y, r.w, h))
                heapq.heappush(queue, Rectangle(r.x, r.y + h, r.w, r.h - h))
        while queue:
            yield heapq.heappop(queue)

    def font_height(self, n):
        """
        Return the largest font height such that we can draw `n`
        digits in this rectangle.
        """
        return min(int((self.w - label_margin * 2) / (digit_ratio * n)),
                   self.h - label_margin * 2)

def draw_rectangles(rectangles, fontfile):
    """
    Create and return an Image containing `rectangles`. Label each
    rectangle with a number using the TrueType font in `fontfile`.
    """
    rectangles = list(rectangles)
    im = Image.new('RGBA', (1 + max(r.x + r.w for r in rectangles),
                            1 + max(r.y + r.h for r in rectangles)))
    draw = ImageDraw.Draw(im)
    for digits in itertools.count(1):
        rectangles = sorted(rectangles,
                            key = lambda r: r.font_height(digits),
                            reverse = True)
        i_min = 10 ** (digits - 1)
        i_max = 10 ** digits
        i_range = i_max - i_min
        for i in xrange(i_range):
            if i >= len(rectangles): return im
            r = rectangles[i]
            draw.line((r.x, r.y, r.x + r.w, r.y, r.x + r.w, r.y + r.h,
                       r.x, r.y + r.h, r.x, r.y),
                      fill = 'black', width = 1)
            label = str(i + i_min)
            font = ImageFont.truetype(fontfile, r.font_height(digits))
            lw, lh = font.getsize(label)
            draw.text((r.x + (r.w - lw) // 2, r.y + (r.h - lh) // 2),
                      label, fill = 'black', font = font)
        rectangles = rectangles[i_range:] 
```

这是一个示例运行：

```
>>> R = Rectangle(0, 0, 400, 400)
>>> draw_rectangles(R.divide(30), '/Library/Fonts/Verdana.ttf').save('q10009528.png') 
```

![样本输出](../Images/af2e0ad6d887810950acdf0aa44ccee8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T12:35:12.330

切割的模式看起来是递归的。也就是说，将区域划分为矩形的过程包括将矩形一分为二，一遍又一遍。有两个切口将整个矩形区域分开（上方和下方的水平切口`1`），因此我们无法判断哪个切口先出现，但我们将切口视为一种树：分开的切口`1`产生`10`了一个大矩形在它下面（`20`、`21`、`4`、`10`等），然后被 和 之间的垂直切割分割`21`，`4`包含的矩形`4`后来被分隔`4`和的切割分割`14`，依此类推。有 N 个切割产生 N 个区域加上一个剩余区域（“1.88”），这不是必需的，但可能会给我们一个线索。

现在我们只需要弄清楚切割的顺序，比例的选择和方向的选择。

连续的数字很少是邻居，所以看起来好像没有随着切割的进行分配数字。相反，该区域被切成矩形，矩形按大小排序，然后分配数字（注意`20`和`21`是相邻的，但它们是由分割它们*之后*的其他切割形成的）。

切割顺序的一个合理假设是算法总是切割最大的矩形。如果这不是真的，我们可能会看到，例如，`14`大于`15`和`18`合并，我看不到这样的例子。

比例...通过仔细测量，我们可以看到比例的实际分布，但我不想做那么多工作。我们没有看到很长、很细的矩形，也没有 50/50 的切割，所以我猜测算法是随机选择的，在 [0.6, 0.8] 这样的范围内。也许它试图避免使矩形非常接近已经存在的矩形的大小。在所有切割之后，选择留下的矩形（“1.88”）既不是最大的也不是最小的；也许它是随机的，也许它是第二大的，也许是别的东西——更多的例子会很有用。

方向似乎强烈倾向于在其狭窄宽度上切割矩形，而不是“纵向”。这具有产生更像正方形而不像书架上的书的矩形的效果。我能看到的唯一可能的例外是`1`-`9`切割，它可能会分割右下角数字为`1`纵向的块。但这取决于上方和下方的切割顺序`1`，因此它会导致一个假设：算法总是沿其较短的维度切割一个矩形，而`1`-`9`切割实际上是第一个。

这大概是我能做到的，没有打破尺子和计算器。

# iphone - 使 IPad 的 UIPopoverController 等于屏幕大小

> ID：10009532
> 
> 赞同：0
> 
> 时间：2012-04-04T10:43:30.657
> 
> 标签：iphone, ipad, uipopovercontroller

我想让`UIPopoverController`两个方向的大小都等于 iPad 屏幕的大小。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:32:05.280

```
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];
self.contentSizeForViewInPopover = CGSizeMake(width,height);} 
```

这是在您必须在弹出框控制器中设置的视图中设置的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:48:08.877

```
CGRect popoverRect = [self.view convertRect:[btn frame] 
                                   fromView:[btn superview]];

popoverRect.size.width = self.view.frame.size.width; 
popoverRect.origin.x  = popoverRect.origin.x+150; 
popoverRect.size.height = self.view.frame.size.width;
[self.popoverController 
 presentPopoverFromRect:popoverRect 
 inView:self.view 
 permittedArrowDirections:UIPopoverArrowDirectionLeft
 animated:YES]; 
```

# visual-c++ - 在 Visual C++ 环境中使用 Ivy/Maven 进行 C++ 二进制依赖管理

> ID：10009538
> 
> 赞同：2
> 
> 时间：2012-04-04T10:43:59.723
> 
> 标签：visual-c++, maven, ivy, dependency-management

我正在寻找一种更好的方法来管理大型 VC++ 项目的二进制依赖项的分发和存储。

目前我们的情况是，外部和内部构建的库存储在源代码控制存储库中，导致 .cpp 和 .h 文件仅占检索空间的不到 3%。这使得创建分支的过程变慢，并阻止了向 DVCS 的合理迁移。

我不想更改通过 MS Visual Studio 解决方案构建的主要方法，但我愿意添加一个额外的步骤来获取/设置所有二进制依赖项。

目前，对于使用现有源代码控制的某些库，这是通过安装包含构建文件的不同存储库来实现的。这可能是一种方法（我不赞成）。

有人有在 VC++ 环境中使用 Ivy 或 Maven 的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:36:15.953

[maven-nar-plugin](http://duns.github.com/maven-nar-plugin/)可能是您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-29T15:41:14.337

也许[vcpkg](https://github.com/microsoft/vcpkg)是您的替代解决方案。

文档可[在此处](https://vcpkg.readthedocs.io/en/latest/)获得或 Visual Studio可[在此处获得](https://docs.microsoft.com/de-de/cpp/build/vcpkg?view=msvc-160)

# google-chrome - 如何让 Chrome 使用正确的自动完成信息？

> ID：10009546
> 
> 赞同：4
> 
> 时间：2012-04-04T10:44:53.210
> 
> 标签：google-chrome, autocomplete, credit-card, autofill

有没有办法向浏览器规定哪些字段应该使用哪些自动完成信息？

我是一名在电子商务网站上工作的开发人员。我问的是，现在，我们有一个结帐，用户输入他们的基本信息（姓名、电子邮件、电话），然后是用于地址查找的邮政编码字段，然后是完整的地址字段（公司、地址、地址行 2、城市、地区、国家和邮政编码字段）。

现在，我通过浏览器知道其中包含国家、城市等的所有信息。但是，当我调用自动完成时，会发生以下情况：

1.  填写姓名、邮箱和电话
2.  使用邮政编码填写自动完成邮政编码字段
3.  地址行填写
4.  其他字段均未填写

其次，我知道我的浏览器中存储了信用卡信息，但自动完成功能并没有通过。

任何帮助，将不胜感激。我在 Google 上搜索过，但显然我的 google-fu 很弱，因为我发现的大多数结果都只是以用户为中心 - 如何添加您的地址并在 chrome 中启用该功能 - 而不是如何设计一个网站以便 chrome 知道信息放哪里。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T18:14:01.017

它可以通过“x-autocompletetype”属性进行控制。看看这个： http: [//googlewebmastercentral.blogspot.fr/2012/01/making-form-filling-faster-easier-and.html](http://googlewebmastercentral.blogspot.fr/2012/01/making-form-filling-faster-easier-and.html) [http://wiki.whatwg.org/wiki/Autocompletetype](http://wiki.whatwg.org/wiki/Autocompletetype)

# reportingservices-2005 - SSRS 2005 - 通过 ASP.net ReportViewer 查看报告时出现 rsDataSourceNotFound 错误

> ID：10009549
> 
> 赞同：1
> 
> 时间：2012-04-04T10:45:19.793
> 
> 标签：reportingservices-2005

我已经在 Reporting Services 2005 中上传了一个报表并创建了一个数据源。当我通过报表管理器查看报表时，它运行成功并正确显示。

但是，当我尝试在使用 ReportViewer 控件查看报表的 ASP.net 应用程序中打开此报表时，它会返回异常：

> **异常详细信息：Microsoft.Reporting.WebForms.ReportServerException：找不到数据源“ReportTesting”。(rsDataSourceNotFound)**

ReportServer 服务器上的事件查看器中记录了一条警告：

```
**Process information: 
    Process ID: 3536 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE** 

**Exception information: 
    Exception type: ReportServerException 
    Exception message: The data source 'ReportTesting' cannot be found. (rsDataSourceNotFound)** 
```

我无法弄清楚为什么报表和数据源通过 ReportManager 运行良好，但当我通过 RepotrViewer 运行它时却不行。服务器上还有其他运行良好的报告（使用不同的数据源）。

更新：为了进一步混淆问题 - 如果我在 ReportManager 中取消选中“启用此数据源”，当我尝试在 ReportViewer 控件中运行报告时，将返回以下内容：

> 异常详细信息：Microsoft.Reporting.WebForms.ReportServerException：报表服务器无法处理报表。与报告关联的数据源已被禁用。(rsDataSourceDisabled)

如果我重新勾选“启用此数据源”选项，它将恢复为原始异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:47:35.407

我终于找到了原因/解决方案！

我在文本编辑器中打开了 .rdl 文件，发现数据集仍然指向之前的数据源。

```
<Query>
    <DataSourceName>[old datasource name]</DataSourceName> 
```

我用新数据源替换了对先前数据源的所有引用，它现在运行成功。

# javascript - Jquery datepicker 按钮 tabindex

> ID：10009550
> 
> 赞同：7
> 
> 时间：2012-04-04T10:45:23.413
> 
> 标签：javascript, jquery, jquery-ui, jqgrid

我正在使用 Jquery 日期/日期时间选择器插件以及 JQgrid。我希望日期/日期时间选择器的 onShow 是“按钮”，但是当通过模式切换时，日期/日期时间按钮不能获得焦点。

我写了一个函数来为我创建日期选择器。

```
function CreateDatePicker(elem, ShowOn) {
    setTimeout(function () {
        $(elem).datepicker({
            dateFormat: 'yy/mm/dd',
            autoSize: false,
            showOn: ShowOn,
            changeYear: true,
            changeMonth: true,
            showButtonPanel: true,
            showWeek: true,
            onClose: function (dateText, inst) {
                $(this).focus();
            }
        });
    }, 100);

    $(elem).mask("9999/99/99", { placeholder: "_" });
} 
```

**我这样称呼它。**

```
initDateEdit = function (elem) {
        CreateDatePicker(elem, 'button');
}; 
```

**JQgrid代码**

```
{ name: 'Date', index: 'Date', editable: true, formoptions: { rowpos: 1, colpos: 2 }, formatter: 'date', formatoptions: { newformat: 'Y/m/d' }, datefmt: 'Y/m/d', editoptions: { dataInit: initDateEdit }, searchoptions: { dataInit: initDateSearch } }, 
```

我看到日期选择器呈现这样

```
<input type="text" id="Date" name="Date" role="textbox" class="FormElement ui-widget-content ui-corner-all hasDatepicker">
<button type="button" class="ui-datepicker-trigger">...</button> 
```

所以我最初的想法是锁定按钮类并使用 Jquery 跳转到页面上的下一个（输入）元素，不管它是什么。

我已经尝试了几件事，都产生了不正确/根本没有结果......

**我最后一次失败的尝试...**

```
 $(document).delegate('.ui-datepicker-trigger', 'focus', function (event) {
        $(this).next().focus();
    }); 
```

任何帮助将不胜感激..很多:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:20:32.310

解决问题的最直接方法似乎是我将[tabindex](http://www.w3schools.com/tags/att_global_tabindex.asp)设置为“-1”：

```
setTimeout(function () {
    $(elem).datepicker({
        showOn: 'button',
        ...
    }).next('button.ui-datepicker-trigger')
      .attr("tabIndex", "-1"); 
```

尝试[在演示](http://www.ok-soft-gmbh.com/jqGrid/DatepickerWithShowOnButton1_small3.htm)`Tab`的搜索工具栏中使用，并将结果与​​为[答案](https://stackoverflow.com/a/9620311/315935)创建的[另一个演示](http://www.ok-soft-gmbh.com/jqGrid/DatepickerWithShowOnButton1_small2_.htm)进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:48:13.513

所以我最初的想法是锁定按钮类并使用 jQuery 跳转到页面上的下一个输入元素，不管它是什么。

# sql - 为什么将 LIKE 与 TIMESTAMPS 一起使用在 DB2 中不起作用

> ID：10009553
> 
> 赞同：5
> 
> 时间：2012-04-04T10:45:39.860
> 
> 标签：sql, database, select, db2

我在使用`LIKE`结构时遇到问题`DB2`：例如：

```
select * from TEST where TIME LIKE '2012-03-04-%' 
```

供参考。-`TIME`是`TIMESTAMP`数据类型。

为什么使用`LIKE`with`TIMESTAMPS`不起作用？

附加信息：我想从用户在 select 语句中提供的一天中提取数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T10:59:48.200

只是扩展@mortb的答案，我要么使用`BETWEEN`要么

```
WHERE time >= '2012-03-04' AND time < '2012-03-05' 
```

`BETWEEN`使用或比较的优势使用`casts`and`LIKE`将意味着如果上面有索引，`time`则由于强制转换而无法使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T10:50:16.770

LIKE 用于字符串 (char, varchar) 数据类型。采用`WHERE time BETWEEN '2012-03-04' AND '2012-03-04 23:59:59.998'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-18T05:05:38.717

你可以这样使用

```
where time between
    to_date('2016-06-17 00:00:00', 'yyyy-mm-dd HH24:MI:SS') and
    to_date('2016-06-18 00:00:00', 'yyyy-mm-dd HH24:MI:SS' 
```

# .net - .NET Framework 的本地化 XML 文档文件

> ID：10009556
> 
> 赞同：3
> 
> 时间：2012-04-04T10:45:55.743
> 
> 标签：.net, .net-4.0, localization, xml-documentation

如果您安装 Visual Studio 的本地化版本，您将在 Reference Assemblies 文件夹中获得本地化的 XML 文档文件，例如

```
C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\de 
```

但只有在安装 Visual Studio 的本地化版本时才会安装这些文件。我想知道是否有办法在不（重新）安装 Visual Studio 的情况下获取这些本地化文件？然而， VS 的[语言包](http://www.microsoft.com/download/en/details.aspx?id=21615)也安装了本地化的 XML 文档文件，但我还没有找到内置于本地化 VS 版本中的主要语言的语言包。并且 Windows SDK 仅以英文安装。

所以这是我的问题：有没有办法为 .NET Framework 获取（或重新分发）本地化的 XML 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T06:41:24.063

我的经验只是部分回答：在帮助系统中，Win32（Windows SDK）仅提供英文版本，而大多数其他 (.NET) 内容以英文和我的本地语言提供。我猜你不会得到任何本地化的 Windows SDK 文档，因为它不存在。

虽然不知道你的其他问题。也许您可以从另一个本地化 Visual Studio 版本的安装中复制它们？我想如果微软不在某个地方提供它们，其他任何人都不会被允许重新分发它们。

# java - 如何在android的循环外打印所有值

> ID：10009557
> 
> 赞同：0
> 
> 时间：2012-04-04T10:45:56.290
> 
> 标签：java, android

我可以从数据库中获取菜单代码，我可以在 for 循环中打印意味着它会打印所有菜单代码。如果我打印循环侧意味着它只打印最后一个值

```
 my code
     JSONArray json = jArray.getJSONArray("mainmenu");

         for ( i = 0; i < json.length(); i++) {

                JSONObject e = json.getJSONObject(i);
            map.put("itemcode", e.getString("menucode"));   //here i print all values  

         }
      list.setOnItemClickListener(new OnItemClickListener() {   

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            System.out.println(map.get("itemcode"));//here i print only last value(here i want print all values how can i do this)
            // TODO Auto-generated method stub
            Intent intent=new Intent(getApplicationContext(),FoodMenu.class);
            startActivity(intent);
        }
    }); 
```

在循环之外我也想打印所有菜单代码..请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:50:46.523

您正在使用地图，并且始终拥有相同的键（`"itemcode"`），因此每次插入都会覆盖先前对地图的插入，也许您应该只使用 a `List`，或者使用不同的键。

通过举例回答评论：

1.  使用`ArrayList`/ `List`：

    ```
    List<String> codez = new ArrayList<String>();
    for ( i = 0; i < json.length(); i++) {
        JSONObject e = json.getJSONObject(i);
        codez.add(e.getString("menucode"));
    } 
    ```

2.  使用不同的键：

    ```
    for ( i = 0; i < json.length(); i++) {
        JSONObject e = json.getJSONObject(i);
        map.put("itemcode" + i, e.getString("menucode"));
    } 
    ```

最后一件事 - 你不能在一个地图中有两个相同的键，它违背了它的目的，它是无用的。如果您不打算通过键获取值，并且如果未使用键，则首先不应使用映射。

# android - 从json解析纬度和经度后如何在谷歌地图中放置标记？

> ID：10009558
> 
> 赞同：1
> 
> 时间：2012-04-04T10:45:58.800
> 
> 标签：android, parsing, google-maps, latitude-longitude

我有解析 json 文件，其中包含一百多个位置名称，有纬度和经度。
到目前为止，我能够获得位置名称、纬度和经度。

我想在谷歌地图中绘制这些所有值并为每个值放置一个标记。

我还想显示当用户触摸放置在谷歌地图中的标记时我从解析 JSON 中获得的位置名称。

我解决了伙计们。见下文：

**更新：** **main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

 <com.google.android.maps.MapView 
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="0hlQp-ys3VmVGNLoJ0aGYQhDmBH5KC-ZQmc3yNA"
    />

<LinearLayout
    android:id="@+id/zoom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" />

 </RelativeLayout> 
```

**ShowMapActivity.java**

```
public class ShowMapActivity extends MapActivity {

private static String url = "http://10.0.2.2/test/myfile.php";
JSONArray root = null;
private static final String TAG_ROOT = "root";
private static final String TAG_LATTITUDE = "lattitude";
private static final String TAG_LONGITUDE = "longitude";
private static final String TAG_NAME="name";

MapController mc;
GeoPoint p;

double lattitudeValue;
double longitudeValue;
String lattitude;
String longitude;
String name;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // showing MapView
    MapView mapView = (MapView) findViewById(R.id.mapView);
    LinearLayout zoomLayout = (LinearLayout) findViewById(R.id.zoom);
    View zoomView = mapView.getZoomControls();
    zoomLayout.addView(zoomView, new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    mapView.displayZoomControls(true);
    mc = mapView.getController();
    String coordinates[] = { "53.5146152", "-2.2857034" };
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);
    p = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
    mc.animateTo(p);
    mc.setZoom(10);
    mapView.invalidate();

    // Parsing JSON value and Read location name, lattitude, longitude from JSON

    JSONParser jParser = new JSONParser();

    JSONObject json = jParser.getJSONFromUrl(url);
    System.out.println("Testingggg..." + json.length());

    try {

        root = json.getJSONArray(TAG_ROOT);
        for (int i = 0; i < root.length(); i++) {
            JSONObject c = root.getJSONObject(i);
            name=c.getString(TAG_NAME);   //Getting location name
            lattitude = c.getString(TAG_LATTITUDE); //Getting lattitude value in string
            longitude = c.getString(TAG_LONGITUDE); //Getting longitude value in string
            lattitudeValue = Double.parseDouble(lattitude); //converting string lattitude value to double
            longitudeValue=Double.parseDouble(longitude); //converting string longitude value to double

                List<Overlay> mapOverlays = mapView.getOverlays();
            Drawable drawable = this.getResources().getDrawable(
                    R.drawable.locationmarker);
            HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(
                    drawable, this);
            GeoPoint point = new GeoPoint((int) (lattitudeValue * 1E6),
                    (int) (longitudeValue * 1E6));
            OverlayItem overlayitem = new OverlayItem(point, name, "I'm in"
                    + name);

            itemizedoverlay.addOverlay(overlayitem);
            mapOverlays.add(itemizedoverlay);

        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

**CustomItemizedOverlay.java**

```
public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

private final ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

private Context context;

public CustomItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
}

public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
    this(defaultMarker);
    this.context = context;
}

@Override
protected OverlayItem createItem(int i) {
    return mapOverlays.get(i);
}

@Override
public int size() {
    return mapOverlays.size();
}

public void addOverlay(OverlayItem overlay) {
    mapOverlays.add(overlay);
    this.populate();
} 
```

}

**HelloItemizedOverlay.java**

```
public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem> {
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
private Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    mContext = context;
}

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.show();
    return true;
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:52:48.400

```
Drawable srcdrawable = getApplicationContext().getResources().getDrawable(R.drawable.pin_blue);
CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable, getApplicationContext());
forloop(setoflocations){
GeoPoint srcpoint = new GeoPoint((int)( Double.parseDouble(lat) * 1E6),(int)( Double.parseDouble(lng)* 1E6));
OverlayItem srcoverlayitem = new OverlayItem(srcpoint, "Hello!", "This is your Location.");
if(srcitemizedOverlay!=null && mapController!=null){
srcitemizedOverlay.addOverlay(overlayitem);
mapController.animateTo(point);
animatePoint = point;
}
}
mapView.getOverlays().clear();
mapView.getOverlays().add(srcitemizedOverlay); 
```

在您获得一组位置后，在 oncreate() 中使用上面的代码，下面是下面的 CustomItemizedOverlay.java 类

```
public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private final ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

    private Context context;

    public CustomItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        return mapOverlays.size();
    }

    public void addOverlay(OverlayItem overlay) {
        mapOverlays.add(overlay);
        this.populate();
    }

} 
```

请参阅此[链接](https://stackoverflow.com/questions/9990209/cant-mark-while-showing-the-current-location-in-mapview/9990668#9990668)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:53:28.927

进行叠加以显示标记..

看看这个[链接](http://codemagician.wordpress.com/2010/05/06/android-google-mapview-tutorial-done-right/)

希望对你有帮助。。

# python - Python函数不会启动

> ID：10009560
> 
> 赞同：0
> 
> 时间：2012-04-04T10:46:01.633
> 
> 标签：python, function, python-3.x

我正在写一个python计算器，代码如下：

```
#Python Calculator

import sys;
import cmath;

def plus():
    num1 = float(input("Input the first number: "));
    num2 = float(input("Input the second number: "));
    ans = (num1 + num2);
    print(ans);
    exit();
    return;

def minus():
    num1 = float(input("Input the first number: "));
    num2 = float(input("Input the second number: "));
    ans = (num1 - num2);
    print(ans);
    exit();
    return;

def divide():
    num1 = float(input("Input the first number: "));
    num2 = float(input("Input the second number: "));
    ans = (num1 / num2);
    print(ans);
    exit();
    return;

def multiply():
    num1 = float(input("Input the first number: "));
    num2 = float(input("Input the second number: "));
    ans = (num1 * num2);
    print(ans);
    exit();
    return;

def power():
    num1 = float(input("Input the number: "));
    num2 = float(input("Input the power: "));
    ans = cmath.pow(num1, num2);
    print(ans);
    exit();
    return;

def square():
    num1 = float(input("Input the number: "));
    ans = cmath.sqrt(num1);
    print(ans);
    exit();
    return;

def inputs():
    print("Select which function you would like to use:");
    print("1 for Plus");
    print("2 for Minus");
    print("3 for Divide");
    print("4 for Multiply");
    print("5 for Power");
    print("6 for Square Root");
    func = input();

    if func == 1:
        plus();
    elif func == 2:
        minus();
    elif func == 3:
        divide();
    elif func == 4:
        multiply();
    elif func == 5:
        power();
    elif func == 6:
        square();
    return;

def exit():
    exit = str(input("Run again? y/n: "));
    if exit == "Y" or exit == "y":
        inputs();
        print ("");
    elif exit == "N" or exit == "n":
        sys.exit();
    else:
        exit();
    return;

print ("Python Calculator");
print("");
inputs(); 
```

现在的问题是，一旦输入了要运行的功能，程序就会关闭。我对 python 比较陌生，但对编程不熟悉。这也是编码方式有什么问题（即草率编码），请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:48:02.747

Your input is probably String (e.g. `"6"`) instead of the number `6`.

In general, I think that your code is unnecessary long, and breaks the [Don't Repeat Yourself](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself) principle. For starters, you can ask for the two numbers in a single place, and then call the relevant function to perform the relevant operation.

A more concise design would use Python operators:

```
funcs=[operator.add, operator.sub, operator.div, 
       operator.mul, operator.pow, your_square_function] 
```

You can ask for the function type, then call the relevant function (see Lev's answer).

There interesting case is `sqr`, which takes a single argument, instead if two. This can be solved by specifying the number of arguments each function takes:

```
funcs=[(operator.add, 1), (operator.sub, 2), (operator.div, 2),
       (operator.mul, 2), (operator.pow, 2), (your_square_function, 1)] 
```

The solution is now simple - ask for the function number, ask for the right number of arguments, and call `funcs[input_number][0]`.

This idea can be elaborated, so that the function name is also stored:

```
funcs=[("Plus", operator.add, 1),   ("Minus", operator.sub, 2), 
       ("Divide", operator.div, 2), ("Multiply", operator.mul, 2), 
       ("Power", operator.pow, 2),  ("Square root", your_square_function, 1)] 
```

Now you program should look like (pseudocode):

```
 for f in funcs:
      print id, function_name
 ask for id
 ask for relevant number of arguments
 run funcs[id] with relevant number of arguments 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:53:59.293

正如亚当指出的那样，问题在于您没有转换`func`为`int`. 由于您还询问有关代码组织的建议，我可以建议以下内容来摆脱堆叠的`elif`条款：

```
functions = [plus, minus, divide, multiply, power, square]
try:
    func = int(input())
    functions[func-1]()
except:
    print("Please choose an existing function number.")
    exit() 
```

# zend-framework - Zend Paginator 限制行数（优化）

> ID：10009561
> 
> 赞同：0
> 
> 时间：2012-04-04T10:46:06.290
> 
> 标签：zend-framework, zend-db, zend-db-table, zend-paginator

这是我的查询：

```
class services extends Zend_Db_Table{

 function Get_Services($user_id){
    $DB = Zend_Db_Table_Abstract::getDefaultAdapter();

    $select = $DB->select()
                ->from(array('p' => 'phone_service'))
                ->join(array('u' => 'user_preferences'), 'u.phone_service_id = p.phone_service_id')
                ->where('u.user_preferences_name = ?', 'is_user_package_active')
                ->where('p.user_id = ?', $user_id);
           return $select;
    }
  } 
```

这是我的控制器：

```
class ServicesController extends Zend_Controller_Action{
       $instance = new services();
       $select = $instance->Get_Services($user_id);

       $adapter   = new Zend_Paginator_Adapter_DbSelect($select);
       $paginator = new Zend_Paginator($adapter);

       $page=$this->_getParam('page',1);
       $paginator->setItemCountPerPage(10);
       $paginator->setCurrentPageNumber($page);
       $paginator->setPagerange(5);
 } 
```

我正在做的是首先查询所有行，然后执行以下操作：

```
 $adapter   = new Zend_Paginator_Adapter_DbSelect($select);
 $paginator = new Zend_Paginator($adapter); 
```

我的问题是，我怎样才能优化它，使它只从结果中查询 10 行而不是全部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:52:38.547

使用`DbSelect`适配器它只*查询*10 行。分析您的查询并检查 - 您应该看到 2 个选择 AFAIR - 一个由 ZF 操作以获取总行数，另一个用于使用`LIMIT`and获取实际数据`OFFSET`。

# python - 在 Python 中访问未绑定到变量的对象

> ID：10009570
> 
> 赞同：2
> 
> 时间：2012-04-04T10:46:50.560
> 
> 标签：python, object, python-multithreading

一段时间以来，我一直在学习使用 Python 进行编程，而我目前的项目是一个下载管理器，它的 GUI 是用 wxPython 编写的。我有 DownloadThreads，继承自 threading.Thread，我实例化了不同数量的：

```
for i in xrange(self.thread_count):
    DownloadThread(self.queue, self.status, self.save_dir, i).start() 
```

因为我要创建的线程数量不固定，所以我无法将`DownloadThread`对象分配给变量，所以我看不到如何访问它们的方法，例如`x.isAlive()`. 我考虑过动态创建变量，但这似乎是一个非常糟糕的主意。我将如何访问这些“匿名”对象（术语？），或者我是不是走错了路？感谢您的阅读，如果这真的很简单/显而易见，我们深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:49:28.223

最简单的方法是将所有线程保存在一个列表中：

```
self.threads = []
for i in xrange(self.thread_count):
    self.threads.append(DownloadThread(self.queue, self.status, self.save_dir, i))
    self.threads[i].start() 
```

# c#-4.0 - 将反应式框架“主题”添加到界面

> ID：10009571
> 
> 赞同：0
> 
> 时间：2012-04-04T10:46:50.563
> 
> 标签：c#-4.0, system.reactive

我在我的类中使用了事件，并向我的类派生的接口添加了一个事件引用。我决定使用 Reactive 框架，现在使用“主题”类型，如下所示。我想将此添加到界面中，因为我的所有函数都在界面中传递，但我收到错误消息，说我无法将字段添加到界面中。有没有办法在我的界面中公开这行新代码，还是在订阅时我必须转换为具体类型？

```
public Subject<PanelEventArguments> PanelEvt = new Subject<PanelEventArguments>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:28:10.917

也许我遗漏了一些东西，但你不能将它添加为属性吗？

# php - jQuery; 点击显示html内容和倒计时，然后是附加内容

> ID：10009575
> 
> 赞同：3
> 
> 时间：2012-04-04T10:47:10.313
> 
> 标签：php, javascript, jquery, html

我想在我的论坛上显示直接链接之前创建一个显示内容的链接。

1.  显示下载附件的链接
2.  点击后显示html内容，下方有5秒倒计时
3.  倒计时结束后，会显示直接链接。

我尝试了以下代码：

```
$("button").click(function() { 
  $(function() {
    var count = 10; 
    countdown = setInterval(function() { 
      $("p.countdown").html(count + " seconds remaining!").show("slow"); 

      if (count == 0) { 
        $("p.new").show("slow");
      } 

      count--; 
    }, 1000);
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:16:58.207

魔法功能呢？

要谈论@Bradley Foster 的回答，多次调用`setTimeout`是不可靠的。`setTimeout`如果您的浏览器滞后，它将停止，因此有四种不同的顺序，您不确定顺序是否正确。`setTimeout`正如我展示的那样嵌套更好。

```
$('#button').click(function() {
    var seconds = 5, // Declare some variables for reuse
        el = $('#some_link')
    el.text(seconds) // Put it a five!
    // Name your function so that you can call it later
    setTimeout(function countdown() {
        // Your countdown is already at 5, so decrement it
        // Remember that you've already waited for 1000ms before reaching this line the first time
        seconds--
        el.text(seconds) // Set the new time left
        // If the countdown is not over, recall this function after 1000ms
        if (seconds > 0) {
            setTimeout(countdown, 1000)
        }
        // If it is over, display the link
        // Note that js will stop there and not try to call itself another time as it would with setInterval()
        else {
            el.html('<a href="link">Download</a>')
        }
    }, 1000)
}) 
```

顺便说一句，在你的问题中，当你在做的时候`$(function() {...`，你实际上在做`$(document).ready(function() {...`。我想这不是你想要的:)

Jsfiddle在这里：http: [//jsfiddle.net/Ralt/kTbcm/](http://jsfiddle.net/Ralt/kTbcm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:33:02.097

***[你可以这样做：](http://jsfiddle.net/DotNetScott/R5SQg/)***

**HTML：**

```
<button>Download</button>

<p class="countdown" />
<p class="link">
    <a href="www.stackoverflow.com">StackOverflow</a>
</p>​ 
```

**CSS：**

```
p { display: none; padding: 50px; border: solid 1px black; }
p.countdown { color: red; font-size: 24px; }​ 
```

**jQuery：**

```
var $countdown = $("p.countdown"),
    $link = $("p.link"),
    $button = $("button");

$button.click(function() { 

    $countdown.hide(0);
    $link.hide(0);        

    var count = 10,
        countdown = setInterval(function() { 

           $countdown.html(count + " seconds remaining!").show("slow"); 

           if (count == 0) { 

               $countdown.hide(0);
               $link.show("slow");
               clearInterval(countdown);

           } 

           count--; 

       }, 1000);

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:59:33.860

查看 jQuery 的[show](http://api.jquery.com/show/)和[hide](http://api.jquery.com/hide/)以及 JavaScript 的原生[setTimeout](http://www.w3schools.com/js/js_timing.asp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T10:59:35.610

```
function countdownfunction() {
    $('#some_link').innerHTML = "5";
    $('#some_link').innerHTML = setTimeout("4",1000);
    $('#some_link').innerHTML = setTimeout("3",1000);
    $('#some_link').innerHTML = setTimeout("2",1000);
    $('#some_link').innerHTML = setTimeout("1",1000);

    $('#some_link').innerHTML = '<a href="newlink.php">download now</a>;
};

$('#some_link').click( countdownfunction() ); 
```

# sql - SQL Server 选择加入？

> ID：10009576
> 
> 赞同：1
> 
> 时间：2012-04-04T10:47:11.730
> 
> 标签：sql, sql-server, database, select

我有以下选择结果：

```
Select t1.ID, t1.Value1 
from t1 
where t1.ID=1 
```

结果：

```
 ID  Value1
    1   val1
    1   val2
    1   val3
    1   val4 
```

和

```
Select t2.ID, t2.Value2 
from t2 where t2.ID = 1 
```

结果 2：

```
 ID  Value2
    1   val5
    1   val6
    1   val7
    1   val8 
```

我想获得像：

```
ID  Value1  Value2
1   val1    val5
1   val2    val6
1   val3    val7
1   val4    val8 
```

我怎样才能得到这个结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:18:03.450

我不得不根据你的结果对你想要什么做一些假设，但我认为以下方法会起作用：

```
;WITH CTE1 AS
(   SELECT  ID, Value1, ROW_NUMBER() OVER(ORDER BY Value1) [RowNumber]
    FROM    t1
), CTE2 AS
(   SELECT  ID, Value2, ROW_NUMBER() OVER(ORDER BY Value2) [RowNumber]
    FROM    t2
)
SELECT  COALESCE(CTE1.ID, CTE2.ID) [ID],
        Value1,
        Value2
FROM    CTE1
        FULL JOIN CTE2
            ON CTE1.ID = CTE2.ID
            AND CTE1.RowNumber = CTE2.RowNumber 
```

`FULL JOIN`可以替换为`LEFT JOIN`或`INNER JOIN`根据您的具体要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:01:40.097

```
SELECT t1.ID, t1.Value1, t2.Value2 FROM t1
INNER JOIN t2 ON t2.ID = t1.ID
WHERE t1.ID=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T07:02:16.980

希望外部加入之一可以帮助您解决问题

SELECT t1.ID, t1.Value1, t2.Value2 FROM t1 Right outer Join t2 ON t2.ID = t1.ID WHERE t1.ID=1

# android - Encode raw PCM to aac using ffmpeg native AAC

> ID：10009580
> 
> 赞同：1
> 
> 时间：2012-04-04T10:47:42.827
> 
> 标签：android, ffmpeg, aac

I am trying to convert raw PCM to aac .So i am trying to achieve it through ffmpeg.

My ffmepg configuration

--enable-cross-compile --arch=arm --cpu=armv6 --enable-asm --target-os=linux --disable-stripping --enable-neon --enable-version3 --disable-shared --enable-static --enable-gpl --enable-memalign-hack --cc=arm-linux-androideabi-gcc --ld=arm-linux-androideabi-ld --extra-cflags='-fPIC -DANDROID -D_*thumb*_ -mthumb -Wfatal-errors -Wno-deprecated -marm -march=armv6 ' --disable-everything --enable-encoder=aac --enable-decoder=h264 --enable-hwaccels --disable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --disable-network --enable-filter=buffer --enable-filter=buffersink --disable-demuxer=v4l --disable-demuxer=v4l2 --disable-indev=v4l --disable-indev=v4l2

```
avcodec_find_encoder(CODEC_ID_AAC)  find's the AAC encoder succesfully.

audio_context= avcodec_alloc_context()
avcodec_open(audio_context, audio_encoder)  failed to open aac 
```

any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:32:39.180

尝试使用 libfaac，而不是使用 ffmpeg 内置 aac 编码器。

首先为android交叉编译libfaac。

在 ffmpeg **--extra-cflags**中提供编译的 libfaac**包含**目录的路径。

在**--extra-ldflags 中**提供编译后的 libfaac 的**lib**目录的路径。

在 ffmpeg 中`config.sh`使用**--enable-libfaac**

使用 libfaac 再次编译 ffmpeg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:40:10.277

我认为答案将在 logcat 的 ffmpeg 部分。您应该在 ffmpeg 库中打开调试级别日志记录并捕获日志以找出 codec_open 语句失败的位置。

在此处提供日志。

# message-queue - Is it possible to send messages to multiple queues using STOMP?

> ID：10009581
> 
> 赞同：1
> 
> 时间：2012-04-04T10:47:51.173
> 
> 标签：message-queue, activemq, hornetq, stomp

I'm looking for a RabbitMQ replacement in a PHP project. Two options I am considering so far are Kestrel and Qpid (if we decide to stick with AMQP (which I would like to avoid)). In RabbitMQ, you can send a message to an exchange (destination), which decides which queues or topics (in JMS terms) the message should be delivered to. What stops me from choosing a STOMP server (ActiveMQ/Apollo or HornetQ) is that I can't find out whether it is possible in STOMP to SEND a message to a destination so that the message is delivered to a number of queues (in JMS terms)? The sender is not supposed to know which queues the message should be delivered to.

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:53:50.913

您可以在 ActiveMQ 中使用名为[Composite Destinations](http://activemq.apache.org/composite-destinations.html)的东西来使用 Stomp 或标准 JMS 客户端来执行此操作。Stomp 目的地以 /queue/ 字符串为前缀，然后是目的地的名称。您还可以在 ActiveMQ中使用[虚拟目标。](http://activemq.apache.org/virtual-destinations.html)当然，ActiveMQ 中的 Destination 字符串可以支持[通配符](http://activemq.apache.org/wildcards.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:37:54.820

在 HornetQ 中，您可以使用[Diverts](http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html_single/index.html#diverts)（独占和非独占）。STOMP 消息将到达原始队列，但随后将透明地转移到 hornetq-configuration.xml 中配置的适当队列。

您还可以应用带有转移的过滤器，以便将消息隔离到适当的队列中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-08T21:58:39.040

我自己也面临同样的问题，并通过 ActiveMQ XML 中的以下配置解决了。

```
<destinationInterceptors>
 <virtualDestinationInterceptor> 
  <virtualDestinations> 
   <compositeQueue name="MY.QUEUE">
    <forwardTo>
     <queue physicalName="FOO" /> 
     <queue physicalName="BAR" />
    </forwardTo>
   </compositeQueue>
  </virtualDestinations>
 </virtualDestinationInterceptor>
</destinationInterceptors> 
```

参考[http://activemq.apache.org/virtual-destinations.html](http://activemq.apache.org/virtual-destinations.html)

# outlook - Outlook Add-in Error when sending attachments "System.IO.DirectoryNotFoundException"

> ID：10009584
> 
> 赞同：1
> 
> 时间：2012-04-04T10:48:01.797
> 
> 标签：outlook, outlook-addin, email-attachments, outlook-2010

I have a MS Outlook 2010 plugin that forwards emails to a pre-set email address on click.

However, when the forwarded email message contains an existing attachment, the below appears when the button is clicked

![](../Images/92b058e011e9544bcb78e2431a89fd27.png).

I have checked on another machine with a new Outlook and plugin installation and the same problem persists. Running on 32 bit Windows Vista, other machine on 32bit XP.

I have attempted to change trust settings to automatically download attachments, but no luck with that. Turned off attachment preview, enabled automatic downloads, and enabled all macros inc. to installed add-ins.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:31:44.553

在您的“Forwarder.Ribbon2.ForwardTo”方法中，确保您用作附件“SaveAsFile”方法的参数的路径位于已经存在的目录中。

信任设置几乎肯定与此问题无关。

祝你好运，

ps 对于您的下一个问题，发布代码通常是一种很好的形式，而不是链接到堆栈跟踪的屏幕截图......

# c# - Alternating replace of substrings

> ID：10009585
> 
> 赞同：5
> 
> 时间：2012-04-04T10:48:02.090
> 
> 标签：c#, string, substring, markdown

I was wondering if there is any way that I can replace substrings within a string but alternate between the string to replace them with. I.E, match all occurences of the string `"**"` and replace the first occurence with `"<strong>"` and the next occurence with `"</strong>"` (And then repeat that pattern).

The input would be something like this: `"This is a sentence with **multiple** strong tags which will be **strong** upon output"`

And the output returned would be: `"This is a sentence with <strong>multiple</strong> strong tags which will be <strong>strong</strong> upon output"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T10:52:00.147

您可以使用`Regex.Replace`接受`MatchEvaluator`委托的重载：

```
using System.Text.RegularExpressions;

class Program {
    static void Main(string[] args) {
        string toReplace = "This is a sentence with **multiple** strong tags which will be **strong** upon output";
        int index = 0;
        string replaced = Regex.Replace(toReplace, @"\*\*", (m) => {
            index++;
            if (index % 2 == 1) {
                return "<strong>";
            } else {
                return "</strong>";
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:52:08.587

最简单的方法是实际正则表达式，`**(content)**`而不仅仅是`**`. 然后你用它替换它`<strong>(content)</strong>`，你就完成了。

您可能还想在[https://code.google.com/p/markdownsharp](https://code.google.com/p/markdownsharp)查看 MarkdownSharp ，因为这确实是您似乎想要使用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:54:29.860

您可以使用正则表达式来解决此问题：

```
string sentence = "This is a sentence with **multiple** strong tags which will be **strong** upon output";

var expression = new Regex(@"(\*\*([a-z]+)\*\*)");

string result = expression.Replace(sentence, (m) => string.Concat("<strong>", m.Groups[2].Value, "</strong>")); 
```

这种方法将自动处理语法错误（想想类似的字符串`This **word should be **strong**`）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T10:53:11.750

试试看

```
var sourceString = "This is a sentence with **multiple** strong tags which will be **strong** upon output";
var resultString = sourceString.Replace(" **","<strong>");
resultString = sourceString.Replace("** ","</strong>"); 
```

干杯，

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-04T10:54:15.493

我认为您应该使用正则表达式来匹配模式并替换它，这很容易。

# c++ - c++ static method with struct parametrs

> ID：10009588
> 
> 赞同：3
> 
> 时间：2012-04-04T10:48:04.347
> 
> 标签：c++, visual-studio-2010, struct, compiler-errors, static-methods

i have this problem...

i have a my struct:

```
typedef struct Mystruct{
  float a;
  float b;
} 
```

and a static method:

```
float static MyStaticMethod(MyStruct a, MyStruct b); 
```

when i call this method:

```
Mystruct s;
s.a = 1;
s.b = 2;

Mystruct t;
t.a = 1;
t.b = 2;

MyClass.MyStaticMethod(s,t); 
```

i have this error at compile time:

```
Error   51  error C2228: left of '.MyStaticMethod' must have class/struct/union

Error   50  error C2275: 'MyClass' : illegal use of this type as an expression 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T10:48:45.697

You need to call it using a scope resolution operator:

```
MyClass::MyStaticMethod(s,t);
       ^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:04:56.483

除了使用“MyClass::MyStaticMethod(s,t);”之外，您还可以在实例上调用静态方法：

```
MyClass instance;
instance.MyStaticMethod(s,t); 
```

它应该是：

```
typedef struct {
  float a;
  float b;
} Mystruct; 
```

（新的类型名最后出现）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T12:00:17.230

该关键字在 C++ 语言中`static`被*重载*（即它具有多种含义）。在您提供的代码中：

```
struct MyStruct {
};
static float MyStaticFunction( MyStruct, MyStruct ); 
```

的含义`static`是*内部链接*（即符号将无法在当前翻译单元之外使用。如果它存在于标题中，那么每个包含翻译单元将获得它自己的函数副本。在这种情况下，用法是自由功能：

```
MyStruct a,b;
float f = MyStaticFunction( a, b ); 
```

从尝试使用它看来，您的意思是`static`在这种替代方案中使用：

```
struct MyStruct {
   static float MyStaticFunction( MyStruct, MyStruct );
}; 
```

它有不同的含义：*成员属于类，而不是特定实例*。在这种情况下，可以通过以下两种方式之一调用该函数，最常见的一种是：

```
MyStruct a,b;
float f = MyStruct::MyStaticFunction( a, b ); 
```

即使该语言也允许（我不建议使用它，它可能会造成混淆）：

```
float f a.MyStaticFunction(a,b); 
```

出现混淆的地方是因为它看起来像在 上调用*成员*函数`a`，而不是在类上调用*静态成员*函数。

# ruby-on-rails-3 - OmniAuth + Facebook：无法将字符串转换为整数

> ID：10009594
> 
> 赞同：1
> 
> 时间：2012-04-04T10:48:14.013
> 
> 标签：ruby-on-rails-3

我正在我的网站上集成 OmniAuth Facebook。我让它工作了，但后来我想添加更多的用户模型。这是我的 user.rb

```
class User < ActiveRecord::Base
    def self.create_with_omniauth(auth)
        create! do |user|
            user.provider = auth["provider"]
            user.uid = auth["uid"]
            user.email = auth["info"]["email"]
            user.name = auth["info"]["name"]
            user.first_name = auth["info"]["first_name"]
            user.last_name = auth["info"]["last_name"]
            user.birthday = auth["extra"]["raw_info"]["birthday"]
            user.location = auth["info"]["location"]
            user.hometown = auth["extra"]["raw_info"]["hometown"]["name"]
            user.employer = auth["extra"]["raw_info"]["work"]["employer"]["name"]
            user.position = auth["extra"]["raw_info"]["work"]["position"]["name"]
            user.gender = auth["extra"]["raw_info"]["gender"]
            user.school = auth["extra"]["raw_info"]["education"]["school"]
            user.token = auth["credentials"]["token"]
        end
    end
end 
```

当我使用 Facebook 进行身份验证时，我知道收到以下错误：

```
TypeError (can't convert String into Integer):
  app/models/user.rb:13:in `[]'
  app/models/user.rb:13:in `block in create_with_omniauth'
  app/models/user.rb:3:in `create_with_omniauth'
  app/controllers/sessions_controller.rb:4:in `create' 
```

我发布了 user.rb

session_controller.rb 中的第 4 行是

用户 = User.find_by_provider_and_uid(auth["provider"], auth["uid"]) || User.create_with_omniauth(auth)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:12:43.570

看起来 auth["extra"]["raw_info"]["work"] 实际上是一个数组。

如果你改变：

```
user.employer = auth["extra"]["raw_info"]["work"]["employer"]["name"]
user.position = auth["extra"]["raw_info"]["work"]["position"]["name"] 
```

到：

```
if auth["extra"]["raw_info"]["work"]
  user.employer = auth["extra"]["raw_info"]["work"][0]["employer"]["name"]
  user.position = auth["extra"]["raw_info"]["work"][0]["position"]["name"]
end 
```

那应该是DWYM。

# cordova - 没有互联网连接时的警报框 - Phonegap

> ID：10009596
> 
> 赞同：11
> 
> 时间：2012-04-04T10:48:19.097
> 
> 标签：cordova, connection, alert

我正在尝试在设备上没有互联网连接时弹出一个弹出窗口。

我得到[了以下示例](http://docs.phonegap.com/en/1.0.0/phonegap_connection_connection.md.html)，但现在我希望警报仅在结果为“无网络连接”时显示。

我试过这个：

```
if (states[Connection.NONE]){
       alert('Geen internet :(');
       }; 
```

但这只会弹出警报框，无论是否有连接。谁能帮我？:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-11T14:25:30.740

老问题，但这是我的做法 - 您可以使用事件来检测设备是在线还是离线。这非常适合这种情况，因为一旦设备离线，就会出现弹出窗口：

`document.addEventListener("offline", function(){ alert("You're offline") }, false);`

并且做同样的事情，但是当设备重新连接互联网时？：

`document.addEventListener("online", function(){ alert("You're online") }, false);`

在此处查看事件文档：http: [//docs.phonegap.com/en/1.8.1/cordova_events_events.md.html#offline](http://docs.phonegap.com/en/1.8.1/cordova_events_events.md.html#offline)

**更新 ：**

从cordova 5开始，这些事件已移至[cordova-plugin-network-information](https://github.com/apache/cordova-plugin-network-information)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T12:56:05.737

如果你这样做

```
if (states[Connection.NONE]){
   alert('Geen internet :(');
   }; 
```

这会发生。
做这个。

```
networkState = navigator.network.connection.type
alert(states[networkState]); 
```

看看这是否适合你。

**编辑：** 只是比较：

```
if (networkState == Connection.NONE){
  alert('no internet ');
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-07T14:43:56.110

添加其他什么都不做...

```
if (navigator.network.connection.type == Connection.NONE) {
    alert('Geen internet :(');
}
else {
    // nothing
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T15:03:28.570

那是因为你正在测试一个常数的真实性。这种类型的测试将始终返回 true。您要使用的是：

```
if (navigator.network.connection.type == Connection.NONE]{
  alert('Geen internet :(');
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-11T13:07:16.763

在此处查看cordova 2.0.0 的最新文档：http: [//docs.phonegap.com/en/2.0.0/cordova_connection_connection.md.html#Connection](http://docs.phonegap.com/en/2.0.0/cordova_connection_connection.md.html#Connection)

有一个很好的例子。您需要检查 Connection.NONE 或 Connection.UNKNOWN - 两者都意味着没有互联网。其他任何事情都意味着您拥有某种类型的互联网连接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T07:26:37.967

解决方案 ：

```
<script type="text/javascript" charset="utf-8">

// Wait for PhoneGap to load
// 
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is loaded and it is now safe to make calls PhoneGap methods
//
function onDeviceReady() {
    checkConnection();
}

function checkConnection() {
    var networkState = navigator.network.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';

    alert('Connection type: ' + states[networkState]);
}

</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-16T06:47:21.807

```
Try the below code.  

var networkState = navigator.network.connection.type;
var states = {};
states[Connection.UNKNOWN]  = 'Unknown connection';
states[Connection.ETHERNET] = 'Ethernet connection';
states[Connection.WIFI]     = 'WiFi connection';
states[Connection.CELL_2G]  = 'Cell 2G connection';
states[Connection.CELL_3G]  = 'Cell 3G connection';
states[Connection.CELL_4G]  = 'Cell 4G connection';
states[Connection.NONE]     = 'No network connection';

if ((states[networkState]) == states[Connection.NONE])
{
alert("Please check your internet connectivity and try again"); 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-14T23:14:08.703

我只是在这里合并了几个答案，但我想要一些能够响应在线/离线事件但一开始就知道是否有互联网连接的东西。我在一个广播状态变化的 Angular 控制器中使用它，但为了简单起见，我删除了这些部分。

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    var _curStatus = false;

    function toggleStatus(newVal) {
        console.log('Setting internet connection state to: ' + newVal);
        _curStatus = newVal;
        // My angular $broadcast went here
    }

    var conType = navigator.network.connection.type;
    toggleStatus((conType != Connection.NONE) && (conType != Connection.UNKNOWN));
    document.addEventListener("online", function() {toggleStatus(true);}, false);
    document.addEventListener("offline", function() {toggleStatus(false);}, false);
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-20T05:56:13.070

```
<script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //
    function onDeviceReady() {
        checkConnection();
    }

        function checkConnection() {
            var networkState = navigator.connection.type;

            if(navigator.connection.type == Connection.NONE) {        
        alert("No network connection.Please turn it on");
    }
        }

    </script> 
```

# jquery - Disable/enable datepicker on checkBox click

> ID：10009599
> 
> 赞同：1
> 
> 时间：2012-04-04T10:48:26.377
> 
> 标签：jquery, datepicker

Here is my code:

```
$("#myCheckBox").click(function () {
        if (!$(this).is(':checked')) {
            $('#txtDateFrom').attr('readonly', true);
            $('#txtDateTo').attr('readonly', true);
            $('#txtDateFrom').val('01/01/2012');
            $('#txtDateTo').val('31/12/2012');
            $('#txtDateFrom').datepicker(this.checked ? "disable" : "disable");
            $('#txtDateTo').datepicker(this.checked ? "disable" : "disable");
        }
        else {
            $('#txtDateFrom').attr('readonly', false);
            $('#txtDateTo').attr('readonly', false);
            $('#txtDateFrom').datepicker(this.checked ? "disable" : "enable");
            $('#txtDateTo').datepicker(this.checked ? "disable" : "enable");
            $('#txtDateFrom').datepicker({ dateFormat: 'dd/mm/yy' });
            $('#txtDateTo').datepicker({ dateFormat: 'dd/mm/yy' });
        }
    }); 
```

After uncheking the checkBox, and checking it again, the textboxes are still disabled. Why?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:54:33.650

这可能是你的问题：

```
$('#txtDateFrom').datepicker(this.checked ? "disable" : "disable");
$('#txtDateTo').datepicker(this.checked ? "disable" : "disable"); 
```

应该是这样的：

```
$('#txtDateFrom').datepicker(this.checked ? "disable" : "enable");
$('#txtDateTo').datepicker(this.checked ? "disable" : "enable"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:54:28.167

尝试`.removeAttr()`通过将 readonly 设置为 false 而不是`.attr()`. 例如：

```
$('#txtDateFrom').removeAttr('readonly'); 
```

# objective-c - issue in implementing Leah's PullRefreshTableViewController

> ID：10009600
> 
> 赞同：0
> 
> 时间：2012-04-04T10:48:26.520
> 
> 标签：objective-c

I have implemented `PullRefreshTableViewController` with some classes that take no delegates, and it works well.
However, I find it difficult to implement it in my project, because I am already implementing some delegates. How can I include delegates and the `PullRefreshTableViewController` on the same line?

My Code:

```
myFeedController.h :-
@interface myFeedController : UIViewController<FBRequestDelegate ,UITableViewDelegate, UITableViewDataSource,ASIHTTPRequestDelegate>{
    ....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:32:06.293

终于，我得到了答案……

当您想在仅`viewController`继承的类中使用 PULL TO REFRESH 时`UITableView`，即没有委托，请使用 LEAH 的 PULL TO REFRESH 类。

当您的班级已经继承了不同的委托，例如`UITableViewDelegate`, `UITableViewDataSource`,`ASIHTTPRequestDelegate`等......那么您应该去`EGORefreshTableHeaderView`上课。

# asp.net-mvc-3 - Form collection is not retrieving the form input values from a replace div

> ID：10009604
> 
> 赞同：1
> 
> 时间：2012-04-04T10:48:49.007
> 
> 标签：asp.net-mvc-3, forms, submit

I am binding a model to a view in ASP.NET MVC. The model is a collection object. At my first submit I am getting the input values in my form collection.

After the form submit, I replacing the div in the from with a partial view

```
$.post("/formDetails/CheckValid", $('#Form').serializeArray(), function (htmlResult) 
{
    $('#divtoReplace').html('');
    $('#divtoReplace').html(htmlResult);
} 
```

But after replacing the div, I am unable to get the input values from the replaced div through the jQuery submit.

Please help me on sorting this issue.

# javascript - Measure size of file uploaded using jQuery in ASP.NET

> ID：10009607
> 
> 赞同：0
> 
> 时间：2012-04-04T10:49:07.100
> 
> 标签：javascript, jquery, asp.net, .net, file-upload

How to measure file size using jquery,the following code works fine in firefox,chrome but it is not work in IE (7/8/9). Can any one help me how to measure file size in IE

```
var fi = document.getElementById('loadfile');
var sizeInMB = fi.files[0].size;
    sizeInMB = (sizeInMB / (1024 * 1024));
if (sizeInMB > 20)
    alert("File size more than 20MB");
else
    alert("File size less than 20MB"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:55:57.187

试试这个方法：

```
<script runat="server">

    protected void UploadButton_Click(object sender, EventArgs e)
    {

        string savePath = @"c:\temp\uploads\";

        if (FileUpload1.HasFile)
        {                
            // Get the size in bytes of the file to upload.
            int fileSize = FileUpload1.PostedFile.ContentLength;

            // Allow only files less than 2,100,000 bytes (approximately 2 MB) to be uploaded.
            if (fileSize < 2100000)
            {

                // Append the name of the uploaded file to the path.
                savePath += Server.HtmlEncode(FileUpload1.FileName);

                FileUpload1.SaveAs(savePath);

                UploadStatusLabel.Text = "Your file was uploaded successfully.";
            }
            else
            {

                UploadStatusLabel.Text = "Your file was not uploaded because " + 
                                         "it exceeds the 2 MB size limit.";
            }
        }   
        else
        {

            UploadStatusLabel.Text = "You did not specify a file to upload.";
        }
    }
</script> 
```

# objective-c - Creating and looping through array of bools

> ID：10009609
> 
> 赞同：-2
> 
> 时间：2012-04-04T10:49:10.980
> 
> 标签：objective-c, ios, arrays, boolean

I'm creating a jigsaw application. When each piece is touched, the idea is that a bool (`droppedInPlace`) is assigned `YES` if it is put in its correct place, and `NO` if it is dropped in the wrong place. I then think I need to create an array of 40 bools (the number of jigsaw pieces), each of these entries will be initially set to NO.

This bool (`droppedInPlace`) is then inserted into an array using `replaceObjectAtIndex`. I then want to loop through this array. If all entries are true/yes/1, then the jigsaw is completed and i'll run some code.

I'm having some trouble doing this. I can't figure out how to code my idea above. Below is my code:

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [touches anyObject];
UIView *touchedView = [touch view];
// filename to be read from
NSString *filePath = [[NSBundle mainBundle]
                      pathForResource: 
                      @"jigsawHomeCenterPoints" 
                      ofType:@"plist"];
// array of cgpoints in string format
NSArray *jigsawHomeCentersArray = [NSArray arrayWithContentsOfFile:filePath];
// the tag number of the selected image
int tag = touchedView.tag;
NSLog(@"tag: %i", tag);
// says that the piece has not been dropped in it's holder
bool droppedInPlace = NO;
// if what has been touched is part of the array of images
if ([imagesJigsawPieces indexOfObject:touchedView] != NSNotFound) {
    // preparing new snap-to-center position
    // using (tag-1) as an index in the HomeCentersArray corresponds to where the image should be placed
    // this was a conscious decision to make the process easier
    CGPoint newcenter = CGPointFromString([jigsawHomeCentersArray objectAtIndex:tag-1]);
    // the location of the current touch
    CGPoint location = [touch locationInView:self.view];
    // call the animate method upon release
    [self animateReleaseTouch:touchedView withLocation:location];
    // setting a proximity range - if it is within this 80x80 area the image will snap to it's corresponding holder (HomeCenter)
    if (location.x > newcenter.x-40 && location.x < newcenter.x+40 
        && location.y > newcenter.y-40 && location.y < newcenter.y+40) {
        touchedView.center = newcenter;
        touchedView.alpha = 1.0;
        droppedInPlace = YES;
    } else {
        touchedView.alpha = 0.5;
        droppedInPlace = NO;
    }
    NSLog(@"True or false: %i", droppedInPlace);
[self checkJigsawCompleted:droppedInPlace withTag:tag];
}
} 
```

And the check function:

```
-(void) checkJigsawCompleted:(BOOL)inPlace withTag:(NSInteger)tag {
NSMutableArray *piecesInPlace;
[piecesInPlace replaceObjectAtIndex:tag-1 withObject:[NSNumber numberWithBool:inPlace]];
//code to loop through array - check if all entries are true/yes/1
//if so, jigsaw is completed - run some other code
//else, do nothing
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:57:57.640

请注意，您的`piecesInPlace`数组未在方法中初始化，`checkJigsawCompleted`将在下一行崩溃。

假设它用正确的值初始化，检查所有值是否为真的方法很简单：

```
for (NSNumber *boolNumber in piecesInPlace) {
    if (![boolNumber boolValue])
       return false;
}

return true; 
```

**编辑：**或者更好：

```
return ![piecesInPlace containsObject:[NSNumber numberWithBool:NO]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:03:50.740

所以，有几件事。首先，您要根据拼图的标签替换这个piecesInPlace 可变数组中的对象，看起来像这样。但是，您永远不会设置这些视图的标签。所以，这一行：

```
int tag = touchedView.tag; 
```

将始终为 0。更糟糕的是，您的 replaceObjectAtIndex:tag-1 位将尝试访问不合法的数组的 -1 索引（此时，但一旦 Apple 公开了一些更改）合法。

至于只是循环遍历数组并检查真值，我建议使用该方法

```
- (void)enumerateObjectsUsingBlock:(void (^)(id obj, NSUInteger idx, BOOL *stop))block 
```

使用它，一旦在数组中找到 NO 值，您就可以将停止指针设置为 YES 并且枚举将结束。只要停止为否，您只想继续枚举。如果你不停地通过你的数组，所有的值都是YES。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:59:04.060

您想知道如何遍历数组吗？您可以使用`for(;;)`循环或`for(.. in ..)`循环，或者我最喜欢的这类事情： [-enumerateObjectsUsingBlock：](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-SW19)

```
__block jigsawIsComplete = true;
[piecesInPlace enumerateObjectsUsingBlock: ^(id obj, NSUInteger i, BOOL* stop)
    {
        jigsawIsComplete = jigSawIsComplete && [obj boolValue];
        *stop = !jigsawIsComplete;
    }]; 
```

# javascript - nsIAlertService 警报单击禁用

> ID：10009610
> 
> 赞同：0
> 
> 时间：2012-04-04T10:49:12.023
> 
> 标签：javascript, firefox, xul

单击 nsIAlertService 生成的警报时可以禁用关闭操作？我希望警报一直保持到超时，然后单击它而不关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:10:12.017

不，单击总是会关闭警报（可以在[`onAlertClick`函数](http://hg.mozilla.org/mozilla-central/file/95df15895e02/toolkit/components/alerts/resources/content/alert.js#l215)中看到）。您必须要么接受这种行为，要么使用不同的方式来显示通知，例如使用[`<xul:panel>`](https://developer.mozilla.org/en/XUL/panel).

# objective-c - Phonegap plugin DatePicker not working in landscape mode

> ID：10009611
> 
> 赞同：0
> 
> 时间：2012-04-04T10:49:14.840
> 
> 标签：objective-c, ios, cordova, phonegap-plugins

I am using the PhoneGap plugin DatePicker ([https://github.com/phonegap/phonegap-plugins/tree/master/iOS/DatePicker](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/DatePicker)). It works just fine in portrait mode, but I want to be able to use it in landscape mode as well.

If I first open the DatePicker controller while in portrait mode, it looks fine in landscape mode as well, but if I don't first open it in landscape, it is aligned to the right and looks broken. It's not possible to change year either. It seems the DatePicker is not updated every time it loads.

![enter image description here](../Images/f575d3ee2b7f1140cecb8ca9a49a6dd8.png)

There is an 4 month old issue posted targeting this problem, but no one seems interested in taking care of this. ([https://github.com/phonegap/phonegap-plugins/issues/250](https://github.com/phonegap/phonegap-plugins/issues/250)) There is also a link to an article with a possible solution to this problem, but I don't understand Obj-C, so I can't fix this myself.

Could someone who understands Objective-C look at the code and help me with this issue? Or are there any other options? I really need to use this plugin in landscape mode!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:13:26.750

你是对的，它只适用于 ios > 5，其次这个插件也不能在 iPad 上运行！

# visual-studio-2008 - Visual Studio 2008 does not attach to w3wp.exe automatically on debugging IIS7

> ID：10009613
> 
> 赞同：0
> 
> 时间：2012-04-04T10:49:23.020
> 
> 标签：visual-studio-2008, iis-7, breakpoints, w3wp.exe

All of a sudden my breakpoints are not being hit when I start an ASP.NET debug session in Visual Studio 2008\. I am using IIS7.

I have to manually attach to w3wp.exe process for my breakpoints to be hit. However, I have to do this every time I start a debug session.

Does anybody know how to resolve this issue? Have I unintentionally changed a setting somewhere?

# css - 列表样式图像：Mozilla Firefox 中的 url(svg#id)

> ID：10009616
> 
> 赞同：3
> 
> 时间：2012-04-04T10:49:28.230
> 
> 标签：css, firefox, svg, mozilla

我会将我的 svg 元素设置为

```
list-style-image: url(svg#id) 
```

并通过#id指向图形，但它不起作用

在这种情况下，所有**根 svg**元素都用作图像，而不是它的一部分

如果我可以通过 defs 分隔我的 svg 元素并在它之后使用，那就太好了

```
 <use xlink:href="#byId"/> 
```

但在 CSS 中：

```
 list-style-image: url(svg#id) 
```

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:39:50.173

您也许可以使用 SVG 堆栈技术，请参阅[博客文章](http://simurai.com/post/20251013889/svg-stacks)和我修改后的[示例](http://jsfiddle.net/mJQzE/3/)，其中展示了如何在列表中使用它。请注意，目前这只适用于 Firefox。

# wso2 - 带有 Oracle OLAP 多维数据集的 WSO2 数据服务服务器

> ID：10009618
> 
> 赞同：0
> 
> 时间：2012-04-04T10:49:36.353
> 
> 标签：wso2, wso2dss

有谁知道如何将 Oracle OLAP 多维数据集与 WSO2 DSS 集成？

我已经尝试寻找有关它的资源（谷歌、论坛等），但我找不到任何东西。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T02:21:35.340

我个人没有尝试过，但看起来，您可以使用标准 SQL 来完成这项任务，正如这里提到的[http://www.orafaq.com/wiki/Oracle_OLAP#Direct_SQL_Access](http://www.orafaq.com/wiki/Oracle_OLAP#Direct_SQL_Access)。因此，如果支持 SQL，那么在 DSS 中也一样，以通常的方式，您只需创建一个提及 Oracle JDBC 驱动程序的 RDBMS 数据源，并使用所需的 SQL 创建一个数据服务查询。

干杯，安佳娜。

# javascript - 如何在 Rhino 中输出一些东西？

> ID：10009620
> 
> 赞同：14
> 
> 时间：2012-04-04T10:49:55.573
> 
> 标签：javascript, linux, rhino

我正在寻找 Python2.x 的 javascript 等价物`print "hi"`。我正在使用 ubuntu 终端中的 Rhino javascript 解释器。当我输入：

```
document.write{"hi"} 
```

我收到未定义“文档”的错误。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-04T10:53:18.037

JavaScript 没有任何内置方法来提供输出。脚本必须依赖于宿主环境提供的特性。

`document`是一个在网页浏览器中可用但在 Rhino 中不可用的对象。即使它可用，`document.write`也是一种功能。你`()`用来调用一个函数，而不是`{}`.

Rhino 提供了一个[`print`](https://developer.mozilla.org/en/Rhino_Shell#print%28.5Bexpr_....5D%29)功能。

```
print("hi"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T10:53:47.120

我认为您无权访问“文档”对象-因为我认为您所指的对象仅在浏览器中运行 javascript 时才可用。

此外，使用普通括号而不是大括号来调用函数。

你试一试：

```
print('Hello, world!') 
```

# c# - 通过“显示桌面”/Win+D 保持窗口可见

> ID：10009623
> 
> 赞同：6
> 
> 时间：2012-04-04T10:50:02.267
> 
> 标签：c#, windows, desktop

我正在创建一个桌面小工具，但遇到了问题。该窗口将被“显示桌面”命令隐藏 - 停止，我知道你在想什么，不需要“你不应该这样做”的评论 - 我想停止它。毕竟，桌面小工具的全部意义在于它粘在桌面上。

只是为了澄清 - 我不想要 TopMost 窗口。我不想真正停止“显示桌面”命令，只是忽略它。我想要的只是让我的桌面小工具在桌面上保持可见，像往常一样破坏正常功能。

有任何想法吗？我当前的方法是我在 Google 上找到的 P/Invoke 片段，将表单的父级设置为 Progman 或其他东西。问题是这似乎强制在任务栏中显示窗口，这是我不想要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-15T14:59:18.783

回答你的问题可能有点晚了，但我似乎已经找到了答案：

```
 [System.Runtime.InteropServices.DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

    [System.Runtime.InteropServices.DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr FindWindowEx(IntPtr hP, IntPtr hC, string sC, string sW);

    void MakeWin()
    {
        IntPtr nWinHandle = FindWindowEx(IntPtr.Zero, IntPtr.Zero, "Progman", null);
        nWinHandle = FindWindowEx(nWinHandle, IntPtr.Zero, "SHELLDLL_DefView", null);
        SetParent(Handle, nWinHandle);
    } 
```

“MakeWin”应该在表单的构造函数中调用，最好在“InitializeComponent”之前调用。至少在Win7下对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-27T14:36:32.267

为 WPF 表单添加我的转折。由于 WPF 窗口句柄，上述代码不起作用。所以完整的代码适用于WPF（win 10）：

```
[System.Runtime.InteropServices.DllImport("user32.dll", SetLastError = true)]
static extern IntPtr FindWindowEx(IntPtr hP, IntPtr hC, string sC, string sW);

void MakeWin()
{
    IntPtr nWinHandle = FindWindowEx(IntPtr.Zero, IntPtr.Zero, "Progman", null);
    nWinHandle = FindWindowEx(nWinHandle, IntPtr.Zero, "SHELLDLL_DefView", null);
    var interop = new WindowInteropHelper(this);
    interop.EnsureHandle();
    interop.Owner = nWinHandle;
} 
```

# javascript - Dojo Elements 与 jstl 标签兼容？

> ID：10009624
> 
> 赞同：0
> 
> 时间：2012-04-04T10:50:04.143
> 
> 标签：javascript, forms, dojo, jstl

当我写

```
<form:input id="xyz" dojoType="somedojoelement"/> 
```

它给了我 dojoType 与 JSTL 不兼容的错误。使用 JSTL 标签输入一些值时是否不能使用 dojoelements。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:59:12.300

我认为您无法通过这种方式做到这一点，您将不得不像本教程中那样做一些解决方法：将[JSF 与 Dojo 小部件结合起来](http://www.ibm.com/developerworks/web/library/wa-aj-jsfdojo/index.html)。这是你要找的吗？

# javascript - Ajax 图像上传提交与表单 ajax 冲突 - 使 .submit() 函数仅适用于该表单

> ID：10009629
> 
> 赞同：0
> 
> 时间：2012-04-04T10:50:25.307
> 
> 标签：javascript, ajax, forms, jquery

在多页表单的中间，我有一个用户可以上传图像的部分，并且该图像是使用 ajax 直接预览的。但是，当用户上传图片时，实际的表单本身也会尝试提交，我认为存在 ajax 冲突。这是我用于 ajax 图片上传的代码：

```
$(document).ready(function() { 
    $('#logo').live('change', function()            { 
        $("#prlogo").html('');
        $("#prlogo").html('<img src="../preview/loader.gif" alt="Uploading...."/>');
        $("#logoform").ajaxForm({
            target: '#prlogo'
        }).submit();
    });
}); 
```

这是形式：

```
<form id="logoform" method="post" enctype="multipart/form-data" action='../preview/logo.php'>
    <input type="file" name="logo" id="logo" />
</form> 
```

是否可以将 .submit() 链接到 ID 为 logoform 的表单？有没有其他方法可以限制提交仅适用于图像上传而不适用于表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:04:11.023

您可以尝试覆盖表单的提交功能，因此在调用提交之前，您需要设置如下内容

```
$('form').submit(function () {
    $.ajax({
        url: this.action, type: this.method,
        data: $(this).serialize(), cache: false,
        success: function () {
            //Do upload of Image
           }
        }

        //Or upload image here
    }); 
```

# multithreading - UIFont 线程在 iOs 4.0 中是安全的吗？

> ID：10009630
> 
> 赞同：1
> 
> 时间：2012-04-04T10:50:25.037
> 
> 标签：multithreading, uifont

根据文件（[http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iPhoneOS4.html](http://developer.apple.com/library/ios/#releasenotes/General/WhatsNewIniPhoneOS/Articles/iPhoneOS4.html)）

**在 UIKit 中绘制到图形上下文现在是线程安全的。具体来说：用于访问和操作图形上下文的例程现在可以正确处理驻留在不同线程上的上下文。字符串和图像绘制现在是线程安全的。现在可以安全地在多个线程中使用颜色和字体对象。**

这是否意味着 UIFont 在 iOs 4.0 中是线程安全的？

但是当我在我的代码中使用 UIFont 时，它有时会在代码中崩溃：[UIFont sizeWithFont:myfont]; 我只是在后台线程中测量一些文本大小。

如果我不能在后台线程中使用 UIFont，我该如何测量文本大小：（而不是 [UIFont sizeWithFont:myfont]）？

谢谢你。

# java - Java（Android）：我使用循环创建了一堆视图，并且想要 GONE 其中一个

> ID：10009632
> 
> 赞同：1
> 
> 时间：2012-04-04T10:50:31.340
> 
> 标签：java, android

嗨，我已经设置（很好地膨胀）了一堆按钮，这些按钮是从包含按钮、文本视图等的相对布局构建的。我希望能够删除/隐藏/删除整个按钮集。我假设我可以`setVisibility(View.GONE)`在 RelativeLayout 上做一个，但我不确定我应该如何引用这个布局。我已经为它设置了一个 ID，但是在尝试引用它时我真的迷路了。启动此代码的按钮是删除按钮，因此 OnClick(View v) 包含删除按钮的 ID。我刚刚尝试了一个 getparent，但效果不佳（崩溃）。

谁能指出我正确的方向？

这是我尝试过的getparent代码。

```
 RelativeLayout dropping = (RelativeLayout) ((Activity) v.getParent()).findViewById(R.id.tp_container);
            dropping.setVisibility(View.GONE); 
```

我希望有这样的东西，虽然 id 可以用另一个变量表示，如果可能的话？

```
relativeViewVariable.id(actualId).setVisibility(View.GONE); 
```

这很尴尬，但我不知道这是Java还是Android问题？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:02:54.433

如果您动态创建视图，则必须设置自定义 ID，然后**从其父级获取具有该 ID 的视图！**.

```
View textView;
RelativeLayout layout = new RelativeLayout (this);
setContentView(layout);

for(int i=0;i<10;i++){
        textView = new TextView(this);
        textView.setId(i);
        layout.addView(textView);
}

/* FOR LOOP THAT ONE */
TextView referencedTextView = (TextView) layout.findViewById(5);
referencedTextView.setVisibility(View.GONE); 
```

如果您只想隐藏布局中的所有按钮，则可以遍历所有父视图。

```
LinearLayout layout;
        View view;
        for (int i = 0; i < layout.getChildCount(); i++) {
            if(layout.getChildAt(i) instanceof Button){
                ((Button)layout.getChildAt(i)).setVisibility(View.GONE);
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:53:56.607

如果您在 RelativeLayout 中有 childViews 的 id，则很有可能做到这一点。

```
dropping.findViewByID(R.id.ids).setVisibility(View.GONE)
dropping.removeView(dropping.findViewByID(R.id.ids)) 
```

等等..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:55:02.567

使用 ViewGroup 创建一组视图。这里 ViewGroup 将是基类。将 ViewGroup 的可见性设置为 GONE 将导致将其设置为子视图

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:02:50.790

```
View menu; //Declaration
View app; //Declaration 
```

身体的一部分

```
final View[] children = new View[] { menu, app };

    public void initViews(View[] children)
    {
        // A ViewGroup MUST be the only child of the HSV
        ViewGroup parent = (ViewGroup) getChildAt(0);

        if(Your Condition)
        {
        children[i].setVisibility(View.INVISIBLE);
        parent.addView(children[i]);
        }       
    } 
```

我已经在我的应用程序中完成了这种工作，只需在上述功能中创建自己的条件并让它工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T11:03:57.683

Of course it an android Question

first you have inflated layout so the its instant create only once .

suppose u have created five layout using looping inflated layout then its all ID remain same (that's true the view create multiple times ) so you cant justify the its using ID .

if you want to so what u describe in your question then you should create dynemically layout

using in the java file . like

```
for(int i = 0 ; i < 10  ;  i ++)
{
  RelativeLayout layout = new RelativeLayout(context);  
} 
```

after that it will create new layout ID for each layout or layout component .

# javascript - Chrome 阻止弹出警报

> ID：10009637
> 
> 赞同：4
> 
> 时间：2012-04-04T10:51:16.833
> 
> 标签：javascript, html, browser

我有基于 PHP、HTML 和 javascript 的典型 Web 应用程序。

用户可以从 HTML 页面触发一个 javascript 操作，该操作与服务器进行一些 ajax 交互。这个 javascript 函数碰巧会提示几个警报消息，要求用户确认。

当第二个警报运行时，浏览器（Chrome 版本 18.0.1025.142 m）在警报框中显示一条消息和一个复选框，用户可以在其中“阻止此页面的其他对话框窗口”（这不是我翻译的确切文本它来自我浏览器中的意大利语）。

用户可以告诉浏览器阻止连续的警报，这对我的应用程序不利。

有没有办法提示更多的警报，避免用户阻止它们的功能？

也许我应该使用除警报之外的其他东西，也许是一个 jQuery 组件？如果我这样做，哪一个类似于警报？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:53:16.780

我强烈建议使用[jQuery 的对话框](http://jqueryui.com/demos/dialog/)作为替代方案。它实际上并不是物理弹窗，因为它确实是网页上的一个浮动div，所以无法被屏蔽。另一个第二大优势是看起来并不尴尬。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T11:02:04.023

一些浏览器为此功能提供此功能，`alert()`否则恶意 Web 开发人员可能会打开无休止的警报并阻止用户离开页面 - 还记得 Rick-rolling 吗？没有办法对此进行编码，也不应该有（如果您可以围绕这个功能进行编码，这将使它变得毫无意义）。

另一种方法是使用 html 来实现将显示在页面其余部分上方的对话框，（通常）使用透明（或半透明）div 覆盖整个页面，以防止与对话框元素以外的任何内容进行交互。jQuery UI 提供[了一个对话框控件](http://jqueryui.com/demos/dialog/#modal)来执行此操作 - 看看 modal 选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T22:54:39.423

我想出了一种方法来检测这些是否被阻止。您将不得不对您将向用户显示的消息做自己的事情。

```
window.nativeAlert = window.alert;
window.alert = function (message) {
var timeBefore = new Date();
var confirmBool = nativeAlert(message);
var timeAfter = new Date();
if ((timeAfter - timeBefore) < 350) {
    MySpecialDialog("You have alerts turned off, turn them back on or die!!!");
  }
}

window.nativeConfirm = window.confirm;
window.confirm = function (message) {
var timeBefore = new Date();
var confirmBool = nativeConfirm(message);
var timeAfter = new Date();
if ((timeAfter - timeBefore) < 350) {
    MySpecialDialog("You have alerts turned off, turn them back on or die!!!");
}
 return confirmBool;
} 
```

显然我已将时间设置为 3.5 毫秒。但是经过一些测试，我们只能在大约 5 毫秒内单击或关闭对话框。

# amazon-web-services - 如何检查 SWF 中是否已存在域

> ID：10009638
> 
> 赞同：2
> 
> 时间：2012-04-04T10:51:21.950
> 
> 标签：amazon-web-services, amazon-swf

有没有办法检查 SWF 中是否存在域名，而不是遍历整个域[列表](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/simpleworkflow/AmazonSimpleWorkflowClient.html#listDomains%28com.amazonaws.services.simpleworkflow.model.ListDomainsRequest%29)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:06:47.033

如果您要注册该域以防万一，您可以简单地尝试调用[registerDomain()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/simpleworkflow/AmazonSimpleWorkflowClient.html#registerDomain%28com.amazonaws.services.simpleworkflow.model.RegisterDomainRequest%29)并捕获[DomainAlreadyExistsException](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/simpleworkflow/model/DomainAlreadyExistsException.html)：

> 如果指定的域已经存在则返回。即使现有域处于弃用状态，您也会遇到此错误。

显然，如果域尚不存在，这会产生实际注册域的副作用；）

否则[describeDomain()](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/simpleworkflow/AmazonSimpleWorkflowClient.html#describeDomain%28com.amazonaws.services.simpleworkflow.model.DescribeDomainRequest%29)应该允许类似的方法，只要它会在不存在域的情况下抛出[UnknownResourceException ：](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/simpleworkflow/model/UnknownResourceException.html)

> **当在此操作的范围（区域或域**）内找不到命名资源时返回。如果命名资源从未创建或不再可用于此操作，则可能会发生这种情况。*[强调我的]*

# php - php/mysql 组列表按第一个字符

> ID：10009641
> 
> 赞同：0
> 
> 时间：2012-04-04T10:51:40.740
> 
> 标签：php, mysql

我有以下mysql查询：

```
$manufacturers_query = "select m.manufacturers_id, m.manufacturers_name, m.manufacturers_image, mi.manufacturers_url
                              from manufacturers m
                              left join manufacturers_info mi on m.manufacturers_id = mi.manufacturers_id
                              order by manufacturers_name";
$manufacturers = $db->Execute($manufacturers_query);

while (!$manufacturers->EOF) {
   $man_content .= $manufacturers->fields['manufacturers_name'];
   $manufacturers->MoveNext();
} 
```

如何使生成的列表按首字母分组并在组前添加首字母？例如：

一种

*   阿尔法罗密欧
*   奥斯汀·马丁

乙

*   宝马
*   别克

C

*   卡迪拉克
*   雪佛兰
*   克尔维特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:04:50.230

你可以试试这样的 -

```
<?php

$manufacturers_query = "select m.manufacturers_id, m.manufacturers_name, m.manufacturers_image, mi.manufacturers_url
                            from manufacturers m
                            left join manufacturers_info mi on m.manufacturers_id = mi.manufacturers_id
                            order by manufacturers_name";
$manufacturers = $db->Execute($manufacturers_query);

$last_letter = '';

while (!$manufacturers->EOF) {
    $man_content = $manufacturers->fields['manufacturers_name'];
    if (strtoupper(substr($man_content, 0, 1)) != $last_letter) {
        $last_letter = strtoupper(substr($man_content, 0, 1));
        print "<h2>$last_letter</h2>";
    }
    print "<p>$man_content</p>";
    $manufacturers->MoveNext();
} 
```

或者也许这首先按第一个字母创建制造商索引数组 -

```
<?php

$manufacturers_query = "SELECT m.manufacturers_id, m.manufacturers_name, m.manufacturers_image, mi.manufacturers_url
                            FROM manufacturers m
                            LEFT JOIN manufacturers_info mi ON m.manufacturers_id = mi.manufacturers_id
                            ORDER BY manufacturers_name";
$manufacturers = $db->Execute($manufacturers_query);

$firstLetterIndexedArray = array();

while (!$manufacturers->EOF) {

    $index = strtoupper(substr($manufacturers->fields['manufacturers_name'], 0, 1));
    $firstLetterIndexedArray[$index][] = $manufacturers->fields;

    $manufacturers->MoveNext();
}

print '<ol>';

foreach ($firstLetterIndexedArray as $letter => $man) {
    print "<li>$letter</li><li><ol>";

    foreach ($man as $manufacturer) {
        print "<li>{$manufacturer['manufacturers_name']}</li>";
    }

    print "</ol></li>";
}

print "</ol>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:18:43.207

您可以使用 php 轻松完成此操作。

创建一个`$currentChar = "";`

并在您的循环中获取制造商的第一个字符并将其与`$currentChar` If`$currentChar != manufacturerFirstChar`

关闭`ol`，更新`$currentChar`到新的字符，打印它并打开一个新的`ol`

像这样：

```
$currentChar = "";
$firstRun = true;
$manufacturers_query = "select m.manufacturers_id, m.manufacturers_name,
                         m.manufacturers_image, mi.manufacturers_url
                          from manufacturers m
                          left join manufacturers_info mi on
                          m.manufacturers_id = mi.manufacturers_id
                          order by manufacturers_name";
 $manufacturers = $db->Execute($manufacturers_query);

 while (!$manufacturers->EOF) {
    $man_content .= $manufacturers->fields['manufacturers_name'];
    $temp = substr($man_content, 0, 1));
    if($temp != $currentChar)
    {
        $currentChar = $temp;
        if(!$firstRun)
        {
            // if it's not the first time, close previous li and ol
            echo "</li>";
            echo "</ol>";
        }
        else
        {
            $firstRun = false;
        }
        // print the char and open the ol
        echo "<span class=\"manChar\">".$currentChar."</span>";
        echo "<ol>";
    }
    echo "<li>".$man_content."</li>";
    $manufacturers->MoveNext();
 }
echo "</li>";
echo "</ol>"; 
```

我没有测试过，但我相信是这样的。

# php - 取消链接文件路径错误

> ID：10009645
> 
> 赞同：0
> 
> 时间：2012-04-04T10:52:08.473
> 
> 标签：php, mysql, sql

我需要通过用户输入删除的文件的路径出现问题。我基本上让它在本地主机上工作，但不在我的实时服务器上（使用 unlink php 方法）。它现在收到一个错误，说由于我认为的路径而无法删除文件。

我的问题是路径应该是“creativetree.co/creativetreeBeta/uploaded_files/imgfile.jpg”

是否需要插入才能获得工作路径？这是我的一些代码（更多，但这是最相关的）。

```
if(isset($_POST["filetodelete"])){
$deletefileid = $_POST['filetodelete'];
$projid = $_POST['projid'];

$get_files_to_unlink = "SELECT * FROM files WHERE files_id = $deletefileid";                    
$get_unlink_result=mysql_query($get_files_to_unlink);
while($row=mysql_fetch_assoc($get_unlink_result)){
    $filetounlink = $row['fileurl'];//uploaded_files/imgname.jpg
}

//url problem here worked on localhost not when live
unlink($filetounlink);

$sql_remove_file="DELETE FROM files WHERE files_id = $deletefileid";
$result_file=mysql_query($sql_remove_file);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:00:22.630

当您尝试使用 URI 路径取消链接文件时，您将收到以下警告：

```
unlink() [function.unlink]: HTTP does not allow unlinking 
```

它应该仍然有效，您可以使用来抑制警告，`@`但我不推荐它。

相反，您需要使用文档相对路径或根相对路径，例如：

```
./uploaded_files/somefile.jpg 
```

或者

```
/var/www/mysite/uploaded_files/somefile.jpg 
```

不过，最有可能的是，问题出在文件夹权限上。PHP 可能只有对该文件夹的读取权限。

正如其他评论中提到的，从 $_POST 中获取值并直接输入到您的查询中，可以让您为 SQL 注入敞开大门。您应该改为使用 PDO 查看参数化查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T10:56:05.130

路径必须是绝对路径，例如 /var/www/file/to/delete.pdf 您必须非常小心用户输入！！！

# c# - 如何比较具有特殊字符的 Word 文档中的 2 个字符串（例如：Dáceres-Nartínez）？

> ID：10009647
> 
> 赞同：1
> 
> 时间：2012-04-04T10:52:11.093
> 
> 标签：c#

我需要比较 word 文档中的两个字符串，我计算出字母和数字值，但它无法比较包含一些特殊字符的字符串，例如 (Máceres-Cartínez) 这里 a 和 i 出现在特殊字符中，所以它不是比较。

我的代码如下。StreamReader sr = new StreamReader(this.textBox1.Text); 字符串 strValue = sr.ReadToEnd(); 字符串[] strSpliter =新字符串[1]；strSpliter[0] = "参考"; string[] strSplitValue = strValue.Split(strSpliter, StringSplitOptions.None); String[] strParaValue = strSplitValue[1].Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries); FileStream fst = new FileStream(@"E:\TrueText.txt",FileMode.Append); StreamWriter swt = new StreamWriter(fst); FileStream fsf = new FileStream(@"E:\FalseText.txt", FileMode.Append); StreamWriter swf = new StreamWriter(fsf);

```
 swt.WriteLine("Startred on :" + DateTime.Now.ToString("yyyy/MM/dd/hh/mm/ss") + "\n");
            swf.WriteLine("Startred on :" + DateTime.Now.ToString("yyyy/MM/dd/hh/mm/ss") + "\n");

            foreach (string strPara in strParaValue)
            {
                string[] strAuthorsPart = strPara.Split('.');
                string[] strAuthorslist = strAuthorsPart[0].Split(',');
                string[] strAuthor = strAuthorslist[0].Split(' ');
                if (strSplitValue[0].Contains(strAuthor[0].Trim()))
                {
                    swt.WriteLine(strAuthor[0] + "\t");
                }
                else
                {

                    swf.WriteLine(strAuthor[0] + "\t");
                } 
```

有没有人指导我如何解决这个问题？

谢谢迪戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:11:51.053

我看不到你的代码。也许这可以帮助你：

```
bool result = Regex.IsMatch("\\bthe\\b", text);

(using System.Text.RegularExpressons.)
StreamReader sr = new StreamReader(this.textBox1.Text);
            string strValue = sr.ReadToEnd();
            string[] strSpliter =new string[1];
            strSpliter[0] = "References";
            string[] strSplitValue = strValue.Split(strSpliter, StringSplitOptions.None);
            String[] strParaValue = strSplitValue[1].Split(new string[] { "\r\n" }, StringSplitOptions.RemoveEmptyEntries);
            FileStream fst = new FileStream(@"E:\TrueText.txt",FileMode.Append);
            StreamWriter swt = new StreamWriter(fst);
            FileStream fsf = new FileStream(@"E:\FalseText.txt", FileMode.Append);
            StreamWriter swf = new StreamWriter(fsf);

            swt.WriteLine("Startred on :" + DateTime.Now.ToString("yyyy/MM/dd/hh/mm/ss") + "\n");
            swf.WriteLine("Startred on :" + DateTime.Now.ToString("yyyy/MM/dd/hh/mm/ss") + "\n");

            foreach (string strPara in strParaValue)
            {
                string[] strAuthorsPart = strPara.Split('.');
                string[] strAuthorslist = strAuthorsPart[0].Split(',');
                string[] strAuthor = strAuthorslist[0].Split(' ');
                if (strSplitValue[0].Contains(strAuthor[0].Trim()))
                {
                    swt.WriteLine(strAuthor[0] + "\t");
                }
                else
                {

                    swf.WriteLine(strAuthor[0] + "\t");
                } 
```

这是我的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:21:59.073

[自定义案例映射。](http://msdn.microsoft.com/en-us/library/xk2wykcz.aspx)

# asp.net - 建站时出错

> ID：10009651
> 
> 赞同：2
> 
> 时间：2012-04-04T10:52:29.943
> 
> 标签：asp.net, vb.net, iis

尝试构建网站时出现以下错误，

> 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由于虚拟目录未在 IIS 中配置为应用程序所致

我正在为我的网站使用 IIS express 并创建了一个虚拟目录并映射到一个目录。刚刚发现，因为我没有将虚拟目录映射到应用程序，它会给出此错误消息。当我尝试从我的网站项目中删除虚拟目录时，我无法删除它。

我的问题是我是否必须做任何其他事情才能从我的网站项目中删除虚拟目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:12:00.957

尝试按照[此处](https://stackoverflow.com/questions/521637/msbuild-error-while-compiling-asp-net-website)接受的答案中的说明将虚拟目录设置为 IIS 下的应用程序。此外，请确保您的项目的 web.config 是在应用程序的根目录中创建的（因此不会应用树上更远的配置文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:27:34.430

不久前我遇到了这个错误..

确保您的 web.config 位于项目文件夹的顶层。最好确保您没有多个版本

希望这可以帮助

书呆子

# entity-framework - EntityFramework：在 IQueryable 上调用 ToList() 约 11.000 条记录需要 10 秒

> ID：10009654
> 
> 赞同：2
> 
> 时间：2012-04-04T10:52:46.327
> 
> 标签：entity-framework, linq, sql-server-2008-r2, entity-framework-4

我想通过 EntityFramework 4 通过 WCF 服务从 SQL Express 2008 R2 服务器返回相对大量的记录到 WCF 客户端。我的测试表目前包含大约 11.000 条记录。LINQ 查询就像这样简单：

```
Database DB = new Database(); // create object context
var retValue = DB.Entities.Persons
        .Include("District")
        .Include("District.City")
        .Include("District.City.State")
        .Include("Nationality")

return retValue.ToList(); 
```

这大约需要 10 秒才能完成。

在 SQL Server Managament Studio 中执行相同的 SELECT 查询不到 1 秒。

EF 一定要那么慢吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T13:28:35.510

您的查询并不简单，它包含很多连接（由于`Include`s），更重要的是它可能会返回大量重复数据，特别是如果包含的导航属性是集合：[https ://stackoverflow.com/a/5522195 /270591](https://stackoverflow.com/a/5522195/270591)

耗时的部分是对象物化并将实体附加到上下文，当数据库的结果返回到实体框架上下文时。

您的测量结果（在对您问题的评论中）证实了这一点，即在同一上下文中的第二个查询非常快。在这种情况下，EF 将对数据库执行查询，但不需要再次具体化对象，因为它们仍附加到上下文中。

如果您在第二个上下文中运行第二个查询，则生成的实体必须附加到新上下文 - 这一步又很慢（也由您的测量确认）。

这可能是使用 EF 的查询*实际上*很慢并且与原始 SQL 查询相比增加了很多开销的一点。EF 需要创建许多数据结构，为更改跟踪和管理上下文中的对象身份做准备，这会消耗额外的时间。

我认为提高性能的唯一方法是禁用更改跟踪（假设您的操作不需要它）。在 EF 4.0 /`ObjectContext`中它将是：

```
Database DB = new Database();
DB.Entities.Persons.MergeOption = MergeOption.NoTracking;
// MergeOption is in System.Data.Objects namespace 
```

使用这种方法时，必须注意，即使相关对象具有相同的键，它们也会被创建为单独的对象——启用更改跟踪并非如此，因为附加到上下文将避免这种重复。

因此，可能会有更多的对象被加载到内存中。如果这会适得其反并且实际上会进一步降低性能，或者它是否仍然表现更好，那就是一个测试问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:15:14.550

这很可能是因为与查询执行相比，EF 中的查询编译（包含大量包含 -> 要使用的 SQL）的 L​​INQ 查询非常慢。您可以通过 CPU 分析您的代码来验证这是否是问题所在。考虑使用更少的包含 + 多个更小的查询，使用已编译的查询或升级到最新的 EF5 测试版。

# c# - 如何为实验室测试自动生成文件内容

> ID：10009657
> 
> 赞同：0
> 
> 时间：2012-04-04T10:52:52.847
> 
> 标签：c#, .net, testing

我需要用几个带有“随机”数据的文件生成磁盘结构来测试我们应用程序的性能。我有几个限制：

*   每次我生成的数据必须总是相同的，甚至是不同的执行。
*   数据必须很大（> 8GB）
*   用于生成数据的资源必须是轻量级的（例如 8 Gb 的 zip 对我无效）
*   我希望数据看起来像源代码，或者至少是人类可读的。原因是我们的软件管理源代码，它压缩数据，所以我需要生成尽可能接近现实的数据。

例如，我想到的第一件事就是从 github 压缩源代码存储库，但这不是一个选项，因为我们需要在 Amazon 云中进行测试。我们也不想每次都下载 8Gb 的数据，或者上传 zip 文件。

所以我创建了一个带有磁盘结构树的元数据文件和一个在文件中填充数据的程序。元数据文件如下所示：

```
\dir1 -1
\dir1\file1.data 1435
\dir2\ -1
\dir2\file2.data 44513 
```

路径旁边的数字对于目录是 -1，对于文件来说是所需的文件大小（以字节为单位）。

因此，我可以轻松生成包含随机数据的磁盘结构。这对我无效，因为每次文件内容都不同。

你知道任何库、例子、方法、技术……来执行这个任务吗？

# vb.net - vb.net sqlite 从保存为 dbtype.string 的日期时间获取日期

> ID：10009658
> 
> 赞同：1
> 
> 时间：2012-04-04T10:52:57.827
> 
> 标签：vb.net, sqlite, datetime

当我查看数据库记录时，日期时间保存如下：4/6/2012 04:42:28 PM

因为我已经使用 dbtype.string 保存了它

现在，我只得到日期，不包括时间，这是我的代码：

```
 Private Sub getpapererror(ByVal ddate As String)
    Dim sqlstr As String = "select * from perror where date(ddate) = $xddate"
    Dim sqlcmd As New SQLiteCommand(sqlstr, mycon)
    sqlcmd.Parameters.Add("$xddate", DbType.String).Value = ddate
    ...
    End Sub

    Dim xdt As DateTime = DateTime.Now
    getpapererror("#" & xdt.Month.ToString & "/" & xdt.Day.ToString & "/" & xdt.Year.ToString & "#") 
```

我只想得到日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:56:17.283

如果您想将日期值作为具有特定格式的字符串（如“4/6/2012”），您可以查看[sqlite 的 strftime()](http://sqlite.org/lang_datefunc.html)。

如果您必须保存字符串，也许您可​​以在之后破坏字符串。在python中我会尝试类似的东西

```
>>> ds = "4/6/2012 5:55:55 PM"
>>> dt, tm = ds.split(None, 1)
>>> dt
'4/6/2012'
>>> tm
'5:55:55 PM' 
```

# ruby-on-rails-3 - 使用 Ruby on Rails 应用程序进行加密

> ID：10009659
> 
> 赞同：1
> 
> 时间：2012-04-04T10:52:59.663
> 
> 标签：ruby-on-rails-3, encryption, sqlite

我在 Ruby on Rails 3.0.10 版中做一个应用程序，我允许用户上传他们自己的文件、文档、pds 等并将它们存储在 sqlite 中。

有谁知道我是否可以使用[https://github.com/shuber/attr_encrypted](https://github.com/shuber/attr_encrypted)中的 attr_encryted来加密所有上传的数据？

感谢您....

新手程序员

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-22T16:52:41.960

我们可以使用 Ruby On Rails 实现加密和解密算法

请找到实施的网址：-

[https://gurudathbn.wordpress.com/2015/02/04/aes-cipher-encryption-decryption-algorithms-using-ruby-on-rails/](https://gurudathbn.wordpress.com/2015/02/04/aes-cipher-encryption-decryption-algorithms-using-ruby-on-rails/)

示例：- 加密：- irb(main):007:0> AesEncryptDecrypt.encryption('gurudath') => “rUPKObydUJd9cY9agm3Glw==\n”</p>

解密：- irb(main):008:0> AesEncryptDecrypt.decryption('rUPKObydUJd9cY9agm3Glw==') => “gurudath”</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:47:57.100

你当然可以。

我推荐[更安全的版本](https://github.com/danpal/attr_encryptor)。

# python - 如何在 Linux 中安装 py2exe 模块

> ID：10009660
> 
> 赞同：9
> 
> 时间：2012-04-04T10:53:00.707
> 
> 标签：python, installation, py2exe

我下载了实际的 py2exe 包。但我不知道如何在我的系统中获取它。我的意思是我可以 100% 地按照教程进行操作，但我找不到任何如何将 py2exe 安装到我的 kubuntu 11.10 的内容。我也找不到可以包含到我的工作文件夹中的 py2exe.py。

有人可以帮我这个项目必须完成到明天吗？

谢谢你的帮助

干杯，克里斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T10:56:52.083

Py2exe 必须在 Windows 上运行，不能在 Linux 上运行。（也许酒有帮助，但我不确定）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:57:10.623

您需要一种方法来生成证书文件以使用 py2exe。尝试[使用 pyinstaller](http://www.pyinstaller.org/)。

# c# - 如何调试由 Windows 服务托管的 WCF 服务？

> ID：10009661
> 
> 赞同：3
> 
> 时间：2012-04-04T10:53:03.800
> 
> 标签：c#, wcf, windows-services

我使用 Windows 服务托管来托管我的 WCF 服务......现在当我调用我的服务时，我无法调试它！我可以调试我的服务吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T10:56:14.633

此外，请考虑在开发期间不要将其托管在 Windows SERVICE 中。每当我有服务时，我都有一个替代代码路径来将其作为命令行程序启动（如果可能使用 /interactive 命令行参数等），因此我不必处理服务调试的细节（需要停止更换组件等）。

我只转向“服务”进行部署等。调试总是在非服务模式下完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T10:54:37.363

1.  在管理模式下运行 VS
2.  从调试菜单中选择附加到进程...
3.  选择您的服务流程
4.  在您的服务中设置断点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:16:46.533

[Debugger.Launch()](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.launch.aspx)一直为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T11:26:24.090

[我在这里](http://www.c-sharpcorner.com/UploadFile/0f68f2/how-to-debug-a-wcf-service-hosted-in-windows-service/)找到了一个演练。它建议向服务添加两个方法 OnDebugMode_Start 和 OnDebugMode_Stop（实际上暴露了 OnStart 和 OnStop 受保护的方法），因此 Service1 类将如下所示：

```
public partial class Service1 : ServiceBase
{
    ServiceHost _host;
    public Service1()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        Type serviceType = typeof(MyWcfService.Service1);
        _host = new ServiceHost(serviceType);
        _host.Open();
    }

    protected override void OnStop()
    {
        _host.Close();
    }

    public void OnDebugMode_Start()
    {
         OnStart(null);
    }

     public void OnDebugMode_Stop()
     {
         OnStop();
     }
} 
```

并在这样的程序中启动它：

```
static void Main()
{
    try
    {
#if DEBUG
        // Run as interactive exe in debug mode to allow easy debugging. 

        var service = new Service1();
        service.OnDebugMode_Start();
        // Sleep the main thread indefinitely while the service code runs in OnStart() 
        System.Threading.Thread.Sleep(System.Threading.Timeout.Infinite);
        service.OnDebugMode_Stop();
#else
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] 
                           { 
                                     new Service1() 
                           };
        ServiceBase.Run(ServicesToRun);
#endif
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

在 app.config 中配置服务：

```
<configuration>
<system.serviceModel>
<services>
  <service name="MyWcfService.Service1">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration=""
      contract="MyWcfService.IService1">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration=""
      contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/MyWcfService/Service1/" />
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata  httpGetEnabled="True"  policyVersion="Policy15"/>
      <serviceDebug includeExceptionDetailInFaults="True" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

你都准备好了。

# c# - 如何在弹出的 aspx 页面中访问 RTF 字段？

> ID：10009662
> 
> 赞同：0
> 
> 时间：2012-04-04T10:53:06.423
> 
> 标签：c#, asp.net, tridion

我正在自定义功能区工具栏并向其添加一个按钮。每当我单击该按钮时，它将打开一个 aspx 页面，允许作者选择一些数据 - onclick 提交按钮（在弹出的 aspx 页面中）数据被附加到现有的 RTF字段内容。

我们的要求是将光标所在的部分内容替换为aspx页面中选中的数据。请让我知道应该使用哪个对象？我们可以通过 $display.getView().getItem() 访问它吗？该信息是否会出现在“组件模型对象”中，如果是，请与我们分享指针？

早期响应将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:38:44.677

触发弹出窗口打开的函数应该有一个“目标”参数。目标具有“编辑器”属性。您应该能够使用编辑器来执行您的建议。editor.applyHTML 将在光标位置插入 HTML。应该有一种方法可以让您替换选择而不仅仅是插入 - 它甚至可能是相同的方法，您尝试过吗？

# jquery - JQuery 清除队列事件

> ID：10009665
> 
> 赞同：1
> 
> 时间：2012-04-04T10:53:13.883
> 
> 标签：jquery

我正在研究颜色选择器。我的想法是通过 Ajax 请求更新 MySQL 数据库，同时单击颜色选择器中的颜色。我正在使用farbtastic colorpicker。我的问题是，如果您在按钮按下时移动鼠标，我有很多请求，因为颜色正在改变（我希望很清楚会发生什么）。这是我的代码：

```
$('.colorpicker').live('click', function() {
    $this = $(this);
    $.farbtastic('#picker').linkTo(function(color){
            $this.css({'backgroundColor':color});
            $.ajax({
                    type:"GET",
                    url:"data.php?color="+color,
                    success: function(data){
                    /* SOME EVENTS */
                    }
            });
    });
    return false;
}); 
```

`.colorpicker`这是我的 div（我在其中更改背景颜色）

`#picker`这是 farbstatic 颜色选择器

单击和移动鼠标时如何“跳过”所有（AJAX）请求？我只想在“mouseup”之前捕获最后一个请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:05:46.770

我会使用隐藏字段或 javascript 变量来捕获所选颜色，然后在鼠标启动时触发 ajax 请求。像这样的东西：

```
var colorselected = null;

$('.colorpicker').live('click', function() {
  $this = $(this);
  $.farbtastic('#picker').linkTo(function(color){
        $this.css({'backgroundColor':color});
        colorselected = color;
  });
  return false;
});

$("#picker").mouseup(function() {
  $.ajax({
    type:"GET",
     url:"data.php?color="+colorselected,
      success: function(data){
       /* SOME EVENTS */
       }
  });
}); 
```

这应该避免所有不必要的 ajax 请求。

# sed - Linux GREP/SED [xargs] 在文件中查找模式和行号并使用 SED 删除

> ID：10009671
> 
> 赞同：0
> 
> 时间：2012-04-04T10:53:36.707
> 
> 标签：sed, grep

我的情况是：

1.  我有一个很长的文本字符串，其中包含特殊字符，它出现在各种文件的长行中。包含该字符串的文件遍布整个文件系统 (Linux)。该字符串可能位于它出现的文件中的不同行号上，但每个文件出现一次。但是，该字符串包含一个特定的模式，我可以键入它来识别整个字符串。

2.  我知道如何通过使用 GREP -lir mystringprefix /path 键入字符串的“前缀”来查找包含该字符串的文件的名称。

3.  我知道如何使用 grep -n "prefix" file.name | 使用 GREP 和 SED 确定文件中字符串的行号 sed -n "s/^([0-9] *)[:].* /\1/p”。

4.  我知道如何使用 SED 使用 sed -i xd /path/file 删除文件中包含感兴趣字符串的行（x 是要删除的行号）。

我的问题是如何将所有这些放在一起以确定哪些文件包含该模式，将名称传递给 GREP 以确定文件中的行号，然后将名称和行号都传递给 SED 以删除该行？

我需要这样做，以便从文件系统中的某个位置开始，然后递归搜索/删除它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:36:28.630

很简单：

```
for file in "$(grep -lir 'prefix' /path/)" ; do
    sed -ibk -e '/prefix/d' "$file"
done 
```

我们假设`grep -lir prefix /path/`返回一个以换行符分隔的文件名列表，并且您的前缀模式也是`sed`可以理解的。

我不需要在这里确定行号，因为我告诉`sed`要找到匹配的行`prefix`并直接删除它们。然而，该`for file in "$(grep ...)"`构造有点不安全，因为攻击者可以制作一个文件名，导致它做一些你意想不到的事情。最好说：

```
grep -lir 'prefix' /path/ --null | while IFS= read -r -d '' file ; do
    sed -ibk -e '/prefix/d' "$file"
done 
```

尽管请注意，在`while`循环主体中分配的变量将无法生存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T23:17:04.930

模式**区分大小写**。

```
grep -Zlr 'mystringprefix' /path/ | xargs -0 sed -i '/mystringprefix/d' 
```

# windows - 如何从命令提示符以管理员身份打开应用程序？

> ID：10009674
> 
> 赞同：2
> 
> 时间：2012-04-04T10:53:56.707
> 
> 标签：windows, command-prompt, cmd

从命令提示符以无头模式以管理员身份打开应用程序（可能是 .exe 文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:58:47.383

尝试[运行](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/runas.mspx?mfr=true)：

```
runas /user:Administrator program 
```

它将询问管理员的密码。

# c# - 如何过滤数据视图中的数据

> ID：10009675
> 
> 赞同：10
> 
> 时间：2012-04-04T10:53:58.510
> 
> 标签：c#, asp.net

我想过滤 listview 上 textchange 事件的数据，所以我使用 dataview 过滤数据。下面代码中的问题是，我在每个内部都使用 dataview，以便它只检查一个条件，即只有它需要的最后一个值，我想用 dataview 检查**s1**中的值，剩余的值应该与 listview 绑定。

例如：如果我在文本框中键入**一个**，它应该列出所有以 anandha kumar,anna 等值开头的项目值。假设我将值 anandha kumar 和 anna 保留在数组 s1 中。我应该在列表视图中列出所有其他值，除了数组值，如安东尼等。

```
protected void TextBox1_TextChanged(object sender, EventArgs e)
        {
            dvProducts = (DataView)Session["ListViewItems"];

            string serachText = EscapeLikeValue(TextBox1.Text);

            string lvValues = hdRetailCustomerGroup.Value;

            string trim = lvValues.Replace(" ", "");

            trim = trim.Replace("\r", "");

            trim = trim.Replace("\n", "");

            trim = trim.Replace("\t", "");
             string str = trim;

            string[] list = str.Split('|');

            foreach (string s1 in list)
            {
                if (s1 != string.Empty)
                {
                    dvProducts.RowFilter = "(CODE like '" + serachText + "*') AND (CODE <> '" + s1 + "')";
                    Session["ListViewItems"] = dvProducts;
                }
            }

                       ListView1.DataSource = dvProducts;
                     ListView1.DataBind();

        } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T11:02:34.903

```
DataView view = new DataView();
view.Table = DataSet1.Tables["Suppliers"];
view.RowFilter = "City = 'Berlin'";
view.RowStateFilter = DataViewRowState.ModifiedCurrent;
view.Sort = "CompanyName DESC";

// Simple-bind to a TextBox control
Text1.DataBindings.Add("Text", view, "CompanyName"); 
```

参考： [http ://www.csharp-examples.net/dataview-rowfilter/](http://www.csharp-examples.net/dataview-rowfilter/)

[http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataview.rowfilter.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T11:00:39.850

例如：

```
Datatable newTable =  new DataTable();

            foreach(string s1 in list)
            {
                if (s1 != string.Empty) {
                    dvProducts.RowFilter = "(CODE like '" + serachText + "*') AND (CODE <> '" + s1 + "')";
                    foreach(DataRow dr in dvProducts.ToTable().Rows)
                    {
                       newTable.ImportRow(dr);
                    }
                }
            }
ListView1.DataSource = newTable;
ListView1.DataBind(); 
```

# android - Android 设备将文本换行到屏幕宽度

> ID：10009677
> 
> 赞同：3
> 
> 时间：2012-04-04T10:54:06.847
> 
> 标签：android, html, newsletter

有没有办法阻止 android 移动设备将文本包装到屏幕宽度？

布局容器宽度被保留（表格，td's），但android坚持包装文本以适应屏幕宽度。

这是针对 html 时事通讯的，所以我需要一些东西来插入媒体查询，而没有任何东西

```
<head></head> 
```

标记，因为这将被邮件客户端剥离。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T17:16:10.473

**是的**！

您可以使用 CSS 代码“ *white-space: nowrap* ”轻松实现这一点。

您可以使用内联 CSS 防止在时事通讯/页面的某些部分进行换行：

```
style="white-space: nowrap" 
```

很容易哦？;)

希望这可以帮助。

# .htaccess - A 记录中的通配符条目无法解析为子域

> ID：10009678
> 
> 赞同：0
> 
> 时间：2012-04-04T10:54:12.490
> 
> 标签：.htaccess, hosting, subdomain

我在 parallels.com 上托管了一个站点，并为此设置了 Wild Card Entry。然而，当我在 xyz.mysite.com 访问子域时，它正在生成默认的 Parallels Plesk 面板页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:13:58.360

为主机设置通配符条目需要时间来传播。托管服务器说要等待 24-48 小时以查看是否正常运行。一天后，我的条目开始工作了。

# c# - 在 IQueryable 对象中列出

> ID：10009681
> 
> 赞同：4
> 
> 时间：2012-04-04T10:54:21.473
> 
> 标签：c#, linq, entity-framework, list, iqueryable

鉴于以下情况：

```
public class Person
{
  public int ID { get; set;}
  public string Name { get; set;}
  public IQueryable<Pet> Pets { get;set; }
}

public class Pet
{
  public int id { get; set; }
  public int OwnerId { get; set; }
  public string Name { get; set; }
}

public class SearchCriteria
{
  public string PersonName {get; set; }
  public List<string> PetNames {get; set;}
} 
```

在使用 IQueryable 进行搜索时实现对所有带有宠物的人员的选择

```
public List<Person> GetWithPets(SearchCriteria search)
{
     var people = (from p in context.People
                   where p.Name == search.PersonName
                   select new Person{
                          ID = p.ID,
                        Name = p.Name,
                        Pets = (from pt in context.Pets
                                where pt.OwnerId == p.ID
                                select new Pet {
                                   id = pt.ID,
                                 OwnerId = pt.OwnerId,
                                 Name = pt.Name
                                }).AsQueryable
                   }).AsQueryable();

       foreach(var str in search.PetNames)
       {
            people = people.Where(o=>o.Pets.Any(p=>p.Name == str));
       }
  return people.ToList();
} 
```

我的问题是，无论搜索名称的 foreach 是什么，在返回的人员列表中，即使有与该人关联的宠物，宠物也是空的，我哪里出错了？

**编辑：**

```
public class Person
{
    public int ID { get; set; }
    public string Name { get; set; }
    public IQueryable<Animal> Pets { get; set; }
}

public class Animal
{
    public int id { get; set; }
    public int? OwnerId { get; set; }
    public string Name { get; set; }
}

public class SearchCriteria
{
    public string PersonName { get; set; }
    public List<string> PetNames { get; set; }
}

class Program
{
    public static List<Person> GetWithPets(SearchCriteria search)
    {
        using (DatabaseEntities context = new DatabaseEntities())
        {
            var people = (from p in context.Peoples
                          where p.Name == search.PersonName
                          select new Person
                          {
                              ID = p.ID,
                              Name = p.Name,
                              Pets = (from pt in context.Pets
                                      where pt.OwnerID == p.ID
                                      select new Animal
                                      {
                                          id = pt.ID,
                                          OwnerId = pt.OwnerID,
                                          Name = pt.Name
                                      }).AsQueryable()
                          }).AsQueryable();

            foreach (var str in search.PetNames)
            {
                people = people.Where(o => o.Pets.Any(p => p.Name == str));
            }
            return people.ToList();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:46:59.427

*如果* `Person`和`Pet`是您的模型的实体，*如果* 是该实体`Person.Pets`的导航属性，*如果*您希望拥有包含所有完整实体的完整实体并参考您的评论...`Pet`*`Person``Pet`*

 *> 我的方法应该返回一个名字等于 search.PersonName & ALL 他们的宠物的人的列表，但只有那些在 search.PetNames 中拥有这些名字的宠物的人

...你可以使用这个：

```
public List<Person> GetWithPets(SearchCriteria search)
{
    var people = from p in context.People.Include("Pets")
                 where p.Name == search.PersonName
                    && p.Pets.Any(pt => search.PetNames.Contains(pt.Name))
                 select p;

    return people.ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:31:43.650

添加`AsQueryable()`到`Pets`收藏：

```
Pets = (from pt in context.Pets  
        where pt.OwnerId == p.ID  
        select new Pet {  
            id = pt.ID,  
            OwnerId = pt.OwnerId,  
            Name = pt.Name  
        }).AsQuerable() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:14:13.960

或者你可以尝试这样的事情

```
foreach(var str in search.PetNames)
       {
            people.Concat(people.Where(o=>o.Pets.Any(p=>p == str)).Include('Pet'));
       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:02:46.803

你可以试试这样的

```
var people = (from p in context.People
                   where p.Name == search.PersonName
                   select new Person{
                          ID = p.ID,
                        Name = p.Name,
                        Pets = (from pt in context.Pets
                                where pt.OwnerId == p.ID
                                select new Pet {
                                   id = pt.ID,
                                 OwnerId = pt.OwnerId,
                                 Name = pt.Name
                                })
                   }).Include("Pets").AsQueryable(); 
```*

# javascript - 在严格模式下复制 arguments.callee

> ID：10009682
> 
> 赞同：10
> 
> 时间：2012-04-04T10:54:21.857
> 
> 标签：javascript, function, scope, strict

我第一次在严格模式下工作，你知道吗，这也是多年来第一次能够使用非严格模式属性会很有用。我的[问题在这里](https://stackoverflow.com/questions/10008285/preventing-infinite-recursion-when-using-backbone-style-prototypal-inheritance/10009013#10009013)概述了我遇到的确切问题，但如果我仍然可以访问arguments.callee，我制定的解决方案可以适应更具可扩展性的东西。

在不命名函数的情况下，有什么方法可以在严格模式下获得对我当前范围内的函数的引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T11:00:21.463

> 在不命名函数的情况下，有什么方法可以在严格模式下获得对我当前范围内的函数的引用？

在 2012[年最初编写此答案](https://stackoverflow.com/revisions/10009764/2)时，您在链接解决方案中使用的命名函数表达式存在实现错误。现在还没有，自从带有这些错误的浏览器仍然大量流通以来已经有好**几年了。**因此，在（非常）后 IE8 世界中，您的命名函数表达式方法很好：

```
UsageGraph = Graph.extend({
   generateScale: function GS() {
       var parentMethod = this.constructor._super.generateScale;
       if(parentMethod === GS) {
           parentMethod = this.constructor._super.constructor._super.generateScale;
       }
       parentMethod.call(this); // run the parent's method
       //do additional stuff
   }
}); 
```

但问题是你是否可以避免拥有名字。在 2012 年，如果您真的不希望函数有名称，我的解决方案是将匿名函数分配给变量：

```
UsageGraph = Graph.extend(function(){
   var GS = function() {
       var parentMethod = this.constructor._super.generateScale;
       if(parentMethod === GS) {
           parentMethod = this.constructor._super.constructor._super.generateScale;
       }
       parentMethod.call(this); // run the parent's method
       //do additional stuff
   };

   return {generateScale: GS};
}()); 
```

但这不再起作用了；自 ES2015 以来，即使该函数也有一个名称，从它分配给的变量的名称推断：

```
var GS = function() { };
console.log(GS.name); // "GS"
```

如果你**真的**不希望它有名字，可以避免它，但你必须努力打破规范定义的自动命名，例如通过使函数成为另一个函数的返回值：

```
var GS = (() => function() { })();
console.log(GS.name); // ""
```

因此，如果避免使用名称很重要，您将执行以下操作：

```
UsageGraph = Graph.extend(function(){
   const generateScale = (() => function() {
       let parentMethod = this.constructor._super.generateScale;
       if(parentMethod === generateScale) {
           parentMethod = this.constructor._super.constructor._super.generateScale;
       }
       parentMethod.call(this); // run the parent's method
       //do additional stuff
   })();

   return {generateScale};
}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:56:56.020

是的，但不是......我不确定这是否与您所说的“命名”方式相同：

```
var foo = function bob() {
    // call bob();
}

// bob is undeclared; here it's foo! 
```

[http://jsfiddle.net/4y8pY/](http://jsfiddle.net/4y8pY/)

# android - 在android中播放iis流畅的流媒体（.ism）

> ID：10009691
> 
> 赞同：2
> 
> 时间：2012-04-04T10:54:58.157
> 
> 标签：android, video, stream, streaming, smooth

android设备是否支持播放iis流畅流（.ism）？

我正在尝试以这种格式播放视频流，并收到有关“错误参数”的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-30T22:58:48.213

实现这一点的一种方法是购买单独的播放器，例如 ViualOn。

另一个技巧是使用诸如 Universal Streaming 之类的 transmuxer 来制作适合 Android 的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:12:43.617

所以我会回答我的问题......答案是：不。

本机播放器（例如“VideoView”）不支持播放 iis 流畅流 (.ism)。

# eclipse-plugin - What are the alternatives of Zest in visualizing diagram?

> ID：10009693
> 
> 赞同：1
> 
> 时间：2012-04-04T10:55:06.907
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-gef, data-modeling, zest

I have a need to create a diagram viewer. There is hierarchical tree that I want to visualize in Eclipse plugin. I manage to know GEF, and there is Zest. But in Zest, I don't success in creating custom shape in graphic nodes and there is no tutorial to create the custom node (I have been searching all day). So I want to know if there are alternatives beside Zest. What I like most from Zest is it provides layouting algorithms.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:34:14.010

You can use [GraphViz](http://www.graphviz.org/) which is popular and has an [eclipse plugin](http://sourceforge.net/projects/eclipsegraphviz/). Note that I have never used it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:29:51.390

Do you need to edit that tree? If not, I would use the Zest framework.

[This](http://git.eclipse.org/c/gef/org.eclipse.zest.git/plain/org.eclipse.zest.examples/src/org/eclipse/zest/examples/swt/GraphSnippet4.java) might help you to create the custom shape.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T00:10:43.087

You need to have your LabelProvider implement the IFigureProvider interface, and override the getFigure method to return a custom IFigure implementation which draws your custom shape and has its colors set the way you want them.

However, there seems to be a bug in support for highlighting support for a custom node. The bug report gives a patch, and claims it has been fixed, but I don't see the fix appearing in current (4.3) version of the Eclipse plugins. I don't know why. (Does anybody else?) I made a copy of the plugin and patched it manually. Here is the bug:

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=335136](https://bugs.eclipse.org/bugs/show_bug.cgi?id=335136)

# excel - 如何根据列内容复制excel中的行？

> ID：10009699
> 
> 赞同：1
> 
> 时间：2012-04-04T10:55:48.587
> 
> 标签：excel, excel-2010, vba

我在excel表中有以下数据

```
r1 r2 r3 r4 r5
v1 v2 r3 r4 r5
x1 x2    r4 r5 
```

是否可以（以及如何）将此数据转换为如下结构：

```
r1 r2 r3
r1 r2 r4
r1 r2 r5
v1 v2 r3
v1 v2 r4
v1 v2 r5
x1 x2 r4
x1 x2 r5 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:14:57.377

这是你正在尝试的吗？

```
Sub Sample()
    Dim wsI As Worksheet, wsO As Worksheet
    Dim wsIlRow As Long, wsOlRow As Long, i As Long, j As Long

    Set wsI = Sheets("Sheet1")
    Set wsO = Sheets("Sheet2")

    wsIlRow = wsI.Range("A" & wsI.Rows.Count).End(xlUp).Row

    wsOlRow = 1

    For i = 1 To wsIlRow
        For j = 3 To 5
            If Len(Trim(wsI.Cells(i, j).Value)) <> 0 Then
                wsO.Range("A" & wsOlRow).Value = wsI.Range("A" & i).Value
                wsO.Range("B" & wsOlRow).Value = wsI.Range("B" & i).Value
                wsO.Range("C" & wsOlRow).Value = wsI.Cells(i, j).Value
                wsOlRow = wsOlRow + 1
            End If
        Next j
    Next i
End Sub 
```

**快照**

![在此处输入图像描述](../Images/d5057e1a4a0ec7976c9da1a65df15aee.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:27:49.400

此方法使用数组来避免范围循环。它转储从列 A:E 到 F:H 的范围

![在此处输入图像描述](../Images/f0c47de72d887d94739490ebc7d66097.png)

```
Sub MoveEM()
    Dim rng1 As Range
    Dim X
    Dim Y
    Dim lngRow As Long
    Dim lngCol As Long
    Dim lngCnt As Long
    Set rng1 = Range([a1], Cells(Rows.Count, "E").End(xlUp))
    X = rng1.Value2

    ReDim Y(1 To 3 * UBound(X, 1), 1 To 3)
    For lngRow = 1 To UBound(X, 1)
        For lngCol = 1 To 3
            lngCnt = lngCnt + 1
            Y(lngCnt, 1) = X(lngRow, 1)
            Y(lngCnt, 2) = X(lngRow, 2)
            Y(lngCnt, 3) = X(lngRow, 2 + lngCol)
        Next
    Next
   [f1].Resize(UBound(Y, 1), UBound(Y, 2)) = Y

   End Sub 
```

# installation - 在先决条件安装之前如何在 Wix 中显示欢迎消息？

> ID：10009701
> 
> 赞同：1
> 
> 时间：2012-04-04T10:56:06.387
> 
> 标签：installation, wix, windows-installer, wix3.5, prerequisites

我有一个 WiX 安装程序，它安装 .Net 4 和 SQL 作为先决条件。一切正常，但用户在单击 setup.exe 时首先看到的是 .net 4 的 EULA 协议，然后是每个先决条件的 EULA 列表。我的 Wix_Minimal 欢迎屏幕仅在先决条件完成后，即我的实际应用程序的 .msi 启动时才会弹出。

我希望一开始就显示一条欢迎信息，它解释了将要发生的事情。类似“欢迎使用 x 安装。安装程序现在将更新您的计算机。请同意以下许可协议”。

如何让 WiX 在安装开始时显示对话框或消息框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:27:31.340

这就是您正在使用的引导程序的行为。我建议查看 WiX 3.6 中的引导程序功能（名为 Burn），这将允许您按照您的要求进行操作。

请注意，在某些情况下，如果您的引导程序具有先决条件并且您需要引导引导程序，则您无法解决此问题。

# iphone - 在 tableHeaderView 中带有 UITextField 的 UITableview - canEditRowAtIndexPath 没有响应

> ID：10009702
> 
> 赞同：1
> 
> 时间：2012-04-04T10:56:10.833
> 
> 标签：iphone, uitableview, uitextfield

我`UITextfield`的`tableHeaderView`. 当我单击导航栏中的编辑按钮时，我可以编辑此文本字段，但无法编辑/移动下表的行。

如果我用 TextField 注释掉 tableHeaderView 我可以毫无问题地编辑行吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:31:16.637

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
    UITextField *txt = [[UITextField alloc] init];
    txt.text = @"header";
    txt.enabled =TableView.editing;
    return txt;
}

-(IBAction)buttonTap:(id)sender{
    if (TableView.editing) {
        TableView.editing = NO;
    }else TableView.editing = YES;
    [TableView reloadData];
} 
```

# java - 我的 Swing GUI 在哪个监视器面板中运行？

> ID：10009706
> 
> 赞同：1
> 
> 时间：2012-04-04T10:56:18.720
> 
> 标签：java, swing, graphics

我在多监视器环境中运行 Swing GUI。从 Main-GUI 我想打开第二个屏幕。如果主 GUI 已经在第二台监视器中运行，则新窗口应在第一台监视器中打开。

因此，我正在寻找获取当前主 GUI 运行的监视器 ID 的可能性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:01:13.427

[GraphicsEnvironment](http://docs.oracle.com/javase/6/docs/api/java/awt/GraphicsEnvironment.html)类在这里应该有所帮助。

A similar question has been answers [here](https://stackoverflow.com/questions/4627553/java-show-jframe-in-a-specific-screen-in-dual-monitor-configuration)。

很可能需要跟踪帧的位置（即用户拖动它们的位置），以便识别帧在任何给定时间点位于哪个屏幕上。这可以通过监视与屏幕相关的鼠标事件来完成，如此处[所述](https://stackoverflow.com/questions/1248386/how-do-i-determine-which-monitor-a-swing-mouse-event-occurs-in)。

# function - 从函数vbs返回变量

> ID：10009711
> 
> 赞同：1
> 
> 时间：2012-04-04T10:56:36.793
> 
> 标签：function, vbscript, wmi

几天来，我一直把头撞在墙上，无法弄清楚我的代码有什么问题。我敢肯定它相当简单，但就是看不到它。我正在尝试返回登录到机器的用户列表和时间。由于环境被锁定，我不得不阅读注册表。

```
Option Explicit
Const HKEY_LOCAL_MACHINE = &H80000002

Dim oNet, WMI, strComputer, tz, os, objRegistry, strKeyPath, strSubPath, strValueName, strValue, arrSubkeys, objSubKey, strSID, strUser, objReg, lngHighValue, lngLowValue, Return, strReturn, NanoSecs, DT
Set oNet = CreateObject("WScript.Network")
Set WMI = GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\cimv2")
strComputer = oNet.Computername

tz = 0
For Each os In GetObject("winmgmts:").InstancesOf ("Win32_OperatingSystem")
  tz = os.CurrentTimeZone
  Exit For  
Next

'Set objRegEx = CreateObject("VBScript.RegExp")
'objRegEx.Global = True   
'objRegEx.IgnoreCase = True
'objRegEx.Pattern = "default|all users|administrator|localservice|networkservice|ueit-admn-[0-9]|3rd-admn-[0-9]|systemprofile"

Set objRegistry=GetObject("winmgmts:\\" & _ 
    strComputer & "\root\default:StdRegProv")

strKeyPath = "SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList"
objRegistry.EnumKey HKEY_LOCAL_MACHINE, strKeyPath, arrSubkeys

For Each objSubkey In arrSubkeys
    strValueName = "ProfileImagePath"
    strSID = objSubKey
    strSubPath = strKeyPath & "\" & objSubkey
    objRegistry.GetExpandedStringValue HKEY_LOCAL_MACHINE,strSubPath,strValueName,strValue
    'strUser = Replace(strValue,"C:\Documents and Settings\","")
    'Set colMatches = objRegEx.Execute(strUser)
    'If colMatches.Count < 1 Then
    Call ProfileTime(strSID)
    'WScript.echo ProfileTime
    'End If
Next

Function ProfileTime(strSID)

Set objReg = GetObject("winmgmts:{impersonationLevel=impersonate}!\\.\root\default:StdRegProv"  )
strKeyPath = "SOFTWARE\MICROSOFT\Windows NT\CurrentVersion\ProfileList\" & strSID

strValueName = "ProfileLoadTimeHigh"
Return = objReg.GetDWORDValue(HKEY_LOCAL_MACHINE,strKeyPath,strValueName,lngHighValue)
strValueName = "ProfileLoadTimeLow"
Return = objReg.GetDWORDValue(HKEY_LOCAL_MACHINE,strKeyPath,strValueName,lngLowValue)
If typename(lngHighValue) <> "Null" then
  NanoSecs = (lngHighValue * 2 ^ 32 + lngLowValue)
  '' /* Returns time in Workstation Timezone */
  DT = #1/1/1601# + (NanoSecs / 600000000 / 1440) + (tz / 1440)
  Set ProfileTime = CDate(DT)
  End If
End Function 
```

运行上述返回

```
profile.vbs(36, 5) Microsoft VBScript runtime error: Wrong number of arguments or invalid property assignment: 'ProfileTime' 
```

有点失去了那一刻

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:55:17.757

1.  摆脱`on error resume next`, 直到你的错误得到解决。
2.  使用`Option Explicit`并声明所有变量。你会看到你有一些范围问题（例如 strReturn ）
3.  尝试弄清楚 VBScript 中的函数如何返回它的值。提示，不是`Return = "my return value"`
4.  需要调用一个函数，所以使用`Call ProfileTime(objsubkey)`. 否则，可以将其作为 Sub 处理，然后将其用作`ProfileTime objsubkey`. Using`ProfileTime(objsubkey)`意味着“在将 objsubkey 放入函数之前对其进行评估”。看看[这篇博客文章](http://automated-chaos.blogspot.com/2008/10/parenthesis-do-matter.html)它是如何工作的。

这些步骤将使您的代码更清晰，提示您出了什么问题。当错误发生时（=On error resume next）并期望它正常工作，您无法通过另一种方式创建代码。同样不尊重你的工人，不把他们放在适当的贷款名单上（=明确的选项，声明和范围）会让他们不服从你。

# python - 在谷歌应用引擎中，如何检查模型是否为空？

> ID：10009712
> 
> 赞同：2
> 
> 时间：2012-04-04T10:56:41.837
> 
> 标签：python, django, google-app-engine

我在使用 python 的谷歌应用引擎中有一个名为“客户”的模型：

```
class Customer(db.Model):
    name = db.StringProperty()
    age = db.IntegerProperty() 
```

在我创建客户模型的任何实例/对象之前，我想检查模型是否为空（没有创建对象），我在 Python 中尝试了一些类似的东西：

```
 customers = Customer.all()
 for customer in customers:
    if customer:
       logging.info("there is customer in Customer Model!")
    else:
       logging.info("The Customer Model is empty!")
 ........ 
```

当客户模型中没有实例/对象时，上面代码段中的“客户”不是“无”，而“客户中的客户：”行总是跳出来（意味着“客户”中没有任何东西？），任何想法? 另外，我可以在 Django 模板中检查这个吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:08:23.027

你可以使用 count()

```
 customers = Customer.all()  
 if customers.count(1):
    # do something 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:25:33.773

--**编辑：不要使用这个代码**--
这个代码比使用 count(1) 慢，我留下了一个不好的参考。

* * *

```
customers = Customer.all().get()
if customer:
  logging.info("there is customer in Customer Model!")
else:
  logging.info("The Customer Model is empty!") 
```

# tfs - 查找 TFS Shelveset 中的代码更改行数

> ID：10009713
> 
> 赞同：1
> 
> 时间：2012-04-04T10:56:49.070
> 
> 标签：tfs, shelveset

有没有办法在 TFS 搁置集中查找代码更改的行数（来自服务器中的最新版本）。我希望这用于代码审查目的，以找到特定搁置文件的总 ELOC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:23:10.853

您可以使用`tf diff`.

例如。

```
tf diff the.file /format:unified /version:c1000~c1001 
```

将显示更改集 1000 和 1001 之间指定文件上的差异，可以对其进行解析以计算更改的行（到您想要使用的任何定义，例如不计算仅空格更改）。

笔记：

*   有多种格式可供选择，有些可能更适合解析（[有关详细信息，请参阅帮助](http://msdn.microsoft.com/en-us/library/cc31bk2e.aspx)）。
*   您可以使用各种格式的版本（例如，当前工作区中的版本和最新版本）：再次查看帮助。

# iphone - Sharekit API：无法在 Facebook 墙上发布

> ID：10009721
> 
> 赞同：0
> 
> 时间：2012-04-04T10:57:23.780
> 
> 标签：iphone, objective-c, facebook, cocoa-touch, sharekit

在我的 iPad 应用程序中，

我已经用最新的 Share Kit SDK 代码配置了 Facebook。来自 GIT 中心

[Git Hub 最新的 Sharekit](https://github.com/ShareKit/ShareKit)

但是登录后出现错误。

```
**AN error occurred with App. Please try again later.

API Error Code: 100

API Error Description : Invalid parameter

Error Message : Requires valid redirect URL** 
```

我不知道该怎么办，请帮助我。

我可以成功登录，但是在发生此错误之后，任何人都遇到过这个问题。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:04:39.977

这是 [ShareKit 问题 #234](https://github.com/ideashower/ShareKit/issues/234)。

因此，与其使用第三方如 sharekit 或任何其他框架，不如使用`Facebook`可在 [http://developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)找到的原始框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:35:06.017

在这里你可以得到sharekit的源代码

[http://hemal.in/post/2012/03/30/IphoneiPad-Sharkit-implementation-works-with-iOS-4-5.aspx](http://hemal.in/post/2012/03/30/IphoneiPad-Sharkit-implementation-works-with-iOS-4-5.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:19:50.047

这里是sharekit demo的源代码，它可以正常工作

[http://mobile.tutsplus.com/tutorials/iphone/sharekit/](http://mobile.tutsplus.com/tutorials/iphone/sharekit/)

# python - Biopython（或一般的 Python）：使用 gi 标识符从大型 .fasta 文件中解析物种名称的最有效方法

> ID：10009722
> 
> 赞同：1
> 
> 时间：2012-04-04T10:57:26.923
> 
> 标签：python, search, biopython, large-data

我有一个大约 145000 个条目的 .fasta 文件（基本上是 .txt），其格式如下

```
>gi|393182|gb|AAA40101.1| cytokine [Mus musculus]
MDAKVVAVLALVLAALCISDGKPVSLSYRCPCRFFESHIARANVKHLKILNTPNCALQIVARLKNNNRQV
CIDPKLKWIQEYLEKALNKRLKM

>gi|378792467|pdb|3UNH|Y Chain Y, Mouse 20s Immunoproteasome
TTTLAFKFQHGVIVAVDSRATAGSYISSLRMNKVIEINPYLLGTMSGCAADCQYWERLLAKECRLYYLRN
GERISVSAASKLLSNMMLQYRGMGLSMGSMICGWDKKGPGLYYVDDNGTRLSGQMFSTGSGNTYAYGVMD
SGYRQDLSPEEAYDLGRRAIAYATHRDNYSGGVVNMYHMKEDGWVKVESSDVSDLLYKYGEAAL

>gi|378792462|pdb|3UNH|T Chain T, Mouse 20s Immunoproteasome
MSSIGTGYDLSASTFSPDGRVFQVEYAMKAVENSSTAIGIRCKDGVVFGVEKLVLSKLYEEGSNKRLFNV
DRHVGMAVAGLLADARSLADIAREEASNFRSNFGYNIPLKHLADRVAMYVHAYTLYSAVRPFGCSFMLGS
YSANDGAQLYMIDPSGVSYGYWGCAIGKARQAAKTEIEKLQMKEMTCRDVVKEVAKIIYIVHDEVKDKAF
ELELSWVGELTKGRHEIVPKDIREEAEKYAKESLKEEDESDDDNM 
```

1.  我有一个 gi 的列表（| 之后列出的第一个数字）。
2.  对于给定的测试，此列表的大小在 60 - 600 gi 之间变化
3.  我想返回一个包含这些 gi 各自物种的列表
4.  物种名称通常在第一个示例中看到（用方括号 [Mus musculus] 括起来）并不总是存在。
5.  顺序不是特别重要。

我一直在使用各种 BioPython 解析点点滴滴，但我认为由于搜索的大小它失败了。我希望这里有人知道更有效的方法？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T11:51:15.203

与其解析物种的不完全一致的 FASTA 标题行，不如提取 GI 编号，然后查找 NCBI 分类 ID，例如参见[http://lists.open-bio.org/pipermail/biopython/2009- June/005304.html](http://lists.open-bio.org/pipermail/biopython/2009-June/005304.html) - 您可以从出租车中获得物种名称、通用名称、血统等。请参阅[ftp://ftp.ncbi.nih.gov/pub/taxonomy/taxdump_readme.txt](ftp://ftp.ncbi.nih.gov/pub/taxonomy/taxdump_readme.txt)或者如果您更喜欢在线解决方案，Entrez Utilities (EUtils) 是另一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:21:10.560

如果没有数据可以试用，我建议最快的方法是将`gi`您想要的加载到集合中。然后用最少的处理量读取 fasta 文件以提取`gi`行中的 gi，然后如果 gi 在想要的集合中，则提取最后一个`|`分隔字段。

例如：

```
# assuming gi list is in a file, one per line
with open('lookup_list.txt','r') as f:
  wanted = set(x.strip() for x in f)

with open('data.fasta','r') as f:
  for line in f:
    if line and line[0] == '>':
      gi = line[4:line.find('|',4)]
      if gi in wanted:
        text = line[line.rfind('|')+1:] # Now process the text to extract species
        print text 
```

如何从描述字段中提取物种名称将取决于您找到的各种格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T11:29:10.170

真的，真的很天真的方法

```
with open('my.fasta') as fd:
    for line in fd:
        if line.startswith('>'):
            if '[' in line:
                gi=line.split('|')[1]
                name=line.split('[')[-1]
                print gi, name[:-2] 
```

对于上述内容，输出为：

```
393182 Mus musculus 
```

# javascript - Javascript全局变量范围/覆盖拼接

> ID：10009723
> 
> 赞同：1
> 
> 时间：2012-04-04T10:57:29.387
> 
> 标签：javascript, arrays, splice

我有一个我无法解决的问题，所以任何帮助将不胜感激。

*   在我的 scipt 的顶部，我声明了一个全局值（' `_raw`'）
*   （使用 jQuery）我做了一个 Ajax 调用，它返回 JSON 数组数据（我已经检查过，JSON 数据是正确的）
*   我接受这个 JSON 响应并将其分配给`_raw`
*   当我点击一个链接时，`_raw`被传递给一个函数，例如`function myFunction(dataArray)`，调用`myFunction(_raw)`
*   在这个函数中，根据一些标准，`dataArray`被拼接（即`dataArray.splice(2,1)`）
*   `dataArray`然后返回。

例如

```
var _raw;

// AJAX call sets RAW to an array e.g. Apple, Banana, Pear, Pineapple, Coconut, Raspberry

myFunction(dataArray){
  var data=dataArray;
  data.splice(2, 1);
  return data[0];
}

$('a').click(function(){

  result = myFunction(_raw);
  alert(result);
// First time this is run, returns 'Pear', however, second time, returns 'Coconut'- as if the splice is being performed on _raw as well as myArray/data...

}); 
```

*   我很欣赏上面有一些糟糕的代码，这更能说明问题

我遇到的问题是，据我所知，唯一的时间`_raw`是在 AJAX 调用期间设置的，但是，当调用函数 myFunction 时，通过`_raw`，拼接似乎也会影响`_raw`自身。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:01:35.993

数组是通过引用传递的，所以**不会**`var data = dataArray`复制数组。 因此，**修改**原始数组。 **[`data.splice(2,1)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice)**

 ****用于[`.slice(2,1)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)复制数组。
或者，由于您似乎想要**获取**第二个元素的值，请使用数字索引：

```
function myFunction(dataArray){
    return dataArray[2];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:02:39.873

`splice()`更改原始数组：请参阅[http://www.devcurry.com/2010/12/slice-and-splice-in-javascript.html](http://www.devcurry.com/2010/12/slice-and-splice-in-javascript.html)

> 与 slice() 不同，splice() 方法修改原始数组并返回一个新数组。

作为旁注，您实际上并不需要`_raw`作为参数传递，`myFunction()`因为它是一个全局变量，因此在任何地方都可见

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T11:05:21.040

在 JavaScript 中，数组总是通过引用传递，所以当你将它分配给数据变量时，你只是创建了一个指向 _raw 的指针，所有的操作都将在 _raw 上完成。

您需要克隆阵列。根据其中的内容以及它是否是多维的，您可能需要使用一种方法来按照[此处](https://stackoverflow.com/questions/565430/deep-copying-an-array-using-jquery)进行深层复制。****

# node.js - 获取快递请求中的多个变量

> ID：10009726
> 
> 赞同：1
> 
> 时间：2012-04-04T10:57:37.197
> 
> 标签：node.js, express

我的快递服务器有问题

```
app.get('/callback/:nation/:username/?:permalink', function(req, res)
            {
                nationurl = req.params.nation;
                username = req.params.username;
                storypermalink = req.params.permalink;

                console.log("nation: "+nation);
                console.log("username: "+username);
                console.log("permalink: "+permalink);
            }); 
```

因为**/?:**它拆分了用户名并且没有给出我的永久链接：

```
nation: poneyclub
username: j
permalink: hondoe 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T11:33:26.520

这是因为`?`是 Express 路由算法中的一个特殊字符。有关详细信息，请参阅[文档](http://expressjs.com/guide.html#routing)。

当您键入 URL Express 时，将`?`字符后面的所有内容视为查询。它应该是一个格式

```
?key1=value1&key2=value2&...&keyX=valueX 
```

并且可以使用`req.query`.

您可以在路由中使用自己的正则表达式更改此默认行为（有关详细信息，请再次参阅[文档](http://expressjs.com/guide.html#routing)）。

# c# - 如何在我的 asp.net 项目中显示 xml 文件？

> ID：10009727
> 
> 赞同：1
> 
> 时间：2012-04-04T10:57:37.580
> 
> 标签：c#, asp.net, xml, response

在 .Net Web 服务中，当您单击“调用”按钮时，会打开一个 XML 文件。

我有一个带有按钮的页面。我希望当我单击它时打开一个 XML 页面，就像 Web 服务页面一样。我编写了以下代码，但它不返回 XML 页面。我怎样才能做到这一点？

1）我在“http://mysite/default.aspx”

2）点击我的按钮

3) 使用 .Xml 扩展名打开此页面：“http://mysite/result.xml”

```
 Response.ClearHeaders();
 //Response.AppendHeader("content-disposition", "attachment;filename=result.xml");
 Response.AddHeader("content-type", "text/xml");
 Response.Write("aaaa");
 Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:13:14.667

您需要在响应中添加内容类型。

```
Response.Clear();
Response.ContentType = "text/xml";          
Response.Write("<?xml version=\"1.0\">");
//whatever you want
Response.End(); 
```

PS.content-disposition 将为您提供下载文件的“选项”（浏览器将下载文件，而不是将其发布到浏览器本身）；

```
Response.ContentType = "application/" + System.IO.Path.GetExtension(pathToFile).Substring(1).ToLower();
Response.AddHeader("content-disposition", "attachment; filename=" + HttpUtility.UrlEncode(System.IO.Path.GetFileName(pathToFile)));
Response.WriteFile(pathToFile);
Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:17:06.820

它编写代码`Response.Redirect("xmlfile.xml");`并按照您的预期显示 xml。

# html - 链接到不在网站根目录中的文件？

> ID：10009728
> 
> 赞同：0
> 
> 时间：2012-04-04T10:57:40.997
> 
> 标签：html, ubuntu, hyperlink

嗨希望有人能帮忙，我有以下小问题：

运行 2 个虚拟网站的 Ubuntu 服务器 64 位当前版本

文件夹结构

**site1**（此站点可用于网络）

/var/www/site1

**站点 2**（内联网）

/var/www/site2

/var/www/site2/pdf/order_pdf/（存储 .pdf 的文件夹）

因此，我尝试从 site1 链接到 site2 中包含的文件，其中包含以下内容：

```
<a href="../site2/pdf/prder_pdf/filename.pdf 
```

这似乎不起作用，希望有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:01:06.113

相对 URI 与基本*URI*相关，而不是 Web 服务器的文件系统。

如果您想链接到不同站点上的某些内容，则必须使用绝对 URI（例如`http://example.com/...`）或方案相对 URI（例如`//example.com/...`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:27:48.010

我将以下行添加到 site1 /etc/apache2/sites-available/default 文件的 Virtual hots 文件中

```
Alias /pdf /var/www/site2/pdf/Order_pdf 
```

现在正在发挥魅力。

# azure - 如何以编程方式获取我的 Azure 存储终结点 URL？

> ID：10009730
> 
> 赞同：2
> 
> 时间：2012-04-04T10:57:41.957
> 
> 标签：azure, azure-storage, azure-blob-storage

我对 Azure 还很陌生，我正在使用 Blob 存储来存储一些二进制图像，但我似乎无法弄清楚如何以编程方式获取我的 Azure 存储端点 URL？

我正在尝试渲染一些`<img>`使用模拟器在本地正确渲染的标签，或者在部署到我的实时 Azure 实例时。

因此，例如，如果我在本地启动我的网站，它将呈现为：

```
<img src="http://127.0.0.1:10000/devstoreaccount1/uploads/image.jpg" /> 
```

当部署到 Azure 时，它​​会呈现为：

```
<img src="http://example.blob.core.windows.net/uploads/image.jpg" /> 
```

显然，一种方法是将其作为设置存储在我的**ServiceConfiguration.Local.cscfg**和**ServiceConfiguration.Cloud.cscfg**文件中，但必须有一种方法可以以编程方式获取此值。

![在此处输入图像描述](../Images/e57902f64298b37241ced5e1cdfabac5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:09:49.683

您是正确的，您的连接字符串应该存储在您的配置中，并且您可以为本地和云设置不同的值。以编程方式，这很容易获得：

首先，确保在角色启动期间设置了配置设置发布者：

```
CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetter) => configSetter(RoleEnvironment.GetConfigurationSettingValue(configName))); 
```

现在只需检索您的存储帐户并提取 URL：

```
var storageAccount = CloudStorageAccount.FromConfigurationSetting("MyStorage");
var urlBase = storageAccount.BlobEndpoint; 
```

在这一点上，您的`IMG`标签将基于`urlBase`.

# jconsole - 当 java 应用程序使用的内存达到阈值时使用 jconsole 发送电子邮件通知

> ID：10009731
> 
> 赞同：0
> 
> 时间：2012-04-04T10:57:43.100
> 
> 标签：jconsole

我想要使​​用 jconsole 的电子邮件通知，当 java 应用程序使用超过给定的阈值内存时。是否可以通过 Jconsole 实现，如果可能的话，我该如何实现。有人可以举一些例子或线索吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:07:14.460

我认为您不能将 JConsole 用于此类任务，它只是 JMX 的 GUI。您应该使用特殊的监控工具，例如 Zabbix、Nagios 或其他[几十](http://en.wikipedia.org/wiki/Comparison_of_network_monitoring_systems)种。

# jquery - 我有一组定时图像，我想使用 jQuery 在它们之间淡入淡出

> ID：10009732
> 
> 赞同：0
> 
> 时间：2012-04-04T10:57:57.870
> 
> 标签：jquery, arrays, image, fadein, fadeout

这是我的脚本，它按预期工作，但通过使用 jQuery 淡入/淡出，我还想在图像之间淡入淡出，而不会对我的脚本进行太多更改。

```
<script language="JAVASCRIPT" type="text/javascript">

var ads = new Array();
    ads[1] = new Image ();
    ads[2] = new Image ();
    ads[3] = new Image ();
    ads[4] = new Image ();

        ads[1].src = "images/fender.jpg" ;
        ads[2].src = "images/gibson.jpg" ;
        ads[3].src = "images/marshall.jpg" ;
        ads[4].src = "images/laney.jpg" ;

var timing = new Array();
    timing[1] = 2500 ;
    timing[2] = 2500 ;
    timing[3] = 2500 ;
    timing[4] = 2500 ;

var sites = new Array();
    sites[1] = "http://www.fender.co.uk";
    sites[2] = "http://www2.gibson.com";
    sites[3] = "http://www.marshallamps.com";
    sites[4] = "http://www.laney.co.uk";

var adnumber = 0;
var totalAds = ads.length - 1;
var timerID = "";

function startBanner (){
    adnumber = 0;
    showAd();
    }   

function showAd() {
    if (document.images){
        if (document.myBanner.complete){
            adnumber++;
            (adnumber > totalAds) ? adnumber=1 : adnumber=adnumber;
            document.myBanner.src = ads[adnumber].src;
            }
            timerID = setTimeout("showAd()",timing[adnumber]);
        }
    }

function goSite(){
    clearTimeout(timerID);
    window.location.href = sites[adnumber];
    }
</script> 
```

一些指导会很棒，谢谢，Finbar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:30:37.130

[本教程](http://kaidez.com/tutorial-simple-jquery-fade-in-fade-out/)将指导您了解一些 jQuery 基础知识。

此外，该[`$.each()`方法](http://api.jquery.com/jQuery.each/)将帮助您在不丢失 jQ-zen 的情况下遍历数组。

# python - Django在不同的models.py文件中拆分模型给了我导入循环

> ID：10009734
> 
> 赞同：1
> 
> 时间：2012-04-04T10:58:04.670
> 
> 标签：python, django, django-models

我已将两个模型拆分为两个文件：

**网站.py**

```
class WebSite(models.Model):
    ...
    maintenance_page = ForeignKey(Page) 
```

**页面.py**

```
class Page(models.Model):
    ...
    website = ForeignKey(WebSite) 
```

当然，循环导入有问题。

我能做什么 ？简单的事情是将两个类组合在同一个文件中，但我不能这样做。

还有什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T11:12:54.637

```
class WebSite(models.Model):
    ...
    maintenance_page = ForeignKey('app_name.Page')

class Page(models.Model):
    ...
    website = ForeignKey('app_name.WebSite') 
```

# visual-studio-2008 - WSS3 - 创建后在 SPFieldType.DateTime 上设置默认值

> ID：10009736
> 
> 赞同：0
> 
> 时间：2012-04-04T10:58:21.177
> 
> 标签：visual-studio-2008, sharepoint-2007, moss, wss-3.0

我正在使用 WSS3 和 C# 创建站点，并且正在创建一个类以在创建列表后更改列表中的字段。我已经创建了一个没有默认值的 SPField.DateTime 类型，但升级后我需要默认为一周，即如果今天是 2012 年 4 月 4 日，则默认日期必须是 2012 年 11 月 4 日。我当前不起作用的代码如下：

//web 已经定义为当前的 web
lista.Fields["Fecha de Caducidad de la Noticia"].DefaultValue = DateTime.Today.AddDayss(7).ToString("d/m/yyyy");
lista.Fields["Fecha de Caducidad de la Noticia"].Update();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:48:59.367

试试[DefaultFormula](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfield.defaultformula%28v=office.12%29.aspx)：

```
SPField field = lista.Fields["Fecha de Caducidad de la Noticia"]
field.DefaultFormula = "=[Today]+7";
field.Update(); 
```

此外，`field`变量的使用也很重要。这不仅仅是方便的问题。SharePoint 中的项目集合通常在每次调用时重新加载。所以调用`lista.Fields["Fecha de Caducidad de la Noticia"].Update()`可能只会更新一个新的、未更改的字段版本。

# android - 带服务的安卓音乐播放器

> ID：10009737
> 
> 赞同：0
> 
> 时间：2012-04-04T10:58:22.553
> 
> 标签：android, android-service, android-notifications, android-music-player

我正在寻找一个用于学习目的的 android 音乐播放器的基本实现。我想要的只是一个带有服务和 oncompletionlistener 的音乐播放器，它会移动到下一个曲目和一个通知。但我还没有找到类似的东西。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-02T16:46:32.880

尝试这个：

```
//class
public class MusicPlayService extends Service {    
   //media player

    private MediaPlayer player;
    //song list
    private ArrayList<Song> songs;
    //current position
    private int songPosn;
    //binder
    private final IBinder musicBind = new MusicBinder(); //very important
    //title of current song
    private String songTitle="";
    private String songAlbumart="";
    private String songDuration="";
    //shuffle flag and random
    private boolean shuffle=false;
    private boolean ispaused=false;
    private Random rand;
    //todo pause music at time of call
    Notification mNotification;
    static RemoteViews mRemoteViews;
    public static int currentPos=0;
    NotificationManager mNotifiManager;
    public static final int NOTIFICATION_IDFOREGROUND_SERVICE=78945;
    public static final String ACTION_STOP="com.yourapp.ACTION_STOP";
    public static final String ACTION_PLAY="com.yourapp.ACTION_PLAY";
    public static final String ACTION_PAUSE="com.yourapp.ACTION_PAUSE";
    public static final String ACTION_RESUME="com.yourapp.ACTION_RESUME";
    public static final String ACTION_NEXT="com.yourapp.ACTION_NEXT";
    public static final String ACTION_PREV="com.yourapp.ACTION_PREV";
    int REQUEST_CODE_STOP=1111;
    int REQUEST_CODE_PAUSE=2222;
    int REQUEST_CODE_RESUME=3333;
    int REQUEST_CODE_NEXT=4444;
    int REQUEST_CODE_PREV=6666;
    int REQUEST_CODE_ACTVITY=5555;
    @Override
    public  void onCreate() {
        super.onCreate();
        //todo//see me
        mNotifiManager=(NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
        //initialize position
        songPosn=0;
        //random
        rand=new Random();
        //create player
        player = new MediaPlayer();
        player.setAudioStreamType(AudioManager.STREAM_MUSIC);
        //set listeners
        player.setOnPreparedListener(this);
        player.setOnCompletionListener(this);
        player.setOnErrorListener(this);

    }

    //pass song list
    public void setList(ArrayList<Song> theSongs){
        songs=theSongs;
    }
    //binder
    public class MusicBinder extends Binder {
        MusicPlayService getService() {
            return MusicPlayService.this;
        }
    }
    //activity will bind to service
    public IBinder onBind(Intent arg0) {
        return musicBind;
    }
    //release resources when unbind
    @Override
    public boolean onUnbind(Intent intent){
        //player.stop();
        //player.release();
        return false;
    }
    //set the song
    public void setSong(int songIndex){
        songPosn=songIndex;
    }
    //play a song
    public void playSong(){
        //play
        player.reset();
        //get song
        Song playSong = songs.get(songPosn);
        //get title
        songTitle=playSong.DISPLAY_NAME;
        songDuration=playSong.DURATION;
        songAlbumart=playSong.ALBUMART;
        //set the data source
        try{
            player.setDataSource(playSong.Path);
        }
        catch(Exception e){
            Log.e("MUSIC SERVICE", "Error setting data source", e);
        }
        player.prepareAsync(); //this will call onPrepared
    }
    @Override
    public void onPrepared(MediaPlayer mp) {
        //start playback
        mp.start();
        //notification
        showControllerInNotification(songTitle, songDuration,songAlbumart);
    }
    //playback methods
    public int getPosn(){
        return player.getCurrentPosition();
    }

    public int getDur(){
        return player.getDuration();
    }

    public boolean isPng(){
        return player.isPlaying();
    }

    public void pausePlayer(){
        player.pause();
    }
    public void stopPlayer(){
        player.stop();
    }

    public void seek(int posn){
        player.seekTo(posn);
    }
    public void go(){
        player.start();
    }

    //skip to previous track
    public void playPrev(){
        songPosn--;
        if(songPosn<0) songPosn=songs.size()-1;
        playSong();
    }

    //skip to next
    public void playNext(){
        if(shuffle){
            int newSong = songPosn;
            while(newSong==songPosn){
                newSong=rand.nextInt(songs.size());
            }
            songPosn=newSong;
        }
        else{
            songPosn++;
            if(songPosn>=songs.size()) songPosn=0;
        }
        playSong();
    }
    //toggle shuffle
    public void setShuffle(){
        if(shuffle) shuffle=false;
        else shuffle=true;
    }
    public int onStartCommand(Intent intent, int flags, int startId) {
        if (intent != null) {
            String action = intent.getAction();

            if (!TextUtils.isEmpty(action)) {
                if (action.equals(ACTION_PLAY)) {
                        ispaused=false;
                        playSong();

                }else if(action.equals(ACTION_PAUSE)) {
                    pausePlayer();
                    currentPos = getPosn();
                    ispaused=true;

                }else if(action.equals(ACTION_RESUME)) {
                    seek(currentPos);

                    ispaused=false;
                    go();

                }
                else if(action.equals(ACTION_STOP)) {
                    ispaused=false;
                    player.stop();
                    mNotifiManager.cancel(NOTIFICATION_IDFOREGROUND_SERVICE);
                }
                else if(action.equals(ACTION_NEXT)) {
                    ispaused=false;
                    playNext();
                }
                else if(action.equals(ACTION_PREV)) {
                    ispaused=false;
                    playPrev();
                }
            }
        }

        return super.onStartCommand(intent, flags, startId);

    }
    @Override
    public void onDestroy() {
        //player.stop();
        stopForeground(true);
    }
    @Override
    public void onLowMemory() {

    }
    private void showControllerInNotification(String title,String duration,String songAlbumart) {
        PendingIntent pendingIntent = null;
        Intent intent = null;

        //Inflate a remote view with a layout which you want to display in the notification bar.
        if (mRemoteViews == null) {
            mRemoteViews = new RemoteViews(getPackageName(),
                    R.layout.status_bar);
        }
        if(songAlbumart=="")
        mRemoteViews.setImageViewResource(R.id.status_bar_album_art,R.drawable.musicplayericon);
        else {
            //Drawable image = Drawable.createFromPath(songAlbumart);
            Bitmap bitmap = BitmapFactory.decodeFile(songAlbumart);
            mRemoteViews.setImageViewBitmap(R.id.status_bar_album_art, bitmap);
            //mRemoteViews.setImageViewResource(R.id.status_bar_album_art, image);
        }
        mRemoteViews.setTextViewText(R.id.status_bar_track_name, title);

        float dua= Float.valueOf(duration);
        dua=dua/60000;
        //mRemoteViews.setTextViewText(R.id.status_bar_progress_music, String.format("%.2f", dua));
        mRemoteViews.setImageViewResource(R.id.status_bar_playpause, R.drawable.apollo_holo_dark_pause);
        mRemoteViews.setImageViewResource(R.id.status_bar_next, R.drawable.apollo_holo_dark_next);
        //Define what you want to do after clicked the button in notification.
        //Here we launcher a service by an action named "ACTION_STOP" which will stop the music play.
        intent = new Intent(ACTION_STOP);
        pendingIntent = PendingIntent.getService(getApplicationContext(),
                REQUEST_CODE_STOP, intent,
                PendingIntent.FLAG_UPDATE_CURRENT);
        mRemoteViews.setOnClickPendingIntent(R.id.status_bar_collapse,
                pendingIntent);

        //mRemoteViews.setBackgroundColor(0x0000FF00);
        Intent intentpause = new Intent(ACTION_PAUSE);
        PendingIntent pendingIntentpause = PendingIntent.getService(getApplicationContext(),
                REQUEST_CODE_PAUSE, intentpause,
                PendingIntent.FLAG_UPDATE_CURRENT);
        mRemoteViews.setOnClickPendingIntent(R.id.status_bar_playpause,
                pendingIntentpause);

        Intent intentnext = new Intent(ACTION_NEXT);
        PendingIntent pendingIntentnext = PendingIntent.getService(getApplicationContext(),
                REQUEST_CODE_NEXT, intentnext,
                PendingIntent.FLAG_UPDATE_CURRENT);
        mRemoteViews.setOnClickPendingIntent(R.id.status_bar_next,
                pendingIntentnext);

        Intent intentprev = new Intent(ACTION_PREV);
        PendingIntent pendingIntentprev = PendingIntent.getService(getApplicationContext(),
                REQUEST_CODE_PREV, intentprev,
                PendingIntent.FLAG_UPDATE_CURRENT);
        mRemoteViews.setOnClickPendingIntent(R.id.status_bar_prev,
                pendingIntentprev);

        Intent intentactivity=new Intent(getApplicationContext(),ListMusic.class);
        PendingIntent pendingIntentActivity = PendingIntent.getActivity(getApplicationContext(),
                REQUEST_CODE_ACTVITY, intentactivity,
                PendingIntent.FLAG_UPDATE_CURRENT);
        //Create the notification instance.
        mNotification = new NotificationCompat.Builder(getApplicationContext())
                .setSmallIcon(R.drawable.notificationimage)
                .setOngoing(true)
                .setWhen(System.currentTimeMillis())
                .setContentIntent(pendingIntentActivity)
                .setContent(mRemoteViews)
                .build();
        //mNotification.bigContentView=mRemoteViews;
        //Show the notification in the notification bar.

        mNotifiManager.notify(NOTIFICATION_IDFOREGROUND_SERVICE, mNotification);
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
        //check if playback has reached the end of a track
        if(player.getCurrentPosition()>0){
            mp.reset();
            playNext();
            Log.e("MUSIC PLAYER", "Staring Next Song:"+songTitle);
        }
    }

    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) {
        Log.e("MUSIC PLAYER", "Playback Error");
        mp.reset();
        return false;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:03:20.807

试试这个代码

```
VideoView videoView = (VideoView)findViewById(R.id.myvideoview);

             videoView.setOnCompletionListener(this);//checks when end

             File path = new File(mPath + "/" + "your file name");

             videoView.setVideoPath(path.getAbsolutePath());
             MediaController mediaController = new MediaController(this);
             mediaController.setMediaPlayer(videoView);
             mediaController.setAnchorView(videoView);

             videoView.setMediaController(mediaController);
             videoView.requestFocus();
             videoView.start(); 
```

有关更多信息，请参见 [http://www.vogella.de/articles/AndroidMedia/article.html](http://www.vogella.de/articles/AndroidMedia/article.html)

# haskell - 在haskell中查找二叉树中变量的出现次数

> ID：10009741
> 
> 赞同：1
> 
> 时间：2012-04-04T10:58:54.537
> 
> 标签：haskell, binary-tree

我想在任何树中找到某个数字的出现次数。这是我的代码，但它给出了一个错误，我无法找到它发生的原因。

```
data Tree a = Empty | Node (a ,Tree a,Tree a) deriving (Show)

occurst _ Empty = 0     -- this line occurs error
occurst a ( Node (x,left,right) ) = if x==Empty then 0
            else if a==x then 1 + (occurst a left) + (occurst a right)
            else (occurst a left) + (occurst a right)  

j=let t = Node (3 , Node (2 , Node (1 , Empty , Empty ) , Node (1 , Empty , Empty )),Node     (1 , Node (2 , Node (1 , Empty , Empty ) , Node (1 , Empty , Empty )),Node    (1,Empty,Empty)))  
  in occurst 1 t 
```

错误信息是：

```
ERROR "treeExample.hs":95 - Cannot infer instance
*** Instance   : Eq (Tree a)
*** Expression : occurst 
```

输入输出必须是：

```
occurst 1 t -> 6
occurst 2 t -> 2
occurst 3 t ->1
occurst 4 t ->0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:21:00.620

您可以非常简洁地编写函数：

```
occurst _ Empty = 0   
occurst a ( Node (x,left,right) ) = 
   fromEnum (x==a) + (occurst a left) + (occurst a right) 
```

`fromEnum`将 an 转换`Enum`为 an `Int`，幸运的是不仅`Bool`实际上是 an `Enum`，而且`False`映射到 0 和`True`1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:15:37.423

该行有一个错误

```
occurst a ( Node (x,left,right) ) = if x==Empty then 0 
```

你说那`x`是`Tree`……真的不知道这`if`是为了什么

这将按预期工作：

```
data Tree a = Empty | Node (a ,Tree a,Tree a) deriving (Show, Eq)

occurst _ Empty = 0
occurst a ( Node (x,left,right) ) =
            if a==x then 1 + (occurst a left) + (occurst a right)
            else (occurst a left) + (occurst a right) 
```

顺便说一句：我没有改变你的命名也没有改变你的基本算法，但请注意这个不是非常友好的堆栈，因为它不是尾递归的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T15:33:25.687

这是一个尾递归版本：

```
data Tree a = Empty | Node a (Tree a) (Tree a) deriving (Show)

occurst x t = go 0 [t] where
  go n [] = n
  go n (t:ts) = case t of
                  Empty      -> go n ts
                  Node a l r -> let n' = n + fromEnum (a==x)
                                in n' `seq` go n' (l:r:ts)

j = occurst 1 t where
  t = (Node 3
        (Node 2
          (Node 1 Empty Empty)
          (Node 1 Empty Empty ))
        (Node 1
          (Node 2
            (Node 1 Empty Empty)
            (Node 1 Empty Empty))
          (Node 1 Empty Empty))) 
```

# gwt - 如何在 SmartGWT 中的 DateItem 的弹出选择器上将一周的第一天更改为星期一？

> ID：10009747
> 
> 赞同：1
> 
> 时间：2012-04-04T10:59:15.170
> 
> 标签：gwt, date, calendar, smartgwt

我注意到[DateChooser](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/DateChooser.html)有 method `setFirstDayOfWeek(int)`，但由于 DateChooser 没有扩展 FormItem，我不能在我的 DynamicForm 中使用它而不是[DateItem](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/form/fields/DateItem.html)。

所以，我的问题是，如何使弹出窗口中的日历组件将星期一显示为一周的第一天？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T06:25:03.123

当您想使用不是`FormItem`您的情况的子类的小部件时，`DateChooser`您可以使用`CanvasItem`可以添加到您的 dynamicForm 的小部件并将其添加`DateChooser`为 this 的成员`CanvasItem`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T17:32:07.027

我对 Smart GWT 不熟悉，但假设 DateChooser 项基于本机 GWT 日期小部件，您可以通过设置应用程序的语言环境来更改其行为。将以下两行添加到我的 [Application name].gwt.xml 文件（就在“inherits”行下方）将这些小部件更改为显示周日至周六。我相信默认的语言环境是“en”，它使用的是周一至周日的周（尽管对你来说似乎相反）。

```
<extend-property name="locale" values="en_US"/>
<set-property name="locale" value="en_US"/> 
```

# html - 隐藏文本上的背景图像不利于可访问性？

> ID：10009751
> 
> 赞同：1
> 
> 时间：2012-04-04T10:59:32.737
> 
> 标签：html, css, accessibility

我需要为我的菜单显示文本图像而不是实际文本。

我在每个菜单链接中放置了一个跨度。这些跨度有一个设置的高度和宽度，设置为显示块，文本负缩进隐藏，背景图像设置为我要使用的图像。

```
<li>
  <a href="site.com/page1">
    <span id="menu1"> 
      Link Text
    </span>
  </a> 
</li> 
```

这在跨浏览器上运行良好。当我放大和缩小页面时，它也可以正常工作。是否有任何不明显的可访问性问题，例如对于屏幕阅读器？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T15:27:34.413

**屏幕阅读器**：他们的用户（盲人和一些视力不佳的人）会很好，因为文本不在视口范围内，但没有被隐藏，`display: none;`所以`visibility: hidden;`仍然可以阅读。

**[高对比度模式](http://webaim.org/blog/high-contrast/)**：在 Windows 上，此模式隐藏背景图像并使用自定义颜色显示内容。CSS 仍然处于激活状态，因此文本在视觉上是隐藏的，但背景图像消失了：对于许多视力不佳的用户来说，您的菜单消失了。

由于某种原因或其他原因，图像未加载，无论是否选择：只要 CSS 仍然处于活动状态，就与高对比度模式存在相同的问题。

编辑：Chris Coyer 在此处描述了许多技术以及利弊：http: [//css-tricks.com/css-image-replacement/](http://css-tricks.com/css-image-replacement/)。
虽然最容易使用的是*当您真正想要使用的是带有 alt 的 HTML 图像时，不要使用背景图像*:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:04:59.573

是的，因为`background`屏幕阅读器不会读取 css，而且它对您的 SEO 不利。您可以做的是，在此处使用文本，然后将其隐藏：

```
text-indent, opacity:0 
```

!!!我不确定它是否被认为是黑帽搜索引擎优化，因为你只是在写一些已经存在的东西！！！

# python - Python - 处理混合编码文件

> ID：10009753
> 
> 赞同：19
> 
> 时间：2012-04-04T10:59:33.943
> 
> 标签：python, unicode, encoding, utf-8, windows-1252

我有一个主要是 UTF-8 的文件，但也有一些 Windows-1252 字符可以进入。

我创建了一个表来将 Windows-1252 (cp1252) 字符映射到它们的 Unicode 对应字符，并想用它来修复错误编码的字符，例如

```
cp1252_to_unicode = {
    "\x85": u'\u2026', # …
    "\x91": u'\u2018', # ‘
    "\x92": u'\u2019', # ’
    "\x93": u'\u201c', # “
    "\x94": u'\u201d', # ”
    "\x97": u'\u2014'  # —
}

for l in open('file.txt'):
    for c, u in cp1252_to_unicode.items():
        l = l.replace(c, u) 
```

但是尝试以这种方式进行替换会导致引发 UnicodeDecodeError，例如：

```
"\x85".replace("\x85", u'\u2026')
UnicodeDecodeError: 'ascii' codec can't decode byte 0x85 in position 0: ordinal not in range(128) 
```

关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-04T11:16:44.210

如果您尝试将此字符串解码为 utf-8，如您所知，您将收到“UnicodeDecode”错误，因为这些虚假的 cp1252 字符是无效的 utf-8 -

但是，Python 编解码器允许您使用 codecs.register_error 函数注册[回调以处理编码/解码](http://docs.python.org/library/codecs.html#codecs.register_error)错误 - 它获取 UnicodeDecodeerror aa 参数 - 您可以编写这样的处理程序来尝试将数据解码为“cp1252”，并且继续以 utf-8 解码字符串的其余部分。

在我的 utf-8 终端中，我可以构建一个混合的错误字符串，如下所示：

```
>>> a = u"maçã ".encode("utf-8") + u"maçã ".encode("cp1252")
>>> print a
maçã ma�� 
>>> a.decode("utf-8")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode bytes in position 9-11: invalid data 
```

我在这里写了上述回调函数，发现了一个问题：即使你将解码字符串的位置加 1，这样它就会从下一个字符开始，如果下一个字符也不是 utf-8 并且 out对于范围（128），错误在第一个超出范围（128）字符时引发 - 这意味着，如果发现连续的非 ascii、非 utf-8 字符，则解码“后退”。

这一轮的工作是在error_handler中有一个状态变量，它检测到这个“走回”并从最后一次调用它恢复解码 - 在这个简短的例子中，我将它实现为一个全局变量 - （它必须手动在每次调用解码器之前重置为“-1”）：

```
import codecs

last_position = -1

def mixed_decoder(unicode_error):
    global last_position
    string = unicode_error[1]
    position = unicode_error.start
    if position <= last_position:
        position = last_position + 1
    last_position = position
    new_char = string[position].decode("cp1252")
    #new_char = u"_"
    return new_char, position + 1

codecs.register_error("mixed", mixed_decoder) 
```

在控制台上：

```
>>> a = u"maçã ".encode("utf-8") + u"maçã ".encode("cp1252")
>>> last_position = -1
>>> print a.decode("utf-8", "mixed")
maçã maçã 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-21T17:38:41.607

多亏了 jsbueno 以及其他谷歌搜索和其他冲击，我以这种方式解决了它。

```
#The following works very well but it does not allow for any attempts to FIX the data.
xmlText = unicode(xmlText, errors='replace').replace(u"\uFFFD", "?") 
```

此版本允许修复无效字符的机会有限。未知字符被替换为安全值。

```
import codecs    
replacement = {
   '85' : '...',           # u'\u2026' ... character.
   '96' : '-',             # u'\u2013' en-dash
   '97' : '-',             # u'\u2014' em-dash
   '91' : "'",             # u'\u2018' left single quote
   '92' : "'",             # u'\u2019' right single quote
   '93' : '"',             # u'\u201C' left double quote
   '94' : '"',             # u'\u201D' right double quote
   '95' : "*"              # u'\u2022' bullet
}

#This is is more complex but allows for the data to be fixed.
def mixed_decoder(unicodeError):
    errStr = unicodeError[1]
    errLen = unicodeError.end - unicodeError.start
    nextPosition = unicodeError.start + errLen
    errHex = errStr[unicodeError.start:unicodeError.end].encode('hex')
    if errHex in replacement:
        return u'%s' % replacement[errHex], nextPosition
    return u'%s' % errHex, nextPosition   # Comment this line out to get a question mark
    return u'?', nextPosition

codecs.register_error("mixed", mixed_decoder)

xmlText = xmlText.decode("utf-8", "mixed") 
```

基本上我试图把它变成utf8。对于任何失败的字符，我只需将其转换为 HEX，这样我就可以在自己的表格中显示或查找它。

这并不漂亮，但它确实让我能够理解混乱的数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-05T17:36:11.953

@jsbueno 的好解决方案，但不需要全局变量`last_position`，请参阅：

```
def mixed_decoder(error: UnicodeError) -> (str, int):
     bs: bytes = error.object[error.start: error.end]
     return bs.decode("cp1252"), error.start + 1

import codecs
codecs.register_error("mixed", mixed_decoder)

a = "maçã".encode("utf-8") + "maçã".encode("cp1252")
# a = b"ma\xc3\xa7\xc3\xa3ma\xe7\xe3"

s = a.decode("utf-8", "mixed")
# s = "maçãmaçã" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-05T01:24:56.820

这通常称为[Mojibake](https://en.wikipedia.org/wiki/Mojibake)。

有一个不错的 Python 库可以为您解决这些问题，称为[ftfy](https://ftfy.readthedocs.io/en/latest/)。

例子：

```
>>> from ftfy import fix_text
>>> fix_text("Ð¨ÐµÐ¿Ð¾Ñ (Ð½Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°Ð»ÐºÐ¸)")
'Шепот (напоминалки)' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-18T14:28:23.217

今天刚刚进入这个，所以这是我的问题和我自己的解决方案：

```
original_string = 'Notifica\xe7\xe3o de Emiss\xe3o de Nota Fiscal Eletr\xf4nica.'

def mixed_decoding(s):
    output = ''
    ii = 0
    for c in s:
        if ii <= len(s)-1:
            if s[ii] == '\\' and s[ii+1] == 'x':
                b = s[ii:ii+4].encode('ascii').decode('unicode-escape')
                output = output+b
                ii += 3
            else:
                output = output+s[ii]
        ii += 1
    print(output)
    return output

decoded_string = mixed_decoding(original_string) 
```

现在它打印：
>>> Notificação de Emissão de Nota Fiscal Eletrônica。

# wordpress - 每个类别的自定义类别链接

> ID：10009758
> 
> 赞同：0
> 
> 时间：2012-04-04T10:59:51.513
> 
> 标签：wordpress, seo, hyperlink

在每篇博文的标题下方，我还会显示指向博文所在类别的链接。这些链接具有标准的 /category/ 语法。

出于 SEO 的目的，我还设置了一些登录页面，其中列出了一个类别中的所有博客文章，但这些页面有自定义 URL。我的问题是......我如何让 Wordpress 显示这些链接（指向自定义类别页面的链接）而不是标准的 /category/ 链接。基本上我想告诉 Wordpress 他需要为每个类别使用的自定义链接

PS 我不只是想 301 重定向它们，因为我也有兴趣在链接后面显示自定义 URL，而不仅仅是让访问者访问页面。

谢谢！

* * *

自己解决：第 1 步使用像 Decategorizer 这样的插件从每个永久链接中删除 /category/ 第 2 步修改 wordpress 类别面板中的 slug 以匹配登录页面的自定义 url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:16:57.347

如果您希望自定义永久链接成为默认值，那么您应该更改您的类别永久链接。如果您希望自定义页面成为默认页面，那么您应该自定义您的类别页面（您可以使用 category-$slug.php 文件，或者您可以从 category.php 打开自定义页面）

# c++ - C++ - 检查 TCHAR 数组是否为空

> ID：10009759
> 
> 赞同：1
> 
> 时间：2012-04-04T10:59:52.893
> 
> 标签：c++, arrays

我知道这个问题可能与其他一些问题重复，但我想在进行此更改之前确保我是正确的，所以无论如何我都会在这里问。在我维护的一个旧项目中，有这行代码：

```
TCHAR m_sLogPath[MAX_LOGPATH_LEN]; 
```

有一行代码在其中初始化和使用了数组，但过了一会儿，就会进行以下检查：

```
if(NULL== m_sLogPath || _tcsicmp(m_sLogPath, trace_path)!=0){//code here} 
```

我猜这个 if 语句正在检查 m_sLogPath 是否为空，但是 NULL== m_sLogPath 是一个毫无意义的检查，因为将数组与 NULL 进行比较是没有意义的。我将不得不删除 NULL== m_sLogPath peice，我的问题是应该去那里检查数组是否为空？感谢所有的回答和帮助，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T11:03:17.747

你是对的，如果在相同的上下文中完成，那是一个毫无意义的检查。

如果将它作为参数传递给函数，则数组会衰减为指针，它并不是那么毫无意义。

> 应该去那里检查数组是否为空

好吧，数组永远不会为空。它将始终包含`MAX_LOGPATH_LEN` `TCHAR`s。但是以下方法可以解决问题：

```
if( m_sLogPath[0] == _T('\0') || _tcsicmp(m_sLogPath, trace_path)!=0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T11:06:55.233

该`m_sLogPath`数组始终包含`MAX_LOGPATH_LEN`字符。假设它`MAX_LOGPATH_LEN`是一个大于 0 的常数，那么数组永远不会是空的。

我猜你真正想要检查的是存储在这个数组中的 C 风格的字符串是否为空。如果是这种情况，那么最简单的方法是：

```
#include <tchar.h>
#include <windows.h>

const size_t MAX_LOGPATH_LEN = MAX_PATH;
TCHAR m_sLogPath[MAX_LOGPATH_LEN];

int main()
{
    if (m_sLogPath[0] == _T('\0'))
    {
        // m_sLogPath contains empty string.
    }
} 
```

# c# - C# 从数据网格创建表（只有 2 个字段）

> ID：10009761
> 
> 赞同：-1
> 
> 时间：2012-04-04T11:00:00.290
> 
> 标签：c#, datagridview, datatable

但找不到任何信息。时间有限。

我有一个 Datagridview，6 个字段。

我需要制作一个仅包含其中 2 个字段的数据表。

字段是部分和帕累托。

所以我需要所有记录，但只需要我的数据表中的 2 个字段。

使用 c sharp .net 4.0 和 Microsoft Visual Studio 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:05:25.867

```
DataGridViewRowCollection coll = dataGridView1.Rows; 

DataTable t = new DataTable(); 

t.Columns.Add(); 

foreach (DataGridViewRow item in coll) 

{
     t.Rows.Add(item.Cells[0].Value);
} 
```

只需从每一行添加您想要的单元格。您需要做的就是过滤列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:07:33.210

```
foreach( DataGridViewRow row in myDataGridView.Rows)
{
      DataRow tableRow = myDataTable.NewRow();
      tableRow.Cells["part"].value = row["part"].value;
      tableRow.Cells["pareto"].value = row["pareto"].value;
      myDataTable.Rows.Add(tableRow);
} 
```

像这样的事情应该这样做。只需确保您的 DataTable 具有适当的行。

# jquery - ZK 框架：resize 事件和 jquery

> ID：10009763
> 
> 赞同：0
> 
> 时间：2012-04-04T11:00:04.763
> 
> 标签：jquery, autoresize, zk

我在我的网络上使用 ZK 框架，我有以下问题。

我有一个图像在调整浏览器大小时会改变其位置。我通过以下方式控制位置：

```
<script>
$(window).resize(function() { 

...........

image.css("top", puntoY); 
image.css("left", puntoX);

});
</script> 
```

它只在我释放鼠标按钮时改变它的位置，而不是在我移动鼠标时改变它的位置，有没有办法让它平稳？我的意思是，发送事件虽然我没有释放鼠标按钮？

另一个问题是，当我大幅调整浏览器大小时，事件不会发送，所以我的图像不会移动。问题出在哪里？

我写我的 .zul 代码

```
<window sizable="true" height="100%" width="100%" sclass="window">
    <vbox hflex="1" vflex="1">

       <cell hflex="1" vflex="1">
        ...
       </cell>

       <cell hflex="1" vflex="2" valign="middle">
        ....    
       </cell>
       <cell hflex="1">
        ...
       </cell>
       <cell hflex="1" vflex="1">
        ....
        </cell>
    </vbox>
</window> 
```

先谢谢了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T05:54:14.830

您需要捕获拖动事件，这里有一个链接，用演示说明了这一切。 [http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx](http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx)

# c# - Entity Framework 4.1 Code First 和 Oracle CLOB

> ID：10009769
> 
> 赞同：3
> 
> 时间：2012-04-04T11:00:43.803
> 
> 标签：c#, oracle, model-view-controller, ef-code-first, clob

目前我有一个这样的代码优先模型：

```
public class Ticket
{
    public int SERIAL_NO { get; set; }
    public DateTime SUBMIT_DATE { get; set; }
    public string SYNOPSIS { get; set; }
    public string DESCRIPTION { get; set; } // This is really an Oracle CLOB in the DB
} 
```

在工单控制器中，当用户单击提交时，我让它从数据库中选择最大 SERIAL_NO，如下所示：

```
var lastSerial = db.Tickets.Select(x => x.SERIAL_NO).Max(); 
```

它抛出这个错误：

```
ORA-00932: inconsistent datatypes: expected - got NCLOB 
```

有人有想法么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:32:46.470

查询的原始问题（出现 ORA-00932 错误）是因为当 SELECT 列表包含具有大（例如 CLOB）数据类型的字段时，您不能使用 DISTINCT。您生成的 SQL 是否包含 DISTINCT 子句并返回DESCRIPTION 字段？

它认为，一个 CLOB 可能包含 GB 的数据，仅返回它的不同列可能意味着将每个单独列上的 GB 与结果集中的 GB 或所有其他列进行比较。

我猜其他聚合函数也会失败（最小值，最大值），以及出于同样的原因按顺序使用 CLOB 列。由于这是一个老问题，而且我给出的提示通常可以解决大多数编码人员的“头疼”问题，因此我不会在 SQL 参考中查找相关点。那些需要详细信息的人现在知道在哪里寻找（或寻找什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:54:17.770

ODP.NET 的最新版本（在撰写本文时）是 11.2.0.3

遗憾的是，此版本尚不支持 Code First（请参阅[Oracle® Data Provider for .NET Developer's Guide](http://docs.oracle.com/cd/E11882_01/win.112/e18754/featLINQ.htm)以获取参考）

> 支持实体框架 4.1。但是，目前不支持作为 Entity Framework 4.1 一部分的 Code First 功能。

如果您愿意付费，[DevArt 声称他们的提供商支持 Code-First](http://www.devart.com/blogs/dotconnect/index.php/entity-framework-code-first-support-for-oracle-mysql-postgresql-and-sqlite.html)。他们提供免费试用，因此您可以查看。

另一种选择是使用 EDM Designer 生成代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-15T14:02:09.923

在列的映射中

```
.HasColumnType("CLOB") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T14:09:32.307

在您的模型上，添加属性 [StringLength(100)]

# ruby-on-rails - 这个rails代码有什么作用？

> ID：10009770
> 
> 赞同：-4
> 
> 时间：2012-04-04T11:00:56.517
> 
> 标签：ruby-on-rails, redmine

这段代码会做什么？

在这段代码中使用 collect 的目的是什么？

如果不使用 collect 方法会发生什么？

```
<%= select_tag(isTemplate ? '__template__time_entry[][project_id]' : 'time_entry[][project_id]', 
               options_for_select(@projects.collect{|p| [ p.name, p.id ] }, 
                                 :selected =>  entry.nil? ? 0 : entry.project_id), 
               :onchange => 'projectChanged(this,' + @row.to_s() + ')', 
               :style=> 'width:150px' ) %> 
```

当我执行此操作时，会显示错误“未定义的方法收集”。我在 linux 上使用 redmine0.8.2 和 rails2.0.2。这是我的一个插件中的一些代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:46:42.173

此代码显示带有选项的选择输入。

您的错误可能是由于`@projects`是 nil 且未定义。您尝试收集哪个是 Array 或 Hash 的方法，而您的变量是 nil。

您必须在控制器中使用数组或哈希定义它，但可能使用包含 Project 对象的数组。

# math - 将 3D 位置转换为 2D 屏幕点。(XYZ => XY)

> ID：10009771
> 
> 赞同：2
> 
> 时间：2012-04-04T11:00:59.147
> 
> 标签：math, 3d, location, point

我想知道如何将位置（XYZ）转换为屏幕上的点（XY）。

我有一个玩家（你控制的玩家）在 (XYZ) 坐标中，另一个玩家也在 (XYZ) 坐标中。

我怎样才能在屏幕上将其他玩家的 XYZ 转换为 XY，以便我可以使用 X Y 在他/它上面画一个名字。

希望这是有道理的...

编辑：

这是我的 gluProject 代码：

```
IntBuffer viewport = GLAllocation.createDirectIntBuffer(16);
FloatBuffer modelview = GLAllocation.createDirectFloatBuffer(16);
FloatBuffer projection = GLAllocation.createDirectFloatBuffer(16);
FloatBuffer objectCoords = GLAllocation.createDirectFloatBuffer(3);
GL11.glGetFloat(GL11.GL_MODELVIEW_MATRIX, modelview);
GL11.glGetFloat(GL11.GL_PROJECTION_MATRIX, projection);
GL11.glGetInteger(GL11.GL_VIEWPORT, viewport);
GLU.gluProject(x, y, z, modelview, projection, viewport, objectCoords);
eturn objectCoords; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:00:46.497

你应该能够处理：

```
public get2DFrom3D(float x, float y, float z)
{
    /*
    FloatBuffer screen_coords = GLAllocation.createDirectFloatBuffer(4);
    IntBuffer viewport = GLAllocation.createDirectIntBuffer(16);
    FloatBuffer modelview = GLAllocation.createDirectFloatBuffer(16);
    FloatBuffer projection = GLAllocation.createDirectFloatBuffer(16);
    */

    double[] screen_coords = new double[4];
    int[] viewport = new int[4];
    double[] modelview = new double[16];
    double[] projection = new double[16];

    GL11.glGetFloat(2982 /*GL_MODELVIEW_MATRIX*/, modelview);
    GL11.glGetFloat(2983 /*GL_PROJECTION_MATRIX*/, projection);
    GL11.glGetInteger(2978 /*GL_VIEWPORT*/, viewport);

    boolean result = GLU.gluProject(x, y, z, modelview, projection, viewport, screen_coords);
    if (result)
    {
        //System.out.printf("Convert [ %6.2f %6.2f %6.2f ] -> Screen [ %4d %4d ]\n", x, y, z, (int)screen_coords[0], (int)(screen_coords[3] - screen_coords[1]));
        System.out.printf("Convert [ %6.2f %6.2f %6.2f ] -> Screen [ %4d %4d ]\n", x, y, z, (int)screen_coords.get(0), (int)(screen_coords.get(3) - screen_coords.get(1)));
        return new Vector2(screen_coords[0], screen_coords[3] - screen_coords[1]);
    }
    else
    {
        System.out.printf("Failed to convert 3D coords to 2D screen coords");
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:39:38.427

要找到对应于世界中某个点的屏幕坐标，请将**相机变换**应用于世界点。您没有说您使用的是什么 3D 框架，但几乎可以肯定，您可以调用 API 来执行此转换。例如，在 Unity3D 框架中，您调用[`Camera.WorldToScreenPoint`](http://unity3d.com/support/documentation/ScriptReference/Camera.WorldToScreenPoint.html)，而在 OpenGL 中，您调用[`gluProject`](http://www.opengl.org/sdk/docs/man/xhtml/gluProject.xml).

但是，这不一定是渲染“抬头”显示（如角色名称）的最佳方式。另一种技术是创建**广告牌**，它们是世界上始终面向相机的对象。同样，您的 3D 框架可能对此提供支持：例如，在 Unity3D 中，您可能会调用`object.transform.LookAt(camera.transform)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T03:43:45.260

存在一种在 2d 中绘制 3d 点的方法。您将必须定义焦距参数。以下代码正确执行

```
int 3D_2Dx(int pt[3]){
int focallength = ;//your focal length parameter i.e. 30,45,60,....
float multiplier =  focallength/(focallength+pt[2]) ;// pt[2] is its z co-ordinate
return (pt[0]*multiplier); //got the x co-ordinate
}
int 3D_2Dy(int pt[3]){
int focallength = ;//your focal length parameter i.e. 30,45,60,....
float multiplier =  focallength/(focallength+pt[2]) ;// pt[2] is its z co-ordinate
return (pt[1]*multiplier); //got the y co-ordinate
} 
```

这段代码将完美地做到这一点。甚至我在完全基于 2d 的 flash 6 中制作了 3d 图形。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T11:05:14.307

这是一道数学题，不是编程题。答案取决于您从哪里观看，以及您的“屏幕”相对于您的视点和玩家所在的位置。

本质上，您需要从视点到 3D 位置绘制一条线，然后计算与该线相交的 2D 平面（屏幕）上的 x,y 坐标。- 我想！

# php - 如何查找未使用 return void 注释的方法

> ID：10009776
> 
> 赞同：1
> 
> 时间：2012-04-04T11:01:28.703
> 
> 标签：php, regex

这是正则表达式爱好者的东西:)

FLOW3 的代码约定声称您应该使用 @return void 注释不返回任何内容的方法：

```
/**
 * A method
 *
 * @return void
 */ 
```

我一直忘记它，并想用 netbeans 对我错过的所有方法进行正则表达式...

到目前为止我得到了

```
\*\s[^@return]+.*(\n)\s.\*/ 
```

哪个不太好用：

```
/**
 * Method that gets matched.
 *
 * @param string $comment
 */
public function aMethod() {
    // Some Code
}

/**
 * A method that does not get matched and shouldn't.
 *
 * @param string $test
 * @return void
 */
public function anotherMethod($test) {
    // Some Code
}

/**
 * A variable that get's matched but should not
     * be matched.
 *
 * @var string
 */
protected $var;

/**
 * Why is this method getting matched?
 *
 * @return void
 */
private function thirdMethod() {
        // Code
    } 
```

你会如何匹配这个？

这是正则表达式测试器中的一个[示例：](http://regexpal.com/?flags=&regex=%5C%2a%5Cs%5B%5E@return%5D%2b.%2a%28%5Cn%29%5Cs.%5C%2a/&input=%20%20%20%20%20%20%20%20/%2a%2a%0A%09%20%2a%20Method%20that%20gets%20matched.%0A%09%20%2a%0A%09%20%2a%20@param%20string%20%24comment%0A%09%20%2a/%0A%09public%20function%20aMethod%28%29%20%7B%0A%09%09//%20Some%20Code%0A%09%7D%0A%0A%09/%2a%2a%0A%09%20%2a%20A%20method%20that%20does%20not%20get%20matched%20and%20shouldn%27t.%0A%09%20%2a%0A%09%20%2a%20@param%20string%20%24test%0A%09%20%2a%20@return%20void%0A%09%20%2a/%0A%09public%20function%20anotherMethod%28%24test%29%20%7B%0A%09%09//%20Some%20Code%0A%09%7D%0A%0A%0A%09/%2a%2a%0A%09%20%2a%20A%20variable%20that%20get%27s%20matched%20but%20should%20not%0A%20%20%20%20%20%20%20%20%20%2a%20be%20matched.%0A%09%20%2a%0A%09%20%2a%20@var%20string%0A%09%20%2a/%0A%09protected%20%24var;%0A%0A%09/%2a%2a%0A%09%20%2a%20Why%20is%20this%20method%20getting%20matched?%0A%09%20%2a%0A%09%20%2a%20@return%20void%0A%09%20%2a/%0A%09private%20function%20thirdMethod%28%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20Code%0A%20%20%20%20%20%20%20%20%7D)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:12:19.230

否定的后向断言可能会有所帮助：

```
\*\s*@[a-z]+(?<!return)\s+.+\s*\*/\s*(?:public|protected|private)?\s+function 
```

这将匹配任何没有 @return 作为文档块最后一行的函数。它可能有一些误报，即@return 存在但不在最后一行，但这是一个好的开始。

请注意，这在 Regex 测试器中不起作用，因为 JavaScript 不支持后向断言。[这是一个例子](http://codepad.viper-7.com/5bBWhc)。

# blackberry - 黑莓模拟器不加载应用程序

> ID：10009777
> 
> 赞同：0
> 
> 时间：2012-04-04T11:01:31.133
> 
> 标签：blackberry, cordova, ripple

我有 Ripple，我用它来测试为 android 制作的应用程序。应用程序是用 html5 和 javascript 编写的，所以我使用的文件与我在 android 版本中使用的文件相同。我只更改了 phonegap 文件（黑莓版），然后添加：

*   配置文件
*   插件.xml
*   分机/phonegap.1.2.0.jar
*   资源/icon.png
*   资源/icon_hover.png
*   资源/loading_foreground.png

在 Ripple 中它工作正常，但是当我创建 cod 文件时，我无法将它加载到 BlackBerry 模拟器或 BlackBerry 设备中。

我使用 BlackBerry WebWorks SDK 2.3.1.5 创建 cod 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:42:12.190

我找到了解决方案：

BlackBerry 知识库文章：[BlackBerry 智能手机应用程序的最大大小](http://supportforums.blackberry.com/t5/Testing-and-Deployment/The-maximum-size-of-a-BlackBerry-smartphone-application/ta-p/1300209)
支持论坛主题：[模拟器上的“加载 java 程序”和“Jvm：.cod 中的错误”问题](http://supportforums.blackberry.com/t5/Java-Development/quot-Load-java-program-quot-on-simulator-and-quot-Jvm-errors-in/td-p/352624)

cod文件太大，ware里面的文件太大。鳕鱼文件应小于 8128 KB

我减小了图像文件的大小。一些文件非常大，例如一个文件是 1.21 MB，现在是 287 KB。质量不是很好，但它确实有效。

# windows - 允许用户在 64 位 Windows 上安装 32 位版本

> ID：10009784
> 
> 赞同：1
> 
> 时间：2012-04-04T11:01:50.027
> 
> 标签：windows, 32bit-64bit, inno-setup

我有一个简单的 inno-setup 脚本，它允许我的安装程序根据 Is64BitInstallMode 值安装程序的 32 位或 64 位版本。这很好用，但我想为用户提供安装 32 位版本的选项，即使他们在 64 位 Windows 上也是如此。我希望在选择应用程序安装路径之前做出选择，以便它可以根据他们的选择默认为 32 位或 64 位程序文件文件夹。如果它们在 32 位窗口上，我也想完全避免这个问题。我一直在玩各种功能，但还没有想出办法来做到这一点。如果我不能轻松做到这一点，我将只进行两次单独的安装（我正在尝试确定最有意义的方法！）非常感谢任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:13:07.903

我实际上还没有完成以下操作，但这是我要尝试的：

1.  您需要一个新的安装程序页面，允许用户选择是安装 32 位还是 64 位版本（此页面应仅在 64 位 Windows 上可见）
2.  您需要一个变量来保存用户选择的“bittyness”指标。它应该在 32 位系统上初始化为 32 位，在 64 位系统上初始化为 64 位，具体取决于`Is64BitInstallMode`.
3.  在 1\. 中的页面完成后，您应该将 2\. 中创建的变量更新为反映用户选择的值。
4.  将 32 位和 64 位版本的文件添加到安装程序
5.  添加一个新函数，`true`如果应该安装 64 位版本，则返回（例如`Install64BitVersion`）
6.  添加一个新函数，`true`如果应该安装 32 位版本，则返回（例如`Install32BitVersion`）
7.  更改部分中的`File`条目以`Files`有条件地安装：

这是该`Files`部分的示例：

```
[Files]
Source: 32bitexe.exe; DestDir: {...}; Check: Install32BitVersion
Source: 64bitexe.exe; DestDir: {...}; Check: Install64BitVersion 
```

# javascript - 从 HTML 表中的复选框列表中获取值

> ID：10009786
> 
> 赞同：1
> 
> 时间：2012-04-04T11:01:58.240
> 
> 标签：javascript, html, jsp

我有这种表，它有很多行，每行有两列，第一列有一个文本，第二列有每行的复选框列表。我能够检索第一列的值，但不能检索每个列的选定复选框的值。

我已经`var cellval=Table.rows[i].cells[0].firstChild.data`在 J​​ava Script 中的“for”循环中使用来获取第一列的值，但是如何获取此 for 循环中每一行的选定复选框值？（我需要为每个第一个单元格值映射第二个单元格中选定的复选框值是什么）

```
<tbody>
            <% List data = (List) request.getAttribute("fiboterm");%>
<%int i=0;%>
        <c:forEach var="row" items="${PhraseScoreList}">
            <tr>
                <td width="75%">${row.phraseContent}</td>
                <td width="25%">
                    <div style="overflow: auto; width: 200px; height: 75px; border: 1px solid #336699; padding-left: 5px">
                       <%Iterator itr;%>
                        <% 
                        for( int j=0;j<data.size(); j++){
                        %>
                        <input type="checkbox" name="nums<%=i%>" id="chk[<%=i%>]" value="<%=data.get(j)%>"> <%=data.get(j)%><br>
                        <%}
                       i++;
%>
                    </div>
                </td>
            </tr>
        </c:forEach>
        </tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:03:39.993

您正在混合代码和 html。

1）考虑使用 servlet 和**jsp**以及一个 dao。即简单的MVC架构。使用这种语句在循环中从 Servlet 获取复选框值

```
String[] checkboxval = request.getParameterValues("nums" + i); 
```

2）否则我建议您使用jquery库尝试一下；

```
$(document).ready(function() {
                $("input[name=first column value").change(function() {
                    $(this).closest("tr").find("input[name^=name of value to be input]").attr("disabled", !this.checked);
                });
            }); 
```

# sql - Oracle：监控索引开销

> ID：10009789
> 
> 赞同：0
> 
> 时间：2012-04-04T11:02:05.007
> 
> 标签：sql, oracle, indexing

我有一个在列上有索引的表。我想修改索引以涉及两列。我需要在更改前后测试插入时间。我怎样才能做到这一点？

我尝试使用真实数据进行插入并将其回滚，但插入被缓存并且测试并不重要。第一次和其他的导致了非常不同的时间

在这里您可以找到对真实查询的参考

[Oracle：利用两个索引](https://stackoverflow.com/questions/10007598/oracle-take-advantage-of-using-two-index/10007980#10007980)

# c# - MVC.NET 中的单元测试 json 搜索结果

> ID：10009792
> 
> 赞同：1
> 
> 时间：2012-04-04T11:02:20.477
> 
> 标签：c#, asp.net-mvc, json

我正在尝试测试一种方法，该方法返回 Json 编码的项目列表，这些项目是针对大型数据集进行搜索的结果：

```
public JsonResult()
{
     List<Stuff> myStuff = new List<Stuff>();
     ListItem item = new ListItem();
     mystuff.Add(item);
     return Json(myStuff, JsonRequestBehaviour.AllowGet);
} 
```

我的问题是我只知道返回列表中的第一项 - 根据搜索，每次都可以生成不同的列表。

目前我正在尝试通过简单地将返回的第一个项目与“正确”值进行比较来测试它，但我认为这并不像我希望的那样健壮（例如，我最想测试接下来可能的结果等）。以前有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:10:31.707

通过单元测试，您需要可预测的结果。如果它是您正在测试的其他函数，则覆盖 JsonResult() 函数以始终返回相同的函数，或者有一个单独的 url 进行测试，以便 json 结果始终相同。然后你可以有多个 json 结果，每个结果都用于测试调用函数中的不同功能/错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T11:47:08.290

单元测试时，您的测试范围只是您正在测试的特定方法的功能。

您的单元测试不会测试您编写测试的方法如何获取数据。它想要测试的只是该方法对数据的处理方式是否符合预期。

如果您的方法只是返回一个搜索结果，那么您所测试的只是如果您执行该方法会返回一些搜索结果。

在这种情况下，您准备好要返回的数据，并告诉您的搜索方法的模拟实例在您的方法在单元测试期间执行它时返回它。

如果您的方法对搜索结果的影响比您编写多个单元测试来验证它是否符合预期。

如果您想测试您的层之间是否正确通信并且数据是否正确从数据库返回，您可以编写集成测试，而不是单元测试。

# html - 二 元素通过包裹到右列中不受欢迎地浮动

> ID：10009801
> 
> 赞同：0
> 
> 时间：2012-04-04T11:02:54.423
> 
> 标签：html, css, css-float, less

我有以下 less.css ( [http://lesscss.org/](http://lesscss.org/) )：

```
#content {
    overflow: hidden;
    width: 100%;

    p {
        float: left;
        width: 465px;
        padding: 0px 25px 0px 35px;
        margin: 0px;

        br {
            line-height: 2.5em;
        }
    }

    pre {
        float: none;
        overflow: hidden;
        padding: 0px;
        padding-left: 10px;
        margin: 0px;

        &:after {
            clear: both;
        }
    }
} 
```

...以及以下 HTML：

```
 <div id="content">
            <p>This code prints the text 'Hello World!' to a console window and then closes the application. The return 0 part of the application is irrelevant.</p>
            <pre>
//somecode { }
            </pre>

            <p>Highlights a single chunk of CoffeeScript code, using Pygments over stdio, and runs the text of its corresponding comment through Markdown, using the Github-flavored-Markdown modification of Showdown.js.<br/>
            We process the entire file in a single call to Pygments by inserting little marker comments between each section and then splitting the result string wherever our markers occur.</p>
            <pre>
//somecode { }
            </pre>
        </div> 
```

之前的 CSS 的想法是标签自动向右对齐，常规文本留在主列，这样它就起到了一种注释的作用。如果任一列大于另一列，它将在开始下一组 p 和 pre 元素之前动态扩展。

我遇到的问题是，当我有多个段落元素时，由于它们以固定宽度向左浮动的方式，它们往往会相互重叠。这迫使我添加自己的断线，这很愚蠢，我真的很想摆脱它:(

示例（正确）：

![](../Images/8d157ca12956cd5944e1be38825e5e4e.png)

示例（不正确）：

![](../Images/a0055a2aaa38fe971f68e22d6d29ccf5.png)

任何人都可以提供一个解决方案，以便段落将像第一张图片一样对齐，**除了使用实际的段落标签**而不是我目前使用的临时 br。在另一个父 div 中包含段落不是一个选项，因为正在显示的输出直接来自 tinymce，它将文本组分别保存为文本和代码的原始 p/pre 标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:25:15.180

怎么样：

```
p {
    float: left;
    clear: left; 
```

我想这不会完全达到你在那里的相同布局。不幸的是，如果您要摆脱`<br>`s，我认为您需要将段落组放在另一个向左浮动的标签内以实现您的布局，正如您所说，这不是一个选择。

# android - 检查网络连接android

> ID：10009804
> 
> 赞同：14
> 
> 时间：2012-04-04T11:03:00.477
> 
> 标签：android, networking, connection

在我在模拟器上测试的应用程序中，我使用以下代码检查网络连接（WIFI）：

```
 public boolean isOnline() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

即使我禁用了计算机的无线连接，此方法也总是返回`true`...这是由模拟器引起的还是其他原因？

如果这不是检查网络连接的正确方法，我该怎么做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-04T11:06:30.633

最好 (1) 传入上下文，以便每个活动都可以调用此函数，以及 (2) 将此函数设为静态：

```
 public boolean isNetworkOnline() {
    boolean status=false;
    try{
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getNetworkInfo(0);
        if (netInfo != null && netInfo.getState()==NetworkInfo.State.CONNECTED) {
            status= true;
        }else {
            netInfo = cm.getNetworkInfo(1);
            if(netInfo!=null && netInfo.getState()==NetworkInfo.State.CONNECTED)
                status= true;
        }
    }catch(Exception e){
        e.printStackTrace();  
        return false;
    }
    return status;

    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T11:15:26.107

要让 getActiveNetworkInfo() 工作，您需要将以下内容添加到清单中。

```
1\. uses-permission android:name="android.permission.INTERNET"
 2\. uses-permission
    android:name="android.permission.ACCESS_NETWORK_STATE" 
```

最好使用 netInfo.isConnected() 而不是 netInfo.isConnectedOrConnecting

也试试这个

```
Context.getSystemService(Context.CONNECTIVITY_SERVICE).getNetworkInfo(ConnectivityManager.TYPE_MOBILE) 
```

或者

```
Context.getSystemService(Context.CONNECTIVITY_SERVICE).requestRouteToHost(TYPE_WIFI, int hostAddress) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-03T09:53:32.853

我们可以使用以下功能检查互联网连接的连接状态。Google Android 已更新 Android API 的功能以检查网络状态。现在在 Android 最新的 API 中，`getAllNetworkInfo()`已弃用。但`getAllNetworks()`函数只允许`Build.VERSION.SDK_INT >= 21.I`为所有情况编写代码。

要检查互联网连接，您可以调用此函数。

```
public static boolean checkInternetConnection(Context context) {
        ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity == null) {
        return false;
    } else if(Build.VERSION.SDK_INT >= 21){
        Network[] info = connectivity.getAllNetworks();
        if (info != null) {
            for (int i = 0; i < info.length; i++) {
                if (info[i] != null && connectivity.getNetworkInfo(info[i]).isConnected()) {
                    return true;
                }
            }
        }
    } else {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null) {
            for (int i = 0; i < info.length; i++) {
                if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                    return true;
                }
            }
        }
        final NetworkInfo activeNetwork = connectivity.getActiveNetworkInfo();
        if (activeNetwork != null && activeNetwork.isConnected()) {
            return true;
        }
    }

    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T17:41:12.030

就我而言，我关闭了 Wifi，但忘记关闭数据/移动网络连接。一旦我这样做了，该线程的原始帖子中的代码就对我有用。

回顾一下：

1.  前往设置
2.  关闭 Wifi
3.  转到设置-> 数据使用
4.  关闭**移动数据**

[![设置](../Images/b3c95e2b727edc210cb92e2fc29492fa.png)](https://i.stack.imgur.com/9N40R.png)

[![设置->数据使用](../Images/4c11aba94949f9a201f26e543c1e5a52.png)](https://i.stack.imgur.com/OOHYI.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-22T11:02:13.040

使用[以下类](https://gist.github.com/rodrigosambadesaa/e2274f8424e464382309dbacf7e84d47)，更新到可用的最新 Android 版本：Android 10。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-12-04T23:05:25.827

这就是我将它放在一个项目中的方式：

清单文件：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

静态功能：

```
public static boolean isNwConnected(Context context) {
    if (context == null) {
        return true;
    }
    ConnectivityManager connectivityManager = 
        (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo nwInfo = connectivityManager.getActiveNetworkInfo();
    if (nwInfo != null && nwInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

# c++ - 查询 std::ostringstream 内容

> ID：10009809
> 
> 赞同：4
> 
> 时间：2012-04-04T11:03:15.330
> 
> 标签：c++

是否可以在`std::ostringstream`不使用`std::ostringstream::str()`成员函数创建`std::string`要搜索的情况下搜索 a 的内容？

我有以下内容，并希望避免`std::string`在每次调用时构造一个实例`flush_()`：

```
#include <iostream>
using std::cout;

#include <ios>
using std::boolalpha;

#include <sstream>
using std::ostringstream;

#include <string>
using std::string;

class line_decorating_ostream
{
public:
    line_decorating_ostream()  { out_ << boolalpha;  }
    ~line_decorating_ostream() { cout << out_.str(); }

    template <typename T>
    line_decorating_ostream& operator<<(const T& a_t)
    {
        out_ << a_t;
        flush_();
        return *this;
    }

private:
    ostringstream out_;
    line_decorating_ostream(const line_decorating_ostream&);
    line_decorating_ostream& operator=(const line_decorating_ostream&);

    // Write any full lines.
    void flush_()
    {
        string s(out_.str());
        size_t pos = s.find('\n');
        if (string::npos != pos)
        {
            do
            {
                cout << "line: [" << s.substr(0, pos) << "]\n";
                s = s.substr(pos + 1);

            } while (string::npos != (pos = s.find('\n')));

            out_.clear();
            out_.str("");
            out_ << boolalpha << s;
        }
    }
};

int main()
{
    line_decorating_ostream logger;

    logger << "1 " << "2 " << 3 << " 4 " << 5 << "\n"
           << "6 7 8 9 10\n...\n" << true << "\n";

    return 0;
} 
```

[*这不会引起我担心的任何性能问题，只是好奇这是否可能。*]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:27:56.990

使用它的[`streambuf`](http://en.cppreference.com/w/cpp/io/basic_streambuf)类？还是自己写一个？（好的：你应该自己写一个：`pbase`并且`pptr`受到保护。）

```
class my_str_buffer : public basic_stringbuf<char>
{
  public:
    using basic_stringbuf<char>::pbase;
    using basic_stringbuf<char>::pptr;
};

my_str_buffer my_buf;
ostream str( &my_buf );
// do anything
string foo( str.rdbuf()->pbase(), str.rdbuf()->pptr() ); 
```

[`ostream`构造函数](http://en.cppreference.com/w/cpp/io/basic_ostream/basic_ostream)和[`stringbuf`](http://en.cppreference.com/w/cpp/io/basic_stringbuf)

# lucene - 弹性搜索奇怪的行为，寻找整个短语的前缀，但每个单词都有前缀

> ID：10009814
> 
> 赞同：1
> 
> 时间：2012-04-04T11:03:45.427
> 
> 标签：lucene, elasticsearch

我的索引可以说我有名为“full_name”的字段字段。我正在做以下查询：

```
{
"query":{
    "bool":{
        "must":[
            {
                "wildcard":{
                    "full_name":"ab*"
                }
            }
        ]
    }
},
"size":50
} 
```

它返回完全适合的值，例如：

```
"full_name" : "abrakadabra" 
```

但我也收到这样的东西：

```
"full_name" : "kad abra" 
```

Wildacrd "ab*" 适合单词 "abra" ，因此我有 "full_name" : "kad abra" 。我怎样才能避免它，只搜索第一个单词前缀？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:57:44.933

默认情况下应用于字符串的标准分析器为每个单词生成一个术语。因此，“kad abra”被索引为两个术语“kad”和“abra”，您的查询会找到第二个术语。如果您想始终将 full_name 搜索为短语，则应使用带有关键字标记器和小写过滤器的自定义分析器对其进行索引。或者，如果大小写在您的术语中有意义，您可以将此字段索引为 not_analyzed。

# wcf - 如何将 System.ServiceModel 永久添加到我的项目中？

> ID：10009822
> 
> 赞同：0
> 
> 时间：2012-04-04T11:04:14.110
> 
> 标签：wcf

我正在为多人游戏制作一个带有网络的 helloworld 游戏，并且我得到了一个使用等的示例类`MessageBuffer`，所以我想我应该添加`System.ServiceModel`到我的解决方案中。

首先，我尝试通过 using 语句添加它，然后我发现了如何添加对项目的引用，所以我做到了，但即使在那之后，我的代码周围都有红色的波浪线表示`MessageBuffer`无法识别。

然后我在某个地方读到了我可以尝试将目标框架从客户端更改为完整的地方，但这根本没有帮助。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:08:08.157

尝试将名称完全限定为[System.ServiceModel.Channels.MessageBuffer](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.messagebuffer.aspx)以查看是否有帮助或添加

```
using System.ServiceModel.Channels; 
```

# java - 以编程方式以受控方式增加 CPU 使用率

> ID：10009825
> 
> 赞同：4
> 
> 时间：2012-04-04T11:04:37.913
> 
> 标签：java, eclipse, cpu-usage

我想通过一个java程序增加我的CPU使用率，尽管是以一种受控的方式。比如说，用户可以指定一个参数，如“高”、“中”或“低”，我应该能够根据用户的选择将 CPU 增加一定数量。假设高我希望它增加 5%，中等增加 3%，低增加 1%。这是否可以通过一种干净有效的方法（不仅仅是使用 while 和 for 循环）来实现？如果是，那么精确度和准确度如何以及如何？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:10:12.370

您可以通过在代码中插入 sleep 语句（例如 ）来修改 Java 程序引起的 CPU 负载[`Thread.sleep()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep%28long%29)，使用可变延迟来更改负载。最简单的情况是循环中的 sleep 语句，在要加载的每个 CPU 内核的单独线程中执行。

也就是说，Java*不*适合这项任务 - 如果您确实需要您所描述的那种精度，则不适合。垃圾收集器和其他因素使其行为相当不可预测。

在我自己的应用程序中，对于相同的输入，我经常会得到 10% 范围内的吞吐量变化，而没有明显的原因。正是由于这个原因，Java 也不被认为适用于实时应用程序。

如果你提到你需要做这样的事情的目的，它可能会帮助我们提供更好的答案——也许，为什么你需要在*Java*中做......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:37:48.827

编写一个只有一个线程的 java 程序，也就是说，在你的 main 方法中创建一个无限的 while 循环，它会一直执行。你会发现CPU使用率会增加。如果您在此 while 循环中没有任何睡眠，您会发现您的程序将占用几乎 100% 的 CPU。您在此 while 循环中放置的睡眠越多，您的程序占用的 CPU 使用率就越少。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T11:15:48.510

CPU 使用率由底层操作系统控制。操作系统将确定执行给定任务所需的 CPU 使用率。由于 CPU 使用率是由操作系统控制的，因此无法直接通过 java 控制。

您唯一能做的就是更改线程优先级以间接控制 CPU 使用率，或者您可以让线程休眠一段时间。

# css - ASP.Net 文本框和输入按钮未使用 CSS 在 FF 中对齐

> ID：10009827
> 
> 赞同：0
> 
> 时间：2012-04-04T11:04:44.417
> 
> 标签：css, webforms

我无法使用 CSS 在 asp.net Web 表单上对齐文本框和输入按钮控件。我不确定 css 的哪些属性与所有浏览器兼容。

请查看 jsFiddle [http://jsfiddle.net/PWK7V/上的示例](http://jsfiddle.net/PWK7V/)

同样在 IE 和 Chrome 中对齐，但输入按钮在 Firefox 11.0 中显示略高 1 个像素。

我也对属性进行了更改。我不确定如何解决这个问题，因为我不是 CSS 大师。

如果有人可以解决此问题并指出问题，我将不胜感激，以便我将来牢记这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:07:09.270

**Solution based given by @Nestenuis**

Working example

[http://jsfiddle.net/PWK7V/33/](http://jsfiddle.net/PWK7V/33/)

# asp.net - 一键式 ASP.NET 网络部署，包括先决条件？

> ID：10009828
> 
> 赞同：5
> 
> 时间：2012-04-04T11:04:48.690
> 
> 标签：asp.net, deployment, export, web-deployment

有没有办法部署一个网站，以便它创建一个可执行文件/批处理，当在服务器上执行时，将安装所有先决条件（即 .NET 版本、IIS、SQL、本地权限等）？

我正在寻找可以为我的客户提供的 ONE-CLICKER，所以他只需双击它就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:24:56.273

您是否查看过在 Visual Studio中使用[Web 部署项目？](http://blogs.msdn.com/b/webdevtools/archive/2010/05/26/visual-studio-2010-web-deployment-projects-rtw-available-now.aspx)这是 Scott Hanselman写的一篇很好的[博客文章。](http://www.hanselman.com/blog/WebDeploymentMadeAwesomeIfYoureUsingXCopyYoureDoingItWrong.aspx)

我也听说过关于[Wix](http://wixtoolset.org/)的好消息。

# regex - 这个正则表达式有什么问题？（向前看和向后看）

> ID：10009834
> 
> 赞同：0
> 
> 时间：2012-04-04T11:05:10.617
> 
> 标签：regex, sdp

我尝试提取 SDP 包的媒体描述。

我有一条线

```
a=rtpmap:113 H264/90000 
```

（之后总是有回车）

我想要 a=rtpmap:[number][whitespace] 之后的所有内容，直到回车，没有返回本身并构造了以下 Regex，它不起作用：

```
(?<=(a=rtpmap:[0-9]+\s)).*(?=\r) 
```

如果我喜欢

```
(?<=(a=rtpmap:[0-9]{3}\s)).* 
```

我至少得到了一个结果，但 rtpmap 之后的数字并不总是 3 个字符长。为什么 + 在这里不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:12:48.053

[许多正则表达式引擎不支持任意长度或可变长度的lookbehind。](http://www.regular-expressions.info/lookaround.html#limitbehind).NET 可以，但在这方面它几乎是唯一的。

在您的情况下，您最好使用以下内容：

```
a=rtpmap:\d+ ([^\r]+) 
```

并使用第一个捕获组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:13:00.367

改用这个

> (?<=(a=rtpmap:(\d+)\s)).*

# hibernate - 如何使用 JPA 和 Hibernate 在关联表中保留属性？

> ID：10009840
> 
> 赞同：2
> 
> 时间：2012-04-04T11:05:20.180
> 
> 标签：hibernate, jpa, associative-table

我想在休眠状态下将属性保存在关联表上，但不知道如何。

我想出了以下示例：我有一个表 USERS、一个表 MEDIA（存储电影和书籍）和一个名为 USER_MEDIA 的关联表，如果用户“看到”了 MEDIA 和用户给出的评分，我将在其中存储.

问题：映射速率。我使用 XML 来进行映射，但如果它使您更容易，我也可以使用注释。

以下是我的代码片段：

```
create table USER(
   UUID bigint not null auto_increment,
   NAME text,
   primary key (UUID)
);

create table MEDIA(
   MEDIAID bigint not null auto_increment,
   NAME text,
   primary key (MEDIAID)
);

create table USER_MEDIA(
   UUID bigint not null,
   MEDIAID bigint not null,
   RATE double,
   RATE_FORMAT varchar(2),
   primary key (UUID, MEDIAID)
);

alter table USER_MEDIA add foreign key (UUID) REFERENCES USER(UUID);
alter table USER_MEDIA add foreign key (MEDIAID) REFERENCES MEDIA(MEDIAID); 
```

JAVA

```
public class User {
   private Long id;
   private String name;
   private Double rating;
   private String ratingFormat;
   private Set<Media> medias = new HashSet<Media>();
   //getters e setters
}

public class Media {
   private Long id;
   private String name;
   private Double rate;
   private String rateFormat;
   private Set<User> users = new HashSet<User>();
   //getters e setters
} 
```

hbm.xml

```
<hibernate-mapping package="package.model">

   <class name="User" table="USER">
      <id name="id" column="UUID">
         <generator class="native" />
      </id>
      <property name="name" type="text" />
      <set name="medias" table="USER_MEDIA" cascade="all">
         <key column="UUID" />
         <many-to-many column="MEDIAID" class="package.model.Media" />
      </set>    
   </class>

   <class name="Media" table="MEDIA">
      <id name="id" column="MEDIAID">
         <generator class="native" />
      </id>          
      <property name="name" type="text" />
      <property name="rate" type="double" /> 
      <property name="rateFormat" type="text" column="RATE_FORMAT" />    
      <set name="users" table="USER_MEDIA" cascade="all">
         <key column="MEDIAID" />
         <many-to-many column="UUID" class="package.model.User" />
      </set>          
   </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:10:09.247

我为用户和组做了同样的事情，但使用注释，检查是否对你有用

```
package net.smanne.account.domain;

import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.JoinTable;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToMany;
import javax.xml.bind.annotation.XmlRootElement;

import org.codehaus.jackson.annotate.JsonIgnore;

import net.smanne.core.domain.CoreEntity;

@Entity(name="accounts")
@XmlRootElement
public class Account extends CoreEntity {

    private String name;
    private String password;
    @ManyToMany(cascade=CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinTable(name="account_groups",
    joinColumns=@JoinColumn(name="account_id"),
    inverseJoinColumns=@JoinColumn(name="group_id"))
    private List<Group> group; 

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public List<Group> getGroups() {
        return group;
    }

    public void setGroups(List<Group> groups) {
        this.group = groups;
    }
}

//Group.java
package net.smanne.account.domain;

import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;
import javax.xml.bind.annotation.XmlRootElement;

import net.smanne.core.domain.CoreEntity;

@Entity(name="groups")
@XmlRootElement
public class Group extends CoreEntity {

    private String name;
    private String description;

    /*@ManyToMany(cascade=CascadeType.ALL)
    @JoinTable(name="account_groups",
    joinColumns=@JoinColumn(name="group_id"),
    inverseJoinColumns=@JoinColumn(name="account_id"))
    private List<Account> accounts;*/

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    /*public List<Account> getAccounts() {
        return accounts;
    }

    public void setAccounts(List<Account> accounts) {
        this.accounts = accounts;
    }*/
} 
```

# delphi - Delphi XE2 VCL 样式，奇怪的故障，窗口不可见

> ID：10009842
> 
> 赞同：1
> 
> 时间：2012-04-04T11:05:22.917
> 
> 标签：delphi, styles, vcl, skinning

我在使用 VCL 样式时遇到了一个非常奇怪的问题。有时，当使用预定义的样式启动程序或稍后设置一个时，一个或一些程序窗口会消失。

这非常随机发生，可能每 10-20 次发生一次，而不是在任何特定窗口中。我在运行时打开了 2 个表单，有时是一个，有时是另一个。

发生这种情况时，我会在窗口不可见时检查一些属性，Visible 属性为 true，窗口边界正确；如果我尝试通过 Aero DWM 实时缩略图显示窗口.. 它也是空的；但是，如果我捕获窗口 DC，我会得到一个带有窗口的位图，就好像它正常显示一样（并且已应用样式）。

它没有显示任何错误，没有警告，没有异常......似乎没有任何问题，只是窗口不存在。如果我将鼠标悬停在任务栏按钮上以查看预览，它会显示该框，但它是空的。

任何想法要检查什么？

编辑：调用 RecreateWnd 将问题修复为临时解决方法，但是，它可能会再次失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T05:10:05.037

找到问题的原因：“Alphablend”。如果启用此功能，即使在 255 时，也会出现问题。

重现步骤：

*   打开新的 VCL 表单项目
*   项目选项，外观，设置风格主题。我使用 Cobalt XE 进行测试
*   将 Alphablend 设置为 true
*   跑

可能需要运行 10-20 次才能出现故障。

我注意到当它发生时，窗口实际上就在那里..你可以将鼠标悬停在上面并注意到那里有东西。如果您猜到它们的位置，您甚至可以单击控件。如果您设法在窗口不可见时拖动它，它将显示出来。如果您最小化/恢复它也会显示出来。

如果您在窗口处于活动状态时执行 alt+PrtScr 并粘贴到 Paint 等中，您将获得它后面的内容以及窗口边界，就好像 alphablendvalue 设置为 0。

# android - Android：在列表视图中显示 mp3 文件

> ID：10009846
> 
> 赞同：1
> 
> 时间：2012-04-04T11:05:36.607
> 
> 标签：android, listview

我正在制作一个应用程序，我必须在列表视图中显示 sdcard 中的所有 mp3 文件。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:14:01.173

这是一个基于 Android 文件资源管理器的非常好的示例。它显示您的 SD 卡中存在的所有文件。

检查这个， [http://android-er.blogspot.in/2010/01/implement-simple-file-explorer-in.html](http://android-er.blogspot.in/2010/01/implement-simple-file-explorer-in.html)

现在，如果您只想显示 mp3 文件，您只需使用文件名进行条件检查。

像这样替换这个例子的**getDir(String dirPath)**方法，

```
private void getDir(String dirPath)
{    
     myPath.setText("Location: " + dirPath);
     item = new ArrayList<String>();
     path = new ArrayList<String>();         

     File f = new File(dirPath);
     File[] files = f.listFiles();

     if(!dirPath.equals(root))
     {    
          item.add(root);
          path.add(root);    
          item.add("../");    
          path.add(f.getParent());
     }
     for(int i=0; i < files.length; i++)    
     {
          File file = files[i];
          path.add(file.getPath());
          if(file.isDirectory())    
            item.add(file.getName() + "/");
          else
          {
              String filename=file.getName();
              String ext = filename.substring(filename.lastIndexOf('.')+1, filename.length());
              if(ext.equals("JPG")||ext.equals("jpg"))
              {
                  item.add(file.getName());
              }
          }    
     }    
     ArrayAdapter<String> fileList =
          new ArrayAdapter<String>(this, R.layout.row, item);
     setListAdapter(fileList);
} 
```

现在您的资源管理器已准备就绪，它只显示 mp3 文件。

# java - 如何检查 Android 中可用/连接的服务器或 IP 地址

> ID：10009847
> 
> 赞同：1
> 
> 时间：2012-04-04T11:05:43.830
> 
> 标签：java, android, networking, connection, android-networking

如何知道服务器/IP 地址在 android 中可用/已连接。我试试这段代码

```
final EditText ed_ip = (EditText)findViewById(R.id.ed_server);
Button btn_ip_save = (Button)findViewById(R.id.btn_save_ip);

btn_ip_save.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {
// TODO Auto-generated method stub

String str_serverip = ed_ip.getText().toString();
int timeout = 2000;

byte [] b = str_serverip.getBytes();

boolean addr = InetAddress.getByAddress(b).isReachable(timeout);

if(addr == true)
{
       txt.setText("Response");
      Toast.makeText(IpConfig.this, "Reachable", Toast.LENGTH_LONG).show();

}else {

    txt.setText("Not Response");
    Toast.makeText(IpConfig.this, "Not", Toast.LENGTH_LONG).show();
    }

} 
```

它总是拒绝连接，除了 127.0.0.1

如何检查请指导我..

# php - 用于传递参数的 PHP 注释

> ID：10009850
> 
> 赞同：0
> 
> 时间：2012-04-04T11:05:51.083
> 
> 标签：php

我最近看到了一个有趣的代码库，其中一些参数通过注释传递给方法。它看起来像

```
/*
 * @attribute default-method
 */ 
```

这当然会为正在实例化的类声明默认方法。

这是什么？它是如何完成的？在任何地方都有这样的例子吗？

它被用来控制返回的格式等，所以它看起来确实很有趣，并且肯定会从我创建的类中删除很多废话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T11:09:04.800

参数没有通过注释传递给方法；评论正在使用（很可能）[PHPDoc](http://www.phpdoc.org/)来允许生成 API 文档（并使开发人员在查看源代码时更容易看到正在发生的事情）。

这是你在说的那种事情吗？：

```
/**
 * Set the data
 *
 * @access public
 * @param string $field
 * @param mixed $value
 */
public function __set($field, $value)
{
  $this->_data[$field] = $value;
}

/**
 * Get the data
 *
 * @access public
 * @param string $field
 * @return mixed
 */
public function __get($field)
{
  return isset($this->_data[$field]) ? $this->_data[$field] : NULL;
} 
```

如果是这样，您会注意到参数仍在传递，并且返回值正常返回。只是 PHPDoc 被用来记录代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:15:50.747

正如其他人所说，它可用于生成文档。

**但是**，您当然可以使用这种风格的注释来实现应用程序逻辑（通常称为属性或注释）。考虑以下示例：

```
<?php
/**
 * @Foo Bar
 */
function sum($a, $b) {
  return $a + $b;  
}

$function = new ReflectionFunction('sum');
$attributes = $function->getDocComment();

var_dump($attributes);
// string(29) "/** * @attribute Foo Bar */" 
```

然后，您可以解析该评论并对信息做任何您想做的事情。

事实上，[Doctrine](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/annotations-reference.html)大量使用了这种“模式”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:09:51.467

实际上是两个星号

```
/**
 * @attribute blah
 */ 
```

请参阅[PHP 文档](http://www.phpdoc.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:19:34.387

注释只是对 javadoc 的改编。基本上，第三方软件可以轻松地解析这些类，并能够直接从评论中找出评论和方法签名，并生成漂亮的 html 或 pdf 文档。正如之前的海报所提到的，请查看 phpdoc，这是使用评论的第三方软件之一。

# java - HQL - 两个相同查询之间的区别

> ID：10009854
> 
> 赞同：0
> 
> 时间：2012-04-04T11:06:13.270
> 
> 标签：java, hibernate, hql

为什么这个查询工作正常：

```
Query query = session.createQuery("from Table tab"); 
```

这个查询：

```
Query query = session
  .createQuery("select tab.col1, tab.col2, tab.col3 from Table tab"); 
```

这就是我对这两个查询所做的：

```
dataList = query.list();
for (Table item : dataList)
{
  System.out.println(item.getCol1();
} 
```

报告：

```
java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to table.Table
at test.TestCriteria.main(TestCriteria.java:35) 
```

你能帮忙吗？

表通常映射在实体 bean 中，并且所有列都是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:27:54.593

我相信*第二个* `query`，结果是`List<Object[]>`：

```
Object[] row = (Object[]) dataList.get(i);
Object col1Value = row[0];
Object col2Value = row[1];
Object col3Value = row[2]; 
```

我`Ljava.lang.Object;`在异常跟踪中观察到了这个猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:27:48.343

查询结果`select tab.col1, tab.col2, tab.col3`返回对象数组列表，其中包含所选字段，即 col1、col2 和 col3。

然后从对象数组中，您可以按索引提取字段。

```
for(Object[] field : dataList){

    col1 = field[0]; //-- Casting accordingly
     col2 = field[1]; 
     col3 = field[2]; 

} 
```

# java - 存储二进制代码的字符串数组的内存大小

> ID：10009856
> 
> 赞同：3
> 
> 时间：2012-04-04T11:06:19.470
> 
> 标签：java, string, binary

我想将二进制代码列表存储在 String[] 数组中，例如在以下示例中...

```
String[] str={"10001", "100101","101010101"}; 
```

存储数组需要多少内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T11:09:33.157

您将在[此处](http://www.javamex.com/tutorials/memory/string_memory_usage.shtml)找到以下结果：

> 最小字符串内存使用量（字节）= 8 * (int) ((((无字符) * 2) + 45) / 8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:28:32.077

如果您想更有效地存储这些数据，最好将其存储在数字数组中，例如`int[]`. 通过使用`String[]`数组，每个字符至少使用 2 个字节的内存（例如，1010 将使用最少 8 个字节的内存），而将值存储在`int[]`数组中允许您存储更大的二进制数而无需添加额外的字节.

为了简单的比较，单`int`是4个字节。如果将 an 的二进制值存储`int`为 a `String`，它将使用 64 个字节（因为 4 个字节中有 32 位，每个“位”存储为 2 个字节长度的 unicode 字符）。

# android - 如何隐藏 XML 字段并将该文件重用于另一个活动？

> ID：10009858
> 
> 赞同：-1
> 
> 时间：2012-04-04T11:06:21.320
> 
> 标签：android, xml, reusability

我想隐藏现有 XML 中的一些字段并将该 XML 用作另一个活动的输入

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:31:51.523

只需定义实际在您的 xml 中的所有字段。当您想隐藏一个（例如文本视图）时，请执行以下操作：

```
textview1.setVisibility(View.GONE); 
```

带回使用：

```
textview1.setVisibility(View.Visible); 
```

# javascript - 如何在 Titanium HttpClient 中清除或重置 cookie

> ID：10009866
> 
> 赞同：0
> 
> 时间：2012-04-04T11:06:57.717
> 
> 标签：javascript, titanium, titanium-mobile

当一个人使用他们的凭据登录然后注销时，任何后续用户都可以在不提供正确凭据的情况下登录。我已经用谷歌搜索了，但一切都在脉络中。我尝试在 HttpClient 对象上使用 clearCookies()，但它给出了错误：

```
req.clearCookies(); //req is an object of HttpClient 
```

我也尝试通过重置 cookie

req.setRequestHeader("Cookie", null);

但没有任何效果。非常感谢任何帮助。提前致谢。

环境细节

iPad 5.0 Ti SDK 1.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:17:43.710

我遇到了同样的问题，并通过使用“http://”指定完整的主机来解决它。

例如：

```
client.clearCookies("http://domaintyper.com"); 
```

如果没有 http/https 部分，它就无法工作。

# objective-c - 如何创建 NSInputStream 的子类？

> ID：10009867
> 
> 赞同：4
> 
> 时间：2012-04-04T11:07:04.410
> 
> 标签：objective-c, cocoa

我想做一个 NSInputStream 的子类。简单地说，我尝试编写如下代码，

```
@interface SeekableInputStream : NSInputStream
{
    NSUInteger startOffset;
    NSUInteger totalReadLen;
}

- (NSInteger)read:(uint8_t *)buffer maxLength:(NSUInteger)len;
- (BOOL)getBuffer:(uint8_t **)buffer length:(NSUInteger *)len;
- (BOOL)hasBytesAvailable;
- (void)open:(NSUInteger)offset;

@end 
```

而且，我使用了如下的类。

```
SeekableInputStream *stm = [[SeekableInputStream alloc] initWithURL:url]; 
```

然后，在运行时，我可能会遇到以下错误消息。

**-[SeekableInputStream initWithURL:]：无法识别的选择器发送到实例 0x10018ff30**

我没有重写 initWithURL 来故意使用父母的方法。据我所知，派生类可以使用父类的方法，不是吗？

不能继承像 initWithURL 这样的扩展方法吗？

有人告诉我如何对 NSInputStream 进行子类化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:12:11.103

来自 NSStream.h

```
// NSStream is an abstract class encapsulating the common API to NSInputStream and NSOutputStream.
// Subclassers of NSInputStream and NSOutputStream must also implement these methods.
@interface NSStream : NSObject
- (void)open;
- (void)close;

- (id <NSStreamDelegate>)delegate;
- (void)setDelegate:(id <NSStreamDelegate>)delegate;
 // By default, a stream is its own delegate, and subclassers of NSInputStream and NSOutputStream must maintain this contract. [someStream setDelegate:nil] must restore this behavior. As usual, delegates are not retained.

- (id)propertyForKey:(NSString *)key;
- (BOOL)setProperty:(id)property forKey:(NSString *)key;

- (void)scheduleInRunLoop:(NSRunLoop *)aRunLoop forMode:(NSString *)mode;
- (void)removeFromRunLoop:(NSRunLoop *)aRunLoop forMode:(NSString *)mode;

- (NSStreamStatus)streamStatus;
- (NSError *)streamError;
@end

// NSInputStream is an abstract class representing the base functionality of a read stream.
// Subclassers are required to implement these methods.
@interface NSInputStream : NSStream
- (NSInteger)read:(uint8_t *)buffer maxLength:(NSUInteger)len;
// reads up to length bytes into the supplied buffer, which must be at least of size len. Returns the actual number of bytes read.

- (BOOL)getBuffer:(uint8_t **)buffer length:(NSUInteger *)len;
// returns in O(1) a pointer to the buffer in 'buffer' and by reference in 'len' how many bytes are available. This buffer is only valid until the next stream operation. Subclassers may return NO for this if it is not appropriate for the stream type. This may return NO if the buffer is not available.

- (BOOL)hasBytesAvailable;
// returns YES if the stream has bytes available or if it impossible to tell without actually doing the read.
@end 
```

如您所见，没有 initWithURL 函数。所以，你`super`不工作，因为它真的不存在。正如 MrTJ 所说，它是一个类别类。它定义在：

```
// The NSInputStreamExtensions category contains additional initializers and convenience routines for dealing with NSInputStreams.
@interface NSInputStream (NSInputStreamExtensions)
- (id)initWithURL:(NSURL *)url NS_AVAILABLE(10_6, 4_0); 
```

所以，我认为如果你在你的子类中使用它，它就可以工作。

```
#import <Foundation/NSStream.h> 
```

您需要导入类别。记住你不能子类化一个类别，只是覆盖它然后不能调用（或者如果可以，我不知道如何）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:03:20.717

如果您在 SDK 中查看 NSStream.h，`initWithURL`它不是在核心类中定义的，`NSInputStream`而是在一个名为`NSInputStreamExtensions`. 我不太了解从继承类调用基类类别中定义的方法，但这绝对可能是您遇到的可见性问题的原因。

# asp-classic - 使用 JMail (Classic ASP) 的电子邮件附件的最大文件大小

> ID：10009873
> 
> 赞同：1
> 
> 时间：2012-04-04T11:07:22.437
> 
> 标签：asp-classic, jmail

JMail 4.5 中附件的最大文件大小是多少。我使用功能`AddURLAttachment()`。

我收到以下错误：

```
jmail.SMTPMail error '8000ffff' 

The message was undeliverable. All servers failed to receive the message 
```

我检查了 SMTP 主机上的 SMTP 日志；有一个条目表明消息超出了最大大小。所以这意味着这不是 JMail 的问题，对吧？更像是 SMTP 设置的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:35:16.937

我认为 jMail 中的附件没有最大大小。唯一的问题是很多邮件服务器都有限制。为了安全起见，我会保持在 10mb 以下。

尝试附加某些内容时是否遇到错误？

# blackberry - 在黑莓中打开popupScreen时是否可以添加菜单项

> ID：10009875
> 
> 赞同：0
> 
> 时间：2012-04-04T11:07:35.467
> 
> 标签：blackberry, user-interface

```
public class xyz extends PopupScreen{
} 
```

现在我想在这个屏幕弹出时添加菜单项。我尝试在主屏幕的情况下添加菜单项，但它在弹出屏幕中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:21:10.387

> 按照您的要求尝试这个示例类：

```
public class SimpleScreen extends MainScreen
{
Font font;
private MenuItem saveItem;
private ButtonField buttonField;
public SimpleScreen() 
{
    font=Font.getDefault().derive(Font.ITALIC|Font.BOLD, 20);
    createGUI();        
    this.setFont(font);
}

private void createGUI()
{
    buttonField=new ButtonField("Click For Popup",Field.FIELD_HCENTER);
    buttonField.setChangeListener(new FieldChangeListener() 
    {
        public void fieldChanged(Field field, int context) 
        {
            UiApplication.getUiApplication().pushScreen(new ScreenPopup(SimpleScreen.this));
        }
    });
    add(buttonField);

}

public void addMenuItemToMenu()
{
    if(saveItem==null)
    {
        saveItem=new MenuItem("Save",100,101) 
        {
            public void run() 
            {
                Status.show("Clicked on Save Menu", 500);
            }
        };
        addMenuItem(saveItem);
    }
}           
}

class ScreenPopup extends PopupScreen
{
private SimpleScreen simpleScreen;
public ScreenPopup(SimpleScreen simpleScreen) 
{
    super(new HorizontalFieldManager(),PopupScreen.DEFAULT_CLOSE);
    this.simpleScreen=simpleScreen;
    this.add(new LabelField("ADDING Menu By Clicking the Back Button"));
}

public boolean onClose() 
{
    simpleScreen.addMenuItemToMenu();
    return super.onClose();
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:56:22.600

无法在弹出屏幕上添加菜单，因为问题是例如：-

我有一个主屏幕调用作为示例屏幕，在示例屏幕上可以说我有保存和取消菜单，现在我从主屏幕推送一个弹出屏幕。现在，如果我说我想在弹出屏幕上保存和取消菜单，那么黑莓无法识别是哪个菜单，它是示例屏幕还是弹出屏幕。

所以，这就是为什么黑莓不支持弹出屏幕上的菜单。

# magento - Magento 发票从税改成增值税

> ID：10009879
> 
> 赞同：1
> 
> 时间：2012-04-04T11:08:06.593
> 
> 标签：magento

我正在尝试更改 Magento 发票模板中的默认措辞。我已将文件夹中的税更改为增值税，该`app/local/en_US`文件夹已在网站后端对其进行了更新，因此现在它都显示为增值税而不是税。

问题是这似乎没有更新我的发票。

我需要在说税的地方说增值税。

这是目前正在发生的事情：

```
Subtotal  £100.97  
Shipping & Handling  £8.00  
Internal Credit  £0.00  
Grand Total (Excl.Tax)  £108.97  
Tax  £20.19 
Grand Total (Incl.Tax)  £129.16 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:57:24.823

在语言环境文件中找到正确的行来改变它。这是一个快速的 grep 来揭示术语 TAX 的使用位置：

```
grep 'Tax' app/locale/ -rsn

app/locale/en_US/Mage_Adminhtml.csv:250:"Customer Tax Classes","Customer Tax Classes"
app/locale/en_US/Mage_Adminhtml.csv:332:"Excl. Tax","Excl. Tax"
app/locale/en_US/Mage_Adminhtml.csv:406:"Import and Export Tax Rates","Import and Export Tax Rates"
app/locale/en_US/Mage_Adminhtml.csv:416:"Incl. Tax","Incl. Tax"
app/locale/en_US/Mage_Adminhtml.csv:506:"Manage Tax Rules","Manage Tax Rules"
app/locale/en_US/Mage_Adminhtml.csv:507:"Manage Tax Zones and Rates","Manage Tax Zones and Rates"
app/locale/en_US/Mage_Adminhtml.csv:702:"Product Tax Classes","Product Tax Classes"
app/locale/en_US/Mage_Adminhtml.csv:881:"Tax","Tax"
app/locale/en_US/Mage_Bundle.csv:19:"Excl. Tax","Excl. Tax"
app/locale/en_US/Mage_Bundle.csv:24:"Incl. Tax","Incl. Tax"
app/locale/en_US/Mage_Catalog.csv:36:"Add Tax","Add Tax"
app/locale/en_US/Mage_Catalog.csv:322:"Incl. Tax","Incl. Tax"
app/locale/en_US/Mage_Catalog.csv:642:"Tax","Tax"
app/locale/en_US/Mage_Catalog.csv:699:"Total incl. Tax: %1$s","Total incl. Tax: %1$s"
app/locale/en_US/Mage_Checkout.csv:116:"Estimate Shipping and Tax","Estimate Shipping and Tax"
app/locale/en_US/Mage_Checkout.csv:117:"Excl. Tax","Excl. Tax"
app/locale/en_US/Mage_Checkout.csv:133:"Incl. Tax","Incl. Tax"
app/locale/en_US/Mage_Cms.csv:45:"Customer Tax Class Information","Customer Tax Class Information"
app/locale/en_US/Mage_Cms.csv:93:"Product Tax Class Information","Product Tax Class Information"
app/locale/en_US/Mage_Customer.csv:320:"Show Tax/VAT Number","Show Tax/VAT Number"
app/locale/en_US/Mage_Customer.csv:337:"Tax Class","Tax Class"
app/locale/en_US/Mage_Customer.csv:338:"Tax/VAT number","Tax/VAT number"
app/locale/en_US/Mage_Downloadable.csv:28:"Excl. Tax","Excl. Tax"
app/locale/en_US/Mage_Downloadable.csv:35:"Incl. Tax","Incl. Tax"
app/locale/en_US/Mage_GoogleCheckout.csv:28:"Disable Default Tax Tables","Disable Default Tax Tables"
app/locale/en_US/Mage_GoogleCheckout.csv:29:"Discount Tax","Discount Tax"
app/locale/en_US/Mage_Payment.csv:100:"Tax Amount","Tax Amount"
app/locale/en_US/Mage_Paypal.csv:56:"Buyer\'s Tax ID","Buyer\'s Tax ID"
app/locale/en_US/Mage_Paypal.csv:57:"Buyer\'s Tax ID Type","Buyer\'s Tax ID Type"
app/locale/en_US/Mage_Reports.csv:91:"Order Taxes Report Grouped by Tax Rate","Order Taxes Report Grouped by Tax Rate"
app/locale/en_US/Mage_Reports.csv:151:"Tax","Tax"
app/locale/en_US/Mage_Rss.csv:48:"Tax","Tax"
app/locale/en_US/Mage_Sales.csv:229:"Excl. Tax","Excl. Tax"
app/locale/en_US/Mage_Sales.csv:272:"Incl. Tax","Incl. Tax"
app/locale/en_US/Mage_Sales.csv:438:"Order Taxes Report Grouped by Tax Rates","Order Taxes Report Grouped by Tax Rates"
app/locale/en_US/Mage_Sales.csv:563:"Refund Shipping (Excl. Tax)","Refund Shipping (Excl. Tax)"
app/locale/en_US/Mage_Sales.csv:564:"Refund Shipping (Incl. Tax)","Refund Shipping (Incl. Tax)"
app/locale/en_US/Mage_Sales.csv:615:"Sales Tax","Sales Tax"
app/locale/en_US/Mage_Sales.csv:710:"Tax","Tax"
app/locale/en_US/Mage_Sales.csv:711:"Tax Amount","Tax Amount"
app/locale/en_US/Mage_Sales.csv:712:"Tax Percent","Tax Percent"
app/locale/en_US/Mage_Sales.csv:784:"Total Tax","Total Tax"
app/locale/en_US/Mage_Tax.csv:4:"Add New Tax Rate","Add New Tax Rate"
app/locale/en_US/Mage_Tax.csv:5:"Add New Tax Rule","Add New Tax Rule"
app/locale/en_US/Mage_Tax.csv:15:"Apply Customer Tax","Apply Customer Tax"
app/locale/en_US/Mage_Tax.csv:17:"Apply Tax On","Apply Tax On"
app/locale/en_US/Mage_Tax.csv:18:"Apply discount on price including tax is calculated based on store tax, if ""Apply Tax after Discount"" is selected.","Apply discount on price including tax is calculated based on store tax, if ""Apply Tax after Discount"" is selected."
app/locale/en_US/Mage_Tax.csv:30:"Customer Tax Class","Customer Tax Class"
app/locale/en_US/Mage_Tax.csv:31:"Customer Tax Class Information","Customer Tax Class Information"
app/locale/en_US/Mage_Tax.csv:32:"Customer Tax Classes","Customer Tax Classes"
app/locale/en_US/Mage_Tax.csv:36:"Default Tax Destination Calculation","Default Tax Destination Calculation"
app/locale/en_US/Mage_Tax.csv:40:"Display Full Tax Summary","Display Full Tax Summary"
app/locale/en_US/Mage_Tax.csv:46:"Display Zero Tax Subtotal","Display Zero Tax Subtotal"
app/locale/en_US/Mage_Tax.csv:50:"Edit Tax Rate","Edit Tax Rate"
app/locale/en_US/Mage_Tax.csv:52:"Excl. Tax","Excl. Tax"
app/locale/en_US/Mage_Tax.csv:53:"Excl. Tax:","Excl. Tax:"
app/locale/en_US/Mage_Tax.csv:54:"Excluding Tax","Excluding Tax"
app/locale/en_US/Mage_Tax.csv:55:"Export Tax Rates","Export Tax Rates"
app/locale/en_US/Mage_Tax.csv:56:"Grand Total (Excl. Tax)","Grand Total (Excl. Tax)"
app/locale/en_US/Mage_Tax.csv:57:"Grand Total (Excl.Tax)","Grand Total (Excl.Tax)"
app/locale/en_US/Mage_Tax.csv:58:"Grand Total (Incl. Tax)","Grand Total (Incl. Tax)"
app/locale/en_US/Mage_Tax.csv:59:"Grand Total (Incl.Tax)","Grand Total (Incl.Tax)"
app/locale/en_US/Mage_Tax.csv:60:"Grand Total Excl. Tax","Grand Total Excl. Tax"
app/locale/en_US/Mage_Tax.csv:61:"Grand Total Incl. Tax","Grand Total Incl. Tax"
app/locale/en_US/Mage_Tax.csv:62:"Import / Export Tax Rates","Import / Export Tax Rates"
app/locale/en_US/Mage_Tax.csv:63:"Import Tax Rates","Import Tax Rates"
app/locale/en_US/Mage_Tax.csv:64:"Inc. Tax","Inc. Tax"
app/locale/en_US/Mage_Tax.csv:65:"Incl. Tax","Incl. Tax"
app/locale/en_US/Mage_Tax.csv:66:"Incl. Tax:","Incl. Tax:"
app/locale/en_US/Mage_Tax.csv:67:"Include Tax In Grand Total","Include Tax In Grand Total"
app/locale/en_US/Mage_Tax.csv:68:"Including Tax","Including Tax"
app/locale/en_US/Mage_Tax.csv:69:"Including and Excluding Tax","Including and Excluding Tax"
app/locale/en_US/Mage_Tax.csv:72:"Manage Customer Tax Classes","Manage Customer Tax Classes"
app/locale/en_US/Mage_Tax.csv:73:"Manage Product Tax Classes","Manage Product Tax Classes"
app/locale/en_US/Mage_Tax.csv:74:"Manage Tax Rates","Manage Tax Rates"
app/locale/en_US/Mage_Tax.csv:75:"Manage Tax Rules","Manage Tax Rules"
app/locale/en_US/Mage_Tax.csv:76:"Manage Tax Zones & Rates","Manage Tax Zones & Rates"
app/locale/en_US/Mage_Tax.csv:80:"New Tax Rate","New Tax Rate"
app/locale/en_US/Mage_Tax.csv:88:"Product Tax Class","Product Tax Class"
app/locale/en_US/Mage_Tax.csv:89:"Product Tax Class Information","Product Tax Class Information"
app/locale/en_US/Mage_Tax.csv:90:"Product Tax Classes","Product Tax Classes"
app/locale/en_US/Mage_Tax.csv:102:"Shipping & Handling (Excl.Tax)","Shipping & Handling (Excl.Tax)"
app/locale/en_US/Mage_Tax.csv:103:"Shipping & Handling (Incl.Tax)","Shipping & Handling (Incl.Tax)"
app/locale/en_US/Mage_Tax.csv:104:"Shipping & Handling Tax","Shipping & Handling Tax"
app/locale/en_US/Mage_Tax.csv:105:"Shipping (Excl. Tax)","Shipping (Excl. Tax)"
app/locale/en_US/Mage_Tax.csv:106:"Shipping (Incl. Tax)","Shipping (Incl. Tax)"
app/locale/en_US/Mage_Tax.csv:107:"Shipping Excl. Tax (%s)","Shipping Excl. Tax (%s)"
app/locale/en_US/Mage_Tax.csv:108:"Shipping Incl. Tax (%s)","Shipping Incl. Tax (%s)"
app/locale/en_US/Mage_Tax.csv:114:"Subtotal (Excl. Tax)","Subtotal (Excl. Tax)"
app/locale/en_US/Mage_Tax.csv:115:"Subtotal (Excl.Tax)","Subtotal (Excl.Tax)"
app/locale/en_US/Mage_Tax.csv:116:"Subtotal (Incl. Tax)","Subtotal (Incl. Tax)"
app/locale/en_US/Mage_Tax.csv:117:"Subtotal (Incl.Tax)","Subtotal (Incl.Tax)"
app/locale/en_US/Mage_Tax.csv:118:"Tax","Tax"
app/locale/en_US/Mage_Tax.csv:119:"Tax Calculation Based On","Tax Calculation Based On"
app/locale/en_US/Mage_Tax.csv:120:"Tax Calculation Method Based On","Tax Calculation Method Based On"
app/locale/en_US/Mage_Tax.csv:121:"Tax Class for Shipping","Tax Class for Shipping"
app/locale/en_US/Mage_Tax.csv:122:"Tax Classes","Tax Classes"
app/locale/en_US/Mage_Tax.csv:123:"Tax Identifier","Tax Identifier"
app/locale/en_US/Mage_Tax.csv:124:"Tax Rate","Tax Rate"
app/locale/en_US/Mage_Tax.csv:125:"Tax Rate Information","Tax Rate Information"
app/locale/en_US/Mage_Tax.csv:126:"Tax Rule Information","Tax Rule Information"
app/locale/en_US/Mage_Tax.csv:127:"Tax Rules","Tax Rules"
app/locale/en_US/Mage_Tax.csv:128:"Tax Section","Tax Section"
app/locale/en_US/Mage_Tax.csv:129:"Tax Titles","Tax Titles"
app/locale/en_US/Mage_Tax.csv:130:"Tax rate cannot be removed. It exists in tax rule","Tax rate cannot be removed. It exists in tax rule"
app/locale/en_US/Mage_Tax.csv:131:"Tax rates at the same priority are added, others are compounded.","Tax rates at the same priority are added, others are compounded."
app/locale/en_US/Mage_Tax.csv:149:"You cannot delete this tax class as it is used in Tax Rules. You have to delete the rules it is used in first.","You cannot delete this tax class as it is used in Tax Rules. You have to delete the rules it is used in first."
app/locale/en_US/Mage_Weee.csv:3:"Apply Tax To FPT","Apply Tax To FPT"
app/locale/en_US/Mage_Weee.csv:11:"Fixed Product Tax","Fixed Product Tax"
app/locale/en_US/Mage_Weee.csv:12:"Fixed Product Taxes","Fixed Product Taxes"
app/locale/en_US/Mage_Weee.csv:18:"Total Incl. Tax","Total Incl. Tax"
app/locale/en_US/Mage_XmlConnect.csv:275:"Grand Total (Excl. Tax)","Grand Total (Excl. Tax)"
app/locale/en_US/Mage_XmlConnect.csv:276:"Grand Total (Incl. Tax)","Grand Total (Incl. Tax)"
app/locale/en_US/Mage_XmlConnect.csv:531:"Subtotal (Excl. Tax)","Subtotal (Excl. Tax)"
app/locale/en_US/Mage_XmlConnect.csv:532:"Subtotal (Incl. Tax)","Subtotal (Incl. Tax)"
app/locale/en_US/Mage_XmlConnect.csv:536:"Tax","Tax"
app/locale/en_US/Mage_XmlConnect.csv:564:"Total incl. Tax: %1$s","Total incl. Tax: %1$s" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:51:11.303

您可以将文本添加到其中一个 CSV 文件中，以将其“翻译”为另一个字符串，例如`"Grand Total (Excl.Tax)";"Grand Total (Excl.VAT)"`

另一种方法是直接改成`tax/checkout/grandtotal.phtml`文件

# animation - 使用php获取swf动画时间

> ID：10009882
> 
> 赞同：0
> 
> 时间：2012-04-04T11:08:09.617
> 
> 标签：animation, flash, duration

这是一种使用php获取动画持续时间的方法吗？我使用 Carlos Falo Hervás 的 swfheader PHP 类来提取 swf 信息，输出如下：

```
[debug] => 
[fname] => flash/test.swf
[magic] => CWS
[compressed] => 1
[version] => 11
[size] => 31485
[width] => 504
[height] => 63
[valid] => 1
[fps] => Array
    (
        [0] => 0
        [1] => 24
    )

[frames] => 2 
```

通过将帧除以 fps 答案是 0.083s 这是错误的任何建议？

# wfp - 如何使用 Windows 过滤平台从 URL 获取应用层数据包

> ID：10009886
> 
> 赞同：2
> 
> 时间：2012-04-04T11:08:20.403
> 
> 标签：wfp

我想使用**Windows Filtering Platform**阻止一组 URL 。我只需要获取应用程序层数据包才能实现这一目标.. 有没有办法获得应用程序层数据包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T16:27:17.117

您可以使用 WinDivert，它是内核模式下的 WFP 标注驱动程序，它是用户模式库。它是（LGPL）许可下的开源项目， [查看它是文档](http://reqrypt.org/windivert-doc.html#filter_usage)

# excel - 复杂的excel宏

> ID：10009887
> 
> 赞同：3
> 
> 时间：2012-04-04T11:08:21.257
> 
> 标签：excel, vba

我正在创建一个复杂的电子表格，我可以根据每周通过我们的网络监控不同客户的呼叫。我有两张纸，“raw_data”和“Sheet1”。

我将数据从我们的服务器复制到“Sheet1”到垂直布局中，并运行一个宏来去除不必要的数据行。

在“原始数据”中，呼叫量应根据客户名称在水平布局中进行排序。我在这张表上想要的是至少一个带有分配宏的按钮，它将在 A 列中搜索下一个空闲单元格，插入新行，在序列中添加下一个日期（19/03/2012，26/03/ 2012，...），最后从“Sheet1”复制数据并将值粘贴到正确的列标题下（我想删除“Sheet1”的内容，但保留“raw_data”中的值）。

我知道 VBA 在特定点插入新行，但不是在长列表的末尾。这是我的代码：

```
Sub Insertrow()
    Rows("33:33").Select
    Selection.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
End Sub 
```

任何帮助都会很好，甚至类似的例子也会很好，所以我可以自己编辑它们，这样我就可以学习了。

谢谢！

标记

**更新**

我似乎无法以正确的格式将代码添加到评论中。所以又来了……

```
Sub Insertrow()
        'Selects next empty cell in column A
        ActiveWindow.ScrollRow = 2
        Range("A2").Select
        Selection.End(xlDown).Offset(1, 0).Select
        'Inputs the next date
        Dim n As Long, k As Long
        Application.ScreenUpdating = False
        Rng = 1
        Range(ActiveCell, ActiveCell.Offset(Val(Rng) - 1, 0)).EntireRow.Insert
        k = ActiveCell.Offset(-1, 0).Row
        'copies the formula 1 cell from the left (Column A) to the row below
        n = Cells(k, 1).End(xlToLeft).Column
        Range(Cells(k, 1), Cells(k + Val(Rng), n)).FillDown
End Sub 
```

我现在要做的是在 Sheet1 上的一列中搜索特定的文本字符串（来自 raw_data 的标题）复制该行中的值，该值低于从代码生成的日期（上图）。我可能会使用类似于上面的代码或嵌套的 if 语句，但表 1 中的值将每周删除一次。这是可能的还是我只是在脑海中幻想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:21:37.130

标记，如果数据不是表格格式（即不是表格，`listobject`那么您不需要插入该行），您可以简单地写入最后一行。要将数据写入最后一行，您可以使用类似这样的东西

```
Sub Sample()
    Dim ws As Worksheet
    Dim wslRow As Long

    Set ws = Sheets("Sheet1")

    wslRow = ws.Range("A" & ws.Rows.Count).End(xlUp).Row + 1

    ws.Range.Range("A" & wslRow).Value = "Blah Blah"
End Sub 
```

然后，如果需要，您可以对日期列上的数据进行排序。

如果您的数据是表格格式，那么您可以使用此技术然后对数据进行排序。

[宏执行时出现运行时错误“91”](https://stackoverflow.com/questions/10001641/excel-2010-vba-runtime-error-91-on-macro-execution)

高温高压

席德

# resharper - 带有 reshaper 的环绕模板，用于格式化选择

> ID：10009892
> 
> 赞同：1
> 
> 时间：2012-04-04T11:08:39.447
> 
> 标签：resharper, resharper-6.0

我正在尝试使用 resharper 创建一个环绕模板，以格式化这样的选择

```
string foo = "A text with spaces"; 
```

进入这个：

```
string foo = Translate("ATextWithSpaces"); 
```

我想自己选择“带空格的文本”，按下环绕快捷方式，然后看着它发生！

我有一个生成的模板

```
string foo = Translate("A text with spaces") 
```

...但这对我来说还不够好。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:52:08.130

如果您准备冒险进入 ReSharper 插件开发领域，这会产生一个非常非常简单的插件，需要几分钟才能实现。基本上，您可以做一个上下文操作，当插入符号位于字符串文字上时，将采用所述文字，删除空格（带），然后使用例如，修改后的文字在哪里`string.Replace`创建一个新表达式。`CSharpElementFactory.CreateExpressionAsIs("Translate($1)", x)``x`

如果您对此感兴趣并需要更多信息，请随时与我联系（Skype：dmitri.nesteruk，电子邮件：dn at jetbrains dot com）如有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:25:10.367

扩展我的评论：

您可以创建一个新方法来根据需要格式化字符串，例如：

```
public string RemoveSpaces(string input)
{
    return new System.Globalization.CultureInfo("en-GB", false).TextInfo.ToTitleCase(input).Replace(" ", "");
} 
```

# c# - 如何获取网页总返回大小/用于调用网页的带宽

> ID：10009893
> 
> 赞同：7
> 
> 时间：2012-04-04T11:08:41.523
> 
> 标签：c#

我正在使用 HttpWebRequest 调用页面并使用 HttpWebResponse 来获取结果，

我的问题是如何获取或计算返回页面的总大小（以字节为单位）。除此之外，我还想知道我用来调用页面的流量/带宽。

我能够获取内容长度，但内容长度在 Firebug 或其他网络流量程序中不匹配。因此我不确定内容长度是否是页面的大小。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:28:09.127

Content.Length 仅返回 HTML 的长度，之后浏览器请求图像和其他 javascript 内容

1) Fiddler 像代理服务器一样计算带宽大小，你可以尝试做同样的事情 2) 我看到的另一种方法是尝试做一些网络级别的计算查看[System.Net.NetworkInformation](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.aspx)命名空间以及[如何计算网络带宽速度在 c#](http://www.m0interactive.com/archives/2008/02/06/how_to_calculate_network_bandwidth_speed_in_c_/)中可以提供帮助

希望这可以帮助

# android - 在 OpenGL ES 中放大/缩小

> ID：10009895
> 
> 赞同：3
> 
> 时间：2012-04-04T11:08:54.953
> 
> 标签：android, opengl-es, zooming

我想学习如何执行放大和缩小。这是一个旋转的二维三角形的简单示例。你能告诉我如何在这个简单的例子中添加放大和缩小功能吗？

我应该使用`gl.glScalef`吗？如何？

```
public class GLrenderer implements Renderer {
    public GLqueue tri;
    private float angle = 0;

    public GLrenderer() {
        tri = new GLqueue();
    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig eglConfig) {
        // TODO Auto-generated method stub
        gl.glDisable(GL10.GL_DITHER);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
        gl.glClearColor(.0f, .0f, .0f, 0f);
        gl.glClearDepthf(1f);
    }

    @Override
    public void onDrawFrame(GL10 gl) {
        // TODO Auto-generated method stub
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_COLOR_BUFFER_BIT);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        gl.glTranslatef(0, 0, -10);
        gl.glPushMatrix();
        gl.glRotatef(angle, 0, 0, 1);
        tri.draw(gl);
        gl.glPopMatrix();
        angle++;
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        // TODO Auto-generated method stub
        gl.glViewport(0, 0, width, height);
        float ratio = (float) width / height;
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glFrustumf(-ratio, ratio, -1, 1, 1, 25);
    }
} 
```

这是我的活动课程，并`onTouch`添加了事件。我应该添加什么以便当我触摸屏幕时缩放起作用？

```
GLSurfaceView OurSurface;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    OurSurface = new GLSurfaceView(this);
    OurSurface.setRenderer(new GLrenderer());
    setContentView(OurSurface);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    int action = event.getAction();
    switch (action) {
        case (MotionEvent.ACTION_DOWN): // Touch screen pressed
            break;
        case (MotionEvent.ACTION_UP): // Touch screen touch ended
            break;
        case (MotionEvent.ACTION_MOVE): // Contact has moved across screen
            break;
        case (MotionEvent.ACTION_CANCEL): // Touch event cancelled
            break;
    }
    return super.onTouchEvent(event);
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    OurSurface.onPause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    OurSurface.onResume();
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    return false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T08:34:35.447

从技术上讲，实现相机缩放的正确方法是将参数修改为透视投影：

```
float zoom = 1.5;
// ....
gl.glFrustumf(-ratio/zoom, ratio/zoom, -1/zoom, 1/zoom, 1, 25); 
```

或者

```
gl.glFrustumf(-ratio, ratio, -1, 1, zoom, 25); 
```

或者

```
gl.glFrustumf(-ratio, ratio, -1, 1, zoom, 25*zoom); 
```

取决于哪个更适合您的应用程序。

如果您希望缩放更改应用程序中间，那么您还必须移动这些行：

```
float ratio = (float) width / height;
gl.glMatrixMode(GL10.GL_PROJECTION);
gl.glLoadIdentity();
gl.glFrustumf(-ratio, ratio, -1, 1, zoom, 25); 
```

进入您的绘图例程，以便在每一帧上调用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:28:34.107

`glScalef`您可以通过或移动相机缩放模型。由于缩放会影响所有绘制的对象，因此移动相机可能是更好的方法。插入

```
gl.glTranslatef(0,0, 5.0f * Math.sin(Math.PI * ((angle % 360.0f)/180.0f))); 
```

就在调用`glLoadIdentity`in之后`onDrawFrame`。这*应该*-*没有运行代码*- 导致对象正弦来回移动。

考虑限制`angle`to的值`[0.0f;360.0f]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:21:22.553

您可以在 Activity 类的 onTouch() 方法中计算缩放值，并在 onDrawFrame() 的 glTranslatef() 方法中使用它作为

gl.glTranslatef(0, 0, -zoom); 就在 glLoadIdentity() 之后..

它会起作用...如果您遇到困难，请告诉我...

# python - appengine ndb init model by kind name

> ID：10009897
> 
> 赞同：1
> 
> 时间：2012-04-04T11:09:04.853
> 
> 标签：python, google-app-engine, app-engine-ndb

我需要存储数据，问题是我只知道与种类名称相同的模型名称

```
class Tasks(ndb.Model):
    title = ndb.StringProperty() 
```

如果我已经有了钥匙，我可以做到

```
model = ndb.Key(urlsafe=key).get()
model.title = "new tasks"
model.put() 
```

现在我需要存储*新*实体，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T05:53:25.933

让您的用户能够实例化和存储任何类型的模型可能是一个非常糟糕的主意，因此进行直接映射可能是错误的方法。此外，它将您的内部数据存储表示直接耦合到您的外部 API，这带来了额外的限制。

相反，您可能想自己定义一个映射，如下所示：

```
model_map = {
    'external_name': model.MyModel,
    # ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:59:22.240

```
ndb.Model._kind_map['Tasks'](title='...') 
```

或者更通用的东西，比如

```
eval('Tasks')(title='...') 
```

在这两种情况下，您都需要事先导入模型。

或者

```
getattr(models, 'Tasks')(title='...') 
```

if`models`是模型所在的 python 模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T20:25:27.793

对于数据库

```
from google.appengine.ext.db import class_for_kind
class_for_kind(model_name) -> returns model Class 
```

对于新开发银行

```
from google.appengine.ext import ndb
ndb.Model._kind_map[model_name] -> returns model Class 
```

# sql - 匹配两个具有计数的子查询

> ID：10009899
> 
> 赞同：1
> 
> 时间：2012-04-04T11:09:13.147
> 
> 标签：sql, count, sql-server-2008-r2

我正在尝试检查两个表的计数是否相同

我有一个查询：

```
SELECT Count(1) AS Items,
       [Basket Id],
       [Customer Id]
FROM   Order_Lookup
GROUP  BY [Basket Id],
          [Customer Id] 
```

返回：

```
3   2   135674
5   4   115576
3   5   115576
2   3   118342
4   6   182368 
```

而且我还有：

```
SELECT Count(1) AS Items,
                 a.[Basket Id],
                 a.[Customer Id]
          FROM   C1059204.Order_Lookup a
          WHERE  a.[Product Id] NOT IN (SELECT [Product Id]
                                        FROM   Orders
                                        WHERE  [Customer_Id] = a.[Customer Id]
                                               AND OrderDate = Dateadd(DAY, Datediff(DAY, 0, Getutcdate()), -2)
                                               AND OrderStatus IN ('POSTED' ))
          GROUP  BY a.[Basket Id],
                    a.[Customer Id] 
```

返回：

```
3   2   135674
3   4   115576
3   5   115576
2   3   118342
4   6   182368 
```

如您所见，115576 Basket Id 4 的编号较小。

我需要像这样的查询

```
SELECT * FROM TABLE
WHERE (COUNT OF FIRST SUBQUERY) = (COUNT OF SECOND SUBQUERY) 
```

我该怎么做，我已经尝试了很长时间，无法弄清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:22:52.370

您可以包装两个子查询并加入别名。

```
select *
from (
    SELECT Count(1) AS Items,
           [Basket Id],
           [Customer Id]
    FROM   Order_Lookup
    GROUP  BY [Basket Id],
              [Customer Id]
) as query1
join (
    SELECT Count(1) AS Items,
                     a.[Basket Id],
                     a.[Customer Id]
              FROM   C1059204.Order_Lookup a
              WHERE  a.[Product Id] NOT IN (SELECT [Product Id]
                                            FROM   Orders
                                            WHERE  [Customer_Id] = a.[Customer Id]
                                                   AND OrderDate = Dateadd(DAY, Datediff(DAY, 0, Getutcdate()), -2)
                                                   AND OrderStatus IN ('POSTED' ))
              GROUP  BY a.[Basket Id],
                        a.[Customer Id] 
) as query2 on query1.Items = query2.Items 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:19:47.860

像这样做：

```
SELECT count(*),
       subquery.[Basket Id],
       subquery.[Customer Id] 
FROM (
  -- Put your subselect in a case expression returning 1 or 0 to indicate
  -- whether it would evaluate to true or false for any given record
  SELECT CASE WHEN a.[Product Id] IN (
                SELECT [Product Id]
                  FROM Orders
                 WHERE [Customer_Id] = a.[Customer Id]
                   AND OrderDate = Dateadd(DAY, Datediff(DAY, 0, Getutcdate()), -2)
                   AND OrderStatus IN ('POSTED' ))
         THEN 1
         ELSE 0 END [isPosted],
       a.[Basket Id],
       a.[Customer Id]
   FROM   C1059204.Order_Lookup a
 ) subquery
 GROUP  BY subquery.[Basket Id],
           subquery.[Customer Id] 
 -- Those groups that contain at least one record which would figure in your 
 -- "second subquery" should be omitted altogether
 HAVING SUM([isPosted]) = 0 
```

# android - 通过json在mapview上加载坐标

> ID：10009900
> 
> 赞同：0
> 
> 时间：2012-04-04T11:09:22.117
> 
> 标签：android, json, google-maps, android-mapview

如果我的 json 的格式如下所示，则带有地址和纬度/经度的商店

```
[{"StoreId":"50","StoreTitle":"Pocket 

Docket","StoreLogo":"","StoreTradingName":"Pocket 

Docket","StoreWebsite":"http:\/

\/pocketdocket.com.au","Address":{"Address1":"367 

","Address2":"George 

St.","City":"Sydney","State":"NSW","ZipCode":"2000","Longitude"

:"151.2284339","Latitude":"-

33.5487607","AreaCode":"2000","Phone":"0280839400"}, 
```

和我要显示的mapactivity类如下

```
public class MapActivity extends com.google.android.maps.MapActivity {
MapView mapView;
private LocationManager mylocmng;
private LocationListener myloclist;
private MapController mympctrl;

private void CenterLocation(GeoPoint centrGeopt){
    mympctrl.animateTo(centrGeopt);
    //Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
};
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);

    mapView=(MapView)findViewById(R.id.mv);
    //mapView.setSatellite(true);
    mapView.setStreetView(true);
    mapView.setBuiltInZoomControls(true);
    mympctrl = mapView.getController();
    mympctrl.setZoom(8);
    mylocmng=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
    myloclist=new MyLocationListener();
    mylocmng.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,myloclist);
    Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
     int markerWidth = marker.getIntrinsicWidth();
     int markerHeight = marker.getIntrinsicHeight();
     marker.setBounds(0, markerHeight, markerWidth, 0);
     LocationOverlay myItemizedOverlay = new LocationOverlay(marker);
     mapView.getOverlays().add(myItemizedOverlay);

   /* GeoPoint myPoint1 = new GeoPoint(0*1000000, 0*1000000);
     myItemizedOverlay.addItem(myPoint1, "myPoint1", "myPoint1");
     GeoPoint myPoint2 = new GeoPoint(50*1000000, 50*1000000);
     myItemizedOverlay.addItem(myPoint2, "myPoint2", "myPoint2");
    //Get the current location in start-up
      GeoPoint initGeoPoint = new GeoPoint(
       (int)(mylocmng.getLastKnownLocation(
        LocationManager.GPS_PROVIDER)
        .getLatitude()*1000000),
       (int)(mylocmng.getLastKnownLocation(
        LocationManager.GPS_PROVIDER)
        .getLongitude()*1000000));
       CenterLocation(initGeoPoint);*/

       ImageButton bcknrby=(ImageButton)findViewById(R.id.nearbybuttn);
        bcknrby.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent myint = new Intent(MapActivity.this,NearBy.class);
                startActivity(myint);
            }

        });
     }
private class MyLocationListener implements LocationListener{

    @Override
    public void onLocationChanged(Location argLocation) {
        // TODO Auto-generated method stub
        Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
         int markerWidth = marker.getIntrinsicWidth();
         int markerHeight = marker.getIntrinsicHeight();
         marker.setBounds(0, markerHeight, markerWidth, 0);
         LocationOverlay myItemizedOverlay = new LocationOverlay(marker);
         mapView.getOverlays().add(myItemizedOverlay);
        GeoPoint myGeoPoint = new GeoPoint(
                (int)(argLocation.getLatitude()*1000000),
                (int)(argLocation.getLongitude()*1000000));
               myItemizedOverlay.addItem(myGeoPoint,"myPoint1", "myPoint2");
               CenterLocation(myGeoPoint);
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
         Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_LONG ).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
         Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT ).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }}

@Override
protected boolean isRouteDisplayed() {
    return false;
} 
```

}

如何将坐标从 json 加载到地图视图？？？？？？任何帮助将不胜感激。

这是我的解析代码

```
try{JSONArray myID=j2.getJSONArray("stores");
        for(int i=0;i<myID.length();i++){
            Log.v("state","json address being read");
            JSONObject j3= myID.getJSONObject(i);
            String name = j3.getString("Address");

            Log.v("Address",name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:53:17.957

您可以从这些链接中学习 json 解析。这些链接中显示的非常简单的示例。

[http://www.technotalkative.com/android-json-parsing/](http://www.technotalkative.com/android-json-parsing/)

[http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

您可以通过解析 JSON 来获取纬度和经度，然后简单地将这些值传递给您的`GeoPoint myGeoPoint`.

**编辑**

```
 String str = "{\"error\":false,\"totalresults\":6,\"stores\":" +               
                "[{" +
                "\"StoreId\":\"50\",\"StoreTitle\":\"Pocket Docket\",\"StoreLogo\":\"\",\"StoreTradingName\":\"Pocket Docket\"," +
                "\"StoreWebsite\":\"http:\\\\pocketdocket.com.au\"," +
                "\"Address\":" +
                "{\"Address1\":\"367 \",\"Address2\":\"George St.\"," +
                "\"City\":\"Sydney\",\"State\":\"NSW\",\"ZipCode\":\"2000\",\"Longitude\":\"151.2284339\",\"Latitude\":\"-33.5487607\"," +
                "\"AreaCode\":\"2000\",\"Phone\":\"0280839400\"}}]}";

        try 
        {
             jsonObject = new JSONObject(str);
             JSONArray arr_start = jsonObject.getJSONArray("stores");
                JSONObject obj_arr = arr_start.getJSONObject(0);
                JSONObject arr_address = obj_arr.getJSONObject("Address");
                String lat = arr_address.getString("Latitude");
                String Longi = arr_address.getString("Longitude");
        }
        catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

希望这会对您有所帮助，如果对您有帮助，请不要忘记接受它。

谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:24:27.037

[按照 MapView 教程http://developer.android.com/guide/tutorials/views/hello-mapview.html](http://developer.android.com/guide/tutorials/views/hello-mapview.html)中的描述创建 OverlayItem

# android - 如何在谷歌地图中找到 API 密钥？

> ID：10009901
> 
> 赞同：0
> 
> 时间：2012-04-04T11:09:22.397
> 
> 标签：android, google-maps

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/mapview"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:clickable="true"
 android:apiKey="YOUR API KEY"
 /> 
```

这是谷歌地图视图的 XML 代码。有什么需要添加的`AndroidManiFest.xml`吗？

我无法理解。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:18:11.270

那是确切的路径——

```
 keytool -list -keystore "C:\Users\XYZ\.android\debug.keystore" 
```

cmd 提示获取 GoogleMap API 密钥的 MD5 指纹的总路径* ***** ** *** ****

```
 D:\eclipse\jre\bin>keytool -list -keystore "C:\Users\XYZ\.android\debug.keystore" 
```

MD5 指纹将如下所示——

```
 3E:F4:D6:E6:93:4D:BB:B8:62:3A:D6:0F:E0:FC:4C:65 
```

当您获得指纹号码之后获取 API 密钥时，请使用此链接---

```
 http://code.google.com/android/add-ons/google-apis/maps-api-signup.html 
```

然后您将获得您系统的 API 密钥，并可以轻松获取 Map....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T05:13:01.693

请检查[此链接](https://developers.google.com/maps/documentation/android-api/signup)。一旦您在 Google Play Store 上推出您的应用程序，它将完全指导您生成 API 密钥并从调试密钥库迁移到发布密钥库。

**注意：如果您使用的是 Android Studio，那么生成 SHA-1 没什么大不了的。**

按着这些次序：

1.  打开安卓工作室
2.  打开您的项目
3.  单击 Gradle（从右侧面板中，您将看到 Gradle Bar）
4.  单击 Refresh（从 Gradle Bar 中单击 Refresh，您将看到 List Gradle 项目的脚本）
5.  单击您的项目（您的项目名称表单列表（根））
6.  点击任务
7.  点击安卓
8.  双击signingReport（您将在运行栏中获得SHA1和MD5）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-04T11:18:12.263

要生成您的 google api 密钥，您可以使用 debug debug.keystore 或使用您的 private keystore 来完成。

作为流程的一部分，您首先需要从此处 -> [Google Developers Console](https://console.developers.google.com/flows/enableapi?apiid=maps_android_backend&keyType=CLIENT_SIDE_ANDROID&reusekey=true)在 google api 控制台中创建帐户。

现在您需要通过以下 MAC OS 命令从您的 debug.keystore 或您的私有密钥库生成 SHA1。

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

对于窗户：

```
keytool -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android 
```

执行此命令后，您将获得 SHA1，如下例所示：

```
SHA1: BB:0D:AC:74:D3:21:E1:43:07:71:9B:62:90:AF:A1:66:6E:44:5D:75 
```

现在你只需要在你的谷歌开发者 API 控制台中设置这个 SHA1。

请访问此[developer.google.com](https://developers.google.com/maps/documentation/android-api/)

# iphone - 是否可以在不使用情节提要的情况下在 ios5 中创建静态表格视图？

> ID：10009902
> 
> 赞同：3
> 
> 时间：2012-04-04T11:09:28.653
> 
> 标签：iphone, ios5, uitableview, storyboard

我不想在我的应用程序中使用故事板，但是静态表格视图和自定义表格视图单元格非常方便。有什么方法可以在非基于故事板的应用程序中使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:59:19.620

先澄清一下。静态或动态和自定义表格视图不是现有的表达式，我想您将故事板与 InterfaceBuilder 混合，但我想我知道您的意思。

1.  除了故事板，你可以在没有故事板的情况下做任何事情。请考虑到它不适用于具有较早 IOS 版本然后 IOS5 的设备，或者更好地说您无法部署它。

2.  “静态”tableview 是 UITableViewController 的简单视图，您可以在 .h 文件接口部分中定义，如下所示：

    ```
    @interface MyListTableViewController : UITableViewController 
    ```

它有一个可以用作 myListTableViewController.view 的视图。或在您的代码中附加任何其他视图，或在 XCode Interface Builder 中拖放一个新视图。

1.  您可以使用任何其他类型的控制器，例如

    ```
    @interface MyNotTableViewController : UIViewController 
    <UITableViewDelegate, UITableViewDataSource> 
    ```

但是您必须确保它与 tableview 委托和数据源委托一起使用，因为您看到附加到带括号的行。从这一点开始，您可以使用与我之前提到的相同的方法来附加更多的表格视图。如果您将此 tableview 调整为屏幕或主视图的完整大小，您将在视觉上得到与上面 No2 相同的结果。

# android - source.android.com 中用于构建 android 源代码的说明是否已过时？

> ID：10009905
> 
> 赞同：0
> 
> 时间：2012-04-04T11:09:41.277
> 
> 标签：android, build

我一直在尝试按照[官方网站上](http://source.android.com/source/initializing.html)发布的说明构建 android 源代码。

但是，在我看来，这些步骤与 Ubuntu 10.04.4 的当前存储库有点过时（例如：默认 gcc 现在是 gcc 4.4）。

该站点中的说明建议使用 64 位 Ubuntu 10.04。具有讽刺意味的是，在 Ubuntu 10.04 下载页面中，它建议使用 32 位。

遇到多个不兼容问题时遇到困难。其中大部分已经在堆栈溢出本身中讨论了两年。

通过反复下载如此庞大的 repo 耗尽了互联网带宽。

最近有人成功构建了android源代码吗？如果是这样，你能指点我任何文件吗？

> `prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: out/target/product/generic/obj/SHARED_LIBRARIES/libicui18n_intermediates/msgfmt.o: in function icu_46::MessageFormat::toPattern(icu_46::UnicodeString&) const:external/icu4c/i18n/msgfmt.cpp:827: error: undefined reference to 'typeinfo for icu_46::PluralFormat'`
> `prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: out/target/product/generic/obj/SHARED_LIBRARIES/libicui18n_intermediates/msgfmt.o: in function icu_46::MessageFormat::toPattern(icu_46::UnicodeString&) const:external/icu4c/i18n/msgfmt.cpp:827: error: undefined reference to 'typeinfo for icu_46::SelectFormat'`
> `prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: out/target/product/generic/obj/SHARED_LIBRARIES/libicui18n_intermediates/numfmt.o: in function icu_46::NumberFormat::makeInstance(icu_46::Locale const&, icu_46::NumberFormat::EStyles, UErrorCode&):external/icu4c/i18n/numfmt.cpp:1206: error: undefined reference to 'icu_46::NumberingSystem::createInstance(icu_46::Locale const&, UErrorCode&)'`
> `prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: out/target/product/generic/obj/SHARED_LIBRARIES/libicui18n_intermediates/numfmt.o: in function icu_46::NumberFormat::makeInstance(icu_46::Locale const&, icu_46::NumberFormat::EStyles, UErrorCode&):external/icu4c/i18n/numfmt.cpp:1215: error: undefined reference to 'icu_46::NumberingSystem::isAlgorithmic() const'`
> `prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: out/target/product/generic/obj/SHARED_LIBRARIES/libicui18n_intermediates/numfmt.o: in function icu_46::NumberFormat::makeInstance(icu_46::Locale const&, icu_46::NumberFormat::EStyles, UErrorCode&):external/icu4c/i18n/numfmt.cpp:1200: error: undefined reference to 'icu_46::NumberingSystem::createInstance(icu_46::Locale const&, UErrorCode&)'`
> `prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: out/target/product/generic/obj/SHARED_LIBRARIES/libicui18n_intermediates/numfmt.o: in function icu_46::NumberFormat::getEffectiveCurrency(unsigned short*, UErrorCode&) const:external/icu4c/i18n/numfmt.cpp:1038: error: undefined reference to 'ucurr_forLocale_46'`
> `prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: out/target/product/generic/obj/SHARED_LIBRARIES/libicui18n_intermediates/rbt_pars.o: in function icu_46::RuleHalf::parseSection(icu_46::UnicodeString const&, int, int, icu_46::UnicodeString&, icu_46::UnicodeString const&, signed char, UErrorCode&):external/icu4c/i18n/rbt_pars.cpp:548: error: undefined reference to 'icu_46::TransliteratorIDParser::parseFilterID(icu_46::UnicodeString const&, int&)'`
> `make: *** [out/target/product/generic/obj/SHARED_LIBRARIES/libicui18n_intermediates/LINKED/libicui18n.so] Error 1`
> `make: *** Waiting for unfinished jobs....`

# c# - 线程/TPL 等

> ID：10009907
> 
> 赞同：0
> 
> 时间：2012-04-04T11:09:46.387
> 
> 标签：c#, multithreading, c#-3.0, task-parallel-library

我需要处理 1600 万条数据库记录，这将花费我很长时间。我不精通线程所以想我会在这里问。我的想法是我需要执行以下操作，但不确定如何：

1.  获取我的 1600 万条记录
2.  将它们分成许多“块”
3.  发送这些块中的每一个以在它们的线程上进行处理

这听起来对吗？我将如何分配我的工作量（16m 记录）等等......？

如果您能提供中肯的建议，请欢呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:49:30.583

如果您想并行处理一组项目，这正是[`Parallel.Foreach()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)它的用途。您只需将要为每个项目执行的操作（可能作为 lambda）传递给它，它会负责将您的集合分成块并执行它。

但是你必须小心你在那个动作中投入了什么。这是因为代码将同时在更多线程上执行，因此您不应该以非线程安全的方式访问任何共享状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:23:11.213

我建议您通过以下方式使用众所周知的生产者-消费者模式：

*   单个线程（生产者）从数据库中提取记录，创建任务（处理单个或多个记录）并将它们放入共享队列中。
*   一组线程（消费者）从队列中提取任务并并行处理它们。

实现这一点的一个非常简单的方法是使用`ThreadPool`类。它方便地为您管理队列和工作人员。您所需要的只是通过`QueueUserWorkItem`.

或者，如果您想使用 TPL 构造，您可以自己使用`Task`s 和a 的组合来实现上述机制`ConcurrentQueue`。

# gridview - 弹出窗口关闭后仅刷新父页面上的 GridView

> ID：10009911
> 
> 赞同：0
> 
> 时间：2012-04-04T11:09:51.553
> 
> 标签：gridview, updatepanel, refresh

我在父页面的更新面板中有一个 gridview，它是根据一些搜索条件（在文本框和下拉列表中）填充的。它有一个请求状态字段以及一些其他字段。有一个按钮可以打开一个弹出窗口（Aspx 页面），用户可以在其中选择批准者并提交请求。一旦弹出窗口关闭，我想在当前请求状态的父页面上自动刷新 gridview（也保留​​搜索条件）。

我正在使用 modalWin 打开一个弹出页面。

## 更新

我仍在寻找答案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:47:14.937

尝试以下步骤来实现相同的目的：

**弹出页面：**

1.  添加父页面的回调和事件名称

asp:button id="submitButton" runat="server" text="Submit" OnClientClick="window.opener.__doPostBack('Search_OnClick','');">

**父页面代码隐藏：**

1.  在 Parent 中添加代码

    protected void Page_Load(object sender, EventArgs e) { this.ClientScript.GetPostBackEventReference(this, string.Empty);

    ```
    if (this.IsPostBack)
        {
            string eventTarget = (this.Request["__EVENTTARGET"] == null) ? string.Empty : this.Request["__EVENTTARGET"];

            if (eventTarget == "btnSearch_Click")
            {
              btnSearch_Click(sender, e);
            }
        } 
    ```

    }

# c++ - 如何在 C++ 中的字符串中嵌入 NULL 字符？

> ID：10009917
> 
> 赞同：2
> 
> 时间：2012-04-04T11:10:45.180
> 
> 标签：c++, string, null

我可以在 C++ 中使用支持嵌入 NULL 字符的字符串吗？

我的问题是：使用嵌入的 NULL 构造字符串，因此将其作为字节数组发送到 C++ DLL。

```
 string inputStr("he\0llo", 6);
    int byteLength = 6;
    BYTE *inputByte = (BYTE*)(char*)inputStr.c_str();
    ApplyArabicMapping(inputByte , byteLength); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:14:20.577

是的，`std::string`支持存储`NULL`字符，因为它不是-`NULL`终止的。您可以通过多种方式创建一个：

```
string str("he\0llo", 6);
str.append(1, '\0');
str.push_back('\0');
const char[] cstr = "hell\0o";
string str2(cstr, cstr + sizeof(cstr) - 1); // - 1 for the NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:14:26.340

您可以使用*counted strings*，其中字符缓冲区与其“内容长度”一起存储；这允许您嵌入任何字符。`std::string`，例如，是一种计数字符串。

显然，您不能将这样的字符串传递给需要经典 C 字符串的函数，因为它会将遇到的第一个 null 视为字符串终止符。

# php - 如何在我的网页中嵌入 mpg

> ID：10009918
> 
> 赞同：5
> 
> 时间：2012-04-04T11:10:46.853
> 
> 标签：php, javascript, html, mpeg

我想将 mpg（兼容 dvd 的 mpeg2）电影文件嵌入到我的网页中。我没有机会将这些视频转换为任何其他格式。该网站仅供个人使用，因此任何类型的解决方案都是完美的。

真正appriciate任何建议或解决方案。

这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>

<embed src="my_video.mpg" autostart="false" height="350" width="500" />

</body>
</html> 
```

解决了：

我对这个问题的解决方案是我必须为我的浏览器重新安装 wmp 插件并且它工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:55:39.010

```
<video width="500px" height="350px" autobuffer="autobuffer" autoplay="autoplay" loop="loop" controls="controls">
    <source src='my_video.mpg' type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>
</video> 
```

[资源](http://www.chipwreck.de/blog/2010/02/25/html-5-video-tag-and-attributes/)

[视频标签规范](http://www.w3.org/TR/html5/the-video-element.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:25:17.147

试试这个（适用于 IE）

```
<EMBED SRC="movie.mpg" AUTOPLAY=true WIDTH=160 HEIGHT=120></EMBED> 
```

编辑：嗯，对我有用。你可以试试这个作为替代方案：

```
<object id="MediaPlayer1" CLASSID="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"
standby="Loading Microsoft Windows® Media Player components..." type="application/x-oleobject" width="280" height="256">
<param name="fileName" value="your_file.mpg">
<param name="animationatStart" value="true">
<param name="transparentatStart" value="true">
<param name="autoStart" value="true">
<param name="showControls" value="true">
<param name="Volume" value="-450">
<embed type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" src="your_file.mpg" name="MediaPlayer1" width=280 height=256 autostart=1 showcontrols=1 volume=-450>
</object> 
```

还要确保您的 PC 上安装了正确的编解码器

# javascript - 无阻塞 setTimeout(fn, 0)

> ID：10009919
> 
> 赞同：0
> 
> 时间：2012-04-04T11:10:58.877
> 
> 标签：javascript

多年来，我一直使用 JavaScript 作为工具，但直到最近我才开始使用它编写应用程序。在看了[Crockford on JavaScript - Level 6: Loopage 之后](http://www.youtube.com/watch?v=QgwSUtYSUqA)，我开始欣赏 Event Loop 和不阻塞的风格。为了更好地掌握这一点，我回到了一个应用程序，我相信我有一个设计糟糕的代码区域。

该应用程序下载了一个约 45KB 的 JSON 文件（已压缩、未压缩），其中包含约 20 个元素，因此平均每个元素具有约 2.25KB 的数据。下载每分钟进行一次，并且手动触发，此时新阵列替换旧阵列。每 15 秒清除一次 DOM 并迭代数组。对数据执行计算和逻辑以创建要插入到 DOM 中的 DOM 元素组。

而不是这样做：

```
for (int i = 0; i < array.length; i++) {
  // Perform logic
} 
```

我将如何以无阻塞的方式实现它？到目前为止，我想出了：

```
var performLogic = function performLogic(element) {
  // Perform logic
}

var counter = 0;
var iterator = function iterator() {
  counter += 1
  if (counter < array.length) {
    performLogic(array[counter]);
    setTimeout(iterator, 0);
  }
}

setTimeout(function() {
  counter = 0;
  iterator();
}, 0); 
```

我无法理解它。我知道如果在调用之间下载了数据，这将失败`performLogic()`，因为数组长度*可能会*改变，无论数据组不会来自同一个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:22:29.360

```
var arrayData=[], // current data array for performing logic
    newArrayData=[], // new downloaded data array for performing logic
    arrayDataIndex=0;

var doAjaxRequest=function(fCallback){
  // here must be placed code which doing request for downloading data. "~45KB JSON file"
  // if success calling fCallback function and passing data.
};

var genNewDataArray=function(data){
  // here must be placed code which converts and saves "data" variable value 
  // into "newArrayData" variable value. For example:
  //   newArrayData = convertDataIntoArrayData(data);
  // next calling:
  setTimeout(newDataArrayLoaded,0);
  // or can be simply calling newDataArrayLoaded(); without setTimeout
};

var newDataArrayLoaded=function(){
  if(arrayDataIndex===0){
    arrayData=newArrayData;
    performLogicForAll();
  }
  else setTimeout(newDataArrayLoaded,0);
};

var performLogicForAll=function(){
  performLogicForOne(arrayData[arrayDataIndex]);
  arrayDataIndex++;
  if(arrayDataIndex===arrayData.length)arrayDataIndex=0;
  else setTimeout(performLogicForAll,0);
};

var performLogicForOne=function(){
};

// loading every 15 seconds a new data with help of setInterval.
// this is not optimized! use another logic in your page.
setInterval(function(){doAjaxRequest(genNewDataArray);},15000); 
```

# hibernate - 如何为单个会话启用 hibernate.order_inserts 属性

> ID：10009920
> 
> 赞同：2
> 
> 时间：2012-04-04T11:11:08.123
> 
> 标签：hibernate

我将启用`hibernate.order_inserts`以改进我的批量插入操作。
正如我所看到的，这是会话工厂级别的属性。但是，我认为为我的应用程序所做的所有插入启用此类属性有点冒险。是否有为单个会话

启用属性的选项？`hibernate.order_inserts`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:19:08.047

翻遍hibernate源码，当通过[Configuration.buildSessionFactory()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Configuration.html#buildSessionFactory%28%29)构建[SessionFactory](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/SessionFactory.html)时 ，内部会调用[SettingsFactory.buildSettings()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/SettingsFactory.html#buildSettings%28java.util.Properties%29) 将hibernate配置属性解析到[Settings](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Settings.html)实例中。将大步进入[Settings](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Settings.html)实例的属性。`hibernate.order_inserts``orderInsertsEnabled`

然后将[Settings](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Settings.html)实例传递给 SessionFactoryImpl 的构造函数，该构造函数是[SessionFactory](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/SessionFactory.html)[的](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/impl/SessionFactoryImpl.html)实现，并将其分配给其内部[设置属性](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/impl/SessionFactoryImpl.html#getSettings%28%29)。此[设置属性](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/impl/SessionFactoryImpl.html#getSettings%28%29)被声明为[最终](http://en.wikipedia.org/wiki/Final_%28Java%29)属性，其值一旦设置就无法更改。

[Settings](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Settings.html)的`orderInsertsEnabled`属性通过 getter [isOrderInsertsEnabled()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Settings.html#isOrderInsertsEnabled%28%29)暴露给客户端。再次搜索代码并确认只有一个地方（[ActionQueue.sortActions()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/engine/ActionQueue.html#sortActions%28%29)）可以调用此 getter，而[Settings](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/cfg/Settings.html)实例正是从[SessionFactoryImpl中获取的](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/impl/SessionFactoryImpl.html)

因此，我认为`hibernate.order_inserts`在运行时没有任何选项可以更改，无论是在会话工厂级别还是会话级别。因此，您必须使用`hibernate.order_inserts`set 创建另一个会话工厂以启用以实现您的目的。

# symfony - Symfony2：执行 bin/vendors install --reinstall 后的 SonataBundle 致命错误

> ID：10009923
> 
> 赞同：0
> 
> 时间：2012-04-04T11:11:17.097
> 
> 标签：symfony, vendor, symfony-sonata

我尝试使用命令行代码重新安装供应商文件：

```
bin/vendors install --reinstall 
```

它安装成功。但是当我尝试访问我的网站时，我收到了这个致命错误：

> 致命错误：类 Sonata\DoctrineORMAdminBundle\Model\ModelManager 包含 2 个抽象方法，因此必须声明为抽象方法或实现其余方法（Sonata\AdminBundle\Model\ModelManagerInterface::getDataSourceIterator, Sonata\AdminBundle\Model\ModelManagerInterface::getExportFields） C:\xampp\htdocs\myProject\vendor\bundles\Sonata\DoctrineORMAdminBundle\Model\ModelManager.php 在第 496 行

Sonata\AdminBundle\Model\ModelManagerInterface 似乎有两个函数：getDataSourceIterator 和 getExportFields，由 Sonata\DoctrineORMAdminBundle\Model\ModelManager 类来实现。

我不知道这里需要做什么。有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T02:27:45.207

当您尝试使用过时的 Sonata 的 Doctrine2 ORM Admin Bundle 运行 Sonata 的 Admin Bundle 2.0 时，就会发生这种情况。你所要做的就是更新你的 Doctrine2 ORM Admin Bundle，一切都应该运行良好。

这是如何做到的： [http ://sonata-project.org/bundles/doctrine-orm-admin/2-0/doc/reference/installation.html](http://sonata-project.org/bundles/doctrine-orm-admin/2-0/doc/reference/installation.html)

# javascript - Jquery 回调函数 - “this”

> ID：10009924
> 
> 赞同：2
> 
> 时间：2012-04-04T11:11:19.947
> 
> 标签：javascript, jquery, jquery-ui, callback

我在这里有一个 jquery (UI) 应用程序，其中整个 JQuery 代码有点混乱，所以我开始思考如何以一种更花哨的方式来构建它……我在某处读到了一篇博客文章，“哎呀" - 以 java 的方式可以通过执行以下操作来实现：

```
function RangeSelector(product_id) {
    this.product_id = product_id;
    this.start_point = "#from_" + product_id;
    this.end_point = "#to_" + product_id;
}
RangeSelector.prototype.myFunction = function() { } 
```

整个代码可以在[这里](http://pastebin.com/fPNxqX9R)找到。

我的范围选择器“类”应该包含两个 jquery ui [datetimepickers](http://trentrichardson.com/examples/timepicker/)，它们负责让用户为可以租用产品的商店选择日期时间范围

我目前遇到的问题如下：日期时间选择器获取回调函数（“unavailableFrom”，“unavailableTo”），我想做一些特定的事情，然后调用通用的“不可用”来运行。错误信息是：

```
TypeError: 'undefined' is not a function (evaluating 'this.unavailable(date)') 
```

我用萤火虫看了看，似乎“这个”不是我的 RangeSelector 对象，而是关于 datetimepicker 工作的 HTML 元素。我的问题是：如何“不可用”访问此方法？

顺便说一句，我在这里告诉你整个故事，因为我不认为我在这里选择的结构是正确的方法。如果您有多个具有共同含义的 html 元素并且您想聚合它们，您如何处理这些事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T11:14:16.447

如果您需要设置`this`为不同的值，您可以使用它[`jQuery.proxy`](http://api.jquery.com/jQuery.proxy)来执行此操作。（或者在支持 ES5 的环境中，您可以使用新[`Function#bind`](http://es5.github.com/#x15.3.4.5)函数。）`proxy`接受用于 for 的函数和值`this`，并返回一个函数，该函数将调用`this`设置为该值的原始函数。

因此，例如，假设您有您的`RangeSelector`并且想要在特定实例上`click`触发：`myFunction`

```
var r = new RangeSelector(/* ...args...*/);
$("some_selector").click($.proxy(r.myFunction, r)); 
```

现在，当`r.myFunction`被调用时，在调用中，`this`将是对该`r`对象的引用。（如果您需要知道单击了哪个 DOM 元素，请`myFunction`接受`event`jQuery 传递它的参数，并使用`event.target`.）

为了完整起见，上述使用`Function#bind`（如果浏览器支持 ES5 功能，或者您已包含 ES5 shim [因为`Function#bind`是 shim-able]）：

```
var r = new RangeSelector(/* ...args...*/);
$("some_selector").click(r.myFunction.bind(r)); 
```

更多探索（在我的博客上）：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

* * *

jQuery UI有点痛苦，因为它们没有给你`datepicker`对象，所以你无法访问. 你最好的选择可能是一个传递元素的闭包：`onSelect``event``event.target`

```
var r = new RangeSelector(/* ...args...*/);
$("some_selector")..datepicker({
    onSelect: function(dateText, inst) {
        return r.myFunction(dateText, inst, this);
    }
}); 
```

...`myFunction`接受`dateText`, `inst`, 和`element`参数的地方。

[实例](http://jsbin.com/unaguh)| [资源](http://jsbin.com/unaguh/edit)

这是有效的，因为我们分配给的函数是`onSelect`包含`r`变量的环境的闭包。

闭包经常被误解；FWIW，另一个博客条目：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:21:33.930

关键字`this`正在改变您的范围，因此它在不同的地方并不像您期望的那样意味着相同的事情。我建议您在函数中明确传递您正在使用的元素，并直接引用该元素，而不是尝试使用`this`.

# spring - Spring Eclipselink 动态会话属性

> ID：10009930
> 
> 赞同：1
> 
> 时间：2012-04-04T11:11:35.187
> 
> 标签：spring, eclipselink

我需要为我的实体使用@AdditionalCriteria Annotation 来根据登录的用户“userPrinicpal”隔离数据

我为每个实体添加了以下内容：

```
@AdditionalCriteria("this.owner = :owner") 
```

问题是：我不知道如何将 :owner 参数映射到当前登录的用户，我尝试使用 SessionCustomizer 进行映射，但我发现 SessionCustomizer 在应用程序启动时执行，而不是针对每个会话。

任何人都知道如何实现这一目标？

亲切的问候，拉齐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:23:06.033

你试过了吗，

em.setProperty("所有者", theOwner)

您还可以在持久性单元属性中传递“所有者”属性，或将其设置在 emf 上。

# asp.net - 对未分配角色的用户隐藏 Web 链接

> ID：10009937
> 
> 赞同：0
> 
> 时间：2012-04-04T11:12:07.743
> 
> 标签：asp.net, vb.net, visual-studio-2010, webforms

我目前通过使用角色和规则在我的应用程序中进行了一些安全工作，但我想知道是否可以根据用户是否属于某个角色来隐藏 Web 链接。

我目前拥有它，因此用户属于“管理员”角色或“用户”角色。已在我的应用程序中的文件夹上设置了规则，因此如果用户属于任一组，他们可以单击 Web 链接并将其带到页面。但是，如果新用户注册他们不属于任何角色，并且当他们单击 Web 链接时，它会将他们重定向到主页（参见下面的代码）。这很好，但是，我想知道如果用户不属于特定角色阻止他们点击它，是否可以隐藏该 Web 链接。此外，如果用户不属于任何角色，是否可以将他们重定向到页面以告诉他们需要分配角色？

```
<authentication mode="Forms">
  <forms loginUrl="~/Homepage1.aspx" timeout="2880" />
</authentication> 
```

我没有在当前应用程序中使用它，但在过去，它检查用户是否已通过身份验证，我想知道我是否可以使用类似的 IF 语句：如果 user.identity 不属于“用户”或“管理员”角色，然后将它们重定向到页面并显示错误？

```
 If User.Identity.IsAuthenticated = True Then

        Dim myUser As MembershipUser
        Dim objUser As Object

        myUser = Membership.GetUser(User.Identity.Name)
        objUser = myUser.ProviderUserKey

        Session("ID") = objUser

    Else

        MsgBox("You are not entitled to view this page", MsgBoxStyle.Critical, "Warning")
        Response.Redirect("~/NoAccess.aspx")

    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:15:10.060

是的，您可以使用`User.IsInRole(role as String)`：

```
<% If User.IsInRole("admin") Then %>

<a href="admin-tools.aspx">Admin Tools</a>

<% End If %> 
```

你明白了。您可以根据任何角色将其定制为您必须显示/隐藏链接的任何场景。

要了解有关角色管理的更多信息，请在[此处](http://msdn.microsoft.com/en-us/library/5k850zwb.aspx#Y1600)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T12:19:02.457

在您的情况下，我认为 LoginView 控件会更好。请参阅此处的文档：http: [//msdn.microsoft.com/en-ca/library/system.web.ui.webcontrols.loginview (v=vs.100).aspx](http://msdn.microsoft.com/en-ca/library/system.web.ui.webcontrols.loginview(v=vs.100).aspx)

祝你有美好的一天！

# sql - 无法将 ISingleResult 转换为 IEnumerable

> ID：10009938
> 
> 赞同：1
> 
> 时间：2012-04-04T11:12:26.627
> 
> 标签：sql, list, type-conversion, ienumerable

我正在尝试使用 Linqtosql 显示来自我的数据库的列表，但我想我做错了。

[如果您需要更多信息，我编写了 SPROC 以在此处](https://stackoverflow.com/questions/10008489/how-can-i-display-data-coming-from-a-database-using-asp-net-html)检索数据：这是我的代码：

```
 protected List<MySubject> GetSubjects(int userID, string Datetime)
    {
        userID = user_id;
        string[] dates = Datetime.Split('-');
        int year = int.Parse(dates[2]);
        int month = int.Parse(dates[1]);
        int day = int.Parse(dates[0]);
        ClassDAO classClass = new ClassDAO();
        List<MySubject> myTodaySubjects = GetSubjectsLinq(userID, day);
        GetSubjectsLinq(userID, day);
        return myTodaySubjects;
    }

    private List<MySubject> GetSubjectsLinq(int UserId, int day)
    {
        MySchoolDBDataContext db = new MySchoolDBDataContext();
        string Suserid = UserId.ToString();
        string Sday = day.ToString();
        var sub = db.GetSubjects(Sday , Suserid);
        return sub.ToList<MySubject>();
     } 
```

此行`"return sub.ToList<MySubject>();"`显示此错误：

```
Error   21  Instance argument: cannot convert from 
'System.Data.Linq.ISingleResult' to 'System.Collections.Generic.IEnumerable'. 
```

你知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:15:47.137

检查你的

> db.GetSubjects (Sday, Suserid);

方法（存储过程）。看起来它只返回某种类型的单个值，这意味着它不能分配给`IEnumerable<T>`诸如 a `List<T>`。

由于您在 LINQ 中使用存储过程，它会自动生成一个类 T(procedure name + "Result") 来存储数据。返回的类型始终是`ISingleResult<T>`。

因此，您可以尝试以下方法：

```
ISinlgeResult<MySubjectResult> sub = db.GetSubjects(Sday , Suserid);
foreach(MySubjectResult val in sub)
{
...
} 
```

或者只是使用`db.GetSubjects (Sday , Suserid).ReturnValue;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T08:28:52.270

到处寻找同样的问题，只找到所有这些`foreach`循环 - 但对我来说，最简单的事情是`.ToList()`：

```
return db.GetSubjects(Sday , Suserid).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T07:30:44.900

您可以通过多种方式返回存储的过程结果...见下文

公共 YourDataContext 上下文；

//假设Json返回

```
public JsonResult GetResults(string param1, string param2) 
{
    using(context = new YourDataContext())
    {
       return Json(context.YourStoredProc(param1, param2).ToList<YourStoredProcResult>());
     }
} 
```

//假设只是复杂的返回

```
 public List<YourStoredProcResult> GetResults(string param1, string param2)
        {
            using(context = new dataDataContext())
            {
                return context.YourStoredProc(param1, param2).ToList<YourStoredProcResult>();
            }
        } 
```

//还有其他方法....

# bash - 如何访问参数中变量的内容？

> ID：10009942
> 
> 赞同：2
> 
> 时间：2012-04-04T11:12:45.110
> 
> 标签：bash, shell, variables, arguments, command-line-arguments

如何访问作为参数传递给 bash 脚本的变量的内容？

示例：`sh myscript.sh PATH`。现在我想修改里面的字符串`PATH`，但是一直访问失败！

有任何想法吗？

编辑：我需要能够访问任何变量，而不仅仅是`PATH`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:30:43.660

像这样的东西应该适合你：

```
#!/bin/bash

ARG=$1
VAL=${!ARG}
echo $VAL 
```

如果你像这样执行你的脚本：

```
./myscript.sh PATH 
```

`$PATH`它在 STDOUT 上打印值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:52:00.947

```
#!/bin/bash
FOO=$(eval echo \$$1)
echo args: $FOO 
```

给出：

```
$ foo.sh HOME
args: /home/bos 
```

# javascript - div完成动画后的事件？

> ID：10009948
> 
> 赞同：6
> 
> 时间：2012-04-04T11:12:58.523
> 
> 标签：javascript, jquery

如何在某个元素完成动画后运行函数？这是一个像动画一样的向下滑动，元素被隐藏，当点击某些东西时，它会通过向下滑动其内容（+高度）变得可见。

我无法控制该元素上的动画功能，因此我无法使用 $.animate 函数中的回调选项...

现在我有类似的东西

```
$('.trigger').click(function(){  // <-- "trigger" will make the element animate 
  setTimeout(myfunction, 500);
}); 
```

哪个有效，但我不喜欢它，感觉很hacky

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:20:05.997

如果您使用 jQuery 1.5+，您可以使用 jQuery`promise()`方法：http: [//jsfiddle.net/rGBk7/](http://jsfiddle.net/rGBk7/)

例如

```
/* do animation */
$("div").animate({ 'marginLeft' : '300px' }, 1000);

/* attach a promise to animated element/s */    
$("div").promise().done(function() {
    alert("animation end");
}); 
```

见[http://api.jquery.com/promise/](http://api.jquery.com/promise/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:23:02.620

你的意思是：

```
 $("div").queue(function(){
    your_function();
}); 
```

动画队列完成后执行

# mysql - 如何获取以下格式的数据？

> ID：10009951
> 
> 赞同：2
> 
> 时间：2012-04-04T11:13:04.917
> 
> 标签：mysql, sql

我有一张像

```
 ___________
| id | date |
 ----------- 
```

像这样的价值观

```
1, 2012-02-21 04:04:04
2, 2012-02-21 05:03:05
3, 2012-02-22 03:03:03 
```

现在，询问是有一个查询，它获取对应于较低日期的 1 个 ID/天，因此，在这种情况下，查询应该返回

```
id
---
1
3 
```

// 对于 date=2012-02-21，有 2 行，所以选择 id 为 1 的行，因为日期值较低 // 对于 date=2012-02-22，只有 1 行，所以选择对应的 id

（对不起，不是描述性的标题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:16:20.007

你可以试试这个：

```
SELECT
    SUBSTRING_INDEX(
        GROUP_CONCAT(
            `id`
            ORDER BY
                `date` ASC SEPARATOR ','
        ),
        ',',
        1
    ) AS `id`
FROM
    `table`
GROUP BY
    DATE(`date`) 
```

# java - Android ~ ListViewAdapter 挣扎

> ID：10009954
> 
> 赞同：-1
> 
> 时间：2012-04-04T11:13:18.387
> 
> 标签：java, android, http, listview, gridview

我真的在与`ListView`和挣扎`Adapter`。我想从 a 中获取一个字符串，`HttpGet`并将其作为`Listview`. 在你问之前，我已经尽了最大的努力，但我根本做不到。

非常感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:16:55.930

将所有字符串存储`ArrayList<String>`到适配器中并将它们传递给适配器，并使用自定义列表项，`TextView`用于显示字符串。

```
ArrayList<String> result = new ArrayList<String>();
MyAdapter adapter = new MyAdapter(getBaseContext(), R.layout.list_item, result );
listview.setAdapter(adapter); 
```

这是示例：[使用自定义 ArrayAdapter 自定义 Android ListView 项](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

# zend-framework - 使用 Zend 装饰器设计表单

> ID：10009956
> 
> 赞同：0
> 
> 时间：2012-04-04T11:13:36.353
> 
> 标签：zend-framework, zend-form, decorator

我一直在与 Zend Form 装饰器打架，但我总是原谅我没有与他们合作。但现在我有，我想赢。要么我发现文档没有那么解释性，要么我无法理解它的用法。我一直致力于纯 HTML 和 CSS。现在 zend 表单装饰器对我来说有点令人困惑。

有没有人有教程、方法或任何我可以击败装饰器的东西，以便我根据我的设计获得表格。换句话说，我说请用勺子喂我 zend 表单装饰器，这样我就不会遇到问题了。一些我可能使用的表单设计，或者可以使用 zend 进行解释的一些表单设计可用@http [://cssglobe.com/collections/forms/](http://cssglobe.com/collections/forms/)

还有一件事：我正在从控制器发送值到表单。填充函数仅填充值。但是我希望特定于 db 的字段可以根据需要放置在设计中。所以获取它们并传递给表单也是非常值得关注的，因为我找不到通过设置公共变量或任何内部 zend 表单方法来实现它的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T11:26:32.843

最后我找到了我想要的解决方案@ [http://blog.kosev.net/2010/06/tutorial-create-zend-framework-form.html](http://blog.kosev.net/2010/06/tutorial-create-zend-framework-form.html) :)

但这仍然不是完整的解决方案，因为我的要求有点不同。所以为此我找到了另一个解决方案@ [http://paveldubinin.com/2011/04/2-columns-form-with-zend-form/](http://paveldubinin.com/2011/04/2-columns-form-with-zend-form/)

所以将两者混合，我有完整的解决方案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:18:56.433

我个人的建议是使用`ViewScript`装饰器，它可以让您将表单输出到模板中。

# .htaccess - htaccess - 从 URL 中删除“index.php”并重定向

> ID：10009957
> 
> 赞同：2
> 
> 时间：2012-04-04T11:13:36.847
> 
> 标签：.htaccess, redirect

在我的网站上，我使用的是 URL 地址，例如

```
http://me.example.com/index.php?p=home 
```

然后我决定使用

```
http://me.example.com/?p=home 
```

没有任何“.htaccess”文件，这一切都自动运行。但包含“index.php”的地址也仍然有效。有些网站以“旧”格式链接到我的网站。我希望人们停止使用这种“旧”格式并将他们重定向到“新”格式 URL，只要他们使用“旧”格式。我要做的就是从 URL 中删除“index.php”，并在访问者的浏览器中更改此 URL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T15:55:45.160

这是将在 DOCUMENT_ROOT 下的 .htaccess 中的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^index\.php/?$ / [L,R=301,NC] 
```

# android - OpenGL ES多个对象没有被渲染

> ID：10009959
> 
> 赞同：1
> 
> 时间：2012-04-04T11:13:48.820
> 
> 标签：android, object, opengl-es, rendering

我正在执行以下操作以渲染多个球在屏幕上移动，但只看到一个球出现并起作用。我不知道为什么其余的（count-1）球没有被抽出

```
 public void onDrawFrame(GL10 gl) {
            // TODO Auto-generated method stub
            gl.glDisable(GL10.GL_DITHER);
             gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);   
             gl.glMatrixMode(GL10.GL_MODELVIEW);
            gl.glClientActiveTexture(DRAWING_CACHE_QUALITY_HIGH);
             gl.glLoadIdentity();
             for(int i=0;i<mParticleSystem.getParticleCount();i++){
                gl.glPushMatrix();
                      gl.glTranslatef(mParticleSystem.getPosX(i), mParticleSystem.getPosY(i), -3.0f);
                      gl.glScalef(0.3f, 0.3f, 0.3f);
                      gl.glColor4f(r.nextFloat(), r.nextFloat(), r.nextFloat(), 1);
                      gl.glEnable(GL10.GL_TEXTURE_2D);   
                      mParticleSystem.getBall(i).draw(gl);
                gl.glPopMatrix();

             }

        } 
```

**编辑**我的 void draw(GL10 gl) 方法

```
 public void draw(GL10 gl){

    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glEnable(GL10.GL_SMOOTH);
    gl.glEnable(GL10.GL_DEPTH_TEST);
//  gl.glTranslatef(0.2f, 0.2f, -3.0f);
//  gl.glScalef(size, size, 1.0f);

    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertBuff);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, points/2);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);

 } 
```

我无法在我的三星手机上拍摄快照，但这是模拟器截图。实际上，球会随着方向和加速度的变化而移动，并且会随机改变颜色（由于 r.nextFLoat()）。但是，正如您所见，其他 35 个球甚至都没有被渲染。我怎样才能解决这个问题？

![在此处输入图像描述](../Images/236d211ca4163c54fdba7e9d91c7dd57.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:20:47.077

当调用 gl.glDisableClientState(GL10.GL_VERTEX_ARRAY); 时，第二次循环返回应该有 gl.glEnableClientState(GL10.GL_VERTEX_ARRAY); 否则不会绘制任何其他内容。

我打赌你有 gl.glEnableClientState(GL10.GL_VERTEX_ARRAY); 在你的 onsurfacecreated() 中。这意味着只调用一次。而 gl.glDisableClientState(GL10.GL_VERTEX_ARRAY); 被无限调用。

# c - 如何在linux中用C程序映射两个端口

> ID：10009960
> 
> 赞同：-1
> 
> 时间：2012-04-04T11:13:56.050
> 
> 标签：c

我想用一个 C 程序映射两个端口（任何到端口 x 到端口 y，反之亦然），我写了这个程序，但它不起作用。这是我的代码：

```
int recv_all_nonblock(int sockfd,char* buff,int buffersize)
{
    int numbytes;
    if ((numbytes = recv(sockfd, buff, buffersize-1, MSG_NOSIGNAL|MSG_DONTWAIT)) <= 0)
    {
    perror("recv");
    }
    else if( numbytes>0)
    {
    buff[numbytes] = '\0';
    }

    return numbytes;
}

int sendall(int sockfd, char *buf, int *len)
{
    int total = 0;        // how many bytes we've sent
    int bytesleft = *len; // how many we have left to send
    int n=0;
    while(total < *len)
    {
    n = send(sockfd, buf+total, bytesleft, MSG_NOSIGNAL|MSG_DONTWAIT);
    if (n == -1) { break; }
    total += n;
    bytesleft -= n;
    }

    *len = total; // return number actually sent here

    return n==-1?-1:0; // return -1 on failure, 0 on success
}

int Connect_To_Remote(char *Addr,char* PORT)
{
    int sockfd;
    struct addrinfo hints, *servinfo=NULL, *p=NULL;
    int rv;
    char s[INET6_ADDRSTRLEN];

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    while (p==NULL)
    {
    sleep(5);
    while((rv = getaddrinfo(Addr, PORT, &hints, &servinfo)) != 0)
    {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        sleep(5);
    }

    for(p = servinfo; p != NULL; p = p->ai_next)
    {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,p->ai_protocol)) == -1)
        {
        perror("client: socket");
        continue;
        }

        if (connect(sockfd, p->ai_addr, p->ai_addrlen) == -1)
        {
        close(sockfd);
        perror("client: connect");
        continue;
        }

        break;
    }

    if (p == NULL)
    {
        fprintf(stderr, "client: failed to connect\n");
    }
    }

    inet_ntop(p->ai_family, get_in_addr((struct sockaddr *)p->ai_addr),s, sizeof s);
    printf("client: connecting to %s\n", s);

    freeaddrinfo(servinfo); // all done with this structure
    return sockfd;

}
int recv_all(int sockfd,char* buff,int buffersize)
{
    int numbytes;
    fd_set readfd_set;
    struct timeval recvwait;

    recvwait.tv_sec=10;
    recvwait.tv_usec=0;
    FD_ZERO(&readfd_set);
    FD_SET(sockfd, &readfd_set);
    if(select(sockfd+1, &readfd_set, NULL, NULL, &recvwait) <= 0)
    {
    perror("wait for recieve error:");
    }
    else
    {
    if ((numbytes = recv(sockfd, buff, buffersize-1, MSG_NOSIGNAL|MSG_DONTWAIT)) == -1)
    {
        perror("recv");
    }
    else if( numbytes>0)
    {
        buff[numbytes] = '\0';
    }

    return numbytes;
    }

    return 0;
}

void *Port_Mapper()
{
    int sockfd,newfd;  // listen on sock_fd, new connection on new_fd
    struct addrinfo hints, *servinfo, *tmpaddrinfo;
    struct sockaddr_storage their_addr; // connector's address information
    socklen_t sin_size;
    int rv;
    int yes=1;
    int ret=0;

    memset(&hints, 0, sizeof (hints));
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_flags = AI_PASSIVE; // use my IP

    while (1)
    {
    if ((rv = getaddrinfo(NULL, MapPort, &hints, &servinfo)) != 0)
    {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        sleep(2);
    }
    else
    {
        break;
    }
    }

    while (1)
    {
    for(tmpaddrinfo = servinfo; tmpaddrinfo != NULL; tmpaddrinfo = tmpaddrinfo->ai_next)
    {
        if ((sockfd = socket(tmpaddrinfo->ai_family,tmpaddrinfo->ai_socktype,tmpaddrinfo->ai_protocol)) == -1)
        {
        perror("server: socket");
        continue;
        }
        if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &yes,sizeof(int)) == -1)
        {
            perror("setsockopt");
            exit(1);
        }
        if (bind(sockfd, tmpaddrinfo->ai_addr, tmpaddrinfo->ai_addrlen) == -1) {
        close(sockfd);
        perror("server: bind");
        continue;
        }

        break;
    }
    if (tmpaddrinfo == NULL)
    {
        fprintf(stderr, "server: failed to bind\n");
        sleep(1);
    }
    else
    {
        break;
    }
    }
    freeaddrinfo(servinfo); // all done with this structure
    if (listen(sockfd, MAXLISTENQ) == -1)
    {
    perror("listen");
    exit(1);
    }
    int bufpoint=0;
    printf("server: waiting for connections...\n");
    while(1)
    {  // main accept() loop
    char buff[MAX_SOCK_BUFFER];
    char buff2[MAX_SOCK_BUFFER];
    ret=0;
    int sockfdweb=0;
    sin_size = sizeof (their_addr);
    printf("mapping server: going to  accept connections...\n");
    newfd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size);
    printf("\n\nmapping server: connections accepted:%d\n",newfd);

    sockfdweb=Connect_To_Remote("192.168.1.10","80");
    if (sockfdweb<0)
    {
        printf("can not connect to %s\n","192.168.1.10");
        break;
    }
      while(1)
    {

        memset(buff,0,sizeof(buff));
        ret=recv_all_nonblock(newfd,buff,MAX_SOCK_BUFFER);
printf("recved from client1,%d\n",ret);
        if (ret<=0)
        {
        perror("recieve error from browser:");
        close(newfd);
        sin_size = sizeof (their_addr);
        printf("mapping server: going to  accept connections...\n");
        newfd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size);
          ret=recv_all_nonblock(newfd,buff,MAX_SOCK_BUFFER);
    printf("recved from client10,%d\n",ret);
        if (ret<=0)
        {
            perror("recieve error from browser:");
            close(newfd);
            sin_size = sizeof (their_addr);
            printf("mapping server: going to  accept connections...\n");
            newfd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size);
        }
        else if(ret>0)
        {
    printf("recved from client0\n");
    printf("%s\n",buff);
            if (sendall(sockfdweb,buff,&bufpoint)<0)
            {
            printf("can not send data to %s\n","192.168.1.10");
            }
    printf("send to 80,0\n");

        }

        }
        else if(ret>0)
        {
printf("recved from client\n");
    printf("%s\n",buff);
        if (sendall(sockfdweb,buff,&bufpoint)<0)
        {
            printf("can not send data to %s\n","192.168.1.10");
        }
    printf("send to 80\n");

        }

        memset(buff2,0,sizeof(buff2));
        ret=recv_all_nonblock(sockfdweb,buff2,MAX_SOCK_BUFFER);
printf("recv from 80...%d\n",ret);
        if (ret<=0)
        {
        close(sockfdweb);
        sockfdweb=Connect_To_Remote("192.168.1.10","80");
        if (sockfdweb<0)
        {
            printf("can not connect to %s\n","192.168.1.10");
            break;
        }
        ret=recv_all_nonblock(sockfdweb,buff2,MAX_SOCK_BUFFER);
    printf("recv from 80.9..%d\n",ret);
        if (ret<=0)
        {
            close(sockfdweb);
            sockfdweb=Connect_To_Remote("192.168.1.10","80");
            if (sockfdweb<0)
            {
            printf("can not connect to %s\n","192.168.1.10");
            break;
            }

        }
        else if (ret>0)
        {
    printf("recved from 809\n");
            if (sendall(newfd,buff2,&ret)<0)
            {
            printf("can not send data to %s\n","192.168.1.10");
            }
    printf("send to client9\n");

        }

        }
        else if (ret>0)
        {
printf("recved from 80\n");
        if (sendall(newfd,buff2,&ret)<0)
        {
            printf("can not send data to %s\n","192.168.1.10");
        }
printf("send to client\n");

        }

    }

    }
    return 0;
}

int main()
{
.
.
.
.
    pthread_attr_init (&attr);
    pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
    pthread_create(&portmapper_threadid,&attr,Port_Mapper,NULL);
    pthread_attr_destroy (&attr);
.
.
.
.
} 
```

我在 Port_Mapper 函数中添加了一些“printf”，并进行了一些更改以跟踪当我在浏览器中请求 Web 时发生的情况，如下所示：

> [http://127.0.0.1:8090/](http://127.0.0.1:8090/)

刷新两三次浏览器输出的程序是这样的：

> 映射服务器：接受的连接数：5
> 客户端：连接到 192.168.1.10从客户端
> 接收的
> 1,360 从客户端接收的
> GET /1/ HTTP/1.1
> 主机：127.0.0.1: 8090
> 用户代理：Mozilla/5.0 (X11; Linux i686; rv :6.0.2) Gecko/20100101 Firefox/6.0.2
> Accept: text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
> Accept-Language: en-us,en;q= 0.5
> Accept-Encoding: gzip, deflate
> Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
> Connection: keep-alive
> Cache-Control: max-age=0
> 
> 发送到 80
> recv：
> 来自 80...-1 的资源暂时不可用 recv
> 客户端：连接到 192.168.1.10
> recv：
> 来自 80.9..-1 的资源暂时不可用 recv 客户端：连接到 192.168.1.10 recv： 从
> 客户端1 接收的
> 资源暂时不可用
> ,-1
> 从浏览器接收错误:: 资源暂时不可用
> 映射服务器: 将接受连接...从客户端接
> 收到 10,360 从客户
> 端接收到
> GET /1/ HTTP/1.1
> 主机: 127.0.0.1:8090
> 用户代理: Mozilla/ 5.0 (X11; Linux i686; rv:6.0.2) Gecko/20100101 Firefox/6.0.2
> 接受: text/html,application/xhtml+xml,application/xml;q=0.9, */*;q=0.8
> Accept-Language: en-us,en;q=0.5
> Accept-Encoding: gzip, deflate
> Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
> Connection: keep -alive
> 缓存控制：max-age=0
> 
> 发送到 80,0
> recv：资源暂时不可用
> recv 从 80...0
> 客户端：连接到 192.168.1.10
> recv：资源暂时不可用
> recv 从 80.9..-1
> 客户端：连接到 192.168.1.10
> recv：资源暂时不可用
> 从接收client1,-1
> 从浏览器收到错误:: 资源暂时不可用
> 映射服务器: 将接受连接...
> recv: 资源暂时不可用
> 从 client10,-1
> 收到来自浏览器的错误:: 资源暂时不可用
> 映射服务器: 将接受连接...
> recv：资源暂时不可用
> recv 从 80...0
> 客户端：连接到 192.168.1.10
> recv：资源暂时不可用
> recv 从 80.9..-1
> 客户端：连接到 192.168.1.10从客户
> 端接收到
> 1,332 从客户端接收到
> GET / HTTP/1.1
> 主机：127.0.0.1: 8090
> 用户代理： Mozilla/5.0 (X11; Linux i686; rv:6.0.2) Gecko/20100101 Firefox/6.0.2
> Accept: text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
> Accept-语言：en-us,en;q=0.5
> 接受编码：gzip, deflate
> 接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.7
> 连接：keep-alive
> 
> 发送到 80
> recv：
> 来自 80...-1 的资源暂时不可用 recv
> 客户端：连接到 192.168.1.10
> recv：
> 来自 80.9..-1 的资源暂时不可用 recv 客户端：连接到 192.168.1.10 recv： 从
> 客户端1 接收的
> 资源暂时不可用
> ,-1
> 从浏览器收到错误:: 资源暂时不可用
> 映射服务器: 将接受连接...

如您所见，程序正确地从浏览器接收数据，但是当它将数据发送到网络服务器并希望从网络服务器接收数据时，它总是会出错并且不会从网络服务器接收任何数据：

> 发送到 80
> recv：资源暂时不可用
> recv 从 80...-1

我不得不说网络服务器正常工作没有问题。
任何人都可以告诉我我的问题是什么？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:50:41.037

对于如此简单的任务，您的代码非常复杂。它可以简化很多引用，请参阅此（伪）代码：

```
void mapper()
{
    int server_socket = create_server_socket();

    for (;;)
    {
        int incomming_socket = accept(server_socket);

        int web_server_socket = connect_to_webserver();

        make_socket_nonblocking(incomming_socket);
        make_socket_nonblocking(web_server_socket);

        for (;;)
        {
            int disconnected = 0;

            FD_ZERO(&read_set);

            FD_SET(incomming_socket, &read_set);
            FD_SET(web_server_socket, &read_set);

            select(max_socket + 1, &read_set, NULL, NULL, NULL);

            if (FD_ISSET(incomming_socket, &read_set))
            {
                disonnected = recv_and_send(incomming_socket, web_server_socket);
            }
            if (!disconnected && FD_ISSET(web_server_socket, &read_set))
            {
                disconnected = recv_and_send(web_server_socket, incomming_socket);
            }

            if (disconnected)
                break;
        }

        close(web_server_socket);
        close(incomming_socket);
    }
}

int recv_and_send(from_socket, to_socket)
{
    char buffer[1024];

    for (;;)
    {
        len = recv_all(from_socket, buffer, sizeof(buffer));
        if (len < 0)
            return 1;  /* Disconnect */
        if (len == 0)
            break;  /* No more to read for now */

        if (send_all(to_socket, buffer, len) < 0)
            return 1;  /* Disconnect */
    }

    return 0;
}

int recv_all(socket_fd, char *buffer, const size_t buflen)
{
    size_t total_recv = 0;
    size_t remaining_len = buflen;

    while (remaining_len > 0)
    {
        ssize_t len = recv(socket_fd, buffer + total_recv, remaining_len);
        if (len < 0)
        {
            if (errno == EWOULDBLOCK)
                break;  /* No more to read at the moment */
            return -1;  /* An error */
        }
        if (len == 0)
            break;  /* Connection closed */

        total_recv += len;
        remaining_len -= len;
    }

    return total_recv;
} 
```

[剩下的我留作练习。]

与您的代码的主要区别在于主循环*要*简单得多。您不需要多次`accept`调用（为什么需要它？）或几个不同的读写函数。我的部分代码可以进一步简化，比如`recv_all`函数。

还应该注意的是，我上面的代码一次只处理一个连接。解决这个问题的一种方法是为每个传入连接创建一个新线程，或者使用更高级的方法使用连接和缓冲区列表，并`select`在它们和侦听套接字之间进行多路复用。

# asp.net - 托管在 IIS 6 中的网站变慢

> ID：10009966
> 
> 赞同：0
> 
> 时间：2012-04-04T11:14:17.840
> 
> 标签：asp.net, iis-6

我的网站最近一天变慢了。该网站托管在 IIS 6.0 上，该网站还使用托管在同一应用程序池上的 8 个其他（支持服务）Web 服务。部署此类应用程序的最佳实践是什么？将服务和网站托管在 diff 应用程序池上会降低整个网站的速度吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:21:26.973

是的，它应该[改善](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/67e39bd8-317e-4cf6-b675-6431d4425248.mspx?mfr=true)一些事情。每个应用程序池都有自己的工作进程，这意味着每个应用程序有更多的线程和可能更多的内存。

性能还有其他注意事项：

*   确定您的瓶颈 - 例如 SQL、网络带宽、CPU、工作线程等[。Perfmon 计数器](http://msdn.microsoft.com/en-us/library/fxk122b4%28v=vs.100%29.aspx)是一个很好的起点
*   完成后，您可以采用适当的策略，例如 SQL 索引、缓存、数据分页或应用程序代码优化。看看[这里](http://msdn.microsoft.com/en-us/magazine/cc163854.aspx)

# python - Easy_install 的 --prefix 选项不会改变它尝试安装我的包的位置

> ID：10009967
> 
> 赞同：4
> 
> 时间：2012-04-04T11:14:19.217
> 
> 标签：python, easy-install, prefix, egg

我想为 python 2.6 安装 Sphinx 1.1.3。但是，我没有 sudo 权限。因此，我不想将其安装在默认位置，而是使用 --prefix 设置不同的位置。执行以下操作：

```
-bash-3.2$ easy_install Sphinx-1.1.3-py2.6.egg --prefix=/homes/ndeklein/python2.6/site-packages/ 
```

给我：

```
error: can't create or remove files in install directory

The following error occurred while trying to add or remove files in the
installation directory:

[Errno 13] Permission denied: '/usr/lib/python2.4/site-packages/test-easy-install-18534.write-test'

The installation directory you specified (via --install-dir, --prefix, or
the distutils default setting) was:

/usr/lib/python2.4/site-packages/ 
```

我输入的前缀有问题吗？另外，我可以使用什么（我已经与其他软件包一起使用过）：

```
python setup.py install --home=/homes/ndeklein/python2.6/site-packages/ 
```

但我找不到 setup.py 脚本。我猜 EGG 没有 setup.py 脚本，这是真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-09T16:39:27.133

你需要在包之前指定选项，所以命令应该是：

```
easy_install --prefix=/homes/ndeklein/python2.6/site-packages/ Sphinx-1.1.3-py2.6.egg 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T11:23:11.637

这个网站讨论了非 root 的 python 安装。它可能对你有用...

[http://www.astropython.org/tutorials/user-rootsudo-free-installation-of-python-modules7/](http://www.astropython.org/tutorials/user-rootsudo-free-installation-of-python-modules7/)

引用它的一点点：

> 用户配置文件 ~/.pydistutils.cfg 将覆盖 python 包安装的内部系统路径，将构建的库 (lib)、脚本 (bin) 和数据 (share) 重定向到用户拥有和指定的目录。您必须简单地告诉 python 安装程序这些目录所在的位置。
> 
> 用户文件 ~/.pydistutils.cfg 有以下几行，使用非常明显的语法：

```
[install]
install_scripts = ~/usr/bin
install_data = ~/usr/share
install_lib = ~/usr/lib/python2.4/site-packages 
```

当然，您在那里指定的任何目录都应该存在，并且您应该将它们放在 PYTHONPATH 的前面：

```
export PYTHONPATH=~/usr/lib/python2.4/site-packages:${PYTHONPATH} 
```

* * *

看起来更现代的 python 安装（与链接中的内容相比）应该能够使用该`~/.local`目录：

```
easy_install --prefix=~/.local ... 
```

还有：

```
easy_install --user ... 
```

它将安装到用户特定的站点目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:15:34.567

您可以尝试使用 easy_install 的 pip install （这些天推荐使用 pip 而不是 easy_install）

然后你可以使用

```
pip install --user Sphinx 
```

如果需要，请参阅[http://www.pip-installer.org/en/latest/installing.html](http://www.pip-installer.org/en/latest/installing.html)了解如何安装 pip

您可能还想 pip install virtualenv 并在 virtualenv 中工作（其中 pip 将在本地站点包文件夹中安装所有包）。有关更多信息，请参阅[http://pypi.python.org/pypi/virtualenv](http://pypi.python.org/pypi/virtualenv)。

# libgdx - 多种分辨率的不同纹理

> ID：10009972
> 
> 赞同：3
> 
> 时间：2012-04-04T11:14:25.560
> 
> 标签：libgdx

如何在 libGDX 中为不同的分辨率使用不同的纹理（图像）？还指定如何从资产文件夹中检测它？

我必须将不同分辨率的图像存储在您指导我的不同文件夹中，请给出具体示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:10:30.000

使用[AssetManager](http://code.google.com/p/libgdx/wiki/AssetManager)加载您的资源。加载资源时，您可以使用不同的“文件解析器”来根据您的环境确定要加载的特定资产。对于基于屏幕分辨率的决定，请使用`ResolutionFileResolver`.

[AssetManagerTest](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/AssetManagerTest.java)很好地证明了这一点。

# php - 如何手动将数据传递给数据表

> ID：10009976
> 
> 赞同：0
> 
> 时间：2012-04-04T11:14:28.733
> 
> 标签：php, jquery, datatables

我正在尝试数据表。我成功地尝试了ajax调用。但现在我正在寻找加载我的数据网格，当然，在页面加载时使用数据表。

我需要通过查询字符串将参数传递给我的处理页面。页面执行操作，然后模板文件显示数据网格。这一切都是在 smarty 中使用手动 foreach 和其他循环完成的。现在我想将它全部转换为数据表。

但是如何将初始数据传递给数据表呢？因此我需要将初始数据传递给数据表，但是如何？我提到了 datatables api 和其他参考资料，但没有任何这样的事情。请帮忙

我想做这样的事情

```
<?php
    //get params from $_GET
    $dbRet = someDbOps($someGetParams); //db processing
    include_once('grid.tpl');
?> 
```

在 grid.tpl 上

```
<html>
    <head>
        <script src="jq.js"></script>
        <script src="datatables.js"></script>
    </head>
    <body>
        <script>
            var data = '<?php echo $dbRet?>'; //now i got data here
            $('#one-column-emphasis').dataTable({
                    "bProcessing" : true,
                    "bServerSide" : true,
                    "sAjaxSource" : "changeLog.php",
                    "bPaginate"   : true,
                    "aoColumns"   : [ "Topic", "Details", "Date" ],
                    "aaSorting"   : [[1,"desc"]]
            }); // how to pass $dbRet to this handler????
        </script>
         <table id="one-column-emphasis">
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:17:38.047

您可以使用[aaData](http://datatables.net/examples/data_sources/js_array.html)并传递一个值数组，或者您可以简单地绘制表格的第一页，然后通过 ajax 处理检索其他行

# c# - 单击按钮时触发 .xaml 故事板

> ID：10009977
> 
> 赞同：1
> 
> 时间：2012-04-04T11:14:31.743
> 
> 标签：c#, silverlight

在我的 Silverlight 应用程序中，我通过 Blend 手动制作了一个 stroyboard。

```
<UserControl.Resources>
<Storyboard x:Name="Swivel">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Projection).(PlaneProjection.RotationY)" Storyboard.TargetName="Menus">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="-90"/>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="Menus">
                <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
</UserControl.Resources> 
```

我想在按钮点击中触发这个故事板。有没有办法做到这一点，而无需在 .cs 中编写情节提要，然后在 storyboard.Start() 等中编写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:52:46.317

查看事件触发器，请参阅MSDN 上的[StoryBoard](http://msdn.microsoft.com/en-us/library/bb979882%28VS.95%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:31:26.897

您想将 ControlStoryboardAction 绑定到按钮的 Click 事件。 这是有关如何在 Blend 中添加动作[的快速指南。](http://msdn.microsoft.com/en-us/library/ff723988%28v=expression.40%29.aspx)如果在资产面板中看不到 ControlStoryboardAction，只需添加对 Microsoft.Expression.Interactions.dll 的引用。您可以在 Blend SDK 文件夹中找到它（在我的 Win7 x64 系统上，它位于该`C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\Silverlight\v5.0\Libraries`文件夹中。

# android - 蓝牙设备扫描不完整

> ID：10009978
> 
> 赞同：1
> 
> 时间：2012-04-04T11:14:57.387
> 
> 标签：android

我正在尝试使用基于处理的 android 应用程序扫描蓝牙设备。我想使用处理通过蓝牙与我的微控制器板通信，如下例所示：

[http://webdelcire.com/wordpress/archives/1045](http://webdelcire.com/wordpress/archives/1045)

我成功地在我的安卓平板电脑上启动了这个应用程序。但是，我无法在平板电脑上列出蓝牙设备。我的平板电脑唯一能识别的蓝牙设备是我电脑上的蓝牙适配器。为什么我无法列出所有蓝牙设备？我的电脑能够识别微控制器的蓝牙设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:11:18.993

您的嵌入式目标板可能错误地将自己识别为蓝牙设备。计算机的蓝牙适配器接受此错误，而 Android 不接受。

**如果**您可以更改嵌入式目标板的**SDP 记录**（*蓝牙搜索发现协议*），Android 可能会看到该设备（尝试使其看起来像耳机或免提设备！）。

快速的方法是更改​​定义 SDP 类、服务 ID 等的**“幻数” 。这些数字在**[本](https://www.bluetooth.org/Technical/AssignedNumbers/service_discovery.htm)文档中。然后看看安卓是否能看到你的板子。

* * *

如果有时间，您还可以阅读[蓝牙核心规范。](http://www.bluetooth.org/Building/HowTechnologyWorks/CoreSpecifications.htm)

有关正式方面的更多信息，请参阅[本教程，以及“程序员的蓝牙”以获得更轻松的介绍。](http://www.palowireless.com/infotooth/tutorial/sdp.asp#PDU%20Format)

# c# - 当列表中包含列表时，当可滚动高度发生变化时，VerticalOffset 如何变化

> ID：10009982
> 
> 赞同：1
> 
> 时间：2012-04-04T11:15:21.573
> 
> 标签：c#, windows-phone-7, listbox, windows-phone-7.1, dependency-properties

我正在制作一个具有 UserControls 列表框的 WP7 应用程序。每个 UserControl 都有一个 ItemsControl 和 Button（用于获得更多结果）。单击按钮时，ItemsControl 项目将增加 5 或 10。

现在单击除第一个或最后一个之外的任何用户控件的 GetMore 按钮时，ListBox 的可滚动高度（列表框的总高度）将增加，但 ListBox 的 VerticalOffset（滚动条从顶部的位置）仍然存在相同的。现在我面临的问题是垂直偏移不是绝对的，而是相对于可滚动高度。因此，直到那时正在查看的内容将根据 ScollableHeight 的新值进行更改。

我想知道它们之间的关系，以便我可以做一些数学运算并设置 VerticalOffset 值。

我在 VerticalOffset 和 ScrollableHeight 上添加了一些依赖属性，当其中任何一个发生更改时，我可以通过它们获取事件。尝试使用 ScrollIntoView 重新调整垂直偏移

任何建议或更正都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:33:43.390

我找不到计算方法。但是可以做的是列表框可以替换为滚动查看器，其中包含 itemsControl。但这样做的缺点是禁用了虚拟化，因此需要对此进行检查。

但是，总的来说，这会给在 Listbox 中使用这样的 UserControl 带来不好的体验。因此，使用 WP7 工具包中给出的模板化列表框是一个选项，但它会挂起一点，因为 ListBox 没有针对多模板化虚拟化进行优化。所以我开始展示编写列表框项目模板的方式，它包含所有可能的布局，这些布局将从一个条件中启用。

# c# - 服务器发送事件 vs AJAX 轮询 vs WebSockets 通知

> ID：10009985
> 
> 赞同：2
> 
> 时间：2012-04-04T11:15:27.790
> 
> 标签：c#, asp.net, asp.net-mvc

我正在构建简单的通知系统，我只是想知道用于完成这项工作的最佳技术是什么，现在我正在为每个用户每 30 秒执行一次 AJAX 请求以检查新通知。因为这将是娱乐网站实时提取通知并不重要。我主要关心的是浏览器支持、节省服务器资源和可扩展性，那么哪种技术最适合这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:44:09.650

试试[SignalR](https://github.com/SignalR/SignalR)

[http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

# extjs - 如何在手机/平板电脑上使用 EXTJS 应用程序？

> ID：10009986
> 
> 赞同：1
> 
> 时间：2012-04-04T11:15:27.867
> 
> 标签：extjs

我创建了一个 EXTJS 应用程序并希望它可以在手机或平板电脑上运行？有可能这样做吗？如果是，我们怎么能这样做？

当我在 iphone 上尝试此操作时，我无法一次看到所有内容/页面。就像我无法滚动或浏览页面一样。

谁能帮我解决这个问题？？？？？？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:08:21.137

Yes you can, but you wont like the way it is.

The best way to integrate a ExtJS browser application with some mobile devices is to develop an alternative for those, using [Sencha Touch](http://www.sencha.com/products/touch/).

# php - 如何使用 svn 和 crontab 更新代码？

> ID：10009987
> 
> 赞同：2
> 
> 时间：2012-04-04T11:15:32.763
> 
> 标签：php, linux, svn, shell, crontab

登录到服务器后，我正在使用以下步骤更新服务器上的代码：

```
sudo -s
<wrote password here>
cd /var/www/staging
rm -r app.old
mv app app.old
svn checkout https://example.com/projectname/trunk/app app 
```

现在我用以下内容创建了`update.sh`文件`/var/www/`

```
cd /var/www/staging
rm -r app.old
mv app app.old
svn checkout https://example.com/projectname/trunk/app app 
```

我有以下 crontab 条目每 5 分钟运行一次：

```
*/5 * * * * /var/www/update.sh 
```

**问题：**所以 cron 作业正在工作，但它只是删除`app`文件夹而**不是**从 svn 存储库中检出它。但是当我`bash /var/www/update.sh`手动运行它之后它工作正常`sudo -s`。

如何为 cron 作业解决此问题。是跟什么有关`sudo -s`还是别的什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:01:40.790

我怀疑问题是作业是从 cron as 运行的，`root`而 root 用户没有结帐权限。

首先，我建议您在脚本中包含用于 SVN 的用户名/密码的详细信息：

```
svn checkout --username USER --password PASS ttps://example.com/projectname/trunk/app app 
```

接下来，将 crontab 中的行更改为：

```
*/5 * * * * /var/www/update.sh 2>&1| mail -s "Cron job execution" youremail@wherever.com 
```

然后，当作业执行时，任何错误都会通过电子邮件发送给您。至少你会看到出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:28:25.223

如果您需要以其他用户身份运行它，则将其安装在该用户的 crontab 上。而不是试图在脚本中使用 sudo。

# asp.net - 如何创建视频缩略图（扩展名.wmv、.avi）

> ID：10009989
> 
> 赞同：1
> 
> 时间：2012-04-04T11:15:40.177
> 
> 标签：asp.net

视频的路径（extension.wmv,.avi）存储在 SQL Server 中。我必须创建缩略图并将其显示在 ASPX 页面上。

如果有人知道这一点，请分享它的代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:12:52.043

我有一些用于生成缩略图视频的代码。

为此，您需要免费提供名为“ffmpeg.exe”的第三方 exe。你可以从 [这里下载](http://www.videohelp.com/tools/ffmpeg)

现在我在下面创建了从原始视频生成缩略图视频的功能。您可以根据您的要求更改变量。

```
private bool SaveVideo(FileUpload fupload)
{

    string VideoResolutionWidth = "400" ; //define video res. width
    string VideoResolutionHeight = "280";  //define video res. height
    string VideoThumbWidth = "100";//define jpg res. width
    string VideoThumbHeight = "100"; //define jpg res. height

    string VideoLocation = HttpContext.Current.Server.MapPath("~/ConverterFolder/Video/");
    string ConverterPath = HttpContext.Current.Server.MapPath("~/ConverterFolder/");
    String LargeFileName = "TestVideo.wmv"; // Thumb Video file name
    string ThumbFileName= "Testvideo.jpg";

    // Save Original video file first

    if (fupload.PostedFile.FileName != "")
    {
        fupload.PostedFile.SaveAs(ConverterPath + "\\" + System.IO.Path.GetFileName(fupload.PostedFile.FileName.Replace(" ", "_")));
    }

    if (System.IO.File.Exists(ConverterPath + "\\" + System.IO.Path.GetFileName(fupload.PostedFile.FileName.Replace(" ", "_"))))
    {
        string inipath = ConverterPath;
        string flvCMD, flvArg;
        string a_res_width, a_res_height, a_audioRate, a_frameRate, i_res_width, i_res_height;

        a_res_width = VideoResolutionWidth;
        a_res_height = VideoResolutionHeight;
          i_res_width = VideoThumbWidth;
        i_res_height = VideoThumbHeight;

        a_audioRate = "22050";
        a_frameRate = "15";

        string VideoThumbResolution = i_res_width + "x" + i_res_height;
        string VideoResolution = a_res_width + "x" + a_res_height;           
        String videoPATH = VideoLocation +  "\\" + LargeFileName.Replace(" ", "_");

        flvCMD = ConverterPath + "ffmpeg.exe";
        flvArg = "-i " + ConverterPath + "\\" + System.IO.Path.GetFileName(fupload.PostedFile.FileName.Replace(" ", "_")) + " -s " + VideoResolution + " -r " + a_frameRate + " -b 7500000 -ar " + a_audioRate + "  -ab 48 " + videoPATH;

        try
        {
            Process process = new Process();
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.RedirectStandardError = true;
            process.StartInfo.CreateNoWindow = true;
            process.StartInfo.FileName = flvCMD;
            process.StartInfo.Arguments = flvArg;
            process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;

            process.Start();
            string output = process.StandardOutput.ReadToEnd();
            process.Close();
            process.Dispose();

            if (System.IO.File.Exists(videoPATH))
            {

                Process process1 = new Process();
                process1.StartInfo.UseShellExecute = false;
                process1.StartInfo.RedirectStandardOutput = true;
                process1.StartInfo.RedirectStandardError = true;
                process1.StartInfo.CreateNoWindow = true;
                process1.StartInfo.FileName = flvCMD;
                process1.StartInfo.Arguments = "-i " + ConverterPath + "\\" + System.IO.Path.GetFileName(fupload.PostedFile.FileName.Replace(" ", "_")) + " -an -ss 00:00:01 -r 1 -vframes 1 -s " + VideoThumbResolution + " -f mjpeg -y " + VideoLocation "\\" + ThumbFileName;
                process1.Start();
                string outputMeta1 = process1.StandardOutput.ReadToEnd();
                process1.Close();
                process1.Dispose();
            }
            else
            {
                return false;
            }
        }
        catch (Exception)
        {

        }

    }
    return true;
} 
```

希望这会帮助你。快乐的编码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:29:39.903

对于 AVI，您可以使用以下代码项目

[http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

对于其他人尝试

[http://sourceforge.net/projects/directshownet/](http://sourceforge.net/projects/directshownet/)

[http://code.google.com/p/slimdx/](http://code.google.com/p/slimdx/)

# ios4 - CoreAudio框架中AudioBuffer中的值代表什么？

> ID：10009996
> 
> 赞同：0
> 
> 时间：2012-04-04T11:15:53.487
> 
> 标签：ios4, ios5, core-audio, audiobuffer

mData 成员中的值代表什么？看起来每个值都是一个 4 字节整数...

我想我的问题是，每个样本应该代表什么以及 mNumberChannels 成员代表什么？

如果我必须对声音模式应用某种变换，我能否及时将这些样本视为离散样本？如果是这样，每个 512 个样本代表什么时间段？

谢谢德肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:15:58.457

mData 缓冲区数组元素可以表示 16 位有符号整数、16 位有符号整数的立体声对、32 位 8.24/s7.24 缩放整数或定点值或 32 位浮点值等。 ，取决于音频单元及其配置方式。

缓冲区持续时间将是其以帧为单位的长度除以音频采样率，例如 512/44100 约为 11.61 毫秒。

# c++ - 数字滤波器和 std::inner_product 优化

> ID：10009997
> 
> 赞同：2
> 
> 时间：2012-04-04T11:16:05.800
> 
> 标签：c++, filtering, numeric

在数字滤波 C++ 应用程序中，我使用`std::inner_product`(with `std::vector<double>`and `std::deque<double>`) 计算每个数据样本的滤波器系数和输入数据之间的点积。在分析我的应用程序后，我发现不少于 85% 的执行时间都花在了`std::inner_product`！

`std::inner_product`例如在 GCC 中优化到什么程度？它是否使用 SIMD 指令？它是否执行循环展开？如何确保这一点？基于此，是否值得实现自定义点积函数（尤其是在系数数量较少的情况下）？（但我想保持函数尽可能通用）

更具体地说，这是我用来应用过滤器的一段代码：

```
std::deque<double> in(filterNum.size(), 0.0);
std::deque<double> out(filterDenom.size() - 1, 0.0);
const double gain = filterDenom.back();

for (unsigned int s = 0, size = data.size(); s < size; ++s) {
    in.pop_front();
    in.push_back(data[s] / gain);

    data[s] = inner_product(in.begin(), in.end(), filterNum.begin(),
        -inner_product(out.begin(), out.end(), filterDenom.begin(), 0.0));

    out.pop_front();
    out.push_back(data[s]);
} 
```

通常，我使用二阶带通 IIR 滤波器，这意味着`filterNum`和`filterDenom`（滤波器的分子和分母系数）的大小为 5。`data`是包含输入样本的向量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:13:30.673

如果您只是直接编写代码，那么从中获得 2 的额外因子应该不难。部分原因可能是消除了 inner_product 的一些一般性，但也有一些原因是消除了双端队列的使用——如果你只保留一个指向输入数组的指针，你可以索引它并从过滤器数组中删除内循环，并在外循环中增加指向输入数组的指针。

每个 inner_products 都必须通过双端队列使用迭代器，

然后大部分（编码）工作变成了处理边缘条件。

并把那个除法去掉——它应该是乘以一个在循环外计算的常数。

内积本身是非常高效的（没有什么可做的），但它需要在每次通过内循环时增加两个迭代器。没有显式的循环展开，但一个好的编译器可以如此简单地展开循环。并且编译器更有可能知道在遇到指令缓存问题之前将循环展开多远。

Deque 迭代器在纯指针上的效率不如 ++。每个 ++ 至少有一个测试，并且可能有多个作业。

这是一个简单（FIR）滤波器的样子，不包括边缘条件的代码（它在循环之外）

```
double norm = 1.0/sum;
double *p = data.values(); // start of input data
double *q = output.values();  // start of output buffer
int width = data.size() - filter.size();
for( int i = 0; i < width; ++i )
    {
    double *f = filter.values();
    double accumulator = ( f[0] * p[0] );
    for( int j = 1; j < filter.size(); ++j )
        {
        accumulator += ( f[i] * p[i] );
        }
    *q++ = accumulator * norm;
    } 
```

请注意，遗漏了一些杂乱的细节，这与您的过滤器不同，但它给出了想法。外循环内部的内容很容易适合现代指令缓存。编译器可以展开内部循环。大多数现代架构可以并行进行加法和乘法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T02:39:59.857

您可以要求 GCC 在并行模式下计算大多数算法，`<algorithms>`如果`<numeric>`您的数据集非常高，它可能会提高性能（我认为它实际上只在内部使用 OpenMP）。

但是，在小型数据集上，它可能会影响性能。

与其他解决方案进行比较将非常受欢迎！

[http://gcc.gnu.org/onlinedocs/libstdc++/manual/parallel_mode.html](http://gcc.gnu.org/onlinedocs/libstdc++/manual/parallel_mode.html)