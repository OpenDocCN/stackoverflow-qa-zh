# StackOverflow 问答 10840000-10840999

# html - 删除超链接中的下划线

> ID：10840004
> 
> 赞同：0
> 
> 时间：2012-05-31T19:25:55.043
> 
> 标签：html, css

我需要去掉超链接中的下划线。

```
<div id='something'>
   <h2>
      <a href='http://somerandomurl'>Photo</a>
   </h2>
</div> 
```

我正在使用这个 CSS，但它不起作用。

```
#something h2 a{text-decoration:none} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:28:07.367

这是你想要的CSS：

```
#something a:link {text-decoration:none;}
#something a:visited {text-decoration:none;}
#something a:hover {text-decoration:underline;}
#something a:active {text-decoration:underline;} 
```

您要定位的特定 CSS 取决于您要查找的内容。例如，如果您希望“某事”中的所有链接都没有下划线，请按照我上面写的操作。但是，如果您希望所有链接都没有下划线，则不会放置#something 等。如果您不确定我的意思，请阅读上下文选择器。这是很好的链接。

[http://www.daaq.net/old/css/index.php?page=css+context+selectors&parent=css+syntax](http://www.daaq.net/old/css/index.php?page=css+context+selectors&parent=css+syntax)

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:27:46.577

```
a:link, a:visited { text-decoration: none; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:28:11.693

什么是`#ugc`？

你需要...

```
#something h2 a { text-decoration: none; } 
```

你也可以定义

`a:hover, a:link, a:visited`

...如果不同州需要

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T19:31:58.867

您拥有的样式应该可以工作，除了`id`您的选择器中的错误..应该是

```
#something h2 a{text-decoration:none} 
```

[http://jsfiddle.net/V4e8m/2/](http://jsfiddle.net/V4e8m/2/)

# python - “_wrapped_view() 至少需要 1 个参数”错误是什么意思？

> ID：10840013
> 
> 赞同：2
> 
> 时间：2012-05-31T19:26:37.357
> 
> 标签：python, django, django-templates, django-views

我正在将 Django 表单数据渲染到模板，但是每次我访问 url 时，它都会向我显示这个错误：

```
_wrapped_view() takes at least 1 argument (0 given) 
```

views.py 中的方法：

```
 @login_required                              
 def subnet_network_detail(request):
     if request.method == 'POST':
         form = NetworkCreateForm(request.POST)
         if form.is_valid():
             subnet = form.data['Subnet_Address']
             ip = form.data['IP_Address']
             user_hosts = get_hosts(user=request.user)
             hosts_list = host_subnet(user_hosts,subnet,ip)
             import pdb;pdb.set_trace()
     extra_context = {
         'hosts_list': hosts_list
         }
     return direct_to_template(request, 'networks/subnet_network.html',extra_context) 
```

和 urls.py：

```
 url(r'^network/netmask/select/$',
     'subnet_network_detail', name='subnet_network_detail') 
```

我从其他有关此错误的问题中读到，但没有任何想法。如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:00:12.027

`direct_to_template`旨在用于您的`urls.py`：

```
url(r'^network/netmask/select/$', 'direct_to_template', {'template':'networks/subnet_network.html'}, name='subnet_network_detail') 
```

您应该在视图中使用[`render`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)或使用。[`render_to_response`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render_to_response)

如果您使用的是 django 1.3 或更高版本，您可以使用：

```
from django.shortcuts import render
...
return render('networks/subnet_network.html', extra_context) 
```

或者，如果您使用的是早期版本：

```
from django.shortcuts import render_to_response
from django.template import RequestContext
...
return render_to_response('networks/subnet_network.html', extra_context, RequestContext(request)) 
```

# mediawiki - mediawiki 模板源中的源代码混乱

> ID：10840015
> 
> 赞同：1
> 
> 时间：2012-05-31T19:26:38.767
> 
> 标签：mediawiki, mediawiki-templates

刚开始使用媒体维基，但我有一个奇怪的问题。

我想复制一个简单的模板“模板：注意”，所以我访问：

[Mediawiki 模板链接](http://www.mediawiki.org/w/index.php?title=Template%3aNote&action=edit)

它向我的浏览器显示的模板代码是：

```
{{#if: {{{1|}}}|<div class="block-note"><span class="block-contents">|
    [[File:Bulbgraph.png|18px|Note|link=]]}} '''Note:''' {{#if: {{{1|}}}|{{{1}}}</span></div>}} 
```

不，我没有复制粘贴错误，这就是它所显示的。语法错误..| 在错误的地方，一般语法不正确。当然，如果我复制粘贴它不起作用，我必须手动更正语法。

如果我尝试从特殊页面导出它，就会发生这种情况。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T15:49:50.680

安装[Extension:ParserFunctions](https://www.mediawiki.org/wiki/Extension%3aParserFunctions)。

# python - dbfpy 在 str 上返回 int() 错误

> ID：10840017
> 
> 赞同：0
> 
> 时间：2012-05-31T19:26:50.573
> 
> 标签：python, excel, dbf

我有一堆 dbfs，我正试图将它们转换成 xls。

在我的各种示例的测试文件中，一切都很好，但是当应用于工作中的大讨厌文件（带有“真实世界”示例）时，我的代码返回：

```
 Traceback (most recent call last):
      File "C:\...\final_sum _sw.py", line 73, in <module>
        dbf_xls(z, output_xls) #defined, reads dbf, writes xls
      File "C:\...\final_sum _sw.py", line 18, in dbf_xls
        sheet1.row(row).write(col, DBF[row][col])
      File "C:\Python26\ArcGIS10.0\lib\site-packages\dbfpy\dbf.py", line 242, in __getitem__
        return self.RecordClass.fromStream(self, self._fixIndex(index))
      File "C:\Python26\ArcGIS10.0\lib\site-packages\dbfpy\record.py", line 121, in fromStream
        return cls.fromString(dbf, cls.rawFromStream(dbf, index), index)
      File "C:\Python26\ArcGIS10.0\lib\site-packages\dbfpy\record.py", line 140, in fromString
        [_fd.decodeFromRecord(string) for _fd in dbf.header.fields])
      File "C:\Python26\ArcGIS10.0\lib\site-packages\dbfpy\fields.py", line 173, in decodeFromRecord
        return self.decodeValue(self.rawFromRecord(record))
      File "C:\Python26\ArcGIS10.0\lib\site-packages\dbfpy\fields.py", line 244, in decodeValue
        return int(value)
    ValueError: invalid literal for int() with base 10: '1 U' 
```

表中的违规值 = Cumula。面积为 1.1 未知材料类型。

其他文件有相同的问题，返回相同的“数字、空格、字母”格式或错误。

dbfpy 将此字段读取为“c”，但是否存在一些关于小数、导致 dbfpy 将此值视为 int() 的句点？无论如何都会强制，欺骗模块将所有值视为严格的字符串值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T22:47:31.163

我没用过`dbfpy`。您是否尝试过使用[我的 dbf 模块](http://pypi.python.org/pypi/dbf)？代码看起来像：

```
import dbf
table = dbf.Table(r'\path\to\dbf_file\filename')
table.open() 
```

然后：

```
for row, record in enumerate(table):
    for col, value in enumerate(record):
        sheet1.row(row).write(col, value) 
```

如果您有任何问题，请随时通过电子邮件与我联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:07:32.537

事实证明，所有给我带来问题的字段都包含非 ascii 字符（度数符号，人们决定花时间插入的其他奇怪的东西）的长文本字段（字符长度 253-256）。解决方案：

```
import codecs
blah_blah.encode("ascii", "ignore") 
```

我可能已经用 ?'s 或类似的东西替换了错误。

# actionscript-3 - 重力不适用于 Box2D for Flash (v2.1a)

> ID：10840018
> 
> 赞同：0
> 
> 时间：2012-05-31T19:27:01.297
> 
> 标签：actionscript-3, box2d

我正在尝试遵循一些关于 Box2D 的教程，但不知何故我似乎无法应用重力。下面是我的代码（带有我为教程阅读的 URL），也许我忽略了一些东西？谢谢你的帮助！

```
package
{
    import Box2D.Collision.Shapes.b2PolygonShape;
    import Box2D.Common.Math.b2Vec2;
    import Box2D.Dynamics.b2Body;
    import Box2D.Dynamics.b2BodyDef;
    import Box2D.Dynamics.b2DebugDraw;
    import Box2D.Dynamics.b2FixtureDef;
    import Box2D.Dynamics.b2World;

    import org.osflash.signals.natives.NativeSignal;

    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;

    /*
     * http://active.tutsplus.com/tutorials/games/introduction-to-box2d-for-flash-and-as3/
     * http://blog.allanbishop.com/box2d-2-1a-tutorial-part-1/
     * http://plasticsturgeon.com/2010/08/making-an-as3-game-in-box2d-flash-version-2-0-hello-world-box2d/
     */
    [SWF(backgroundColor="#cccccc", frameRate="30", width="1280", height="720")]
    public class Floor extends Sprite
    {
        private const   WIDTH                   :uint = 1280;
        private const   HEIGHT                  :uint = 720;
        private const   FPS                     :uint = 30;
        private const   NUM_PIXELS_PER_METER    :uint = 30;
        private const   TIMESTEP                :Number = 0 / NUM_PIXELS_PER_METER;
        private const   VELOCITY_ITERATIONS     :uint = 6;
        private const   POSITION_ITERATIONS     :uint = 2;

        private var _world      :b2World;
        private var _gravity    :b2Vec2;

        private var _updated    :NativeSignal;

        public function Floor()
        {
            init();
        }

        private function init():void
        {
            initStage();
            initBox2D();
            _updated = new NativeSignal (   this,
                                            Event.ENTER_FRAME,
                                            Event
                                        );
            _updated.add(onUpdated);
        }

        private function initStage():void
        {
            stage.frameRate = FPS;
            stage.align = StageAlign.TOP_LEFT;
            stage.scaleMode = StageScaleMode.NO_SCALE;
        }

        private function initBox2D():void
        {
            _gravity = new b2Vec2(0, 10);
            _world = new b2World(_gravity, true);

            var vector:b2Vec2 = new b2Vec2();

            // floor
            vector.x = (WIDTH * 0.5) / NUM_PIXELS_PER_METER;
            vector.y = (HEIGHT * 0.75) / NUM_PIXELS_PER_METER;
            var floorBodyDef:b2BodyDef = new b2BodyDef();
            floorBodyDef.position.Set(vector.x, vector.y);

            var floorBody:b2Body = _world.CreateBody(floorBodyDef);

            vector.x = (WIDTH * 0.5) / NUM_PIXELS_PER_METER;
            vector.y = 32 / NUM_PIXELS_PER_METER;
            var floorBox:b2PolygonShape = new b2PolygonShape();
            floorBox.SetAsBox(vector.x, vector.y);

            var floorFixture:b2FixtureDef = new b2FixtureDef();
            floorFixture.shape = floorBox;
            floorFixture.density = 1;
            floorFixture.friction = 1;

            floorBody.CreateFixture(floorFixture);

            // box
            vector.x = (WIDTH * 0.5) / NUM_PIXELS_PER_METER;
            vector.y = (HEIGHT * 0.125) / NUM_PIXELS_PER_METER;
            var boxBodyDef:b2BodyDef = new b2BodyDef();
            boxBodyDef.type = b2Body.b2_dynamicBody;
            boxBodyDef.position.Set(vector.x, vector.y);

            var boxBody:b2Body = _world.CreateBody(boxBodyDef);

            var box:b2PolygonShape = new b2PolygonShape();
            box.SetAsBox(1, 1);

            var boxFixtureDef:b2FixtureDef = new b2FixtureDef();
            boxFixtureDef.shape = box;
            boxFixtureDef.density = 1;
            boxFixtureDef.friction = 0.3;
            boxFixtureDef.restitution = 0.1;

            boxBody.CreateFixture(boxFixtureDef);

            // debug
            var debug:Sprite = new Sprite();
            addChild(debug);
            var debugDraw:b2DebugDraw = new b2DebugDraw();
            debugDraw.SetSprite(debug);
            debugDraw.SetDrawScale(NUM_PIXELS_PER_METER);
            debugDraw.SetLineThickness(1.0);
            debugDraw.SetAlpha(1);
            debugDraw.SetFillAlpha(0.4);
            debugDraw.SetFlags(b2DebugDraw.e_shapeBit);
            _world.SetDebugDraw(debugDraw);
        }

        private function onUpdated(_:Event):void
        {
            _world.Step (   TIMESTEP, 
                            VELOCITY_ITERATIONS, 
                            POSITION_ITERATIONS
                        );
            _world.ClearForces();
            _world.DrawDebugData();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:29:07.303

对不起，我是个白痴，当从其他地方复制 TIMESTEP 常量时，我​​得到的结果是 0 ......我的错。

# java - Wicket 1.5 PageParameters 为空

> ID：10840029
> 
> 赞同：1
> 
> 时间：2012-05-31T19:27:44.807
> 
> 标签：java, wicket, wicket-1.5

我是一个相当有经验的 Wicket 用户，但我第一次尝试 1.5 并且 mountPage() 语法打败了我。

我显然做错了什么，因为我无法对遇到同样问题的人进行单一参考。所以这里是：

这就是我的 init() 方法中的内容：

```
@Override
public void init()
{
    super.init();

    System.out.println("mounting: /requirement/${id}");

    mountPage("/requirement/${id}", RequirementPage.class);
} 
```

我已经通过将“需求”部分更改为其他内容并返回来验证这是否有效。这是 RequirementPage 的（唯一）构造函数：

```
public RequirementPage()
{
    try
    {
        PageParameters params = getPageParameters();

        System.out.println("named keys: " + params.getNamedKeys());
        System.out.println("index keys: " + params.getIndexedCount());

        StringValue value = params.get("id");

        System.out.println("requirement: " + value); 
```

在我的服务器控制台（Jetty8）中，我在启动时看到了这个：

```
mounting: /requirement/${id} 
```

当我向 /requirement/0 发出请求时，我看到：

```
named keys: []
index keys: 0
requirement: null 
```

我看了很多东西，我看不出我所做的与 wiki 或其他示例显示的有什么不同。

任何帮助表示赞赏。

谢谢，

-詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:34:31.050

您需要为 Wicket 提供一个带有 PageParameters 的构造函数，否则 wicket 不可能包装这些参数并将其提供给您的页面。

除此之外，您可以在`getRequestCycle().getRequest().getRequestParameters()`没有带有页面参数的构造函数的情况下访问 requestparameters，但只要您希望 wicket 管理和安装您的页面和参数并使其可收藏，则有必要提供一个默认构造函数，带或不带页面参数，根据您是否需要接收参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:56:51.380

你可以试试这个；

```
@Override
public void init()
{
    super.init();

    mountPage("requirement", RequirementPage.class);
} 
```

然后像这样调用 url "http://localhost:8080/requrement?id=111" 然后你可以用你的构造函数获取 id。但是你可以像这样使用你的网页构造函数；

```
public RequirementPage(PageParameters parameters)
{
 ...
} 
```

# python - Django post_save 在不覆盖模型 save() 的情况下防止递归

> ID：10840030
> 
> 赞同：37
> 
> 时间：2012-05-31T19:27:44.657
> 
> 标签：python, django, django-signals

有许多关于使用`post_save`信号进行递归的 Stack Overflow 帖子，其评论和答案绝大多数是：“为什么不覆盖 save()”或仅触发的保存`created == True`。

好吧，我相信有一个不使用的好案例`save()`——例如，我正在添加一个临时应用程序，它处理与我们的 Order 模型完全分开的订单履行数据。

框架的其余部分完全不知道履行应用程序，并且使用 post_save 挂钩将所有与履行相关的代码与我们的订单模型隔离开来。

如果我们放弃履行服务，我们的核心代码无需更改。我们删除履行应用程序，仅此而已。

那么，是否有任何体面的方法来确保 post_save 信号不会触发同一个处理程序两次？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-31T19:51:21.307

您可以在信号处理程序中使用更新而不是保存

```
queryset.filter(pk=instance.pk).update(....)

```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-11-12T17:47:05.297

不要断开信号。如果在信号断开时生成任何相同类型的新模型，则不会触发处理函数。信号在 Django 中是全局的，多个请求可以同时运行，导致一些请求失败，而另一些则运行它们的 post_save 处理程序。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-02-06T16:07:09.073

你觉得这个解决方案怎么样？

```
@receiver(post_save, sender=Article)
def generate_thumbnails(sender, instance=None, created=False, **kwargs):

    if not instance:
        return

    if hasattr(instance, '_dirty'):
        return

    do_something()

    try:
        instance._dirty = True
        instance.save()
    finally:
        del instance._dirty 
```

您还可以创建装饰器

```
def prevent_recursion(func):

    @wraps(func)
    def no_recursion(sender, instance=None, **kwargs):

        if not instance:
            return

        if hasattr(instance, '_dirty'):
            return

        func(sender, instance=instance, **kwargs)

        try:
            instance._dirty = True
            instance.save()
        finally:
            del instance._dirty

    return no_recursion

@receiver(post_save, sender=Article)
@prevent_recursion
def generate_thumbnails(sender, instance=None, created=False, **kwargs):

    do_something() 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-10-31T12:28:37.417

我认为`save_without_signals()`在模型上创建一个方法更明确：

```
class MyModel()
    def __init__():
        # Call super here.
        self._disable_signals = False

    def save_without_signals(self):
        """
        This allows for updating the model from code running inside post_save()
        signals without going into an infinite loop:
        """
        self._disable_signals = True
        self.save()
        self._disable_signals = False

def my_model_post_save(sender, instance, *args, **kwargs):
    if not instance._disable_signals:
        # Execute the code here. 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-05-31T19:43:25.280

如何断开然后重新连接`post_save`函数中的信号：

```
def my_post_save_handler(sender, instance, **kwargs):
    post_save.disconnect(my_post_save_handler, sender=sender)
    instance.do_stuff()
    instance.save()
    post_save.connect(my_post_save_handler, sender=sender)
post_save.connect(my_post_save_handler, sender=Order) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-21T13:31:16.137

您还可以检查`raw`参数`post_save`，然后调用`save_base`而不是`save`.

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-15T19:43:47.577

您应该使用 queryset.update() 而不是 Model.save() 但您需要处理其他事情：

需要注意的是，在使用的时候，如果要使用新的对象，应该重新获取他的对象，因为它不会改变self对象，例如：

```
>>> MyModel.objects.create(pk=1, text='')
>>> el = MyModel.objects.get(pk=1)
>>> queryset.filter(pk=1).update(text='Updated')
>>> print el.text
>>> '' 
```

所以，如果你想使用新对象，你应该再做一次：

```
>>> MyModel.objects.create(pk=1, text='')
>>> el = MyModel.objects.get(pk=1)
>>> queryset.filter(pk=1).update(text='Updated')
>>> el = MyModel.objects.get(pk=1) # Do it again
>>> print el.text
>>> 'Updated' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-28T17:00:49.830

模型的`.objects.update()`方法[绕过了`post_save`信号](https://docs.djangoproject.com/en/3.1/ref/models/querysets/#update)

试试这个：

```
from django.db import models
from django.db.models.signals import post_save

class MyModel(models.Model):

    name = models.CharField(max_length=200)
    num_saves = models.PositiveSmallIntegerField(default=0)

    @classmethod
    def post_save(cls, sender, instance, created, *args, **kwargs):
        MyModel.objects.filter(id=instance.id).update(save_counter=instance.save_counter + 1)

post_save.connect(MyModel.post_save, sender=MyModel) 
```

在这个例子中，一个对象有一个名字，每次`.save()`被调用时，`.num_saves`属性都会增加，但没有递归。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-02-21T04:44:58.653

看一下这个...

正如您可以在此处的文档中阅读的那样，每个信号都有其自身的好处，但我想分享一些关于 pre_save 和 post_save 信号的注意事项。

*   每次调用模型上的 .save() 时都会调用两者。换句话说，如果您保存模型实例，则会发送信号。

*   在 post_save 内的实例上运行 save() 通常会创建一个永无止境的循环，因此会导致超出最大递归深度错误 --- 仅当您没有正确使用 .save() 时。

*   pre_save 非常适合仅更改实例数据，因为您不必调用 save() ，这消除了上述可能性。您不必调用 save() 的原因是因为 pre_save 信号的字面意思是在被保存之前。

*   信号可以调用其他信号和/或运行延迟任务（对于 Celery），这对于可用性来说非常重要。

资料来源：[https ://www.codingforentrepreneurs.com/blog/post-save-vs-pre-save-vs-override-save-method/](https://www.codingforentrepreneurs.com/blog/post-save-vs-pre-save-vs-override-save-method/)

问候！！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-17T16:45:14.070

**在 django 中的 post_save 信号中，为了避免递归“如果已创建”，需要检查**

```
from django.dispatch import receiver
from django.db.models.signals import post_save

@receiver(post_save, sender=DemoModel)
def _post_save_receiver(sender,instance,created, **kwargs):
    if created:            
       print('hi..')
       instance.save() 
```

# mysql - MySQL更新查询中的语法错误

> ID：10840037
> 
> 赞同：2
> 
> 时间：2012-05-31T19:28:07.397
> 
> 标签：mysql, mysql-error-1064

我有一个包含 13 个字段的数据库表，其中 9 个字段由用户输入的表单填充。插入新行可以正常工作，但我在更新现有行时遇到问题。我问了一个朋友的意见，他帮不上忙。

我需要更新所有用户可调整的字段，因为每个调整都可以涵盖一个到所有字段，因此需要使用多个 SET 语句进行查询。更新查询是

```
$query = sprintf("UPDATE tour 
  SET StopNum=%d, SET ForwardLink=%d, SET BackLink=%d, SET LeftLink=%d, 
  SET RightLink=%d, SET Name= '%s', SET Lat=%f, SET Lon=%f, SET Heading=%d 
  WHERE FileName='%s'", $_POST['curStop'], $_POST['nextStop'], $_POST['prevStop'],
  $_POST['leftStop'], $_POST['rightStop'], $location, $latitude, $longitude, 
  $heading, $image); 
```

使用上述查询，我​​在示例更新中得到以下打印输出：

```
UPDATE tour SET StopNum=0, SET ForwardLink=0, SET BackLink=0, SET LeftLink=0, SET RightLink=0, SET Name= 'Start', SET Lat=98.154000, SET Lon=-75.214000, SET Heading=100 WHERE FileName='../panos/photos/1-prefix_blended_fused.jpg' 
```

根据mysql错误消息，我需要查看手册以获取正确的语法以使用near

```
'SET ForwardLink=0, SET BackLink=0, SET LeftLink=0, SET RightLink=0, SET Name= 'S' at line 1 
```

字段 'Name' 被定义为一个可为空的 varchar(250) 容器，因此 5 个字母的存储空间绰绰有余。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:30:07.163

语法应该是：

```
UPDATE table SET column=1,column1=2,column2=3 WHERE filename='asdf' 
```

# applescript - 重复文件 - AppleScript

> ID：10840041
> 
> 赞同：1
> 
> 时间：2012-05-31T19:28:26.873
> 
> 标签：applescript, finder

我正在尝试编写一个 Apple 脚本，它将两个文件从一个文件夹复制到另一个文件夹。我尝试了不同的方法，但我不断收到错误消息。

**方法一：**

```
tell application "Finder"

    set home_path to home as text

    set framework to alias (home_path & "Library:Developer:Xcode:DerivedData:ReaderKit-cusaxqpwrepxbfcmixaiszkolkkv:Build:Products:Debug-iphoneos:ReaderKit.framework")

    set bundle to alias (home_path & "Library:Developer:Xcode:DerivedData:ReaderKit-cusaxqpwrepxbfcmixaiszkolkkv:Build:Products:Debug-iphoneos:ReaderKit.framework")

    set destination to home_path & "Documents:WillowTree:BIA-Kelsey:BIA-Kelsey:ThirdParty"

    duplicate file framework to folder destination with replacing
    duplicate file bundle to folder destination with replacing
end tell 
```

**方法二**

```
tell application "Finder"

    set framework to "Macintosh HD:Users:nayef:Library:Developer:Xcode:DerivedData:ReaderKit-cusaxqpwrepxbfcmixaiszkolkkv:Build:Products:Debug-iphoneos:ReaderKit.framework"

    set bundle to "Macintosh HD:Users:nayef:Library:Developer:Xcode:DerivedData:ReaderKit-cusaxqpwrepxbfcmixaiszkolkkv:Build:Products:Debug-iphoneos:ReaderKit.bundle"

    set destination to "Macintosh HD:Users:User:nayef:Documents:WillowTree:BIA-Kelsey:BIA-Kelsey:ThirdParty"

    duplicate file framework to folder destination with replacing
    duplicate file bundle to folder destination with replacing
end tell 
```

**错误**

```
error "Finder got an error: Can’t set folder \"Macintosh HD:Users:User:nayef:Documents:WillowTree:BIA-Kelsey:BIA-Kelsey:ThirdParty\" to file \"Macintosh HD:Users:nayef:Library:Developer:Xcode:DerivedData:ReaderKit-cusaxqpwrepxbfcmixaiszkolkkv:Build:Products:Debug-iphoneos:ReaderKit.framework\"." number -10006 from folder "Macintosh HD:Users:User:nayef:Documents:WillowTree:BIA-Kelsey:BIA-Kelsey:ThirdParty" 
```

我的脚本有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:01:57.863

这是因为“ReaderKit.framework”不是文件，使用**文件夹**、**项目**或**别名**

```
duplicate folder framework to folder destination with replacing 
```

# html - 具有一个组合背景的菜单

> ID：10840043
> 
> 赞同：0
> 
> 时间：2012-05-31T19:28:40.857
> 
> 标签：html, css

我正在尝试从这四个列表中创建一个下拉菜单

```
<ul id="list-nav">
<li><a href="#">1</a></li>
<ul>
<li><a href="#"></a>1</li>
<li><a href="#"<></a>2</li>
<li><a href="#"<></a>3</li> 
<li><a href="#"<></a>4</li>
<li><a href="#"<></a>5</li>
</ul> 
```

```
<ul id="list-nav">  
<li><a href="#">2</a></li>
<ul>
<li><a href="#"<></a>1</li>
<li><a href="#"<></a>2</li>
<li><a href="#"<></a>3</li>
<li><a href="#"<></a>4</li>
<li><a href="#"<></a>5</li>

<ul id="list-nav">  
<li><a href="#">3</a></li>
<ul>
<li><a href="#"<></a>1</li>
<li><a href="#"<></a>2</li>
<li><a href="#"<></a>3</li>
<li><a href="#"<></a>4</li>
<li><a href="#"<></a>5</li>

<ul id="list-nav">  
<li><a href="#">4</a></li>
<ul>
<li><a href="#"<></a>1</li>
<li><a href="#"<></a>2</li>
<li><a href="#"<></a>3</li>
<li><a href="#"<></a>4</li>
<li><a href="#"<></a>5</li>
</ul> 
```

但由于某种原因，css 无法组合在一起，我想我已经编码了一段时间，所以我需要有人向我展示它的 css。我希望菜单是内联的，并且在鼠标单击时我希望每个子类别都下拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:36:23.233

我认为您应该从更正 a 标签开始

```
<li><a href="#">1</a></li> 
```

代替

```
<li><a href="#"<></a>1</li> 
```

确保数字在 a 标签内，并确保关闭所有 ul 标签。

至于交互性，您可能需要使用一些 CSS3 或 JavaScript。

有很多教程可以做到这一点。

jQuery 可能是一个简单的方法。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:31:58.763

您还没有关闭 ul 标签。除了第一个和最后一个。你在四个地方使用 id:s。编号：s。每页应该只使用一次 ID。改用类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T21:02:10.920

您的标记存在一些严重错误：

*   同一个 id 被多次使用。您应该在一个页面中只使用一次相同的 id 名称。
*   a 标签的格式不正确。
*   下拉 ul 标签不嵌套在父 ul 的 li 标签中。
*   并且下拉项目的数字可能应该位于 a 标签内

对标记的更正如下。

```
<ul id="list-nav-1">
  <li><a href="#">1</a>
    <ul>
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
    </ul>
  </li>
</ul>
<ul id="list-nav-2">
  <li><a href="#">2</a>
    <ul>
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
    </ul>
  </li>
</ul>
<ul id="list-nav-3">
  <li><a href="#">3</a>
    <ul>
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
    </ul>
  </li>
</ul>
<ul id="list-nav-4">
  <li><a href="#">4</a>
    <ul>
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
    </ul>
  </li>
</ul> 
```

关于您试图通过下拉行为实现的目标，我不确定您想要什么。你能提供一个最终结果应该是什么样子的视觉模型吗？

# algorithm - 微软采访：转换矩阵

> ID：10840044
> 
> 赞同：17
> 
> 时间：2012-05-31T19:28:46.623
> 
> 标签：algorithm, matrix, bit-manipulation, space-complexity

> 给定一个大小为 nxm 的矩阵，其中填充了 0 和 1
> 
> 例如：
> 
> 1 1 0 1 0
> 
> 0 0 0 0 0
> 
> 0 1 0 0 0
> 
> 1 0 1 1 0
> 
> 如果矩阵在 (i,j) 处为 1，则用 1 填充第 j 列和第 i 行
> 
> 即，我们得到：
> 
> 1 1 1 1 1
> 
> 1 1 1 1 0
> 
> 1 1 1 1 1
> 
> 1 1 1 1 1
> 
> 所需复杂度：O(n*m) 时间和 O(1) 空间
> 
> 注意：您不能在矩阵条目中存储除“0”或“1”之外的任何内容

以上是微软面试题。

我想了两个小时。我有一些线索，但不能再继续了。

* * *

行。这个问题的第一个重要部分是`Even using a straight forward brute-force way`，它不容易解决。

如果我只使用两个循环遍历矩阵中的每个单元格，并更改相应的行和列，则无法完成，因为生成的矩阵应基于原点矩阵。

例如，如果我看到`a[0][0] == 1`，我不能全部更改为`row 0`，因为那会影响as本来没有 0。`column 0``1``row 1``row 1`

* * *

我注意到的第二件事是，如果一行`r`只包含`0`而一列`c`只包含`0`，那么`a[r][c]`一定是`0`；对于不在此模式中的任何其他位置应该是`1`。

然后另一个问题来了，如果我找到这样的行和列，我怎样才能将相应的单元格标记`a[r][c]`为`special`它已经是 0。

* * *

我的直觉是我应该对此使用某种位操作。或者为了满足所需的复杂性，我必须做类似`After I take care of a[i][j], I should then proceed to deal with a[i+1][j+1], instead of scan row by row or column by column`.

即使对于不考虑时间复杂度的蛮力，我也无法用其他条件解决它。

有人有线索吗？

* * *

**解决方案：Java版**

**@japreiss 已经回答了这个问题，他/她的回答是聪明而正确的。他的代码是 Python 的，现在我给出 Java 版本。学分都去@japreiss**

```
public class MatrixTransformer {

    private int[][] a;
    private int m;
    private int n;

    public MatrixTransformer(int[][] _a, int _m, int _n) {
        a = _a;
        m = _m;
        n = _n;
    }

    private int scanRow(int i) {
        int allZero = 0;
        for(int k = 0;k < n;k++)
            if (a[i][k] == 1) {
                allZero = 1;
                break;
            }

        return allZero;
    }

    private int scanColumn(int j) {
        int allZero = 0;
        for(int k = 0;k < m;k++)
            if (a[k][j] == 1) {
                allZero = 1;
                break;
            }

        return allZero;
    }

    private void setRowToAllOnes(int i) {
        for(int k = 0; k < n;k++)
            a[i][k] = 1;
    }

    private void setColToAllOnes(int j) {
        for(int k = 0; k < m;k++)
            a[k][j] = 1;
    }

//  # we're going to use the first row and column
//  # of the matrix to store row and column scan values,
//  # but we need aux storage to deal with the overlap
//  firstRow = scanRow(0)
//  firstCol = scanCol(0)
//
//  # scan each column and store result in 1st row - O(mn) work

    public void transform() {
        int firstRow = scanRow(0);
        int firstCol = scanColumn(0);

        for(int k = 0;k < n;k++) {
            a[0][k] = scanColumn(k);
        }

        // now row 0 tells us whether each column is all zeroes or not
        // it's also the correct output unless row 0 contained a 1 originally

        for(int k = 0;k < m;k++) {
            a[k][0] = scanRow(k);
        }

        a[0][0] = firstCol | firstRow;

        for (int i = 1;i < m;i++)
            for(int j = 1;j < n;j++)
                a[i][j] = a[0][j] | a[i][0];

        if (firstRow == 1) {
            setRowToAllOnes(0);
        }

        if (firstCol == 1) 
            setColToAllOnes(0);
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();

        for (int i = 0; i< m;i++) {
            for(int j = 0;j < n;j++) {
                sb.append(a[i][j] + ", ");
            }
            sb.append("\n");
        }

        return sb.toString();
    }
    /**
     * @param args
     */
    public static void main(String[] args) {
        int[][] a = {{1, 1, 0, 1, 0}, {0, 0, 0, 0, 0},{0, 1, 0, 0, 0},{1, 0, 1, 1, 0}};
        MatrixTransformer mt = new MatrixTransformer(a, 4, 5);
        mt.transform();
        System.out.println(mt);
    }

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T20:01:03.597

这是 python 伪代码中的一个解决方案，它使用 2 个额外`bool`的存储空间。我认为它比我用英语做的更清楚。

```
def scanRow(i):
    return 0 if row i is all zeroes, else 1

def scanColumn(j):
    return 0 if col j is all zeroes, else 1

# we're going to use the first row and column
# of the matrix to store row and column scan values,
# but we need aux storage to deal with the overlap
firstRow = scanRow(0)
firstCol = scanCol(0)

# scan each column and store result in 1st row - O(mn) work
for col in range(1, n):
    matrix[0, col] = scanColumn(col)

# now row 0 tells us whether each column is all zeroes or not
# it's also the correct output unless row 0 contained a 1 originally

# do the same for rows into column 0 - O(mn) work
for row in range(1, m):
    matrix[row, 0] = scanRow(row)

matrix[0,0] = firstRow or firstCol

# now deal with the rest of the values - O(mn) work
for row in range(1, m):
    for col in range(1, n):
        matrix[row, col] = matrix[0, col] or matrix[row, 0]

# 3 O(mn) passes!

# go back and fix row 0 and column 0
if firstRow:
    # set row 0 to all ones

if firstCol:
    # set col 0 to all ones 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-06T19:33:40.957

这是另一种直觉，它给出了解决问题的简洁算法。

## 使用 O(n) 空间的初始算法。

现在，让我们忽略 O(1) 内存限制。假设您可以使用 O(n) 内存（如果矩阵为 m × n）。这将使这个问题变得容易得多，我们可以使用以下策略：

*   创建一个布尔数组，每列一个条目。
*   对于每一列，确定列中是否有任何 1 并将该信息存储在适当的数组条目中。
*   对于每一行，如果该行中有任何 1，则将该行设置为全 1。
*   对于每一列，如果设置了相应的数组条目，则将该列设置为全 1。

例如，考虑这个数组：

```
1 1 0 1 0
0 0 0 0 0
0 1 0 0 0
1 0 1 1 0 
```

我们将从创建和填充辅助数组开始，这可以通过一次访问每一列在 O(mn) 时间内完成。这显示在这里：

```
1 1 0 1 0
0 0 0 0 0
0 1 0 0 0
1 0 1 1 0

1 1 1 1 0  <--- aux array 
```

接下来，我们遍历行并填充每一行，如果它包含任何 1。这给出了这个结果：

```
1 1 1 1 1
0 0 0 0 0
1 1 1 1 1
1 1 1 1 1

1 1 1 1 0  <--- aux array 
```

最后，如果辅助数组在该位置有 1，我们用 1 填充每一列。这显示在这里：

```
1 1 1 1 1
1 1 1 1 0
1 1 1 1 1
1 1 1 1 1

1 1 1 1 0  <--- aux array 
```

所以有一个问题：这使用了我们没有的 O(n) 空间！那么为什么还要走这条路呢？

## 使用 O(1) 空间的改进算法。

事实证明，我们可以使用一个非常可爱的技巧来使用 O(1) 空间运行这个算法。我们需要一个关键的观察：*如果每一行至少包含一个 1，那么整个矩阵就变成了 1。*因此，我们首先看看是否是这种情况。如果是，那就太好了！我们完成了。

否则，*矩阵中一定有某行全为 0。*由于该行全为 0，我们知道在“用 1 填充包含 1 的每一行”步骤中，该行不会被填充。因此，我们可以将该行用作我们的辅助数组！

让我们看看这个在行动。从这个开始：

```
1 1 0 1 0
0 0 0 0 0
0 1 0 0 0
1 0 1 1 0 
```

现在，我们可以找到一个全为 0 的行，并将其用作我们的辅助数组：

```
1 1 0 1 0
0 0 0 0 0  <-- Aux array
0 1 0 0 0
1 0 1 1 0 
```

我们现在通过查看每一列并标记哪些列至少包含一个 1 来填充辅助数组：

```
1 1 0 1 0
1 1 1 1 0  <-- Aux array
0 1 0 0 0
1 0 1 1 0 
```

在这里填写 1 是完全安全的，因为我们知道他们无论如何都会被填写。现在，对于包含 1 的每一行，*除了辅助数组 row*，我们用 1 填充这些行：

```
1 1 1 1 1
1 1 1 1 0  <-- Aux array
1 1 1 1 1
1 1 1 1 1 
```

我们跳过辅助数组，因为最初它全是 0，所以它通常不会被填充。最后，我们在辅助数组中用 1 填充每一列，给出最终结果：

```
1 1 1 1 1
1 1 1 1 0  <-- Aux array
1 1 1 1 1 
1 1 1 1 1 
```

让我们再举一个例子。考虑这个设置：

```
1 0 0 0
0 0 1 0
0 0 0 0
0 0 1 0 
```

我们首先找到一个全为零的行，如下所示：

```
1 0 0 0
0 0 1 0
0 0 0 0 <-- Aux array
0 0 1 0 
```

接下来，让我们通过标记包含 1 的列来填充该行：

```
1 0 0 0
0 0 1 0
1 0 1 0 <-- Aux array
0 0 1 0 
```

现在，填写所有包含 1 的行：

```
1 1 1 1
1 1 1 1
1 0 1 0 <-- Aux array
1 1 1 1 
```

接下来，用 1 填充 aux 数组中包含 1 的所有列。这已经在这里完成了，我们有我们的结果！

作为另一个例子，考虑这个数组：

```
1 0 0
0 0 1
0 1 0 
```

这里的每一行至少包含一个 1，所以我们只需用 1 填充矩阵就完成了。

最后，让我们试试这个例子：

```
0 0 0 0 0
0 0 0 0 0
0 1 0 0 0
0 0 0 0 0
0 0 0 1 0 
```

我们有很多辅助数组的选择，所以让我们选择第一行：

```
0 0 0 0 0 <-- aux array
0 0 0 0 0
0 1 0 0 0
0 0 0 0 0
0 0 0 1 0 
```

现在，我们填写 aux 数组：

```
0 1 0 1 0 <-- aux array
0 0 0 0 0 
0 1 0 0 0
0 0 0 0 0
0 0 0 1 0 
```

现在，我们填写行：

```
0 1 0 1 0 <-- aux array
0 0 0 0 0 
1 1 1 1 1
0 0 0 0 0
1 1 1 1 1 
```

现在，我们根据 aux 数组填充列：

```
0 1 0 1 0 <-- aux array
0 1 0 1 0 
1 1 1 1 1
0 1 0 1 0
1 1 1 1 1 
```

我们完成了！整个过程在 O(mn) 时间内运行，因为我们

*   做 O(mn) 工作来找到 aux 数组，如果一个不存在，可能 O(mn) 立即工作。
*   做 O(mn) 工作来填充辅助数组。
*   做 O(mn) 工作来填充包含 1 的行。
*   做 O(mn) 的工作来填充包含 1 的列。

另外，它只使用 O(1) 空间，因为我们只需要存储辅助数组的索引和足够的变量来对矩阵进行循环。

**编辑**：我有**[这个算法的 Java 实现，](http://keithschwarz.com/interesting/code/?dir=matrix-fill)**并在我的个人网站上提供了详细描述它的评论。享受！

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T05:48:15.373

假设矩阵是从 0 开始的，即第一个元素在 mat[0][0]

1.  使用第一行和第一列作为表头分别包含列和行信息。1.1 注意 mat[0][0] 处的元素。如果是1，最后需要特殊处理（后面会讲）

2.  现在，从 index[1][1] 开始扫描内部矩阵直到最后一个元素 2.1 如果元素 at[row][col] == 1 则更新表头数据如下行：mat[row][0 ] = 1; 列：mat[0][col] = 1；

至此，我们有了关于应该将哪一列和哪一行设置为 1 的完整信息

1.  再次开始扫描从 mat[1][1] 开始的内部矩阵，如果当前行或列在表头中包含 1，则将每个元素设置为 1： if ( (mat[row][0] == 1) | | (mat[0][col] == 1) ) 然后将 mat[row][col] 设置为 1。

此时我们已经处理了内部矩阵中的所有单元格，我们还没有处理表头本身

1.  处理表头 如果 matt[0][0] == 1 则将第一列和第一行中的所有元素设置为 1
2.  完毕

时间复杂度O(2*((n-1)(m-1)+(n+m-1))，即O(2*n*m - (n+m) + 1)，即O(2* n*m) 空间 O(1)

[在http://codepad.org/fycIyflw](http://codepad.org/fycIyflw)查看我的实现

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T19:04:59.347

另一种解决方案是像往常一样扫描矩阵，并在第一个 1 处将矩阵分成 4 个象限。然后将行和列设置为 1，并递归处理每个象限。只需确保设置整个列和行，即使您只扫描一个象限。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-16T06:39:27.080

```
public void setOnes(int [][] matrix){

    boolean [] row = new boolean [matrix.length]
    boolean [] col = new boolean [matrix[0].length]
    for (int i=0;i<matrix.length;i++){
        for(int j=0;j<matrix[0].length;j++){
            if (matrix[i][j] == 1){
                row[i] = true
                col[j] = true
            }
        }
    }

    for (int i=0;i<matrix.length;i++){
        for(int j=0;j<matrix[0].length;j++){
            if (row[i] || col[j]){
                matrix[i][j] = 1;
            }
        }
    }
} 
```

# jquery - 通量滑块 - 图片在底部截断

> ID：10840047
> 
> 赞同：0
> 
> 时间：2012-05-31T19:28:59.277
> 
> 标签：jquery, image, slider, flux

我在我的 Wordpress 中使用 Flux 滑块，我遇到的问题很奇怪——在我点击离开滑块所在的索引页面后——然后回到索引和滑块——底部有一个截断滑块，大约 10 像素高。

我不知道是什么原因造成的，修复它的唯一方法是 Ctrl+F5 但在我返回索引页面后它再次出现。

有人知道什么可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:18:53.727

在调用滑块之前，您可能没有等待图像完全加载。正如 lucuma 所提到的，没有一个例子很难说。

# objective-c - Objective-C：从字符串中去除 HTML 标签

> ID：10840055
> 
> 赞同：0
> 
> 时间：2012-05-31T19:29:21.960
> 
> 标签：objective-c, ios, regex

> **可能重复：**
> [从 iPhone 上的 NSString 中删除 HTML 标签 从 NSString 中](https://stackoverflow.com/questions/277055/remove-html-tags-from-an-nsstring-on-the-iphone)
> [剥离 HTML 标签等](https://stackoverflow.com/questions/6170531/strip-out-html-tags-etc-from-nsstring)

我在 JSON 字典中返回了一些字符串，如下所示：

```
"<p>There are <span class=\"top-color-red\">7</span> magical worlds ahead!</p>" 
```

在 Objective-C 和 Foundation 框架中，有没有办法去掉所有的标签和 HTML 杂乱无章的东西，只显示要渲染的字符串？

```
There are 7 magical worlds ahead! 
```

如果这需要使用外部库，您可以以我的字符串为例发布一个代码片段吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:31:48.987

如果可以相信字符串格式正确，那么最简单的选择可能是使用`NSXMLParser`; 实现委托方法`-parser:foundCharacters:`，使用累加器收集文档片段的文本内容。

如果您不能相信它们是格式良好的 XML，但*可以*相信它们是有效的 HTML；您可以使用`NSAttributedString`及其`-initWithHTML:documentAttributes:`方法，并在创建字符串后从字符串中提取文本。

如果您不能相信它是有效的 HTML；逃跑。

非常非常快。

# python - matplotlib z 方向

> ID：10840060
> 
> 赞同：3
> 
> 时间：2012-05-31T19:29:42.643
> 
> 标签：python, matplotlib

我无法在 matplotlib 中完成绘图。这是代码：

```
arrays_k, arrays_v = splitbyrecordcount(ycsb[2])
checktype = [ "Update", "Read", "Verification" ]

fig = plt.figure()
ax = fig.add_subplot('111', projection='3d')

for z in [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]:
    xs = arrays_k[z]
    ys = arrays_v[z]
    c = colmap.spectral(z/10.,1)
    ax.plot(xs, ys, zs=z, zdir='z', color=c) 
```

它产生这个：

![正确但错误的方式](../Images/2be2dfb1a9d228250c523064cf800cdc.png)

我想要你所期望的时间图：更多的“在屏幕上”，而不是像上图那样“垂直”于它。我已经尝试了 ax.plot() 部分的许多不同组合，但是如果我将其更改为：

```
ax.plot(xs, ys, zs=z, zdir='y', color=c) 
```

我明白了：

![什么](../Images/df26bbd95b76449818a216201b4e76ee.png)

将其更改为：

```
ax.plot(xs, ys, zs=z, zdir='x', color=c) 
```

……也无济于事。它只是在原点的 z 方向上制作一个细条。

有任何想法吗？即使有人知道一种方法来旋转整个图形以使图形位于屏幕平面上也比没有好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:44:28.120

在没有数据检查的情况下，我认为问题在于`ax.plot`. 试试这个：

```
ax.plot(xs, z * np.ones(xs.shape), zs=ys, zdir='z', color=c) 
```

因此，您希望 2D 图中的“y”轴是高度，因此`zs=ys`.

# c - 如何在 GTK+ 中启动和停止 GIF 动画 GtkImage

> ID：10840069
> 
> 赞同：4
> 
> 时间：2012-05-31T19:30:45.350
> 
> 标签：c, gtk, gif, animated-gif

我有一个加载动画文件矩阵的`GTK+`应用程序。它们在加载时自动运行动画，然后在动画完成时停止。我将如何重新启动每个包含和 动画完成时生成的信号的动画？`C``GIF``GtkImages``GtkImage``GIF`

谢谢你。

**编辑：[这里](http://developer.gnome.org/gdk-pixbuf/2.22/gdk-pixbuf-animation.html#gdk-pixbuf-animation.description)描述
的使用是否可以做到这一点？`gdk_pixbuf_animation_get_iter()`**

下面提供了完整的代码。

```
/*
 * Compile me with:
 *   gcc -o reels reels.c $(pkg-config --cflags --libs gtk+-2.0 gmodule-2.0)
 */

#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <errno.h>
#include <time.h>

/* GTK */
#include <gdk/gdkx.h>
#include <gtk/gtk.h>

/**** prototypes ****/

static void destroy (GtkWidget*, gpointer);
GdkPixbuf *create_pixbuf(const gchar * filename);
GtkWidget *SetupWindow(gchar *data, const gchar *filename);
static void destroy (GtkWidget *window, gpointer data);
void btnSpin_clicked(GtkWidget *button, gpointer data);
void btnExit_clicked(GtkWidget *button, gpointer data);

/********************/

GtkWidget   *images[3][5];

static void destroy (GtkWidget *window, gpointer data)
{
  gtk_main_quit ();
}

void btnSpin_clicked(GtkWidget *button, gpointer data)
{
    printf("Spin Button pressed.\n");

    return;
}

void btnExit_clicked(GtkWidget *button, gpointer data)
{
    gtk_main_quit();

    return;
}

GtkWidget *SetupWindow(gchar *data, const gchar *filename)
{
    GdkPixmap *background;
    GdkPixbuf *pixbuf;
    GdkScreen *ourscreen;
    GdkColormap *colormap;
    GtkStyle *style;
    GdkColor fg;
    GdkColor bg;
    GError *error = NULL;
    GdkRectangle *rect;
    GtkWidget *window;

    pixbuf = gdk_pixbuf_new_from_file (filename,&error);
    if (error != NULL) {
        if (error->domain == GDK_PIXBUF_ERROR) {
            g_print ("Pixbuf Related Error:\n");
        }
        if (error->domain == G_FILE_ERROR) {
            g_print ("File Error: Check file permissions and state:\n");
        }

        g_printerr ("%s\n", error[0].message);
    }

    gdk_pixbuf_render_pixmap_and_mask (pixbuf, &background, NULL, 0);
    style = gtk_style_new ();
    style->bg_pixmap[0] = background;
    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title (GTK_WINDOW (window), data);
    // gtk_window_maximize(GTK_WINDOW(window));
    gtk_window_set_modal (GTK_WINDOW (window),TRUE);
    gtk_window_set_default_size(GTK_WINDOW(window),628,530);
    gtk_widget_set_style (GTK_WIDGET(window), GTK_STYLE(style));
    gtk_window_set_position(GTK_WINDOW(window),GTK_WIN_POS_CENTER_ALWAYS);
    gtk_container_set_border_width(GTK_CONTAINER(window), 0);
    //gtk_window_set_resizable(GTK_WINDOW(window), (gboolean) FALSE);
    gtk_window_set_decorated( GTK_WINDOW(window), FALSE );    

    return(window);
}

int main (int argc, char *argv[])
{
    GdkPixbufAnimation *animation;
    GtkWidget *image;
    int x,y;    
    GdkPixbuf *pixBuf;
    GdkPixmap *pixMap;
    gchar filename[20];
    GtkWidget *btnSpin, *btnExit;

    GtkWidget *frame;       /* for absolute positionining of widgets */
    GtkWidget *window;
    int posx, posy;

    gtk_init (&argc, &argv);

    window = SetupWindow("Demo", "background.gif");
    g_signal_connect (G_OBJECT (window), "destroy", G_CALLBACK (destroy), NULL);

    frame = gtk_fixed_new();
    gtk_container_add(GTK_CONTAINER(window), frame);

    btnSpin = gtk_button_new_with_label("Spin");
    gtk_widget_set_size_request(btnSpin, 80, 35);
    gtk_fixed_put(GTK_FIXED(frame), btnSpin, 229, 485);
    g_signal_connect(G_OBJECT( btnSpin ), "clicked", G_CALLBACK(btnSpin_clicked), NULL );

    btnExit = gtk_button_new_with_label("Exit");
    gtk_widget_set_size_request(btnExit, 80, 35);
    gtk_fixed_put(GTK_FIXED(frame), btnExit, 320, 485);
    g_signal_connect(G_OBJECT( btnExit ), "clicked", G_CALLBACK(btnExit_clicked), NULL );

    /* setup animated gifs */
    for( y = 0; y < 3; y++ )
    {
        posy = (y*120) + 20;
        for( x = 0; x < 5; x++ )
        {
            posx = (x*120) + 20;
            /* set each Image widget to spin GIF */
            sprintf( filename,"%d-%d.gif", y+1,x+1 );
            images[y][x] = gtk_image_new_from_file(filename);
            gtk_fixed_put(GTK_FIXED(frame), images[y][x], posx, posy);
        }
    }

    gtk_widget_show_all(window);

    gtk_main ();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:19:02.007

看了[GtkImage 源码](http://git.gnome.org/browse/gtk+/tree/gtk/gtkimage.c)后，恐怕动画完成时没有产生信号。但是，您应该能够通过调用`gtk_image_set_from_file()`或重新启动动画`gtk_image_set_from_animation()`。

为了彻底解决你最初的问题，我建议你创建一个 GtkImage 的子类。它的行为应该与 GtkImage 完全一样，除了应该在[第 1315 行](http://git.gnome.org/browse/gtk+/tree/gtk/gtkimage.c)附近`animation_timeout`发送信号。`delay < 0`

有关创建 GObject 子类的信息（请注意，GtkImage 是 GObject）可以在[此处](http://developer.gnome.org/gobject/stable/howto-gobject.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:49:58.957

根据 user1202136 的回答，以下代码片段显示了解决方案。我发布这个以防其他人发现它有用。

基本思想是使用`GdkPixbufAnimation`,`gdk_pixbuf_animation_new_from_file`和`gtk_image_set_from_animation`

以下代码片段显示了如何执行此操作。

```
GtkWidget *images[3][5];
GdkPixbufAnimation *animations[3][5];

/* Initial setup of animated gifs */
for( y = 0; y < 3; y++ )
{
    for( x = 0; x < 5; x++ )
    {
        /* set each Image widget to spin GIF */
        sprintf( filename,"%d-%d.gif", y+1,x+1 );
        images[y][x] = gtk_image_new();
        animations[y][x] = gdk_pixbuf_animation_new_from_file ( filename , &error);
        gtk_image_set_from_animation (GTK_IMAGE(images[y][x]), animations[y][x]);
        gtk_fixed_put(GTK_FIXED(frame), images[y][x], (x*120) + 20, (y*120) + 20);
    }
}

/*  now to restart the animations use the images and animations array already stored in memory,
    no need to re-read the animations from disk so this happens quickly
*/

/* restart animated gifs */
for( y = 0; y < 3; y++ )
{
    for( x = 0; x < 5; x++ )
    {
        gtk_image_set_from_animation(GTK_IMAGE(images[y][x]), animations[y][x]);
    }
} 
```

# windows - Windows 上的 ARM 汇编语言 IDE

> ID：10840072
> 
> 赞同：1
> 
> 时间：2012-05-31T19:31:01.340
> 
> 标签：windows, assembly, ide, arm

Windows 上是否有任何 ARM 汇编语言 IDE（如 Eclipse，...），我可以编写指令并让它模拟这些指令？
在其他平台上呢？以及如何详细使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:32:21.310

Android SDK 有一个适用于 Windows 的版本，其中包括 Eclipse IDE；它包括一个设备模拟器，您可以在其上运行创建的代码。如果添加 Android NDK（本机开发工具包），您还可以获得 ARM 交叉编译器。Android 模拟器/模拟器实际上是 ARM 的 QEMU，它执行原生 ARM 代码。

简而言之：获取适用于 Windows 的 Android [SDK](http://developer.android.com/sdk/index.html) / [NDK](http://developer.android.com/sdk/ndk/index.html)，您将拥有所需的一切 - Eclipse IDE、ARM 模拟器、ARM 交叉编译器/汇编器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T21:30:42.457

Both Visual Studio 2005 and 2008 allow you to write ARM assembly code and interactively debug it on an emulator or device. The only limits are that the emu/device must be Windows CE 4/5/6 and the compilers only support the ARMv4 and ARMv5 instruction sets.

If you can wait for the official release of Visual Studio 2011, it will allow full ARMv7A development to target WoA (Windows on ARM) devices.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T21:41:39.383

ARM 和 Keil 提供了您可以购买的 IDE。
如果您在谈论免费的，那么我不知道。

# java - Java Swing 属性编辑器

> ID：10840078
> 
> 赞同：5
> 
> 时间：2012-05-31T19:31:21.857
> 
> 标签：java, swing, user-interface

是否有现有的库可以从属性（或类似属性）对象自动创建 Java Swing 表单？即显示 2 列，与属性一样多的行，正确对齐的属性名称在左侧，JTextFields 用于右侧的值。

我在编译时无权访问属性名称（或预期类型）。

此外，该解决方案必须允许在构造后将某些值字段设置为只读。

一个很好的解决方案是：

*   允许将某些属性值指定为敏感值，需要 JPasswordField
*   提供输入格式检查，例如针对对象类型（如 URL、Double 等）

或通过类型敏感，以便使用适当的小部件（或显示适当小部件的按钮）代替标准对象类型的 JTextField。例如，JFileChooser 用于预期为文件类型的属性、SwingX 颜色/日期选择、数字格式检查）

进入特定类型的属性开始听起来像 JavaBeans。我宁愿*不*走 JavaBeans 路线，除非有一个非常简单（而不是大框架）的解决方案，用于 Javabean 对象。

（我已经知道如何手动执行此操作，并且可以自己编写一个忽略灵敏度/类型信息的简单实现 - 任何按照这些思路回答的人都会被击落！我只想知道这样的野兽是否已经存在，最好是在维护良好的环境中图书馆）

更新：与[Java Beans 相关 - 创建检查器窗口](https://stackoverflow.com/questions/1767008)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:56:18.660

不存在这样的事情。[但是，我为https://github.com/fommil/zibaldone](https://github.com/fommil/zibaldone)编写了一个基本功能（并将其发布为 OSS）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T19:40:05.847

我们使用[JIDE](http://www.jidesoft.com/)，它不是开源的。如果您不介意，不妨试一试他们的[Property](http://www.jidesoft.com/products/download.htm) **Grid** - 它似乎符合您的所有要求。

![在此处输入图像描述](../Images/0a1066cbc6ec5da3cc204add453f35f8.png)

# javascript - Opera 页面重新加载

> ID：10840079
> 
> 赞同：1
> 
> 时间：2012-05-31T19:31:23.023
> 
> 标签：javascript, reload

我试图让这个页面重新加载功能在新的 Opera v12 中工作。该功能允许您单击离开页面然后返回，此时页面会重新加载干净的缓存，即新鲜的。我需要进行哪些更改才能使其适用于 Opera？

```
window.onload = function() {
  var rel = document.getElementById('forme').toBeReloaded.value; //get the current var value
  if (rel==1) {  // retrieved from the server (reloaded)
    if ($.browser.webkit || $.browser.msie) {
    window.location.reload(); //loaded from the cache
    }
    if ($.browser.mozilla) {
      buttonPlace();
      console.log('Firefox Reload: ');
    }
    if ($.browser.opera) {
      window.location.reload(true);
      console.log('Opera Reload: ');
    }
  }
  else {
    document.getElementById('forme').toBeReloaded.value = 1;
  }
} 
```

谢谢，比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:02:26.110

使用准备好的文档弄清楚了，并且：

```
$(function() {
    var rel = $('[name=toBeReloaded]');
    if(rel.val() == 1) {
      rel.val(0);
      if ($.browser.opera) {
        location.href = location.href;  // reload
      }  
      else {
        location.href = location.href;  // reload
      }      
    }
    else {
    rel.val(1);
    }
  }); 
```

账单

# ios - xcode 没有为我预填充

> ID：10840081
> 
> 赞同：1
> 
> 时间：2012-05-31T19:31:29.430
> 
> 标签：ios, xcode, compiler-construction, autocomplete, compiler-errors

我刚刚注意到 xcode 不再为我预填充。例如我想写

```
CGRectMake (self.frame.size.width, ...); 
```

Xcode 没有预填充 .frame 等等。不仅如此，如果我写它，它会给我错误并告诉我

```
object 'frame' not found on... 
```

我的意思是，这里到底发生了什么？我已经写的代码是可以的，编译没有问题。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:38:53.847

也许应该是`self.view.frame`？

# debugging - JIT 调试器的 .exe 是什么？

> ID：10840082
> 
> 赞同：0
> 
> 时间：2012-05-31T19:31:32.330
> 
> 标签：debugging, jit

JIT 调试器的可执行文件叫什么？试图在工作中提升它，但似乎无法弄清楚它的 .exe 是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:34:31.897

找到了。`vsjitdebugger.exe`是可执行文件的名称，它启动并最终启动 Visual Studio。

# mercurial - Mecurial 存储库文件丢失 - 如何重新创建并推送到原始克隆存储库？

> ID：10840083
> 
> 赞同：1
> 
> 时间：2012-05-31T19:31:36.317
> 
> 标签：mercurial, repository, hgrc

迁移后，我刚刚丢失了存储库的 .hg* 文件，并且对某些代码进行了一堆未推送的更改。

我需要初始化一个新的存储库，然后将我的更改推送到现有的远程存储库。我是否只需要初始化一个新的 repo，然后在 hgrc 中指定远程 repo 并推送？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:40:07.213

如果您还记得原始存储库中的变更集作为其工作父级（我们称之为它`A`），那么您可以这样做：

```
$ hg clone http://server/upstream newrepo
$ cd newrepo
$ hg up A 
```

然后将原始存储库的工作副本复制到新存储库（如果您重命名/删除旧存储库中的任何内容，请额外注意从新存储库中删除所有文件）。之后，从新的 repo 提交并推送：

```
$ hg commit
$ hg push 
```

如果上游仓库有任何东西`A`，在推送之前 rebase 或合并。

# ruby-on-rails - 单击日历（rails）时使用全日历创建事件

> ID：10840084
> 
> 赞同：11
> 
> 时间：2012-05-31T19:31:40.003
> 
> 标签：ruby-on-rails, fullcalendar

当用户单击日历的任何部分时，您如何创建事件？然后将其作为新事件存储在数据库中？我知道您必须使用： select: function(start, end, allDay) 来获取“开始”和“结束”时间。但是在我得到这些数据之后，我该如何将它传递给数据库呢？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T06:57:46.923

您可以使用 ajax 请求将新事件存储在数据库中。

项目主页上有一个[演示](http://arshaw.com/js/fullcalendar-1.5.3/demos/selectable.html)，可以很容易地进行改编。
通过 jQuery 例如像这样：

```
select: function(start, end, allDay) {
    var title = prompt('Event Title:');
    if (title) {
        calendar.fullCalendar('renderEvent',
            {
                title: title,
                start: start,
                end: end,
                allDay: allDay
            },
            true // make the event "stick"
        );
        /**
         * ajax call to store event in DB
         */
        jQuery.post(
            "event/new" // your url
            , { // re-use event's data
                title: title,
                start: start,
                end: end,
                allDay: allDay
            }
        );
    }
    calendar.fullCalendar('unselect');
} 
```

如果您需要对特定点击做出反应，您也可以尝试此操作，但您必须自己 grep 事件结束或持续时间。

```
dayClick: function(date, allDay, jsEvent, view) {
    var title = prompt('Event Title:');
    /**
     * again : ajax call to store event in DB
     */
    jQuery.post(
        "event/new" // your url
        , { // re-use event's data
            title: title,
            start: date
            allDay: allDay
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T13:33:47.887

在这里，我分享我所做的一切。我创建一个弹出窗口并从用户那里获取公寓号码和密码，然后通过 ajax 我通过请求自定义 insert_data.php 文件创建一个新事件这里是 fullcalendar.php 的代码

```
 selectable: true,
           selectHelper: true,
           select: function(start, end, allDay) {
                            //alert(start);
                            var title = $("#dialog").dialog();
                            //$(".popup").show();
                            //$(".title").focus();
                            var start = start; //Date.parse(start) / 1000;
                            var end = end; //Date.parse(end) / 1000;
                            var allDay = allDay;
                            //alert(allDay);

                            $("#save_frm").click(function(){

                              var pin_number = $("#pin_number").val();
                              var apartment_number =$("#apartment_number").val();

                              //alert(start);
                              //alert(end);
                              //alert(allDay);
                                $.ajax({
                                    type: "POST",
                                    url: "<?php echo WP_PLUGIN_URL; ?>/wp-fullcalendar/insert_data.php",
                                    data: { apartment_number: apartment_number, pin_number: pin_number, start: start, end: end, allDay: allDay }
                                }).done(function( msg ) {
                                    alert( "Data Saved: " + msg );
                                    $("#dialog").dialog("close");
                                    window.location.reload(true);
                                    calendar.fullCalendar('unselect');
                                    calendar.fullCalendar('refetchEvents');

                                });

                            });//select function end here

                            // calendar.fullCalendar('unselect');
                        }, 
```

//然后ajax请求转到insert_data.php下面的代码应该放在单独的文件中

```
require("../../../wp-load.php");        //connection with database
require("../../../wp-config.php");

//print_r(explode(" ",$_POST['end']));

$start = explode(" ",$_POST['start']);
//coding for extracting date
$start_date=$start[3].'-';
//$start_date.=$start[1].'-';
if($start[1]=='Jan')
{
    $start_date.='01';
}
else if($start[1]=='Feb')
{
    $start_date.='02';
}
else if($start[1]=='Mar')
{
    $start_date.='03';
}
else if($start[1]=='Apr')
{
    $start_date.='04';
}
else if($start[1]=='May')
{
    $start_date.='05';
}
else if($start[1]=='Jun')
{
    $start_date.='06';
}
else if($start[1]=='Jul')
{
    $start_date.='07';
}
else if($start[1]=='Aug')
{
    $start_date.='08';
}
else if($start[1]=='Sep')
{
    $start_date.='09';
}
else if($start[1]=='Oct')
{
   $start_date.='10';
}
else if($start[1]=='Nov')
{
   $start_date.='11';
}
else if($start[1]=='Dec')
{
    $start_date.='12';
}

$start_date.='-'.$start[2];
//coding for extracting date end here
$start_time = $start[4];

$end   = explode(" ",$_POST['end']);
$end_time = $end[4];
global $wpdb;
//$table_name = $wpdb->prefix . "em_events";
//$wpdb->insert( $table_name, array( 'album' => $_POST['album'], 'artist' => $_POST['artist'] ) );
// Create post object

$apartment_number   = $_POST['apartment_number'];
$pin_number         = $_POST['pin_number'];
$post_date          = $start_date.' ' .$start_time;

$post = array(                       'ID' => ''
                                   , 'post_author'          => '1'
                                   , 'post_date'            => ''
                                   , 'post_date_gmt'        => ''
                                   , 'post_content'         => $apartment_number
                                   , 'post_tittle'          => $apartment_number
                                   , 'post_excerpt'         => $apartment_number
                                   , 'post_status'          => 'publish'
                                   , 'comment_status'       => 'closed'
                                   , 'ping_status'          => 'closed'
                                   , 'post_password'        => $pin_number
                                   , 'post_name'            => $apartment_number
                                   , 'to_ping'              => ''
                                   , 'pinged'               => ''
                                   , 'post_modified'        => ''
                                   , 'post_modified_gmt'    => ''
                                   , 'post_content_filtered'=> '0'
                                   , 'post_parent'          => '0'
                                   , 'guid'                 => '1'
                                   , 'menu_order'           => '0'
                                   , 'post_type'            => 'event'
                                   , 'post_mime_type'       => $post_date
                                   , 'comment_count'        => '0'
        );

// Insert the post into the database
$post_id=wp_insert_post( $post, $wp_error );

if($wpdb->insert( 'wp_em_events', array( 
                                     'post_id'              => $post_id
                                   , 'event_slug'           => $_POST['apartment_number']
                                   , 'event_owner'          => 1
                                   , 'event_status'         => 1
                                   , 'event_name'           => $_POST['apartment_number']
                                   , 'event_start_time'     => $start_time
                                   , 'event_end_time'       => $end_time
                                   , 'event_all_day'        => 0
                                   , 'event_start_date'     => $start_date
                                   , 'event_end_date'       => $start_date
                                   , 'post_content'         => $_POST['apartment_number']
                                   , 'event_rsvp'           => 0
                                   , 'event_rsvp_date'      => $end_date
                                   , 'event_rsvp_time'      => '00:00:00'
                                   , 'event_spaces'         => 0
                                   , 'event_private'        => 0
                                   , 'location_id'          => 0
                                   //, 'recurrence_id'        => 1223
                                   , 'event_category_id'    => 1
                                   , 'event_attributes'     => 'a:0:{}'
                                   , 'event_date_created'   => $start_date." ".$start_time
                                   , 'event_date_modified'  => $start_date." ".$start_time
                                   , 'recurrence'           => 0
                                   //, 'recurrence_interval'  => 12
                                   //, 'recurrence_freq'      => 12
                                   //, 'recurrence_byday'     => 1231
                                   //, 'recurrence_byweekno'  => 4564
                                   , 'recurrence_days'      => 0
                                   //, 'blog_id'              => 456465
                                   , 'group_id'             => 0
    ) )){

    echo "query execute";
    }else{
        echo "query not execute";
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-21T06:17:08.827

从那以后，选择回调发生了变化。为了`FullCalender v5`使用这个...

```
document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');

  var calendar = new FullCalendar.Calendar(calendarEl, {
    selectable: true,
    headerToolbar: {
      left: 'prev,next today',
      center: 'title',
      right: 'dayGridMonth,timeGridWeek,timeGridDay'
    },
    dateClick: function(info) {
      alert('clicked ' + info.dateStr);
    },
    select: function(info) {
      alert('selected ' + info.startStr + ' to ' + info.endStr);
    }
  });

  calendar.render();
}); 
```

来源：[https ://fullcalendar.io/docs/select-callback](https://fullcalendar.io/docs/select-callback)

# php - Laravel：laravel Blade 文件中的权限被拒绝

> ID：10840088
> 
> 赞同：12
> 
> 时间：2012-05-31T19:31:43.313
> 
> 标签：php, installation, permission-denied, laravel

尝试安装 Laravel [http://laravel.com时遇到以下问题](http://laravel.com)

任何帮助将不胜感激。

> 未处理的异常
> 
> 信息：
> 
> file_put_contents（/Users/alvincrespo/Sites/apollo/storage/views/26bdebca7505781c753aa21663170a1b）[function.file-put-contents]：无法打开流：权限被拒绝位置：
> 
> /Users/alvincrespo/Sites/apollo/laravel/blade.php 第 63 行堆栈跟踪：
> 
> #0 /Users/alvincrespo/Sites/apollo/laravel/laravel.php(40): Laravel\Error::native(2, 'file_put_conten...', '/Users/alvincre...', 63) #1 [内部函数]: Laravel{closure}(2, 'file_put_conten...', '/Users/alvincre...', 63, Array) #2 /Users/alvincrespo/Sites/apollo/laravel/blade.php( 63): file_put_contents('/Users/alvincre...', '...') #3 [内部函数]: Laravel{closure}(Object(Laravel\View)) #4 /Users/alvincrespo/Sites/apollo /laravel/event.php(199): call_user_func_array(Object(Closure), Array) #5 /Users/alvincrespo/Sites/apollo/laravel/event.php(138): Laravel\Event::fire('laravel.view .en...', Array, true) #6 /Users/alvincrespo/Sites/apollo/laravel/view.php(325): Laravel\Event::until('laravel.view.en...',数组）#7 /Users/alvincrespo/Sites/apollo/laravel/view.php(546): Laravel\View->render() #8 /Users/alvincrespo/Sites/apollo/laravel/response.php(246): Laravel\View->__toString() #9 /Users/alvincrespo/Sites/apollo/laravel/laravel.php(138): Laravel\Response->render() #10 /Users/alvincrespo/Sites/apollo/public/index .php(34): require('/Users/alvincre...') #11 {main}

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T19:37:42.443

我会检查以下权限：

```
/Users/alvincrespo/Sites/apollo/storage/views/26bdebca7505781c753aa21663170a1b 
```

允许您的应用程序写入此目录。

假设你在一个 linux 机器上，你可以运行 ls -l 来查看权限是什么，如果它设置为只读，则使用 chmod 更改权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T11:32:32.687

正如您在 install 下的非常好的文档中看到的那样，您必须使目录 storage/views 可写。

[http://laravel.com/docs/install#installation](http://laravel.com/docs/install#installation)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-07T22:15:20.170

虽然这是一个老问题，但我希望这可能对某人有所帮助，这就是为我解决问题的方法。

```
sudo chmod -R 754 storage/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T06:09:21.040

检查 laravel 安装中 /storage 目录的权限。视图目录必须对它的网络服务器具有写权限。

# c++ - c++中的纯比较函数

> ID：10840091
> 
> 赞同：1
> 
> 时间：2012-05-31T19:31:53.673
> 
> 标签：c++

我想创建一个通用的排序链表。因此，我有一个抽象类 Data，它带有一个纯 operator<（为了方便地对列表进行排序。我相信它被称为比较器。）现在我有一个类 Job，它派生自 Data 并实现了运算符。当我尝试创建工作列表并发现该工作也是抽象的时，问题就出现了。发生这种情况是因为我在 Job 中编写的运算符与 Data 中的签名不完全相同 - 在 data 中：

```
virtual bool operator<(const Data& other) const =0; 
```

在工作中：

```
virtual bool operator<(const Job& other) const; 
```

因为我无法将工作与通用数据进行比较，所以我不得不接受工作操作员的工作。但是现在新的操作符只是隐藏了旧的操作符而不是覆盖它（或者因为它是纯粹的而实现它）。如何在不使用向下转换的情况下解决问题？谢谢！编辑：并且没有模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:34:54.740

不使用向下转换......似乎是模板的工作。

您可以直接使用运算符强制执行比较函数，而不必将其声明为 pure `virtual`。而且它也是通用的。

同样的结果，不同的方法。更大的灵活性，因为您不必从某些东西派生（如果您开始使用多重继承，这*可能*会变得很痛苦）。

```
template<typename T>
class SortedLinkedList
{
    T* head;
    void insertItem(const T& item)
    {
       T* currentNode = head;
       //iterate
       {
          if ( *currentNode < item ) // force implementation of operator <
          { /* whatever */ }
       }
    }
}; 
```

# java - Java中的XPATH：缺少父节点

> ID：10840094
> 
> 赞同：0
> 
> 时间：2012-05-31T19:31:58.773
> 
> 标签：java, xpath

我有以下 XML 结构：

```
<map name="testmap">
    <definitions>
        <tile name="ground"> <!-- a normal tile that has no special obstacles -->
            <centralObstacle>ground</centralObstacle>
            <neighbourObstacles>
                <north></north>
                <east></east>
                <south></south>
                <west></west>
            </neighbourObstacles>
        </tile>
        <tile name="wallE"> <!-- a ground tile with a wall obstacle at the east-->
            <centralObstacle>ground</centralObstacle>
            <neighbourObstacles>
                <north></north>
                <east>wall</east>
                <south></south>
                <west></west>
            </neighbourObstacles>
        </tile>
    </definitions>
</map> 
```

我想用 XPATH 查询它。我想做的是获取所有瓦片节点，然后遍历它们以获取它们的所有名称和其他相关信息（使用不同的 XPATH 查询）。

因为要在 Document 上运行 XPATH 表达式，所以我使用了[此](https://stackoverflow.com/questions/5786936/create-xml-document-using-nodelist)`nodeListToDoc()`答案中提供的以下函数，将 XPATH 查询（NodeList）的结果转换为 Document。这样我可以首先获取所有的 Tile，然后遍历它们以获取 Tile 的特定信息。

```
private Document nodeListToDoc(NodeList nodes) throws ParserConfigurationException  
{
    Document newXmlDocument = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
    Element root = newXmlDocument.createElement("root");
    newXmlDocument.appendChild(root);
    for (int i = 0; i < nodes.getLength(); i++) {
        Node node = nodes.item(i);
        Node copyNode = newXmlDocument.importNode(node, true);
        root.appendChild(copyNode);
    }
    return newXmlDocument;      
} 
```

我首先要做的是将文件解析为 Document，然后运行查询以获取包含我所有 Tiles 的 NodeList。当我运行查询时，`//definitions/tile`我得到一个包含两个节点项的 NodeList（我已经验证了这一点），这是正确的。申请的结果是`nodeListToDoc()`这样的。

```
 <?xml version="1.0" encoding="UTF-16"?>
<root><tile name="ground"> <!-- a normal tile that has no special obstacles -->
            <centralObstacle>ground</centralObstacle>
            <neighbourObstacles>
                <north/>
                <east/>
                <south/>
                <west/>
            </neighbourObstacles>
        </tile><tile name="wallE"> <!-- a ground tile with a wall obstacle at the east-->
            <centralObstacle>ground</centralObstacle>
            <neighbourObstacles>
                <north/>
                <east>wall</east>
                <south/>
                <west/>
            </neighbourObstacles>
        </tile></root> 
```

到目前为止，一切都很好。现在事情变糟了。我想遍历这两个节点，制作它们的 NodeList，将该 NodeList 转换为 Document，然后对它们运行一些查询。其中一个查询是获取每个图块的名称。我认为以下代码可以解决问题：

```
 for (int i = 0; i < nodes.getLength(); i++) { // iterate over the two nodes
            NodeList tile = (NodeList) nodes.item(i); // create a nodelist containing only the first node
            Document attrdoc = nodeListToDoc(tile); // convert it to a document
} 
```

但是，当我打印 attrdoc 表示的结果树时，对于第一次迭代，我得到以下结果：

```
<?xml version="1.0" encoding="UTF-16"?>
<root> <!-- a normal tile that has no special obstacles -->
            <centralObstacle>ground</centralObstacle>
            <neighbourObstacles>
                <north/>
                <east/>
                <south/>
                <west/>
            </neighbourObstacles>
        </root> 
```

这是不正确的。根元素的子元素应该是tile？这个元素去哪了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:54:32.940

您并没有真正解释您要实现的目标，但您的描述确实让我想知道 Java+XPath 是否适合这项工作。您是否考虑过在 XQuery 或 XSLT 中这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:28:34.203

+1 @Andy 的评论。当我阅读您的问题时，在我看来您并不是真的想制作一个新文件。相反，您只是将它用作从现有 XML 中提取信息的一种方式。

因此，您的方法是直接从节点访问信息。例如，在您遍历两个节点的段落中，您可以执行以下操作：

```
for (int i = 0; i < nodes.getLength(); i++) { // iterate over the two nodes
    NodeList node = nodes.item(i);
    if (node.getNodeType() == ELEMENT_NODE) {
        Element element = (Element) node;
        //from here, you can access element.getNodeValue(), element.getChildNodes(), etc.
    }    
} 
```

此外，您可以返回`newXmlDocument`并对其应用多个 XPath 查询。这不是一劳永逸的，就像您使用 SAX 解析器时那样。

# javascript - Google Charts 适用于 IE7，但不适用于 IE8 或 IE9

> ID：10840100
> 
> 赞同：2
> 
> 时间：2012-05-31T19:32:04.450
> 
> 标签：javascript, internet-explorer, internet-explorer-9, google-visualization

谷歌图表有问题。它适用于除 IE8 和 9 以外的所有浏览器。如果我切换到 IE 7 甚至是 quirks 模式，它就可以工作。这是我的 javascript

```
// Load the Visualization API and the piechart package.
google.load('visualization', '1.0', {
    'packages': ['ColumnChart']
    });

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);

// Callback that creates and populates a data table,
// instantiates the pie chart, passes in the data and
// draws it.
function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Date');
    data.addColumn('number', 'Affiliate Fees');
    data.addRows([['Sep 05, 2011 - Sep 11, 2011', 224.95], ['Dec 26, 2011 - Jan 01, 2012', 112.69], ['Apr 23, 2012 - Apr 29, 2012', 202.5], ['May 21, 2012 - May 27, 2012', 69.21], ['May 28, 2012 - Jun 03, 2012', 4.05]]);
    var options = {
        'title': '',
        'width': 1150,
        'height': 300,
        'colors': ['#E50278'],
        'fill': 50,
        'wmode': 'opaque'
    };
    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
    chart.draw(data, options);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:14:58.663

您应该使用新的软件包。

替换`'packages': ['ColumnChart']`为 `packages:["corechart"]`。

# git - 在 git 中删除一堆重复的提交和引用

> ID：10840102
> 
> 赞同：1
> 
> 时间：2012-05-31T19:32:29.187
> 
> 标签：git, history, rebase

我有以下情况：

```
A---B--- ... ---E---------------------------.
                                             \
                  A---B--- ... ---E---F---G---H---I--- ... ---N   master 
```

我想从历史记录中删除重复的提交并删除这个错误的引用。

```
A---B--- ... ---E---F---G---H---I--- ... ---N   master 
```

我已经尝试过`git rebase -i`并删除了重复的提交，但这再次重复了提交并导致了很多合并冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:35:55.310

你可以试试：

```
git checkout -b 临时 E
git cherry-pick F..N
git 分支 -D 主
git 分支 -m 临时主控

```

如果你不明白你在做什么，我建议你阅读所有相关命令的手册页。git 手册页非常好用且易于访问。

# php - Twig - 将变量假定为对象方法

> ID：10840104
> 
> 赞同：0
> 
> 时间：2012-05-31T19:32:57.760
> 
> 标签：php, zend-framework, twig

这是一个奇怪的问题。我正在尝试在 Twig 和一些 ViewModel 对象之间实现 1:1 的关系，以便 Twig 知道它的上下文并假设变量是对象上的方法。

例如，我有一个 Twig 模板和一个 ViewModel_Product。我*可以*这样做...

```
$template->render(array('product', $product)); 
```

...在模板中...

```
<p>{{ product.name }}</p> 
```

然而，因为唯一会传递给模板的是模型，所以让用户为每个变量添加前缀似乎毫无意义。更好的用法是：

```
$template->render(array('viewModel', $product)); 
```

...和...

```
<p>{{ name }}</p> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:29:45.910

我不相信这是可能的，因为 twig 会跟踪每个模板中的其他全局变量，那么它如何知道变量 {{ name }} 是您的视图的一部分还是其他一些全局变量？正如上面提到的，拥有变量前缀有助于为您的视图命名，从而更容易阅读。

不要做一个懒惰的程序员。

# javascript - JQuery 动画中的 setTimeout

> ID：10840106
> 
> 赞同：2
> 
> 时间：2012-05-31T19:33:11.850
> 
> 标签：javascript, jquery, timer, jquery-animate, settimeout

我遇到了 setTimeout() 的问题。我希望在鼠标悬停状态下，子菜单在间隔（500 毫秒）后向上滑动。但是 setTimeout() 不起作用。

就像在这个链接中：http: [//jsfiddle.net/felipepalazzo/Xyhvn/2/](http://jsfiddle.net/felipepalazzo/Xyhvn/2/)

编码：

```
(function($){
    $.fn.showMenu = function(options){

        var settings = $.extend({
            height  : '40px',
            speed   : '500',
            heightx : '20px'              
        }, options || {});

        return this.each(function(){
           var elem = $(this);
           var menu_timer;
            elem.hover(function(){
                $(this).stop().animate({'height' : settings.height}, settings.speed);
                    }, function(){
                      //setTimeout(function(){  
                      $(this).stop().animate({'height' : settings.heightx}, settings.speed);
                            //},500);
                    }); 
        });      
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T19:35:00.140

这超出了范围。

```
var that = this;
setTimeout(function(){
    $(that).stop().animate({'height' : settings.heightx}, settings.speed);
},500); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T19:36:36.733

利用`delay()`

所以例如

```
$(this).delay(500).stop().animate({'height' : settings.heightx}, settings.speed); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:37:08.170

我认为问题取决于元素`$(this)`，当你在 setTimeout 的函数内部时，元素`this`就不一样了。为什么不尝试将元素保存在 var 中然后执行函数

```
var foo = this;
setTimeout(function(){
    $(foo).stop().animate({'height' : settings.heightx}, settings.speed);
},500); 
```

# wix - 访问 MSI 错误表

> ID：10840110
> 
> 赞同：0
> 
> 时间：2012-05-31T19:33:17.347
> 
> 标签：wix

如何从自定义操作 DLL 访问 MSI 错误表，以便可以将自定义消息添加到错误表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:07:36.220

您可以使用[MsiCreateRecord](http://msdn.microsoft.com/en-us/library/aa370072%28VS.85%29.aspx)。第一个记录字段必须包含错误表中的错误 ID。

```
UINT __stdcall ShowErrorMessage(MSIHANDLE hInstall)
{
  //Load the error and format it    
  PMSIHANDLE hError = MsiCreateRecord(2);
  MsiRecordSetInteger(hError, 1, <error_id>);
  MsiRecordSetString(hError, 2, <parameter_to_format>);

  //Display the message
  MsiProcessMessage(hInstall,INSTALLMESSAGE_ERROR,hError);
  return ERROR_SUCCESS; 
} 
```

# spring - 如何从 CXF 端点调用 Spring Integration 应用程序

> ID：10840114
> 
> 赞同：3
> 
> 时间：2012-05-31T19:33:33.937
> 
> 标签：spring, cxf, spring-integration

我正在使用 Apache CXF Web 服务和 Spring Integration，我现在不知道如何从您的 CXF 端点调用 Spring Integration 应用程序。

我有使用 Apache Camel 的经验，并且很容易解决这个问题......但在 Spring Integration 中我不知道......

我的行代码是：

1.  在 webservices-definition-beans.xml 中：

    ```
    <!-- Load CXF modules from cxf.jar -->
    <import resource="classpath:META-INF/cxf/cxf.xml"/>
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml"/>
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml"/>

    <!--Exposing the HelloWorld service as a SOAP service -->
    <bean id="jaxbBean"
          class="org.apache.cxf.jaxb.JAXBDataBinding"
          scope="prototype"/>

    <bean id="jaxws-and-aegis-service-factory"
          class="org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean"
          scope="prototype">
        <property name="dataBinding" ref="jaxbBean"/>
        <property name="serviceConfigurations">
        <list>
            <bean class="org.apache.cxf.jaxws.support.JaxWsServiceConfiguration"/>
            <bean class="org.apache.cxf.aegis.databinding.AegisServiceConfiguration"/>
            <bean class="org.apache.cxf.service.factory.DefaultServiceConfiguration"/>
        </list>
    </property>
    </bean>

    <jaxws:endpoint id="helloWorld"
                serviceName="HelloWorldService"
                implementorClass="com.datys.cxf.HelloWorldService"
                address="/HelloWorld">
        <jaxws:serviceFactory>
            <ref bean="jaxws-and-aegis-service-factory"/>
        </jaxws:serviceFactory>
    </jaxws:endpoint> 
    ```

2.  在 service-definition-beans.xml 中：

    ```
    <gateway id="HelloWorldService" 
             default-request-channel="requestStrings"
             default-reply-channel="replyStrings"             
             service-interface="com.datys.cxf.HelloWorldService">
        <method name="sayHello"/>
    </gateway>

    <channel id="requestStrings"/>
    <channel id="replyStrings"/> 

    <!--<channel id="filesOut"/>-->
    <service-activator input-channel="requestStrings"
                       output-channel="filesOut"
                       ref="handler" method="handleString"/>

    <file:outbound-channel-adapter id="filesOut" 
                                   directory="file:D:/OUTPUT"/>

    <beans:bean id="handler" class="org.springframework.integration.samples.filecopy.Handler"/> 
    ```

但是，当我使用 client-webservices 部署和调用 Web 服务时，会返回此错误：

```
Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: Could not instantiate service     class com.datys.cxf.HelloWorldService because it is an interface.
at com.sun.xml.internal.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:171)
at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:94)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:240)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:210)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:103)
at $Proxy29.sayHello(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:04:00.523

可能最简单的选项是配置 <gateway>。这允许您提供可以注入端点并调用它来启动消息流的任何接口。在幕后，该接口的实现方式与 Spring 中的其他“ProxyFactoryBean”实现方式相同（例如，通过 RMI、HttpInvoker 等进行远程处理）。

这是参考手册中的相关部分：http: [//static.springsource.org/spring-integration/docs/2.1.x/reference/htmlsingle/#gateway-proxy](http://static.springsource.org/spring-integration/docs/2.1.x/reference/htmlsingle/#gateway-proxy)

# python - 使用 sqlite3 db 缺少表的单元测试 django 项目

> ID：10840115
> 
> 赞同：2
> 
> 时间：2012-05-31T19:33:34.550
> 
> 标签：python, django, unit-testing, sqlite

[使用 Sqlite3 运行 Django Unittest 时缺少表](https://stackoverflow.com/questions/7336130/missing-table-when-running-django-unittest-with-sqlite3)

我已经看过这篇文章，并正在尝试设置我的项目进行测试。每当我尝试运行任何数据库命令时，都会出现错误。我遇到的问题是，当我尝试执行 manage.py syncdb 时，我收到一个数据库错误，提示不存在这样的表，即使它当前位于模型文件和生产数据库中。

这是追溯。

```
brandon@Brandon-PC:~/course-management$ ./manage.py test Testing.SimpleTest
Traceback (most recent call last):
  File "./manage.py", line 11, in <module>
    execute_manager(settings)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/South-0.7.3-py2.7.egg/south/management/commands/test.py", line 8, in handle
    super(Command, self).handle(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/core/management/commands/test.py", line 37, in handle
    failures = test_runner.run_tests(test_labels)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/test/simple.py", line 358, in run_tests
    suite = self.build_suite(test_labels, extra_tests)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/test/simple.py", line 245, in build_suite
    suite.addTest(build_test(label))
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/test/simple.py", line 107, in build_test
    app_module = get_app(parts[0])
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/loading.py", line 129, in get_app
    self._populate()
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/loading.py", line 61, in _populate
    self.load_app(app_name, True)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/loading.py", line 78, in load_app
    models = import_module('.models', app_name)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/brandon/course-management/Course/models.py", line 223, in <module>
    class CourseDelivery(models.Model):
  File "/home/brandon/course-management/Course/models.py", line 262, in CourseDelivery
    Language = models.ForeignKey('Utilities.Language', default=Language.objects.get(Code='en'))
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/manager.py", line 132, in get
    return self.get_query_set().get(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/query.py", line 344, in get
    num = len(clone)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/query.py", line 82, in __len__
    self._result_cache = list(self.iterator())
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/query.py", line 273, in iterator
    for row in compiler.results_iter():
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/sql/compiler.py", line 680, in results_iter
    for rows in self.execute_sql(MULTI):
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/models/sql/compiler.py", line 735, in execute_sql
    cursor.execute(sql, params)
  File "/usr/local/lib/python2.7/dist-packages/Django-1.3.1-py2.7.egg/django/db/backends/sqlite3/base.py", line 234, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.DatabaseError: no such table: Utilities_language 
```

这是在我的 settings.py 文件中

```
if 'test' in sys.argv or 'jenkins' in sys.argv:
DATABASES = {
             'default': {
                         'ENGINE': 'django.db.backends.sqlite3',
                         'NAME': 'test_ndptc'
                         }
             } 
```

如果我将上述 if 语句设置为 true 并尝试运行 manage.py syncdb，也会发生同样的错误。

这是导致问题的模型。

```
class CourseDelivery(models.Model):
"""
"""
Course = models.ForeignKey(Course)
TrainingMethod = models.ForeignKey(TrainingMethod)
DeliveryType = models.ForeignKey(DeliveryType)
Location = models.ForeignKey(Address, null=True)
Lat = models.FloatField()
Lon = models.FloatField()
StartDate = models.DateTimeField()
EndDate = models.DateTimeField()
FinishDate = models.DateField(null=True)
ConfirmationCode = models.CharField(max_length=8, editable=False, unique=True)
Reported = models.BooleanField()
ReportedDate = models.DateField(null=True)
SequenceNumber = models.IntegerField(null=True)
Status = models.IntegerField()
HostingAgency = models.TextField(null=True, blank=True)
MaximumEnrollment = models.IntegerField(null=True, blank=True)
ContactInformation = models.TextField(null=True, blank=True)
ArrivalTime = models.TextField(null=True, blank=True)
CourseMaterials = models.TextField(null=True, blank=True)
Internet = models.TextField(null=True, blank=True)
Food = models.TextField(null=True, blank=True)
Parking = models.TextField(null=True, blank=True)
Requirements = models.TextField(null=True, blank=True)
AdditionalInformation = models.TextField(null=True, blank=True)
ReadingMaterials = models.TextField(null=True, blank=True)
SpecialNote = models.TextField(null=True, blank=True)
CertificateEmailsSent = models.BooleanField(default=False)
RegistrationCloseDate = models.DateTimeField(null=True, blank=True)
ReminderDate = models.DateTimeField(null=True, blank=True)
PreTestCloseDate = models.DateTimeField(null=True, blank=True)
PostTestCloseDate = models.DateTimeField(null=True, blank=True)
EvaluationCloseDate = models.DateTimeField(null=True, blank=True)
ParticipantGuide = models.ForeignKey('Course.Document', null=True, blank=True)
Flyer = models.FileField(upload_to='flyers/%Y/%m', null=True, blank=True)
UpdateUser = models.ForeignKey(User, null=True)
UpdateDate = models.DateField(null=True)
Language = models.ForeignKey('Utilities.Language', default=Language.objects.get(Code='en'))

def save(self):
    # If this is the first time around, or AUTO_COMPUTE_DATES is true, compute the dates.
    if self.Status & CourseDeliveryStatus.AUTO_COMPUTE_DATES:
        self.RegistrationCloseDate   = self.StartDate - datetime.timedelta(days=REGISTRATION_CLOSE_DATE)
        self.ReminderDate            = self.StartDate - datetime.timedelta(days=REMINDER_DATE)
        self.PreTestCloseDate        = self.StartDate - datetime.timedelta(days=PRE_TEST_CLOSE_DATE)
        self.PostTestCloseDate       = self.EndDate   + datetime.timedelta(days=POST_TEST_CLOSE_DATE)
        self.EvaluationCloseDate     = self.EndDate   + datetime.timedelta(days=EVALUATION_CLOSE_DATE)
        self.FinishDate              = self.EndDate   + datetime.timedelta(days=FINISH_DATE)
    elif self.id == None:
        if not self.RegistrationCloseDate:
            self.RegistrationCloseDate   = self.StartDate - datetime.timedelta(days=REGISTRATION_CLOSE_DATE)
        if not self.ReminderDate:
            self.ReminderDate            = self.StartDate - datetime.timedelta(days=REMINDER_DATE)
        if not self.PreTestCloseDate:
            self.PreTestCloseDate        = self.StartDate - datetime.timedelta(days=PRE_TEST_CLOSE_DATE)
        if not self.PostTestCloseDate:
            self.PostTestCloseDate       = self.EndDate   + datetime.timedelta(days=POST_TEST_CLOSE_DATE)
        if not self.EvaluationCloseDate:
            self.EvaluationCloseDate     = self.EndDate   + datetime.timedelta(days=EVALUATION_CLOSE_DATE)
        if not self.FinishDate:
            self.FinishDate              = self.EndDate   + datetime.timedelta(days=FINISH_DATE)

    # If the course does not have a code, create one.
    if not self.ConfirmationCode:
        self.ConfirmationCode = ''.join(Random().sample(string.digits, 5))
    #Course.functions.geocode_course_delivery(self)
    super(CourseDelivery, self).save()

def __unicode__(self):
    return unicode(self.StartDate.strftime('%m/%d/%Y')) + ' - ' + self.Course.CourseName \
        + ' (' + unicode(self.Location.City) + ', ' + unicode(self.Location.State) + ')'

def registration_date_passed(self):
    today = datetime.date.today()
    if today > self.RegistrationCloseDate.date():
        return True
    return False

def registration_open(self):
    # Do not allow registrations after the course has been reported.
    if self.Reported:
        return False

    # Check that the closing dates and enrollment are good.
    today = datetime.date.today()
    if self.Status & CourseDeliveryStatus.ONLINE_REGISTRATION:
        if self.RegistrationCloseDate.date() < today:
            return False

        # Make sure that the MaximumEnrollment is greater than the participant count
        if not self.wait_list_enabled() and self.MaximumEnrollment:
            participant_count = Participant.objects.filter(CourseDelivery=self).count()
            if not self.MaximumEnrollment - participant_count > 0:
                return False
        return True
    return False

def wait_list_enabled(self):
    if self.Status & CourseDeliveryStatus.WAIT_LIST:
        return True
    return False

def get_form(self, form_type):
    package = CourseDeliveryForms.objects.filter(CourseDelivery=self.id).get(FormType=form_type).FormPackage
    __import__(package.FormModule)
    return eval(package.FormName)

def get_model(self, form_type):
    package = CourseDeliveryForms.objects.filter(CourseDelivery=self.id).get(FormType=form_type).FormPackage
    __import__(package.ModelModule)
    return eval(package.ModelName)

def get_template(self, form_type):
    package = CourseDeliveryForms.objects.filter(CourseDelivery=self.id).get(FormType=form_type).FormPackage
    return package.Template

def default_language(self):
    return Language.objects.get(Code='en') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:22:05.280

我也有这个问题。原来我必须在 settings.py 文件中添加一个 TEST_NAME 属性才能正确识别测试数据库。它为我解决了这个问题：

```
if 'test' in sys.argv:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3',
            'NAME': os.path.join(os.path.dirname(__file__), 'test.db'),
            'TEST_NAME': os.path.join(os.path.dirname(__file__), 'test.db'),
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-04T12:20:07.807

我建议始终使用 ":memory:" 作为带有单元测试的 db NAME。我曾经错误地指定了一个实际的数据库路径，我的单元测试需要 45 分钟才能运行。当我指定“:memory:”时，它们不到一分钟就跑完了。

```
if 'test' in sys.argv:
    DATABASES = {
        'default':{
            'ENGINE': 'django.db.backends.sqlite3',
            'NAME': ':memory:',
            'TEST_NAME': ':memory:',
        },
    } 
```

# regex - 在这种情况下如何提取文件名？

> ID：10840116
> 
> 赞同：0
> 
> 时间：2012-05-31T19:33:35.710
> 
> 标签：regex, perl, text-extraction

我的输入字符串如下所示：

```
1    warning: rg: W, MULT: file 'filename_a.h' was listed twice.
2    warning: rg: W, SCOP: scope redefined in '/proj/test/site_a/filename_b.c'.
3    warning: rg: W, ATTC: file /proj/test/site_b/filename_c.v is not resolved.
4    warning: rg: W, MULTH: property file filename_d.vu was listed outside. 
```

如上所述，它们有四种不同的口味。我逐行从日志文件中读取这些内容。

对于指定路径的那个（第 2,3 行），我可以使用提取文件名`$file=~s#.*/##;`并且似乎工作正常。有没有办法不对不同类型使用条件语句并提取文件名？我只想使用一个干净的正则表达式并提取文件名。Perl`File::basename`在这种情况下也不起作用。

我正在使用 Perl。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:43:24.767

您可以分两步完成：

*   从每一行中提取路径
*   从路径中获取基本名称

### [例子](http://ideone.com/C7evl)

```
#!/usr/bin/perl -n
use feature 'say';
use File::Basename;

#NOTE: assume that unquoted path has no spaces in it 
say basename($1.$2) if /(?:file|redefined in)\s+(?:'([^']+)'|(\S+))/; 
```

### 输出

```
filename_a.h
filename_b.c
filename_c.v
filename_d.vu 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T20:14:07.950

你的问题需要更多的约束。例如，将字符串表征为“路径”（或“文件名”）的好方法是什么？你可能会说，“嘿，当我看到一个点后面紧跟着字母和数字（但不是符号），而且那个点之前还有一堆字符，那么它可能是一个路径或文件名！”

```
\s+([^\s]+\.\w+) 
```

但这并不能捕获所有路径，也不能捕获没有扩展名的文件。因此，我们可能会选择另一种说法，“要么是上面的，要么是一个至少有一个斜线的字符串”。

```
\s+([^\s]+\.\w+|[^\s]*\/[^\s]*) 
```

（请注意，您可能不需要在上面的示例中转义斜杠，因为您似乎正在使用`#`它作为分隔符。）

无论如何，我要说的是，您需要更严格地指定您的问题，这将自动为您带来令人满意的解决方案。当然，单独使用正则表达式没有真正“正确”的解决方案：您需要进行文件测试才能做到这一点。

为了进一步了解这个例子，也许你想定义一个扩展列表：

```
\s+([^\s]+\.(?:c|h|cc|cpp)|[^\s]*\/[^\s]*) 
```

或者，也许您想要更通用，但只允许最多 4 个字符的扩展：

```
\s+([^\s]+\.\w{1,4}|[^\s]*\/[^\s]*) 
```

也许你只认为某事以斜线开头是一条路径，但你仍然希望在其中的某处至少有另一个斜线：

```
\s+([^\s]+\.\w{1,4}|/[^\s]*\/[^\s]*) 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:29:53.307

/\w*.\w*/ 这将匹配四个不同警告日志中表示的文件名。\w 将匹配任何单词字符（字母、数字和下划线），因此此正则表达式查找任意数量的单词字符，后跟一个点，然后是更多单词字符。这是有效的，因为日志中唯一的其他点位于日志的末尾。

# android - 将大量数据加载到数据库 - Android

> ID：10840117
> 
> 赞同：1
> 
> 时间：2012-05-31T19:33:36.423
> 
> 标签：android, sqlite, large-data

我正在为 Android 平台构建一个新应用程序，我需要一个建议。我有大量数据要导入到 sqlite 数据库中，比如 2000 行。我的问题是将数据加载到数据库中的最佳方法是什么？

我想到的两种方式：

1.  一个 xml 文件，其中包含所有数据，然后使用 DocumentBuilder 对象加载它。
2.  一个 CSV 文件，并使用 String Tokenizer 加载它。找到那个[帖子](https://stackoverflow.com/questions/6465696/inserting-large-amount-of-data-into-android-sqlite-database)。

我希望它与外部文件一起使用，因为当我发布更新时，我将只替换该文件。

我想要一些尽可能高效的东西——所有数据都将在应用程序的第一次启动时加载，我需要它快速。

任何建议都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:49:51.403

这真的没关系 - 您可以通过这两种方法获得良好的性能。使用 XML，您可以使用一些数据绑定，使编程更容易（稍微）。您也可以将 JSON 视为传输格式。

解析时，请记住在内存中构建完整的对象树（如 XML DOM 解析器）会消耗大量内存并导致大量分配 - 像 XPP / GSON 这样的拉式解析模型更可取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T19:50:12.343

使用[InsertHelper](http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html)进行批量插入。看看[这个其他问题](https://stackoverflow.com/questions/3860008/bulk-insertion-on-android-device)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T19:38:24.340

您可以直接使用您在计算机中准备的外部 sqlite DB，而不是 XML 或 CSV 文件。这种技术在这里解释：[http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

# c# - c# - 获取本地 Dropbox 同步状态

> ID：10840118
> 
> 赞同：2
> 
> 时间：2012-05-31T19:33:38.693
> 
> 标签：c#, synchronization, local, dropbox, status

我想知道在 c# 中获取有关本地保管箱实例的同步状态信息的最佳方法是什么。不幸的是，我在注册表或任何日志文件中找不到任何信息。欢迎提出建议或摘录。四种状态就足够了：已同步、正在同步、已暂停、错误。

兄弟，马蒂亚斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:39:30.950

我已经制作了一个旧 Python 脚本的 Delphi 端口。它使用带有命名管道的 Win32 API 来查询 Dropbox 应用程序的文件状态。您应该能够毫不费力地将其移植到 C#：

[https://bitbucket.org/h4ndy/dropboxdelphi/src](https://bitbucket.org/h4ndy/dropboxdelphi/src)

您从中得到以下状态：“管道错误”、“Dropbox 未运行”、“不在 Dropbox 中”、“最新”、“同步进行中”、“同步问题”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:07:24.723

不是一个直接的答案，但你检查过 DropBox wiki 的插件页面吗？ [http://dropboxwiki.com/Dropbox_Addons](http://dropboxwiki.com/Dropbox_Addons) 这让我得到了关于 Linux 系统的相同信息，所以希望也能帮助你。

# mysql - 在 MySQL 中计算跨年的运行或连续运行

> ID：10840119
> 
> 赞同：0
> 
> 时间：2012-05-31T19:33:38.757
> 
> 标签：mysql

我正在尝试计算 MySQL 数据库中的连胜记录。我创建了下表来存储赢/输数据：

```
"year"  "team_id"   "week"  "result"
"2007"  "1"         "1"     "W"
"2007"  "1"         "2"     "L"
"2007"  "1"         "3"     "W"
"2007"  "1"         "4"     "W"
"2007"  "1"         "5"     "W"
"2007"  "1"         "6"     "W"
"2007"  "1"         "7"     "W"
"2007"  "1"         "8"     "W"
"2007"  "1"         "9"     "W"
"2007"  "1"         "10"    "L"
. . . 
```

该数据跨越 12 个团队的 4 年，每年 13-16 周。

要计算连胜数，我使用以下查询：

```
SELECT
    team_id,
    result,
    year,
    MIN(week) as StartDate, 
    MAX(week) as EndDate, 
    COUNT(*) as Games
FROM (
    SELECT
        year,
        week,
        team_id,
        result,
        (   SELECT
                COUNT(*) 
            FROM
                win_loss_temp wl2 
            WHERE
                wl1.team_id = wl2.team_id
                and wl2.result <> wl1.result
                and wl2.year <= wl1.year
                AND wl2.week <= wl1.week) as rungroup
    FROM
        win_loss_temp wl1) A
WHERE result = 'W'
GROUP BY year, team_id, result, rungroup
ORDER BY Games desc
LIMIT 15; 
```

这给出了以下结果：

```
team_id    result    year    StartDate    EndDate    Games
----------------------------------------------------------
5          W         2007    1            12         12
1          W         2007    3            9          7
5          W         2008    2            7          6
. . . 
```

这是正确/预期的输出......在一个给定的年份内。

我的问题跨越多年。假设一支球队在 2007 年以 3 连胜结束，然后赢得了 2008 年的前 4 场比赛。这应该记录为总共 7 连胜（7 胜不记输）。但到目前为止，我无法弄清楚如何修改上述查询以适应跨年。

我什至尝试在表中创建一个新字段，将年份与周连接（例如`2007.13`，2007 年的第 13 周），但没有成功使用该字段而不是分别使用年和周。给出了时髦的结果。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:44:10.093

重新审视这个以修改我以前不完整（直到现在我还不知道）的答案。感谢[这个外部资源](http://www.sqlteam.com/article/detecting-runs-or-streaks-in-your-data)，它完全解决了我的问题，我能够调整查询以完美地满足我的特定需求。

首先，我创建了一个`run_groups`定义如下的视图：

```
select
    `GR`.`team_id` AS `team_id`,
    ((`GR`.`year` * 100) + `GR`.`week`) AS `GameDate`,
    `GR`.`result` AS `Result`, (
        select
            count(0)
        from
            `jaddl`.`game_results` `G`
        where
            ((`G`.`result` <> `GR`.`result`) and
            (`G`.`team_id` = `GR`.`team_id`) and
            (`G`.`playoffs` = `GR`.`playoffs`) and
            (((`G`.`year` * 100) + `G`.`week`) <= ((`GR`.`year` * 100) + `GR`.`week`)))) AS `RunGroup`
from
    `jaddl`.`game_results` `GR`
where
    (`GR`.`playoffs` = 0) 
```

然后我可以利用该视图来创建另一个视图，这给了我最终的结果，我可以查询这些结果以进行数据挖掘……我的最终游戏。

```
select
    `run_groups`.`team_id` AS `team_id`,
    `run_groups`.`Result` AS `Result`,
    min(`run_groups`.`GameDate`) AS `StartDate`,
    max(`run_groups`.`GameDate`) AS `EndDate`,
    count(0) AS `Games`
from
    `jaddl`.`run_groups`
group by `run_groups`.`team_id`, `run_groups`.`Result`, `run_groups`.`RunGroup`
order by count(0) desc, `run_groups`.`Result` desc, min(`run_groups`.`GameDate`) 
```

这会输出如下数据：

```
team_id  Result  StartDate  EndDate  Games  
      1      -1     201507   201606     13  
      7      -1     201603   201702     13  
      5       1     200701   200712     12  
      1      -1     201202   201213     12  
      2       1     200908   201005     11  
     12       1     201209   201305     10  
      5       1     201401   201410     10  
      4      -1     200813   200908      9  
     11      -1     201112   201207      9 
```

（A`result`是`1`赢，`-1`是输。）瞧！我需要查询所有与条纹相关的统计数据的数据集。向@eggyal 致敬，因为他提出了使用`year*100+week`前导零作为字符串而不是连接年份和周的出色建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:38:15.840

```
SELECT
    team_id,
    result,
    year,
    MIN(CONCAT(year,week)) as StartDate, 
    MAX(CONCAT(year,week)) as EndDate, 
    COUNT(*) as Games 
```

# macos - 在 Lion 升级后，Command-左/右箭头键组合停止工作

> ID：10840120
> 
> 赞同：16
> 
> 时间：2012-05-31T19:33:42.127
> 
> 标签：macos, keyboard, osx-lion

我在 Apple 支持论坛上发布了这个帖子，但没有任何答案，所以我希望我能在这里找到一个。

我终于开始将我的 MacBook Pro 升级到 Lion，我注意到的第一件事是我的 Command-Left Arrow/Right Arrow 组合键完全停止工作；无论我尝试在什么应用程序或上下文中使用它们，它们都不起作用。在 Snow Leopard 中，我主要将它们用于移动到文本应用程序（Komodo IDE、TextWrangler 等）中的行首和行尾、Colloquy 中的更衣室以及其他用途。但是无论我在哪里使用它们，都无法识别该组合。但是，如果我将它们与其他键结合使用，例如 Option-Command-Right/Left Arrow 或 Shift-Command-Right/Left Arrow，它们可以正常工作。例如，如果我进入我的 Komodo 首选项并尝试设置键绑定以导航到行尾，则键组合甚至不会注册；但是如果我执行 Command-Alt-Right/Left Arrow，它会很好地注册。然而，在网页文本区域中，即使这些组合也不起作用。Command-Up/Down Arrow 组合工作正常，但左/右箭头没有任何反应。

在搜索这些论坛和其他地方时，我看到了一些补救措施，例如杀死 Dock（从终端运行“killall Dock”），从任务控制中滑动和重新选择应用程序，以及其他似乎对其他人有用的东西有同样问题的人，但没有什么能为我解决这个问题。有没有人对如何纠正这个有任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-22T17:09:42.647

打开终端并输入`killall Dock`. 这似乎是 Dock 的一个错误。之后 Dock 将重新启动，您应该恢复快捷方式（我做到了！）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T21:18:39.487

检查 System Preferences > Keyboard > Keyboard Shortcuts 以查看这些组合键是否已分配给某些功能。

# php - 使用php在一个多维数组中的父子孙数据

> ID：10840122
> 
> 赞同：2
> 
> 时间：2012-05-31T19:34:03.953
> 
> 标签：php, mysql, codeigniter, multidimensional-array, parent-child

这是我的问题。我的数据库中有 3 个表。收藏、盒装和 CD。这些表具有以下父子孙关系：

一个 Collection 有一个或多个 Boxset

Boxset 有一张或多张 CD

我为每个表创建了以下列：

**收藏品**

*   collection_id - collection_title

**盒装**

*   boxset_id - boxset_title - collection_id

**光盘**

*   cd_id - cd_title - boxset_id

我正在尝试获取所有可用数据并将这些数据构造在多维数组中，以便按如下方式显示我的数据：-Collection 1 —Boxset1 —-CD 1 —-CD 2 —Boxset 2 —-CD 1 ... -Collections 2 ....

但是，如果不在“cds”表上添加“collection_id”字段，将所有数据放在一个数组中似乎是不可能的。到目前为止，我的解决方案是创建两个数组（一个 collections-boxsets 数组和一个 boxsets-cds 数组），如下所示：

```
$collections = $this->collection_model->get_all_collections();
  foreach($collections->result_array() as $row){
   $arrayCollections[$row['collection_id']] = $row;
  }  
  $boxsets = $this->boxset_model->get_all_boxsets();
  foreach($boxsets->result_array() as $row){
   $arrayCollections[$row['collection_id']]['boxsets'][] = $row;
  }
  foreach($boxsets->result_array() as $row){
   $arrayBoxset[$row['boxset_id']] = $row;
  }  
  $cds = $this->cd_model->get_all_cds();
  foreach($cds->result_array() as $row){
   $arrayBoxset[$row['boxset_id']]['cds'][] = $row;
  }
  foreach($arrayCollections as $collections){
   echo '-'.$collections['collection_title'].'<br />'; 
   foreach($collections['boxsets'] as $boxset){
    echo '--'.$boxset['boxset_title'].'<br />';
    foreach($arrayBoxset[$boxset['boxset_id']]['cds'] as $cd){
     echo '---'.$cd['title'].'<br />';
    }
   }  
  } 
```

有什么建议可以优化吗？

# c# - 如何在 C# 应用程序中运行 Windows 窗体

> ID：10840124
> 
> 赞同：0
> 
> 时间：2012-05-31T19:34:15.357
> 
> 标签：c#, visual-studio

我是 Visual Studio 的新手，我刚刚设计了一个简单的表单，它可以捕获一些用户输入文本并将其显示到屏幕上。但是，我不知道如何将此表单包含在 C# 应用程序中。Form1.cs 文件中的代码显然是不完整的——也就是说，它不包含任何格式数据。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:36:29.257

如果您使用普通的 WIndows Forms 应用程序模板，Form1 会在您运行时自动加载。

如果没有，我建议构建一个模板程序，并查看 Program.cs - 它显示了用于启动“主”表单并正确启动应用程序的典型样板代码。

# php - 如何在 php 中循环调用多个 web 服务而不影响 GUI

> ID：10840125
> 
> 赞同：0
> 
> 时间：2012-05-31T19:34:27.703
> 
> 标签：php, web-services, soap, wsdl

我有一个服务器客户端应用程序。在这个我的服务器是位于中央位置的基于 php 的应用程序，客户端是用 php 开发并位于单个机器上的本地服务器。我的中央服务器上有一个GUI，我在其中选择本地客户端并使用每台本地计算机上的webservice向他们发送字符串消息。目前就像当我点击发送按钮时，它从数据库中获取每台本地机器的 ip 并在 for 循环中调用 web 服务，但如果我选择更多本地客户端，则循环需要大量时间。那么我如何告诉我的中央服务器在后台完成这项工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:38:09.193

您可以使用像[BeanStalk这样的作业队列](http://kr.github.com/beanstalkd/)

# assembly - x86 汇编程序添加

> ID：10840126
> 
> 赞同：2
> 
> 时间：2012-05-31T19:34:35.660
> 
> 标签：assembly, x86

我是组装新手，可能这个问题有一个非常基本的答案，但我真的想不通。作为此代码的结果，AL 得到值 FE。为什么不是 00 ？

```
MOV BL,0ff;
MOV AL,0ff;
ADD AL,BL 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:37:16.263

因为 FF + FF = 1FE。因此，AL 将是 FE，并且您的进位标志将设置为 (1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:37:45.140

你得到 0xFE 因为 0xFF + 0xFF = 0x1FE。显然，低字节是 0xFE。

# artificial-intelligence - 进化算法“方法”之间的主要区别是什么？

> ID：10840127
> 
> 赞同：3
> 
> 时间：2012-05-31T19:34:38.620
> 
> 标签：artificial-intelligence, evolutionary-algorithm

所以我正在阅读进化算法并且很困惑。

进化编程，进化策略和遗传算法之间的“传统”差异是什么，因为我相信在现代它们基本上已经融合到同一件事上？

我的理解是遗传算法改变“基因”以产生结果，进化策略改变参数，从而以某种方式改变个体。`numerical parameters`完全按照（http://en.wikipedia.org/wiki/Evolutionary_algorithm）是什么意思 ？那么进化编程主要通过实数的变异而变化？

进化编程和遗传编程方法是找到解决问题的程序，而遗传算法和进化策略是使用候选者找到问题解决方案的方法吗？这种区别对我来说是不可见的，我在进化策略与遗传算法中看到的唯一区别是参数列表与染色体和实数与整数？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:23:15.873

希望这将为您澄清一些事情：

**进化算法**：尝试在给定的候选解决方案群体中找到“最合适”的解决方案的算法。该算法从随机候选者开始，并尝试通过复制、变异、重组和选择从那里进化

从那里，您有几种“标准方式”来调用几个进化算法系列。论文名称由学术研究给出；我相信命名约定的细微差别既来自微妙的原因，也来自随着时间的推移缺乏可用的词汇：

*   遗传算法：给定的种群被定义为“一串数字”（传统上是一个 0 和 1 的向量）。

*   遗传编程：给定的种群是一组结构不同的计算机程序。问题是哪个程序最适合解决给定的问题。如果您熟悉 Lisp 处理，您就会知道整个程序可以表示为一棵树；想象一下，您的算法对这些树进行了变异或重组。你最终会得到很多程序从你原来的候选人中演变而来，有些程序在解决你的问题方面会比其他程序更好。

*   进化编程：给定具有固定结构但参数的特定计算机程序，所研究的群体是通过这些参数的变化获得的程序集。例如，如果您认为您的问题可以用有限状态机来表示，则此技术可以帮助您找到状态数、状态之间的授权转换以及这些转换的概率。

*   进化策略：给定的种群是一个实数向量+参数，如研究候选者之间的突变率，试图达到一个最优值。想象一下，您从一组 (c1,c2,c3) 3 维向量开始。在每一代，您通过向 c1、c2 和 c3 添加一个随机值来改变它们。随机值可能基于具有标准偏差 S 的高斯。从 S 的大值开始可能会很有趣，这样突变会在整个地方产生向量，一旦你开始找到有趣的向量，你就会开始减小 S为了“关注”这些有趣的向量。

请记住，这些名称只是命名约定。有些擅长描述他们的意思，有些则不太优化。人工智能领域的进化命名仍在进行中；-)

# asp.net - 在 ASP.net AJAX 中使用 Javascript 事件

> ID：10840129
> 
> 赞同：1
> 
> 时间：2012-05-31T19:34:50.427
> 
> 标签：asp.net, ajax

我不敢相信这以前没有被报道过，但我一直很难在谷歌上找到这个问题的答案。

我正在使用 ASP.NET 学习 AJAX，并且我有一个工作原型。我唯一的问题是我想在 JavaScript 事件（确切地说是 onKeyUp）上启动我的 AJAX 验证，但是，ASP.NET 似乎只支持其 AJAX 版本的服务器端事件。如何从客户端事件调用我的 AJAX？

谢谢

**更新**

只是想补充一点，我确实发现了这个技巧，但这会导致网站进行回发，如果您尝试执行 AJAX，这对我来说毫无意义。

```
txtFirstName.Attributes.Add("onKeyUp","__doPostBack('ctl00_ContentPlaceHolder1_txtFirstName','')"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:08:49.667

听起来您正在做 Web 表单的东西，并且您想验证某些内容是否正在输入，或者至少在他们提交数据之后进行验证。

您可能想看看 ASP.NET Ajax Toolkit。您可以下载 .dll 并将其添加为项目的引用。

看看[ValidatorCallOut](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ValidatorCallout/ValidatorCallout.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:49:10.090

好的，所以我从 w3Schools.com “借来”了这段代码，所以我想给他们点赞

```
<script type="text/javascript">
  function val() {
    var xmlhttp;
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("spnFirstName").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("POST", "server.aspx", true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send();
    //xmlhttp.send("fname=Henry&lname=Ford"); //This is if you want to send values
  }
</script>

First Name: <asp:TextBox ID="txtFirstName" runat="server" OnTextChanged="txtFirstName_TextChanged" AutoPostBack="True" onkeyup="Val()"></asp:TextBox>
<span id="spnFirstName" runat="server" style="color:Red"> </span> 
```

Server.aspx 是一个空页面，其中只有单词“Hello”。如您所见，我将这个简单的 javascript 函数绑定到 onKeyUp 事件。这似乎也不会干扰 ASP.NET AJAX 验证。

我喜欢这样做比添加 dll 好得多，因为只要我坚持使用核心 asp.net 产品，我就不必担心其他开发人员不得不挖掘他们可能没有的库。

# sencha-touch - sencha touch 2.. 在创建视图时访问配置值

> ID：10840139
> 
> 赞同：1
> 
> 时间：2012-05-31T19:35:18.123
> 
> 标签：sencha-touch, sencha-touch-2

我创建了这样的视图

```
Ext.define('App.view.Message', {
    extend: 'Ext.Panel',
    alias: 'widget.message',
    config: {
        layout: 'vbox',
        bigText: 'big Text',
        smallText: 'small text',
        imageUrl: 'imageurl',
        oT: '',
        description: 'message description',

        items: [
            {
            flex: 3,
            xtype: 'container',
            layout: 'hbox',
            items: [
                {
                    xtype: 'container',
                    flex: 1,
                    items: [
                        {
                            html: '<h3>' + this.getBigText() + '</h3>'
                        },
                        {
                            html: '<h5>' + this.getSmallText() + '</h5>'
                        }
                    ]
                },
                {
                    xtype: 'image',
                    src: this.getImageUrl(),
                    flex: 1
                }
            ]
        },
            {
            flex: 6,
            xtype: 'container',
            layout: 'vbox',
            items: [
                {
                    flex:1,
                    html: '<h3>' + this.getBigText() + '</h3>'
                },
                {
                    flex:5,
                    html: '<p>'+this.getDescription()+'</p>'
                }
            ]
        },
            {
            flex: 1,
            xtype: 'button',
            text: this.getOT()
        }
        ]
    }
}) 
```

我需要在创建视图时访问创建此视图时将传递的值（配置值）。
所以声明`this.getDescription()`等`this.getBigText()`正在产生错误..我想要的是视图应该用我传递的配置值呈现，当我创建视图时..
我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:54:15.163

看起来您必须覆盖构造函数并获取配置值：

```
Ext.define('App.view.Message', {
extend: 'Ext.Panel',
alias: 'widget.message',

config: {
    layout: 'vbox',
    bigText: 'big Text',
    smallText: 'small text',
    imageUrl: 'imageurl',
    oT: '',
    description: 'message description'
},

constructor: function(config)
{
    config.items = [
        {
            flex: 3,
            xtype: 'container',
            layout: 'hbox',
            items: [
                {
                    xtype: 'container',
                    flex: 1,
                    items: [
                        {
                            html: '<h3>' + config.bigText + '</h3>'
                        },
                        {
                            html: '<h5>' + config.smallText + '</h5>'
                        }
                    ]
                },
                {
                    xtype: 'image',
                    src: config.imageUrl,
                    flex: 1
                }
            ]
        },
        {
            flex: 6,
            xtype: 'container',
            layout: 'vbox',
            items: [
                {
                    flex:1,
                    html: '<h3>' + config.bigText + '</h3>'
                },
                {
                    flex:5,
                    html: '<p>'+config.description+'</p>'
                }
            ]
        },
        {
            flex: 1,
            xtype: 'button',
            text: config.oT
        }
    ];

    this.callParent(arguments);
} 
```

});

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T02:57:03.143

Sencha Touch 2 不会为您的配置自动生成 getter 和 setter。但是，有两种方法可以满足您的需要：

*   直接通过获取和设置配置值`Ext.getCmp('your_component_id').config.bigText`（类似于其他配置）

*   为您的自定义配置手动创建 getter 和 setter，例如，您必须将类似这样的内容定义为视图组件的配置：

    `getBigText: function(){return this.bigText;}`

    `setBigText: function(value) {this.bigText = value;}`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:39:14.200

当您定义并加载“视图”文件时 - 浏览器会遍历每一行。当时没有创建“视图”实例。所以，这里自然找不到**this 。**

**但是，您可以在初始化**函数中使用“this” 。因此，您可以像这样编写代码：

```
Ext.define('App.view.Message', {
    extend: 'Ext.Panel',
    xtype: 'message',
    config: {
        layout: 'vbox',
        bigText: 'big Text',
        smallText: 'small text',
        imageUrl: 'imageurl',
        oT: '',
        description: 'message description'
    },

initialize : function(){
     this.add([
            {
            flex: 3,
            xtype: 'container',
            layout: 'hbox',
            items: [
                {
                    xtype: 'container',
                    flex: 1,
                    items: [
                        {
                            html: '<h3>' + this.bigText + '</h3>'
                        },
                        {
                            html: '<h5>' + this.smallText + '</h5>'
                        }
                    ]
                },
                {
                    xtype: 'image',
                    src: this.imageUrl,
                    flex: 1
                }
            ]
        },
            {
            flex: 6,
            xtype: 'container',
            layout: 'vbox',
            items: [
                {
                    flex:1,
                    html: '<h3>' + this.bigText + '</h3>'
                },
                {
                    flex:5,
                    html: '<p>'+ this.description +'</p>'
                }
            ]
        },
            {
            flex: 1,
            xtype: 'button',
            text: this.oT
        }
        ]);

        this.callParent(arguments);
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T20:28:14.753

为此，我建议您在初始化函数中将项目添加到视图中，如下所示：

```
 ...
  config:{
  ...
  },
  initialize: function(){
    var me = this;
    me.callParent();

    var container = Ext.create('Ext.Container',{
      title = this.config.bigText
    });

    me.add(container);
  }
  ... 
```

我不知道是否有最好的解决方案，但这有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-08T01:03:20.387

一个简单的解决方案是在 initialize() 函数中执行此操作，例如。

```
this.config.title = 'my title';
this.config.iconCls = 'info';
this.callParent(); 
```

# c# - 组合框/下拉框在其数据更新后未更新

> ID：10840145
> 
> 赞同：0
> 
> 时间：2012-05-31T19:35:48.027
> 
> 标签：c#, javascript, jquery, ajax, model-view-controller

一个很长的解释，但我相信这是一个非常简单的问题。我想我在这里遗漏了一些东西。

从下拉菜单中选择用户角色后，我将该角色的用户的部分视图加载到带有 ajax 的 DIV 中：

```
 $.ajax({
        type: 'post',
        data: { id: roleId},
        url: '@Url.Action("Manage","User")',
        success: function (data) {
            $("#user-manage").html(data);
        }
    }); 
```

现在，在页面上，我有一个包含用户列表和删除按钮的组合框。我突出显示一个用户，按下删除按钮，用户被删除。

伟大的！它可以工作，但是我的问题是，在刷新页面之前，已删除的用户不会从组合框列表中消失。而且我无法刷新页面，因为这意味着网站用户必须重新开始选择角色。

所以，问题是我怎样才能让用户在我点击删除按钮后立即消失在组合框中？

现在，当按下删除按钮时，选定的 UserId 将传递以下 ajax 调用，该调用删除选定的用户并返回更新的 JSON 用户列表：

```
 function removeUser() {
    var selectedUser = $("#user-combo").find(":selected").val(); //grab selected user
    var selectedForRole = $("#role-id").val(); //hidden field to store selected role

    $.ajax({
        url:"/User/Delete", //Delete selected user and return updated Json list
        data: { id: selectedUser , roleId: selectedForRole },
        type: 'post',
        success: function (data) {
            var userList = $("#user-combo");
            var listContent;

            $.each(data, function (index, item) {
                listContent += "<option value='" + item.Id + "'>" + item.Name + "</option>";
            });

            userList.html(listContent);
        }
    });
} 
```

从功能上讲，这是可行的。用户被删除，但我没有看到它反映在 $("#user-combo") 框中，直到我刷新屏幕。

location.reload(); 对我不起作用，因为我不希望网站用户通过选择角色来查看更新的用户列表。

当我删除它们并在稍后添加它们时出现时，如何使这种交互和用户消失？

先感谢您。

编辑。Json 对象返回到组合框：

```
return Json(roleUsers.Select(x => new
            {
                Id = x.Id,
                Name = x.Name
            })); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:47:00.530

就这么简单：

```
$("#comboBox option[value='USER-NAME']").remove(); 
```

把它放在你的`removeUser()`. 功能。

实际上，该函数不能将用户从远程列表中删除，还可以从 DOM 中删除。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:03:17.610

检查你的回调函数。逻辑似乎没问题。我刚刚测试并替换了 select 的 html 将删除旧项目并添加新项目。这是一个[小提琴](http://jsfiddle.net/miroslav/qJULT/2/)。

在成功回调函数中添加几个 console.log() 调用。控制台.log（数据）；console.log(userList); console.log(listContent) 并查看它们是否包含正确的数据......或者它们是否被执行。

对于另一个可能的原因，请检查服务器上的 roleUsers 列表。它可能包含已删除的用户 - 即，如果您将其从缓存中而不是从数据库中拉出，或者您在列表加载后删除。

# c++ - char 数组到 uint8_t 数组

> ID：10840147
> 
> 赞同：4
> 
> 时间：2012-05-31T19:35:55.870
> 
> 标签：c++, casting, char, buffer, unsigned

这是我从未擅长的 C/C++ 领域之一。

我的问题是我有一个最终需要包含一些空字符的字符串。将所有内容都视为 char 数组（或字符串）是行不通的，因为当他们找到第一个 null 时，事情往往会崩溃。所以我想，好吧，我会切换到 uint8_t，所以一切都只是一个数字。我可以根据需要移动东西，并在我准备好时将其转换回字符。

我现在的主要问题是：如何将字符串的一部分复制到 uint8_t 缓冲区？

实际上，我想做类似的事情：

```
std::string s = "abcdefghi";
uint8_t *val = (uint8_t*)malloc(s.length() + 1);
memset(val, 0, s.length() + 1);

// Assume offset is just some number
memcpy(val + offset, s.substr(1, 5).c_str(), 5); 
```

显然，当我尝试这个时，我得到了一个错误。在 memcpy 的第一个参数中可能存在某种诡计（我在网上看到 (*(uint8_t*)) 之类的东西，但不知道这意味着什么）。

有什么帮助吗？

当我在这里时，我怎样才能轻松地将其转换回 char 数组？只是将 uint8_t 指针静态转换为 char 指针？

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:18:09.773

> 我想，好吧，我会切换到 uint8_t，所以一切都只是一个数字。

这不会使寻找'\0'的算法突然停止这样做，使用char的算法也不必*注意*'\0'。用空字符表示结束是 C 字符串的约定，而不是 char 数组。uint8_t 可能只是 char 的 typedef。

正如 Nicol Bolas 指出的那样，std::string 已经能够存储包含空字符的字符串，而无需特殊处理空字符。

至于你的问题，我不确定你指的是什么错误，因为以下工作正常：

```
#include <iostream>
#include <string>
#include <cstdint>
#include <cstring>

int main() {
    std::string s = "abcdefghi";
    std::uint8_t *val = (std::uint8_t*)std::malloc(s.length() + 1);
    std::memset(val, 0, s.length() + 1);

    int offset = 2;
    std::memcpy(val + offset, s.substr(1, 5).c_str(), 5);
    std::cout << (val+offset) << '\n';
} 
```

memcpy 行从字符串中取出第二个到第六个字符`s`并将它们复制到 val 中。然后带有 cout 的行打印“bcdef”。

当然这是 C++，所以如果你想手动分配一些内存并将其归零，你可以这样做：

```
std::unique_ptr<uint8_t[]> val(new uint8_t[s.length()+1]()); 
```

或使用向量：

```
std::vector<uint8_t> val(s.length()+1,0); 
```

要从 uint8_t 数组进行转换，您可以（但通常不应该）执行以下操作：

```
char *c = reinterpret_cast<uint8_t*>(val); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:59:30.817

好吧，代码工作正常，它复制了 val 中的子字符串。但是，在偏移之前，您将在所有位置上都有 0。

例如对于 offset=2 val 将是 {0, 0, b, c, d, e, f, 0, 0, 0}

如果你打印它，它不会显示任何内容，因为字符串在第一个位置以空结尾（我想这是你正在谈论的错误......）。

# java - Java - JTextArea - 放弃焦点后修改？

> ID：10840156
> 
> 赞同：1
> 
> 时间：2012-05-31T19:36:56.307
> 
> 标签：java, swing, focus, jtextarea, timing

这是我的代码的简单版本：

```
JTextArea textareaA = new JTextArea(...);
JTextArea textareaB = new JTextArea(...);

textareaA.addModificationListener(new Modification Listener()
{
    public void modified(Modifiable arg0){
        if (textareaA.getValue().contains("\t"))
        {
           textareaA.setValue(textareaA.getValue().trim());
           textareaB.getTextComponent().requestFocusInWindow();
        }
    }
}); 
```

问题是，当我尝试不同的方法来改变 A 的值时，B 永远不会得到焦点。如果我关闭 A 的可聚焦，我无法重新打开它。我需要从 A 中删除选项卡，然后将焦点放在 B 上，允许用户在需要时单击返回 A，然后选项卡就消失了。上面的代码导致焦点停留在 A，即使我有 B 请求它。这可能是时间问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:51:45.430

据我了解您的问题，您希望用户能够键入“Tab”并切换到下一个文本区域。您还想修剪最后输入的“制表符”。

除了如果您在文本中间键入“Tab”，它不会被删除，下一个代码（基于您自己的代码并根据您自己的详细说明）似乎可以满足您的需求：

```
import java.awt.BorderLayout;
import java.awt.Color;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

public class Test {

    protected void initUI() {
        final JFrame frame = new JFrame();
        frame.setTitle("Test dialog synch");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new BorderLayout());
        final JTextArea textareaA = new JTextArea(24, 80);
        final JTextArea textareaB = new JTextArea(24, 80);
        textareaA.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
        textareaB.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 1));
        textareaA.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void changedUpdate(DocumentEvent e) {
                modified();
            }

            @Override
            public void insertUpdate(DocumentEvent e) {
                modified();
            }

            @Override
            public void removeUpdate(DocumentEvent e) {
                modified();
            }

            public void modified() {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        if (textareaA.getText().contains("\t")) {
                            textareaA.setText(textareaA.getText().trim());
                            textareaB.requestFocusInWindow();
                        }
                    }
                });
            }
        });
        panel.add(textareaA, BorderLayout.NORTH);
        panel.add(textareaB, BorderLayout.SOUTH);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().initUI();
            }
        });
    }

} 
```

# php - Mod_Rewrite 将 rewrite: 放在 GET 参数之前

> ID：10840162
> 
> 赞同：0
> 
> 时间：2012-05-31T19:37:11.630
> 
> 标签：php, apache, mod-rewrite

我正在尝试编写一个 RewriteRule 将所有请求发送到我的服务器到 index.php，然后将请求放入 GET 参数中。所以，像这样的请求：

> `http://my.domain.com/test/stuff/here`

将重写为：

> `http://my.domain.com/index.php?param=test/stuff/here`

为此，我在 .htaccess 中编写了以下规则：

```
RewriteEngine on
RewriteCOnd %{REQUEST_URI} !^/index.php$
RewriteRule ^(.*)$ /index.php?param=$1 [L] 
```

据我所知，逻辑是正确的，它甚至可以正常运行。它正在重写 index.php 并将 URL 的其余部分放在 GET 参数中，但由于某种原因，如果第一个斜杠之前的部分是“index”，它会将 index 替换为`rewrite:/index.php`

所以，网址

> `http://my.domain.com/index/test/stuff`

正在变成

> `http://my.domain.com/redirect:/index.php/test/stuff`

知道为什么会这样吗？

# iphone - UITextView 作为 UITableView 中的 tableFooterView - 奇怪的表格滚动行为

> ID：10840166
> 
> 赞同：1
> 
> 时间：2012-05-31T19:37:28.810
> 
> 标签：iphone, uitableview, scroll, uitextview

我有一个简单的 UITableView，其中包含一个 UITextView 实例，设置为 tableFooterView。该表是可编辑的，其想法是，如果正在编辑该表，也可以在 UITextView 中输入更长的注释。

在 setEditing 中，通过设置打开或关闭 textview 的编辑

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
  textview.editable = editing; 
} 
```

除其他外，显然。

奇怪的是，在第一次启用 textview 的编辑时（初始状态是 editable=NO），UITableView 实际上向下滚动到页脚的顶部（即 UITextView 的顶部）。

我怎样才能防止这种情况发生？

**编辑：** 我注意到只有在之前没有分配给 UITextView 的文本时才会发生这种情况，即当它为空时。

# xslt - 使用 xslt 测试是否存在具有特定内容的节点

> ID：10840173
> 
> 赞同：0
> 
> 时间：2012-05-31T19:37:57.887
> 
> 标签：xslt

我正在尝试使用 XSLT 合并来自两个单独的 web.xml 文件的元素。例如，如果 web-1.xml 和 web-2.xml 正在合并，并且我正在处理 web-1.xml，我希望将 web-2.xml 中的所有元素添加到结果中，除了那些已经存在于 web-1.xml 中。

在 XSLT 工作表中，我使用以下方法加载了要将其 servlet 合并到另一个文档中的文档：

```
<xsl:variable name="jandy" select="document('web-2.xml')"/> 
```

然后我有以下规则：

```
<xsl:template match="webapp:web-app">
  <xsl:copy>
    <!--  Copy all of the existing content from the document being processed  -->
    <xsl:apply-templates/>      

    <!--  Merge any <servlet> elements that don't already exist into the result  -->        
    <xsl:for-each select="$jandy/webapp:web-app/webapp:servlet">
      <xsl:variable name="servlet-name"><xsl:value-of select="webapp:servlet-name"/></xsl:variable>

      <xsl:if test="not(/webapp:web-app/webapp:servlet/webapp:servlet-name[text() = $servlet-name])">
        <xsl:copy-of select="."/>
      </xsl:if>
    </xsl:for-each>

  </xsl:copy>

</xsl:template> 
```

我遇到的问题是在正确的情况下进行测试。使用上面的代码，无论是否存在具有给定节点的 servlet-name 元素，测试总是评估为 false。我尝试了各种不同的测试，但没有运气。

相关文件位于[http://www.cs.hope.edu/~mcfall/stackoverflow/web-1.xml](http://www.cs.hope.edu/~mcfall/stackoverflow/web-1.xml)和[http://www.cs.hope.edu/~mcfall/stackoverflow/transform.xslt](http://www.cs.hope.edu/~mcfall/stackoverflow/transform.xslt)（第二个 web-2.xml 也在那里，但 StackOverflow 不允许我发布三个链接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:16:53.090

您的模板与 XPATH 相匹配`webapp:webapp`，`web-1.xml`如果您的`xsl:if`条件是：`/webapp:web-app/webapp:servlet/webapp:servlet-name[text() = $servlet-name]`. 尝试使用相对 XPATH 执行此操作：

```
 <xsl:if test="not(webapp:servlet/webapp:servlet-name[text() = $servlet-name])">
    <xsl:copy-of select="."/>
  </xsl:if> 
```

我没有检查过，所以你必须试一试。

此外，如果您可以提供 web-1.xml 和 web-2.xml 文件，会更容易。

编辑

以下 XSLT 合并了两个文件 - 当输入 XML 的两个位置存在相同类型的部分（如侦听器）时，会出现唯一的问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:webapp="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xpath-default-namespace="http://java.sun.com/xml/ns/javaee">

    <xsl:output indent="yes"/>
    <xsl:variable name="jandy" select="document('web-2.xml')"/>
    <xsl:template match="/">
        <xsl:element name="web-app">
            <xsl:for-each select="webapp:web-app/*[(name() != preceding-sibling::node()[1]/name()) or (position() = 1)]">
                <xsl:variable name="nodeName" select="./name()"/>
                <xsl:variable name="web1" as="node()*">
                    <xsl:sequence select="/webapp:web-app/*[name()=$nodeName]"/>
                </xsl:variable>
                <xsl:variable name="web2" as="node()*">
                    <xsl:sequence select="$jandy/webapp:web-app/*[name() = $nodeName]"/>
                </xsl:variable>
                <xsl:copy-of select="$web1" copy-namespaces="no"/>
                <xsl:for-each select="$web2">
                    <xsl:variable name="text" select="./*[1]/text()"/>
                    <xsl:if test="count($web1[*[1]/text() = $text]) = 0">
                        <xsl:copy-of select="." copy-namespaces="no"/>
                    </xsl:if>
                </xsl:for-each>
            </xsl:for-each>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:03:23.693

在 for-each 循环之前为第一个文档提供一个锚点：

```
<xsl:variable name="var" select="."/> 
```

然后，在你的 if 中使用它：

```
<xsl:if test="not($var/webapp:servlet/webapp:servlet-name[text() = $servlet-name])"> 
```

# c# - CrystalReportViewer for VS 2010 导出到 Excel（仅数据）的列未对齐

> ID：10840174
> 
> 赞同：0
> 
> 时间：2012-05-31T19:38:01.863
> 
> 标签：c#, asp.net, crystal-reports, crystal-reports-2010

我使用用于 Visual Studio 2010 (13.0.3) 控件库（AJAX 控件）的 Crystal Report Viewer 将站点升级到 ASP.NET 3.5。除了内置的导出按钮现在在导出到“ Excel (97-2003) 仅限数据。”

调查这个我发现了几条建议修复报告布局的评论，但我知道这不是问题，因为这些完全相同的报告使用旧的 Crystal 控件（11.0.3300）导出得很好。

我怎样才能解决这个问题？我通过更改设置以保持相对对象位置、保持列对齐和简化页眉来读取它，它将正确导出，但我看不到为默认导出按钮设置这些值的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:09:26.287

最终，我们最终让报告编写者使用最新的报告编写器版本检查并重新保存每个报告。他们不需要手动更改报告中的任何内容，只需在最新版本中再次保存即可。

本来希望有一个程序化的解决方案，但这确实解决了它。

# sed - Sed：搜索任何非空格符号区分大小写

> ID：10840181
> 
> 赞同：1
> 
> 时间：2012-05-31T19:38:28.470
> 
> 标签：sed, whitespace, case-sensitive

我的目标是在程序代码中的每个数学运算符之前和之后添加空格。因此，我使用以下 sed 命令：

```
sed
-e 's/\([^ ->]\)\([\+=-\*]\)/\1 \2/g'
 -e 's/\([\+=-\*]\)\([^ ->]\)/\1 \2/g'"
input > output 
```

第一行搜索一个非空格（或非 -> 运算符），然后是数学运算符，并将其替换为由空格分隔的两个字符。另一个以相反的顺序对字符执行相同的操作。

但是，除了所需的行为之外，它还会在所有大写字母之间添加空格。我还使用选项 I（不区分大小写）对其进行了测试，然后文件中的所有单词都被空格分隔为单个字符，如下所示：

```
.....d r a i n c u r r e n t w i t h o u t v e l o c i t y s a t u r a t i o n e f f e c t 
```

我看不出预期的行为和区分大小写之间没有可能的关系，感谢您对该问题的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:43:24.660

我注意到的第一件事是你在一个你可能不想这样做的字符类范围内操作：

```
[^ ->] 
```

上面的片段实际上意味着“匹配任何不在 SPACE 和 GREATER_THAN 之间的内容，除非你转义减号。例如，在基于 ASCII 的系统上，这也将包括以下任何字符：`!"#$%&'()*+,-./0123456789:;<=`

此外，据我所知，POSIX 正则表达式语法实际上并没有提供一种方法来表示“匹配除序列“xyz”之外的所有内容（使用 Perl，可以使用类似`((?!xyz)[a-z]+)`匹配任何小写字符序列的东西，除了以“开头的字符” xyz”）。

但是，如果我被迫使用，这就是我会解决这个问题的方法`sed`：

```
mjhennig@blackbox:~$ sed \
>   -e 's/->/T_PARAM_OBJECT_ACCESS/g' \
>   -e 's/\([^\s]\)\([+\-=*]\)/\1 \2/g' \
>   -e 's/\([+\-=*]\)\([^\s]\)/\1 \2/g' \
>   -e 's/T_PARAM_OBJECT_ACCESS/->/g' <<< "alpha->prop+bravo - test=check"
alpha->prop + bravo - test = check 
```

正如您所看到的，丢失或可能对我来说未知的功能是通过首先替换出现的`->`然后再将它们转换回来来解决的。

好吧，通常用`awk`or解决这个问题可能会更好`perl`。

干杯!

# sql - 您可以选择SELECT语句返回的数据集中的第N行吗？

> ID：10840182
> 
> 赞同：1
> 
> 时间：2012-05-31T19:38:31.843
> 
> 标签：sql, sql-server-2005, select

在伪代码中，我的意思是，你能做这样的事情吗（类似于 TOP）：

```
SELECT Row 2
*
FROM Table
WHERE Column1 = Condition 
```

我想为测试做点什么——我想不出现实世界的场景。只是好奇是否可能。我在 Interwebz 上找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:43:04.050

这会给你第 9 行：

```
select top 1 *
from (
    select top 9 *
    from MyTable
    order by 1) as x
order by 1 desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:43:41.880

```
SELECT  *
FROM    (
        SELECT  *, ROW_NUMBER() OVER (ORDER BY col2) rn
        FROM    mytable
        WHERE   col1 = condition
        ) q
WHERE   rn = 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:47:16.850

```
WITH QUERY AS (
               SELECT *, ROW_NUMBER() OVER(ORDER BY Column1) AS RowNumber
               FROM Table
               )
SELECT * FROM QUERY WHERE ROWNUMBER = N 
```

# ruby-on-rails - CKEditor gem 与 Paperclip 和 Amazon S3

> ID：10840185
> 
> 赞同：1
> 
> 时间：2012-05-31T19:38:45.697
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, ckeditor

我正在使用 CKEditor，并且已将其配置为与 Paperclip 一起使用，但我无法告诉它将文件存储在 S3 中，因此它使用 Paperclip 但将它们存储在本地文件系统上。

所以我想知道是否有某种方法可以告诉 Paperclip 每次使用时都明确使用 S3。

我知道如何在某些型号上使用 S3 配置 Paperclip（很简单，在回形针 github wiki 上进行了描述）。我正在 Heroku 上进行部署，这就是为什么我无法写入本地文件系统。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:52:49.867

一种方法是查看 ckeditor 安装生成器在做什么。例如，如果使用 ActiveRecord 作为 ORM，请在[此处查看](https://github.com/galetahub/ckeditor/tree/master/lib/generators/ckeditor/templates/active_record/paperclip/ckeditor)用于使用 Paperclip 的模型的模板。

生成器实际上将此模板复制到您的 app/models/ckeditor 文件夹中。您可以编辑它们并根据需要进行配置，以便 Paperclip 使用 S3。

对于 ActiveRecord，模型是：

```
/app/models/ckeditor/attachment_file.rb
/app/models/ckeditor/picture.rb 
```

请记住，如果更新 ckeditor gem 并且更新过程需要覆盖此模型，则此方法可能会在将来为您提供额外的工作。

否则，您可以使用 Paperclip 默认选项。在您的回形针初始化程序（/config/initializers/paperclip.rb）中使用：

```
Paperclip::Attachment.default_options.merge!(
    YOUR OPTIONS FOR S3 HERE
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-26T17:21:33.353

对于carrierwave，您可以生成上传器，在那里您可以配置您的s3 或任何您想要的。

```
class CkeditorAttachmentFileUploader < CarrierWave::Uploader::Base
  include Ckeditor::Backend::CarrierWave
  # Choose what kind of storage to use for this uploader:
  if Rails.env.production?
    storage :fog
  else
    storage :file
  end
....
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T19:43:49.320

这很简单。您可以使用[这篇文章](http://doganberktas.com/2010/09/14/amazon-s3-and-paperclip-rails-3/)来帮助您入门。或者，您可以查看[这个类似的问题](https://stackoverflow.com/questions/3435246/paperclip-amazon-s3-setup-with-heroku)以获取更多详细信息。

# java - 这是替换字符串中单词的有效方法吗

> ID：10840187
> 
> 赞同：-1
> 
> 时间：2012-05-31T19:38:53.547
> 
> 标签：java

我觉得可能有比搜索字符串三遍寻找要替换的匹配项更有效的方法

```
str.replaceAll("_", " ").replaceFirst("^\\w*\\d{3}\\w*", "")
      .replaceAll("20\\d{2}", "") 
```

以上是在一个for循环中逐行循环一个长字符串

1.  全部 _（下划线）
2.  包含超过 3 个数字并且是该行中的第一个单词的单词
3.  日期 20** (2012,2013..)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:04:05.380

这不是完全相同的语法，但是如果您能够将三个正则表达式仅加入一个，例如“ **(_)|(^\w*\d{3}\w*)|(20\d{2})** ”它可以更有效。

关键是尝试找到一个简单的表达式来只做一次。

# git - git filter-branch 仅更改受影响的提交

> ID：10840191
> 
> 赞同：3
> 
> 时间：2012-05-31T19:39:14.873
> 
> 标签：git, git-filter-branch

20 次提交前，我的 git 存储库中添加了一个大型二进制文件。删除这个：

```
git filter-branch --index-filter "git rm --cached --ignore-unmatch FILE" \
    --prune-empty HEAD 
```

在我的项目历史记录中更改每次提交（~1100）的 SHA1。它确实删除了文件，但我希望只有`git push -f`少量的修改提交。有没有办法告诉`filter-branch`只修改带有`FILE`和后代评论的提交，在我的情况下大约有 20 个提交？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T19:44:50.667

如果你知道什么提交引入了文件，最简单的方法是指定`$SHA^..HEAD`（`$SHA`引入它的提交在哪里）。这将阻止它甚至查看较旧的提交。

如果引入这个文件的提交*只*引入了它，仅此而已，并且此后没有其他提交触及它，那么你可以在没有过滤器分支的情况下更简单地摆脱它，通过使用`git rebase --onto $SHA^ $SHA`（在哪里`$SHA`引入这个文件的提交）。这只会`$SHA`从历史中删除提交。

# nginx - Vagrant + Puppets 模块

> ID：10840192
> 
> 赞同：1
> 
> 时间：2012-05-31T19:39:20.913
> 
> 标签：nginx, varnish, puppet, vagrant, zend-server

木偶模块有什么好的资源吗？我需要一些用于 nginx、varnish 和 zend-server ce 的东西，我敢肯定那会是我找不到的地方。

在此先感谢，雅罗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:42:36.463

查看 puppet labs 模块存储库！

[http://forge.puppetlabs.com/](http://forge.puppetlabs.com/)

希望这就是你要找的！

干杯，

杰克

# c# - .NET 集合仅在 VB 中

> ID：10840193
> 
> 赞同：5
> 
> 时间：2012-05-31T19:39:21.923
> 
> 标签：c#, .net, vb.net, collections

为什么`Collection`在`Microsoft.VisualBasic`图书馆？为什么不在更一般的位置。微软是否有理由从 C# 中“隐藏”它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T19:41:49.647

Microsoft.VisualBasic库`Collection`中的 是对旧 VB6 集合的回归。

您可能应该查看一个`System.Collection`名称空间，以获取您可能想要的基本 .NET 集合功能。

此外，值得一提的是，您可以在 C# 代码中添加引用并使用 System.VisualBasic 命名空间*。*只是，大多数时候，不需要这样做（例如：http: [//msdn.microsoft.com/en-us/library/ms173136.aspx](http://msdn.microsoft.com/en-us/library/ms173136.aspx)）。

编辑 - 更新命名空间 - 抱歉！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:41:56.763

它旨在向后兼容 VB6。如果可能，您不应该将它用于新代码。 `List(Of T)`将是首选的通用集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:42:11.567

它的功能等同`Collection`于 VB6 中的类。它只是为了简化 VB6 代码的移植；对于任何新事物，您都应该使用普通的 .NET 集合类。

# git - 当 var_dump 存在时中止 git 预提交钩子

> ID：10840196
> 
> 赞同：6
> 
> 时间：2012-05-31T19:39:36.887
> 
> 标签：git, bash, githooks

我正在尝试（但失败得很惨）制作一个 git pre-commit 钩子来检查我修改的文件中是否存在 var_dump 并在找到时退出。我遇到的问题是它似乎总是中止提交。这是我的预提交文件的内容：

```
VAR=$(git diff | grep -w "var_dump")
if [ -z $VAR ]; then
  echo "You've left a var_dump in one of your files! Aborting commit..."
  exit 1
fi 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T20:05:44.647

首先，请注意，plain`git diff`给出了工作树和索引之间的区别（即仍然可以暂存的内容），而不是即将提交的内容。用于`git diff --cached`查看将要提交的内容。

我在实验时遇到的第二件事是`if [ -z $VAR ]`直接使用会引发错误，因为输出`+`开头的`git diff`是由 Bash 解释的。确保`$VAR`用引号括起来以防止这种情况。

至于脚本，如果`$VAR`为空，您忘记否定测试。如果 grep 的输出为空，则找不到“var_dump”，钩子应该返回成功。你想要的情况是如果它**不**为空，这意味着找到了“var_dump” **，**它应该中止提交。

全部一起：

```
VAR=$(git diff --cached | grep -w "var_dump")
if [ ! -z "$VAR" ]; then
  echo "You've left a var_dump in one of your files! Aborting commit..."
  exit 1
fi 
```

# c# - 如何在 C# 中序列化/反序列化可选 XML 枚举？

> ID：10840197
> 
> 赞同：7
> 
> 时间：2012-05-31T19:39:39.447
> 
> 标签：c#, xml, xml-serialization

我试图弄清楚如何将 XML 列表序列化/反序列化为 C#，它具有一个枚举类型的可选属性。以下是我的 C# 类：

```
public class AttributeAssignmentExpressionElement : XACMLElement
{
    [XmlAttribute]
    public string AttributeId { get; set; }

    [XmlAttribute]
    public Category Category { get; set; }                   
} 
```

我的`Category`枚举定义如下：

```
public enum Category
{
    [XmlEnum(Name = "urn:oasis:names:tc:xacml:1.0:subject-category:access-subject")]
    Subject,
    [XmlEnum(Name = "urn:oasis:names:tc:xacml:3.0:attribute-category:resource")]
    Resource,
    [XmlEnum(Name = "urn:oasis:names:tc:xacml:3.0:attribute-category:action")]
    Action,
    [XmlEnum(Name = "urn:oasis:names:tc:xacml:3.0:attribute-category:environment")]        
    Environment
} 
```

当`Category`相应的 XML 文件中存在时，序列化/反序列化按预期工作。但是，如果`Category`XML 中缺少 ，则使用默认值（枚举中的第一项）。如果我尝试将枚举变量设为可空 ( `Category?`)，则反序列化器会抛出异常，因为它无法反序列化复杂类型。给定以下 XML（不包含属性），我怎样才能适当地序列化枚举？

```
<AttributeAssignmentExpression
    AttributeId="urn:oasis:names:tc:xacml:3.0:example:attribute:text">       
</AttributeAssignmentExpression> 
```

在这种情况下，反序列化对象中的值应该为 null。

谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T20:12:03.043

好吧，你可以这样做 - 但它有点乱：

```
[XmlIgnore]
public Category? Category { get; set; }

[XmlAttribute("Category")]
[Browsable(false), EditorBrowsable(EditorBrowsableState.Never)]
public Category CategorySerialized
{
    get { return Category.Value; }
    set { Category = value; }
}
[Browsable(false), EditorBrowsable(EditorBrowsableState.Never)]
public bool ShouldSerializeCategorySerialized()
{
    return Category.HasValue;
} 
```

这是做什么的：

*   使用 a`Category?`作为可选的枚举值
*   禁用`Category`序列化的属性
*   添加辅助属性 ，`CategorySerialized`作为 的代理`Category`，该属性不可为空并且从 IDE 等中隐藏（尽可能）
*   `CategorySerialized`通过`ShouldSerialize*`模式使用条件序列化

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-01T19:42:30.417

实际上，有一些官方的魔法可以做到这一点（[见这里](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer%28v=vs.110%29.aspx#code-snippet-5)）：

> 另一种选择是使用特殊模式来创建 XmlSerializer 识别的布尔字段，并将 XmlIgnoreAttribute 应用于该字段。该模式以 propertyNameSpecified 的形式创建。例如，如果有一个名为“MyFirstName”的字段，您还将创建一个名为“MyFirstNameSpecified”的字段，它指示 XmlSerializer 是否生成名为“MyFirstName”的 XML 元素。这在以下示例中显示。

也就是说，TS案例中的模型应该是这样的：

```
public class AttributeAssignmentExpressionElement : XACMLElement
{
    [XmlAttribute]
    public string AttributeId { get; set; }

    [XmlAttribute]
    public Category Category { get; set; }

    [XmlIgnore]
    public bool CategorySpecified { get; set; }                   
} 
```

除非您将魔法字段设置`CategorySpecified`为`true`，否则`Category`属性不会被序列化。在反序列化的情况下，`CategorySpecified`将是`false`，表示`Category`XML 中不存在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-15T17:19:34.850

使用“指定”模式的完整示例代码

```
public class ClassToSerialize
{
    [XmlAttribute("attributeName")]
    public EnumType EnumPropertyValue
    {
        get { return EnumProperty.Value; }
        set { EnumProperty = value; }
    }
    [XmlIgnore]
    public EnumType? EnumProperty { get; set; }
    public bool EnumPropertyValueSpecified => EnumProperty.HasValue;

} 
```

# asp.net - 中等信任的 LDAP

> ID：10840199
> 
> 赞同：2
> 
> 时间：2012-05-31T19:39:47.323
> 
> 标签：asp.net, interop, directoryservices, medium-trust

我有一个网站和几个项目的解决方案。
这些项目都具有该`AllowPartiallyTrustedCallers`属性并具有强名称。

该网站在完全信任的情况下工作。但是，将信任设置为中等后，我`System.Security.SecurityException: Request failed.` 一浏览该站点就会收到错误消息。

在我的项目中，我调用了`LogOnUser`，以及对各种`System.DirectoryServices.AccountManagement`方法的许多调用。

该站点能否以中等信任度运行，还是我必须完全信任所有 LDAP 调用？

正如我所提到的，我已经为`AllowPartiallyTrustedCallers`所有项目设置了属性。不知道还能做什么。
另外，我不知道错误是在什么/哪里产生的。服务器上的事件日志与此 SecurityException 无关。有没有办法找出错误位置，所以也许我可以尝试重写一些代码？

[在 Win2k8R2 上运行 .NET 4.0]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T14:32:29.243

`LogOnUser`与所有 P/Invoke 调用一样，需要`SecurityPermission`使用`UnmanagedCode`权限标志。`System.DirectoryServices.AccountManagement`要求不受限制`DirectoryServicesPermission`。默认情况下，这两种权限都不会授予中等信任的 ASP.NET 应用程序。

该`AllowPartiallyTrustedCallers`属性允许部分信任程序集使用完全信任程序集。在您的情况下，该属性无效，因为 bin 文件夹中的所有程序集都加载到部分信任应用程序域中。

如果您的应用程序需要在中等信任下运行，并且您有能力将程序集安装到 GAC 中，那么您可以创建一个包含需要额外权限的代码的程序集，用 标记该程序集`AllowPartiallyTrustedCallers`并将其放入 GAC。您还需要`Assert`所需的权限来抑制仍会发生的堆栈遍历。

有关详细信息，请参阅MSDN 库[中的 ASP.NET 4 应用程序](http://msdn.microsoft.com/en-us/library/dd984947.aspx)中的代码访问安全性主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T23:40:28.380

虽然@Michael Liu 的回答是正确的，但对于在这方面工作知识有限的新手（比如我自己）来说并不容易理解。该答案旨在补充迈克尔的答案。

当您的 web.config 配置为使用“完整”*以外的任何信任级别时*

```
<trust level="Full"/> 
```

[如果不创建自己的策略文件](https://msdn.microsoft.com/en-us/library/wyts434y(v=vs.100).aspx)，您将无法连接到 Active Directory 。一旦您创建了自己的策略文件（假设它被称为“myPolicyFile.config”），那么您就可以对其进行自定义以允许您的 ASP.NET 应用程序连接到 Active Directory。

以下是您需要进行的更改：

在 web.config 中，将网站配置为使用您的自定义策略文件：

```
<system.web>
    ...
    <securityPolicy>
        <trustLevel name="myMediumPolicy" policyFile="myPolicyFile.config"/>
    </securityPolicy>

    <trust level="myMediumPolicy"/>
    ...
</system.web> 
```

接下来，在 myPolicyFile.config 文件中，添加“SecurityClass”和“IPermission”条目，如下所示：

```
<configuration>
    ...
        <PolicyLevel version="1">
            <SecurityClasses>
                ....
                <SecurityClass Name="DirectoryServicesPermission" Description="System.DirectoryServices.DirectoryServicesPermission, System.DirectoryServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
                ....
            </SecurityClasses>
            <NamedPermissionSets>
                <PermissionSet
                        class="NamedPermissionSet"
                        version="1"
                        Name="ASP.Net">
                    ...
                    <IPermission
                            class="DirectoryServicesPermission"
                            version="1"
                            Unrestricted="true"
                    />
                    <IPermission
                            class="SecurityPermission"
                            version="1"
                            Flags="Execution, ControlThread, ControlPrincipal, RemotingConfiguration, UnmanagedCode"
                        />
                    ...
                </PermissionSet>
            </NamedPermissionSets>
        </PolicyLevel>
    ...
</configuration> 
```

注意： <IPermission class="SecurityPermission"... /> 节点可能已经存在（取决于您基于 myPolicyFile.config 文件的系统定义的信任级别文件）。如果它已经存在，那么您只需将文本“, UnmanagedCode”添加到“Flags”属性。如果它不存在，则将上面的示例复制并粘贴到“ASP.Net”NamedPermissionSet 中。

最后，保存您的更改并重新加载您的网站。你应该很高兴去！

# c# - List.Cast<> 错误“是在给定上下文中无效的方法”

> ID：10840200
> 
> 赞同：5
> 
> 时间：2012-05-31T19:39:50.897
> 
> 标签：c#, linq, casting

我有一个抽象父类，子类继承自它。我有另一个类，其中包含许多`List<>`类型的不同子类。然后我在另一个类中有一个方法，它接受一个参数`List<ParentType>`并只调用声明为抽象的方法。

我在使用`List<T>.Cast<T2>`子类列表时遇到问题。我收到错误：

> System.Linq.Enumerable.Cast(System.Collections.IEnumerable)' 是一个“方法”，在给定的上下文中无效

有谁知道如何解决这个错误？还是我必须重建类型列表`List<ParentType>`并单独重铸每个项目？

我正在尝试做的事情： public abstract class P { public int num; 公共抽象双 addSections(); }

```
public class A : P {
    public int num2;
    public A(int r, int n) {
        num = r;
        num2 = n;
    }
    public double addSections() { return (double)num + (double)num2; }
}

public class B : P {
    public double g;
    public B(int r, double k) {
        num = r;
        g = k;
    }
    public double addSections() { return (double)num + g; }
}

public class MyClass {
    public MyClass() {
        List<A> listA;
        List<B> listB;
        //...
        helper(listA.Cast<P>()); //doesn't work
        helper(listB.Cast<P>().ToList()); //doesn't work either
    }

    public void helper(List<P> list) {
        //...
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T19:47:29.520

代替实际查看您的代码以便我们修复它，而是更改方法如何：

```
public void DoSomething<T>(IEnumerable<T> items) where T : ParentType
{
    ... 
} 
```

或者，如果您使用 C# 4 和 .NET 4，这应该没问题，就像.NET 4`IEnumerable<T>`中的协变一样`T`。

```
public void DoSomething(IEnumerable<ParentType> items)
{
    ... 
} 
```

你真的*需要*接受 a 的方法`List<ParentType>`吗？毕竟，如果你要打电话：

```
var parentList = childList.Cast<ParentType>().ToList(); 
```

并将其传递给方法，那么无论如何你已经得到了两个完全独立的列表。

顺便说一句，协变的另一个影响`IEnumerable<T>`是，在 .NET 4 中，您可以避免`Cast`调用，只需调用：

```
var parentList = childList.ToList<ParentType>(); 
```

编辑：现在您已经发布了代码，只需不将该`Cast`方法*作为*方法调用即可：

```
// This...
helper(listB.Cast<P>.ToList())

// should be this:
helper(listB.Cast<P>().ToList()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:57:24.053

现在您已经添加了代码，我看到了两个潜在的问题：

1.  调用时需要加括号，`Cast`例如

    `listA.Cast<P>()`

    `Cast`不是一些特殊的运算符，它是一种扩展方法，就像其他任何东西一样。

2.  这些调用`helper`实际上是在类级别，而不是在另一个方法中吗？那也会是个问题。

# python - Google App Engine Python 搜索 API 文档错误

> ID：10840214
> 
> 赞同：0
> 
> 时间：2012-05-31T19:41:42.227
> 
> 标签：python, google-app-engine, google-search-api

我正在使用 Python 1.6.6 SDK 并且无法让搜索 API 初始化新文档：

`from google.appengine.api import search`

```
def index_document(document_id, some_string):
    return search.Document(
        doc_id=document_id,
        fields=[
            search.TextField(name='text_field', value=some_string),
            search.DateField(name='date', value=datetime.now().date())
        ]) 
```

作为回应，我得到：

```
AttributeError: type object 'search' has no attribute 'Document' 
```

我看不到任何证据表明这是一个普遍问题，所有文档都指出这是初始化文档的过程。

但是，如果我将 API 调用放在它按预期执行的函数中：

```
def index_document(document_id, some_string):

    from google.appengine.api import search

    return search.Document(... 
```

我看不出这会起作用的任何原因，但是由于我正在导入他们的许多 API，因此全局导入不会起作用。有没有人在让它工作时遇到过类似的问题/成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:07:35.097

检查您是否没有其他同名对象。

# asp.net - 在 vb.net 中创建进度条

> ID：10840218
> 
> 赞同：2
> 
> 时间：2012-05-31T19:41:57.053
> 
> 标签：asp.net, vb.net

我一直在寻找教程或任何东西，但似乎找不到任何东西。我希望在我的 Web 应用程序中构建一个类似于 window.form 控件中的进度条。任何帮助或任何类型的方向都会非常有帮助。我不是在找人为我做，只是一个链接或一些如何开始的指示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:17:44.983

进度条是一个包含 3 个主要属性的控件：（您应该查看 System.Windows.Forms.ProgressBar 以了解 ProgreeBar 的构成）

*   最低限度
*   最大
*   一个值

您必须异步并定期重新渲染以向用户更新控件的状态。

基本上与 WinForms ProgressBar 和 Net.UI 的唯一大区别。Progreebar 是用于呈现进度的图形控件。所以你可以使用一个大小固定的图形控件（例如一个标签）并从最小到最大在其中添加一些内容。

在大多数情况下，引发要处理的事件的不是更改的值，而是处理更新进度条值的事件。查看此页面中的示例：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.aspx)

PS：它存在一些（免费或不免费）.NET ProgressBar，如 Neat Upload。

玩得开心：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T09:13:05.130

在设计页面 (.aspx) 中，您可以使用 Visual Studio 工具箱中 AJAX 扩展类别下的 ScriptManager 控件和 UpdateProgress 控件。您也可以使用自己的 GIF 文件。

您可以查看以下链接：

[http://www.webcodeexpert.com/2013/05/show-progress-image-using.html](http://www.webcodeexpert.com/2013/05/show-progress-image-using.html)

# excel - 在 Excel 中使用 VBA 将单击行为添加到动态创建的表单控件按钮

> ID：10840223
> 
> 赞同：0
> 
> 时间：2012-05-31T19:42:28.053
> 
> 标签：excel, vba, button, command

[作为这个问题](https://stackoverflow.com/questions/10822450/copy-elements-from-one-page-to-another-in-multipage-with-vba-in-excel)的后续，用户表单允许在运行时在多页中创建 x # 个选项卡，每个选项卡都具有相同的控件，我想知道如何设置按钮的 .OnClick 行为。我正在尝试使用以下代码来实现这一点：

```
For Each ctl In MultiPage1.Pages(NumSegs - 1).Controls
    If TypeOf ctl Is MSForms.CommandButton Then
        ctl.Name = "Segment" & NumSegs & "Button"
        ctl.OnClick = "Span_Form_Click_Handler"
    End If
Next 
```

但当然似乎没有 .OnClick 方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:12:30.817

您定义一个带有事件的变量。一个最小的例子：用户窗体+命令按钮就可以了。用户窗体模块中的代码：

```
Public WithEvents btn As MSForms.CommandButton

Private Sub btn_Click()
    MsgBox "Bla"
End Sub

Private Sub UserForm_Click()
    Set btn = CommandButton1
End Sub 
```

在表单中单击后，按钮 CommandButton 获得分配的 sub btn_Click。

为了能够每次调用同一个 sub，您需要将 sub 和 withevents 变量放入一个类中，并为您找到的每个 CommandButton 创建一个此类的实例。

# mysql - Mysql 和 EBS - 将分区移动到更大的分区

> ID：10840225
> 
> 赞同：0
> 
> 时间：2012-05-31T19:42:38.680
> 
> 标签：mysql, performance, amazon-web-services

在我们的应用程序中，我们使用带有 Mysql 数据库的 EBS 分区。最终，我们用完了空间，不得不为数据库分配更大的分区。我们使用 AWS 面板功能使用前一个卷的快照创建一个新卷。Mysql 已停止，现在我们正在使用新的、更大的 EBS 分区。但是，我们的数据库性能明显下降。我们不确定这是怎么发生的，因为理论上我们使用的是相同的 Mysql 配置和相同的数据库。是否有可能我们必须重建索引或重新优化表？我不确定这是否值得，所以我们还没有尝试过，因为我们担心它会进一步减慢数据库的速度，而且我们的应用程序不能轻易停止，因为它 24/7 运行。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:26:08.987

当您开始使用新的 EBS 卷（无论是从快照创建还是创建为空的）时，每个块始终存在首次使用性能损失。这将表现为使用新卷的 MySQL 数据库性能下降。

您可以将 EBS 卷“dd”到 /dev/null 以确保所有块都已被命中。这是我写的一篇关于如何做到这一点的文章：http: [//alestic.com/2010/03/ebs-volume-initialization-from-snapshot](http://alestic.com/2010/03/ebs-volume-initialization-from-snapshot)

在通过查询将数据库带入内存时，也可能会影响性能。这是在任何平台上重新启动数据库时都会发生的标准 IO 问题，与 EC2 或 EBS 无关。

如果在一切都热身后性能仍然很慢并且应该嗡嗡作响，那么您可以尝试以下操作：

*   创建一个新的 EBS 卷并对其进行测试，以防万一慢速卷在 EC2 上使用有缺陷的硬件。

*   将您的 EC2 实例移至新硬件，以防当前硬件上的邻居网络繁重并干扰您的 EBS IO。这可以通过一个简单的停止/启动来完成（我在这里写过：http: [//alestic.com/2011/02/ec2-move-hardware](http://alestic.com/2011/02/ec2-move-hardware)）

*   将您的数据库移动到 RAID-0 中配置的 4-8 个 EBS 卷。这是尝试消除 EBS IO 波动的常用方法。

*   考虑试用 Amazon RDS。有些人发现，亚马逊负责这部分基础设施，他们可以获得更好的性能。

Note also that you may experience IO slowness while an EBS snapshot is being created from an EBS volume that is being written to heavily. One approach to alleviate this is to replicate the master MySQL database to a different server and create the snapshots on the second server's EBS volume(s).

# jquery - 通过链接时如何隐藏 iframe（即跟随鼠标）？

> ID：10840226
> 
> 赞同：0
> 
> 时间：2012-05-31T19:42:43.760
> 
> 标签：jquery, iframe, show-hide

我有一个绑定到 mousemove 的 iframe。

这意味着这个 iframe 随处可见鼠标光标。

但是当它通过链接时，我需要隐藏/禁用/使其不可见。

我需要在传递链接时隐藏/禁用 iframe，否则链接将变得不可点击（因为 iframe 在它上面）。

它必须是通用链接，所以我不能使用 id，它必须与通用链接标签相关

* * *

答案：http: [//jsfiddle.net/ZPA5g/](http://jsfiddle.net/ZPA5g/)

我会将表单隐藏在链接、输入和图像或我需要的任何元素中。

阅读两个答案的评论以检查其差异。两者都有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:47:38.120

你的代码：

```
$(document).bind('mousemove', function(e){
$('#tail').css({
   left:  e.pageX - 20,
   top:   e.pageY - 18
});
}); 
```

试试这个：

```
$(document).bind('mousemove', function(e){
$('#tail').css({
   left:  e.pageX - 20,
   top:   e.pageY - 20
});
}); 
```

光标上方的 +2px 空间就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:54:01.433

这可以通过使用 .on() 函数来解决吗？

[http://api.jquery.com/on/](http://api.jquery.com/on/)

好的。

```
$('a').live("hover", function() {
  $('#tail').hide();
}); 
```

或者。

```
$('a').live("mouseenter", function() {
  $('#tail').hide();
});
$('a').live("mouseout", function() {
  $('#tail').show();
}); 
```

# ruby-on-rails - 没有数据库的 Rails 中的简单表单

> ID：10840228
> 
> 赞同：1
> 
> 时间：2012-05-31T19:42:52.817
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我刚开始尝试熟悉 Rails，但我对 Ruby 了解不多。目前我正在做一个初学者项目来熟悉这个框架，该框架涉及一个简单的表单，其中包含姓名、电子邮件和电话号码，当你点击提交按钮时，页面应该刷新并显示你提交的信息（所以有没有数据库交互，模型应该做的很少）。这很简单，但由于我目前对 Ruby 的了解非常少，我有点困惑。我已经编写了大部分视图，但我仍然对在控制器和模型中放入什么感到困惑。如果有人可以提供任何提示，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:57:03.990

你需要无表模型。请参阅 Ryan 关于此主题的出色网络广播。

[http://railscasts.com/episodes/193-tableless-model](http://railscasts.com/episodes/193-tableless-model)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:52:24.073

模型（至少来自 ActiveRecord::Base 的模型）需要一个数据库，所以如果你使用一个模型，你就是在使用一个数据库，即使它是一个简单的数据库，比如 SQLite。

如果您不想深入模型并生成迁移来为模型创建表，那么您可能只是要将表单值存储到实例变量中并在视图中引用它们。下面是一个如何做到这一点的快速示例。

如果您有一个将数据（例如：`name`和`email`）发送到`create`操作的表单，则创建操作看起来像这样：

```
def create
  @name = params[:name]
  @email = params[:email]
  render :my_template
end 
```

上面的`create`操作是将发送给它的参数分配给实例变量，然后您可以在视图中引用它。在上面的示例中，该`create`操作将尝试渲染一个名为的视图，该视图`my_template`可能会被命名`my_template.html.erb`并且可能看起来像这样：

```
<p>Your name is <%= @name => and your email is <%= @email =>.</p> 
```

这是一个非常小且人为的示例，但希望这会有所帮助。

当您继续使用模型时，您的创建操作可能会改为创建模型的新实例，将用户发送的参数传递给该模型，保存模型，然后将它们重定向到显示数据的页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:57:40.870

使用数据库要容易得多。

```
rails new stack
cd stack
rm public/index.html
rails generate scaffold Member name:string email:string phone:string
rake db:migrate
rails server 
```

然后浏览到 localhost:3000/members

（假设您使用的是 rails 3）

# android - Galaxy S上的Android SurfaceView黑屏

> ID：10840229
> 
> 赞同：1
> 
> 时间：2012-05-31T19:43:02.263
> 
> 标签：android, screen, surfaceview

嗨，我想知道银河 S 的问题是什么。我同时使用 nexus S 和 Galaxy S 手机进行测试。我的整个应用程序在 Nexus one 上运行良好。但是当谈到 Galaxy SI 时，看不到任何视频。只听音频。

就像我上面所说的，这不会发生在 Nexus S 上。 Galaxy S 是否有什么东西会与 SurfaceView 混淆？有时我会在屏幕变黑之前快速闪一下视频。我的菜单等仍然显示，而不是视频。任何帮助将不胜感激。如果您知道如何解决此类问题，请提供帮助。如有需要我会添加相关代码

我知道视频正在播放，因为在其中一种统计视频播放器的方法中，我放了一个 logcat，它告诉我视频正在开始播放。

是否有可能由于某种原因在星系 S 上隐藏了表面视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:47:28.680

我不确定这是否与您有关，但我有一个类似的问题，图像资产未显示在此手机上，结果我需要使用 layout-xhdpi，即使所有其他手机默认为标准图像“布局”目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:31:29.413

我终于弄清楚了问题所在。我正在更改纵横比的一些设置。这以某种方式阻止了图像的显示。当我找到解决方案时，我会更新。

编辑：在我的视频准备好并且视频已经在 onPreparedListener 中开始之后，我在我的视频上调用 setAspectRatio。

编辑 2：解决此错误的最佳方法是在第一次调用 VideSizeChanged 侦听器后更改纵横比，因为那是在找到视频的第一个维度时。

# c# - 如何使用密码在 VB.NET（或 C#）中“随机化”一组颜色？

> ID：10840232
> 
> 赞同：2
> 
> 时间：2012-05-31T19:43:10.957
> 
> 标签：c#, vb.net, encryption, random, passwords

我有一个包含大量“颜色”的数组，我想更改这些颜色的顺序（随机），但使用密码：因此另一个用户只能使用正确的密码。如何在 Visual Basic .NET 或 C# 中做到这一点？我必须使用特定的加密引擎吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:23:15.280

这是使用密码打乱一组颜色的简单方法。

关键是将密码从字符串转换为数字。然后，您可以将该数字用作随机数生成器的种子。之后，您可以使用该随机数生成器来获得与颜色数组长度相同的排列[。](http://en.wikipedia.org/wiki/Permutation)您可以使用该排列来更改颜色的顺序并打乱数组。

解密时，如果给定相同的密码，则可以生成相同的排列并将数组解乱为原始形式。

这是该原理的一个示例，用 C# 编写：

```
int[] GetPermutation(int size, int seed)
{
    Random random = new Random(seed);
    int[] array = new int[size];
    for (int i = 0; i < size; i++)
        array[i] = i;
    for (int i = array.Length; i > 1; i--)
    {
        int j = random.Next(i);
        int tmp = array[j];
        array[j] = array[i - 1];
        array[i - 1] = tmp;
    }
    return array;
}

Color[] Encrypt(Color[] input, string password)
{
    int seed = password.GetHashCode();
    int[] perm = GetPermutation(input.Length, seed);
    Color[] encrypted = new Color[input.Length];
    for (int i = 0; i < input.Length; i++)
    {
        encrypted[perm[i]] = input[i];
    }
    return encrypted;
}

Color[] Decrypt(Color[] input, string password)
{
    int seed = password.GetHashCode();
    int[] perm = GetPermutation(input.Length, seed);
    Color[] decrypted = new Color[input.Length];
    for (int i = 0; i < input.Length; i++)
    {
        decrypted[i] = input[perm[i]];
    }
    return decrypted;
} 
```

该`GetPermutation`函数根据作为参数传递的种子生成排列。`Encrypt`and函数实际上对`Decrypt`数组进行加扰和解扰。

这是一个使用示例：

```
Color[] array = new Color[5] { Color.Red, Color.Green, Color.Blue, Color.Yellow, Color.Black };
string password = "secret";
Color[] enc = Encrypt(array, password); // will always return Blue, Green, Black, Yellow, Red for the "secret" password
Color[] dec = Decrypt(enc, password); // will return the original array: Red, Green, Blue, Yellow, Black if given the "secret" password
Color[] dec2 = Decrypt(enc, "incorrectpwd"); // will return Green, Blue, Yellow, Black, Red, which is incorrect because the password was incorrect 
```

笔记：

*   为了简单起见，我使用了该`.GetHashCode()`方法。在 .NET 框架的未来版本中，此方法可能会为同一字符串生成不同的数字
*   如果数组的长度很小，可以得到相同的加密顺序不同的密码，即使密码错误也能解密成功。例如：

    ```
    Color[] array = new Color[2] {Color.Red, Color.Green};
    Color[] enc = Encrypt(array, "one"); // will return Green, Red
    Color[] dec = Decrypt(enc, "one"); // will return Red, Green
    Color[] dec2 = Decrypt(enc, "two"); // will also return Red, Green, even though the password was incorrect 
    ```

*   如果您想使用颜色作为密码的替代品，您必须注意您会失去一些安全性，因为所有密码的空间都没有由字符、数字和符号组成的密码那么高。暴力破解这样的密码会容易得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T20:06:47.480

我猜这可能有效：

1.  让用户输入密码
2.  散列密码（C++ 中的一些示例散列[此处](http://www.cse.yorku.ca/~oz/hash.html)为 C++ 中的一些示例散列）并存储数字结果
3.  使用以散列作为种子的洗牌算法。[例如，请参见此处](https://stackoverflow.com/questions/108819/best-way-to-randomize-a-string-array-in-c-sharp)`Random`，只需使用哈希作为种子初始化对象。

同样，散列并不总是完美的（因为它可能会发生冲突），因此您可能需要找到适合您的问题的散列算法。

编辑：

以下是一些可能对您有所帮助的代码：

```
String input = "User inputted string here";
int hashSeed = input.GetHashCode();
Random rnd = new Random(hashSeed);
Color[] MyRandomColorArray = MyColorArray.OrderBy(x => rnd.Next()).ToArray(); 
```

**注意：** [GetHashCode()](http://msdn.microsoft.com/en-us/library/system.string.gethashcode.aspx)会返回不同的值，无论它是在 32 位还是 64 位系统上。

# android - 在 FragmentPageAdapter 中间插入页面

> ID：10840236
> 
> 赞同：15
> 
> 时间：2012-05-31T19:43:28.353
> 
> 标签：android, android-viewpager, android-adapter, viewpagerindicator

我正在使用 ViewPageIndicator 中的[ViewPager](https://github.com/JakeWharton/Android-ViewPagerIndicator)，我需要能够在其他片段**中间****动态**插入一个片段。

 **我尝试使用*FragmentPagerAdapter*和*FragmentStatePagerAdapter*（均来自 v4 支持代码）管理模型，第一个似乎不以任何方式管理在中间插入页面。第二个方法只有在我简单地实现**getItemPosition**总是返回 POSITION_NONE 时才有效，但这会导致我每次滑动时都完全重新创建页面。

我用 FragmentStatePagerAdapter (FSP) 观察到的问题是：

*   我从两页开始 [A][B]
*   然后我在中间 [A][C][B] 中插入 [C]。插入后我调用**notifyDataSetchange()**
*   然后 FSP 为 [A] 调用 getItemPosition 并得到 0
*   然后 FSP 为 [B] 调用 getTItemPosition 并得到 2。它说......哦，我必须销毁 [B] 并制作 mFragments.set(2, null) 然后因为它在 mFragments 数组中只有两个元素，所以它抛出IndexOutOfBoundsException

在代码中看了一点之后，似乎提供的 fragmentStatePagerAdapter 不支持在中间插入。这是正确的还是我错过了什么？

**更新：** 适配器中的插入是以逻辑方式进行的，当某个代码为真时，页面会增加一。片段创建是使用 getItem() 中的构造函数以这种方式完成的：

```
void setCondition(boolean condition) {
   this.condition=condition;
   notifyDataSetChanged();
}
public int getCount(){
    return condition?3:2;
}
public Fragment getItem(int position) {
    if(position==0) 
        return new A();
    else if(position==1)
        return condition?new C():new B();
    else if(position==2 && condition)
        return new B();
    else throw new RuntimeException("Not expected");
}
public int getItemPosition(Object object) {
    if(object instanceof A) return 0;
    else if(object instanceof B) return condition?2:1;
    else if(object instanceof C) return 1;
} 
```

**解决方案：**

正如在接受的答案中所说，关键是实施`getItemId()`。

确保至少使用[R9（2012 年 6 月）版本的 android-support library](http://developer.android.com/tools/extras/support-library.html)。因为里面加了这个方法。在此版本之前，该方法不存在，并且适配器无法正确管理插入。还要确保使用*FragmentPageAdapter*，因为 FragmentStatePagerAdapter 仍然不起作用，因为它不使用 id。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T09:46:50.933

你忘记了一种方法。
覆盖[getItemId(int position)](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html#getItemId%28int%29)从中`FragmentPagerAdapter`简单地返回位置以返回将识别片段实例的内容。

```
public long getItemId(int position) {
    switch (position) {
    case 0:
        return 0xA;
    case 1:
        return condition ? 0xC : 0xB;
    case 2:
        if (condition) {
            return 0xB;
        }
    default:
        throw new IllegalStateException("Position out of bounds");
    }
} 
```**

# ios - 我可以将 .app 二进制文件分发到在配置文件中注册的设备吗？

> ID：10840242
> 
> 赞同：0
> 
> 时间：2012-05-31T19:44:04.517
> 
> 标签：ios

我在我的开发机器上使用有效的配置文件构建了我的二进制文件。然后，即使他们的机器上没有开发证书，我是否可以将 .app 文件发送给手机已在配置文件中注册的人？他们可以通过 iTunes 加载它吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:52:17.960

为此，您需要构建一个临时分发。

这是关于如何做到这一点的一个很好的链接。

[http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/](http://diaryofacodemonkey.ruprect.com/2011/03/18/ad-hoc-app-distribution-with-xcode-4/)

您还可以像这样通过 Internet 分发临时构建。

[http://nachbaur.com/blog/building-ios-apps-for-over-the-air-adhoc-distribution](http://nachbaur.com/blog/building-ios-apps-for-over-the-air-adhoc-distribution)

# c# - 查找字符串是否包含至少 2 个与另一个相似的字符？C＃

> ID：10840243
> 
> 赞同：0
> 
> 时间：2012-05-31T19:44:05.887
> 
> 标签：c#, string, compare, contains

我需要一种方法来检查一个字符串是否包含一个或多个与另一个相似的字符。我不想找到所有包含字母“D”的字符串。例如，如果我有一个字符串“Christopher”并且想查看“Christopher”中是否包含“Chris”，我希望它返回。但是，如果我想查看“Candy”是否在字符串“Christopher”中，我不会因为它有一个共同的“C”而希望它返回。

我已经尝试过 .Contains() 方法，但无法为 2 个或更多类似字符提供该规则，我曾考虑使用正则表达式，但这可能有点过头了。相似的字母必须彼此相邻。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:51:32.083

这会查找每个 2-character-gram`s1`并在`s2`.

```
string s1 = "Chrx";
string s2 = "Christopher";
IsMatchOn2Characters(s1, s2);

static bool IsMatchOn2Characters(string a, string b)
{
    string s1 = a.ToLowerInvariant();
    string s2 = b.ToLowerInvariant();

    for (int i = 0; i < s1.Length - 1; i++)
    {
       if (s2.IndexOf(s1.Substring(i,2)) >= 0)
          return true; // match
    }

    return false; // no match
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:03:15.907

这看起来很像[最长的公共子串问题](http://en.wikipedia.org/wiki/Longest_common_substring_problem)。这可以使用 O(m*n) 中的 DP 轻松解决。

如果您不担心性能并且真的不想实现这一点，您也可以使用将 s1 的每个子字符串搜索到 s2 的蛮力解决方案。

# asp.net-mvc - SignalR——来自多个局部视图的连接？

> ID：10840247
> 
> 赞同：4
> 
> 时间：2012-05-31T19:44:23.793
> 
> 标签：asp.net-mvc, partial-views, signalr

我有一个包含 2 个部分视图的页面。每个都使用一个（不同的）集线器。所以一个使用hub1，另一个使用hub2。只要我`$.connection.hub.start()`在两个部分视图中都这样做，它就可以正常工作。但是，这会导致对服务器打开两个连接。

如果我不在`start()`其中一个部分视图中进行调用，我会遇到同步问题以及必须首先调用的异常`start()`。

有没有办法做到这一点？是`$.connection`单例吗？当集线器启动时，它是否有我可以附加的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:00:45.777

不，它没有事件。您可以随时在布局页面中调用 start。

# c# - 检查 TcpListener 是否有任何连接的客户端

> ID：10840251
> 
> 赞同：0
> 
> 时间：2012-05-31T19:44:35.163
> 
> 标签：c#, tcpclient, tcplistener

我目前正在开发 ac# 程序，我在套接字上打开一个连接并侦听客户端。

如何检查 TcpListener 当前是否连接了任何客户端。我想这样做，所以当有人关闭控制台应用程序而不是终止任何正在连接的东西时，它将等待所有连接的客户端完成，然后再退出控制台应用程序。

下面是代码：

```
TcpClient client = listener.AcceptTcpClient();
                if (client.Connected)
                {
                    library.logging(classDetails + MethodInfo.GetCurrentMethod().Name,
                        string.Format("Client Connected: {0}",((IPEndPoint)client.Client.RemoteEndPoint).Address.ToString()));
                    NetworkStream stream = client.GetStream();
                    byte[] data = new byte[client.ReceiveBufferSize];
                    int bytesRead = stream.Read(data, 0, Convert.ToInt32(client.ReceiveBufferSize));
                    string request = Encoding.ASCII.GetString(data, 0, bytesRead);
                    byte[] msg = System.Text.Encoding.ASCII.GetBytes("200 OK");
                    ProcessXML process = new ProcessXML(library, appSettings);

                    // Send back a response.
                    stream.Write(msg, 0, msg.Length);
                    process.processXML(request, ((IPEndPoint)client.Client.RemoteEndPoint).Address.ToString());
                    client.Close(); 
```

TcpListener 中是否有一种方法来获取已连接客户端的计数，或者是否必须通过将客户端添加到列表数组之类的东西来由我自己管理，然后在客户端关闭时将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:04:40.990

据我所知，TcpListener 不会在内部跟踪接受的连接——这必须由应用程序根据需要明确完成。

# jquery - jQuery使用 .on() 事件获取元素的哈希值

> ID：10840257
> 
> 赞同：13
> 
> 时间：2012-05-31T19:44:58.923
> 
> 标签：jquery, jquery-1.7

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-31T19:55:51.167

您的 a 元素没有 hash 属性。尝试获取 href 属性并使用 javascript 的 substr 和 indexOf 函数在 # 处拆分字符串

```
var href = $(this).attr("href");
var hash = href.substr(href.indexOf("#")); 
```

你也可以使用

```
$(this).prop("hash"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-12T10:32:44.687

```
$('a.js-hash').click(function() {

    // Store hash
    var hash = this.hash;

    // Using jQuery's animate() method to add smooth page scroll
    $('html, body').animate({
        scrollTop: $(hash).offset().top
    }, 1000, function() {

        // Add hash (#) to URL when done scrolling (default click behavior)
        window.location.hash = hash;
    });

    // Prevent default anchor click behavior
    return false;
}); 
```

# asp.net - 在 asp.net 中解压缩服务器上的文件

> ID：10840259
> 
> 赞同：0
> 
> 时间：2012-05-31T19:45:14.160
> 
> 标签：asp.net, zip

我希望用户能够将文件夹上传到我的服务器，但我读到这无法完成，但如果您将其更改为 .zip 文件，然后像往常一样上传 .zip 文件。我在一些地方搜索并找不到如何在 asp.net (VB) 中执行此操作。谁能引导我正确的方向？我不知道如何做到这一点，否则我会提供一些代码。我的问题：我将如何解压缩在 asp.net 中的服务器上的 .zip 文件？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:50:11.693

[这里](https://web.archive.org/web/20110129231321/http://www.ehow.com/how_7301924_unzip-file-c_.html)有使用 c# 解压缩文件的分步演练。这是一个 WinForms 示例，但在 asp.net 的代码隐藏中执行它与 WinForms 没有什么不同

不过，公平的警告是，.zip 文件可以包含任何内容，您需要防止[恶意文件执行](https://www.owasp.org/index.php/Top_10_2007-Malicious_File_Execution)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-16T05:49:44.133

此示例使用[Microsoft 文档](https://docs.microsoft.com/en-us/dotnet/api/system.io.compression.zipfile?view=netframework-4.7.2)`System.IO.Compression.ZipFile`中的, ：

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            string startPath = @"c:\example\start";
            string zipPath = @"c:\example\result.zip";
            string extractPath = @"c:\example\extract";

            ZipFile.CreateFromDirectory(startPath, zipPath);

            ZipFile.ExtractToDirectory(zipPath, extractPath);
        }
    }
} 
```

# google-chrome - Chrome 不会播放 mp3 文件？

> ID：10840260
> 
> 赞同：9
> 
> 时间：2012-05-31T19:45:26.967
> 
> 标签：google-chrome, cross-browser, get, mp3, httprequest

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T03:12:57.127

**短篇小说**，就是这个错误：[http ://code.google.com/p/chromium/issues/detail?id=110309](http://code.google.com/p/chromium/issues/detail?id=110309)

**长话短说**它的工作方式，Chrome 请求 MP3 文件，取消该请求（因为它不想下载），然后发出另一个请求流式传输。

我用 WireShark 测试了几次。有一次它没有关闭连接并继续发送数据包，从未真正响应第二个请求。在其他情况下，我什至有一个`HTTP/1.1 304 Not Modified`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T05:41:13.087

我不得不在这里发帖，因为我遇到了同样的问题。我意识到在 Chrome 中，如果您在两个不同的选项卡中提供相同的 mp3 文件，则第二个选项卡将不会加载 mp3 文件。我花了一段时间才意识到我打开了两个标签。当我关闭另一个加载罚款。我希望我能帮助一些和我犯同样愚蠢错误的人哈哈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T15:16:50.107

我认为这是一个闪存问题。至少在 Chrome 版本 32.0.1700.77 上，我相信它仍然是 32 位，而最新的 [必需] Flash 插件是 64 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T08:55:09.900

找到了解决方案：我将 apache 降级到 2.2.17 - 突然之间一切都开始起作用了。不知道为什么，但新版本的 apache 中的某些内容可能会在 chrome 上显示 mp3 播放错误。.

# c# - 在 DDD 项目中进行安全验证的正确位置

> ID：10840262
> 
> 赞同：2
> 
> 时间：2012-05-31T19:45:41.560
> 
> 标签：c#, validation, domain-driven-design

我是“使用 C# 的 DDD”世界的新手，我有一个关于在哪里确保某些验证规则的问题。例如，我的一个实体有一个闭包的概念，如果他的状态是 lock ，则不能更改其他属性。

放置此验证的最佳位置在哪里？将此规则带到应用层似乎不正确，仅禁止字段编辑和每个 setter 内部似乎违反了 DRY 原则。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:27:43.427

如果该验证规则是您的域的一部分，那么域对象[绝对是放置](http://en.wikipedia.org/wiki/Anemic_domain_model)逻辑的正确位置。

如果您担心保持代码干燥，您有几个选择：

1.  看看使用 Unity 或 Castle 进行拦截

2.  将所有 setter 设为私有，并有一个`UpdateIfNotLocked()`方法，该方法采用 an`Expression`指示要更新的属性、属性的新值，`Expression`如果对象未处于锁定状态，则创建、编译和执行 an 以设置该属性

3.  咬紧牙关，在这个班级的二传手中有警卫。

方法 1 和 2 都可能是合理的工作量/麻烦，因此在这种情况下您可能希望采取务实的方法。

# asp.net-mvc-3 - 无法将 Razor 视图页面添加为新项目 - Visual Studio 2010

> ID：10840263
> 
> 赞同：5
> 
> 时间：2012-05-31T19:45:52.967
> 
> 标签：asp.net-mvc-3, visual-studio-2010

背景：我曾经有过VS2010 Professional。升级到 VS2010 Ultimate。安装了 SP1。安装 MVC3、[MVC3 工具更新](http://www.microsoft.com/en-us/download/details.aspx?id=1491)

我目前正在开发一些自定义 Orchard 模块，出于某种原因，我没有将 Razor 视为已安装的模板。但是，如果我启动一个新的 ASP.NET MVC3 应用程序，我会看到它。有没有人遇到过这个问题。我试过卸载 MVC3 和工具更新。没运气。我有什么明显的遗漏吗？

MVC3 应用程序 - 如您所见，MVC3 视图页面 (Razor) 可用... ![在此处输入图像描述](../Images/87b76c4f56643f4789073363de73c992.png)

从果园模块： ![在此处输入图像描述](../Images/6e37f10840484449d368227d4b3c8c40.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T11:12:44.373

对我来说，编辑项目文件并`{E3E379DF-F4C6-4180-9B81-6769533ABE47}`在其他 guid 前面添加值以`<projecttypeguids>`解决问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T08:35:37.473

您是否尝试将 Razor 引擎安装为该解决方案的 NuGet 包？打开包管理器控制台（查看 - 其他窗口）并输入

```
 Install-Package RazorEngine 
```

System.Web.Mvc.dll 是否包含在参考文献中？

# android - getResources().getDrawable 返回 NULL

> ID：10840265
> 
> 赞同：2
> 
> 时间：2012-05-31T19:46:19.647
> 
> 标签：android

我一直在玩 GoogleMaps API 并偶然发现了这个错误，我试图使用 CustomItemizedOverlay 在我的地图上设置一个标记......当我尝试从我的项目资源中访问我的一张图像时，它返回 null，即使 eclipse 本身从我尝试使用的图像中建议正确的 ID：/

关于我在这里做错了什么的任何线索？

PS：我已经搜索了很多关于这种错误的帖子，但到目前为止没有一个能够解决这个问题。

```
import java.util.List;
import android.content.res.Resources;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

   public class MapHandlerActivity extends MapActivity {

     private MapView mapView;
     private static final int latitudeE6 = 37985339;
     private static final int longitudeE6 = 23716735;

     //this is me trying to hardcode the image id to check 
     //if it will be found, didnt work
     public static final int android_tiny_image=0x7f020000;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);
    setContentView(R.layout.maphandler);

    mapView = (MapView) findViewById(R.id.map_view);      
    mapView.setBuiltInZoomControls(true);

    List<Overlay> mapOverlays = mapView.getOverlays();

    //apparently returns my Resources just fine here
    Resources res = this.getResources();

    //this becomes null due to getDrawable returning null
    //Drawable drawable = this.getResources().getDrawable(android_tiny_image);
    (this is how i was originally trying to get my drawable, still returns null)Drawable drawable = this.getResources().getDrawable(R.drawable.android_tiny_image);
    CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(drawable, this);
    GeoPoint point = new GeoPoint(latitudeE6, longitudeE6);
    OverlayItem overlayItem = new OverlayItem(point, "Olá", "Estou em Athena, Grécia!");

    itemizedOverlay.addOverlay(overlayItem);
    mapOverlays.add(itemizedOverlay);

    MapController mapController = mapView.getController();

    mapController.animateTo(point);
    mapController.setZoom(6);
}
@Override
protected boolean isRouteDisplayed() {
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:53:55.003

永远不要对资源 ID 进行硬编码。在对资源进行任何更改后重新构建项目时，这可能会发生变化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T20:17:55.070

正如其他人提到的资源 id 可以改变，所以你应该使用`R.drawable.image_name`而不是**android_tiny_image**。**但是，如果您确实需要资源标识符，则可以使用public int [getIdentifier](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29) (String name, String defType, String defPackage)**从资源名称中提取它，它返回给定资源名称的资源标识符，例如：

```
int android_tiny_image = getResources().getIdentifier("image_name", "drawable","your_package_name"); 
```

# javascript - javascript表单提交返回值

> ID：10840266
> 
> 赞同：1
> 
> 时间：2012-05-31T19:46:27.480
> 
> 标签：javascript

我试图通过动态创建表单元素然后使用 submit() 函数来模拟发布请求。我不知道如何捕获服务器对发布请求的响应。我正在发出跨域发布请求。

submit() 调用之后的任何内容都不会被执行。如何捕获对 submit() 调用的响应？submit() 函数的返回值是多少？任何指向 api 文档的链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:48:14.813

`submit()`在等待从服务器发送新页面时停止当前页面上的所有执行。

如果你想在 submit() 之后做一些事情，你应该考虑使用基于 AJAX 的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:51:03.707

该脚本停止执行，因为一旦提交表单，浏览器就会退出页面（以便转到表单的“操作”页面）。表单提交后做一些事情的方法是在表单的操作页面上做响应逻辑，或者在服务器响应后使用 AJAX 保持在页面上。

# azure - 使用 Windows Azure 创建 Web Crawler

> ID：10840267
> 
> 赞同：1
> 
> 时间：2012-05-31T19:46:29.750
> 
> 标签：azure, web-crawler, azure-worker-roles

我想创建一个网络爬虫，它获取一些网站的内容并将其保存在 blob 存储中。在 Azure 上执行此操作的正确方法是什么？我应该开始一个 Worker 角色，并使用 Thread.Sleep 方法让它每天运行一次吗？

我还想知道，如果我使用这个 Worker Role，如果我创建它的两个实例，它将如何工作？我注意到使用“Compute Emulator UI”命令“Trace.WriteLine”同时在两个实例上工作，有人可以澄清这一点。

我使用 php 创建了相同的爬虫并将 cron 作业设置为每天启动一次脚本，但是抓取整个内容需要 6 个小时，这就是我想使用 Azure 的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-02T05:37:41.807

这是正确的做法，截至 2014 年 1 月，Microsoft 推出了 Azure WebJobs，您可以在其中创建项目（例如控制台），并将其作为计划任务运行（发生一次，重复）

[https://azure.microsoft.com/en-us/documentation/articles/web-sites-create-web-jobs/](https://azure.microsoft.com/en-us/documentation/articles/web-sites-create-web-jobs/) [http://www.hanselman.com/blog/IntroducingWindowsAzureWebJobs.aspx](http://www.hanselman.com/blog/IntroducingWindowsAzureWebJobs.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:55:37.753

考虑到辅助角色基本上是 Windows 2008 Server，您可以运行在本地运行的相同代码。

但请考虑，角色实例可能会重新启动的原因有多种：操作系统更新、崩溃等。在这些情况下，您可能会丢失正在完成的工作。所以......你可以通过几种方式处理这个问题：

*   队列。将消息放在命令队列上。如果是一天一次的任务，您可以在处理完上一条消息后将消息推送到队列中。请注意，您可以在消息上设置隐身超时，因此它不会出现一天。如果在处理过程中发生故障，消息将重新出现在队列中，并且不同的实例可以将其拾取。您还可以随时修改消息，以跟踪您的状态。
*   调度器。只需确保只有一个实例在运行（通过互斥锁）。一个简单的方法是尝试获得一个 blob 上的写锁（只能有一个）。

要考虑的一件事是将您的网络爬网分解为单独的任务（网址？）并将它们单独放在队列中？有了这个，您就可以扩展，在同一个实例中运行多个实例或可能的多个线程（因为网络爬取可能是一个阻塞操作，而不是 CPU 和带宽密集型操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:55:12.187

每天运行一次的单个工作者角色可能是最好的方法。不过，我不会使用线程睡眠，因为您可能想要重新启动实例，然后根据您的编程，它可能会在一天之前或一天之后开始。将任务命令作为消息放在 Azure 队列中，并在它被辅助角色拾取后将其出列，然后在 Azure 队列中添加新的任务命令一次。

# c# - UpdatePanel 中的中继器仅在第二次提交按钮后更新

> ID：10840268
> 
> 赞同：0
> 
> 时间：2012-05-31T19:46:39.827
> 
> 标签：c#, updatepanel, repeater, asp.net-4.0

我在 UpdatePanel 中有一个转发器，当我添加一些文本并提交一个按钮时，更新不会立即出现，但只有在我第二次提交按钮后才会出现。

关于为什么会发生这种情况的任何想法？

谢谢。

```
 <asp:UpdatePanel ID="updateStatus" UpdateMode="Conditional" runat="server">
        <ContentTemplate>
            <table border="">
                <tbody>
                <asp:TextBox Width="520" Height="35" style="font-size:13px;padding-left:0px;padding-right:0px;" id="txtStatusUpdate" runat="server"></asp:TextBox>
                <asp:UpdatePanel ID="updButton" runat="server" UpdateMode="Conditional">
                    <ContentTemplate>
                        <asp:Button style="font-size:25px;padding-left:0px;padding-right:0px;" ID="btnAddStatus" runat="server" Text="Add" OnClick="btnAddStatus_Click" />
                    </ContentTemplate>
                </asp:UpdatePanel>
                <asp:Repeater ID="repFilter" runat="server">
                    <ItemTemplate>
                        <tr>
                            <td class="date"><%# String.Format("{0:MM/dd/yyy}", ((Alert)Container.DataItem).CreateDate) %></td>
                            <td><%# ((Alert)Container.DataItem).Message  %></td>
                        </tr>
                    </ItemTemplate>
                </asp:Repeater>
                </tbody>
            </table>
        </ContentTemplate>      
        </asp:UpdatePanel>

protected void Page_Load(object sender, EventArgs e)
{

            _presenter = new RespondentProfilePresenter();
            _presenter.Init(this);
}

 protected void btnAddStatus_Click(object sender, EventArgs e)
        {
            StatusUpdate su = new StatusUpdate();
            su.CreateDate = DateTime.Now;
            su.AccountID =  _userSession.CurrentUser.AccountID;
            su.Status = txtStatusUpdate.Text;
            _statusRepository.SaveStatusUpdate(su);
            _alertService.AddStatusUpdateAlert(su);

            updateStatus.Update();

            //_redirector.GoToHomePage();
        }

 public void ShowAlerts(List<Alert> alerts)
        {

            repFilter.DataSource = alerts;
            repFilter.DataBind();

            if (repFilter.Items.Count == 0)
            {
                //lblMessage.Text = "You don't have any alerts yet!";
            }

        } 
```

**编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑 编辑**

我已经更新了 HTML（我已经取出了第二个 UpdatePanel），但仍然得到相同的结果 - 最近的更新直到按钮第二次提交时才会发布。

```
 <asp:UpdatePanel ID="updateStatus" UpdateMode="Conditional" runat="server">
         <ContentTemplate>
            <asp:TextBox Width="520" Height="35" style="font-size:13px;padding-left:0px;padding-right:0px;" id="txtStatusUpdate" runat="server"></asp:TextBox>
            <asp:Button style="font-size:25px;padding-left:0px;padding-right:0px;" ID="btnAddStatus" runat="server" Text="Add" OnClick="btnAddStatus_Click" />
            <table border="">
                <tbody>
                <asp:Repeater ID="repFilter" runat="server">
                    <ItemTemplate>
                        <tr>
                            <td class="date"><%# String.Format("{0:MM/dd/yyy}", ((Alert)Container.DataItem).CreateDate) %></td>
                            <td><%# ((Alert)Container.DataItem).Message  %></td>
                        </tr>
                    </ItemTemplate>
                </asp:Repeater>
                </tbody>
            </table>
        </ContentTemplate>      
        </asp:UpdatePanel>

  public class RespondentProfilePresenter
    {

     //CODE HERE....
public void Init(IRespondentProfile View)
        {
            _view = View;

            _view.SetAvatar(_accountBeingViewed.AccountID);
            _view.DisplayInfo(_accountBeingViewed);

            if (_userSession.CurrentUser != null)
                ShowDisplay();

            TogglePrivacy();
        }

private void ShowDisplay()
{

    List<Alert> _objAlerts = _alertService.GetAlertsByAccountID(_userSession.CurrentUser.AccountID);

    _view.ShowAlerts(_objAlerts);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:51:14.400

我有点难以遵循您的代码，因为我没有您的 BL 类（Alert、IREspondedProfile 等），所以我猜测一半：
在您的页面加载中，您调用 RespondentProfilePresenter 类的 Init 方法。
此方法调用 ShowDisplay，最终绑定中继器。
请注意，这发生在按下按钮的事件处理程序被触发之前，这是您更新警报列表的代码位置。
在设置中继器的数据源后添加新警报，因此您只能在每隔一个按钮单击时看到更新。您需要重新排序您的代码，使 DataBind 仅在添加新警报后发生。

# python - Python：如何从内部静态类中获取外部类变量？

> ID：10840270
> 
> 赞同：0
> 
> 时间：2012-05-31T19:46:43.027
> 
> 标签：python, nested-class

我想通过创建实例 Outer(variable) 来指定一次变量，而不是在所有静态类中使用这个变量，我应该怎么做？除了使用非静态方法并将 Outer 传递给每个内部类之外，还有其他解决方案吗？

```
class Outer():
    def __init__(self, variable):
        self.variable= variable

    class Inner1():        
        @staticmethod
        def work1():
            **print Outer.variable**

    class Inner2():        
        @staticmethod
        def work2():
            **print Outer.variable** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T04:08:47.087

如果你真的想要这样的东西，元类可能会有所帮助，例如：

```
from types import ClassType

class OuterMeta(type):
    def __new__(mcls, name, base, attr):
        ret = type.__new__(mcls, name, base, attr)
        for k, v in attr.iteritems():
            if isinstance(v, (ClassType, type)):
                v.Outer = ret
        return ret

class Outer(object):
    __metaclass__ = OuterMeta
    var = 'abc'    
    class Inner:
        def work(self):
            print self.Outer.var
        @classmethod
        def work2(cls):
            print cls.Outer.var 
```

然后

```
>>> Outer.Inner.work2()
abc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:49:00.130

不。内部类方法无法访问外部类的实例。

# android - Android HttpClient 识别为移动设备

> ID：10840272
> 
> 赞同：1
> 
> 时间：2012-05-31T19:46:52.957
> 
> 标签：android, header, httpclient

我正在使用`HttpClient`与`HttpGet`下载一些网站。他们检测到该网站是通过 http 标头从移动设备访问的，因此他们会返回相应页面的移动版本。

我想下载普通版，所以我不得不停止`HttpClient`告诉网站它是移动设备。我该怎么做？

我试过了：

```
HttpProtocolParams.setUserAgent(httpClient.getParams(), "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.2) Gecko/20100316 Firefox/3.6.2"); 
```

但是移动版本仍然加载，所以我必须要覆盖更多的标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:50:00.327

点击一个吐出 HTTP 标头的端点，然后您可以检查从您的代码发送的任何内容并覆盖任何必要的内容。我用谷歌搜索并发现了这个（除其他外）：

[http://pgl.yoyo.org/http/browser-headers.php](http://pgl.yoyo.org/http/browser-headers.php)

# debugging - 具有 ViewFinity/无管理员权限的即时调试器

> ID：10840273
> 
> 赞同：1
> 
> 时间：2012-05-31T19:46:53.323
> 
> 标签：debugging, jit

我的公司使用 ViewFinity 来提升需要管理员权限来代替任何实际管理员权限的流程。Visual Studio 已经升级，但由于某种原因，JIT 调试器没有以管理员身份运行。它是一个单独的.exe，在发生异常时启动？我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:33:12.363

IT 解决了这个问题。显然，当 JIT 调试器启动时，它会启动一个单独的 .exe（现在不记得名称），然后启动 Visual Studio。

# c++ - Why does this code leak?

> ID：10840281
> 
> 赞同：0
> 
> 时间：2012-05-31T19:47:12.063
> 
> 标签：c++, ios, memory, memory-management, memory-leaks

Well, here again, this time the compiler is showing me a memory error (leak):

> otest(18015,0xacae32c0) malloc: *** error for object 0x194e734: incorrect checksum for freed object - object was probably modified after being freed. *** set a breakpoint in malloc_error_break to debug

I'm using clang with ARC activated and STL, this is a C++ file (.cpp).

What I found: If I comment the "delete" line it runs without problems. It makes me wonder who is freeing my allocated memory (cStr).

Btw. This code takes a query string (arg=abc&arg2=asdb) and returns a map whit those values.

```
static map<string, string> getDecodedQueryString( string qs ) {
            map<string, string> r;

            qs = qs+"&";

            char key[100], value[100],  * cStr, *ptr;
            cStr = new char[ qs.length() ];
            memcpy( cStr, qs.c_str(), url.length()-1);
            cStr[qs.length()]=0;

            ptr =  strtok(cStr, "&");
            while ( ptr != NULL && sscanf( ptr, "%[^=]=%[^&]", &key, &value ) == 2) { 
                r[key]=value;
                ptr = strtok(NULL, "&");
            }
            delete [] cStr; //leaking?

            return r; 
        } 
```

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:52:03.227

The problem is likely in these lines:

```
 cStr = new char[ qs.length() ];
    memcpy( cStr, qs.c_str(), url.length()-1);
    cStr[qs.length()]=0; 
```

Even without the `memcpy()` (which may have its own problems due to the length of `url`, as I mentioned above in a comment), the `cStr[qs.length()] = 0` writes one byte past the end of the buffer.

If your compiler has `strdup()` available (it's nonstandard, but most do), you can replace this with:

```
cStr = strdup(qs.c_str());
// ...
free(cStr); 
```

This saves you from having to mess around with manually allocating bytes, copying them, null terminating in the right place, etc.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T19:51:36.287

```
Str = new char[ qs.length() ];
...
cStr[qs.length()]=0; 
```

That write is invalid, it's one past the end of `cStr`. If the allocator stored a checksum right after the allocation, and checks it at delete time, you've just stomped on it.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T20:10:59.983

Something along the lines of below will do the same thing.

```
std::stringstream ss(qs);
std::string temp;
std::string key;
std::string value;
while(std::getline(ss, temp, '&')) {
   std::stringstream equal(temp);
   std::getline(equal, key, '=');
   std::getline(equal, value, '=');
   r[key] = value;
} 
```

# git - 如何判断当前工作目录是否被 Git 忽略？

> ID：10840285
> 
> 赞同：4
> 
> 时间：2012-05-31T19:47:27.133
> 
> 标签：git, bash, directory, gitignore

我有一个 git 控制的目录（实际上是我的主目录），其中有被忽略的目录（例如垃圾空间和由其他 VCS 控制的目录）。我希望能够让我的 bash 提示符显示一个目录是否受版本控制，如果是，则由哪个 VCS 控制，但例如`git rev-parse`总是会找到最顶层的`.git`目录。

有没有办法询问 git 我是否在未跟踪的目录中？

我发现这个工作：

```
if ! git rev-parse 2>&/dev/null; then
    echo "not in git"
else
    PREFIX=$(git rev-parse --show-prefix)
    if [ -z "$PREFIX" ]; then
        echo "at git top level"
    elif [ -z $(cd $(git rev-parse --show-toplevel); \
          git ls-files -o --directory "${PREFIX%%/}")
        echo "tracked by git"
    else
        echo "untracked"
    fi
fi 
```

然而，它看起来非常老套和脆弱。有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:51:24.390

`git clean -nd`处理方法：如果是被忽略的目录，则`git clean -d`想将其删除，这样很容易检查当前目录的状态。

```
if git clean -xnd `pwd` | grep 'Would remove \./' > /dev/null; then
    echo "Inside ignored or untracked directory"
else
    echo "Inside normal directory"
fi 
```

调整`git clean`以更改有关未跟踪文件的规则。签入我的 $HOME 存储库。

注意：不要轻易尝试`git clean`，`-n`它可以清除您家中的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-13T20:47:54.097

对于*忽略*文件夹的问题，您可以使用[`git check-ignore`](https://git-scm.com/docs/git-check-ignore)并测试错误代码。

```
$ cd ~/project
$ git check-ignore tracked-folder
$ echo $?
1
$ git check-ignore ignored-folder
ignored-folder
$ echo $?
0 
```

未跟踪的文件夹似乎与已跟踪（但未被忽略）的文件夹具有相同的行为。添加一个`-v`将显示哪些规则使文件夹（或文件）被忽略。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T20:48:49.683

您可以使用[bash_completion](http://bash-completion.alioth.debian.org/)和修改后的**PROMPT_COMMAND**。它在临时测试中对我有用，但如果它破坏了你拥有这两个部分。:)

```
# Add this to your shell startup file (e.g. ~/.bashrc).
export PS1
export PROMPT_COMMAND='
    if fgrep -q "${PWD/\/home\/$LOGNAME\/}" ~/.gitignore; then
        PS1="${debian_chroot:+($debian_chroot)}\u@\h:\w$(__git_ps1) [ignored]\$ "
    else
        PS1="${debian_chroot:+($debian_chroot)}\u@\h:\w$(__git_ps1)\$ "
    fi' 
```

为了使这项工作，您需要确保所有被忽略的路径都相对于您的主目录列出，并确保在依赖它之前对其进行测试，以保护您免受任何破坏性操作，例如`rm -rf`.

# python - collections.MutableSequence 子类似乎是单例的？

> ID：10840289
> 
> 赞同：1
> 
> 时间：2012-05-31T19:47:39.727
> 
> 标签：python, abc

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

玩弄[这个答案](https://stackoverflow.com/a/5104787/688305)中找到的代码，我发现了以下奇怪之处。这是我的类声明，一个完全微不足道的 MutableSequence 子类：

```
import collections
class DescriptorList(MutableSequence):
    def __init__(self, items=[]):
        super(DescriptorList, self).__init__()
        self.l = items

    def __len__(self):
        return len(self.l)

    def __getitem_(self, index):
        return self.l[index]

    def __setitem__(self, index, value):
        self.l[index] = value

    def __delitem__(self, index):
        del self.l[index]

    def insert(self, index, value):
        self.l.insert(index, value) 
```

现在，奇怪的是：

```
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 15:22:34) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import DescriptorList
>>> b=DescriptorList()
>>> c=DescriptorList
>>> c=DescriptorList()
>>> c.append(5)
>>> b[:]
[5]
>>> b.append(6)
>>> c[:]
[5, 6]
>>> c
<DescriptorList object at 0x100ccfc50>
>>> b
<DescriptorList object at 0x100a32550> 
```

为什么这些实例似乎共享属性？

# eclipse - 从 Eclipse 安装无头运行 buckminster

> ID：10840291
> 
> 赞同：0
> 
> 时间：2012-05-31T19:47:43.173
> 
> 标签：eclipse, build, headless, buckminster

我安装了 Buckminster，它在我的 Eclipse IDE 中完美运行。现在，我想运行它的无头版本，但我想知道是否必须安装 Buckminster 的无头版本，或者是否可以从我当前的现有 Eclipse 安装中启动它。

我可以在 eclipse.exe 之后指定一个 eclipse 应用程序或产品来触发 Buckminster 无头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:12:43.723

我最近编写了关于 Buckminster 的新教程，用于构建 RCP 应用程序和 Xtext 项目：[http ://www.lorenzobettini.it/tag/buckminster/](http://www.lorenzobettini.it/tag/buckminster/)

您在这些博客文章中找到的示例还显示了一些无头运行 Buckminster 的 ant 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T00:49:09.360

Buckminster Headless 不是 IDE 发行版中的嵌入式应用程序。它实际上不能安装在 IDE 中，因为它会覆盖并解决与 ui 包的依赖关系的问题。

# javascript - Javascript原型-轮播

> ID：10840295
> 
> 赞同：0
> 
> 时间：2012-05-31T19:47:52.677
> 
> 标签：javascript, html, css, prototypejs, scriptaculous

[我在（ http://code.google.com/p/prototype-carousel/](http://code.google.com/p/prototype-carousel/) ）找到了这段代码，但不知何故我无法让他工作。有人能帮助我吗？图像加载正常，但简单的按钮无济于事。提前致谢。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Teste</title>
    <script type="text/javascript" src="prototype.js"></script>
    <script type="text/javascript" src="scriptaculous.js"></script>
    <script type="text/javascript" src="carousel.js"></script>
<style type="text/css">

#carousel-wrapper {
    width: 980px;
    height: 580px;
    overflow: hidden;
}
#carousel-content {
    width: 2500px;
}
#carousel-content .slide {
    float: left;
    width: 980px;
    height: 580px;
}

</style>
</head>

<body>
<div id="carousel-wrapper">

    <div class="controls">
       <a href="javascript:" class="carousel-control" rel="next" style="float: right">Next</a>
       <a href="javascript:" class="carousel-control" rel="prev">Previous</a>
    </div>

    <div id="carousel-content">
        <div class="slide">
            <img src="sample1.jpg" />
       </div>

        <div class="slide">
            <img src="sample2.jpg" />
        </div>

        <div class="slide">
            <img src="sample3.jpg" />
        </div>

    </div>

    <script type="text/javascript">
    new Carousel('carousel-wrapper', $$('#carousel-content .slide'), $$('a.carousel-control'),
    { wheel:false, circular:true, auto:false, effect:scroll, frequency:5, duration:1, });
    </script>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:01:18.423

您需要包含 CSS

```
#carousel-wrapper {
   width: 500px;
   height: 500px;
   overflow: hidden;
}
#carousel-content {
   width: 2500px;
}
#carousel-content .slide {
   float: left;
   width: 500px;
   height: 500px;
}​ 
```

您可能还应该将控件和`<script>`内容移到包装器之外。

这是一个工作示例：

[http://jsfiddle.net/eyweA/1/](http://jsfiddle.net/eyweA/1/)

# php - 从json数组中获取值并执行sql插入

> ID：10840297
> 
> 赞同：2
> 
> 时间：2012-05-31T19:47:57.670
> 
> 标签：php, sql, json

这是我的数组；

```
 $json = '
{
    "1":{
        "Device_ID":"a9a3346be4375a92",
        "Date":"2012-05-31",
        "Time":"15:22:59",
        "Latitude":"51.4972912",
        "Longitude":"0.1108178"
    },
    "2":{
        "Device_ID":"a9a3346be4375a92",
        "Date":"2012-05-31",
        "Time":"15:52:07",
        "Latitude":"51.4988357",
        "Longitude":"0.1222859"
    }
}'; 
```

它是这样解码的：`$array = json_decode($json);`

我现在正在尝试将上述数组中的所有 $items 插入数据库；所以我想将1内的所有数据存储在一条记录中，并在第二条记录中存储2内的所有值。

我的想法是我永远不会知道数组的大小，所以它可以有 100 个 $items。

这将如何完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:03:31.577

尝试这样的事情：

```
$item_array = json_decode($json, true);
$insert_query = "INSERT INTO items (column1,column3) VALUES ";
$i = 0;
$array_count = count($item_array);

foreach($item_array as $item) {
 $end = ($i == $array_count) ? ';' : ',';
 $insert_query .= "('".$item['date']."','".$item['device_id']."')" . $end;
 $i ++;
}

mysql_query($insert_query); 
```

生成的查询将类似于：

```
INSERT INTO items (column1,column3) VALUES ('asdf',123),('asdfe',1234); 
```

# php - 用 PHP 编写配置文件

> ID：10840308
> 
> 赞同：1
> 
> 时间：2012-05-31T19:48:54.087
> 
> 标签：php

> **可能重复：**
> [写入 .php 文件？](https://stackoverflow.com/questions/7053947/writing-to-a-php-file)

所以我有一个我从头开始创建的 CMS 的 config.php 文件。该文件的结构如下所示：

```
<?php

date_default_timezone_set( "America/Phoenix" );
define( "DB_HOST_USER", "mysql:host=localhost;dbname=db_cms" );
define( "DB_USERNAME", "username" );
define( "DB_PASSWORD", "password" );
define( "CMS_TITLE", "Sample Title");
define( "USERNAME", "cms_user");
define( "PASSWORD", "cms_password");

?> 
```

我的问题是如何写入这个文件并使用 PHP 将其保存到磁盘。帮助将不胜感激。

编辑：我看到 WordPress 使用类似的文件结构来存储用户/应用程序配置，如此[处](http://phpxref.com/xref/wordpress/wp-config-sample.php.source.html)所述。我只是想知道我是否可以更改上面的文件（config.php）并在其中存储新设置。例如，我想将 USERNAME 设置为 blog_user ( `define( "USERNAME", "blog_user");`)。是否可以只存储此更改而不重写整个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:51:30.057

我不确定您为什么要这样做，但是只要用户 PHP 以具有写入权限的身份运行，您就可以使用[file_put_contents写入任何文件：](http://php.net/manual/en/function.file-put-contents.php)

```
file_put_contents('filename', '<?php

date_default_timezone_set( "America/Phoenix" );
define( "DB_HOST_USER", "mysql:host=localhost;dbname=db_cms" );
define( "DB_USERNAME", "username" );
define( "DB_PASSWORD", "password" );
define( "CMS_TITLE", "Sample Title");
define( "USERNAME", "cms_user");
define( "PASSWORD", "cms_password");

?>
'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:55:08.810

假设您要将其保存到服务器上的磁盘，可以使用以下代码：

```
$ourFileName = "testFile.txt";
$temp = file_get_contents($ourFileName); 
```

对可以附加新数据的 $temp 进行任何必要的更改等，然后：

```
file_put_contents($ourFileName,$temp); 
```

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:55:34.520

有很多方法可以存储配置数据。试试这个 Stack Overflow：[在 PHP 中存储易于编辑的配置数据的最快方法？](https://stackoverflow.com/questions/2015715/fastest-way-to-store-easily-editable-config-data-in-php)

# ruby-on-rails - 在单击 Submit 按钮和 Rails 中的方法 create 之间会发生什么？

> ID：10840312
> 
> 赞同：0
> 
> 时间：2012-05-31T19:49:04.727
> 
> 标签：ruby-on-rails

我问这个是因为我有一个单选按钮设置为 nil 的表单：

```
 = f.radio_button :estimate_type, nil 
```

我在方法调用的开头有调试器：

```
def create
  debugger 
```

当我点击调试器时，我检查了我的参数，他们说值`on` *不是* `nil`.

进入疯狼。不知何故，这在点击时被转换了。而且我已经搜索了整个应用程序，寻找可能泄漏的 javascript 文件，或任何与“on”词非常相似的东西。我检查了我所有的基地。schema.rb 中的默认值，jquery 点击事件，模型验证，你可以命名它。任何地方都没有“开”这个词。

所以真正的问题是，有没有一种方法可以将调试器放在一个地方，如果我点击提交，调试器会出现*在*模型验证之前，然后希望参数仍然是它们在表单中的位置. 然后我可以跟踪它，看看哪里出了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:08:23.380

它与您的 JavaScript 没有任何关系。这也是我以前经历过的事情，但我不确定为什么它将 nil 转换为 'on'。我确实知道`:nil`作为符号传入会返回一个空字符串，并且只是简单地传入`false`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:23:35.960

尝试解决问题的更好方法可能是将调试器放在验证回调本身中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T21:09:33.137

与 rails 无关 - 您可以通过使用浏览器的网络检查器来验证这一点，以查看浏览器实际上正在发送参数值“on”。

通过尝试将值设置为 nil（这实际上没有意义 - 参数值始终是字符串），您完全从生成的 HTML 中抑制了 value 属性。

[标准规定](http://dev.w3.org/html5/spec/common-input-element-apis.html#dom-input-value-default-on)，在这种情况下，输入的默认值应为“on”，这就是您的浏览器提交的内容。

# google-maps-api-3 - 从谷歌地图 v3 获取标记数据

> ID：10840313
> 
> 赞同：0
> 
> 时间：2012-05-31T19:49:12.953
> 
> 标签：google-maps-api-3, google-maps-markers

我有一个带有许多标记的谷歌地图 v3，这些标记具有“类别”属性。我还有一个左侧菜单栏，用户可以从中选择所需的类别。当他/她点击所选类别时，地图上的所有标记都将被清除，并且仅加载具有所选类别的标记。

现在，我需要某种功能来搜索地图并获取加载的标记及其数据。然后数据将在右侧菜单栏中动态加载。[您可以在此链接](http://www.jedanzasve.rs/Test/mapaponuda.php)上看到我正在谈论的页面

请，任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:40:50.853

我知道这不是您希望的答案，但是没有很好的方法来查询地图并询问所有标记。在加载地图并创建标记时，您希望保留所有标记的数组或按类别保留数组并在多个数组中跟踪标记。为每种标记类型保留一个数组将使打开/关闭它们变得更加容易；我就是做这个的。希望这可以帮助 -

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:27:19.493

一种解决方案：1）创建一个标记数组。每次创建标记时，将其添加到数组中。还要为“类别”或其他东西的标记分配一个属性。

```
marker.category='foo'; 
```

2）当用户单击按钮时，查看您的标记数组并测试每个标记是否与类别匹配。如果没有，请将地图设置为空。

```
if (markers[iterator].category!='foo'){
  markers[iterator].setMap(null);
} else {markers[iterator].setMap(map);} 
```

# r - R中的堆积面积图

> ID：10840314
> 
> 赞同：1
> 
> 时间：2012-05-31T19:49:13.417
> 
> 标签：r, ggplot2

我研究了关于 SO 的其他类似问题，但似乎无法让它适用于我的数据。

我的目标是这个结果：

![期望的输出](../Images/16cf0495904db3ae93f056a690c37ee2.png)

这是我的数据框：

```
    房间指挥 MB
    Alley-10 接收 1
    Alley-11 Rx 7
    Alley-12 接收 11
    小巷 10 Tx 23
    小巷 11 Tx 17
    小巷 12 Tx 20

```

当我运行时：

```
ggplot(tp, aes(x=Room,y=MB)) + geom_area(aes(fill=factor(Direc))) 
```

我得到这个结果：

![不工作](../Images/7a2c1914c8d1eaaf91a97a0f0ff7456c.png)

我怎样才能得到这个工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:03:06.093

这不起作用，因为`Room`变量被视为一个因素，因此连续线连接没有任何意义。

绘图：

```
ggplot(tp, aes(x=1:3, y=MB, fill=Direc)) +
   geom_area() 
```

给出我认为你期望的结果。然后您可以添加：

```
ggplot(tp, aes(x=1:3, y=MB, fill=Direc)) +
   geom_area() +
   scale_x_discrete(labels=tp$Room) 
```

修复标签。

# javascript - 什么方法最适合在 javascript 中实例化其他函数的函数？

> ID：10840316
> 
> 赞同：0
> 
> 时间：2012-05-31T19:49:18.557
> 
> 标签：javascript, jquery

我一直在使用这种方法：

```
var __foo = new function(){
 var _id = null;
 function GetId(){
  return _id;
 }
 function SetId(id){
  _id = id;
 }
 return{
  GetId : GetId,
  SetId : SetId,
 };
}

var __fooFactory = function(){
 var _foos = [];
 var _autoIncFooId = 0;

 function CreateFoo(){
  var newFoo = new __foo();
  newFoo.SetId(_autoIncFooId++);
  _foos.push(newFoo);
 }

 return{
  CreateFoo : CreateFoo
 };
} 
```

我应该更多地使用原型而不是这个实现吗？这种方法有替代方法吗？（我对 jQuery 的想法持开放态度，但如果是这样，请将它们保持在 1.4.4 或注意版本合规性）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:25:58.377

Foo 构造函数：

```
function Foo(i) {
    var id = i; // private

    this.getId = function () {
        return id;
    };

    this.setId = function (i) {
        id = i;
    };
} 
```

工厂构造函数：

```
function FooFactory() {
    var i = 0,
        foos = [];

    this.createFoo = function () {
        var foo = new Foo(i++);
        foos.push(foo);
        return foo;
    };
} 
```

用法：

```
var fooFactory0 = new FooFactory(),
    foo00 = fooFactory0.createFoo(), // getId() -> 0
    foo01 = fooFactory0.createFoo(); // getId() -> 1

var fooFactory1 = new FooFactory(),
    foo10 = fooFactory1.createFoo(), // getId() -> 0
    foo11 = fooFactory1.createFoo(); // getId() -> 1 
```

如果你想要 public `id`，你可以使用原型：

```
function Foo(i) {
    this.id = i; // public
}

Foo.prototype.getId = function () {
    return this.id;
};

Foo.prototype.setId = function (i) {
    this.id = i;
}; 
```

Crockford 对[*var Foo = new function () { .. }*](http://yuiblog.com/blog/2006/11/13/javascript-we-hardly-new-ya/)的看法。

> `new`直接放在前面绝对不是一个好主意`function`。例如，`new function`在构造新对象时没有优势。通过使用`new`来调用函数，对象持有一个毫无价值的原型对象。这会浪费内存而没有抵消优势。

# xml - 包含 ∈ 的 XML 文档无效 - 如何使用 XSLT 输出？

> ID：10840317
> 
> 赞同：0
> 
> 时间：2012-05-31T19:49:29.547
> 
> 标签：xml, xslt

我有一个 XML 文档，其中一个节点包含`&isin;`如下内容：

```
<Text>&isin;</Text> 
```

它告诉我它是无效的 XML，所以我尝试了这个：

```
<Text><![CDATA[&isin;]]></Text> 
```

XML 现在有效，但是当我使用 输出 XSLT 转换中节点的内容时 `<xsl:value-of select="."/>`，它会输出以下内容： `&amp;isin;`。

我希望它简单地输出`&isin;`，因为它是对 HTML 的转换，我希望 ∈ 符号出现！我错过了任何技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:55:25.453

好的，Stack Overflow 非常有用！刚看到这个广告：

![广告](../Images/e094fdfe6fd2fbe251262c130fc7b31e.png)

...我想“哦，哦 XML 实体参考”。查找并放入`&#8712;`我的 XML 效果很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:01:52.917

像这样禁用输出转义

```
<xsl:value-of select="." disable-output-escaping="yes">... 
```

# wpf - 什么 WPF 控件实现了 Win 7 UX 指南推荐的分隔符？

> ID：10840319
> 
> 赞同：0
> 
> 时间：2012-05-31T19:49:33.370
> 
> 标签：wpf, xaml, wpf-controls

在 Windows 7 UX 指南中[关于分组框的部分](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511459.aspx)下，有建议远离分组框（在某些情况下）并使用分隔线。为这种分隔符提供了一个示例，我在下面提供了一个屏幕截图。我有两个问题。是否有实现此 UX 建议的 WPF 标头控件，以便所有应用程序看起来一致？如果不是，那么文本中说“您可以使用蚀刻矩形实现分隔符......”它们是什么意思？我知道如何绘制一个矩形，但没有看到它的“蚀刻”效果或属性。

有一个**分隔符** 控件，使用起来似乎是合乎逻辑的，但它似乎比示例更薄，并且不允许标题或添加蚀刻效果。我意识到我可以创建自己的控件，但考虑到这是一个多么基本的控件，我想知道是否有一个规范的方法可以采用。

![在此处输入图像描述](../Images/20c3cb4d2718613ed6e907d8878ee860.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:24:48.820

蚀刻实际上只是一种图形设计技术，它使用以某种方式形成对比的颜色。

您发布的屏幕截图实际上是两条 1 像素的水平线。顶线比底线暗。它们都与白色背景形成对比以提供视觉效果。您可以使用两条水平线轻松复制它。

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Class="TestingWPF.TestWindow"
    d:DesignWidth="477" d:DesignHeight="214">
    <Window.Resources>
        <Style x:Key="LineGroupBox" TargetType="{x:Type HeaderedContentControl}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type HeaderedContentControl}">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <ContentPresenter ContentSource="Header" Margin="5 0 5 0"/>
                                <Canvas Name="canvas" Grid.Column="1" Height="10">
                                    <Line X1="0" Y1="5" X2="{Binding ElementName=canvas, Path=ActualWidth}" Y2="5" Stroke="#FFACACAC" />
                                    <Line X1="0" Y1="6" X2="{Binding ElementName=canvas, Path=ActualWidth}" Y2="6" Stroke="#FFCBCBCB" />
                                </Canvas>
                            </Grid>
                            <Grid>
                                <Rectangle Fill="{TemplateBinding Background}"/>
                                <ContentPresenter ContentSource="Content" Margin="{TemplateBinding Property=Padding}"/>
                            </Grid>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <StackPanel Margin="5">
        <HeaderedContentControl Style="{StaticResource LineGroupBox}" Header="Header 1" Padding="5">
            <TextBlock>This is some content.</TextBlock>
        </HeaderedContentControl>

        <HeaderedContentControl Style="{StaticResource LineGroupBox}" Header="Header 2" Padding="5">
            <TextBlock>This is some content.</TextBlock>
        </HeaderedContentControl>
    </StackPanel>
</Window> 
```

# jsp - 是否有等效于的 JSTL EL（表达式语言）

> ID：10840321
> 
> 赞同：8
> 
> 时间：2012-05-31T19:49:47.373
> 
> 标签：jsp, jstl, el

我们使用 tomcat urlrewrite 插件来重写出站 URL 以及入站 URL。为此，您需要使用 JSTL 标记。

这对于干净的 url 和 i18n 非常有用，但是它会产生丑陋的代码，包括标签内的标签，如下所示：

```
<link href='<c:url value="/content/bootstrap/css/bootstrap.css" />' rel="stylesheet" /> 
```

或者：

```
<a href='<c:url value="/nextPage.jsp"/>' />Next Page</a> 
```

一种替代方法是使用变量，如下所示：

```
<c:url value="/nextPage.jsp" var="nextPageUrl"/>
<a href='${nextPageUrl}' />Next Page</a> 
```

这真的很干净，但很冗长。

有没有一种表达语言友好的方式来做到这一点？

我有点希望像这样：

```
<a href='${url "/nextPage.jsp}' />Next Page</a> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:56:48.557

没有什么是开箱即用的，但没有什么能阻止您编写自己的 EL 函数，因此可以使用类似的东西：

```
<a href='${myFn:url("/nextPage.jsp")}' />Next Page</a> 
```

我不觉得它比标准的 c:url 标签更具可读性，但如果它必须接受参数名称和值，那就更糟了。

有关如何定义和使用 EL 函数的信息，请参阅[http://docs.oracle.com/javaee/1.4/tutorial/doc/JSIntro7.html 。](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-26T21:33:11.853

哪里有几种方法。

**1）将基础绑定到公共片段中的变量**：

`common.jspf`：

```
<%@tag language="java" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<c:url value="/" var="base"/> 
```

或喜欢：

```
<c:set var="base" value="${pageContext.request.contextPath}"/> 
```

并**在每个页面中包含片段**：

```
<%@include file="base.jspf"%>
<script src="${base}/js/jquery.js"></script>
<link href="${base}/css/bootstrap.css" rel="stylesheet" type="text/css">
<a href="${base}/index.html">Home</a> 
```

**2）** `${pageContext.request.contextPath}`到处使用：

```
<script src="${pageContext.request.contextPath}/js/jquery.js"></script>
<link href="${pageContext.request.contextPath}/css/bootstrap.css" rel="stylesheet" type="text/css">
<a href="${pageContext.request.contextPath}/index.html">Home</a> 
```

**3)**是我最喜欢的：**添加包含属性基础的过滤器**：

`/src/java/company/project/web/filter/BaseFilter.java`

```
import java.io.IOException;
import javax.servlet.*;

/**
 * Make sane JSP, instead of:
 *   <pre>&lt;a href="&lt;c:url value='/my/path/${id}.html'/&gt;"&gt;Title&lt;/a&gt;</pre>
 * allow to use:
 *   <pre>&lt;a href="${ctx}/my/path/${id}.html"&gt;Title&lt;/a&gt;</pre>
 */
public class BaseFilter implements Filter {

    @Override
    public void init(FilterConfig fc) {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        request.setAttribute("base", request.getServletContext().getContextPath());
        chain.doFilter(request, response);
    }

    @Override
    public void destroy() { }

} 
```

并在以下**位置注册该过滤**器`web.xml`：

```
<filter>
    <filter-name>BaseFilter</filter-name>
    <filter-class>company.project.web.filter.BaseFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>BaseFilter</filter-name>
    <url-pattern>*.htm</url-pattern>
    <url-pattern>*.json</url-pattern>
</filter-mapping> 
```

并使用干净的语法（如上但不需要包含样板片段）：

```
<script src="${base}/js/jquery.js"></script>
<link href="${base}/css/bootstrap.css" rel="stylesheet" type="text/css">
<a href="${base}/index.html">Home</a> 
```

**注意**我在该过滤器中设置了其他属性，例如在 CSS/JS 的开发版本和缩小版本之间切换：

```
private String min;

@Override
public void init(FilterConfig fc) {
    min = fc.getServletContext().getInitParameter("min");
    if (min == null)
        min = fc.getInitParameter("min");
    if (min == null)
        min = "min";
}

@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    request.setAttribute("ctx", request.getServletContext().getContextPath());
    request.setAttribute("min", min);
    chain.doFilter(request, response);
} 
```

和对应的JSP代码：

```
<script src="${base}/js/jquery.${min}.js"></script>
<link href="${base}/css/bootstrap.${min}.css" rel="stylesheet" type="text/css"> 
```

初始参数`min`可以设置为contex 部署描述符中的 WAR 文件`dev`或在外部设置，如果未设置，则回退到缩小版本。`min`

**4）使用脚本**：

```
<a href="<%=request.getContextPath()%>/index.html">Home</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T16:18:20.017

我最终想出的解决方案是使用自定义标签来解决 CSS 和 JS 的问题。当然，类似的解决方案也可以应用于标签，尽管我还没有需要。

```
<my:csslink url="/css/custom.css" />
<my:script url="/script/myscript.js" /> 
```

CSS 标记看起来像这样，Javascript 的标记显然非常相似：

```
<%@tag language="java" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<%@attribute name="url" required="true" type="java.lang.String" description="the absolute (to the webapp) path of the css file"%>
<c:url var="encUrl" value='${url}' />
<link href='${encUrl}' rel='stylesheet' /> 
```

不要忘记在你的jsp中导入标签：

```
<%@ taglib prefix="my" tagdir="/WEB-INF/tags" %> 
```

在某些情况下，自定义 EL 解决方案会更简洁，但如果您想添加对其他参数或属性的支持，标签可能是要走的路。

# javascript - 从 2 个不同的点击事件触发相同的函数，带参数和不带参数

> ID：10840327
> 
> 赞同：0
> 
> 时间：2012-05-31T19:50:26.317
> 
> 标签：javascript, jquery

我有一个`myFunc`可以通过 2 种不同方式触发的功能：通过单击 div1 或 div2。

*   如果点击来自 div2，我想在调用时将一些参数传递给函数。
*   此外，在这两种情况下，我都需要引用被点击的项目：`$(this)`。

我已经尝试过这段代码，但是即使我没有点击任何东西，第二个版本（我正在传递参数的地方）也会自动触发。我做错了什么，`this`在这两种情况下我都需要作为参数传递吗？

```
$('#div1').live('click', myFunc);
$('#div2').live('click', myFunc('param1 value', 'param2 value'));

function myFunc(param1, param2){
  console.log('inside myFunc');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:53:13.413

将您的第二个`live`电话替换为：

```
$('#div2').live('click', function() {
    myFunc.call(this, 'param1 value', 'param2 value');
}); 
```

或者使用`on`jQuery 1.7+ 中的新方法，它被提议作为绑定处理程序的新标准：

```
$(document).on('click', '#div2', function() {
    myFunc.call(this, 'param1 value', 'param2 value');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:53:34.683

您的第二行正在立即执行`myFunc`。相反，将其包装在一个匿名函数中：

```
$('#div2').live('click', function() {
    myFunc.apply(this, ['param1 value', 'param2 value']);
}); 
```

您需要使用[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)或[`call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)保留原始上下文（否则`this`in`myFunc`将是全局窗口对象而不是单击的元素）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:54:22.680

我相信您最好将匿名函数作为第二个处理程序传递，并在其中根据需要调用“myFunc”。

例子：

```
$('#div1').live('click', myFunc);
$('#div2').live('click', function() {
  myFunc.call(this, 'param1 value', 'param2 value');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T20:02:59.193

不要使用[live](http://api.jquery.com/on/)，它现在已弃用。改为使用[。](http://api.jquery.com/on/)

`data`jQuery 提供了一种在事件发生时传递的简单方法。这应该是标准的方式，

```
$(document).ready(function() {  
    $("body").on("click","#div1", {param1: "param1",param2: "param2"},myFunc);
    $("body").on("click","#div2",myFunc);
    function myFunc(event){
        console.log(this.id);
        if(this.id == 'div1'){
            console.log(event.data.param1);
            console.log(event.data.param2);
        }
    }

}); 
```

**编辑：**

我不知道你的上下文或要求是什么，但我会这样编码，

```
$("body").on("click","#div1,#div2",function(){
    if(this.id == 'div1'){
         // the code for div1, use your params here.   
    }
    else{
        // the code for div2
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T19:54:02.787

你不能这样做。您必须定义一个内联函数，并从中调用 myFunc。

```
$('#div1').live('click', myFunc);
$('#div2').live('click', function(){ return myFunc('param1 value', 'param2 value'); } ); 
```

# unit-testing - 类似于 Mockito 对 Spock 的回答？

> ID：10840329
> 
> 赞同：1
> 
> 时间：2012-05-31T19:50:52.450
> 
> 标签：unit-testing, mocking, mockito, spock

在 Mockito 中，有一种很好的方法可以从与 mock 的交互中获得编程答案。例如，我们可以对 mock 进行编程以返回传递给它的方法调用的参数：

```
when(mockDao.persist(any(Entity.class)).thenAnswer(new Answer<Entity>() {

    public Entity answer(InvocationOnMock invocationOnMock) throws Throwable {
        Entity entity = (Entity) invocationOnMock.getArguments()[0];

        return entity;
    }
}); 
```

有没有办法在 Spock 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T23:08:55.640

```
mockDao.persist(_) >> { it[0] } 
```

或者，通过解构：

```
mockDao.persist(_) >> { Entity entity -> entity } 
```

# c# - 将 windows 窗体从 VS2008 转换为 VS2010

> ID：10840331
> 
> 赞同：-2
> 
> 时间：2012-05-31T19:51:17.013
> 
> 标签：c#, visual-studio-2010

所以我在这个主题上看到了很多问题，但没有一个是我得到的结果。我有一个与 VS2008 完美配合的 Windows 窗体应用程序。我们最近切换到 VS2010。我转换成功。但是，当我去运行它时，它什么也没做。

我收到了这个输出：

> 'DataVariablesManagerForm.vshost.exe'（托管 (v2.0.50727)）：已加载 'C:\Windows\assembly\GAC_64\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'DataVariablesManagerForm.vshost.exe'（托管 (v2.0.50727)）：已加载 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities\10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.dll' , 跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'DataVariablesManagerForm.vshost.exe'（托管（v2.0.50727））：已加载
> 
> 等等

任何想法表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:56:59.750

这有帮助吗？

> “经过数小时的努力，我发现如果我将目标框架从 3.5 更改为 4，它会起作用。当我再次将目标框架更改回 3.5 时，它就会停止工作。”
> 
> 据我了解，Visual Studio 2010 仅包含 .NET Framework 4。要针对早期版本的 .NET Framework，我们需要安装 .NET Framework 3.5 SP1。要下载并安装 .NET Framework 3.5 SP1，请参阅 Microsoft 下载中心网站上的 Microsoft .NET Framework 3.5 Service Pack 1。希望它可以帮助。

（来源：[http](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/0f9f399f-4467-413f-b74e-f0d5e55f4849) ://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/0f9f399f-4467-413f-b74e-f0d5e55f4849 ）

# asp.net - 在gridview的PageIndexChanging中使用什么来选择数据源

> ID：10840334
> 
> 赞同：0
> 
> 时间：2012-05-31T19:51:24.240
> 
> 标签：asp.net, gridview, page-index-changed

我有一个启用了分页的gridview。问题取决于用户单击的内容，有几种不同的方法可以为 gridview 填充数据源。

因此，如果生成了页面，我不确定如何区分 gridview 的 PageIndexChanging 方法中的数据源。

前任。

```
 /// <summary>
/// PageIndexChanging
/// </summary>
protected void grdvStats_PageIndexChanging(object sender, GridViewPageEventArgs e)
{      
    // If gridview populated via this button click...
    // else poplulated via this linkbutton
} 
```

# jquery - jQuery SimpleModal：同一页面中的 X 个不同的模态内容

> ID：10840349
> 
> 赞同：0
> 
> 时间：2012-05-31T19:52:22.727
> 
> 标签：jquery, html, simplemodal

我正在制作一个带有徽标的页面，并使用简单的模式使弹出窗口出现以获取有关单击的徽标的更多信息。

我正确地遵循了这个问题/答案，并且能够使前 2 个徽标起作用； [jQuery SimpleModal：同一页面中的两个不同的模态内容](https://stackoverflow.com/questions/5418757/jquery-simplemodal-two-different-modal-contents-in-the-same-page)

但在继续之前，我想知道是否有办法避免为每个新窗口添加新功能（#basic-modal .basic、#basic-modal .basic2 等...）。由于我有大约 30 个徽标（还有更多徽标），是否可以为所有人制作一个功能而不是每个功能一个？

页面会更清晰，而不是拥有 30 个 JS 功能..

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:00:50.237

你可以尝试做这样的事情：

**[在这里演示](http://jsfiddle.net/emSg2/2/)**

**HTML**

```
<a href="#" class="infoLink" data-target="div1">Logo 1</a>
<a href="#" class="infoLink" data-target="div2">Logo 2</a>
<a href="#" class="infoLink" data-target="div3">Logo 3</a>
<a href="#" class="infoLink" data-target="div4">Logo 4</a>
<a href="#" class="infoLink" data-target="div5">Logo 5</a>

<div id="div1" class="infoDiv">Info About Logo 1 goes here...</div>
<div id="div2" class="infoDiv">Info About Logo 2 goes here...</div>
<div id="div3" class="infoDiv">Info About Logo 3 goes here...</div>
<div id="div4" class="infoDiv">Info About Logo 4 goes here...</div>
<div id="div5" class="infoDiv">Info About Logo 5 goes here...</div> 
```

**JS**

```
$('.infoLink').bind('click', function(e){
    var $target = $('#'+$(this).data('target'));

    $target.modal({
        overlayClose:true
    });
});​ 
```

基本上每个徽标框都隐藏在页面上，jQuery 使用 data-target 属性来确定每次显示哪一个。这样您就不需要为每个徽标使用模态，只需一个模态加载基于单击的链接的信息。

祝你好运！

# javascript - 获取输入值并用“|”分隔

> ID：10840351
> 
> 赞同：1
> 
> 时间：2012-05-31T19:52:25.373
> 
> 标签：javascript, jquery

我有输入，我需要获取值并用`"|"`符号分隔。

我的输入：

![在此处输入图像描述](../Images/a9843b5f76f377d88ff3b857a6368753.png)

输出我需要的：

**00:00|00:00|00:00**

我的代码是：

（它不工作）

```
var timesArray = $('table').find('input');
var times = timesArray.val();

$('.alltimes').val(times); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:55:50.590

查看代码中的注释：

```
// Create an array to store the input values
var inputValues = [];

// Iterate over input's and store their value in the array
$('table').find('input').each(function () {
   inputValues.push(this.value);
});

// Create pipe=delimited string from array of values
var delimitedInputValues = inputValues.join("|"); 
```

**附加信息**

*   MDN - [array.join](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)
*   jQuery -[`.each()`](http://api.jquery.com/jQuery.each/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T19:56:05.457

鉴于`.val`返回每个元素的值（无论屏幕截图中的输入类型如何），您都可以使用`.map`：http: [//jsfiddle.net/RrCYD/](http://jsfiddle.net/RrCYD/)。

```
var values = $("input").map(function() {
    return $(this).val();  // map each element to its value
}).get().join("|");        // get real array and join 
```

# css - Safari 中的文本缩进错误或预期行为？

> ID：10840352
> 
> 赞同：3
> 
> 时间：2012-05-31T19:52:29.143
> 
> 标签：css, safari

我在这里放了一个我试图调试的问题的小演示：http: [//jsfiddle.net/bvDBb/7/](http://jsfiddle.net/bvDBb/7/)。

text-indent 在 Chrome、Firefox 和 Opera 中按预期（或至少按我预期的方式）工作 - 它缩进文本的第一行，然后再次执行换行以保持填充正确。

但是，当在 Safari（OS X 10.7.4 上的 5.1.7）中查看而不是换行时，它会创建一个水平滚动条并将第一行向右移动 - 并且缩进足够大，部分行得到隐藏，您必须滚动才能看到它。

这是 Safari 中的一个错误，还是我很幸运其他浏览器都支持它？

编辑：

由于基思`<p></p>`在文本周围添加 a 的想法修复了布局（至少在 Safari 上，没有在 Win 上尝试过 FF），问题仍然更像是：什么是正确的行为，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:22:54.447

您应该`text-indent`对这样的文本缩进使用实际的 CSS 属性。如：

```
<div class="contentWrapper">
  <div class="content" style="text-indent: 100px;">
    <img src="image.jpg" alt="some image" />
    <p class="indent-me">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec porta mattis lectus, in fringilla magna posuere vitae.</p>
  </div>
</div>​

p.indent-me {
  text-indent:30px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:57:16.040

尝试 `overflow-x:hidden;`在下面 `overflow-y:auto;`添加`.content`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T07:52:58.873

使用“em”而不是“px”

```
text-indent:30em; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-23T09:16:20.533

您可以尝试以下方法，它在桌面和移动 Safari 上都能完美运行。

```
input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
text-indent: 30px;
} 
```

# python - 函数定义中带有三引号的字符串文字

> ID：10840357
> 
> 赞同：60
> 
> 时间：2012-05-31T19:52:52.353
> 
> 标签：python, string, literals

我正在关注 Python 教程，有时他们会讨论函数的第一条语句如何成为字符串文字。就示例而言，这个 String Literal 似乎是用三个`"`s 完成的，在[示例中给出](http://docs.python.org/release/2.7.3/tutorial/controlflow.html#defining-functions)

```
"""Print a Fibonacci series up to n.""" 
```

根据此文档，这将主要用于创建某种自动生成的文档。

所以我想知道这里是否有人可以向我解释这些字符串文字到底是什么？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-05-31T19:56:24.197

你所说的（我认为）被称为[文档字符串](http://docs.python.org/tutorial/controlflow.html#documentation-strings)（感谢 Boud 的链接）。

```
def foo():
    """This function does absolutely nothing""" 
```

现在，如果您`help(foo)`从解释器中键入，您将看到我在函数中输入的字符串。您还可以通过以下方式访问该字符串`foo.__doc__`

当然，字符串文字就是这样——文字字符串。

```
a = "This is a string literal"  #the string on the right side is a string literal, "a" is a string variable. 
```

或者

```
foo("I'm passing this string literal to a function") 
```

它们可以通过多种方式定义：

```
'single quotes'
"double quotes"
""" triple-double quotes """  #This can contain line breaks! 
```

甚至

```
#This can contain line breaks too!  See?
''' triple-single 
    quotes ''' 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-31T20:25:09.647

好吧，看看表达式、文字和字符串的概念会很有帮助。

# 字符串、表达式和文字

在程序中，我们必须表示*各种类型*的数据。一种数据*类型*是整数；另一种类型是浮点数。

某种类型的值可以通过各种方式产生，即通过各种*表达式*。*表达式*是“创建”值的任何程序片段。例如，在下面的 Python 表达式中，*表达式* `2+2`产生值 4。赋值运算符`=`将产生的值 4 放入名为 的变量中`i`：

```
i = 2+2 
```

鉴于上面的语句，下面的*表达式*产生相同的值 4，但现在这个表达式只包含一个*变量*：

```
i 
```

*下面，我们通过算术表达式*产生一个值，然后通过一个*变量*（也是一个表达式）产生它。

然而，语言应该提供一种语法来直接产生基本值。例如，`2`上面表达式中的 检索值 2。直接产生基本值的表达式称为*literals*。两个表达式`2+2`和`4`产生相同的值，4，但第二个表达式是表示操作的非常基本的方式，由语言提供，不需要执行显式操作，所以它是一个字面量。

# 字符串文字和多行字符串

一种非常重要的数据类型是文本、一系列字母、数字和其他字符。这种类型通常称为*string*。

以这种方式，*字符串*文字是产生字符串的文字。在 Python 中，这些文字以多种方式标记（即，字符串文字有多种语法）。例如，您可以在文字的开头或结尾放置单引号或双引号：

```
"A string literal"

'Another string literal' 
```

其他方法是将三个单引号或双引号放在相同的位置。在这种情况下，文字可以跨越多行：

```
"""A single line string literal"""

"""A multiline
string literal"""

'''Another multiline
string literal''' 
```

请注意，无论您为字符串文字选择何种语法，它都不会更改其值。单引号字符串等于双引号字符串的字符相同，三引号字符串等于单引号字符串的内容相同：

```
>>> "A single line string literal" == 'A single-line string literal'
True

>>> """A single line string literal""" == "A single line string literal"
True

>>> # \n is the character that represents a new line
>>> "A multiline\nstring literal" == """A multiline
string literal""" 
True 
```

# 文档字符串以及为什么它们应该是字符串文字

文档的意思是，您可以在方法声明之后放置一个字符串文字，这个文字将用作文档 - 我们用来调用*docstring*。使用单引号或双引号字符串，或者单引号或三引号字符串都没有关系：它只需要是*文字*。

考虑以下函数：

```
def f1(value):
    "Doc for f1"
    return value + 1

def f2(value):
    """Doc for f2"""
    return value + 2 
```

现在，在你的 python 控制台中声明它们并调用`help(f1)`and `help(f2)`。请注意，字符串文字的语法无关紧要。

OTOH，您不能使用其他表达式（例如对字符串的变量或操作）来生成文档。所以下面函数第一行的字符串*不是 docstring*：

```
mydoc = "This is doc"
def f3(value):
     mydoc
     return value+3

 def f4(value):
     "This is no documentation " + "because it is concatenated"
     return value+4 
```

它应该是文字，因为编译器*是明确编写*的，以将其作为文档进行管理。但是，编译器不准备将变量、复杂表达式等作为文档进行管理，因此它会忽略它们。换句话说，这是设计使然。

# 为什么使用三引号字符串作为文档字符串？

尽管可以在文档字符串中使用任何形式的字符串文字，但您可能会认为文档通常包含很长的文本，包含多行和多段。好吧，既然它包含很多行，最好使用接受多行的文字形式，对吗？这就是为什么三引号字符串是编写文档字符串的首选（但不是强制性）方式的原因。

# 边注

实际上，您可以将字符串文字放在 Python 函数的任何位置：

```
 def flying_literals(param):
    "Oh, see, a string literal!"
    param += 2
    "Oh, see, ANOTHER string literal!"
    return param
    "the above literal is irrelevant, but this one can be still MORE IRRELEVANT" 
```

但是，只有第一行中的文字会有所不同（作为文档）。其他的是[no-ops](https://whatis.techtarget.com/definition/no-op-no-operation)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-31T19:56:11.903

字符串文字只是在源代码中按字面意思给出的字符串。它是文档字符串还是其他字符串都没有关系。有关所有详细信息，请参阅[有关字符串文字的 Python 语言文档部分](http://docs.python.org/reference/lexical_analysis.html#string-literals)，但您现在可能不需要这些详细信息。

几个例子：

```
"abc"
'Guido'
r"""Norwegian Blue""" 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-31T19:57:24.110

字符串文字是许多引用选项之一中的字符串，未分配给变量。

所以，

```
"String" # string literal
'string' # string literal
"""
  Multiline
  String
  Literal
"""
foo = "string variable" 
```

当您在一个`def`块之后立即有一个字符串文字时，它成为该方法的文档的一部分，并被称为*docstring*

```
def foo(hello):
    """This is part of the documentation for foo""" 
```

这是你将如何使用它：

```
>>> def foo(hello):
...     """This is the docstring"""
...     pass
... 
>>> foo.__doc__
'This is the docstring' 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-31T20:05:14.693

在 Python 中有几种方法可以将字符串分成多行。字符串文字就是其中之一，例如：

```
s = """Hello,
    world"""
print(s)
>>> Hello,
>>>     world #Notice, that spaces used in the literal are kept. 
```

但正如您正确注意到的那样，字符串文字通常用于内联文档

```
class MyClass(object):
    """This is my class it does this and that.

       It has some cool features and I may tell you about them below.
    """

    def my_method(self):
        """This is a brief description of my method."""

    def important_method(self):
        """Because this method is important, I'm going to tell you
           a lot about it. For example...
        """ 
```

在你问之前，在多行上拆分字符串的好方法是神圣的 Python 括号：

```
s = ('This is a very very long string. '
     'I have to split it to multiple lines. '
     'Whoa! It works!')
print(s)
>>> This is a very very long string. I have to split it to multiple lines. Whoa! It works! 
```

您可能需要它来遵循 PEP-8，其中规定“每行不得超过 80 个字符”。

快乐的 Python 黑客！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-31T19:57:14.900

它们是字符串，就像任何其他字符串一样，它们周围有成对的`'`、或。 推荐的形式是三重双引号：`"``'''``"""`

```
def some_function(s):
    """this is documentation for some_function"""
    print(s) 
```

# sql-server-2008 - 将当前日期作为参数添加到三叶草 ETL 中的查询

> ID：10840359
> 
> 赞同：0
> 
> 时间：2012-05-31T19:53:12.040
> 
> 标签：sql-server-2008, date, parameters

我有一个用于从 MSSQL Server 检索数据的查询块。该查询有一些硬编码的日期值，需要每天更改以导入每日提要。我需要自动化这个执行。我现在正在使用 cloverETL 执行查询。这是查询（它是检索共享点活动数据的查询）

```
use
DocAve_AuditDB;
DECLARE
@ParameterValue VARCHAR(100),
@SQL
VARCHAR(MAX)
SET
@SQL = STUFF((SELECT 'UNION ALL SELECT COL_ItemTypeName, COL_UserName, COL_MachineIp, COL_DocLocation, DATEADD(SECOND, COL_Occurred / 1000, ''19700101 00:00'') as Date_Occurred, COL_EventAction FROM '+ TABLE_NAME + ' WHERE DATEADD(SECOND, COL_Occurred / 1000, ''19700101 00:00'') BETWEEN '+ '''20120515'''+ 'AND' + '''20120516'''+ 'AND ' + 'COL_ItemTypeName='+ '''Document''' AS 'data()'
FROM INFORMATION_SCHEMA.TABLES
WHERE
TABLE_NAME LIKE '%2012_05%'
FOR
XML PATH('')),1,10,'')
EXEC
(@SQL) 
```

在上面的块中，我希望 TABLE_NAME LIKE 参数，即 %2012_05% 是从当前数据中检索到的变量，也是 between 子句中的日期值

> BETWEEN '+ '''20120515'''+ 'AND' + '''20120516''' 是今天的日期 1 和今天的日期

应该创建一个小的Java程序来处理这个问题，还是可以直接在查询本身中完成？如果是的话怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:52:12.017

使用[`GETDATE()`](http://msdn.microsoft.com/en-us/library/ms188383.aspx "GETDATE (事务处理-SQL)")或[`CURRENT_TIMESTAMP`](http://msdn.microsoft.com/en-us/library/ms188751.aspx "CURRENT_TIMESTAMP (Transact-SQL)")获取当前日期（和时间）。

[`CONVERT()`](http://msdn.microsoft.com/en-us/library/ms187928.aspx "转换和转换 (Transact-SQL)")与格式说明符一起使用`112`可将当前时间戳转换为格式为`YYYYMMDD`.

用于[`DATEADD()`](http://msdn.microsoft.com/en-us/library/ms186819.aspx "日期添加 (Transact-SQL)")日期/时间的计算（如减去一天）。

用于[`SUBSTRING()`](http://msdn.microsoft.com/en-us/library/ms187748.aspx "SUBSTRING (事务处理-SQL)")从格式化的日期字符串中减去部分以将它们重新排列为`%YYYY_MM%`格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T08:19:18.633

或者您可以在 DBInputTable 中使用内联 ctl 表示法：

```
SELECT 'UNION ALL SELECT COL_ItemTypeName, COL_UserName, COL_MachineIp, COL_DocLocation, DATEADD(SECOND, COL_Occurred / 1000, ''19700101 00:00'') as Date_Occurred, COL_EventAction FROM `date2str(today(), "yyyy_MM")` WHERE DATEADD(SECOND, COL_Occurred / 1000, ''19700101 00:00'') BETWEEN '+ '''`date2str(today(), "yyyyMMdd")`'''+ 'AND' + '''`date2str(dateAdd(today(),1,day), "yyyyMMdd")`'''+ 'AND ' + 'COL_ItemTypeName='+ '''Document''' AS 'data()' 
```

# ruby-on-rails-3 - 尽管“while”修饰符为假，Ruby 表达式似乎正在执行

> ID：10840361
> 
> 赞同：0
> 
> 时间：2012-05-31T19:53:21.267
> 
> 标签：ruby-on-rails-3

我的用户模型中有以下代码：

```
before_save :create_remember_token

  private
    def create_remember_token
      generate_token(:remember_token)
    end

    def generate_token(column)
      begin
        self[column] = SecureRandom.urlsafe_base64
      end while User.exists?(column => self[column])
    end 
```

这很好用，但问题是我预计它会失败。我的印象是该行：`while User.exists?(column=>self[column])`将返回**false**，因为该记录尚未保存到数据库中，因此不会设置 remember_token 。

但是新创建的用户确实有他们的 remember_token 集，我对这怎么可能有点困惑。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:06:16.877

万一其他人想知道，`begin end`表达式中的代码将在评估条件之前运行一次，除非您提供救援子句：

```
# x is not incremented as condition is evaluated first

1.9.3p194 :033 > x=0
 => 0
1.9.3p194 :034 > x+=1 while x>14
 => nil 
1.9.3p194 :035 > x
 => 0 

# x is incremented because code inside begin end is evaluated once before the condition 
1.9.3p194 :036 > begin
1.9.3p194 :037 >     x+=1
1.9.3p194 :038?>   end while x>14
 => nil 
1.9.3p194 :039 > x
 => 1 
```

# c# - 你如何用字符串中的类名制作 Page 实现的实例？

> ID：10840369
> 
> 赞同：0
> 
> 时间：2012-05-31T19:54:03.927
> 
> 标签：c#, asp.net

假设我有一个名为 myPage 的网页，它实现了 Page，但也实现了我自己的名为 myInterface 的接口。我的目标是在 myInterface 中调用一个名为 myFunction 的函数，只使用字符串中的类名。

```
public interface MyInterfac{
          Myfunction();
    }
public partial class MyPage1: Page, MyInterface{ 
          Myfunction(){ return "AAA"; }
    }
public partial class MyPage2: Page, MyInterface{ 
          Myfunction(){ return "BBB"; }
    } 
```

现在这是我可以获得的信息：

```
 string pageName1 = "MyPage1";
    string pageName2 = "MyPage2"; 
```

如何从这里得到沿线的东西：

```
 (MyInterface)MyPage1_instance.Myfunction();         //Should return AAA;
   (MyInterface)MyPage2_instance.Myfunction();         //Should return BBB; 
```

编辑：这是当我尝试创建 MyInterface 的实例但它不起作用时：

```
Type myTypeObj = Type.GetType("MyPage1");
MyInterface MyPage1_instance = (MyInterface) Activator.CreateInstance (myTypeObj); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:19:19.770

如果您正在寻找不会从您的类型的一个实例更改为下一个实例的信息，您可能应该使用一个属性。这是一个例子：

```
[System.ComponentModel.Description("aaa")]
class Page1 { }

[System.ComponentModel.Description("bbb")]
class Page2 { }

[TestClass]
public class Tests
{
    private static string GetDescription(string typeName)
    {
        var type = System.Reflection.Assembly.GetExecutingAssembly()
            .GetTypes().Single(t => t.Name == typeName);

        return type.GetCustomAttributes(false)
            .OfType<System.ComponentModel.DescriptionAttribute>()
            .Single().Description;
    }

    [TestMethod]
    public void MyTestMethod()
    {
        Assert.AreEqual("aaa", GetDescription("Page1"));
        Assert.AreEqual("bbb", GetDescription("Page2"));
    }
} 
```

一些笔记

*   环顾四周，`System.ComponentModel`看看是否已经有适合您要执行的操作的属性。我在`Description`这个例子中使用了这个属性。如果找不到合适的，请创建自己的自定义属性。
*   `Type.GetType("Qualified.Name.Of.Page1")`如果您有可用的信息，使用它可能会更好。

# jdbc - 在 DriverManager 类中使用两种 getConnection 方法中的哪一种更好

> ID：10840370
> 
> 赞同：0
> 
> 时间：2012-05-31T19:54:04.507
> 
> 标签：jdbc, coding-style

我只是想知道为什么驱动程序管理器类会提供许多重载方法来连接到数据库。他们之中有一些是

```
getConnection(String url, String user, String password) 
getConnection(String url, Properties info) 
```

其他可以在 [http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/DriverManager.html找到](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/DriverManager.html)

在每种情况下，您都需要在获得与数据库的连接之前拥有相同的信息集，但是每种`getConnection()`方法都有不同的方式来访问该信息。我见过人们使用所有这些，而没有任何偏好（据我所知）。

我的问题是，在编码风格方面是否有任何偏好，因为使用一种可能优于另一种。如果不是，这不是超载多余的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:32:51.117

从技术上讲，`getConnection(String url, Properties info)`如果您以编程方式收集驱动程序属性，那么这个会更干净。最初的想法是人们将使用 GUI 配置驱动程序，使用接口的[getPropertyInfo](http://docs.oracle.com/javase/7/docs/api/java/sql/Driver.html#getPropertyInfo%28java.lang.String,%20java.util.Properties%29)方法`Driver`收集所有可能的属性，以便在 GUI 中进行选择和配置。

然后，您只需存储（基本）JDBC url 和`.properties`包含所有驱动程序属性（或属性对象的（序列化）副本）的文件即可建立连接。我不确定是否有人曾经以这种方式使用过它。

所以最初的想法从未真正流行起来（AFAIK），人们更喜欢将所有属性的 JDBC url 存储为 URL 的一部分，并分别拥有用户名和密码，因此使用`getConnection(String url, String user, String password)`甚至可能`getConnection(String url)`在 URL 中包含用户名和密码。

随着`DataSource`JDBC 2（标准扩展）的引入，我相信甚至有人谈论过弃用并最终删除 DriverManager 以支持始终使用 DataSources（因为它们使用 JavaBeans 配置样式）；尽管这实际上从未发生过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:58:39.560

如果您只需要提供用户名和密码，则最好使用第一种形式，因为它是强类型的并且只是...更短。

如果您需要一些额外的参数，则必须使用后者，这些参数在高级 API 中没有描述。

# dgrid - 如何在编辑器 dgrid 中用 editorArgs 替换 widgetArgs

> ID：10840372
> 
> 赞同：0
> 
> 时间：2012-05-31T19:54:08.687
> 
> 标签：dgrid

在 dgrid 0.3 中，widgetArgs 被 editorArgs 替换，不能再指定为函数。我需要通过在运行时从服务器查询来在组合框中显示选项。当时创建编辑器时，我没有可用的选项。早些时候，我曾经将 widgetrArgs 指定为函数，并且每个 dbclick 编辑器都是使用通过 widgetargs 传递给构造函数的选项创建的，但现在 0.3 以后的编辑器将只创建一次，然后如何在运行时刷新选项。

谢谢，桑迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:37:27.103

您可以将 jsonrest 商店连接到您的组合框。商店将在需要时将值填充为 &。

# javascript - JavaScript 在用户结束事件时调用函数

> ID：10840380
> 
> 赞同：0
> 
> 时间：2012-05-31T19:54:35.907
> 
> 标签：javascript, javascript-events

当用户停止/结束这样的事件时，我如何调用函数：

我有一个像这样的悬停事件监听器：

```
elem.addEventListener("mouseover", function(e){
    alert("hovering");
},true); 
```

当用户停止悬停时，我想调用以下命令：

```
alert("stopped hovering"); 
```

有没有不需要使用普通鼠标移动事件的巧妙方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:56:08.530

首先，在 Javascript 中，`hover`状态被称为`mouseover`.

```
elem.addEventListener("mouseover", function(e){
    alert("hovering");
    var mouseOut = function(){
        alert('Mouse leaved');
        this.removeEventListener('mosueout',mouseOut);
    }
    this.addEventListener('mouseout',mouseOut);
},true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:55:57.467

使用 mouseout 事件。

```
elem.addEventListener("mouseout", functionName); 
```

[http://help.dottoro.com/ljtqkajb.php](http://help.dottoro.com/ljtqkajb.php)

# php - Codeigniter form_validation 创建自定义规则/过滤器

> ID：10840382
> 
> 赞同：2
> 
> 时间：2012-05-31T19:55:07.960
> 
> 标签：php, codeigniter, codeigniter-2

Codeigniters form_validation 很棒，但是我需要一个专门的自定义过滤器

> alpha 空格破折号和撇号/单引号

但是..他们在现有的集合中没有专门的，所以我想知道如何创建自己的规则/过滤器并将其添加到 form_validation。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:02:19.680

[回调是你的朋友](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks)

您只需一个自定义回调 - 并在其中放置一个执行您想要的任何规则的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:59:53.597

这是 CodeIgniter 的表单验证工具的一些文档。

[http://codeigniter.com/user_guide/libraries/form_validation.html#validationrules](http://codeigniter.com/user_guide/libraries/form_validation.html#validationrules)

# ios - 如何获取录音针的坐标以计算用户位置和针之间的距离

> ID：10840385
> 
> 赞同：1
> 
> 时间：2012-05-31T19:55:14.520
> 
> 标签：ios, xcode, annotations, location, distance

我的地图视图上有很多注释，我需要计算从用户位置到录音注释的距离。怎么可能呢？

我的注释

```
- (MKAnnotationView *)mapView:(MKMapView *)aMapView viewForAnnotation:(id <MKAnnotation>)annotation
{

    if (![annotation isKindOfClass:[MyAnnotation class]])
    {
        return nil;
    }

    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";

    MKAnnotationView *pinView = [aMapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];

    if (pinView == nil)
    {
        pinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
        pinView.canShowCallout = YES;
        pinView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeInfoLight];

    }
    else
        pinView.annotation = annotation;

    MyAnnotation *myAnn = (MyAnnotation *)annotation;
    pinView.image = [UIImage imageNamed:myAnn.icon];

    return pinView;

} 
```

计算我使用

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{

    CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:37.322998 longitude:-122.032182];

    NSLog(@"New Location:%@", newLocation);
    CLLocationDistance distance = [newLocation distanceFromLocation:pinLocation];
    NSLog(@"Distance to pin %4.0f", distance);

} 
```

**但是，当注释录音时，如何自动获取引脚坐标？**

编辑：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view 
calloutAccessoryControlTapped:(UIControl *)control
{
    CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:[(MyAnnotation*)[view annotation] coordinate].latitude longitude:[(MyAnnotation*)[view annotation] coordinate].longitude];

    CLLocation *userLocation = [[CLLocation alloc] initWithLatitude:self.mapView.userLocation.coordinate.latitude longitude:self.mapView.userLocation.coordinate.longitude];

    CLLocationDistance distance = [pinLocation distanceFromLocation:userLocation];
    NSLog(@"Distance to pin %4.0f", distance);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:14:47.280

实施[`mapView:annotationView:calloutAccessoryControlTapped:`](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView%3aannotationView%3acalloutAccessoryControlTapped%3a)，它会给你一个`MKAnnotationView`当一个针被敲击的时候。这个注释视图有一个`annotation`属性，它有一个`CLLocationCoordinate2D`. 从坐标中，制作一个`CLLocation`并与您的其他位置结合以获得使用 的距离`distanceFromLocation`。

# javascript - 在另一个脚本中访问变量

> ID：10840389
> 
> 赞同：0
> 
> 时间：2012-05-31T19:55:27.813
> 
> 标签：javascript, jsp

我有一个JS

```
function check(obj) {

for( i=0; i<obj.elements.length; i++){
    if(obj.elements[i].type=="checkbox"&&obj.elements[i].checked){
        if(confirm(onSubmitMessage)){
            return true;
        }
        else{
            return false;
        }
    }
}
alert(alertMessage);
return false;
} 
```

它是从 jsp 页面调用的，如下所示：

```
<script src="/TestAppChanged/check.js" type="text/javascript">
    var onSubmitMessage = '"<bean:message key="body.onsubmit.delete"/>"';
    var alertMessage = '"<bean:message key="body.alert.delete"/>"';
</script>
...
<form action="MyAction" method="POST"
onsubmit="return check(this)"> 
```

问题在于它没有看到这些 glabal 变量： `onSubmitMessage`和`alertMessage`. 我认为问题在于这些东西的设置方式并将其值更改为通常的字符串，`"qwe"`但它不再起作用。所以它的正文中的脚本根本看不到这些变量。问题是如何从脚本中获取它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:59:51.927

该`<script>`标签用于加载外部文件，如`<script src="path/to/file.js"></script>`或在标签内定义 JS 代码，如：

```
<script type="text/javascript">
    // Your JS code.
</script> 
```

您不能将两者都放在同一个标​​签上。因此，拆分您的代码：

```
<script src="/TestAppChanged/check.js" type="text/javascript"></script>
<script type="text/javascript">
    var onSubmitMessage = '"<bean:message key="body.onsubmit.delete"/>"';
    var alertMessage = '"<bean:message key="body.alert.delete"/>"';
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:59:19.560

当浏览器不支持 javascript 时，解析 <script src=""></script> 之间的块。您需要另一个 <script> 块，并将其放入您的变量中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:58:47.717

它看不到全局变量，因为您在脚本标记中声明了源。您应该删除全局变量并在函数代码之前，在js页面中声明它们，然后像​​这样简单地包含页面：

```
<script src="/TestAppChanged/check.js" type="text/javascript"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T19:58:53.207

您应该有两个脚本标签。一为变量。然后是它下面的另一个，链接到您的 javascript 文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T19:59:34.257

您可以在标签中设置内容或设置 src 属性。它应该是：

```
<script type="text/javascript">
    var onSubmitMessage = '"<bean:message key="body.onsubmit.delete"/>"';
    var alertMessage = '"<bean:message key="body.alert.delete"/>"';
</script>
<script src="/TestAppChanged/check.js" type="text/javascript"></script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-31T20:00:23.560

不要在标签中混合 src 属性和代码。使用两个标签。

# python - 没有 time.sleep() 的 Python 循环延迟

> ID：10840395
> 
> 赞同：5
> 
> 时间：2012-05-31T19:55:45.843
> 
> 标签：python, loops, delay

在 MMO 游戏客户端中，我需要创建一个循环，该循环将在 30 秒内循环 30 次（每秒 1 次）。令我最失望的是，我发现我不能`time.sleep()`在循环内使用，因为这会导致游戏在循环期间冻结。

循环本身非常简单，唯一的困难是如何延迟它。

```
limit = 31
while limit > 0 :
  print "%s seconds remaining" % (limit)
  limit = limit -1 
```

python 库作为 .pyc 文件存在于客户端中，位于单独的文件夹中，我希望我可以避免弄乱它们。你认为有什么办法可以解决这个延迟还是死路一条？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:01:51.703

你的游戏有一个主循环。（是的，它确实。）

每次通过循环检查状态、移动玩家、重绘屏幕等时，都会检查计时器上的剩余时间。如果至少 1 秒过去了，你打印出你的“剩余秒数”俏皮话。如果至少 30 秒过去了，无论你的动作是什么，你都会触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:59:24.907

除非您愿意失去精度，否则您无法在没有阻塞或线程的情况下做到这一点......

我建议有时像这样，但线程是正确的方法......

```
import time

counter = 31
start = time.time()
while True:
    ### Do other stuff, it won't be blocked
    time.sleep(0.1)
    print "looping..."

    ### When 1 sec or more has elapsed...
    if time.time() - start > 1:
        start = time.time()
        counter = counter - 1

        ### This will be updated once per second
        print "%s seconds remaining" % counter

        ### Countdown finished, ending loop
        if counter <= 0:
            break 
```

甚至...

```
import time

max = 31
start = time.time()
while True:
    ### Do other stuff, it won't be blocked
    time.sleep(0.1)
    print "looping..."

    ### This will be updated every loop
    remaining = max + start - time.time()
    print "%s seconds remaining" % int(remaining)

    ### Countdown finished, ending loop
    if remaining <= 0:
        break 
```

# .htaccess - 在 htaccess 中使用子目录作为子域

> ID：10840400
> 
> 赞同：0
> 
> 时间：2012-05-31T19:55:58.577
> 
> 标签：.htaccess, subdomain, subdirectory

我试图将我网站上的子文件夹指向子域。例如，我想把 www.domain.com/test 变成 test.domain.com。我已经对 htaccess 进行了一些重写，这些重写是我们在站点构建过程中早期使用的，我希望能够添加这一行而不会干扰这些。

我已经尝试了几十个我在网上找到的这个问题的答案，但它们似乎都不起作用，我不确定这是因为我对这种语言缺乏了解还是与其他东西有冲突。

我尝试的最新线路是：

```
RewriteCond %{HTTP_HOST} !^www.domain.tv 
RewriteCond %{HTTP_HOST} ([^.]+).domain.tv 
RewriteRule ^(.*)$ /var/www/www.domain.tv/test%1 
```

这是我当前的 htaccess 文件：

```
 Options +FollowSymLinks

RewriteEngine On

RewriteBase /

#RewriteCond %{HTTP_HOST} !www\.domain\.tv$ [NC]
#RewriteCond %{HTTP_HOST} ^(.+)\.domain\.tv$ [NC]
#RewriteRule .* index.php?option=com_contushdvideoshare&view=player&Itemid=33 [L]

RewriteCond %{REQUEST_URI} ^/album\/t\/([a-zA-Z0-9]+) [NC]
RewriteRule ^album/t/(.*) index.php?option=com_usermenu&task=directdownload&id=$1&type=one$

RewriteCond %{REQUEST_URI} ^/album\/([a-zA-Z0-9]+) [NC]
RewriteRule ^album/(.*) index.php?option=com_usermenu&task=directdownload&id=$1 [L]

RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule .* index.php [F]

#RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

RewriteCond %{REQUEST_URI} !^/index\.php
RewriteCond %{REQUEST_URI} (/[^.]*|\.(php|html?|feed|pdf|raw))$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:12:07.293

尝试：

```
RewriteCond %{HTTP_HOST} !^www.domain.tv [NC]
RewriteCond %{HTTP_HOST} ([^\.]+).domain.tv [NC]
RewriteRule ^(.*)$ %1/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:05:07.707

子域并不那么容易设置。您需要先配置您的服务器。更多信息在这里：[使用 .htaccess (PHP) 动态创建子域](https://stackoverflow.com/questions/586129/create-subdomains-on-the-fly-with-htaccess-php)

# java - 错误“java.lang.NumberFormatException：对于输入字符串：”“”将 JSON 数组传递给 Spring-MVC

> ID：10840404
> 
> 赞同：4
> 
> 时间：2012-05-31T19:56:07.080
> 
> 标签：java, ajax, json, spring, spring-mvc

我收到错误“java.lang.NumberFormatException：对于输入字符串：“””将 JSON 数组传递给 Spring-MVC ..

这是我的 JSON JavaScript 调用：

```
function doAjaxPost() {  

      var inData = {};

      inData.nameList = ['kurt','johnathan'];
      inData.educationList = ['GSM','HardKnocks'];

      htmlStr = JSON.stringify(inData);
      alert(htmlStr);

      $.post( contexPath + "/AddUser.htm", inData, function(outData, outStatus){
          alert(outStatus);

      });
}; 
```

这是我在 Java 中的 bean：

```
public class User {

    private String name = null;
    private String education = null;

    private List nameList = new ArrayList();
    private List educationList = new ArrayList();

    public List getNameList() {
        return nameList;
    }

    public List getEducationList() {
        return educationList;
    }

    public void setNameList(List nameList) {
        this.nameList = nameList;
    }

    public void setEducationList(List educationList) {
        this.educationList = educationList;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getEducation() {
        return education;
    }
    public void setEducation(String education) {
        this.education = education;
    }

} 
```

这是我的 Java 控制器 Spring-MVC：

```
@RequestMapping(value="/AddUser.htm",method=RequestMethod.POST)
    public @ResponseBody JsonResponse addUser(@ModelAttribute(value="user") User user, BindingResult result ){
        JsonResponse res = new JsonResponse();

        if(!result.hasErrors()){
            res.setStatus("SUCCESS");
            res.setResult(userList);
        }else{
            res.setStatus("FAIL");
            res.setResult(result.getAllErrors());
        }

        return res;
    } 
```

以下是我得到的错误：

```
SEVERE: Servlet.service() for servlet Spring MVC Dispatcher Servlet threw exception
java.lang.NumberFormatException: For input string: ""
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:493)
    at java.lang.Integer.parseInt(Integer.java:514)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:952)
    at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:896)
    at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
    at org.springframework.validation.DataBinder.applyPropertyValues(DataBinder.java:673)
    at org.springframework.validation.DataBinder.doBind(DataBinder.java:569)
    at org.springframework.web.bind.WebDataBinder.doBind(WebDataBinder.java:190)
    at org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:110)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker.doBind(AnnotationMethodHandlerAdapter.java:712)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doBind(HandlerMethodInvoker.java:804)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:358)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:170)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:421)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:774)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:41:30.410

我很确定您的 bean 中缺少泛型是问题所在：

```
private List nameList = new ArrayList();
private List educationList = new ArrayList(); 
```

它应该是：

```
private List<String> nameList = new ArrayList<String>();
private List<String> educationList = new ArrayList<String>();
// change getters and setters also 
```

JSON 映射器将查看字段的通用类型以决定它是否可以映射值。

# grails - 具有教育/信息提交历史的非平凡 TDD grails 项目示例

> ID：10840406
> 
> 赞同：3
> 
> 时间：2012-05-31T19:56:09.930
> 
> 标签：grails, tdd

我用 grails 做了一些很酷的东西，但我仍然无法专注于测试。是否有一个我可以遵循的具有提交历史的公共项目显示了良好的 TDD 实践？理想情况下，提交一些失败的测试，然后提交一些通过的代码，冲洗并重复。

幻想偏好：使用 git，使用 spock 或 easyb 或 cucumber 完成测试，有一些有趣/难以测试的插件，如邮件插件或 rabbitMQ。

# javascript - 如何防止下拉列表在 DropDownList 中打开？

> ID：10840415
> 
> 赞同：9
> 
> 时间：2012-05-31T19:56:58.727
> 
> 标签：javascript, jquery, asp.net, drop-down-menu, internet-explorer-7

我有一个自定义表，我想将其用作 DropDown 部分作为`DropDownList`.

![桌子](../Images/7fa32a344e7c9a59ca49d9ab7ea8906d.png)

理想情况下，当用户单击 a 时`DropDownList`，它应该显示自定义表格而不是通常的下拉菜单。我认为在不禁用 DropDownList 控件的情况下阻止下拉菜单打开很容易，但情况似乎并非如此。

有没有一种简单的方法可以防止`DropDownList`打开而不禁用它？

**编辑：**这必须适用于嵌入式 IE 7 Web 浏览器，并且`e.preventDefault()`不适用于该浏览器版本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T12:12:09.793

你可以这样做：

基本上，我在下拉菜单上放置了一个不可见的 div 来阻止它，您可以使用遮罩 div 的 onclick 来处理点击。

编辑：我已经更新了这个[http://jsfiddle.net/EdM7B/1/](http://jsfiddle.net/EdM7B/1/)

```
<div id='mask' onclick='alert("clicked");' style='width:200px; height:20px; position:absolute; background:white;filter:alpha(opacity=0);'></div>
<select id='selectList' show=1 style='width:200px; height:20px;'>
    <option>Test</option>
</select> 
```

我不得不使用一种 hack，因为 IE 似乎无法正确渲染没有设置背景颜色的 div，因此它无法正常工作。这适用于我的 IE7。

如果你想让它在所有浏览器中工作，你需要添加 chrome/firefox opacity CSS 或者有一些 IE only CSS 来应用背景颜色。

我认为由于它位于上方的方式，不透明度实际上无法正常工作，因为元素是绝对定位的，无论哪种方式似乎都有效。我最初将它设置为不透明度 1，但这对我来说听起来不对，因为我们希望它不可见，所以我将其更改为 0。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T13:01:32.087

`event.preventDefault`可以通过在事件中使用 jQuery 来停止显示下拉列表`mousedown`（演示：http: [//jsfiddle.net/RCCKj](http://jsfiddle.net/RCCKj)）。

另请参阅此相关问题：[stop chrome to show dropdown list when click a select](https://stackoverflow.com/questions/8062138/stop-chrome-to-show-dropdown-list-when-click-a-select)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T22:24:39.297

把它放在这样的div中：

```
 <div id="dllDiv" style="width:200px;height:200px;">
        < asp:DropDownList ID="DropDownList1" runat="server" style="z-index:-1000px;pointer-events:none;">
        < /asp:DropDownList>
    </div> 
```

您应该将 css 属性指针事件设置为无，然后您可以显示隐藏在 div 中的表格或使用 ajax 加载它，如下所示：

```
 (document).ready(function() {
        $("#dllDiv").click(function() {
            alert('adasd');
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T21:06:41.633

您是否考虑过为此使用[大型菜单](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)，您可以在下拉部分中放置任何您想要的东西 - 例如您的桌子

# c# - 没有排序顺序的 SQL Server 唯一约束

> ID：10840420
> 
> 赞同：2
> 
> 时间：2012-05-31T19:57:12.790
> 
> 标签：c#, sql-server, database, unique-constraint

在 SQL Server 数据库中，我创建了一个唯一约束以确保其中一个表只包含唯一的值对。

现在的问题是我得到的记录顺序不同。记录已排序，但我希望它们按原始顺序排列，就像它们存在于表中一样，无需任何排序。

我到处检查过，但找不到没有排序顺序来创建唯一约束的方法。这完全支持吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T20:08:54.233

> 记录已排序，但我希望它们按原始顺序排列，就像它们存在于表中一样，无需任何排序。

啊，老排序问题 - 初学者的 SQL。

TABLES 有一个排序顺序，即聚集索引的顺序。缺少未定义的奇数。

结果*没有顺序，除非定义*。如果 SQL 认为它可以更好地处理查询，它可以更改顺序。这是基本的 - 您处理数据集，并且数据集本身没有排序。

所以，如果你想要一个订单，要求它。

> 但无法找到一种方法来创建没有排序顺序的唯一约束。

为什么你需要一个唯一约束的订单？唯一索引就足够了，或者？我不会使唯一性成为约束，而是将 - 标准 - 字段上的唯一索引。特别是因为索引有利于 - 验证它们是唯一的，因此无论如何都需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T20:11:49.270

如果您想以“原始”顺序获取记录 - 您应该使用任何标记此顺序的字段，例如身份序列/主键（可能是您可以使用的最佳选项），或创建日期或其他任何内容. [仅当您使用聚集索引](http://www.mssqltips.com/sqlservertip/1254/clustered-tables-vs-heap-tables/)
时， 您的表中的行（实际上，在文件中）实际上是按特定顺序排序的，但是，即使在这种情况下，也不能保证在您选择时会保留此顺序或任何顺序该表中的行，没有任何 order by 子句。 通常，对于聚簇表，您将按照聚簇索引的顺序获得结果，但这不是您可以依赖的，并且无论顺序很重要，您都应该在查询中提供 ORDER BY。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-01T18:06:07.203

使用 ROW_NUMBER，您可以在不使用 sort_order 的情况下获取订单的存储方式。我希望它有所帮助。

# objective-c - 忘记将故事板文件放入 .gitignore

> ID：10840421
> 
> 赞同：0
> 
> 时间：2012-05-31T19:57:14.520
> 
> 标签：objective-c, git, ios5, version-control

我已经看到了一些与此类似的问题，但无法弄清楚他们需要什么。

我为我正在处理的 iphone 项目设置了一个 git 存储库。我忘记将我的故事板相关文件放入 .gitignore。我现在已经工作了很长时间，现在意识到我的错误。

大多数关于此的帖子都说您需要从存储库中手动删除它们，然后将情节提要文件添加到 .gitignore。我真的必须经历并做：

rm 忽略文件1 忽略​​文件2 等等...？

是不是有某种方法可以自动完成所有这些（我相信它们都在同一个目录中）？我对终端不是很熟悉，所以任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:02:19.917

您可以`git rm --cached <files>`像使用通常的 unix`rm`命令一样使用。这会将文件留在原处，但会将它们从存储库中删除。

# objective-c - 如何清除 NSManagedObjectContext 中的选定对象

> ID：10840427
> 
> 赞同：1
> 
> 时间：2012-05-31T19:57:32.377
> 
> 标签：objective-c, ios, xcode

我有以下代码当前清除我的 NSManagedObjectContext 中的所有对象：

```
- (void)clearObjectList:(NSString *)identifier
{
    // TODO: Delete any entries with the identifier at the start of the object's name
    NSLog(@"Clearing the URL list...");

    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSFetchRequest * fetch = [[NSFetchRequest alloc] init];
    [fetch setEntity:[NSEntityDescription entityForName:@"URL" inManagedObjectContext:context]];
    NSArray * result = [context executeFetchRequest:fetch error:nil];
    for (id basket in result)
    {
        // Code here to check if we should delete this object
        [context deleteObject:basket];
    }

    NSError *error = nil;
    if (![context save:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        //abort();
    }
} 
```

我对 URL 的数据模型是：

```
dateAccessed: Date
        name: String
         url: String 
```

我想访问 objects 键`name`以确定是否应该将其删除。我如何访问这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:08:37.883

尝试这个：

```
for(URL *basket in result)
{
    if([basket.name isEqualToString:identifier])
        [context deleteObject:basket];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:06:49.023

循环遍历结果时，您知道您将得到的只是`NSManagedObject`s。或者，如果你已经创建了 NSManagedObject 子类，你将只能得到`URL`对象。因此，您可以替换`id`为`NSManagedObject *`或`URL *`在您的 for 循环中。

如果您确实创建了我建议的子类，您可以访问`name`with dot notation: `basket.name`。如果你没有，你可以通过调用来访问它`[basket valueForKey:@"name"]`。

# ruby-on-rails - Rails：capture 和 content_for 有什么区别？

> ID：10840429
> 
> 赞同：3
> 
> 时间：2012-05-31T19:57:35.220
> 
> 标签：ruby-on-rails

在 Rails 3.2 [CaptureHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html)`capture`中，使用and有什么区别`content_for`，为什么我会选择其中一个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T21:51:51.890

如果您查看 content_for 源，它会在内部调用 capture：

```
def content_for(name, content = nil, &block)
  if content || block_given?
    content = capture(&block) if block_given?
    @view_flow.append(name, content) if content
    nil
  else
    @view_flow.get(name)
  end
end 
```

因此，通过阅读该方法，看起来 content_for 的主要优点是它可以多次调用相同命名内容的多个块，并且每个额外的调用只会附加到已经呈现的任何内容上。而在捕获的情况下，如果您调用：

```
<% @greeting = capture do %>
  Hello
<% end %> 
```

然后稍后调用：

```
<% @greeting = capture do %>
  Or, in espanol, Hola
<% end %> 
```

然后最后一部分是唯一将被捕获的部分，“Hello”将被丢弃。然而，在 content_for 中执行类似的操作将导致第二个调用附加到“Hello”。

# java - 在数组上执行笛卡尔积

> ID：10840430
> 
> 赞同：5
> 
> 时间：2012-05-31T19:57:36.437
> 
> 标签：java, algorithm, math, multiplication

我有兴趣在 n 个数组上执行笛卡尔积。如果我提前知道数组的数量，我可以编写代码。例如，给定 2 个数组：

```
int[] a = new int[]{1,2,3};
int[] b = new int[]{1,2,3};

for(int i=0; i<=a.length; i++){
    for(int j=0; j<=b.length; j++){
        System.out.println(a[i]*b[j]);
    }
} 
```

问题是在运行时，我不知道数组的数量。我可能有 2 个数组，或者我可能有 100 个数组。有没有办法我可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T20:05:07.613

解决此问题的一种方法是通过注意以下几点来不断减少数组的数量

> A [0] × A [1] × A [2] = (A [0] × A [1] ) × A [2]

因此，您可以编写一个像这样的函数，它计算两个数组的笛卡尔积：

```
int[] cartesianProduct(int[] one, int[] two) {
    int[] result = new int[one.length * two.length];
    int index = 0;

    for (int v1: one) {
        for (int v2: two) {
            result[index] = v1 * v2;
            index++;
        }
    }

    return result;
} 
```

现在，您可以使用此函数将数组对组合成一个包含整个笛卡尔积的数组。在伪代码中：

```
While there is more than one array left:
    Remove two arrays.
    Compute their Cartesian product.
    Add that array back into the list.
Output the last array. 
```

而且，作为实际的 Java：

```
Queue<int[]> worklist;
/* fill the worklist with your arrays; error if there are no arrays. */

while (worklist.size() > 1) {
    int[] first = worklist.remove();
    int[] second = worklist.remove();
    worklist.add(cartesianProduct(first, second));
}

/* Obtain the result. */
int[] result = worklist.remove(); 
```

这种方法的问题在于它使用的内存与您生成的元素总数成正比。这可能是一个非常大的数字！如果您只想一次打印所有值而不存储它们，则有一种更有效的方法。这个想法是，您可以开始列出不同数组中所有可能的索引组合，然后将这些位置的值相乘。一种方法是维护一个“索引数组”，说明下一个要查看的索引是什么。您可以通过“增加”数组来从一个索引移动到下一个索引，就像增加一个数字一样。这是一些代码：

```
int[] indexArray = new int[arrays.length];
mainLoop: while (true) {
    /* Compute this entry. */
    int result = 1;
    for (int i = 0; i < arrays.length; i++) {
        result *= arrays[i][indexArray[i]]
    }
    System.out.println(result);

    /* Increment the index array. */
    int index = 0;
    while (true) {
        /* See if we can bump this array index to the next value.  If so, great!
         * We're done.
         */
        indexArray[index]++;
        if (indexArray[index] < arrays[i].length) break;

        /* Otherwise, overflow has occurred.  If this is the very last array, we're
         * done.
         */
        indexArray[index] = 0;
        index ++;

        if (index == indexArray.length) break mainLoop;
    }
} 
```

这仅使用 O(L) 内存，其中 L 是您拥有的数组的数量，但会产生可能呈指数级增长的许多值。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:03:44.267

您可以使用递归而不是迭代 - 但请注意 - 可能会发生 StackOverflowException。

# android - 从带有额外数据的 NFC 标签启动 Android 应用程序

> ID：10840439
> 
> 赞同：2
> 
> 时间：2012-05-31T19:58:25.887
> 
> 标签：android, android-intent, nfc

我只需将手机放在 NFC 标签上即可启动我的应用程序。但我想把这个想法更进一步。想象一个带有两个 NFC 标签的简单时间跟踪应用程序。第一个将启动（并下载）应用程序并注册开始时间。另一个也将启动（并下载）应用程序，但注册一个停止时间。

我想解决的问题是我不想让我的手机知道这些标签。应用程序不需要编写标签 ID 列表并知道与每个 ID 相关联的操作。标签应携带在手机上使用正确参数启动操作所需的信息。

有没有关于如何完成这个场景的信息？我已经安装了“nfc-eclipse-plugin”，但不明白如何使用它来实现我的目标，更不用说如何让我的应用程序读取额外的数据。

提前感谢罗兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:39:13.543

您的标签应该能够存储 NDEF 消息。此类消息由 Android 自动读出并以 Intent 的形式传递给您的应用程序。自动安装和/或启动您的应用程序可以通过在您的标签中添加[Android 应用程序记录来完成。](http://developer.android.com/guide/topics/nfc/nfc.html#aar)任何附加信息（“开始”或“停止”指示）都可以存储在专有记录中。

您可能希望将 AAR 作为 NDEF 消息的最后一条记录，因为它会被 Android 自动检测并采取行动，但仅从 ICS 开始受支持。要使用 Gingerbread 进行自动安装，您可以将附加的 URI 记录或带有 Google Play 商店链接的 SmartPoster 记录作为消息的第一条记录。然后，您的应用程序应针对此 URI 过滤 ( [ACTION_NDEF_DISCOVERED](http://developer.android.com/guide/topics/nfc/nfc.html#ndef-disc) )，因此它也会在 Gingerbread 上自动启动。

# database - CakePHP 1.3 “缺少控制器”错误 - 控制器存在

> ID：10840442
> 
> 赞同：1
> 
> 时间：2012-05-31T19:58:46.000
> 
> 标签：database, cakephp, model, freeze

我的 CakePHP 1.3 应用程序有问题，我不确定是代码问题还是数据库问题。

我的一个控制器中有一个非常简单的功能，每当我向该控制器添加查询部分时，我都会收到以下（令人愤怒且完全无用的）错误消息：

```
Missing Controller
Error: InternalError.htmlController could not be found.

Error: Create the class InternalError.htmlController below in file: 
app/controllers/internal_error.html_controller.php 
```

这是模型 ForecastZones

```
class ForecastZone extends AppModel {
    var $name = 'ForecastZone';
    var $displayField = 'name';
    //The Associations below have been created with all possible keys, those that are not needed can be removed

    var $belongsTo = array(
        'State' => array(
            'className' => 'State',
            'foreignKey' => 'state_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

    var $hasMany = array(
        'ForecastZonePoly' => array(
            'className' => 'ForecastZonePoly',
            'foreignKey' => 'forecast_zone_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );

} 
```

这是莫名其妙失败的控制器功能：

```
 function poly($id = null) {
    if (!$id) {
        $this->Session->setFlash(__('Invalid forecast zone', true));
        $this->redirect(array('action' => 'index'));
    }
    $this->layout = false;

    $result = $this->ForecastZone->query("SELECT coords FROM forecast_zone_polies WHERE forecast_zone_id = $id;");
    $this->set('forecastZone', $result);
} 
```

每当我调用此控制器操作时，CakePHP 史诗都会失败。它挂了很长时间......然后没有告诉我有用的东西，比如“数据库查询花费了太长时间”或“模型关联损坏”或类似的东西......它只是放弃并给了我这个完整的 BS 错误消息.

这不是路径问题，路径是正确的。如果我删除 $result 变量，一切正常，我会收到相应的“forecastZone is not set”错误消息。这个问题的症结似乎是一个需要永远的查询，然后 Cake 没有正确报告错误消息。

请帮我解决这个问题。非常令人沮丧......无论如何都不是“蛋糕”。

编辑：我想补充一下我最初一直在使用

```
$this->ForecastZone->read(null,$id); 
```

为了获取数据，但查询的挂起和失败一直在发生，所以我切换到原始查询，希望这可能会改变一些事情。

编辑2：

我尝试了更多的东西：将此行添加到我的控制器顶部：

```
var $uses = array('ForecastZone','ForecastZonePolies'); 
```

然后尝试以“正确的方式”做事情仍然失败。啊！

```
$result = $this->ForecastZonePolies->find('all',array('conditions' => array('ForecastZonePolies.forecast_zone_id' => $id)));

$result = $this->ForecastZone->ForecastZonePolies->find('all',array('conditions' => array('ForecastZonePolies.forecast_zone_id' => $id))); 
```

这些都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:01:40.643

首先，我会检查 app/tmp/logs/error.log 和 app/tmp/logs/debug.log。如果这确实是一个内部错误，您应该在那里获取详细信息。

从奇怪的影响来看，我建议您将 Router::parseExtensions('html') 放在您的 app/config/routes.php 中，以确保这不是重定向问题。

# c# - 接受来自防火墙后网络外部的连接

> ID：10840454
> 
> 赞同：0
> 
> 时间：2012-05-31T19:59:59.777
> 
> 标签：c#, networking, tcp, firewall, tcplistener

目前我已经编写了一个应用程序（一种通信应用程序），使用 TcpListener-TcpClient 将客户端相互连接并连接到服务器。（客户端应该能够相互连接并同时连接到服务器）。

问题是用户拥有的防火墙应用程序。他们的防火墙应用程序完全阻止来自网络外部的传入连接。

（我尝试使用带有 CreateObject("HNetCfg.FwMgr") 的 vbscript 中的 Windows 防火墙配置脚本来解决此问题，但它不适用于防火墙应用程序！）

我应该怎么办？是否有任何解决方法，或者我们只需要为每个防火墙编写手册！

补充说明：

防火墙应用程序，如卡巴斯基、node、zonealarm 和 ...

TeamViewer 就是一个很好的例子。他们是怎么做到的？

我们不希望客户端依赖于服务器。他们应该能够在不使用服务器的情况下相互连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:02:57.830

您可以做的是测试客户端的互联网连接，然后尝试从外部联系您的服务器或任何其他客户端，如果没有回复，然后询问或提示用户“您使用防火墙吗？大多数防火墙检测或通知用户“应用程序试图联系”服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:47:51.820

如果您可以绕过所有防火墙，那么拥有它们将毫无用处。即使他们禁用了软件防火墙，他们仍然可以让路由器充当防火墙并且不转发连接尝试。

如果您有一个专用服务器并允许客户端通过该服务器相互通信，那么防火墙应该不是问题，因为每个客户端都会启动到服务器的传出连接。

如果您希望客户端能够充当服务器，那么该人必须确保允许该应用程序通过他们的防火墙。此外，查看 UPnP 以打开路由器上的端口。

# c++ - 如何在 C++ 宏中转换标识符字母大小写

> ID：10840463
> 
> 赞同：2
> 
> 时间：2012-05-31T20:00:55.720
> 
> 标签：c++, macros, c-preprocessor

> **可能重复：**
> [更改提供给 C 预处理器宏的参数的大小写](https://stackoverflow.com/questions/2777721/change-case-of-argument-provided-to-c-preprocessor-macro)

我有以下cpp代码

```
#include <iostream>
using namespace std;

#define PROPERTY(name,type) type get ## name () { return name; } void set ## name ( type value ) { this-> name ; }

class Demo {

  string name;

public:
  PROPERTY(name,string)

  Demo() {
      name = "no name";
  }
};

int main(){
  Demo demo;
  cout << demo.getname();
  return 0;
} 
```

根据上面的代码，宏会生成一个名为“getname”的方法，我想把它改成“getName”

如何在宏中更改令牌大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:09:03.483

大写“名称”，即

```
string Name; 
```

这将生成**getName** () 和**setName** (string)

它可能不是您想要的，但它会产生相同的效果。我认为没有任何预处理器技巧可以将令牌大写。

另一种替代方式是使用 get_name() 和 set_name(string)

# c++ - Windows 7 中的 GDI 加速/绘制到内存位图

> ID：10840464
> 
> 赞同：3
> 
> 时间：2012-05-31T20:00:57.557
> 
> 标签：c++, mfc, gdi

我的 GDI 程序在 Windows XP 上运行良好，但在 Windows Vista 和 7 上，由于缺乏 GDI 硬件加速，它看起来很糟糕。我记得几年前读过一篇文章，说 Windows 7 为一些 GDI 函数添加了硬件加速，包括 BitBlt() 函数。据推测，如果您绘制到内存位图，然后使用 BitBlt() 将图像复制到主窗口，它的运行速度与 XP 大致相同。真的吗？

如果是真的，你是怎么做到的？我在编程方面很糟糕，并且遇到了一些麻烦。我创建了下面的类来尝试让它工作：

```
class CMemBmpTest
{
private: 
    CDC         m_dcDeviceContext;
    CBitmap     m_bmpDrawSurface;

public:
    CMemBmpTest();
    ~CMemBmpTest();
    void Init();
    void Draw();
};

CMemBmpTest::CMemBmpTest()
{
}

CMemBmpTest::~CMemBmpTest()
{
    m_bmpDrawSurface.DeleteObject();
    m_dcDeviceContext.DeleteDC();
}

void CMemBmpTest::Init()
{  
    m_dcDeviceContext.CreateCompatibleDC(NULL);
    m_bmpDrawSurface.CreateCompatibleBitmap(&m_dcDeviceContext, 100, 100);
}

void CMemBmpTest::Draw()
{  
    m_dcDeviceContext.SelectObject(I.m_brshRedBrush);
    m_dcDeviceContext.PatBlt(0, 0, 100, 100, BLACKNESS);
} 
```

在窗口的 OnPaint() 函数中，我添加了以下行：

```
pDC->BitBlt(2, 2, 100, 100, &m_MemBmp, 0, 0, SRCCOPY); 
```

我希望在窗口的角落看到一个 100x100 的黑框，但它没有用。我可能做的一切都非常错误，所以如果有人能建议我如何正确地做到这一点，我将不胜感激。

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:18:59.633

AFAIK 您可以在所有版本的 Windows 上获得 GDI 功能的硬件加速（如果有人可以更详细地解释它，我很乐意对此进行纠正）。但无论哪种方式，您都是正确的，双缓冲（这就是您所说的）相对于直接绘制到屏幕而言提供了巨大的性能提升（更重要的是没有闪烁）。

我已经做了很多这样的工作，并提出了一种方法，允许您在绘图功能中同时使用 GDI 和 GDI+，但受益于 BitBlt 在屏幕绘图中的硬件加速。GDI+ 不是硬件加速的 AFAIK，但在许多更复杂的绘图技术中非常有用，因此可以选择。

因此，我的基本视图类将具有以下成员：

```
Graphics *m_gr;
CDC *m_pMemDC;
CBitmap *m_pbmpMemBitmap; 
```

然后类本身将有类似这样的代码

```
 /*======================================================================================*/
    CBaseControlPanel::CBaseControlPanel()
    /*======================================================================================*/
    { 
        m_pMemDC = NULL;
        m_gr = NULL;
        m_pbmpMemBitmap = NULL;
    }

    /*======================================================================================*/
    CBaseControlPanel::~CBaseControlPanel()
    /*======================================================================================*/
    {
        // Clean up all the GDI and GDI+ objects we've used
        if(m_pMemDC)
        { delete m_pMemDC; m_pMemDC = NULL; }
        if(m_pbmpMemBitmap)
        { delete m_pbmpMemBitmap; m_pbmpMemBitmap = NULL; }
        if(m_gr)
        { delete m_gr; m_gr = NULL; }
    }   

/*======================================================================================*/
void CBaseControlPanel::OnPaint()
/*======================================================================================*/
{
    pDC->BitBlt(rcUpdate.left, rcUpdate.top, rcUpdate.Width(), rcUpdate.Height(),
                        m_pMemDC, rcUpdate.left, rcUpdate.top, SRCCOPY);
}

/*======================================================================================*/
void CBaseControlPanel::vCreateScreenBuffer(const CSize szPanel, CDC *pDesktopDC)
// In : 
//      szPanel = The size that we want the double buffer bitmap to be
// Out : None
/*======================================================================================*/
{
    // Delete anything we're already using first
    if(m_pMemDC)
    {
        delete m_gr;
        m_gr = NULL;
        delete m_pMemDC;
        m_pMemDC = NULL;
        delete m_pbmpMemBitmap;
        m_pbmpMemBitmap = NULL;
    }
    // Make a compatible DC
    m_pMemDC = new CDC;
    m_pMemDC->CreateCompatibleDC(pDesktopDC);           
    // Create a new bitmap
    m_pbmpMemBitmap = new CBitmap;
    // Create the new bitmap
    m_pbmpMemBitmap->CreateCompatibleBitmap(pDesktopDC, szPanel.cx, szPanel.cy);
    m_pbmpMemBitmap->SetBitmapDimension(szPanel.cx, szPanel.cy);
    // Select the new bitmap into the memory DC
    m_pMemDC->SelectObject(m_pbmpMemBitmap);
    // Then create a GDI+ Graphics object
    m_gr = Graphics::FromHDC(m_pMemDC->m_hDC);
    // And update the bitmap
    rcUpdateBitmap(rcNewSize, true);
}

/*======================================================================================*/
CRect CBaseControlPanel::rcUpdateBitmap(const CRect &rcInvalid, const bool bInvalidate, const bool bDrawBackground /*=true*/)
// Redraws an area of the double buffered bitmap
// In : 
//      rcInvalid - The rect to redraw
//      bInvalidate - Whether to refresh to the screen when we're done
//      bDrawBackground - Whether to draw the background first (can give speed benefits if we don't need to)
// Out : None
/*======================================================================================*/
{
   // The memory bitmap is actually updated here

   // Then make the screen update
   if(bInvalidate)
   { InvalidateRect(rcInvalid); }
} 
```

因此，您可以直接绘制到内存 DC 并调用 InvalidateRect() 或将所有绘图代码放在 rcUpdateBitmap() 中，这对于我使用它的方式更方便。您需要在 OnSize() 中调用 vCreateScreenBuffer()。

无论如何，希望这能给你一些想法。双缓冲绝对是提高速度和不闪烁 UI 的方法。开始可能需要一点努力，但绝对值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:52:11.660

CMemDC： http: [//www.codeproject.com/Articles/33/Flicker-Free-Drawing-In-MFC](http://www.codeproject.com/Articles/33/Flicker-Free-Drawing-In-MFC) [http://msdn.microsoft.com/en-us/library/cc308997(v=vs.90)。 aspx](http://msdn.microsoft.com/en-us/library/cc308997(v=vs.90).aspx)

# python - (BioPython) 如何停止 MemoryError: Out of Memory 异常？

> ID：10840467
> 
> 赞同：0
> 
> 时间：2012-05-31T20:01:09.877
> 
> 标签：python, memory, out-of-memory, bioinformatics, biopython

我有一个程序，我在其中获取一对非常大的多序列文件（> 77,000 个序列，每个序列平均长约 1000 bp）并计算每个配对单个元素之间的对齐分数并将该数字写入输出文件（我将加载到稍后生成一个 excel 文件）。

我的代码适用于小型多序列文件，但我的大型主文件在分析第 16 对后会抛出以下回溯。

```
Traceback (most recent call last):
  File "C:\Users\Harry\Documents\cgigas\BioPython Programs\Score Create Program\scoreCreate", line 109, in <module>
    cycle(f,k,binLen)
  File "C:\Users\Harry\Documents\cgigas\BioPython Programs\Score Create Program\scoreCreate", line 85, in cycle
    a = pairwise2.align.localxx(currentSubject.seq, currentQuery.seq, score_only=True)
  File "C:\Python26\lib\site-packages\Bio\pairwise2.py", line 301, in __call__
    return _align(**keywds)
  File "C:\Python26\lib\site-packages\Bio\pairwise2.py", line 322, in _align
    score_only)
MemoryError: Out of memory 
```

我已经尝试了很多方法来解决这个问题（正如你们中的许多人可能从代码中看到的那样），但都无济于事。我尝试将大型主文件拆分为较小的批次，以输入分数计算方法。我在使用完 del 文件后尝试过它们，我尝试在 Oracle 虚拟机上使用我的 Ubuntu 11.11（我通常在 64 位 Windows 7 中工作）。我是否雄心勃勃，这在 BioPython 中是否可行？下面是我的代码，我没有内存调试经验，这是这个问题的明显罪魁祸首。非常感谢任何帮助我对这个问题感到非常沮丧。

最好的，哈利

```
 ##Open reference file
##a.)Upload subjectList
##b.)Upload query list (a and b are pairwise data)
## Cycle through each paired FASTA and get alignment score of each(Large file)

from Bio import SeqIO
from Bio import pairwise2
import gc

##BATCH ITERATOR METHOD (not my code)
def batch_iterator(iterator, batch_size) :
    entry = True #Make sure we loop once
    while entry :
        batch = []
        while len(batch) < batch_size :
            try :
                entry = iterator.next()
            except StopIteration :
                entry = None
            if entry is None :
                #End of file
                break
            batch.append(entry)
        if batch :
            yield batch

def split(subject,query):
    ##Query Iterator and Batch Subject Iterator
    query_iterator = SeqIO.parse(query,"fasta")
    record_iter = SeqIO.parse(subject,"fasta")

    ##Writes both large file into many small files
    print "Splitting Subject File..."
    binLen=2
    for j, batch1 in enumerate(batch_iterator(record_iter, binLen)) :
        filename1="groupA_%i.fasta" % (j+1)
        handle1=open(filename1, "w")
        count1 = SeqIO.write(batch1, handle1, "fasta")
        handle1.close()

    print "Done splitting Subject file"
    print "Splitting Query File..."

    for k, batch2 in enumerate(batch_iterator(query_iterator,binLen)):
        filename2="groupB_%i.fasta" % (k+1)
        handle2=open(filename2, "w")
        count2 = SeqIO.write(batch2, handle2, "fasta")
        handle2.close()

    print "Done splitting both FASTA files"
    print " "
    return [k ,binLen]

##This file will hold the alignment scores in a tab deliminated text
f = open("C:\\Users\\Harry\\Documents\\cgigas\\alignScore.txt", 'w')

def cycle(f,k,binLen):
    i=1
    m=1
    while  i<=k+1:
        ##Open the first small file
        subjectFile = open("C:\\Users\\Harry\\Documents\\cgigas\\BioPython Programs\\groupA_" + str(i)+".fasta", "rU")
        queryFile =open("C:\\Users\\Harry\\Documents\\cgigas\\BioPython Programs\\groupB_" + str(i)+".fasta", "rU")
        i=i+1
        j=0

        ##Make small file iterators
        smallQuery=SeqIO.parse(queryFile,"fasta")
        smallSubject=SeqIO.parse(subjectFile,"fasta")

        ##Cycles through both sets of FASTA files
        while j<binLen:
                j=j+1
                currentQuery=smallQuery.next()
                currentSubject=smallSubject.next()
                ##Verify every pair is correct
                print " "
                print "Pair: " +  str(m)
                print "Subject: "+ currentSubject.id
                print "Query: " + currentQuery.id
                gc.collect()
                a = pairwise2.align.localxx(currentSubject.seq, currentQuery.seq, score_only=True)
                gc.collect()
                currentQuery=None
                currentSubject=None
                score=str(a)
                a=None
                print "Score: " + score
                f.write("1"+ "\n")
                m=m+1

        smallQuery.close()
        smallSubject.close()
        subjectFile.close()
        queryFile.close()
        gc.collect()
        print "New file"
##MAIN PROGRAM
##Here is our paired list of FASTA files

##subject = open("C:\\Users\\Harry\\Documents\\cgigas\\subjectFASTA.fasta", "rU")
##query =open("C:\\Users\\Harry\\Documents\\cgigas\\queryFASTA.fasta", "rU")
##[k,binLen]=split(subject,query)
k=272
binLen=2
cycle(f,k,binLen) 
```

PS 请客气，我知道我放入的代码中可能存在一些愚蠢的东西，试图解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:20:24.083

另请参阅 BioStars 上的这个非常相似的问题，[http://www.biostars.org/post/show/45893/trying-to-get-around-memoryerror-out-of-memory-exception-in-biopython-program/](http://www.biostars.org/post/show/45893/trying-to-get-around-memoryerror-out-of-memory-exception-in-biopython-program/)

在那里我建议尝试现有的工具来处理这种事情，例如 EMBOSS needleall [http://emboss.open-bio.org/wiki/Appdoc:Needleall](http://emboss.open-bio.org/wiki/Appdoc:Needleall)（您可以使用 Biopython 解析 EMBOSS 对齐输出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T09:28:40.503

该`pairwise2`模块在最新版本的 Biopython (1.68) 中进行了更新，以变得更快和更少的内存消耗。

# ruby-on-rails - 没有路由匹配错误

> ID：10840470
> 
> 赞同：0
> 
> 时间：2012-05-31T20:01:28.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3

不知道为什么我会得到

```
No route matches {:action=>"edit", :controller=>"documents"} 
```

在我的一个部分的 link_to 中

相关路线.rb

```
 resources :documents, only: [:create, :destroy, :edit, :update] do
    post 'sort' => 'documents#sort', on: :collection
  end 
```

我最近刚刚添加了编辑和更新操作，因此我当前的问题 rake routes =

```
 sort_documents POST   /documents/sort(.:format)      documents#sort
       documents POST   /documents(.:format)           documents#create
   edit_document GET    /documents/:id/edit(.:format)  documents#edit
        document PUT    /documents/:id(.:format)       documents#update
                 DELETE /documents/:id(.:format)       documents#destroy 
```

问题路线的部分只是

```
 <%= document.title %>
 <%= document.position %>
 <%= link_to 'link_to_test', edit_document_path %>
 <%= link_to 'Delete', document, method: :delete, remote: true %> 
```

我的documents_controller.rb 已定义编辑

```
def edit
    @document = current_user.documents.find(params[:id])
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:16:10.473

发生错误是因为您忘记在`edit_document_path`. 试试这个：

```
<%= link_to 'link_to_test', edit_document_path(document) %> 
```

# c# - 在 XNA 中使用 Stencils 绘制圆形纹理

> ID：10840472
> 
> 赞同：1
> 
> 时间：2012-05-31T20:01:34.417
> 
> 标签：c#, windows, xna, xna-4.0

我正在尝试制作一个基于 XNA 的小型游戏，并且我需要能够在屏幕周围的多个移动圆圈内绘制单个纹理，就好像它们是“聚光灯”揭示了更大画面的一部分。在寻找我将如何做到这一点时，我发现模板可能能够帮助我实现这一点，但我不知道如何使用模板来做到这一点。如果有人对我如何做到这一点有任何信息或想法，我将不胜感激。

编辑：我忘了提到游戏是 2D 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:35:01.463

首先，您需要一个具有所需模板形状的网格，在本例中为圆形。XNA 不支持许多基元，因此您需要用三角形来近似圆。

接下来，您几乎像正常一样渲染该网格，但使用：

```
graphics.DepthStencilState.DepthBufferFunction = CompareFunction.Never;
graphics.DepthStencilState.StencilEnable = true;
graphics.DepthStencilState.ReferenceStencil = 1;
graphics.DepthStencilState.StencilPass = StencilOperation.Replace; 
```

现在你有一个带有孔的模板。

然后，您通过模板渲染纹理，使用正常设置但具有：

```
graphics.DepthStencilState.StencilEnable = true;
graphics.DepthStencilState.ReferenceStencil = 1;
graphics.DepthStencilState.StencilFunction = CompareFunction.Equal; 
```

有关详细信息，请参阅[DepthStencilState 类](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.depthstencilstate_members.aspx)的参考。

这是基于我对 3D 的了解。如果你想使用精灵，你可能需要做更多的事情。

# xcode - 在 Cocoa 中一般分配内存的安全方法，这将被自动释放

> ID：10840473
> 
> 赞同：1
> 
> 时间：2012-05-31T20:01:50.837
> 
> 标签：xcode, cocoa, memory, memory-management, automatic-ref-counting

在我的 Cocoa 项目中，我有很多使用 malloc/free 的地方。然而几个月前我决定重构以利用 ARC，为了做到这一点，我尝试替换 malloc 它将返回指向将自动清理的东西的指针。

我使用了这个功能（错误检查和其他日志被省略）

```
+ (void *) MallocWithAutoCleanup: (size_t) size 
{
    NSMutableData * mutableData = [[NSMutableData alloc] initWithLength:size];
    void * data = [mutableData mutableBytes];
    return data;
} 
```

这工作了一段时间，但最近出现了随机内存覆盖问题。我追查了这个函数的原因，似乎正在发生的事情是 NSMutableData 实例正在被释放，即使我保留了一个指向它的 mutableBytes 的指针。

我猜这是因为对对象的唯一*直接*引用是本地的并且正在消失，而 mutableBytes 指向对象内部，因此 ARC 不够聪明，无法处理这种引用计数。

只要使用 mutableBytes 指针（即有人引用它），有什么方法可以重构此代码以保留 mutableData 对象？我知道一种选择是只返回 NSMutableData 本身，但这需要进行大量重构并且看起来非常混乱。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T21:41:00.777

在 10.7 SDK 中，`-[NSMutableData mutableBytes]`是用`NS_RETURNS_INNER_POINTER`属性修饰的。这向编译器发出信号，该方法返回一个指针，其有效性取决于仍然存在的接收器。ARC 对此所做的究竟是什么可以改变，但目前它保留并自动释放接收器（受优化掉冗余操作的影响）。

因此，指针在当前自动释放池的生命周期内有效。这类似于`-[NSString UTF8String]`（以相同的方式装饰）。

只要有对字节指针的任何引用，ARC 就无法保持可变数据对象的活动状态。ARC 不是垃圾收集器。它不会监视所有指针的所有用途。它在本地运行。它检查一个给定的函数、方法或块，并根据命名约定为代码的行为发出保留和释放。（请记住，ARC 可以与未使用 ARC 支持编译的代码互操作。）

由于 a`void*`不是对象指针并且不能被保留或释放，ARC 不能用它做任何事情。因此，在*调用*您的`-MallocWithAutoCleanup:`方法的代码中，ARC 看不到它可以管理的任何内容。它不会发出任何特殊的内存管理代码。（此时它会发出什么*？*）在编译调用者时，编译器可能对方法实现或其中的可变数据对象一无所知。

Think about it another way: if you were still writing manually reference counting code, what would you do in the caller of your method to keep the pointer valid? For the most part (ignoring `__weak` references), all ARC does is automatically do what you would do manually. Once you consider that you would have no options in that case, you realize that neither does ARC.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T20:49:16.630

我想你回答了你自己的问题。如果要用于`NSData`管理通用内存分配，则需要保留对`NSData`对象的引用，直到使用完它拥有的内存为止，此时您对相关 NSData 对象的引用为零。与手动释放分配的内存相比，这似乎没有任何优势。就个人而言，我会继续显式地使用 malloc()/free() 而不是试图以 ARC 管理分配内存的方式扭曲我的代码。

要么这样，要么我会编写我的代码，这样它就不必首先使用 malloc/free。我会说典型的“纯”Cocoa 项目没有很多（如果有的话）显式 malloc() 调用，除非有充分的理由，否则我会对这样做的代码有点怀疑。你为什么首先使用 malloc() ？

# jquery - jQuery/Css : 弹出内容 div 下推页面

> ID：10840481
> 
> 赞同：3
> 
> 时间：2012-05-31T20:02:14.653
> 
> 标签：jquery, css, html

我正在使用一个名为[Reveal](http://www.zurb.com/playground/reveal-modal-plugin)的 jQuery 插件。当您单击具有特定类的链接时，它只会显示一个类似于弹出窗口的 div。

在我的网站上，我使用它来显示评论。问题是当 div 的内容很多时，打开的 div 会推到页面底部。

![在此处输入图像描述](../Images/d9e63c0c4ee0656746e6cbad50baaf8f.png)

评论 div 关闭后是否有 jQuery 或 Css 方式使不需要的空间消失？

**编辑 1**：这是结束动画代码：

```
modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
                        modal.animate({
                            "top":  $(document).scrollTop()-topOffset + 'px',
                            "opacity" : 0
                        }, options.animationspeed/2, function() {
                            modal.css({'top':topMeasure, 'opacity' : 1, 'visibility' : 'hidden'});
                            unlockModal();
                        }); 
```

**编辑 2**：如果我使用滚动，会发生以下情况：

正常：http: [//jsfiddle.net/K4E3g/1/](http://jsfiddle.net/K4E3g/1/)

滚动：http: [//jsfiddle.net/K4E3g/2/](http://jsfiddle.net/K4E3g/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:09:46.677

**已编辑**

该插件用于`visibility: hidden / visible`在其代码中广泛显示和隐藏模式。这意味着任何处于关闭状态的模态都设置为`visibility: hidden`，其效果是，如果模态大于页面，则使页面比应有的更长，因为元素`visibility: hidden`仍然占用页面上的空间。

您可以尝试在插件本身中更改所有`visiblity: hidden`to`display: none`和`visibility: visible`to`display: block`并查看是否可以获得所需的结果，但是我没有对此进行测试，并且可能会有不良的副作用。

或者，我建议查看不同的模态插件，例如 Eric Martin 出色的[Simple Modal](http://www.ericmmartin.com/projects/simplemodal/)插件。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:13:23.203

您需要使用 CSS 定位创建的模态 div，并为其指定一个最大高度值和一个最大宽度值，以及溢出：滚动。

像这样的东西应该工作：

```
div.comments-modal {
  max-width:60%;
  max-height:80%;
  overflow:auto;
} 
```

*注意：使用 % 值而不是 px 值将允许您的模态尺寸随用户的浏览器/屏幕大小进行调整。如果你想防止这种情况发生，那么只需使用 px 定义的值来代替。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:10:38.523

尝试设置`max-height`和`overflow: auto`

```
 #myModal {
        max-height: 300px;
        overflow: auto;
    }

    <div id="myModal" class="reveal-modal">
         <h1>Modal Title</h1>
         <p>Any content could go in here.</p>
         <a class="close-reveal-modal">&#215;</a>
    </div> 
```

或者，你可以试试

```
modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
                        modal.animate({
                            "top":  $(document).scrollTop()-topOffset + 'px',
                            "opacity" : 0
                        }, options.animationspeed/2, function() {
                            modal.css({'top':topMeasure, 'opacity' : 1, 'display' : 'none'});
                            unlockModal();
                        }); 
```

您还可以尝试使用淡入动画，将 div 的高度从 0 设置为 100%，然后在不透明度淡入时向上滚动。

**编辑：**检查[this fiddle](http://jsfiddle.net/BkZ6k/)以获取仅使用jQuery的示例。

# wpf - 在 WPF 代码中设置事件处理程序

> ID：10840487
> 
> 赞同：1
> 
> 时间：2012-05-31T20:02:29.923
> 
> 标签：wpf, xaml

我的 WPF 程序使用具有 WPF 地图控件的第三方地图包。我的程序需要能够在没有安装此软件的系统上运行，并且需要足够智能以识别何时安装和使用该软件。这意味着我不能在表单的 XAML 文件中包含任何用于映射控件的 XAML，否则会引发 XAML 解析异常。

我有一种技术可以确定是否安装了软件。在我的程序的初始化代码中，`MapsAreInstalled`如果安装了映射软件，我将 Application 对象的一个​​属性设置为 true，如果没有安装，我将其设置为 false。

在我的 UserControl 表单中，我添加了 OnApplyTemplate 方法的覆盖。这将检查`MapsAreInstalled`属性的值并在值为 true 时创建一个新的地图控件。这是我用来创建此控件的 XAML，在我必须改变方法变得明显之前：

```
<telogis:MapControl ButtonBase.Click="CarImage_Click"
                    Canvas.Left="0"
                    Canvas.Top="0"
                    Center="41.366674544084,-73.6112966322899"
                    DragBehavior="None"
                    Heading="0"
                    Height="{Binding ElementName=ChannelCanvas, Path=ActualHeight}"
                    MapQuality="Perfect"
                    Name="ReadMap"
                    Perspective="TwoD"
                    RenderLabels="True"
                    UiEnable="True"
                    Width="{Binding ElementName=ChannelCanvas, Path=ActualWidth}"
                    Zoom="50" /> 
```

我知道如何在除了`ButtonBase.Click`事件处理程序之外的代码中初始化所有这些属性。如何在代码隐藏中进行设置？

托尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:14:07.640

我找到了这个问题的答案：

```
RoutedEventHandler clickHandler = MyClickHandler;
mapCtrl.AddHandler( ButtonBase.ClickEvent, clickHandler ); 
```

不管怎么说，还是要谢谢你。

# java - Java swing 1.6 Textinput like firefox bar

> ID：10840498
> 
> 赞同：4
> 
> 时间：2012-05-31T20:03:33.570
> 
> 标签：java, swing, awt, jbutton, jtextfield

我想创建一个看起来像 Firefox 地址栏的文本小部件/组件。我的意思是一个文本字段，它允许我在字段内放置小按钮（例如取消/重新加载/...）

我尝试自定义一个 JLayeredPane，通过创建一个自定义布局管理器来最大化文本字段，并将其余部分从右到左放置。我的问题是这给了绘画问题，我不会总是看到我在文本字段中添加的项目。这可能与 Jython 相关，我尝试补充`java.lang.Integer(1)`到`JLayeredPane.add`. 然而，图层的顺序与文档所说的完全相反。

为了解决这个问题，我派生了我自己的`JLayeredPane`类并重新定义`paint`为 call`paintComponents`它依次遍历所有组件并调用它们的绘制方法，从文本框开始，然后是其余的。

但是我并不总是立即获得更新，这意味着按钮被隐藏/仅部分显示并且我无法与按钮交互。

1.  我必须怎样才能在屏幕上看到更新（它是否隐藏在缓冲区中？））
2.  我怎样才能做到这一点，以便我可以与按钮交互？
3.  如何缩短 Texxtfield，以便在到达 Textfield 末尾之前文本开始滚动到前面，这样文本不会被按钮隐藏？我仍然希望 Textfields 区域在按钮下扩展

**编辑**：按钮仅在我缩小窗口后显示在正确的位置，之后它也可以点击

**编辑2**：我自由地将答案归结为这个，它隐藏了很多按钮代码/不必要的东西

```
import java.awt.*;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.*;

public class playground {

    private Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");
    private Icon infoIcon = UIManager.getIcon("OptionPane.informationIcon");
    private Icon warnIcon = UIManager.getIcon("OptionPane.warningIcon");

    public playground() {
        JPanel panel = new JPanel();
        panel.setLayout(new BorderLayout());

        panel.add(makeButton(), BorderLayout.WEST);

        JTextField text = new JTextField(20);
        text.setBorder(null);
        panel.add(text, BorderLayout.CENTER);
        JPanel buttonsPanel = new JPanel();
        buttonsPanel.setOpaque(false);
        buttonsPanel.setLayout(new GridLayout(1, 2, 2, 2));

        buttonsPanel.add(makeButton());
        buttonsPanel.add(makeButton());

        panel.add(buttonsPanel, BorderLayout.EAST);
        panel.setBackground(text.getBackground());

        JMenuBar menuBar = new JMenuBar();
        menuBar.add(panel);
        menuBar.add(Box.createHorizontalGlue());
        JFrame frame = new JFrame("MenuGlueDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(menuBar);
        frame.pack();
        frame.setVisible(true);
    }

    public JToggleButton makeButton() {
        final JToggleButton button = new JToggleButton();
        button.setFocusable(false);
        button.setMargin(new Insets(0, 0, 0, 0));
        button.setContentAreaFilled(false);
        button.setBorder(null);

        button.setIcon((errorIcon));
        button.setRolloverIcon((infoIcon));
        button.setSelectedIcon(warnIcon);
        button.setPressedIcon(warnIcon);

        button.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent e) {
                if (button.isSelected()) {
                } else {
                }
            }
        });

        return button;
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                playground menuGlueDemo = new playground();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:07:43.813

[使用JMenuBar](http://docs.oracle.com/javase/7/docs/api/javax/swing/JMenuBar.html)可能会很简单，例如[Auto complete ComboBox / JFextField](http://www.java2s.com/Code/Java/Swing-Components/AutocompleteComboBox.htm)

![在此处输入图像描述](../Images/21d5ca9915c09fa8ec9abbc69401221e.png)

```
import java.awt.ComponentOrientation;
import javax.swing.*;

public class MenuGlueDemo {

    public MenuGlueDemo() {
        JMenuBar menuBar = new JMenuBar();
        menuBar.add(createMenu("Menu 1"));
        menuBar.add(createMenu("Menu 2"));
        menuBar.add(createMenu("Menu 3"));
        menuBar.add(new JSeparator());
        menuBar.add(new JButton("   Seach ....  "));
        menuBar.add(new JTextField("   Seach ....  "));
        menuBar.add(new JComboBox(new Object[]{"height", "length", "volume"}));
        menuBar.add(Box.createHorizontalGlue());
        menuBar.add(createMenu("About"));
        JFrame frame = new JFrame("MenuGlueDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(menuBar);
        frame.pack();
        frame.setVisible(true);
    }

    public JMenu createMenu(String title) {
        JMenu m = new JMenu(title);
        m.add("Menu item #1 in " + title);
        m.add("Menu item #2 in " + title);
        m.add("Menu item #3 in " + title);
        if (title.equals("About")) {
            m.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        }
        return m;
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MenuGlueDemo menuGlueDemo = new MenuGlueDemo();
            }
        });
    }
} 
```

编辑

> 我可以简单地在一个具有适当布局的容器中输入一个文本输入和一些按钮并实现 [Textfield...] [B1] [B2] 但我想要 [Textfield [B1] [B2]]

![在此处输入图像描述](../Images/1eef36aac3e77acf9c4ebfefdc7182e4.png)

使用适当的[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

```
import java.awt.*;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import javax.swing.*;

public class MenuGlueDemo {

    private Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");
    private Icon infoIcon = UIManager.getIcon("OptionPane.informationIcon");
    private Icon warnIcon = UIManager.getIcon("OptionPane.warningIcon");

    public MenuGlueDemo() {
        JPanel panel = new JPanel();
        panel.setLayout(new BorderLayout());
        JButton button = new JButton();
        button.setFocusable(false);
        //button.setMargin(new Insets(0, 0, 0, 0));
        button.setContentAreaFilled(false);
        button.setIcon((errorIcon));
        button.setPressedIcon(warnIcon);
        panel.add(button, BorderLayout.WEST);
        JTextField text = new JTextField(20);
        text.setBorder(null);
        panel.add(text, BorderLayout.CENTER);
        JPanel buttonsPanel = new JPanel();
        buttonsPanel.setOpaque(false);
        buttonsPanel.setLayout(new GridLayout(1, 2, 2, 2));
        final JToggleButton toggleButton = new JToggleButton();
        toggleButton.setFocusable(false);
        toggleButton.setMargin(new Insets(0, 0, 0, 0));
        toggleButton.setContentAreaFilled(false);
        toggleButton.setIcon((errorIcon));
        toggleButton.setRolloverIcon((infoIcon));
        toggleButton.setSelectedIcon(warnIcon);
        toggleButton.setPressedIcon(warnIcon);
        toggleButton.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent e) {
                if (toggleButton.isSelected()) {
                } else {
                }
            }
        });
        buttonsPanel.add(toggleButton);
        final JToggleButton toggleButton1 = new JToggleButton();
        toggleButton1.setFocusable(false);
        toggleButton1.setMargin(new Insets(0, 0, 0, 0));
        toggleButton1.setContentAreaFilled(false);
        toggleButton1.setIcon((errorIcon));
        toggleButton1.setRolloverIcon((infoIcon));
        toggleButton1.setSelectedIcon(warnIcon);
        toggleButton1.setPressedIcon(warnIcon);
        toggleButton1.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent e) {
                if (toggleButton1.isSelected()) {
                } else {
                }
            }
        });
        buttonsPanel.add(toggleButton1);
        panel.add(buttonsPanel, BorderLayout.EAST);
        panel.setBackground(text.getBackground());
        JMenuBar menuBar = new JMenuBar();
        menuBar.add(createMenu("Menu 1"));
        menuBar.add(createMenu("Menu 2"));
        menuBar.add(createMenu("Menu 3"));
        menuBar.add(new JSeparator());
        menuBar.add(new JButton("   Seach ....  "));
        menuBar.add(panel);
        menuBar.add(new JComboBox(new Object[]{"height", "length", "volume"}));
        menuBar.add(Box.createHorizontalGlue());
        menuBar.add(createMenu("About"));
        JFrame frame = new JFrame("MenuGlueDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(menuBar);
        frame.pack();
        frame.setVisible(true);
    }

    private JMenu createMenu(String title) {
        JMenu m = new JMenu(title);
        m.add("Menu item #1 in " + title);
        m.add("Menu item #2 in " + title);
        m.add("Menu item #3 in " + title);
        if (title.equals("About")) {
            m.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        }
        return m;
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MenuGlueDemo menuGlueDemo = new MenuGlueDemo();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T23:00:28.477

您可以调整[*Component Border*](http://tips4java.wordpress.com/2009/09/27/component-border/)中显示的方法，它允许“a`JTextField`和 a`JButton`一起工作”。相关文章[*文本提示*](http://tips4java.wordpress.com/2009/11/29/text-prompt/)也可能很有用。最后，考虑一下[`JToolBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)，[这里](https://stackoverflow.com/a/4039359/230513)说明的，作为一种将组件连接在一起的灵活方式。

# java - 如何在 JPA 2.0 元模型中自动生成列名作为静态最终字符串？

> ID：10840510
> 
> 赞同：6
> 
> 时间：2012-05-31T20:04:18.910
> 
> 标签：java, maven, jpa

在一些 JPA 注释中，我想直接在代码中使用字段名称来代替容易出错的字符串：

```
@javax.persistence.OrderBy(value = User_.registrationDate.getName())
public List<PlugConfig> getPlugConfigs() { ... } 
```

但是上面不会编译，因为要获得名称，我必须使用不是常量表达式的函数（User_ 是生成的 JPA @StaticMetamodel）。

是否可以以任何方式使用元模型，或者我坚持直接字符串常量？有没有办法为元模型自动生成这样的字符串常量？（我正在使用 maven-processor-plugin 进行生成）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T20:23:53.253

现在，我的元模型类中的每个字段都有两个字段，例如：

```
public static final String _registrationDate="registrationDate";
public static volatile SingularAttribute<User, Date> registrationDate; 
```

为了让它工作，我重用了来自 JPAMetaModelEntityProcessor 的代码（不幸的是，简单地扩展这个类有问题）。我添加了这个方法：

```
 private void addFieldsNamesAsStrings(MetaEntity entity) {
    if (entity instanceof AnnotationMetaEntity) {

        AnnotationMetaEntity aentity = (AnnotationMetaEntity) entity;
        List<MetaAttribute> newMembers = new ArrayList<MetaAttribute>();
        for (final MetaAttribute ma : entity.getMembers()) {

            MetaAttribute nma = new AnnotationMetaAttribute(aentity, null,
                    null) {
                public String getDeclarationString() {
                    return new StringBuilder()
                            .append("public static final String ")
                            .append(getPropertyName()).append("=\""+ma.getPropertyName()+"\";")
                            .toString();
                }

                @Override
                public String getPropertyName() {
                    return "_"+ma.getPropertyName();
                }

                @Override
                public String getMetaType() {

                    return null;
                }

            };
            newMembers.add(nma);

            aentity.mergeInMembers(newMembers);
        }
    }

} 
```

我在每次发生之前调用它

```
ClassWriter.writeFile(entity, context); 
```

对应的maven配置：

```
 <plugin>
            <groupId>org.bsc.maven</groupId>
            <artifactId>maven-processor-plugin</artifactId>
            <executions>
                <execution>
                    <id>process</id>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <phase>generate-sources</phase>
                    <configuration>
                        <processors>
                            <processor>
                                com.company.MyProcessor
                  </processor>
                        </processors>
                        <outputDirectory>target/modelgen/src/main/java</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:59:32.700

我没有尝试过，但从我在完全其他上下文（不是 JPA）中阅读的内容来看，您可以尝试：

*   指定一个自定义注释 (RetentionPolicy.SOURCE) 并注释您的实体类（或者您可以只依赖 @Entity 注释）
*   编写一个注解处理器，它编写一个带有静态字段的类

例如

```
public class UserConstants{
    public static final String REGISTRATION_DATE = User_.registrationDate.getName(); 
} 
```

这只是一个想法。我不知道它是否适合这种情况。

# entity-framework - 通过 ObjectContext 编写 EF 4.3 代码优先数据库脚本失败，而通过内置 DatabaseInitializer 创建成功

> ID：10840511
> 
> 赞同：0
> 
> 时间：2012-05-31T20:04:30.517
> 
> 标签：entity-framework, entity-framework-4.3

我想以编程方式为我的 EF 4.3 Code-First 数据库创建数据库创建脚本。数据库使用标准 DatabaseInitializer 机制创建得很好，但以下代码失败：

```
using(var dc = new MyContext())
{
    var objContext = (IObjectContextAdapter)dc;
    var script = objContext.ObjectContext.CreateDatabaseScript();
} 
```

我得到的例外是：

> 不属于“timestamp”或“rowversion”类型的属性不支持存储生成的模式“Computed”。

我确实定义了一个“字符串”类型的计算列，但就像我说的，当通过内置的 DatabaseInitializer 创建时，数据库创建得很好。奇怪的是，使用此方法生成的架构实际上并没有创建计算列。

至于我*为什么*这样做，我有一个运行后创建的脚本，它删除了这个列并创建了一个真正的计算列。如果不指定在 EF 映射中计算的列，它将尝试在插入时为该列分配一个值，然后失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:16:54.770

暂时将数据库创建放在一边，设置“Computed”意味着 EF 不会尝试写入该列的值，而是会在每次查询该列时读取服务器（可能）是计算机的值。从 EF 的角度来看，任何数据类型都有一个计算列是有效的。

现在考虑从 EF 模型创建数据库。EF 不知道如何在数据库中创建计算列，实际上，根据列的类型，如果在某些数据库中没有触发器，甚至可能无法执行此操作。因此，在 EF4 中，决定在这些情况下抛出 CreateDatabaseScript。

但是，EF 4.3 及更高版本在面向 SQL Server 或 SQL Server Compact 时不再使用 CreateDatabaseScript。他们改为使用迁移管道。对于迁移管道，我们决定采用不同的方法，因为我们认为数据库创建总是抛出一个可能是完全有效的模型是错误的。特别是考虑到您可以在迁移中编写自己的 SQL，添加触发器或其他一些机制来使数据库创建有效的计算列。

因此，这就是为什么您会看到由 EF 4.3 创建的数据库（但没有做任何事情来计算列），但是当您尝试使用使用较旧的非迁移机制的 CreateDatabaseScript 时，您会看到相同的模型抛出。

解决此问题的方法是让 Migrations 创建脚本，而不是使用 CreateDatabaseScript。

# java - Java 中的透明和与操作系统无关的路径处理

> ID：10840512
> 
> 赞同：2
> 
> 时间：2012-05-31T20:04:36.437
> 
> 标签：java, cross-platform, file-handling

我正在为我们的应用程序开发一个图形安装程序。由于没有可用的安装程序生成器满足要求和约束，我正在从头开始构建它。

安装程序应该在多个操作系统上运行，因此路径处理需要与操作系统无关。为此，我编写了以下小实用程序：

```
public class Path {
  private Path() {
  }

  public static String join(String... pathElements) {
    return ListEnhancer.wrap(Arrays.asList(pathElements)).
      mkString(File.separator);
  }

  public static String concatOsSpecific(String path, String element) {
    return path + File.separator + element;
  }

  public static String concatOsAgnostic(String path, String element) {
    return path + "/" + element;
  }

  public static String makeOsAgnostic(String path) {
    return path.replace(File.separator, "/");
  }

  public static String makeOsSpecific(String path) {
    return new File(path).getAbsolutePath();
  }

  public static String fileName(String path) {
    return new File(path).getName();
  }
} 
```

现在我的代码到处都是，`Path.*Agnostic`并且`Path.*Specific`在很多地方调用。很明显，这很容易出错并且根本不透明。

我应该采取什么方法来使路径处理透明且不易出错？是否存在已经解决此问题的任何实用程序/库？任何帮助将不胜感激。

**编辑：**

为了举例说明我的意思，这是我不久前写的一些代码。（题外话：原谅冗长的方法。代码处于初始阶段，很快将进行一些重度重构。）

一些上下文：`ApplicationContext`是一个存储安装数据的对象。`installationRootDirectory`其中包括多个路径，例如`installationDirectory`等。这些路径的默认值是在创建安装程序时指定的，因此始终以与操作系统无关的格式存储。

```
@Override
protected void initializeComponents() {
  super.initializeComponents();
  choosePathLabel = new JLabel("Please select the installation path:");
  final ApplicationContext c = installer.getAppContext();
  pathTextField = new JTextField(
    Path.makeOsSpecific(c.getInstallationDirectory()));
  browseButton = new JButton("Browse", 
    new ImageIcon("resources/images/browse.png"));
  browseButton.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
      JFileChooser fileChooser = new JFileChooser();
      fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
      fileChooser.setAcceptAllFileFilterUsed(false);
      int choice = fileChooser.showOpenDialog(installer);
      String selectedInstallationRootDir = fileChooser.getSelectedFile().
        getPath();
      if (choice == JFileChooser.APPROVE_OPTION) {
        c.setInstallationRootDirectory(
          Path.makeOsAgnostic(selectedInstallationRootDir));
        pathTextField.setText(Path.makeOsSpecific(c.getInstallationDirectory()));
      }
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:42:06.057

或者您可以引入 2 个新课程：

```
class OsSpecificPath implements FilePathInterface
{
      String path;

      OsAgnosticPath toAgnosticPath();

      OsSpecificPath concat( OsSpecificPath otherPath );

      // from IFilePath
      getFile();

     ... etc
} 
```

和

```
class OsAgnosticPath implements FilePathInterface
{
      String path;

      OsSpecificPath toOsSpecificPath();

      OsAgnosticPath concat( OsAgnosticPath otherPath );

      // from IFilePath
      getFile();

     ... etc
} 
```

每个人都绕着他们需要的路径。

然后，每个方法都可以具有转换为其他类型路径的方法，但不是所有内容都是字符串并且可能被滥用的“字符串类型”解决方案，而是有 2 个不能错误传递的强类型类大约。

任何不关心路径类型的东西都会使用`FilePathInterface`，任何需要对特定类型的路径进行操作的东西都会专门使用这些类型。 如果真的有必要，`FilePathInterface`可以假设在界面中同时具有`toAgnosticPath`和...`toOsSpecificPath`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:16:55.197

不确定这是否是您想要的，但通常当我需要在独立于操作系统的 Java 程序中执行与路径相关的操作时，我总是使用字符串而不是文件来传递路径，并且我总是执行以下两个操作事物：

每当我构建字符串路径时，我总是将`/`其用作文件分隔符

每当我使用字符串路径创建文件或将其另存为文本时，我总是在使用路径之前进行以下调用：

```
String fSep = System.getProperty("file.separator);
String path = ... //might be built from scratch, might be passed in from somewhere
path = path.replace("/",fSep).replace("\\",fSep); 
```

无论路径是在本地计算机上构建还是从具有不同操作系统的网络上的另一台计算机传入，这似乎都能正常工作，前提是我打算使用本地计算机上的路径。如果您计划通过网络在不同操作系统之间传递路径，请注意您自己的代码是一致的。

编辑

哇...不知何故，我的答案被弄乱了，代码格式没有按最初的预期工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:20:34.307

我会制作我自己的 MyFile 对象来扩展或包装 java.util.File。然后确保所有代码都使用这个对象而不是 java.io.File。在这里，您将进行操作系统检查并调用方法来清理文件名。您的其余代码将是“干净的”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T00:42:26.093

您永远不需要转换*回*os-agnostic。以下是特定于操作系统的转换：

```
public class Path {
  private Path() {
  }

  public static String concat(String path, String element) {
    return new File(path, element).getPath();
  }

  public static String makeOsSpecific(String path) {
    return new File(path).getAbsolutePath();
  }

  public static String fileName(String path) {
    return new File(path).getName();
  }
} 
```

您的样品：

```
@Override
protected void initializeComponents() {
  super.initializeComponents();
  choosePathLabel = new JLabel("Please select the installation path:");
  final ApplicationContext c = installer.getAppContext();
  pathTextField = new JTextField(
    Path.makeOsSpecific(c.getInstallationDirectory()));
  browseButton = new JButton("Browse", 
    new ImageIcon("resources/images/browse.png"));
  browseButton.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
      JFileChooser fileChooser = new JFileChooser();
      fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
      fileChooser.setAcceptAllFileFilterUsed(false);
      int choice = fileChooser.showOpenDialog(installer);
      String selectedInstallationRootDir = fileChooser.getSelectedFile().
        getPath();
      if (choice == JFileChooser.APPROVE_OPTION) {
        c.setInstallationRootDirectory(selectedInstallationRootDir);
        pathTextField.setText(Path.makeOsSpecific(c.getInstallationDirectory()));
      }
    }
  });
} 
```

# java - 用于 Facebook 登录的 jsoup

> ID：10840516
> 
> 赞同：3
> 
> 时间：2012-05-31T20:05:07.053
> 
> 标签：java, android, jsoup

我以前见过这个问题，也见过很多回答“有一个 facebook api”是的，我完全知道有一个 facebook api，但我不想使用它。我正在制作一个可以登录网站并发布的 android 应用程序，我只是使用 facebook 示例来说明我的问题

我在java中有这段代码

```
import java.io.IOException;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

public class testingjsoup {

public static void main(String[] args ){

try {
    Connection.Response res = Jsoup.connect("https://www.facebook.com/login.php?login_attempt=1")
            .data("email", "myemailid", "pass", "mypassword")
            .method(Method.POST)
            .execute();
//  Document doc = res.parse();
    //String sessionId = res.cookie("SESSIONID");

    Map<String, String> cookies = res.cookies();

    Document doc2 = Jsoup.connect("https://www.facebook.com/")
            .cookies(cookies)
            .get();

    System.out.println(doc2.text());
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

}} 
```

现在一切看起来都很好，除了打印输出显示 facebook 说“javascript 未启用”

谢谢你

代码更新以及问题：P

编辑：似乎jsoup不支持javascript ...所以寻找替代品...再次html单元不适用于android而且我不是在寻找网络驱动程序我正在寻找一种不可见的方式来浏览网络并返回特定结果

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:10:49.900

看看这个[帖子](https://stackoverflow.com/questions/6432970/jsoup-posting-and-cookie)。

您还可以使用*HttpClient*或*URLConnection*来管理您的连接和 http 请求，并仅使用 JSOUP 进行解析。

# iphone - 自定义委托，从另一个视图中关闭弹出窗口

> ID：10840520
> 
> 赞同：0
> 
> 时间：2012-05-31T20:05:21.323
> 
> 标签：iphone, xcode, ipad, uipopovercontroller, popover

我可以对自定义代表使用一些帮助。我正在尝试制定一个协议，向其代表发送消息以关闭弹出视图。这是我正在尝试的。

在 popoverViewController.h

```
#import <UIKit/UIKit.h>

@protocol MyPopoverDelegate <NSObject>
-(void) didSelectLanguage;
@end

@interface Popover : UITableViewController{

    id <MyPopoverDelegate> delegate;
    NSMutableArray *languageData;

}

@property (nonatomic, assign) id <MyPopoverDelegate> delegate;

@end 
```

.m

```
@synthesize delegate;

...

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"You selected %@", [languageData objectAtIndex:[indexPath row]]);
    [self.delegate didSelectLanguage];

}

... 
```

在呈现弹出框的 ViewController 中

```
#import <UIKit/UIKit.h>
#import "popoverViewController.h"

@interface ChoicesChoices : UIViewController <UIPopoverControllerDelegate, MyPopoverDelegate>{

    UIPopoverController *popover;

}
- (IBAction)facebook:(id)sender;
- (IBAction)twitter:(id)sender;
- (IBAction)sms:(id)sender;
- (IBAction)copy:(id)sender;
- (IBAction)email:(id)sender;
- (IBAction)home:(id)sender;
- (IBAction)mute:(id)sender;
- (IBAction)note:(id)sender;

@property (nonatomic, retain) UIPopoverController* popover;

@end 
```

和.m

```
@synthesize popover;

...

- (void)didSelectLanguage{
[popover dismissPopoverAnimated:YES];
NSLog(@"didSelectLanguage fired");
} 
```

当我在弹出框的表中选择一行时，不会调用 didSelectLanguage。关于我可能做错了什么的任何想法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:27:02.617

确保在创建自定义类的实例时在呈现视图控制器中设置委托。

```
popover.delegate = self 
```

此外，您的属性看起来像是标准的弹出框控制器，而不是您的自定义视图控制器的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:32:37.653

确保您将委托设置为呈现弹出窗口的视图控制器。像这样的东西`ChoicesChoices.m`：

```
- (void)presentPopover
{
  // assuming ARC for all allocations
    Popover *myController = [Popover new];
    myController.delegate = self;
    self.popover = [[UIPopoverController alloc] initWithContentViewController:myController];
    [self.popover presentPopover...];  // two flavors here, FromRect: and FromBarButtonItem:, that's left up to you to choose which one is correct.
} 
```

# unit-testing - 确定单元测试未涵盖功能的哪些部分

> ID：10840521
> 
> 赞同：0
> 
> 时间：2012-05-31T20:05:24.800
> 
> 标签：unit-testing, code-coverage, visual-studio-2012

在 Visual Studio 的代码覆盖率窗口中，它告诉我我的一个函数被覆盖了 89.09%。

如何找到未涵盖的功能部分？

**注意：**我选择了代码覆盖颜色（尽管我不知道它的作用）。

使用标准的 MS 测试框架，这是针对 C# 解决方案的。

**更新：** [此](http://msdn.microsoft.com/en-us/library/ms182496%28VS.110%29.aspx)页面似乎说明了此选项所在的位置，但第 5 步 ( `Under Display items, select the area of code coverage whose display color you want to change. Your choices are Coverage Not Touched Area, Coverage Partially Touched Area, and Coverage Touched Area.`) 是不可能的，因为缺少这些选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:34:51.303

如果您仍处于测试阶段，可能值得转移到 RC

# xml - XSLT 递归和 2 个参数

> ID：10840524
> 
> 赞同：-1
> 
> 时间：2012-05-31T20:05:44.093
> 
> 标签：xml, xslt

我无法通过 XSLT 在 HTML 中正确格式化 XML 数据。以下是接收数据的方式：

```
 This is some text. <p> 
    This is more text. <p> 
    This is even more text. <p>
    <a href=www.google.com>Google's website</a> <p> 
    Return to my website. 
```

所以我有递归（我认为这是在这种情况下使用的）设置。它将为每个 p 标签创建一个新段落，并删除我们网站上的 p 标签。这是代码：

```
<xsl:template name="replace_p">
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text, '&lt;P&gt;')">
            <xsl:value-of select="substring-before($text, '&lt;P&gt;')"/>
             <br/><br/>
            <xsl:call-template name="replace_p">
                <xsl:with-param name="text" select="substring-after($text, '&lt;P&gt;')"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose> 
```

这很好用……除非我们有链接。我希望用户能够点击链接而不是看到 a href 标记和代码。唯一的问题是......当替换 p 模板运行时我该怎么做。我的尝试（我觉得我的想法是正确的，虽然可能不是很接近）：

```
 <xsl:template name="replace_p">
    <xsl:param name="text"/>
    <xsl:if test="contains($text, '&lt;P&gt;')">
        <xsl:choose>
            <xsl:when test="substring-before($text, '&lt;P&gt;') and substring-before($text, '&lt;a href=')">
                <xsl:value-of select="substring-before(substring-after($text, '&lt;a href='), '&gt;')"/>
                <br/><br/>
                <xsl:call-template name="replace_p">
                    <xsl:with-param name="text" select="substring-after($text, '&lt;P&gt;')"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:when test="substring-before($text, '&lt;P&gt;')">
                <xsl:value-of select="substring-before($text, '&lt;P&gt;')"/>
                <br/><br/>
                <xsl:call-template name="replace_p">
                    <xsl:with-param name="text" select="substring-after($text, '&lt;P&gt;')"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$text"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:if>
</xsl:template> 
```

我先测试 p 标签和 href 标签测试，因为我希望它在进入下一个 when 语句之前检查两者。但是......我不知道它是否一定是这样工作的。它会在进入下一个 when 语句之前检查第一个 p 标签和一个 href 标签吗？

我也知道我需要创建一个标签和一个 href 属性，但我想努力让正确的数据首先出现。:)

如果需要任何其他信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:51:04.493

您的问题是您试图通过将其视为文本来转换非法 xml。

如果您正在处理纯文本，还有比 xslt 更适合该工作的其他技术。如果您不转换（合法）xml，请不要使用 xslt，这没有任何意义。

如果你真的想使用 xslt，首先要确保你有合法的 xml。然后，使用模板和选择器以及 xslt 和 xpath 的所有细节都很容易。

只是为了好玩，请参阅[本文](http://weblogs.asp.net/alex_papadimoulis/archive/2005/05/25/408925.aspx)的介绍以了解您在问什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T07:36:41.187

这对你有帮助吗？

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:template match="/">
<xsl:apply-templates/>
<xsl:call-template name="replace_p"/>
</xsl:template>

<xsl:template name="replace_p">
 <xsl:param name="text" select="tokenize(unparsed-text('Try2.txt'), '\r?\n')"/>
 <xsl:for-each select="$text">

 <p>
 <xsl:choose>
 <xsl:when test="(substring-after(normalize-space(.), '&lt;a href=') != '')">
 <xsl:element name="a">
 <xsl:attribute name="href">
 <xsl:value-of select="concat('http://', substring-before(substring-after(., '&lt;a href='), '&gt;'))"/>
 </xsl:attribute>
 <xsl:value-of select="substring-before(substring-after(., '&gt;'), '&lt;/a&gt;')" disable-output-escaping="no"/>
 </xsl:element></xsl:when>
 <xsl:when test="((substring-before(normalize-space(.), '&lt;p&gt;')) != '')">
 <xsl:value-of select="(substring-before(normalize-space(.), '&lt;p&gt;'))"/>
 </xsl:when>
 <xsl:otherwise>
 <xsl:value-of select="normalize-space(.)"/>
 </xsl:otherwise>
</xsl:choose>
 </p>
 </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

输出是[代码]

```
<xml>
<p>This is some text. </p>
<p>This is more text. </p>
<p>This is even more text. </p>
<p><a href="http://www.google.com">Google's website</a></p>
<p>Return to my website.</p>
</xml> 
```

[/代码]

# delphi - Unicode/WideString BalloonTray

> ID：10840527
> 
> 赞同：3
> 
> 时间：2012-05-31T20:05:45.633
> 
> 标签：delphi, winapi, delphi-7

我有一个在 Windows 中显示气球托盘的功能，它的结构也像这样：

```
const
NIF_INFO      =       $00000010;
NIIF_NONE     =       $00000000;
NIIF_INFO     =       $00000001;
NIIF_WARNING  =       $00000002;
NIIF_ERROR    =       $00000003;

type
 BalloonData = record
 cbSize: DWORD;
 Wnd: HWND;
 uID: UINT;
 uFlags: UINT;
 uCallbackMessage: UINT;
 hIcon: HICON;
 szTip: array[0..MAXCHAR] of AnsiChar;
 dwState: DWORD;
 dwStateMask: DWORD;
 szInfo: array[0..MAXBYTE] of AnsiChar;
 uTimeout: UINT;
 szInfoTitle: array[0..63] of AnsiChar;
 dwInfoFlags: DWORD;
end;

type
 TBalloonTimeout = 2..30;
 TBalloonIconType = (bitNone, bitInfo, bitWarning, bitError);

function DZBalloonTrayIcon(const Window: HWND; const IconID: Byte; const Timeout: TBalloonTimeout; const BalloonText, BalloonTitle: String; const BalloonIconType: TBalloonIconType): Boolean;
const
  aBalloonIconTypes : array[TBalloonIconType] of Byte = (NIIF_NONE, NIIF_INFO, NIIF_WARNING, NIIF_ERROR);
var
 TheBalloon : BalloonData;
begin
 FillChar(TheBalloon, SizeOf(BalloonData), 0);
 with TheBalloon do begin
  cbSize := SizeOf(BalloonData);
  Wnd := Window;
  uID := IconID;
  uFlags := NIF_INFO;
  StrCopy(szInfo, pchar(BalloonText));
  uTimeout := Timeout * 1000;
  StrCopy(szInfoTitle, pchar(BalloonTitle));
  dwInfoFlags := aBalloonIconTypes[BalloonIconType];
 end;
 Result := Shell_NotifyIcon(NIM_MODIFY, @TheBalloon);
end; 
```

用法 ：

```
procedure MakeBaloonTray;
var
 TrayIconData : TNotifyIconData;
begin
 DZBalloonTrayIcon(TrayIconData.Wnd, TrayIconData.uID, 2,'Test', 'Test', bitInfo);
end; 
```

然后我将所有内容都更改为 WideString：

```
const
 NIF_INFO      =       $00000010;
 NIIF_NONE     =       $00000000;
 NIIF_INFO     =       $00000001;
 NIIF_WARNING  =       $00000002;
 NIIF_ERROR    =       $00000003;

type
 BalloonData = record
 cbSize: DWORD;
 Wnd: HWND;
 uID: UINT;
 uFlags: UINT;
 uCallbackMessage: UINT;
 hIcon: HICON;
 szTip: array[0..MAXCHAR] of WideChar;
 dwState: DWORD;
 dwStateMask: DWORD;
 szInfo: array[0..MAXBYTE] of WideChar;
 uTimeout: UINT;
 szInfoTitle: array[0..63] of WideChar;
 dwInfoFlags: DWORD;
end;

type
 TBalloonTimeout = 2..30;
 TBalloonIconType = (bitNone, bitInfo, bitWarning, bitError);

function StrLCopyW(Dest, Source: PWideChar; MaxLen: Cardinal): PWideChar;
var
 Count: Cardinal;
begin
 Result := Dest;
 Count := 0;
 While (Count < MaxLen) and (Source^ <> #0) do begin
  Dest^ := Source^;
  Inc(Source);
  Inc(Dest);
  Inc(Count);
 end;
 Dest^ := #0;
end;

function StrCopyW(Dest, Source: PWideChar): PWideChar;
begin
 Result := StrLCopyW(Dest, Source, MaxInt);
end;

function DZBalloonTrayIcon(const Window: HWND; const IconID: Byte; const Timeout: TBalloonTimeout; const BalloonText, BalloonTitle: WideString; const BalloonIconType: TBalloonIconType): Boolean;
const
  aBalloonIconTypes : array[TBalloonIconType] of Byte = (NIIF_NONE, NIIF_INFO, NIIF_WARNING, NIIF_ERROR);
var
 TheBalloon : BalloonData;
begin
 FillChar(TheBalloon, SizeOf(BalloonData), 0);
 with TheBalloon do begin
  cbSize := SizeOf(BalloonData);
  Wnd := Window;
  uID := IconID;
  uFlags := NIF_INFO;
  StrCopyW(szInfo, pwidechar(BalloonText));
  uTimeout := Timeout * 1000;
  StrCopyW(szInfoTitle, pwidechar(BalloonTitle));
  dwInfoFlags := aBalloonIconTypes[BalloonIconType];
 end;
 Result := Shell_NotifyIcon(NIM_MODIFY, @TheBalloon);
end; 
```

我也试过：

```
procedure MakeBaloonTray;
var
 TrayIconData   : TNotifyIconData;
 WideStringTest : WideString;
begin
 WideStringTest := 'someunicodechars';
 DZBalloonTrayIcon(TrayIconData.Wnd, TrayIconData.uID, 2,UTF8Encode(WideStringTest), UTF8Encode(WideStringTest), bitInfo);
end; 
```

我认为 Windows 在 Balloons 中支持 UTF8，但我只得到问号。知道如何在气球中显示 WideString/Unicode 吗？感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:11:39.870

您需要显式使用 Shell_NotifyIconW（注意 W）函数及其相关的 WideString 结构，两者都在 ShellAPI.pas 中定义。

# python - 删除可能不存在的文件的大多数pythonic方法

> ID：10840533
> 
> 赞同：563
> 
> 时间：2012-05-31T20:06:14.740
> 
> 标签：python

`filename`如果文件存在，我想删除它。说得对吗

```
if os.path.exists(filename):
    os.remove(filename) 
```

有没有更好的办法？单线方式？

* * *

## 回答 #1

> 赞同：748
> 
> 时间：2012-05-31T20:10:42.817

一种更 Pythonic 的方式是：

```
try:
    os.remove(filename)
except OSError:
    pass 
```

尽管这需要更多的行并且看起来很丑陋，但它避免了不必要的调用`os.path.exists()`并遵循了过度使用异常的python约定。

编写一个函数来为您执行此操作可能是值得的：

```
import os, errno

def silentremove(filename):
    try:
        os.remove(filename)
    except OSError as e: # this would be "except OSError, e:" before Python 2.6
        if e.errno != errno.ENOENT: # errno.ENOENT = no such file or directory
            raise # re-raise exception if a different error occurred 
```

* * *

## 回答 #2

> 赞同：223
> 
> 时间：2014-11-20T16:49:55.593

我更喜欢抑制异常而不是检查文件的存在，以避免[TOCTTOU](http://en.wikipedia.org/wiki/TOCTTOU)错误。Matt 的回答就是一个很好的例子，但是我们可以在 Python 3 下稍微简化它，使用[`contextlib.suppress()`](https://docs.python.org/3/library/contextlib.html#contextlib.suppress)：

```
import contextlib

with contextlib.suppress(FileNotFoundError):
    os.remove(filename) 
```

如果`filename`是一个`pathlib.Path`对象而不是字符串，我们可以调用它的[`.unlink()`](https://docs.python.org/3/library/pathlib.html#pathlib.Path.unlink)方法而不是使用`os.remove()`. 根据我的经验，Path 对象比文件系统操作的字符串更有用。

由于此答案中的所有内容都是 Python 3 独有的，因此它提供了另一个升级理由。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2019-12-04T22:27:58.480

从 Python 3.8 开始，使用`missing_ok=True`and `pathlib.Path.unlink`( [docs here](https://docs.python.org/3/library/pathlib.html#pathlib.Path.unlink) )

```
from pathlib import Path

my_file = Path("./dir1/dir2/file.txt")

# Python 3.8+
my_file.unlink(missing_ok=True)

# Python 3.7 and earlier
if my_file.exists():
    my_file.unlink() 
```

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2012-05-31T20:09:44.557

[`os.path.exists`](https://docs.python.org/2/library/os.path.html#os.path.exists)返回`True`文件夹和文件。考虑使用[`os.path.isfile`](https://docs.python.org/2/library/os.path.html#os.path.isfile)来检查文件是否存在。

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2014-01-14T00:02:39.800

本着安迪琼斯回答的精神，真正的三元运算怎么样：

```
os.remove(fn) if os.path.exists(fn) else None 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-08-24T18:25:08.733

```
if os.path.exists(filename): os.remove(filename) 
```

是单线。

你们中的许多人可能不同意——可能是出于考虑使用三元组“丑陋”的原因——但这引出了一个问题，即我们是否应该倾听那些习惯于丑陋标准的人，当他们称非标准的东西为“丑陋”时。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-10-23T11:51:55.670

另一种了解文件（或文件）是否存在并删除它的方法是使用模块 glob。

```
from glob import glob
import os

for filename in glob("*.csv"):
    os.remove(filename) 
```

Glob 找到所有可以选择带有 *nix 通配符的模式的文件，然后循环列表。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-10-28T15:09:49.580

[Matt 的答案](https://stackoverflow.com/a/10840586/248616)是旧 Python 的正确答案，而[Kevin 的](https://stackoverflow.com/a/27045091/248616)答案是新 Python 的正确答案。

如果您不想复制 的函数`silentremove`，则此功能在[path.py](https://pypi.org/project/path.py)中公开为[remove_p](http://pathpy.readthedocs.io/en/latest/api.html#path.Path.remove_p)：

```
from path import Path
Path(filename).remove_p() 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-04-18T00:25:46.193

在 Python 3.4 或更高版本中，pythonic 方式为：

```
import os
from contextlib import suppress

with suppress(OSError):
    os.remove(filename) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-05-31T20:12:15.847

像这样的东西？利用短路评估。如果文件不存在，则整个条件不能为真，因此 python 不会打扰评估第二部分。

```
os.path.exists("gogogo.php") and os.remove("gogogo.php") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-24T08:01:06.813

亲吻产品：

```
def remove_if_exists(filename):
  if os.path.exists(filename):
    os.remove(filename) 
```

进而：

```
remove_if_exists("my.file") 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-24T14:05:29.680

这是另一种解决方案：

```
if os.path.isfile(os.path.join(path, filename)):
    os.remove(os.path.join(path, filename)) 
```

# javascript - 使用 JavaScript 正确链接到包含随机数的 URL

> ID：10840535
> 
> 赞同：0
> 
> 时间：2012-05-31T20:06:17.480
> 
> 标签：javascript, html, random, hyperlink, numbers

我正在管理一个论坛，我想在我的网站中放置一个访问随机用户个人资料页面的链接。

假设访问个人资料页面的 URL 格式是：[http](http://www.mypage.com/#m=Profile&user_id=XXXXX) : //www.mypage.com/#m=Profile&user_id=XXXXX（其中 XXXXX 是数字），我尝试输入以下 HTML 代码：

```
<a target="_blank" href="http://www.mypage.com/#m=Profile&user_id=" onclick="this.href=this.href.split('?')[0]+(Math.floor(Math.random()*(75800000-59438709))+59438709)">Open a random profile. Click here!</a> 
```

它工作正常，当我单击此链接时，它会访问随机配置文件。但问题是：如果我再次单击该链接，它会访问一个 URL，该 URL 的新随机 ID 号与之前的随机数并列。

我的意思是：第一次，当我单击链接时，我访问 URL **mypage.com/#m=Profile&user_id=**加上随机数（例如 4542），但在第二次尝试时，我访问 URL **mypage.com/#m=Profile&user_id=4542**加上另一个随机数。

为了避免在再次单击以获取正确链接之前刷新，我应该怎么做？

提前感谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:13:27.827

或者，您可以这样做：

```
<a target="_blank"
    href="http://www.mypage.com/#m=Profile&user_id="
    onclick="this.href='#m=Profile&user_id='+(Math.floor(Math.random()*(75800000-59438709))+59438709)">Open a random profile. Click here!</a> 
```

这将创建一个指向仅经过哈希处理的部分的链接，并始终附加正确的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:08:47.207

好吧，你有/#attr1&attr2。

但是在 split 方法中，您在'？尝试使用

```
<a target="_blank" href="http://www.mypage.com/#m=Profile&user_id=" onclick="this.href=this.href.split('#')[0]+(Math.floor(Math.random()*(75800000-59438709))+59438709)">Open a random profile. Click here!</a> 
```

以上将为您提供： [http://www.mypage.com/XXXXX](http://www.mypage.com/XXXXX)其中 XXXXX 是随机数。

对于“ [http://www.mypage.com/#m=Profile&user_id=XXXXX](http://www.mypage.com/#m=Profile&user_id=XXXXX) ”格式，请使用：

```
<a target="_blank" href="http://www.mypage.com/#m=Profile&user_id=" onclick="this.href=this.href.split('#')[0]+'#m=Profile&user_id='+(Math.floor(Math.random()*(75800000-59438709))+59438709)">Open a random profile. Click here!</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:14:38.393

您可以在 & 处使用

```
<a target="_blank" href="http://www.mypage.com/#m=Profile&user_id=" onclick="this.href=this.href.split('&')[0]+'&user_id='+(Math.floor(Math.random()*(75800000-59438709))+59438709)">Open a random profile. Click here!</a> 
```

# android - API 11 之前的 View.getX() 的 Android 等效解决方法？

> ID：10840537
> 
> 赞同：28
> 
> 时间：2012-05-31T20:06:27.767
> 
> 标签：android, android-view

我在视图上使用 getX() 和 getY() 方法来实现一些特殊的拖动逻辑（不是动画，即我从不使用 setX/Y 方法，我只需要 getter 来检查）。

但是，我开始意识到这些仅在 API 11 之后可用。

getX() 的文档说这是添加了“left”属性和“translationX”属性。一切都很好，除了 get/setTranslationX() 也是从 API 11 开始出现的。

我想知道是否有任何关于这个方法在幕后返回的知识，所以我可以提出一个解决方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-26T07:03:43.490

在你的项目中使用`nineOldAndroid.jar`文件并使用这种方式

```
import com.nineoldandroids.view.ViewHelper;

ViewHelper.setTranslationX(myView, translation);

ViewHelper.getX(myView); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-20T03:13:08.283

getLeft() 和 getTop() 怎么样。在我看来，只要视图尚未被翻译（setTranslationX() 和 setTranslationY()），这些在旧 API 中也无效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-30T00:41:13.863

使用`android.support.v4.view.ViewCompat`解决方案是：

```
ViewCompat.getY(mView); 
```

它与旧的 android 设备兼容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:52:13.937

我想它不再相关了，但以防万一有人在寻找它： http: [//nineoldandroids.com/](http://nineoldandroids.com/)

# php - 使用 APC 存储中大量数据的缺点？

> ID：10840541
> 
> 赞同：1
> 
> 时间：2012-05-31T20:07:06.403
> 
> 标签：php, apc

在我的网站上，人们经常尝试使用 tor/其他代理来规避禁令，并且从 blutmagie.de 上的列表中，我已经设法阻止人们在大多数情况下注册 tor 服务器。有一个用于 irc 服务器的工具，称为 blitzed open proxy monitor，它基本上检查多个 dnsbl 上的所有传入连接并相应地禁止它们。是否有任何服务可以为网络服务器执行此操作？

关于标题中的问题：如果我用 APC 加载这个 tor IP（~4000）列表，会导致性能问题吗？我以前从未使用过 APC，所以我不知道它可以准确处理多少数据。

# ruby-on-rails - Rails 3.2：不记得选择选项

> ID：10840542
> 
> 赞同：3
> 
> 时间：2012-05-31T20:07:10.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个奇怪的问题，我的选择选项在提交时没有被记住（并且验证失败，重新加载表单）。

这是我的代码

`<%= form.select :state, options_for_select(us_states), :include_blank => true %>`

下面是一些 us_states 的样子：

```
 def us_states
      [
        ['Alabama', 'AL'],
        ['Alaska', 'AK'], 
```

无论我选择什么，它总是选择在选择框中显示空白选项。如果我根本不使用 :include_blank，它总是只显示阿拉巴马州。所以它只是显示第一个字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T21:11:02.373

通过将所选值作为参数传递给`options_for_select`助手来指定所选值。

```
<%= form.select :state, options_for_select(us_states, form.object.state), :include_blank => true %> 
```

* * *

文档[在这里](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T23:09:57.590

结果我所要做的就是将第二个参数传递给 options_for_select。所以我得到了这个工作

`options_for_select(us_states, @user.state)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:10:13.200

## 好的，轮到我了。

*我会告诉你我如何在我的应用程序中使用它，例如*

**下面的代码形成了选择框。**

```
<%= select("product", "id",options_for_select(MobilesLists.get_colors(mobile.mobile_name))) %> 
```

**MobilesLists.get_colors 的结果如下，**

```
ruby-1.9.2-p290 :011 > MobilesLists.get_colors("Samsung Galaxy Y S5360")

=> [["black", 3], ["bubblegum pink", 5], ["fruity orange", 4], ["metallic grey", 1], ["silver platter", 6], ["white", 2]] 
```

**它返回一个数组数组。所以，现在变成了，**

```
 <%= select("product", "id",options_for_select([["black", 3], ["bubblegum pink", 5], ["fruity orange", 4], ["metallic grey", 1], ["silver platter", 6], ["white", 2]])) %> 
```

**上面的示例生成以下 HTML，**

```
<select id="product_id" name="product[id]"><option value="3">black</option>
<option value="5">bubblegum pink</option>
<option value="4">fruity orange</option>

<option value="1">metallic grey</option>
<option value="6">silver platter</option>
<option value="2">white</option></select> 
```

**现在，在我的控制器中，我将按如下方式访问该值，**

```
if !params[:product][:id].nil?

  @product_id = params[:product][:id].to_i

end 
```

## 就是这样！，谢谢！

# asp.net-mvc-3 - 实体疑问 - 遵循 Contoso 大学教程

> ID：10840544
> 
> 赞同：0
> 
> 时间：2012-05-31T20:07:35.047
> 
> 标签：asp.net-mvc-3, entity-framework-4, ef-code-first, entity

我一直在关注 Microsoft 网站上的 contoso 大学教程，但我对 Entity Framework 如何做一些事情有一些疑问。开始了...

在教程开始时，我们创建了三个类，它们将在我的数据库中转换为表。

我想知道实体何时以及如何实例化我的类以填充对象。

我使用代码优先的方法。

例子：

我正在使用的课程：

```
public class Course
{
    public int CourseID { get; set; }
    public string Title { get; set; }
    public int Credits { get; set; }
    public virtual ICollection<Enrollment> Enrollments { get; set; }
}

public class Enrollment
{
    public int EnrollmentID { get; set; }
    public int CourseID { get; set; }
    public int StudentID { get; set; }
    public decimal? Grade { get; set; }
    public virtual Course Course { get; set; }
    public virtual Student Student { get; set; }
}

public class Student
{
    public int StudentID { get; set; }
    public string LastName { get; set; }
    public string FirstMidName { get; set; }
    public DateTime EnrollmentDate { get; set; }
    public virtual ICollection<Enrollment> Enrollments { get; set; }
} 
```

遵循教程后，我现在可以列出所有我`Students`和他们各自的`Course`的所有属性，以及它们的属性。

实体何时实例化我的`Student`类并用相应的类填充它`Enrollment`（s）列表填充它？

它如何知道哪些注册与该学生相关联？我没有看到任何新的构造函数（）被调用。

这可能很简单，但我有点迷失在这里。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T04:44:20.897

它不会提前实例化任何东西，也不必这样做。而且表格中也不会有任何代表虚拟财产的东西。

EF 在运行时使用这些虚拟属性来存储导航信息，并且集合可以为 null 或包含 0 个或多个元素。没有魔法，EF 在需要时“更新”集合只是设计使然。

如果你想明确一点，你也可以在你的 POCO 上创建一个构造函数，并将你的集合设置为一个新的哈希表。

# objective-c - 从 indexPath / Swip Gesture 获取单元格的名称

> ID：10840547
> 
> 赞同：0
> 
> 时间：2012-05-31T20:07:53.527
> 
> 标签：objective-c, ios, uitableview, uiswipegesturerecognizer

**情况**

当用户滑动单元格（以显示“删除”按钮）时，我希望能够获取有关 UITableView 中单元格标题的信息。

**编码**

当用户在 UITableView 中滑动单元格时，会触发此方法：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath*)indexPath 
```

**问题**

我需要能够获取用户“刷过”的单元格的名称，以便我的 iOS（Obj-C）应用程序可以执行各种操作等。

**其他一切**

我知道 indexPath 有一些东西，但我无法从中获取 NSString （这是我需要的）。

我还认为使用手势识别器而不是上述方法等解决方法可能能够为我提供有关单元格的更多信息。

关于当用户“滑动以编辑/删除”时如何获取单元格名称的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:53:35.210

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *text = cell.textLabel.text;

    // do something with text
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:29:59.347

拜托，你的桌子首先是如何工作的——你似乎不了解它的基本原理。您使用数据模型备份您的表格。您为每个 indexPath 提供并构建单元格，因此您应该知道如何使用该滑动的 indexPath 访问模型中的数据，不是吗？当然，您也可以通过调用 tableView:cellForRowAtIndexPath: 向 tableView 委托（您自己）询问滑动单元格，然后检查该单元格上的标签。

看看你的 tabkeView:cellForRowAtIndexPath: 方法的实现，你所有关于如何获取数据的信息都应该在那里......

总而言之，这很容易，如果您提供一些代码，您肯定会得到更多提示。

# android - 有人能解释一下这个例子中可声明样式的 XML 标记及其使用背后的理论吗？

> ID：10840548
> 
> 赞同：10
> 
> 时间：2012-05-31T20:08:13.353
> 
> 标签：android, attr, declare-styleable

我正在阅读“开始 Android 4 开发”，在第 5 章中讨论了*Gallery*和*ImageVievs*，并介绍了可*声明样式的*XML 标记，但没有解释其用途。我还试图在参考资料上找到一些信息，但没有运气。例如，我们有以下几点：

**资源/值/attrs.xml**

```
<?xml version=”1.0” encoding=”utf-8”?> 
<resources>
    <declare-styleable name=”Gallery1”&gt;
        <attr name=”android:galleryItemBackground” />
    </declare-styleable>
</resources> 
```

**例子.java**

```
public class GalleryActivity extends Activity {
[...]
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState);    
        setContentView(R.layout.main);
        Gallery gallery = (Gallery) findViewById(R.id.gallery1);
        gallery.setAdapter(new ImageAdapter(this)); 
        [...]
    }

    [...]

    public class ImageAdapter extends BaseAdapter {
        [...]
        int itemBackground;

        public ImageAdapter(Context c) {
            context = c;
            //---setting the style---
            TypedArray a = obtainStyledAttributes(
            R.styleable.Gallery1); 
            itemBackground = a.getResourceId(
                        R.styleable.Gallery1_android_galleryItemBackground, 0);
            a.recycle();
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView;
            [...]
            imageView.setBackgroundResource(itemBackground);
            return imageView; 
        }
    }
} 
```

我已经阅读了几次代码，但我真的不明白用一个仅具有*name*属性的单个*attr子项定义这个可样式**化 Gallery1*的目的。你能帮我吗？这个*galleryItemBackground*是系统提供的还是我们定义的？我们在这段代码中做了什么？

 ***预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T07:25:25.023

此标记是定义在 中的一组预制 Android 属性的一部分，除了属性名称之前的 xml 命名空间前缀中[`R.Styleable`](http://developer.android.com/reference/android/R.styleable.html)的自定义样式标记外，还可以区分这些属性。`android:`

此特定属性描述为：

> 图库项目的首选背景。这应该设置为您从适配器提供的任何视图的背景。

但是，您是对的，自定义属性标签不仅需要属性的名称，还需要其类型，例如，向`attrs.xml`文件中添加自定义元素可能如下所示：

```
<?xml version="1.0" encoding="utf-8"?> 
<resources> 
    <declare-styleable name="MyCustomView"> 
        <attr name=”android:galleryItemBackground” />              
        <attr name="myCustomAttr" format="string" /> 
    </declare-styleable> 
</resources> 
```

请注意，第二个属性也缺少`android:`命名空间。

**编辑：**

> 有没有任何官方文档页面可以深入解释这个 Styleables？

查看[`R.attr`](http://developer.android.com/reference/android/R.attr.html)（点击查看链接）Android 中包含的各种属性。您不需要为它们声明类型，因为它们都已声明。要知道为特定属性声明了什么类型，请查找您感兴趣的描述。 `galleryItemBackground`正如您所料，它是对另一个资源的引用；其他可能性是布尔值、浮点数、颜色等。

附加参考：Andtoid 使用`<declare-styleable>`标签创建一个[`AttributeSet`](http://developer.android.com/reference/android/util/AttributeSet.html). [`TypedArray`](http://developer.android.com/reference/android/content/res/TypedArray.html)用于解析`AttributeSet`.

> 如果上面代码的目的 [...] 只是为视图的背景获取默认的 Drawable，我不能用 getDrawable(android.R.attr.galleryItemBackground) 设置变量 itemBackground 吗？

在示例中，当只有一个属性时，很难看出这种模式的用处。你可以按照你的要求去做，这可能会更容易。然而，该结构是 Android 将 UI 的“外观”与其“功能”区分开来的一部分，它允许您在 xml 中设置某些属性，而不必在代码中做所有事情。以`View`课堂为例。它有 30 多个可以在 xml 文件中设置的属性（大小、填充、可点击、可聚焦等）；制作自定义子类的人`View`可以在 xml 中设置一些、全部或不设置这些属性，并且在创建视图时会自动为您处理它们。如果需要，可以使用等效代码来设置属性，但想象一下每次子类化`View`您必须在代码中设置所有属性，而不是在 xml 中设置它们。

为你的类创建你自己的资源来做同样的事情也是一件小事，但是如果你不覆盖它们，使用内置样式将提供与 Android 框架的外观和感觉相匹配的默认资源。

希望这可以帮助。***

# ios - 当标头不丢失时，xcode 中出现错误“体系结构 i386 的未定义符号”

> ID：10840550
> 
> 赞同：4
> 
> 时间：2012-05-31T20:08:31.403
> 
> 标签：ios, xcode, ios5

当我尝试编译我的 iPhone 应用程序并在模拟器中运行它时，我收到了抱怨未定义符号的错误。所有这些符号都对应于我的项目中包含且未丢失的类。

例子：

```
"_OBJC_CLASS_$_SHKFacebook", referenced from:
      objc-class-ref in FooAppDelegate.o
      objc-class-ref in FooLandingPageViewController.o
      objc-class-ref in FooAppDelegate.o 
```

但该项目并没有缺少 SHKFacebook.h。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T20:35:56.930

我在这个项目中有多个 Xcode 目标，当我将文件添加到项目中时，我将它们添加到错误的目标下，使它们对我试图构建的目标不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T21:07:49.400

SHKFaceBook.h 是您的文件还是来自图书馆的文件？

如果它来自库，请单击您的项目目标并选择 Build Phases 选项卡，然后选择 Link Binary With Library 部分并确保添加了库。

如果 SHKFaceBook.h 不是来自库，那么如果相应的 .m 文件不存在，则包含 .h 文件的事实是无关紧要的。如果 .m 文件已经在您的 XCode 项目中，则从 Build Phases 选项卡中选择 Compile Sources 并确保必要的文件在那里。

仅供参考，这是一个链接错误，链接错误与编译错误不同。源文件可以仅使用标头进行编译，但如果没有实际代码，则无法链接和构建它们。头文件不是代码，它更像是对代码中内容的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:18:58.287

在我看来，您链接的库仅是为 arm 平台编译的，而不是为 i386 编译的 - 如果您有源代码，请尝试干净/重新构建？

# python - 访问另一个类的函数而不在每个实例中引用？

> ID：10840553
> 
> 赞同：0
> 
> 时间：2012-05-31T20:08:41.480
> 
> 标签：python, last.fm

在下面的代码中，`User`类需要访问类`get_user`实例中 的函数`WebService`，因为它包含与 Web 服务器 (last.fm) 进行身份验证所需的其他函数。实际代码在[这里](https://github.com/randomchars/pyfm)。

```
class WebService:

    def __init__(self, key):
        self.apikey = key

    def get_user(self, name):
        pass # Omitted

class User:

    def __init__(self, name, webservice):
        self.name = name
        self.ws = webservice

    def fill_profile(self):
        data = self.ws.GetUser(self.name)
        # Omitted 
```

问题是需要在每个“用户”内部保存一个引用。还有另一种方法吗？或者只是我把事情复杂化了，这就是它在现实世界中的实际运作方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:36:19.820

如果 Web 服务对象对所有用户都相同，您当然可以将引用[设为静态变量。](https://stackoverflow.com/questions/68645/static-class-variables-in-python)

语法是：

```
class User:
    webservice = ...
... 
```

然后，您甚至可以从`User`实例访问它，但不能以这种方式分配给它，这需要`User.webservice`语法。

您还将获得评论中建议的良好设计替代方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T21:13:57.977

根据要求：至于处理诸如 get_top_albums 和 get_friends 之类的事情，这取决于您要如何对系统进行建模。如果您不想在本地缓存数据，我会说每次都使用用户 ID 调用服务。如果您确实想在本地缓存数据，您可以将 User 对象传递给 WebService 中的方法，然后让该方法填充 User 的成员。您必须做出设计决定，要么拥有一个 WebService 和一个用户（可能是最好的），要么只是一个 UserWebService。

# objective-c - 可以在 coredata 中存储 jpg 图像使 iCloud App 更容易

> ID：10840559
> 
> 赞同：0
> 
> 时间：2012-05-31T20:08:51.387
> 
> 标签：objective-c, core-data, ios5, icloud

我有一个在 iCloud 中使用 CoreData 的 iOS 5.1 应用程序。用户也可以拍照并将其保存在 iCloud 上。目前我只在一个实体中保存一个属性图片YES或NO，它应该代表拍照事件，假设它是一种日记。

当是时，我可以计算路径并检索图像。实际上保存了三张jpg图片，一个小用于UITableCell，一个中号用于iPhone，一个大号用于iPad。最大大小可以是最大大约 100kb。

一切正常，但我必须在应用程序中添加一些繁重的逻辑，例如决定图像是否进入 iCloud，以及在删除的情况下，图像是否也可以删除或移动到本地。

在我的开发生涯中，我从未选择将图像或二进制文件保存在数据库中，但这次我在想，如果在后台发生的 CoreData 同步可以使我的应用程序更加可靠，并让我删除一些代码行。这个想法是为实体添加三个属性，或者可能是为了延迟问题，在另一个实体中根据需要加载。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:25:24.350

我肯定会避免在数据库中存储任何图像数据。我有一个在数据库中存储缩略图的应用程序，效果很好。当我尝试迁移到 iCloud 时，我注意到由于图像数据，同步时间显着增加。如果您的数据库有多个条目，我会说几秒钟到几分钟。我现在将所有内容存储在文件夹中并测试不同的方法，以允许用户决定他们希望或不希望将哪些图像保存在云中。

如果您的数据输入将保持较小，我认为它可能仍然值得一试，但发展知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:07:06.880

我认为至少将小图像存储在数据库中是有意义的。这应该是非常有效的，不会过于依赖网络，并且 - 最重要的是 - 不会使 iCloud 商店变得太大。

Apple 对 iCloud 中“负责任的”数据存储非常坚定。请参阅iOS 编程指南中的“[成为负责任的 iCloud 应用程序”部分。](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/iCloud/iCloud.html#//apple_ref/doc/uid/TP40007072-CH5-SW1)那里说

> 利用 iCloud 存储功能的应用程序在存储数据时应该负责任地行事。每个用户帐户中的可用空间是**有限**的，并且**由所有应用程序共享**。

因此，我会避免在您的 iCloud 核心数据存储中存储大图像。

# excel - 如何使用 VBA 将字符串替换为 ID？

> ID：10840560
> 
> 赞同：0
> 
> 时间：2012-05-31T20:08:53.120
> 
> 标签：excel, text-files, vba

我搜索了这个问题的答案，但似乎人们回答它的唯一方法是使用 Excel 函数。我在 Excel 中有一个文件，我将其加载到文本文件中，但每周都会出现新数据。我需要用它们各自的代码替换第一列中的市场名称，这些代码在[这个](http://i.imgur.com/u8EOo.png)[单独](http://i.imgur.com/oMo1g.png)的工作表中，但在同一个 Excel 文件中。

例如，我希望将所有“加拿大美元-芝加哥商品交易所”单元格替换为“CAD”，将所有“瑞士法郎-芝加哥商品交易所”单元格替换为“SWF”等。

我希望 Excel 文件中的名称保持不变，并且仅在我将它们传输到文本文件时才更改。但是，如果它更难做到，那不是必需的。

作为参考，这是我用来写入文本文件的代码：

```
Sub getData1()
On Error GoTo ErrHandler:
''Finding Row Information
Dim Ticker As String
Dim rCount As Integer, i As Integer, j As Integer, rcCount As Integer, rowStr As String
rCount = Application.CountA([RDRows])
rcCount = Application.CountA([RDCols])
Myfile = "H:\wkoorbusch\Desktop\" & "CFTC_Fin_Data.txt"

Dim fnum As Integer
fnum = FreeFile
Open Myfile For Output As fnum
For i = 1 To rCount
    For j = 1 To rcCount
        rowStr = [Start].Offset(i, 0).Value & "," & [Start].Offset(0, j).Value _
        & "," & Format([Start].Offset(i, 2).Value, _
        "mm/dd/yyyy") & "," & [Start].Offset(i, j).Value
        Print #fnum, rowStr
    Next j
Next i
Close fnum
Exit Sub

ErrHandler:
    Close fnum
End Sub 
```

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T04:03:18.657

将文本及其替换放在电子表格的 2 列中，然后使用

```
On Error Resume Next
Application.WorksheetFunction.VLookup(MyText,range("Sheet1!A1:B300"),2,False)
If Err.Number=1004 then msgbox "Value " & MyText & " not found" 
```

返回替换文本。未找到查找值时，返回可捕获的 err.Number 1004。

（功能上等同于`VLOOKUP`电子表格公式）

# .net - 为什么使用 ImportingConstructor 属性？

> ID：10840568
> 
> 赞同：16
> 
> 时间：2012-05-31T20:09:16.713
> 
> 标签：.net, mef

我试图了解什么时候`[ImportingConstructor]`比用`[import]`. 是个人喜好，还是允许由其他 DI 容器构建类的东西，或者有什么好处`[import]`？

我认为，如果您不想公开公共属性，但 MEF 也会解析私有字段，那么再次，好处在哪里？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-31T20:17:15.160

using 的问题`[Import]`在于它将对象的创建分为两个不同且可观察的阶段：创建和初始化。Where`[ImportingConstructor]`允许它像其他所有 .Net 对象一样保持为单个阶段。

这种差异可以通过多种方式观察到

1.  在字段上添加新`[Import]`的会更改类型的逻辑契约。然而，它不会改变公共或使用合同。这意味着即使对象依赖项发生了变化（想想单元测试），之前编译的任何代码都将继续编译。这需要编译时错误并使其成为运行时错误。
2.  如果您有`[Import]`. 合同验证引擎正确识别所有字段都可以作为`null`值存在，并且在每次使用字段之前都需要进行检查。
3.  即使您的对象在逻辑上可以具有在初始化时设置并且之后永远不会重置的字段，您也不能`readonly`像使用普通 C# 对象那样表达这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-01T11:04:49.783

与其单纯从 MEF 的角度思考，不如从更广泛的意义上来看待你的课程设计。通常，当您设计一个类时，您有一组关联的属性，这些可能是服务，例如，

```
public class MyService
{
  public ILogger Logger { get; set; }

  public void SaySomething()
  {
    Logger.Log("Something");
  }
} 
```

现在，我可以继续创建一个实例：

```
var service = new MyService(); 
```

现在，如果我尝试使用该方法：

```
service.SaySomething(); 
```

如果我不明确知道我还必须初始化我的`Logger`属性：

```
var service = new MyService() { Logger = new ConsoleLogger() }; 
```

（或者）：

```
var service = new MyService();
service.Logger = new ConsoleLogger(); 
```

然后错误直到运行时才会变得明显。如果我们要重新定义类：

```
public class MyService
{
  private readonly ILogger _logger;

  public MyService(ILogger logger)
  {
    if (logger == null) throw new ArgumentNullException("logger");

    _logger = logger;
  }

  public void SaySomething()
  {
    _logger.Log("Something");
  }
} 
```

现在，如果您尝试创建 的实例`MyService`，则必须明确提供此附加服务 ( `ILogger`) 才能正确初始化对象。这有助于多种方式：

1.  您表达了您的类型所需的依赖关系，这形成了一个初始化契约，必须满足该契约以确保在*可用*状态下创建类型。
2.  通过确保将服务传递给您的类型来降低运行时错误的风险。

您可以通过使用代码合同（如@JaredPar 所述）在编译时进行静态检查来进一步改进此设计。

就 MEF 而言，您可以使用 using`[Import]`而不是，`[ImportingConstructor]`因为当 MEF 不能满足类型的所有导入时，它会抛出异常，并且只会在初始化 ( `[ImportingConstructor]`) 和`[Import]`s 之后返回类型。

构造函数注入通常是可取的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T20:17:30.983

通过使用`[ImportingConstructor]`，您允许一个用作导出的类来导入其依赖项。这极大地简化了架构，因为您可以将具体对象的依赖关系与其实现分离。

通常，您会使用`[ImportingConstructor]`本身标记为`[Export]`. 组合类型后，MEF 将提供构造函数参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T23:10:07.367

构造函数参数也不支持重组。

# android - 没有关闭按钮的 Eclipse Android SDK 管理器窗口

> ID：10840571
> 
> 赞同：2
> 
> 时间：2012-05-31T20:09:41.113
> 
> 标签：android, eclipse

在我的 ubuntu 12.04 LTS 工作站上，我使用 eclipse Indigo 3.7.2 来开发 android 应用程序。

当我使用菜单“Window / Android SDK Manager”更新 android SDK 时，会出现一个包含可用包列表的新窗口。

问题是这个窗口没有任何按钮来关闭它。所以我不得不终止 eclipse 进程或重新启动工作站以摆脱这种情况。

我一个人有这个问题吗？

![在此处输入图像描述](../Images/51cd59eb47800e9a385d53d804bed82a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:54:05.580

我在运行 eclipse juno 并使用最新的 android 工具 21.1 的 Fedora 18 上也遇到了同样的问题，但是通过按退出按钮解决了问题

# oracle - 在调用 PL/SQL 过程时包含模式名称在一种模式中不起作用，但在另一种模式中起作用

> ID：10840575
> 
> 赞同：1
> 
> 时间：2012-05-31T20:09:47.447
> 
> 标签：oracle, plsql, oracle11g, oracle-sqldeveloper

尝试 SQLDeveloper 的单元测试功能时出现此问题。

在对在我的模式中创建的过程运行测试时，我看到一个错误，但是当在 oracle 提供的模式之一中运行相同的过程时，它可以正常工作。

SQL Developer 生成以下调用：

1）这个不起作用（错误如下所示）：

```
BEGIN
 "IANC"."SIMPLE_PARAMETER"(P_X => 123);
END; 
```

2）这个做：

```
BEGIN
 "HR"."SIMPLE_PARAMETER"(P_X => 123);
END; 
```

这是程序：

```
CREATE OR REPLACE PROCEDURE SIMPLE_PARAMETER 
(
  P_X IN NUMBER  
)
IS
BEGIN

  null;

END SIMPLE_PARAMETER; 
```

以下是 SQLPLUS 的输出，您可以在其中看到该过程何时在我的架构中运行我看到一个错误，而在另一个架构中运行相同的过程时该过程按预期工作：

![在此处输入图像描述](../Images/8b250238d0a0eeb22512a7343311c570.png)

如有需要，我正在使用 Oracle Enterprise Edition 11.2.0.1.0

**更新**

显示程序签名的屏幕截图

![在此处输入图像描述](../Images/55ac11906242073b88453f73526b0bfc.png)

我还应该提到，如果我从过程调用中删除模式名称，那么过程会按预期运行并完成。

提前感谢您收到的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:17:34.400

您确定 IANC 中的 SIMPLE_PARAMETER 程序与 HR 中的程序相同（或至少具有相同的签名）吗？你从 `DESCRIBE "IANC"."SIMPLE_PARAMETER" 中得到什么。

（PS 因为你的标识符都是大写的，你根本不需要双引号。）

**补充**：另一种可能性是您在 IANC 模式中有一个名为 IANC 的包，因此 Oracle 正在该包中寻找一个名为 SIMPLE_PARAMETER 的过程，该过程不存在。例子：

```
SQL> exec bigdecimaltest

PL/SQL procedure successfully completed.

SQL> exec dcosta.bigdecimaltest

PL/SQL procedure successfully completed.

SQL> create or replace package dcosta as
  2  end;
  3  /

Package created.

SQL> exec dcosta.bigdecimaltest
BEGIN dcosta.bigdecimaltest; END;

             *
ERROR at line 1:
ORA-06550: line 1, column 14:
PLS-00302: component 'BIGDECIMALTEST' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

这似乎是错误的行为——如果将名称解析为 package.member 的尝试不成功，我认为 Oracle 应该将其作为 schema.object 尝试，但它看起来就像在包名称上找到匹配项它不会重新考虑这一点。

# asp.net-mvc - 在 razor 视图中使用字符串格式来连接 javascript 变量

> ID：10840577
> 
> 赞同：1
> 
> 时间：2012-05-31T20:09:51.377
> 
> 标签：asp.net-mvc, razor, string.format

我该怎么写

```
var releaseName = $('#SelectedReleaseId option:selected').text()
var templateName = $('#SelectedTemplateId option:selected').text() 
```

这个：

```
$("#TestplanName").text(releaseName + '-' + templateName + '-' + '@Model.UserId' + '-' + '@Model.CreatedAt'); 
```

进入：

```
$("#TestplanName").text( '@string.Format("{0}-{1}-{2}-{3}",releaseName,templateName,@Model.UserId,@Model.CreatedAt)'); 
```

releaseName 和 templateName 未知...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:12:38.257

你不能。

您正在尝试将**客户端**变量（仅存在于客户端的 Javascript 中）与服务器端代码混合。

相反，您可以使用 Javascript 等效的`string.Format`.

# entity-framework - 架构设计 - MVC、EF、Rep、UoW、WCF、DI

> ID：10840579
> 
> 赞同：2
> 
> 时间：2012-05-31T20:10:09.373
> 
> 标签：entity-framework, repository, poco, asp.net-mvc-4, unit-of-work

**架构设计**

为我正在整合的新架构寻找一些建议。

**使用工具：**

*   MVC 4（如果您有 MVC 3 的示例就足够了）
*   实体框架 4.1 (EF)
*   存储库模式
*   工作单元
*   POCO（T4 自动生成）
*   WCF（用于 CRUD 函数。使用具体服务类检索数据）
*   依赖注入（Ninject）
*   模拟（最小起订量）

任何其他好的工具让我知道。

如果 EF 被证明不值得，那么坚决将 EF 用于 ORM，而 NHibernate 是第二个选择。

**到目前为止我做了什么**

1) Presentation Project (MVC4, DI For services, Service Channel setup, View Models) -> 参考领域项目(2)

2）领域项目（POCO实体、领域对象、服务接口）->参考业务项目（3）

3) 业务项目（WCF 服务、具体服务类、工作单元）-> 参考数据项目(4)

4) 数据项目（EF、Context + .edmx、存储库及其接口）-> 查看数据库

**问题1：**这是一个好的项目分解吗？ **问题 2：**这是将任何提到的项目放在括号中的好地方吗？ **问题 3：**有什么东西应该放在我完全遗漏的地方吗？

**一些旁注：** 我们有很大的记录集，我们检索到的记录很容易超过 100,000 条。我们只是调用一个具体的服务类来提高性能，而不是通过 WCF 服务。我们超过了最大消息大小，加上通过 WCF 检索记录所需的时间是原来的两倍。

**问题4：**有没有更好的方法来做到这一点？性能是关键。可重用性不是

域对象有一个属性，即它对应的任何 POCO。示例：我有一个名为“Order”的域对象。它有一个单一的属性“OrderPOCO”，它包含所有的属性。然后域对象具有验证方法并引用必要的 CRUD 函数。

**问题 5**：应将“此记录是否已存在”等复杂验证放在哪里？可以只在服务本身中完成吗？

**问题 6：**域对象甚至是必要的吗？据我所知，如果大多数其他示例使用的是 POCO，则它们没有域模型。只是对这个想法有点困惑。

对不起，这很长。任何答案将不胜感激，但全面的答案将成倍增加。我们可以选择工具来做不同的事情，但让它们正确地协同工作是困难的部分。

欢迎批评！

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:32:55.927

**问题 1、2 和 3**：我经常看到仅包含三层的架构布局。但是，如果您想保持您的域项目层和业务项目层分离和解耦，那么您可以在不影响另一个的情况下更改一个，您当然应该将它们保存在单独的程序集中。但是 POCO 实体、工作单元和具体服务实现通常与领域和应用程序的业务规则密切相关，因此您可以考虑将这两层合并到一个程序集中。

我会将存储库接口向上移动到业务层，从业务层删除对数据层的引用，并让 UI 层引用数据层。然后，UI 层的构造函数将具体的存储库注入到域/业务层中。这可以使您的域/业务层保持对依赖于技术的数据组合的引用的清洁。

**问题 4：** 如果性能很重要，我只会调用具体的服务类。

**问题 5：** 我不确定您所说的“复杂验证”是什么意思。

**问题 6：** EF 可以为您自动生成 POCO，并将它们放置在 .edmx 之外的另一个程序集中。见[这篇](http://blogs.msdn.com/b/adonet/archive/2010/01/25/walkthrough-poco-template-for-the-entity-framework.aspx)文章。这样，您的 POCO 仅依赖于 T4 模板，而不是硬耦合到 EF。

# c# - 我是否需要为针对 xsd 架构的 xml 验证编写自己的验证器？

> ID：10840581
> 
> 赞同：1
> 
> 时间：2012-05-31T20:10:13.127
> 
> 标签：c#, xml, validation, xsd, schema

我正在尝试支持我的用户创建基于 xsd（xml 架构）的 xml。所以我展示了可能的元素，用户可以将它添加到 xml。但是，我无法确定可能的元素或验证用户添加的内容是否正确。如何检查复杂元素？

假设我们有一个序列元素。我将如何检查用户是否在正确的位置添加了元素？假设我们有一个选择元素。我将如何检查是否已经添加了来自另一个粒子的元素？

我可以根据 c# 中的模式验证 xml，但它返回的错误可以（可能）显示给用户，但我不能在我的代码中使用它们，因为格式不适合，它只是没有返回足够的细节.

我是否需要编写自己的验证器（并实现所有 w3c 规范）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:17:23.357

您不需要实现自己的验证器。 `XmlSchemaValidator`实际上会给你大量的信息。在这里查看我自己的类似问题的答案：[XML Schemas -- List allowed attributes/tags at position in XML](https://stackoverflow.com/q/6823866/213901)

# resharper - 保存失败时运行 resharper 静默清理

> ID：10840582
> 
> 赞同：1
> 
> 时间：2012-05-31T20:10:13.127
> 
> 标签：resharper, code-cleanup, visual-studio-macros

我正在尝试使用 Resharper 的清理代码功能在保存时清理我的代码。我做了一个处理`DocumentSaved`事件的宏。重要部分：

```
Private Sub DocumentEvents_DocumentSaved(ByVal document As EnvDTE.Document) _
                                         Handles DocumentEvents.DocumentSaved
    ...
    DTE.ExecuteCommand("ReSharper_SilentCleanupCode")
    document.Save()
End Sub 
```

每次我保存时，我都会收到一条异常消息，上面写着`Error HRESULT E_FAIL has been returned from a call to a COM component.`任何想法？

注意：我看到[如何在保存时配置 ReSharper 的代码清理？](https://stackoverflow.com/questions/3071953/how-can-i-configure-resharpers-code-cleanup-on-save)它在我的情况下不起作用，因为我需要响应保存事件。将宏映射到 CTRL+S 是不够的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:19:51.723

我认为这是因为当您调用`document.Save()`它时，它会再次递归和保存，然后它就会崩溃。尝试这个：

```
Private Sub DocumentEvents_DocumentSaved(ByVal Document As EnvDTE.Document) Handles DocumentEvents.DocumentSaved
    Static currentDocument As EnvDTE.Document

    If Not currentDocument Is Document Then
        currentDocument = Document
        DTE.Windows.Item(Document.Name).Activate()
        DTE.ExecuteCommand("ReSharper_SilentCleanupCode")
        DTE.ActiveDocument.Save()
    End If
End Sub 
```

这对我有用

# dom - .bind 到 .each 循环中的 dom 对象

> ID：10840595
> 
> 赞同：2
> 
> 时间：2012-05-31T20:11:28.827
> 
> 标签：dom, javascript-events, jquery

我正在使用 each 遍历 DOM 元素，但是当元素在 .each 循环中可用时，它们将不接受 jQuery 绑定事件。

```
$('#products .page_item').mouseover(function(){
   console.log('this works, adding the mouseover to every selected element');
});

$('#products .page_item').each(function(index, element){
    element.mouseover(function(){
        console.log("this throws 'not a function'");
    });
}); 
```

如何使每个元素在 .each 循环中可用，以便将事件绑定到它们？

谢谢大家。

（我以这种方式迭代元素，因此我可以有条件地从绑定 FWIW 中排除一些元素。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:13:17.763

您需要包装`element`在 jQuery 对象中：

```
$(element).mouseover(function(){ 
```

`element`(或`this`) 是 DOM 元素，而不是 jQuery 对象。

**完整代码已修复：**

```
$('#products .page_item').each(function(index, element){
    $(element).mouseover(function(){
        console.log("This works!");
    });
}); 
```

从[`each`文档](http://api.jquery.com/each/)：

> .each() 方法旨在使 DOM 循环结构简洁且不易出错。**当被调用时，它会遍历作为 jQuery 对象一部分的 DOM 元素。**每次回调运行时，都会传递当前循环迭代，从 0 开始。**更重要的是，回调是在当前 DOM 元素的上下文中触发的，因此关键字 this 指的是该元素。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:16:29.737

**试试这个代码：**

```
$('#products .page_item').mouseover(function(){
   console.log('this works, adding the mouseover to every selected element');
});

$('#products .page_item').each(function(index, element){
    $(element).mouseover(function(){
        console.log("this throws 'not a function'");
    });
}); 
```

# .net - 在 C# visual2005 中使用 XmlAttribute() 检索

> ID：10840596
> 
> 赞同：0
> 
> 时间：2012-05-31T20:11:29.190
> 
> 标签：.net, xml, database, xml-serialization, c#-2.0

我正在尝试做一些事情，这可能非常简单，所以请多多包涵，我只想将 XML 文件中的属性转换为我的 C# 代码中的字符串。这就是我所拥有的：

XML:

```
<MonitorResponseRecord Enabled="false" DisplayName="ValveFailureAtCentralPosition">
        <ExpressionMonitor>
        <AlarmName>Valve_Position_Fault</AlarmName>
            <Parameter> Sensor Position = {X}</Parameter>
        </ExpressionMonitor>
</MonitorResponseRecord>
<MonitorResponseRecord ...  ... ...>
... ...
... ... and so on about 1600 times. 
```

C＃：

```
[Selrializable]
[XmlType("Alarm")]  
public class AlarmDefinition
    {
        public AlarmDefinition() {}
        public AlarmDefinition Clone()
        {
            AlarmDefinition clone = new AlarmDefinition();
            clone.DisplayName = DisplayName;
                          clone.Category = Category;
        clone.Color = Color;
        clone.Description = Description;
                          return clone;

                 }

    [XmlAttribute( ??????????? )] public string DisplayName = ""; 
```

所以有人知道我在'?????????????'中需要什么 部分？我试过了：

```
[XmlAttribute("MonitorResponseRecord",AttributeName = "DisplayName")] public string DisplayName = ""; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:16:39.550

由于属性是`@DisplayName`，那要么就是：

```
[XmlAttribute]
public string DisplayName = ""; 
```

或者，更明确地说：

```
[XmlAttribute("DisplayName")]
public string DisplayName = ""; 
```

（虽然属性比公共领域更可取，IMO）

真正的问题似乎是根名称。它是 xml 文档的最外层，您需要：

```
[XmlRoot("MonitorResponseRecord")]
public class AlarmDefinition {...} 
```

# java - log4j - 同时将 System.out 和 System.err 记录到控制台

> ID：10840598
> 
> 赞同：0
> 
> 时间：2012-05-31T20:11:41.593
> 
> 标签：java, log4j, out

我们有一个 java webapp，它以各种语言/java、perl、bash、python 等.../ 调度和运行其他几个工具，并使用 StreamGobblers“吃掉”它们的输出/错误流以进行故障排除；

是否可以在核心 java app/ 中使用 log4j / 来记录 System.err 和 System.out，以便可以按照上述方式捕获它们？

这不会导致输出和错误消息交错/出现乱序/吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:16:31.110

是的。log4j 可用于将 System.err 和 System.out 记录到单独的文件/流中。

是的。消息可以交错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:38:49.120

是的，这是可能的。查看此文档：

[http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/ConsoleAppender.html](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/ConsoleAppender.html)

# asp.net - vb.net 单选按钮列表检查是否选中

> ID：10840599
> 
> 赞同：3
> 
> 时间：2012-05-31T20:11:48.717
> 
> 标签：asp.net, vb.net

我有以下内容：

```
 <asp:RadioButtonList ID="rbIsRep" runat="server"  RepeatDirection="horizontal" >
        <asp:ListItem Value="1" >Yes</asp:ListItem>
        <asp:ListItem Value="0" >No</asp:ListItem>
    </asp:RadioButtonList> 
```

如何检查单选按钮列表是否有任何选定项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T20:20:56.867

使用该属性[`SelectedIndex`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindex) 检查是否选择了任何内容，并使用该[`SelectedItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selecteditem)属性来获取所选项目的文本：

```
If rbIsRep.SelectedIndex > - 1 Then
    Dim selectedItemsText = "You selected: " & rbIsRep.SelectedItem.Text
End If 
```

您可以以编程方式更改选择，例如使用[`SelectedValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue)属性。

```
rbIsRep.SelectedValue = "0" 
```

或从 aspx 声明

```
<asp:RadioButtonList ID="rbIsRep" runat="server"  RepeatDirection="horizontal" >
    <asp:ListItem Value="1" >Yes</asp:ListItem>
    <asp:ListItem Selected="True" Value="0" >No</asp:ListItem>
</asp:RadioButtonList> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:18:09.917

一种方法：

```
var hasSelection = yourRadioButtonList.SelectedIndex != -1; 
```

对于 VB.NET：

```
Dim hasSelection = yourRadioButtonList.SelectedIndex <> -1 
```

# c++ - 使用 Eigen 与双指针的矩阵表示

> ID：10840607
> 
> 赞同：2
> 
> 时间：2012-05-31T20:12:21.807
> 
> 标签：c++, matrix, eigen

我继承了一些代码，这些代码广泛使用双指针来表示二维数组。我没有使用 Eigen 的经验，但它似乎比双指针更易于使用且更健壮。

有没有人知道哪个更可取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T19:58:18.227

请记住，Eigen 具有 Map 功能，可让您将 Eigen 矩阵制作成连续的数据数组。如果很难完全更改您继承的代码，那么将事物映射到 Eigen 矩阵至少可以使与原始指针的互操作更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:45:06.160

Eigen 和 Boost.uBLAS 都定义了表达式层次结构和抽象矩阵数据结构，可以使用任何满足特定约束的存储类。这些库的编写使得线性代数运算可以在非常高的水平上清晰地表达和有效评估。这两个库都大量使用表达式模板，并且能够进行非常复杂的编译时表达式转换。特别是，Eigen 还可以使用 SIMD 指令，并且在多个基准测试中非常具有竞争力。

对于稠密矩阵，一种常见的方法是使用单个指针并跟踪其他行、列和步幅变量（您可能需要第三个变量的原因是因为您分配的内存可能比存储`x * y * sizeof(value_type)`元素的实际需要更多，因为对齐）。但是，您没有适当的机制来检查超出范围的访问，代码中也没有任何东西可以帮助您进行调试。例如，如果您需要为教育目的实现一些线性代数运算，您只会想使用这种方法。（即使是这种情况，我建议您先考虑要实现哪些算法，然后查看`std::unique_ptr`、`std::move`、`std::allocator`和运算符重载）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T20:45:36.250

是的，对于现代 C++，你应该使用容器而不是原始指针。

### 本征

使用 Eigen 时，请注意其固定大小的类（如`Vector3d`）使用需要正确对齐的优化。如果您将这些固定大小的特征值作为成员包含在结构或类中，则需要[特别小心。](http://eigen.tuxfamily.org/dox/TopicStructHavingEigenMembers.html)您也[不能通过值传递它们](http://eigen.tuxfamily.org/dox/TopicPassingByValue.html)，只能通过引用传递。

如果你不关心这样的优化，禁用它就很简单了：只需添加

```
#define EIGEN_DONT_ALIGN 
```

*作为使用 Eigen 的所有*源文件（.h、.cpp、...）的第一行。

其他两个选项是：

### [升压矩阵](http://www.boost.org/doc/libs/1_49_0/libs/numeric/ublas/doc/index.htm)

```
#include <boost/numeric/ublas/matrix.hpp>
boost::numeric::ublas::matrix<double> m (3, 3); 
```

### [标准::向量](http://www.cplusplus.com/reference/stl/vector/)

```
#include <vector>
std::vector<std::vector<double> > m(3, std::vector<double>(3)); 
```

# javascript - 如何中断 javascript 以刷新事件

> ID：10840610
> 
> 赞同：2
> 
> 时间：2012-05-31T20:13:02.453
> 
> 标签：javascript, jquery

我有一个在文档加载时运行的函数，它将选择对象的内容复制到其他选择框（以节省网络带宽）。

该功能需要几秒钟才能完成，所以我想屏蔽主 div（让用户知道正在发生某些事情）。

不幸的是，直到函数完成后掩码才会显示：

```
 // I want the mask to show immediately here, but never gets shown
    $('#unassignedPunchResults').mask('Getting results');

    $('.employeeList').each(function (i) {
        // this is freezing the browser for a few seconds, the masking is not showing
        $('#employeeList option').clone().appendTo(this);  
    });

    $('#unassignedPunchResults').unmask(); 
```

如何在 mask() 调用后中断 javascript 以刷新该事件并继续，以便用户可以在较长的处理 (each()) 过程中看到掩码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:15:13.717

将其余代码放在一个`setTimeout(function() { ... }, 0)`调用中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:24:29.780

我一直在思考这个问题。第一个解决方案是使用`settimeout`函数。

但是，它可能有点“脏”，因为您添加了任意延迟。更合适的逻辑是在`$('.employeeList').each(function (i)...`执行和渲染掩码函数之后执行该函数。

[Jquery 允许我们使用类似then](http://api.jquery.com/deferred.then/)的延迟函数来做到这一点，该函数在满足延迟条件后执行。

所以尝试：

```
// I want the mask to show immediately here, but never gets shown
    $('#unassignedPunchResults').mask('Getting results').then(function(){

    $('.employeeList').each(function (i) {
        // this is freezing the browser for a few seconds, the masking is not showing
        $('#employeeList option').clone().appendTo(this);  
    });

}); 
```

一般来说，使用任意毫秒数的 settimeout 是一种适用于简单情况的解决方案，但如果您在复杂代码中有多个 settimeout，那么您可能会遇到同步问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T20:38:46.443

或使用工作人员，但随后您需要丢弃 msie < 10 或将计算分解为运行时间少于 500 毫秒的段，并使用 setinterval 将负载分散超过 5 秒。google 为代码示例模拟 javascript 中的线程。

# java - 如何正确使用 FloatControl 和 Java Sound API？

> ID：10840611
> 
> 赞同：0
> 
> 时间：2012-05-31T20:13:05.920
> 
> 标签：java, swing, user-interface, javasound, jslider

我目前正在编写一个测试程序`Java`，我希望能够使用`JSlider`GUI 应用程序来控制我的计算机的主 SPEAKER。我已经阅读了有关 AudioSystem 类的[此](http://docs.oracle.com/javase/tutorial/sound/accessing.html)页面和有关控件的[此页面。](http://docs.oracle.com/javase/tutorial/sound/controls.html)我的理解是我需要通过混音器获得一个端口或线路，然后在该线路或端口上建立一个控制。由于我正在控制音量，我需要实现一个`FloatControl`. 我的程序编译没有问题，但是当我运行它并调整 JSlider 时，我收到了该`catch`子句下的错误消息。

这是我的测试程序：

```
import java.awt.BorderLayout;
import java.io.IOException;

import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.FloatControl;
import javax.sound.sampled.Mixer;
import javax.sound.sampled.Port;
import javax.swing.JFrame;
import javax.swing.JSlider;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class speakerWork2
{
    public static void main(String [] args)throws IOException
    {
        Frame speaker = new Frame();
    }
}

class Frame extends JFrame
{
    JSlider mainVolume = new JSlider(JSlider.VERTICAL,0,100,50);

    public Frame()
    {
        super();
        setVisible(true);
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(new BorderLayout());
        setSize(100, 450);
        setLocation(300,200);

        add(mainVolume);

        mainVolume.addChangeListener(new mainVolumeHandler());
    }

    public class mainVolumeHandler implements ChangeListener
    {
        int sliderVal = mainVolume.getValue();

        public void setValue(FloatControl sliderVal) 
        {
        }

        public void stateChanged(ChangeEvent f)
        {
            Port SPEAKER;  
            FloatControl volCtrl;  
            try 
            {  
                Mixer mixer = AudioSystem.getMixer(null);  
                SPEAKER = (Port)mixer.getLine(Port.Info.SPEAKER);  
                SPEAKER.open();  
                volCtrl = (FloatControl) SPEAKER.getControl(  
                        FloatControl.Type.VOLUME);  
            } 
            catch (Exception e) 
            {  
                System.out.println("Failed trying to find SPEAKER"  
                        + " VOLUME control: exception = " + e);  
            }
        }
    }
} 
```

当我运行上述程序时，异常 e 打印：

```
java.lang.IllegalArgumentException: Line unsupported: SPEAKER target port 
```

当我在我的计算机上查询混音器、线路和端口时，我的扬声器得到以下结果......

```
mixer name: Port Speakers / Headphones (IDT High Definition Audio CODEC)
Line.Info: SPEAKER target port
volCtrl.getValue() = 1.0 
```

我做错了什么，我需要做什么来纠正自己？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:12:48.837

我可以想到两个看似合理的问题来调查：

(1) 如果您的目标扬声器端口出现在特定混音器上，如果它不是默认混音器，您必须显式打开该混音器。您当前正在打开“默认”混音器。

(2) 如果音频资源正被另一个程序使用，它可能不可用。我听说 Linux 比其他系统更容易发生这种情况。

# asp.net-mvc - 真的有必要测试控制器方法吗？

> ID：10840616
> 
> 赞同：3
> 
> 时间：2012-05-31T20:13:18.397
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing

当我设计 MVC 应用程序时，我通常会尝试将几乎所有逻辑（尽可能）排除在我的应用程序之外。我尝试将其抽象为与我的存储库和域实体接口的服务层。

所以，我的控制器方法最终看起来像这样：

```
public ActionResult Index(int id)
{
    return View(Mapper.Map<User, UserModel>(_userService.GetUser(id)));
} 
```

因此，假设我对我的服务进行了良好的覆盖测试，并且我的操作方法像上面的示例一样简单，那么对这些控制器方法进行单元测试是不是有点矫枉过正？

如果您确实为看起来像这样的方法构建单元测试，那么您从测试中获得了什么价值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T20:20:00.877

> 如果您确实为看起来像这样的方法构建单元测试，那么您从测试中获得了什么价值？

您可以进行断言的单元测试：

1.  调用了 _userService 的 GetUser 方法，传递了与传递给控制器​​相同的 int。
2.  返回的结果是 ViewResult，而不是 PartialViewResult 或其他东西。
3.  结果的模型是 UserModel 实例，而不是 User 实例（这是从服务返回的）。

单元测试与断言应用程序的正确性一样有助于重构。帮助您确保即使更改代码后结果也保持不变。

例如，假设您进行了更改，即当请求为 async/ajax 时，该操作应返回 PartialView 或 JsonResult。在控制器中更改的代码不会太多，但是一旦您更改代码，您的单元测试可能会失败，因为您可能没有模拟控制器的上下文来指示请求是否是 ajax。因此，这会告诉您扩展单元测试以保持正确性的断言。

绝对为 IMO 增值了 3 种非常简单的方法，每个方法的编写时间不会超过几分钟。

# java - 从java运行matlab编译的代码

> ID：10840619
> 
> 赞同：1
> 
> 时间：2012-05-31T20:13:26.647
> 
> 标签：java, matlab, matlab-deployment

我作为java开发人员工作。我正在从事一个涉及车牌提取的项目。它涉及三个步骤：首先将图像转换为灰度，然后使用 Canny 边缘检测算法检测图像中的边缘，第三是将图像传递给 matlab 编译代码，从图像中提取车牌。前两步成功。在第三步中，当我将图像传递给 matlab 编译的 .exe 应用程序时，它给了我错误：运行时错误“5”：无效的过程调用或参数。

下面是我用于将图像传递给 matlab 编译的应用程序的代码：

```
Process p = null;
        try {
            // TODO add your handling code here:
             p = Runtime.getRuntime()
                      .exec("c:/ImageResources/enp   c:/ImageResources/edges.jpg");
        } catch (IOException ex) {
            Logger.getLogger(MatlabGUIForm.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("Debug ");
        try {
            p.waitFor();
        } catch (InterruptedException ex) {
            Logger.getLogger(MatlabGUIForm.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:40:52.487

我认为问题与您将参数传递给可执行文件的方式有关。如果您将可执行文件名称和参数放在数组中，它可能会有所帮助。这是相关的讨论，[ProcessBuilder vs Runtime.exec()](https://stackoverflow.com/questions/3997127/processbuilder-vs-runtime-exec)。此外，您可以尝试 ProcessBuilder。

# gdb - gdb：找不到新线程：系统更新后出现一般错误

> ID：10840621
> 
> 赞同：6
> 
> 时间：2012-05-31T20:13:32.357
> 
> 标签：gdb, pthreads, arm

我正在运行我的应用程序的 ARM 板上运行基于 OpenEmbedded 的 Linux。我曾经运行内核 2.6.35、gdb 6.8 和 gcc 4.3。最近我将系统更新到内核 2.6.37、gdb 7.4（也尝试过 7.3）和 gcc 4.6。

现在，我的应用程序无法再被调试（在 ARM 板上），每次我尝试在 gdb 中运行它时，我都会收到错误“gdb：找不到新线程：通用错误”。该应用程序使用 pthreads 并链接 pthreads（readelf 将 libpthread.so.0 列为依赖项）。到目前为止，我发现的建议解决方案都建议链接到我已经在做的 pthread。我发现的另一个建议是使用 LD_PRELOAD=/lib/libpthread.so.0 这对我没有任何影响。

调试应用程序的 x86 版本没有问题。

编辑：为了回答第一个答案中提出的问题，我在目标（ARM）上使用 gdb，即没有跨 gdb。我也没有剥离 libpthread.so.0 (/lib/libpthread-2.9.so: ELF 32-bit LSB shared object, ARM, version 1 (SYSV), dynamiclinked (uses shared libs), for GNU/Linux 2.6\. 16，未剥离）。glibc 保持在 2.9 版本，更新涉及重新编译整个 linux 映像

EDIT2：删除 /lib/libthread-db* 允许调试（随之而来的警告和显然某些功能将不起作用）

EDIT3：使用 set debug libthread-db 1 我得到：

```
Starting program: /home/root/app
Trying host libthread_db library: libthread_db.so.1.
Host libthread_db.so.1 resolved to: /lib/libthread_db.so.1.
td_ta_new failed: application not linked with libthread
thread_db_load_search returning 0
Trying host libthread_db library: libthread_db.so.1.
Host libthread_db.so.1 resolved to: /lib/libthread_db.so.1.
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/libthread_db.so.1".
warning: Unable to set global thread event mask: generic error
Warning: find_new_threads_once: find_new_threads_callback: cannot get thread info: generic error
Found 0 new threads in iteration 0.
Warning: find_new_threads_once: find_new_threads_callback: cannot get thread info: generic error
Found 0 new threads in iteration 1.
Warning: find_new_threads_once: find_new_threads_callback: cannot get thread info: generic error
Found 0 new threads in iteration 2.
Warning: find_new_threads_once: find_new_threads_callback: cannot get thread info: generic error
Found 0 new threads in iteration 3.
thread_db_load_search returning 1
Warning: find_new_threads_once: find_new_threads_callback: cannot get thread info: generic error
Found 0 new threads in iteration 0.
Cannot find new threads: generic error
(gdb) Write failed: Broken pipe 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T03:54:02.123

此错误有两个常见原因：

1.  `libpthread.so.0`您在和之间存在不匹配`libthread_db.so.1`
2.  你已经剥离`libpthread.so.0`

您的信息并不完全清楚：

1.  您是否使用跨 GDB 从 x86 主机调试在 ARM 上运行的应用程序？
2.  `glibc`除了更新内核等之外，您是否更新（或重建）了？

如果您已剥离`libpthread.so.0`，*则不要这样做*-`libthread_db`需要它*不*被剥离。

如果您正在交叉调试，请确保`libthread_db.so.1`在主机`glibc`上重建以匹配目标。

更新：

> 不交叉调试
> 没有剥离 libpthread

因此，您的 GDB 中的某些内容或`glibc`似乎已损坏。你可以试着看看那是什么

1.  把移除的东西放`libthread_db`回去，和
2.  `(gdb) set debug libthread-db 1`
3.  `(gdb) run`

更新 2：

> 警告：无法设置全局线程事件掩码：一般错误

这意味着 GDB 能够`td_ta_set_event`在 libthread_db 中查找函数并调用它，但该函数返回错误。发生这种情况的一种方法是，如果 GDB 无法`__nptl_threads_events`在`libpthread.so.0`. 此命令产生什么：

```
nm /lib/libpthread.so.0 | grep __nptl_threads_events 
```

如果该命令产生输出，例如：

```
000000000021c294 b __nptl_threads_events 
```

那么我不确定还有什么失败的。您可能必须调试 GDB 本身才能弄清楚发生了什么。

另一方面，如果`grep`上面没有产生输出，那么这是您的工具链的问题：您必须弄清楚为什么该变量没有出现在您的 rebuilt 中`libpthread.so.0`。

# rest - 我们可以将 Json 对象添加到 HTTP GET 方法的 RequestHeader 中吗

> ID：10840622
> 
> 赞同：0
> 
> 时间：2012-05-31T20:13:46.803
> 
> 标签：rest

我正在为我们的应用程序开发一个新的 REST-full web 服务，我想在 requestHeader 中发送请求数据而不是作为查询参数发送，因为我的请求数据很大。

我有我的 jquery 代码，如下所示，将 json 添加到请求标头并调用 REST 服务 GET 方法。

```
$.ajax({  
beforeSend: function(req) {  
req.setRequestHeader("test", "{name:mouli, id:918}");},  
type : "GET",  
data :'',  
dataType : "jsonp",  
url : 'http://localhost:29801/RestFulJSONExample/rest/jobdesc?callback=?',  
success : function(data) {  
alert("invoked");  
}  
});  
}); 
```

我的 REST 服务中的 GET 方法就像

```
@GET  
@Produces("application/javascript")  
public JSONWithPadding getJobDescription(@Context HttpHeaders headers) {  
    List<String> requestHeader = headers.getRequestHeader("test");  
//some logic here.  
} 
```

我可以从我在 jquery 请求中添加的请求标头中获取 JSON 对象。

我的问题是..我可以采用这种方法吗？它安全吗？如果不是，请告诉我其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:53:10.930

标题中“：”右侧出现的内容大部分是免费的。您必须考虑 HTTP 中的字符集限制，以及 JSON 值中可能的回车（您知道，多行的标题具有特定的语法）。如果您的 JSON 示例相对简单，那么我认为这没有问题。这只是组织标题行实际值的另一种方式。

# android - 为什么应用程序激活链接无法在 android 4.x 上启动应用程序，但在 2.x 上却没有

> ID：10840625
> 
> 赞同：1
> 
> 时间：2012-05-31T19:32:36.797
> 
> 标签：android, intentfilter

我正在尝试在我的 Android 应用程序上实现自定义 URL 方案。这是完整的活动流程：

第 1 步：用户在设备上下载应用程序

第 2 步：用户在设备上安装应用程序

第 3 步：用户从注册页面注册应用程序。

第 4 步：注册/注册完成后，Web 服务器会向用户发送一封电子邮件以激活帐户

第 5 步：用户需要从 Web 浏览器或 Android 手机的电子邮件应用程序打开激活电子邮件

第六步：当用户点击邮件中的激活链接时，系统应执行以下步骤：

6.a 用户通过 URL 被激活

6.b系统验证请求是来自计算机还是移动设备（浏览器中的Java脚本代码正在执行此检查）

6.c 如果用户使用的是移动设备并且设备操作系统是Android，那么激活过程应该在激活后打开已安装的应用程序

问题

上述解决方案适用于 Android OS 版本 2.x 但不适用于 OS 版本 4.x 如果用户在 Android 4.0 设备的电子邮件应用程序中单击激活链接，则会出现此问题。激活后，用户被重定向到页面，移动浏览器返回错误消息“找不到网页”</p>

执行：

我在应用程序清单中为登录屏幕活动定义定义了自定义 URL 方案。从浏览器调用 url appnameURLScheme://appname 后，它会启动应用程序的登录屏幕，并通过将浏览器置于后台将应用程序置于最前沿。

这是清单：

```
<activity
   android:name=".AppNameScreen"
   android:screenOrientation="portrait"
   android:theme="@android:style/Theme.NoTitleBar" >
<intent-filter>
   <action android:name="android.intent.action.MAIN" />
   <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>

<activity
   android:name=".LoginScreen"
   android:screenOrientation="portrait"
   android:theme="@android:style/Theme.NoTitleBar" >
   <intent-filter>
      <data
      android:host="AppName"
      android:scheme="AppNameURLScheme" />
      <action android:name="android.intent.action.VIEW" />
         <category
            android:name="android.intent.category.DEFAULT"/>
         <category
            android:name="android.intent.category.BROWSABLE"/>
   </intent-filter>
</activity> 
```

# java - 在 ivy.xml 中使用 + in rev 不起作用

> ID：10840626
> 
> 赞同：0
> 
> 时间：2012-05-31T20:14:25.070
> 
> 标签：java, dependencies, ivy

与 Ivy 一起管理我项目中的所有依赖项，然后每当我将 rev 属性中的 +（加号）添加到 ivy.xml 时都不起作用。

```
<dependency org="com.*****.*********" name="im-framework" rev="0.0.1+">
   <artifact name="im-framework-main" type="jar" conf="compile->compile" />
   <artifact name="im-framework-test" type="jar" conf="test->default" />
   <exclude name="log4j-over-slf4j" />
</dependency> 
```

错误信息：

```
Description Resource    Path    Location    Type
Impossible to resolve dependencies of com.*****.*******#im-web;0.0.1    ivy.xml    /Project Unknown Problem 
```

当我删除它并添加版本号时，它工作正常。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:44:48.030

我认为问题在于您在这里使用动态修订。看看这个： [http ://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:50:25.107

我通过右键单击项目 -> 属性 -> Java 构建路径 -> 添加库 -> IvyDE Managed Dependencies 添加了另一个 Ivy.xml[*] 库，它工作正常

# facebook-graph-api - 我可以像 Facebook Connect 一样使用 Pages 在我的网站上进行授权吗？

> ID：10840639
> 
> 赞同：0
> 
> 时间：2012-05-31T20:16:03.987
> 
> 标签：facebook-graph-api, authorization, fbconnect

有什么方法可以像 FB Conect 一样授权用户（充当页面或页面管理员），但使用页面数据？

例如，我想要一家公司，比如本地理发师，在我的系统中授权某个页面（可以是间接的，即通过私人帐户，但我想知道这个用户是否是页面管理员）。这样做的目的是将我网站上的一个帐户与在 Facebook 上有代表的某个企业相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:37:29.693

好吧，您可以向用户请求 manage_pages 权限并查看您感兴趣的页面是否在其中，但是由于这会给您的应用程序提供他们的页面访问令牌，我怀疑他们会授予您权限。

让他们将您的应用程序作为页面选项卡安装在他们的页面上，然后在他们使用您的应用程序后查看 signed_request 参数 - 它有一个布尔标志，用于指示用户是否是管理员。之后，他们可以再次删除您的应用。

# jquery-ui - Jquery移动自动完成到列表视图

> ID：10840640
> 
> 赞同：0
> 
> 时间：2012-05-31T20:16:05.407
> 
> 标签：jquery-ui, jquery, jquery-mobile

我喜欢在文本框中为我的 jquery 移动页面添加自动完成功能，这样当用户输入时，它应该以 listview 格式显示结果。下面的代码显示了结果，但不是列表视图格式。有人可以指出如何解决它。谢谢。

```
<!DOCTYPE HTML>
<html>

<head> 
<title>Finder</title>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/ui/1.8.20/jquery-ui.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

<style>
  input{text-transform:uppercase;} 
</style>
<script>

$(document).ready(function() {

$( "#firstinputbox" ).autocomplete({

source: function( request, response ) {

$.ajax({

url: "http://ziplocator.cloudfoundry.com/rest/startsWithCity/",

dataType: "json",

data: {

maxRows: 10,

startsWith: request.term

},

success: function(data) {

response( $.map( data.zipcodes, function( item ) {
var listItem = ' <li class="ui-btn ui-btn-icon-right ui-li "><div class="ui-btn-inner ui-li"><div class="ui-btn-text"><a href="/XYC/XDetail/' + item.cityName + '" target="_self" class="ui-link-inherit">' + item.zipcodeId + '</a></div><span class="ui-icon ui-icon-arrow-r"></span></div></li>';
$(listItem).appendTo("#suggestions");

return {

label: item.cityName + ", " +item.zipcodeId + ", " + item.state,

value: item.cityName

}

}));

}

});

},

minLength: 1,

open: function() {

},

close: function() {

$('ul li').remove();
//should attach the value to the text box

}

});

}); 

</script>

</head> 
<body> 

<div data-role="page" data-add-back-btn="true" id="inputdialog">
    <div data-role="header">
       <h1>Enter Criteria here</h1>
    </div>
    <div data-role="content">
        <input type="text" id="firstinputbox"  placeholder="Enter here"/>
        <ul id="suggestions" data-role="listview" data-inset="true"></ul>
    </div>
    <div data-role="footer">

    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:52:08.497

试试这个

在`<li>`标签删除类中......`class="ui-btn ui-btn-icon-right ui-li "`

然后它以列表视图格式显示结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:26:03.047

尝试在您的 ajax 成功函数中调用 listview 刷新方法。

```
$('#suggestions').listview('refresh'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:22:00.723

插入新内容后，您需要在内容上调用 listview() 函数：

```
$('#suggestions').listview(); 
```

有关详细信息，请参阅[以利亚庄园的解释](http://www.elijahmanor.com/2011/02/dynamically-appending-elements-to.html)。

# python - 如何将 Pygame 程序编译为 Windows .exe

> ID：10840643
> 
> 赞同：2
> 
> 时间：2012-05-31T20:16:26.000
> 
> 标签：python, windows, pygame, exe

> **可能重复：**
> [如何从 Python 程序制作 EXE 文件？](https://stackoverflow.com/questions/49146/how-can-i-make-an-exe-file-from-a-python-program)

我找到了几个关于如何做的链接，但我不确定如何使用它们。他们经常说只使用代码，但他们没有说我应该将它放在终端中还是使用它来使程序运行。许多人推荐使用 py2exe，但是当我尝试使用它时它不会运行，因为它说我的注册表中没有 python 2.6。我对编程的更复杂方面相当陌生，任何帮助将不胜感激。我正在运行Windows Vista。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:23:13.157

这当然是一个重复的问题，但我建议使用[py2exe](http://www.py2exe.org/)。我们可能需要更多关于您失败的方式或原因的信息。

# asp.net - 将更新记录到表日志中

> ID：10840644
> 
> 赞同：0
> 
> 时间：2012-05-31T20:16:29.710
> 
> 标签：asp.net, sql-server, tsql

![在此处输入图像描述](../Images/968b7c6ee0c5309da636ec4587a5bd00.png)

我有 3 个表任务，task_notes 和 taskLog

我想问当用户在 task_notes 表中输入新笔记时记录日志的最佳方式是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:36:40.730

您可以在表上创建触发器。

[http://msdn.microsoft.com/en-us/library/ms189799.aspx](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

# ant - 需要xmlfile =“false”的war Ant任务仍然抱怨

> ID：10840650
> 
> 赞同：1
> 
> 时间：2012-05-31T20:16:39.683
> 
> 标签：ant, web.xml

**我的build.xml**中有以下**战争**任务，即使*needxmlfile*设置为*false*，当*web.xml*文件不存在时， **Ant**（版本 1.8.2）也会抱怨（“ *BUILD FAILED ...部署描述符：/home/ .../web/WEB-INF/web.xml 不存在*")

 *******我错过了什么？

```
 <target name="war" depends="build">                                                                           
    <mkdir dir="${build.dir}"/>                                                                                 
    <war                                                                                                        
      needxmlfile="false"                                                                                       
      basedir="${webroot.dir}"                                                                                  
      warfile="${build.dir}/${project.distname}.war"                                                            
      webxml="${webinf.dir}/web.xml">                                                                           
      <exclude name="WEB-INF/${build.dir}/**"/>                                                                 
      <exclude name="WEB-INF/src/**"/>                                                                          
      <exclude name="WEB-INF/web.xml"/>                                                                         
     </war>                                                                                                     
  </target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:11:32.113

[ANT 文档](http://ant.apache.org/manual/Tasks/war.html)声明**webxml**属性是强制性的，除非 needxmlfile**属性**设置为*true*

试试这个并使用一个文件集来拉入可选的 web.xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:38:11.860

@O'Connor：感谢您使用文件集提取 web.xml 的提示。但是，我不确定您将 needxmlfile 设置为 true 是否正确（至少在我的实验中，我目睹了与您描述的相反的情况）。无论如何，最后我意识到甚至不需要文件集，因为**war** Ant 任务显然将所有内容都打包在**basedir**下（除非明确排除），所以我现在使用以下 war 任务，无论**web.xml**文件是存在与否：

```
<target name="war" depends="build">                                                                      
   <mkdir dir="${build.dir}"/>                                                                            
   <war                                                                                                   
      needxmlfile="false"                                                                                  
      basedir="${webroot.dir}"                                                                             
      destfile="${build.dir}/${project.distname}.war">                                                      
      <exclude name="WEB-INF/${build.dir}/**"/>                                                            
      <exclude name="WEB-INF/src/**"/>                                                                     
    </war>                                                                                                
</target> 
```

如果在“waring”期间找不到 web.xml 文件，将 needxmlfile 设置为“true”会导致 Ant 抱怨。*******

# ios - 将“删除”按钮添加到 UITableViewCell

> ID：10840658
> 
> 赞同：3
> 
> 时间：2012-05-31T20:17:20.173
> 
> 标签：ios, uitableview, button

我想向我的 UITableViewCell 添加一个自定义删除按钮，而不是标准的滑动删除。我需要做的就是删除单元格。我正在使用核心数据和 NSFetchedResultsController。

有谁知道我可以使用的动作？我希望它是一个 IBAction，这样我就可以将它链接到单元格上的一个按钮。

编辑：我想澄清一下，我了解如何将按钮放在单元格上，但我需要有关删除单元格的操作的帮助。谢谢！

编辑2：这是editingStyle代码。我不想使用库存滑动删除，但使用自定义按钮。有谁知道如何将此代码转换为可以连接到按钮的操作？

```
if (editingStyle == UITableViewCellEditingStyleDelete) {

    [self.tableView beginUpdates];

    // Delete the task 
    Task *taskToDelete = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSLog(@"Deleting (%@)", taskToDelete.name);
    [self.managedObjectContext deleteObject:taskToDelete];
    [self.managedObjectContext save:nil];

    // Delete the row 
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
    [self performFetch];

    [self.tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:28:38.817

从您的模型中删除相应的行，然后告诉表视图`deleteRowsAtIndexPaths:withRowAnimation:`.

# unit-testing - 我可以调用嵌套函数进行单元测试吗？

> ID：10840660
> 
> 赞同：4
> 
> 时间：2012-05-31T20:17:24.657
> 
> 标签：unit-testing, testing, f#, functional-testing

在 F# 中，我想对具有多个嵌套函数级别的函数执行单元测试。我也希望能够单独测试嵌套函数，但我不知道如何调用它们。在调试时，这些嵌套函数中的每一个都被作为一种函数对象调用，但我不知道我是否可以在编译时访问它们。

我不想更改我正在使用的嵌套方案，因为以这种方式嵌套它们在功能上最有意义，因为在每个嵌套级别都有一些函数参数的事实上的“继承”。

这样的事情可能吗？如果不是，单元测试嵌套函数的一般程序是什么？他们是否使用额外的参数单独测试，然后插入到它们的嵌套位置后，永远无法再次测试？

非常小的例子：

```
let range a b =
    let lower =  ceil a |> int
    let upper =  floor b |> int
    if lower > upper then
        Seq.empty
    else
        seq{ for i in lower..upper -> i} 
```

在不改变代码的嵌套性质的情况下，我如何测试`lower`或`upper`正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T21:06:40.123

我同意 Daniels 的评论 - 如果外部功能正常工作，您不需要测试任何内部功能。内部函数实际上是一个不应该相关的实现细节（特别是在函数代码中，输出不依赖于输入以外的任何东西）。在 C# 中，您也不测试方法中的`for`循环或`while`循环是否正常工作。

如果内部函数和外部函数都太复杂，那么将内部函数编写为单独的函数可能会更好。

也就是说，您当然可以使用反射来处理已编译的程序集并调用内部函数。内部函数被编译为具有构造函数的类，该构造函数采用*闭包*（外部函数的捕获值）和`Invoke`采用实际参数的方法。

下面这个简单的例子可以工作，尽管我没有在任何更现实的情况下对其进行测试：

```
open NUnit.Framework

// Function with 'inner' that captures the argument 'a' and takes additional 'x'    
let outer a b = 
  let inner x = x + a + 1
  (inner a) * (inner b)

// Unit tests that use reflection in a hacky way to test 'inner'
[<TestFixture>]
module Tests = 
  open System
  open System.Reflection

  // Runs the specified compiled function - assumes that 'name' of inner functions
  // is unique in the current assembly (!) and that you can correctly guess what 
  // are the variables captured by the closure (!)
  let run name closure args = 
    // Lots of unchecked assumptions all the way through...
    let typ =
      Assembly.GetExecutingAssembly().GetTypes()  
      |> Seq.find (fun typ -> 
          let at = typ.Name.IndexOf('@')
          (at > 0) && (typ.Name.Substring(0, at) = name) )
    let flags = BindingFlags.Instance ||| BindingFlags.NonPublic
    let ctor = typ.GetConstructors(flags) |> Seq.head
    let f = ctor.Invoke(closure)
    let invoke = f.GetType().GetMethod("Invoke")
    invoke.Invoke(f, args)

  /// Test that 'inner 10' returns '14' if inside outer where 'a = 3'
  [<Test>]
  let test () = 
    Assert.AreEqual(run "inner" [| box 3 |] [| box 10 |], 14) 
```

# asp.net-mvc - 通过添加服务引用使用外部 WSDL 创建 Web 服务

> ID：10840666
> 
> 赞同：1
> 
> 时间：2012-05-31T20:17:50.377
> 
> 标签：asp.net-mvc, asp.net-mvc-3, wcf, web-services, service-reference

我在 .NET 4 中有一个 ASP.NET MVC3 项目，它需要充当 SOAP 服务器来接收来自另一个网站的通知。

我之前创建了 Web 服务，但我不知道如何设置一种方法来接收这些通知，其中 WSDL 由外部网站提供。

我知道我可以创建一个服务并让它生成它自己的 WSDL，但我假设必须有一种简单的方法来添加服务引用，然后创建一个使用它生成的对象/方法的服务。

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:20:44.850

您可以使用 Visual Studio 命令行中的[svcutil 工具](http://msdn.microsoft.com/en-us/library/aa347733.aspx)来创建所需的配置和代理文件

# java - 使用 Java Web 应用程序中的 Google Docs API (Gdata) 上传文档

> ID：10840667
> 
> 赞同：2
> 
> 时间：2012-05-31T20:17:52.483
> 
> 标签：java, gdata-api

我正在开发一个**基于 Web 的**应用程序，它允许用户使用 GData Java API 将 Word 文档上传到 Google Docs。

（我遇到了[这个](http://blog.essaytagger.com/2011/07/how-to-upload-file-to-google-docs-when.html)博客，在那里我发现我实际上可以使用字节数组来上传文档而不是使用**文件**）

我正在使用 Netbeans + JDK 1.6

我的servlet中的相关代码：

```
DocsService docsService = new DocsService("care.udhc.co.in");                
try {
    docsService.setUserCredentials("sbose78@gmail.com", "*******");      

    DocumentListEntry newDocument = new DocumentListEntry();

    String s="hello bose";
    byte byteData[]=s.getBytes();

    // Load the byte array into a MediaSource
    MediaByteArraySource mediaSource = new MediaByteArraySource(byteData, MediaType.fromFileName("bose.doc").getMimeType());
    MediaContent content = new MediaContent();
    content.setMediaSource(mediaSource);
    content.setMimeType(new ContentType(mediaSource.getContentType()));
    newDocument.setContent(content);

    String gdocsFilename = new String("My Filename");
    newDocument.setTitle(new PlainTextConstruct(gdocsFilename));
    out.println("OK");
    // Push it into Google Docs!! 
    DocumentListEntry uploadedRef = docsService.insert(new URL("https://docs.google.com/feeds/default/private/full/"), newDocument);
} catch(Exception e) {
   out.println(e.toString());
} finally {            
    out.close();
} 
```

当我在**本地**运行它时，遇到以下错误：

```
com.google.gdata.util.InvalidEntryException: We're sorry, a server error occurred. Please try again. GDataInvalidEntryExceptionWe're sorry, a server error occurred. Please try again. 
```

当我运行部署在 Internet ( Jelastic cloud ) 上的版本时，我得到了这个：

```
java.lang.NoClassDefFoundError: com/google/gdata/data/extensions/QuotaBytesTotal
com.google.gdata.data.docs.MetadataEntry.declareExtensions(MetadataEntry.java:86)
com.google.gdata.data.ExtensionProfile.addDeclarations(ExtensionProfile.java:71)
com.google.gdata.data.BaseFeed.declareExtensions(BaseFeed.java:235)
com.google.gdata.client.docs.DocsService.declareExtensions(DocsService.java:171)
com.google.gdata.client.docs.DocsService.<init>(DocsService.java:108)
bose.google.UploadToDocs.processRequest(UploadToDocs.java:30)
bose.google.UploadToDocs.doGet(UploadToDocs.java:79)
javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

请给我一个解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:56:50.010

您似乎缺少所需的依赖项之一，可能是 gdata-core-1.0.jar。

此外，请检查此页面以获取外部依赖项：[https ://developers.google.com/gdata/articles/java_client_lib](https://developers.google.com/gdata/articles/java_client_lib)

# php - PHP SQL 表单验证

> ID：10840669
> 
> 赞同：0
> 
> 时间：2012-05-31T20:18:07.803
> 
> 标签：php, sql, forms, validation

我正在尝试创建一个在提交之前进行验证的表单。我的PHP代码是：

```
<?php
    //include the connection file

    require_once('connection.php');
    require_once("validation.php");

    if( isset($_POST['send']) && (!validateName($_POST['name']) || !validateEmail($_POST['email']) || !validatePasswords($_POST['pass1'], $_POST['pass2']) || !validateContact($_POST['contact']) || !validateAge($_POST['age']) || !validateGender($_POST['gender']) || !validateLocation($_POST['location']) || !validateSkill($_POST['skill']) || !validateWork($_POST['work'])) ):?>
                    <ul>
                        <?php if(!validateName($_POST['name'])):?>
                            <li><strong>Invalid Name:</strong> We want names with more than 3 letters.</li>
                        <?php endif?>
                        <?php if(!validateEmail($_POST['email'])):?>
                            <li><strong>Invalid E-mail:</strong> Type a valid e-mail please.</li>
                        <?php endif?>
                        <?php if(!validatePasswords($_POST['pass1'], $_POST['pass2'])):?>
                            <li><strong>Passwords are invalid:</strong> Passwords doesnt match or are invalid!</li>
                        <?php endif?>
                        <?php if(!validateContact($_POST['contact'])):?>
                            <li><strong>Please enter your contact number.</strong></li>
                        <?php endif?>
                        <?php if(!validateAge($_POST['age'])):?>
                            <li><strong>Please enter your contact number.</strong></li>
                        <?php endif?>
                        <?php if(!validateGender($_POST['gender'])):?>
                            <li><strong>Please enter your contact number.</strong></li>
                        <?php endif?>
                        <?php if(!validateLocation($_POST['location'])):?>
                            <li><strong>Please enter your contact number.</strong></li>
                        <?php endif?>
                        <?php if(!validateSkill($_POST['skill'])):?>
                            <li><strong>Please enter your contact number.</strong></li>
                        <?php endif?>
                        <?php if(!validateWork($_POST['work'])):?>
                            <li><strong>Please enter your contact number.</strong></li>
                        <?php endif?>
                    </ul>
                </div>
            <?php elseif(isset($_POST['send'])):?>
                <div id="error" class="valid">
                    <ul>
                    <?php $query = "INSERT INTO employer (name, password, email, contact, age, gender, location, skill, work) VALUES ";                           
                    $query .= "('$name', 'md5($password)', '$email','$contact','$age','$gender','$location','$skill','$work')";
                    // run the query
                    mysql_query($query);?>
                        <li><strong>Congratulations!</strong> All fields are OK ;)</li>
                    </ul>
                </div>
        <?php endif?> 
```

但显示错误：致命错误：在第 7 行的 /home/sifeiitd/public_html/login1.php 中调用未定义函数 validateName()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:22:48.803

该错误是不言自明的。您正在尝试调用当前上下文中不存在的函数。您确定您的其中一个包含此功能吗？

# asp.net - Response.write 导致 CS0116：命名空间不直接包含字段或方法等成员

> ID：10840672
> 
> 赞同：0
> 
> 时间：2012-05-31T20:18:16.853
> 
> 标签：asp.net

System.Web.HttpContext.CurrentContext.Response.Write 在 aspx.cs 文件中使用时会导致此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:28:36.027

它根本与 ASP.NET 无关。您已`Response.Write`直接在命名空间内编写。只需将其移动到方法或参数中，而不是直接移动到类中。

# javascript - 向网站添加增强功能（无论是通过 C#、Chrome 扩展等）——不确定什么会起作用？

> ID：10840673
> 
> 赞同：0
> 
> 时间：2012-05-31T20:18:19.223
> 
> 标签：javascript, ajax, dom, google-chrome, macros

有一个我经常访问的网站……我们称之为 www.example.com。而且，我能够与本网站的某些部分进行交互。交互发送 XMLHttpRequest 并通过 Javascript 得到响应，我相信 jQuery。

我不确定什么技术可以让我实现我想做的事情，以及从哪里开始。基本上，我想添加该站点未提供的其他选项/快捷方式。我想过也许可以使用宏，但是尝试使用宏录制软件只是一件痛苦的事。

我检查了（使用 Google Chrome 的开发人员工具）来回发送的 XMLHttpRequest，我注意到它是简单的 JSON 消息。我认为在不等待网站的实际所有者这样做的情况下向网站添加增强功能的最佳方法是模拟网站发送/接收这些 XMLHttpRequest/Response 并对 DOM 进行额外调整以提供额外的快捷方式。

不过，我不想干扰原始站点的功能……即，如果我发送请求并收到响应，我希望原始脚本和我的脚本都处理响应。所以，这就是我卡住的地方......我不确定是否要沿着创建 C# 应用程序或 Google Chrome 扩展（我使用 Google Chrome）或其他东西的路径一起走。关于什么开发工具/语言的任何指示都会让我有能力做我想做的事。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:32:48.970

Chrome[内置了对用户脚本的支持](http://www.chromium.org/developers/design-documents/user-scripts)。您可以使用它们来修改您认为合适的页面，也可以提出请求。如果没有更多关于您想要对这些 AJAX 请求做什么的详细信息，很难进一步提供建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:31:03.083

我不是 100% 确定您的问题是什么，但据我了解，您希望能够对某个网站进行更改。如果这些更改可以用 js 完成，我会推荐 Greasemonkey for Firefox。它基本上可以让您在访问某个网页/域时运行自定义脚本。您可以根据需要具体说明哪些页面使用该脚本。一旦你的脚本加载了 jQuery，添加任何功能真的很容易。

[https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)

你可以在这里找到大量网站的预先编写的脚本：

[http://userscripts.org/](http://userscripts.org/)

# delphi - 为什么 PC 之间控件的缩放比例不同？

> ID：10840674
> 
> 赞同：8
> 
> 时间：2012-05-31T20:18:29.883
> 
> 标签：delphi, windows-7, panel, delphi-xe

我试图通过隐藏一些元素来给用户一个“干净简单”的界面。只有一个小箭头表示他可以展开主菜单栏的某些部分。当一切都关闭时，它看起来像这样：

![在此处输入图像描述](../Images/769a8c91abf33173fe09eb0d9d17c916.png)

当你打开所有它看起来像这样：

![在此处输入图像描述](../Images/5b78287249c97cc5be30069a2a7d3c2f.png)

每个箭头都是位于面板左侧的 SpeedButton。通过单击按钮，宽度在 Speedbutton 的宽度（关闭）和设计时面板的宽度（打开）之间切换。设计时面板的宽度存储为常数。过程 show_hide_controls 处理这个：

```
procedure TCompose_Main.show_hide_controls (key: string; Button: TSpeedButton; Panel: TPanel; width: Int32);
begin
   if GPA.iKey [key] = 1
      then Panel.Width := width         // show panel, set panel to design width
      else Panel.Width := Button.Width; // hide panel, set with to button width
   Button.Glyph.Assign (nil);
   Images_Left_Right.GetBitmap (GPA.iKey [key], Button.Glyph);
end; // show_hide_controls // 
```

该例程调用如下：

```
show_hide_controls ('Show Play Controls', // index to panel to show/hide
                    Enlarge_Play,         // Speedbutton requesting the enlargement/hide
                    Panel_Play,           // Panel to show/hide   
                    cPlayWidth);          // Width of panel when shown 
```

现在有几个用户报告说面板的一部分被隐藏了，比如：

![在此处输入图像描述](../Images/f910fd5ea22ee0629a9ad44395e00c6e.png)

操作系统（Windows 7）似乎在缩放方面发挥了一些作用。我无法复制此错误。有谁明白这里发生了什么？是否有一种巧妙的方法可以以独立于设置的方式对此进行编程？

**更新**正如 GDF 在他的回答中正确指出的那样，它与字体的缩放有关（控制面板 > 显示）。这在我的机器上表现得有些奇怪。将其更改为 150% 会产生轻微影响，而将其更改为 125% 会产生重大影响。正如您可能已经猜到的那样，我测试了第一个缩放比例而不是第二个缩放比例。只有当用户报告从 125% 缩减到 100% 时，我才能在我的机器上复制他的错误。

正如几位受访者所建议的那样，我找不到字体与我遇到的麻烦之间的关系。我的系统仍然受到我对 Courier（不是新的）、Segoe UI、Tahoma 和 MS Sans Serif 所做的所有测试的影响：-D。可能是间接的，因为控件可能会调整大小以适应文本。

如何处理？我不知道，我会开始试验，如果我发现了什么，会告诉你。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T20:29:46.923

如果您的问题是我所相信的，那么您只是说出了答案。Windows 7 使用缩放某些字体。当您在 PC 上安装 Win7 时，它会检查您的显示器尺寸，并根据您的显示器尺寸将“默认”比例设置为 100% 或 125%。问题是它同时将字体文件安装到计算机上。它为某些字体使用不同的“默认”字体文件。

我的猜测是您的应用程序正在使用 MS Sans Serif ... 这是根据 Win7 使用的（默认）比例获得不同字体文件安装的字体之一。

要验证这一点，让您的用户告诉您希望将比例设置为默认值，您可以通过右键单击桌面并选择“个性化”然后选择左下角的“显示”来查看。

以下链接向您展示如何将 in-use-font 文件更改回原始 [http://www.rlvision.com/misc/windows_7_font_bug.asp](http://www.rlvision.com/misc/windows_7_font_bug.asp)

但是，我会尝试摆脱这种字体并更新布局元素以在 Win7 以及过去的操作系统上按需要工作

鉴于您提供的信息量有限，这就是我认为您正在处理的问题......

**更新** 既然你在提到 125% 和 150% 之间的不同外观时提醒了我。我只是想确保您知道两个不同的 MS 无衬线文件在不同的比例下看起来更好。其中一个字体文件在 100% 和 150% 时看起来很棒，但在 125% 时看起来很糟糕。另一个字体文件在 125% 时看起来很棒，但在 100% 和 150% 时看起来很糟糕。

我不太记得哪个字体文件是哪个，但我知道 2 个罪魁祸首是 1) SSERIFF.FON 2) SSERIFE.FON

# php - 在多选下拉菜单中设置多个默认选定值

> ID：10840675
> 
> 赞同：1
> 
> 时间：2012-05-31T20:18:35.107
> 
> 标签：php, mysql, arrays, codeigniter, select

```
// Get Series List
    $this->load->model('Series_model');
    $serieslist = $this->Series_model->gettypelist($userid, 'e');

    $series_item_id = 0;

    $this->db->select('series_id');
    $this->db->where('type_id', 13);
    $this->db->where('series_type', 'e');
    $series_item_query = $this->db->get('series_items');

    if ($series_item_query->num_rows() > 0) {
        $series_item_id = $series_item_query->result();
    }
    //print_r($series_item_id);

    $data['serieslist'] = '<select name="series_id[]" class="type input_select" multiple="multiple">';
    $data['serieslist'] .= '<option value="">None</option>';
    foreach ($serieslist as $list) {
        $data['serieslist'] .= '<option value="' . $list->id . '" ' . ($series_item_id[0]->series_id === $list->id ? 'selected="selected"' : '') . '>' . $list->title . '</option>';
    }
    $data['serieslist'] .= '</select>'; 
```

以上是我正在使用的代码。我希望能够为选择下拉菜单的多个值设置多个 selected="selected"。例如：

```
<select name="series_id[]" class="type input_select" multiple="multiple">
    <option value="">None</option>
    <option value="4">Event Series: Test 1</option>
    <option value="5">Event Series: Test 2</option>
    <option value="16">Event Series: Test 3</option>
    <option value="17">Event Series: Test 4</option>
    <option value="18">Event Series: Test 5</option>
    <option value="19">Event Series: Test 6</option>
    <option value="20">Event Series: Test 7</option>
    <option value="21">Event Series: Test 8</option>
</select> 
```

我希望选择 4 16 和 19 的选项值 =“selected”，但在我上面的代码中，它只选择 4 然后停止。我错过了什么？如果您需要更多信息，请告诉我。

提前致谢。

编辑：

print_r 的结果：

```
Array ( [0] => stdClass Object ( [series_id] => 4 ) [1] => stdClass Object ( [series_id] => 16 ) [2] => stdClass Object ( [series_id] => 19 ) ) 
```

更新代码：

```
foreach ($serieslist as $list) {
        $data['serieslist'] .= '<option value="' . $list->id . '" ' . (in_array($list->id, $series_item_id, TRUE) ? 'selected="selected"' : '') . '>' . $list->title . '</option>';
    } 
```

以上更新的代码不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:44:56.993

你比较`$list->id`第一个 $series_item_id: $series_item_id **[0]** ->series_id

您需要将其他`foreach`放入现有的：

```
foreach ($serieslist as $list) {
    foreach ($series_item_id as $series_item) {
         $data['serieslist'] .= '<option value="' . $list->id . '" ' . ($series_item->series_id === $list->id ? 'selected="selected"' : '') . '>' . $list->title . '</option>';
    }
} 
```

或获取 series_id 作为数组并使用`in_array()`：

```
$series_array = array();

foreach ($series_item_id as $series_item) {
     $series_array[] = $series_item->series_id;
}

foreach ($serieslist as $list) {

         $data['serieslist'] .= '<option value="' . $list->id . '" ' . (in_array($series_array, $list->id) ? 'selected="selected"' : '') . '>' . $list->title . '</option>';

} 
```

# jquery - 结合 keypress 和 keyup - jQuery

> ID：10840676
> 
> 赞同：7
> 
> 时间：2012-05-31T20:18:40.363
> 
> 标签：jquery, keypress, keydown, keyup

我正在尝试开发一个 jQuery 插件来在用户输入特定的关键词时执行操作。

例如，我想在 keyup 上匹配“HELLO”。

```
var controllerKey = [];
$(window).keyup(function(evt) {
    var code = evt.keyCode ? evt.keyCode : evt.which;
    controllerKey.push(code);
}
[...] 
```

然后，我将我的 controllerKey 与我的字符串“HELLO”（感谢 str.charCodeAt()）和其他一些东西进行比较，但这在这里并不重要。此时一切正常。

**当我想匹配“HeLLo”时（实际上当字符串有一些**大写字母时），****我的问题**就会发生。我在论坛上看到 keyup 或 keydown 没有任何区别。**

 **所以我使用 keypress 来很好地管理它，但是 keypress 不允许我匹配箭头键等等（在 Chrome 中）。

**我想知道是否可以组合 keypress 和 keyup （仅当 keypress 与事件不匹配时）。**

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T20:31:48.353

你可以像这样组合它们：

```
$(window).on('keyup keypress', function(e) {
   if (e.type=="keyup") {

   } else {
      // it is keypress
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T20:33:59.600

您可以使用**隐藏的输入**和**键事件**来进行跨浏览器区分大小写的比较。**

# jquery-mobile - JQuery Mobile 后退按钮功能

> ID：10840677
> 
> 赞同：1
> 
> 时间：2012-05-31T20:18:40.767
> 
> 标签：jquery-mobile

我认为这一定是一种常见的情况——但我似乎找不到解决方案。

具有身份验证功能的 JQueryMobile 站点：

1.  所有页面上的链接将用户带到动态加载的身份验证页面
2.  所有页面都有返回按钮功能
3.  错误的用户名和密码会导致 ajax 表单提交
4.  在这种情况下单击后退按钮会将您返回到身份验证页面（这很有意义，因为这是您来自的地方 - 但如果我输入了五次错误密码，我必须在返回之前单击五次后退按钮到我来自的地方）

我想我想要的是从“哈希”历史记录中取出用于登录的 ajax 表单提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:52:56.733

解决此问题的一种方法是跟踪失败的尝试`numberOfAttempts++`。然后`history.go(-numberOfAttempts);`在单击后退按钮时使用。

# c# - C#将组合框的值写入excel行

> ID：10840678
> 
> 赞同：0
> 
> 时间：2012-05-31T20:18:43.343
> 
> 标签：c#

我有一个 Windows 窗体应用程序，其中用户将他们的姓名（名字和姓氏）输入到组合框中。我有一个添加按钮，可以将他们输入的任何值添加到组合框中并在下面列出。**我想要做的是获取组合框中列出的名称并将它们输入到 Excel 中的单独行中。**我在 excel 文件中也有 2 列“名字”和“姓氏”，因此组合框中的名称需要拆分。

这是我的excel代码：

```
if (!File.Exists(@"C:\gradsheet.xlsx"))
        {
            File.WriteAllBytes(@"C:\gradesheet.xlsx", Properties.Resources.gradesheet);
        }

        // if there is no title selected
        if (String.IsNullOrEmpty(cboSelect.Text))
        {
            MessageBox.Show("Please make sure a category is selected.", "No Subject Found Error", MessageBoxButtons.OK, MessageBoxIcon.Error);

            return;
        }

        object oOpt = System.Reflection.Missing.Value;

        Excel.Application excelApp = new Excel.ApplicationClass();
        Excel.Workbook wBook;

        string myPath = @"C:\gradesheet.xlsx";

        wBook = excelApp.Workbooks.Open(myPath, Missing.Value, Missing.Value,

          Missing.Value, Missing.Value,

          Missing.Value, Missing.Value,

          Missing.Value, Missing.Value,

          Missing.Value, Missing.Value,

          Missing.Value, Missing.Value,

          Missing.Value, Missing.Value);

        Excel.Worksheet wSheet = (Excel.Worksheet)wBook.Worksheets[1];

        wBook.Worksheets.get_Item(1);//get worksheet number
        wSheet.Name = cboSelect.Text;//define name

        //put name in excel(THIS IS WHERE I NEED THE COMBOBOX ITEMS IN EXCEL)
        excelApp.Cells[8, 1] = firstName;
        excelApp.Cells[8, 2] = lastName;

        //Subject Name to cell
        excelApp.Cells[5, 1] = cboSelect.Text;

        //these are some cleanup calls that I found in another example..
        excelApp.AlertBeforeOverwriting = false;
        excelApp.DisplayAlerts = false;
        excelApp.Save();
        excelApp.Quit();

        System.Runtime.InteropServices.Marshal.ReleaseComObject(excelApp);

        GC.Collect();

        GC.WaitForPendingFinalizers();

        DialogResult result;
        result = MessageBox.Show("Would you like to open the gradesheet?", "gradesheet", MessageBoxButtons.YesNo);
        if (result == DialogResult.Yes)
        {
            string gradesheet = @"C:\gradesheet.xlsx";
            Process.Start(gradesheet);
        }

    } 
```

这是我将名字和姓氏分开的代码，但我不确定如何为组合框中的每个项目执行此操作：

```
string fullName = cboStudent.Text;
        string firstName;
        string lastName;
        string[] parts = fullName.Split(new string[] { ", " },        StringSplitOptions.None);
        if (parts.Length == 1)
        {
            parts = fullName.Split(' ');
            if (parts.Length == 1)
            {
                lastName = fullName;
                firstName = "";
            }
            else
            {
                lastName = parts[1];
                firstName = parts[0];
            }
        }
        else
        {
            lastName = parts[0];
            firstName = parts[1];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:03:09.923

好的，我在这里解决了代码，感谢您的帮助！

```
//Student Names
        for (int x = 0; x < cboStudent.Items.Count; x++)
            {
                string fullName = cboStudent.Items[x] as string;
                string firstName;
                string lastName;
                string[] parts = fullName.Split(new string[] { ", " }, StringSplitOptions.None);
                if (parts.Length == 1)
                {
                    parts = fullName.Split(' ');
                    if (parts.Length == 1)
                    {
                        lastName = fullName;
                        firstName = "";
                    }
                    else
                    {
                        lastName = parts[1];
                        firstName = parts[0];
                    }
                }
                else
                {
                    lastName = parts[0];
                    firstName = parts[1];
                }
                excelApp.Cells[8 + x, 1] = firstName;
                excelApp.Cells[8 + x, 2] = lastName;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:41:20.707

听起来在您的情况下，您希望组合框中的每个项目都使用组合框上的“项目”属性...

```
foreach (object name in cboStudent.Items)
{
      ...
} 
```

如果您只想要从项目列表中选择的项目，您可以使用“SelectedItem”属性。

或者...

由于您可能希望将每个项目添加到工作簿中的不同单元格，您可以使用 for 循环，因此您也可以将整数用于单元格......

```
for (int x = 0; x < comboBox1.Items.Count; x++)
{
    object name = comboBox1.Items[x];

    // Split name here

    excelApp.Cells[8+x, 1] = firstName; 
    excelApp.Cells[8+x, 2] = lastName; 

} 
```

# bash - sh：如何扩展环境变量？

> ID：10840679
> 
> 赞同：3
> 
> 时间：2012-05-31T20:18:47.430
> 
> 标签：bash, shell, command-line, sh

您可以在任何地方阅读如何*替换*环境变量。但我想在 $PATH 变量的开头***插入一个新路径。***使用 sh 执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T20:20:28.880

只需为其分配一个包含旧值的新值：

```
PATH=/new/path:${PATH} 
```

# wordpress - 301重定向通配符

> ID：10840684
> 
> 赞同：1
> 
> 时间：2012-05-31T20:19:38.587
> 
> 标签：wordpress, .htaccess, rewrite

由于编程错误，我遇到了问题，在 Google 网站管理员中我有超过 10000 个错误。错误在文章的 rss 提要中：我必须重定向很多这种错误的永久链接

```
http://www.mysitename.it/00000000/permalink//feed/ 
```

到这个正确的永久链接结构

```
http://www.mysitename.it/00000000/permalink/feed/ 
```

在实践中，我必须在提要之前删除一个 /（斜杠）

如果可能的话，我需要使用重定向 301 规则而不是 Mod rewrite，因为我的 Wordpress htaccess 文件中有一些此重定向的行。在此先感谢法布里齐奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:22:55.370

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(00000000/permalink)//(feed/) [NC]
RewriteRule ^ %1/%2 [R=301,L] 
```

# compiler-construction - 为 CUDA C/C++ 编译器添加永久包含和库路径

> ID：10840685
> 
> 赞同：2
> 
> 时间：2012-05-31T20:19:41.180
> 
> 标签：compiler-construction, linker, cuda, include-path, nvcc

我目前正在做一些工作，包括使用**CULA**库和 GPU Computing SDK 的库。

编译时，我必须在使用 NVCC 编译时使用以下标志：

```
-lcutil_x86_64 -lcula_core -lcula_lapack -lcublas -lcudart -lcuda -I$CUDA_SDK_ROOT_DIR/common/inc/ -L$CUDA_SDK_ROOT_DIR/lib/ -L$CULA_LIB_PATH_64 
```

即使这样工作得很好，我也厌倦了每次都必须指定包含和库路径。有什么方法可以运行编译器而无需提供以下参数：

```
-I$CUDA_SDK_ROOT_DIR/common/inc/ -L$CUDA_SDK_ROOT_DIR/lib/ -L$CULA_LIB_PATH_64 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:52:35.717

CUDA 附带了 nvcc 的文档。该文件是 nvcc.pdf。特别是阅读 Nvcc.profile 文件。

# c# - 为什么此查询给我“对象引用未设置为对象的实例”？

> ID：10840686
> 
> 赞同：2
> 
> 时间：2012-05-31T20:19:47.367
> 
> 标签：c#, sql, oracle, dotconnect

这段代码：

```
string SidFinch = "Unknown SidFinch";

String sql = @"SELECT SidFinch 
           FROM PlatypusDuckbillS 
           WHERE PlatypusSTARTDATE = :Duckbilldate AND 
                   DuckbillID = :Duckbillid";
try {
    using (OracleCommand ocmd = new OracleCommand(sql, oc)) {
        ocmd.Parameters.Add("Duckbilldate", DuckbillDate);
        ocmd.Parameters.Add("Duckbillid", DuckbillID);
        SidFinch = ocmd.ExecuteScalar().ToString();
} 
```

...在“ExecuteScalar”行上失败。它没有找到任何东西（我通过的 ID 没有匹配的记录），但这不应该导致这个问题，不是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T20:21:49.760

如果它没有找到任何东西 - 那么可能`.ExecuteScalar()`正在返回并且调用...`NULL`不是一个好主意`.ToString()`。`NULL`

您需要将代码更改为：

```
object result =  ocmd.ExecuteScalar();

if(result != null)
{
    SidFinch = result.ToString();
} 
else
{
     // do whatever is appropriate here....
} 
```

# javascript - 如何使Nodejs调用同步然后我可以轻松使用它？

> ID：10840689
> 
> 赞同：3
> 
> 时间：2012-05-31T20:19:57.477
> 
> 标签：javascript, node.js, asynchronous

```
app.post('/login', function (req, res) {

    var login = req.body.login;
    var pass = req.body.pass;

    var ret = CheckUserValid(login, pass);

  res.send(ret);
})

function CheckUserValid(login, pass,callback) {
    var sql = "SELECT * FROM `user` WHERE login = ? AND pass= ?";
    client.query(sql, [login, pass], function selectResutl(err, results, fields) {
         console.log(results);
        if (!err) return true;
        else
            throw err;
    });
} 
```

第一个函数是关于请求的，第二个函数是关于调用 mysql 的。因为它是异步的，所以它不起作用。有人可以让我知道如何使它像在 C# 中一样同步工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:30:48.187

您的方法的签名`CheckUserValid`已经暗示了一个`callback`. 当您的 db-request 完成时，您可以使用它来调用某些东西，如下所示：

```
app.post('/login', function (req, res) {
  var login = req.body.login;
  var pass  = req.body.pass;

  // use a closure here for the callback of checkUserValid
  checkUserValid(login, pass, function(err, isValid) {
    // send the response when checkUserValid is done
    res.send(isValid)
  });
})

function checkUserValid(login, pass, callback) {
  var sql = "SELECT * FROM `user` WHERE login = ? AND pass= ?";
  client.query(sql, [login, pass], function(err, results, fields) {
    console.log(results);
    if (!err) {
      // there is no error, pass null for the error
      // and true for the result
      callback(null, true);
    } else {
      // an error occurred in the db-query
      // pass it to the callback
      callback(err)
    }
  });
} 
```

按照惯例，您应该传递`err`as 第一个参数，但最终由您决定。但是，您可以将原始错误传递给您的初始函数并在那里处理它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T13:07:28.403

你应该看看[Fibers](https://github.com/laverdet/node-fibers)模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T20:22:48.460

您可以按顺序链接要调用的函数

例如，您可以`res.send(ret);`作为您的回调`CheckUserValid`

# windows - 对齐内联汇编指令

> ID：10840693
> 
> 赞同：-1
> 
> 时间：2012-05-31T20:20:07.683
> 
> 标签：windows, visual-c++, alignment, inline, inline-assembly

我想在 Visual C++ 中定义 nop 的幻灯片或任何其他 asm 指令，我很确定它可以使用 #define _emit align() 吗？我想一次定义 200 个 nop 而不必执行“#define __asm nop __asm nop __asm nop ....”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:27:15.927

那么你想要对齐还是想要一些重复的指令？

如果你想对齐，你可以得到对齐：

```
__asm
{
    align 16
    nop
    align 16
    nop
    align 16
} 
```

如果你想重复指令，你必须通过定义来完成。

```
#define NOP1 __asm nop
#define NOP4 NOP1 NOP1 NOP1 NOP1
#define NOP16 NOP4 NOP4 NOP4 NOP4 NOP4
#define NOP64 NOP16 NOP16 NOP16 NOP16
#define NOP256 NOP64 NOP64 NOP64 NOP64

int main()
{
  NOP256
  return 0;
} 
```

# c# - Cookie 不会快速设置

> ID：10840694
> 
> 赞同：2
> 
> 时间：2012-05-31T20:20:17.273
> 
> 标签：c#, asp.net, cookies, httpcookie

我通常不使用 Cookie，但我想研究一下我通常使用的 Session 变量。

如果我设置了一个 Cookie，然后立即尝试从中读取，我不会得到我刚刚设置的值。

但是，如果我刷新页面或关闭浏览器并重新打开它，Cookie 似乎已设置。

我在 Chrome 中调试这个。那会有什么不同吗？

```
public const string COOKIE = "CompanyCookie1";
private const int TIMEOUT = 10;

private string Cookie1 {
  get {
    HttpCookie cookie = Request.Cookies[COOKIE];
    if (cookie != null) {
      TimeSpan span = (cookie.Expires - DateTime.Now);
      if (span.Minutes < TIMEOUT) {
        string value = cookie.Value;
        if (!String.IsNullOrEmpty(value)) {
          string[] split = value.Split('=');
          return split[split.Length - 1];
        }
        return cookie.Value;
      }
    }
    return null;
  }
  set {
    HttpCookie cookie = new HttpCookie(COOKIE);
    cookie[COOKIE] = value;
    int minutes = String.IsNullOrEmpty(value) ? -1 : TIMEOUT;
    cookie.Expires =  DateTime.Now.AddMinutes(minutes);
    Response.Cookies.Add(cookie);
  }
} 
```

下面是我如何使用它：

```
public Employee ActiveEmployee {
  get {
    string num = Request.QueryString["num"];
    string empNum = String.IsNullOrEmpty(num) ? Cookie1 : num;
    return GetActiveEmployee(empNum);
  }
  set {
    Cookie1 = (value != null) ? value.Badge : null;
  }
} 
```

这就是我的调用方式，其中`Request.QueryString["num"]`返回*NULL*以便`Cookie1`从中读取：

```
ActiveEmployee = new Employee() { Badge = "000000" };
Console.WriteLine(ActiveEmployee.Badge); // ActiveEmployee is NULL 
```

...但读取 from`Cookie1`也返回 null 。

**我需要调用像 Commit() 这样的命令，以便立即使用 cookie 值吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T20:22:35.677

Cookie 不像 Session - 有*两个*cookie 集合，而不是一个。

`Request.Cookies != Response.Cookies`. 前者是浏览器在请求页面时发送的一组 cookie，后者是您随内容返回的内容。这暴露了 cookie RFC 的性质，与 Session 不同，后者是纯粹的 Microsoft 构造。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T20:22:15.803

当您在*响应*中设置 cookie 时，它​​不会神奇地传输到*请求*cookie 集合中。它在响应中，您可以自由地在那里检查它，但它不会出现在请求对象中，直到它实际上是在下一个请求中从浏览器发送的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T20:25:34.497

要添加到其他答案，您可以通过将值缓存在私有变量中来解决问题，以防 cookie 尚未更新：

```
private string _cookie1Value = null;
private string Cookie1 {
  get {
    if (_cookie1Value == null)
    {
      // insert current code
      _cookie1Value = cookie.Value;
    }
    return _cookie1Value;
  }
  set {
    // insert current code
    _cookie1Value = value;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T20:50:18.137

简单地说；在响应中设置的 cookie 仅可用于下一个 htpp 请求（来自浏览器的下一个 get 或 post 操作）。

详细说明：在 HttpResponse 中设置 cookie 值时，只有在响应到达客户端后才会持久化/存储（意味着浏览器将从 Http Response 标头中读取 cookie 值并保存）。因此，从技术上讲，它仅适用于以后的请求。例如，当用户单击链接或按钮时，在此循环之后从浏览器进行服务器调用。

希望这能给你一些想法，我建议你在使用它之前阅读什么是 cookie 和 ASP.NET 包装它。

# hibernate - 当 hyperjaxb 将 JTS Point getter 标记为 @Transient 时，使用 jaxb、hyperjaxb3、jpa2、jts、hibernate-spatial、postgis 失败

> ID：10840702
> 
> 赞同：0
> 
> 时间：2012-05-31T20:20:46.583
> 
> 标签：hibernate, jpa, postgis, jts, hyperjaxb

我的同事对我坚持代码生成感到遗憾，但我决心证明这个特定的链是可以完成的。下面的示例是从我的项目中简化的（因此未经测试作为输入）；我将很快创建一个测试工具。目前使用休眠 4.1.4、休眠空间 1.1.1、hyperjaxb3-ejb-plugin 0.5.6。

我从一个使用 Position 元素的模式开始，该元素的类型是一个简单的字符串扩展：

```
 <xsd:simpleType name="wktPoint">
    <xsd:restriction base="xsd:string">
    </xsd:restriction>
  </xsd:simpleType> 
```

我使用 bindings.xjb 自定义将我的 xmlType wktPoint 映射到使用 jaxb:javaType 的 JTS Point javaType，因为我希望将 JTS Point 字段映射到 postgis 几何列：

```
<jaxb:javaType name="com.vividsolutions.jts.geom.Point" xmlType="wktPoint" parseMethod="test.Reader.readWKTPoint" printMethod="test.Writer.writeWKTPoint" /> 
```

稍后在 bindings.xjb 中，我开始使用 annox:annotation 自定义 Position 元素：

```
<jaxb:bindings node="xsd:complexType[@name='MyType']//xsd:element[@name='Position']">
  <annox:annotate target="getter">
    <annox:annotate annox:class="javax.persistence.Basic"/>        
    <annox:annotate annox:class="javax.persistence.Column" name="POSITION" columnDefinition="GEOMETRY"/>
    <annox:annotate annox:class="org.hibernate.annotations.Type" type="org.hibernatespatial.GeometryUserType">
      <annox:annotate annox:field="parameters">
        <annox:annotate annox:class="org.hibernate.annotations.Parameter" name="dialect" value="postgis"/>
      </annox:annotate>
    </annox:annotate>
  </annox:annotate>      
</jaxb:bindings> 
```

但是，这会在 MyType.java 中生成以下 getPosition 方法：

```
/**
 * Gets the value of the position property.
 * @return
 *     possible object is
 *     {@link String }
 */
@Transient
@Basic
@Column(columnDefinition = "GEOMETRY", name = "POSITION")
@Type(parameters = {
    @Parameter(name = "dialect", value = "postgis")
}, type = "org.hibernatespatial.GeometryUserType")
public Point getPosition() {
    return position;
} 
```

因此，当我启动我的应用程序并且 jpa/hibernate 开始初始化表时，它会完全跳过 POSITION 列（因为它被标记为@Transient）。

如何防止 @Transient 出现？看来我需要说服 Hyperjaxb 我们将能够将 JTS Point 类型直接写入数据库（这就是所有 @Type 的内容，表明我们希望 hibernatespatial 在读取和写入位置时使用 postgis 方言）。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T06:19:00.287

0.5.6 hyperjaxb-ejb-plugin 只是没有正确处理绑定自定义。我构建了一个 0.5.7-SNAPSHOT，它修改了 org.jvnet.hyperjaxb3.ejb.strategy.mapping AttributesMapping.getAttributeMapping()，这样我的自定义 jaxb 绑定将不再被标记为 Transient。我给了它以下后备检查：

```
if (isFieldOutlineBasic(fieldOutline)) {
    ...
} else if (isFieldOutlineComplex(fieldOutline)) {
    ...
} else {
    if (fieldOutline.getRawType() instanceof JClass) {
        return context.getBasicMapping();
    }
} 
```

这涵盖了我的自定义，它总是显示为 JDirectClass(Point)。进行更改后，使用正确的几何类型创建了 postgis 表，我现在可以接收 WKT 点字符串，将其解组为 JTS 点，然后将其与 JPA 一起作为 PostGIS 几何图形保存。我*还*需要重建 Hibernate Spatial（现在使用 1.1.2-SNAPSHOT）来使用 Hibernate4。我会将这项工作提交给 Karel Maesen，并将 Hyperjaxb 更改提交给 Aleksei Valikov，希望未来的版本会更加强大。

# ms-word - 如何在 Microsoft Word 2010 大纲视图中禁用换行

> ID：10840706
> 
> 赞同：3
> 
> 时间：2012-05-31T20:20:59.707
> 
> 标签：ms-word, outline, unwrap

在大纲视图中，如果线条超过大约 50 个字符左右，它们就会开始环绕。

如何禁用此环绕？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T13:15:41.940

转到选项，高级

查看标题为“显示文档内容”的面板

有一个名为“显示包含在文档窗口中的文本”的复选框

核实。

这应该够了吧。

（到底应该如何为自己解决这个问题，我不知道）

# c# - C# - 从序列中获取种子

> ID：10840711
> 
> 赞同：2
> 
> 时间：2012-05-31T20:21:09.893
> 
> 标签：c#, sequence, seed

~~是否可以从 C# 中的 Random() 序列中获取种子？~~

我的目标是创建一种编辑器，玩家可以在其中创建自己的角色，就像他可以选择一组不同的眼睛，放置它们，然后是头发等。最后它会输出一个带有不同数字的序列。

有了这个，我想得到种子，因为我的目标是能够与其他人分享这个角色。我会给他们种子，他们就会拥有我创造的角色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:41:40.987

根据您对@SLaks 的评论，我认为您提出的问题与您要解决的问题无关。

您要解决的问题是：如何获取一组用户定义的属性和值，并将它们变成朋友之间容易传递的东西？

这与遇到的问题完全相同：如何将一个又长又复杂的 URL 变成一个短 URL？

因此，我会看看这个著名的问题：URL 缩短器：[如何编写 URL 缩短器？](https://stackoverflow.com/questions/742013/how-to-code-a-url-shortener)

在那里，您将看到[双射函数](http://en.wikipedia.org/wiki/Bijection)的使用以及可用于解决您自己的问题的出色算法描述。这可用于将您的示例序列（例如`23,56,45,78,80`）转换为一个或两个字母代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T20:23:39.170

没有办法从现有的 Random 类实例或生成的序列中直接退出种子。但是，当您创建 Random 类时，您可以使用[允许您指定种子的构造函数](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)。如果你保存这个种子，你可以把它传给另一个人。

如果您希望您的构造是随机的，但保存该种子，则一种选择是使用 2 个 Random 实例。第一个可用于创建种子，然后使用该种子编号构建第二个（您将保存并传递给其他人）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T20:22:11.793

您应该在第一次创建种子时存储它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T20:30:24.180

为什么不只存储角色的属性而不是种子？这很简单，而且很有意义。

此外，如果用户创建自己的序列，它不会有“种子”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T21:07:13.567

另一种方法是让用户选择预先生成的特征集（即基于具有已知种子的随机序列）。这样，您只需为您的序列存储小种子（可能使用自定义伪随机生成器）。

# php - 页面未正确重定向

> ID：10840713
> 
> 赞同：0
> 
> 时间：2012-05-31T20:21:29.177
> 
> 标签：php, mysql

我正在创建一个网站，一切正常，直到我进行了一些更改。我意识到，在对 view_profile 页面进行更改后，它没有正确重定向回主页或任何其他页面。它只是卡在这里，我撤消了这些更改，但现在它仍然没有重定向。这是我的代码的一部分：

```
session_start();
error_reporting(E_ALL);

include_once "php/connect.php" ;
include_once "php/timeFunctions.php" ;

if (isset($_GET['midfa']))
{
 $midfa = preg_replace('#[^0-9]#i', '', $_GET['midfa']);     
}
if (isset($_SESSION['id'])) 
{
  $id = $_SESSION['id'];

} 
else 
{
   header("Location: index.php");
   exit();
}

$sql = mysql_query("SELECT * FROM tableName WHERE `memberID`='$midfa' LIMIT 1")
or die (mysql_error());

$existCount = mysql_num_rows($sql); 

if ($existCount == 0) 
{ 
 header("Location: index.php");
       exit();
}
while($row = mysql_fetch_array($sql))
{ 
     //gather all member data here
} 
```

在同一页面中，我还有指向会员资料、他们的照片等的按钮链接。所有页面都有相同的按钮菜单。问题是当我单击此特定页面（view_profile.php）中的任何链接时，它不会重定向我！我玩了这些会话，它们没有丢失或删除，所以我不知道问题可能是什么，因为这些按钮在任何其他页面上都可以正常工作。有什么帮助吗？
PS如果你想看看网站是avirix.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:01:16.703

*   `<?php`检查您在开始标签之前没有任何空格
*   检查您包含的文件是否没有回显任何内容
*   检查您的`view_php`编码是否为 UTF8 NO-BOM

# javascript - 加载时触发点击功能

> ID：10840714
> 
> 赞同：2
> 
> 时间：2012-05-31T20:21:30.707
> 
> 标签：javascript, jquery

我有以下功能，点击时激活：

```
$('.results .view-rooms').click(function(){   } 
```

无论如何我可以在文档加载时触发此功能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T20:22:44.727

是的。

```
$(document).ready(function(){ // on document ready
    $(".results .view-rooms").click(); // click the element
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T20:22:53.593

```
$('.results .view-rooms').click() 
```

你可以把它放在 DOM 中准备好：

```
$(function(){
    $('.results .view-rooms').click()
}); 
```

或者`window load`：

```
$(window).load(function(){
    $('.results .view-rooms').click();
}); 
```

注意没有这样的事件`document load`。
我们有`DOM ready`或`window load`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T20:23:21.813

```
$(document).ready(function(){ $('.results .view-rooms').click(); }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T20:32:53.350

考虑到您已经在使用 jQuery 绑定事件处理程序，并假设代码已经在构建整个 DOM 的位置，您可以将调用链接`.click()`到然后触发该事件处理程序：

```
$('.results .view-rooms')
                        .click(function(){...}) //binds the event handler
                        .click(); // triggers the event handler 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T20:32:34.227

把代码放在里面

```
$(function(){ // code here  }); 
```

喜欢：

```
$(function(){ 
   $(".results .view-rooms").click(); 
}); 
```

或者

```
$(function(){ 
   $(".results .view-rooms").trigger('click'); 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T20:24:12.530

```
$(function(){

    $('.results .view-rooms').click(function(){ 

    }

    $(".results .view-rooms").trigger('click');

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-20T18:25:37.283

最好的方法是：

html表单：

```
<form action="https://stackoverflow.com" method="get">
  <button id="watchButton"></button>
</form> 
```

结束 Jquery：

```
<script>
   $('document').ready(function() {
     $('#watchButton').click();
   });
</script> 
```

jQuery版本：

```
https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js 
```

# java - 无法让 JavaPNS 用于推送通知

> ID：10840715
> 
> 赞同：2
> 
> 时间：2012-05-31T20:21:32.707
> 
> 标签：java, ios, push-notification, apple-push-notifications, bouncycastle

好的，所以我正在为应用程序后端开发一个 java 服务器，它必须能够作为更大代码库的一部分发布 iOS 推送通知，所以我使用了 JavaPNS 库（v2.1.1），它被使用（并工作）以前在服务器的tomcat版本上。我在 Arch Linux 上使用 Eclipse 进行本地开发。

我正在尝试最简单的测试：

```
try{ 
   Push.alert("Hello", "cert.p12", "password", false, "<my iPods UDID>");
}catch(Exception e){
  e.printStackTrace();
} 
```

结果异常是：

```
 Exception in thread "main" java.lang.NoClassDefFoundError:org/bouncycastle/jce/provider/BouncyCastleProvider
at javapns.notification.PushNotificationManager.initializeConnection(PushNotificationManager.java:107)
at javapns.Push.sendPayload(Push.java:171)
at javapns.Push.alert(Push.java:47)
at testIOS.main(testIOS.java:20)
Caused by: java.lang.ClassNotFoundException: org.bouncycastle.jce.provider.BouncyCastleProvider
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 4 more 
```

证书文件在本地目录中（没有关于它加载的投诉），密码和 UDID 都是正确的。我已经尝试了一些事情（可能是徒劳的），例如从 oracle 安装无限制策略 JCE：http: [//www.bouncycastle.org/wiki/display/JA1/Provider+Installation](http://www.bouncycastle.org/wiki/display/JA1/Provider+Installation)

但我真的不知道出了什么问题，它似乎无法找到那个类/库，但我真的不知道如何解决它。提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T11:59:18.180

你有`bcprov-jdk15-146.jar`你的库吗？如果没有，请从此链接下载 jar 并将其放入您的库中。

[充气城堡](https://code.google.com/p/javapns/source/browse/trunk/lib/?r=319)

# hex - xxd -r 不带 xxd

> ID：10840717
> 
> 赞同：2
> 
> 时间：2012-05-31T20:21:52.707
> 
> 标签：hex, sh, xxd

我在 CentOS 5.5 的缩小版本上运行，没有很多可用的工具。没有 xxd、bc 或 hd。不幸的是，我无法安装任何其他实用程序。我确实有 od、dd、awk 和 bourne shell（不是 bash）。我正在尝试做的事情在正常环境中相对简单。基本上，我有一个数字，比如 100,000，我需要将它的二进制表示形式存储在一个文件中。通常，我会做类似...

```
printf '%x' "100000" | xxd -r -p > file.bin 
```

如果您查看文件的十六进制转储，您会正确看到表示为 186A0 的数字。

有没有我可以使用我可用的有限工具拼凑起来的等价物？我尝试过的几乎所有东西都存储了数字的 ascii 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:57:43.073

您可以结合使用您的 printf、awk 和 shell。

```
#!/usr/bin/env awk
# ascii_to_bin.awk
{
    # Pad out the incoming integer to a full byte
    len = length($0);
    if ( (len % 2) != 0) {
        str = sprintf("0%s", $0);
        len = len + 1;
    }
    else {
        str = $0;
    }
    # Create your escaped echo string
    printf("echo -n -e \"");
    for(i=1;i<=len;i=i+2) {
        printf("\\\\x%s", substr(str, i, 2));
    }
    printf("\"");
} 
```

然后你可以做

```
$ printf '%x' "100000" | awk -f ascii_to_bin.awk | /bin/sh > output.bin 
```

如果您知道目标二进制长度，则可以执行`printf "%0nX"`(`n`是目标大小) 并删除`(len % 2)`逻辑。

# c++ - 如何以自定义大小启动控制台而不闪烁？

> ID：10840724
> 
> 赞同：1
> 
> 时间：2012-05-31T20:22:17.830
> 
> 标签：c++, windows, console, mingw

我知道这种设置控制台大小的方法：

```
system("mode 128,128"); 
```

但是当程序启动时，系统首先尝试创建具有标准大小的控制台，并且当执行到达模式命令时 - 只有这样控制台窗口才会获得我想要的大小。问题是如何从一开始就根据我的需要制作控制台。

我在这里说的是通过资源管理器双击运行程序，因此控制台属于该程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T03:49:58.067

您可能更幸运地将程序链接为 GUI 应用程序而不是命令行，调用`AllocConsole()`以创建控制台，然后`SetConsoleWindowInfo()`调整它的大小。控制台仍会在调整大小之前创建，但由于您直接使用 API 调用，因此延迟可能小到不明显。

如果您这样做，您可能需要进行一些设置以将 C 和 C++ 标准输入/输出/错误连接到您创建的控制台。为此，请查看`_fdopen()`和`ios_base::sync_with_stdio()`。

# iphone - 无法使用移动设备放大或缩小

> ID：10840726
> 
> 赞同：4
> 
> 时间：2012-05-31T20:22:20.580
> 
> 标签：iphone, html, ipad, mobile, zooming

我制作了这个网站：`Kansvoedingsadvies.nl`使用 Wordpress。现在我正在使用移动设备（iPad 和 iPhone）访问该站点，我发现我无法放大或缩小。我在谷歌上搜索了一些答案，但我没有找到任何东西。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:59:14.313

这是因为以下行：

```
<meta name="viewport" id="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0" /> 
```

它基本上说大小不能大于或小于 1。阅读此内容以获取更多信息：[https ://developer.mozilla.org/en/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en/Mobile/Viewport_meta_tag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:52:33.100

虽然我没有详细检查您的代码，但它可能与您的 HTML 中的视口元标记有关。在这里查看更多信息：[https](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html) ://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html （视口）。

# javascript - 在 Javascript 中使用多个图像帧的 3D 旋转效果 - 如何在某些帧上触发元素淡入/淡出？

> ID：10840731
> 
> 赞同：0
> 
> 时间：2012-05-31T20:22:48.473
> 
> 标签：javascript, 3d, triggers, rotation, fadein

我正在使用 Javascript 来拖动和模拟旋转图像，方法是使用多个帧以 360 度显示图像。我对 JavaScript 比较陌生，并且在尝试插入一个触发器时遇到了困难，该触发器会在显示图像的某些帧（度数）时导致叠加图像淡入淡出。例如，当我拖动、旋转并显示图像的正面时，假设从第 10 帧到第 45 帧的范围内，4 个弹出标签将（同时）淡入并保持可见，直到我拖动并旋转图像远离该位置帧范围，导致标签淡出。在图像的背面，一旦显示可接受的帧范围内的任何帧，例如第 95 到 135 帧，我希望出现 3 个弹出标签。这可能吗？请在下面查看我一直在处理的代码：

```
 /*** configuration variables ***/
var
totalFrames = 72,
frameUrlTemplate =
'images/frames/Skeleton_[#frame].jpg'
;

/*** state variables ***/
var
rotation = 0,
lastFrameNo = -1,
dragStartRotation
;

/*** create the Uize.Widget.Drag instance ***/
var rotationViewer = page.addChild (
'rotationViewer',
Uize.Widget.Drag,
{
cancelFade:{duration:2000,curve:Uize.Curve.Rubber.easeOutBounce ()},
releaseTravel:function (speed) {
var
deceleration = 2000, // measured in pixels/s/s
duration = speed / deceleration
;
return {
duration:duration,
distance:Math.round (speed * duration / 2),
curve:function (_value) {return 1 - (_value = 1 - _value) * _value}
};
},
html:function (input) {
var
htmlChunks = [],
frameNodeIdPrefix = input.idPrefix + '-frame'
;
for (var frameNo = 0; ++frameNo <= totalFrames;) {
htmlChunks.push (
'<img' +
' id="' + frameNodeIdPrefix + frameNo + '"' +
' src="' + Uize.substituteInto (frameUrlTemplate,{frame:(frameNo < 10 ? '0' : '') + frameNo}) +'"' +
'/>'
);
}
return htmlChunks.join ('');
},
built:false
}
);

/*** wire up the drag widget with events for updating rotation degree ***/
function updateRotation (newRotation) {
rotation = ((newRotation % 360) + 360) % 360;
var frameNo = 1 + Math.round (rotation / 360 * (totalFrames - 1));
if (frameNo != lastFrameNo) {
rotationViewer.showNode ('frame'+ lastFrameNo,false);
rotationViewer.showNode ('frame'+ (lastFrameNo = frameNo));
}
}
rotationViewer.wire ({
'Drag Start':function () {dragStartRotation = rotation},
'Drag Update':function (e) {updateRotation (dragStartRotation - e.source.eventDeltaPos [0] / -2.5)}
});

/*** function for animating spin ***/
function spin (degrees,duration,curve) {
Uize.Fade.fade (updateRotation,rotation,rotation + degrees,duration,{quantization:1,curve:curve});
}

/*** initialization ***/
Uize.Node.wire (window,'load',function () {spin (-360,2700,Uize.Curve.easeInOutPow (4))});

/*** wire up the page widget ***/
page.wireUi (); 
```

我很感激对此的任何建议。谢谢！！-亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:42:36.923

javascrip fot html 元素中有 3d 转换，甚至一些库。如果它是平面图像，请使用它。如果你想模拟它的 3d，你已经获得了非常逼真的效果，只有 120 张图片。

```
 rotation = ((newRotation % 360) + 360) % 360;
 var frameNo = 1 + Math.round (rotation / 360 * (totalFrames -1));
 if (frameNo > 0 && frameNo< 60 )//code to show box 
```

# sql - 别名在内部联接中不起作用

> ID：10840734
> 
> 赞同：1
> 
> 时间：2012-05-31T20:22:52.063
> 
> 标签：sql, oracle, inner-join

我正在尝试为表构造和内部连接中的表成员提供别名，以便我可以在这样的选择中的子查询中使用它

```
 SELECT description,
       Avg((SELECT Count(*)
            FROM   facturation F
            WHERE  F.membreid = M.membreid))
FROM   v_type_membre
       INNER JOIN v_membre M
               ON v_type_membre.typeid = M.typeid
       INNER JOIN v_facturation
               ON M.membreid = v_facturation.membreid
GROUP  BY description
ORDER  BY description; 
```

为什么我会收到错误消息：

```
Error at Command Line:3 Column:31
Error report:
SQL Error: ORA-00907: missing right parenthesis
00907\. 00000 -  "missing right parenthesis"
*Cause:    
*Action: 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:34:47.683

您最初的问题是别名周围的引号。你不需要它们。

同样，您不需要相关子查询。您可以将查询编写为：

```
select description, avg(cnt*1.0) as avg_cnt
FROM v_type_membre INNER JOIN v_membre M
     ON v_type_membre.typeid = M.typeid INNER JOIN
     v_facturation
     ON M.membreid = v_facturation.membreid inner join
     (SELECT f.membreid, Count(*) as cnt
      FROM facturation F
      group by F.membreid
     ) cnt
     on cnt.membreid = M.membreid
GROUP  BY description
ORDER  BY description; 
```

除了更清晰（在某些人看来）之外，这还允许您包含最小值和最大值，或者根据需要计算值是 10 和 42 的次数。

我还添加了一个“*1.0”来将计数转换为浮点数。在某些数据库中，整数的平均值是整数，这可能不是您想要的。Oracle 的平均值是正确的，但我有这样做的习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:35:30.023

尝试将子选择移动到连接（我认为您不需要 v_facturation 连接，我需要更多信息（我猜 v_* 是一个视图）来确定。）；

```
SELECT description, Avg(F.fact_cnt)
FROM   v_type_membre
       INNER JOIN v_membre AS M
               ON v_type_membre.typeid = M.typeid
--       INNER JOIN v_facturation
--               ON M.membreid = v_facturation.membreid
       INNER JOIN (SELECT membreid, Count(*) 'fact_cnt'
            FROM   facturation group by membreid) AS F
            ON  F.membreid = M.membreid
GROUP  BY description
ORDER  BY description; 
```

（抱歉，目前没有 Oracle 或任何其他可用的数据库，这都是在我的脑海中解析和编译的......）

# c - 开关内的gets（）被忽略

> ID：10840740
> 
> 赞同：0
> 
> 时间：2012-05-31T20:23:06.740
> 
> 标签：c

有人可以告诉我为什么`case 1`完全忽略了 get 吗？

```
 // #define M 50 is at the top

    char product[M] = {0};
    int choice = -1;

    printf("Command: ");
    scanf("%d", &choice);

    switch(choice){

        case 0:
            break;

        case 1:
            printf("Product: ");
            gets(product);
            insert_product(warehouse, price, product);
            break;

        case 2:
            // print_all();
            break;

        default:
            printf("Scelta non valida\n");
            break;

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:31:26.017

获取可能会被先前输入的结束字符跳过。尝试在获取之前添加一个 getchar() 以查看是否是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:35:09.493

问题是您在阅读时输入的换行符`choice`：

```
scanf("%d", &choice); 
```

被用作下一个的输入`gets(product);`，因此它读取一个空字符串。尝试添加一个人工`getchar`后`scanf`吸收换行符：

```
scanf("%d", &choice);
getchar(); 
```

现在应该可以工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T21:00:24.297

首先，重要的一点...

**永远不要永远不要**使用`gets`. 曾经。即使是练习代码。即使别人告诉你。就像电影*Highlander II*；最好假装它从未存在过。它在 C99 中已弃用，并已从 C2011 中完全删除。不要使用它。不要试图通过声称这只是练习代码来证明使用它的合理性。如果其他人要求您使用它，请退后并告诉他们您将使用它`fgets`。如果他们让你伤心，把它们寄给我，我会纠正它们。必要时使用棒球棒。

好吧，既然我已经清除了...

`gets``scanf`正在从您为上一个呼叫输入的输入中提取尾随换行符。你有几个选择：

1.  使用另一个`scanf`调用而不是`gets`，这次使用`%s`转换说明符（以及字段宽度）；不像`gets`，它会跳过任何前导换行符；

2.  在调用之前调用`getchar()`（或等效）以使用换行符`gets`；

3.  与其使用 读取`choice`为整数`scanf`，不如使用 将其读取为文本`fgets`并使用 将其转换为整数`strtol`。

选项 3 是最好的 IMO。混合调用`scanf`/`fscanf`并且`fgets`通常是胃灼热的原因，正是因为尾随的换行问题。*最好在所有事情上都*坚持使用其中一种。使用`fgets`以文本形式读取所有内容的优点是它使输入验证更容易，尤其是对于数字输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-17T10:25:04.120

// #define M 50 在顶部

```
char product[M] = {0};
int choice = -1;

printf("Command: ");
scanf("%d", &choice);

switch(choice){

    case 0:
        break;

    case 1:
        printf("Product: ");
        getchar();
        gets(product);
        insert_product(warehouse, price, product);
        break;

    case 2:
        // print_all();
        break;

    default:
        printf("Scelta non valida\n");
        break;

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-17T19:18:49.413

在使用`fflush(stdin)`之前使用`gets`作为输入，因为在`gets`使用之后将换行符作为输入`scanf("%d", &choice);`

`fflush(stdin)`清除输出缓冲区并将缓冲的数据移动到控制台。

# r - 是否使用“转储”可读的跨平台转储 R 对象？

> ID：10840741
> 
> 赞同：1
> 
> 时间：2012-05-31T20:23:07.177
> 
> 标签：r, format, dump

我正在考虑将 .Rdata 文件的某些用途替换为`save`.Rdata 文件，`dump`后者会生成 R 对象的文本表示。

假设`dump`安装在不同操作系统（例如linux、mac、windows）上的R可以读取使用创建的文件是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:25:21.973

甚至那些在所有平台上都是可读的——如果您的目标是*跨平台*使用而不是*跨应用程序*使用（在这种情况下，您需要所有应用程序读取的格式......）`save()`，我会坚持使用这种格式。

# nosql - Cassandra 读取延迟统计信息是否分段计算二级索引查询？

> ID：10840742
> 
> 赞同：1
> 
> 时间：2012-05-31T20:23:11.033
> 
> 标签：nosql, cassandra, latency

我试图了解读取延迟统计数据是否通过

*   节点工具cfstats
*   nodetool cfhistograms

，将分别计算二级索引查询中的每次读取。

我想答案可能取决于二级索引查询是由节俭客户处理还是由 Cassandra 在内部处理。我也不知道。

[1] [Cassandra - cfstats 和读/写延迟的含义](https://stackoverflow.com/questions/9431590/cassandra-cfstats-and-meaning-of-read-write-latency)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T11:29:15.217

Cassandra 读取延迟是通过计算每个读取查询所花费的平均时间来计算的。

因为单个 get 查询或 multiget 查询被视为单个读取并计算平均值。[`StorageProxy.read()`是 Cassandra 收集每个查询所用时间的函数]

# asp.net - ASP.NET 2.0 无法打开页面

> ID：10840753
> 
> 赞同：0
> 
> 时间：2012-05-31T20:23:50.830
> 
> 标签：asp.net, iis

我在打开 aspx 网页时遇到问题。它是 Win2003 64 位上的 IIS 6.0。我的网站是 32 位应用程序。当我尝试打开该站点时，需要大量时间来响应并最终超时。我注册了 asp.net 2.0 32 位并将池设置为 32 位允许。该站点正常打开，直到我禁止 Web 服务扩展 .NET 2.0（仅允许 .NET 2.0 和 .NET 2.0（32 位）），然后再次允许。现在无法打开页面并等待响应直到超时。对不起，我的英语不好。

# php - 递归数组爆炸

> ID：10840758
> 
> 赞同：0
> 
> 时间：2012-05-31T20:24:25.770
> 
> 标签：php, arrays, recursion

我的字符串结构像

```
(cat,dog,fish) && (drinks) && (milk,water) 
```

我需要转换为一个数组列表，如

```
cat drinks milk
cat drinks water
dog drinks milk
dog drinks water
fish drinks milk
fish drinks water 
```

我考虑过使用一个循环来完成它，该循环将每个组插入到一个数组中，比如

第 0 遍：用第一行填充数组

```
(cat,dog,fish) && (drinks) && (milk,water) 
```

第一遍：检测第一组并在移除源的同时将其拆分

```
cat && (drinks) && (milk,water) 
dog && (drinks) && (milk,water) 
fish && (drinks) && (milk,water) 
```

第二关……

然后循环这个每次取线拆分它添加到最后并删除原来的。

你有更好的主意吗？在 PHP 中？

对于那些想知道它是我正在编写的句子解析代码的一部分的人。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:58:48.517

使用正常的字符串解析来获取与其分组相对应的 3 个数组。我想你可以用explode()搞清楚

然后生成3个数组的“笛卡尔积”

```
$iterators = array(
    new ArrayIterator(array('cat', 'dog', 'fish'))
  , new ArrayIterator(array('drinks'))
  , new ArrayIterator(array('milk', 'water'))
);
$citer = new CartesianProductIterator($iterators);
foreach ($citer as $combo) {
    printf("[%s]\n", join(',', $combo));
} 
```

使用

```
class CartesianProductIterator implements Iterator {
    protected $iterators;

    function __construct(array $iters) {
        $this->iterators = $iters;
    }

    function rewind() {
        foreach ($this->iterators as $it) {
            $it->rewind();
        }
    }

    function current() {
        $values = array();
        foreach ($this->iterators as $it) {
            $values[] = $it->current();
        }
        return $values;
    }

    function key() {
        return null;
    }

    function next() {
        /*      
        loop them in reverse, but exclude first
        why? example, odometer: 55199
        you always check the rightmost digit first to see if incrementing it would roll it over and need to be "rewound" to 0, 
        which causes the digit to the left to increase as well, which may also cause it to roll over as well, and so on...
        looping in reverse operates from right column to the left.
        we dont rewind the first column because if the leftmost column is on its last element and needs to roll over
        then this iterator has reached its end, and so rewind() needs to be explicitly called 
        */
        for ($i = count($this->iterators) - 1; $i > 0; --$i) {
            $it = $this->iterators[$i];
            $it->next();
            if ($it->valid()) {
                // were done advancing because we found a column that didnt roll over
                return;
            } else {
                $it->rewind();
            }
        }

        //if execution reached here, then all of the columns have rolled over, so we must attempt to roll over the left most column
        $this->iterators[0]->next();
    }

    function valid() {
        return $this->iterators[0]->valid();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:57:20.437

有一次我需要制作相似套装的每一种组合。我有一个递归函数，它实际上在大数组上非常耗费资源（9 个部分，每个部分包含 5 个项目），但我可以尝试为您调整它：

```
$input=array(array("cat","dog","fish"),array("drinks"),array("milk","water"));
$output=array();
function combination($string,$level)
{
  global $output;
  global $input;
  if (isset($input[$level]))
  {
    $item=$input[$level];
    if (is_array($item))
    {
      foreach ($item as $i)     
        combination($string." ".$i,$level+1);
    }
    else
      combination($string." ".$item,$level+1);
  }
  else
    $output[]=$string;
}
combination("",0);
var_export($output); 
```

然而，将你的字符串转换为输入数组是不同的问题，我不知道如何解决，所以我会一直由你决定。

# asp.net - asp.net 2.0 asmx WebService 在 JSON 响应中排除 __type

> ID：10840759
> 
> 赞同：3
> 
> 时间：2012-05-31T20:24:26.830
> 
> 标签：asp.net, json, web-services, asp.net-ajax

我正在尝试确定如何`__type`从 asmx WebService 中排除我的 JSON 响应。

我要返回的类的构造如下。

```
public class MyClassName
{
    private string _item1 = string.Empty;
    private string _item2 = string.Empty;

    public string item1 = { get { return _item1; } set { _item1 = value; } }
    public string item2 = { get { return _item2; } set { _item2 = value; } }
}

public class MyClassName_List : List<MyClassName>
{
    public MyClassName_List() {}
} 
```

然后我有一个数据访问层和业务逻辑层，它返回一个填充的`MyClassName_List`. 我的 WebMethod 设置如下。

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.Services;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class MyClassName_WebService : System.Web.Services.WebService
{
    [WebMethod]
    public MyClassName_List GetList()
    {
        return MyClassName_List_BusinessLogicLayer.GetList();
    }
} 
```

JSON 对象返回的结构如下。

```
[
    {
    item1: "item1-1 text",
    item2: "item1-2 text",
    __type: "NamespaceUsed.MyClassName"
    },
    {
    item1: "item2-1 text",
    item2: "item2-2 text",
    __type: "NamespaceUsed.MyClassName"
    },
] 
```

我只想按如下方式返回 JSON 对象。

```
[
    {
    item1: "item1-1 text",
    item2: "item1-2 text"
    },
    {
    item1: "item2-1 text",
    item2: "item2-2 text"
    }
] 
```

我已经尝试过[这里](https://stackoverflow.com/questions/627356/how-to-not-serialize-the-type-property-on-json-objects)的建议，但我似乎无法正确实施。非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T14:30:06.890

方法如下。

```
public class MyClassName
{
    private string _item1 = string.Empty;
    private string _item2 = string.Empty;

    public string item1 = { get { return _item1; } set { _item1 = value; } }
    public string item2 = { get { return _item2; } set { _item2 = value; } }

    protected internal MyClassName() { } //add a protected internal constructor to remove the returned __type attribute in the JSON response
}

public class MyClassName_List : List<MyClassName>
{
    public MyClassName_List() {}
} 
```

我希望这对其他人也有帮助！

# matlab - 在循环中使用 find() 并创建带有结果的矩阵

> ID：10840760
> 
> 赞同：0
> 
> 时间：2012-05-31T20:24:28.133
> 
> 标签：matlab

我希望将生成的结果`matchIdx`保存到单独的向量矩阵中。然后可以将此 Idx 用作进一步操作中的地址。

问题是当我尝试分配给`matchIdx(:,i)`我时，由于列的大小不匹配而出现错误。

我希望有人能帮忙。谢谢你。

```
data = [1;2;3;3;5;6;6;3;8;8;9;5;6;7;8;9;10];
check = [2;3;5];

for i=1:3
  match(:,i) = ismember(data,check(i));
  matchIdx = find(match(:,i))
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:35:06.800

你的问题不是很清楚，但我假设你试过了

```
matchIdx(:,i) = find(match(:,i)); 
```

这是行不通的，因为`find(match(:,1))`并且`find(match(:,2))`不能保证长度相同。

使用元胞数组对你有用吗？

```
matchIdx{i} = find(match(:,i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:43:27.730

您可以使用简单的相等来代替 ISMEMBER。在一行中：

```
>> matchIdx = arrayfun(@(x) find(data==x), check, 'Uniform',false)
matchIdx = 
    [         2]
    [3x1 double]
    [2x1 double] 
```

# sql-server - 重命名列：“SP_RENAME”附近的语法不正确。？

> ID：10840764
> 
> 赞同：15
> 
> 时间：2012-05-31T20:24:55.873
> 
> 标签：sql-server, sp-rename

```
ALTER TABLE [TEMP]
SP_RENAME '[TEMP].[Day]', 'GT', 'COLUMN' 
```

我正在尝试重命名`Day`并`GT`收到错误消息

> “SP_RENAME”附近的语法不正确

SQL Server Management Studio 显示错误已开启`SP_RENAME`

注意：我对除 sp_rename 之外的其他选项持开放态度

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-31T20:28:07.077

`SP_RENAME`不是`ALTER TABLE`声明的一部分。它是一个系统存储过程，因此应该使用`EXEC`/`EXECUTE`语句调用它，如下所示：

```
exec SP_RENAME '[TEMP].[Day]', 'GT', 'COLUMN' 
```

（没有`alter table temp`位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T19:54:37.430

您需要使用 EXEC 启动每个 SP_RENAME

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-13T04:27:44.737

为@juergen d 引用的答案工作。

```
PRINT N'Modifying Schema for SAMPLE_TABLE started'
DECLARE @COLNAME_DEAL_TERM VARCHAR(200) ;
SET @COLNAME_DEAL_TERM = 'SAMPLE_COL_NAME';

IF COL_LENGTH('SAMPLE', @COLNAME_DEAL_TERM ) IS NULL
BEGIN
    exec SP_RENAME 'SAMPLE.portfolio',@COLNAME_DEAL_TERM , 'COLUMN';
END;
GO 
```

# objective-c - 列出调度队列中的项目

> ID：10840768
> 
> 赞同：1
> 
> 时间：2012-05-31T20:25:25.933
> 
> 标签：objective-c, ios

我遇到了 dispatch_async 挂起的问题。当我向队列中添加另一个操作时，我想找出队列中有哪些操作/方法，以便我可以追踪我的队列挂起的位置。

```
 dispatch_async(dispatch_get_main_queue(), ^{
            // NSLog the items in the queue at this moment
            [_delegate searchOperationFinished:self];
        }); 
```

我验证了队列正在运行它运行其他操作，但它永远不会运行到最后运行此方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:23:11.090

你不能，据我所知。检查控制台输出以查看是否有异常引发。更好的是，在调试器下运行它并打破异常。

如果这没有显示任何内容，请在调试器中停止它并检查主线程的堆栈跟踪。据推测，某些东西要么在主线程上被阻塞，要么正在运行内部运行循环。无论哪种方式，堆栈跟踪都应该揭示什么。（另一种获取堆栈跟踪的方法，至少在 Mac OS X 上，是使用 Activity Monitor 或 Instruments 来“采样”进程。）

# c++ - Clang 问题：构造时的隐式类型转换

> ID：10840769
> 
> 赞同：10
> 
> 时间：2012-05-31T20:25:28.657
> 
> 标签：c++, c++11, clang

# 概要

我正在努力使 C++11 代码与 Clang 兼容，并遇到了 GCC >= 4.6 接受代码而 Clang >= 3.1 不接受的情况。Clang 认为一个`candidate constructor not viable`.

# 细节

这是一个精简的例子来说明这个问题：

```
#include <utility>

template <typename...>
struct T;

template<>
struct T<>
{
    typedef T super;

    constexpr T() { }

    template <typename... Args>
    T(Args&&...) { }

};

template <typename Head, typename... Tail>
struct T<Head, Tail...> : T<Tail...>
{
    typedef T<Tail...> super;

    Head head;

    T(Head arg) : super(), head(std::move(arg)) { }
};

struct void_type
{
    constexpr void_type() { }
    constexpr void_type(const void_type&) { }
    void_type& operator=(const void_type&) = default;

    template <typename Arg0, typename... Args>
    void_type(Arg0&&, Args&&...) { }
};

struct atom { };

int main()
{
    atom a;
    T<void_type> t(a);

    return 0;
} 
```

我得到的错误是：

```
ctor-init.cpp:44:18: error: no matching constructor for initialization of 'T<void_type>'
    T<void_type> t(a);
                 ^ ~
ctor-init.cpp:19:8: note: candidate constructor (the implicit copy constructor) not viable: no known conversion from 'atom' to 'const T<void_type>' for 1st argument;
struct T<Head, Tail...> : T<Tail...>
       ^
ctor-init.cpp:25:5: note: candidate constructor not viable: no known conversion from 'atom' to 'void_type' for 1st argument;
    T(Head arg) : super(), head(std::move(arg)) { }
    ^
1 error generated. 
```

我不明白为什么 clang 抱怨缺少转换的可能性，因为我认为这个“包罗万象”的构造函数应该可以工作：

```
template <typename Arg0, typename... Args>
void_type(Arg0&&, Args&&...) { } 
```

所以我感到困惑的错误是：

```
ctor-init.cpp:25:5: note: candidate constructor not viable: no known conversion from 'atom' to 'void_type' for 1st argument;
    T(Head arg) : super(), head(std::move(arg)) { }
    ^ 
```

毕竟，GCC 接受了代码。这可能是 Clang 错误吗？（我使用的是 LLVM git 存储库中最新的 Clang。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:35:59.697

确实，这是一个 Clang 错误。事实证明，可变参数构造函数被错误地标记为显式。[在 Clang r158040 中修复](http://llvm.org/bugs/show_bug.cgi?id=13003#c2)。

# python - 反向方法变异输入

> ID：10840770
> 
> 赞同：0
> 
> 时间：2012-05-31T20:25:31.860
> 
> 标签：python, iteration, mutation

对于一个赋值，我们被要求创建一个函数，该函数将反转任意嵌套列表中的所有元素。所以函数的输入应该返回如下内容：

```
>>> seq = [1,[2,[3]]]
>>> print arb_reverse(seq)
[[[3],2],1]
>>> seq = [9,[[],[0,1,[[],[2,[[],3]]]],[],[[[4],5]]]]
>>> print arb_reverse(seq)
[[[[5,[4]]],[],[[[[3,[]],2],[]],1,0],[]],9] 
```

我想出了一个效果很好的递归解决方案：

```
def arb_reverse(seq):
    result = []
    for element in reversed(seq):
        if not is_list(element):
            result.append(element)
        else:
            result.append(arb_reverse(element))
    return result 
```

但是对于一些个人挑战，我想创建一个不使用递归的解决方案。这种尝试的一个版本导致了一些我不理解的奇怪行为。为了澄清起见，我没想到这个版本能正常工作，但由此产生的输入突变没有意义。这是有问题的迭代版本：

```
def arb_reverse(seq):
    elements = list(seq)   #so input is not mutated, also tried seq[:] just to be thorough
    result = []
    while elements:
        item = elements.pop()
        if isinstance(item, list):
            item.reverse() #this operation seems to be the culprit
            elements += item 
        else:
            result.append(item)
    return result 
```

这将返回一个扁平的半反向列表（有点预期），但有趣的部分是它对输入的作用（不是预期的）......

```
>>> a = [1, [2, [3]]]
>>> arb_reverse(a)
[2, 3, 1]
>>> a
[1, [[3], 2]]
>>> p = [1, [2, 3, [4, [5, 6]]]]
>>> print arb_reverse(p)
[2, 3, 4, 5, 6, 1]
>>> print p
[1, [[[6, 5], 4], 3, 2]] 
```

我的印象是，通过将输入中包含的值传递给使用`list()`或的变量，`input[:]`我`elements`将避免改变输入。然而，后来的一些打印声明表明，反向方法有助于改变原始列表。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:32:15.267

list() 调用正在使用原始列表中的浅拷贝列表创建一个新列表。

试试这个（从[这里](http://love-python.blogspot.co.uk/2008/04/how-to-copy-list-in-python.html)偷来的）：

```
from copy import deepcopy
listB = deepcopy(listA) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T20:32:16.863

尝试通过此工具运行以下代码[http://people.csail.mit.edu/pgbovine/python/tutor.html](http://people.csail.mit.edu/pgbovine/python/tutor.html)

```
o1 = [1, 2, 3]
o2 = [4, 5, 6]

l1 = [o1, o2]

l2 = list(l1)

l2[0].reverse()

print l2
print l1 
```

具体看`l2[0].reverse()`被调用时会发生什么。

您会看到，当您调用`list()`创建列表的副本时，列表仍然引用相同的对象。

# c# - 为自定义代码访问安全性实施 IPermission

> ID：10840772
> 
> 赞同：4
> 
> 时间：2012-05-31T20:25:34.950
> 
> 标签：c#, .net, security, code-access-security

我目前正在尝试为我们的项目构建自定义代码访问安全解决方案。

因此，我创建了一个 CustomPermissionAttribute，应该使用如下所示：

```
[CustomPermissionAttribute(SecurityAction.Demand, Permission="PermMethodABC")]
public void MethodABC() 
{ 
} 
```

Attribute的`CreatePermission()`方法创建并返回一个新的 CustomPermission 实例。

CustomPermission 类的 Demand 方法应针对我在 Thread.Current.CurrentPrincipial 中的自定义 IPrincipial 实现检查安全性：

```
public sealed class CustomPermission : IPermission
{
    private string _RequiredPermission;
    ...
    public void Demand()
    {
        ICustomPrincipial _pr = Thread.Current.CurrentPrincipial as ICustomPrincipial;
        if (_pr == null) throw...
        if (!_pr.HasPermission(_RequiredPermission)) throw...
    }
}

public interface ICustomPrincipial : IPrincipial
{
    bool HasPermission(string RequiredPermission);
} 
```

以上所有内容都在**签名**的“Assembly A”中。

未**签名**的程序集 B 包含以下实现程序集 A 的 ICustomPrincipial 的 CustomPrincipial 实现：

```
public sealed class CustomPrincipial : ICustomPrincipial
{
    User _User;
    ...
    public bool HasPermission(string RequiredPermission)
    {
        if (_User has permission defined with "PermMethodABC") ...
        return true/false;
    }
    ...
} 
```

（现在程序集 A 必须知道有关用户类型的任何信息。如果我将 CustomPrincipial 类放入程序集 A，那么所有带有用户内容的程序集也必须签名......否则我无法编译程序集 A）

在应用程序启动时，CustomPrincipial 的一个新实例被分配给 Thread.Current.CurrentPrincipial。

两个问题：

*   程序集 A 中的公共 ICustomPermission 接口会导致安全问题吗？

*   是否绝对有必要全面实施所有 IPermission 成员？尤其是 ToXML 和 FromXML 方法……每次我在运行时访问 MethodABC() 时，都会调用 CreatePermission() 方法。

**编辑：** 广告 1：我正在考虑以下情况：“程序集 C”包含受 CustomPermissionAttribute 保护的 MethodXY。为了访问这个受保护的方法，攻击者可以创建一个新的应用程序，引用程序集 A 和程序集 C，并且可以自己实现程序集 A 的公共 ICustomPrincipial 接口（-> HasPermission() 一直返回 true）。他可以将他的实现实例分配给他自己的 Thread.Current.CurrentPrincipial。如果程序集 A 的 Demand() 方法检查 Thread.Current.CurrentPrincipial，则攻击者可以访问 MethodXY。这可能是一种可能的情况..！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:02:55.423

> 程序集 A 中的公共 ICustomPermission 接口会导致安全问题吗？

假设您对自己的权限很小心，`Thread.Current.CurrentPrincipal`应该对大多数其他程序是只读的，从而无法绕过。（至少快速浏览一下 MSDN 页面）

但是，与任何安全问题一样，最好自己测试一下。尝试编写在您的环境中运行并实现自己的绕过方式的代码`CurrentPrincipal`。

> 是否绝对有必要全面实施所有 IPermission 成员？尤其是 ToXML 和 FromXML 方法……每次我在运行时访问 MethodABC() 时，都会调用 CreatePermission() 方法。

[在完整实现的msdn](http://msdn.microsoft.com/en-us/library/system.security.ipermission.aspx)页面上有一个示例，它看起来不会太讨厌，并且可以保证您以后不会因为`NotImplementedException`.

但是，我还没有进行足够的实验`IPermission`来了解在正常操作期间调用了哪些方法。

**编辑：**这更多是评论，但有点长。

要记住的重要事项之一是，如果一段代码具有修改主体的权限，则您无法阻止它绕过您的任何权限。`SecurityPermissionFlag.ControlPrincipal`是设置`CurrentPrincipal`要求的权限。我相信除非您使用 Caspol.exe 之类的工具，否则默认情况下，任何可执行文件都会在完全信任的情况下运行。

总而言之，默认情况下，.NET 框架假定自定义代码是完全受信任的，除非另有说明。如果您正在调用您不信任的代码，则有一些机制可以确保代码以较低的安全凭证运行，或者如果您有一个您不信任的可执行文件，那么您可以降低其安全凭证。但是，机器的任何管理员都有足够的权力绕过您实施的任何代码访问安全性（正如您在`IPrincipal`覆盖中评论的那样）。

如果这不能很好地解释，请告诉我，我可以添加更多细节。

# javascript - 数组中的最小偶数值

> ID：10840773
> 
> 赞同：1
> 
> 时间：2012-05-31T20:25:40.160
> 
> 标签：javascript, arrays, loops, for-loop, while-loop

所以，我有这个程序要求数组中的最小偶数值，我已经编写了代码，但我似乎错过了一个循环。我会写正确的代码，但我希望有人能解释为什么会有一个while循环

```
 <HTML>
    <HEAD>
    <SCRIPT LANGUAGE = "JavaScript">

    var number=new Array(10)

  for(var i=0; i<number.length; i=i+1)
{ 
   number[i] =window.prompt('enter number ','')
   number[i] =parseFloat(number[i])
}

  var y = 0 
  while (number[y] % 2 != 0) //get the first even number in the array
{
    y = y + 1
}
//after you exit the while loop y will have the index of the first even number 

var Min 
Min = number[y] 

 for(var i=0; i<number.length; i=i+1)
{
    if (number[i] % 2 == 0)
    {
            if(number[i]<Min)
            {
                    Min= number[i]
            }
    }
}

document.write(Min)

</SCRIPT>
</HEAD>
</HTML> 
```

所以，这部分

```
 var y = 0 
  while (number[y] % 2 != 0) //get the first even number in the array
{
    y = y + 1
}
//after you exit the while loop y will have the index of the first even number 
```

我发现很难真正掌握这个循环，如果我可能会问：还有其他方法可以找到数组中的最小值吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:28:23.163

while 循环设置 的第一个值，`Min`以便后续比较起作用。这是一种更简单、更快捷的方法来做同样的事情：

```
var min = Infinity; // Start with the biggest number possible
for (var i=myArray.length;i--;){
  var val = myArray[i];
  if (val<min && val%2==0) min = val;
} 
```

*这更快，因为 - 与原始代码不同 - 这不会对第一个非偶数值进行两次迭代。`for`如果原始循环从 index 开始，它的速度将大致相当`y`，即`for (var i=y+1;i<number.length;++i)`*

*它也稍微快一点，因为`for`循环缓存了数组的长度而不是每次都查找它，并且因为它每次循环只查找数组中的值一次，而不是三次。然而，像 V8 这样的现代 JavaScript 运行时可以优化幼稚代码以使其行为相似，因此这不是很重要的一点。*

* * *

**编辑**：为了好玩，这是一种现代的函数式编程方法：

```
var min = Math.min.apply(Math,myArray.filter(function(n){ return n%2==0 })); 
```

上面用于[`Array.filter`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)创建仅包含偶数项的新数组，然后用于[`Function.prototype.apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)将值数组作为参数传递给[`Math.min`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/min).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:07:07.317

如果你对如何在现代 Javascript 中做到这一点感兴趣，它是这样的：

```
minEvenElement = Math.min.apply(Math, myArray.filter(function(e) { return !(e % 2) })) 
```

# codeigniter - 找不到 Codeigniter 控制器得到 404

> ID：10840774
> 
> 赞同：0
> 
> 时间：2012-05-31T20:25:44.227
> 
> 标签：codeigniter, controller

您好，我创建了一个名为 about.php 的简单控制器，当我转到 url: domain/index.php/about 或 domain/about 时，我收到 404 错误。我有一个名为 test.php 的控制器，它可以工作。它呼应了Hello World。如果我将 test.php 复制到新文件名，则新文件也不起作用。我很困惑。

-J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:29:48.783

你可以试试这个：

```
<?php 
class About extends CI_Controller {
public function index(){
  echo "Hello World";
}
} 
```

这意味着在 about 控制器中创建索引操作。

# c - 为什么 Visual Studio 2010 不能识别 CUDA 函数？

> ID：10840776
> 
> 赞同：2
> 
> 时间：2012-05-31T20:25:55.753
> 
> 标签：c, visual-studio-2010, visual-studio, cuda

我刚刚使用所有标准选项将 CUDA 驱动程序和 CUDA 工具包 4.2 安装到我的机器上。我有一个支持 CUDA 的 NVIDIA GPU。

出于某种原因，尽管 CUDA 文件位于 Program Files/MSBuild/Microsoft.cpp/v4.0/BuildCustomizations 中，但 Visual Studio 编译器不会编译简单的内核函数：

```
__global__ void kernel(void){

    //I do nothing :(

} 
```

它在`__global__`.

我还有什么需要做的吗？

此外，我在使用 Visual Studio 时遇到了一些麻烦（IDE 和我从不兼容），并且它想要创建大量文件。我通过“添加”并选择“现有文件”添加了所有源文件和头文件，所以我相信我的源文件不包含 Visual Studio 的过多文件。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:45:46.767

您是否启用了 CUDA 构建自定义，并且您是否使用“.cu”扩展名命名您的 CUDA 文件？要在 Visual Studio 2010 中进行构建自定义，请在解决方案资源管理器中右键单击 CUDA 项目并选择构建自定义。

# android - 如何从代码中使用新的 Android ICS 桌面快捷方式文件夹？

> ID：10840778
> 
> 赞同：1
> 
> 时间：2012-05-31T20:26:04.950
> 
> 标签：android, android-4.0-ice-cream-sandwich

我需要能够创建、修改和删除 ICS 新的桌面快捷方式文件夹。我找到了有关如何创建应用程序快捷方式的示例（当然），但我找不到有关如何使用新 ICS 文件夹的任何信息。有人知道吗？

我正在使用您的标准基于 Eclipse 的 Java 开发环境；我希望`com.android.launcher.action.INSTALL_SHORTCUT`会使用意图操作，但我不知道从那里去哪里......

提前致谢！

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:12:33.207

我的理解如下：

Android 1.0 - 2.x
使用[动态文件夹](http://developer.android.com/reference/android/provider/LiveFolders.html)

Android 3.0+
使用[带有集合的应用小部件](http://developer.android.com/guide/topics/appwidgets/index.html#collections)

从那里到你想要完成的事情，祝你好运！:)

# r - 用最少的代码打印一个乘法表

> ID：10840779
> 
> 赞同：1
> 
> 时间：2012-05-31T20:26:10.847
> 
> 标签：r, seq, rbind

在 R 中，打印乘法表的最快方法（最短代码）是什么？seq rep 和 bind 函数有帮助，但我正在寻找最短的代码行来执行此操作。

```
rbind("1\'s"=1:12, "2\'s"=seq(2,24,2), "3\'s"=seq(3,36,3), 
      "4\'s"=seq(4,48,4), "5\'s"=seq(5,60,5), "6\'s"=seq(6,72,6)) 
```

打印 1 到 6 穿过（水平）。任何人都知道如何以更紧凑的方式执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T20:33:51.157

```
tbl <- outer(1:6, 1:12, "*")
rownames(tbl) <- paste(1:6, "'s", sep="")
tbl 
```

您可以通过使用稍微更紧凑`paste0(1:6, "'s")`

这似乎略有改善：

```
> v<-setNames(1:6, paste0(1:6, "\'s"))
> v %o% v
    1's 2's 3's 4's 5's 6's
1's   1   2   3   4   5   6
2's   2   4   6   8  10  12
3's   3   6   9  12  15  18
4's   4   8  12  16  20  24
5's   5  10  15  20  25  30
6's   6  12  18  24  30  36 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-06T18:27:18.743

的快捷方式`outer(1:6, 1:12, "*")`：

```
> 1:6 %o% 1:12
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
[1,]    1    2    3    4    5    6    7    8    9    10    11    12
[2,]    2    4    6    8   10   12   14   16   18    20    22    24
[3,]    3    6    9   12   15   18   21   24   27    30    33    36
[4,]    4    8   12   16   20   24   28   32   36    40    44    48
[5,]    5   10   15   20   25   30   35   40   45    50    55    60
[6,]    6   12   18   24   30   36   42   48   54    60    66    72 
```

# sql-server - SQL Server 2005 性能问题和测试

> ID：10840781
> 
> 赞同：0
> 
> 时间：2012-05-31T20:26:21.993
> 
> 标签：sql-server, performance, sql-server-2005

我有使用密集 sql 查询并在 sql 程序集中运行的统计数学函数。我刚刚增加了我的数据库服务器（IIS 6、SQL Server 2005）上的 RAM，但在允许程序集运行的 5 分钟内，我的查询仍然占用了 100% 的 CPU。有什么方法可以让程序集限制他们的 CPU 吗？在 100% 时，服务器变得无响应。任何 sql 调整也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:32:15.417

SQLServer 2008 有一个资源调控器，允许您根据用于给定连接的 db 用户名来限制 CPU 和/或 I/O。如果您可以选择升级到 SQL Server 2008，则您的统计信息程序集可以使用专用的数据库用户名，允许它使用 100% 的 CPU，除非另一个数据库连接需要 CPU，然后它让给其他进程。

这很好用。我们有对数千个数据点进行复杂统计分析的查询和报告。它也是 CPU 密集型的。在我们升级到 SQL Server 2008 之前，我们遇到了各种各样的性能问题。现在一切顺利。2008 的其他新功能都不错，但资源管理器是我们升级的真正原因。

# sql - SQL AND NOT 和 AND 等效项

> ID：10840782
> 
> 赞同：1
> 
> 时间：2012-05-31T20:26:27.180
> 
> 标签：sql, logic

我有以下 SQL 语句：

```
AND NOT (wo.ci_cnc_date IS NOT NULL AND p.prioid != '1 - Routine') 
```

MSDN 声明“使用 NOT 否定表达式。”

如果这是真的，那么上述陈述是否等同于：

```
AND (wo.ci_cnc_date IS NULL AND p.prioid == '1 - Routine') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:28:31.043

不，它相当于：

```
AND (wo.ci_cnc_date IS NULL OR p.prioid == '1 - Routine') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T20:54:14.227

德摩根定律：否定合取和析取。[维基](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T21:09:46.283

这相当于：

```
AND (NOT wo.ci_cnc_date IS NOT NULL OR p.prioid = '1 - Routine') 
```

请注意，`x IS NOT NULL`and`x IS NULL`通常是不同的运算符，一个不是另一个的否定。

在`PostgreSQL`, both`(1, NULL) IS NULL`和`(1, NULL) IS NOT NULL`yield `FALSE`（见[小提琴](http://www.sqlfiddle.com/#!1/f54a1/3)）

# ruby-on-rails - 测试失败，ActionView::Template::Error: undefined method `name' for nil:NilClass

> ID：10840783
> 
> 赞同：1
> 
> 时间：2012-05-31T20:26:35.600
> 
> 标签：ruby-on-rails, testing, null

我正在查看 show.html.erb

```
 <%= @question.user.lesson_id %> 
```

这是浏览器上的一个数字。

我的 questions_controller.rb 是

```
 def show
    @question = Question.find(params[:id])
    @comments = @question.comments.all
    if user_signed_in?
            @rating_currentuser = @question.ratings.find_by_user_id(current_user.id)
            unless @rating_currentuser
            @rating_currentuser = current_user.ratings.new
   end
 end 
```

和我的 questions_controller_test.rb

```
 test "should show question signed in" do
    sign_in users(:user2)
    get :show, :id => @question_user1.to_param
    assert_response :success
   end 
```

一切正常（浏览器和测试）

当改变视图 show.html.erb

```
 <%= @question.user.lesson.name %> 
```

我对浏览器没问题，但测试失败

```
 ActionView::Template::Error: undefined method `name' for nil:NilClass. 
```

我试试这个

```
 @name = Lesson.find(params[:id]) 
```

在 questions_controller.rb 然后测试失败

```
 Expected response to be a <:success>, but was <302> 
```

[此处](https://stackoverflow.com/questions/8722629/actionviewtemplateerrorundefined-method-first-name-for-nilnilclass) 和[此处](https://stackoverflow.com/questions/8667597/actionviewtempleteerrorundefined-method-each-for-nilnilclass)的类似[问题](https://stackoverflow.com/questions/8163060/actioncontrollerroutingerroruninitialized-constant-adminscontroller)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T14:47:58.617

使用 try 可能会掩盖潜在的问题。

例如，当我遇到这个错误时，这是​​因为我没有在没有修复正确的外键引用的情况下创建模型对象——视图是使用带有名称属性的 FK 关联呈现的——例如 Product.ProductType.name。如果我曾经尝试解决它，它会在我的测试中掩盖这个错误，这在测试中是不受欢迎的。一旦我添加了正确的引用，一切都会正常工作，不需要 try(:name)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:23:28.913

[这个答案](https://stackoverflow.com/questions/3869612/how-can-i-check-for-undefined-method-for-nilclass-before-i-error-out)的解决方案

是使用 try 方法并将视图更改为

```
<%= @question.user.lesson.try(:name) %> 
```

# ruby - Gsub 和正则表达式

> ID：10840786
> 
> 赞同：0
> 
> 时间：2012-05-31T20:26:47.687
> 
> 标签：ruby, watir

我有一个网页。HTML 源代码包含以下文本：

```
<meta property="og:title" content="John"/> 
```

约翰就是一个例子，名字可能会有所不同。我确信 og:title 只会在文本中出现一次。这是我的代码：

```
$browser.goto( url )
x = $browser.html.gsub( /^.*<meta property="og:title" content="(.+?)".>/m, '\1' ) 
```

我希望在我的变量 x 中找到名字 John '\1' 应该给我放在括号中的第一部分，即 (.+?)，即 John，对吗？另外，我用了一个点。匹配斜线 / ，有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:47:43.007

使用 Watir API：

```
x = browser.meta.attribute_value "content" 
```

我无法`meta`使用`css`和访问该元素`xpath`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:33:04.230

该代码将返回所有 HTML，并将匹配代码（从字符串开头到并包括 /> 之间的所有内容）替换为“John”。所以归结为“John”，然后是该元属性的 /> 之后的 HTML。

如果您只想提取名称，并且该标签只出现一次，您可以使用类似：

```
@browser.html =~ /<meta property="og:title" content="(.+?)"/
x = $1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T21:12:17.717

如果您只想要 的值`content`：

```
html = '<meta property="og:title" content="John"/>'
=> "<meta property=\"og:title\" content=\"John\"/>"
html[/property="og:title" content="([^"]+)"/, 1]
=> "John" 
```

如果你不熟悉正则表达式，`"([^"]+)"`可能会抛出你。它的意思是“从第一个`"`，抓住一切直到下一个`"`。实际上它的意思是“抓住双引号内的所有东西。

# r - 使用 ggplot2 绘制时间序列图

> ID：10840790
> 
> 赞同：1
> 
> 时间：2012-05-31T20:27:16.097
> 
> 标签：r, ggplot2

> **可能重复：**
> [使用 ggplot2 在 x 轴上绘制日期，在 y 轴上绘制时间](https://stackoverflow.com/questions/8192343/plot-dates-on-the-x-axis-and-time-on-the-y-axis-with-ggplot2)

我有一张包含时间、日期和值的表格。例如，

```
time    date        value
00:01   2012-04-01  100
00:02   2012-04-01  150
00:03   2012-04-01  130
...
00:01   2012-04-02  80
00:02   2012-04-02  160
00:03   2012-04-02  20 
...
03:01   2012-04-06  120
03:02   2012-04-06  160
04:03   2012-04-06  70  
... 
```

我需要绘制时间图（x 轴）、值（y 轴）。我正在使用 ggplot2 和 lubridate，但不能在 x 轴上每隔 30 分钟绘制一次 R 绘图。大约有 3000 行（多个日期从 00:00 到 23:59 的几分钟内数次）。

关于如何实现这一点的任何建议。我尝试使用因子（时间），但 R 不会将其视为时间值（因此，它会尝试标记从 2012-04-01 的 00:01 到 2012-04-06 的 23:59 的连续值.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:18:38.000

感谢所有的反馈。

scale_datetime 的参数在 0.9 中已更改。因此，正如建议的那样，我使用标签而不是格式并使用 date_breaks 函数设置中断。

为了创建图表，我添加了一个日期时间字段——

```
df$comb <- ymd_hm(paste(df$date, df$time)) 
```

定义函数，

```
dropDate <- function(x){
3600*hour(x)+60*minute(x)+second(x)
}

qplot(dropDate(df$comb), df$average, ylim=c(0,20), geom="smooth", colour=df$date) + scale_x_datetime(breaks = date_breaks("1 hours"), labels=date_format("%H")) + xlab("Hour in UTC") + ylab("Average") 
```

# ios - 如何让我的 UIView 在 Xcode 的 Storyboard 编辑器中可见？

> ID：10840793
> 
> 赞同：1
> 
> 时间：2012-05-31T20:27:30.547
> 
> 标签：ios, xcode, uistoryboard, xcode-storyboard

请查看在 Xcode 中显示部分情节提要的屏幕截图。它是一个控制器。在与控制器相同的级别上，有两个`UIViews`“日期选择器视图”和“输入附件视图”。在控制器本身中，它们显示在底部工具栏中（参见第二个屏幕截图 - 右侧的两个图标是视图的微小预览）。但是我该如何编辑它们？我无法让它们出现在屏幕上！我知道它们在那里，但我想编辑它们（在我使它们成为控制器的并行元素之前曾经工作过）！我尝试了右键单击、长按、缩放、平移、双击 - 没有。如果我将其中一个视图拖到控制器的视图中，我可以看到它们。控制器中也有插座，引用视图，并且可以从代码中使用视图就可以了。但是编辑它们似乎变得不可能了。

![在此处输入图像描述](../Images/6ebae3ec27e9c38835c46e06bb72b70c.png)

![在此处输入图像描述](../Images/5eea52988e04f6ed871637cd01f82764.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:34:27.400

您可以在检查器中选择它们并编辑它们的属性，但是除了将它们物理地移动到场景中，编辑它们并将它们移回之外，没有其他方法可以直观地编辑它们。

# javascript - 所有点击处理程序的 jQuery 选择器

> ID：10840800
> 
> 赞同：1
> 
> 时间：2012-05-31T20:28:12.320
> 
> 标签：javascript, jquery

**我有的：**

```
$('#main').find('*').on('click.stop', function() {return false;}); 
```

* * *

**我想要什么：**由于性能问题而将选择`'*'`器 更改为。`all classes with a bound click_handler`

* * *

**我的想法：**在将处理程序绑定到类时分配其他类。

* * *

**想法问题：**我必须更改的代码量太高了！而且我很懒...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:33:18.983

您可以使用这样的 clickhandler 选择所有元素：

```
var e = $.data($(body).get(0), 'events').click; 
```

如果你这样做了，你可以使用 $.each 循环遍历这些元素并将你的函数/事件应用到它们:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T20:35:01.020

你可以写你的表达式来做到这一点。jQuery 本身不支持此选择器。

```
jQuery.extend(jQuery.expr[':'], {     
  click: function(elem) { 
       return $(elem).hasEvent('click');    
  } 
}); 
```

然后，您可以使用： `$("*:click").on('click.stop',...`

有事件：

```
$.fn.hasEvent = function(event, fn) {
if (!event) { return this; }
var has = {
      event: false,
      namespace: false,
      handler: false
    },
    events = this.data("events"),
    namespace = event.split(".");
event = namespace.shift();
namespace = namespace.join(".");
if (events) {
  if (!namespace) { has.namespace = true; }
  if (!fn) { has.handler = true; }
  if (event in events) {
    $.each(events[event], function(i, v) {
      if (namespace) {
        if (namespace === v.namespace && event === v.type) {
          has.namespace = true;
          has.event = true;
          if (fn && fn === v.handler) { has.handler = true; }
        }
      }
      else {
        if (event === v.type) {
          has.event = true;
          if (fn && fn === v.handler) { has.handler = true; }
        }
      }
    });
  }
}
return has.event && has.namespace && has.handler;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:34:51.200

[jQuery检查元素上是否存在事件](https://stackoverflow.com/questions/1515069/jquery-check-if-event-exists-on-element)

对此的答案可能会对您有所帮助。这个问题是检查元素上是否存在事件。

# licensing - AndEngine 许可证 - 我应该在 About 中写什么？

> ID：10840806
> 
> 赞同：1
> 
> 时间：2012-05-31T20:28:35.590
> 
> 标签：licensing, andengine, lgpl

我在我的 Android 应用程序中使用 AndEngine。我发现这个库是在 GNU Lesser GPL 下分发的。我应该在 about 视图中写什么以符合此许可证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:37:03.067

[http://www.gnu.org](http://www.gnu.org)已经提供了该信息。这是[链接](http://www.gnu.org/licenses/gpl-howto.html)。在此链接中，您可以找到有关如何将程序置于包括 GNU Lesser GPL 在内的多个许可证下的简要说明。

* * *

**编辑：**我在 Ubuntu 中检查了一些 LGPL 软件的示例及其关于框。

*   LibreOffice 只是在 about 框中打印一些版权信息。不过，他们可以选择仅显示许可证信息（也可[在线](http://www.libreoffice.org/download/license/)获得），其中显示以下内容：

> **许可和法律信息**
> 
> 本产品根据 GNU 宽通用公共许可证第 3 版的条款提供。LGPL 许可证的副本可在下面找到。
> 
> 跳转到 LGPL 版本 3

*   [Wine 在其关于框（也在线](http://www.winehq.org/license)）中有以下信息：

> Wine 是免费软件；您可以根据自由软件基金会发布的 GNU 宽松通用公共许可证的条款重新分发和/或修改它；许可证的 2.1 版，或（由您选择）任何更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:41:32.733

我认为您应该做的是链接（即网页）到您使用的 LGPL 库，以便您的客户可以轻松访问其源代码（如果他们愿意）。这似乎是 FSF（有权查看源代码的最终用户）的首要任务。除此之外，据我了解，将您的代码与这个 LGPL 许可的库链接对于闭源程序来说是完全可以的，这就是他们现在不鼓励在新库中使用 LGPL 的原因。

# asp.net-mvc - Mvc4 安装程序与 .net 4.5 不兼容，但未安装 .net 4.5

> ID：10840814
> 
> 赞同：1
> 
> 时间：2012-05-31T20:29:47.623
> 
> 标签：asp.net-mvc, visual-studio-2010

我得到了经典的“mvc4 安装程序与 .net 4.5 不兼容”，除了我没有在这台机器上安装 .Net 4.5 之外，许多其他人已经得到了。MVC3 项目创建得很好。运行 MVC4 Beta 的 Web 安装程序时出现此错误。

系统设置为 VS2010 SP1，Windows 7 64-bit，Resharper 也已安装

我在这里不知所措，现在似乎只是在浪费时间试图解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:37:48.457

看起来好像新的 MVC4 RC 解决了我的问题。Beta 版软件的生活也是如此。

# android - 客户端Android Phonegap App上的实时状态更新

> ID：10840824
> 
> 赞同：2
> 
> 时间：2012-05-31T20:30:43.700
> 
> 标签：android, cordova, tcp, socket.io

我正在尝试找到向我的用户发送在我的服务器上运行的进程的实时状态更新的最佳方式——该进程分为五个部分。现在我只是每隔几秒就使用一个 Ajax 调用将状态“拉”到一个连接到 MySQL 并读取状态的 PHP 文件，但是正如您可以想象的那样，这对我的数据库来说非常困难并且不起作用所以适合没有强大互联网连接的用户。

所以我正在寻找一种将数据“推送”到我的客户的解决方案。我现在在我的服务器上运行 APE 推送引擎，但我猜 Socket.IO 更适合这个？如果他们使用 3G 并且错过了状态更新怎么办？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T09:00:32.327

我想我的答案可能符合您的需要。

第一：你必须让**[Node.js](http://nodejs.org/)**运行**[socket.io](http://socket.io/#how-to-use)**

**以下是服务器的示例代码：**

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(8800);  //<---------Port Number

//If No Connection / Page Error
function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

//If there is connection
io.sockets.on('connection', function (socket) {

  //Set Varible
  var UserID;
  var Old_FieldContent = "";

  socket.on('userid', function (data) { 
    if(data.id){
      UserID = data.id;
      StartGetting_FileName(UserID)
    }
  });

  //Checking New Status
  function StartGetting_FileName(UserID){

    //Create Interval for continues checking from MYSQL database
    var myInterval = setInterval(function() {

      //clearInterval(myInterval);

      //MySQL Connection
      var mysql      = require('mysql');
      var connection = mysql.createConnection({
        host     : 'localhost',
        port     : '3306',
        user     : 'root',
        password : 'ABCD1234',
        database : 'test',
      });

      //Setup SQL Query
      var SQL_Query = "SELECT FileName FROM status WHERE UserID = '"+UserID+"'";

      connection.connect();

      connection.query(SQL_Query, function(err, rows, fields) {

        //Do if old result is, different with new result.
        if(Old_FieldContent !== rows[0].FileName){
          if (err) throw err;

          //Display at Server Console
          console.log('------------------------------------------');
          console.log('');
          console.log('Fields: ', fields[0].name);
          console.log('Result: ', rows[0].FileName);
          console.log('');
          console.log('------------------------------------------');

          //Send Data To Client
          socket.emit('news', { FieldName: fields[0].name }); 
          socket.emit('news', { FieldContent: rows[0].FileName });

          //Reset Old Data Variable
          Old_FieldContent = rows[0].FileName;
        }
      });

      connection.end();
    }, 500 );
  }
}); 
```

**以下是客户端 HTML 和 JS：**

```
<!doctype html>
<html>
<head>
<title>web sockets</title>
<meta charset="utf-8">
<!-- URL PATH TO LOAD socket.io script -->
<script src="http://15.17.100.165:8800/socket.io/socket.io.js"></script>
<script>

//Set Variable
var UserID = "U00001"; 
var socket = io.connect('http://15.17.100.165:8800');
var Field_Name = "No Data";
var Field_Content = "No Data";

// Add a disconnect listener
socket.on('connecting',function() {
    msgArea.innerHTML ='Connecting to client...';
    console.log('Connecting to client...');

    //Once Connected Send UserID to server 
    //for checking data inside MYSQL
    socket.emit('userid', { id: UserID });
});

// Get data that push from server
socket.on('news', function (data) {
    console.log(data);
    writeMessage(data);
});

// Add a disconnect listener
socket.on('disconnect',function() {
    msgArea.innerHTML ='The client has disconnected!';
    console.log('The client has disconnected!');
});

//Function to display message on webpage
function writeMessage(msg) {
    var msgArea = document.getElementById("msgArea");
    if (typeof msg == "object") {
        //  msgArea.innerHTML = msg.hello;
        if(msg.FieldName !== undefined){
            Field_Name = msg.FieldName;
        }  
        if(msg.FieldContent !== undefined){
            Field_Content = msg.FieldContent;
        }  

    }else {
        msgArea.innerHTML = msg;
    }

    msgArea.innerHTML = Field_Name +" = "+ Field_Content;
}

</script>
</head>
<body>
<div id="msgArea">
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T01:19:08.830

正如上面的 K-ballo 所指出的，最好使用推送通知插件。

幸运的是，GitHub 上的一些好公民已经这样做了！

[https://github.com/awysocki/C2DM-PhoneGap](https://github.com/awysocki/C2DM-PhoneGap)

请注意：上面的 C2DM 插件是为 PhoneGap v1.2 构建的，因此如果您运行的是更新版本，则必须稍微调整本机代码以使其更好地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T23:54:45.097

您应该考虑使用*推送通知*，Google 为 Android 提供的服务为**C2DM**：[https ://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

您将需要实现一个*PhoneGap*插件来处理本机通知，并将它们传达给您的*PhoneGap*项目，然后（并且仅在那时）查询您的服务器。

# python - 在嵌入非常大的图像时，您能否减少 ReportLab 的内存消耗，或者是否有 Python PDF 工具包可以？

> ID：10840827
> 
> 赞同：3
> 
> 时间：2012-05-31T20:31:05.067
> 
> 标签：python, pdf

现在，reportlab 大部分时间都在制作 PDF。但是，当一个文件包含多个大图像（125 个文件，总磁盘大小为 7MB）时，我们最终会耗尽内存并在尝试构建最终应该小于 39MB 的 PDF 时崩溃。问题源于：

```
 elif mode not in ('L','RGB','CMYK'):
                    im = im.convert('RGB')
                    self.mode = 'RGB' 
```

将漂亮的黑白（黑白）图像转换为 RGB 并且当您的图像大小为 2595x3000 时，它们会消耗大量内存。（不知道为什么它们消耗 2GB，但这一点没有实际意义。当我们将它们添加到 reportlab 时，我们的整个 python 内存占用大约是 50MB，当我们调用

```
 doc.build(elements, canvasmaker=canvasmaker) 
```

当我们从双色 PNG 转换为 RGB 然后将它们渲染到页面上时，内存使用量猛增。

虽然我试图看看我是否可以弄清楚如何将双色调图像注入到 reportlab PDF 中，但我想我会看看是否有其他人知道如何在 reportlab 或其他工具中解决这个问题。

我们有一个在 C++ 中使用 PODOFO 的工作 PDF 制作器，我可能的解决方案之一是为该工具编写一个脚本/大纲，该工具将简单地在子进程中生成 PDF，然后通过文件或标准输出返回它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:00:08.887

如果没有重做 PIL，你就不走运了。图像在 PIL 内部转换为 24 位彩色 TIF。这不是你可以轻易改变的。

我们切换到 Podofo 并在 python 之外生成 PDF。

# ruby-on-rails - 根据 Rails 字段动态填充 jQuery 字段

> ID：10840834
> 
> 赞同：0
> 
> 时间：2012-05-31T20:31:42.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

在我的 Rails (3.1) 应用程序中，我有一个购物车，在此人进入其所在州后，我会在页面上显示销售税字段和总计。

它可以正常工作，除非出现错误并且该人已经进入了他们的状态。在这种情况下，字段值不会更改（因为 State 字段已填充），因此不会再次触发 jQuery (update_sales_tax)。

有没有办法再次呈现视图（以防出现错误），因此该人不需要再次填写整个表格，但仍然计算销售税？或者也许是一种更好的方法来动态地在页面上向用户显示他们的销售税（因为它取决于州）？

换句话说，`format.html {render :action => 'new'}`如果 Orders#new 中有错误，我的控制器会执行此操作。它以人员已经输入的表单填充字段，但是它不会重新计算通过 jQuery 对 :state 字段的 onChange 触发的销售税。如果视图再次呈现并且 :state 已经填充，我该如何重新计算？

在 Orders#new 视图中，我有：

```
<%= form_for(@order,  :method => :post) do |f| %>
  <%= f.hidden_field :total_sales_tax, :value => @tax_amount  %>

    <%= f.fields_for :products_shipping do |shipping | %>       
      <%= shipping.select(:state , Order::STATES ,{:prompt => 'Select State'}, :id => "ship_state",:onchange => "update_sales_tax()") %>                                
    <% end %>               
<% end %>

<script>
  function update_sales_tax(){
jQuery.ajax({
  url: '/orders/order_update',
      dataType: 'script',
  type:'get',
  data:'stateTo='+jQuery("#ship_state").val()   
    })
}
 </script> 
```

在订单/order_update.js.erb 中：

```
jQuery('#cart_details').html('<%=  escape_javascript(render(:partial => @cart)) %>');
jQuery('#order_amount').val('<%= format("%.2f", @grand_total) %>');
jQuery('#order_total_shipping').val('<%=  format("%.2f", @cart.total_shipping) %>');
jQuery('#order_total_sales_tax').val('<%=  format("%.2f", @tax_amount) %>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:50:29.790

我想通了，我只需要在函数上方添加这一行：

```
window.onload = update_sales_tax(); 
```

# sql - 用不同的值更新列中的多个表行

> ID：10840835
> 
> 赞同：2
> 
> 时间：2012-05-31T20:31:43.840
> 
> 标签：sql

我有多行需要更新和插入客户姓名。我怎样才能在一个查询中做到这一点，而不是一次又一次地使用不同的名称运行类似下面的查询？

```
UPDATE orders
SET cust_name = 'Sue'
WHERE p_id = 6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:37:53.440

你可以使用类似的东西

```
 UPDATE mytable
    SET myfield = CASE other_field
        WHEN 1 THEN 'value'
        WHEN 2 THEN 'value'
        WHEN 3 THEN 'value'
    END
    WHERE id IN (1,2,3) 
```

有关更多信息，请检查[使用不同值和单个 SQL 查询更新多行](http://www.karlrixon.co.uk/writing/update-multiple-rows-with-different-values-and-a-single-sql-query/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:43:13.023

你一般不能。至少，MySQL、DB2、SQL Server 和 PostgreSQL 不支持不同 WHERE 子句适用于不同 SET 子句的查询。

你也不需要。您通常可以做的是使用带有变量占位符的准备好的语句，您可以使用参数元组列表执行该语句。根据语言、数据库适配器和数据库的不同，这可能会以“批处理”模式执行，这非常有效。

更高的精度需要有关您正在使用的语言、数据库和数据库适配器的更多信息。

# java - Java注解可以在代码中插入断点吗

> ID：10840840
> 
> 赞同：3
> 
> 时间：2012-05-31T20:31:59.573
> 
> 标签：java, annotations, breakpoints

我正在查看注释以在注释处理器的帮助下插入和激活或停用代码中的断点。我不确定处理器是否可以做到这一点。所以问题是：

注释可以在代码中插入断点吗？

百万感谢阿德里安斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:28:28.730

一切皆有可能，问题只是成本：D

首先，注释不能放在随机位置。给你很大的限制...

其次也是最重要的，断点不是代码的一部分。基本上，当您在 IDE 中设置断点时，它会向您的程序发送一条命令，上面写着“嘿，我想停在那里”。在程序方面，有一个代理负责监听这种命令并实现一个特定的协议：[jdwp](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/jdwp-spec.html)。在客户端，jdk 为您提供了一个与该代理对话的工具：[jdb](http://docs.oracle.com/javase/1.3/docs/tooldocs/solaris/jdb.html)。

因此，唯一的解决方案是拥有一个工具来解析您的代码以查找注释并启动一些断点指令。为了在特定行停止，您将在注释中指定行号...

结论：实施起来非常复杂，非常有限，而且......为什么要这样做？？？

# php - mktime 在 6 月/7 月产生错误的奇怪行为

> ID：10840844
> 
> 赞同：3
> 
> 时间：2012-05-31T20:32:12.920
> 
> 标签：php, mktime

我有以下笨拙的代码将日期字符串转换为另一个日期字符串。

```
//$invDate starts as a date string in format dd/mm/yyyy
$dateArray = explode('/', $invDate);      
$invDate = $dateArray[0] .' '.  date("F",mktime (1,1,1,$dateArray[1])) .' '. $dateArray[2]; 
```

我并不为此感到特别自豪，但它在一个美国和英国的约会方法都会产生混淆的国家产生了一个明确的约会。

多年来一直很好，然后今天突然开始转动

```
01/06/2012 
```

进入

```
1 July 2012 
```

我已经查看了 mktime 的行为方式，但看不出有什么理由`mktime (1,1,1,6)`应该在 7 月生成日期。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:43:50.650

发生这种情况是因为[mktime](http://php.net/manual/en/function.mktime.php)默认为缺少字段的当前时间。由于您没有指定一天，而今天是`May 31st`假设`June 31`的，因此它不存在，因此它会环绕到 7 月。通过向 mktime 添加第五个参数来指定一天：

```
date("F", mktime(0, 0, 0, $dateArray[1], 1)) 
```

# php - 我怎样才能得到 ?> 和之间的内容 getThis 只是一个个人学习问题。我想检索我的函数 $page->content_start(); 之间的所有内容；和 $page->content_end(); 获得它的最佳方法是什么？我不想包含它或回应它，这可能吗？ 非常感谢，非常感谢您的建议 content_start(); 之间的所有内容；和 $page->content_end(); 获得它的最佳方法是什么？我不想包含它或回应它，这可能吗？ 非常感谢，非常感谢您的建议 create(); $page->content_start(); ?>content_end(); print_r($page->get_content()); ?> 把代码放在里面 $(function(){ // code here }); 喜欢： $(function(){ $(".results .view-rooms").click(); }); 或者 $(function(){ $(".results .view-rooms").trigger('click'); }); phpoopxhtml 4 1 回答 1 This answer is useful 8 使用输出缓冲： ob_start(); ?>

> ID：10840848
> 
> 赞同：3
> 
> 时间：
> 
> 标签：php, oop, xhtml

getThis 只是一个个人学习问题。我想检索我的函数 $page->content_start(); 之间的所有内容；和 $page->content_end(); 获得它的最佳方法是什么？我不想包含它或回应它，这可能吗？

非常感谢，非常感谢您的建议

```
<?php 

include 'pages/indexpage.class.php';
include 'modules/monmodule.class.php';

$page = new IndexPage();
$mod = new MonModule($page);
$mod->create();

$page->content_start();
?>
<div class="asss_ass"></div>
<span></span>
<?php
$page->content_end();
print_r($page->get_content());
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T20:36:29.973

使用[输出缓冲](http://www.php.net/manual/en/intro.outcontrol.php)：

```
ob_start();
?>
<div class="asss_ass"></div>
<span></span>
<?php
$content = ob_get_clean(); 
```

# oracle - Oracle R Enterprise (ORE) KMeans 包

> ID：10840862
> 
> 赞同：1
> 
> 时间：2012-05-31T20:33:13.223
> 
> 标签：oracle, r, hadoop

我的任务是在 SAS 服务器上运行 K-Means 聚类算法，但内存不足。数据集是 500G，我知道我可以对其进行采样以适应内存，但如果我想在整个数据上运行模型，Oracle R Enterprise (ORE) 会帮助解决我的问题吗？

关于 ORE 和 ORCH 的其他相关问题：

1.  Oracle R 软件包是否包含任何聚类算法？是否有可用的 Oracle R 软件包列表？
2.  如果我在 Oracle R Enterprise 中运行 kmeans 算法（R CRAN 包），我还会遇到内存问题吗？
3.  BDA 中是否有任何可用的 R 集群包被编写为在分布式 Hadoop 集群上运行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T05:35:54.923

您最好的选择是在 Hadoop 上使用 Mahout。Mahout 确实支持[此处](https://cwiki.apache.org/MAHOUT/k-means-clustering.html)所述的 K-Means 集群，并且在 Hadoop 上设置 Mahout 非常容易。

如果您可以使用几台机器构建自己的 Hadoop 集群，那么运行 Mahout 将需要 30 分钟左右。当我几天前尝试时，[这个博客](http://bickson.blogspot.com/2011/09/understanding-mahout-k-means-clustering.html)对我帮助很大。

您也可以这样做并节省大量金钱和时间。

我没有在这里谈论使用 Oracle R，只是因为，首先我对 Oracle R 了解不多，但是我知道 Mahout on Hadoop 会比其他任何人更好地帮助你，因为有很多关于如何使用的资源在短时间内完成。如果您真的在寻找 Oracle R，那么这不是答案，否则它肯定会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:36:01.480

我前几天才开始使用 ORE，所以我还不是专家，但很容易看出它具有 K-means 功能。[请参阅此处](http://www.oracle.com/technetwork/database/options/advanced-analytics/r-enterprise/ore-reference-manual-1882822.pdf)的ORE 1.3 文档并搜索 ore.odmKMeans 函数。我已经检查过了，它在那里。所以你的第一个问题的答案是肯定的——ORE 中有一个 K-means 函数。

关于你关于内存问题的第二个问题。要使用 ORE，您需要有一个 Oracle 数据库 - 更好的是 Exadata Oracle 机器（这些通常有大约 1Tb 内存），并且许多 ORE R 函数被实现为在数据库级别作为 SQL 运行，因此它在数据库上运行并使用与将数据加载到 R 的内存相比，内存更少，甚至那些不使用 SQL 下推但使用更常规的 R 方法的函数使用数据库机器的内存，它通常比任何 R 机器具有更多的内存。老实说，我还没有看过 ORE K-means 的实现，所以我不知道这个函数是什么情况。

# objective-c - Object-C 在 NSImage 上使用 BORDER 绘制文本

> ID：10840864
> 
> 赞同：0
> 
> 时间：2012-05-31T20:33:15.767
> 
> 标签：objective-c, border, nsimage

我需要在 NSImage 上绘制带边框的文本。我做这样的事情：

```
[image lockFocus];
[@"Hello" drawAtPoint:NSZeroPoint withAttributes:myAttr];
[image unlockFocus]; 
```

一切正常，但我需要用白色和 4 像素厚的黑色边框绘制文本。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:06:39.207

如果在属性中指定描边宽度和颜色，则应该得到描边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:09:42.253

使用`NSStrokeColorAttributeName`和`NSStrokeWidthAttributeName`负值解决。

# actionscript - 鼠标悬停动作脚本

> ID：10840867
> 
> 赞同：0
> 
> 时间：2012-05-31T20:33:24.983
> 
> 标签：actionscript, event-handling, onmouseover

我正在设计一个 flex 页面，我有一个图像。当用户将鼠标悬停在图像上时，应显示特定文本。这是我编写的 actionScript 代码，但它不起作用（它没有在 mouseOver 事件上显示文本：（

```
 <?xml version="1.0" encoding="utf-8"?>
 <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="100" minHeight="100">
<fx:Script>
    private var helpText:String = "Some Text."      
    private function helpIconEvent(e:MouseEvent):void{              
        if(e.type == "mouseOver"){
            e.currentTarget.helpText.visible = true;                            
        }
    }       
    private function addEventToHelpIcon():void {
        helpIcon.addEventListener(MouseEvent.MOUSE_OVER, helpIconEvent);
    }
</fx:Script>        

<mx:Image id="helpIcon" x="270" y="187" width="50" height="50" mouseOver="addEventToHelpIcon"
          source="source_path"/> 
```

任何帮助/见解将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:10:18.767

有几个问题：

*   您没有正确地将鼠标悬停在侦听器上。您实际上添加了两个事件侦听器，一个在 MXML 中，然后当该事件发生时您添加第二个。只需使用 MXML 侦听器（见下文）。

*   在鼠标悬停时运行的函数中，您试图`visible`在 String 对象上设置属性。String 本身不会显示任何内容。您可以在工具提示或其他 GUI 对象中显示带有标签对象的字符串。您需要找出要使用的正确 GUI 对象并将文本传递给该对象。

这是一个非常简单的例子：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx"
           minWidth="100" minHeight="100">
<fx:Script>

    private function onMouseOver():void {
        helpLabel.visible=true;
    }

    private function onMouseOut():void {
        helpLabel.visible=false;
    }

</fx:Script>        

<s:Image id="helpIcon" x="270" y="187"
         width="50" height="50"
         mouseOver="onMouseOver()" mouseOut="onMouseOut()"
         source="source_path"/>

<!-- note the mouse event handlers are so simple in this case, you can also do them in line -->

<s:Image id="alternateMethod" mouseOver="helpLabel.visible=true;"
         mouseOut="helpLabel.visible=false;" />

<s:Label id="helpLabel" x="100" y="100" visible="false" text="Some Text."/>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:58:04.137

它认为你的代码应该更像这样，但我不习惯灵活，如果我错了，请多多包涵。

```
private function foo(e:MouseEvent):void {
if(e.type == MouseEvent.ROLL_OVER)
       //Do stuff...
} 
```

# php - curl_multi_exec 返回空数组

> ID：10840868
> 
> 赞同：2
> 
> 时间：2012-05-31T20:33:32.910
> 
> 标签：php, curl, curl-multi

我一直在使用以下函数来制作异步 curl 帖子：

```
function curl_post_multi($urls){
    $curl_arr = array();
    $num_urls = count($urls);
    $mh = curl_multi_init();
    for($i= 0; $i < $num_urls; $i++){
        $curl_arr[$i] = curl_init();
        curl_setopt($curl_arr[$i], CURLOPT_URL, $urls[$i]);
        curl_setopt($curl_arr[$i], CURLOPT_HEADER, 0);
        curl_setopt($curl_arr[$i], CURLOPT_POST, true);
        curl_setopt($curl_arr[$i], CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($curl_arr[$i], CURLOPT_RETURNTRANSFER, true);
        curl_multi_add_handle($mh, $curl_arr[$i]);
    }

    $running = null;
    do{
        curl_multi_exec($mh, $running);
    }while($running > 0);
    $results = array();
    for($i= 0; $i < $num_urls; $i++){
        $results[] = curl_multi_getcontent($curl_arr[$i]);
        curl_multi_remove_handle($mh, $curl_arr[$i]);
    }
    curl_multi_close($mh);
    return $results;
} 
```

我刚刚注意到它通常只返回第一个 URL 的结果，或者根本没有结果。我玩过这个功能的大约 100 种配置。结果是空数组，并且 curl_error($curl_arr[$i]) 是空的，所以我不确定从哪里开始寻找问题所在。我知道 URLS 是正确的，因为如果我背靠背进行常规卷发，它就可以正常工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-07T23:01:55.483

你的 do-while 循环永远不会运行。$running 永远不会 > 1，因为它在上一行设置为 null。

# php - 什么会导致我的 mysqli 连接功能失败？

> ID：10840869
> 
> 赞同：-1
> 
> 时间：2012-05-31T20:33:46.550
> 
> 标签：php, get, mysqli

我刚刚发现了mysql和mysqli，所以我真的是这里的初学者。我有一个正在使用的函数（来自包含的 php 文件），其中包含所有变量以连接到服务器，OO 风格。它就像主页的魅力，但我有一个页面（使用来自表单的获取请求）尝试使用该功能并失败。这是功能：

```
function connect(){
        $servername = "";
        $dbusername = "";
        $dbpassword = "";
        $dbname = "";
        $mysqli = new mysqli($servername, $dbusername, $dbpassword, $dbname);
        if($mysqli->connect_errno){
                echo "Failed to connect to MySQL: (".$mysqli->connect_errno.") ".$mysqli->connect_error;
        }
        return $mysqli;
} 
```

GET 请求是否有阻止它的内容？这是不恰当的做法吗？我一直在整理文档，但我很困惑。这是我用来调用该函数的代码：

```
include_once '/tools/config.php';#This is the file the function is in
                                 #(I even copied the text from the working file) 
$mysql = connect(); 
```

我的调试相当于注释掉各个行，直到它起作用。可能有更好的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:24:55.293

这个函数的语法没有错。问题出在我的包含声明中。感谢大家的帮助。

# c# - 我该如何解决这个问题？单元类型存在于两个dll文件中

> ID：10840872
> 
> 赞同：7
> 
> 时间：2012-05-31T20:33:54.453
> 
> 标签：c#, asp.net-mvc, visual-studio, dll, controller

我目前正在学习使用 Visual Studio 11 beta 的教程。尝试在我的一个类中设置字段值的最大长度时：

```
[MaxLength(50)]
public string LastName { get; set; } 
```

它出错并且不会让我编译，因为该`MaxLength()`函数存在于两个地方：

> 错误 4 类型“ **System.ComponentModel.DataAnnotations** .MaxLengthAttribute”同时存在于“c:\Users\me\Documents\Visual Studio 11\ContosoUniversity\packages\EntityFramework.4.1.10331.0\lib\net40\EntityFramework.dll”和“ c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.ComponentModel.DataAnnotations.dll'

我试图删除这两个文件，但这只会导致更多问题，因为我项目中的其他代码依赖于它们。

有没有办法告诉它使用一个或另一个？

**所有这些方法似乎都对我不起作用..请参阅答案下的评论..还有其他想法吗？**

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T20:38:05.060

在代码顶部使用 using：

```
using MaxLength = System.ComponentModel.DataAnnotations 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-16T08:45:35.247

只需从包中卸载 EntityFramework 并重新安装它（EntityFramework）。这个对我有用。只需按照以下步骤操作：

[![1.右键单击参考 2.单击管理nugetpackages](../Images/bd6e43b8bf19200fc3e8156572f32646.png)](https://i.stack.imgur.com/cfYdB.png)

1.右键单击参考 2.单击管理 nugetpackages。

[![3.点击卸载](../Images/38614c1526a254dffb6147973031ce9c.png)](https://i.stack.imgur.com/LfAEp.png)

3.点击卸载

4.  进入在线部分并在搜索框中输入实体框架 5\. 单击安装按钮

[![4.进入在线部分并在搜索框中输入实体框架 5.点击安装按钮](../Images/0a116636fc2496fde694a22c37021849.png)](https://i.stack.imgur.com/HZJUa.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T21:01:03.890

使用所需的命名空间限定属性

```
[System.ComponentModel.DataAnnotations.MaxLength(50)]
public string LastName { get; set; } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-22T03:54:51.190

如果您在最新环境（VS 2017/.NET Framework 4.6.x）和实体框架（如 6.1 或 6.2）中遇到相同的错误，这里是解决方案；

将您的实体框架降级到 6.0。它会工作的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T20:40:37.400

MaxLength 不是一个函数，它是一个属性。
您可以在每个文件中使用 using 指令来指定当前正确的上下文。
或者只输入完整的命名空间，例如`System.ComponentModel.DataAnnotations.MaxLength`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-31T20:45:17.140

尝试使用外部别名[http://msdn.microsoft.com/en-us/library/ms173212.aspx](http://msdn.microsoft.com/en-us/library/ms173212.aspx)来区分这两个程序集

另请查看页面底部附近的[http://bartdesmet.net/blogs/bart/archive/2006/10/07/4502.aspx是一个示例](http://bartdesmet.net/blogs/bart/archive/2006/10/07/4502.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-08T22:29:09.387

这个问题现在是这个问题的最佳答案，所以我想我会在这里回答。

`The type 'BLAH' exists in both`错误经常出现在以下几种情况：

**1\. 重复文件**——（通常非常简单）众所周知，.dll 文件就是这种情况。在大多数重复的情况下，删除重复文件之一是最简单和最好的解决方案

**2\. 非重复文件**- （更复杂，例如原始发帖人的案例）不幸的是，您需要编辑并经常重新编译/查找文件的替代版本，以免出现此类冲突。幸运的是，用相同的命名空间限定属性通常会解决这样的冲突。

*例如，如果您的代码`MaxLength`在多个文件中提到的某些东西上发生冲突，则在必要的文件中对其进行限定，以明确您要使用的 MaxLength，如下所示 `System.ComponentModel.DataAnnotations.MaxLength`：这应该有助于清除问题，因此在尝试运行代码时不会发生任何冲突*

# android - android的文件夹路径选择器

> ID：10840874
> 
> 赞同：3
> 
> 时间：2012-05-31T20:34:05.507
> 
> 标签：android, file-io, directory

我的应用需要访问用户单独下载的文件夹。我希望用户能够通过我的应用程序“选择”或浏览到该文件夹​​以获取其路径。路径可以是内部存储或外部存储 sd 卡。既然我是菜鸟，有没有一种非常简单的方法可以做到这一点？谢谢 :) 步骤：

1.  用户安装应用
2.  用户下载一个文件夹并将其保存在设备上（可能在任何地方）
3.  用户通过文件夹浏览器/文件夹选择器类型显示应用程序的文件夹路径（我该怎么做？）
4.  应用程序开始工作，evr1s 快乐 :)

是的，这是它必须工作的唯一方法..没有其他解决方法。再次感谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T21:55:30.890

好，我知道了。使用选择的文件对话框。这是您需要的，[选择文件对话框](https://stackoverflow.com/questions/3592717/choose-file-dialog)

和这里

[http://www.streamhead.com/android-tutorial-sd-card/](http://www.streamhead.com/android-tutorial-sd-card/)

另一种方法是将你所有的文件放在下载目录`ListView`中使用`File.getlistfiles`. 你在那里管理你的文件。

# php - 编译配方数组键和值

> ID：10840880
> 
> 赞同：0
> 
> 时间：2012-05-31T20:34:57.210
> 
> 标签：php, arrays, sorting

我有一系列食谱。每个食谱都包含一系列成分：

```
[Waffle] => Array
        (
            [0] => stdClass Object
                (
                    [amount] =>  1
                    [measurement] => large
                    [ingredient] => egg 
                    [grocery] => dairy
                )

            [1] => stdClass Object
                (
                    [amount] =>  1
                    [measurement] => cup
                    [ingredient] => milk 
                    [grocery] => dairy
                )

        )

[Pancake] => Array
        (

            [0] => stdClass Object
                    (
                        [amount] =>  1
                        [measurement] => large
                        [ingredient] => egg
                        [grocery] => dairy
                    )

            [1] => stdClass Object
                (
                    [amount] =>  1
                    [measurement] => tablespoon
                    [ingredient] => maple syrup
                    [grocery] => pantry
                )

        ) 
```

我想创建一个所有成分的杂货清单，按成分和尺寸编制数量，并根据杂货店过道订购。

因此，鉴于上述情况，它将输出如下内容：

```
DAIRY

2 large eggs
1 cup milk

PANTRY

1 tablespoon maple syrup 
```

您可以提供任何帮助来编写函数来执行此操作，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:13:41.940

因为成分的名称和测量的规模差异很大，我最终只是按杂货店过道对成分进行分组，而不是组合测量。

我遍历数组以构建额外的数组集，其中包含根据需要输出组所需的必要数据。

我本可以更进一步并创建一个转换表，然后将每个测量值转换为标准比例，然后添加成分的总和，但幸运的是，目前没有必要这样做。

# java - 什么是脸颊新闻活动？

> ID：10840884
> 
> 赞同：15
> 
> 时间：2012-05-31T20:35:03.940
> 
> 标签：java, android, methods, flags, popupwindow

在 a 的 Android 文档中，提到了`PopupWindow`该方法。`setIgnoreCheekPress()`它说此方法“在弹出窗口上设置标志以忽略脸颊按压事件；默认情况下，此标志设置为 false，这意味着弹出窗口不会忽略脸颊按压调度事件。”

很简单，什么是`cheek press dispatch event`?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T20:36:59.680

这是当您的脸颊压在手机上时发出的事件。

事件具有大小，将大小与阈值进行比较以确定它是否是“脸颊”，例如，大小是否大于某个“它是手指”阈值。这允许手机在有人将手机靠近他们的脸并且他们的脸颊压在屏幕上时不会做出反应。

* * *

*来自评论的澄清。*电话不知道你特意用脸颊按压。它假设你没有用其他大的（与手指相比）身体部位摩擦它。嗯。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T20:37:27.477

检测您何时将脸靠近手机，例如在通话期间关闭屏幕。

# xml - 在 word (.docx) 表单中将复选框标记为已选中

> ID：10840891
> 
> 赞同：5
> 
> 时间：2012-05-31T20:35:32.333
> 
> 标签：xml, ms-word, docx, doc

我正在使用 ruby​​/nokogiri 来解析单词表格并填写字段。我已经设法填写了文本字段，但我很难选中一个复选框。我查看了 document.xml 并没有注意到复选框是否被标记时有任何不同的标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:53:00.493

我发现了选中复选框时的解决方案，有一个标签：`<checked />` 当它没有检查它是：`<checked val='0' />`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-01T10:06:03.467

你需要你的 XML 看起来像：

```
<w:ffData>
  <w:checkBox>
    <w:size w:val="20" />
    <w:checked w:val="true" />
  </w:checkBox>
</w:ffData> 
```

观察`w:checked`有父`w:checkBox`。[CheckBox 类](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.checkbox.aspx)的文档

**或者**，您可以设置默认状态。

未选中：`<w:default w:val="0"/>`

检查：`<w:default w:val="1"/>`

```
 <w:ffData>
   <w:checkBox>
     <w:default w:val="1" />
   </w:checkBox>
 </w:ffData> 
```

# django - 正则表达式匹配给定的 URL

> ID：10840894
> 
> 赞同：0
> 
> 时间：2012-05-31T20:35:59.947
> 
> 标签：django

已经坚持了很长时间了。我有一个如下网址：

```
http://localhost:8000/foobar/0/ec8b6cf5203c6ce57521155fea4f96a53e0fadb5/ 
```

URL 的最后一部分是 SHA1 十六进制表示。我的 urls.py 看起来像这样：

```
url(r'^/foobar/[0-9]/[a-z0-9]{40}/$', 'baz.views.foobar') 
```

有人可以帮我找出为什么 URL 与这个 urls.py 条目不匹配吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:41:07.077

您不应该尝试匹配初始`/`值 - 这被视为域的一部分，或者如果这是一个包含，则为之前的 urlconf。

# php - 我怎样才能让我的 wordpress 帖子内容出现在 facebook 上，就像在 facebook 上广播一样？

> ID：10840896
> 
> 赞同：0
> 
> 时间：2012-05-31T20:36:05.203
> 
> 标签：php, wordpress, facebook-like

我为我的 wordpress 页面安装了“非常简单的 Facebook 和 Twitter 共享按钮”插件，它在我拥有的每个帖子上放置工作 facebook 的“喜欢”按钮时运行得相当好。“喜欢”正在适当地通过 Facebook。

但是，在人们喜欢每个帖子后出现在人们的时间线上的“喜欢”广播不会显示来自 wordpress 帖子的任何内容（标题、图片、正文）。除了我的博客名称（“treatings”）和正下方的网址（treatin.gs）外，广播是空的。

我不认为这是一个可以用 facebook 的 Open Graph 解决的问题，尽管我可能是错的。我觉得这是插件（php）的问题。任何关于在哪里寻找解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:02:31.580

通过[Facebook URL 调试器](https://developers.facebook.com/tools/debug)运行您的一篇帖子，看看它告诉您什么。我的猜测是您的脑海中没有任何[开放的图形元数据。](http://opengraphprotocol.org/)

有许多插件可以为您做到这一点。我没有使用您的共享插件，但看起来这并没有添加任何元数据。要添加元数据，我个人认为[Yoast WordPress SEO](http://yoast.com/wordpress/seo/)插件是最好的，但是还有很多其他插件可以为你添加这个。

确保在添加新的社交插件后通过 URL 调试器运行测试。他们中的许多人将元数据添加到您的网站。拥有太多元数据可能与没有元数据一样糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T21:31:09.440

建立并运行博客后，您可能希望将网站帖子广播到Facebook、Twitter 和 LinkedIn 等[社交网络，以获得可见性和页面浏览量。](https://www.infotainmentblog.com/)这是接触更喜欢社交网络而不是接收电子通讯的不同受众的好方法，并使您能够通过“转发”或“喜欢”分享您的帖子，从而提高您在 SEO（搜索引擎优化）方面的网络知名度目的。

您首先应该了解的是通过社交媒体平台安装应用程序或通过 WordPress 安装插件之间的区别。出于这个特定目的，应用程序往往比 WordPress 插件更可靠，因为随着 Facebook/Twitter 随着时间的推移改变他们的系统，WordPress 插件经常变得过时、坏掉，或者供应商不再让它们保持最新状态。换句话说，如果您使用通过 Facebook/Twitter 实现的应用程序，这些平台将保持自己处于最新状态，而无需自己在 WordPress 中升级任何东西

# java - 如何访问我的 FreeMarker 模板中的根 bean？

> ID：10840898
> 
> 赞同：5
> 
> 时间：2012-05-31T20:36:11.520
> 
> 标签：java, unit-testing, freemarker

我花了一段时间试图在文档中识别这个“特殊变量”。我有一个案例，我希望能够将根哈希传递给可以对其进行操作的宏。我找到了对 Environment.getCurrentEnvironment() 的引用，但这适用于 Java 而不是模板。如何将根数据模型传递给宏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T20:36:13.643

下面是一个成功完成我所追求的单元测试。关键是“.data_model”变量。

```
public class TestFreeMarkerTemplating {

Configuration cfg = new Configuration();
StringTemplateLoader stringLoader = new StringTemplateLoader();
{ cfg.setTemplateLoader(stringLoader);
cfg.setObjectWrapper(new BeansWrapper()); }

@Test
public void testTestableMacros() throws TemplateException, IOException{
    stringLoader.putTemplate("root", "<#macro user testPojo>Welcome ${testPojo.user}. <@subPojo sub/></#macro><#macro subPojo sub>Sub ${sub.user}!</#macro>");
    stringLoader.putTemplate("testPojoTemplate", "<#import \"root\" as w><@w.user .data_model/>");
    stringLoader.putTemplate("testSubPojoTemplate", "<#import \"root\" as w><@w.subPojo .data_model/>");
    assertTemplateAndBeanYield("root", new TestPojo(), "");
    assertTemplateAndBeanYield("testPojoTemplate", new TestPojo(), "Welcome Andy. Sub Bill!");
    assertTemplateAndBeanYield("testSubPojoTemplate", new SubPojo(), "Sub Bill!");

}

public void assertTemplateAndBeanYield(String templateName, Object bean, String expectedOutput) throws IOException, TemplateException{
    Template temp = cfg.getTemplate(templateName);
    StringWriter out = new StringWriter();
    temp.process(bean, out);

    assertEquals(expectedOutput, out.toString());
}

public static class TestPojo {
    private final String user = "Andy";
    private final SubPojo sub = new SubPojo();

    public String getUser() { return user; }
    public SubPojo getSub() { return sub; }
}

public static class SubPojo {
    private final String user = "Bill";

    public String getUser() { return user; }
}
} 
```

# ruby-on-rails-3 - rails 3.2 很抱歉，生产中出了点问题。日志文件不记录错误

> ID：10840899
> 
> 赞同：1
> 
> 时间：2012-05-31T20:36:11.997
> 
> 标签：ruby-on-rails-3

我正在使用 apache + 乘客

```
<VirtualHost *:80>
      RailsEnv production
      ErrorLog /home/rails/project_error.log
      CustomLog /home/rails/project_access.log combined

      DocumentRoot /home/rails/project/public
      <Directory /home/rails/project/public>
         AllowOverride all
         Options -MultiViews
      </Directory>
</VirtualHost> 
```

它在开发中运行良好，但是当我切换到生产时，我得到了著名的“我们很抱歉，但出了点问题。” 文本。

奇怪的是 development.log 没有显示任何错误。如果我预编译资产或进行数据库迁移，那么它们都放在日志文件中，但没有 500 错误。我有

```
config.log_level = :debug 
```

在生产中.rb

project_error.log 也是空的，错误记录在 projest_access.log

```
[31/May/2012:22:22:35 +0200] "GET / HTTP/1.1" 500 393 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0" 
```

这次我搞砸了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T12:48:15.700

在您的`production.rb`文件中更新以下行：

> config.consider_all_requests_local = true

将其设置为`true`，看看是否有帮助，它应该将错误输出到浏览器。

# python - Python 在 O(1) 中的字典中获取随机键

> ID：10840901
> 
> 赞同：20
> 
> 时间：2012-05-31T20:36:16.477
> 
> 标签：python, data-structures

我需要一个支持快速插入和删除（键，值）对的数据结构，以及“获取随机键”，它与字典的 random.choice(dict.keys()) 执行相同的操作。我在互联网上搜索过，尽管它是线性时间，但大多数人似乎对 random.choice(dict.keys()) 方法感到满意。

我知道更快地实现这一点是*可能的*：

*   我可以使用调整大小的哈希表。如果我保持键与槽的比率在 1 和 2 之间，那么我可以选择随机索引，直到遇到非空槽。我只看 1 到 2 个键，期待。
*   我可以使用 AVL 树在保证最坏情况 O(log n) 的情况下获得这些操作，并增加等级。

不过，有什么简单的方法可以在 Python 中实现这一点吗？好像应该有！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T06:49:57.870

这可能与上面列出的特定用例并不特别相关，但这是我在寻找一种很好地掌握字典中“任何”键的方法时遇到的问题。

如果您不需要真正的随机选择，而只需要一些任意键，那么我找到了两个简单的选项：

```
key = next(iter(d))    # may be a little expensive, but presumably O(1) 
```

仅当您乐于使用字典中的键+值时，第二个才真正有用，并且由于突变在算法上的效率不高：

```
key, value = d.popitem()     # may not be O(1) especially if next step
if MUST_LEAVE_VALUE:
    d[key] = value 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T20:42:20.980

[*编辑*：完全重写，但在这里保留完整的评论。]

下面是字典包装器的实现，其中 O(1) 获取/插入/删除，以及 O(1) 选择随机元素。

主要思想是我们想要一个 O(1) 但任意映射`range(len(mapping))`到键。这将让我们得到`random.randrange(len(mapping))`，并通过映射传递它。

**在您意识到我们可以利用映射可以是任意**的这一事实之前，这很难实现。*实现 O(1) 时间硬边界的关键思想是：每当删除一个元素时，将其与最高的任意 id 元素交换，并更新任何指针。*

```
class RandomChoiceDict(object):
    def __init__(self):
        self.mapping = {}  # wraps a dictionary
                           # e.g. {'a':'Alice', 'b':'Bob', 'c':'Carrie'}

        # the arbitrary mapping mentioned above
        self.idToKey = {}  # e.g. {0:'a', 1:'c' 2:'b'}, 
                           #      or {0:'b', 1:'a' 2:'c'}, etc.

        self.keyToId = {}  # needed to help delete elements 
```

获取、设置和删除：

```
 def __getitem__(self, key):  # O(1)
        return self.mapping[key]

    def __setitem__(self, key, value):  # O(1)
        if key in self.mapping:
            self.mapping[key] = value
        else: # new item
            newId = len(self.mapping)

            self.mapping[key] = value

            # add it to the arbitrary bijection
            self.idToKey[newId] = key
            self.keyToId[key] = newId

    def __delitem__(self, key):  # O(1)
        del self.mapping[key]  # O(1) average case
                               # see http://wiki.python.org/moin/TimeComplexity

        emptyId = self.keyToId[key]
        largestId = len(self.mapping)  # about to be deleted
        largestIdKey = self.idToKey[largestId]  # going to store this in empty Id

        # swap deleted element with highest-id element in arbitrary map:
        self.idToKey[emptyId] = largestIdKey
        self.keyToId[largestIdKey] = emptyId

        del self.keyToId[key]
        del self.idToKey[largestId] 
```

选择一个随机（键，元素）：

```
 def randomItem(self):  # O(1)
        r = random.randrange(len(self.mapping))
        k = self.idToKey[r]
        return (k, self.mapping[k]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T21:00:47.427

这是一个有点复杂的方法：

*   为每个键分配一个索引，将其与字典中的值一起存储。
*   保留一个表示下一个索引的整数（我们称之为 next_index）。
*   保留已删除索引（间隙）的链接列表。
*   保留将索引映射到键的字典。
*   添加键时，检查使用（并删除）链表中的第一个索引作为索引，或者如果列表为空，则使用并递增 next_index。然后将键、值和索引添加到字典 ( `dictionary[key] = (index, value)`) 并将键添加到索引到键的字典 ( `indexdict[index] = key`)。
*   移除键时，从字典中获取索引，从字典中移除键，从索引到键的字典中移除索引，将索引插入到链表的最前面。
*   要获取随机密钥，请使用类似`random.randrange(0, next_index)`. 如果索引不在 key-to-index 字典中，请重试（这应该很少见）。

这是一个实现：

```
import random

class RandomDict(object):
    def __init__(self): # O(1)
        self.dictionary = {}
        self.indexdict = {}
        self.next_index = 0
        self.removed_indices = None
        self.len = 0

    def __len__(self): # might as well include this
        return self.len

    def __getitem__(self, key): # O(1)
        return self.dictionary[key][1]

    def __setitem__(self, key, value): # O(1)
        if key in self.dictionary: # O(1)
            self.dictionary[key][1] = value # O(1)
            return
        if self.removed_indices is None:
            index = self.next_index
            self.next_index += 1
        else:
            index = self.removed_indices[0]
            self.removed_indices = self.removed_indices[1]
        self.dictionary[key] = [index, value] # O(1)
        self.indexdict[index] = key # O(1)
        self.len += 1

    def __delitem__(self, key): # O(1)
        index = self.dictionary[key][0] # O(1)
        del self.dictionary[key] # O(1)
        del self.indexdict[index] # O(1)
        self.removed_indices = (index, self.removed_indices)
        self.len -= 1

    def random_key(self): # O(log(next_item/len))
        if self.len == 0: # which is usually close to O(1)
            raise KeyError
        while True:
            r = random.randrange(0, self.next_index)
            if r in self.indexdict:
                return self.indexdict[r] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-22T10:21:25.310

要获得 O(1) 空间，您需要一个数组数据结构和一个将值存储在数组及其索引中的字典。

然后，在添加值时，您只需将它们推送到数组和字典中，并在数组中使用它的索引。

然后你可以随机访问，因为你使用的是数组数据结构。

删除值时，您会查看要在字典中删除的值的索引。然后用数组中的最后一个值替换数组中的那个值（确保它不是最后一个元素）和 pop() 数组中的最后一个值。之后，您使用已删除的值索引更新字典中替换值（数组中的最后一个值）的键。最后，您删除要删除的值的键和值，因为在字典中没有意义。

```
class RandomizedSet:

    def __init__(self):
        self.container = []
        self.indices = {}

    def insert(self, val: int) -> bool:
        if val in self.indices:
            return False

        self.indices[val] = len(self.container)
        self.container.append(val)
        return True

    def remove(self, val: int) -> bool:
        if val not in self.indices:
            return False

        idxOfValueToRemove = self.indices[val]
        lastValue = self.container[-1]

        if idxOfValueToRemove < len(self.container)-1:
            self.container[idxOfValueToRemove] = lastValue
            self.indices[lastValue] = idxOfValueToRemove

        self.container.pop()

        del self.indices[val]

        return True

    def getRandom(self) -> int:
         return random.choice(list(self.container)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-27T15:17:25.037

我有同样的问题并写了

[https://github.com/robtandy/randomdict](https://github.com/robtandy/randomdict)

我希望它对你有帮助！它提供对随机键、值或项目的 O(1) 访问。

# html - 如何在 Canvas 上触摸 Draw Square？

> ID：10840905
> 
> 赞同：1
> 
> 时间：2012-05-31T20:36:32.193
> 
> 标签：html, canvas, touch, draw

是的，我只是想知道，为什么我不能用触摸在画布上画一个正方形？我究竟做错了什么？请，任何帮助将不胜感激:)

这是代码：

* * *

JAVASCRIPT：

```
 // "Square" Button
function square()
{   
var can = document.getElementById('canvasSignature');
var ctx = can.getContext('2d');

can.addEventListener( 'touchstart', onTouchStart, false);

function onTouchStart(e) {
 ctx.fillRect(0,0,300,300);   

}
} 
```

* * *

HTML5：

```
 <div id="canvasDiv">
<canvas id="canvasSignature" width="580px" height="788px" style="border:2px solid #000; background: #FFF;"></canvas>
  </div>

  <div id="Square">  
<p><button onclick="square();">Square</button></p>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T04:31:26.440

您的代码在 JSfiddle 中运行良好：

[http://jsfiddle.net/jXv83/](http://jsfiddle.net/jXv83/)

我有一种`square()`永远不会被调用的感觉，所以你在那里的代码永远不会运行......

# asp.net-mvc - 模型绑定是否将表单中控件的每个 id 和值发送到 post 操作

> ID：10840911
> 
> 赞同：2
> 
> 时间：2012-05-31T20:37:02.410
> 
> 标签：asp.net-mvc, model-binding

由于我在这里有一些不工作的东西，我想知道如果参数具有相同的名称，则确保将放置在表单中的每个控件 id + 值发送到 POST 操作。

是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:39:17.043

一个标准的 HTML 表单 POST 将发送每个, 和元素的 and 以及在一个框中选择`name`的值。如果提交按钮导致表单发布，该按钮的名称和值也将被发送。`value``<input>``<textarea>``<option>``<select>`

在 ASP.NET MVC 中的许多情况下，`name`将与 相同`id`，但并非总是如此。

判断一个值是否被发送到服务器的最简单方法是检查 Firebug 或 Chrome 开发者工具的网络选项卡中的帖子。

# android - 带有 OpenLayers 和 Open Street Maps 的 Phonegap 离线地图

> ID：10840913
> 
> 赞同：2
> 
> 时间：2012-05-31T20:37:08.553
> 
> 标签：android, ios, cordova, openlayers, openstreetmap

我一直在尝试对如何在 Phonegap 上使用 OpenLayers + OpenStreetMaps 进行一些研究，所以我发现了这个：[Navigate through a pre-known map offline using Phonegap](https://stackoverflow.com/questions/9296525/navigate-through-a-pre-known-map-offline-using-phonegap?answertab=oldest#tab-top)但我想知道是否有人可以为我提供一个关于如何使用的工作示例它，github repo 或类似的东西。

我正在为商业列表构建这个应用程序，但在某些情况下，移动设备没有互联网连接，所以我需要在有 wifi 时下载某个区域的地图图块，或者我需要的其他东西例如，跟踪从 A 点到 B 点的路线（当我有 wifi 时）并从路线下载地图图块，以防万一我没有互联网。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T13:57:34.743

在[http://geospatialscott.blogspot.com/2012/04/phonegap-leaflet-tilemill-offline.html](http://geospatialscott.blogspot.com/2012/04/phonegap-leaflet-tilemill-offline.html)有一个示例，其中有人使用 Leaflet 和 TileMill 在 PhoneGap 应用程序中汇总了一个离线地图示例。该演示页面中有一个指向 GitHub 的链接。我自己没有尝试过，但看起来它可以让你走上正确的道路。

# javascript - 请求动画帧返回结果？

> ID：10840915
> 
> 赞同：0
> 
> 时间：2012-05-31T20:37:10.647
> 
> 标签：javascript

我脑子里有这个想法，但想知道它是如何完成的，或者是否有可能。

我有一个这样的请求动画帧：

```
 window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback,  element){
            window.setTimeout(callback, 1000 / 60);
          };
})(); 
```

我想要做的是当它调用一个函数并且动画结束时......我希望它停止调用一些方法。

所以这将是我的想法的伪逻辑：

```
do{
var result = requestAnimFrame( my_function.bind(null,start) );
}while(result == true);
//rest of code should not run until animation is finished 
```

这可能吗？如果是这样，我将如何更改我的函数以支持返回？

编辑这是我的动画功能....

```
function my_function(start){

var now = new Date().getTime() / 1000;
var into_anim = now - start;

    amount = 0.5000;
    opacity = amount * (into_anim - 10);
    opacity = parseFloat(opacity.toFixed(5))
    if(opacity > 1){ opacity = 1; }

if(opacity != 1){
    requestAnimFrame(my_function.bind(null,start));
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:44:07.837

不，`requestAnimationFrame`是异步的，就像`setTimeout`. 因此，您需要“递归”地调用它，并在满足条件时通过*不*`my_function`进行另一个调用来结束它。

 *如果您想在动画之后执行某些操作，请使用一旦满足条件就会调用的回调。请注意，您的函数会立即返回，它们只会计时函数（本身和回调）在将来的某个时间执行。

```
function my_function(callback) {
    var start = Date.now();
    frame(); // begin first frame
    function frame() {
        var into_anim = Date.now() - start;
        var opacity = 0.5 * (into_anim - 10);

        if(opacity > 1) {
            opacity = 1;
            callback(); // this was the last frame, do the next thing
        } else
            requestAnimFrame(frame);
     }
} 
```

叫它：

```
my_function(function(){ alert("It's done"); });
alert("It just began"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:12:24.020

如果我正确理解您的问题，您希望在满足某些条件后停止动画。为此，最佳实践是使用条件语句。如果条件已满足，则根据您使用的浏览器版本，通过调用or`requestAnimationFrame`来调用 else 停止重绘流程。对于不同的 polyfill，我们可以使用以下后备解决方案： `cancelRequestAnimationFrame``cancelAnimationFrame`

```
window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] 
                               || window[vendors[x]+'CancelRequestAnimationFrame']; 
```

requestAnimationFrame 的基本前提是，不是强制浏览器以给定的恒定帧率刷新浏览器，即使它不能这样做，我们依靠浏览器的能力来管理刷新率，从而直接挂钩浏览器刷新/重绘，在刷新时我们可以告诉浏览器使用 requestAnimationFrame 做一些特定的事情。

但回到最初的想法，您可以按以下方式完成所需的任务：

```
(function() {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] 
                               || window[vendors[x]+'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() { callback(currTime + timeToCall); }, 
              timeToCall);
           lastTime = currTime + timeToCall;
        return id;
    };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
    };
}());

var updating = true,
    animationRequest = null;

animationRequest = requestAnimationFrame(function(func) {
    if (updating) {

        // THE DRAWING FUNCTION. WE SKIP THIS SECTION

        animationRequest = requestAnimationFrame(func);
    }
    else {
        updating = false;
        animationRequest = requestAnimationFrame(func);
    }
})); 
```

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:44:54.827

好吧，requestAnimationFrames 返回一个 ID，该 ID 可用于通过调用 cancelAnimationFrame(ID) 或每个浏览器中的等效项来停止动画。

您可能想要做的是设置一个可从回调函数访问的 var。或者在你的回调函数中定义一些东西来运行 cancelAnimationFrame();

也许是这样的：

编辑：

我误解了 requestAnimationFrame。它实际上要求您在每次准备好新框架时调用它。所以只是不调用它会阻止动画继续。更新示例如下：

```
requestAnimFrame(animCallback);

var postAnimCallback = function(){
     alert('called after animation done');
}    

function animCallback(){
    if(typeof animCallback.count == 'undefined'){
        animCallback.count=0;
    }
    animCallback.count++;
    if(animCallback.count < 300){// or whatever condition you want to check to be sure you are ready for it to animate again.
        requestAnimFrame();
    } else { //since we aren't calling animateframe again, run callback code
        alert('animation done');
        // or run a previously defined animation callback
        postAnimCallback();
    }
} 
```

希望有帮助！*

# python - pygtk 中的多行 gtk 条目

> ID：10840917
> 
> 赞同：5
> 
> 时间：2012-05-31T20:37:22.850
> 
> 标签：python, gtk, pygtk

我知道单行条目有一个 PyGTK 类，但是多行条目呢（比如输入项目的描述）呢？我在网上搜索过，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-01T02:23:44.597

TextView 是用于编辑多行文本的小部件。

# xml - 逗号分隔的 IDREF XML 模式？

> ID：10840918
> 
> 赞同：0
> 
> 时间：2012-05-31T20:37:25.123
> 
> 标签：xml

是否可以创建自定义逗号分隔的 IDREFS 类型。默认情况下，在 xsd 中我们有 xsd:IDREFS，它允许多个 IDEREF，但它们是空格分隔的。我需要允许逗号分隔的 aa 类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:50:05.233

您可以定义一个 xs:string 的子类型，它使用类似于

```
((\i\c+),\s*)*(\i\c+) 
```

但当然它不会具有 IDREFS 类型的“引用”语义。

# wpf - 不受框架影响的主页的 WPF 导航

> ID：10840922
> 
> 赞同：0
> 
> 时间：2012-05-31T20:37:38.307
> 
> 标签：wpf, browser, navigation

我遇到了一个问题，我的页面上有一个框架，并且在使用主页面时，框架本身设置为几个不同的页面。当我点击后退按钮将主页导航回上一页时，我必须让我的框架先浏览它导航到的每个页面，然后它会备份主页。我用来返回的只是标准：

```
 this.NavigationService.GoBack(); 
```

有没有办法阻止我的框架向我的导航服务添加页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:38:00.997

这个问题不是很清楚，但这可能就是你要找的。

```
Frame Source="FramePage1.xaml" JournalOwnership="OwnsJournal" 
```

# python - 正则表达式，首先找到 - Python

> ID：10840926
> 
> 赞同：4
> 
> 时间：2012-05-31T20:38:07.123
> 
> 标签：python, regex, string

```
i="<wx._controls.Button; proxy of <Swig Object of type 'wxButton *' at 0x2887828> >]], [[[41, 183], 'Button', <wx._controls.Button; proxy of <Swig Object of type 'wxButton *' at 0x28879d0> >]]]"

m = re.findall("<wx.(.*)> >", i) 
```

会给我

```
["<wx._controls.Button; proxy of <Swig Object of type 'wxButton *' at 0x2887828> >]], [[[41, 183], 'Button', <wx._controls.Button; proxy of <Swig Object of type 'wxButton *' at 0x28879d0> >"] 
```

然而我想要它给我，

```
["<wx._controls.Button; proxy of <Swig Object of type 'wxButton *' at 0x2887828> >","<wx._controls.Button; proxy of <Swig Object of type 'wxButton *' at 0x28879d0> >"] 
```

正则表达式一直搜索到最后，我想取出与正则表达式匹配的所有部分，有没有人知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T20:39:56.000

`*`操作员默认是贪婪的。您可以通过在其后添加一个来更改`?`它。还记得引用文字点。

我还使组不匹配，否则您将无法获得所需的输出（这似乎也是您原始代码的问题）：

```
re.findall(r"<wx\.(?:.*?)> >", i) 
```

另一种可能性如下（假设恰好一个`<`字符出现在第一个字符之前`>`），这比使用惰性`*`运算符的版本更快：

```
re.findall(r"<wx\.[^<]*<[^<]*> >", i) 
```

# sql-server - FROM 子句中的 CASE

> ID：10840927
> 
> 赞同：2
> 
> 时间：2012-05-31T20:38:10.193
> 
> 标签：sql-server, tsql, case

是否可以在 t-sql 查询的 FROM 子句中使用 CASE？例如：

```
SELECT *
FROM CASE
    WHEN column_ = 'firstColumn'
        THEN table_ t, firstTable fT
    ELSE table_ t, secondTable sT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:40:43.193

```
SELECT  *
FROM    mytable t
CROSS APPLY
        (
        SELECT  *
        FROM    firstTable ft
        WHERE   t.column = 'firstColumn'
                AND ft.id = t.joincolumn
        UNION ALL
        SELECT  *
        FROM    secondTable st
        WHERE   (t.column <> 'firstColumn' OR t.column IS NULL)
                AND st.id = t.joincolumn
        ) q 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:28:58.070

谢谢各位的意见。我实际上结束了类似于 Quassnoi 建议的事情：

```
SELECT *
FROM table_ t, firstTable fT

UNION

SELECT *
FROM table_ t, secondTable sT 
```

我不知道我在想什么。我应该早点想出来的。

# c# - 用户的共享点元数据

> ID：10840928
> 
> 赞同：0
> 
> 时间：2012-05-31T20:38:15.300
> 
> 标签：c#, sharepoint-2010

我如何以编程方式访问 Sharepoint 用户的元数据，例如 Sharpoint 中的 Title 和 About me。

我可以获取 SPUser，但似乎没有界面，除了 LoginName、Name 和电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T04:33:07.030

如果要获取用户的 Active Directory 信息，则需要配置 User Profile Service 应用程序以执行 AD 数据到用户配置文件服务应用程序数据库的定期同步。然后数据将可用于使用[UserProfileManager](http://msdn.microsoft.com/en-us/library/microsoft.office.server.userprofiles.userprofilemanager.aspx)和[UserProfileManager.GetUserProfile()](http://msdn.microsoft.com/en-us/library/microsoft.office.server.userprofiles.userprofilemanager.getuserprofile.aspx)方法的用户帐户。

# mysql - 如何在 MySQL 触发器中获取结果集

> ID：10840932
> 
> 赞同：1
> 
> 时间：2012-05-31T20:38:54.130
> 
> 标签：mysql, triggers

在`BEFORE` `INSERT`我试图检查值。如果一列是空白的，我想加载默认值 - 基于单独表中的一行。我虽然像下面的代码这样的东西可以满足我的需要，但我遇到了一个错误。

> 不允许从触发器返回结果集 执行已停止！

这是我的 SQL，我假设它在抱怨我的 select 语句。

```
delimiter |
CREATE TRIGGER `trg_Sites_ID` BEFORE INSERT ON Sites
FOR EACH ROW
BEGIN
  SELECT @CA:=Palette0ColorA,  @CB:=Palette0ColorB FROM Themes WHERE ID=NEW.ThemeID;
  SET NEW.ID = UUID();
  SET NEW.ColorA = IF(NEW.ColorA = '', @CA, NEW.ColorA);
  SET NEW.ColorB = IF(NEW.ColorB = '', @CB, NEW.ColorB);
END
|
delimiter ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:53:43.567

正如错误消息所暗示的那样，您`SELECT`正在尝试将数据返回给客户端。您可以改为使用[`SELECT ... INTO`](https://dev.mysql.com/doc/en/select-into.html)：

```
SELECT Palette0ColorA, Palette0ColorB INTO @CA, @CB FROM Themes WHERE ID=NEW.ThemeID 
```

# excel - 将一组工作表复制到另一个工作簿

> ID：10840935
> 
> 赞同：0
> 
> 时间：2012-05-31T20:39:11.907
> 
> 标签：excel, vbscript

我想将我的工作簿中的一些工作表复制到另一个工作簿。我不希望从我的源工作簿中复制任何公式或链接。我只需要数据。我想使用 vbscript 来实现这一点。谁能指导我这样做。

这是我尝试通过复制工作表来使其工作，但不幸的是它也复制了公式。

```
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = False
objExcel.DisplayAlerts=False
Set objWorkbook1= objExcel.Workbooks.Open("SourceFile.xlsx")
set objWorkbook2=objExcel.Workbooks.Add
set sheetsToCopy=objWorkbook1.Sheets(Array("Sheet1","Sheet2","Sheet3"))
sheetsToCopy.Copy objWorkbook2.Sheets(1)
objWorkbook1.save
objWorkbook2.saveAs("TargetFile.xlsx")
objWorkbook1.close
objWorkbook2.close
objExcel.DisplayAlerts=True
set objExcel=nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:50:11.253

尝试更换

```
sheetsToCopy.Copy objWorkbook2.Sheets(1) 
```

像这样：

```
i = 1
For each wks in sheetsToCopy
    If objWorkbook2.Sheets.Count < i Then objWorkbook2.Sheets.Add , objWorkbook2.WorkSheets(objWorkbook2.WorkSheets.Count)
    'adds new worksheet to end of file to keep sheet count in tact
    wks.Cells.Copy 
    With objWorkbook2.Sheets(i)
        .Range("A1").PasteSpecial -4163 '--> numeric constant for PasteValues
        .Name = wks.Name
    End With
    i = i + 1
Next 
```

唯一的问题是确保新工作簿中有足够的工作表。您可以写一张支票以查看有多少张纸，如果我是 > 然后在复制前添加一张纸。

# java - 嵌入式循环的递归函数

> ID：10840941
> 
> 赞同：0
> 
> 时间：2012-05-31T20:39:42.253
> 
> 标签：java, algorithm, recursion

我想要一个干净的递归函数来生成与

```
static List<String> l, out;

l=new ArrayList<String>();
l.add("A");l.add("B");l.add("C");l.add("D");l.add("E");l.add("F");
for (int i = 0; i < l.size(); i++) {
    for (int j = i+1; j < l.size(); j++) {
        for (int k = j+1; k < l.size(); k++) {
            for (int t = k+1; t < l.size(); t++) {
                StringBuffer buffer = new StringBuffer(50);
                buffer.append(l.get(i));
                buffer.append(l.get(j));
                buffer.append(l.get(k));
                buffer.append(l.get(t));
                out.add(buffer.toString());
            }
        }
    }
} 
```

例如，这里有 4 个级别

我在那里试了一下[http://pastebin.com/auSxQMHt](http://pastebin.com/auSxQMHt)

但它不起作用（见输出，我没有得到那么多结果）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:04:58.397

试试这个，你的索引减一：

```
private static final void loops(int i, StringBuffer buffer, int level, int k, int size) {
        if  (level>=k){
            out.add(buffer.toString());
        } else {
            for (int j = i; j < size; j++) {
                StringBuffer buf = new StringBuffer(buffer);
                buf.append(l.get(j));
                loops(j+1, buf, level+1, k, size);
            }
        }
}

... main() ...
    int size = l.size();
    loops(0, new StringBuffer(50), 0, 4, size);
... main() ... 
```

结果如下：

```
p1: 194580 duration:334 ms
p2: 194580 duration:370 ms 
```

不要使用“int j = **i + 1** ”，而是使用“int **j = i** ”并传递“loops( **j+1** , buf, level+1, k);”

# scala - scala.MatchError: ?>: Nothing <: Any (of class scala.tools.nsc.symtab.Types$BoundedWildcardType)

> ID：10840943
> 
> 赞同：1
> 
> 时间：2012-05-31T20:39:49.740
> 
> 标签：scala

该项目使用 SBT 0.11.3 和 Scala 2.9.1 编译没有错误。使用“sbt run”运行没有问题。但是，'sbt test' 给了我这个：

```
$ sbt test
[info] Loading global plugins from /home/mslinn/.sbt/plugins
[info] Loading project definition from /home/mslinn/work/domain-bus/project
[info] Set current project to domainbus (in build file:/home/mslinn/work/domain-bus/)
[error] {file:/home/mslinn/work/domain-bus/}domainbus/test:compile: scala.MatchError: ?>: Nothing <: Any (of class scala.tools.nsc.symtab.Types$BoundedWildcardType)
[error] Total time: 7 s, completed May 31, 2012 1:20:46 PM 
```

没有源代码参考，只是一个错误，对我来说没有任何意义。我使用 Scala 2.9.1-1 得到了相同的结果。IDEA 疯狂尝试使用 2.9.1 和 2.9.1-1 进行编译。这里有额外的信息，也许会提供一个线索：

```
Information:Compilation completed with 68 errors and 0 warnings
Information:68 errors
Information:0 warnings
Error: scala.MatchError: ?>: Nothing <: Any (of class scala.tools.nsc.symtab.Types$BoundedWildcardType)
Error:at scala.tools.nsc.typechecker.Variances$class.varianceInType(Variances.scala:67)
Error:at scala.tools.nsc.Global$analyzer$.varianceInType(Global.scala:351)
Error:at scala.tools.nsc.typechecker.Variances$$anonfun$varianceInArgs$2.apply(Variances.scala:48)
Error:at scala.tools.nsc.typechecker.Variances$$anonfun$varianceInArgs$2.apply(Variances.scala:47)
Error:at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
Error:at scala.collection.immutable.List.foreach(List.scala:45)
Error:at scala.tools.nsc.typechecker.Variances$class.varianceInArgs(Variances.scala:47)
Error:at scala.tools.nsc.Global$analyzer$.varianceInArgs(Global.scala:351)
Error:at scala.tools.nsc.typechecker.Variances$class.varianceInType(Variances.scala:74)
Error:at scala.tools.nsc.typechecker.Variances$$anonfun$varianceInTypes$1.apply(Variances.scala:40)
Error:at scala.collection.LinearSeqOptimized$class.foldLeft(LinearSeqOptimized.scala:111)
Error:at scala.collection.immutable.List.foldLeft(List.scala:45)
Error:at scala.collection.TraversableOnce$class.$div$colon(TraversableOnce.scala:137)
Error:at scala.collection.immutable.List.$div$colon(List.scala:45)
Error:at scala.tools.nsc.typechecker.Variances$class.varianceInTypes(Variances.scala:40)
Error:at scala.tools.nsc.Global$analyzer$.varianceInTypes(Global.scala:351)
Error:at scala.tools.nsc.typechecker.Infer$Inferencer$$anonfun$protoTypeArgs$1.apply(Infer.scala:573)
Error:at scala.tools.nsc.typechecker.Infer$Inferencer$$anonfun$protoTypeArgs$1.apply(Infer.scala:572)
Error:at scala.Tuple2$Zipped$$anonfun$map$1.apply(Tuple2.scala:65)
Error:at scala.Tuple2$Zipped$$anonfun$map$1.apply(Tuple2.scala:63)
Error:at scala.Tuple2$Zipped.map(Tuple2.scala:63)
Error:at scala.tools.nsc.typechecker.Infer$Inferencer.protoTypeArgs(Infer.scala:572)
Error:at scala.tools.nsc.typechecker.Typers$Typer.doTypedApply(Typers.scala:2467)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedApply$1(Typers.scala:3371)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4104)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4271)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4344)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedIf$1(Typers.scala:3158)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:3987)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedCase(Typers.scala:1957)
Error:at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$typedCases$1.apply(Typers.scala:1975)
Error:at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$typedCases$1.apply(Typers.scala:1974)
Error:at scala.collection.immutable.List.loop$1(List.scala:117)
Error:at scala.collection.immutable.List.mapConserve(List.scala:133)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedCases(Typers.scala:1974)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:4003)
Error:at scala.tools.nsc.typechecker.Typers$Typer.transformedOrTyped(Typers.scala:4428)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedDefDef(Typers.scala:1760)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:3919)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedStat$1(Typers.scala:2100)
Error:at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$24.apply(Typers.scala:2184)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedStats(Typers.scala:2184)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedTemplate(Typers.scala:1512)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typedModuleDef(Typers.scala:1320)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:3913)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed1(Typers.scala:3906)
Error:at scala.tools.nsc.typechecker.Typers$Typer.typed(Typers.scala:4331)
Error:at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3.apply(Analyzer.scala:94)
Error:at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:329)
Error:at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3$$anonfun$run$1.apply(Analyzer.scala:86)
Error:at scala.collection.Iterator$class.foreach(Iterator.scala:660)
Error:at scala.collection.mutable.ListBuffer$$anon$1.foreach(ListBuffer.scala:316)
Error:at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3.run(Analyzer.scala:86)
Error:at scala.tools.nsc.Global$Run.compileSources(Global.scala:953)
Error:at scala.tools.nsc.Global$Run.compile(Global.scala:1038)
Error:at scala.tools.nsc.Main$.process(Main.scala:106)
Error:at scala.tools.nsc.Main$.main(Main.scala:123)
Error:at scala.tools.nsc.Main.main(Main.scala)
Error:at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
Error:at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
Error:at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
Error:at java.lang.reflect.Method.invoke(Method.java:597)
Error:at org.jetbrains.plugins.scala.compiler.rt.ClassRunner.main(ClassRunner.java:46)
Error:
Error:Exception in thread "main" java.lang.reflect.InvocationTargetException
Error:Caused by: scala.MatchError: ?>: Nothing <: Any (of class scala.tools.nsc.symtab.Types$BoundedWildcardType)
Error:... 5 more 
```

建议？

麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:54:57.580

好的，这是问题的原因，以防其他人碰到它。我在单元测试中使用这个签名定义了一个方法，它炸毁了 Scala 编译器：

```
def sendMsgs(tickEventOptions: Option[Seq[_]], broadcast: Boolean): Unit 
```

无类型的 Seq 是问题所在。以这种方式定义它允许编译器不会死：

```
def sendMsgs(tickEventOptions: Option[Seq[String]], broadcast: Boolean): Unit 
```

麦克风

# ruby-on-rails - Twitter Bootstrap Rails：如何通过重用类来编写语义 HTML？

> ID：10840946
> 
> 赞同：2
> 
> 时间：2012-05-31T20:40:01.020
> 
> 标签：ruby-on-rails, twitter-bootstrap, less, twitter-bootstrap-rails

所以我安装了[`twitter-bootstrap-rails`](https://github.com/seyhunak/twitter-bootstrap-rails)gem。我运行生成器来创建一个`bootstrap_and_overrides.css.less`文件。现在我想写一些语义HTML。所以不要写：

```
<div class="container">
  <div class="row">
    <div class="span2">Column1</div>
    <div class="span6">Column2</div>
  </div>
</div> 
```

我希望能够写：

```
<div id="foo-wrapper">
  <div class="foo">
    <div class="foo-left">Column1</div>
    <div class="foo-right">Column2</div>
  </div>
</div> 
```

但是，当我尝试为此编写 less 时，不会应用这些类：

```
// at the bottom of bootstrap_and_overrides.css.less
#foo-wrapper {
  .container;
} 
```

我究竟做错了什么？这不支持吗？我是否在错误的地方定义了我的风格？我在使用 Twitter Bootstrap 时是否使用了错误的 gem？

## 更新：

这是评论中的`bootstrap_and_overrides.css.less`：

```
// Your custom LESS stylesheets goes here
//
// Since bootstrap was imported above you have access to its mixins which
// you may use and inherit here 
```

出于某种原因，我似乎无法访问 mixins，我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T19:10:31.487

您应该仔细检查 Bootstrap 的[mixins](http://twitter.github.com/bootstrap/less.html#mixins)。相反，你会想要类似的东西

```
#container {
    .center-block();
}

.foo-wrapper {
    .makeRow();
}

.foo-left {
    .makeColumn(8,0);
}

.foo-right {
    .makeColumn(4,0);
} 
```

哪些 mixins 来填充那些特殊的 Bootstrap 类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T02:03:00.907

看起来您想要一个名为“选择器继承”的 SASS 功能

它允许您使用另一个类扩展一个类

```
.bordered {      
  border: 1px solid back; 
} 
#menu a {                   
  @extend .bordered;      
} 
```

会产生：

```
.bordered, #menu a {
border: 1px solid back; } 
```

[LESS和SASS的比较](https://gist.github.com/674726)

所以你可以转向一个 sass 的 bootstrap 实现，然后做你想做的事。[https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T03:11:12.887

我将[https://github.com/thomas-mcdonald/bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass)与 Compass 一起使用，它工作正常。

就像@Jesse Wolgamott 说的，“选择器继承”功能！

或者你可以看看这个： [如何在不使用 mixin 的情况下在 sass 中重用一个类？](https://stackoverflow.com/questions/11400219/how-to-reuse-a-class-in-sass-without-using-a-mixin)

这个问题在重用 span* 时很常见：
[How to use twitter bootstrap with bootstrap-sass in rails app?](https://stackoverflow.com/questions/9897728/how-to-use-twitter-bootstrap-with-bootstrap-sass-in-rails-app)

# android - 如何根据字符串变量按名称获取资源？

> ID：10840947
> 
> 赞同：2
> 
> 时间：2012-05-31T20:40:03.097
> 
> 标签：android

我想要做

```
String childImg = "childIcon";
textView.setCompoundDrawablesWithIntrinsicBounds(R.drawable.????, 0, 0, 0); 
```

它期待一个 int 但我有一个字符串。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:09:37.730

我用它来获取可绘制的 id

```
getResources().getIdentifier(childImg, "drawable", getPackageName()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:44:45.797

采用`getIdentifier()`

```
int id = getResources().getIdentifier("name_of_resource", "id", getPackageName()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T20:46:36.953

像这样做：

```
String childImg = "childIcon";
int id = getResources().getIdentifier(childImg, "drawable", getPackageName())
textView.setCompoundDrawablesWithIntrinsicBounds(id, 0, 0, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T20:44:28.280

```
textView.setCompoundDrawablesWithIntrinsicBounds(Resources.getIdentifier(childImg), 0, 0, 0); 
```

# jquery-masonry - 当项目的高度发生变化时，是否可以让 jQuery Masonry 或 Isotope 维护项目的列？

> ID：10840949
> 
> 赞同：3
> 
> 时间：2012-05-31T20:40:12.877
> 
> 标签：jquery-masonry, jquery-isotope

我目前正在使用 Masonry 来显示许多项目，并且每个项目的元素中都显示了评论。当您添加评论时，项目的高度会增加，所以我调用`.masonry('reload')`. 根据项目的位置，有时它下面的项目会保持其列并向下滑动，而有时它们会重新排列以位于新列中。

有什么方法可以让项目始终停留在初始列中并且只调整垂直位置？如果不是 Masonry，那么 Isotope 或其他图书馆是否可以做到这一点？

我不反对为同位素编写自定义布局，但如果已经有一个好的解决方案，我宁愿不反对。

# c - 通过家庭网络上的两台机器之间的套接字连接？

> ID：10840950
> 
> 赞同：0
> 
> 时间：2012-05-31T20:40:18.483
> 
> 标签：c, winapi, sockets, winsock

我是套接字的新手，我的问题是：

假设我有一台家用电脑，而我的朋友也有一台家用电脑。（我通过 gprs/edge 调制解调器连接到网络；我的朋友通过有线连接 - 我不确定这是否重要）。

`whatismyip.com`例如，我可以在页面上检查我的 ip ；他也可以为他的。

如果我编写了一些简单的套接字（WinSock）代码并将这些 ip 放入这样的代码中，是否足以在我们的机器之间进行一些网络通信，它是否可以工作？

在 WinSock 示例代码中将此类 ip 放在哪里？

*编辑：*一些解释

我正在使用 c/winapi 我已经在我自己的机器上本地编译和测试了一些示例，它似乎可以工作，但我不确定如果我将提供两个 IP（从 whatismyip.com 获取）它是否可以在两台远程计算机上工作页）。

它肯定会起作用，也可能不会？我只需要在某些套接字地址字段中提供这些 IP，还是需要做更多？

*编辑2：*

我需要在两台家用电脑之间做一些简单的winapi游戏（通过winsock通过互联网连接）我可以关闭防火墙，它不起作用吗？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:25:20.103

你有几个选择。一种是设置静态端口转发——即，配置您的路由器，使端口 X 转到内部 IP 地址 abcd 这通常需要您使用静态 IP 地址设置您的计算机。

大多数人通常更愿意避免这种情况——这是可能的，但不一定是微不足道的。一些可用的工具/协议是[STUN](https://www.rfc-editor.org/rfc/rfc5389)、[TURN](https://www.rfc-editor.org/rfc/rfc5766)、[ICE](https://www.rfc-editor.org/rfc/rfc5245)和[UPnP](http://www.upnp.org/)。[虽然您可以直接使用 UPnP，但您可能会发现通过libupnp 之](http://pupnp.sourceforge.net/)类的库处理起来会更容易一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T21:05:54.963

您需要阅读大多数家庭路由器所做的[网络地址转换。](http://en.wikipedia.org/wiki/Network_address_translation)然后将[端口转发](http://en.wikipedia.org/wiki/Port_forwarding)规则添加到您的路由器/调制解调器防火墙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:54:13.573

首先，您需要决定要使用哪种协议。
TCP还是UDP？
如果您想要 TCP/IP 通信，您需要一台计算机作为服务器（监听），一台计算机作为客户端。

你是用 C++ 编程的吗？[这是服务器端代码](http://www.codeproject.com/Articles/1891/Beginning-Winsock-Programming-Simple-TCP-server)
的示例：

# php - 获取帖子中的所有变量并取消链接文件php

> ID：10840952
> 
> 赞同：1
> 
> 时间：2012-05-31T20:40:22.437
> 
> 标签：php, post, unlink

我正在编写一个脚本来列出目录中的所有文件。然后，如果用户想要删除其中一个文件，则可以选中复选框。到目前为止我得到的脚本如下。当页面重新加载时，下一步是在表单 post 上迭代 post 中的 delete$i 并取消链接（删除）已检查的相关文件。但是我不太确定如何做到这一点，因为我对 php 还很陌生。目录中可能有不同数量的文件，我只想删除选中的文件。任何关于如何实现这一点的提示将不胜感激！

```
//directory to list the files from
$directory = "";

//get all image files
$files = glob($directory . "*.*");

echo "<h2>Files available:</h2>";
echo "<ul>";
echo "<form action=\"\" method=\"post\">";
echo "<input type=\"hidden\" name=\"delete\" value=\"true\" />";

//interger count
$i = 0;

//print each file name except index.php
foreach($files as $file) {
    if ($file != "index.php") {
        echo "<li><input type=\"checkbox\" name=\"delete{$i}\" value=\"{$file}\" /> <a href=\"http://files.abc.com/{$file}\">http://files.abc.com/" . $file . "</a></li>";
        $i++;
    }
}
echo "<li><input type=\"submit\" value=\"Delete Selected Files\" /></li>";
echo "</form>";
echo "</ul>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:57:02.853

在提交值之后，我会同意[Dagon](https://stackoverflow.com/users/557846/dagon) .. 只需执行以下操作：

```
if(isset($_POST["delete"])) {
    foreach($_POST["delete"] as $val) {
        unlink($val);
    }
} 
```

# selenium - 创建新的 WebDriver 会导致 StackOverflowError

> ID：10840954
> 
> 赞同：5
> 
> 时间：2012-05-31T20:40:34.497
> 
> 标签：selenium, webdriver, selenium-webdriver

我只是想进行设置并能够从 Selenium 的网站运行[示例。](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)但是，我已将其范围缩小到导致 StackOverflowError 的 FirefoxDriver 构造函数。我使用 InternetExplorerDriver 得到相同的行为，但不是 HtmlUnitDriver。

以下代码

```
import org.junit.Test;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class WebDriverTest {

    @Test
    public void test() {
        WebDriver driver = new FirefoxDriver();
    }
} 
```

产生以下堆栈跟踪：

```
java.lang.StackOverflowError
  at java.lang.Exception.<init>(Unknown Source)
  at java.lang.reflect.InvocationTargetException.<init>(Unknown Source)
  at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
  at java.lang.reflect.Method.invoke(Unknown Source)
  at org.json.JSONObject.populateMap(JSONObject.java:937)
  at org.json.JSONObject.<init>(JSONObject.java:272)
  at org.json.JSONObject.wrap(JSONObject.java:1539)
  at org.json.JSONObject.populateMap(JSONObject.java:939)
  at org.json.JSONObject.<init>(JSONObject.java:272)
  at org.json.JSONObject.wrap(JSONObject.java:1539)
  at org.json.JSONObject.populateMap(JSONObject.java:939)
  at org.json.JSONObject.<init>(JSONObject.java:272)
  at org.json.JSONObject.wrap(JSONObject.java:1539)
  at org.json.JSONObject.populateMap(JSONObject.java:939)
  at org.json.JSONObject.<init>(JSONObject.java:272)
  at org.json.JSONObject.wrap(JSONObject.java:1539)
  at org.json.JSONObject.populateMap(JSONObject.java:939)
  at org.json.JSONObject.<init>(JSONObject.java:272)
  at org.json.JSONObject.wrap(JSONObject.java:1539)
  at org.json.JSONObject.populateMap(JSONObject.java:939)
  at org.json.JSONObject.<init>(JSONObject.java:272)
  :
  : 
```

我正在使用 selenium-java-2.22.0 和下载打包的 json jar（即 json-20080701.jar）

另外值得注意的是，当运行新的 FirefoxDriver 时，Firefox 会启动并且您会看到一个新的标签页。使用 InternetExplorerDriver，不会打开任何窗口，但它会生成与 JSONObject 无限循环的相同堆栈跟踪。我在 Windows 7 上运行 Firefox 12.0 和 IE9。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T21:40:16.810

## 欢迎来到[JAR 地狱](http://en.wikipedia.org/wiki/JAR_hell#JAR_hell)

类路径中的某些 JAR 文件与 Selenium 依赖项冲突。即使您使用的是常春藤，它也发生了，这有点奇怪。您的依赖项之一很可能包括其 jar 文件中的冲突类 - 或者您的依赖项需要同一库的两个不同版本。

无论如何，对于未来阅读本文的用户 - 使用一些依赖管理器为您使用 jars 进行艰苦的工作。如果您有超过 10 个具有依赖关系的项目，请不要尝试手动维护您的库 - 您很可能很快就会搞砸。[这是对依赖解决方案的相当合理的阅读，请点击那里的一些链接，不要偷懒。](https://stackoverflow.com/questions/571616/is-platform-enforced-versioning-mechanism-most-sorely-needed-feature-of-java)依赖管理器需要一些时间来掌握，他们是自己的世界。但他们帮助很大。

不要使用同一个库的多个版本。如果您使用多个库，其中两个库使用同一事物的不同版本……祝您好运！

除此之外......我们唯一的希望是[Java Module System](http://en.wikipedia.org/wiki/Java_Module_System)，它将在~~爪哇 8~~爪哇 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:43:47.497

我们也遇到了这个问题，如果您的测试项目的 org.json 类的其他/旧版本比 WebDriver 在其类路径中的某个位置需要 (20080701) 的版本，我们也遇到了这个问题。

PS：FTR 我“错误地”打开了[http://code.google.com/p/selenium/issues/detail?id=4123](http://code.google.com/p/selenium/issues/detail?id=4123)，所以只是为了澄清这不是 WEBDRIVER 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T23:13:53.880

将类路径上的 json 库替换为 selenium 附带的库，该库位于 /Selenium-x.xx/lib/json-20080701.jar

# java - 使用来自 html 的 Flying-Saucer 在 PDF 中渲染嵌入的图像

> ID：10840959
> 
> 赞同：10
> 
> 时间：2012-05-31T20:40:47.467
> 
> 标签：java, pdf-generation, embedded-resource, flying-saucer, xhtmlrenderer

我有一个 xhtml 文档，我正在使用飞碟将其转换为 PDF。xhtml 有几个标签，这些标签内嵌了 base64 编码的图像。xhtml 的源是动态的，因此图像标签所在的结构可能会有所不同。这是标签的样例：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAagAAAEuCAYAAADbW4YFAAAgAElEQVR4Aex9CYBdRZ ... 
```

当我在浏览器中查看 html 时，图像显示正确，但是 img 元素不会在最终 PDF 中呈现。这是我将其渲染出来以创建 PDF 的方式。

```
ITextRenderer renderer = new ITextRenderer();
renderer.setDocument(builder.parse(source), "");
renderer.layout();
renderer.createPDF(response.getOutputStream(),true); 
```

谁能让我知道我应该采取什么方法来实现这一目标？我看到了[这个帖子](https://stackoverflow.com/questions/10316607/render-image-from-servlet-in-flyingsaucer-generated-pdf)，但是，我使用的是内联图像，所以我看不到如何使用 Edd 的解决方案来完成这个。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T21:26:19.243

是的，您可以使用此处给出的方法：[Render image from servlet in flysaucer generated pdf](https://stackoverflow.com/questions/10316607/render-image-from-servlet-in-flyingsaucer-generated-pdf)

Edd 拥有的地方：

```
 InputStream input = null;
        try {
            input = ...;
            byte[] bytes = IOUtils.toByteArray(input);
            Image image = Image.getInstance(bytes); 
```

在 Edd 的情况下，图像来自远程源（他用 跳过了该位`input = ...;`）。在您的情况下，您只想从 Base64 编码数据中读取它（. 之后的文本`base64,`。首先使用[Base64 解码器](https://stackoverflow.com/questions/469695/decode-base64-data-in-java)将二进制数据获取到一个`byte[]`或流中，然后您可以使用[Java ImageIO](http://docs.oracle.com/javase/6/docs/api/javax/imageio/package-summary.html)从您的字节和按照 Edd 的方法将图像转换为 PDF。在此向 Edd 致敬（请务必支持！）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T12:50:59.373

飞碟原生支持 data: 协议。您所要做的就是注册一个协议处理程序：

```
-Djava.protocol.handler.pkgs=org.xhtmlrenderer.protocols 
```

不需要servlet whatsoverver。

# php - 隐藏字段值未出现在查询字符串中

> ID：10840962
> 
> 赞同：1
> 
> 时间：2012-05-31T20:40:59.890
> 
> 标签：php, javascript, json, hidden-field

我有一个 javascript 方法正在做一些计算。最后，我想将它存储在一个隐藏的字段中。这是方法：

```
<script>
function getQuantity(){
 var count = document.getElementById('hidden').value;
 var Quantity=new Array();
 var i=0;
 for(i=0; i<count; i++)
 {
    Quantity[i]=document.getElementById(i).value;
 }
var myJSONQuantity = JSON.stringify(Quantity,'');
alert(myJSONQuantity);

document.qForm.getElementById('hdnQuantityArray').value = myJSONQuantity;
alert(document.qForm.getElementById('hdnQuantityArray').value);
}
</script> 
```

我在这里检查过，一切正常。最后一个警报正在打印正确的值。这是表单，其中有一个按钮，我想通过方法 GET 在提交时提交字段：

```
<form  name="qForm" method="GET" action="CalculateTotal.php">
    <input type="hidden" id="hdnQuantityArray" name="hdnQuantityArray">
    <input type="submit" value="CheckOut" id="CheckOut" name="CheckOut">
</form> 
```

我的查询字符串显示：

```
http://localhost/blazorange/Customer/CalculateTotal.php?hdnQuantityArray=&CheckOut=Submit 
```

我希望这`hdnQuantityArray`在查询字符串中有一些价值。

PS这个javascript方法是从同一个文件中另一个表单的提交按钮调用的。而这个表格是一个PHP表格。这是另一个表单的提交按钮的代码：

```
<input type="submit" value=" Total " id="total" onClick="return getQuantity()"> 
```

**编辑：**

```
<table border=1>
    <form id="CartForm">    
        <tr>
            <td>
                <h2> <font color='Grey'>Item Name</font> </h2>
            </td>
            <td>
                        <h2> <font color='Grey'>Item Price</font> </h2>
            </td>
            <td>
                    <h2> <font color='Grey'>Quantity</font> </h2>
            </td>
        </tr>
    <?PHP

        /*     Displaying the total and purchased cart's items    */

            $j=0;
            $temp=new Item();
            while(isset($ItemsArray[$j])) {
        ?>
        <tr>
                        <?PHP

                    if (is_string($ItemsArray[$j])) {
                $temp=unserialize($ItemsArray[$j]);
                 }

                $ItemName=$temp->getItemName();
                $Price=$temp->getPrice();
            ?>

            <td>
                <font color='Black'><?PHP echo $ItemName; ?>
            </td>

            <td>
                <font color='Black'><?PHP echo $Price;  ?></font>
            </td>

            <td>
                <input type="text" id="<?PHP echo $j;?>"/> 
            </td>
            </tr>

        <?PHP $j++; }?>

        <table>
            <input type="button" value=" Total " id="total" onClick="getQuantity()">
            <input type="hidden" value="<?PHP echo $j; ?>" id="hidden">

        </form>
    </table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:43:27.197

`document.getElementById('hidden')`

应该

`document.getElementById('hdnQuantityArray')`

您发布的代码中没有 ID 为“隐藏”的元素。

编辑：

您是说 JS 仅在 CartForm 提交时运行？那会重新加载页面，对吗？当页面重新加载时， hdnQuantityArray 为空。所以当你提交qForm时，那里什么都没有，因为页面加载了一个空白字段，并且JS没有再次运行。听起来对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:32:22.483

你不应该这样做：

```
document.getElementById('hdnQuantityArray').value = myJSONQuantity;
alert(document.getElementById('hdnQuantityArray').value); 
```

我在 document.getElementById 调用中消除了不必要的“qform”。

# php - 使用 Chrome 和 IE 在 iF rame 中丢失 PHP 会话

> ID：10840967
> 
> 赞同：1
> 
> 时间：2012-05-31T20:41:24.110
> 
> 标签：php, internet-explorer, session, google-chrome

**问题：**

我在将会话变量从父页面传递到 iFrame 页面以及在 Chrome 和 IE 中调用 PHP 文件的 AJAX 时遇到问题。不过，它似乎在 FF 和 Safari 中有效。

**环境：**

我有 Wordpress 作为我的“门户”。我的 Wordpress 页面之一是“仪表板”。该仪表板针对 CRM Web 服务发出 AJAX 请求以呈现 JSON 数据。Wordpress、仪表板文件和 CRM 都在同一个域中。“www.domain.com/wordpress”是 Wordpress 域，“www.domain.com/dashboard/dashboard.php”是通过 iFrame 包含在 Wordpress 页面上的仪表板文件，“www.domain.com/CRM” /webservice.php" 是我正在对其进行 AJAX 调用的 Web 服务文件。

**方法：**

用户使用 LDAP 登录 Wordpress。我从 Wordpress 中获取用户名并将其转储到一个`$_SESSION['WPUsername']`变量中，作为 Wordpress 登录功能的扩展。然后，当我的仪表板加载到 iFrame 中时，它会通过 jQuery 向我的 CRM Web 服务文件发出请求`$.get()`。接收请求，然后`webservice.php`使用`$_SESSION['WPUsername']`会话变量在内部查询适当的数据并返回响应。

**问题：**

火狐工作正常。`$_SESSION['WPUsername']`IE 和Chrome似乎认为`webservice.php`.

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:43:01.497

我对我的 PHP 配置和网站进行了所有建议的更改。我将 php.ini 中的 cookie 路径设置为“/”，并在 iFrame 中使用了完整的子域路径（“www.domain.com/dashboard/dashboard.php”）。现在似乎工作正常。

另一方面，我刚刚使用 OpenAM 作为 IdP，SimpleSAMLphp 作为 SP 实现了 SSO。不再需要会话 cookie 来管理身份验证，组件之间传递的所有数据现在都使用 Web 服务完成。

# dojo - 不想在 dojox.grid.DataGrid 中显示行索引列

> ID：10840968
> 
> 赞同：0
> 
> 时间：2012-05-31T20:41:27.233
> 
> 标签：dojo

我使用 dojox.grid.DataGrid 来呈现表格。我还在第一列中包含了 dojox.grid._CheckBoxSelector。我看到在复选框列和实际数据列之间总是有一个名为 Row 的列。

您能否让我知道如何不呈现此 Row 索引列？创建结构时我可以设置任何标志吗？还是我需要删除任何字段？

非常感谢。

==========================================

```
dojo
        .ready(function() {
            var myDojolayout = [
                    {
                        type : "dojox.grid._CheckBoxSelector"
                    },
                    // Now include the data cells in a view occupying the rest of the grid.
                    [
                            new dojox.grid.cells.RowIndex({
                                width : "10%"
                            }),
                            {
                                name : "Summary",
                                fields : [ "firstName", "lastName",
                                        "companyName", "phone", "email" ],
                                editable : true,
                                width : "10%",
                                formatter : function(fields) {
                                    var first = fields[0], last = fields[1], notes = fields[2], phone = fields[3], email = fields[4];
                                    return first + " " + last + "<br>"
                                            + companyName + "<br>" + phone
                                            + "<br>" + email;
                                }
                            }

                    ] ]

            var mygrid = new dojox.grid.DataGrid({
                id : "gridId",
                store : store,
                autowidth : "true",
                rowselector : "15px",
                keepRows : "30",
                rowsPerPage : "10",
                style : "height:300px",
                structure : myDojolayout
            }, "gridContainer");
            mygrid.startup();
            dojo.connect(mygrid, "onApplyEdit", function(row) {
                store. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:21:28.750

我可以通过用以下内容替换您的布局来完成这项工作。有些字段可能不起作用，因为它们是特定于实现的，但是在这些更改之后我没有看到 rowIndex 或类似的东西。

```
 var myDojolayout = [
                {
                    type : "dojox.grid._CheckBoxSelector"
                },
                // Now include the data cells in a view occupying the rest of the grid.

                        { cells: [{
                            name : "Summary",
                            fields : [ "firstName", "lastName",
                                    "companyName", "phone", "email" ],
                            editable : true,
                            width : "500px",
                            formatter : function(fields) {
                                var first = fields[0], last = fields[1], notes = fields[2], phone = fields[3], email = fields[4],companyName= fields[5];
                                return first + " " + last + "<br>"
                                        + companyName + "<br>" + phone
                                        + "<br>" + email;
                            }}]
                        }

                ]; 
```

# jquery - 使用 jquery 上传文件并作为 PUT 发送

> ID：10840972
> 
> 赞同：0
> 
> 时间：2012-05-31T20:41:45.357
> 
> 标签：jquery, ajax, file-upload, put

有谁知道如何使用表单上传文件，然后让 jquery 拦截它，修改文件，然后使用 http PUT 而不是 POST 使用 ajax 发送它？我试过使用 jquery 表单插件，但它不适用于 PUT，以前有没有其他人必须做这样的事情？一个例子会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:46:55.790

[http://homework.nwsnet.de/news/9132_put-and-delete-with-jquery](http://homework.nwsnet.de/news/9132_put-and-delete-with-jquery)

这是一些帮助您入门的示例代码。你只需要添加一个 put 方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:50:54.480

只需传入一个“类型”键。

```
$.ajax({
  url: 'ajax/test.html',
  type: 'PUT'
}); 
```

请注意，并非所有浏览器都支持 PUT。

# unit-testing - 如何对使用带有序列的域对象的工件进行单元测试？

> ID：10840977
> 
> 赞同：1
> 
> 时间：2012-05-31T20:42:13.053
> 
> 标签：unit-testing, grails, spock

我正在为我的服务编写测试（使用 Grails 2.0.4/Spock/Build-Test-Data 插件），这些服务使用其中包含序列的域对象。挑战在于该序列在单元测试中不起作用，所以我想知道如何解决这个问题？

示例：域对象

```
class Transaction {
    Long transactionId          // unique auto generated transaction id

    // .. code omitted

    static mapping = {
        // sequence generator for handing out unique transaction id's
        transactionId generator:'sequence', params:[initial_value: 50, sequence:'seq_transaction_id']
    }

} 
```

示例：测试

```
@Build(Transaction)
@TestFor(Transaction)
class TransactionSpec extends Specification {
    def "simple test"() {
        when:
        Transaction transaction = Transaction.build()
        transaction.save()

        then:
        true
    }
} 
```

测试将简单地失败，因为域对象内的 transactionId 可能不可为空。域类中的序列没有按预期工作并返回 null。我错过了什么吗？或者有没有其他方法可以让序列在单元测试中按预期工作？

提前致谢。

# ruby-on-rails - 如何使用 REST 实现对 Oauth 进行身份验证

> ID：10840978
> 
> 赞同：0
> 
> 时间：2012-05-31T20:42:14.993
> 
> 标签：ruby-on-rails

我有以下情况，

我有一个 Rails 应用程序供开发人员使用，该应用程序通过设计进行身份验证。该应用程序也像休息 API 一样响应，即

```
/photos.json  # brings all photos from the logged user. 
```

我的问题是，在这种情况下，如何在用户和应用程序之间实施 2 条腿 OAuth 宁静策略，同时将设计作为主要身份验证方法。我在这里有点迷路了。

我知道`token_authenticatable`Devise 中有，但不知何故，我认为仅使用简单令牌进行身份验证不够安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:15:00.737

如果您想要完整的 OAuth 实施，请查看[https://github.com/socialcast/devise_oauth2_providable](https://github.com/socialcast/devise_oauth2_providable)

# silverlight - 根据屏幕大小和字长控制字体大小

> ID：10840979
> 
> 赞同：0
> 
> 时间：2012-05-31T20:42:18.213
> 
> 标签：silverlight, windows-phone-7, font-size

**情况**：我有一个`<TextBlock />`通过函数接收异步内容的函数。

**问题**：有时收到的文本太长，我不想换行。

**解决方案**：根据接收到的文本长度减小字体大小，以便接收到的文本在屏幕上完全可见。

**这个解决方案的问题**：我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:48:05.753

考虑将您的 TextBlock 放在 ViewBox 控件中以相应地拉伸文本。

# bash - 通过函数将 Heredoc 分配给变量的返回状态 1

> ID：10840984
> 
> 赞同：1
> 
> 时间：2012-05-31T20:42:41.757
> 
> 标签：bash, shell, variable-assignment

这是将此处文档的内容分配给变量的一种方法。但是，它的执行将返回状态 1 而没有说明原因。

```
#! /bin/bash
# set -e -x

# This implementation returns 1
define(){ IFS='\n'; read -r -d '' ${1}; }
define thedoc <<'EOF'
Here is my here doc.
There was an ASCII banana here too,
but `read` would just it concatenate to mush.
EOF
# The here document will print with the following when `set -e` in not invoked.
echo $thedoc 
```

`set -e`如果关闭，一切都通过检查甚至执行来检查。这不是上面的 Banana 独有的，而是`define()`上面构建的任何此处的文档。该错误从何而来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T23:57:02.897

当您使用空字符串作为分隔符时，`read`它基本上永远不会看到分隔符并遇到文件结尾，因此它将返回状态设置为 1。您可以使用`while read`循环来避免这种情况。

来自[Bash 参考手册](http://tiswww.case.edu/php/chet/bash/bashref.html#IDX103)：

> 返回代码为零，除非遇到文件结尾、`read`超时（在这种情况下返回代码大于 128），或者提供了无效的文件描述符作为 ' `-u`' 的参数。

另外，不要使用`-e`. 使用显式错误处理。见[BashFAQ/105](http://mywiki.wooledge.org/BashFAQ/105)

此外，为了保留空格、制表符和换行符而不是“连接成糊状”，您必须引用变量 you `echo`。

# mercurial - 列出当前目录中由 Mercurial 控制的文件

> ID：10840985
> 
> 赞同：4
> 
> 时间：2012-05-31T20:42:42.620
> 
> 标签：mercurial

我有一些目录包含一些文件，这些文件是 Hg 存储库的一部分，有些不是。如何列出当前目录中属于存储库的文件？

我知道

```
hg status | grep "\? Path/To/Dir/In/Repo" 
```

获取所有*不*属于存储库的文件，因此我可以反转正则表达式，但是“hg status”在大型存储库上也需要很长时间，因此不需要的解决方案将是理想的。

此外，如果可能，该解决方案不应需要任何扩展。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T22:07:41.407

使用`hg locate`. （`hg help locate`详情...）

`hg locate --include . --exclude ./*/* --fullpath`将列出当前目录中的所有跟踪文件，但不列出任何子目录。如果您不关心完整路径，则可以排除该`--fullpath`标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-23T14:26:34.987

请注意，`hg locate`从 Mercurial 3.2 开始不推荐使用，因此请使用

```
hg files 
```

它采用相同的选项，所以

```
hg files --include . --exclude ./*/* 
```

仍然适用于仅显示当前目录中的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T21:57:56.097

[您可以按照此处](https://stackoverflow.com/questions/3000095/how-to-list-all-files-in-a-repository-in-mercurial-hg)所述获取存储库中所有文件的状态。不幸的是，我不是shell的专家，所以您需要在命令的结果之上进行一些输出处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T09:34:52.023

这对我有用：

```
hg locate --include ./*.* 
```

# sql - 几个表的公共连接

> ID：10840989
> 
> 赞同：1
> 
> 时间：2012-05-31T20:42:49.313
> 
> 标签：sql, oracle, sql-server-2008-r2

我们有几个表，我们的大多数查询只使用几个连接，所以换句话说，我们有几乎每个查询都使用的 2-3 个连接。如果表越来越大，如何加快这种常见连接的最常见方法是什么？我们想使用 SQL Server 或 Oracle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:52:16.523

1.  物化视图 - oracle 支持这些，它们在某些情况下很有用，尤其是。当有很多读取而不是写入时： http: [//docs.oracle.com/cd/B10501_01/server.920/a96520/mv.htm](http://docs.oracle.com/cd/B10501_01/server.920/a96520/mv.htm)

2.  indicies - 分析/解释查询计划，看看添加索引是否有帮助。很多时候，您可以通过为不同的查询设置不同的索引来提高速度。您还可以提供提示来告诉查询解析器将哪个索引用于特定查询。

3.  非规范化 - 将这些表中的一些数据存储在相关表中，而不必加入来获取它。

4.  缓存 - 增加查询缓存的大小，或在应用程序中创建缓存层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:47:23.273

一些选项

*   在您加入的列上放置索引
*   制作索引，以便它们*涵盖*您所追求的数据
*   对您的数据进行非规范化，不需要连接 <= 最大的胜利
*   在 SQL Server 中使用索引视图或在 Oracle 中使用物化视图
*   确保为查询优化器提供它可以获得的最佳统计信息，以便它使用最佳连接策略（散列/合并/循环）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T20:51:00.523

最常见的方法是索引，但您没有提供足够的信息来更具体。

以下是一些场景：

(1) 你有一堆连接到一个中心表的引用表，比如一个事实表。

在这种情况下，您希望在引用表上定义一个自动递增的主键。这会自动用作索引。

(2) 您的查询具有高度选择性

在这种情况下，您希望将索引集中在 where 子句中的字段上。当第二个表非常小时尤其如此，因此顺序搜索类似于索引搜索。

(3) 您的连接表确实是性能瓶颈

在这种情况下，您可能希望将连接的结果实例化为表或实例化视图。当您的连接标准很复杂时（例如在连接标准中使用数据范围），这可能是需要的。

(4) 您还有其他选择，例如对数据进行分区。

# mysql - 我安装了 MySQL，但我无法通过终端访问它

> ID：10840991
> 
> 赞同：0
> 
> 时间：2012-05-31T20:42:58.890
> 
> 标签：mysql, shell, command-line, terminal

我安装了 MySQL，它似乎运行正常：http: [//i.imgur.com/7omrB.png](http://i.imgur.com/7omrB.png)

但是我去终端并没有识别任何 MySQL 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:47:46.263

您需要安装 MySQL 客户端工具。

您可以使用这些工具的命令行版本以及基于 GUI 的工具。

# windows - 如何让 git 停止更改文件中的换行符？

> ID：10840993
> 
> 赞同：11
> 
> 时间：2012-05-31T20:43:15.283
> 
> 标签：windows, eclipse, git, github, egit

我在 Windows 上使用 git/github 和 Eclipse/EGit。有些东西——不确定是 git 还是 EGit——正在通过玩换行符来修改我的文件。

撇开版本控制自己修改文件的奥秘不谈，我该如何配置这个软件，让它永远不会改变我的文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T22:29:41.620

```
git config --system core.autocrlf false
git config --system core.whitespace cr-at-eol 
```

不要让它改变任何东西或在最后报告有问题的 CR 字节。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T20:44:52.863

根据您的操作系统，您有很多选择：

[http://help.github.com/line-endings/](http://help.github.com/line-endings/)

那里解释了看似奇怪的行为的原因。基本上代码是共享的（git 和 github），但操作系统可能不同。由于不同的操作系统对换行的处理方式不同，因此必须做出一些改变......

# php - 我可以通过 node.js 应用程序将 facebook 访问与我的 symfony2 应用程序分离吗？

> ID：10840998
> 
> 赞同：0
> 
> 时间：2012-05-31T20:43:39.807
> 
> 标签：php, facebook, node.js, facebook-graph-api

我有一个 symfony2 前端应用程序，我想通过 node.js 包装 API 委托与 facebook 的所有异步通信，所以如果 facebook 改变了我必须只在 nodejs API 上工作。可能吗？我可以让用户从前端应用程序开始授权应用程序并授予权限，然后让 node.js 应用程序包装与前端应用程序的 facebook API 的所有通信吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:49:45.503

是的，这是可能的。您只需将您为每个 Facebook 用户获取的访问令牌传递给 node.js 包装器 API。