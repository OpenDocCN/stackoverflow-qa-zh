# StackOverflow 问答 11402000-11402999

# css - 相对 DIV 中的 CSS 定位

> ID：11402008
> 
> 赞同：-3
> 
> 时间：2012-07-09T19:43:39.040
> 
> 标签：css, position

如何使页脚中的 Div“PSR-racing-3-slice-17_”始终位于滑块 div 右侧 50 px 处？

如果我绝对定位，那么它会缩小浏览器的大小。

这是[页面](http://psr.mediameans.de)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:54:18.950

试试这个

```
#PSR-racing-3-slice-17_ {
    width: 1115px;
    height: 132px;
    display: block;
    margin: auto;
}

#PSR-racing-3-slice-17_ img {
    float: right;
    margin-top: -90px;
} 
```

更改`margin-top`为您认为正确的任何内容。

# ios - UITouch 在使用 MPMoviePlayerController 的视图后被阻止

> ID：11402014
> 
> 赞同：0
> 
> 时间：2012-07-09T19:44:09.467
> 
> 标签：ios, uiview, mpmovieplayercontroller, uitouch

我`UIButton`在屏幕的左上方有一个。使用 iOS 模拟器，我可以轻松触摸到按钮最左上角的最远部分。它按预期工作：

![在此处输入图像描述](../Images/32681e0434d8da1f8df52dcf4eff2ef8.png)

但是使用后`MPMoviePlayerController`，在该区域按下按钮不起作用！（可以有点大/小）。听起来很疯狂！

`MPMoviePlayerController`代码：

```
if (!_player) {
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];        

    NSError *setCategoryErr = nil;
    NSError *activationErr  = nil;
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryErr];
    [[AVAudioSession sharedInstance] setActive: YES error: &activationErr];

    VCRoot* root = [[ApplicationManager sharedManager] rootViewController];

    _player = [[MPMoviePlayerController alloc] init];
    _player.movieSourceType = MPMovieSourceTypeStreaming;
    _player.view.hidden = YES;
    [root.view addSubview:_player.view];

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(moviePlayerStateChanged:) 
                                                 name:MPMoviePlayerLoadStateDidChangeNotification 
                                               object:nil];
} else {
    [_player stop];
}

_player.contentURL = [channel url];

[_player setInitialPlaybackTime:-1.0];
[_player play]; 
```

笔记：

我尝试添加`_player.view`using `insertSubview: AtIndex:0`，尝试过`setIsUserInteractionEnabled = NO`，尝试过`setAlpha = 0.f`，都没有用..我什至将它添加为不同视图的子视图。

然而：

当我停止播放器并移除视图时，该区域再次可触摸:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:56:51.133

在我尝试过的所有事情中......最后：

`_player.view.frame = CGRectMake(-100, -100, 1.f, 1.f);`

工作！

# string - Scala在字符串中查找字符串的位置

> ID：11402018
> 
> 赞同：5
> 
> 时间：2012-07-09T19:44:42.610
> 
> 标签：string, scala

我有这个字符串：

```
var htmlString; 
```

分配给：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<html>
<head>
<title>Payment Receipt</title>
<link rel="stylesheet" type="text/css" href="content/PaymentForm.css">
<style type="text/css">
</style>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
</head>
<body>
<div id="divPageOuter" class="PageOuter">
    <div id="divPage" class="Page">
        <!--[1]-->
        <div id="divThankYou">
             Thank you for your order!
        </div>
        <hr class="HrTop">
        <div id="divReceiptMsg">
             You may print this receipt page for your records.
        </div>
        <div class="SectionBar">
             Order Information
        </div>
        <table id="tablePaymentDetails1Rcpt">
        <tr>
            <td class="LabelColInfo1R">
                 Merchant:
            </td>
            <td class="DataColInfo1R">
                <!--Merchant.val-->
                Ryan
                <!--end-->
            </td>
        </tr>
        <tr>
            <td class="LabelColInfo1R">
                 Description:
            </td>
            <td class="DataColInfo1R">
                <!--x_description.val-->
                Rasmussenpayment
                <!--end-->
            </td>
        </tr>
        </table>
        <table id="tablePaymentDetails2Rcpt" cellspacing="0" cellpadding="0">
        <tr>
            <td id="tdPaymentDetails2Rcpt1">
                <table>
                <tr>
                    <td class="LabelColInfo1R">
                         Date/Time:
                    </td>
                    <td class="DataColInfo1R">
                        <!--Date/Time.val-->
                        09-Jul-2012 12:26:46 PM PT
                        <!--end-->
                    </td>
                </tr>
                <tr>
                    <td class="LabelColInfo1R">
                         Customer ID:
                    </td>
                    <td class="DataColInfo1R">
                        <!--x_cust_id.val-->
                        <!--end-->
                    </td>
                </tr>
                </table>
            </td>
            <td id="tdPaymentDetails2Rcpt2">
                <table>
                <tr>
                    <td class="LabelColInfo1R">
                         Invoice Number:
                    </td>
                    <td class="DataColInfo1R">
                        <!--x_invoice_num.val-->
                        176966244
                        <!--end-->
                    </td>
                </tr>
                </table>
            </td>
        </tr>
        </table>
        <hr id="hrBillingShippingBefore">
        <table id="tableBillingShipping">
        <tr>
            <td id="tdBillingInformation">
                <div class="Label">
                     Billing Information
                </div>
                <div id="divBillingInformation">
                     Test14 Rasmussen<br>
                    1234 test st<br>
                    San Diego, CA 92107 <br>
                </div>
            </td>
            <td id="tdShippingInformation">
                <div class="Label">
                     Shipping Information
                </div>
                <div id="divShippingInformation">
                </div>
            </td>
        </tr>
        </table>
        <hr id="hrBillingShippingAfter">
        <div id="divOrderDetailsBottomR">
            <table id="tableOrderDetailsBottom">
            <tr>
                <td class="LabelColTotal">
                     Total:
                </td>
                <td class="DescrColTotal">
                     &nbsp;
                </td>
                <td class="DataColTotal">
                    <!--x_amount.val-->
                    US&nbsp;$250.00
                    <!--end-->
                </td>
            </tr>
            </table>
            <!-- tableOrderDetailsBottom -->
        </div>
        <div id="divOrderDetailsBottomSpacerR">
        </div>
        <div class="SectionBar">
             Visa ****0027
        </div>
        <table class="PaymentSectionTable" cellspacing="0" cellpadding="0">
        <tr>
            <td class="PaymentSection1">
                <table>
                <tr>
                    <td class="LabelColInfo2R">
                         Date/Time:
                    </td>
                    <td class="DataColInfo2R">
                        <!--Date/Time.1.val-->
                        09-Jul-2012 12:26:46 PM PT
                        <!--end-->
                    </td>
                </tr>
                <tr>
                    <td class="LabelColInfo2R">
                         Transaction ID:
                    </td>
                    <td class="DataColInfo2R">
                        <!--Transaction ID.1.val-->
                        2173493354
                        <!--end-->
                    </td>
                </tr>
                <tr>
                    <td class="LabelColInfo2R">
                        Authorization Code:
                    </td>
                    <td class="DataColInfo2R">
                        <!--x_auth_code.1.val-->
                        07I3DH
                        <!--end-->
                    </td>
                </tr>
                <tr>
                    <td class="LabelColInfo2R">
                         Payment Method:
                    </td>
                    <td class="DataColInfo2R">
                        <!--x_method.1.val-->
                        Visa ****0027
                        <!--end-->
                    </td>
                </tr>
                </table>
            </td>
            <td class="PaymentSection2">
                <table>
                </table>
            </td>
        </tr>
        </table>
        <div class="PaymentSectionSpacer">
        </div>
    </div>
    <!-- entire BODY -->
</div>
<div class="PageAfter">
</div>
</body>
</html> 
```

我想`"x_auth_code.1.val"`在字符串中找到 的位置。然后我想从该位置获取一个字符串加上一定数量的字符。目标是返回授权码。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T19:58:31.960

您可以使用`indexOfSlice`, 然后`slice()`在[StringOps](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.StringOps)

```
scala> val myString = "Hello World!"
myString: java.lang.String = Hello World!

scala> val index = myString.indexOfSlice("Wo")
index: Int = 6

scala> val slice = myString.slice(index, index+5)
slice: String = World 
```

使用您的 html 字符串：

```
scala> htmlString.indexOfSlice("x_auth_code.1.val")
res4: Int = 2771 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:13:35.330

为什么不使用 XML 解析器？不要将 XML 视为字符串——如果这样做，你会被咬。

这是一个正则表达式，但我的建议是：不要使用它！使用 xml 工具。

```
"""\Qx_auth_code.1.val\E[^>]*>([^<]*)""".r.findFirstMatchIn(htmlString).map(_ group 1) 
```

# sql - sql 选择 3 列并对两列进行重复数据删除

> ID：11402025
> 
> 赞同：1
> 
> 时间：2012-07-09T19:45:18.443
> 
> 标签：sql, sql-server, sql-server-2008, duplicate-removal

我有一个作业设置，当前从不包含唯一索引的表中选择记录。我意识到这可以通过在表和相关列上放置一个索引来解决，但是在这种情况下出于测试目的，我需要删除索引，然后执行一个选择，这也将删除基于 2 列的重复项：

```
SELECT DISTINCT [author], [pubDate], [dateadded]
FROM [Feeds].[dbo].[socialPosts]
WHERE CAST(FLOOR(CAST(dateadded AS float)) AS datetime) > 
                               DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE() - 2), 0)  
AND CAST(FLOOR(CAST(dateadded AS float)) AS datetime) < 
                               DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()), 0) 
```

这会选择前一天的所有记录，我想根据作者和发布日期对记录进行重复数据删除。这可能是一个帖子选择或之前完成，但我们的想法是找出它是否可以在一个选择中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:48:30.087

您可以`GROUP BY`在列上使用 a 和任何聚合函数`dateadded`来获得唯一的`author, pubdate`结果。

```
SELECT  [author]
        ,[pubDate]
        ,MAX([dateadded])
 FROM   [Feeds].[dbo].[socialPosts]
 WHERE  CAST(FLOOR(CAST(dateadded AS float)) AS datetime) >  dateadd(day,datediff(day, 0, getdate()-2), 0)  
        AND CAST(FLOOR(CAST(dateadded AS float)) AS datetime) < dateadd(day,datediff(day, 0, getDate()), 0)
 GROUP BY 
        [author]
        , [pubdate] 
```

# wpf - 动态加载使用具有代码隐藏类型的 XAML

> ID：11402030
> 
> 赞同：0
> 
> 时间：2012-07-09T19:45:27.187
> 
> 标签：wpf, xaml

要动态加载的示例 XAML

```
<Grid xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'     
      xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' 
      xmlns:usercontrols='clr-namespace:App.Views.UserControls'>

         <TextBlock>Why don't you click the button?</TextBlock>

         <usercontrols:SuperButton
         Command="{Binding DataContext.OpenURLNew,RelativeSource=
           {RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}"
         CommandParameter="50">

         ClickMe</usercontrols:SuperButton>
</Grid> 
```

尽管 SuperButton 是在同一个程序集中定义的，但加载此失败并显示“无法加载未知类型的用户控件：超级按钮”。

我猜这是因为 SuperButton 有关联的代码隐藏？有没有办法帮助 XamlReader.Load() 找到它需要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:52:29.657

你正在做的应该工作 - 尝试在`xmlns:usercontrols=''`.

不久前我做了这件事（也许我写的 netGooey 库可能对你有用）。netGooey 将 XAML 动态加载到页面中，并支持用户定义的控件。

我的 XAML 标头如下所示：

`<Grid xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Width="499" Height="579" xmlns:playback="clr-namespace:inlayShared.ui.controls.playback;assembly=inlayShared" xmlns:library="clr-namespace:inlayShared.ui.controls.library;assembly=inlayShared">`

控制使用，如：

`<playback:volumeSlider Maximum="100" Minimum="0" Margin="42,180,62,0" Height="30" VerticalAlignment="Top" TickFrequency="10" TickPlacement="BottomRight" />`

动态 XAML 加载如下：

```
 _gSystem.invokeOnLocalThread((Action)(() =>
            {
                FileStream fileStream = File.OpenRead(_sUIFile);
                DependencyObject dependencyObject = XamlReader.Load(fileStream) as DependencyObject;
                fileStream.Close();

                if (dependencyObject == null)
                    return;

                Content = dependencyObject;
            }), true);` 
```

也许我忘记了让 XAML 注意到自定义控件的一些关键部分，但我很确定它最终会正常工作。

祝你好运。（希望完全限定的更改为您修复它）

[http://inlay.codeplex.com/SourceControl/changeset/view/42822#549758](http://inlay.codeplex.com/SourceControl/changeset/view/42822#549758)

# mongodb - MongoDB + C# 驱动程序 + 地理空间字段查询 - 如何在实体上定义位置属性

> ID：11402033
> 
> 赞同：2
> 
> 时间：2012-07-09T19:45:47.570
> 
> 标签：mongodb, mongodb-.net-driver

我正在运行 2.06 版的 Mongodb 和 10Gen 提供的 C# 驱动程序的 (1.5) 版。

我想在我的一个实体上显示经纬度坐标，以便可以使用 GeoNear 或 Query.WithinCircle 查询实体。

我正在向我的实体添加一个强类型的 Location 对象，然后在我的实体上挂起的 Location 对象上创建一个索引，但我无法让任何 GeoNear 查询工作。

这就是我的 Location 实体的样子。

```
public class Location
{
    [BsonDefaultValue(null)]
    public Nullable<double> lon { get; set; }

    [BsonDefaultValue(null)]
    public Nullable<double> lat { get; set; }  
} 
```

这就是我的实体的外观。

```
 public class SomeEntity
  {
   public string Field1 {get; set;}

   // more fields here...

   public Location Loc {get; set;}
  } 
```

我找到了这个链接[http://www.mongodb.org/display/DOCS/Geospatial+Indexing/](http://www.mongodb.org/display/DOCS/Geospatial+Indexing/) 并看到我的位置字段需要是一个数组。如果使用数组字段而不是 Location 对象，我的实体 SomeEntity 会是什么样子？

我知道这很简单，我就是想不通！:-)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T18:06:24.537

你可以试试这个：

```
public class SomeEntity
{
    public string Field1 {get; set;}

    // more fields here...

   public double[] Loc {get; set;}
} 
```

尽管您现有的类应该可以工作（虽然建议使用数组，但唯一真正的要求是对象由两个数字组成）。我可能不会使用 Nullable<double> 而只是使用 double 代替。

您的地理查询以何种方式不起作用？

# python - 创建表单时Django意外的关键字参数

> ID：11402034
> 
> 赞同：0
> 
> 时间：2012-07-09T19:45:48.070
> 
> 标签：python, django, django-forms

**动机**

我目前正在 django 中创建一个待办事项列表应用程序以供练习。我现在要做的是给“用户”一次提交多个待办事项的选项。为此，我多次显示表单，然后分别从每个表单中检索项目。

**尝试与错误**

这是有问题的表格：

```
class AddItemForm(forms.Form):
    name = forms.CharField(max_length=60, label='Item Name')
    priority = forms.IntegerField(required=False,
            widget=forms.Select(choices=Item.PRIORITY))
    due_date = forms.DateTimeField(required=False, label='Due Date') 
```

但是，当我尝试使用关键字参数创建表单时（感兴趣的行在 for 循环中）：

```
def add_item(request):
    if request.method == 'POST':
        r = request.POST
        names = r.getlist('name')
        priorities = r.getlist('priority')
        due_dates = r.getlist('due_date')
        for i in xrange(len(names)):
            form = AddItemForm(
                       name=names[i],
                       priority=priorities[i],
                       due_date=due_dates[i],
                   )
            if form.is_valid():
                item = form.cleaned_data
                Item.objects.create(**item) 
        return HttpResponseRedirect('/todo')

    form = AddItemForm()
    try:
        num_items = xrange(int(request.GET.get('n', 1)))
    except ValueError:
        num_items = xrange(1)
    return render(request, 'add_item.html', 
            {'form': form, 'num_items': num_items}) 
```

我收到以下错误消息：

```
Exception Type: TypeError
Exception Value:    
__init__() got an unexpected keyword argument 'priority' 
```

我不明白发生了什么，因为我确实*优先*作为 AddItemForm 中的一个字段。

**HTML**

如果有帮助，这里是模板 html：

```
<!DOCTYPE html>
<html>
  <head> <title>Add item</title> </head>
  <body>
    <form method="post">{% csrf_token %}
      {% for i in num_items %}
        <div>{{ form }}</div>
      {% endfor %}
      <input type="submit">
    </form>

    <br><br>
    <form action="/todo" method="get">
      <input type="submit" value="Go back to To-Do List">
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:58:25.393

好吧，这不是表单的工作方式。您不应该首先处理 POST 参数，并且您不能将单个字段的数据作为这样的参数传递。您只是应该按原样传递`request.POST`到表单实例化中。

做一组多个相同表单的方法是使用[formset](https://docs.djangoproject.com/en/1.4/topics/forms/formsets/)。然后，您可以将 POST 数据直接传递到 formset 实例化中，并获取经过验证的表单。

请注意，由于您的表单被用于创建模型实例，您可能需要考虑使用模型表单[（](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)和模型表单集，在同一页面上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T08:10:42.767

Django 表单。**init** () 接受一个 'initial' 关键字参数，您可以通过以下方式设置表单的初始值：

```
form = AddItemForm(initial = {
                      'name':names[i],
                      'priority':priorities[i],
                      'due_date':due_dates[i],
                   }
               ) 
```

# sql-server - 为什么无论前面的 IF 语句的结果如何，插入语句总是会触发？

> ID：11402036
> 
> 赞同：1
> 
> 时间：2012-07-09T19:46:00.223
> 
> 标签：sql-server, tsql

我正在使用 SQL Server 2005 数据库，并且我有一个 If 语句，它针对同一数据集以两种不同的方式运行，具体取决于要在 begin...end 块中采取的操作。

首先，如果我只想打印到控制台，下面的代码不会像预期的那样打印任何内容：

```
if (not exists(select null from tblControls where Name = 'SOME_CONTROL_NAME'))
begin
  print 'control not found'
end 
```

而此代码按预期打印“找到控制”：

```
if (exists(select null from tblControls where Name = 'SOME_CONTROL_NAME'))
begin
  print 'control found'
end 
```

但是，如果我将代码更改为：

```
if (not exists(select null from tblControls where Name = 'SOME_CONTROL_NAME'))
begin
  insert into tblControls values (632, 'NEW_CONTROL_NAME', 'New Control', 1, 1, NULL, 1, 'DataControls.CheckBox', NULL, NULL, 1) 
end 
```

即使 tblControls 中存在匹配的记录，插入语句也总是会触发。T-SQL 2005 中的插入语句有什么特别之处可能导致这种行为，还是我遗漏了一些明显的东西？我会理解代码的逻辑是否错误，但是当我使用 print 语句进行测试时，它会按预期工作。

编辑：它生成“插入错误”消息。

非常感谢您对这个令人沮丧的问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:48:48.917

Exists 中的 NULL..Select 让人困惑。尝试：

```
if (not exists(select * from tblControls where Name = 'SOME_CONTROL_NAME'))
begin
  insert into tblControls values (632, 'NEW_CONTROL_NAME', 'New Control', 1, 1, NULL, 1, 'DataControls.CheckBox', NULL, NULL, 1) 
end 
```

此外，它可以在没有括号和 Begin/End 的情况下重写：

```
IF NOT EXISTS (SELECT * FROM tblControls WHERE Name = 'SOME_CONTROL_NAME') 
  INSERT INTO tblControls VALUES (632, 'NEW_CONTROL_NAME', 'New Control', 1, 1, NULL, 1, 'DataControls.CheckBox', NULL, NULL, 1) 
```

# javascript - 从 HIGHCHART 中删除零

> ID：11402047
> 
> 赞同：7
> 
> 时间：2012-07-09T19:46:37.040
> 
> 标签：javascript, highcharts

我一直在研究 Highcharts 刚刚遇到一个问题，问题是当图表上的某些数据不存在任何值时，它会在其上显示 0，这看起来很糟糕，请查看以下 jsfiddle 图表上的标签由以下函数，但我无法检查它是否应仅显示图表上值高于零的那些条

[http://jsfiddle.net/CzHyC/3/](http://jsfiddle.net/CzHyC/3/) [请检查图表上的苹果部分]

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'Stacked column chart'
            },
            xAxis: {
                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Total fruit consumption'
                },
                stackLabels: {
                    enabled: true,
                    style: {
                        fontWeight: 'bold',
                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'blue'
                    }
                }
            },
            legend: {
                align: 'right',
                x: -100,
                verticalAlign: 'top',
                y: 20,
                floating: true,
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'gray',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.x +'</b><br/>'+
                        this.series.name +': '+ this.y +'<br/>'+
                        'Total: '+ this.point.stackTotal;
                }
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                    }
                }
            },
            series: [{
                name: 'John',
                data: [0, 3, 4, 7, 2]
            }, {
                name: 'Jane',
                data: [2, 2, 3, 2, 1]
            }, {
                name: 'Joe',
                data: [3, 4, 4, 2, 5]
            }]
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-09T19:52:56.183

这就是我处理这种情况的方式。

创建数据点时，不要放置 0，而是放置空值。

例如，您的数据数组将如下所示：

`[null,3,4,7,2]`代替`[0,3,4,7,2]`

[小提琴](http://jsfiddle.net/CzHyC/8/)

# android - android中的getStringArrayList（key）生成空结果

> ID：11402050
> 
> 赞同：0
> 
> 时间：2012-07-09T19:46:50.417
> 
> 标签：android, android-activity, null, next

当我单击提交按钮时，接下来是活动启动，但在文本视图中，它会在以下代码上生成空结果。

我想将用户详细信息存储到一个 ArrayList 中，它应该传递给另一个活动并单独显示，甚至作为一个组显示。

甲级

```
ArrayList<String> fieldText = new ArrayList<String>();
   Intent i1; Bundle bnd1;

btSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                i1 = new Intent(WidgetDemo1Activity.this, Welcome.class);

                getDetails();

                startActivityForResult(i1,0);

            }
        });

public void getDetails(){
        fieldText.add(0, etuname.getText().toString());
        fieldText.add(1, etpass.getText().toString());
        //i1.putExtra("uname", etuname.getText().toString());
        //i1.putExtra("pass", etpass.getText().toString());
        bnd1 = new Bundle();
        //----- adding values of different field to bundle----- 
        //bnd1.putString("uname", etuname.getText().toString());
        //bnd1.putString("pass", etpass.getText().toString());
        bnd1.putStringArrayList("data", fieldText);
        i1.putExtras(bnd1);

        } 
```

B类

```
tv1= (TextView) findViewById(R.id.txtView);
tv1.setText("Welcome "+ getIntent().getExtras().getStringArrayList("uname")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:48:30.197

利用

```
 ArrayList<String> arry=new ArrayList<String>();
 arry= getIntent().getExtras().getStringArrayList("data"); 
```

代替

```
tv1.setText("Welcome "+ getIntent().getExtras().getStringArrayList("uname")); 
```

因为您从第一个活动中`data`作为键传递并`uname`从第二个活动 中提取

* * *

**编辑：**

您也可以尝试在 Second Activity 中提取 ArrayList ：

```
Bundle bundle = this.getIntent().getExtras();
ArrayList<String> fieldText = new ArrayList<String>();

if(bundle !=null)
{
  fieldText = bundle.getStringArrayList("data"); 
}
else
{

} 
```

因为你正在传递`ArrayList`而`Bundle`不是`Intent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:50:02.050

您用于从包中查找的密钥不同。使用类似下面的东西。

```
tv1.setText("Welcome "+ getIntent().getExtras().getStringArrayList("data")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:21:48.510

A 类........

```
ArrayList<String> fieldText = new ArrayList<String>();
   Intent i1; Bundle bnd1;

btSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                i1 = new Intent(WidgetDemo1Activity.this, Welcome.class);

                getDetails();

                startActivityForResult(i1,0);

            }
        });

public void getDetails(){
        fieldText.add(0, etuname.getText().toString());
        fieldText.add(1, etpass.getText().toString());
        //i1.putExtra("uname", etuname.getText().toString());
        //i1.putExtra("pass", etpass.getText().toString());
        bnd1 = new Bundle();
        //----- adding values of different field to bundle----- 
        //bnd1.putString("uname", etuname.getText().toString());
        //bnd1.putString("pass", etpass.getText().toString());
        bnd1.putStringArrayList("data", fieldText);
        i1.putExtras(bnd1);

        } 
```

B类.......

```
TextView tv1;
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.welcome);

        ArrayList<String> al= new ArrayList<String>();
        al = getIntent().getExtras().getStringArrayList("data");
        tv1= (TextView) findViewById(R.id.txtView);

        tv1.setText("Welcome "+ al.get(0)); // get string at 0 index 

    } 
```

# magento - 获取设置模型

> ID：11402051
> 
> 赞同：0
> 
> 时间：2012-07-09T19:46:59.113
> 
> 标签：magento

我想在界面中用magento创建新表，而不继承设置类。我试图获取设置的资源模型。这没有用：

```
require_once 'app/Mage.php';
Mage::init();

$setup = Mage::getResourceModel('catalog/setup'); 
```

我也在考虑，`Mage::getResourceModel('core/resource_setup')`但我有一个错误：`Fatal error: Call to a member function startSetup() on a non-object in C:\xampp\ htdocs\LPP_MAGENTO_EE_CUSTOM\app\code\core\Mage\Core\Model\Resource\Setup.php on line 944`

你有什么主意吗？（我看到了[这个问题](https://stackoverflow.com/questions/6759341/magento-use-setup-model-out-of-magento/11396693#11396693)，但它对我不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:32:40.947

我使用`$setup = Mage::getModel('eav/entity_setup', 'core_setup')`示例在我的代码中为 Category 创建新属性：

```
require_once 'app/Mage.php';
Mage::init();
$setup = Mage::getModel('eav/entity_setup', 'core_setup');

$setup->addAttribute('catalog_category', 'xxx', array(
...
)); 
```

# cocos2d-iphone - Cocos2D iPhone：让精灵淡入其他精灵

> ID：11402055
> 
> 赞同：1
> 
> 时间：2012-07-09T19:47:11.320
> 
> 标签：cocos2d-iphone, sprite, transition, fade

在我的游戏中，我想要一个带有灰色精灵的场景。两秒钟后，我希望精灵淡入白色（或淡入白色的精灵形式）。

这有点像 CSS3 过渡属性，其中一个东西可以淡入另一种颜色。这在 Cocos2D 中怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:26:04.953

查看 CCFadeIn/CCFadeOut 动作，您可以将其应用于精灵以获得您想要的效果。

# c++ - memset 与零长度参数一起使用：忽略还是小心？

> ID：11402058
> 
> 赞同：7
> 
> 时间：2012-07-09T19:47:15.863
> 
> 标签：c++, warnings

链接动态库时，我无法找到有关以下警告的任何信息：

```
In function `MyClass::myfunc()':
MyClass.cpp:(.text+0x14e4): warning: memset used with constant zero length parameter; this could be due to transposed parameters 
```

以下是以下内容的摘录`myfunc`：

```
void MyClass::myfunc() {
    vector<Variable*>::const_iterator it;

    for (it = m_vars.begin();
         it != m_vars.end();
         ++it) {
        if ((*it)->recordme) {
            MyRecord* r = new MyRecord(*it);
            initMyRecord(*r);
            m_records.push_back(r);
        }
    }
} 
```

因此，如果我应该为这个 memset 寻找可能的原因，我几乎就被困住了。打电话给新接线员是我的第一个嫌疑人，但我什至不确定它是否值得寻找。我不确定我是应该认真对待这个警告还是让它过去。

问题：我应该怎么处理这个警告？我应该注意什么样的模式以确保我以后不会射中自己的脚？

更新：这是 MyRecord 构造函数，它位于头文件中，因此如果我理解正确，它可能会或可能不会被内联。

```
class MyRecord {
public:
    MyRecord(const Variable* var) :
        buffer(0),
        lastSave(-1 * std::numeric_limits<double>::max()),
        sample(100),
        bufsize(100),
        gv(var),
        rec_function(0)
    {};
    virtual ~Record() {
        if (rec_function)
            delete rec_function;
        rec_function = 0;
    };

private:
    Record(const Record&);
    Record& operator=(const Record& rec);

public: // @todo: remove publicness
    boost::circular_buffer< boost::tuple<double,boost::any> > buffer;
    double lastSave;
    double sample;
    unsigned int bufsize;
    const Variable* gv;
    RecordFunctor* rec_function;
}; 
```

RecordFunctor 是一个纯虚拟结构：

```
struct RecordFunctor {
    virtual ~RecordFunctor() {};
    virtual void record(const double) = 0;
}; 
```

附加信息？我正在使用标志`-O2`和 g++ (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1进行编译

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T20:18:10.880

只要指针参数是有效的，`memset()`大小为 的函数的行为是明确定义的。`0`

请参阅 C99 标准的第 7.21.1 节或 C11 标准的第 7.24.1 节：

> 如果声明为**size_t n**的参数指定函数数组的长度，则 n 在调用该函数时可以具有零值。

另一方面，警告是明智的。像这样的调用`memset(s, 0, 0)`并不危险，但它没有用（它什么都不做），并且很容易指示编程错误。

格雷格的回答解释了在这种情况下如何避免它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T20:11:38.667

您正在使用0 调用[`boost::circular_buffer`构造函数](http://www.boost.org/doc/libs/1_50_0/libs/circular_buffer/doc/circular_buffer.html#classboost_1_1circular__buffer_18f1606a26fead923c2cbe068a74e28b6)`capacity`。这可能会导致该构造函数调用`memset()`以初始化循环缓冲区使用的存储，但您已经告诉它您想要一个大小为零的缓冲区。

解决方案是给`circular_buffer`构造函数你想要的实际大小，而不是零（零没有意义）。

# javascript - 在选择元素上使用jqtransform时如何设置选择的选项

> ID：11402060
> 
> 赞同：3
> 
> 时间：2012-07-09T19:47:31.357
> 
> 标签：javascript, jquery, asp.net, jqtransform

在选择元素上使用 jqtransform 时如何设置选择的选项。

我将 jqtransform 用于我的表单，并且我想设置适当的选项值以在我从数据库中检索保存的数据时选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T19:51:36.897

我相信您会以与不使用 jqTransform 相同的方式设置 select 的值。

例如

```
$('#mySelect').val('myVal'); 
```

**编辑：**

好吧，这真的很难看，但应该可以：

```
var mySelect = $('#mySelect');

//find the current selected option
var myOption = mySelect.find('option[value='+mySelect.val()+']');

//find the index of that option
var index = $('#mySelect option').index(myOption);

//trigger the click on the corresponding jqTranfsform element
mySelect.prev('ul').find('li').eq(index).find('a').click(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:41:32.173

您可以调用 onchange 事件。jqtransform 有 change() 方法。

```
$('#mySelect').val('myVal').trigger('change'); 
```

有用 ：）

# image - 在 Photoshop 中增加 DPI

> ID：11402065
> 
> 赞同：-1
> 
> 时间：2012-07-09T19:47:51.157
> 
> 标签：image, photoshop, dpi

我对 Photoshop 完全陌生，我需要做一些我不知道该怎么做的事情。

我得到了一张 100 dpi 的图片。我们希望这张照片印在海报上。我需要将 100 dpi 增加到 300 dpi。

在 Photoshop 中，我选择了图像/图像大小。我取消选中“重新采样图像”，将 100 像素/英寸切换为 300，但文档大小已减小。问题是我不想改变海报大小。“文档尺寸”是否与海报尺寸相同？如果是，我应该怎么做才能从 100dpi 增加到 300dpi 来保存实际尺寸？将图像大小从 3 倍增加是更好的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:54:05.327

尽管 Photoshop 具有强大的功能，但其核心仍然是光栅图像编辑器。DPI 设置只是一个转换因素。如果您想要更大的图像，则必须增加画布大小，或减少 dpi 设置

例如

```
100x100 image @ 100dpi = 1" x 1" image
100x100 image @ 200dpi  = 0.5" x 0.5" 
```

要“增加打印图像的大小”，您需要减少 dpi 计数，以便

```
100x100 image @ 5dpi = 20" x 20" 
```

# date - 我想从日期条目中删除时间戳和日期线

> ID：11402068
> 
> 赞同：0
> 
> 时间：2012-07-09T19:48:24.163
> 
> 标签：date, merge, timestamp, google-apps-script

我从第三方来源复制并粘贴了邮件合并脚本。它工作得非常好，除了一件事。

当我在表单中输入日期（例如 2012 年 7 月 7 日）时，邮件合并中的脚本会将日期转换为日期线（例如 2012 年 7 月 7 日 00:00:00 GMT）。

我想删除日期之后不必要的日期。你能帮助我吗？

这是与此问题最相关的代码部分： // 设置当前时间戳和时区。timeZone = myVariablesSheet.getRange("B13").getValue(); dateline = myVariablesSheet.getRange("B7").getValue();

```
 if(typeof timeZone == 'undefined' || timeZone == '') {
    timeZone = 'GMT';
  }
  if(typeof dateline == 'undefined' || dateline == '') {
    dateline = Utilities.formatDate(new Date(), timeZone, "EEE, MMM d, ''yy");
  } else {
    dateline = Utilities.formatDate(dateline, timeZone, "EEE, MMM d, ''yy");
  }
  if(debug) Browser.msgBox("dateline = " + dateline + "\ntimeZone = " + timeZone); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T23:29:02.380

我想你在问如何格式化日期。

如果您希望日期格式为 2012 年 7 月 9 日，则需要输入“MMMM d, yyyy”。

像这样：

```
Logger.log(Utilities.formatDate(new Date(), 'PST', 'MMMM d, yyyy')) 
```

# jquery - symfony 创建和验证动态表格

> ID：11402071
> 
> 赞同：0
> 
> 时间：2012-07-09T19:48:36.863
> 
> 标签：jquery, validation, symfony1, symfony-1.4, symfony-forms

我想创建一个输入类型文本字段的动态表格。在点击最后一行后，应该会出现一个具有相同输入类型文本字段的新行，并且来自服务器端的验证也应该起作用。我该怎么做？有代码示例吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:52:57.620

你在谈论这样的事情吗？

![在此处输入图像描述](../Images/69c0bac4514dd528614c7b407b9a37ec.png)

检查[这篇文章](http://www.thatsquality.com/articles/stretching-sfform-with-dynamic-elements-ajax-a-love-story)。

**编辑：**

它使用 Propel，正如您可能注意到的`TodoPeer`. 所以：

```
foreach(TodoPeer::doSelect(new Criteria()) as $todo)
{
  $todoWrapperForm->embedForm($todo->getId(), new TodoForm($todo));
} 
```

只是`SELECT * FROM todo`将所有待办事项形式嵌入到主要形式中的基础。与教义：

```
$todos = Doctrine_Core::getTable('Todo')->findAll();
foreach($todos as $todo)
{
  $todoWrapperForm->embedForm($todo->getId(), new TodoForm($todo));
} 
```

# ruby-on-rails - 使用 rails 循环遍历哈希数组

> ID：11402074
> 
> 赞同：0
> 
> 时间：2012-07-09T19:48:41.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, loops

所以我试图从这一系列哈希中获取所有*高中*和*研究生院：*

```
"education": [
    {
      "school": {
        "id": "110703012290674", 
        "name": "Kunskapsgymnasiet Malmö"
      }, 
      "year": {
        "id": "136328419721520", 
        "name": "2009"
      }, 
      "type": "High School"
    }, 
    {
      "school": {
        "id": "112812485399398", 
        "name": "Malmö University"
      }, 
      "year": {
        "id": "118118634930920", 
        "name": "2012"
      }, 
      "concentration": [
        {
          "id": "104076956295773", 
          "name": "Computer Science"
        }
      ], 
      "type": "Graduate School", 
      "classes": [
        {
          "id": "165093923542525", 
          "name": "Programmering", 
          "description": "Kursen fokuserar på metoder och tekniker vid utveckling av webbapplikationer med hjälp av HTML5."
        }
      ]
    }
  ], 
```

像这样：

```
if auth["extra"]["raw_info"]["education"]  

        # hash/array element 0
        if auth["extra"]["raw_info"]["education"][0]["type"] == "High School" 
          user.highschool_name = auth["extra"]["raw_info"]["education"][0]["school"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][0]["school"].blank?)
          user.highschool_year = auth["extra"]["raw_info"]["education"][0]["year"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][0]["year"].blank?)

        elsif auth["extra"]["raw_info"]["education"][0]["type"] == "Graduate School"
          user.graduateschool_name = auth["extra"]["raw_info"]["education"][0]["school"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][0]["school"].blank?)
          user.graduateschool_year = auth["extra"]["raw_info"]["education"][0]["year"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][0]["year"].blank?)
        end

        # hash/array element 1 
        if auth["extra"]["raw_info"]["education"][1]["type"] == "High School"
          user.highschool_name = auth["extra"]["raw_info"]["education"][1]["school"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][1]["school"].blank?)
          user.highschool_year = auth["extra"]["raw_info"]["education"][1]["year"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][1]["year"].blank?)

        elsif auth["extra"]["raw_info"]["education"][1]["type"] == "Graduate School"        
          user.graduateschool_name = auth["extra"]["raw_info"]["education"][1]["school"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][1]["school"].blank?)
          user.graduateschool_year = auth["extra"]["raw_info"]["education"][1]["year"]["name"] if (!auth["extra"].blank? && !auth["extra"]["raw_info"]["education"][1]["year"].blank?)
        end
      end 
```

有没有更有效的方法来做到这一点，比如某种循环？有什么好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:54:49.783

是的，确切地说，您应该使用循环。似乎你想要这样的东西：

```
if edu = auth["extra"]["raw_info"]["education"]  
  edu.each do |e|
    if e["type"] == "High School" 
      user.highschool_name = e["school"]["name"] if (!auth["extra"].blank? && !e["school"].blank?)
      user.highschool_year = e["year"]["name"] if (!auth["extra"].blank? && !e["year"].blank?)
    elsif e["type"] == "Graduate School"
      user.graduateschool_name = e["school"]["name"] if (!auth["extra"].blank? && !e["school"].blank?)
      user.graduateschool_year = e["year"]["name"] if (!auth["extra"].blank? && !e["year"].blank?)
    end
  end
end 
```

### 更新

好的，这是更简单的版本（基于 tokland 的建议）。

```
if (auth["extra"]["raw_info"]["education"] || []).each do |e|

  nameprop, yearprop = if e["type"] == "High School"
    [:highschool_name, :highschool_year]
  elsif e["type"] == "Graduate School"
    [:graduateschool_name, :graduateschool_year]
  end

  user.send("#{nameprop}=", e["school"]["name"]) if !e["school"].blank?
  user.send("#{yearprop}=", e["year"]["name"]) if !e["year"].blank?
end 
```

# javascript - 是否有一个 javascript 库可以帮助我使用 rails 参数命名约定？

> ID：11402076
> 
> 赞同：0
> 
> 时间：2012-07-09T19:48:50.210
> 
> 标签：javascript, ruby-on-rails

我想在我的应用程序中添加一个库，它可以帮助我处理符合 rails 参数命名约定的查询参数。

[http://guides.rubyonrails.org/form_helpers.html#understanding-parameter-naming-conventions](http://guides.rubyonrails.org/form_helpers.html#understanding-parameter-naming-conventions)

如果它可以处理哈希和映射，那将是完美的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:55:56.747

$.param 函数确实是我想要的东西：

```
$.param({category: 'blue', cate:['red', 'green'], gru:{cat: 'brown', mice: 'glue'}}) 
```

生产

```
"category=blue&cate%5B%5D=red&cate%5B%5D=green&gru%5Bcat%5D=brown&gru%5Bmice%5D=glue" 
```

# java - 按钮不启动活动

> ID：11402080
> 
> 赞同：-2
> 
> 时间：2012-07-09T19:49:26.307
> 
> 标签：java, android

现在，我正在对我的 android 模拟器进行强制关闭。

完成此应用程序后，我将要放入一个自定义字段而不是仅进行测试，但现在我只想从 http 活动中显示测试。

任何帮助都会很棒！

主要活动：

```
public class MainActivity extends Activity {

public final static String EXTRA_MESSAGE = "com.example.main.MESSAGE";

/*@SuppressLint("ParserError")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}*/

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private Button searchBtn;

@Override
protected void onCreate(Bundle savedInstance){
    super.onCreate(savedInstance);
    setContentView(R.layout.activity_main);

    searchBtn = (Button) findViewById(R.id.button1);

    searchBtn.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){
            Intent intent = new Intent(null, http.class);
            startActivity(intent);
        }
    });

}   
} 
```

网址：

```
public class http extends Activity {

public http(){
    httpMethod();
}

public void httpMethod(){
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://api.site.com/api/");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
       ;

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

        String test = "hello";

        TextView myTextView = (TextView) findViewById(R.id.myTextView);
        myTextView.setText(test);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
}    
 } 
```

显现：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.example.main.DisplayMessageActivity"/>
    <activity android:name="com.example.main.http"/>
</application>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:52:00.787

代码中有很多问题：

1) `Intent intent = new Intent(null, http.class);`

使用第一个参数作为 MainActivity.class 而不是 null

2）httpActivity应该有`onCreate`（或）`onResume`生命周期活动方法来创建活动`startActivity`

不是但最不重要的是，请花一些时间阅读文档和做示例程序，而不是仅仅输入一些东西并在 SO 上发布。通过解决你所有的问题，就像 SO 社区为你做了你的应用一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T19:54:00.207

开始为：

```
searchBtn.setOnClickListener(new View.OnClickListener(){
        public void onClick(View v){
            Intent intent = new Intent(MainActivity.this, http.class);
            startActivity(intent);
        }
    }); 
```

`null`而不是在意图构造函数中作为第一个参数传递

有关更多信息，请参见此处

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T19:51:32.303

你必须`Intent`像这样初始化

```
Intent intent = new Intent(MainActivity.this, http.class); 
```

您需要`Context`作为第一个参数而不是*null*传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:41:49.440

I trully advice you to read some Android basics beacause you have some issues in the code:

1.  You have a *null* context when you're initializing the intent at the button's listener. You should have: `Intent intent = new Intent(getApplicationContext(), http.class);` or `Intent intent = new Intent(MainActivity.this, http.class);`

2.  You need to create your ativity and set it's content. You must override at least the *onCreate* method.

3.  It's not so important, but its a good practice to write code that anyone might understand instead of write code for the machine! I'm telling this because you have *activity_main* sml file where you define your main activity layout and menu. I suggest you to refractor these file names to something like *main.xml*, for the layout, and *main_mnu.xml*.

# mysql - 用于海量数据的多语言 MySQL 数据库结构

> ID：11402085
> 
> 赞同：1
> 
> 时间：2012-07-09T19:49:55.127
> 
> 标签：mysql, database, localization

我正在寻找一些关于可以处理大量数据的多语言 MySQL 数据库结构的建议。我们目前正在使用以下方法：

```
Articles  <- Article_translations -> Languages
id           id                      id
date         language_id (fk)        locale
category     article_id  (fk)   
             content 
```

好的，可以说我们有 100.000 篇文章和 5 种语言......嗯..你看到了问题。数据越大，数据库越慢（这里只是一个猜测，但是绝对必要的复杂 JOIN 查询可能不是 O(log(n))，而是 O(n^2)）。

我们当前的解决方案是将 Article_translations 拆分为 [locale]_article_translations（例如 en_us_article_translation），在这种情况下，我们需要轻松地同步这些表之间的结构。这是解决这个问题的合适方法还是有更好的方法？如果这是一个好的解决方案，是否有一些东西可以帮助监控变化（只有结构，没有数据同步！）并同步这些结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:00:12.477

你说对了一半，较大的数据会使数据库变慢，但是如果数据库没有良好的设计，即使数据很小，它也会很慢。

我不能告诉你什么是最好的方法或最好的解决方案，记住你需要做很多事情才能找到“最好的解决方案”。我只能向您推荐一些可以帮助您的工具和技巧。

首先，检查你的索引，索引类型，不只是PK和FK，你还需要看看你需要哪种类型的索引，IE，你需要文本索引吗？或哈希树？？？。

还要检查您的引擎、MyISAM 还是 InnoDB？。您说您拆分了表格，请查看有关拆分[的帖子](https://dba.stackexchange.com/questions/11990/splitting-tables-in-mysql-good-practice)。

此外，如果您避免某些事情，您的查询会更快，请`like '%word%'`记住，错误的查询会对响应时间产生巨大影响。

您可以使用`Show create table`or D `escribe select ......`or`explain`查看发生了什么，或使用命令`benchmark`查看您正在应用的函数的大致时间来改进它

MySQL 的一些工具我建议你看看这个程序，它将帮助你提高这部分性能。

*   Mysqlslap（它就像基准，但您可以自定义更多结果）。

*   SysBench（测试 CPU 性能、I/O 性能、互斥争用、内存速度、数据库性能）。

*   Mysqltuner（您可以使用它分析一般统计信息、存储引擎统计信息、性能指标）。

*   mk-query-profiler（执行 SQL 语句分析）。

*   mysqldumpslow（很高兴知道女巫查询会导致问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:14:16.953

假设您是否正确调整查询

*   使用大量数据检查查询执行计划
*   确保您是否将数据库级别参数用作“大型集”而不是行级别
*   看看你是否让你的表非规范化（反之亦然）足够。

尽管我不确定您使用的是哪个版本的 MySQL，但我建议如下

*   在数据库级别分区
*   数据库服务器中的快速硬盘

我建议先使用分区，然后您可能会考虑升级硬盘。

**分区**

分区是数据库级别提供的数据拆分。根据您的查询使用情况，您可以划分数据，例如，在您的案例中按语言划分。使用 DB 分区的好处是

*   它可以由应用程序端的单个表处理
*   取决于数据量和频率，可以按数据库级别重新排列。对应用程序没有影响。

**硬盘质量**

此外，硬盘质量对于处理大量数据也很重要。即使查询被优化，如果您在单个查询中处理大量数据，您需要快速数据访问。但这很昂贵。

# c# - Monotorrent：一些管理器进入停止状态并且从未进入停止状态

> ID：11402086
> 
> 赞同：1
> 
> 时间：2012-07-09T19:49:59.940
> 
> 标签：c#, monotorrent

到底发生了什么？我已经将源代码引入我的项目，希望我可以诊断出这个，​​但我可以使用一些方向。我的印象是停止状态结束了与跟踪器的通信并对种子进行检查。

我已经为 TorrentStateChanged 连接了处理程序，不幸的是它永远不会退出 Stopped 状态，这意味着我不能简单地*停止*torrent 管理器并移动文件。我在网上看到了一些关于它的讨论，但没有任何回应，而且这个项目似乎有点……陈旧。有人对这个问题有任何经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T22:09:19.213

最后花了一些时间寻找解决方案。如果您的 torrent 包含无法连接的跟踪器，MonoTorrent 仍会尝试发送通知，告知我们已停止 torrent。考虑到它在完成之前专门等待响应，这不是一个好主意。

在 class 的构造函数中`StoppingMode`，更改此行：

```
if (manager.TrackerManager.CurrentTracker != null) 
```

对此：

```
if (manager.TrackerManager.CurrentTracker != null && manager.TrackerManager.CurrentTracker.Status == TrackerState.Ok) 
```

# r - 按值拆分 data.frame

> ID：11402088
> 
> 赞同：6
> 
> 时间：2012-07-09T19:50:12.897
> 
> 标签：r, split, dataframe

如何拆分以下 data.frame

```
df <- data.frame(var1 = c("a", 1, 2, 3, "a", 1, 2, 3, 4, 5, 6, "a", 1, 2), var2 = 1:14) 
```

进入/组列表

```
a 1
1 2
2 3
3 4

a 5
1 6
2 7
3 8
4 9
5 10
6 11

a 12
1 13
2 14 
```

所以基本上，第 1 列中的值“a”是我想要拆分数据框的标签/标识符。我知道拆分功能，但这意味着我必须添加另一列，因为从我的示例中可以看出，组的大小可能会有所不同，我不知道如何自动创建这样一个虚拟列以满足我的需要。

有什么想法吗？

干杯，

斯文

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T19:56:46.390

您可以找到索引向量的哪些值等于“a”，然后基于该值创建一个分组变量，然后使用拆分。

```
df[,1] == "a"
# [1]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
#[13] FALSE FALSE
cumsum(df[,1] == "a")
# [1] 1 1 1 1 2 2 2 2 2 2 2 3 3 3
split(df, cumsum(df[,1] == "a"))
#$`1`
#  var1 var2
#1    a    1
#2    1    2
#3    2    3
#4    3    4
#
#$`2`
#   var1 var2
#5     a    5
#6     1    6
#7     2    7
#8     3    8
#9     4    9
#10    5   10
#11    6   11
#
#$`3`
#   var1 var2
#12    a   12
#13    1   13
#14    2   14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:58:59.207

您可以创建一个循环，循环遍历数据框的整个第一列，并将非数字字符的位置保存在向量中。因此，你会有类似的东西：

```
data <- df$var1 #this gives you a vector of the values you'll sort through

positions <- c()

for (i in seq(1:length(data))){
    if (is.numeric(data[i]) == TRUE) {
        #nothing
    }
    else positions <- append(positions, i) #saves the positions of the non-numeric characters
} 
```

有了这些位置，您应该没有问题从那里访问拆分数据框。这只是在位置向量中的值之间使用序列的问题。

# linq-to-entities - Dynamic Linq .Select() - 如何处理某些空值

> ID：11402090
> 
> 赞同：3
> 
> 时间：2012-07-09T19:50:35.000
> 
> 标签：linq-to-entities, dynamic-linq

我将 System.Linq.Dynamic 用于需要用户选择在运行时选择/投影哪些属性的项目。

所以，我有一个这样的查询：

```
var query = db.Users.Select("New(UserId, Username, Groups.Max(DateInserted) AS DateInserted)"); 
```

DateInserted 列不为空，但并非所有用户都有组。因此，当返回没有组的用户时，我收到以下错误：

```
"The cast to value type 'DateTime' failed because the materialized value is null. Either the result type's generic parameter or the query must use a nullable type." 
```

我可以在查询中做些什么吗？我不能使该列可以为空。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:06:05.257

转换为可空类型 DateTime？像这样： `var query = db.Users.Select("New(UserId, Username, DateTime?(Groups.Max(DateInserted)) AS DateInserted)");`

# python - 如何使用python中的DecisionTree模块输入测试数据？

> ID：11402092
> 
> 赞同：0
> 
> 时间：2012-07-09T19:50:37.567
> 
> 标签：python, machine-learning

在 Python DecisionTree 模块主页 ( [DecisionTree-1.6.1](https://engineering.purdue.edu/kak/distDT/DecisionTree-1.6.1.html) ) 上，他们提供了一段示例代码。这里是：

```
dt = DecisionTree( training_datafile = "training.dat", debug1 = 1 )

dt.get_training_data()

dt.show_training_data()

root_node = dt.construct_decision_tree_classifier()

root_node.display_decision_tree(" ")

test_sample = ['exercising=>never', 'smoking=>heavy',
'fatIntake=>heavy', 'videoAddiction=>heavy']
classification = dt.classify(root_node, test_sample)

print "Classification: ", classification 
```

我的问题是：如何从变量中指定样本数据（此处为 test_sample）？在项目主页上，它说：“您通过首先构建一个新的数据向量来对新数据进行分类：”我已经四处搜索，但无法找出数据向量是什么或我的问题的答案。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:12:48.470

嗯，这个例子说明了一切。它是一个字符串列表，其特征和值由“=>”分隔。使用该示例，特征是“锻炼”，其值为“从不”。

# jquery - Jquery 通过两个 attr 值查找

> ID：11402100
> 
> 赞同：6
> 
> 时间：2012-07-09T19:51:13.720
> 
> 标签：jquery

我有带有属性`data-position-x`和`data-position-y`整数值的表格单元格。我想通过`x`和`y`值找到一个特定的单元格。可以在 jQuery 中使用吗？目前我不知道如何将两个谓词传递给构造`$('[data-position-x="0"]');`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T19:53:01.357

只需简单地传递 2 个（或更多）`[]`块来搜索多个属性：

```
$('[data-position-x="0"][data-position-y="0"]'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-09T19:53:18.947

多[属性选择器](http://api.jquery.com/multiple-attribute-selector/)是您正在寻找的：

```
$('[data-position-x="0"][data-position-y="0"]'); 
```

# paypal - PayPal API DoDirectPayment 必填 IP 字段不支持 IPv6

> ID：11402111
> 
> 赞同：1
> 
> 时间：2012-07-09T19:52:04.240
> 
> 标签：paypal

DoDirectPayment API 调用需要一个 IP 地址字段（这是买家的 IP），所以我使用 ServletRequest.getRemoteAddr 来获取请求 IP。但是，此 IP 被假定为 IPv4，并且似乎不支持 IPv6。有没有人找到解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:10:40.893

`IPADDRESS`目前是可选（但推荐）字段。
正在添加对 IPv6 的支持，但尚不可用。
正如[API 文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_DoDirectPayment)所指出的，该`IPADDRESS`字段被记录为检测可能的欺诈的一种手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:38:18.720

PayPal不需要IP地址，所以我不在本地调试模式下发送IP地址。我只发送我们使用 IPv4 的生产模式。

```
DoDirectPaymentRequestDetailsType details = new DoDirectPaymentRequestDetailsType();
#if (!DEBUG)
details.IPAddress = HttpContext.Current.Request.UserHostAddress;
#endif 
```

# c# - 在多个文件中搜索多个字符串的 Grep 工具

> ID：11402113
> 
> 赞同：0
> 
> 时间：2012-07-09T19:52:20.693
> 
> 标签：c#, java, sql, string, grep

我意识到这个论坛上似乎有很多关于在文件中搜索多个字符串的问题，但是我找不到在多个文件中搜索多个字符串的解决方案。

使用管道分隔的搜索结果始终是 OR 语句。我想要的是提供“AND”语句的东西，无论是正则表达式还是允许多个输入的工具。

我尝试过 dnGrep、WinGrep、PowerGrep 和 BareGrep，但似乎没有一个提供此功能。对于那些使用 grep 存储过程的人，我相信你理解我的痛苦。

我正在尝试搜索存储过程中存在共享相同通用列名的几个表并且使用别名表名的情况，这变得非常麻烦，因为我不能简单地搜索 TableName.ColumnName。

如果有人可以帮助我，那就太好了。如果有人知道工具或自己编写了工具，那就太好了。它对于搜索 java 和 c# 代码也很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:40:13.297

I'm assuming you want to find all files in a given directory that contain pattern1, pattern2 and pattern3 then:

```
grep -r -l pattern1 . | xargs grep -l pattern2 | xargs grep -l pattern3 
```

The -r option recurses to check all files. The -l just lists the files that match. The xargs transforms the list of files from the previous grep into input arguments for the next grep. If you have a lot of patterns, you could put this together in a script or fancy alias.

If you want to restrict the search to certain file types, you can use `find` to first restrict the input files:

```
find . -name "*.h" | xargs grep -l pattern1 | xargs grep -l pattern2 | xargs grep -l pattern3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:35:26.160

创建一个批处理文件 search.bat，其中包含以下内容：

```
@echo off
for /F "usebackq delims=|" %%I in (`findstr /M /C:%2 %1`) do findstr /M /C:%3 "%%I" 
```

search.bat 采用三个参数。第一个是通配符文件名。第二个和第三个是搜索字符串。例如，

```
search *.h deprecated security 
```

查找所有包含单词“deprecated”和“security”的头文件。

# android - 列表视图（“刷新”）不起作用

> ID：11402117
> 
> 赞同：0
> 
> 时间：2012-07-09T19:52:37.913
> 
> 标签：android, jquery, html, listview, cordova

我正在使用 Phonegap 和 JQuery 为 Android 开发一个应用程序。它适用于 db Sqlite。

当我动态地将项目添加到列表视图时，css 样式无法正常工作。我尝试以所有可能的方式使用 listview('refresh') 。这是我的代码：

```
 $("#nextDay").click(function(){

    if (opDay < 6){
        opDay=opDay+1;
        db.transaction(queryDB,errorCB);
                $('#SheduleList').html(data);

    }
    else {
        opDay=1;
        db.transaction(queryDB,errorCB);
    }
    $('#SheduleList').listview('refresh');  
   });

    function querySuccess(tx,result){
    //$('#SheduleList').empty();
    $.each(result.rows,function(index){
        var row = result.rows.item(index);
        $('#SheduleList').append('<li id=li'+row['pair_id']+'><a href="#"><h3 class="ui-li-heading">'+row['pair_name']+'</h3><p class="ui-li-desc">'+row['teach_name']+", "+row['Aud_num']+", "+row['time']+'</p></a></li>');
    });

    $("#SheduleList").page();
    $('#SheduleList').listview();

} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:03:03.013

追加完成后为动态填充的容器调用此方法。

作为

```
$("#SheduleList").page() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:21:47.813

它不能通过页面刷新来完成。您必须通过调用重新创建页面数据`$("#index").trigger("pagecreate");`

我这里详细解释了[jquery移动页面注入](https://stackoverflow.com/questions/11096369/jquery-mobile-page-injection/11098639#11098639)

# php - PHP:: 三个结果相同的回显语句

> ID：11402123
> 
> 赞同：1
> 
> 时间：2012-07-09T19:53:02.807
> 
> 标签：php

也许这是一个小问题，但请考虑以下 PHP 代码：

```
$a = "foo1"; $b = "foo2"; $c = "foo3";

echo $a, $b, $c;

echo $a . $b . $c;

echo "$a$b$c"; 
```

这三个语句不是等效的。有什么不同。如果一个人无法决定是使用一个还是另一个怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T19:56:39.770

第一个只是在一次调用中回显 3 个值。另外两个执行字符串连接并输出该操作的结果。换句话说，如果您连续执行数十亿次，第一个版本可能会稍微快一些，因为正在进行的字符串操作更少。

话虽如此，即使您在 PHP 中减少字符串操作，由 echo 语句产生的输出仍将附加到输出缓冲区的末尾，并且填充单个较大的字符串可能比多个较小的字符串更有效。

从总体上看，这些版本中的任何一个版本之间可能几乎没有区别，因此请选择对您最有意义且最容易维护的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:04:28.250

它们大多是等价的，我认为唯一真正的区别在于它的执行方式。如果您使用 php 优化器，这可能变得微不足道或不存在。

如果我猜的话，我会说 echo #1 最快，其次是 echo #2，最后是 echo #3。

为什么我这么说？：

echo #1：直接使用语言结构，简单地吐出变量。

echo #2：必须首先将字符串连接在一起，然后将其回显

echo #3：必须首先搜索字符串并将找到的内容替换为变量的内容。这很可能是最昂贵的操作。

**附加说明：** 将字符串放入变量时应始终使用单引号，*除非*您明确希望在内部替换变量。因此你的第一行：

```
$a = "foo1"; $b = "foo2"; $c = "foo3"; 
```

应该：

```
$a = 'foo1'; $b = 'foo2'; $c = 'foo3'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:05:47.583

只是关于第三种方法的说明：

在双引号中使用变量时，我习惯使用大括号，因为它们会转义基于数组的变量：

```
echo "{$a}{$b}{$c}"; 
```

如果`$c`是一个关联数组并且你想输出它的一些元素，那么语句将是：

```
echo "{$a}{$b}{$c['foo']}"; 
```

有时这会导致比将变量和字符串连接在一起输出更整洁的字符串格式。

# java - Spring：如何从 jar 类路径加载 @ContextConfiguration？我得到 FileNotFoundException

> ID：11402127
> 
> 赞同：2
> 
> 时间：2012-07-09T19:53:26.620
> 
> 标签：java, spring

我有一个名为的项目`X`，其`wireup.xml`布局如下：

```
X/
 Module/
       src/
           main/
               resources/
                        com.here/
                                wireup.xml 
```

我 导入`Module`为`project X`_`project Y`

```
 <dependency>
        <groupId>com.org.X</groupId>
        <artifactId>Module</artifactId>
        <version>master-SNAPSHOT</version>
    </dependency> 
```

现在在测试中我想要 bean `wireup.xml`，所以我执行以下操作：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:com/org/X/Module/src/main/resources/com/here/wireup.xml"})
public class MongoSaverTest extends Case {
  @Autowired
  private SomeBeanInWireup variable;
} 
```

但是我在运行测试时遇到错误说

```
Caused by: java.io.FileNotFoundException: class path resource [com/org/X/Module/src/main/resources/com/here/wireup.xml] cannot be opened because it does not exist 
```

我怎样才能解决这个问题？我怎样才能知道正确的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:57:09.877

它应该只是`@ContextConfiguration(locations = {"classpath:com/here/wireup.xml"})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:57:37.803

您的资源的路径是`classpath:com/here/wireup.xml`

# javascript - 好的 JS 错误通知器？

> ID：11402128
> 
> 赞同：0
> 
> 时间：2012-07-09T19:53:26.727
> 
> 标签：javascript

当用户出现 JS 错误时，是否有 JS 插件/服务通知我？

我通常使用 Airbrake.io 的 JS 通知程序，但这只适用于 Ruby 应用程序。我当前的应用程序只是前端 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:57:52.033

这似乎是一个非常聪明的技巧。使用谷歌分析。这里有一篇文章：

[http://www.thetaboard.com/blog/client-side-error-logging-with-google-analytics?r=378](http://www.thetaboard.com/blog/client-side-error-logging-with-google-analytics?r=378)

您必须自定义自己的应用程序，因为它绝不是完美的，但至少它是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:33:49.013

您确定 Airbrake.io 需要 Ruby 应用程序吗？

在[此页面上](http://help.airbrake.io/kb/troubleshooting-2/javascript-notifier)，您可以找到：

> ### 手动插入 JS
> 
> 如果您使用的是其他框架，您可以手动组装此 javascript 以启用 JS 错误跟踪。将它插入到 HTML 的开始“head”标记之后（即在 head 部分中）很重要，这样页面上发生的任何错误都会被 HT JS 通知程序捕获。

[Errorception](http://errorception.com/)还声称会通知 javascript 错误。

免责声明：我没有尝试过任何这些服务。

# apache - VIrtualHost：不同的主机指向同一个位置

> ID：11402129
> 
> 赞同：0
> 
> 时间：2012-07-09T19:53:30.993
> 
> 标签：apache, zend-framework, virtualhost

我正在尝试为两个 Zend Framework 应用程序设置虚拟主机。我从更改`system32 hosts`文件开始。

它现在包含以下几行：

```
127.0.0.1           localhost
#   ::1             localhost
127.0.0.1           quickstart 
```

之后，我继续更改`httpd-vhosts.conf`文件。它的当前内容：

```
<VirtualHost *:80>
    ServerAdmin postmaster@dummy-host2.localhost
    DocumentRoot "G:\workspace\Andrew\ProjManer\public"
    ServerName localhost
    ServerAlias localhost
    ErrorLog "logs/localhost-error.log"
    CustomLog "logs/localhost-access.log" combined
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin postmaster@dummy-host2.localhost
    DocumentRoot "G:\workspace\Andrew\quickstart\public"
    ServerName quickstart
    ServerAlias quickstart
    ErrorLog "logs/quickstart-error.log"
    CustomLog "logs/quickstart-access.log" combined
</VirtualHost> 
```

如果我不先用 localhost 添加虚拟主机，我会得到一个`"Access forbidden 403 Error message"`.
现在的问题是两者都指向同一个位置，即本地主机。我应该如何让第二个虚拟主机工作？我用的`flushdns`也。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T19:57:17.483

您不需要其中的 ServerAlias，除非您想使用 quickstart2 来进行快速入门。在这种情况下，您将执行 ServerAlias quickstart2。您被禁止访问，因为您的 httpd.conf 中的文档根目录没有 index.php 或者虚拟主机没有 index.php 并且您设置了 -Indexes

除此之外，虚拟主机和主机文件看起来不错。尝试重新启动浏览器并重新启动 apache。

# javascript - javascript：制作提交表单并使用鼠标中键的可点击链接

> ID：11402130
> 
> 赞同：0
> 
> 时间：2012-07-09T19:53:35.800
> 
> 标签：javascript, html, forms, post, user-interface

我想要一个提交一些 POST 数据的链接。这有效：

```
<a href="#" onclick="document.forms[0].foo = 42; document.forms[0].submit(); return false">Bar</a> 
```

但是，如果我在这样形成的链接上单击鼠标中键（谷歌浏览器：在新选项卡中打开链接），则该页面不会在新选项卡中打开；而是在当前选项卡中跟踪该链接。这不好，而且启动是意外行为（人们希望中键单击可以在此链接上工作，就像在任何其他链接上一样）。

如何让这个链接更像一个实际的链接，特别是通过让这个中间点击行为像往常一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:55:43.233

您可能必须手动处理 onclick 事件中的逻辑，方法是检测按下的按钮然后采取相应的行为。

# web-services - 用于 jax-ws 2 Web 服务部署的 websphere vs tomcat

> ID：11402133
> 
> 赞同：0
> 
> 时间：2012-07-09T19:53:48.980
> 
> 标签：web-services, tomcat, websphere, jax-ws

我有一项任务需要向基于第三方供应商的 Web 应用程序公开 Web 服务。我可以选择部署 Web 服务的服务器平台（在下面提到的 2 个之间）。我应该部署在 tomcat 6 还是 websphere 6.1 上。在这种情况下，我想开发 JAX-WS 合规性 Web 服务（具有所有注释支持等）。我主要关心的是 - 这两个服务器平台中的哪一个可以更好地扩展我的 Web 服务 - 例如，今天的负载可能只有 300 个事务第二，但在不久的将来可能会增加 3-4 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:15:02.163

[这可能是您必须通过对两台服务器进行一些负载测试](https://stackoverflow.com/questions/351938/load-test-stress-test-web-services)（如果您已经安装了它们）来自己弄清楚的事情。性能问题将始终取决于您对 Web 服务的编码方式以及使用的资源（例如数据库、jms 等）。

一个经过良好调整的 Tomcat 服务器将与经过良好调整的 Websphere 服务器一样执行，因为它只是底层的 JVM。请记住，Websphere 提供了一个完整的 J2EE 堆栈，它将为您提供对 Tomcat 不提供的 J2EE 功能的访问（例如 EJB），它只是一个 servlet 容器。

只要您以可移植的方式编写 Web 服务，如果需要，您将来就可以在 Tomcat 或 Websphere 或 ServerX 之间迁移。可移植性可以通过使用像[Spring 这样的框架和远程服务](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/remoting.html)来实现，这样您就不会被束缚于使用特定供应商的堆栈。

如果您已经对 Websphere 服务器进行了投资，我会继续使用它们。如果您从头开始，为什么不从 Tomcat 开始（它是免费的！）。如果您遇到性能问题，您将不得不考虑使用负载平衡解决方案，并且两台服务器都可以支持此配置。

# jquery - 动态填充的 UL 项目第一次不可点击，之后就好了

> ID：11402137
> 
> 赞同：2
> 
> 时间：2012-07-09T19:54:03.403
> 
> 标签：jquery, dynamic, html-lists

我有一个 jQuery 函数，它接受输入并使用它来过滤链接列表。当输入任何内容时，该函数会清空现有的 UL，然后用新的 LI 元素填充它，每个元素都包含一个链接。这些链接是用 jQuery 的“click”方法连接起来的。

这些生成的链接*是*可点击的，但前提是用户首先点击了输入框之外的页面上的任何其他位置。如果用户在填充列表后立即尝试单击链接，则该链接不起作用。

可能的提示？如果我改为右键单击链接并选择“检查元素”，它会将外部 UL 显示为活动元素，*而不是*我单击的 LI。如果我先单击其他任何位置然后检查元素，则 LI*是*活动元素。

此外，如果我跳过清空 UL 的步骤，而只是附加到现有列表，则所有链接都按预期工作。

无论如何，UL 似乎在新列表被填充后立即“在顶部”这一事实似乎表明了为什么链接没有被点击。因此，问题是*为什么*UL 会收到这样的焦点（或者至少直到页面上的某些东西——任何东西——被点击）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:21:14.107

尝试使用*.on*（以前是*.live*）方法而不是*.click*，这样它会自动连接到任何添加到 DOM 的内容：

```
//instead of:
$('.abc').click(function() { alert('hi'); });

//use this:
$('.abc').on('click', function() { alert('hi'); }); 
```

[jQuery .on()](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T20:13:06.250

您可以模拟单击 UL 元素的父元素（在添加列表项之后），如下所示：

```
$("#idOfUl").parent().click(); 
```

这并不能*真正*解决您的问题 - 这只是一种可能的解决方法。

# jquery - Jquery Carousel 不循环

> ID：11402149
> 
> 赞同：0
> 
> 时间：2012-07-09T19:54:41.643
> 
> 标签：jquery

我目前正在开发一个 jQuery carousel，它在所有浏览器中都可以正常工作，除了最后一项和第一项没有循环创建无限轮播的事实

这是js

```
$(document).ready(function() {
    //move the last list item before the first item. The purpose of this is if the user clicks previous he will be able to see the last item.
    $('#profile-container ul li:first').before($('#profile-container ul li:last'));

    //when user clicks the image for sliding right
    $('#right_scroll img').click(function(){

        //get the width of the items ( i like making the jquery part dynamic, so if you change the width in the css you won't have o change it here too ) '
        var item_width = $('#profile-container ul li').outerWidth() + 20;

        //calculate the new left indent of the unordered list
        var left_indent = parseInt($('#profile-container ul').css('left')) - item_width;

        //make the sliding effect using jquery's animate function
        $('#profile-container ul').animate({'left' : left_indent},{queue:false, duration:500},function() {

            //THIS LINE ISN'T WORKING (it's how the infinite effects is made)
            $('#profile-container ul li:last').after($('#profile-container ul li:first'));

            //THIS LINE ISN'T WORKING
            $('#profile-container ul').css({'left' : '-100px'});
        });
    });

    //when user clicks the image for sliding left
    $('#left_scroll img').click(function(){

        var item_width = $('#profile-container ul li').outerWidth() + 20;

        /* same as for sliding right except that it's current left indent + the item width (for the sliding right it's - item_width) */
        var left_indent = parseInt($('#profile-container ul').css('left')) + item_width;

        $('#profile-container ul').animate({'left' : left_indent},{queue:false, duration:500},function(){

        /* THIS LINE ISN'T WORKING */
        $('#profile-container ul li:first').before($('#profile-container ul li:last'));

        /* THIS LINE ISN'T WORKING /*
        $('#profile-container ul').css({'left' : '-100px'});
        });

    });
}); 
```

出于某种原因，//获取第一个列表项行不起作用。

这是html

```
 <div id="profile-wrapper">
        <div id='left_scroll'><img src="<?php echo get_template_directory_uri(); ?>/library/images/left.png" /></div>  
        <div id="profile-container">
            <ul>
                <li><a href="#" class="profile-image image-1"></a></li>
                <li><a href="#" class="profile-image image-2"></a></li> 
                <li><a href="#" class="profile-image image-3"></a></li>
                <li><a href="#" class="profile-image image-4"></a></li>
                <li><a href="#" class="profile-image image-5"></a></li>
            </ul>
        </div>
        <div id='right_scroll'><img src="<?php echo get_template_directory_uri(); ?>/library/images/right.png" /></div>
    </div> 
```

最后是CSS

```
#profile-wrapper {
display: table;  
margin: 20px auto;
}

#profile-container {
float:left; /* important for inline positioning */  
width: 390px; /* important (this width = width of list item(including margin) * items shown */  
overflow: hidden;  /* important (hide the items outside the div) */ 
}

#profile-container ul {
position: relative;
left: -95px; /* important (this should be negative number of list items width(including margin) */
list-style-type: none; /* removing the default styling for unordered list items */
width:9999px; /* important */
/* non-important styling bellow */
margin-top: 20px;
padding-bottom:10px;
}

#profile-container ul li {
position: relative;
float: left; /* important for inline positioning of the list items */
width:80px;  /* fixed width, important */
/* non-important styling bellow */
background-color: #f5f5f5;
height: 80px;
border-radius: 95px;
-khtml-border-radius: 95px;
-moz-border-radius: 95px;
-webkit-border-radius: 95px;
margin-right: 20px;
z-index: 100;
}

#left_scroll, #right_scroll {
height: 80px; 
width: 80px;
-khtml-border-radius: 95px;
-moz-border-radius: 95px;
-webkit-border-radius: 95px;
position: relative;
z-index: 100;
float: left;
margin: 20px 20px;
}

#left_scroll img, #right_scroll img{
/*styling*/
cursor: pointer;
cursor: hand;
}

.image-1 {
background: url('../../library/images/profiles/1.jpg');
background-position: center;
}

.image-2 {
background: url('../../library/images/profiles/2.jpg');
background-position: center;
}

.image-3 {
background: url('../../library/images/profiles/3.jpg');
background-position: center;
}

.image-4 {
background: url('../../library/images/profiles/4.jpg');
}

.image-5 {
background: url('../../library/images/profiles/5.jpg');
background-position: center;
}

.profile-image {
display: block;
height: 70px;
width: 70px;
position: relative;
top: 5px;
left: 5px;
border-radius: 90px;
-khtml-border-radius: 90px;
-moz-border-radius: 90px;
-webkit-border-radius: 90px;
} 
```

任何输入都会有所帮助...认为我已经涵盖了所有内容。

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:50:56.727

替换以下两个实例：

```
$('#profile-container ul').animate({'left' : left_indent},{queue:false, duration:500},function() { 
```

和：

```
$('#profile-container ul').animate({'left' : left_indent},500,function() { 
```

# ruby-on-rails-3.1 - Rails 3.决定是否保存对象

> ID：11402150
> 
> 赞同：0
> 
> 时间：2012-07-09T19:54:42.060
> 
> 标签：ruby-on-rails-3.1, save

我只是问自己，我的问题的最佳解决方案是什么。

这是我的模型：

```
class Product < ActiveRecord::Base
  has_many :prices, :class_name => "ProductPrice"
  accepts_nested_attributes_for :prices
end

class ProductPrice < ActiveRecord::Base
  belongs_to :product
end 
```

控制器

```
def create
  @product = Product.new(params[:product])

  @product.save
  ...
end 
```

我想要做的是防止所有 ProductPrices 被保存时`product_price.value == nil`或`product_price.value == 0.0`

1.  `before_save`挂钩 ProductPrice。`return false` **将回滚**整个事务，这不是我想要做的。我只想“踢”所有价格`value == 0 or value == nil`
2.  首先踢出所有 price_params`params[...]`然后调用`Product.new(params[:product])`似乎不是轨道方式八...
3.  后`Product.new(params[:product])`遍历所有价格并将它们从数组中删除之后。但逻辑应该在我的模型中，对吗？我只是不想在每一个创造新价格的控制器上重复自己……

有人可以告诉我最好的解决方案吗？什么是铁轨方式？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:03:54.723

What you want it called a validation hook, something like this:

```
class ProductPrice < ActiveRecord::Base
  belongs_to :product

  validates :value, :numericality => {:greater_than => 0.0 }
end 
```

See [http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html) for other ways you may want to do this with finer control.

To avoid adding these invalid prices in the first place, you can remove them from the nested attributes hash like this:

```
class Product < ActiveRecord::Base
  def self.clean_attributes!(product_params)
    product_prices = product_params['prices'] || []
    product_prices.reject!{|price| price['value'].to_f == 0 rescue true }
  end
end

Product.clean_attributes!(params[:product])
Product.new(params[:product]) 
```

# .htaccess - 使用 .htaccess 更改正在显示的 URL，但没有实际重定向内容？

> ID：11402153
> 
> 赞同：4
> 
> 时间：2012-07-09T19:54:59.527
> 
> 标签：.htaccess, mod-rewrite, proxypass

我有一个要更改的 RewriteRule 设置

`http://kn3rdmeister.com/blog/post.php?y=2012&m=07&d=04&id=4`

进入

`http://kn3rdmeister.com/blog/2012/07/04/4.php`

但这实际上重定向了浏览器从中获取页面的位置。我还想显示

`/blog/post.php?y=xxxx&m=xx&d=xx&id=xx`

但让浏览器显示更简单的 URL，例如

`/blog/post/year/month/day/id.php`

我在某处读过一些关于使用 ProxyPass 的文章，但我不太清楚自己在做什么：P

我希望人们能够访问带有查询字符串的 post.php URL，或带有花哨的 shmancy 日期子目录的干净 URL 并获得相同的内容——同时最后显示干净的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:10:30.697

你想要这样的东西：

```
# First if someone actually requests a /blog/post.php URL, redirect them
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /blog/post\.php\?y=([0-9]{4})&m=([0-9]{2})&d=([0-9]{2})&id=([0-9]*)\ HTTP/
RewriteRule ^blog/post\.php$ /blog/%2/%3/%4/%5.php [R=301,L] 
```

这会将浏览器重定向到`/blog/##/##/##/##.php`URI，该 URI 将显示在其地址栏中。一旦它们被重定向，浏览器将发送一个请求，**然后**`/blog/##/##/##/##.php`您的服务器需要在内部将其*重写*：

 **```
# We got pretty URLs, but need to rewrite back to the php request
RewriteRule ^blog/([0-9]{4})/([0-9]{2})/([0-9]{2})/([^\.]+)\.php$ /blog/post.php?y=$1&m=$2&d=$3&id=$4 [L] 
```

这会在内部更改所有内容，以便文件 /blog/post.php 可以处理请求。**

# rest - 分页结果上的 REST 状态代码 204

> ID：11402156
> 
> 赞同：5
> 
> 时间：2012-07-09T19:55:13.963
> 
> 标签：rest, pagination, http-status-codes

我正在设计一个类似 REST 的 API，用于对基于 YUI 的客户端进行分页数据检索。GET 请求的 REST URL 如下所示：

```
/app/catalog/data?startIndex=<int>&results=<int>&sort=<sting>&dir=<string> 
```

所有参数都是可选的，即如果没有给定参数，则数据库中的所有数据都将被转储。现在说数据库中只有 1000 条记录。提出以下要求：

```
/app/catalog/data?startIndex=1100&results=25 
```

如果数据库的分页结果仍然为空，但请求很好，我应该返回什么状态码？！我无法确定这是`204`还是`404`。

生成的媒体类型为 JSON 和 CSV。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T20:01:41.003

我会说 204 是最合适的。请求成功，只是没有结果。

```
10.2.5 204 No Content

The server has fulfilled the request but does not need to return an entity-body, and might want to return updated metainformation. 
```

听上去一模一样。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T20:02:06.920

> 我无法确定这是`204`还是`404`。

两者都不。只需返回`200`一个空结果（空的 XML 文档或 JSON 数组，无论您使用什么）。通常我使用带有分页视图的 REST 服务，因此我会连同结果页面一起返回记录总数。这将帮助客户意识到错误。但从技术上讲，这并没有错。

用于操作（实际上没有要返回的内容）和`204`用于.`DELETE``PUT`

顺便说一句（大胆的我）：

> 如果没有给定参数，将转储**数据库中的所有数据**

相信，你不想这样做...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:00:08.590

您通常以什么格式返回结果？我倾向于让这个 204 甚至 200 返回一个空列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-17T13:35:57.193

由于有效负载，分页响应中的 HTTP 204 是不真实的。分页时，您应该返回分页信息，如返回的项目、总项目、偏移量等，这在 HTTP 204 中是不允许的。

我会使用以下之一：

*   HTTP 200，count=0，返回列表中没有项目。
*   HTTP 400，因为调用者要求的 url 无效
*   HTTP 404，因为找不到要返回的项目

选择最适合您的 API 工作方式的一种。我认为在这种情况下返回错误（4xx + 错误信息）是安全的，因为这些假设之一可能会超出偏移量：

*   编码错误
*   调用者没有从一开始就获取数据（没有新状态）
*   调用者忽略分页数据（出现在每个响应中）

# sql - 如何避免“无法从指定表中删除”。在 MS 访问

> ID：11402157
> 
> 赞同：4
> 
> 时间：2012-07-09T19:55:30.640
> 
> 标签：sql, ms-access, runtime-error, sql-delete

这是我要运行的代码：

```
DELETE DISTINCTROW JHALL_REFERAL_ASSIGNMENTS.emp_id, JHALL_REFERAL_ASSIGNMENTS.ref_elem_id
FROM JHALL_REFERAL_ASSIGNMENTS
WHERE (((JHALL_REFERAL_ASSIGNMENTS.emp_id)=(select  b.emp_id from JHALL_REFERAL_ELEMENT a, JHALL_REFERAL_ASSIGNMENTS b, BSI_MARTS_D_EMPLOYEE c
    where C.FULL_NM = 'Employee'
    and A.REF_NAME ='Max Premium of 5,000'
    and A.REF_ELEM_ID = B.REF_ELEM_ID
    and B.emp_id = C.EMPLOYEE_KEY
)) AND ((JHALL_REFERAL_ASSIGNMENTS.ref_elem_id)=(select  a.ref_elem_id from   JHALL_REFERAL_ELEMENT a, JHALL_REFERAL_ASSIGNMENTS b, BSI_MARTS_D_EMPLOYEE c
    where C.FULL_NM = 'Employee'
    and A.REF_NAME ='Max Premium of 5,000'
    and A.REF_ELEM_ID = B.REF_ELEM_ID
    and B.emp_id = C.EMPLOYEE_KEY
  ))); 
```

每次我尝试在 Access 中运行它时，都会收到错误 3086，“无法从指定的表中删除”。在尝试在线查找信息时，我不断遇到解决方案，说我应该将唯一记录字段更改为“是”，我这样做了，但这并没有解决我的问题。我在 Toad 中运行了相同的代码（用`.`而不是分隔模式和表名），它运行良好。`_`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-17T17:56:51.737

我查看了几篇文章，包括这篇文章，以应付类似的删除。我使用查询将有些复杂的选择标准提炼成一组用于记录删除的表的主键。

在我使用之前，我收到“无法从指定的表中删除”错误和“指定包含要删除的记录的表”错误：

```
delete distinctrow [Target_Table].* 
from [Target_Table] 
inner join [Criteria_Query] 
on [Criteria_Query].Index_PK = [Target_Table].Index_PK
where ( [Criteria_Query].Index_PK = [Target_Table].Index_PK )
; 
```

这在 Access 2013 中有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-18T09:08:05.540

选择子查询中的 ID 并使用 in 在表上运行 delete

```
Delete * from 
tbl_Delete

Where ID in (

Select id form table1
left join ..
left join ...

) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-28T16:39:51.607

这确实是一个令人愤怒的问题，因为即使是上面引用的下面的代码，如果 Criteria_Query 实际上是一个查询而不是表，也会导致“无法从指定的表中删除”错误。

```
delete distinctrow [Target_Table].* 
from [Target_Table] 
inner join [Criteria_Query] 
on [Criteria_Query].Index_PK = [Target_Table].Index_PK
where ( [Criteria_Query].Index_PK = [Target_Table].Index_PK )
; 
```

解决方法是先将select的结果`Criteria_Query`放入一个表中`tbl_Criteria_Query`，然后在`delete`语句中使用该表：

```
select *
into [tbl_Criteria_Query] 
from [Criteria_Query]
;

delete distinctrow [Target_Table].* 
from [Target_Table] 
inner join [tbl_Criteria_Query] 
on [tbl_Criteria_Query].Index_PK = [Target_Table].Index_PK
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T11:57:02.040

只需运行 Visual Studio（以管理员身份运行）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-10T13:44:57.137

使用 MS Access 前端和 SQL Server 后端时，我遇到了同样的错误。我发现如果我在 SQL 中使主键与 Access 中的本地表中的主键相同，问题就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-10T08:08:52.227

以下对我有用`designview->propertysheet->General->set unique records to "yes"`

# c# - InflaterInputStream.Read 导致错误

> ID：11402163
> 
> 赞同：1
> 
> 时间：2012-07-09T19:56:22.173
> 
> 标签：c#, inputstream, sharpziplib

这就是我所拥有的：

```
 byte[] buff = new byte[1];
        byte[] buffer = { 10, 20, 30, 40 };
        Stream data = new MemoryStream();            
        data.Write(buffer, 2, 2);
        data.Position = 0;
        InflaterInputStream _inflater;            
        _inflater = new InflaterInputStream(data);
        int count = _inflater.Read(buff, 0, 1); 
```

它抛出 SharpZipBaseException: Header checksum invalid and unexpected EOF 异常，并且 data.Position 到最后是 2。

谁能告诉我可能是什么问题以及如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:01:19.640

`InflaterInputStream`期望数据采用“deflate”格式。您只写入了两个字节的数据，这不是有效的“放气”文件。

这么说吧——如果你给 WinZip 一些随机的两个字节的 blob 并要求它解压缩，你希望它做什么？

错误消息在这里很清楚：您的文件不够长（意外的 EOF 异常）并且以错误的方式开始文件格式（标题校验和非法）。如有疑问，请始终查看错误消息并考虑*为什么*会收到该错误。

# sql - 将字符串与系统时间进行比较

> ID：11402178
> 
> 赞同：0
> 
> 时间：2012-07-09T19:57:26.720
> 
> 标签：sql, db2

是否可以在 DB2 中进行查询，将文本字段中的值与当前系统日期进行比较？

```
select *   
  from table  
 where DOB < [current system time] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:10:51.263

根据您的问题，我猜您的列的数据格式如下：

'DD/MM/YYYY HH:MI:SS'

如果您使用的是 DB2 9.7 及更高版本，则可以使用 to_date，这很像 Oracle 的 to_date

```
 select 
 *
from
 table where 
 date(to_date(time_stamp,'DD-MM-YYYY HH:MI:SS')) < [current system time] 
```

我没有测试上面的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:52:10.463

我的回答最终是
`WHERE BIRTH_DATE BETWEEN '1800-01-01' AND CURRENT_DATE`

我正在寻找的保留字是 CURRENT_DATE。

# php - MySQL 替代二进制自动增量列？

> ID：11402179
> 
> 赞同：0
> 
> 时间：2012-07-09T19:57:37.660
> 
> 标签：php, mysql, web, binary, auto-increment

MySQL[`auto_increment`](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)允许我们自动创建唯一的主键。

但是，这仅适用于整数列。似乎没有办法`auto_increment`与[`binary`](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)列结合，例如：

```
mysql > create table Users(Id binary(6) auto_increment, primary key(id));

#1063 - Incorrect column specifier for column 'Id' 
```

我们如何创建或实现自增二进制列？

（找到一个保持原子性并具有与`auto_increment`整数列相当的性能的解决方案。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:00:42.410

在每次插入操作之前调用的触发器对事务应该是安全的，并且会完成您想要的。

查看有关触发器的[手册页。](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)

# matlab - MatLab - 9.45 表示和圆形

> ID：11402181
> 
> 赞同：0
> 
> 时间：2012-07-09T19:57:47.070
> 
> 标签：matlab, rounding

```
>> a = 12.5 * 9.45

a =

     1.181250000000000e+02

>> round(a * 100) /100

ans =

     1.181200000000000e+02 
```

四舍五入的值应该是 118.13，而不是 118.12。

如果在 MatLab 命令行中键入 9.45，则无法表示：

```
>> 9.45

ans =

   9.449999999999999 
```

如果我将数字格式设置为short，最终结果是一样的。

```
>> a = 12.5 * 9.45

a =

  118.1250

>> round(a * 100) / 100

ans =

  118.1200 
```

有人可以解释一下吗？任何解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:40:00.077

您可以尝试类似[John D'Errico 的 hpf class](http://www.mathworks.com/matlabcentral/fileexchange/36534-hpf-a-big-decimal-class-currently-in-beta-release)。

这将给出您期望的结果

```
round(hpf('12.5') * hpf('9.45') * 100)/100
ans =
118.13

F = hpf('9.45')
F =
9.45 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:02:31.803

听起来您的某些设置会影响您的输出精度。看起来您当前的设置需要 15 个小数位（可能`longG`）？，并且使用 MATLAB 浮点数，您将无法获得 100% 的精度。

您可以更改显示输出的格式，但无论如何精度都将成为该级别的问题。 [相关文件。](http://www.mathworks.com/help/techdoc/ref/format.html)

# utf-8 - JSch以非ASCII字符的文件名下载文件

> ID：11402190
> 
> 赞同：0
> 
> 时间：2012-07-09T19:58:48.883
> 
> 标签：utf-8, character-encoding, sftp, jsch, utf8-decode

我正在使用 JSch 的 ChannelSftp 将文件从远程 FTP 服务器下载到本地 linux 机器。当远程机器的文件名包含非 ascii 字符时，下载的文件有 ? 而不是那些非ASCII字符。

例如，文件名为-test-测试中国人的字.txt 的文件出现在ftp 服务器上，下载到本地机器后会显示为test-??????.txt。

有没有办法，我可以在下载后保留非ASCII字符或自动将它们转换为更有意义的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T18:30:00.050

在这里，问题是客户端不支持 UTF-8 编码。通过在客户端应用程序中将 jvm 参数中的语言设置为 UTF8 解决了这个问题。

# html - 缺少 href 属性的标签是否存在浏览器问题？

> ID：11402199
> 
> 赞同：2
> 
> 时间：2012-07-09T19:59:43.000
> 
> 标签：html, cross-browser, w3c-validation

 上下文：目前，如果锚点应指向的链接为空，Wt（Web Toolkit）将把 WAnchor 对象呈现为`<span>`标签而不是标签。`<a>`

然而，这种方法存在一些问题，特别是它给 CSS 样式增加了不必要的复杂性（例如，当使用 Twitter Bootstrap 时）。 

我参与了与 Wt 开发人员之一的讨论，提出了一个补丁来改变这种行为：[http ://redmine.emweb.be/issues/1348](http://redmine.emweb.be/issues/1348)

他指出，当前行为是由于某些浏览器在呈现没有属性`<a>`的标签时出现问题（可能是较旧的移动浏览器？）。`href`

按照官方的HTML规范，这样是没有问题的：

*   [http://dev.w3.org/html5/spec/single-page.html#the-a-element](http://dev.w3.org/html5/spec/single-page.html#the-a-element) *如果 a 元素没有 href 属性，则该元素代表一个占位符，用于放置链接，如果它是相关的。*
*   [http://www.w3.org/TR/html401/struct/links.html#edef-A](http://www.w3.org/TR/html401/struct/links.html#edef-A) *作者也可以创建一个不指定锚点的 A 元素，即不指定 href、name 或 id。这些属性的值可以在以后通过脚本设置。*

据我所知...

```
<a>Link</a> // OK
<a href>Link</a> or <a href="">Link</a> // Undefined? (but common behavior is to navigate to the current URL)
<a href="/items">Link</a> // OK 
```

我还使用 W3C HTML5 验证器检查了以下文档：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<a>Example of an anchor with no href attribute.</a>
<a href>Example of an anchor with a null href attribute.</a>
<a href="">Example of an anchor with an empty string href attribute.</a>
<a href="http://www.google.com/">Example of an anchor that links to Google.</a>
</body>
</html> 
```

我收到一个警告：

> `Line 9, Column 8: Attribute href without an explicit value seen. The attribute may be dropped by IE7\. <a href>Example of an anchor with a null href attribute.</a>`

所以我的问题是：是否存在任何已知情况，标签上**完全**缺少`href`属性`<a>`会导致某些浏览器出现问题？IE？移动Safari？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:40:41.537

没有属性的`a`元素`href`在 HTML 中一直是有效的，没有理由期望任何浏览器都会有这个问题。这样的元素实际上类似于`span`，即缺乏任何语义。传统`<a name="...">...</a>`上已用于设置目标锚点，通常没有`href`属性，并且此类元素可以跨浏览器工作，尽管使用该`id`属性（在任何元素上）更现代且更值得推荐。

使用`href=""`形式上是正确的，带有一个空 URL，它被解释为同文档引用。

根据当前的 HTML 规范，不使用`href`任何值是无效的。通过 HTML5 草案，它可以用于 HTML 序列化，相当于`href=""`. 不能保证浏览器会以这种方式运行。

# forms - 为什么 'POST'ing 参数在 FB 登录 URL 上不起作用？

> ID：11402204
> 
> 赞同：0
> 
> 时间：2012-07-09T20:00:18.413
> 
> 标签：forms, http, authentication, post

我想编写一个将登录到 facebook 的脚本。

我试着去这个网址：

[https://www.facebook.com/login.php?&email=example@example.com&pass=password](https://www.facebook.com/login.php?&email=example@example.com&pass=password)

但它不起作用，它只是重定向到同一页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:06:52.327

您正在做的是 GET，而不是 POST。

通常在 GET 查询中发送密码不是一个好主意。它在浏览器中、在您的请求中以纯文本形式显示，可以使用嗅探工具和浏览器历史记录进行嗅探。这可能就是 Facebook 不接受它的原因。

# sqlite - sqlite3数据库错误..我真的很累:(

> ID：11402205
> 
> 赞同：0
> 
> 时间：2012-07-09T20:00:21.073
> 
> 标签：sqlite, scrapy

我真的需要帮助来完成这项任务，因为它与我的研究有关，而且我是 python 和 scrapy 的新手。

***任务是选择所有输入字段（类型=文本或密码或文件）并将其（id）存储在后端数据库中，除了此输入所属的页面链接***

我选择输入字段的代码

```
def parse_item(self, response):
    self.log('%s' % response.url)

    hxs = HtmlXPathSelector(response)
    item=IsaItem()
    item['response_fld']=response.url

    item['text_input']=hxs.select("//input[(@id or @name) and (@type = 'text' )]/@id ").extract()
    item['pass_input']=hxs.select("//input[(@id or @name) and (@type = 'password')]/@id").extract()
    item['file_input']=hxs.select("//input[(@id or @name) and (@type = 'file')]/@id").extract()

    return item 
```

数据库管道代码：

```
class SQLiteStorePipeline(object):

def __init__(self):
    self.conn = sqlite3.connect('./project.db')
    self.cur = self.conn.cursor()

def process_item(self, item, spider):
    self.cur.execute("insert into inputs ( input_name) values(?)" , (item['text_input'][0] ), )
    self.cur.execute("insert into inputs ( input_name) values(?)" , (item['pass_input'][0]  ,))
    self.cur.execute("insert into inputs ( input_name) values(?)" ,(item['file_input'][0] ,  ))

    self.cur.execute("insert into links (link) values(?)", (item['response_fld'][0], ))

    self.conn.commit()
    return item 
```

但我仍然收到这样的错误

```
self.cur.execute("insert into inputs ( input_name) values(?)" , (item['text_input'][0] ), )
exceptions.IndexError: list index out of range 
```

***或数据库仅存储第一个字母！***

```
Database links table 
 ╔════════════════╗
 ║      links     ║ 
 ╠════════════════╣
 ║  id  │input    ║ 
 ╟──────┼─────────╢
 ║    1 │     t   ║ 
 ╟──────┼─────────╢
 ║    2 │     t   ║ 
 ╚══════╧═════════╝
Note it should "tbPassword" or "tbUsername" 
```

输出来自 json 文件

```
{"pass_input": ["tbPassword"], "file_input": [], "response_fld":     "http://testaspnet.vulnweb.com/Signup.aspx", "text_input": ["tbUsername"]}
{"pass_input": [], "file_input": [], "response_fld": "http://testaspnet.vulnweb.com/default.aspx", "text_input": []}
{"pass_input": ["tbPassword"], "file_input": [], "response_fld": "http://testaspnet.vulnweb.com/login.aspx", "text_input": ["tbUsername"]}
{"pass_input": [], "file_input": [], "response_fld": "http://testaspnet.vulnweb.com/Comments.aspx?id=0", "text_input": []} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:18:01.867

我对这项技术一无所知，但这是我的猜测：

尝试 `insert into inputs ( input_name) values(?)" , (item['text_input'] )` 代替 `insert into inputs ( input_name) values(?)" , (item['text_input'][0] )`.

至于“列表索引超出范围”错误，您的项目似乎是空的，您应该检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T04:08:05.260

你得到`IndexError`是因为你试图得到列表中的第一个项目，有时它是空的。

我会这样做。

蜘蛛：

```
def parse_item(self, response):
    self.log('%s' % response.url)

    hxs = HtmlXPathSelector(response)
    item = IsaItem()
    item['response_fld'] = response.url

    res = hxs.select("//input[(@id or @name) and (@type = 'text' )]/@id ").extract()
    item['text_input'] = res[0] if res else None # None is default value in case no field found

    res = hxs.select("//input[(@id or @name) and (@type = 'password')]/@id").extract()
    item['pass_input'] = res[0] if res else None # None is default value in case no field found

    res = hxs.select("//input[(@id or @name) and (@type = 'file')]/@id").extract()
    item['file_input'] = res[0] if res else None # None is default value in case no field found

    return item 
```

管道：

```
class SQLiteStorePipeline(object):

    def __init__(self):
        self.conn = sqlite3.connect('./project.db')
        self.cur = self.conn.cursor()

    def process_item(self, item, spider):
        self.cur.execute("insert into inputs ( input_name) values(?)", (item['text_input'],))
        self.cur.execute("insert into inputs ( input_name) values(?)", (item['pass_input'],))
        self.cur.execute("insert into inputs ( input_name) values(?)", (item['file_input'],))

        self.cur.execute("insert into links (link) values(?)", (item['response_fld'],))

        self.conn.commit()
        return item 
```

# mysql - 有一列等于另一个表的计数？

> ID：11402210
> 
> 赞同：1
> 
> 时间：2012-07-09T20:00:53.367
> 
> 标签：mysql

有没有办法让一列等于另一个表中所有行的计数，其中 id = 当前行中的一列？

例如。

*   table1 有以下列：id，count
*   table2 有列 id, table1_id

我希望 table1.count 自动填充 table2 中的行数，其中`table2.table1_id = table1.id`

（它的父子有一个关系）。

显然我可以用 php 做到这一点，我只是认为这比每次页面加载时都必须不断地使用 php 重新计算要快。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:03:59.853

您可以使用[view](http://dev.mysql.com/doc/refman/5.5/en/create-view.html)来完成此操作。不过，它可能每次都会重新计算数字。

要在每次更改其他表时更新常规表，请使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)。

如果表很少更改，不要太担心重新计算，因为结果通常会在查询缓存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:04:42.983

假设`table1.id`是唯一键，您可以执行以下操作：

```
REPLACE INTO table1 (id, count)
SELECT table1_id, COUNT(*)
FROM table2
GROUP BY table1_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:10:55.397

使用 view 和 table `table1_data`，您可以这样做：

```
CREATE VIEW table1 AS
SELECT table1_data.*, COUNT(*) AS count
FROM table1_data, table2
WHERE table1_data.id = table2.table1_id
GROUP BY table1_data.id 
```

这将从 中获取所有数据`table1_data`，按照您的描述添加一列`count`，并将结果显示为在大多数情况下可以像表格一样使用的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:25:39.810

当然，如果您的数据库引擎支持触发器，您可以使用触发器来实现这种“自动”效果。您需要在 table_data 上建立 2 个触发器，onInsert() 和 onDelete()。

# eclipse - Eclipse 3.7/GWT+GAE 向导，资源已经存在？

> ID：11402212
> 
> 赞同：4
> 
> 时间：2012-07-09T20:01:03.970
> 
> 标签：eclipse, google-app-engine, gwt, resources, exists

当我尝试在 Eclipse IDE（在 Mac OSX 10.7 上运行）中使用 Google Web 应用程序向导时，我遇到了一个问题。如果我尝试生成具有任何给定名称/包的项目（使用最新的 GWT 和 GAE SDK），而不生成示例代码，我会收到一条错误消息：

创建元素失败：

原因：资源“/xxx/war/WEB-INF/web.xml”已经存在。

或者，

原因：资源“/xxx/war/WEB-INF/appengine-web.xml”已经存在。

创建项目过程没有完成，当我退出时，我指定的工作区中有一个文件夹，其中包含任何“xxx”。然而，它只包含一个 src 文件夹（没有模块或包）和一个 war 文件夹（没有库、css 或 html 文件），并且不从 SDK 导入 .jar 文件。

如果我完全遵循相同的过程，除了允许它生成示例代码之外，所有文件都在那里。如果我按照这个过程，除了取消选中使用谷歌应用引擎，所有文件都在那里。然而，似乎正是这个特定的过程导致了问题。我宁愿不必重新安装 Eclipse 及其所有插件，只是让这种情况再次发生，所以如果有人能帮助我找出问题的根源，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T14:45:09.633

按照您的描述创建应用程序，但取消选中“App Engine”。

然后通过项目的“属性”对话框打开 GAE。

# javascript - jQuery：单击禁用单击事件，直到来自 ajax 调用的响应

> ID：11402213
> 
> 赞同：9
> 
> 时间：2012-07-09T20:01:07.960
> 
> 标签：javascript, jquery

在 jQuery 中执行以下操作：

```
$('#signupbox1').on('click', '#signup1', function() {

    var str = $('#signupform').serialize();

    // make it look like a waiting button
    $('#signup1').addClass("btn_wait");
    var btn_val = $('#signup1').val();
    $('#signup1').val('');

    $.ajax({
        type: "POST",
        url: "signup_step1.php",
        data: str,
        success: function(msg) {

            //doing stuff here

        $('#signup1').removeClass("btn_wait");
        $('#signup1').val(btn_val);
        }
    });

}); 
```

在收到来自 ajax 调用的答复之前，如何禁用 click 事件？因此，当您单击按钮时，由于添加了类，它不仅“转换”为等待按钮，而且单击事件将“暂停”......这可能吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T20:03:09.970

```
$('#signupbox1').on('click', '#signup1', function() {

    var str = $('#signupform').serialize();

    // make it look like a waiting button
    var btn_val = $('#signup1').val();
    $('#signup1').addClass("btn_wait").val('').unbind('click');

    $.ajax({
        type: "POST",
        url: "signup_step1.php",
        data: str,
        success: function(msg) {
            $('#signup1').removeClass("btn_wait").val(btn_val);
        },
        complete: function() {
            $('#signup1').bind('click'); // will fire either on success or error
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T20:10:21.507

您可以添加一个标志来表示“当前加载”。您可以使用任何变量、属性或属性。在这个例子中，我使用 jQuery`.data()`

此外，建议您`submit`在提交表单时使用事件而不是向提交按钮添加点击处理程序。

```
$('#signupform').on('submit', function() {

    var form = $(this),
        loading = form.data('loading'), //check loading status
        str, button, val;

    //if not loading
    if(!loading){

        //set loading to true
        form.data('loading',true);

        str = form.serialize();
        button = $('#signup1', form);
        val = button.val();

        // make it look like a waiting button
        button
            .addClass("btn_wait");
            .val('');

        $.ajax({
            type: "POST",
            url: "signup_step1.php",
            data: str,
            success: function(msg) {

                //remove loading state
                form.data('loading',false);

                //return button to normal
                button
                    .removeClass("btn_wait");
                    .val(val);
            }
        });
    }

}); 
```

# java - Cross-platform JAD (Java Decompiler) (Or Alternative?)

> ID：11402214
> 
> 赞同：0
> 
> 时间：2012-07-09T20:01:08.260
> 
> 标签：java, jar, cross-platform, decompiler

I'm in a situation where I will be decompiling quite a bit of existing JARs. I've found JAD to be quite useful and even took a look into [DJ Java Decompiler](http://www.neshkov.com/).

The problem I'm facing now is that I may very well have to switch environments. I'll probably be on something *nix but most likely CentOS or Ubuntu. Are there any good cross-platform Java Decompilers? JAD appears to be Windows only. I can't do too much research on the topic because the original site doesn't exist either.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:19:44.560

JAD有什么问题？
[这是 JAD 下载镜像站点的链接，](http://www.varaneckas.com/jad/)其中包含许多不同系统平台的下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-04T18:39:50.120

以下是截至 2015 年 2 月的替代 jad 反编译器列表：

*   Procyon，开源
*   CFR，免费，没有可用的源代码
*   京东，仅供非商业使用免费
*   蕨类植物，开源

您可以在线测试上述反编译器，无需安装并做出自己的明智选择。云中的 Java 反编译器： [http ://www.javadecompilers.com/](http://www.javadecompilers.com/)

# twitter - Twitter query all from this account, but this account only with this hashtag

> ID：11402215
> 
> 赞同：0
> 
> 时间：2012-07-09T20:01:10.617
> 
> 标签：twitter, tags, feed

I have recently made a Twitter feed reading all tweets from for example: @Steve @John and @Company.

For which I generated this query: [http://search.twitter.com/search.json?q=from:steve+OR+john+OR+company&callback=TweetTick&rpp=50](http://search.twitter.com/search.json?q=from:steve+OR+john+OR+company&callback=TweetTick&rpp=50)

Now I want to display all the tweets from @company, but for @John and @Steve only the tweets containing #company, is there, or isn't there a way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:40:54.990

没有办法在单个查询中执行此操作。您最好的选择是：

*   过滤您的推文（丢弃来自@John 或@Steve 的任何推文，而无需陪伴），或
*   合并两个单独查询的结果（一个用于@Company，一个用于#company from:@John OR from:@Steve）。

# c# - C# Selenium webdriver Catch javascript errors in Internet explorer

> ID：11402217
> 
> 赞同：2
> 
> 时间：2012-07-09T20:01:19.643
> 
> 标签：c#, javascript, internet-explorer, selenium, webdriver

Is it possible to catch and log all JS errors that could happen through my test runs in IE?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:40:33.947

There are typically two classes of JavaScript error that one wants to catch when asking a question like this. The first is wanting to catch JavaScript errors in the source code of the website being automated. The second type of error is to attempt to catch JavaScript errors in JavaScript code executed by your WebDriver code. Unfortunately, there is not a good way to catch all JavaScript errors in IE via Selenium WebDriver. This is a common feature request for the library, with an open enhancement in the project's [issue tracker](http://code.google.com/p/selenium/issues/detail?id=148). There are some techniques you can use to make a best effort at catching JavaScript errors, but they all have their limitations.

For the first class of JavaScript error, you can try to inject a script that hooks the `window.onError` event in the page. The limitation here is that it will miss any JavaScript errors that occur in scripts that execute before your onError hook is activated. Frequently, this will miss many errors that occur in scripts that are executed during the `onLoad` event.

For the second class of errors, the way the IE driver executes JavaScript, the script execution engine of IE does not allow us to catch the errors in execution. When the script is executed, if there is an error, the driver receives an HRESULT from the script engine that says, "I already displayed the error in the UI, so I'm not going to give you any further information." In this case, increasing the logging level of the driver will only tell you that a JavaScript error occurred, but not any other information about the JavaScript error. For this class of error, the development team is actively investigating possible solutions, but there is no clear-cut road forward here, nor is there any timeframe for a change in this behavior.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:05:27.173

我相信你可以使用日志开关

```
--log-file=<logFile> 
```

如文档中所述：[http ://code.google.com/p/selenium/wiki/InternetExplorerDriver](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)

# javascript - Removing debug code from inside a function using Closure Compiler simple optimisations

> ID：11402218
> 
> 赞同：9
> 
> 时间：2012-07-09T20:01:24.787
> 
> 标签：javascript, google-closure-compiler, minify

I'm looking for a way to strip out debug code from functions so I can add test hooks to closures. I've read [Google Closure Compiler advanced: remove code blocks at compile time](https://stackoverflow.com/questions/4167519/google-closure-compiler-advanced-remove-code-blocks-at-compile-time) and tested out removing debug code with the following:

```
/** @define {boolean} */
var DEBUG = true;

if (DEBUG) {
    console.log('remove me');
} 
```

Simple optimisation with `--define='DEBUG=false'` reduces this to `var DEBUG=!1;`. The same applies for this:

```
/** @const */
var DEBUG = false;

if (DEBUG) {
    console.log('remove me');
} 
```

Where I run into trouble is using this convention inside a function:

```
/** @const */
var DEBUG = false;

function logMe() {
    if (DEBUG) {
        console.log('remove me');
    }
} 
```

This reduces to the following:

```
var DEBUG=!1;function logMe(){DEBUG&&console.log("remove me")}; 
```

I would expect it to reduce further to:

```
var DEBUG=!1;function logMe(){}; 
```

Is there a reason this is not working as expected? I'm really just looking for a clean way to strip debug code and am not ready to take the plunge into advanced optimizations.

**Update**

Per @John's answer, I implemented my own compiler and have found that the following configuration will remove `if (DEBUG) {}` from inside and outside the code for the case of a `@define`:

```
CompilerOptions options = new CompilerOptions();
CompilationLevel.SIMPLE_OPTIMIZATIONS.setOptionsForCompilationLevel(options);
//options.setInlineConstantVars(true);
options.setInlineVariables(CompilerOptions.Reach.ALL);
options.setDefineToBooleanLiteral("DEBUG", false); 
```

This works well enough for a single file with the following limitations:

1.  This requires `var DEBUG` to be defined in each file, which is bad practice.
2.  When combining multiple files, you can only have a single `var DEBUG` or the compiler can't optimize around it. This could be avoided by compiling each file individually and merging them.
3.  Because the value is defined at the beginning of the file, there's no flexibility to receive the value beforehand.

I've toyed with the idea of removing all `var DEBUG` definitions from the files and injecting it into the source or extern before execution, but I've run into two issues:

*   Defining it in extern appears to do nothing.
*   Undefined `DEBUG` in the uncompiled code throws a reference error in the browser.

The ideal option would be to test `window.DEBUG`, which does not throw a reference error. Unfortunately, while injecting `/** @const */ var window = {}; /** @const */ window.DEBUG = false;` works at the top level, reducing `if (window.DEBUG) {}`, the optimization is actually reverted if placed in a function.

Unless another compiler option works the only option that would really make sense is to go with `window.DEBUG` and before compilation inject `/** @const */ var DEBUG = false;` and to a global replace of `/\bwindow.DEBUG\b/` with `DEBUG`. Is there a better way?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-27T10:58:09.077

使用@define 注解：

```
@define {boolean} 
```

调试=真；

并使用选项编译

--define="调试=假"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T23:33:35.243

编译器的自定义构建将允许您执行此操作。您基本上想要“内联常量变量”：

options.setInlineConstantVars(true);

您可以在 applySafeCompilationOptions 中添加它： [http ://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/javascript/jscomp/CompilationLevel.java?r=706](http://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/javascript/jscomp/CompilationLevel.java?r=706)

或者您可以使用 Java API 并添加选项（无需修改编译器的代码）。Michael Bolin 在这里举了一个例子来说明如何做到这一点：

[http://blog.bolinfest.com/2009/11/calling-closure-compiler-from-java.html](http://blog.bolinfest.com/2009/11/calling-closure-compiler-from-java.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-30T11:18:03.907

这是一个旧答案，但我找到了一种此处未提及的方法。

```
(function(){
    var DEBUG = true;

    if (DEBUG) {
        if (something === "wrong") {
            console.warn("Stop!  Hammer time!");
        }
        else if (something === "as expected") {
            console.log("All good :-)");
        }
    }

    foo();
})(); 
```

使用 ADVANCED_OPTIMIZATIONS 编译为：

```
"wrong" === something ? 
    console.warn("Stop!  Hammer time!") : 
    "as expected" === something && console.log("All good :-)");
foo(); 
```

在我们的构建脚本中，我们可以重写 DEBUG 行以将其设置为`false`，然后生成此输出。

```
foo(); 
```

* * *

发生这种情况的原因是 Closure 将删除无法访问的代码。通过创建闭包并定义一个局部变量，Closure 可以看到我们不能做类似的事情`window.DEBUG === true`，所以代码保证永远不会运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-12T02:10:52.520

我解决“使用 SIMPLE_OPTIMIZATION 从闭包编译的 javascript 中删除调试函数”问题的方法是结合@John 提出的类似方法以及使用@Brian Nichols 的一些更新。我只能通过将这是我的主 js 文件的全局范围并进行自定义编译（使用多个 .js 文件仍然删除它们）来让编译器删除这些行

```
/** @const 
*   @type {boolean}
*/
var DEBUG = false;

//and used this format for my debug function
DEBUG && myLog('foo'); 
```

然后用 ant 编译闭包编译器 java 以包含此选项 options.setInlineVariables(CompilerOptions.Reach.ALL); 正如@john 建议的那样，在 CompilationLevel.java 文件中的 applySafeCompilationOptions 函数下。这对我有用，并没有像 ADVANCED 那样破坏我的代码库......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T22:59:40.880

您的`DEBUG`变量当前是全局变量。GCC 不会在简单优化模式下删除或重命名全局变量，因此它们仍可用于其他脚本中可能想要访问它们的任何代码。尝试将您的代码封装到匿名函数中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T20:45:07.893

从您的代码中删除`var DEBUG = true;`并将所有检查的条件转换`if (DEBUG)`为`if (goog.DEBUG)`. 修改您的编译器选项以读取`--define goog.DEBUG=false`. 该`goog`变量内置于闭包库 API 中，为编译器提供选项和标志。

# firefox-addon - 如何在 Firefox Jetpack 附加组件中的背景脚本和内容脚本之间共享 javascript 代码？

> ID：11402223
> 
> 赞同：3
> 
> 时间：2012-07-09T20:01:40.163
> 
> 标签：firefox-addon, firefox-addon-sdk

我为我的 Firefox 插件编写了一个库来模仿 Chrome 的请求/响应 API。显然我需要在我的后台进程（main.js）和我的内容脚本中使用这个代码。肯定有比[对导入的模块进行字符串化](https://stackoverflow.com/questions/6425831/how-to-share-code-between-content-script-and-addon)更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T09:57:28.987

有一种获取 SDK 代码模块 URL 的半文档化方式。这涉及不能保证保持稳定的低级模块。事实上，SDK 的这一部分很可能会发生变化，而这个解决方案将不再起作用（就像这里最初提出的解决方案一样）。

也就是说，SDK 允许您访问[`loader`模块](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/_loader)。因此，首先您需要[构建一个与 SDK 使用的选项相同的加载程序](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/_loader)。然后您需要使用[`resolveURI`实用程序函数](https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/_loader)使用此加载器的映射来解析模块名称：

```
var {Loader, resolveURI} = require('toolkit/loader');
var options = require('@loader/options');
var loader = Loader(options);
var fooURI = resolveURI("./foo", loader.mapping); 
```

上面的代码生成模块的 URL `foo`。请注意，您需要在`foo`某处使用该模块，否则它将不会包含在您的扩展中。如果您还没有使用它，那么一个虚拟函数就足够了：

```
function dummy()
{
  require("foo");
} 
```

使用生成的 URL 作为内容脚本就可以了：

```
var pageMod = require("page-mod");
pageMod.PageMod({
  include: "*.google.com",
  contentScriptWhen: 'end',
  contentScriptFile: [fooURI, ...]
}); 
```

# javascript - Individual class Attribute visibility using jquery

> ID：11402226
> 
> 赞同：1
> 
> 时间：2012-07-09T20:01:48.183
> 
> 标签：javascript, jquery, html

I am trying to have `<li>`s hide and show based on their class names (most of which are multiple classes) selected by the user using a checkbox selector for individual attributes. I have noticed however that in my implementation, it looks for the attribute, and performs the task, regardless of all of the other attribute selectors on the form. How can I adjust the code so that it shows the `<li>`s based on visibility selections of the individual class attributes?

[Here is the fiddle](http://fiddle.jshell.net/chrisfrisina/fZmXH/).

As you can see, if you check the 'A' box, it hides 'A', 'AB', 'AC', and 'ABC'. However the user thinks that any `<li>` with attributes 'B' and 'C' are visible, and 'AB', 'AC', and 'ABC' are hidden.

So if the user selects 'A' to be hidden, then the only `<li>` to be hidden is

'A'

, since it is the only one with just 'A', and 'B' and 'C' are attributes the user wants to be visible, leaving the following visible:

'B', 'C', 'AB', 'AC', 'BC', "ABC'

. If the user selects 'A' and 'B' to hide, then the following would be hidden:

'A', 'B', 'AB'

; and visible would be:

'C', 'AC', 'BC', and 'ABC'

, since they have a 'C' class attribute. I'm assuming I would have to make an array or something similar, and then look for any attributes within the array, and display/hide them accordingly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:23:17.377

这是一种使用更少代码的方法：

[http://fiddle.jshell.net/vnjHn/1/](http://fiddle.jshell.net/vnjHn/1/)

```
$('form input').on('change', function() {

    var notSelectedList = $('form input:not(:checked)').map(function() {
        return '.' + $(this).attr('name');
    }).get().join(',');

    $('.viewing li').each(function() {
        $(this).toggle($(this).is(notSelectedList));
    });

});​ 
```

它通过建立一个不隐藏的类的逗号分隔列表来工作，然后检查这些类中的任何一个的所有列表项——我认为这是一种更简单的检查方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:37:13.430

建立在您的示例之上是代码：

```
<form class="form">
    <p> Check to hide </p>
    <input type="checkbox" id="1" name="1" class="selector"/><label for="1">A</label>
    <input type="checkbox" id="2" name="2" class="selector"/><label for="2">B</label>
    <input type="checkbox" id="3" name="3" class="selector"/><label for="3">C</label>
</form><br>

<div class="viewing">
    <ul>
        <li class="1">A</li>
        <li class="2">B</li>
        <li class="3">C</li>
        <li class="1 2">AB</li>
        <li class="2 3">BC</li>
        <li class="1 3">AC</li>
        <li class="1 2 3">ABC</li>
    </ul>
</div>​ 
```

和js：

```
var classes = {'1':false,'2':false,'3':false};
$('form input').on('change', function() {
var itemClass= $(this).attr('name');
console.log(itemClass);
classes[itemClass] = $(this).attr('checked') == 'checked';    
    $('.viewing>ul>li').each(function(){
        var classList =$(this).attr('class').split(/\s+/);
        var hide = true;
        $.each( classList, function(index, item){
            if (classes[item] == false) {
hide = false;                

            };
});
        if(hide == true)
            $(this).hide();
        else
            $(this).show();
    });
});​ 
```

你可以在[这里找到演示](http://fiddle.jshell.net/fZmXH/10/)

# jquery - Firefox can't parse JSON string in jQuery AJAX response

> ID：11402228
> 
> 赞同：5
> 
> 时间：2012-07-09T20:02:01.103
> 
> 标签：jquery, ajax, json, firefox

I am experiencing a strange problem while trying to parse JSON strings in jQuery AJAX response. Here is my code:

```
$.ajax({
    type: "POST",
    url: "Save",
    data: {
        expiry: expiry,
        settings: settings
    }
}).done(function (msg) {
    alert(msg);
    var obj = jQuery.parseJSON(msg);
    if (obj.status == "done") {
        window.location = obj.redirect;
    }
}); 
```

On IE, Chrome, and Safari, I am getting JSON string in alert, but on Firefox, I am getting

`[obj XMLDocument]`

in the alert.

Here is FF console:

![enter image description here](../Images/9ed8a9394d57cb44881d15f64dcf1bff.png)

**obj is null**, but I can see the response JSON string in the console under text attribute

```
responses=Object { xml=document, text="{"status":"done","redir...ippetImage\/s\/6abb68"} 
```

Any reason for this behavior?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:54:51.733

问题出在 servlet 方面。我必须设置 contentType 才能使其工作。

```
response.setContentType("text/JSON"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:06:08.643

这不是一个有效的 JSON 字符串。出于所有意图和目的，JSON 字符串只是 JS 中赋值的右侧。

例如

```
var x = 7;
        ^
var y = [1,2,3];
        ^^^^^^^
var z = {a:'b', c: 'd'};
        ^^^^^^^^^^^^^^^ 
```

如果将 x/y/z 变量转换为 JSON 字符串，由 指示的部分`^`对应于您将得到的部分。

如果您不能将 json 字符串写为 JS 作业，例如

```
var x = ...json_string_here...; 
```

那么它不是有效的JSON。您的代码段归结为：

```
var x = responses=Object { .... } 
```

这是一个语法错误。

# sql - Trouble with Pivot Tables

> ID：11402235
> 
> 赞同：1
> 
> 时间：2012-07-09T20:02:37.117
> 
> 标签：sql, sql-server-2005, pivot, pivot-table

I know there are a lot of Pivot table examples on the internet, however I'm new to SQL and I'm having a bit of trouble as all the examples seem to be pertaining to aggregate functions.

```
Table 1:

|Date         | Tag  |Value |
|06/10 2:00pm |  A   |  65  | 
|06/10 2:00pm |  B   |  44  |
|06/10 2:00pm |  C   |  33  |
|06/10 2:02pm |  A   |  12  |
|06/10 2:02pm |  B   |  55  |
|06/10 2:02pm |  C   |  21  |
....
|06/10 1:58am |  A   |  23  | 
```

* * *

What I would like it to look like is (table 2):

```
|Date        |  A  |  B  |  C  |
|06/10 2:00pm|  65 |  44 |  33 | 
|06/10 2:02pm|  12 |  55 |  21 | 
.....
|06/10 1:58am| 23 | etc.  | etc. | 
```

(sorry for the format)

Some problems that encounter (doesn't work with code I have found online) I'd like to run this as a stored procedure (rather a SQL job), every 2 minutes so that this data from table 1 is constantly being moved to table 2\. However I think I would need to alter the date every single time? (thats the syntax I've seen) The pivot table itself seems simple on its own, but the datetime has been causing me grief. Any code snipets or links would be greatly appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:57:10.290

枢轴本身似乎很简单：

```
select *
from table1
pivot (min (Value) for Tag in ([A], [B], [C])) p 
```

至于存储过程，我将使用 table2 中保存的最后日期作为 table1 的过滤器，不包括不完整的组（我假设在某些时候会出现所有三个标签，并且只有最后一个日期可能是不完整的。如果没有，您将需要对最后日期进行特殊处理以更新/插入一行）。

所以，在代码中：

```
create proc InsertPivotedTags
as
    set NoCount ON
    set XACT_ABORT ON

    begin transaction

    declare @startDate datetime
    -- Last date from Table2 or start of time
    select @startDate = isnull (max ([Date]), '1753-01-01')
      from Table2

    insert into Table2
    select *
      from Table1
     pivot (min (Value) for Tag in ([A], [B], [C])) p
     where [Date] > @startDate
     -- exclude incomplete groups
       and a is not null
       and b is not null
       and c is not null

    commit transaction 
```

如果组可能不完整，您应该删除排除过滤器并添加删除语句以删除最后日期，以防它不完整，并调整`@startDate`到三毫秒前再次获得相同的行，但现在处于更多填充状态。

# asp.net - Save image name or path into database

> ID：11402237
> 
> 赞同：1
> 
> 时间：2012-07-09T20:02:55.003
> 
> 标签：asp.net, sql, sql-server, image-uploading

I'm doing an intranet for the employees of the company using ASP.NET and SQL Server, on the profile section i have an upload picture area (image field to show the picture, input to select the file, and the load button), this is working fine, the picture is loading into a folder, but, also i have the text fields where the user adds his info, this is also working great and is saving into the database, what now i want to do is that the user uploads the picture, and finish with all the text fields when he clicks the submit button to send all the fields into the database the name or the path of the picture he uploaded goes into the database too, all my textfields are being saved using an sqlDataSource with insertParameters.

Any idea how to do it?? i would prefer to do it with the front side code, since on the code behind i just have initializing the SqlDataSource1.Insert();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:28:13.253

不要将图像保存到磁盘，这样做迟早会导致丑陋的混乱。您应该做的是允许用户上传图像，在服务器上调整图像大小/裁剪图像，将图像转换为 base64 并将 base64 字符串保存到 varchar(max) 列中。

因为您只保存小图像（头像），所以这个解决方案应该没有任何问题。此外，当您从数据库中取回图像 base64 字符串时，如果不需要 IE7，您可以将其直接嵌入到 HTML 中。以下是支持[数据 URI 方案的浏览器列表](http://en.wikipedia.org/wiki/Data_URI_scheme)

如果无法将 base64 嵌入 HTML 中，请创建一个 ASP.NET 页面，将 base64 字符串解码为图像并返回二进制响应。然后像这样在您的页面中使用它：

```
<img src="http://www.example.com/images.aspx?thimageDBrowID=12345" width="20" height="20"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:39:50.593

If you're using SQL Server 2008 you can look into using [FILESTREAM](http://technet.microsoft.com/en-us/library/bb933993%28SQL.105%29.aspx)

# c# - Prepend to a C# Array

> ID：11402238
> 
> 赞同：34
> 
> 时间：2012-07-09T20:03:02.163
> 
> 标签：c#, arrays

Given a populated `byte[] values` in C#, I want to prepend the value `(byte)0x00` to the array. I assume this will require making a new array and adding the contents of the old array. Speed is an important aspect of my application. What is the best way to do this?

**-- EDIT --**

The `byte[]` is used to store DSA (Digital Signature Algorithm) parameters. The operation will only need to be performed once per array, but speed is important because I am potentially performing this operation on many different `byte[]`s.

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-09T20:29:35.877

如果您只打算执行此操作一次，那么没有很多选择。[Monroe's answer](https://stackoverflow.com/a/11402310/1159478)提供的代码应该没问题。

```
byte[] newValues = new byte[values.Length + 1];
newValues[0] = 0x00;                                // set the prepended value
Array.Copy(values, 0, newValues, 1, values.Length); // copy the old values 
```

但是，如果您要多次执行此操作，您就有更多选择。有一个基本问题是，将数据添加到数组不是一种有效的操作，因此您可以选择使用替代数据结构。

A`LinkedList`可以有效地预置数据，但对于大多数任务来说，它的效率通常较低，因为它涉及更多的内存分配/释放，并且还失去了内存局部性，因此它可能不是一个净赢。

双端队列（称为双端队列）对您来说将是一个很棒的数据结构。您可以有效地添加到开头或结尾，并有效地访问结构中任何位置的数据（但您不能有效地插入除开头或结尾之外的其他位置）。这里的主要问题是.NET 没有提供双端队列的实现。您需要找到一个带有实现的 3rd 方库。

您还可以通过跟踪“我需要预先添加的数据”（使用列表/队列/等）然后尽可能长时间地等待实际预先添加数据来在复制时节省很多，这样您就可以最大限度地减少创建尽可能多的新数组，以及限制现有元素的副本数量。

您还可以考虑是否可以调整结构，以便添加到结尾而不是开头（即使您知道以后需要反转它）。如果您在短时间内追加很多内容，则可能值得将数据存储在 a 中`List`（可以有效地添加到*末尾*）并添加到末尾。根据您的需要，甚至可能值得创建一个作为 List 包装器的类，并隐藏它被反转的事实。您可以制作一个映射`i`到`Count-i`等的索引器，以便它从外部显示，就好像您的数据正常存储一样，即使内部`List`实际上是向后保存数据。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-09T20:47:59.813

好的，让我们来看看关于这个问题的性能问题。这**不是一个答案**，只是一个微基准，看看哪个选项更有效。

所以，让我们设置场景：

*   包含 1,000,000 个项目的字节数组，随机填充
*   我们需要添加项目 0x00

我们有 3 个选项：

1.  手动创建和填充新数组
2.  手动创建新数组并使用 Array.Copy (@Monroe)
3.  创建列表、加载数组、插入项目并将列表转换为数组

这是代码：

```
 byte[] byteArray = new byte[1000000];

    for (int i = 0; i < byteArray.Length; i++)
    {
        byteArray[i] = Convert.ToByte(DateTime.Now.Second);
    }

    Stopwatch stopWatch = new Stopwatch();

    //#1 Manually creating and populating a new array;

    stopWatch.Start();

    byte[] extendedByteArray1 = new byte[byteArray.Length + 1];

    extendedByteArray1[0] = 0x00;

    for (int i = 0; i < byteArray.Length; i++)
    {
        extendedByteArray1[i + 1] = byteArray[i];
    }

    stopWatch.Stop();
    Console.WriteLine(string.Format("#1: {0} ms", stopWatch.ElapsedMilliseconds));
    stopWatch.Reset();

    //#2 Using a new array and Array.Copy

    stopWatch.Start();

    byte[] extendedByteArray2 = new byte[byteArray.Length + 1];
    extendedByteArray2[0] = 0x00;                                
    Array.Copy(byteArray, 0, extendedByteArray2, 1, byteArray.Length);

    stopWatch.Stop();
    Console.WriteLine(string.Format("#2: {0} ms", stopWatch.ElapsedMilliseconds));
    stopWatch.Reset();

    //#3 Using a List

    stopWatch.Start();

    List<byte> byteList = new List<byte>();
    byteList.AddRange(byteArray);
    byteList.Insert(0, 0x00);

    byte[] extendedByteArray3 = byteList.ToArray();

    stopWatch.Stop();
    Console.WriteLine(string.Format("#3: {0} ms", stopWatch.ElapsedMilliseconds));
    stopWatch.Reset();

    Console.ReadLine(); 
```

结果是：

```
#1: 9 ms
#2: 1 ms
#3: 6 ms 
```

我已经运行了多次，得到的数字不同，但比例始终相同：**#2 始终是最有效的选择**。

*我的*结论：数组比列表更有效（尽管它们提供的功能较少），并且以某种方式`Array.Copy`真正优化了（尽管想理解这一点）。

任何反馈将不胜感激。

此致。

*PS*：这不是一个剑术帖子，我们在一个问答网站学习和教学。并**学习**。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-09T20:08:51.820

正如您所推测的，最快的方法是创建长度为 + 1 的新数组并复制所有旧值。

如果您要多次这样做，那么我建议使用 a`List<byte>`而不是`byte[]`，因为在增加底层存储时重新分配和复制的成本可以更有效地摊销；在通常情况下，`List`每次对`List`超过其当前容量的添加或插入进行添加或插入时， 中的基础向量都会增长两倍。

```
...

byte[] newValues = new byte[values.Length + 1];
newValues[0] = 0x00;                                // set the prepended value
Array.Copy(values, 0, newValues, 1, values.Length); // copy the old values 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-01-08T10:04:35.033

.NET 4.7.1 及更高版本最简单、最干净的方法是使用无副作用的[`Prepend()`](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.prepend?view=netframework-4.8&viewFallbackFrom=netframework-4.7).

> 在序列的开头添加一个值。

例子

```
// Creating an array of numbers
var numbers = new[] { 1, 2, 3 };

// Trying to prepend any value of the same type
var results = numbers.Prepend(0);

// output is 0, 1, 2, 3
Console.WriteLine(string.Join(", ", results )); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-09T21:25:01.570

当我需要频繁地追加数据但又希望 O(1) 随机访问单个元素时，我将使用一个由一些填充量过度分配的数组来快速添加新值。这意味着您需要将实际内容长度存储在另一个变量中，因为 array.length 将指示长度 + 填充。通过使用填充的一个插槽附加一个新值，在您用完填充之前不需要分配和复制。实际上，分配是通过几个附加操作摊销的。存在速度空间权衡，就好像你有许多这样的数据结构，你可以在程序中的任何时候使用相当数量的填充。

同样的技术可以用于前置。就像附加一样，你可以在用户和实现之间引入一个接口或抽象：你可以有几个填充槽，这样新的内存分配只是偶尔需要。正如上面的一些建议，您还可以使用反转索引的附加数据结构实现一个前置接口。

我将数据结构打包为一些通用集合接口的实现，以便该接口对用户来说显得相当正常（例如数组列表或其他东西）。

（此外，如果支持删除，则在删除元素后立即清除它们可能很有用，以帮助减少 gc 负载。）

要点是分别考虑实现和接口，因为将它们解耦使您可以灵活地选择不同的实现或使用最小接口隐藏实现细节。

根据您的域的适用性，您可以使用许多其他数据结构。绳索或间隙缓冲器；请参阅[适合实现记事本等编辑器的最佳数据结构是什么？](https://stackoverflow.com/questions/649279/what-is-best-data-structure-suitable-to-implement-editor-like-notepad); Trie 也做了一些有用的事情。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-02-08T16:15:22.247

我知道这是一个非常古老的帖子，但我实际上喜欢使用 lambda。当然，我的代码可能不是最有效的方式，但它的可读性和一行。我使用 .Concat 和 ArraySegment 的组合。

```
 string[] originalStringArray = new string[] { "1", "2", "3", "5", "6" };
 int firstElementZero = 0;
 int insertAtPositionZeroBased = 3;
 string stringToPrepend = "0";
 string stringToInsert = "FOUR"; // Deliberate !!!

 originalStringArray = new string[] { stringToPrepend }
            .Concat(originalStringArray).ToArray();

 insertAtPositionZeroBased += 1; // BECAUSE we prepended !!
 originalStringArray = new ArraySegment<string>(originalStringArray, firstElementZero, insertAtPositionZeroBased)       
                .Concat(new string[] { stringToInsert })
                .Concat(new ArraySegment<string>(originalStringArray, insertAtPositionZeroBased, originalStringArray.Length - insertAtPositionZeroBased)).ToArray(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-09T20:14:01.197

最佳选择取决于您以后将如何处理此系列。如果这是唯一可以更改长度的编辑，那么最好的办法是创建一个带有一个额外插槽的新数组，然后`Array.Copy()`用来完成其余的工作。无需初始化第一个值，因为新的 C# 数组总是清零：

```
byte[] PrependWithZero(byte[] input)
{
    var newArray = new byte[input.Length + 1];
    Array.Copy(input, 0, newArray, 1, input.Length);
    return newArray;
} 
```

如果可能会发生其他长度变化的编辑，那么性能最高的选项可能是一直使用 a `List<byte>`，只要添加的内容并不总是从头开始。（如果是这种情况，即使是链接列表也可能不是您可以立即忽略的选项。）：

```
var list = new List<byte>(input);
list.Insert(0, 0); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-26T09:25:30.557

我知道这是超过 4 年的接受帖子，但对于那些可能与**Buffer.BlockCopy**相关的人来说会更快。

# javascript - 将未知行数的段落垂直居中

> ID：11402240
> 
> 赞同：0
> 
> 时间：2012-07-09T20:03:07.237
> 
> 标签：javascript, jquery, html, css

这不是我第一次遇到这个问题并且从来没有机会弄清楚正确的事情。

所以问题来了：

我有 2 个 div。他们每个人都有一个标题。根据标题的长度，标题可能必须适合或不适合 2 行。所有这些都是从 CMS 生成的，因此无法判断其中一个在给定时间是否有 2 行或 1 行（因此，如果它们有 1 行或 2 行，我不能将它们与类分开）

这是有趣的部分：我希望这两个 div 中的标题垂直居中。行高不会这样做，因为它总是有可能在 1 或 2 行上，并且 display:table-cell + vertical-align:middle 与 IE7 不兼容。

那么有没有办法让这些标题垂直居中并且适用于每个浏览器？

编辑：这是我试图解释的情况的照片：

![在此处输入图像描述](../Images/c1acc312b2b9c835ffc85c8f3510feb7.png)

编辑#2：这是一个重新创建我的示例的代码示例。我们想让它们都居中。[http://jsfiddle.net/m7bLj/](http://jsfiddle.net/m7bLj/)

编辑＃3：

在@mikhailvs 的回答之后，我想出了这段代码，它很有效。

```
$(document).ready(function(){
    $(".container-div").each(function(){
        $(this).children('div').css('top', String($(this).height() / 2 - $(this).children('div').height() / 2) + 'px');
    })
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:26:02.400

如果你愿意使用 jQuery，你可以这样做：

```
var div1onLoadCallback = function () {
     var w = $(window);
     var div1 = $('#div1');
     div1.css('top', String(w.height() / 2 - div1.height() / 2) + 'px');
} 
```

然后像这样声明你的 div`<div id="div1" onload="div1onLoadCallback()"></div>`

对于第二个 div 也是如此。粗略地说，您需要修改`position`标题的 css 属性才能使其工作（例如`position: absolute`）。

# iphone - How can I automatically login to Hotspots service?

> ID：11402243
> 
> 赞同：1
> 
> 时间：2012-07-09T20:03:24.753
> 
> 标签：iphone, ios, xcode

I'm working on an app which logs automatically in to a hotspot service *(Fon Hotspots)*. The service I want to uses is a unprotected WiFi-connection which asks a login and password in the first screen you open.

I want to let the app do it automatically so you don't need to do it each time by yourself. *So you need to enter before your login and password in the app and save it.*

Can someone tell me which functions I need to use and how it works?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:17:19.577

据我了解，iPhone 会为您处理网络连接。我认为您只需要测试设备是否已连接到网络，然后执行您需要执行的任何操作。

# java - Observer/observable objects with MVC pattern

> ID：11402244
> 
> 赞同：2
> 
> 时间：2012-07-09T20:03:24.800
> 
> 标签：java, swing, model-view-controller, observer-pattern

I have this situation:

An object that it's observable and another object that it is observer.

the observer has a method `update(Observable obs,Object obj)` that receive through `notifyObservers` the object changed.when observer receives the notify, update method prints the object changed. I want print out the result in a gui that implements MVC pattern.I'm following this guide [MVC pattern](http://www.oracle.com/technetwork/articles/javase/index-142890.html). My idea is to make the `Controller` the observer. something like that:

```
public class Controller extends AbstractController implements Observer 
{
    public static final String TOTAL_HIT_COUNT_PROPERTY = "Total Hit";

    public void changeTotalHitCount(long new_total_hit_count)
    {
        setModelProperty(TOTAL_HIT_COUNT_PROPERTY, new_total_hit_count);
    }

    @Override
    public void update(Observable o, Object arg) 
    {

    }
} 
```

but I don't know if it's a correct implementation!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T20:18:58.167

[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)和[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)是两种不同的设计模式——只是为了确保我们在同一页面上。

在 MVC（至少按照定义）模式中，视图应该在模型更改时自动更新，我猜这就是你想要做的。在这种情况下，这意味着您的 Observer 应该是 View，而不是 Controller，而您的 Model 将是您的 Observable 对象。

因此：

```
Observable changes --> update Observer 
```

将在纯 MVC 模式中复制您尝试获得的内容：

```
Model changes --> update View 
```

我并不是说这应该是做事的方式，但我认为如果你尝试将 Java 的 Observer/Observable 应用于 MVC 模式，这可能会继续进行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-27T05:55:45.150

观察者模式是 MVC 的一部分。它是 MVC 的一个组成部分。

> 观察者模式也是熟悉的模型-视图-控制器 (MVC) 架构模式中的关键部分。来源：[https ://en.wikipedia.org/wiki/Observer_pattern](https://en.wikipedia.org/wiki/Observer_pattern)

MVC 模式可以看作是这三种设计模式的组合：观察者模式、组合模式和策略模式。这意味着 Observer 和 MVC*是*兼容的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-28T14:57:32.410

在“设计模式 - 可重用设计的元素”一书（臭名昭著的四人帮）第 1.2 节（SmallTalk MVC 中的设计模式）中，它在几个地方提到了 MVC 如何使用观察者模式，我在下面引用：

> 从表面上看，这个例子反映了一种将视图与模型分离的设计。但是该设计适用于一个更普遍的问题：解耦对象，以便对一个对象的更改可以影响任意数量的其他对象，而无需更改对象知道其他对象的详细信息。这种更通用的设计由观察者设计模式描述

稍后在同一部分

> 但是 MVC 中的主要关系由观察者、组合和策略设计模式给出。

# ruby-on-rails - Interrupt Rails Server Output w/o Stopping the Server during a Capistrano Deployment

> ID：11402245
> 
> 赞同：0
> 
> 时间：2012-07-09T20:03:28.110
> 
> 标签：ruby-on-rails, exception-handling, capistrano

I'm doing a Capistrano deployment of a Rails app. It's been a lot of fun for the most part.

After the deployment is complete (in `deploy:restart`), I would like to start the Rails server, watch the output for a while, and then hit `Ctrl-C` to send an interrupt, thereby stopping the output, and proceeding the `deploy:cleanup` task. At one point it seemed like this was working, except that it appeared to be considering the interrupt to be an exception and so was saying it "Cannot Start the Rails Server" even though it was actually started and running. I wanted to rescue the interrupt, and so wrote the following, based in part on [another thread here](https://stackoverflow.com/q/2089421/955159 "Capturing Ctrl-C in Ruby"):

```
namespace :deploy do
    task :restart, :roles => :app, :except => { :no_release => true } do 
      begin
        logger.info 'Attempting to Start the Rails Server'
        run "cd #{release_path} && script/rails s"
      rescue SystemExit, Interrupt
        logger.info %q[Au revoir! And don't worry. The server will continue running just fine without you hanging around looking over it's shoulder.]
      rescue Exception => error
        logger.important 'Cannot Start the Rails Server. This may be a problem.'
        logger.info "#{error}"
      end
    end
  end 
```

However, this doesn't work. Before I hit Ctrl-C, while the server is still running, as I would expect, I'm getting this sort of thing:

```
 ** [out :: server.example.com] Started GET "/assets/bootstrap.js?body=1" for 178.120.25.53 at 2012-07-09 19:10:53 +0000
 ** [out :: server.example.com] Served asset /bootstrap.js - 200 OK (11ms) 
```

And then after I send the interrupt, I'm getting this:

```
 ** Au revoir! And don't worry. The server will continue running just fine without you hanging around looking over it's shoulder.
    triggering after callbacks for `deploy:restart'
  * executing `deploy:cleanup'
  * executing "ls -xt /srv/www/my_project/releases"
    servers: ["server.example.com"]
    [server.example.com] executing command
    command finished in 774ms
 ** keeping 1 of 2 deployed releases
  * executing "rm -rf /srv/www/my_project/releases/20120709190209"
    servers: ["server.example.com"]
    [server.example.com] executing command
    command finished in 811ms 
```

Which looks right...but as it turns out, Rails is not, in fact, still running, as a grep of the processes before and after reveals.

Before `Ctrl-C`, I see both the Capistrano command (19358), and the Rails server it started (19507):

```
user@server.example.com:~$ ps ax | grep rails | grep -v grep
19358 pts/1    Ss+  0:01 bash -c cd /srv/www/my_project/releases/20120709190521 && script/rails s
19507 pts/1    Sl+  0:41 ruby script/rails s 
```

After `Ctrl-C`, the Rails server is *still* there, or it appears to be:

```
user@server.example.com:~$ ps ax | grep rails | grep -v grep
19507 ?        Sl   0:41 ruby script/rails s 
```

But after I attempt to hit the site in a web browser, it disappears! Weird eh?

```
user@server.example.com:~$ ps ax | grep rails | grep -v grep
user@server.example.com:~$ [no output; returned to prompt] 
```

So, my question is: How do I do this thing? How do sever the communication between the running Rails process and Capistrano, allow Capistrano to move on to it's remaining tasks, and then give me back my terminal prompt, without stopping the Rails server? Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:11:30.390

您可以在 Ruby 中使用 Signal.trap 来捕捉 Ctrl-C。但是我不确定如何使用 Capistrano 做你需要做的事情——你想产生一个在 Capistrano 进程结束时不会终止的孙进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:06:15.587

我现在意识到这是一个 PEBCAC 错误。我的 Capistrano 脚本中的 Begin-Rescue-End 块没有捕获（拯救）我的*入站*Ctrl-C。它只是将它传递给正在运行的 Rails 服务器进程，该进程顺从地以 SystemExit 退出，然后将其传递回 Capistrano 脚本，然后捕获*出站*异常。到那时，这是一笔交易。无量抓处理*出境*Capistrano 脚本上下文中的异常会阻止 Rails 服务器停止。所以，我现在明白为什么它不起作用了。但我仍然很好奇是否有办法做我想做的事情。这意味着在 Capistrano 的某个地方捕获我的入站中断并在它可以传递到服务器之前对其进行处理。

# c# - 接口出现“使用未分配的局部变量”错误

> ID：11402246
> 
> 赞同：2
> 
> 时间：2012-07-09T20:03:49.697
> 
> 标签：c#, interface, null

我遇到了一些语法问题。我对接口不是很熟悉，所以请原谅我的无知。

VS2010 在...处给我一个错误`application.Name = System.AppDomain.CurrentDomain.FriendlyName;`

```
public static void AddApplication(string applicationName = null, string processImageFileName = null)
{
    INetFwAuthorizedApplications applications;
    INetFwAuthorizedApplication application;

    if(applicationName == null)
    {
        application.Name = System.AppDomain.CurrentDomain.FriendlyName;/*set the name of the application */
    }
    else
    {
        application.Name = applicationName;/*set the name of the application */
    }

    if (processImageFileName == null)
    {
        application.ProcessImageFileName = System.Reflection.Assembly.GetExecutingAssembly().Location; /* set this property to the location of the executable file of the application*/
    }
    else
    {
        application.ProcessImageFileName = processImageFileName; /* set this property to the location of the executable file of the application*/
    }

    application.Enabled =  true; //enable it

    /*now add this application to AuthorizedApplications collection */
    Type NetFwMgrType = Type.GetTypeFromProgID("HNetCfg.FwMgr", false); 
    INetFwMgr mgr = (INetFwMgr)Activator.CreateInstance(NetFwMgrType); 
    applications = (INetFwAuthorizedApplications)mgr.LocalPolicy.CurrentProfile.AuthorizedApplications;
    applications.Add(application);
} 
```

我可以通过设置`application`为使该错误消失，`null`但这会导致运行时空引用错误。

编辑：

这是我改编代码的地方。我希望它提供更多上下文 [http://blogs.msdn.com/b/securitytools/archive/2009/08/21/automating-windows-firewall-settings-with-c.aspx](http://blogs.msdn.com/b/securitytools/archive/2009/08/21/automating-windows-firewall-settings-with-c.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T20:05:14.820

你从不初始化

```
application 
```

在这里使用它之前：

```
application.Name = System.AppDomain.CurrentDomain.FriendlyName; 
```

变量应用程序定义为：

```
INetFwAuthorizedApplication application 
```

您需要分配一个实现接口的类的实例`INetFwAuthorizedApplication`。

在您的项目中必须有一个（或可能更多）类看起来像这样：

```
public class SomeClass : INetFwAuthorizedApplication
{
    // ...
}

public class AnotherClass : INetFwAuthorizedApplication
{
    // ...
} 
```

您需要确定应该使用哪个类（SomeClass，AnotherClass），然后分配一个适当的对象，例如：

```
INetFwAuthorizedApplication application = new SomeClass(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:17:14.560

接口用于描述一个对象的作用，而不是它具体是什么。用“现实世界”的术语来说，一个界面可能是这样的：

`ISmallerThanABreadbox`用一种`FitIntoBreadbox()`方法。我不能要求你给我“比面包盒还小的东西​​”……因为这没有任何意义。我只能要求你给我一些“比面包盒还小”的东西。你必须想出你自己的对象，这个对象对它有接口是有意义的。苹果比面包盒小，所以如果你的面包盒只能装比它小的东西，那么苹果就是一个很好的`ISmallerThanABreadbox`接口候选者。

另一个例子是`IGraspable`方法`Hold()`和`FitsInPocket`布尔属性。你可以要求得到一些可以抓握的东西，可能装在你的口袋里，也可能放不下，但你不能要求“可抓握的”。

希望有帮助...

# arrays - Bash：一个数组可以保存另一个数组的名称吗？

> ID：11402252
> 
> 赞同：4
> 
> 时间：2012-07-09T20:04:21.890
> 
> 标签：arrays, bash, for-loop

我正在编写一个程序并尝试分解存储在数组中的数据，以使其运行得更快。我试图这样做：

```
 data_to_analyze=(1 2 3 4 5 6 7 8 9 10)
    #original array size
    dataSize=(${#data_to_analyze[@]})

    #half of that size
    let samSmall="$dataSize/2"

    #the other half
    let samSmall2=("$dataSize - $samSmall -1")

    #the first half
    smallArray=("${data_to_analyze[@]:0:$samSmall}")

    #the rest
    smallArray2=("${data_to_analyze[@]:$samSmall:$samSmall2}")

    #an array of names(which correspond to arrays)
    combArray=(smallArray smallArray2)
    sizeComb=(${#combArray[@]})

    #for the length of the new array
    for ((i=0; i<= $sizeComb ; i++)); do
        #through first set of data and then loop back around for the second arrays data? 
        for sample_name in ${combArray[i]}; do
            command
            wait
            command
            wait
        done 
```

我想这样做只是首先将第一个数据数组提供给 for 循环。当第一个数组完成后，它应该再次通过第二个数组集。

这给我留下了两个问题。combArray 真的会传递两个较小的数组吗？还有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T22:35:45.367

您可以创建一个看起来像数组引用的字符串，然后使用它来间接访问引用数组的元素。它甚至适用于包含空格的元素！

```
combArray=(smallArray smallArray2)
for array in "${combArray[@]}"
do
    indirect=$array[@]    # make a string that sort of looks like an array reference
    for element in "${!indirect}"
    do
        echo "Element: $element"
    done
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:14:50.080

```
#!/bin/bash
data_to_analyze=(1 2 3 4 5 6 7 8 9 10)
dataSize=${#data_to_analyze[@]}
((samSmall=dataSize/2,samSmall2=dataSize-samSmall))
smallArray=("${data_to_analyze[@]:0:$samSmall}")
smallArray2=("${data_to_analyze[@]:$samSmall:$samSmall2}")
combArray=(smallArray smallArray2)
sizeComb=${#combArray[@]}
for ((i=0;i<$sizeComb;i++));do
    eval 'a=("${'${combArray[i]}'[@]}")'
    for sample_name in "${a[@]}";do
        ...
    done 
done 
```

编辑：删除 ${combArray[i]} 附近的双引号并将 <= 替换为 < in for

# c# - 是否可以在 ASP.NET 响应中使用 XSLT 输出 .XLSX 文件

> ID：11402254
> 
> 赞同：0
> 
> 时间：2012-07-09T20:04:26.773
> 
> 标签：c#, asp.net, xslt

我目前有一个 .xsl 文件，我正在使用 XSLT 将其输出为 .xls 文件并用 excel 打开它。

我使用响应对象在 ASP.NET 应用程序中输出它，如下所示：

```
context.Response.ContentType = "application/vnd.ms-excel";
context.Response.AddHeader("content-disposition", "inline;filename=MyFile.xml"); 
```

但是，这会将文件输出为 .xsl 扩展名并显示以下弹出消息：“您尝试打开的文件 'MyFile.xls' 的格式与文件扩展名指定的格式不同。验证文件是在打开文件之前没有损坏并且来自受信任的来源。你想现在打开吗？

我试图找出两件事，是否可以将其输出为 .xlsx 扩展名？因为当我尝试这样做并更改内容类型时，它根本不允许我打开文件，直到我将扩展名设置回 .xls。

第二，您如何通过更改代码来消除该消息？我发现了一些简单地指示您更改设置的响应，例如：http: [//support.microsoft.com/kb/948615](http://support.microsoft.com/kb/948615)

但是，客户端要求根本不显示错误消息。任何帮助在这里表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:39:03.030

不要使用 XSLT 来尝试生成 XLSX 文件，因为它不是一个简单的 XML 文件，正如有人所说的那样。您可以使用 NPOI 创建纯 XLS 文件，使用 ExcelPackage 或 ClosedXML 来生成 XLSX 文件。更多的工作，但它实际上是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:47:06.837

我发现了一些关于如何处理 .XML 文件扩展名的有趣信息。您似乎可以将 XML 文件标记为与 Excel 关联，这将导致 Microsoft XML 编辑器使用 Excel 打开该单个 XML 文件。

# c# - 在不使用 ORM 的情况下，在 c# 中创建独立于供应商的 dal 的最佳方法是什么？

> ID：11402259
> 
> 赞同：2
> 
> 时间：2012-07-09T20:04:44.680
> 
> 标签：c#, data-access-layer, vendor-neutrality

目前我有一个涉及两个数据库提供者的项目：

1.  SqlClient
2.  数据库

我需要创建一个处理这些提供程序的 DAL。我正在考虑创建一个这样的界面：

```
public interface IDataAccessLayer
{
    public string GetSomeData();
} 
```

并单独实现（虽然很简单这是错误的方式）

```
public class SqlClientDal : IDataAccessLayer
{
    public string GetSomeData() { }
}

public class OleDbDal : IDataAccessLayer
{
    public string GetSomeData() { }
} 
```

我读过一些这样的帖子：

[.Net：如何创建与供应商无关的数据集、表格适配器、绑定（DB 在运行时决定）](https://stackoverflow.com/questions/1057824/net-how-to-create-vendor-independent-dataset-tableadapters-bindings-db-deci)（很好，但没有提供任何示例）

[获取 DbProviderFactory](http://msdn.microsoft.com/en-us/library/dd0w4a2z)

[创建数据访问层 (C#)](http://www.asp.net/web-forms/tutorials/data-access/introduction/creating-a-data-access-layer-cs)（非常好，但表适配器取决于供应商）

我想创建一个具有以下功能的 DAL：

1.  使用类型化数据表（使用 Visual Studio Designer）
2.  使用独立于供应商的数据适配器（手动创建）
3.  不是 ORM

如何创建具有这些功能的简单 DAL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T23:36:57.077

请参阅我的回答[为任何数据库支持编写通用驱动程序类](https://stackoverflow.com/questions/13133804/writing-driver-class-generic-for-any-database-support)。除非您在编写自己的 DbAL 方面有非常特殊的需求，否则我建议您使用像[Dapper](http://code.google.com/p/dapper-dot-net/)或[FluentData](http://fluentdata.codeplex.com/)或[SqlFu](https://github.com/sapiens/SqlFu/wiki)这样的微型 ORM 。易用性（在我看来）是这些结构的引人注目之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:13:11.027

研究从以下类派生您的类：

```
System.Data.Common.DbConnection BaseConnection;
System.Data.Common.DbDataAdapter BaseAdapter;

namespace DAL
{
    public class DataAccess : DbConnection
    {
        protected override DbTransaction BeginDbTransaction(System.Data.IsolationLevel isolationLevel)
        {
            throw new Exception("The method or operation is not implemented.");
        }

        public override void ChangeDatabase(string databaseName)
        {
            throw new Exception("The method or operation is not implemented.");
        }

        public override void Close()
        {
            throw new Exception("The method or operation is not implemented.");
        }

        public override string ConnectionString
        {
            get
            {
                throw new Exception("The method or operation is not implemented.");
            }
            set
            {
                throw new Exception("The method or operation is not implemented.");
            }
        }

        protected override DbCommand CreateDbCommand()
        {
            throw new Exception("The method or operation is not implemented.");
        }

        public override string DataSource
        {
            get { throw new Exception("The method or operation is not implemented."); }
        }

        public override string Database
        {
            get { throw new Exception("The method or operation is not implemented."); }
        }

        public override void Open()
        {
            throw new Exception("The method or operation is not implemented.");
        }

        public override string ServerVersion
        {
            get { throw new Exception("The method or operation is not implemented."); }
        }

        public override System.Data.ConnectionState State
        {
            get { throw new Exception("The method or operation is not implemented."); }
        }
    }
} 
```

弄乱这些函数和类中的每一个。它非常灵活。

# iphone - 两台 iOS 设备之间的通信

> ID：11402263
> 
> 赞同：14
> 
> 时间：2012-07-09T20:04:53.417
> 
> 标签：iphone, ios, networking, communication

我正在寻找一种让一个 iPhone 应用程序向另一部手机上的另一个应用程序发送消息的方法（有点像一个发送者 - 接收者设置）。我正在寻找最好的方法来做到这一点。有没有人有任何想法和/或教程？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T20:09:40.250

你应该使用 GameKit。使用它在两个 iOS 设备之间发送消息非常容易。这是一个很棒的教程：[Game Kit](http://imagineric.ericd.net/2011/04/20/ios-gamekit-iphone-to-iphone-communication/)。您还可以从以下文档中获得更多信息：[关于 Game Kit](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)。

您通过创建自组织蓝牙或本地无线网络进行通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T05:45:19.223

lmirak 提供了有关设备通信（尤其是有关 GameKit）的深刻信息。我想再添加一个解决方案。您可以使用**WiFi**网络进行设备通信。

[查看链接或从developer.apple](http://developer.apple.com/library/ios/#samplecode/WiTap/Introduction/Intro.html)下载示例应用程序

名为 WiTap 的示例应用程序。它演示了如何实现应用程序之间的网络通信。使用 Bonjour，应用程序既在本地网络上宣传自己，又在网络上显示该应用程序的其他实例的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-17T01:25:49.907

如果您的应用程序只在 iOS 上运行，那么您应该使用出色的**MultipeerConnectivity**库。[https://developer.apple.com/documentation/multipeerconnectivity](https://developer.apple.com/documentation/multipeerconnectivity)

* * *

如果您需要一个可以跨平台工作的解决方案，那么实现此目的的一种方法是使用套接字并通过本地网络进行连接。在 iOS 上，您可以将 CocoaAsyncPods 用于套接字，将 NetService 用于发现。

这是一个执行此操作的基本示例应用程序：[https](https://github.com/brendaninnis/LocalNetworkingApp) ://github.com/brendaninnis/LocalNetworkingApp ，我在这里详细解释：http: [//brendaninnis.ca/connect-nearby-devices-part-1.html](http://brendaninnis.ca/connect-nearby-devices-part-1.html)

# javascript - 变量范围说明

> ID：11402265
> 
> 赞同：2
> 
> 时间：2012-07-09T20:04:56.930
> 
> 标签：javascript, jquery

我有一段 javascript 代码，我在“ **JavaScript Ninja 的秘密**”（John Resig 的书）中找到了它。我很难理解变量的行为。以下是代码（相对于原始代码进行了简化）：

```
(function() {
    var results;
    this.assert = function assert() {
        var li = document.createElement("li");
        results.appendChild(li);
        return li;
    };
    this.test = function test(name, fn) {
        results = document.getElementById("results");
        results = assert().appendChild(document.createElement("ul"));
        fn();
    };
})();
window.onload = function() {
    test("A test.", function() {
        assert();
        assert();
    });
}; 
```

我的问题是**结果**变量。当您输入“test”函数时，结果变量将首先取值**“ul#results”**，然后取值**“ul”**，这是**appendChild**函数的结果。但是当你输入**“fn()”**函数时，“results”的值仍然是“ul#results”。为什么？我有些难以理解这个变量的作用域。

有人可以帮我理解这个话题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:07:42.740

该变量是在匿名函数的范围内创建的。两者都`assert`访问`test`同*一个* `results`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:23:27.717

这可能比任何事情都更令人困惑，但基本上代码是递归地将一些子元素添加到 DOM 中的元素。这之所以成为可能，是因为闭包中定义了变量“结果”。该变量在该范围内仍然有效。

顺便说一句，这是一篇文章，展示了一些解释 javascript 中变量范围的测试。请记住，它不像您在这里所说的那样谈论闭包。但这可能有助于解释您将遇到的其他一些事情。

[http://www.computerhowtoguy.com/an-introduction-to-javascript-variable-scope/](http://www.computerhowtoguy.com/an-introduction-to-javascript-variable-scope/)

这是逐步解释的过程：

1.  window.onload 函数中的代码将具有“窗口”级别的范围。如果你要输出“this”，你会得到“window”对象。
2.  onload 函数调用“测试”。“test”，也可以写成 this.test 或 window.test，在一个闭包中。它是闭包中的“test”函数的原因是因为这行： this.test = ... 由于闭包是在窗口级别执行的，“this”指的是“window”对象。
3.  在“test”函数调用中，“this”指的是“window”对象。由于上面的断言函数定义为： this.assert = ... (window.assert) 它位于窗口对象级别。如果你确实 assert == window.assert 你会得到“真”，因为两者只是同一个（函数）对象的两个名称。
4.  运行这一行： assert().appendChild(document.createElement("ul")) 断言函数在它之后的任何内容之前执行。所以让我们进入断言代码......
5.  在断言中“this”仍然是“window”对象。创建了一个局部变量“li”，它引用了一个尚未附加到文档元素的新 DOM 元素。然后我们将这个新的 li 元素附加到“results”DOM 元素中。现在它是文档 DOM 对象的一部分。返回对 li 元素的 javascript 引用。
6.  现在回到： assert().appendChild(document.createElement("ul")) 调用 appendChild 函数，将新的 'ul' 元素附加到新创建的 'li' 元素。接下来，我们的 javascript“结果”对象再次被重新分配，这次是新创建的 ul 元素。最后，'fn'（我们从前的匿名函数）被调用。
7.  进入“fn”...“this”仍指window。assert 被调用，assert 仍然是对 window.assert 函数的引用 创建一个新的 li 元素并将其附加到“results”变量中。记住，最后一个“结果”被分配给了 ul 元素，所以我们给它附加了一个新的 li 。

此时的 DOM 结构看起来像这样：

```
<div id="results">
    <li>
        <ul>
            <li></li>
        </ul>
    </li>
</div> 
```

所以代码继续进行同样的事情......

这是修改后的代码，现在带有注释：

```
// the following is a closure.  a sort of isolated container with its own scope.
(function() {
    // results is not globally scoped, only scoped at the closure level,
    // since its defined with "var".
    var results;

    // "this" is the calling object. (ie: window object)
    this.assert = function assert() {

        // since "var" is used "li" is part of this function.
        var li = document.createElement("li");

        // results (at the closure level) appends a child at this function's level.
        results.appendChild(li);

        // return a javascript reference to the new DOM element.
        return li;
    };

    // again "this" is the calling object.  when called in onload below, "this" is the window object.
    this.test = function test(name, fn) {

        // results refers to the closure level results variable, since var is ommitted.
        // this is a reference to an element in the DOM.
        results = document.getElementById("results");

        // changing the variable now. the DOM object "results" is NOT altered by this assignment, since
        // javascript is separate from the DOM.
        // NOTE: the assert function was previously assigned to the window object previously.  so stuff in that
        // function will be window scoped.
        results = assert().appendChild(document.createElement("ul"));

        // call fn
        fn();
    };
})();

window.onload = function() {

    // at this point, "this" is the "window" object.
    // "test" is part of the closure above.  in the closure the test function is assigned
    // to "this".  since we are calling the function here, "this" will be the window object in the
    // closure for this call.
    test("A test.", 
        // an anonymous function.  this is really just an object passed into the "test" function
        function() {
            assert();
            assert();
        }
    );
}; 
```

# google-chrome - li with display: inline-block; Google Chrome 和 Safari 中的属性跳跃

> ID：11402268
> 
> 赞同：4
> 
> 时间：2012-07-09T20:05:07.770
> 
> 标签：google-chrome, safari, html-lists, css

我正在尝试建立一个网站，但遇到了一个棘手的问题，即 li 具有 display: inline-block; 财产。

我的网站是：[http ://www.gypsytours.in/](http://www.gypsytours.in/)

如果您访问此站点，在主页上，我在“吉普赛旅游公司的喜马拉雅套餐”标题下有一个水平列表。

在这个列表中，我有一个带有 display: block; 的块元素 A 财产。

这是我的简化代码：

**HTML**：

```
<div id="menu-board">
<ul>
<li><a href="#">Elephant Safari Packages in Jim Corbett Park, India</a></li>
<li><a href="#">Chopta Tungnath Trekking Package</a></li>
<li><a href="#">River Rafting Packages in Rishikesh</a></li>
</ul>
</div> 
```

**CSS**：

```
#menu-board
{
    text-align: center;
}
#menu-board ul
{
}
#menu-board ul li
{
    float: none;
    display: inline-block;
}
#menu-board ul li a
{
    display: block;
    width: 180px;
    height: 130px;
    background-color: #C50000;
    text-align: center;
    overflow: hidden;
} 
```

现在，问题是：我在第二个框中的链接文本不超过两行，这与链接文本在三行中传播的其他两个框不同。这个框在 IE 和 FireFox 中看起来非常好，但是当我在 Google Chrome 或 Safari 中打开该站点时，中间的框（文本相对较短）会弹出。如果我使文本足够长以跨越三行，它就会回到原来的位置。我无法弄清楚如何解决这个问题。我很抱歉不能以简单而简短的方式解决我的问题。我对网页设计相对缺乏经验。如果你们能帮助我，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T20:45:04.273

好的，经过更多挖掘，我发现这是一个计算浮点问题。

我相信添加：

```
#splash-list ul li a {
    float:left;
} 
```

will solve the problem. It may compute very slightly differently on other browsers, but at least they'll be in the proper line.

Hope this helps!

Mason

# svn - TortoiseSVN - 忽略文件和文件夹

> ID：11402272
> 
> 赞同：10
> 
> 时间：2012-07-09T20:05:27.537
> 
> 标签：svn, tortoisesvn

刚开始测试 TortoiseSVN。

所采取的行动：

*   创建文件夹 [项目名称] Repo。
*   在 Repo-Browser 中打开 [project name] Repo。
*   转到 Windows 中的项目文件夹。
*   右键单击要忽略的文件。
    *   从菜单中选择 TortoiseSVN。
    *   不存在忽略选项。
*   尝试了其他文件/文件夹。相同的。

帮助？谢谢。

编辑：

菜单中的选项，打开 Repo-Browser 并单击 [project].csproj：

*   回购浏览器
*   设置
*   关于

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T20:08:47.750

如果您从菜单中选择“SVN 提交”，然后选择您可以从那里忽略的文件/文件夹。

否则，您可以选择“TortoiseSVN > 属性”并在此处手动添加“SVN:ignore”条目。

注意：一旦文件被提交，您就不能忽略它。您必须取消版本，然后忽略它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-11-21T07:11:01.860

> 步骤 1) 右键单击​​项目存储库

> 步骤 2) 选择 TortoiseSVN

> 步骤 3）下一步选择设置（设置弹出窗口将打开）

> 第 4 步）在常规选项卡中，您将看到 Subversion 面板

> 步骤 5) 在 Subversion 面板中，您将看到“全局忽略模式”，添加您要忽略的文件夹名称。

> 步骤 6) 单击应用按钮，然后单击确定。

# radio-button - InfoPath 2010 单选按钮绑定到不同的字段

> ID：11402273
> 
> 赞同：0
> 
> 时间：2012-07-09T20:05:27.830
> 
> 标签：radio-button, infopath, infopath2010

我有大约 18 个单选按钮，每个按钮都绑定到自己的字段。它们都在同一个部分。然而，用户能够选择这些按钮中的一个以上。我希望用户只能选择这些按钮之一。我知道如果它们绑定到同一个元素，可以做到这一点，但是如果它们绑定到单独的元素，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T00:50:31.307

您将不得不使用任一规则（例如条件：button2 = "1"，规则类型：操作，运行这些操作：设置字段值：. = "0"），或在代码隐藏中编写自定义代码项目。

考虑到所涉及的按钮数量，我建议使用自定义代码（C# 或 Visual Basic），因为您将不得不设置**很多**规则来管理这一切，而且它会很快变得非常笨拙。

# linux - 一个命令中的密码不起作用

> ID：11402274
> 
> 赞同：0
> 
> 时间：2012-07-09T20:05:40.267
> 
> 标签：linux, jsch, passwd

我开发了一个工具，可以使用 JSch（一个用于通过 ssh 与其他机器通信的 java 库）一次性向不同的 linux 机器发送**单行命令**

所以我们的客户需要更改所有机器上的密码。谷歌帮助我达到了这一点：

`echo -e "123\n123" | passwd username` 其中“123”是新密码。

该命令执行，但这始终是输出：

```
[root@QNA-XR1 ~]# echo -e "123\n123" | passwd
Changing password for root
New password:
Retype password:
passwd: password for root is unchanged 
```

这表明该命令没有成功。

请注意，这是一个运行 linux 的小型设备。这是一个尽可能紧凑的私人编译版本。其实我对linux不太了解！

这是机器信息：

```
[root@QNA-XR1 ~]# uname -a
Linux QNA-XR1 2.6.22-XR100-v1.1.7 #1 Tue Aug 19 22:55:50 EDT 2008 ppc unknown 
```

密码帮助：

```
[root@QNA-XR1 ~]# passwd --help
BusyBox v1.7.3 (2008-01-09 00:06:30 EST) multi-call binary

Usage: passwd [OPTION] [name]

Change a user password. If no name is specified,
changes the password for the current user.

Options:
        -a      Define which algorithm shall be used for the password
                (choices: des, md5)
        -d      Delete the password for the specified user account
        -l      Locks (disables) the specified user account
        -u      Unlocks (re-enables) the specified user account 
```

回声帮助

```
[root@QNA-XR1 ~]# help echo
echo: echo [-neE] [arg ...]
    Output the ARGs.  If -n is specified, the trailing newline is
    suppressed.  If the -e option is given, interpretation of the
    following backslash-escaped characters is turned on:
        \a      alert (bell)
        \b      backspace
        \c      suppress trailing newline
        \E      escape character
        \f      form feed
        \n      new line
        \r      carriage return
        \t      horizontal tab
        \v      vertical tab
        \\      backslash
        \num    the character whose ASCII code is NUM (octal).

    You can explicitly turn off the interpretation of the above characters
    with the -E option. 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:14:41.490

您可以使用 chpasswd （作为 root 但它不安全）：

```
# echo "user:passwd" | chpasswd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:11:01.117

`/bin/passwd`可能正在打开`/dev/tty`以强制从终端而不是管道读取。

您最好使用 加密（实际上是散列）您的新密码`crypt()`，然后在`/etc/shadow`（对于有它的系统）或`/etc/passwd`（对于没有它的系统）替换密码散列。这有点依赖于操作系统的缺点，但它不会进入奇怪的 tty 游戏。

您也可以在 ssh 中强制分配一个 tty - ssh 可以在有或没有一个的情况下运行。然后你会在两次以明文形式发送密码之前添加一些延迟 - 这种方法对操作系统的依赖程度较低，但有时 tty 游戏可能不那么有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-16T10:53:11.597

您可以使用单个命令来更改用户密码。

`echo -e "password\npassword" | sudo -S passwd testuser`

# python - 在 Eclipse 中扩展 PyDev 编辑器，并排显示用于实时编码，如 Bret Victor 的演示

> ID：11402278
> 
> 赞同：1
> 
> 时间：2012-07-09T20:06:03.400
> 
> 标签：python, eclipse, eclipse-plugin, pydev

我编写了一个用于[在 Python 中进行实时编码](https://github.com/donkirkby/live-py-plugin)的 Eclipse 插件，它向 PyDev 编辑器添加了一个显示列。在该列中，它显示了变量值如何随着代码运行而变化，包括用于循环或重复函数调用的多个列。编辑代码时会更新显示。

我的问题是：如何干净地扩展 PyDev 编辑器以添加这个额外的列，该列将随源代码垂直滚动，并水平滚动以在长时间运行的循环中显示许多列？我的愿景是创建类似于比较两个文本文件时得到的窗口的东西，但仍然让用户编辑 Python 代码并使用 PyDev 编辑器的语法突出显示。目前，我只显示文本，但我还希望能够在此列中显示图形。

我目前使第一个版本正常工作的技巧是将行号标尺子类化并用我自己的文本替换行号。这真的很难看，尤其是我实现水平滚动的方式。

如果 PyDev 团队中的任何人有兴趣合并该功能或公开一些扩展点以使其更好地工作，我很乐意完成繁重的工作并提出拉取请求。不过，我确实需要一些指导。

这个想法来自 Bret Victor 的演讲，[Inventing on Principle](http://www.youtube.com/watch?v=PUv66718DII)，特别是 17:30-21:30 的部分。如果你想看看我到目前为止实现了什么，我发布[了一个演示视频](http://www.youtube.com/watch?v=ZrbIVMdChDQ)，以及[一个演练](http://donkirkby.blogspot.ca/2012/06/live-coding-in-python.html)。

这是二进制搜索算法的示例显示。（显示在左边，代码在右边。）

```
 # echo on                               
                        # echo width 40
n = 4 a = [1, 2, 4]     def search(n, a):
low = 0                     low = 0
high = 2                    high = len(a) - 1
        |                   while low <= high:
mid = 1 | mid = 2               mid = (low + high) / 2
v = 2   | v = 4                 v = a[mid]
        |                       if n == v:
        | return 2                  return mid
        |                       if n < v:
        |                           high = mid - 1
        |                       else:
low = 2 |                           low = mid + 1
                            return -1

i = 2                   i = search(4, [1, 2, 4]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T05:24:39.580

在 PyDev 团队的 Ingo 和 Fabio 提供一些有用的提示后，我取得了一些进展。主要提示是为事件创建扩展`org.python.pydev.pydev_pyedit_listener`并注册`onCreatePartControl`，然后围绕常规`PyEdit`控件包装另一个组合。[SWT 小部件参考](http://www.eclipse.org/swt/widgets/)有助于学习如何构建扩展界面。

另一个挑战是同步两个滚动条。似乎您必须注册该`onCreateSourceViewer`事件，然后注册一个视口侦听器。

[我在github](https://github.com/donkirkby/side-py-side)上发布了一个示例项目来演示该技术。

# ruby-on-rails - 如何在 Rails (2.x) 脚本中急切地加载所有依赖项？

> ID：11402281
> 
> 赞同：2
> 
> 时间：2012-07-09T20:06:18.950
> 
> 标签：ruby-on-rails, multithreading, activesupport

我在 Rails 2 应用程序中有一个脚本，该脚本涉及使用线程并行执行许多任务（使用[并行](https://github.com/grosser/parallel)gem）。由于 Rails（或 ActiveSupport？）加载依赖项的方式，我遇到的是未初始化常量的问题。

我的在线研究向我表明，我可能应该使用`config.threadsafe!`或类似的东西来解决这个问题。但是，那里的问题是我不想改变整个应用程序的工作方式（通过更改 environment.rb），因为线程的使用实际上是本地化到这个脚本的。

到目前为止，我所做的只是在创建任何新`Thread`对象之前初始化尽可能多的常量：

```
constants_to_load = [
  User,
  Merchant,
  Loggable,
  UserMailer,
  # etc.
]

# code involving threads 
```

这显然不是一个好方法，因为它完全基于我自己猜测的需要加载哪些常量的列表（主要是在遇到异常时反应性地添加常量），并且与它所获得的未来证明相去甚远。是否可以只说“加载我可能需要的一切”之类的话？我知道这可能听起来很糟糕。这对我来说似乎是最简单的方法。但如果有另一种方法可以做到这一点，我会全力以赴。

# c# - C#：System.Configuration.Configuration 在寻找什么？

> ID：11402282
> 
> 赞同：3
> 
> 时间：2012-07-09T20:06:22.933
> 
> 标签：c#

我有以下测试方法：

```
[TestMethod]
public void TestHarvestMethod()
{
    HarvestTargetTimeRangeUTC time = new HarvestTargetTimeRangeUTC();
    time.StartTimeUTC = new DateTime(2008, 01, 01, 00, 00, 00, DateTimeKind.Utc);
    time.EndTimeUTC = DateTime.UtcNow;
    XElement lIntelexReport = XElement.Parse(rawXml);
    Harvester target = new Harvester();
    target.ConfigureHarvester((System.Configuration.Configuration)null);  
    var res = target.Harvest(time);
    Console.WriteLine(res);
 } 
```

与此方法结合使用：

```
public void ConfigureHarvester(System.Configuration.Configuration configuration)
{
    reportId = Int32.Parse(configuration.AppSettings.Settings["IncidentReport"].Value);
} 
```

测试这个方法：

```
public XElement Harvest(HarvestTargetTimeRangeUTC ranges)
{
    XElement lIntelexReport = IntelexServiceCall();  
    return XMLConversion(QueryData(ranges, lIntelexReport));
} 
```

问题是我收到 Null Exception 错误，指出“对象引用未设置为对象的实例”。在这条线上：

```
reportId = Int32.Parse(configuration.AppSettings.Settings["IncidentReport"].Value); 
```

我几乎肯定是由这里的空值引起的：

```
target.ConfigureHarvester((System.Configuration.Configuration)null); 
```

上一行中的 System.Configuration 是本店常用的一种，但通常用于这样的方法：

```
public void ConfigureHarvester(System.Configuration.Configuration configuration)
{
    context = new PlannedOutageFactorDataContext();            
} 
```

所以我的 reportid 字段显然是在寻找空值以外的东西，问题是我不知道它在寻找什么。我已经阅读了 System.Configuration 的 MSDN，但它确实没有帮助。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:10:02.027

它正在寻找您将您的 web.config 或 app.config 值的副本传递给它，以便它可以从中提取所需的信息（保存在 AppSettings 部分中）

例如

```
<configuration>
    <appSettings>
        <add key="IncidentReport" value="1" />
    </appSettings> 
</configuration> 
```

如果您测试网页，很多时候您需要设置 web 服务的位置，以便它可以从您的网站获取 web.config 的副本。

如果您正在开发控制台/桌面应用程序，请确保您有一个 app.config 文件

或者，您可以使用手动传递它

```
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(exePath); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:15:34.503

在您的测试程序集中，您需要有一个 app.config 文件。在此文件中，您需要一个名为“IncidentReport”的键，其值为整数。

# jquery - jQuery Mobile 标题中的多个按钮和搜索位置？

> ID：11402290
> 
> 赞同：0
> 
> 时间：2012-07-09T20:07:11.703
> 
> 标签：jquery, mobile, css, jquery-mobile

我试图在 jQuery Mobile 的同一行上添加一个搜索输入和三个按钮，但结果真的很令人沮丧。这是我正在尝试的代码：

```
<div data-role="header" class="header">
    <input type="search" name="search" id="search-header" value="" data-mini="true" data-inline="true" data-theme="c" />
    <a href="#menu_page" data-role="button" data-icon="search" data-iconpos="notext">Search</a>
    <a href="#menu_page" data-role="button" data-icon="grid" data-iconpos="notext" data-rel="dialog">View</a>
    <a href="#menu_page" data-role="button" data-icon="arrow-d" data-iconpos="notext" data-rel="dialog">Menu</a>
</div> 
```

使用这样的 CSS：

```
.page .header .ui-input-search
{
    margin-right: 90px;
} 
```

我可以使用 JQM 附带的默认图标，但是放置最终看起来像这样：

![在此处输入图像描述](../Images/ca85abd57e3fecccf46e76b4669a9d6c.png)

我什至尝试仅在按钮周围以及按钮和输入框周围放置一个控制组，但将按钮放在搜索框下方。

我将如何在 JQM 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:27:58.480

您是否尝试删除边距？我马上看到这可能会导致一些问题。此外，您可能想要浮动您的图像。

我在这里有一个解决方案：http: [//jsfiddle.net/cncpts/B4Pa6/2/](http://jsfiddle.net/cncpts/B4Pa6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:11:09.527

我想我成功了！

```
<div data-role="header" class="header">
    <input type="search" name="search" value="" data-mini="true" data-theme="c" class="search-header" />
    <div class="ui-btn-right">
        <a href="#menu_page" data-role="button" data-icon="search" data-iconpos="notext">Search</a>
        <a href="#menu_page" data-role="button" data-icon="grid" data-iconpos="notext" data-rel="dialog">View</a>
        <a href="#menu_page" data-role="button" data-icon="arrow-d" data-iconpos="notext" data-rel="dialog">Menu</a>
    </div>
</div> 
```

# ruby - 通过 RVM 在 Ubuntu 上安装 Ruby 1.9.2

> ID：11402292
> 
> 赞同：1
> 
> 时间：2012-07-09T20:07:37.170
> 
> 标签：ruby, linux, ubuntu, rvm

尝试在我的服务器上安装和使用 ruby​​ 1.9.2。运行 Ubuntu 11.10。

```
 $ rvm use 1.9.2
    Using /usr/share/ruby-rvm/gems/ruby-1.9.2-p180
    $ ruby -v
    ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux] 
```

等等……什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T11:33:53.977

如果您随时需要，以下是全新安装的步骤：

bash -sk 稳定 <<(curl -sk [https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer](https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer) )

echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # 加载 RVM 函数' >> ~/.bash_profile

源〜/ .bash_profile

源 /etc/profile.d/rvm.sh

rvm requirements #让您知道系统依赖项以及是否需要安装任何其他库

rvm 安装 1.9.2-p290

rvm 使用 1.9.2 --default

rvm gemset 创建演示

rvm demo@1.9.2

然后安装导轨

宝石安装导轨 -v=3.0.4

如果您在任何时候弄乱了您的 rvm，您可以使用 rvm implode 或 rm -rf ~/.rvm 将其删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:39:24.780

您使用的是 RVM 的错误版本，请使用此说明安装正确的版本：[https ://stackoverflow.com/a/9056395/497756](https://stackoverflow.com/a/9056395/497756)

# javascript - Django和javascript问题

> ID：11402297
> 
> 赞同：1
> 
> 时间：2012-07-09T20:07:55.360
> 
> 标签：javascript, django

我想像在代码中一样将变量注入到 url 中。但它给出了一个错误。

```
 function initializeDataTable(id){
        var columnSize = $('table th').size();
    $('#table').dataTable({
        "sDom" : 'rtFip>',
        'fnDrawCallback' : function() {
            $('input:checkbox, input:radio').checkbox();
        },
        "bStateSave": true,
        'sPaginationType' : 'full_numbers',
        "bServerSide" : true,
        "sAjaxSource" : "{% url 'get_menu_list' '" + id + "' %}"
   });
  }; 
```

我想获得选定的选项，在选项更改事件中，我将调用上面的函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:12:20.777

你不能这样做：

```
"sAjaxSource" : "{% url 'get_menu_list' '" + id + "' %}" 
```

`{% %}`是服务器端指令。服务器处理它们，然后将它们放入响应页面。javascript 函数在客户端运行。它无法与服务器对话并以您在这里期望的方式向它询问数据。您将不得不做一些不依赖于服务器的事情，例如：

```
"sAjaxSource": "/get_menu_list/" + id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:13:10.130

我认为您将服务器端的事情与客户端混淆了。这件作品

```
 "{% url 'get_menu_list' '" + id + "' %}" 
```

应该在服务器端解释。到那时服务器端还不知道'id'是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T19:11:12.517

然后你可以将 url 作为变量传递给你的函数：

```
<script>
function initializeDataTable(data_url) {
    var columnSize = $('table th').size();

    $('#table').dataTable({
        "sDom" : 'rtFip>',
        'fnDrawCallback' : function() {
            $('input:checkbox, input:radio').checkbox();
        },
        "bStateSave": true,
        'sPaginationType' : 'full_numbers',
        "bServerSide" : true,
        "sAjaxSource" : data_url
   });
}

$(function(){
    initializeDataTable("{% url 'get_menu_list' item.id %}");
});
</script> 
```

您可以在您的网址中使用令牌：

```
<script>
var url_pattern = "{% url 'get_menu_list' '{id}' %}";
function initializeDataTable(id) {
    var columnSize = $('table th').size();

    $('#table').dataTable({
        "sDom" : 'rtFip>',
        'fnDrawCallback' : function() {
            $('input:checkbox, input:radio').checkbox();
        },
        "bStateSave": true,
        'sPaginationType' : 'full_numbers',
        "bServerSide" : true,
        "sAjaxSource" : url_pattern.replace('{id}', id)
   });
}

$(function(){
    initializeDataTable(42);
});
</script> 
```

请注意，您的令牌应该与正则表达式类型匹配才能成功解析（如果它是用 定义的，则不能`{id}`用作令牌`\d+`，而是使用`0000`）。

我对这个解决方案有点不满意，最后我编写了自己的应用程序来使用 django 处理 javascript：[django.js](http://pypi.python.org/pypi/django.js)。

使用此应用程序，您可以：

```
{% load js %}
{% django_js %}
<script>
function initializeDataTable(id) {
    var columnSize = $('table th').size();

    $('#table').dataTable({
        "sDom" : 'rtFip>',
        'fnDrawCallback' : function() {
            $('input:checkbox, input:radio').checkbox();
        },
        "bStateSave": true,
        'sPaginationType' : 'full_numbers',
        "bServerSide" : true,
        "sAjaxSource" : Django.url('get_menu_list', id)
   });
}

$(function(){
    initializeDataTable(42);
});
</script> 
```

要确保 Django.js 加载 url，请监听`ready`事件：

```
// Wait for document ready
$(function(){
    initializeDataTable(42);
});

// Wait for Django ready
Django.onReady(function(){
    initializeDataTable(42);
}); 
```

# java - 中级进度不适用于在 Gingerbread 上运行的 ActionBarSherlock

> ID：11402299
> 
> 赞同：5
> 
> 时间：2012-07-09T20:08:00.243
> 
> 标签：java, android, progress-bar, android-actionbar, actionbarsherlock

我用我的应用程序设置了 ActionBarSherlock，我正在尝试使用中间进度，我正在使用这个：

```
 requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);    
    setSupportProgressBarIndeterminateVisibility(false); 
```

在我的 onCreate 中，然后使用：

```
 setSupportProgressBarIndeterminateVisibility(true); 
```

启用它。

它在 ICS 中运行良好，但在 Gingerbread 或 Froyo 中根本不起作用，有人知道如何让它工作吗？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T08:19:23.420

我只是有同样的问题。上面 Jake 的解决方案没有为我解决 - 该方法未定义。

我在这里找到了 Jake 在 ActionBarSherlock 的错误列表中发布的工作解决方案：

*   [操作栏不确定进度条不消失](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/ixMX62VBcBY)

请参阅 Jake 对海报的回应——诀窍是首先调用`getSupportActionBar()`，以“触发视图的创建”。

所以我的`onCreate()`方法是：

```
protected void onCreate(Bundle arg0)
{
    super.onCreate(arg0);

    // allow window to show progress spinner in the action bar
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    getSupportActionBar();
    setSupportProgressBarIndeterminateVisibility(false); 
} 
```

* * *

**根据 Laux 的评论更新：**

确保您的导入反映`com.actionbarsherlock.view.Window.FEATURE_INDETERMINATE_PROGRESS`此功能。

这是我`import`使用此模式的应用程序块的一部分：

```
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.ActionProvider;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.view.Window;
import com.actionbarsherlock.widget.ShareActionProvider; 
```

使用 ABS 时要记住这一点非常好 - 您应该更新许多正常的 Android 导入以引用 ABS。

重新访问您的导入块可能是个好主意，或者可能完全删除它并让 Eclipse 为您重建它（CTRL-SHIFT-O），此时 Eclipse 将提示您进行 ABS 重新声明的每个导入。

Glebbb 在[他的回答](https://stackoverflow.com/a/13740564/383414)中也解释了这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T09:30:13.417

我敢肯定你现在可能已经弄清楚了，但最可能的罪魁祸首是你包含了错误的文件，因为它很容易自动完成。

将任何导入的**android.view.Window**替换为**com.actionbarsherlock.view.Window**并且所需的功能将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:10:52.967

你需要打电话`supportRequestWindowFeature`。

`requestWindowFeature`是最后的方法，`Activity`不能被覆盖。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T07:36:34.973

检查您是否`Theme.Sherlock.NoActionBar`为此活动使用或类似的无操作栏主题。在这种情况下`setSupportProgressBarIndeterminateVisibility`，方法对我来说失败了

```
Caused by: java.lang.NullPointerException
at com.actionbarsherlock.internal.ActionBarSherlockCompat.updateProgressBars(ActionBarSherlockCompat.java:710)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.onIntChanged(ActionBarSherlockCompat.java:686)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.updateInt(ActionBarSherlockCompat.java:681)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setFeatureInt(ActionBarSherlockCompat.java:665)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setProgressBarIndeterminateVisibility(ActionBarSherlockCompat.java:637)
at com.actionbarsherlock.app.SherlockFragmentActivity.setSupportProgressBarIndeterminateVisibility(SherlockFragmentActivity.java:282) 
```

我想您应该使用进度对话框来指示加载过程或定期`Theme`使用活动标题栏，然后使用`setProgressBarIndeterminateVisibility`旧平台的方法。

# jquery - 不使用 twitter api 时 getJSON 不起作用

> ID：11402304
> 
> 赞同：0
> 
> 时间：2012-07-09T20:08:40.810
> 
> 标签：jquery, ajax, json, twitter, jsonp

我今天刚开始使用 getJson，在 json/jquery/ajax 方面我是个主要的新手。我一直在使用： http: [//www.marcofolio.net/webdesign/jquery_quickie_unlimited_scroll_using_the_twitter_api.html](http://www.marcofolio.net/webdesign/jquery_quickie_unlimited_scroll_using_the_twitter_api.html)

以上是关于创建无限滚动条的教程的链接，该滚动条一次从 Twitter 获取的 json 文件中加载多条推文。当我下载该 json 文件并尝试通过 localhost 或通过其他托管服务使用它时，我无法让它工作。查看 chrome 网络工具，它说该方法适用于两者，状态为 200 ok，但类型为 application/json 用于 localhost 和 application/javascript 用于工作。

怎么了？如何让脚本加载我在本地拥有的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:12:25.360

getJSON 适用于 JSONP，这是一种跨域通信的有效方式。请阅读它并查看回复。

# r - R: f(x) != sapply(x,f) -- 错误还是功能？

> ID：11402306
> 
> 赞同：1
> 
> 时间：2012-07-09T20:08:43.010
> 
> 标签：r, apply

```
> f =  function(x) as.Date(as.character(x), format='%Y%m%d')
> f(20110606)
[1] "2011-06-06"
> sapply(20110606, f)
[1] 15131 
```

为什么2个返回值不一样。我需要将此函数应用于很长的日期向量，但我没有使用 sapply() 获取日期！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T20:24:00.327

您用来创建的函数`f`已经矢量化。没有必要使用`sapply`，除非您在冗余部门工作。

```
> f <- function(x) as.Date(as.character(x), format='%Y%m%d')
> d <- 20110606 + 0:10
> f(d)
 [1] "2011-06-06" "2011-06-07" "2011-06-08" "2011-06-09"
 [5] "2011-06-10" "2011-06-11" "2011-06-12" "2011-06-13"
 [9] "2011-06-14" "2011-06-15" "2011-06-16" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T20:11:56.420

```
> lapply(20110606, f)
[[1]]
[1] "2011-06-06"

> unlist(lapply(20110606, f))
[1] 15131 
```

`sapply`取消列出 lapply 并在这样做时取消分类日期

```
> unclass(lapply(20110606, f)[[1]])
[1] 15131
> class(lapply(20110606, f)[[1]])
[1] "Date" 
```

正如@Joshua Ulrich 所指出的，没有必要使用应用类型函数，但是出于兴趣

```
 d <- 20110606 + 0:10
 do.call("c",lapply(d, f)) 
```

将是“取消列出”日期的一种可能方式

# python - Python 日志查看器 GUI

> ID：11402311
> 
> 赞同：4
> 
> 时间：2012-07-09T20:08:55.767
> 
> 标签：python, file, logging, viewer

我是 python 新手，我想构建一个 GUI，我可以在其中同时看到从任何其他应用程序生成的三个或四个日志文件。我曾经做一个`less`命令来查看其他应用程序的日志文件，但是我有很多日志文件，很难识别错误。

请问有什么意见/建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-01-17T07:46:05.823

[对于您的目的， cutelog](https://github.com/Busimus/cutelog)可能是一个不错的选择。

最小的设置是

### 安装并运行可爱日志

```
pip install cutelog 
```

在 Windows 上，`cutelog.exe`可以在您的`<path_to_python>/Scripts`文件夹中找到。

### 配置您的日志记录

您需要在`SocketHandler`记录器中添加一个。

```
import logging 
from logging.handlers import SocketHandler

# The root logger. Could be any logger you have existing in your app.
logger = logging.getLogger()
socket_handler = SocketHandler("127.0.0.1", 19996)  # default listening address
logger.addHandler(socket_handler) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:13:21.897

我会使用[PyQt](http://www.riverbankcomputing.co.uk/software/pyqt/intro)（Qt 的 python 绑定）并且可能使用四个`QTableWidget`窗格来跟踪四个日志文件。但这只是个人喜好。Python 还具有 Wx 窗口工具包、GTK 和 Tk 的绑定。

# javascript - 如何在点击时加粗标签？

> ID：11402312
> 
> 赞同：1
> 
> 时间：2012-07-09T20:08:58.287
> 
> 标签：javascript, html, css

所以标签是从数据库中填充的。单击标签后，标签需要变为红色和粗体。当点击另一个标签时，第一个标签需要恢复到原始状态，新标签应该被激活，它需要是粗体和红色。出于某种原因，changeActiveStates() 仅适用于前两个标签，即，当单击第一个标签时，它变为红色，当单击第二个标签时，第一个标签变为黑色，第二个标签变为红色。单击第三个标签时，第二个标签保持红色，第三个标签变为红色。我该如何解决？？

这是代码：

```
<html>
<span>
<input type="hidden" name="LiabFilter" id= "idLib<%=liabkey %>" value="<%=liabkey %>" />
<div>
<label for="idLib<%=liabkey%>" id="liablabel" style="cursor: hand; padding-left: 25px; font-weight: normal" 
                                    onClick ="clearLiabFilter();  
                                    document.getElementById('idLib<%=liabkey%>').checked = true; 
                                    changeActiveStates(this);">
<%=liab.getName() %> 
</br>
</label>
</div>
</span>
<style type="text/css">
               .activate { font-weight: bold; color:#e40000;}
               .visited{ font-weight: normal; color: #000000;}

                </style>
<script>
function byId(id) { 
    return document.getElementById ? document.getElementById(id) : document.all[id];
} 

var prevLink = ""; 

function changeActiveStates(ele) { 
    if (prevLink) byId(prevLink).className = '';
    ele.className = 'activate'; 
    prevLink = ele.id; 
    }
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:14:27.860

你讨厌 JQuery 吗？

如果没有，这应该有效。

```
$('label').click(function() {
    $('label').removeClass('activate'); /* Remove 'activate' class from all labels */
    $(this).addClass('activate'); /* Add 'activate' class to clicked label
}); 
```

编辑：[关于 jsFiddle 的示例](http://jsfiddle.net/Ru3fb/)

编辑：更详细一点，因为提问者以前没有使用过 JQuery。

[JQuery 是一个 javscript 库](http://jquery.com/)，因此必须由浏览器加载，然后才能执行所有漂亮的操作。

`<head></head>`在页面上的标签之间添加以下内容：

```
<script src="http//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

（[为什么让 google 为你托管 JQuery？](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)）

然后添加以下内容，也在标签之间但在上面给出的脚本标签之后：

```
$(document).ready(function() { 
    $('label').click(function() {
        $('label').removeClass('activate'); /* Remove 'activate' class from all labels */
        $(this).addClass('activate'); /* Add 'activate' class to clicked label
    });
}); 
```

（[$(document).ready() 是做什么的？](http://www.learningjquery.com/2006/09/introducing-document-ready)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:14:27.610

也许不是最好的解决方案，但你考虑过使用 jQuery 吗？它通常不会有太大的依赖关系，并且会为您非常优雅和轻松地解决这些问题。加。跨浏览器兼容性。

# asp-classic - 我可以从 ASP 经典页面 (JScript) 使用 jsOAuth 吗？

> ID：11402313
> 
> 赞同：2
> 
> 时间：2012-07-09T20:09:04.977
> 
> 标签：asp-classic, jscript, jsoauth

有一个用于执行 OAuth 的 Javascript 库 - 称为[jsOAuth](https://github.com/bytespider/jsOAuth)。

可用的示例表明它是在浏览器中使用的。还有一些示例声称展示了如何从 Node.js 使用它。

它也可以从 ASP Classic / JScript 中使用吗？

关键测试是：
*jsOAuth 是否可以用于代表用户从 ASP 经典页面发布推文？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:21:13.813

不，我不这么认为。

该库有几个问题阻止它按原样使用，来自用 Javascript 实现的 ASP-Classic 页面。

1.  该库的基本语法假定一个`require`包和一个众所周知的`exports`变量。这些约定在 ASP Classic 中不存在。它还直接将属性分配给全局“this”对象，这[在 ASP Classic 中是无法直接实现的](https://stackoverflow.com/questions/9629993/inserting-objects-into-global-scope-in-classic-asp-javascript)。

2.  jsOAuth 假定`map`所有 Array 类型上都存在该方法。

3.  jsOAuth 直接从 XMLHttpRequest 构造函数实例化 XMLHttpRequest 实例。此构造函数在现代浏览器的 Javascript 执行环境中可用，但在 ASP-Classic 中不可用。该库可以回退到使用 `new ActiveXObject("MSXML2.ServerXMLHTTP")`，但它没有。

4.  该库假定异步 XMLHttpRequest 操作。在浏览器中，这工作得很好。但是在 ASP-Classic 页面中，页面进程*结束*，这意味着挂起的异步调用是孤立的。在 ASP-Classic 环境中，有必要对受 OAuth 保护的服务提供者进行同步调用。

* * *

所以开箱即用，不可能。在 ASP Classic 中使用它的另一个主要障碍是缺乏合适的文档和示例。

可以修改库以允许它在 ASP Classic 中使用；我整理了一个修改版。我会尽快发布。

# c# - EmguCV ImageGrabbed 事件 WPF 应用程序

> ID：11402314
> 
> 赞同：1
> 
> 时间：2012-07-09T20:09:06.563
> 
> 标签：c#, multithreading, emgucv

我对以下代码有问题

```
namespace MyApp
{    
    public partial class PhotoWindow : Window
    {
        private Capture _capture;

        public PhotoWindow ()
        {
            InitializeComponent();    
            _capture = new Capture();

            if (_capture != null)
            {
                //<Image> in XAML
                CaptureSource.Width = 150;
                CaptureSource.Height = 180;

                _capture.ImageGrabbed += ProcessFrame;
                _capture.Start();                
            }

            Activated += (s, e) => _capture.Start();
            Closing += (s, e) =>
            {
                if (_capture == null) return;
                _capture.Stop();                
                _capture.Dispose();
            };
        }

        private void ProcessFrame(object sender, EventArgs e)
        {
            try
            {
                Image<Bgr, Byte> frame = _capture.RetrieveBgrFrame();                   
                CaptureSource.Source = Helper.ToBitmapSource(frame);
            }
            catch (Exception exception)
            {

                System.Windows.MessageBox.Show(exception.ToString());
            }
        }

    }
} 
```

当我运行应用程序时，我`System.InvalidOperationException: The thread that this call can not access this object because the owner is another thread`在线得到异常`CaptureSource.Source = Helper.ToBitmapSource(frame);`

**因为我可以解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:17:23.313

似乎 ImageGrabbed 事件是从 Capture 的后台线程引发的，因此您的处理程序在该线程中运行，而不是在窗口的 UI 线程中运行。

您可以使用 Dispatcher 在控件的 UI 线程中调用代码。

```
CaptureSource.Dispatcher.Invoke(() =>
{
   Image<Bgr, Byte> frame = _capture.RetrieveBgrFrame();                   
   CaptureSource.Source = Helper.ToBitmapSource(frame);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T08:19:10.127

我`Emgu.CV.UI.ImageBox`在 UI 中使用来显示来自 Capture 的 Image<,> 框架

```
Image<Bgr, Byte> frame = _capture.RetrieveBgrFrame();    
imageBox.Invoke(new Action(() => imageBox.Image = frame)); 
```

# javascript - 在 jQuery 中做这件事有什么问题吗？

> ID：11402318
> 
> 赞同：-1
> 
> 时间：2012-07-09T20:09:29.063
> 
> 标签：javascript, jquery

我可以做到而不用担心性能问题吗？

```
$(document).ready(function() {

(function(new_selector) { new_selector('.classname').fadeIn('fast'); })($);

}); 
```

或者

```
$(function() {

(function(new_selector) { new_selector('.classname').fadeIn('fast'); })($);

}); 
```

谢谢。

也许这可能是一个白痴问题，但我喜欢担心性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:13:06.983

就性能而言，**没有**（显着？）差异。

如果您传递一个函数，它将被简单地代理给`.ready()`方法。

如果您担心性能，请尽量避免`.class`选择器。

# android - 移植 Android 应用程序网站？（编辑：到任何其他平台？）

> ID：11402323
> 
> 赞同：0
> 
> 时间：2012-07-09T20:09:52.687
> 
> 标签：android, ios, google-chrome, android-emulator

无论如何将Android应用程序移植到网站？

编辑：或将其移植到*任何其他平台*

例如，如果人们没有 Android（iOS、计算机等），我希望他们导航到网站并访问 Android 应用程序的网络版本。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:13:38.090

最好的选择可能是反其道而行之：从已经为 HTML 和 Android 应用程序提供支持的 API 开始开发。

想到了PhoneGap之类的东西。

* * *

> 但是有没有一种工具可以将已经制作的 Android 应用程序移植到任何其他平台？

没有我知道的。虽然您可以将 HTML 应用程序封装在 Android Web 组件中，但您需要重写整个兼容性层以将所有 Android API 转换为等效的 HTML/Javascript...当然，我什至没有考虑这种可行性项目，考虑到每个之间的差异。

> 编辑：或将其移植到任何其他平台

很抱歉没有完全解决您的问题，我没有注意到这一点。是的，就像 Chris Stratton 所说，RIM 允许 Android 应用程序在其 Playbook 平板电脑上运行。尽管如此，对于 HTML 来说，要像您第一次问的那样实现出色的互操作性，我不知道有什么可以执行此类任务。

# extjs - 在 Sencha Architect 中更改视图

> ID：11402327
> 
> 赞同：0
> 
> 时间：2012-07-09T20:10:05.080
> 
> 标签：extjs, sencha-touch-2, sencha-architect

我对 Sencha Architect 和 EXTJ 还很陌生。我创建了一个具有多个视图（2 个容器）的应用程序。单击container1中的按钮时，我试图切换视图。我创建了一个触发良好的事件，我不知道如何切换到下一个视图？我试过了：

```
if(Ext.getCmp('mainView'))
{
    Ext.Viewport.setActiveItem(Ext.getCmp('mainView'));
}
else 
{
    var view = Ext.create('Snapwire.view.mainView');
    Ext.Viewport.setActiveItem(view);
} 
```

但这只会引发控制台错误：

```
Uncaught TypeError: Object function () {
            return this.constructor.apply(this, arguments);
        } has no method 'setActiveItem' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:22:54.460

您可以使用导航视图实现您想要的请检查此链接

[http://docs.sencha.com/architect/2/#!/guide/navigationview](http://docs.sencha.com/architect/2/#!/guide/navigationview)

希望对你有帮助^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T04:03:07.537

我是这样做的：

```
Ext.Viewport.remove(Ext.Viewport.getActiveItem(), true);  
Ext.Viewport.add([
 { xtype: 'searchwords' }
 ]); 
```

这里，

```
xtype:searchwords 
```

是一个名为 SearchWords 的视图，它被定义为

```
alias: 'widget.searchwords' 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T13:25:47.930

您可以尝试使用卡片布局并通过以下方式更改视图：

```
container.setActiveItem(1); 
```

或者

```
container.setActiveItem(0); 
```

（在使用 setActiveItem 之前必须添加所有容器，但它只会显示活动项目）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T10:52:27.683

`Ext.getCmp('mainView')`仅在您为其设置 id 时才返回您的主视图。在您的类定义中，添加以下配置：

`id: 'mainView'`

# java - 套接字与 Metro WS-Security 复杂性

> ID：11402328
> 
> 赞同：0
> 
> 时间：2012-07-09T20:10:10.423
> 
> 标签：java, web-services, sockets, ws-security

我实现了 Java 服务器应用程序，它应该与多个客户端一起工作，并提供来自数据库的请求信息。此信息是特定于客户的。从我的角度来看，我可以在套接字连接和 Web 服务之间进行选择。对于这类任务，Web 服务看起来很自然。我开始寻找有关使用用户名/密码身份验证的 Web 服务的信息，然后来到 WS-Security。然后事情变得非常复杂。

我用地铁。其手册要求安装 NetBeans、GlassFish 并通过 NetBeans GUI 执行配置。我安装了它，但对许多与 WS-Security 相关的选项和设置感到有些困惑。为确保一切顺利，我需要对消息进行注册和加密。为此，我需要一堆应该交付给客户的公钥/私钥和证书。当新客户注册时，我必须更新密钥库、生成新密钥和证书等等。我的数据不是那么秘密。这只是在线游戏角色参数，我实际上并不需要所有具有隐私和加密功能的东西。我假设用户名和密码就足够了。我还读到加密会在消息处理上产生很大的开销，如果负载很大，我担心它会成为性能瓶颈。

因此，我对进一步处理 WS-Security 感到有些困惑，并征求您的意见。是完全使用 WS 还是更好地使用套接字实现它？我在这里需要 WS-Security 吗？如果是这样，证书和密钥在这里很重要吗？因为目前它看起来非常复杂（可能是因为我已经厌倦了阅读所有这些安全规范、加密细节等）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:37:55.483

WS-* 是非常重量级的，所以不要因为被它弄糊涂而感到难过。另一方面，我认为插座有点裸露。为什么不尝试使用 HTTPS 加密的 HTTP Basic 身份验证保护的 REST？网上应该有很多教程可以学习。

# html - 用base64编码图像有什么效果？

> ID：11402329
> 
> 赞同：114
> 
> 时间：2012-07-09T20:10:11.183
> 
> 标签：html, css, image, base64

如果我将图像（jpg 或 png）转换为 base64，那么它会更大，还是具有相同的大小？会大多少？

是否建议在我的网站上使用 base64 编码图像？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-07-09T20:13:00.597

大约会大 37%：

> 非常粗略，Base64 编码的二进制数据的最终大小等于原始数据大小的 1.37 倍

资料来源：[http ://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-08-02T20:55:23.703

这是 David Calhoun[对何时进行 base64 编码以及何时不进行的非常有用的概述。](http://davidbcalhoun.com/2011/when-to-base64-encode-images-and-when-not-to)

**基本答案**= gzipped base64 编码文件的文件大小与标准二进制文件（jpg/png）大致相当。Gzip 的二进制文件将具有较小的文件大小。

**要点**= 对 UI 图标等进行编码和 gzip 压缩有一些优势，但对于较大的图像这样做是不明智的。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-09T20:11:54.707

在base64中它会更大。

Base64 使用每字节 6 位来编码数据，而二进制使用每字节 8 位。此外，Base64 有一点填充开销。并非所有位都与 Base64 一起使用，因为它最初是为了在只能正确处理非二进制数据的系统上对二进制数据进行编码而开发的。

这意味着编码图像将大 33%-36% 左右（33% 来自不使用每字节 2 位，加上可能的填充占剩余的 3%）。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-07-18T16:47:27.243

答案是：**视情况而定。**

尽管 base64 图像更大，但在某些情况下 base64 是更好的选择。

**base64 图像的大小**

Base64 使用 64 个不同的字符，这是 2^6。所以 base64 每 8 位字符存储 6 位。所以从未转换的数据到base64数据的比例是6/8。这不是精确的计算，而是粗略的估计。

例子：

一个 48kb 的图像需要大约 64kb 作为 base64 转换后的图像。

计算：(48 / 6) * 8 = 64

Linux 系统上的简单 CLI 计算器：

```
$ cat /dev/urandom|head -c 48000|base64|wc -c
64843 
```

或使用图像：

```
$ cat my.png|base64|wc -c 
```

**Base64 图像和网站**

这个问题更难回答。一般来说，使用base64的图像越大，意义越小。但请考虑以下几点：

*   HTML 文件或 CSS 文件中的许多嵌入图像可以具有相似的字符串。对于 PNG，您经常会发现重复的“A”字符。使用 gzip（有时称为“deflate”），甚至可能在大小上取得胜利。但这取决于图像内容。
*   HTTP1.1 的请求开销：特别是在有大量 cookie 的情况下，每个请求很容易产生几千字节的开销。嵌入 base64 图像可能会节省带宽。
*   不要对 SVG 图像进行 base64 编码，因为 gzip 在 XML 上比在 base64 上更有效。
*   编程：在动态生成的图像上，更容易在一个请求中交付它们以协调两个依赖请求。
*   深层链接：如果您想阻止下载图像，从 HTML 页面中提取图像有点棘手。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-07-09T20:12:03.320

将图像编码为 base64 会使其大 30% 左右。

请参阅有关[数据 URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)的维基百科文章中的详细信息，其中指出：

> Base64 编码的数据 URI 的大小比对应的二进制文件大 1/3。（但是，如果 HTTP 服务器使用 gzip 压缩响应，这个开销会减少到 2-3%）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-22T19:17:55.120

如果您想使用 base64 编码图像，肯定会花费更多空间和带宽。但是，如果您的网站有很多小图像，您可以通过将图像编码为 base64 并将它们放入 html 来减少页面加载时间。通过这种方式，客户端浏览器不需要对图像进行大量连接，而是将它们保存在 html 中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-07T15:32:37.903

转换为 base64 意味着：

***解析二进制数据，以 6 位块读取，然后将其转换为某种表示形式***

注意：一切都只是二进制数据。所有的字符串、数字等都只是你记忆中的二进制数据。*你如何阅读它*以及*你将阅读映射到什么*是我们所做的一切。

这个6位序列有一个表示标准（如下图），由Base64定义

[![在此处输入图像描述](../Images/3e438e3d794977c63407fee46d4b8cf1.png)](https://i.stack.imgur.com/hO5Xb.png)

如果传入流是 000000 -> A，​000001 -> B，依此类推。

现在字符本身的表示需要**8 位**。因此，您的数据大小已增加到原始值的 4/3，因为您现在每个字符多占用 2 位。

# android - 在哪里放置列表视图的“添加新记录”项？

> ID：11402331
> 
> 赞同：0
> 
> 时间：2012-07-09T20:10:18.170
> 
> 标签：android, listview, user-interface

我正在开发一个具有列表视图的应用程序，我需要一种将行添加到列表视图的方法。代码不是问题，但我只是想知道是否有约定或一致的 android UI 设计？

我不确定我是否应该在索引 0 处使用一行，当长按可以添加新记录时，或者如果通常将“添加新记录”按钮添加为上下文项，或者什么。

有谁知道通常会做什么，或者对如何处理这个有什么好主意？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:53:54.467

将带有标准 android 图标（位于 sdk..）的按钮添加到 ActionBar。此外，您应该添加兼容性库以在 Android 3.0 之前的设备上使用 ActionBar

# c# - 使用 javascript 单击时查看其他 GridView 列？

> ID：11402336
> 
> 赞同：0
> 
> 时间：2012-07-09T20:10:34.967
> 
> 标签：c#, javascript, jquery, asp.net

我试图弄清楚如何在我的 gridview 中选择和查看行详细信息。基本上我有一个 9 列的网格视图，但隐藏了 6 列。当我单击一行时，我希望它将这些附加列值加载到我的 javascript 中，以便我可以将它们放在下面的单独表格中。我觉得它相对简单，但我只是不理解某些东西，我希望我能指出正确的方向。

如果您需要，这是我的一些代码。

```
<asp:GridView ID="BillabilityView" BackColor="White" runat="server" AutoGenerateColumns="false" CssClass="tbl">
    <columns> 
      <asp:boundfield datafield="UserName" headertext="User Name" /> 
      <asp:boundfield datafield="UserID" headertext="User ID" /> 
      <asp:boundfield datafield="HrsTLB" headertext="Billable Hours" /> 
      <asp:boundfield datafield="HrsTLNB" headertext="Nonbillable Hours" /> 
      <asp:boundfield datafield="HrsTL" headertext="Total Hours" /> 
      <asp:boundfield datafield="HrsExp" headertext="Expected Hours" /> 
      <asp:boundfield datafield="Billability" headertext="Billability" /> 
    </columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:19:51.660

一种方法，虽然使用回发，但使用 OnSelectedIndexChanged 事件。它将在回调中向您传递行信息，您可以处理和重新绑定您需要的任何数据。

在没有回发的情况下，一种快速而肮脏的方法是在列集合中添加一个按钮或其他东西。使用 onclick 事件将您需要的任何信息传递给 javascript 方法。由于您使用的是数据绑定，因此您可以只使用 <% Eval('FieldName') %> ，其中 fieldname 是数据表中的一列，以将数据传递给您的函数。另一种选择是使用 RowDataBoundFunction 将 html 和 javascript 添加到行中以执行您需要的操作。

# emacs - Emacs 在我的缓冲区的开头插入一个“B”（ASCII 66）

> ID：11402337
> 
> 赞同：1
> 
> 时间：2012-07-09T20:10:42.910
> 
> 标签：emacs

它让我发疯。

我的`TERM = xterm-256color`，emacs 23.3.1。我正在使用 Ubuntu，并且在使用相同点文件/设置的 OS X 上不会出现此问题。我在终端中运行它（在 tmux 中，在 bash 中，通过 SSH，在 Ubuntu 上，iTerm2 是我的模拟器）。

如果我打开一个文件，例如`emacs init.el`，然后立即按`DOWN`，则 B 仍然存在。如果我不立即按下任何内容，则不会插入任何内容。

所以看起来什么都没有发生。如果我的标记不在缓冲区的开头，我认为 B 会插入那里（更难重现）。

任何帮助将非常感激。我的仓库中充斥着诸如“ARGH THE B OF DOOM STRIKES AGAINaskdjasdq”之类的提交信息。

# javascript - 跨浏览器、同步、动态加载脚本

> ID：11402346
> 
> 赞同：1
> 
> 时间：2012-07-09T20:11:15.357
> 
> 标签：javascript

我需要一种同步动态加载 JS 文件的方法。

我的想法是为脚本（在本例中为 CDN dojo）发出 XHR 请求，但我遇到了跨域源策略问题。任何建议都是巨大的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:15:11.320

我建议您尝试另一种方法，而不是让它们同步加载。大多数（如果不是全部的话）脚本加载器由于它们加载脚本的性质（动态脚本标签）而异步加载脚本。

我建议你看看像[RequreJS这样的模块加载器](http://requirejs.org/)

# graphics - 看不懂导出collada骨骼动画的一步

> ID：11402347
> 
> 赞同：1
> 
> 时间：2012-07-09T20:11:15.700
> 
> 标签：graphics, export, collada

我有个问题。终于找到了一个通俗易懂的 Collado 导入指南。文章中有方程，应计算骨骼动画中的顶点位置（完整指南 - [http://thecansin.com/Files/COLLADA.pdf](http://thecansin.com/Files/COLLADA.pdf)）。

> Position = VertexPosition x (Bind Shape x Σ (MatrixPallette [n] x Weight [n])) 其中 0 <= n <4
> 
> MatrixPallette [n] = inverseBindPose [n] x worldTransforms [n]
> 
> worldTransforms [n] = BindPose [n] x worldTransforms [父]

而且，看哪，就像一切都清楚了，但是我无法理解的 worldTransforms [父级] 是什么（（（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T05:23:46.340

worldTransform[parent] 是父关节的 4x4 变换矩阵。例如，如果您正在查看手腕，为了使其处于正确的位置和旋转位置，您需要应用所有父母的变换（平移和旋转）。所以你需要得到肘关节worldTransform，肩膀等。向上工作分层树。

# opengl - OpenGL 中的 Sprite 渲染架构

> ID：11402348
> 
> 赞同：4
> 
> 时间：2012-07-09T20:11:20.560
> 
> 标签：opengl, 3d, sprite

我有很多精灵要渲染，并且想从推动该领域性能的人们那里获得任何反馈。

所以我按着色器和纹理排序。并在 VBO 中将具有相同渲染设置的多批精灵发送到着色器进行渲染。都是正常的东西。我的精灵都是正方形的，并且都具有相同的基本数据：中心位置 (P)、方向 (O)、比例 (S)、rgb 颜色 (Col) 和全局不透明度 (Alpha)。我必须更新 CPU 代码中的位置和方向（尽管大约 50% 的精灵在任何给定的帧之间都不会改变），并且比例、颜色和不透明度对于精灵来说几乎永远不会改变，但实际上并非永远不会改变。

我不能假设几何着色器（我会支持它们，但在这种情况下问题是没有实际意义的）。

我是不是该：

1.  当我更新精灵位置时，计算 CPU 上的顶点位置。使顶点着色器成为一个简单的变换步骤。（优点是每帧更新的数据量显着减少，但 CPU 必须做很多触发）。

2.  将 POS 数据作为附加数据放入 VBO，为 4 个顶点复制，然后将顶点位置设置为简单的偏移量 (-1,-1;-1,1;1,1;1,-1) 并执行着色器中的触发（优势是 GPU 进行更多计算，但每个顶点有 5 个额外的数据字）。

3.  哪个更好并不明显，因此这两种方法都需要分析以查看会发生什么。

显然我可以做 3，但我认为问这个问题会很有用，看看我是否只是缺乏关于应该更快的格式塔。无论哪种方式，答案都可以在以后帮助其他认真的精灵/粒子实现者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:55:58.783

所以我做了（3）并进行了分析。而且，正如 kronemi 所说，选项 2 令人信服地获胜。

表现最好的结构是两个 VBO：

1.  `vec2 float pos`, `float orientation`, `float scale`(16 字节/顶点)
2.  `vec2 float tex`, `vec4 ubyte color`, `uint flags`(16 字节/顶点)

其中标志编码精灵的角，所以我们有右边的 0x00000001 和底部的 0x00000002。这允许代码更新精灵位置以遍历第一个 VBO 并一次设置四个值，而无需任何触发或其他逻辑。所有的数学运算都发生在顶点着色器中。

在我的测试中，如果位置更新的数量与纹理/颜色更新的数量差别不大，那么将两个 VBO 合并为一个效果会更好。我认为这是因为顶点是 32 字节对齐的。但是在我的应用程序（我假设大多数人的应用程序）中，大多数帧都会更新位置，但其他事情从来没有，并且有一个较小的缓冲区来下推到显卡似乎会赢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:49:08.237

根据我对大量粒子的经验，我会使用选项 (2.)。也许您可以将偏移量/方向的索引打包到您的数据中（例如，作为您的位置向量的 w 分量，如果您到目前为止不使用它）？0 = (-1,-1); 1 = (-1,1); 2 = (1,1); 3 = (1,-1)。

***（正如 Ian 所建议的，我只是将我的评论复制到一个答案中！）***

@Ian：如果我正确理解你，你说你有一个全局不透明度/alpha，所以你应该能够使用 a`uniform`并使用你的 w 组件`vec4 color`for `flag`。但是，我怀疑这会有所不同...

顺便说一句，您已经提到的几何着色器解决方案不仅应该更优雅，而且应该更快一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T19:35:52.437

我发现带宽几乎没有改善。我假设你的每个精灵都有 4 个顶点（6 个索引），那么你可以简单地使用[`gl_VertexID % 4`](http://www.opengl.org/sdk/docs/manglsl/xhtml/gl_VertexID.xml)而不是`flags`.

**每个顶点属性：**

*   `vec2 float position`, `float orientation`, `float scale`- 精灵几何数据 (16B)
*   `uint flags`- 特殊精灵的可选标志（4B）
*   `float param`- 平滑精灵变换的可选参数 (4B)

**制服：**

*   `vec2 vertexPosition[4]`- 每个角的相对位置 - 你可以用它来指定中心
*   `vec2 textureCoord[4]`- 每个角落的纹理坐标，您还可以使用`4*n`texcoords`n`来定义可以通过标志定义的精灵状态

对于简单的 sprite，此设置每个顶点仅使用 16B。

# php - 使用php从列表中动态生成页面

> ID：11402353
> 
> 赞同：1
> 
> 时间：2012-07-09T20:11:55.810
> 
> 标签：php, html, dynamic

我需要编写一个简短的函数来动态生成一些非常基本的页面。在文件的顶部，我将有一个列出所有当前页面的数组。然后我需要该函数为数组中的每个项目创建一个页面。以下是页面将生成的项目：

```
$appArray = array('testAppOne', 'testAppTwo', 'testAppThree');

$fileName = 'info-'.$appName.'html';
$appLogo = 'path/logo.png';
$appName = appArray[1];
$src = '<!DOCTYPE html><html><head></head><body><img src='".$appLogo."'><h1>'.$appName.'</h1></body></html>' 
```

那么我会创建一个 foreach 语句来遍历数组并将每个文件*$fwrite*到特定目录吗？还是有更好的方法来解决这个问题？

我知道如果我们使用数据库，这会容易得多，但我们现在正试图避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:31:42.157

我无法想象你为什么要这样做而不是使用一些动态页面生成机制（即数据库），但考虑到你所要求的限制，是的，我认为这将是最好的方法. 像这样的东西：

```
$appArray = array('testAppOne', 'testAppTwo', 'testAppThree');

foreach ($appArray as $app) {
    $fileName = 'info-'.$app.'html';
    $appLogo = 'path/logo.png';
    $src = '<!DOCTYPE html><html><head></head><body><img src="'.$appLogo.'"><h1>'.htmlentities($app).'</h1></body></html>'
    $fh = fopen($fileName, 'w');
    fwrite($fh, $src);
    fclose($fh);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:33:33.550

尝试使用 sqlite3，对于小型网站来说非常酷！它是可以立即开始使用的数据库。如果您将它与 dibi ( [http://dibiphp.com/](http://dibiphp.com/) ) 一起使用，那对您来说将是惊人的，我敢肯定！

创建并连接 do sqlite 代码：

```
dibi::connect(array(
    'driver'   => 'sqlite',
    'database' => 'sample.sdb',
)); 
```

试试看，你永远不会后悔！

# c# - XDocument 确定父级的最后一个子级

> ID：11402355
> 
> 赞同：3
> 
> 时间：2012-07-09T20:11:58.170
> 
> 标签：c#, xml, linq-to-xml

使用后代使用 XDocument 遍历 XML 文档我将如何确定我是父级的最后一个孩子？

```
XDocument xmlDoc = XDocument.Parse(xml)

  foreach (var element in xmlDoc.Descendants())
        {
           //Need to determine the last child of the parent and do something here. 
        } 
```

XML 示例和预期返回的内容。我需要动态遍历文档，而不是指定 XPath 或 Xquery，因为它们通常用于各种 XML 文档，而无需详细说明原因……只是想看看我是否可以使用 XDocument 执行此操作，或者是否可以有一个更好的方法仍然没有在 XPath 或 XQuery 中指定标记名称，除非它可以在不知道文档深度的情况下动态完成。，

```
<?xml version="1.0"?>
<Root> 
<Customer>
<CustID>1</CustID>
<Name>Smith, Joe</Name>
<CustomerTransDetail>
<CustID>1</CustID>
<CustTransID>1</CustTransID>
<Note>NA</Note>
</CustomerTransDetail>
<CustomerTransDetail>
<CustID>1</CustID>
<CustTransID>2</CustTransID>
<Note>N/A</Note>
</CustomerTransDetail>
</Customer>
<Customer>
<CustID>2</CustID>
<Name>Smith, Jane</Name>
<CustomerTransDetail>
<CustID>2</CustID>
<CustTransID>1</CustTransID>
<Note>N/A</Note>
</CustomerTransDetail>
<CustomerTransDetail>
<CustID>2</CustID>
<CustTransID>2</CustTransID>
<Note>N/A</Note>
</CustomerTransDetail>
</Customer>
</Root> 
```

我需要知道我什么时候打了父母的最后一个孩子，这样我才能做点什么。所以每次我点击名称节点或注释节点时，我都可以做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:49:36.473

对于您要尝试做什么，我仍然有点不清楚，但希望这可以为您指明正确的方向。

您正在使用 XDocument，所以我假设您至少使用 .NET 3.5。您很可能使用 Linq to XML 扩展方法来实现您想要的。

```
XDocument doc = XDocument.Parse("xmlPath");
foreach (XElement element in doc.Root.Descendants())
{
    bool hasChildren = element.HasElements;
    bool hasSiblings = element.ElementsBeforeSelf().Any() || element.ElementsAfterSelf().Any();
    bool isLastChild = hasSiblings && !element.ElementsAfterSelf().Any();
} 
```

根据遍历节点时需要执行的操作，您可能需要在遍历树时考虑递归。这样，您可以随时确定元素是否有兄弟姐妹，是否是最后一个兄弟姐妹等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:18:12.477

在不引入所有布尔值并使用 linq-query 的情况下，您会得到与 CBs 答案相同的结果：

```
 var query = from element in doc.Descendants()
                where element.ElementsBeforeSelf().Any() && !element.ElementsAfterSelf().Any() 
                select element;

    foreach (XElement element in query)
    {
      // Do something ...
    } 
```

# asp.net-mvc-3 - MVC3 uploadify Jquery 插件错误 HTTP 404 和 IO 错误

> ID：11402356
> 
> 赞同：2
> 
> 时间：2012-07-09T20:12:00.583
> 
> 标签：asp.net-mvc-3, jquery-plugins, file-upload

我正在为 MVC3 C# 使用 Uploadify v3.1。

我的cshtml代码是

```
<div class="container_24">
    <input type="file" name="file_upload" id="file_upload" />
</div> 
```

我的js代码是

```
$(document).ready(function () {
    $('#file_upload').uploadify({
        'method': 'post',
        'swf': '../../Scripts/uploadify-v3.1/uploadify.swf',
        'uploader': 'DashBoard/UploadFile'
    });
}); 
```

控制器代码是

```
[HttpPost]
        public ActionResult UploadFile(HttpPostedFileBase file)
        {
            // Verify that the user selected a file
            if (file != null && file.ContentLength > 0)
            {
                // extract only the fielname
                var fileName = Path.GetFileName(file.FileName);
                // store the file inside ~/App_Data/uploads folder
                var path = Path.Combine(Server.MapPath("~/Uploads"), fileName);
                file.SaveAs(path);
            }
            // redirect back to the index action to show the form once again
            return RedirectToAction("Index", "Home");
        } 
```

现在，当我单击上传按钮时，它会显示两个错误，有时会**显示 IO 错误**，有时会显示某些文件的**HTTP 404**错误。怎么了 ？请帮帮我 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T20:34:24.383

你上传什么大小的文件？一切都超过 1MB 还是小于？

还有你得到什么*样*的404？如果是 404.13（文件大小错误），那么您遇到的问题与我相同。好消息。因为我解决了我的问题。:)

如果您不确定 404 是什么类型（Firebug 会告诉您），请检查您的 Windows 事件日志并在“应用程序”日志中查看如下所示的警告：

*   事件代码：3004
*   事件消息：帖子大小超出了允许的限制。

如果你有这两个，那么问题是 IIS（我假设你正在使用）没有设置为允许足够大的内容请求。

首先，将其放入您的网络配置中：

```
 <system.webServer>
    <security>
      <requestFiltering>
        <!-- maxAllowedContentLength = bytes -->
        <requestLimits maxAllowedContentLength="100000000" />
      </requestFiltering>
    </security>
  </system.webServer> 
```

然后，在“system.web”中：

```
<!-- maxRequestLength = kilobytes. this value should be smaller than maxAllowedContentLength for the sake of error capture -->    
<httpRuntime maxRequestLength="153600" executionTimeout="900" /> 
```

请注意提供的注释 - maxAllowedContentLength 以**BYTES**为单位，而 maxRequestLength 以**KILOBYTES**为单位- 差别很大。

我提供的 maxAllowedContentLength 值可让您加载高达 95MB 左右的任何内容。

无论如何，这解决了我的这个问题的版本。

# grails - 尝试删除主键时数据库迁移失败，但只是有时

> ID：11402358
> 
> 赞同：3
> 
> 时间：2012-07-09T20:12:04.513
> 
> 标签：grails, database-migration, liquibase, composite-primary-key

很奇怪的情况。我有一个根 changelog.groovy，它是当前的生产数据库。我还有一个 latest-changelog.groovy，它基本上是一个带有一些细微差异修正的差异（因为差异并不完美）。

从空数据库开始，以下工作（**场景 1**）：

*   mysqldump 生产数据库
*   源到开发数据库
*   删除包含 latest-changelog.groovy
*   执行 dbm-changelog-sync
*   添加包含 latest-changelog.groovy
*   执行 dbm-update

以下不起作用（**场景 2**）：

*   删除开发数据库
*   创建空的开发数据库
*   执行 dbm-update

会发生什么是初始 changelog.groovy 运行顺利。但是当它到达 latest-changelog.groovy 时，它会失败并显示以下内容：

> 原因：java.sql.SQLException：将“./main_dev/#sql-b4_2334”重命名为“./main_dev/book_project_note”时出错（错误号：150）

我有一个这样定义的表：

```
mysql> desc book_project_note;
+---------------------------+------------+------+-----+---------+-------+
| Field                     | Type       | Null | Key | Default | Extra |
+---------------------------+------------+------+-----+---------+-------+
| book_project_id           | bigint(20) | NO   | PRI | NULL    |       |
| note_id                   | bigint(20) | NO   | PRI | NULL    |       |
| book_project_note_type_id | bigint(20) | NO   | PRI | NULL    |       |
+---------------------------+------------+------+-----+---------+-------+ 
```

以下变更集是失败的：

```
changeSet(author: "gdboling (generated)", id: "1341248060406-80") {
  dropPrimaryKey(tableName: "book_project_note")
} 
```

我在这里尝试做的是删除主键，然后使用以下内容重新创建其中的 2 个：

```
changeSet(author: "gdboling (generated)", id: "1341248060406-72") {
  addPrimaryKey(columnNames: "book_project_id, note_id", constraintName: "book_project_PK", tableName: "book_project_note")
} 
```

我想知道为什么它适用于**Scenario 1但在****Scenario 2**中失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:21:24.907

不确定这是问题的实际答案，但我已经弄清楚是什么导致它失败。book_project_note 表上有 3 个 FK。这些 FK 必须在 dropPrimaryKey 之前被丢弃（duh）。

但是，这仍然没有告诉我它在场景 1 中可能如何工作，但我认为它可能与 addForeignKeyConstraint 中的可延迟属性有关。仍在尝试研究这实际上意味着什么。

# ruby-on-rails - 在 Rails 上将 Canvas 转换为 PNG，服务器端

> ID：11402360
> 
> 赞同：2
> 
> 时间：2012-07-09T20:12:13.893
> 
> 标签：ruby-on-rails, image, image-conversion

我知道有一些方法可以将（某些）浏览器客户端上的画布转换为 PNG 图像转换为编码的 Base64 字符串，但我正在寻找一种方法，即 a）服务器端和 b）不使用图像魔法。

如果某处没有直接转换库，是否有某种“标准”用于 ruby​​ / rails 图像创建和操作？我找到了开罗，但我对这到底给我带来了什么感到困惑。

# javascript - python 的 urllib.urlopen 用于 javascript

> ID：11402361
> 
> 赞同：3
> 
> 时间：2012-07-09T20:12:15.380
> 
> 标签：javascript, python, network-programming, urllib

是否有一个用javascript编写的模块相当于python的urllib？特别是，我想要类似的东西：

```
urllib.urlopen(url, data) 
```

它返回一个支持阻塞获取的对象。或者，我可以通过哪些其他方式使用 javascript 对服务器执行阻塞请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:28:48.837

您可以同步使用普通的 XMLHttpRequest：

```
var xhr = new XMLHttpRequest();
xhr.open('POST', url, false);  # third param is sync/async
xhr.send(data);
var response = xhr.responseText; 
```

# ruby - 如何大写数组的每个元素？

> ID：11402362
> 
> 赞同：29
> 
> 时间：2012-07-09T20:12:16.800
> 
> 标签：ruby, arrays

如何将元素数组转换为大写？预期输出为：

```
["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]  
=> ["MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY"] 
```

以下内容不起作用，并将它们保留为小写。

```
Day.weekday.map(&:name).each {|the_day| the_day.upcase }
 => ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"] 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-09T20:28:19.180

### 返回一个新数组

如果要返回大写数组，请使用**#map**：

```
array = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]

# Return the uppercased version.
array.map(&:upcase)
=> ["MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY"]

# Return the original, unmodified array.
array
=> ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"] 
```

如您所见，原始数组没有被修改，但您可以在任何可以使用表达式的地方使用#map 的大写返回值。

### 就地更新数组

如果要就地大写数组，请使用**#map！**反而：

```
array = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
array.map!(&:upcase)
array
=> ["MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY"] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T20:14:53.563

这应该有效：

```
Day.weekday.map(&:name).map(&:upcase) 
```

或者，如果您想节省一些 CPU 周期

```
Day.weekday.map{|wd| wd.name.upcase} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T20:17:52.677

在您的示例中，将“每个”替换为“地图”。

虽然 'each' 遍历您的数组，但它不会创建包含块返回值的新数组。

# android - 带有DP像素的Android相对布局错误地为不同屏幕排列了整个布局

> ID：11402367
> 
> 赞同：0
> 
> 时间：2012-07-09T20:12:27.137
> 
> 标签：android, xml, android-layout

我正在使用带 dp 的相对布局（牙齿像素）。这是所有屏幕的理想选择。但在 android htc 上，它看起来不错，但在其他手机上，屏幕的一半是可见的。

为了清楚起见，我将我的 xml 文件放在这里。

有了 Htc 中的这个 xml，一切看起来都很好，但在其他手机上说三星小屏幕一个按钮没有显示。即屏幕的一半可见。我做错了什么？

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/chosenstore">

<TextView
    android:id="@+id/youhavechosen"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="20dp"
    android:textSize="20dp"
    android:textStyle="bold"
    android:textColor="#000000"
    android:text="You have chosen:" /> 
```

```
 android:layout_below="@+id/youhavechosen"
    android:layout_marginLeft="84dp"
    android:layout_marginTop="22dp"
    android:textSize="15dp"
     android:textStyle="bold"
     android:textColor="#666666"
    android:text="The Money Shop" />

<TextView
    android:id="@+id/tvLocConfirmStreet"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textStyle="bold"
    android:layout_below="@+id/tvLocTheMoneyShop"
    android:layout_marginLeft="84dp"
    android:textColor="#666666"
    android:text="TextView" />

 <TextView
    android:id="@+id/tvLocConfirmTown"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
   android:layout_below="@+id/tvLocConfirmStreet"
   android:layout_alignLeft="@+id/tvLocConfirmStreet"
     android:textStyle="bold"
      android:textColor="#666666"
    android:text="TextView" />

 <TextView
     android:id="@+id/tvLocConfirmPostCode"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmTown"
     android:layout_below="@+id/tvLocConfirmTown"
      android:textStyle="bold"
      android:textColor="#666666"
     android:text="TextView" />

 <TextView
     android:id="@+id/tvLocConfirmTele"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmPostCode"
     android:layout_below="@+id/tvLocConfirmPostCode"
      android:textStyle="bold"
      android:textColor="#666666"
     android:text="TextView" />

 <TextView
     android:id="@+id/tvLocConfirmOpeningTime"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmTele"
     android:layout_below="@+id/tvLocConfirmTele"
     android:layout_marginTop="10dp"
     android:textSize="15dp"
     android:text="Opening Time:"
      android:textColor="#666666"
      android:textStyle="bold"
      />

 <TextView
     android:id="@+id/tvMon"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmOpeningTime"
     android:layout_below="@+id/tvLocConfirmOpeningTime"
     android:layout_marginTop="10dp"
      android:textStyle="bold"
      android:textColor="#666666"
     android:text="Mon:" />
 <TextView
     android:id="@+id/tvTue"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvMon"
     android:layout_below="@+id/tvMon"
      android:textStyle="bold"
       android:textColor="#666666"

     android:text="Tue:" />
 <TextView
     android:id="@+id/tvWed"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmOpeningTime"
     android:layout_below="@+id/tvTue"
      android:textStyle="bold"
       android:textColor="#666666"
     android:text="Wed:" />
 <TextView
     android:id="@+id/tvThur"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmOpeningTime"
     android:layout_below="@+id/tvWed"
      android:textStyle="bold"
      android:textColor="#666666"
     android:text="Thur:" />
 <TextView
     android:id="@+id/tvFri"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmOpeningTime"
     android:layout_below="@+id/tvThur"
      android:textStyle="bold"
       android:textColor="#666666"
     android:text="Fri:" />
 <TextView
     android:id="@+id/tvSat"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmOpeningTime"
     android:layout_below="@+id/tvFri"
      android:textStyle="bold"
       android:textColor="#666666"
     android:text="Sat:" />
 <TextView
     android:id="@+id/tvSun"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignLeft="@+id/tvLocConfirmOpeningTime"
     android:layout_below="@+id/tvSat"
      android:textStyle="bold"
    android:textColor="#666666"
     android:text="Sun:" />

 <TextView
     android:id="@+id/tvLocConfirmMon"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignBaseline="@+id/tvMon"
     android:layout_alignBottom="@+id/tvMon"
     android:layout_toRightOf="@+id/tvMon"
     android:text="TextView"
      android:textColor="#666666"
      android:textStyle="bold"
      />

 <TextView
     android:id="@+id/tvLocConfirmTue"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignTop="@+id/tvTue"
     android:layout_toRightOf="@+id/tvTue"
      android:textStyle="bold"
     android:textColor="#666666"
     android:text="TextView" />
   <TextView
     android:id="@+id/tvLocConfirmWed"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignTop="@+id/tvWed"
     android:layout_toRightOf="@+id/tvWed"
      android:textStyle="bold"
      android:textColor="#666666"
     android:text="TextView" />
     <TextView
     android:id="@+id/tvLocConfirmThur"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignTop="@+id/tvThur"
     android:layout_toRightOf="@+id/tvThur"
      android:textStyle="bold"
    android:textColor="#666666"
     android:text="TextView" />
       <TextView
     android:id="@+id/tvLocConfirmFri"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignTop="@+id/tvFri"
     android:layout_toRightOf="@+id/tvFri"
      android:textStyle="bold"
       android:textColor="#666666"
     android:text="TextView" />
         <TextView
     android:id="@+id/tvLocConfirmSat"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignTop="@+id/tvSat"
     android:layout_toRightOf="@+id/tvSat"
      android:textStyle="bold"
     android:textColor="#666666"
     android:text="TextView" />
           <TextView
     android:id="@+id/tvLocConfirmSun"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignTop="@+id/tvSun"
     android:layout_toRightOf="@+id/tvSun"
      android:textColor="#666666"
      android:textStyle="bold"
     android:text="TextView" />

           <Button
               android:id="@+id/collect"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_centerHorizontal="true"
               android:layout_below="@+id/tvLocConfirmSun"
               android:layout_marginTop="1dp"

               android:background="@drawable/collectherebutton"
               />
              <Button
               android:id="@+id/storeDetail"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_centerHorizontal="true"
               android:layout_below="@+id/collect"
               android:layout_marginTop="5dp"

               android:background="@drawable/storedetailbutton"
               />

              <ImageView
                  android:id="@+id/locConfirmImage"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginLeft="20dp"

                  android:layout_alignTop="@+id/tvLocTheMoneyShop"
                  android:src="@drawable/locicon" />

              <Button
                  android:id="@+id/mapButton"
                  style="?android:attr/buttonStyleSmall"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_alignBottom="@+id/tvLocConfirmTele"
                  android:layout_alignParentRight="true"
                  android:layout_marginRight="22dp"
                  android:text="Button" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-06T13:35:15.180

在第一个文本视图之前使用滚动视图，并在相对布局结束标记之前结束。这将解决它。

# iphone - 如何将 NextStep plist 转换为 JSON

> ID：11402368
> 
> 赞同：0
> 
> 时间：2012-07-09T20:12:34.517
> 
> 标签：iphone, json

我需要将 NextStep Plist 字符串转换为 JSON 格式 有什么库可以做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:53:46.943

```
[NSJSONSerialization dataWithJSONObject:(id) options:(NSJSONWritingOptions) error:(NSError *__autoreleasing *)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:04:53.110

在 OS X 的命令行中转换 FILENAME：

`plutil -convert json -r -e json FILENAME`

这会将文件转换为 JSON 格式并为其提供 .json 扩展名。

# java - 裸机 Java

> ID：11402370
> 
> 赞同：0
> 
> 时间：2012-07-09T20:12:48.937
> 
> 标签：java, oracle, jrockit

这是我想问的关于 JVM 的一些问题：

*   有没有可以免费使用的 Bare Metal JVM 服务器？
*   是否有任何“代理”JVM 实际上从裸机服务器运行字节码？

例如，在客户端机器上运行 java 应用程序，而字节码实际上是从服务器执行的？那可能吗？

我目前正在看`Oracle JRockit`，但是，我不确定它是否符合工作要求？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T20:22:22.093

您可以将 Core Java 用作精简版操作系统上的服务器，例如网络设备上的 linux。

问题在于，您剥离的越多，用于管理设备的功能就越少。

JVM 越轻、越小，获得的性能就越低。“全脂”服务器 JVM 将为长时间运行的应用程序提供最佳性能。

# java - PHP 数组是连续的内存块吗？

> ID：11402380
> 
> 赞同：1
> 
> 时间：2012-07-09T20:13:26.217
> 
> 标签：java, php, arrays, memory

这是Java中的一个数组：

```
int[] myArray = new int[3];
myArray[0] = 0;
myArray[1] = 1;
myArray[2] = 2; 
```

第一行立即保留 3 个连续的内存块。创建第四个元素实际上需要使用 int[4] 创建一个新数组，然后将索引 0 到 2 的值传输到新数组中。如下所示：

```
int[] mySecondArray = new int[4];
for (int i = 0; i < myArray.length; i += 1) {
    mySecondArray[i] = myArray[i];
}
mySecondArray[3] = 3; 
```

但是在 PHP 中，我们可以声明一个数组，然后简单地添加另一个元素，而无需像 Java 那样大惊小怪。

```
$my_array = array(0, 1, 2);
$my_array[] = 4; 
```

在将附加元素推送到现有数组后，PHP 是否真的负责创建新数组？还是 PHP 数组实际上与 C 和 Java 等语言中的数组不同（在内存方面）？我有点担心，因为我看到很多 PHP 代码遍历一个循环并将 50 多个新元素附加到现有数组中，这在 Java 中是完全可笑的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:15:01.103

> 还是 PHP 数组实际上与 C 和 Java 等语言中的数组不同（在内存方面）？

在 PHP 中，数组实际上是哈希表。但是，内存管理几乎没有可比性，因为它们是两种完全不同的语言。

# .net - 如何从 RadButton 关闭 RadWindow

> ID：11402384
> 
> 赞同：2
> 
> 时间：2012-07-09T20:13:39.993
> 
> 标签：.net, wpf, telerik, window, radwindow

RadWindow 上的关闭按钮工作正常！！！

但我想添加一个带有“关闭”的自定义 RadButton，它做同样的事情....关闭 .NET（VB 或 C#）中的 RadWindow

这可能吗？

谢谢大家......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:51:52.473

我假设您所说的技术是 ASP.NET。

有了这个假设，我想向您指出我们在 RadControls for ASP.NET Ajax 控件套件上的演示。此演示展示了您正在寻找的场景。rad 窗口在窗口内包含一个按钮，单击该按钮将关闭 rad 窗口。这是演示的链接：

[http://demos.telerik.com/aspnet-ajax/window/examples/clientsideevents/defaultcs.aspx?product=window](http://demos.telerik.com/aspnet-ajax/window/examples/clientsideevents/defaultcs.aspx?product=window)

ASP.NET MVC 中的相同场景有以下演示：

[http://demos.telerik.com/aspnet-mvc/window/clientsideapi](http://demos.telerik.com/aspnet-mvc/window/clientsideapi)

希望这能回答你的问题。如果这解决了您的问题，请告诉我

Lohith (Tech Evangelist, Telerik India)

# javascript - 使用标题标签配置 Tipsy

> ID：11402385
> 
> 赞同：0
> 
> 时间：2012-07-09T20:13:40.697
> 
> 标签：javascript, jquery, tooltip, tipsy

我已经尝试在我的网站上实现 Tipsy jQuery 插件，这并不意味着将标题标签显示为漂亮的工具提示。但它似乎无法在我的网站上运行，有人可以帮忙吗？

当我将鼠标悬停在视频窗格中的视频缩略图上时，我希望显示工具提示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:26:11.297

您正在使用以下行来初始化工具提示：

```
$('.tipsy').tipsy(); 
```

但正如您所见，以下`img`链接没有一个名为`tipsy`.

```
<a class="videobox various iframe" href="http://www.youtube.com/embed/I7_iD31Yhjg?autoplay=1&hd=1">
    <img width="74" height="56" title="Fear of Mobs Episode 155 - Murdering Ze Puppeh Doggies" src="http://i.ytimg.com/vi/I7_iD31Yhjg/1.jpg">
</a> 
```

**更新**：尝试`$('.tipsy').tipsy();`修复`$('a.videobox img').tipsy();`

如果要更改获取工具提示文本的位置，可以使用以下内容。

```
$('.tipsy').tipsy({
    title: 'alt' // it'll get the alt attr, you can use an attr or a callback
}); 
```

# c++ - 实例化类时出错

> ID：11402386
> 
> 赞同：0
> 
> 时间：2012-07-09T20:13:52.347
> 
> 标签：c++, object, instantiation

我有一个关于在 C++ 中实例化对象的简单问题：如果我们假设我的类有一个默认构造函数，那么我会像这样创建新对象：

```
PfAlgorithm object = new PfAlgorithm(); 
```

但是当我运行时出现此错误：

```
conversion from ‘PfAlgorithm*’ to non-scalar type ‘ns3::PfAlgorithm’ requested 
```

有人可以向我解释这个错误的原因吗？非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:18:37.727

`new`运算符返回一个指针，而不是一个值。所以你需要写：

```
PfAlgorithm* object = new PfAlgorithm() 
```

where`object`是指向新分配的 PfAlgorithm 对象的指针。可以在[此处](http://linuxconfig.org/c-understanding-pointers)找到有关指针的一些简单介绍性信息。然而，正如在下面的评论中所讨论的，处理原始指针几乎从来都不是一个好主意（由于内存泄漏的潜在问题、所有权不明确的问题等）。继续阅读...

在堆上分配此对象后，您需要确保在完成后将其删除，否则您的应用程序将泄漏内存。为了使这更容易，我强烈建议您还考虑使用来自[boost 库](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/smart_ptr.htm)（或来自 C++11）的智能指针来管理您的内存。

或者，正如其他人所建议的那样，您可以简单地执行以下操作：

```
PfAlgorithm object; 
```

并在堆栈上分配您的对象，而不必担心管理内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T20:22:11.113

有没有可能你在 Java 方面的经验比在 C++ 方面更有经验？与 Java 不同，在 C++ 中实例化对象时*不需要：`new`*

```
PfAlgorithm object; 
```

创建一个类型的对象`PfAlgorithm`就好了。当变量超出范围时，该对象会自动销毁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:23:37.357

C++ 区分对象（在您的情况下为 PfAlgorithm 类型）和指向对象的指针（PfAlgorithm *）。该`new PfAlgorithm()`表达式返回一个指向新分配对象的指针。如果这是您想要的，您还必须`object`具有指针的类型：

```
PfAlgorithm *object = new PfAlgorithm(); 
```

如果您不想使用指针，请摆脱`new`：

```
PfAlgorithm object = PfAlgorithm(); 
```

`delete`在第一种情况下，一旦您不再使用它，您将不得不使用它；在第二种情况下，对象将在退出`{...}`创建它的块 ( ) 时被销毁。没有像 Java 或 C# 中那样的自动内存管理。

# javascript - 当我想获得第一个孩子时，为什么我需要将索引 1 添加到我的 childNodes 数组？

> ID：11402389
> 
> 赞同：0
> 
> 时间：2012-07-09T20:14:05.390
> 
> 标签：javascript, dom

我在 javascript 中有一个函数，它应该输出输入到输入字段中的文本。我的代码：

```
<head>
    <script type="text/javascript">
    function calculate()
    {
        var input = document.body.childNodes[1];
        document.write(input.value);
    }
    </script>
</head>

<body>
    <input type="text"/>
    <input type="button" onclick="calculate()"/>
</body> 
```

现在我不明白的是为什么我必须将索引“1”放入我的 childNodes 数组中？逻辑上它应该是“0”，因为`<input type="text"/>`它是 body 的第一个孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:25:42.170

DOM 规范要求 HTML 中节点之间的空白应作为文本节点出现在 childNodes 列表中。所以使用 HTML 之类的

```
<div id="parent"><div>child 1</div> abc <div>child2</div></div>  </div> 
```

我们希望父 div 的子节点是

1.  第一个子 div
2.  两个子 div 之间的文本节点，包含文本“abc”
3.  第二个孩子div
4.  第二个子 div 之后的空白文本节点，包含“”

如果您只想获取元素节点而不是文本节点，请在循环时检查子节点的 nodeType 属性（元素为 1，文本节点为 3，IIRC）或使用“children”数组而不是“childNodes” ”。

请注意，较旧的浏览器可能不会实现 children 数组，并且 Internet Explorer 在迭代 childNode 时可能不会显示空白节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:17:28.383

不，在某些浏览器中，第一个子节点是文本节点，只有空格。但是你可以使用[`Element.firstElementChild`](https://developer.mozilla.org/en/DOM/Element.firstElementChild)

# python - 在 Python 中，如何将这种格式转换为 unix 时间戳？

> ID：11402390
> 
> 赞同：9
> 
> 时间：2012-07-09T20:14:08.433
> 
> 标签：python, date

```
Mon Jul 09 09:20:28 +0000 2012 
```

如果我有这样的格式作为字符串，我怎么能把它变成一个 unix 时间戳？

注意：我从 Twitter 的 API 获得这种格式：

[https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitter](https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=twitter)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T20:32:00.700

最好的选择是使用`dateutil.parser.parse()`它为您提供`datetime`具有适当时区信息的对象：

```
>>> import dateutil.parser
>>> dt = dateutil.parser.parse('Mon Jul 09 09:20:28 +0200 2012')
>>> dt
datetime.datetime(2012, 7, 9, 9, 20, 28, tzinfo=tzoffset(None, 7200)) 
```

现在您只需要将其转换为 UNIX 时间戳：

```
>>> import time
>>> int(time.mktime(dt.timetuple()))
1341822028 
```

* * *

您拥有的格式也可以使用以下方法轻松解析[`email.utils.parsedate_tz`](http://docs.python.org/dev/library/email.util.html#email.utils.parsedate_tz)：

```
>>> import datetime
>>> import email.utils
>>> parts = email.utils.parsedate_tz('Mon Jul 09 09:20:28 +0200 2012')
>>> dt = datetime.datetime(*parts[:6]) - datetime.timedelta(seconds=parts[-1])
>>> str(dt)
'2012-07-09 07:20:28' 
```

这实际上是`email.utils.parsedate_to_datetime`Python 3.3 中的实现方式（如果您想将其复制并粘贴到您的项目中，请替换`__parsedate_tz`为`parsedate_tz`from `email.utils`）：

```
def parsedate_to_datetime(data):
    if not data:
        return None
    *dtuple, tz = __parsedate_tz(data)
    if tz is None:
        return datetime.datetime(*dtuple[:6])
    return datetime.datetime(*dtuple[:6],
            tzinfo=datetime.timezone(datetime.timedelta(seconds=tz))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:33:24.853

如果已知时区始终为 +0000，则可以使用：

```
time.strptime('Mon Jul 09 09:20:28 +0000 2012', '%a %b %d %H:%M:%S +0000 %Y') 
```

这将返回一个日期时间结构。如果您需要自纪元以来的 unix 秒数，请运行 time.mktime()，如下所示：

```
>>> time.mktime(time.strptime('Mon Jul 09 09:20:28 +0000 2012', '%a %b %d %H:%M:%S +0000 %Y'))
1341818428.0 
```

或 time.gmtime() 如果确实时区始终是 UTC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:17:09.167

`datetime.strptime()`

**参考**：[http ://docs.python.org/library/time.html#time.strptime](http://docs.python.org/library/time.html#time.strptime)

# jquery - Backbone.js ：单击时访问特定项目

> ID：11402391
> 
> 赞同：2
> 
> 时间：2012-07-09T20:14:11.957
> 
> 标签：jquery, backbone.js, click, backbone-events

菜鸟在这里学习backbone.js。我试图创建一个简单的水平菜单（每个菜单项都是一个模型，整个菜单是一个集合）。我想知道单击了哪个菜单项。在 menuItemView 中，我将“click a”事件绑定到“clicked”函数，但是当我单击时它不会触发。我找到的最接近的解决方案是：http: [//lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/](http://lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/)我试图复制类似的功能......即使我认为我已经复制了几乎相同的功能，但我似乎仍然无法让它工作。我确实浏览了所有似乎解决检测哪个模型/项目被点击的问题的帖子，但它们似乎都没有帮助。任何帮助，将不胜感激。我知道在简单的 jquery 中，一个可点击的菜单和获取它的 id 可能要简单得多，但我想我会以此为例来学习主干。

HTML

```
<header>
<ul id="nav">
</ul>
</header> 
```

JAVASCRIPT

```
(function($) {

window.app = window.app || {};

//Goal:if selected=true, menu item should be highlighted
MenuItem = Backbone.Model.extend({
    label: "Default Label",
    selected: false,
    id: 0
});

MenuList = Backbone.Collection.extend({
    model: MenuItem,
    initialize: function(models, options) {
        //nothing ... yet
    }
});

//View for a single item. Returns el that looks like:
//  <li id='4' class='false'><a href='#4'> Item 4 </a> </li?
MenuItemView = Backbone.View.extend({
    tagName: "li",

    render: function() {
        var id  = this.model.get("id");
        var cls = this.model.get("selected");
        var lbl = this.model.get("label");
        $(this.el).attr('id', id).addClass(cls.toString());
        $(this.el).html("<a href=#" + id + " >" + lbl + "</a> </li>");
        return this; //recommended as this enables calls to be chained.
    },

    events: {
        "click a": "clicked" //Firebug shows 'a' element bound to
                             //native 'click' and not 'clicked'. WHY?
    },

    clicked: function(ev){
        alert($(ev.target).text()); //NOT HAPPENING :-(
        //do something to highlight menu item via css stuff.
    }
});

MenuListView = Backbone.View.extend({
    el: $("header > ul"),

    initialize: function() {
        this.menulist = new MenuList(null, { view: this });
        _.bindAll(this, "renderItem");
    },

    renderItem: function(model) {
        var menuitemView = new MenuItemView({ model: model });
        menuitemView.render();
        $(this.el).append(menuitemView.el);
    },

    render: function() {
        this.collection.each(this.renderItem);
    },

    setActivePage: function(ev) {
        alert($(ev.target).text());
        window.app.footerview.updatePageNumber(10);
    }
});

var items = new MenuList([
{id: 1, label: "item 1", selected: true},
{id: 2,label: "item 2",selected: false},
{id: 3,label: "item 3",selected: false},
{id: 4,label: "item 4",selected: false}
]);

window.app.menuview = new MenuListView({ collection: items });
window.app.menuview.render();
$("header").html(window.app.menuview.el);

})(jQuery); 
```

运行示例可以在 jsfiddle 上看到：.. 见[http://jsfiddle.net/gopal_a/4uzcb/3/](http://jsfiddle.net/gopal_a/4uzcb/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:54:11.473

你的问题就在这里：

```
$("header").html(window.app.menuview.el); 
```

您`window.app.menuview.el`已经在 DOM 中，因为您已经像这样定义它：

```
el: $("header > ul") 
```

当你时`$('header').html(...)`，你正在清除已经存在的内容`<header>`，然后用你的`el`;替换它。但是，您的`.html()`调用会杀死 Backbone 为处理视图上的事件而安装的事件委托者。结果是您最终在 DOM 中获得了正确的 HTML，但您没有附加任何事件处理。

放下你`$("header").html(window.app.menuview.el)`，事情就会开始起作用。

顺便说一句，您不必说`$(this.el)`，已经[`this.$el`](http://backbonejs.org/#View-%24el)定义了 Backbone 视图，因此您可以使用它`this.$el`。

# c++ - C++ #include - 仅部分 #include

> ID：11402394
> 
> 赞同：5
> 
> 时间：2012-07-09T20:14:23.393
> 
> 标签：c++, include

有时我遇到这样的情况，我发现我需要为大型第三方文件创建一个#include，以便我可以使用一个函数或一个小类，这让我感到内疚，因为我知道这已经消失了，增加了我的编译时间当我只想要一个功能时，它会编译整个文件。有没有办法解决这个问题，只包含我想要的一个函数而不重写整个事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T20:27:22.387

你有一些选择：

*   只需包括标题。真的，它不会增加你那么多的编译时间。
*   向您的第 3 方标头提供商投诉。告诉他们运送更小、更模块化的接头。
*   不要包含标题，而是声明为`extern`您关心的单个函数，就像这样`extern int GetMeaningOfLife(int mice);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T20:22:09.443

您不能只编译部分标头。如果该第 3 方的标头提取了大量代码，那么您将无能为力。我能想到的最好的解决方案是使用[预编译的头文件](http://en.wikipedia.org/wiki/Precompiled_header)，这应该可以消除一些编译开销，因为这些头文件只会被完全编译一次。如果其他一些翻译单元确实包含标题，另一种选择是使用类的前向声明而不是包含它们的声明。不过，这只会让您将这些类用作指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T20:30:13.970

有时，简单地编写自己的前向声明而不是包含标题可能是合理的。尽管如果您不负责定义事物，那么您可能会遇到定义更改的问题并且您必须更新您的前向声明。

例如，一些 Boost 库试图在标准库中转发声明一些东西以避免#includes。最近他们遇到了标准库的 libc++ 实现的问题，因为 libc++ 使用内联命名空间，所以天真的前向声明不适用于 libc++。事实上，标准库实现可以做很多符合标准的不同事情，但可以打破适用于不同实现的前向声明。

因此，手动前向声明很脆弱，并且可能不可移植，但可能对您有用。

另一种选择是使用预编译的头文件。这可以减少包含标题所需的处理。例如，我有一个临时项目，我在其中包含标准库中的每个标头。如果没有预编译的头文件，编译一个空程序需要几秒钟的时间。使用预编译的头文件，一个空程序只需要几分之一秒。

你必须看看你的编译器如何处理预编译的头文件。例如，当您使用 -x c++-header 或 -x c-header 处理头文件时，gcc 和 clang 会生成预编译的头文件。然后，当您使用 -include 标志包含文件时，编译器将搜索该头文件的预编译版本（使用编译器特定的命名约定）并可能包含该文件。

> $**猫一切.h**
> 
> ```
> #include <iostream> 
> ```
> 
> $**猫 main.cpp**
> 
> ```
> int main() {
>     std::cout << "Hello, World!\n";
> } 
> ```
> 
> $ **clang++ -x c++-header Everything.h -o Everything.h.pch**
> 
> $ **clang++ main.cpp -包括一切.h**
> 
> $ **./a.out**
> 
> 你好世界

Clang 查找 .pch 而 gcc 查找 .gch

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T20:28:04.993

标头可能不会大大增加您的编译时间。这取决于里面有什么。当然可以编辑掉你不需要的东西，但我不推荐它。它很容易出错，通常需要付出很多努力才能获得很少的回报。标题是否[包含警卫](http://en.wikipedia.org/wiki/Include_guard)？如果没有，如果你的编译速度很慢，你可以考虑添加它们。

# android - ScrollView 中的 Android 按钮大小为屏幕的一半

> ID：11402400
> 
> 赞同：2
> 
> 时间：2012-07-09T20:14:41.800
> 
> 标签：android, button

我希望能够在滚动视图中滚动按钮，并使每个按钮的大小为屏幕的一半。

```
_____________
/__________\
| BUTTON 1 |
\__________/

/__________\
| BUTTON 2 |
\__________/
_____________ 
```

...滚动一点...

```
_____________
| BUTTON 1 |
\__________/

/__________\
| BUTTON 2 |
\__________/
_____________ 
```

... 多一点...

```
_____________
\__________/

/__________\
| BUTTON 2 |
\__________/

/__________\
| BUTTON 3 |
_____________ 
```

如果它只是在 LinearLayout 中，我会使用 layout_weight 设置为 1，但我认为这在 ScrollView 中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T23:19:12.463

正如我所想的，您几乎肯定必须通过屏幕测量以编程方式执行此操作。我刚刚切换到使用 ViewFlipper 和上一个/下一个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:19:23.363

你几乎是正确的。ScrollView 必须在其下方有一个直接子级。因此，将滚动视图添加为父布局并在其中添加线性布局，然后做任何你想做的事情。

更新：现在我明白你的意思了。然后你应该得到屏幕的宽度和高度，做一些数学运算并将按钮的高度和宽度属性调整到所需的值。

也许扩展按钮类以便只实现一次，然后将其作为自定义视图包含在您的布局 xml 中。在我看来，没有一些布局参数可以传递来调整按钮的大小。

# mysql - mysql unix_timestamp 时区时间错误

> ID：11402403
> 
> 赞同：2
> 
> 时间：2012-07-09T20:14:54.893
> 
> 标签：mysql, wordpress, unix-timestamp

mysql 中的 UNIX_TIMESTAMP 函数有问题。

**设置：** 我正在本地 Windows 机器上创建一个 wordpress 站点，并定期将我的更新上传到 ubuntu 服务器（page.ly）。有一段代码可以从 mysql 数据库中检索日期时间列。问题是检索到的时间在我的本地 Windows 机器上是正确的，但在 ubuntu 服务器上是错误的。

**到目前为止** ，我所知道的我在这两个地方都运行了几个查询以尝试重现该问题。

```
$wpdb->get_row("SELECT UNIX_TIMESTAMP('2012-07-27 22:15:00') 
FROM {$wpdb->posts}")) 
```

这会在我的本地机器（**1343427300**）上产生正确的时间，但在 ubuntu 上是错误的（提前 5 小时**1343445300。**我的本地时区 America/New_York。）。

```
$wpdb->get_row("SELECT UNIX_TIMESTAMP('2012-07-27 22:15:00')")) 
```

这会在两台机器上产生正确的时间。就像我将我的选择与一个表、数据库中的任何表相关联时，时间得到时区偏移量 + 夏令时偏移量。我检查了两台机器上的时区偏移量。他们都是0。我有点卡在这里。感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T21:11:19.627

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

UNIX_TIMESTAMP 返回 UTC 时间，这样就解释了你得到的 5 小时差异

您可能希望在偏移量为 -05.00（东部）的时间上使用 CONVERT_TZ 以获得正确的 TIMESTAMP。

# php - PHP Paypal IPN 获取交易数组

> ID：11402405
> 
> 赞同：1
> 
> 时间：2012-07-09T20:15:07.327
> 
> 标签：php, paypal

如何在 $_POST 数组中获取事务数组？

回复：

```
cmd=_notify-validate&transaction=Array 
```

这就是我从我的 ipn 得到的响应（减去事务数组之后的所有其他好东西）

我需要获取交易金额、货币和接收方。

```
transaction[n].receiver
transaction[n].amount
transaction[n].currency 
```

我累了`$_POST['transaction']['amount']`，它不起作用，因为它们之间的数字`$_POST['transaction'][n]['amount']`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T02:41:33.720

我找到的唯一解决方案是使用[Daniel De Sousa 的解决方案](http://enjoysmile.com/blog/24/paypal-adaptive-payments-and-ipn-part-two/)。该解决方案运行良好，但我担心 Paypal 会在某些时候更改一些小变量并破坏实施。总体而言，Paypal 对自适应支付 IPN 响应的支持和文档是低于标准的。

# php - cookie 中的哈希密码

> ID：11402409
> 
> 赞同：0
> 
> 时间：2012-07-09T20:15:27.530
> 
> 标签：php, security, cookies, hash, passwords

站点安全性：用户要么重新登录，要么从 cookie 中提取密码并登录（如果 cookie 密码无效，则被拒绝）。+ 多次登录失败导致拒绝。

密码经过 md5 散列和随机数加盐。

我的问题是，这不合适吗？

我知道这并不完全安全。有人可以访问用户的 cookie，破解散列的 cookie，然后知道用户密码。

但是，它是否相当安全？从某种意义上说，在任何地方存储纯文本密码是不道德的，这在某种程度上是不道德的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T20:23:03.690

这是灾难性的。

正确（或至少更好）的方法是创建一个足够长且随机的服务器端令牌，以便在用户登录时发送到 cookie 中。当服务器收到 cookie 时，检查针对列表的令牌以查看它是否匹配，如果匹配，则认为用户已验证。

一些杂项说明：

*   您可能希望不时重置该令牌，以防止复制用户 cookie 的人无限期地访问您的站点。例如，如果令牌超过一周，则生成一个新令牌并将其发送到客户端并在服务器端使旧令牌过期。
*   将令牌服务器端视为与用户名和密码相同的安全性，因为它被视为一种身份验证机制。不要只是把它放在每个人都可以访问的表格或文件中！
*   对于任何具有破坏性或更高机密性的交易，请确保强制用户通过用户名和密码重新验证。例如，如果用户想要更改他们的密码，或者如果您使用电子邮件作为密码恢复机制并且他们想要更改他们的电子邮件地址，或者如果他们想要删除他们的帐户等，请让他们输入即使令牌存在，他们的用户名和密码也可以这样做。

您可能想查看[OWASP 站点](https://www.owasp.org/index.php/Main_Page)以获取更多提示和最佳实践，但是，请*不要*以任何形式将密码发送给客户端，无论它是经过散列、编码还是其他方式。

# javascript - 检查 Facebook Open Graph 对象的操作状态

> ID：11402416
> 
> 赞同：0
> 
> 时间：2012-07-09T20:15:48.497
> 
> 标签：javascript, facebook, facebook-graph-api, fbjs, facebook-javascript-sdk

给定以下对对象发布操作的调用，确定用户是否已对所述对象执行操作的代码是什么？将“post”切换为“get”会拉取所有用户的操作（不仅仅是针对当前 obj），并且将第一个参数替换为对象的 URL 会引发错误。

*   澄清：我想知道用户是昨天还是在以前的某个时间采取了行动。不是当前调用是否成功。

    ```
     FB.api('/me/namespace:action', 'post', likeOpts, 
            function(response) {
                if (!response || response.error) {
                    console.log(response.error);
                } else {
                    // success
                }
            }); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:09:15.330

没有这样的调用来实现这一点。

您应该将先前的操作保存到数据库（或保存用户已经执行操作的布尔值）或检查 /me/namespace:action 的获取响应中的最后一个操作。从该响应中，您可以过滤当前对象 url。

如果它是读取操作，则在让用户调用该操作两次时会出现错误。

如果动作返回动作实例id，则调用成功并保存。

```
FB.api(
'/me/namespace:action',
'post',
{ OBJECT_TYPE: 'OBJECT_URL' },
function(response) {
   if (!response || response.error) {
      alert('Error occured');
      console.log(response.error);
   } else {
      alert('Code was successful! Action ID: ' + response.id);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:57:31.930

它应该出现在他们的提要中 - 如果他们为您提供了使用该应用程序的访问令牌，您可以检查用户的提要。我做了一个带有开放图的测试来测试它，但因为是我，我可以检查我自己的提要。对于另一个用户，您必须在访问令牌过期之前捕获它，并将其填充到 FB 图形浏览器工具中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:43:18.130

我的预期问题的范围已经改变，所以这个答案不是 100% 直接的，但它是我最终使用的，我认为它可以使未来的观众受益。

我通过 js sdk 使用以下 FQL 查询来确定特定用户是否喜欢特定对象。如果有，它将返回一个带有其 id 的数组。如果没有，它将返回一个空数组：

```
 FB.api({
            method: 'fql.query',
            query: 'select user_id from like where user_id=' + UserIDVar + ' and object_id=' + ActionIDVar,
            return_ssl_resources: 1
        }, function(response){
            console.log(response);
        }); 
```

可以修改 FQL 查询以满足您的需要，并且可以在此处参考文档： [https ://developers.facebook.com/docs/reference/fql/like/](https://developers.facebook.com/docs/reference/fql/like/)

# matlab - 在函数调用期间浏览变量

> ID：11402417
> 
> 赞同：2
> 
> 时间：2012-07-09T20:15:53.640
> 
> 标签：matlab, matlab-uitable

在运行我的一个程序时，我需要扫描一个相当大的矩阵 (100*700) 来识别异常情况。

我最初的想法是在需要进行数据扫描时设置一个断点，但我不喜欢这种解决方案。

我正在寻找的内容相当于`openvar('A')`在函数调用期间调用（除了我目前不能这样做）。另一种方法是`disp`使矩阵变得很差。

有什么提示吗？

**编辑：**
我正在尝试做的一个示例：

```
function main

time = 0:pi/100:4*pi;
inV = (1:100)';

data = 10*diag(rand(100,1))*sin((inV)*time);

error = ceil(350*rand); % find the anolmaly
data( ceil(100*rand),error:(error+20))= -13;
test = true;

openvar('data')

while test

    close all;
    figure(1)
    hold on;
    plot(data')

    test= (input(strcat('Further review? ')));
    if (test)
        data(test,:) = [];
    end
end 
```

如果我使用断点，我可以扫描数据，知道它`-13`正在对其造成严重破坏（这`-13`是我使用的一些随机数，实际上，它要复杂得多）。然而，断点只存在于当前的 Matlab 会话期间。

我正在使用 Matlab 2012a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:05:37.793

好的，所以我要找的是

```
t = uitable;
set(t,'Data',data) 
```

又好又简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:11:46.727

(1) 可以使用 DISP(NUM2STR(DATA,FORMAT)) 或者 FPRINTF 来更正确地渲染矩阵，但是显示一个 100x700 的矩阵确实不是一个好主意。

(2) 您正在使用 Matlab，所以我认为 Matlab 应该为您找到矩阵中的不规则性。如果您手动完成这样的工作，使用 Matlab 有什么意义。我建议用算法找到矩阵中的不规则性（你可以提供一些关于不规则性的细节，也许有人会想出一个关于如何做到这一点的想法）。

# android - 在没有任何布局的情况下向活动添加按钮

> ID：11402418
> 
> 赞同：1
> 
> 时间：2012-07-09T20:15:56.200
> 
> 标签：android, android-layout, android-widget, android-view

问题是我在我的活动中使用了一种 SurfaceView，我想在其中添加按钮。

**我的问题是：**

1) 如何在不调用 findViewById(...) 的情况下创建按钮实例？（因为surfaceView我没有布局）......

2) 我如何在画布上绘制这个按钮？

或者，也许您建议做其他事情？

我只关心我的屏幕上会有按钮，我可以实现类似 OnClickListener(...)....

提前感谢所有人！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T20:25:57.723

`setOnClickListener` 在没有 xml的情况下添加为 Activity 的按钮：

```
@Override  
        protected void onCreate(Bundle savedInstanceState) {  
            // TODO Auto-generated method stub  
            super.onCreate(savedInstanceState);  

            Button button= new Button (this);  
            FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(  
            FrameLayout.LayoutParams.WRAP_CONTENT,  
            FrameLayout.LayoutParams.WRAP_CONTENT);   
            params.topMargin = 0;  
            params.gravity = Gravity.TOP | Gravity.CENTER_HORIZONTAL;  

            button.setText("dynamic Button");  
            addContentView(button, params);  
            // setContentView(tv);  
            button.setOnClickListener(new Button.OnClickListener(){  
            @Override  
            public void onClick(View v) {  

            }  

        });  
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:24:49.010

如果您在画布上绘制按钮（这是可能的），它将无法点击。你真正想要的是：

*   将 SurfaceView 包装到框架布局中 - 如果您还将其他视图添加到同一布局中，它们将出现在 SurfaceView 上方；
*   为上面提到的框架布局添加一个相对布局（这样您就可以定位按钮和可能的其他视图 - 如果您只有按钮，您可能只需设置边距就可以逃脱）。

像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/FrameLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <SurfaceView
        android:id="@+id/surfaceView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/restartButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:onClick="whatever"
            android:text="look, I float above the SurfaceView!" />

    </RelativeLayout>

</FrameLayout> 
```

# iphone - 我的 IOS 网络照片浏览器应用程序正在使用 240mb 的实际内存。

> ID：11402423
> 
> 赞同：0
> 
> 时间：2012-07-09T20:16:30.863
> 
> 标签：iphone, ios5

我是ios开发新手。我开发了一个应用程序，它显示一些图像形式的 url。我使用 MWPhotoBrowser 来加载我的图像和缓存管理。我的应用要显示 33 张图片。我检查了活动监视器中的实际内存，它从 15MB 开始，到我看到第 33 张图像时增加到 240MB。如果我提交我的应用程序进行审核，这是否会成为问题。

谢谢，普里亚瑟姆·安妮塞蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:41:30.450

在真实设备上进行测试时，您是否遇到过应用程序崩溃的情况？如果是这样，您当然需要重新考虑您的内存管理。

我记得当时我在 Lynda.com 上的一个培训课程实际上是说，iOS 只允许你使用大约 50 Mb 的内存，如果任何应用程序包括 Apple 的应用程序使用超过这个，应用程序将自动关闭IOS。我不知道应用程序现在可以实际使用多少内存，但 240 Mb 可能太多了，因为 iPhone 4 和 iPhone 4S 总共只有 512 Mb。我会说，如果您经常遇到应用程序崩溃，那么您可能会被Apple拒绝。

一般来说，我认为你需要再看看你的内存管理，看看你是否可以重用它们并修复泄漏（如果有的话）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:51:51.663

240MB 只是一个巨大的内存使用量，可能表明您的应用程序中的某个地方存在内存泄漏。在实际设备上运行较长时间或要显示更多图像时，它可能会崩溃。如果您不使用 ARC，请确保您的所有保留都与保留正确平衡。我建议您使用 Xcode Analyzer 来跟踪您的内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:35:29.873

正如每个答案所提到的，任何使用这么多内存的应用程序都会被操作系统杀死。大约 20mb 您的应用程序将收到警告，大约 35mb iOS 将开始杀死进程，并且在 50 时您几乎可以保证已经死了很久。如果用户像大多数人那样在后台运行很多东西，那么这些可能会更少。

1.  如果您需要特定帮助，请发布您的代码。有很多事情你可能做错了

2.  使用断点和仪器中的泄漏分析器来尝试跟踪导致主要内存问题的代码行。

3.  显然，您需要找到一种仅将您需要的图像保存在内存中的方法。如果您要扫描许多照片，最好的方法可能是将它们放在表格视图中，因为它们具有内置的可重用标识符属性，可以显着改善您的内存占用。

4.  具体告诉我们您使用什么方法将图像存储在内存中。

# c# - 刷新更新面板 c#

> ID：11402424
> 
> 赞同：1
> 
> 时间：2012-07-09T20:16:31.050
> 
> 标签：c#, updatepanel, webforms

我有一个更新面板，当我单击删除按钮时似乎没有刷新。我知道如果我离开页面并返回，那么该行将被删除，然后该行不再存在。知道为什么更新面板没有刷新吗？

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">

  protected void btnDeleteMessages_Click(object sender, EventArgs e)

{

  DeleteRow();

  UpdatePanel1.Update();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:21:42.170

如果您在更新面板中使用任何类型的数据绑定控件，则需要`DataBind()`在每个控件上调用该方法以查看对反映在您的页面上的基础数据的更新。

我怀疑这可能是问题所在，特别是如果您的`DeleteRow()`方法更改了基础数据，而不是表本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:25:43.710

您是否将 CausesValidation 属性设置为“True”？如果是，则尝试将其设置为 false 并查看。DeleteRow 也可能会有所帮助。

如果没有，让我们看看这个代码片段是否能完成这项工作？

```
if (ButtonClick!= null)
        {
            Page.GetType().InvokeMember(ButtonClick.Method.Name, BindingFlags.InvokeMethod, null, Page, new []{sender, e});
        } 
```

# php - 为什么我上传的图像代码接受 avi 和 flv 文件

> ID：11402426
> 
> 赞同：0
> 
> 时间：2012-07-09T20:16:33.130
> 
> 标签：php, image-uploading

我编写 php 代码以允许用户提交图像并将其上传到服务器。我让它工作并且服务器接收到图像。但似乎服务器甚至接受 .avi 和 .flv 文件。我确实编写了 if/else 语句来检查文件是否为图像，但为什么它不起作用？谢谢

这是我的php代码

```
$tmpPath = $_FILES["image"]["tmp_name"];
$movedPath = "submit-img/" . $_POST["category"] . "/" . $_FILES["image"]["name"];

$fullURL = parse_url($_SERVER['HTTP_REFERER']);
$query = explode("&", $fullURL["query"]); //only choose first query
$prevPage = "gallery.php" . "?" . $query[0];

//I get the file type here
$fileType = strpos($_FILES["image"]["type"], "image/");

//if its not an image then redirect to the previous page and send a message
if ($fileType === false || ($_FILES["image"]["size"]) == 0 || $_FILES["image"]["size"]/1024 > 5000){
    $prevPage = $prevPage . "&imgSubmit=none#imgSubmitForm";
    header("Location: " . $prevPage);
}else if ($_FILES["image"]["size"] > 0){ //if file is an image
    if (!is_file($movedPath)){
        move_uploaded_file($tmpPath, $movedPath);
    }else{
        while (is_file($movedPath)){    
            $extension = strrchr($movedPath, ".");
            $movedPath = str_replace($extension, "", $movedPath) . "1" . $extension;
        }
        move_uploaded_file($tmpPath, $movedPath);
    }
    $prevPage = $prevPage . "&imgSubmit=submitted#imgSubmitForm";
    header("Location: " . $prevPage); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:33:20.087

```
}else if ($_FILES["image"]["size"] > 0){ //if file is an image 
```

对这一行的评论从根本上具有误导性。`size`关键`$_FILES`是文件的大小（以字节为单位）；它与“文件是否为图像”无关。（特别是，它*不是*图像的物理尺寸。）

如果您需要测试文件是否为图像，最好的办法是使用该[`getimagesize`](http://php.net/manual/en/function.getimagesize.php)功能。如果图像是 PHP 识别的图像类型，此函数将返回图像的大小，如果不是图像，则返回零。

不要使用数组的`type`字段`$_FILES`来确定文件是否为图像。此字段由浏览器填充，而不是由服务器填充，并且可能包含误导和/或完全不正确的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:36:12.857

不是答案，但您的代码很容易受到攻击：

1）您不检查上传成功，并假设它确实成功。在执行任何操作之前始终检查上传失败：

```
if ($_FILES['image']['error'] !== UPLOAD_ERR_OK) {
   die("Upload failed with error code " . $_FILES['image']['error']);
} 
```

2）您正在使用该`['type']`字段进行验证。这是一个用户提供的值，不能被信任。恶意用户可以轻而易举地操纵该值说`image/jpeg`但仍在上传`nastyvirus.exe`。

3）您正在使用该`['name']`字段存储在您的服务器上。这也是用户提供的数据，并且可以通过简单的操作来包含路径信息，例如`../../../../../../../etc/passwd`. 由于您盲目地使用它，因此您允许恶意用户在您的服务器上任何网络服务器有权访问的文件上乱涂乱画。

# asp.net-mvc-3 - 如何允许多个用户同时执行冗长的 mvc3 操作并具有良好的响应时间？

> ID：11402431
> 
> 赞同：1
> 
> 时间：2012-07-09T20:16:50.353
> 
> 标签：asp.net-mvc-3, upload, controller, cassini

我对此有 3-4 个相关问题。

1.  如果行号 X 使用同步上传方法，则：-

    一种。如何为来自同一用户（同一会话）的另一个请求提供服务：-

    *   与_UploadStatement 不同的操作方法？- 它会同时排队或服务吗？

    *   相同的动作方法即_UploadStatement？- 它会被放入队列中还是同时提供？

    湾。如何为来自不同用户（不同会话）的另一个请求提供服务：-

    *   与_UploadStatement 不同的操作方法？- 它会同时排队或服务吗？

    *   相同的动作方法即_UploadStatement？- 它会被放入队列中还是同时提供？

如果它们被放入队列，那么这意味着下一个用户将不得不等到第一个用户的上传完成？

> ```
> public class AbcController : Controller  
> {  
>   public ActionResult A1()  
>   {  
>     return view();  
>   }  
> 
>   public JsonResult _UploadStatement(HttpPostedFileBase UploadedStatement)  
>   {  
>     // Some web service uploading a lengthy file received to other server (say amazon s3 storage):-  
>     // LINE NUMBER - X  
>   }  
> } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:24:05.370

这些动作将并行发生。每次 IIS 收到新请求时，它都会创建一个新控制器，并在新控制器实例上执行该操作。但是，每个控制器将使用不同的线程执行请求。

只有当你有这样的代码时，用户 B 才必须等到用户 A 完成上传：

```
public class AbcController : Controller  
{  
  private static readonly object Lock = new object();

  public ActionResult A1()  
  {  
    return view();  
  }  

  public JsonResult _UploadStatement(HttpPostedFileBase UploadedStatement)  
  {  
    lock (Lock) 
    {
        // Some web service uploading a lengthy file received to other server (say amazon s3 storage):-  
        // LINE NUMBER - X  
    }
  }  
} 
```

这样的锁会告诉线程“嘿，一次只允许我们一个人执行这个方法。现在我已经锁定了方法，你必须等到我完成。当我完成时，我会把锁交给你，然后你就可以执行方法，让其他人等你完成。”

action 方法不知道也不关心请求来自谁。如果用户 A 提交了 3 个上传，IIS 将使用不同的线程并行执行它们。但是，它可能不会按照请求的顺序返回结果。例如，第二个请求可能首先完成，然后是第三个，最后是第一个。

但是可能发生的是线程饥饿。假设您有 50 个用户，每个用户同时上传 3 个文件。这意味着将从池中取出至少 150 个线程，这可能会导致应用程序的其他部分响应更慢。您可以考虑从 AsyncController 进行扩展，以帮助处理因线程阻塞而受到大量 I/O 限制或以其他方式潜伏的任务的线程饥饿场景。

# axes - 如何在画面中修复热图中的比例

> ID：11402432
> 
> 赞同：0
> 
> 时间：2012-07-09T20:16:52.053
> 
> 标签：axes, tableau-api

我正在创建一个带有 3X3 矩阵的热图。我的 x 轴刻度应该是 0、0.25、0.50 和 1。我尝试了很多来修复刻度，但没有成功。请帮忙。我们怎样才能得到0,0.25.0.50和1的比例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:26:32.257

在许多情况下，您可以通过直接操作或拖放在 Tableau 中获得效果。但是还有很多其他功能可以通过右键单击来访问上下文相关菜单。例如，您可以右键单击任何内容来调整其格式。

对于轴，右键单击轴，选择编辑轴，您将看到一个模态对话框面板，可让您设置轴的最小值和最大值，以及主要和次要选项卡的步长。

# image - 区分图片的盗链和直接链接

> ID：11402436
> 
> 赞同：0
> 
> 时间：2012-07-09T20:16:59.180
> 
> 标签：image, apache, .htaccess, mod-rewrite

有什么方法可以区分直接图片点击和热链接图片？

我想要完成的是：

如果用户直接访问“page.com/image17.gif”，他应该被重定向到“page.com/page17.html”

如果有人在另一个页面上嵌入图像，他应该会看到“notHotlink.jpg”

我的网站和搜索引擎应该不受影响，因此它们的索引仍然适用于图像搜索

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:24:52.160

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC]
RewriteRule \.(gif|jpg)$ http://www.mydomain.com/angryman.gif [R,L] 
```

# javascript - 像facebook商业页面一样使用内置的open-graph api不能与javascript sdk一起使用

> ID：11402438
> 
> 赞同：1
> 
> 时间：2012-07-09T20:17:03.223
> 
> 标签：javascript, facebook, sdk, facebook-like, facebook-opengraph

用户登录并授权我的应用代表他/她发布后，我如何为 Facebook 业务页面点赞？到目前为止，这是我的代码：

```
window.fbAsyncInit = function() {
    FB.init({ appId: 'MY_APP_ID',                    
        status: true, 
        cookie: true,
        xfbml: true,
        oauth: true});

        document.getElementById('fb-auth').addEventListener('click', function() {
          FB.login(function(response){
            if(response.authResponse){ // user has authorized app
                FB.api('/me/likes/BUS_PAGE_ID', function(response){
                    if(response.data.length>0) {
                       // user has liked the page
                    } else {
                       // like the page for the user                                  
                    }
                });
            }
          }, {scope:'publish_actions, user_likes'});
        }, false);
}; 
```

代码运行到授权应用程序的程度，我可以通过 FB.api(...) if(response.data.length>0) 查看用户是否喜欢业务页面。我应该在 //like 页面为用户放置什么，以便我的应用可以喜欢特定的业务页面并将其添加到用户的喜欢中？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T05:55:00.953

操作只能用于 Facebook 以外的对象。

您不能使用内置的点赞操作，也*绝对*不能强迫用户点赞 Facebook 页面。

使用[Like 框](https://developers.facebook.com/docs/reference/plugins/like-box/)或将用户重定向到您的 Facebook 页面。

# java - Java - 如何识别最常用的分隔符

> ID：11402445
> 
> 赞同：3
> 
> 时间：2012-07-09T20:17:20.473
> 
> 标签：java

我有一个字符串：

www.domain.com/I-Need-This-Part

我需要检测 / 之后最常用的分隔符是什么，在这种情况下是 - 。分隔符可能会根据 url 改变。

一旦我解决了这个问题，我将使用 .split 并传入最常用的分隔符来计算部分。

对此的任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:24:15.797

定义分隔符，然后对它们进行计数和排序。
定义它们取决于您。
此处的计数是一个链接：[Java：如何计算字符串中字符的出现次数？](https://stackoverflow.com/questions/275944/how-do-i-count-the-number-of-occurrences-of-a-char-in-a-string)
并且您可以通过使用具有适当比较器和内容类型的 TreeMap 来进行动态排序，例如 A Delimiter - nrOfOccurrences 对。（PriorityQueue 也可以解决问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:24:30.837

首先想到的是：

*   遍历要计算分隔符的字符串部分
*   检查当前字符是否为分隔符（最好在 O(1) 中）
*   有一个从 char 到 int 的 hashmap，如果没有插入则插入当前分隔符，否则 ++ 那个条目
*   遍历 hashmap 以找到使用最多的分隔符

如果你只有几个分隔符，你应该使用 zeller 的答案。如果你有很多分隔符，这个算法应该更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:21:51.467

仅计算您认为作为分隔符候选的字符应该是一项非常简单的任务。`indexOf`例如，您可以为此雇用。

```
final String url  = "www.domain.com/I-Need-This-Part";
final int neededStart = url.indexOf('/')+1;
char mostFrequent = '\u0000';
int highestFreq = 0;
for (char delim : new char[] {'%', '-', '$', '+'}) {
  int cnt = 0;
  for (int i = url.indexOf(delim, neededStart); i != -1;
        i = url.indexOf(delim, i+1), cnt++);
  if (cnt > highestFreq) { highestFreq = cnt; mostFrequent = delim; }
}
System.out.println(mostFrequent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:27:52.303

假设您有一组特定的可能分隔符，您可以使用[Apache Commons](http://commons.apache.org/lang/)库并使用它们的

```
StringUtils.countMatches 
```

计算出现次数的方法。

另一种方式（同样，如果您已经有一个分隔符列表），您可以通过创建一个 Map (key = delimiter, value= count) 来遍历 String 一次，当您遇到分隔符时，将其放入映射中，如果它已经存在，增加计数。从那里，您可以找出哪个条目的计数最高。

# vim - Vim：查看文件结构——类、方法、函数

> ID：11402447
> 
> 赞同：46
> 
> 时间：2012-07-09T20:17:30.693
> 
> 标签：vim, ide

所以我有这个梦想，对吧：我在 PHP、vim 中做着不可思议的魔法，每隔一段时间我都想按下一些花哨的按钮组合（越长越好）以便能够浏览文件，不是枯燥的逐行模式，而是宏伟的概览模式。在类、方法、函数、变量和其他代码奇迹的树状列表中大饱眼福。在纯粹的欢乐中从一个功能跳到另一个功能。

你知道满足我欲望的方法吗？

有点像任何 IDE 中的任何文件结构对话框/视图。任何事物？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T12:52:15.683

[TagBar](http://www.vim.org/scripts/script.php?script_id=3465)与前面提到的 TagList 类似，但方式不同，但它在 PHP 中不是*那么*好。

[这个非常新的插件](http://www.vim.org/scripts/script.php?script_id=4125)声称可以解决这个问题。不过，我从未测试过它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T22:26:32.740

这让人想起[ack](http://betterthangrep.com/)和[Ack.vim](https://github.com/mileszs/ack.vim/)关于跳转到许多文件中的函数。还有用于文件浏览的[FuzzyFinder](https://github.com/vim-scripts/FuzzyFinder)或[command-t](https://github.com/wincent/Command-T.git)或[NERDTree](https://github.com/scrooloose/nerdtree/)和用于源代码浏览的[Taglist 。](https://github.com/vim-scripts/taglist.vim)您还可以使用`:help foldmethod`折叠所有功能并以可扩展的“树状”方式查看它们。熟悉`gf`并`* or #`在文件和变量之间跳转。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-12T11:11:06.013

我用`:set foldmethod=syntax`. `zM`把所有东西都折叠起来；`zx`打开光标下的折叠并关闭其他打开的折叠。该`taglist`插件（如前所述）会做得更多，但折叠是一个快速的胜利。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T22:34:08.420

[Taglist](http://www.vim.org/scripts/script.php?script_id=273)允许您对开放缓冲区执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-27T20:59:03.963

虽然它不能满足您对充满花哨按钮的魔法世界的所有梦想，您的眼睛可以在无尽的源代码树上大饱眼福[...](https://www.vim.org/scripts/script.php?script_id=1623) F5（并且在 12 年后仍然更新）

[![vimfolding 屏幕截图](../Images/dedcdc8fec2fa75cc11056f9ca44474d.png)](https://i.stack.imgur.com/OjHFx.gif)

# css - 在 Twitter Bootstrap 中居中右 .span9 内容？

> ID：11402448
> 
> 赞同：0
> 
> 时间：2012-07-09T20:17:32.283
> 
> 标签：css, html, twitter-bootstrap

我的 Bootstrap 设置非常简单，与此[示例](http://twitter.github.com/bootstrap/examples/fluid.html)非常相似。我有一个左侧的侧边栏和右侧的内容。我要完成的简单任务是将页面的右侧居中。

更一般地说，我想将放置在里面的任何 div 居中`div.span9`。我用过`.span4 .offset4`但它不起作用：

```
<!--End of sidebar -->
<!-- Right side -->
<div class="span9">
    <!-- Right side-->
    <div class="form-container span4 offset4">
        <form class="form-horizontal">
            <!-- ... -->
        </form>
    </div>
</div>
<!--/span--> 
```

[在这里，您可以在 jsFiddle 上](http://jsfiddle.net/8PdQc/2/)看到完整的代码和一个实时示例。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:44:04.477

**更新**：Bootstrap 从 2.1.0（或大约）开始支持流体偏移。请参阅[流体偏移文档](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem)

* * *

流体网格中没有偏移。检查这一点：[Bootstrap 中 Fluid Row 的 Offset Margin-Left Percentages](https://stackoverflow.com/q/11383774/1478467)

其次，如果您在溢出的内容中放入一些内容`.span4`，则居中只会应用于`.span4`容器。您也应该修复内容宽度（即`.control-group`和`.control`）。

如果您更喜欢简单的方法，您可以保持网格静态（非流动）并使用`.offsetX`类或`margin-left: auto; margin-right: auto;`.

# sql - lucene vs sql 结果评分

> ID：11402449
> 
> 赞同：2
> 
> 时间：2012-07-09T20:17:34.280
> 
> 标签：sql, lucene, full-text-search, lucene.net, sql-server-2012

鉴于以下查询，我在 SQL 和 Lucene 之间得到了截然不同的排名/评分：

[伪代码]（解释 * 的 3 内的 statut*）和矛盾

我不认为这是解析器的问题，因为所有结果似乎都符合查询要求。但是，在前 1000 个结果中，我只得到了 172 个常见结果。由于 Lucene 和 SQL 的所有结果似乎都符合查询要求，我唯一剩下的猜测是评分在某种程度上完全不同。我很难找到任何关于 SQL 如何处理评分的信息，也很难找到比较 SQL 和 Lucene 评分的信息。我不一定期望两个引擎的结果集相同，但我期望超过 10% 的相似性，我至少需要能够解释巨大的差异。

我该如何解释这种重大差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:12:43.690

从[MSDN 上标题为“搜索查询结果如何排名”的文档](http://msdn.microsoft.com/en-us/library/ms142524%28v=sql.105%29.aspx)（强调我的）：

> SQL Server 中的全文搜索可以生成一个可选的分数（或排名值），用于指示全文查询返回的数据的相关性。此排名值在每一行上计算，并可用作排序标准，以按相关性对给定查询的结果集进行排序。排名值仅指示结果集中行的相对相关顺序。**实际值并不重要，并且每次运行查询时通常都会有所不同。rank 值在查询中没有任何意义**。

也就是说，SQL 全文搜索*对结果没有真正的价值*；它与结果中的其他行相关的唯一值。

[将其与Lucene](http://lucene.apache.org/core/3_6_0/scoring.html)中的评分进行比较，这完全取决于您如何索引文档，文档和/或字段是否被提升，过滤器等。

Lucene 中的评分也是一致的，这与 SQL Server 不同，后者没有任何保证。它甚至反映在名称中，SQL Server 中全文查询的结果是*排名*值而不是分数，就像在 Lucene 中一样。

这些值并不完全可比，但这是可以理解的，因为*结果*也不相同。

# asp.net-web-api - ASP.NET Web API 通过检查请求内容类型以 JSON 或 XML 格式返回数据

> ID：11402450
> 
> 赞同：2
> 
> 时间：2012-07-09T20:17:49.397
> 
> 标签：asp.net-web-api, content-negotiation

使用 ASP.NET Web API 时，如何检查请求内容类型是 application/xml 还是 application/json？我知道 ASP.NET Web API 中的内容协商，但它不适用于我，因为我只从数据库中获取 XML 格式的数据。因此，如果我可以检查请求内容类型，我可以在请求内容类型为 XML 时将 XML 转换为 json，否则只需返回 XML。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:27:00.640

创建一个新的 ApiController 类，通过从 apiController 继承，添加 JsonContent 动作。

```
public class ApiCustomController: System.Web.Http.ApiController {
    public class JsonContent : ActionMethodSelectorAttribute {

        public override bool IsValidForRequest(
            ControllerContext controllerContext
            , System.Reflection.MethodInfo methodInfo) {

            var Request = controllerContext.HttpContext.Request;
            string requestedWith = Request.ServerVariables["HTTP_X_REQUESTED_WITH"] ?? string.Empty;
            return string.Compare(requestedWith, "XMLHttpRequest", true) == 0
                && Request.ContentType.ToLower().Contains("application/json");
        }
    }

} 
```

然后在您的控制器中，从自定义控制器类“ApiCustomController”继承并使用 ActionMethodSelectorAttribute“JsonContent”。

```
public class IngredientsController : App_a_matic.Controllers.ApiController {
    // GET api/values
    [HttpGet]
    [JsonContent]
    public IEnumerable<string> Get() {
        return new string[] { "value1", "value2" };
    }
 } 
```

这是您在“contentType：'application/json'”中发送的，例如：

```
 $(function () {
        $.ajax({
            url: 'api/Products/Ingredients'
            , contentType: 'application/json'
            , dataType: 'json'
            , type: 'GET'
            , success: function (result) {
                console.log(result);
            }
        });
    }) 
```

而不是仅仅使用 getJson。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:12:01.277

您想要检查**Accept**标头以查看他们是否想要返回 JSON 与 XML。为此，您需要检查上下文的请求标头。至少有两种方法可以做到这一点。

**选项 #1 - 在 API 控制器方法内部实现**

要在您的 API 方法中执行此操作，请检查其中的内容：

```
this.ControllerContext.Request.Headers.Accept 
```

* * *

**选项 #2 - 使用 ActionFilterAttribute**

有了它，您还可以检查以查看客户想要返回的内容。

```
public class HttpUserContextFilterAttribute : ActionFilterAttribute
{        
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
         //Here is where you can inspect the headers
         //e.g. look into actionContext.Request.Headers.Accept 
```

# soap - 如何在响应中断言空标签？

> ID：11402453
> 
> 赞同：4
> 
> 时间：2012-07-09T20:17:56.967
> 
> 标签：soap, groovy, assert, soapui

我正在使用数据源来驱动发送 SOAP 请求并返回 SOAP 响应的测试步骤。

当我验证响应时，有时我希望其中一个字段具有值（字符串），有时我希望它不会被初始化为值（即，`<message/>`而不是`<message></message>`）。与比较 VS 和 Excel（我的数据源）中的空字段时是否`<message/>`有任何不同`<message></message>`，老实说，我不知道。我所知道的是，soapUI 不喜欢将空的 Excel 字段与`<message/>`.

我想建立一个足够智能的断言，能够断言这两种情况。如果我期望一个空的结果，它将断言该字段应该是空的。如果我期望一个字符串，它将断言该字符串在那里。

当将空的预期结果（从 Excel 电子表格中读取）与空字段（或者更确切地说，一个没有任何值的字段）进行比较时，soapUI Pro 中的默认功能似乎不起作用。

* * *

## 功能测试示例：

我正在测试一个创建帐户的 API。因此，我将其输入数据以创建帐户：

```
<username>username</username>
<password>password</password> 
```

由此，我期望得到以下回应：

```
<code>0</code>
<resultMessage>Created successfully!</resultMessage> 
```

我的数据源（Excel 电子表格）有以下信息：（前两个字段是输入，后两个是预期结果）

> 用户名，密码，0，创建成功！

因此，soapUI 比较了适当的字段，并且工作正常。

## 损坏测试示例：

现在，假设我想测试未创建帐户时会发生什么：

```
<username>bad username</username>
<password>bad password</password> 
```

由此，我收到以下回复：

```
<code>-1</code>
<resultMessage/> 
```

我的数据源（Excel 电子表格）有以下信息：（前两个字段是输入，后两个是预期结果，第四个字段是**空**的）

> 错误的用户名，错误的密码，-1，

所以这一次，我有一个空值来比较`<resultMessage/>`。唯一的问题是它没有正确比较两个空字段。

我收到以下错误：

```
[Match content of [resultMessage]] XPathContains assertion failed for path [declare namespace ns1='http://website.com/Account/'; //ns1:CreateAccountResponse[1]/resultMessage[1]/text()] : Exception:Missing content for xpath[declare namespace ns1='http://website.com/Account/'; //ns1:CreateAccountResponse[1]/resultMessage[1]/text)()] in Response 
```

请注意，我是 groovy 的新手，soapUI 的新手，节点概念的新手（并且忘记了）。

我想我会写一个脚本来解决我的问题。该脚本将检查以确保预期结果不为空，然后`<resultMessage>`与预期结果进行比较。

**如果预期结果为**空，我还没有写任何东西来处理该怎么做。

```
import com.eviware.soapui.support.XmlHolder

def holder = new XmlHolder( messageExchange.responseContentAsXml )
holder.namespaces["ns1"] = "http://website.com/Account/"
def node = holder.getDomNode( "//ns1:CreateAccountResponse[1]/resultMessage[1]" )
def expectedResultMessage = context.expand( '${CreateAccount DataSource#resultMessage}' )

if (expectedResultMessage != null)
 assert node == expectedResultMessage 
```

作为节点和 Groovy 的新手，我不确定我是否正确地将 in 的值与 in`node`的值进行比较`expectedResultMessage`。或者，如果有适当的方法来检查和比较 VS 关闭自身的字段（即。`<resultmessage/>`）。

运行此脚本时，我得到以下结果：

```
[Assert node [resultMessage]] assert node == resultMessage |  |    | |    | null   | ""  |  false <?xml version ="1.0" encoding="UTF-8"?> <resultMessage xmlns:ns1="http://website.com/Account/" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"/> 
```

我可能会设置它，所以响应只是返回`<resultMessage></resultMessage>`而不是`<resultMessage/>`，但我认为有一种方法可以处理后者，而不是创建一个解决方法。

希望这不是太啰嗦，希望它有点清楚！任何帮助，将不胜感激！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-12T03:57:12.687

这个答案太晚了，但我觉得扔在stackoverflow上很重要。[我使用这里](http://forum.soapui.org/viewtopic.php?f=5&t=3752&p=13155&hilit=null%20value%20concat&sid=5b10e10fa8a1dffd4f5a9eaf3196c138#p13155)写的 concat() hack 。尝试使用这个：

concat(//myxpath/text(),"")

因此，您的数据表将有一个空字段的空白值。Concat 将连接字符串。因此，如果工作表中有数据，它将不会向现有字符串添加任何内容，如果值为 null，soapUI 会将其转换为匹配您的空白值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:15:32.497

让我建议您使用`XmlSlurper`而不是`XmlHolder`使用 Xml。`resultMessage`这是从您的响应消息中获取的片段：

```
def doc = new XmlSlurper().parse(messageExchange.responseContentAsXml)
def value = doc.resultMessage 
```

在这种情况下，空元素的值`value`等于空字符串，适用于您的断言。

# extjs - 创建动态详细信息卡

> ID：11402459
> 
> 赞同：2
> 
> 时间：2012-07-09T20:18:24.373
> 
> 标签：extjs, sencha-touch-2, sencha-architect

无论如何为嵌套列表创建一个动态详细信息卡，该列表从嵌套列表正在使用的同一个 json 存储中提取数据？

我正在创建一个使用嵌套列表和 10 个问题的应用程序 - 每个问题都有自己的答案，由副本和图像组成。

我希望每个答案都使用从 json 文件中提取副本和 img 文件名的详细信息卡

谁能帮忙 - 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:38:40.527

您可以使用控制器在列表中使用*itemtap*事件。分配的处理程序将接收记录。

从那里您可以打开一个 Ext.Panel，在此面板的配置中，*数据*最初应该是一个空对象，并且*tpl*可以接收数据。

完成设置后，您可以使用 setData() 方法将数据添加到新面板。

控制器方法看起来像这样：

```
/**
 * Show the details
 * @param cmp the tapped component
 * @param index the index of the item
 * @param target the target tapped
 * @param record the record tapped
 */
onListItemTapped: function(cmp, index, target, record) {
    var recordData = record.getData(),
        detailView = Ext.create('MyProject.view.DetailView');

    detailView.setData(recordData);
    Ext.Viewport.add(detailView);
} 
```

Ext.Panel 的视图配置应如下所示：

```
{
    styleHtmlContent: true,
    data: {},
    tpl: [
        '<h3>{question}</h3>',
        '<p>{answerCopy}</p>',
        '<img src="{answerImageUrl}">',
     ].join("")
 } 
```

# hadoop - Cloudera CDH3安装失败，如何解决？

> ID：11402460
> 
> 赞同：0
> 
> 时间：2012-07-09T20:18:26.573
> 
> 标签：hadoop, sysadmin, cloudera

我正在尝试将 CHD3 安装到 3 节点集群上。我通过 Cloudera Manager 启动安装。所有三个安装都失败。

Cloudera 安装失败后，我在 /var/log/cloudera-scm-agent/cloudera-scm-agent.out 中看到此错误：

```
 File "/usr/lib64/cmf/agent/src/cmf/agent.py", line 19, in <module>
    import psutil
  File "/usr/lib64/cmf/agent/build/env/lib/python2.6/site-packages/psutil-0.3.0-py2.6-linux-x86_64.egg/psutil/__init__.py", line 84, in <module>
    TOTAL_PHYMEM = _psplatform.phymem_usage()[0]
  File "/usr/lib64/cmf/agent/build/env/lib/python2.6/site-packages/psutil-0.3.0-py2.6-linux-x86_64.egg/psutil/_pslinux.py", line 122, in phymem_usage
    percent = usage_percent(total - (free + buffers + cached), total,
TypeError: unsupported operand type(s) for +: 'int' and 'NoneType' 
```

显然，在启动时运行的 Python 解释器将“free”、“buffers”或“cached”视为具有 NoneType 并且此错误会导致整个安装回滚。

谁能建议为什么会发生这种情况和/或解决问题的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:25:39.557

问题出在 _pslinux.py 的 phymem_usage() 中：

```
def phymem_usage():
    # total, used and free values are matched against free cmdline utility
    # the percentage matches top/htop and gnome-system-monitor
    f = open('/proc/meminfo', 'r')
    try:
        total = free = buffers = cached = None
        for line in f:
            if line.startswith('MemTotal:'):
                total = int(line.split()[1]) * 1024
            elif line.startswith('MemFree:'):
                free = int(line.split()[1]) * 1024
            elif line.startswith('Buffers:'):
                buffers = int(line.split()[1]) * 1024
            elif line.startswith('Cached:'):
                cached = int(line.split()[1]) * 1024
                break
        used = total - free
        percent = usage_percent(total - (free + buffers + cached), total,
                                _round=1)
        return ntuple_sysmeminfo(total, used, free, percent)
    finally:
        f.close() 
```

请注意，它正在检查 /proc/meminfo 并将字段转换为整数，而不检查这些字段是否存在。在某些系统上，包括某些虚拟化技术，缓冲区或缓存可能会丢失。（LSB 规范指出这些字段中的大多数都是可选的。）

一个快速的解决方法是将 /proc/meminfo 更改为 /tmp/meminfo，“cat /proc/meminfo >/tmp/meminfo”，并添加如下行：

缓冲区：0 kB

# opengl - OpenGL FBO 多个纹理

> ID：11402461
> 
> 赞同：2
> 
> 时间：2012-07-09T20:18:33.723
> 
> 标签：opengl, textures, fbo

我有一个附加两个纹理的 FBO。然后我想绑定 FBO，使用第一个纹理作为输入（绑定）到着色器并写入第二个纹理，两者都附加到 FBO。我尝试使用 glDrawBuffer 将 GL_COLOR_ATTACHMENT1 指定为绘图缓冲区，但没有成功。这可能吗？

**编辑**：

这是我尝试这样做的方法：

```
GLuint tex0, tex1; // they are created elsewhere and bound to the fbo
glBindFramebuffer( GL_FRAMEBUFFER, fbo );

glActiveTexture( GL_TEXTURE0 );
glBindTexture( GL_TEXTURE_2D, tex0 );

glDrawBuffer(GL_COLOR_ATTACHMENT1);

// render code

glReadBuffer(GL_COLOR_ATTACHMENT1);
glReadPixels(...); 
```

但是 glReadPixels 的结果与我的预期不同。你能看出这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:25:10.313

您在着色器中采样的纹理不应绑定到 FBO。只需像普通纹理一样使用 glBindTexture 绑定它。

如果您将纹理同时绑定到采样器和 FBO，我相信您会得到未定义的行为。

# c# - 从 Soap 请求修改控制台应用程序的列表数组

> ID：11402463
> 
> 赞同：0
> 
> 时间：2012-07-09T20:18:42.800
> 
> 标签：c#, php, soap

我目前正在从事 ac#/php/soap 项目。主应用程序是控制台应用程序，php 是管理控制台应用程序的 Web 界面。

在控制台应用程序中，有一个静态列表数组，当 php web 界面发布肥皂消息时，它会调用控制台应用程序中的一个函数来更新数据库，然后它应该更新列表数组。但是，这是有效的，因为它正在设置值，但是控制台应用程序没有看到它已被更改。

看起来静态列表数组似乎仅在soap服务中使用，实际上并没有访问控制台应用程序正在查看的静态数组。

如何更新此静态变量，以便控制台应用程序可以看到它已被修改。

感谢您的任何帮助，您可以提供。

**更新** 如下要求是我正在使用的代码。

以下是公共网络方法

```
[WebMethod]
public List<SoapHandler.SoapStatusDetails> RetryEmailQueue(int emailId)
{
    SoapHandler soapHandler = new SoapHandler();
    List<SoapHandler.SoapStatusDetails> status = soapHandler.addEmailBackToQueue(emailId); 

    return status;
} 
```

下面是上面代码中调用的 SoapHandler 方法，这个类在控制台应用程序中。

```
public List<SoapStatusDetails> addEmailBackToQueue(int emailId)
        {
            List<SoapStatusDetails> status = new List<SoapStatusDetails>();
            try
            {
                string query = "UPDATE emailqueue SET Status=@status, RetryCount=@count WHERE id=@id";
                using (ConnectDb db = new ConnectDb(appSettings))
                {
                    using (MySqlCommand cmd = new MySqlCommand(query, db.conn))
                    {
                        cmd.Parameters.AddWithValue("@status", ManageEmail.EmailStatus.Queued.ToString());
                        cmd.Parameters.AddWithValue("@count", 0);
                        cmd.Parameters.AddWithValue("@id", emailId);
                        cmd.ExecuteNonQuery();
                        ManageEmail.queuedEmailIds.Add(emailId);
                        status.Add(new SoapStatusDetails()
                        {
                            status = SoapStatus.Success.ToString(),
                            errorMessage = ""
                        });
                    }
                }
            }
            catch (MySqlException ex)
            {
                string error = string.Format("Unable to put email back into queue for email: id {0}. MySQL Error: {1}",
                    emailId, ex.Message);
                library.logging(classDetails + MethodInfo.GetCurrentMethod().Name, error);
                library.setAlarm(error, "Critical", MethodInfo.GetCurrentMethod().Name);
                status.Add(new SoapStatusDetails()
                {
                    status = SoapStatus.Failure.ToString(),
                    errorMessage = ex.Message
                });
            }
            catch (Exception ex)
            {
                string error = string.Format("Unable to put email back into queue: id{0}. General Error: {1}",
                    emailId, ex.Message);
                library.logging(classDetails + MethodInfo.GetCurrentMethod().Name, error);
                library.setAlarm(error, "Critical", MethodInfo.GetCurrentMethod().Name);
                status.Add(new SoapStatusDetails()
                {
                    status = SoapStatus.Failure.ToString(),
                    errorMessage = ex.Message
                });
            }
            return status;
        } 
```

`ManageEmail.queuedEmailIds.Add(emailId);`这是似乎由 Soap 服务更改的静态变量，但控制台应用程序从未看到它已更改。

**更新** 我尝试过使用单例但遇到了同样的问题，它似乎在做同样的事情。

在 ManageEmail 类中我添加了这个，

```
public List<int> queuedEmailIds = new List<int>();

        public static ManageEmail instance;

        private ManageEmail() { }

        public static ManageEmail Instance
        {
            get
            {
                if (instance == null)
                {
                    instance = new ManageEmail();
                }
                return instance;
            }
        } 
```

当我访问列表数组时，我执行以下操作

```
ManageEmail.Instance.queuedEmailIds.Add(emailId); 
```

然而，这些变化并没有产生任何影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:23:06.373

在没有原始诊断的情况下，我认为您所拥有的是一个实例化问题，其中一个类的实例比另一个类具有引用值。

这可能是查看[单例模式](http://msdn.microsoft.com/en-us/library/ff650316.aspx)的好地方，因此您始终引用该类的相同实例。我意识到其中一个值是静态变量，但它是实例化变量（即列表）

# facebook - 使用喜欢的照片在应用程序中使用

> ID：11402464
> 
> 赞同：1
> 
> 时间：2012-07-09T20:18:43.420
> 
> 标签：facebook, photos, facebook-app-requests

我正在创建一个 Facebook 应用程序，特别是一个社交游戏。游戏要求用户上传他们选择的照片。但是，如果用户没有想要上传的照片，他们会从照片库中选择一张。我想知道是否可以允许用户根据他们“喜欢”的页面/活动/等来选择照片。因此，例如，可以对应用程序进行编码，以根据用户“喜欢”来选择照片。如果用户喜欢“狗”，那么该应用程序将自动在 Facebook 上找到具有这些喜欢图像的页面，然后可以在游戏中使用这些页面。

我对这个想法的问题是：1）。从版权方面这样做是否合法？

2）。访问像 Shutterstock 这样的网站，购买照片的权利并以这种方式手动创建照片数据库会更容易吗？

3）。是否有可能（设计/编码明智）创建查找我刚刚在此处列出的相关照片的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:27:25.243

1.  我认为版权法没有问题，但您应该向您获取图片的公司查询；在这种情况下，您将检查 Facebook 的政策。在支持网站上进行简单搜索应该会给您答案。

2.  这个问题取决于问题 #1 的答案。我想说融入 Facebook 比购买库存照片更有趣。

3.  是的，可以从 Facebook 页面获取这些照片。您需要使用 Facebook 的 API。[单击此链接可访问 Facebook 开发者网站。](http://developers.facebook.com) 如果您在它们非常简单之前没有使用过任何 API，但您需要花几个小时来熟悉它们。Google 有很棒的 AP​​I，它们使用起来非常简单，而且使用起来非常有趣。

希望这可以帮助。祝你好运！

# http - 下载前拦截HTTP请求状态码

> ID：11402465
> 
> 赞同：0
> 
> 时间：2012-07-09T20:18:51.677
> 
> 标签：http

我的问题很简单。我有一个运行的服务器端脚本，它生成图像并将其流回客户端。该脚本可能会在某些条件下失败（服务器上的压力/负载）。我需要做的是在客户端捕获请求的状态代码，如果状态代码正常（200）然后继续下载，如果是 5XX，则向用户显示错误对话框。

目前，我正在使用 window.location = "path"; 在客户端将请求发送到服务器。这个问题是如何获取状态码。是否有任何较低级别的功能可以执行此功能？

我已经阅读过仅使用 HEAD 请求来捕获 HTTP 标头，但是这存在问题，这不是我理想的解决方案。

# php - PHP 5.2 和 PHP 5.3 中大整数的按位运算

> ID：11402469
> 
> 赞同：3
> 
> 时间：2012-07-09T20:18:58.257
> 
> 标签：php, bit-manipulation, 64-bit, biginteger

我将省略我是如何得出这个结论的细节，但重点是下面的代码在 PHP 5.2 x86 和 PHP 5.3 x86 上会产生不同的结果。

```
<?php

$result = (((-1035721791 + -2004767255) ^ 3402727701) + 4148612726) ^ -759268493;
echo 'Platform: ' . php_uname(), PHP_EOL;
echo 'PHP version: ' . PHP_VERSION, PHP_EOL;
echo 'Max integer: ' . PHP_INT_MAX, PHP_EOL;
echo 'Result: ' . $result, PHP_EOL; 
```

结果是：

Linux x64，PHP 5.3

```
Platform: Linux Test1 3.2.0-25-generic #40-Ubuntu SMP Wed May 23 20:30:51 UTC 2012 x86_64
PHP version: 5.3.10-1ubuntu3.2
Max integer: 9223372036854775807
Result: -1511693242 
```

Linux x86，PHP 5.3

```
Platform: Linux Test2 2.6.32-5-686 #1 SMP Sun May 6 04:01:19 UTC 2012 i686
PHP version: 5.3.3-7+squeeze9
Max integer: 2147483647
Result: -1511693242 
```

视窗 x86，PHP 5.3

```
Platform: Windows NT Test3 6.1 build 7600 i586
PHP version: 5.3.6
Max integer: 2147483647
Result: -1511693242 
```

Linux x86，PHP 5.2

```
Platform: Linux Test4 2.6.18-8.el5 #1 SMP Thu Mar 15 19:57:35 EDT 2007 i686
PHP version: 5.2.10
Max integer: 2147483647
Result: -1868155656 
```

由于我不知道的原因，最后一个结果与其他结果不同。

如您所见，表达式的结果`-1035721791 + -2004767255`不适合 int32，但 PHP 5.3 在 x86 和 x64 平台上产生相同的结果。而 PHP 5.2 在 x86 上会产生不正确的结果。

这种差异是否记录在案？它是 PHP 的一个特性还是 PHP 5.2 的一个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:03:42.557

当 PHP 遇到不适合 PHP_INT_MAX（x86 上为 32 位）的数字时，[它会将数字转换为浮点数](http://php.net/manual/en/language.types.integer.php)：

> 如果 PHP 遇到超出整数类型范围的数字，它将被解释为浮点数。此外，导致数字超出整数类型范围的操作将改为返回浮点数。

此外，[PHP 5.3 变更日志](http://www.php.net/ChangeLog-5.php#5.3.0)说：

> 将浮点行为更改为在所有平台和所有编译器上始终使用双精度。（克里斯蒂安·塞勒）

虽然我不能 100% 地向您确认这就是您所看到的原因，但我想这应该与它有关。

无论如何，如果您正在处理这些大数字，您应该停止依赖浮点精度并使用提供大数字支持的扩展，例如[BC Math](http://www.php.net/manual/en/book.bc.php)或[GMP](http://www.php.net/manual/en/book.gmp.php)

# javascript - jQuery getJSON 成功时从不调用成功函数

> ID：11402471
> 
> 赞同：2
> 
> 时间：2012-07-09T20:18:58.820
> 
> 标签：javascript, jquery, ajax, json, http-headers

我正在使用 jQuery 从服务器检索 json 数据。服务器使用 json 编码的对象进行响应。问题是，在服务器响应后，我的成功函数没有被调用。

这是我的要求：

```
$('form').on('submit', function(event) {
  event.preventDefault();
  $.getJSON('?getAvailableRoom', function(data, textStatus, jqXHR) {
    alert("Success!"); // doesn't happen
  });
}); 
```

这是来自服务器的响应：

```
Response Headers
Content-Type        application/json
Date                Mon, 09 Jul 2012 20:02:10 GMT
Transfer-Encoding   chunked
Via                 1.1 teleproxy01 (NetCache NetApp/6.0.3P2D5)

Request Headers
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Host    XXXXX
Proxy-Connection    keep-alive
Referer XXXXX
User-Agent  Mozilla/5.0 (Windows NT 5.2; rv:13.0) Gecko/20100101 Firefox/13.0.1
X-Requested-With    XMLHttpRequest

Response
{'id':'AsuRC'} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T20:21:41.287

您的 JSON 无效。

它应该是：

```
Response
{"id":"AsuRC"} 
```

# macos - 有没有办法遍历 Mac OS X 中所有打开的窗口？

> ID：11402472
> 
> 赞同：3
> 
> 时间：2012-07-09T20:18:59.730
> 
> 标签：macos, cocoa, applescript

当您从笔记本电脑上拔下分辨率比 macbook 更高分辨率的外接显示器时，窗口大多保持其宽度，但它们的大小会被裁剪到 macbook 屏幕的（较小）高度。当您重新插入显示器时，它们的尺寸仍然小得令人沮丧。

我的问题是：有什么方法可以遍历所有打开的窗口，保存它们的大小，并在再次插入显示器后恢复它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T20:46:02.603

以下 AppleScript 展示了如何：

*   循环遍历所有窗口
*   检索和更改窗口位置
*   检索和更改窗口大小

代码：

```
tell application "System Events"
    set theProcesses to application processes
    repeat with theProcess from 1 to count theProcesses
        tell process theProcess
            repeat with x from 1 to (count windows)
                set windowPosition to position of window x
                set windowSize to size of window x
                set position of window x to {0, 0}
                set size of window  to {100, 100}
            end repeat
        end tell
    end repeat
end tell 
```

注意：该脚本需要辅助设备访问权限（AfAD）：
“系统偏好设置”→“通用访问权限”→“启用辅助设备访问权限”

**编辑**（回复评论）

从 AppleScipt 启用 AfAD 可能会改善用户体验，但不要在每次执行脚本时都这样做，仅在禁用 AfAD 的情况下启用 AfAD。在不通知用户的情况下启用功能不是好的做法，提示用户允许启用 AfAD。

例子：

```
set AccesEnables to do shell script "[ -e \"/private/var/db/.AccessibilityAPIEnabled\" ] && echo \"Yes\" || echo \"No\""
if (AccesEnables is equal to "No") then
    set askUser to display dialog "This application requires access for assistive devices. Enable this feature?" default button 2
    set answer to button returned of askUser
    if answer is equal to "OK" then
        do shell script "touch /private/var/db/.AccessibilityAPIEnabled" with administrator privileges
    else
        close
    end if
end if 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T21:14:18.843

AppleScript 解决方案（参见 Anne 的回答）是迄今为止最简单的解决方案。

如果您想将此提供给无法依赖的朋友来弄清楚如何启用辅助访问，或者更广泛地分发它，只需添加以下行：

```
do shell script ¬
  "touch /private/var/db/.AccessibilityAPIEnabled" ¬
  with administrator privileges 
```

这将弹出通常的身份验证对话框，然后使用权限打开辅助访问。

实际上可以在没有辅助访问的情况下执行此操作，但它需要在 CoreGraphics/Quartz 窗口服务中使用私有函数，即[CGSPrivate.h](http://code.google.com/p/undocumented-goodness/source/browse/trunk/CoreGraphics/CGSPrivate.h)。

使用公共 API，您可以轻松枚举所有窗口：

```
CFArrayRef windows = 
  CGWindowListCopyWindowInfo(kCGWindowListOptionOnScreenOnly |
                             kCGWindowListExcludeDesktopElements,
                             kCGNullWindowID); 
```

这将返回一个字典数组，每个字典都包含一个 kCGWindowBounds 字典，其中包含 Height、Width、X 和 Y 整数值。

但这些公共 API 是严格只读的。要实际移动窗口，您必须进入 CGSPrivate.h 执行以下操作：

```
CGSConnection conn = _CGSDefaultConnection();
for (NSDictionary *window in windows) {
  CGSWindow wid = (CGSWindow)[[window objectForKey:@"kCGWindowNumber"] intValue];
  CGRect bounds;
  CGRectMakeWithDictionaryRepresentation([window objectForKey:@"kCGWindowBounds"],
                                         &bounds);
  CGSMoveWindow(conn, wid, bounds.origin);
} 
```

显然，这很讨厌，只有在您确实需要分发一个不能请求辅助访问的应用程序时才应该考虑它。

您还可以对 Window Server 协议进行逆向工程并直接与之对话，但这更糟糕。

# powershell - Powershell 错误在 ISE 中正确输出，但在命令行执行中没有

> ID：11402473
> 
> 赞同：1
> 
> 时间：2012-07-09T20:19:05.170
> 
> 标签：powershell, powershell-2.0, powershell-ise

我在 powershell ISE 中运行的命令退出了我的预期，但是当我将代码移动到命令行以在不同的环境中执行时，我不再收到错误。该错误仅发生在 ISE 中。我曾尝试像其他人发布的那样在命令行上使用 -sta，但没有运气。

```
$SIEBEL_HOME\srvrmgr.exe /c "Run Command"
echo "Exit Code: $lastExitCode - Return Code: $?" 
```

当我通过 ISE 运行它时，我得到以下输出：

```
Exit Code: 0 - Return Code: False 
```

当我在命令行上运行该命令时，我得到以下输出：

```
E:\powershell.exe -sta -file script.ps1

Exit Code: 0 - Return Code: True 
```

如您所见，我正在尝试检查返回代码并在 ISE 中获得正确的操作，但没有通过命令行获得正确的结果。

我想知道 Windows 在 ISE 中运行时是否使用了不同的环境变量。我注意到当我通过 ISE 运行它时，控制台以红色显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:44:41.140

该`$?`变量仅检查最后执行的 PowerShell 命令的成功状态，而不检查外部可执行文件。

该`$LASTEXITCODE`变量检测来自外部可执行文件的最后一个退出代码。

如您所见，这些变量用于不同的目的，因此您不会看到它们之间的一致性。有关它们的更多信息，请运行以下命令：

```
 Get-Help -Name about_Automatic_Variables 
```

编辑：运行此代码以显示 $? 变量作品。

```
# Here we'll show a successful command, and then a failed .NET method call
Write-Output -Object "hi"; # Run a successful command
Write-Host -Object $?; # True = command succeeded
[System.IO.File]::NonExistentMethod();
Write-Host -Object $?; # False = command failed

# Here we'll show a successful command, followed by a failed executable call
Write-Output -Object "hi" | Out-Null; # Run a successful command
Write-Host -Object $?; # True = last command ran successfully
ipconfig /nonexistentparameter | Out-Null;
Write-Host -Object $?; # False = last command did not run successfully 
```

对我来说，运行 PowerShell v3 Release Candidate，它在控制台中的工作方式与 ISE 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:18:45.123

我对你的情况有另一种解决方案。如果您想编写一些代码来确定外部可执行文件的退出代码，您可以使用`Start-Process`cmdlet 来发挥您的优势。事实上，我通常建议人们使用`Start-Process`cmdlet 而不是直接调用外部可执行文件，因为它有助于更​​好地处理参数值。在您的情况下，另一个好处是您可以`-PassThru`和`-Wait`with `Start-Process`，这意味着您可以获得一个表示进程的对象，该对象还将包括其退出代码。

```
$CliArgs = '/all';
$Process = Start-Process -FilePath ipconfig.exe -ArgumentList $CliArgs -NoNewWindow;
Write-Host -Object $Process.ExitCode; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:41:10.850

PowerShell ISE 处理错误的方式与 PowerShell 控制台不同。在 ISE 中，从控制台应用程序到其 stderr 流的所有输出都被写入 PowerShell 的错误流。我还没有找到改变这种行为的方法。

# regex - 带小数和字符的正则表达式

> ID：11402477
> 
> 赞同：1
> 
> 时间：2012-07-09T20:19:25.390
> 
> 标签：regex

我正在尝试编写一个接受以下内容的正则表达式：

```
s#.#
f#.# 
```

其中 # 可以是任意大小的整数（实际上是小数，前面有 s 或 f）。我也需要这个来接受其他任何事情。所以如果它是这样的：

```
As#.# would not be accepted because there's an A before the s
s#.#X would not be accepted because there's an X after the decimal. 
```

总会有一个 s 或一个 f 开始，然后是一个数字、一个句点和另一个数字。所有这些部分都是必需的，数字可以是任意大小和任意数量的整数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:21:45.857

试试这个正则表达式：

```
/^[sf]\d+\.\d+$/ 
```

**解释**

*   `^`是匹配字符串开头的[锚点](http://www.regular-expressions.info/anchors.html)。
*   `[sf]`是一个[字符类](http://www.regular-expressions.info/charclass.html)，表示一个`s`或一个`f`。
*   `\d`表示一个数字。
*   `+`表示一个或多个。
*   `\.`匹配文字点。
*   `$`是匹配字符串结尾的锚点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:22:57.413

要求小数：

```
/^[sf]\d+\.\d+$/ 
```

不需要小数：

```
/^[sf]\d+(\.\d+)?$/ 
```

不允许前导零：

```
/^[sf][1-9]\d*\.\d+$/ 
```

不需要小数，不允许前导零：

```
/^[sf][1-9]\d*(\.\d+)?$/ 
```

这些是相当琐碎的正则表达式，但我希望它能激发你在学习过程中了解更多。它们非常有用。

# ios - 尝试复制联系人应用程序的加载缩略图图像动画

> ID：11402479
> 
> 赞同：0
> 
> 时间：2012-07-09T20:19:27.447
> 
> 标签：ios, ipad, contacts

在“联系人”应用程序中，当您为联系人选择图像时，缩略图图像会以很酷的动画加载到位。它发生在图像选择器关闭时。

如果我不得不猜测，就在图像选择器被关闭时，图像被放入与图像选择器裁剪区域的大小和位置相匹配的 UIIMageView 中。然后 UIImageView 被缩小并就位。但它看起来像沿着曲线动画。

他们是这样做的吗？我想实现类似的东西，但在 iPad 应用程序中。如果是这种情况，我必须找出弹出框内图像框架的坐标。

有人知道他们是怎么做到的吗？我在做某事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:36:54.150

我不是一个`CAAnimation`人，但我想它是 a 和 a 的组合`CAKeyframeAnimation`，`UIBezierPath`结合了边界的基本动画。我的贝塞尔曲线不太正确，但您可能明白了。所以，也许它是这样的：

```
CGPoint center      = CGPointMake(self.view.frame.size.width / 2.0, self.view.frame.size.height / 2.0);
CGRect  finalRect   = CGRectMake(0.0, 0.0, 75.0, 75.0);
CGPoint finalCenter = CGPointMake(25.0, 25.0);

UIBezierPath *path = [UIBezierPath bezierPath];
[path moveToPoint:center];
[path addCurveToPoint:finalCenter
        controlPoint1:CGPointMake(self.view.frame.size.width, 0.0) 
        controlPoint2:CGPointMake(100.0, finalCenter.y)];

UIImage *image = [UIImage imageNamed:@"YOURIMAGE.png"];
NSAssert(image, @"Error loading image");
CALayer *imageLayer = [CALayer layer];
imageLayer.contents = (id)image.CGImage;
imageLayer.bounds   = finalRect;
imageLayer.position = finalCenter;
[self.view.layer addSublayer:imageLayer];

CAKeyframeAnimation *animatePosition = [CAKeyframeAnimation animationWithKeyPath:@"position"];
animatePosition.path = [path CGPath];
animatePosition.duration = 2.0;
[imageLayer addAnimation:animatePosition forKey:@"arc"];

CABasicAnimation *animateBounds = [CABasicAnimation animationWithKeyPath:@"bounds"];
animateBounds.duration = 2.0;
animateBounds.fromValue = [NSValue valueWithCGRect:self.view.bounds];
animateBounds.toValue = [NSValue valueWithCGRect:finalRect];
[imageLayer addAnimation:animateBounds forKey:@"zoom"]; 
```

# vb.net - 我应该在哪里处理表单持有的托管对象？

> ID：11402480
> 
> 赞同：0
> 
> 时间：2012-07-09T20:19:36.263
> 
> 标签：vb.net, winforms, dispose, idisposable

如果我有一个表单，它拥有`IDisposable`需要在表单的生命周期内保留的托管对象（即类级别成员，也许是为了单元测试而包装和管理计时器的类），我应该什么时候调用`Dispose()`它们？

为了这个问题（为了避免“GC将为您处理”类型的答案），我们还假设我需要调用额外的关闭逻辑，例如：

```
Buffer.Flush()
Buffer.Dispose() 
```

`Dispose()`我可以将它放在我的部分类 ( )中方法的现有实现中`Form.Designer.vb`，但修改该类通常是不受欢迎的。

看来`FormClosed`or`Disposed`事件将是最好的选择。有什么理由选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:43:08.860

“正确”的方法是将 Dispose() 方法从表单的 Designer.vb 文件移动到表单的源代码文件并进行编辑。然而，这在 vb.net IDE 中很尴尬，它隐藏了该文件。您必须单击“显示所有文件”图标才能看到它。

使用 FormClosed 是错误的，当您的表单使用 ShowDialog() 显示时，它会过早地处理您的对象。当您检索对话结果时，这可能会导致 ObjectDisposed 异常。

使用 Disposed 事件很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:31:56.147

在 C# winforms 中，我将`Dispose()`方法的实现从设计器移到代码隐藏文件中。从来没有遇到过问题。我猜你可以在VB中做同样的事情。

唯一重要的是保留处理`Components`集合的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:33:54.380

一般来说，您应该尝试在安全的情况下尽快释放非托管资源，例如使用`using`语句。与您习惯性地“以防万一”或完全不必要地保持资源可用相比，它通常使您的应用程序维护起来更安全，并且更不容易出现与资源生命周期相关的死锁和其他不当行为。

但是，有时您出于性能原因需要“缓存”非托管资源，或者出于语义原因甚至需要保留一个资源（例如，一些用于 UI 级别互斥的有意锁定方案）。

在这些情况下，从父对象调用`Dispose`from是一个很好的约定；`Dispose`在这种情况下，通过处理`Disposed`事件。

`FormClosed`风险更大，因为另一个处理程序可能会阻止关闭发生，或者父表单的处理程序代码可能会调用此表单的方法，并且您最终可能会使用已处置的资源。`Dispose`再加上在整个表单上直接调用时永远不会释放资源的风险。

放置任何代码的主要优点`FormClosed`是“更健全”的操作环境，尤其是对父表单的访问。然而，这很少需要处置非托管资源。

# modx - MODx & Gallery 组件 - 如何处理不存在的相册？

> ID：11402481
> 
> 赞同：1
> 
> 时间：2012-07-09T20:19:37.913
> 
> 标签：modx, modx-revolution

在画廊组件中引用不存在的专辑会导致以下警告和错误：

```
Warning: Invalid argument supplied for foreach() in 
/home/user/domain.com/core/cache/includes/elements/modsnippet/17.include.cache.php on line 106

Fatal error: Cannot use string offset as an array in 
/home/user/domain.com/core/cache/includes/elements/modsnippet/17.include.cache.php on line 165 
```

以下是我引用专辑的方式：

```
[[!Gallery? &album=`[[*alias]]` &limit=`20` &thumbWidth=`90` &thumbHeight=`90`]] 
```

专辑名称与页面的别名匹配。如果存在专辑，一切正常 - 如果找不到匹配项，我想显示空白专辑（无内容）。

有任何想法吗？我正在使用 MODX Revolution 2.2.4-pl（传统）。

谢谢，卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:28:34.523

尝试这个：

```
[[*alias:notempty=`[[!Gallery? &album=`[[*alias]]` &limit=`20` &thumbWidth=`90` &thumbHeight=`90`]]`]] 
```

等一下！您正在链接`[[*alias]]`到图库中的相册。您应该改用自己的电视 `[[*album]]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:48:38.290

这是我如何让它工作的......

每个页面都有相应的画廊，用页面的别名作为画廊名称。一些画廊是空白的。

卢克

# java - Hashmap 问题，出现我不明白的异常

> ID：11402483
> 
> 赞同：0
> 
> 时间：2012-07-09T20:19:41.787
> 
> 标签：java, hashmap

我得到一个`NullPointerException`并且无法弄清楚为什么。我在这里阅读了很多问题，似乎无法很好地剖析任何内容以获得我需要的答案。我正在使用 a`HashMap`并且我正在尝试从不同的模块中引用它。

这是代码：

```
import java.util.*; 
@SuppressWarnings("unused")
public class Decoder 
{
    public static void main(String[] args)
    {
        decrypt();
        keywork(null);
    }

    static void decrypt()
    {
        String codedline = "ilyh wkrxvdqg, wzr kxqguhg dqg qlqhwb-wkuhh".toLowerCase();
        char[] cwarr = codedline.toCharArray();
        String dcline  = "";
        for(char x : cwarr)
        {
            if(Character.isLetter(x))
            {
                int c = (int)x;
                c = c - 3;
                if(c > 90 && c < 97)
                {
                    c += 26;
                }
                x = (char)c;
                dcline += x;
            } else
            {
                dcline += x;
            }
        }
        System.out.println(dcline);
    }

    static void keywork(String dcline)
    {
        int x;
        for(int i = 1, sw = 0; i == dcline.length(); i++)
        {
            String strchk = dcline.substring(sw, i);
            Object n = hm.get(strchk);
        };
    }

    static final HashMap<String, Integer> hm = new HashMap <String, Integer>()
    {
        /**
         * 
         */
        private static final long serialVersionUID = 2688387173090905196L;
        {
            hm.put("ONE", 1);
            hm.put("TWO", 2);
            hm.put("THREE", 3);
            hm.put("FOUR", 4);
            hm.put("FIVE", 5);
            hm.put("SIX", 6);
            hm.put("SEVEN", 7);
            hm.put("EIGHT", 8);
            hm.put("NINE", 9);
            hm.put("TEN", 10);
            hm.put("ELEVEN", 11);
            hm.put("TWELVE", 12);
            hm.put("THIRTEEN", 13);
            hm.put("FOURTEEN", 14);
            hm.put("FIFTEEN", 15);
            hm.put("SIXTEEN", 16);
            hm.put("SEVENTEEN", 17);
            hm.put("EIGHTEEN", 18);
            hm.put("NINETEEN", 19);
            hm.put("TWENTY", 20);
            hm.put("THIRTY", 30);
            hm.put("FOURTY", 40);
            hm.put("FIFTY", 50);
            hm.put("SIXTY", 60);
            hm.put("SEVENTY", 70);
            hm.put("EIGHTY", 80);
            hm.put("NINETY", 90);
            hm.put("HUNDRED", 100);
            hm.put("THOUSAND", 1000);
        }
    };
} 
```

这就是我得到的：

```
java.lang.ExceptionInInitializerError
Caused by: java.lang.NullPointerException
at Decoder$1.<init>(Decoder.java:56)
at Decoder.<clinit>(Decoder.java:49)
Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:34:21.757

只需删除静态初始化程序中的“hm”，hm 对象还不存在！它必须看起来像这样：

```
{
put("ONE", 1);
put("TWO", 2);
put("THREE", 3);
put("FOUR", 4);
put("FIVE", 5);
put("SIX", 6);
put("SEVEN", 7);
put("EIGHT", 8);
put("NINE", 9);
put("TEN", 10);
put("ELEVEN", 11);
put("TWELVE", 12);
put("THIRTEEN", 13);
put("FOURTEEN", 14);
put("FIFTEEN", 15);
put("SIXTEEN", 16);
put("SEVENTEEN", 17);
put("EIGHTEEN", 18);
put("NINETEEN", 19);
put("TWENTY", 20);
put("THIRTY", 30);
put("FOURTY", 40);
put("FIFTY", 50);
put("SIXTY", 60);
put("SEVENTY", 70);
put("EIGHTY", 80);
put("NINETY", 90);
put("HUNDRED", 100);
put("THOUSAND", 1000);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:34:46.250

这个块是一个实例初始化器：

```
{
/**
     * 
     */
    private static final long serialVersionUID = 2688387173090905196L;
{
    hm.put("ONE", 1); 
```

（双重`{{`放弃它）。您正在尝试`hm`在其自身初始化期间访问静态字段。

如果您删除该`hm.`位，它应该可以工作，然后做`put("ONE", 1);`等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:39:29.920

我从来没有做过你想做的事情，所以我不知道它是否会按照我认为的方式工作，但我可以确切地看到哪里出了问题。

您在声明中使用了匿名子类语法（可能是偶然的）：

```
public static Something object = new Something()
{
    // anonymous subclass declaration here
} 
```

其结果是，在初始化期间`hm`，您引用它，它（因为您当前在`hm`的构造函数中运行，未初始化。坦率地说，我什至不确定它是如何编译的，但您应该能够使其与以下内容一起使用。

```
static final HashMap<String, Integer> hm;

static
{
    hm = new HashMap <String, Integer>()
    {
        private static final long serialVersionUID = 2688387173090905196L;
    }
    hm.put("ONE", 1);
    // snip
    hm.put("THOUSAND", 1000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:52:20.663

如果您想要一些真正简洁和纯功能的东西，您应该添加以下代码：

```
public static <K, V> Map<K, V> hashMap(Object... data) {
  return fill(new HashMap<K, V>(), data);
}
public static <K, V> Map<K, V> fill(Map<K, V> map, Object... data) {
  if ((data.length & 1) != 0)
    throw new IllegalArgumentException("Odd number of key-value arguments");
  int i = 0;
  while (i < data.length) map.put((K) data[i++], (V) data[i++]);
  return map;
} 
```

然后像这样进行初始化：

```
public static final Map<Integer, String> hm = hashMap(
  "ONE", 1,
  "TWO", 2,
  "THREE", 3,
  "FOUR", 4,
  "FIVE", 5,
  "SIX", 6,
  "SEVEN", 7,
  "EIGHT", 8,
  "NINE", 9,
  "TEN", 10,
  "ELEVEN", 11,
  "TWELVE", 12,
  "THIRTEEN", 13,
  "FOURTEEN", 14,
  "FIFTEEN", 15,
  "SIXTEEN", 16,
  "SEVENTEEN", 17,
  "EIGHTEEN", 18,
  "NINETEEN", 19,
  "TWENTY", 20,
  "THIRTY", 30,
  "FOURTY", 40,
  "FIFTY", 50,
  "SIXTY", 60,
  "SEVENTY", 70,
  "EIGHTY", 80,
  "NINETY", 90,
  "HUNDRED", 100,
  "THOUSAND", 1000
); 
```

# c# - 如何让 Redirect() 以我想要的方式工作

> ID：11402484
> 
> 赞同：0
> 
> 时间：2012-07-09T20:19:42.897
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

登录后我在重定向到我想要的工作方式时遇到了一些问题。所以我想出了将当前页面存储在 viewbag 中并使用它来重定向的想法，所以如果页面是 mydomain.com/debate/1 我最终会在 viewbad 中存储“/debate/1”但是当我尝试重定向它给我这个投诉

> 参数字典包含“PoliticalDebate.Controllers.DebateController”中方法“System.Web.Mvc.ActionResult DebateDetails(Int32)”的不可为空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

但是，如果我手动输入 mydomain.com/Debate/1 它会按预期工作。

有什么方法可以让 Redirect 按我的意愿工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:28:30.067

由于我没有看到任何代码，因此我无法评论您尝试执行此操作的方式（这是行不通的）。在以后的帖子中，*请发布您的代码*。如果您只是重定向到控制器上的默认操作，这是一种重定向方式：

```
return this.RedirectToAction("Index", new { id = debateDetailsID } ); 
```

虽然很难说出你真正想要做什么，因为你提到`debate/1`了被调用的方法是`DebateDetails`不匹配的（除非你改变了默认路由，我也不知道，没有代码）。

**更新**

根据您的评论，您的 MapRoute 中有错误。您的 MapRoute 应如下所示：

```
routes.MapRoute("Debate Details", 
                "debate/{id}", 
                 new { controller = "Debate", 
                       action = "DebateDetails",
                       // this id value is missing 
                       // so it's not being passed to the controller
                       id = UrlParameter.Optional } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:34:58.363

答案就在投诉中，在这种特殊情况下，您要发送一个参数，因此请检查是否指定了此参数

您的代码必须看起来像`redirectToAction("nameOfAction", new {id = yourIdOnViewBag}`

# java - Maven 循环依赖

> ID：11402489
> 
> 赞同：3
> 
> 时间：2012-07-09T20:20:04.160
> 
> 标签：java, maven, dependencies

我是 Maven 新手，我正在尝试使用一些框架制作我自己的 Java EE Maven 项目……我从两个模块和一个父模块开始。问题是当我发出 mvn clean 时出现此错误：

```
[ERROR] The projects in the reactor contain a cyclic reference: Edge between 'Vertex{label='org.tepo:Jporto-web:0.0.1-SNAPSHOT'}' and 'Vertex{label='org.tepo:Jporto-ejb:0.0.1-SNAPSHOT'}' introduces to cycle in the graph org.tepo:Jporto-ejb:0.0.1-SNAPSHOT --> org.tepo:Jporto-web:0.0.1-SNAPSHOT --> org.tepo:Jporto-ejb:0.0.1-SNAPSHOT -> [Help 1] 
```

我知道什么是循环依赖，但我在我的 poms 中看不到这样的东西。他们是：父POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.tepo</groupId>
  <artifactId>Jporto</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>jsf library tutto</name>
  <description>fiesta prego grande</description>
  <dependencies>

        <dependency>
        <groupId>org.tepo</groupId>
        <artifactId>Jporto-ejb</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>ejb</type>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.tepo</groupId>
        <artifactId>Jporto-web</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>war</type>
        <scope>compile</scope>
    </dependency>
 </dependencies>

  <modules>
    <module>Jporto-ejb</module>
    <module>Jporto-web</module>
  </modules>

  <build>  
  <plugins>  
    <plugin>  
      <artifactId>maven-compiler-plugin</artifactId>  
      <inherited>true</inherited>  
      <configuration>  
        <source>1.6</source>  
        <target>1.6</target>  
        <encoding>UTF-8</encoding>  
        <version>2.5.1</version>
      </configuration>  
    </plugin>  
    <plugin>  
      <artifactId>maven-resources-plugin</artifactId>  
      <configuration>  
        <encoding>UTF-8</encoding>  
      </configuration>  
    </plugin>  
    <plugin>  
      <artifactId>maven-ejb-plugin</artifactId>  
      <inherited>true</inherited>  
      <configuration>  
        <ejbVersion>3.1</ejbVersion>  
      </configuration>  
    </plugin>  
  </plugins>  
</build>  

</project> 
```

网页模块：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <artifactId>Jporto</artifactId>
    <groupId>org.tepo</groupId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>

  <artifactId>Jporto-web</artifactId>
  <groupId>org.tepo</groupId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>

  <dependencies>    
    <dependency>  
  <groupId>javax.jms</groupId>  
  <artifactId>jms</artifactId>  
  <version>1.1</version>  
  <scope>provided</scope>  
</dependency> 

<dependency>  
  <groupId>javax.transaction</groupId>  
  <artifactId>jta</artifactId>  
  <version>1.1</version>  
  <scope>provided</scope>  
</dependency>  

<dependency>  
  <groupId>org.hibernate</groupId>  
  <artifactId>hibernate-core</artifactId>  
  <version>4.0.0.Final</version>  
  <scope>provided</scope>  
</dependency>  

<dependency>  
  <groupId>org.hibernate</groupId>  
  <artifactId>hibernate-entitymanager</artifactId>  
  <version>4.0.0.Final</version>  
  <scope>provided</scope>  
</dependency>  

<dependency>  
  <groupId>org.hibernate.javax.persistence</groupId>  
  <artifactId>hibernate-jpa-2.0-api</artifactId>  
  <version>1.0.1.Final</version>  
  <scope>provided</scope>  
</dependency>  

<dependency>  
  <groupId>org.jboss.spec.javax.servlet</groupId>  
  <artifactId>jboss-servlet-api_3.0_spec</artifactId>  
  <version>1.0.0.Final</version>  
  <scope>provided</scope>  
</dependency>  

<dependency>  
  <groupId>javax.faces</groupId>  
  <artifactId>javax.faces-api</artifactId>  
  <version>2.1</version>  
  <scope>provided</scope>  
</dependency>  

  </dependencies>
</project> 
```

EJB模块：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>Jporto</artifactId>
    <groupId>org.tepo</groupId>
    <version>0.0.1-SNAPSHOT</version>
  </parent>

  <groupId>org.tepo</groupId>
  <artifactId>Jporto-ejb</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>ejb</packaging>

  <dependencies>  

    <dependency>
        <groupId>org.jboss.as</groupId>
        <artifactId>jboss-as-ejb3</artifactId>
        <version>7.1.0.CR1b</version>
        <type>jar</type>
        <scope>provided</scope>
    </dependency>
  </dependencies>
</project> 
```

拜托，你能向我解释为什么我会收到这个错误吗？此外，eclipse 在 web 模块的 pom 文件上给出了这个错误： Missing artifact org.tepo:Jporto-web:war:0.0.1-SNAPSHOT:compile 和 Missing artifact org.tepo:Jporto-ejb:ejb:0.0.1-SNAPSHOT :compile on web module...谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T20:28:30.950

你的父 pom 依赖于你的模块，而你的模块又依赖于你的父 pom。

你可以做的是添加到你的父 pom

```
<modules>
   <module>module1</module>
   <module>module2</module>
</module> 
```

您的模块必须是具有您给它们的名称的子目录。

# objective-c - 在 NSString 文本块中分隔完整句子

> ID：11402492
> 
> 赞同：2
> 
> 时间：2012-07-09T20:20:13.453
> 
> 标签：objective-c, ios, ios5, ios4

我一直在尝试使用正则表达式来分隔一大段文本中的完整句子。我不能使用 componentsSeparatedByCharactersInSet 因为它显然会失败，句子以 ?!, !!, ... 我见过一些外部类来做 componentSeparateByRegEx 但我更喜欢不添加外部库。

这是一个示例输入 **嗨，我正在测试。你好吗？哇！！这是最好的，我很高兴。**

输出应该是一个数组

第一个元素：**嗨，我正在测试。**

第二要素： **你好吗？**

第三要素：**哇！！**

第四要素：**这是最好的，我很高兴。**

这就是我所拥有的，但正如我所提到的，它不应该按照我的意图去做。可能正则表达式在这里会做得更好。

```
-(NSArray *)getArrayOfFullSentencesFromBlockOfText:(NSString *)textBlock{
    NSMutableCharacterSet *characterSet = [[NSMutableCharacterSet alloc] init];
    [characterSet addCharactersInString:@".?!"];  
    NSArray * sentenceArray = [textBlock componentsSeparatedByCharactersInSet:characterSet];                                   
    return sentenceArray;  
} 
```

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T20:30:26.670

您想`-[NSString enumerateSubstringsInRange:options:usingBlock:]`与该`NSStringEnumerationBySentences`选项一起使用。这将为您提供每一个句子，并且以一种语言感知的方式进行。

```
NSArray *fullSentencesFromText(NSString *text) {
    NSMutableArray *results = [NSMutableArray array];
    [text enumerateSubstringsInRange:NSMakeRange(0, [text length]) options:NSStringEnumerationBySentences usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
        [results addObject:substring];
    }];
    return results;
} 
```

请注意，在测试中，每个子字符串似乎都包含标点符号后的尾随空格。你可能想把它们去掉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T20:30:34.847

像这样的东西可以完成这项工作：

```
NSString *msg = @"Hi, I am testing. How are you? Wow!! this is the best, and I am happy.";
[msg enumerateSubstringsInRange:NSMakeRange(0, [msg length])
                        options:NSStringEnumerationBySentences | NSStringEnumerationLocalized
                     usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop)
{
    NSLog(@"Sentence:%@", substring);       
    // Add each sentence into an array                                                                 
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-19T12:47:15.930

或使用：

```
 [mutstri enumerateSubstringsInRange:NSMakeRange(0, [mutstri length])
                                options:NSStringEnumerationBySentences
                             usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop){

                                 NSLog(@"%@", substring);

                             }]; 
```

# wcf - 从 WCF-SVCUtil（注解、模式命名空间和模式位置）控制 WSDL/XSD

> ID：11402493
> 
> 赞同：2
> 
> 时间：2012-07-09T20:20:18.463
> 
> 标签：wcf, xsd, wsdl

在从 WCF 服务生成的 WSDL 中，有一些问题我想进一步控制。首先，有没有办法在不使用代理项的情况下向使用 WSDL 生成的 xsd 文件添加注释？

*   [http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iwsdlexportextension.aspx"](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iwsdlexportextension.aspx)
*   [http://www.codeproject.com/Articles/29980/Exporting-Annotations-from-WCF](http://www.codeproject.com/Articles/29980/Exporting-Annotations-from-WCF)

*   [http://agilior.pt/blogs/bruno.camara/archive/2006/10/01/6.aspx](http://agilior.pt/blogs/bruno.camara/archive/2006/10/01/6.aspx)

*   [http://thorarin.net/blog/post/2010/08/08/Controlling-WSDL-minOccurs-with-WCF.aspx](http://thorarin.net/blog/post/2010/08/08/Controlling-WSDL-minOccurs-with-WCF.aspx)

* * *

~~其次，我想明确命名从 WSDL 生成的 xsd 文件的名称空间。我能够使用 ServiceBehaviorAttribute 控制 wsdl 的命名空间： `[ServiceBehavior(Namespace="http://mysite.com/HelloWorld")]`
但不幸的是，我找不到一种简单的方法来指定 xsd 文件的命名空间:(，有没有一种简单的方法可以做到这一点/你能指点我吗在正确的方向？-~~

编辑-

好吧，我在第二个请求上很傻。我忘记为我的 wcf 文件设置名称空间，这是映射到 xsd 名称空间的内容。我的错 :) 。

* * *

最后，当 wsdl 导入 xsd 时，它使用的路径类似于 `http://localhost:8080/HostDevServer/HelloWorldService.svc?xsd=xsd0`
似乎破坏 apache 的 wsdl2java ant 脚本的路径。我可以进去手动将它们更改为本地文件，但这太痛苦了:)。有什么方法可以生成文件，然后有一个本地引用，比如： `HelloWorldService.xsd`等`HelloWorldService1.xsd`？

对于任何反馈，我们都表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:54:50.010

WCFExtras ftw：

我决定不让我自己的属性和类将文档/注释放入 WSDL 和 XSD 文件中，我只会大肆宣传，让 WCFExtras 来处理它。话虽如此，我确实希望将 Xml 注释分成不同的行，而不是将它们全部放在同一行上。（只是为了使阅读 xml 文件更容易）。加上 WCFExtras 完美地解决了代理问题:)！

最终编写了一个程序来解决第三个问题。它几乎使用 svcutil 抓取元数据文件，然后进入并找到所有导入，并将它们重新分配给基于命名空间下载的文件。

# ios - 无法将非托管库中的结构编组为 monotouch 中的托管代码

> ID：11402494
> 
> 赞同：2
> 
> 时间：2012-07-09T20:20:24.607
> 
> 标签：ios, binding, xamarin.ios, static-libraries

我在供应商提供给我们的库的头文件中定义了以下结构。

```
 typedef struct {
    int iLen;
    int iType;
    int state;
    unsigned char data[1200];
  } TCardCmdRespond; 
```

我在 C# 中创建了一个我认为与之匹配的结构。

```
[StructLayout(LayoutKind.Sequential)]
public struct TCardCmdRespond
{
    public int iLen;
    public int iType;
    public int state;
    public byte[] data;
} 
```

我有几件事要在这里指出。我不确定 unsigned char 数组应该映射到什么。我最初猜想 unsigned char 应该映射到 char 但 C# 中的 char 是 Unicode，所以这似乎不起作用。我也尝试将它映射到一个字节。我也不知道长度 1200 对编组器是否重要，如果是，如何指定它。

我的 monotouch 应用程序中有以下方法，它将结构作为参数。

```
 [Export("OnRecvData:")]
    public void OnRecvData(TCardCmdRespond respond)
    {
        ...
    } 
```

该方法由库通过选择器调用。调用该方法没有问题。当我查看结构中包含的数据时，问题就出现了。当我期望它们在 1-3 之间的范围内时，这些数字非常高（可比较的 Objective-c 代码显示 iType 在此范围内）。我尝试使用位转换器来反转字节顺序，以防编组器没有为我解决字节顺序问题。数字仍然很高，所以我认为问题超出了简单的字节顺序。

当我尝试从 char 数组中提取数据时，会出现更多问题。它不是空值，但尝试以空值检查之外的任何方式访问它会使应用程序崩溃，并带有 EXC_BAD_ACCESS (SIGABRT)

我的解决方案是在objective-c中为此编写一个包装器，将结构分解为参数。然后创建一个库来包装它并绑定它。我的objective-c技能不是那么热，但是这是一个缓慢的过程。

有没有一种方法可以让我完成这项工作，而不必将其包装在一个 Objective-C 库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:17:50.337

您的 C# 定义不正确。

C 版本包含一个 1200 字节的数组内联块，而您的 C# 版本包含一个指向数组的指针（4 个字节）。

你可以看看这个：

[http://msdn.microsoft.com/en-us/library/z6cfh6e6.aspx](http://msdn.microsoft.com/en-us/library/z6cfh6e6.aspx)

# math - 用透视画一个立方体

> ID：11402495
> 
> 赞同：1
> 
> 时间：2012-07-09T20:20:24.657
> 
> 标签：math, graphics, 3d, fractals

![在此处输入图像描述](../Images/14c5eb8e9ad6994ba9e8f187bd59ed94.png)

我正在尝试使用我自己在 CPU 上的[光线行进来绘制](http://blog.hvidtfeldts.net/index.php/2011/06/distance-estimated-3d-fractals-part-i/)[Mandelbox](http://en.wikipedia.org/wiki/Mandelbox)。

我有一个要渲染的`width`*位图。`height`

对于每个像素，我想向立方体前进：

```
static float eye = 0.0f; eye = glm::clamp(eye+0.005f,0.0f,1.0f); // animate
const glm::mat4 projection = glm::perspective(35.0f, (float)width/height, 0.1f, 10.0f),
        modelview = glm::lookAt(glm::vec3(cos(eye),sin(eye),-1),glm::vec3(0,0,0),glm::vec3(0,0,1));     
const float epsilon = sqrt(1.0f/std::max(width,height))/2.0f;
for(int y=0; y<height; y++) {
        for(int x=0; x<width; x++) {
                glm::vec3 p = glm::unProject(glm::vec3(x,y,0),modelview,projection,glm::vec4(0,0,width,height)),
                        dir = glm::unProject(glm::vec3(x,y,1),modelview,projection,glm::vec4(0,0,width,height))-p,
                        P0 = p;
                //std::cout << x << "," << y << " " << p.x << "," << p.y << "," << p.z << " " << dir.x << "," << dir.y << "," << dir.z << std::endl;
                float D = 0;
                for(int i=0; i<MAX_ITER; i++) {
                        const float d = DE(p);
                        D += d;
                        if(d<epsilon) {
                                depth_bmp[y*width+x] = 255.0f/i;
                                break;
                        }
                        p = dir*D + P0;
                }
        }
} 
```

我的距离估计函数是一个非常[直译的翻译](http://blog.hvidtfeldts.net/index.php/2011/12/distance-estimated-3d-fractals-vii-dual-numbers/)，看起来像这样：

```
float DE(glm::vec3 p) {
    const float Scale = -1.77f, fixedRadius2 = 1.0f, minRadius2 = (0.5f*0.5f);
    const glm::vec3 p0 = p;
    float dr = 1.0f;
    for(int n = 0; n < 13; n++) {
        // Reflect
        p = (glm::clamp(p,-1.0f,1.0f) * 2.0f) - p;
        // Sphere Inversion
        const float r2 = glm::dot(p,p);
        if(r2<minRadius2) {
            const float t = (fixedRadius2/minRadius2);
            p *= t;
            dr *= t;
        } else if(r2<fixedRadius2) {
            const float t = (fixedRadius2/r2);
            p *= t;
            dr *= t;
        }
        // Scale & Translate
                p = p * Scale + p0;
                dr = dr * abs(Scale) + 1.0f;
    }
    return glm::length(p)/abs(dr);
} 
```

并且输出看起来完全像拆箱一样：

如何设置眼睛变换以便正确看到立方体？

![在此处输入图像描述](../Images/f5109634f79abab9eafe617051fd910b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:38:01.410

问题是射线的长度必须归一化：

```
glm::vec3 p = glm::unProject(glm::vec3(x,y,0),modelview,projection,glm::vec4(0,0,width,height)),
    dir = glm::unProject(glm::vec3(x,y,1),modelview,projection,glm::vec4(0,0,width,height))-p;
const float len = glm::length(dir);
dir = glm::normalise(dir);
float D = 0;
for(int i=0; i<MAX_ITER; i++) {
    const float d = DE(p + dir*D);
    D += d;
    if(D > len) break;
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:23:47.530

您可以使用[此处](http://graphicsrunner.blogspot.com/2009/01/volume-rendering-101.html)概述的方法生成正确的光线（及其长度）。

# sql - SQL Server 2012 如何查看数据？

> ID：11402497
> 
> 赞同：6
> 
> 时间：2012-07-09T20:20:32.520
> 
> 标签：sql, sql-server, sql-server-2008

我的数据库中有几个表，我是第一次使用 SQL Server Management Studio。我想看看数据。在 SQLite 3 或 MySQL 中

我只需输入`SELECT * FROM tblName WHERE...`

输出将在我的控制台中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T20:23:45.453

在 SSMS 中打开一个新的查询`Ctrl + n`窗口（`Ctrl + d``Enter``F5`

您可以使用鼠标进行上述所有操作（新查询窗口有一个工具栏按钮，您可以使用鼠标选择数据库）。

另一种方法是使用对象浏览器深入到有问题的数据库和表，右键单击表名并选择“选择前 1000 行...”（或类似）选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T20:23:45.170

在 SSMS 中，点击“新查询”按钮，该按钮应位于“文件编辑视图...”菜单的正下方。您将获得一个空白窗口，您可以在其中键入 SQL，结果显示在下方。

您还将获得一个额外的工具栏来选择默认表，除非您`use yourdb;`在查询窗口中将查询作为第一个操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T20:03:32.180

几个想法：

使用 SSMS：

1.  连接到服务器 > 数据库 > 表 > 右键单击​​并选择前 1000 个。
2.  单击新建查询并键入 `SELECT * FROM TABLE`
3.  使用`osql`或`sqlcmd`

# javascript - 如何使用 jquery/javascript 处理来自多个动态创建的锚标记的 onclick 事件？

> ID：11402500
> 
> 赞同：1
> 
> 时间：2012-07-09T20:20:41.100
> 
> 标签：javascript, jquery, html, jquery-mobile, onclick

我有多个用作按钮的动态创建的锚标记。当单击这些按钮中的任何一个时，我想调用位于另一个文件中的单个 javascript 函数，该函数将完成其余有趣的工作。我的问题是我无法通过“onclick”事件正确调用该函数，所以我试图找到解决方法，但这对我来说并不那么简单。

我尝试了许多不同的方法，因此我了解这种方法的一些限制：

带有 Javascript 的标准 HTML 锚点：

```
<a href=#" onclick="doSomething(parameter1, parameter2, ...);">Button</a> 
```

这无济于事，因为存在同步问题，而且我发现几乎总是我发现点击时会在上面选择 href。我实际上很喜欢这种工作方式，如果您知道这里有任何解决方法，请告诉我。

通过 JQuery 绑定：

```
$(document).ready(function() {
     $("#button_id").click(function() {
         doSomething(parameter1, parameter2, ...);
     });
}); 
```

我的绑定问题是，当页面加载时，我有一个函数可以从数据库中获取数据并将其显示在列表中。每个列表元素都有一个按钮，“点击时”将调用一个 javascript 函数，根据我需要从列表元素中提供的任何数据向它传递参数，然后它会做一些事情。

我知道，为了让 Binding 正常工作，每个按钮都应该有自己的 ID，以便将它们与 Binding 方法关联起来。但是，我不确定如何告诉 .click 函数我有多少个 ID，也不知道如何给它这些参数（除非我通过调用其他 JS 函数通过按钮 ID 捕获它们）。

任何建议/想法都非常感谢！

编辑：如何将 button_data 添加到 'doSomething(parameter);' 的参数中 功能？

```
list_element = '<span class="ui-li-count" data-mini="true">' + button_data + '<a href="#" class="my_button">Button</a>';</span> 
```

请记住，这些数据是从数据库中动态获取的，并在页面首次加载时发布到网站上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T20:23:24.843

没有必要为此使用 an `id`。这与您需要做的相反，因为您要为一组元素提供相同的功能。相反，您应该给他们一个`class`分组：

```
<a href=#" class="my-button">Button</a> 
```

和 JavaScript：

```
$(document).ready(function() {
     $('body').on('click', '.my-button', function() {
         doSomething(parameter1, parameter2, ...);
     });
}); 
```

这会将点击事件绑定到所有`.my-button`元素，甚至是您尚未创建的元素。替换`body`为包含所有按钮的父元素，以使这项工作更快一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:25:02.077

使用 .on() 函数。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

您还可以为 id 添加一个特定的前缀`test_<id>`，然后您可以使用通配符选择器：

```
$("[id^=test]").on('click', function () {
    doSomething();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:50:16.237

或者，如果像我一样，你更喜欢原始 JS：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<script type="text/JavaScript">

function createAnchor( strParentElementId, strLinkText, strLinkHref, intArg1, intArg2 ) {

    var objAnchor   = null;
    var objParent   = document.getElementById( strParentElementId );
    var boolCreated = false;

    if ( objParent != null ) {

        objAnchor = document.createElement( 'A' );
        if ( objAnchor != null ) {

            with ( objAnchor ) {
                style.color = 'yellow';
                innerText   = strLinkText;
                href        = strLinkHref;
                onclick     = function() { doSomething( intArg1, intArg2 ); }
                } //with

            objParent.appendChild( objAnchor );

            boolCreated = true;
            } //if-create-element
       }  //if-get-parent

return boolCreated;
}

function doSomething( intArg1, intArg2 ) {
    alert( 'doSomething( ' + intArg1.toString() + ', ' + intArg2.toString() + ' );' );
return true;
}

</script>

<body>

<a name="hello">Hello</a><br />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

<a name="world">World!</a><br />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

<div id="myDiv1" style="background-color:red;"></div><br />
<div id="myDiv2" style="background-color:red;"></div><br />

<script type="text/JavaScript">
createAnchor( 'myDiv1', 'Link 1 - Hello', '#hello', 1, 2 );
createAnchor( 'myDiv2', 'Link 2 - World', '#world', 3, 4 );
</script>

</body>
</html> 
```

# nhibernate - 无法扩展未映射的类：实体

> ID：11402502
> 
> 赞同：4
> 
> 时间：2012-07-09T20:20:52.723
> 
> 标签：nhibernate, nhibernate-mapping

我有一个名为 Entity 的基类：

```
public class Entity
{
    public int Id {get;set;}
} 
```

假设我有一个名为 Customer 的类：

```
public class Customer : Entity
{
    public string Name {get;set;}
} 
```

现在，通过 NHibernate 3.3.1 中的代码使用基于约定的映射，我尝试以下操作：

```
public static class DataHelper
{
    private static HbmMapping GetMappings()
    {
        var mapper = new CustomModelMapper(typeof(Entity));           

        return mapper.CompileMappingFor(
            typeof(DataHelper).Assembly.GetExportedTypes()
                .Where(x => x.IsSubclassOf(typeof(Entity))));
    }
} 
```

当我尝试运行我的应用程序时，我收到错误“无法扩展未映射的类：实体”。我不想映射 Entity 类——它只是一个用于继承一些公共属性的基类。如何告诉 NHibernate 忽略未映射的类？作为参考，下面列出了我的 CustomModelMapper 类。

下面列出了我的 CustomModelMapper 类的代码以供参考

```
internal class CustomModelMapper : ConventionModelMapper
{
    private const int DEFAULT_STRING_LENGTH = 100;
    private Type baseType;

    public CustomModelMapper(Type baseType)
    {
        this.baseType = baseType;
    }

    public CustomModelMapper()
    {
        SetupInspectors();
    }

    protected override void AppendDefaultEvents()
    {
        base.AppendDefaultEvents();
        BeforeMapClass += OnBeforeMapClass;
        BeforeMapProperty += OnBeforeMapProperty;
        BeforeMapManyToOne += OnBeforeMapManyToOne;
        BeforeMapBag += OnBeforeMapBag;
        BeforeMapList += OnBeforeMapList;
        BeforeMapSet += OnBeforeMapSet;
    }

    protected void OnBeforeMapClass(IModelInspector modelInspector, Type type, IClassAttributesMapper classCustomizer)
    {
        classCustomizer.Id(type.GetProperty("Id"), m => m.Generator(Generators.Native));
    }

    protected void OnBeforeMapProperty(IModelInspector modelInspector, PropertyPath member, IPropertyMapper propertyCustomizer)
    {
        if (member.LocalMember.GetPropertyOrFieldType().IsEnum)
        {
            var type = member.LocalMember.GetPropertyOrFieldType();
            var genericType = typeof(EnumStringType<>).MakeGenericType(type);
            propertyCustomizer.Type(genericType, null);
        }

        if (member.LocalMember.GetPropertyOrFieldType() == typeof(string))
            propertyCustomizer.Length(DEFAULT_STRING_LENGTH);
    }

    protected void OnBeforeMapManyToOne(IModelInspector modelInspector, PropertyPath member, IManyToOneMapper propertyCustomizer)
    {
        propertyCustomizer.Cascade(Cascade.All);
        propertyCustomizer.Fetch(FetchKind.Join);
        propertyCustomizer.Lazy(LazyRelation.NoLazy);

        propertyCustomizer.Index(string.Format("IX{0}{1}",
            member.GetContainerEntity(modelInspector).Name,
            member.LocalMember.Name));
    }

    protected void OnBeforeMapBag(IModelInspector modelInspector, PropertyPath member, IBagPropertiesMapper propertyCustomizer)
    {
        propertyCustomizer.Cascade(Cascade.All);
        propertyCustomizer.Lazy(CollectionLazy.Extra);
        propertyCustomizer.Fetch(CollectionFetchMode.Subselect);
    }

    protected void OnBeforeMapList(IModelInspector modelInspector, PropertyPath member, IListPropertiesMapper propertyCustomizer)
    {
        propertyCustomizer.Cascade(Cascade.All);
        propertyCustomizer.Lazy(CollectionLazy.Extra);
        propertyCustomizer.Fetch(CollectionFetchMode.Subselect);
    }

    protected void OnBeforeMapSet(IModelInspector modelInspector, PropertyPath member, ISetPropertiesMapper propertyCustomizer)
    {
        propertyCustomizer.Cascade(Cascade.All);
        propertyCustomizer.Lazy(CollectionLazy.Extra);
        propertyCustomizer.Fetch(CollectionFetchMode.Subselect);
    }

    protected void SetupInspectors()
    {
        IsRootEntity((type, declared) =>
        {
            return baseType.Equals(type.BaseType);
        });

        IsEntity((type, declared) =>
        {
            return baseType.IsAssignableFrom(type) && !type.IsInterface;
        });

        IsVersion((member, declared) =>
        {
            return
                member.Name == "Version" &&
                member.MemberType == MemberTypes.Property &&
                member.GetPropertyOrFieldType() == typeof(int);
        });

        IsBag((member, declared) =>
        {
            if (member.GetPropertyOrFieldType().IsGenericType)
                return IsGenericType(member, typeof(ICollection<>));

            return false;
        });

        IsList((member, declared) =>
        {
            if (member.GetPropertyOrFieldType().IsGenericType)
                return IsGenericType(member, typeof(IList<>));

            return false;
        });

        IsSet((member, declared) =>
        {
            if (member.GetPropertyOrFieldType().IsGenericType)
                return IsGenericType(member, typeof(ICG.ISet<>));

            return false;
        });
    }

    protected static bool IsGenericType(MemberInfo member, Type targetType)
    {
        var type = member.GetPropertyOrFieldType();
        var generics = type.GetGenericInterfaceTypeDefinitions();
        return generics.Contains(targetType);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:07:49.467

问题可能与您的`IsEntity`约定有关。目前，它将为`Entity`类本身返回 true。只需添加另一个检查：

```
IsEntity((type, declared) =>
{
    return baseType.IsAssignableFrom(type) && !type.IsInterface &&
           type != typeof(Entity); // <- skip Entity class
}); 
```

* * *

**编辑**

此外，您的`CustomModelMapper`类中有两个构造函数。其中一个接受基本类型，另一个是 default 并调用`SetupInspectors()`. 正如我所看到的，您的默认构造函数将永远不会被调用，因为您正在调用接受基类型的构造函数，并且它不会调用默认构造函数......

这样做的结果是......你的`SetupInspectors()`方法也永远不会被调用。

# csla - CSLA FieldManager.updatechildren(this) vs FieldManager.updatechildren

> ID：11402505
> 
> 赞同：3
> 
> 时间：2012-07-09T20:21:09.383
> 
> 标签：csla

我是 CSLA 的新手，我试图了解 FieldManager.updatechildren(this) 与 FieldManager.updatechildren 之间的区别。什么时候适合使用其中任何一种？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T19:01:00.910

我想出了我的问题的答案。使用某些参数更新某个子项时使用 FieldManager.UpdateChildren(this)。我们使用 FieldManager.UpdateChildren 的所有其他情况

# javascript - 在 AJAX 中添加这个

> ID：11402506
> 
> 赞同：2
> 
> 时间：2012-07-09T20:21:13.377
> 
> 标签：javascript, jquery, ajax, addthis

我试图让 Addthis 在加载了 AJAX 的 div 标签中工作我在他们的网站上阅读我必须使用 javascript [http://support.addthis.com/customer/portal/articles/381263-addthis呈现工具箱-client-api](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api)

我正在使用下面的代码，但它似乎不起作用，感谢您提供有关该功能的任何帮助。谢谢。

```
<div id="toolbox"></div>
<script type="text/javascript">
    addthis.method('#toolbox', [configurationObject], [sharingObject]);
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T22:21:21.623

由于我对您的特定问题知之甚少，因此我首先研究**addthis.toolbox('.yourClass');**

## 如果你有一个像这样的典型工具箱......

```
<div id="myToolbox" class="toolbox addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook" style="cursor:pointer"></a> 
    <a class="addthis_button_twitter" style="cursor:pointer"></a> 
    <a class="addthis_button_email" style="cursor:pointer"></a>
</div> 
```

一旦您的 ajax 内容完成加载到 dom 中，您可以执行以下操作...

```
addthis.toolbox('#myToolbox'); 
```

# **但是，请注意这一点！**

不要将您的like 按钮放在您的工具箱中，因为当您调用 addthis.toolbox 方法时，它会出于某种原因创建一个重复的like 按钮 iframe。这一定是一个错误，但它花了我几年的时间。相反，您应该将它放在包含 div 的自己的工具箱中，并在其上调用方法。

## 在多个工具箱的情况下

您可能应该改用一个类。最后一个示例请参见以下代码。

**html**

```
 <div class="toolbox">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count" addthis:userid="myCompany"></a> 
 </div>
 <div class="toolbox addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook" style="cursor:pointer"></a> 
    <a class="addthis_button_twitter" style="cursor:pointer"></a> 
    <a class="addthis_button_email" style="cursor:pointer"></a>
 </div> 
```

**javascript:**

```
//on complete of ajax load
addthis.toolbox('.toolbox'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:38:12.750

```
var addthis_config =
{
ui_hover_direction: -1
, ui_offset_left: offsetLeft
, ui_offset_top: -45
, ui_delay: 300
, ui_click: false

};

var addthis_share =
{
url: 'http://www.example.com',
title: 'example title'
}

addthis.method("#Button2", addthis_config, addthis_share); 
```

* * *

访问[http://www.addthis.com/forum/viewtopic.php?f=5&t=14137](http://www.addthis.com/forum/viewtopic.php?f=5&t=14137)这可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:33:52.917

`method`不是`addthis`对象的有效函数。它是示例中的占位符，供您使用真实的方法名称。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T20:25:38.547

你从来没有真正调用任何东西，因为你没有等待 DOM 准备好：

```
<script type="text/javascript"> 
    $().ready(function () {
        addthis.method('#toolbox', [configurationObject], [sharingObject]);
    });
</script> 
```

# actionscript-3 - 健康栏未 100% 满

> ID：11402516
> 
> 赞同：1
> 
> 时间：2012-07-09T20:21:55.243
> 
> 标签：actionscript-3, actionscript

我有一个健康栏，在进入框架时，它会略微减少并且未满。我怎样才能解决这个问题？“应该是”代表我希望它看起来像什么。“目前是什么”代表了我遇到的问题。

应该：![](../Images/5093a41707c602b7ff8b5f6f71aea1e0.png)

目前是：![](../Images/be366fe75b0d8d355b2147d6f3c4fa31.png)

```
package  
{

import flash.display.MovieClip;
import flash.display.Sprite;
import flash.events.Event;
import flash.events.TimerEvent;
import flash.events.KeyboardEvent;
import flash.utils.Timer;
import flash.text.Font;
import flash.events.MouseEvent;
import flash.text.TextDisplayMode;
import flash.text.TextExtent;
import flash.text.TextField;
import flash.text.TextFormat;
import fl.motion.easing.Back;
import flash.display.DisplayObject;
import flash.geom.Point;
import flash.ui.Mouse;
import flash.events.TimerEvent;

public class healthBar extends MovieClip 
{

    public var maxHP:int = 670;
    public var currentHP:int = maxHP;
    public var percentHP:Number = currentHP / maxHP;

    public function healthBar() 
    {
            updateHealthBar();
    }
    public function updateHealthBar()
    {
        percentHP = currentHP / maxHP;
        scaleX = percentHP;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:30:23.493

如果您有输出`percentHP`变量的 print 语句，它实际上是否显示正确的值？1 在这种情况下，我相信。

您也可以手动设置`scaleX`为 1 并查看是否仍会产生未填充的条形图。

根据这两个测试的结果，您可以将问题缩小到`scaleX`使用方式或`percentHP`更新方式。

# php - MySQL嵌套查询如何选择多行

> ID：11402518
> 
> 赞同：0
> 
> 时间：2012-07-09T20:22:10.580
> 
> 标签：php, mysql, codeigniter

```
SELECT id, FIO, parent_id
FROM users
WHERE parent_id =
(
    SELECT id
    FROM users
    WHERE parent_id =
    (
        SELECT id
        FROM users
        WHERE id = 16
    )
) 
```

所以在这里我正在制作一个层次结构树，首先选择根父级，然后选择子级等到第 24 级深度。

问题是：如何从内部查询中选择多列？

因为我需要获取其他行字段来显示如下信息：`name, surname, age`

看起来我只能在外部查询（最顶层）中获取那些行列。

PS：我不想使用连接，因为它们会生成重复的字段。

有解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:33:54.090

您可以使用 MySQL 查询变量在 SQL 端进行迭代。这将返回具有一个父节点的所有数据的所有子节点，而不会重复自己（因此不会对树的深度施加限制）

像这样：（500 是父母的身份开始）

```
SELECT
  id,
  parent_id, 
  name, 
  '0' as depth, 
  @tree_ids := id AS foo
FROM 
   tree,
  (SELECT @tree_ids := '', @depth := -1) vars
WHERE id = 500
UNION
SELECT 
  id,
  parent_id,
  name,
  @depth := IF(parent_id = 500, 1, @depth + 1) AS depth,
  @tree_ids := CONCAT(id, ',', @tree_ids) AS foo
FROM 
  tree 
WHERE FIND_IN_SET(parent_id, @tree_ids) OR parent_id = 500 
```

[在 SQLfiddle 上](http://sqlfiddle.com/#!2/6bdf4/6)查看一个工作示例

请注意，*这在较大的数据集上会产生非常糟糕的性能，*因为 MySQL 不会使用您的索引，而是会进行全表扫描。（我不明白为什么它不使用索引，就是这样。如果有人对索引问题有建议或解释，请发表评论！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:25:42.800

`=`比较仅适用于单个值。您可以`in`用来比较多个值：

```
SELECT ...
FROM yourtable
WHERE somefield IN (select somevalue from othertable); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:25:24.433

将层次数据存储在 mysql 中并将其取出并不是那么简单。

看看这个：[https ://stackoverflow.com/a/4346009/9094](https://stackoverflow.com/a/4346009/9094)

您将需要更多数据才能使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:27:16.183

似乎您的数据库关系设置为 MPTT，这是一篇很好的博客文章，解释了如何查询 mysql MPTT 数据 [http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

看一下完整树示例 总而言之检索完整树可以通过连接来完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T20:29:16.587

我不是 100% 确定我是否完全理解您的意思，但是如果您想在子选择中从表中单独选择所有列...

```
col1, col2, col3, col4 
```

您需要为每一列提供一个始终与同一个 WHERE 匹配的子选择。例子：

```
`SELECT * FROM main_table,
(SELECT col1 FROM inner_table WHERE inner_table.some_column=main_table.some_column),
(SELECT col2 FROM inner_table WHERE inner_table.some_column=main_table.some_column), ...` 
```

# javascript - 对象的调用方法

> ID：11402522
> 
> 赞同：0
> 
> 时间：2012-07-09T20:22:23.563
> 
> 标签：javascript

我有以下对象：

```
​var x = {
    y: '33', 
    z: '88', 
    m: function() {
        alert('this is the m element');
    }
};

x.newObject = function() {
    alert('mm'); 

    function click(myval) {
        alert('you have select the click function' + myval); 
    }
};

x.newObject.click('clickme'); ​​​​​​​​​// This is what I have tried; it's not working. 
```

如何调用 click 函数`newObject`？

[jsFiddle](http://jsfiddle.net/minagabriel/XQu2j/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:26:46.997

在您对其进行编码的方式中，您无法访问`click`函数，因为它在另一个函数中。

如果您坚持以这种方式编码，请在对象中调用`newObject`（这是一个函数）返回`click`，以便可以访问它。它通常被称为函数调用“链接”，前一个调用返回一个对象，下一个调用可以使用：

```
x.newObject = function(){
    alert('monmon') ; 

    return {
        click : function (myval){
            alert('you have select the click function' + myval) ; 
        }
    }
}

//a call to newObject returns an object with a click function
x.newObject().click('clickme') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:27:15.477

这有效：

```
var x = {
    y: '33',
    z: '88',
    m: function() {
        alert('this is the m element');

    }
}

x.newObject = new function() {
    return {
        click: function(myval) {
            alert('you have select the click function' + myval);

        }
    }
}

x.newObject.click('clickme');​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:28:41.923

`click`范围在 newObject 内，因此它在 newObject 之外的任何地方都不可用。您是否尝试使用方法创建对象？如果是这样，请将其添加到原型中：

```
newObject = function() { ... };
newObject.prototype = {
   click: function(myval){ .. }
};

//now you can call newObject.click() 
```

或者您可以让 newObject 返回您想要公开的方法：

```
newObject = function(){
    return {
        click: function(myval){ ...}
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:36:27.930

也许`newObject`不应该是一个函数，而是一个对象。以下代码适用于我

```
var x = {
    y: '33',
    z: '88',
    m: function() {
        alert('this is the m element');

    }
}
x.newObject = {

    click: function(myval) {
        alert('you have select the click function' + myval);

    }
}

x.newObject.click();​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T20:27:06.340

简短的回答：不可能。长答案：“单击”在某种程度上被视为较大函数中的局部变量，您无法在声明它们的函数之外访问局部变量。您需要将“点击”功能分配给一些全局访问的属性或变量。

# java - 用 xml 编写的文件描述符

> ID：11402523
> 
> 赞同：0
> 
> 时间：2012-07-09T20:22:39.617
> 
> 标签：java, xml-parsing, xsd, metadata, file-format

我正在寻找解析日志文件（通常由某些字符分隔的文本文件），并且我想通过制作一个可以接收描述日志文件格式的 xml 文件的解析器来简化工作。这样我可以为我的解析器提供任何类型的日志文件，并使用我的 xml 描述为我的解析器提供有用的信息。我不确定如何在 xml 中概括地描述日志文件格式。此外，我不确定如何将日志文件中的行与给出的描述相匹配。我将不胜感激任何帮助和指导。非常感谢任何回复的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:37:39.813

```
<logfile location="/usr/local/logs/logfile.log">
    <delimiter>#</delimiter>
    <format>
        <field index="1" length="10">
            <target>Date</target>
        </field>
        <field index="2">
            <target>Message</target>
        </field>
        <field index="3" length="20">
            <target>Component</target>
        </field>
        <field index="5" length="20">
            <target>Details</target>
        </field>
    </format>
</logfile> 
```

您的代码将读取此 XML 并根据此处定义的规则动态解析日志文件中的每一行。然后程序会将值存储在适当的“目标”字段中。

日志文件：

```
2012/12/12 10.10.10#Critical application state#Error in component XYZ#Useless information#Useful information 
```

输出：

```
Date: 2012/12/12
Message: Critical application state
Component: Error in component XYZ
Details: Useful information 
```

# facebook - 如何防止 facebook-SDK (Javascript) 将注销按钮从右向左移动 ("PluginResize")

> ID：11402525
> 
> 赞同：0
> 
> 时间：2012-07-09T20:22:56.600
> 
> 标签：facebook, sdk, facebook-javascript-sdk

使用 facebook Javascript-SDK（从其服务器异步加载）会产生奇怪的效果：

通过 SDK 成功登录到 FB 后，FB-Logout-Button 会以像素方式从右到左再向后移动。

登录/注销按钮声明为：

```
<fb:login-button size="large" autologoutlink="true" perms="email,user_birthday,status_update,publish_stream"></fb:login-button> 
```

在 Firebug 中停止脚本会生成一个名为 M6XESwM2V2D.js 的 javascript 文件，其中包含以下代码行：

```
__d("PluginResize",["Log","UnverifiedXD","bind","copyProperties","curry"],function(a,b,c,d,e,f){var g=b('Log'),h=b('UnverifiedXD'),i=b('bind'),j=b('copyProperties'),k=b('curry');function l(o){o=o||document.body;return o.offsetWidth+o.offsetLeft;}function m(o){o=o||document.body;return o.offsetHeight+o.offsetTop;}function n(o,p,event){this.calcWidth=o||l;this.calcHeight=p||m;this.width=undefined;this.height=undefined;this.event=event||'resize';}j(n.prototype,{resize:function(){var o=this.calcWidth(),p=this.calcHeight();if(o!==this.width||p!==this.height){g.debug('Resizing Plugin: (%s, %s, %s)',o,p,this.event);this.width=o;this.height=p;h.send({type:this.event,width:o,height:p});}return this;},auto:function(o){setInterval(i(this,this.resize),o||250);return this;}});n.auto=function(o,p,event){return new n(k(l,o),k(m,o),event).resize().auto(p);};e.exports=n;}); 
```

当在 javascript-debugger 中停止代码时，按钮移动停止（如预期的那样），继续代码移动它。在上面打印的 javascript-Code 中有一个对 setInterval-Method 的调用。因此，这可以解释这种行为。但是他们为什么要这样做呢？

我怎样才能停止这种影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:12:16.157

我实际上在我的网站上遇到了同样的问题。这似乎是facebook的一个错误。我已将其作为错误提出：

[https://developers.facebook.com/bugs/302726826490772](https://developers.facebook.com/bugs/302726826490772)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:00:28.703

顺便说一句 - 添加 style="position:fixed;" 登录按钮帮助了我：

```
<fb:login-button autologoutlink="true" style="position: fixed;"></fb:login-button> 
```

干杯，KT。

# java - 带有 EditText、键盘块文本、背景滚动的 Android 弹出窗口

> ID：11402529
> 
> 赞同：3
> 
> 时间：2012-07-09T20:23:07.273
> 
> 标签：java, android, popup

我有一个 Popup，它在 ScrollView 中保存了几个 EditText。当我单击 EditText 时，它会在背景中向上滚动视图，而不是弹出窗口，因此键盘会阻止 EditText。

有任何想法吗 ？

```
PopupWindow popUp = new PopupWindow(this);
popUp.update(0, 0, display.getWidth(), display.getHeight());
popUp.setFocusable(true);

LinearLayout llh = new LinearLayout(this)
llh.setOrientation(LinearLayout.HORIZONTAL);
ScrollView sv = new ScrollView(this);

EditText e1,e2,e3...
llh.addView(e1);    
llh.addView(e2);    
llh.addView(e3);
...
sv.addView(llh);
popUp.setContentView(llh);
popUp.showAtLocation(llh, Gravity.BOTTOM, 0, 0); 
```

这是从包含 ScrollView 的 View 中“启动”的。

如果有解决方法，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:57:03.433

我遇到了和你一样的问题，为了解决这个问题，我创建了一个自`Dialog`定义主题和一个自定义主题（`R.style.ThemeDialogCustom`在下面的例子中）。我还设置了`dialog.requestWindowFeature(Window.FEATURE_NO_TITLE)`并且`dialog.setCanceledOnTouchOutside(true);`我设置了一个自定义布局`setContentView`。像这样的东西：

```
Dialog dialog = new Dialog(activityContext, R.style.ThemeDialogCustom);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setCanceledOnTouchOutside(true); 
dialog.setContentView(R.layout.custom_dialog_layout); 
```

换句话说，上面这段代码试图模仿 a 的行为`PopupWindow`。

**编辑**为澄清起见，如果您需要访问在对话框的自定义布局中定义的视图，您可以像这样访问它：

```
EditText e1 = (EditText) dialog.findViewById(R.id.e1); 
```

希望有帮助。

# java - Graphics2D 转换结果与手动转换不匹配

> ID：11402530
> 
> 赞同：7
> 
> 时间：2012-07-09T20:23:19.547
> 
> 标签：java, swing, scala, transform, graphics2d

我正在使用 Java 的 Graphics2D 在使用 AffineTransform 的组件上绘制来操纵我的绘图。Graphics2D 为此提供了一种方法变换，它采用 AffineTransform。

有时我需要在不使用内置转换的情况下手动操作一个点。但是当我尝试使用与 Graphics2D.transform 相同的转换来转换一个点时，有时结果点并不相同。

以下代码重现了该问题（它是 Scala 代码，但我认为您可以想象 Java 代码。）：

```
 var transformationMatrix = new AffineTransform()
   /*
    * transformationMatrix is modified throughout the program
    * ...
    */
   override def paintComponent(g: Graphics2D) = {
      super.paintComponent(g)
      /* 1\. transform using graphics transform */
      g.transform(transformationMatrix)
      g.setColor(Color.RED)
      g.fill(new Rectangle(0, 0, 1, 1))
      /* 2\. transform point manually */
      g.setTransform(new AffineTransform) // reset transformation to standard
      val p0 = new Point(0, 0)
      val pDest = new Point()
      transformationMatrix.transform(p0, pDest)
      g.setColor(Color.BLUE)
      g.fill(new Rectangle(pDest.x, pDest.y, 1, 1)
   } 
```

**预期行为**

蓝色矩形（手动计算）覆盖了红色矩形（通过变换计算）。

**有经验的行为**

![蓝色矩形的偏移量为 1](../Images/9f025bbd2433857b3c5c17ff896fd5cf.png)

我承认我的 transformationMatrix 并不是真正的整数，但这不应该是问题，不是吗？

```
 affineTransform = 1.1, 0.0, 520.55
                     0.0, 1.1, 182.54999999999995
                     0.0, 0.0,    1.0 
```

这是一个错误还是我错过了一些深刻的见解？

**编辑**：如果您将 transformationMatrix 设置*为*

```
transformationMatrix = new AffineTransform(1.1, 0.0, 0.0, 1.1, 521.55, 183.54999999999995) 
```

在paintComponent 的开头。请注意，g 的类型是 Graphics2D。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T20:57:05.123

您的转换基本上只是`(520.55, 182.55)`. 而且因为它具有小数像素值，它实际上对舍入的选择很敏感。如果您启用了抗锯齿，您实际上会得到一个 4 像素的红色斑点，覆盖重叠的像素。否则，鉴于舍入为整数和截断为整数之间的歧义，您看到的行为（分歧）是合理的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T00:00:30.313

好吧，你正在做两件不同的事情。

在 (1) 中，您正在对一个形状（它是`Rectangle`与否无关`Rectangle2D.Double`）进行产生分数坐标的变换。它只是绘制了别名，因为您没有设置特定的渲染提示（`RenderingHints.KEY_ANTIALIASING`->`RenderingHints.VALUE_ANTIALIAS_ON`和`RenderingHints.KEY_STROKE_CONTROL`-> `RenderingHints.VALUE_STROKE_PURE`）。

在 (2) 中，您正在对*一个点*进行变换，并将*其强制*转换为别名坐标（`Point`而不是`Point2D.Double`）。然后从该点依次构造一个矩形。

显然，幕后可能会发生非常不同的事情，我根本不希望转换为整数点与在混叠图形上下文中绘制浮点形状会产生相同的结果。

（未经测试）我猜想（1）的有效等效语句是

```
g.fill(transformationMatrix.createTransformedShape(new Rectangle(0, 0, 1, 1))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T16:18:22.737

当您执行第一步 g.transform(transformationMatrix) 时，图形将其与已经存在的转换组合在一起。在第二步中，您将使用 g.setTransform(new AffineTransform) 覆盖它，从而丢失之前的转换（如果有）。你假设你回到了起点，但它可能不是真的。

在第 1 步之前创建一个 getTransform()，在第 2 步之后创建另一个以验证它们是否相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T07:03:55.060

每当您使用浮点坐标时，如果您想要正确的结果，您应该使用图形对象的“2D”版本。我不是从“书”中读到的，所以我不能引用，这只是经验。

这是我的丑陋 java 代码，它产生了您所期望的结果。

```
AffineTransform transformationMatrix = AffineTransform.getTranslateInstance(520.55, 182.54999999999995);
transformationMatrix.scale(1.1, 1.1);
((Graphics2D) previewGraphics).transform(transformationMatrix);
previewGraphics.setColor(Color.RED);
((Graphics2D) previewGraphics).fill(new Rectangle(0,0,1,1));
((Graphics2D) previewGraphics).setTransform(new AffineTransform());
Point2D p0 = new Point2D.Double(0, 0);
Point2D pDest = new Point2D.Double();
transformationMatrix.transform(p0, pDest);
previewGraphics.setColor(Color.BLUE);
((Graphics2D) previewGraphics).fill((Shape) new Rectangle2D.Double(pDest.getX(), pDest.getY(), 1, 1)); 
```

# ruby - 如何最小化嵌套的 if 语句？（红宝石）

> ID：11402531
> 
> 赞同：1
> 
> 时间：2012-07-09T20:23:19.837
> 
> 标签：ruby

我发现我经常在我的 Ruby 代码中做这样的事情：

```
if person
  if person.shirt
    if person.shirt.sleeve
    ...
  end
end 
```

..我这样做是为了避免`NoMethodErrors`。我想知道是否有任何方法可以将其折叠成一行，而没有明显的

```
if person && person.shirt && person.shirt.sleeve 
```

基本上，我想让我的代码更紧凑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T20:26:51.077

在那些假设中，您想用袖子做点什么，对吗？

Rails 有一个很好的助手，[`try`](http://api.rubyonrails.org/classes/Object.html#method-i-try). 如果一切顺利，它会返回值，`nil`否则。所以，在这个例子中，如果`person.shirt`甚至`person`它本身是 nil，try 也会返回 nil。

```
if sleeve = person.try(:shirt).try(:sleeve)
  # do your stuff
end 
```

对于香草红宝石，您可以使用[`andand`](http://andand.rubyforge.org/)提供类似功能的 gem。

```
if sleeve = person.andand.shirt.andand.sleeve
  # do your stuff
end 
```

从 ruby​​ 2.3 开始，您可以使用安全导航运算符：

```
if sleeve = person&.shirt&.sleeve
  # do your stuff
end 
```

# testng - 在 Testng XML 套件中使用组时，所有测试都被排除在外

> ID：11402534
> 
> 赞同：0
> 
> 时间：2012-07-09T20:23:28.387
> 
> 标签：testng

当我尝试在 Testng XML 套件中对测试进行分组时，所有测试方法都被排除在测试运行中。

我已经编写了我的测试，我希望我的类中的所有测试方法都可以运行，但只有套件中的某些类可以执行，所以我使用了类级别的注释：

```
@Test (groups={ TestConstrants.Group1})
public class ABCTests extends AbstractIntegrationTest
{

    @Test
public void Test1() throws Exception

    @Test
    public void Test2() throws Exception
}

@Test (groups={ TestConstrants.Group2})
public class DEFTests extends AbstractIntegrationTest
{

    @Test
public void Test3() throws Exception

    @Test
    public void Test4() throws Exception
} 
```

我的 Testng XML 配置如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suite name="SuiteGroup">
  <test name="TestGroups" preserve-order="true">
    <groups>
    <run>
        <include name="TestConstants.Group1"/>
        <exclude name="TestConstants.Group2"/>
    </run>  
</groups>
    <classes>
      <class name="ABCTests"/>
      <class name="DEFTests"/>
    </classes>
  </test> <!-- TestGroups -->
</suite> <!-- SuiteGroup --> 
```

在此示例中，我希望只运行 ABCTests 类中的测试，但是，由于某种原因，似乎所有测试都被排除在外。我已经验证了我正在扩展的类（AbstractIntegrationTest）中的方法设置为“alwaysRun = true”。

我知道我不能简单地不包含我不想运行的类，但我可能会有数百个测试，而且按组维护测试套件比按类维护测试套件要容易得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T02:51:17.920

If you can create a small project showing the problem, email it to me and I'll take a look.

Note: you are using the word "Constrants" in the snippet above, not sure if it's your real code or a harmless typo here.

# .net - 尝试使用 linq 或其他方式将查询结果透视到对象上

> ID：11402541
> 
> 赞同：1
> 
> 时间：2012-07-09T20:24:03.200
> 
> 标签：.net, linq, pivot

我有一个查询，它返回如下数据：

```
Event | Sum | Date 
sent  | 400 | 1/1/12 
open  | 200 | 1/1/12
click | 50  | 1/1/12 
sent  | 300 | 1/8/12
open  | 150 | 1/8/12
click | 30  | 1/8/12 
```

SQL查询：

```
select event, sum(thecount), rundate
from send_open_click_counts
group by event, rundate
order by rundate, event desc 
```

要将这些值发送到谷歌可视化 api 以呈现图形，我需要像这样排列这些值：

```
['date' , 'sent' , 'opened' , 'clicked']
['1/1/12', '400' , '200' , '50']
['1/8/12', '300', '150' , '30'] 
```

我对这些东西不是很熟悉，但对我来说这是按日期旋转的。

这是我用来模拟原始 SQL 的 linq 查询

```
 var dbLinqObj= from r in db.SEND_OPEN_CLICK_COUNTS
                group r by new { r.EVENT, r.RUNDATE } into g
                select new {
                    EVENT = g.Key.EVENT,
                    THECOUNT = g.Sum(r => r.THECOUNT),
                    RUNDATE = g.Key.RUNDATE

                } ;
    dbLinqObj= dbLinqObj.OrderBy(r => r.RUNDATE); 
```

==== 编辑 ==== 找到解决方案 =====

在深入研究并从评论中获得一些建议后，我发现了一个使用 LINQ 的优雅解决方案。

这是正确旋转结果的 LINQ，以便可以轻松地将其转换为 JSON 字符串。

```
 var query = from q in db.SEND_OPEN_CLICK_COUNTS
                    group q by q.RUNDATE  into g
                    select new
      {
          Date = g.Key,
          Send = g.Where(x => x.EVENT == "sent").Sum(x => x.THECOUNT),
          Open = g.Where(x => x.EVENT == "opened").Sum(x => x.THECOUNT),
          Click = g.Where(x => x.EVENT == "clicked").Sum(x => x.THECOUNT)
      }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:33:30.263

您使用的 linq pivot 通常是如何完成的，而不是转换为数组，您可以尝试使用`Aggregate`linq 方法来构建 JSON。

例如：

```
var dbLinqObj= from r in db.SEND_OPEN_CLICK_COUNTS
            group r by new { r.EVENT, r.RUNDATE } into g
            select new {
                EVENT = g.Key.EVENT,
                THECOUNT = g.Sum(r => r.THECOUNT),
                RUNDATE = g.Key.RUNDATE

            } ;
var dbLinqObjJSON = dbLinqObj.OrderBy(r => r.RUNDATE).Aggregate((json, x) => json + "['" + x.RUNDATE + ", "'" + x.THECOUNT + "', '" + ...  + "]"; 
```

请注意，`Aggregate`它不使用 StringBuilder，因此对于大型序列会有性能影响。这目前是您发布的代码中的一个问题，因为您使用`String`而不是`StringBuilder`创建您的 JSON。每次在 .NET 运行时使用`+`运算符`String`时都需要创建一个新字符串。

如果你想让它尽可能快，有一个[Aggregate 的覆盖](http://msdn.microsoft.com/en-us/library/bb548744.aspx)，它将采用`StringBuilder`：

```
var dbLinqObjJSON = dbLinqObj.OrderBy(r => r.RUNDATE).Aggregate(new StringBuilder("['date' , 'sent' , 'opened' , 'clicked'] , "),
                         (json, x) => json.append("['" + x.RUNDATE + "', '" + x.THECOUNT + "', '" + ...  + "], "),
                         (json) => json.ToString()); 
```

# asp.net-mvc - MVC3 站点生成器应用程序设计

> ID：11402542
> 
> 赞同：3
> 
> 时间：2012-07-09T20:24:04.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, asp.net-mvc-routing

如果有人可以帮助我解决这个问题，那就太好了，因为我是 Web 开发和 ASP.NET MVC 的新手。我的目标是设计一个可以帮助用户创建自己的迷你网站的 MVC 应用程序。每个用户都将拥有自己的迷你网站和一个管理面板来更改其网站的页面和模板。我认为有一些脚本可以实现类似的功能，但我们需要根据我们的特定要求创建自己的脚本。为了实现这个目标，我创建了一个主 mvc 3 应用程序，并在其下创建了一个区域作为站点。我们希望用户拥有自己的子域 URL，例如 www.site1.mainsite.com，其中 site1 是用户的迷你站点的名称。为此，我添加了 2 条路线，一条用于主站点，另一条用于区域，例如

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new[] { "MainSite.UI.Controllers" }
        ); 
```

区内登记

```
context.MapRoute(
            "Sites_default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new {controller = new SiteConstraint()},
            new[] { "MainSite.UI.Areas.Site.Controllers" }); 
```

它们都具有相同的 url 类型，但区域路由有一个约束，我添加了喜欢

```
var url = httpContext.Request.Headers["HOST"];
        var storeName = url.Split('.')[1];
        var match = storeName != "mainsite";
        return match; 
```

到目前为止它的工作，但我不认为它是一个好的设计。现在除此之外，我还需要添加 2 个区域，一个是站点管理员，另一个是博客。实现这一目标的最佳方法应该是什么？

*   子域网址应定向到区域“站点”
*   子域 url/Admin 应路由到区域“siteadmin”
*   域/博客应该被路由到博客区域。
*   域其他 url 应由主控制器处理

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:24:07.313

我什至没有得到一个**回复**

当我尝试添加另一个区域“管理员”时，并使用下面的路线注册它

```
context.MapRoute(
            "SiteAdmin_default",
            "Admin/{controller}/{action}/{id}",
            new { controller = "Dashboard", action = "Index", id = UrlParameter.Optional },
            new { controller = new SiteConstraint() },
            new[] { "MainSite.UI.Areas.SiteAdmin.Controllers" }
        ); 
```

事情开始不对劲了。Route Debugger 帮助我弄清楚发生了什么。对我来说，路线的顺序真的很重要，所以我必须确保我的区域以正确的顺序注册。

```
AreaRegistration.RegisterAllAreas() 
```

没有以正确的顺序注册我的路线，谷歌搜索给了我这个帮助方法。

```
public static class RouteHelper
{
    public static void RegisterArea<T>(RouteCollection routes, object state) where T : AreaRegistration
    {
        var registration = (AreaRegistration)Activator.CreateInstance(typeof(T));
        var context = new AreaRegistrationContext(registration.AreaName, routes, state);
        var tNamespace = registration.GetType().Namespace;
        if (tNamespace != null)
        {
            context.Namespaces.Add(tNamespace + ".*");
        }
        registration.RegisterArea(context);
    }
} 
```

该方法帮助我在 Global asax 中按所需顺序将区域注册为

```
 RouteHelper.RegisterArea<SiteAdminAreaRegistration>(RouteTable.Routes, null);
 RouteHelper.RegisterArea<SiteAreaRegistration>(RouteTable.Routes, null); 
```

我正在写下来，到目前为止我得到的答案，以便其他人可能会发现它有用。

# math - 用于跟踪最坏情况错误的算术库

> ID：11402544
> 
> 赞同：3
> 
> 时间：2012-07-09T20:24:05.790
> 
> 标签：math, libraries, floating-accuracy, interval-arithmetic

*（已编辑）*
是否有任何库或工具可以了解算术运算中的最大累积误差？

例如，如果我进行一些迭代计算...

```
myVars = initialValues;
while (notEnded) {
    myVars = updateMyVars(myVars)
} 
```

...我最后不仅想知道计算值，还想知道潜在的错误（如果每个单独操作的结果采用每个操作数的范围限制，则可能值的范围）。

我已经编写了一个名为[EADouble.java](http://javier-aranda.com/misc/math/EADouble.java)（错误会计的 EA）的 Java 类，它保存并更新最大正负误差以及计算值，用于一些基本操作，但恐怕我可能正在重新发明一个方轮.

任何库/Java中的任何东西/任何东西？有什么建议么？

* * *

*   7 月 11 日更新：检查现有库并添加示例代码链接。
*   正如同仁评论的，有[区间算术](http://en.wikipedia.org/wiki/Interval_arithmetic)的概念，并且有一个关于该主题的先前问题（[一个好的不确定性（区间）算术库？ ）。](https://stackoverflow.com/questions/623660/a-good-uncertainty-interval-arithmetic-library)关于我的意图只有几个小问题：
    *   我更关心“主要”值而不是上限和下限。但是，为开放库添加额外的价值应该是直截了当的。
    *   将误差计入一个独立的浮点数可能允许更精确的精度（例如，对于加法，上限将仅增加一半[ULP](http://en.wikipedia.org/wiki/Unit_in_the_last_place)，而不是整个 ULP）。
*   我看过的图书馆：
    *   [ia_math](http://interval.sourceforge.net/interval/java/ia_math/README.html)（Java。只需要添加主要值。到目前为止我最喜欢的）
    *   [Boost/numeric/Interval](http://www.boost.org/doc/libs/1_50_0/libs/numeric/interval/doc/interval.htm)（C++，非常复杂/完整）
    *   [ErrorProp](http://www.ee.ucl.ac.uk/~mflanaga/java/ErrorProp.html)（Java、帐户值和错误作为标准差）
*   示例代码 ( [TestEADouble.java](http://javier-aranda.com/misc/math/TestEADouble.java) ) 可以运行弹道模拟和数字 e 的计算。然而，这些都不是非常苛刻的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T15:52:40.550

可能为时已晚，但请查看 BIAS/Profil：[http:](http://www.ti3.tuhh.de/keil/profil/index_e.html) //www.ti3.tuhh.de/keil/profil/index_e.html 非常完整、简单，可以解决计算机错误，如果您的错误集中在很容易访问您的名义（通过 Mid(...)）。

# java - 向集合添加迭代器

> ID：11402551
> 
> 赞同：0
> 
> 时间：2012-07-09T20:24:45.790
> 
> 标签：java

下面是我的学习目标。我开始了，但我真的不知道从这里到哪里去实现 main 中的程序。我将不胜感激任何帮助！

客观的：

*   将 Iterator 对象添加到卡片集合
*   通过创建私有内部类将迭代器添加到集合中。
*   您可以使用任何合适的内部类类型
*   枚举器和迭代器使用较大的数字来确定集合何时更改。
*   实现正确的方法、接口，并为与 Java API 一致的类扩展适当的类。

    ```
    public class CardCollection {

    private ArrayList<Card> cards;
    private ArrayList<Note> notes;

    public CardCollection() { //constructor initializes the two arraylists
      cards = new ArrayList<Card>();
      notes = new ArrayList<Note>();
     }

    private class Card implements Iterable<Card> { //create the inner class

        public Iterator<Card> iterator() { //create the Iterator for Card
            return cards.iterator();
        }
    }

    private class Note implements Iterable<Note> { //create the inner class

        public Iterator<Note> iterator() { //create the Iterator for Note
            return notes.iterator();
        }

    }

    public Card cards() {
        return new Card();
     }

     public Note notes() {
         return new Note();
     }

     public void add(Card card) {
         cards.add(card);
     }

     public void add(Note note) {
         notes.add(note);
     }

    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:10:19.740

您在这里有两个概念，我认为您可能会混淆。如果您可以迭代某些内部元素，则为 Iterable 对象。

因此，如果我有一个装有物品的购物车，我可以遍历我的杂货。

```
public class ShoppingCart implements Iterable<GroceryItem>
{
   public Iterator<GroceryItem> iterator()
   {
      // return an iterator
   }
} 
```

所以为了使用这个功能，我需要提供一个迭代器。在您的代码示例中，您正在重用 ArrayList 中的迭代器。从您的练习描述中，我相信您需要自己实施一个。例如：

```
public class GroceryIterator implements Iterator<GroceryItem>
{
  private GroceryItem[] items;
  private int currentElement = 0;

  public GroceryIterator(GroceryItem[] items)
  {
    this.items = items;
  }

  public GroceryItem next() // implement this
  public void remove() // implement this
  public boolean hasNext() // implement this
} 
```

所以我给了你一个关于构造函数/成员变量的提示。完成这个类之后，你的 Iterable 类（我的 ShoppingCart）将返回我的新迭代器。

作业建议为您的自定义迭代器使用私有内部类。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:54:36.357

*   可迭代对象通常是集合。CardCollection 比 Card 更适合
*   公共方法 card() 和 notes() 返回类型 Card 和 Note 是私有的。我认为这些都是公开的。
*   我认为方法 cards() 和 notes() 旨在返回迭代器。

# php - 提交在弹出窗口中创建的表单

> ID：11402559
> 
> 赞同：2
> 
> 时间：2012-07-09T20:25:21.210
> 
> 标签：php, javascript, jquery

我有一个创建弹出窗口的页面。在创建的弹出窗口上，我单击在弹出窗口上创建的单选按钮，然后单击按钮我需要提交表单并使用 post 方法将单选按钮值传递到新页面。如何使用 jquery 或 javascript 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:27:14.280

尝试使用 AJAX：

**参考**：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  type: "POST",
  url: "post_page.php",
  data: { radio: $("radio_btn").val() }
}).done(function( msg ) {
  alert("Done!");
}); 
```

# .net - 任务栏前面的WPF窗口（使用双显示器），我该怎么做？

> ID：11402570
> 
> 赞同：1
> 
> 时间：2012-07-09T20:26:00.520
> 
> 标签：.net, wpf

我正在尝试创建一个双显示器应用程序。所以，我用下面的代码达到了这个目标：

```
var myWindow = new MyWindow();

var workingArea = System.Windows.Forms.Screen.AllScreens[selectedMonitor].WorkingArea;
myWindow.Top = workingArea.Top;
myWindow.Left = workingArea.Left;
myWindow.Height = workingArea.Height;
myWindow.Width = workingArea.Width;
myWindow.Show(); 
```

如果我传递`selectedMonitor`值 1，应用程序在第二个监视器中打开，一切正常，但是当我传递值 0 时，应用程序在第一个监视器中打开，但 windows 任务栏在应用程序前面。

怎么把`myWindow`任务栏放在前面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:02:06.197

如果您将其设置`WindowStyle`为`None`（因此它没有边框）并手动设置`WindowState`为`Maximized`或设置大小，它将位于任务栏的前面。如果你想要标题栏之类的，我不确定你能做什么。

此外，[`WorkingArea`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.workingarea)不包括标题栏上方的区域。文档特别说它不包括在内。所以你也不想要那个。你可能只想要[`Bounds`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.bounds).

# c# - PayPal Express C# 订单摘要

> ID：11402573
> 
> 赞同：0
> 
> 时间：2012-07-09T20:26:13.110
> 
> 标签：c#, asp.net, paypal

如何在 PayPal Express Checkout 的订单摘要中包含订单项？

我正在使用 ASP.Net 和 C#，并尝试将其添加到 PayPal 集成向导 ( `https://www.paypal-labs.com/integrationwizard/`) 生成的 paypalfunctions.cs 文件中，但该行项目未显示在“您的订单摘要”页面中：

```
encoder["L_PAYMENTREQUEST_0_NAME0"] = "My Line Item";
encoder["L_PAYMENTREQUEST_0_QTY0"] = "1"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:45:03.213

这篇文章帮助我解决了这个问题：[Problems with Paypal SetExpressCheckout when using NVP API in ASP.net](https://stackoverflow.com/questions/7270718/problems-with-paypal-setexpresscheckout-when-using-nvp-api-in-asp-net)

我还使用了 PayPal 向导生成的代码，该代码在代码的其他地方将版本设置为 2.3。

# ios - IOS 应用程序加载器错误“无法解析应用程序 Info.plist 进行验证”

> ID：11402575
> 
> 赞同：2
> 
> 时间：2012-07-09T20:26:19.040
> 
> 标签：ios, loader, info.plist

在清理 Xcode 中的所有内容以将我的应用程序提交到 iTunes Connect 后，我​​遇到了一个无法找到答案的错误。完整的错误是：

> 无法解析应用程序 Info.plist 以进行验证。请确保您的 Info.plist 不包含嵌入式控制字符，采用 del 格式，并以 UTF-8 兼容编码进行编码。

我使用 UNITY 3D 创建项目，在我的 iPod 和 iPhone 上一切正常，但在我构建它以存档并从 Organizer 或 Application Loader 提交后，我收到此错误。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:49:47.223

我遇到了这个错误，结果证明是其中一个字段中的一个不经意的空间。但解决这些错误的关键是在文本编辑器中查看 info.plist 文件。通过仔细检查，您很可能能够找到不符合要求的字符/字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:14:23.580

尝试在纯文本编辑器中打开 Info.plist 并查找可能不合适的字符。如果您有其他类似的应用程序，您可以比较两个纯文本 .plist 文件，这可能会导致您遇到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:01:31.670

奇怪的是，我有一个项目出现了这个错误，就我而言，将“图标文件（iOS 5）”换成前身“图标文件”会有所不同。请记住，较旧的图标文件要求图标具有标准命名约定：Icon.png、Icon@2x.png、Icon-72.png、Icon-72@2x.png 等。

我无法解释为什么这种变化会产生不同的结果，这让我相信它是 Apple 应用程序验证中的一个错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:56:56.700

它可能是一个 BOM 字符或其他你看不到的东西。尝试在没有 BOM 的情况下将文档转换为 UTF-8 另外，请确保您的行结尾都是 \n (LF) 而不是 \r\n (CRLF)。那应该解决它。

我不确定你有什么文本编辑器，但你可以使用免费的 TextWrangler 来做到这一点。

另一种可能性是您有其他一些它不喜欢的特殊字符（如 & 或 < 或 >），但我怀疑情况并非如此。

# facebook - Facebook 积分在手机选项上的支出要高得多

> ID：11402578
> 
> 赞同：0
> 
> 时间：2012-07-09T20:26:31.023
> 
> 标签：facebook, facebook-credits

我正在开发一个 Facebook 应用程序，我以 10 个积分出售一个数字产品。信用卡支付的价格是1美元，而手机选项的价格是2.5美元。对于另一个学分金额也是如此。假设我以 20 积分出售产品，信用卡价格为 2 美元，而手机价格为 4.7 美元。

这是平常的吗？这似乎毫无意义，因为用手机支付时价格高出100％以上！

为什么会这样？

非常感谢

PS：我是葡萄牙人，沃达丰的客户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:11:02.930

是的，这很正常。与我所知道的任何其他形式的支付处理相比，手机支付的费用要高*得多，而且这些费用中的很大一部分通常会转嫁给消费者。*

该怎么办？一种可能性（也许是*唯一*的可能性）是添加一个抽象层——创建一个应用内虚拟货币，用积分购买，用户可以用它来换取你的产品。但是，如果您不打算提供许多可能比其价值更麻烦的不同项目，或者创建不必要的复杂/混乱的用户体验。

# java - Java - 整数的arrayList未初始化

> ID：11402582
> 
> 赞同：-2
> 
> 时间：2012-07-09T20:26:58.633
> 
> 标签：java, arraylist

我不知道如何初始化 synapseNeuronList arrayList。得到空错误

```
private ArrayList <Integer> synapseNeuronList;
for (int j=1;j<strLine.split(" ").length-1;j++){                                              
synapseNeuronList.add(Integer.valueOf(strLine.split(" ")[j]));  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:27:49.403

您`synapseNeuronList`需要引用一些 ArrayList （或其子类型）对象。`new`像这样创建对象使用运算符

```
private ArrayList <Integer> synapseNeuronList = new ArrayList <Integer>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T20:27:59.150

您可以在声明变量时直接执行此操作：

```
private ArrayList <Integer> synapseNeuronList = new ArrayList<Integer>(); 
```

或在构造函数中：

```
public YourClassConstructor() {
    synapseNeuronList = new ArrayList<Integer>();
} 
```

希望这可以帮助！

# ios - 故事板上对象的生命周期？

> ID：11402583
> 
> 赞同：3
> 
> 时间：2012-07-09T20:26:58.977
> 
> 标签：ios, xcode-storyboard

我正在寻找解释 xcode 故事板上对象（场景、segues 等）的运行时生命周期的文档或链接。

即从取消归档情节提要归档和实例化对象/视图/控制器开始。

此外，我期待获得此信息以解决以下查询：

[如何以编程方式为情节提要中的子视图设置视图控制器？](https://stackoverflow.com/questions/11384088/how-to-set-view-controller-programmatically-for-subview-in-storyboard/11384139#11384139)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T20:21:14.083

这里有一些了解生命周期的好文章。

*   [视图控制器生命周期（*在运行时显示您的视图*）](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/DefiningYourSubclass.html#//apple_ref/doc/uid/TP40007457-CH7-SW9 "视图控制器生命周期")
*   [Segue 的生命周期](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/UsingSegues.html#//apple_ref/doc/uid/TP40007457-CH15-SW13 "Segue 的生命周期")

我不太确定我理解你的第二个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T04:58:51.250

更具体地说，[视图控制器编程指南](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/index.html)详细说明了初始视图控制器在启动时如何配置，以及更一般地如何在情节提要中使用视图控制器。

例如，第一个链接告诉您 window.rootViewController 是在`application:didFinishLaunchingWithOptions:`调用时设置的，因此您可以在那里进行更多配置，第二个链接说明如何通过 segue 或直接在从故事板加载的代码中实例化 VC。

# c# - C# 将类转换为重写类

> ID：11402585
> 
> 赞同：0
> 
> 时间：2012-07-09T20:27:05.907
> 
> 标签：c#, class, overriding

我有一个`Application`需要用 INotifyPropertyChanged 事件覆盖的类。我已经编写了覆盖原始类并最终创建的逻辑`SuperApplication`

我正在从库中提取数据，并且无法更改加载逻辑。我只需要一种方法将原始类中的数据获取到我的超类中。我已经尝试过类似的东西，`superClass = (SuperApplication)standardClass;`但它没有奏效。

我该怎么做呢？

如果有帮助，这是我用来覆盖原始类的代码：

```
public class SuperCreditApplication : CreditApplication
{
    public SuperCreditApplicant Applicant { get; set; }
    public SuperCreditApplicant CoApplicant { get; set; }
}

public class SuperCreditApplicant : CreditApplicant
{
    public SuperProspect Prospect { get; set; }
}

public class SuperProspect : Prospect, INotifyPropertyChanged
{
    public State DriverLicenseState
    {
        get
        {
            return DriverLicenseState;
        }
        set
        {
            DriverLicenseState = value;
            OnPropertyChanged("DriverLicenseState");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:58:51.847

鉴于您的评论和编辑，我需要给出一个新的答案大声笑 - 我误解了

您需要使用拦截将事件处理程序添加到您可能无法控制的属性中。就我个人而言，我已经看到使用 IoC 容器（例如 prism）完成此操作。顺便说一句，我可能在这里完全错了，但我认为 MEF 也可能会有所帮助

另一种方法是使用 T4 模板查看代码生成，以反映现有类以生成您的超类以及映射到 4existing 的属性，该属性将包含触发事件的代码。

这看起来像 [http://lostechies.com/derekgreer/2009/03/01/implementing-inotifyproperychanged-with/](http://lostechies.com/derekgreer/2009/03/01/implementing-inotifyproperychanged-with/)

解释 MEF 的事情：我很确定我已经看到 INotifyPropertyChanged 在各种 silverlight 示例中使用 MEF 进行了连接。当我阅读时，我对这方面不感兴趣，所以没有阅读它。

提取接口并使用 ioc 容器来完成所有繁重的工作将是我想象的最短路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:35:30.440

我假设您不能`INotifyPropertyChanged`直接在`Prospect`. 如果你不能直接改变`Prospect`（比如让你的所有属性`virtual`），你可以让你的`SuperProspect`类成为一个包装器`Prospect`

```
public class SuperProspect : INotifyPropertyChanged
{
    private readonly Prospect _prospect;

    public SuperProspect(Prospect prospect)
    {
        _prospect = prospect;
    }

    public State DriverLicenseState
    {
        get { return _prospect.DriverLicenseState; }
        set
        {
            _prospect.DriverLicenseState = value;
            OnPropertyChanged("DriverLicenseState");
        }
    }

    public void SomeMethod()
    {
        _prospect.SomeMethod();
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

然后你可以`SuperProspect`像这样使用

```
var superProspect = new SuperProspect(myProspect); 
```

如果您为您的`Prospect`成员创建一个接口，那么您可以使您的`SuperProspect`和您的`Prospect`实现相同的接口。如果您随后对接口而不是具体`Prospect`实现进行编程，您的代码将同时使用`SuperProspect`和/或`Prospect`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T21:21:13.497

您没有说负载是在对象的构造期间还是在以后的方法调用期间。根据哪个，它看起来像这两个代码示例之一。

```
//This constructor signature should match your base class's
public SuperCreditApplication(object a, object b, object c) : base(a,b,c)
{
    //Do whatever you need to do here. The base object's constructor will be called for you
}

public Load()
{
    this.BaseObjectLoadMethod();
} 
```

然后你制作一个新的`SuperCreditApplication`并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:31:20.803

听起来您应该使用复制构造函数，将“来自原始类的数据”作为参数传递给新构造的`superClass`（顺便说一下，我认为名称`Super`- 可能是一个错误，因为这会让人们认为它在*上面*层次结构中的原始）。

通过复制构造函数，我的意思是：

```
class IWishIWasntCalledSuperApplication : Application 
{
  IWishIWasntCalledSuperApplication(Application original) 
  { 
      this.someData = original.someData;
      this.someOtherData = original.someOtherData;
      ...etc...
  }
} 
```

# android - 桌面/移动设备上的 CSS 悬停行为不一致

> ID：11402598
> 
> 赞同：2
> 
> 时间：2012-07-09T20:27:25.943
> 
> 标签：android, css, hover

我有一个奇怪的问题：

此页面在桌面浏览器上看起来不错，但至少在我的 CM7 Android 2.3.7 设备上，悬停效果似乎无法正常工作。我知道悬停不应该像使用鼠标那样在触摸显示器上工作，但我希望有触摸反馈，即一旦用户点击菜单项，突出显示颜色应该显示。

当链接只是一个 href="#" 时，这确实有效，但当它是一个真正的链接时，它不起作用。如您所见，我尝试了各种方法，但均无济于事。

如果您在点击一个真实链接后返回浏览器历史记录，该项目会突出显示，因此浏览器会理解我向它抛出的 CSS。

但是，javascript 警报清楚地表明它似乎只解释链接打开操作，并不关心颜色变化的东西。

奇怪的是。欢迎使用解决方法，最好不使用 javascript，但如果必须是 JS，那就继续吧！

要么去这里： http: [//orpheus.co.at/hoverprob](http://orpheus.co.at/hoverprob) 并使用源，卢克！或者在这里看到它的所有荣耀：

```
<html>
<head>
    <meta name="viewport" content="width=320">
    <style>
        #nav, #nav ul {
    width: 100%;
    float: left;
    list-style: none;
    line-height: 1;
    background: #fff;
    font-weight: bold;
    padding: 0;
    margin: 0 0 5px 0;
}

#nav a {
    display: block;
    color: #001834;
    text-decoration: none;
    padding: 5px 7px;
}

#nav li {
    float: left;
    padding: 0;
    width: 33%;
}

#nav li ul {
    position: absolute;
    left: -9999px;
    height: auto;
    margin: 0;
    opacity: .95;
    width: 100%;
}

#nav li a {
    text-align: center;
    height: 20px;
    line-height: 20px;
}

#nav li ul li a {
    text-align: left;
}

#nav li ul li {
    float: none;
    /* width: 316px; */
    width: 100%;
}

#nav li:hover ul ul, #nav li:hover ul ul ul, #nav li.sfhover ul ul, #nav li.sfhover ul ul ul {
    left: -9999px;
}

#nav li:hover ul, #nav li li:hover ul, #nav li li li:hover ul, #nav li.sfhover ul, #nav li li.sfhover ul, #nav li li li.sfhover ul {
    left: 0;
}
#nav li.educate {
    background: #FFF0B8;
    /* background: #FF0000; */
    /* border-radius: 5px; */
    border: 5px;
}

#nav li.educate:hover {
    background: #FFCE00;
    /* border-radius: 5px; */
}
    </style>
</head>
<body>
<div id="mobMenu">
<ul id="nav" class="nav">
    <li class="educate"><a href="#">menu</a>
        <ul class="educate">
            <li class="educate"><a href="#">href=&quot#&quot;, works</a></li>
            <!--(+emtpy onmouseover for iPose devices)-->
            <li class="educate"><a onmouseover="" href="index.html">does not work, real link</a></li>
            <li class="educate" id="bla"><a onmousedown="document.getElementById('bla').style.backgroundColor='Blue'; alert('Done');document.location='index.html';" href="#">JS, not interpreted in corr order</a></li>
        </ul>
    </li>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:08:41.633

答案是在他的评论中使用专用的触摸事件作为 3rror404 注释。（甚至不能因此奖励他！）

链接： [在没有 jQuery mobile 的移动设备上使用 mousedown 事件？](https://stackoverflow.com/questions/11144370/using-mousedown-event-on-mobile-without-jquery-mobile)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:38:11.150

我有这样的CSS：

```
.icons:hover
{
    background-color: #e0e0e0;
    box-shadow: 0px 0px 10px #000;
    -moz-box-shadow: 0px 0px 10px #000;
} 
```

它在 HTC Evo 4g LTE 上为我正确显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:45:12.960

也许在鼠标上触发与 javascript(JQuery) 的链接会起作用：

```
 $('.link').mousedown(function(){
      $(this).addClass('pressed');
    }).mouseup(function(){
      var myURL = $(this).attr(href); /* retrieve URL from href attribute */
      document.location.href=myURL;
    }); 
```

显然，您需要在样式表中创建 .pressed 类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:36:33.277

许多触摸设备上的悬停行为未定义或不可靠。您不应该期望它可以在触摸设备上工作。使用一些替代设计模式。

# asp.net-mvc - ASP.Net MVC 使用现有的 COM 对象作为模型

> ID：11402601
> 
> 赞同：0
> 
> 时间：2012-07-09T20:27:54.207
> 
> 标签：asp.net-mvc, com

我们目前有一个经典的 ASP Web 应用程序，它使用一组包含业务逻辑和数据库访问的 COM 对象。
我们正处于下一个版本的规划阶段，正在将 ASP.Net MVC 4 视为框架。
ASP.Net MVC 可以通过互操作使用现有的 COM 对象模型作为模型吗？还是使用 WebForms 更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:48:24.587

是的，您可以在 asp.net 中使用现有的 COM 对象模型，这是一篇如何做到的文章[Can't instantiate COM object from ASP.NET MVC app](https://stackoverflow.com/questions/10471856/cant-instantiate-com-object-from-asp-net-mvc-app)

如果您可以尝试摆脱此 COM 对象并在 .net 托管代码中重写

几乎没有什么原因可以变成瓶颈，导致性能问题和依赖性

此外，如果您重新编写它，您将能够进行[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:51:36.407

ASP.NET MVC 是一个开发框架，它不担心您的数据访问方法是什么。它可以是 XML 文件或 REST API 调用结果或您的 COM 对象。您需要做的是将这些对象适当地映射到您的对象`viewmodel`。根据需要创建 ViewModel 以将数据传入和传出 View。

# python - 您可以将操作直接应用于 map/reduce/filter 中的参数吗？

> ID：11402607
> 
> 赞同：6
> 
> 时间：2012-07-09T20:28:13.827
> 
> 标签：python, syntax, iteration, readability

`map`and`filter`通常可以与列表推导互换，但`reduce`不像`map`and那样容易交换`filter`（此外，在某些情况下，我仍然更喜欢函数式语法）。但是，当您需要对参数本身进行操作时，我发现自己正在经历句法体操，最终不得不编写整个函数以保持可读性。

我将`map`用来保持插图单元测试的简单性，但请记住，现实生活中的用例可能更难表达为列表理解。

我找到了两种混乱的方法来解决它，但我实际上不会使用任何方法。

```
[afunc(*i) for i in aniter] == map(afunc, *zip(*aniter))
[afunc(*i) for i in aniter] == map(lambda i: apply(afunc, i), aniter) 
```

有没有什么简洁、优雅的方式来表达这些表达式的右手边？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T20:30:36.343

查看[itertools](http://docs.python.org/library/itertools.html)以获取可以让您的生活更轻松的工具。

例如，您发布的代码已经作为[`itertools.starmap`](http://docs.python.org/library/itertools.html#itertools.starmap).

```
itertools.starmap(afunc, aniter) 
```

从文档中：

> 创建一个迭代器，使用从可迭代对象获得的参数计算函数。当参数参数已经从单个可迭代的元组中分组（数据已“预压缩”）时，使用而不是 imap()。imap() 和 starmap() 之间的区别与 function(a,b) 和 function(*c) 之间的区别相似。相当于：
> 
> ```
> def starmap(function, iterable):
>    # starmap(pow, [(2,5), (3,2), (10,3)]) --> 32 9 1000
>    for args in iterable:
>        yield function(*args) 
> ```

中还隐藏着大量其他好东西`itertools`，因此我建议您通读文档以查看是否还有其他可以使用的东西。[食谱](http://docs.python.org/library/itertools.html#recipes)部分还展示了您可以使用其中的可用功能来`itertools`解决各种问题的方法。即使您找不到能够满足您确切要求的配方，您也可能可以将展示的一些想法用作灵感来源。

# sql - ADO.NET：指定的强制转换无效

> ID：11402610
> 
> 赞同：0
> 
> 时间：2012-07-09T20:28:23.230
> 
> 标签：sql, asp.net-mvc, sql-server-2008, stored-procedures, casting

当我执行这样的存储过程时，我得到一个指定的强制转换无效错误：

```
return (int)comm.ExecuteScalar(); 
```

当我在 SQL Server 中执行它时，它返回 1，所以我知道我的 proc 正在工作。

我的演员有什么问题？

更新：

```
 public static int IsPresent(string userName, int inTime)
    {
        SqlConnection connObj = new SqlConnection();
        connObj.ConnectionString = Util.SQLConct();
        connObj.Open();

        SqlCommand comm = new SqlCommand("usp_IsUserLocked", connObj);

        comm.CommandType = CommandType.StoredProcedure;

        comm.Parameters.Add(new SqlParameter("@Username", userName));
        comm.Parameters.Add(new SqlParameter("@InTime", inTime));

        return (int)comm.ExecuteScalar();

    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:31:22.670

您的方法可能返回 double 或 int64 或任何其他无法隐式转换为 (int) 的类型。用于`Convert.ToInt32`确保您的方法返回正确的类型。

```
using System;

...
return Convert.ToInt32(comm.ExecuteScalar()); 
```

# iframe - Metro 应用程序中的远程 iframe 问题

> ID：11402619
> 
> 赞同：2
> 
> 时间：2012-07-09T20:28:53.267
> 
> 标签：iframe, windows-8, microsoft-metro, winjs

我看过这个关于使用 iframe 和做 postMessage: [Metro App and iFrame cookie](https://stackoverflow.com/questions/8901272/metro-app-and-iframe-cookie)的帖子。我试图在 Win8 Release Preview 中使用 HTML/JS Metro 应用程序做一些非常相似的事情，但在该解决方案中复制行为似乎相当不可能。

我有一个简单的框架存储在远程位置：

```
<!DOCTYPE html>
<html>
<body>
<script>
window.onmessage = function(e) {
    alert("Hello world");

    debugger;
};
</script>
</body>
</html> 
```

在我的 default.html 中，我有一个包含 iframe 的 div，如下所示：

```
<div id="container">
    <iframe id="frame" src="https://dl.dropbox.com/u/75275447/win8Frame.html"></iframe>
</div> 
```

我有一个在#frame 上执行 postMessage 的任意按钮，并且会在普通的 Html 站点中触发远程帧 onmessage，但是我可以查看 VS 中的错误列表并查看：

> APPHOST9613：应用程序无法导航到 [https://dl.dropbox.com/u/75275447/win8Frame.html](https://dl.dropbox.com/u/75275447/win8Frame.html)，因为此错误：RESOURCE_NOT_FOUND。

我已尝试查看任何可能允许我实现此目的的清单并启用：

*   家庭或工作网络
*   互联网（客户端和服务器）
*   互联网（客户端）

无济于事...我还尝试将一个框架（应用程序本地）加载到 Web 内容中（通过 ms-wwa-web://），其中包含一个 div，该 div 托管远程 iframe 并链接 onmessage 以转发postMessage 到远程 iframe，但我再次看到另一个错误：

> APPHOST9624：应用无法使用脚本加载 ms-wwa-web://frame.html/ url，因为该 url 会启动另一个应用。只有直接的用户交互才能启动另一个应用程序。

我开始认为这是一项不可能完成的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:24:17.253

我认为与此问题无关的一条信息是在**javascript 控制台**中发现的与使用 Jquery 相关的错误，我在另一篇[SO 帖子](https://stackoverflow.com/questions/10859523/using-jquery-with-windows-8-metro-javascript-app-causes-security-error)中找到了解决方案。现在清除该问题允许应用程序加载远程 iframe，我可以按下按钮并查看消息到达远程 iframe 的 javascript（在我的情况下，我看到 alert() 未定义，但我只是想证明我可以加载并执行远程代码）。

我想这个故事的寓意是清除相关的**javascript控制台**错误......

# nhibernate - Fluent nHibernate，Hi-Lo 表，每行实体使用约定

> ID：11402621
> 
> 赞同：5
> 
> 时间：2012-07-09T20:28:58.750
> 
> 标签：nhibernate, fluent-nhibernate

有没有办法通过约定指定用于 Hi-Lo 值的表，每个实体都有一个每行条目（同时仍然让 nHibernate 为您创建表结构）？我想复制 Phil Haydon 在[这里](http://www.philliphaydon.com/2010/10/using-hilo-with-fluentnhibernate/)写的博客，但不必手动管理表格。就目前而言，仅当您已经在表中为“TableKey”创建了适当的条目时，将他的每表行代码迁移到它自己的约定才会起作用。

或者，这可以通过 XML 映射实现吗？

如果所有其他方法都失败了，那么使用自定义生成器的唯一其他合适的选择是，比如[这篇文章](http://daniel.wertheim.se/2011/03/08/nhibernate-custom-id-generator/)吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T20:55:39.477

Fabio Maulo在他的一篇按代码映射的帖子中[谈到了这一点](http://fabiomaulo.blogspot.com/2011/07/nhibernate-playing-with-mapping-by-code.html)。

通过代码示例映射：

```
mapper.BeforeMapClass += (mi, type, map) =>
    map.Id(idmap => idmap.Generator(Generators.HighLow,
        gmap => gmap.Params(new
        {
            table = "NextHighValues",
            column = "NextHigh",
            max_lo = 100,
            where = string.Format(
                "EntityName = '{0}'", type.Name.ToLowerInvariant())
        }))); 
```

对于 FluentNHibernate，您可以执行以下操作：

```
public class PrimaryKeyConvention : IIdConvention
{
    public void Apply(IIdentityInstance instance)
    {
        var type = instance.EntityType.Name;
        instance.Column(type + "Id");
        instance.GeneratedBy.HiLo(type, "NextHigh", "100", 
            x => x.AddParam("where", String.Format("EntityName = '{0}'", type));
    }
} 
```

此外，Fabio 还解释了如何使用它`IAuxiliaryDatabaseObject`来创建 Hi-Lo 脚本。

```
private static IAuxiliaryDatabaseObject CreateHighLowScript(
    IModelInspector inspector, IEnumerable<Type> entities)
{
    var script = new StringBuilder(3072);
    script.AppendLine("DELETE FROM NextHighValues;");
    script.AppendLine(
        "ALTER TABLE NextHighValues ADD EntityName VARCHAR(128) NOT NULL;");
    script.AppendLine(
        "CREATE NONCLUSTERED INDEX IdxNextHighValuesEntity ON NextHighValues " 
        + "(EntityName ASC);");
    script.AppendLine("GO");

    foreach (var entity in entities.Where(x => inspector.IsRootEntity(x)))
    {
        script.AppendLine(string.Format(
         "INSERT INTO [NextHighValues] (EntityName, NextHigh) VALUES ('{0}',1);",
         entity.Name.ToLowerInvariant()));
    }

    return new SimpleAuxiliaryDatabaseObject(
        script.ToString(), null, new HashedSet<string> {
           typeof(MsSql2005Dialect).FullName, typeof(MsSql2008Dialect).FullName 
        });
} 
```

你会像这样使用它：

```
configuration.AddAuxiliaryDatabaseObject(CreateHighLowScript(
    modelInspector, Assembly.GetExecutingAssembly().GetExportedTypes())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:51:42.927

对于 Fluent NHibernate 的用户，Anthony Dewhirst 在这里发布了一个不错的解决方案：[http ://www.anthonydewhirst.blogspot.co.uk/2012/02/fluent-nhibernate-solution-to-enable.html](http://www.anthonydewhirst.blogspot.co.uk/2012/02/fluent-nhibernate-solution-to-enable.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-27T15:02:16.930

在 Anthony Dewhirst 已经非常出色的解决方案的基础上，我得到了以下结果，它增加了一些改进：

*   添加验收标准，以便它不会尝试处理非整数 Id 类型（例如 Guid），并且不会踩踏具有显式设置的生成器的 Id 映射
*   脚本生成考虑了方言

```
public class HiLoIdGeneratorConvention : IIdConvention, IIdConventionAcceptance
{
    public const string EntityColumnName = "entity";
    public const string MaxLo = "500";

    public void Accept(IAcceptanceCriteria<IIdentityInspector> criteria)
    {
        criteria
            .Expect(x => x.Type == typeof(int) || x.Type == typeof(uint) || x.Type == typeof(long) || x.Type == typeof(ulong)) // HiLo only works with integral types
            .Expect(x => x.Generator.EntityType == null); // Specific generator has not been mapped
    }

    public void Apply(IIdentityInstance instance)
    {
        instance.GeneratedBy.HiLo(TableGenerator.DefaultTableName, TableGenerator.DefaultColumnName, MaxLo,
                                  builder => builder.AddParam(TableGenerator.Where, string.Format("{0} = '{1}'", EntityColumnName, instance.EntityType.FullName)));
    }

    public static void CreateHighLowScript(NHibernate.Cfg.Configuration config)
    {
        var dialect = Activator.CreateInstance(Type.GetType(config.GetProperty(NHibernate.Cfg.Environment.Dialect))) as Dialect;
        var script = new StringBuilder();

        script.AppendFormat("DELETE FROM {0};", TableGenerator.DefaultTableName);
        script.AppendLine();
        script.AppendFormat("ALTER TABLE {0} {1} {2} {3} NOT NULL;", TableGenerator.DefaultTableName, dialect.AddColumnString, EntityColumnName, dialect.GetTypeName(SqlTypeFactory.GetAnsiString(128)));
        script.AppendLine();
        script.AppendFormat("CREATE NONCLUSTERED INDEX IX_{0}_{1} ON {0} ({1} ASC);", TableGenerator.DefaultTableName, EntityColumnName);
        script.AppendLine();
        if (dialect.SupportsSqlBatches)
        {
            script.AppendLine("GO");
            script.AppendLine();
        }
        foreach (var entityName in config.ClassMappings.Select(m => m.EntityName).Distinct())
        {
            script.AppendFormat("INSERT INTO [{0}] ({1}, {2}) VALUES ('{3}',1);", TableGenerator.DefaultTableName, EntityColumnName, TableGenerator.DefaultColumnName, entityName);
            script.AppendLine();
        }
        if (dialect.SupportsSqlBatches)
        {
            script.AppendLine("GO");
            script.AppendLine();
        }

        config.AddAuxiliaryDatabaseObject(new SimpleAuxiliaryDatabaseObject(script.ToString(), null));
    }
} 
```

# playframework-2.0 - 如何使用 PlayFramework 压缩 html

> ID：11402624
> 
> 赞同：6
> 
> 时间：2012-07-09T20:29:18.680
> 
> 标签：playframework-2.0

为了提高 Scala 表单的可读性，我经常使用缩进和换行。但是，当我在我的 play 应用程序启动并运行时验证 HTML 时，我会看到很多空格和不必要的换行符。有什么理由在不“使我的 scala 模板不可读”的情况下压缩这个 HTML 吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T09:00:44.573

正如在另一个答案中所说，框架中没有任何内容可以缩小您的 HTML。

为此，您必须使用像[Nginx](http://wiki.nginx.org/Main)这样的前端 HTTP 服务器。你应该看看[strip module](http://wiki.nginx.org/HttpStripModule)。

您还应该问自己这种缩小是否真的有用。压缩您的答案将减小其大小。在 HTML 上添加缩小（我从未见过）似乎为时过早的优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-11T12:17:24.630

它确实存在 HTML 压缩并且正在使用：[https ://code.google.com/p/htmlcompressor/](https://code.google.com/p/htmlcompressor/)

对于 play 2.x，您可以使用[此过滤器](https://github.com/mohiva/play-html-compressor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:13:35.043

当我阅读播放框架文档时，它似乎不支持压缩输出 html。它确实支持压缩静态资产（[在此页面上向下滚动](http://www.playframework.org/documentation/2.0.2/Assets)）。

[也许，如果您在反向代理](http://en.wikipedia.org/wiki/Reverse_proxy)后面运行播放（例如通过 apache 或 nginx），我认为您可以让代理压缩您的 html。（这可能值得另一个问题。）

# jquery - 如何很好地构建具有重复元素的表单

> ID：11402627
> 
> 赞同：6
> 
> 时间：2012-07-09T20:29:27.157
> 
> 标签：jquery, python, html, flask, wtforms

标题真的没有说出来，因为我无法总结这个问题。所以这里有很长的解释：

假设我要添加多个联系人的信息，并且我有以下字段：

*   联系人姓名
*   联系方式（电子邮件、电话号码、即时消息）
    *   如果电子邮件：显示电子邮件字段（假设此字段存在）
    *   如果电话号码：显示电话号码字段
    *   如果是即时消息：显示文本字段

所以马上，我将需要 JavaScript 在页面本身上完成此操作（添加或删除联系人字段），我可以接受。但是，由于我可以添加多个联系人（作为软件开发人员，我不知道用户要添加多少个联系人，可能是 1、10 或 100）

所以我最大的问题是我将如何构建每个字段的名称等内容。我应该把所有东西都扔进`names[]`,`contactmethods[]`并按顺序访问东西，还是有更好的解决方案。

另外，如果服务器开始验证这些信息，并发现一些格式错误的信息，我希望能够将客户端发送到服务器的数据发送回客户端，这样他们就不会丢失他们拥有的一切进入。我将如何轻松地做到这一点？

一些背景信息：当前使用的技术（相关）：

*   烧瓶
*   jQuery
*   WTForms

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T03:26:57.607

无需构建任何东西（至少在服务器端） - WTForms 已经支持您需要的东西 - 它称它们为[“字段附件”](http://wtforms.readthedocs.org/en/latest/fields.html#field-enclosures)。您正在寻找的行为是在[`wtforms.fields.FormField`](http://wtforms.readthedocs.org/en/latest/fields.html#wtforms.fields.FormField)和[`wtforms.fields.FieldList`](http://wtforms.readthedocs.org/en/latest/fields.html#wtforms.fields.FieldList)

```
class ContactForm(Form):
    name = TextField("Name", validators=[Required()])
    contact_type = SelectField("Contact Type",
                                validators=[Required()],
                                choices=[
                                    ("email", "Email"),
                                    ("phone", "Phone Number"),
                                    ("im", "Instant Message")
                                ])
    # `If` is a custom validator - see below
    email_address = TextField("Email",
                                  validators=[If("contact_type",
                                                     "email",
                                                     [Required(), Email()])
                                  ])
    phone_number = TextField("Phone #",
                                  validators=[If("contact_type",
                                                           "phone", [Required()])
                                  ])
    im_handle = TextField("IM Handle",
                                  validators=[If("contact_type",
                                                           "im", [Required()])
                                  ])

class SignUpForm(Form):
    # Other fields go here
    contacts = FieldList(FormField(ContactForm)) 
```

根据用户的选择，您还需要一个[自定义验证器](http://wtforms.readthedocs.org/en/latest/validators.html#custom-validators)来验证相应的字段：

```
# CAUTION: Untested code ahead
class If(object):
    def __init__(self,
                      parent,
                      run_validation=None,
                      extra_validators=None,
                      msg=None):
        self.parent = parent
        self.msg = msg if msg is not None else u"Invalid"
        if callable(run_validation):
            self.run_validation = run_validation
        else:
            _run_validation = lambda self, parent, form: parent.data == run_validation
            self.run_validation = _run_validation
        self.extra_validators = extra_validators if extra_validators is not None \
                                                     else []

    def __call__(self, field, form):
        parent = getattr(form, self.parent)
        if self.run_validation(parent, form):
            return field.validate(form, extra_validators=self.extra_validators) 
```

当您`form.validate()`在服务器端调用时，将根据要求自动检查字段，并适当地填充错误，以便您可以将它们呈现回客户端。

在客户端创建新字段很简单，只要您[使用它使用的相同命名约定命名](https://bitbucket.org/simplecodes/wtforms/src/1939aec691af476960dfe16b4e17ba4fc070459b/wtforms/fields/core.py?at=default#cl-864)，WTForms 就会在后端提取它们- 即`field.short_name + '-' + index`.

# jdbc - 如何使用 Windows 身份验证从运行在 Linux 上的 Jasper 服务器到 SQL Server

> ID：11402628
> 
> 赞同：2
> 
> 时间：2012-07-09T20:29:28.283
> 
> 标签：jdbc, active-directory, jasper-reports, jasperserver

我在 Linux 上运行 Jasper Server 4.5.0 64 位。

Jasper Server 插入的众多数据源之一是没有可用的本地 SQL 身份验证参数的 SQL Server。

如何使用 Active Directory 帐户而不是本地 SQL 帐户连接到数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:30:01.793

**假设：** REMOTE_IP 是 sql server 绑定到端口 1433 监听 tcp/ip 流量的 ip 地址。数据库名称是*jasper*。

我们将使用名为[jTDS](http://jtds.sourceforge.net/)的产品来连接 SQL Server，而不是使用普通的 ole sqljdbc.jar 驱动程序连接到SQL Server。这是因为它允许 JDBC 使用 Windows 身份验证模式而不是 SQL 模式连接到 SQL 服务器。

脚步：

1）安装碧玉服务器4.5.x

2）获取 jTDS 1.2.5（或任何最新的应该工作）。

> 您可能已经注意到该 jTDS 包中有一些 DLL。不用担心！该驱动程序仍然适用于 Linux。当然，您不能像 Windows 那样在 Linux 中进行单点登录。

将 jtds-*.jar 解压到 $jasperserver/apache-tomcat/lib

3）编辑`$jasperserver/apache-tomcat/conf/Catalina/localhost/jasperserver.xml`并在之前添加以下元素`</Context>`

```
<Resource name="jdbc/sqlserver"
             auth="Container"
             type="javax.sql.DataSource"
             driverClassName="net.sourceforge.jtds.jdbc.Driver"
             url="jdbc:jtds:sqlserver://REMOTE_HOST:1433;DatabaseName=jasper;useCursors=false;domain=COM;username=Administrator;password=XXXXXXX;user=Administrator"
             user="Administrator"
             password="XXXXXXX"
             maxActive="20"
             maxIdle="20"
             maxWait="60000"
             removeAbandoned="true"
             logAbandoned="true"         
             removeAbandonedTimeout="300"
             validationQuery="SELECT 1"/> 
```

4）编辑并为新数据源`$jasperserver/apache-tomcat/webapps/jasperserver/WEB-INF/web.xml`添加一个新的：`<resource-ref>`

```
 <resource-ref>
     <description>Connection Description</description>
     <res-ref-name>jdbc/sqlserver</res-ref-name>
     <res-type>javax.sql.DataSource</res-type>
     <res-auth>Container</res-auth>
   </resource-ref> 
```

5) 创建一个新的数据库名称“jasper”，并向您希望使用的 Active Directory 帐户授予读取*权限。

6) 运行此脚本以进行测试：

```
create table test (test varchar(50) NULL) 
insert into test values ('1')
insert into test values ('2')
insert into test values ('3') 
```

7）新建一个JSP文件 `$jasperserver/apache-tomcat/webapps/jasperserver/test.jsp`

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<sql:query var="rs" dataSource="jdbc/sqlserver">
  select test from test
</sql:query>

<html>
  <head>
    <title>DB Test</title>
  </head>
  <body>
    <h2>Results</h2>

    <c:forEach var="i" items="${rs.rows}">
      Text Message: <c:out value="${i.test}"/><br>
    </c:forEach>
  </body>
</html> 
```

8) 启动 jasperserver 的 tomcat。登录并测试`http://localhost:8080/jasperserver/test.jsp`

您应该会看到测试表中的第 1、2 和 3 行。

如果它不起作用...查看前面的步骤，看看出了什么问题。

9) 只需转到：数据源 -> 新数据源 -> 类型：JNDI 数据源，即可创建一个 jasper 服务器 JNDI 数据源。-> JNDI 查找是：`/jdbc/sqlserver`

创建您的表格并测试您的报告。

# android - ListView smoothScrollToPosition() 的替代方案？

> ID：11402630
> 
> 赞同：0
> 
> 时间：2012-07-09T20:29:42.107
> 
> 标签：android

我有一个可能有数百个条目的 ListView。当进行选择时，我一直在使用 smoothScrollToPosition，因此：

```
if (lv != null) { //Are we created yet?
    lv.post(new Runnable() {
        public void run() {
            lv.smoothScrollToPosition(k);  
        }
    });
} 
```

但我的用户告诉我他们不喜欢滚动动画，更愿意立即去那里。所以我用我的平滑滚动替换了

```
lv.setSelection(k); 
```

...现在它什么都不做。FWIW 这一切都发生在 **notifyDatasetChanged之后**

在寻找解决方案时，我在[http://code.google.com/p/android/issues/detail?id=6741](http://code.google.com/p/android/issues/detail?id=6741)上遇到了这个讨论， 这意味着这是一个已知问题。有解决方法还是我做错了？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:51:23.360

setSelection 的文档说它仅在 ListView 处于触摸模式时滚动到所选位置。一旦数据集发生变化，可能 ListView 不再处于触摸模式，或者可能只是在下一个 UI 更新周期中忘记了 setSelection。

我想您可以通过延迟调用 setSelection 来尝试解决方法。例如，您可以使用延迟 100 毫秒的 postDelayed 方法。或者，您可以扩展 ListView 并覆盖 layoutChildren 或在数据集更改时可能会调用的相关内容，以便重新计算列表视图项测量值。那时调用 setSelection 应该是安全的，您不需要依赖猜测延迟。

# python - NLTK Maxent 中的 Set_Weights？

> ID：11402632
> 
> 赞同：1
> 
> 时间：2012-07-09T20:29:59.543
> 
> 标签：python, machine-learning, nlp, nltk

我想知道 NLTK 中 Maxent 类的 set_weights 方法是用来做什么的（或者更具体地说是如何使用它）。据我了解，它允许您手动为某些功能分配权重？有人可以提供将传递给它的参数类型的基本示例吗？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:56:36.953

它显然允许您设置分类器的系数矩阵。如果您有一个可以导出系数的外部 MaxEnt/逻辑回归学习包，这可能会很有用。`train_maxent_classifier_with_gis`和`train_maxent_classifier_with_iis`学习算法调用这个函数。

如果你不知道什么是系数矩阵；这是[维基百科对 MaxEnt 的处理中](https://en.wikipedia.org/wiki/Multinomial_logit#Model)提到的 β 。

（说实话，看起来 NLTK 要么在这里泄露了实现细节，要么有一个非常糟糕的 API 文档。）

# java - GSON 没有被导入到 Maven 项目中

> ID：11402633
> 
> 赞同：7
> 
> 时间：2012-07-09T20:30:01.290
> 
> 标签：java, json, servlets, maven, gson

我收到以下错误 - 我在依赖项中添加了 GSon -

有人可以指出我做错了什么吗？

![在此处输入图像描述](../Images/010cf4b4f896f3fa9b74e556ffd0dece.png)

编辑：指定的依赖项-

```
 <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>1.7.1</version>
    </dependency> 
```

我在我的 sevlet 中使用以下代码 -

```
 JSONService json = new JSONService();
    String json_output = json.makeLoginJSON(user); 
```

makeLoginJSON ---

```
 public String makeLoginJSON(LoginDetails user) {
    String FinalJson = null;
    Gson gson = new Gson();
    FinalJson = gson.toJson(user);      
    return FinalJson;       
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-09T20:57:20.923

尝试：

```
<dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
</dependency> 
```

我已经编辑了我的评论并添加了范围。默认范围是*compile*，这意味着在运行时不存在依赖项。为此，您使用*提供*的范围。更多关于 Apache 的Maven 依赖项[简介的 Maven 依赖项](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)中的范围。

希望这能解决您的问题。

PS：如果你正在创建自己的存储库，你也应该看看[这里](https://stackoverflow.com/questions/10760667/java-lang-noclassdeffounderror-com-google-gson-gson)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-20T00:31:24.610

只是对 Raul 的回答的澄清 - 它对您有用，但*提供*的是预期可从 JRE/JDK 获得的依赖项，即 servlet 类。编译是默认设置，应该在其他人的情况下工作，因为 gson 不能从 JRE 获得，而是需要由 maven 下载。从[http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)：

**compile** 这是默认范围，如果没有指定，则使用。编译依赖项在项目的所有类路径中都可用。此外，这些依赖关系会传播到依赖项目。

**提供** 这很像编译，但表示您希望 JDK 或容器在运行时提供依赖项。例如，在为 Java Enterprise Edition 构建 Web 应用程序时，您可以将 Servlet API 和相关 Java EE API 的依赖设置为提供的范围，因为 Web 容器提供了这些类。此范围仅在编译和测试类路径上可用，并且不可传递。

**运行时** 这个范围表示编译不需要依赖，但执行。它在运行时和测试类路径中，但不在编译类路径中。

**test** 这个范围表示应用程序的正常使用不需要依赖，只在测试编译和执行阶段可用。

**system** 此范围类似于提供的范围，只是您必须提供明确包含它的 JAR。工件始终可用，不会在存储库中查找。

**import**（仅在 Maven 2.0.9 或更高版本中可用）此范围仅用于该部分中 pom 类型的依赖项。它指示应将指定的 POM 替换为该 POM 部分中的依赖项。由于它们被替换，具有导入范围的依赖项实际上并不参与限制依赖项的传递性。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-09-16T03:26:38.770

添加这些导入：

```
import com.google.gson.Gson;
import com.google.gson.GsonBuilder; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-09T23:02:46.297

尝试：

```
<dependency>
     <groupId>com.alibaba</groupId>
     <artifactId>fastjson</artifactId>
     <version>1.1.21</version>
</dependency> 
```

非常快，使用简单。

```
VO obj = ...;
String jsonString = JSON.toJSONString(obj);

VO obj2 = JSON.parseObject(jsonString, VO.class); 
```

# java - 我如何保证一个会话？

> ID：11402635
> 
> 赞同：3
> 
> 时间：2012-07-09T20:30:03.083
> 
> 标签：java, jsessionid

我需要**防止出现**以下情况： 1\. 同一个用户帐户存在两个不同的 JSESSIONID，或者 2\. 单个浏览器的两个选项卡引用相同的 JSESSIONID。

有什么建议么？如果检测到现有会话，用户可以： a) 退出第二次尝试 b) 终止现有会话（刺客！）并开始新会话。

首选是服务器端解决方案。也就是说，我不想依赖用户关闭 cookie 来强制 JSESSIONID 进入 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:34:49.760

在每个页面中嵌入一个带有唯一标记的隐藏`input`字段听起来像是此类问题的唯一解决方案。这似乎是区分一个标签与另一个标签的唯一方法，即使它们是完全相同的 URL。

但请记住，您正在做的事情似乎是非常糟糕的做法。阻止用户使用多个选项卡的任何特殊原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:53:32.453

第 1 部分可以使用单例模式来完成，该模式根据用户 SID 的映射检查用户的当前 sessionid。

第 2 部分，可以在事务性 webapps 中理解，您需要确保用户读取正确的信息（而不是一个带有旧值的选项卡和一个带有新值的选项卡 - 场景）......它可以使用相同的 sessionid映射，将其注入 dom 并使用 javascript 验证它。

编辑。第 2 部分验证可以在针对 client-sessionid 映射的过滤器中做得更好。并且对象的正确定义保证了真正唯一的单例实例存在。

# c# - SendKey.Send() 不工作

> ID：11402643
> 
> 赞同：7
> 
> 时间：2012-07-09T20:30:36.350
> 
> 标签：c#, wpf, forms

我正在使用 WPF 并导入了 System.Windows.Form 参考。这是我的代码：

```
Process[] process = Process.GetProcessesByName("wmplayer");
SetForegroundWindow(process[0].MainWindowHandle);
Thread.Sleep(200);
System.Windows.Forms.SendKeys.Send("^p"); 
```

Windows Media Player 进行焦点操作，但未接收到击键。为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T21:14:12.853

您可以使用 WinAPI 代替 SendKeys：

```
[DllImport("user32.dll", SetLastError = true)]
static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, UIntPtr dwExtraInfo);
public static void PressKey(Keys key, bool up) {
    const int KEYEVENTF_EXTENDEDKEY = 0x1;
    const int KEYEVENTF_KEYUP = 0x2;
    if (up) {
        keybd_event((byte) key, 0x45, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, (UIntPtr) 0);
    }
    else {
        keybd_event((byte) key, 0x45, KEYEVENTF_EXTENDEDKEY, (UIntPtr) 0);
    }
}

void TestProc() {
    PressKey(Keys.ControlKey, false);
    PressKey(Keys.P, false);
    PressKey(Keys.P, true);
    PressKey(Keys.ControlKey, true);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T23:13:38.537

在 WPF 应用程序中，您必须改用[SendKeys.SendWait()](http://msdn.microsoft.com/de-de/library/system.windows.forms.sendkeys.sendwait.aspx)（[*英文文档*](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.sendwait.aspx)）。

只是仔细检查了一下，虽然 Send() 正在为 WinForms 应用程序工作，但 WPF 会抛出一个 InvalidOperationException，尽管两者都针对 .net 4.0。

检查上面的链接以获取更多信息。

# asp.net-mvc-3 - .NET MVC3 路由 - 为什么如此混乱？

> ID：11402645
> 
> 赞同：1
> 
> 时间：2012-07-09T20:30:52.890
> 
> 标签：asp.net-mvc-3, url-routing, asp.net-mvc-routing

我不知道为什么我一直在为此苦苦挣扎，但是有人可以解释为什么这不起作用吗？

`/`重定向到控制器的`index`操作。`home`

`/gallery/`抛出 404 not found 错误。

`/gallery/index`重定向到控制器的`index`操作。`gallery`

从[文档](http://msdn.microsoft.com/en-us/library/cc668201.aspx)中：

> 定义路由时，可以为参数分配默认值。如果 URL 中不包含该参数的值，则使用默认值。您可以通过将字典对象分配给 Route 类的 Defaults 属性来设置路由的默认值。

我不明白这怎么不符合这条规则：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
        );
    } 
```

对我来说，它是这样写的：

*   如果 a`controller`未定义，请使用`Home`.
*   如果`action`未定义 an，请使用`Index`.
*   输入的 URL 包含一个控制器 = ，并且**URL 中不包含**`gallery`一个操作，因此它应该转到.**`Index`**

 **我是否遗漏了某些东西或这不必要的混乱和愚蠢？

我一直发现 MVC3 路由有问题，但接受了它。然后我开始使用 Rails 和 Node 框架，它们的路由非常简单，所以现在 .NET MVC 只是在它不起作用或让我使用复杂模式时让我烦恼。

以供参考，以防有人问起，当我浏览到`/gallery/index`.

```
public class GalleryController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T21:19:07.923

You definitively oughta be doing something wrong or there is some code you haven't shown us. Perform the following steps:

1.  Create a new ASP.NET MVC 3 application using the default wizard (*Internet Application*)
2.  Replace the contents of `HomeController.cs` with this:

    ```
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return Content("home/index");
        }
    }

    public class GalleryController : Controller
    {
        public ActionResult Index()
        {
            return Content("gallery/index");
        }
    } 
    ```

3.  Hit `F5`

Here's what happens:

```
requested url    |   result
-----------------+---------------
/                |   home/index
/home            |   home/index
/home/           |   home/index
/home/index      |   home/index
/home/index/     |   home/index
/gallery         |   gallery/index
/gallery/        |   gallery/index
/gallery/index   |   gallery/index
/gallery/index/  |   gallery/index 
```

Exactly as expected, isn't it?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:17:05.147

问题是我有一个隐藏目录（未包含在我的解决方案中）与我的错误路线同名：`/gallery`.

幸运的是，今天早上我太累了，无法打我的显示器。

感谢大家的建议，所有 +1 的有用指导。

PS。为了帮助我调查问题，我使用了[Phil Haack 的路由调试器](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)。**

# mysql - 使用来自其他表主键的所有外键填充表

> ID：11402646
> 
> 赞同：2
> 
> 时间：2012-07-09T20:30:54.977
> 
> 标签：mysql, sql, django, oracle, bulkinsert

我正在开发一个 Django 应用程序并创建了一个新表`tblA`，该表有一个外键链接到`tblB`.

现在`tblB`已经有几个条目（因此已经有几个主键）。

我想运行一个 SQL 查询，该查询将为`tblA`内部的每个主键创建一个新行，`tblB`并复制相应的外键并将所有其他列的默认值`tblB`插入行中。

我希望我足够清楚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:50:05.670

你忘了粘贴你的表格结构..我正在考虑如下 -

tblA（aCol1_PK（主键），acol2_desc（描述））

截至目前，仅以两列为例。

现在对于表 B

tblB ( bCol1, bCol2, bCol3_FK (外键) )

现在假设您有默认值 -

bCol1 - “B_Col1_default_val” bcol2 - “B_Col2_default_val”

对于这种情况，如果您想从表 A 中插入表 B 中不存在的 p_key 行，您可以尝试以下查询 -

```
insert into tblB(col1,col2,col3) 
 ( select 'b_col_default_val','b_col_default_val', acol1_pk 
     from tbla a 
    where a.acol1_pk not in ( select b.bcol3_fk from tblb b)) 
```

如果要为表 A 中存在的所有主键值插入一行，则 -

```
insert into tblB(col1,col2,col3) 
 ( select 'b_col_default_val','b_col_default_val', acol1_pk 
     from tbla a ) 
```

我希望它会对您有所帮助..如果您需要任何澄清，您可以询问/评论。

# fortran90 - 一个简单的可选参数如何导致数据损坏？

> ID：11402647
> 
> 赞同：1
> 
> 时间：2012-07-09T20:31:02.220
> 
> 标签：fortran90, pgf

我有一个带有例程的 FORTRAN 代码：

```
SUBROUTINE READ_NC_VALS(NCID, RECID, VARNAME, VARDATA)
integer ncid, recid
character*(*) varname
real*8 vardata
dimension vardata(15,45,75)

etc. 
```

我想为这段代码增加一些灵活性，我想我会先添加一个可选的标志参数来做到这一点：

```
SUBROUTINE READ_NC_VALS(NCID, RECID, VARNAME, VARDATA, how_to_calculate)

! everything the same and then ...
logical, optional :: how_to_calculate 
```

现在，在这一点上，我什至没有使用“how_to_calculate”。我只是将其放入代码中进行测试。所以我毫不费力地编译了代码。然后我运行它，我在子程序中得到一个错误。具体来说，稍后代码中的某些值会“神奇地”从没有该可选参数的情况下改变。新值对代码的逻辑没有意义，因此它会礼貌地退出并显示错误消息。让我再次强调，在这一点上，我什至没有使用这个*可选*争论。因此，在云雀中，我回到源代码中调用这个例程的所有地方，即使我的新参数是可选的，我在所有调用中都为其输入了值。当我这样做时，代码运行良好。那么这是什么一回事？仅在子例程中存在未使用的可选参数怎么会导致其他数据被破坏？为这个可选参数添加输入参数如何再次解决问题？顺便说一下，这是用 PGI 编译的。

有任何想法吗？谢谢。

顺便说一句，很抱歉没有提供更多代码。如果我这样做，我的老板可能对我不太满意。我不制定规则；我只是在这里工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:53:08.687

Fortran 中的可选参数是通过`0`为每个调用子例程没有提供值的可选参数传递（空指针）来实现的。因此，采用可选参数的子例程必须：

*   `INTERFACE`要么在调用子程序中有明确的定义
*   或者是一个模块级的子程序（它们的接口是自动生成的）

如果您向子例程添加一个可选参数，但它在调用者中既没有接口也不是模块级子例程，那么编译器将不会生成正确的调用序列 - 它会传递比预期更少的参数。这可能会在 Unix 系统上造成问题，其中 PGI`CHARACTER*(*)`在参数列表的末尾传递所有参数的长度（在 Windows 上，它将长度作为字符串地址之后的下一个参数传递）。一个缺失的参数会改变堆栈中的长度参数位置（或将它们放在 x64 上的错误寄存器中），从而`VARNAME`导致`READ_NC_VALS`. 这可能导致各种不良行为，包括覆盖内存和“神奇地”更改不应根据程序逻辑更改的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T22:47:49.007

显然，只需向子例程添加一个虚拟参数，无论有无`optional`属性，都不会导致任何问题。但是，可能发生的情况是，更改暴露了代码的其他一些问题，这些问题已经存在，但没有造成任何明显的不良影响。

没有更多的代码，我们所能做的就是猜测，这通常不是很有用。想到的一件事是在使用可选参数时显式接口的必要性。代码是否组织成模块？

# html - 如果宽度为 100% 且主体有边框边距，则定义正确位置的最佳方法

> ID：11402648
> 
> 赞同：0
> 
> 时间：2012-07-09T20:31:04.627
> 
> 标签：html, width

我想在网站的右侧有一行文字。

body 的宽度设置为 100%，body 的 margin-left 也为 20px。

如果我现在将宽度设置为继承并将文本对齐设置为“右”。文本行略微超出右侧浏览器边框。因为也传递了 20px 的边距。

因为我不能把 widht= inherit - 20px 或继承 - margin-left(ofbody)

解决这个问题的最优雅的方法是什么？

一如既往地再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:40:40.437

Try `position:absolute` with `left:0px; right -20px;`.

(This is what I gather your problem is, although some example HTML and CSS would make your question clearer.)

# java - 调试合并排序实现

> ID：11402651
> 
> 赞同：-3
> 
> 时间：2012-07-09T20:31:11.193
> 
> 标签：java, algorithm, sorting, mergesort

好的，我知道这个问题并没有显示出研究工作，但是我已经多次浏览了这段代码，但我不知道我做错了什么。我知道有很多 Mergesort 实现示例，但我想按照我的方式来做。任何帮助表示赞赏，谢谢。

```
import java.util.Scanner;
public class MergeSort
{
    public static int[] mergeSort(int[] arr)
    {
        if (arr.length > 1)
        {
            int[] arr1 = splitLeft(arr);
            int[] arr2 = splitRight(arr);
            arr1 = mergeSort(arr1);
            arr2 = mergeSort(arr2);
            return merge(arr1, arr2);
        }
        else
            return arr;
    }

    public static int[] splitLeft(int[] arr)
    {
        int middle = arr.length / 2;
        int[] newarr = new int[middle];
        for (int i = 0; i < middle; i++)
            newarr[i] = arr[i];
        return newarr;
    }

    public static int[] splitRight(int[] arr)
    {
        int middle = arr.length / 2;
        int[] newarr = new int[arr.length - middle];
        for (int i = 0; i + middle < arr.length; i++)
            newarr[i] = arr[i + middle];
        return newarr;
    }

    public static int[] merge(int[] arr1, int[] arr2)
    {       
        int[] sorted = new int[arr1.length+arr2.length];

        int i1 = 0;
        int i2 = 0;
        int i = 0;

        while (i1 < arr1.length && i2 < arr2.length)
        {
            if (arr1[i1] < arr2[i2])
            {
                sorted[i] = arr1[i1];
                i1++;
            }

            else
            {
                sorted[i] = arr2[i2];
                i2++;
            }
        i++;
        }

        while (i1 < arr1.length) 
        {
            sorted[i] = arr1[i1];
            i1++;
            i++;
        }

        while (i2 < arr2.length) 
        {
            sorted[i] = arr1[i2];
            i2++;
            i++;
        }
        return sorted;
    }

    public static int getNum(int x)
    {
        int num = (int)(Math.random()*x + 1);
        return num;
    }

    public static void printArr(int[] arr)
    {
        System.out.println();
        for (int i = 0; i < arr.length; i++)
            System.out.println(arr[i]);
    }

    static Scanner reader = new Scanner(System.in);
    public static void main(String [ ] args)
    {
        int i;

        System.out.println("Type the length of the array");
        int n = reader.nextInt();

        System.out.println("Type the range of the random numbers generator");
        int range = reader.nextInt();

        int[]arr = new int[n];

        for (i = 0; i < n; i++)
            arr[i] = getNum(range);

        printArr(arr);

        int[] sorted = new int[n];
        sorted = mergeSort(arr);

        printArr(sorted);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:35:45.923

我认为问题出在你的`splitRight`功能上。考虑这段代码：

```
for (int i = middle; i < arr.length; i++)
    newarr[i] = arr[i]; 
```

这试图将第`i`th 元素从`arr`的`i`第 th 位置复制`newarr`，但这是不正确的。例如，如果数组`arr`有 10 个元素，您希望将元素 5 复制`arr`到 的位置 0 `newArr`，将元素 6复制`arr`到 的位置 1 `newarr`，等等。

要解决此问题，请考虑尝试以下操作：

```
for (int i = 0; i + middle < arr.length; i++)
    newarr[i] = arr[i + middle]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:36:20.980

当你这样做

```
for (int i = middle; i < arr.length; i++)
            newarr[i] = arr[i]; 
```

您肯定是在询问原始数组中的位置，同时在新数组中寻找它们（恰好更短）。

# python - Python选项卡创建

> ID：11402654
> 
> 赞同：1
> 
> 时间：2012-07-09T20:31:18.610
> 
> 标签：python, printing, tabs, indentation, creation

好吧，我是 python 新手，用这种语言创建简单的选项卡让我有些困惑。我正在尝试获得这样的选项卡式输出：

```
:0.1
  A:0.1
  :0.9
    H:2.2
    I:3.0
    B:0.2
  :0.5
    C:0.3
    D:0.4 
```

它是一个节点的名字，冒号，':'，和它对应的距离，没有名字的节点用'None'表示，因为它们只表示到另一个变量的距离。这是一个树形设计，因此标签和缩进可能会有所不同。我从一个

```
self.name 
```

表示名称变量，以及

```
self.distance 
```

代表距离

信息的未缩进输出如下所示：

```
A : 0.1
H : 2.2
I : 3.0
B : 0.2
None : 0.9
C : 0.3
D : 0.4
None : 0.5
None : 0.1 
```

应该有3个级别的缩进，

根，'：0.1'，

'A:0.1' 的 3 个孩子；':0.9'; ':0.5',

和'：0.9'和'：0.5的孩子，H，I，B，C和D

如果这没有足够的信息，我很抱歉，我只是不确定如何创建一个基本的选项卡式输出，就像我上面显示的那样。

谢谢！

编辑：收到我的回答谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:04:15.120

假设您有一个树状数据结构。为简单起见，我将在此示例中使用嵌套字典：

```
data = {
    "A": {"value": 0.2, "children": {
            "D": {"value": 0.3, "children": {}},
            "E": {"value": 0.4, "children": {
                    "H": {"value": 0.5, "children": {}},
                    "I": {"value": 0.6, "children": {}}
                }
            }
        }
    },
    "B": {"value": 0.7, "children": {
            "C": {"value": 0.8, "children": {}},
            "D": {"value": 0.9, "children": {}}
        }
    }
} 
```

您可以使用以下递归函数遍历并打印它：

```
from operator import itemgetter

def display(tree, depth=0):
    prepend = "\t" * depth
    for key, val in sorted(tree.items()):
        print "{0}{1}: {2}".format(prepend, key, val['value'])
        if val['children']:
            display(val['children'], depth + 1) 
```

显示以下输出：

```
>>> display(data)
A: 0.2
    D: 0.3
    E: 0.4
        H: 0.5
        I: 0.6
B: 0.7
    C: 0.8
    D: 0.9
>>> 
```

# xpages - 如何报告或显示来自 XSP.partialRefreshPost 调用的错误

> ID：11402658
> 
> 赞同：0
> 
> 时间：2012-07-09T20:31:25.650
> 
> 标签：xpages

我正在为我们应用程序的许多部分使用自定义事件处理程序。Tim Tripcony[在他的博客中](http://www.timtripcony.com/blog.nsf/d6plinks/TTRY-84B6VP)描述了这一点......他很可能（希望）回答这个......

我的代码中的事件处理程序如下所示：

```
 <xp:eventHandler
        id="newbsDoSomething"
        submit="true"
        event="calledbyid"
        refreshMode="complete">
        <xp:this.action>
            <![CDATA[#{javascript:doSomethingFromSomewhere();}]]>
        </xp:this.action>
    </xp:eventHandler> 
```

按钮或其他控件使用如下代码执行这些事件：

```
XSP.partialRefreshPost(("#{id:newbsDoSomething}", {
    params : {
        '$$xspsubmitvalue' : 'something that tells it what to do.'
    },
    onError : function(err) {
            alert('Whatever this method is doing got an error...');
            //I want to report the error here
    },
    onComplete : function() {
        // maybe do something else
    })
}); 
```

当我犯了一个错误（一次在蓝月亮）并且对 AJAX 请求的响应包含堆栈跟踪时。我想放置一个按钮，可以选择在另一个页面中呈现堆栈跟踪。

在 onError 方法中，错误未定义，因此无济于事。我没有看到包含响应的 XSP 对象的属性。我可以在 Firebug 控制台中看到响应，但我该如何务实地得到它呢？

/新人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:59:55.620

问题是 CSJS 函数*XSP* ._ *partialRefresh*检查*onError*参数是否为函数。如果它是一个函数，则在没有所需参数的情况下调用它。

但是，如果您改用字符串，则会对其进行*eval*，因此可以执行以下操作：

```
function myErrHandler(){
    // just do some debugging
    // of ioArgs object 
    var arg = arguments[1];
    var txt = "";
    for( p in arg ){
        txt += p + " -> " + arg[p] + " [" + typeof( arg[p] ) + "]\n";
    }
    alert( txt );
}

XSP.partialRefreshPost("#{id:newbsDoSomething}", {
    onError : 'myErrHandler( arguments[0], arguments[1] )'
}); 
```

希望这可以帮助

斯文

# javascript - 在 span 标记内指定 href 的行数

> ID：11402666
> 
> 赞同：0
> 
> 时间：2012-07-09T20:32:24.360
> 
> 标签：javascript, jquery, html, css, styles

我有一个`<span>`标签，，里面`.lastMessageLink`有一个， 。可以放入的文本可以短到几个字符，也可以长到一个段落，但我想显示最多 4 行文本。`<a>``.lastMessageText``.lastMessageText`

我目前的样式不起作用，是这样的：

```
.lastMessageLink {
    line-height: 1em;
    text-overflow: ellipsis;
    max-height: 4em;
    overflow: hidden;
}

.lastMessageText {
    color: black;
    word-wrap: break-word;
} 
```

这是HTML：

```
<span class="lastMessageLink">
    <a id="undefined" class="lastMessageText" title="now i need a really really long message so that i can test this whole multiple lines thing which is gonna be a problem and a trickier problem than we had initially thought. it's interesting because you'd think a couple css styles would be enough, but we might have to go by characters" href="#conversation:cid=10714&amp;mid=10735">
        now i need a really really long message so that i can test this whole multiple lines thing which is gonna be a problem and a trickier problem than we had initially thought. it's interesting because you'd think a couple css styles would be enough, but we might have to go by characters
    </a>
</span> 
```

我看过[HTML/CSS：指定 <span> 内的行数](https://stackoverflow.com/questions/4748798/html-css-specify-number-of-lines-inside-span)，使用 CSS[将文本长度限制为 n 行](https://stackoverflow.com/questions/3922739/limit-text-length-to-n-lines-using-css)，[使用 CSS 文本溢出来改变设置高度的元素内的文本行数](https://stackoverflow.com/questions/1067166/using-css-text-overflow-to-vary-the-number-of-lines-of-text-within-an-element-of)，以及[如何为固定数量的文本设置元素高度](https://stackoverflow.com/questions/3675623/how-to-set-element-height-for-a-fixed-number-of-lines-of-text)。

我对使用 jQuery 或 Javascript 的解决方案持开放态度，因为我无法仅使用 CSS 取得进展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:40:34.560

网络研究以及一些[以前的堆栈溢出问题](https://stackoverflow.com/questions/8068552/is-it-possible-to-have-text-overflow-ellipsis-without-white-space-nowrap)（[也在这里](https://stackoverflow.com/questions/6572330/is-it-possible-to-use-text-overflowellipsis-on-multiline-text)）表明，除非`white-space: nowrap`设置，否则`ellipsis`不起作用。当然，这意味着*它只适用于一行文本*。

一些可能的 JQuery 插件来弥补：

**三点** [http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/)

**jQuery 文本溢出** [http://www.bramstein.com/projects/text-overflow/](http://www.bramstein.com/projects/text-overflow/)

**自动省略号** [http://pvdspek.github.com/jquery.autoellipsis/](http://pvdspek.github.com/jquery.autoellipsis/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:46:38.483

更改`<span>`为`<div>`，这应该可以解决我认为的问题

# c - 为需要两个行为奇怪的 scanf 提供单个值

> ID：11402667
> 
> 赞同：0
> 
> 时间：2012-07-09T20:32:25.257
> 
> 标签：c, scanf

```
#include<stdio.h>
int main()
{
  int x,y; 
  printf("please input 2 numbers:\n");
  scanf("%d,%d",&x,&y);
  printf("Now the value for x is %d, and value for y is %d",x,y);
  return 1;
} 
```

我输入了两个数字并将它们分开，`,`然后事情按预期工作。

但是如果我给一个数字 2345，就会出现一个奇怪的结果：

现在 x 的值为 3456，y 的值为 32767

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:35:07.533

当您调用 时`scanf()`，您必须检查该函数的返回值以查看它是否成功。在我的系统上，记录了返回分配的输入项的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:54:02.590

这个奇怪的值，是*内存垃圾*。在 C 中，所有未初始化的变量（除了`static`和`extern`）都指向内存垃圾。当你使用这个变量的值时，任何事情都可能发生，你有一个[`UB`](http://en.wikipedia.org/wiki/Undefined_behavior)。你必须初始化这个变量的值并检查返回值[`scanf()`](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)。

正如@Michael Dorst 在评论中提到的那样，设置`x`并`x`设置一些非通用值（例如，-1），并在`scanf()`调用后检查它们的值是否也发生了变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:21:08.737

这是因为您的 scanf 语句。通常，scanf 语句具有这种格式：

```
scanf("%d %d",&x,&y); //without the commas inside the ""'s 
```

但是您已经制作了这种格式：

```
scanf("%d,%d",&x,&y); //with the commas inside the ""'s 
```

这意味着您需要在两个输入之间使用逗号分隔符。

* * *

看下面的试验

TRIAL1：（注：输入为2345）

```
Please input 2 numbers:
2345
Now the value for x is 2345, and value for y is 134513867. 
```

TRIAL2：（注：输入为 23,45）

```
Please input 2 numbers:
23,45
Now the value for x is 23, and the value for y is 45. 
```

TRIAL3：（注：输入为23+45）

```
Please input 2 numbers:
23+45
Now the value for x is 23, and the value for y is 134513867. 
```

因此，根据试验，**scanf("%d,%d",&x,&y);** 要求输入有逗号分隔符。第一次和第三次试验的输出发生了什么，y 变量确实包含垃圾，因为这些 y 值保持不变/未初始化。但似乎 x 变量得到了正确的值，因为你的 scanf 上的第一个 %d 。

# html - HTML - HTML的“CSS媒体查询”行为？

> ID：11402668
> 
> 赞同：1
> 
> 时间：2012-07-09T20:32:26.640
> 
> 标签：html, css, mobile, media-queries

我一直在处理一个页面，该页面具有两种布局，具体取决于用于查看页面的设备的宽度：

```
/*Above is Mobile*/
@media screen and (min-device-width: 600px){
/*Below is Web*/

} 
```

这种方法本质上是在整个页面中使用各种“web”和“mobile”div，并根据任一布局的需要显示、隐藏或更改它们；然而，虽然“web”div 是隐藏的，但它们仍由移动设备加载，可能会减慢页面加载速度。

我的第一个想法是，如果我只能定义“移动”div 而不是“web”div，那么我可以避免加载所有这些附加元素。因此，HTML 是否存在类似于 CSS 媒体查询的方法？或者，有没有办法根据显示页面的设备宽度定义两种不同的 HTML 布局？

* * *

编辑：至少就图像和图形而言，更好的方法可能是使用 CSS 来定义图像而不是 HTML。因此，而不是这样做：

```
<div id="img"><img src="URL"></div> 
```

...并试图隐藏 div，您将采用这种方法：

```
<div id="img"></div> 
```

和...

```
div#img {
background: none;
}

/*Above is Mobile*/
@media screen and (min-device-width: 600px){
/*Below is Web*/

div#img {
background: url(URL);
    height: 400px;
    width: 600px;
}
} 
```

因此，移动版本不加载图像，我们仍然只使用 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:23:08.633

> 或者，有没有办法根据显示页面的设备宽度定义两种不同的 HTML 布局？

这就是采取恕我直言的路线。HTML 没有类似的机制来为视口定义不同的规则集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T18:53:19.333

我认为有一些`js`选择。这段对话有帮助吗？

[在 jQuery 中检测移动设备的最佳方法是什么？](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)

# php - 使用 Objective-C 从服务器获取数据

> ID：11402669
> 
> 赞同：0
> 
> 时间：2012-07-09T20:32:43.350
> 
> 标签：php, objective-c, ios

我正在尝试在 PHP 服务器和 iOS 设备之间建立一个通知系统，就像在 Facebook 应用程序中一样。

我已经知道如何通过 GET 或 POST 发出 PHP 请求并等待响应。但是我想在没有任何请求的情况下接收服务器的响应，这可能吗？还是我应该每 x 秒发出一次请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:35:10.613

查看[Apple 推送通知服务](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)(APNS)。您向 APNS 服务器发送消息，服务器向您指定的设备发送通知。这是 Facebook 等应用程序的标准做法。

当设备收到通知时，它会将其发送到应用程序（如果应用程序正在运行）或提醒用户（如果不是）。用户可以选择启动应用程序，此时会发送通知。然后，该应用程序可以通过联系您的服务器以更新其信息或其他方式进行响应。

# python - 为什么这个正则表达式不是在所有情况下都有效？

> ID：11402673
> 
> 赞同：1
> 
> 时间：2012-07-09T20:33:19.513
> 
> 标签：python, regex

我有一个包含如下条目的文本文件：

```
@markwarner VIRGINIA - Mark Warner 
@senatorleahy VERMONT - Patrick Leahy NO 
@senatorsanders VERMONT - Bernie Sanders 
@orrinhatch UTAH - Orrin Hatch NO 
@jimdemint SOUTH CAROLINA - Jim DeMint NO 
@senmikelee UTAH -- Mike Lee 
@kaybaileyhutch TEXAS - Kay Hutchison 
@johncornyn TEXAS - John Cornyn 
@senalexander TENNESSEE - Lamar Alexander 
```

我编写了以下内容以使用正则表达式删除“否”和破折号：

```
import re

politicians = open('testfile.txt')
text = politicians.read()

# Grab the 'no' votes
# Should be 11 entries
regex = re.compile(r'(no\s@[\w+\d+\.]*\s\w+\s?\w+?\s?\W+\s\w+\s?\w+)', re.I)
no = regex.findall(text)

## Make the list a string
newlist = ' '.join(no)

## Replace the dashes in the string with a space
deldash = re.compile('\s-*\s')
a = deldash.sub(' ', newlist)

# Delete 'NO' in the string
delno = re.compile('NO\s')
b = delno.sub('', a)

# make the string into a list
# problem with @jimdemint SOUTH CAROLINA Jim DeMint
regex2 = re.compile(r'(@[\w\d\.]*\s[\w\d\.]*\s?[\w\d\.]\s?[\w\d\.]*?\s+?\w+)', re.I)
lst1 = regex2.findall(b)

for i in lst1:
    print i 
```

当我运行代码时，它会捕获除了 Jim DeMint 的姓氏之外的 twitter 句柄、状态和全名。我已经说过我想忽略正则表达式的大小写。

有任何想法吗？为什么表达式没有捕捉到这个姓氏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:44:22.127

缺少它是因为他的州名包含两个词：南卡罗来纳州

让你的第二个正则表达式是这样的，它应该有帮助

```
 (@[\w\d\.]*\s[\w\d\.]*\s?[\w\d\.]\s?[\w\d\.]*?\s+?\w+(?:\s\w+)?) 
```

我添加了

```
(?:\s\w+)? 
```

这是一个可选的非捕获组，匹配一个空格后跟一个或多个字母数字下划线字符

[http://regexr.com?31fv5](http://regexr.com?31fv5)显示它正确匹配输入与 NO 和破折号剥离

**编辑：** 如果您希望一个主正则表达式正确捕获和拆分所有内容，请在删除 Nos 和破折号后，使用

```
((@[\w]+?\s)((?:(?:[\w]+?)\s){1,2})((?:[\w]+?\s){2})) 
```

你可以在这里玩：[http ://regexr.com?31fvk](http://regexr.com?31fvk)

完整匹配为 1 美元，Twitter 句柄为 2 美元，州为 3 美元，名称为 4 美元

每个捕获组的工作方式如下：

```
(@[\w]+?\s) 
```

这匹配一个@符号，后跟至少一个但尽可能少的字符，直到一个空格。

```
((?:(?:[\w]+?)\s){1,2}) 
```

这匹配并捕获了 1 个或两个单词，应该是状态。这只适用于下一段，它必须有两个词

```
((?:[\w]+?\s){2}) 
```

准确匹配并捕获两个单词，即定义为尽可能少的字符，后跟一个空格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:39:14.683

```
text=re.sub(' (NO|-+)(?= |$)','',text) 
```

并捕捉一切：

```
re.findall('(@\w+) ([A-Z ]+[A-Z]) (.+?(?= @|$))',text) 
```

或一次全部：

```
re.findall('(@\w+) ([A-Z ]+[A-Z])(?: NO| -+)? (.+?(?= @|$))',text) 
```

# c# - 提交表单时获取查询字符串值...MVC3

> ID：11402675
> 
> 赞同：6
> 
> 时间：2012-07-09T20:33:21.093
> 
> 标签：c#, asp.net-mvc-3

在我的 MVC3 应用程序中，如果我在 url 中输入一个查询字符串值并按回车键，我可以获得我输入的值：

```
localhost:34556/?db=test 
```

我将触发的默认操作：

```
public ActionResult Index(string db) 
```

变量 db 中包含“test”。

现在，我需要提交一个表单并读取查询字符串值，但是当我通过 jQuery 提交表单时：

```
 $('#btnLogOn').click(function(e) {
         e.preventDefault();
             document.forms[0].submit();
         }); 
```

以下是我发送的表格：

```
 @using (Html.BeginForm("LogIn", "Home", new { id="form1" }, FormMethod.Post)) 
```

下面是动作：

```
 [HttpPost]
    public ActionResult LogIn(LogOnModel logOnModel, string db)
    {
        string dbName= Request.QueryString["db"];
     } 
```

变量 dbName 为空，因为 Request.QueryString["db"] 为空，传入的变量 db 也是如此，我不知道为什么。提交表单后，有人可以帮我获取查询字符串变量吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:01:41.000

你可以有类似的东西

控制器：

```
[HttpGet]
public ActionResult LogIn(string dbName)
{
    LogOnViewModel lovm = new LogOnViewModel();
    //Initalize viewmodel here
    Return view(lovm);

}

[HttpPost]
public ActionResult LogIn(LogOnViewModel lovm, string dbName)
{
    if (ModelState.IsValid) {
        //You can reference the dbName here simply by typing dbName (i.e) string test = dbName;
        //Do whatever you want here. Perhaps a redirect?
    }
    return View(lovm);
} 
```

视图模型：

```
public class LogOnViewModel
{
    //Whatever properties you have.
} 
```

编辑：根据您的要求对其进行修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T20:46:55.000

由于您使用的是 POST，因此您要查找的数据位于`Request.Form`而不是`Request.QueryString`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T20:52:03.147

正如@ThiefMaster♦ 所说，在 POST 中你不能有查询字符串，如果你不想将你的数据序列化到一个特定的对象，你可以使用`FormCollection Object`它，这样你就可以得到所有的表单元素传递发布到服务器

例如

```
[HttpPost]
public ActionResult LogIn(FormCollection formCollection)
{
    string dbName= formCollection["db"];

} 
```

# c# - 可以执行通用控制器操作吗？

> ID：11402689
> 
> 赞同：1
> 
> 时间：2012-07-09T20:34:02.213
> 
> 标签：c#, asp.net-mvc-3, parameterized

如果是这样，我如何从我的视图中调用它？

我想到的控制器动作是这样的：

```
public ActionResult UrunYonetimi<T>(int param = 0)
{
   // doing stuff
} 
```

我们能有这样的行动吗？如果是这样，我如何`T`从我的例如`@Url.Action()`调用中指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:45:19.887

我想我已经对这个问题有所了解：

我想我们需要在模型中而不是在控制器中声明我们好的泛型函数，并从那里处理不同的类型。我们可以而且*可能应该*有不同的操作，因此每种模型类型都有不同的 URL，但它们都会从模型中调用相同的函数，只是类型不同。

# c# - C# URL Crawler 没有获得足够的链接？

> ID：11402690
> 
> 赞同：0
> 
> 时间：2012-07-09T20:34:04.767
> 
> 标签：c#

我有以下代码，但是，当我启动它时，我只会缝合以返回一些 URL。

```
while (stopFlag != true)
{
    WebRequest request = WebRequest.Create(urlList[i]);
    using (WebResponse response = request.GetResponse())
    {
        using (StreamReader reader = new StreamReader
           (response.GetResponseStream(), Encoding.UTF8))
        {
            string sitecontent = reader.ReadToEnd();
            //add links to the list
            // process the content
            //clear the text box ready for the HTML code
            //Regex urlRx = new Regex(@"((https?|ftp|file)\://|www.)[A-Za-z0-9\.\-]+(/[A-Za-z0-9\?\&\=;\+!'\(\)\*\-\._~%]*)*", RegexOptions.IgnoreCase);
            Regex urlRx = new Regex(@"(?<url>(http:[/][/]|www.)([a-z]|[A-Z]|[0-9]|[/.]|[~])*)", RegexOptions.IgnoreCase);

            MatchCollection matches = urlRx.Matches(sitecontent);
            foreach (Match match in matches)
            {
                string cleanMatch = cleanUP(match.Value);
                urlList.Add(cleanMatch);

                updateResults(theResults, "\"" + cleanMatch + "\",\n");

            }
        }
    }
} 
```

我认为错误在正则表达式中。

我想要实现的是拉一个网页，然后从该页面获取所有链接 - 将这些链接添加到列表中，然后为每个列表项获取下一页并重复该过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:35:50.923

我建议不要尝试使用[正则表达式来解析 HTML](https://stackoverflow.com/a/1732454/1583)，而是使用一个好的 HTML 解析器 - [HTML Agilty Pack](http://htmlagilitypack.codeplex.com/)是一个不错的选择：

> **什么是 Html Agility Pack (HAP)？**
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

# html - 文本的 Webkit 不透明度转换问题

> ID：11402698
> 
> 赞同：11
> 
> 时间：2012-07-09T20:34:26.597
> 
> 标签：html, css, google-chrome, safari, css-transitions

## 情况：

[查看 jsFiddle](http://jsfiddle.net/ErVYs/1/)

在 a 里面`div`我有一个图像，后面是一个`font-weight`900 的文本。在我本地托管的环境中，我使用的是自定义字体，但对于上面的小提琴，我选择了“非常时尚”的 Comic Sans 来说明我的观点。在发生任何事情之前，我将整个 div 的不透明度设置为 0.7。但是，在将鼠标悬停在 上时`div`，我希望所有内容的不透明度都达到完全不透明度。

## 问题：

我注意到，仅在 Webkit 浏览器中（在 Chrome 上比在 Safari 上更明显），在`div`标签上下悬停时，文本的权重似乎会发生变化。实际上，文本的重量当然没有任何变化。但是，仔细查看后，您会看到文本仅在悬停时以所需的重量出现，而不是在非悬停状态下。

## 我做过的事情：

*   我已经在所有最新版本的 Chrome、Firefox 和 Safari 中对此进行了测试。
*   我目前正在新的 MacBook Pro 上对此进行测试，就我而言，它是一个视网膜屏幕。然而，我旁边的同事在她的 iMac（非视网膜显示屏）上测试了小提琴，却发现问题仍然很明显。
*   也许我只是疯了，但我觉得这实际上可能是 webkit 浏览器选择渲染具有不同不透明度的元素的方式。再说一次，这可能只是我试图避免承认我做错了什么。

* * *

自然地，我认为我可以用 Comic Sans 来减轻情绪。这是帮助解释问题的屏幕截图：

![拥抱Comic Sans！](../Images/ac124a1eff4eca77a26afbd21f2cadfb.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-25T09:57:49.563

这不是不透明度本身的问题（实际上，在@Zoltan 的示例中将其转回 1 对我来说没有任何改变）。

问题在于过渡，webkit 可以使用两种抗锯齿模式：

1.  子像素（默认设置，但在动画、过渡或变换期间不受支持）或
2.  灰度

这意味着当使用亚像素抗锯齿渲染元素并对其应用动画时，webkit 会在动画期间临时切换到灰度，然后在完成后返回亚像素。

鉴于 subixel 抗锯齿会导致字体稍重，您会得到不需要的伪影。

要解决此问题，请将其添加到您的 css 中：

```
html {
    -webkit-font-smoothing: antialiased;
} 
```

这会强制灰度抗锯齿和所有文本，您不会看到切换。

（最终结果：http: [//jsfiddle.net/ErVYs/9/](http://jsfiddle.net/ErVYs/9/)）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-09T20:57:08.037

一个可能的解决方案是使不透明度过渡到`1`，但是`.999`- [http://jsfiddle.net/ErVYs/2/](http://jsfiddle.net/ErVYs/2/)

```
div {
    width: 200px;
    text-align: center;
    opacity: 0.7;
    transition: opacity ease-in 0.25s;
    -webkit-transition: opacity ease-in 0.25s;
    -moz-transition: opacity ease-in 0.25s;
    -o-transition: opacity ease-in 0.25s;
}

div:hover {
    opacity: .999;
} 
```

# java - Java：桌面和桌面图标之间的框架/窗口

> ID：11402699
> 
> 赞同：0
> 
> 时间：2012-07-09T20:34:29.527
> 
> 标签：java, windows, background, desktop

我只想知道是否可以在 Java 中创建一个位于桌面背景和其上的图标之间的框架。

基本上，我尝试使用 Windows 7 在 Java 中创建“动画桌面背景”。

我找到了一些关于如何创建一个完全透明的窗口的教程，但剩下的问题是，这个窗口仍然在桌面图标的前面，所以它更像是一个“桌面前景”。

有没有办法把这个前景变成背景？
还有其他方法可以在“纯”Java 中实现这一点吗？

但我想用 Java 实现它的唯一方法是通过 JNI/JNA 的本机代码。
希望你能告诉我我错了；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:29:09.987

你不能使用 Swing/AWT 来做到这一点。由于windows api是c++的，所以可以使用JNI调用一些函数。

# c# - 将项目列表作为两个值相等的列表添加到另一个对象

> ID：11402703
> 
> 赞同：0
> 
> 时间：2012-07-09T20:34:52.227
> 
> 标签：c#, .net, linq, list

我有2个对象如下：

```
public class object1
{
    public int Object1ID { get; set; }
    public string SomeValue { get; set; }
    public List<object2> ListOfObject2 { get; set; }
}

public class object2
{
    public int Object2ID { get; set; }
    public string SomeValue2 { get; set; }
    public int Object1LinkedID { get; set; }
} 
```

Object1ID 和 Object2ID 是唯一的 ID。

我将它们都填充为列表（所以我有一个 Object1 列表和一个 Object2 列表）。

```
List<Object1> listObject1 = new List<Object1>();
List<Object2> listObject2 = new List<Object2>(); 
```

我想将所有 Object2s 添加到 Object1 中，其中`Object1LinkedID`等于`Object1`. 这可以是一个新对象，也可以只是对原始 Object1 列表的更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:41:41.837

This should work:

```
var groups = listObject2.GroupBy(o2 => o2.Object1LinkedID);
foreach(var o1Group in groups)
{
    object1 o1 = listObject1.Where(o => o.Object1ID == o1Group.Key).First();
    o1.ListOfObject2.AddRange(o1Group);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T09:32:51.523

```
var query = from o1 in listObject1
        join o2 in listObject2
            on o1.Object1ID equals o2.Object1LinkedID
            into go2
        select new {O1 = o1, O2Coll = go2};

foreach (var rel in query)
{
    rel.O1.ListOfObject2.AddRange(rel.O2Coll);
} 
```

或者

```
foreach (var object1 in listObject1)
{
    int o1Id = object1.Object1ID;
    object1.ListOfObject2.AddRange(listObject2.Where(o => o.Object1LinkedID == o1Id));
} 
```

# perl - 获取 URL 的“基本 URL”

> ID：11402706
> 
> 赞同：2
> 
> 时间：2012-07-09T20:35:00.900
> 
> 标签：perl, url

在我的应用程序中，我需要获取任何 URL 的基本 URL。到目前为止，我一直是这样的：

```
$resp->base; 
```

`$resp`对象在哪里[`HTTP::Response`](http://search.cpan.org/~gaas/HTTP-Message-6.03/lib/HTTP/Response.pm)。但是，现在我需要知道 URL 的基础，*而无需*实际请求它们并`HTTP::Response`取回对象。有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:48:05.873

您想找到`.`相对于您拥有的 url 的“”扩展的绝对 url。[URI](http://search.cpan.org/perldoc?URI)可以做到这一点。

```
$ perl -MURI -E'say URI->new_abs(".", $_) for @ARGV' \
   'http://www.example.org/dir/' \
   'http://www.example.org/dir/file.html' \
   'http://www.example.org/dir/file.cgi?foo=bar'
http://www.example.org/dir/
http://www.example.org/dir/
http://www.example.org/dir/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:28:33.657

该`HTTP::Response->base`方法返回的值是从 HTTP 响应消息中获取的 URL，该 URL 指定如何解析出现在消息内容中的相对 URL。如果消息没有指定这样的值，则使用用于请求消息的 URL。

如果您想要来自`HTTP::Response`假设响应中没有相反信息的 URL，那么只需按原样使用 URL。它可以作为基本 URL 正常工作。

任意 URL 没有单一的基础。基本 URL 是用于解析相对 URL 的绝对 URL，并且可以具有任意数量的路径步骤。

例如，

```
http://news.bbc.co.uk/1/hi/programmes/click_online/9735140.stm 
```

可以表示为

```
9735140.stm 
```

相对于基本 URL

```
http://news.bbc.co.uk/1/hi/programmes/click_online/ 
```

或作为

```
1/hi/programmes/click_online/9735140.stm 
```

相对于基本 URL

```
http://news.bbc.co.uk/ 
```

或者，当然，路径可以随时在基本 URL 和相对 URL 之间划分。

你没有说你想用这个值做什么。您选择的解决方案只是去掉 URL 的路径组件的最后一个元素，该元素后面没有斜杠，因此对于 URL

```
http://news.bbc.co.uk/1/hi/programmes/click_online 
```

它返回

```
http://news.bbc.co.uk/1/hi/programmes/ 
```

但对于

```
http://news.bbc.co.uk/1/hi/programmes/click_online/ 
```

它返回相同的值

```
http://news.bbc.co.uk/1/hi/programmes/click_online/ 
```

如果这是您想要的行为，那么一切都很好，但我不会将其描述为“采用基本 URL”。

# facebook - 如何在应用程序的 Facebook 页面上制作用户发布的墙贴

> ID：11402713
> 
> 赞同：1
> 
> 时间：2012-07-09T20:35:35.237
> 
> 标签：facebook, facebook-wall

我需要做些什么来让用户通过自定义 ios 应用程序使用它自己的 facebook 应用程序 ID 在他们的墙上发布帖子，还出现在应用程序（我的意思是它使用的 facebook 应用程序）自己的 facebook 页面上？

我希望这会自动出现，但似乎并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:50:33.503

为了阅读一个人的 Facebook 墙，您需要`access token`验证阅读。这将使您能够访问所有非公开的墙贴。由此，您可以通过`feed`操作将新发布的内容传递到您的页面。

**参考**： http: [//php-academy.blogspot.com/2011/04/how-to-post-from-facebook-app-to.html](http://php-academy.blogspot.com/2011/04/how-to-post-from-facebook-app-to.html)

享受和好运！

# ruby-on-rails - 大虾+大虾问题

> ID：11402723
> 
> 赞同：0
> 
> 时间：2012-07-09T20:36:18.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3, prawn, prawnto

我知道 prawn 正在工作，因为我有一个显示操作，如果我将 .pdf 添加到它的末尾，它会加载 show.pdf.prawn。但是，我有一个表格：

```
 <%= form_tag(:controller => "/holders", :action=> "generate", format: "pdf") do %>
      <%= label_tag(:count, "How Many Students?") %>
      <%= text_field_tag(:count) %>
      <%= hidden_field_tag :holder_id, value: @holder%>
      <%= submit_tag("Generate Course Lesson") %>
    <% end %> 
```

这会将计数提交给生成操作。

在我的生成操作中，我有以下内容：

```
 def generate
        prawnto :filename => "print.pdf"
        respond_to do |format|
      format.html
      format.pdf { render :layout => false}
    end
  end 
```

我的 generate.pdf.prawn 看起来像：

```
pdf.text "HELLO WORLD" 
```

当我提交表单时，我得到了 URL：`http://localhost:3000/generate.pdf`并且 Chrome 告诉我 `Failed to load PDF document`没有其他错误或信息。

我注意到我得到了：`Rendered holders/generate.pdf.erb`在我的开发日志中，这表明它甚至没有在寻找 .prawn 文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:29:36.467

像这样设置你的动作：

```
def generate
  respond_to do |format|
    format.html
    format.pdf { prawnto :filename => 'print.pdf' }
  end
end 
```

# php - PHP 模板 Preg_Replace

> ID：11402725
> 
> 赞同：-3
> 
> 时间：2012-07-09T20:36:26.097
> 
> 标签：php, templates

我正在用 php 制作一个简单的模板系统。

如果我有一个名为 $var 的变量，我希望将 [var] 替换为 $var 的值。但我希望它可以与方括号中的任何内容一起使用。谁能为此给我一个 Preg_Replace ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:40:32.070

Althought NOT a solution, you might want to start with:

[http://ca.php.net/manual/en/function.preg-replace.php](http://ca.php.net/manual/en/function.preg-replace.php)

And then read:

[http://www.regular-expressions.info/](http://www.regular-expressions.info/)

Have fun

# java - 从 Java 调用 Oracle “DEFINE”

> ID：11402729
> 
> 赞同：2
> 
> 时间：2012-07-09T20:36:44.633
> 
> 标签：java, sql, oracle, jdbc, oracle11g

我需要在 Oracle 中定义一些变量，以便在我们应用程序的数据库安装脚本中进一步使用。基本上，我们的安装程序现在的工作方式是读取脚本文件并通过 Java 中的 JDBC 调用每个文件。我需要让 Oracle 在数据库端进行变量替换，因为有过程、触发器、创建语句等需要引用它们（比如“CREATE TABLE &&MYSCHEMA.TBL_NAME ...”）。

我遇到的问题是 DEFINE 语句在从 Java 调用时抛出错误（示例）：

```
private static void testDefineVariables() {
    String url = "jdbc:oracle:thin:@localhost:1521:LOCALDEV";
    String username = "SYSTEM";
    String password = "manager42";
    Connection conn = null;
    Statement stmt = null;
    try {
        conn = DriverManager.getConnection(url, username, password);
        stmt = conn.createStatement();

        //Execute the sql
        stmt.execute("DEFINE MYSCHEMA='TESTSCHEMA'");

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finally {
        try {

        if(stmt != null)
            stmt.close();

        if(conn != null)
            conn.close();

        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
} 
```

错误是：

```
java.sql.SQLSyntaxErrorException: ORA-00900: invalid SQL statement

at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395)
at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802)
at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436)
at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521)
at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:194)
at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:1000)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1307)
at oracle.jdbc.driver.OracleStatement.executeInternal(OracleStatement.java:1882)
at oracle.jdbc.driver.OracleStatement.execute(OracleStatement.java:1847)
at oracle.jdbc.driver.OracleStatementWrapper.execute(OracleStatementWrapper.java:301) 
```

我正在使用带有 ojdbc6-11.2.0.1.0.jar JDBC 驱动程序的 Oracle 11g R2 数据库。我能够从 sqldeveloper 工具以及 SQLPlus 控制台成功执行该语句，但不能从 Java 应用程序执行。我需要在数据库驱动程序上配置其他属性吗？我可以从这个司机打这种类型的电话吗？

我知道有些人可能会立即建议在 Java 端使用变量绑定，但这不是一个选择。脚本需要可以从 SQL 界面和安装程序中执行。除了这个，还有其他原因，我就不一一赘述了。

我也希望让它与 sql-maven-plugin 一起工作，但基于这个 JIRA 可能是不可能的：

[为替换变量添加 Oracle SQLPlus 语法](http://jira.codehaus.org/browse/MSQL-52)

如果有人有任何建议或知道如何使其工作，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T20:42:30.220

我不认为 DEFINE 将在 SQLPLUS 之外工作 - JAVA 使用 JDBC 并假定 execute() 的参数是有效的 SQL。如果您能够在 SQLPLUS 之外使用 DEFINE，则意味着您使用的实用程序旨在与 SQLPLUS 兼容或部分替代。

DEFINE 是一个 SQLPLUS 命令 - SQLPLUS 是一个 ORACLE 实用程序。

根据这个 URL 定义不是 SQL 语句

[http://www.adp-gmbh.ch/ora/sqlplus/define.html](http://www.adp-gmbh.ch/ora/sqlplus/define.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T20:49:00.383

两者`DEFINE`和替换变量语法`&&MYSCHEMA.TBL_NAME`都是 SQL*Plus 命令。它们不是有效的 SQL 或 PL/SQL 结构。您将无法通过 JDBC 按原样使用它们。

取决于你说你不想进入的原因

*   您的 Java 应用程序可以调用操作系统以调用 SQL*Plus 并传入脚本
*   您的 Java 应用程序可以实现您的脚本所依赖的任何 SQL*Plus 功能。`DEFINE MYSCHEMA='TESTSCHEMA'`您的应用程序需要维护，例如，`HashMap`将变量 like 映射`myschema`到值 like ，而不是执行 `TESTSCHEMA`. 然后，您的应用程序必须解析各个 SQL 语句以查找类似 的文本`&&MYSCHEMA`，将其替换为其本地的值`HashMap`，然后将生成的 SQL 字符串发送到数据库服务器。根据您需要复制多少 SQL*Plus 功能，这可能是一项相当重要的工作。许多 PL/SQL IDE（例如 Toad 或 SQL Developer）实现了 SQL*Plus 功能的一个子集——我不知道有任何人尝试实现 SQL*Plus 的每一个功能。

# c# - 不断递增的字符串

> ID：11402731
> 
> 赞同：1
> 
> 时间：2012-07-09T20:37:11.160
> 
> 标签：c#

所以，我正在尝试这样做：（示例）

a,b,c,d.. 等 aa,ab,ac.. 等 ba,bb,bc 等

因此，这基本上可以解释为通常增加并且仅打印所有可能的变化，从 a 开始。到目前为止，我已经能够用一封信做到这一点，开始是这样的：

```
for (int i = 97; i <= 122; i++)
{
    item = (char)i
} 
```

但是，我最终无法添加第二个字母、第三个字母等等。有人可以提供输入吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:24:40.010

由于到目前为止还没有一个可以真正“增加字符串”的解决方案，所以这里有一个解决方案：

```
static string Increment(string s) {
    if (s.All(c => c == 'z')) {
        return new string('a', s.Length + 1);
    }
    var res = s.ToCharArray();
    var pos = res.Length - 1;
    do {
        if (res[pos] != 'z') {
            res[pos]++;
            break;
        }
        res[pos--] = 'a';
    } while (true);
    return new string(res);
} 
```

这个想法很简单：假设字母是你的数字，并按照他们在小学的教学方式进行增量。从最右边的“数字”开始，然后递增。如果您击中 9（`'z'`在我们的系统中），请移至前一个数字；否则，你就完成了递增。

明显的特殊情况是“数字”完全由九组成。这是您的“计数器”需要滚动到下一个尺寸并添加“数字”的时候。在方法的开头检查这个特殊条件：如果字符串由`N`字母组成，则返回一个字母s`'z'`的字符串。`N+1``'a'`

这是[ideone 上此代码的快速演示的链接](http://ideone.com/6W981)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:47:28.453

你的 for 循环的每次迭代都完全覆盖了“item”中的内容 - for 循环一次只分配一个字符“i”

如果 item 是字符串，请使用以下内容：

```
item = "";
for (int i = 97; i <= 122; i++)
{
  item += (char)i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:49:48.263

影响的东西

```
public string IncrementString(string value)
{
    if (string.IsNullOrEmpty(value)) return "a";

    var chars = value.ToArray();
    var last = chars.Last();

    if(char.ToByte() == 122)
    return value + "a";

    return value.SubString(0, value.Length) + (char)(char.ToByte()+1);
} 
```

您可能需要将字符转换为字节。可以将其封装在扩展方法中，例如`static int ToByte(this char)`；

在构建大量字符串时，StringBuilder 是更好的选择。所以您可能需要考虑使用它而不是字符串连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:53:31.970

另一种看待这个问题的方法是你想以 26 为底数。计算机非常擅长计数，因为它总是必须从它存储值的方式以 2 为底（二进制）转换为以 10 为底（十进制--你和我通常认为的数字系统），转换为不同的数字基数也很容易。

这里有一个通用的基础转换器[https://stackoverflow.com/a/3265796/351385](https://stackoverflow.com/a/3265796/351385)，它将字节数组转换为任意基础。一旦您对数字基数有了很好的理解并且可以理解该代码，创建一个以二进制计数但转换为以 26 为基数进行显示的以 26 为基数的计数器就很简单了。

# mobile - 移动 - 移动重定向后查看完整网站

> ID：11402733
> 
> 赞同：0
> 
> 时间：2012-07-09T20:37:13.523
> 
> 标签：mobile

我已经有了通过检测用户使用的设备将用户重定向到移动网站的代码。重要提示：这意味着移动网站和完整网站具有相同的 URL：[http](http://example.com) ://example.com 。没有 m.example.com 或 mobile.example.com --- 只有 example.com

```
function _check(){

    $agent = $_SERVER["HTTP_USER_AGENT"]; 

    $mobile = false;
    $agents = array("Alcatel", "Blackberry", "HTC",  "LG", "Motorola", "Nokia", "Palm", "Samsung", "SonyEricsson", "ZTE", "Mobile", "iPhone", "iPod", "Mini", "Playstation", "DoCoMo", "Benq", "Vodafone", "Sharp", "Kindle", "Nexus", "Windows Phone");
    foreach($agents as $a){

        if(stripos($agent, $a) !== false){                 
            return $a;
        }

    }
    return $mobile;
} 
```

现在我想创建一个链接，一旦单击该链接，就会将他的 $mobile 变量设置为 false，以便显示整个站点而不是移动站点（因为两者具有相同的 URL）。

有谁知道如何检测何时单击链接，将 $mobile 变量设置为 false？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:40:05.283

Use a cookie - in your test code, first check to see if the cookie is set, and *then* check user agents. If the cookie is set, set $mobile to false and don't do any other checks - otherwise, fall through to checking user agents.

When your user clicks on the "view full site" link, set the cookie for them so that your code knows to skip checking their user agent.

# android - Android 操作栏背景

> ID：11402739
> 
> 赞同：0
> 
> 时间：2012-07-09T20:38:02.470
> 
> 标签：android, android-actionbar

一段时间以来，我一直在尝试更改操作栏的背景。我在这里发现了一些可以更改背景但不能更改文本颜色的用户的帖子。在我的例子中，情况恰恰相反，因为背景给我带来了问题。

我没有从我的活动中创建任何动态设计。

以下是我的 style.xml：

```
<style name="MyTheme" parent="android:style/Theme.Holo.Light">
<item name="android:actionBarStyle">@style/MyTheme.ActionBarStyle</item>  
</style>     

<style name="MyTheme.ActionBarStyle" parent="android:style/Widget.Holo.Light.ActionBar">
<item name="android:titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyle</item>
<item name="android:background">#FD5200</item>
</style>

<style name="MyTheme.ActionBar.TitleTextStyle" parent="android:style/TextAppearance.Holo.Widget.ActionBar.Title">
<item name="android:textColor">#FD5200</item>
</style> 
```

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:46:47.670

考虑使用[此处](https://stackoverflow.com/a/10888882/932307)`ActionBarSherlock`的链接可能会帮助您。

# node.js - 在这种情况下方法克隆会起作用吗？

> ID：11402740
> 
> 赞同：0
> 
> 时间：2012-07-09T20:38:09.483
> 
> 标签：node.js

我正在尝试构建一个调试代理，以便在调用各种 API 时可以看到请求和响应，但是我被困在尝试将数据发送到[原始方法](https://github.com/joyent/node/blob/master/lib/http.js#L702)的地方。

我怎样才能将块发送到原始方法？

```
var httpProxy = require('http-proxy');

var write2;

function write (chunk, encoding) {

    /*  
        error: Object #<Object> has no method '_implicitHeader'
        because write2 is not a clone.
    */
    //write2(chunk, encoding);

    if (Buffer.isBuffer(chunk)) {
        console.log(chunk.toString(encoding));
    }
}

var server = httpProxy.createServer(function (req, res, proxy) {

    // copy .write
    write2 = res.write;
    // monkey-patch .write
    res.write = write;

    proxy.proxyRequest(req, res, {
        host: req.headers.host,
        port: 80
    });

});

server.listen(8000); 
```

我的项目在[这里](https://github.com/webjay/debug-proxy)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:40:06.310

稍微修改[JavaScript：克隆一个函数](https://stackoverflow.com/questions/1833588/javascript-clone-a-function)

```
Function.prototype.clone = function() {
    var that = this;
    var temp = function temporary() { return that.apply(this, arguments); };
    for( key in this ) {
        Object.defineProperty(temp,key,{
          get: function(){
            return that[key];
          },
          set: function(value){
            that[key] = value;
          }
        });
    }
    return temp;
}; 
```

我已将克隆分配更改为使用 getter 和 setter，以确保对克隆函数属性的任何更改都将反映在克隆对象上。

现在你可以使用 write2 = res.write.clone() 之类的东西。

还有一件事，您可能更愿意将此函数从原型分配更改为普通方法（将函数传递给克隆），这可能会使您的设计更加简洁。

# database - 如何处理 PostgreSQL 中大表之间的连接？

> ID：11402742
> 
> 赞同：1
> 
> 时间：2012-07-09T20:38:11.587
> 
> 标签：database, postgresql, optimization, join, query-optimization

我有两个表： urls（带有索引页面的表，主机是索引列，3000 万行）主机（带有主机信息的表，主机是索引列，100 万行）

我的应用程序中最常见的 SELECT 之一是：

```
SELECT urls.* FROM urls
JOIN hosts ON urls.host = hosts.host
WHERE urls.projects_id = ?
    AND hosts.is_spam IS NULL
ORDER by urls.id DESC, LIMIT ? 
```

在 urls 表中有超过 100 000 行的项目中，查询执行速度非常慢。

由于表已经增长，查询的执行速度越来越慢。我已经阅读了很多关于 NoSQL 数据库（如 MongoDB）的内容，这些数据库旨在处理如此大的表，但是将我的数据库从 PgSQL 更改为 MongoDB 对我来说是个大问题。现在我想尝试优化 PgSQL 解决方案。你有什么建议吗？我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:05:59.047

结合提供的索引，此查询应该很快：

```
CREATE INDEX hosts_host_idx ON hosts (host)
WHERE is_spam IS NULL;

CREATE INDEX urls_projects_id_idx ON urls (projects_id, id DESC);

SELECT *
FROM   urls u
WHERE  u.projects_id = ?
AND    EXISTS (
    SELECT 1
    FROM   hosts h USING (host)
    WHERE  h.is_spam IS NULL
    )
ORDER  BY urls.id DESC
LIMIT  ?; 
```

指数是更重要的成分。您拥有的 JOIN 语法可能同样快。请注意，第一个索引是[部分索引](http://www.postgresql.org/docs/current/interactive/indexes-partial.html)，第二个索引是按第二列排序的多列[索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)`DESC`。

这在很大程度上取决于您的数据分布的细节，您必须（一如既往）使用 EXPLAIN ANALYZE 进行测试，以了解性能以及是否使用了索引。

[关于性能优化](http://wiki.postgresql.org/wiki/Performance_Optimization)的一般建议也适用。你知道该怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:01:09.770

在列上添加索引`hosts.host`（主要在表中，这很重要），并在, run语句上添加`hosts`复合索引以更新所有统计信息并观察亚秒级性能，无论垃圾邮件百分比如何。`urls.projects_id, urls.id``ANALYZE`

如果几乎所有东西都是垃圾邮件，并且如果“项目”，无论它们是什么，数量很少而且每个都很大，那么一个稍微不同的建议将适用。

说明：更新统计信息使优化器可以识别`urls`和`hosts`表都很大（好吧，您没有向我们显示模式，因此我们不知道您的行大小）。^(以1)开头的复合索引`projects.id`有望排除大部分内容，而它的第二个组件将立即按所需顺序提供其余内容，因此索引扫描很可能会成为查询计划选择的基础计划者。然后必须有一个索引以使主机查找有效；这张大表的大部分将永远不会被访问。^(`urls``urls``urls``hosts.host`)

* * *

¹ ) 在这里我们假设`projects_id`是合理的选择性（在整个表中它不是相同的值）。

# c++ - Valgrind 声称我在使用 new 时正在使用 malloc

> ID：11402744
> 
> 赞同：2
> 
> 时间：2012-07-09T20:38:14.320
> 
> 标签：c++, malloc, valgrind, new-operator, delete-operator

针对现有代码库运行 Valgrind，我收到很多“不匹配的免费/删除/删除 []”错误。其中许多是一个问题的重复：它声称在第 XXX 行使用了一个`delete`操作，而在 YYY 行`malloc`使用了一个操作。但是，当我打开它抱怨的文件并导航到指示的行号时，我发现内存不是`malloc`用`new`. 分配的对象是一个标准`ifstream`，既没有`new[]`也没有`delete[]`被使用。

我正在运行 Valgrind 3.5。有谁知道发生了什么？我看不出这怎么可能是一个真正的错误，但我看到有些人声称 Valgrind 不会出现很多误报，所以我想在压制它之前确信这是假的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:08:24.940

您没有提供示例程序，所以这是一个水晶球猜测。

您的程序提供了一个`operator new`但缺少一个`operator delete`. 以下示例程序会产生与您看到的相同的错误消息：

```
#include <new>
#include <cstdlib>

/*
 * Sample program that provides `operator new`, but not `operator delete`.
 */

// minimal version of new for demonstration purpose only
void* operator new(size_t numBytes) {
  return malloc(numBytes);
}

int main () {
  int *p = new int;
  delete p;
} 
```

# jquery - 如何将数据从控制器发送到ruby中的视图

> ID：11402750
> 
> 赞同：3
> 
> 时间：2012-07-09T20:38:59.660
> 
> 标签：jquery, ruby-on-rails

我正在使用 Ruby，我需要在控制器中执行长时间运行的任务时向用户发送持续更新状态消息。

该方法在数据库中插入一些行。我想要的是向用户显示这样的消息：

> 正在上传，已插入 X 个文件。

目前我正在使用 LoadMask jQuery 插件，但它只显示一条简单的消息，我不知道如何发送插入的行数而不中断进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:37:25.010

您应该考虑将这个长时间运行的进程转移到后台任务中，这样您就可以立即向用户提供反馈。提交后台作业后，根据您的后台处理引擎，您将能够检查作业的状态。自己跟踪状态可能很简单（取决于您的任务）。使用 Redis 或仅在您的数据库中使用（为此创建一个单独的表）。提交作业后，您需要返回可用于轮询更新的作业 ID。

创建一个新的控制器（或动作），您可以使用 jQuery + Ajax 并轮询更改。给它一个 job_id （您之前的操作返回）

另请看：Faye：[http](http://faye.jcoglan.com/) ://faye.jcoglan.com/，http : //railscasts.com/episodes/260-messaging-with-faye Goliath：[http :](http://railscasts.com/episodes/260-messaging-with-faye) [//postrank-labs.github.com/goliath /](http://postrank-labs.github.com/goliath/)

[http://railscasts.com/episodes/229-polling-for-changes](http://railscasts.com/episodes/229-polling-for-changes)

延迟作业、Resque 等

哦，如果你只是在找一个简单的文件上传进度指示器，看这个[Rails，上传进度条](https://stackoverflow.com/questions/2287007/rails-upload-progress-bar)

您也可以尝试流技术，这里有很多信息： [Ruby on Rails 3: Streaming data through Rails to client](https://stackoverflow.com/questions/3507594/ruby-on-rails-3-streaming-data-through-rails-to-client)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:22:11.900

这是 Rails 中的常见需求，通常使用 JQuery 是正确的方法。

虽然控制器和视图的代码细节取决于您如何构建应用程序，但这里是一个很好的起点：

Railscast #136：jQuery：[http ://railscasts.com/episodes/136-jquery/](http://railscasts.com/episodes/136-jquery/)

您需要考虑的一件事是如何定期从您的方法报告到目前为止插入的行数。你有办法吗？

首先查看 railscast —— 它会让您了解如何至少进行下一步。

# c# - 双重用途的应用程序作为 winform 或命令行实用程序运行

> ID：11402753
> 
> 赞同：3
> 
> 时间：2012-07-09T20:39:16.610
> 
> 标签：c#, .net, winforms, command-line

对不起，我的标题相当模糊，但我不知道如何简洁地标记我想做的事情。

我有一个 winform 应用程序，它试图实现双重用途，因此它也可以由我们的自动化系统作为命令行实用程序运行。在程序中`Main()`，我有条件地执行所需的代码。唯一的问题是（尽管登录到控制台）没有启动命令窗口。我需要做什么才能使应用程序启动命令窗口并将标准输出定向到该窗口？

以下是我的主要内容（HeadlessExecution 正在正确执行）：

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        if (!ValidateCommandLineArgs())
            Application.Run(new TestResultForm());
        else
        {
            HeadlessExecution();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:41:45.960

将所有逻辑提取到不同的类程序集中。

在 winforms 和控制台应用程序中引用此程序集。瞧。

# python - 无法解码任何 JSON 对象 - 美味派 - curl

> ID：11402756
> 
> 赞同：6
> 
> 时间：2012-07-09T20:39:33.813
> 
> 标签：python, django, json, curl, tastypie

在我到达帖子部分之前，我一直在逐字阅读美味派教程：http: [//django-tastypie.readthedocs.org/en/latest/interacting.html#creating-a-new-resource-post](http://django-tastypie.readthedocs.org/en/latest/interacting.html#creating-a-new-resource-post)

当我运行此命令时，我不断收到以下错误： `No JSON object could be decoded`

我检查并确定我正在逐字逐句地遵循文档。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T12:43:50.177

原来是一个带有 cURL 的 windows 东西。

1.  JSON 数据应使用双引号 ("") 而不是单引号引起来。
2.  json数据包中的所有双引号必须用反斜杠（\）转义

例如：所以，这个：

`curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"body": "This will prbbly be my lst post.", "pub_date": "2011-05-22T00:46:38", "slug": "another-post", "title": "Another Post", "user": "/api/v1/user/1/"}' http://localhost:8000/api/v1/entry/`

应该：

`curl --dump-header - -H "Content-Type: application/json" -X POST --data "{\"body\": \"This will prbbly be my lst post.\", \"pub_date\": \"2011-05-22T00:46:38\", \"slug\": \"another-post\", \"title\": \"Another Post\", \"user\": \"/api/v1/user/1/\"}" http://localhost:8000/api/v1/entry/`

# html - text not obeying encapsulating div's max-width in Firefox

> ID：11402758
> 
> 赞同：0
> 
> 时间：2012-07-09T20:39:42.693
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T21:12:01.923

该声明`white-space: pre`防止包装，因此删除它可以解决此问题。但是，如果您希望在内容中保留空格，请`white-space: pre-wrap`改用（警告：IE 7 中不支持）。

请注意，换行不保留缩进：如果一行以空格开头并被换行，则下一行从第一个位置开始，没有缩进。要获得保留缩进的包装（并且可能比初始行缩进更多的连续行），您需要不同的标记：使每个逻辑行成为一个元素等。

# events - click event associated to two modal divs

> ID：11402759
> 
> 赞同：0
> 
> 时间：2012-07-09T20:39:44.433
> 
> 标签：events, html, click, overlay

I have an issue related to click events on different modal divs.

I have a modal div 'A' which shows an overlay div with some info. This div is show by clicking i.e. a button A. So, when it's shown if i click outside the overlapped div, i want this to close.

I have another div 'B' which shows an overlay div with some other info. This div is show by clicking i.e. a button B. So, when it's shown if i click outside the overlapped div, i want this to close.

In both cases i use $(window).click() for managing them.

The question is that i need that when once i click on button 'A', it's corresponding div come up and if i click on button 'B' I want div 'A' close and div 'B' come up and viceversa.

how can i handle multiple clicks events for multiple modal divs?

Thanks.y

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:00:44.137

这可能是一种凝视：

```
$('#buttonA").click(function(){
      $(#divA").show();
      $(#divB").hide();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:01:46.763

我不确定这是否是您想要的，但是...

假设您的按钮和 div 属于“overlay”类，并且具有 Rolando 示例中的 ID（“buttonA”、“divA”；“buttonB”、“divB”；等）：

```
$(".overlay").filter(":button").click(function() {
    var callid = /button(.+)/.exec($(this).attr("id"))[1];

    $("div.overlay[id$=" + callid + "]").show();
    $("div.overlay:not([id$=" + callid + "])").hide();
}) 
```

示例：http: [//jsfiddle.net/KXeXj/](http://jsfiddle.net/KXeXj/)

唯一的问题是“在 div 外部单击以关闭它”部分；我尝试使用`$(":not(.overlay)").click(function() {$("div.overlay").hide()})`，但这似乎不起作用，因为它只是将`div`s 隐藏在您单击的任何位置。

# html - Creating four frames using HTML

> ID：11402764
> 
> 赞同：0
> 
> 时间：2012-07-09T20:40:12.417
> 
> 标签：html

I need to create four frames in an HTML document. The code below creates only three frames.

```
<!DOCTYPE html>
<html>
<FRAMESET cols="100%" rows="10%,90%" >
  <FRAMESET rows="100%,">
      <FRAME src="frame_a.htm">
  </FRAMESET>
  <FRAMESET cols="20%,60%" rows="40%,80">
      <FRAME src="frame_b.htm">
      <FRAME src="frame_c.htm">
  </FRAMESET>
  <FRAMESET rows="60%," >
      <FRAME src="frame_d.htm">
  </FRAMESET>

</FRAMESET>
</html> 
```

This snapshot explains the question. Notice that the above code didn't create frame D.

![enter image description here](../Images/81ad8a2338510dba1646b8c9eed318a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:42:30.930

That's because the two top rows take up 100% of the height, and you haven't specificed any height for the third.

Try:

```
<FRAMESET cols="100%" rows="10%,40%,50%"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:42:28.077

`<FRAMESET cols="100%" rows="10%,90%">` creates a frameset with two frames: The first one with 10%, the second one with 90%. Since you want three rows you need to add a third value.

# php - Limiting Results from an Array of values

> ID：11402766
> 
> 赞同：1
> 
> 时间：2012-07-09T20:40:16.210
> 
> 标签：php, arrays, wordpress, custom-fields

I am using advanced custom fields in Wordpress. Without going into the details of how it works, I have a "repeater field" which lets the users add as many images to an aera of the backend as they please. To show these images, I use the following code (inside wordpress loop)

```
<?php if(get_field('slider_images')): ?>
<?php while(the_repeater_field('slider_images')): ?>
     <?php 
     $attachment_id = get_sub_field('work_slider_image'); 
     $size = "homepage";  
     $image = wp_get_attachment_image_src( $attachment_id, $size ); 
     echo $image[0]; 
     ?>
<?php endwhile; endif; ?> 
```

The goal here is to create an array of image URLS and to only display the FIRST one. On other pages they will all be used, but on this page, I want to grab ONLY the first image, hence the `echo $image[0];`

For some reason, it is showing all of the uploaded images, and when I print the variable $image, it returns:

```
Array ( [0] => http://sitename.com/agsinfo/wp-content/uploads/2012/07/1.jpg [1] => 392 [2] => 165 [3] => ) 
```

After seeing this, it would make sense to me that `echo $image[0];` would work, but for some reason its not. Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:50:37.590

```
 <?php if(get_field('slider_images')): ?>
<?php while(the_repeater_field('slider_images')): ?>
     <?php 
     $attachment_id = get_sub_field('work_slider_image'); 
     $size = "homepage";  
     $image[] = wp_get_attachment_image_src( $attachment_id, $size ); 

     ?>
<?php endwhile;
 echo $image[0];
 endif;  ?> 
```

# iphone - ScrollView 正在窃取感人事件

> ID：11402767
> 
> 赞同：0
> 
> 时间：2012-07-09T20:40:18.357
> 
> 标签：iphone, ios, ipad, ios5

我继承了 UIImageview 并覆盖了**touchesBegan、touchesMoved、touchesEnded**方法 ，我用手指画线，它可以在 iPhone 上工作（侧面没有滚动）。问题是当我在 iPad 上开始时，默认情况下总是在一边滚动，我认为滚动正在窃取触摸事件。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:42:19.373

```
[yourScrollView setCanCancelContentTouches:NO] 
```

# android - Add image from cache-memory to android wallpaper

> ID：11402773
> 
> 赞同：2
> 
> 时间：2012-07-09T20:40:46.480
> 
> 标签：android, caching, view, wallpaper, pager

I have application where images downloads from internet (**arrays.xml**) and then shown in **Pager Adapter** consequentially. I need to set the desired image to android wallpaper with help button. **But i don't understand how add image from cache-memory to wallpaper** (image **not stored on the SDcard**) **?** Images downloading from **arrays.xml** file:

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="heavy_images">
        <item>https://images-url.com/01.jpg</item>
        <item>https://images-url.com/02.jpg</item>
        <item>https://images-url.com/03.jpg</item>
        <item>https://images-url.com/04.jpg</item>
        <item>https://images-url.com/05.jpg</item>
 </string-array>

</resources> 
```

Then images shown in **Pager Adapter**:

```
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.Toast;

public class ImagePagerActivity  extends BaseActivity  {

    private ViewPager pager;

    private DisplayImageOptions options;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ac_image_pager);

        Bundle bundle = getIntent().getExtras();
        String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
        int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);

        options = new DisplayImageOptions.Builder()
            .showImageForEmptyUri(R.drawable.image_for_empty_url)
            .cacheOnDisc()
            .imageScaleType(ImageScaleType.EXACT)
            .build();

        pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(new ImagePagerAdapter(imageUrls));
        pager.setCurrentItem(pagerPosition);

            }

    @Override
    protected void onStop() {
        imageLoader.stop();
        super.onStop();
    }

    private class ImagePagerAdapter extends PagerAdapter {

        private String[] images;
        private LayoutInflater inflater;

        ImagePagerAdapter(String[] images) {
            this.images = images;
            inflater = getLayoutInflater();
        }

        public void destroyItem(View container, int position, Object object) {
            ((ViewPager) container).removeView((View) object);
        }

        public void finishUpdate(View container) {
        }

        public int getCount() {
            return images.length;
        }

        public Object instantiateItem(View view, int position) {
            final FrameLayout imageLayout = (FrameLayout) inflater.inflate(R.layout.item_pager_image, null);
            final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
            final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

            imageLoader.displayImage(images[position], imageView, options, new ImageLoadingListener() {

                public void onLoadingStarted() {
                    spinner.setVisibility(View.VISIBLE);
                }

                public void onLoadingFailed(FailReason failReason) {
                    String message = null;
                    switch (failReason) {
                        case IO_ERROR:
                            message = "Input/Output error";
                            break;
                        case OUT_OF_MEMORY:
                            message = "Out Of Memory error";
                            break;
                        case UNKNOWN:
                            message = "Unknown error";
                            break;
                    }
                    Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

                    spinner.setVisibility(View.GONE);
                    imageView.setImageResource(android.R.drawable.ic_delete);
                }

                public void onLoadingComplete() {
                    spinner.setVisibility(View.GONE);
                    Animation anim = AnimationUtils.loadAnimation(ImagePagerActivity.this, R.anim.fade_in);
                    imageView.setAnimation(anim);
                    anim.start();
                }

                public void onLoadingCancelled() {
                    // Do nothing
                }
            });

            ((ViewPager) view).addView(imageLayout, 0);
            return imageLayout;
        }

        public boolean isViewFromObject(View view, Object object) {
            return view.equals(object);
        }

        public void restoreState(Parcelable state, ClassLoader loader) {
        }

        public Parcelable saveState() {
            return null;
        }

        public void startUpdate(View container) {
        }
    }
} 
```

**ac_image_pager.xml**

```
<?xml version="1.0" encoding="utf-8"?>
        <android.support.v4.view.ViewPager
     xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

**item_pager_image.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:padding="1dip">

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:adjustViewBounds="true" />

    <ProgressBar
        android:id="@+id/loading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:visibility="gone" />

</FrameLayout> 
```

Thanks.

# javascript - 具有特定 innerHTML 的 Jquery 选择器

> ID：11402776
> 
> 赞同：0
> 
> 时间：2012-07-09T20:41:10.263
> 
> 标签：javascript, jquery, selector, innerhtml

`$('.select option:selected[innerHTML="5"]')`

我的目标是选择一个当前选择的选项并且其 innerHTML 与字符串**完全**匹配（例如：“5”）

这是一个小提琴：http: [//jsfiddle.net/kxkzU/4/](http://jsfiddle.net/kxkzU/4/)

**这 :** `$('.select option:selected:contains("5")')` **不起作用，**因为那时值 0.375 将匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:46:29.077

使用过滤器：

```
$('.select option:selected').filter(function(){
    return this.innerHTML == 5;
}).html("good"); 
```

[http://jsfiddle.net/kxkzU/5/](http://jsfiddle.net/kxkzU/5/)

此外，您的小提琴具有`.select`className 而不是`select`.

# html - 是否有自行关闭的标签的名称？

> ID：11402777
> 
> 赞同：8
> 
> 时间：2012-07-09T20:41:27.567
> 
> 标签：html, xml, tags

在 HTML 或 XML 等基于标签的语言中，有些标签会在不使用第二个标签的情况下自行关闭：

```
<tag/> 
```

而不是这样：

```
<tag></tag> 
```

关闭自己的标签是否有特定名称？

谢谢！:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T20:44:16.787

[XML 规范](http://www.w3.org/TR/REC-xml/)将它们称为**空元素标记**。

[来源](http://www.w3.org/TR/REC-xml/#sec-starttags)：

> 定义：一个没有内容的元素被称为是空的。] 一个空元素的表示要么是一个开始标签紧跟一个结束标签，要么是一个空元素标签。[定义：空元素标签采用特殊形式：]

# c# - 如何从视图中获取在文本框中输入的值

> ID：11402778
> 
> 赞同：2
> 
> 时间：2012-07-09T20:41:29.590
> 
> 标签：c#, asp.net-mvc

我的 MVC 视图有一个带有可编辑字段的表，如下所示。

```
 <td>
     <div class="view">
         <%= Model.device_Url%>
         </div>
         <div class="edit">
         <input type="text" name="deviceurl" id = "deviceurl" value="<%= Model.device_Url%>" />   

      </div>
 </td> 
```

用户可以选择编辑然后保存在上述文本框字段中输入的值。

```
 <td class="options">
    <div class="view">
        <a href="#" class="switchToEdit">Edit</a>
    </div>
     <div class="edit">
      <a href="/Live/Update?streamurl=deviceurl class="save refresh">Save</a>
      <a href="#" class="cancel">Cancel</a>  
        </div>
    </td> 
```

我想调用我的控制器 /Live/Update 并传入 URL 文本框中更改的值。

我将如何获取在文本框中输入的值。

我需要java脚本来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:55:14.310

除非您想使用传统提交，否则您将需要 javascript。

最简单的方法是使用 jQuery 并使用类似于以下的代码行获取值：

```
$("#deviceurl").val() 
```

然后我会进行 ajax 调用以将值提交回控制器的操作。您可能还想使用 Url.Action 帮助器来构建 Url：

```
$.ajax(
        url: '<%=Url.Action("Update")%>,
        data : {deviceUrl :  $("#deviceurl").val()},
        success : function (result){
           // handle logic when the update succeeds
        }
      ); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:39:00.280

我的建议是让你使用 Html.ActionLink 而不是使用这个 Save

```
like this : 
<%=Html.ActionLink("Save", 
                "Live",  // <-- Controller Name.
                "Update",   // <-- ActionMethod
                new { streamurl = deviceurl },
                new { @class = "save refresh" }
                )
%> 
```

# objective-c - Objective-C, NSArray from executableArchitectures

> ID：11402783
> 
> 赞同：0
> 
> 时间：2012-07-09T20:41:46.500
> 
> 标签：objective-c, nsbundle

I'm trying to determine the architecture of another file from my application. I'm using my application bundle and comparing it to a different bundle in my example. The methods are in place and they do return values to NSLog, although they are not the values I was expecting. Can anyone make some sense as to how to interpret the returned values?

```
- (void)whatArch {

        NSArray *x86_64_Arch = [[NSBundle mainBundle] executableArchitectures];
        NSArray *i386_Arch = [[NSBundle bundleWithPath:@"/path/to/other/bundle"] executableArchitectures];
        NSLog(@"%@ %@",[x86_64_Arch componentsJoinedByString:@" "], [i386_Arch componentsJoinedByString:@" "]);

} 
```

The output I get is:

```
2012-07-09 00:00:59.990 whatArch[2200:403] 16777223 7 18 
```

The [16777223] is the value that returns for the x86_64 bundle, and [7 18] for the (other) i386 bundle. When I read the documentation on [executableArchitecture](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/doc/uid/20000214-SW32) it shows something much different:

[Mach-O Architecture](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/doc/constant_group/Mach_O_Architecture)

These constants describe the CPU types that a bundle’s executable code may support.

```
enum {
   NSBundleExecutableArchitectureI386      = 0x00000007,
   NSBundleExecutableArchitecturePPC       = 0x00000012,
   NSBundleExecutableArchitectureX86_64    = 0x01000007,
   NSBundleExecutableArchitecturePPC64     = 0x01000012
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:50:39.607

```
NSLog(@"%u 0x%x", 0x01000007, 16777223);    // Prints 16777223 0x1000007
NSLog(@"0x%x %u", 18, 0x00000012);    // Prints 0x12 18 
```

我将把 7 和 0x7 作为练习留给读者。

你知道[圣诞节（12 月 25 日）和万圣节（10 月 31 日）实际上是同一天](http://en.wikipedia.org/wiki/Mathematical_joke#Jokes_with_numeral_bases)吗？

# r - Tufte tables: convert quartile plots into standard error plots hacking qTable function from NMOF package

> ID：11402784
> 
> 赞同：3
> 
> 时间：2012-07-09T20:41:48.877
> 
> 标签：r, latex, data-visualization, standard-error, tufte

If you remember there is a nice version of table conceived by Tufte that include small quartile plots running next to the corresponding data rows:

![enter image description here](../Images/a0e563cc27a9cd1300809561ed94c192.png)

There is an implementation of such solution in R using [package NMOF](http://cran.r-project.org/web/packages/NMOF/index.html) and function `qTable`, which basically creates the table shown above and outputs it as a LaTeX code:

```
require(NMOF)
x <- rnorm(100, mean = 0, sd = 2)
y <- rnorm(100, mean = 1, sd = 2)
z <- rnorm(100, mean = 1, sd = 0.5)
X <- cbind(x, y, z)
qTable(X,filename="res.tex")#this will save qTable in tex format in current dir 
```

This method of visualization seem to be especially useful if you have a small amount of information to present, and you don't want to waste a space for the full graph. But I would like to hack `qTable` a bit. Instead of displaying quantile plots, I would prefer to display standard errors of the mean. I am not great in hacking such functions, and I used brute force to do it. I replaced the line from the `qTable` function which computes quantiles:

```
A <- apply(X, 2L, quantile, c(0.25, 0.5, 0.75)) 
```

with something very brutal, that computes standard errors:

```
require(psych)#got 'SE' function to compute columns standard deviation     
M = colMeans(X)#column means
SE = SD(X)/sqrt(nrow(X))#standard error
SELo = M-SE#lower bound
SEHi = M+SE#upper bound
A = t(data.frame(SELo,M,SEHi))#combines it together 
```

I know, I know it's possibly unsustainable approach, but it actually works to some extend - it plots standard errors but keeps this gap in the plot:

![enter image description here](../Images/6d9dbdd59f37d0ee08cc361d5435b464.png)

and I would like this gap to disappear.

[Here is a qTable function with modification discussed above](https://gist.github.com/3078746).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:45:30.627

要消除间隙，您可以插入以下两行：

```
B[2, ] <- B[3, ]
B[4, ] <- B[3, ] 
```

就在`for`开始的循环之前

```
for (cc in 1L:dim(X)[2L]) {... 
```

为什么它有效？从左到右读图，五行`B`对应where

```
1) the left segments start
2) the left segments ends
3) the dots are
4) the right segments start
5) the right segments end 
```

所以通过强迫`B[2, ]`和你有效`B[4, ]`地`B[3, ]`摆脱了差距。

# javascript - Retrieving an element's value by string in JQuery

> ID：11402787
> 
> 赞同：0
> 
> 时间：2012-07-09T20:42:01.200
> 
> 标签：javascript, jquery

I would like to do the following in JQuery:

```
var test = "'#ISP'";

alert($(test).val()); 
```

I get "Syntax error, unrecognized expression."

I know i am missing something here.

Thanks alot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:44:06.520

你可以这样做

```
var test = "ISP";
alert($("#"+test).val()); 
```

或从您的表达式中取出额外的单引号

```
var test = "#ISP";
alert($(test).val()); 
```

工作样本：http: [//jsfiddle.net/VwDyW/9/](http://jsfiddle.net/VwDyW/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:47:00.093

您必须删除 "s 内的 's

```
var test = "#ISP";
alert($(test).val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:47:26.610

```
var test = "#ISP";

alert($(test).val()); 
```

你的报价翻了一番。取出额外的`''`.

**演示** [http://jsfiddle.net/R7dae/](http://jsfiddle.net/R7dae/)

# sql - Trying to figure out the sum of a certain variable not total sum using sql

> ID：11402791
> 
> 赞同：0
> 
> 时间：2012-07-09T20:42:20.060
> 
> 标签：sql, sum

I'm having a mindblank here but my question is quick.

I have a table like the following:

```
Cust    Part    Qty    Rtn Qty 
Joe      A1      2        0 
Joe      A2      3        1 
Joe      A1      2        2
Bob      A1      3        4
Bob      A2      4        0 
```

I want the results to be like:

```
Joe      A1      4        2
Joe      A2      3        1
Bob      A1      3        0
Bob      A2      4        0 
```

I'm trying to figure out how to create a sum for each customer individually according to the part?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:43:29.117

That looks like a straightforward `group by` on `Cust, Part`:

```
select  Cust
,       Part
,       sum(Qty)
,       sum([Rtn Qty])
from    YourTable
group by
        Cust
,       Part 
```

# javascript - Binding and _.bindAll in backbone.js

> ID：11402792
> 
> 赞同：4
> 
> 时间：2012-07-09T20:42:20.457
> 
> 标签：javascript, jquery, backbone.js, underscore.js

I am confused about binding and the purpose of `_bind.All` in backbone.js. Below is a working code that creates a Modal view `#modal` and renders out comments fetched from the backend.

Firstly, in the code below, I have in the `initialize` function `_.bindAll(this, 'render', 'renderComments');`. Whether or not I do `_.bindAll()`, I have no problems calling `this.render()` and `this.renderComments()` inside `initialize()`. Are there any examples of when `_.bindAll()` will help us and when it will not?

```
ModalView = Backbone.View.extend({
    el: $('#modal'),

    template: _.template( $('#tpl_modal').html() ),

    initialize: function() {
        _.bindAll(this, 'render', 'renderComments');
        this.render();
        this.renderComments();
    },

    render: function() {
        $(this.el).fadeIn('fast').append( this.template( this.model.toJSON( this.model ) ) );
    },

    renderComments: function() {
        this.commentList = new CommentCollection();
        var self = this;
        this.commentList.fetch({
            data: { post_id: this.model.id},
            processData: true,
            success: function() {
                self.commentListView = new CommentListView({ collection: self.commentList });
            }
        });
    }
}); 
```

And

```
CommentListView = Backbone.View.extend({
    el: '.modal_comments',

    initialize: function() {
        this.render();
    },

    render: function() {
        var self = this;
        this.collection.each( function(comment, index) {
            $(self.el).append( new CommentListItemView({ model: comment }).render().el );
        });
        return this;
    }
}); 
```

Secondly, I am confused about prepending `this.` to something. For example in `renderComments`, why cant I use:

```
var commentList = new CommentCollection();
var self = this;
commentList.fetch({.... }); 
```

For the line `this.commentList = new CommentCollection();`, other than instantiating the class `CommentCollection()`, does it make `commentList` a child of `ModalView`?

Additionally, is it necessary to have `var self = this;` and use `self.commentListView` later in the callback function? Can binding be used so I can access `this.commentListView`, or is using `var self = this` the conventional way of doing things?

Finally, should `self.commentListView = new CommentListView({ collection: self.commentList });` in the success function of `renderComments` be moved to `CommentListView`'s initialize method instead and be binded to `this.collection.on('reset');` to prevent nesting too many functions? This will result in:

```
ModalView = Backbone.View.extend({
    el: $('#modal'),

    template: _.template( $('#tpl_modal').html() ),

    initialize: function() {
        _.bindAll(this, 'render', 'renderComments');
        this.render();
        this.renderComments();
    },

    render: function() {
        $(this.el).fadeIn('fast').append( this.template( this.model.toJSON( this.model ) ) );
    },

    renderComments: function() {
        this.commentList = new CommentCollection();
        this.commentListView = new CommentListView({ collection: this.commentList });
        this.commentList.fetch({
            data: { post_id: this.model.id},
            processData: true
        });
    }
});

CommentListView = Backbone.View.extend({
    el: '.modal_comments',

    initialize: function() {
        this.collection.on('reset', this.render, this);
    },

    render: function() {
        var self = this;
        this.collection.each( function(comment, index) {
            $(self.el).append( new CommentListItemView({ model: comment }).render().el );
        });
        return this;
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T21:29:46.710

唷——长问题；）

1）`_.bindAll`当我第一次使用主干时，我曾经在我的初始化方法中做过，但后来我停止了。通常不需要它，除非你绑定到事件，然后它真的很有帮助。例如，如果您有：

```
events:
{
    'click': clickHandler
},
clickHandler: function(){
    //do cool stuff
} 
```

那么这样做会很有帮助，`_.bindAll(this, 'clickHandler')`否则您的`this`指针将不会是视图

2）如果我理解您的问题：`commentList`成为您的实例的属性`ModalView`。

3) using`var self = this;`比较常见，但在很多情况下可以避免因为 Underscore.js 中的重载（这是backbone.js 的依赖项）。例如，大多数集合函数（`map`、`each`等）都将上下文作为最后一个参数。所以而不是

```
var self = this;
_.map([1,2], function(item){
    self.sum = self.sum + item; 
}); 
```

你可以做：

```
_.map([1,2], function(item){
    this.sum = this.sum + item; 
}, this); 
```

如果你的情况你可以`success`用

```
success: _.bind(function() {
             this.commentListView = new CommentListView({ collection: this.commentList });
         }, this); 
```

如果您想了解更多关于这个指针有点令人困惑的主题的信息，建议您阅读以下优秀教程： [http ://bonsaiden.github.com/JavaScript-Garden/#function.this](http://bonsaiden.github.com/JavaScript-Garden/#function.this)

4) 是的——我会将渲染移至`reset`. 这样，如果其他原因导致集合重置，视图将拾取它。

希望我回答了你所有的问题。

# ruby - 通过 BasicObject 透明度委托

> ID：11402796
> 
> 赞同：4
> 
> 时间：2012-07-09T20:42:37.543
> 
> 标签：ruby, delegates, decorator

**上下文**：我正在尝试在 Ruby 中建立一个装饰器模式。由于装饰器应该将所有未知方法委托给底层对象，因此我使用了 Delegator 类。我本可以使用 SimpleDelegator，但我想完全了解我在做什么。

所以我提出的基本代码是：

```
class Decorator < Delegator
  def initialize(component)
    super
    @component = component
  end

  def __setobj__(o); @component = o   end
  def __getobj__;    @component       end
  def send(s, *a);   __send__(s, *a)  end
end 
```

这与 SimpleDelegator 的实现完全相同。看起来不错。

但我不想让处理装饰器的代码知道它正在操纵装饰器。我想要完全透明。

这一刻`Decorator.new(Object.new).class`回来了`Decorator`

所以我修改了一下，想出了这个：

```
class Decorator < Delegator
  undef_method :==
  undef_method :class
  undef_method :instance_of?

  # Stores the decorated object
  def initialize(component)
    super
    @component = component
  end

  def __setobj__(o); @component = o   end
  def __getobj__;    @component       end
  def send(s, *a);   __send__(s, *a)  end
end 
```

这样，我可以安全地使用`class`或`instance_of?`在我的 Decorated 对象上，它会通过 method_missing（由 Delegator 实现）将方法发送到底层对象。

问题是：我不明白为什么我必须 undef`:class`和`:instance_of?`. 我可以看到 BasicObject 定义了`:==`所以我不得不取消定义它但是那两个呢？我查看了 BasicObject 文档和 C 代码中的一些内容，但没有找到任何东西。我查看了 Delegator 文档和代码，也没有找到任何东西。似乎 Delegator 包含 Kernel 模块，但是 Kernel#class 还是 Kernel#instance_of？不存在。

这两种方法是从哪里来的？如果它们根本没有实施，为什么我需要取消定义它们？我想我一定是遗漏了一些关于 Ruby 的对象模型之类的东西。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T03:44:55.797

您可以通过检查方法获得提示：

```
Decorator.instance_method(:class)
  # =>  #<UnboundMethod: Decorator(#<Module:0x00000102137498>)#class> 
```

该方法的所有者`Decorator`实际上是在`#<Module:0x00000102137498>`. 所以有一个匿名模块来定义它。有趣...让我们看看：

```
Decorator.ancestors
  # => [Decorator, Delegator, #<Module:0x00000102137498>, BasicObject] 
```

又是那个模块，在`Delegator`和之间`BasicObject`。所以`Delegator`不直接派生自`BasicObject`. 如果您查看源代码，`lib/delegate.rb`您会发现：

```
class Delegator < BasicObject
  kernel = ::Kernel.dup
  kernel.class_eval do
    [:to_s,:inspect,:=~,:!~,:===,:<=>,:eql?,:hash].each do |m|
      undef_method m
    end
  end
  include kernel
  # ... 
```

所以制作了一个模块的副本`Kernel`，它没有`to_s`,`inspect`等......但仍然有`class`and `instance_of?`。它包含在`Delegator`其中，这就是它们的来源。

请注意，`Object`通过包含模块来继承相同的方法`Kernel`（但它当然包含完整的模块）：

```
42.method(:class) # => #<Method: Fixnum(Kernel)#class> 
```

这在[`Object`文档](http://www.ruby-doc.org/core-1.9.3/Object.html)中有所说明：

> 对象混合在内核模块中，使内置内核函数可以全局访问。尽管 Object 的实例方法是由 Kernel 模块定义的，但为了清楚起见，我们选择在此处记录它们。

# asp.net-mvc - Why is this checkbox[list] returning 1 or false?

> ID：11402797
> 
> 赞同：0
> 
> 时间：2012-07-09T20:42:41.667
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html-helper

When I checked both checkboxes, I get "1". When I check the first checkbox, I get "1". When I check only the second checkbox, I get "false". Why is that? And also, how do I get the other checkbox to post its value (or at all)? The code and resulting HTML below.

```
@model InspectionWebFormsMVC.ViewModels.CtrlInputDataModel

@{
    var ddv = new SelectList(Model.RowCtrl.DefaultValues, "Value", "Label");

    switch (Model.RowCtrl.Type)
    {
        case "checkbox":
            foreach (var sli in ddv)
            {
                @Html.LabelFor(blah => blah.InputtedData, sli.Text)

                bool isChecked = false;
                string attrChecked = "checked";
                if (Model.InputtedData == sli.Value){
                    isChecked = true;
                    @Html.CheckBox("InputtedData", isChecked, new { @value = sli.Value, @checked = attrChecked })
                }
                else {
                    isChecked = false;
                    @Html.CheckBox("InputtedData", isChecked, new { @value = sli.Value })
                }

            }
                @Html.HiddenFor(blah => blah.InputtedDataID)
                @Html.HiddenFor(blah => blah.RowCtrl.CtrlTypeID)

                <br />
        break;
    }
} 
```

Resulting HTML:

```
<label  for="sectionRows_a7d91de2-c828-4cd4-979d-783caf85ae3b__RowInput_0__InputtedData">Red</label>

<input  id="sectionRows_a7d91de2-c828-4cd4-979d-783caf85ae3b__RowInput_0__InputtedData" 
        name="sectionRows[a7d91de2-c828-4cd4-979d-783caf85ae3b].RowInput[0].InputtedData" 
        type="checkbox" 
        value="1" />

<input  name="sectionRows[a7d91de2-c828-4cd4-979d-783caf85ae3b].RowInput[0].InputtedData" 
        type="hidden" 
        value="false" />

<label  for="sectionRows_a7d91de2-c828-4cd4-979d-783caf85ae3b__RowInput_0__InputtedData">Super</label>

<input  checked="checked" 
        id="sectionRows_a7d91de2-c828-4cd4-979d-783caf85ae3b__RowInput_0__InputtedData" 
        name="sectionRows[a7d91de2-c828-4cd4-979d-783caf85ae3b].RowInput[0].InputtedData" 
        type="checkbox" 
        value="2" />

<input  name="sectionRows[a7d91de2-c828-4cd4-979d-783caf85ae3b].RowInput[0].InputtedData" 
        type="hidden" 
        value="false" />

<input  data-val="true" 
        data-val-number="The field InputtedDataID must be a number." 
        data-val-required="The InputtedDataID field is required." 
        id="sectionRows_a7d91de2-c828-4cd4-979d-783caf85ae3b__RowInput_0__InputtedDataID" 
        name="sectionRows[a7d91de2-c828-4cd4-979d-783caf85ae3b].RowInput[0].InputtedDataID" 
        type="hidden" 
        value="5" />

<input  data-val="true" 
        data-val-number="The field CtrlTypeID must be a number." 
        data-val-required="The CtrlTypeID field is required." 
        id="sectionRows_a7d91de2-c828-4cd4-979d-783caf85ae3b__RowInput_0__RowCtrl_CtrlTypeID" 
        name="sectionRows[a7d91de2-c828-4cd4-979d-783caf85ae3b].RowInput[0].RowCtrl.CtrlTypeID" 
        type="hidden" 
        value="5" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:09:37.777

1.  当多个输入元素共享同一个`name`时，只发布第一个。
2.  未选中复选框时，它们不会发布任何内容。

因此，当您选中第一个复选框时，您会得到“1”。之后的一切都被忽略。当您没有第一个复选框时，隐藏字段会发布“false”。之后的一切都被忽略。

如果您想知道隐藏字段的来源，MVC 助手会创建一个具有相同名称和值的隐藏字段，`false`因为上面的#2。复选框应该代表布尔值，因此他们希望始终发布 true/false，而不是 value/(nothing)。

# jquery - Masonry js不会垂直捆绑图像

> ID：11402798
> 
> 赞同：2
> 
> 时间：2012-07-09T20:42:50.147
> 
> 标签：jquery, jquery-masonry

图像水平正确对齐，但它们都垂直间隔开。看看这里[http://brstudios.co.uk/testing](http://brstudios.co.uk/testing)看看我的意思是正确的。

我的标记如下（简化）：

```
<html>

<head>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="http://masonry.desandro.com/jquery.masonry.min.js"></script>
<script type="text/javascript" src="https://raw.github.com/desandro/imagesloaded/master/jquery.imagesloaded.min.js"></script>

<script type="text/javascript">
  var $container = $('.portfolio-container');
  $container.imagesLoaded(function(){
    $container.masonry({
      itemSelector : '.break',
      columnWidth : 429
  });
});
</script>

<style type="text/css">
.break {
    float: left;
    width: 429px;
    margin: 10px 20px;
  }
</style>

</head>

<body>

<div class="portfolio-container">

<?php do { ?>

<div class="break">

// Contents taken from MySQL //

</div>

<?php } while ($row_displayPosts = mysql_fetch_assoc($displayPosts)); ?>

</div>

</body>

</html> 
```

我认为它的一部分正在工作，但正如您从链接中看到的那样，只要它没有将元素垂直移动在一起。有没有人有任何指示？

工作更新：

```
 <script type="text/javascript">

    $(document).ready(function() {

        var $container = $('.portfolio-container');
          $container.imagesLoaded(function(){
            $container.masonry({
              itemSelector : '.break',
              columnWidth : 429,
              gutterWidth : 40      //Added gutter to simulate margin
          });
        });

    });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:56:41.473

您需要将脚本包装在 JQuery 的 dom 中：

```
$(document).ready(function() {

    var $container = $('.portfolio-container');
      $container.imagesLoaded(function(){
        $container.masonry({
          itemSelector : '.break',
          columnWidth : 429
      });
    });

}); 
```

Masonry 实际上并没有在您的页面上运行，这就是为什么您的元素只是浮动而不是按照您期望的方式排列的原因。

编辑：

下载您的页面并使用它后，您似乎还需要删除：

```
margin: 10px 20px; 
```

从你的`.break`班级

以及将砌体脚本包装在`$(document).ready`

我怀疑您的边距使元素太宽而无法并排堆叠

# php - A particular double "for" loop

> ID：11402799
> 
> 赞同：0
> 
> 时间：2012-07-09T20:42:52.907
> 
> 标签：php, loops, for-loop

$bar contains 4 (in this example, but potentially much more than 4) values I want to copy into $foo and $blah in this way:

```
$foo[0] = $bar[0];
$foo[1] = $bar[2];
$blah[0] = $bar[1];
$blah[1] = $bar[3]; 
```

So, the even rows of $bar will be copied into $foo[i], and the odd rows will be copied into $blah[i].

I tried with:

```
for($i=0; $i<2; $i++)
{
    for($j=0; $j<4; $j++)
    {  
        if($j % 2 == 0)
            {  
            $foo[$i] = $bar[$j]; // EVEN
            }
            else
            {
            $blah[$i] = $bar[$j];  // ODD
        }
    }
} 
```

However if I show the output of $foo and $blah, $foo[0] is equal to $foo[1], and $blah[0] is equal to $blah[1], while they should contain different values.

Example: Source:

```
$bar[0]: 27.8
$bar[1]: Napoli-Posillipo
$bar[2]: 29
$bar[3]: Stadio San Paolo di Napoli, Napoli 
```

(wrong) result of the loop:

```
$foo[0] = 29 (it should be 27.8)  
$foo[1] = 29
$blah[0] = Stadio San Paolo di Napoli, Napoli (it should be Napoli-Posillipo)
$blah[1] = Stadio San Paolo di Napoli, Napoli 
```

Any hints? Thanks

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T20:45:52.613

你已经把它变得复杂了，像这样简单的东西应该可以工作：

```
foreach ($bar as $k=>$v){
    if($k % 2 == 0){  
         $foo[] = $v; // EVEN
    }else{
         $blah[] = $v;  // ODD
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T20:48:49.803

怎么样

```
foreach($bar as $key => $value) {
   if($key % 2 == 0) {
      //even
      $foo[] = $value;
   }
   else {
      // odd
      $blah[] = $value;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:49:25.970

你自己说的：

“所以，$bar 的偶数行将被复制到 $foo[i]，奇数行将被复制到 $blah[i]”。

循环所有 $bar，并将奇数行复制到 $blah，甚至复制到 $foo：

```
for ($i = 0; $i < 4; $i++)
  if ($i % 2)
     $blah[$i/2] = $bar[$i];
  else
     $foo[$i/2] = $foo[$i]; 
```

在一般情况下：

```
 switch($i % N) // "N" for Napoli :-D
  {
     case 0: $VAR1[$i/N] = $bar[$i]; break;
     case 1: $VAR2[$i/N] = $bar[$i]; break;
     ...
  } 
```

# c# - 电子邮件发送了 3 次 asp.net 网站

> ID：11402800
> 
> 赞同：1
> 
> 时间：2012-07-09T20:42:54.117
> 
> 标签：c#, asp.net, email, iis, web-config

我正在开发一个电子商务网站，我们正在尝试解决一个问题。客户完成订单后，她会收到三封电子邮件（全部相同）而不是一封。该网站在三台服务器上运行，我们认为这是问题所在，因为仅使用一台服务器会将一封电子邮件发送给客户。我想知道我们应该怎么做，这样用户将只收到一封电子邮件而不是三封电子邮件，我们仍将在三台服务器上运行该网站。提前致谢， Laziale

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T22:30:27.033

为此，您不能指望数据库中的锁定提示。提示只是提示；无法保证锁定会按您的预期发生（假设这是 SQL Server）。一般来说，关系数据库就是这样，一个数据库。表不是一种排队机制，如果您尝试以这种方式使用它，您总会遇到问题。

尽管如此，为了实现不同的解决方案，我们必须确定是单个记录被添加到“队列”还是三个记录被添加。如果是第一个，并且只添加了一条记录但发送了三封电子邮件，那么解决方案很简单。不要使用数据库表作为队列，而是使用 Microsoft 消息队列 (MSMQ)。它们是 Windows Server 的一部分，至少从 2003 年就开始存在，甚至可以追溯到 2000 年。它们将为您提供一个专门为您要完成的任务而设计的实际队列。

如果将三个实际记录添加到数据库中的“队列”表中，则意味着存在代码问题。即使负载平衡器中有三台 Web 服务器，事实仍然是单个订单提交仅发生在其中一台服务器上。将电子邮件通知放入队列的业务逻辑不能来自多个服务器，因为请求仅源自一台服务器。

我会先检查表格并确定是否添加了多条记录。如果不是，请将实现更改为使用 MSMQ。如果是这样，请检查您的代码以了解为什么在请求中添加了多个记录。

# facebook-like - Trying to understand the restriction difference between the Open Graph "follow" and "like" actions

> ID：11402801
> 
> 赞同：0
> 
> 时间：2012-07-09T20:43:02.323
> 
> 标签：facebook-like, publish, facebook-opengraph

Looking at these 2 articles:
Like: [https://developers.facebook.com/blog/post/465/](https://developers.facebook.com/blog/post/465/)

> You can publish stories to people who like your Open Graph Page the same way you write a Facebook post from your own wall. The stories appear in the News Feeds of people who have clicked the Like button on the Open Graph Page.
> 
> You can also publish using our API. If you associate your Open Graph Page with a Facebook app using the fb:app_id meta tag, you can publish updates to the users who have liked your pages via the Graph API.

Follow: [https://developers.facebook.com/docs/opengraph/actions/builtin/follows/](https://developers.facebook.com/docs/opengraph/actions/builtin/follows/)

> Similar to the ability to subscribe to a user's posts on Facebook, users can now follow other users' Open Graph activities from a specific app. For example, on a movie review site, users can follow their favorite movie reviewers. When a user follows another user in your app, all of the content published in your app by the publisher is eligible to be displayed in the follower's News Feed even if they are not Facebook friends (as long as the privacy on the actions published allows the follower to see the post):

It appears that in both cases you can create an Open Graph object that lives outside of facebook and either "follow" or "like" it. Using one example provided in the articles you could for example make that object be

> http//www.rottentomatoes.com/celebrity/tom_hanks/

If you decide to "like" Tom Hanks on the site, the page can publish news about Tom Hanks and they will show up in your News feed. (Assuming all permissions are ok, no worries there).
However if you decide to "follow" Tom Hanks on the site, if I understand correctly the requirements posted by facebook:

> In this case, the document returned by fetching the URL should have an fb:profile_id meta tag which represents the Facebook ID of the user:

```
<meta property="fb:profile_id" content="lbRw_a8fwsz8u7a_-iL5bCxjJ8w" /> 
```

> We recommend that the content of this field be the third_party_id of a user, which can be retrieved by adding ?fields=third_party_id to the request URL when retrieving the user's information, and described in the documentation for the Graph API User object.
> 
> This tag is not required, and follow actions will succeed without it, though followers will not see activity in their News Feeds without this.

since the page lives outside of Facebook, it won't have a third_party_id and therefore if the site publishes news about Tom Hanks, you will not see that news appear in your News Feed.

Is there any reason why things behave like this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:28:03.970

与 Like 类似，Follow 最初发布一个故事。然而，Follow 允许应用在您的应用上下文中在两个 facebook 用户之间建立“订阅”关系。考虑下面的示例，该示例还说明了如何`third_party_id`使用来创建这种关系：

假设 William 在您的应用中关注了 Claudette，并且您的应用成功在 facebook 上发布了关注操作。无论您是否提供 Claudette 的`third_party_id`信息，William 关注 Claudette 的故事都将在 William 的 News Feed 上发布。

但是，如果`third_party_id`提供了 Claudette's，那么 William 将开始获取有关您的应用程序发布的 Claudette 的所有操作的故事。现在，这很酷。但当然要做到这一点，Facebook 需要知道“克劳黛特是谁” `third_party_id`。

总而言之，通过不提供`third_party_id`后续操作，William 的新闻提要和可能会分享给 William 的朋友。但那是一次性的。通过提供，`third_party_id`您可以扩展病毒式传播并确保从 Claudette 到 William 的持续流动，以便 Claudette 在您的应用程序上执行操作。

# c# - How to get the current file path and know if the file is saved

> ID：11402804
> 
> 赞同：-1
> 
> 时间：2012-07-09T20:43:27.123
> 
> 标签：c#, .net, file, file-io, filesystems

I'm making a simple text editor in .net. I need to know how to get two things to work:

1.  I need to know the full path of the current working file in the editor
2.  I need to prompt the user to save the file on exit if it's not already saved (at all)

Please explain on how to get the above implemented. Thanks! :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:55:22.667

查看[`OpenFileDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)将解释如何从文件系统中选择文件的课程。这是您可以开始的地方。

保存文件很简单，你可以使用[`System.IO`](http://msdn.microsoft.com/en-us/library/system.io.aspx);检查文件是否存在 例如[`File`](http://msdn.microsoft.com/en-us/library/system.io.file)和[`FileInfo`](http://msdn.microsoft.com/en-us/library/system.io.fileinfo)类开始，然后回到这里进一步的问题，这将是不可避免的。

祝你好运。

# bytecode - 使用 ASM 的类验证器 (org.objectweb.asm.util.CheckClassAdapter) 进行类验证期间出现 ClassNotFound 错误

> ID：11402809
> 
> 赞同：1
> 
> 时间：2012-07-09T20:43:33.473
> 
> 标签：bytecode, java-bytecode-asm

因此，这是我尝试使用 ASM 的类验证器验证的字节码片段：

```
public <init>(Ljava/io/InputStream;)V
    ALOAD 0
    ALOAD 1
    SIPUSH 2048
    NEW org/apache/xerces/impl/msg/XMLMessageFormatter
    DUP
    INVOKESPECIAL org/apache/xerces/impl/msg/XMLMessageFormatter.<init> ()V
    INVOKESTATIC java/util/Locale.getDefault ()Ljava/util/Locale;
    INVOKESPECIAL org/apache/xerces/impl/io/UTF8Reader.<init> (Ljava/io/InputStream;ILorg/apache/xerces/util/MessageFormatter;Ljava/util/Locale;)V
    RETURN
    MAXSTACK = 5
    MAXLOCALS = 2 
```

这是一个更大的类 org/apache/xerces/impl/io/UTF8Reader 的一部分。现在，当我通过 ASM 提供的 Class verifier 运行这个类的字节码时，我得到以下结果：

```
org.objectweb.asm.tree.analysis.AnalyzerException: **Error at instruction 7: java.lang.ClassNotFoundException: org.apache.xerces.util.MessageFormatter**
    at org.objectweb.asm.tree.analysis.Analyzer.analyze(Unknown Source)
    at org.objectweb.asm.util.CheckClassAdapter.verify(Unknown Source)
    at org.objectweb.asm.util.CheckClassAdapter.verify(Unknown Source)
    at org.objectweb.asm.util.CheckClassAdapter.main(Unknown Source)
Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: org.apache.xerces.util.MessageFormatter
    at org.objectweb.asm.tree.analysis.SimpleVerifier.getClass(Unknown Source)
    at org.objectweb.asm.tree.analysis.SimpleVerifier.isAssignableFrom(Unknown Source)
    at org.objectweb.asm.tree.analysis.SimpleVerifier.isSubTypeOf(Unknown Source)
    at org.objectweb.asm.tree.analysis.BasicVerifier.naryOperation(Unknown Source)
    at org.objectweb.asm.tree.analysis.BasicVerifier.naryOperation(Unknown Source)
    at org.objectweb.asm.tree.analysis.Frame.execute(Unknown Source)
    ... 4 more
<init>(Ljava/io/InputStream;)V
00000 UTF8Reader InputStream  :  :     ALOAD 0
00001 UTF8Reader InputStream  : UTF8Reader  :     ALOAD 1
00002 UTF8Reader InputStream  : UTF8Reader InputStream  :     SIPUSH 2048
00003 UTF8Reader InputStream  : UTF8Reader InputStream I  :     NEW org/apache/xerces/impl/msg/XMLMessageFormatter
00004 UTF8Reader InputStream  : UTF8Reader InputStream I XMLMessageFormatter  :     DUP
00005 UTF8Reader InputStream  : UTF8Reader InputStream I XMLMessageFormatter XMLMessageFormatter  :     INVOKESPECIAL org/apache/xerces/impl/msg/XMLMessageFormatter.<init> ()V
00006 UTF8Reader InputStream  : UTF8Reader InputStream I XMLMessageFormatter  :     INVOKESTATIC java/util/Locale.getDefault ()Ljava/util/Locale;
00007 UTF8Reader InputStream  : UTF8Reader InputStream I XMLMessageFormatter Locale  :     INVOKESPECIAL org/apache/xerces/impl/io/UTF8Reader.<init> (Ljava/io/InputStream;ILorg/apache/xerces/util/MessageFormatter;Ljava/util/Locale;)V
00008 ?        :     RETURN 
```

我对最后一点感到非常困惑......为什么它在第 7 行为 org/apache/xerces/util/MessageFormatter 对象发出 ClassNotFound 异常？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:49:04.343

ASM 的验证器工具会根据 JVM 规范检查每个堆栈和变量槽的有效性。其中一项检查是所有变量和堆栈槽中的值在合并点具有相同的类型。因此，此实现加载类以查找常见的超类型。

# visual-studio-2010 - 添加新页面视觉工作室

> ID：11402810
> 
> 赞同：1
> 
> 时间：2012-07-09T20:43:35.380
> 
> 标签：visual-studio-2010, windows-phone-7

我的朋友今天给我发了一个新的 .xaml 页面，适用于 windows phone 应用程序。我将 .xaml 和 .xaml.vb 文件放在我的 app 文件夹中，但视觉上看不到它们。我需要替换哪些文件以便视觉对象可以看到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:45:27.317

您可能需要按下解决方案资源管理器顶部的“显示所有文件”按钮。然后，您应该会看到已添加文件的“幽灵”图标。右键单击并“包含在项目中”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:50:30.083

您需要在解决方案资源管理器中右键单击该项目 - 然后选择“添加现有项目”。

或者，如果您的朋友将她的项目文件发送给您可能会更好——或者如果您使用源代码控制系统来共享文件——这可能会帮助您避免将来出现问题。

# ruby-on-rails - Expose controller's class method to view helper method?

> ID：11402812
> 
> 赞同：0
> 
> 时间：2012-07-09T20:43:53.993
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

How do I make the following method available in the view layer?

```
# app/controllers/base_jobs_controller.rb
class BaseJobsController < ApplicationController
  def self.filter_name
    (controller_name.singularize + "_filter").to_sym
  end
end 
```

I want to use it in a view helper like this:

```
module ApplicationHelper
  def filter_link(text, options = {})
    # Need access to filter_name in here....
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:53:40.283

而不是`helper_method`，我更喜欢在模块中包含这样的功能。

```
module BaseJobsHelp
  def filter_name
    (controller_name.singularize + "_filter").to_sym
  end
end 
```

然后将模块包含在`BaseJobsController`and`ApplicationHelper`中。

```
class BaseJobsController < ApplicationController
  include BaseJobsHelp

  # ...
end

module ApplicationHelper
  include BaseJobsHelp

  def filter_link(text, options = {})
    # You can access filter_name without trouble
  end
end 
```

根据模块中方法的内容，您可能需要使用替代方法来访问某些数据*（即当前控制器的名称）*。

# android - 如何压缩 JSONObject 在 Android 中通过 Http 发送它？

> ID：11402813
> 
> 赞同：8
> 
> 时间：2012-07-09T20:44:04.227
> 
> 标签：android, json, servlets, compression

我正在使用[此示例](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)中的代码将一个发送`JSONObject`到我的 Web 服务器。在这里重现代码`Android client`

```
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;

int TIMEOUT_MILLISEC = 10000;  // = 10 seconds
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
HttpClient client = new DefaultHttpClient(httpParams);

HttpPost request = new HttpPost(serverUrl);
request.setEntity(new ByteArrayEntity(
    postMessage.toString().getBytes("UTF8")));
HttpResponse response = client.execute(request); 
```

**我的问题**

如何`JSONObject`在将其发送到服务器之前进行最佳压缩以及如何在服务器上解压缩它（我正在使用`Java Servlets`）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-09T20:50:42.433

根据这个[http://android-developers.blogspot.com/2011/09/androids-http-clients.html](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)如果你使用 Gingerbread 或更高版本 HttpURLConnection 会自动添加 gzip 压缩：

> 在 Gingerbread 中，我们添加了透明响应压缩。HttpURLConnection 会自动将此标头添加到传出请求中，并处理相应的响应：
> 
> 接受编码：gzip

然后，您的网络服务器将需要处理 gzip 压缩。

编辑：
[使用 Java Servlet 提供 Gzipped 内容](https://stackoverflow.com/questions/1862908/serve-gzipped-content-with-java-servlets "使用 Java Servlet 提供 Gzipped 内容")

编辑 2：
使用 DefaultHttpClient 进行 Gzip 压缩 使用[HttpClient 启用 GZip 压缩](http://forrst.com/posts/Enabling_GZip_compression_with_HttpClient-u0X)

```
private static final String HEADER_ACCEPT_ENCODING = "Accept-Encoding";
private static final String ENCODING_GZIP = "gzip";

final DefaultHttpClient client = new DefaultHttpClient(manager, parameters);

client.addRequestInterceptor(new HttpRequestInterceptor() {
  public void process(HttpRequest request, HttpContext context) {
    // Add header to accept gzip content
    if (!request.containsHeader(HEADER_ACCEPT_ENCODING)) {
      request.addHeader(HEADER_ACCEPT_ENCODING, ENCODING_GZIP);
    }
  }
});

client.addResponseInterceptor(new HttpResponseInterceptor() {
  public void process(HttpResponse response, HttpContext context) {
    // Inflate any responses compressed with gzip
    final HttpEntity entity = response.getEntity();
    final Header encoding = entity.getContentEncoding();
    if (encoding != null) {
      for (HeaderElement element : encoding.getElements()) {
        if (element.getName().equalsIgnoreCase(ENCODING_GZIP)) {
          response.setEntity(new InflatingEntity(response.getEntity()));
          break;
        }
      }
    }
  }
}); 
```

编辑 3：
这是另一个 Stackoverflow 问题，关于[使用 Java 中的 HTTPClient 对帖子内容 GZip POST 请求进行](https://stackoverflow.com/questions/7153484/gzip-post-request-with-httpclient-in-java)gzip 压缩。您需要在发布数据之前手动压缩数据，因为正常的 http/gzip 操作是服务器将压缩后的内容发送到客户端。

# assembly - FILD、FSTP 和 FST 组装说明

> ID：11402823
> 
> 赞同：1
> 
> 时间：2012-07-09T20:44:48.580
> 
> 标签：assembly, floating-point, x86, reverse-engineering, fpu

所以我今天一直在解决[这个](http://crackmes.de/users/lucifer/first_c_crackme/)crackme。除了最后几条指令外，我设法找到并理解了串行生成例程。我决定**第一次在汇编中**编写一个注册机。一切都很顺利，直到我来到串行例程的最后几条指令。我正在使用 MASM 和英特尔组件（英特尔、AT&T，你怎么称呼这些？）这是我当前的代码：

```
.386
.model flat,stdcall
option casemap:none

include     \masm32\include\windows.inc
include     \masm32\include\kernel32.inc
include     \masm32\include\user32.inc
includelib  \masm32\lib\kernel32.lib
includelib  \masm32\lib\user32.lib

DlgProc     proto :DWORD,:DWORD,:DWORD,:DWORD
SerialCalc  proto :DWORD

.data
EnterText   db      "...enter a name...",0
temp        db      "temp",0
Format      db      "%i-x019871",0

.data?
NameBuffer      db          100 dup(?)
SerialBuffer    db          150 dup(?)
SerialLength    dd          ?
hInstance       HINSTANCE   ?

.const
IDC_NAME            equ     1002
IDC_SERIAL          equ     1003
IDC_GENERATE        equ     1004
IDC_NAMELABEL       equ     1005
IDC_SERIALLABEL     equ     1006
IDD_MAIN            equ     1001

.code
start:

    invoke GetModuleHandle, NULL
    mov hInstance,eax
    invoke DialogBoxParam, hInstance, IDD_MAIN, NULL, addr DlgProc, NULL
    invoke ExitProcess, 0

DlgProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM
    .if uMsg == WM_INITDIALOG
        invoke GetDlgItem,hWnd,IDC_NAME ;get IDC_NAME
        invoke SetFocus,eax             ;focus on it
    .elseif uMsg == WM_COMMAND
        mov eax, wParam ;wParam = control that issued the WM_COMMAND message
        .if ax == IDC_NAME ;if it was the name box
            shr eax, 16 ;shift right and get more info?
            .if ax == EN_CHANGE ;if the text was changed
                invoke GetDlgItemText, hWnd, IDC_NAME, addr NameBuffer, 100 ;get text
                invoke lstrlen, addr NameBuffer ;get length
                mov SerialLength, eax ;move length into var
                .if eax == 0 ;if length is 0
                    invoke SetDlgItemTextA, hWnd, IDC_SERIAL, addr EnterText ;"...enter a name..."
                .elseif eax > 0 ;if length is bigger than 0
                    invoke SerialCalc, hWnd ;calc
                    invoke SetDlgItemTextA, hWnd, IDC_SERIAL, addr SerialBuffer ;"serial"
                .endif
            .endif
        .endif
    .elseif uMsg == WM_CLOSE
        invoke EndDialog, hWnd, 0
    .endif

    xor eax,eax
    ret
DlgProc endp

SerialCalc proc hWnd:HWND
    ;push ecx allocate space for 1 local variable; i was trying to do something with local variables, but I failed
    mov edx, SerialLength
    imul edx, edx, 875CDh
    mov eax, 51EB851Fh
    mul edx
    mov eax, edx
    shr eax, 5h
    imul eax, eax, -370h
    xor edx, edx ;mov edx, 0
    ;problems start here; I took this code from a solution i found
    ;push edx
    ;push eax
    ;fild qword ptr [esp]
    ;add esp, 8
    ;fstp real8 ptr [SerialBuffer]
            ;more stuff should come here sprintf etc.. but since I haven't solved my main problem yet I decided not to rush
SerialCalc endp

end start 
```

这是程序本身的实际串行例程：

```
MOV EDX,EAX
IMUL EDX,EDX,875CD
MOV EAX,51EB851F
MUL EDX
MOV EAX,EDX
SHR EAX,5
IMUL EAX,EAX,-370
MOV EDX,0
PUSH EDX                                                            ; ||format = NULL
PUSH EAX                                                            ; ||s = FE8BC1A0
FILD QWORD PTR SS:[ESP]                                             ; ||
LEA ESP,DWORD PTR SS:[ESP+8]                                        ; ||
FSTP QWORD PTR SS:[EBP-410]                                         ; ||
FLD QWORD PTR SS:[EBP-410]                                          ; ||
FSTP QWORD PTR SS:[ESP+8]                                           ; ||
MOV DWORD PTR SS:[ESP+4],Crackme_.00401469                          ; ||ASCII "%i-x019871"
LEA EAX,[LOCAL.194]                                                 ; ||
MOV DWORD PTR SS:[ESP],EAX                                          ; ||
CALL <JMP.&msvcrt.sprintf>                                          ; |\sprintf
LEA EAX,[LOCAL.194]                                                 ; |
MOV DWORD PTR SS:[ESP+4],EAX                                        ; |
LEA EAX,[LOCAL.130]                                                 ; |
MOV DWORD PTR SS:[ESP],EAX                                          ; |
CALL <JMP.&msvcrt.strcmp>                                           ; \strcmp 
```

该例程计算在 EAX 中完成的序列，将其推入堆栈，然后据我了解，使用 FILD 将其推入 FPU 堆栈，使用 FSPT 将其从 FPU 中取出并将其放入 EBP-410， FLD 再次将 EBP-410 推送到 FPU 上，最后使用 FSTP 将其存储到 ESP+8 作为 sprintf 的参数。sprint 和 strcmp 在这里并不重要，但我还是将它们包括在内，这样您就可以更好地了解正在发生的事情。

顺便说一句，这个 LOCAL 194\. 是放置格式化字符串的地方。

我在互联网上搜索并找到了这些说明的描述，但没有找到任何可以帮助我将其转移到我的 keygen 的实际示例或材料。

所以最后一个问题是：如何将其转移到我的 keygen 中？我总是收到“程序已停止工作”消息，或者串行框中没有显示任何内容。我的 SerialCalc 例程中的注释内容是我从另一个人的解决方案中扯掉的部分，只是为了尝试它是否可以工作，但不幸的是，它没有。

如果您需要有关问题的更多详细信息或任何额外信息，请告诉我。

我为我的菜鸟道歉！

在此先感谢，Tuntuni。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:48:06.080

我终于明白了！似乎我在指令或其他东西之后没有正确平衡堆栈。无论如何，我用 Visual Studio 编写了内联汇编，终于让它工作了。谢谢阅读。

# javascript - 加载页面时javascript无法正常工作qtip2

> ID：11402834
> 
> 赞同：2
> 
> 时间：2012-07-09T20:45:36.153
> 
> 标签：javascript, html, qtip, qtip2

我用 javascript 写了一个很好的热图，到目前为止效果很好。热图基本上是一个带有颜色变化的表格，基于表格中显示的值的阈值。我使用 JavaScript 创建表格并设置颜色。但是，我想显示一个漂亮的弹出窗口，所以当用户将鼠标悬停在表格的单元格上时，会显示一些附加信息。我找到了这个库[qTip2](http://craigsworks.com/projects/qtip2/tutorials/)

```
$(document).ready(function(){

        $('#mytable td').qtip({
            overwrite : false,              // make sure it can't be overwritten
            content : {
                text : function(api){
                    return "Time spent: " + $(this).html();
                }
            },
            position : {
                my : 'top left',
                target : 'mouse',
                viewport : $(window),       //keep it on-screen at all time if possible
                adjust : {
                    x : 10, y : 10
                }
            },
            hide : {
                fixed : true                // Helps to prevent the tooltip from hiding occassionaly when tracking!
            },
            style : 'ui-tooltip-tipsy ui-tooltip-shadow'
        });
    }); 
```

此函数创建热图：

```
function makeTable(data)
    {
        var row = new Array();
        var cell = new Array();

        var row_num = 26;
        var cell_num = 44;

        var tab = document.createElement('table');
        tab.setAttribute('id', 'mytable');
        tab.border = '1px';

        var tbo = document.createElement('tbody');

        for(var i = 0; i < row_num; i++){
            row[i] = document.createElement('tr');

            var upper = (i+1)*44;
            var lower = i*44;
            for(var j = lower; j < upper; j++){
                cell[j] = document.createElement('td');
                //cell[j].setAttribute('class', 'selector');
                if(data[j] != undefined){
                    var count = document.createTextNode(data[j].diff);
                    cell[j].appendChild(count);
                    var index = parseInt(data[j].diff);
                    /* specify which color better suits the heatmap */
                    if(index >= 0 && index <= 100){
                        cell[j].style.backgroundColor = '#00BFFF';
                    }
                    else if(index > 100 && index <= 1000){
                        cell[j].style.backgroundColor = "#6495ED";
                    }
                    else if(index > 1000 && index <= 4000){
                        cell[j].style.backgroundColor = "#4682B4";
                    }
                    else if(index > 4000 && index <= 6000){
                        cell[j].style.backgroundColor = "#0000FF";
                    }
                    else{
                        cell[j].style.backgroundColor = "#00008B";
                    }
                    row[i].appendChild(cell[j]);
                }
            }

            tbo.appendChild(row[i]);
        }

        tab.appendChild(tbo);
        document.getElementById('mytable').appendChild(tab);
    } 
```

在我的`<body>`标签里面，我有：

```
 <div id="body">
       <div id="mytable"></div>
    </div> 
```

但是，当我加载页面时，当我将鼠标悬停在表格的单元格上时，我希望看到弹出框，但是发生了一些事情。此外，当我`$(document).ready`从 firebug 的终端执行该部分时，程序开始按假设执行。在我使用它之前，我还确保将库加载到我的页面中。我也没有在萤火虫的终端中看到任何错误。 `<script src="http://localhost/heatmap/javascript/jquery.qtip.js">`

有人可以告诉我为什么会这样吗？我的javascript的`main`功能是

```
function OnLoad() {
         $.post('index.php/heatmap/getDatalines', 
                function(answer){
                    var data = eval('(' + answer + ')');
                    var list = [];
                    makeTable(data);
                });
    } 
```

谢谢

whis 在加载时调用：`google.setOnLoadCallback(OnLoad);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:57:15.747

加载表格后，您需要创建 qtip，如下所示：

```
function OnLoad() {
    $.post('index.php/heatmap/getDatalines', 
        function(answer){
            var data = eval('(' + answer + ')');
            var list = [];

            makeTable(data);

            $('#mytable td').qtip({
                overwrite : false,         // make sure it can't be overwritten
                content : {
                    text : function(api){
                        return "Time spent: " + $(this).html();
                    }
                },
                position : {
                    my : 'top left',
                    target : 'mouse',
                    viewport : $(window),  // keep it on-screen at all time if possible
                    adjust : {
                        x : 10, y : 10
                    }
                },
                hide : {
                    fixed : true    // Helps to prevent the tooltip from hiding occassionaly when tracking!
                },
                style : 'ui-tooltip-tipsy ui-tooltip-shadow'
            });
        });
    } 
```

# java - 如何让你的安卓应用只要求超级用户访问一次？

> ID：11402839
> 
> 赞同：2
> 
> 时间：2012-07-09T20:46:01.870
> 
> 标签：java, android, permissions, root

我正在创建我的第一个 android 应用程序，它正在更改您的 MAC 地址和设备主机名。但是，我只想请求超级用户访问一次。

这就是我当前执行 su 命令的方式：

```
String[] cmdHost = { "su", "-c", "/system/bin/setprop net.hostname " + strHostname};
execute = Runtime.getRuntime().exec(cmdHost); 
```

每次用户按下按钮更改主机名或 MAC 地址时，它都会再次要求超级用户访问。

有什么办法可以解决这个问题吗？此外，我看到某些应用程序仅在 SuperUser 应用程序日志中执行 /system/bin/sh。我的显示了整个命令。

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T21:03:31.587

查看库[RootTools](http://code.google.com/p/roottools/) - 它支持如下操作：

```
if (RootTools.isAccessGiven()) { /* magic root code here */ } 
```

你可以像这样向shell发送命令

```
try {
    List<String> output = RootTools.sendShell(command);

    String[] commands = new String[] { command1, command2 };
    List<String> otherOutput = RootTools.sendShell(commands);
} catch (IOException e) {
    // something went wrong, deal with it here
} 
```

# sql - SQL：加入父 - 子表

> ID：11402843
> 
> 赞同：0
> 
> 时间：2012-07-09T20:46:28.060
> 
> 标签：sql, sql-server, inner-join, outer-join

我正在构建一个简单的评论网站应用程序，需要一些有关 SQL 查询的帮助。

有 3 个表（主题、评论、用户）。我需要一个 SQL 查询来从所有 3 个表中选择数据。

“主题”表是父表，“评论”表包含子记录（每个父表从零到 100 条记录。

第三个表“用户”包含所有用户的用户信息。

以下是 3 个表的字段：

```
Topics (topicID, strTopic, userID)
Comments (commentID, topicID, strComment, userID)
Users (userID, userName) 
```

我试过：

```
SELECT * 
FROM   Topics 
  Inner Join Comments ON Topics.topicID = Comments.topicID
  Inner Join Users ON Topics.userID = Users.userID 
```

但这不能正常工作，因为有多个主题并且用户信息未加入评论表。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:13:21.793

您应该与 Comment 一起左加入以获取没有评论的主题，并与用户一起加入主题和评论以获取两者的相关用户信息。

```
SELECT * 
FROM Topics t
INNER JOIN Users tu on tu.userID = t.userID
LEFT JOIN Comments c on c.topicID = t.topicID
LEFT JOIN User cu on cu.userID = c.userID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:49:13.240

您需要加入用户表两次。

```
SELECT *
FROM Topics
 INNER JOIN Comments ON Topics.topicID = Comments.topicID
 INNER JOIN Users AS u1 ON Topics.userID = u1.userID
 INNER JOIN Users AS u2 ON Comments.userID = u2.userID 
```

# ruby-on-rails - 使用 gmaps4rails gem 自定义 mapTypeControlOptions

> ID：11402844
> 
> 赞同：1
> 
> 时间：2012-07-09T20:46:28.697
> 
> 标签：ruby-on-rails, gmaps4rails

是否可以自定义地图选项在谷歌地图上的显示方式？

似乎这是 API 中的一个选项，`mapTypeControlOptions`使用`mapTypeIDs`.

感谢*apneadiving*开发了这个很棒的宝石！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:03:21.333

您可以添加任何选项谷歌地图启用。从[这里](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Map-Apis)的文档：

> 如果您缺少地图和标记的一些选项，您可以简单地在 :raw 中传递您需要的内容：

```
<%= gmaps(:markers => {:data => @json, :options => { :raw => '{ animation: google.maps.Animation.BOUNCE }' } },
          :map_options => { :raw => '{ disableDefaultUI: true, scrollwheel: false }' }) %> 
```

# sftp - 示例 SFTP 批量上传脚本，用于 AS400 服务器上传到 Unix SFTP 服务器

> ID：11402849
> 
> 赞同：0
> 
> 时间：2012-07-09T20:46:49.820
> 
> 标签：sftp, ibm-midrange, openssh, lftp

假设我在 AS400 上有一个名为 helloworld.txt 的文件，我想编写一个脚本来自动在 AS400 服务器上自动上传源文件 helloworld.txt 以上传到 Unix SFTP 服务器，例如 sftp://exampleunixsftp。 com？

有人有这样的脚本吗？OpenSSH 是唯一可以在 AS400 上使用的工具，还是有其他方法？如果 LFTP 可以安装在 AS400 上，那将是一个简单的解决方案，但由于它仅适用于 Unix/Linux/Win/Mac，所以我没有这个选项。我在以下网址阅读了 Scott Klement 的文章： [http ://systeminetwork.com/article/ssh-scp-and-sftp-tools-openssh](http://systeminetwork.com/article/ssh-scp-and-sftp-tools-openssh)

我只需要一个示例基本脚本来完成这项工作。我会很感激这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:56:54.310

[关于SSH](http://wiki.midrange.com/index.php/SSH)的 MidrangeWiki 主题包含一些可能有用的信息和示例。

**sftp**主要用作交互式实用程序。 **scp**以非交互方式执行相同的功能。

一旦设置了身份验证，该命令将只是：

```
scp helloworld.txt username@exampleunixsftp.com:<destination path> 
```

* * *

**LFTP**可以在**PASE**环境中进行一些准备工作。请参阅[开源二进制文件](http://www.youngiprofessionals.com/wiki/PASE/OpenSourceBinaries)。 **目前离线。使用[谷歌缓存](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CAgQIDAA&url=http%3A%2F%2Fwebcache.googleusercontent.com%2Fsearch%3Fq%3Dcache%3AscTqScU_aXcJ%3A174.79.32.155%2Fwiki%2Findex.php%2FPASE%2FOpenSourceBinaries%2B%26cd%3D1%26hl%3Den%26ct%3Dclnk%26gl%3Dus&ei=8Ef7T6SiOK3y2gXxh9HJBg&usg=AFQjCNF6LXDPBVwg87aUCezrTrJKDvij5w)。**

# javascript - 在 Javascript 中应用的 jQuery JSON 数据库变量

> ID：11402850
> 
> 赞同：0
> 
> 时间：2012-07-09T20:46:50.040
> 
> 标签：javascript, jquery, json

这可能是一项简单的任务，但我只是在学习 jQuery、JSON 和 Javascript 之间的关系。我使用 jQuery 从我的数据库中提取并创建一个名为 res[i].showlink 的变量，它是一个 url。这是我的调用代码的一部分。

```
 $.get("http://databasecall=json", {}, function (res) {
       $.mobile.hidePageLoadingMsg();
       if (res.length) {
           var s = "";
           for (var i = 0; i < res.length; i++) {
               s += "<li><a name=" + res[i].id + " href='" + "javascript:openGoogle()" + "'>" + res[i].showlink + "</a></li>";
           }
           $("#showList").html(s);
           $("#showList").listview("refresh")
       }, "json"); 
```

问题是我想在上面代码之外的 javascript 函数 (openGoogle) 中重用 res[i].showlink 数据库变量。当我重用数据库变量 res[i].showlink 时，它不再包含数据库中的数据。如何在上面的 jQuery/JSON 代码之外重用变量？我真的很感激任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:50:25.330

您需要存储`res`对调用外部的引用`get`- 否则，它是有范围的，并且正如您所注意到的，您无法从调用外部访问它。尝试这样的事情：

```
var globalRes = null;

$.get("http://databasecall=json", {}, function(res) {
    globalRes = res;
    $.mobile.hidePageLoadingMsg();
    if (res.length) {
        var s = "";
        for (var i = 0; i < res.length; i++) {

            s += "<li><a name=" + res[i].id + " href='" + "javascript:openGoogle()" + "'>" + res[i].showlink + "</a></li>";

        }
        $("#showList").html(s);
        $("#showList").listview("refresh")
    }, "json");​ 
```

调用后，`globalRes`将包含 的值`res`，但将是全局的，这意味着您可以从`get`调用外部访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:51:06.063

您将该值存储为锚标记的内容，您也可以从那里访问它。

改变

```
javascript:openGoogle() 
```

到

```
javascript:openGoogle.apply(this) 
```

然后在里面`openGoogle`，你可以使用`$(this).text()`

**编辑**
另一个选项是将值直接作为参数传递。

改变

```
javascript:openGoogle() 
```

到

```
javascript:openGoogle(" + res[i].showlink + ) 
```

然后修改

```
function openGoogle() { 
```

到

```
function openGoogle(showlink) { 
```

并使用

```
alert(showlink); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:50:23.360

将值保存在全局变量中：

```
$.get("http://databasecall=json", {}, function (res) {
    window.myResult = res;
    ....
} 
```

然后使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:52:40.457

您需要将其存储在 ajax 返回调用范围之外的变量中。

因此，例如，您可以：

```
 var resData; 
```

在包含的 javascript 文件的顶部

然后将您的代码替换为

```
$.get("http://databasecall=json",        {}, function(res) {
                                   $.mobile.hidePageLoadingMsg();
                                   if(res.length){
                                   resData = res;
                                   var s = "";
                                   for(var i=0; i<res.length; i++) {

                                   s+= "<li><a name=" + res[i].id + " href='" +      "javascript:openGoogle()" + "'>"  + res[i].showlink +  "</a></li>"; 

                                   } 
```

# java - 在 Eclipse 中自动运行

> ID：11402855
> 
> 赞同：2
> 
> 时间：2012-07-09T20:47:02.690
> 
> 标签：java, eclipse, eclipse-plugin

我有一个带有一系列参数的主类，并且有 10 个运行配置。有没有办法让日食一个接一个地运行它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:53:48.457

@Steven：为了快速完成，您可以编写一个 JUnit 测试用例，该用例仅按所需顺序调用预期的类并执行它。Eclipse 已经为 JUnit 提供了必要的 jar，因此您可以开始使用了。当然，编写 ANT/MAVEN 脚本是一种很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:00:26.177

其他答案可能是您问题的更好解决方案。但是，如果您将[Eclipse CDT](http://www.eclipse.org/cdt/)安装到您的 Eclipse 安装中（使用更新管理器或市场客户端），那么您将获得一个名为[**Launch group**](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.cdt.doc.user/reference/cdt_u_run_dbg_launch_group.htm)的附加启动配置类型。

这些启动组允许创建一个依次运行的其他启动配置列表。对于每个包含的启动配置，请确保将对话框中的*Post build 操作*设置为“等待终止”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T22:10:11.943

正如@gotuskar 建议的那样，为您的班级编写测试用例。如果您每次构建项目时都可以运行十个配置，请将它们放在其`src/test/java`目录中，否则为您的原始项目创建一个兄弟项目，使其依赖它，并将您的测试放在那里。

# sql-server-2008 - 如何在 SQL Server 2008 中的 msdb 或 master 中创建新表

> ID：11402857
> 
> 赞同：0
> 
> 时间：2012-07-09T20:47:09.260
> 
> 标签：sql-server-2008

我想在其中创建表`MSDB`并在其中存储一些二进制数据。

怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:51:17.343

Assuming you have adequate permissions, you can create tables in msdb and master the same way you create tables in any user database. It can be done [using Transact-SQL](http://msdn.microsoft.com/en-us/library/ms174979.aspx) or using the visual tools in SQL Server Management Studio.

However, as the commenters above have noted, it is usually not a good idea to make changes to the system databases. Microsoft reserves the right to make any and all changes to those databases as they roll out new software updates and service packs. That could adversely affect your solution. Conversely, your changes may have an adverse effect on the system databases and the processes and functionality they support.

I recommend storing the data in a separate user database.

# c# - 如何在图像上画线？

> ID：11402862
> 
> 赞同：18
> 
> 时间：2012-07-09T20:47:36.527
> 
> 标签：c#, system.drawing

我想在 bmp 图像上画一条线，该线将传递给使用 C# 中的 drawline 方法的方法

```
public void DrawLineInt(Bitmap bmp)
{

Pen blackPen = new Pen(Color.Black, 3);

int x1 = 100;
int y1 = 100;
int x2 = 500;
int y2 = 100;
// Draw line to screen.
e.Graphics.DrawLine(blackPen, x1, y1, x2, y2);
} 
```

这给出了一个错误。所以我想知道如何在这里包含绘画事件（PaintEventArgs e）

并且还想知道我们调用drawmethod时如何传递参数？例子

```
DrawLineInt(Bitmap bmp); 
```

这会给出以下错误“当前上下文中不存在名称'e'”

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-09T21:16:12.800

“在 bmp 图像上绘制一条线，该线将传递给 C# 中使用 drawline 方法的方法”

PaintEventArgs e 建议您在对象的“绘制”事件期间执行此操作。由于您在方法中调用它，因此您不需要在任何地方添加 PaintEventArgs e。

要在方法中执行此操作，请使用@BFree 的答案。

```
public void DrawLineInt(Bitmap bmp)
{
    Pen blackPen = new Pen(Color.Black, 3);

    int x1 = 100;
    int y1 = 100;
    int x2 = 500;
    int y2 = 100;
    // Draw line to screen.
    using(var graphics = Graphics.FromImage(bmp))
    {
       graphics.DrawLine(blackPen, x1, y1, x2, y2);
    }
} 
```

重绘对象时会引发“Paint”事件。有关更多信息，请参阅：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.paint.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T20:59:17.260

您需要从以下对象中获取`Graphics`对象`Image`：

```
using(var graphics = Graphics.FromImage(bmp))
{
   graphics.DrawLine(...)
} 
```

# mongodb - Mongodb：通过多个相对未知的键查询一个值

> ID：11402867
> 
> 赞同：0
> 
> 时间：2012-07-09T20:48:05.013
> 
> 标签：mongodb

现在，我们正在使用 mongodb 1.2.2 创建数据库并存储值。我们的数据类型如下所示：

```
"file" : "1" , "tools": { "foo": { "status": "pending"} }
"file" : "2" , "tools": { "bar": { "status": "pending" } }
"file" : "3" , "tools": { "foo": { "status": "running" } }
"file" : "4" , "tools": { "bar": { "status": "done" } }
"file" : "5" , "tools": { "foo": { "status": "done" } } 
```

我们想查询**每一个**我们`{ "status" : "pending" }.`不想使用的变量，`{"tools.foo.status" : "pending"}`因为除了 foo 和 bar 之外，我们还有许多不同的变体。为了更清楚，我们想做这样的事情`{"tools.*.status" : "pending"}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:58:21.983

不，你不能那样做。恐怕您必须为此维护自己的索引。也就是说，对于文件集合的每次插入/更新，对 file_status_index 集合执行更新插入以更新当前状态。

查询也是一个两步过程：首先查询索引集合以获取 id，然后`$in`向文件集合发出查询以获取实际数据。

这听起来可能很吓人，但这是您使用此架构必须付出的代价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:14:22.703

首先，您应该升级您的 MongoDB。1.2.2真的是老版本了。

其次，你不能做你问的查询。您可以使用[Map/Reduce 执行此操作。](http://www.mongodb.org/display/DOCS/MapReduce)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:58:56.710

我想是时候问问你*为什么*要以现在的方式存储东西了。

没有有效的方法来搜索这种结构；由于没有已知的仅键路径可以获取您要过滤的值，因此每条记录都需要每次都扩展，这非常昂贵，尤其是当您的集合不再适合 RAM 时。

IMO，您最好使用辅助集合来保持这些状态。是的，它使您的数据存储更具关联性，但那是因为您的数据*是*关联的。

```
file_tools:
  { 'file_id' : 1, 'name' : 'foo', 'status' : 'pending' }
  { 'file_id' : 2, 'name' : 'bar', 'status' : 'pending' }
  { 'file_id' : 3, 'name' : 'foo', 'status' : 'running' }
  { 'file_id' : 4, 'name' : 'foo', 'status' : 'done' }
  { 'file_id' : 5, 'name' : 'foo', 'status' : 'done' }

files:
  { 'id': 1 }
  { 'id': 2 }
  { 'id': 3 }
  { 'id': 4 }
  { 'id': 5 }

> // find out which files have pending tools
> files_with_pending_tools = file_tools.find( { 'status' : 'pending' }, { 'file_id' : 1 } )
> //=> [ { 'file_id' : 1 }, { 'file_id' : 2 } ]
> 
> // just get the ids
> file_ids_with_pending_tools = files_with_pending_tools.map( function( file_tool ){
>    file_tool['file_id']
> })
> //=> [1,2]
> 
> // query the files
> files.find({'id': { $in : file_ids_with_pending_tools }})
> //=> [ { 'id' : 1 }, { 'id' : 2 } ] 
```

# asp.net - ASP 基于母版页上的 Button 控件的 foreach 循环是否可能？

> ID：11402869
> 
> 赞同：0
> 
> 时间：2012-07-09T20:48:08.607
> 
> 标签：asp.net, button, foreach

我正在尝试为一组实际用户动态关闭网页上的所有按钮。所以我想要做的只是设置 visble 和 enable = false。

所以我有点在下面寻找这样的东西。

```
foreach(Button idvButton on Master)
{
 idvButton.Visible = false;
 idvButton.Enable = false;
} 
```

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:53:02.733

从您的子页面的代码后面怎么样？

```
foreach(var btn in Master.Page.Form.Controls.OfType<Button>())
{
   btn.Visible = false;
   btn.Enabled = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:12:59.357

这将禁用在整个 MasterPage 中找到的所有按钮。

```
public partial class SiteMaster : System.Web.UI.MasterPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        foreach (Control ctrl in this.Controls)
        {
            disableButtons(ctrl);
        }
    }

    void disableButtons(Control ctrl)
    {
        foreach (Control ctrl2 in ctrl.Controls)
        {
            if (ctrl2.GetType() == typeof(Button))
            {
                ((Button)ctrl2).Enabled = false;
                ((Button)ctrl2).Visible = false;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:28:37.190

答案是：必须结合以前的两个帖子。

```
 foreach (var btn in this.Page.Form.Controls.OfType<RadButton>())
                {
                    btn.Visible = false;
                    btn.Enabled = false;
                } 
```

# php - php echo iframe 转义字符

> ID：11402870
> 
> 赞同：1
> 
> 时间：2012-07-09T20:48:15.860
> 
> 标签：php, iframe, escaping

我无法找到转义字符的正确语法以及在 PHP 中回显或打印 iframe 输出。

```
 $youtube = $_SESSION['SESS_YOUTUBE'];
    if($_SESSION['SESS_YOUTUBE'] == '')
    {
         print "<div class=\"someClass\">Some Text Here</div>";
    }
    else
    {
         print "<iframe id="player" width="425" height="350" src="http://www.youtube.com/embed/$youtube" frameborder="0"></iframe>";
    } 
```

有人可以指出我正确的方向或为我提供解释转义字符的有用链接吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T20:52:31.473

您需要使用反斜杠转义双引号，或者也可以使用单引号。

在您的版本中，该`if`块绝对没问题。与此类似，您还需要`else`通过转义双引号来更正块，`\"`如下所示，

```
$youtube = $_SESSION['SESS_YOUTUBE'];
if($_SESSION['SESS_YOUTUBE'] == '') {
     print "<div class=\"someClass\">Some Text Here</div>";
}
else {
     print "<iframe id=\"player\" width=\"425\" height=\"350\" src=\"http://www.youtube.com/embed/$youtube\" frameborder=\"0\"></iframe>";
} 
```

使用单引号：

```
$youtube = $_SESSION['SESS_YOUTUBE'];
if($_SESSION['SESS_YOUTUBE'] == '') {
     print '<div class="someClass">Some Text Here</div>';
}
else {
     print '<iframe id="player" width="425" height="350" src="http://www.youtube.com/embed/$youtube" frameborder="0"></iframe>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:49:33.413

使用反斜杠 (\) 转义所有双引号 (")。这应该可以：

```
$youtube = $_SESSION['SESS_YOUTUBE'];
if($_SESSION['SESS_YOUTUBE'] == '') {
    print "<div class=\"someClass\">Some Text Here</div>";
} else {
    print "<iframe id=\"player\" width=\"425\" height=\"350\" src=\"http://www.youtube.com/embed/$youtube\" frameborder=\"0\"></iframe>";
} 
```

或者您可以将语句用单引号括起来，如下所示：

```
$youtube = $_SESSION['SESS_YOUTUBE'];
    if($_SESSION['SESS_YOUTUBE'] == '') {
        print "<div class=\"someClass\">Some Text Here</div>";
    } else {
        print '<iframe id="player" width="425" height="350" src="http://www.youtube.com/embed/$youtube" frameborder="0"></iframe>';
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T07:35:08.240

使用 If 语句或使用 Echo 语句或打印那些也可以！

前任。

```
if($_SESSION['SESS_YOUTUBE'] == '' ) {

print "//here your code ";

} else {

print "//your code";
} 
```

或者

```
if($_SESSION['SESS_YOUTUBE'] == '' ) {

echo "//here your code ";

} else {

echo "//your code";
} 
```

# http - Content-Range 的有效数值范围是多少？

> ID：11402874
> 
> 赞同：3
> 
> 时间：2012-07-09T20:48:32.270
> 
> 标签：http

具体来说，这个范围合法吗？

```
Content-Range: 0-1/12818084 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:43:17.677

缺少[*字节单位*](https://www.rfc-editor.org/rfc/rfc2616#section-3.12)。以下是[*Content-Range*](https://www.rfc-editor.org/rfc/rfc2616#section-14.16)的生产规则：

> ```
>  Content-Range = "Content-Range" ":" content-range-spec
> 
>    content-range-spec      = byte-content-range-spec
>    byte-content-range-spec = bytes-unit SP
>                              byte-range-resp-spec "/"
>                              ( instance-length | "*" )
> 
>    byte-range-resp-spec = (first-byte-pos "-" last-byte-pos)
>                                   | "*"
>    instance-length           = 1*DIGIT 
> ```

但是以`bytes`字节*为单位*它将是有效的：

```
bytes 0-1/12818084 
```

*   `0`是*第一个字节位置*
*   `1`是*最后一个字节位置*
*   `12818084`是*实例长度*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T21:19:19.697

它应该是：

```
Content-Range: bytes 0-1/12818084 
```

根据[RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)，这是合法的。只要 in `Content-Range: bytes a-b/c`、*a <= b*和*c > b* ，就没有最小限制。

实际示例：我能够从 mirrors.kernel.org 获得 2 字节的部分响应（我检查了我也可以获得 1 字节的响应）：

![一个 2 字节的部分响应，很像问题中的那个](../Images/0dfd01fef878f4f32e6b44e6745929e2.png)

# r - 在ggplot2 0.9.0中使用axis.line仅删除y轴

> ID：11402875
> 
> 赞同：3
> 
> 时间：2012-07-09T20:48:48.550
> 
> 标签：r, graph, ggplot2

> **可能重复：**
> [我可以使用 ggplot 分别控制 x 轴和 y 轴吗？](https://stackoverflow.com/questions/6541329/can-i-separately-control-the-x-and-y-axes-using-ggplot)

我看到了一篇较早的帖子，描述了如何做到这一点（[我可以使用 ggplot 分别控制 x 轴和 y 轴吗？](https://stackoverflow.com/questions/6541329/can-i-separately-control-the-x-and-y-axes-using-ggplot)） - 但它在 ggplot 0.9.0 中不起作用。任何想法如何我可以只删除 y 轴线，而不是 x 轴线。axis.line 选项不允许在两个轴之间进行任何区分。

```
 u<-expand.grid(temp=seq(0,100,10),hum=c(20,90),delta=as.factor(seq(0,10,by=5)))

u$model<-exp(u$temp*log(0.88)+u$hum*log(1.01)+as.numeric(u$delta)*log(1.1)) 
u2<-subset(u,hum==20)

u4<-subset(u,hum==90)
pl<-ggplot()+
  geom_line(data=u2,aes(x=u2$temp,y=u2$model,colour=u2$delta,group=u2$delta))+
  geom_line(data=u4,aes(x=temp,y=model,colour=delta,group=delta))

pl+theme_bw()+
  opts(panel.grid.minor=theme_blank(),
       panel.grid.major=theme_blank(),
       legend.key=theme_blank(),
       panel.border=theme_rect(colour=NA),
       axis.line=theme_segment(colour='grey',size=1)) 
```

现在 - 我怎样才能只有 x 轴而不是 y 轴线？

之前的帖子推荐

```
grid.remove(gPath("axis_v", "axis.line.segments"), grep=TRUE) 
```

导致

> removeDLFromGPath(gPath, name, strict, greppath, grepname, global, 中的错误：找不到 gPath (axis_v::axis.line.segments)

//M

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:36:57.223

这是一个可能会有所帮助的解决方法。严格设置绘图限制`coord_cartesian()`，然后手动添加 x 轴线。以编程方式计算 y 轴范围应该不会太难。

```
opts(axis.line=theme_blank()) +
coord_cartesian(ylim=c(-0.05, 3.3)) + 
geom_hline(yintercept=-0.05, colour="grey", size=1.5) 
```

# arraylist - 如何根据 ArrayList 生成可变数量的排列？

> ID：11402880
> 
> 赞同：1
> 
> 时间：2012-07-09T20:49:01.967
> 
> 标签：arraylist, iteration, permutation

我正在构建一个程序来帮助学生通过输入班级编号并确定它们的优先级来设置时间表。学生应该能够插入三到十个课程，并且该程序将根据学生设置的参数提供二十个“最佳”时间表。但是，每个班级都有不同数量的班级可供选择。（例如，周一/周三/周五的 8 点、10 点或 11 点或周二/周四的 11 点、3 点或 5:30 可以提供一堂课）。除此之外，学生可以选择进入任意数量的课程。鉴于此，我一直难以设置生成所有可用日历的算法。（日历也将受到学分的限制）

每次运行程序时，都会创建几个 Course 实例。每个 Course 对象都有一个 ClassSection 实例的 ArrayList，每个实例都有一个 ClassTime 实例的 ArrayList。每个 ClassTime 实例在它运行的一周中的每一天都有一个开始时间和一个结束时间。

我创建了一个 Schedule 类，其中包含几个 ClassSection 实例。它有一个返回 false 的方法，尝试添加一个 ClassSection，其 ClassSection 会干扰已添加的 ClassSection 的 ClassTime，或者添加了相同课程的 ClassSection。如果添加没有问题，则该方法返回 true。

我的目标是将我的 ArrayList 转换为 ArrayList，其中 Calendar ArrayList 具有所有 CourseSection 实例的所有可能排列，而不会超过信用计数。然后，我将对每个日历进行适当的排名，并从那里继续。

有人可以帮我用算法来迭代并制作这些日历吗？我真的很麻烦。

注意：这是我第一次提出问题，如果我提供的信息太少/太多，我深表歉意。

# php - 运行 php 文件的 shell cron 作业

> ID：11402883
> 
> 赞同：0
> 
> 时间：2012-07-09T20:49:19.033
> 
> 标签：php, cron, crontab

我需要创建一个只有 shell 访问权限的 cron 作业。我知道如何使用 cPanel，但这是在 1and1 服务器上，所以我必须使用 shell。

我根据[1and1 FAQ](http://faq.1and1.com/scripting_languages_supported/cron_jobs/3.html)在 crontab 中添加了一个新的 cron 作业，但我不确定我做错了什么，因为 cron 作业根本没有运行。

这是我通常放入 cPanel 的内容：

```
0 8 * * 1 wget 'http://my_www_domain/googlefroogle.php?feed=fy_uy_tp&key=XXXXX3f7d1' 
```

这就是我现在的 crontab 中的内容：

```
0 8 * * 1 /usr/local/bin/php /homepages/XX/XXXXXXX/htdocs/googlefroogle.php?feed=fy_uy_tp&key=XXXXX3f7d1 
```

我错过了什么或做错了什么？顺便说一句，如果我在浏览器中手动输入 URL，一切正常，所以我确定脚本没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:59:21.287

据我所知，您可以在任何服务器上的 cronjob 上使用 wget，所以如果您继续使用它应该没有问题。

现在，它不起作用的原因是您可以通过这种方式将 GET 参数发送到 PHP 文件。PHP 以不同的方式处理命令行。请参阅[从命令行使用 PHP](http://php.net/manual/en/features.commandline.php)。

因此，您必须检查是从 url 还是从命令行调用 php 文件（这很简单，请查看[php_sapi_name](http://mx.php.net/manual/en/function.php-sapi-name.php)），如果是这种情况，请使用命令行界面获取参数或在脚本中定义它们。

```
if (php_sapi_name() == 'cli') {
    if ($argc != 3) {
        die(sprintf('Usage: %s <feed> <key>', $argv[0]));
    }

    $feed = $argv[1];
    $key = $argv[2];
}else{
    $feed = isset($_GET['feed']) ? $_GET['feed'] : null ;
    $key = isset($_GET['key']) ? $_GET['key'] : null ;
} 
```

现在你必须在你的 cronjob 上调用这样的脚本：

```
php -f file.php fy_uy_tp XXXXX3f7d1 
```

它的作用是，如果脚本从命令行运行，它将参数作为变量获取，如果不是，则检查 GET 参数是否存在并使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:53:10.550

您仍然可以通过 shell 在 crontab 中使用您的 cPanel“命令”。采用

```
crontab -l 
```

列出当前的 cron 作业。

```
crontab -e 
```

编辑 crontab。您需要在一些最小安装中手动安装 crontab。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T20:55:35.590

尝试

```
*/0 */8 * * */1 /usr/local/bin/php -f /homepages/XX... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:00:15.917

你不能运行带有类似参数的文件，因为 shell 正在寻找一个名为“file.php?param=value”的文件，而不是“file.php”。

如果参数始终相同，可以在脚本中强制设置：

```
<?php
    $_GET['feed'] = 'fy_uy_tp';
    $_GET['key']  = ...
    $_REQUEST = $_GET;

?> 
```

然后检查脚本是否不需要其他变量，例如 $_SERVER['REMOTE_ADDR'] 或类似的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T16:34:02.150

这些答案都没有帮助我做我需要的事情，所以我最终使用了以下由 crontab 调用的 php 文件：

```
$data = array('feed'=>'fy_uy_tp','key'=>'MY_KEY_HERE');
$url = http_build_query($data, '', '&');
$fullurl = 'http://www.MYSITE.com/googlefroogle.php?'.$url;

$ch = curl_init($fullurl);
$fp = fopen("MY_LOG_FILE.txt", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

如果其他人需要类似的东西......另外，请注意这需要 php5，http_build_query 不适用于 php4

# android - 从我的通知接收器启动另一个活动

> ID：11402884
> 
> 赞同：1
> 
> 时间：2012-07-09T20:49:25.513
> 
> 标签：android, push-notification, google-cloud-messaging

好的，所以，我会先声明我正在使用 Titanium，所以我认为这会让你的嘴巴尝起来不好。所以，我很抱歉我缺乏关于 Android 方面的知识。

所以，我设置了一个东西来接收 GCM 通知。我可以将它们正确发送到我的应用程序，并且代码运行并在单击时尝试启动我的应用程序。但是，它只是在 logcat 中给了我这个：

```
I/ActivityManager(  307): START {act=com.geneca.journaling.mobile.GenecaJournalingActivity cat=[android.intent.category.LAUNCHER] flg=0x34000000 bnds=[0,102][720,230] u=0} from pid -1
W/InputMethodManagerService(  307): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@427a60a8 attribute=null 
```

我让 C2DM 从第三方接收东西，我试图修改它以做我需要的，但我显然做的事情不太正确。

这是 onMessage：

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.d(LCAT, "Message received");

    HashMap data = new HashMap();
    for (String key : intent.getExtras().keySet()) {
        Log.d(LCAT, "Message key: " + key + " value: "
                + intent.getExtras().getString(key));

        String eventKey = key.startsWith("data.") ? key.substring(5) : key;
        data.put(eventKey, intent.getExtras().getString(key));
    }
    if (C2dmModule.getInstance() == null) {
        int icon = 0x7f020000; // get this from R.java
        CharSequence tickerText = "Geneca Journaling";
        long when = System.currentTimeMillis();

        Bundle extras = intent.getExtras();
        CharSequence contentTitle = "Rate your journal";
        CharSequence contentText = "Notification Content";
        String title = extras.getString("title");
        String message = extras.getString("message");
        if(title != null) {
            contentTitle = title;
        }
        if (message != null) {
            contentText = message;
        }

        //Intent notificationIntent = new Intent(this, C2DMReceiver.class);

        Intent launcherintent = new Intent("com.geneca.journaling.mobile.GenecaJournalingActivity");
        launcherintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.     FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
        launcherintent
                .setComponent(ComponentName
                        .unflattenFromString("com.geneca.journaling.mobile.GenecaJournalingActivity"));
        launcherintent.addCategory("android.intent.category.LAUNCHER");

        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                launcherintent, 0);

        // the next two lines initialize the Notification, using the
        // configurations above

        Notification notification = new Notification(icon, tickerText, when);

        notification.defaults = Notification.DEFAULT_ALL;
        notification.flags = Notification.FLAG_AUTO_CANCEL;
        notification.setLatestEventInfo(context, contentTitle, contentText,
                contentIntent);
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        mNotificationManager.notify(1, notification);
    } else
        C2dmModule.getInstance().sendMessage(data);
} 
```

这是我的清单（我认为）

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
    <manifest>
        <activity android:name=".GenecaJournalingActivity"/>
        <permission
            android:name="com.geneca.journaling.mobile.permission.C2D_MESSAGE" android:protectionLevel="signature"/>
        <uses-permission android:name="com.geneca.journaling.mobile.permission.C2D_MESSAGE"/>
        <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/>
        <uses-permission android:name="android.permission.WAKE_LOCK"/>
        <application>
            <service android:name="com.findlaw.c2dm.C2DMReceiver"/>
            <receiver
                android:name="com.google.android.c2dm.C2DMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND">
                <intent-filter>
                    <action android:name="android.intent.action.BOOT_COMPLETED"/>
                    <category android:name="android.intent.category.HOME"/>
                </intent-filter>
                <intent-filter>
                    <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
                    <category android:name="com.geneca.journaling.mobile"/>
                </intent-filter>
                <intent-filter>
                    <action android:name="com.google.android.c2dm.intent.REGISTRATION"/>
                    <category android:name="com.geneca.journaling.mobile"/>
                </intent-filter>
            </receiver>
        </application>
    </manifest>
</android> 
```

由于 Titanium 处理事情的方式，在不同的地方还有另一个清单部分：

```
<android:manifest>
    <permission android:name="com.geneca.journaling.mobile.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.geneca.journaling.mobile.permission.C2D_MESSAGE" />

    <!-- This app has permission to register and receive message -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!-- Send the registration id to the server -->
    <uses-permission android:name="android.permission.INTERNET" />

    <!-- App must have this permission to use the library -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <activity android:name="com.geneca.journaling.mobile.GenecaJournalingActivity"/>

    <application>
           <!-- In order to use the c2dm library, an
               application must declare a class with the name C2DMReceiver, in its 
               own package, extending com.google.android.c2dm.C2DMBaseReceiver

               It must also include this section in the manifest, replacing 
                "com.google.android.apps.chrometophone" with its package name. 
           -->
        <service android:name="com.findlaw.c2dm.C2DMReceiver" />

        <!-- Only google service can send data messages for the app. If permission is not set -
             any other app can generate it --> 
        <receiver android:name="com.google.android.c2dm.C2DMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND">

            <!-- Start receiver on boot -->
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
                <category android:name="android.intent.category.HOME"/>
            </intent-filter>

            <!-- Receive the actual message -->
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="com.geneca.journaling.mobile" />
            </intent-filter>
            <!-- Receive the registration id -->
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="com.geneca.journaling.mobile" />
            </intent-filter>
        </receiver>

    </application>
</android:manifest> 
```

如果应用程序已经打开，它会运行一些 Titanium 代码，我想我可以弄清楚，但如果应用程序没有打开，它会在 onMessage 中遇到一些我不太明白的东西。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:52:39.833

这一行：

```
Intent launcherintent = new Intent("com.geneca.journaling.mobile.GenecaJournalingActivity"); 
```

使用 action 创建一个新的 Intent `com.geneca.journaling.mobile.GenecaJournalingActivity`。

这是你想要的吗？

```
Intent intent = new Intent(Intent.ACTION_MAIN);
 intent.setComponent(new ComponentName("com.package.address","com.package.address.MainActivity"));
  startActivity(intent); 
```

或者

```
 Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(LaunchIntent); 
```

# javascript - 如何从控制台即时设置变量？

> ID：11402886
> 
> 赞同：0
> 
> 时间：2012-07-09T20:49:26.033
> 
> 标签：javascript, console

我想使用控制台即时设置变量。

我的代码是这样包装的：

```
( function () {

var debug = true;

// code here

} () ) 
```

我想`debug`使用控制台即时更改。

我应该移出`debug`自执行包装器并使用全局导入将其传递吗？

我应该给匿名函数一个名称，并使用“名称间隔”名称进行设置吗？

我没有过多地使用控制台，但我认为它是为这样的事情而设计的。

这通常是怎么做的？什么是最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:51:40.370

您可以毫不费力地使用命名空间，如下所示：

```
(function (foo) {
    foo.debug = true;
}(FOO = FOO || {}));

FOO.debug = false; 
```

我会选择这种类型的解决方案，而不是使用显式全局，因为它并不是真的更麻烦，而且变量名称就像`debug`你可能会发生冲突一样......即使你正在使用 100% 的代码。

# amazon-web-services - Amazon EC2 上的“虚拟核心”到底是什么？

> ID：11402887
> 
> 赞同：29
> 
> 时间：2012-07-09T20:49:28.410
> 
> 标签：amazon-web-services, amazon-ec2, cloud, virtualization

小型标准实例是：

> 小型实例（默认）1.7 GB 内存、1 个 EC2 计算单元（1 个虚拟内核和 1 个 EC2 计算单元）、160 GB 本地实例存储、32 位或 64 位平台

这是否意味着您可以访问整个物理 CPU 内核？或者您是否与其他实例共享更强大的核心？

您的性能是否受到共享相同***“物理核心”***或其他硬件的其他人的影响？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T13:31:30.987

对于小型实例，您不会获得物理核心。

“一个 EC2 计算单元提供的 CPU 容量相当于 1.0-1.2 GHz 2007 Opteron 或 2007 Xeon 处理器。这也相当于我们原始文档中提到的 2006 年初 1.7 GHz Xeon 处理器。” [Amazon EC2 实例类型](http://aws.amazon.com/ec2/instance-types/)

您可以运行`cat /proc/cpuinfo`以查看您使用的硬件。例如，我有一个微型实例，它具有底层处理器 Intel(R) Xeon(R) CPU E5430 @ 2.66GHz。
据我了解，顶部的 40% cpu 等于 1 个计算单元。所以我可以用我的 2 个计算单元爆发到 80%。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-21T17:39:57.853

这是粗略的估计，所以请看它的价值。有趣的是，微型实例同时执行了中小型实例。

我在下面的每个实例上运行了 Passmark Proformance Test 8.0。每个都在亚马逊弗吉尼亚数据中心安装了 Windows Server 2008 r2 基本配置。

```
AWS SIZE=======PASSMARK SCORE====SIMILAR SCORED CPU================
t1.micro=======963===============AMD Dual-Core Mobile ZM-80========
m1.small=======384.7=============Intel Celeron M 1.60GHz===========
m1.medium======961===============AMD Dual-Core Mobile ZM-80========
m1.large=======1249==============Intel Core2 Duo T6400 @ 2.00GHz===
m1.xlarge======3010==============AMD Phenom 2 X4 12000=============
m3.xlarge======3911==============Intel Xeon X5365 @ 3.00GHz========
m3.2xlarge=====6984==============Intel Xeon E3-1220 V2 @ 3.10GHz=== 
```

目前，对于保留实例，m3.2xlarge 每年的费用约为 7169 美元，在按需实例上每月费用为 1578 美元。我见过的大多数非托管专用托管公司都以每年 2000-2500 美元左右的价格提供英特尔至强 E3-1200 设置。在我看来，AWS 非常适合可扩展性，但对于任何长期而言都非常昂贵。似乎任何基于“云”的服务器系统都是如此。

------更新这里是衡量云托管基准的好工具.. [http://cloudharmony.com/benchmarks](http://cloudharmony.com/benchmarks)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T18:57:13.470

[http://www.cpubenchmark.net/high_end_cpus.html](http://www.cpubenchmark.net/high_end_cpus.html) 如果看这个表1 EC2计算单元≈350 cpu点

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-07T09:41:27.400

请浏览这些博客以了解虚拟内核。很好地解释了 [http://www.pythian.com/blog/virtual-cpus-with-amazon-web-services/](http://www.pythian.com/blog/virtual-cpus-with-amazon-web-services/) [http://samrueby.com/2015/ 01/12/what-are-amazon-aws-vcpus/](http://samrueby.com/2015/01/12/what-are-amazon-aws-vcpus/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T21:24:24.187

根据[此 AWS 论坛帖子](https://forums.aws.amazon.com/thread.jspa?threadID=30729)，虚拟内核等同于物理 CPU 内核。每个虚拟核心可以有一个或多个 EC2 计算单元，具体取决于 CPU 的时钟速度。

这里有[更详细的分析](http://gevaperry.typepad.com/main/2009/03/figuring-out-the-roi-of-infrastructureasaservice.html/)。

# android-actionbar - ActionBarSherlock 将哪些样式转移到之前的 Android 版本？

> ID：11402888
> 
> 赞同：0
> 
> 时间：2012-07-09T20:49:31.820
> 
> 标签：android-actionbar, actionbarsherlock

如果我正在使用 ActionBarSherlock，并且我的活动在冰淇淋三明治中看起来像这样：

![在此处输入图像描述](../Images/ad55a452e769fa86d0e70cd8affae842.png)

按钮和其他元素会保持 Ice Cream Sandwich 的风格，还是会恢复到正在运行的 Android 版本？（如果我在 2.3 上运行它，这些按钮会看起来像标准的 Android 2.3 按钮，还是看起来像图片中的 Android 4.0？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:23:32.803

ActionBarSherlock 除了操作栏的样式外，不会对任何样式进行反向移植。它这样做的唯一原因是为样式创建一致的基础。

带回其他任何东西都超出了图书馆的范围。您的按钮将看起来像预Honeycomb Android 上的姜饼按钮。我强烈建议您从您喜欢的平台（例如 Ice Cream Sandwich）中获取资源并自定义它们以适合您的应用程序的外观和感觉，然后在每个平台上使用它们。

# xml - SVN ANT“添加”任务与“强制”选项给出“已经在版本控制”构建错误

> ID：11402891
> 
> 赞同：2
> 
> 时间：2012-07-09T20:49:40.763
> 
> 标签：xml, svn, ant, svnant

使用 ANT 和 SVNANT，我想检查一个工作目录，该目录混合了 svn 控制的文件以及新文件和子目录。根据我对 SVN ANT [“添加”任务](http://subclipse.tigris.org/svnant/svntask.html#add)的理解，使用下面的“强制”标志应该做类似的事情`svn add --force *`

基本上，我在CollabNet 站点的[这个问题中描述了同样的问题。](http://subclipse.tigris.org/issues/show_bug.cgi?id=1426)

这是我的xml配置：

```
<target name="add-new-files-to-test-repo" depends="check-out-projects">
    <svn username="${svn.test.username}" password="${svn.test.password}" svnkit="true" javahl="false">
        <add
            force="true" > 
            <fileset dir="${svn.testdir}"/>
        </add>
    </svn>      
    <echo message="Adding new files to SVN"/>
</target> 
```

给出响应：

```
svn: 'D:\Workspaces\TreXProjects\Build\testdir\New Text Document.txt' is already under version control 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:11:57.807

在我写完这篇文章后，通过重新阅读我链接的文档，终于得到了这个工作。正如关于在任务中使用“强制”标志的部分`<add>`所示：

> （仅在设置 dir 属性时适用）。

所以我的固定代码如下：

```
<target name="add-new-files-to-test-repo" depends="check-out-projects">
    <svn username="${svn.test.username}" password="${svn.test.password}" svnkit="true" javahl="false">
        <add force="true" dir="${svn.testdir}" >
        </add>
    </svn>      
    <echo message="Adding new files to SVN"/>
</target> 
```

当然，这意味着您不能使用`<fileset>`任务的“包含”属性来浏览特定文件，正如我的问题中链接的问题的作者想要做的那样。我的解决方法是从 SVN 签出工作目录，使用过滤后的目录仅将我想要的文件复制到该工作目录中。

# haskell - 与管道（-core）一起使用的错误处理方法是什么？

> ID：11402892
> 
> 赞同：4
> 
> 时间：2012-07-09T20:49:41.820
> 
> 标签：haskell, error-handling

我目前正在为我的一个小项目编写一些管道核心/ attoparsec 管道。我希望每个解析器都提供一个等待`ByteString`解析器输入并产生任何解析值（重新启动解析器）的管道。如果没有错误处理，它将因此具有类似的类型

```
parserP :: Monad m => Parser a -> Pipe ByteString a m r 
```

现在，我不确定如何处理解析错误。我目前的想法是：

*   将错误添加到返回类型（即返回一个值`Either ParseError r`而不是仅仅`r`）
*   要求monad提供错误处理机制（即要求monad接管管道实现`MonadError`）
*   通过接管*任何*monad的管道`ErrorT e m a`来强制 monad 提供错误机制*`m`*
**   添加参数，让用户指定行为（类似`(ParseError -> P.Pipe ByteString a m r)`, 并在出现解析错误的情况下简单地绑定到由此提供的管道）*

 *第一个解决方案似乎是错误的，因为使用管道的返回类型进行错误处理似乎是一种 hack。一方面，它使与管道的组合更加丑陋，并且似乎或多或少被最终解决方案所包含（除了可能失去让下游管道能够通过使用 tryAwait 并停止等待值来从错误中恢复的能力之外？）。

第二种解决方案似乎是错误的，尽管我不能完全说明原因。可能是因为它（可能？）还需要将 ParseError 转换为 monad 具有的任何错误类型的参数（除非我们希望要求 monad 实现`MonadError ParseError`，这似乎会导致大量的簿记）。最后，我似乎不记得看到`MonadError`过那么多，这表明使用它存在一些问题。

第三种解决方案适用于我的情况，因为管道将成为具有用户指定 monad(IO) 的管道的一部分，该管道不应该关心解析错误（它将网络数据解析为用户产生的格式指定类型）。但它看起来并不那么优雅，并且会再次（可能？）导致在任何其他上下文中使用时会产生大量的簿记。

我还没有真正考虑过最终的解决方案，但它似乎有些令人费解。

我将不胜感激对这个特殊案例的任何想法（如果我偏离并遗漏了一些明显的东西，我一点也不感到惊讶），以及任何（或多或少相关）关于管道错误处理讨论的参考（ -core)/导管/interatee 等

编辑：另一种可能性可能是只采取一个单子动作（而不是一个完整的管道），尽管我不太确定它是否可能只是概括、专门化甚至等同于第四个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T16:33:27.953

如果可以的话，我想我可以通过这样描述选择来帮助整理每个人的想法。你要么：

1.  /`Pipe`内的层：`EitherT``ErrorT`

    无论是T e (管道abm) r

2.  /`Pipe`之外的层：`EitherT``ErrorT`

    管道 ab (EitherT em) r

你想要前一种方法，它也有一个很好的属性，你可以让它成为 MonadError 的一个实例（如果那是你的事）。

要了解这两种方法之间的区别，第二种方法会在整个管道级别引发错误。第一个允许在单个管道的粒度上进行错误处理并正确处理组合管道。

现在来看一些代码。如果您不介意，我会使用 EitherT，因为我更喜欢它：

```
import Control.Error
import Control.Pipe

type PipeE e a b m r = EitherT e (Pipe a b m) r

runPipeE = runPipe . runEitherT

p1 <?< p2 = EitherT (runEitherT p1 <+< runEitherT p2) 
```

然后只需在 PipeE 中使用 catchT 和 throwT 即可。

这种方法还有一个优点，就是您可以有选择地将其应用于管道的某些部分，但是您需要在与其他管道组合之前负责处理潜在的异常值。您可以利用这种灵活性为管道的不同阶段使用不同类型的异常值，或者根本不将其用于不会失败的阶段，并避免对这些阶段进行错误检查的开销。*

# vb.net - 从 PDF 解析正文文本

> ID：11402895
> 
> 赞同：1
> 
> 时间：2012-07-09T20:49:49.137
> 
> 标签：vb.net, parsing, pdf, text, itext

我最近刚刚尝试在 VB2010 应用程序中使用 iTextSharp 解析 PDF 文档中的文本数据。该文档不包含任何图像或其他精美元素，仅包含文本。我读过一些文章并使用了一些代码片段，看起来很有希望。但是，我一直在尝试做的只是解析出每个页面的正文，减去页眉或页脚。我还没有找到该特定功能的任何指导。

目前使用[在 VB.NET 或 C# 中使用 itextsharp dll 阅读 PDF 内容](https://stackoverflow.com/questions/2550796/reading-pdf-content-with-itextsharp-dll-in-vb-net-or-c-sharp)的片段，但它会解析页面中的所有文本。一定有办法得到尸体。或者至少我希望如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:43:42.013

PDF 通常不包含有关所含文本的逻辑结构的信息。

因此，PDF 中没有页眉、页脚、正文、段落和类似的东西。只有一堆操作，比如“在这里画这个字形”、“移动到这个位置并在那里画那组字形”。我写的是字形而不是字符，因为 PDF 不需要包含可读文本。仅需要指定视觉外观。

一个例外是带标签的 PDF，但大多数 PDF 都没有标签。

鉴于以上所有情况，您可能只剩下以下方法：

1.  从每个页面中提取所有文本
2.  分析文本并在每页的开头/结尾找到*相似的部分*
3.  删除相似部分

这是一种基于启发式的检测，因此它可能不会总是给出很好的结果。

# javascript - 关于 Javascript 中的 pop() 和 push()

> ID：11402899
> 
> 赞同：2
> 
> 时间：2012-07-09T20:50:11.747
> 
> 标签：javascript, arrays

我真的是 Javascript 的初学者，并且尽可能多地尝试我阅读的内容。

但是当谈到`pop()`and时`push()`，我得到了一些奇怪的结果，我想知道。

这是代码：

```
var arr = [];
arr.push(2,3);
console.log(arr);

console.log(arr.pop());
console.log(arr); 
```

结果是：

> [2，未定义×1]
> 
> 3
> 
> [2]

不应该是：

> [2, 3]
> 
> 3
> 
> [2]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T20:53:43.000

这是由于`console.log`您的浏览器上的异步评估。到第一个结果`console.log`显示时，该项目已经消失了，因为`pop()`.

要获得准确的结果，请致电`toString()`：

```
var arr = [];
arr.push(2,3);
console.log(arr.toString()); // 2,3 - as expected.

console.log(arr.pop());
console.log(arr); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T20:53:24.157

您必须注意控制台将对象处理为“实时”。您已经在控制台上输出的任何对象（数组、对象等）仍然可以进行操作。

这就是为什么当您`[2,3]`在第一个日志中预期时，代码已经弹出 3，因此`undefined`在 3 的位置被替换。

当然，这个事件取决于浏览器如何实现他们的控制台。

# asp.net-mvc-3 - 如何使用 MVC 3 在 Web 浏览器中查看上传的文件？

> ID：11402900
> 
> 赞同：0
> 
> 时间：2012-07-09T20:50:12.710
> 
> 标签：asp.net-mvc-3, file-upload, download

我试图让我网站的用户通过单击附件图像在 Web 浏览器中查看他们刚刚上传的文件。我已经编写了上传功能的代码，现在我只需要一些帮助来查看上传完成后的图像。下面我包含了来自控制器的上传功能和视图附件功能所在的索引视图。如果您需要更多代码来帮助解决此问题，请告诉我，感谢您抽出时间来帮助我！

**控制器**

```
[Authorize]
        public String Uploadfile(HttpPostedFileBase file)
        {
            if (file.ContentLength > 0)
            {                
                var fileName = Path.GetRandomFileName();
                var path = Path.Combine(Server.MapPath("~/Uploads"), fileName);
                file.SaveAs(path);
            }
            return file.FileName;
        } 
```

**看法**

```
@model PagedList.IPagedList<DBFirstMVC.Models.bug>

@{
    ViewBag.Title = "BugIndex";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using PagedList;

<h2 class="corporate sifr">@ViewBag.Title</h2>

<div class="crossband">
@using (Html.BeginForm())
{
    <div class="lefty">
        Search Bugs Index: @Html.TextBox("SearchString")
    </div>
        <input type = "submit" value = "Search" class = "button1" />
}

    <div class="righty">
    @Html.ActionLink("Report a Bug", "ReportBugs", "Support", null, new { @class = "button1" })

    </div>

</div>

<div class="crossband">
    <div class="lefty">

    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    of @Model.PageCount
    &nbsp;&nbsp;&nbsp;&nbsp;
    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "", new { page = 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink("< Prev", "", new { page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
    }
    else
    {
        @:<<
        @Html.Raw(" ");
        @:< Prev
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Next >", "", new { page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
        @Html.Raw(" ");
        @Html.ActionLink(">>", "", new { page = Model.PageCount, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter, Versions = ViewBag.SelectedVersion })
    }
    else
    {
        @:Next >
        @Html.Raw(" ")
        @:>>
    }
    </div>

    <div class="righty">
    Showing Records @Model.FirstItemOnPage to @Model.LastItemOnPage from @Model.TotalItemCount records
    </div>
</div>

<table>
    <tr>

        <th>
            @Html.ActionLink("Date Submitted", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "date_submitted"})
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "date_submitted"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "date_submitted"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Submitted By", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "submitted_by"})
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "submitted_by"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "submitted_by"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Description", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "Description" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "Description"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "Description"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Priority", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "Priority" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "Priority"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "Priority"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Estimated Completion Date", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "estimated_completion_date" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "estimated_completion_date"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "estimated_completion_date"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Status", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "status" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "status"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "status"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Developer Comments", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "developer_comments" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "developer_comments"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "developer_comments"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>
        <th>
            @Html.ActionLink("Attachment", "BugIndex", new { sortOrder = ViewBag.currentOrder == "asc" ? "desc" : "asc", sortField = "attachment" })
            @if (ViewBag.currentOrder == "asc" && ViewBag.CurrentField == "attachment"){<img id="asc" src="@Url.Content("~/Images/ico_tablesortoffset_asc.gif")" alt = "Asc Arrow" />}
            @if (ViewBag.currentOrder == "desc" && ViewBag.CurrentField == "attachment"){<img id="desc" src="@Url.Content("~/Images/ico_tablesortoffset_desc.gif")" alt = "Desc Arrow" />}
        </th>

        <th></th>
    </tr>

@{
    var row_class = "odd";
}

@foreach (var item in Model)
{
    row_class = row_class == "odd"? "even" : "odd";    
    <tr class="@row_class">
        <td>
            @Html.DisplayFor(modelItem => item.date_submitted)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.submitted_by)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.priority)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.estimated_completion_date)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.status)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.developer_comments)
        </td>
        <td>
            @if (item.attachment != null){<img id="success" src="@Url.Content("~/Images/ico_confirmation_sml.gif")" alt = "attachment" />}
            @if (item.attachment == null) {<img id="failure" src="@Url.Content("~/Images/ico_error_sml.gif")" alt = "no attachment" />}
            <img src = "@Url.Content(string.Format("~/Uploads/{0}", item.attachment))" alt = "download" />                                                                                                                                 
        </td>
        <td>
            @Html.ActionLink("Edit", "EditBugs", new { id = item.bug_pk }) |
            @Html.ActionLink("Delete", "DeleteBugs", new { id = item.bug_pk })
        </td>
    </tr>
}

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:55:27.887

存储在 App_Data 中的文件将无法访问。为了在网页上显示它们，您必须将它们移动到不同的文件夹，例如 ~/content 或 ~/images。

然后你可以摆脱这样的事情：

```
<img src="@Url.Content(string.Format("~/images/{0}", Model.RandomFileName))" /> 
```

# ruby-on-rails - Rails 表格编辑表格

> ID：11402902
> 
> 赞同：0
> 
> 时间：2012-07-09T20:50:15.313
> 
> 标签：ruby-on-rails, edit

我的问题是，如果我想测试编辑表单，我总是会得到这个异常..

你能帮我找出问题吗？

这是错误消息：

```
undefined method `model_name' for NilClass:Class
Extracted source (around line #5):

2: <div class="row">
3:         <div class="box">
4:                 <span id="logo">Azubiware 2.0</span><br><br>
5:                 <%= form_for(@bsinfo) do |f| %>
6:          <% @basedate = Date.new(@bsinfo.year) %>
7:          <% @basedate = @basedate.beginning_of_year %>
8:          <% @basedate = @basedate.beginning_of_week %> 
```

我的用户表有相同的表格，并且可以正常工作...

```
class BsinfosController < ApplicationController

  def index
        @title = "Verwaltung Abwesehnheiten"
  end
 def new
        @title = "Sign up"
        @bsinfo = Bsinfo.new
  end

  def show
        @bsinfo = Bsinfo.find(params[:id])
        @title = @bsinfo.year
  end

  def create
        @bsinfo = Bsinfo.new(params[:bsinfo])
        if @bsinfo.save
                flash[:success] = "Schedule successfull created"
                redirect_to bsinfos_path
        else
                render 'new'
        end

  end

  def edit
        @title = "Settings"
  end

  def update
    if @bsinfo.update_attributes(params[:bsinfo])
      flash[:success] = "Profile successfull updated"
          redirect_to @bsinfo
    else
      render 'edit'
    end
  end

  def destroy
    Bsinfo.find(params[:id]).destroy
    flash[:success] = "Scheduel destroyed"
    redirect_to bsinfos_path
  end
end 
```

编辑表单的链接就像

```
<% @bs = Bsinfo.all %>
<% @bs.each do |bsall| %>

<%= link_to "#{bsall.name}", edit_bsinfo_path(bsall), :class => "btn" %>

<% end %> 
```

url 显示为 localhost:3000/bsinfos/17/edit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T02:04:54.823

The snippet of code:

```
form_for(@bsinfo) 
```

is generating your error most likely because `@bsinfo` is nil.

I'd recommend looking at your controller code and checking for the conditions under which `@bsinfo` can be `nil`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:51:26.880

无论您的表单基于什么模型，都将返回为零。确保表单所基于的控制器中的 @var 实际上设置为您想要的对象的实例。

# php - 两个表单在单个 PHP 文件中有多个提交按钮

> ID：11402905
> 
> 赞同：1
> 
> 时间：2012-07-09T20:50:18.457
> 
> 标签：php, html, forms

我正在尝试使用 PHP 编写动态表单。我想要一个包含两种形式的网页：

1.  上面的形式允许在 mysql 数据库中搜索一个元素，例如，一个名称
2.  下面的表格显示了数据库中与此名称相关联的数据

如果我按下上层表单的“搜索”按钮，则会显示下层表单，并且文本字段将填充数据库中属于该名称的数据。如果我将用户名更改为其他值并再次按“搜索”，则会显示与新记录关联的数据，依此类推。

下部表格还有一个“更新”按钮，允许将对文本框（在下部）所做的更改传输到数据库。

现在，我遇到了以下问题：在我的脚本中，我最初将 name 的值（从上式）设置为“”。然后当我按下“搜索”按钮时，会显示表单的下部，并在下部显示相应的数据。然后当我按下“更新”按钮时，与名称关联的文本字段设置为空字符串。这是因为在我的脚本中，我最初将名称设置为“”。我希望在这种情况下，以上式输入的数据不会改变，即保持不变。

我想，我在这里遗漏了一些东西。对此可能有一个简单的解决方案，但我做的事情根本上是错误的。如果你能帮助我，那就太好了。

这就是我尝试过的......我删除了很多细节，但我想这可以让你知道我想要做什么。请注意，整个代码都在文件 update.php 中。

```
<?php
function search_bus($mysql, $name)
{
 // do some stuff here...
}

function update_bus($mysql, $b_id)
{
    // do some stuff here...
}

// some global variables
$b_id = 0;
$username = ""; // username of business

// get b_id that corresponds to username
if (isset($_REQUEST['search']))
{
    $b_id =0; // business id
    if (isset($_POST['user']))
    {
        $username = $_POST['user'];
        $b_id = search_bus($mysql, $username);
    }
}
elseif(isset($_REQUEST['update']))
{
    update_bus($mysql, $b_id);
}

?>

<h2>Search:</h2> 
<form name="search_bus" method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
Username: <input type="text" name="user" value="<?= htmlentities($username) ?>"/>
<input type="submit" value="Suchen" name="search"/>
</form>

<?php 
if($b_id != 0) 
{
?>

<h2>Data:</h2> 
<form name="business_design" method="post" action="<?php echo $_SERVER['PHP_SELF'];?>">
<-- some form follows here -->

<?php 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:24:07.983

我认为您缺少的是创建一个 HTML 隐藏字段来保留 Name 变量的值。

```
<input type="hidden" name="name" value="<?php print $nameVar ?>" /> 
```

将此输入添加到两个表单中，这样无论用户单击哪个按钮，您都可以保留该值。

希望这可以帮助。

添加代码以验证

```
<h2>Search:</h2>  
<form name="search_bus" method="post" 
action="<?php echo $_SERVER['PHP_SELF'];?>">
Username: <input type="text" name="user" value="<?= htmlentities($username) ?>"/>
<input type="hidden" name="b_id" value="<?php print $b_id?>" />
<input type="submit" value="Suchen" name="search"/> 
</form>  

<?php  if($b_id != 0)  { ?>  
<h2>Data:</h2>  
<form name="business_design" method="post" action="<?php echo $_SERVER['PHP_SELF'];>">      
<input type="hidden" name="b_id" value="<?php print $b_id?>" />
<-- some form follows here -->  
<?php  } ?> 

Dont initialize $b_id if it already comes into the http request.
if (!isset($_POST['b_id']))
{
 $b_id = 0; 
}          
else
{
 $b_id = $_POST['b_id'];
} 
```

这样您就可以始终记住最后选择的 b_id 值。希望这可以帮到你。

# c# - 静态变量和静态方法的区别

> ID：11402907
> 
> 赞同：3
> 
> 时间：2012-07-09T20:50:24.937
> 
> 标签：c#, asp.net, webforms

我知道，当您使用静态变量时，它的值会在所有用户之间共享。

```
static string testValue = "";
protected void SomeMethod(object sender, EventArgs e)
{
    testValue = TextBox1.Text;        
    string value = TestClass.returnString(TextBox1.Text); // <-- return from a static method
} 
```

所以在这种情况下，如果一个用户访问一个网站并将一个值放入文本框中，`testValue`当另一个用户在文本框中输入内容时，该字符串将被另一个值覆盖。（我认为？）

我现在有这个类：

```
public class TestClass
{
  public static string returnString(string msg)
  {
    return msg;
  }
} 
```

我的问题是：如果我使用静态方法，该方法的返回值是否也为所有用户共享？或者这总是每个用户的“独特”价值？

假设这个方法被五个不同的用户调用了五次，这个静态方法会返回一个特定用户输入的值，还是有可能一个用户得到另一个用户输入的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T21:09:54.670

你的问题是：

> 我现在的问题是，如果我使用静态方法，该方法的返回值是否也为所有用户共享？或者这总是每个用户的“独特”价值？

答案是，这取决于。使用您的示例：

```
public class TestClass 
{ 
  public static string returnString(string msg) 
  { 
    return msg; 
  } 
} 
```

在这种情况下，5 个不同的用户（很可能）将 5 个不同的字符串传递给静态方法。因此他们会得到五个不同的字符串。所以对于这种情况：

```
string value = TestClass.returnString(TextBox1.Text); 
```

每个用户都会取回他们在自己的 TextBox 中输入的任何内容。另一方面，如果代码是这样的：

```
string value = TestClass.returnString(testValue); 
```

他们都会取回在返回时发生在静态字符串中的内容。

所以要记住的规则是：

*   如果该方法使用静态成员变量，则存在不同用户影响彼此结果的风险。不管方法是否是静态的，这都是真的。
*   如果方法只使用调用参数和局部变量，并且调用参数本身不指向statisc成员变量，则不同用户的调用不会相互影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T20:53:28.380

静态方法不绑定到特定对象，而是绑定到类。您不需要实例`TestClass`来调用在您的类中声明的静态函数。因此，静态函数不能使用类的非静态成员，因为它们绑定到类的特定实例。

事实上，静态变量也是如此。静态变量不绑定到特定对象，而是绑定到类。如果一个对象更改了变量，那么所有对象都会更改它，因为它只存在一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T20:55:19.307

> 我现在的问题是，如果我使用静态方法，该方法的返回值是否也为所有用户共享？或者这总是每个用户的“独特”价值？

静态变量在应用程序域内共享。Web 服务器可以并行运行多个实例，在多个用户之间共享它们，因此您不能依赖它。

**每个用户一个实例**：如果要为每个用户维护唯一值，请使用会话变量。

**所有用户的一个实例**：在多个用户之间共享一个真正的唯一变量实例并非易事，考虑使用数据库来确保*所有*用户都获得相同的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T20:57:24.357

静态方法或变量始终通过类本身可用，并且不仅绑定到此类的实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T21:03:49.130

如果静态方法不使用共享资源，那么多个调用者同时点击它就不会出现问题。因此，只要该方法没有作为参数传递“共享对象”（意味着每个调用者都有自己的传递参数的实例），并且静态方法本身不使用任何共享资源（变量/对象等）。 ..在静态方法之外），就好像每个调用者都有自己的方法副本，因为他们每个人都在自己的线程上运行该方法。

但是，如果静态方法使用共享对象或资源（例如在别处定义的静态对象），则多个调用者可能会相互踩踏，因此您需要在静态方法中进行某种锁定来处理此问题。在这种情况下，静态方法将不是线程安全的，除非您添加自己的逻辑来处理多个命中它的线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T20:57:57.163

据我了解，从 5 个不同位置或从 5 台不同计算机登录到该站点的 5 个用户，该值不会被共享。它只能从一台 PC 上为一位用户共享。

您可以假设每个浏览器都运行应用程序的单独副本。静态变量不在应用程序之间共享，而是在应用程序内共享。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T20:58:34.077

您只是返回已作为参数传递的变量，因此您的问题没有意义。

每个方法调用都将另一个变量作为参数，并且该变量将被返回，那么该变量如何在所有用户之间共享？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-09T20:58:52.920

请不要依赖静态变量，但是当需要获取 objetc 的单个实例时，通常会使用静态方法，例如 HttpContext

# android - 编写用于 Android 的 GSM 模拟器

> ID：11402910
> 
> 赞同：4
> 
> 时间：2012-07-09T20:50:26.863
> 
> 标签：android, gsm, at-command, android-x86

对于我正在做的一些工作，我想要一个模拟的 GSM 调制解调器，它将通过 Unix 套接字与 Android-x86 虚拟机进行通信。VM 应该将模拟器视为真正的调制解调器，并使用它来发送 SMS（作为功能的第一步）。

到目前为止，我已经把一些东西放在一起处理一些 AT 命令，然后对所有其他命令回复“OK”。对于某些命令，例如“AT+CRSM”，我只有一张通过运行官方 Android 模拟器和查看无线电日志收集的响应表。对于其他人，我保持一些状态并构建答案；这些命令包括：

```
CFUN?
CPIN?
CGREG?
CGREG?
COPS?
CGREG=
CREG=
CPIN=
COPS=
CRSM=
CSMS=
CGSN
CIMI
CSQ 
```

Android 将启动，并向我的模拟调制解调器发送命令，它会回答，但它似乎并没有完全正常工作。Android 不会检测任何无线电信号强度，例如，仅在信号栏中显示“x”。

有谁知道类似的项目，或者只是为了获得一些基本功能*绝对*需要哪些 AT 命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:53:59.817

好吧，我会回答我自己的另一个问题，这样更容易。

我最终实现了一个维护一些状态的模拟器，例如是否启用了未经请求的 CREG 和 CGREG 消息、网络注册状态和网络名称格式（对于 COPS 命令）以及 SMS 的消息引用计数器。

它支持以下命令：

```
CFUN?
CPIN?
CGREG?
CREG?
COPS?
CGREG=
CREG=
CPIN=
COPS=
CRSM=
CSMS=
CMGS=
CGSN
CIMI
CSQ 
```

所有其他消息只会得到“OK”响应。

使用带有“-radio unix:/tmp/phone”开关的模拟器中运行的库存 AOSP Android 源代码，我可以发送 SMS 消息并将二进制 PDU 解码为真实消息。我将继续添加功能，以便可以将 SMS 消息注入回 Android，并希望在某个时候开源代码。

# ruby-on-rails - 在 HAML 文档中的 Ruby 插值中抢救异常

> ID：11402916
> 
> 赞同：4
> 
> 时间：2012-07-09T20:50:44.500
> 
> 标签：ruby-on-rails, ruby, haml

我在 HAML 文档中有一些插入的 ruby​​ 代码，如下所示：

```
:javascript
    a = { 'something' : "#{model.attribute.present? ? method(parameter) : ''}" } 
```

但是，方法（参数）正在抛出带有一些参数的异常，所以我想挽救这个异常。当抛出异常时，我希望将“某物”键映射到其他东西。

我不清楚如何使用 HAML 代码/ruby 插值来执行此操作的确切语法。我已经尝试了几件事，但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T21:07:12.527

你应该走这条线

```
model.attribute.present? ? method(parameter) : '' 
```

并从中制作一个辅助方法

```
class ApplicationHelper
  def some_method
    model.attribute.present? ? method(parameter) : ''
  rescue
    "something else" # this is your value in case of exception
  end
end 
```

然后你的 HAML 变得微不足道

```
:javascript
    a = { 'something' : "#{some_method}" } 
```

# c# - 在使用 slimDX 的 Direct3D 设备上使用 Direct2D

> ID：11402918
> 
> 赞同：1
> 
> 时间：2012-07-09T20:50:54.503
> 
> 标签：c#, slimdx

我已经使用 easyhook 挂钩到进程的 endScene 函数。

我想使用这个新发现的“力量”在屏幕上绘制一个简单的矩形（甚至可能是渐变）。但是为了更顺利一点，我想使用 Direct2D（而不是进程使用的 directX9 设备）。

我如何使用 direct2d 在 direct3d (DX9) 设备上绘制东西？

# osx-lion - 简单的脚本不再适用于 Lion

> ID：11402920
> 
> 赞同：1
> 
> 时间：2012-07-09T20:50:55.447
> 
> 标签：osx-lion, applescript

我有一个简单的 Applescript，它在您选择的文件夹中拍摄许多图像，然后使用图形转换器镜像图像。如果我把它放在一个新的 AS 文件中，这个脚本就会运行；但是，如果我再次尝试运行它，我会收到以下错误“无法获取应用程序“GraphicConverter”的窗口 1。无效索引。”

此脚本始终在 OSX 10.6 上运行

我正在运行 OSX 10.7.4 和 Graphic Converter 8.1（最新版本）。

这是脚本

```
tell application "Finder"
   activate
   set loopFinish1 to 0
   set pathName to (choose folder with prompt "Choose Folder Containing Images")
   set fileList1 to every file of folder pathName
   set loopFinish1 to count of items of fileList1
end tell

tell application "GraphicConverter"
   activate
   repeat with i from 1 to loopFinish1
       set currentFile to item i of fileList1
       open currentFile as alias
       mirror window 1 in horizontal
       close window 1 saving yes
   end repeat
end tell 
```

这真让我抓狂！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:44:46.603

**GraphicConverter**有其他窗口（可见和不可见），最好使用文档来获取正确的窗口。另外，也许图像没有打开，所以没有窗口，使用`try`块。

```
activate
set pathName to (choose folder with prompt "Choose Folder Containing Images")
tell application "Finder" to set fileList1 to (document files of folder pathName) as alias list

tell application "GraphicConverter"
    activate
    repeat with tFile in fileList1
        set currentDoc to open tFile
        set CurrWindow to (first window whose its document is currentDoc)
        mirror CurrWindow in horizontal
        close currentDoc saving yes
    end repeat
end tell 
```

# .net - 具有内置运行时脚本的 .NET 应用程序框架

> ID：11402921
> 
> 赞同：0
> 
> 时间：2012-07-09T20:50:57.203
> 
> 标签：.net, scripting, frameworks

对于我们的新开发，我们希望有一个支持最终用户定制和编程的框架。类似于现代 ERP 系统的东西（例如 Navision、Baan/LN、SAP）。因此，拥有*开发*许可证的最终用户可以向表中添加新字段、创建新表、继承表单并修改默认功能、添加新表单等。开发 IDE 应该在 App 内部实现（没有其他 IDE）。输出应用程序应该是 Win/Web（我更喜欢两者）。对我来说，最好的选择是 .NET(C#) 市场上是否有任何框架需要内置功能？Rgds，弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:01:02.107

您可以使用 .NET 创建框架并将您的接口公开为公共 .NET 类。您可以使用[.NET XML 文档](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)为您的 API 创建文档，然后使用[Sandcastle](http://shfb.codeplex.com/)为您的 API生成在线帮助。

然后，您需要定义一些第三方需要实现的接口，以便能够在您的产品中加载他们的定制。同样，您可以使用 .NET XML 文档将它们实现为公共 .NET 接口和文档。

然后，您需要定义一种方式，这些扩展将在您的应用程序中注册并由您的应用程序加载。您可以为此使用[MEF 。](http://mef.codeplex.com/)

要允许第三方创建表，您需要定义某种配置文件，他们可以提供它们的扩展名。然后，您将在安装扩展程序时运行这些配置文件。

这里的最佳实践是使用您自己的 API 和可扩展性框架来构建您自己的应用程序。这样，您将在构建自己的应用程序时发现框架的所有限制。它将迫使您创建真正可用的 API。它被称为[dogfooding](http://en.wikipedia.org/wiki/Eating_your_own_dog_food)。

编辑：第三方将能够使用 Visual Studio 的免费 Express 版本为您的应用程序构建扩展。与您能想到的任何类似 VB 的解决方案相比，Visual Studio 是更好的“脚本”环境。

# wso2 - 是否可以为 WSO2 ESB 定义 2 个 HTTP 传输接收器？

> ID：11402922
> 
> 赞同：2
> 
> 时间：2012-07-09T20:51:04.307
> 
> 标签：wso2, wso2esb

我正在 Mac 10.7.4 上开发 WSO2 ESB 4.0.3。

我正在尝试在 axis2.xml 中设置 2 个 HTTP 传输侦听器，如下所示

```
<transportReceiver name="http-default" class="org.wso2.carbon.core.transports.http.HttpTransportListener">
    <!--
       Uncomment the following if you are deploying this within an application server. You
       need to specify the HTTP port of the application server
    -->
    <parameter name="port">8580</parameter>

    <!--
   Uncomment the following to enable Apache2 mod_proxy. The port on the Apache server is 80
   in this case.
    -->
    <!--<parameter name="proxyPort">80</parameter>-->
</transportReceiver>

<transportReceiver name="http-default" class="org.wso2.carbon.core.transports.http.HttpsTransportListener">
    <!--
       Uncomment the following if you are deploying this within an application server. You
       need to specify the HTTPS port of the application server
    -->
    <parameter name="port">8543</parameter>

    <!--
   Uncomment the following to enable Apache2 mod_proxy. The port on the Apache server is 443
   in this case.
    -->
    <!--<parameter name="proxyPort">443</parameter>-->
</transportReceiver>
<transportReceiver name="http" class="org.apache.synapse.transport.nhttp.HttpCoreNIOListener">
    <parameter name="port" locked="false">8280</parameter>
    <parameter name="non-blocking" locked="false">true</parameter>
    <!--parameter name="bind-address" locked="false">hostname or IP address</parameter-->
    <!--parameter name="WSDLEPRPrefix" locked="false">https://apachehost:port/somepath</parameter-->
    <parameter name="httpGetProcessor" locked="false">org.wso2.carbon.transport.nhttp.api.NHttpGetProcessor</parameter>
    <!--<parameter name="priorityConfigFile" locked="false">location of priority configuration file</parameter>-->
</transportReceiver>

<!-- the non blocking https transport based on HttpCore + SSL-NIO extensions -->
<transportReceiver name="https" class="org.apache.synapse.transport.nhttp.HttpCoreNIOSSLListener">
    <parameter name="port" locked="false">8243</parameter>
    <parameter name="non-blocking" locked="false">true</parameter>
    <!--parameter name="bind-address" locked="false">hostname or IP address</parameter-->
    <!--parameter name="WSDLEPRPrefix" locked="false">https://apachehost:port/somepath</parameter-->
    <!--<parameter name="priorityConfigFile" locked="false">location of priority configuration file</parameter>-->
    <parameter name="httpGetProcessor" locked="false">org.wso2.carbon.transport.nhttp.api.NHttpGetProcessor</parameter>
    <parameter name="keystore" locked="false">
        <KeyStore>
            <Location>repository/resources/security/wso2carbon.jks</Location>
            <Type>JKS</Type>
            <Password>wso2carbon</Password>
            <KeyPassword>wso2carbon</KeyPassword>
        </KeyStore>
    </parameter>
    <parameter name="truststore" locked="false">
        <TrustStore>
            <Location>repository/resources/security/client-truststore.jks</Location>
            <Type>JKS</Type>
            <Password>wso2carbon</Password>
        </TrustStore>
    </parameter>
    <!--<parameter name="SSLVerifyClient">require</parameter>
        supports optional|require or defaults to none -->
</transportReceiver> 
```

我也配置了相应的发件人。

问题是，是否可以在axis2.xml 中定义2 个HTTP 传输接收器？

当我尝试启动 ESB 时，它不允许我定义 2 个 HTTP 传输接收器。我想为某些服务使用 NIO 传输接收器，为其他服务使用默认的 HTTP 传输接收器。这是因为部署在 WSO2 ESB 中的一些服务使用由其他进程设置的 cookie 对目录服务进行身份验证。Cookie 位于 HTTPServletRequest 对象中，并且仅当我不使用 NIO 传输并使用默认的 HTTP 传输接收器时才可用。

请帮忙。谢谢阿比吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:56:05.023

您应该能够在 ESB 中定义两个传输接收器，您需要为传输提供不同的名称（例如 http1、http2）。对于所有代理服务的示例，您应该能够使用可用的 9763 http 端口。

但是，定义两个传输发送者存在问题。您可以定义两个传输发送方，如 http1 和 http2。但是在给出http位置时问题就来了。例如，我们axis2使用url推断传输。因此，当我们说 http:// 时，它将发送者作为 http。由于此协议名称定义明确，因此当您使用非标准名称时，它无法选择传输发件人。

# watir - 身体。每个（ ） ; 方法缺少水

> ID：11402928
> 
> 赞同：1
> 
> 时间：2012-07-09T20:51:36.577
> 
> 标签：watir

您好，我不确定我是否使用了错误的 watir 语法，或者我的 watir 是否有问题。下面如果我正在编写的代码遍历表体的每一行。是

```
e.frame(:name => "content").frame(:name => "main").tbody(:class => "blacklabel").each(){|i|.....} 
```

当我运行此代码时，我得到一个丢失的错误代码。另外当我尝试

e.frame(:name => "content").frame(:name => "main").tbody(:class => "blacklabel").length()

我收到一个缺少的方法错误。以下是我正在使用的网站。

![在此处输入图像描述](../Images/5b29a2c8f561c952d050e14a330b8486.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T22:31:03.583

您想要遍历行集合而不是表体 - 即您需要`rows()`在`each()`. 所以你想做：

```
my_table = e.frame(:name => "content").frame(:name => "main").tbody(:class => "blacklabel")
my_table.rows.each{|i|.....} 
```

tbody 元素使用 TableSection 类。可以在此处查看 TableSection API - [http://rdoc.info/gems/watir-classic/Watir/TableSection](http://rdoc.info/gems/watir-classic/Watir/TableSection)。

# tomcat - 部署战争时出现Tomcat错误-无法启动上下文路径/示例中的应用程序

> ID：11402929
> 
> 赞同：0
> 
> 时间：2012-07-09T20:51:39.083
> 
> 标签：tomcat

在 Cpanel（WHM）中的 Tomcat 中部署 WAR 文件时出现以下错误。我收到以下错误..对此有任何帮助吗？

**catalina.out 的日志文件**

```
 [11491] net].[/sample] Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.RuntimeException: Unable to locate constructor with Class parameter for class org.codehaus.groovy.grails.commons.DefaultGrailsControllerClass
            at java.security.AccessController.doPrivileged(Native Method)
            at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3795)
            at org.apache.catalina.core.StandardContext.start(StandardContext.java:4252)
            at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1173)
            at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:550)
            at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:105)
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
            at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)
            at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
            at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
            at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
            at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
            at java.lang.Thread.run(Thread.java:662)
    Caused by: java.lang.RuntimeException: Unable to locate constructor with Class parameter for class org.codehaus.groovy.grails.commons.Defau                    ltGrailsControllerClass
            ... 21 more
    Caused by: java.lang.reflect.InvocationTargetException
            ... 21 more
    Caused by: org.codehaus.groovy.grails.exceptions.NewInstanceCreationException: Could not create a new instance of class [PhysicalAbilityCon                    troller]!
            ... 21 more
    Caused by: java.lang.OutOfMemoryError: PermGen space
            at java.lang.ClassLoader.defineClass1(Native Method)
            at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
            at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
            at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
            at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1960)
            at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:933)
            at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1405)
            at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1284)
            at PhysicalAbilityController.<init>(PhysicalAbilityController.groovy) 
```

这是 catalina.err 的错误，如下所示； **catalina.err 的日志文件**

```
 Jul 10, 2012 2:09:03 AM org.apache.catalina.core.ApplicationContext log
            INFO: HTMLManager: start: Starting web application at '/sample'
            Jul 10, 2012 2:09:04 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
            INFO: validateJarFile(/usr/local/jakarta/apache-tomcat-5.5.35/work/Catalina/sample.net/sample/WEB-INF/lib/javaee.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
            Jul 10, 2012 2:09:05 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
            INFO: validateJarFile(/usr/local/jakarta/apache-tomcat-5.5.35/work/Catalina/sample.net/sample/WEB-INF/lib/jsp-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/jsp/JspPage.class
            Jul 10, 2012 2:09:16 AM org.apache.catalina.core.StandardContext start
            SEVERE: Error listenerStart
            Jul 10, 2012 2:09:16 AM org.apache.catalina.core.StandardContext start
            SEVERE: Context [/sample] startup failed due to previous errors 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:53:50.173

```
Caused by: java.lang.OutOfMemoryError: PermGen space 
```

您没有足够的 PermGen 内存，这在使用 Tomcat + Groovy 时很常见。将此添加到您的启动脚本/JVM 选项中：

```
-XX:PermSize=150M 
```

如果问题仍然存在，请使用更大的值。您可以在`catalina.sh`/中设置此值`catalina.bat`，搜索`JAVA_OPTS`变量。

# c++ - C++ 映射可以包含指向我的任意类的指针吗？

> ID：11402931
> 
> 赞同：0
> 
> 时间：2012-07-09T20:51:43.833
> 
> 标签：c++, pointers, stl, map

我正在编写一个小型游戏引擎作为夏季项目，并且在 STL 地图上有些挣扎。

我已经声明了一个类`RenderList`来保存对象。RenderList 将被传递给一个`Renderer`类来完成这项工作。

有`RenderList`一个`map<std::string,Entity*> objects;`

这一切都有效，直到我尝试`Entity*`从地图中获取并得到：

断言失败，在 vc/include/xtree 表达式中：map/set iterator not dereferencable。

这是检索指针的代码。

```
Entity* RenderList::getByName(std::string str){
    return objects.find(str)->second;
} 
```

我需要它来保存一个指针而不是实际的对象，因为我需要不同的子类`Entity`。

我对 STL 还很陌生，我不应该在地图中存储指针吗？

当然我应该被允许这样做，或者存储对象是否更好？

最后，我是不是做错了！？

希望这个问题不是重复的，我事先做了快速搜索。此外，如果这在 GameDev Stack 中会更好，我会在那里发布。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T20:55:00.843

如果未找到该键，则`map::find(key)`返回一个“过去的”迭代器，即返回的值`map::end()`，并且该迭代器不指向任何元素，因此无法取消引用。`find`在取消引用之前，您不会检查返回的内容。

你确定他们的钥匙在地图上吗？

如果找不到键，您可能想要执行类似 return NULL 之类的操作，您可以通过将返回的迭代器与`end`eg进行比较来检查它

```
Entity* RenderList::getByName(std::string str){
  map_type::iterator it = objects.find(str);
  if (it == objects.end())
    return NULL;
  return it->second;
} 
```

其中`RenderList`定义了 typedef：

```
typedef map<std::string,Entity*> map_type; 
```

（注意，我*总是*让我的类为我用作实现细节的容器定义 typedef，因为它比写起来容易`map_type::iterator`得多`map<std::string,Entity*>::iterator`，因为如果我将容器更改为其他东西，我不必将使用它的所有代码更改为例如`map<std::string,shared_ptr<Entity>>::iterator`我可以保持原样`map_type::iterator`，它仍然可以正常工作。）

关于一般设计，您可以存储一个`boost::shared_ptr<Entity>`或`std::tr1::shared_ptr<Entity>`代替原始指针吗？管理对象生命周期将更加安全和简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T20:54:53.907

这可能意味着您要查找的名称在地图中不存在。如果键不存在，`find`方法返回映射的结束迭代器，这确实是不可解引用的。

如果“未找到”的情况是自然发生的，那么你可以这样做

```
Entity* RenderList::getByName(std::string str){
    map<std::string,Entity*>::iterator it = objects.find(str);
    return it != objects.end() ? it->second : NULL;
} 
```

从而将处理这种情况的责任转嫁给调用者。

如果“未找到”的情况不应该发生，要么抛出异常，要么至少做

```
assert(it != objects.end()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T20:57:45.903

正如其他人指出的那样，您正在查找的名称在地图中不存在。每个人都很快建议您检查`.find()`. 相反，我建议您不要调用`.find()`. 以下是我将如何解决您的问题：

```
Entity* RenderList::getByName(std::string str){
  return objects[str];
} 
```

在上面的代码中，查找不存在的映射条目将创建一个指针值为 NULL 的条目，并返回 NULL。

您需要在*某处*添加一些代码来检查空指针，然后再尊重它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T20:55:24.387

这样做的一件事是您需要处理没有匹配的条目的情况`str`。不确定具体的错误是什么，因为我（遗憾的是）对地图进行了同样的操作以检索指针..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T20:56:30.813

如果映射不包含您传递给该`find`方法的键，那么它将返回`objects.end()`. 取消引用这是一个运行时错误，可能会导致您看到的错误。请尝试：

```
map<std::string,Entity*>::iterator findIt;
findIt = objects.find(str);

if ( findIt != objects.end() )
{
    return findIt->second;
}
else
{
   // Handle error here
} 
```

# asp.net - iPhone 上的 PhoneGap 文件传输错误（代码：3，http_status：404）

> ID：11402937
> 
> 赞同：0
> 
> 时间：2012-07-09T20:52:16.450
> 
> 标签：asp.net, ios, xcode, cordova, asmx

我正在尝试使用 PhoneGap 创建一个 iOS 应用程序，该应用程序允许用户将照片上传到 Web 服务器。这是我的代码。

```
<!DOCTYPE html>
<html>
<head>
    <title>Capture Photo</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
    <script type="text/javascript" charset="utf-8">

        // Wait for PhoneGap to load
        document.addEventListener("deviceready", onDeviceReady, false);

        // PhoneGap is ready
        function onDeviceReady() {
            // Do cool things here...
        }

        function getImage() {
            // Retrieve image file location from specified source
            navigator.camera.getPicture(uploadPhoto, function(message) {
                                        alert('get picture failed');
                                        },{
                                        quality: 50, 
                                        destinationType: navigator.camera.DestinationType.FILE_URI,
                                        sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
                                        }
                                        );

        }
        function uploadPhoto(imageURI) {
            var options = new FileUploadOptions();
            options.fileKey="recFile";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";

            var params = new Object();
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;

            var ft = new FileTransfer();
            ft.upload(imageURI, "http://someWebSite.com/Testing/SaveImage.asmx/SaveImage", win, fail, options, true);
        }

        function win(r) {
            console.log("Code = " + r.responseCode);
            console.log("Response = " + r.response);
            console.log("Sent = " + r.bytesSent);
        }

        function fail(error) {
            alert("An error has occurred: Code = " + error.code);
            alert("source = " + error.source);
            alert("http_status = " + error.http_status);
            console.log("upload error source " + error.source);
            console.log("upload error target " + error.target);
        }                        
        </script>
</head>
<body>
    <button onclick="getImage();">Upload a Photo</button>
</body> 
```

我的 index.html 文件有什么问题，还是 ASMX 文件有问题？

每当我尝试在第 4 代 iPod Touch 上进行测试时，都会收到以下错误消息：

```
2012-07-09 16:24:03.257 Test1[916:707] File Transfer Finished with response code 404
2012-07-09 16:24:03.260 Test1[916:707] FileTransferError {
code = 3;
"http_status" = 404;
source = "http://someWebSite.com/Testing/SaveImage.asmx/SaveImage";
target = "file://localhost/var/mobile/Applications/5DD01E68-02F7-410B-996A- 2D70BF1A61D3/tmp/cdv_photo_046.jpg";}
2012-07-09 16:24:07.137 Test1[916:707] ERROR: Plugin 'Debug Console' not found, or is not a CDVPlugin. Check your plugin mapping in Cordova.plist. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:50:35.320

您可以按照此示例[使用 asmx 将图像从 android phonegap 上传到服务器](https://stackoverflow.com/questions/8643708/upload-image-from-android-phonegap-to-a-server-using-asmx)

或者

一个简单的例子

js

```
<!DOCTYPE HTML>
<html>
<head>
<title>Cordova</title>
<link rel="stylesheet" href="style.css" media="screen" />
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" charset="utf-8">
var pictureSource; // picture source
var destinationType; // sets the format of returned value 

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    pictureSource = navigator.camera.PictureSourceType;
    destinationType = navigator.camera.DestinationType;
}

</script>

</head>
<body>
<script type="text/javascript" charset="utf-8">
    var myData = "";
    $(document).ready(function() {
        $("#getDataFromServer").click(function() {
            var imageData = myData;
            $.ajax({
                type : "POST",
                url : 'http://my.domain.name/saveImage.ashx',
                data : {
                    image : imageData
                },
                beforeSend : function() {
                    $("#comment2").text("Start ajax " + imageData.length);
                },
                success : function(data) {
                    $("#comment2").text("Uploaded! " + data);
                },
                error : function(request, error) {
                    $("#comment2").text("Error! " + error);
                }
            });
        });
        })

    function capturePhotoEdit(source) {
        navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
            quality : 50,
            destinationType : destinationType.DATA_URL,
            sourceType : source
        });
    }

    function onFail(message) {
        alert('Failed because: ' + message);
    }

    function onPhotoDataSuccess(imageData) {

        console.log(imageData);

        var smallImage = document.getElementById('smallImage');

        smallImage.style.display = 'block';

        smallImage.src = "data:image/jpeg;base64," + imageData;
        myData = imageData;
        $("#comment").text(imageData.length);

    }
</script>
<h1>Hello World</h1>

<p>
    <a href="#" onclick="capturePhotoEdit(pictureSource.PHOTOLIBRARY);">get
        image</a>
</p>
<p>
    <a href="#" id="getDataFromServer">send image</a>
</p>
<span id="comment2"></span>
<img style="display: none; width: 100px; height: 100px;"
    id="smallImage" src="" />
<span id="imagename"></span>
<span id="comment"></span> 
```

asp.net 处理程序 saveImage.ashx

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.IO;
using System.Text;

namespace Recepies
{
/// <summary>
/// Summary description for saveImage
/// </summary>
public class saveImage : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        try
        {
            string filePath = "";
            filePath = context.Server.MapPath(".");
            string fileName = RandomString(10);
            string myImage = context.Request.Form["image"];
            if (myImage.Length > 0)
            {
                File.WriteAllBytes(filePath + "/upload/" + fileName + ".jpg", Convert.FromBase64String(myImage));
                context.Response.ContentType = "text/plain";
                context.Response.Write("File was saved - " + fileName + ".jpg");
            }
            else
            {
                context.Response.ContentType = "text/plain";
                context.Response.Write("File was not saved");
            }
        }
        catch (Exception ex)
        {

            context.Response.ContentType = "text/plain";
            context.Response.Write(ex.Message);
        }

    }

    private static Random random = new Random((int)DateTime.Now.Ticks);//thanks to McAden
    private string RandomString(int size)
    {
        StringBuilder builder = new StringBuilder();
        char ch;
        for (int i = 0; i < size; i++)
        {
            ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
            builder.Append(ch);
        }

        return builder.ToString();
    }

    public bool IsReusable
    {
        get
        {
            return false;
          }
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T04:53:02.690

我一直有同样的问题（在 iOS7 上）。对我有用的解决方案是添加“saveToPhotoAlbum”参数。

```
navigator.camera.getPicture(success, fail, {
    quality: 80,
    destinationType: Camera.DestinationType.FILE_URI,
    sourceType: Camera.PictureSourceType.CAMERA,
    saveToPhotoAlbum: true
}); 
```

# javascript - 按键上的 Javascript 事件，但在输入字符之后

> ID：11402938
> 
> 赞同：1
> 
> 时间：2012-07-09T20:52:17.510
> 
> 标签：javascript, jquery, keyboard

所以我正在对文本字段进行字符计数。我需要更新按键（不是按键）上的字符数。问题在于，使用 jquery 的`.keydown()`方法，它会在输入字符之前刷新计数器，因此计数器总是比实际计数落后 1 个按键。如何在按键时更改计数，但等待输入字符？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T20:53:46.170

改为使用[`.keyup()`](http://api.jquery.com/keyup/)。它在释放键时触发，因此计数器将增加。

从文档中：

> 当用户在键盘上释放一个键时，keyup 事件被发送到一个元素。它可以附加到任何元素，但事件仅发送到具有焦点的元素。

您可以像使用任何其他事件一样使用它：

```
$('input').keyup(function(e) {
    var text = $(this).val();
    console.log(text.length);
}); 
```

确保计算文本框中的字符数（如上例所示），**而不是按下的键数**。例如，按`Ctrl`+`C`将导致计算两个额外的字符，但实际上没有一个字符输入到输入中。

* * *

如果您使用的是 jQuery 1.7+，请使用`.on()`：

```
$('input').on('keyup', function(e) {
    // Do your magic
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-11T15:12:48.103

`setTimeout`似乎在这里工作：

```
$('input').keydown(function(e) {
    var $this = $(this);
    setTimeout(function() {
        var text = $this.val();
        console.log(text.length);
    }, 0);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T21:23:15.700

一个简单的例子：

```
var MAX_CHARACTERS = 60;
$('textarea').bind('keyup keydown', function() {
    var $element = $(this);
    if($element.val().length > MAX_CHARACTERS) {
        $element.val($element.val().substring(0, MAX_CHARACTERS));
    }
    $('.counter').val(MAX_CHARACTERS - $element.val().length);
}); 
```

[演示](http://jsfiddle.net/ricardolohmann/yzDU7/)

# c# - mysql数据读取从类返回0行

> ID：11402942
> 
> 赞同：1
> 
> 时间：2012-07-09T20:52:36.247
> 
> 标签：c#, mysql, mysqldatareader

我正在我的应用程序中实现一个数据库管理器类，主要是因为有 3 个数据库要连接到一个本地数据库。

但是返回函数不起作用，我知道查询带回了行，但是当它被类返回时它有 0。我错过了什么？

```
public MySqlDataReader localfetchrows(string query, List<MySqlParameter> dbparams = null)
    {
        using (var conn = connectLocal())
        {
            Console.WriteLine("Connecting local : " + conn.ServerVersion);
            MySqlCommand sql = conn.CreateCommand();
            sql.CommandText = query;
            if (dbparams != null)
            {
                if (dbparams.Count > 0)
                {
                    sql.Parameters.AddRange(dbparams.ToArray());
                }
            }
            MySqlDataReader reader = sql.ExecuteReader();
            Console.WriteLine("Reading data : " + reader.HasRows + reader.FieldCount);
            return reader;
            /*
            using (MySqlCommand sql = conn.CreateCommand())
            {
                sql.CommandText = query;
                if (dbparams != null)
                {
                    if (dbparams.Count > 0)
                    {
                        sql.Parameters.AddRange(dbparams.ToArray());
                    }
                }

                MySqlDataReader reader = sql.ExecuteReader();
                Console.WriteLine("Reading data : " + reader.HasRows + reader.FieldCount);

                sql.Parameters.Clear();
                return reader;
            }*/
        }

    } 
```

以及获取结果的代码

```
query = @"SELECT jobtypeid, title FROM jobtypes WHERE active = 'Y' ORDER BY title ASC";
            //parentfrm.jobtypes = db.localfetchrows(query);
            var rows = db.localfetchrows(query);
            Console.WriteLine("Reading data : " + rows.HasRows + rows.FieldCount);
            while (rows.Read()){

            } 
```

这些脚本返回以下内容：

```
Connecting local : 5.5.16
Reading data : True2
Reading data : False0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:56:01.983

您想`DataReader`从 a中返回 a ，`using-statement`这将隐式关闭底层连接。

而不是返回`DataReader`我会推荐以下模式。你可以让步[`IEnumerable<IDatarecord>`](http://msdn.microsoft.com/en-us/library/system.data.idatarecord.aspx)。

```
public IEnumerable<IDataRecord> localfetchrows(string query, List<MySqlParameter> dbparams = null)
{
    using (var conn = connectLocal())
    {
        MySqlCommand sql = conn.CreateCommand();
        sql.CommandText = query;
        if (dbparams != null)
        {
            if (dbparams.Count > 0)
            {
                sql.Parameters.AddRange(dbparams.ToArray());
            }
        }

        conn.Open();
        using (IDataReader rdr = sql.ExecuteReader())
        {
            while (rdr.Read())
            {
                yield return (IDataRecord)rdr;
            }
        }
    }
} 
```

例如，您可以通过以下方式调用它：

```
var records = localfetchrows(query);
foreach (var rec in records.Take(10))
{ 
     Console.WriteLine("Reading data : " + rec.FieldCount);
} 
```

因此，您无需将所有内容都加载到内存中，只是为了获取其中的一小部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:01:29.643

您使用块在 MySqlConnection 内创建阅读器，当您从该块退出时，您的阅读器没有可使用的连接。

一种可能但效率较低的解决方案是使用 Fill 方法取回数据集。这不仅效率较低，而且，如果您需要处理数据行，您会发现自己在行上再次循环

```
public DataSet localfetchrows(string query, List<MySqlParameter> dbparams = null) 
{ 
    DataSet ds;
    using (var conn = connectLocal()) 
    { 
        Console.WriteLine("Connecting local : " + conn.ServerVersion); 
        MySqlCommand sql = conn.CreateCommand(); 
        sql.CommandText = query; 
        if (dbparams != null) 
        { 
            if (dbparams.Count > 0) 
            { 
                sql.Parameters.AddRange(dbparams.ToArray()); 
            } 
        } 
        MySqlDataReader reader = sql.ExecuteReader(); 
        Console.WriteLine("Reading data : " + reader.HasRows + reader.FieldCount); 
        reader.Fill(ds);
        return ds; 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:01:55.513

`using (var conn = connectLocal())`

您将连接放在 using 语句中，因此在到达此行后关闭并处理连接：

```
return reader; 
```

换句话说，当调用者得到`reader`回复时，您已经关闭了数据库连接并且无法获取行。读取行时必须打开连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T21:00:35.507

在我看来，您在使用阅读器之前正在处理连接。仅在阅读器完成后尝试处理连接。

# c# - 使用 htmlagility pack 替换 src 值

> ID：11402949
> 
> 赞同：6
> 
> 时间：2012-07-09T20:53:13.387
> 
> 标签：c#, html, html-agility-pack, src, html-manipulation

我正在为网站使用 CMS 系统。我的内容贡献者在系统中放置了一些非常大的图像，然后继续在 cms 中调整它们的大小，以便它们适合页面或文章。当网络用户点击该页面时，他们会下载完整的图像，即使贡献者已经调整了图像的大小。我找到了一个图像调整器插件，我需要做的就是在 src 中的图像名称后面添加宽度和高度参数。进行搜索看起来我应该使用 html 敏捷包来实现这一点，但有人可以帮我完成我的代码。我想出了如何在内容中找到 img 标签，但我不知道如何在 src 中附加宽度和高度。

**旧标签**

```
<img src="/IMG_3556E__sq2.jpg?n=9418" id="/IMG_3556E__sq2.jpg?n=9418" width="83px" height="83px" /> 
```

**为此 - 注意 src 值已更改**

```
<img src="/IMG_3556E__sq2.jpg?width=83&amp;height=83" id="/IMG_3556E__sq2.jpg?n=9418" width="83px" height="83px" /> 
```

到目前为止，这是我的代码。我需要的只是 if 语句中的帮助，说明 img 标签是否包含宽度或高度，将它们附加到 src 属性。

```
ContentManager contentManager = new ContentManager();
ContentData Content = contentManager.GetItem(id);

HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(Content.Html);

foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//img/@src"))
{
    if (//img has a width or height, it means image has been resized) {
        //append that nodes src within the content.html with the ?width=x&height=x
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T21:06:05.620

试试这个：

```
static void Main(string[] args)
{
    var htmlDoc = new HtmlDocument();
    htmlDoc.Load(@"E:\Libs\HtmlAgilityPack.1.4.0\htmldoc.html");

    foreach(HtmlNode node in htmlDoc.DocumentNode
                                   .SelectNodes("//img[@src and (@width or @height)]"))
    {
        var src = node.Attributes["src"].Value.Split('?');

        var width = node.Attributes["width"].Value.Replace("px", "");

        var height = node.Attributes["height"].Value.Replace("px", "");

        node.SetAttributeValue("src",
                                src[0] +
                                string.Format("?width={0}&height{1}", width, height));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:12:43.513

如果您使用的 XPath 仅选择具有 src 和宽度或高度的节点，则可以省略 if：

```
foreach (HtmlNode node in doc.DocumentNode
    .SelectNodes("//img[@src and (@width or @height)]"))
{
    node.SetAttributeValue("src",  ...);
} 
```

但要小心：SelectNodes 返回 null，如果没有匹配项 - 据我记得 HtmlAgilityPack。

# c# - 带单引号的邮件地址

> ID：11402954
> 
> 赞同：0
> 
> 时间：2012-07-09T20:53:33.083
> 
> 标签：c#, email-validation

> **可能重复：**
> [电子邮件地址中允许使用哪些字符？](https://stackoverflow.com/questions/2049502/what-characters-are-allowed-in-email-address)

在 C# 中，我不知道为什么 MailAddress 接受带有单引号的电子邮件地址，例如`'a''a'@gmail.com`... , 稍后会收到一封失败的电子邮件...即使在注册期间，它也不允许使用单引号的新电子邮件`'`...您知道带有单引号的有效电子邮件地址吗？它是有效的格式吗？

对不起，我的意思是单引号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:10:36.323

我建议你为什么不在发送电子邮件之前验证你的电子邮件

这样您将立即获得反馈什么是有效的电子邮件

不是最理想的方法，但是您可以像这样使用 MailAddress 类

```
MailAddress mailAddress = null;

    try
    {
       mailAddress = new MailAddress("a'@gmail.com");//email address with single quote in it
    }
    catch(Exception exception)
    {
      //If emailAdress is not correct then warn user
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:54:04.700

根据[RFC 2822](http://www.ietf.org/rfc/rfc2822.txt)第 3.2.4 节，电子邮件地址中允许使用单引号（请参阅 atext 的定义方式）：

```
atext           =       ALPHA / DIGIT / ; Any character except controls,
                        "!" / "#" /     ;  SP, and specials.
                        "$" / "%" /     ;  Used for atoms
                        "&" / "'" /
                        "*" / "+" /
                        "-" / "/" /
                        "=" / "?" /
                        "^" / "_" /
                        "`" / "{" /
                        "|" / "}" /
                        "~" 
```

您可能还想根据我们的[免费电子邮件验证服务](http://cobisi.com/email-validation/validate-address)快速检查您的可疑电子邮件地址，该服务严格遵循上述 RFC（以及其他）并基于我们的 Microsoft .NET[电子邮件验证组件](http://cobisi.com/email-validation/.net-component)。

# xml - 防止不必要的命名空间进入 xml

> ID：11402956
> 
> 赞同：1
> 
> 时间：2012-07-09T20:53:42.873
> 
> 标签：xml, linq-to-xml, kml, vb.net-2010, google-earth

我正在研究一个通过在 kml 中的特定位置添加 gps 坐标来修改 kml 文件的项目。但是，我的代码在最后保存时在**所有**元素上添加了“gx”命名空间。我研究并查看了大量不同的 Visual Basic XML 编写方法，但我已经没有想法了。如何停止添加不必要的命名空间？！

测试.kml：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.opengis.net/kml/2.2">
  <Document>
    <name>test.kml</name>
    <Snippet>File Created Mon Jul 9 15:50:16 2012</Snippet>
    <Style id="multiTrack_n">
      <IconStyle>
        <Icon>
          <href>http://maps.google.com/mapfiles/kml/shapes/track.png</href>
        </Icon>
      </IconStyle>
      <LineStyle>
        <color>99ffac59</color>
        <width>6</width>
      </LineStyle>
    </Style>
    <Folder>
      <Placemark>
        <name>test.kml</name>
        <styleUrl>#multiTrack_n</styleUrl>
        <gx:Track>
          <!--GPS Tracking data Points-->
        </gx:Track>
      </Placemark>
    </Folder>
  </Document>
</kml> 
```

代码：

```
Imports System.IO
Imports System.Xml
Imports System.DateTime
Imports <xmlns="http://www.opengis.net/kml/2.2">
Imports <xmlns:gx="http://www.opengis.net/kml/2.2">
...
Public Sub addCoordinate(ByVal lon As Double, ByVal lat As Double, ByVal att As Double, ByVal timeStamp As String)
        Dim currentDoc = XDocument.Load("test.kml")
        Try
            whenElement = _
                <when><%= timeStamp %></when>
            coordElement = _
                <gx:coord><%= lon.ToString %>,<%= lat.ToString %>,<%= att.ToString %></gx:coord>
            Dim testLocation = currentDoc.<kml>.<Document>.<Folder>.<Placemark>.Elements.Last()
            testLocation.Add(whenElement)
            testlocation.Add(coordElement)
            currentDoc.Save("test.kml")
        Catch ex As Exception
            Console.WriteLine(ex)
        End Try
    End Sub 
```

代码后：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<gx:kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.opengis.net/kml/2.2">
  <gx:Document>
    <gx:name>test.kml</gx:name>
    <gx:Snippet>File Created Mon Jul 9 16:40:11 2012</gx:Snippet>
    <gx:Style id="multiTrack_n">
      <gx:IconStyle>
        <gx:Icon>
          <gx:href>http://maps.google.com/mapfiles/kml/shapes/track.png</gx:href>
        </gx:Icon>
      </gx:IconStyle>
      <gx:LineStyle>
        <gx:color>99ffac59</gx:color>
        <gx:width>6</gx:width>
      </gx:LineStyle>
    </gx:Style>
    <gx:Folder>
      <gx:name>test.kml</gx:name>
      <gx:Placemark>
        <gx:name>test</gx:name>
        <gx:styleUrl>#multiTrack_n</gx:styleUrl>
        <gx:Track>
          <!--GPS Tracking data Points-->
          <when xmlns="http://www.opengis.net/kml/2.2">2012-07-09T08:40:29Z</when>
          <gx:coord xmlns:gx="http://www.opengis.net/kml/2.2">0,0,0</gx:coord>
          <when xmlns="http://www.opengis.net/kml/2.2">2012-07-09T08:40:33Z</when>
          <gx:coord xmlns:gx="http://www.opengis.net/kml/2.2">0,0,0</gx:coord>
          <when xmlns="http://www.opengis.net/kml/2.2">2012-07-09T08:40:41Z</when>
          <gx:coord xmlns:gx="http://www.opengis.net/kml/2.2">0,0,0</gx:coord>
        </gx:Track>
      </gx:Placemark>
    </gx:Folder>
  </gx:Document>
</gx:kml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:53:13.290

在意识到评论中所说的之后，我意识到如果我在 XML 中有默认 NS 作为[http://www.opengis.net/kml/2.2](http://www.opengis.net/kml/2.2)，则假定每个元素都有它，所以当我重新保存时，它应用命名空间。

如此小而简单的东西......傻我......每天都学习一些东西

# python - Python：产生列表，它是两个列表的总和，逐项

> ID：11402962
> 
> 赞同：7
> 
> 时间：2012-07-09T20:53:52.763
> 
> 标签：python, list, list-comprehension

假设我有两个列表：

```
a=[1,2,3,4,5]
b=[5,4,3,2,1] 
```

我想创建第三个，它将是两个给定的线性和：

```
c[i]==a[i]+b[i]
c==[6,6,6,6,6] 
```

是否可以使用“for”构造函数？喜欢：

```
c = [aa+bb for aa in a for bb in b] 
```

（这显然不是我想要的）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-09T20:55:44.733

使用`zip()`：

```
>>> a = [1,2,3,4,5]
>>> b = [5,4,3,2,1]
>>> c = [x+y for x,y in zip(a, b)]
>>> c
[6, 6, 6, 6, 6] 
```

**或者：**

```
>>> c = [a[i] + b[i] for i in range(len(a))]
>>> c
[6, 6, 6, 6, 6] 
```

`c = [aa+bb for aa in a for bb in b]`是这样的：

```
 for aa in a:
     for bb in b:
           aa+bb 
```

这意味着，选择`1`from`a`然后循环遍历`b`while 将它们添加到的所有元素`1`，然后选择`2`from`a`然后再次循环遍历`b`while 将它们添加到的所有值`2`，这就是您没有得到预期输出的原因。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T21:09:05.143

```
a=[1,2,3,4,5]
b=[5,4,3,2,1]

[x+y for x,y in zip(a,b)]
[6, 6, 6, 6, 6]

OR

map(lambda x,y:x+y, a, b)
[6, 6, 6, 6, 6] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T20:56:36.837

```
[ay + be for ay, be in zip(a, b)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T20:56:27.433

```
 sums =   [a[i]+b[i] for i in range(len(a))] 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-09T20:55:59.383

我不知道你想做什么，但你可以很容易地用 numpy 做你所要求的。我只是不确定您是否真的想在代码中添加额外的依赖项。

# r - 基于另一列创建新的数据框列

> ID：11402968
> 
> 赞同：0
> 
> 时间：2012-07-09T20:54:18.803
> 
> 标签：r

我有一个包含两列的数据框，并且想要创建第三列，该列本质上是一个布尔值，用于判断第二列是否包含一组特定的指定值。

```
f <- data.frame(name=c("John", "Sara", "David", "Chad"),
                 car=c("Honda|Ford", "BMW", "Toyota|Chevy|Ford", 
                 "Toyota|Chevy|Ford|Honda")) 
```

我做的第一件事是删除 | 从第二列中的每个字符串，并将这些值放在第三列中

```
library(stringr)
g = str_replace_all(f$car, "[^[:alnum:]]", " ")
f$make = c(g)
f 
```

如果创建另一个列，我现在想要做什么，这将是一个布尔值，如果 make 包含一辆普通汽车，则为 1，如果它包含一辆不常见的汽车，则为 0。

```
common = c("Honda", "Ford", "Toyota", "Chevy")
not_common = c("BMW", "Lexus", "Acura") 
```

我尝试了一些东西，包括 stringr 包和 ifelse 以产生以下输出。

```
 name                     car                    make       common   
1  John              Honda|Ford              Honda Ford           1
2  Sara                     BMW                     BMW           0
3 David       Toyota|Chevy|Ford       Toyota Chevy Ford           1
4  Chad Toyota|Chevy|Ford|Honda Toyota Chevy Ford Honda           1 
```

由于可以将普通和不常见的汽车作为条目，因此不常见的 make 应该覆盖 common 并且该行应该在 common 列中取值 0。因此，如果一个条目同时包含 BMW 和 Ford，则该条目应在公共列中取 0。

任何人都可以帮助完成这项任务。

哦，这就是我尝试使用 stringr 包的方法，但它不起作用。

```
common = c("Honda", "Ford", "Toyota", "Chevy")
not_common = c("BMW", "Lexus", "Acura")
common_match <- str_c(common)
not_match <- str_c(not_common)

main <- function(df) {
  f$new_make <- str_detect(f$make, common_match)
  df
}

main(f) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:07:39.763

不确定这是否是最有效的方法，但请尝试使用`grep`并`ifelse`应用于`f$car`. 这些`|`字符仅`or`用于在内部组合搜索词`grep`，与数据中的分隔符无关。

```
f$common <- sapply(f$car,function(x) ifelse(length(grep("BMW|Lexus|Acura",x))>0,0,1)) 
```

结果：

```
> f
   name                     car common
1  John              Honda|Ford      1
2  Sara                     BMW      0
3 David       Toyota|Chevy|Ford      1
4  Chad Toyota|Chevy|Ford|Honda      1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:16:03.653

另一种方法和比较

```
f2 <- f[rep(1:4,50000),]
system.time({
v <- sapply(f2$make, strsplit, " ")
sapply(v, function(x) max(1-not_common %in% x)*max(common %in% x))
})
 user  system elapsed 
 7.94    0.01    8.00 

system.time(sapply(f2$car,function(x) ifelse(length(grep("BMW|Lexus|Acura",x))>0,0,1)))
 user  system elapsed 
28.72    0.04   28.87 
```

# wcf - WCF 身份验证服务代理 - CookieContainer 不可用

> ID：11402970
> 
> 赞同：2
> 
> 时间：2012-07-09T20:54:27.117
> 
> 标签：wcf, authentication, wcf-security

根据 msdn 的建议，我已启用 ASP.Net 身份验证服务。然后，我尝试通过控制台应用程序或 winforms 应用程序使用该服务（通过向我的本地 WCF 服务添加服务引用）。我正在做自定义身份验证和传输安全（所以我正在处理我的`AuthenticationService.Authenticating`事件，`Global.asax`它工作正常）。

身份验证本身工作正常，但通过添加服务引用创建的代理不包含该`CookieContainer`属性。当我尝试将 cookie 令牌传递给需要身份验证的后续服务时，这显然是一个问题。

此外，在以下客户端代码中，`IsLoggedIn()`返回 false，我猜这与不存在 cookie 容器有关。

```
ServiceReference1.AuthenticationServiceClient client = 
                  new ServiceReference1.AuthenticationServiceClient();
bool isLoggedIn = client.Login("test", "test", "", true); //returns TRUE
bool check = client.IsLoggedIn(); //returns FALSE 
```

这是我在服务上的 web.config：

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>
  <system.web.extensions>
    <scripting>
      <webServices>
        <authenticationService enabled="true"
           requireSSL = "false"/>
      </webServices>
    </scripting>
  </system.web.extensions>
  <system.serviceModel>
    <services>
      <service name="System.Web.ApplicationServices.AuthenticationService"
          behaviorConfiguration="AuthenticationServiceTypeBehaviors">
        <endpoint contract="System.Web.ApplicationServices.AuthenticationService"
          binding="basicHttpBinding"
          bindingConfiguration="userHttps"
          bindingNamespace="http://asp.net/ApplicationServices/v200"/>
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="userHttps" allowCookies="true">
          <!--<security mode="Transport" />-->
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="AuthenticationServiceTypeBehaviors">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  </system.serviceModel>
</configuration> 
```

编辑：我应该添加的其他内容，我做了一个调用该`Login`方法的服务的 Fiddler 会话，并且正在设置 cookie 并将其发送回客户端。但是没有 CookieContainer 我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:41:46.143

> 启用此选项后，客户端将确保从给定 Web 服务接收到的所有 cookie 都以透明方式存储并在每个后续请求中正确发送。但有一个问题：cookie 仅在与一个 Web 服务的对话中处理。如果您需要将相同的 cookie 发送到不同的 Web 服务怎么办？

如果您需要将相同的 cookie 发送到多个服务，请阅读这篇文章： http: [//megakemp.wordpress.com/2009/02/06/managing-shared-cookies-in-wcf/](http://megakemp.wordpress.com/2009/02/06/managing-shared-cookies-in-wcf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:18:11.953

您需要配置绑定以允许 cookie。

```
<system.ServiceModel>
     <bindings>
            <basicHttpBinding allowCookies="true">
     </bindings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:44:24.157

显然，当向客户端上的 WCF 服务添加服务引用 (.Net 3.5+) 时，代理类派生自`System.ServiceModel.ClientBase`. 此类没有 CookieContainer 属性（因为 ClientBase 支持没有 cookie 概念的非 HTTP 协议）。

[http://netpl.blogspot.com/2011/11/managing-cookies-in-wcf-client.html](http://netpl.blogspot.com/2011/11/managing-cookies-in-wcf-client.html)

我可以改为添加一个 Web 引用，它将使用 .Net 2.0 代理类（并且具有`CookieContainer`公开的属性）[http://msdn.microsoft.com/en-us/library/bb628649.aspx](http://msdn.microsoft.com/en-us/library/bb628649.aspx)。但我很可能会完全重新审视我的方法，并使用自定义标头和服务行为来实现我的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T07:20:01.757

另一种选择是访问底层通道的 cookie 容器，如下所示：

```
var cookieManager = client.InnerChannel.GetProperty<IHttpCookieContainerManager>();
cookieManager.CookieContainer.Add(new Cookie(....)); 
```

要使上述管理器出现，您需要将 AllowCookies 设置为 true，例如：

```
<system.ServiceModel>
    <bindings>
        <basicHttpBinding allowCookies="true">
    </bindings> 
```

# javascript - 将参数传递给主干视图

> ID：11402973
> 
> 赞同：5
> 
> 时间：2012-07-09T20:54:45.263
> 
> 标签：javascript, collections, backbone.js, views

刚开始使用 Backbone。我有一个通用视图，可以将集合呈现为带有标题的列表。我目前正在将集合和标题传递给渲染方法，但这似乎有点奇怪。还有其他更规范的方法吗？

例如：

```
var ListView = Backbone.View.extend({
    template: _.template([
        "<div>",
        "<% if (title) { %><h2><%= title %></h2> <% } %>",
        "<% if (items.length > 0) { %>",
        "<ul>",
            "<% items.each(function(item) { %>",
            "<%= itemTemplate(item) %>",
            "<% }); %>",
        "</ul>",
        "<% } else { %><p>None.</p><% } %>",
        "</div>"
    ].join('')),

    itemTemplate: _.template(
        "<li><%= attributes.name %> (<%= id %>)</li>"
    ),

    render: function(items, title) {
        var html = this.template({
            items: items /* a collection */,
            title : title || '',
            itemTemplate: this.itemTemplate
        });

        $(this.el).append(html);
    }
});

var myView = new ListView({ el: $('#target') });
myView.render(myThings, 'My Things');
myView.render(otherThings, 'Other Things'); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T21:00:16.230

您应该在`initialize()`函数中传递属性：

```
initialize: function (attrs) {
    this.options = attrs;
} 
```

因此，在这里您可以将属性作为对象传递，如下所示：

```
new MyView({
  some: "something",
  that: "something else"
}) 
```

现在，在 this.options 中，您可以在整个实例中访问传入的值

```
console.log(this.options.some) # "something"
console.log(this.options.that) # "something else" 
```

要传入一个集合，我建议制作一个父视图和一个子视图：

```
var View;
var Subview;

View = Backbone.View.extend({
    initialize: function() {
        try {
            if (!(this.collection instanceof Backbone.Collection)) {
                throw new typeError("this.collection not instanceof Backbone.Collection")
            }
            this.subViews = [];
            this.collection.forEach(function (model) {
                this.subViews.push(new SubView({model: model}));
            });
        } catch (e) {
            console.error(e)
        }
    },
    render: function() {
        this.subViews.forEach(function (view) {
            this.$el.append(view.render().$el);
        }, this);
        return this;
    }
});

SubView = Backbone.View.extend({
    initialize: function () {
        try {
            if (!(this.model instanceof Backbone.model)) {
                throw new typeError("this.collection not instanceof Backbone.Collection")
            }
        } catch (e) {
            console.error(e);
        }
    },
    render: function () {
        return this;
    }
});

testCollection = new MyCollection();
collectionView = new View({collection: testCollection});
$("body").html(collectionView.render().$el); 
```

您应该*始终*处理集合的模型，而不仅仅是集合的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T21:00:07.443

在渲染视图时，您应该有一个**视图****模型**并访问模型的属性。

 **```
var myModel = new Backbone.Model();

myModel.set("myThings", myThings);
myModel.set("myOtherThings", myOtherThings);

var myView = new ListView({ model: myModel }); 
```**

# java - Java 运行时环境 HKEY_LOCAL_MACHINE 错误

> ID：11402976
> 
> 赞同：1
> 
> 时间：2012-07-09T20:54:53.067
> 
> 标签：java, windows, registry, runtime, environment

我试图在我的 Windows XP 机器上摆脱旧版本的 Java（因为我仍然有 1.6，我也有 1.7）。卸载 1.6 后，我收到有关 Java 运行时环境的错误。当我尝试启动 Java 控制面板时，它给了我这个错误：

> 系统找不到指定的注册表项：
> 
> HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java 运行时环境\1.7.0_05

我试图重新安装 Java，但什么也没做。而且我无法完全删除 Java，因为每当我尝试时，它都会给我一个错误，说安装中有错误。再具体一点：

> 安装过程中出现致命错误。

知道如何解决这个问题吗？它使我无法做很多令人沮丧的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T21:19:11.663

**Author's note:** This answer was written to address installations of Java, major versions 6 and 7\. It may or may not work with versions of java that are newer or older, but it probably won't hurt to try. If you follow these instructions for a major version not listed, please comment whether you were successful or not.

* * *

1.  Read all of the directions twice. This solution details a manual uninstall of java by modifying the windows registry. If you do not follow the directions, you can cause permanent damage to your windows installation and will need serious firepower to get it working correctly again. If you do not understand the risks, ask someone for help.

2.  If you have any registry cleaners, get rid of them. This is probably their fault. I've never met one I liked and wouldn't let one touch my registry with a 10 foot read only pole.

3.  If you're using a laptop, connect to a charger. If you have children, make them walk the dog. Find a quiet secluded place and hole yourself up in it with zero distractions for about 15 minutes.

4.  Make a backup of the registry key "\HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft", save it somewhere safe.

5.  Delete exactly the following and only exactly the following registry key and all of its subkeys: "\HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft". After you are done with this step, java is dead. Do not try to run any java programs at this stage, it almost certainly won't work.

6.  Open "C:\Program Files" (and, if you're on a 64 bit machine, "C:\Program Files (x86)"). If you see folders called Java, rename them to "Java_". If you installed java to a nonstandard location, navigate to it and add an underscore to its name.

7.  Download and install the latest version. The installation should complete with no issues. It should also overwrite any leftover chunks of the old installation that are left.

8.  (optional) Uninstall java again. The uninstallation should go smoothly and it should properly dispose of any leftover resources installed by the broken installation. Reinstall when the uninstall is complete. Since you are installing the same version you just removed, this probably isn't necessary.

Final note: I have performed this surgery many times on other people's computers using teamviewer, and it has never gone wrong. In the social circles where I hang out, we call it a javaectomy. For reference, I hang out on IRC and help people with issues with minecraft. We think we have seen every possible java issue. This one is fairly common and caused by some combination of many concurrent java versions, registry cleaners, and interrupted or failed updates. Once you are done and have verified that the reinstallation has gone smoothly and without issues, you can remove your saved registry keys and delete the renamed java folders from "program files" and "program files (x86)" (remember to delete only the ones with an appended underscore, the one called Java was added by the reinstall and should be left as is.

Disaster recovery: In the unlikely event that something goes wrong, restore the renamed java folders and patch the registry keys with your backup to revert to the original (partially broken) state.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T07:31:18.743

我必须祝贺 Wug 在去除旧 Java 残留物方面做出的贡献。我尝试了所有可用的卸载程序（免费）但无济于事。除了警告之外，Wug 建议的所有内容都有效。唯一需要注意的是，在 #6（在 Program Files 中重命名 Java 文件夹）之后，您必须使用 Windows 卸载程序。为什么？因为如果您尝试安装下载的 Java，它会警告您已经安装了 Java。从添加或删除程序（控制面板）运行卸载程序。它会给你一个找不到卸载程序的错误，然后它会从“添加/删除程序”中删除 Java 引用。然后安装下载的 Java 文件，您就摆脱了旧的 Java 引用。

干得好，哇！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-11T13:57:53.910

我在我的机器上更新`Java` 到`1.8`. 我在安装时选择了卸载现有版本，它对注册表项做了一些事情。这个修复对我有用。

> 1.  从您的机器上卸载所有版本的 JDK 和 JRE。
> 2.  重新启动它。
> 3.  安装 1.7 JDK。
> 4.  然后安装你想要的任何JDK。

# php - 行与非回声之间的区别

> ID：11402981
> 
> 赞同：-1
> 
> 时间：2012-07-09T20:55:01.907
> 
> 标签：php, mysql

由于我一直在学习 PHP 和 MySQL，我注意到有时我会看到`echo $row['name']`和`<?php echo $variable ?>`. 它们之间有什么区别？都是一样的，还是这些类型的显示信息之间有什么不同？为什么有些人使用 row 而有些人不使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:58:46.630

当 mysql 结果以数组形式返回时，通常只调用`$row`. 因此，您在变量中拥有所有返回的列，`$row`并将它们引用为`$row['id']`, `$row['title']`, `$row['whatever']`。

`echo $id;`只是在呼应`$id`变量。

两者都只是回显一个变量，只是第一个回显数组中的一个项目，第二个只是一个名为`$id`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T21:00:07.893

$row['name'] 通过键 (name) 访问关联数组 ($row)

$id 只是一个变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T21:00:18.430

`echo "$row['name']"`正在访问数组中的元素

`<?php echo $id ?>`正在（可能）访问一个变量。

这是2个不同的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T20:57:07.053

`$row['name']`索引到数组中，而`$name`只会引用变量“名称”

```
$name = "foo";

$row = array(
    'name' => 'bar'
);

echo $row['name']; //prints bar
echo $name; //prints foo 
```

# vba - VBA 嵌套循环流控制

> ID：11402982
> 
> 赞同：0
> 
> 时间：2012-07-09T20:55:07.070
> 
> 标签：vba, loops, excel, nested

我会简短并坚持我所知道的。这段代码大部分都可以正常工作。唯一的问题是 x 和 z 循环的迭代。这些 to 循环应该设置 Y 循环的范围和 yLABEL。在事情变得疯狂之后，我可以通过一组并提出正确的范围。我知道其中一些与不打破 x 设置 z 然后回到 x 更新范围有关。

它应该工作 z 找到然后 x。它们之间的范围设置为 y。然后下一个 x 但 y 停留然后在 y 和 x 之间响起设置为 y .. 依此类推，有点像一个紧身的楼梯。或计算尺，这取决于我如何设置循环，经过几次迭代后，我最终会遍布整个地方。

我已经做了一些事情，但每次我突破 x 来设置 z 时，X 都会在范围的顶部重新开始。至少这是我认为我所看到的。在示例表中，我已经改变了偏移与循环一起工作的方式，但想法仍然相同。我此时有 goto 语句，我打算在循环工作后尝试找出条件开关。任何帮助方向或建议表示赞赏。

![工作表示例](../Images/afa57a0e54a631e06d5f1e5e2e90d18e.png)

```
Option Explicit

Sub parse()

            Application.DisplayAlerts = False
                'Application.EnableCancelKey = xlDisabled

            Dim strPath As String, strPathused As String
            strPath = "C:\clerk plan2"

            Dim objfso As FileSystemObject, objFolder As Folder, objfile As Object

            Set objfso = CreateObject("Scripting.FileSystemObject")
            Set objFolder = objfso.GetFolder(strPath)

    'Loop through objWorkBooks
For Each objfile In objFolder.Files

        If objfso.GetExtensionName(objfile.Path) = "xlsx" Then

            Dim objWorkbook As Workbook
            Set objWorkbook = Workbooks.Open(objfile.Path)

            ' Set path for move to at end of script
            strPathused = "C:\prodplan\used\" & objWorkbook.Name
            objWorkbook.Worksheets("inbound transfer sheet").Activate
            objWorkbook.Worksheets("inbound transfer sheet").Cells.UnMerge

            'Range management WB
            Dim SRCwb As Worksheet, SRCrange1 As Range, SRCrange2 As Range, lastrow As Range

            Set SRCwb = objWorkbook.Worksheets("inbound transfer sheet")
            Set SRCrange1 = SRCwb.Range("g3:g150")
            Set SRCrange2 = SRCwb.Range("a1:a150")

            Dim DSTws As Worksheet
            Set DSTws = Workbooks("clerkplan2.xlsm").Worksheets("transfer")

            Dim STR1 As String, STR2 As String, xVAL As String, zVAL As String, xSTR As String, zSTR As String

            STR1 = "INBOUND TRANS"
            STR2 = "INBOUND CA TRANS"

            Dim x As Variant, z As Variant, y As Variant, zxRANGE As Range
 For Each z In SRCrange2
        zSTR = Mid(z, 1, 16)
        If zSTR <> STR2 Then GoTo zNEXT
         If zSTR = STR2 Then
            zVAL = z
        End If

For Each x In SRCrange2
        xSTR = Mid(x, 1, 13)
        If xSTR <> STR1 Then GoTo xNEXT
         If xSTR = STR1 Then
            xVAL = x
       End If

           Dim yLABEL As String

        If xVAL = x And zVAL = z Then
         If x.Row > z.Row Then
            Set zxRANGE = SRCwb.Range(x.Offset(1, 0).Address & " : " & z.Offset(-1, 0).Address)
            yLABEL = z.Value
       Else
            Set zxRANGE = SRCwb.Range(z.Offset(-1, 0).Address & " : " & x.Offset(1, 0).Address)
            yLABEL = x.Value
         End If
       End If
                                        MsgBox zxRANGE.Address ' DEBUG
For Each y In zxRANGE

        If y.Offset(0, 6) = "Temp" Or y.Offset(0, 14) = "Begin Time" Or y.Offset(0, 15) = "End Time" Or _
            Len(y.Offset(0, 6)) = 0 Or Len(y.Offset(0, 14)) = 0 Or Len(y.Offset(0, 15)) = "0" Then yNEXT

            Set lastrow = Workbooks("clerkplan2.xlsm").Worksheets("transfer").Range("c" & DSTws.Rows.Count).End(xlUp).Offset(1, 0)
            y.Offset(0, 6).Copy
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=True, Transpose:=False
            DSTws.Activate
            ActiveCell.Offset(0, -1) = objWorkbook.Name
            ActiveCell.Offset(0, -2) = yLABEL

            objWorkbook.Activate
            y.Offset(0, 14).Copy
            Set lastrow = Workbooks("clerkplan2.xlsm").Worksheets("transfer").Range("d" & DSTws.Rows.Count).End(xlUp).Offset(1, 0)
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=True, Transpose:=False

            objWorkbook.Activate
            y.Offset(0, 15).Copy
            Set lastrow = Workbooks("clerkplan2.xlsm").Worksheets("transfer").Range("e" & DSTws.Rows.Count).End(xlUp).Offset(1, 0)
            lastrow.PasteSpecial Paste:=xlPasteValues, operation:=xlNone, skipblanks:=True, Transpose:=False

yNEXT:
    Next y
xNEXT:
    Next x
zNEXT:
    Next z

            strPathused = "C:\clerk plan2\used\" & objWorkbook.Name

            objWorkbook.Close False
                                'Move proccesed file to new Dir

                    Dim OldFilePath As String
                    Dim NewFilePath As String

                OldFilePath = objfile 'original file location
                NewFilePath = strPathused ' new file location
                Name OldFilePath As NewFilePath ' move the file

        End If

    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:13:09.363

当您说：

`For Each z In SRCrange2`和`For Each x In SRCrange2`

这是否有帮助，或者至少让你走上正轨？

```
For Each z In SRCrange2

        zSTR = Mid(z, 1, 16)
        xSTR = Mid(x, 1, 13)

        If zSTR <> STR2 AND xSTR <> STR1 Then GoTo zNEXT

        If zSTR = STR2 Then zVAL = z
        If xSTR = STR1 Then xVAL = x

        ... [rest of code] ...

zNext:
Next z 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:37:44.867

我认为遍历文件不是问题，所以我不打算解决这个问题。如果我要获取您的源数据并将其转换为您的处理数据，我会这样做

```
Sub Parse()

    Dim rRng As Range
    Dim rCell As Range
    Dim bStartGroup As Boolean
    Dim shDest As Worksheet
    Dim sDateCycle As String
    Dim rNext As Range

    Set rRng = Sheet1.Range("A1:A150")
    Set shDest = ThisWorkbook.Sheets.Add

    For Each rCell In rRng.Cells
        'only change sDateCycle when a new group starts
        If StartsGroup(rCell.Value) Then
            sDateCycle = rCell.Value
        Else 'not the start of a group, so process the data
            'don't copy blanks or headers
            If IsData(rCell.Value) Then
                'find the next blank cell
                Set rNext = shDest.Cells(shDest.Rows.Count, 1).End(xlUp).Offset(1, 0)
                'write the date cycle
                rNext.Value = sDateCycle
                'write the workbook name
                rNext.Offset(0, 1).Value = rRng.Parent.Parent.Name
                'write the time in, time out, and smelly
                rCell.Offset(0, 1).Resize(1, 3).Copy rNext.Offset(0, 2).Resize(1, 3)
            End If
        End If
    Next rCell

End Sub

Function StartsGroup(ByVal sValue As String) As Boolean

    'You need to write this funciton to return True when the cell you're on starts a new date cycle
    'I wrote it to check if everything after the last space is a date
    'Your logic may be different (and easier)

    Dim lSpace As Long

    lSpace = InStrRev(sValue, Space(1))

    If lSpace > 0 Then
        StartsGroup = IsDate(Mid(sValue, lSpace + 1, Len(sValue)))
    End If

End Function

Function IsData(ByVal sValue As String) As Boolean

    'You need to write this function to return True when the cell your on should be copied
    'I wrote it to not copy blanks or headers
    'Your logic will likely be different

    IsData = Len(sValue) > 0 And sValue <> "clerks"

End Function 
```

您将进行一些重大更改以将其合并到循环文件的循环中，但它可能会给您一些想法。基本流程是，如果我所在的单元格开始一个组，我将其值存储在 sDateCycle 中。如果它没有启动一个组，那么我确保它是有效数据，如果是，则将其写入 shDest。

请注意，我将 shDest 设置为同一工作簿中的新工作表。您只需要更改 Set shDest = ... 行以指向您要写入的工作表。

我认为将 StartsGroup 和 IsData 放入单独的函数中会使事情变得更简单。但是，您不必将 rCell.Value 传递给这些函数。如果要检查 G 列或多列，则可以传递 rCell （并将函数参数更改为 ByRef rCell as Range 而不是 ByVal sValue As String）。然后在函数中你可以说

```
StartsGroup =  rCell.Value = "This" and rCell.Offset(0,10).Value = "That" 
```

或者你的逻辑是什么。无论您需要在这些函数中做什么，只需根据您所在的单元格来考虑它，因此您只需循环一次。例如，可能向下两行和向右一列的单元格必须是某个值才能识别组的开始。