# StackOverflow 问答 10269000-10269999

# google-chrome - 谷歌浏览器在哪里存储未打包的扩展程序？

> ID：10269002
> 
> 赞同：15
> 
> 时间：2012-04-22T14:56:21.260
> 
> 标签：google-chrome, google-chrome-extension

我刚刚丢失了对 google chrome 插件的所有更改。但是，该插件仍在浏览器中运行。

谷歌浏览器在哪里存储解压扩展的缓存副本？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-22T15:56:39.493

我能够找到运气：

非 Windows 7：

```
C:\Documents and Settings\<username>\Local Settings\Application Data\Google\Chrome\User Data\<profile>\Extensions 
```

-或者-

Windows 7的：

```
C:\Users\<username>\AppData\Local\Google\Chrome\User Data\<profile>\Extensions 
```

**编辑**：您可以转到“chrome://version/”（如 url），它会显示您的“个人资料路径”。在那里，您可以找到您要查找的“扩展”文件夹。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-16T22:21:40.343

事实证明，未打包的扩展保留在其原始位置。只有打包的扩展被提取到 Alex.Piechowski 提到的地方。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-04T13:33:25.770

在 Linux (OpenSuse 12.3) 上，我设法在这里找到了所有已安装的扩展：

```
~/.config/google-chrome/Default/Extensions/ 
```

如果您只想复制特定的扩展名，请首先记下扩展名 ID，这一点很重要。为此，`chrome://extensions/`在浏览器中打开，复制感兴趣的扩展的 id，并在上面给出的扩展目录下找到它的目录。

能够在本地保存这样的扩展副本帮助我继续使用（甚至修改/破解）最终被其所有者或谷歌从 Chrome 商店中删除的扩展。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-17T15:30:56.253

所以我正在调试我在 Mac OS X 上构建的扩展，但在任何标准位置都找不到 SQLite 数据库。它不会将数据库存储在扩展文件所在的路径中。

这是我在运行解压缩扩展时找到我的数据库的地方：

```
~/Library/Application Support/Google/Chrome/Default/databases/http_foobar.com_0/XX 
```

-埃里克

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-15T13:10:19.513

用户配置文件存储在[用户数据目录](https://chromium.googlesource.com/chromium/src/+/master/docs/user_data_dir.md)中，它因操作系统而异。

最简单的方法是导航到*配置文件路径*字段`chrome://version`并查找。

 *> 示例（Windows）：
> 
> *   [配置文件路径] C:\Users\Alice\AppData\Local\Google\Chrome\User Data\Default
> *   [用户数据目录] C:\Users\Alice\AppData\Local\Google\Chrome\User Data

然后扩展位于`Extensions/`文件夹下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-30T20:57:47.733

在窗口中：

路径：C:\Users\yourusername\AppData\Local\Google\Chrome\User Data\Profile 1\Extensions（在这里，您将无法按名称查看扩展名，但会按 ID 显示扩展名。您可以获得的扩展名 ID从chrome→扩展→开发者模式）

或者

路径：C:\Documents and Settings\yourusername\Local Settings\Application Data\Google\Chrome\User Data\Default\Extensions

或者

下载扩展源定位器。给你的用户名。它将列出所有带有路径详细信息的扩展名。*

# jquery - jQuery ajax/后响应编码

> ID：10269003
> 
> 赞同：4
> 
> 时间：2012-04-22T14:56:38.467
> 
> 标签：jquery, encoding, json

我对通过 ajax 加载的 json 编码信息有疑问。

PHP代码（test.php）：

```
<?php
  $val1 = 'Productmanager m / f';
  $val2 = 'test';
  $arr = array('first' => $val1, 'second' => $val2);
  echo json_encode($arr);
?> 
```

html 文件中的 JavaScript 代码：

```
$(document).ready(function() {
  $.post("test.php", function(data){
    var response = $.parseJSON(data);
    console.log(response.first);
    console.log(response.second);
  }
}); 
```

控制台中的结果如下所示：

```
Productmanager&#x20;m&#x20;&#x2f;&#x20;f 
```

和

```
test 
```

这两个文件都是 UTF-8 编码的。

我真的不知道为什么以及如何将其转换回可读字符串。您可能知道这是怎么发生的？

一开始我没有找到合适的解决方案，只是搜索和替换方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:14:59.160

添加正确的 PHP 标头并解码字符串：

```
<?php
  header("Content-type: application/json");
  $val1 = "Productmanager m / f";
  $val2 = "test";
  $arr = array("first" => $val1, "second" => $val2);
  echo json_encode($arr);
?>

<script>

    $(document).ready(function() {
      $.post("test.php", function(data){
        var response = $.parseJSON(data);
        console.log(htmlDecode(response.first));
        console.log(response.second);
      }
    });

function htmlEncode(value){
  return $('<div/>').text(value).html();
}

function htmlDecode(value){
  return $('<div/>').html(value).text();
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:04:30.247

你能试试这个吗？

```
$(document).ready(function() {
    $.ajax({
        type: "POST",
        url: "test.php",
        contentType: "application/x-www-form-urlencoded;charset=UTF-8",
        dataType: 'json',
        success: function(data) {
            var response = $.parseJSON(data);
                console.log(response.first);
                console.log(response.second);
        }
    });
}); 
```

您可以使用“contentType”为 ajax 请求设置字符编码

在您的 php 方面，您的代码必须是这样的；

```
<?php
  $val1 = 'Productmanager m / f';
  $val2 = 'test';
  $arr = array('first' => $val1, 'second' => $val2);
  echo json_encode($arr, JSON_UNESCAPED_UNICODE);
?> 
```

重要提示：JSON_UNESCAPED_UNICODE 适用于 php 5.4.0！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:10:33.333

你可以试试这个`test.php`

```
<?php
  $val1 = 'Productmanager m / f';
  $val2 = 'test';
  $arr = array('first' => $val1, 'second' => $val2);
  echo json_encode($arr, JSON_UNESCAPED_UNICODE);
?> 
```

# c# - 主窗体中的新窗体

> ID：10269009
> 
> 赞同：0
> 
> 时间：2012-04-22T14:58:17.873
> 
> 标签：c#, winforms, call

在 C# 表单中，我需要代码来将第二个表单添加到我现有的表单中。这是我尝试过的：

第一种形式：

```
public partial class frmMain : Form
{
    public frmMain()
    {
        InitializeComponent();
    }
    private void frmMain_Load(object sender, EventArgs e)
    {
        frmMain fM = new frmMain();
        fM.KeyPress += new KeyPressEventHandler(MMForm);

    }
    private void MMForm(object sender, KeyPressEventArgs e)
    {
        Keys KP; KP = (Keys)sender;
        if (KP == Keys.Escape) { frm2 fM2 = new frm2(); fM2.Show(); }

    }
} 
```

这是第二种形式：

```
public class frm2 : Form
{
    public frm2()
    {
        frm2 fM2 = new frm2();
        fM2.Height = 200; fM2.Width = 200;
        Controls.AddRange(new System.Windows.Forms.Form[] { fM2 });
    }

} 
```

我错过了什么？

编辑：暂时忘记这一切。即使我按照那里的建议进行操作，当我按下键时也会出现错误。

```
An unhandled exception of type 'System.InvalidCastException' occurred in Project 09.exe
Additional information: Specified cast is not valid. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:02:14.477

```
private void frmMain_Load(object sender, EventArgs e)
{
    frmMain fM = new frmMain();
    fM.KeyPress += new KeyPressEventHandler(MMForm);

} 
```

替换为：

```
private void frmMain_Load(object sender, EventArgs e)
{
    this.KeyPress += new KeyPressEventHandler(MMForm);
} 
```

或者您可以通过设计器直接注册到您自己的 KeyPress 到 MMForm ...

而且，目前还不清楚您要在这里做什么：

```
public frm2()
{
    frm2 fM2 = new frm2();
    fM2.Height = 200; fM2.Width = 200;
    Controls.AddRange(new System.Windows.Forms.Form[] { fM2 });
} 
```

它应该看起来更像这样：

```
public frm2()
{
    InitializeComponents();
    this.Height = 200;
    this.Width = 200;
} 
```

即使您不想初始化组件，您也应该编辑您自己的 (this) 属性，而不是新的 frm2 属性。当您创建一个新的 frmMain 并订阅它的 KeyPress 时，您在 frmMain_Load 中遇到了同样的问题，而实际上您应该订阅自己的 KeyPress。

此外，您可以缩短 MMForm 来美化，如下所示：

```
private void MMForm(object sender, KeyPressEventArgs e)
{
    if ((Keys)sender == Keys.Escape)
    {
        new frm2().Show();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:03:57.237

1.  frm2 不使用 InitializeComponent() 命令。所以将它添加到您的代码中。
2.  其次，您尝试将 frm2 对象添加到自身，因此它不起作用。

您应该为现有表单使用代码 belove（如果您不调整表单大小，请从属性中设置其权重。

```
public class frm2 : Form 
{ 
    public frm2() 
    {  
        InitializeComponent(); ,
        this.Width = 200; this.Height = 200; 
    } 
} 
```

如果要显示 frm2 ，则在特殊键之后：

```
frm2 secondFrom = new frm2();
frm2.Show(); // frm2.ShowDialog(); works too but they are working differently. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T15:10:44.397

你可以这样做：

```
public partial class frmMain : Form
{
    public frmMain()
    {
        InitializeComponent();
    }
    private void frmMain_Load(object sender, EventArgs e)
    {
        this.private void MMForm(object sender, KeyPressEventArgs e)
    }
    private void MMForm(object sender, KeyPressEventArgs e)
     {
        if (e.KeyChar == Convert.ToChar(((int)Keys.Escape)))
        {
            frm2 fM2 = new frm2(); fm2.Height=200; fm2.Width=200; fM2.Show(); 
        }
}

public class frm2 : Form 
{ 
    public frm2() 
    {  
        InitializeComponent();
    } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T15:14:45.187

如果您在主窗体上按下转义键时尝试打开 frm2，请执行以下操作：

```
public frmMain()
    {
        InitializeComponent();
        this.KeyPress += new KeyPressEventHandler(MMForm);
    }
//You don't need to put anything in form load
    private void frmMain_Load(object sender, EventArgs e)
    {
    }

//This is fine
    private void MMForm(object sender, KeyPressEventArgs e)
    {
        Keys KP; KP = (Keys)sender;
        if (KP == Keys.Escape) { frm2 fM2 = new frm2(); fM2.Show(); }
    } 
```

在 frm2 做：

```
public class frm2 : Form
{
    public frm2()
    {
        InitializeComponent();
        this.Height = 200; this.Width = 200;
        Controls.AddRange(new System.Windows.Forms.Form[] { fM2 });
    }

} 
```

# facebook - 我可以使用自己的 FB 应用产生广告收入吗？

> ID：10269010
> 
> 赞同：0
> 
> 时间：2012-04-22T14:58:18.780
> 
> 标签：facebook, ads

我想问一下，如果我在 FB 中创建应用程序，我可以产生来自我而不是 FB 的广告收入吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:01:24.570

是的，只要您使用以下公司之一：[https ://developers.facebook.com/adproviders/](https://developers.facebook.com/adproviders/)

# c++ - 全局范围与全局命名空间

> ID：10269012
> 
> 赞同：67
> 
> 时间：2012-04-22T14:58:31.560
> 
> 标签：c++, namespaces, scope, terminology

我看到了这两个短语的用法：全局作用域和全局命名空间。它们之间有什么区别？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-22T15:04:04.087

在 C++ 中，每个名称都有其不存在的范围。范围可以通过多种方式定义：它可以通过*命名空间*、*函数*、 *类*和*{}*来定义。

所以一个命名空间，无论是全局的还是其他的，都定义了一个范围。全局命名空间指的是 using `::`，并且在这个命名空间中定义的符号被称为具有全局范围。默认情况下，符号存在于全局命名空间中，除非它是在以关键字开头的块内定义的`namespace`，或者它是类的成员，或者是函数的局部变量：

```
int a; //this a is defined in global namespace
       //which means, its scope is global. It exists everywhere.

namespace N
{
     int a;  //it is defined in a non-global namespace called `N`
             //outside N it doesn't exist.
}
void f()
{
   int a;  //its scope is the function itself.
           //outside the function, a doesn't exist.
   {
        int a; //the curly braces defines this a's scope!
   }
}
class A
{
   int a;  //its scope is the class itself.
           //outside A, it doesn't exist.
}; 
```

另请注意，*名称*可以被命名空间、函数或类定义的内部范围隐藏。因此`a`命名空间内的名称`N`隐藏`a`了全局命名空间中的名称。同理，函数和类中的名称隐藏了全局命名空间中的名称。如果您遇到这种情况，那么您可以使用`::a`来引用全局命名空间中定义的名称：

```
int a = 10;

namespace N
{
    int a = 100;

    void f()
    {
         int a = 1000;
         std::cout << a << std::endl;      //prints 1000
         std::cout << N::a << std::endl;   //prints 100 
         std::cout << ::a << std::endl;    //prints 10
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T15:09:56.797

例如，当您声明一个全局变量`int i`时，我们说`i is in the global namespace`and `has the global namespace scope`。就这样。

*摘自 C++03：*

```
3.3.5 Namespace scope   

    The outermost declarative region of a translation unit is also a namespace, called
  the global namespace. A name declared in the global namespace has global namespace
  scope (also called global scope). 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-22T15:11:34.193

“作用域”是比“命名空间”更笼统的术语。每个命名空间、类和代码块都定义了一个作用域，其中声明的名称可以在其中使用；命名空间是在类和函数之外声明的名称的容器。

“全局范围”和“全局命名空间”可以或多或少互换使用；在命名空间中声明的名称的范围涵盖整个命名空间。如果您具体指的是命名空间，请使用“命名空间”，如果您指的是其中名称的可见性，请使用“范围”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-22T16:47:36.460

范围表示对象的生命周期，您可以拥有一个只要程序执行就存在的全局变量，或者您可以拥有一个具有块范围的变量，只要该代码块执行就存在。考虑这个例子：

```
#include <iostream>

int a = 100;

main () {
    int a = 200;

    std::cout << "local a is: " << a << std::endl;
    std::cout << "global a is: " << ::a << std::endl;

    return 0;
} 
```

当执行该语句时，将打印`local a is: 200`，这显然是意料之中的，因为我们正在重新定义哪个叶子`a`在`main`它的封闭块的范围内。我们还打印了 global `::a`，它再次打印了预期值 100，因为我们已经请求了 global namespace `::`。

命名空间语义大多是合乎逻辑的，它是一种将符号彼此隔离的方式，希望避免名称冲突，它不会影响对象的生命周期。

另一方面，范围表示对象的生命周期，全局`a`在局部之前出现，`a`因为它的构造比 main 执行要早得多。但是，作用域也会在符号上*强制*使用名称空间，但与 a 的方式不同`namespace`。有不同种类的范围，`global`, `class`, `function`, `block`,`file`等等...

令人困惑的部分是作用域有时被重载以表示特定符号的可见性，这是​​从 C 中借来的东西，其中不存在命名空间的概念，而作用域被用来表示寿命和可见性。然而，在 C++ 中，规则发生了一些变化，但术语*作用域*仍然以相同的方式使用，因为这两种语言有很多概念。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-03T22:01:35.367

@Dmitriy Ryajov

这个话题有点老了，但我想就此提供帮助。我认为你不应该让事情变得比实际情况更复杂。`Scope`标识符的名称是计算机程序的一部分，其中标识符（指代程序中某个实体的名称）可用于查找所引用的实体。因此，术语范围仅适用于标识符，我们不应将其与对象的生命周期混为一谈。它们有些联系，但不应混淆。对象的生命周期由我们为该对象分配内存的位置表示。因此，例如，如果在堆栈上分配了内存，它将在函数完成后立即释放。所以这取决于我们存储对象的位置，这表示它的生命周期。范围仅说：“这是一个对象的名称，我们可以在此之前为该对象使用此名称”。所以，正如我所说，这个词`scope`仅用于对象的标识符，生命周期是其他东西，由我们存储对象的位置表示。

另外，我想说一些`linkage`与此密切相关的事情。这有时也可能令人困惑。假设我们有一些标识符`translation unit`引用一些对象。翻译单元中的相同标识符是否`other`将引用相同的实体由链接表示。因此，例如，如果标识符具有外部链接，我们可以通过使用关键字声明它来引用该标识符所引用的实体，但来自其他翻译单元`extern`。现在，假设我们不想在其他翻译单元中使用该实体。然后，实体将`exist`直到程序完成，但是当我们不声明它时，我们将无法引用它。另请注意，现在我混合了链接和生命周期这两个术语。但这是因为只有`global`实体具有外部联系。不能从程序的其他部分引用函数内部的标识符。

结论：总是尽量保持简单。我很惊讶不同的人如何以不同的方式谈论这些术语。单独编译的整个过程是混乱的，因为有多个术语几乎具有相同的含义，可能每个人都会卡在这一点上。

# java - javafx 动画：显示圆圈

> ID：10269017
> 
> 赞同：0
> 
> 时间：2012-04-22T14:59:41.777
> 
> 标签：java, javafx

我想显示 5 个随机定位和彩色的圆圈。这很容易。现在我想将此代码调整为动画。此应用程序应无休止地生成随机圆圈，但条件是它应仅在屏幕上保留最后五个圆圈。这就是我卡住的地方。JavaFx 提供 ListChangeListener。我认为这是我应该使用的。但是怎么做？以下是我未完成的代码：

```
import java.util.Random;

import javafx.application.Application;
import javafx.collections.ListChangeListener;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.paint.Color;
import javafx.scene.shape.Circle;
import javafx.stage.Stage;

public class RandomColorTest extends Application {

    int radius = 20;
    int sceneWidth = 300;
    int sceneHeight = 300;

    private void init(Stage primaryStage) {
        Group root = new Group();
        primaryStage.setResizable(false);
        primaryStage.setScene(new Scene(root, sceneWidth,sceneHeight));

        for (int i = root.getChildren().size(); i < 5; i++) {
            root.getChildren().add(createCircle());
            // the following should convey the idea:
            // if the collection holds 5 elements then keep least recently generated element for 1 second and then delete it
            // add one new element 
            // if the collection holds 5 elements then keep least recently generated element for 1 second and then delete it
            // add one new element 
            // and so on
            root.getChildren().addListener(new ListChangeListener<E>() {
                @Override
                public void onChanged(
                        javafx.collections.ListChangeListener.Change<? extends E> arg0) {
                    // TODO Auto-generated method stub
                }
            });

        }
    }

    // Create randomly positioned and colored circle
    private Circle createCircle() {
        final Circle circle = new Circle();
        circle.setRadius(radius);

        Random r = new Random();
        int rCol1 = r.nextInt(256);
        int rCol2 = r.nextInt(256);
        int rCol3 = r.nextInt(256);
        int rX = radius+r.nextInt(sceneWidth);
        if (rX>sceneWidth-radius) {
            rX=rX-2*radius;
        }
        int rY = radius+r.nextInt(sceneHeight);
        if (rY>sceneHeight-radius) {
            rY=rY-2*radius;
        }
        circle.setLayoutX(rX);
        circle.setLayoutY(rY);

        circle.setStroke(Color.BLACK);
        circle.setFill(Color.rgb(rCol1,rCol2,rCol3));
        System.out.println(rCol1+"-"+rCol2+"-"+rCol3+"-"+rX+"-"+rY);
        return circle;
    }

    @Override public void start(Stage primaryStage) throws Exception {
        init(primaryStage);
        primaryStage.show();
    }
    public static void main(String[] args) { launch(args); }
} 
```

在设法使 ListChangeListener 编译没有错误之后，它仍然不能按预期的方式工作。对 for 循环所做的更改：

```
for (int i = root.getChildren().size();;i++) {
            final ObservableList<Node> ol = root.getChildren();
            // the following should convey the idea:
            // if the collection holds 5 elements then keep least recently generated element for 1 second and then delete it
            // add one new element 
            // if the collection holds 5 elements then keep least recently generated element for 1 second and then delete it
            // add one new element 
            // and so on
            ol.add(createCircle());
            ol.addListener( new ListChangeListener<Node>(){
                @Override
                public void onChanged(
                    javafx.collections.ListChangeListener.Change<? extends Node> arg0) {
                    // TODO Auto-generated method stub
                    System.out.println("one new element added, size:"+ol.size());
                    if (ol.size()==5) {
                        ol.remove(0);
                    }
                }   
            });
        } 
```

For 循环被定义为无限循环（可能也不是解决此问题的正确方法），我可以从控制台看到在程序运行期间删除和添加了圆圈。唉，我再也看不到GUI了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T22:59:39.483

[去年甲骨文论坛上](https://forums.oracle.com/forums/thread.jspa?threadID=2300836)也有人问过类似的问题。

这是使用 Timeline 的示例解决方案，我更喜欢依赖工作线程的解决方案。虽然两者都可以完成工作，但我发现使用 JavaFX 动画 API 更优雅，更不容易出错。

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.event.*;
import javafx.scene.*;
import javafx.scene.paint.Color;
import javafx.scene.shape.Circle;
import javafx.stage.Stage;
import javafx.util.Duration;

import java.util.Random;

public class FiveAutoCircleExample extends Application {
  private static final Random r = new Random();
  public static final int SCENE_SIZE = 800;

  public static void main(String[] args) throws Exception { launch(args); }
  public void start(final Stage stage) throws Exception {
    final Group circles = new Group();
    final Timeline animation = new Timeline(
      new KeyFrame(Duration.seconds(.5), 
      new EventHandler<ActionEvent>() {
        @Override public void handle(ActionEvent actionEvent) {
          while (circles.getChildren().size() >= 5) circles.getChildren().remove(0);
          int radius = 10 * r.nextInt(20);
          circles.getChildren().add(
            new Circle(
              r.nextInt(SCENE_SIZE - radius * 2) + radius, r.nextInt(SCENE_SIZE - radius * 2) + radius,
              radius,
              new Color(r.nextDouble(), r.nextDouble(), r.nextDouble(), r.nextDouble())
            )
          );
        }
      })
    );
    animation.setCycleCount(Animation.INDEFINITE);
    animation.play();

    // display the scene.
    stage.setScene(new Scene(circles, SCENE_SIZE, SCENE_SIZE, Color.CORNSILK));
    stage.show();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T12:33:35.020

在您的代码中，您有一些错误：

*   未显示 GUI，因为`primaryStage.show();`在`init(primaryStage);`.
*   new`ListChangeListener`在循环中一次又一次地添加。但是，在正常情况下您应该只添加一次。
*   您正在其自己的侦听 器中操纵`ol`( ) 以递归方式触发新的更改事件。`ol.remove(0);`

作为解决方案：周期性任务、长时间后台执行可以分离到不同的线程。

```
 @Override
    public void start(Stage primaryStage) throws Exception {
        Group root = new Group();
        primaryStage.setResizable(false);
        primaryStage.setScene(new Scene(root, sceneWidth, sceneHeight));

        final ObservableList<Node> ol = root.getChildren();

        new Thread(new Runnable() {
            @Override public void run() {
                while (true) {
                    try {
                        // Wait for 2 seconds.
                        Thread.sleep(2000);
                    } catch (InterruptedException ex) {
                        ex.printStackTrace();
                    }
                    Platform.runLater(new Runnable() {
                        @Override public void run() {
                            System.out.println("ol size:" + ol.size());
                            if (ol.size() == 5) {
                                ol.remove(0);
                            }
                            ol.add(createCircle());
                        }
                    });
                }
            }
        }).start();
        primaryStage.show();
    } 
```

我只更改了`start(Stage primaryStage)`. 无需添加侦听器。此解决方案非常快速但不优雅。您必须自己管理线程。有关更优雅和现代的方法，请参阅[JavaFX 2.0 中的 Worker Threading](http://fxexperience.com/2011/07/worker-threading-in-javafx-2-0/)。
此外，如果您真的想要一个真正的动画，请查看示例[彩色圆圈应用程序](http://docs.oracle.com/javafx/2.0/get_started/jfxpub-get_started.htm)。

# java - 复制二维数组 - 仍然使用引用？

> ID：10269018
> 
> 赞同：0
> 
> 时间：2012-04-22T14:59:55.820
> 
> 标签：java, multidimensional-array, copying

我的代码中有（恕我直言）一个奇怪的行为。我目前正在为井字游戏实现极小极大算法。在我的“继任者”方法中，我想确定所有可能的动作。这是代码：

```
private ArrayList<TicTacToeState[][]> successor(final TicTacToeState[][] field, TicTacToeState s) {
    ArrayList<TicTacToeState[][]> returnList = new ArrayList<TicTacToeState[][]>();
    for (int i = 0; i < TicTacToeGame.FIELDSIZE; i++) {
        for (int j = 0; j < TicTacToeGame.FIELDSIZE; j++) {
            if (field[i][j] == TicTacToeState.Empty) {
                TicTacToeState[][] currentCopy = new TicTacToeState[TicTacToeGame.FIELDSIZE][TicTacToeGame.FIELDSIZE];
                System.arraycopy(field, 0, currentCopy, 0, field.length);
                currentCopy[i][j] = s; // <- field seems to be referenced?!
                returnList.add(currentCopy);
            }
        }
    }
    return returnList;
} 
```

如您所见，我想获取所有可能的移动并将它们保存到数组列表中。不幸的是，在“currentCopy”中设置值时，“字段”也发生了变化。但是该字段不应该被引用，因为我复制了数组。错误在哪里？我已经尝试在二维数组上使用 clone() 方法 - >同样的问题。

感谢您的任何帮助。

（仅供参考，TicTacToeState 是一个包括“Player1”、“Player2”和“Empty”的枚举）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:04:22.300

Java 使用浅拷贝。也就是说，你得到一个副本，但它不是你想要的。你想要一个深拷贝。尝试手动将每个元素复制到 returnList 中，看看会发生什么。

解决此问题的另一种方法是进行移动，递归，然后取消移动。然后你根本不需要复制数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:07:56.253

您正在使用二维数组，但仅在系统数组副本中复制数组的第一维。我建议不要做所有的复制。也许用别的东西来描述可能的动作。另请注意，您不是复制数组的内容，而是复制数组。

# visual-studio-2010 - C# Windows 窗体。如何使用 button_click 方法？

> ID：10269019
> 
> 赞同：0
> 
> 时间：2012-04-22T15:00:25.850
> 
> 标签：visual-studio-2010

在输入一些数据后，我正在使用 for 循环通过按住按钮继续向数组添加项目，我称之为 btnEnter。就像是

```
 double[] inputarr = new double[10];
            for (int i = 0; i < inputarr.Length; i++)
            {
                inputarr[i] = Double.Parse(txtAmount.Text);

            } 
```

我想跳出循环并通过单击另一个按钮来执行某些操作。button_click() 可以为我完成这项工作吗？喜欢

```
 for (int i = 0; i < inputarr.Length; i++)
            {
                inputarr[i] = Double.Parse(txtAmount.Text);
                if (btnStop_Click() == true)
                {
                    break;
                }
            } 
```

如何使这项工作？谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:17:46.323

如果我理解正确，您想连续提示输入 10 次。你的思维过程有点颠倒。我认为您所需要的只是一个提示对话框。有关示例，请参见[Windows 窗体中的提示对话框。](https://stackoverflow.com/questions/5427020/prompt-dialog-in-windows-forms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-28T02:11:47.027

你可以像这样调用另一个按钮

```
for (int i = 0; i < inputarr.Length; i++)
        {
            inputarr[i] = Double.Parse(txtAmount.Text);
            btnStop_Click(null,null);
                break;
            }
        } 
```

或者你可以使用计时器

```
 int i = 0;Timer t = new Timer();
 button_click(object sender,event e)
  {

        t.Interval = 4000;
        t.Tick += t_Tick;
        t.Start();
  }
  void t_Tick(object sender, EventArgs e)
    {
        if (i <= 9) { inputarr[i] = Double.Parse(txtAmount.Text); }

        else { t.Stop(); Do other staff  }
        i++;
    } 
```

# r - 如何制作一个检查序列中整数的函数

> ID：10269021
> 
> 赞同：0
> 
> 时间：2012-04-22T15:00:55.707
> 
> 标签：r, sequence

> **可能重复：**
> [如何检查向量中的每个元素在 R 中是否为整数？](https://stackoverflow.com/questions/10113933/how-to-check-if-each-element-in-a-vector-is-integer-or-not-in-r)

如何制作一个检查数字是否为整数的函数（例如 -3、2.0、0,3 和 4.0000，但不是 3.3 或 2.001）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:11:29.823

尝试输入 R：

```
?is.integer 
```

你会去这个页面： [R is.integer() page](http://127.0.0.1:28552/library/base/html/integer.html)

底部是我相信您想要的功能：

```
is.wholenumber <-
    function(x, tol = .Machine$double.eps^0.5)  abs(x - round(x)) < tol
is.wholenumber(1) # is TRUE
(x <- seq(1,5, by=0.5) )
is.wholenumber( x ) #-->  TRUE FALSE TRUE ... 
```

# java - getContentPane().add 不起作用？

> ID：10269022
> 
> 赞同：4
> 
> 时间：2012-04-22T15:01:00.030
> 
> 标签：java, swing, keylistener, contentpane

我正在处理我的一项任务，其中一部分需要我在 JFrame 的网格布局中放置一个红色块。之后，用户应该能够通过箭头键更改该红色块的位置。

到目前为止，我已经能够将红色块添加到网格布局中。问题是我无法移动它。

这是我的 Main.java。它在下面的 Panel.java 中调用 JFrame：

```
import java.awt.GridLayout;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Main {

public static void main( String[] args ) {

    Panel p = new Panel();

    p.setSize(870, 780);
    p.setVisible(true);
    p.setResizable(true);
    p.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}//END main

}//END Main 
```

面板.java。这是具有 KeyListener 移动红色块的代码。但它不起作用。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Panel extends JFrame implements Runnable{

static final int    GWIDTH = 200,
                    GHEIGHT = 200;

static final Dimension gameDim = new Dimension(GWIDTH, GHEIGHT);

Icon bg = new ImageIcon( getClass().getResource("empty.jpg") );
Icon red = new ImageIcon( getClass().getResource("actor.jpg") );
Icon blue = new ImageIcon( getClass().getResource("blue.jpg") );

JLabel[] labels = new JLabel[48];

private int redPoint;

//Player navigation
private int i, j;

public Panel() {

    i = 1;
    j = 1;

    setPreferredSize(gameDim);
    setFocusable(true);
    requestFocus();
    setTitle("LabWork 10");
    setLayout(new GridLayout(6, 8, 10, 10));

    redPoint = (i*8)+j;

    for( int i=0 ; i<48 ; i++)
        labels[i] = new JLabel(bg);

    labels[redPoint] = new JLabel(red);

    for( int i=0 ; i<48 ; i++ )
        getContentPane().add(labels[i]);

    addKeyListener(new KeyListener() {

        @Override
        public void keyTyped(KeyEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void keyReleased(KeyEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void keyPressed(KeyEvent e) {

            if( e.getKeyCode() == KeyEvent.VK_LEFT ) {
                j--;
                labels[redPoint] = new JLabel(bg);
                getContentPane().add(labels[redPoint]);
                redPoint = (i*8)+j;
                labels[redPoint] = new JLabel(red);
                getContentPane().add(labels[redPoint]);
            }

            if( e.getKeyCode() == KeyEvent.VK_RIGHT ) {
                j++;
                labels[redPoint] = new JLabel(bg);
                getContentPane().add(labels[redPoint]);
                redPoint = (i*8)+j;
                labels[redPoint] = new JLabel(red);
                getContentPane().add(labels[redPoint]);
            }

            if( e.getKeyCode() == KeyEvent.VK_UP ){
                i--;
                labels[redPoint] = new JLabel(bg);
                getContentPane().add(labels[redPoint]);
                redPoint = (i*8)+j;
                labels[redPoint] = new JLabel(red);
                getContentPane().add(labels[redPoint]);
            }

            if( e.getKeyCode() == KeyEvent.VK_DOWN ){
                i++;
                labels[redPoint] = new JLabel(bg);
                getContentPane().add(labels[redPoint]);
                redPoint = (i*8)+j;
                labels[redPoint] = new JLabel(red);
                getContentPane().add(labels[redPoint]);
            }

        }//end keyPressed

    });//end addKeyListener

}//END panel

@Override
public void run() {

}

} 
```

KeyListener 中的代码无法重新定位红色块的原因是什么？

**编辑1：**

这是使用移动瓷砖的代码。还可以防止越界。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Panel extends JFrame implements Runnable{

static final int    GWIDTH = 200,
                    GHEIGHT = 200;

static final Dimension gameDim = new Dimension(GWIDTH, GHEIGHT);

Icon bg = new ImageIcon( getClass().getResource("empty.jpg") );
Icon red = new ImageIcon( getClass().getResource("actor.jpg") );
Icon blue = new ImageIcon( getClass().getResource("blue.jpg") );

JLabel[] labels = new JLabel[48];

private int redPoint;

//Player navigation
private int i, j;

public Panel() {

    i = 1;
    j = 1;

    setSize(870, 780);
    setVisible(true);
    setResizable(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setPreferredSize(gameDim);
    setFocusable(true);
    requestFocus();
    setTitle("LabWork 10");
    setLayout(new GridLayout(6, 8, 10, 10));
    setFocusable(true);
    requestFocusInWindow();

    redPoint = (i*8)+j;

    for( int i=0 ; i<48 ; i++)
        labels[i] = new JLabel(bg);

    labels[redPoint] = new JLabel(red);

    for( int i=0 ; i<48 ; i++ )
        getContentPane().add(labels[i]);

    addKeyListener(new KeyListener() {

        @Override
        public void keyTyped(KeyEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void keyReleased(KeyEvent e) {
            // TODO Auto-generated method stub

        }

        @Override
         public void keyPressed(KeyEvent e) {

            if (e.getKeyCode() == KeyEvent.VK_LEFT)
               j--;

            if (e.getKeyCode() == KeyEvent.VK_RIGHT)
               j++;

            if (e.getKeyCode() == KeyEvent.VK_UP)
               i--;

            if (e.getKeyCode() == KeyEvent.VK_DOWN)
               i++;

            run();

          //for preventing going out of bounds 
            int oldRedPoint = redPoint;
            int old_i = i;
            int old_j = j;

            redPoint = (i * 8) + j;

            if( redPoint > 47 || redPoint < 0 ) {
                redPoint = oldRedPoint;
                i = old_i;
                j = old_j;
            }

            labels[oldRedPoint].setIcon(bg);
            labels[redPoint].setIcon(red);
         }

    });//end addKeyListener

}//END panel

@Override
public void run() {

    try {

    } catch (Exception e) {
        // TODO: handle exception
    }

}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:08:07.690

您的 KeyListener 问题可能是焦点之一，因为 KeyListeners 仅适用于具有焦点的组件。一种解决方案是通过 setFocusable(...) 方法使您收听的组件具有焦点，然后在渲染后让它 requestFocusInWindow() 。

另一个更优雅的解决方案是使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是 KeyListener，并绑定到适当的 InputMap，即用于`JComponent.WHEN_IN_FOCUSED_WINDOW`. 这样你就不必担心焦点问题了。

在这个网站上有很多关于如何使用 Key Bindings 的很好的例子，你可以搜索，还有一些不是很好的例子，也是我写的。

**编辑**
这不是焦点问题，我得到纠正。进一步分析...

**编辑 2**
我认为您的问题是您不应该这样做时尝试将新的 JLabels 添加到 contentPane 中。相反，您应该在现有 JLabel 中交换 ImageIcon，因为这是您想要发生的事情——要移动的图像，而不是 JLabel。

**编辑 3**
是的，就是这样。你需要简化事情。例如：

```
 @Override
     public void keyPressed(KeyEvent e) {
        int oldRedPoint = redPoint;
        if (e.getKeyCode() == KeyEvent.VK_LEFT) {
           j--;
        }

        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
           j++;
        }

        if (e.getKeyCode() == KeyEvent.VK_UP) {
           i--;
        }

        if (e.getKeyCode() == KeyEvent.VK_DOWN) {
           i++;
        }
        redPoint = (i * 8) + j;
        labels[oldRedPoint].setIcon(bg);
        labels[redPoint].setIcon(red);
     } 
```

尽管我必须声明，我更喜欢 Key Bindings 而不是 key listeners。

**编辑4**
另外，您最好输入代码以防止您的redPoint 低于0 或高于labels.length。

另外，如果您要问类似的问题，感谢您发布相关代码，但请发布不依赖于外部资源（例如图像）的代码。我必须创建自己的图像才能使您的代码正常工作：

```
private Icon createIcon(Color color) {
  BufferedImage img = new BufferedImage(IMG_W, IMG_H,
        BufferedImage.TYPE_INT_ARGB);
  Graphics g = img.getGraphics();
  g.setColor(color);
  g.fillRect(0, 0, IMG_W, IMG_H);
  g.dispose();
  return new ImageIcon(img);
} 
```

# php - 在自定义帖子类型（Wordpress/PHP）中按“周”分隔查询结果

> ID：10269023
> 
> 赞同：3
> 
> 时间：2012-04-22T15:01:08.343
> 
> 标签：php, wordpress, loops

我有一个“事件”的自定义帖子类型，并且我有一个事件日期的自定义元框。添加的所有事件都以 srtotime() UNIX 格式记录到数据库中的所有日期。

当查询事件列表时，我需要按周将它们分开。所以..“4/23 周”然后仅列出该周的事件..然后是“4/30 周”，列出该周的事件。

所有这些都需要动态和逻辑检测每周开始的时间，并将其与数据库中保存的返回事件的日期进行比较，从而将它们分组为“周”。

我希望一切都说得通。我只是在寻找此类功能的资源时遇到了麻烦，而且我不确定所需的逻辑以及 WP 可能已经拥有我可以使用的东西。截至目前，正在使用自定义 Wordpress 循环提取结果，但如果需要，我可以使用 SQL。

提前感谢您以任何方式提供帮助！

*更新的代码

```
<?php
$loop = new WP_Query(array(
'post_type'         => 'tf_events', 
'posts_per_page'    => -1, 
'orderby'           => 'meta_value', 
'meta_key'          => 'tf_events_startdate', 
'order'             => 'ASC'
));

echo '<pre>';
print_r($loop);
echo '</pre>';

$groups = array();

if ($loop->have_posts()) {
  while ($loop->have_posts()) {
    $loop->the_post();

    $groups['Week of ' . $post->post_date][] = $post;

// Get event dates from WP metabox data (returns as string) 
$longstartdate = get_post_meta($post->ID, 'tf_events_startdate', true); //get start date meta data
$longenddate = get_post_meta($post->ID, 'tf_events_enddate', true); //get start date meta data
$longweekof = get_post_meta($post->ID, 'tf_events_weekof', true); //get Week Of date meta data

// Reformat dates
$prettystartdate = date("D. M. j, Y", $longstartdate);
$prettyenddate = date("l, F j, Y", $longenddate); 
$prettyweekof = date("m/d", $longweekof);

// Get Custom Meta Terms/Catagories/taxonomies
$the_venue = get_the_term_list(  $post->ID, 'venue' );
$event_age = get_the_term_list(  $post->ID, 'event_age' );

// Get Custom Metabox Data - URL for Buy Tickets
$buytix = get_post_meta( $post->ID, 'buytix', true );
 }
}
?>

<h1>Groups of posts</h1>
<?php echo '<pre>'; print_r($groups); echo '</pre>';?>
<?php foreach ($groups as $week => $rows) : ?>
<h2><?php echo $week ?></h2>

<ul>
    <?php foreach ($rows as $post) : setup_postdata($post) ?>
    <?php echo ' <h1>POST START</h1> <pre>';
print_r($post);
echo '</pre> <h1>POST END</h1>'; ?>
        <li><a href="<?php the_permalink() ?>"><?php the_title() ?></a> <?php echo $prettystartdate; ?></li>
    <?php endforeach ?>
</ul>
<?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:43:05.243

当我需要对元素进行分组时，我通常使用关联数组，其中键是分组依据。所以在你的情况下，数组看起来像：

```
array(
    'Week of 4/30' => array(array of posts)
); 
```

一个简单的方法（一旦你有所有的帖子）是这样的：

```
$groups = array();

foreach ($posts as $post) {
    $groups['Week of ' . date('m/d', $post->pub_date)][] = $post;
} 
```

然后你可以：

```
foreach ($groups as $title => $posts) {
     echo "<h2>$title</h2>";

     foreach ($posts as $post) ...
} 
```

编辑：这是更完整的代码（包括 WP 查询等）的样子：

```
<?php
# Get all posts
$loop = new WP_Query(array(
    'post_type'         => 'tf_events', 
    'posts_per_page'    => -1, 
    'orderby'           => 'meta_value', 
    'meta_key'          => 'tf_events_startdate', 
    'order'             => 'ASC'
));
$groups = array();

# Create groups of posts
if ($loop->have_posts) {
    while ($loop->have_posts()) {
        $loop->the_post();

        $groups['Week of ' . date('m/d', $post->tf_events_weekof)][] = $post;
    }
}
?>

<h1>Groups of posts</h1>

<?php foreach ($groups as $week => $rows) : ?>
    <h2><?php echo $week ?></h2>

    <ul>
        <?php foreach ($rows as $post) : setup_postdata($post) ?>
            <li><a href="<?php the_permalink() ?>"><?php the_title() ?></a></li>
        <?php endforeach ?>
    </ul>
<?php endforeach ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:17:40.207

这是对我有用的粗略解决方案。

```
<?php
$loop = new WP_Query(array(
'post_type'         => 'tf_events', 
'posts_per_page'    => -1, 
'orderby'           => 'meta_value', 
'meta_key'          => 'tf_events_startdate', 
'order'             => 'ASC'
));

$groups = array();
$heading = '';
if ($loop->have_posts()) {
while ($loop->have_posts()) {
    $loop->the_post();

//set up pretty week
$weekof = get_post_meta($post->ID, 'tf_events_weekof', true); //get Week Of date meta data
$longstartdate = get_post_meta($post->ID, 'tf_events_startdate', true); //get start date meta data
$longenddate = get_post_meta($post->ID, 'tf_events_enddate', true); //get start date meta data

//format dates
$prettyweekof = date("m/d", $weekof);
$prettystartdate = date("D. M. j, Y", $longstartdate);
$prettyenddate = date("l, F j, Y", $longenddate); 

//set info on objects
$post->prettyweekof = $prettyweekof;
$post->pretty_startdate = $prettystartdate;
$post->pretty_enddate = $prettyenddate;

//Echo heading when need to
if($post->prettyweekof !== $heading)
{
$heading = $post->prettyweekof;
echo '<h2>'.$heading.'</h2>';

}

//list events
echo $post->post_title.' | '.$post->pretty_startdate.' - '.$post->pretty_enddate.'<br />';

}
}
?> 
```

# c++ - 指针对象创建向量

> ID：10269025
> 
> 赞同：0
> 
> 时间：2012-04-22T15:01:49.313
> 
> 标签：c++

我必须`Vector<MyObject*>`通过调用来实现`AnotherClass::objectCollections()`。所以这里的返回类型应该是`Vector<MyObject*>`. 另外我必须`MyObject*`从另一个可以返回的函数中返回每个`MyObject*`。这样它就可以填充向量。我是 C++ 核心编程的新手。我想知道在不崩溃的情况下实现这一点的更安全方法，即使动态创建的向量数组数量很大，如果您提供足够的示例或与所需返回类型的链接，它将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:36:36.497

好的，这是一个示例。我用一些指向整数的指针填充了一个向量。然后我将它们一一删除，最后清除向量。如果我不会在 Vector.clear() 之前对每个元素手动调用 delete 运算符，则会出现内存泄漏。

```
 std::vector<int*> Vector;
    for (int i = 0; i < 10; i++)
        Vector.push_back(new int(i));

    std::vector<int*>::const_iterator It;

    for (It = Vector.begin(); It != Vector.end(); It++)
    {
        int* n = *It;
        if (n) delete n;
    }
    Vector.clear(); 
```

# javascript - 是否可以（并且推荐）使用 Javascript 来执行服务器端脚本？

> ID：10269027
> 
> 赞同：2
> 
> 时间：2012-04-22T15:02:04.133
> 
> 标签：javascript, serverside-javascript

是否可以使用 Javascript 查询数据库以显示文本、图像和其他数据，并且通常执行服务器端脚本？如果是这样，您会建议使用 Javascript 来执行此操作，还是使用 PHP、Python、ASP 等更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:03:49.053

这绝对是可能的，请参阅[Node.js](http://nodejs.org/)。实际的？完全取决于你的情况。

有关更多链接，请参阅[此问题](https://stackoverflow.com/questions/2895641/node-js-projects-tutorials)和 Aziz 的评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T15:04:45.257

你听说过[node.js](http://nodejs.org/)吗？

是的，这是可能的。

受到推崇的？-这取决于，一如既往...

# iphone - 为什么要创建变量而不是直接赋值？

> ID：10269030
> 
> 赞同：0
> 
> 时间：2012-04-22T15:02:24.150
> 
> 标签：iphone, objective-c, ios

这是一个基本问题，我不确定要搜索什么来查看之前是否有人问过它。

在很多例子中，我见过这样处理的属性分配：

```
NSArray *tempArray = [/*some code to get array*/];
self.propertyArray = tempArray;
[tempArray release]; 
```

为什么不这样做：

```
self.propertyArray = [/*some code to get array*/]; 
```

两者有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:04:52.430

这个答案是假设你不使用 ARC。

第一个代码片段是 Apple 推荐的初始化属性的方式，只要您在 init 之外的任何方法中执行此操作即可。您会注意到 Apple 代码片段经常这样做。它让你更容易管理你的记忆，而且在我看来它更容易阅读。

```
NSArray *tempArray = [[NSArray alloc] initWith....]
self.propertyArray = tempArray;
[tempArray release]; 
```

您拥有的第二个代码片段可能会导致内存泄漏，具体取决于您设置 NSArray 的方式。

这将是一个泄漏。propertyArray 的保留计数为 2。在 dealloc 中释放实例变量后，保留计数仍为 1。这是泄漏。

```
self.propertyArray = [[NSArray alloc] initWith...]; 
```

这没关系，因为它们都被自动释放，这将使您的保留计数为 1。只要您在 dealloc 中释放实例变量。

```
// Class Method so autoreleased
self.propertyArray = [NSArray arrayWith....];

// Explicitly declaring autorelease
self.propertyArray = [[[NSArray alloc] initWith.....] autorelease]; 
```

这只是一个偏好问题。我更喜欢第一种方式，我认为它更容易阅读和遵循。

编辑（使用 ARC）：

除了发布声明和自动发布声明之外，所有这些方法都是可以接受的。

```
[tempArray release]; 
```

ARC 会自动为您处理内存管理，因此您不必显式释放它们。这是 ARC 的好处，您可以创建任意数量的对象，而无需费力找出释放它们的位置。

此外，您的财产会有所不同。您必须使用强或弱，而不是保留。在这种情况下，强将是解决方案。

```
@property (nonatomic, strong) NSArray *tempArray; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:06:22.087

在第二个示例中，您没有释放由属性保留的对象，因此存在内存泄漏。

```
self.propertyArray = [[SomeClass alloc] init];
//                               ^ no release 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T17:20:00.220

使用 ARC，这两个语句在实践中是等效的（尽管您必须省略发布调用才能在 ARC 中实际编译）。

在手动托管内存场景中，您将在第二个示例中泄漏 tempArray（“直接分配”，这不是因为您调用的是属性设置器而不是设置 ivar）示例，因为您没有对*tempArray*的释放调用平衡它的分配/初始化。

有用的区别被简化为表达能力、调试能力以及最终程序员的个人偏好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T16:54:28.790

像这样的代码很可能意味着有人想要更容易调试它的能力。基本上，如果您有一个单独的变量，则可以在调试器中将其打印出来，而无需触发（可能是自定义的）属性设置器和获取器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T15:59:46.090

您的第一个示例是在自动引用计数 (ARC) 出现之前完成的方式。第二个示例在 ARC 下运行良好。除非您必须以老式方式进行操作，否则请为您的所有项目选择 ARC。

# c++ - 如何在 Qt 单元测试中比较数组

> ID：10269033
> 
> 赞同：0
> 
> 时间：2012-04-22T15:02:46.473
> 
> 标签：c++, unit-testing, qt

我必须比较我的预期数组和通过调用我的函数生成的数组。我知道这是一个简单的问题，但由于我是 Qt 的新手，任何人都可以帮助我解决这个问题。我的代码是

```
void TesterClass::testevolve()
{
    float T[100][100],A[100][100];
    A[0][0]=0;
    A[0][1]=75;
    A[0][2]=75;
    A[0][3]=75;
    A[0][4]=0;
    A[1][0]=0;
    A[1][1]=42.857;
    A[1][2]=63.169;
    A[1][4]=30;
    A[2][0]=0;
    A[2][1]=33.258;
    A[2][3]=76.116;
    A[2][4]=30;
    A[3][0]=0;
    A[3][1]=33.928;
    A[3][2]=52.455;
    A[3][3]=69.642;
    A[3][4]=30;
    A[4][0]=0;
    A[4][1]=50;
    A[4][2]=50;
    A[4][4]=0;

    ClassInitiate ci;
    ClassOutput co;
    int i,j;
    float c[100][100]=ci.initializeArray(T[100][100]);
    co.output(c[100][100]);
    for(i=0;i<=4;i++)
    {
        for(j=0;j<4;j++)
        {
            QVERIFY2(A[i][j]==c[i][j], "evolving array failed");
        }
    }
} 
```

我知道这个测试用例有问题。谁能告诉我写这个的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:15:49.750

你不能用原始内存 C 数组轻松地做到这一点——你应该将它们包装在某种实现`==`运算符的类中。

如果你不能做到这一点，那么你现在拥有的可能是你将得到的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:12:29.743

QCOMPARE 只是比较指针值，而不是数组元素值：

```
FAIL!  : SC_tests::testSeemCarving() Compared pointers are not the same
Actual (array): 0x93c6168
Expected (array1): 0x92d9a50 
```

# java - 带有堆栈的Java中的后缀评估

> ID：10269035
> 
> 赞同：0
> 
> 时间：2012-04-22T15:03:13.943
> 
> 标签：java, infix-notation, postfix-notation

我制作了这个评估后缀表达式的程序。如果只使用一位数字，它就可以正常工作。

我的问题是如果输入有空格，我如何推送多位数字？

前任。输入：23+34*- 输出为-7

但是如果我输入： 23 5 + 输出只有 3（这是空格前的数字），它的输出应该是 28

我的代码：

```
public class Node2
{
    public long num;
    Node2 next;
    Node2(long el, Node2 nx){
        num = el;
        next = nx;
    }
}

class stackOps2
    {
        Node2 top;
        stackOps2(){
            top = null;
        }

        public void push(double el){
            top = new Node2(el,top);
        }

        public double pop(){
            double temp = top.num;
            top = top.next;
            return temp;
        }

        public boolean isEmpty(){
            return top == null;
        }
    }

public class ITP {

static stackOps2 so = new stackOps2();
public static final String operator = "+-*/^";

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter the infix:");
           String s = input.next();
               String output;
    InToPost theTrans = new InToPost(s);
    output = theTrans.doTrans();
    System.out.println("Postfix is " + output + '\n');
 System.out.println(output+" is evaluated as: "+evaluate(output));
  }

    public static double evaluate(String value)throws NumberFormatException{

            for(int i=0;i<value.length();i++){
                char val = value.charAt(i);
                          if(Character.isDigit(value.charAt(i))){
                    String v = ""+val;
                    so.push(Integer.parseInt(v));
                }
                else if(isOperator(val)){
                    double rand1=so.pop();
                    double rand2=so.pop();
                    double answer ;
                    switch(val){
                        case '+': answer = rand2 + rand1;break;
                        case '-': answer = rand2 - rand1;break;
                        case '*': answer = rand2 * rand1;break;
                            case '^': answer = Math.pow(rand2, rand1);break;
                            default : answer = rand2 / rand1;break;
                    }
                    so.push(answer);
                    }
                    else if(so.isEmpty()){
                        throw new NumberFormatException("Stack is empty");
                    }
                } 
                return so.pop();
            }

            public static boolean isOperator(char ch){
                String s = ""+ch;
                return operator.contains(s);
            }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:34:24.517

这是一个小型的、独立的示例，它执行所有的字符串解析和评估。与您的示例的唯一区别是它一次接受整个字符串，而不是使用扫描仪。请注意`Integer.parseInt`您的示例中缺少的 -- 的使用。我认为您可以根据需要轻松扩展它。

```
@SuppressWarnings({"rawtypes", "unchecked"})
public static void main(String[] args) {
  final String in = "5 9 + 2 * 6 5 * +";
  final Deque<Object> s = new LinkedList();
  for (String t : in.split(" ")) {
    if (t.equals("+")) s.push((Integer)s.pop() + (Integer)s.pop());
    else if (t.equals("*")) s.push((Integer)s.pop() * (Integer)s.pop());
    else s.push(Integer.parseInt(t));
  }
  System.out.println(s.pop());
} 
```

# php - 电子邮件未发送

> ID：10269036
> 
> 赞同：0
> 
> 时间：2012-04-22T15:03:18.097
> 
> 标签：php, html, email

我有一个联系表，但消息没有发送到我声明的电子邮件。这是`submit.php`文件：

```
<?php

/* config start */

$emailAddress = 'xxxxxxx@hotmail.com';

/* config end */

require "../php/class.phpmailer.php";

session_name("fancyform");
session_start();

foreach($_POST as $k => $v)
{
    if(ini_get('magic_quotes_gpc'))
        $_POST[$k] = stripslashes($_POST[$k]);

    $_POST[$k] = htmlspecialchars(strip_tags($_POST[$k]));
}

$err = array();

if(!checkLen('name'))
    $err[] = 'The name field is too short or empty!';

if(!checkLen('email'))
    $err[] = 'The email field is too short or empty!';
elseif(!checkEmail($_POST['email']))
    $err[] = 'Your email is not valid!';

if(!checkLen('subject'))
    $err[] = 'You have not selected a subject!';

if(!checkLen('message'))
    $err[] = 'The message field is too short or empty!';

if((int)$_POST['captcha'] != $_SESSION['expect'])
    $err[] = 'The captcha code is wrong!';

if(count($err))
{
    if($_POST['ajax'])
    {
        echo '-1';
    }

    else if($_SERVER['HTTP_REFERER'])
    {
        $_SESSION['errStr'] = implode('<br />', $err);
        $_SESSION['post'] = $_POST;

        header('Location: '.$_SERVER['HTTP_REFERER']);
    }

    exit;
}

$msg =
'Name:  '.$_POST['name'].'<br />
Email:  '.$_POST['email'].'<br />
 IP:    '.$_SERVER['REMOTE_ADDR'].'<br /><br />

Message:<br /><br />

'.nl2br($_POST['message']).'

';

$mail = new PHPMailer();
$mail->IsMail();

$mail->AddReplyTo($_POST['email'], $_POST['name']);
$mail->AddAddress($emailAddress);
$mail->SetFrom($_POST['email'], $_POST['name']);
$mail->Subject = "A new ".mb_strtolower($_POST['subject'])." from ".$_POST['name']." | contact form feedback";

$mail->MsgHTML($msg);

$mail->Send();

unset($_SESSION['post']);

if($_POST['ajax'])
{
    echo '1';
}
else
{
    $_SESSION['sent'] = 1;

    if($_SERVER['HTTP_REFERER'])
        header('Location: '.$_SERVER['HTTP_REFERER']);

    exit;
}

function checkLen($str, $len = 2)
{
    return isset($_POST[$str]) && mb_strlen(strip_tags($_POST[$str]), "utf-8") > $len;
}

function checkEmail($str)
{
    return preg_match("/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/", $str);
}

?> 
```

如果`submit.php`在浏览器中打开，我会收到以下错误消息：

> **警告**：需要（../php/class.phpmailer.php）[function.require]：无法打开流：第 **10**行的**/home/content/96/9227096/html/submit.php中没有此类文件或目录****致命错误：require() [function.require]：在****/home/content/**中打开所需的 '../php/class.phpmailer.php' (include_path='.:/usr/local/php5_3/lib/php') 失败 **96/9227096/html/submit.php**第**10行**

 ******我的托管服务器还告诉我，我可能需要在我的代码中添加以下中继服务器：（但我不知道在哪里） `relay-hosting.secureserver.net`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:08:41.040

该语句`require "../php/class.phpmailer.php";`意味着`../php/class.phpmailer.php`将加载文件，如果无法加载，则脚本将终止。

它无法加载该脚本。这可能是出于多种原因中的任何一个。也许它不存在。也许您提供的路径是错误的。可能是文件权限问题。你必须弄清楚那部分。

但由于它无法加载它，脚本以错误消息终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:59:30.667

我在一些托管服务提供商上遇到了类似的问题。即使路径很好，也需要不包含文件并终止整个脚本。你可以在那里写一个文件的真实路径，也许这会有所帮助。由于这个问题我开始使用

```
require(getcwd().'actual/path/relevant/to/index.php'); 
```

并且更易于在一个类中编写应用程序，类似于 Java 或 C# 桌面应用程序。******

# java - 将 BigDecimal 格式化为最多 2 个十进制数字的字符串，在小数部分删除 0

> ID：10269045
> 
> 赞同：83
> 
> 时间：2012-04-22T15:04:15.537
> 
> 标签：java, formatting, bigdecimal

我有一个 BigDecimal 数字，我只考虑它的 2 个小数位，所以我使用以下方法截断它：

```
bd = bd.setScale(2, BigDecimal.ROUND_DOWN) 
```

现在我想将它打印为字符串，但如果它是 0，则删除小数部分，例如：

1.00 -> 1

1.50 -> 1.5

1.99 -> 1.99

我尝试使用格式化程序 formatter.format 但我总是得到 2 个十进制数字。

我怎样才能做到这一点？也许正在处理来自 bd.toPlainString() 的字符串？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-05-04T23:22:11.080

我用于`DecimalFormat`格式化`BigDecimal`而不是格式化`String`，似乎没有问题。

代码是这样的：

```
bd = bd.setScale(2, BigDecimal.ROUND_DOWN);

DecimalFormat df = new DecimalFormat();

df.setMaximumFractionDigits(2);

df.setMinimumFractionDigits(0);

df.setGroupingUsed(false);

String result = df.format(bd); 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-01-14T18:26:17.427

```
new DecimalFormat("#0.##").format(bd) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-06-03T05:56:36.037

下面的代码可能会对您有所帮助。

```
protected String getLocalizedBigDecimalValue(BigDecimal input, Locale locale) {
    final NumberFormat numberFormat = NumberFormat.getNumberInstance(locale);
    numberFormat.setGroupingUsed(true);
    numberFormat.setMaximumFractionDigits(2);
    numberFormat.setMinimumFractionDigits(2);
    return numberFormat.format(input);
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-04-22T15:26:42.517

使用`stripTrailingZeros()`.

[这篇](http://www.roseindia.net/java/java-bigdecimal/striptrailingzer.shtml)文章应该对你有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-01T23:31:25.193

如果它的钱使用：

```
NumberFormat.getNumberInstance(java.util.Locale.US).format(bd) 
```

# php - 查找 GPS 位置的地质情况，例如在水中或道路上

> ID：10269046
> 
> 赞同：1
> 
> 时间：2012-04-22T15:04:18.983
> 
> 标签：php, api, map, gps, watermark

我正在从事一个拥有一系列 GPS 位置的项目。我想知道这些点中的每一个，它们在哪里？我有一个特定的列表，我试图将它们的位置与其中之一相匹配，例如：水、高速公路、铁路……我尝试了这个 API (http://developers.cloudmade.com/wiki/geocoding-http- api/Documentation），但它没有给我任何准确的数据！甚至不到 50% 的正确率！你知道更好的解决方案吗？

*   我将 php 用于服务器端，负责从不同的 Web 服务收集数据。我们的客户端是 Android、Java
*   我希望系统搜索并自动找到位置类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:21:00.733

你没有给出任何关于你的平台的提示（电脑？智能手机？手动？在自动化程序中？）

但作为一个很好的起点，在 maps.google.com 中手动输入几个点，如果您输入纬度和经度（可能是经度和纬度都尝试），它会在地图上显示给您。Google 地图甚至具有简单的 API，因此您可以合理地简单地使用此功能（例如从 matlab 程序中）。

# python - 使用 MongoDB，如何根据匹配从列表中删除嵌入文档

> ID：10269056
> 
> 赞同：3
> 
> 时间：2012-04-22T15:06:34.397
> 
> 标签：python, mongodb, mongoengine

我有一个使用 MongoEngine 的文档和嵌入式文档

```
class Sub(EmbeddedDocument):
    Id = StringField()
    User = StringField()
    Value = StringField()

class Main(Document):
    Value = StringField
    Values = ListField(EmbeddedDocumentField(Sub)) 
```

当我将新的嵌入文档添加到 Main 的“值”字段中时，我会为列表生成一个唯一的 id 而不是集合，在 Main 的“值”中可以有多个 Sub，每个来自不同的用户，我试图让 MongoEngine 自动删除列表中的“子”值，基于 ID 和用户。

我试图为 Main 运行一个 select，然后为 Sub 本身运行一个 update_one

```
Main.objects(id=main_id).update_one(pull__values__id=sub_id) 
```

但这一切似乎返回的是数组内部的索引。我知道我可以简单地拉出 Main，然后通过 Values 找到元素并将其删除，但我试图保持这个原子性，并且在拉取、迭代、更新过程中将某些东西添加到 sub 的机会更少。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T00:50:53.887

只需使用 EmbeddedDocument 类即可通过`sub_id`

```
Main.objects(id=main_id).update_one(pull__values__id = Sub(Id=sub_id).Id ) 
```

# blackberry - 无法在黑莓 JDE 中找到 Json ME 的导入 Jar 文件

> ID：10269065
> 
> 赞同：0
> 
> 时间：2012-04-22T15:07:26.143
> 
> 标签：blackberry

我将从“github”下载的 Json ME jar 文件导入到一个黑莓项目中，我需要在其中解释来自 Web 服务的 JSON 响应。

问题是项目遇到此行时无法编译：

```
import org.json.JSONObject; 
```

并给出错误

```
 error: package org.json does not exist. 
```

jar 文件的名称是“json-1.0.jar”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:08:50.957

由于您已经导入了额外的 jar 文件，因此您应该在编译完成后获得额外的 cod 文件。似乎您只安装了没有库 cod 文件的应用程序 cod 文件。

查看您的应用程序代码文件所在的文件夹。必须有与 org.json 库相关的附加 cod 文件。签署此库并将其与应用程序代码文件一起安装。

如果编译后的 app 文件夹中不存在库 cod 文件，请检查您的项目设置。似乎 jar 文件添加不正确或无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:26:26.140

在资源文件夹中创建名为 lib 的文件夹，将 jar 文件复制并放入 lib 文件夹右键单击 jar 选择 Build Path-> Add to build path，然后如果要在您的项目中使用则导入 jar 它不会通过找不到模块例外。

# xml - 我在我的 xml dom 中找不到 selectSingleNode 方法 - Metro 风格

> ID：10269070
> 
> 赞同：0
> 
> 时间：2012-04-22T15:08:03.333
> 
> 标签：xml, microsoft-metro, selectsinglenode, winjs

我想写一个 Metro 风格的 RSS 阅读器，下面是我的应用程序中的一个功能。

```
function btnOKClick() {
        var btnOK = document.getElementById("btnOK");
        var txtAddress = document.getElementById("rssAddress");
        WinJS.xhr({ url: txtAddress.value }).done(function (result) {
            var xml = result.responseXML;
            //xml.selectSingleNode();
    }); 
```

但是我在我的 xml 变量中找不到 selectSingleNode 方法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:27:46.817

显然，该`selectSingleNode`方法在 Consumer Preview 版本中可用，但在以后的版本中被删除，因为正如[Kraig Brockschmidt 所说](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/2141429b-b7d3-46ef-a46b-5919e41d454f/)：

> ... 的基础对象类型 `request.responseXML`已更改，并且该对象具有自己的 API。之前它是一个 XML DOM 对象（在 MSXML 库之外），但它已更改为 HTML DOM 对象，因此方法和属性发生了变化。

[在同](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/2141429b-b7d3-46ef-a46b-5919e41d454f/)一篇文章中，Kraig 给出了新的替代方案`selectSingleNode`：

> 你需要使用`querySelector`而不是`selectNodes`......它现在应该是这样的：
> 
> `var categories = request.responseXML.querySelectorAll("entry");`

# javascript - 使用动态值的 jquery 图表示例

> ID：10269073
> 
> 赞同：0
> 
> 时间：2012-04-22T15:08:17.673
> 
> 标签：javascript, jquery

我想使用这个 jqchart bt 我不知道如何从我的 servlet 将值传递给这个函数，而后者又会从请求或会话中接收值。谁能告诉我如何使这个函数具有动态值？谢谢进步。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>HTML5 Chart jQuery Plugin - Multiple Axes </title>
        <link rel="stylesheet" type="text/css" href="../css/jquery.jqChart.css" />
        <script src="../js/jquery-1.5.1.min.js" type="text/javascript"></script>
        <script src="../js/jquery.jqChart.min.js" type="text/javascript"></script>
        <!--[if IE]><script lang="javascript" type="text/javascript" src="../js/excanvas.js"></script><![endif]-->
        <script lang="javascript" type="text/javascript">
            $(document).ready(function () {
                $('#jqChart').jqChart({
                    title: { text: 'Multiple Axes' },
                    axes: [
                             {
                                 name: 'y1',
                                 location: 'left'
                             },
                             {
                                 name: 'y2',
                                 location: 'right',
                                 strokeStyle: '#FCB441',
                                 majorGridLines: { strokeStyle: '#FCB441' },
                                 majorTickMarks: { strokeStyle: '#FCB441' }
                             }
                          ],
                    series: [
                                {
                                    type: 'column',
                                    axisY: 'y1',
                                    data: [['a', 1], ['b', 4], ['c', 3], ['d', 5], ['e', 2], ['f', 1]]
                                },
                                {
                                    type: 'line',
                                    axisY: 'y2',
                                    data: [['a', 40], ['b', 60], ['c', 62], ['d', 52], ['e', 70], ['f', 75]]
                                }
                            ]
                });
            });
        </script>
    </head>
    <body>
        <div>
            <div id="jqChart" style="width: 500px; height: 300px;" />
        </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T04:50:25.303

您可以使您的 html 文件成为 jsp 页面或标签，然后动态呈现 javascript 函数。

在您的 servlet java 文件中准备数据，例如：

```
String myseriesData1 = "['a', 1], ['b', 4], ['c', 3], ['d', 5], ['e', 2], ['f', 1]";
String myseriesData2 = "['a', 40], ['b', 60], ['c', 62], ['d', 52], ['e', 70], ['f', 75]"; 
```

在 servlet 中渲染 jsp 并确保“数据”部分如下所示：

```
...
series: [
    {type: 'column',axisY: 'y1',data: [${myseriesData1}]},
    {type: 'line',axisY: 'y2',data: [${myseriesData2}]}]}); 
```

# c - C - sizeof int 数组总是返回 4

> ID：10269076
> 
> 赞同：5
> 
> 时间：2012-04-22T15:08:50.167
> 
> 标签：c, gcc, dev-c++

> **可能的重复：**
> [C 中结构的 sizeof 数组？](https://stackoverflow.com/questions/1898657/sizeof-array-of-structs-in-c)
> [sizeof 作为函数参数传递的数组](https://stackoverflow.com/questions/8250829/sizeof-an-array-passed-as-function-argument)

只是想写一个基本的`sum()`功能。

```
int sum(int arr[]) {
    int total = 0 , i = 0 , l = sizeof arr;

    for(i=0;i<l;i++) {
        total += arr[i];
    }

    return total;
} 
```

`l`总是等于 4（我知道最终除以`sizeof int`）

在 Windows 7 中使用默认编译器选项运行 Dev-C++。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T15:10:39.777

作为函数参数，数组衰减为指向元素类型的指针`sizeof arr`，`sizeof(elem*)`.

您必须将元素的数量作为额外的参数传递，无法从指向数组第一个元素的指针中确定这一点（在这种情况下实际传递的是什么）。

# django - Django：在保存时从 m2m-field 中检索值

> ID：10269077
> 
> 赞同：0
> 
> 时间：2012-04-22T15:08:57.427
> 
> 标签：django, django-models

从管理界面保存时，我在检索多对多字段中的选定字段时遇到问题。

这是我的模型的简化版本。

```
class Template(models.Model):
    name = models.CharField('name', max_length = 100)
    sites = models.ManyToManyField(Sites)

    def save(self, *args, **kwargs):
        // Do something with the value of sites
        for site in self.sites.all():
            print site

        super(Template, self).save(*args, **kwargs) 
```

在管理界面中保存时，这应该打印所有选定的站点。但是，这实际上会打印保存之前选择的所有站点！

图片 我有一个名为 'foo' 和站点 ['a', 'b'] 的模板。当我在管理界面中编辑它并取消选择站点“b”时，我希望它打印 ['a']。但是，输出是 ['a', 'b']，例如旧值。

有谁知道如何解决这一问题？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:27:48.160

Calling `save` will commit the changes, so you probably want to iterate over the sites afterwards, like this:

```
def save(self, *args, **kwargs):
    super(Template, self).save(*args, **kwargs)
    for site in self.sites.all():
        print site 
```

If you specifically want to perform an action pre or post save, then have a look at [how signals work in Django](https://docs.djangoproject.com/en/dev/topics/signals/).

# iphone - iPhone 上以编程方式拨打电话的限制

> ID：10269088
> 
> 赞同：1
> 
> 时间：2012-04-22T15:10:03.667
> 
> 标签：iphone, objective-c, ios

Apple 是否对 iPhone 上的编程电话施加了限制？我不知道我必须阅读哪个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:43:59.317

您不能直接触发呼叫，但可以使用 URL Scheme 提示用户开始呼叫。您可以使用 AppDelegate 的 openURL 方法来做到这一点。这是您可以这样做的所有类型的列表（包括调用）。让 NSTimer 触发它应该很容易。

[http://wiki.akosma.com/IPhone_URL_Schemes#Phone](http://wiki.akosma.com/IPhone_URL_Schemes#Phone)

# c# - Unity3D调试神奇地去除NullReferenceException？

> ID：10269095
> 
> 赞同：1
> 
> 时间：2012-04-22T15:10:41.560
> 
> 标签：c#, .net, debugging, unity3d, nullreferenceexception

我的一个朋友，也是一名程序员，陷入了一些非常奇怪的事情......我无法真正解释它，因为这段代码：

```
try {
   result = chunks.Find (delegate(float[] fa2) {
//                                            Debug.Log("fa2: " + fa2);
//                                            Debug.Log("fa: " + fa);
       return fa2[0] == fa[0] && fa2[1] == fa[1] && fa2[2] == fa[2];
   });
}
catch (Exception e) {
   Debug.LogError("result1: " + e);
} 
```

退货

```
result1: System.NullReferenceException: Object reference not set to an instance of an object
 at March+<BuildLand>c__AnonStorey0.<>m__3 (System.Single[] fa2) [0x00009] in C:\Users\Roy\Documents\March\Assets\Scripts\March.cs:262
 at System.Collections.Generic.List`1[System.Single[]].GetIndex (Int32 startIndex, Int32 count, System.Predicate`1 match) [0x00000] in <filename unknown>:0
 at System.Collections.Generic.List`1[System.Single[]].Find (System.Predicate`1 match) [0x00000] in <filename unknown>:0
 at March.BuildLand () [0x0012c] in C:\Users\Roy\Documents\March\Assets\Scripts\March.cs:257 
```

但是，如果您取消注释调试行，它就可以工作。有人可以澄清一下吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-09T17:57:38.040

通过使用*try-catch*语句告诉您的程序忽略错误并继续运行，您的代码似乎正在获取**`null`引用异常。**

 *该`catch`语句捕获错误并允许您以您认为合适的方式处理错误。在您的情况下，您的错误处理只是将错误写入日志。

通过注释掉 Debug 语句，您根本不会处理您的错误。如果发生错误，您基本上完全忽略了该代码块。有时，如果该代码块没有任何依赖关系，程序可能“看起来”仍然正常运行。

但是，您应该追踪您的**`null`参考异常**并解决它，否则将面临意外后果的愤怒。*

# amazon-s3 - 亚马逊 S3 和 CloudFront

> ID：10269098
> 
> 赞同：2
> 
> 时间：2012-04-22T15:10:53.850
> 
> 标签：amazon-s3, amazon-web-services, cdn, amazon-cloudfront

我想结合 Amazon S3 和 CloudFront 来实现用户请求的地理分布。它会提供改进吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T16:11:23.203

它很可能会提供显着的改进，毕竟，[Amazon CloudFront](http://aws.amazon.com/cloudfront/)是一个[内容分发网络 (CDN)](http://en.wikipedia.org/wiki/Content_delivery_network)，*用户请求的地理分布*是 CDN 的主要目标之一：

> Amazon CloudFront 是一种用于内容交付的 Web 服务。它与其他 Amazon Web Services 集成，为开发人员和企业提供了一种以**低延迟、高数据传输速度**和无承诺的方式向最终用户分发内容的简单方法。*[强调我的]*

这是通过*使用全球边缘位置网络提供静态和流媒体内容来实现的*：

> 对您的对象的请求会**自动路由到最近的边缘位置**，因此以最佳性能交付内容。Amazon CloudFront 经过**优化，可与其他 Amazon Web 服务一起使用，例如 Amazon Simple Storage Service (S3)**和 Amazon Elastic Compute Cloud (EC2)。[...] *[强调我的]*

CloudFront 从所谓的[Origin Server](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/AboutCreatingDistributions.html#OriginServerBucket)检索其内容，*您将源服务器指定为 Amazon S3 存储桶或自定义源*。有一个[架构概述](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/ArchitecturalOverview.html)也说明了这个概念。

[您可以在全球基础设施](http://aws.amazon.com/about-aws/globalinfrastructure/)地图上看到不断增长的边缘位置列表，并粗略估计它是否已经为您的用例提供了相应的好处；像往常一样，这取决于许多细节，主要是您的 S3 存储桶的位置与您的用户的位置以及这两者之间的可用带宽（例如，俄罗斯还没有边缘位置，仍然是欧洲中部的边缘位置）或者瑞典斯德哥尔摩的那个可能已经比仅在爱尔兰都柏林托管的 S3 存储桶“更接近”了）。

最后，值得注意的是，为*[Amazon CloudFront](http://aws.amazon.com/cloudfront/)**提供支持的基于延迟的路由技术*同时也可通过[Amazon Route 53](http://aws.amazon.com/route53/)进行自定义使用，有关详细信息，请参阅各自的介绍性文章[Multi-Region Latency Based Routing now Available for AWS](http://aws.typepad.com/aws/2012/03/latency-based-multi-region-routing-now-available-for-aws.html)。

# python - PIL - 将 GIF 帧转换为 JPG

> ID：10269099
> 
> 赞同：16
> 
> 时间：2012-04-22T15:11:03.740
> 
> 标签：python, image-processing, python-imaging-library, gif, jpeg

我尝试使用 Python 图像库将 gif 转换为单个图像，但它会导致奇怪的帧

输入 gif 是：

[源图片 http://longcat.de/gif_example.gif](http://longcat.de/gif_example.gif)

在我的第一次尝试中，我尝试将带有 Image.new 的图像转换为 RGB 图像，以 255,255,255 作为白色背景 - 就像我在互联网上找到的任何其他示例一样：

```
def processImage( infile ):

    try:
        im = Image.open( infile )
    except IOError:
        print "Cant load", infile
        sys.exit(1)

    i = 0

    try:
        while 1:

            background = Image.new("RGB", im.size, (255, 255, 255))
            background.paste(im)
            background.save('foo'+str(i)+'.jpg', 'JPEG', quality=80)

            i += 1
            im.seek( im.tell() + 1 )

    except EOFError:
        pass # end of sequence 
```

但它会导致奇怪的输出文件：

[示例 #1 http://longcat.de/gif_example1.jpg](http://longcat.de/gif_example1.jpg)

我的第二次尝试是，首先将 gif 转换为 RGBA，然后使用它的透明度蒙版，使透明部分变为白色：

```
def processImage( infile ):

    try:
        im = Image.open( infile )
    except IOError:
        print "Cant load", infile
        sys.exit(1)

    i = 0

    try:
        while 1:

            im2 = im.convert('RGBA')
            im2.load()

            background = Image.new("RGB", im2.size, (255, 255, 255))
            background.paste(im2, mask = im2.split()[3] )
            background.save('foo'+str(i)+'.jpg', 'JPEG', quality=80)

            i += 1
            im.seek( im.tell() + 1 )

    except EOFError:
        pass # end of sequence 
```

这导致这样的输出：

[示例 #2 http://longcat.de/gif_example2.jpg](http://longcat.de/gif_example2.jpg)

与第一次尝试相比的优势是，第一帧看起来不错但是正如你所看到的，其余的都坏了

接下来我应该尝试什么？

编辑：

我想我离解决方案更近了

[示例 #3 http://longcat.de/gif_example3.png](http://longcat.de/gif_example3.png)

我必须将第一张图像的调色板用于其他图像，并将其与前一帧合并（对于使用差异图像的 gif 动画）

```
def processImage( infile ):

    try:
        im = Image.open( infile )
    except IOError:
        print "Cant load", infile
        sys.exit(1)

    i = 0

    size        = im.size
    lastframe   = im.convert('RGBA')
    mypalette   = im.getpalette()

    try:
        while 1:

            im2 = im.copy()
            im2.putpalette( mypalette )

            background = Image.new("RGB", size, (255,255,255))

            background.paste( lastframe )
            background.paste( im2 )
            background.save('foo'+str(i)+'.png', 'PNG', quality=80)

            lastframe = background

            i += 1
            im.seek( im.tell() + 1 )

    except EOFError:
        pass # end of sequence 
```

但我其实不知道，为什么我的透明度是黑色，而不是白色即使我修改调色板（将透明度通道更改为白色）或使用透明度蒙版，背景仍然是黑色

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-26T14:44:38.603

首先，`JPEG`不支持透明！但这不是唯一的问题..当您移动到下一帧时，`GIF`信息`palette`丢失了（[PIL 的问题？](http://mail.python.org/pipermail/image-sig/2008-November/005273.html)） - 因此`PIL`无法正确转换为`RGBA`框架（因此第一帧是好的，但所有其他帧都是拧巴）。因此，解决方法是`palette`为每一帧添加背面，（这是您在上一个代码示例中所做的，但您的问题是您保存为`RGB`没有`RGBA`，因此您没有 alpha/透明度通道。而且您是做一些不必要的事情..)。无论如何，这是具有透明度的.png和更正的代码，希望它有一些用处:)

![在此处输入图像描述](../Images/0b30275b8de6e8cd0014e712d4b77286.png)![在此处输入图像描述](../Images/c1a10fc3cf5572c784f6f883b16cd971.png)![在此处输入图像描述](../Images/24a5c86fb13786a6753c90ca6cc46a9b.png)![在此处输入图像描述](../Images/aba55eca10e8a76f413843e1576a15d1.png)![在此处输入图像描述](../Images/7d5cdf3ad02e07ede74213139799da5a.png)![在此处输入图像描述](../Images/7fe9150e9d2ffd4256ea86eeb461e2b7.png)![在此处输入图像描述](../Images/6bcbea76dc7fa1322d9a190f4ee1eae0.png)![在此处输入图像描述](../Images/30cce7c9e736e999bcf262e5eddcfe2e.png)![在此处输入图像描述](../Images/431b5903748b47f0a817a447873ea579.png)![在此处输入图像描述](../Images/fa251133d5f5128114449e35117781d0.png)

```
import Image
import sys

def processImage(infile):
    try:
        im = Image.open(infile)
    except IOError:
        print "Cant load", infile
        sys.exit(1)
    i = 0
    mypalette = im.getpalette()

    try:
        while 1:
            im.putpalette(mypalette)
            new_im = Image.new("RGBA", im.size)
            new_im.paste(im)
            new_im.save('foo'+str(i)+'.png')

            i += 1
            im.seek(im.tell() + 1)

    except EOFError:
        pass # end of sequence

processImage('gif_example.gif') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T19:44:25.030

在图像查看器上查看图像时，即使透明度设置为零，它也倾向于将图像显示为黑色。确保您的图像真正透明的一种方法是将其合并到另一个上。应该看到“表情”，同时不妨碍其他图像。尝试：

```
background = Image.open('someimage.jpg') #an existing image
foreground = Image.open('foo.jpg') #one of the above images
background.paste(foreground, (0,0), foreground)
background.save('trial.jpg') #the composite image 
```

从理论上讲，如果您在图像查看器中打开“trial.jpg”并保留初始图像的内容，并且在其顶部是 foo 图像，那么您将确定它是否只是图像查看器并且您的图像很好...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-02T11:34:54.540

[来源在这里](https://mail.python.org/pipermail/python-list/2000-May/036017.html)

```
Image.open('image.gif').convert('RGB').save('image.jpg') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-17T16:23:00.800

[![在此处输入图像描述](../Images/1f8f4b2efa6c2e3df6a96c25d5a4cc3b.png)](https://i.stack.imgur.com/bbmQK.png)

这对我有用。以下示例显示了将 image.gif 转换为 8 幅具有白色背景的 jpg 格式图像。

```
from PIL import Image
from PIL import GifImagePlugin

def gif2jpg(file_name: str, num_key_frames: int, trans_color: tuple):
    """
    convert gif to `num_key_frames` images with jpg format
    :param file_name: gif file name
    :param num_key_frames: result images number
    :param trans_color: set converted transparent color in jpg image
    :return:
    """
    with Image.open(file_name) as im:
        for i in range(num_key_frames):
            im.seek(im.n_frames // num_key_frames * i)
            image = im.convert("RGBA")
            datas = image.getdata()
            newData = []
            for item in datas:
                if item[3] == 0:  # if transparent
                    newData.append(trans_color)  # set transparent color in jpg
                else:
                    newData.append(tuple(item[:3]))
            image = Image.new("RGB", im.size)
            image.getdata()
            image.putdata(newData)
            image.save('{}.jpg'.format(i))

gif2jpg("image.gif", 8, (255, 255, 255))  # convert image.gif to 8 jpg images with white background 
```

# iphone - 检索 nsarray 的所有数据

> ID：10269107
> 
> 赞同：0
> 
> 时间：2012-04-22T15:11:49.217
> 
> 标签：iphone, objective-c, ios, ipad

我正在使用 JSON 解析通过使用 php 从 MySql 获取数据我得到了我想要的所有数据，但是当我想打印这些数据时，我创建了一个 for 循环，但它只给了我最后一个元素..这是我的代码

在 DidViewLoad 中：

```
- (void)viewDidLoad
{
[超级视图DidLoad];

`NSString *phpUrl = @"http://dt-works.com/eman/bookOwn.php"; 
NSString *dbName = @"dbName";
NSString *localHost = @"localhost";
NSString *dbUser = @"dbUser";
NSString *dbPwd = @"dbPwd";

int u_id = 1;
NSString *user_id = [NSString stringWithFormat:@"%d",u_id];

SBJsonParser *parser = [[SBJsonParser alloc] init];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:phpUrl]];

[request setHTTPMethod:@"POST"];

NSString *post = [[NSString alloc] initWithFormat:@"dbName=%@&localHost=%@&dbUser=%@&dbPwd=%@&user_id=%@&submit=", dbName, localHost, dbUser, dbPwd, user_id];

[request setHTTPBody:[post dataUsingEncoding:NSUTF8StringEncoding]];

NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];

NSArray *statuses = [parser objectWithString:json_string error:nil];
int arraySize = [statuses count];

for (NSDictionary *status in statuses)
{

    bo_id2 = [status objectForKey:@"bo_id"];
    bo_name2 = [status objectForKey:@"bo_name"];
    bo_au_id2 = [status objectForKey:@"bo_au_id"];
    bo_pub_id2 = [status objectForKey:@"bo_pub_id"];
    bo_num_pages2 = [status objectForKey:@"bo_num_pages"];
    bo_publish_year2 = [status objectForKey:@"bo_publish_year"];
}

NSLog(@"size of array is: %d", arraySize);

for (int i=0; i<arraySize; i++) {
    NSLog(@"%d:",i);
    // here I want to retrieve all array elements .. when I try 
     NSLog(@"Book id: %@ - book name: %@", bookId, bookName); 
      // this give me the last elemet only not all data 
      // I want to get the data here to use it later .. how ???

}` 

}

有什么帮助吗？？

            回答 #1

赞同：1

时间：2012-04-22T15:20:41.757

您似乎只是将每个对象的值重新分配给一个实例变量，一个实例变量只指向一个对象，而不是您分配给它的所有对象。

            回答 #2

赞同：0

时间：2012-04-22T15:52:49.483

很可能您一定在某个地方重新初始化了数组。检查整个代码。

            回答 #3

赞同：0

时间：2012-04-22T16:01:36.750

```
NSLog(@"Book id: %@ - book name: %@", bookId, bookName); 
```

上面 NSLog 中的 bookId 和 bookName 值是如何得到的？那里的代码中缺少一些东西。

你可以试试这个：

```
for(NSDictionary *status in statuses) {
   NSLog(@"Book id: %@ - Book Name: %@", [status objectForKey:@"bo_id"], [status objectForKey: @"bo_name"]);
} 
```

换句话说，如果您想使用第二个 for 循环，请使用与第一个相同的方式。

            回答 #4

赞同：0

时间：2012-04-22T15:18:17.717

我不太明白为什么`for`在第一个循环中必须使用两个循环来完成任务

```
NSMutableArray *books = [[NSMutableArray alloc] init];
for(NSDictionary *status in statuses){
  [books addObject:status];
} 
```

稍后当您想要检索任何书籍时，您只需调用`[books objectAtIndex:index]`. 希望这可以提供帮助。您应该能够完成您要求的所有任务。

**编辑**
如果您只想要一个元素，例如 bo_name 您可以使用：

```
NSMutableArray *books =[[NSMutableArray alloc] init];
for(NSDictionary *status in statuses){
    [books addObject:[status objectForKey:@"bo_name"]];
} 
```

```

# xml - 解析器错误 XML：属性“类型”和 孩子是互斥的

> ID：10269111
> 
> 赞同：1
> 
> 时间：2012-04-22T15:12:38.923
> 
> 标签：xml, xsd

你好我一直在寻找这个问题大约一个小时，我什至找不到这意味着什么。

这是我的 XML shema 代码：

```
<xsd:element name="game">
    <xsd:complexType>
        <xsd:sequence>
        <xsd:element name="info" minOccurs="0" maxOccurs="1" type="infoType">   
        </xsd:element>
        <xsd:element name="moves" type="movesType" minOccurs="1">

        </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>
<xsd:complexType name="infoType">
    <xsd:sequence>
        <xsd:element name="name" minOccurs="0" maxOccurs="1" type="xsd:string"></xsd:element>
        <xsd:element name="description" minOccurs="0" maxOccurs="1" type="descriptionType">
        </xsd:element>
        <xsd:element name="started" type="xsd:dateTime"></xsd:element>
        <xsd:element name="players" minOccurs="0" maxOccurs="1">    
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="screenname" minOccurs="0" maxOccurs="4" type="xsd:string">
                        <xsd:complexType>
                            <xsd:attribute name="player"  use="required">   </xsd:attribute>
                        </xsd:complexType>
                    </xsd:element>
                </xsd:sequence>
                <xsd:attribute name="number" type="xsd:integer" use="required"></xsd:attribute> 
            </xsd:complexType>
        </xsd:element>
        <xsd:element name="rounds" minOccurs="0" maxOccurs="1" type="xsd:integer"></xsd:element>
        <xsd:element name="winner" minOccurs="0" maxOccurs="1">
            <xsd:complexType>
                <xsd:attribute name="player" type="playerType" use="required"></xsd:attribute>
            </xsd:complexType>
        </xsd:element>
    </xsd:sequence>
</xsd:complexType>
<xsd:complexType name="movesType">
    <xsd:choice maxOccurs="unbounded">
        <xsd:element name="roll" >
            <xsd:complexType>
                <xsd:simpleContent>
                    <xsd:restriction base="xsd:integer">
                        <xsd:minInclusive value="1"></xsd:minInclusive>
                        <xsd:maxInclusive value="6"></xsd:maxInclusive>
                    </xsd:restriction>
                </xsd:simpleContent>
                <xsd:attribute name="player" type="playerType"></xsd:attribute>
            </xsd:complexType>
        </xsd:element>
        <xsd:element name="piece">
            <xsd:complexType>
                <xsd:attribute name="player" type="playerType" use="required"></xsd:attribute>
                <xsd:attribute name="nr" type="xsd:integer" use="required">
                    <xsd:simpleType>
                        <xsd:restriction base="xsd:integer">
                            <xsd:minInclusive value="1"></xsd:minInclusive>
                            <xsd:maxInclusive value="16"></xsd:maxInclusive>
                        </xsd:restriction>
                    </xsd:simpleType>
                </xsd:attribute>
                <xsd:attribute name="field" type="xsd:integer" use="required">
                    <xsd:simpleType>
                        <xsd:restriction base="xsd:integer">
                            <xsd:minInclusive value="1"></xsd:minInclusive>
                            <xsd:maxInclusive value="72"></xsd:maxInclusive>
                        </xsd:restriction>
                    </xsd:simpleType>
                </xsd:attribute>
            </xsd:complexType>
        </xsd:element>
    </xsd:choice>
</xsd:complexType>
<xsd:simpleType name="playerType" >
    <xsd:restriction base="xsd:integer">
        <xsd:minInclusive value="1"></xsd:minInclusive>
        <xsd:maxInclusive value="4"></xsd:maxInclusive>
    </xsd:restriction>
</xsd:simpleType>
<xsd:complexType  name="descriptionType" mixed="true">
                <xsd:choice minOccurs="0" maxOccurs="unbounded">
                    <xsd:element name="i" type="descriptionType" ></xsd:element>
                    <xsd:element name="b" type="descriptionType"></xsd:element>
                </xsd:choice>
            </xsd:complexType> 
```

这是我得到的解析器错误。

```
game.xsd:25: 
  element complexType: 
  Schemas parser error : 
  Element '{http://www.w3.org/2001/XMLSchema}element': 
  The attribute 'type' and the child are mutually exclusive. 
game.xsd:51: 
  element attribute: 
  Schemas parser error : 
  Element '{http://www.w3.org/2001/XMLSchema}complexType': 
  The content is not valid. Expected is (annotation?, (simpleContent | complexContent | ((group | all | choice | sequence)?, ((attribute | attributeGroup)*, anyAttribute?)))). 
game.xsd:58: 
  element simpleType: 
  Schemas parser error : 
  Element '{http://www.w3.org/2001/XMLSchema}attribute': 
  The attribute 'type' and the child are mutually exclusive. 
game.xsd:66: 
  element simpleType: 
  Schemas parser error : 
  Element '{http://www.w3.org/2001/XMLSchema}attribute': 
  The attribute 'type' and the child are mutually exclusive. WXS schema game.xsd failed to compile 
```

这是一个大学项目，我必须在 6 小时内上交。我希望我能在这段时间内找到解决方案。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T15:46:18.277

## 属性“类型”和子级是互斥的。

在`screenname`( `game.xsd:25`) 的元素定义中，两者都将元素类型定义为`xsd:string`在属性中，并将其定义为`complexType`使用子元素。您可能正在寻找具有特定属性和字符串内容的类型？

```
<xsd:element name="screenname" minOccurs="0" maxOccurs="4">
  <xsd:complexType>
    <xsd:simpleContent>
      <xsd:extension base="xsd:string">
        <xsd:attribute name="player" use="required" type="xsd:string" />
      </xsd:extension>
    </xsd:simpleContent>
  </xsd:complexType>
</xsd:element> 
```

# java - 如何在java中加载属性文件而不单独调用laod方法

> ID：10269112
> 
> 赞同：1
> 
> 时间：2012-04-22T15:12:45.033
> 
> 标签：java

如何在不单独调用 laod 方法的情况下在 java 中加载属性文件我想在属性对象本身的实例化时加载文件。就像我在下面粘贴的一样，但我无法成功。

```
class test{
Properties configFile = new Properties(load(new FileInputStream("config.properties"));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:17:57.600

只需创建一个单独的方法来执行此操作 - 可能在您可以在其他地方使用的辅助类中：

```
public class PropertiesHelper {
    public static Properties loadFromFile(String file) throws IOException {
        Properties properties = new Properties();
        FileInputStream stream = new FileInputStream(file);
        try {
            properties.load(stream);
        } finally {
            stream.close();
        }
        return properties;
    }
} 
```

请注意，由于 的可能性`IOException`，您仍然需要小心从哪里调用它。如果要在实例初始化程序中使用它，则需要声明所有构造函数都可以 throw `IOException`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T15:17:24.253

类似这样的东西：

```
class Test {
    Properties configFile = new Properties() {{ load(new FileInputStream("config.properties")); }};
} 
```

您实际上是在此处对 Properties 进行子类化并使用其初始化部分。load(..) 可能会抛出一个异常，如果你需要添加一个`try { ... } catch () {}`

# c# - 将 VB.NET 应用程序转换为 C#，但无法确定变量的放置位置

> ID：10269114
> 
> 赞同：0
> 
> 时间：2012-04-22T15:12:57.723
> 
> 标签：c#, .net, vb.net, vb.net-to-c#

我正在制作一个教程程序。它通过按下一个按钮来操作，该按钮将您移动到下一步，另一个按钮则返回。所有说明都使用富文本框显示。该程序的 VB.NET 版本使用选择案例来完成所有操作，我只是在下面声明了变量

`Public Class Form1`

然后我可以从任何“按钮按下”调用它并且没有问题。我不能在 C# 中这样做，因为它需要在上下文中声明变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:30:39.573

在 C# 和 VB.NET 中声明类级别成员非常相似。下面是一个声明类级别变量的示例，然后在单击按钮时递增。

**VB.NET**

```
Public Class Form1

Private x as Integer

Private Sub Button1_Click(ByVal sender as Object, ByVal e as Event Args) Handles Button1.Click

    x = x + 1

End Sub 
```

**C＃**

```
public class Form1
{
    private int x;

    private void button1_Click(object sender, EventArgs e)
    {
        x = x + 1;
    }
} 
```

如果这不能解决您的问题，请发布一些代码。

# jquery - JQUERY，找到最近的ID？

> ID：10269119
> 
> 赞同：0
> 
> 时间：2012-04-22T15:14:14.843
> 
> 标签：jquery

```
<ul id="containerA" class="container">
        <li>
        <span class="sportsType" id="football">Football</span>
            <ul>
                <li class="sportsMatch">
                <img src="/static/img/arrow_left.png" class="subArrow"/>A vs B <img src="/static/img/arrow_left.png" class="star"/>
                </li> 
```

当您单击带有类星的PNG时，我想返回最上面的ul（containerA）。我可以使用 .parent.parent.parent 等，但它还需要使用另一组不那么复杂的列表：

```
 <ul id="containerB" class="container">
 <li class="sportsMatch">
<img src="/static/img/arrow_left.png" class="subArrow"/>A vs B <img src="/static/img/arrow_left.png" class="star"/>
</li> 
```

这是我的 jscript，我可以在其中放入什么来获取最近容器的 id？

```
$(".star").click(function() {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T15:16:10.213

您将要使用[`.closest`](http://api.jquery.com/closest)来查找被点击元素的最近祖先（`this`在事件处理程序内部）。如果你想要`id`容器的，你可以使用[`attr`](http://api.jquery.com/attr)or [`prop`](http://api.jquery.com/prop)，或者直接访问 DOM 元素并访问`id`属性（正如@sg3s 在他的评论中指出的那样）：

```
$(".star").click(function() {
    var $container = $(this).closest(".container"),
        containerId = $container.attr("id");
}); 
```

**示例：http:** [//jsfiddle.net/L7JyY/](http://jsfiddle.net/L7JyY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:16:45.780

使用[`closest`方法](http://api.jquery.com/closest/)获取元素，然后使用`attr`方法获取id：

```
var ul = $(this).closest('.container');
var id = ul.attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:19:38.697

这将为您带来与选择器匹配的第一个升序父级：

```
$(".star").click(function() {
    $(this).parentsUntil(".container").parent();
} 
```

[http://api.jquery.com/parentsUntil/](http://api.jquery.com/parentsUntil/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T15:16:42.287

`class="container"`由于您要求最顶层，因此在祖先层次结构中可能存在多个对象。如果是这种情况，那么你会这样做：

```
$(".star").click(function() {
    var topContainer = $(this).parents(".container").last();
} 
```

如果您想要最近的祖先`class="container"`（例如，不是最上面的，而是最接近点击对象的祖先）或者只有一个祖先带有`class="container"`，那么您可以这样做稍微简单一些：

```
$(".star").click(function() {
    var container = $(this).closest(".container");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T15:17:01.820

如果 UL 始终有一个“容器”类，并且 PNG 之间没有其他具有相同类的元素，那么您可以这样做

```
$(".star").click(function() {
  $(this).closest('.container')
}) 
```

# .net - Visual Studio 属性未显示所有枚举选项

> ID：10269120
> 
> 赞同：0
> 
> 时间：2012-04-22T15:14:21.710
> 
> 标签：.net, visual-studio-2010, enums

我制作了一个具有 type 属性的 UserControl `RotateFlipType`，该控件在另一个相应地设置属性的 UserControl 中使用。

问题是，根据[RotateFlipType MSDN 文档](http://msdn.microsoft.com/en-us/library/system.drawing.rotatefliptype.aspx)，枚举有 16 个字段，但 VS 属性窗口仅显示 14 个，`Rotate180FlipNone`并且`RotateNoneFlipX`丢失了。

我需要使用`Rotate180FlipNone`. 通过代码设置它工作正常，但我真的不想那样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:27:23.323

仔细查看组合框中的值。请注意，它包含*重复项*：

![在此处输入图像描述](../Images/3aeb7321f5d61efafdfbba006fd6b9f8.png)

是的，因此缺少价值。该列表仍然包含 16 个值。

原因是 RotateFlipType 的枚举值是*不明确*的。只有 8 个不同的值。像 RotateNoneFlipNone 是与 Rotate180FlipXY 完全相同的变换。用一张纸试试。或者直观地说，有 4 个可能的旋转乘以 2 个可能的投影（原始和翻转）。所以出错的是类型转换器将枚举的整数值（0 到 7 之间）转换回字符串。有两个可供选择，它只选择第一个匹配项。

您需要编写自己的 TypeConverter 将值映射到不同的字符串，即 8 个可能的字符串之一。您可能想要编写一个 UITypeConverter，以便使用显示转换的位图更明显。

# java - 使用java的应用程序的线程优先级

> ID：10269125
> 
> 赞同：0
> 
> 时间：2012-04-22T15:14:42.653
> 
> 标签：java, sql, jakarta-ee

你能帮我解决两个问题吗：

A. 我们有一张表，读写操作同时发生。写入发生得非常多，因此读取速度非常慢 - 有时我的 Web 应用程序由于在此表上的大量写入操作而无法启动。我怎么能处理这种情况。写入是通过不同的 Java 应用程序进行的，而读取是通过我们的 Web 应用程序进行的，因此 Web 应用程序变得非常慢。任何想法？

B. 这个表的写入发生在 200 个线程中，这些线程从连接池中获取连接并写入表，这个应用程序运行 24 到 7。是线程优先级有问题并停止来自 Web 应用程序的读取操作。

C. 我们可以只为该表进行主-主复制-因此写入发生在一张表中，写入发生在另一张表中，并且每两分钟数据从一张表迁移到另一张表？

请建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:35:58.753

在尝试任何太复杂的事情之前，不妨试试这个：

1）不要使用线程优先级，它们很少是你想要的。

2) 设置您自己的优先级方案，也许只需为读取和写入优先级设置一个（优先级）队列。即：将读取和写入请求添加到单个队列并让它们阻塞或收到结果通知。

3）检查您的数据库功能以优化写入繁重的表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:23:04.717

解决此问题的一种真正方法是使用写入事件队列并定期停止写入，以便读者有机会。

1.  为传入的写入更新创建队列
2.  创建一个 atomicXXX（参见 java.util.concurrency）以用作锁
3.  创建一个线程池以从队列中读取并在取消锁定时执行更新
4.  使用 javax.swing.Timer 定期设置锁和读取表数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T16:13:21.410

1.  检查连接池大小 - 也许它太小了，您的线程浪费时间等待来自池的连接。
2.  检查您的数据库设置，如果您只是使用开箱即用的参数运行它，那么可能会有很好的改进空间。
3.  您可能需要某种事件驱动系统——当车辆发送数据时，DB 不会更新，而是将消息添加到某个队列（例如 JMS）。然后，您的应用程序会在启动时缓存数据，并在收到此消息后更新缓存和数据库。关键是与 DB 交互的唯一组件是您的应用程序，并且数据仅在您收到事件时更改 - 因此您不需要查询 DB 来读取数据，而且您可以在后台进行更新线程等。有相当不错的开源消息系统（例如Apache Active MQ）和缓存库（例如EH Cache），因此您可以不费力气地构建合理的性能和容错系统。
4.  我想引入消息传递将是一个严重的重新设计，因此解决您的直接问题复制可能是最好的解决方案 - 每 2 分钟将可更新表中的数据合并到另一个表，跟踪器将读取另一个表；如果您只读取网络应用程序中的数据而不更新它们，显然效果很好，否则您需要付出很多努力来保持 2 个表同步。一种变体是批处理——来自车辆的数据被插入到中间表中，然后每 2 分钟传输到主表中，读取器从中查询它们；中间表在转移后进行清洁。

# python - 周期性数据直方图的统计

> ID：10269129
> 
> 赞同：2
> 
> 时间：2012-04-22T15:14:49.570
> 
> 标签：python, numpy, statistics, complex-numbers

对于 (-pi, pi) 范围内的一系列角度值，我制作了一个直方图。有没有一种有效的方法来计算平均值和模态（后可能）值？考虑以下示例：

```
import numpy as N, cmath
deg = N.pi/180.
d = N.array([-175., 170, 175, 179, -179])*deg
i = N.sum(N.exp(1j*d))
ave = cmath.phase(i)
i /= float(d.size)
stdev = -2\. * N.log(N.sqrt(i.real**2 + i.imag**2))

print ave/deg, stdev/deg 
```

现在，让我们有一个直方图：

```
counts, bins = N.histogram(data, N.linspace(-N.pi, N.pi, 360)) 
```

是否可以计算具有计数和 bin 的平均值、模式？对于非周期性数据，平均值的计算很简单：

```
ave = sum(counts*bins[:-1]) 
```

模态值的计算需要更多的努力。实际上，我不确定下面的代码是否正确：首先，我确定最常出现的 bin，然后计算算术平均值：

```
cmax = bins[N.argmax(counts)]
mode = N.mean(N.take(bins, N.nonzero(counts == cmax)[0])) 
```

不过，我不知道如何根据这些数据计算标准偏差。解决我所有问题（至少是上述问题）的一个明显解决方案是将直方图数据转换为数据系列，然后在计算中使用它。然而，这并不优雅，而且效率低下。

任何提示将不胜感激。

* * *

这是我写的部分解决方案。

```
import numpy as N, cmath
import scipy.stats as ST

d = [-175, 170.2, 175.57, 179, -179, 170.2, 175.57, 170.2]
deg = N.pi/180.
data = N.array(d)*deg

i = N.sum(N.exp(1j*data))
ave = cmath.phase(i)  # correct and exact mean for periodic data
wrong_ave = N.mean(d)

i /= float(data.size)
stdev = -2\. * N.log(N.sqrt(i.real**2 + i.imag**2))
wrong_stdev = N.std(d)

bins = N.linspace(-N.pi, N.pi, 360)
counts, bins = N.histogram(data, bins, normed=False)
# consider it weighted vector addition
nz = N.nonzero(counts)[0]
weight = counts[nz]
i = N.sum(weight * N.exp(1j*bins[nz])/len(nz))
pave = cmath.phase(i)  # correct and approximated mean for periodic data
i /= sum(weight)/float(len(nz))
pstdev = -2\. * N.log(N.sqrt(i.real**2 + i.imag**2))
print
print 'scipy: %12.3f (mean) %12.3f (stdev)' % (ST.circmean(data)/deg, \
                                               ST.circstd(data)/deg) 
```

运行时，它会给出以下结果：

```
 mean:      175.840       85.843      175.360
stdev:        0.472      151.785        0.430

scipy:      175.840 (mean)        3.673 (stdev) 
```

现在有一些评论：第一列给出了计算的平均值/标准差。可以看出，平均值与 scipy.stats.circmean 非常吻合（感谢 JoeKington 指出）。不幸的是 stdev 不同。我稍后会看的。第二列给出了完全错误的结果（来自 numpy 的非周期性平均值/标准显然在这里不起作用）。第三列给出了我想从直方图数据中获得的东西（@JoeKington：我的原始数据不适合我的计算机内存......，@dmytro：感谢您的输入：当然，bin 大小会影响结果，但在我的应用程序我没有太多选择，即我必须以某种方式减少数据）。可以看出，均值（第 3 列）计算正确，stdev 需要进一步注意 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:06:41.900

看看`scipy.stats.circmean`和`scipy.stats.circstd`。

或者你只有直方图计数，而不是“原始”数据？如果是这样，您可以将[Von Mises 分布](http://en.wikipedia.org/wiki/Von_Mises_distribution)拟合到您的直方图计数中，并以这种方式近似均值和标准差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:08:44.433

这是获得近似值的方法。

由于`Var(x) = <x^2> - <x>^2`，我们有：

```
meanX = N.sum(counts * bins[:-1]) / N.sum(counts)
meanX2 = N.sum(counts * bins[:-1]**2) / N.sum(counts)
std = N.sqrt(meanX2 - meanX**2) 
```

# c - stat() 返回错误

> ID：10269132
> 
> 赞同：0
> 
> 时间：2012-04-22T15:15:04.283
> 
> 标签：c, stat, strftime, localtime

我必须知道文件夹中某些文件的修改日期。它有效，但不适用于所有类型的文件。例如，它适用于 .c、.txt，但不适用于其他类型，如 .mp4、.jpg 和 .mp3（我正在创建的应用程序通常必须适用于多媒体文件）。它打印“无法显示时间。”，所以我想问题出在 stat() 上。谢谢。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>
#include <string.h>
#include <time.h>
#include <sys/types.h>
#include <sys/stat.h>

char parola[12]="", hash[32]="", esadecimale[1000]="", system3[100]="./md5 ";
int i, len, len2;
int bytes;
char cwd[1024];

int main(void)
{
char t[100] = "";
struct stat b;
DIR *dp;
char destinationFolder[100] = "/Users/mattiazeni/Desktop/Prova/"; //Me la passa da sopra
struct dirent *dir_p;
dp = opendir(destinationFolder);
if ( dp == NULL ) exit(1);

len = strlen(destinationFolder);

for (i=0;i<len;i++) {
    system3[i+6]=destinationFolder[i];
}

while( ( dir_p = readdir(dp) ) != NULL ) {
    if (dir_p -> d_name[0] != '.') {
        //printf("%s\n", dir_p -> d_name);
        len2 = strlen(dir_p -> d_name);
        for (i=0;i<len2;i++) {
            if (dir_p -> d_name[i] == ' '){ //Mi serve per correggere i nomi dei file con spazi
                system3[i+len+6]='\\';   
            }
            else system3[i+len+6]=dir_p -> d_name[i];
        }
        system(system3); //Passa il valore a md5 che calcola l'hash e lo stampa nel file che ci serve insieme al persorso/nome del file

        FILE *fp;
        if((fp=fopen("userDatabase.txt", "ab"))==NULL) {
            printf("Error while opening the file..\n");
            fclose (fp);
        }
        else {
            if (!stat(dir_p -> d_name, &b)) {
            strftime(t, 100, "%d/%m/%Y %H:%M:%S", localtime( &b.st_mtime));         //C'è ancora qualche errore!!
            fprintf(fp, "%s", t);           
            }
            else {
                perror(0);
                fprintf(fp, "error");
            }
            fprintf(fp, " initialized");
            fprintf(fp, "\n");
        }
        fclose (fp);
        for (i=len+6;i<len+6+len2;i++) {
            system3[i]=' ';
        }
    }
}   
closedir(dp);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:25:17.900

使用`perror()`. 你也不应该使用`st_mtime`吗？

```
统计：
       成功时，返回零。
       出错时，返回 -1，并适当*设置 errno 。*
```

99% 肯定是因为`dir_p -> d_name`不存在，而这又可能是由于本地化问题。

您可以执行以下操作：

```
fprintf(stderr, 
        "Unable to stat %s\n",
        dir_p->d_name); 
perror(0); 
```

还; 如果您正在检查文件状态`->f_name`，不应该是这样吗？`->d_name`- （*除非您使用 d_name 作为文件名。*）

你`fclose(fp)`的不在你的`fp == NULL`检查范围内。由于您不返回或以其他方式中止流程，因此如果`fopen`失败，您将面临 SIGSEGV 风险。

* * *

编辑：你对这样的事情有什么好处？

```
#include <unistd.h>

char cwd[1024];

...  

} else {
    fprintf(stderr,
            "Unable to stat '%s'\n",
            dir_p->d_name);
    perror(0);

    if (getcwd(cwd, sizeof(cwd)) == NULL) {
        perror("getcwd() error");
    } else {
        fprintf(stderr,
                "in directory  '%s'\n",
                cwd);
    }
} 
```

* * *

编辑2：

第一的; 我说`getcwd() != NULL`应该`==`。硒变化。（对我不好。）

您的代码中的问题。（还有更多）但关于 stat - 你使用 d_name from `readdir`。这*只是*文件名；不是目录+文件名。因此; 你得到即：

```
stat(dir_p->d_name, ...) 
```

变成即：

```
stat("file.mp4", ...) 
```

最简单的快速修复（虽然脏）是：

```
/* you need to terminate the system string after your for loop */
system3[i + len + 6] = '\0';

system(system3);

if (!stat(system3 + 6, &b)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:54:45.527

这是最终的工作代码，用于扫描目录中的文件，并将它们打印在带有修改日期的 txt 输出文件中：

```
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>
#include <string.h>
#include <time.h>
#include <sys/types.h>
#include <sys/stat.h>

char system3[6]="./md5 ";

int main(void)
{
char t[100] = "";
char bigbuff[200];
struct stat b;
char destinationFolder[100] = "/Users/mattiazeni/Desktop/Prova"; //Me la passa da sopra
DIR *dp;
struct dirent *dir_p;
dp = opendir(destinationFolder);
if ( dp == NULL ) exit(1);
while( ( dir_p = readdir(dp) ) != NULL ) {
    if (dir_p -> d_name[0] != '.') {
        sprintf( bigbuff, "%s%s/%s",system3, destinationFolder, dir_p->d_name);
        system(bigbuff); 

        FILE *fp;
        if((fp=fopen("userDatabase.txt", "ab"))==NULL) {
            printf("Error while opening the file..\n");
            fclose (fp);
        }
        else {
            sprintf( bigbuff, "%s/%s", destinationFolder, dir_p->d_name);
            if (!stat(bigbuff, &b)) {
            strftime(t, 100, "%d/%m/%Y %H:%M:%S", localtime( &b.st_mtime));         //C'è ancora qualche errore!!
            fprintf(fp, "%s", t);           
            }
            else {
                perror(0);
                fprintf(fp, "error");
            }
            fprintf(fp, "\n");
        }
        fclose (fp);
    }
}   
closedir(dp);
return 0;
} 
```

感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T18:51:19.537

您应该使用 stat() 的完整路径名。Stat 不知道您对哪个目录感兴趣。

```
... 
char  bigbuff[PATH_MAX];

sprintf( bigbuff, "%s/%s", destinationFolder, dir_p->d_name);

rc = stat (bigbuff, &b);
... 
```

# objective-c - animationForKey 上的 EXC_BAD_ACCESS：

> ID：10269133
> 
> 赞同：0
> 
> 时间：2012-04-22T15:15:29.600
> 
> 标签：objective-c, cocoa, exc-bad-access, quartz-graphics, cagradientlayer

我正在尝试使用**Scintilla 组件**的最新功能，它提供类似 OSX 的文本突出显示效果（黄色动画弹跳框），但我遇到了间歇性弹出的错误：

> **EXC_BAD_ACCESS**

指向这个特定的行：

```
if (layerFindIndicator!=nil)
        if ([layerFindIndicator animationForKey:@"animateFound"])
            [layerFindIndicator removeAnimationForKey:@"animateFound"]; 
```

（`if`s 是我的；以防万一我发现对象`layerFindIndicator`为零，或被释放或其他什么......不幸的是，它无济于事......）

`layerFindIndicator`似乎是 的子类`CAGradientLayer`。[（您可能会在此处](http://pastebin.com/kLzhT5C7)看到完整的代码`layerFindIndicator`）。

因为，我是**Quartz Core**的绝对新手，请给我任何关于如何调试的提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T18:31:31.600

> 因为，我是 Quartz Core 的绝对新手，请给我任何关于如何调试它的提示？

这与 QuartzCore 没有任何关系（至少，我希望不是）——这是一般的 this-object-has-been-killed-before-its-time-how-do-I-find-the-killer 的东西.

在 Xcode 中：

1.  编辑您当前的方案。
2.  对于 Profile 操作，将其设置为使用 Debug 构建配置。
3.  关闭它，然后点击 Profile 命令。

Xcode 将为该操作构建，然后启动 Instruments。

Instruments 会提示您选择模板；你想要僵尸模板。一旦您选择了它，Instruments 将创建一个跟踪文档并运行您的应用程序。切换到您的应用程序（如果它还不是最前面的），然后执行任何导致崩溃的操作。

如果坠机真的是死物坠机，僵尸会揭露它。你会在 Instruments 的时间线上得到一个标志，上面写着“发送到僵尸对象 0xd3c2b1a0 的消息”，然后你的程序可能很快就会退出。

那个标志中有一个小按钮，看起来像这样： ➲ 除了它是灰色的。点击它。

这会将您带到**该对象的历史记录**（实际上是该地址的历史记录，包括任何以前的对象或从该地址开始的其他分配）。显示您的扩展详细信息窗格（出现在右侧显示堆栈跟踪的那个），然后向下滚动到最后，然后逐步向后（向上）移动，查看发布和自动发布，寻找一个'不平衡对象的分配或保留。

该解决方案可能涉及以下一项或多项：

*   将属性更改为`strong`或`weak`而不是`assign`/`unsafe_unretained`
*   在您之前没有强烈拥有对象的位置添加属性
*   重新架构一些东西，如果不清楚你需要做上述哪一项，或者其中任何一项看起来像一个肮脏的黑客
*   切换到 ARC 以获取`weak`属性和`__weak`实例变量（当被引用的对象死亡时，这两者都会`nil`自动设置为）并让局部变量被隐式初始化为`nil`

但这取决于您在 Instruments 中找到的内容。而且，当然，您的问题（错误的访问权限）有可能根本不是一个死对象，以上所有内容都对您没有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T15:33:25.280

试试这个：

```
if (layerFindIndicator!=nil){
    if ([layerFindIndicator animationForKey:@"animateFound"]){
        [layerFindIndicator removeAnimationForKey:@"animateFound"];
    }
} 
```

还要检查它是否被释放。

编辑：

我发现的另一件事是你在 if 中没有空格。您的代码现在应该如下所示：

```
if (layerFindIndicator != nil){
    if ([layerFindIndicator animationForKey:@"animateFound"]){
        [layerFindIndicator removeAnimationForKey:@"animateFound"];
    }  
} 
```

# java - Java 扫描程序问题

> ID：10269134
> 
> 赞同：1
> 
> 时间：2012-04-22T15:15:31.413
> 
> 标签：java, java.util.scanner

我在使用 java 读取文本文件时遇到问题。文本文件具有以下格式：

```
String
String
String
String

Int 
Int
Int 
Int 
```

每个 String 和 int 值在末尾都有一个换行符，在字符串和整数之间有一个空行。我想将每个字符串值保存到一个字符串数组中，但我不太清楚如何让扫描仪在空行处停止。我尝试了各种方法，例如直到有一个 int，直到 hasNext 的值为“”，并尝试仅读取字符串但没有任何效果。有人可以提供任何帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T15:26:23.137

从您的示例中不确定您是否正好有 4 `String`s 和 4 `Integer`s 或更多，所以类似下面的东西应该可以工作：

```
List<String> strings = new ArrayList<String>();
List<Integer> ints = new ArrayList<Integer>();

while(scanner.hasNext() && !scanner.hasNextInt()) {
    strings.add(scanner.next());
}
while(scanner.hasNextInt()) { // If you also want to store the ints
    ints.add(scanner.nextInt());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:22:52.923

```
while (mScanner.hasNextLine()){
    String line = mScanner.nextLine();
    if (line.length() == 0)
        break;
    else
        mArrayList.add(line);//do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:26:01.017

```
public static void main (String [] args)
{
    Scanner sc = new Scanner (System.in);
    int count = 0;
    while (sc.hasNext ())
    {
        String s = sc.next ();
        ++count;
        System.out.println (count + ": " + s);
        if (count == 4) 
            break;
    }
    while (sc.hasNext ())
    {
        int i = sc.nextInt ();
        System.out.println (count + ": " + i);
    }
} 
```

猫狗

```
Foo

Bar

Foobar

Baz

1

2

4

8 
```

测试：cat dat | java ScanIt

```
1: Foo
2: Bar
3: Foobar
4: Baz
4: 1
4: 2
4: 4
4: 8 
```

如您所见，从最初的问题来看，我对文件格式的想法略有不同，但您会看到：我对换行符或空换行符没有做任何特别的事情。

所以这个程序也应该适合你。

# c# - 使用 response.outputstream.write 时系统不支持异常

> ID：10269137
> 
> 赞同：1
> 
> 时间：2012-04-22T15:15:54.723
> 
> 标签：c#, httpresponse

我正在开发一个 Web 应用程序，该应用程序使用控件从其位置获取文件并返回一些字节。我现在想使用 server.transfer 将这些字节传递到下一页。所以我调用 response.outputstream.write() 并传入字节。

但是，当我调试应用程序时，我收到“System.NotSupportedException”异常消息，并且长度和大小为空。任何想法可能导致此问题？

```
file = System.IO.File.ReadAllBytes(filepath);
Response.OutputStream.Write(file, 0, file.Length);
Server.Transfer(URL, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T15:17:13.810

只是因为这是我刚才遇到的事情。确保你不放

```
Writer.Flush(); 
```

前

```
OutputStream.Write(); 
```

我犯了这个错误，它给了我与这个问题中发布的相同的错误。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:26:29.313

你可以这样做：

```
Page.Response.Clear();
Page.Response.Buffer = false;
Page.Server.ScriptTimeout = 3000;

Page.Response.ContentType = sContentType;
Page.Response.AddHeader("Content-Disposition", "attachment; filename=\"" + sFilename + "\"");

FileInfo oFileInfo = new FileInfo(sSourceFullPath);
long lfull_size = oFileInfo.Length;
oFileInfo = null;

Page.Response.AddHeader("Content-length", lfull_size.ToString());

Page.Response.WriteFile(sSourceFullPath);
Page.Response.End(); 
```

我不确定你的问题在哪里。

# drupal - 带有最近帖子的用户模板

> ID：10269141
> 
> 赞同：3
> 
> 时间：2012-04-22T15:16:15.767
> 
> 标签：drupal, drupal-7, drupal-theming

我正在为 Drupal 7 开发一个自定义主题。我的问题是我不知道如何制作一个显示作者信息的页面，并且在信息下方是作者文章的列表。（例如，如果我去用户/我想查看具有给定 ID 的用户的个人资料，以及他/她的最新帖子）。那么最好的解决方案是什么？我尝试过创建 user-profile.tpl，没关系，但我不知道如何获取节点，我也不想制作 sql query-s，因为我认为有一个更漂亮的方法. 我也尝试过使用 Views，但我是 Drupal 的新手，大多数教程/说明都是针对 drupal 6 的（如果视图很简单，请给我写一个小指南）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:55:28.823

It'd be better to create a view that takes the uid as an argument.

# android - 在Android中解析xml节点内容

> ID：10269143
> 
> 赞同：0
> 
> 时间：2012-04-22T15:16:40.413
> 
> 标签：android, xml, parsing, ksoap2

当我收到以下格式的 SOAP Web 服务时，我设法解析了 xml 响应：

```
<node>data</node><node2>moredata</node2> 
```

我一直在使用文档生成器来帮助解决这个问题......

但是，我现在收到以下格式的字符串：

```
<session id='5643' spotName='Big Bay' starRating='3'></session> 
```

我实际上对如何获取会话数据一无所知，这是我想要的数据。

任何帮助表示赞赏...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:23:13.627

看看这个答案是否对你有帮助：

[https://stackoverflow.com/a/9254164/1204249](https://stackoverflow.com/a/9254164/1204249 "关联")

# java - 难以将实体实例从服务器传输到客户端

> ID：10269145
> 
> 赞同：0
> 
> 时间：2012-04-22T15:16:43.177
> 
> 标签：java, google-app-engine, entity

我有一个 Android 客户端和一个 Google App Engine Servlet。
我通过序列化将对象从客户端传输到服务器。
序列化适用于我项目中的所有序列化对象，
除了我保存在我的 JPA 数据库中的名为**Profile的实体对象。**
现在，当我将 Profile 实例从客户端传输到服务器时，它工作正常
，但是当我从服务器传输到客户端时，我得到如下所示的异常。

我会补充一点，我的代码中没有代码重复。
Profile 类在Server Project 中，Client 项目包含Server 的路径。

```
W/System.err(1104): java.io.InvalidClassException: javax.jdo.identity.LongIdentity; Incompatible class (SUID): javax.jdo.identity.LongIdentity: static final long serialVersionUID =2472141538875317527L; but expected javax.jdo.identity.LongIdentity: static final long serialVersionUID =2940818939440220368L; 
```

我的实体类是：

```
@Entity
public class Profile implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id 
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private int age;
    private String email;
    private boolean onlineStatus = false;

    public Profile() {}

    public Profile(int age,String email) 
    {
        super();
        this.age = age;
        this.email = email;
    }

    public int getAge() 
    {
        return age;
    }
    public void setAge(int age) 
    {
        this.age = age;
    }

    public String getEmail() 
    {
        return email;
    }

    public void setEmail(String email) 
    {
        this.email = email;
    }

    public boolean isOnlineStatus() 
    {
            return onlineStatus; 
    }

    public void setOnlineStatus(boolean onlineStatus)
    {
        this.onlineStatus = onlineStatus;
    } 
```

完整的堆栈跟踪：

```
04-21 21:04:56.577: W/System.err(1104): at java.io.ObjectInputStream.verifyAndInit(ObjectInputStream.java:2697)
04-21 21:04:56.577: W/System.err(1104): at java.io.ObjectInputStream.readNewClassDesc(ObjectInputStream.java:1825)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:811)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:2039)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:916)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readNewArray(ObjectInputStream.java:1678)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:914)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
04-21 21:04:56.592: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readFieldValues(ObjectInputStream.java:1291)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:518)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readObjectForClass(ObjectInputStream.java:1535)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1443)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:2112)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:916)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readNewArray(ObjectInputStream.java:1678)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:914)
04-21 21:04:56.597: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.readFieldValues(ObjectInputStream.java:1291)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:518)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.readObjectForClass(ObjectInputStream.java:1535)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1443)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:2112)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:916)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
04-21 21:04:56.607: W/System.err(1104): at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
04-21 21:04:56.607: W/System.err(1104): at streetMeet.Client.CustomHttpClient.readObject(CustomHttpClient.java:274)
04-21 21:04:56.607: W/System.err(1104): at streetMeet.Client.CustomHttpClient.executeHttpPost(CustomHttpClient.java:59)
04-21 21:04:56.607: W/System.err(1104): at streetMeet.Client.StreetMeetActivity.connectToServer(StreetMeetActivity.java:154)
04-21 21:04:56.607: W/System.err(1104): at streetMeet.Client.StreetMeetActivity.sendMessageToServer(StreetMeetActivity.java:141)
04-21 21:04:56.607: W/System.err(1104): at map.StreetMapActivity$1.run(StreetMapActivity.java:116) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:24:16.930

请注意，Java 对象序列化不能保证在不同的 VM 实现之间工作（在这种情况下是 GAE JVM 和 Android Dalvik）。

您应该使用与平台无关的格式进行序列化。最受欢迎的是 JSON。

# android - 在 PopUpWindow 之后没有任何反应

> ID：10269148
> 
> 赞同：0
> 
> 时间：2012-04-22T15:16:59.533
> 
> 标签：android, button, popupwindow, onclicklistener

我之前发送过这个问题，但我删除了它，因为我要粘贴更多代码。

我的问题是单击时出现 PopupUpWindow 并出现 2 个按钮。因此，这两个按钮具有 OnClick，但没有任何反应。我要粘贴我的代码：

```
 // PopupWindow de Exit

    Button exit=(Button) findViewById(R.id.button1);
    popUpView = getLayoutInflater().inflate(R.layout.estadisticaspopupwindowexit, null); 
    mpopup = new PopupWindow(popUpView, LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, true);

    exit.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View v) {
            System.out.println("no clicked");//For checking that it's ok
            mpopup.showAtLocation(popUpView, Gravity.BOTTOM, 0, 0);
            // UNTIL HERE IT'S OK
            View viewexit = (LinearLayout) factory.inflate(R.layout.estadisticaspopupwindowexit, null);
            Button si=(Button) viewexit.findViewById(R.id.buttonyes);
            Button no=(Button) viewexit.findViewById(R.id.buttonno);

            // THESE ARE BUTTONS CALLED FROM ANOTHER XML FILE

            si.setOnClickListener(new View.OnClickListener(){                   
                @Override
                public void onClick(View v) {
                    Intent intencion=new Intent(estadisticas.this, datosusuario.class);
                    startActivity(intencion);
                }

            });
            no.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v){
                    mpopup.dismiss();
                    System.out.println("no clicked"); 
// I'M WRITING THE LAST THING FOR CHECKING ON MY LOGCAST IF IT REALLY WORKS, BUT NOTHING HAPPENS

                }
            }); 

        }

    }); 
```

这就是一切。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:43:11.317

您可以使用[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)获得相同的结果。这是显示带有两个按钮的弹出窗口的示例代码：

```
public class UIHelper {
   public static void createInformationalAlert(Context context,
        DialogInterface.OnClickListener positiveButtononClickListener,
        DialogInterface.OnClickListener negativeButtononClickListener,
        String content, String positiveButtonCaption,
        String negativeButtonCaption) {
    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setMessage(content)
            .setPositiveButton(positiveButtonCaption,
                    positiveButtononClickListener)
            .setNegativeButton(negativeButtonCaption, negativeButtononClickListener);
    AlertDialog alertDialog = builder.create();
    alertDialog.show();
}
} 
```

然后，要显示弹出窗口，请使用以下代码：

```
UIHelper.createInformationalAlert(this,
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            }, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            }, "Are you sure you want to exit?", "Yes", "No"); 
```

如果您希望为自定义视图充气，请使用[setView(View)](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setView%28android.view.View%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:22:43.947

也许你应该使用

```
Button si=(Button) popUpView.findViewById(R.id.buttonyes);
Button no=(Button) popUpView.findViewById(R.id.buttonno); 
```

# iphone - iPhone如何以编程方式估计一组关键字的谷歌搜索引擎流量？

> ID：10269156
> 
> 赞同：0
> 
> 时间：2012-04-22T15:18:10.913
> 
> 标签：iphone, google-analytics, search-engine, traffic

我得到了一组用户可以输入的关键字：keyword1,keyword2,keyword3,... 最多 10 个关键字

我正在寻找一种方法来估算这些关键字的 Google 搜索引擎流量。我很想一次或一个一个地使用所有这些关键字发出一个 GET 请求，并向用户显示搜索引擎的数量。

**是否有来自 google 的 Web API 可用于查询关键字搜索引擎量？**

如果没有这样的 API，我不介意打开某种基于 Web 的搜索引擎工具并将关键字传递给它，以便用户可以在 webView 中查看结果。这可能吗？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:28:47.853

谷歌有一个小工具，这个工具太小了，他们并没有真正的 api！但是您可以通过从 webview 获取文本然后在 TextView 中显示它来使其看起来集成。

链接：[http ://www.google.com/trends/hottrends](http://www.google.com/trends/hottrends)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:30:41.390

您可以将[流量估算器](https://developers.google.com/adwords/api/docs/reference/latest/TrafficEstimatorService)服务与 Adwords API 一起使用。

# database - 如何使用 Mac Lion 中嵌入的 postgres 数据库？

> ID：10269164
> 
> 赞同：1
> 
> 时间：2012-04-22T15:19:04.190
> 
> 标签：database, macos, postgresql

我只能找到 psql 命令，但找不到任何其他 postgres 命令或工具，谁能告诉我如何创建数据库并使用 mac lion 附带的默认 postgres 连接到它？

只有当它不起作用时，我才不想安装另一个 postgres 实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:27:30.190

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T00:47:44.417

如果您没有安装该软件，我强烈推荐[Enterprise DB](http://www.enterprisedb.com/products-services-training/pgdownload#osx)软件包。它使安装非常容易。

# c# - 将数据发布到服务器，然后解析 HTML 代码 C#

> ID：10269167
> 
> 赞同：0
> 
> 时间：2012-04-22T15:19:21.160
> 
> 标签：c#, html, html-parsing

我正在尝试解析一个网站。唯一的问题是该站点没有使用我不想解析的站点的特定 URL。内容在同一网页上使用 JavaScript 显示到站点，因此内容因搜索查询而异。

是否可以从下拉菜单中选择一个值，然后将其发布到服务器，然后在 C# 中解析 HTML 代码？

说明：代码以 HTML 形式返回。我从要发布的下拉列表中知道选项的名称，但是如何从代码隐藏中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:47:59.970

[你肯定需要检查 Selenium](http://seleniumhq.org/)，它正是你需要的。它通常用作测试框架。但是，即使网站使用 javascript，您也可以使用它来操作 HTML 标签。

**注意**：Selenium 允许您使用 FireFox、Chrome、IE 等浏览器打开和操作网站。但是，我认为您需要使用 WebDriver，它可以在不打开浏览器的情况下操作网站。我使用 Selenium 的大部分经验都来自 Java，但我也在网上找到了多个 .net 教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:27:04.747

大多数网站并没有真正在 Javascript 中生成 HTML。您经常会看到使用 Javascript 进行回发的 Asp.Net 站点（并且下拉列表的名称回发在 __EVENTTARGET 字段中）

然后你可以在你的应用程序中做同样的事情——你必须模仿填写表格——将所有字段传递给服务器，包括 VIEWSTATE 和 EVENTTARGET。

话虽如此，这可能违反了网站的使用条款。

# html - 在上一个兄弟的左边浮动下一个兄弟

> ID：10269168
> 
> 赞同：13
> 
> 时间：2012-04-22T15:19:27.290
> 
> 标签：html, css, internet-explorer-6, css-float

我不知道如何或是否可以使用 Internet Explorer 6 来完成。

我正在尝试将下一个兄弟姐妹浮动到前一个兄弟姐妹的左侧

这就是我正在做的事情，它可以在 chrome 6、opera 9 和 firefox 1+ 上正确显示。

IE6 的问题是它`previous (2)`浮动到最右边（最好`next (1)`在页面左侧。

```
 .wrap{float:left;}
 .prev {float:right;}
 .next {float:left;}

 <div class="wrap">
 <div class="prev">previous (2)</div><div class="next">next (1)</div>
 </div> 
```

如果可以完成并且您知道该怎么做，我将给予 250 分的赏金

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T13:55:52.460

给你：[http ://result.dabblet.com/gist/2489753](http://result.dabblet.com/gist/2489753)

你不能在那里使用浮动，因为 IE 有一个讨厌的错误，它会将浮动的容器拉伸到左边（或者是`inline-block`），如果它包含`float: right;`.

但是，有一个很少使用的属性`direction`，可用于此类布局：它完全跨浏览器，您可以将其与`inline-block`s 一起使用以获得最佳效果。

因此，对于您的情况，代码将是这样的：

```
.wrap{
    display: inline-block;
    direction: rtl;
    }
.prev,
.next {
    display: inline-block;
    direction: ltr;
    } 
```

但是`display: inline-block`它不适用于 IE，因此您需要通过使其内联但使用 hasLayout 来破解它，因此仅在条件注释中将它们添加到 IE：

```
.wrap,
.prev,
.next {
    display: inline;
    zoom: 1;
    } 
```

就是这样！

一步步：

1.  使所有内容都成为内联块，因此它可以在内联流中工作。
2.  反转包装器上的流动。
3.  在子级中将流程返回到正常的 ltr 模式。
4.  完成 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:21:48.867

我不记得这个技巧是否适用于 IE6。

```
.wrap{float:left;}
.next {float:left;}
.prev {overflow:hidden} 
```

我认为你不需要`.wrap{float:left;}`

```
<div class="wrap">
    <div class="next">next (1)</div>
    <div class="prev">previous (2)</div>
</div> 
```

这种方式得到浮动`.prev`后留下的宽度。`.left`

演示：

包裹浮动：http: [//jsbin.com/exevis](http://jsbin.com/exevis)

没有包裹浮动：http: [//jsbin.com/opehig](http://jsbin.com/opehig)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T22:07:15.690

请记住，方向属性旨在指示诸如希伯来语之类的语言的文本方向，而不是布局内容。虽然 kizu 的回答在处理 ie6 的怪物时非常聪明，但我建议您将其包装在一个条件中并确保记录该 hack，即使您是页面上唯一的开发人员。只需要几个月的时间，也许还有一些马提尼酒就可以启动，而且这种实现看起来很荒谬。

# c++ - 无法与自由链接

> ID：10269171
> 
> 赞同：1
> 
> 时间：2012-04-22T15:19:56.230
> 
> 标签：c++, linux, static-libraries

我正在尝试从 libiberty.a 调用 cplus_demangle() 函数，但我收到“未定义对 'cplus_demangle' 的引用”错误。

这是我的简单主要内容：

```
extern "C" char *cplus_demangle(const char *, int);

int main() {
  cplus_demangle("a", 0);
} 
```

和我的构建命令（libiberty 在 ../../install/lib64 中）：

```
g++ -L../../install/lib64 -liberty main.cpp -o main 
```

如果我将 libiberty.a 重命名为其他名称，我会收到“找不到 -liberty”错误。所以，我假设链接器看到了库。我可以在 libiberty.a 中看到 cplus_demangle：

```
$> nm -C --defined-only libiberty.a | grep "cplus_demangle"
0000000000002230 T cplus_demangle
... 
```

但是当我编译时出现此错误：

```
main.cpp:(.text+0xf): undefined reference to `cplus_demangle'
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

我会很感激你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T15:23:26.853

将 -liberty 移动到命令行的末尾。创建 main.o 后应搜索该库。订单很重要。

# sql - 通过所有存储过程使用搜索/替换的最快/最简单的方法

> ID：10269172
> 
> 赞同：18
> 
> 时间：2012-04-22T15:19:56.150
> 
> 标签：sql, sql-server, sql-server-2008

实际上，这是一个两部分的问题。

1.  是否可以使用某种功能在每个存储过程中搜索字符串并可能替换它，例如标准的 Find/Replace 函数？

2.  如果您的所有存储过程代码都包含这样的完整数据库路径，`[db1].[dbo].[table1]`并且您将数据库名称更改`[db2]`为 SQL Server 是否可以自动将所有代码从`[db1]`表更新为`[db2]`？还是必须手动完成？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-22T19:56:20.647

从 SSMS 的“对象资源管理器详细信息”窗口中，打开存储过程文件夹。选择所有对象（您可以从此窗口中进行多选，这几乎是“对象资源管理器详细信息”窗口的唯一用途）并右键单击，选择脚本为 DROP 和 CREATE。您现在可以对此进行搜索/替换，在执行之前一次性替换您需要的所有内容。

编辑：我已经[写了关于这个解决方案的博客](https://www.red-gate.com/simple-talk/blogs/ever-wondered-what-the-object-explorer-details-window-is-for/)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-26T14:32:59.197

迟到但希望有用。

ApexSQL有一个[免费的搜索工具](http://www.apexsql.com/sql_tools_search.aspx)，可以在数据库中查找和重命名对象。

他们说它有一个智能重命名选项，可以查找/替换所有出现的某些对象，例如表、函数或存储过程。

我必须补充一点，我没有使用重命名功能，但我可以确认搜索运行良好。

此外，我不隶属于 ApexSQL，但我确实使用他们的工具。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-22T16:05:24.277

搜索：如果您需要按名称查找数据库对象（例如表、列、触发器） - 请查看名为[SQL Search的](http://www.red-gate.com/products/sql-development/sql-search/)**免费**Red-Gate 工具，它会在整个数据库中搜索任何类型的字符串（s ）。

![在此处输入图像描述](../Images/06aa8195296565da03113074a84f9fa1.png)

![在此处输入图像描述](../Images/2b38d4018a9fbf766a665542ad2c611d.png)

对于任何 DBA 或数据库开发人员来说，它都是必不可少的工具——我是否已经提到它完全**免费**用于任何用途？

但是，此工具不支持替换文本 - 但即使只是能够*找到*所有相关的存储过程（或其他 DB 对象）也确实非常有用！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-22T15:29:22.403

1.  将所有 SP 导出到文件。使用您喜欢的文本编辑工具进行搜索/替换。通过执行脚本更新数据库（只要您不重命名过程）。

2.  如果显式定义完整的数据库路径，则需要手动（见上文）更新存储过程。如果您不包括数据库名称，或使用链接服务器或类似服务器，则无需进行任何更改。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-22T15:36:36.737

`ALTER PROCEDURE`如果不先将存储过程编写为语句（或者`DROP/CREATE`，但我更喜欢`ALTER PROCEDURE`稍后再详细介绍），就无法更新存储过程。好消息是，您可以通过 SSMS 将所有程序编写到一个文件中。DDL 语句最初将是`CREATE PROCEDURE`，您希望将其替换为`ALTER PROCEDURE`，以及您的其他更改。

虽然您也可以将过程编写为`DROP/CREATE`，但我不喜欢对大量脚本执行此操作，因为它往往会导致依赖性错误。

至于问题的第 2 部分，您需要通过脚本手动编辑任何数据库路径更改。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-23T15:14:02.770

您可以使用此搜索存储过程定义的文本

```
SELECT 
  Name 
FROM 
  sys.procedures 
WHERE 
   OBJECT_DEFINITION(OBJECT_ID) LIKE '%YourSearchText%' 
```

替换通常是一个坏主意，因为您不知道您将在存储过程中找到的文本的上下文。虽然通过 Powershell 脚本可能是可能的。

与其他任何解决方案相比，我更喜欢这个解决方案，因为我很喜欢编写查询 - 因此在所有存储的过程中查找文本，即模式 (x) 和数据库 (y) 以及以 (z) 开头的名称是非常简单和直观的询问。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-23T19:47:39.597

我找到了这个脚本，您可以在其中定义文本搜索和替换，然后简单地运行它以一次在所有过程中替换文本。我希望这对你有大量帮助。

```
-- set "Result to Text" mode by pressing Ctrl+T
SET NOCOUNT ON

DECLARE @sqlToRun VARCHAR(1000), @searchFor VARCHAR(100), @replaceWith VARCHAR(100)

-- text to search for
SET @searchFor = '[MY-SERVER]'
-- text to replace with
SET @replaceWith = '[MY-SERVER2]'

-- this will hold stored procedures text
DECLARE @temp TABLE (spText VARCHAR(MAX))

DECLARE curHelp CURSOR FAST_FORWARD
FOR
-- get text of all stored procedures that contain search string
-- I am using custom escape character here since i need to espape [ and ] in search string
SELECT DISTINCT 'sp_helptext '''+OBJECT_SCHEMA_NAME(id)+'.'+OBJECT_NAME(id)+''' ' 
FROM syscomments WHERE TEXT LIKE '%' + REPLACE(REPLACE(@searchFor,']','\]'),'[','\[') + '%' ESCAPE '\'
ORDER BY 'sp_helptext '''+OBJECT_SCHEMA_NAME(id)+'.'+OBJECT_NAME(id)+''' '

OPEN curHelp

FETCH next FROM curHelp INTO @sqlToRun

WHILE @@FETCH_STATUS = 0
BEGIN
   --insert stored procedure text into a temporary table
   INSERT INTO @temp
   EXEC (@sqlToRun)

   -- add GO after each stored procedure
   INSERT INTO @temp
   VALUES ('GO')

   FETCH next FROM curHelp INTO @sqlToRun
END

CLOSE curHelp
DEALLOCATE curHelp

-- find and replace search string in stored procedures 
-- also replace CREATE PROCEDURE with ALTER PROCEDURE
UPDATE @temp
SET spText = REPLACE(REPLACE(spText,'CREATE PROCEDURE', 'ALTER PROCEDURE'),@searchFor,@replaceWith)

SELECT spText FROM @temp
-- now copy and paste result into new window
-- then make sure everything looks good and run
GO 
```

这是参考链接：
[http ://www.ideosity.com/ourblog/post/ideosphere-blog/2013/06/14/how-to-find-and-replace-text-in-all-stored-procedures](http://www.ideosity.com/ourblog/post/ideosphere-blog/2013/06/14/how-to-find-and-replace-text-in-all-stored-procedures)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-04T20:57:49.153

**更新** 我刚刚意识到大卫答案中的链接包括搜索功能。再次，这是一个很好的答案。

* * *

[大卫阿特金森的](https://stackoverflow.com/a/10271573/2055187)回答很棒，只是想添加搜索部分。（不知道什么时候在SSMS中添加了搜索，我的版本是SSMS V17.9.1）

我可以进行搜索，而不是一一选择存储过程。

*   搜索采用通配符，类似于 TSQL 中的 'like'

[![在此处输入图像描述](../Images/4adc85f384c66dbf8b76d560eaf2def3.png)](https://i.stack.imgur.com/IPhTf.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-18T17:50:38.863

我只是运行此代码以在所有存储过程中查找特定文本：

```
SELECT DISTINCT 
   o.name AS Object_Name,
   o.type_desc
 FROM sys.sql_modules m 
   INNER JOIN 
   sys.objects o 
     ON m.object_id = o.object_id
WHERE m.definition Like '%textToFind%'
   or m.definition Like '%\[ifTextIsAColNameWithBrackets\]%' ESCAPE '\'; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-01-31T16:06:43.667

这是我今天为帮助服务器升级项目而写的一篇。

在服务器上的所有用户数据库中搜索所有存储的过程和视图，并自动将搜索字符串替换为另一个。非常适合更改硬编码的链接服务器名称等：

```
set nocount on

if OBJECT_ID('tempdb..#dbs') is not null
    drop table #dbs

if OBJECT_ID('tempdb..#objects') is not null
    drop table #objects

declare @find as nvarchar(128) = 'Monkey'
declare @replace as nvarchar(128) = 'Chimp'

declare @SQL as nvarchar(max)
declare @current_db as sysname
declare @current_schema as sysname
declare @current_object as sysname
declare @current_type as char(2)
declare @current_ansi as bit
declare @current_quot as bit
declare @fullname as sysname
declare @preamble as nvarchar(128)

create table #objects
    (
     dbname sysname, 
     schemaname sysname, 
     objname sysname,
     objtype char(2),
     ansinulls bit,
     quotedidentifier bit
     )
create unique clustered index i on #objects (dbname, schemaname, objname)

select [name] into #dbs 
from master.sys.databases
where [name] not in ('master','tempdb','model','msdb','ReportServer','ReportServerTempDB', 'SSISDB')

declare db_cursor cursor for select [name] from #dbs order by [name]
open db_cursor
fetch next from db_cursor into @current_db

while @@FETCH_STATUS = 0
begin
    set @SQL = 'insert into #objects select ''' + @current_db + ''', s.[name], o.[name], o.[type], m.uses_ansi_nulls, m.uses_quoted_identifier from ' + @current_db + '.sys.sql_modules as m '
             + 'join ' + @current_db + '.sys.objects AS o ON m.object_id = o.object_id '
             + 'join ' + @current_db + '.sys.schemas AS s ON o.schema_id = s.schema_id '
             + 'where m.definition like ''%' + @find + '%'' and type in (''P'', ''V'') and is_ms_shipped = 0 order by s.[name], o.[name]'

    exec sp_executeSQL @SQL
    fetch next from db_cursor into @current_db
end
close db_cursor
deallocate db_cursor

declare obj_cursor cursor for select dbname, schemaname, objname, objtype, ansinulls, quotedidentifier from #objects order by dbname, objname
open obj_cursor
fetch next from obj_cursor into @current_db, @current_schema, @current_object, @current_type, @current_ansi, @current_quot

while @@FETCH_STATUS = 0
begin
    set @fullname =  @current_db + '.' + @current_schema + '.' + @current_object

    set @preamble = CASE WHEN @current_ansi = 1 THEN 'SET ANSI_NULLS ON' ELSE 'SET ANSI_NULLS OFF' END + '; ' 
                  + CASE WHEN @current_quot = 1 THEN 'SET QUOTED_IDENTIFIER ON' ELSE 'SET QUOTED_IDENTIFIER OFF' END + '; ' 

    print 'Altering ' + @fullname 

    if @current_type = 'P'
    begin
        set @SQL = 'use ' + @current_db + '; ' + @preamble + 'declare @newproc nvarchar(max);'
                 + 'set @newproc = REPLACE(REPLACE(OBJECT_DEFINITION(OBJECT_ID(''' + @fullname + ''')), ''' + @find + ''', ''' + @replace + '''), ''CREATE PROCEDURE'', ''ALTER PROCEDURE''); '
                 + 'exec sp_executeSQL @newproc' 
        exec sp_executeSQL @SQL               
    end

    if @current_type = 'V'
    begin
        set @SQL = 'use ' + @current_db + '; ' + @preamble + 'declare @newproc nvarchar(max);'
                 + 'set @newproc = REPLACE(REPLACE(OBJECT_DEFINITION(OBJECT_ID(''' + @fullname + ''')), ''' + @find + ''', ''' + @replace + '''), ''CREATE VIEW'', ''ALTER VIEW''); '
                 + 'exec sp_executeSQL @newproc'        
        exec sp_executeSQL @SQL
    end
    fetch next from obj_cursor into @current_db, @current_schema, @current_object, @current_type, @current_ansi, @current_quot
end
close obj_cursor
deallocate obj_cursor 
```

它还处理特殊的 ANSI_NULL 和 QUOTED_IDENTIFIER 设置，并且可以扩展以处理各种类型的函数。

不过要小心！拥有权利的同时也被赋予了重大的责任...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-04-23T00:20:27.907

使用内置功能无法做到这一点。虽然今天对您没有帮助，但我建议您在其中更改所有对[同义词](http://msdn.microsoft.com/en-us/library/ms177544.aspx "同义词")的引用。这样，当这种情况在未来再次发生时（它会再次发生），您的所有外部引用都在一个地方并且很容易更新。顺便说一句，我有一篇关于后者的[博客文章。](http://www.spartansql.com/2012/04/changing-database-of-all-synonyms-in.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-08T11:39:40.647

如果您有可用的停机时间。

进入“生成脚本”并为您要编辑的所有存储过程生成“创建”脚本。

替换脚本中的文本，然后删除并重新创建所有文本。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-09-30T13:20:37.100

嗯，删除和重建所有程序都有效，不幸的是，它使一个相当大的工厂的 SCADA 所依赖的 SQL 服务器崩溃了。

它节省了单独编辑它们的一些精力，并且工厂只是停滞不前，直到我重新启动服务器。

但请谨慎行事。我很公平地在那儿胡扯了一会儿。

# algorithm - 查找包含点的矩形 - 高效算法

> ID：10269179
> 
> 赞同：12
> 
> 时间：2012-04-22T15:20:53.530
> 
> 标签：algorithm, computational-geometry

下午好。

**我的情况：**

*   在*二维空间*中。
*   **输入**：一组*矩形*（也有*重叠的矩形*）。
    *   矩形坐标是*整数类型*。
    *   矩形大小和矩形位置没有任何限制（仅整数范围）。
    *   没有矩形的宽度=0 或高度=0。
*   **我需要找到**：所有包含输入*点*的矩形（带有*整数*坐标）。

![查找包含输入点的矩形。](../Images/d09068d0a99c7efea7c5e560901eec51.png)

**问题：**

*   保持矩形的有效结构是什么？
*   在这种情况下什么算法是有效的？
    *   什么算法只对添加矩形而不删除有效？

谢谢 ：-）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-22T16:18:59.810

**R-Tree 是最适合这个用例的数据结构。**R-树是用于空间访问方法的树数据结构，即用于索引多维信息，例如地理坐标、矩形或多边形。所有矩形的信息都可以以树的形式存储，因此搜索会很容易

[维基百科](http://en.wikipedia.org/wiki/R-tree)页面、[简短的 ppt](http://www.cs.sfu.ca/CourseCentral/454/jpei/slides/R-Tree.pdf)和[研究论文](http://www.sai.msu.su/~megera/postgres/gist/papers/gutman-rtree.pdf)将帮助您理解这个概念。

![在此处输入图像描述](../Images/c55098ebb66d97aa05202ba5f71e6ad0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T15:25:31.063

在 java 中你可以使用 shape.contains

但一般来说，假设一个矩形是由 (x,y,width,height) 定义的

如果 (pt.x >= x && pt.x <= x + 宽度 && pt.y >= y && pt.y <= y + 高度) ...

如果集合中有所有矩形，则可以遍历集合并找到包含该点的矩形

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T16:21:49.343

看起来您的矩形集可能是动态的（“...用于添加矩形...”）。在这种情况下 - 二维[区间树](http://en.wikipedia.org/wiki/Interval_tree#Higher_dimensions)可能是解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T15:29:02.297

一个矩形`(left, top, right, bottom)`包含一个点`(x, y)`if `left < x < right` *and* `top < y < bottom`（假设坐标向下增加，这是我见过的大多数硬件的情况；如果你的坐标向上增加，更传统的数学情况，交换`top`和`bottom`）。你不会比测试更有效率。

如果您将矩形视为“包含”一个点（如果它也在边界上），则将所有`<`s替换为`<=`.

至于如何处理矩形集合...我不知道。我认为按角坐标排序的列表会做一些事情，但我并没有真正看到它有多大好处......最多，你会平均将要检查的东西列表减少一半（最坏的情况仍然需要检查所有内容）。一大堆该死的一半仍然可以是一大堆。:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-22T16:42:20.460

这是一个简单的解决方案。

1.  在您的平面上定义一个网格。
2.  每个单元格维护两个列表：完全覆盖该单元格的矩形和部分覆盖该单元格的矩形。
3.  在每次插入时，将目标矩形的 ID 放入所有涉及的单元格列表中。
4.  在每个查询中，找到包含目标点的单元格，输出完全覆盖列表并在部分覆盖列表上运行扫描。

# linux - AWK/bash 如何在 AWK 中包含文件名

> ID：10269181
> 
> 赞同：0
> 
> 时间：2012-04-22T15:21:26.387
> 
> 标签：linux, bash, shell, awk

我有以下 awk 脚本：

```
#! /bin/awk -f

BEGIN { FS = ":" }

{ print $1 " "  $2 " "  $3 " " $4 " "  } 
```

我想用“#！/bin/bash”编写一个 bash 脚本，但我需要在其中包含一个文件；当程序显示文件时。

```
#! /bin/bash

awk -f, '
FILENAME= $1
BEGIN { FS = ":" }

{ print $1 " "  $2 " "  $3 " " $4 " "  }

' 
```

在上面的代码中，我尝试包含该文件但它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:35:08.220

目前还不清楚你想在这里传递什么。你想要一个以文件名作为值的变量吗？最简单的方法是使用`-v var=value`：

```
#! /bin/bash

awk -v MYFILENAME="$1" '
BEGIN { FS = ":" }

{ print MYFILENAME " " $1 " "  $2 " "  $3 " " $4 " "  }
' 
```

注意 FILENAME 是一个保留变量，你不能设置它。

或者你想传递输入文件？在这种情况下，您只需将它们传递给程序，如下所示：

```
#! /bin/bash

awk '
BEGIN { FS = ":" }

{ print MYFILENAME " " $1 " "  $2 " "  $3 " " $4 " "  }
' "$1" 
```

`-f`选项是包含一个`awk`脚本，顺便说一句。所以`-f,`会要求 AWK 包含一个名为`,`.

在 shell 级别上，请务必始终将变量括起来`"..."`，`"$1"`这样您就可以正确处理带有空格的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:53:14.287

您实际上不需要使用 bash 来提取文件名。

```
[ghoti@pc ~]$ cat text
one:two:three:four
cyan:yellow:magenta:black
[ghoti@pc ~]$ cat doit.awk
#!/usr/bin/awk -f

BEGIN { FS=":" }

{
  printf("%s %s %s %s\n", $1, $2, $3, $4);
}

[ghoti@pc ~]$ ./doit.awk text     
one two three four
cyan yellow magenta black
[ghoti@pc ~]$ 
```

但正如蒂姆建议的那样，根据您在问题中包含的内容，很难弄清楚您正在寻找什么结果。由于其他原因，您真的需要在 bash 中运行 awk 脚本吗？您是否需要在 awk 脚本中提供实际文件名？

您提供的问题越详细，回复中的详细信息就越准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:31:22.577

我很难从这个问题中看出，但我认为你想要的是

```
#!/usr/bin/env bash

awk -F, '
{ 
  #do stuff
}' "$1" 
```

这将在您传递给 shell 脚本的文件上运行 awk。

但是，如果您想要在 awk 中替换脚本变量，您可以从文字字符串中转义以获取变量替换。例如：

```
#!/usr/bin/env bash

filename="$1"
awk -F, '
{ 
  print "'"$filename"'"
}' "$1" 
```

将打印出您传递的文件名，该文件名的行数与文件中的行数一样多。请注意，这将导致 awk 将所有这些变量视为文字字符串。所以这也可以：

```
#!/usr/bin/env bash

filename="$1"
awk -F, '
BEGIN {
  awksFileName="'"$filename"'"
}
{ 
  print awksFileName
}' "$1" 
```

# json - Dart lang 不止一个 window.message.add

> ID：10269183
> 
> 赞同：3
> 
> 时间：2012-04-22T15:21:29.943
> 
> 标签：json, window, dart, element, dart-html

好的，我正在 dart 中制作一个程序，该程序获取用户位置，然后反向地理位置（openmapsapi），然后显示具有特定城市名称的新闻（google news api）

我为 openmap api 添加使用以下代码并在本地存储中获取城市。从那里我想为谷歌新闻api使用类似的代码，但它可能会引发错误，可能无法添加两个window.on.data行。部分代码取自Seth Ladd的博客，我有点不知道一切是如何工作的.

```
 window.on.message.add(locReceived);
    Element script = new Element.tag("script");
    var somelat=window.localStorage.$dom_getItem("LAT");
    var somelng=window.localStorage.$dom_getItem("LNG");
    var someurl="http://nominatim.openstreetmap.org/reverse?  format=json&lat="+somelat+"&lon="+somelng+"&addressdetails=1&json_callback=callbackForMapsApi";
    script.src=someurl;
    document.body.elements.add(script); 
```

这是我正在使用的相关 html 代码

```
 <script type="text/javascript">
function callbackForJsonpApi(s) {
    window.postMessage(JSON.stringify(s), '*');
}

function callbackForMapsApi(s) {
    window.postMessage(JSON.stringify(s), '*');
}
</script> 
```

以前没有真正研究过网络技术，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:14:30.247

您应该只有一个**window.on.message.add**因为所有消息处理程序都会从​​ JavaScript 接收所有消息，这可能会导致并发问题。而是确保 JavaScript 代码将目标标头添加到它发送的消息中：

```
function callbackForJsonpApi(s) {
    s.target = "dartJsonHandler"
    window.postMessage(JSON.stringify(s), '*');
}

function callbackForMapsApi(s) {
    s.target = "dartMapsHandler";
    window.postMessage(JSON.stringify(s), '*');
} 
```

然后在 Dart 代码中打开这个目标头。我在 DartGap（PhoneGap 的 dart 包装器）中做了类似的技巧，你可以在[这里](https://github.com/Qalqo/dartgap/blob/master/src/impl/_DeviceMessageRouter.dart)查看相关代码。

# label - 如何控制点中的边缘位置和标签（graphviz）

> ID：10269185
> 
> 赞同：0
> 
> 时间：2012-04-22T15:21:33.140
> 
> 标签：label, graphviz, dot, directed-graph, edges

我无法控制 graphviz 的布局。试图制作一个简单的自动机。来源：

```
digraph mygraph {
rankdir=LR;
size="13,13"
node [shape = circle];
init   -> Ready  [ label = "" ];

Ready -> P1  [ label = "t<T\n----TexT----" ];
P1  -> Ready [ label = "t>T" ];
P1  -> B1    [ label = "t<T" ];
B1  -> P1    [ label = "----TexT----" ];
B1  -> U1    [ label = "----TexT----" ];

Ready -> P2  [ label = "t<T\n----TexT----" ];
P2 -> Ready  [ label = "t>T" ];
P2 -> B2     [ label = "t<T" ];
B2 -> P2     [ label = "----TexT----" ];
B2 -> U2     [ label = "----TexT----" ];

U1  -> Ready [ label = "----TexT----", constraint=false];
U2  -> Ready [ label = "----TexT----", constraint=false];

P1 -> P2 [ label = "t<T\n----TexT----", constraint=false];
P2 -> P1 [ label = "t<T\n----TexT----", constraint=false];
} 
```

麻烦的是，标签是交织在一起的。我可能需要： 1\. 更大的间距 2\. 向上移动一些边缘 3\. 控制标签放置

我该怎么做？ ![图.png](../Images/19f5337927e07a39753d222dffd3b280.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:15:45.950

由于冲突发生在由点放置在同一等级（P1和P2）上的节点之间的垂直边缘上，您可以使用垂直等级方向（删除“rankdir = LR”行），以便这些特定边缘的标签是将一个放在另一个下方，而不是并排放置。

当然，这不是解决此类问题的通用方法，但在这里应该有所帮助，而不会不必要地使图形膨胀（通过“nodesep”增加节点分离就可以了）。

# php - mysql 词组搜索

> ID：10269187
> 
> 赞同：0
> 
> 时间：2012-04-22T15:21:44.483
> 
> 标签：php, mysql

我有上面的sql代码，当我运行它时返回错误，你能帮我解决它吗？

$keyword= php 中的变量 sql 表是 data(id,source,title,description,h1) $sql = "SELECT * , MATCH (title) AGAINST ('$keyword') AS rel1, MATCH (source) AGAINST (' $keyword') AS rel2, FROM data WHERE MATCH (title,source) AGAINST ('$keyword') ORDER BY (rel1*1.5)+(rel2) LIMIT $offset, $rec_limit ";

error sql 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“FROM data WHERE MATCH (title,source) AGAINST ('') '附近使用正确的语法

我的网络服务器有服务器：通过 UNIX 套接字的 localhost 服务器版本：5.1.51 mysql php 服务器 ngix 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:27:02.157

您添加了一个额外的逗号。尝试这个：

```
SELECT * , MATCH (title) AGAINST ('$keyword') AS rel1, MATCH (source) AGAINST ('$keyword') AS rel2 FROM data WHERE MATCH (title,source) AGAINST ('$keyword') ORDER BY (rel1*1.5)+(rel2) LIMIT $offset, $rec_limit 
```

此外，您可能需要将 ORDER BY (rel1*1.5)+(rel2) 替换为匹配项，不确定别名在这里是否也有效。

# android - 安卓用户界面设计？

> ID：10269189
> 
> 赞同：1
> 
> 时间：2012-04-22T15:21:50.190
> 
> 标签：android, eclipse, adt

老实说，我对android开发很陌生。我真的很想学它。我在 UI 设计中遇到问题。我想做如下图所示的东西。

![我正在尝试实现的 Android 界面](../Images/a260e22554d8f6738df3f288fee81d71.png)

现在我的问题是人员列表是动态的（从 Web 服务接收）。现在我怎么能做到这一点。

我猜我必须制作一个 XML 布局，然后使用代码将其加载到布局中？

[我已经按照这里](http://developer.android.com/resources/articles/layout-tricks-efficiency.html)的解释做了一些事情..但这还不够。：（ 请帮忙！

**** 编辑 **** 我想要这个

![在此处输入图像描述](../Images/d74159acac27b075dc07c3a2dd77547f.png)

是动态的。我已经在单独的 XML 中成功创建了上述图像条。现在可以像以前在.NET 中的用户控件中那样动态地在主布局中使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:27:51.123

您必须使用 ListViews。只需观看[Google I/O ListView 视频即可](http://www.youtube.com/watch?v=wDBM6wVEO70)获得很好的介绍。单元格的实际布局将在单独的布局 XML 文件中完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T15:37:40.823

这对您很重要..以下链接提供了如何调整图像以及两个项目。 [参考这个](https://stackoverflow.com/questions/10152871/list-view-with-image-and-two-item)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T22:40:56.633

[这](http://www.mediafire.com/?zaa7gbb8jl96z41)是项目文件。为简单起见，我使用了 SimpleAdapter。您可以创建自定义适配器以满足您的要求。希望你喜欢这个用户界面... :)

# c++ - 不可预测的指针行为

> ID：10269190
> 
> 赞同：0
> 
> 时间：2012-04-22T15:22:14.653
> 
> 标签：c++, pointers, openframeworks

目前我正在使用 OpenFrameworks 构建一个布料物理应用程序。我是 C++ 新手，请注意。

在我的应用程序中，两个“邻居”粒子对象作为指针传递给弹簧对象。作为测试，我让弹簧对象在两个粒子之间（在它们的 3d 矢量位置之间）画线。出于某种原因，每次我运行程序时这些行都是不同的，即使没有涉及随机值。当我从弹簧结构中计算出粒子位置的值时，它们通常是荒谬的值，例如 -4.15301e-12。我几乎逐字逐句地遵循示例代码，所以我不确定我哪里出错了。

这是我正在关注的示例代码：

[https://sites.google.com/site/ofauckland/examples/17-cloth-physics](https://sites.google.com/site/ofauckland/examples/17-cloth-physics)

这是我的 Spring 结构：

```
#pragma once
#include "ofMain.h"
#include "Particle.h"

struct Spring {

    float k, restLength;
    Particle *a, *b;
    ofVec3f posA, posB;

    Spring(Particle *a, Particle *b, float k = .2) : a(a), b(b), k(k) {
        restLength = (b->pos - a->pos).length();
    }

    void update() {
        posA = a->pos;
        posB = b->pos;
    }
    void draw() {
        ofSetLineWidth(5);
        ofSetColor(0, 255, 0);
        ofLine(posA.x, posA.y, posB.x, posB.y);
    }
}; 
```

粒子结构：

```
#pragma once
#include "ofMain.h"

struct Particle {

    ofVec3f pos;

    Particle(ofVec3f pos) : pos(pos) {
    }

    void update() {
    }
    void draw() {
        ofSetColor(ofRandom(255), 0, 0);
        ofFill();
        ofCircle(pos.x, pos.y, 3); 
    }
}; 
```

这就是我将两个粒子作为指针传递给弹簧的地方：

```
#pragma once
#include "ofMain.h" 
#include "Particle.h"
#include "Spring.h"

struct Petal {

    float maxWidth, spacing;
    vector<Particle> particles;
    vector<Spring> springs;

    Petal(float maxWidth, float spacing) : maxWidth(maxWidth), spacing(spacing) {        
        setupPoints();
    }

    void setupPoints() {
        float x = 0;
        float y = 0;

        for(int r = 1; r <= maxWidth; r++) {
            x = (int)(r / 2) * -spacing;
            y += spacing;
            for(int c = 1; c <= r; c++) { 
                ofVec3f pos = ofVec3f(x, y, 0);
                Particle p(pos);
                particles.push_back(p); 
                x+=spacing;
            }
        }

        for(int r = maxWidth; r > 0; r--) {
            x = (int)(r / 2) * -spacing;
            y += spacing;
            for(int c = 1; c <= r; c++) { 
                ofVec3f pos = ofVec3f(x, y, 0);  
                Particle p(pos);
                particles.push_back(p); 
                x+=spacing;
            }
        }

        //find neighbors
        for(int i = 0; i < particles.size(); i++) {
            Spring s(&particles[i], &particles[findNeighbor(i)]);
            springs.push_back(s);
        }
    }

    int findNeighbor(int pIndex) {
        float leastDist = 0;
        float leastDistIndex = 0;
        for(int i = 0; i < particles.size(); i++) {
            if(i != pIndex) {
                float distance = particles[pIndex].pos.distance(particles[i].pos);
                if(abs(distance) < abs(leastDist) || leastDist == 0) {
                        leastDist = distance;
                        leastDistIndex = i;
                }
            }
        }
        return leastDistIndex;

    }

    void update() {   
        for(int i = 0; i < particles.size(); i++) {
            particles[i].update();   
        }
        for(int s = 0; s < springs.size(); s++) {
            springs[s].update();
        }
    }
    void draw() {
        for(int i = 0; i < particles.size(); i++) {
            particles[i].draw();   
        }
        for(int s = 0; s < springs.size(); s++) {
            springs[s].draw();
        }
    }
}; 
```

[这](http://i.imgur.com/CgiZi.png)就是发生的事情。奇怪的是，有些弹簧似乎处于正确的位置。

如果我能澄清一些事情，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:28:43.417

您的`particles`向量`Particles`按值保存，并且`vector`可以复制和移动这些值。当您`Particles`作为指向 的指针传递时`Spring`，您传递的是将来某个时候可能不存在的东西的地址。我不确定这是否是问题所在，但它肯定是需要解决的问题。

# javascript - 图像加载完成后触发的 Javascript 函数（无 jQuery）

> ID：10269191
> 
> 赞同：1
> 
> 时间：2012-04-22T15:22:24.420
> 
> 标签：javascript, image, html, object

我有以下代码（相关部分）：

```
window.addEventListener("load", loadImages, false);

var imgl = new Array();

function loadImages() {
    var img = [
        "img1",
        "img2",
        "img3",
        "etc"
    ];
    imgl[img.length-1].onload = function () {
        alert();
        initialise();
    }
    for (i = 0; i < img.length; i++) {
        imgl[img[i]] = new Image();
        imgl[img[i]].src = "img/"+img[i]+".png";
    }
}

function initialise() {
    //...
} 
```

我想`initialise()`在所有图像完成加载后触发该功能，但我没有尝试过。（顺便说一句`alert()`，示例中的用于测试，我没有得到它。）为什么这是错误的？这样做的其他方法也值得赞赏。

我也不想使用 jQuery，只有在绝对不可避免的情况下。

提前致谢。

编辑：

以下内容也不起作用，尽管更有意义：

```
for (i = 0; i < img.length; i++) {
        imgl[img[i]] = new Image();
    }
    imgl[imgl.length-1].onload = function () {
        initialise();
    }
    for (i = 0; i < img.length; i++) {
        imgl[img[i]].src = "img/"+img[i]+".png";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:53:42.693

`imgl[img.length-1]`不存在，因此不能有“onload”属性。

您在开始时进行初始化`img1`，但从不填充它。

换句话说： `img.length-1`= 3

`img1[3]`不存在。

我收到以下错误消息：

> 未捕获的类型错误：无法设置未定义的属性“onload”

# asp.net-mvc - Asp.NET MVC 缓存图像

> ID：10269195
> 
> 赞同：3
> 
> 时间：2012-04-22T15:22:42.123
> 
> 标签：asp.net-mvc, caching

我正在使用本文中的代码：[http](http://weblogs.asp.net/jeff/archive/2009/07/01/304-your-images-from-a-database.aspx) ://weblogs.asp.net/jeff/archive/2009/07/01/304-your-images-from-a-database.aspx来缓存我从中返回的图像数据库但是当用户更改图像浏览器不会返回服务器检查时间戳时出现问题。

我已经在 Chrome 和 IE9 中对此进行了测试，chrome 几乎总是返回服务器检查时间戳，如果它已被编辑，它会返回新图像，除非我 ctrl+F5 刷新页面，否则 IE9 永远不会这样做。

是否有任何人都知道的跨浏览器解决方案以确保浏览器始终调用服务器以便我可以检查时间戳？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:39:36.140

将到期日期设置为当前日期/时间会强制它始终与服务器进行检查。

```
Response.Cache.SetExpires(DateTime.Now); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T07:57:45.787

user351711 的相同解决方案具有不同的语法：

Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);

# performance - 何时索引核心数据属性？

> ID：10269198
> 
> 赞同：1
> 
> 时间：2012-04-22T15:23:06.777
> 
> 标签：performance, core-data, indexing, nspredicate, nssortdescriptor

在哪些情况下我应该索引核心数据属性？

1.  当我按它排序时？

    ```
    fetchRequest.sortDescriptors =
    [NSArray arrayWithObject:[NSSortDescriptor
                              sortDescriptorWithKey:@"name" ascending:YES
                              selector:@selector(localizedStandardCompare:)]]; 
    ```

2.  当我过滤它时？

    ```
    fetchRequest.predicate = [NSPredicate predicateWithFormat:
                              @"name BEGINSWITH[cd] %@", searchString]; 
    ```

3.  还有其他情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:29:54.607

我认为，您可以在这两种情况下都这样做，假设您将使用该属性进行很多工作，并且它本身很大并且在没有索引列的情况下进行提取会花费很多。

# php - 字符串解析 - 用唯一的替换替换每个重复出现的子字符串

> ID：10269200
> 
> 赞同：0
> 
> 时间：2012-04-22T15:23:24.230
> 
> 标签：php, string, parsing

我正在尝试解析一个字符串。问题是字符串中的每个变量都可能出现不止一次，我需要用唯一的替换来替换每个重复出现的地方。

例子`$string = "$Pronoun $Adjective $Noun is as $Adjective as an $Adjective $Noun"`

我试过了`str_replace("$Pronoun", getRandomWordByType('Pronoun'), $string)`

这与每次出现的“ `$Pronoun`”都被替换为从对我的`getRandomWordByType('Pronoun')`方法的一次调用中检索到的相同代词这一事实不同。

我的目标是动态构建有趣的句子，用从单词数据库中检索到的单词替换占位符，这些单词按类型分类......

在此先感谢您的任何建议 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:34:23.323

试试这个：

```
preg_replace_callback("(\$([a-z]+))i",function($a) {return getRandomWordByType($a[1]);},$string); 
```

`$Something`这将通过传递`Something`给`getRandomWordByType`函数来自动转换表单的任何关键字。另一个优点是每个单词都会调用一次随机单词函数。

为了防止意外替换，例如`$NotAKeyword`，如果在有效列表中找不到关键字，则`getRandomWordByType`返回`'$'.$keyword`（函数的参数在哪里）。`$keyword`

# php - 如何将文件中的所有字符转换为php中的ascii数字

> ID：10269202
> 
> 赞同：0
> 
> 时间：2012-04-22T15:23:32.610
> 
> 标签：php, ascii

我想将文件中的所有字符转换为 php 中的 ASCII 码？我知道 ord 函数，但是是否有任何函数可以用于整个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:56:14.867

iconv 可以做这项工作

[http://php.net/manual/de/function.iconv.php](http://php.net/manual/de/function.iconv.php)

它将字符串中指定字符集的字符转换为另一个字符。查看无法 1:1 转换的字符的 //TRANSLIT 和 //IGNORE 特殊功能。

要以字符串形式获取文件，您可以使用 file_get_contents 并在 iconv 等与 file_put_contents 一起应用后保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:17:24.580

```
$inputFile = fopen("input.txt", "rb");
$outputFile = fopen("output.txt", "w+");

while (!feof($inputFile)) {
    $inputBlock = fread($inputFile, 8192);
    $outputBlock = '';
    $inputLength = strlen($inputBlock);
    for ($i = 0; $i < $inputLength; ++$i) {
        $outputBlock .= str_pad(dechex(ord($inputBlock{$i})),2,'0',STR_PAD_LEFT);
    }
    fwrite($outputFile,$outputBlock);
}

fclose($inputFile);
fclose($outputFile); 
```

# google-app-engine - 在开发环境中模拟谷歌应用引擎维护期

> ID：10269204
> 
> 赞同：2
> 
> 时间：2012-04-22T15:24:05.493
> 
> 标签：google-app-engine

在计划的维护期间中断期间，高复制数据存储将正常工作，但 memcache 将不可用。

有没有办法在本地开发环境中模拟这种场景？

更具体地说，我们可以在禁用 memcache 的情况下运行 dev_appserver.py 来测试维护期间的行为吗？

到目前为止，我会在每次请求后转到开发控制台并清除内存缓存，以大致了解应用程序在服务器维护期间的行为方式。我希望必须有一些更好的方法来测试这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:13:52.537

创建一个 api post call hook，它将返回`None`memcache get 请求。参考[官方文档创建一个 api post call hook](https://developers.google.com/appengine/articles/hooks)。

# c# - 如何在 WP7 XNA 中克隆抽象类的孩子

> ID：10269207
> 
> 赞同：1
> 
> 时间：2012-04-22T15:24:21.610
> 
> 标签：c#, windows-phone-7, xna

我正在使用 XNA 为 WP7 开发游戏。这是我的结构：

```
public abstract class enemy
{} 
```

子元素：

```
public class genericEnemy : enemy{}
...
public class snake : enemy {} 
```

ETC...

在 WP7 中，很多东西似乎已经被移动和/或删除（尤其是序列化）。尽管进行了很多搜索，但我一直无法找到解决方案。我正在尝试复制子元素。

例如：在加载关卡时，我将三个不同敌人的数组传递到加载阶段。在加载过程中，我需要复制这些敌人中的每一个，这样每个敌人中的 20 个都可以在游戏过程中飞来飞去做自己的事情。

我见过的所有解决方案都指的是 WP7 库中不存在的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:00:03.307

据我所知，没有“图书馆”的方式来做到这一点。一种解决方案是：

1) 在敌人中声明一个 Clone() 方法，返回该敌人的副本。

```
abstract class Enemy {
     public abstract Enemy Clone();
} 
```

2) 在每一个具体类型中实现它，所以一个 Snake 创建一个新的 Snake，等等。示例：

```
class Snake : Enemy {
     int speed;
     public override void Enemy Clone() {
         var clone = new Snake();
         clone.speed = speed;
         return clone;
     }
} 
```

3）现在任何具体类型的对象都知道如何克隆自己，所以如果你有一个 Enemies 数组，你可以在每个 Enemies 上调用 Clone() ，它将以正确的方式创建正确的具体类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:52:09.053

创建一个可以从某种 id 创建敌人的敌人工厂。在加载关卡时，您可以在需要创建敌人时调用工厂：

```
class EnemyFactory
{
 Enemy CreateEnemy(int id)
 {
  if (id == 0)
   return new Snake();
  return new GenericEnemy();
 }

}

void LoadLevel()
{
 // bla bla
 Level level = new Level();
 int enemyId = LoadFromFile();
 level.AddEnemy(EnemyFactory.CreateEnemy(enemyId));
} 
```

这样您就可以摆脱讨厌的克隆代码，并且可以控制工厂类中的所有敌人实例化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:46:56.453

使用调用复制构造函数的抽象方法：

```
public abstract class Enemy
{
   private readonly int mEnemyData;

   protected Enemy(Enemy pEnemy)
   {
      mEnemyData = pEnemy.mEnemyData;
   }

   public abstract Enemy Clone();
}

public sealed class GenericEnemy : Enemy
{
   private readonly double mGenericEnemyData;

   private GenericEnemy(GenericEnemy pGenericEnemy)
    : base(pGenericEnemy)
   {
      mGenericEnemyData = pGenericEnemy.mGenericEnemyData;
   }

   public override Enemy Clone()
   {
      return new GenericEnemy(this);
   }
} 
```

# c - 当格式字符串以换行符结尾时，scanf 的行为是什么？

> ID：10269208
> 
> 赞同：1
> 
> 时间：2012-04-22T15:24:25.370
> 
> 标签：c, scanf

对于以下代码：（假设已定义 x）

```
scanf("%d\n", &x);
printf("foo"); 
```

如果我按 1 和 ENTER，我希望程序打印 foo，但事实并非如此。我必须按 1、ENTER、2、ENTER 才能看到它打印 foo。

现在的问题是为什么我需要输入一些东西加上另一个 ENTER 才能使 scanf 返回？不可能 scanf 只需要比格式字符串中的 ENTER 多一个，因为按 1、ENTER、ENTER 也不起作用。事实上，无论我输入多少 ENTER，scanf 都会一直等待，直到我输入其他内容。

我已经在 Visual Studio 2010 和 MinGW 中尝试过这个示例，它们产生了相同的结果。那么这该如何解释呢？这是特定于 Windows 的吗？或编译器依赖？或者只是这种 scanf 的使用会产生未定义的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:28:33.353

scanf 格式字符串中的`'\n'`（以及空格、制表符、`'\r'`、`'\f'`和`'\v'`）使 scanf 忽略空格。

ENTER 是空格，因此 scanf 会尽可能多地忽略它，并且仅在看到非空格（`2`）时才停止。

# javascript - 如何实现这种背景滚动效果？

> ID：10269209
> 
> 赞同：1
> 
> 时间：2012-04-22T15:24:30.783
> 
> 标签：javascript, jquery, effects

我真的很喜欢每个背景部分相互重叠并向下滚动的方式。我已经看到它做了很多：这是链接： http: [//www.soleilnoir.net/believein/](http://www.soleilnoir.net/believein/)

任何想法如何达到类似的效果？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T19:21:17.353

这种效果称为**视差**。

以下是与此效果相关的一些链接：

*   Nike 的精彩演示[http://www.nike.com/jumpman23/aj2012/](http://www.nike.com/jumpman23/aj2012/)
*   视差集合[http://webdesignledger.com/inspiration/21-examples-of-parallax-scrolling-in-web-design](http://webdesignledger.com/inspiration/21-examples-of-parallax-scrolling-in-web-design)（请务必查看每个示例，有些非常棒！例如：[http://benthebodyguard。 com/index.php](http://benthebodyguard.com/index.php) [http://www.siebennull.com/](http://www.siebennull.com/) [http://janploch.de/](http://janploch.de/) )
*   梅赛德斯 A 级网站[http://a-class.mercedes-benz.com/com/en/index.html#!/?s=li](http://a-class.mercedes-benz.com/com/en/index.html#!/?s=live) ​​ve （不是真正的视差，但仍然很棒）
*   关于如何使用视差效果制作图像滑块的教程[http://tympanus.net/codrops/2011/01/03/parallax-slider/](http://tympanus.net/codrops/2011/01/03/parallax-slider/)
*   另一个具有不同效果的教程[http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/](http://tympanus.net/codrops/2012/03/15/parallax-content-slider-with-css3-and-jquery/)
*   一个做视差的库[https://github.com/cameronmcefee/plax](https://github.com/cameronmcefee/plax)
*   另一个库[https://github.com/markdalgleish/stellar.js](https://github.com/markdalgleish/stellar.js)

你可能还喜欢这样：

*   [http://johnpolacek.github.com/scrollorama/](http://johnpolacek.github.com/scrollorama/)
*   [http://joelb.me/scrollpath/](http://joelb.me/scrollpath/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:06:28.407

您可以通过观察滚动偏移位置然后根据该滚动位置为不同元素设置动画来实现这一点。您将设置一个事件侦听器并在某些位置触发函数以将元素动画到页面上。

如果使用 jQuery，则如下所示：

```
$(document).on("scroll", checkScrollPosition);
function checkScrollPosition() { 
    var scrollPos = $(window).scrollTop();
    switch (scrollPos) {
        case (500):
           doSomething();
           break;
        case (1000):
           doSomethingElse();
           break;
    }
}

function() doSomething {
   // use animate to animate element(s) at 500
}
function() doSomethingElse {
   // use animate to animate element(s) at 1000
} 
```

我确信可以比这更好地优化，但这应该足以开始。

# android - 它不是 JSONObject。它不是 JSONArray。它是什么？

> ID：10269211
> 
> 赞同：0
> 
> 时间：2012-04-22T15:24:41.330
> 
> 标签：android, json

我使用 JSON 的时间不长。我有以下回应，我很难理解如何调用“主题”的细节。我以为它是 JSONObject，但 Android 的 logcat 告诉我 JSONObject["Topic"] not found。

```
[{"Id":1,"TopicId":1,"UserGuid":"C214ED74-07A7-409E-84FF-AF0457CF581A","Topic":{"Id":1,"AdminUserGuid":"C214ED74-07A7-409E-84FF-AF0457CF581A","Title":"Test Topic 1","AccessType":"public"}}] 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:27:29.440

这是一个具有一个元素的 JSONArray，一个具有多个属性的 JSONObject，其中一个是名为 topic 的 JSONObject：

```
JSONArray posts = new JSONArray(myJsonString);
JSONObject post = posts.getJSONObject(0);
JSONObject topic = post.getJSONObject("Topic"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:31:47.537

使用[JSONLint](http://jsonlint.com/)缩进你的 JSON 字符串，这样你可以更好地理解结构。它是一个 JSONArray，其中有一个对象，其中有 4 个对象，其中一个有 4 个属性。

# c# - Aforge 的网络摄像头框架始终为灰色图像

> ID：10269212
> 
> 赞同：2
> 
> 时间：2012-04-22T15:24:53.217
> 
> 标签：c#, webcam, aforge

我正在使用 Aforge .NET 框架在我的应用程序中获取网络摄像头，但我总是得到一个全灰色的图像框架。

```
 this.videoSource = new VideoCaptureDevice(this.Moniker);
            this.videoSource.DesiredFrameSize = GetHighestResolution(this.videoSource.VideoCapabilities);
            this.videoSource.NewFrame += new NewFrameEventHandler(videoSource_NewFrame);
            this.videoSource.Start(); 
```

通风口处理程序：

```
 private void videoSource_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
        this.outputBox.Image = (Bitmap)eventArgs.Frame.Clone();
    } 
```

这应该可以解决问题。`DesiredFrameSize`设置为凸轮可以支持的最大值。

任何提示为什么图像总是灰色的？即使写它做磁盘...

编辑：添加：来自[Aforge samples的示例应用程序](http://www.aforgenet.com/framework/samples/video.html)*SimplePlayer*也会出现同样的问题。我的网络摄像头是罗技 QuickCam Pro 9000。

Edit2：同样适用于 small `DesiredFramesizes`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-10T17:01:10.787

也许相机没有包裹在directshow（某种directx的东西）上。有些相机带有自己的驱动程序，或不同的内部工作。我有一些高速工业相机，有类似的问题。我必须使用不同的方法从它们中检索原始图像，然后对这些图像进行伪造。

也许使用较旧的廉价 USB2 相机检查您的代码

# git - git 提交到 github 仓库

> ID：10269215
> 
> 赞同：1
> 
> 时间：2012-04-22T15:25:03.000
> 
> 标签：git, github

我一直在关注 git 的基础知识，但有些事情让我感到困惑。

我在 github.com 上创建了一个存储库。然后我打开控制台并使用以下命令：

> cd 进入/我的/目录
> 
> 混帐添加。
> 
> git commit -m "一些信息"

这给了我以下结果：

> [master (root-commit) 96a358b] 提交 35 个文件已更改，1494
> 
> 插入（+），0 删除（-）
> 
> ...和其他一些东西

到目前为止还不错吧？但是到目前为止，我一直在关注的任何内容都没有向我展示如何将提交实际放入 github 存储库中......

我假设我必须在某处添加我的 github 登录名/密码，对吗？为了能够向我的 github 仓库提交一些东西？但我真的找不到任何关于如何做到这一点的信息......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:28:41.623

按照此链接查看如何在您的盒子上设置必要的详细信息并推送到 Github 上的存储库：http: [//help.github.com/linux-set-up-git/](http://help.github.com/linux-set-up-git/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:29:49.330

`git push`如果您正确设置了所有内容，将会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T22:45:27.877

Git 命令不仅可以让您提交，还可以在提交工作后使用

```
git commit -m "Comment" 
```

在那之后

```
git push 
```

允许您将在本地分支上所做的提交推送到远程存储库。这将要求您进行身份验证（用户名/密码）。

# r - 如何将向量扩展为 r 中函数的参数？

> ID：10269221
> 
> 赞同：30
> 
> 时间：2012-04-22T15:25:42.267
> 
> 标签：r

如果我有具有三个单独参数的函数

```
fun <- function(a,b,c){
    a+b^2*c
} 
```

如何使用单个向量调用它

```
my_vector <- c(1,2,3)
fun(my_vector) 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-22T15:27:21.207

试试这个：

```
> do.call("fun", as.list(my_vector))
[1] 13 
```

# php - JQuery 在 AJAX GET 调用 (PHP) 后不替换内容

> ID：10269225
> 
> 赞同：0
> 
> 时间：2012-04-22T15:26:25.323
> 
> 标签：php, jquery, ajax, get

一旦更改 INPUT 值，内容将替换为微调器和“请稍候...”消息，一旦从 GET 获得响应，我想用返回的新 HTML 替换微调器/消息，但是返回的新 HTML 不会替换微调器/消息.

下面是（动态 PHP）HTML。

```
<script type="text/javascript">

    $(document).ready( function() {
        $( '#submit' ).click( function( e ) {
            e.preventDefault();

        });
    });

</script>

<script type="text/javascript">

    $(document).ready( function() {
        $( '.basket-item' ).children( 0 ).children( 1 ).change( function( e ) {
            e.preventDefault();

            var q = $( this ).val();
            var id = $( this ).parent().children( 0 ).val();

            var elem = $( this ); // var content = elem.parent().parent().parent().html();

            elem.parent().parent().parent().html( '<div class="basket-item item-border" style="width:896px;text-align:center;"><p class="para"><img src="<?php echo $this -> get( '__baseuri' ); ?>/media/images/spinner.gif" />Please wait...</p></div>' );

            var url = '<?php echo $this -> get( '__baseuri' ); ?>shop/adjust/' + id + '/?quantity=' + q;

            $.get( url, function( data ) {
                elem.parent().parent().parent().html( data );

            });

        });
    });

</script>

<h1>Shopping Basket</h1>

<div>
    <div class="basket-item" style="width:512px;text-align:left;"><p>Product / Item</p></div>
    <div class="basket-item"><p>Quantity</p></div>
    <div class="basket-item"><p>Price &pound;</p></div>
    <div class="basket-item"><p>Total &pound;</p></div>
</div>

<?php if( $this -> has( 'records' ) ): ?>
<form
    method="post"
    action="#"
    accept-charset="utf-8">

<?php foreach( $this -> get( 'records' ) as $record ): ?>
    <div>
        <div class="basket-item item-border" style="width:512px;text-align:left;">
            <p class="para">
                <img 
                    width="48" 
                    height="48" 
                    alt="<?php echo $record -> get( 'name' ); ?> (&pound;<?php echo $record -> get( 'price' ); ?>)" 
                    src="<?php echo $this -> get( '__baseuri' ); ?>media/images/products/generic/<?php echo $record -> get( 'image' ); ?>.jpg" />
            <a href="<?php echo $this -> get( '__baseuri' ); ?>products/<?php echo $record -> get( 'tainted' ); ?>/"><?php echo $record -> get( 'name' ); ?></a></p>
        </div>
        <div class="basket-item item-border">
            <p>
                <input type="hidden" name="product" value="<?php echo $record -> get( 'tainted' ); ?>" />
                <input type="text" name="quantity" size="3" maxlength="3" value="<?php echo $record -> get( 'quantity' ); ?>" />
            </p>
        </div>
        <div class="basket-item item-border"><p><?php echo $record -> get( 'price' ); ?></p></div>
        <div class="basket-item item-border"><p>&nbsp;</p></div>
    </div>
<?php endforeach; ?><div style="clear:both;"></div>
<div>
    <div class="basket-item item-border" style="width:768px;text-align:right;"><p>Grant Total &pound;&nbsp;</p></div>
    <div class="basket-item item-border" style="width:128px;text-align:center;"><p>14.91</p></div>
</div>
<div>
    <div style="margin:0%;padding:16px 0%;width:896px;text-align:left;"><p>
        <input id="submit" type="submit" value="Checkout&nbsp>>" />
    </p></div>
</div>
</form>
<?php else: ?>
    <div>
        <div class="basket-item" style="width:896px;text-align:center;"><p>Please add one or more items to your shopping basket.</p></div>
    </div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:40:10.057

您的网址构造不正确。

```
var url = '<?php echo $this -> get( '__baseuri' ); ?>shop/adjust/' + id + '/?quantity=' + q; 
```

应该是吧。

```
var base_uri = "<?php echo $this->get('__baseuri') ?>"; 
var url = base_uri+'shop/adjust/' + id + '/?quantity=' + q; 
```

一旦被服务器解析，URL 是完全可以接受和正确的，所以那里没有问题，服务器也按预期返回内容，问题只是客户端。

# java - JFreechart ChartPanel 没有变得透明

> ID：10269226
> 
> 赞同：7
> 
> 时间：2012-04-22T15:26:31.267
> 
> 标签：java, swing, jfreechart

我想给图表背景一个透明的外观（不是完全透明，而是一点点）。这是我的代码。我添加了几行代码来增加透明度，但我猜它`ChartPanel`并没有变得透明。编写这些代码行后，图表背景显示为灰色。

```
JFreeChart chart = ChartFactory.createPieChart3D(
    "Full traffic view", pieDataset, true, true, true);

PiePlot3D p = (PiePlot3D) chart.getPlot();

PieRenderer renderer = new PieRenderer(sampleColors);
renderer.setColor(p, pieDataset);
p.setDepthFactor(0.07);
p.setCircular(true);
p.setLabelOutlinePaint(null);
p.setLabelBackgroundPaint(null);
p.setLabelShadowPaint(null);

p.setBackgroundPaint(new Color(127, 127, 127, 64));  // tranparency code
p.setBackgroundImageAlpha(0.0f);

p.setSimpleLabels(true);
p.setLabelGenerator(null);
p.setBackgroundPaint(
new GradientPaint(0, 0, Color.white, 0, 100, Color.white));
p.setDarkerSides(true);
ChartPanel frame1 = new ChartPanel(chart);
ChartPanel.setVisible(true);
ChartPanel.add(frame1);

ChartPanel.setSize(640, 400); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-23T11:52:52.863

我发现我必须为图表和绘图*使用透明颜色：*

```
val trans = new Color(0xFF, 0xFF, 0xFF, 0)
chart.setBackgroundPaint(trans)
plot .setBackgroundPaint(trans) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:28:17.530

因为这可能相当依赖于平台和版本，所以您可能会查看 [`setBackgroundImageAlpha()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/Plot.html#setBackgroundImageAlpha%28float%29)以`Plot`获得所需的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T06:42:18.253

我遇到了类似的问题，但是在我将背景图像设置为 0.0f 后它得到了解决，即

setBacgroundImageAlpha(0.0f)。因为它设置绘制背景图像时使用的 alpha 透明度。

alpha 透明度（在 0.0f 到 1.0f 的范围内，其中 0.0f 是完全透明的，而 1.0f 是完全不透明的）。

**这是因为 PNG（便携式网络图形）格式支持 alpha 通道透明度。**

我发现您的代码和我的代码之间的唯一区别在于

p.setBackgroundPaint(新颜色(127, 127, 127, 64)); // 你的透明代码

p.setBackgroundPaint（新颜色（255,255,255,0））；// 我的透明度代码

# asp.net-mvc-3 - 在Web应用程序asp.net mvc3上使用viewmodel时查询数据库

> ID：10269236
> 
> 赞同：0
> 
> 时间：2012-04-22T15:27:30.140
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, viewmodel

我的视图模型有问题，当我尝试将新的注册添加到我的数据库时，当我使用我的视图模型键入视图时，我得到了`DbEntityValidationErrors`.

这是使用 viewmodel 的代码：

```
 [HttpPost]
    public ActionResult Create(Annonce annonce)
    {
        /*
        if (ModelState.IsValid)
        {
          */  

            _userservice.addannonce(annonce);

            return RedirectToAction("Index");
        /*
        }

       return View(new AnnonceView(annonce));
         * */
    } 
```

但是当我直接在视图上使用我的实体域 Annonce 时，就会出现任何问题。请帮助我，对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:34:41.100

我假设您的 addannounce 方法需要您的 EntityModel 类型的对象。不是视图模型。ViewModel 专门用于处理视图。它与您的实体模型不同。您不能将创建的视图模型原样发送到实体框架以保存它。您需要发送一个实体模型。因此，您可能可以读取 ViewModel 的值并将其设置为 Entity Model 的相关属性值并将其发送以进行保存。像这样的东西

```
YoueEntity.Announce objEntityAnnounce=new YoueEntity.Announce();
//Read from the posted viewmodel and set the values to entity model.
objEntityAnnounce.ID=annonce.ID;
objEntityAnnounce.Title=annonce.Title;
//Other relevant Properties as well

_userservice.addannonce(objEntityAnnounce); 
```

There are libraries like AutoMapper which does this mapping, You may take a look at them,

# android - 移动到 tabview 中的另一个选项卡时停止 handler.postDelayed

> ID：10269241
> 
> 赞同：3
> 
> 时间：2012-04-22T15:28:10.657
> 
> 标签：android, handler, tabview, postdelayed

在我的应用程序中，我使用的是 tabview。在其中一个选项卡中，我实现了一个刷新功能，例如：

```
private final Runnable r = new Runnable() {
    public void run() {
        mVar = true;
        while (mVar == true){
            calculateResult();
            //refresh();

            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }
};
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    handler.removeCallbacks(r);
    setContentView(R.layout.result_view);
    refresh();
    setBackGround();
}
public void refresh() {
    new Thread(r).start();
    //handler.postDelayed(r, 1000);
} 
```

我已经尝试使用`handler.removeCallbacks(r);`以阻止处理程序自我重复，或者我相信什么。但是当我启动它时系统就崩溃了。

> 这是我的错误日志：

```
04-23 01:14:20.234: D/dalvikvm(14753): GC_EXTERNAL_ALLOC freed 53K, 47% free 2868K/5379K, external 0K/0K, paused 37ms
04-23 01:14:20.265: D/ATRecorder(14753): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@405178e8
04-23 01:14:20.275: D/WindowManagerImpl(14753): addView, new view, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@40523840
04-23 01:14:23.368: D/dalvikvm(14753): GC_EXTERNAL_ALLOC freed 17K, 47% free 2901K/5379K, external 1151K/1663K, paused 23ms
04-23 01:14:23.518: D/dalvikvm(14753): GC_EXTERNAL_ALLOC freed 86K, 45% free 2960K/5379K, external 2320K/2875K, paused 24ms
04-23 01:14:23.678: D/dalvikvm(14753): GC_EXTERNAL_ALLOC freed 3K, 45% free 2961K/5379K, external 8073K/10082K, paused 25ms
04-23 01:14:23.798: D/ATRecorder(14753): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@4053b728
04-23 01:14:23.878: D/dalvikvm(14753): GC_EXTERNAL_ALLOC freed 10K, 45% free 2969K/5379K, external 13845K/15875K, paused 28ms
04-23 01:14:23.898: D/ATRecorder(14753): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40531240
04-23 01:14:23.908: D/WindowManagerImpl(14753): addView, new view, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40512848
04-23 01:14:24.108: W/dalvikvm(14753): threadid=10: thread exiting with uncaught exception (group=0x4001d5a0)
04-23 01:14:24.108: E/AndroidRuntime(14753): FATAL EXCEPTION: Thread-11
04-23 01:14:24.108: E/AndroidRuntime(14753): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.ViewRoot.checkThread(ViewRoot.java:3165)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.ViewRoot.requestLayout(ViewRoot.java:677)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.view.View.requestLayout(View.java:8507)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.widget.ImageView.setImageDrawable(ImageView.java:330)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at android.widget.ImageView.setImageBitmap(ImageView.java:344)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at com.FYP.indoorGPS.TouchImageView.setImageBitmap(TouchImageView.java:153)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at com.FYP.indoorGPS.MapActivity.drawMap(MapActivity.java:163)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at com.FYP.indoorGPS.MapActivity$1.run(MapActivity.java:31)
04-23 01:14:24.108: E/AndroidRuntime(14753):    at java.lang.Thread.run(Thread.java:1027)
04-23 01:14:24.379: D/WindowManagerImpl(14753): finishRemoveViewLocked, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@40523840
04-23 01:14:24.419: D/WindowManagerImpl(14753): finishRemoveViewLocked, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@40512848
04-23 01:14:26.030: D/Process(14753): killProcess, pid=14753 
```

谁能告诉我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:45:16.033

我猜问题是你的 Runnable "r" 即使在`removeCallbacks()`. `removeCallbacks()`不会停止正在运行的 Runnable，它只会阻止它启动。

此外，您`refresh()`再次调用“r”，因此它将被无限期地调用。因此，如果`removeCallbacks()`在“r”运行时调用，则没有停止“r”的代码，它将永远循环。

一个解决方案是在你的 Runnable 中有一个循环并`Thread.sleep()`在每个循环结束时调用。然后只需结束循环即可停止 Runnable。

例如，在您的 Runnable 中：

```
public void run() {
    mVar = true;
    while (mVar == true){
        //do stuff
        Thread.sleep(2000);
    }

} 
```

让 mVar 是一个静态变量，您可以将其设置为 false 以结束循环。

另外，我建议不要在 UI 线程上运行此 Runnable，因为它可能会导致您的应用程序在该`Thread.sleep(2000)`方法期间停止响应。您可以使用以下内容：

```
new Thread(r).start(); 
```

编辑：如果您要在 Runnable 中处理视图，则处理视图的代码**必须**从 UI 线程运行。因此，任何从可运行文件更改视图的代码都需要通过处理程序调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T09:50:14.867

我认为使用 Handler 是更好的解决方案，而不是 Thread。请参见下面的代码，它应该可以工作。我假设 mVar 是一个受控变量，将设置为 false 以停止处理程序。

```
private final Runnable r = new Runnable() {
    public void run() {
        if (mVar) {
            calculateResult();
            handler.postDelayed(this, 2000);
        }
    }
};

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    handler.removeCallbacks(r);
    setContentView(R.layout.result_view);
    refresh();
    setBackGround();
}

public void refresh() {
    handler.postDelayed(r, 1000);
} 
```

# python - 尝试使用 EasyEclipse for Python 运行 Python 脚本，出现错误“无法启动选择，并且最近没有启动。”

> ID：10269245
> 
> 赞同：1
> 
> 时间：2012-04-22T15:28:44.153
> 
> 标签：python, eclipse, pydev

这是我第一次使用Eclipse，所以我认为这一定是一些新手配置错误。但是，我无法解决它，所以我希望你们中的一个可以帮助我。

这就是我所做的：

1.  安装 Python 2.7
2.  为 Python 1.3.1 安装了 EasyEclipse
3.  转到 Window>Preferences>Pydev>Interpreter-Python 并选择 C:\python27\python.exe
4.  创建了一个新项目（当我必须选择项目类型时，只有 python 2.3、2.4 和 2.5，所以我选择了 2.5，即使我运行的是 2.7）
5.  使用简单的 helloworld 在该项目中创建了一个文件。
6.  单击“运行”播放按钮。

当我这样做时，我收到错误“无法启动选择，并且最近没有启动”。

正如我所说，我觉得这只是一些配置问题。特别是，这可能与我的“运行配置”有关吗？我将其视为一个对话框，但我真的不知道我应该在其中做什么。

非常感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:25:24.580

我得到了它。在创建文件时，我需要指定 .py 扩展名。执行此操作后，文件运行。

# iphone - 找不到“AbstractPickerView”的接口声明，“AttackLayer”的超类

> ID：10269246
> 
> 赞同：0
> 
> 时间：2012-04-22T15:28:43.903
> 
> 标签：iphone, objective-c, ios, inheritance

一段时间以来，我一直在摸索这个问题，希望多一双眼睛会有所帮助：我收到“找不到'AbstractPickerView'的接口声明，'AttackLayer'的超类。麻烦的是我已经导入了所有必要的头文件，我唯一能想到的是多级继承

这里是接口：

```
@interface AttackLayer   : AbstractPickerView    <<< this is the one which gets the error
@interface AbstractPickerView: AbstractLayer <UIPickerViewDelegate>
@interface AbstractLayer : CCLayer 
```

谁能看到这里有什么问题？

```
#import <Foundation/Foundation.h>   
#import "AbstractPickerView.h"    

@interface AttackLayer   : AbstractPickerView 

{
    CCMenu *buyPowerButton;

    CCMenu *finishBuyPower;

    id playerUI;

}

-(id) init:(PlayerController *)playerControl withObject:(id)object;

-(void)spendAttack:(id)sender;

-(void)spendResist:(id)sender;

-(void)transferPower:(id)sender;

-(void)timeOut;

-(void)commenceAttack:(id)sender;

-(void)appear;

-(void)buyPower:(id)sender;

-(void)reloadButtons;

-(void)buyPowerButtons;

-(void)cleanUpPicker:(id)sender;

@property(nonatomic,retain)id playerUI;

@property(nonatomic,retain) CCMenu *button2;

@property(nonatomic,retain) CCMenu *button3;

@property(nonatomic,retain) CCMenu *buyPowerButton;

@property(nonatomic,retain) CCMenu *finishBuyPower;

@property(nonatomic,retain)CCMenu *starMenu;

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T00:24:16.053

解决了这个问题，我不敢相信我思考了这么多小时，我用@class替换了接口中的标题导入，移动了 AbstractPickerView.m 中的导入并解决了问题

# java - 在java中发送邮件时出错

> ID：10269249
> 
> 赞同：0
> 
> 时间：2012-04-22T15:28:54.993
> 
> 标签：java, ssl, jakarta-mail

我试图使用java发送邮件。当我将它与 GMail 的 SMTP 服务器（“smtp.gmail.com”）一起使用时，我使用的代码有效。但是，当我更改代码（smtp_host_name、smtp_port 属性和身份验证用户 ID/密码）以通过我的 ISP 提供商的 SMTP 服务器发送电子邮件时，此代码失败。

这是我的代码-

```
String host = "smtp server host of my isp provider";

    Properties props = System.getProperties();
    props.put("mail.smtp.host", host);
    props.put("mail.debug", "true");
    props.put("mail.transport.protocol.", "smtp");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "25");
    props.put("mail.smtp.starttls.enable","true"); 

    Session mailSession = Session.getDefaultInstance(props, null);
    mailSession.setDebug(sessionDebug);

    Message msg = new MimeMessage(mailSession);
    msg.setFrom(new InternetAddress(from));
    InternetAddress[] address = {new InternetAddress(to)};
    msg.setRecipients(Message.RecipientType.TO, address);
    msg.setSubject(subject);
    msg.setContent(messageText, "text/html");

    Transport transport = mailSession.getTransport("smtp");
    transport.connect(host, user, pass); 
```

我收到了这个错误-

```
 javax.mail.MessagingException: Exception reading response; 
 nested exception is: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection? 
```

问题是我能够从我的系统工作区从相同的代码发送邮件。但是在我将war文件上传到主机后，我得到了上述错误。我想我禁用了 SSL 但仍然收到此错误。有人可以帮忙吗。这很紧急...

我按照下面给出的步骤操作，但仍然遇到同样的错误。这是我现在的代码-

```
 String host = "mail.myweb.com", user = emailUser, pass = emailPasswd;

    String to = emailID;
    String from = emailFrom;
    String subject = subj;
    String messageText = message;
    boolean sessionDebug = true;

    Properties props = System.getProperties();
    props.put("mail.smtp.host", host);
    props.put("mail.debug", "true");
    props.put("mail.transport.protocol", "smtp");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "25");

    Session mailSession = Session.getDefaultInstance(props, null);
    mailSession.setDebug(sessionDebug);

    Message msg = new MimeMessage(mailSession);
    msg.setFrom(new InternetAddress(from));
    InternetAddress[] address = {new InternetAddress(to)};
    msg.setRecipients(Message.RecipientType.TO, address);
    msg.setSubject(subject);
    msg.setContent(messageText, "text/html");

    Transport transport = mailSession.getTransport("smtp");
    transport.connect(host, user, pass);

    try {
        transport.sendMessage(msg, msg.getAllRecipients());
    }
    catch (Exception e) {
        System.out.println("Error" + e.getMessage());
    }
    transport.close();
} 
```

这是完整的堆栈跟踪

```
 javax.mail.MessagingException: Exception reading response; nested exception is: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
com.sun.mail.smtp.SMTPTransport.readServerResponse(SMTPTransport.java:1611)
com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1369)
com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412)
javax.mail.Service.connect(Service.java:288)
javax.mail.Service.connect(Service.java:169)
common.sendMail.(sendMail.java:35)
frontend.reply.sendfeedback(reply.java:74)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.apache.struts2.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:102)
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:776)
org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:705)
org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:898)
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T09:53:31.547

您好尝试为非 ssl smtp 连接添加以下属性

```
 props.put("mail.smtp.starttls.enable","false");
    props.put("mail.smtp.socketFactory.port", "25");
    props.put("mail.smtp.socketFactory.class", "");
    props.put("mail.smtp.socketFactory.fallback", "false"); 
```

例如**ssl**连接属性是

```
 Properties props = new Properties();
    props.put("mail.smtp.username", "email@gmail.com");
    props.put("mail.smtp.password", "password");
    props.put("mail.smtp.protocol", "smtp");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");
    props.put("mail.smtp.starttls.enable","true");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.socketFactory.port", "587");
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "false"); 
```

**非 ssl**属性是

```
 Properties props = new Properties();
    props.put("mail.smtp.user", "email@mydomain.com");
    props.put("mail.smtp.password", "password");
    props.put("mail.smtp.protocol", "smtp");
    props.put("mail.smtp.host", "smtp.mydomain.com");
    props.put("mail.smtp.port", "25");
    props.put("mail.smtp.starttls.enable","false");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.socketFactory.port", "25");
    props.put("mail.smtp.socketFactory.class", "");
    props.put("mail.smtp.socketFactory.fallback", "false"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T15:31:57.767

这条线

```
props.put("mail.smtp.starttls.enable","true"); 
```

正在此连接上启用 SSL；改成假的，或者干脆把它拿出来。

此属性名称末尾的点也是可疑的，尽管可能无害：

```
props.put("mail.transport.protocol.", "smtp"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:27:01.657

您需要使用协议获取`Transport`对象。`smtps`使用[Java Mail API](http://www.oracle.com/technetwork/java/javamail/index.html) 1.4.1 或更高版本。
我不确定早期版本是否支持此功能。
每个`smtp.jar`和都`imap.jar`包含一个`javamail.providers`以下列条目命名的资源文件：

```
# JavaMail SMTP provider Sun Microsystems, Inc
protocol=smtp; type=transport; class=com.sun.mail.smtp.SMTPTransport; vendor=Sun Microsystems, Inc;
protocol=smtps; type=transport; class=com.sun.mail.smtp.SMTPSSLTransport; vendor=Sun Microsystems, Inc;  

# JavaMail IMAP provider Sun Microsystems, Inc
protocol=imap; type=store; class=com.sun.mail.imap.IMAPStore; vendor=Sun Microsystems, Inc;
protocol=imaps; type=store; class=com.sun.mail.imap.IMAPSSLStore; vendor=Sun Microsystems, Inc; 
```

创建邮件会话对象时会加载这些资源。`DEBUG`跟踪如下：

```
DEBUG: JavaMail version 1.4.5
DEBUG: URL jar:file:/E:/Ravi/work/eclipse-workspace/temp/WebContent/WEB-INF/lib/smtp.jar!/META-INF/javamail.providers
DEBUG: successfully loaded resource: jar:file:/E:/Ravi/work/eclipse-workspace/temp/WebContent/WEB-INF/lib/smtp.jar!/META-INF/javamail.providers
DEBUG: Tables of loaded providers
DEBUG: Providers Listed By Class Name: {com.sun.mail.smtp.SMTPSSLTransport=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc], com.sun.mail.imap.IMAPSSLStore=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], com.sun.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun Microsystems, Inc], com.sun.mail.imap.IMAPStore=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], com.sun.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsy stems, Inc]}
DEBUG: Providers Listed By Protocol: {imaps=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], imap=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], smtps=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], pop3=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsy stems, Inc], smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc], pop3s=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun Microsystems, Inc]} 
```

我们需要获取一个`com.sun.mail.smtp.SMTPSSLTransport`使用`smtps`协议的实例。

```
Transport transport = mailSession.getTransport("smtps"); 
```

由于资源具有为此协议定义的提供者，因此`Transport`对象的生成没有任何异常。

```
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc] 
```

如果您的所有输入都是正确的，您将获得成功。`DEBUG`示例执行如下所示：

```
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL true
220 mx.google.com ESMTP d2sm12188996pbw.39
DEBUG SMTP: connected to host "smtp.gmail.com", port: 465

EHLO sreekarreddy
250-mx.google.com at your service, [117.195.223.189]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Attempt to authenticate
DEBUG SMTP: check mechanisms: LOGIN PLAIN DIGEST-MD5 NTLM 
DEBUG SMTP: AUTH LOGIN command trace suppressed
DEBUG SMTP: AUTH LOGIN succeeded
DEBUG SMTP: use8bit false
MAIL FROM:<rrarepally@gmail.com>
250 2.1.0 OK d2sm12188996pbw.39
RCPT TO:<rrarepally@gmail.com>
250 2.1.5 OK d2sm12188996pbw.39
DEBUG SMTP: Verified Addresses
DEBUG SMTP:   rrarepally@gmail.com
DATA
354  Go ahead d2sm12188996pbw.39
From: rrarepally@gmail.com
To: rrarepally@gmail.com
Message-ID: <19230370.0.1335124760953.JavaMail.Administrator@sreekarreddy>
Subject: test email over smtps
MIME-Version: 1.0
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

hello world
.
250 2.0.0 OK 1335124739 d2sm12188996pbw.39
QUIT
221 2.0.0 closing connection d2sm12188996pbw.39 
```

# html - 页面语言和格式无法正常工作

> ID：10269253
> 
> 赞同：1
> 
> 时间：2012-04-22T15:29:23.713
> 
> 标签：html

我的页面以中文显示，网址：[mytodo.just-flick.com/index.html](http://mytodo.just-flick.com)

我不确定问题是什么

当我在笔记本电脑上使用相同的 html 时，它工作正常。请帮助我不知道这有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:32:17.400

您正在混合 UTF-16 和 UTF-8 以及可能还有其他一些字符编码。而且您没有在文档中指定字符编码。

我不会解释字符集和字符编码是如何工作的，因为其他人已经这样做了。我会为您推荐这篇博文：http: [//www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

在你读完之后，你可以回来问你可能有的任何问题。

# c# - GridView 行更新和 DropList

> ID：10269256
> 
> 赞同：0
> 
> 时间：2012-04-22T15:29:44.340
> 
> 标签：c#, .net

`gridview`进入编辑模式时，我有一个带有下拉列表的列：

```
<asp:TemplateField HeaderText="genre" SortExpression="genre">
                    <EditItemTemplate>
                        <asp:DropDownList ID="DropDownList2" runat="server" 
                            DataSourceID="SqlDataSource1" DataTextField="name" DataValueField="name">
                        </asp:DropDownList>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Bind("genre") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField> 
```

现在我想把它带到`UpdateParameters`：`SqlDataSource`

```
 <UpdateParameters>
            <asp:ControlParameter ControlID="DropDownList2" Type="string" PropertyName="SelectedValue" Name="genre" />
    </UpdateParameters> 
```

但是当我按下时，他给了我错误信息

```
Could not find control 'DropDownList2' in ControlParameter 'genre'. 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:26:18.053

DropDownList2 是位于 Grid 下的嵌套控件；因此，您的 SqlDataSource 控件根本不具有 DropDownList2 的可见性。

您可以尝试使用 Updating 事件在后面的代码上分配值：

```
protected void SqlDataSource_Updating(object sender, SqlDataSourceCommandEventArgs e)
{
  e.Command.Parameters["@genre"].Value = GetDropDownListValue();
} 
```

**注意：**您需要在 GetDropDownListValue() 中使用 FindControl("DropDownList2")

# html - 为什么我不能强制表单元素扩展到 957px？

> ID：10269261
> 
> 赞同：-1
> 
> 时间：2012-04-22T15:30:12.887
> 
> 标签：html, css, layout

我试图强制这个表单元素扩展到 957px。这是页面。 [https://www.whiteribbonalliance.org/index.cfm/donate-usd](https://www.whiteribbonalliance.org/index.cfm/donate-usd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:35:11.900

如果您删除它，您将有机会扩展它：

*样式.css：57*：

```
#primary form {
    ...
    max-width: 504px;
} 
```

[`max-width`](https://developer.mozilla.org/en/CSS/max-width)，顾名思义，表示元素可以具有的最大宽度。

我通过简单地使用[Chrome Inspector](http://www.threetipsaday.com/2008/12/debug-inspect-google-chrome-inspector/)找到了它。

# jquery - jquery - 需要按 F5（刷新）才能看到内容

> ID：10269262
> 
> 赞同：0
> 
> 时间：2012-04-22T15:30:49.473
> 
> 标签：jquery, sql, refresh, populate

我无法理解如何使用 jquery 刷新网页...

我从这个测试页面开始：http: [//www.sogival.com/m-index.php](http://www.sogival.com/m-index.php) 从那里，我从一个 sql 数据库生成一个区域列表，列表的每个对象都指向一个网页，如下所示网址：[http](http://www.sogival.com/m-area.php?page_id=1) ://www.sogival.com/m-area.php?page_id= 1（或任何其他数字 1..7）。但是当我点击这些链接中的任何一个时，我得到一个几乎是空的页面，尽管 URL 是正确的，因为来自 sql 的部分没有被填充。但令我感到奇怪的是，如果我按 F5 键，则页面显示正常！这对我来说是一个真正的谜......为什么页面第一次没有正确显示？

我还有第二个问题：我想使用以下脚本来填充 jquery 页面上的 2 个不同区域，即 h3 和 h4。然而，无论我做什么，只有第一个术语（这里是 h3）被填充，第二个保持空！你能解释一下如何填充两者吗？请注意，在此示例中，data.items.length = 1，因此 for 循环仅传递一次。

```
<script type="text/javascript">
        $(function(){
        var list = '';
        $.getJSON("http://www.sogival.com/m-fetch.php",  // fichier
           {"page": "dest", "page_id": 35, "lang" : "fr"},  // paramètres
           function(data){  // fonction

           for (var i = 0; i < data.items.length; i++) { 
                   $("h3").append(data.items[i].name).listview("refresh");
                   $("h4").append(data.items[i].general).trigger("refresh");
           }
        });
    });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:36:42.073

这很可能是由于缓存。尝试添加时间戳以避免这种情况：

```
function myTimestamp(){
tstmp = new Date();    
return tstmp.getTime();
} 
```

然后在您的代码中：

```
$.getJSON("http://www.sogival.com/m-fetch.php?" + myTimestamp(),
// continue 
```

# awk - 用awk替换字段的第n个字符

> ID：10269268
> 
> 赞同：2
> 
> 时间：2012-04-22T15:31:55.040
> 
> 标签：awk

我有一个看起来像这样的文件

```
seq1 CT 5 CCCGCTGCTGATGAC  
seq2 AG 8 CTGTGTAGATGATGGGTTAGAG  
seq3 TG 3 CGTGTGACA 
```

我正在尝试用字段 2 中的字符串替换字段 4 的第 n 个字符，其中 n= 字段 3 指定的值。输出将是

```
seq1 CT 5 CCCGCTTGCTGATGAC  
seq2 AG 8 CTGTGTAAGATGATGGGTTAGAG  
seq3 TG 3 CGTGGTGACA 
```

我的尝试看起来像这样

```
awk '{a=$3; b=$2; sub(/(substr($4, a, 1))/,b);  print $0}’ 
```

我猜发生的事情是它将 sub 命令指定的内容视为字符串，而不是获取 substr 命令指定的字符串和变量 b。搜索后，我找不到正确的方法。

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:25:04.897

```
awk '{$4 = substr($4, 1, $3-1) $2 substr($4, $3+1); print}' 
```

# vba - 用于 VB 代码和 Excel 的单独文件

> ID：10269270
> 
> 赞同：3
> 
> 时间：2012-04-22T15:32:03.527
> 
> 标签：vba, excel

我正在使用 Excel 2010。我在后台 (VBA) 中有一些代码，这些代码不时增长。我正在尝试找到一种将源代码与 xls 文件分开的方法，以便我可以比较代码更改。换句话说，我希望代码在一个文本文件中，并且每次我打开 Excel 文件时，都会从这个文件中获取宏的源代码。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:06:32.273

看看[这个](https://stackoverflow.com/questions/608872/exporting-vba-code-from-multiple-excel-documents-to-put-into-version-control/1453989#1453989)关于 SO 的问题。

它提到了名为 SourceTools 的插件，我已经使用并发现它值得。
此外，它附带源代码，因此可以对其进行修改以将其指向特定于您使用的源代码控制软件（例如 SVN）。

请随意关闭此问题，因为我提供的链接与您的问题相同，并回答了我认为您正在寻找的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:02:36.990

查看可用于 VBA 的各种代码清理应用程序/代码，例如：

[http://www.appspro.com/Utilities/CodeCleaner.htm](http://www.appspro.com/Utilities/CodeCleaner.htm)

除其他外，这些将模块/表单/类导出到文本文件，删除它们，然后将它们重新插入到您的项目中。

使用一些模组，这将构成您所追求的基础。

另一种可能性：我在 Excel 中做的不多，但如果其加载项的行为类似于 PowerPoint 中的加载项，那也可能会有所帮助。在 PPT 中，已安装的加载项会在 PowerPoint 启动时自动加载，创建所需的任何用户界面，并可用于应用程序中的任何打开文件。要更新代码，你修改它，创建一个新的插件，把它放在 PPT 寻找它的任何地方，然后重新启动 PPT。瞧……所有 PPT 文件的代码都已更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T08:58:36.660

首先，谢谢大家的回答。我的解决方案是： 1\. 将所有模块导出到 *.bas（每个模块一个文件）。2.添加模块代码我的调用：

```
Application.VBE.ActiveVBProject.VBComponents.Import (filename) 
```

对于每个文件.. 3\. 完成后：

```
Set VBComp = VBProj.VBComponents(moduleName)
If Err.Number = 0 Then 'no error
    VBProj.VBComponents.Remove VBComp 
```

那是删除模块，因此在退出之前它不会保存在 xls 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T15:51:03.710

**在这种情况下，**我会推荐一个手动过程。****

 **假设您要备份`Module1`，然后右键单击它并单击“**导出文件**”。您将看到一个“**导出文件**”对话框。将其另存为，例如`Module1 - 22 Apr - 2012.bas`在相关位置。你完成了

**这有什么帮助？**

**1)**文件名中的日期将告诉您备份的日期，以便您实际跟踪宏更改的日期。

**2）** `.Bas`文件可以用记事本打开。这将帮助您将当前的 VBA 代码与相关的备份文件进行比较。

**3）**如果您想在任何时候从特定日期检索备份，只需删除现有模块（*如果需要，请对其进行备份*），然后单击“**导入文件**”并将其导入您的 VBA。

![在此处输入图像描述](../Images/8d9bd41fcd4691aec471743ec7dbb5dc.png)

高温高压**

# iphone - 将 NSMutableArray 保存到 iPhone 文档目录

> ID：10269272
> 
> 赞同：1
> 
> 时间：2012-04-22T15:32:19.563
> 
> 标签：iphone, objective-c, nsmutablearray, data-storage, writetofile

我正在尝试使用名为 Dog 的自定义类的对象创建一个可变数组，并将其保存到 iPhone 文档目录中的文件中，以便稍后从文件中读取并返回到我的应用程序中。我正在尝试使用 NSArray 的 writeToFile:atomically: 方法来完成这个，但是当我测试这个方法的结果时，它总是返回一个 NO 值，并且没有创建文件，也没有存储数组。我对此有几个问题。我应该将数组保存到什么文件格式？以原子方式将数组写入文件是什么意思？一旦数组存储在那里，我如何读出文件的内容最重要的是，为什么我的数组没有被存储到指定路径的文件中？提前感谢您，这是我在应用程序的 viewDidLoad 方法中使用的代码：

```
NSString *documentsDir = [NSSearchPathForDirectoriesInDomains
                          (NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex: 0];
dogFilePath = [documentsDir stringByAppendingPathComponent:@"arrayDogsFile.plist"];
NSFileManager *fileManager = [[NSFileManager alloc] init];

NSLog(@"%@",dogFilePath);

Dog *dog1 = [[Dog alloc] init];
dog1.name = @"Dog1";
Dog *dog2 = [[Dog alloc] init];
dog2.name = @"Dog2";
Dog *dog3 = [[Dog alloc] init];
dog3.name = @"Dog3";

NSMutableArray *arrayDogs = [NSMutableArray array];
[arrayDogs addObject: dog1];
[arrayDogs addObject: dog2];
[arrayDogs addObject: dog3];

//Sorts the array in alphabetical order according to name – compareDogNames: is defined in the Dog class
arrayDogs = (NSMutableArray *)[arrayDogs sortedArrayUsingSelector:@selector(compareDogNames:)];

if ([arrayDogs writeToFile:dogFilePath atomically:YES])
    NSLog(@"Data writing successful");
else
    NSLog(@"Data writing unsuccessful"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T19:47:11.377

您不能保存对象数组，因为对象不是 NSString、NSData、NSArray 或 NSDictionary。您可以使用[NSKeyArchiver 和 NSKeyUnArchiver](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Articles/creating.html#//apple_ref/doc/uid/20000949-BABGBHCA.)
**例如：**
`#import "Foundation/Foundation.h"`

```
@interface Dog : NSObject {**NSCoding**}//your class must conform to NSCoding Protocol  
@property (retain) NSString *Name;  
@end 
```

实现需要一些额外的代码。我们需要实现 NSCoding 协议，这意味着 **两个额外的方法。(initWithCoder: 和 encodeWithCoder:)**
`#import "Dog.h"`

```
@implementation Dog 
@synthesize Name;  
-(id)initWithCoder:(NSCoder*)decoder{    
    if ((self = [super init])) {  
        Name = [decoder decodeObjectForKey:@"Name"];  
}  
    return self;  
}

-(void)encodeWithCoder:(NSCoder*)encoder{  
    [encoder encodeObject:Name forKey:@"Name"];  
} 
```

实现协议后，保存将如下所示：
// Save 方法
// 我们初始化对象并设置值

```
Dog *dog1 = [[Dog alloc] init];  
dog1.Name= @"Dog1";  
Dog *dog2 = [[Dog alloc] init];  
dog2.Name= @"Dog2";  
Dog *dog3 = [[Dog alloc] init];  
dog3.Name= @"Dog3";    
NSMutableArray *arrayDogs = [NSMutableArray array];  
[arrayDogs addObject: dog1];  
[arrayDogs addObject: dog2];  
[arrayDogs addObject: dog3]; 
```

//根据名称按字母顺序对数组进行排序--compareDogNames：在Dog类中定义

```
arrayDogs = (NSMutableArray *)[arrayDogs sortedArrayUsingSelector:@selector(compareDogNames:)]; 
```

// 存储数组

```
[NSKeyedArchiver archiveRootObject:arrayDogs toFile:dogFilePath]; 
```

//加载数组*

```
NSMutableArray* retreivedADogObjs = [NSKeyedUnarchiver unarchiveObjectWithFile:dogFilePath]; 
@end 
```

希望它会帮助你
乐于助人。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:33:00.197

查看`NSKeyedArchiver`&`NSKeyedUnarchiver`具体来说，您要`+ archiveRootObject:toFile:`保存文件并`+ unarchiveObjectWithFile:`再次提取它。

您还需要在您的`Dog`课程中实现 NSCoding 协议才能完成这项工作。您只需要为您的每个属性使用类似`- encodeObject: forKey:`and的东西。`– decodeObjectForKey:`NSCoder 的文档将向您展示针对哪种属性类型使用哪种方法（例如使用`BOOL`s `- encodeBool: forKey:`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T17:15:49.947

**行业答案：** SDK 中有一个完整的主题，称为“[存档和序列化](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Articles/creating.html#//apple_ref/doc/uid/20000949-BABGBHCA)”。

**如果您没有时间学习，但您的狗有：** 教您的狗两个新技巧： 1\. 如何将自己呈现为字符串和整数的字典等等。2\. 如何从同一种字典中初始化自己。这基本上是工业答案的贫民区版本。

```
// Dog.m
- (NSDictionary *)asDictionary {

    NSMutableDictionary *answer = [NSMutableDictionary dictionary];
    [answer setValue:self.name forKey:@"name"];
    [answer setValue:self.numberOfBones forKey:@"numberOfBones"];
    return [NSDictionary dictionaryWithDictionary:answer];
}

- (id)initWithDictionary:(NSDictionary *)dictionary {

    self = [super init];
    if (self) {
        self.name = [dictionary valueForKey:@"name"];
        self.numberOfBones = [dictionary valueForKey:@"numberOfBones"];
    }
    return self;
} 
```

写作时：

```
[arrayDogs addObject: [dog1 asDictionary]]; 
```

# android - 当我尝试在 Mac OS X 上运行 Android 模拟器时，我得到“找不到命令”

> ID：10269274
> 
> 赞同：54
> 
> 时间：2012-04-22T15:32:25.413
> 
> 标签：android, macos, shell, emulation

当我使用[Mac OS X 终端](https://en.wikipedia.org/wiki/Terminal_%28OS_X%29)通过我的 Android 模拟器导航到该文件夹​​并键入`emulator`时，我得到：

> 找不到命令

这是发生的事情：

```
$ emulator
-bash: emulator: command not found 
```

我如何让它工作？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-22T15:35:46.863

当前[目录通常不包含在您`$PATH`的 *nix 操作系统](https://superuser.com/questions/156582/why-is-not-in-the-path-by-default)（如 OS X）中；要在当前目录中执行程序，请在其前面加上当前目录的路径 ( `.`)：

```
$ ./emulator 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-06-06T22:27:14.043

模拟器可以用 Android Studio 添加[https://developer.android.com/studio/run/managing-avds.html](https://developer.android.com/studio/run/managing-avds.html)

启动模拟器：`~/Library/Android/sdk/tools/emulator -avd Nexus_5X_API_23`

相关问题：[如何从命令行启动 Android 模拟器？](https://stackoverflow.com/questions/4974568/how-do-i-launch-the-android-emulator-from-the-command-line)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2021-07-27T13:44:51.443

# 解决方案

## 1.符号链接

> 脚步

1.  创建一个符号链接`emulator`

```
# soft link
$ ln -s ~/Library/Android/sdk/tools/emulator /usr/local/bin/emulator 
```

2.  调用命令

```
 # check all avd
$ emulator -list-avds

$ emulator @avd_name
# OR
$ emulator -avd avd_name 
```

[![在此处输入图像描述](../Images/e9992b44c716b96df6f164febc264a5a.png)](https://i.stack.imgur.com/g6NUN.png)

## 2.系统环境

1.  使用 vim/vscode 编辑环境

```
# zsh
$ vim  ~/.zshrc
# OR
$ code  ~/.zshrc 
```

2.  将以下行添加到`.zshrc`文件中

```
# export ANDROID_SDK_ROOT=/Users/xgqfrms/Library/Android/sdk

export ANDROID_SDK_ROOT=~/Library/Android/sdk
export ANDROID_HOME=~/Library/Android/sdk
export ANDROID_AVD_HOME=~/.android/avd 
```

3.  更新配置

```
# flush update
$ source ~/.zshrc 
```

## 参考

[https://developer.android.com/studio/run/emulator-commandline](https://developer.android.com/studio/run/emulator-commandline)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-23T00:48:07.797

打开安卓工作室。单击 AVD 管理器（带有 android 和手机的图标）[[示例图像：AVD 管理器](https://i.stack.imgur.com/z8uHT.png)]。请参阅模拟器列表。如果您没有，您应该会看到类似*“安装模拟器”的内容。*

成功后，您将下载***工具***文件夹到您的*~/Library/Android/sdk*

那是你想要的文件夹，因为它有*android*和*emulator*命令行工具。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-06-07T03:48:35.563

通常我从终端使用：

```
./Library/Android/sdk/emulator/emulator *some action* 
```

# c - strcmp 问题

> ID：10269279
> 
> 赞同：-1
> 
> 时间：2012-04-22T15:33:26.117
> 
> 标签：c

我需要将用户输入的内容与我之前使用 strncpy 存储的内容进行比较...我知道 strncpy 部分有效，当我将输入与 puser-> 用户名等进行比较时遇到问题...

```
int admin_signIn(struct profile *puser)
{
 int i=0;

 for(i=0;i<3;i++)
 {
  strncpy((puser+i)->UserName, "admin", strlen("admin")+1 );
  strncpy((puser+i)->Pwd, "password", strlen("password")+1 );

  printf("Enter admin user name:");
  fgets(input,10,stdin);
  rewind(stdin);   
  printf("Enter admin password:");
  fgets(input,10,stdin);

    //printf("the password is %s", puser->Pwd);    
   if(strcmp((puser+i)->UserName, input)==0 && strcmp((puser+i)->Pwd, input)==0)
    {
     printf("The Administrator username and password is incorrect, please try again\n");                                      

    }
   else
    {
     printf("the info is good\n");
    }

  }
   printf("max number of attepmpts exceded, goodbye!");   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:40:29.513

除了提到的其他问题之外，您似乎正在使用一个变量 ( `input`) 同时保存用户名和密码；这似乎不太可能成功......

```
 printf("Enter admin user name:");
 fgets(input,10,stdin);
 rewind(stdin);   
 printf("Enter admin password:");
 fgets(input,10,stdin);
if(strcmp((puser+i)->UserName, input)==0 && strcmp((puser+i)->Pwd, input)==0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:10:01.157

也试试这个：

代替：

```
 strncpy((puser+i)->UserName, "admin", strlen("admin")+1 );
  strncpy((puser+i)->Pwd, "password", strlen("password")+1 ); 
```

你可以做：

```
strcpy((puser + i)->UserName, "admin");
strcpy((puser + i)->Pwd, "password"); 
```

和

```
 char password[10];
  char username[10];

  fgets(username,10,stdin);
  rewind(stdin);   
  printf("Enter admin password:");
  fgets(password,10,stdin); 
```

接着：

```
 if(strcmp((puser+i)->UserName, username)==0 && strcmp((puser+i)->Pwd, password)==0)
   {
      /* correct username and password. Do something.. */
   } 
```

现在您正在比较用户输入的用户名和密码。

# c# - 为什么我的按钮没有出现在 ContentPresenter 区域中？

> ID：10269284
> 
> 赞同：0
> 
> 时间：2012-04-22T15:34:04.683
> 
> 标签：c#, .net, wpf

```
<ContentControl x:Class="Test.MyControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="200" Height="200" >
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Rectangle Fill="Blue"/>
        <ContentPresenter Grid.Row="1" Content="{TemplateBinding ContentControl.Content}" />
        <Rectangle Fill="Yellow" Grid.Row="2"/>
    </Grid>
</ContentControl>

<Window x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Test="clr-namespace:Test" Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Test:MyControl2>
            <Button/>
        </Test:MyControl2>
    </Grid>
</Window> 
```

Button 应该出现在蓝色和黄色矩形之间。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:23:09.780

问题是您定义 ContentControl 的内容两次：一次在 ContentControl 中，一次在`Window.xaml`. 中的内容`Window.xaml`会覆盖 ContentControl 中的内容，因此您会看到一个按钮，其上方和下方没有彩色矩形。

如果要更改 ContentControl 中内容的呈现方式，则需要将相关标记放在 ContentControl 中`ContentTemplate`。您在上面展示的 ContentControl 需要如下所示：

```
<ContentControl x:Class="Test.MyControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         Width="200" Height="200" >
    <ContentControl.ContentTemplate>
        <DataTemplate>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Rectangle Fill="Blue"/>
                <ContentPresenter Grid.Row="1" Content="{TemplateBinding ContentControl.Content}" />
                <Rectangle Fill="Yellow" Grid.Row="2"/>
            </Grid>
        </DataTemplate>
    </ContentControl.ContentTemplate>
</ContentControl> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T15:38:07.323

我不是专业人士，但我会更改以下内容：

```
 <Rectangle Fill="Blue"/>
    <ContentPresenter Grid.Row="1" Content="{TemplateBinding ContentControl.Content}" />
    <Rectangle Fill="Yellow" Grid.Row="2"/> 
```

对此：

```
 <Rectangle Fill="Blue" Grid.Row="0"/>
    <ContentPresenter Grid.Row="1" Content="{TemplateBinding ContentControl.Content}" />
    <Rectangle Fill="Yellow" Grid.Row="2"/> 
```

简短：您忘记为第一个定义行。

# android - 如何为上下文操作栏中的任何 MenuItem 创建类似下拉列表的操作溢出

> ID：10269285
> 
> 赞同：4
> 
> 时间：2012-04-22T15:34:10.813
> 
> 标签：android, drop-down-menu, android-actionbar

我想在上下文操作栏或操作模式中的多个菜单项上创建下拉列表，例如“操作溢出”菜单项显示的内容。我认为这是可能的，因为 Action Overflow MenuItem 确实使用了一个，但是有人可以指出我正确的方向以允许其他 MenuItems 使用一个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:08:42.623

如果我可以为有同样问题的人回答我自己的问题，我发现了如何做到这一点。我发现您可以使用[PopupMenu](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)或[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)并将其设置为在锚点视图的左下角显示为下拉菜单。您还可以移动它，使其看起来好像来自上下文操作栏中按下的项目

# c# - 使用 ArrayList 创建动态用户界面

> ID：10269286
> 
> 赞同：1
> 
> 时间：2012-04-22T15:34:15.840
> 
> 标签：c#

我正在创建将某些项目添加到目录的程序，我将所有项目从**图书馆表格**发送到**目录表格**。每次我单击添加按钮时，新项目都会以目录形式出现。此外，每个项目详细信息都保存在**ArrayList NewItem**中，因此添加到静态类**Item**中。

所有项目都以编程方式添加到**Catalog form**，但是每次我添加新项目时，它都会覆盖以前的项目，因此目录表单看起来与图片中的相似，除了它更像这样：

> 兰博 1
> 
> 兰博 1
> 
> 兰博 2

有什么建议吗？

这是添加新项目的代码示例。

```
ArrayList hello = new ArrayList();

// NewItem is ArrayList into which all the item details are originally added

private void addItem(ArrayList NewItem)
{
    foreach (object obj in NewItem)
    {
        Item st = (Item)obj;
        String iname= st.IName.ToString();

        int helloe = hello.Count;
        for (int i = 0; i < helloe ; i++)
        {
            hello.Add(new Label());
            System.Drawing.Point p = 
                new System.Drawing.Point(35, 120+ helloe * 25);

            (hello[helloe] as Label).Location = p;
            (hello[helloe] as Label).Size = new System.Drawing.Size(80, 20);

            (hello[helloe] as Label).Text = iname.ToString();

            Catalouge.Controls.Add(hello[helloe] as Label); 
```

![样本表格](../Images/f64c6cce7ad7bd91cb43375159c8fb27.png)

# html - 怎么安排很多 元素并排没有换行

> ID：10269290
> 
> 赞同：21
> 
> 时间：2012-04-22T15:34:34.010
> 
> 标签：html, css, css-float

一个容器 div 中有三个并排的 div 元素，宽度小于子元素的总宽度。[在这里](http://jsfiddle.net/SasDh/)你可以找到案例的小提琴：

我想让容器 div 水平滚动以显示其他孩子。

如何安排孩子不要包裹在容器 div 内？它现在垂直滚动，我希望它水平滚动。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-22T15:36:52.840

更改并添加`float: left`到容器。`display: inline-block;``white-space: nowrap`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T15:40:30.090

您需要`div`在滚动`div`中的另一个总宽度等于其子项的所有宽度。

见：http: [//jsfiddle.net/joshdavenport/SasDh/2/](http://jsfiddle.net/joshdavenport/SasDh/2/)

那里已经有一个额外的`div`所以我用了那个

奖励：要摆脱垂直滚动条，请使用`overflow-y: hidden`. 见：http: [//jsfiddle.net/joshdavenport/SasDh/3/](http://jsfiddle.net/joshdavenport/SasDh/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-27T11:55:46.790

标签用于对文档中的`<span>`内联元素进行分组。
[（资源）](http://www.w3schools.com/tags/tag_span.asp)

# html - Rails 和 html 表格

> ID：10269293
> 
> 赞同：1
> 
> 时间：2012-04-22T15:34:59.593
> 
> 标签：html, ruby-on-rails-3, html-table

我正在使用 rails，我想知道我正在尝试做的事情是否可以使用 html 表。我正在迭代一个具有许多类别的对象。每个类别都有一本或多本书籍，每本书都作为“页面”属性。我想创建一个如下所示的表：

```
**category**     **book name**     **pages**
general            book1             15
                   book2             20
                   book3             40 
```

我相信这将对应于表中的一行，但最后两列显然有多行。我已经能够使用如下代码完成此操作：

```
<table>
  <thead><th>category</th><th>book name</th><th>pages</th></thead>
  <tbody>
    <% category.each do |c| %>
    <tr>
      <td><%= c.name %></td>
      <td>
        <% c.books.each do |b| %>
          <%= b.name %><br />
        <% end %>
      </td>
      <td>
        <% c.books.each do |b| %>
          <%= b.pages %><br />
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table> 
```

如您所见，我在 c.books 上迭代了两次，这看起来很乱。有没有办法在只迭代一次 c.books 时做到这一点？我很想听听任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:48:44.897

如果您不介意将每本书放在表格中的单独行上，则可以在第一行之后省略类别名称并获得与上述相同的格式。这是 html.erb 代码：

```
<table>
  <thead><th>category</th><th>book name</th><th>pages</th></thead>
  <tbody>
    <% category.each do |c| %>
    <% first_row = true %>
    <% c.books.each do |b| %>
      <tr>
        <% if first_row == true %>
          <td> <%= c.name %> </td>
          <% first_row = false %>
        <% else %>
          <td></td>
        <% end %>
        <td> <%= b.name %> </td>
        <td> <%= b.pages %> </td>
      </tr>
    <% end %>
    <% end %>
  </tbody>
</table> 
```

希望这可以帮助！

# ruby-on-rails - 将博客文章分组到一个 time_ago_in_words 下

> ID：10269299
> 
> 赞同：0
> 
> 时间：2012-04-22T15:35:23.423
> 
> 标签：ruby-on-rails, ruby, view

我在用

```
time_ago_in_words(post.created_at) 
```

列出我的博客条目时。

而不是每个列表都在该帖子标题中列出 time_ago_in_words，我希望在一个标题下有不同帖子的组，例如，我可能在“30 分钟前”下有一个帖子，在“一个月前”下有 8 个帖子

任何人都可以推荐最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:06:52.530

您是否意识到这`time_ago_in_words`是一种用 Ruby 语言编写的方法，因此您不能在您的 sql 查询中使用它来执行 DB 的分组和计数计算？

如果您有很多帖子，则必须制作一些 sql-query 来对帖子进行分组。

但是，如果您说您的帖子数量并不多，那么您可以使用简单的方法：

```
# in a controller
@posts_map = Post.order('created_at DESC').all.group_by{|post| time_ago_in_words post.created_at }

# in a view
- @posts_map.each do |time, posts|
  %h2 Created #{time} ago (#{posts.length}):
  - posts.each do |post|
    %h3= link_to post.title, post 
```

# java - 将 int[] 转换为 ArrayList

> ID：10269300
> 
> 赞同：13
> 
> 时间：2012-04-22T15:35:29.320
> 
> 标签：java, arrays, arraylist

`int[]`将数组元素重新复制到的最佳方法是什么`ArrayList`？

我需要快速做到这一点，那么最快的方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-22T15:54:11.520

ArrayList 不是 int 等原语的最佳存储方式。ArrayList 存储对象而不是基元。有用于带有原语的列表的库。如果您真的想将所有原语存储`int`为一个`Integer`对象，则必须使用它们一一进行转换`Integer.valueOf(...)`（因此您不需要在不需要时创建额外的 Integer 实例）。

虽然您可以这样做：

```
List<Integer> list = Arrays.asList(1, 2, 3); 
```

你不能做这个：

```
int[] i = { 1, 2, 3 };
List<Integer> list = Arrays.asList(i); // this will get you List<int[]> 
```

因为数组实际上是一个对象，并且在使用 int 等原语时在 var-args 中也被视为对象。对象数组虽然有效：

```
List<Object> list = Arrays.asList(new Object[2]); 
```

所以类似于：

```
int[] array = { 1, 2, 3 };
ArrayList<Integer> list = new ArrayList<Integer>(array.length);
for (int i = 0; i < array.length; i++)
  list.add(Integer.valueOf(array[i])); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-22T15:37:54.087

用于[`Arrays#asList(T... a)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)创建*“由指定数组支持的固定大小的列表。（更改返回的列表“写入”到数组。）”*

```
Integer[] intArray = {1, 2, 3, 42}; // cannot use int[] here
List<Integer> intList = Arrays.asList(intArray); 
```

或者，解耦这两种数据结构：

```
List<Integer> intList = new ArrayList<Integer>(intArray.length);

for (int i=0; i<intArray.length; i++)
{
    intList.add(intArray[i]);
} 
```

或者更简洁：

```
List<Integer> intList = new ArrayList<Integer>(Arrays.asList(intArray)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-22T16:17:31.063

使用[Guava](http://guava-libraries.googlecode.com)，您无需担心`Integer[]`：

```
int[] array;
List<Integer> list = Ints.asList(array); 
```

如果你想要一个`ArrayList`，那就是

```
List<Integer> list = Lists.newArrayList(Ints.asList(array)); 
```

（披露：我为 Guava 做出了贡献。）

否则，如果你只有一个`int[]`，你必须用老式的方式来做：

```
int[] array;
List<Integer> list = new ArrayList<>(array.length);
for (int val : array) {
  list.add(val);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T16:46:32.200

我还将提供一个替代答案，这取决于 List 的使用方式，这可以更好地执行（创建速度更快，并且只有实际使用的 int 被转换，但它们总是被转换，而不仅仅是第一次，所以重复获取相同的元素更糟）。在数组周围创建一个简单的包装器列表：

```
final int[] array = {1, 2, 3};
List list = new AbstractList<Integer>() {

     public Integer get(int index) {
       return array[index];
     }

     public Integer set(int index, Integer value) {
       //or just throw new UnsupportedOperationException("..."); if not needed
       Integer old = array[index];
       array[index] = value;
       return old;
     }

     public int size() {
       return array.length;
     }
}; 
```

或在为您创建它的方法中：

```
static List<Integer> asList(final int[] array) {
  return new AbstractList<Integer>() { ...
             };
} 
```

# python - 无法使用 SWIG 将在 C++ 中创建的 UTF-16 字符串缓冲区转换为 python

> ID：10269302
> 
> 赞同：1
> 
> 时间：2012-04-22T15:35:35.790
> 
> 标签：python, unicode, swig

我有一个要在 Python 中使用的 C++ 函数：

```
struct DataWrap
{
    wchar_t* data;
    int size;
}

extern int fun1( const char* szInBuffer, unsigned int inSize,DataWrap* buff); 
```

`fun1`接受一个给定的大小为`char`s的数组，并返回一个新分配的 UTF-16 字符串`szInBuffer``inSize``dataWrap->data`

我想`fun1`从 Python 中使用这个函数。

```
%typemap(argout) DataWrap* buff{
                int byteorder = -1;
                $input = PyUnicode_DecodeUTF16( (const char*)($1->data), ($1->size)*sizeof(wchar_t) , NULL, &byteorder);
} 
```

这确实有效，但是这里存在内存泄漏，因为`dataWrap->data`分配的 by`fun1`永远不会被释放。

我试图像这样解决这个问题：

```
%typemap(argout) DataWrap* buff{
            int byteorder = -1;
            $input = PyUnicode_DecodeUTF16( (const char*)($1->data), ($1->size)*sizeof(wchar_t) , NULL, &byteorder);
            delete $1;
        } 
```

现在代码崩溃了。

我究竟做错了什么？这就是使用 SWIG 将 UTF-16 字符串输入 Python 的正确原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:08:41.547

尝试`freearg`类型映射：

```
%typemap(freearg) DataWrap *buff {
    delete $1->data;
} 
```

另外，你有`delete $1;`. 应该是`delete $1->data`吗？

**编辑**

我在处理这个问题时发现了另一个可能与您的问题有关的问题。如果您在 Windows 上并且您的实现`fun1`在与 SWIG 包装器代码不同的 DLL 中，请确保使两个 DLL 链接到同一个 C 运行时 DLL（`/MD`例如，通过 Microsoft VC++ 中的编译器开关），因为内存会然后在一个DLL中分配（`new`我假设）并在另一个DLL中释放。

这是我正在玩的代码。它可能会帮助你。它还包括一个用于消除从 Python 发送字符串和大小的类型映射和一个用于生成临时 DataWrap 对象的类型映射，因此它也不必传递。在实现文件`x.cpp`中，我伪造了一个将字符串转换为 UTF16 的实现，该实现仅适用于简单的 ASCII 字符串。

另请注意，我在不使用类型映射的情况下让它工作`freearg`，尽管使用类型映射也对我有用。

### 生成文件

```
_x.pyd: x_wrap.cxx x.dll
    cl /MD /nologo /LD /Zi /EHsc /W4 x_wrap.cxx /Id:\dev\python27\include -link /LIBPATH:d:\dev\python27\libs /OUT:_x.pyd x.lib

x.dll: x.cpp x.h
    cl /MD /nologo /Zi /LD /EHsc /W4 x.cpp

x_wrap.cxx: x.h x.i
    swig -python -c++ x.i 
```

### 十一

```
%module x

%begin %{
#pragma warning(disable:4127 4211 4706)
%}

%{
    #include "x.h"
%}

%include <windows.i>

%typemap(in) (const char *szInBuffer,unsigned int inSize) {
   if (!PyString_Check($input)) {
       PyErr_SetString(PyExc_ValueError, "Expecting a string");
       return NULL;
   }
   $1 = PyString_AsString($input);
   $2 = PyString_Size($input);
}

%typemap(in, numinputs=0) DataWrap* buff (DataWrap temp) {
   $1 = &temp;
}

%typemap(argout) DataWrap* buff {
    int byteorder = -1;
    $result = PyUnicode_DecodeUTF16((const char*)($1->data), ($1->size)*sizeof(wchar_t), NULL, &byteorder);
    delete [] $1->data;
}

%include "x.h" 
```

### xh

```
#ifdef API_EXPORTS
#   define API __declspec(dllexport)
#else
#   define API __declspec(dllimport)
#endif

struct DataWrap
{
    wchar_t* data;
    int size;
};

extern "C" API void fun1(const char* szInBuffer, unsigned int inSize, DataWrap* buff); 
```

### x.cpp

```
#include <stdlib.h>

#define API_EXPORTS
#include "x.h"

API void fun1(const char* szInBuffer, unsigned int inSize, DataWrap* buff)
{
    unsigned int i;
    buff->size = inSize;
    buff->data = new wchar_t[inSize];
    for(i = 0; i < inSize; i++)
        buff->data[i] = szInBuffer[i];
} 
```

### 输出

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import x
>>> x.fun1('abc')
u'abc' 
```

# html - ie7 错误 - 在某些 wordpress 页面中 div 从屏幕上滑落

> ID：10269305
> 
> 赞同：0
> 
> 时间：2012-04-22T15:36:07.120
> 
> 标签：html, css, wordpress, internet-explorer-7

我正在处理的 wordpress 网站的 2 页上有一个奇怪的 ie7 错误。

某些 div 似乎滑到了奇怪的位置，其中一个完全是屏幕： [http](http://danabick-shanuni.co.il/?page_id=46) ://danabick-shanuni.co.il/?page_id=46 另一个： [http ://danabick-shanuni.co.il /?cat=5](http://danabick-shanuni.co.il/?cat=5)

此外，可能与我无关，页脚中“创建者”链接的内容也混淆了。

我试图看看问题出在哪里，并在 ie7 中给有问题的部分一个红色边框，真正奇怪的是边框实际上在正确的位置，但内容不在边框区域内。有什么想法可能导致这种情况吗？

提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:42:42.820

新的 html5 标签（例如`article`）在 IE7 中是未知的。尝试在 html 中添加以下内容`head`：

```
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

=== 更新 ===

html-tag的`dir="rtl"`属性在IE7中出现问题，能去掉吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:03:37.500

所以，有人为我找到了问题的答案：显然，一些 wordpress css 添加了“position:relative;” 到那里的文章。

删除了 - 问题解决了...... :)

# restsharp - restsharp WP7 JSON 日期时间格式序列化

> ID：10269312
> 
> 赞同：1
> 
> 时间：2012-04-22T15:36:41.807
> 
> 标签：restsharp

restsharp 文档说 JsonSerializer 默认支持 ISO 和 Javascript 日期对象 JSON 日期样式。在我的 WP7 应用程序中，它默认为 ISO 样式，我怎样才能告诉它使用 Javascript 日期对象样式呢？我看不到，也找不到一个明显的答案。谢谢！

# c++ - 使用 C++ 模板类和在单独的头文件中定义的嵌套类链接错误

> ID：10269315
> 
> 赞同：4
> 
> 时间：2012-04-22T15:36:56.173
> 
> 标签：c++, class, templates

对于我的 C++ 课程的家庭作业，我必须创建一个链表数据结构。我现在有两节课。List 类（它是一个模板类）和 Link 类。Link 类嵌套在 List 类中，但是，我试图在单独的头文件中定义它。我遇到的问题来自我对链接过程的工作原理缺乏了解。这就是我所拥有的。

**List.h 的内容**

```
#ifndef _LIST_H_
#define _LIST_H_

template <class T>
class List
{
protected:
  class Link;

public:
  List() : _head(nullptr) { }
  ~List() { }

  void PushFront(T object)
  {
    // !! Attention !!
    // When I uncomment this line I get the error:
    // error C2514: 'List<T>::Link' : class has no constructors...
    // My problem is the compiler doesn't know what Link is yet (I'm assuming).

    //_head = new Link(object, _head);
  }

protected:
  Link* _head;
};

#endif // _LIST_H_ 
```

**Link.h 的内容**

```
#ifndef _LINK_H_
#define _LINK_H_

#include "List.h"

template <class T>
class List<T>::Link
{
public:
  Link(T object, Link* next = nullptr)
    : _object(object), _next(next) { }
  ~Link() { }

private:
  T     _object;
  Link* _next;
};

#endif // _LINK_H_ 
```

**main.cpp 的内容（入口点）**

```
#include "List.h"

int main()
{
  int b = 5;
  List<int> a;
  a.PushFront(b); // If I comment this line, then the code compiles fine.
} 
```

我确定这是正在发生的链接错误。类似于我在微软网站上查找的这个错误（[http://msdn.microsoft.com/en-us/library/4ce3zbbc.aspx](http://msdn.microsoft.com/en-us/library/4ce3zbbc.aspx)），但是，我不确定如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:41:18.120

通过`#include`s 的完成方式，编译器没有查看`Link.h`- 所以它无法找到并生成它需要的类。

# c++ - 泛型函数中的模板参数

> ID：10269318
> 
> 赞同：1
> 
> 时间：2012-04-22T15:37:24.270
> 
> 标签：c++, templates

我正在解决 Accelerate c++ 的练习题，即

> 实现我们在 §8.2.5/148 中使用的交换函数。为什么我们调用 swap 而不是直接交换 *beg 和 *end 的值？提示：试试看。

书中的实际功能是

```
template<class Bi> void reverse(Bi begin, Bi end) {
while (begin != end) {
       --end;
        if (begin != end)
           swap(*begin++, *end);
     } } 
```

我变成了这个

```
template<class Bi,class X> 
void reverse(Bi b, Bi e)
{
    X tmp;
    while (b!= e) {
        --e;
        if (b != e)
        {
           tmp=*b;
           *b=*a;
           *a=tmp;
            --b;
        }   
    }
} 
```

它没有用，给出了以下错误。

> 没有匹配函数调用 reverse(std::vector::iterator,std::vector::iterator)'

比我变成这个

```
template<class Bi,class X> 
void reverse(Bi b, Bi e,X c)
{
    X tmp=c;
    while (b!= e) {
        --e;
        if (b != e)
        {
           tmp=*b;
           *b=*a;
           *a=tmp;
            --b;
        }   
    }
} 
```

并将上述函数称为

```
reverse(v.begin(),v.end(),0); 
```

它起作用了，但我仍然不明白为什么第二个不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:47:51.277

编译器无法推断`X`代码中的内容。但是不需要为迭代器中包含的数据类型指定额外的模板类型。`std::iterator`包含一个 typedef，命名`value_type`它服务于这个确切的目的：

```
template<class Bi> 
void reverse(Bi b, Bi e)
{
    typename Bi::value_type tmp;
    while (b!= e) {
        --e;
        if (b != e)
        {
           tmp=*b;
           *b=*a;
           *a=tmp;
            --b;
        }   
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:55:53.790

您的问题在于新引入的模板参数`X`无法由编译器确定，因为它不依赖于参数。因此，调用者`reverse`必须指定它。他们显然没有，因此编译器拒绝了代码。

因为类型`X`实际上确实取决于传递给函数的迭代器类型，所以您可以使用`value_type`type from [`iterator_traits`](http://www.cplusplus.com/reference/std/iterator/iterator_traits/)。但是，这样做将要求用户对您的函数使用高级迭代器，`reverse`您也不想这样做。

C++11 必须[`decltype`](http://en.wikipedia.org/wiki/Decltype)解决类似的问题。但是您可能不希望代码依赖于全新的功能，因为许多编译器不支持它。

此外，您的代码正在执行对象的不必要副本以将其移入和移出临时变量。这可能不适用于没有复制运算符（或复制构造函数）的高级对象。在 C++11 中，同样存在右值引用和移动语义。但即便如此 - 可能没有默认构造函数，因此您的代码会中断。

理论上，您可以使用类型特征来确定传递给的对象的类型，`reverse`并使用模板特化来提出不同的实现，但实际上……`swap`是使用函数重载，因此可以自动确定类型，它支持 C 的移动语义++11 等。例如，如果它没有被内联，并且为每个元素推送/弹出框架，那么使用它将会是一个问题。但事实并非如此。

此外，`swap`可以专门化自己。例如，对于 POD 类型，它可以`XOR`用来交换两个元素的内容，而无需创建额外的副本。无论如何，现代编译器都会为您做到这一点，但这只是一个想法......

所以你最好使用`swap`:)

# javascript - 附加脚本未接收到的函数/回调发送的内容脚本事件

> ID：10269321
> 
> 赞同：0
> 
> 时间：2012-04-22T15:37:27.440
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在使用`context-menu`项目单击来显示一个对话框（使用 JQuery/Bootstrap），该对话框允许用户通过 AJAX 将他们选择的文本提交到 Web 服务（这一切都很好）。提交后，我打算显示一个附加 SDK`notification`来表示“感谢您的提交”。

现在，我知道我需要从内容脚本向附加脚本发送一条消息以显示通知，但是从回调函数发送时我的消息没有到达。

我的附加代码（摘录）：

```
var pageMod = require("page-mod");
pageMod.PageMod({
  include: ['*'],
  contentScriptWhen: "end",
  contentScriptFile: [ data.url("js/content.js") ],

  onAttach: function onAttach( worker, mod) {
    worker.port.on("submittedNotif", function(msg) {
        console.log('Hello');
        notifications.notify({ ... });
    })
  }
}); 
```

内容脚本如下。我已经指出了消息到达和没有到达的情况。

```
// Handle the context-menu Item's click and show the dialog

self.on("click", function(node,data) {
    self.port.emit("submittedNotif", '*** DOES NOT ARRIVE ***');
    showDialog( 'DialogName', function (response) { /* Do stuff */ });
})

self.port.emit("submittedNotif", '*** Arrives OK ***');

function showDialog( str, response) {
    // Dialog stuff
    self.port.emit("submittedNotif", '*** DOES NOT ARRIVE ***');
} 
```

我被告知`self`是一个全局对象，所以我当然不必将它作为参数传递。我只是不清楚如何尝试发送 via`self.port.emit`应该根据它在内容脚本中的使用位置而有所不同。例如，我不知道有任何线程问题。也许这是我的 JavaScript 知识的一个空白，但谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:30:11.320

我不清楚点击事件来自哪里

```
self.on('click') 
```

相反，您需要做的是将单击处理程序绑定到页面 DOM 中将被单击的某些内容，例如您提到的对话框。查看这个相当简单的构建器示例，它通过在显示确认对话框时发出事件来完成此操作：

[https://builder.addons.mozilla.org/addon/1049875/latest/](https://builder.addons.mozilla.org/addon/1049875/latest/)

主.js：

```
var data = require("self").data;
var notifications = require("notifications");
var pageMod = require("page-mod");
pageMod.PageMod({
  include: ['*'],
  contentScriptWhen: "end",
  contentScriptFile: [ data.url("jquery.js"), data.url("content.js") ],

  onAttach: function onAttach( worker, mod) {
    worker.port.on("submittedNotif", function(msg) {
        notifications.notify({
            title: 'Notification!',
            text: 'This is the notification: '+ msg
        });
    })
  }
}); 
```

内容.js：

```
$(function() {
    if(confirm("send submitted event?")) {
        self.port.emit("submittedNotif", '*** DOES NOT ARRIVE ***');
        showDialog( 'DialogName', function (response) { /* Do stuff */ });
    }
});

//self.port.emit("submittedNotif", '*** Arrives OK ***');

function showDialog( str, response) {
    // Dialog stuff
    self.port.emit("submittedNotif", '*** DOES NOT ARRIVE ***');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:30:11.027

我解决了我自己的问题。这是我学到的方法和方法。

首先，内容脚本和`context-menu`项目的点击处理程序：

```
self.on("click", function(node,data) {
    self.postMessage({ kind:'submittedNotif', msg: 'Just clicked'})
    showDialog( self, 'DialogName', function (response) { /* Do stuff */ });
}) 
```

现在，旧的`self.port.emit`让我无处可去，但切换到`self.postMessage`并添加`onMessage()`到`context-menu`项目最终给了我想要的事件。

我现在也传递`self`给`showDialog()`方法 [这违背了我被告知`self`的全局......？！]，作为参数'eventHandler'：

```
function showDialog( eventHandler, str, response) {
    // Dialog stuff
    eventHandler.postMessage({ kind:'submittedNotif', msg: 'Thank you for your submission'});
} 
```

再次，我放弃`self.port.emit`，切换到`self.postMessage`，并在传入的处理程序上调用它。

最后，`notifications.notify({ ... });`调用从`PageMod`'s移动`onAttach()`到菜单 Item's `onMessage()`。简而言之，响应该点击而发生的一切现在都发生在菜单项的范围内。

**现在一切正常。**回想起来，这一切似乎都是显而易见的——但文档肯定是混淆而不是澄清，尤其是`port`和`postMessage()`

# regex - 在 Perl 的字符串中匹配并保存一个或多个匹配项

> ID：10269322
> 
> 赞同：0
> 
> 时间：2012-04-22T15:37:33.867
> 
> 标签：regex, perl

我有一个以 hh:mm:ss 格式包含一次或多次的字符串。我创建了这个正则表达式来尝试通过分组来节省时间，这样我就可以做一些工作：

```
if ( $s =~ /(.*)(\d{2}:\d{2}:\d{2})(.*)(\d{2}:\d{2}:\d{2})(.*)(\d{2}:\d{2}:\d{2})(.*)/ )
{
  my @t = ( $2, $5, $8 );
  # loop through times and do stuff
}
else
{
  # no match found
} 
```

问题是字符串可能有一个、两个或三个嵌入时间——而且这个正则表达式似乎只在三个都存在时才有效（不是一两个）。有没有更好的方法来做到这一点（并避免任何“使用未初始化的值”警告！）？

我试过这个，但它只抓住了最后一次：

```
/(.*)(\d{2}:\d{2}:\d{2})(.*)(\d{2}:\d{2}:\d{2})?(.*)(\d{2}:\d{2}:\d{2})?(.*)/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T16:03:30.360

[`g`局部](http://p3rl.org/op#%2fPATTERN%2fmsixpodualgc)匹配以重复模式。如果您要做的只是将它们立即分配给一些更好命名的变量，请避免使用 backref 变量；匹配运算符已返回捕获缓冲区结果。

```
use Data::Dumper qw(Dumper);
my $timestamp = qr'
    (?<!\d)            # avoid digits before
    \d{2}:\d{2}:\d{2}  # hh:mm:ss
    (?!\d)             # avoid digits after
'x;

for my $s (qw(
    foo18:00:00bar18:00:00baz18:00:00quux
    foo18:00:00bar18:00:00baz
    foo18:00:00bar
)) {
    if (my @t = $s =~ /($timestamp)/g) {
        print Dumper \@t;
    }
} 
```

# java - Java-Junit/对Junit方法的误解

> ID：10269324
> 
> 赞同：0
> 
> 时间：2012-04-22T15:37:51.217
> 
> 标签：java, junit

我有一个方法：`doctorQueue`，它获取三个参数：数据类型（通过 java.util.Date）、时间和 ID（字符串）。

返回值为`void`，如果同时已经有队列，则给出异常。

我使用 Junit 编写了下一个方法：

```
public void checkQueueDoctor(){
Date date = new Date (2012,4,25);
Time time = new Time (13, 0, 0);
assertTrue(doctorQueue("83849829", date, time));
..... // and so on
} 
```

它给了我下一个问题：`The method assertTrue(boolean) in the type Assert is not applicable for the arguments (void)`.

我当然理解它，但是我如何检查函数，它的返回值是无效的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:44:20.120

如果要测试 void 方法没有抛出异常，常见的模式是：

```
try {
  doctorQueue("83849829", date, time);
  // if we make it to this line, success!
} catch (Exception e) {
  fail("queue adding threw an exception");
} 
```

如果您有另一种情况要检查该方法*是否*抛出异常，只需将失败调用移至另一个块：

```
try {
  doctorQueue(alreadyPresentElement, date, time);
  fail("expected an exception but didn't get one!");      
} catch (Exception e) {
  // we expected an exception and got it! Success!
} 
```

（顺便说一句，在任何一种情况下，捕获一个更具体的异常可能比仅仅捕获更好`Exception`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:52:55.907

```
public void checkQueueDoctor(){
  Date date = new Date (2012,4,25);
  Time time = new Time (13, 0, 0);
  doctorQueue("83849829", date, time);
   ..... // and so on
} 
```

足够了。如果抛出异常，测试将自动失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T15:58:19.710

如果您使用的是 JUnit 4，则可以检查预期的异常，例如：

```
@Test(expected = Exception.class)
public void checkQueueDoctor() throws Exception {
   Date date = new Date (2012,4,25);
   Time time = new Time (13, 0, 0);
   doctorQueue("83849829", date, time);
} 
```

你可以看看这个[链接](http://www.ibm.com/developerworks/java/library/j-junit4/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T15:40:48.850

检查添加医生后队列是否已更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T15:42:08.303

> 我如何检查函数，它的返回值是无效的？

你不能。您只能检查它是否在应该抛出异常时抛出异常，例如错误参数等，并通过以下方式通知`Assert.fail()`
您可以做的是创建一个包装方法来检查此方法的副作用并返回`true`或`false`调用它断言

# arrays - 数组切片的奇怪行为

> ID：10269327
> 
> 赞同：6
> 
> 时间：2012-04-22T15:37:56.093
> 
> 标签：arrays, f#, slice

```
> let a = [| 'a'..'d' |];;
val a : char [] = [|'a'; 'b'; 'c'; 'd'|] 
```

做简单的切片：

```
> a.[1..2], [1..2];;
val it : char [] * int list = ([|'b'; 'c'|], [1; 2]) 
```

现在尝试使用空白区域：

```
> a.[1..0], [1..0];;
val it : char [] * int list = ([||], []) 
```

似乎有效且合理 - 我们有两个空序列。

但它在这里失败了：

```
> a.[5..0];;
System.OverflowException: Arithmetic operation resulted in an overflow.
   at <StartupCode$FSI_0018>.$FSI_0018.main@()
Stopped due to error 
```

当然，有一个解决方法`[| for i in [5..0] -> a.[i] |]`。但我错过了为什么会`a.[5..0]`失败？为什么不只返回空数组？这种行为有什么原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T16:11:44.653

这是一个错误。

*尽管数组切片和范围表达式是不同的概念（例如，您不能使用`a.[1..2..5]`），但它们的行为应该一致。*

`a.[start..finish]`请注意，当`finish - start <= -2`(失败) 时发生异常，如果( `a.[3..1]`)，数组切片可以正常工作。`finish - start = -1``a.[5..4] = [||]`

数组切片是通过使用[prim-types.fs中的](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/prim-types.fs)[GetArraySlice](http://msdn.microsoft.com/en-us/library/ee340510.aspx)函数完成的：

```
let inline GetArraySlice (arr: _[]) start finish = 
    let start  = (match start with None -> 0 | Some n -> n) 
    let finish = (match finish with None -> arr.Length - 1 | Some n -> n) 
    GetArraySub arr start (finish - start + 1) 
```

while`GetArraySub`在同一个模块中实现如下：

```
let inline GetArraySub arr (start:int) (len:int) =
    let dst = zeroCreate len   
    for i = 0 to len - 1 do 
        SetArray dst i (GetArray arr (start + i))
    dst 
```

如果`finish - start = -1`，我们有`len = 0`并`GetArraySub`返回`zeroCreate 0`一个空数组。这不再是`finish - start <= -2`导致`len < 0`和`zeroCreate len`失败的情况。

这可以通过始终返回一个空数组来解决`finish - start <= -1`。

# jquery - rails app中的jquery和css：将div向左移动以响应鼠标悬停事件不起作用

> ID：10269328
> 
> 赞同：1
> 
> 时间：2012-04-22T15:38:01.240
> 
> 标签：jquery, html, ruby-on-rails, css

嗨，我有一个包含地图的 div。当用户将鼠标悬停时，我希望它的宽度从 80% 更改为 50%，在右侧创建空间，以容纳将出现在右侧的图像。

我在网上查看了一些 jquery 事件处理的示例，并尝试将我在那里看到的内容整合到我自己的应用程序中。但是，我认为我没有完全正确，因为鼠标悬停没有响应。有人可以帮我诊断错误，因为我是 web 开发、rails 和 jquery 的新手。

以下是我的 rails 项目中的相关文件：

list.html.erb - 包含所有的 HTML

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />  
<script type="text/javascript"  
src="http://maps.googleapis.com/maps/api/js?key=Q&sensor=false"></script>  
<%= stylesheet_link_tag 'application' %>  
<%= javascript_include_tag 'application'%>  
<%= stylesheet_link_tag 'listings' %>  
<body onload="initialize()">  
    <div id="control_panel">  
    <input type="button" onclick="getlistings();" value="Add Markers">  
    <input type="button" onclick="clearMarkers();" value="Remove Markers">  
    </div>  
    <div id="info"></div>  
    <div id="map_canvas" onmouseover="moveLeft();" ></div>  
</body> 
```

map.js.erb - 包含 javascript 和 jquery 函数

```
function moveLeft()  
{  
    $(function(){ $("#map_canvas").bind("mouseover", shiftLeft) });  
    $(function(){ $("#map_canvas").bind("mouseleave", shiftLeft) });  
}  

function shiftLeft(evt)  
{  
    $("#map_canvas").toggleClass("shifted_mapCanvas");  

} 
```

css 文件：

```
#map_canvas  
{  
  width: 90%;  
  height: 90%;  
  margin-left: auto;  
  margin-right: auto;  
  html   
  {   
    height: 100%   
   }  
  body   
  {   
    height: 100%;   
    margin: 10;   
    padding: 10   
   }  

}

.shifted_mapCanvas  
{  
  width: 50%;  
  height: 90%;  
  margin-left: auto;  
  margin-right: auto;  
  html    
  {   
    height: 100%   
   }  
  body   
  {   
    height: 100%;   
    margin: 10;   
    padding: 10   
   }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:13:46.367

要尝试只回答您提出的问题，您正在调用 jQuery 函数 ( `$("#map_canvas").bind("mouseover", shiftLeft)`)，但是您在哪里加载 jQuery？

此外，您正在尝试内联触发 javascript 调用，这绝对不是推荐的方法。相反，假设 jQuery 已加载，如果您使用：

```
<script>
$('div#map_canvas').hover({
  function() { $(this).toggleClass('shifted_mapCanvas'); },
});
</script> 
```

......它应该工作。查看[hover()](http://api.jquery.com/hover/)和[toggleClass()的文档](http://api.jquery.com/toggleClass/)

* * *

涵盖其他一些问题：

土匪王，尊敬的，您需要回到起点，重新开始。在过去的几天里，您发布了几个问题，说明您不了解 (1) HTML、(2) CSS 和 (3) Rails 的基本水平。

这是我的判断方法：

1）您几乎肯定不应该有一个名为 的 rails 视图`list.html.erb`，它可能应该是`views/lists/show.html.erb`or `views/lists/index.html.erb`。请参阅Rails 指南中的[创建资源](http://guides.rubyonrails.org/getting_started.html#creating-a-resource)。

2) Rails 视图不应该包含 body 标签，并且可能不应该包含 meta 或 script 标签。body 标签属于您的布局，否则您将不得不在每个视图中重复该标签以确保每个视图都有一个正文，否则您的页面上将有无效的标记。

3) 您的样式表是 SCSS，而不是 CSS，这很好，只是您尝试做的事情在 DOM 中完全没有意义。您正在嵌套 HTML 和 BODY 标记的样式，它们*必须*在嵌套它们的 div 之外......换句话说，您正在创建的 SCSS 正在为 HTML 元素提供不可能的 CSS 定义，这些定义完全无效的。

对于 2 和 3，请参阅[如何制作简单有效的 HTML 文档](http://web2.clarkson.edu/projects/itl/projects/projectChallenge/2005/webclass/)。

我也可以继续讨论[不显眼的 javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，但现在我想你明白了。

您需要备份并首先了解 HTML 是什么以及它是如何工作的。我建议从 W3C 学校开始学习[HTML](http://www.w3schools.com/html/default.asp)、[CSS](http://www.w3schools.com/css/default.asp)和[JavaScript](http://www.w3schools.com/js/default.asp)。

然后，阅读 Michael Hartl 的[Rails 3 教程](http://ruby.railstutorial.org/)。您可以在线免费或购买书籍副本。

前三个教程每个应该只需要几个小时，Rails 教程大概可以在一两天内完成。如果您按顺序完成其中的每一个，您将节省**数周**甚至**数月**的时间来解决您现在提出的问题。

我**强烈**建议您先完成这些基础知识，然后再回到您正在从事的项目。

# entity-framework-4.1 - 首先更改外键在 EF4 代码中无效

> ID：10269333
> 
> 赞同：0
> 
> 时间：2012-04-22T15:38:20.730
> 
> 标签：entity-framework-4.1, ef-code-first

我有一个使用 Entity Framework Code First 定义的实体，它有一个可选的父节点字段。空父节点值意味着实体的节点位于根节点。同一父级下将有多个子级。

```
Class ContentDescriptor
{
    virtual ObjectId ParentObjectId{get;set;}
} 
```

在数据库初始化程序中：

```
HasOptional(contentDescriptor => contentDescriptor.ParentObjectId).WithOptionalDependent()
    .Map(m => m.MapKey("ParentObjectId")); 
```

导航属性分配如下：

```
 DBContext.ContentDescriptors.Add(contentDescriptor);
  contentDescriptor.ParentObjectId = ObjectIdFactory.Save(parent); 
```

ObjectIdFactory.Save 检查 DBContext.ObjectId.Local 中是否有条目，然后检查 DBContext.ObjectId，如果内存或 DB 中没有记录，则进行插入并返回结果。

但是，当将新节点添加到上下文时，只有父节点的第一个子节点才能正确保存。第二个和以后的子级被添加到根，即使它们在本地显示为父级的子级。看起来框架在添加实体时无法为外键生成更新查询。

我的解决方法是在实体中公开外键并手动分配外键，但我想知道是否有更优雅的解决方案：

```
HasOptional(contentDescriptor => contentDescriptor.ParentObjectId).WithMany().
HasForeignKey(c=>c.ParentObjectIdRaw);
Property(c => c.ParentObjectIdRaw).HasColumnName("ParentObjectId");

contentDescriptor.ParentObjectIdRaw = contentDescriptor.ParentObjectId.ObjectIdId; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:16:43.030

这通常对我最有效（注意：我使用的是 4.3，我认为它应该没有太大不同，但不确定）......
（我使用伪`Node`作为自引用实体，所有其他和我想的一样）

```
public class Node
{
    public int NodeID { get; set; }
    public string Name { get; set; }
    public virtual Node Parent { get; set; }
    public virtual ICollection<Node> Children { get; set; }
} 
```

...

```
modelBuilder.Entity<Node>()
    .HasOptional(n => n.Parent)
    .WithMany(n => n.Children); 
```

...即您的实现问题可能`WithOptionalDependent`是通常是一对一的关系（如您所说，您有一对多）。

在使用方面...

```
using (var db = new UserDbContext())
{
    var root = new Node { Name = "root" };
    var node = new Node { Name = "first", Parent = root };
    var child1 = new Node { Name = "child1", Parent = node };
    var child2 = new Node { Name = "child2", Parent = node };
    db.Nodes.Add(child1);
    db.Nodes.Add(child2);
    db.SaveChanges();
    foreach (var n in db.Nodes.Include(x => x.Parent))
        Console.WriteLine("node: {0}, {1}, {2}, {3}, {4}", n.Name, n.NodeID, n.Parent != null ? n.Parent.Name : "", n.Parent != null ? n.Parent.NodeID : 0, n.Children != null ? n.Children.Count : 0);
} 
```

...据我所知，您应该只添加子项（自动添加父项）。或者使用`Children`相反的方式添加，所以将子节点添加到父节点中，在这种情况下只保存根就足够了。

不确定这是否可以解决您所拥有的问题（我不确定您在`ObjectIdFactory.Save`后面做什么），但这是相同的模式，您不必真正拯救父母，之前只拯救一个孩子就足够了上`SaveChanges()`

希望这对任何人都有帮助

# javascript - HTML5 本地存储支持的数据

> ID：10269334
> 
> 赞同：2
> 
> 时间：2012-04-22T15:38:31.587
> 
> 标签：javascript, html, local-storage

我可以使用本地存储对象来存储另一个本地存储对象吗？提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:08:39.993

您可以将任何对象存储在 Web Storage 中，只要您可以对其进行字符串化。但是您的浏览器中只有一个 localStorage 实例，因此您不必询问是否可以这样做，因为您无法创建新实例。

# javascript - 我的拉斐尔是“文本溢出：省略号；” 实现插件有点矫枉过正？

> ID：10269335
> 
> 赞同：1
> 
> 时间：2012-04-22T15:38:35.973
> 
> 标签：javascript, plugins, raphael, css

我需要`text-overflow: ellipsis;`在 Raphael 文本元素中使用 CSS 声明，但找不到现有的跨浏览器解决方案（也许我的搜索技能失败了？）。

所以我创建了自己的 Raphael 插件`fitText`，它完全符合我的要求。它使文本适合一定的宽度。它并不完美，但它有效。这是一个**[小提琴](http://jsfiddle.net/sCEBD/1/)**和一个**[github 页面](https://github.com/olegskl/fitText)**。

现在我在想...

1.  我的解决方案是不是矫枉过正？换句话说，是否存在更简单的方法来解决问题？
2.  继续努力开发插件是否值得？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:53:35.653

当然不是矫枉过正，因为`text-overflow: ellipsis`它尚未得到广泛支持，并且不适用于非现代浏览器。我自己也遇到过这个问题，并用类似的方法解决了这个问题。

不管怎样，看了源码之后，有几点建议：

*   您可能希望通过缓存大量调用来提高性能`getBBox()`
*   API 设计：我认为传递参数 ( `text`, `width`) 是多余的，因为可以从元素本身检索此信息。API 最终用户可能只想调用`fillText()`一个元素而忘记它。

# c++ - libcurl 无法正常工作

> ID：10269343
> 
> 赞同：2
> 
> 时间：2012-04-22T15:39:17.203
> 
> 标签：c++, xcode, libcurl

我遇到了与此人完全相同的问题：

[在带有 C 的 Mac 上使用时的 LibCURL](https://stackoverflow.com/questions/4719071/libcurl-when-used-on-mac-with-c)

但是我不确定如何应用修复。要运行我的代码，我在 xcode 中点击“构建并运行”，因此我不确定如何解决该问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:48:43.693

添加`-lcurl`到目标的其他链接器标志 (OTHER_LDFLAGS) 构建设置。

# node.js - 使用 Redis 和 Socket.io 进行用户认证

> ID：10269346
> 
> 赞同：5
> 
> 时间：2012-04-22T15:39:50.247
> 
> 标签：node.js, redis, express, authentication

考虑到它们具有的优势，我正在学习使用 redis 和 socket.io。特别是，我也尝试将它们用于用户身份验证。如果有人用简单的代码解释给我一个初步的推动，我将不胜感激。我使用的框架是 express 的。我读到 express 和 socket.io 不能直接相互交谈。

我找到了有关此[Socket.IO 身份验证](https://stackoverflow.com/questions/4753957/socket-io-authentication)的相关链接，但我不太了解从那里给出的答案中数据库事务是如何发生的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T22:13:12.997

见[http://www.danielbaulig.de/socket-ioexpress/](http://www.danielbaulig.de/socket-ioexpress/)

# javascript - 在jQuery中停止和恢复计时器

> ID：10269347
> 
> 赞同：1
> 
> 时间：2012-04-22T15:40:02.617
> 
> 标签：javascript, jquery

我有两个解决方案。他们中的第一个使用方法`animate`：

[http://jsfiddle.net/g9aK8/3/](http://jsfiddle.net/g9aK8/3/)

问题在于延迟，当我们暂停计时器，例如在 400px 并恢复时，我们必须再次等待所有延迟（条形的速度绝对较低）。

在我使用的第二个解决方案中`interval`：

[http://jsfiddle.net/6wNcd/1/](http://jsfiddle.net/6wNcd/1/)

它看起来更好，但是当我在几分钟后尝试停止它时，我不得不等待大约 30 秒然后停止。我不确定在这里`interval`使用那个小值是否正确。

你有什么想法如何巧妙地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:10:45.087

试试这个 jquery 代码，我测试了它，它工作正常

```
$('#button').hover(function() {
    $(this).text('pause');
    $('#bar').stop();
}, function() {
    $(this).text('play');
    var w=$('#bar').css('width');
    var val=parseInt((6000*(500-parseInt(w))/500));
    $('#bar').animate({width: '500px'}, val, 'linear', function() {
        $('#bar').css('width', '0px');                      
    });
});
​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:45:43.490

如果您的第一个示例，每当您重新启动动画时，您总是设置一个 2 秒的动画，即使只有几个像素要动画，因此它看起来很慢。如果您希望它在重新启动时以相同的速率继续，您将不得不缩放动画中剩余距离的时间。

这是第一个示例的固定版本，它根据剩余的时间来缩放时间：

```
$('#button').click(function() {
    if($(this).text() == 'play') {
        $(this).text('pause');
        var box$ = $('#box');
        var left = parseInt(box$.css("left"), 10) || 0;
        box$.animate({ left:'150px' }, 2000 * ((150 - left) / 150), 'linear');
    }
    else {
        $(this).text('play')
        $('#box').stop();
    }
}) 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/TVg7x/](http://jsfiddle.net/jfriend00/TVg7x/)

从您的两个选项中，我会选择第一个版本，因为第二个版本会运行一个间隔计时器，即使动画停止，这对于 CPU 利用率来说不是一个好主意，尤其是在移动设备上。

# regex - 正则表达式“\\d+”在字符串中查找整数两次：“{10}”。matcher 匹配 10 和 0

> ID：10269353
> 
> 赞同：1
> 
> 时间：2012-04-22T15:40:31.463
> 
> 标签：regex, bitset, matcher

我使用正则表达式将 BitSet 普通 toString 转换为二进制字符串。例如，如果 myBitSet.toString() 返回 {10}，它会设置第 10 位和第 0 位，但应该只设置第 10 位。

```
 ...
    Matcher m = Pattern.compile("(?=(" + "\\d+" + "))").matcher(temp);
    while(m.find()) {
        String test2 = m.group(1);
        answer.setCharAt((2*OpSize -1 - Integer.valueOf(m.group(1))), '1');

    }
    ..... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T16:29:58.550

您的问题是正则表达式正在使用查找重叠匹配的[前瞻断言。](http://www.regular-expressions.info/lookaround.html) `(?=...)`我想不出在这种情况下你需要它的原因。

尝试删除它；这将确保只找到完整的数字。您也不需要捕获组，因为您可以简单地使用整个匹配`.group(0)`项：

```
Matcher m = Pattern.compile("\\d+").matcher(temp);
while(m.find()) {
    String test2 = m.group(0); // why is this here? You're not using it.
    answer.setCharAt((2*OpSize -1 - Integer.valueOf(m.group(0))), '1');
} 
```

# wpf - 我的 WPF TabItem 动画有什么问题？

> ID：10269354
> 
> 赞同：0
> 
> 时间：2012-04-22T15:40:31.883
> 
> 标签：wpf, xaml

我正在尝试为我的 TabItem 的背景/渐变设置动画。但是，我收到一个错误：

> 附加信息：无法解析属性路径“Background.GradientStops[2].Color”中的所有属性引用。验证适用的对象是否支持这些属性。

当我将鼠标悬停在选项卡项上时会发生错误。

这是 XAML：

```
<Style TargetType="{x:Type TabItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">
                <Grid>
                    <Border Name="Border" BorderBrush="#666" BorderThickness="1,1,1,0" CornerRadius="8,8,0,0" Margin="-2,0,3,-1">
                        <!-- Some irrelevant code here -->
                    </Border>

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Duration="0:0:0.3" To="#EBEBEB" Storyboard.TargetProperty="Background.GradientStops[1].Color" Storyboard.TargetName="Border"/>
                                    <ColorAnimation Duration="0:0:0.3" To="#CDCDCD" Storyboard.TargetProperty="Background.GradientStops[2].Color" Storyboard.TargetName="Border"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Grid>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter TargetName="Border" Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#fff" Offset="0.35"></GradientStop>
                                    <GradientStop Color="#e9e9e9" Offset="0.75"></GradientStop>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                    </Trigger>

                    <Trigger Property="IsSelected" Value="False">
                        <Setter TargetName="Border" Property="Background">
                            <Setter.Value>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Offset="0.35">
                                        <GradientStop.Color>
                                            <Color A="127" R="255" G="255" B="255" />
                                        </GradientStop.Color>
                                    </GradientStop>

                                    <GradientStop Offset="0.75">
                                        <GradientStop.Color>
                                            <Color A="127" R="233" G="233" B="233" />
                                        </GradientStop.Color>
                                    </GradientStop>
                                </LinearGradientBrush>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我认为`Storyboard.TargetProperty`是错误的。应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:27:06.613

那不应该是从零开始的索引吗？

```
<Storyboard> 
    <ColorAnimation Storyboard.TargetProperty="Background.GradientStops[0].Color" .../> 
    <ColorAnimation Storyboard.TargetProperty="Background.GradientStops[1].Color" .../> 
</Storyboard> 
```

# java - C++：按值传递对象的原因

> ID：10269355
> 
> 赞同：4
> 
> 时间：2012-04-22T15:40:33.563
> 
> 标签：java, c++, oop

在Java 中，所有包含适当对象的变量实际上都是引用（即指针）。因此，以这些对象作为参数的方法调用总是“通过引用”。调用修改对象状态的方法也会影响原始对象（在调用方）。

C++ 不同：这里的参数可以通过值传递或通过引用传递。在按值传递的对象上调用 mutator 方法会使原始对象不受影响。（我想按值调用会创建对象的本地副本）。

所以我对此的第一反应——从 Java 到 C++——是：在使用对象作为参数时总是使用指针。这给了我我对 Java 的期望。

但是，如果不需要修改方法主体中的对象，也可以使用“按值调用”。有什么理由要这样做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-22T15:49:07.247

> 使用对象作为参数时总是使用指针

不，在 C++ 中总是通过*引用*传递，除非您的函数可以`nullptr`作为有效参数调用。如果函数不需要修改参数，则通过`const`引用传递。

按值传递参数有多种用途。

如果您的函数需要创建参数的副本，最好通过值传递来创建此副本，而不是在函数内创建副本。例如：

```
void foo( widget const& w )
{
  widget temp( w );
  // do something with temp
} 
```

而是使用

```
void foo( widget w )  // copy is made here
{
  // operate on w itself
} 
```

这样做还具有允许编译器在可能的情况下[*移动*](https://secure.wikimedia.org/wikipedia/en/wiki/Move_semantics#Rvalue_references_and_move_constructors) `widget`的好处，这通常比创建副本更有效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-22T15:43:09.473

你错了，你应该通过指针传递。如果你想通过引用传递，那么......只需通过引用传递：

```
void foo(int& x)
{
   x = 3;
}

int main()
{
   int a = 0;
   foo(a);
   assert( a == 3 );
} 
```

另外，请注意，按值传递保证您的变量不能在被调用的上下文中更改。虽然这样会通过`const`引用传递......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T15:43:18.527

如果您按值将对象传递给函数，则该函数可以自由地将这些对象用作“工作”变量，而不会影响调用者。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-22T15:49:41.520

在 Java 中，*引用*是垃圾收集的“智能指针”。

C++ 还使用了智能指针的概念，它在`<memory>`库中称为`unique_ptr`和`shared_ptr`。shared_ptr 是引用计数的，因此可以以与 Java 引用相同的方式使用。unique_ptr 类似，除了不可复制且更轻量级。两者的好处是永远不需要使用**delete**关键字，并且能够依赖受异常保护的“指针”。

C++ 还支持*引用*的概念——这通常是传递对象的好选择（更好的是引用到**const**）。C++ 中的引用绑定到传递的对象类型，因此您需要`&`在函数签名中指定（使用引用符号）

```
#include <string>

void foo(std::string& bar)
{
    bar = "world";
}

void foo2(const std::string& bar)
{
    //passed by reference, but not modifyable.
}

int main()
{
    std::string str = "hello";
    foo(str);
    foo2(str);
} 
```

至于“原始”指针——您几乎总是可以通过使用智能指针、引用、迭代器或按值传递来避免它们。简单的普通指针带有一个混合包，C++ 从 C 语言继承而来的“陷阱”——如果你有一个相当新的编译器，你根本不需要使用它们（除非你要做类似的事情重新发明轮子以用于内存管理、数据结构等的学习目的）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-22T15:52:17.340

您通常按值传递，因为某些东西*是*一个值，并且应该像一个值一样起作用。在许多情况下，通过 const 引用传递足够接近相同的值，值得考虑。在其他情况下，它不是。

按值传递也可以是一种[优化](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)。至少 IMO，这或多或少是次要的，但无论如何它可能很重要（尤其是在通过 const 引用传递和传递实际值之间进行选择时。

IMO，真正的问题应该是相反的方向：当你明确告诉它传递一个值时，为什么编译器要传递一个引用？答案是“过早优化”。Java 的设计者（提到您的示例，尽管它在这方面几乎不是独一无二的）决定他们知道最好不要让编译器按照指示去做。由于按值传递大对象*可能*很慢并且*可能*是错误的，因此他们决定根本不让它发生，即使它可能很快并且很可能正是预期的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-22T15:55:01.237

我认为您应该将函数签名中的变量类型视为调用者的合同。因此，如果您声明您的功能为：

```
void foo( int a ); 
```

然后你说我会复制你传入的值做任何我喜欢的事情，它不会被修改。

如果您声明如下：

```
void foo (int* a); 
```

然后我可以修改`a`指向或确实修改指针

所以语义上的区别是你声明了你的函数的契约可以做什么，使用指针和引用（没有在引用或指针指向的对象上声明的 const ）你可以修改变量。

在 C++ 中首选引用，因为它更清楚您的意图，并且您避免使用指向指针函数签名的 c 样式指针，这是在将指针传递给要修改指针指向的函数的函数时所必需的，这会导致错误和头在你意识到出了什么问题之前抓挠。

尽管指针作为参数仍然非常有用，尤其是当您需要测试指向对象的指针是否为空时，使用引用无法做到这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-22T16:38:03.350

通过引用传递时存在继承危险，您可能会在方法内部无意中更改传递给方法的值。在方法调用之后，您可以假设该方法没有更改对象，而实际上它确实更改了对象。

按值传递具有需要额外内存的负面影响（并且可能会产生轻微的性能开销），因为您制作了要传入的对象的副本，但好处是您可以确保传递给方法的对象不会在方法内部修改。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-22T15:44:16.297

避免副作用很有帮助。如果您的程序需要这样的副作用，请使用引用调用。

# android - 文件上传特定情况下连接超时不抛出异常

> ID：10269364
> 
> 赞同：2
> 
> 时间：2012-04-22T15:41:42.647
> 
> 标签：android

以下代码用于将文件上传到服务器。

```
 public static boolean uploadFile(String serverUrl, String filePath) {
                boolean status = false;
                try {
                    File file = new File(filePath);
                HttpParams httpParameters = new BasicHttpParams();
                int timeoutConnection = 3000;
                HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
                // Set the default socket timeout (SO_TIMEOUT) 
                // in milliseconds which is the timeout for waiting for data.
                int timeoutSocket = 5000;
                HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
                HttpClient httpClient = new DefaultHttpClient(httpParameters);
                HttpPost postRequest = new HttpPost(serverUrl);
                FileBody bin = new FileBody(file);
                MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.STRICT);
                reqEntity.addPart(IShipdocsMobileConstants.CUSTOM_FILE_TAG, bin);
                postRequest.setEntity(reqEntity);
                HttpResponse response = httpClient.execute(postRequest);
                if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                    status = true;
                }
               }
              catch (Exception e) {
                        status = false;
        }
    return status;
    } 
```

当文件开始上传文件时没有连接时会抛出异常，但当文件已经开始上传时不会抛出异常，并且在某个时间（可能在 50% 上传后）之后，连接丢失。

目前我正在使用 WiFi 和 GPRS 激活的 SIM 卡进行上传。

需要添加到上述代码中以获取异常的任何其他参数。

欢迎任何提示/建议。

# vba - 使用 TextFileColumnDataTypes 为每列打开具有正确数据格式的 CSV 文件？

> ID：10269366
> 
> 赞同：4
> 
> 时间：2012-04-22T15:42:02.687
> 
> 标签：vba, csv, excel, excel-2007, export-to-excel

我正在使用下面的 VBA 代码在 Excel 中打开一个 csv 文件（代码模拟 Data\Text to Columns - 命令）。在代码中，必须为属性**TextFileColumnDataTypes**指定一个数组，它为 csv 文件中的每一列指定一种数据格式（2 = 文本格式）。

但是，由于我不知道 csv 文件将有多少列，我想为 csv 文件中的所有列指定格式 2（= 文本格式）。现在的问题是我只能为固定数量的列指定数据格式（在下面的示例中为 3 列）。

非常感谢解决该问题的任何帮助:)

================================================

这是我正在使用的完整代码：

```
 With ThisWorkbook.Worksheets(1).QueryTables.Add(Connection:= _
        "TEXT;C:\test.csv", Destination _
        :=ThisWorkbook.Worksheets(1).Range("$A$1"))
        .name = "Query Table from Csv"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = True
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(2, 2, 2)
        .TextFileDecimalSeparator = "."
        .TextFileThousandsSeparator = ","
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
        .Delete     
    End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:21:45.317

这是一种无需在 Excel 中打开即可从已关闭的 CSV 中查找列数的方法。

我假设以下。

**1)**您正在打开一个逗号分隔的文件。如果不是，那么您将不得不适当地修改代码

**2)** CSV 中的第 1 行有标题（**任何列中至少有 1 个标题**）

试试这个**（我测试过，但如果你有任何错误，请告诉我们:)**

```
Option Explicit

Const ExlCsv As String = "C:\test.csv"

Sub Sample()
    Dim MyData As String, strData() As String, TempAr() As String
    Dim ArCol() As Long, i As Long

    '~~> Open the text file in one go
    Open ExlCsv For Binary As #1
    MyData = Space$(LOF(1))
    Get #1, , MyData
    Close #1
    strData() = Split(MyData, vbCrLf)

    '~~> Check for any empty headers and replace ",," by ","
    Do While InStr(1, strData(0), ",,") > 0
        strData(0) = Replace(strData(0), ",,", ",")
    Loop

    '~~> Split the headers to find the number of columns
    TempAr() = Split(strData(0), ",")

    '~~> Create our Array for TEXT       
    ReDim ArCol(1 To UBound(TempAr))
    For i = 1 To UBound(TempAr)
        ArCol(i) = 2
    Next i

    With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;" & ExlCsv, Destination:=Range("$A$1") _
        )
        .Name = "Output"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 1252
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = True
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = ArCol
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

**编辑**

或者，这是一个更简单的方法（想知道为什么我以前没有想到它......）

```
Option Explicit

Const ExlCsv As String = "C:\test.csv"

Sub Sample()
    ActiveSheet.Cells.NumberFormat = "@"

    With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;" & ExlCsv, Destination:=Range("$A$1") _
        )
        .Name = "Output"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 1252
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = True
        .TextFileSpaceDelimiter = False

         '<~~ This doesn't make any difference anymore
        .TextFileColumnDataTypes = Array(2)

        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-30T15:12:01.467

对我有用的肮脏方式是初始化一个比以往更大的数据类型数组。多余的列数据类型被忽略。

```
Sub CSV_Import(strFile As String)
Dim ws As Worksheet
Dim colDataTypesArr(1 to 100) As Long
Dim i As Long

Set ws = Sheet1
For i = 1 To UBound(colDataTypesArr)
    colDataTypesArr(i) = 2
Next i

With ws.QueryTables.Add(Connection:="TEXT;" & strFile, Destination:=ws.Range("A1"))
     .TextFileParseType = xlDelimited
     .TextFileCommaDelimiter = True
     .TextFileTextQualifier = xlTextQualifierDoubleQuote
     .TextFileColumnDataTypes = colDataTypesArr
     .Refresh
End With
End Sub 
```

# ember.js - Ember.js 如何重新打开类？

> ID：10269372
> 
> 赞同：24
> 
> 时间：2012-04-22T15:42:50.377
> 
> 标签：ember.js

ember.js 的reopenClass 的功能我是不太懂。我认为它向对象的原型添加了额外的代码，因此该对象的所有实例都将获得以非静态方式添加的功能。然而，它并没有这样做。看起来它只添加了可以静态执行的代码。例如。我有这个代码：

```
Logger = Ember.Object.extend({ 
  log: function(thing) { 
     console.log(thing + ' wassup'); 
    }
});

var logger = Logger.create();
logger.log("1, yo")

logger.reopen({ 
  log: function(name) { 
      console.log(name + 'ghurt')
    }
});
logger.log("2, yo")

Logger.reopenClass({ 
  log: function(name) { 
      console.log(name + 'fresh')
    }
});
logger.log("3, yo")
Logger.log("4, yo") 
```

它输出这个：

```
1, yo wassup
2, yoghurt
3, yoghurt
4, yofresh 
```

我的预期是这样的：

```
1, yo wassup
2, yoghurt
3, yofresh
4, undefined (I think) 
```

所以我的问题是：reopenClass 做什么以及何时使用它？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-22T18:12:47.903

通常，`reopen`将方法和属性添加到**实例**，而`reopenClass`将方法和属性添加到**类**。

对应的测试是[ember-runtime/tests/system/object/reopen_test.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/tests/system/object/reopen_test.js)和[packages/ember-runtime/tests/system/object/reopenClass_test.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/tests/system/object/reopenClass_test.js)。

我已经更新了您的代码并添加了一些评论，请参阅[http://jsfiddle.net/pangratz666/yWKBF/](http://jsfiddle.net/pangratz666/yWKBF/)：

```
Logger = Ember.Object.extend({
    log: function(thing) {
        console.log(thing + ' wassup');
    }
});

var logger1 = Logger.create();
var logger2 = Logger.create();

// instances of Logger have a 'wassup' method
try { Logger.log("1, yo"); } catch (e) {} // Object (subclass of Ember.Object) has no method 'log'
logger1.log("1, yo"); // 1, yo wassup
logger2.log("1, yo"); // 1, yo wassup

console.log('----');

// overwrite log of concrete logger instance logger1
logger1.reopen({
    log: function(name) {
        console.log(name + ' ghurt');
    }
});

try { Logger.log("1, yo"); } catch (e) {} // Object (subclass of Ember.Object) has no method 'log'
logger1.log("2, yo"); // 2, yo ghurt
logger2.log("2, yo"); // 2, yo wassup

console.log('----');

// classes of Logger have a 'fresh' method
Logger.reopenClass({
    log: function(name) {
        console.log(name + ' fresh');
    }
});

Logger.log("3, yo"); // 3, yo fresh
logger1.log("3, yo"); // 3, yo ghurt
logger2.log("3, yo"); // 3, yo wassup

console.log('----');

// new* instances of Logger have from now on a 'dawg' method
// * this will likely change in the future so already existing instances will reopened too
Logger.reopen({
    log: function(name) {
        console.log(name + ' dawg');
    }
});

Logger.log("4, yo"); // 4, yo fresh
logger1.log("4, yo"); // 4, yo ghurt
logger2.log("4, yo"); // 4, yo wassup
Logger.create().log("4, yo"); // 4, yo dawg

console.log('----'); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T03:50:50.410

`reopen`更改原型，从而更改类的**实例**

`reopenClass`更改构造函数本身，从而 通过创建**仅在类****上**可用但在类的任何实例上不可用的**静态属性和函数**来更改类。

 **请注意，由 引入的更改`reopen`仅在调用后生效`.create()`

基于文档的代码示例：

[http://emberjs.com/api/classes/Ember.Application.html#method_reopen](http://emberjs.com/api/classes/Ember.Application.html#method_reopen)

```
MyObject = Ember.Object.extend({
  name: 'an object'
});

o = MyObject.create();
o.get('name'); // 'an object'

MyObject.reopen({
  say: function(msg){
    console.log(msg);
  }
})

try{
    o.say("hey");
} catch(e) {
    console.log(e); // o.say is not a function (...yet)
}
o2 = MyObject.create();
o2.say("hello"); // logs "hello"

o.say("goodbye"); // logs "goodbye" 
```

[http://emberjs.com/api/classes/Ember.Application.html#method_reopenClass](http://emberjs.com/api/classes/Ember.Application.html#method_reopenClass)

```
MyObject = Ember.Object.extend({
  name: 'an object'
});

MyObject.reopenClass({
  canBuild: false
});

MyObject.canBuild; // false
o = MyObject.create();
o.canBuild; // undefined 
```**

# php - 安卓上的 Fancybox 总是在页面顶部打开窗口

> ID：10269377
> 
> 赞同：1
> 
> 时间：2012-04-22T15:43:41.873
> 
> 标签：php, javascript, jquery, fancybox

在 Android 手机上查看 Fancybox 时出现问题。如果我在一个长页面的底部有一个图像并且我按下它，Fancybox 总是在页面顶部打开它，这意味着我必须一直向上滚动才能看到它。有没有办法让它在我点击它的区域打开？任何帮助将非常感激。谢谢

# php - 将mysql中的日期字符串从dd/mm/yyyy hh:mm:ss转换为DD MMM YYYY

> ID：10269381
> 
> 赞同：0
> 
> 时间：2012-04-22T15:44:05.247
> 
> 标签：php, mysql, string, date

我的 mysql 数据库中有一个日期，我想将其读入变量/数组，然后从 mm/dd/yyyy hh:mm:ss 转换为 DD MMM YYYY。这可能吗？如果可以，我将如何去做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:47:41.447

对于任何类型的日期格式转换，首先将旧日期转换为时间戳，然后将时间戳格式化为日期。

例子：

```
$old = "6-2-1992 10:24 PM";
$new = date("d/M/Y",strtotime($old));
echo $new; // result: 06/Feb/1992 
```

请非常小心，不要与美国格式与英国格式发生冲突（即 3/4 是 4 月 3 日还是 3 月 4 日？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T15:51:47.280

如果它是一个日期时间字段（如它所显示的那样），只需让 MySQL 将日期作为时间戳提供给您：

```
SELECT UNIX_TIMESTAMP(my_date) As my_timestamp 
```

然后你可以使用[php](http://php.net/manual/de/function.date.php)来格式化你喜欢的时间戳：

```
$formatted_date = date("d m Y",$timestamp); 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T15:56:47.823

为什么要将其存储在变量中并使用 PHP 进行转换？如果它是日期时间字段，只需在查询中使用 DATE_FORMAT 函数即可立即对其进行转换。

```
SELECT DATE_FORMAT(datetime, '%d/%b/%Y') datetime FROM table 
```

# pug - 如何在翡翠中将自定义字符串附加到“title = title”？

> ID：10269383
> 
> 赞同：3
> 
> 时间：2012-04-22T15:44:18.853
> 
> 标签：pug

我目前正在向 Jade 和 node.js 介绍自己

由于我想避免冗余，我想将域名附加到当前标题，例如`Blog | example.com`

我的 Jade 模板`Blog`通过 Node.js 路由器获取`title`. 现在我想附加`| example.com`到标题，但是当我的模板看起来像这样时，我不知道该怎么做：

```
!!! 5
html(lang="de")
  head
    meta(charset="utf-8")
    title= title 
```

我如何必须修改最后一行才能附加文本？

我希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:06:03.740

以下对我有用。

```
!!! 5
html(lang="de")
  head
    meta(charset="utf-8")
    title= title + " example.com" 
```

如果您想在带有 h1 和 p 标签的正文中使用它，请使用：

```
body
  h1 #{title} example.com
  p #{title} example.com 
```

# python - 值到 rgb 值

> ID：10269387
> 
> 赞同：-3
> 
> 时间：2012-04-22T15:44:33.040
> 
> 标签：python

我想根据以下内容将 0 到 1 之间的值转换为 rgb 值：

![在此处输入图像描述](../Images/78cb54356be466d4cb8caf6507ad3c97.png)

你会如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:53:28.087

试试[colorsys](http://docs.python.org/library/colorsys.html#module-colorsys)模块。将 HSB 转换为 Hue 作为变量，Saturation 和 Brightness 都为 1.0 应该会得到类似的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:41:32.547

请注意，三个颜色函数具有保存形状，并且从外观上看是相同的。所以你可以不用定义一个函数，然后用偏移输入调用它来生成 R、G 和 B 值。暗示; 查看绿色组件的图表。这基本上是 0-0.5 域中的上升线和 0.5-1 域中的下降线。推断以找到绿线与 color = 0.0 相交的点（这是上升线的底部，将 < 0），color = 1.0 和彼此（这是 Rigins 线的顶部，将 < 1 )，并使用它来编程绿色组件的功能。然后将返回值限制在 0 和 1 之间。

```
def component(x):
  '''Function for the green component.'''
  top = 1.5
  bottom = -0.5
  if x < 0.5:
    rv = x/0.5*(top-bottom)+bottom
  else:
    rv = (x-0.5)/0.5*(bottom-top)+top
  if rv > 1.0:
    return 1.0
  if rv < 0.0:
    return 0.0
  return rv 
```

`top`（和的值`bottom`是估计值；测量图表！）

现在换其他颜色；请注意红色图表如何使 0 线的颜色值大于绿色图表。因此，要使用绿色分量函数来获得红色，请从输入值中减去红色和绿色图形之间的水平距离，然后再将其输入函数以计算绿色值。对于蓝色值，您必须添加而不是减去它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T16:30:24.137

搜索 python 查找表解决方案返回了这个非常有用的示例：
[http ://www.zovirl.com/2008/11/04/interpolated-lookup-tables-in-python/](http://www.zovirl.com/2008/11/04/interpolated-lookup-tables-in-python/)

您的红色通道 LUT 的一个示例可能是：

```
points = ((.4,.2), (.6,1.), (.9,1.), (1.,.5))
table = InterpolatedArray(points)
print table[.5] 
```

# javascript - 有没有办法找出 Javascript 中有多少活动间隔？

> ID：10269388
> 
> 赞同：0
> 
> 时间：2012-04-22T15:45:08.653
> 
> 标签：javascript, performance, html, setinterval

> **可能重复：**
> [查看 javascript 中的所有超时/间隔？](https://stackoverflow.com/questions/858619/viewing-all-the-timouts-intervals-in-javascript)

我正在制作一个 HTML5 游戏，最近我添加了很多依赖间隔的图形效果（由`setInterval`函数制作）。它开始运行缓慢，即使不应该运行任何间隔！所以，我相信我不会全部清除它们，我想这样做。但是怎么做？首先，当然是要弄清楚这是否是问题所在，那么我如何获得当前活动间隔的数量呢？

该死的，间隔计数永远不会超过3，毕竟我**很小心。**我想我只是将终端速度设置得太低了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:13:40.113

包装所有区间函数。例如：

```
myInterval = function(func, sec) {
   myInterval.count = myInterval.count + 1 || 1;
   setInterval(func, sec); 
};
myInterval("console.log(1)", 3000);
myInterval("console.log(2)", 3000); 
```

然后

```
console.log(myInterval.count); // => 2 
```

clearInterval 和 Timeout 函数也一样

# php - 使用 1 个 HTML 表单：向用户询问唯一标识符，从数据库中获取记录，解析为 JSON，使用 jquery 填充插件填充 HTML 页面表单...？

> ID：10269390
> 
> 赞同：0
> 
> 时间：2012-04-22T15:45:09.280
> 
> 标签：php, javascript, jquery, html, json

首先让我说我不是任何一种代码的专家，但是，相反，我倾向于将事情拼凑起来并使其工作！我的最新一期可能对我的技术来说有点太技术性了。这是我想要完成的事情：

我正在使用带有表单的 HTML 页面来获取用户的唯一标识符。然后是 PHP（获取数据库信息）和 JSON（将这些信息解析为 HTML 格式）。最后，我使用 jquery 插件“Populate”将此信息发送到 HTML 页面上所需的表单字段（与获取唯一标识符的表单不同的表单）。

我有一个 HTML 页面，上面有 2 个表单。第一种形式：

```
 <form name="form_reservation" id="form-reservation">
        <div style="padding:10px 20px 10px 10px;">
            <label for="reservation-id">Reservation ID</label>
                <input name="reservationid" class="reservationid" style="width:120px !important"/>
                    <div class="json-sample" id="json-simple-sample">&nbsp;</div>
                    <input type="submit" class="button" value="Search Reservation" style="width:150px !important; margin:10px 0px 0px 5px;"/>
                    <input type="button" class="button" value="Clear" style="width:150px !important; margin:10px 0px 0px 5px;" onclick="resetForms('reservation')" />
                </div>
        </form> 
```

获取此提交的 Javascript 现在是：

```
<script type="text/javascript">
$(document).ready(function(){
    resetForms('reservation');
    $('#form-reservation').submit(function(event){ 
        event.preventDefault();  //the page will no longer refresh on form submit. 
        var resCheck = $(this).find('input[class="reservationid"]').val(); //now we have the reservation ID, let's perform our check.
        $.ajax({ 
            url: 'inc/searchres.php', 
            type: 'POST', //default is GET, you are using POST(*SEE: [1]) 
            data: 'resid='+resCheck, 
            success: function(data){  //data is all the info being returned from the php file 
                var jsonData = $.parseJSON(data);  //parse returned JSON data so we can use it like data.name, data.whatever 
                $('#json-reservation').populate({personal_first_name:jsonData['element_1_1'],personal_last_name:jsonData['element_1_2'],personal_phone_1:jsonData['element_7'],personal_email:jsonData['element_2'],reservation_status:jsonData['ADD THIS CELL'],reservation_date:jsonData['element_3'],reservation_time:jsonData['element_4'],reservation_party:jsonData['element_5'],reservation_special_request:jsonData['element_6'],reservation_using_coupon:jsonData['element_9'],reservation_coupon_code:jsonData['element_10']});
            }
        });
    });
});
</script> 
```

上一个表单的目的是要求用户提供唯一标识符。一旦用户点击“Search Reservation”，这个唯一标识符就被用来搜索一个数据库，看看它是否存在……这是一个名为 searchres.php 的外部 php 文件（我想我意识到这个 php 文件没有正确链接到表单，因为我无法弄清楚如何做到这一点，因此页面不会重新加载或更改链接）：

```
<?php
include('connect-searchres.php');

$term = $_POST['resid'];
$sql = mysql_query("SELECT * FROM ap_form_8 WHERE element_1_1 = '$term'"); //select first name (element_1_1) from form #8

if ($row = mysql_fetch_array($sql)){  //if reservation number exists
    if ($row['element_10'] != 'Cancelled'){  //if reservation has not already been cancelled
        if (strtotime($row['element_3']) >= strtotime(date("Y-m-d"))){  //if reservation has not already passed date
            echo json_encode($row);
        }
        else  //Reservation already passed (old reservation)
        {
            echo 'passed';
        }
    }
    else  //Reservation already cancelled
    {
        echo 'cancelled';
    }
}
else  //Reservation not found
{
    echo 'not found';
}
mysql_close();
?> 
```

所以到目前为止，用户已经输入了他们的唯一编号，并且 php 文件已经在数据库中搜索了它。我们还将我们的 sql 查询转换为 JSON 格式。我现在需要用它收到的数据填充 HTML 页面中的另一个表单。另一种形式看起来像（对不起，这是一个很大的）：

```
 <form name="json_reservation" id="json-reservation" action="results.php" method="post" target="_blank" style="margin-top:15px">
                <fieldset>
                    <legend>Personal Information</legend>
                    <ul class="controls">
                        <li>
                            <label for="first-name">First Name</label>
                            <input name="personal_first_name" id="personal-first-name" type="text" class="text" maxlength="" value="" disabled readonly/>
                        </li>

                        <li>
                            <label for="last-name">Last Name</label>
                            <input name="personal_last_name" id="personal-last-name" type="text" class="text" maxlength="" value="" disabled readonly/>
                        </li>

                        <li>
                            <label for="personal[country]">Phone</label>
                            <input name="personal_phone_1" id="personal-phone-1" type="text" class="text" style="width:110px !important" maxlength="" disabled readonly/>
                        </li>
                        <li>
                            <label for="email">Email</label>
                            <input name="personal_email" id="personal-email" type="text" class="text" maxlength="" value="" disabled readonly/>
                        </li>
                    </ul>
                </fieldset>

                <fieldset>
                    <legend>Reservation Information</legend>
                    <ul class="controls">

                        <li>
                            <label for="status">Reservation Status</label>
                            <input name="reservation_status" id="reservation-status" type="text" class="text" style="width:110px !important" maxlength="" value=""  disabled readonly/>

                        </li>

                        <li>
                            <label for="date">Date</label>
                            <input name="reservation_date" id="reservation-date" type="text" class="text" style="width:110px !important" maxlength="" value="" disabled readonly/>
                        </li>

                        <li>
                            <label for="time">Time</label>
                            <input name="reservation_time" id="reservation-time" type="text" class="text" style="width:110px !important" maxlength="" value=""  disabled readonly/>
                        </li>

                        <li>
                            <label for="party">Number in Party</label>
                            <input name="reservation_party" id="reservation-party" type="text" class="text" style="width:110px !important" maxlength="" value=""  disabled readonly/>

                        </li>

                        <li>
                            <label for="specialrequest">Requests</label>
                            <textarea name="reservation_special_request" id="reservation-special-request" rows="3" wrap="virtual" class="specialrequest" style="width:60% !important" disabled readonly/></textarea>
                        </li>

                        <li>
                            <label for="coupon">Using Coupon/Promotion</label>
                            <input name="reservation_using_coupon" id="reservation-using-coupon" type="text" class="text" style="width:110px !important" value="" disabled readonly/> # <input name="reservation_coupon_code" id="reservation-coupon-code" type="text" class="text" style="width:110px !important" maxlength="" value=""  disabled readonly/>
                        </li>

                    </ul>
                </fieldset>
            </form> 
```

所以无论如何，这就是我所处的位置，在这一点上，我知道不仅我的代码存在很多问题，而且我的方法也存在很多问题。正因为如此，任何提示将不胜感激，因为我在这一点上搜索了高低。

另一点要提的是，我真的希望这两种表单都能在一个 HTML 页面上很好地交互，而无需重新加载它。可以找到外部链接：http: [//goo.gl/IFVv4](http://goo.gl/IFVv4) 不要担心外部链接上表格的“第 3 部分”，因为那是我以后会搞砸的东西。

更新：我已经编辑了上面的代码以显示我现在的位置。您的帮助非常好，让我走得很远，但现在我认为我的问题存在于 php 文件中......想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:35:48.977

我在这里看到的主要内容之一是您不了解停止表单提交、在后台执行请求以及处理返回的数据的过程，因此我将为您概述这一点尽可能简单，希望它会有所帮助。

首先，我们需要捕获表单提交，在 jQuery 中，我们可以这样做 ->

```
$('#json-hierarchal').submit(function(){}); 
```

现在我们知道如何捕获表单的提交，我们需要弄清楚如何阻止默认行为提交和重新加载页面，我们通过访问[事件](http://api.jquery.com/category/events/event-object/)参数来实现这一点，并应用函数[preventDefault();](http://api.jquery.com/event.preventDefault/) . （为你着想

```
$('#json-hierarchal').submit(function(event){
  event.preventDefault(); // the page will no longer refresh on form submit.
}); 
```

现在我们已经停止了默认提交，我们可以使用 $.ajax 将数据发送到 php 文件，以便它可以解析它，并根据我们发送的内容输出我们需要的内容。

```
$('#json-hierarchal').submit(function(event){
  event.preventDefault(); // the page will no longer refresh on form submit.
  var resCheck = $(this).find('input[class="reservationid"]').val(); //now we have the reservation ID, let's perform our check.
  $.ajax({
    url: 'searchres.php',
    type: 'POST', //default is GET, you are using POST(*SEE: [1])
    data: 'resid='+resCheck,
    success: function(data){//data is all the info being returned from the php file
      var jsonData = $.parseJSON(data);//parse returned JSON data so we can use it like data.name, data.whatever
      //I don't know how $.populate works, so I'm assuming we find each item returned in the json array, iterate over each occurence, and run populate on it?     
      $.each(jsonData, function(index,value){
        $('#form-hierarchal').populate(value);
      });
    }
  });
}); 
```

**参考**

[1] - GET/POST 基于 REST 和 SOAP 实践进行交互。当我们需要从我们使用的服务器获取数据时`GET method`（我们期望数据从数据库或外部文件返回到服务器）。当我们需要将数据发布到服务器以便它可以 A）插入数据库或 B）写入文件（这里简单起见）时，我们使用`POST method`. 学习尽可能多地遵循这些做法非常重要。

# java - HSQLDB：我正在尝试使用临时表中的一些数据填充表，但数据正在被删除

> ID：10269392
> 
> 赞同：2
> 
> 时间：2012-04-22T15:45:19.057
> 
> 标签：java, hsqldb

我正在使用 HSQLDB。在 java 函数中，我正在创建一个临时表并用一些数据填充它。在我使用临时表中的数据更新常规表之后。

如果我调试函数内部的代码并执行，`SELECT`我可以看到两个表中的数据确实已更新，但在提交更改后，表不再更新！（常规表，而不是临时表）。

当我创建我使用的临时表时：`ON COMMIT PRESERVE ROWS`但它没有帮助。

有谁知道为什么会这样？

谢谢！

这是代码：

```
public synchronized void foo(String[] objectsToMark) throws Exception {

        String createTempTableQuery = "CREATE TEMP TABLE "+TEMP_TABLE_NAME+"(OBJECTID VARCHAR) " +
                "ON COMMIT PRESERVE ROWS";
        String dropTempTableQuery = "DROP TABLE "+TEMP_TABLE_NAME;

        String updateQueryString = "update " + TABlE_A + " set " +TABlE_A+".X = 'N' where "+TABlE_A+".RESULT_ID in (select "+TABlE_A+".RESULT_ID FROM "+TABlE_A
                        +" inner join "+TABLE_B+" on "+TABLE_B+".OBJECTID = "+TABlE_A+".OBJECTID"
                        +" inner join TEMP_TABLE on "+TABLE_B+".OBJECTID = TEMP_TABLE.OBJECTID"
                        +" where "+TABlE_A+".IS_X = 'Y')";

        String insertObjectIDs = "INSERT INTO " + TEMP_TABLE_NAME + " (OBJECTID) VALUES (?)";
        Connection conn = null;
        Statement stmt = null;
        PreparedStatement psInsertObjectIDs = null;
        try {
            conn = getConnection(getClass().getName() + "");
            stmt = conn.createStatement();

            stmt.execute(createTempTableQuery);

            // insert object's IDs into table
            psInsertObjectIDs = conn.prepareStatement(insertObjectIDs);

            for (String id : objectsToMark) {
                int i = 0;
                psInsertObjectIDs.setString(++i, id);
                psInsertObjectIDs.addBatch();
            }
            psInsertObjectIDs.executeBatch();

            stmt.execute(updateQueryString);

        } catch (Exception e) {
        } finally {
            // close resources
            close(stmt);
            stmt = null;
            // drop the temporary tables
            if (conn != null) {
                try {
                    stmt = conn.createStatement();
                    stmt.execute(dropTempTableQuery);
                } catch (SQLException e) {
                }
                close(stmt);
            }

            close(psInsertObjectIDs);
            closeConnection(conn);
        }
    } 
```

请注意，这里没有提交，但连接被配置为执行自动提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T19:37:35.477

由于代码在您调试时有效，因此问题必须在此代码之外。

如果您将此代码作为对文件：数据库的隔离测试运行，并且您没有在 jdbc 连接 url 中指定写入延迟或关闭选项，则引擎没有足够的时间将数据写入磁盘。

HSQLDB 的默认设置用于生产，其中应用程序发出 SHUTDOWN。对于测试，请使用以下任一属性。

这会在每次提交或自动提交后写入更改，因此会减慢生产数据库的速度：

```
jdbc:hsqldb:file:mydb;hsqldb.write_delay=false 
```

当唯一剩余的连接关闭时，这个会关闭数据库：

```
jdbc:hsqldb:file:mydb;shutdown=true 
```

由于这个问题经常出现，从 2.2.9 开始的未来版本的 HSQLDB 将始终在唯一剩余的连接关闭时将数据写入磁盘。

# java - 缺口如何在迷你世界中进行碰撞检测？

> ID：10269394
> 
> 赞同：0
> 
> 时间：2012-04-22T15:45:39.867
> 
> 标签：java, collision-detection

缺口如何在迷你世界中进行碰撞？

我试图找出他是如何为我正在开发的游戏做的。在我的游戏中，我所做的是使用矩形，如果它们与世界上的其他矩形相交，x 或 y 位置的正负取决于您移动的方向。这是一个好方法吗？如果有人能告诉我他的游戏迷你世界中的碰撞是如何产生的，那就太好了。

谢谢

minicraft源代码：[https ://s3.amazonaws.com/ld48/ld22/minicraft_source.zip](https://s3.amazonaws.com/ld48/ld22/minicraft_source.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:30:33.177

你描述的方法基本正确。

如果您关心性能，请注意不要在碰撞检查期间分配任何新对象，并记住您可以通过预先计算一些东西来加快速度，即树`x + width`总是相同的。

# perl - 未使用 mod_auth_kerb/Apache2、Authen::SASL/perl 将 Kerberos 凭据转发到 openldap

> ID：10269396
> 
> 赞同：2
> 
> 时间：2012-04-22T15:45:53.427
> 
> 标签：perl, apache, kerberos, openldap, sasl

我正在编写一个 Web 前端来管理我们公司的 OpenLDAP 服务器。我正在使用 Perl、Apache2、OpenLDAP、Cyrus SASL。

问题是，在使用 Web 界面时，我无法以 Kerberos 验证用户身份向 OpenLDAP 进行身份验证，因为我的 Kerberos 凭据未转发，并且 Apache 错误日志显示：

```
Credentials cache file '/tmp/krb5cc_33' not found 
```

其中“33”是 Apache 的 uidNumber。这是有道理的，但不能解决问题。具有讽刺意味的是，这一切都在领域外工作，因为 mod_auth_kerb 要求用户名和密码，进行身份验证，缓存票证，然后一切正常。

我正在使用 mod_auth_kerb 对 Apache2 进行身份验证，它工作正常：不提示密码，向经过身份验证的用户显示受保护的页面（否则被拒绝）。配置的相关片段：

```
<Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all 
            AuthType Kerberos
            AuthName "Kerberos Login"
            KrbAuthRealms EXAMPLE.COM
            Krb5Keytab /etc/apache2/HTTP.keytab
            KrbServiceName HTTP
            KrbSaveCredentials on
            require valid-user
    </Directory> 
```

Kerberos/GSSAPI/SASL 身份验证也可以正常工作，因此从命令行运行时，此代码可以正常运行：

```
1 #!perl
  2 use strict;
  3 use warnings;
  4 use Net::LDAP;
  5 use Authen::SASL;
  6 
  7 my $l = Net::LDAP->new( 'ldap.example.com', onerror=>'die', );
  8 my $sasl = Authen::SASL->new(mechanism=>'GSSAPI');
  9 $l->bind( sasl=>$sasl );
 10 
 11 print "OK\n"; 
```

**那么，可能的解决方案是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:58:10.233

默认情况下，Web 浏览器不转发 Kerberos 票证。（谢天谢地！这将是一个巨大的安全问题，因为浏览器只会将您的门票分发给您当地领域中任何需要门票的网站。）

不幸的是，让浏览器这样做需要一些努力。例如，在 Firefox 中，您必须进入 about:config 并自定义 network.negotiate-auth.delegation-uris 以添加您愿意委托票证的 URL。（我认为在 IE 中有类似的程序将网站标记为受信任域的一部分。）

除非您对浏览器环境有很多控制权，否则这通常是一条死胡同。大多数人只是让 Web 应用程序以自身身份（而不是用户身份）进行身份验证，并为其提供一般读取访问权限。或者，您可以使用支持凭证委托的更全面的站点范围的 Web 身份验证系统，但这对于您的情况来说可能是多余的。

支持这一点的两个实现是：

*   [网络认证](http://webauth.stanford.edu/)
*   [联名](http://weblogin.org/)

这两者都是需要设置一些基础设施的客户端/服务器企业 Web 身份验证系统。

# graphics - 有没有一种算法，可以将空间划分为 N 个给定随机数 N 的分区，其中 N<50

> ID：10269397
> 
> 赞同：0
> 
> 时间：2012-04-22T15:46:07.310
> 
> 标签：graphics, r-tree, space-partitioning

我阅读了有关空间分区的 R-Tree、kd-tree、边界间隔层次结构等。我发现这些数据结构对于空间查询很有用。虽然，他们做分区，但我不知道如何从数据结构中检索这些分区。所以，我的问题归结为“给定一个数字 N 和一个包含 X 个多边形的地图，我可以得到 N 个包含大约相等数量多边形的分区吗？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T02:46:20.793

好吧，如果你想要恰好 N 个分区，那么 R-Tree 的任何常见批量加载策略都应该有效。它不一定是最佳的，但您可以强制它们生成大小大致相等的 N 个分区。

kd-tree 将包含既不在左侧也不在右侧的对象。但是你可以使用 kd-tree 批量加载策略并修改它以产生 N 个分区。实际上，另一种简单但有时非常有效的批量加载和 R-tree 方法。

当您将 N 限制为 2 的幂，或者甚至更好的`d`某个数字的 th 幂时，拆分通常会变得更好。因此，将 3D 数据集拆分为 9 页比将其拆分为 8 页更容易实现。

# iphone - 生成哈希拼图

> ID：10269403
> 
> 赞同：6
> 
> 时间：2012-04-22T15:46:33.063
> 
> 标签：iphone, algorithm, puzzle

我想创建一个可以生成哈希谜题的 iPhone 应用程序（如果你不知道这个谜题，这里是维基百科的文章：[https](https://en.wikipedia.org/wiki/Hashiwokakero) ://en.wikipedia.org/wiki/Hashiwokakero ）。我认为开发求解算法对我来说不会太难，但是我不确定如何生成它。

这就是我的做法（如果可行的话，我会这样做）；我生成了几个岛（或段），但前提是它们允许可能的解决方案。然后，在每个生成的岛之后，我运行求解算法，看看是否可以求解。如果是，完成。否则，我要么删除该段并生成一个不同的段，要么添加另一个段。

你怎么看？这会奏效吗，有没有更有效的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:06:22.137

我会一步一步地构建一个*解决方案*，每次：

*   添加一个节点
*   向其添加一个或多个桥（如果不可能，则选择一个新节点）
*   增加计数器。
*   将桥梁使用的地方标记为不可用。

这确保有一个解决方案，但我猜一个真正的难题只有一个解决方案，所以稍后您必须使用求解器验证这一点，并且可能添加/删除节点直到它满足此规则。

# ruby - 在ruby中，File::Stat的类名很奇怪？

> ID：10269405
> 
> 赞同：1
> 
> 时间：2012-04-22T15:46:42.337
> 
> 标签：ruby, class

什么情况下`File::Stat`可以在类名中使用双冒号？它有什么特殊含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T15:48:10.380

它只是意味着另一个类或模块内部的类。

```
module Foo
  class Bar
  end
end 
```

您不能像那样引用 Bar 类，您必须使用它的完全限定名称，`Foo::Bar`（其他模块中可能还有其他 Bar 类，因此您必须能够区分它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:50:41.927

双冒号表示模块。很多时候类名可能会发生冲突，因此人们创建了一个新模块。

例如...`ActiveRecord::Base`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:52:48.637

双冒号用于在类或模块中获取 CONSTANT（所有大写的对象都是常量，例如 VALUE_CONSTANT 和 ClassName）。这是继承自 C++ 命名空间概念的约定。

所以这里的约定列表：

```
Module/Class::CONSTANT
Module/Class::Class
Module/Class.method 
```

# mysql - 在一个 mySQL 查询中更新多个 post_meta 数据

> ID：10269406
> 
> 赞同：1
> 
> 时间：2012-04-22T15:47:16.280
> 
> 标签：mysql

我想对 WordPress 站点（wp_postmeta 表）中的帖子元数据执行一些更新。已知的 good'ol 函数`update_post_meta()`正在完成这项工作，并且还将检查，如果密钥不存在，它将添加它。但是，此功能一次只能处理一篇文章。我想节省昂贵的数据库调用，并使用一个查询更新不同帖子 ID 的多个字段。

一般来说，我可以使用 mySQL`UPDATE`查询`CASE`来切换和分配每个`meta_value`，`post_id`就像[在这个例子](http://www.karlrixon.co.uk/writing/update-multiple-rows-with-different-values-and-a-single-sql-query/)中一样，并更新表中不同行的一些值。但是，对于某些帖子，可能`meta_key`尚不存在，因此`INSERT`需要而不是更新。好吧，如果不使用`update_post_meta()`，我应该以某种方式检查一下。我尝试使用`INSERT .... ON DUPLICATE UPDATE`( [syntax](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html) ) 和`REPLACE`( [syntax](http://dev.mysql.com/doc/refman/5.0/en/replace.html) )，但它仅与唯一或定义为主键的列相关，因此在这种情况下没有帮助。

有没有一种方法或想法，我如何拥有“插入值，如果已经存在这个 post_id 的这个 meta_key 则更新”，并为几个不同的 post_ids 执行此操作（相同的 meta_key，但一路上），并使用一个单一的 mySQL 查询?

谢谢（* 我也在 WordPress 答案中问过这个问题，也在这里问过）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T16:11:56.680

`REPLACE`并且`INSERT ... ON DUPLICATE KEY UPDATE`不是“仅与唯一或定义为主键的列相关”，而是根据*是否*存在唯一键冲突来确定记录是新的还是已经存在的（因此需要替换/更新）或不。正如[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/replace.html)所述：

> `REPLACE`MySQL 对(and )使用以下算法`LOAD DATA ... REPLACE`：
> 
> 1.  尝试将新行插入表中
>     
>     
> 2.  由于主键或唯一索引发生重复键错误，插入失败：
>     
>     
>     
>     一种。从表中删除具有重复键值的冲突行
>     
>     
>     
>     湾。再次尝试将新行插入表中

它的描述`INSERT ... ON DUPLICATE KEY UPDATE` [类似](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

因此，如果您的`REPLACE`or`INSERT ... ON DUPLICATE KEY UPDATE`命令通过它们当前的主键标识您更新的记录，它应该完全按照您的意愿行事。根据[WordPress 文档](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)，主键是`meta_id`字段，因此使用 a`SELECT`获取现有案例的此标识符并使​​用外部连接，获取`NULL`它是否不存在（[将列设置为下一个`auto_increment`值](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)）：

```
REPLACE INTO `wp_postmeta` (
      `meta_id`
    , `post_id`
    , `meta_key`
    , `meta_value`
)
    SELECT
          `meta_id`
        , `post_id`
        , "key of interest"
        , "new value" -- assuming all posts to be set the same
    FROM
        `wp_postmeta`
        NATURAL RIGHT JOIN (
           SELECT 1 AS `post_id` -- where 1 is the first post_id
           UNION SELECT 2        -- 2 is the second
           UNION SELECT 3        -- 3 is the third
           -- etc.
        ) AS `temp_table`
    WHERE
        `meta_id` IS NULL OR `meta_key` = "key of interest"
; 
```

如果每个帖子的新元值都不同，您可以添加这样的值作为第二列`temp_table`：

```
REPLACE INTO `wp_postmeta` (
      `meta_id`
    , `post_id`
    , `meta_key`
    , `meta_value`
)
    SELECT
          `meta_id`
        , `post_id`
        , "key of interest"
        , `new_value`
    FROM
        `wp_postmeta`
        NATURAL RIGHT JOIN (
           SELECT 1 AS `post_id`, "foo" AS `new_value`
           UNION SELECT 2, "bar"
           UNION SELECT 3, "qux"
           -- etc.
        ) AS `temp_table`
    WHERE
        `meta_id` IS NULL OR `meta_key` = "key of interest"
; 
```

# c# - 日期选择器控制错误

> ID：10269407
> 
> 赞同：0
> 
> 时间：2012-04-22T15:47:19.720
> 
> 标签：c#, .net, wpf, visual-studio-2010

我需要在我的 WPF 应用程序中使用 datepicker 控件，但我在 Toolbox 中找不到此控件。然后我安装了 WPFToolKit 并在 xaml 文件代码中添加了命名空间，但它仍然显示以下错误：
**错误 1 ​​XML 命名空间“http://schemas.microsoft.com/winfx/2006/xaml/presentation”中不存在标记“DatePicker” . 第 23 行位置 18。F:\Muhammad Anees\codereason_reports_v0.5_alpha\Samples\SimpleReport\EmployeeManager.xaml 23 18 Employee_Manager**

这是我的 xaml 文件代码：

```
<Window x:Class="SimpleReport.EmployeeManager"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:toolkit="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit"
Title="Employee Manager - Islam Engineering Pvt Ltd." Height="513" Width="865" ResizeMode="CanMinimize">

    <TabControl Height="482" HorizontalAlignment="Left" Margin="0,-2,0,0" Name="tabControl1" VerticalAlignment="Top" Width="832">
        <TabItem Header="Add New Employee" Name="tabItem1">
            <Grid Width="806" Height="440">
                <TextBox Height="23" HorizontalAlignment="Left" Margin="177,14,0,0" Name="txtBarcode" VerticalAlignment="Top" Width="120" Background="#FFE0DECC" KeyUp="txtBarcode_KeyUp" />
                <Label Content="Employee ID:" Height="28" HorizontalAlignment="Left" Margin="19,14,0,0" Name="label1" VerticalAlignment="Top" Width="85" />
                <TextBox Height="23" HorizontalAlignment="Left" Margin="177,49,0,0" Name="emp_name" VerticalAlignment="Top" Width="254" IsEnabled="True" />
                <Label Content="Employee Name:" Height="28" Margin="19,0,676,365" Name="label2" VerticalAlignment="Bottom" />
                <Button Content="Add" Height="23" Name="addbtn" Width="75" Background="#FFD0B8B8" BorderBrush="#FFB19414" Margin="176,136,554,281" Click="addbtn_Click" />
                <Label Height="28" HorizontalAlignment="Left" Margin="177,78,0,0" Name="addmsg" VerticalAlignment="Top" Width="275" Content="Employee added Successfully!" />
            </Grid>
        </TabItem>
        <TabItem Header="Employee Attendance Report" Name="tabItem2">
            <Grid>
                <Label Content="Select Report Type:" Height="28" HorizontalAlignment="Left" Margin="24,26,0,0" Name="label7" VerticalAlignment="Top" Width="122" />
            <Button Background="#FFD0B8B8" BorderBrush="#FFB19414" Content="Generate Report" Height="23" Margin="152,157,557,270" Name="reportBtn" Click="button1_Click" />
            <RadioButton Content="Today's Report" Height="16" HorizontalAlignment="Left" Margin="152,31,0,0" Name="radioButton1" VerticalAlignment="Top" />
            <DatePicker Height="25" HorizontalAlignment="Left" Margin="42,26,0,0" Name="datePicker1" VerticalAlignment="Top" Width="115" />
            <RadioButton Content="Previous Date" Height="16" HorizontalAlignment="Left" Margin="152,62,0,0" Name="radioButton2" VerticalAlignment="Top" />
            <RadioButton Content="Within Range" Height="16" HorizontalAlignment="Left" Margin="152,95,0,0" Name="radioButton3" VerticalAlignment="Top" />
        </Grid>
        </TabItem>
        <TabItem Header="Remove Employee Record" Name="tabItem3">
            <Grid>
                <ComboBox Height="23" HorizontalAlignment="Left" Margin="181,26,0,0" Name="comboBox3" VerticalAlignment="Top" Width="120" SelectionChanged="comboBox3_SelectionChanged" SelectedIndex="0" />
                <Label Content="Select Employee ID:" Height="28" HorizontalAlignment="Left" Margin="29,26,0,0" Name="label5" VerticalAlignment="Top" Width="122" />
                <Button Background="#FFD0B8B8" BorderBrush="#FFB19414" Content="Remove" Height="23" Margin="181,80,566,347" Name="button2" Width="75" />
            </Grid>
        </TabItem>
    </TabControl> 
```

DatePicker 控件位于上述代码中的第二个 Radiobutton 控件之后。请告诉我如何克服这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:58:39.220

我认为您正在使用 WPF 工具包，您需要使用工具包，因为您在 WPF 工具包程序集的开头指定了该工具包

```
<toolkit:DatePicker Height="25" HorizontalAlignment="Left" Margin="42,26,0,0" Name="datePicker1" VerticalAlignment="Top" Width="115" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:00:20.490

如果这是来自 nuget 的 wpf 工具包，那么您将其称为：

```
 <toolkit:DatePicker Name="blah blah" Margin="0" ect.. > </toolkit:DatePicker> 
```

您可能还必须尝试清理并构建解决方案，因为在使用工具包之前我实际上遇到了这个错误，但是在我重建解决方案之后它就起作用了。

# java - Android Listview OnClickListner 转到另一个类

> ID：10269408
> 
> 赞同：0
> 
> 时间：2012-04-22T15:47:22.410
> 
> 标签：java, android, listview, adapter

我正在努力做到这一点，一旦用户单击我的列表视图中的一个项目，它就会转到另一个为该场合动态创建的类。要添加，我正在创建一个联系人列表应用程序，当用户单击该应用程序时，它会显示通过我们系统的文本和通话记录；我不知道该怎么做，我猜垃圾收集器方法工作得很好，虽然，我认为这是错误的上下文。

谢谢 ：）

代码：

```
public class ChatService extends ListActivity {
  String GotPass;
  String GotUname;
  public static final String PREFS_NAME = "MyPregs";
  private GetTask getTask;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getTask = new GetTask();
    getTask.execute();
  }

  public class GetTask extends AsyncTask<Void, Void, ReturnModel> {
    @Override
    protected ReturnModel doInBackground(Void... params) {
      return load();
    }

    @Override
    protected void onPostExecute(ReturnModel result) {

      if(result.passworderror == true)
      {
        Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show();
      }
      else
      {
        Toast.makeText(getApplicationContext(), "yaya", Toast.LENGTH_SHORT).show();

        ListView lv = getListView();
        lv.setTextFilterEnabled(true);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, result.getheadlines());
        setListAdapter(adapter);
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getApplicationContext(), "Yaya, we clicked on something", Toast.LENGTH_LONG).show();
                // TODO Auto-generated method stub

            }
          });
      }
    }
  }

  private ReturnModel load() {
    ReturnModel returnModel = new ReturnModel();

    BufferedReader in = null;
    String data = null;
    Bundle gotData = getIntent().getExtras();
    if (gotData != null) {
      GotPass = gotData.getString("key!");
      GotUname = gotData.getString("key!!");
    }

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String username = settings.getString("key1", null);
    String password = settings.getString("key2", null);
    // username = "irock97"; // unremark to test like you got username from prefs..
    if (username != null  && username.equals("irock97")) {
      returnModel.setPassworderror(false);
    }
    else 
    {
      returnModel.setPassworderror(true);
      return returnModel;
    }

    HttpClient httpclient = new DefaultHttpClient();

    /* login.php returns true if username and password is equal to saranga */
    HttpPost httppost = new HttpPost("http://gta5news.com/login.php");

    try {
      // Add user name and password
      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
      nameValuePairs.add(new BasicNameValuePair("username", username));
      nameValuePairs.add(new BasicNameValuePair("password", password));
      httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

      // Execute HTTP Post Request
      Log.w("HttpPost", "Execute HTTP Post Request");
      HttpResponse response = httpclient.execute(httppost);
      in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
      StringBuffer sb = new StringBuffer("");
      String l = "";
      String nl = "";
      while ((l = in.readLine()) != null) {
        sb.append(l + nl);
      }
      in.close();
      data = sb.toString();

      List<String> headlines = new ArrayList<String>();
      headlines.add(data);
      returnModel.setheadlines(headlines);

    }
    catch (ClientProtocolException e) {
      e.printStackTrace();
    }
    catch (IOException e) {
      e.printStackTrace();
    }

    return returnModel;
  }

  public class ReturnModel {
    private List<String> headlines;
    private boolean passworderror;

    public List<String> getheadlines() {
      return headlines;
    }

    public void setheadlines(List<String> headlines) {
      this.headlines = headlines;
    }

    public boolean getPassworderror() {
      return passworderror;
    }

    public void setPassworderror(boolean passworderror) {
      this.passworderror = passworderror;
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:50:53.557

膨胀一个 xml 初始视图（在每个动态创建的布局上都相同的预设置）（膨胀意味着将 xml 格式设置为视图，简化）。

```
LayoutInflater inflater = (LayoutInflater) MyApplication.getAppContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View newView = inflater.inflate(R.layout.your_layout, parent, false); 
```

现在您可以根据自己的意愿修改 newView 并添加新的视图元素。

为此，您必须参考您想要添加内容的初始布局。

例如：

```
LinearLayout myInitialLL = (LinearLayout) newView.findViewById(R.id.my_initial_ll); 
```

例如，您可以创建一个新的 Textview 并将其添加到 myIniitalLL。

```
TextView myTV = new TextView(this);
myTv.setText("Test text");

myInitialLL.addView(myTv);
myInitialLL.requestLayout(); 
```

您现在可以在活动中创建自定义私有方法来创建逻辑部分。这应该在 onItemClickListener 中调用。如果您现在不知道需要多少文本视图，也可以通过循环创建动态文本视图。我更喜欢一个 ArrayList 作为参数。

# .net - 将负数的 pow() 计算为非整数指数

> ID：10269415
> 
> 赞同：-1
> 
> 时间：2012-04-22T15:48:15.470
> 
> 标签：.net, math

好的，所以我从[这个问题](https://stackoverflow.com/questions/8290804/cube-root-of-a-negative-number)中收集到，当您使用带有非整数指数的负数来获取 pow() 时，结果是 NaN。

所以我的问题是：我可以使用一些替代方法来获得答案吗？我只想能够做这样的事情：

```
MyPowFunction(-3125, 0.2); 
```

并让结果（正确）为-5。

有什么想法吗？

* * *

作为附录，*可以*（以某种方式）这样做。谷歌已经弄清楚了：[https ://www.google.com/search?q=%28-3125%29%5E0.2&oq=%28-3125%29%5E0.2](https://www.google.com/search?q=%28-3125%29%5E0.2&oq=%28-3125%29%5E0.2)

* * *

还有一点需要注意：我对双重结果不感兴趣——结果很复杂我完全没问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T16:30:59.290

如果 a 是**正数**而 b 是（复数）任意的，那么可以将 a^b 定义为 exp(b log a)。这直接扩展了 b 是有理数的情况。

**现在，如果 a 是复数（但非零），则可以通过类比**（专有名词是“解析延拓”）将 a^b 定义为 exp(b Log a)，其中 Log 是 exp 的**一个可能倒数**。

例如，一个可能的 Log 函数（有无穷多个，相差 2 i pi 的倍数）是

```
Log z = log |z| + i(arg z + 2k pi), k as you wish 
```

检查对于任何 k，这给出了 exp 的逆（我跳过了关于定义域的细节：假设只有一个 z，我们想要找到 Log z 使得 exp(Log z) = z）。

因此，您选择 k 的方式将影响答案。如果 b 是无理数，那么

```
"a^b" = exp(b Log a) = exp(ib arg a) * exp(2i k pi * b) * |a| 
```

并且由于 k 可以是任意的，因此 exp(2i k pi * b) 可以任意接近您想要在单位圆上的任何数字（单位圆 = 具有单位模数的数字），“a^b”的值可能有无限多.

如果 b 是有理数（例如您的示例中的 0.2 = 1/5），那么您将获得 5 个不同的 a^0.2 候选（其中一个是真实的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T16:04:18.317

问题在于这*不是*`-5`“数学上正确的答案”，原因如下：

 **   0.2 不完全是 1/5。您实际上要求 -3125 到 0.2000000000000000011102230246251565404236316680908203125 次方，它有一个非常大的解决方案系列。
*   通常的数学惯例是选择从评估 exp(y*log(x)) 中得到的 x^y 的解，其中 log(x) 被认为是在负实轴上有一个分支切割。-3125 位于分支切口上，因此您必须决定它在哪一侧。惯例是把它放在积极的一面。
*   即使假设 0.2 可以用浮点表示，根据约定评估您的表达式也会得到 4.045084971874738 + 2.9389262614623664i 的结果，而不是您似乎期望的 -5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T16:16:29.917

将负数提高到非整数幂会产生复杂的结果。您可以使用 .NET 4 中可用的 System.Numerics.Complex 类来计算它。例如：

```
using System;
using System.Numerics;   // Add reference to System.Numerics!!

class Program {
    static void Main(string[] args) {
        var c = new Complex(-3125, 0);
        var p = Complex.Pow(c, 0.2);
        Console.WriteLine(p);
        var result = p.Magnitude;
        Console.WriteLine(result);
        Console.ReadLine();
    }
} 
```

输出：

```
(4.04508497187474, 2.93892626146237)
5 
```

使结果为负将需要一些富有想象力的虚构操作。的值`result.Phase`不足以保证在任何合理的预测中使其为负值。*

# php - 使用 PHP 从 PDF 文件中提取页面

> ID：10269416
> 
> 赞同：0
> 
> 时间：2012-04-22T15:48:31.633
> 
> 标签：php, zend-framework, pdf, tcpdf, fpdf

我正在使用 php，我想打开一个现有的 pdf 文件，将一系列页面提取（克隆）到一个新页面，然后将新页面保存到磁盘。我知道有几个类，如 FPDF、TCPDF、Zend 框架等。我想知道哪个是最好的，如果可能的话，有一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:26:43.487

如示例 #3 所示：

[http://framework.zend.com/manual/en/zend.pdf.pages.html#zend.pdf.pages.cloning](http://framework.zend.com/manual/en/zend.pdf.pages.html#zend.pdf.pages.cloning)

打开pdf，克隆您想要的页面，将它们保存为新的pdf。

# php - cURL - 在我的浏览器中获得 200 OK 而不是 304

> ID：10269417
> 
> 赞同：1
> 
> 时间：2012-04-22T15:48:32.967
> 
> 标签：php, curl

我正在使用 cURL 来跟踪 HTTP 标头。
我的浏览器说资源得到了 304 响应。
在我的 cURL 中，我看到 200 OK。
你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T15:50:07.370

[“304 Not Modified”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5)表示资源与浏览器之前请求时的资源相同（例如，基于修改日期或etag）。

Curl 没有缓存，因此它总是会请求没有任何“if-modified-since”标头（和类似标头）的资源 - 因此服务器会将其与[“200 OK”](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1)状态码一起发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:51:24.127

304 表示未修改，并在响应包含 If-Modified-Since 标头的请求时发送。此类标头由浏览器发送用于缓存资源，但 curl 不发送它

# windows - symfony2 学说 windows 到 linux 服务器迁移

> ID：10269422
> 
> 赞同：0
> 
> 时间：2012-04-22T15:49:22.277
> 
> 标签：windows, linux, symfony, doctrine, migration

我已经使用模块开发了一个`symfony2`应用程序，它在我的 Windows 服务器上运行良好。`admingenerator``XAMPP`

将包括 db 在内的整个应用程序移动到 linux 服务器上（大概是这样）是不合理的。

应用程序（有错误）可以在[这里找到](http://quipod.com/bion/admin/web/app_dev.php/users/)

看过一些关于向 linux 迁移问题的帖子（可能是由于不同的文件夹符号`\`vs `/`），我无法找到解决方法。

有类似问题的人吗？

PS：如果提示输入凭据用户管理员/通过管理员！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:45:05.130

在 Shlomi\UsersBundle\Entity\users 中查看您的文件。是Users.php 还是users.php？请记住，Linux 区分大小写，而 Windows 不区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:22:07.050

我迁移 Symfony 环境的一种方法是针对整个数据库转储运行 SED。因此，例如，如果我从 xampp 转到 mywebsite.com，我会执行以下操作

```
%>sed -i bak 's/oldhost/newhost/g' myfile 
```

对于 Windows，您可能需要进行类似的路径替换才能将“\”更改为“/”。

此外，Symfony 可能还需要一些额外的步骤。看这里：

[http://robbymillsap.tumblr.com/post/21579085155/sed-find-replace-on-osx](http://robbymillsap.tumblr.com/post/21579085155/sed-find-replace-on-osx)

希望有帮助。

# ruby-on-rails - 在我的控制器上获取未定义的方法`each`

> ID：10269427
> 
> 赞同：0
> 
> 时间：2012-04-22T15:50:17.050
> 
> 标签：ruby-on-rails, ruby

我有这样的方法：

```
class ProfilesController < ApplicationController
  before_filter :authenticate_user!

  current_user

  def index
    @users = User.all
  end
  ...
end 
```

我的路线是

```
match 'profile',  :controller => 'profiles', :action => 'index' 
```

但是当我访问时，`http://127.0.0.1:8080/profile`我得到：

> `NoMethodError`在`Profiles#index`未定义的方法`each`中`nil:NilClass`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:22:46.873

这意味着`User.all`返回零。在调用每个用户之前，您需要检查是否有任何用户。如果您将视图更改为如下所示，则不会引发错误。

```
<% if @users %>          
  <% @users.each do |user| %>
    ...
  <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:04:04.000

工作。我刚刚`current_user`从我的`ProfilesController`@Jesper 中删除了该行，这与您所说的过滤器有关吗？

# javascript - Javaxcript 正则表达式元字符在括号内不起作用？

> ID：10269428
> 
> 赞同：1
> 
> 时间：2012-04-22T15:50:21.367
> 
> 标签：javascript, regex

我正在尝试构建一个 javascript 函数来用另一个类名替换一个类名。当我使用类似的功能时

```
function foo(bar)
{
    bar.className=bar.className.replace(/\bone/, "two");
}​ 
```

在像这样的标记上

```
<div class="one" onclick="foo(this)"></div>​ 
```

它正确地找到并替换`one`为`two`. 但是，当我使用方括号包含可能在 之前的其他字符时`one`，`\b`无法识别字符串的开头，并且不提供匹配项。例子：

```
function foo(bar)
{
    bar.className=bar.className.replace(/[\b\s]one/, "two");
}​ 
```

不起作用。甚至都不行`/[\b]one/`。

请参阅[http://jsfiddle.net/E4ph5/](http://jsfiddle.net/E4ph5/)以查看它的实际效果。我究竟做错了什么？（在小提琴中，如果您删除括号，则脚本可以正常工作。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T15:52:48.943

括号定义了一个字符类。在这样的类标记中，例如`\b`（单词边界）不起作用，因为它们在那里没有意义。

`/\bone/`无论如何，在你的情况下都很好 - 空格也是一个单词边界：http: [//jsfiddle.net/ThiefMaster/Z8HTE/](http://jsfiddle.net/ThiefMaster/Z8HTE/) - 你可以通过使用来改进它`/\bone\b/`以避免匹配，例如`class="onetwothree"`

# javascript - Django 表单向导无法阻止使用 Javascript 提交表单

> ID：10269429
> 
> 赞同：0
> 
> 时间：2012-04-22T15:50:31.627
> 
> 标签：javascript, jquery, django, django-forms, form-submit

我在 django 中使用表单向导，并且我希望仅在 Javascript 条件为真时才允许提交表单。

对于初学者，假设我总是想阻止表单提交。所以，我正在尝试这样的事情：

```
$('form[name=mainform]').submit(function(event) {
  alert('提交被阻止！');
  event.preventDefault();
  返回假；
});

```

但是，表单总是正常提交​​并进入向导的下一步！

我尝试了一切（设置提交按钮的onClick并返回false）但没有任何效果。我使用了类似的技术，它们以正常形式工作（不是 django）。任何人都可以向我解释有什么问题吗？

我不得不提一下，出于我自己的原因，我不想通过 Django 来做这件事（通过插入一个隐藏字段并通过 javascript 设置它的值，然后在干净的表单中检查它）。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T15:59:56.190

将侦听器添加到表单的提交按钮，而不是表单本身。

# http - 流式传输高清视频是否安全？

> ID：10269431
> 
> 赞同：1
> 
> 时间：2012-04-22T15:50:45.967
> 
> 标签：http, streaming, red5, rtmp

为了能够在我的网站上即时录制和播放音频，我设置了 Red5 和 FLV Audio Recorder。现在，我也将实施一个视频解决方案。

流式 (HD) 视频的问题在于，如果您的互联网连接太慢，它就无法工作。我想让广大用户能够观看我的视频。我可以使用 Red5-server，还是必须使用 HTTP 才能确保每个人都能完美观看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T19:36:59.743

好吧，如果您使用例如 jwPlayer，您可以设置一个 RTMP 流，因为您可能已经知道，因为您提出了这个问题。

如果您使用此代码：

```
<div id='mediaplayer'></div>

<script type="text/javascript">
  jwplayer('mediaplayer').setup({
    'flashplayer': 'player.swf',
    'width': '720',
    'height': '306',
    'playlist': [
        {
           'title': 'Just add a title here...',
           'provder': 'rtmp',
           'image': 'Add a image to show before the video is started.',
           'duration': 'X seconds'
           'streamer': 'rtmp://server.com/dir',
           'plugins': {
             'qualitymonitor-2': {}
            } // This will give different charts so that you can see what's going on behind the scenes!

           'levels': [
              { bitrate:"2920", width:"1920", file:"videos/sintel-1920.mp4" },
              { bitrate:"2080", width:"1280", file:"videos/sintel-1280.mp4" },
              { bitrate:"2080", width:"720", file:"videos/sintel-720.mp4" },
              { bitrate:"650", width:"480", file:"videos/sintel-480.mp4" },
              { bitrate:"420", width:"320", file:"videos/sintel-320.mp4" }
           ]
        }
    ]
  });
</script> 
```

您可以为最终用户提供具有不同比特率的同一视频的许多不同版本，因此如果您有足够的互联网速度，您可以使用更高质量的视频。（如果您有 20mbit/s 作为客户端，屏幕宽度为 400 px，您将获得示例代码中的最后一个文件，即使您有互联网可以获取最顶部。这是因为您作为客户端不会无论如何，看看有什么不同。）

> 您还可以使用较少的托管带宽，因为如果您使用小屏幕，则不会流式传输高质量，因为最终用户无论如何都看不到任何差异。

这是一个很好的方法，因为它将为您的用户提供最佳体验，同时您可以更好地保护您的视频免受“抢劫”！

如果您想知道什么，请添加评论！

# android - 弄清楚位图的分配位置？

> ID：10269433
> 
> 赞同：1
> 
> 时间：2012-04-22T15:51:05.873
> 
> 标签：android

我有一个应用程序在线程中获取位图，然后将位图放入全局内存缓存中。在 2.2 模拟器上，加载足够的位图（它们在列表视图中）后，我得到一个可重现的内存不足错误：

```
FATAL EXCEPTION: pool-1-thread-1
  java.lang.OutOfMemoryError: bitmap size exceeds VM budget
  at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
  ... 
```

堆看起来很稳定（3.3mb），我想知道我是否看不到内存量的增长，因为我认为在 2.2 操作系统中，位图内存是单独存储的？我一直在做 hprof 转储并在 MAT 中查看它们，我的对象计数看起来符合预期。

在 ICS 手机上运行应用程序不会出现同样的问题（但是，可能只是有更多的内存等）。我认为在后来的操作系统中，他们将位图内存作为堆的一部分？

无论哪种情况，有没有办法查看我的应用程序分配了哪些 Bitmap 实例？我认为 hprof 转储仅显示系统范围内的总计数。但是我看不到它们是从哪里分配的。

我在用着：

```
android.support.v4.util.LruCache<String, Bitmap> 
```

作为一个内存缓存 - 在条目被驱逐后，位图数据似乎没有被清理（我将缓存设置为 5mb 上限）。我记得 Bitmap 上有像 recycle() 这样的方法，也许它们没有被正确清理？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:44:47.620

> 堆看起来很稳定（3.3mb），我想知道我是否看不到内存量的增长，因为我认为在 2.2 操作系统中，位图内存是单独存储的？我一直在做 hprof 转储并在 MAT 中查看它们，我的对象计数看起来符合预期。

正确，对于 2.x，您看不到位图使用 MAT 占用的内存（您可以从 ICS 设备进行转储并突然看到巨大的跳跃）。但是，可用的内存量是相同的（但取决于设备，通常在 16 MB 和 32 MB 之间）。解决方案是在内存中保留尽可能少的位图。如果它们只是缩略图大小，您可能会避免将它们保留在内存中，但通常您无法加载那么多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:47:01.830

你是对的更高版本将位图数据保留在本机堆中。但即便如此，这些数据仍然计入位图预算。为避免此错误，您必须调用回收！所以扩展 LruCache，覆盖`entryRemoved`并在那里调用回收。此外，我会根据设备内存对缓存进行限制。例如，您可以使用`ActivityManager.getMemoryClass()`

```
 ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    int memoryClass = activityManager.getMemoryClass(); 
```

`memoryClass`包含以兆字节为单位的 dalvik 堆。例如，您可以使用该值的 1/5 作为缓存的限制。

这仍然不足以避免 OOM 错误，因为位图内存仅在终结器中被释放。请务必阅读有关位图处理的[官方文档。](http://developer.android.com/training/displaying-bitmaps/index.html)如果一切都失败了，你仍然可以尝试打电话`System.gc()`，`entryRemoved`看看是否有帮助。但正如 Ewoks 指出的那样，这不仅是一种不好的做法，而且还可能导致 UI 线程停止一段时间，所以只能作为最后的手段。

# jquery - 更改 jqueryui 按钮集中单选按钮的颜色

> ID：10269434
> 
> 赞同：2
> 
> 时间：2012-04-22T15:51:09.183
> 
> 标签：jquery, jquery-ui, button, colors

我有一个 jquery 单选按钮，我用 Jqueryui 的按钮集设置了样式：

```
<link type="text/css" href="jqueryUI1.8.16/css/smoothness/jquery-ui-1.8.16.custom.css" 
rel="stylesheet"/>  
<script type="text/javascript" src="jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="jqueryUI1.8.16/js/jquery-ui-1.8.16.custom.min.js">
</script>

<script type="text/javascript">

$(document).ready(function(){

    $("#atable tr").buttonset();

});

</script>
</head>

<body>
<table id="atable" border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td class="aspmnr">1</td>
    <td class="aspm">Test text</td>
    <td class="aradio">
      <input id="asp11" name="asp1" type="radio" value=0>
      <label for="asp11">0</label></td>
    <td class="aradio">
      <input id="asp12" name="asp1" type="radio" value=1>
      <label for="asp12">1</label></td>
    <td class="aradio">
      <input id="asp13" name="asp1" type="radio" value=2>
      <label for="asp13">2</label></td>
    <td class="aradio">
      <input id="asp14" name="asp1" type="radio" value=3>
      <label for="asp14">3</label></td>    
  </tr>
</table> 
```

我希望能够更改其中一个按钮的背景颜色，例如：

```
$("#asp11").css("background-color","#aaaaa5"); 
```

我也尝试将 css 应用于标签，但背景颜色会在一瞬间变回默认值。我想避免弄乱 jqueryui 的原始样式表。

任何人都知道如何更改按钮的背景颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:10:26.333

尝试这个。

```
$(".radio label").css("background-color","#aaaaa5");
```

```
$(".radio label").css("background-image","none");
```

或者

```
$(".radio label:first").css("background-color","yellow");
```

```
$(".radio label:first").css("background-image","none");
```

或者

```
$(".radio label").eq(1).css("background-color","re​​d");
```

```
$(".radio label").eq(1).css("background-image","none");
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:49:06.150

您必须删除标签上的背景图片，执行标签上的所有 css 代码，例如 0

```
$("#lblforasp11").css("background-color", "#aaaaa5");
$("#lblforasp11").css("background-image", "none"); 
```

# javascript - 如何将数据写入 javascript 变量以构建 URL

> ID：10269438
> 
> 赞同：0
> 
> 时间：2012-04-22T15:51:28.233
> 
> 标签：javascript, jquery, html, url-rewriting

情况：我正在构建一个 JS 工具，可以让您在浏览器中编辑 html 模板。我目前正在使用此代码将我输入的内容转储到特定的 DOM 元素中：

```
 $('#copyTagline').keyup(function() {
    $('#tagline').html($(this).val());
}); 
```

因此，当用户在 textarea copyTagline 中键入时，它会在带有标语 id 的 html 对象中打印。

问题：我想用一个 url 来实现这一点，这样用户就可以在他们的 facebook 或 twitter url 中复制和粘贴，但我不能在我的锚标记中插入 html 对象。有谁知道我如何创建一个变量，该变量的运行方式与我使用 sans html 对象上方的代码片段一样？

注意：在浏览 SO 时，我发现了一些关于使用 docment.write 和其他各种全局方法的讨论，这很有意义，但我不确定如何构建脚本以打印用户在 URL 字符串中键入的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:02:39.613

你的问题有点不清楚。也许你可以改写这个问题？您是否尝试重写浏览器位置字段中的 URI？（我问是因为你在这个问题上使用的标签）。在这种情况下，请参阅这篇文章：[http ://bytes.com/topic/javascript/answers/170365-change-browser-url-without-navigating-away](http://bytes.com/topic/javascript/answers/170365-change-browser-url-without-navigating-away)

“但我无法在锚标记中插入 html 对象”如果您只是询问如何更新锚标记的 HREF 属性，请尝试 $("#anchor").attr("href", $(this ).val());

# rspec - 水豚中带有文本的预期 css“标题”

> ID：10269445
> 
> 赞同：8
> 
> 时间：2012-04-22T15:52:34.590
> 
> 标签：rspec, capybara

我正在使用 capybara 代替 rails 中的 webrat。我已经安装了 capybara 并在 Gemfile 中使用了 gem 'capybara'。当我使用

```
page.should have_selector("title", :text => "anything title") 
```

它给出了一个错误

```
Failure/Error: page.should have_selector("title", :text => "anything title")
expected css "title" with text "anything title" to return something 
```

测试文件如下：

```
require 'spec_helper'

describe "Test pages" do  
  describe "Home page" do    
    it "should have the content 'Demo App'" do
    visit '/test_pages/home'      
    page.should have_selector("title", :text => "anything title")               
  end
 end
end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T02:48:35.837

不确定您使用的是哪个版本的 gem，但我遇到了一个类似的实例，使用 :text 失败但是当我使用 :content 时它通过了测试。我在 Ubuntu Lucid Lynx 上使用 rails 3.2.3、rspec-rails 2.9.0、capybara 1.1.2 和 therubyracer gems。

尝试更换

```
page.should have_selector("title", :text => "anything title") 
```

和

```
page.should have_selector("title", :content => "anything title") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T11:19:11.667

这里的问题是浏览器将`<title>`标签视为不可见。（感谢[DreadPirateShawn](https://stackoverflow.com/users/128977/dreadpirateshawn)链接到有关此主题的[问题](https://github.com/jnicklas/capybara/issues/863)）。

没有“干净”的方法来获取标题，但是通过一些技巧，您仍然可以通过执行以下操作来测试标题的值：

```
first('head title').native.text.should == "WhateverYourTitleNeedsToBe" 
```

不要使用该`:content`符号，因为在旧版本的 Capybara 中无效标签将被忽略，并且看起来好像您的测试已通过。较新的版本会给你一个很好的错误信息，比如：

> ArgumentError：无效键：内容，应该是以下之一：text，：visible，：between，：count，：maximum，：minimum

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T19:33:00.197

我有一个类似的问题，只是想让你知道，Capybara 不支持使用:content，它应该是:text。

:content 的问题是 Capybara 无法识别它，然后它被忽略并显示为 PASSED，但这是错误的行为。

所以如果你使用 Capybara，将每个 :content 切换到 :text 看看测试是否真的通过了，也许有没有注意到的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T20:36:39.957

我遇到了同样的问题。根据经验，我发现以下内容：

```
page.should have_selector("title", :text => "AnyTitle") 
```

将期望您的 html 输出包含如下标记：

```
<title text="AnyTitle"/> 
```

但是，如果您使用 :content 而不是 :text 如下

```
page.should have_selector("title", :content => "AnyTitle") 
```

那么它会期望您的 html 输出包含如下标签

```
<title>AnyTitle</title> 
```

因此，如果生成的 html 呈现包含`<title text="AnyTitle"/>`标记，则应使用 :text ，否则如果生成的 html 呈现包含`<title>AnyTitle</title>`标记，则可能要使用 :content 。

PS 我的 Gem 环境：capybara-2.0.2、rails-3.2.12、rspec-rails-2.12.2、webrat-0.7.3 如果删除 webrat，那么 Capybara 单独无法识别“:conetnt”关键字。

但修复它的干净方法是：摆脱 webrat 并安装一个稳定的 Capybara-1.1.2，即在 Gemfile

```
#gem webrat
gem 'capybara', '1.1.2' 
```

请参考[普鲁士旺的回答](https://stackoverflow.com/questions/11726316/testing-with-specs-capybara-from-railstutorial-chapter-3-does-not-work-have-se)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-20T10:54:46.293

只需这样做：

```
expect(page).to have_title("some title") 
```

# google-app-engine - gdata-java-client 和 google-api-java-client 之间的不兼容问题

> ID：10269451
> 
> 赞同：1
> 
> 时间：2012-04-22T15:53:09.323
> 
> 标签：google-app-engine, gdata-api, google-analytics-api, google-api-java-client

我们有一个使用 OAuth1 和 Google Analytics API 2.3 版（使用 gdata-java-client 中的 gdata-analytics-2.1.jar）在 App Engine 上构建的应用程序。我们已经开始逐步更新我们的应用程序以使用 OAuth2 和 Core Reporting API v3.0。在第一步中，我们只想允许我们的用户请求 OAuth2 令牌，而应用程序的其余部分将继续使用旧库。

根据关于迁移到 API Java 客户端的 Google 文档（[http://code.google.com/p/gdata-java-client/wiki/MigratingToGoogleApiJavaClient#What_if_I_have_a_large_code_base_that_uses_gdata-java-client?），“gdata-java-client](http://code.google.com/p/gdata-java-client/wiki/MigratingToGoogleApiJavaClient#What_if_I_have_a_large_code_base_that_uses_gdata-java-client)和 google-api-java-client 是两个完全不同的库，具有不同的包名称。这意味着您可以在项目中同时使用它们而不会发生冲突。新代码可以使用 google-api-java-client，旧代码可以继续使用 gdata-java-client。这可以提供平滑的迁移路径。”</p>

好吧，在做了一些测试之后，我们注意到 gdata-java-client 和 google-api-java-client 之间的不兼容问题。基本上，当我们从“google-api- services-analytics-v3-rev3-1.5.0-beta.zip”在 WEB_INF/lib 文件夹中，我们得到以下与 gdata-java-client 库相关的运行时错误：

**java.lang.NoClassDefFoundError：无法初始化类 com.google.gdata.client.analytics.AnalyticsService**

有没有人遇到过这个？我们做错了什么吗？提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:19:15.863

[从http://code.google.com/p/gdata-java-client/downloads/list](http://code.google.com/p/gdata-java-client/downloads/list)下载 gdata-src.java-1.XX.X.zip并查找 java/lib/gdata-analytics*.jar，需要放在 WEB-INF/lib 文件夹中。那就是包含 com.google.gdata.client.analytics.AnalyticsService 的 jar

# c# - 有没有直接的方法将大小或点乘以一个数字？

> ID：10269453
> 
> 赞同：2
> 
> 时间：2012-04-22T15:53:28.267
> 
> 标签：c#, .net

通过“直接”，我的意思是 Size*2 （不起作用），而不是：

```
size1 = new Size(size1.Width * 2, size1.Height * 2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T16:39:05.290

您可以在技术上编写扩展方法：

```
public static class Extensions {
    public static Size Multiply(this Size size, double factor) {
        return new Size((int)(size.Width * factor), (int)(size.Height * factor));
    }
} 
```

但几乎没有人会正确使用它。他们会写

```
this.Size.Multiply(1.2); 
```

而不是必需的

```
this.Size = this.Size.Multiply(1.2); 
```

一个几乎不可避免的错误，因为它看起来像一个实例方法。所以不要这样做，只写一个静态辅助方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T15:59:35.763

您可以重载 * 运算符：

```
class Size 
{
    public int Width { get; set; }
    public int Height { get; set; }

    public Size(int w, int h)
    {
        this.Width = w;
        this.Height = h;
    }

    public static Size operator *(Size s, int n)
    {
        return new Size(s.Width * n, s.Height * n);
    }
} 
```

现在你可以这样做：

```
Size s1 = new Size(1, 2);
Size s = s1 * 2; // s.Height = 2, s.Width = 4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T16:01:43.300

由于没有为[Size 结构](http://msdn.microsoft.com/en-us/library/system.drawing.size.aspx)实现 * 运算符，因此您必须创建一个。但是使用扩展方法是不可能创建新的操作符的。相反，您可以创建一个名为 multiply 的扩展方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T15:57:29.387

不是没有工作，但很容易使运算符重载

请参阅[codeproject 上的运算符重载演示](http://www.codeproject.com/Articles/28974/An-Introduction-to-Operator-Overloading-in-C)

见右下角：

```
public static MySize operator +(MySize mySize, Int32 value)
{
    return new MySize(
        mySize.m_Width + value,
        mySize.m_Height + value);
} 
```

计算出 * 运算符重载应该不会花很长时间

# c++ - OpenCV中的逆傅立叶变换

> ID：10269456
> 
> 赞同：4
> 
> 时间：2012-04-22T15:53:43.763
> 
> 标签：c++, opencv, fft, inverse, dft

我是 OpenCV 和图像处理算法的新手。我需要在 C++ 中的 OpenCV 中进行离散傅立叶逆变换，但我不知道如何。我在互联网上搜索，但没有找到答案。我正在使用此页面中的以下代码在我的程序中进行傅立叶变换：http: [//opencv.itseez.com/doc/tutorials/core/discrete_fourier_transform/discrete_fourier_transform.html](http://opencv.itseez.com/doc/tutorials/core/discrete_fourier_transform/discrete_fourier_transform.html)。我试图与该代码相反，但我不知道我在哪里做错了。我的代码在这里（我认为整个代码是错误的）：

```
void doFourierInverse(const Mat &src, Mat &dst) {
  normalize(src, dst, 0, -1, CV_MINMAX); 

  int cx = dst.cols/2;
  int cy = dst.rows/2;

  Mat q0(dst, Rect(0, 0, cx, cy));   
  Mat q1(dst, Rect(cx, 0, cx, cy));  
  Mat q2(dst, Rect(0, cy, cx, cy));  
  Mat q3(dst, Rect(cx, cy, cx, cy)); 

  Mat tmp;         
  q0.copyTo(tmp);
  q3.copyTo(q0);
  tmp.copyTo(q3);

  q1.copyTo(tmp);      
  q2.copyTo(q1);
  tmp.copyTo(q2);

  dst = dst(Rect(0, 0, dst.cols & -2, dst.rows & -2));

  exp(dst, dst);
  dst -= Scalar::all(1);  

  Mat planes[2];

  polarToCart(dst, Mat::zeros(dst.rows, dst.cols, dst.type()), planes[0], planes[1]);

  merge(planes, 2, dst);    

  idft(dst, dst, DFT_INVERSE | DFT_SCALE); 

  split(dst, planes);   

  dst = planes[0];
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T10:26:17.773

实际上，您不必交换不同的象限，只有当您是人类并且想要更自然的 FFT 结果可视化时才需要它（即中间的 0 频率、左/底部的负频率和正频率上/右）。

要反转 FFT，您需要“按原样”（或在您想要的频率滤波之后）将正向变换的结果传递给相同的 dft() 函数，只需添加标志 DFT_INVERSE。如果您还记得有关 FFT 的数学知识，那么前向和后向变换在公式中具有非常紧密的扭结……

**- - 编辑 - -**

究竟什么不起作用？下面的代码确实执行了向前然后向后的 FFT，并且一切都按预期工作。

```
// Load an image
cv::Mat inputImage = cv::imread(argv[argc-1], 0);

// Go float
cv::Mat fImage;
inputImage.convertTo(fImage, CV_32F);

// FFT
std::cout << "Direct transform...\n";
cv::Mat fourierTransform;
cv::dft(fImage, fourierTransform, cv::DFT_SCALE|cv::DFT_COMPLEX_OUTPUT);

// Some processing
doSomethingWithTheSpectrum();

// IFFT
std::cout << "Inverse transform...\n";
cv::Mat inverseTransform;
cv::dft(fourierTransform, inverseTransform, cv::DFT_INVERSE|cv::DFT_REAL_OUTPUT);

// Back to 8-bits
cv::Mat finalImage;
inverseTransform.convertTo(finalImage, CV_8U); 
```

# facebook - 从 Facebook 应用程序检索用户电话号码

> ID：10269457
> 
> 赞同：0
> 
> 时间：2012-04-22T15:53:45.497
> 
> 标签：facebook, sms

现在我读到允许开发人员通过他们的应用程序发送短信的扩展权限在一段时间前被弃用了。我[读到](http://www.pcmag.com/article2/0,2817,2375888,00.asp)了 Facebook 再次允许开发人员提取用户电话号码，然后又被[暂时](http://www.pcmag.com/article2/0,2817,2375899,00.asp)取消了。

我想知道他们是否重新启用了此功能？还是一去不复返了？我在谷歌上对此进行了搜索，但没有找到这个故事的更新版本。

# android - 安卓 SDK。谷歌 API SDK 链接

> ID：10269458
> 
> 赞同：0
> 
> 时间：2012-04-22T15:53:45.893
> 
> 标签：android, google-maps-api-3, shared-libraries, google-api, android-2.2-froyo

我正在尝试安装 Google API，以便可以在我的应用程序中使用 Google 地图。问题很简单：SDK 管理器没有查询服务器以安装库所需的链接。

我在帮助中的链接，安装新软件，可用的软件站点是：[https](https://dl-ssl.google.com/android/eclipse) ://dl-ssl.google.com/android/eclipse和[http://download.eclipse.org/releases/helios](http://download.eclipse.org/releases/helios)

我需要什么链接才能正确下载 Google API？

我无法将我的 Activity 扩展到 MapActivity 即使清单有`<uses-library android:name="com.google.android.maps"`，我有一个 api 密钥，并且我的 main.xml 有`<com.google.android.maps.MayView`标签。

![在此处输入图像描述](../Images/3011bc9d08b1d659f23903d868a421d3.png)

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:47:42.267

> 我在帮助中的链接，安装新软件，可用的软件站点是：[https](https://dl-ssl.google.com/android/eclipse) ://dl-ssl.google.com/android/eclipse和[http://download.eclipse.org/releases/helios](http://download.eclipse.org/releases/helios)

这些是为 Eclipse 准备的。Eclipse 不是安卓。

> 我需要什么链接才能正确下载 Google API？

您不需要“链接”。

第 1 步：从 Eclipse 主菜单中选择 Window > Android SDK Manager

第 2 步：选中您想要的任何“Google API”旁边的复选框，以获取不同的 API 级别

![在此处输入图像描述](../Images/a6d1eb3018eb4e0483e360c605e45bfc.png)

步骤#3：点击“Install packages...”按钮并按照提示操作，然后关闭SDK Manager

步骤#4：选择您想要的项目，然后从 Eclipse 主菜单中选择 Project > Properties

第 5 步：在“属性”窗口中，选择 Android，然后将构建目标设置为具有 Google API 的目标：

![在此处输入图像描述](../Images/c8e82fcc2aca20e602f87398b3a3478d.png)

# c# - 如何使用 Data Adapter 和 DataSet 查询多个 ID？

> ID：10269460
> 
> 赞同：-1
> 
> 时间：2012-04-22T15:54:08.543
> 
> 标签：c#, .net, sql, dataset, dataadapter

我有一组属于用户表的唯一 ID，例如。1478、8906、4677 等。现在如何使用 DataAdapter 获取包含这些用户的完整记录集的 DataSet？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:09:10.533

如果您在字符串变量中有 Id 并以逗号分隔，那么您可以执行以下操作，例如，如果您使用的是 SQL Server

```
SqlDataAdpater apd=new SqlDataAdapter("Select * from Users where UserId in("+users+")",new sqlconnection("connection info")
DataSet ds=new DataSet()
adp.fill(ds) 
```

where`users`是一个变量，其中包含`Id`逗号分隔格式的 's列表

# android - 保留列表视图每一行中元素的状态

> ID：10269463
> 
> 赞同：0
> 
> 时间：2012-04-22T15:54:29.127
> 
> 标签：android, android-listview, baseadapter, layout-inflater

我通过使用 inflater 为每一行充气来设计一个列表视图，并且我在其点击事件上更改了 convertView 元素的颜色。但是在滚动列表后，元素会丢失这些更改。我怎样才能“保存”他们的状态并代表他们？

而且我脑子里又多了一个查询，当点击提交按钮时，如何计算未点击的“列表项”总数？

[滚动前 http://69.imagebam.com/download/l4tJZG08i5tM_7SV3K_fHQ/18631/186307764/snap1.png](http://69.imagebam.com/download/l4tJZG08i5tM_7SV3K_fHQ/18631/186307764/snap1.png) [滚动后 http://17.imagebam.com/download/CC3cRv0ITi42Fo8WWUs86g/18631/186307781/snap4.png](http://17.imagebam.com/download/CC3cRv0ITi42Fo8WWUs86g/18631/186307781/snap4.png)

这是我的代码：

```
package scf.login;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class firstsubActivity extends Activity
{

//variable declaration
ListView lvSubCat;
Intent action;
Button btnBack,btnSubmit,btnNext;
Boolean submission=false;
Integer unchecked=0;
String[] subStatus = {"","Ok","","","","Ok","","","Alert","","","","Checked","","","Ok","","","Alert",""};

// defining on click listener
android.view.View.OnClickListener lstnr = new android.view.View.OnClickListener() 
{

    @Override
    public void onClick(View v) 
    {
    switch (v.getId()) {

    case R.id.btnBack:
            Toast.makeText(getApplicationContext(), "Back button clicked", Toast.LENGTH_SHORT).show();
        break;
    case R.id.btnSubmit:
            if(!submission)
            {

                checkcompletion();

                if(unchecked>0)
                {
                    Toast.makeText(firstsubActivity.this, "Complete the precheking of "+unchecked+" intervention(s) highlighted by Gray colour", Toast.LENGTH_LONG).show();
                }
                else
                {
                    Toast.makeText(firstsubActivity.this,"Successfully submitted !!",Toast.LENGTH_SHORT).show();                        
                    submission=true;
                }

            }
            else
            {
                updatecofirmation();
            }
        break;
    case R.id.btnNext:
            if(submission)
            {
                nextconfirmation();
            }
            else
            {
                Toast.makeText(firstsubActivity.this,"Submit the answers",Toast.LENGTH_SHORT).show();
            }
        break;

    }

}

    private void nextconfirmation() 
    {
        AlertDialog.Builder builder = new AlertDialog.Builder(firstsubActivity.this);
        builder.setCancelable(false);
        builder.setTitle("Confirmation message");
        builder.setMessage("Do you want to leave this page ?");
        builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

                Intent action = new Intent(firstsubActivity.this,cat_subcatActivity.class);
                startActivity(action);      
                }
        });
        builder.setNegativeButton("No", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                Toast.makeText(firstsubActivity.this, "No clicked", Toast.LENGTH_SHORT).show();

            }
        });

        builder.create().show();
    }

    private void updatecofirmation() 
    {
        AlertDialog.Builder builder2 = new AlertDialog.Builder(firstsubActivity.this);
        builder2.setCancelable(false);
        builder2.setTitle("Confirmation message");
        builder2.setMessage("Do you want to update answers ?");
        builder2.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                submission=false;
                btnSubmit.performClick();
            }
        });
        builder2.setNegativeButton("No", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                Toast.makeText(firstsubActivity.this, "No clicked", Toast.LENGTH_SHORT).show();

            }
        });

        builder2.create().show();
    }

    private void checkcompletion() 
    {
        unchecked=subStatus.length;
        try
        {
            for(Integer j=0;j<subStatus.length;j++)
            {
                // CONFUSED
            }

        }

        catch (Exception e) {
            e.printStackTrace();
        }                   
        finally
        {

        }

    }

};

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.firstsub);

    //Binding
    lvSubCat = (ListView)findViewById(R.id.lvSubCat);
    btnBack = (Button)findViewById(R.id.btnBack);
    btnSubmit=(Button)findViewById(R.id.btnSubmit);
    btnNext = (Button)findViewById(R.id.btnNext);

    //setting listeners
    btnBack.setOnClickListener(lstnr);
    btnSubmit.setOnClickListener(lstnr);
    btnNext.setOnClickListener(lstnr);

    //data of subcategories and their status from database
    String[] subCat = {"zero","first","second","third","forth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","forteenth","fifteenth","sixteenth","seventeenth","eighteenth","ninteenth"};
    String[] subStatus = {"","Ok","","","","Ok","","","Alert","","","","Checked","","","Ok","","","Alert",""};
    /*
    for(Integer i=0;i<subStatus.length;i++)
    {
        set the status of each subcategory
    }
    */

    //setting adapter and binding adapter to the views
    MySimpleAdapter adapter1 = new MySimpleAdapter(this,subCat);
    lvSubCat.setAdapter(adapter1);
}

//defining customised MySimpleAdapter class inside firstsubActivity class
public class MySimpleAdapter extends BaseAdapter 
{
    private final Activity context;
    private final String[] subCat;

    public MySimpleAdapter(Activity context, String[] subCat) 
    {
        super();
        this.context = context;
        this.subCat = subCat;
    }
/*      
    protected class viewHolder
    {
        TextView tvOk;
        Button btnChecked,btnAlert;
    }
*/
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return subCat.length;
    }
    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) 
    {

//      final viewHolder holder = new viewHolder();

        //inflating
        LayoutInflater inflater = context.getLayoutInflater();
        convertView = inflater.inflate(R.layout.lstinfl,null);

        //binding
            final TextView tvOk=(TextView)convertView.findViewById(R.id.tvOk);
            final Button btnChecked=(Button)convertView.findViewById(R.id.btnChecked);
            final Button btnAlert=(Button)convertView.findViewById(R.id.btnAlert);

        //inserting subcategories
        tvOk.setText(subCat[position]);

        //representing subcategories according to their status
        try
        {
            for(Integer k=0;k<subStatus.length;k++)
            {
                // CONFUSED

            }

        }
        catch (Exception e) {
            // TODO: handle exception
        }
        finally
        {

        }

        //listeners to change the Color and Status
        tvOk.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                tvOk.setClickable(false);
                btnChecked.setClickable(true);
                btnAlert.setClickable(true);
                tvOk.setBackgroundColor(Color.GREEN);
                btnChecked.setBackgroundColor(Color.WHITE);
                btnAlert.setBackgroundColor(Color.WHITE);
                subStatus[position]="Ok";
            }
        });

        btnChecked.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                tvOk.setClickable(true);
                btnChecked.setClickable(false);
                btnAlert.setClickable(true);
                tvOk.setBackgroundColor(Color.BLACK);
                btnChecked.setBackgroundColor(Color.YELLOW);
                btnAlert.setBackgroundColor(Color.WHITE);
                subStatus[position]="Checked";
//                  action = new Intent(getApplicationContext(), subdescActivity.class);
//                  startActivity(action);

            }
        });

        btnAlert.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                tvOk.setClickable(true);
                btnChecked.setClickable(true);
                btnAlert.setClickable(false);
                tvOk.setBackgroundColor(Color.BLACK);
                btnChecked.setBackgroundColor(Color.WHITE);
                btnAlert.setBackgroundColor(Color.RED);
                subStatus[position]="Alert";
//                  action = new Intent(getApplicationContext(), subdescActivity.class);
//                  startActivity(action);
            }
        });

        return convertView;

    }   

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:38:27.197

好吧，您将两种状态（文本和状态）都保存在数组中，所以至少那部分是好的。现在您需要检查`states[]`getView() 以根据它设置按钮的正确外观，例如：

```
 if (subStatus[position].equals("Ok")) {
            tvOk.setClickable(false);
            btnChecked.setClickable(true);
            btnAlert.setClickable(true);
            tvOk.setBackgroundColor(Color.GREEN);
            btnChecked.setBackgroundColor(Color.WHITE);
            btnAlert.setBackgroundColor(Color.WHITE);
            subStatus[position]="Ok";
          }
          .... 
```

然后，当您提交时，您可以浏览这些状态项并查看单击或未单击的内容。

# c++ - GMP 库，C++、MinGW、Code::Blocks 中的编译错误

> ID：10269464
> 
> 赞同：3
> 
> 时间：2012-04-22T15:54:30.790
> 
> 标签：c++, mingw, codeblocks, gmp

我已经为 MinGW 建立了 GMP。我使用的 IDE 是 Code::Blocks。我对 GMP 的 C 函数没有任何问题。但是我遇到了 C++ 的问题。我试图运行的程序就是这么简单，

```
#include<iostream>
#include<gmpxx.h>
using namespace std;

main()
{
    mpz_class a;
    a=12345;
    cout<<"value"<<a<<"\n";
    return 0;
} 
```

我得到的错误是

```
F:\Compilers\C_Libraries\GMP\lib\libgmpxx.a(osmpz.o):osmpz.cc|| undefined reference to `__gmpz_get_str'|
F:\Compilers\C_Libraries\GMP\lib\libgmpxx.a(osfuns.o):osfuns.cc:(.rdata+0x1c)||undefined reference to `__gmp_asprintf_memory'|
F:\Compilers\C_Libraries\GMP\lib\libgmpxx.a(osfuns.o):osfuns.cc:(.rdata+0x20)||undefined reference to `__gmp_asprintf_reps'|
F:\Compilers\C_Libraries\GMP\lib\libgmpxx.a(osdoprnti.o):osdoprnti.cc|| undefined reference to `__gmp_doprnt_integer'|
F:\Compilers\C_Libraries\GMP\lib\libgmpxx.a(osdoprnti.o):osdoprnti.cc|| undefined reference to `__gmp_asprintf_final'|
||=== Build finished: 5 errors, 0 warnings ===| 
```

现在，一些额外的数据：

1.  我对 C 函数没有任何问题。而且，如果我删除 cout<< 语句，文件编译并运行良好。问题可能与重载的运算符有关。
2.  libgmpxx.a 和 libgmp.a 与编译器链接。也可以在错误消息中看到...
3.  问题可能仅出在 libgmpxx.a 上。所以，我再次建立了图书馆，但文件是一样的。
4.  我使用本教程使用 MSYS 为 MinGW 构建 GMP。[http://www.cs.nyu.edu/exact/core/gmp/](http://www.cs.nyu.edu/exact/core/gmp/)和[http://suchideas.com/journal/2007/07/installing-gmp-on-windows/](http://suchideas.com/journal/2007/07/installing-gmp-on-windows/)
5.  我使用的 GMP 版本是 5.0.4。

所以，我想知道的是，可能是什么问题？又该如何解决？并且，如果无法解决并且您有 5.0.4 版本的工作文件，请分享。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:03:37.050

我怀疑构建程序的命令以`libgmp*`错误的顺序指定了库。确保在`libgmp.a`库之后指定`libgmpxx.a`库：

```
-lgmpxx -lgmp 
```

如果它们以其他顺序指定，则在从`libgmpxx.a`库中拉取依赖项时，`libgmp.a`将不会搜索该库。

从[`ld`链接器的`-l`选项](http://sourceware.org/binutils/docs-2.22/ld/Options.html#Options)文档中：

> 链接器只会在命令行中指定的位置搜索存档一次。如果存档定义了在命令行上出现在存档之前的某个对象中未定义的符号，则链接器将包含存档中的适当文件。但是，稍后在命令行上出现的对象中的未定义符号不会导致链接器再次搜索存档。
> 
> 请参阅 -( 选项以了解强制链接器多次搜索档案的方法。
> 
> 您可以在命令行上多次列出同一个存档。

# java - 将整数输入到数组列表中

> ID：10269466
> 
> 赞同：1
> 
> 时间：2012-04-22T15:54:49.863
> 
> 标签：java, arraylist

如果我在文本文件中有一行整数，格式如下： [3, 3, 5, 0, 0] 我该如何将整数添加到数组列表中？我有这个，但它不工作：

```
while (input.hasNextInt())

{
    int tempInt = input.nextInt();
    rtemp.add(tempInt);
} 
```

如何处理逗号和括号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:04:39.470

您可以使用[ReplaceAll(String regex, String replacement)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)删除括号，然后使用[Split()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)函数将字符串拆分为 ArrayList 使用“，”作为分隔符。但是，这会将字符串拆分为仅包含数字的较小字符串，因此请使用 Integer.parseInt() 将字符串转换为 int。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T16:10:38.053

您需要记住，文件中的数字是*字符串*，需要先转换为实际整数。假设在输入文件中每一行都具有所描述的格式（例如：），`[3, 3, 5, 0, 0]`这应该适用于将所有数字添加到单个`ArrayList`中，忽略空格、括号和逗号：

```
BufferedReader in = new BufferedReader(new FileReader("file.txt"));
List<Integer> ints = new ArrayList<Integer>();
String line = in.readLine();

while (line != null) {
    String[] numbers = line.split("[\\[\\],\\s]+");
    for (int i = 1; i < numbers.length; i++)
        ints.add(Integer.parseInt(numbers[i]));
    line = in.readLine();
}

in.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T16:05:29.060

未经测试，但这应该有效。

```
string s = "[1,2,3,4,5]";
ArrayList list = new ArrayList();

foreach (string st in s.Replace("[", "").Replace("]", "").Split(','))
{
     list.Add(int.Parse(st));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T16:06:06.690

您可以读取整个字符串并使用正则表达式或字符串标记器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T16:21:17.267

```
//you already know how to read those lines into Strings. 
String s="[3, 3, 5, 0, 0]";
StringTokenizer tokenizer = new StringTokenizer(s, "[,]");
while(tokenizer.hasMoreTokens())
 list.add(Integer.parseInt(tokenizer.nextToken()) 
```

java.util.StringTokenizer 将帮助您使用指定的分隔符（“[”，”，或“]”）拆分字符串

参考[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T16:07:51.903

你可以尝试这样的事情：

```
Scanner scanner = new Scanner(file);  

while (scanner.hasNextLine()) {  
      String line = scanner.nextLine();  
      String[] nums = line.substring(1,line.length() - 1).split(",");  
      for(String n:nums){  
            list.add(Integer.valueOf(n));
      }
} 
```

您也可以为此使用正则表达式。

# javascript - 如何将 JSON 转换为字符串？

> ID：10269469
> 
> 赞同：43
> 
> 时间：2012-04-22T15:55:20.073
> 
> 标签：javascript, json

> **可能重复：**
> [将 JS 对象转换为 JSON 字符串](https://stackoverflow.com/questions/4162749/convert-js-object-to-json-string)

我在 JS 中有一个 JSON 对象，我想将它转换为字符串。这是一个功能吗？

提前致谢，

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-22T15:56:54.597

[JSON.stringify()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)

> 将值转换为 JSON，如果指定了替换函数，则可选择替换值，或者如果指定了替换数组，则可选择仅包含指定的属性。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-22T15:56:58.083

您可以使用[JSON`stringify`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)。

```
JSON.stringify({x: 5, y: 6}); // '{"x":5,"y":6}' or '{"y":6,"x":5}' 
```

当涉及到浏览器时，对这一点的全面支持非常好，如[http://caniuse.com/#search=JSON](http://caniuse.com/#search=JSON)所示。但是，您会注意到，早于 8 的 IE 版本本身不支持此功能。

如果您也想迎合这些用户，您将需要一个 shim。Douglas Crockford在 github 上提供了他自己的[JSON Parser 。](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-22T15:57:33.687

尝试使用`JSON.stringify`

问候

# c++ - 这是编写析构函数的正确方法吗？

> ID：10269470
> 
> 赞同：0
> 
> 时间：2012-04-22T15:55:28.740
> 
> 标签：c++, destructor

除了许多成员函数之外，我的 Graph 类还有 3 个主要成员：指向其顶点的指针向量，称为“顶点”，指向其边的指针向量，称为“边”，以及一个整数计数器变量。我开始/尝试编写析构函数以从向量中释放内存，但我不确定我是否做得正确。我该怎么处理柜台？我试图说“删除计数器”，但它不是指针（哎呀）。

```
Graph<Object,Weight>::~Graph(){
        for(unsigned int i=0; i<vertex.size(); ++i){
                delete vertex[i]; }
        for(unsigned int j=0; j<edge.size(); ++j){
                delete edge[j]; }

        //counter? 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:01:47.087

删除取决于您分配的方式，请参阅[C++ 中 delete 和 delete [] 的区别](https://stackoverflow.com/questions/4670782/the-difference-between-delete-and-delete-in-c)

至于您的 int 成员，由于您没有动态分配它（您没有使用 new），因此您不必删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:04:40.310

假设 is 的类型`vertex`并且`std::vector<Vertex*>`您按如下方式创建向量：

```
vertex.push_back( new Vertex ); 
```

您的清理代码看起来正确。

**但是，我劝你不要这样做。**声明`vertex`为`std::vector<std::unique_ptr<Vertex>>`，您不再需要担心`delete`单个向量成员。

如果您使用的是 Boost，您还可以制作`vertex`一个[`boost::ptr_vector`](http://www.boost.org/doc/libs/1_49_0/libs/ptr_container/doc/ptr_vector.html).

至于`counter`变量，除非您`new`在类构建期间的某个地方使用计数器，否则您不需要`delete`它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T15:59:51.687

我假设`vertex`并`edge`使用`new`? 那么你写的很好，但是如果你声明你的`vertex`和`edge`作为一个数组并`new`使用`new []`操作符编辑那么你需要使用`delete []`调用而不是`delete`，如果计数器没有被声明为指针和`new`编辑那么就不需要删除计数器.

作为一个设计决策，您应该考虑将您的`vertex`和`edge`对象声明为`boost::shared_ptr`或`unique_ptr`以便它们被引用计数，并且当`Graph`对象超出范围时它们会自动清理，因此您甚至不需要充实您的析构函数。

如果你有 c++11，那么你可以使用这些`std`版本而不需要`boost`like`std::shared_ptr`和`std::unique_ptr`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T16:01:00.877

您可以使用以下方法删除指针数组：

```
del[] arr; // arr is array of pointers. 
```

然而，如果`counter`来自堆栈，程序会处理它，作为程序员的你不需要担心释放内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T16:02:48.690

是`counter`一个普通的**int**变量吗？如果是这样，您将不负责它的生命周期。

**只有在使用new**关键字创建对象时才能使用delete**关键字**。（即便如此，仅当您的程序中没有其他内容时，例如 shared_ptr 正在为您执行删除操作）

 **使用 new/delete 时，您将接管语言并自己管理对象的生命周期/存在。普通变量会自动创建和销毁，这意味着您无需担心它们。**

# python - 如何等待使用条目小部件单击返回？

> ID：10269472
> 
> 赞同：1
> 
> 时间：2012-04-22T15:55:37.820
> 
> 标签：python, user-interface, tkinter, widget, tkinter-entry

我只是想在 Tkinter 中制作一个非图形游戏，但在输入小部件时遇到了问题。在打印之前如何等待`"<Return>"`被按下？

```
 from Tkinter import *

    class App:
        def __init__(self, master):

            frame = Frame(master)
            frame.pack()
            f = Frame(master, width=500, height=300)
            f.pack(fill=X, expand=True)

            mt = StringVar()

            menubar = Menu(master)
            menubar.add_command(label="New Game", command=self.new_game)
            menubar.add_command(label="Continue Game", command=self.continue_game)
            master.config(menu=menubar)

            maintext = Label(master, fg="blue", textvariable=mt)
            maintext.pack(side=BOTTOM)
            mt.set("")

            self.e1 = Entry(master)
            self.e1.pack()
            self.e1.bind("<Return>")
            self.e1.lower()

            global mt

        def new_game(self):
            mt.set("What do you want your username to be?")
            self.e1.lift()
            #wait for <Return> to be pressed
                mt.set("Welcome " + self.e1.get())
        def continue_game(self):
            mt.set("Type your username in.")

    root = Tk()

    app = App(root)

    root.mainloop() 
```

我希望它是当我单击顶部菜单栏上的“新游戏”时，它会显示输入框并等待我输入内容，然后单击输入。然后它打印出“欢迎”+（该人输入的内容）。实际发生的是，当我单击新游戏时，它会立即打印“欢迎”。

通过打印，我的意思是将底部的标签添加到其他内容，由“mt.set”引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:43:42.627

在 GUI 程序中，您无需等待* 某事发生，而是响应事件。因此，要在用户按下返回时调用函数，您可以执行以下操作：

```
 self.e1.bind("<Return>", self._on_return) 
```

`_on_return`当用户按下返回键时，上面将调用该函数。

在您的特定代码中，您实际上并不需要 StringVar。例如，您可以这样做：

```
def __init__(self, master):
    ...
    self.maintext = Label(master, fg="blue")
    ...

def _on_return(self, event):
    self.maintext.configure(text="Welcome, %s" % self.e1.get()) 
```

* 严格来说，你*可以*等待，但这不是编写 GUI 程序的正确方法，除非在特定情况下，例如等待对话框被关闭。

# java - 物理字体java？

> ID：10269473
> 
> 赞同：1
> 
> 时间：2012-04-22T15:55:38.520
> 
> 标签：java, fonts, truetype, embedded-fonts

我将 ttf 文件捆绑在一个 jar 文件中，并打算将它们用作渲染文本的物理字体。

我在互联网上看到的所有示例代码如下：

```
InputStream is=Essai.class.getResourceAsStream(resourcePath);
Font f=Font.createFont(fontFormat, is); 
```

关于这段代码，我有两个问题：

*   首先，一种字体，比如 DejaVu，包含 4 个不同的 ttf 文件，每种样式 1 个（常规、粗体、斜体和粗斜体）；从一个单一的 ttf（4 个中的任何一个）创建一个字体就足够了吗？

*   其次，我看到的所有代码在创建字体后都没有关闭流，这让我想知道这是故意的吗？也许创建的字体（稍后将在本地 GraphicsEnvironment 中注册）需要流保持打开状态？

    createFont() 方法的 javadoc 说：“此方法不会关闭 InputStream。”

    所以我的第二个问题是我应该在创建字体后关闭流，还是保持打开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:01:33.703

1.  我不相信加载一个变体会加载它们。但是，这没关系。Java 可以`Font`使用粗体+斜体的任意组合来制作变体。我只会把标准`Font`放在罐子里。
2.  关闭流。为了简洁起见，许多示例偷工减料（尽管这通常是一个坏主意）。

# jquery - 选择一个元素及其兄弟

> ID：10269479
> 
> 赞同：18
> 
> 时间：2012-04-22T15:56:25.187
> 
> 标签：jquery, jquery-selectors, siblings

切换元素及其兄弟元素可以通过以下方式完成：

```
$(this).toggle();
$(this).prev().toggle(); 
```

将它们结合起来不起作用：

```
$(this,$(this).prev()).toggle(); 
```

如何同时选择两者？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-22T16:04:30.813

对于 jQuery 1.8+，使用`.addBack()`：

```
$(this).prev().addBack().toggle(); 
```

对于早期的 jQuery 版本，使用不推荐使用的`.andSelf()`调用（参见[演示](http://jsfiddle.net/8M7Ys/)）：

```
$(this).prev().andSelf().toggle(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-22T16:48:50.733

对于上一个兄弟姐妹和自己：

```
$(this).prev().andSelf().toggle(); 
```

对于所有兄弟姐妹和自己：

```
$(this).parent().children().toggle(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-22T16:11:27.333

[顺便说一句，虽然这个问题drinchev](https://stackoverflow.com/a/10269566/82548)已经回答了这个问题，但我想我会在阅读这个问题后粘贴我刚刚做的这个快速实验，这也有效。虽然......它确实让我感到惊讶：

```
$('#recipient').click(
    function(){
        var pair = [this, this.previousElementSibling];
        $(pair).toggleClass('red green');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/YSUcs/)。

顺便说一下，[JS Perf 对两种选择器方法的松散比较](http://jsperf.com/previouselementsibling-vs-prev-andself)。

* * *

**编辑**添加了一个 IE（据我所知）友好的更新，尽管我目前正在为所有浏览器配备它，而不是功能检测（另外，我终于意识到蓝色！= 绿色）：

```
function pESibling(n){
    var nPS = n.previousSibling;
    if (!n || nPS === null){
        return false;
    }
    else if (nPS.nodeType == 1){
        return nPS;
    }
    else {
        return pESibling(nPS);
    }
}

var that = document.getElementById('recipient'),
    pair = [that, pESibling(that)];
$(pair).toggleClass('red green');
console.log(pair);
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/YSUcs/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-23T08:59:09.997

也有效：

```
$(this).prev().add($(this)).toggle() 
```

# c# - 将 .NET 对象序列化为 JSON

> ID：10269482
> 
> 赞同：1
> 
> 时间：2012-04-22T15:56:42.063
> 
> 标签：c#, .net, json, serialization

我尝试使用以下代码将 .NET 对象序列化为 JSON，但我不断收到空白文本。我究竟做错了什么？

```
[DataContract]
        public class JsonObject2
        {
            [DataMember(Name = "field1")]
            string field1 { get; set; }
            [DataMember(Name = "field2")]
            string field2 { get; set; }
            [DataMember(Name = "field3")]
            string[] test = { "heshan", "perera" };
        } 
```

该对象，我尝试序列化并在消息框中显示生成的 JSON 字符串，但我得到的只是空白。

```
MemoryStream s = new MemoryStream();

            DataContractJsonSerializer dcjs2 = new DataContractJsonSerializer((typeof(JsonObject2)));
            JsonObject2 obj2 = new JsonObject2();
            dcjs2.WriteObject(s, obj2);

            StreamReader r = new StreamReader(s);
            String x = r.ReadToEnd();
            MessageBox.Show(x); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T16:13:13.980

尝试添加：

```
s.Position = 0; 
```

就在你创建之前`StreamReader.`

# c++ - 派生类中指向基类的指针向量

> ID：10269487
> 
> 赞同：3
> 
> 时间：2012-04-22T15:57:07.240
> 
> 标签：c++, vector, multiple-inheritance, derived-class

我正在编写一个应用程序，其中我将通过指向基类的指针访问几个派生类。我希望这些派生类之一在应用程序中包含它的邻居（也是基类类型）的指针向量，如下所示：

```
 #include <vector>

    class BaseClass
    {
    public:
        BaseClass() { }
        virtual ~BaseClass() { }
    };

    class DerivedClass : virtual public BaseClass
    {
    public:
        DerivedClass() : BaseClass() { }
        ~DerivedClass() { }
    private:
        vector<BaseClass*> Neighbors;
    }; 
```

但是，得到以下编译器错误：

```
example.cpp:16: error: ISO C++ forbids declaration of ‘vector’ with no type
example.cpp:16: error: expected ‘;’ before ‘&lt;’ token 
```

这甚至可能吗？如果可能，请有人指出我的错误！编译器应该知道刚刚声明的 BaseClass 是什么类型，实际上声明类型的成员是`BaseClass Foo;`有效的，所以我不明白为什么向量无法识别 BaseClass*。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T15:58:16.270

你没有放`using namespace std;`, `using std::vector`, 或`std::vector<...>...`

```
#include <vector>
using std::vector; //choice 1
using namespace std; //choice 2 

class BaseClass
{
public:
    BaseClass() { }
    virtual ~BaseClass() { }
};

class DerivedClass : virtual public BaseClass
{
public:
    DerivedClass() : BaseClass() { }
    ~DerivedClass() { }
private:
    std::vector<BaseClass*> Neighbors; //choice 3
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:13:49.503

旨在作为对答案 #1 的评论：您应该避免在头文件中“使用 ...”声明。将它们保存在实现文件 (.cpp) 中。Google 的样式指南提供了一些附加信息，原始发帖人和回答者可能会觉得有帮助：http: [//google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Namespaces](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Namespaces)。我不认可整个谷歌风格。

# c# - Vector和Matrix类的接口？

> ID：10269493
> 
> 赞同：0
> 
> 时间：2012-04-22T15:57:46.447
> 
> 标签：c#, design-patterns, interface, matrix

我有一个泛型`Vector<T>`类和一个泛型`Matrix<T>`类，我想知道让两个类都实现一个接口是否是个好主意。

基本上，我正在实现两种算法：AlgorithmA 和 AlgorithmB，它们都执行非常相似的操作（重置、平均...等），但使用不同的算法并作用于不同的结构： `AlgorithmA`使用`Vector<double>`while `AlgorithmB`uses `Matrix<Complex>`。

我到目前为止的设计：

```
abstract class AlgorithmArray
{
   // Operator overloading
}

class AlgorithmAArray : AlgorithmArray
{
    private Vector<double> _vector;

    // Overrides
}

class  AlgorithmBArray : AlgorithmArray
{
     private Matrix<Complex> _matrix;

     // Overrides
} 
```

我宁愿从接口`AlgorithmAArray`派生`Vector<T>`并实现接口' `IAlgorithmArray`'（而不是抽象类）。无论如何，这些算法然后用于模拟两个位置之间的传输/接收：

```
public class CommunicationParameters
{
         private AlgorithmArray _transmission;
         private AlgorithmArray _receiving;

         public void Compute()
        {
            if(_transmission != null)
                 _transmission.Compute();

            if(_receiving != null)         
                 _receiving.Compute()

        }
} 
```

有没有更好的方法来解决我的问题？

注意：基类`AlgorithmArray`复制了许多操作符/克隆...等方法，我觉得这可以避免，也许使用泛型？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:09:02.253

接口将允许仅读取或仅写入向量/矩阵的例程接受预期向量/矩阵类型的子类型或超类型的向量/矩阵。我不确定这通常对矩阵有用，但它对于向量的某些应用可能很方便。

与类相比，接口的另一个优势可能更适用于您的情况，即它们可以允许可变、不可变和写时复制对象之间的平滑互操作（后者需要额外的间接级别）。如果您有很多向量或矩阵将成为彼此的副本，但其中一些最终会被修改，这可能会很有用。方法`AsImmutable`,`AsNewMutable`和`AsPossiblyExistingMutable`可能对此有用。第一个方法（如果在可变对象上调用）将创建一个新的不可变对象，其内容与调用时其主体的内容匹配，或者（如果在不可变对象上调用）对象，只需返回其主体。第二个将创建一个新的可变对象，无论现有对象是可变的还是不可变的。第三种方法如果可变则返回其主题，否则创建一个新的可变对象；它通常只应用于对象的持有者知道，如果对象是可变的，它拥有唯一的引用的情况。

例如，如果我有一个`_thing`type的私有字段`IReadableVector<Foo>`，我的 setter 可以将它设置为，`value.AsImmutable()`而我的 getter 可以 return `_thing.AsImmutable()`。我的变异方法会`_thing = _thing.AsPossiblyExistingMutable()`在调用变异方法之前设置。如果我在收到它后没有尝试进行变异`_thing`，那么它将是一个不可变对象（其他对象也可能持有对它的引用）。我第一次改变它时，它会被复制到一个新的可变对象中。然而，随后的突变可以继续使用相同的可变对象，因为它永远不会暴露给任何外部代码。

PS-- 支持和反对将`IImmutableVector<T>`and`IImmutableMatrix<T>`作为接口，而不是仅具有`ImmutableVector<T>`和`ImmutableMatrix<T>`类。一方面，如果它们是接口，则可能有不需要实际存储所有元素的有用实现。例如，一个类`AllMatchingVector<T>`可以继承`IImmutableVector<T>`，但只包含一个`T`和一个表示其长度的数字；它的索引 getter 将简单地返回该元素，而不管指定的索引是什么，或者`DiagonalMatrix<T>`它只是`IImmutableVector<T>`为其对角线的内容保存一个`T`将在其他任何地方退回；特别是对于大型向量/矩阵，这样的类可以节省内存。另一方面，没有办法确保没有人使用实际上不是不可变的类来实现这些接口中的一个。我个人的感觉是，为此使用接口很好。毕竟，很少有人抱怨`SortedDictionary<T>`如果一个类`IComparable<T>`以不产生不可变排序关系的方式实现会失败。尽管如此，很多人不同意这样的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:12:42.690

我建议制作两个可以将任何数据结构作为参数并执行其操作的算法类。我认为不需要所有这些 OOP 继承，它只会增加复杂性。

# android - 如何在屏幕上只显示日历

> ID：10269496
> 
> 赞同：0
> 
> 时间：2012-04-22T15:58:02.180
> 
> 标签：android

我过去 4 小时一直在浏览，发现我必须在我的 xml 中创建一个 calendarview 并在我的 java 文件中实例化它。但我真的无法理解如何在屏幕上显示实际的日历本身。

我的xml文件

```
 <CalendarView
        android:id="@+id/calen"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/> 
```

文件

```
 package org.example.calender;

import java.util.Calendar;
import android.app.Activity;
import android.os.Bundle;

public class CalenderActivity extends Activity {
    Calendar calender;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        calender = (Calendar)findViewById(R.id.calen);
    }
} 
```

此外，它在“CALEN”上给出错误，但是我的日历视图 ID 也是“CALEN”。

任何帮助、提示和指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:59:35.903

我认为这就像改变一样简单：

```
calender = (Calendar)findViewById(R.id.calen); 
```

到：

```
CalendarView calender = (CalendarView) findViewById(R.id.calen); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:08:23.827

```
 package org.example.calender;

import java.util.Calendar;
import android.app.Activity;
import android.os.Bundle;

public class CalenderActivity extends Activity {
    CalendarView calender;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        calender = (CalendarView)findViewById(R.id.calen);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T16:09:51.987

只需尝试此代码:::

```
package org.example.calender;

import java.util.Calendar;
import android.app.Activity;
import android.os.Bundle;

public class CalenderActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new CalenderView(this));
    }
} 
```

# php - PHP中的语音识别？

> ID：10269499
> 
> 赞同：10
> 
> 时间：2012-04-22T15:58:19.487
> 
> 标签：php, speech-recognition, voice-recognition, audio

我正在寻找 PHP 中的语音识别。

我有很多 wav 文件（10-15 秒），我希望语音识别能够识别每个 wav 文件中的 1 或 2 个单词，然后将其标记到数据库或 csv 中。

所有文件都有相同的声音和口音（同一个人哈哈）

示例伪代码：

```
$voice = new play('file.wav');
$result = $voice->recognise("Good Morning");
if ($result) { 
  echo "Matched Good Morning"; 
  //flag to database or csv
 } else { 
  echo "No match found";
 } 
```

哪个 PHP 语音识别库可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T16:01:40.937

PHP 没有内置此功能，但[Sphinx](http://cmusphinx.sourceforge.net/)有可用的 API就是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:48:57.833

以前也有人问过类似的问题。您可能希望查看[https://stackoverflow.com/a/6351055/90236](https://stackoverflow.com/a/6351055/90236)以开始搜索语音引擎。

还有一些关于在网页中使用 Php 进行语音识别的问题。看起来不像你这样做，但它是 PHP - [https://stackoverflow.com/a/8717077/90236](https://stackoverflow.com/a/8717077/90236)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-14T05:19:45.293

您可以在 rapidapi 中免费使用我们的语音识别 api，也可以使用 php 代码示例。可用于英语和法语。使用以下链接： [https ://rapidapi.com/user/hivoicy-vxmKOG2vl](https://rapidapi.com/user/hivoicy-vxmKOG2vl)

# objective-c - 将数据（.app）移动到越狱手机/应用程序字典？

> ID：10269501
> 
> 赞同：0
> 
> 时间：2012-04-22T15:58:27.167
> 
> 标签：objective-c, root, move, jailbreak

我正在制作一个应用程序（用于 Cydia），允许用户下载其他 .app 并安装它们。一切都下载得很好，但是当我开始移动文件时，我碰到了一堵墙。

代码：

```
//Start Moving
        NSString *str = textDownload.text;
        str = [str stringByReplacingOccurrencesOfString:@".zip"
                                             withString:@".app"];
        NSString *placeToMoveFile = [NSString stringWithFormat:@"mv %@/%@ /Applications/", documentsDirectory, str];
        NSLog(placeToMoveFile);
        const char *runCommand = [placeToMoveFile UTF8String];
        system(runCommand); 
```

过了一会儿我开始有创意了（LOL）

我认为问题出在`system()`. 系统甚至没有向模拟器中的控制台提供输出。就像注释一样，该应用程序确实**以 root 身份运行，**所以我不应该在尝试将文件移动到 /Applications 时遇到权限错误。

# ruby - 回形针 - 仅允许 PDF

> ID：10269508
> 
> 赞同：0
> 
> 时间：2012-04-22T15:59:27.117
> 
> 标签：ruby, ruby-on-rails-3, paperclip

如何只允许上传某种文件，例如 PDF、Word 或 Excel 文件？我使用**回形针**宝石。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T16:20:07.817

使用`content_type`验证，如下所示：

```
validates_attachment :avatar, :content_type => { :content_type => "application/pdf" } 
```

# javascript - 日期构造函数：数字参数与字符串参数在某些情况下给出不同的日期

> ID：10269513
> 
> 赞同：18
> 
> 时间：2012-04-22T15:59:47.493
> 
> 标签：javascript, date, constructor

首先，我认为时区可能与此有关。我在美国东部时间/美国东部时间。另外，我正在 chromium 17 / linux 上对此进行测试。

现在，假设我创建了两个这样的日期：

```
// December 5

dateFromNumbers = new Date(2020, 11, 5);
dateFromString = new Date("2020-12-5"); 
```

似乎这些日期应该具有相同的时间戳，并且它们确实：

```
+dateFromNumbers == +dateFromString; // true 
```

...至少在这种情况下。但在某些情况下，它们不会：

```
// December 15

dateFromNumbers = new Date(2020, 11, 15);
dateFromString = new Date("2020-12-15");

+dateFromNumbers == +dateFromString; // false 
```

这里发生了什么？

```
dateFromNumbers; // Tue Dec 15 2020 00:00:00 GMT-0500 (EST)
dateFromString;  // Mon Dec 14 2020 19:00:00 GMT-0500 (EST) 
```

看起来`dateFromString`比`dateFromNumbers`这种情况早 5 小时（EST 是 GMT - 5，我确信它以某种方式相关）。

它似乎会影响 10 月到 12 月的月底。这是一个小提琴，可以很容易地看出哪些日子不同（除非你是红绿色盲，在这种情况下可能很难看到，我很抱歉）。

[http://jsfiddle.net/9gBfX/](http://jsfiddle.net/9gBfX/)

是什么赋予了？

* * *

笔记：

*   您可以将系统时区设置为 EST/EDT 以查看我所看到的 jsfiddle 示例。
*   日期的月份数字是从零开始的；这`11`不是错字。
*   这个问题出现在我检查的每一年。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T17:06:24.350

查看[V8 的源代码](http://code.google.com/searchframe#W9JxUuHYyMg/trunk/src/dateparser-inl.h&l=47)后：

```
// Specification:
// Accept ES5 ISO 8601 date-time-strings or legacy dates compatible
// with Safari.
<...>
//  A string that matches both formats (e.g. 1970-01-01) will be
//  parsed as an ES5 date-time string - which means it will default
//  to UTC time-zone. That's unavoidable if following the ES5
//  specification. 
```

阅读周围的代码，似乎带有月份和日期 2 符号的日期时间字符串被认为是有效的 ES5 日期时间字符串。在 ES5 解析器中，在解析日期和时间之后，有一条注释：

```
// Successfully parsed ES5 Date Time String. Default to UTC if no TZ given. 
```

在“YYYY-MM-DD”的情况下，一旦代码到达那么远，ES5 解析器就成功地解析了整个字符串，所以它在遗留解析器有机会本地化时区之前返回。否则（月/日是一个符号长），它将被视为“遗留”日期时间，遗留解析器会处理它并对其进行本地化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T17:55:21.473

这是其他答案的简化答案。

**日期识别不同的字符串格式**

*   非标准日期
*   RFC 2282 日期
*   ES 5 日期

**大多数格式被解释为本地日期**

在[RFC 2282](http://www.ietf.org/rfc/rfc2822.txt)的第 14 页，我们看到：

> 日期和时间应该表示当地时间。

非标准日期以类似方式处理。

**ES 5 格式被解释为 UTC**

在ES 5 规范的[第 15.9.1.15 节](http://es5.github.com/x15.9.html#x15.9.1.15)中，我们看到：

> 缺席时区偏移的值为“Z”。

“Z”代表 UTC 时间。

**十月十号**

ES 5 格式的日期需要两位数的月份和日期。原始帖子中的月份和日期不是零填充的。“2020-9-9”不是有效的 ES 5 日期表示；它是一种非标准格式，因此以本地时间进行解释。“2020-10-10”*是*有效的 ES 5 日期表示，因此必须以 UTC 解释。

**可能的解决方法**

*   *不要使用字符串构造函数/Date.parse！*
*   更改分隔符，使格式永远不会匹配 ES 5 格式。
*   指定时区。
*   将日期调整为当地时间。如果他们有几个小时或几分钟：（`date.setMinutes(date.getTimezoneOffset());`无论如何，这似乎有效）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T16:21:04.663

使用“-”作为美国日期的日期分隔符会使一些浏览器感到困惑，一些浏览器会执行日期算术，另一些会返回 NaN，因此请使用“/”日期分隔符。一种文化意识的解决方案是使用 date.js，它是一个出色的 JavaScript 日期处理程序，可以解决您指出的问题 (http://www.datejs.com/)。使用 parse 方法可以消除所有混淆：

```
Date.parse("2020-12-15").toString() // yields the correct date ("Tue Dec 15 00:00:00 PST 2020"). 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T16:39:53.060

根据[这篇文章](https://stackoverflow.com/questions/2488313/javascripts-getdate-returns-wrong-date)，由于浏览器的各种实现，似乎`Date`的字符串参数构造函数是实现敏感的。`Date.parse()`

您的测量结果是正确的，如果您希望浏览器正确解析 EST，您可能应该完全避免使用此构造函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-22T17:08:21.333

看起来日期构造函数需要空格而不是“-”。它是推荐的方式。看看这个链接：
[3.3。日期和时间规范](https://www.rfc-editor.org/rfc/rfc2822#page-14)

> 尽管整个日期时间规范都允许折叠空白，但建议在 FWS 出现的每个位置使用单个空格（无论是必需的还是可选的）

另请查看此链接：
[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

> dateString：表示日期的字符串值。该字符串应采用解析方法可识别的格式（符合 IETF 的 RFC 2822 时间戳）。

我尝试了以下代码，它返回 true

```
dateFromNumbers = new Date(2020, 11, 15);
dateFromString = new Date("2020 12 15");
alert(+dateFromNumbers == +dateFromString);​ 
```

从 10 月份开始也不是问题，它与两位数月份有关。如果我在九月尝试相同的方法，那么：

```
dateFromNumbers = new Date(2020, 8, 15);
dateFromString = new Date("2020-09-15");
alert(+dateFromNumbers == +dateFromString);​ // This returns false 
```

但如果我在 9 月使用一位数，那么它会返回 true

```
dateFromNumbers = new Date(2020, 8, 15);
dateFromString = new Date("2020-9-15");
alert(+dateFromNumbers == +dateFromString);​ // This returns true 
```

如果使用九月两位数的空间，则返回true

```
dateFromNumbers = new Date(2020, 8, 15);
dateFromString = new Date("2020 09 15");
alert(+dateFromNumbers == +dateFromString);​//This returns true 
```

# solr - Solrj 查询动态字段

> ID：10269514
> 
> 赞同：0
> 
> 时间：2012-04-22T15:59:48.833
> 
> 标签：solr, lucene, solrj

在 Solrj (Solr 3.6) 中，我是否能够过滤我对动态字段的搜索：

```
params.set("fl", "name*_s"); 
```

还是我[仍然](http://lucene.472066.n3.nabble.com/fl-parameter-and-dynamic-fields-td489832.html)需要将此字段复制到新字段（非动态）才能进行搜索？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:51:30.030

> params.set("fl", "name*_s");

我不认为你可以在 3.6 中做到这一点。至少，[补丁](https://issues.apache.org/jira/browse/SOLR-2444) 被标记为“Fix Version/s：4.0”

现在，您仍然可以通过直接命名从特定动态字段中检索值，例如“name123_s”。

但我不确定我是否回答了正确的问题，因为“fl”不参与过滤或搜索。“fl”是要返回的存储字段列表。

如果要搜索多个字段，则应查看 edismax 查询解析器的“qf”参数。

# javascript - 在框架中打开外部链接，例如 About.com？

> ID：10269520
> 
> 赞同：0
> 
> 时间：2012-04-22T16:00:07.060
> 
> 标签：javascript, html

我需要在框架中打开页面，这正是 About.com 的做法。（例如访问[http://netforbeginners.about.com/od/antivirusantispyware/a/malware101_2.htm](http://netforbeginners.about.com/od/antivirusantispyware/a/malware101_2.htm)并点击像 Cexx.org 这样的外部链接）

看起来有某种脚本正在运行，以这种方式打开任何外部链接。

我怎样才能实现相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:07:05.940

发生的情况是在 about.com 上打开了一个新页面，该页面由顶部的 html 和打开链接的 iframe 组成。您可以使用基本的 JavaScript 代码来做到这一点。

# c# - 无法查看任何接收到的数据

> ID：10269527
> 
> 赞同：1
> 
> 时间：2012-04-22T16:01:05.733
> 
> 标签：c#, .net, udp

我正在用 C# 语言实现非常简单的 UDP 服务器。

当我在基于控制台的应用程序上实现服务器时，它运行良好。

但是当我在基于 Windows 的应用程序上使用相同的代码来实现它时，

它不像以前那样工作。

我猜是线程的问题。

所以我把线程放在代码上，但仍然不起作用。

“ReceiveFrom()”的功能不像以前那样工作了。

```
 numReceived = udpSocket.ReceiveFrom(buffer, ref remoteEP); 
```

我错过了什么问题？

先感谢您。

```
 using System;
  using System.Collections.Generic;
  using System.ComponentModel;
  using System.Data;
  using System.Drawing;
  using System.Linq;
  using System.Text;
  using System.Windows.Forms;

  using System.Runtime.InteropServices;
  using System.Net;
  using System.Net.Sockets;
  using System.Threading;

  namespace UDP_Server
  {
      public partial class Form1 : Form
      {

          private const int portNum = 5432;

          Socket udpSocket;

          byte[] buffer = new Byte[100];

          public Form1()
          {
              InitializeComponent();
          }

          private void button1_Click(object sender, EventArgs e)
          {
              ThreadStart threadStart = new ThreadStart(onServer);
              Thread thread = new Thread(threadStart);
              thread.Start();
          }

          private void onServer()
          {
              EndPoint localEP = new IPEndPoint(IPAddress.Parse("xxx.xxx.xxx.xxx"), portNum);
              //EndPoint remoteEP = new IPEndPoint(IPAddress.Any, 0);

              udpSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

              udpSocket.Bind(localEP);

              ThreadStart threadStart1 = new ThreadStart(OnReceive);
              Thread thread1 = new Thread(threadStart1);
              thread1.Start();
              //udpSocket.BeginReceiveFrom(buffer, 0, buffer.Length,
              //SocketFlags.None, ref remoteEP, new AsyncCallback(OnReceive), (object)this);
          }

          private void OnReceive()//IAsyncResult ar)
          {

              int numReceived = 0;
              EndPoint remoteEP = new IPEndPoint(IPAddress.Any, 0);

              Console.WriteLine("UDP Starting Server");
              Console.WriteLine("-----------------------------");

              while (true)
              {
                  numReceived = udpSocket.ReceiveFrom(buffer, ref remoteEP);

                  string s = Encoding.UTF8.GetString(buffer, 0, numReceived);

                  Console.WriteLine("Echo : {0}", s);
              }
          }
      }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:05:09.367

看起来好像您希望它打印一些输出（它是通过控制台窗口）。您需要添加要在 Windows 窗体控件（例如富文本框）中显示的所有输出，然后执行以下操作：

```
RichTextbox1.Text += yourInput; 
```

# iphone - 在视图之间传递数据不起作用

> ID：10269531
> 
> 赞同：1
> 
> 时间：2012-04-22T16:01:17.380
> 
> 标签：iphone, objective-c, ios, ipad

我已经用*完全相同*的代码完成了很多次，但由于某种原因，它今天无法正常工作。

```
 ExampleViewController1 *exampleView = [[ExampleViewController1 alloc] initWithNibName:@"ExampleViewController1" bundle:nil];
 [exampleView setProjectName:[[self.projectListArray objectAtIndex:indexPath.row] objectForKey:@"name"]];
 NSLog(@"%@", [[self.projectListArray objectAtIndex:indexPath.row] objectForKey:@"name"]);
 XAppDelegate.stackController pushViewController:exampleView fromViewController:nil animated:YES] 
```

我的`NSLog`打印正确。

`My ExampleViewController1.h`文件声明如下：

```
@property(nonatomic, strong) NSString *projectName; 
```

然后我在`ExampleViewController1.m`'s中执行此代码

```
 -(void)viewDidLoad {
     NSLog(@"%@", self.projectName);
     self.projectNameLabel.text = self.projectName;
     [super viewDidLoad];
 } 
```

我`NSLog`的结果很好奇。`NSLog`来自我的似乎`viewDidLoad`在我的另一个之前被调用：

```
 2012-04-22 10:59:41.462 StackedViewKit[43799:f803] (null)
 2012-04-22 10:59:41.463 StackedViewKit[43799:f803] NewTest 
```

我已经确认那里的`(null)`值来自`NSLog(@"%@", self.projectName);`，但这应该是第二个`NSLog`调用...我不知道为什么它首先通过。

有人要求此代码：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
   if ((self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {

    // random color
    self.view.backgroundColor = [UIColor colorWithRed:((float)rand())/RAND_MAX green:((float)rand())/RAND_MAX blue:((float)rand())/RAND_MAX alpha:1.0];
   }
  return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:16:39.247

> viewDidLoad 在第一次显示视图控制器之前调用，而不是在 initWithNibName 之后立即调用。
> 
> **> viewDidLoad 方法在视图控制器将其视图层次加载到内存后调用。无论视图层次结构是从 nib 文件加载还是在 loadView 方法中以编程方式创建，都会调用此方法。**
> 
> **> initWithNibName 您指定的 nib 文件不会立即加载。它在第一次访问视图控制器的视图时加载。如果您想在加载 nib 文件后执行其他初始化，请覆盖 viewDidLoad 方法并在那里执行您的任务。**

**您可以使用 App 委托将数据从一个传递到另一个，这是另一种替代解决方案。**

```
you do in initWithNibName method itself. or in viewDidAppear. 
```

**根据@sch**评论，您的 initWithNibName 方法应该是这样的；

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil { 

     self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil] //just set it here first and then check

     if (self) { 
         // do something here; 
         } 
return self; 
} 
```

我们只需要足够聪明地考虑在构造函数中我们需要什么以及在 viewDidLoad 中我们需要什么（一旦它加载到内存中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T16:42:38.243

正如我所料，问题是您试图`self.view`在初始化方法内部进行访问。所以将行`self.view.backgroundColor = ...`移至`viewDidLoad`方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"%@", self.projectName);
    self.projectNameLabel.text = self.projectName;
    self.view.backgroundColor = [UIColor colorWithRed:((float)rand())/RAND_MAX green:((float)rand())/RAND_MAX blue:((float)rand())/RAND_MAX alpha:1.0];
} 
```

* * *

事实上，该[`view`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW2)物业的文件说：

> 如果您访问此属性并且其值当前为 nil，则视图控制器会自动调用 loadView 方法并返回结果视图。

因此，当您调用`self.view`初始化方法时，视图控制器将不得不加载视图（从 nib 或使用该`loadView`方法）。这就是为什么`viewDidLoad`被称为。

# php - PHP AJAX RSS 阅读器

> ID：10269532
> 
> 赞同：1
> 
> 时间：2012-04-22T16:01:20.617
> 
> 标签：php, ajax, rss

我一直在使用这个 PHP/AJAX rss 阅读器[http://www.w3schools.com/php/php_ajax_rss_reader.asp](http://www.w3schools.com/php/php_ajax_rss_reader.asp) - 它运行良好，但我一直试图在生成的 HTML 中出现三个以上的项目。我已经浏览了所有的 PHP，但对于我的生活，我无法弄清楚如何让这个东西显示超过三个项目。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:05:14.753

```
for ($i=0; $i<=2; $i++) 
```

它应该通过在 php 代码内的该行增加 2 来工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:05:27.333

在 PHP 循环中它说

```
for ($i=0; $i<=2; $i++) 
```

这基本上意味着，**i**等于 0，并且只要**i**小于 2 就保持循环，并且在每个循环中添加一个。

所以它继续`0 -> 1 -> 2`......然后停止

只需插入您想要的号码:)

# emacs - 在 gdb-many-window 中设置断点没有视觉光标

> ID：10269537
> 
> 赞同：1
> 
> 时间：2012-04-22T16:01:34.057
> 
> 标签：emacs, gdb, cursor

我正在使用 emacs 单步执行程序集，但我有一个奇怪的问题。在gdb中，当我使用“break main”时，它给了我信息

> “0xDDDDDD 处的断点”

但没有视觉光标，当我查看断点列表时，我在“什么”列中看到消息“主”。但是当我使用

> “打破 main.asm:55”

我看到了视觉光标。

编译过程：

> nasm -g -f elf -l main.lst main.asm
> 
> gcc -g -m32 -o main main.o

我还尝试在 gdb 中使用“文件程序名称”。结果相同。我该如何解决这个问题，当我输入 break main 时我可以看到视觉光标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:39:50.473

我使用旧版本的 nasm 修复了它

```
>nasm --version
>NASM version 2.07 compiled on Nov  5 2009 
```

# twitter-bootstrap - 推特引导导航栏中的图像在移动设备中

> ID：10269542
> 
> 赞同：4
> 
> 时间：2012-04-22T16:01:43.533
> 
> 标签：twitter-bootstrap, navbar

如何在 Twitter Bootstrap 的导航栏中插入徽标图像？

主要要求：

图片需要放在左边。

品牌类要紧随其后。我尝试将品牌向右移动。可以看到图像，但在移动设备或小型浏览器窗口中，品牌类别位于图像之上。

最右边的下拉菜单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:54:30.250

只需将您的图像包装在 div 中并将`.brand`类也添加到其中，因此它应该看起来像这样：

```
<div class="brand"><img class="logo" src="http://placehold.it/50x50"></div>
<a href="#" class="brand">Project name</a> 
```

或者更好的是，如果您希望您的徽标可点击，只需将其插入`a`品牌链接中，如下所示：

```
<a href="#" class="brand"><img class="logo" src="http://placehold.it/50x50"> Project name</a> 
```

# xml - Pentaho - 它可以处理 XML 属性的操作吗？

> ID：10269544
> 
> 赞同：0
> 
> 时间：2012-04-22T16:01:58.013
> 
> 标签：xml, etl, pentaho, kettle

我正在考虑使用 Pentaho/Kettle 进行数据摄取。我已经遇到了问题，但我不确定这是工具的问题还是我缺乏知识。

我已经弄清楚如何创建转换并从 XML 文件中读取数据，这是我转换的第一部分。不幸的是，我的 XML 有点像这样：

```
<rootnode>
    <category someattribute="cool" rownum="7">
        <firstnode>some data</firstnode>
        <secondnode>more data</secondnode>
    </category>
    <category someattribute="cooler" rownum="8">
        <firstnode>some data II</firstnode>
        <secondnode>more data II</secondnode>
    </category>
</rootnode> 
```

我正在使用从 XML 步骤中输入/获取数据，虽然我可以让它正确显示所有类别和 firstnode/secondnode 值，但我什至找不到任何方法来查看属性 rownum 和 someattribute。

Kettle 是否能够处理 XML 属性并允许您在转换步骤中使用它们？如果是这样，如何或有人可以向我展示有关该主题的文档？（我找不到任何东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:57:21.177

只需将步骤设置为循环类别，然后单击获取字段。它会给你所有的属性和子节点。

一个技巧是将您的 xml 放入文件中，将 xml 输入步骤设置为从文件中读取，配置该步骤，然后恢复为从字段中读取 xml。

# c# - 使用 ReSharper 和 StyleCop 处理 this 关键字和左大括号

> ID：10269551
> 
> 赞同：2
> 
> 时间：2012-04-22T16:02:40.903
> 
> 标签：c#, visual-studio, resharper, stylecop

我希望有人可以在这里帮助我。在过去的几周里，我断断续续地打猎。这是让我烦恼的事情的两部分问题！

我不喜欢 this 关键字卡在一切前面。在我安装 Stylecop 之前，我记得 ReSharper 提出将这些作为冗余删除。使用 StyleCop，这不再发生。更糟糕的是，当我重新格式化或以其他方式摆弄代码时，this 关键字似乎自动出现在我没有要求它的地方。我已经尝试关闭 StyleCop 对此的检查并打开 ReSharpers。RS 不提供删除它。我得出的结论是，它一定与代码格式有关，但我找不到任何东西。

一个较小的烦恼是我更喜欢我的左大括号与它所引用的语句在同一行。它再次被分流。我想知道这是否在同一个区域，我只是没有看到树木的树林。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T08:44:21.150

您可以`this`通过更改 Resharper->Options->Languages->C#->Formatting Style->Other->Force "this" 让 resharper 忽略关键字。将实例成员限定为“请勿使用”。安装 Stylecop 始终将此设置重置为“始终使用”。

![在此处输入图像描述](../Images/f9a15a9ffde3ce64b925bd09b366aebb.png)

关于大括号，您可以在 Resharper->Options->Languages->C#->Formatting Style->Braces Layout 下更改它们并使用'At and of line (K&R style)'。

# oop - 我应该在什么级别进行检查？

> ID：10269558
> 
> 赞同：1
> 
> 时间：2012-04-22T16:03:28.847
> 
> 标签：oop

我设计了一个新类，它`boolean isCellEmpty()`在每个抽象级别都包含相同的功能。我的`Matrix`班级位于班级层次结构的底部。在上面我有`GraphMainWindow`课。

我应该在哪里进行检查（例如`if (i >= 0, i < xCellsCount, j >= 0`等等......）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:12:51.067

简单的答案是：尽可能地通用。声明这些变量的第一个可继承类应该执行检查。除非需要重写功能，否则低于该值的任何内容都应遵循超类。在您选择用于检查的继承层次结构更上一层的类中，处理检查的方法可能应该通知尚未实现覆盖版本的子类它们正在获得默认（并且可能无用）行为. 在这种情况下，我经常提出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:13:11.690

好问题，我自己也想了很多次。答：在最低层。这样，错误将永远不会被发现。您仍然可以在算法过程有意义的更高级别检查错误，但最低级别是最重要的。

这有一些例外。例如，如果错误是通过包含应用程序的消息报告的，并且您希望在最低级别发生许多错误。但这些并不常见，如果你觉得上面的规则打扰了你，你可以改变它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T16:18:15.040

所以简而言之，你有这个类图：

```
Matrix        ( a
   ^            ^
   |            |
  ...           b means : b inherits a)
   ^
   | 
```

图形主窗口

您有一个`isCellEmpty`在基类和每个继承的方法中都可以找到的方法。如果 `isCellEmpty`用于进行检查的数据的数据结构自上课以来没有改变`Matrix`，那么您可以在`Matrix`最通用的类​​中进行检查。

如果您更改数据结构，`Matrix`您应该在更改数据结构的类中实现测试。

问候

# mysql - 如何加快查询速度？

> ID：10269561
> 
> 赞同：0
> 
> 时间：2012-04-22T16:03:38.957
> 
> 标签：mysql, google-maps, database-design

我创建了一个表：

```
 CREATE TABLE IF NOT EXISTS `markersStorage2` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `name` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
      `surname` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
      `id_vk` int(10) NOT NULL,
      `activity_link` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
      `message` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
      `lat` float(10,6) NOT NULL,
      `lng` float(10,6) NOT NULL,
      `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
      `id_tile` varchar(15) COLLATE utf8_unicode_ci NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

我用它来按图块存储谷歌地图标记。

此表经常更新，我的意思是向其中添加了新标记

我经常使用这个查询：

```
 SELECT id, lat,lng FROM markersStorage2 WHERE id_tile LIKE '$tileNumber%' 
```

我怎样才能加快这个查询？也许我需要创建另一个表或重新组织这个表？

瓷砖的编号如下：

[http://msdn.microsoft.com/en-us/library/bb259689.aspx](http://msdn.microsoft.com/en-us/library/bb259689.aspx)

示例：我使用的是最大缩放 15，因此当我向数据库添加新标记时，服务器

确定该标记将位于哪个图块中，例如我们将像这样得到

```
 id_tile = 002013111032032 
```

所有标记的 id_tile 都包含 15 个数字。

稍后，当用户通过 ajax 请求查看地图图块时，但这些图块可以

处于不同的缩放级别，例如我们将收到此请求：

```
 SELECT id, lat,lng FROM markersStorage2 WHERE id_tile LIKE '002013111032%' 
```

所以使用这个请求我可以得到这个大图块中的所有标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T16:06:32.220

尝试以下操作：

```
ALTER TABLE  `markersstorage2` ADD INDEX (`id_tile` ) ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T16:11:48.667

您需要在 id_tile 字段上放置一个索引。

```
ALTER TABLE `markersstorage2`  ADD INDEX `id_tile` (`id_tile`); 
```

**您可以检查您的查询是否使用索引，如下所示：**

> 解释 SELECT id, lat,lng FROM markersStorage2 WHERE id_tile LIKE '3%'

**无索引**

> “id”；“select_type”；“table”；“type”；“possible_keys”；“key”；“key_len”；“ref”；“rows”；“额外”“1”；“SIMPLE”；“markersStorage2” ;"ALL";NULL;NULL;NULL;NULL;"7";"在哪里使用"

**带索引**

> “id”；“select_type”；“table”；“type”；“possible_keys”；“key”；“key_len”；“ref”；“rows”；“额外”“1”；“SIMPLE”；“markersStorage2” ;"范围";"id_tile";"id_tile";"47";NULL;"3";"在哪里使用"

# c# - ObjectContext 实例已被释放，不能再用于需要连接的操作。带有天蓝色错误的 WCF

> ID：10269570
> 
> 赞同：1
> 
> 时间：2012-04-22T16:04:47.473
> 
> 标签：c#, wcf, windows-phone-7, azure, objectcontext

**编辑：得到它的排序，表有没有被解决的外键。Stackoverflow 不会让我在这么接近问这个问题的时候发布答案**

我正在制作一个从 Windows Azure 上保存的数据库中获取信息的 Windows Phone 应用程序，我正在使用 WCF 连接来执行此操作。

但是当我调试并在本地调用该服务时，我收到以下错误：

> ObjectContext 实例已被释放，不能再用于需要连接的操作。

我正在使用从[http://mobile.dzone.com/news/how-use-wcf-services-access-0](http://mobile.dzone.com/news/how-use-wcf-services-access-0)（登录用户部分）改编的代码 该站点的代码工作正常，但是，就像我说的，我的导致该错误。

这是我的代码：

```
 public Product GetProduct(String Barcode)
    {
        string query = @"SELECT value Product FROM AzureDBEntities.Products AS Product WHERE Product.barcode = @Barcode";
        ObjectParameter parameter = new ObjectParameter("Barcode", Barcode);

        using (var context = new AzureDBEntities())
        {
            ObjectQuery<Product> results = context.CreateQuery<Product>(query, parameter);

            foreach (Product result in results)
            {
                if (result != null)
                {
                    return result;
                }
            }
        }
        return null;
    } 
```

任何想法我做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T22:23:30.503

通过它的 detach 方法将实体传递给您的 ObjectContext 的实例。这将破坏您的可导航集合，但您不必关闭延迟加载。

```
public Product GetProduct(String Barcode)
{
    string query = @"SELECT value Product FROM AzureDBEntities.Products AS Product WHERE Product.barcode = @Barcode";
    ObjectParameter parameter = new ObjectParameter("Barcode", Barcode);

    using (var context = new AzureDBEntities())
    {
        ObjectQuery<Product> results = context.CreateQuery<Product>(query, parameter);

        foreach (Product result in results)
        {
            if (result != null)
            {
                context.Detach(result);
                return result;
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:18:48.003

在对您的答案的评论中，您声明错误是由以下原因引起的：**WCFServiceWebRole1.dll!WCFServiceWebRole1.Product.Producer1.get()**

这表明某些东西正在尝试访问您的 Product 实体上的 Producer 属性（可能是由 WCF 序列化引起的）。您可以尝试在您的上下文中关闭延迟加载和代理创建吗？

```
using (var context = new MyEntities())
{
    context.ContextOptions.LazyLoadingEnabled = false;
    context.ContextOptions.ProxyCreationEnabled = false;
} 
```

# javascript - 浏览器之间表单事件不兼容，如何解决？

> ID：10269571
> 
> 赞同：0
> 
> 时间：2012-04-22T16:05:00.087
> 
> 标签：javascript, javascript-events

我在 html 页面上有一个 textarea，在 google chrome 上，我不知道是什么版本，因为用户界面被巧妙地隐藏了，但是在 chrome 上，onChange="code" 事件没有触发，但在 Firefox 11.0 1.0 上（根据帮助->关于）它正在射击。然后，我开始使用事件 onkeydown="same_function()"、onpaste="same_function()" 和 oninput="same_function()"，以确保至少捕获一个事件。但是现在的问题是我收到了太多事件，当我在收到 keydown 事件后检查 textarea 的 textarea_dom_object.value 时，按下的键不包含在我正在阅读的值中；如果我在文本字段中有“abc”并按“d”，则会生成一个按键，但我

是否有一种兼容的方式，或者至少有一种适用于大多数浏览器的方式，可以在每次 textarea 更改时获取一个事件，但最好只有一个事件？如果我必须首先测试我是否已经听过一个事件等等，我不喜欢我必须编写的那种丑陋的代码。我想要的只是每次文本区域中的文本更改时发生一个事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:42:10.600

这就是为什么 jQuery 如此神奇的原因。它理解在不支持新功能的浏览器之间优雅地降级代码的需要。JavaScript 本身并不能*单独*提供这种支持。通过增强 JavaScript 在使用 jQuery 时的核心功能，您*通常*会在跨浏览器支持方面取得更大的成功。

话虽如此...

在很多情况下，您需要确定您正在使用的设备/浏览器，以便您可以执行预期的操作。

要记住的最重要的事情是不存在 100% 交叉支持的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T18:04:09.540

你可以这样做。只要确保你给 textarea 一个 id 标签

```
$(document).ready(function(){
        $('.addtitle').keyup(function(event) {
            if(event.keyCode==13) { 

}
});
}); 
```

就我而言，我在 Enter 键上触发了该功能（如 facebooks 功能）。

编辑：另外，如果您在页面上有多个文本区域，您应该这样做：

```
$(document).ready(function(){
        $('textarea[name=mynamevalue]').keyup(function(event) {
            if(event.keyCode==13) { 

}
});
}); 
```

# android - 从共享菜单打开应用程序时获取文件位置

> ID：10269573
> 
> 赞同：0
> 
> 时间：2012-04-22T16:05:12.717
> 
> 标签：android

我使用以下代码在`audio files`共享菜单中注册我的应用程序：

```
<intent-filter>
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="audio/*" />
</intent-filter> 
```

如何在我的活动中获取文件名？

我测试了下面的代码，但没有工作：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout);

    Intent intent = getIntent();
    Bundle extras = intent.getExtras();
    String action = intent.getAction();

    String FilePath  = "";

    if (Intent.ACTION_SEND.equals(action)) {   
        if (extras.containsKey(Intent.EXTRA_STREAM)) {
            Uri uri = (Uri) extras.getParcelable(Intent.EXTRA_STREAM);
            FilePath = parseUriToFilename(uri);
        }
    }
}

public String parseUriToFilename(Uri uri) {
    String selectedFile = null;
    String filemanagerPath = uri.getPath();

    String[] projection = { MediaStore.Audio.Media.DATA};
    Cursor cursor = managedQuery(uri, projection, null, null, null);

    if (cursor != null) {
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
        cursor.moveToFirst();
        selectedFile = cursor.getString(column_index);
    }

    if (selectedFile != null) {
        return selectedFile;
    }
    else if (filemanagerPath != null) {
        return filemanagerPath;
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:43:21.830

> 如何在我的活动中获取文件名？

调用`getIntent()`以获取`Intent`启动您的活动的 ，然后调用`getData()`以`Intent`获取`Uri`要打开的内容的 。

# xmpp - 从 OpenFire 服务器获取用户列表

> ID：10269583
> 
> 赞同：0
> 
> 时间：2012-04-22T16:05:41.823
> 
> 标签：xmpp, openfire, strophe

我目前正在尝试制作一个基于 Strophe 的 javascript 脚本来获取 OpenFire 服务器中可用用户的列表（需要实时刷新）。我不在乎我是否必须创建一个组、房间或其他任何名称（无论如何，服务器将只为一小部分用户运行，每个人都相互连接），但我希望能够制作服务器给出这样的清单。我怎样才能做到这一点？我读过我需要使用 muc 扩展，但我似乎无法在任何地方找到它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T04:35:48.987

问题解决了！我必须将与我一起工作的用户添加到一个组中，并且每次用户离开或进入房间时，OpenFire 都会通知房间的其他用户，并且大多数情况下都会在 body 标签中包含一个存在节。这使得 Strophe 无法很好地识别那些存在节，因此我必须从 Strophe 连接中覆盖 xmlInput 函数，以获取我从服务器获得的每一个 xml 节。

```
conn.xmlInput = onXmlInput;
function onXmlInput(data) {
    Strophe.forEachChild(data, "presence", function(child) {
        var from = child.getAttribute('from');
        from = from.substring(0, from.indexOf('@'));
        //'type' will contain "unavailable" when offline and no attribute 'type' when online
        if (!child.hasAttribute('type')) {
            addUser(from);
        } else {                    
            deleteUser(from);
        }
    });
} 
```

# dialog - 在 CRM 2011 对话框中设置 OptionSet 的默认值

> ID：10269585
> 
> 赞同：1
> 
> 时间：2012-04-22T16:05:52.360
> 
> 标签：dialog, dynamics-crm-2011

我需要根据从对话框中的查询中提取的值填充 Prompt-Response 中 OptionSet 的默认值。但是，两种类型的 OptionSet 都禁用了默认值字段。

任何人都可以确认这是否是正确的行为，因为我想不出为什么您无法在运行时为 OptionSet 分配默认值？

这将意味着复制整个页面，因为我什至无法添加条件语句来有条件地使用不同的提示响应，除非有人可以提供更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:36:44.257

当您进行查询时，这意味着您将获得一组值，即使它是一个值。因此，您可以从 Query 中填充选项集，但不能设置默认值。

无论如何，默认值字段不适用于选项集，它用于文本、数字和日期时间响应。

我不太明白你的最后一个问题。您能否提供更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T13:12:02.997

很久没问这个问题了。

最简单的答案是您不能为选项集设置默认值。

然而，另一种解决方案而不是复制页面，在这种情况下可能很有用，它是使用两个查询的解决方法。

1.  在选项集的查询中声明您希望动态的类型的变量。
2.  将变量设置为一个值，该值将为您提供您正在寻找的默认选项集值。
3.  查询要与要使用的动态类型一起使用的数据。
4.  检查查询返回的记录数。
5.  如果记录数大于 0，则将变量的值设置为查询中使用的动态值
6.  再次查询相同的数据（！），这次使用变量而不是以前使用的动态值，并将这个用于选项集。

结果是：如果您从查询中获得命中，则命中将显示在选项集中。如果您没有点击，将显示“默认”值。

也不要认为有任何理由不能为选项集设置默认值。特别是因为如果用于选项集的查询没有返回命中，页面就会锁定。

干杯。/亨里克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T13:31:46.160

除此之外，我今天遇到了一种情况，我使用一些 fetchxml 在对话框中查询数据，现在想将该值存储在一个变量中，但似乎我不能并且只能使用它来显示选项集中的字段。

我很欣赏 xml 正在返回一条记录而不是一个字段，但必须离开我可以先返回或默认返回并将返回的值存储在一个变量中。

# linux - 通过 GStreamer 分割视频

> ID：10269586
> 
> 赞同：-1
> 
> 时间：2012-04-22T16:05:57.740
> 
> 标签：linux, video, gstreamer

```
gst-launch-0.10 v4l2src ! videorate ! x264enc ! avimux ! filesink location=result.avi 
```

执行命令后有视频“result.avi”。

我需要：“2012-04-22_15-30-00.avi”、“2012-04-22_15-31-00.avi”等。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:46:32.273

你可以

1.  暂停录制，重命名录制的文件，重新启动（会丢失一些帧）
2.  使用multifilesink（没有丢帧，但是像file_0001.avi、file_0002.avi 这样的简单命名模式，您需要发出信号来切换到新文件（例如eos 计时器））。

还有更多方法，但很快就会变得更加复杂。

# ios - UITableView 移动到单元格

> ID：10269587
> 
> 赞同：42
> 
> 时间：2012-04-22T16:06:00.827
> 
> 标签：ios, uitableview

我想做下一个：

我有一个必须显示单词（AZ）的 UITableView。

目前，当视图确实加载时，我显示了一个单元格（这是正确的）。第一个单元格显示我的数组单词中的第一个单词。

目的：我想移动到必须从我的数组中显示 10 个单词的单元格，但问题是 indexPath.row = 10 的单元格不存在（这是正确的，因为我还没有滚动）。

什么是从 1 到 10 单元转换的正确等待。

我想如果我不使用`dequeueReusableCellWithIdentifier`创建我的单元格，我可以这样做并解决我的问题，但我的意思是设备内存的这个问题。

换句话说我需要做`scrollToRowAtIndexPath`

谢谢！

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-22T17:39:29.587

您确定`scrollToRowAtIndexPath`方法是正确的。因此，您需要做的就是使用您希望移动到的行创建一个新的 IndexPath，例如，行索引 = 10：

```
[tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:10 inSection:indexPath.section] 
             atScrollPosition:UITableViewScrollPositionMiddle animated:NO]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-03T13:32:55.207

```
//For iOS 7 
[self.TableView reloadData];
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:1 inSection:1];
[TableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-14T14:57:17.493

可以识别需要使其可见的行（例如下面的 forRow）并重新加载该行。完成后，可以滚动到该行。

```
let moveToIndexPath = NSIndexPath(forRow: forRow, inSection: 0)
self.tableView.reloadRowsAtIndexPaths([moveToIndexPath], withRowAnimation: .None)
self.tableView.scrollToRowAtIndexPath(moveToIndexPath, atScrollPosition: atScrollPosition, animated: true) 
```

# ruby-on-rails - Rails 3项目中未定义的方法`find_by_login'

> ID：10269593
> 
> 赞同：0
> 
> 时间：2012-04-22T16:06:41.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, messaging

当我尝试在 Rails 3 项目中提交表单时出现以下错误。当一个用户使用 Simple Private Messaging 插件向另一个用户发送消息时使用该表单。

我现在设置网站的方式是，用户无需注册或登录即可发送消息。

**我得到的错误**

```
NoMethodError in MessagesController#create

undefined method `find_by_login' for #<Class:0x12a374238>

app/controllers/messages_controller.rb:33:in `create' 
```

**消息控制器**

```
def new
  @message = Message.new

  if params[:reply_to]
    @reply_to = @user.received_messages.find(params[:reply_to])
    unless @reply_to.nil?
      @message.to = @reply_to.sender.login
      @message.subject = "Re: #{@reply_to.subject}"
      @message.body = "\n\n*Original message*\n\n #{@reply_to.body}"
    end
  end
end

def create
  @message = Message.new(params[:message])
  @message.sender = @user
  @message.recipient = User.find_by_login(params[:message][:to])

  if @message.save
    flash[:notice] = "Message sent"
    redirect_to user_messages_path(@user)
  else
    render :action => :new
  end
end 
```

**消息>新视图（这是创建表单的地方）**

```
<%= form_for @message, :url => messages_path(:user_id => @user) do |f| %>
<br>
<br />
<br />
<div class="field">
Hello! My name is <%= f.text_field :subject %> and I'm contacting you in response to your ad. I'm interested in learning more so get in touch! Here's my contact details: <%= f.text_field :body %>.
</div>
<button type="submit" class="btn span6 large">Submit</button>
<% end %> 
```

**消息模型**

```
class Message < ActiveRecord::Base

is_private_message

attr_accessor :to

end 
```

**用户模型**

```
class User < ActiveRecord::Base

has_many :posts  
has_one :profile
has_private_messages

attr_accessible :email

validates_presence_of :email
validates_uniqueness_of :email, :message =>"Hmm, that email's already taken"
validates_format_of :email, :with => /^([^\s]+)((?:[-a-z0-9]\.)[a-z]{2,})$/i, :message => "Hi! Please use a valid email"

end 
```

**用户迁移**

```
class CreateUsers < ActiveRecord::Migration
def change
create_table :users do |t|
  t.string :email
  t.string :salt
  t.timestamps
end
end
end 
```

**通过登录查找用户的 RAILS 控制台输出**

```
>> u = User.first
User Load (1.0ms)  SELECT "users".* FROM "users" LIMIT 1
=> nil
>> u.login
NoMethodError: undefined method `login' for nil:NilClass
from /Library/Ruby/Gems/1.8/gems/activesupport-3.1.1/lib/active_support/whiny_nil.rb:48:in `method_missing'
from (irb):2
>> 
```

**路线.RB**

```
Mysalary::Application.routes.draw do

resources :users do
 resources :messages
   end

resources :profiles
resources :pages
resources :posts

get "pages/home"
get "pages/about"
get "pages/legal"
get "pages/feedback"

root :to => 'posts#new'

end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T18:06:12.960

`find_by_attribute`（`find_by_login`在您的情况下）是 Rails 添加的动态方法，如果您`login`在 DB 表中调用了一个列（`users`在您的情况下是表）。由于您的`users`表格不包含`login`列，因此您的`User`模型没有`login`属性，也没有`find_by_login`方法。

由于您有一`email`列，请尝试用此替换有问题的行

```
@message.recipient = User.find_by_email(params[:message][:to]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:16:21.777

如果您在控制台中尝试：

```
u = User.first
u.login 
```

你得到了什么？看起来您的用户模型中没有登录属性，您有一个电子邮件属性。所以，你需要`find_by_email`改用。

# django-models - Django ORM order_by

> ID：10269594
> 
> 赞同：1
> 
> 时间：2012-04-22T16:06:44.730
> 
> 标签：django-models, sql-order-by

我有两个模型，Task 和 TaskComment：

```
class Task(models.Model):
    title = models.CharField(max_length = 200)
    creationDate = models.DateTimeField('date created')
    lastUpdateDate = models.DateTimeField('date updated')
    description = models.CharField(max_length = 5000)

class TaskComment(models.Model):
    task = models.ForeignKey(Task, related_name='comments')
    message = models.CharField(max_length = 5000)
    creationDate = models.DateTimeField('date created') 
```

想象一个列出所有任务的页面。我想做的事情是按链接到该任务*的评论数量对任务进行排序。*我已经尝试了几个这样的：Task.objects.all().order_by("comments__count") 但它不起作用。

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:59:12.553

你需要[注解](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#aggregations-and-other-queryset-clauses)

```
from django.db.models import Count

Task.objects.all().annotate(num_comments=Count('taskcomment')).order_by('-num_comments') 
```

# php - 如何从存储在数组中的嵌套集合中获取完整路径？

> ID：10269602
> 
> 赞同：1
> 
> 时间：2012-04-22T16:08:00.350
> 
> 标签：php, arrays, nested, parent-child, traversal

假设我有以下数组：

```
Array
(
[0] => Array
    (
        [category_id] => 1
        [name] => foo
        [parent_id] => 0
    )

[1] => Array
    (
        [category_id] => 2
        [name] => bar
        [parent_id] => 1
    )

[2] => Array
    (
        [category_id] => 3
        [name] => baz
        [parent_id] => 0
    )

[3] => Array
    (
        [category_id] => 4
        [name] => test
        [parent_id] => 2
    )
[4] => Array
    (
        [category_id] => 5
        [name] => test2
        [parent_id] => 4
    ) 
```

)

我正在尝试获得以下输出：

```
foo
foo > bar
baz
foo > bar > test
foo > bar > test > test2 
```

我想我已经对我脑海中的伪代码进行了排序，但想不出我将如何将它实际变成代码：

```
$arr = array();
foreach($categories as $category) {    
    if ($category['parent_id'] > 0) {
        $x = find where $categories['category_id'] == $cat['parent_id'];
        $arr[] = $x['name'].' > '.$category['name'];
        // somehow repeat till parent id is 0
    } else {
        $arr[] = $category['name'];
    }
} 
```

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:48:22.067

这是我根据您的数组制作的函数：

```
function findParents($array, $parentId, $reset = true) {
  static $breadcrumbs;
  // reset path on every new lookup
  if ($reset == true) {
    $breadcrumbs = array();
  }

  foreach($array as $category) {
    if ($parentId == $category['category_id']) {
      // append the name of the category
      $breadcrumbs[] = $category['name'];

      // if a parent exists recursively call this function until no more parent is found
      if ($category['parent_id'] > 0) {
        findParents($array, $category['parent_id'], false);
      }
    }
  }
  // because the function goes the path from in to out, the array needs to be reversed
  return array_reverse($breadcrumbs);
} 
```

用法：

```
foreach($categories as $category) {
  // find all parents to the current category
  $parents = findParents($categories, $category['category_id']);

  echo implode(' > ', $parents);
  echo PHP_EOL;
} 
```

输出是：

```
foo
foo > bar
baz
foo > bar > test
foo > bar > test > test2 
```

# c# - 除了方法在linq中如何工作

> ID：10269610
> 
> 赞同：13
> 
> 时间：2012-04-22T16:09:34.053
> 
> 标签：c#, performance, linq, comparison, hashtable

我有课程：

```
class SomeClass
{
   public string Name{get;set;}
   public int SomeInt{get;set;}
}

class SomeComparison: IEqualityComparer<SomeClass>
{
     public bool Equals(SomeClass s, SomeClass d)
     {
         return s.Name == d.Name;
     }

     public int GetHashCode(SomeClass a)
     {
         return (a.Name.GetHashCode() * 251);
     }
} 
```

我也有两个大`List<SomeClass>`的叫`list1`和`list2`

在我以前有：

```
 var q = (from a in list1
         from b in list2
         where a.Name != b.Name
         select a).ToList(); 
```

这需要大约 1 分钟来执行。我现在有：

```
var q =  list1.Except(list2,new SomeComparison()).ToList(); 
```

这需要不到 1 秒的时间！

我想了解 except 方法的作用。该方法是否创建每个列表的哈希表，然后执行相同的比较？如果我要进行很多这样的比较，我应该创建一个 Hashtable 吗？

* * *

## 编辑

现在，我没有列表，而是`HashSet<SomeClass>`调用 `hashSet1`了两个`hashSet2`

当我做：

```
 var q = (from a in hashSet1
           form b in hashSet2
           where a.Name != b.Name
           select a).ToList(); 
```

这仍然需要很长时间......我做错了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-22T16:22:08.983

您的猜测很接近 - Linq to Objects `Except`扩展方法在`HashSet<T>`内部使用 a 传入的第二个序列 - 这允许它在迭代第一个序列以过滤掉第二个序列中包含的元素时查找 O(1) 中的元素，因此总体工作量为 O(n+m)，其中 n 和 m 是输入序列的长度 - 这是您希望做的最好的事情，因为您必须至少查看每个元素一次。

对于如何实现它的回顾，我推荐 Jon Skeet 的 EduLinq 系列，这里是它的部分实现和[完整章节](https://codeblog.jonskeet.uk/2010/12/30/reimplementing-linq-to-objects-part-17-except/)[`Except`](http://code.google.com/p/edulinq/source/browse/src/Edulinq/Except.cs?r=86eb20d48c0af5761448b065d90f95dcbda11b96)的链接：

```
private static IEnumerable<TSource> ExceptImpl<TSource>(
    IEnumerable<TSource> first,
    IEnumerable<TSource> second,
    IEqualityComparer<TSource> comparer)
{
    HashSet<TSource> bannedElements = new HashSet<TSource>(second, comparer);
    foreach (TSource item in first)
    {
        if (bannedElements.Add(item))
        {
            yield return item;
        }
    }
} 
```

另一方面，您的第一个实现会将第一个列表中的每个元素与第二个列表中的每个元素进行比较 - 它正在执行一个[叉积](http://en.wikipedia.org/wiki/Cross_product)。这将需要 n *m 次操作，因此它将在 O(n* m) 中运行 - 当 n 和 m 变大时，这将变得非常慢，非常快。（这个解决方案也是错误的，因为它会创建重复的元素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T16:35:13.817

这两个代码示例不会产生相同的结果。

您的旧代码创建两个列表的[笛卡尔积](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)。

这意味着它将`a`多次返回 list1 中的每个元素 - 对于`b`list2 中不等于的每个元素一次`a`。

对于“大”列表，这将需要很长时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T16:36:55.277

`from a in list1 from b in list2`创建`list1.Count * list2.Count`元素和不一样`list1.Except(list2)`！

如果`list1`有 elements`{ a, b, c, d }`和`list2`elements `{ a, b, c }`，那么您的第一个查询将产生以下对：

```
(a,a), (a,b), (a,c),  
(b,a), (b,b), (b,c),  
(c,a), (c,b), (c,c),  
(d,a), (d,b), (d,c)

```

因为您排除了相等的项目，结果将是

```
(a,a) , (a,b), (a,c),  
(b,a), (b,b) , (b,c),  
(c,a), (c,b), (c,c) ,  
(d,a), (d,b), (d,c)

```

因为你只选择了对的第一个元素，你会得到

`{ a, a, b, b, c, c, d, d, d }`

* * *

第二个查询将产生`{ a, b, c, d }`减号`{ a, b, c }`，即`{ d }`。

* * *

如果没有使用哈希表，则会导致`Exclude`执行 with 的嵌套循环。`O(m*n)`使用哈希表，查询大致执行`O(n)`（忽略填充哈希表的成本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T11:06:58.487

这就是我的想法。

```
IEnumerable<T> Except<T>(IEnumerable<T> a,IEnumerable<T> b)
{
    return a.Where(x => !b.Contains(x)).Distinct();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-16T00:14:58.630

在我看来这会更有效率

```
private static IEnumerable<TSource> ExceptImpl<TSource>(
    IEnumerable<TSource> first,
    IEnumerable<TSource> second,
    IEqualityComparer<TSource> comparer)
{
    HashSet<TSource> bannedElements = new HashSet<TSource>(second, comparer);
    foreach (TSource item in first)
    {
        if (!bannedElements.Contains(item))
        {
            yield return item;
        }
    }
} 
```

包含是 O(1)

Add 是如果 Count 小于内部数组的容量，这个方法是 O(1) 操作。如果必须调整 HashSet 对象的大小，则此方法变为 O(n) 操作，其中 n 是 Count。

# java - 如何查找 HTML 文件的大小和数据传输率

> ID：10269611
> 
> 赞同：1
> 
> 时间：2012-04-22T16:09:35.433
> 
> 标签：java, httpclient

我想查找没有 HTTP 标头和数据传输速率的 HTML 文件的大小。以下是我的代码；

```
import java.net.*;
import java.io.*;

public class HttpCon 
{
  public static void main ( String[] args ) throws IOException 
  {
    Socket s = null;

    try 
    {
        String host = "host1";
        String file = "file1";
        int port = 80;

        s = new Socket(host, port);

        OutputStream out = s.getOutputStream();
        PrintWriter outw = new PrintWriter(out, false);
        outw.print("GET " + file + " HTTP/1.1\r\n");
        outw.print("Host: " + host + ":" + port + "\r\n");
        outw.print("Accept: text/plain, text/html, text/*\r\n");
        outw.print("\r\n");
        outw.flush();           

        InputStream in = s.getInputStream();
        InputStreamReader inr = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(inr);
        String line;

        while ((line = br.readLine()) != null) 
        {
                System.out.println(line);
        }
        br.close();       

    } 

  }
} 
```

但我不知道如何做到这一点。是否有我可以查看的源代码或我可以应用的任何资源？

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:48:42.937

你所要求的应该不是什么大问题。阅读这些行，直到你读到一个空行——那是标题结束的地方。之后继续阅读并计算你读过的所有字符，这就是你的文件大小。至于传输率：

```
final long start = System.nanoTime();
long charsRead = 0;
... do the transfer, counting chars ...
System.out.println("Transfer rate: " + 
  (charsRead / (1e-6 * (System.nanoTime() - start)))); 
```

这里唯一的问题是您使用的是 a`BufferedReader`所以您计算的是字符而不是字节。如果您需要字节，那么您将需要使用原始数据`InputStream`，然后找到标题结束的位置会有点痛苦。您可以通过使用 not the `BufferedReader`but the来解决这个问题（可能） `InputStreamReader`，它不会预读任何内容。当您找到标头的结尾时，切换到原始`InputStream`以读取响应正文。

# android - Android - 不同尺寸布局的问题不起作用

> ID：10269612
> 
> 赞同：0
> 
> 时间：2012-04-22T16:09:41.750
> 
> 标签：android, layout, screen

我有一个常规的布局文件：`Res/layout/test.xml`

平板电脑的另一种布局：`Res/layout-large-land/test.xml`

此行在我的 Activity 中用于声明布局：`setContentView(R.layout.test);`

我正在使用客户分辨率为 1024x600 的 Eclipse AVD 模拟器（根据 android 网站，这是标准的 7 英寸平板电脑尺寸）。我在我的 Manifest`<supports-screens>`中用 normal 和 large 声明为“真实”。

我的问题是布局始终是原始布局，永远不会显示不同的、更大的布局（即使条件表明它应该显示？）。本质上的区别是常规布局是 ListView 而大景观是 Table。

我已经尝试找到如何在网上和教科书中获取此信息的示例，但我找不到任何可以显示其他操作的示例。根据我的阅读，Android 应该有意识地决定选择 layout-large-land 文件而不是常规布局文件？

在此先感谢您的帮助。

编辑：我一直在玩布局，我尝试过 layout-land（效果很好），并将模拟器的分辨率更改为 854x480，但仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:11:46.040

一个简单的解决方案可能对您有用:::

将 res/layout-large-land 更改为 res/layout-xhdpi。

# php - php mysql没有选择表

> ID：10269618
> 
> 赞同：0
> 
> 时间：2012-04-22T16:10:16.803
> 
> 标签：php, mysql, pdo

我有点困惑我有一个名为尝试的表，它检查用户失败的登录尝试，但它没有选择该表，但如果我选择另一个表它可以工作

这不起作用：

```
$test_q = $config->query("SELECT * FROM attempts");
print_r($test_q->fetch(PDO::FETCH_ASSOC)); 
```

这有效：

```
$test_q = $config->query("SELECT * FROM another_table");
print_r($test_q->fetch(PDO::FETCH_ASSOC)); 
```

为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:15:24.377

```
$test_q = $config->query("SELECT * FROM `attempts`");
print_r($test_q->fetch(PDO::FETCH_ASSOC)); 
```

因为尝试是一个 mysql 函数，如 left、right、min、max 等。

# iphone - Flurry 是否通过安装或用户 ID、iPhone 进行跟踪？

> ID：10269619
> 
> 赞同：1
> 
> 时间：2012-04-22T16:10:19.860
> 
> 标签：iphone, ios, flurry

我希望 Flurry 在安装的基础上进行跟踪，但它们也包含一个 userId 属性。我宁愿输入 loginIds，这样我就可以在日志中看到电子邮件地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T12:33:21.010

我们根据设备 ID 进行跟踪，设备 ID 是在第一个应用程序启动的基础上进行跟踪的。我们在第一次应用发布时跟踪新用户，并在第一次应用发布的基础上对他们进行跟踪。此外，我们将无法提供这些设备 ID。

谢谢

# php - Zend Framework PHP Unit：如何分派到不同的模块？

> ID：10269621
> 
> 赞同：0
> 
> 时间：2012-04-22T16:10:43.467
> 
> 标签：php, zend-framework, phpunit

我使用主机名路由将请求定向到适当的模块，因此 clients.xxx.com 路由到客户端模块。现在我正在尝试创建一些 phpunit 测试，但我不确定如何分派到正确的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:31:27.997

我通过在测试用例中将默认路由添加到路由器上来规避了这个问题。假设您想测试 foo 模块、索引控制器、索引操作。

```
/** 
 * @test
 */
public function indexAction()
{   
    $frontController = $this->getFrontController();
    $router = $frontController->getRouter();
    $router->addDefaultRoutes();

    $this->dispatch('foo/index/index');
} 
```

您可以在 setup 方法中添加默认路由以防止重复代码。

# php - 一起或单独加载远程项目？

> ID：10269624
> 
> 赞同：0
> 
> 时间：2012-04-22T16:10:48.397
> 
> 标签：php, ajax, api, optimization, call

我正在寻找优化我的应用程序。它使用 Twitter 和 Facebook API 并加载要在用户屏幕上显示的大文件。现在，我正在线性运行脚本，使用 AJAX 调用一个包含两个 API 调用的文件，并将所有信息加载到屏幕上。将两个 API 调用分成两个不同的文件，然后使用 AJAX 分别加载每个文件会更快吗？这样，如果一个响应比另一个响应时间更长，则仍然会显示更快的响应。

谢谢你。

如果重要的话，我使用 PHP 和 CURL 进行 API 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:18:09.107

当然，如果 AJAX 调用不相互依赖会更好。您也可以在 PHP 端使用`curl_multi_init`并行执行 HTTP 调用来执行此操作。

PHP手册中的示例：

```
<?php
// create both cURL resources
$ch1 = curl_init();
$ch2 = curl_init();

// set URL and other appropriate options
curl_setopt($ch1, CURLOPT_URL, "http://lxr.php.net/");
curl_setopt($ch1, CURLOPT_HEADER, 0);
curl_setopt($ch2, CURLOPT_URL, "http://www.php.net/");
curl_setopt($ch2, CURLOPT_HEADER, 0);

//create the multiple cURL handle
$mh = curl_multi_init();

//add the two handles
curl_multi_add_handle($mh,$ch1);
curl_multi_add_handle($mh,$ch2);

$active = null;
//execute the handles
do {
     $mrc = curl_multi_exec($mh, $active);
} while ($mrc == CURLM_CALL_MULTI_PERFORM);

while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        do {
            $mrc = curl_multi_exec($mh, $active);
        } while ($mrc == CURLM_CALL_MULTI_PERFORM);
    }
}

//close the handles
curl_multi_remove_handle($mh, $ch1);
curl_multi_remove_handle($mh, $ch2);
curl_multi_close($mh);

?> 
```

# javascript - KnockoutJs - 处理具有相同字段的多个区域

> ID：10269627
> 
> 赞同：0
> 
> 时间：2012-04-22T16:11:00.923
> 
> 标签：javascript, knockout.js

我有几个区域具有在服务器端生成的可重复内容。我使用 knockout-js 动态隐藏/显示区域内的区域。我的标记如下：

```
<div>
  <input type="checkbox"  data-bind="checked: a1" />
  <div data-bind="visible: a1">region0</div>
</div>
<div>
    <input type="checkbox" data-bind="checked: a2" />
    <div data-bind="visible: a2">region1</div>
</div>
<script>
    var viewModel = {
        a1: ko.observable(false),
        a2: ko.observable(false)
    };
    ko.applyBindings(viewModel);
</script> 
```

假设我有 10 个这样的区域。有没有更方便/更好的方法来实现同样的目标？可以说，我明确不想`foreach`在客户端上使用绑定和生成标记（以便站点可以通过禁用的 js 访问）。

有什么方法可以省略 viewModel 规范（`script`标签中的一部分），因为我觉得敲除可以为我检测和自动创建字段？

PS我是一个JS新手，所以请原谅我的简单问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:31:15.290

> 有什么方法可以省略 viewModel 规范（脚本标签中的一部分），因为我觉得敲除可以为我检测和自动创建字段？

虽然我个人更喜欢 Knockout，但您可能想看看[Angular](http://angularjs.org/)。[如本例](http://jsfiddle.net/mbest/encmW/)所示，Angular 会自动创建视图模型属性。

# php - 注册时生成个 人资料页面 - PHP

> ID：10269628
> 
> 赞同：-1
> 
> 时间：2012-04-22T16:11:01.560
> 
> 标签：php, profiles

> **可能重复：**
> [在 LAMP 配置中创建虚 URL](https://stackoverflow.com/questions/5877542/create-vanity-urls-in-a-lamp-configuration)

一旦用户注册，我希望他们选择的用户名用于生成任何人（不仅仅是用户）都可以查看的唯一个人资料页面。如果“bob”注册，他将在 website.com/bob 拥有个人资料

我看过类似的问题，说用.htaccess解决问题，但他们没有描述如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:25:48.607

您不需要在注册时*生成*唯一的个人资料页面。您可以简单地制作一个脚本`profile.php`，该脚本需要一个参数`user`来通过访问动态显示给定用户的配置文件`/profile.php?user=bob`。例子：

```
<?php
$u = $_GET['user'];
echo "<h2>Profile of ".htmlentities($u)."</h2>";
?> 
```

`website.com/user/bob`例如，当您想使用以下内容重写要指向的 url 时，.htaccess 就会发挥作用`website.com/profile.php?user=bob`。

```
RewriteEngine On
RewriteBase /

RewriteRule ^/user/([0-9a-zA-Z]*)$ /profile.php?user=$1 [NC,QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:37:05.683

Jimmy Sawczuck 指出了一个答案，但在这里解释一下：

在您的情况下，您想要实现的是使用 url 中的用户名访问个人资料页面。为每个用户创建 php 文件很麻烦，并且可能导致错误（可维护性也很糟糕）

您可以创建一个 profile.php 脚本，该脚本使用一个名为`username`. 所以你的链接将是

```
mysite.com/profile.php?username=bob 
```

但是，它不是您想要的网址。为了节省您的存在，网络服务器的 Rewrite Mod（mod_rewrite 用于 apache，搜索其他网络服务器的相应实用程序）

这个mod允许你重写你的url以匹配你想要的：

例如：webbrowser 中的 website.com/bob 为您的服务器重写 website.com/profile.php?username=bob。

这意味着您的用户可以拥有漂亮/小巧的 url，但网络服务器会更改它以调用想要的脚本。所以双方都很开心。

要进行这种重写，您需要使用具有重写规则的模块。如果您使用 apache，则使用 mod_rewrite 并将规则放入您的网站配置文件中，或者将 .htaccess 放入想要的目录中。

对于规则检查 Jimmy Sawczuck 给出的链接

问候

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-22T16:21:25.990

如果您使用 PHP，您可以将用户信息存储在数据库中，并使用 fopen('bob.php') 在您的目录中创建一个文件。然后让 bob.php 调用显示用户信息所需的任何函数。

您可能需要随机化用户 url，因为肯定会有重复。

我不相信 .htaccess 可以做到这一点。

# jquery - 在切换其可见性之前检查 DOM 元素的可见性是否值得？或者这是过早的优化？

> ID：10269629
> 
> 赞同：5
> 
> 时间：2012-04-22T16:11:14.910
> 
> 标签：jquery, optimization, visibility, premature-optimization

请考虑以下 jQuery 代码：

```
if ($(this).is(':hidden')) {
    $(this).show();
} 
```

我的问题：

*   在发出 show() 命令之前检查元素的可见性是否值得？
    *   即 DOM 写入是否比 DOM 读取更昂贵，这种模式是否包括小的性能优化？
*   或者是没有实用程序的可见性检查，简单地，无条件地发出 show() 命令会是更简洁的代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T16:13:28.800

如果你想显示它，我不会费心检查它是否隐藏 - 我只会显示它。我认为不进行条件检查会有一个小的性能优势，但我也相信它可能非常微不足道。

我创建了一个性能测试，它表明没有检查结果，执行速度提高了 25%。[您可以在http://jsperf.com/is-hidden-check](http://jsperf.com/is-hidden-check)在线查看（并在几个浏览器中对其进行测试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T16:27:01.777

除了为您提供极少的速度提升之外，它甚至可能并不总是按照您的意愿行事：

[**来源**：](http://api.jquery.com/hidden-selector/)

> :hidden 的确定方式在 jQuery 1.3.2 中发生了变化。如果一个元素或其任何父元素在文档中没有占用空间，则假定它是隐藏的。不考虑 CSS 可见性（因此 `$(elem).css('visibility','hidden').is(':hidden') == false`）。

检查可见性并不是非常复杂，但恕我直言，即使是这段摘录也表明它并非微不足道。虽然您可以在每次使用时确保可见性检查正常工作`:hidden`以确保此代码正常工作，但您可能会忘记可能有*机会*保存的 5 毫秒，而是为自己保存每次该区域可能出现问题时，花费时间来理解代码和检查文档。

**只需使用普通的 old`show()`** ; 如果有理由事先进行检查，我相信制作 jQuery 的好人会在文档中的某个地方提供这样做的建议，或者只是将检查硬编码到`show`方法中/:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T16:15:05.843

您的可见性检查可能会节省一些精力，因为如果它没有真正隐藏，它不会发出 .show() 。

所以我想去吧

# ruby - 多态性未实现的方法。人们通常会做什么？

> ID：10269634
> 
> 赞同：1
> 
> 时间：2012-04-22T16:11:44.353
> 
> 标签：ruby, oop, domain-driven-design, polymorphism

如果我有这样的模型：

```
class Media
  attr_reader :title, :created_at
end

class Video < Media
end

class Picture < Media
  attr_reader :image_url
end 
```

因此，在`Picture`类中有一个属性不应该存在于超类中。当您想要检索所有媒体时，人们通常会做什么？你想在方法上抛出异常`image_url`吗？或者你会如何重新建模？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:14:28.737

如果您对所有媒体都感兴趣，那么您不应该关心它是视频还是图片。换句话说，接受集合的`Media`方法不应该调用`Media`后代的任何方法。如果您需要所有图片，请使用`Picture`，不要过度概括。

如果您仍然需要在区分类型的同时处理所有媒体，则可以在类型上进行分支。

```
def process_media media
  media.each do |m|
    if m.is_a? Picture
      # work with picture
    elsif m.is_a? Video
      # work with video
    end
  end
end 
```

另一种方法是使用鸭子类型。也就是说，如果它有一个方法`image_url`，那么它一定是某种图片。

```
def process_media media
  media.each do |m|
    if m.respond_to? :image_url
      # work with picture
    elsif m.respond_to? :bitrate
      # work with video
    end
  end
end 
```

# javascript - 弹出加载窗口

> ID：10269636
> 
> 赞同：0
> 
> 时间：2012-04-22T16:11:45.560
> 
> 标签：javascript, ajax, popup, popupwindow

我想要一个弹出屏幕向用户显示我的应用程序的“这部分”或“那部分”正在加载......我的应用程序中的很多东西都是引用的内容，所以有时需要一秒钟才能加载......

我是 Ajax 新手（请原谅我），但我希望在 Ajax 或 JavaScript 中向用户显示一个弹出窗口，让用户知道当用户手指点击需要加载的内容时应用程序正在“加载” ....例如新屏幕上的内容....我希望我在这里有意义....我不知道要从哪里开始实现这一点（因为我不是代码战士，仍然有点绿色sry大声笑），所以任何帮助表示赞赏。到目前为止，我正在使用 JavaScript 和 HTML5，但我需要一个弹出加载窗口小部件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:23:48.080

您可能正在寻找与 colorbox.js (http://www.jacklmoore.com/colorbox) 类似的东西。更一般地说，您正在寻找的是一个模态对话框。模态对话框可以与更基本的对话框形成对比，这些对话框不会使屏幕的其余部分变灰。jQuery UI 包括这样一个对话框，你可以在这里看到：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

当然，这些不会给你开箱即用的加载效果。您必须编写代码来检查与您的应用程序相关的任何加载条件，然后关闭对话框。一种非常简单的方法是将 setTimeout 与成功处理程序关闭对话框的 ajax 调用结合使用。或者，如果您没有办法跟踪加载状态，您可以只使用一个简单的对话框来提示用户等待（但这对用户来说并不是特别好）。

# nosql - Neo4j（或任何其他图形数据库）建模

> ID：10269640
> 
> 赞同：6
> 
> 时间：2012-04-22T16:12:27.103
> 
> 标签：nosql, neo4j, graph-databases

我开始使用图形数据库，并且在我的团队中，我们已经开始为我们的软件建模图形。当我们尝试“记录”模型以查看数据库的结构时，问题就来了。使用 SQL 数据库，您只需查看 SQL 模式。

我们花了一些时间阅读 neo4j 的博客和文档，但我们已经看到，展示图形工作原理的常用方法是使用显示一些样本数据的最小图形（随机样本：[sample1](http://www.infoq.com/resource/articles/graph-nosql-neo4j/en/resources/1image7.jpg)、[sample2](http://blog.neo4j.org/2012/03/neo4j-17m01-bank.html)等）。这对于教育目的来说非常有用，但我们希望能够以更正式的方式进行。我们想设置什么样的节点可以与另一个节点关联，以及什么样的关系，那种东西。

使用 Spring，您可以使用类包装图形，但它非常特定于 Java 和 OO 模型，我们正在使用 Erlang。我们正在寻找某种形式语言（SQL Schema 等价物），或 ER 模型等价物，或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:03:00.717

一种方法是将图形（类型网络）的“元模型”也放入图形中，然后将实例（节点）连接到它们的元模型类型。因此，您可以使用图形可视化来可视化元模型，同时使用元模型来实施额外的约束（通过将约束信息存储在元模型中并在实际模型更新时使用），还可以使用元模型的 type-nodes 以快速访问此类型的所有“instance”-nodes。

您要建模的域是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:29:44.220

一个快速的想法——你能使用 UML 的一个子集吗？图建模似乎更接近领域，所以也许这是合理的。

我们所做的是对“示例数据”方法的概括，其中我们包括关系每一侧的基数，以及类型和方向。我还经常在图中包含一个节点“类型”（或其他一些关于它的角色/与域模型的关系的规范）而不是示例数据，当然还要注意预期的属性、它们的类型以及它们是否是可选的。它不那么正式，但到目前为止效果很好。

# javascript - 带有 jsf 组件的不显眼的 javascript ......怎么样？

> ID：10269641
> 
> 赞同：0
> 
> 时间：2012-04-22T16:12:33.453
> 
> 标签：javascript, jquery, jsf, jquery-events, unobtrusive-javascript

我的页面上有一些**jsf** ' **commandLinks** '。对于这些 commandLinks，有`onClick`事件。目前我已经将 onclick 函数直接编写为这些 commandLinks 的 onclick 属性。

由于它是一个 commandLink，它将创建 html 锚标记并附加一些 jsf JavaScript 以用于表单提交。当我直接在 onclick 属性中编写 JavaScript 时，jsf 会在插入自己的 JavaScript 时处理它。但是当我通过 jQuery 附加相同的事件处理程序时，它不会在执行事件处理程序之前识别并提交表单。

这个问题有什么合适的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:23:24.230

您需要让您的 jQuery 函数像 JSF 在幕后所做的一样：将`onclick`属性中指定的自定义 onclick 函数包装在另一个函数中，该函数根据自定义 onclick 函数的结果执行提交表单的标准 JSF 作业。

这是一个启动示例，假设所有这些链接元素都有一个类，`link`并且您的自定义 onclick 函数是`yourCustomFunction()`.

```
$(".link").each(function(i, element) {
    var originalJsfOnclick = element.onclick; // Grab the JSF-generated onclick function.
    element.onclick = null; // Reset it.

    $(element).click(function(event) {
        if (yourCustomFunction()) { // First call your function.
            originalJsfOnclick.call(element, event); // If it returns true, then execute the JSF-generated onclick.
        }
    });
});

function yourCustomFunction() {
    // ...
} 
```

# javascript - HTML - 单击链接时滚动到 div 的底部

> ID：10269643
> 
> 赞同：1
> 
> 时间：2012-04-22T16:12:37.993
> 
> 标签：javascript, html

我有一个 div，里面有很多内容，只有 div 垂直滚动。

我在 div 的底部有一些东西需要很容易到达。我无法将它移出 div。

有没有我可以使用的链接，或者一些 javasript，让它在点击链接时滚动到 div 的底部？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:15:15.387

为此，您不需要任何 JavaScript。HTML 内置了执行此操作的方法。您可以使用[名称锚点](http://freepages.computers.rootsweb.ancestry.com/~pasher/anchors.htm)跳转到页面的某些部分，而无需重新加载文档。

```
<div>
    <p>
        Lots of content
    </p>
    <a href="#importantplace">click this link to get to the bottom of the div</a>
    <p>
        Lots of content
    </p>
    <p id="importantpplace">
        Important content
    </p>
</div> 
```

# javascript - 单击父元素时获取子元素的ID

> ID：10269646
> 
> 赞同：2
> 
> 时间：2012-04-22T16:13:00.057
> 
> 标签：javascript, jquery-ui, jquery-selectors, jquery

您好，我看过类似的帖子，但没有人回答我想要完成的事情我在这里做了一个示例 [http://jsfiddle.net/edgardo400/R6rVJ/](http://jsfiddle.net/edgardo400/R6rVJ/)

我基本上想要的是，当在父项中发生单击时，您会获取子项的 id 并将其存储在一个变量中，这样我就可以将变量 currentID 传递给下面的代码，否则我将不得不为每个 id 复制此代码 9 次盒子 1 到盒子 9

```
 jQuery(currentID).delegate("a", "hover", function(event){

        var $img = jQuery(this).parent("li").find('img');
        var image = jQuery(this).attr('data-img');
         jQuery('.defaultimg').stop(true, true).fadeOut();
        if( event.type === 'mouseenter' ) {

            if($img.length){
                $img.show();

            }else{
                jQuery(this).parent("li").append('<img id="theImg" src="' + image + '" />');
            }

        }else{
            if($img){
              $img.hide();  
            }
             jQuery('.defaultimg').stop(true, true).fadeIn();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T17:06:48.013

```
$('#boxes').on('click', function(e) {
    var currentID = e.target.id;
    console.log(currentID);

......rest of code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:17:59.273

如果您只想让您的代码工作并在您的控制台上显示框名称，您可能应该设置

```
jQuery('#boxes').bind('click', function(event) {

     var currentID = jQuery(event.srcElement).attr('id');

     /* rest of your code */
}); 
```

你可能想做一些更简单的事情

```
jQuery('#boxes').children().bind('click', function() {

   jQuery(this).delegate... 

}); 
```

虽然我不确定你为什么要这样做......

修复[http://jsfiddle.net/nxTDA/](http://jsfiddle.net/nxTDA/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T11:44:26.900

在javascript中它将是：

```
var a = document.getElementById('#boxes');
a.onclick = function(e){
    console.log(e.target.id);
} 
```

# javascript - javascript defineProperty 使属性不可枚举

> ID：10269652
> 
> 赞同：8
> 
> 时间：2012-04-22T16:13:14.500
> 
> 标签：javascript, object, constructor, ecmascript-5, defineproperty

我正在尝试使用 defineProperty 使属性不出现在 for...in 循环中，但它不起作用。这段代码正确吗？

```
function Item() {
    this.enumerable = "enum";
    this.nonEnum = "noEnum";
}
Object.defineProperty(Item, "nonEnum", { enumerable: false });

var test = new Item();

for (var tmp in test){
    console.log(tmp);
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-22T16:21:14.477

`Item`没有名为的属性`nonEnum`（[检查一下](http://jsfiddle.net/WMTbQ/1/)）。它是一个（构造函数）函数，它将创建一个具有名为 的属性的对象`nonEnum`。

所以这个会起作用：

```
var test = new Item();
Object.defineProperty(test, "nonEnum", { enumerable: false }); 
```

你也可以这样写这个函数：

```
function Item() {
    this.enumerable = "enum";
    Object.defineProperty(this, "nonEnum", { 
        enumerable: false, 
        value: 'noEnum' 
    });
} 
```

[jsFiddle 演示](http://jsfiddle.net/WMTbQ/2/)

# java - 如何使用 bfs 和 java 中的路由表在图中绘制最安全的路线

> ID：10269654
> 
> 赞同：1
> 
> 时间：2012-04-22T16:13:22.110
> 
> 标签：java, algorithm, search, path, routes

我有一个包含资源级别的节点图，它们可以是正数和负数，原则是一只瓢虫或某些物体从每个节点获得生命或被节点伤害。

我设法用队列结构实现了 BFS：-

给定一个没有节点资源的图

```
 a---b---e
  |       |
  c---d   f 
```

路由表是：-

```
node    parent
===============
a       null
b       a
c       a
d       c
e       b
f       e 
```

所以路线是使用父节点绘制的，假设（a）是起始节点，（f）是出口节点，最快的路线是从底部 feba

我已经在java代码中解决了这个问题，问题是你如何使用这个方法，每个节点都有可以杀死你或给你生命的资源。

所以说一些节点有-20而其他节点给+10

鉴于我使用的队列结构，我不确定如何确定路线。

有没有人有任何想法？

我不一定需要Java代码，但是任何东西都会有所帮助，我真的对解决方案的理论以及可以使用的数据结构等感兴趣......

我的想法是

```
child  parent  resource
=======================
a       b       20+
b       a       10-
c       b       5+ 
```

问题是我不确定如何存储不同的路线，这个表只存储一条路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:37:00.913

当所有边长都不相同时，BFS 并没有真正用于寻找最短路径。我建议使用[Bellman Ford 算法](http://en.wikipedia.org/wiki/Bellman-Ford_algorithm)。与 Dijkstra 算法一样，它用于计算给定图的最短路径。但是，与 Dijkstra 的算法不同，它允许您对并非所有边长都是正数的图进行操作（看起来您会提出问题）。

这是一个解释它的[视频（通过 OpenCourseWare）。](http://www.youtube.com/watch?v=Ttezuzs39nk)

# android - 我们如何在 Android 中使用布局，如 HTML 的 div？

> ID：10269659
> 
> 赞同：2
> 
> 时间：2012-04-22T16:14:01.627
> 
> 标签：android

我想使用布局，就像我们在 HTML 中使用 div 一样，即屏幕中的 2 个 div 将导航栏与内容分开。我们可以通过使用布局来做到这一点，如果是，那么我们怎么能做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:15:47.740

是的，这可以在 android 中使用 android 样式。您可以为类似的小部件属性定义样式，如颜色、填充、背景、文本大小等。一旦有了样式，您就可以在 xml 布局文件中定义小部件（TextView、EditText 等）时应用这些样式。有关样式的更多详细信息，请访问以下链接。 [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

# php - 如何阻止资源出现在 curl_exec 结果中

> ID：10269670
> 
> 赞同：1
> 
> 时间：2012-04-22T16:15:57.423
> 
> 标签：php

您好我正在尝试使用此脚本从我网站上的另一个 php 脚本返回一个值而不离开页面，但我在字符串后面得到数字 1（我假设 1 是资源编号）这是剧本：

```
<?php
 // create a new cURL resource
 $ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
curl_setopt($ch, CURLOPT_HEADER, false);

// grab URL and pass it to the browser
$result = curl_exec($ch);

// close cURL resource, and free up system resources
 curl_close($ch);

echo $result;
 ?>

Output is somthing like this: 
"<?php include \\\\localfolder\\blabla\script.php ?>1" 
```

最后的 1 是我不想出现的。

谢谢，

罗伯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T16:17:50.283

您需要将`CURLOPT_RETURNTRANSFER`选项设置为 true：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

从[文档](http://php.net/curl_setopt)中：

> **`CURLOPT_RETURNTRANSFER`**
> `TRUE`将传输作为返回值的字符串返回，`curl_exec()`而不是直接输出。

# spring - 无法在服务中自动装配 DAO

> ID：10269680
> 
> 赞同：0
> 
> 时间：2012-04-22T16:16:46.977
> 
> 标签：spring, autowired

我在我的应用程序的服务中自动装配 DAO 时遇到问题。

我的控制器：（Autowires PurchaseService 正确）

```
package com.app.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.app.common.web.RestPreconditions;
import com.app.model.Purchase;
import com.app.service.IPurchaseService;

@Controller
public class PurchaseController {

    @Autowired
    private IPurchaseService purchaseService;

    @RequestMapping(value = "purchase", method = RequestMethod.GET)
    @ResponseBody
    public final String getAll() {
        return "HELLO";
    }
} 
```

我的购买服务：

```
package com.app.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.app.model.Purchase;
import com.app.persistence.dao.PurchaseDAO;

@Service
public class PurchaseService implements IPurchaseService {

    @Autowired
    private PurchaseDAO purchaseDAO;    

    @Transactional
    public List<Purchase> getAll()
    {       
        return purchaseDAO.findAll();
    }
} 
```

我的购买DAO：

```
package com.app.persistence.dao;

import org.springframework.stereotype.Repository;

import com.app.model.Purchase;
import com.app.persistence.AbstractJpaDAO;

@Repository
public class PurchaseDAO extends AbstractJpaDAO<Purchase> implements IPurchaseDAO {

    public PurchaseDAO() {
        setClazz(Purchase.class);
    }

} 
```

摘要JpaDAO：

```
package com.app.persistence;

import java.io.Serializable;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

public abstract class AbstractJpaDAO<T extends Serializable> {

    private Class<T> clazz;

    @PersistenceContext
    EntityManager entityManager;

    public void setClazz(final Class<T> clazzToSet) {
        this.clazz = clazzToSet;
    }

    public T findOne(final Long id) {
        return entityManager.find(clazz, id);
    }

    public List<T> findAll() {
        return entityManager.createQuery("from " + clazz.getName())
                .getResultList();
    }
} 
```

购买型号：

```
package com.app.model;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class Purchase implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 6603477834338392140L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "ID")
    private Long id;

    @Column(name = "PAN")
    private Long pan;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public Long getPan() {
        return pan;
    }

    public void setPan(Long pan) {
        this.pan = pan;
    }

} 
```

错误：

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.service.IPurchaseService com.app.controller.PurchaseController.purchaseService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.PurchaseDAO com.app.service.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.service.IPurchaseService com.app.controller.PurchaseController.purchaseService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.PurchaseDAO com.app.service.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 23 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.PurchaseDAO com.app.service.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 25 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.PurchaseDAO com.app.service.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 36 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 38 more
Apr 22, 2012 5:01:38 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.service.IPurchaseService com.app.controller.PurchaseController.purchaseService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.PurchaseDAO com.app.service.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.service.IPurchaseService com.app.controller.PurchaseController.purchaseService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.PurchaseDAO com.app.service.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 23 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.PurchaseDAO com.app.service.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 25 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.app.persistence.dao.PurchaseDAO com.app.service.PurchaseService.purchaseDAO; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 36 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.app.persistence.dao.PurchaseDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 38 more 
```

任何想法为什么我的 PurchaseDAO 没有被自动装配？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:34:21.063

尝试注入接口类型：

```
@Autowired
private IPurchaseDAO purchaseDAO; 
```

或者启用 CGLIB 类代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T16:21:01.617

如果您使用 SQL-Maps (ibatis)，还请检查您的 XML 配置 (！)，确保您已将新的 sql-map 文件输入到主 sql-map 文件中，并确保您在给定的文件中相应地注册您的类XML 配置

# mysql - 提供者未返回 ProviderManifestToken 字符串错误

> ID：10269682
> 
> 赞同：19
> 
> 时间：2012-04-22T16:17:12.490
> 
> 标签：mysql, asp.net-mvc-3, entity-framework, dbcontext

我正在尝试使用 ASP.Net MVC3、Entity Framework 和 MySQL 创建一个 Web 应用程序。

我已将以下代码添加到我的 Web.Config 文件中。

```
<connectionStrings>
    <add name="ContactContext" connectionString="server=localhost;database=contacts;uid=root;pwd=password;" providerName="MySql.Data.MySqlClient"/>

  </connectionStrings> 
```

我还在项目“Contact_Me”中创建了“Person”模型、“ContactContext”。当我尝试创建一个包含人员模型和联系人上下文的“ContactController”时，它给了我以下错误

> “无法检索“Connect_Me.Models.Persons”的元数据。提供者未返回 ProviderManifestToken 字符串”

[MYSQ & MVC3 SQL 连接错误 \ProviderManifestToken 但我使用的是 MySQL](https://stackoverflow.com/questions/7015722/mysq-mvc3-sql-connection-error-providermanifesttoken-but-i-am-using-mysql)，这是最接近我的问题。但是答案并没有解决我的问题。

提前致谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-29T19:10:46.607

我知道这对你们中的一些人来说可能是非常基本的，但是在 EF 无法找到要使用的连接字符串的情况下也会引发此异常。如果您在多层应用程序中工作，请确保将连接字符串添加到您的客户端应用程序，而不是包含您的数据访问代码的类库。只是我的2美分。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-19T08:00:40.710

当我的 sql 服务器实际关闭时，我收到了这个错误。因此，请确保您的 sql 服务器已启动并正在运行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-27T01:49:14.373

[`MySql.Data.Entity`](https://www.nuget.org/packages/MySql.Data.Entity/)如果在使用(latest version is `6.10.X`)*和* [`MySql.Data`](https://www.nuget.org/packages/MySql.Data/)(latest version is )的 EntityFramework 项目中升级 Nuget 引用，也可能会出现此错误`8.0.X`。这些版本号应该匹配。您应该使用8.0 及之后版本的包，以及[`MySql.Data.EntityFramework`](https://www.nuget.org/packages/MySql.Data.EntityFramework/)6.10及之前版本的包。`MySql.Data``MySql.Data.Entity`

此博客文章中有更多详细信息：[https ://davidsekar.com/asp-net/mysql-error-the-provider-did-not-return-a-providermanifesttoken](https://davidsekar.com/asp-net/mysql-error-the-provider-did-not-return-a-providermanifesttoken)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T23:12:17.843

问题出在 MySQL 连接器/网络上。

我以前使用 MySQL 连接器/Net 6.3.5，在我卸载它并安装 MySQL 连接器/Net 6.5.4 后，问题得到了解决。[您可以在http://www.mysql.com/products/connector/](http://www.mysql.com/products/connector/)找到最新的连接器

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-04T14:39:33.613

有时也会因为 sslmode 出现这个问题，对我来说，解决方案是将 sslmode=None 添加到连接字符串

我不得不对我的连接字符串从

```
<add name="Connection" connectionString="Server=SOMEHOST;Database=DB;Uid=USR1;Pwd=PASS1;" providerName="MySql.Data.MySqlClient" /> 
```

到

```
<add name="Connection" connectionString="Server=SOMEHOST;Database=DB;Uid=USR1;Pwd=PASS1;sslmode=None;" providerName="MySql.Data.MySqlClient" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T17:06:44.190

可能是您的连接字符串中的错误。您是否尝试使用上述登录方式连接到您的数据库实例。尝试更改连接字符串

```
connectionString="Data Source=.;Initial Catalog=contacts;Integrated Security=True uid=root;pwd=password;" providerName="MySql.Data.MySqlClient"/> 
```

如果您使用的是 sql server，请使用上面，否则如果您使用的是 sql express，请使用下面的一个

```
 connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=contacts;Integrated Security=True uid=root;pwd=password;" providerName="MySql.Data.MySqlClient"/> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-18T22:44:19.173

即使已经回答了这个问题，但我也遇到了同样的问题，如果它出现在连接字符串中；当我真的不应该使用它时，我拥有了“集成安全”部分；我依赖于数据库身份验证。

我删除了“Integrated Security=True”部分，它工作得很好:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-14T15:30:59.040

重新启动计算机对我有用。

在显示此消息时，我没有发现我的计算机 [Windows 10] 和测试服务器之间存在任何差异，其中应用程序以相同的配置部署并且在那里正常工作并使用相同的数据库。这意味着问题可能未连接到测试服务器上运行的数据库。

值得一提的是，在重新启动时有一些 Windows 更新挂起。

# c - 内核的“container_of”——有什么方法可以使它符合 ISO 标准？

> ID：10269685
> 
> 赞同：18
> 
> 时间：2012-04-22T16:17:24.667
> 
> 标签：c, linux-kernel, linked-list, c99, standards-compliance

在查看 Linux 内核对双向循环列表的实现时，我发现了以下宏：

```
#define container_of(ptr, type, member) ({           \
const typeof( ((type *)0)->member ) *__mptr = (ptr); \
(type *)( (char *)__mptr - offsetof(type,member) );}) 
```

它的工作方式是它返回指向结构的指针，该结构仅给出其成员之一的地址：

```
struct blabla
{
    int value;
    struct list_head *list;
} 
```

因此，仅给出指向列表的指针，您就可以获得指向 blabla 的指针（并获得“值”）。对于我的问题，我将如何使其尽可能便携（符合 C89/C99 的最佳情况？）。由于使用了 typeof()，这只是 gcc。

这是我到目前为止所得到的：

```
#define container_of(ptr, type, member) (                  \
                (type *) (char *)(ptr)-offsetof(type,member)\
                ) 
```

这个片段是否符合 ISO 标准（因此应该能够在任何符合标准的编译器上编译）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-22T16:28:10.003

正如 Ouah 评论的那样，`({ ... })`语句表达式是 GNU 扩展；你将无法使用它。您的核心表达式接近所需内容，但没有足够的括号：

```
#define container_of(ptr, type, member) \
                      ((type *) ((char *)(ptr) - offsetof(type, member))) 
```

这对我来说看起来很干净。对于 SO，它只分布在两条线上。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-22T16:48:23.640

宏的编写方式与执行类型检查的方式相同`ptr`。`__typeof__`如果编译器与 gcc 不兼容，则可以使用复合文字而不是语句表达式并回退到简单的指针检查而不是使用：

```
#ifdef __GNUC__
#define member_type(type, member) __typeof__ (((type *)0)->member)
#else
#define member_type(type, member) const void
#endif

#define container_of(ptr, type, member) ((type *)( \
    (char *)(member_type(type, member) *){ ptr } - offsetof(type, member))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T02:12:35.540

带类型检查的 ISO C90 兼容版本。（但是，**警告：**对 ! 的两个评估`ptr`）

```
#define container_of(ptr, type, member) \
   ((type *) ((char *) (ptr) - offsetof(type, member) + \
              (&((type *) 0)->member == (ptr)) * 0))

struct container {
  int dummy;
  int memb;
};

#include <stddef.h>
#include <stdio.h>

int main()
{
  struct container c;
  int *p = &c.memb;
  double *q = (double *) p;
  struct container *pc = container_of(p, struct container, memb);
  struct container *qc = container_of(q, struct container, memb);
  return 0;
} 
```

测试：

```
$ gcc -Wall containerof.c
containerof.c: In function ‘main’:
containerof.c:20:26: warning: comparison of distinct pointer types lacks a cast
containerof.c:20:21: warning: unused variable ‘qc’
containerof.c:19:21: warning: unused variable ‘pc’ 
```

我们收到`distinct pointer types`26 的警告，但不是 25。这是我们对指针被滥用的诊断。

我首先尝试将类型检查放在逗号运算符的左侧，gcc 抱怨没有效果，这很麻烦。但是通过使其成为操作数，我们确保它被使用。

ISO C 没有很好地定义这个`&((type *) 0)->member`技巧，但它被广泛用于定义`offsetof`. 如果你的编译器使用这个空指针技巧`offsetof`，它几乎肯定会在你自己的宏中表现自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-11T19:22:59.197

是的，您可以使“container_of”宏严格符合 ISO C。为此，您需要两件事：

1.  摆脱 GNU 扩展；

2.  找到一种检查类型兼容性的方法。

基本上，类型检查不是运行时操作，而是编译时。而且我没有看到任何原因，为什么原始的“container_of”实现创建新变量只是为了分配它并执行类型检查。无需在某些表达式中创建新变量即可完成此操作，该表达式仅在编译时计算（并检查类型）。幸运的是，我们在 C 中没有太多选择，唯一的选择是使用“sizeof(expression)”来检查类型。看一个例子：

```
#define container_of(ptr, type, member) \
    ( (void)sizeof(0 ? (ptr) : &((type *)0)->member), \
      (type *)((char*)(ptr) - offsetof(type, member)) ) 
```

在第一行检查类型兼容性（三元运算符编译器必须确保类型可能转换为通用类型，或者两种类型兼容）。第二行与原始“container_of”宏相同。

您可以在 GodBolt ( [https://godbolt.org/z/MncvzWfYn](https://godbolt.org/z/MncvzWfYn) ) 上使用测试程序，并确保这个符合 ISO 标准的变体即使在 Microsoft 的 Visual Studio 编译器中也能正常工作。

# objective-c - Objective-C 中静态类型的性能优势

> ID：10269686
> 
> 赞同：0
> 
> 时间：2012-04-22T16:17:27.083
> 
> 标签：objective-c

在 Objective-C 中使用静态类型有什么性能优势吗？它只是为了安全检查而存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:27:28.073

是的，它仅用于安全检查。

Objective-C 消息（方法调用）总是在运行时动态分派。添加额外的静态类型信息将帮助编译器警告您错误，但（在大多数情况下）对生成的代码没有影响。请参阅[http://en.wikipedia.org/wiki/Objective-C#Dynamic_typing](http://en.wikipedia.org/wiki/Objective-C#Dynamic_typing)

# mysql - 跨6个表查询，有没有更好的方法呢？

> ID：10269693
> 
> 赞同：1
> 
> 时间：2012-04-22T16:18:32.347
> 
> 标签：mysql, sql

我所做的是，我希望每个用户都有自己的“唯一”编号系统。我没有将项目编号自动增加 1，而是让 Bob 的第一个项目从 #1 开始，而 Alice 的编号也从 #1 开始。房间和类别也是如此。我通过为项目、房间和类别创建“映射”表来实现这一点。

下面的查询有效，但我知道它绝对可以重构。我在每个表中都有主键（在“ids”上）。

```
SELECT unique_item_id as item_id, item_name, category_name, item_value, room_name
                FROM
                    users_items, users_map_item, users_room, users_map_room, users_category, users_map_category
                WHERE
                    users_items.id = users_map_item.map_item_id AND 
                    item_location = users_map_room.unique_room_id AND 
                    users_map_room.map_room_id = users_room.room_id AND 
                    users_map_room.map_user_id = 1 AND 
                    item_category = users_map_category.unique_category_id AND 
                    users_map_category.map_category_id = users_category.category_id AND 
                    users_category.user_id = users_map_category.map_user_id AND 
                    users_map_category.map_user_id = 1
                ORDER BY item_name 
```

users_items

```
|  id  |  item_name  |  item_location  |item_category  |
--------------------------------------------------------
|   1  |   item_a    |        1        |      1        |
|   2  |   item_b    |        2        |      1        |
|   3  |   item_c    |        1        |      1        | 
```

users_map_item

```
|  map_item_id  |  map_user_id  |  unique_item_id  |
----------------------------------------------------
|       1       |       1       |          1       |
|       2       |       1       |          2       |
|       3       |       2       |          1       | 
```

users_rooms

```
|  id  |  room_name  |
----------------------
|   1  |   basement  |
|   2  |   kitchen   |
|   3  |   attic     | 
```

users_map_room

```
|  map_room_id  |  map_user_id  |  unique_room_id  |
----------------------------------------------------
|       1       |       1       |          1       |
|       2       |       1       |          2       |
|       3       |       2       |          1       | 
```

用户类别

```
|  id  |  room_name  |
----------------------
|   1  |   antiques  |
|   2  |   appliance |
|   3  |   sporting goods | 
```

users_map_category

```
|  map_room_id  |  map_user_id  |  unique_category_id  |
----------------------------------------------------
|       1       |       1       |          1       |
|       2       |       1       |          2       |
|       3       |       2       |          1       | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:52:14.663

使用显式 JOIN 条件重写查询使其更具可读性（同时执行相同操作）。

```
SELECT mi.unique_item_id AS item_id
     , i.item_name
     , c.category_name
     , i.item_value
     , r.room_name
FROM   users_map_item     mi
JOIN   users_items        i  ON i.id = mi.map_item_id
JOIN   users_map_room     mr ON mr.unique_room_id = i.item_location
JOIN   users_room         r  ON r.room_id = mr.map_room_id
JOIN   users_map_category mc ON mc.unique_category_id = i.item_category
JOIN   users_category     c  ON (c.user_id, c.category_id)
                              = (mc.map_user_id, mc.map_category_id)
WHERE  mr.map_user_id = 1
AND    mc.map_user_id = 1
ORDER  BY i.item_name 
```

结果不变。查询计划应该是一样的。我认为没有办法进一步改进查询。

如果要在结果中保留在右侧表中找不到匹配行的行，则应使用`LEFT [OUTER] JOIN`而不是。`[INNER] JOIN`在这种情况下，您可能希望将附加`WHERE`子句移至`JOIN`条件，因为它会改变结果。

# c - 试图对 Hermite 多项式进行强力求根

> ID：10269699
> 
> 赞同：2
> 
> 时间：2012-04-22T16:19:48.377
> 
> 标签：c, math, runtime

我有一个程序应该使用牛顿法找到第 ** 次埃尔米特多项式的根，但运行该程序需要很长时间。我对 C 很陌生，所以我不知道我的错误在哪里，或者这是否只是暴力破解这个问题的本质。我也遇到了获取准确根的问题，但到目前为止，很难找到那个错误，因为我只能每 5-10 分钟运行一次测试用例

**代码已删除**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:10:36.067

我 100% 确定 Newton-Raphson 没有充分的理由花这么多时间。在某些情况下，它可能会出现问题，因为这种方法不能保证收敛。但在您的具体情况下 - 应该没有问题。

一件很清楚的事情是你**过度**使用递归。仅用 n=37计算你`hermite`的递归是一个复杂的递归，它有点像 37 个斐波那契数的总和，大约是**40 百万**。

现在，认为您的`newton`方法应该重复调用`hermite`以及`h_deriv`（具有相同数量级的递归），直到 in 收敛到`10^-12`. 听起来像几十次互动。

而且，这还不够，您还可以`newton` **递归**地实现！世界上真的没有理由这样做。（lisp/scheme 是你的第一门编程语言吗？）

这是您应该做的以提高性能：

1.  修复你的`hermite`. 您应该计算 37 个**系数**，这可以递归完成。一旦完成 - 您应该使用它们在正常时间内计算多项式的值。

2.  导数也一样。只需计算 36 个系数。

3.  可选择修复您的`newton`. 据我所知 - 你不会获得太多的性能：你的“递归”是一个尴尬的循环。但是它看起来会更好，并且消耗更少的堆栈。

**编辑**：

阅读评论后，我花时间尝试构建和运行它。而且，我必须承认，我低估了问题的复杂性。

事实证明，由递归关系计算的系数增长迅速，并且舍入误差似乎占主导地位。因此，通过蛮力解决这个问题具有不可避免的影响，并且使用预先计算的系数（并将它们按直接顺序求和）产生相同的结果并不明显。

尽管如此，还是有一种方法可以在不改变计算逻辑的情况下摆脱荒谬的递归：

```
const int N = 37;

double g_pHermiteValues[N+1];

void CalcHermiteAt(double x)
{
    double x2 = x*2;

    g_pHermiteValues[0] = 1.;
    g_pHermiteValues[1] = x2;

    for (int n = 2; n <= N; n++)
        g_pHermiteValues[n] =
            g_pHermiteValues[n - 1] * x2 - 
            g_pHermiteValues[n - 2] * 2*(n - 1);
}

double CalcHermiteDerivAt()
{
    return g_pHermiteValues[N - 1] * 2*N;
}

double newton(double x_0)
{
    const double tolerance = 1E-12;

    while (true)
    {
        CalcHermiteAt(x_0);

        if (abs(g_pHermiteValues[N]) < tolerance)
            return x_0;

        x_0 -= g_pHermiteValues[N] / CalcHermiteDerivAt();
    }
} 
```

也就是说，我们使用相同的递归关系。只是为了计算 Hermite 多项式在给定点的值，我们对直到 n=37 的所有多项式进行**迭代**计算，并将结果存储在全局数组中。然后它的顶部元素保存所需的结果，并且导数也从末尾的第二个数组元素推导出来。

因为在 Newton-Raphson 算法的每一步中，我们都需要在同一点上的值和导数——这是有效的。

PS但是到目前为止，我无法找到解决方案。Newton-Raphson 对于我试图开始的点并没有收敛。

我相信对于这样的问题，可以使用更稳健的方法，例如中值搜索。

# python - 不区分大小写的列表排序，不小写结果？

> ID：10269701
> 
> 赞同：176
> 
> 时间：2012-04-22T16:20:06.570
> 
> 标签：python, string, list, sorting, case-insensitive

我有一个这样的字符串列表：

```
['Aden', 'abel'] 
```

我想对项目进行排序，不区分大小写。所以我想得到：

```
['abel', 'Aden'] 
```

但我得到相反的`sorted()`or `list.sort()`，因为大写出现在小写之前。

我怎么能忽略这个案子？我见过涉及小写所有列表项的解决方案，但我不想更改列表项的大小写。

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-04-22T16:36:40.730

在 Python 3.3+ 中有[`str.casefold`](https://docs.python.org/3/library/stdtypes.html#str.casefold)专门为无大小写匹配设计的方法：

```
sorted_list = sorted(unsorted_list, key=str.casefold) 
```

在 Python 2 中使用`lower()`：

```
sorted_list = sorted(unsorted_list, key=lambda s: s.lower()) 
```

它适用于普通字符串和 unicode 字符串，因为它们都有一个`lower`方法。

In Python 2 it works for a mix of normal and unicode strings, since values of the two types can be compared with each other. Python 3 doesn't work like that, though: you can't compare a byte string and a unicode string, so in Python 3 you should do the sane thing and only sort lists of one type of string.

```
>>> lst = ['Aden', u'abe1']
>>> sorted(lst)
['Aden', u'abe1']
>>> sorted(lst, key=lambda s: s.lower())
[u'abe1', 'Aden'] 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-04-22T16:21:03.737

```
>>> x = ['Aden', 'abel']
>>> sorted(x, key=str.lower) # Or unicode.lower if all items are unicode
['abel', 'Aden'] 
```

在 Python 3`str`中是 unicode，但在 Python 2 中，您可以使用这种更通用的方法，它适用于`str`和`unicode`：

```
>>> sorted(x, key=lambda s: s.lower())
['abel', 'Aden'] 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-22T16:40:30.763

You can also try this to sort the list in-place:

```
>>> x = ['Aden', 'abel']
>>> x.sort(key=lambda y: y.lower())
>>> x
['abel', 'Aden'] 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-08-06T22:13:35.493

This works in Python 3 and does not involves lowercasing the result (!).

```
values.sort(key=str.lower) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-30T14:17:03.070

In python3 you can use

```
list1.sort(key=lambda x: x.lower()) #Case In-sensitive             
list1.sort() #Case Sensitive 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-18T12:29:13.997

I did it this way for Python 3.3:

```
 def sortCaseIns(lst):
    lst2 = [[x for x in range(0, 2)] for y in range(0, len(lst))]
    for i in range(0, len(lst)):
        lst2[i][0] = lst[i].lower()
        lst2[i][1] = lst[i]
    lst2.sort()
    for i in range(0, len(lst)):
        lst[i] = lst2[i][1] 
```

Then you just can call this function:

```
sortCaseIns(yourListToSort) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-09T01:45:38.613

Case-insensitive sort, sorting the string *in place*, in Python 2 OR 3 (tested in Python 2.7.17 and Python 3.6.9):

```
>>> x = ["aa", "A", "bb", "B", "cc", "C"]
>>> x.sort()
>>> x
['A', 'B', 'C', 'aa', 'bb', 'cc']
>>> x.sort(key=str.lower)           # <===== there it is!
>>> x
['A', 'aa', 'B', 'bb', 'C', 'cc'] 
```

The key is `key=str.lower`. Here's what those commands look like with just the commands, for easy copy-pasting so you can test them:

```
x = ["aa", "A", "bb", "B", "cc", "C"]
x.sort()
x
x.sort(key=str.lower)
x 
```

Note that if your strings are unicode strings, however (like `u'some string'`), then in Python 2 only (NOT in Python 3 in this case) the above `x.sort(key=str.lower)` command will fail and output the following error:

```
TypeError: descriptor 'lower' requires a 'str' object but received a 'unicode' 
```

If you get this error, then either upgrade to Python 3 where they handle unicode sorting, or convert your unicode strings to ASCII strings first, using a list comprehension, like this:

```
# for Python2, ensure all elements are ASCII (NOT unicode) strings first
x = [str(element) for element in x]  
# for Python2, this sort will only work on ASCII (NOT unicode) strings
x.sort(key=str.lower) 
```

## References:

1.  [https://docs.python.org/3/library/stdtypes.html#list.sort](https://docs.python.org/3/library/stdtypes.html#list.sort)
2.  [Convert a Unicode string to a string in Python (containing extra symbols)](https://stackoverflow.com/questions/1207457/convert-a-unicode-string-to-a-string-in-python-containing-extra-symbols/13073070#13073070)
3.  [https://www.programiz.com/python-programming/list-comprehension](https://www.programiz.com/python-programming/list-comprehension)

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-01-23T05:56:49.760

Try this

```
def cSort(inlist, minisort=True):
    sortlist = []
    newlist = []
    sortdict = {}
    for entry in inlist:
        try:
            lentry = entry.lower()
        except AttributeError:
            sortlist.append(lentry)
        else:
            try:
                sortdict[lentry].append(entry)
            except KeyError:
                sortdict[lentry] = [entry]
                sortlist.append(lentry)

    sortlist.sort()
    for entry in sortlist:
        try:
            thislist = sortdict[entry]
            if minisort: thislist.sort()
            newlist = newlist + thislist
        except KeyError:
            newlist.append(entry)
    return newlist 
```

* * *

```
lst = ['Aden', 'abel']
print cSort(lst) 
```

Output

`['abel', 'Aden']`

# jsf - 将动态添加的值附加到 jsf 支持 bean 属性

> ID：10269703
> 
> 赞同：0
> 
> 时间：2012-04-22T16:20:13.273
> 
> 标签：jsf

我有一个 jsf 页面，其中有一个选择弹出窗口。用户可以从此弹出窗口中选择成员，然后单击“添加”。之后，选定的成员将显示在主页上。这个弹出窗口是通过javascript打开和关闭的，在这个过程中页面不会刷新。

现在的问题是**我怎样才能把这些选定的成员带到 backing bean**？我可以将它们直接附加到支持 bean 属性吗？

# javascript - knockout.js 库中 exportProperty 函数的用途是什么？

> ID：10269707
> 
> 赞同：3
> 
> 时间：2012-04-22T16:20:50.333
> 
> 标签：javascript, knockout.js

我正在阅读 knockout.js 库源代码，我看到了诸如函数调用之类的内容

```
ko.exportProperty(this, 'subscribe', this.subscribe);
ko.exportProperty(this, 'extend', this.extend);
ko.exportProperty(this, 'getSubscriptionsCount', this.getSubscriptionsCount); 
```

你可以[在这里查看源代码](https://github.com/SteveSanderson/knockout/blob/master/src/subscribables/subscribable.js)

定义`exportProperty`是

```
ko.exportProperty = function(owner, publicName, object) {
  owner[publicName] = object;
}; 
```

源代码在[这里](https://github.com/SteveSanderson/knockout/blob/master/src/google-closure-compiler-utils.js)。

我试图了解它的作用。但是我理解 exportProperty 的使用并没有改变或破坏对象上的任何东西，当我看到向上的用法时。

你能解释一下 exportProperty 函数叫什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:55:29.760

缩小的文件是通过 Google 的 Closure Compiler 创建的，它可以进行一些非常激进的缩小。这些`ko.exportProperty`调用确保该属性将包含在最小化输出中，并且其全名具有相同的名称。导出的调用可视为“公共 API”。

# c# - 在单独的类中使用 SQLCommand 时使用参数化的 sql 查询

> ID：10269710
> 
> 赞同：1
> 
> 时间：2012-04-22T16:21:08.300
> 
> 标签：c#, asp.net, sql-injection, code-reuse

我很有趣在我的 ASP.net 应用程序中添加参数化 sql 查询。我看过一些关于避免 SQL 注入的好文章。

```
string sql = string.Format("INSERT INTO [UserData] (Username, Password, Role, Membership, DateOfReg) VALUES (@Username, @Password, @Role, @Membership, @DateOfReg)");
        SqlCommand cmd = new SqlCommand(sql, conn);
        try
        {
        cmd.Parameters.AddWithValue("Username", usernameTB.Text);
        cmd.Parameters.AddWithValue("Password", passwordTB.Text);
        cmd.Parameters.AddWithValue("Role", roleTB.Text);
        cmd.Parameters.AddWithValue("Membership", membershipTB.Text);
        cmd.Parameters.AddWithValue("DateOfReg", dorTB.Text);

        conn.Open();
        cmd.ExecuteNonQuery();
        conn.Close(); 
```

[找到参考](https://stackoverflow.com/a/8427099/596770)

但是这种方式对我没有用，因为我将数据库连接耦合到单独的类，因为我已经重用了它。

```
public class DBconnection{     
    public int insertQuery(String query) {

            int affectedRowCount = 0;
            SqlConnection conn = null;
            try{

                conn = new SqlConnection("Server=localhost;Database=master;UID=sa;PWD=sa;");
                SqlCommand cmd = new SqlCommand( query, conn );
                cmd.CommandType = CommandType.Text;

                conn.Open(  );
                affectedRowCount = cmd.ExecuteNonQuery(  );
                conn.Close(  );         

            } catch ( Exception e ){

                       String error = e.Message;

            }

            return affectedRowCount;
    }
} 
```

因此我只使用下面的代码部分来调用上面的类并将值插入数据库。

```
 String SQLQuery1 = insert into Article values('" + Txtname.Text + "','" + TxtNo.Text + "','" + Txtdescription.Text + "' ,0)");
DBconnection dbConn = new DBconnection();
        SqlDataReader Dr = dbConn.insertQuery(SQLQuery1); 
```

请帮助我使用 Parameterize sqlString 来避免我的 Sql 注入。要使用 @name 、 @No 和 @description 而不使用文本框输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:43:36.857

您编写特定的 InsertQuery 方法而不是通用的 InsertQuery() 方法怎么样？

例如：

```
public void AddNewUser(User u)
{
   var query = "insert Users (name, password) values (@0, @1)";
   SqlCommand cmd = new SqlCommand(query, conn);
        try
        {
        cmd.Parameters.AddWithValue("@0", u.UserName);
        cmd.Parameters.AddWithValue("@1", u.Password);
        }
} 
```

这样做的好处是您的所有 SQL 逻辑都在这个其他类中，而不是调用类需要知道如何构造查询等。

它还使您的代码更具可读性，因为您将`AddUser`or视为方法调用`UpdateUser`，`ChangePassword`而不必在那一刻阅读 SQL 来尝试猜测程序中发生了什么。

**但是**，如果您要做这样的事情，您应该查看一些 MicroORM，我个人最喜欢的是[PetaPoco](http://www.toptensoftware.com/petapoco/)（或[NuGet 版本](http://nuget.org/packages/PetaPoco)）

PetaPoco 和 Massive 和 Dapper 等其他工具可以让您执行以下操作：

```
database.Insert(u); 
```

其中 u 是映射到数据库表的用户对象。它使用 ADO.NET 并确保使用 SQL 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:28:36.103

这样做是完全合理的，但是让你的类回调（lambda/delegate）来获取参数。这是一个类中的静态方法，由各种重载的实例方法调用：

```
private static int SqlExec(string ConnectionString, string StoredProcName, Action<SqlCommand> AddParameters, Action<SqlCommand> PostExec)
        {
            int ret;
            using (var cn = new SqlConnection(ConnectionString))
            using (var cmd = new SqlCommand(StoredProcName, cn))
            {
                cn.Open();
                cmd.CommandType = CommandType.StoredProcedure;

                if (AddParameters != null)
                {
                    AddParameters(cmd);
                }

                ret = cmd.ExecuteNonQuery();

                if (PostExec != null)
                {
                    PostExec(cmd);
                }
            }
            return ret;
        } 
```

然后，一个使用示例：

```
 public void Save()
    {
        Data.Connect().Exec("Project_Update", Cm =>
        {
            Cm.Parameters.AddWithValue("@ProjectID", ID);
            Cm.Parameters.AddWithValue("@PrimaryApplicantID", PrimaryApplicant.IdOrDBNull());
            Cm.Parameters.AddWithValue("@SecondaryApplicantID", SecondaryApplicant.IdOrDBNull());
            Cm.Parameters.AddWithValue("@ProjectName", ProjectName.ToDBValue());
        });
    } 
```

也可以通过非存储过程调用来做到这一点。

在您的情况下，它看起来像：

```
DBconnection.InsertQuery(
    "INSERT INTO [UserData]
        (Username, Password, Role, Membership, DateOfReg)
        VALUES (@Username, @Password, @Role, @Membership, @DateOfReg)"
    ,cmd => {
                cmd.Parameters.AddWithValue("Username", usernameTB.Text);
                cmd.Parameters.AddWithValue("Password", passwordTB.Text);
                cmd.Parameters.AddWithValue("Role", roleTB.Text);
                cmd.Parameters.AddWithValue("Membership", membershipTB.Text);
                cmd.Parameters.AddWithValue("DateOfReg", dorTB.Text);
            }
); 
```

它可以按照您想要的方式将所有数据库内容放在一起，并让 DBconnection 保持其内部隔离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T16:47:51.283

我建议使用 LINQ to SQL，它会[自动对所有内容进行参数化](http://goo.gl/P7m03)。

> 问：如何保护 LINQ to SQL 免受 SQL 注入攻击？
> 
> A. SQL 注入对于通过连接用户输入形成的传统 SQL 查询来说是一个重大风险。LINQ to SQL 通过在查询中使用 SqlParameter 来避免这种注入。用户输入转化为参数值。这种方法可以防止使用来自客户输入的恶意命令。

您可以使用 a 以直接的方式[插入、更新和删除](http://goo.gl/rBfV8)`DataContext`SQL 数据库（右键单击您的项目以添加新项目并添加`LINQ to SQL Classes`模板，然后使用服务器资源管理器向其中添加对象）。

我有一段时间没有使用这个了，但我相信你的代码看起来有点像这样：

```
UserData user = new UserData();

user.Username = ...;
user.Password = ...;
user.Role = ...;
user.Membership = ...;
user.DateOfReg = ...;

db.UserDatas.InsertOnSubmit(user);
db.SubmitChanges(); 
```

> 当您调用 SubmitChanges 时，LINQ to SQL 会自动生成并执行将您的更改传输回数据库所必须的 SQL 命令。

**编辑1：**

作为补充说明，要从数据库中检索现有项目，您可以这样做：

```
var user = (from i in db.UserDatas
            where i.UserName == "devan"
            select i).Single(); 
```

哦，正如我在使用登录信息回答有关数据库的问题时的标准策略一样，我必须恳求您，看在上帝的爱和所有神圣的事物上，对[您的用户密码进行加盐和哈希](http://goo.gl/NyucS)处理。

# iphone - 尝试删除单元格和部分时 UITableView 崩溃

> ID：10269714
> 
> 赞同：4
> 
> 时间：2012-04-22T16:21:19.950
> 
> 标签：iphone, xcode, uitableview, crash

我一直在努力创建一个 UITableView，它的内容是从 NSUserDefaults 对象加载的。但是，每当我尝试删除单元格/部分时，程序就会崩溃并吐出以下内容：

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1912.3/UITableView.m:1030
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of sections.  The number of sections contained in the table view after the update (2) must be equal to the number of sections contained in the table view before the update (3), plus or minus the number of sections inserted or deleted (0 inserted, 0 deleted). 
```

无论我读了多少关于这个错误并尝试修复它，过去几个小时我都被困在这里。这是我在用户点击“删除”按钮时调用的方法：

```
 (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //[[[NSUserDefaults standardUserDefaults] objectForKey:@"rawArray"] removeObjectAtIndex:indexPath.row];
        //[[[NSUserDefaults standardUserDefaults] objectForKey:@"rawDates"] removeObjectAtIndex:indexPath.row];

        NSMutableArray *rawArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"rawArray"];
        NSMutableArray *rawDates = [[NSUserDefaults standardUserDefaults] objectForKey:@"rawDates"];

        [rawArray removeObjectAtIndex:indexPath.row];
        [rawDates removeObjectAtIndex:indexPath.row];

        [[NSUserDefaults standardUserDefaults] setObject:rawArray forKey:@"rawArray"];
        [[NSUserDefaults standardUserDefaults] setObject:rawDates forKey:@"rawDates"];

        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
        [tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationRight];

    }    
} 
```

以下是用于确定行数和单元格数的方法：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return [[[NSUserDefaults standardUserDefaults] arrayForKey:@"rawDates"] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{

    return [[[NSUserDefaults standardUserDefaults] arrayForKey:@"rawDates"] objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 1;
} 
```

那里的最后一个方法返回一个，因为到目前为止，我计划每个部分只有一个单元格。感谢您花时间看这里，我真的希望您能帮助我！：/

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T16:33:01.567

查看[行和节的批量插入、删除和重新加载](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/ManageInsertDeleteRow/ManageInsertDeleteRow.html#//apple_ref/doc/uid/TP40007451-CH10-SW9)

基本上你需要调用这些方法

```
- (void)insertSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;
- (void)deleteSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;
- (void)reloadSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation;

- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation: (UITableViewRowAnimation)animation;
- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation: (UITableViewRowAnimation)animation;
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation; 
```

之间

```
- (void)beginUpdates;
- (void)endUpdates; 
```

例如

```
[tableView beginUpdates];
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
[tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationRight];
[tableView endUpdates]; 
```

您的 dataSource 还需要在调用 endUpdates 时反映更改

* * *

就我个人而言，我喜欢创建一个类别来围绕它提供一个基于块的包装器

1.  别让我忘记打电话`endUpdates`
2.  它允许缩进看起来正确/自动

分类在`UITableView`

```
@interface UITableView (PSAdditions)

- (void)ps_updates:(void (^)(void))updateBlock;

@end

@implementation UITableView (PSAdditions)

- (void)ps_updates:(void (^)(void))updateBlock;
{
    [self beginUpdates];
    if (updateBlock) { updateBlock(); }
    [self endUpdates];
} 
```

看起来像这样

```
[tableView ps_updates:^{
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
    [tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationRight];
}]; 
```

# c# - 如何使用 MVVM 捕获对 DataContext 对象属性的修改？

> ID：10269717
> 
> 赞同：0
> 
> 时间：2012-04-22T16:21:32.357
> 
> 标签：c#, wpf, binding, mvvm, .net-4.0

我有一个分配给它的 DataContext 的 WPF 页面。在此页面上，它有几个文本框。每个文本框都绑定到来自 DataContext 的父对象的属性。例如，DataContext 上有一个 Location 对象。Location 对象具有“Name”和“Address1”等属性。

文本框控件绑定如下：

```
<Binding Path="Location.Name" Mode="TwoWay"> 
```

我有一个“提交”按钮，只有在所有数据都有效后才会启用。这依赖于设置属性后对该过程的评估。如果这不是 Location 的子属性，我可以轻松地这样做：

```
public Location Location
{
    get { return _location; }
    set
    {
        _location = value;
        OnPropertyChanged("Location");
        OnPropertyChanged("IsCommitEnabled");
    }
} 
```

但由于从未真正设置 Location 对象，而是 Location 对象的“Name”属性，因此该事件永远不会触发。当我的 Location 对象的属性被修改/设置时，有没有办法触发我的“OnPropertyChanged("IsCommitEnabled")”方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:50:21.670

我猜你的按钮有一个 Click 处理程序，它的 Enabled 属性绑定到 IsCommitEnabled。除了您负责更新启用状态之外，这很好 - 这是您表达的问题。
另一种方法是将 Click 处理程序和 Enabled 绑定替换为与 Command 的绑定。您可以将命令实现为 RoutedCommand 并将 CanExecuteRoutedEventArgs.CanExecute 设置为 IsCommitEnable，或者您可以提供 ICommand 的实现，其中 ICommand.CanExecute 将检查 IsCommitEnabled。
在这两种情况下**，框架都会在轮询 CanExecute 方法后进行处理 - 因此您不必在属性更改时进行 proptry 更新**。

路由命令示例：

```
<Window.CommandBindings>
    <CommandBinding
        Command="{x:Static p:Window1.StartButtonCommand}"
        Executed="buttonStart_Executed"
        CanExecute="CommandBinding_StartButtonEnabled" />
</Window.CommandBindings> 
```

```
public static RoutedCommand StartButtonCommand = new RoutedCommand();
private void CommandBinding_StartButtonEnabled(object sender, CanExecuteRoutedEventArgs e) {
    e.CanExecute = ....;
} 
```

# apache - 仅针对共享托管站点中的一个站点的 SSL 的 htacces 重写规则

> ID：10269720
> 
> 赞同：0
> 
> 时间：2012-04-22T16:22:04.010
> 
> 标签：apache, .htaccess, rewrite

我在 Godaddy 有 2 个带有共享 Linux 托管的站点，一个是根目录，另一个位于根目录的子目录中。让我们称它们为站点 A 和站点 B，站点 B 位于站点 A 的子目录中。一切正常。

我刚刚为 Site-A 安装了一个 SSL 证书，它可以工作。我想对站点 A 上的所有流量使用 https，并在我的根级别 .htaccess 文件中实现了以下内容：

```
 RewriteEngine On
   RewriteCond %{HTTPS} off
   RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

这在站点 A 上效果很好。但是，它会导致站点 B 收到无效的证书错误/警告。所以，我在我的 .htaccess 中禁用了它，目前没有重定向任何东西。

我的问题是 - 我如何创建 rewriteCond 以便仅选择站点 A？与此相关，测试此类项目的最佳实践是什么，因为我的测试环境中没有证书。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:38:25.167

我能够解决：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/Site-A/?
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

# java - 在 jsf 的表单错误上重新加载某个 jQuery 代码

> ID：10269724
> 
> 赞同：0
> 
> 时间：2012-04-22T16:22:25.820
> 
> 标签：java, javascript, jquery, jsf, error-handling

我有一个 jQuery 代码，它使面板幻灯片供用户输入数据

我有错误消息将在发生错误的情况下显示在面板中，事情是当用户按下提交按钮时面板消失，为了看到错误消息，他必须再次按下显示面板按钮，

当用户再次按下按钮时，面板会正确显示错误，但必须由用户再次完成。

我试图让面板在发生错误时自动重新出现，我该怎么做？

我正在使用 JSF 2.0 和 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T18:34:33.570

如果涉及 ajax，请将此代码添加到您的 js 代码中

```
$(window).load(function() {

    jsf.ajax.addOnEvent(function (data) {
        if (data.status === "success") {
            //your code to show the panel with errors goes here
        }
    });

}); 
```

# php - json输出数组php

> ID：10269725
> 
> 赞同：0
> 
> 时间：2012-04-22T16:22:35.537
> 
> 标签：php, arrays, json

我有这段代码：

```
Tipo_Id = mysql_real_escape_string($_REQUEST["tipo"]);

        $Sql = "SELECT DISTINCT(tabveiculos.Marca_Id), tabmarcas.Marca_Nome
                FROM tabmarcas, tabveiculos
                WHERE tabmarcas.Tipo_Id = '$Tipo_Id'
                AND tabmarcas.Marca_Id = tabveiculos.Marca_Id
                ORDER BY tabmarcas.Marca_Nome Asc";
        $Query = mysql_query($Sql,$Conn) or die(mysql_error($Conn));
        $marcas = array();
        while ($Rs = mysql_fetch_array($Query)) {
        $marcas[] = array(
      $Rs['Marca_Id']  =>
        $Rs['Marca_Nome']
         );

        }

         echo ( json_encode($marcas) ); 
```

这将返回如下结果：

```
[{"2":"Chevrolet"},{"7":"Citro"},{"4":"Fiat"},{"3":"Ford"},{"6":"Peugeot"},{"1":"Volkswagen"}] 
```

所以我怎么能改变成这样的回报：

```
{"2":"Chevrolet","7":"Citro","4":"Fiat","3":"Ford","6":"Peugeot","1":"Volkswagen"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:24:59.037

您当前正在为每个键值对创建一个新数组，因此最终得到一个多维数组。请改为执行以下操作。

```
 while ($Rs = mysql_fetch_array($Query)) {
    $marcas[ $Rs['Marca_Id'] ] = $Rs['Marca_Nome']; 
 } 
```

# python - Python中平滑图的问题

> ID：10269728
> 
> 赞同：3
> 
> 时间：2012-04-22T16:22:46.737
> 
> 标签：python, graph, smoothing

由于我使用的采样率以及它的计数，我一直在尝试平滑一个嘈杂的情节。我一直在这里使用帮助 - 主要是[用 PyPlot 绘制平滑线](https://stackoverflow.com/questions/5283649/plot-smooth-line-with-pyplot)（虽然我找不到“样条线”函数，所以我`UnivarinteSpline`改用）

但是，无论我做什么，我都会遇到 pyplot 错误，`"x and y are not of the same length"`或者pyplot`scipi.UnivariateSpline`的值`w`不正确。我不太确定如何解决这个问题（不是真正的 Python 人！）我已经附上了代码，尽管它只是最后的绘图位导致了问题。谢谢

```
import os.path
import matplotlib.pyplot as plt
import scipy.interpolate as sci
import numpy as np
def main():
    jcc = "0050"
    dj = "005"
    l = "060"
    D = 20
    hT = 4 * D
    wT1 = 2 * D
    wT2 = 5 * D
    for jcm in ["025","030","035","040","045","050","055","060"]:
        characteristic = "LeadersOnly/Jcm" + jcm + "/Jcc" + jcc + "/dJ" + dj + "/lambda" + l + "/Seed000"
        fingertime1 = []
        fingertime2 = []
        stamp =[]
        finger=[]
        for x in range(0,2500,50):
            if x<10000:
                z=("00"+str(x))
            if x<1000:
                z=("000"+str(x))
            if x<100:
                z=("0000"+str(x))
            if x<10:
                z=("00000"+str(x))
            stamp.append(x)
            path = "LeadersOnly/Jcm" + jcm + "/Jcc" + jcc + "/dJ" + dj + "/lambda" + l + "/Seed000/profile_" + str(z) + ".txt"
            if os.path.exists(path):
                f = open(path, 'r')
                pr1,pr2=np.genfromtxt(path, delimiter='\t', unpack=True)
                p1=[]
                p2=[]
                h1=[]
                h2=[]
                a1=[]
                a2=[]
                finger1 = 0
                finger2 = 0
                for b in range(len(pr1)):
                    p1.append(pr1[b])
                    p2.append(pr2[b])
                for elem in range(len(pr1)-80):
                    h1.append((p1[elem + (2*D)]-0.5*(p1[elem]+p1[elem + (4*D)])))
                    h2.append((p2[elem + (2*D)]-0.5*(p2[elem]+p2[elem + (4*D)])))
                    if h1[elem] >= hT:
                        a1.append(1)
                    else:
                        a1.append(0)
                    if h2[elem]>=hT:        
                        a2.append(1)
                    else:
                        a2.append(0)
                for elem in range(len(a1)-1):
                    if (a1[elem] - a1[elem + 1]) != 0:
                        finger1 = finger1 + 1
                finger1 = finger1 / 2
                for elem in range(len(a2)-1):
                    if (a2[elem] - a2[elem + 1]) != 0:
                        finger2 = finger2 + 1
                finger2 = finger2 / 2
                fingertime1.append(finger1)
                fingertime2.append(finger2)
                finger.append((finger1+finger2)/2)
        namegraph = jcm
        stampnew = np.linspace(stamp[0],stamp[-1],300)
        fingernew = sci.UnivariateSpline(stamp, finger, stampnew)
        plt.plot(stampnew,fingernew,label=namegraph)
    plt.show()      

main() 
```

作为信息，数据输入文件只是一个整数列表（如代码所示，两个列表由制表符分隔）。

这是我得到的错误代码之一：

```
0-th dimension must be fixed to 50 but got 300

error                                     Traceback (most recent call last)

/group/data/Cara/JCMMOTFingers/fingercount_jcm_smooth.py in <module>()
    116
    117 if __name__ == '__main__':
--> 118     main()
    119
    120

/group/data/Cara/JCMMOTFingers/fingercount_jcm_smooth.py in main()
     93                 #print(len(stamp))
     94                 stampnew = np.linspace(stamp[0],stamp[-1],300)
---> 95                 fingernew = sci.UnivariateSpline(stamp, finger, stampnew)
     96                 #print(len(stampnew))
     97                 #print(len(fingernew))

/usr/lib/python2.6/dist-packages/scipy/interpolate/fitpack2.pyc in __init__(self, x, y, w, bbox, k, s)
     86         #_data == x,y,w,xb,xe,k,s,n,t,c,fp,fpint,nrdata,ier
     87         data = dfitpack.fpcurf0(x,y,k,w=w,
---> 88                                 xb=bbox[0],xe=bbox[1],s=s)
     89         if data[-1]==1:
     90             # nest too small, setting to maximum bound

error: failed in converting 1st keyword `w' of dfitpack.fpcurf0 to C/Fortran array 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T15:12:10.753

让我们稍微分析一下您的代码，从`for x in range(0, 2500, 50):`

*   您定义`z`为用 0 填充的 6 位数字的字符串。你真的应该使用一些字符串格式，比如`z = "{0:06d}".format(x)`或`z = "%06d" % x`代替你的这些多重测试。

*   在循环结束时，`stamp`将有`(2500//50)=50`元素。

*   您检查文件是否存在`path`，然后打开并阅读它，但您永远不会关闭它。一种更 Pythonic 的方法是：

    ```
    try:
        with open(path,"r") as f:
            do...
    except IOError:
        do something else 
    ```

    使用该`with`语法，您的文件会自动关闭。

*   `pr1`并且`pr2`很可能是一维数组，对吗？您可以真正将您的`p1`和`p2`列表的构造简化为：

    ```
    p1 = pr1.tolist()
    p2 = pr2.tolist() 
    ```

*   `a1`您的列表`a2`具有相同的大小：您可以将`for elem in range(len(a..)-1)`循环组合成一个循环。您也可以使用该`np.diff`功能。

*   在`for x in range(...)`循环结束时，`finger`将有 50 个元素**减去**丢失文件的数量。由于您没有告诉在丢失文件的情况下该怎么做，因此您的`stamp`和`finger`列表可能没有相同数量的元素，这会使您的`scipy.UnivariateSpline`. 一个简单的解决方法是`stamp`仅在`path`定义文件时更新您的列表（这样，它始终具有与 相同数量的元素`finger`）。

*   您的`stampnew`数组有 300 个元素，而您的`stamp`和`finger`最多只能有 50 个。这是第二个问题，权重数组 ( `stampnew`) 的大小必须与输入的大小相同。

*   您最终会尝试绘制`fingernew`vs `stamp`。问题是它`fingernew`不是**一个**数组，它**是**一个`UnivariateSpline`. 您仍然需要计算一些实际点，例如使用`fingernew(stamp)`，然后在您的`plot`函数中使用它。

# javascript - 在一行代码中更改多个字符串

> ID：10269729
> 
> 赞同：0
> 
> 时间：2012-04-22T16:22:55.710
> 
> 标签：javascript

> **可能重复：**
> [如何在 javascript 中替换多个单词](https://stackoverflow.com/questions/4784595/how-to-replace-several-words-in-javascript)

我有一个字符串：

```
var str = "1000 g teerts smarg 700 vickenbauer 400"; 
```

我需要用空格替换`teerts`, 。`vickenbauer`

我可以这样做：

```
str.replace("teerts", "");
str.replace("vickenbauer", ""); 
```

但是，有没有办法将两者绑定成一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:25:59.780

您可以链接替换：

```
str = str.replace("teerts","").replace("vickenbauer",""); 
```

请注意，该`replace`方法不会更改您使用它的字符串，您必须注意返回值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T16:25:28.600

您可以将 RegExp 与替换一起使用

```
str.replace(/(teerts|vickenbauer)/g, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T16:25:47.617

用正则表达式？

```
str.replace(/(teerts|vickenbauer)/g, ''); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T16:25:46.507

[当然！](http://jsfiddle.net/pvd4v/)

```
"1000 g teerts smarg 700 vickenbauer 400".replace(/teerts|vickenbauer/g,""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T16:31:19.613

```
str.replace(new RegExp(/teerts|vickenbauer/g), ""); 
```

# iphone - 用 NSString 附加 UIButton

> ID：10269730
> 
> 赞同：0
> 
> 时间：2012-04-22T16:22:57.850
> 
> 标签：iphone, ios, nsstring, uibutton, nsarray

我有这段代码可以在 SQLite DB 的 textview 中显示一些文本。

```
NSMutableString *combined = [NSMutableString string];
for(NSUInteger idx = 0; idx < [delegate.allSelectedVerseEnglish count]; idx++) {
    [combined appendFormat:@" %d   %@", idx, [delegate.allSelectedVerseEnglish objectAtIndex:idx]];
}

self.multiPageView.text = combined;
self.multiPageView.font = [UIFont fontWithName:@"Georgia" size:self.fontSize]; 
```

`delegate.allSelectedVerseEnglish`是`NSArray` `multiPageView`不是`UITextView`

我使用上面的循环函数来根据文本获取数字，例如`1 hello 2 iPhone 3 iPad 4 mac etc etc..`我只想要文本之间的**UIButton**而不是`1 2 3 4 ..`例如我想要 的。`unbutton hello unbutton iPhone etc etc`因为我需要从中进行一些触摸事件。如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:08:25.973

如果你想在 textview 中的一些文本之间放置 UIButtons，除了将它作为一个单独的视图放置在上面之外别无他法。因此，您需要在这些按钮下方添加空格，您应该根据按钮的大小自行计算这些空格的数量。所以，如果你想看到这样的东西：

```
Press here [UIButton] or here [Another UIButton], 
```

您的文本字符串应如下所示

```
Press here            or here                   , 
```

因此，当您在这些位置添加按钮时，它看起来就像您希望的那样。

# 更新

似乎我们需要更多的代码，所以这里是：首先，你需要计算一个字母的大小。让我们假设它是 10 像素高度和 8 像素。不，让我们称之为**letterHeight**和**letterWidth**。我们还假设您想要 64x10 像素的按钮。所以，我们需要 64/8=8 +2 空格在那个按钮后面（2 来做边框）所以，我们开始吧

```
NSMutableString *combined = [NSMutableString string];
int letterHeight = 10;
int letterWidth = 8;
   for(NSString *verse in delegate.allSelectedVerseEnglish) {
       [combined appendFormat:@"          %@",verse];//10 spaces there
//You have to experiment with this, but idea is that your x coordinate is just proportional to the length of the line you are inserting your button in, and y is proportional to number of lines
    int xCoordinate = [combined length]*letterWidth%(int)(self.multiPageView.frame.size.width);
    int yCoordinate = [combined length]*letterWidth/(int)(self.multiPageView.frame.size.width)*letterHeight;

     UIButton *newButton = [[UIButton alloc]initWithFrame:CGRectMake(xCoordinate,yCoordinate,64,10)];
     [self.multiPageView addSubview:newButton];
}
 self.multiPageView.text = combined; 
```

# c# - 创建转换器以获取 ID 并在 Silverlight 中创建图像

> ID：10269731
> 
> 赞同：0
> 
> 时间：2012-04-22T16:23:04.413
> 
> 标签：c#, silverlight, xaml, gif, ivalueconverter

我正在使用 WCF 天气服务并接收 ID、描述和图像等天气信息。它返回如下：

```
<WeatherDescription>
    <WeatherID>1</WeatherID>
    <Description>Thunder Storms</Description>
    <PictureURL>
     http://ws.cdyne.com/WeatherWS/Images/thunderstorms.gif
    </PictureURL>
</WeatherDescription> 
```

现在在 XAML 中，我在 dataGrid 中显示我的数据，如下所示：

```
<sdk:DataGridTextColumn Header="ID" Binding="{Binding WeatherID}" /> 
```

上面的绑定是服务的另一个函数，它返回一个 7 天的预报，但返回与天气描述相同的天气 ID。我在代码端创建了一个包含所有天气描述的数组，如下所示：

```
public partial class MainPage : UserControl
{
    //array of weather descriptions
    private WeatherDescription[] weatherInformation;

    WeatherSoapClient weatherClient = new WeatherSoapClient();

    public MainPage()
    {
        InitializeComponent();
        weatherClient.GetWeatherInformationCompleted += new EventHandler<GetWeatherInformationCompletedEventArgs>(weatherClient_GetWeatherInformationCompleted);
        weatherClient.GetWeatherInformationAsync();
    }

    void weatherClient_GetWeatherInformationCompleted(object sender, GetWeatherInformationCompletedEventArgs e)
    {
        weatherInformation = e.Result;
    }
} 
```

1.  我想要做的是创建一个转换器，该转换器从该列获取 ID，并使用天气描述中提供的 URL 将其转换为图像。

2.  我知道 Silverlight 不支持 GIF，所以我想将该图像发送到将其转换为 JPG 的处理程序。

对于 Silverlight 和 C# 来说都是全新的，这是我真正遇到的两件事。提前感谢您的帮助！代码片段对我来说是最好的帮助，因为我还不懂很多 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:43:43.810

1.  对于转换器，您可以执行以下操作：

    <sdk:DataGrid>

    ```
    <sdk:DataGrid.Resources>
        <local:WeatherIdToImageConverter key="IdToImageConverter" />
    </sdk:DataGrid.Resources>
    ...
        <sdk:DataGridTemplateColumn>
           <sdk:CellTemplate>
               <DataTemplate>
                   <Image Source="{Binding WeatherID, Converter={StaticResource IdToImageConverter}}" />
                   ... 
    ```

2.  在您实施转换器时，我会使用 ImageTools 库 ( [http://imagetools.codeplex.com/](http://imagetools.codeplex.com/) ) 在 GIF 和 PNG 之间进行转换（PNG 的质量会比 JPEG 更好）。

# annotations - 带有 cli 的学说 2 自动加载器必须使用 AnnotationRegistry

> ID：10269733
> 
> 赞同：6
> 
> 时间：2012-04-22T16:23:36.733
> 
> 标签：annotations, doctrine-orm, command-line-interface, autoloader

我必须使用`\Doctrine\Common\Annotations\AnnotationRegistry::registerFile`来访问实体文件中的注释注册表。

这部分是使用驱动链和使用 orm:schema-tool:creator 所必需的。但我不能通过添加来添加我需要的每个类`AnnotationRegistry::registerFile`。

当我想将 Gedmo 添加到我的 Doctrine 2.2.2 时，就会看到这个问题。

```
// cli-config.php
// if comment this like an error will appear 
// \Doctrine\Common\Annotations\AnnotationRegistry::registerFile(__DIR__ . '/../library/Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php');

// cache
$cache = new \Doctrine\Common\Cache\ArrayCache();

// annotation reader
$annotationReader = new \Doctrine\Common\Annotations\AnnotationReader();

// cached annotation reader
$cachedAnnotationReader = new \Doctrine\Common\Annotations\CachedReader($annotationReader, $cache);

// driver chain
$driverChain = new \Doctrine\ORM\Mapping\Driver\DriverChain();

// annotation driver
$annotationDriver = new \Doctrine\ORM\Mapping\Driver\AnnotationDriver($cachedAnnotationReader, array(SCHEMA_PATH));

// add entity namespaces
$driverChain->addDriver($annotationDriver, 'Entity');

// configuration
$config = new \Doctrine\ORM\Configuration();
$config->setMetadataCacheImpl($cache);
$config->setMetadataDriverImpl($driverChain);
$config->setQueryCacheImpl($cache);
$config->setProxyDir(PROXY_PATH);
$config->setProxyNamespace('Proxies');
$config->setAutoGenerateProxyClasses(true);

// entity manager
$entityManager = \Doctrine\ORM\EntityManager::create($connectionOptions, $config);

// helper set
$helperSet = new \Symfony\Component\Console\Helper\HelperSet(array(
            'db' => new \Doctrine\DBAL\Tools\Console\Helper\ConnectionHelper($entityManager->getConnection()),
            'em' => new \Doctrine\ORM\Tools\Console\Helper\EntityManagerHelper($entityManager)
        ));

// return
return $helperSet; 
```

我的实体文件在这里

```
namespace Entity;

use \Doctrine\Common\Collections\ArrayCollection;
use \Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="users")
 */
class User
{
    /**
     * @ORM\Id
     * @ORM\Column(columnDefinition="INT unsigned NOT NULL")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string",length=32)
     */
    protected $name;

    public function getId()
    {
        return $this->id;
    }

    public function setId($id)
    {
        $this->_id = $id;
        return $this;
    }

    public function getName()
    {
        return $this->id;
    }

    public function setName($name)
    {
        $this->_id = $name;
        return $this;
    }
} 
```

错误是：

```
 [Doctrine\Common\Annotations\AnnotationException]                                                                                       
  [Semantical Error] The annotation "@\Doctrine\ORM\Mapping\Entity" in class Entity\User does not exist, or could not be auto-loaded. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T22:32:45.233

看来你`AnnotationRegistry`的没有设置。

将以下内容添加到您的脚本中：

```
use Doctrine\Common\Annotations\AnnotationRegistry;  

AnnotationRegistry::registerFile("/path/to/doctrine/lib/Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php"); 
```

有关详细说明，请参阅[有关注释的 Doctrine 手册。](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html#introduction)
简而言之：要阅读注释 PSR-0 和 spl 自动加载无法完成工作，您必须使用他们的解决方案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T03:19:14.933

谢谢塞缪尔·赫尔佐格。它对我来说很完美。我正在使用 composer.json 生成供应商。所以当我添加我的 autoload.php 时，我只需要添加这些句子......

```
<?php
// autoload.php generated by Composer
use Doctrine\Common\Annotations\AnnotationRegistry;

require_once dirname( __DIR__ ).'/vendor/composer/autoload_real.php';

$loader = ComposerAutoloaderInit0cf45a42473ebbcd4516460f93747271::getLoader();

AnnotationRegistry::registerFile( dirname( __DIR__ ).'/vendor/doctrine/orm/lib/Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php' );

return $loader; 
```

就这样。

# c# - 隐藏重要数据

> ID：10269735
> 
> 赞同：2
> 
> 时间：2012-04-22T16:24:10.627
> 
> 标签：c#

只是想问一下在.Net桌面应用程序中隐藏敏感数据（ftp帐户，数据库连接字符串等）的最佳方法是什么......请有任何建议...... :)

我知道将数据放入应用程序并记住如果应用程序将被反混淆或反编译，隐藏的数据将被暴露出来。

我尝试使用应用程序设置

```
Properties.Settings.Default.MyConnectionString = theConString; 
```

但反编译时仍然可以看到数据。

请有任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T16:30:40.140

您可以**加密全部或部分 app.config 文件**。这对于保护数据库连接字符串特别常见。

这是有关如何做到这一点的[详细文章。](http://msdn.microsoft.com/en-us/library/ms254494.aspx)简而言之，这里是加密 app.config 中连接字符串部分的代码：

```
static void ToggleConfigEncryption(string exeConfigName)
{
    // Takes the executable file name without the
    // .config extension.
    try
    {
        // Open the configuration file and retrieve 
        // the connectionStrings section.
        Configuration config = ConfigurationManager.
            OpenExeConfiguration(exeConfigName);

        ConnectionStringsSection section =
            config.GetSection("connectionStrings")
            as ConnectionStringsSection;

        if (section.SectionInformation.IsProtected)
        {
            // Remove encryption.
            section.SectionInformation.UnprotectSection();
        }
        else
        {
            // Encrypt the section.
            section.SectionInformation.ProtectSection(
                "DataProtectionConfigurationProvider");
        }
        // Save the current configuration.
        config.Save();

        Console.WriteLine("Protected={0}",
            section.SectionInformation.IsProtected);
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

# c++ - OpenGL不更新drawview

> ID：10269736
> 
> 赞同：0
> 
> 时间：2012-04-22T16:24:53.333
> 
> 标签：c++, opengl

我有以下绘制球体的 drawScene 函数。X,Y 的坐标一直在更新。据我从 printf 中可以看出，这些值肯定会发生变化。

问题是球体不会根据坐标改变位置，而是总是在同一个地方绘制......

```
void drawScene(void){

        //Clear information from last draw
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_MODELVIEW); //Switch to the drawing perspective
glLoadIdentity(); //Reset the drawing perspective

glColor3d(1,0,0);

//glPushMatrix();///

glTranslated(X,Y,-7);//xyz//(X%5)-2.5,Y%5//(((X%6)-3),0,-7)
printf("\n\n\nCOORDS(X)%d  (Y):%d\n\n\n\n",X,Y);
glutSolidSphere(0.3, 25, 20);//3,20,20

//glPopMatrix();///

glutSwapBuffers(); //Send the 3D scene to the screen
        } 
```

PS。我不确定这是否正确，但每次我想要更新我的 openGL 窗口时，我都会调用 drawScene() 或者它只绘制一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:23:23.040

在更新 X 和 Y 时调用 glutPostRedisplay() 或像这样启用 idleFunc：

```
void idle()
{
   glutPostRedisplay();
} 
```

并将其添加到您的主要内容中：

```
glutIdleFunc(idle); 
```

# dataset - 聚类算法的数据集

> ID：10269737
> 
> 赞同：0
> 
> 时间：2012-04-22T16:24:54.023
> 
> 标签：dataset, data-mining, cluster-analysis

我被要求为不是很技术的听众做一个关于聚类算法的讲座。考虑到这一点，我想做一个简单的练习，让观众从数据集中识别组。但是，我找不到可用于此目的的好的数据集。

是否有我可以用于此目的的客户数据集和他们购买的一些产品？或任何其他可能看起来合适的数据集！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:14:05.240

我可以建议一个简单的地理位置数据库，例如德国的所有城市。我想你可以免费找到它。或者您可以查找 NASA 的天空数据。集群也很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T09:51:48.980

这是包含 4 个月交易的 Ta-Feng 数据集。从春南教授本人那里得到的。它现在存储在我的 dropbox 文件夹中：[https](https://www.dropbox.com/s/tsd5zd8a7afmzs7/D11-02.ZIP?dl=0) ://www.dropbox.com/s/tsd5zd8a7afmzs7/D11-02.ZIP?dl=0每个文件的第一行以中文显示列名。英文是：日期；会员卡ID；产品分类; 产品代码; 数量; 总交易金额（新台币）

# c++ - 如何从 cv::Mat 转换为 CvArr？

> ID：10269742
> 
> 赞同：8
> 
> 时间：2012-04-22T16:25:41.683
> 
> 标签：c++, opencv

我花了很多时间搜索如何从 cv::Mat 或 CvMat 转换为 CvArr 但没有任何收获，请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-02T12:24:07.957

```
Mat img = imread("C:\MyPic.jpg",CV_LOAD_IMAGE_GRAYSCALE);
IplImage tmp=img;
cvErode(&tmp, &tmp, 0, 2);
Mat laser=&tmp;
    imshow("Eroded",laser); 
```

我是通过这种方式转换`cv::Mat`的`CvArr`。而不是`tmp`直接使用 use `&tmp`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T16:04:45.600

当我需要这样做时，我只需使用：

```
IplImage tmp = image; 
```

使用图像 Mat 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T14:52:12.920

您确定要转换它吗？有时有等效的功能可以使用您所拥有的功能。例如`cvMorphologyEx`正在使用`CvArr`但`morphologyEx`正在使用`cv::Mat`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T17:13:43.667

如果我没记错的话，CvMat 是一个 CvArr，所以你可以将它转换成一个 CvArr，现在 CvArr 的第一个字节告诉函数它实际上是一个 CvMat： [http ://opencv.willowgarage.com/documentation/basic_structures .html#cvarr](http://opencv.willowgarage.com/documentation/basic_structures.html#cvarr)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T15:30:19.720

首先使用以下方法转换图像：

```
IplImage* oldstyleimg = &matimg.operator IplImage() 
```

我不记得它是只为图像创建标题还是复制

# ruby-on-rails - 如何使用先前的查找数组在 rails 方法中进行选择？

> ID：10269744
> 
> 赞同：0
> 
> 时间：2012-04-22T16:25:44.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, select

我想找到数组，但是我可以这样做吗？

```
@model = Model.find(:first, :conditions => { :MOD_MFA_ID => params[:man]}) 
@ct = CountryDesignation.find(:first, :conditions => { :CDS_ID => "110000002"}) 
```

但是 :CDS_ID => "110000002" 不好。我需要通过@model.Field 选择它，例如：:CDS_ID => @model.Field。但@model 也不仅仅是一个条目，它是一个数组。所以我需要为每个模型选择 CountryDesignation。但是我需要从 CountryDesignation 数组 DesText 数组中进行选择

> @destext = DesText.find(:all, :conditions => { :TEX_ID => @ct.Field})

如何完成这项工作？以及如何正确看待这一点？

> ```
> %table
>   %tr
>     %th Mfa id
>     %th Год начала выпуска
>     %th Год завершения выпуска
>   - @model.each do |model| 
>     %tr
>       %td= link_to model.MOD_ID, model
>       %td= link_to model.MOD_PCON_START, model
>       -if model.MOD_PCON_END.blank?
>         %td= link_to "По настоящее время", model
>       -else
>         %td= link_to model.MOD_PCON_END, model
>       -#%td= model.country_designations.des_texts.TEX_TEXT
>       -#= link_to 'Show model', model
>   %br
>   - @destext.each do |t|
>     name
>     %td= t.TEX_ID
>     %td= t.TEX_TEXT
>   - @ct.each do |ct|
>     ct
>     %td= ct.CDS_ID
>     %td= ct.CDS_TEX_ID 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:37:23.527

您可以使用`map`. 如果您感兴趣的模型属性被命名为`cds_id`：

```
@models = Model.all(:conditions => { :MOD_MFA_ID => params[:man] })
@ct = CountryDesignation.all(:conditions => { :CDS_ID => @models.map(&:cds_id) }) 
```

这实际上将`cds_id`每个模型的属性抓取到一个数组中，并在 SQL`IN`子句中使用这些值。`CountryDesignation`它返回匹配的对象数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:34:48.817

您正在寻找的是 ActiveRecord 以与 SQL 中的 IN 子句相同的方式处理数组的方法。幸运的是，AR 在传递数组时默认执行此操作。换句话说，您应该能够编写：

@model = Model.find(:first, :conditions => { :MOD_MFA_ID => })

# c# - Pointers and fixed size buffers may only be used in an unsafe context

> ID：10269748
> 
> 赞同：12
> 
> 时间：2012-04-22T16:25:48.547
> 
> 标签：c#, pointers

I have 2 functions within a class and getting error on the call for ParseBits() function i.e. "`int num_elements = ParseBits(bits, buffer);`" because of the "buffer" arguement I am passing "`public int ParseBits(string bits, int* buffer)`":

Function 1:

```
public float AssignFitness(string bits, int target_value)
        {

   //holds decimal values of gene sequence
   int[] buffer = new int[(VM_Placement.AlgorithmParameters.chromo_length / VM_Placement.AlgorithmParameters.gene_length)];

   int num_elements = ParseBits(bits, buffer);

   // ok, we have a buffer filled with valid values of: operator - number - operator - number..
   // now we calculate what this represents.
   float result = 0.0f;

   for (int i=0; i < num_elements-1; i+=2)
   {
      switch (buffer[i])
      {
         case 10:

            result += buffer[i+1];
            break;

         case 11:

            result -= buffer[i+1];
            break;

         case 12:

            result *= buffer[i+1];
            break;

         case 13:

            result /= buffer[i+1];
            break;

      }//end switch

   }

   // Now we calculate the fitness. First check to see if a solution has been found
   // and assign an arbitarily high fitness score if this is so.

   if (result == (float)target_value)

      return 999.0f;

   else

      return 1/(float)fabs((double)(target_value - result));
   //   return result;
} 
```

Function 2:

```
public int ParseBits(string bits, int* buffer)
        {

            //counter for buffer position
            int cBuff = 0;

            // step through bits a gene at a time until end and store decimal values
            // of valid operators and numbers. Don't forget we are looking for operator - 
            // number - operator - number and so on... We ignore the unused genes 1111
            // and 1110

            //flag to determine if we are looking for an operator or a number
            bool bOperator = true;

            //storage for decimal value of currently tested gene
            int this_gene = 0;

            for (int i = 0; i < VM_Placement.AlgorithmParameters.chromo_length; i += VM_Placement.AlgorithmParameters.gene_length)
            {
                //convert the current gene to decimal
                this_gene = BinToDec(bits.Substring(i, VM_Placement.AlgorithmParameters.gene_length));

                //find a gene which represents an operator
                if (bOperator)
                {
                    if ((this_gene < 10) || (this_gene > 13))

                        continue;

                    else
                    {
                        bOperator = false;
                        buffer[cBuff++] = this_gene;
                        continue;
                    }
                }

                //find a gene which represents a number
                else
                {
                    if (this_gene > 9)

                        continue;

                    else
                    {
                        bOperator = true;
                        buffer[cBuff++] = this_gene;
                        continue;
                    }
                }

            }//next gene

            //   now we have to run through buffer to see if a possible divide by zero
            //   is included and delete it. (ie a '/' followed by a '0'). We take an easy
            //   way out here and just change the '/' to a '+'. This will not effect the 
            //   evolution of the solution
            for (int i = 0; i < cBuff; i++)
            {
                if ((buffer[i] == 13) && (buffer[i + 1] == 0))

                    buffer[i] = 10;
            }

            return cBuff;
        } 
```

I am getting 2 errors for this functions on the highlighted lines:

```
Error 1: The best overloaded method match for 'VM_Placement.Program.ParseBits(string, int*)' has some invalid arguments

Error 2: Pointers and fixed size buffers may only be used in an unsafe context 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-22T16:28:19.400

You need to enclose your function using raw pointers in an `unsafe` block.

```
unsafe 
{
 //your code
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-07T16:44:59.987

I had the same problem, but it wasn't solved by any of the other answers up here. I kept getting different errors.

Whatever functions use unsafe code simply need to be declared with the "unsafe" keyword.
For example:

```
static unsafe void myFunction(int* myInt, float* myFloat)  
{
    // Function definition
} 
```

Personally, I was trying to do this when making a wrapper class.
For those interested, it ended up looking something like this:

```
using System.Runtime.InteropServices;

namespace myNamespace
{
    public class myClass
    {
        [DllImport("myLib.so", EntryPoint = "myFunction")]
        public static extern unsafe void myFunction(float* var1, float* var2);
    }
} 
```

Theres a lot of great information in the MSDN "Unsafe Code Tutorial":
[https://msdn.microsoft.com/en-us/library/aa288474(v=vs.71).aspx](https://msdn.microsoft.com/en-us/library/aa288474(v=vs.71).aspx)

It's probably worth a read, I found it quite useful.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-22T17:32:06.327

Perhaps I've missed it, but you don't appear to be doing anything that actually requires the use of a `int*`. Why not simply pass it an int array and change the ParseBits function signature to:

`public int ParseBits(string bits, **int[]** buffer)`

and remove the `unsafe{ ... }` blocks altogether.

# jquery - 使用悬停功能为 Google 地图创建热图

> ID：10269751
> 
> 赞同：1
> 
> 时间：2012-04-22T16:26:02.233
> 
> 标签：jquery, json, google-maps, heatmap

我正在寻找一个 HeatMap API，它为我提供了在地图的红点上实现 jquery 悬停的灵活性。

我在我的 JSON 数据中得到纬度和经度。我遇到了[www.heatmapapi.com](http://www.heatmapapi.com)，但对 Gmap 插件还是陌生的。我还需要动态控制我的缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:23:18.467

[Heatmap.js](http://www.patrick-wied.at/static/heatmapjs/)是一个 JavaScript 库，可用于根据您的数据使用 html5canvas 元素生成 Web 热图。热图实例包含一个商店，以便根据相关数据为热图着色，这意味着如果您只向商店添加一个数据点，它将显示为最热（红色）点，然后添加另一个具有更高计数的点，它将动态重新计算。

您可以通过更改 heatmap.js 中的渐变来使用不同的颜色。可以使用 ZoomIndex(GMAPV3) 动态控制缩放。

# mysql - 如何设计用于列更新投票系统的数据库？

> ID：10269752
> 
> 赞同：1
> 
> 时间：2012-04-22T16:26:09.243
> 
> 标签：mysql, database-design

假设数据库有一个表 'houses' -> house_id(pk) | 颜色 | nbr_of_windows；

房屋表由 1 个用户填充，但稍后，如果必须更新列，则只有在多个用户同意的情况下才能完成更新。我是否应该再制作 2 个表来存储有关每个房屋表列的更新提案（投票系统数据）的数据？有没有更好的解决方案？

# javascript - document.getElementById 来自元素

> ID：10269754
> 
> 赞同：0
> 
> 时间：2012-04-22T16:26:15.853
> 
> 标签：javascript, image, html

我正在尝试在翻转时`div`更改另一个图像，但我得到了`src``TypeError: 'null' is not an object.`

```
<div id="text" onmouseover="document.getElementById('button').src='pushed.png'">
Hello
</div>
<img id"button" src="unpushed.png"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:27:23.733

我怀疑这是因为你在`=`中间`id"button"`。

# ios - 使用简单的故事板应用程序获取 SIGABRT 错误

> ID：10269764
> 
> 赞同：1
> 
> 时间：2012-04-22T16:27:55.807
> 
> 标签：ios, uitableview, sigabrt, uncaught-exception

我有一个问题，我在互联网上搜索了解决方案，但无济于事。我在故事板上的 Apress 开始 iOS 5 开发的第 10 章。

我认为这本书缺少一段简单的代码，因为我是第一次经历这个，我不知道如何解决它。

我已经重新启动了两次项目，但在调试器中不断收到此错误：

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView 返回一个单元格：cellForRowAtIndexPath：”

```
#import "BIDTaskListController.h"

@interface BIDTaskListController ()
@property (strong, nonatomic) NSArray *tasks;
@end

@implementation BIDTaskListController

@synthesize tasks;

- (void)viewDidLoad {
    [super viewDidLoad];

    self.tasks = [NSArray arrayWithObjects:
                  @"Walk the dog",
                  @"URGENT:Buy milk",
                  @"Clean hidden lair",
                  @"Invent miniature dolphins",
                  @"Find new henchmen",
                  @"Get revenge on do-gooder heroes",
                  @"URGENT: Fold laundry",
                  @"Hold entire world hostage",
                  @"Manicure",
                  nil];
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;

    self.tasks = nil;
} 
```

//

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [tasks count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *identifier = nil;
    NSString *task = [self.tasks objectAtIndex:indexPath.row];
    NSRange urgentRange = [task rangeOfString:@"URGENT"];
    if (urgentRange.location == NSNotFound) {
        identifier = @"plainCell";
    } else {
        identifier = @"attentionCell";
    }
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];

    UILabel *cellLabel = (UILabel *)[cell viewWithTag:1];
    cellLabel.text = task;

    return cell;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:16:53.397

缺少代码：

...

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    UILabel *label = [[UILabel alloc] initWithFrame:cell.bounds];
    label.tag = 1;
    [cell addSubview:label];
}

UILabel *cellLabel = (UILabel *)[cell viewWithTag:1];
cellLabel.text = task; 
```

……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:06:01.717

实际上，我认为您的原始问题不是代码中缺少的任何内容，而是您的情节提要配置中缺少的东西！IIRC，这本书描述了在故事板中创建两个单元原型：一个带有红色文本，其标识符设置为“attentionCell”，一个带有黑色文本，其标识符设置为“plainCell”。如果这两个单元格存在于情节提要的 tableview 中，并且设置了正确的标识符，那么您发布的原始代码应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:15:55.477

没有丢失的代码。我完全按照第 10 章中的说明进行操作，编译并运行良好。
363页的顶部解释了从storyboard加载的table view可以按需创建cell，不需要检查nil返回。

# c# - 打开已在使用的文件

> ID：10269768
> 
> 赞同：3
> 
> 时间：2012-04-22T16:28:25.797
> 
> 标签：c#, .net, file, filestream, ioexception

```
using (System.IO.FileStream fs = File.Open(GetCurrentWallpaper(), FileMode.Open, FileAccess.Read, FileShare.ReadWrite)) { 
```

我正在编写一个应用程序，每次更改时都需要像这样打开当前壁纸。我首先访问注册表以获取壁纸的路径 (GetCurrentWallpaper)，并在壁纸更改时使用 FileSystemWatcher 对其进行处理。奇怪的是，它只工作一次。如果第二次访问墙纸（无论我等待多长时间），我的应用程序崩溃并出现 IOException，告诉我我无法访问该文件，因为它已经在使用中。如果我重新启动应用程序，它可以再次访问该文件，但如上所述，只能访问一次。否则它会崩溃。为了访问该文件，我能做些什么吗？

编辑：更多代码：

```
 using (System.IO.FileStream fs = File.Open(GetCurrentWallpaper(), FileMode.Open, FileAccess.Read, FileShare.ReadWrite)) {
                using (Bitmap orig = (Bitmap)Bitmap.FromStream(fs, true, false)) {
                    int width = Convert.ToInt32(orig.Width / 3);
                    int height = Convert.ToInt32(orig.Height / 3);

                    Rectangle rect = new Rectangle(0, 0, width, height);
                    using (Bitmap bmp = new Bitmap(width, height)) {
                        using (Graphics bmpg = Graphics.FromImage(bmp)) {
                            col = ColorHelper.CalculateAverageColor(bmp, true, 20);
                            fs.Flush();
                            fs.Close();
                        }
                    }
                }
            }

//this is in the ColorHelper class
public static System.Drawing.Color CalculateAverageColor(Bitmap bm, bool dropPixels, int colorDiff) {
        int width = bm.Width;
        int height = bm.Height;
        int red = 0;
        int green = 0;
        int blue = 0;
        int minDiversion = colorDiff;
        int dropped = 0;
        long[] totals = new long[] { 0, 0, 0 };
        int bppModifier = bm.PixelFormat == System.Drawing.Imaging.PixelFormat.Format24bppRgb ? 3 : 4;

        BitmapData srcData = bm.LockBits(new System.Drawing.Rectangle(0, 0, bm.Width, bm.Height), ImageLockMode.ReadOnly, bm.PixelFormat);
        int stride = srcData.Stride;
        IntPtr Scan0 = srcData.Scan0;

        unsafe {
            byte* p = (byte*)(void*)Scan0;

            for (int y = 0; y < height; y++) {
                for (int x = 0; x < width; x++) {
                    int idx = (y * stride) + x * bppModifier;
                    red = p[idx + 2];
                    green = p[idx + 1];
                    blue = p[idx];

                    if (dropPixels) {
                        if (Math.Abs(red - green) > minDiversion || Math.Abs(red - blue) > minDiversion || Math.Abs(green - blue) > minDiversion) {
                            totals[2] += red;
                            totals[1] += green;
                            totals[0] += blue;
                        } else {
                            dropped++;
                        }
                    } else {
                        totals[2] += red;
                        totals[1] += green;
                        totals[0] += blue;
                    }
                }
            }
        }

        int count = width * height - dropped;
        int avgR;
        int avgG;
        int avgB;

        if (count > 0) {
            avgR = (int)(totals[2] / count);
            avgG = (int)(totals[1] / count);
            avgB = (int)(totals[0] / count);
        } else {
            avgR = (int)(totals[2]);
            avgG = (int)(totals[1]);
            avgB = (int)(totals[0]);
        }

        bm.UnlockBits(srcData);
        return System.Drawing.Color.FromArgb(avgR, avgG, avgB);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:33:25.900

如果您使用 fs.Close() ，您将释放文件以进行进一步的读取操作。

# php - php简单的html dom解析器不更新多类

> ID：10269770
> 
> 赞同：0
> 
> 时间：2012-04-22T16:28:38.070
> 
> 标签：php, simple-html-dom, css

我正在尝试将 2 个类应用于这样的元素：

```
$div->setAttribute('class', 'txt found'); 
```

不幸的是，它不起作用，因为我得到了以下标记：

```
<div found="" class="txt"> 
```

我也试过`$div->class = "txt found";`有同样的结果。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:45:25.497

您能否尝试以下操作；

```
$div->className = "txt found"; 
```

更新：

```
<?php
$divHtml = "<div></div>";
$dom = new DOMDocument();
$dom->loadHTML($divHtml);
$allElements = $dom->getElementsByTagName('div');
$divElement = $allElements->item(0);
$divElement->setAttribute("class", "txt found");
echo $dom->saveHTML();
?> 
```

我试图重现你的案例，最后它成功了。你可以测试它。如果你发送更多代码，我们可以修改它以便工作

# arrays - Bash 从一个数组中获取数组成员，索引值来自另一个数组

> ID：10269771
> 
> 赞同：2
> 
> 时间：2012-04-22T16:28:53.910
> 
> 标签：arrays, bash

我正在使用 bash 中的多个对话框屏幕编写脚本。脚本的功能之一应该是杀死特定的进程。我将所有 PID 值加载到一个名为 pid 的数组中：

```
pid = ('1234' '1233' '1232' '1231' '1230') 
```

然后我向用户展示了一个包含进程列表的对话框清单。在他们选择其中一些后，对话框会返回清单条目编号，例如 0、2、4。

我最初的计划是将选定的条目存储在第二个数组中，然后使用它从第一个数组中获取特定的 PID，但到目前为止，我没有尝试过任何工作，在本例中为：1234、1232、1230。所以我可以杀死那些特定的进程。

有没有人有更好的解决方案？我想要基于用户在对话框清单中所做的选择来杀死进程的最简单方法。

这是有问题的功能：

```
stop_tunnel() {

local tunnels
local pid
declare -a tunnels
declare -a pid

#this is executed on a remote system in the real script
ps aux | grep -w ssh > $_temp

awk -F "ssh" '{print "ssh" $2}' $_temp > $_temp1
awk '{print $2}' $_temp > $_temp2

IFS='
'
tunnels=( $( < $_temp1 ) )
pid=( $( < $_temp2 ) )

dialog --checklist "Select tunnel to stop:" 10 72 0 \
                   0 "${tunnels[0]}" off \
                   1 "${tunnels[1]}" off \
                   2 "${tunnels[2]}" off \
                   3 "${tunnels[3]}" off \
                   4 "${tunnels[4]}" off \
                   2>$_temp

nr=$( < $_temp )

dialog --title " Tunnel stop " --msgbox "\nYou stopped these tunnels: ${nr[@]}" 6 44

} 
```

nr 数组保存用户选择。我想用它把特定的成员从 pid 数组中拉出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:38:36.600

**选择**可能是您需要的：

```
select p in ${pid[@]} ; do   echo "kill" $p && break; done 
```

请注意，作业周围的空白将不起作用：

```
# wrong:
pid = ('1234' '1233' '1232' '1231' '1230')
# right:
pid=('1234' '1233' '1232' '1231' '1230') 
```

要允许按顺序杀死多个进程：

```
select p in ${pid[@]} ; do
  if [[ -n $p ]]
     then echo "kill" $p
     else break
  fi
done
1) 1234
2) 1233
3) 1232
4) 1231
5) 1230
#? 3
kill 1232
#? 4
kill 1231
#? 6 
```

**回声**当然只是为了测试。

对用户的提示，无效索引将终止进程终止似乎是合适的。第二种方法可能是显式终止情况：

```
pid=('1234' '1233' '1232' '1231' '1230' 'terminate') 
```

你会在休息时处理。

如果您只想遍历选择，请执行以下操作：

```
sel=(0 2 4) 
for n in ${sel[@]} ; do echo kill ${pid[$n]}; done 
```

## 对你的更新评论：

我没有安装对话框，但我想`zenity`是相似的。在那里您捕获列表选择的输出：

```
selection=($(zenity --list --text "kill something" --multiple --column "kill" --separator " " --checklist --column ps TRUE foo FALSE bar FALSE baz TRUE fozboa)) 
```

# javascript - 有没有办法在网站上设置图像的加载优先级？

> ID：10269772
> 
> 赞同：8
> 
> 时间：2012-04-22T16:29:37.130
> 
> 标签：javascript, html, css, image

> **可能重复：**
> [控制 HTML 中的图像加载顺序](https://stackoverflow.com/questions/4211519/controlling-image-load-order-in-html)

有没有办法在网站上设置加载优先级或图像加载顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:53:49.570

您可以使用 jQuery 并尝试某事。像那样：

```
$(document).ready(function() {
  var preloaded_image = $('<img />').attr('src', 'img.jpg');

  $('#img_div').append(preloaded_image);
}); 
```

这应该会导致图像在其余内容之后加载。

# linux - 系统更新后我应该重建依赖库吗？

> ID：10269776
> 
> 赞同：0
> 
> 时间：2012-04-22T16:30:21.633
> 
> 标签：linux, distribution, libs

当我更新我的系统库时，我有些害怕。例如，我制作`make && make install`了一个依赖于 libssl-dev>0.5 的自定义库（即`libhell`repo 中没有这个库）。然后 apt 让我更新`libssl-dev`。我应该重建`libhell`新的`libssl-dev`吗？

更新后它总是可以正常工作并且没有重建，但是二进制安全呢？一直以来，我在 bin-dist 系统上构建自己的软件包，我都觉得自己做错了什么……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:35:53.783

这就是存在包系统的原因。

如果您的`libhell`二进制库是动态库（即`libhell.so`共享对象，具有与位置无关的代码）并且依赖`libssl-dev`项未更改其 API（例如，如果其版本号未更改），那么您无需重新编译和重新安装你的`libhell`.

如果您觉得您`libhell`依赖于更改的功能（或数据），`libssl-dev`那么您应该重新编译它。

`libhell`最好比需要的更频繁地重新编译。

另请参阅[程序库 Howto](http://tldp.org/HOWTO/Program-Library-HOWTO/)

# twitter-bootstrap - 如何让 Bootstrap 图标在深色背景下工作？

> ID：10269779
> 
> 赞同：8
> 
> 时间：2012-04-22T16:30:37.397
> 
> 标签：twitter-bootstrap, css-sprites, bootswatch

我正在使用Twitter 的[Bootstrap 库的](http://twitter.github.com/bootstrap/index.html)[Bootswatch Cyborg 主题](http://bootswatch.com/cyborg/)。但是，Cyborg 主题具有深色背景和浅色前景色，这与 Bootstrap 默认设置是负面的。图标集 PNG 采用浅色背景，不会显示在 Cyborg 主题中。深色背景是否有相应的图标集？[我在Glyphicons](http://glyphicons.com/)的网站上找不到。有没有简单的技巧将图标变成负色？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T16:34:48.990

将 icon-white 类添加到您的引导程序图标中，它将在黑暗中显示为白色。

像：

```
<i class="icon-search icon-white"></i> 
```

这适用于 Bootstrap 2，如[http://twitter.github.com/bootstrap/base-css.html所示](http://twitter.github.com/bootstrap/base-css.html)

# php - javascript jquery 调用 php 在 iPhone/Ipad 上不起作用

> ID：10269781
> 
> 赞同：0
> 
> 时间：2012-04-22T16:30:51.857
> 
> 标签：php, javascript, jquery, ipad, duration

我今天一直在编写以下代码，它在我的本地机器上运行良好。但是当我在我的 iPhone/iPad 上测试它时，它根本不起作用。

该代码应该在用户离开网站时将页面访问的持续时间保存到文本文件中。我知道互联网上有很多可供下载的替代脚本，但我想自己写这个。欢迎任何建议。

索引.php：

```
<!DOCTYPE html>
<html>
<HEAD>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript">

       function unloadPage(){

       var dd = new Date();
       var hh = (dd.getHours()<10?'0':'') + dd.getHours();
       var mm = (dd.getMinutes()<10?'0':'') + dd.getMinutes();
       var ss = (dd.getSeconds()<10?'0':'') + dd.getSeconds();
       var htmlString="<?php echo date('Gis') ?>";
       var timed = (hh + "" + mm + "" + ss) - htmlString;

       jQuery.ajax({
         url:    'time2.php?t=' + timed,
         success: function(result) {
                      if(result.isOk == false)
                          alert(result.message);
                  },
         async:   false
       });          
       }

       window.onbeforeunload = unloadPage;

    </script>
    <meta charset="utf-8">
    <title>thepaintjob.nl</title>
</head>
<BODY>
    <? 
            $myFile = "temp.txt";
            $fh = fopen($myFile, 'r');
            $theData = fread($fh, 5);
            fclose($fh);
            echo duration($theData);
    ?>
</body>
</html>

<?php 
    function duration($secs) 
    { 
        $vals = array('w' => (int) ($secs / 86400 / 7), 
                      'd' => $secs / 86400 % 7, 
                      'h' => $secs / 3600 % 24, 
                      'm' => $secs / 60 % 60, 
                      's' => $secs % 60); 

        $ret = array(); 

        $added = false; 
        foreach ($vals as $k => $v) { 
            if ($v > 0 || $added) { 
                $added = true; 
                $ret[] = $v . $k; 
            } 
        } 

        return join(' ', $ret); 
    } 
?> 
```

时间2.php：

```
<?php
$myFile = "temp.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, 5);
fclose($fh);
echo $total = $theData+$_GET['t'];

 $File = "temp.txt";
 $Handle = fopen($File, 'w');
 $Data = $total;
 fwrite($Handle, $Data); 
 fclose($Handle); 
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:34:25.010

iOS 不支持`onbeforeunload`。[这个问题](https://stackoverflow.com/questions/4127621/is-there-any-way-to-use-window-onbeforeunload-on-mobile-safari-for-ios-devices)解决了这个问题。

# iphone - 在核心数据中保存 CFDictionaryRef

> ID：10269783
> 
> 赞同：0
> 
> 时间：2012-04-22T16:31:10.883
> 
> 标签：iphone, ios, core-data, core-foundation

我试图将 CFDictionaryRef 保存到我的核心数据模型中，但我真的找不到有关如何执行此操作的信息。

如果有人可以提供有关它的更多信息，将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:36:39.567

您不能将字典保存到`CoreData`.
但是，您可以尝试先将其转换为 NSData，然后在使用之前将其转换回字典。看到[这个](https://stackoverflow.com/questions/3157356/converting-nsdictionary-object-to-nsdata-object-and-vice-versa)帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:53:16.660

将 NSDictionary 保存到 CoreData 的规范方法是使用 NSValueTransformers。

但是，我不知道它是否适用于 CFDictionaries。没有提到它是否有效。但是，通过免费桥接，它确实*看起来*应该可以工作。

如果是我，我会尝试使用价值转换器。如果这不起作用，您可以轻松地将 CFDictionaryRef 转换为 NSDictionary ：

```
NSDictionary *dictionaryObject = [NSDictionary dictionaryWithDictionary:(NSDictionary *)dictionaryRef]; 
```

# jquery - googleapis 中的 jquery lib 导致错误：属性值无效：缩放

> ID：10269788
> 
> 赞同：2
> 
> 时间：2012-04-22T16:31:59.940
> 
> 标签：jquery, ajax, zooming

为什么以下代码块中的第 5 行给了我“属性值无效：缩放”错误？我在 Opera 11.62 中运行它并在 Dragonfly 中发现错误。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript">
      // google chart built here from JSON pulled through php call
    </script>
  </head>

  <body>
  </body>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T20:20:28.053

Internet Explorer 5.5 及更高版本支持非标准`zoom`CSS 属性。它设置元素的放大比例。

尚无与此属性等效的 CSS3。

所以你在 Opera 中有一个错误，因为它不知道这样的属性。此属性仅适用于 IE。

在您的情况下，这个 Opera 控制台错误是由 jQuery 库产生的 - jQuery 知道 `zoom`属性并尝试使用它。

[在这里](http://reference.sitepoint.com/css/zoom)您可以找到有关此问题的更详细描述以及`zoom`属性的浏览器兼容性表。

# jquery - 为什么此代码段中悬停状态的宽度没有改变

> ID：10269791
> 
> 赞同：0
> 
> 时间：2012-04-22T16:32:21.070
> 
> 标签：jquery, css

背景位置和前置工作正常，但悬停在元素的宽度没有收到下面的例程的新宽度。我想我已经尝试了所有的语法排列，除了正确的！除非，出于某种原因，不能以这种方式更改 Li 的宽度？

我什至尝试用 css('width','128) 设置 css 但这不起作用......认为动画的某些东西会导致问题......但我很难过。

```
$(document).ready(function() {
    initwidth = $("li").width(); // updated

    // hover in
    $(".qnav li").hover( 
       function(){

           // start the animation
           $(this).stop().animate({width: "128"},{queue:false, duration:"fast" });
           $(this).stop().animate({backgroundPosition: "0 -30px"},{queue:false, duration:"fast" });
           $(this).prepend('<span class="prepended">Question </span');

       // hover out
       },function(){
           $(this).stop().animate({width: initwidth});
           $(this).stop().animate({backgroundPosition: "0 0"},{queue:false, duration:"fast" });

           $(".prepended").remove();

       }
    );
}); 
```

元素上的css是：

```
.qnav li{
   display: block;
   float: left;
   height: 30px;
   line-height: 2;
   width:38px;
   padding: 0;
   background:#aaa9a9 url(images/arrowSprite.png) no-repeat 0 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:48:03.277

1-您缺少宽度属性上的“px”：

```
$(this).stop().animate({width: "128px"},{queue:false, duration:"fast" }); 
```

2-您缺少以下结束`>`标记`span`：

```
$(this).prepend('<span class="prepended">Question </span>'); 
```

3-链接你的方法并使用缓存的实例来调用 jQuery 方法：

```
var $this = $(this);

$this.stop().animate({width: "128"},{queue:false, duration:"fast" })
       .animate({backgroundPosition: "0 -30px"},{queue:false, duration:"fast" })
       .prepend('<span class="prepended">Question </span>'); 
```

这优化了性能，因为 jQuery 不会在每次调用时都处理对象；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:24:22.933

尝试删除`.stop()`部分:) 它对我有用：http: [//jsfiddle.net/skip405/Qjks9/](http://jsfiddle.net/skip405/Qjks9/)

除了缓存之外`$(this)`，[正如另一个答案中所建议](https://stackoverflow.com/a/10269923/1144057)的那样，我建议在制作变量时也更具体一些）

所以不要`var initwidth = $("li").width();`尝试使用`var initwidth = $("ul.qnav li").width();`或类似的东西。否则，当有两个或多个有序和无序列表时，谁知道您的动画可能会发生什么;)

# c# - 如何在 asp.net 会员提供程序中手动调用 CreateUser 函数

> ID：10269794
> 
> 赞同：2
> 
> 时间：2012-04-22T16:33:12.277
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-membership

如何使用注册控件在 asp.net 4.0 的成员资格提供程序中手动调用 CreateUser 函数

我不是在谈论自定义会员提供者，只是想手动调用 createuser

```
<p class="submitButton">
    <asp:Button ID="CreateUserButton" runat="server" CommandName="MoveNext" 
        Text="Create User" ValidationGroup="RegisterUserValidationGroup"/>
</p> 
```

上面的代码是从 register.aspx 复制的，我可以找到 movenext 命令

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:42:33.140

您可以直接调用它，如 [http://www.asp.net/web-forms/tutorials/security/membership/creating-user-accounts-cs中所示](http://www.asp.net/web-forms/tutorials/security/membership/creating-user-accounts-cs)

参考：http `CreateUser()`: [//msdn.microsoft.com/En-US/library/d8t4h2es.aspx](http://msdn.microsoft.com/En-US/library/d8t4h2es.aspx)

# jquery - Jquery提及输入：点击链接添加标签

> ID：10269799
> 
> 赞同：2
> 
> 时间：2012-04-22T16:34:20.317
> 
> 标签：jquery, input, autocomplete, tagging, comments

所以我在我的评论系统中使用了这个插件[https://github.com/podio/jquery-mentions-input](https://github.com/podio/jquery-mentions-input)，一切正常，但我想添加一个功能。这个功能是当我点击一个链接（回复）时，它会在光标所在位置的文本区域中添加用户名的提及/标签。

有谁知道如何做到这一点？

一旦我已经添加了一个标签（写@字符），我就可以添加一个提及。我发现在单击链接时 textarea 的初始化和光标的位置存在问题，但我似乎无法弄清楚如何使其工作。

我在我的 jquery 文件中添加了一个 addReply 函数。

```
// Public methods
return {
  init : function (options) {
    settings = options;

    initTextarea();
    initAutocomplete();
    initMentionsOverlay();
  },

  val : function (callback) {
    if (!_.isFunction(callback)) {
      return;
    }

    var value = mentionsCollection.length ? elmInputBox.data('messageText') : getInputBoxValue();
    callback.call(this, value);
  },

    addReply : function (id, text, type) {
       initTextarea();
       initAutocomplete();
       initMentionsOverlay();
       addMention(text, id, type);
    },

  reset : function () {
    elmInputBox.val('');
    mentionsCollection = [];
    updateValues();
  },

  getMentions : function (callback) {
    if (!_.isFunction(callback)) {
      return;
    }

    callback.call(this, mentionsCollection);
  }
}; 
```

并使用与 textarea 在同一页面上的这个小脚本调用它（值仅用于测试）

```
$('.add-mention').click(function() {
  $('textarea.mention').mentionsInput('addReply',('Joris', 9, 'contact') );
}); 
```

经过测试，大问题看起来像没有@，jquery代码找不到标记的开头将在哪里开始，因此没有添加它。

我希望有人可以帮助我，它开始让我发疯！

谢谢乔里斯
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:12:36.673

Joris - 如果你还没有弄清楚这个，请看看这个 - [https://github.com/podio/jquery-mentions-input/pull/37](https://github.com/podio/jquery-mentions-input/pull/37)

# android - 保护客户端/服务器数据。（安卓）

> ID：10269804
> 
> 赞同：1
> 
> 时间：2012-04-22T16:34:35.390
> 
> 标签：android, security, encryption

我已经阅读了一些关于 SO 以保护客户端/数据的示例。但是我们有一点不同的问题，不知道在哪里看。

基本上我们有一个安卓游戏，它是一个基于地理位置的游戏。我们对查询字符串使用 HMAC-SHA1 来验证从客户端发送的数据是否确实来自客户端。有一个小问题。HMAC-SHA1 密钥。我可以混淆直到我心满意足，但关键仍然在应用程序中。有人可以轻松地反编译应用程序，获取密钥，然后通过浏览器为他们的用户帐户发送手动查询（欺骗 GPS）。

我看到一个例子，有人建议客户端和服务器端 ssl 身份验证。不确定这将如何工作，您是否只需要将 ssl 证书附加到应用程序？这是否也不需要反编译，是否需要最终用户重新编译/使用证书？

我们可以了解一下如何使用包管理器来获取自签名证书吗？我需要找到正确的方法来保护我们的传输，这样别人就不能为自己的用户帐户伪造他们的传输..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:23:53.407

要对客户端进行身份验证，它需要某种形式的凭据。您可以：

1.  不要保存凭据并让用户每次都输入它们
2.  将它们保存在某个地方
3.  使用系统凭据
4.  使用某种形式的身份提供者

1 不方便，2 只要有人可以物理访问设备，我就会受到攻击。对于 3，您可以使用用户的 Google 帐户，这样您就可以（非常）确定他们是谁，并在有任何问题/攻击时阻止他们。4 实际上是 3 的变体：用户将对某些第三方服务进行身份验证，并且它只会发出（临时）访问令牌。因此，如果帐户被盗用，令牌最终将过期和/或被撤销（查看 OAuth）。考虑实施的风险和工作量，然后选择。

至于使用客户端证书，您可以将它们加密存储，因此您需要提供密码才能使用它们。在 ICS 之前，您需要自己实现这一点，在 ICS 上，您可以通过`KeyChain`API 使用系统密钥存储。只有在解锁设备（使用解锁密码/PIN 保护密钥）并且用户明确授予权限后，您才能访问私钥。

如果您想坚持当前的做事方式，请在本机代码（OpenSSL 等）中实现 HMAC 部分，并在运行时通过组合它的位来生成密钥。这将使逆向工程变得相当困难。此外，您可能想要添加某种随机数，以便无法重播请求。

# mysql - Mysql 连接查询

> ID：10269809
> 
> 赞同：2
> 
> 时间：2012-04-22T16:34:55.583
> 
> 标签：mysql

我在数据库中使用三个表，我需要的查询应该结合所有三个表。表格如下所示：

表 A：

```
 id   |   name   |   status   
---------------------------------
     5    |   john    |     1
     7    |   mike    |     1
     8    |   jane    |     0 
```

表 B：

```
 send-id  |  receive-id  |  notification
-------------------------------------------
    12    |      5       |       1
    5     |      23      |       1
    8     |      14      |       1
    19    |      7       |       2
    14    |      5       |       1 
```

表 C：

```
 registered-id  |   status-reg
 ----------------------------------   
       5         |      7
       7         |      7
       8         |      7
       9         |      3 
```

我需要列出表 A 中状态为“1”和表 C 中状态为“7”的用户，并且这些用户未列在表 B 列“receive-id”中，值为“2”在“通知”栏中。

此示例中的结果将是：

```
 id   |   name    |   status   |  notification
 --------------------------------------------------
     5   |   john    |     1      | 
```

ID 号为 7 和 8 的用户将从列表中排除。ID# 7 的用户，因为它位于表 B 中的字段 receive-id 中，表通知中的值为 2，ID 为 8 的用户，因为它在表 A 中的状态为 0。

我怎样才能在一个查询中做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:59:30.450

```
Select ID, Name, Status, Notification
FROM TableA A
LEFT JOIN TableB B on B.receive-id = a.ID
 and b.notification <> 2
INNER JOIN tableC C on A.ID = C.Registered-id
WHERE a.status=1
and c.status-reg=7 
```

我认为你想要所有用户，即使他们在表 B 中没有记录，只要状态是 1 和 7。因此我认为需要左连接，然后必须对连接施加限制（除非你想要处理 where 子句中的空值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:56:58.623

让我们试试（未经测试，可能包含错误）：

```
SELECT a.id, a.name, a.status, b.notification
FROM a
JOIN c ON (a.id = c.registered-id)
JOIN b ON (a.id = b.receive-id)
WHERE a.status = 1
AND c.status-reg = 7
AND b.notification <> 2 
```

希望这能让你走上正轨。

# actionscript-3 - 为什么 doDebug() 给我这个错误？

> ID：10269815
> 
> 赞同：0
> 
> 时间：2012-04-22T16:35:26.103
> 
> 标签：actionscript-3, flash, actionscript, flash-builder, box2d

我刚开始使用 FlashPunk，我在 Mac 上使用 Flash Builder 作为我的 IDE。

我用 Box2D 和 box2fp 设置了 FlashPunk，我一直在尝试构建一个非常简单的游戏。但我的问题是，当我运行 doDebug() 时，出现以下错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at net.box2fp::Box2DWorld/debug_draw()[/Users/samirghobril/Desktop/MusicGame/src/net/box2fp/Box2DWorld.as:103]
at net.box2fp::Box2DWorld/doDebug()[/Users/samirghobril/Desktop/MusicGame/src/net/box2fp/Box2DWorld.as:123]
at Level1()[/Users/samirghobril/Desktop/MusicGame/src/Level1.as:13]
at Main()[/Users/samirghobril/Desktop/MusicGame/src/Main.as:18] 
```

这是 Main.as：

```
package
{

    import net.box2fp.Box2DWorld;
    import net.flashpunk.Engine;
    import net.flashpunk.FP;
    import net.flashpunk.Screen;

    [SWF(width='800',height='600',backgroundColor='#ffffff',frameRate='60')]

    public class Main extends Engine
    {
        public function Main()
        {

            super(800, 600, Box2DWorld.DEFAULT_FRAMERATE, true);

            FP.world = new Level1;

        }

        override public function init():void
        {
            FP.console.enable();
            FP.world = new Level1;
        }
    }
} 
```

这是Level1.as：

```
package
{
    import Box2D.Common.Math.b2Vec2;

    import net.box2fp.Box2DWorld;

    public class Level1 extends Box2DWorld
    {
        public function Level1()
        {
            super();
            setGravity(new b2Vec2(0, 10));
            doDebug();
        }

        override public function begin():void
        {
            add(new Player(80, 600));
        }
    }
} 
```

这是 Player.as：

```
package
{
    import Box2D.Dynamics.b2Body;

    import net.box2fp.Box2DEntity;
    import net.box2fp.Box2DShapeBuilder;

    public class Player extends Box2DEntity
    {
        public function Player(x:Number=0, y:Number=0, w:uint=1, h:uint=1, b2Type:int=0)
        {
            super(x, y, 30, 60, b2Body.b2_dynamicBody);
        }

        override public function buildShapes(friction:Number, density:Number, restitution:Number, group:int, category:int, collmask:int):void
        {
            Box2DShapeBuilder.buildRectangle(body, width / (2.0 * box2dworld.scale), height / (2.0 * box2dworld.scale));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:52:15.833

如果您按如下方式更新代码，您的项目应该可以编译。

主要作为：

```
package
{

    import net.box2fp.Box2DWorld;

    import net.flashpunk.Engine;
    import net.flashpunk.FP;
    import net.flashpunk.Screen;

    [SWF(width='800',height='600',backgroundColor='#ffffff',frameRate='60')]

    public class Main extends Engine
    {
        public function Main()
        {
            super(800, 600, Box2DWorld.DEFAULT_FRAMERATE, true);

            FP.console.enable();
            FP.world = new Level1();
        }

        override public function init():void
        {
            trace("FlashPunk has initialised");
        }
    }
} 
```

级别1.as：

```
package
{
    import Box2D.Common.Math.b2Vec2;

    import net.box2fp.Box2DWorld;

    public class Level1 extends Box2DWorld
    {
        public function Level1()
        {
            super();
            setGravity(new b2Vec2(0, 10));
        }

        override public function begin():void
        {
            doDebug();
            add(new Player(80, 600));
        }
    }
} 
```

说明：doDebug 方法尝试将 Sprite 添加到 FP.stage 实例中，当调用 Main 类的构造函数时（以及调用该方法的 Level1 类的构造函数），该实例不存在。

如果上述不适合，您可以在 Main 类的 init 方法中创建您的世界。当 FlashPunk 成功初始化时，超类调用此方法（请参阅[本教程](http://flashpunk.net/2011/05/the-basics/)）。然而，在查看文档后，看起来世界通常是在主类的构造函数中创建的。

此外，虽然合法（我认为），但在实例化类时调用 new 后省略括号并不是非常好的做法，例如。

做这个：

```
FP.world = new Level1(); 
```

不是这个：

```
FP.world = new Level1; 
```

# c# - 使用自定义逻辑对数组进行排序

> ID：10269816
> 
> 赞同：-1
> 
> 时间：2012-04-22T16:35:29.773
> 
> 标签：c#, arrays, sorting, .net-2.0

我有一个数组，我想使用一些自定义逻辑对其进行排序。

```
new string[] {"bRad", "Charles", "sam", "lukE", "vIctor"} 
```

现在我想根据字符串中大写字母的位置对其进行排序。如果第一个字母是大写，则忽略其他字母。如果两个字符串在同一位置有大写字母，则按字母顺序对其进行排序。如果字符串中没有大写字母，那么它显然会转到列表的末尾。性能是一个关键因素，将有大量数据进行测试。

输出应该是

```
new string[] {"Charles", "vIctor", "bRad", "lukE", "sam"} 
```

解释：

`Charles`排在第一位，因为它在第一个位置有大写字母。
`vIctor`排在第二位，因为它在第二个位置有大写字母排在
`bRad` 第三位，因为它在第二个位置有大写字母，但排在`I`
`lukE` 第一位是因为它在第四位有大写字母排在
`sam`最后，因为任何位置都没有大写字母。

我仅限于 .NET 2.0。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:52:53.423

问题可以分解为一些较小的离散部分。首先，您需要确定大写字母。这可以使用正则表达式来完成：

```
Regex rg = new Regex("[A-Z]");
MatchCollection mc = rg.Matches(crazyString); 
```

[http://professionalaspnet.com/archive/2009/10/01/Parsing-Capital-Letters.aspx](http://professionalaspnet.com/archive/2009/10/01/Parsing-Capital-Letters.aspx)

接下来，您需要编写进行排序的函数。您应该对每个字符串运行正则表达式以查找大写字母。然后比较大写字母进行排序。

如果您想使用 OOP 执行此操作，您应该创建一个实现`IComparable`接口[http://support.microsoft.com/kb/320727的类](http://support.microsoft.com/kb/320727)

```
public MyClass : IComparable
{
  int IComparable.CompareTo(object obj)
  {
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:53:41.510

我建议为此起诉[IComparer 。](http://msdn.microsoft.com/en-us/library/234b841s%28v=vs.80%29.aspx)您可以在自己的类中实现它，并提供自己的自定义逻辑进行排序。您可以通过在 Array.Sort() 方法调用中指定 Comparer 来做到这一点：http: [//msdn.microsoft.com/en-us/library/aw9s5t8f.aspx](http://msdn.microsoft.com/en-us/library/aw9s5t8f.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T16:58:16.733

这是一种性能方法：您可以使用遵循大写规则的自定义比较器。为了速度，您可以使用两个整数数组，每个数组的大小与您正在使用的字母（ASCII 的简单情况下为 26 个不同的大写字符）保持跟踪大写字母的字符计数，如果找到所有大写字母的计数两个词都相等，您可以只比较字符串本身：

```
public class CapitalizerComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        int[] xCount = new int[26];
        int[] yCount = new int[26];

        foreach(char c in x)
        {
            if (char.IsUpper(c))
                xCount[c-'A']++;
        }

        foreach (char c in y)
        {
            if (char.IsUpper(c))
                yCount[c-'A']++;
        }

        for (int i = 0; i < xCount.Length; i++)
        {
            if(xCount[i] > yCount[i])
                return -1;
            else if(yCount[i] > xCount[i])
                return 1;
        }
        return x.CompareTo(y);
    }
} 
```

由于根据您的规则，大写字符的位置无关紧要，您必须查看两个单词的所有字符才能做出决定。因此，上述算法应该是最优的并且 O(n+m)。

```
//use case:
var input = new string[] { "bRad", "Charles", "sam", "lukE", "vIctor" };
Array.Sort(input, new CapitalizerComparer()); 
```

输出：

```
Charles
lukE
vIctor
bRad
sam 
```

# delphi - Excel 导出：标题带或组标题带中的文本对象有自己的单独列

> ID：10269819
> 
> 赞同：3
> 
> 时间：2012-04-22T16:35:55.360
> 
> 标签：delphi, excel, export, quickreports

我需要将 QuickReport 导出到 XLS 文件，问题是我的数据对象之间有空列，这是因为在创建流时，列是根据从上到下的对象位置设置的，在这样的这样，如果对象的左侧位置未设置为与其下方的细节对象完全相同的位置，则该对象将获得自己的单独列，这将导致其下方的空单元格被细节对象占据。

例如：如果标题是“客户列表”并且两个详细信息列是“客户编号”和“客户名称”，则标题将放在 B1 中，那么两个详细信息对象将收到 A2 和 C2。我想要的是让他们收到 A2 和 B2：

```
~~~~~~~~~|Customer List|~~~~~~~~~~~

CustNr~~~|(Empty Cell)~~|~CustName~~ ->Not good (This is what I'm getting now) :(

~~~~~~~~~|Customer List|~~~~~~~~~~~~~

CustNr~~~~|CustName~~|~~(empty Cell)} ->Good (This is the wanted result) :) 
```

我在理论上认为，需要做的是在确定最大列数时不考虑头带，但我不知道如何实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:42:43.927

更容易的解决方案。

创建两个列标题。

第一列标题会得到~~~~~~~~~客户列表~~~~~~~~~~~~~

第二列标题将获得 CustNr~~~~CustName ~~~~ (empty Cell)}

每个都将作为新行导出。

问题解决了。

# android - 选择什么版本？

> ID：10269821
> 
> 赞同：1
> 
> 时间：2012-04-22T16:36:08.157
> 
> 标签：android, android-version

安装 SDK 时，我读到大约 97% 的手机支持 Android 2.1 我的问题是，我应该在打开新项目时选择将其编译为 Android 2.1 吗？为 2.1 编写的应用程序可以在较新版本中运行吗？相反会起作用吗？如果我开发到 4.0.3，它会在旧版本中工作吗？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T16:42:03.217

> 我的问题是，我应该在打开一个新项目时选择将其编译为 Android 2.1 吗？

您指定为构建目标的内容（“选择将其编译为”）对可以运行您的应用程序的 Android 版本没有直接影响。

> 为 2.1 编写的应用程序可以在较新版本中运行吗？

对于“为”一词的任何合理解释，是的。

> 如果我开发到 4.0.3，它会在旧版本中工作吗？

与 Agarwal 的回答一样，这取决于您所说的“to”是什么意思。

例如，假设您要使用`CalendarContract`. 此类是在 API 级别 14（又名 Android 4.0）中添加的。只要您*只*`CalendarContract`在 Android 4.0+ 设备上使用，就可以了。但是，如果您尝试`CalendarContract`在较旧的设备上使用，则会崩溃，因为固件中不存在该类。

因此，您可以*有条件*地使用较新的 API，只要您确保仅在运行较新版本 Android 的设备上使用这些较新的 API。通常，这是通过版本保护块完成的，例如：

```
if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
  // do something that requires API Level 11+ here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:37:38.370

如果您开发到 4.0.3，那么它不会安装在旧版本的设备上。如果您为 2.1 开发，它将在较新的版本上正常工作。但是如果你使用你不能得到 4.0.3 features 。

# c++ - Explorer.exe 在注入 DLL 时在启动时死锁

> ID：10269822
> 
> 赞同：2
> 
> 时间：2012-04-22T16:36:23.847
> 
> 标签：c++, windows, winapi, dll, dll-injection

每次用户登录 Windows（使用*HKCU\Software\Microsoft\Windows\CurrentVersion\Run*注册表路径）时，我都会使用注册表“运行”键自动执行我的程序。[我的应用程序首先使用命令行 DLL-Injector](http://code.google.com/p/injector/)
将 DLL 注入 explorer.exe 进程。

效果应该是：每次用户登录后（重新启动Windows后） - 我的应用程序被执行，我的DLL被注入explorer.exe

在某些情况下它可以工作，但在少数情况下（时间问题，很少重现），注入器和 explorer.exe 进程都死锁并且没有响应。
我不确定，但我相信它的发生是因为注入器正试图将 DLL 注入进程（并在这样做时暂停它），而进程已经在加载不同的 DLL（因此它被锁定）。这样两个进程都被锁定==>死锁。

我知道死锁是在 DLL 实际注入进程之前实现的。

有谁知道如何避免它？也许在注入之前查询 explorer.exe 的状态？或许要等探险者稳定下来？如果是这样 - 我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:38:08.977

您始终可以避免使用 DLL 并通过重新定位可执行文件的 .reloc 部分以进行注入来避免挂起目标进程。

# html - AJAX 问题涉及带字符串的 & 符号。

> ID：10269826
> 
> 赞同：0
> 
> 时间：2012-04-22T16:36:37.120
> 
> 标签：html, ajax, forms, post

我有一个隐藏的输入，它采用文章名称。标题中带有符号“&”。

```
<input name="art" type="hidden" id="art" value="<?php echo $rew['art']; ?>"/> 
```

当我提交表单时，$_POST 没有注册完整的文章标题。它只上升到 & 的位置，其余的都是空白的。

我想要这个：“这是&曾经。”

但我得到：“这是”。

我怎样才能使它在我提交表单时得到“&”符号和剩余的上下文。

我也在数据库中搜索。我现在的问题是在“&”之后得到标题的其余部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:41:27.037

您需要通过以下[`htmlspecialchars`](http://us2.php.net/manual/en/function.htmlspecialchars.php)函数转义 HTML 实体：

```
<input name="art" type="hidden" id="art" value="<?php echo htmlspecialchars($rew['art']); ?>"/> 
```

* * *

根据下面评论中的讨论，您还需要转义为 Ajax 请求生成的 URL 中的 & 符号。您可以使用以下[`encodeURIComponent`](http://www.javascripter.net/faq/escape.htm)函数在 JavaScript 中执行此操作：

```
var dataString = '&topic' + encodeURIComponent(topic); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T16:42:07.120

你可以`&`用`&amp;`

# javascript - 到 Object 的 URL 查询字符串

> ID：10269834
> 
> 赞同：2
> 
> 时间：2012-04-22T16:37:05.427
> 
> 标签：javascript, regex

我有下面的函数，它将查询放入一个对象中。它可以工作，但会将 url 添加到对象中，而且我对正则表达式的了解不够，无法弄清楚如何删除 url 并且只包含 vars。

```
function urlToObj(url)
{
        var obj = {};
        url.replace(
            new RegExp("([^?=&]+)(=([^&]*))?", "g"),
            function($0, $1, $2, $3) { obj[$1] = $3; }
        );

        return obj;
} 
```

例如

```
url = http://www.example.com/hello/world.php?var1=1&var2=2
url = http://www.example.com/hello/world.asp?var1=1&var2=2
url = http://www.example.com/hello/world?var1=1&var2=2

obj = urlToObj(url); 
```

输出

```
obj { var1="1", var2="2", http://www.example.com/hello/world.php="" }
obj { var1="1", var2="2", http://www.example.com/hello/world.asp="" }
obj { var1="1", var2="2", http://www.example.com/hello/world="" } 
```

我希望它删除网址，所以它看起来像这样

```
obj { var1="1", var2="2" } 
```

任何我出错的例子和信息都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:40:54.233

这个扩展创建了一个单例查询字符串对象，用于快速和可读的查询字符串修改和创建。这个插件提供了一种简单的方法来获取页面的查询字符串并用很少的代码创建它的修改版本。

[http://archive.plugins.jquery.com/project/query-object](http://archive.plugins.jquery.com/project/query-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:16:19.347

一些黑客呢？:-)

```
function urlToObj ( url ) {
    var obj = {};
    url.replace(
        new RegExp("([^?=&]+)(=([^&]*))?", "g"),
        function($0, $1, $2, $3) { obj[$1] = $3; }
    );

    // Now, you know you've got an empty string for your url
    // So let's loop through the object and remove this property
    for ( var prop in obj ) {

        // You only want the objects properties, nothing inherited
        if ( obj.hasOwnProperty( prop ) ) {

            // If it's an empty string
            if ( obj[ prop ] === '' ) {

                // Delete it!
                delete obj[ prop ]
            }
        }
    }
    return obj;
} 
```

# fortran - 大型数组导致 OpenMP 崩溃

> ID：10269836
> 
> 赞同：2
> 
> 时间：2012-04-22T16:37:17.663
> 
> 标签：fortran, openmp, fortran90, gfortran

我正在使用 Fortran 和 OpenMP，但是当我尝试在有大型数组时使用 OpenMP 并行化循环时，我一直遇到问题。例如，下面的代码：

```
PROGRAM main
IMPLICIT NONE   
INTEGER, PARAMETER :: NUMLOOPS = 300000
REAL(8) :: TESTMAT(NUMLOOPS)
INTEGER :: i,j

!$OMP PARALLEL SHARED(TESTMAT)
!$OMP DO
DO i=1,NUMLOOPS         
    TESTMAT(i) = i
END DO
!$OMP END DO
!$OMP END PARALLEL

write(*,*) SUM(TESTMAT)/(NUMLOOPS)

END PROGRAM main 
```

使用此 Makefile 编译：

```
.SUFFIXES: .f90

F90 = gfortran
FFLAGS_PFM = -ffree-form -ffree-line-length-none -fopenmp
LIB = -llapack
OBJ90 = main.o 

main: $(OBJ90)
    $(F90) $(FFLAGS_PFM) -o $@ $(LIB) $(OBJ90)

${OBJ90}: %.o: %.f90
    $(F90) $(FFLAGS_PFM) $(LIB) -c -o $@ $< 
```

在使用 gfortran 编译的 windows 机器上崩溃。但是，如果我将 NUMLOOPS 值更改为小于 260000 左右，程序运行得很好。同样，大约 1000x1000 的矩阵会崩溃（事实上，任何高于 500x500 的矩阵都不起作用）。因此，使用 OpenMP 时似乎允许最大数组大小？不过我还没有遇到过这种情况。我在多台 Windows 机器上尝试过，结果相同，但是都使用相同的配置，例如带有 gfortran 编译器的 Windows 7。代码总是编译没有问题，但运行时崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:15:17.883

`-fopenmp`在 GNU Fortran 中指定意味着`-frecursive`这意味着所有局部变量（甚至是大数组）都是自动的（即在堆栈上分配）。在 Windows 上，堆栈大小在 PE 可执行头文件中是固定的，并且必须在链接阶段指定，这与可以通过限制机制动态控制的 Unix 系统非常不同。

要增加 Windows 可执行文件的堆栈大小，您可以使用`editbin.exe`Microsoft 的命令行，例如：

```
editbin /STACK:<size> yourexe.exe 
```

或向 GCC 提供以下选项：`-Wl,--stack,<size in bytes>`，其中`<size in bytes>`是所需的堆栈大小（以字节为单位）。您应该将堆栈大小设置为至少足够大以适应整个数组（即`8*NUMLOOPS`）和局部变量等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T17:40:00.617

OpenMP 对您可以实例化的数组的大小没有任何限制。您的 Fortran 编译器可能会；检查文档。

您使用的硬件确实施加了限制——您将无法在您的机器上声明索引值大于 HUGE(int) 的数组；因为 HUGE(int) 可能是 (2^31)-1 或 (2^63)-1 （Fortran 没有无符号整数），所以目前这可能不会影响您。

另一个可能会影响您的限制是，您的编译器允许您声明的变量的大小可能存在限制。我对 gfortran 不熟悉，但我建议您谷歌搜索或查看文档。可能是 gfortran 可以处理的堆栈大小有限制，在许多平台上，静态声明的 Fortran 变量（即不是 ALLOCATABLE）将被放置在堆栈上。我怀疑这是你问题的根源。

如果你不能说服你的编译器让你在编译时声明一个更大的数组，请尝试使数组 ALLOCATABLE 并在运行时分配它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-10T16:48:13.030

我有同样的问题。据我了解，选项-fopenmp 默认带有-frecursive。后者迫使大型阵列位于堆栈中，这就是我们的问题。

一个伪解决方案是使用另一个选项覆盖 -fopenmp 隐含的 -frecursive 选项。为此，我为 gfortran 编译器选项添加了选项 -fno-automatic

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-08T12:56:54.610

与我以前的解决方案相比，我有一个更好的解决方案，即在运行代码之前插入以下 cmd: `ulimit -s unlimited`。这是为了摆脱对堆栈大小的默认限制。

# android - 列表视图和表格布局有什么区别？

> ID：10269841
> 
> 赞同：3
> 
> 时间：2012-04-22T16:37:49.743
> 
> 标签：android

在 Android Development 页面中，我发现 listview 是一个列出项目的视图组，而 table 也是一个列出视图的视图组。似乎它们都在形成一个“类似列表”的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T16:38:42.520

ListView 是一组布局，这些布局自动显示在另一个之下。开发者通过 Activity 中的一段代码添加新项目。一个例子是地址簿，你有很多联系人一个接一个。

另一方面，TableView 是在布局文件中定义的，不仅需要包含彼此下方或上方的元素，还可以将元素排列在左侧或右侧。一个 TableView 正是它所说的：一个有行和列的表

# python - 生成的子进程是否被认为是 Heroku 上的新测功机？

> ID：10269845
> 
> 赞同：8
> 
> 时间：2012-04-22T16:38:05.500
> 
> 标签：python, heroku, web, backgroundworker, flask

我刚从 Epio 搬到 Heroku，在阅读了他们的新流程模型之后，我想知道 Heroku 如何处理子流程。常见问题解答说[您可以创建 subprocesses](https://devcenter.heroku.com/articles/python-faq#can_i_spawn_and_control_threads_and_subprocesses)，但没有描述这样做的任何含义。

每个子流程是否都算作您必须支付的新的测功机？如果是这样，使用 Gunicorn 不会因为它预先分叉其子进程而变得昂贵吗？最后，既然 Heroku 隔离了它的进程，你怎么能和你的子进程通信呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T16:51:19.343

子流程由单个测功机处理。

我不是 python 开发人员，但我在 Heroku 网站（Rails）上使用 Unicorn，通常有 4 个子进程都包含在一个测功机中。您生成的子进程数量需要注意内存消耗 - 每个测功机可以使用 512Mb。

# sql-server - 为什么 Smo.Agent.JobServer 正在更改我的 SQL 连接字符串？

> ID：10269847
> 
> 赞同：0
> 
> 时间：2012-04-22T16:38:32.793
> 
> 标签：sql-server, sql-server-2008, ado.net, smo

嗨，我在使用 SMO 时注意到一些奇怪的行为，想知道是否有人可以对此提供一些见解；当我第一次调用 Server.JobServer 属性时（在这种情况下，仅调用 .ToString() 可能会在后台延迟初始化它）我发现它影响了我的 SQL 连接字符串 - 特别是密码已经消失了！

下面是我用来产生这种行为的代码：

```
SqlConnection conn = new SqlConnection(@"Data Source=myserver;Initial Catalog=Stage;user=myuser;password=abc;");
ServerConnection serverConn = new ServerConnection(conn);
Server server = new Server(serverConn);
Console.WriteLine(conn.ConnectionString);
server.JobServer.ToString();
Console.WriteLine(conn.ConnectionString); 
```

输出是 Data Source=myserver;Initial Catalog=Stage;user=myuser;password=abc; 数据源=myserver；初始目录=Stage；用户=myuser；

帐户 myuser 配置了 public 和 sysadmin SQL Server 角色，并且在 master 和 msdb 上具有 dbo。任何人都可以提供有关为什么会发生这种情况的任何见解或线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:16:09.007

这是设计使然。[与 OLE DB 或 ADO 不同， SqlConnection.ConnectionString](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)返回的连接字符串与用户设置的 ConnectionString 相同，如果 Persist Security Info 值设置为 false（默认），则减去安全信息。除非将 Persist Security Info 设置为 true，否则用于 SQL Server 的 .NET Framework 数据提供程序不会在连接字符串中保留或返回密码。

Microsoft[强烈建议](http://msdn.microsoft.com/en-us/library/89211k9b%28vs.71%29.aspx)将 Persist Security Info 保留为 false。如果您在建立连接时提供了用户 ID 和密码，那么如果该信息用于打开连接然后被丢弃，您将受到最大程度的保护。如果您要向不受信任的源提供开放连接或将连接信息持久保存到磁盘，这一点尤其重要。将 Persist Security Info 保持为 false 有助于确保不受信任的源无法访问您的连接的安全敏感信息，还有助于确保没有安全敏感信息与您的连接字符串信息一起保存到磁盘。

# android - 图形布局不显示用 xml 文件编写的文本

> ID：10269853
> 
> 赞同：0
> 
> 时间：2012-04-22T16:39:06.287
> 
> 标签：android, android-layout

我无法弄清楚为什么图形布局没有显示以下 xml 文件中的所有文本。

我确实看到了“X”，我看到了我的背景图标，我在模拟器中看到了“@string/remaining”的内容，“@dimen/ *** ”已定义且不等于 0，并且没有报告警告/错误xml 文件检查器（我使用的是 Eclipse）。在图形布局中，“@string/remaining”和“99”都不会出现。

此 xml 文件的目的是设计一个 gridView 单元格，表示一个 Scrabble(R) 字母，以及其中有多少尚未播放。所以在我的主要活动中会有或多或少的 26 个这样的细胞。价值观：

```
@string/remaining = "Left: "
@dimen/ic_size = 68px
@dimen/remaining_size = 12dip
@dimen/coin_size = 14dip 
```

网格单元.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="@dimen/ic_size"
android:layout_height="@dimen/ic_size"
android:background="@drawable/ic_empty_coin"
android:orientation="vertical">
<TextView
    android:id="@+id/lbl_Cell_Letter"
    android:layout_width="@dimen/ic_size"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal|top"
    android:textColor="#000000"
    android:textSize="@dimen/letter_size"
    android:text="X"
    android:textStyle="bold"/>
<LinearLayout
    android:layout_width="@dimen/ic_size"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal|top"
    android:orientation="horizontal">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:textColor="#000000"
            android:textSize="@dimen/remaining_size"
            android:textStyle="italic"
            android:text="@string/remaining"/>
        <TextView
            android:id="@+id/lbl_Cell_Number"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:textColor="#000000"
            android:textSize="@dimen/coin_size"
            android:text="99"
            android:textStyle="italic" />
</LinearLayout>
</LinearLayout> 
```

任何的想法？！在模拟器中，我没有得到我所期望的......否则我什至不会关心我在图形布局中看到的内容！

这是我在stackOverflow上的第一个问题，请对我好！:)

托马斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:41:04.047

这是图形布局中长期存在的错误之一。

您必须删除斜体才能在图形布局中看到它（一个主要的烦恼）。

# html5-canvas - 使用 JavaScript 在 HTML5 画布上创建按钮

> ID：10269858
> 
> 赞同：0
> 
> 时间：2012-04-22T16:40:08.770
> 
> 标签：html5-canvas

我正在尝试编写一个简单的游戏来使用 HTML5 画布和 JavaScript 教授一些基本的威尔士语。

我目前有一个网页，它显示一个画布，在画布上，已经绘制了“开始按钮”，用户将单击它来开始游戏。

我现在想将功能添加到该按钮，以便当用户单击它时，游戏的第一关将显示在画布上。但是，我遇到了一些麻烦，想知道是否有人可以帮助我。

我的 index.html 文件中有以下代码：

在头部的隐藏部分中，我有：

```
<section hidden>
<img id="StartButton" src="StartButton.png" alt="Start Button" width="179" height="180" />

<script type="text/javascript">
    /* Create a canvas layer to display text */
    function displayText(textLayer, message){
        var textLayerContext = textLayer.getContext();
        textLayer.clear();
        textLayerContext.font = "18pt Calibri";
        textLayerContext.fillStyle = "black";
        textLayerContext.fillText(message, 10, 10);
    }

    /* Create a canvas layer to display the button */
    window.onload = function(){
        var stage = new Kinetic.Stage({
            container: "container",
            width: 179,
            height: 180
        });
        var buttonLayer = new Kinetic.Layer();
        var textLayer = new Kinetic.Layer();
</script>

</section> 
```

在正文中 onLoad... 我调用了函数 startGame()，然后在正文标记中包含以下代码：

```
<body onLoad="startGame()">
    <h1>Home</h1>
    <p1>The purpose of this website is to allow users to learn some basic Welsh by playing the game below. <br /><br /></p1>
    <p2>

    <canvas id="gameCanvas" width="700" height="300" style="border:1px dotted">
    Your browser does not support the canvas element.
    </canvas>

    <script type="text/javascript">
        /* Create the canvas, and add some global variables. */
        var myGameCanvas = document.getElementById("gameCanvas");
        var context = myGameCanvas.getContext("2d");
        var image = new Image();
        var imageSource;
        var imageX;
        var imageY;

        /* Global variables- game elements */
        var currentLevel=1;
        var totalLevels=5;
        var currentScore=0;
        var currentScorePositionX=100;
        var currentScorePositionY=100;

        /* This function starts the game, and calls all of the other functions required to play the game */
        function startGame(){
            drawGameElements();
            drawStartButton(); 
            /* Now need to add an event listener to call drawLevelOneElements() when
                the start button is clicked. */
            myGameCanvas.addEventListener("click", drawLevelOneElements, false);
            //drawLevelOneElements();
            //game_id=setInterval(game_loop, 50);
        }

        /* This function draws the game elements */
        function drawGameElements(){

            /* Draw a line for the 'score bar'. */
            context.moveTo(0, 25);
            context.lineTo(700, 25);
            context.stroke();

            /* Draw current level/ total levels on the left, and current score on the right. */
            context.font = "11pt Calibri"; /* Text font & size */
            context.strokeStyle = "black"; /* Font colour */
            context.strokeText(currentLevel + "/" + totalLevels, 10, 15);
            context.strokeText(currentScore, 650, 15);
        }

        /* This function draws a start button which the user can click to start the game */
        function drawStartButton(){
            image.onload = function(){
                context.drawImage(image, 260.5, 60);
            };
            image.src = "StartButton.png";
            /** Now I need to add an event listener to the area of the canvas on 
                on which the button image is displayed, in order to 'listen' for 
                a click on the button */
            var boundingBox = myGameCanvas.getBoundingClientRect();
            var mouseX = (mouse_event.clientX-boundingBox.left) * (myGameCanvas.width/boundingBox.width);
            var mouseY = (mouse_event.clientY-boundingBox.top) * (myGameCanvas.height/boundingBox.height);
            var pixels = context.getImageData(mouseX, mouseY, 1, 1);

            /** There maybe more than one pixel at this location so use a loop
                to test whether any of the pixels have an alpha value greater than
                0\. With pixel data, 3 is alpha, so check data[3] and every fourth
                element in data after that. */
            //for (var i=3; i<pixels.data.length; i+=4;){
                /** If a non- zero alpha is found, stop and return "true"- the click
                    was on a part of the canvas that has colour on it. */
            //  if(pixels.data[i]!=0) return true;
            //}

            /** If the function gets here, then the mouse click wasn't on a painted
                part of the canvas. */
            //return false;
            /**myGameCanvas.getElementById("StartButton").onClick = function(e){
                drawLevelOneElements();
            } */                
        }

        /* This function draws the elements for level 1\. */
        function drawLevelOneElements(){
            var context = canvas.getContext("2d");

            /* Draw the images for numbers 1-10.*/
            var image1 = new Image();
            /* Test that this code is being executed */
            context.moveTo(300, 300);
            context.font = "11pt Calibri";
            context.strokeStyle = "black";
            context.strokeText("Testing",300, 300);
            /* End of test */

            image1.onLoad = function(){
                context.drawImage(image1, 50, 50);
                };
            image1.src="1.png";
        }

        /* This function is what will be used to draw the images on the canvas */
        function drawImage(x, y){
            var numberImage = new Image();
            numberImage.src = imageSource;
            context.drawImage(numberImage, x, y);

        }

    </script>
    <br /><br /></p2>
    <p3>Use this paragraph to enter text that provides the user with instructions for how to play the game. <br />
        Update the instructions so that they're appropriate to whatever level the user is currently playing.</p3>
</body> 
```

目前，当我在浏览器中查看页面时，我在画布中显示了一个“开始按钮”，如上所述。我无法解决的是如何让画布在单击开始按钮时调用函数 drawLevelOneElements() ...如果有人能指出我正确的方向，我将不胜感激？

提前致谢！

感谢您的回复。我已经尝试进行您建议的更改，所以我现在有：

```
 function startGame(){
            drawGameElements();
            drawStartButton(); 
            /* Now need to add an event listener to call drawLevelOneElements() when
                the start button is clicked. */
            //myGameCanvas.addEventListener("click", drawLevelOneElements, false);
            //drawLevelOneElements();
            //game_id=setInterval(game_loop, 50);
            /*Add event listener to the canvas */
            myGameCanvas.addEventListener('click', function(e){
                console.log('click: ' + e.offsetX + '/' + e.offsetY);
                var buttonHit = collides(StartButton, e.offsetX, e.offsetY);
                if(buttonHit){
                    alert('collision: ' + buttonHit.x + '/' + buttonHit.y);
                } else {
                    console.log('no collision');
                }
            }, false);
        } 
```

但是当我在浏览器中查看页面时，我仍然只显示带有开始按钮图像的画布，并且没有任何功能......即点击不会做任何事情......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:51:39.313

您必须听鼠标悬停事件，并且必须比较鼠标的坐标是否鼠标在按钮内（矩形）

[这里](http://jsfiddle.net/9WWqG/2/)有一篇不错的帖子，您必须在浏览器控制台中查看点击事件检测。如果你可以去控制台，你可能需要改变

console.log('碰撞：' + rect.x + '/' + rect.y);

到

alert('碰撞：' + rect.x + '/' + rect.y);

# python - Python 抽象编程

> ID：10269859
> 
> 赞同：3
> 
> 时间：2012-04-22T16:40:23.420
> 
> 标签：python

```
import math
class Point:

    def __init__(self,x,y):
        self.x = x
        self.y = y

    def move(self,x,y):
        self.x += x
        self.y += y

    def __str__(self):
        return "<"+ str(self.x) + "," + str(self.y) + ">"

class Shape:        
    def __init__(self, centrePoint, colour, width, height):
        self.centrePoint = centrePoint
        self.colour = colour
        self.width = width
        self.height = height
        self.type = "Square"

    def __init__(self, centrePoint, radius, colour):
        self.type = "Circle"
        self.radius = radius
        self.colour = colour
        self.centrePoint = centrePoint

    def move(self,x,y):
        self.centrePoint.move(x,y)

    def getArea(self):
        if (self.type == "Square"):
            return self.width * self.height
        elif (self.type == "Circle"):
            return math.pi*(self.radius**2)

    def __str__(self):
        return "Center Point: " + str(self.centrePoint) + "\nColour: "+ self.Colour + "\nType: " + self.type + "\nArea: " + self.getArea()

class Rectangle (Shape):

    def scale(self, factor):
        self.scaleVertically(factor)
        self.scaleHorizontally(factor)

    def scaleVertically(self, factor):
        self.height *= factor

    def scaleHorizontally(self, factor):
        self.width *= factor

class Circle (Shape):

    def scale(self, factor):
        self.radius * factor 
```

那是我到目前为止的代码，Shape 应该代表一个抽象类，而其他两个类应该从它继承，对我来说，它仍然看起来太难编码而不能成为抽象解决方案，我该如何改进？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T16:45:56.557

我会在抽象类中更改这部分：

```
def getArea(self):
    if (self.type == "Square"):
        return self.width * self.height
    elif (self.type == "Circle"):
        return math.pi*(self.radius**2) 
```

您可以在抽象类中指定默认值并覆盖 in`Rectangle`或 in 中的方法`Circle`。

[但是您可能会在https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)上得到更好的答案。

**更新（示例）：**

```
from abc import ABCMeta, abstractmethod

class Shape: 
  __metaclass__ = ABCMeta

  @abstractmethod
  def getArea(self):
    pass

class Rectangle (Shape):
  def getArea(self):
    return self.width * self.height

class Circle (Shape):
  def getArea(self):
    return math.pi*(self.radius**2) 
```

**更新 2（重载函数）**

就像**Ohad**写的那样，重载在 python 中不起作用这里是一个没有重载 init 函数的例子：

```
def Shape:
  def __init__(self, centrePoint, colour, **kwargs):
    self.centrePoint = centrePoint
    self.colour      = colour
    self.width       = kwargs.get('width')
    self.height      = kwargs.get('height')
    self.radius      = kwargs.get('radius') 
```

现在您可以使用

```
rect = Rectangle(0, "red", width=100, height=20)
circ = Circle(0, "blue", radius=5) 
```

`kwargs`一篇关于这里的好帖子：[什么是在 Python 中拥有多个构造函数的干净、pythonic 方式？](https://stackoverflow.com/questions/682504/what-is-a-clean-pythonic-way-to-have-multiple-constructors-in-python)

类型变量也无用，因为您可以使用它来识别类型：

```
>>> rect = Rectangle(...)
>>> print isinstance(rect, Rectangle)
True
>>> print isinstance(rect, Circle)
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:50:27.717

首先，请注意python中没有函数重载，因此：

```
class Shape:        
    def __init__(self, centrePoint, colour, width, height):
        ...

    def __init__(self, centrePoint, radius, colour):
        ... 
```

将使您的第一个功能被第二个“覆盖”。

作为一般的经验法则，通用 Base/Abstract 类的概念背后的主要思想是将实现与接口**分离**（注意 python 约定，函数名称的 lower_case_with_underscores，而不是 camleCase）：

```
class Shape: 
  __metaclass__ = ABCMeta

  @abstractmethod
  def get_area(self):
    pass

  move, scale, scale_vertically, scale_horizontally, print... 
```

现在我有了抽象但可操作的（如“每个形状都可以缩放、移动......”）基类，它完全不知道圆是如何构造、移动或缩放的。然后我可以开始实现子类：`Rectangle`，`Circle`，等等。

# python - BeautifulSoup 错误地解析页面并且找不到链接

> ID：10269860
> 
> 赞同：2
> 
> 时间：2012-04-22T16:40:23.793
> 
> 标签：python, html-parsing, beautifulsoup, urllib2, python-2.7

这是 python 2.7.2 中的一个简单代码，它获取站点并从给定站点获取所有链接：

```
import urllib2
from bs4 import BeautifulSoup

def getAllLinks(url):
    response = urllib2.urlopen(url)
    content = response.read()
    soup = BeautifulSoup(content, "html5lib")
    return soup.find_all("a")

links1 = getAllLinks('http://www.stanford.edu')
links2 = getAllLinks('http://med.stanford.edu/')

print len(links1)
print len(links2) 
```

问题是它在第二种情况下不起作用。它打印 102 和 0，而第二个站点上显然有链接。BeautifulSoup 不会引发解析错误，并且可以很好地打印标记。我怀疑这可能是由 med.stanford.edu 来源的第一行引起的，它说它是 xml（即使内容类型是：text/html）：

```
<?xml version="1.0" encoding="iso-8859-1"?> 
```

我不知道如何设置 Beautiful 以忽略它，或解决方法。我使用 html5lib 作为解析器，因为我遇到了默认的问题（不正确的标记）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:54:40.650

当一个文档声称是 XML 时，我发现 lxml 解析器给出了最好的结果。尝试您的代码但使用 lxml 解析器而不是 html5lib 会找到 300 个链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:00:27.043

您说得对，问题出`<?xml...`在线路上。忽略它很简单：只需跳过第一行内容，通过替换

```
 content = response.read() 
```

有类似的东西

```
 content = "\n".join(response.readlines()[1:]) 
```

在此更改后，`len(links2)`变为 300。

ETA：您可能希望有条件地执行此操作，因此您不必总是跳过第一行内容。一个例子是这样的：

```
content = response.read()
if content.startswith("<?xml"):
    content = "\n".join(content.split("\n")[1:]) 
```

# java - Java——从文件中读取。输入流与阅读器

> ID：10269862
> 
> 赞同：14
> 
> 时间：2012-04-22T16:40:48.243
> 
> 标签：java, text, inputstream

在我看到的从文件读取的每个 Java 实现中，我几乎总是看到一个文件读取器用于逐行读取。我的想法是，这将非常低效，因为它需要每行一个系统调用。

我一直在做的是使用输入流并直接获取字节。在我的实验中，这明显更快。我的测试是一个 1MB 的文件。

```
 //Stream method
    try {
        Long startTime = new Date().getTime();

        InputStream is = new FileInputStream("test");
        byte[] b = new byte[is.available()];
        is.read(b);
        String text = new String(b);
        //System.out.println(text);

        Long endTime = new Date().getTime();
        System.out.println("Text length: " + text.length() + ", Total time: " + (endTime - startTime));

    }
    catch (Exception e) {
        e.printStackTrace();
    }

    //Reader method
    try {
        Long startTime = new Date().getTime();

        BufferedReader br = new BufferedReader(new FileReader("test"));
        String line = null;
        StringBuilder sb = new StringBuilder();
        while ((line = br.readLine()) != null) {
            sb.append(line);
            sb.append("\n");
        }
        String text = sb.toString();

        Long endTime = new Date().getTime();
        System.out.println("Text length: " + text.length() + ", Total time: " + (endTime - startTime));

    }
    catch (Exception e) {
        e.printStackTrace();
    } 
```

这给出了以下结果：

```
Text length: 1054631, Total time: 9
Text length: 1034099, Total time: 22 
```

那么，为什么人们使用阅读器而不是流呢？

如果我有一个方法可以获取一个文本文件并返回一个包含所有文本的字符串，那么使用流是否一定会更好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T16:54:32.200

您正在将苹果与香蕉进行比较。即使使用缓冲读取器，一次读取一行的效率也会低于尽可能快地获取数据。请注意，不鼓励使用 available，因为它在所有情况下都不准确。当我开始使用密码流时，我自己发现了这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T16:49:09.450

`FileReader`通常与 a 一起使用，`BufferedReader`因为通常逐行读取文件是有意义的，特别是如果文件具有明确定义的记录结构，其中每条记录对应于一行。

此外，`FileReader`可以简化处理字符编码和转换的一些工作，如[javadocs](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html)中所述：

> 读取字符文件的便利类。此类的构造函数假定默认字符编码和默认字节缓冲区大小是适当的...... FileReader 用于读取字符流。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T16:53:19.453

尝试增加`BufferedReader`缓冲区大小。例如：

```
BufferedReader br = new BufferedReader(new FileReader("test"),2000000); 
```

如果您选择正确的缓冲区大小，您会更快。

然后在您的示例中与`Reader`您一起花时间填充 StringBuilder。如果需要处理行，则必须逐行读取文件。但是，如果您只需要读取字符串中的文本，那么读取更大的文本块`public int read(char[] cbuf)`并将这些块写入`StringWriter`具有适当大小的初始化。

选择使用`InputStream`与否`Reader`取决于性能。通常您`Reader`在阅读文本数据时使用，因为使用阅读器可以更轻松地处理字符集。

还有一点，你的代码在这里

```
byte[] b = new byte[is.available()];
is.read(b);
String text = new String(b); 
```

这是不正确的。[文档](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available%28%29)告诉_

> 请注意，虽然 InputStream 的某些实现会返回流中的字节总数，但许多不会。使用此方法的返回值来分配旨在保存此流中所有数据的缓冲区是不正确的。

所以要注意，你需要修复它。

# java - FileDialog 在 JApplet 中不起作用

> ID：10269866
> 
> 赞同：1
> 
> 时间：2012-04-22T16:41:09.723
> 
> 标签：java, swing, jfilechooser, japplet

我正在将应用程序从独立 (JFrame) 转换为 Applet (JApplet)。我已将 FileDialog 构造函数中的参数从父框架更改为 getContentPane，但这无法正常工作。我得到了类 Cast 异常，说不能将 Jpanel 转换为 Frame。

请找到SSCCE。请帮我解决这个问题。

```
public class SampleApplet extends JApplet{

protected JButton countryButton = new JButton("Select");

public synchronized void init()
{
    this.setBounds(new Rectangle(350,350));
    this.add(countryButton);

    countryButton.addActionListener(new ActionListener(){

        public void actionPerformed(ActionEvent arg0) {
            getCountries();
            getCountries();             
        }

    });
}

protected void getCountries() {
    FileDialog fileDialog_ImageIn = new FileDialog((Frame) getContentPane() ,"Select a GIF file", FileDialog.LOAD);
    fileDialog_ImageIn.setVisible(true);
    if (fileDialog_ImageIn.getFile() == null) 
        return;
    else
        System.out.println(fileDialog_ImageIn.getDirectory() + fileDialog_ImageIn.getFile());
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T16:54:44.470

> 我正在将应用程序从独立 (JFrame) 转换为 Applet (JApplet)。

不要那样做！相反，使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接启动框架。它将提供更好的用户体验，并且更易于开发和部署。

## 顺便提一句

1.  基于 Swing 的`JFileChooser`比基于 AWT 的更好（更可配置等）`FileDialog`。
2.  需要信任使用 JWS 启动的小程序或框架才能使用这些类中的任何一个。如果应用程序。JNLP API 是使用 JWS 启动的，JNLP API 提供了一种访问文件系统的方法，该方法甚至适用于完全沙盒代码，尽管它需要进行一些更改，因为它使用的机制不是我在上面提到的 2 个组件中的任何一个点1.这是一个小[演示。的 JNLP 文件服务](http://pscode.org/jws/api.html#fs)。尝试沙盒版本，看看它是否适用于您的用例。代码链接位于启动按钮的右侧。

# sql-server - 无法生成 SQL Server 的用户实例...保存解决方案后数据源服务器名称属性更改为点 (.)

> ID：10269868
> 
> 赞同：0
> 
> 时间：2012-04-22T16:41:19.397
> 
> 标签：sql-server, visual-studio-2010, connection, datasource

我们将 SQL Server 2012 Express 高级版与 Visual Studio 2010 Professional 一起使用。

在服务器资源管理器中，我们创建了一个到 SQL Server .mdf 文件的连接。我们将服务器名称设置为：

```
OURSERVER\SQLEXPRESS 
```

并附上 .mdf 文件。接下来，我单击了测试连接按钮以确保一切正常。我认为一切正常，然后单击“确定”按钮，然后单击“全部保存”图标。我还使用服务器资源管理器查看了数据库中的数据，以确保我们的应用程序能够访问它。我退出了VS2010。

后来我启动 VS2010 并注意到需要连接数据库，所以我单击图标连接到数据库，以为它会立即启动，但它没有。相反，我们看到一条消息指出：

```
Failed to generate a user instance of SQL Server... 
```

我们通过一些调查发现 VS2010 试图使用不同的数据源：

```
.\SQLEXPRESS 
```

我们的服务器名称已消失为一个点 (.)，因此我们尝试在“高级属性”对话框窗口中修改“数据源”属性，但该特定属性已被锁定，因此无法在其中输入任何内容。下拉列表中唯一的选择是 .\SQLEXPRESS 而不是我们的服务器名称。

我们将不胜感激所有帮助我们找到这个点（.）并将其替换为我们的服务器名称并阻止点（.）出现的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:41:23.597

找到的解决方案：

dot(.) 是通过以下步骤找到的：

*   在解决方案资源管理器中右键单击项目名称。
*   从弹出菜单中单击属性
*   单击已打开窗口左侧的“设置”选项卡。
*   在 Type 列中找到具有应用范围的 ConnectionString 的行。
*   单击该行的值列并更改数据源。

通过删除点（。）并用我们的服务器名称替换它来更改数据源后，问题就消失了。

希望这将帮助面临与我们相同问题的人。

# ios - Xcode-提交分数到GameCenter

> ID：10269869
> 
> 赞同：1
> 
> 时间：2012-04-22T16:41:21.300
> 
> 标签：ios, xcode, center, game-center

我有将我的分数提交到游戏中心的代码，但是每当我在游戏中心提交分数时，它说我的分数是 0。我不确定这是怎么发生的？我还导入了 GameKit 框架。

```
-(IBAction)submitScore{
    if (highscore>0) {
        GKScore *scoreReporter = [[[GKScore alloc] initWithCategory:@"MyLeaderBoardID"] autorelease];

        scoreReporter.value = [[NSNumber numberWithInt:highscore] longLongValue];
        NSLog(@"posted");
        NSLog(@"%i",highscore);

        [scoreReporter reportScoreWithCompletionHandler:^(NSError *error) {
            if (error != nil) {
                NSLog(@"failed!!!");
                NSLog(@"%i",highscore);
            } else {
                NSLog(@"Succeded");
            }
        }];
    } 
```

我也有用于登录的代码：

```
[[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error) {
    if (error == nil) {
        NSLog(@"authintication success");
    } else {
        NSLog(@"authintication failed");
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Game Center Disabled"
                                                        message:@"For Game Center make sure you have an account and you have a proper device connection."
                                                       delegate:self
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil];
        [alert show];
    }
}];

self.currentLeaderBoard = @"MyLeaderBoardID"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T19:22:51.700

仅供参考，你的分数是多少？

您应该有两个不同的变量来读取旧分数和新分数。如果您的新分数大于旧分数，则您希望将该 if 语句设置为 true。将其设置为大于零将使其在每次用户得分大于 0 时不断变化。

# python - 读取文件时丢弃'\ n'符号，python

> ID：10269871
> 
> 赞同：1
> 
> 时间：2012-04-22T16:41:30.657
> 
> 标签：python, parsing

我正在解析一个大文本文件，如果我只能以某种方式读取没有 '\n' 符号的行，我的生活会容易得多。例如：

```
Hello
World 
```

由 python 的`readLines()`as返回`{'Hello\n','World\n'}`，而我需要获取`{'Hello','World'}`. 有没有办法只读取打印的字符？

我知道可以使用正则表达式来完成，但我希望有一种更简单的方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T16:42:13.217

您可以使用该`rstrip()`功能来消除尾随换行符。对于您的具体示例：

```
In [9]: s = {'Hello\n','World\n'}

In [10]: s
Out[10]: set(['World\n', 'Hello\n'])

In [12]: for i in s:
   ....:     print i
World

Hello

In [13]: for i in s:
   ....:     print i.rstrip()

World
Hello 
```

更多信息在这里：[http ://docs.python.org/library/string.html](http://docs.python.org/library/string.html)

您可能会考虑在阅读文件时去掉换行符：

```
with open('data.txt') as infp:
   for line in infp:
       line = line.rstrip()
       # rest of processing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:59:46.310

```
with open('test_file.txt') as f:
    my_list = [line.rstrip() for line in f] 
```

如果您不想存储数据，而只想打印（或做任何您想做的事情）结果，您可以执行以下操作：

```
with open('test_file.txt') as f:
    for line in f:
        print line.rstrip() #or do whatever you want to 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T18:11:57.043

您也可以使用切片删除换行符：

```
s = "Hello\n"  
print s[:-1]  
"Hello" 
```

# replace - 用平均值替换缺失值（Weka）

> ID：10269884
> 
> 赞同：0
> 
> 时间：2012-04-22T16:42:55.450
> 
> 标签：replace, weka, missing-data

在 Weka 中有一个名为“ReplaceMissingValues”的过滤器，它允许使用每个属性的平均值替换数据集中的所有缺失值。我想使用属于某个类的值的平均值来替换某个属性的缺失值。例如，在二进制数据集中，我认为使用仅使用属于正类的记录计算的平均值来替换属于正类的记录中属性的缺失值更正确。那么怎么可能实现呢？我们如何仅替换属于某个类的记录的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:08:14.923

如果您想通过获取从特定 A 类的训练实例计算的平均值来替换 A 类的缺失值，那么您就是在“偏向”您的数据集。为避免偏差（最终会使您的训练模型过拟合），明智的做法是使用默认的“替换缺失值”功能——即考虑所有训练实例的均值和模式，而不仅仅是特定类。

# php - scandir 错误：为 foreach() 提供的参数无效

> ID：10269885
> 
> 赞同：-2
> 
> 时间：2012-04-22T16:42:57.200
> 
> 标签：php

任何人都可以帮我解决这个代码吗？我似乎无法让它工作！

```
<?php
$file = scandir("../");

foreach ($files as $file) {
    if(is_dir($file) && $file != '.' && $file != '..' && $file != 'images') {
        $folders++; // Counter
    } elseif(is_file($file) && $file != '.' && $file != '..' && $file != 'index.php') {
        $total++; // Counter
    }
}

echo "$folders folders · $total files";
?> 
```

我得到的错误是：

> 为 foreach() 提供的参数无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:46:14.093

```
error_reporting(E_ALL); 
```

在所有代码的顶部总是有帮助

好吧，如果您收到 foreach 错误但没有错误`Undefined variable: files`- 似乎您`$files`在 scandir 和循环之间的变量上做了一些邪恶的事情。

或者你只是在愚弄每个运行其他代码的人，而不是在这里发布的代码。

# c# - 将 xml 文件从 URL 加载到 XDocument

> ID：10269889
> 
> 赞同：0
> 
> 时间：2012-04-22T16:43:13.917
> 
> 标签：c#, xml, windows-phone-7, rss, linq-to-xml

抱歉，如果这有点简单，但我对 C# 很陌生。在 WP7 应用程序中，我正在尝试使用 XDocument.Load() 方法将 XML 文件（特别是 Blogger 提要）加载到 XDocument 中。但是，当我尝试以下操作时：

```
XDocument data = XDocument.Load("http://destroyedordamaged.blogspot.com/feeds/posts/default"); 
```

我得到错误：

*无法打开“http://destroyedordamaged.blogspot.com/feeds/posts/default”。Uri 参数必须是指向 Silverlight 应用程序 XAP 包内内容的相对路径。如果您需要从任意 Uri 加载内容，请参阅使用 WebClient/HttpWebRequest 加载 XML 内容的文档*

所以我环顾四周，发现有人建议我这样做：

```
WebClient wc = new WebClient();
wc.OpenReadCompleted += wc_OpenReadCompleted;
wc.OpenReadAsync(new Uri("http://destroyedordamaged.blogspot.com/feeds/posts/default")); 
```

和：

```
private void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            Console.WriteLine("THERE IS AN ERROR: "+e.Error.Message);
            return;
        }
        using (Stream s = e.Result)
        {
            data = XDocument.Load(s);
        }
    } 
```

但这似乎也不起作用。它不会将任何内容加载到 XDocument 中。我在这里缺少什么吗？我想找出将 xml 从提要加载到 XDocument 的最简单方法。

我环顾四周，但似乎每个遇到此类问题的人都将他们的代码指向特定的 .xml 文件，而不是像我这样没有扩展名的 URL。

我很感激你能提供的任何意见。提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:49:16.903

尝试使用`DownloadStringAsync`而不是`OpenReadAsync`：

```
var webClient = new WebClient();
webClient.DownloadStringCompleted += RequestCompleted;
webClient.DownloadStringAsync(new Uri(SOURCE)); 
```

和`RequestCompleted`代码：

```
 private void RequestCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            var feedXml = XDocument.Parse(e.Result);
            // (...)
        }
    } 
```

我前段时间在我的应用程序中使用过它，所以我很确定它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:30:31.127

查看天气预报示例和 Windows Phone 代码示例。我使用这个示例来熟悉如何做这些事情。下载源代码并查看 Forecast.cs。

[示例代码链接](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)

# php - 用 php+nusoap 发送 arryofstring

> ID：10269892
> 
> 赞同：0
> 
> 时间：2012-04-22T16:43:42.743
> 
> 标签：php, soap

我有一个带有 arrayofstrings 字段的 SOAP 网络服务`newSettings`，我正在尝试使用 nusoap 将其作为普通字符串数组发送，但它不起作用，有什么建议吗？

我的代码：

```
$settings=array('password','composefontsize');
$param=array(
'EmailAddress'=> $userEmail,
'newSettings' => $settings 
);

$response=$this->client->call("GetRequestedUserSettings",$param); 
```

我的 XML 请求：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns6388="http://tempuri.org">
<SOAP-ENV:Body><GetRequestedUserSettings xmlns="http://tempuri.org/">
<AuthUserName>admin</AuthUserName>
<AuthPassword>XXXX</AuthPassword>
<EmailAddress>xxx@xxx</EmailAddress>
<requestedSettings></requestedSettings>
</GetRequestedUserSettings>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope>" 
```

* * *

**更新**：我用`$settings = array('string' => $value1,...)`;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:00:20.380

您可以将soap调用包装在：

```
try { 
    // ... 
} catch (SoapFault $e) { 
    echo $e->faultcode; 
} 
```

这样，如果您不符合 WSDL 规范或服务器超时，您就会意识到问题所在。我相信这是使用 SOAP 时必须的。

# sql-server-2008 - 如何在参数中为空值设置一些东西

> ID：10269893
> 
> 赞同：1
> 
> 时间：2012-04-22T16:43:56.743
> 
> 标签：sql-server-2008, stored-procedures, null

我在我的一个应用程序中使用以下程序

```
ALTER procedure [dbo].[FeeRecordSelect]
@GRNo varchar(4),
@PaymentModeId numeric(2) output
as
begin
SELECT @PaymentModeId = Students.PaymentModeId FROM Students where Students.GRNo = @GRNo
end 
GO 
```

我的问题是：如果我没有得到 @GRNo 的结果，我想在 @PaymentModeId 中选择 1

我已经试过了

```
create procedure [dbo].[FeeRecordSelect10]
@GRNo varchar(4),
@PaymentModeId numeric(2) output
as
begin
SELECT @PaymentModeId = isnull(Students.PaymentModeId, 1) FROM Students where Students.GRNo = @GRNo
end 
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:53:52.357

IsNull() 不起作用的原因是结果集不包含任何行。

```
ALTER procedure [dbo].[FeeRecordSelect]  
@GRNo varchar(4),  
@PaymentModeId numeric(2) output
as  
begin  
set @PaymentModeId = isnull((select Students.PaymentModeId FROM Students where Students.GRNo = @GRNo), 1)
end   
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T16:46:59.567

@PaymentModeID只有在选择中返回至少一行时，才会设置。

放

```
Set @PaymentModeId = 1 
```

在选择之前将默认值设置为1。现在如果没有选择行，它仍然会返回1。

编辑：

```
ALTER procedure [dbo].[FeeRecordSelect]
@GRNo varchar(4),
@PaymentModeId numeric(2) output
as
begin

Set @PaymentModeId = 1    

SELECT @PaymentModeId = Students.PaymentModeId FROM Students where Students.GRNo = @GRNo
end 
GO 
```

# javascript - 对于函数的每次迭代，如何从数组中输出不同的值；

> ID：10269898
> 
> 赞同：1
> 
> 时间：2012-04-22T16:44:53.390
> 
> 标签：javascript, arrays, function, animation, raphael

所以在这里我有一个函数drawgrowthpie，它有一个函数段，它绘制一个饼图。（这直接取自 raphaeljs.com 上的示例页面之一）。我希望饼图的每个部分都有自己的颜色。我有一个数组 clr，我想将它分配给每个段的每个 hsb 属性，但我是个笨蛋，只能弄清楚如何在我的数组中分配一个变量。有人可以帮我指出正确的方向吗？

你可以在这里看到我在说什么：http: [//jsfiddle.net/6hzfH/](http://jsfiddle.net/6hzfH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:55:22.887

给定该代码，只需向`segment`函数传递一个附加参数，即当前迭代，并使用它来寻址`clr`数组。你可以[在这里查看](http://jsfiddle.net/DgrgC/ "这里")

# android - 在此代码中的输入值上插入一个控件

> ID：10269903
> 
> 赞同：1
> 
> 时间：2012-04-22T16:45:55.790
> 
> 标签：android

```
button = new Button (this);
button.setText("Insert values");
tableLayout.addView(secondo);

button.setOnClickListener(new OnClickListener(){
    public void onClick(View arg0) {
        for(int i = 0; i < r1; i++){
            for(int j = 0; j < c1;  j++){
                //insert values from a matrix of edittext in array      
                array[t] = Integer.parseInt(values[i][j].getText().toString()); 
                t++;
            }
        }
    }       
}); 
```

我想在这段代码中通过edittext对值的输入进行控制，当输入中的值不正确时向我显示警报，因为现在当输入不正确时应用程序崩溃。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:04:58.790

```
try {
    for(int i = 0; i < r1; i++){
        for(int j = 0; j < c1;  j++){
            //insert values from a matrix of edittext in array
            array[t] = Integer.parseInt(values[i][j].getText().toString());
            t++;
        }
    }
}
catch(NumberFormatException nfe) {
    AlertDialog.Builder builder;
    builder = new AlertDialog.Builder(MyActivityClassName.this);
    builder.setTitle("Error");
    builder.setMessage("Wrong input format"); 
    builder.setIcon(android.R.drawable.ic_dialog_alert);
    builder.setNeutralButton("OK", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
        }
    });
    builder.show();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:06:54.577

有两种方法可以处理它：

一个你不会允许用户输入错误的输入。如果您的输入是预定义类型之一，则为 EditText设置[输入类型会有所帮助。](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)如果这还不够，您可以尝试[TextView 的 addTextChangedListener](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)。由于`EditText`扩展`TextView`，您也可以使用它`EditText`。

其次，如果您想在用户按下按钮后检查有效性，那么您必须通过捕获等来确定输入是否无效。然后如果您不使用，您可以通过调用[showDialog](http://developer.android.com/reference/android/app/Activity.html#showDialog%28int%29)`NumberFormatException`在处理程序中向用户显示一个对话框如果您使用的是片段，则为片段和[DialogFragment 。](http://developer.android.com/reference/android/app/DialogFragment.html)`onClick`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T16:58:58.293

试试这个

```
final EditText enterABC = (EditText) findViewById(R.id.userinput_no_edittext);
Button okButton = (Button) findViewById(R.id.userinput_ok_button);
okButton.setOnClickListener(new OnClickListener() {
@Override
public void onClick(View v) {
// read from EditText when user presses OK button
    mVariable = enterABC.getText().toString();
 }
}); 
```

如果您对代码有任何问题，请给我留言。

# iphone - 如何阻止 UIScrollView 阻止 GLKViewController 的 OpenGL ES 2.0 动画内容？

> ID：10269906
> 
> 赞同：2
> 
> 时间：2012-04-22T16:46:10.503
> 
> 标签：iphone, ios, ipad, opengl-es-2.0, glkit

我尝试了一切：

1.在 UITrackingRunLoopMode 中使用重复的 NSTimers 并手动强制当前 GLKView 的 drawInRect。即使方法不断被调用，它也不会更新任何内容；

2.使用带有“dispatch_async”的调度队列，它不会绘制我的OpenGL内容。

我看到的关于 UIScrollView 和 OpenGL 的每个示例都通过更改 CADisplayLink 的默认运行循环来处理该问题，这是我没有与 GLKViewController 一起使用的东西。

有人也遇到过这个问题吗？

任何见解都会很棒:)

在此先感谢，努诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T03:50:09.757

我找到的一种解决方案是将视图控制器分配为滚动视图委托并根据需要调用绘图方法：

```
(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    GLKView *view = (GLKView *)self.view;
    [self glkView:view drawInRect:view.frame];
} 
```

# java - 如何在 twitter4j 中使用 oAuth？

> ID：10269910
> 
> 赞同：1
> 
> 时间：2012-04-22T16:46:54.280
> 
> 标签：java, twitter, oauth, twitter4j

我第一次尝试使用名为“Twitter4J”的 twitter API，我查看了教程，但从外观上看，它们仍然使用 twitter 摆脱并被 oAuth 取代的基本身份验证。

我使用 java 并将应用程序编写为 java 应用程序（而不是 web 应用程序）。有没有人可能对 twitter4J 和 oAuth 有一些经验？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:10:20.323

互联网上有很多例子。这些对我特别有帮助：http: [//twitter4j.org/en/code-examples.html](http://twitter4j.org/en/code-examples.html)和 [http://twitter4j.org/en/configuration.html](http://twitter4j.org/en/configuration.html)

# apache-flex - Adobe Flex：当项目变得可见时调用的函数？

> ID：10269913
> 
> 赞同：0
> 
> 时间：2012-04-22T16:47:03.180
> 
> 标签：apache-flex, flex4, flex3, flash-builder

我正在使用 FlashBuilder 4.6 开发 Flex 应用程序。我想知道当组件（在我的情况下是选项卡式对话框 mx:TabNavigator 上的选项卡）对用户可见时是否调用了一个函数？我尝试了creationComplete，当用户单击它们时，它会在我的对话框中调用第二个和第三个选项卡，但是当整个应用程序打开时，即在第一个选项卡可见之前，它会调用第一个选项卡。

谢谢你，弗雷德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:05:23.443

InitializationComplete() 是在选项卡（容器）的子项已完全初始化时调用的函数。我通常在作为 ViewStack 类/子类的子类的 Container 中覆盖此函数，以便在*首次*演出时进行设置。您还可以监听 show 事件以在后续节目中运行代码。出于某种原因，Flex 团队决定组件第一次展示时，它不是展示。

但是，您的问题可能与未充分利用组件生命周期有关。完整的上下文是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T17:13:21.900

不知道您使用的是哪个特定容器，但它们都有某种事件的变体：**IndexChangedEvent.CHILD_INDEX_CHANGE**

这是在 halo:Container 上触发的，它是 TabNav、ViewStack 等的基础。火花/空气等价物应该有类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T05:13:46.887

您可以为其创建完成添加一个 eventListener 或单击事件及其索引，并向其写入特定操作。可根据要求提供代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T13:54:53.377

每个 UIComponent 都有 Show Event，因此您可以监听它以了解 ViewStack 中的特定内容何时可见。

# gcc - 程序集源无法正确传递参数

> ID：10269920
> 
> 赞同：0
> 
> 时间：2012-04-22T16:47:53.243
> 
> 标签：gcc, assembly, nasm

我有两个源文件，一个在汇编中，一个在 c 中。该程序集包含对 c 源代码中的静态字符串的引用。我在程序集中定义了一个从 c 源代码调用的函数，它工作正常，没有任何问题。但是，当我尝试从程序集中调用 printf 并将 c 源文件中的字符串作为参数传递时，我得到了乱码输出或根本没有输出。

我使用nasm将程序集编译成elf32-i386，使用gcc编译c文件。幸运的是，我尝试过使用和不使用调试信息并得到相同的结果。

以下是简单的源文件：

电源：

```
SECTION .text

global s_func
extern c_str
extern printf

s_func:
    sub esp, 4
    mov dword [esp], c_str
    call printf
    add esp, 4
    ret 
```

主.c：

```
#include <stdio.h>
const char* c_str = "Sup."; 
extern void s_func(void);

int main(void)
{
    printf(c_str); //prints as expected
    s_func(); //weird stuff
} 
```

生成文件：

```
main : main.o main.s.o
    gcc main.o main.s.o -o main

main.o :
    gcc -g -c main.c -o main.o
main.s.o :
    nasm -f elf main.s -o main.s.o 
```

这是让我印象深刻的部分，如果你将这两个文件编译成对象然后将它们链接在一起，你会发现对 printf 的调用没有什么不同，无论是源代码。代码段相同，并且 c_str 在两个汇编列表中包含相同的地址。

在 main.c 中调用：

```
 printf(c_str); //prints as expected
 80483ed:   a1 14 a0 04 08          mov    0x804a014,%eax
 80483f2:   89 04 24                mov    %eax,(%esp)
 80483f5:   e8 06 ff ff ff          call   8048300 <printf@plt> 
```

调用 main.s

```
08048410 <s_func>:
 8048410:   83 ec 04                sub    $0x4,%esp
 8048413:   b8 14 a0 04 08          mov    $0x804a014,%eax
 8048418:   89 04 24                mov    %eax,(%esp)
 804841b:   e8 e0 fe ff ff          call   8048300 <printf@plt>
 8048420:   83 c4 04                add    $0x4,%esp
 8048423:   c3                      ret 
```

也许我想保留一些寄存器？我已经在 s_func 上设置了一个正常的堆栈帧，但是它仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:58:09.067

我认为链接目标文件时存在问题（由于在程序集中使用了打印）。

我认为最好的方法是创建一个 GAS 程序集，其中包含一个使用 c 库的 printf 的函数，然后使用“as”命令来组装文件。

然后使用 gcc 编译器编译 c 代码并使用以下命令将 GAS 创建的目标文件链接在一行中。

如果 GAS 创建的目标文件是 main_s.o，

```
gcc main_c.c main_s.o -o main 
```

所以 gcc 首先创建 main_c.c 的对象格式，然后链接 main_c.o 和 main_s.o，它会给出当前链接的 elf 文件。

# scala - 在 play 2.0 scala 应用程序中使用正确的 servlet 过滤器集成circumflex-orm

> ID：10269926
> 
> 赞同：0
> 
> 时间：2012-04-22T16:48:35.773
> 
> 标签：scala, orm, playframework-2.0, circumflex-orm

我正在尝试将circumflex-orm 集成到 play-2.0 scala 应用程序中。只要我可以检索元素并将其保存到数据库中，它就可以工作。不起作用的是缓存处理 - 事务管理。

例如，检索对象列表，更改一个，将其存储到数据库中工作正常。但是，如果我再次检索相同的列表，我的对象并没有改变。它的含义没有变化，它确实在数据库中发生了变化，但是缓存对此一无所知。

我确实在 circurmflex 小组中发布了一个问题，他们说他们使用 servletfilter 来做到这一点（这是它的实际代码：（[circumflex-orm 事务集成](http://circumflex.ru/api/2.1/circumflex-web/src/main/scala/filter.scala.html)- 查看主生命周期）。这样的事情就足够了：

```
class CircumflexContextFilter extends ServletFilter {

  import ru.circumflex.core._

  def doFilter(req: ServletRequest, res: ServletResponse, chain: FilterChain) {
    Context.executeInNew { ctx =>
      chain.doFilter(req, res)
    }
  } 
} 
```

但我不知道如何将其集成到 play 2.0 应用程序中。

提前致谢， 斯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:54:21.193

结果比我想象的要容易，irc 的一个人（感谢 noelw）向我指出了这些文档：[scala action composition](http://www.playframework.org/documentation/2.0/ScalaActionsComposition)通读 答案尽可能简单：

首先，像这样编写自己的动作类：

```
import play.api.mvc.Action
import play.api.mvc.Request
import play.api.mvc.Result
import ru.circumflex.core.Context

case class ScircumflexOrmActionWrapper[A](action: Action[A]) extends Action[A] {

  def apply(request: Request[A]): Result = {
    Context.executeInNew { ctx =>
      action(request)
    }
  }

  lazy val parser = action.parser
} 
```

然后像这样调用你的动作：

```
def index = ScircumflexOrmActionWrapper { Action { 
  val taskDbObj = Task AS "taskDb"
  val tasks = SELECT(taskDbObj.*).FROM(taskDbObj).ORDER_BY(taskDbObj.createdAt DESC).list 
  Ok(html.task.index(tasks))
}} 
```

就是这样。如果有人感兴趣，我还写了一篇关于将circumflex-orm 集成到游戏中的帖子：[integrated circumflex-orm in play 2.0 - scala](http://blog.sveri.de/2012/04/19/integrate-circumflex-orm-into-play-2-0-using-scala/)

# python - 公切函数

> ID：10269930
> 
> 赞同：4
> 
> 时间：2012-04-22T16:48:46.580
> 
> 标签：python, mathematical-optimization

我在 Python 中有一个有趣的问题，我有两个函数（任意），我想找到它们之间的公切线，以及公切线接触每个函数的 x 轴上的点。理想情况下，会有一个函数给出*所有*坐标（想象一组非常弯曲的函数，具有多种解决方案）。

所以，我有一些可行的方法，但它非常粗糙。我所做的是将每个函数放入一个矩阵中，因此`M[h,0]`包含 x 值，`M[h,1]`是 function1 y 值，`M[h,2]`是 function2 y 值。然后我找到导数并将其放在一个新矩阵中`D[h,1]`并且`D[h,2]`(span 比 小一`M[h,:]`。我的想法是基本上“绘制”x 轴上的斜率和 y 轴上的截距，并搜索所有这些点对于最接近的对，然后给出值。

这里有两个问题：

1.  程序不知道最接近的对是否是解决方案，并且

2.  它非常缓慢（numb_of_points^2 搜索）。我意识到一些优化库可能会有所帮助，但我担心他们会专注于一种解决方案而忽略其余的解决方案。

任何人都认为最好的方法来做到这一点？我的“代码”在这里：

```
def common_tangent(T):
    x_points = 600
    x_start = 0.0001 
    x_end = 0.9999
    M = zeros(((x_points+1),5) )
    for h in range(M.shape[0]):
        M[h,0] = x_start + ((x_end-x_start)/x_points)*(h) # populate matrix
        """ Some function 1 """
        M[h,1] = T*M[h,0]**2 + 56 + log(M[h,0])
        """ Some function 2 """
        M[h,2] = 5*T*M[h,0]**3 + T*M[h,0]**2 - log(M[h,0])
    der1 = ediff1d(M[:,1])*x_points # derivative of the first function
    der2 = ediff1d(M[:,2])*x_points # derivative of the second function
    D = zeros(((x_points),9) )
    for h in range(D.shape[0]):
        D[h,0] = (M[h,0]+M[h+1,0])/2 # for the der matric, find the point between
        D[h,1] = der1[h] # slope m_1 at this point
        D[h,2] = der2[h] # slope m_2 at this point
        D[h,3] = (M[h,1]+M[h+1,1])/2# average y_1 here
        D[h,4] = (M[h,2]+M[h+1,2])/2# average y_2 here
        D[h,5] = D[h,3] - D[h,1]*D[h,0] # y-intercept 1
        D[h,6] = D[h,4] - D[h,2]*D[h,0] # y-intercept 2
    monitor_distance = 5000 # some starting number
    for h in range(D.shape[0]):
        for w in range(D.shape[0]):
            distance = sqrt( #in "slope intercept space" find distance
                (D[w,6] - D[h,5])**2 +
                (D[w,2] - D[h,1])**2
                )
            if distance < monitor_distance: # do until the closest is found
                monitor_distance = distance
                fraction1 = D[h,0]
                fraction2 = D[w,0]
                slope_02 = D[w,2]
                slope_01 = D[h,1]
                intercept_01 = D[h,5]
                intercept_02 = D[w,6]
    return (fraction1, fraction2) 
```

这在材料科学中有很多应用，在寻找多个吉布函数之间的公切线以计算相图。如果能有一个强大的功能供所有人使用，那就太好了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:11:42.283

您可以通过曲线 A 的点，并在每个点绘制切线并计算它与曲线 B 交叉的次数。如果交叉的次数向上或向下跳跃两次，那么您知道您刚刚通过了相互切线。这仍然很粗略，但我想它会比你原来的提议快一些，只是因为你不需要曲线 B 上的很多样本点来计算曲线穿过给定切线的次数。（只需计算曲线 B 在线上方和下方切换的次数。）

（当然，如果您的样本太少，您可能会错过双切线附近的一对交叉点，但这很好，您仍然会接近双切线。您可以并且应该添加单独的估计 -一旦你非常接近真正的双切线，你就可以使用细化算法。你可以使用类似于牛顿法、递归二分法等的东西。）

如果你更认真，我发现[这个更复杂的讨论](http://www.cis.uab.edu/jj/papers/tangentSpace/jj01smi.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T22:21:48.867

您可以使用[勒让德变换](http://www.physics.wustl.edu/alford/physics/legendre.pdf)将问题转换为解决两条曲线的交点，而不是解决公切问题。一旦你这样做了，你可以通过使用你找到的相等性作为两个原始函数必须满足的条件来获得“公共切线区域”。

# php - Php：如何计算两个“相似”对象数组之间的差异？

> ID：10269932
> 
> 赞同：2
> 
> 时间：2012-04-22T16:49:02.660
> 
> 标签：php, multidimensional-array

我有一个对象数组，`$tab`它们是表的“行”（即您可以通过 " 访问每一列`$tab[$i]->columnname`。

我有另一个对象数组，`$tab_json`它是 AJAX 调用的返回，它也包含*表*的“行”（即您可以通过“访问每一列” `$tab_json[$i]->columnname`。

**两个**数组都包含完全相同的列，但我只想“猜测”其中的`$tab`哪些**不**存在于`$tab_json`.

当然，我知道[array-intersect](http://www.php.net/manual/fr/function.array-intersect.php)和[array-diff](http://php.net/manual/fr/function.array-diff.php)函数，但它们在对象比较上似乎效果不佳。除非我错了？

这是我想要工作的示例，但有一个 PHP 例外：

```
tab_json = PHP Catchable fatal error:  Object of class stdClass could not be converted to string in sample.php on line 112 
```

只需复制粘贴并将其运行到文件中 ( `php -f filename.php`)。知道我该怎么做吗？

```
<?php
$tab = array(
    (object)array(
        'id'          => 1,
        'titre'       => "Anchois",
        'attributs'   => array()
    ),  
    (object)array(
        'id'          => 4,
        'titre'       => "Jambon",
        'attributs'   => array()
    ),  
    (object)array(
        'id'           => 12, 
        'titre'        => "La Cabro d'or",
        'attributs'    => array(
            (object)array("id" => 1), 
            (object)array("id" => 8)
        )   
    )   
);

$tab_json = array (
    (object)array(
        'id' => 1,
        'titre' => 'Anchois',
        'attributs' =>
        array (
        ),  
    ),  
    (object)array(
        'id' => 4,
        'titre' => 'Jambon',
        'attributs' =>
        array (
        ),  
    ),  
    (object)array(
        'id' => 12, 
        'titre' => 'La Cabro d\'or',
        'attributs' =>
        array (
        ),  
    ),  
    (object)array(
        'id' => 25, 
        'titre' => 'Vin rouge ou rosé',
        'attributs' =>
        array (
        ),  
    ),  
    (object)array(
        'id' => 22, 
        'titre' => 'Crème oignons lardons',
        'attributs' =>
        array (
            (object)array(
                'id' => 1,
            ),  
            (object)array(
                'id' => 2,
            ),  
        ),  
    )   
);
echo "tab = "; var_export($tab); echo "\n";
echo "tab_json = "; var_export($tab_json); echo "\n";
echo "tab_json = "; var_export(array_diff($tab_json,$tab)); echo "\n";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T16:54:11.287

您可以使用`array_udiff`：

```
$difference = array_udiff($tab, $tab_json, function($a, $b) {
    return $a == $b;
}); 
```

`array_diff`不能使用simple ，因为它只比较相同的字符串值。运行此示例需要 PHP 5.3，但您可以将其调整为 PHP 5.2，将闭包移动到外部函数并将其名称作为第三个参数传递给`array_udiff`.

注意`array_udiff`事项的顺序。如果你`$tab_json`先通过，你会得到不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:29:57.093

我创建了似乎比较“ok”的函数：我“连接”两个数组的属性以创建“字符串”，然后使用 strcmp() 函数返回结果。因此，当值不同时，它们将更改为字符串，而当涉及“子”数组时，它们将转换为字符串 =“ `Array`”，因此比较 == 0，因此“子”数组被忽略（即正是我想要的）。

有用。如果你发现一个例子可以告诉我它不起作用，请在评论中与我分享。谢谢！

```
$difference = array_udiff($tab_json, $tab, function($a, $b) {
    $d=array_diff_assoc(get_object_vars($a), get_object_vars($b));
    if (count($d)>0) {
        $s0='';
        $s1='';
        foreach ($d as $k=>$val) {
            $r0=(string)$val;
            $r1=(string)$b->$k;
            $l0 = mb_strlen($r0);
            $l1 = mb_strlen($r1);
            for (;$l0<$l1;$l0++) {
                $r0=' '.$r0;
            }   
            for (;$l1<$l0;$l1++) {
                $r1=' '.$r1;
            }   
            $s0.=$r0;
            $s1.=$r1;
        }   
        return strcmp($s0,$s1);
    }   
    return 0;
});
echo "difference = "; var_export($difference); echo "\n"; 
```

# c#-4.0 - c#, GenericRepository,Service Layer

> ID：10269939
> 
> 赞同：0
> 
> 时间：2012-04-22T16:49:15.520
> 
> 标签：c#-4.0

我在 GenericRepository 类中有这个方法：

```
public virtual IEnumerable<TEntity> Get(
            Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
           string includeProperties = "") {...} 
```

在服务层我有：

```
IAdsRepository _adsRepository;

        public AdsService(IAdsRepository adsRepository)
        {
            _adsRepository= adsRepository;
        }

public IEnumerable<Ads> GetAllAds(....)
         {
             return _adsRepository.GetAll(....);
         } 
```

（我有一个存储库来指定 genericRepository ）

有人知道如何将参数传递给方法 Get() 吗？

非常感谢您，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:02:09.460

第一个参数`Expression<Func<TEntity, bool>> filter`采用过滤器函数，该函数将 TEntity 作为参数并返回一个布尔值，如果该实体应包含在结果中，则该布尔值为真。例如，`x => x.Value > 7`可以传递以返回所有大于 7`Get`的 TEntities 。`Value`

第二个参数将一个 IQueryable 作为参数并返回一个 IOrderedQueryable（即定义排序顺序的位置）例如`x => x.OrderBy(y => y.Value)`将结果按`Value`.

例如然后；

```
repository.Get( x => x.Value > 7, x => x.OrderBy(y => y.Value)); 
```

将返回所有`Value`大于 7 的实体，按值排序。

# c++ - C++ 中的静态成员数组

> ID：10269942
> 
> 赞同：4
> 
> 时间：2012-04-22T16:49:23.607
> 
> 标签：c++, arrays, linker, static-members

我在名为的类中创建了一个静态成员数组`GTAODV`。

```
static int numdetections[MAXNODES]; 
```

但是，当我尝试在类方法中访问这个数组时（下面的示例），

```
 numdetections[nb->nb_addr]++;
 for(int i=0; i<MAXNODES; i++) if (numdetections[i] != 0) printf("Number of detections of %d = %d\n", i, numdetections[i]); 
```

链接器在编译过程中出错：

```
gtaodv/gtaodv.o: In function `GTAODV::command(int, char const* const*)':
gtaodv.cc:(.text+0xbe): undefined reference to `GTAODV::numdetections'
gtaodv.cc:(.text+0xcc): undefined reference to `GTAODV::numdetections'
gtaodv/gtaodv.o: In function `GTAODV::check_malicious(GTAODV_Neighbor*)':
gtaodv.cc:(.text+0x326c): undefined reference to `GTAODV::numdetections'
gtaodv.cc:(.text+0x3276): undefined reference to `GTAODV::numdetections'
collect2: ld returned 1 exit status 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-22T16:55:07.503

发生此错误时，您很可能忘记定义静态成员。假设在您的类定义中：

```
class GTAODV {
public:
    static int numdetections[MAXNODES]; // static member declaration
    [...]
}; 
```

在一个源文件中：

```
int GTAODV::numdetections[] = {0}; // static member definition 
```

注意类中声明之外的定义。

**编辑**这应该回答有关“为什么”的问题：静态成员可以在不存在具体对象的情况下存在，即您可以`numdetections`在不实例化**任何**对象的情况下使用`GTAODV`. 要启用此外部链接必须是可能的，因此必须存在静态变量的定义，以供参考：[静态数据成员（仅限 C++）](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr038.htm)。

# javascript - 如何“连接”克隆元素，以便将应用于原始元素的更改也应用于克隆元素？

> ID：10269946
> 
> 赞同：1
> 
> 时间：2012-04-22T16:50:00.407
> 
> 标签：javascript, jquery, clone

我有这种情况（为了这个问题，它非常简化）：

```
var original_div = $('<div></div>');
var clone_div = original_div.clone();
original_div.width(300); 
```

有什么办法可以自动获得`clone_div`与 相同的宽度`original_div`？我说的是宽度，但解决方案通常适用于所有属性......

这可能吗 ？我会很高兴任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T17:34:01.713

创建一个包含两个原始元素的新元素集合，这样您就可以修改集合，并且两个原始元素都会更改：

```
var original_div = $('<div></div>');
var clone_div = original_div.clone();
var both_div = original_div.add(clone_div);

both_div.width(300);

console.log(original_div.width());
console.log(clone_div.width()); 
```

[小提琴](http://jsfiddle.net/adeneo/gE4SY/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:37:15.370

1.  您可以使用 data() 来存储一个对另一个 div 的引用，例如

    original_div.data('克隆', clone_div)

然后在设置宽度时检查 value。

1.  您可以为原始和单独添加一个类，使用该选择器来更改两者的宽度。

# html - Robots.txt / 如何从搜索引擎中隐藏单个 HTML 标签？

> ID：10269947
> 
> 赞同：-1
> 
> 时间：2012-04-22T16:50:01.513
> 
> 标签：html, seo, hide, robots.txt

我正在构建一个单页投资组合，其底部有一个联系表格/部分。在我的表格旁边，我列出了我可以提供的大多数服务。然而，这会产生许多相同类型的关键词，因此我开始想知道如何从搜索引擎中隐藏该部分。

我的第一个想法是使用 robots.txt，但如果你有更好的想法，请让我知道。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T19:16:08.147

如果您向搜索引擎隐藏该内容，您将要做的就是“伪装”。伪装是为搜索引擎提供不同的内容，然后是为用户提供的内容。这是黑帽搜索引擎优化，如果你这样做会**被禁止。**

仅供参考，没有“关键字太多”之类的东西。一个页面可以为无限数量的搜索词排名。加上页面内容只是众多排名信号之一。因此，列出所有服务是*一件好事*。如果您删除它们，您的网站就会变得不那么显眼，而不是更多。

# java - 使用 Javascript 将文件加载到小程序

> ID：10269949
> 
> 赞同：1
> 
> 时间：2012-04-22T16:50:23.057
> 
> 标签：java, javascript, applet

我正在使用 JS 和 Applet 开发一种 WebApp（这是一个家庭作业）。该应用程序的想法是：用户加载文件和私钥。系统（客户端）对文件进行哈希和签名（使用 RSA 算法）。hashedSigned 文件被传递到服务器（并存储）。

散列和签名阶段由 Applet 完成。

我的问题是 RSAPrivateKey 存储在 PC 中，我不知道如何加载它。在 Java 中，密钥是使用 ObjectInputStream 和 ObjectOutputStream 读/写的，但在 Javascript 中我不知道如何处理它。有人有什么主意吗？谢谢！

# java - 解析大约 700 行文本，拆分行并将它们用作变量？

> ID：10269950
> 
> 赞同：0
> 
> 时间：2012-04-22T16:50:25.053
> 
> 标签：java, parsing

不必经过 700-800 行文本，每行都是以下内容的一些变体：

```
-5,-8,0:2.0 
```

我有一个必须将每一行传递给的方法，即`anotherclass.setBlock(xCoord, yCoord, zCoord, id)`. 因此，对于上面的示例，它将是：

```
anotherclass.setBlock(x-5, y-8, 0, 2); 
```

有没有办法解析每一行文本并做到这一点？我一直在寻找年龄，这要么是因为我找不到正确的说法，要么我根本找不到答案）

我试过手动做，但是在 100 行之后，它开始感觉效率很低。我不能真正使用 for 循环，因为坐标不是连续的（或者更确切地说，它们是连续的，但仅适用于 1 或 2 行）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:02:01.930

```
import static java.lang.Double.parseDouble;
import static java.lang.Integer.parseInt;
import static java.util.regex.Pattern.compile;

...

public static void main(String[] args) {
  BufferedReader r = null;
  try {
    r = new BufferedReader(new InputStreamReader(
        new FileInputStream("myfile.txt"), "UTF-8"));
    final Pattern p = compile("(.+?),(.+?),(.+?):(.+)");
    String line;
    while ((line = r.readLine()) != null) {
      final Matcher m = p.matcher(line);
      if (!m.matches())
        throw new RuntimeException("Line in invalid format: " + line);
      anotherclass.setBlock(parseInt(m.group(1)), parseInt(m.group(2)), 
          parseInt(m.group(3)), parseDouble(m.group(4)));
    }  
  }
  catch (IOException e) { throw new RuntimeException(e); }
  finally { try { if (r != null) r.close(); } catch (IOEXception e) {} }
} 
```

# wpf - WPF触发器和VisualState同时？

> ID：10269951
> 
> 赞同：0
> 
> 时间：2012-04-22T16:50:28.723
> 
> 标签：wpf, xaml

如何同时使用 a`Trigger` `IsSelected`和 a `VisualState` `MouseOver`？如果未选择元素并且将其悬停，我将不应用样式。

单独的触发器很容易：

```
<ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        ...
                    </Trigger>
</ControlTemplate.Triggers> 
```

单独的 VisualStates 也是如此：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="CommonStates">
        <VisualState x:Name="MouseOver">
            <Storyboard>
                ...
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

但是我该如何结合这些呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:44:45.950

您可以`VisualState x:Name="Selected"`在 new 中定义 a `VisualStateGroup x:Name="SelectedStates"`。然后，因为一次控件在每个组中只有一个状态，所以 MouseOver 和 Selected 彼此独立。请参阅[Mitesh Sureja 的博客](http://miteshsureja.blogspot.de/2011/05/visual-state-manager-new-feature-in.html)。

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="CommonStates">
        <VisualState x:Name="MouseOver">
            <Storyboard>
                ...
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
    <VisualStateGroup x:Name="SelectedStates">
        <VisualState x:Name="Selected">
            <Storyboard>
                ...
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

或者你可以按照克莱门斯的建议去做。请参阅[WPF 中的可视状态管理器与触发器](http://miteshsureja.blogspot.de/2011/05/visual-state-manager-vs-triggers-in-wpf.html)。

**编辑**

```
<Style.Triggers>
    <MultiTrigger>
        <MultiTrigger.Conditions>
            <Condition Property="IsSelected" Value="True" />
            <Condition Property="IsMouseOver" Value="True" />
        </MultiTrigger.Conditions>
        <Setter ... />
    </MultiTrigger>
</Style.Triggers> 
```

# javascript - 使用 jquery 加载图像，然后运行其余脚本

> ID：10269953
> 
> 赞同：2
> 
> 时间：2012-04-22T16:50:53.900
> 
> 标签：javascript, jquery

我有一小段代码可以从 smugmug 中获取我的图像。我的问题是我需要在我的其余代码导入和触发之前完成它。我看过其他帖子，但似乎没有一个适合我的特殊情况。代码如下：

```
(function($) {

$.fn.slideShow = function(options) {
var albumID = options.albumID;
var size = options.size || "Medium";
var delay = options.delay || 3000;
var div = this;

// Setup div
this.empty();
div.append("<ul></ul>");
$("ul:first").attr("title","fashion");
$("ul:first").addClass("stretch");
ul = div.find("ul");

$.smugmug.login.anonymously(function() {
    $.smugmug.images.get({AlbumID: albumID, Heavy: 1}, function(images) {
        $.each(images.Images, function() {
            var url = this[size + "URL"];

            console.log("Add img" + url);
            ul.append("<li title=\"" +  url + "\" /></li>");
        });

    });
});

};

})(jQuery); 
```

我从 HTML 中调用它并通过以下方式传递参数：

```
<script type="text/javascript">
nick = "hurleyhome";
    $(function() {
        $("#bg-images").slideShow({
            size: "Medium",
            albumID: "22516379",
            delay: 5000
        });
    });
</script> 
```

在此之后我需要运行的脚本是从脚本标签导入的标准 JS。

任何帮助将不胜感激。

我正在考虑一个 $(window).load 事件，但不完全确定如何实现它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:12:27.010

不确定我是否收到问题，但看起来您已经有了成功功能，只需将脚本放在那里，如下所示：

```
$.smugmug.login.anonymously(function() {
    $.smugmug.images.get({AlbumID: albumID, Heavy: 1}, function(images) {
        $.each(images.Images, function() {
            var url = this[size + "URL"];
            console.log("Add img" + url);
            ul.append("<li title=\"" +  url + "\" /></li>");
        });
        //get external javascript script here after images are inserted.
        $.getScript('http://mysite.com/path/to/myscriptfile.js');
    });
}); 
```

如果您需要等到所有图像都实际加载完毕，您必须为每个图像附加一个 load() 事件并检查它们是否都已加载或类似的东西..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:12:54.343

将您的图像导入代码放在一个

```
$(document).ready(function() {

}); 
```

和其余的进口

```
$(window).load(function() {

}); 
```

# c# - 如何处理与预订相关的时间

> ID：10269955
> 
> 赞同：1
> 
> 时间：2012-04-22T16:51:20.827
> 
> 标签：c#, sql, database, ms-access

我正在开发一个预订系统，某些用户可以在其中预订特定日期和时间的活动（这些时间是特定于活动的）。系统需要检查该活动此时是否可用（例如，当时可能正在举行课程）。

我将如何表示可以在数据库模式中预订活动的日期/时间？

例子：

```
活动 - 游泳
可用时间：
周一：上午 9 点 - 下午 5 点
星期二 : 9am - 12pm
星期三 : 9am - 4pm
星期四 : 10am - 3pm
周五：上午 9 点 - 下午 5 点

```

如果我的 Activity 表中有游泳活动的记录。其中包含详细信息，例如描述、成本等，我将如何将此计划存储在字段中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T17:20:59.003

我建议您为带有[int](http://goo.gl/atOHv) `ScheduleID`主键、[int](http://goo.gl/atOHv) `ActivityID`外键、[datetime](http://goo.gl/GhpbN) `StartTime`、[time](http://goo.gl/po36D) `Interval`和它需要的任何其他列的日程安排单独的表。

然后，在检查新活动是否与先前计划的活动冲突时，您可以使用 LINQ to SQL：

```
bool conflict = (from i in db.Schedules
                 where potential.StartTime > i.StartTime
                 && potential.StartTime < i.StartTime.Add(i.Interval)
                 select i).Count() > 0; 
```

**免责声明：**不能 100% 确定 DataContext 会使其以这种方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T17:01:19.947

我会将其表示为带有时间函数的开始和结束日期。

这是你的代码

```
public enum ActivityType
{
    Swimming = 1,
    Biking = 2,
    Basketball = 3,
    Soccer = 4
}

public class Booking
{
    public DateTime BookingStart { get; set; }
    public DateTime BookingEnd { get; set; }

    public Activity Activity { get; set; }

    public bool ValidateBooking()
    {
        // put logic here to ensure that the booking times fall within the activity start and end time
        return true;
    }
}

public class Activity
{
    public ActivityType ActivityType { get; set; }
    public DateTime ActivityStartTime { get; set; }
    public DateTime ActivityEndTime { get; set; }
} 
```

在您的数据库中，您将有一个包含此信息的表。

预订表

```
ID int
ActivityID int (foreign key to Activty.ID)
BookingStart DateTime
BookingEnd DateTime 
```

活动表

```
ID int
ActivityType int
ActivityStartTime DateTime
ActivityEndTime DateTime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T20:27:52.067

鉴于您的活动每隔 15 分钟发生一次，您可能会发现一个相关的日历表，这也可以让您排除关闭日。您的日历可以包含每个活动的日期和一刻钟行。一个单独的表将包含日历 ID 和客户 ID，允许您根据规则获取计数并限制每个时段的预订数量。

# c - MPI、calloc 和 free：

> ID：10269960
> 
> 赞同：0
> 
> 时间：2012-04-22T16:51:42.633
> 
> 标签：c, free, mpi, calloc

我正在尝试学习 C 和 MPI，该程序计算 n 个浮点数的总和。但我有一个错误：

/home/xx/PRIMO/primo.exe：free()：下一个大小无效（快速）：0x000000000109bda0 /home/xx/PRIMO/primo.exe：free()：下一个大小无效（快速）：0x00000000024fada0

是2天，我不知道该转向哪个方向。这里的程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include "mpi.h"

#define HOST 0
// prototypes
void initialize( int argc, char *argv[] );
float *create_array( int n );
void data_scatter( float *numbers, float *numbers_loc, int packet_size, int rest );
void validations();

// global vars
int menum, nproc, namelen;

int main(int argc, char *argv[]) {

  initialize( argc, argv );
  if( menum == HOST ) printf("Program started\n");
  if( menum == HOST ) validations(); 

  // ****** Declaring variebles ******
  int n, tag, packet_size, rest, j, i;
  float *numbers, *numbers_loc;
  float sum = 0.0;
  numbers_loc = (float*) calloc( packet_size, sizeof (float) );
  MPI_Status info;

  // ****** data distribution ******
  scanf("%d", &n);
  if( menum == HOST ) numbers = create_array( n );  

  MPI_Bcast( &n, 1, MPI_INT, 0, MPI_COMM_WORLD );
  double start_time = MPI_Wtime();

  packet_size = n / nproc;
  rest = n % nproc;
  if( menum < rest ) ++packet_size;

  data_scatter( numbers, numbers_loc, packet_size, rest );

  // ****** partial sums, first level ******
  for( j = 0; j < packet_size; j++) {
    sum += numbers_loc[j];
  } 
  free(numbers_loc);

  // ****** iterating phase ******
  for( i = 0; i < log2(nproc); i++) {

    int pow1 = (int) pow(2, i);
    tag = pow1 + 15; 

    if( (menum % pow1) == 0) {

      int pow2 = (int) pow(2,i+1);
      if( (menum % pow2) == 0 ) {

        float other_sum = 0;
        MPI_Recv( &other_sum, 1, MPI_INT, menum + pow1, tag, MPI_COMM_WORLD, &info );
        sum += other_sum;

      } else {

        MPI_Send( &sum, 1, MPI_INT, menum - pow1, tag, MPI_COMM_WORLD );

      }
    }
  }  

  // ****** printing result ******
  if( menum == HOST ) {
    printf( "TOTAL SUM: %.2f\n", sum);
  }

  double end_time = MPI_Wtime();
  double time = end_time - start_time;
  double max = 0;

  printf( "%d time %f\n", menum, time );
  MPI_Reduce( &time, &max, 1, MPI_DOUBLE, MPI_MAX, 0, MPI_COMM_WORLD );
  if(menum == HOST) printf( "%d max time %f\n", menum, max );

  printf("Program terminated\n");
  MPI_Finalize();
  return 0;
}

void initialize( int argc, char *argv[] ) {

  MPI_Init(&argc,&argv);
  MPI_Comm_rank(MPI_COMM_WORLD,&menum);
  MPI_Comm_size(MPI_COMM_WORLD,&nproc);

}

float *create_array( int n ) {

    float sequenzial_sum = 0;
    int i;

    printf("Creating Array of dimension: %d\n", n);

    float *array = (float*) calloc( n, sizeof(float));
    srand( time(NULL) );

    for( i=0; i < n; i++) {

      array[i] = ((float) rand())/ ((float) RAND_MAX);
      sequenzial_sum += array[i]; 

      printf("-%f-", array[i]);
    }

    printf("\n");
    printf("Array creation terminated, sum = %.2f \n", sequenzial_sum);

    return array;
}

void data_scatter( float *numbers, float *numbers_loc, int packet_size, int rest ) {
  MPI_Status info;
  int start = 0, offset = packet_size, i, tag;

  if( menum == HOST ) {

    memcpy(numbers_loc, numbers, packet_size * sizeof(float));
    for( i=1; i < nproc; i++ ) {

      start += offset; 
      if( rest == i) --offset;

      tag = 22 + i;
      MPI_Send( &numbers[start], offset, MPI_INT, i, tag, MPI_COMM_WORLD );

    }

    free(numbers);

  } else {

    tag = 22 + menum;
    MPI_Recv( numbers_loc, packet_size, MPI_INT, 0, tag, MPI_COMM_WORLD, &info );

  }

}

void validations() {

  if( ( fmod(log2( nproc ),  1.0) != 0 )) {

    printf("CPU number must ne a power of 2\n");
    MPI_Abort( MPI_COMM_WORLD, -1 );

  }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T17:10:34.117

```
int n, tag, packet_size, rest, j, i;
float *numbers, *numbers_loc;
float sum = 0.0;
numbers_loc = (float*) calloc( packet_size, sizeof (float) ); 
```

我不确定我是否在这里遗漏了一些东西，但是`packet_size`没有在这里初始化就被使用了。编译`-Wall`实际上会警告您这一点。

`-Wall`还会警告您缺少`<time.h>`头文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-22T19:49:44.753

```
// global vars
`int menum, nproc, namelen;`
// ****** Declaring variebles ******
//  int n, tag, packet_size, rest, j, i; 
```

packet_size 未定义，因此它将是垃圾值，未定义行为，calloc 不需要成功 100%

```
`numbers_loc = (float*) calloc( packet_size, sizeof (float) );`
`packet_size = n / nproc; 
```

` 全局变量 nproc 将被初始化为 0 并将某个数字除以 0 这应该会引发异常。

```
`rest = n % nproc;` 
```

上面的说法也是不允许的。我不知道是否有任何机制来抑制上述错误，然后控制是否出现以下语句

```
`// ****** partial sums, first level ******
for( j = 0; j < packet_size; j++) {
   sum += numbers_loc[j];
} ` 
```

numbers_loc 将被损坏，因为 packet_size 未定义并且 numbers_loc 分配有垃圾大小。 `free(numbers_loc);`

# iphone - 使用 flash cs5.5 创建的应用需要什么版本的 ios？

> ID：10269962
> 
> 赞同：1
> 
> 时间：2012-04-22T16:52:17.730
> 
> 标签：iphone, ios, actionscript-3, flash, apache-flex

我想知道使用我为 ios 和 flash cs5.5 创建的应用程序所需的最低版本的 ios 是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:47:16.747

根据 Adob​​e AIR 3 技术规范 ( [https://www.adobe.com/products/air/tech-specs.html](https://www.adobe.com/products/air/tech-specs.html) )，所需的最低 iOS 版本是 iOS 4（您还可以在此处查看硬件要求）。

# scala - Scala map 方法未按预期运行

> ID：10269963
> 
> 赞同：2
> 
> 时间：2012-04-22T16:52:17.707
> 
> 标签：scala

我是 Scala 的新手，所以这很可能是一个非常明显的错误。但是，我试图将 List[Object] 转换为 List[A]，其中 A 是类中的参数。

```
class AbstractHibernateDAO[A<:Serializable]{
  def findAll: List[A] = {
    val objList = currentSession.createQuery("from " + clazz.getName()).list()
    objList.map{_.asInstanceOf[A]}
  }
} 
```

Eclipse 正在呕吐：

```
type mismatch;  found   : ?0(in method findAll) => A where type ?0(in method findAll)  required: (some other)?0(in method findAll) => ? where type (some other)?0(in method findAll)    AbstractHibernateDAO.scala  /springHibernateNoXML/src/main/scala/my/package 
```

我也尝试过长表格

```
objList.map{obj => obj.asInstanceOf[A]} 
```

并得到相同的结果。

谁能帮我一把？

[编辑-附加信息]

对于那些要求的人，这是完整的清单：

```
package name.me

import java.io.Serializable
import java.util.List
import org.springframework.beans.factory.annotation.Autowired
import org.springframework.beans.factory.config.BeanDefinition
import org.springframework.context.annotation.Scope
import org.springframework.orm.hibernate3.HibernateTemplate
import org.springframework.stereotype.Repository
import com.google.common.base.Preconditions
import org.hibernate.SessionFactory
import org.hibernate.Session
import collection.JavaConversions._

@Repository
@Scope(BeanDefinition.SCOPE_PROTOTYPE)
class AbstractHibernateDAO[A<:Serializable]{

  val clazz: Class[A] = null
  @Autowired val sessionFactory: SessionFactory = null

  def currentSession: Session = {
    sessionFactory getCurrentSession
  }

  def findOne(id: Long): A = {
    Preconditions checkArgument(id != null)
    currentSession.get(clazz, id).asInstanceOf[A]
  }

  def findAll: List[A] = {
    val objList = currentSession.createQuery("from " + clazz.getName()).list()
    objList.map(_.asInstanceOf[A])
    //This works
    //objList.asInstanceOf[List[A]]
  }

  def save(entity:A){
    Preconditions checkNotNull entity
    currentSession persist entity
  }

  def update(entity: A){
    Preconditions checkNotNull entity
    currentSession merge entity
  }

  def delete(entity: A){
    Preconditions checkNotNull entity
    currentSession delete entity
  }

  def deleteById(entityId: Long){
    Preconditions checkNotNull entityId
    val entity = findOne(entityId) 
    Preconditions checkNotNull entity
    delete(entity)
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:04:27.903

你确定的类型`objList`？真的是一个`scala.collection.immutable.List`吗`java.util.Object`？您可以通过在变量声明中添加类型来轻松检查：

```
val objList: List[java.util.Object] = ... 
```

假设这是正确的，您的代码似乎很好。但是如果没有所有其他代码，我就无法运行它。我可以用一个简化的例子来做你正在尝试的事情：

```
def convertAll[A](data: List[java.lang.Object]): List[A] =
  data.map(_.asInstanceOf[A])

convertAll[java.lang.Integer](List(1,2).map(new java.lang.Integer(_)))
// List[java.lang.Integer] = List(1, 2) 
```

但是，您不需要在`List`. 尝试将列表转换为新类型：

```
objList.asInstanceOf[List[A]] 
```

例如：

```
val x: List[java.lang.Object] = List(1,2).map(new java.lang.Integer(_))
x.asInstanceOf[List[java.lang.Integer]]
// List[java.lang.Integer] = List(1, 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T19:23:54.173

快速浏览一下[Hibernate API 文档](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Query.html)会显示它`Query.list()`返回 a `java.util.List`，但您有一个类型注释`List[A]`，默认情况下（来自[scala 包对象](http://www.scala-lang.org/api/current/index.html#package)） a `scala.collection.immutable.List`。

你想退回哪个？

对于 Java 列表，更改您的类型注释并转换整个列表：

```
class AbstractHibernateDAO[A<:Serializable]{
  def findAll: java.util.List[A] = {
    val objList = currentSession.createQuery("from " + clazz.getName()).list()
    objList.asInstanceOf[java.util.List[A]]
  }
} 
```

对于 Scala 列表，使用 JavaConversions：

```
class AbstractHibernateDAO[A<:Serializable]{
  def findAll: List[A] = {
    val objList = currentSession.createQuery("from " + clazz.getName()).list()
    import collection.JavaConversions._
    objList.toList.asInstanceOf[List[A]]
  }
} 
```

# sql - SQL - 如何使用 CASE

> ID：10269964
> 
> 赞同：1
> 
> 时间：2012-04-22T16:52:42.923
> 
> 标签：sql

```
Select Lastname, Firstnme, Sex, 

Case When Sex = F Then ‘female’ Else ‘male’ End 

Birthdate From Employee Order by Lastname 
```

这是我的代码，但是 case 语句不会这样工作，我能实现吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T16:56:14.813

将“F”放在引号中：

```
Select Lastname, Firstnme, Sex, 
Case 
When Sex = 'F' Then 'female' 
When Sex = 'M' Then 'male'
ELSE 'Unknown'
End as Sex_string, Birthdate 
From Employee Order by Lastname 
```

或者

```
Select Lastname, Firstnme, Sex, 
Case Sex
When 'F' Then 'female' 
When 'M' Then 'male'
ELSE 'Unknown'
End as Sex_string, Birthdate 
From Employee Order by Lastname 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T16:55:31.743

我相信你想要这样的东西：

```
select Lastname, Firstnme, 
Sex = Case 
     When Sex = 'F' Then ‘female’ 
     Else ‘male’ 
     End, 
 Birthdate 
 From Employee Order by Lastname 
```

这里的区别是你必须设置 Sex = Case，然后在 case 语句后加一个逗号，这样它就知道 Birthdate 是另一个字段。

这是为 SQL 服务器编写的，如果您使用的是 MySql 或其他一些 RDBMS，则您的里程可能会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-28T20:37:34.197

```
SELECT firstname, lastname, birthdate, sex,
     CASE sex
       WHEN 'F' THEN 'Female'
       WHEN 'M' THEN 'Male'
       ELSE 'Unknown'
     END AS gender
FROM EMPLOYEE
ORDER BY lastname; 
```

您可以将第二个`WHEN`子句从子句中删除，`CASE`让`ELSE`子句处理任何非女性的内容，但通常有三个性别值 - 男性、女性和未知。上面的脚本占了第三个变量，并将返回所有记录为男性、女性或未知。

# c++ - 升压入门

> ID：10269972
> 
> 赞同：-1
> 
> 时间：2012-04-22T16:53:56.873
> 
> 标签：c++, boost

我知道我的问题没有正确的答案，但这里是：

程序员应该知道的最常见/最重要的 boost 库是什么。我的意思是让你在简历上写下“提升”的必备品'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T17:41:21.053

除了答案 #1 中提到的库之外，其他方便的库包括：

*   双图
*   选修的
*   随机的
*   分词器
*   格式
*   前锋
*   词汇转换
*   文件系统
*   约会时间
*   MPI（显然用于并行编程）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:04:27.343

就个人而言，以下是我一直使用的库：

1.  `boost/smart_ptr`
2.  `boost/bind`
3.  `boost/io`
4.  `boost/lambda`
5.  `boost/regex`

# python - Python：为特定函数调用设置内存限制

> ID：10269974
> 
> 赞同：10
> 
> 时间：2012-04-22T16:54:03.223
> 
> 标签：python, memory, process, heap-memory

在 Python 脚本中，我想为某个函数调用设置内存限制。我研究了[如何限制堆大小](https://stackoverflow.com/questions/2308091/how-to-limit-python-heap-size)；但是，我不想限制整个正在运行的 Python 进程的内存——即在函数调用之前和之后设置内存限制。

有没有办法用给定的内存量进行函数调用，这样内存限制就不会影响调用者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:26:14.947

不，这是不可能的。Python 不跟踪哪些函数负责分配新内存，libc 也不跟踪，因此无法仅通过单个函数来限制内存使用。

为此，您必须修改 Python，以便使用一个新函数来分配内存，该函数需要指定哪个 Python 函数负责，以便在该函数超出其限制时拒绝内存分配。

正如@JBernardo 所说，这样做的唯一其他方法确实是在内存有限的单独进程中执行该函数。

至于实现沙箱，已经有相对良好的测试实现。你有什么理由不能使用这些吗？特别是看到 PyPy 的[沙盒虚拟机](http://pypy.org/features.html)和[Zope 沙盒](http://pypi.python.org/pypi/RestrictedPython)。

# javascript - 无法从 MVC 中的 ViewBag 中提取数据

> ID：10269975
> 
> 赞同：3
> 
> 时间：2012-04-22T16:54:04.570
> 
> 标签：javascript, asp.net-mvc, viewbag

我正在尝试从 ViewBag 中提取数据并在提交之前通过 JS 将其插入表单隐藏字段中。

它不起作用。

在调试时，我发现 JS 表达式的一部分被忽略了，因此，'var' 被评估为一个空字符串。

这是 JS 部分，它应该执行任务：

```
function setid() {
   var id = '@(ViewBag.id)';
   $('#idField').val(id);
}; 
```

在调试中，我得到以下表达式，这当然会导致 null 'id'：

```
function setid() {
    var id = '';
    $('#idField').val(id);
  }; 
```

（我不确定这是唯一的障碍）

此 JS 函数由同一页面上的“Ajax.BeginForm”的“OnBegin”参数调用。

这是驻留在表单中的 html 隐藏字段，我正在尝试分配“id”值：

```
input type  ="hidden" name ="id" id ="idField" value ="" 
```

以下是控制器，它返回一个部分，呈现为一个 jquery 对话框：

```
public ActionResult openDialog()
    {
        ViewBag.id = TempData["id"];
        return PartialView("EndLoadDetailsDialog");
    } 
```

**更新：** 当我想到它时，我可能已经发现了问题。如果我是对的，请告诉我：

我在其中定义 viewbag 值的控制器返回一个局部视图，这是返回的最后一个视图。

这个局部视图被呈现给一个 JQuery 对话框。关闭它后，我返回到之前的那个，其中包含一个表格。在表单视图（最后一个之前的那个）中，我试图通过 JS 函数访问 viewbag 值，并将其分配给表单中的隐藏字段。所以实际上，我正在尝试获取 viewbag 值，而不是从我发送 viewbag 的视图中获取。

这是个问题吗？viewbag 值是否只能从已渲染的最后一个视图中获得？

# asp.net - 对分层表进行排序，如 1.1.1

> ID：10269980
> 
> 赞同：1
> 
> 时间：2012-04-22T16:54:36.093
> 
> 标签：asp.net, sql-server, sorting, select, common-table-expression

我正在使用 CTE 来管理我的层次结构数据。以下是我的选择查询

```
 WITH ctLevel
                AS
                (
                    SELECT
                        C_TASK_ID                                                               AS Child
                        ,P_Task_ID                                                              AS Parent
                        ,common_task.   TASK_SEQ                                                AS taskSeq
                        ,1                                                                      AS [Level]
                        ,CAST( TASK_SEQ AS VARCHAR(MAX))                                        AS [taskOrder]
                        ,CAST (Replicate(TASK_SEQ,  1)+' '+ TASK_NAME  AS VARCHAR(MAX))  AS [Task_Name]
                        ,common_task.TASK_POSITION                                              AS [TASK_POSITION]
                    FROM   
                        [COMMON.TASK_REL] as common_task_rel, 
                        [COMMON.TASK] as common_task
                    WHERE  
                        common_task_rel.C_TASK_ID = common_task.TASK_ID
                        and     common_task.[TASK_TYPE] = 'F' AND common_task.[MODULE_CODE] ='PRODE' AND common_task.[STATUS] <> 'D'
                        and     common_task_rel.P_TASK_ID is null

                    UNION ALL

                    SELECT 
                        C_TASK_ID                                                                   AS Child
                        ,P_Task_ID                                                                  AS Parent
                        ,common_task.   TASK_SEQ                                                    AS taskSeq
                        ,[Level] + 1                                                                AS [Level]
                        ,[taskOrder] + '.' + CAST(TASK_SEQ AS VARCHAR(MAX))                         AS [taskOrder]
                          ,CAST (Replicate('&nbsp;&nbsp;&nbsp;', [Level] + 1) + taskOrder + '.' + CAST(TASK_SEQ AS VARCHAR(MAX))+' ' +common_task.TASK_NAME AS VARCHAR(MAX))  AS [Task_Name]
                        ,common_task.TASK_POSITION                                              AS [TASK_POSITION]
                    FROM   
                        [COMMON.TASK_REL]as common_task_rel
                    INNER JOIN 
                        ctLevel
                    ON 
                        ( P_Task_ID = Child ) ,
                        [COMMON.TASK] as common_task

                    WHERE  
                            common_task_rel.C_TASK_ID = common_task.TASK_ID
                    and     common_task.[TASK_TYPE] = 'F' AND common_task.[MODULE_CODE] = 'PRODE' AND common_task.[STATUS] <> 'D'
                    )

                   SELECT [Parent] ,[Child],taskSeq, Level,[taskOrder],Task_Name,[TASK_POSITION]
                    FROM   ctLevel  
                    order by [taskOrder],[Level],[TASK_POSITION] 
```

我的结果如何：

![在此处输入图像描述](../Images/432020d4821f27a0df33064175015cf7.png)

你可以举个例子。假设
**10 10.1 10.1.1 10.1.1.1**将在 9 的底部

是否可以像下面那样对这些记录进行排序

```
1
2
2.1
2.2
2.4
2.5
2.6
2.7
3
3.1
3.2
4
4.1
4.2
5
5.1
6
6.1
6.2
6.3
6.4
6.5
7
8
9
9.1
9.1
9.1.1
9.1.1.1
9.1.1.2
9.1.1.3
9.1.1.4

10
10.1
10.1.1
10.1.1.1 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T16:58:39.590

格式化数字`001`，例如：

```
right('000' + convert(varchar(max), [Level] + 1),3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T17:45:01.810

**对于 SQL2008+**

`Num1.Num2.Num3`您可以生成可以轻松按 ASC 或 DESC 排序的[hierarchyid](http://technet.microsoft.com/en-us/library/bb677290.aspx)值，而不是生成... 值。将 VARCHAR 值转换为 HIERARCHYID 数据类型时，必须遵循以下语法`/Num1/Num2/Num3/`：

```
SELECT *, CONVERT(VARCHAR(50), T.A) AS VarCharHI, T.A.GetLevel()
FROM (VALUES
        ( CONVERT(HIERARCHYID, '/1/') , 'A' ),
        ( CONVERT(HIERARCHYID, '/2/11/1/1/1/') , 'C' ),
        ( CONVERT(HIERARCHYID, '/40/11/1/') , 'D' ),
        ( CONVERT(HIERARCHYID, '/5/11/') , 'D' ),
        ( CONVERT(HIERARCHYID, '/2/2/') , 'B' ) ) AS T(A,B)
ORDER BY T.A ASC; 
```

结果：

```
A           B    VarCharHI                                          GetLevel()
----------- ---- -------------------------------------------------- ----------
0x58        A    /1/                                                1
0x6B40      B    /2/2/                                              2
0x6D75AD60  C    /2/11/1/1/1/                                       5
0x8EB8      D    /5/11/                                             2
0xCB1AEB    D    /40/11/1/                                          3 
```

我将进行以下更改：

```
WITH ctBaseLevel
AS
(
...
,'/' + CAST( TASK_SEQ AS VARCHAR(MAX)) + '/' AS [taskOrder]
...
UNION ALL
...
,[taskOrder] + CAST(TASK_SEQ AS VARCHAR(MAX)) + '/'
...
) , ctLevel
AS
(
SELECT l.*, CONVERT(HIERARCHYID, l.[taskOrder]) AS  [taskOrder_HIERARCHYID]
FROM ctBaseLevel l
)
SELECT * FROM cteLevel ORDER BY [taskOrder_HIERARCHYID]; 
```

# android - Android JNI UnsatisfiedLink 异常

> ID：10269981
> 
> 赞同：0
> 
> 时间：2012-04-22T16:54:40.343
> 
> 标签：android, android-ndk, java-native-interface

1.  我有一个尝试从 Java 代码调用的 C++ 方法
2.  该方法的签名是：

    *   **Java**：
        公共类 FLVCamActivity 扩展 Activity {
        static {
              System.loadLibrary("FLVCam");
              System.out.println("加载的 FLVCam");
        }
        公共本机无效 RunFlvServer(int iCamId);

    *   **C++** :
        extern "C" JNIEXPORT void JNICALL Java_com_sofin_flvcam_FlvCamActivity_RunFlvServer(JNIEnv* env, jobject javaThis, jint iCamId)

3.  在运行时，System.loadLibrary("FLVCam") SUCCEEDs，但是，调用“RunFlvServer”失败，“No implementation found for native Lcom/sophin/flvcam/FLVCamActivity;.RunFlvServer (I)V”
4.  我使用的 SDK 版本是：AndroidSDK=15, NDK=r7b, minsdk@manifest = 15
5.  使用*“nm -g”*列出我的本机库公开的所有导出条目，很明显本机方法已正确导出：*0006c0a8 T Java_com_sofin_flvcam_FlvCamActivity_RunFlvServer*。

    考虑到上述情况，为什么我会得到这个 UnsatisfiedLink 异常？

索芬的纳达夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:18:30.827

这是一种大写/小写的东西，FLVCamActivity 在大写中具有“FLV”，而 C++ 方法具有“Flv”（Lower），我在这上面浪费了将近一天的时间，Maan，我希望我会用我的下次有时间讨论真正的错误。

# java - DJ Native Swing JWebBrowser 面板在 JTabbedPane 中不起作用

> ID：10269990
> 
> 赞同：0
> 
> 时间：2012-04-22T16:56:12.150
> 
> 标签：java, swing, netbeans-7, jtabbedpane

我正在使用[DJ-Native-Swing - JWebBrowser](https://github.com/Chrriis/DJ-Native-Swing/blob/master/DJNativeSwing-SWTDemo/src/chrriis/dj/nativeswing/swtimpl/demo/examples/webbrowser/SimpleWebBrowserExample.java)`JTabbedPane`在其中还包括其他选项卡的选项卡中显示浏览器窗口。
我正在尝试的代码（在 NetBeans 7.1.1 上）是：

`browserPanel = (JPanel)` [`SimpleWebBrowserExample`](https://github.com/Chrriis/DJ-Native-Swing/blob/master/DJNativeSwing-SWTDemo/src/chrriis/dj/nativeswing/swtimpl/demo/examples/webbrowser/SimpleWebBrowserExample.java)`.createContent();` `// I use this line in browserPanel Properties > Customize Code`

在`main(String[] arg)`方法中：

```
NativeInterface.open();
    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            new MyFrame().setVisible(true);
        }
    });
NativeInterface.runEventPump(); 
```

但是代码不起作用，`JWebBrowser`面板上不显示。为此我还需要做什么？我是 Windows 7 x64，JDK1.7.0，我已经包含了 DJ Native Swing 所需的所有库。

独立程序也适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:01:12.360

我意识到这个答案来得太晚了，但这就是我做的

这是扩展 JPanel 并定义浏览器的类：

```
 public class BrowserPanel extends JPanel {   

public  BrowserPanel() {
    super(new BorderLayout());
    JPanel webBrowserPanel = new JPanel(new BorderLayout());
    webBrowserPanel.setBorder(BorderFactory.createTitledBorder(""));
    final JWebBrowser webBrowser = new JWebBrowser();
    webBrowser.navigate("bigfarm.goodgamestudios.com/?country=RO");
    webBrowserPanel.add(webBrowser, BorderLayout.CENTER);
    add(webBrowserPanel, BorderLayout.CENTER);
  } 
```

}

然后我创建了一个扩展 JFrame 并保存 JTabbedPane 的类

```
public class WhateverFrame extends JFrame{

    private JTabbedPane tabbedPane;

    public WhateverFrame() {

        BrowserPanel x=new BrowserPanel();

        tabbedPane = new JTabbedPane(JTabbedPane.TOP);

        tabbedPane.add(x, BorderLayout.WEST);
        tabbedPane.setTitleAt(0, "Start");
        /*
         * add the tabbedPane to the content pane
         */

        setContentPane(tabbedPane);
    } 
```

主要看起来像这样：

```
public static void main(String[]args){ 

        UIUtils.setPreferredLookAndFeel();
        NativeInterface.open(); 
        SwingUtilities.invokeLater(new Runnable() {

        public void run() {
        WhateverFrame frame=new WhateverFrame();
                frame.setExtendedState(Frame.MAXIMIZED_BOTH);
                frame.setLocation(0,0);
                frame.setVisible(true);

          }    
        });
    } 
```

# php - PHP中的通配符复制文件

> ID：10269992
> 
> 赞同：0
> 
> 时间：2012-04-22T16:56:18.797
> 
> 标签：php, linux, bash, command-line

我想在 PHP 脚本中执行与以下 bash (shell) 命令等效的命令：

```
cp --parents -t ../../htdocs/host/$2/ *.html *.js *.png *.ogg *.mp3 Sprites/*.js 
```

但是当我尝试使用 PHP system() 命令时，它不起作用，大概是因为 cp 是 shell 的一部分，而不是独立的可执行文件。而且我不认为 PHP copy() 函数支持通配符，或者如果支持，它肯定不支持我指定的命令行开关。在 PHP 中执行此操作的最简单和最好的方法是什么。我可以创建一个 shell 脚本并在其上调用 system() ，但这似乎很糟糕。

**编辑：**评论正确；我相信我遇到了许可问题。为什么我对 mkdir("blahblah/htdocs/host/$REV", 775) 的调用没有将权限设置为所有者和组可写？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T17:04:08.717

PHP 有一个`glob()`接受通配符的函数。它不像 shell 行那么简单，但你可以这样做：

```
foreach (glob("*.html") as $htmlFile) {
    copy($htmlFile, $targetDir);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T19:40:11.620

事实证明，正如评论所示，确实`cp`不是外壳的一部分，我认为错误与权限有关。运行命令时我不清楚如何设置目录权限`mkdir`，因此它不是所有者可写的。因此，除非有充分的理由不使用该`system()`功能，否则我可能会使用现有的解决方案并更正我的`mkdir`权限。

我`mkdir`已将 775 指定为模式，但因为我忽略了包含“0”前缀 (0775)，所以我认为它被解释为十进制而不是八进制。纠正解决了一切。一个小角色真的有很大的不同！

# javascript - 将 Map 中的点聚类到数组中的单独数组中。（不使用谷歌地图聚类）

> ID：10269996
> 
> 赞同：0
> 
> 时间：2012-04-22T16:57:30.493
> 
> 标签：javascript

我在数组中的地图上有很多标记：

```
 for point in points
    latLng2.push(point[0], point[1]) 
```

当在地图上时，其中一些标记在“集群”中靠得很近。我需要做的是在 Javasctipt 中找到一种方法来输出一个新数组，该数组中包含新数组，其中包含一组聚集标记。IE

```
array_of_clusters[
         [[51.2,52.1]],[[51.2,52.1]],[[51.2,52.1]]
                 ] 
```

最好的方法是什么？我需要找到最近的邻居。然后定义一个阈值 - 以前有人这样做过吗？理想情况下，它将被称为

```
cluster.new(latLng2) 
```

还是我以完全错误的方式看待这个？

我不想做的是使用谷歌地图标记性能工具进行集群 - 我仍然想显示所有标记，而不是让谷歌地图隐藏它们。

# javascript - 用正则表达式替换空格而不替换空的 HTML 标记

> ID：10269997
> 
> 赞同：0
> 
> 时间：2012-04-22T16:57:47.077
> 
> 标签：javascript, html, css

我希望用这样的方式替换空格：

`<span>5</span>SPACE<image href="mtgsymbol.png" />`

但是当我这样做时：

`card_cost=card_cost.replace(/\s/g,"");`

它把我的css搞得一团糟，对象相互堆叠，就像它们的位置变成了绝对一样。

如何在不破坏 CSS 或文档流的情况下替换空格？

示例代码：

Javascript：

```
card_cost=document.getElementById('card_cost').value;

if(card_cost)
{
card_cost=card_cost.replace(/\d+/g,"<span class='card_costnum'>$&</span>");
*breaks styling*card_cost=card_cost.replace(/\s/g,"");*breaks styling*
}

document.getElementById('output').innerHTML+="<div class='card'>"+"<span class='card_cost'>"+card_cost+"</span>"; 
```

CSS：

```
.card_name,.card_image,.card_cost,.card_type,.card_subtype,.card_rarity,.card_rules,.card_flavor,.card_strength,.card_num,.card_lower,.card_costnum
{
position:relative;
z-index:1;
}

.card_cost
{
display:inline-block;
float:right;
clear:right;
}

.card_costnum
{
position:relative;
display:inline-block;
text-align:center;
vertical-align:middle;
background-image:url("numsymbol_small.png");
background-repeat:no-repeat;
width:12px;
height:12px;
margin:1px;
top:-4px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T17:00:33.487

```
card_cost = card_cost.replace(/\d+/g, "<span class='card_costnum'>$&</span>");
card_cost = card_cost.replace(/\s/g, ""); 
```

您正在将其变成`<spanclass='card_costnum'>`无效的，并且会破坏 HTML 的其余部分。只需反转替换即可。

```
card_cost = card_cost.replace(/\s/g, "");
card_cost = card_cost.replace(/\d+/g, "<span class='card_costnum'>$&</span>"); 
```