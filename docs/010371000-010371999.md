# StackOverflow 问答 10371000-10371999

# set - 如何在 Sage 中找到给定 Set 的子集？

> ID：10371000
> 
> 赞同：1
> 
> 时间：2012-04-29T09:13:57.387
> 
> 标签：set, subset, sage

我的代码如下所示：

```
def Z(m,n):
    return CartesianProduct(IntegerRange(m),IntegerRange(n))

for v in Subsets(Z(2,2)):
    print v 
```

但是，当我尝试运行它时，出现以下错误：

```
Traceback (most recent call last):
  File "x.py", line 13, in <module>
    for v in Subsets(Z(_sage_const_2 ,_sage_const_2 )):
  File "/opt/sage-4.8-linux-64bit-ubuntu_10.04.3_lts-x86_64-Linux/local/lib/python2.6/site-packages/sage/combinat/subset.py", line 234, in __iter__
    lset = __builtin__.list(self.s)
  File "/opt/sage-4.8-linux-64bit-ubuntu_10.04.3_lts-x86_64-Linux/local/lib/python2.6/site-packages/sage/sets/set.py", line 650, in __iter__
    for x in self.set():
  File "/opt/sage-4.8-linux-64bit-ubuntu_10.04.3_lts-x86_64-Linux/local/lib/python2.6/site-packages/sage/sets/set.py", line 719, in set
    return set(self.object())
TypeError: unhashable type: 'list' 
```

获取任意集合的所有子集的集合的规范方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:26:59.740

`CartesianProduct`返回列表列表，例如：

```
>>> print list(Z(2,2))
[[0, 0], [0, 1], [1, 0], [1, 1]] 
```

但是`Subsets`无法处理列表中的元素（它在`set`内部将其参数转换为 a，并且 Python 中的集合被实现为哈希集，因此出现关于“unhashibility”的错误）。要解决此问题，您应该将内部列表转换为元组：

```
for v in Subsets(tuple(l) for l in Z(2,2)):
    print v 
```

请注意，这是使用生成器表达式（而不是列表推导式）来避免构造中间列表。

（也可以使用`map(tuple, Z(2,2))`或`import itertools` `iterools.imap(tuple, Z(2,2))`代替生成器表达式，但上面给出的解决方案是最 Pythonic 的。）

# c# - 在 c# 或 java 中实现大规模并行计算引擎的替代线程？

> ID：10371004
> 
> 赞同：1
> 
> 时间：2012-04-29T09:14:59.837
> 
> 标签：c#, java, multithreading, parallel-processing

假设需要构建一个需要超快的类似电子表格的引擎，每个单元依赖关系都可以在并行计算分支上。可以为每个并行分支创建线程吗？就内存而言，线程不是很昂贵。您很容易认为，如果有 1000 个公式行甚至 100 万行，您将不得不创建相同数量的线程，这是否现实？

如果这是不现实的，这种情况下是否有替代线程的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:47:12.680

对于 CPU 密集型任务，最佳线程数通常是相同数量的 CPU。如果您不小心，创建线程的开销可能比线程所做的工作要高得多。

CPU 通常不是主要问题，这毫无价值。通常，内存带宽或缓存利用率更多是一个问题，在这种情况下，有效地写入一个线程可以胜过尝试将工作分配到多个线程。如果每个线程所做的工作都是 CPU 密集型的，并且使用相对较少的内存带宽，那么拥有多个线程会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T09:54:57.720

在现代 Java 编程中，您应该完全避免使用线程，而是使用执行程序。世界其他地方称它们为工作队列。请参阅Joshua Bloch在[Effective Java中的第 68 条。](http://cyclo.ps/books/Prentice.Hall.Effective.Java.2nd.Edition.May.2008.pdf)

就个人而言，我非常喜欢 Grand Central Dispatch 的 API。Java 版本称为[HawtDispatch](http://hawtdispatch.fusesource.org/)。该 API 更简单，并且可以正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T09:26:40.237

你最好的选择是Java 中的[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)或 Fork/Join Framework。他们确实使用线程，但优化了线程数并将工作项放在工作队列中。他们以非常聪明的方式处理了许多低级优化问题。您只需使用 Parallel.For 等结构即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T09:35:56.237

任务并行库可以帮助您尽可能多地利用 CPU，并为您完成大部分繁重的线程创建工作。

如果您有大量（非常）可并行化的计算，并且您需要绝对最佳的性能，那么您将不得不超越 cpu。还有一些将 LINQ/TPL 与 GPU 相结合的替代方案，例如 MS。加速器和梵天。参见例如[Utilizing the GPU with c#](https://stackoverflow.com/questions/375011/utilizing-the-gpu-with-c-sharp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T09:48:36.310

除了线程之外，唯一想到的是[SIMD](http://en.wikipedia.org/wiki/SIMD)命令（除非您想使用特殊硬件，这意味着您必须使用较低等级的语言）。您必须使用外部库来处理这些难以访问的处理器/Gaphic Cards 功能。您也可能对 CUDA 或 OpenCL 感兴趣。另一方面，您通常不想像您描述的那样创建那么多线程，您可以使用具有固定或动态线程数量的线程池来管理创建的线程数量并执行队列中的任务。Java 7 中还有一个 Fork/Join 功能，它有助于线程管理。

我想说看看线程池，通过这些你可以平衡由太多线程产生的开销。

由于您正在寻找信息，[因此这](http://www.vogella.com/articles/JavaConcurrency/article.html)也可能对线程有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-29T10:01:46.343

另请查看[Ateji PX](http://www.ateji.com/px/index.html)。它是用于并行化的 java 语言的扩展，可能会对您有所帮助。它是一种商业产品，但同时它已免费提供。

# javascript - 寻找一个可以提供restful服务的服务端js框架，和angularjs配合得很好

> ID：10371008
> 
> 赞同：1
> 
> 时间：2012-04-29T09:16:26.087
> 
> 标签：javascript, rest, web-frameworks, angularjs

[Angularjs](http://angularjs.org)是一个浏览器端的 mvc 框架，通过 restful-apis 与服务器端通信。

通常，任何支持restful服务的服务器端框架都可以使用它，但我正在寻找一个可以很好地使用它的框架。

在angularjs中，我们可以使用a`$resource`来定义一个外部资源，它有一些操作。代码如下：

```
var User = $resource('/users/:id', {}, {
              get: { method: 'GET'},
              create: { method: 'POST'},
              delete: { method: 'DELETE'},
              resetPassword: { method: 'PUT', params: { reset: passord } }
           });
var user = User.get({id: '123'});
user.delete(); 
```

可以看到，代码的结构是一个 uri 有很多操作。

我是服务器端 js 的新手，只是看了一点[express](http://expressjs.com/)。我觉得它不太适合 angularjs。

您可以查看演示：

```
app.get('/', function(req, res){
    res.send('Hello World');
});

app.get('/user/:id', function(req, res){
    res.send('User: ' + id);
});

app.post('/user', function(req, res){
  res.send(req.body);
}); 
```

它用 s 分隔一个 uri `http-method`。

我正在寻找一个框架，它可以让我编写如下代码：

```
app.route('/user/:id', {
   get: get(req,res) { ... },
   post: post(req, res) { ... },
   resetPassword: put(req, res) {...}
}); 
```

代码可能是错误的，但我想你可能明白我的意思：它的结构与 angularjs 的一面相似。

我可以尝试这样的框架吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T13:33:52.727

要使用 MongoDB 作为数据库，请查看以下内容：

[https://github.com/dalcib/angular-phonecat-mongodb-rest](https://github.com/dalcib/angular-phonecat-mongodb-rest)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:56:13.167

对于 .NET 解决方案，您可以查看[ServiceStack](http://www.servicestack.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T22:33:28.893

您应该查看作者的客户端路由器**[Page.js](http://visionmedia.github.com/page.js/)**

如果您知道如何路由快递应用程序，这将是您最简单的解决方案。它也非常轻巧

# ms-access - 访问查询字段相等

> ID：10371009
> 
> 赞同：4
> 
> 时间：2012-04-29T09:16:26.900
> 
> 标签：ms-access

我正在教一个人抛光 matura，他们有时必须使用 Access。

我有一个带有列的表`pyt_1`，`pyt_5`。我只想显示这些列相等的行。

在 SQL 中，它看起来像这样：

```
SELECT pyt_1, pyt_5
FROM Ankiety
WHERE pyt_1=pyt_5; 
```

但他必须知道如何在查询设计中做到这一点

我选择了`pyt_1`,`pyt_5`列并添加了条件`pyt_1 = pyt_5`，但 ACCESS 会自动将其转换为字符串，如何避免这种情况？

他将我的 SQL 转换为查询设计，但这很奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T12:47:31.610

您的问题是您写入`= pyt_5`了该列的条件字段`pyt_1`，Access 会自动将其转换为`= "pyt_5"`，对吗？

如果是，则需要放入`pyt_5`大括号 ( `[ ]`)。
这使得 Access 查询编辑器将其识别为列名。

这是一个屏幕截图（带有德语标签的德语 Access 版本，但你明白了）：

![访问查询](../Images/4712ea4d311e0b69b3de18c543ea3fc7.png)

# android - Android，是否可以不同地设置项目构建目标和最低 SDK 版本？

> ID：10371010
> 
> 赞同：1
> 
> 时间：2012-04-29T09:16:29.633
> 
> 标签：android, manifest

当您想通过向导创建项目时，它会要求您输入项目构建目标。假使，假设

1.  我希望我的应用程序支持 Android 2.1 及更高版本，
2.  我的测试设备是安卓 2.3.3 的手机和安卓 3.2 的 7" 平板电脑。

*   在项目构建目标中是否必须选择“Android 2.1 (API level 7)”？
*   我可以将项目构建目标设置为“Android 4.0.3（API 级别 15）”吗

显现：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:23:07.920

是的，项目构建目标 SDK 版本可能高于（但不明显低于）Manifest 中指定的最低 SDK 版本。只需确保避免调用 SDK 版本高于您指定的最低版本的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:25:55.667

是的你可以。targetSdkVersion 帮助 API 级别较高的设备使用最新（优化）版本的实现而不是 minSDKVersion 的默认实现，并防止启用兼容性行为。确保您在运行此版本的设备上进行测试。

参考：[targetSdkVersion](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#target)

# python - 无法读取文件

> ID：10371015
> 
> 赞同：0
> 
> 时间：2012-04-29T09:17:14.027
> 
> 标签：python, python-2.6

为什么我无法读取我刚刚写入文本文件的内容。该代码没有显示任何错误，但我无法阅读我刚刚写入文档的内容。如果有人可以帮助我解决这个问题，那就太好了。顺便说一句，我是编程新手，如果这是一个简单的问题，请原谅我。我使用的是 Python 2.6.1 版

```
from sys import argv

script,file_name = argv
prompt = "> "

target = open(file_name, 'w+b')

print "press CRTL-C enter to escape this"
print "or press RETURN to continue"

raw_input(prompt)

print "Begin erasing stuff Goodbye!"
target.truncate()

print "we are going to start writing to file"

write_1 = raw_input(prompt)
write_2 = raw_input(prompt)
write_3 = raw_input(prompt)

target.write(write_1)
target.write(write_2)
target.write(write_3)

print target.read()

print "closing now!"
target.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:22:18.797

您需要`target.seek(0)`先将文件指针重置为文件的开头，然后再执行`target.read()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T09:54:01.577

值得注意的是，以`"w"`模式打开会自动截断文件，因此以该模式打开，写入文件，然后以`"r"`模式打开可能更容易。那是您避免必须手动截断并回溯：

```
from sys import argv

script, file_name = argv
prompt = "> "

print("Press CTRL+C to exit,")
print("or press RETURN to continue.")

raw_input(prompt)

print("Begin erasing.")
with open(file_name, 'wb') as target:
    print("Begin writing to file.")
    write_1 = raw_input(prompt)
    write_2 = raw_input(prompt)
    write_3 = raw_input(prompt)
    target.write(write_1)
    target.write(write_2)
    target.write(write_3)

with open(file_name, "rb") as target:
    print(target.read()) 
```

我也在使用打开[文件](http://docs.python.org/whatsnew/2.5.html#pep-343-the-with-statement)[的`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)。它不仅更具pythonic和可读性，而且可以为您处理关闭，即使发生异常也是如此。

值得注意的是，目前，这会为您提供全部在一行上的输出，因为写入不会添加换行符，`raw_input()`也不会为您提供导致它继续的换行符。因此，您可能希望将它们添加进去。我们也可以只使用单个`write()`命令，并从我们的所有输入中连接一个字符串：

```
print("we are going to start writing to file")
data = [raw_input(prompt) for _ in range(3)]
target.write("\n".join(data)) 
```

在这里，我使用[列表推导](https://www.youtube.com/watch?v=t85uBptTDYY)来构建输入行的列表。这意味着我们不必写出`line_x = raw_input(prompt)`大量的时间，并且我们可以轻松地更改要使用的行数。这也意味着我们可以轻松`str.join()`地添加我们想要的换行符。

# c - 在 C 中访问结构成员时模拟“继承”

> ID：10371016
> 
> 赞同：0
> 
> 时间：2012-04-29T09:17:19.897
> 
> 标签：c

我有一个关于 C 的问题，并试图模拟部分类型的“继承”，仅在访问结构成员时。看下面的例子：

```
#pragma pack(push,1)
typedef struct foo
{
    int value;
    int value2;
}foo;
typedef struct foo_extended
{
    // "inherits" foo
    int value;
    int value2;
    // "inherits" foo stops
    //we also have some additional data
    float additional;
}foo_extended;
#pragma pack(pop)

//! This function works for both foo types
void workboth(void* objP)
{
    foo* obj = (foo*)objP;

    obj->value = 5;
    obj->value2 = 15;
}

//! This works only for the extended
void workextended(foo_extended* obj)
{
    obj->value = 25;
    obj->value2 = 35;
    obj->additional = 3.14;
}

int main()
{
    foo a;
    foo_extended b;

    workboth(&a);
    workboth(&b);
    workextended(&b);

    return 0;
} 
```

这在我的系统中有效，但我的问题是，只要相关结构的正确打包（取决于编译器），这是否可以移植。我想它也需要#ifndefs 正确地调用其他编译器中的紧密打包。

当然，明显的问题是完全缺乏类型检查并将正确使用的所有责任交给程序员，但我想知道这是否可移植。谢谢！

PS：忘了说我尝试遵守的标准是C99

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T09:32:10.973

我有一个稍微不同的方法。我没有使用相同的值，而是在结构中创建了一个结构，这样就不需要打包：

```
typedef struct foo
{
    int value;
    int value2;
}foo;

typedef struct foo_extended
{
    foo father;
    float additional;
}foo_extended; 
```

现在剩下的和你展示的差不多，有一点不同：

```
void workextended(foo_extended* obj)
{
    obj->father.value = 25;
    obj->father.value2 = 35;
    obj->additional = 3.14;
} 
```

但我会添加一个 id 作为层次结构中第一个对象的字段，以确保对正确的对象进行强制转换。

C 标准保证此方法有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:57:51.497

`struct`从 C11 开始，一些现有编译器也支持作为旧标准的扩展，您应该为此使用匿名

```
struct foo_extended {
    struct {
      int value;
      int value2;
    };
    //we also have some additional data
    float additional;
}; 
```

这样，您的子结构具有完全相同的布局`foo`，特别是涉及其部分对齐的布局：为了`struct`在具有相同顺序的完全相同字段的不同编译单元之间兼容，必须以相同的方式布局。

（你打包的pragma的影响对我来说不是很清楚）

由于您的`foo`结构是第一个结构，`foo_extended`因此它必须始终在该结构中偏移`0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T09:55:47.317

[通过阅读C99 草案](http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1256.pdf)中的 6.7.2.1/12 和 /13 ，我认为可以假设具有相同初始成员的两个不同结构与第一个不同成员兼容。

6.7.2.1/12

> 结构或联合对象的每个非位域成员都以适合其类型的实现定义的方式对齐。

6.7.2.1/13

> 在结构对象中，非位域成员和位域所在的单元的地址按声明顺序递增。一个指向结构对象的指针，经过适当的转换，指向它的初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。

# filesystems - fsync vs write 系统调用

> ID：10371017
> 
> 赞同：6
> 
> 时间：2012-04-29T09:17:21.050
> 
> 标签：filesystems, berkeley-db

我想问一个基本问题，什么时候使用像 fsync 这样的系统调用有用。我是初学者，我一直认为 write 足以写入文件，而使用 write 的示例实际上最后写入文件。

那么像 fsync 这样的系统调用的目的是什么？

只是为了提供一些背景知识，我正在使用 Berkeley DB 库版本 5.1.19，并且有很多关于 fsync() 与编写成本的讨论。这就是我想知道的原因。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T09:39:09.120

将其视为一层缓冲。

如果您熟悉诸如`fopen`and之类的标准 C 调用`fprintf`，那么您应该已经知道缓冲发生在 C 运行时库本身中。

刷新这些缓冲区的方法是`fflush`确保将信息从 C 运行时库传递到操作系统（或周围环境）。

但是，仅仅因为操作系统有它，并不意味着它在磁盘上。它也可以在操作系统中缓冲。

这就是`fsync`需要注意的事情，确保操作系统缓冲区中的内容被物理写入磁盘。

您通常会在日志库中看到这种操作：

```
fprintf (myFileHandle, "something\n");  // output it
fflush (myFileHandle);                  // flush to OS
fsync (fileno (myFileHandle));          // flush to disk 
```

`fileno`是一个函数，它为您提供给定文件句柄的底层`int`文件描述符，并在描述符上执行最终级别的刷新。`FILE*``fsync`

现在这*是*一个相对昂贵的操作，因为磁盘写入通常比内存传输慢得多。

> 除了日志库之外，另一个用例可能对这种行为有用。让我看看我是否记得那是什么。对，就是那样。数据库！就像 Berzerkely DB 一样。如果您想确保数据在磁盘上，这是一个非常有用的功能，可以满足 ACID 要求 :-)

# c - 使用 GDI 将 HBITMAP 保存为 PNG 图像？

> ID：10371019
> 
> 赞同：1
> 
> 时间：2012-04-29T09:17:44.497
> 
> 标签：c, winapi, png, gdi

我正在寻找将 HBITMAP 保存到 PNG 图像。这可能只使用 GDI API 吗？（我使用的是 C，所以没有 GDI+。）我只找到了这样的示例[，](http://msdn.microsoft.com/en-us/library/dd145119%28v=vs.85%29.aspx)以保存到 BMP 文件。或者我应该使用[libpng](http://www.libpng.org/pub/png/libpng.html)并使用[GetDIBits](http://msdn.microsoft.com/en-us/library/dd144879%28v=vs.85%29.aspx)吗？

[相关问题](https://stackoverflow.com/questions/4567875/how-would-i-load-a-png-image-using-win32-gdi-no-gdi-if-possible)（关于阅读）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:35:43.983

不幸的是，GDI 不支持 PNG。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T12:07:34.703

Microsoft Windows API 不直接从 DLL 公开*任何*c++ 类 - c++ 标准没有定义 ABI，因此，使用的调用约定和名称修改留给特定的实现来定义。

因此，至少在 Metro 之前，Windows 操作系统支持的所有“C++”接口实际上都是一个导出 C 兼容 API 的常规 dll，以及一组带有必要模板和内联代码的 c++ 头文件。

因此，GDI+ 有一个在 MSDN 中记录的[Flat API 。](http://msdn.microsoft.com/en-us/library/ms533969%28v=vs.85%29.aspx)

# daemon - FreeBSD 的守护进程库

> ID：10371020
> 
> 赞同：2
> 
> 时间：2012-04-29T09:17:45.500
> 
> 标签：daemon, freebsd

我正在考虑为 FreeBSD 编写一个守护程序，但是，我从来没有这样做过，而且从外观上看，这很棘手。

有没有我可以包含的库，然后只为我的守护进程编写特定的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:07:08.937

很抱歉发布这个答案而不是评论 - 我没有足够的声誉来做后者。

您可能想查看 daemon(3)，这是 FreeBSD 的 libc 中提供的一个函数。它执行诸如关闭标准文件描述符之类的操作，进行设置以使 SIGHUP 无效，等等。源代码在这里：

[http://svnweb.freebsd.org/base/head/lib/libc/gen/daemon.c?view=markup](http://svnweb.freebsd.org/base/head/lib/libc/gen/daemon.c?view=markup)

还有一个手册页。（小心，还有一个包装程序 daemon(1)）。另请注意，它不是可移植的（尽管它可能在 libbsd 中可用，但我不确定）。

FreeBSD 还提供了 libutil（同样，我认为不是可移植的），其中提供了 pidfile_*() 函数来处理 PID 文件，我认为这对于编写守护程序很有用。还有其他注意事项，但这可能会帮助您入门。除非你有一个具体的问题，否则不能多说。

# .net - 如何使用 C#/.NET 执行缺失块纠错？

> ID：10371028
> 
> 赞同：2
> 
> 时间：2012-04-29T09:19:19.950
> 
> 标签：.net, math

我有一个字节数组，可以分成*n*个块。是否有一个 .NET 标准库函数将提供额外的*m*个块，这样如果我后来丢失了*m*个组合的*n+m*个块，第二个函数可以重建原始字节数组？（给定剩余的块以及缺少哪些块的指示。）

如果不是 .NET 标准库，是否有可用的第三方库？

（我不想通过建议特定的算法来影响答案。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:55:54.380

您可以看到将执行[Reed-Solomon Encoding的方法](http://en.wikipedia.org/wiki/Reed-Solomon)[Utility.EncodeRs](http://msdn.microsoft.com/en-us/library/dd159671.aspx)。

（我的记忆有点生疏了，但我相信添加`m`块会让你失去最多`m`带有 RS 的块。）

请注意，这是在 .NET 微框架中，而不是 .NET 标准中，因此您可能需要安装新的东西。

# java - Spring MVC 3 模糊映射

> ID：10371029
> 
> 赞同：0
> 
> 时间：2012-04-29T09:19:37.480
> 
> 标签：java, spring, spring-mvc

我试图为 spring 设置一个基于约定的映射，但它总是给我**模棱两可的映射**错误。这是我的控制器类：

```
package com.bsci.tracker.mvc;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class BaseController {

    @RequestMapping
    public void index(){}

    @RequestMapping
    public void home(){}
} 
```

这是我的xml配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="com.bsci.tracker.mvc" />

    <mvc:annotation-driven />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

</beans> 
```

*另外，我不想在我的控制器方法上提供显式请求映射，我希望它们被方法名称自动调用。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:26:01.453

这是真的，因为您有两个 `@RequestMapping`映射映射到相同的默认路径，如果我没记错的话，它是“/”。

您需要执行以下操作：

```
@Controller
public class BaseController {

    @RequestMapping(value="/yourmapping1",method=RequestMethod.GET)
    public void index(){}

    @RequestMapping(value="/yourmapping2",method=RequestMethod.POST)
    public void home(){}
} 
```

希望能帮助到你。

# excel - 如何让我的公式始终参考最后一张纸？

> ID：10371030
> 
> 赞同：8
> 
> 时间：2012-04-29T09:19:40.463
> 
> 标签：excel, excel-formula, vba

我的 excel 文件中目前有 2 个工作表。

第一个工作表称为摘要页面，它显示第二个工作表的摘要结果。

第二张表称为原始数据。例如，名为 Fruits 的列。

```
Apple
Apple
Apple
Banana
Banana
Pear 
```

在第一张表中，我将有一个公式计算各个水果出现的次数，结果将显示在不同的单元格中。

```
=COUNTIF(Fruits!A2:A7,"Apple")
=COUNTIF(Fruits!A2:A7,"Banana") 
```

我想做的是，我是否可以对公式进行编程，以便每次添加新的原始数据表（第三张表）时，第一张表上的统计数据都可以参考最新的表来获取信息。

（假设数据和所有的定位都和第二张表一样。）

到目前为止，我所做的是提出一个`GETLASTWSNAME()`能够始终检索最后一个工作表名称的函数。但我似乎不可能将函数嵌套在 countif 公式本身中。

```
=COUNTIF((GETLASTWSNAME())!A2:A7,"Apple) 
```

上面的公式是我希望我的公式如何工作的，但遗憾的是 excel 不允许我这样做。

任何意见将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T04:28:32.333

如果您愿意，可以为此使用 XLM/Range Name 解决方法，而不是 VBA

1.  定义一个范围名称，wshNames 来保存工作表名称的数组
    `=RIGHT(GET.WORKBOOK(1),LEN(GET.WORKBOOK(1))-FIND("]",GET.WORKBOOK(1)))`
    [使用 David Hager 的技术](http://spreadsheetpage.com/index.php/eee/P15/)
2.  使用此 Excel 公式从工作表名称数组中提取最后一个工作表名称
    `=INDEX(wshNames,COUNTA(wshNames)+RAND()*0)`

这个公式说查看所有工作表，然后返回最后一个（使用 COUNTA）。该`RAND()*0)`部分确保公式是易变的，并在 Excel 更新时更新

如果您确实使用 VBA，您将需要确保您的`GETLASTWSNAME`函数是可变的，即当发生更改时它会更新。

![在此处输入图像描述](../Images/4a694240496c31582369610f6dc74ed0.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T09:30:30.873

`=COUNTIF(INDIRECT(GETLASTWSNAME() & "!A2:A7"),"Apple")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-10T01:16:36.310

在具有溢出功能和新 Sequence() 的 Excel 中，您可以仅从一个单元格中使用相同的技术列出所有工作表名称！先到后或后到先，您的选择。使用 Transpose，您可以获得每个工作表的列标题（Obs volatile）。
在按照 Tomalak （感谢提示）定义命名公式 wshNames 后，我使用了：

=INDEX(wshNames;COUNTA(wshNames)+1-SEQUENCE(COUNTA(wshNames);1;COUNTA(wshNames);-1))

我的 Excel 正在使用“;” 作为分隔符，您可能需要用逗号更改分号 Rolf H

# actionscript-3 - AS3 出现错误 1180

> ID：10371031
> 
> 赞同：0
> 
> 时间：2012-04-29T09:20:25.163
> 
> 标签：actionscript-3, flash-cs5

我正在flash cs5上构建一个游戏。我正在制作开始屏幕，现在我尝试加载游戏，但我在玩游戏功能时收到错误 1180。下面是它的工作原理

如果我在 this.stageRef 行得到错误，这就是函数。这个类是我的mainMenu，它扩展了basemenu。

```
private function playGame(e:MouseEvent) : void
    {
        unload();
        this.stageRef.dispatchEvent(new Event("gameSTART"));
    } 
```

这是我的引擎功能

```
public function Engine() 
    {
        preloader = new ThePreloader(474, this.loaderInfo);
        stage.addChild(preloader);
        preloader.addEventListener("loadComplete", loadAssets);
        preloader.addEventListener("preloaderFinished", showMenu);
        stage.addEventListener("gameSTART", fGameStart);
    }

    private function fGameStart(e:Event):void 
            {

                     .......... here is all my game code
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:54:51.217

看来，您的 stageRef 不是正确的 EventDispatcher 对象。要么您有另一个自定义 Stage 类，要么当您使用 Stage 对象获取舞台属性时，该属性的所有者尚未在舞台上。所以尝试在源对象的 Event.ADDED_TO_STAGE 事件之后获取舞台属性。或者在您获得 Stage 并传递给 MainMenu 的位置显示您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:57:47.803

使 stageRef 类实现 IEventDispatcher

# mysql - Django South 模式迁移失败：我该怎么办？

> ID：10371036
> 
> 赞同：1
> 
> 时间：2012-04-29T09:21:39.303
> 
> 标签：mysql, django, django-south

我正在将 Django 与 MySQL 一起使用。我安装了 South 并试图将我的应用程序从一种模式迁移到另一种模式。但是，当我运行时`$ python manage.py migrate catalog`，出现以下错误：

```
 - Migrating forwards to 0003_initial.
 > catalog:0003_initial
 ! Error found during real run of migration! Aborting.

 ! Since you have a database that does not support running
 ! schema-altering statements in transactions, we have had 
 ! to leave it in an interim state between migrations.

! You *might* be able to recover with:   = DROP TABLE `categories` CASCADE; []
   = DROP TABLE `product_shapes` CASCADE; []
   = DROP TABLE `materials` CASCADE; []
   = DROP TABLE `style` CASCADE; []
   = DROP TABLE `products` CASCADE; []
   = DROP TABLE `products_shape` CASCADE; []
   = DROP TABLE `products_materials` CASCADE; []
   = DROP TABLE `products_style` CASCADE; []
   = DROP TABLE `products_categories` CASCADE; []

 ! The South developers regret this has happened, and would
 ! like to gently persuade you to consider a slightly
 ! easier-to-deal-with DBMS. 
```

有什么方法可以迁移而不必删除这些表。我有一种感觉，如果我放弃表格，我最终会丢失我试图保存的数据。

编辑：

我相信这是主要错误：

```
_mysql_exceptions.OperationalError: (1050, "Table 'categories' already exists") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:38:56.090

如果这些表中有您要保存的数据，请不要删除它们。

在没有看到实际错误的情况下很难提供任何更具体的帮助，这应该遵循您引用的消息。

# php - PHP - 文章摘要

> ID：10371046
> 
> 赞同：-9
> 
> 时间：2012-04-29T09:23:05.707
> 
> 标签：php, function, article, summary

我正在编写新闻脚本，我想创建摘要功能以从全文内容中获取少量文本。该函数将获取 200 个字符的全文，然后搜索这 200 个字符的最后一个空格。该函数还必须忽略任何 html 或其他代码，并且只显示全文内容的前 200 个字符。

哪个功能最适合我的问题以及如何执行该功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T09:28:31.620

`CodeIgniter`从框架中签出这个辅助函数：

```
/**
* Character Limiter
*
* Limits the string based on the character count.  Preserves complete words
* so the character count may not be exactly as specified.
*
* @access   public
* @param    string
* @param    integer
* @param    string  the end character. Usually an ellipsis
* @return   string
*/

function character_limiter($str, $n = 500, $end_char = '&#8230;')
{
    if (strlen($str) < $n)
    {
        return $str;
    }

    $str = preg_replace("/\s+/", ' ', str_replace(array("\r\n", "\r", "\n"), ' ', $str));

    if (strlen($str) <= $n)
    {
        return $str;
    }

    $out = "";
    foreach (explode(' ', trim($str)) as $val)
    {
        $out .= $val.' ';

        if (strlen($out) >= $n)
        {
            $out = trim($out);
            return (strlen($out) == strlen($str)) ? $out : $out.$end_char;
        }
    }
 } 
```

您可以使用以下功能：

`echo character_limiter($text, 200);`

如果需要避开 HTML 标签，可以`strip_tags`在调用函数之前使用`character_limiter`函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T09:28:43.713

最好的解决方案显然是由编辑器手动填写数据库中的指定“摘要”字段。

它将为您在未来省去很多麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T09:32:34.720

有一个简单的函数叫做`substr($string, $position, $length)`，它可以做到这一点。

像这样使用它

```
$brief = substr($bigContent, 0, 200); //for 200 chars 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T09:38:51.527

我使用以下函数来确保我的预告字符串的长度不超过指定的最大长度，但仍保留整个单词。

```
function teaser( $input, $length = 200)
{
  if( strlen($input) <= $length )
    return $input;

  $parts = explode(" ", $input);

  while( strlen( implode(" ", $parts) ) > $length )
    array_pop($parts);

  return implode(" ", $parts);
} 
```

简短而简单。

# java - 从泛型方法 parameterType 创建 TypeLiteral

> ID：10371048
> 
> 赞同：0
> 
> 时间：2012-04-29T09:23:17.813
> 
> 标签：java, guice

使用：Guice 3

我想知道如何`TypeLiteral`从泛型方法 parameterType 创建一个（**用注入器注入它**）。

这是一个例子：

语境 ：

```
bind(new TypeLiteral<Set<String>>(){}).toInstance(x);
bind(new TypeLiteral<Set<Integer>>(){}).annotatedWith(INJECTOR.class).toInstance(y); 
```

* * *

```
public class Foo
{

public void bar(Injector injector, Set<String> param, @INJECTOR Set<Integer> value)
{
    //...
}

} 
```

* * *

```
public class Example
{
@Inject
Injector injector;

public void methodInjector()
{
    Method[] fooMethods = Foo.class.getMethods();
    for(Method m : fooMethods)
    {
        for(Class<?> c : m.getParameter.getParameterTypes())
        {
            Object o = injector.getInstance(c); 

            /*
              this work for simple Type like "Injector" but 
              don't work for generic type (Set<String>, List<Set<String>>, ...).
            */
        }
    }

}

} 
```

显然注入`java.util.Set`在我的情况下不起作用......也许TypeLiteral有一个技巧来做到这一点......

我希望我的解释清楚，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:00:30.273

正如我[在这里](http://blog.xebia.com/2009/02/07/acessing-generic-types-at-runtime-in-java/)正确理解的那样，您已经解释了如何在运行时访问泛型类型。如果要获取所有类的参数类型是[不可能](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:34:57.093

我找到了使用[TypeLiteral.getParameterTypes(Member)的解决方案](http://google-guice.googlecode.com/git/javadoc/com/google/inject/TypeLiteral.html#getParameterTypes%28java.lang.reflect.Member%29)

# java - 除了核心之外的其他 log4j 库

> ID：10371050
> 
> 赞同：0
> 
> 时间：2012-04-29T09:23:31.703
> 
> 标签：java, log4j

我想知道是否有人知道任何建立在核心 log4j 库之上的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T03:49:00.137

[Logback](http://logback.qos.ch/)和 log4j 的新版本[Log4j 2.0](http://logging.apache.org/log4j/2.x/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:29:30.697

当然有很多库`log4j`用于他们的日志记录，但这将是一个广泛的枚举。但是有几个库`log4j`以某种方式扩展：

*   [Apache Chainsaw](http://logging.apache.org/chainsaw/index.html)是基于 GUI 的日志查看器。
*   [apache-log4j-zeroconf](http://logging.apache.org/log4j/companions/zeroconf/download.html)是用于远程日志记录的插件。
*   [SLF4J](http://www.slf4j.org/)等其他日志框架可以`log4j`用作它们的后端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T23:02:42.807

具有许多新功能的新电锯开发人员快照：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# jquery - 在局部视图的 JQuery 对话框中显示 JQuery 模板

> ID：10371051
> 
> 赞同：0
> 
> 时间：2012-04-29T09:23:55.550
> 
> 标签：jquery, asp.net-mvc-3, model-view-controller

我在这里尝试的是在局部视图的 JQuery 对话框中加载带有数据的 JQuery 模板。我对 MVC 3、JQuery 和 JSON 很陌生，所以不太确定这是否正确。

我有一个 Index.cshtml，我可以像这样简单地调用局部视图：

```
<div id="userList">
@Html.Partial("UserList", new Mvc3Application.Models.User{ Name = "ABC"})
</div> 
```

用户列表.cshtml

```
@model Mvc3Application.Models.User

@{
ViewBag.Title = "UserList";
}

<div id="edit-popup">
<input type="button" onclick="Call();" id="bnt" /> 
</div>

<script id="edit-template" type="text/x-jquery-tmpl">

<input id="edit-id" type="hidden" value="@Model.Id" />
<label>Name</label><input id="edit-name" type="text" value="@Model.Name" />

</script>

<script type="text/javascript">
 function Call() {

var data = {};
data.Id = "1";
data.Name = "XXX";

alert(data.Name);

$("#edit-popup").html($("#edit-template").render(data));

$("#edit-popup").dialog({
modal: true,
autoOpen: true
});
}
</script> 
```

用户模型是一个非常简单的具有这些属性的模型。

```
 public string Id { get; set; }
    public string Name { get; set; } 
```

谁能指出我在这里出错的地方。我需要 JQuery 对话框与模板一起显示其中的数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:46:20.343

该代码将不起作用，因为您在单击调用按钮时正在定义 jQuery UI 对话框。这是完全错误的。理想情况下，您应该这样做。

在某些事件上定义对话框`onDOMReady`，然后单击按钮打开对话框。

```
$(document).ready(function() {
    //render the dialog
    $("#edit-popup").dialog({
        modal: true,
        autoOpen: false
    });
});

function Call() {

    var data = {};
    data.Id = "1";
    data.Name = "XXX";

    alert(data.Name);

    $("#edit-popup").html($("#edit-template").render(data));
    //now open the dialog
    $("#edit-popup").dialog("open");
}​ 
```

注意：请将函数名称从更改为`Call()`更好的名称。

# ruby-on-rails - 表单中的 Rails 单表继承 (STI)

> ID：10371054
> 
> 赞同：0
> 
> 时间：2012-04-29T09:24:44.490
> 
> 标签：ruby-on-rails, single-table-inheritance

我有以下域类：

```
class Rating < ActiveRecord::Base
  validates :kind_id, presence: true # Kind of rating (Class, Type, ...)
end 
```

评级指定飞行员可以驾驶的飞机类别或类型。如果飞行员有等级评级，我们需要知道哪个等级，所以我们将 ID 存储在 STI 表中。

```
class KlassRating < Rating
  validates :klass_id, presence: true
end 
```

如果飞行员有类型评级，我们需要知道是哪种类型，因此我们将 ID 存储在 STI 表中。

```
class TypeRating < Rating
  validates :type_id, presence: true
end 
```

我遇到的问题是如何在表单中获取用户的输入。我现在的表单总是实例化 a `Rating`，无论用户是否在下拉列表中选择了类或类型评级。因此，我的验证从未被评估过。

如何让 Rails 实例化正确的派生类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T13:34:13.520

首先，如果您有不同的状态（KlassRating 的 klass_id 和 TypeRating 的 type_id），那么您真的没有 STI。您应该有一个飞行员等级评级表和另一个飞行员类型评级表。您可能有一个通用评级类，它引用具有多态外键的特定评级类型。在 belongs_to 文档中查找多态。

现在对于 STI，您没有提到“评级”表中有一个名为“类型”的字段。这是必要的，因此如果您存储 KlassRating 或 TypeRating 对象实例化，它会被存储，因此当您检索它时，它将由预期的 ruby​​ 类的对象存储。

# android - ADT 提示重新安装支持库

> ID：10371055
> 
> 赞同：2
> 
> 时间：2012-04-29T09:24:55.683
> 
> 标签：android, eclipse, adt

因此，每次我尝试将支持库添加到项目时，都会提示我重新安装支持库 v8。它不是一个主要问题，因为它会在安装后添加它只是一个烦人的问题。我已经尝试过 eclipse 3.6 和 3.7。我也尝试删除支持库。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:25:58.947

我一个月前[报告了这个错误。](http://code.google.com/p/android/issues/detail?id=27435)如果您的环境与此处列出的环境明显不同，您可能需要添加您的详细信息。

# android - 在 Android 中，如何像谷歌地图一样显示带有方角的警报对话框？

> ID：10371059
> 
> 赞同：4
> 
> 时间：2012-04-29T09:25:58.420
> 
> 标签：android, listview, android-intent, alert, android-alertdialog

如何在 Android 中显示类似于 Google 地图应用程序中的 AlertDialog（方角）？我附上下面的图片。

它是开箱即用的（某些属性或主题）还是我必须自己设置样式？

![在此处输入图像描述](../Images/9c41271323043d49fb3923c8fae7c659.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:38:19.593

我找到了这个教程。希望它会帮助你，因为它确实说它可能会导致问题

[http://blog.stylingandroid.com/archives/271](http://blog.stylingandroid.com/archives/271)

希望这是您正在寻找的（我相信第一张图片是您所追求的）

# html - 供应商/资产/样式表不存在

> ID：10371063
> 
> 赞同：0
> 
> 时间：2012-04-29T09:26:33.510
> 
> 标签：html, ruby-on-rails, css, ruby-on-rails-3

在我的 rails 应用程序目录中，存在 vendor/plugins 和 vendor/assets/stylesheets（这两个都是空的）。我想创建 javascripts 文件夹。我可以手动创建它还是需要运行任何终端命令？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:23:17.487

您可以`javascripts`手动创建文件夹 - 没有特殊命令。

# android - Android：通过 Gmail 共享 zip 文件

> ID：10371065
> 
> 赞同：1
> 
> 时间：2012-04-29T09:26:41.140
> 
> 标签：android, gmail, mime-types

我正在开发一个 Android 应用程序，它应该允许用户通过 Gmail 共享他们的内容。我正在使用 android 版本 2.2(Froyo)。问题是我找不到任何可行的解决方案，我几乎尝试了所有方法，但没有运气。这是我正在使用的代码：

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND);;
sharingIntent.setType("application/zip");

sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
getString(R.string.share_subject));
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, getString(R.string.share_body));

String zipFile = FileProvider.URI_AUTHORITY + File.separator + mItemSelected.getLibraryName() + File.separator + mItemSelected.getZipFileName();

sharingIntent.putExtra(Intent.EXTRA_STREAM, android.net.Uri.parse(zipFile));
startActivity(Intent.createChooser(sharingIntent, (getString(R.string.share_chooser))));
} 
```

在这种情况下的问题是Gmail应用程序，没有明显的原因，正在替换文件的mime类型，并将文件显示为text/html，然后我的应用程序没有显示在可以处理这个问题的应用程序列表中一种文件。另一个限制是我不想在我的意图过滤器中使用 text/html，因为我希望它尽可能集中，如果可能的话，我会定义我自己的 mime 类型......

我做了一些研究，发现了这个[问题](https://stackoverflow.com/questions/6583217/which-mime-type-to-use-to-attach-zip-file-in-gmail)，但没有答案......

我尝试过的更多哑剧类型：

```
application/x-compressed, application/x-zip-compressed
multipart/x-zip and application/octet-stream 
```

这个问题有解决办法吗？？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T13:29:43.413

经过一番麻烦，我发现通过 Intent 启动的 Gmail 不喜欢前缀为 .zip 的附件。因此，我将附件重命名为“.vip”后成功发送了附件。这是一段代码（outFile 是一个重命名为“.vip”的压缩文件）：

```
enter 
   private void sendMail(File outFile) {
        Uri uriToZip = Uri.fromFile(outFile);
        String sendText = "Dear friend,\n\n...";

        Intent sendIntent = new Intent(Intent.ACTION_SEND);
        sendIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
            new String[] { "checcodotti@gmail.com" });
        sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, sendText);
        sendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,"Log of the test " +  expFilename);

    //   sendIntent.setType("image/jpeg");
    //   sendIntent.setType("message/rfc822");
         sendIntent.setType("*/*");
         sendIntent.putExtra(android.content.Intent.EXTRA_STREAM, uriToZip);
         startActivity(Intent.createChooser(sendIntent, "Send Attachment !:"));
    } 
```

如果有帮助，请告诉我。问候 FD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T07:32:21.147

我改进了我之前关于“压缩”部分的答案。现在，通过 GMail 或其他方式发送的 .zip 附件没有问题。试试这个：

```
 {  
              int lung;  
              FileInputStream in;  
              FileOutputStream out;  
              byte[] buffer = new byte[DIM_BUFFER];  
    // compress the file to send  
              String inPath = ctx.getApplicationContext().getFilesDir().getAbsolutePath();  
              outFile = new File(outPath,TestEdit.ZIPNAME);  
              // outFile = new File(outPath,filename + ".vip");  
              in = new FileInputStream(inFile);  
              ZipEntry entry = new ZipEntry(filename + ".csv");  
              try{  
                  out = new FileOutputStream(outFile);  
              // GZIPOutputStream zos;  
                  ZipOutputStream zos;  
                  zos = new ZipOutputStream(new BufferedOutputStream(out) );  
                  zos.putNextEntry(entry);  
                  try {  
                      while ((lung=in.read(buffer)) > 0) {  
                          Log.v(TAG, "Lunghezza di in=" + lung + ". Lungh di buffer=" + buffer.length );  
                          if (buffer.length == lung) {  
                              zos.write(buffer);  
                          } else {  
                              // Gestione del caso in cui il buffer non sia pieno  
                              for (int b = 0; b < lung; b++) {  
                                  zos.write(buffer[b]);  
                              }  
                          }  
                      }  
                  } finally {  
                      zos.closeEntry();  
                      zos.close();  
                      in.close();  
                      out.close();  
                  }  
    }  
  } 
```

# python - 是否有可能：将 C++ QWidget 对象传递给 PyQt 脚本？

> ID：10371067
> 
> 赞同：0
> 
> 时间：2012-04-29T09:26:46.950
> 
> 标签：python, qt

主应用程序是用 C++ 编写的，我无法用其他语言重写它。我可以将 C++ QWidget 对象传递给 PyQt 脚本，以便在脚本中添加 QButton 到 QWidget 吗？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:35:16.920

是的，只要您有办法从 PyQt 中找到该小部件，您就可以。

例如，如果小部件有一个易于记忆的对象名称，例如“MyWidgetFromCpp”，您可以调用：

```
cppWidget = PyQt.QtGui.QApplication.instance().findChild("MyWidgetFromCpp") 
```

您可能需要为每个 QApplication 顶级小部件（由 topLevelWidgets() 返回）调用 findChild() 函数，以防 findChild() 函数搜索不够深入。

# asp.net - 将 String 转换为 double 类型

> ID：10371070
> 
> 赞同：0
> 
> 时间：2012-04-29T09:27:13.687
> 
> 标签：asp.net, string, double, type-conversion, opacity

我有一个简单的下拉列表，如下所示，其中包含一些值：

```
<select id="Opacity">
     <option value="50">50%</option>
     <option value="100">100%</option>
</select> 
```

现在我使用 ajax 调用将选定的值传递给我的 web 方法：

```
 $("#btnGetFiles").click(function () {
                ClearImages();
                $.ajax({
                    type: "POST",
                    url: "Default.aspx/GetFiles",
                    data: JSON.stringify({imgOpacity: $('#Opacity').val()}),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) {
                    }
                 });
 }); 
```

现在在我的网络方法中，如果我将下拉值选择为“50”，则将值设为“50”

这里出现了我的问题，我有以下代码需要设置不透明度：

```
Dim imageOpacity As Single = 0.0F
imageOpacity = CInt(imgOpacity)
imageOpacity = imgOpacity / 100
imageOpacity = 1 - imgOpacity

Dim colorMatrixElements As Single()() = {New Single() {1.0F, 0.0F, 0.0F, 0.0F, 0.0F}, 
New Single() {0.0F, 1.0F, 0.0F, 0.0F, 0.0F}, 
New Single() {0.0F, 0.0F, 1.0F, 0.0F, 0.0F}, 
New Single() {0.0F, 0.0F, 0.0F, imageOpacity , 0.0F}, 
New Single() {0.0F, 0.0F, 0.0F, 0.0F, 1.0F}}

Dim wmColorMatrix As New ColorMatrix(colorMatrixElements) 
```

现在我需要将**"%"**添加到`"imgOpacity"`. 如果我尝试这样做**CInt(imgOpacity + "%")**它会抛出一个错误**，指出字符串无法转换为类型 "Double"**。

那么我该如何纠正呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T09:32:48.900

~~为什么不直接将值除以 100？不是百分比是多少吗？~~

* * *

我认为这是一个没有注意到错字的情况，因为您的变量名称非常相似。

看到这个片段

```
Dim imageOpacity As Single = 0.0F
imageOpacity = CInt(imgOpacity)
imageOpacity = imgOpacity / 100
imageOpacity = 1 - imgOpacity 
```

这里第三和第四个语句的 RHS 必须取值 from`imageOpacity`而不是 from ~~`imgOpacity`~~。将该片段更改为此。

```
Dim imageOpacity As Single = 1 - Convert.ToSingle(imgOpacity) / 100 
```

之后请分配`imageOpacity`而不是~~`imgOpacity`~~再次分配给矩阵

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T12:13:47.857

终于找到了答案。

我已将代码更改为：

```
 imageOpacity = Single.Parse(imgOpacity) 
```

# android - Android facebook 通知图片

> ID：10371072
> 
> 赞同：2
> 
> 时间：2012-04-29T09:27:23.470
> 
> 标签：android, image

我试图弄清楚如何创建一个图像，上面有另一个图像（覆盖？），就像 android facebook 应用程序通知图标一样。

对于那些看过/使用过android facebook app的人来说，当有新的通知进来时，蓝色的通知图标上会出现一个红色的数字（1、2、3等）。

知道这是怎么做到的吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T13:33:21.097

Jeff 的 ViewBadger 为您完成所有工作：http: [//jgilfelt.github.com/android-viewbadger/](http://jgilfelt.github.com/android-viewbadger/)

# php - Symfony 类加载器 - 用法？没有实际使用的例子

> ID：10371073
> 
> 赞同：4
> 
> 时间：2012-04-29T09:27:52.473
> 
> 标签：php, symfony

我一直在玩一些 Symfony 类加载器（阅读其他内容、概念并开始实现）。

我已经阅读了[http://symfony.com/doc/current/components/class_loader.html](http://symfony.com/doc/current/components/class_loader.html)以及我已经更改了目录结构以适应所有内容。这是一个失败的小源代码：

文件名：test.php，目录：C:/test/BE/src/main.php

```
 <?php
    define('BASE_DIR','/../..');

    echo BASE_DIR.'/BE/libs/symphony/component/ClassLoader/2.1.0/UniversalClassLoader.php';
    require_once BASE_DIR.'/BE/libs/symphony/component/ClassLoader/2.1.0/UniversalClassLoader.php';

    use Symfony\Component\ClassLoader\UniversalClassLoader;

    $loader = new UniversalClassLoader();
    $loader->registerNamespace('App\Location\Location', 'Location/Location');

     // You can search the include_path as a last resort.
    $loader->useIncludePath(true);    
    $loader->register();
    use App\Location\Location;
    new App\Location\Location(); //Fatal error: Class 'App\Location\Location' not found in C:/test/BE/src/main.php 
```

文件名：Location.php，目录：C:/test/BE/src/Location/Location.php

```
namespace App\Location;

class Location{
    private $lat;
    private $lng;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T13:22:34.240

通过如下注册您的命名空间：

```
$loader->registerNamespace('App\Location\Location', 'Location/Location'); 
```

autoloader 将在文件中查找`App\Location\Location`类。`Location/Location/App/Location/Location.php`请注意，文件/目录名称区分大小写。

第一个参数`registerNamespace()`是命名空间或命名空间的**一部分**。第二个参数是 PSR-0 兼容库的路径。这意味着该路径内的目录结构应遵循 PSR-0 标准。计算给定命名空间的路径时**不**使用此路径。

如果你想保持你当前的目录结构，下面的代码应该适合你：

```
$loader->registerNamespace('App', __DIR__); 
```

我宁愿将您的源代码放在一个公共目录中，例如 src：

```
src/
  App/
    Location/
        Location.php 
```

然后注册命名空间如下：

```
$loader->registerNamespace('App', 'src'); 
```

通过这样做，您只是告诉自动加载器它应该在 src 文件夹中查找 App 命名空间类。请注意，它适用于 App 命名空间中的每个类（遵循 PSR-0）。

前段时间我写了一篇关于 Symfony 自动加载器的博文。你可能会发现它很有帮助：[Autoloading classes in an any PHP project with Symfony2 ClassLoader component](http://www.zalas.eu/autoloading-classes-in-any-php-project-with-symfony2-classloader-component)

由于您计划使用 Pimple 和一些 Symfony 组件，请查看[Silex 微框架](https://github.com/fabpot/silex)。可能是你需要实现的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T09:41:57.577

你用：

```
$loader->registerNamespace('Pimple', BASE_DIR.'/BE/libs/Pimple/1.0.0/lib/Pimple'); 
```

为 Pimple注册`Pimple`命名空间是没有用的，因为 Pimple 是默认命名空间中的一个类（它没有命名空间）。

`UniversalClassLoader`仅适用于 PSR-0 和 PEAR 兼容的目录布局。如果您的布局不是，您不应该期望它可以工作，也不应该记录它适用于不兼容的布局。

> *明确说明：* **您使用了错误的工具来完成这项工作**。您在过去几个小时内共享的所有文件布局都**与**.`UniversalClassLoader`

除此之外，如果您为其参数提供错误的值，则该类将无法工作。

# ios - 如何为iOS游戏制作切换来控制运动？

> ID：10371074
> 
> 赞同：0
> 
> 时间：2012-04-29T09:27:52.957
> 
> 标签：ios, xcode

我正在制作一款 iOS 游戏，我希望能够通过切换来控制我的角色的移动。

我的想法是，当用户用他们的拇指/手指触摸屏幕时，我会记录触摸开始的位置，然后将用户拇指与触摸开始的方向进行比较，这就是角色应该移动的方向。

我怎么能设置一个触摸手势识别器来做到这一点？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:59:51.087

嗯，在我看来，您对此的想法太高了。您不需要“手势识别系统”来执行此操作。你知道如何判断触球是否触球以及触球的位置吗？你知道怎么知道现在几点了吗？每次通过你的主循环，检查触摸是否向下/仍然向下。当它第一次下降时，记录位置和时间。如果稍后您看到它没有上升并且它位于右侧一定数量的像素，您就知道它滑到了那里。通过比较时间，你知道它滑到那里的速度有多快。

当然，您可能想查看 Cocos2d 的库，它可以为您完成其中的一些工作。但值得先做自己，只是为了学习它。

# sqlite - SQLite 中的非空字符串约束

> ID：10371077
> 
> 赞同：6
> 
> 时间：2012-04-29T09:28:09.117
> 
> 标签：sqlite, constraints

我可以在*SQLite中的**TEXT*列上创建数据库约束，不允许该列的值为空字符串*""*吗？

 **我想允许该列为*null*，但不允许空字符串。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T09:57:09.737

[是的，您可以](http://sqlite.org/syntaxdiagrams.html#column-constraint)：

```
sqlite> create table foo (bar TEXT, CHECK(bar <> ''));
sqlite> insert into foo values (NULL);
sqlite> insert into foo values ('bla');
sqlite> insert into foo values ('');
Error: constraint failed 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T09:57:23.680

您可以使用 CHECK 约束（[http://www.sqlite.org/lang_createtable.html](http://www.sqlite.org/lang_createtable.html)）：

```
SQLite version 3.5.9
Enter ".help" for instructions
sqlite> create table example(col, CHECK (col is null or length(col) > 0));
sqlite> insert into example values ('');
SQL error: constraint failed
sqlite> insert into example values (null);
sqlite> insert into example values ('sample');
sqlite> .nullvalue NULL
sqlite> select col from example;
NULL
sample 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T09:36:18.020

据我所知，SQLite 中不存在类似的约束，但也许您可以使用触发器解决方法，该**触发器**在**INSERT**和/或**UPDATE**上自动将字符串更改为 NULL 为空。**

# ruby-on-rails - 接受嵌套属性使用 mongoid 的 has_one 关系

> ID：10371078
> 
> 赞同：3
> 
> 时间：2012-04-29T09:28:10.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我对使用 Mongoid 有点陌生，但对 ActiveRecord 有丰富的经验。我有以下型号

```
def Company
  field :name

  has_one :owner, autosave: true, class_name: 'User', inverse_of: :company
  accepts_nested_attributes_for :owner
end

def User
  belongs_to :company, inverse_of: :owner
  has_one :profile
end 
```

我的 RegistrationController 有以下方法

```
def new 
  @company = Company.new
  @company.build_owner
  @company.owner.build_profile
  respond_with @company
end 
```

而在我看来...

```
= simple_form_for @company, url: user_registration_path do |f| 
  = f.error_notification
  .inputs
    = f.simple_fields_for @company.owner do |o| 
      = o.input :email, required: true, autofocus: true
      = o.simple_fields_for @company.owner.profile do |p| 
        = p.input :first_name, required: true
        = p.input :last_name, required: true
      = f.input :name, label: 'Company Name'
      = f.input :subdomain
      = o.input :password, required: true
      = o.input :password_confirmation, required: true
  .actions
    = f.button :submit, "Sign up" 
```

每当我提交此表单时，都会返回参数，以便：

```
{"utf8"=>"✓",
 "authenticity_token"=>"6z8+evYUwZwx3iADFewsMHiPl00vT7Eq6WaD8BOnQBc=",
 "company"=>
  {"user"=>
    {"email"=>"testing@testing.com",
     "profile"=>{"first_name"=>"testing", "last_name"=>"testing"},
     "password"=>"testing",
     "password_confirmation"=>"testing"},
   "name"=>"testing",
   "subdomain"=>"testing"},
 "commit"=>"Sign up",
 "action"=>"create",
 "controller"=>"users/registrations"} 
```

首先，我不明白为什么用户属性有键：user，不应该是：user_attributes 还是：owner_attributes？mongoid 网站上的示例似乎表明了这一点。其次，当我在该对象上执行 company = Company.new(params[:company]) 并执行 company.owner 时，我得到一个 nil 对象。但是，执行 company.user 会返回正确的用户对象。我发现如果参数中的键是：owner（而不是：user），则关联应该可以正常工作。但默认情况下不会发生这种情况。也许这与简单形式有关？任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:48:56.620

应该调用该字段`owner`，因为这是模型中字段的名称。

当你调用它时会发生什么`user`是 mongoid 在模型中创建一个动态字段 - `company[user]`。这是正确的行为，并且在正确使用时是一个非常强大的工具。

我不知道`simple_form`，但在标准 rails 中执行此操作的方法是调用`f.fields_for :owner`，它应该为您提供您期望的功能。

# ios - IOS 有没有办法在点击通知上的“视图”后将用户发送到特定视图？

> ID：10371082
> 
> 赞同：2
> 
> 时间：2012-04-29T09:28:40.163
> 
> 标签：ios, xcode, cocoa-touch, push-notification

我在我的应用程序中使用推送通知，我想将用户发送到特定视图，而不是他上次看到的视图。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T09:35:07.167

您需要实现适当的[AppDelegate 消息](http://developer.apple.com/library/ios/ipad/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW4)。

具体来说，您将在`application:didFinishLaunchingWithOptions:`

`application:didReceiveRemoteNotification:`如果应用程序处于活动状态，您可能还会在不同的消息中收到有效负载。

然后，当您知道由于用户触摸通知而启动了您的应用程序时，您可以相应地将他引导到特定视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:31:56.263

我认为您无法控制用户在应用程序启动应用程序（打开动画）时看到的内容。应用程序完全激活后，您可以通过打开适当的视图控制器、设置适当的选项卡等方式将他发送到任何您想要的地方...

# python - python：创建字典时如何禁用自动排序

> ID：10371085
> 
> 赞同：9
> 
> 时间：2012-04-29T09:29:01.420
> 
> 标签：python, sorting, dictionary

我需要这个案例的帮助：

```
m={}
m[1]=1
m[333]=333
m[2]=2

# Result:
{1: 1, 2: 2, 333: 333} 
```

所以即使我最后没有输入'333'，当我打印出来时，我也会在字典的末尾列出这个'333'。为什么这个“字典”会自动排序？以及如何禁用它？我可以创建一个功能来重新排序以修复订单。但这不是我想要的，我只是想打印并获取输出顺序，就像我输入数据时的顺序一样。有什么好的解释吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-29T09:32:42.430

它不是排序。`dict`根本没有排序，所以你不能以任何方式影响键的顺序。有[`collections.OrderedDict`](http://docs.python.org/library/collections.html#collections.OrderedDict)2.7 和 3.1+，还有2.4-2.6 的[独立模块](http://pypi.python.org/pypi/ordereddict)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T09:33:22.593

存储在字典中的项目没有任何固有顺序。它们的打印顺序完全取决于字典中每个键和其他项的哈希值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-02T00:28:42.670

自 3.6 以来发布此问题很长时间后，但仅针对那些登陆此页面的人？字典保留添加项目的顺序。

# ruby - Ruby：有没有办法只模拟现有的类方法，但不是全部？

> ID：10371087
> 
> 赞同：0
> 
> 时间：2012-04-29T09:29:17.143
> 
> 标签：ruby, interface, mocking

有没有办法模拟只存在的类方法（参数数量正确），但不是全部？我想测试我是否使用具有正确数量的参数的现有方法，即使对象被模拟。

我正在使用 ruby​​ 1.9.3 和 mocha (0.11.1) 进行测试。

```
class A
  def a
    return 1
  end
end

... 

def test_...
  object = A.new # or object = mock( '::A' )
  object.expects( :a ) # ok

  object.expects( :b ) # I want "no method error" to be raised...
  object.stubs( :c ) # And here too
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:09:55.910

答案是

```
Mocha::Configuration.prevent(:stubbing_non_existent_method) 
```

PS [http://marklunds.com/articles/one/429](http://marklunds.com/articles/one/429)

PPS 让我自己用谷歌搜索 :( [http://bit.ly/JLrkZQ](http://bit.ly/JLrkZQ)

# objective-c - 哪个更好？NSDictionary/NSMutableDictionary 还是 SQL？

> ID：10371091
> 
> 赞同：0
> 
> 时间：2012-04-29T09:30:56.303
> 
> 标签：objective-c, ios, xcode

我的应用程序从远程服务器广泛提取数据数组，将数组分配给标签、文本字段和其他 UI 组件，然后将用户响应与存储的组件进行比较。

使用 NSMutableArray 和 SQL 的优缺点是什么？哪个更高效且内存更友好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:18:24.480

NS(Mutable)Array 和 SQL 是两个完全不同的东西。首先，NSArray 和常规 C 数组在概念上几乎没有区别。只是 NSArray 是一个 Objective-C 对象，并且在简单的 C 数组之上实现了一些非常有用的特性。

两种类型的数组都是线性的，元素只能通过索引访问。`do`（是的，NSArray 支持一些搜索功能，但它们在内部涉及实际的线性搜索，与简单地自己编写循环没有区别。）

SQL 是一种数据库工具。它实现了定义数据库表的能力，这些表是持久存储的、“关联的”可访问的，并且具有列/单元格的内部结构。

你很少会用一个代替另一个。

# c++ - 在 C++ 中返回“NULL 引用”？

> ID：10371094
> 
> 赞同：48
> 
> 时间：2012-04-29T09:31:19.273
> 
> 标签：c++, object, methods, null, design-patterns

在 JavaScript 或 PHP 等动态类型语言中，我经常执行以下功能：

```
function getSomething(name) {
    if (content_[name]) return content_[name];
    return null; // doesn't exist
} 
```

`null`如果它存在或不存在，我会返回一个对象。

使用引用的 C++ 中的等价物是什么？一般有什么推荐的模式吗？我看到一些框架`isNull()`为此提供了一种方法：

```
SomeResource SomeClass::getSomething(std::string name) {
    if (content_.find(name) != content_.end()) return content_[name];
    SomeResource output; // Create a "null" resource
    return output;
} 
```

然后调用者将以这种方式检查资源：

```
SomeResource r = obj.getSomething("something");
if (!r.isNull()) {
    // OK
} else {
    // NOT OK
} 
```

然而，必须为每个类实现这种神奇的方法似乎很繁重。此外，何时应将对象的内部状态从“null”设置为“not null”似乎并不明显。

这种模式有什么替代方案吗？我已经知道可以使用指针来完成，但我想知道如何/是否可以使用引用来完成。还是我应该放弃在 C++ 中返回“null”对象并使用一些 C++ 特定的模式？任何有关正确方法的建议将不胜感激。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-29T09:34:29.333

您不能在引用期间执行此操作，因为它们永远不应为 NULL。基本上有三种选择，一种使用指针，另一种使用值语义。

1.  使用指针（注意：这要求资源在调用者有指向它的指针时不会被破坏；还要确保调用者知道它不需要删除对象）：

    ```
    SomeResource* SomeClass::getSomething(std::string name) {
        std::map<std::string, SomeResource>::iterator it = content_.find(name);
        if (it != content_.end()) 
            return &(*it);  
        return NULL;  
    } 
    ```

2.  `std::pair`与 a一起使用`bool`来指示项目是否有效（注意：要求 SomeResource 具有适当的默认构造函数并且构造成本不高）：

    ```
    std::pair<SomeResource, bool> SomeClass::getSomething(std::string name) {
        std::map<std::string, SomeResource>::iterator it = content_.find(name);
        if (it != content_.end()) 
            return std::make_pair(*it, true);  
        return std::make_pair(SomeResource(), false);  
    } 
    ```

3.  使用[`boost::optional`](http://www.boost.org/doc/libs/1_49_0/libs/optional/doc/html/index.html)：

    ```
    boost::optional<SomeResource> SomeClass::getSomething(std::string name) {
        std::map<std::string, SomeResource>::iterator it = content_.find(name);
        if (it != content_.end()) 
            return *it;  
        return boost::optional<SomeResource>();  
    } 
    ```

如果你想要值语义并且有能力使用 Boost，我推荐选项三。`boost::optional`over的主要优点`std::pair`是未初始化的`boost::optional`值不构造其封装的类型。这意味着它适用于没有默认构造函数的类型，并为具有非平凡默认构造函数的类型节省时间/内存。

我还修改了您的示例，因此您不会两次搜索地图（通过重用迭代器）。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-29T09:39:29.730

为什么“除了使用指针”？使用指针**是**您在 C++ 中执行此操作的方式。除非您定义一些“可选”类型，它具有`isNull()`您提到的功能。（或使用现有的，例如`boost::optional`）

引用被设计并保证*永远不会为 null*。问“那么我如何使它们为空”是荒谬的。当您需要“可空引用”时，您可以使用指针。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-29T09:34:36.563

一种不错且相对非侵入性的方法，如果为所有类型实现特殊方法，可以避免该问题，是与[boost.optional](http://www.boost.org/doc/libs/1_49_0/libs/optional/doc/html/index.html)一起使用。它本质上是一个模板包装器，允许您检查所保存的值是否“有效”。

顺便说一句，我认为这在文档中得到了很好的解释，但请注意`boost::optional`，`bool`这是一个难以解释的结构。

**编辑**：问题询问“NULL 引用”，但代码片段有一个按值返回的函数。如果该函数确实返回了引用：

```
const someResource& getSomething(const std::string& name) const ; // and possibly non-const version 
```

那么该函数只有在`someResource`被引用的生命周期至少与返回引用的对象的生命周期一样长时才有意义（否则您将有一个悬空引用）。在这种情况下，返回一个指针似乎非常好：

```
const someResource* getSomething(const std::string& name) const; // and possibly non-const version 
```

但是您必须**绝对清楚**，调用者不拥有指针的所有权，也不应该尝试删除它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-29T09:43:04.333

我可以想到几种方法来处理这个问题：

*   正如其他人建议的那样，使用`boost::optional`
*   使对象具有表明它无效的状态（Yuk！）
*   使用指针代替引用
*   *有一个作为空对象*的类的特殊实例
**   抛出异常以指示失败（并不总是适用）*

 ** * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-29T09:40:05.687

与 Java 和 C# 不同，C++ 中的引用对象不能为空。
所以我会建议我在这种情况下使用的 2 种方法。

1 - 使用具有 null 的类型而不是引用，例如 std::shared_ptr

2 - 获取参考作为输出参数并返回布尔值表示成功。

```
bool SomeClass::getSomething(std::string name, SomeResource& outParam) {
    if (content_.find(name) != content_.end()) 
    {
        outParam = content_[name];
        return true;
    }
    return false;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-04T08:37:27.350

下面的代码演示了如何返回“无效”引用；它只是使用指针的另一种方式（传统方法）。

不建议您在将被其他人使用的代码中使用它，因为期望返回引用的函数总是返回有效引用。

```
#include <iostream>
#include <cstddef>

#define Nothing(Type) *(Type*)nullptr
//#define Nothing(Type) *(Type*)0

struct A { int i; };
struct B
{
    A a[5];
    B() { for (int i=0;i<5;i++) a[i].i=i+1; }
    A& GetA(int n)
    {
        if ((n>=0)&&(n<5)) return a[n];
        else return Nothing(A);
    }
};

int main()
{
    B b;
    for (int i=3;i<7;i++)
    {
        A &ra=b.GetA(i);
        if (!&ra) std::cout << i << ": ra=nothing\n";
        else std::cout << i << ": ra=" << ra.i << "\n";
    }
    return 0;
} 
```

宏`Nothing(Type)`返回一个*value*，在这种情况下由`nullptr`- 表示，您也可以使用`0`，将引用的地址设置为该值。现在可以检查此地址，就好像您一直在使用指针一样。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-29T09:46:48.763

这里有几个想法：

备选方案 1：

```
class Nullable
{
private:
    bool m_bIsNull;

protected:
    Nullable(bool bIsNull) : m_bIsNull(bIsNull) {}
    void setNull(bool bIsNull) { m_bIsNull = bIsNull; }

public:
    bool isNull();
};

class SomeResource : public Nullable
{
public:
    SomeResource() : Nullable(true) {}
    SomeResource(...) : Nullable(false) { ... }

    ...
}; 
```

备选方案 2：

```
template<class T>
struct Nullable<T>
{
    Nullable(const T& value_) : value(value_), isNull(false) {}
    Nullable() : isNull(true) {}

    T value;
    bool isNull;
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-04T12:31:32.137

另一种选择 - 我不时使用的一个选项，当你真的不希望返回一个“空”对象而是一个“空/无效”对象时：

```
// List of things
std::vector<some_struct> list_of_things;
// An emtpy / invalid instance of some_struct
some_struct empty_struct{"invalid"};

const some_struct &get_thing(int index)
{
    // If the index is valid then return the ref to the item index'ed
    if (index <= list_of_things.size())
    {
        return list_of_things[index];
    }

    // Index is out of range, return a reference to the invalid/empty instance
    return empty_struct; // doesn't exist
} 
```

它非常简单并且（取决于你在另一端用它做什么）可以避免在另一端进行空指针检查。例如，如果您正在生成一些事物列表，例如：

```
for (const auto &sub_item : get_thing(2).sub_list())
{
    // If the returned item from get_thing is the empty one then the sub list will
    // be empty - no need to bother with nullptr checks etc... (in this case)
} 
```*

# iphone - 尝试每 10 秒更改一次 UIImageView

> ID：10371100
> 
> 赞同：1
> 
> 时间：2012-04-29T09:32:24.337
> 
> 标签：iphone, objective-c, animation, uiimageview

好吧，我的一个视图中有一个 UIImageview 。我想每 10 秒更改一次图像，但我不知道如何制作它。

有什么建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-29T09:41:33.430

首先创建图像数组。

```
NSArray *images = [NSArray arrayWithObjects:[UIimage imagenamed:@"image1.png"],[UIimage imagenamed:@"image2.png"],[UIimage imagenamed:@"image3.png"],[UIimage imagenamed:@"image4.png"]]]; 
```

然后将数组设置为 UIImageViews “animationImages”属性

```
imageView.animationImages = images; 
```

设置动画时间。

```
imageView.animationDuration = 10; 
```

开始动画..

```
[imageView startAnimating]; 
```

要停止动画，只需执行此操作

```
[imageView stopAnimating]; 
```

很简单。。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T09:37:41.003

您将需要使用计时器。

```
NSTimer *timer = [NSTimer timerWithTimeInterval:10 target:self selector:@selector(changeImage) userInfo:nil repeats:true]; 
```

并实现改变图像的方法：

```
- (void) changeImage {
    imageView.image = newImage;
} 
```

您可以将此计时器放入包含 ImageView 的 ViewController 中，或者您可以将 ImageView 子类化并让它自己管理其图像（如果有更多独立的 imageview 需要更改其图像，则特别有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-15T17:23:35.337

对于 Swift 4 地方`Timer.scheduledTimer`呼叫`viewWillAppear`或`viewDidAppear`：

```
Timer.scheduledTimer(timeInterval: 10,
                         target: self,
                         selector: #selector(self.changeView),
                         userInfo: nil,
                         repeats: true) 
```

并为 changeView 功能更改图像

```
@objc func changeView() {
//change image in this function
} 
```

# php - 在 PHP 中从 wordpress 获取永久链接

> ID：10371111
> 
> 赞同：0
> 
> 时间：2012-04-29T09:33:44.447
> 
> 标签：php, wordpress

我是 PHP 的老手，但只涉足过 wordpress，所以请原谅我的无知：

我正在尝试通过它们的相对永久链接获取页面列表，例如：

“/家”、“/联系人”

我看不出哪个功能对此有好处，并且想避免变得笨拙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:37:23.777

我会在一个循环中使用[http://codex.wordpress.org/Function_Reference/get_pages](http://codex.wordpress.org/Function_Reference/get_pages)然后[http://codex.wordpress.org/Function_Reference/get_page_link 。](http://codex.wordpress.org/Function_Reference/get_page_link)我不知道是否有“更好”的方法，但这肯定会奏效。

```
$pages = get_pages(); 
  foreach ( $pages as $page ) {
    $permalink = get_page_link( $page->ID );
  } 
```

对于本地/相对 URL，您可以使用：`get_page_uri($page->ID)`

# sql-server-2005 - 在 SQL Server 2005 中恢复数据库

> ID：10371119
> 
> 赞同：1
> 
> 时间：2012-04-29T09:34:46.810
> 
> 标签：sql-server-2005, backup, restore

```
BACKUP DATABASE [MPRM] TO  DISK = N'\\rauf\shared\MPRM_15_5_10.BAK' 
WITH NOFORMAT, NOINIT,  NAME = N'MPRM-Full Database Backup', 
SKIP, NOREWIND, NOUNLOAD,  STATS = 10 
```

备份过程有效，我`MPRM_15_5_10.BAK`在我的`shared`文件夹 ( `D:\shared\`) 中找到了一个文件。这是从另一台机器创建的备份。

当我尝试恢复备份时，使用以下脚本

```
RESTORE DATABASE [MPRM] 
FROM DISK = N'\\rauf\shared\MPRM_15_5_10.BAK' 
WITH FILE = 1,  NOUNLOAD, STATS = 10 
```

我收到以下错误

> 消息 5133，级别 16，状态 1，第 1 行
> 文件“E:\DATABASES\MPRM.mdf”的目录查找失败，出现操作系统错误 2（系统找不到指定的文件。）。
> 消息 3156，级别 16，状态 3，第 1 行
> 文件“MPRM”无法恢复到“E:\DATABASES\MPRM.mdf”。使用 WITH MOVE 标识文件的有效位置。
> 消息 5133，级别 16，状态 1，第 1 行
> 文件“E:\DATABASES\MPRM_log.ldf”的目录查找失败，出现操作系统错误 2（系统找不到指定的文件。）。
> 消息 3156，级别 16，状态 3，第 1 行
> 文件“MPRM_log”无法恢复到“E:\DATABASES\MPRM_log.ldf”。使用 WITH MOVE 标识文件的有效位置。
> 消息 3119，级别 16，状态 1，
> 在规划 RESTORE 语句时发现了问题。以前的消息提供了详细信息。
> 消息 3013，级别 16，状态 1，第 1 行
> RESTORE DATABASE 异常终止。

为什么系统会询问`*.mdf, *.ldf`文件？它与备份选项而不是恢复脚本有关吗？

我登录了`Windows Authentication`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:07:44.460

如果您的目标服务器没有与原始源服务器相同的磁盘/目录布局，则需要**指定**在还原时存储物理文件的位置。`.bak`备份文件包含逻辑 SQL Server 文件以及源服务器上的原始位置（完整的物理路径`.mdf`和`.ldf`位置）。

所以你需要使用这样的东西：

```
RESTORE DATABASE [MPRM] 
FROM DISK = N'\\rauf\shared\MPRM_15_5_10.BAK' 
WITH FILE = 1,  
MOVE N'MPRM' TO N'D:\MSSQL\Data\MPRM.mdf',  
MOVE N'MPRM_Log' TO N'D:\MSSQL\Data\MPRM_Log.ldf',  
NOUNLOAD, REPLACE,  
STATS = 10 
```

这个命令在这里：

```
MOVE N'MPRM' TO N'D:\MSSQL\Data\MPRM.mdf', 
```

指定在还原到物理位置期间应将调用的**逻辑文件**`MPRM`（这是您在创建 SQL Server 数据库时未指定任何其他内容时的默认设置）移动`D:\MSSQL\Data\MPRM.mdf`（根据需要进行调整）

要查看备份文件中包含的内容，您可以在此处使用此命令：

```
RESTORE FILELISTONLY
FROM DISK = N'\\rauf\shared\MPRM_15_5_10.BAK' 
```

这将向您显示备份中的所有逻辑文件，以及它们从中备份的原始物理文件（在您运行备份命令的源服务器上）。

# osx-lion - OS X Lion：如何在应用程序文件夹下存储持久数据

> ID：10371136
> 
> 赞同：-1
> 
> 时间：2012-04-29T09:36:42.243
> 
> 标签：osx-lion

我需要为我的 Mac 应用程序存储持久数据。我可以将这些数据存储在 plist 或`NSUserdefaults`. 但是我想将这些持久数据存储在我的应用程序文件夹中，这样当我从 Mac 中删除应用程序（移动到垃圾箱）时，这些持久数据也会被删除。我希望它像那样工作。执行此操作的最佳方法是什么？如何将持久数据存储在我的应用程序文件夹中，以便在删除应用程序时也删除数据？

```
NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];        
[ud setObject:@"1" forKey:@"APPLAUNCHED"]; // store user default
[ud synchronize]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:56:01.527

将持久数据存储在应用程序文件夹中不是一个好习惯。您应该根据要存储的内容类型使用主目录或应用程序支持目录

以下描述了 Mac 应用程序指南

[http://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/AppRuntime/AppRuntime.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/AppRuntime/AppRuntime.html)

# javascript - 悬停时将注意力集中在其他元素后面（z 顺序）

> ID：10371142
> 
> 赞同：1
> 
> 时间：2012-04-29T09:37:39.737
> 
> 标签：javascript, jquery, css

我有一个图像，并使用 JQuery 我得到了它，这样当你将鼠标悬停在它上面时，图像的大小会增加，并且位于图像下方的 DIV 会向上滑动并在图像上提供半透明度的覆盖并占据图像区域的下半部分。

这很好用，但是当您将鼠标悬停在叠加层上（但仍与图像位于同一区域）时，图像会再次缩小，因为您不再专注于图像，因此会触发悬停事件。

悬停时如何忽略覆盖，好像在说“我不在乎你何时将鼠标悬停在覆盖上，只要你还在图像区域内”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:30:45.330

您可以使用 mousemove 事件而不是 mouseenter 和 mouseleave 并使用图像尺寸来确定鼠标是否在图像上。

例子：

```
 $(window).mousemove(function(evt) {
            var image = $("#image");
            var imageX0 = image.offset().left 
            var imageY0 = image.offset().top
            var imageX1 = imageX0 + image.width()
            var imageY1 = imageY0 + image.height()
            if( evt.pageX >= imageX0 && evt.pageX <= imageX1 && evt.pageY >= imageY0 && evt.pageY <= imageY1) {
                $("#status").text('Hovered!')
            } else {
                $("#status").text('Not hovered')
            }

        }) 
```

在这里查看：http: [//dl.dropbox.com/u/486054/stackoverflow/hover-overlay.html](http://dl.dropbox.com/u/486054/stackoverflow/hover-overlay.html)

# python - 自动检测 wx.TextCtrl 中的文件或文件夹路径

> ID：10371144
> 
> 赞同：0
> 
> 时间：2012-04-29T09:37:42.530
> 
> 标签：python, wxwidgets, textctrl

是否有一种机制可以检测（突出显示并生成鼠标事件）wx.TextCtrl 中的文件或文件夹路径？

URL 检测存在类似的机制（使用 style = wx.TE_AUTO_URL 和 wx.TE_RICH）。

例子：

“这是我希望 TextCtrl 将***C:\Temp\Folder\temp.txt***检测为路径的示例。”

谢谢，奥马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:24:00.183

据我所知，没有内置样式可以满足您的需求。但是，您总是可以继承 wx.TextCtrl。

下面提供的自定义小部件更改匹配正则表达式的字符串小节的样式。当光标悬停在这些子字符串之一上时，将生成自定义命令事件“EVT_TXT_PATH”。

正则表达式可能需要根据您希望控件识别的路径进行调整。我从可能对您有用的正则表达式库中获取了一个：

[http://regexlib.com/REDetails.aspx?regexp_id=127](http://regexlib.com/REDetails.aspx?regexp_id=127)

```
import wx
import wx.lib.newevent

import re

re_path = re.compile(r'([A-Z]:\\[^/:\*\?<>\|]+\.\w{2,6})|(\\{2}[^/:\*\?<>\|]+\.\w{2,6})')

TextPathEvent, EVT_TXT_PATH = wx.lib.newevent.NewCommandEvent()

class PathTextCtrl(wx.TextCtrl):

    def __init__(self, parent, id=wx.ID_ANY, value="",
                 pos=wx.DefaultPosition, size=wx.DefaultSize,
                 style=0, validator=wx.DefaultValidator,
                 name=""):

        style = style | wx.TE_RICH

        super(PathTextCtrl, self).__init__(parent, id, value, pos, size,
                                           style,validator, name)

        self.groups = []

        self.SetDefaultStyle(wx.TextAttr(wx.BLACK, wx.NullColor))

        self.Bind(wx.EVT_TEXT, self.OnText, self)
        self.Bind(wx.EVT_MOTION, self.OnMotion, self)

    def OnText(self, evt):

        self.StyleText()

        evt.Skip()

    def StyleText(self):

        self.groups = []

        string = self.GetValue()
        n = len(string)

        defstyle = self.GetDefaultStyle()
        self.SetStyle(0, n, defstyle)

        font = self.GetFont()
        font.SetUnderlined(True)
        style = wx.TextAttr(colText=wx.BLUE, font=font)       

        index = 0

        while True:

            match = re_path.search(string, index, n)

            if match:

                start, end = match.span()

                self.groups.append((start, end))

                self.SetStyle(start, end, style)

                index = end+1

            else: return

    def OnMotion(self, evt):

        pos = evt.GetPosition()

        result = self.HitTestPos(pos)

        for group in self.groups:

            x, y = group

            if x <= result[1] <= y:

                string = self.GetValue()[x:y]

                print string

                event = TextPathEvent(id=self.GetId(), url=string)

                wx.PostEvent(self, event)

        evt.Skip()

class TestFrame(wx.Frame):

    def __init__(self, parent, id=wx.ID_ANY, title=""):

        super(TestFrame, self).__init__(parent, id, title)

        panel = wx.Panel(self)

        text = PathTextCtrl(panel, size=(400, -1))

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(text, 0, wx.ALL, 10)
        panel.SetSizer(sizer)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(panel)
        self.SetSizer(sizer)

        self.Fit()

if __name__ == '__main__':

    app = wx.App(redirect=True)
    top = TestFrame(None, title="PathTextCtrl Demonstration")
    top.Show()
    app.MainLoop() 
```

# android - Andorid：如何在状态栏中创建不可擦除的自定义通知？

> ID：10371146
> 
> 赞同：2
> 
> 时间：2012-04-29T09:38:08.510
> 
> 标签：android, notifications, statusbar

我只想在用户交互期间在状态栏上制作一个自定义通知。

我使用这段代码：

```
 Notification notification = new Notification(getBatteryStateResource(percent,status), "notify",System.currentTimeMillis());
    notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
    notification.contentView = new RemoteViews(mContext.getPackageName(), R.layout.statusbar);
    Intent intent = new Intent(mContext, Activity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(mContext, 0, intent, 0);
    notification.contentIntent=contentIntent;
    notification.contentView.setOnClickPendingIntent(R.id.imageView, anotherContentIntent);
    NotificationManager nm = (NotificationManager) mContext.getSystemService(Context.NOTIFICATION_SERVICE);
    nm.notify(42, notification); 
```

此代码仅适用于 android 4 智能手机。在平板电脑上，每次点击通知的imageView，系统都会删除通知。

相反，在 Android 2.3 和 2.2 上，“anotherContentIntent”不启动并且只启动“contentIntent”，为什么？

非常感谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:24:24.063

[`FLAG_NO_CLEAR`](http://developer.android.com/reference/android/app/Notification.html#FLAG_NO_CLEAR)除了使用`FLAG_ONGOING_EVENT`。

# python - Python：尝试从网站收集特定信息

> ID：10371153
> 
> 赞同：0
> 
> 时间：2012-04-29T09:39:25.833
> 
> 标签：python

初级程序员在这里。刚刚完成了@UC Berkeley 的CS61A 入门Python 课，正在考虑尝试实现一个小程序：

基本上，我希望能够输入一个乐队名称，并让程序搜索 www.setlist.fm，并返回一堆该乐队最近的音乐会的曲目。听起来很简单......我对如何处理 urllib 和 urlopen 有一个非常基本的想法，但仅此而已。关于如何开始的任何指示或指导？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T09:46:21.727

阅读他们的 API。 [http://api.setlist.fm/docs/index.html](http://api.setlist.fm/docs/index.html)

阅读如何使用 urllib2 [http://www.voidspace.org.uk/python/articles/urllib2.shtml发出 HTTP GET 请求](http://www.voidspace.org.uk/python/articles/urllib2.shtml)

# python - Lua 中是否有 Python 的 defaultdict 功能？

> ID：10371155
> 
> 赞同：4
> 
> 时间：2012-04-29T09:39:39.450
> 
> 标签：python, lua, defaultdict

Lua 中是否有类似于[`collections.defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)Python 中可用的功能，它自动处理不存在的关联数组键的默认值？

我希望下面的代码设置`nil`为`v`而不是错误。所以基本上是一种`a[2]`（不存在的键）`table`默认情况下的方法：

```
a = {}
v = a[2][3] 

>>> PANIC: unprotected error in call to Lua API (main.lua:603: attempt to index field '?' (a nil value)) 
```

在 Python 中可以这样完成：

```
>>> import collections
>>> a = collections.defaultdict(dict)
>>> print a[2]
{} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T10:02:46.733

是否有 Lua 标准功能可以做到这一点？不，但是您可以使用元表轻松做到这一点。你甚至可以编写一个函数来创建这样的表：

```
function CreateTableWithDefaultElement(default)
  local tbl = {}
  local mtbl = {}
  mtbl.__index = function(tbl, key)
    local val = rawget(tbl, key)
    return val or default
  end
  setmetatable(tbl, mtbl)
  return tbl
end 
```

请注意，每个元素都将获得*相同*的默认值。因此，如果您将默认值设为表，则返回表中的每个“空”元素将有效地引用同一个表。如果这不是您想要的，则必须修改该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-05T22:26:38.613

只是想我会分享我的这段代码版本，如果有人发现它需要一个与表、对象等兼容的版本。此外，与 Nicol 的解决方案相反，这实际上在表中创建了请求的条目。

```
function defaultdict(default_value_factory)
    local t = {}
    local metatable = {}
    metatable.__index = function(t, key)
        if not rawget(t, key) then
            rawset(t, key, default_value_factory(key))
        end
        return rawget(t, key)
    end
    return setmetatable(t, metatable)
end 
```

示例用法：

```
d = defaultidct(function() return {} end)
table.insert(d["people"], {"Bob", "The Builder"})

names = defaultdict(function(key) return key end)
print(names["bob"]) -- bob
names["bob"] = "bob the builder"
names["ashley"] = "ashley the fire princess" 
```

# testing - 在手机上手动上传或安装 BREW 文件

> ID：10371158
> 
> 赞同：0
> 
> 时间：2012-04-29T09:41:00.573
> 
> 标签：testing, brew-framework

我有相当罕见的京瓷手机作为礼物。早在 2006 年，有限数量的手机是为我当地的移动运营商专门开发的，仅用于测试目的。它基于 MSM6500，并且没有任何网络浏览器 BREW 应用程序。我想知道是否可以在其中上传任何本地编译的 BREW 文件，即来自 BREW SDK 2.1 的示例 .mif/.bar 文件？我已经使用 QPST EFS Explorer 挖掘了文件系统。我可以将 *.bar 文件直接复制到手机吗？如果可能，如何将 brew 应用程序安装到本地电话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:01:00.897

[http://hacktherazr.com/qa/how-do-i-side-load-brew-app-verizon-v3m](http://hacktherazr.com/qa/how-do-i-side-load-brew-app-verizon-v3m)在配备 verizon Brew 的手机上讨论了这个问题。

# python - django-访问python字典中的项目

> ID：10371168
> 
> 赞同：0
> 
> 时间：2012-04-29T09:42:27.573
> 
> 标签：python, django, google-app-engine

我的字典如下：

```
data={"BE1234":"abc", "BA3212":"efg", etc} 
```

我通过 django 模板调用它。根据在线手册，他们说“如果您的上下文包含字典`data`，则以下内容将显示字典的键和值”：

```
{% for key, value in data.items %}
{{ key }}: {{ value }}
{% endfor %} 
```

我收到错误：TemplateSyntaxError: 'for' statements with 5 words should end in 'reversed': for key, value in data.items

谁能帮我解决这个错误？真是令人沮丧。只是想知道我是否在做一些愚蠢的事情。提前致谢。

**更新**

我已经“升级”到 django 1.3 并且不再收到错误消息。但是，我仍然没有得到键//值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:18:19.467

也许你`data`作为上下文而不是上下文的一部分传递？

尝试将其作为上下文传递：

```
data={"BE1234":"abc", "BA3212":"efg", etc}
context = {'data': data} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:47:00.477

我认为您的问题是您编写了 data.items 而不是 data.iteritems

# visual-studio - 是否有任何Visual Studio模板工具可以根据其他源代码生成源代码？

> ID：10371170
> 
> 赞同：0
> 
> 时间：2012-04-29T09:42:42.980
> 
> 标签：visual-studio, templates

由于以下原因，我必须编写很多辅助类：

```
//original class
public class Class1{
    public Class1(int p1,int p2){}
}
public class Class2{
    public Class2(int p3,int p4,int p5){}
}
//helper class
public static Helper{
    public static Class1(int p1,int p2){}
    public static Class2(int p3,int p4,int p5){}
} 
```

我需要在设计时自动生成这些助手，所以我认为我需要一个需要这些功能的工具：

*   在设计时编写模板。
*   模板变量可以在设计时基于源代码中存在的类（意味着它们没有编译为程序集）。
*   可以在源代码（分类）更改或文件保存时自动生成。

有没有这样的工具？

顺便说一句：是否有任何工具可以在设计时查询类？就像我想找到没有子类时没有密封的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:47:36.803

也许这有帮助（T4 模板）？ [http://msdn.microsoft.com/en-us/library/bb126445.aspx](http://msdn.microsoft.com/en-us/library/bb126445.aspx)

或者有一种纯手动的方式来使用反射 [http://www.codeproject.com/Articles/19513/Dynamic-But-Fast-The-Tale-of-Three-Monkeys-A-Wolf](http://www.codeproject.com/Articles/19513/Dynamic-But-Fast-The-Tale-of-Three-Monkeys-A-Wolf)

但我敢打赌，这不是你真正想要的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:23:52.787

您可能需要考虑[Roslyn](http://msdn.microsoft.com/en-US/roslyn)。我在使用 Roslyn 之前[重写了类](https://stackoverflow.com/questions/9204875/adding-custom-attributes-to-c-sharp-classes-using-roslyn)，但只是作为一个实验，在类中注入属性。为了使它工作，我必须编写一个控制台应用程序，因为当时 Visual Studio 2010 不允许轻松集成。由于代码变化不大，所以手动运行也没问题。

您可能可以根据您的情况对其进行调整。

# php - 如果它是第一个字符，则删除冒号

> ID：10371175
> 
> 赞同：2
> 
> 时间：2012-04-29T09:43:14.113
> 
> 标签：php, regex, colon

只有当它是字符串的第一个字符时，我才想删除冒号。我尝试了以下方法，但它不起作用。任何帮助，将不胜感激：

```
//remove the colon if its the first character..

$pattern = '/^:/';
$replace = '';
$tweet = preg_replace($pattern, $replace, $tweet); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:46:27.060

转义冒号：

```
$pattern = '/^\\:/'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T09:48:18.500

你也可以把冒号单独放在一个集合中，这样可能更容易阅读：

```
$pattern = '/^[:]/'; 
```

# ios - 在模拟器中查看核心数据的内容

> ID：10371177
> 
> 赞同：2
> 
> 时间：2012-04-29T09:43:19.150
> 
> 标签：ios, xcode, core-data

我有一个一对多的 CoreData 模型。有任务列表和属于任务列表的任务。我的问题是，每当我创建一个新任务时，也会创建一个任务列表。

![](../Images/5b6138ca3b34b52c2a7e4662c26f6a61.png)

“新任务列表”是数据库中名称字段的默认值。“新任务列表”是视图在创建新任务时存储的值。可以看出，每次创建任务时，都会自动创建一个默认名称值的任务列表。

**问题** 这是它应该看起来的样子吗？如果是这样，我如何进行查询以仅选择 Z_ENT = 1 的任务列表名称（那些是父母，对吗？）如果这看起来非常错误，我该如何正确插入内容。我认为我的表关系是正确的 - 但如果这可能是问题，我会发布截图。

**模型图** ![在此处输入图像描述](../Images/951a991424ffc577d5b90f8152ca507c.png)

**我的代码**

选择列表时：

```
 NSManagedObject *managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];
    TaskViewController *taskViewController = [[TaskViewController alloc] init];
    taskViewController.managedObjectContext = [self.fetchedResultsController managedObjectContext];
    taskViewController.tasklist = managedObject; 
```

在 TaskViewController 中，我得到这样的 fetchedResultsController：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:
                              @"(tasklistOfTask == %@)", tasklist];
    [fetchRequest setPredicate: predicate];
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Root"];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController; 
```

然后插入，

```
 NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    [newManagedObject setValue:@"dummy" forKey:@"task"]; 
    [newManagedObject setValue:tasklist forKey:@"tasklistOfTask"]; 
```

managedobjectcontext 是从 AppDelegate 传入的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:26:19.403

您已经在 Tasks 和 Tasklists 之间创建了继承关系，因此每个任务也是一个任务列表，并且两个实体都存储在同一个表中。我建议删除它并更改您的模型，使其看起来像

![这](../Images/1d15132c78eb74d160cd494b8926d215.png)

如果您还没有从您的模型生成托管对象类，那么您的代码将类似于：

```
 NSManagedObject *managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];
    TaskViewController *taskViewController = [[TaskViewController alloc] init];
    taskViewController.managedObjectContext = [self.fetchedResultsController managedObjectContext];
    taskViewController.tasklist = managedObject;

    NSPredicate *predicate = [NSPredicate predicateWithFormat:
                              @"(tasklist == %@)", tasklist];
    [fetchRequest setPredicate: predicate];
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Root"];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

   NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    Task *newTask = (Task *)[NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];
    newTask.taskName = @"dummy";
    newTask.number = [NSNumber numberWithInteger:[tasklist.tasks count] + 1];
    newTask.tasklist = tasklist; 
```

# android - 将参数传递给 AsyncTask 并更改它们

> ID：10371191
> 
> 赞同：0
> 
> 时间：2012-04-29T09:46:30.157
> 
> 标签：android, multithreading, android-asynctask, parameter-passing

我有一个 AsyncTask 做某事：

```
private class Task extends
        AsyncTask<Foo, Void, Boolean> {

    @Override
    protected Boolean doInBackground(Foo... params) {
        // send foo to server;
    }
} 
```

在我的主要课程中，我做了类似的事情：

```
new Task().execute(foo);
foo.setValue(0); 
```

AsyncTask 后台的 foo 的值会一直是旧值吗？或者可能是 foo 的值在 AsyncTask 执行其任务之前设置为 0？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:50:21.167

异步任务在不同的线程上运行，线程之间的通信应该通过使用处理程序的线程消息传递来完成。您不能像您所做的那样更改异步任务成员的值。

这是一个关于线程、异步任务和处理程序的好教程：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

以及使用处理程序的更多示例：[http](http://code.google.com/p/meneameandroid/source/search?q=handleMessage&origq=handleMessage&btnG=Search+Trunk) ://code.google.com/p/meneameandroid/source/search?q=handleMessage&origq=handleMessage&btnG=Search+Trunk ，使用处理程序执行动画：[http ://code.google.com /p/android-page-curl/source/browse/trunk/src/com/mystictreegames/pagecurl/PageCurlView.java](http://code.google.com/p/android-page-curl/source/browse/trunk/src/com/mystictreegames/pagecurl/PageCurlView.java)

# php - php 脚本的错误 CRON - DEBIAN

> ID：10371196
> 
> 赞同：1
> 
> 时间：2012-04-29T09:47:37.627
> 
> 标签：php, cron, debian, crontab

我已经安装了 php5-cli 从 shell 执行它

```
# aptitude update
# aptitude safe-upgrade
# aptitude install php5-cli 
```

我编辑了 crontab

```
crontab -e 
```

使用此代码

```
30 11 * * * (php5 /var/www/dreamteam/jobs/save_events_to_db.php) >> /var/www/dreamteam/logs/cron.log 
```

我手动测试了

```
php5 /var/www/dreamteam/jobs/save_events_to_db.php 
```

没关系

但是 crontab 没有执行它。当我检查系统日志时

```
cat  cd /var/log/syslog 
```

我有这个错误

```
(CRON) error (grandchild #7705 failed with exit status 255) 
```

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:39:25.923

就像上面所说的 Repox，您需要确定 PHP 二进制文件的完整路径。键入“which php5”应该给你这个。

此外，如果您想将错误以及正常输出重定向到您的 cron.log 文件，您应该尝试在行尾添加“2>&1”。

这会将所有标准错误重定向到标准输出（您的 cron.log 文件）。

```
30 11 * * * (<path/to/php5> /var/www/dreamteam/jobs/save_events_to_db.php) >> /var/www/dreamteam/logs/cron.log 2>&1 
```

# c# - mysql已经超过c#网站上的max_user_connections错误

> ID：10371199
> 
> 赞同：2
> 
> 时间：2012-04-29T09:47:53.377
> 
> 标签：c#, mysql

最近我一直在工作的 ac# 网站抛出了一个 -

> mysql 已超过 'max_user_connections

错误。我检查了我的代码，并相信我应该关闭所有打开的连接。运行`SHOW PROCESSLIST`命令后，它列出了许多状态为“睡眠”且“信息”为空的进程，类似于这个 Stack Overflow 问题 -

[Mysql show processlist 列出许多进程sleep and info = null？](https://stackoverflow.com/questions/4053744/mysql-show-processlist-lists-many-processes-sleep-and-info-null)

我可以在数据库设置或连接字符串中做些什么来防止 MySql 挂在进程上吗？我的连接字符串目前看起来像这样 -

```
server=server;User Id=user;password=****;Persist Security Info=True;database=mysql5_867860_footytriv;Pooling=true;Min Pool Size=10;Max Pool Size=15 
```

该网站托管在 discountasp.net 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:02:46.813

这需要大量调查。通常如您所知，MYSQL 从连接池中管理连接实例。有时，所有连接都在使用中。

这导致我们遇到 2 个问题：
1\. 有一些查询需要很长时间才能执行，因此它没有释放连接（一些冗余查询、长时间运行的查询等）
2\. 服务器上的负载太高并且硬件配置不足以处理这么多用户。

在得出结论之前，您必须衡量所有这些。您可以调整配置文件以增加内存、无连接等，但我认为这对您没有帮助！

# python - 从网站获取图像

> ID：10371200
> 
> 赞同：1
> 
> 时间：2012-04-29T09:48:06.503
> 
> 标签：python, html, xml, recipe, calibre

我尝试改进[calibre的](http://calibre-ebook.com/)[配方](http://manual.calibre-ebook.com/news.html)，并用当前报纸的封面图片替换默认的封面图片。

要走的路与`get_cover_url`（[链接](http://manual.calibre-ebook.com/news_recipe.html#calibre.web.feeds.news.BasicNewsRecipe.get_cover_url)）有关。

有两个问题：

1.  封面图片的 URL 每天都在变化。
2.  我对python几乎一无所知。

我希望有这样的解决方案（在伪代码中）：

```
OPEN URL "http://epaper.derstandarddigital.at/";
coverElement = (SEARCH HTML-ELEMENT "<img>" WITH ID "imgPage2" AND CLASS "page");
coverUrl = (GET HTML-ATTRIBUTE "src" FROM coverElement);
RETURN coverUrl; 
```

有没有办法在 python*) 中实现这一点（仅使用 python 标准库）？

*) Calibre-Recipes 似乎是 python 代码

[编辑] 这是我的一个朋友提供的解决方案：

```
#!/usr/bin/env  python

import urllib
from time import strftime

def get_cover_url(self):
    highResolution = True

    date    = strftime("%Y/%Y%m%d")
    # it is also possible for the past
    #date    = '2012/20120503'

    urlP1   = 'http://epaper.derstandarddigital.at/'
    urlP2   = 'data_ep/STAN/' + date
    urlP3   = '/V.B1/'
    urlP4   = 'paper.htm'
    urlHTML = urlP1 + urlP2 + urlP3 + urlP4

    htmlF  = urllib.urlopen(urlHTML)
    htmlC  = htmlF.read()

    # URL EXAMPLE: data_ep/STAN/2012/20120504/V.B1/pages/A3B6798F-2751-4D8D-A103-C5EF22F7ACBE.htm
    # consists of part2 + part3 + 'pages/' + code
    # 'pages/' has length 6, code has lenght 36

    index   = htmlC.find(urlP2) + len(urlP2 + urlP3) + 6 
    code    = htmlC[index:index + 36]

    # URL EXAMPLE HIGH RESOLUTION: http://epaper.derstandarddigital.at/data_ep/STAN/2012/20120504/pagejpg/A3B6798F-2751-4D8D-A103-C5EF22F7ACBE_b.png
    # URL EXAMPLE LOW RESOLUTION: http://epaper.derstandarddigital.at/data_ep/STAN/2012/20120504/pagejpg/2AB52F71-11C1-4859-9114-CDCD79BEFDCB.png

    urlPic  = urlP1 + urlP2 + '/pagejpg/' + code

    if highResolution:
        urlPic  = urlPic + '_b'

    urlPic  = urlPic + '.png'

    return urlPic

if __name__ == '__main__':
    print get_cover_url(None) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:44:47.880

您可以使用该`lxml`库从 HTML 文档中提取元素。基本框架将如下所示：

```
import urllib
import lxml.html

fd = urllib.urlopen('http://epaper.derstandarddigital.at/')
doc = lxml.html.parse(fd)
matches = doc.xpath('//img[@id="imgPage2]')
if matches:
  print matches[0].get('src') 
```

...但是，您提供的 URL 实际上不会生成带有任何`<img>`标签的文档。它几乎完全是一堆 Javascript。

# jquery-mobile - 在选择菜单中获取所选项目的字符串值

> ID：10371201
> 
> 赞同：0
> 
> 时间：2012-04-29T09:48:09.540
> 
> 标签：jquery-mobile

我有以下代码用于选择菜单：

```
<label for="select-choice-0" class="select">Shipping method:</label>
<select name="select-choice-0" id="select-choice-1">
   <option value="standard">Standard: 7 day</option>
   <option value="rush" >Rush: 3 days</option>
   <option value="express">Express: next day</option>
   <option value="overnight">Overnight</option>
</select> 
```

执行 $('select-choice-1').val() 将为我提供所选选项的值，例如，如果选择了第二个选项，则返回的值将是“rush”。

但是，我想获得字符串“Rush: 3 days”。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:20:13.790

找到以下作品：

```
document.getElementById('select-choice-1').options[document.getElementById('select-choice-1').options.selectedIndex].text; 
```

# jboss - 无权访问 javax.naming.Context

> ID：10371202
> 
> 赞同：0
> 
> 时间：2012-04-29T09:48:11.620
> 
> 标签：jboss, osgi, jndi

我正在使用 JBOSS AS 7.1.1。我已经注册了一个数据源，并尝试通过我的 OSGI 包中的 JNDI 访问它，例如：

```
Context ctx = new InitialContext();

DataSource ds = (DataSource)ctx.lookup(datasource_jndi_name); 
```

但是当我将捆绑包部署到 AS 时，出现异常：ClassNotFoundException: javax.naming.Context。

上下文是在 rt.jar 中定义的，所以我尝试将它包装在 bundle 中并将其部署到 AS，但得到了同样的错误。

我试图用 InitialContext 替换 Context 并得到 ClassNotFoundException: javax.naming.InitialContext。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:44:04.473

是的，OSGi 将其隔离开来。你一个`Import-Package`为`javax.naming`。此外，您可能应该使用它`JNDIContextManager#newInitialContext()`来创建初始上下文。

# ios - （模拟）在后台一段时间后重新启动应用程序

> ID：10371206
> 
> 赞同：1
> 
> 时间：2012-04-29T09:48:57.580
> 
> 标签：ios

我有一个应用杂志阅读器应用程序，可以从服务器下载新杂志列表。杂志每天更换一次。我需要确保它们每天至少下载一次。

我在应用程序启动时下载杂志，这可能需要一些时间，所以我总是显示加载屏幕。现在，问题是当app进入后台时，它可以在那里停留很长时间，如果超过一段时间我需要重新下载杂志。我尝试使用`applicationWillEnterForeground`，开始下载杂志并显示加载屏幕，但它显示应用程序在启动时退出时的状态，并且在一两秒后显示加载屏幕，这看起来很奇怪。

我的问题是，在应用程序在后台运行一段时间后，我应该怎么做才能看到加载屏幕？打赌的事情是在一段时间后杀死它，但我认为这是不可能的。其他解决方案是在应用程序从后台恢复之前显示加载屏幕，但我不知道该怎么做，有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:08:44.297

我并不是说这是一个完美的解决方案，但是您是否考虑过禁用在后台运行的应用程序？

![应用程序不在后台运行](../Images/096438f1f4ffffc5750731abceb1749e.png)

这并不适合每个应用程序，它会增加加载时间，但值得一提。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:32:58.893

要杀死它，请尝试：

```
 exit(0); 
```

在应用程序委托方法中...... didEnterBackground 或 Foreground 或其他！

# javascript - 包括 jQuery（如果尚未包括）

> ID：10371211
> 
> 赞同：9
> 
> 时间：2012-04-29T09:50:35.287
> 
> 标签：javascript, php, jquery

如果页面中尚未包含 jquery，我想将其包含在文件中。我怎样才能做到这一点？

我写了这个，但它给出了不想要的输出。

```
<script type="text/javascript">
if ('undefined' == typeof window.jQuery) {
    // jQuery not present
//  alert("Jquery Unavailable");
<?php echo '<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script>'; ?>
} else {
    // jQuery present
    alert("Jquery Available");
}
</script> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-29T09:54:20.597

你不能在 PHP 中做到这一点。试试这个

```
<script type="text/javascript">

if(typeof jQuery == 'undefined'){
        document.write('<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></'+'script>');
  }

</script> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-29T10:38:10.837

```
<script type="text/javascript">
    if(typeof jQuery == 'undefined'){
        var oScriptElem = document.createElement("script");
        oScriptElem.type = "text/javascript";
        oScriptElem.src = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js";
        document.head.insertBefore(oScriptElem, document.head.getElementsByTagName("script")[0])
    }
</script> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-29T10:22:36.743

您可以尝试以下方法：

```
<script>window.jQuery || document.write('<script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"><\/script>')</script> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-29T09:53:51.313

您的 PHP 正在服务器上运行并输出一些文本。

然后浏览器将该文本解释为 HTML 和 JavaScript。

您不能在服务器上运行 PHP，在它已经发送到浏览器的文档中，以响应浏览器中运行的逻辑。

您要么需要完全在 JavaScript 中执行此操作，要么更明智地整理您的服务器端逻辑，以便跟踪是否包含 jQuery。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-22T20:27:30.070

如果你想用 PHP 来做，我认为这更好，你可以这样做

*   在调用 load() 函数之前，创建一个变量，如：

    > var load_script = '否';

*   load() 函数采用一个可选参数，您可以使用该参数将数据发送到服务器。使用它来发布您之前创建的**load_script**变量，如下所示

    > $('#receiver_div').load('mypage.html',{'load_script':load_script},function(html){
    > 
    > //页面加载后要做的事情
    > 
    > })

*   然后在您正在加载的页面中，像这样捕获发布的值

    > $load_script = $_POST('load_script');

*   然后你可以做一个 if 语句来排除你想要这样的脚本

> if($load_script != '否') {
> 
> `echo "<script src="jquery.js"></script>"`;
> 
> }

# c - 带有 Xcode 4.3.2 的 Mac OS X Lion 上的 Flex 和 Bison

> ID：10371212
> 
> 赞同：7
> 
> 时间：2012-04-29T09:50:37.127
> 
> 标签：c, compiler-construction, xcode4.3, flex-lexer

我想开发自己的 C 编译器，以便在大学的编译器课程中更深入地了解 flex 和 bison，但我找不到 flex 和 bison，我在其他一些帖子中已经看到了这些内容。我需要为 Xcode 安装额外的软件包还是有其他方法？

我正在运行 Mac OS X Lion 并拥有 Xcode 4.3.2。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T15:02:36.160

*Flex*和*bison*也包含在 Xcode 4.3 的可选命令行工具下载中。有关如何安装它，请参阅[https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html中的说明。](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html)它们最终安装在 /usr/bin 中。

您可能更喜欢按照 trojanfoe 的建议通过端口获取它们，因为这会为您提供更新的版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T14:50:10.850

安装[macports](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC8QFjAA&url=http://www.macports.org/&ei=GFWdT-zKJuGm0QXRn_iBDw&usg=AFQjCNFPVXqLbZ-ONSRu47qlQ2iCK6CaLg)并执行以下操作：

```
$ sudo port install flex bison 
```

~~但是，您可能需要先使用符号链接来安装*目录：*`/Developer`~~

 ~~```
$ sudo ln -s /Applications/Xcode.app/Contents/Developer /Developer 
```~~  ~~（不再需要*装配*任何东西）。~~

# url - URL中的“fwcc”、“fwcl”和“fwl”参数表示什么？

> ID：10371213
> 
> 赞同：2
> 
> 时间：2012-04-29T09:50:48.610
> 
> 标签：url, parameters, referrals

我注意到一些网站访问者正在访问 www.example.com/?fwcc=1&fwcl=1&fwl=1 。

这说明什么？

搜索它时很难确定，因为许多其他 URL 都将它附加到末尾。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T23:45:01.117

不完全确定，但也看到了这些查询参数。对我的日志进行的一些研究表明，它可能与 facebook 共享有关，可能是由于某种原因由 facebook 链接添加的一些参数。

不要认为有什么可担心的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:52:01.240

这些是查询字符串变量，特定于网站。这就是服务器如何知道有关您浏览的一些独特参数的方式。[这篇维基百科文章](http://en.wikipedia.org/wiki/Query_string)总结得很好。

# php - 让 jQuery 自动完成功能与 PHP 源一起工作

> ID：10371214
> 
> 赞同：3
> 
> 时间：2012-04-29T09:50:57.010
> 
> 标签：php, javascript, jquery, mysql, jquery-autocomplete

我有一个带有此代码的 jQuery 自动完成字段：

```
 var tags = ["a", "ab", "abc", "abcd", "adbce", "abcdef", "abcdefg", "abcdefgh", "abcdefghi", "abcdefghij", "abcdefghijk", "abcdefghijkl", "abcdefghijklm", "abcdefghijklmn", "abcdefghijklmno", "abcdefghijklmnop", "abcdefghijklmnopq", "abcdefghijklmnopqr", "abcdefghijklmnopqrs", "abcdefghijklmnopqrst", ];
      $("input#name").autocomplete({
        position: {
          offset: "0 -10px",
        },
        source: tags
      }); 
```

它使用“标签”数组作为示例输入数据正常工作。

现在我需要一组 MySQL 查询结果而不是那个示例数组。我所做的是将函数调用更改为：

```
$("input#name").autocomplete({
        position: {
          offset: "0 -10px",
        },
        source: "http://absolutepathtofile/autosuggest.php"
      }); 
```

我使用绝对路径来确保我没有在那里犯一些愚蠢的错误，因为我无法让文件返回到自动完成中。我去过 jQuery 文档并找到了一些使用 PHP/MySQL 来返回自动完成结果的示例，但我无法让它工作。

这是我在 autosuggest.php 中尝试过的：

```
$term = $_REQUEST['term'];
$query = "SELECT * FROM merchants WHERE business_name LIKE '%$term%'";
$result = mysql_query($query);

$k=0;
while($row=mysql_fetch_array($result)){

    $aUsers[$k]=$row['business_name'];
    $k++;

}

echo json_encode($aUsers); 
```

我让它尽可能简单，但它没有用。

然后我测试了是否发送了 JSON，所以我这样做了：

```
$array[0]="test";
$array[1]="test1";

echo json_encode($array); 
```

它不起作用。我在任何地方都找不到这个问题，我做错了什么？PHP 版本是 5.3.10，它有 json_encode（以前用过）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T13:41:13.087

```
$.ajax({
     url:"http://absolutepathtofile/autosuggest.php",
     type:"post",
     success:function(html){
         $("#user_phone").autocomplete(
            {position: {offset: "0 -10px"},
            source: html
         });
     }   
}); 
```

*   为我工作得很好并经过测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:56:45.837

当我们没有可用的 json_encode 时，我编写了这个自定义脚本来让下拉菜单在我们的代码中工作，希望它可以帮助您解决问题。

'get_xref_values()' 函数只是根据提供的参数构建一个数组，而 GET - 'term' - 是自动完成文本框中的文本，它由控件自动添加。

“单击”代码只是在用户单击它以及键入时自动生成自动完成下拉列表。

这是jQuery：

```
$("#libraryEventAspectRatio" ).autocomplete({
    source: "/dropDowns/autoXref.php?category=" + "aspectratio",
    matchContains: true,
    minLength: 0
}).click(function(){
    $("#libraryEventAspectRatio" ).autocomplete('search', $(this).val());
}); 
```

这是php：

```
//this page creates simple data for a drop down box to use (jquery's UI autocomplete)

$category       = get_input_get("category");
$description    = get_input_get("term");
$select_field   = get_input_get("selectField");
$select_value   = get_input_get("selectValue");

$order_by       = "description";

$xref_data      = get_xref_values($category, $order_by, $description, $select_field, $select_value);

$str = "[";

foreach ($xref_data as $row):
    $str .= '"' . $row['description'] . '",';
endforeach;

//chop off the last comma
if (count($xref_data)) {
    $str = substr($str,0,-1);
}

$str .= "]";

echo $str; 
```

# java - 弹簧 EL & JSF

> ID：10371218
> 
> 赞同：1
> 
> 时间：2012-04-29T09:51:59.757
> 
> 标签：java, spring, jsf, el

我目前正在尝试将 JSF（尤其是 Richfaces）与 Spring EL 结合使用。

有没有办法验证 Spring EL 表达式而无需导航到定义它的实际页面？我的意思是，当我的表达式中有拼写错误或语法错误时，只有在我实际导航到页面时才会发现它，并且我会收到异常。

是否有一种适用于 Eclipse（或其他 IDE）的插件可以做到这一点？这太棒了:-)我一直在谷歌搜索，但也许我没有给他正确的关键字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:14:32.700

我有使用 IntelliJ IDEA 的经验，它在 Ultimate 版中有 JSF 插件。该插件也检查表达式语言语法。

# android - 如果我使用的是单例，在哪里关闭 SQLiteOpenHelper

> ID：10371233
> 
> 赞同：3
> 
> 时间：2012-04-29T09:54:59.550
> 
> 标签：android

我有以下类允许用户获取`SQLiteOpenHelper`对象

```
import android.content.Context;

public class DBUtils {  

    private DBUtils(){

    }

    private static DBHelper dbHelper ;

    public static synchronized DBHelper getDBHelper(Context context){

        if(dbHelper == null){
            dbHelper = new DBHelper(context, ApplicationMetaData.DATABASE_NAME, null, ApplicationMetaData.DATABASE_VERSION);
        }
        return dbHelper;

    }

    public static synchronized void closeDBHelper(){

        if(dbHelper!=null )
            dbHelper.close();
        dbHelper = null;
    }

    @Override
    protected Object clone() throws CloneNotSupportedException {
        // TODO Auto-generated method stub
        throw new CloneNotSupportedException();
    }

} 
```

我想知道这个单例对象应该在哪里，因为它不会被调用，所以`close`我无法在该方法上进行中继。`onTerminate()`我想在用户退出我的应用程序时关闭它？任何解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T23:03:42.587

不要担心关闭它。只要确保你永远不会创建多个 SQLiteOpenHelper。看这里：

[http://touchlabblog.tumblr.com/post/24474750219/single-sqlite-connection](http://touchlabblog.tumblr.com/post/24474750219/single-sqlite-connection)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T10:25:23.657

由于 Android 设计中没有这样的“应用程序已关闭”事件。你要么必须处理你的数据库连接，`Activity`这样你才能知道你什么时候`Activity`被销毁，或者你必须以某种方式注意哪个对象使用数据库帮助程序，并且只有在没有其他对象不再使用帮助程序时才关闭帮助程序。

如果您继续使用单例解决方案，请注意将上下文而不是上下文传递`Application`给方法，因为这可能会导致内存泄漏。`getDBHelper()``Activity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T10:39:57.020

我建议使用 an`AtomicInteger`来跟踪`getDBHelper`调用次数。然后你可以调用`getDBHelper`每个`Activity`并在`onPause`/处关闭`onDestroy`（无论你的情况如何）。每次关闭呼叫都会减少计数器，如果计数器在您身边，`0`您可以真正关闭您的助手。例如，请参阅ORMlite 中演示此方法的[示例代码](http://ormlite.svn.sourceforge.net/viewvc/ormlite/examples/android/HelloAndroidTwoDbs/src/com/example/hellotwodbs/DatabaseHelper1.java?revision=2538&view=markup)。

# javascript - 为什么 jQuery 不处理 id 和 selector 传递？

> ID：10371235
> 
> 赞同：-3
> 
> 时间：2012-04-29T09:55:26.647
> 
> 标签：javascript, jquery

我有身份证`"#post0"`

和一堂课`"reply"`

当我做：

```
 var rep = ".reply";
 $(rep).toggle(400); 
```

所有具有“回复”类的组件切换。

但是，当我这样做时：

```
var rep = "#post0.reply";
$(rep).toggle(400); 
```

类回复和 post0 的元素没有任何反应......而不是切换它们

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:10:55.730

获取类“回复”的所有元素

```
$(".reply") 
```

例子：

```
<span class="reply">match</span> 
```

* * *

返回所有 id 为“post0”并且有一个类“reply”的元素。请注意，选择器之间没有空格。仅当元素具有所有“链式”选择器时才匹配

```
$("#post0.reply") 
```

例子：

```
<span id="post0" class="reply">match</span> 
```

* * *

返回所有具有类“reply”的元素，该类是id为“post0”的元素的后代注意选择器之间有一个空格

```
$("#post0 .reply") 
```

例子：

```
<div id="post0">
    <span class="reply">span match</span>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T09:58:21.517

`$("#post0.reply")`返回具有 id`post0`和 class的元素`reply`。

`$(".reply")`返回具有类的元素`reply`。

`$("#post0 .reply")``reply`返回嵌套在 id 元素下的具有 class的元素`post0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T10:02:52.340

下面的 JSFiddle 对我有用：

[http://jsfiddle.net/9V7v8/](http://jsfiddle.net/9V7v8/)

当您说您的元素 ID 是“#post0”时；哈希实际上是在 ID 字段中吗？尝试从 id 字段中删除哈希；所以：

```
<p id="#post0"... 
```

变成：

```
<p id="post0"... 
```

保留 # 前缀到 javascript 中的 ID；这告诉 JQuery 它正在寻找一个 ID；所以选择器应该仍然是：

```
var rep = "#post0.reply"; 
```

# android - 面向开发人员的 Facebook 虚拟信用跨平台限制

> ID：10371238
> 
> 赞同：1
> 
> 时间：2012-04-29T09:55:40.700
> 
> 标签：android, facebook, facebook-credits

我在 Facebook Credits 条款页面上注意到了这一点：

> 您不能拥有可以使用 Credits 购买的跨应用程序虚拟货币，因此您不能接受 Credits 作为虚拟货币或其他可在已完成付款的应用程序之外使用的储值项目的付款。

[[资源](http://developers.facebook.com/policy/credits/)]

我希望我的游戏可以在 Facebook、Kongregate、移动平台，可能还有我自己的网站上运行。我计划使用通用虚拟货币，比如 XCash。我想知道我是否可以让玩家使用 Facebook Credits 支付 XCash，并且这个 XCash 也可以通过其他平台购买，例如在 Kongregate 上使用 Kongregate 积分，或者通过我的网站通过信用卡系统购买，而不会违反 Facebook 信用条款。

# c - 使用 MinGW 编译交叉编译器以编译内核

> ID：10371246
> 
> 赞同：0
> 
> 时间：2012-04-29T09:57:15.880
> 
> 标签：c, compilation, operating-system, kernel, cross-compiling

我正在寻找一种在 Windows 上编译业余爱好者编写的内核和微操作系统的方法，到目前为止，我在所有论坛和其他类似地方找到了“构建交叉编译器”的建议。不幸的是，我现在缺乏这样做的知识，所以任何人都可以告诉我如何编译 GCC/Binutils 以使用 MinGW 在 64 位 Windows 7 安装上运行？谢谢你的时间，埃克林。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:38:10.103

将 gcc 编译为交叉编译器应该相当简单，但是我从未在 Windows 上尝试过。

要构建为交叉编译器 gcc 需要配置，`--host=<host_os>`编译器将运行的平台在`--target=<target_os`哪里（在您的情况下是 windows），并且是您的目标平台。正如你所说，它是一个爱好者操作系统，它可能是或类似的。`<host_os>``<target_os>``1586-elf`

[http://wiki.osdev.org/GCC_Cross-Compiler](http://wiki.osdev.org/GCC_Cross-Compiler)有更深入的信息。试一试该页面，看看它是否有帮助。让这个方法在 Windows 上运行应该像使用 GCC 安装 Cygwin 并下载和构建 binutils 和 gcc 一样简单。

**编辑**

这是通过使用`objcopy`剥离用`--nostdlib`. 如果您想要的只是一个平面二进制文件，那么这可能是您的一个选择。

# python - 无法在 Python 中打印泰米尔语字符

> ID：10371257
> 
> 赞同：2
> 
> 时间：2012-04-29T09:59:18.323
> 
> 标签：python, unicode, tamil

我正在尝试在 Python 中使用泰米尔语。却遇到了困难。这是我的代码

```
U=u'\u0B83'
print U 
```

这会引发错误，

> UnicodeEncodeError：“ascii”编解码器无法在位置 0 编码字符 u'\u0b83'：序数不在范围内（128）

我在 ascii 中的默认编码。由于 u0b83 已经是 unicode，它应该以泰米尔语打印字符。

我也试过这个，# - *- 编码：utf-8 -* -。但结果是一样的。

如何在 unicode 中设置它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T10:13:30.433

至少在 Linux 中，您可以在启动 Python 之前将您的语言环境设置为使用 UTF-8：

```
$ export LC_ALL=en_GB.utf8
$ python 
```

您当然可以使用任何具有兼容编码的语言环境（但我推荐使用 UTF-8）。

或者，在输出字符串时对其进行编码：

```
>> print U.encode('utf-8')
ஃ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T10:02:54.853

看看这些较早的问题及其答案：

[Python、Unicode 和 Windows 控制台](https://stackoverflow.com/questions/5419/python-unicode-and-the-windows-console)

[更改 Python 的默认编码？](https://stackoverflow.com/questions/2276200/changing-default-encoding-of-python)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T18:15:09.337

我需要的是`raw-unicode-escape`.

如果我使用`encode('raw-unicode-escape').decode('utf-8')`一切正常。我在这里找到了答案，[Python Convert Unicode-Hex utf-8 strings to Unicode strings](https://stackoverflow.com/questions/7609776/python-convert-unicode-hex-utf-8-strings-to-unicode-strings)

# c++ - 在使用 C++ 进行 win32 GUI 编程时，如何在 TreeViewCtrl 的根项之前添加扩展按钮？

> ID：10371258
> 
> 赞同：2
> 
> 时间：2012-04-29T09:59:30.160
> 
> 标签：c++, user-interface, mfc, treeview, wtl

1.  在 C++、Win32、TreeCtrl 中，如何在根 TVITEM 前添加扩展按钮，如在“美国”前添加扩展按钮。很抱歉我不能发布图片。所以我试着把它吹起来。

    树视图控件

    * * *

    ```
    |  United States           |
    |     - Pennsylvania       |
    |         Altoona          |
    |         Harrisburg       |
    |     + Washington         | 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:38:54.290

有一些关于您可能想要实现的不同样式的 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/bb760013.aspx](http://msdn.microsoft.com/en-us/library/bb760013.aspx)还有这个[http://msdn.microsoft.com/en-us /图书馆/b17bescz.aspx](http://msdn.microsoft.com/en-us/library/b17bescz.aspx)

MSDN 指出

> TVS_LINESATROOT
> 
> 使用行来链接树视图控件根处的项目。如果未指定 TVS_HASLINES，则忽略此值。

# function - CI - 调用成员函数错误 - 为什么？

> ID：10371261
> 
> 赞同：0
> 
> 时间：2012-04-29T09:59:59.267
> 
> 标签：function, codeigniter

我收到“在视图/join_group_form.php 中的非对象上调用成员函数 get_group()”错误并且不知道我在这里缺少什么......

join_group_form.php 有以下代码：

```
echo "Join group: " . $groupid;
$query1 = $this->site_model->get_group($groupid);
foreach($query1 as $r1) :
    echo $r1->group_name;
endforeach; 
```

$groupid 作为数组的一部分从控制器传递，它在第一行回显 $groupid 罚款但我猜出于某种原因，它在调用 $this->site_model->get_group( $groupid)

它所指的 site_model 函数是这样的：

```
public function get_group($id)
{
    // Get rows from DB
    $query = $this->db->get_where($this->groups, array('group_id' => $id));
    // Check if at least 1 row is returned and pass to array
    if($query->num_rows() > 0)
    {
        foreach ($query->result() as $row)
        {
            $data[] = $row;
        }
        return $data;
    }
} 
```

我在我网站的另一部分使用了非常相似的代码，一切正常，所以不明白为什么会出现这个错误，感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:19:30.880

你在调用它之前加载了模型吗？

# bash - bash - cron 执行脚本时出现“无效或不完整的多字节或宽字符”

> ID：10371265
> 
> 赞同：1
> 
> 时间：2012-04-29T10:01:28.567
> 
> 标签：bash, cron

我有一个使用mailx 发送电子邮件的bash 脚本。邮箱配置在 .mailrc 中。我以root身份运行它：

```
linux:~ # ./lprojekt.sh
Resolving host smtp.gmail.com . . . done.
Connecting to 173.194.70.109 . . . connected.
220 mx.google.com ESMTP n20sm30980415wiw.5
>>> EHLO linux.site
250-mx.google.com at your service, [95.49.133.188]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES
>>> STARTTLS
220 2.0.0 Ready to start TLS
>>> EHLO linux.site
250-mx.google.com at your service, [95.49.133.188]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH
250 ENHANCEDSTATUSCODES
>>> AUTH LOGIN
334 VXNlcm5hbWU6
>>> bG1mYnlkYjlAZ21haWwuY29t
334 UGFzc3dvcmQ6
>>> cHJvamVrdDEyMz==
235 2.7.0 Accepted
>>> MAIL FROM: <lmfbydb9@gmail.com>
250 2.1.0 OK n20sm30980415wiw.5
>>> RCPT TO: <daniel@gadawski.pl>
250 2.1.5 OK n20sm30980415wiw.5
>>> DATA
354  Go ahead n20sm30980415wiw.5
>>> .
250 2.0.0 OK 1335692819 n20sm30980415wiw.5
>>> QUIT
221 2.0.0 closing connection n20sm30980415wiw.5 
```

如您所见，它运行正确。

但是，当我尝试使用 cron 运行此脚本时出现问题。

这是我的 /etc/crontab 内容：

```
SHELL=/bin/bash
PATH=/usr/bin:/usr/sbin:/sbin:/bin:/usr/lib/news/bin
MAILTO=root
HOME=/root
#
# check scripts in cron.hourly, cron.daily, cron.weekly, and cron.monthly
#
-*/15 * * * *   root  test -x /usr/lib/cron/run-crons && /usr/lib/cron/run-crons >/dev/null

* * * * * root /root/lprojekt.sh >> /root/Desktop/log.txt 
```

每分钟（现在只用于调试），root 用户都会收到一封邮件：

```
Message 40:
From root@linux.site  Sun Apr 29 13:50:01 2012
X-Original-To: root
Delivered-To: root@linux.site
From: root@linux.site
To: root@linux.site
Subject: Cron <root@linux> /root/lprojekt.sh >> /root/Desktop/log.txt
X-Cron-Env: <SHELL=/bin/bash>
X-Cron-Env: <PATH=/usr/bin:/usr/sbin:/sbin:/bin:/usr/lib/news/bin>
X-Cron-Env: <MAILTO=root>
X-Cron-Env: <HOME=/root>
X-Cron-Env: <LOGNAME=root>
X-Cron-Env: <USER=root>
Date: Sun, 29 Apr 2012 13:50:01 +0200 (CEST)

Invalid or incomplete multibyte or wide character
. . . message not sent. 
```

这个问题的原因是什么？如何解决？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T10:54:06.950

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

你确定它是 LC_TYPE 而不是 LC_CTYPE？后者应该是正确的拼写。语言环境变量 POSIX 或 pl_PL.UTF-8 的其他值是什么？您可以直接在 crontab 文件中设置环境变量，就像使用 SHELL 等一样。尝试将 LC_CTYPE 和/或 LC_ALL 和/或 LANG 设置为 pl_PL.UTF-8。或者也许从您的脚本和它使用的数据文件中查找并删除非 ASCII 字符。-纳米

你是对的，有 LC_CTYPE 而不是 LC_TYPE。其他变量是 POSIX。我在脚本中添加了这一行：export LC_CTYPE=pl_PL.UTF-8，它可以工作。非常感谢您的帮助！——丹尼尔·加达夫斯基

# sql-server - 从网络备份和恢复

> ID：10371266
> 
> 赞同：3
> 
> 时间：2012-04-29T10:01:35.600
> 
> 标签：sql-server

我可以登录到安装在“机器 A”上的 SQL Server。现在我需要`Backup`将'Machine A'的数据库（比如'DB_A'）复制到我的本地磁盘，以便我可以`Restore`将数据库复制到我机器的SQL Server。我试过[这个](https://stackoverflow.com/questions/10371119/restore-database-in-sql-server-2005)，但得到错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T11:45:37.840

您不能直接执行此操作。

SQL Server 只会将其数据备份到服务器计算机上**本地连接**的驱动器 - 或 SQL Server 计算机可以访问并有权写入的网络 UNC 路径。

有了这个：当然，如果您在本地计算机上创建了一个共享文件夹，并且正确设置了所有权限，那么 SQL Server 备份可以写入您本地计算机上的该共享文件夹。这就是将远程服务器备份到本地硬盘的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T12:33:15.963

正如 marc_s 已经说过的，SQL Server 只能备份到本地驱动器或 UNC 路径。
如果使用 SQL Server Management Studio 进行备份，则**只能**备份到本地文件夹，不能备份到其他位置。
要备份到 UNC 路径，您需要通过 T-SQL 进行备份：

*   [远程复制 SQL Server 数据库](https://stackoverflow.com/questions/7424015/copy-sql-server-databases-remotely/7424063#7424063)
*   [如何将 SQL Server 2005 数据库从本地复制到服务器](https://stackoverflow.com/questions/4133273/how-to-copy-a-sql-server-2005-database-from-local-to-the-server/4133726#4133726)

因此，您需要在您的机器上创建一个共享文件夹，并通过 T-SQL 从服务器进行备份。
另一方面 - 您不需要在**您的**机器上创建共享文件夹。您可以将服务器备份到**任何**共享文件夹并从那里恢复。
或者您可以在服务器上本地创建备份，将服务器上的备份文件夹设为共享文件夹，然后将备份从那里直接恢复到您的计算机上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T15:03:19.853

我能行。我做了以下

1.  在您的 PC 中创建一个文件夹，例如`MySharedDB`.

2.  设置文件夹权限如下

    ![在此处输入图像描述](../Images/7dfcccdb228d2b8c34b6661880dd6b8d.png)

3.  然后在 SSMS 的备份屏幕中将 UNC 路径添加`\\rauf\MySharedDB`到`Destination`

# java - Java中的哈希表手动冲突处理

> ID：10371272
> 
> 赞同：4
> 
> 时间：2012-04-29T10:02:49.603
> 
> 标签：java, hashtable, collision

我的任务是做一个银行管理系统。客户账户使用哈希表保存在银行内部，因此对于每个客户，由个人识别号表示，将有一个账户数组列表（客户最多可以有 2 个账户 - 一个储蓄账户和一个消费账户）。

我要做的是手动处理可能发生的碰撞。我怎样才能做到这一点？我必须重写什么方法？我不得不提到 HashTables 不是我的一杯茶，因为我在 C 中使用它们时遇到了困难。

PS - 我打算使用 HashMap 因为我理解它更容易使用。

**编辑**- 手动碰撞处理是必需的。

**编辑 2** - 这是一个要求，因为实验室助理希望我们了解哈希表的工作原理。经过更多的挖掘，我想我需要重写 Hashtable 中的“equals”方法，所以没有 HashMap。这是一个正确的方法吗？（不需要新的 ADT）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:34:53.727

标准哈希表实现会自动进行冲突处理，您无法控制它。但是，您必须做的是为用作键的对象实现`hashCode()`和- 但在/的情况下，标准库也已经完成了。因此，如果任务真的是让您处理冲突 - 那么您必须构建自己的实现。`equals()``String``Number``Map`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T10:05:50.703

> 我要做的是手动处理可能发生的碰撞。我怎样才能做到这一点？

如果您自己进行冲突处理是一项硬性要求，您将需要从头开始实现哈希表。您不能使用`HashMap`或`HashTable`我知道的任何其他现有类......因为它们都为您处理碰撞等。

> 我不得不提到 HashTables 不是我的一杯茶，因为我在 C 中使用它们时遇到了困难。

多么的不幸。您将必须了解它们才能完成此练习。（再想一想，也许这个要求是一件好事......如果它迫使你正确理解哈希表是如何工作的。）

作为记录，有很多关于数据结构的好文章解释了哈希表是如何工作的。如果您没有教科书，[维基百科页面](http://en.wikipedia.org/wiki/Hashtable)非常全面。教科书和维基百科都将描述处理碰撞的各种技术。

* * *

> 经过更多的挖掘，我想我需要重写 Hashtable 中的“equals”方法，所以没有 HashMap。这是一个正确的方法吗？（不需要新的 ADT）

我不这么认为。

*   /的`equals`方法与哈希表条目的冲突处理无关。`Hashtable``HashMap`

*   `Hashtable`/中的碰撞检测逻辑在`HashMap`私有方法中，因此您*不能*直接覆盖它。

我认为实验室助理希望/期望您实现哈希表 ADT，但我不知道如何避免这样做。但是，嘿，你总是可以*问实验室助理*他或她*希望*你做什么。

* * *

额外建议：地图的目标类型应该是一个自定义类，其中包含对两个帐户的引用，以及用户的个人详细信息。它不应该是一个`ArrayList`.

# python - py2exe 特征图形用户界面

> ID：10371276
> 
> 赞同：0
> 
> 时间：2012-04-29T10:03:13.027
> 
> 标签：python, py2exe, traits, enthought

我正在尝试用 py2exe 打包我的程序。它使用特征 GUI。
将函数“convert_image”中 image.py 中的 import 语句移出 try 块后，装箱的 exe 在以下第二点失败：

1：dist\traitsui\ui_traits.py：从 .image.image 导入 ImageLibrary
2：dist\traitsui\image\image.py：从 traitsui.ui_traits 导入 HasBorder、HasMargin、Alignment

文件结构：

```
root
+-...
+-main.py
+-setup.py
+-dist
  +-...
  +-main.exe
  +-traitsui
    +-...
    +-ui_tratis.py
    +-image
      +-image.py 
```

通过将以下内容添加到 image.py

```
import sys
raise Exception(str(sys.path)) 
```

我得到： 异常：['C:\Users...\dist\.']
所以看来路径设置正确。

* * *

错误跟踪：

```
Traceback (most recent call last):
  File "main.py", line 8, in <module>
  File "gui\FileSelect.pyc", line 8, in <module>
  File "traitsui\api.pyc", line 27, in <module>
  File "traitsui\basic_editor_factory.pyc", line 30, in <module>
  File "traitsui\editor_factory.pyc", line 32, in <module>
  File "traitsui\helper.pyc", line 32, in <module>
  File "C:\Users\...\dist\.\traitsui\ui_traits.py", line 158, in <module>
    from .image.image import ImageLibrary
  File "C:\Users\...\dist\.\traitsui\image\image.py", line 34, in <module>
    from traitsui.ui_traits import HasBorder, HasMargin, Alignment
ImportError: cannot import name HasBorder 
```

* * *

setup.py：https://gist.github.com/2570888 [_](https://gist.github.com/2570888)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:33:04.267

尝试添加`packages: ["traitsui"]`到`py2exe`的选项字典（使用`skip_archive`选项）。

我认为 py2exe 没有检测到该软件包`traitsui.ui_traits`正在被使用。您需要强制它`traitsui`在分发中包含整个包。

**注意：**只是猜测，未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:23:57.410

嗯，我用于图像的 Enthought 包似乎有问题。

所以这里的新设置文件有效： [https ://gist.github.com/2570888](https://gist.github.com/2570888)

# ios5 - 部分卷曲过渡导致控件调整大小

> ID：10371277
> 
> 赞同：0
> 
> 时间：2012-04-29T10:04:10.133
> 
> 标签：ios5, uiviewcontroller, modalviewcontroller

在 iOS 5（基于故事板的）应用程序中，我使用部分卷曲过渡来展示模式视图控制器。当转换发生时，模态视图控制器正在显示，我可以看到模态视图控制器上的一些控件（主要是 UIButtons 和 UISegmentedControls）正在调整大小。它们似乎正在从较小的尺寸动画到适当的、完全定义的尺寸。我不确定为什么会发生这种情况，从用户的角度来看它看起来很糟糕。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:05:14.770

来自[iOS：如何在部分卷曲中停止文本动画](https://stackoverflow.com/a/9763558/1409904)：

将 [self.view layoutIfNeeded] 放入通过 curl 动画显示的视图控制器的 -viewDidLoad 实现中。这使得按钮及其内容在动画开始之前布局一次，而不是在动画期间尝试进行布局（并在周围发生变化时重做）。

# arduino - 用 arduino 建造一个喷泉

> ID：10371278
> 
> 赞同：2
> 
> 时间：2012-04-29T10:04:21.967
> 
> 标签：arduino

我正在做 arduino 项目来制作喷泉。喷泉的想法在链接中给出：[喷泉示例](http://www.youtube.com/watch?v=Wldl_voZjoA&feature=endscreen&NR=1)。此外，我正在考虑通过在全旋转伺服电机的帮助下旋转底座来修改它，但我已经尝试过几次用 arduino 运行伺服电机并且它不工作。但是，半转伺服电机很容易运行。你能帮我解决这个问题吗？

此外，我还想知道如何使用直流水泵给水加压。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:42:53.730

直流水泵？除非你有一个可以工作的 5v 泵，否则你需要一个带有 AC 适配器的泵（这样你就可以将它插入普通插头）并执行类似[本文](http://www.instructables.com/id/Tweet-a-Pot-Twitter-Enabled-Coffee-Pot/#step1)的操作。我知道它是咖啡机和 Twitter，但它会告诉你如何控制可以插入的普通设备。使用全旋转伺服系统，你需要像普通伺服系统一样对待它，并使用伺服库给它一个学位. （您可能需要在[Arduino 的网站](http://arduino.cc)上下载它）然后您需要将其设置为大约 90 度以停止，180 度以全速前进，0 以全速反向。（90 度可能是 85 度、92 度等。）如果你想让它慢一点，就在停止和全速之间。

使用伺服确保它也是 5v - 如果它是 9v，则将正极连接到 Arduino 的 VIN，接地，并向您选择的任何引脚发送信号。如果它是 9v，请不要忘记将 9v 壁式适配器插入桶形插孔并在需要时切换电源。（vin 是您输入的任何输入；如果您放入 9v 适配器，则 VIN 引脚将为 9 伏，但 5v 引脚和 3.3 伏引脚将保持不变。如果您将 VIN 连接为 9v 电池没有桶形插孔适配器，这就是为什么同一侧有两个接地。）

希望这会有所帮助，祝你好运。

# java - 蓝牙服务器中的本机库丢失错误

> ID：10371281
> 
> 赞同：0
> 
> 时间：2012-04-29T10:05:00.590
> 
> 标签：java, bluetooth, bluecove

当我尝试运行蓝牙服务器时，出现此错误。

我使用的是Windows7 64位，i5系统。

```
C:\Bluetooth Server>java BluetoothServer
Native Library intelbth not available
Native Library bluecove not available
Exceptionjavax.bluetooth.BluetoothStateException: BlueCove not available 
```

我该如何克服这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:26:13.677

bluecove 需要一个本地库，检查它是否可用（我不是 Windows 人，但我记得它必须驻留在 system32 或类似的东西中）

# matlab - 如何在matlab中绘制eyr图？

> ID：10371283
> 
> 赞同：1
> 
> 时间：2012-04-29T10:05:20.970
> 
> 标签：matlab, object, subplot

我有这个matlab代码：

```
h1= commscope.eyediagram('SamplingFrequency',sample_rate,'SamplesPerSymbol',sample_rate/B,...
   'SymbolsPerTrace',4,'RefreshPlot', 'on','MaximumAmplitude',1.2);
figure(100)
subplot(2,2,1);
plot(h1);

subplot(2,2,3);
plot(h1) 
```

我想在两个子图中绘制 h1 ，但它会打开新数字并且不会将其放在同一个图中。为什么会发生，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:08:22.967

我不熟悉`commscope.eyediagram`函数，但我认为这`h1`已经创建了一个图而不是数据。

我用数据尝试了你的代码

```
h1 = 1:10; 
```

它工作得很好。

如果我的猜测是正确的，您应该`h1`使用其中一种`get`方法获取数据。就像是：

```
data=get(h,'XData'); 
```

然后像这样重写你的代码：

```
figure(100)
subplot(2,2,1);
plot(data);

subplot(2,2,3);
plot(data) 
```

# mysql - 如何管理锁以防止重复插入

> ID：10371287
> 
> 赞同：0
> 
> 时间：2012-04-29T10:06:13.200
> 
> 标签：mysql

我正在尝试缓存聚合，但由于并发性可能会遇到参照完整性违规..

这是我正在做的事情（有点归结）：

```
select  low, high
into    l_low, l_high
from    nasd_stats
where   symbol_id = l_symbol_id;

if( l_low is NULL ) then 
      select  max(last),
              min(last)  
      into    l_high, l_low
      from    nasd
      where   symbol_id = l_symbol_id;

      insert  into nasd_stats values ( l_symbol_id, l_low, l_high );
end if; 
```

因此，两个用户可以运行具有此代码的存储过程，并同时检测到 l_low 为空，然后在 min/max 聚合之后同时尝试并插入到 nasd_stats 中（其中一个将失败，因为 nasd_stats 上有一个基于 symbol_id 的唯一键）。

知道如何防止这种情况发生吗？

我猜我可以这样做：

```
Start Transaction;
delete from nasd_stats where symbol_id = l_symbol_id;
insert into nasd_stats values ( l_symbol_id, l_low, l_high;
Commit; 
```

逻辑是，删除会锁定行（即使它不存在），然后插入会做我想做的事。

TIA。

大学教师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:37:49.980

如果键是在 symbol_id 字段上定义的，则按以下方式执行查询

```
insert  into nasd_stats Select  distinct l_symbol_id, l_low, l_high  from nasd_stats where not exists (Select 1 from nasd_stats where symbol_id  = l_symbol_id) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T20:38:06.527

您可以只检查插入中的符号 ID 并且它存在然后有人已经得到它，所以您不需要再插入？

所以你的代码是一样的，但是插入语句是

```
 insert  into nasd_stats values ( l_symbol_id, l_low, l_high ) where symbol_id =    l_symbol_id AND l_low is NULL ; 
```

# ruby-on-rails - Rails：Application.css 是否加载所有 css.scss 文件？

> ID：10371291
> 
> 赞同：2
> 
> 时间：2012-04-29T10:06:51.387
> 
> 标签：ruby-on-rails, layout, sass

我读到 application.css 中的以下行包含树中的所有 css 文件

```
*= require_tree . 
```

我的困惑是，根据我的发现（如果我错了，请纠正我），如果我希望 css 文件与渲染它们的控制器匹配时加载，我需要将以下行添加到我的 application.haml 中：

```
 = stylesheet_link_tag params[:controller] 
```

疑问1：我真的需要添加这一行吗？我认为这是按照惯例自动完成的。（我猜答案是肯定的，我需要包括这一行）

疑问2：由于 application.css 由于“require_tree”而加载了所有 css 文件，是否会导致与其他每个 css 文件发生某种冲突/混乱？

疑问 3：如果我想使用 require_tree 来加载该目录中的所有骨架文件，并且当屏幕呈现时，要加载特别是控制器 css。

例如，

我有：

*   应用程序.css
*   some_basic_styling.css
*   主页.css.scss
*   邀请.css.scss

我的 application.css 将包含所有的 css 文件（由于 require_tree）。home.css 应该由 home 控制器加载，invitation.css 应该由邀请控制器加载。我需要哪些步骤来确保这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T00:23:14.813

在带有资产管道的 Rails 3.1 中有一个默认的 sprocket 命令`require_tree .`，它加载 app/assets/stylesheets/ 中的所有文件并将其编译为 application.css。

该`= stylesheet_link_tag params[:controller]`命令基本上将其输出到您的视图中。

`= stylesheet_link_tag :products`如果从产品控制器查看。

*不需要*将所有文件编译到 application.css 中。默认情况下，所有文件都会自动编译到 application.css 中。

每个控制器都需要一个样式表的用例是，如果您*不这样做* `require_tree .`。基本上，您不希望在一个样式表中编译所有内容。它与默认值相反。

# php - 展开数据库数组 PHP

> ID：10371295
> 
> 赞同：3
> 
> 时间：2012-04-29T10:07:32.500
> 
> 标签：php, arrays, explode

我正在尝试将从数据库数组中检索到的段落分解为单独的单词。这是做这件事的正确方法吗，因为它目前给出一个错误，说explode() 需要2 个参数，所以它一定不能拾取$row 数组。

```
function words() {
        $query = mysql_query("SELECT text FROM table WHERE textID = 1");
        while($row = mysql_fetch_array($query)) {
            $e[] = explode(" ", $row);
            foreach($e as $r) {
                echo $r;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T10:10:27.827

```
function words() {
        $query = mysql_query("SELECT text FROM table WHERE textID = 1");
        while($row = mysql_fetch_array($query)) {
            $e[] = explode(" ", $row[0]);
            foreach($e as $r) {
                echo $r;
            }
        }
    } 
```

$row 是数组。选择要爆炸的第一个元素。阅读[Explode](http://php.net/manual/en/function.explode.php)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:29:52.503

```
function words() { 
        $query = mysql_query("SELECT text FROM table WHERE textID = 1"); 
        while($row = mysql_fetch_array($query)) { 
            $e[] = explode(" ", $row[0]); 
            foreach($e as $r) { 
                echo $r; 
            } 
        } 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T10:39:45.303

您在这里使用了错误的功能架构。
你根本不需要`words()`功能。`explode`足够。
虽然您强烈需要一个从 mysql 获取数据的函数，这显然与您的爆炸需求无关。
另请注意，函数不应进行任何输出，而应仅保留值（仅用于输出的函数除外）。

所以，函数可以是

```
function dbgetvar($query){
  $res = mysql_query($query);
  if (!$res) {
    trigger_error("dbget: ".mysql_error()." in ".$query);
    return FALSE;
  }
  $row = mysql_fetch_row($res);
  if (!$row) return NULL;
  return $row[0];
} 
```

你的代码变得如此简单

```
$text  = dbgetvar("SELECT text FROM table WHERE textID = 1");
$words = explode(" ",$text);
foreach ($words as $w) echo $w; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-29T10:44:47.047

```
function words() {
        $query = mysql_query("SELECT text FROM table WHERE textID = 1");
        while($row = mysql_fetch_array($query)) {
            $e = explode(" ", $row);
            foreach($e[0] as $r) {
                echo $r;
            }
            }
    } 
```

$row 完全用字段值填充，因此 $e[0] 是正确的变量。

# xcode4 - pragma pack(1) 和 __attribute__ ((aligned (1))) 有效

> ID：10371296
> 
> 赞同：18
> 
> 时间：2012-04-29T10:07:39.810
> 
> 标签：xcode4, llvm, pragma, pack

我的代码过去可以正常工作，但现在结构体大小突然变为 16 字节。它曾经是 13 个字节。我最近从 Xcode 4.2 升级到 Xcode 4.3.1 (4E1019)。

```
#pragma pack(1)
struct ChunkStruct {
    uint32_t width;
    uint32_t height;
    uint8_t bit_depth;
    uint8_t color_type;
    uint8_t compression;
    uint8_t filter;
    uint8_t interlace;
};
#pragma pack()
STATIC_ASSERT(expected_13bytes, sizeof(struct ChunkStruct) == 13); 
```

我尝试使用不成功

```
#pragma pack(push, 1)
/* struct ChunkStruct { ... }; */
#pragma pack(pop) 
```

我也尝试了以下方法，但没有运气

```
struct ChunkStruct {
    uint32_t width;
    uint32_t height;
    uint8_t bit_depth;
    uint8_t color_type;
    uint8_t compression;
    uint8_t filter;
    uint8_t interlace;
} __attribute__ ((aligned (1))); 
```

**如何使用 Xcode 4.3.1 打包结构？**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-29T10:11:35.667

Xcode 使用`gcc`和`clang`编译器，它们都用于`__attribute__((packed))`指定结构打包。

```
struct foo {
  uint8_t bar;
  uint8_t baz;
} __attribute__((packed)); 
```

Using`__attribute__((aligned(1)))`告诉编译器从下一个字节边界开始每个结构元素，但没有告诉它最后可以放置多少空间。这意味着允许编译器将其`struct`向上舍入为机器字长的倍数，以便更好地用于数组和类似内容。`__attribute__((packed))`告诉编译器根本不使用任何填充，即使在`struct`.

# web - 如何创建一个自动滴答页面来更新我的服务器数据库？

> ID：10371299
> 
> 赞同：0
> 
> 时间：2012-04-29T10:08:04.687
> 
> 标签：web

我对 Web 开发非常陌生 - 基本上我有一台服务器，每分钟都需要在其上运行一次操作。有人建议我制作一个简单的网页，只要计数器达到零，它就会滴答作响并调用脚本来执行此操作。很简单——我该怎么做？我是否创建一个调用某些 PHP 的 html 页面？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:19:10.570

使用 cron 更简单。只需安装 php-cli，输入`crontab -e`命令，添加以下行：

```
* * * * * /usr/bin/php /full/path/to/your/script 
```

但是你描述的事情也是可能的。`file.php`使用以下内容创建：

```
<meta http-equiv="refresh" content="60">
<?php 
  //your code goes here 
```

如果您在浏览器中打开此页面，则会执行 php 代码文件。60 秒后，页面将自动重新加载，您的代码将再次执行。但是您必须在浏览器中永久打开此页面。因此，这不是一个好方法，但它适合作为一种快速的临时解决方案。

# asp.net - 如何使用kerberos身份验证实现单点登录？

> ID：10371304
> 
> 赞同：1
> 
> 时间：2012-04-29T10:09:55.947
> 
> 标签：asp.net, c#-4.0, kerberos, single-sign-on

我正在使用 c# 在 asp.net 中实现一个单点登录项目。我需要使用 kerberos 实现身份验证。我在互联网上搜索了很多，但没有得到任何帮助。我是新手，请帮助我提供任何好的帖子或教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:00:55.257

在注册到 ActiveDirectory 域的 Windows 服务器上的 IIS 中部署应用程序时，默认情况下几乎[所有工作都已](http://technet.microsoft.com/en-us/library/cc754628%28v=ws.10%29.aspx)完成。

在标准上下文中：在域中注册的 Windows 工作站上运行的 IE 浏览器也登录了域，HTTP SPNEGO 协商默认发生（IE 选项是*Windows 集成身份验证*）。

然后您在 ASP.NET 中的代码只需[从 User.Identity.Name 获取用户名](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

# php - 使用php在mysql中查找最后插入的ID的最佳方法

> ID：10371306
> 
> 赞同：5
> 
> 时间：2012-04-29T10:10:15.433
> 
> 标签：php, mysql, mysql-insert-id

我想知道在 mysql 查询后获取最后插入的 ID 的最佳解决方案是什么？

我找到了以下解决方案：

```
<?php
function get_current_insert_id($table)
{
    $q = "SELECT LAST_INSERT_ID() FROM $table"; 
    return mysql_num_rows(mysql_query($q)) + 1;
}
?> 
```

甚至使用`mysql_insert_id`php 函数，但显然这个函数不适用于 bigint（这就是我用于 ID 字段的），如果有很多连续的 sql 查询，它可能不可靠。

有人可以提供可靠且快速的解决方案来完成这项任务吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T10:15:45.470

还不够`SELECT LAST_INSERT_ID()`可靠和安全吗？

来自 MySQL Doc： [生成的 ID 在每个连接的基础上在服务器中维护。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)

来自论坛的注释： [（...）不过，如果由于某种原因您正在使用持久连接，例如通过 mysql_pconnect()(...)](http://board.phpbuilder.com/board/showpost.php?s=655499fbd189770fd559fd67e13e25d0&p=10888668&postcount=2)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T10:21:45.730

如果使用单个 INSERT 语句插入多行，则 LAST_INSERT_ID() 仅返回为第一个插入行生成的值。这样做的原因是可以轻松地针对其他服务器重现相同的 INSERT 语句。

# iphone - 类似于 ios5 提醒应用中的 Tableview 样式

> ID：10371309
> 
> 赞同：1
> 
> 时间：2012-04-29T10:10:51.470
> 
> 标签：iphone, ios, uitableview, ios5

我想试试 ios 5 提醒应用程序中的 tableview 界面。它的 tableview 看起来像分组样式和部分没有圆角。所以我对此没有几个问题。

1.  这真的是分组样式的表格视图吗？我已将 tableviewcell 的 contentview 图层的角半径设置为 0。但它并没有改变圆角。
2.  我是如何设法创建一个具有普通样式的表格视图并将空视图作为标题部分插入并设置单元格边框宽度的。但现在的问题是电池分隔器看起来比电池边框宽度大 2 倍。（我将边框设置为单元格）
3.  无论如何我可以参考剖面图吗？（所以我可以设置该视图的边框）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:53:45.767

它看起来像一个样式简单但带有自定义单元格的表格。我建议试试我的[TableKit](https://github.com/onegray/UITableKit)库。可能我会在示例中添加“类似提醒”的单元格主题。

# python - 使用 Python 从 Scapy 获取变量

> ID：10371310
> 
> 赞同：1
> 
> 时间：2012-04-29T10:10:52.447
> 
> 标签：python, scapy

嗨，我需要帮助来尝试访问 scapy 返回的元组中的元素。代码如下。

```
ans,unans=sr(IP(dst="www.google.com",ttl=5)/ICMP(),verbose=0)
ans.summary(lambda (s,r): r.sprintf("%IP.src%") ) 
```

如果我输入 Scapy 并手动输入这两个命令，它将返回一个 IP 地址。但是我从 Python 脚本中运行它，并且需要将该 IP 地址存储为变量。这可能是一个愚蠢的问题，我只是在学习 Scapy，但是如何使用 scapy 将此 IP 地址存储为变量？我想要实现类似下面的目标。

```
#!/usr/bin/python
from scapy.all import *
ans,unans=sr(IP(dst="www.google.com",ttl=5)/ICMP(),verbose=0)
SourceIP = ans.summary(lambda (s,r): r.sprintf("%IP.src%") ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T18:34:02.460

如果您需要图层的值，请使用 getlayer 方法。所以只需将内容更改为：

```
ans = sr1(IP(dst="www.google.com",ttl=5)/ICMP(),verbose=0)
address = ans.getlayer(IP).src 
```

还有另一种方法来判断是否存在返回 true 或 false 的层。这是一个例子。

```
if ans.haslayer(IP):
    print "Packet has the layer IP" 
```

# iphone - 以编程方式使 iOS 设备静音/静音？

> ID：10371312
> 
> 赞同：4
> 
> 时间：2012-04-29T10:11:04.257
> 
> 标签：iphone, ios, ios5, mute, avsystemcontroller

我正在尝试从我的应用程序中将设备的铃声静音，但由于某种原因，在这个答案（[如何禁用 iOS 系统声音](https://stackoverflow.com/questions/6284402/how-to-disable-ios-system-sounds)）中使用 AVSystemController 不会让我将设备一直静音..它会下降到1 巴的音量，但并非完全静音。

我知道它可以做到，可能使用像 AVSystemController 这样的私有 API，并且我知道如果用户期望应用程序具有这种功能，Apple 仍然会批准该应用程序（因为我已经*在 App Store*中找到了 2 个应用程序以编程方式使设备静音，无需越狱或类似的东西）。

这些应用程序实际上做得更好——它们实际上切换了实际的静音，而不仅仅是将音量降低到零。

有谁知道这是怎么做的？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T23:22:08.617

这对我有用，我有一个按钮可以在游戏中打开和关闭声音。当我想要声音时，我将浮动设置为 10，当我想要关闭声音时，我将浮动设置为 0。

```
float value = 0.0f;
AudioSessionSetProperty(kAudioSessionProperty_CurrentHardwareOutputVolume, sizeof(float), &value); 
```

**更新：**

另一个仍然适用于 iOS 9.1 的选项

```
float vol = [[AVAudioSession sharedInstance] outputVolume];
NSLog(@"output volume: %1.2f dB", 20.f*log10f(vol+FLT_MIN)); 
```

对于斯威夫特：

```
let volume = AVAudioSession.sharedInstance().outputVolume   
print("Output volume: \(volume)") 
```

更新答案的来源：[获取系统卷 iOS](https://stackoverflow.com/q/7255006/3543861)

# graph - TSP 的实际行业应用是什么？

> ID：10371317
> 
> 赞同：2
> 
> 时间：2012-04-29T10:12:13.667
> 
> 标签：graph, theory, traveling-salesman, industrial

维基百科说：

> 旅行商问题即使在最纯粹的表述中也有多种应用，例如规划、物流和微芯片的制造。

我想了解更多关于 TSP 在不同领域的使用情况。不幸的是，搜索产生了很多关于陈述问题并试图仅以理论方式解决问题的结果。

我也发现了这个：

> 在广义旅行商问题 (GTSP) 中，目标是确定成本最低的哈密顿回路或通过几个顶点集群的循环。结果表明，可以将各种组合优化问题建模为 GTSP。这些问题包括位置选路问题、物流系统设计、邮箱收集、随机车辆选路和弧线选路。

但同样，它太笼统了。

您知道哪些实际使用旅行商问题及其解决方案的例子？

如果存在更好的 TSP 解决方案，还有什么可以做得更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-23T04:02:55.117

一世。印刷电路板钻孔 TSP 的直接应用是印刷电路板 (PCB) 的钻孔问题。为了将一层上的导体与另一层上的导体连接起来，或者定位集成电路的引脚，必须在板上钻孔。这些孔可以具有不同的尺寸。为了连续钻两个不同直径的孔，机器的头部必须移动到工具箱并更换钻孔设备。这是相当耗时的。因此，很明显，一个人必须选择某个直径，钻所有相同直径的孔，更换钻头，钻下一个直径的孔，等等。因此，这个钻孔问题可以看作是一系列 TSP，每个孔径，“城市”在哪里 是初始位置和可以用同一个钻头钻出的所有孔的集合。两个城市之间的“距离”由钻头从一个位置移动到另一个位置所需的时间给出。目的是尽量减少机头的行程时间。

ii. 大修燃气涡轮发动机 据报道，此应用程序在飞机的燃气涡轮发动机必须大修时发生。为了保证均匀的气流通过涡轮机，在每个涡轮机级都设有喷嘴导向叶片组件。这种组件基本上由固定在其圆周上的多个喷嘴导向叶片组成。所有这些叶片都有各自的特性，正确放置叶片会带来微不足道的好处（减少振动、提高流动均匀性、降低燃料消耗）。以最佳方式放置叶片的问题可以建模为具有特殊目标函数的 TSP。

iii. X 射线晶体学分析晶体结构是 TSP 的一个重要应用。这里使用 X 射线衍射仪来获取有关晶体材料结构的信息。为此，探测器从不同位置测量晶体的 X 射线反射强度。虽然测量本身可以很快完成，但定位时间有相当大的开销，因为某些实验必须实现多达数十万个位置。在我们提到的两个示例中，定位涉及移动四个电机。从一个位置移动到另一个位置所需的时间可以非常准确地计算出来。实验结果不取决于在各个位置进行测量的顺序。然而，实验所需的总时间取决于顺序。因此，问题在于找到一个最小化总定位时间的序列。这导致了旅行商问题。

iv. 电脑接线 有报道称在电脑板上连接元件的一种特殊情况。模块位于计算机板上，并且必须连接给定的引脚子集。与需要 Steiner 树连接的通常情况相比，这里的要求是每个引脚上连接的电线不超过两根。因此，我们遇到了寻找具有未指定起点和终点的最短哈密顿路径的问题。所谓的测试总线布线也会出现类似的情况。为了测试制造的电路板，必须实现一个连接，该连接在某个指定点进入电路板，贯穿所有模块，并在某个指定点终止。对于每个模块，我们还为此测试接线指定了一个进出点。

v. 仓库中的拣货问题 这个问题与仓库中的物料搬运有关。假设在仓库中收到了针对仓库中存储的某个项目子集的订单。某些车辆必须收集此订单的所有物品才能将它们运送给客户。与TSP的关系立即可见。项目的存储位置对应于图的节点。两个节点之间的距离由车辆从一个位置移动到另一个位置所需的时间给出。现在可以通过 TSP 来解决为车辆找到最短取车时间的最短路线的问题。在特殊情况下，这个问题可以很容易地解决，vi。车辆路线 假设在一个城市中，n 个邮箱必须在某个时间段内每天清空，比如 1 小时。问题是找到最少数量的卡车来执行此操作，以及使用此数量的卡车进行收集的最短时间。再举一个例子，假设 n 个客户需要一定数量的某些商品，而供应商必须用卡车车队满足所有需求。问题是要找到卡车的客户分配和每辆卡车的交货时间表，以便不超过每辆卡车的容量，并使总行驶距离最小化。这两个问题的几种变体，其中时间和容量限制相结合，在许多实际应用中很常见。如果没有时间和容量限制并且卡车的数量是固定的（比如 m ），这个问题可以作为 TSP 解决。在这种情况下，我们得到一个 m -salesmen 问题。尽管如此，

七。PCB 生产中的掩模绘图 对于印刷电路板的每一层以及集成半导体器件层的生产，都必须生产照相掩模。在我们的印刷电路板案例中，这是通过机械绘图设备完成的。绘图仪在光敏涂层玻璃板上移动镜头。快门可以打开或关闭以暴露板的特定部分。有不同的孔径可用于在板上生成不同的结构。必须考虑两种类型的结构。通过将关闭的快门移动到线条的一个端点，然后打开快门并将其移动到线条的另一端点，将线条暴露在板上。然后快门关闭。通过移动（使用适当的光圈）到那个点的位置，然后打开快门只是为了做一个短暂的闪光，然后再关闭它，就会产生一个点型结构。绘图机控制问题的精确建模导致了一个比 TSP 更复杂的问题，也比农村邮递员问题更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:01:20.917

I imagine some interesting things could be done if better solutions to the TSP existed, depending on what "better" means. If better means more efficient, problems with dynamic graphs could be solved quicker. A mega-dollars defense application right now would be efficient packet traversal of airborne networks. T imagine some interesting networking protocols could also be created. This might also have applications in foreign exchange trading.

# ruby-on-rails - 冗余验证？

> ID：10371318
> 
> 赞同：0
> 
> 时间：2012-04-29T10:12:28.037
> 
> 标签：ruby-on-rails

在阅读[了这个线程](https://stackoverflow.com/questions/2859384/rails-validate-presence-of-parent-id-in-has-many-association/3017982#3017982)之后，它涵盖了验证 belongs_to 对象与其 id 之间的区别，我有一个相关的问题：

我有以下验证

```
validates_presence_of :batch_id
validates_numericality_of :batch_id, :only_integer => true, :greater_than => 0 
```

第二个附加检查验证 :batch_id 是否值得，还是多余？

理论上，Rails 知道 batch_id 的语义含义，并且可以比仅仅存在更彻底地验证它。例如，我不希望通过 batch_id 的值为 -1。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:24:41.503

你应该使用

```
belongs_to :batch
validates_presence_of :batch 
```

在这种情况下，Rails 将检查指定的批处理 id 是否存在于数据库中。如果你使用`validates_presence_of :batch_id`，Rails 只会检查 batch_id 属性是否为整数。如果您不想检查数据库中是否存在但希望它是积极的，您应该使用`validates_numericality_of`，它不是多余的。

# c# - 从 WCF 服务获取无效的日期时间值

> ID：10371320
> 
> 赞同：0
> 
> 时间：2012-04-29T10:12:55.940
> 
> 标签：c#, sql-server, wcf, datetime, serialization

我有一个 WCF 服务和一个 Windows 应用程序，它们都在不同的时区。现在这个 windows 应用程序通过 WCF 服务保存和检索数据。

当我对具有数据类型为日期时间的日志时间列的表进行批量插入时，我能够将此本地日期时间保存在数据库中，但是当我尝试检索此表时，它会给出日志时间列的所有错误值。

在 SO 上发现了许多类似的问题，但我无法实现 UTC 时间，因为我所指的表包含一千条记录，每 5-10 秒更新一次。

有什么方法可以阻止 WCF 服务完成的这种自动日期时间转换。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T13:54:19.623

这是什么意思：“它给出了 logtime 列的所有错误值。” 时间是数据库服务器的本地时间吗？这不是你想要的吗？

我假设您希望 logtime 列成为客户端计算机的时区。那正确吗？由于未指定，我还假设您使用 SQL Server 中的 GetDate() 的默认值设置 logtime 列。由于未指定，我还假设您使用的是 SQL Server。

如果你想使用客户端的时区，那么你有几个选择：

1.  将数据库服务器的时区更改为与客户端计算机相同的时区。
2.  将时间作为参数传递给 WCF 服务。（我假设 WCF 服务在与数据库服务器处于同一时区的服务器上运行。）
3.  保持原样，但在检索数据时转换为正确的时区。

可能还有更多选择，但如果您澄清我所做的假设会很有帮助。

这是什么意思：“WCF 服务完成的自动日期时间转换？” 它是否使用其本地时区？如果是这样，那么您需要让它接受一个时间，而不是自己确定它。也许你应该展示一些代码。那会很有帮助。

# mysql - MySQL 无法创建/重命名表和/或变量

> ID：10371321
> 
> 赞同：0
> 
> 时间：2012-04-29T10:13:02.197
> 
> 标签：mysql

好吧，这真的让我很困惑。

我在 Mac OS X (Lion) 上使用 MySQL 5.5.20。有人给了我一个 .MDB 数据库来处理，所以我把它带进了 MySQL。最初没有问题。

然后我正在清理数据库/表/字段。我希望所有表都有一个 ID 字段。在某些情况下，它们存在，但我希望它们被称为 ID。在其他情况下，没有这样的字段，所以我创建了一个。

有一个名为 CityList 的表。我将其重命名为城市。我将主键字段从 CityList 重命名为 ID。

还有一张叫做场地的桌子。它具有三个字段 VenuesID、VenueName 和 CityList。我将 CityList 字段重命名为 CityID。

然后，我尝试将 VenuesID 重命名为 ID。它失败，错误号：150。我尝试使用 Sequel Pro，我尝试使用命令行。没有什么。

我尝试将 Venues 表重命名为其他名称。结果相同：150。

删除后我尝试重新创建数据库。结果相同：150。

通过调用 Venues 表“Boxes”，我能够*准确地导入结构和数据。*这不是一个问题的耳语。

所以，我想我会很聪明。我将完整的结构和数据导出到 SQL 语句中，包括创建 Boxes 表和 INSERTed INTO Boxes 的最后一个表。我编辑了文件以将所有“Boxes”更改为“Venues”并重新创建数据库。

它有效，但是....我将“Venues”错误地输入为“Venes”。所以完整的数据库结构和所有数据都在那里。只是表的名称是错误的。

我无法将其重命名为场地。

我已经销毁并重试了大约一个小时。这没有道理。感觉就像在 MySQL 中的某个地方仍有一些记录，即 Venues 表 1) 仍然存在并且 2) 无法更改。

*有什么*建议吗？

PS我要创建的代码是：

```
CREATE TABLE `Locations` (
  `VenuesID` int(11) NOT NULL,
  `CityID` int(11) DEFAULT NULL,
  `VenueName` varchar(50) CHARACTER SET latin1 DEFAULT NULL,
  PRIMARY KEY (`VenuesID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

**不，没有外键约束。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:04:21.097

（*升级到答案*）

其他一些表受外键约束，该外键引用您尝试更改的列。

您可以通过查询来查看数据库中的所有外键约束`INFORMATION_SCHEMA`：

```
SELECT * FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS
WHERE CONSTRAINT_TYPE = 'FOREIGN KEY' 
```

输出中的`TABLE_NAME`列指示已在其上定义约束的表。您还可以在该表的输出`SHOW CREATE TABLE [TABLE_NAME]`或 Sequel Pro 的“关系”选项卡中查看约束（请注意，关系选项卡仅显示在当前表上定义的外键约束，*而不是*引用当前表的外键约束：因此您会否则必须检查数据库中每个表的“关系”选项卡，以找到任何引用相关列的内容......）。

# database - Java DB 位置设置不正确 - netbeans

> ID：10371325
> 
> 赞同：11
> 
> 时间：2012-04-29T10:14:17.030
> 
> 标签：database, jsp, netbeans, glassfish, netbeans-7

我检查了左侧的服务选项卡，数据库选项中没有 javaDB，那里什么都没有？我正在使用 jsp 和 bean，我做错了什么吗？

我收到消息

Java DB 位置设置不正确

当我第一次运行我的 jsp 时。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-16T17:56:22.083

您必须确保 Java DB 的路径实际可用！

**为此，请执行以下操作：**

1.  点击“Windows”-“服务”
2.  展开“数据库”
3.  选择“Java 数据库”
4.  右键单击并选择“属性...”
5.  确保位置有效！

**示例路径**

Java 数据库安装：C:\glassfish\glassfish-3.1.2.2\javadb

数据库位置：C:\Users\YourUsername.netbeans-derby

**截屏：**

![在此处输入图像描述](../Images/3848f2dfd65cc58381bf0367b2e25c41.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:20:06.820

关于如何安装（可能不必要的 javaDB 是 JDK6 的一部分）、配置和注册 Netbeans 的 JavaDB 的详细说明可以在 @Netbeans [KB](http://netbeans.org/kb/docs/ide/java-db.html)中找到。步骤基本上是：

1.  查找 javaDB 的安装位置（搜索文件夹“javadb”？）或下载并安装它。
2.  制作/选择一个目录来保存数据库。（所以现在你有/知道两个目录）
3.  通过指定这两个目录向 Netbeans 注册此信息。
4.  测试它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T19:56:56.643

刚刚重新安装了netbeans，现在它工作正常，必须只是窃听......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-19T13:14:02.560

我只用 JavaSE 下载了 netbeans。当我下载完整版，卸载仅 JavaSE 版本，然后安装完整版时，我可以在 ProgramFiles 下找到 glassfish 并导航到 JavaDB 目录。

# jquery-plugins - jQWidgets Splitter Widget 导致失去焦点或事件消耗

> ID：10371328
> 
> 赞同：0
> 
> 时间：2012-04-29T10:14:27.093
> 
> 标签：jquery-plugins, jquery-events

我正在使用[来自 jQWidegts 的拆分器，](http://jqwidgets.com/jquery-widgets-demo/#demos/jqxsplitter/defaultfunctionality.htm)并且在启用拆分器时遇到了一些奇怪的行为。当它被禁用时，奇怪的行为就会停止。我已经创建了一个[JSFiddle 的问题](http://jsfiddle.net/qKdgL/)- 它就像我能得到的一样简单。

要重现问题：

1.  加载 JSFiddle 并在执行任何操作之前，将鼠标悬停在提交按钮或“字符串”选项卡上。
2.  提交按钮应变为红色`color`，并且“字符串”选项卡也会更改样式。
3.  接下来，单击一些空白区域，例如，在“提交”按钮或“字符串”选项卡下方。
4.  现在将鼠标悬停在按钮或选项卡上 - 样式不再更改。
5.  如果您再次单击某个空白区域，然后将鼠标悬停，则样式会发生变化。

这**不是**类似切换的行为，因为第三次单击不会阻止鼠标悬停时的样式。它只发生在第一次。

如果我注释掉设置拆分器的行：

```
$('#splitter').jqxSplitter(splitterConf); 
```

然后问题就消失了。div之外的任何 HTML 元素`splitter`，都不会遇到这个问题。

我唯一的想法是一个事件正在被拆分器消耗而不是传播。但是`splitter`div 没有附加任何事件，至少它们没有显示在 Chrome 的 JavaScript 调试器中。

我注意到，当单击空白（触发问题）时，`div`会在 DOM 中附加一个额外的元素：

`<div style="width: 1680px; height: 275px; position: absolute; left: 0px; top: 0px; "></div>`

此元素`jqxsplitter.js`在以下代码中附加：

```
initOverlay: function(c) {
            var b = this;
            if (b.overlay && c == undefined) {
                b.overlay.remove()
            } else {
                b.overlay = a("<div></div>");
                b.overlay.width(b.host.width());
                b.overlay.height(b.host.height());
                b.overlay.css("position", "absolute");
                b.overlay.appendTo(a(document.body));
                var d = b.host.offset();
                b.overlay.css("left", d.left);
                b.overlay.css("top", d.top)
            } 
```

从调用堆栈我看到它是从_stopDrag调用的，所以它似乎是防止拖动的某种方式：

```
_stopDrag: function(b) {
        if (b._capturedElement) {
            b._performAreaResize();
            b._capturedElement.remove()
        }
        b._capturedElement = null;
        b._initOverlay() 
```

但我不知道为什么会发生这种情况或为什么会导致问题。理想情况下，有人知道问题出在哪里，但如果做不到这一点，一些关于如何调试/转向解决方案的提示会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:04:36.553

来自[jQWidgets](http://www.jqwidgets.com)团队

> 这是一个已知问题，将在下一个版本中解决。

来源：[http ://www.jqwidgets.com/community/topic/splitter-widget-causing-loss-focus-or-event-consumption](http://www.jqwidgets.com/community/topic/splitter-widget-causing-loss-focus-or-event-consumption)

# c# - 如何制定一个带有哈希（#）的 MapPageRoute？

> ID：10371331
> 
> 赞同：3
> 
> 时间：2012-04-29T10:14:46.657
> 
> 标签：c#, asp.net, c#-4.0, asp.net-routing

我正在使用`MapPageRoute`路由到页面，它工作正常。但是，我希望页面滚动到底部以显示某个`div`id `bottom`。我试图制作以下路线，但哈希值已在 URL 中编码，因此页面不会向下滚动。

```
RouteTable.Routes.MapPageRoute("Topics", 
 "onderwerpen/{ID}/{name}#bottom", 
 "~/TopicPage.aspx"
); 
```

结果是：

```
mydomain/onderwerpen/1/title%23bottom 
```

当这样调用时：

```
Response.RedirectToRoute("Topics", new { ID = 1, name = "title" }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:37:12.340

我想我自己找到了最合适的解决方案。这个答案是开放的讨论。

```
string url = Page.GetRouteUrl("Topics", new { ID = 1, name = "title" });
Response.Redirect(url + "#bottom"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:29:19.607

您将无法使用 重定向到锚点`Response.RedirectToRoute()`。在您提供的代码中，`routeUrl`参数包含`#bottom`锚点。锚标记不属于其中，`routeUrl`因为`routeUrl`它是用于匹配传入请求的表达式。并将锚附加`#bottom`到第三个参数：`physicalFile`将不起作用，因为正如参数名称所暗示的那样，您指定的是 Web 服务器上的文件名，而不是 URL。

为什么不直接使用 good ol'`Response.Redirect()`呢？

```
Response.Redirect("onderwerpen/1/title#bottom"); 
```

# android - Android：选项菜单作为操作栏中的下拉导航

> ID：10371332
> 
> 赞同：0
> 
> 时间：2012-04-29T10:15:27.567
> 
> 标签：android

我创建了一个像这样的选项菜单

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item   android:id="@+id/menu_mark"
        android:actionLayout="@layout/menu_q1"
        android:showAsAction="ifRoom"/>
    <item android:id="@+id/menu_fertig"
          android:icon="@drawable/ic_menu_q2"
          android:showAsAction="ifRoom" /> 
```

和

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu1, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_q1:
        ... 
```

现在我想直接在 ActionBar Spinner 下拉导航中使用未显示在操作栏中的菜单项。我使用示例代码，但不知道如何让 mSpinnerAdapter 获取菜单条目并让 mOnNavigationListener 处理项目点击。谢谢

```
ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

        actionBar.setListNavigationCallbacks(mSpinnerAdapter, mOnNavigationListener); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-29T10:22:10.287

您可能想看看这个： [操作栏之外的下拉微调器？（冰淇淋三明治风格，带 ActionBarSherlock）](https://stackoverflow.com/questions/10323471/dropdown-spinner-outside-of-actionbar-icecream-sandwich-style-w-actionbarsher)

这是 Sherlock 操作栏的示例

# google-app-engine - 我可以在谷歌应用引擎上使用 node.js npm 和 socket.io

> ID：10371333
> 
> 赞同：14
> 
> 时间：2012-04-29T10:15:36.613
> 
> 标签：google-app-engine, node.js, cloud, socket.io

我可以在谷歌应用引擎上使用 node.js npm 和 socket.io

或在云上建议一些提供socket.io模块的低成本或免费解决方案，因为我需要它来与服务器进行实时通信

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T10:31:50.640

Google App Engine 上的节点支持可通过 Google 所谓的“App Engine 灵活环境”获得。您的代码在 Google 托管的 docker 容器中运行。这与“App Engine 标准环境”形成鲜明对比，您的代码在某些自定义构建的容器中运行。更多信息[在这里](https://cloud.google.com/appengine/docs)。可以在[此处](https://cloud.google.com/appengine/docs/flexible/nodejs/)找到 Google App Engine 上的 Node 文档。

**注意：**柔性环境目前处于测试阶段！并且根据谷歌[不推荐](https://cloud.google.com/appengine/docs/flexible/)用于生产使用。

Web 套接字可以在 Google App Engine 上使用。然而，根据[这个](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/tree/master/appengine/websockets)在 Google App Engine 上使用 websockets 的例子；当前不支持加密的 websocket。

对于替代托管：Node wiki 维护一个托管提供商列表；[旧 wiki（但有些维护）](https://github.com/joyent/node/wiki/Node-Hosting)，[新 wiki](https://github.com/nodejs/node/wiki/Node-Hosting)。在这些 wiki 页面上，您可以找到不同类型的 Node 托管免费和付费计划。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-06T22:20:59.420

您需要配置一个[Google Compute Engine](https://cloud.google.com/products/compute-engine/)实例来运行节点应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-09T09:03:37.393

Google App Engine 以及其他语言现在支持 NodeJs。只需关注： [https ://cloud.google.com/nodejs/getting-started/hello-world](https://cloud.google.com/nodejs/getting-started/hello-world)

# php - oop PHP 多个构造函数

> ID：10371335
> 
> 赞同：2
> 
> 时间：2012-04-29T10:15:54.270
> 
> 标签：php, oop, encapsulation

我正在从网站上单独学习 PHP。我有一些其他语言的 OOP 背景。
**问题 1：**
这是用 2 组不同的参数在 PHP 中实现构造函数的正确方法吗？
**问题 2：**
当我来到 PHP 中的 __set 魔术方法时，我希望此类中的 comment_id 不能从 __set 函数中更改。这可以在 PHP 中完成吗？

```
 class Comment{
    private $comment_id;
    private $image_id;
    private $author_id;
    private $comment_text;
    private $created_at;

    public function __construct()
    {
        $arguments = func_get_args();
        $num = sizeof($arguments)
        switch($num)
        {
            case 0;
                break;
            case 3:
                this->image_id = $arguments[0];
                this->author_id = $arguments[1];
                this->comment_text = $argument[2];
                break;
            case 5:
                this->comment_id = $arguments[0];
                this->image_id = $arguments[1];
                this->author_id = $argument[2];
                this->comment_text = $argument[3];
                this->created_at = $argument[4];
                break;
            default:
                break;

        }
    }

    public function __get($property)
    {
        if(property_exists($this,$property))
        {
            return $this->$property;
        }
    }

    public function __set($property_name,$value)
    {
        if(property_exists($this,$property_name))
        {
            $this->$property_name = $value; 
        }

    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:34:27.153

1.  在 PHP 中声明“多个”构造函数的方法有很多，但没有一种是“正确”的做法（因为 PHP 在技术上不允许这样做）。但是，我认为您在那里的操作方式没有任何问题。如果您想了解更多信息，请查看[此 Stack Overflow 问题](https://stackoverflow.com/questions/1699796/best-way-to-do-multiple-constructors-in-php)。

2.  你可以只使用一个`if`语句。大概是这样的吧？

    ```
    public function __set($property_name,$value)
    {
        $hidden_properties = array(
            'comment_id',
            'any_other_properties'
        );

        if(!in_array($property_name, $hidden_properties) &&
           property_exists($this, $property_name))
        {
            $this->$property_name = $value; 
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-24T06:55:49.933

正如这里和[在 PHP 中执行多个构造函数的最佳方式所示，在 PHP](https://stackoverflow.com/questions/1699796/best-way-to-do-multiple-constructors-in-php)中有许多声明`multiple`构造函数的方法。这是另一个例子：

```
<?php

class myClass {
    public function __construct() {
        $get_arguments       = func_get_args();
        $number_of_arguments = func_num_args();

        if (method_exists($this, $method_name = '__construct'.$number_of_arguments)) {
            call_user_func_array(array($this, $method_name), $get_arguments);
        }
    }

    public function __construct1($argument1) {
        echo 'constructor with 1 parameter ' . $argument1 . "\n";
    }

    public function __construct2($argument1, $argument2) {
        echo 'constructor with 2 parameter ' . $argument1 . ' ' . $argument2 . "\n";
    }

    public function __construct3($argument1, $argument2, $argument3) {
        echo 'constructor with 3 parameter ' . $argument1 . ' ' . $argument2 . ' ' . $argument3 . "\n";
    }
}

$object1 = new myClass('BUET');
$object2 = new myClass('BUET', 'is');
$object3 = new myClass('BUET', 'is', 'Best.'); 
```

来源：[使用和理解多个构造函数的最简单方法：](http://php.net/manual/en/language.oop5.decon.php#99903)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T10:29:05.280

对于问题 1，请查看这篇文章[Best way to do multiple constructors in PHP](https://stackoverflow.com/questions/1699796/best-way-to-do-multiple-constructors-in-php)

对于问题 2，您可以在 __set 函数中过滤掉 comment_id 属性。

```
public function __set($property_name,$value)
{
    if (property_exists($this, $property_name) && $property_name !== 'comment_id')
    {
        $this->$property_name = $value; 
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T10:31:17.967

> **问题一**：
> 
> 这是在 PHP 中使用 2 组不同的参数实现构造函数的正确方法吗？

是的（嗯，至少*是*正确的方法，正如其他海报所指出的那样）。`default`我能想到的一项改进是在分支中抛出异常。

> **问题 2**：
> 
> 当我来到 PHP 中的 __set 魔术方法时，我希望此类中的 comment_id 不能从 __set 函数中更改。这可以在 PHP 中完成吗？

当然，你快到了：

```
public function __set($property_name,$value) {
  if(property_exists($this,$property_name)) {
    if($property_name == "comment_id") {
      // throw an exception? ignore?
    } else {
      $this->$property_name = $value;
    }
  } else {
    throw new Exception(strtr("Class {class} does not have property {property}!", array(
      '{class}' => get_class($this),
      '{property}' => $property_name,
    ));
  }
} 
```

但是这里有一个限制，请参阅[此评论](http://us.php.net/manual/en/function.property-exists.php#101526)。

# makefile - Makefile 中的所有目标

> ID：10371343
> 
> 赞同：2
> 
> 时间：2012-04-29T10:17:53.767
> 
> 标签：makefile

我正在学习使用漂亮的 Linux 工具：make。还有一点我想了解的：

让我们看一下这个简单的例子：

```
JADE = $(shell find pages/*.jade)
HTML = $(JADE:.jade=.html)

all: $(HTML)

%.html: %.jade
    jade < $< --path $< > $@

clean:
    rm -f $(HTML)

.PHONY: clean 
```

当我运行时`watch make`，我真的不太了解输出字符串：make:Nothing to do with `all'。

问题：

1.  all 的作用是什么？
2.  all 动作对 watch tool 有什么作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T10:34:57.833

`all`目标实际上只是您提供的生成文件中的默认目标。`make`文件中的第一个目标是默认目标，在不指定目标的情况下运行时构建。

当 make 告诉你在构建目标时它没有工作要做时`all`，这意味着所有依赖项都已经构建并且是最新的（即自上次构建以来它们的依赖项都没有更改）。在您的情况下，这意味着 HTML 输出文件比相应的 Jade 输入文件更新。因此，make 没有什么可做的。

该`watch`实用程序只是重复运行一个命令，让您观察其输出如何随时间变化。Watch`make`每隔几秒就会运行一次并显示输出。当它第一次运行时，它将构建所有内容，并且所有后续调用`make`by`watch`都会说所有内容都是最新的。`make`因此，在 内运行似乎并没有那么有用`watch`，除非您在任意时间点修改文件并且您想通过重建它们来做出反应，但这似乎是一个有点做作的例子。

# asp.net-mvc-4 - MVC 4 SPA（单页应用程序）说明

> ID：10371345
> 
> 赞同：9
> 
> 时间：2012-04-29T10:18:01.867
> 
> 标签：asp.net-mvc-4, asp.net-spa

我一直在[http://www.asp.net/single-page-application/an-introduction-to-spa](http://www.asp.net/single-page-application/an-introduction-to-spa)阅读 MVC 4 SPA 。

即使在阅读之后，我也不清楚我应该在什么情况下使用 SPA。通过查看上面链接上的几个示例，看起来控制器保持不变。MVC Web Page 与 SPA 的区别在于 SPA 包含大量 Javascript 框架吗？如果我们将这些 Java Script 框架（Jquery、Knockout、Upshot 等）与 MVC Web 一起使用，我们可以实现与 SPA 相同的结果吗？或 SPA 意味着整个 Web 应用程序的一个页面？

另外，我们是否会为 SPA 使用布局页面？

谢谢你的澄清。希望有人不会 - 投票。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T21:17:00.730

所以从我的理解 SPA 只是一个项目模板，它显示了创建单页应用程序的模式。您可以在以前版本的 MVC 中执行此操作，但 MVC 4 有更多工具可以使其更容易并显示模式。

这方面的一个例子是 trello.com。当您使用该软件时，它感觉不像是一个常规网站，您可以在其中有页面刷新的请求和响应。一切都是在客户端使用你提到的那些 javascript 框架完成的。

您的控制器构建了一个数据 api（因此是新的 api 控制器），它允许您在服务器上执行操作并以 JSON 格式返回原始数据，或者您可以在需要时返回 html。

但是每一次对服务器的调用都是通过客户端框架的 AJAX 调用。您永远不会使用常规标签来指导您执行不同的页面并刷新整个页面。

因此，您将使用 SPA 的场景是，如果您正在创建某种 Web 应用程序（如 trello），您希望它在其中真正感觉像一个桌面应用程序。

# c# - 编组时的大尺寸数组

> ID：10371346
> 
> 赞同：1
> 
> 时间：2012-04-29T10:18:03.657
> 
> 标签：c#, marshalling

我在（.dll）文件中使用 ac 函数，该文件引用结构数组并返回一个字节，该字节确定我的操作是否成功。它在 c 项目中运行良好，当我发送一个小型数组（最多 7 个元素）时运行良好，然后返回 false ！

该数组来自以下结构

```
 [StructLayout(LayoutKind.Sequential)]
    public struct MainStruct
    {
        [MarshalAsAttribute(UnmanagedType.Struct, SizeConst = 5)]
        public Struct2 Struct2Object;

        [MarshalAsAttribute(UnmanagedType.U8, SizeConst = 1)]
        public UInt64 Elem1;

        [MarshalAsAttribute(UnmanagedType.U8, SizeConst = 1)]
        public UInt64 Elem2;

        [MarshalAsAttribute(UnmanagedType.U8, SizeConst = 1)]
        public UInt64 Elem3;

        [MarshalAsAttribute(UnmanagedType.U8, SizeConst = 1)]
        public UInt64 Elem4;

        [MarshalAsAttribute(UnmanagedType.U8, SizeConst = 1)]
        public UInt64 Elem5;

        [MarshalAsAttribute(UnmanagedType.U8, SizeConst = 1)]
        public UInt64 Elem6;

        [MarshalAsAttribute(UnmanagedType.U8, SizeConst = 1)]
        public UInt64 Elem7;

        [MarshalAsAttribute(UnmanagedType.U8, SizeConst = 1)]
        public UInt64 Elem8;

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:19:15.330

我已经尝试使用指针来获取数据:( .. 直到此时它工作正常。

```
MainStruct OBJ = (MainStruct)Marshal.PtrToStructure(pointertostruct, typeof(MainStruct)); 
```

指针获取数据，但它只是用零初始化对象！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:06:06.980

```
 __declspec(dllexport) TU08 GetBuffer(MainStruct *OBJ)
    {
    TU64 SelectedOBIS;
    TU08 XdrBuffer[Dlms_mXdrMaxBuffer];
    TU08 *pXdrBuffer;
    TU32 i;
    TU32 NumberOfElements;

    pXdrBuffer = XdrBuffer;
    SelectedOBIS = ProfilesData[LOG_ID_1].ProfilesOBISCodes;

        pXdrBuffer = XdrBuffer;
        Dlms_gXdrInitBuffer();
        /////// Get Data ///////
        if(Main_iSendGetRequest(SelectedOBIS, 7, 2, XdrBuffer) == false)
            return 0;
        /////// Extract Data ///////
        if(*XdrBuffer == Dlms_mXdrArray)
        {
            NumberOfElements = *(pXdrBuffer + 1);
            pXdrBuffer += 2; // 2 for array tag and its number of fields 
            for(i=0; i<NumberOfElements; i++)
            {
                if(*pXdrBuffer == Dlms_mXdrStruct)
                {
    pXdrBuffer += 2; // 2 for struct tag and its number of fields 
    pXdrBuffer = gGetDateTime(pXdrBuffer, &OBJ[i].TimeStamp);
    pXdrBuffer = gGetLongUnsigned(pXdrBuffer, &OBJ[i].StatusRegister);
    pXdrBuffer = gGetUnsigned(pXdrBuffer, &OBJ[i].EventCode);
    }
            }
        }
    return 1;
} 
```

那是使用的功能。

这是C中的结构

```
typedef struct
{
    Struct2 Struct2OBject;
    TU64 Elem1;
    TU64 Elem2;
    TU64 Elem3;
    TU64 Elem4;
    TU64 Elem5;
    TU64 Elem6;
    TU64 Elem7;
    TU64 Elem8;
} MainStruct; 
```

函数的元帅是

```
 [DllImport("dll.dll", CallingConvention = CallingConvention.Cdecl)]
    public static extern byte GetBuffer([In, Out] MainStruct[] Profile); 
```

关键是，如果传递给函数的数组大小为 7 或更小，它在 C 中运行良好，并且在 Windows 窗体应用程序中运行良好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T10:46:31.547

您的结构中似乎硬编码了 8 个字节。当然，如果超过该限制，您将获得内存损坏。

如果要“发送”的字节数可能无限，我会使用 Marshal.AllocHGlobal 分配一个非托管缓冲区并将其传递给非托管函数。

# python - PYTHON 列表搜索值重复

> ID：10371347
> 
> 赞同：-1
> 
> 时间：2012-04-29T10:18:29.437
> 
> 标签：python

我有一个包含 8 列和 100 多行的文件，如下所示：

```
PAIR 1MFK 1 URANIUM 82 HELIUM 112 3.6997  
PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003  
PAIR 345G 3 SODIUM 23 CARBON 14 1.664  
PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506 
```

我想要做的是比较第 5 列以找出任何值的重复，然后生成一个包含两个完整行的输出文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T10:27:41.737

用于`str.split()`分割线

使用 a`collections.defaultdict(list)`来跟踪重复

例如。

```
>>> lines = """PAIR 1MFK 1 URANIUM 82 HELIUM 112 3.6997  
... PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003  
... PAIR 345G 3 SODIUM 23 CARBON 14 1.664  
... PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506  """.split("\n")
>>> 
>>> from collections import defaultdict

>>> D = defaultdict(list)
>>> for line in map(str.split, lines):
...     k = line[4]
...     D[k].append(line)
... 

>>> [v for k,v in D.items() if len(v) > 1]
[[['PAIR', '1MFK', '1', 'URANIUM', '82', 'HELIUM', '112', '3.6997'], ['PAIR', '4IG5', '4', 'LITHIUM', '82', 'ARGON', '99', '2.5506']]]

>>> [(k,v) for k,v in D.items() if len(v) > 1]
[('82', [['PAIR', '1MFK', '1', 'URANIUM', '82', 'HELIUM', '112', '3.6997'], ['PAIR', '4IG5', '4', 'LITHIUM', '82', 'ARGON', '99', '2.5506']])] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:30:51.197

这是另一种使用方式`setdefault`（即，您不必导入`collections`：

```
>>> lines = [
... 'PAIR 1MFK 1 URANIUM 82 HELIUM 112 3.6997',
... 'PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003',
... 'PAIR 345G 3 SODIUM 23 CARBON 14 1.664',
... 'PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506',
... 'PAIR AB32 4 KRYPONITE 98 ARSENIC 99 2.3406'
... ]
>>> d = {}
>>> for line in lines:
...     d.setdefault(line.split()[4], []).append(line)
...
>>> [(k, v) for k,v in d.items() if len(v) > 1 ]
[('82', ['PAIR 1MFK 1 URANIUM 82 HELIUM 112 3.6997', 'PAIR 4IG5 4 LITHIUM 82 ARGON 99 2.5506']), ('98', ['PAIR 2JGH 2 PLUTONIUM 98 POTASSIUM 88 5.3003', 'PAIR
B32 4 KRYPONITE 98 ARSENIC 99 2.3406'])] 
```

# axapta - 使用 NumberSeq 类生成数字序列

> ID：10371350
> 
> 赞同：2
> 
> 时间：2012-04-29T10:19:23.740
> 
> 标签：axapta, dynamics-ax-2009

我使用 numberSeq 类 newgetNum 方法在表单中创建了一个数列。

它正在完美地创建数字序列。

但是在删除记录而不保存记录后出现问题。

之后，创建新记录会生成新号码而不是删除的号码。

例如：1。CTRL+N => 记录“001”已创建

```
2\. Delete "001" without saving

3\. CTRL+N => record "002" is created

But we want to generate 001 only. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:16:14.073

You will have to set the "continues" flag on the number sequence to reuse deleted numbers.

Also your form should use the `NumberSeqFormHandler` class, see the [Number Sequence Framework](http://msdn.microsoft.com/en-us/library/aa608474%28v=ax.50%29.aspx) documentation.

# java - 如何处理 jasmin 中命名为关键字的字段

> ID：10371352
> 
> 赞同：1
> 
> 时间：2012-04-29T10:19:49.740
> 
> 标签：java, jvm-languages, jasmin

我正在为 java 的一个子集编写一个编译器，我几乎完成了。我遇到的一件事是处理命名为 jasmin-keywords 的类、字段和方法。

例如：

```
class Test {
public static void main(String[] args) {
    int a;
    a = new pop().run();
}
}

class pop {

    int lcmp;
    int stack;
    int isub;
    int iload_0;

    public int run() {
        int aaload;
        lcmp = 1;
        aaload = lcmp;
        return aaload;
    }

    public int swap() {
        return 0;   
    }

    public int iload_0() {
        int istore;
        boolean ret;
        return 0;
    }
} 
```

这会像这样编译成茉莉花：

```
.source evul_names.java
.class Test
.super java/lang/Object
.method public <init>()V
    aload_0
    invokespecial java/lang/Object/<init>()V
    return
.end method

.method public static main([Ljava/lang/String;)V
.limit locals 2
.limit stack 2
.var 0 is a I
.line 4
    new pop
    dup
    invokespecial pop/<init>()V
    invokevirtual pop/run()I
    istore_0 ; a
    return
.end method

.source evul_names.java
.class pop
.super java/lang/Object

.field public lcmp I
.field public stack I
.field public isub I
.field public iload_0 I

.method public <init>()V
    aload_0
    invokespecial java/lang/Object/<init>()V
    return
.end method

.method public run()I
.limit locals 3
.limit stack 2
.line 15
.var 0 is <this> Lpop;
.var 1 is aaload I
.line 17
    iconst_1
    aload_0 ; this
    swap
    putfield pop/lcmp I
.line 18
    aload_0 ; this
    getfield pop/lcmp I
    istore_1 ; aaload
.line 19
    iload_1 ; aaload
    ireturn
.end method

.method public swap()I
.limit locals 2
.limit stack 1
.line 22
.var 0 is <this> Lpop;
.line 23
    iconst_0
    ireturn
.end method

.method public iload_0()I
.limit locals 4
.limit stack 1
.line 26
.var 0 is <this> Lpop;
.var 1 is istore I
.var 2 is ret Z
.line 29
    iconst_0
    ireturn
.end method 
```

问题是 .class 和 .field 指令，如果名称是关键字，它们会导致编译错误。我尝试在它们周围加上单引号和双引号；使用单引号将 jasmin 组装成类文件，但随后会出现验证错误（看起来它实际上包含名称中的引号，这是次优的）。使用双引号根本无法编译。

对此有什么解决方案，还是在茉莉花中不可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:54:42.947

在尝试了几个小时后，我决定修补 jasmin。当我提交补丁时，我意识到 repo 中的代码不是最新版本。然后在获得最新版本的代码后，我意识到我实现的功能已经存在，但由于某种原因，debian 中的 2.4 没有，但 sourceforge 的 2.4 有。

# assembly - 8086组装事业部

> ID：10371353
> 
> 赞同：2
> 
> 时间：2012-04-29T10:20:07.700
> 
> 标签：assembly, nasm, x86-16

我在下面的代码中遇到了这个问题，它将数字转换为 ASCII '数字文本'。但是代码似乎在“div”操作码处循环

```
;Main Program
main:
    mov ax, 0x0000
    mov ds, ax ; setup data segment register
    mov si, GreetString ; setup data segment offset
    call print_string ; call print string procedure
    mov si, DataWord ; setup data segment offset
    mov bl, 0x000A ; base 10
    call format_string ; call format string procedure
    mov si, GreetString ; setup data segment offset
    call print_string ; call print string procedure
prevent_overflow:
    hlt ; halt the CPU
    jmp prevent_overflow

format_string:
mov ax, [ds:si] ; load register ax with data
xor cx, cx ; set counter to 0
mov si, GreetString ; set pointer to address of GreetString

.format_char:
div bl ; divides by register bl
add ah, 48 ; convert to ascii numeric
mov [ds:si], ah ; move ascii numeric to ds:si
inc cx ; increase counter
inc si ; increase si
xor ah, ah ; clear ah register
or ax, ax
jnz .format_char ; jump to format next char
ret 
```

知道为什么会这样吗？我说“循环”是因为我的 CPU 处于最大值并且在 div 之后没有继续执行操作码

*更新。谢谢纽格。添加了主要部分以使其更具可读性 (^.^)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:21:57.240

问题是您得到一个除法溢出异常，因为商（在我下面的示例中是 12345 div 10 = 1234 + 5 的余数）不适合 8 位`al`（还记得`ah`余数已经使用了吗？）。

每次商或余数不适合目标寄存器时，都会出现除法溢出异常。导致它的不仅是除以 0。

您想要进行 32/16=16:16 的除法，而不是 16/8=8:8 的除法。

这是我的更改在 DOS 中起作用的内容（标记为`;;;`）：

```
; file: div2.asm
; compile as: nasm -f bin div2.asm -o div2.com
org 0x100 ;;;

;Main Program
main:
    mov ax, 0x0000
;    mov ds, ax ; setup data segment register ;;;
    mov si, GreetString ; setup data segment offset
    call print_string ; call print string procedure
    mov si, DataWord ; setup data segment offset
    mov bl, 0x000A ; base 10
    call format_string ; call format string procedure
    mov si, GreetString ; setup data segment offset
    call print_string ; call print string procedure

    ret ;;;

prevent_overflow:
    hlt ; halt the CPU
    jmp prevent_overflow

format_string:
mov ax, [ds:si] ; load register ax with data
xor cx, cx ; set counter to 0
mov si, GreetString ; set pointer to address of GreetString

.format_char:
; div bl ; divides by register bl ;;;
xor dx, dx ;;;
xor bh, bh ;;;
div bx ;;;

; add ah, 48 ; convert to ascii numeric ;;;
add dl, 48 ;;;

; mov [ds:si], ah ; move ascii numeric to ds:si ;;;
mov [ds:si], dl ; move ascii numeric to ds:si

inc cx ; increase counter
inc si ; increase si
; xor ah, ah ; clear ah register ;;;
or ax, ax
jnz .format_char ; jump to format next char

mov byte [ds:si], "$" ;;;
inc cx ; increase counter ;;;
inc si ; increase si ;;;

ret

print_string: ;;;
    pusha ;;;
    mov ah, 9 ;;;
    mov dx, si ;;;
    int 21h ;;;
    popa ;;;
    ret ;;;

DataWord dw 12345 ;;;
GreetString db "Hello World!", 13, 10, "$" ;;; 
```

它打印：

```
Hello World!
54321 
```

# css - CSS：如何垂直和水平对齐图像？

> ID：10371355
> 
> 赞同：10
> 
> 时间：2012-04-29T10:20:17.077
> 
> 标签：css

我的页面有一个图像空间，例如最大 100x100 图像。用户可以上传任何图像尺寸，Web 应用程序会在保持纵横比的情况下将其调整为 100x100。因此，可以将图像大小调整为 75x100 或 100x75 等。

无论调整大小的图像尺寸如何，我都希望它在网页上分配的空间中垂直和水平居中显示。我如何在 CSS 中做到这一点？我需要一个包含的 div，像这样：

```
<div class="image_container">
     <image src="http://placehold.it/100x100/" height="100" width="100" alt=""/>
</div> 
```

无论如何，示例 CSS 会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-29T10:28:07.367

试试这个 - [http://jsfiddle.net/zYx4g/](http://jsfiddle.net/zYx4g/) 这将适用于任何大小的图像和所有浏览器。

```
.image_container {
    width: 300px;
    height: 300px;
    background: #eee;
    text-align: center;
    line-height: 300px;
}

.image_container img {
    vertical-align: middle;
}
​ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-17T14:24:51.250

我知道这是一个老问题，但现在你可以使用 flex

```
<div class="container">
    <img  src="http://placehold.it/200x200" />
</div> 
```

CSS

```
.container {
    display: flex;
    justify-content: center;
    align-items: center;
    border: 1px solid;
    width: 50vw;
    height: 50vw;
}
.container img
{
    max-width:100%;
    max-height:100%;
} 
```

[小提琴](https://jsfiddle.net/RACCH/u63sdesa/)演示

您还可以自定义容器的大小，某些浏览器可能不支持 flex，您可以在此处查看[caniuse](http://caniuse.com/#search=flex)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T10:21:56.840

将图像的左上角移动到中间并将其重置为图像宽度和高度的一半：

```
.image_container img{
    position: relative;
    top: 50%;
    left: 50%;
    margin-top: -50px;
    margin-left: -50px;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-03T09:39:25.873

```
<div class="blog-thumbnail">                
    <img src="img.jpg" alt="img">
</div>

.blog-thumbnail {
    height: 200px;
    margin: 0 auto;
    position: relative;
}
.blog-thumbnail img {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    top: 0;
    margin: auto;
    max-width: 100%;
    max-height: 100%;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T10:27:28.710

你可以试试这个：

```
.image_container {
    display:table-cell;
    overflow:hidden;
    text-align:center;
    vertical-align:middle;
}
.image_container img {
    vertical-align:baseline;
} 
```

不是 100% 确定浏览器兼容性，但应该让您朝着正确的方向开始。示例：http: [//jsfiddle.net/fJtwX/1/](http://jsfiddle.net/fJtwX/1/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-29T10:39:28.017

**编辑：Zoltan Toth 回答得很好。**

Jamie 的回答有效，如果您想要旧的浏览器兼容性，然后使用表格？

我知道我可能会抱怨，但是在需要的地方使用桌子并没有错！

[http://jsfiddle.net/Yhq5h/11/](http://jsfiddle.net/Yhq5h/11/)

将您的容器设置为所需的大小，我需要查看该页面，但这应该适用于所有浏览器。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-18T11:50:29.340

如果有人仍然需要这个，这里有一种使用显示表的方法；

```
.thumbnail { width:150px; height:150px; display: table; }

.thumbnail img { max-width:150px; max-height:150px; }

.thumbnailcontainer { display:table-cell; vertical-align: middle; text-align:center;}
```

```
<article class="thumbnail">    
  <div class="thumbnailcontainer">
         <img id="Img1" src="http://img.youtube.com/vi/QAOMIH7cgh0/0.jpg" />   
   </div>
</article>
```

# c# - XNA 与多个类相交/碰撞？

> ID：10371357
> 
> 赞同：1
> 
> 时间：2012-04-29T10:20:51.663
> 
> 标签：c#, xna, collision, intersect

在过去的 12 个小时里，我一直在尝试我能想到的“所有”不同的方法，以便在 XNA（4.0）中正确地使两个矩形相交/测试碰撞。

我有三个类（只是示例名称）：

*   游戏1.cs
*   播放器.cs
*   人.cs

在 Game1 中，我加载如下内容：

**// 在 Game1 开始时：**

```
 Player player;
    Man man; 
```

**// 加载内容：**

```
 man = new Man(Content.Load<Texture2D>("ManImage"), new Rectangle(440, 310, 150, 98));
    player = new Player(Content.Load<Texture2D>("playerSheet"), new Vector2(40, 420), 50, 44); 
```

但是，我想检查人和玩家之间的碰撞，但我不明白如何“加入”这两个类以便能够在 Game1 中执行 if(intersects) （如果那是这样做的地方）。

播放器矩形如下所示：

```
playerRect = new Rectangle(currentFrame * frameWidth, 0, frameWidth, frameHeight); 
```

我只是在这里完全“盲目地编码”，还是什么？任何能够帮助我解决这个问题的人，在 12 小时的碰撞测试后，动力都下降了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:29:46.413

您可以为这两个类添加一个属性

```
public Rectangle PositionRectangle { get; private set; } 
```

然后，在相关的构造函数中，您需要启动此属性

```
public Man(..., Rectangle rectangle)
{
    PositionRectangle = rectangle;
}

public Player(..., Vector2 position, int width, int height)
{
    PositionRectangle = new rectangle((int)position.X, (int)position.Y, width, height);
} 
```

您无需担心要显示的帧，因为这与**源矩形**有关，而不是与**目标矩形**有关（这是您需要测试碰撞的内容）。

然后您可以轻松地测试这些碰撞

```
if(man.PositionRectangle.Intersects(player.PositionRectangle))
{
    //collision logic
} 
```

当然，每次更改位置（或宽度和高度，如果它们是可变的）时，您都需要注意更新这些矩形

* * *

## 轻微修改（或更好的版本）

如果您想轻松定位 Man 和 Player 而不必担心他们的矩形是如何更新的，您可以这样设置：

```
class Man
{
    Texture2D _texture;

    public Vector2 Position { get; set; }
    public int Width { get; set; } 
    public int Height { get; set; }

    public Rectangle PositionRectangle
    {
        get
        {
            return new Rectangle((int)Position.X, (int)Position.Y, Width, Height);
        }
    }

    public Man(Texture2D texture)
    {
        this._texture = texture;
        this.Width = texture.Width;
        this.Height = texture.Height;
    }

    ... //other man related logic!
}

class Player
{
    Texture2D _texture;
    int _frameCount;
    int _currentFrame;
    //other frame related logic...

    public Vector2 Position { get; set; }
    public int Width { get; set; } 
    public int Height { get; set; }

    public Rectangle PositionRectangle
    {
        get
        {
            return new Rectangle((int)Position.X, (int)Position.Y, Width, Height);
        }
    }

    public Rectangle SourceRectangle
    {
        get
        {
            return new Rectangle(Width * _currentFrame, 0, Width, Height);
        }
    }

    public Player(Texture2D texture, int frameWidth, int frameCount)
    {
        this._texture = texture;
        this.Width = frameWidth;
        this.Height = texture.Height;
        this._frameCount = frameCount;
        this._currentFrame = 0;
        //etc...
    }

    ... //other player related logic! such as updating _currentFrame

    public Draw(SpriteBatch spriteBatch)
    {
         spriteBatch.Draw(_texture, PositionRectangle, SourceRectangle, Color.White);
    }
} 
```

在这里，我为您提供了如何使用属性访问器来动态生成相关矩形的示例！

你`PositionRectangle`用来确定你的玩家（或人）在屏幕上的位置，你`SourceRectangle`用来确定你要绘制的纹理的哪一部分。

此外，如果你的人和球员的宽度和高度不会改变，那么你应该将他们的`set`访问器设置为`private`.

当您需要更改位置时，您只需设置它们的位置属性

```
man.Position = new Vector2(100, 100); //i.e. 
```

并且您的碰撞和绘制逻辑将自动使用新的矩形，而无需任何进一步的干预！

希望你喜欢！

## 编辑2

关于源矩形是公开的，你只需要从外部绘制它们（即`Game1`调用`spriteBatch.Draw(player.Texture, player.PositionRectangle, player.SourceRectangle, Color.White);`）。

如果您像示例中一样（从内部）绘制它，您可以废弃整个`public Recangle SourceRectangle{...}`东西并直接在绘图中使用该矩形：

```
 public Draw(SpriteBatch spriteBatch)
    {
         spriteBatch.Draw(_texture, PositionRectangle, new Rectangle(Width * _currentFrame, 0, Width, Height), Color.White);
    } 
```

# android - Android：如何在 AsyncTask 中获取当前的应用程序上下文？

> ID：10371358
> 
> 赞同：6
> 
> 时间：2012-04-29T10:21:07.790
> 
> 标签：android

我创建了一个包含多个活动的应用程序，并且在应用程序生命周期开始时启动的任何活动之外都有一个 AsyncTask。我的问题是如何在 Asynctask 类中获取当前的应用程序上下文？

谢谢你的回答

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T10:25:42.080

你可以通过整体`Activity`和使用[`getApplicationContext()`](http://developer.android.com/reference/android/content/Context.html#getApplicationContext%28%29)里面的`AsyncTask`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T10:30:09.853

将上下文作为参数传递给 AsyncTask 的构造函数，并将其作为成员存储在那里。但请注意传递给构造函数的上下文类型。

当任务可能在 Activity 的生命周期内运行时，您应该传递应用程序上下文而不是 Activity 上下文。当任务仅在 Activity 的生命周期内运行时，您可以将 Activity 对象作为上下文传递。

# sql - 使用 Group By 获取总计

> ID：10371365
> 
> 赞同：16
> 
> 时间：2012-04-29T10:22:24.127
> 
> 标签：sql, sql-server-2008

目前我正在尝试自学更多关于 SQL 的知识，并且目前正在尝试使用SQL Server 2008 数据库中的、`SUM`和函数执行一些简单的销售报告。我已经设法逐行获取每个组的总数、计数和平均值。`COUNT``AVG``GROUP BY`

如何按行获得所有组的总数？

到目前为止的SQL：

```
SELECT 
    SUM(dbo.tbl_orderitems.mon_orditems_pprice) AS prodTotal,
    AVG(dbo.tbl_orderitems.mon_orditems_pprice) AS avgPrice,
    count(dbo.tbl_orderitems.uid_orditems_prodid) AS prodQty,
    dbo.tbl_orderitems.txt_orditems_pname
FROM 
    dbo.tbl_orderitems
INNER JOIN 
    dbo.tbl_orders 
    ON (dbo.tbl_orderitems.uid_orditems_orderid = dbo.tbl_orders.uid_orders)
WHERE 
    dbo.tbl_orders.uid_order_webid = 
       <cfqueryparam cfsqltype="cf_sql_integer" value="#session.webid#">
    AND dbo.tbl_orders.txt_order_status = 
       <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.sale_status#">
GROUP BY
    dbo.tbl_orderitems.txt_orditems_pname 
```

```
产品数量总平均  

韦斯特伯里攀爬架 17 8,023.00 471.94
Sandpoint 豪华攀爬架 34 36,146.00 1,063.12
Roseberry 攀爬架 9 7,441.00 826.78
Ridgeview Texas 攀爬架 10 6,990.00 699
塞尔伍德野餐桌 9 489.92 54.44

我需要 qty 列和 Gross 列的总计

```

非常感谢

杰森

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-29T11:00:05.347

您正在寻找[ROLLUP](http://msdn.microsoft.com/en-us/library/ms189305%28v=sql.90%29.aspx)运算符，它将在结果集的末尾添加一个总计行。如果您正在寻找更复杂的汇总总计，请使用带有 GROUP BY 子句的 ROLLUP 或 CUBE，例如 @MartinSmith 或[Aggregation WITH ROLLUP提供的链接](http://blogs.msdn.com/b/craigfr/archive/2007/09/21/aggregation-with-rollup.aspx)

```
SELECT 
    SUM(dbo.tbl_orderitems.mon_orditems_pprice) AS prodTotal,
    AVG(dbo.tbl_orderitems.mon_orditems_pprice) AS avgPrice,
    count(dbo.tbl_orderitems.uid_orditems_prodid) AS prodQty,
    dbo.tbl_orderitems.txt_orditems_pname
FROM 
    dbo.tbl_orderitems
INNER JOIN 
    dbo.tbl_orders ON (dbo.tbl_orderitems.uid_orditems_orderid = dbo.tbl_orders.uid_orders)
WHERE 
    dbo.tbl_orders.uid_order_webid = <cfqueryparam cfsqltype="cf_sql_integer" value="#session.webid#">
    AND dbo.tbl_orders.txt_order_status = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.sale_status#">
GROUP BY
    dbo.tbl_orderitems.txt_orditems_pname
WITH ROLLUP 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-13T07:06:35.310

我知道这是一个老问题，但仅供将来参考 - 您还可以通过使用 GROUPING SETS 来更好地控制分组过程。例如：

```
SELECT 
    SUM(dbo.tbl_orderitems.mon_orditems_pprice) AS prodTotal,
    AVG(dbo.tbl_orderitems.mon_orditems_pprice) AS avgPrice,
    count(dbo.tbl_orderitems.uid_orditems_prodid) AS prodQty,
    COALESCE(dbo.tbl_orderitems.txt_orditems_pname, 'TOTAL')
FROM 
    dbo.tbl_orderitems
INNER JOIN 
    dbo.tbl_orders 
    ON (dbo.tbl_orderitems.uid_orditems_orderid = dbo.tbl_orders.uid_orders)
WHERE 
    dbo.tbl_orders.uid_order_webid = 
       <cfqueryparam cfsqltype="cf_sql_integer" value="#session.webid#">
    AND dbo.tbl_orders.txt_order_status = 
       <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.sale_status#">
GROUP BY GROUPING SETS (
    (dbo.tbl_orderitems.txt_orditems_pname),
    ()
) 
```

这样，结果将两行都按 txt_orditems_pname 分组，并且根本没有分组。您可以指定更多的分组集，即。查询一个部门和团队的平均工资，还返回了部门和整个公司的总和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T10:25:36.793

将您的选择包装在另一个选择中并总结列。

# matlab - Matlab循环向量化

> ID：10371370
> 
> 赞同：0
> 
> 时间：2012-04-29T10:23:02.697
> 
> 标签：matlab, loops, vectorization

这是一段 Matlab 代码。它工作得很慢。有没有办法让它更快地工作？我想不出矢量化它的方法。也许它可以写成某种过滤器？

```
...
for uu=2:length(x)-2;
    for vv= 2:length(y)-2;

     P1=[x(uu+1) y(vv) temp(uu+1,vv)];
     P2=[x(uu) y(vv+1) temp(uu,vv+1)];
     P3=[x(uu-1),y(vv) temp(uu-1,vv)];
     P4=[x(uu) y(vv-1) temp(uu,vv-1)];

     cr=cross((P1-P3),(P2-P4));

     cr=cr/norm(cr);
     theta=acos(dot([0,0,1],px))*180/pi;
     ...
 end
end
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:25:33.273

要矢量化这个嵌套循环，您需要正确地重塑数据。叉积可以沿某个维度执行，因此您真正需要做的就是将 P1 ... P4 重塑为包含有序数据的向量。

请注意，您的操作有一个“十字形”内核。P1 可以是底部，P3 可以是顶部，P2 可以是右侧，P4 可以是左侧。假设向量 x 和 y 只是采样点 (temp) 的坐标，则这些向量中的每一个都可以表示如下：

```
[x,y] = meshgrid(1:size(temps,1),1:size(temp,2)); % Create a sampling grid or replicate the one you have

tmp1 = x(3:end,2:end-1);
tmp2 = y(3:end,2:end-1);
tmp3 = temp(3:end,2:end-1);
P1 = [tmp1(:), tmp2(:), tmp3(:)] % Vectorization

tmp1 = x(2:end-1,3:end);
tmp2 = y(2:end-1,3:end);
tmp3 = temp(2:end-1,3:end);
P2 = [tmp1(:), tmp2(:), tmp3(:)];

tmp1 = x(1:end-2,2:end-1);
tmp2 = y(1:end-2,2:end-1);
tmp3 = temp(1:end-2,2:end-1);
P3 = [tmp1(:), tmp2(:), tmp3(:)];

tmp1 = x(2:end-1,1:end-2);
tmp2 = y(2:end-1,1:end-2);
tmp3 = temp(2:end-1,1:end-2);
P4 = [tmp1(:), tmp2(:), tmp3(:)];

V1 = P1 - P3;
V2 = P2 - P4;

CR = cross(V1,V2);
NRM = (CR(:,1).^2 + CR(:,2).^2 + CR(:,3).^2).^0.5; % norm(X) cannot be vectorized
CR = CR./NRM; 
```

Theta 似乎不依赖于循环中的任何变量，但 acos(X) 和 dot(v1,v2) 可用于矢量化数据，与 cross(v1,v2) 相同。

我怀疑您是否可以通过在其辅因子扩展中分解叉积函数或尝试将其实现为某种非线性滤波器来获得任何性能提升。如果它仍然太慢，你应该看看 Parallel 工具箱。

希望这可以帮助 ！

# java - Antlr 3 无法处理句法谓词

> ID：10371376
> 
> 赞同：0
> 
> 时间：2012-04-29T10:23:55.780
> 
> 标签：java, syntax, antlr, predicate, antlr3

这个问题在我身上出现过很多次。我不完全理解这个问题。我的语法如下所示：

```
grammar Syntax;

options {
  language = Java;
  backtrack = true;
}

rule: ('syntax' (INTEGER | HEX) ';')? (structure | packet)+;

structure: ('struct' | 'structure')? field;

packet: 'packet'? NAME '{' field+ '}';

field: NAME (':' | '=' | ':=' | '->')? value ';';

value: (TYPE (MULT (INTEGER | HEX))?);

MULT: 'x' | 'X';

INTEGER: ('0'..'9')+;

HEX: '0x' ('0'..'9' | 'A'..'F' | 'a'..'f');

TYPE: ('unsigned'? 'byte' | 'short' | 'int16' | 'int8')
    | 'int' | 'int32' 
    | 'long' | 'int64'
    | 'char' | 'char8' | 'char16' | 'unicode'
    | 'utf' | 'utf8' | 'utf16';

NAME: ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '_' | '0'..'9')*;

WHITESPACE: ( ' ' | '\n' | '\r' | '\f' | '\t')+{$channel = HIDDEN;} ; 
```

测试用例如下所示：

```
syntax 1;
packet a
{
    a int;
    b byte;
    d byte x 10;
    c int x b;
} 
```

现在错误是：

![错误](../Images/dbe0b58ad109c4ea48f3ed00a5cf7480.png "我还不能发布线程内图像！")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T17:21:19.147

ANTLRWorks 的解释器（ANTLR Eclipse IDE 也使用）无法处理谓词或嵌入式（Java）代码。启用全局回溯¹（应该避免，如果可能的话！）会导致**所有**解析器规则在它们前面获取谓词（因此错误*"can't deal with predicates yet"*）。

此外，解释器相当有问题：我不建议使用它。使用 ANTLRWorks 的调试器，它很棒，而且还可以编译和运行语法中的任何嵌入式 (Java) 代码。我相信 ANTLR Eclipse IDE 也有来自 ANTLRWorks 的调试器。

¹ [http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar](http://www.antlr.org/wiki/display/ANTLR3/How+to+remove+global+backtracking+from+your+grammar)

# java - 取出一个maven项目的一部分作为一个模块

> ID：10371383
> 
> 赞同：0
> 
> 时间：2012-04-29T10:25:05.777
> 
> 标签：java, maven, dependencies

我有一个`A`依赖于模块中的类的 Maven 模块`B`（两者都是项目中的子模块）。

在`A`'s`pom.xml`我有以下内容：

```
 <dependencies>
    <dependency>
        <groupId>test.pack</groupId>
        <artifactId>B</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency> 
  </dependencies> 
```

但是当我尝试构建 时`A`，`B`没有正确出现在依赖项中，我在 import 语句中`A`的`test.pack.packFromA`包中的类中遇到编译错误，看起来像`import test.pack.packFromB.*`.

所以，我的`B`依赖不能正常工作。但我认为来自的类`B`将被打包并添加到类路径中，所以我可以使用它们。我试图添加`<type>`该依赖项，但这没有帮助。我在这里做错了什么？提前致谢。

**编辑**：`<modules>`父母的部分`pom.xml`看起来像这样：

```
 <modules>
    <module>B</module>
    <module>A</module>
  </modules> 
```

这是我得到的错误：`Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project A: Compilation failure: Compilation failure:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:39:54.513

`mvn install`在您尝试构建模块 A 之前，您是否在模块 B 中完成过？

（如果你使用“mvn package”而不是`mvn install`，模块 B 将不会被放置在 repo 中，因此 Maven 在构建模块 A 时不会找到它）。

另外，您是否尝试过从父模块构建多模块项目？（当你这样做时，Maven 将以正确的顺序构建模块）

如果不是这样，请验证您引用的类是否位于`src/main/java/test/pack/packFromB`模块 B 中。如果它们位于模块 B 中，则`src/test/java..`您需要特定类型的依赖项。

希望有帮助。

# wordpress - 将 Google Analytics 添加到 WordPress

> ID：10371384
> 
> 赞同：0
> 
> 时间：2012-04-29T10:25:11.333
> 
> 标签：wordpress

我以前从未使用过 Wordpress，我知道这听起来可能有点愚蠢，但我有一个项目（我还没有创建它）已经托管并启动并运行，我需要添加一个插件来添加 Google Analytics。

我一直在四处寻找，发现有一个在线应用程序，但在注册后，我看到的唯一可能性是创建一个新的博客或页面。

还有一种叫做 Wordpress Codex 的东西，但我不太确定它是什么。

请问有什么帮助吗？本来应该很简单……在你的 HTML 中粘贴两行代码，你就有了谷歌分析！但是这个项目很大，我什至看不到 HTML 标签！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:29:16.667

只需[将此插件](http://wordpress.org/extend/plugins/google-analytics-for-wordpress/)添加到您的 Wordpress 中，然后按照说明进行操作。

或者，您可以转到主题中的标题模板并在那里添加您的 HTML。

1.  转到外观-> 编辑器。

2.  在右侧边栏上并单击 Header (header.php)

3.  添加您的谷歌分析代码。

4.  单击更新文件。

5.  一段时间后，谷歌分析就会启动。

**警告：**这里要小心，确保不要删除任何不确定的内容。

Codex 基本上是 Wordpress 的手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:01:18.620

我同意楼上的回答。但是，我通常将 Google 的 html 添加到 footer.php 的末尾附近，就在结束 body 标记之后，只是因为 footer.php 往往不那么混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T16:30:24.160

您可以在 function.php 文件中使用以下代码添加 Google Analytic：

```
<?php
add_action('wp_footer', 'add_googleanalytics');
function add_googleanalytics() { ?>
// Paste your Google Analytics code from Step 6 here
<?php } ?> 
```

# jquery - 如何平滑地为输入控件边框颜色设置动画 - 两次

> ID：10371385
> 
> 赞同：0
> 
> 时间：2012-04-29T10:25:17.103
> 
> 标签：jquery, animation, colors, border, jquery-animate

我想为一个输入控件边框设置动画，它使用平滑的动画两次改变颜色。

我需要在下面的代码中添加什么来添加另一个动画以使其再次改变颜色（比如说#FF0？）。

当我在下面的代码中添加第二个动画时，jQuery 似乎“重置”了边框颜色而不是平滑的动画。

$('#searchinput').click(function() { $('#searchinput').animate({borderColor: '#36C'}, 400)

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:16:28.703

jQuery UI 库中有一些错误。如果您设置动画`borderColor`，它不会正确检测边框颜色的旧值。但是，如果您使用`borderLeftColor`等`borderTopColor`，它可以正常工作。我建议您使用此代码来解决您的问题：

```
$.fn.border_color_animate = function(color, time, callback) {
  var obj = {};
  $(["Left", "Right", "Top", "Bottom"]).each(function() {
   obj["border"+this+"Color"] = color;
  });
  this.animate(obj, time, callback);
};

$('#searchinput').click(function() {
  $('#searchinput').border_color_animate('#36C', 400, function() {
    $('#searchinput').border_color_animate('#f00',400);
  });
}); 
```

[活生生的例子](http://jsfiddle.net/riateche/nGfud/)

# opengl - “透视”相机的 OpenGL（简单）场景和对象导航基础知识

> ID：10371391
> 
> 赞同：3
> 
> 时间：2012-04-29T10:26:16.393
> 
> 标签：opengl, 3d, rotation, translation, scene

我已经阅读了几篇关于使用 OpenGL 渲染 3D 场景的过于复杂的文章，但并没有真正找到可以帮助我可视化关于 glRotate 和 glTranslate 调用的场景导航基本概念的东西。

通过对 LWJGL（我的特定 OpenGL 库）提供的示例进行试验，我基本了解了它们的使用效果。我可以使用 glTranslate 移动到一个点，使用 glRotate 围绕该点旋转，使用 glLoadIdentity 快速回到原点或使用 glPopMatrix 回到最后一个 glPushMatrix，它们本质上是位置和旋转的快照。最后，场景将相对于原点渲染到屏幕上。

所以基本上，把一个立方体放在 A 点旋转 B：

1.  glTranslate(Ax,Ay,Az) [现在专注于 A 点]
2.  glRotate(B. *,* ,*,*) 用于俯仰、偏航和滚动；[现在旋转到旋转 B]
3.  glBegin(GL_QUADS) 和 glVertex3f()x4 相对于对象原点的每个“边”（四边形）
4.  glEnd()
5.  glLoadIdentity() [重置为其他对象的原点，如果只绘制立方体则不需要]

至于“相机”，由于openGL的“眼睛”是固定的，所以场景必须从相机反向移动，以模拟用相机移动眼睛。*这是我到目前为止的理解，如果这是错误的，请让我走上正确的道路。*

现在针对我的具体情况和问题：

我的“场景”由地形和玩家（一些任意形状，位于与地形相关的位置和“相机”头）组成。视图应该相对于玩家旋转，而玩家相对于地形移动。我希望最终渲染基本上“透视”玩家的头部或相机。我的困惑在于渲染每个部分的翻译/旋转调用的顺序，以及翻译的方向。*以下是相对于玩家的“相机”渲染地形和玩家的正确方法吗？*

1.  通过玩家与原点的距离平移远离玩家（移动场景）
2.  旋转远离玩家的旋转（玩家向右看 40 度，所以向左旋转场景 40）
3.  渲染地形
4.  通过 glLoadIdentity 重置
5.  渲染玩家的头部（如果需要）
6.  转换为身体/手/任何位置
7.  旋转远离玩家的旋转（再次第 2 步）
8.  渲染身体/手/任何东西

另外，旋转对翻译有影响吗？Aka，OpenGL 是否相对于旋转进行平移，或者旋转与平移无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:19:17.890

> 我可以使用 glTranslate 移动到一个点，使用 glRotate 围绕该点旋转，使用 glLoadIdentity 快速回到原点或使用 glPopMatrix 回到最后一个 glPushMatrix，它们本质上是位置和旋转的快照。

不，不完全。这些功能现在知道场景是什么。他们所做的只是操纵矩阵。这是一篇关于它的优秀文章：

[http://www.opengl.org/wiki/Viewing_and_Transformations](http://www.opengl.org/wiki/Viewing_and_Transformations)

使用 OpenGL 时要记住的重要一点是，它不是场景图。它所做的只是将平面点、线和三角形渲染到帧缓冲区。没有像您导航的场景这样的东西。

> 所以基本上，将一个立方体放在 A 点旋转 B：（...）

是的，你没看错。

> 至于“相机”，因为openGL的“眼睛”是固定的

好吧，OpenGL 没有相机。它只是通过模型视图矩阵推动顶点，对它们进行照明计算，然后将它们通过投影并将它们映射到视口。

# android - 同步数据块移动客户端

> ID：10371394
> 
> 赞同：0
> 
> 时间：2012-04-29T10:27:14.870
> 
> 标签：android, iphone, synchronization, cloud

我想构建一个新系统，在设备和移动客户端之间同步数据。但我想聪明一点，只通过 https 同步数据块。在客户端（手机）上，我想知道哪些 inod 被更改，并且只将这些 inod 同步到服务器端，反之亦然。

这里的主要目标不是文件同步，而是块同步

移动客户端将是 iPhone/iPad/android/windows mobile。

关于如何完成它的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:45:02.207

我一直在为一家名为 iEffects 的公司做一些自由职业。他们将这种技术用于他们的移动商务应用程序，并将其授权给第三方。

该引擎可以与 iOS 和 Android 进行双向同步。您可以观看引擎的运行情况，在 App Store 中搜索 Distrelec 或 Elfa - 后者支持英语。

# java - JLabel定位

> ID：10371399
> 
> 赞同：2
> 
> 时间：2012-04-29T10:27:33.497
> 
> 标签：java, swing, user-interface, jlabel, layout-manager

我已经开始在 Netbeans 中使用 Swing 做一些经验。我创建了两个面板，并在每个面板中插入了一个`JLabel`.

如何定义标签在框架内的垂直位置？

由于我无法对齐两个标签（每个面板上一个），我想将每个标签设置为某种垂直对齐。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T10:31:14.587

具有布局填充和组件边框的布局。

看：

*   [在容器中布置组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)
*   [如何使用边框](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T09:23:38.657

您可以使用

```
setBounds(x,y,width,height);

JLabel label = new JLabel();

label.setBounds(10,10,40,20); 
```

# opengl - 用笔画绘制一个立方体并在OpenGL中填充

> ID：10371407
> 
> 赞同：1
> 
> 时间：2012-04-29T10:28:46.417
> 
> 标签：opengl, drawing

我需要画一堆立方体，并希望它们是白色的黑色笔触。目前我将所有这些立方体存储在一个 VBO 中，我可以将它们绘制成线框并且没有轮廓填充。

[我想像这张图片](http://s13.postimage.org/ywer1kabb/cubes2.jpg)左边的图片一样画它们，只在面向相机的侧面描边，不像右边。

我正在使用 OpenGL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:51:42.933

你想要的是[删除隐藏线](http://www.glprogramming.com/red/chapter14.html#name16)。

> 如果要绘制移除隐藏线的线框对象，一种方法是使用线条绘制轮廓，然后用具有背景颜色的多边形填充构成曲面的多边形内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:41:06.010

你需要 glEnable(GL_CULL_FACE); 为了获得自动应用不可见三角形的背面剔除。如果您的三角形的“缠绕顺序”当然是一致的（顺时针或逆时针）。如果它们以相反的方向缠绕，您可以通过 glFrontFrace(GL_CW | GL_CCW) 告诉 OpenGL 使用哪个方向，以及使用 glCullFace(GL_BACK | GL_FRONT) 剔除正面或背面的三角形。

# drupal - 在 Drupal 7 中为面包屑搜索引擎优化添加微数据或 schema.org

> ID：10371410
> 
> 赞同：5
> 
> 时间：2012-04-29T10:29:04.917
> 
> 标签：drupal, seo, breadcrumbs, microdata, schema.org

我目前对微数据和 schema.org 有点困惑。**microdata 和 schema.org 是一样的吗？**我阅读了[Google](http://support.google.com/webmasters/bin/answer.py?answer=185417&topic=1088474)和[Microsoft](http://onlinehelp.microsoft.com/en-us/bing/hh207238.aspx)文档，但这并没有帮助我了解这两个名称之间的区别。

到目前为止，我理解这一点，我已经生成了这个 HTML 代码：

```
<span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
 <a href="/" itemprop="url"><span itemprop="title">My Page</span></a>
</span>
<span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
 <a href="/cat1" itemprop="url"><span itemprop="title">Category 1</span></a>
</span>
<span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
 <a href="/cat1/content" itemprop="url"><span itemprop="title">Content</span></a>
</span> 
```

在我看来，开销太大了，但如果搜索结果看起来不错，那也没关系。**是否可以减少 html 代码的数量？**

另外，如果我不需要，**搜索引擎如何检测两条不同的路径？**

我的下一个问题是我想将此格式应用于drupal 面包屑。我在网上找到了[这个修复](http://drupalbin.com/19863)，我试图将它包含到我自己的 SEO 模块中，如下所示：

```
function mymod_page_alter(&$variables) {
    if (!isset($variables['breadcrumb'])) {
        $variables['breadcrumb'] = theme('my_microdata', array('breadcrumb' => drupal_get_breadcrumb()));
    }
}
function mymod_theme($existing, $type, $theme, $path) {
  return array(
    'my_microdata' => array(
     'variables' => array('breadcrumb' =>array()),
    ),
  );
}
function mymod_menu_breadcrumb_alter(&$active_trail, $item){
  foreach($active_trail as $id=>$active_trail_item){
    $active_trail[$id]['localized_options']['attributes']['itemprop'][]="url";
  }
}
function theme_my_microdata($variables){
 $breadcrumb=$variables['breadcrumb'];
print_r(debug_backtrace());
 $output="*+*+*+*+*";
  if (!empty($breadcrumb)) {
    // Provide a navigational heading to give context for breadcrumb links to
    // screen-reader users. Make the heading invisible with .element-invisible.
    $output = '<h2 class="element-invisible">' . t('You are here') . '</h2>';
    $output .= '<div class="breadcrumb">';
    $separator="";
    foreach($breadcrumb as $breadcrumb_item){
      $output.='<span typeof="datav:Breadcrumb">'.$separator.$breadcrumb_item."</span>";
      $separator="»";
    }
    $output .='</div>';
  }

    return $output."xXxXxXx";
} 
```

到目前为止，我检查了所有这些代码是否已执行。但是这个主题不适用于我的页面。**为什么该代码不起作用？**这可能与模块有关`breadcrumb`吗？我知道这个输出会是垃圾，但我看不到结果。

如果我猜对了，那就是由*theme.inc*第 1682ff 行`theme_breadcrumb(...)`而不是我的代码创建的输出。

如果有人可以帮助我，那就太好了，如果你不知道我的问题的所有答案！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T15:52:59.277

**microdata 和 schema.org 是一样的吗？**

不，他们不是！

Microdata 是一个[WHATWG](http://wiki.whatwg.org/wiki/FAQ#What_is_the_WHATWG.3F) html 规范。这是为了让计算机更容易阅读文档的内容。

Schema.org 是用于描述项目的词汇表。Schema.org 由 Bing、Google 和 Yahoo 推出。

[http://en.wikipedia.org/wiki/Microdata_(HTML)](http://en.wikipedia.org/wiki/Microdata_%28HTML%29)

[http://www.w3.org/TR/html5/microdata.html](http://www.w3.org/TR/html5/microdata.html)

[http://schema.org/](http://schema.org/)

**是否可以减少 html 代码的数量？**

查看 schema.org 中用于标记 WebPage 项的示例代码：http: [//schema.org/WebPage](http://schema.org/WebPage)

> ```
> <body itemscope itemtype="http://schema.org/WebPage">
> ...
> <div itemprop="breadcrumb">
>   <a href="category/books.html">Books</a> >
>   <a href="category/books-literature.html">Literature & Fiction</a> >
>   <a href="category/books-classics">Classics</a>
> </div> 
> ```

**搜索引擎如何检测两条不同的踪迹**

如果您使用上述来自 schema.org 的示例，则您标记的是一条路径而不是单个链接。如果您标记两条路径，它们都将被识别为两条单独的路径。*（或者至少应该是）*

**为什么该代码不起作用？**

我认为这个问题应该与这篇文章分开，并在另一个帖子中提出。我不熟悉drupal，一些可以回答有关微数据问题的人甚至不了解PHP。

# uitableview - 在两个视图之间传递值 - 带有情节提要的 Xcode 4.2

> ID：10371413
> 
> 赞同：0
> 
> 时间：2012-04-29T10:29:08.457
> 
> 标签：uitableview, xcode4.2, storyboard

我是使用故事板进行 Xcode 编程的新手。我正在尝试将一个值（标签的文本）从“SecondViewController”传递给“View Controller”。这是我的代码：

视图控制器.m

```
- (IBAction)showSecondView:(id)sender {
    NSLog(@"Trying..");
    // The identifier used here is set on the second view controller in the UIStoryboard.
    SecondViewController *svc = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondIdentifier"];
    NSLog(@"Test: %@",svc.labelTest.text);  //this print NIL!!
    svc.labelTest.text = @"GOOFY!!";
    [self.navigationController pushViewController:svc animated:YES];
} 
```

SecondViewController.h

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController

- (IBAction)returnToFirstView:(id)sender;
- (IBAction)toTabBar:(id)sender;
@property (strong, nonatomic) IBOutlet UILabel *labelTest;

@end 
```

第二视图控制器.m

```
#import "SecondViewController.h"

@implementation SecondViewController
@synthesize labelTest;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

有人可以帮助我吗？非常感谢！

斯特凡诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:33:35.737

如果您正在使用情节提要，为什么不使用`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {`

替换你的`- (IBAction)showSecondView:(id)sender {`-method

和：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([segue.identifier isEqualToString:@"SecondIdentifier"]) {
SecondViewController *svc = (SecondViewController *)segue.destinationViewController;
svc.labelTest.text = @"Goofy";
} 
```

# php - 正则表达式、PHP 和推荐人？

> ID：10371418
> 
> 赞同：0
> 
> 时间：2012-04-29T10:29:53.607
> 
> 标签：php, regex, refer

我正在尝试编写脚本，以在用户来自类似网站时重定向用户

```
http://www.something.com/url?sa=xxx

**http://www.something.com/url?sa=**t&rct=j&q=&esrc=s&source=web&cd=10&ved=0CHoQFjAJ&url=http%3A%2F%2Fblackorwhiteipad.blogspot.com%2F2012%2F03%2Fblack-or-white-ipad.html&ei=etyET5LlFoyk8QTZ0cXMCA&usg=AFQjCNEXBM1y-KlBQOORpuxqLAzVqzlGTQ&sig2=JIweuoccpZFkNKj_Xy04JA 
```

但是如果用户来自这个

```
http://www.something.com/url?**ga**=aldslakslaskl 
```

他不应该被重定向。

xxx = 后面的更多字符串。（未知）

但是如果用户来自其他推荐人，脚本不应该做任何事情

这是我的 php 代码，但它不工作。IDK 为什么？

```
<?php

  session_start();

 if ($_SERVER['HTTP_REFERER']=="http://www.something.com/url?**sa**=aldslakslaskl*string*") { 
redirect();
}
else
{donothing();
}
?> 
```

为什么这个脚本不起作用，这个脚本需要什么修改？

另外，我需要调用这个函数“Onclick”按钮。但是如果单击按钮，则父页面的引用将更改为父页面本身。那么我怎样才能在页面上调用这个函数 onclick 一个按钮呢？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:39:13.837

```
<?php
    if(preg_match("/google\.com(.+?)sa=(.+?)/", $_SERVER['HTTP_REFERER'])) {
        redirect();
    }
?> 
```

# php - 无法在 MySQL 查询中插入字符串变量

> ID：10371419
> 
> 赞同：1
> 
> 时间：2012-04-29T10:30:06.477
> 
> 标签：php, mysql

好的，所以我试图在一行中插入一个动态数据。这很可能不是最好的方法，但是在我的头撞到墙上几个小时之后，我仍然不明白为什么`$insert`字符串不会被`mysql_query`. 即使我`echo`将它复制并复制到查询中的内容，它也可以工作，但查询变量却没有。

```
$insert = '"INSERT INTO '.$_SESSION['tabsel'].' (';
echo "<form method='post' action=''>";
while($row = mysql_fetch_array($result))
{
    echo "Enter ".$row[0]." <input type='text' name='data[]'>";
    echo "<br>";
    $insert .= $row[0].",";
    $_SESSION['insert'] = $insert;
}

echo "<input type='submit' value='Add'>";
echo "</form>";
if(isset($_POST['data']))
{
    $insert = $_SESSION['insert'];
    $strlength = strlen($insert);
    $insert = substr($insert,0,($strlength-1));
    $insert .= " VALUES (";
    foreach($_POST['data'] as $value)
    {
        $insert .= "'$value',";
        $_SESSION['insert'] = $insert;
    }
}

$insert = $_SESSION['insert'];
$strlength = strlen($insert);
$insert = substr($insert,0,($strlength-1));
$insert .= ')"';
$_SESSION['insert'] = $insert;
$insert = $_SESSION['insert'];
echo $insert."<br>";
$seldb = mysql_select_db($_SESSION['sel']);
if($seldb && (!empty($_POST['data'])) && (isset($_SESSION['sel'])) && (isset($_SESSION['tabsel'])))
{
    $insert = $_SESSION['insert'];
    echo $insert;
    $query = mysql_query($insert, $con);
    if($query)
    {
        echo "Record succesfully added!";
    }
    else
    {
        echo mysql_error();
    }
} 
```

给出的错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`"INSERT INTO mtable (id,nr,d,ra) VALUES ('d','d','d','d')"`在第 1 行附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:42:42.457

看看 echo'd 字符串

```
"INSERT INTO druga (id,podaci,d,ra) VALUES ('d','d','d','d')" 
```

您需要删除您在 SQL 查询中放置的前导和尾随引号字符。修改这两行代码：

*   删除前导引号字符。

    ```
    $insert='INSERT INTO '.$_SESSION['tabsel'].' ('; 
    ```

    代替

    ```
    $insert='"INSERT INTO '.$_SESSION['tabsel'].' ('; 
    ```

*   删除尾随引号字符。

    ```
    $insert.=')'; 
    ```

    代替

    ```
    $insert.=')"'; 
    ```

# java - 在 android 开发中使用 lambdaj 库

> ID：10371422
> 
> 赞同：3
> 
> 时间：2012-04-29T10:30:38.940
> 
> 标签：java, android, lambdaj

有没有办法在 android 开发中使用[lambdaj 库？](http://code.google.com/p/lambdaj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-02T13:32:06.570

原因可能与 lambdaj jar.(750kb) 的大小有关。尝试在移动环境中使用它是否有意义。尝试通过从 hamcrest 和 cglib 中删除常见的登录和未使用的类来减小大小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T15:31:29.073

您可以通过导入来轻松做到这一点。项目的lib文件夹中的jar文件。

# php - wordpress 在 php 中获取永久链接格式

> ID：10371424
> 
> 赞同：1
> 
> 时间：2012-04-29T10:30:54.963
> 
> 标签：php, wordpress

我对 php 的 wordpress api 不是很好，但我正在寻找一种方法来返回我在这里尝试过的 php 中的永久链接格式：http: [//codex.wordpress.org/Function_Reference](http://codex.wordpress.org/Function_Reference)

但什么也没有跳出来。在[WP 的管理设置中，我有几个选项](http://codex.wordpress.org/images/a/ad/permalink-settings.png)

我真正想要的是一种在 php 中获取它的方法，例如：

```
get_permalink_format();  // would give me the rewrite rule as a string? 
```

谁能给我一根骨头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:34:13.620

```
<?php
    echo get_option('permalink_structure');
?> 
```

# wordpress-theming - 根据 URL 添加 id "selected" 到 wordpress 语言切换器

> ID：10371425
> 
> 赞同：0
> 
> 时间：2012-04-29T10:31:07.723
> 
> 标签：wordpress-theming

```
<?php if( is_front_page() || is_home() ) { ?>
<div class="motto_info_wrapper">
    <div class="motto">
    <h6>режиссёр-постановщик</h6>
    <h1>Kirill Zolotarev</h1>
    <ul>
        <li id="<?php if ( $_SERVER['REQUEST_URI'] == '/' ) { echo "selected"; }?>"><a class="russian_lang" href="<?php bloginfo('url'); ?>" title="">RUSSIAN</a></li>
        <li>&#32;&#124;&#32;</li>
        <li id="<?php if ( $_SERVER['REQUEST_URI'] == '/en' ) { echo "selected"; }?>"><a class="english_lang" href="<?php bloginfo('url'); ?>/en/" title="">ENGLISH</a></li>
    </ul>
    <div id="blob"></div>
    </div>
</div> 
<?php } ?> 
```

[它虽然在这里](http://artur.nickandlarry.ru/en/)不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T22:15:25.473

而不是使用`$_SERVER['REQUEST_URI']`，尝试使用`$_SERVER['PATH_INFO']`。如果这不起作用，您还可以使用`strpos`在路径字符串中查找 en。

# android - MediaPlayer——最大计数及其影响因素

> ID：10371429
> 
> 赞同：1
> 
> 时间：2012-04-29T10:31:17.410
> 
> 标签：android, media-player, limit

引用格伦·卡斯滕的话：

*“对于音频，每个设备*有 32 个活动 AudioTrack 对象的硬性限制（不是每个应用程序：您需要与系统的其余部分共享这 32 个），并且 AudioTrack 在 SoundPool、ToneGenerator、MediaPlayer、基于 OpenSL 的本机音频内部使用ES等。但是实际AudioTrack限制是<32；它更多地取决于内存，CPU负载等软因素。另外注意Android混音器中的限制器目前没有动态范围压缩，所以可以如果您有大量活跃的声音并且它们都很响亮，则可以进行剪辑。”

因此，实际上，我使用的 1 个 MediaPlayer 对应于系统中的 1 个 AudioTrack。

重要问题：已发布的 MediaPlayers（即从我那里得到 release() 的那些）不算数，对吗？即，如果我有 7 个媒体播放器，但其中 5 个已经发布，我只使用了全局系统池中的 7-5=2 个 AudioTrack。这个对吗？

（因此，如果所有应用程序都正确地关心在其 onStop/onPause 中释放，那么很难达到上述硬限制；因为只有前台和可能一些暂停的应用程序会使用 AudioTracks——当然，除了操作系统） .

# php - 获取用户输入，然后提交到另一个站点

> ID：10371431
> 
> 赞同：0
> 
> 时间：2012-04-29T10:31:19.580
> 
> 标签：php, textarea

我的网站上有一个文本区域输入，用户可以在其中输入信息，当他们点击提交时，我试图让我的网站获取该数据并将其提交到外部网站。当外部站点返回结果时，我想获取这些结果并将它们返回到我的站点。

解决这个问题的最佳方法是什么？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:34:45.757

获取输入并通过[cURL](http://de.php.net/curl)将其提交到您想要的站点，将[CURLOPT_RETURNTRANSFER 设置](http://de.php.net/manual/en/function.curl-setopt.php)为 1，然后将结果作为[curl_exec()](http://de.php.net/manual/en/function.curl-exec.php)的返回值。

如果您要查询的站点使用 POST，您需要查看 CURLOPT_POSTFIELDS。[否则，您可以使用http_build_query](http://de3.php.net/manual/en/function.http-build-query.php)将其附加到您的 (GET) Query-String 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:35:43.650

您可以使用[curl](http://Php.net/curl)轻松完成。

其他选择是，

*   [带有 URL 包装器的 fopen](http://Php.net/fopen)
*   [流](http://au2.php.net/manual/en/book.stream.php)函数
*   [http](http://php.net/http)扩展
*   [fsockopen](http://Php.net/fsockopen)
*   [插座](http://au2.php.net/manual/en/book.sockets.php)扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T10:36:02.073

好吧，您需要知道其他站点接收数据所需的 API，但我敢打赌他们将有一个 RESTful 接口，您可以在其中使用 url 中的变量。使用 php，您可以执行以下操作：

```
 //get the text area value if it was part of a form which was posted
  $data = urlencode($_REQUEST['textareaname']);
  $othersiteresponse = file_get_contents('http://www.othersite.com/url.php?variable='.$data);
  //return this data 
```

# gdb - gdb 特定环境变量

> ID：10371432
> 
> 赞同：0
> 
> 时间：2012-04-29T10:31:31.233
> 
> 标签：gdb

我注意到在调试过程中在堆栈中引入了几个 gdb 特定的环境变量。有什么办法可以单独取消设置这些环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T16:41:17.733

> 我注意到在调试过程中在堆栈中引入了几个 gdb 特定的环境变量。

您必须使用某种 IDE 或包装脚本来执行此操作。GDB 本身不会修改环境，除非您使用例如`set env`命令要求它。

# xna - 在 XNA 中从普通的 2D 游戏（例如乒乓球）到 3D 的最快/最简单的方法是什么？

> ID：10371435
> 
> 赞同：0
> 
> 时间：2012-04-29T10:32:12.123
> 
> 标签：xna

我有一个关于从 2D 游戏到 3D 的方式的问题。

例如，我有一个像乒乓球这样的 2D 游戏。现在我想让它像 3D 一样，这意味着：我想把游戏的平台向后面倾斜，所以看起来游戏场是 3D 的。

我怎样才能达到这个效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:48:06.853

将逻辑与渲染器分开..游戏是一样的，如果你改变渲染器，它会看到不同的。

您将拥有球，一个 2D 渲染器将绘制一个圆周，一个 3D 渲染器将绘制一个球体......但运动和碰撞逻辑是相同的

# jquery - jQuery JSON Flickr 图像在 IE9 中不起作用

> ID：10371436
> 
> 赞同：1
> 
> 时间：2012-04-29T10:32:21.310
> 
> 标签：jquery, json, internet-explorer, cross-browser

真的杀了我。

我有一个页面，它使用 jQuery 的 getJSON 方法来获取 Flickr 的一些照片。可以在任何地方工作，但 IE。我错过了什么？

测试页面：[http ://test.dhut.ch/](http://test.dhut.ch/)

jsFiddle：http: [//jsfiddle.net/danielredwood/RzkzY/2/](http://jsfiddle.net/danielredwood/RzkzY/2/)

```
 function imgBuilder(data){
    $.each(data.photos.photo,function(i,rPhoto){
        var base   = 'http://farm' + rPhoto.farm + '.static.flickr.com/' + rPhoto.server + '/' + rPhoto.id + '_' + rPhoto.secret,
            thumb  = base + '_m.jpg',
            medium = base + '.jpg',
            large  = base + '_b.jpg',
            imageM = '<a class="fancybox" rel="group" ' + 'title="' + rPhoto.title + '" href="'+ medium +'"><img src="' + thumb + '" alt="' + rPhoto.title + '"/></a>',
            imageL = '<a class="fancybox" rel="group" ' + 'title="' + rPhoto.title + '" href="'+ large +'"><img src="' + thumb + '" alt="' + rPhoto.title + '"/></a>';

        $(imageM).appendTo("#test");
    });
 }
 $(document).ready(function(){
      $.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=ac08dd724a859d7fb3192293595eb496&user_id=26545877%40N04&tags=terminal+5&per_page=25&format=json&nojsoncallback=1&auth_token=72157629922435489-4d437791b153803b&api_sig=9203d027009eb268adf9e790852a0e28", imgBuilder);
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:14:31.400

您需要使用 JSONP。将`jsoncallback`参数添加到查询字符串。

# c - 抑制我的 Makefile 的输出

> ID：10371440
> 
> 赞同：22
> 
> 时间：2012-04-29T10:33:12.933
> 
> 标签：c, makefile

我有 ;

```
 default :
           gcc -o function function.c 
```

当我在终端中输入 make 时，会发出以下消息

```
 user@user-laptop:~/Desktop$ make
         gcc -o function function.c 
         user@user-laptop:~/Desktop$ 
```

但我想要

```
 user@user-laptop:~/Desktop$ make
         user@user-laptop:~/Desktop$ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-29T10:35:43.563

使用 an`@`使输出安静：

```
default:
    @gcc -o ... 
```

您可以在此处找到文档：[Recipe echoing](http://www.gnu.org/software/make/manual/make.html#Echoing)。（或者您可以调用`make`with`make -s`来抑制所有回显。）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-29T10:37:07.527

您可以使用`make --silent`（至少对于 GNU make）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-21T17:48:34.680

要告诉 Make 对所有目标保持安静/静默，请将以下内容放在 Makefile 的顶部，这将就像`make --silent`使用时一样工作，而无需在命令行上提供开关。

在 Linux 上与 GNU Make 一起工作，我不确定所有其他 Make 变体。

```
MAKEFLAGS += --silent 
```

# if-statement - 在 Fortran 90 程序中调试 DO 循环/IF 块（初级）

> ID：10371441
> 
> 赞同：1
> 
> 时间：2012-04-29T10:33:16.267
> 
> 标签：if-statement, fortran, fortran90, do-loops

如果有人可以在这里帮助我，我将不胜感激。我刚刚开始学习如何编程，所以我很有可能错过了一些非常明显的东西。我正在尝试用 Fortran 90 编写一个程序来解决[此](http://www.maths.usyd.edu.au/u/david/fplecs12.pdf)pdf 第 45 页上的问题 4 i)。我终于设法让我的代码编译成一些东西，但现在有些东西有点垃圾，它产生的数据很疯狂（随着时间的增加，我在 t0 输入任何内容后距离都会减少）。有人能发现我的错误吗？我意识到这是相当多的代码要查看，我很抱歉问你这么多。提前感谢您浏览！

* * *

```
 PROGRAM PARACHUTIST
   ! Tabulation of parachutist's descent z and and speed zdot
   ! as functions of time t

     !Assign the program's associated constants

    IMPLICIT NONE
      REAL z, zdot, g, U1, U2, z0, u0, t0, q0, t, x,c,s
    INTEGER I

g=9.8
U1=54
U2=5

!Break z0 down a little with q0

q0=COSH(g*t0/U1)
z0=U1**2/g*LOG(q0)
u0=U1*TANH(g*t0/U1)

      !Prompt for and read in the free-fall time

      Print*, 'Input free-fall time in seconds:'
      Read*, t0

      !Print the table headings
      WRITE(*,1000)

1000 FORMAT (6X, 'TIME', 6X, 'DISTANCE', 6X, 'VELOCITY',            /6X, '(SEC)', 7X, '(M)', 10X, '(M/SEC)',&
        /6X, '0.0', 10X, '0.0', 10X, '0.0' )

      !Loop covering the specified times
      t=0 

    DO I=0,20

  ! Calculate the distance above ground
200         IF(t<=t0) THEN
            x=g*t/U1
            z=U1**2/g*LOG(COSH(x))
            zdot=U1*TANH(x)

    Elseif(t>t0) THEN
            x=g*(t-t0)/U2  
    !store re-used expressions

            c=cosh(x)
            s=sinh(x)
            z= z0 + (U2**2/g)*LOG(c+ (u0/U2)*s)
            zdot=U2*(U2*s+u0*c)/(U2*c+u0*s) 

        Endif

         !Print a line of table using T formats
         WRITE(*,100) t, z, zdot
100      Format(4X, F5.2, 6X, F7.2, 6X, F7.2)

!Stop with message if landed

         If(z.GE.500) THEN
        PRINT*, 'LANDED'
        STOP
         !If we haven't yet landed then increment t as in 
        !   problem specs
         Elseif(t<15) then
            t=t+1
         Elseif(t.GE.15) then
            t=t+10

        ENDIF

     !End of the t-loop
      END DO

  END PROGRAM PARACHUTIST 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T13:38:58.990

我把它写成两条评论，但它真的太长了。如果您计划这样做，请继续将其全部删除。我刚刚浏览了一个比较 Fortran77 和“现代”Fortran90 的文档。（不久前，我刚开始上学时使用 Fortran77 进行编码......）。以下是一些建议：

小心使用“ELSEIF”。**[ELSE 和 IF 省略空格](http://www.star.le.ac.uk/~cgp/f90course/f90.html#tth_sEc2.2)**通常是可以的，但对于自由格式代码则不然（我认为空格可选的唯一其他实例是 DOUBLE PRECISION、ELSE IF、GO TO、END DO 和万一）。

使用 Fortran90 的一个优点是您**[甚至不需要 ELSE IF](http://www.star.le.ac.uk/~cgp/f90course/f90.html#tth_sEc3.1)**（也不需要计算 GOTO！），因为有 SELECT CASE。

您也不应该需要 FORMAT，因为它可以直接与**[READ 或 WRITE 语句](http://www.star.le.ac.uk/~cgp/f90course/f90.html#tth_sEc3.5)**本身中的格式字符串合并。

是的，您可以使用旧的 Fortran 77 运算符`.GE..GT..EQ..NE..LE..LT.`或新的 运算符`>= > == /= <= <`。但是，我不确定您是否应该混合它们，我在您的代码中注意到了这一点。

**编辑：**上面的第二个链接，关于控制结构，描述了如何使用 DO 循环而不是 Fortran90 中的 IF，第 3.2 - 3.5 节。您可以使用命名的 DO、无限期的 DO 循环、DO WHILE 以及各种各样的东西！也有例子。（整个文档的名称是**Fortran90 for Fortran77 Programmers**。）

# merge - 如何合并两个xml文件（Web.config）？

> ID：10371444
> 
> 赞同：0
> 
> 时间：2012-04-29T10:33:51.433
> 
> 标签：merge, web-config, filemerge, xmldiff

我有两个 xml 文件，如果我使用 microsoft 的 xmlDiffPatch，它会删除元素，但我不想删除节点，只是替换值或添加节点，怎么做？例如：web1.config 就像'600 150 75 25 ' 和 web2.config 是这样的：'

```
<PartPriceInfo xmlns:ns2="http://www.aa.com">
    <ns2:Subaru model="Outback">
        <ns2:Muffler> 700 </ns2:Muffler>
        <ns2:Bumper> 150 </ns2:Bumper>
    </ns2:Subaru>
</PartPriceInfo> 
```

' 我想要如下结果：

```
'
<PartPriceInfo xmlns:ns2="http://www.aa.com">
    <ns2:Subaru model="Outback">
        <ns2:Muffler> 700</ns2:Muffler>
        <ns2:Bumper> 150 </ns2:Bumper>
        <ns2:Floormat> 75 </ns2:Floormat>
        <ns2:WindShieldWipers> 25 </ns2:WindShieldWipers>
    </ns2:Subaru>
</PartPriceInfo> 
```

'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:13:24.297

最后我找到了 Microsoft XML Diff and Patch Tool，我的工作做得很好。祝大家好运。

# android - 如何快速将表从一个数据库复制到另一个数据库

> ID：10371446
> 
> 赞同：2
> 
> 时间：2012-04-29T10:34:19.707
> 
> 标签：android, sqlite, fts3

我有一个数据库，一个表和另一个数据库。我需要将这个表从第一个数据库（带有简单表）复制到第二个。（在第二个数据库中，它应该是 fts3 表）。因此，我可以打开两个数据库，在第二个数据库中创建新的 fts3，然后通过 select -> insert 查询将所有数据从第一个数据库复制到第二个数据库。但是有没有其他方法可以更快更好地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T10:42:02.213

据我所知，您描述的方法（即`INSERT INTO db2.tbl SELECT * FROM db1.tbl`）通常应该是最有效的。

您可以做的是调整 sqlite 以更快地完成它。首先想到的是禁用[日志](http://www.sqlite.org/pragma.html#pragma_journal_mode)（通常很危险，但在您的场景中应该可以接受，因为您仍然拥有数据的原始数据）：

```
pragma PRAGMA journal_mode=OFF: 
```

您还可以关闭[`synchronous`编译指示](http://www.sqlite.org/pragma.html#pragma_synchronous)（也很危险）：

```
PRAGMA synchronous=OFF; 
```

您还可以使用一两个以上的 pragma，这可能会产生影响，但我认为我提到的两个将产生最大的影响。

确保在复制后将这些 pragma 恢复为其原始值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T10:38:13.037

嗯，是的，这是最好的方法。创建表，然后插入数据：

```
INSERT INTO `toDB`.`tableName` SELECT * FROM `fromDB`.`tableName` 
```

# mysql - 如何获取自当月开始以来添加的记录数

> ID：10371448
> 
> 赞同：4
> 
> 时间：2012-04-29T10:34:39.763
> 
> 标签：mysql, sql, web-services, count, database-performance

我正在使用 php 和 mysql 构建 Web 服务，并希望在 (y) 时间内将来自每个 apikey 的请求限制为 (x) 数量。

为了实现这一点，我使用如下 sql 语句计算在一段时间内从每个 apikey 添加到日志的记录：

```
SELECT COUNT(*) FROM ws_account_log WHERE account_log_account_id='1' AND account_log_timestamp > DATE_SUB(now(), INTERVAL 1 HOUR) 
```

这给了我一个滚动的每小时计数，这很好，但我想要一个每月计数的硬性限制。例如，自当月第一天的 00:00 起添加了多少行。

我已经看到使用存储过程和不同语法的示例，我想要一个适用于 MYSQL 的答案。此外，如果可能，作为服务之一的最快实现提供自动完成功能，因此日志表相当大。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T10:49:05.283

```
SELECT COUNT(*)
FROM ws_account_log
WHERE
      account_log_account_id='1'
  AND account_log_timestamp >= SUBDATE(CURDATE(), DAYOFMONTH(CURDATE())-1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:44:50.357

使用 php 计算您想要的时刻的时间戳，然后将其传递给 mysql 查询。

```
$date = mktime(0, 0, 0, date("n"), 1, date("Y"));
$mysqldate = date( 'Y-m-d H:i:s', $date );
$query = " ... AND account_log_timestamp > ".$mysqldate; 
```

# windows - Ghostscript：ps2pdf 不适用于 Win 7 32 位

> ID：10371457
> 
> 赞同：2
> 
> 时间：2012-04-29T10:36:00.650
> 
> 标签：windows, ghostscript

我有最新的 GPL Ghostscript v9.05，我在 Win 32 位系统上运行它。在我的 XP 机器上，这两个命令

```
ps2pdf -v - 
```

和

```
rungs -v (used internally by TeXLive) 
```

Ghostscript 9.05 的报告如下：

```
GPL Ghostscript 9.05 (2012-02-08)
Copyright (C) 2010 Artifex Software, Inc.  All rights reserved. 
```

在另一台 Win 7 计算机上，命令

```
ps2pdf -v - 
```

在命令行**不**被识别为有效的`ps2pdf`语法，但`rungs -v` **工作正常**。

我在互联网上阅读了有关在此处为 Ghostscript 设置临时目录的信息：

[http://schlingel.bplaced.net/?p=54](http://schlingel.bplaced.net/?p=54)

它基本上说要编辑Ghostscript`gssetgs.bat`文件`lib`夹中的文件并添加以下行：

```
set path=%ProgramFiles%\gs\gs9.02\lib;%ProgramFiles%\gs\gs9.02\bin;%windir%\SysWOW64
set TMP=%YOUR_TEMP%
set TEMP=%TMP% 
```

在我的情况下，这需要通过将*9.02*替换为*9.05*来进行适当的修改。现在在 Win 7 上，关于临时文件夹的最后两行应该如何？我可以有`Set TMP`如下：

```
set TMP=%"C:\Users\hihi\AppData\Local\Temp"% 
```

它是正确的语法吗？

我还将`tmp`and`temp`变量放在了我的*Environment variables*中。

**更新**

A. 使用`ps2pdf`，这是我在 Win 7 机器上将 a 转换`PS`为`PDF`文件的方法，但出现错误：

```
C:\work\misc>ps2pdf -dNOSAFER -sDEVICE=pdfwrite -r720 -dCompatibilityLevel=1.5 -dUseFlateCompression=true -dMaxSubsetPct=100 -dSubsetFonts=true -dEmbedAllFonts=true -dEPSCrop "%1.ps" "%1.pdf"

Unknown device:
Unrecoverable error: undefined in .uninstallpagedevice
Operand stack:
defaultdevice 
```

**注意：上面的命令在我的 Win XP 机器上运行良好！**

B.`gswin32c`在这里使用是我如何在我的 Win 7 机器上将a 转换`PS`为文件，这很**有效**：`PDF`

 **```
C:\work\misc>gswin32c.exe -o "%1.pdf" -dNOSAFER -sDEVICE=pdfwrite -r720 dCompatibilityLevel=1.5 -dUseFlateCompression=true -dMaxSubsetPct=100 -dSubsetFonts=true -dEmbedAllFonts=true -dNumRenderingThreads=2 -c "60000000 setvmthreshold" -f -dEPSCrop "%1.ps"

GPL Ghostscript 9.05 (2012-02-08)
Copyright (C) 2010 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Loading NimbusSanL-Regu font from %rom%Resource/Font/NimbusSanL-Regu... 2837152
1454727 4413848 3026018 1 done.
Loading Dingbats font from %rom%Resource/Font/Dingbats... 2837152 1510862 457461
6 3180865 1 done.
Loading NimbusSanL-Bold font from %rom%Resource/Font/NimbusSanL-Bold... 2857248
1553499 4655000 3251960 1 done. 
```

**注意：上面的命令在我的 Win XP 机器上也可以正常工作**

**总结一下**：我的 Win 7 机器有问题`ps2pdf`。

**新（2012 年 5 月 9 日）**

这就是我按照肯建议的最后两行时得到*的*结果：

```
C:\work\misc>ps2pdf -dNOSAFER -r720 -dCompatibilityLevel=1.5 -dUseFlateCompression=true -dMaxSubsetPct=100 -dSubsetFonts=true -dEmbedAllFonts=true -dEPSCrop "%1.ps" "%1.pdf"
Unrecoverable error: typecheck in .putdeviceprops
avoiding clean up 
```

*temp*文件夹包含您提到的那些临时文件。

的内容`_.at`：

```
-dCompatibilityLevel#1.4 
-dNOSAFER 
-r720 
-dCompatibilityLevel 
```

的内容`_.at2`：

```
-q -P- -dSAFER -dNOPAUSE -dBATCH -sDEVICE#pdfwrite 
-sOutputFile#-dUseFlateCompression 
-dCompatibilityLevel#1.4 
-dNOSAFER 
-r720 
-dCompatibilityLevel 
-c .setpdfwrite -f1.5 
```

**5月11日更新**

**注意：现在在我的 win 7 机器上运行良好**

```
C:\work\misc>ps2pdf -dNOSAFER -r720 -dCompatibilityLevel#1.5 -dUseFlateCompression#true -dMaxSubsetPct#100 -dSubsetFonts#true -dEmbedAllFonts#true -dEPSCrop "defense.ps" "defense.pdf"
avoiding clean up 
```

的内容`_.at`：

```
-dCompatibilityLevel#1.4 
-dNOSAFER 
-r720 
-dCompatibilityLevel#1.5 
-dUseFlateCompression#true 
-dMaxSubsetPct#100 
-dSubsetFonts#true 
-dEmbedAllFonts#true 
-dEPSCrop 
```

的内容`_.at2`：

```
-q -P- -dSAFER -dNOPAUSE -dBATCH -sDEVICE#pdfwrite 
-sOutputFile#"defense.pdf" 
-dCompatibilityLevel#1.4 
-dNOSAFER 
-r720 
-dCompatibilityLevel#1.5 
-dUseFlateCompression#true 
-dMaxSubsetPct#100 
-dSubsetFonts#true 
-dEmbedAllFonts#true 
-dEPSCrop 
-c .setpdfwrite -f"defense.ps" 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:15:35.763

比临时文件问题更可能是您尝试写入目标文件的目录的权限。您引用的错误消息在使用任何临时文件之前很久就出现了，但是如果您尝试写入不存在的目录或进程没有写入权限的目录，则这是一个非常常见的错误。

首先要做的是发布您正在使用的实际 gswin32 命令行。

您查询的语法不正确。%value% 是一个 Windows 脚本操作，它表示“用命名值替换 % 符号之间的内容”。所以如果我声明'set VAL=c:/temp' 然后我可以说'set NEWVAL=%VAL%/New' 这将使NEWVAL 'c:/temp/new'。您可以在 Windows 帮助中或通过快速 Google 找到有关 Windows 脚本的更多信息。

鉴于在您的 Windows 7 机器上找不到“ps2pdf”（这是一个 Windows 脚本）（至少我认为这就是您所说的“不被识别为有效的 ps2pdf 命令”的意思），它似乎确实需要将 Ghostscript 路径添加到您的环境中。简单地自行更改 gssetgs.bat 不会有任何效果，您需要确保从您的 autoexec.bat 脚本调用此脚本文件，以便应用其他环境设置。

如果您不确定 autoexec.bat 是什么或如何修改它，那么 Google 应该会很快为您提供帮助。

你真的安装了 Ghostscript，还是简单地复制它？

鉴于 Ghostscript 工作正常，问题一定出在 shell 脚本“ps2pdf”中，或者更准确地说，Windows 7 中的某些更改导致旧脚本无法工作。

这个脚本（不幸的是）比我想要的要复杂得多（我没有写它）。它实际上使用大约三个不同的脚本来完成这项工作。您确实需要找出发送给 GS 的内容。

可能最简单的方法是编辑“ps2pdfxx.bat”。在 :end 标签上，您会看到“rem Clean up”，后跟两行以“如果存在”开头。把rem放在那两个前面。添加一行“回显避免清理”文件的末尾应如下所示：

:end rem 清理。rem 如果存在 "%TEMP%_.at" 擦除 "%TEMP%_.at" rem 如果存在 "%TEMP%_.at"2 擦除 "%TEMP%_.at"2 echo 避免清理

现在运行你的命令行（顺便说一下，使用 ps2pdf 时你*真的*不需要放 -sDEVICE= .....）

在您的 TEMP 目录中，您应该有名为 _.at 的文件，可能还有 _.at2 文件，其中包含发送给 GS 的实际命令。

好的，文件 _.at 被复制到文件*.at2 中，然后*.at2 用作 Ghostscript 的参数列表。评论你得到的文件：

---批处理文件ps2pdfxx.bat添加的这一行 -q -P- -dSAFER -dNOPAUSE -dBATCH -sDEVICE#pdfwrite

---这些行来自 _.at -sOutputFile#-dUseFlateCompression -dCompatibilityLevel#1.4 -dNOSAFER -r720 -dCompatibilityLevel

--批处理文件ps2pdfxx.bat -c .setpdfwrite -f1.5 添加的这一行

这样做有很多问题：

-sOutputFile#-dUseFlateCompression

这实际上将输出文件设置为“-dUseFlateCompression”

-c .setpdfwrite -f1.5

我不完全确定这会做什么。它要么正确处理 -f 并终止 PostScript 输入，要么将其作为无法识别的开关忽略（可能是后者）。'1.5'*应该*是输入文件名，没有那个 Ghostscript 不知道要使用哪个文件.....即使知道，它也会尝试将输出写入虚假文件名。

老实说，我建议，如果您想设置所有这些开关，您只需直接调用 Ghostscript 而不是尝试使用该脚本。事实上，无论如何我都建议这样做，每次我看到这些脚本时，我都会更加颤抖。

ps2pdf 脚本所做的几乎所有事情都被您的命令行覆盖，或者一开始就不需要。**

# wpf - MainWindow 已加载但始终不可见

> ID：10371459
> 
> 赞同：0
> 
> 时间：2012-04-29T10:36:24.650
> 
> 标签：wpf, clipboard, visibility, tray

我想构建一个 WPF 应用程序，它在启动时只有一个托盘图标。如果用户与托盘上下文菜单中的菜单条目进行交互，则会出现 Windows。

我需要加载 MainWindow，所以我可以收听剪贴板更改事件。但我不想表现出来。

我试过：

```
<Window x:Class="ClipboardListener.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:tb="http://www.hardcodet.net/taskbar"
    Title="Should not see me"
    ShowInTaskbar="False" Visibility="Collapsed" Opacity="100"
    Width="320" Height="240"> 
```

但它仍然出现？将可见性设置为隐藏对我不起作用，因为我需要一些窗口来向 WinAPI 注册剪贴板事件侦听器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:29:30.617

我最近有非常相似的任务。我所有使 Window 不可见的尝试、我的谷歌搜索、我的 stackoverflowing 等都失败了。最后我有一种感觉，由于某种原因，不可见的窗口不应该出现在 WPF 中。如果有像 WinForms 那样的 TrayIcon 控件，那将是一件容易的事。不幸的是，WPF 没有 TrayIcon。这导致出现在 WinForms 中的那个。

这是一篇关于这个问题[的好文章。](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon)而我使用这个 dll 的代码：

```
<Window x:Class="ScannerClientWpf.TrayIcon"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ni="clr-namespace:Hardcodet.Wpf.TaskbarNotification;assembly=Hardcodet.Wpf.TaskbarNotification"
    Title="TrayIcon" WindowStyle="None" AllowsTransparency="True" Background="Transparent" ShowActivated="False" ShowInTaskbar="False" >
<Grid>
    <ni:TaskbarIcon IconSource="/ScannerClient;component/app.ico" 
                    ToolTipText="ScannerClient">
        <ni:TaskbarIcon.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Close" Click="MenuItem_Click"/>
            </ContextMenu>
        </ni:TaskbarIcon.ContextMenu>
    </ni:TaskbarIcon>
</Grid> 
```

# c# - PropertyInfo GetCustomAtributes 从其他 dll

> ID：10371460
> 
> 赞同：2
> 
> 时间：2012-04-29T10:36:40.610
> 
> 标签：c#, .net, reflection

我创建了自定义属性并放置在 Core.dll 中。

```
public class DBColumnReference : Attribute
{
    string m_column;

    public string ColumnName {
        get { return m_column; }

    }

    public DBColumnReference(string column)
    {
        m_column = column;
    }
} 
```

然后我创建了我的应用程序，它引用了 Core.dll。
在我的应用程序中创建了自己的对象，并且在某些属性上使用来自 Core.dll 的自定义属性。

```
public class TestingObject4
{
    string m_table = "TESTING_CORE_OBJECT4";

    public string Table 
    {
        get { return m_table; }
    }

    private int m_id = 0;

    [DBColumnReference("ID")]
    public int Id 
    {
        get { return m_id; }
        set { m_id = value; }
    } 
```

我调用核心方法“FilterProperties(typeof(TestingObject4))”，它按属性过滤属性。

```
private static Dictionary<string, PropertyInfo> FilterProperties(Type type)
{
  Dictionary<string, PropertyInfo> result = new Dictionary<string, PropertyInfo>();
  if(type == null)
    return result;

  PropertyInfo[] properties = type.GetProperties();
  foreach(PropertyInfo prop in properties)
  {
   // Attribute[] atributes = Attribute.GetCustomAttributes(prop,   true);
    object[] atributes = prop.GetCustomAttributes(typeof(DBColumnReference), true);
    if(atributes != null && atributes.Length != 0)
    {
      DBColumnReference reference = atributes[0] as DBColumnReference;
      result.Add(reference.ColumnName, prop);
    }
  }
  return result;
} 
```

并且`Attributes[]`属性始终为空。如何正确获取属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:55:00.040

试试这个对我有用的片段！

```
public class DBColumnReference : Attribute
{
    string m_column;

    public string ColumnName
    {
        get { return m_column; }

    }

    public DBColumnReference(string column)
    {
        m_column = column;
    }
}
public class TestingObject4
{
    string m_table = "TESTING_CORE_OBJECT4";

    public string Table
    {
        get { return m_table; }
    }

    private int m_id = 0;

    [DBColumnReference("an integer id")]
    public int Id
    {
        get { return m_id; }
        set { m_id = value; }
    }
}
class Program
{
    private static Dictionary<string, PropertyInfo> FilterProperties(Type type)
    {
        Dictionary<string, PropertyInfo> result = new Dictionary<string, PropertyInfo>();
        if (type == null)
            return result;

        PropertyInfo[] properties = type.GetProperties();
        foreach (PropertyInfo prop in properties)
        {
            // Attribute[] atributes = Attribute.GetCustomAttributes(prop,   true);
            object[] atributes = prop.GetCustomAttributes(typeof(DBColumnReference), true);
            if (atributes != null && atributes.Length != 0)
            {
                DBColumnReference reference = atributes[0] as DBColumnReference;
                result.Add(reference.ColumnName, prop);
            }
        }
        return result;
    }

    static void Main(string[] args)
    {
        Dictionary<string, PropertyInfo> resultCollection = FilterProperties(typeof(TestingObject4));
        foreach (var singleObject in resultCollection)
        {
            Console.WriteLine(singleObject.Key + "  " + singleObject.Value);
        }
        Console.ReadKey(false);
    }
} 
```

# android - Android：如何检测用日志按下的主页按钮？

> ID：10371464
> 
> 赞同：1
> 
> 时间：2012-04-29T10:36:55.630
> 
> 标签：android, logging

我已经阅读了有关 Home-Button 及其检测可能性的另一个问题。我也知道这个动作没有广播意图。我尝试用 logcat 跟踪它，但我真的不知道应该跟踪什么消息。我读了大约一个小时的日志，但我找不到一条消息，现在真的说它肯定是按下 Home-Button

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T11:45:19.267

当按下 Home-Button 时，`system_process`使用 Tag`ActivityManager`启动 Home 活动，其格式可能如下所示

```
Intent { 
    act=android.intent.action.MAIN 
    cat=[android.intent.category.HOME] 
    flg=0x10200000
    cmp=com.android.launcher/.Launcher 
} 
```

您可以在`logcat`. 好像可以模拟 Home-Button 的动作，但无法获取 Home-Button 的 Intent，所以当这个显示时，可能是`definitely`Home-Button 被按下。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T10:39:29.077

`Log.i()`为什么不在Home 活动的 onResume 中添加调用？

# php - preg_match 小数不起作用

> ID：10371476
> 
> 赞同：1
> 
> 时间：2012-04-29T10:39:00.827
> 
> 标签：php, regex, preg-match

我似乎遇到了 preg_match 代码的问题，我试图从一个应该类似于 '3.25' 的字符串中获取十进制数，但我得到的是 '1'

```
preg_match('/[0-9]+(?:\.[0-9]*)?/', 'Â£3.25', $matches);
echo 'match: '.$matches[0]; 
```

打印“1”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:15:43.920

```
preg_match('#\d+(?:\.\d{1,2})?#', '£2.35', $match);
var_dump($match); 
```

给

```
array(1) {
  [0]=>
  string(4) "2.35"
} 
```

即使在 PHP 5.2 上：[http ://codepad.viper-7.com/9nFhET](http://codepad.viper-7.com/9nFhET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:08:05.273

首先，您将在数组 ( `$matches[1]`)的索引 1 处找到值

尝试这样的事情：

```
<?php
preg_match('/[0-9]+\.([0-9]+)/', '£3.25', $matches);
print_r($matches);
?> 
```

这给出了：

```
Array
(
    [0] => £3.25
    [1] => 25
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T13:34:25.573

我可以在此测试仪站点上重现小数问题：http:
[//www.pagecolumn.com/tool/pregtest.htm](http://www.pagecolumn.com/tool/pregtest.htm)

如果将转义点替换为包含点的字符类，则它可以工作：

```
[0-9]+(?:[.][0-9]*)? 
```

顺便说一句：你有没有可能得到点但后面没有数字？
如果不是，我会用预期的`[0-9]*`任何一个`[0-9]+`或特定数量的数字替换`[0-9]{2}`

# html - (X)HTML 中的保留字符是什么？

> ID：10371493
> 
> 赞同：4
> 
> 时间：2012-04-29T10:42:35.707
> 
> 标签：html, xhtml, html-entities, html-encode

是的，我用谷歌搜索过，令人惊讶的是得到了令人困惑的答案。

[一页说](http://www.comp.lancs.ac.uk/computing/research/cseg/projects/ariadne/ihe/web/chars.html)这`< > & "`是（X）HTML中唯一的保留字符。毫无疑问，这是有道理的。

[该页面说](http://www.hiddenboston.com/webmasters/reservedcharacters.html) `< > & " '`的是（X）HTML中的保留字符。有点混乱，但是好吧，这也有道理。

然后是[这个页面](http://www.yourwebskills.com/specialchars.php)，上面写着`< > & " © ° £`不间断空格 ( `&nbsp`) 都是 (X)HTML 中的保留字符。这根本没有意义，而且几乎增加了我的困惑。

知识渊博、真正了解这些东西的人能否澄清*(X)HTML 中的保留字符*实际上是哪些？

**编辑**`<pre>`：另外，代码中的所有保留字符都应该在包含在标签中时被转义吗？还是只有这三个—— `< > &`？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T11:21:24.217

XHTML 1.0 规范在[http://www.w3.org/TR/2002/REC-xhtml1-20020801/#xhtml](http://www.w3.org/TR/2002/REC-xhtml1-20020801/#xhtml)中声明：

> XHTML 1.0 [...] 是作为 XML 1.0 [XML] 应用程序的三种 HTML 4 文档类型的重新表述。

XML 1.0 规范在[http://www.w3.org/TR/2008/REC-xml-20081126/#syntax](http://www.w3.org/TR/2008/REC-xml-20081126/#syntax)中声明：

> 字符数据和标记：文本由混合的字符数据和标记组成。[...] & 符号 ( `&`) 和左尖括号 ( `<`) 不得以其文字形式出现，除非用作标记分隔符，或者在注释、处理指令或 CDATA 部分中。如果在其他地方需要它们，它们必须分别使用数字字符引用或字符串“ `&amp;`”和“ `&lt;`”进行转义。右尖括号 ( `>`) 可以使用字符串 " `&gt;`" 表示，并且为了兼容性，当它出现在内容中的字符串 " " 中时，必须使用 " `&gt;`" 或字符引用进行转义`]]>`，当该字符串未标记结束时的 CDATA 部分。

这意味着在编写 XHTML 文档的文本部分时，您**必须**转义 &、< 和 >。

你**可以**逃避更多，例如 ü 对于变音你。您也可以声明该文档以例如 UTF-8 编码并写入字节序列 0xc3bc 以获得相同的元音变音 u。

在编写文档的元素部分（列“标签”）时，有不同的规则。您必须注意“，”以及有关注释，CDATA等的许多规则。还有一些规则可以在元素和属性名称中使用哪些字符。您可以在XML规范中查找，但在最后归结为：对于元素和属性名称，使用字母、数字和“-”；不要使用“_”。对于属性值，您**必须**转义 & 和（取决于引号样式）' 或 "。

如果您使用众多库之一来编写 XML/XHTML 文档，其他人已经处理了这一点，您只需告诉库编写文本或元素。所有的转义都是在后台完成的。&

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-29T10:45:36.227

只有`<`并且`&` **需要**逃脱。内部属性，`"`或者`'`（取决于您用于属性值的引用样式）也需要转义。

```
<a href="#" onclick="here you can use ' safely"></a>
<a href="#" onclick='here you can use " safely'></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T13:35:00.553

通过编写“（X）HTML”，您（至少）提出了两个不同的问题。

根据 HTML 规则，“HTML”表示直到并包括 HTML 4.01 的任何 HTML 版本，仅保留“<”和“&”。规则有些复杂。除了在标签、实体引用和字符引用中的句法使用之外，它们不应按字面意思出现。但是根据正式规则，它们可能会出现在例如上下文“A & B”或“A < B”中（但`A&B`在形式上是错误的，因此也是如此`A<B`）。

基于 XML 的 XHTML 规则更严格、更简单：“<”和“&”是无条件保留的。

ASCII 引号 " 和 ASCII 撇号 ' 不是保留的，除非在非常具体的意义上，带引号的属性值不能包含用作引号的字符，即在 "foo" 中，字符串 foo 不能包含 " 这样和在 'foo' 中，字符串 foo 不能包含 ' 本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T10:58:19.463

字符`< > & "`由 XML 格式保留。

*   这意味着您只能使用 < 和 > 字符来定义标签 ( `<mytag></mytag>`)。

*   双引号 (") 用于定义属性值 ( `<mytag attribute="value" />`)

*   与号 (&) 用于编写实体（`&amp;`在您实际想要编写与号时使用，而不是`&`）。此外，当您在 XML 文档中编写 url 时，您应该使用`&amp;`，而不仅仅是`&`: `www.aaa.com?a=1&b=2`- 是错误的；`www.aaa.com?a=1&amp;b=2`- 很好！

XHTML 基于 XML，所以我所写的内容适用于 XHTML。

`© ° £`- 这些不是保留字符。这些是专门为 XHTML 而不是 XML 定义的实体。

在 XML 中，您可以简单地编写`©`. 在 XHMTL 中，您也可以简单地编写 ©，或使用 entity`&copy;`或 numeric entity `&00A9;`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-27T09:17:17.453

除了其他答案之外，知道还有禁止字符可能会有所帮助：ASCII 和 ISO-8859-1 中的所有控制字符，除了 TAB、LF 和 CR。

[https://www.w3.org/MarkUp/html3/specialchars.html](https://www.w3.org/MarkUp/html3/specialchars.html)

# linux - 检查变量值是否存在的条件

> ID：10371497
> 
> 赞同：0
> 
> 时间：2012-04-29T10:42:56.143
> 
> 标签：linux, unix, autosys

有一个 autosys 作业，whicn 有 3 个作业 init。所有 3 个作业都调用一个通用脚本，并且每个都有 3 个不同的配置文件。这 3 个作业从 3 台不同的机器调用。每个配置文件都有一个变量，这个变量包含特定于机器的固定值。在通用脚本中，我想根据传递的变量中的值执行代码。如果变量与机器配置文件中的值匹配，则将执行该机器的代码。我如何检查在通用脚本中接收到的变量是否也存在于机器的配置文件中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:58:57.383

我依靠的老式方式（在 sh 中）是：

```
if [ -z "$VarToCheck" ] ; then
    echo "Variable not set"
fi 
```

不过，可能有更正确的方法。您是否关心变量是否存在但长度为 0？

# ruby - 查询mongo性能状态的最佳实践

> ID：10371498
> 
> 赞同：1
> 
> 时间：2012-04-29T10:43:27.763
> 
> 标签：ruby, mongodb, mongohq

我对使用 ruby​​ 脚本查询 mongo 集群（在 mongohq 上）的性能状态的最佳实践感兴趣。我想构建一些 ruby​​ 脚本来检查 mongo 是否空闲（或接近空闲），如果是，则开始对其进行一些工作（大量查询和更新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:39:14.307

我建议不要自己写这个来看看 MMS。MongoHQ 支持其专用数据库计划。有关信息，请参阅[https://mms.10gen.com/docs/faq](https://mms.10gen.com/docs/faq)。

如果您*真的*想自己执行此操作，则需要调用[serverStatus](http://www.mongodb.org/display/DOCS/serverStatus+Command)命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:17:14.477

德鲁：

此外，MongoHQ 还可以为您提供一些其他工具。请给团队留言，他们可以给你一些尝试的东西。但是，是的，如上所述，MMS 也是一个很好的解决方案。

杰森·蒙戈总部

# php - 将 MySQL 中的多行存储在单独的变量中

> ID：10371502
> 
> 赞同：0
> 
> 时间：2012-04-29T10:44:12.697
> 
> 标签：php, mysql, database

我正在用 PHP 编写一个 Web 应用程序，它将存储员工数据并将员工 ID 卡生成为 PDF。我正在使用 FPDF 创建 PDF，效果很好。我在显示 MySQL 数据库的结果时遇到问题。

我必须使用 4 张员工身份证生成 PDF，但我不知道如何从数据库中获取它们。到目前为止，我在查询中使用 LIMIT 选项仅获得 4 个结果，并且我将有一个基于 mysql.php?id=1 id 的 if 语句来定义限制。有点乱，但不会有超过 80 名员工。

这是我的代码：

```
$id = $_GET['id'];

if ($id == 1) {
$limit_start = 0;
$limit_end = 4;
}

$result=mysql_query("SELECT users.tajemnik, users.dateCreated, users.showmeID,     
users.workerName, users.dateCreated, users.workerPlace, users.workerSID, uploads.userID, uploads.data, uploads.filetype
 FROM users INNER JOIN uploads ON users.showmeID = uploads.userID ORDER BY workerName DESC LIMIT $limit_start, $limit_end") or die (mysql_error());
mysql_query("SET NAMES 'utf8'") or die('Spojení se nezdařilo');

while($row = mysql_fetch_array($result)){

$workerName = $row["workerName"];
$workerPlace = $row["workerPlace"];
$workerSID = $row["workerSID"];
$tajemnik = $row["tajemnik"];
$showmeID = $row["showmeID"];
$mysqldatetime = strtotime($row['dateCreated']);
$image = $row["data"];

$phpdatetime = date("d.m.Y",$mysqldatetime);

} 
```

这将使我得到查询的第一个结果。我需要从所有 4 行中获取信息，并将它们存储在 $workerName1、$workerName2 等变量中。我希望我想做的事情是有意义的。

谢谢您的回复！五。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:51:41.583

> 我需要获取 $workerName1、$workerName2 等变量

不，你没有。
你实际上需要一个数组。

所以，首先，给自己一个函数

```
function sqlArr($sql){
  $ret = array();
  $res = mysql_query($sql) or trigger_error(mysql_error()." ".$sql);
  if ($res) {
    while($row = mysql_fetch_array($res)){
      $ret[] = $row;
    }
  }
  return $ret;
} 
```

然后写一段代码

```
mysql_query("SET NAMES 'utf8'") or die('Spojení se nezdařilo');
$sql = "SELECT users.tajemnik, users.dateCreated, users.showmeID, users.workerName, 
               users.dateCreated, users.workerPlace, users.workerSID, uploads.userID, 
               uploads.data, uploads.filetype
        FROM users 
        INNER JOIN uploads ON users.showmeID = uploads.userID 
        ORDER BY workerName DESC LIMIT $limit_start, $limit_end";
$data = sqlArr($sql); 
```

现在您的所有数据都在`$data` *数组*中。
因此，您可以遍历它或访问单个值，例如

```
echo $data[0]['tajemnik']; 
```

或者

```
foreach($data as $row) {
  //do whatever you want with database row
  echo $row['tajemnik'];
} 
```

# amazon-ec2 - CloudFormation Drupal 模板在哪里创建 MySQL 数据库？

> ID：10371503
> 
> 赞同：1
> 
> 时间：2012-04-29T10:44:34.607
> 
> 标签：amazon-ec2, amazon-web-services, amazon-rds, amazon-cloudformation

我基于 Drupal 模板创建了一个 CloudFormation 堆栈。

这创建了一个我可以看到的 EC2 实例，但它还在模板设置期间要求输入 MySQL 根密码。

所以我希望在“Amazon Management Console->Amazon RDS”中看到一个条目，但我没有。

有人可以解释这个 MySQL 数据库在哪里吗？以及为什么它不在 RDS 之下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T13:26:25.830

大概您在[AWS CloudFormation](http://aws.amazon.com/cloudformation/)*创建新堆栈*向导中选择了*Drupal 内容管理系统？！*

 *根据您所在的地区，此模板解析为例如[https://s3.amazonaws.com/cloudformation-samples-eu-west-1/Drupal_Simple.template](https://s3.amazonaws.com/cloudformation-samples-eu-west-1/Drupal_Simple.template)，依次可通过相应的区域端点访问，例如[https:// s3-eu-west-1.amazonaws.com/cloudformation-samples-eu-west-1/Drupal_Simple.template](https://s3-eu-west-1.amazonaws.com/cloudformation-samples-eu-west-1/Drupal_Simple.template)。

该名称已经暗示这只是一种*简单*的方法，如果您检查模板，您会发现它确实只是在单个[Amazon EC2](http://aws.amazon.com/ec2/)实例中*安装 [s] Apache Web Server、MySQL、PHP 和 Drupal 。*因此，MySQL 数据库是在您已经看到的同一 EC2 实例上运行的 MySQL 实例中创建的，并且可以像往常一样在那里访问（例如，通过 SSH 和 MySQL 命令行工具或 Drupal 数据库连接字符串目标）。`localhost:3306`

您正在寻找的内容也可以在[AWS CloudFormation 示例模板](http://aws.amazon.com/cloudformation/aws-cloudformation-templates/aws-cloudformation-templates-eu-west-1/)集合中找到，您可以在其中找到以下三个变体：

*   [具有本地 MySQL 数据库的单个 EC2 实例](https://s3-eu-west-1.amazonaws.com/cloudformation-templates-eu-west-1/Drupal_Single_Instance.template)（非常类似于“Drupal_Simple.template”）
*   [带有 Amazon RDS 数据库实例的单个 EC2 实例 Web 服务器](https://s3-eu-west-1.amazonaws.com/cloudformation-templates-eu-west-1/Drupal_Single_Instance_With_RDS.template)（可能是您所期望的）
*   [具有多可用区 Amazon RDS 数据库实例并使用 S3 存储文件内容的高可用性 Web 服务器](https://s3-eu-west-1.amazonaws.com/cloudformation-templates-eu-west-1/Drupal_Multi_AZ.template)（您所期望的高级版本）*

# sql-server-2008-express - 如何在我的表格中插入日期和图像？

> ID：10371504
> 
> 赞同：0
> 
> 时间：2012-04-29T10:44:35.160
> 
> 标签：sql-server-2008-express

```
CREATE TABLE Kitaplar
(
Id INT NOT NULL,
Isim NVARCHAR(50) NOT NULL,
Yazar NVARCHAR(50) NOT NULL,
Resim IMAGE,
Alinis_Tarihi DATE,
Verilis_Tarihi DATE,
PRIMARY KEY (Id)
) 
```

我有这张表，我想创建一个实例。

```
insert into Kitaplar values 
  (003, 'Forty Thorns','Judy Lighy Ayyildiz',null,2012-01-01,2012-02-01) 
```

它不接受这些日期类型。

我应该如何插入？以及如何添加图像？

我正在使用 SQL Server 2008 Express。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:46:23.747

您需要将日期括在引号中，如下所示：

```
Insert into Kitaplar values (003, 'Forty Thorns','Judy Lighy Ayyildiz',null,'2012-01-01','2012-02-01') 
```

至于添加图像，这样的事情会起作用（也有其他方法可以做到这一点）：

```
Update myTable
Set Image = (SELECT *
   FROM OPENROWSET(BULK N'C:\MyImage.jpg', SINGLE_BLOB) test)
   Where MyColumn = TargetValue 
```

# iphone - 确定向哪个应用版本发送苹果推送通知（免费或付费应用版本）

> ID：10371507
> 
> 赞同：2
> 
> 时间：2012-04-29T10:44:49.683
> 
> 标签：iphone, apple-push-notifications

我们有两个版本的应用程序（免费和付费），我们希望支持这两个版本的推送通知，并且它们都使用相同的服务器。

到目前为止，我们可以更新服务器上的用户数据，所以如果用户从免费版本更改为付费版本，我们会更新服务器，用户将开始接收到付费版本的推送通知。

但是，我过去看到过应用程序的更新，这对付费版本产生了负面影响，人们已经降级到免费版本。这是一种罕见的情况，但是如何处理呢？

我们用于注册令牌的逻辑如下：我们将令牌和确认存储在用户设置（AppDefaults）中。当用户启用推送通知时，我们会检查应用程序是否注册了这些设置（notification_token 和 notification_token_confirmed_by_server）。如果我们有一个令牌，但它没有得到服务器的确认（就像你第一次为应用程序启用推送通知），我们会将令牌连同它是什么版本的应用程序一起发送到服务器。

那么如果用户在手机上既有付费版又有免费版，无论出于何种原因选择使用免费版，在升级付费版之后，这种情况的最佳处理方式是什么？

我看到一个名为 Draw Something 的应用程序，它要求用户卸载免费版本，但我认为这是一个糟糕的解决方案（你不能“要求”你的用户做任何事情并以此为基础！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:18:12.143

最终的解决方案是向用户上次登录的应用程序版本发送推送通知。

假设您在请求中包含应用程序版本，您也可以在每次用户发出请求时更新服务器，但这会变得“健谈”，因此为了不经常访问数据库，这是一个很小的代价

# ruby-on-rails - 数据正在发布但未进入数据库

> ID：10371508
> 
> 赞同：0
> 
> 时间：2012-04-29T10:44:50.403
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3

我正在尝试将 HTML 从 contenteditable DIV 保存到数据库中。数据发布正常，但在数据库插入时，它们是`nil`.

这是我的日志：

```
Started POST "/pages" for 127.0.0.1 at 2012-04-29 18:39:01 +0800
Processing by PagesController#create as */*
  Parameters: {"authenticity_token"=>"yAkOgEXN1Xq6Aiu6thcODiji7rs0SYA07/83XkQ2sBM=", "title"=>"Untitled Page", "live"=>"1", "content"=>"%3Cdiv%20class%3D%22page%20last-page-active%22%20style%3D%22height%3A%20576px%3B%20%22%3E%0A%20%20%20%20%0A%20%20%3Cdiv%20class%3D%22page-element%20page-element-textbox%20ui-draggable%20ui-resizable%20ui-resizable-disabled%20ui-state-disabled%22%20style%3D%22left%3A%201256px%3B%20top%3A%2080px%3B%20width%3A%20272px%3B%20%22%20aria-disabled%3D%22true%22%3E%3Cdiv%20class%3D%22page-element-content%22%20contenteditable%3D%22true%22%3E%3Ch2%3EUntitled%20Page%3C/h2%3E%3C/div%3E%3Cdiv%20class%3D%22ui-resizable-handle%20ui-resizable-e%22%20style%3D%22display%3A%20none%3B%20%22%3E%3C/div%3E%3Cdiv%20class%3D%22ui-resizable-handle%20ui-resizable-w%22%20style%3D%22display%3A%20none%3B%20%22%3E%3C/div%3E%3C/div%3E%0A%3C/div%3E"}
  SQL (0.2ms)  BEGIN
  SQL (1.2ms)  INSERT INTO `pages` (`content`, `created_at`, `live`, `title`, `updated_at`) VALUES (?, ?, ?, ?, ?)  [["content", nil], ["created_at", Sun, 29 Apr 2012 10:39:01 UTC +00:00], ["live", nil], ["title", nil], ["updated_at", Sun, 29 Apr 2012 10:39:01 UTC +00:00]]
   (1.9ms)  COMMIT 
```

这是我的控制器：

```
class PagesController < ApplicationController
  def index
    @pages = Page.all
    @page = Page.new

    respond_to do |format|
      format.html  # index.html.erb
      format.json  { render :json => @pages }
    end
  end

  def new
    @page = Page.new

    respond_to do |format|
      format.html  # new.html.erb
      format.json  { render :json => @page }
    end
  end

  def create
    @page = Page.new(params[:page])

    respond_to do |format|
      if @page.save
        format.html  { redirect_to(@page,
                      :notice => 'Page was successfully created.') }
        format.json  { render :json => @page,
                      :status => :created, :location => @page }
      else
        format.html  { render :action => "new" }
        format.json  { render :json => @page.errors,
                      :status => :unprocessable_entity }
      end
    end
  end

  def show
    @page = Page.find(params[:id])

    respond_to do |format|
      format.html  # show.html.erb
      format.json  { render :json => @page }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:53:52.597

```
@page = Page.new(params[:page]) 
```

应该

```
@page = Page.new(params) 
```

您可以在控制台输出中看到它：

```
Parameters: {"authenticity_token"=>"...", "title"=>"Untitled Page", "live"=>"1", "content"=>"..."} 
```

如果`params[:page]`正确，您将看到：

```
Parameters: {"authenticity_token"=>"...", "page"=>{"title"=>"Untitled Page", "live"=>"1", "content"=>"..."}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T10:56:04.630

您的控制器期望`params[:page]`是一个包含用于创建页面的值的散列。但是，您的表单在顶层提交所有这些参数，正如您从日志文件摘录中看到的那样。

你应该改变你的表单，让参数出现在里面`params[:page]`，例如标题输入应该是命名的`page[title]`。如果您使用`form_for`并且 rails 有帮助（`f.text_field`等`f.check_box`），您将免费获得此功能。

# arrays - 带有子程序的输入数组文件 (.dat) 的最小值和最大值

> ID：10371511
> 
> 赞同：0
> 
> 时间：2012-04-29T10:45:01.907
> 
> 标签：arrays, io, fortran, fortran90

我尝试实现一个读取数字 n 的代码，创建一个向量来存储 n 个双精度数字，读取这个数字，调用一个子程序 printminmax() 来找到最小值和最大值。我的代码非常适合普通数字（整数、实数等），但是当我有科学记数法（0.3412E+01）堆栈时。为什么？我想用 * 阅读所有格式。谢谢

```
implicit none

integer, dimension(:), allocatable :: x
    integer :: n

    open (unit=77, file='input2.dat', action='read', status='old')
    read(77,*), n
    allocate(x(n))

    call printminmax(n)

    deallocate(x)

    end 

 subroutine printminmax(y)

implicit none

integer, dimension(:), allocatable :: x
integer :: y,max,min,i
   allocate(x(y))
   read(77,*) x
   !print *,'Maximun=', maxval(x)

   !print *,'Minimun=', minval(x

   !initialize the value max & min
max=x(1)
min=x(1)
do i=2,y
    if (x(i)>max) max=x(i)
    if (x(i)<min) min=x(i)
end do
    write(*,*) 'Maximum=',max
write(*,*) 'Minimum=',min

    end subroutine printminmax 
```

堆栈输入的一个示例是

```
 1000
  5.39524398466520e-01
  9.85099770130787e-01
  7.38946122872518e-01
  6.47771620257608e-01
  8.80871051119695e-01
  2.99375585725816e-02 
```

我认为科学记数法的错误是

```
 At line 13 of file io.f90 (unit = 77, file = 'input3.dat')
   Fortran runtime error: Bad integer for item 1 in list input 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:24:40.887

好的，我找到了。我应该在 x 上有双精度，没有整数。

# eclipse - SVN 中的 Eclipse .classpath：JRE 冲突

> ID：10371512
> 
> 赞同：1
> 
> 时间：2012-04-29T10:45:18.750
> 
> 标签：eclipse, version-control, metadata, eclipse-metadata

[遵循我在 SO 上得到的好建议](https://stackoverflow.com/a/10340796/51197)，我即将提交 Eclipse`.classpath`并`.project`进入 SVN 。

问题是某些 JRE 定义对于开发人员的机器来说是唯一的，例如：

```
<classpathentry kind="con" path="..JRE_CONTAINER/org..../Jeffs JRE"/> 
```

如果这条线被提交，它会在其他没有`Jeffs JRE`.

任何解决方法的想法？JRE 定义也可以共享吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T13:49:00.047

在项目属性 > Java 构建路径 > 库 > 双击您的 JRE，然后选择：使用执行环境而不是备用 JRE 或工作区默认 JRE。您的 .classpath 条目将是这样的：

```
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/> 
```

![在此处输入图像描述](../Images/da46e1b8cda9f1160924b71ced58b294.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T16:25:06.687

我从来没有将添加特定的 IDE 配置文件视为一种好的做法，但这是一个不同的问题。

如果要遵循该路径，则应使用变量。

Java 构建路径 > 添加变量

然后，您需要确保每个开发人员都定义了这些变量，每个人都有自己的路径。

（或使用 Maven 来避免这些问题）

# actionscript-3 - 检查鼠标点击是否不在影片剪辑中

> ID：10371513
> 
> 赞同：1
> 
> 时间：2012-04-29T10:45:23.307
> 
> 标签：actionscript-3, event-handling, flash-cs5

我在舞台上有许多电影剪辑，每个都有自己的事件监听器。一旦点击/触摸事件被调用，每个影片剪辑都会做一些事情。例如，一个影片剪辑使大约 6 个其他影片剪辑可见。

我想要做的是，当用户在舞台上的其他地方触摸/单击时，没有我想知道的电影剪辑，所以我可以执行一些操作，例如使一些电影剪辑不可见。

PS我说Touch/Click的原因是我正在为Android开发这个应用程序，但是为了使测试更容易，我目前正在使用MouseEvent而不是TouchEvent测试PC中的所有内容。一旦我让所有功能正常工作，我将切换到 TouchEvent 并在移动设备上进行测试。

非常感谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:45:11.573

将事件侦听器添加到舞台。并且在您的内部影片剪辑的事件处理程序中，使用 event.stopPropagation 函数来防止容器发生气泡事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:53:17.960

我只想做一个检查，它简单快捷，不需要添加代码来改变传播。

```
import flash.events.MouseEvent;

stage.addEventListener(MouseEvent.CLICK, onClick, false, 0, true);

function onClick(e:MouseEvent):void 
{
    if(e.target == stage)
    {
        trace("click click");   
    }
} 
```

# c - 为什么我的方法不返回 char*

> ID：10371516
> 
> 赞同：-6
> 
> 时间：2012-04-29T10:46:03.357
> 
> 标签：c, char, return-value

我正在尝试编译以下内容：

```
void chen() {
     char s[50];
     char s1[30], s2[30]; int t;
     printf("Nhap chuoi 1: ");
     gets(s1);
     s = insert(s1);  // Error here
     printf("chen chuoi 2 vao chuoi 1: ");
     puts(s);
}

char* insert(char* s1) {
    return s1;
}

int main() {
    chen();
    return 0;
} 
```

编译器告诉我：

> 错误：从类型分配给类型 'char[50]' 时类型不兼容

有人能告诉我为什么编译器认为`insert`返回一个`int`吗？我需要做什么来修复上面的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:48:59.407

您在使用之前没有声明该`insert()`函数，因此编译器假定它返回`int`. 把它放在你的`chen()`函数之前：

```
char *insert(char *s1); 
```

# ruby - Rails 3 - 时间存在验证

> ID：10371519
> 
> 赞同：1
> 
> 时间：2012-04-29T10:46:10.480
> 
> 标签：ruby, ruby-on-rails-3, validation, rspec, ruby-on-rails-3.2

我有一个带有时间属性的模型。我想检查时间不能为空（更好的选择可能是检查输入是否为时间，但我不知道如何处理）。我试过这个验证：

```
#  id              :integer         not null, primary key
#  school_class_id :integer
#  meeting_time    :time
class Meeting < ActiveRecord::Base                                                    
  validates :meeting_time,
              :presence => { :message => "can't be empty!" }                                                            
end 
```

然后我尝试在规范中检查这一点，但失败了（空闲时间可以，但不应该）。我做错了什么？

## 规格：

```
#  id              :integer         not null, primary key
#  school_class_id :integer
#  meeting_time    :time

require 'spec_helper'

describe Meeting do
  before(:each) do
    @class = FactoryGirl.create( :school_class )
    @attr_meeting = {
      :meeting_theme => 'Text is here',
      :meeting_date => "#{Date.today}",
      :meeting_time => "#{Time.now}",
      :meeting_room => '1234'
    }
  end

  describe "Validations" do
    describe "Rejection" do
      it "should reject blank time" do
        wrong_attr = @attr_meeting.merge( :meeting_time => "  " )
        @class.meetings.build( wrong_attr ).should_not be_valid
      end
    end
  end
end 
```

## 错误：

```
 Meeting Validations Rejection should reject blank time
     Failure/Error: @class.meetings.build( wrong_attr ).should_not be_valid
       expected valid? to return false, got true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:08:18.067

在您的示例中，您分配`" "`给`meeting_time`, not`nil`或`""`。但是`Time`对象可以以某种方式从非空，甚至是空白字符串中成功生成。设置`meeting_time`为`""`或`nil`应该可以解决您的问题。

也许我不完全理解某些东西，但我认为这不是非常合乎逻辑和可预测的行为。需要查看来源。

# c++ - Winsocks recv 只有一行

> ID：10371521
> 
> 赞同：1
> 
> 时间：2012-04-29T10:46:31.150
> 
> 标签：c++, winsock, getline

我对 c++ 很陌生，并尝试了一些套接字编程。我的问题是，我不能`x = recv((SOCKET)this->sock, ausgabe, 1000, 0);`一次只返回一行，这些行被`\n\r`.

我尝试过类似的东西：

```
 char * pos;
        pos = strstr(ausgabe, "\n");
        while(pos != NULL){
            std::cout<< pos;
            pos = strstr(pos, "\n");
        } 
```

但这不会按预期工作。我希望你知道这个问题并得到一个解决方案来帮助我。

问候，弗雷德里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:09:58.283

您可以一次读取一个字节并检查“\r\n”，但效率极低。

您应该始终从套接字读取尽可能多的字节到缓冲区，然后使用 strstr() 解析缓冲区。

是像UDP这样的数据报套接字还是像TCP这样的流套接字？它们是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:13:05.053

您可以使用令牌库：

```
#include <string.h>
.
.
char *line = strtok(ausgabe,"\n");
while (line != NULL)
{
    line[strlen(line)-1] = '\0';    // if newline character is \r\n
    cout << line;
    line = strtok(NULL, "\n");
    // line++; // ignore \r         // if newline character is \n\r
} 
```

演示：[http ://codepad.org/DYL1bjtb](http://codepad.org/DYL1bjtb)

For more information on tokenization [http://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

# php - 用php头脑风暴动态流程

> ID：10371523
> 
> 赞同：2
> 
> 时间：2012-04-29T10:46:39.177
> 
> 标签：php

我想知道您是否可以帮助我开始一个项目，如果那里已经有其他东西（任何语言）是开源的，我可以研究那些很棒的代码。

我想要做的是创建一个这样的流程：[http](http://www.ifitjams.com/starting.htm#starting%200) ://www.ifitjams.com/starting.htm#starting%200然后让应用程序从其用户那里“学习”结果是否有效t 从那里输入动态创建下一个进程。因此，在上面的汽车示例中，他们可以说在“x”处结束流程后它不起作用，但我更换了交流发电机并且它起作用了。因此，当下一个人出现并到达“x”点而不是系统没有想法时，它可以建议更换交流发电机。

只是发现很难弄清楚我将如何让这个应用程序工作并与数据库交互来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:56:28.860

我会想象保存故障点，以及如何解决它。然后生成一个包含基于故障点的 SELECT 查询的报告，按解决方案分组。

至于流程图的生成，对于一些好的 OOP 来说是微不足道的（实际上是为此进行了继承）。有一个抽象类`Node`，并且节点上的所有其他类型都继承自那个（即`class Process extends Node`）。

我以前没有处理过图像生成，但这还很遥远。首先，您需要为数据创建布局结构，然后从中生成报告。

# c# - 从日期获取年份和星期

> ID：10371524
> 
> 赞同：7
> 
> 时间：2012-04-29T10:47:03.787
> 
> 标签：c#

我需要返回给定日期的年份和星期。听起来很简单。但要正确，2012-01-01 必须返回 2011-52，因为 2012 年的第 1 周从 1 月 2 日开始。

为了找到星期，我使用：

```
GregorianCalendar calw = new GregorianCalendar(GregorianCalendarTypes.Localized);
return calw.GetWeekOfYear(DateTime.Parse("2012-01-01"), CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday).ToString(); 
```

这返回 52。（正确）

但是我如何获得年？

编辑：

在此处的帮助下：http: [//codebetter.com/petervanooijen/2005/09/26/iso-weeknumbers-of-a-date-ac-implementation/](http://codebetter.com/petervanooijen/2005/09/26/iso-weeknumbers-of-a-date-a-c-implementation/)

这似乎有效：

```
 private int weekYear(DateTime fromDate)
    {
        GregorianCalendar cal = new GregorianCalendar(GregorianCalendarTypes.Localized);
        int week = weekNumber(fromDate);
        int month = cal.GetMonth(fromDate);
        int year = cal.GetYear(fromDate);

        //week starts after 31st december
        if (week > 50 && month == 1)
            year = year - 1;
        //week starts before 1st January
        if (week < 5 && month == 12)
            year = year + 1;

        return year;
    }
private int weekNumber(DateTime fromDate)
{
    // Get jan 1st of the year
    DateTime startOfYear = fromDate.AddDays(-fromDate.Day + 1).AddMonths(-fromDate.Month + 1);
    // Get dec 31st of the year
    DateTime endOfYear = startOfYear.AddYears(1).AddDays(-1);
    // ISO 8601 weeks start with Monday 
    // The first week of a year includes the first Thursday 
    // DayOfWeek returns 0 for sunday up to 6 for saterday
    int[] iso8601Correction = { 6, 7, 8, 9, 10, 4, 5 };
    int nds = fromDate.Subtract(startOfYear).Days + iso8601Correction[(int)startOfYear.DayOfWeek];
    int wk = nds / 7;
    switch (wk)
    {
        case 0:
            // Return weeknumber of dec 31st of the previous year
            return weekNumber(startOfYear.AddDays(-1));
        case 53:
            // If dec 31st falls before thursday it is week 01 of next year
            if (endOfYear.DayOfWeek < DayOfWeek.Thursday)
                return 1;
            else
                return wk;
        default: return wk;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T11:25:23.370

[Noda Time](http://noda-time.googlecode.com)很容易为您处理这个问题：

## 野田时间 v1.x

```
using System;
using NodaTime;

public class Test
{
    static void Main()
    {
        LocalDate date = new LocalDate(2012, 1, 1);
        Console.WriteLine($"WeekYear: {date.WeekYear}");             // 2011
        Console.WriteLine($"WeekOfWeekYear: {date.WeekOfWeekYear}"); // 52
    }
} 
```

## 野田时间 v2.x

```
using System;
using NodaTime;
using NodaTime.Calendars;

public class Test
{
    static void Main()
    {
        LocalDate date = new LocalDate(2012, 1, 1);
        IWeekYearRule rule = WeekYearRules.Iso;
        Console.WriteLine($"WeekYear: {rule.GetWeekYear(date)}"); // 2011
        Console.WriteLine($"WeekOfWeekYear: {rule.GetWeekOfWeekYear(date)}"); // 52
    }
} 
```

那是使用 ISO 日历系统，其中一周年从第一周开始，该年至少有 4 天。（如`CalendarWeekRule.FirstFourDayWeek`.）如果您想要不同的日历系统，请在`LocalDate`构造函数中指定它。周年规则在 1.x 和 2.x 之间的处理略有不同。

编辑：请注意，这为这种情况（周年*小于*日历年）和一年另一端的情况（周年可能*大于*日历年）提供了正确的值。例如，2012 年 12 月 31 日是 2013 年第 1 周。

这就是图书馆为你做这件事的美妙之处：**它的工作就是理解这类事情**。您的代码不必担心它。你应该能够要求你想要什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T10:57:54.693

您可以通过以下方式获取weeknumber [`CalendarWeekRule`](http://msdn.microsoft.com/en-us/library/system.globalization.calendarweekrule.aspx)：

```
var d = new DateTime(2012, 01, 01);
System.Globalization.CultureInfo cul = System.Globalization.CultureInfo.CurrentCulture;
var firstDayWeek = cul.Calendar.GetWeekOfYear(
    d,
    System.Globalization.CalendarWeekRule.FirstDay,
    DayOfWeek.Monday);
int weekNum = cul.Calendar.GetWeekOfYear(
    d,
    System.Globalization.CalendarWeekRule.FirstFourDayWeek,
    DayOfWeek.Monday);
int year = weekNum >= 52 && d.Month == 1 ? d.Year - 1 : d.Year; 
```

您可能想`CalendarWeekRule.FirstDay`与`CalendarWeekRule.FirstFourDayWeek`. 通过这种方式，您可以获得周数和年份（`DateTime.Year-1`如果它们不同）。

*   [`CultureInfo.Calendar`财产](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.calendar.aspx)
*   [`Calendar.GetWeekOfYear`方法](http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear%28v=vs.100%29.aspx)
*   [CalendarWeekRule 枚举](https://stackoverflow.com/questions/10371524/getting-year-and-week-from-date?answertab=votes#tab-top)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T10:54:18.587

这只是一个边缘情况，您必须为其添加特殊代码。从日期字符串中获取年份，然后如果周 = 52 且月份 = 1，则从年份中减去一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-07T14:46:58.393

我已经解决了类似的问题，结果应该是“YYYYWW”格式。我想避免硬编码日期并使用 3rd 方库。

我的测试用例是日期 1.1.2017，它应该返回第 201652 周（Iso YearWeek）

要获取周数，我使用了线程：[获取给定日期的正确周数，该日期](https://stackoverflow.com/questions/11154673/get-the-correct-week-number-of-a-given-date)返回没有年份的周数。最后，我从所需日期的星期一（iso 周的第一天）得到了正确的年份：

```
 // returns only week number
    // from [Get the correct week number of a given date] thread
    public static int GetIso8601WeekOfYear(DateTime time)
    {
        // Seriously cheat.  If its Monday, Tuesday or Wednesday, then it'll 
        // be the same week# as whatever Thursday, Friday or Saturday are,
        // and we always get those right
        DayOfWeek day = CultureInfo.InvariantCulture.Calendar.GetDayOfWeek(time);
        if (day >= DayOfWeek.Monday && day <= DayOfWeek.Wednesday)
        {
            time = time.AddDays(3);
        }

        // Return the week of our adjusted day
        var week = CultureInfo.InvariantCulture.Calendar.GetWeekOfYear(time, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
        return week;
    }

    // returns int YearWeek in format "YYYYWW"
    public static int GetIso8601YearWeekOfYear(DateTime time)
    {
        var delta = (-((time.DayOfWeek - CultureInfo.CurrentCulture.DateTimeFormat.FirstDayOfWeek + 7) % 7));
        var firstDayofWeek = time.AddDays(delta); // takeMonday
        var week = GetIso8601WeekOfYear(time);
        var yearWeek = (firstDayofWeek.Year * 100) + week;
        return yearWeek;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-08T20:04:42.423

在我的方法中，我利用了这样一个事实，即显示与同一周的星期四同一年的日子`GetWeekOfYear()`的正确周数。`ISO-8601`所以我寻找与给定日期属于同一周的星期四，然后调用`GetWeekOfYear()`它。

我不能用这个技巧来获得正确的年份，因为没有符合 iso8601 的方法，所以如果星期四属于与给定日期不同的年份，我会进行年份调整。

解决方案基本上是三线：

```
using System.Globalization;

namespace TESTS
{
    class Program
    {
        static void Main(string[] args)
        {

            //sample dates with correct week numbers in comments:
            string[] dats = new string[] { 
                 "2011-12-31","2012-01-01"  //1152
                ,"2012-12-31","2013-01-01"  //1301
                ,"2013-12-31","2014-01-01"  //1401
                ,"2014-12-31","2015-01-01"  //1501
                ,"2015-12-31", "2016-01-01" //1553
            };

            foreach (string str in dats)
            {
                Console.WriteLine("{0} {1}", str, GetCalendarWeek(DateTime.Parse(str)));
            }

            Console.ReadKey();
    }

       public static int GetCalendarWeek(DateTime dat)
        {
            CultureInfo cult = System.Globalization.CultureInfo.CurrentCulture;

            // thursday of the same week as dat.
            // value__ for Sunday is 0, so I need (true, not division remainder %) mod function to have values 0..6 for monday..sunday
            // If you don't like casting Days to int, use some other method of getting that thursday
            DateTime thursday = dat.AddDays(mod((int)DayOfWeek.Thursday-1,7) - mod((int)dat.DayOfWeek-1,7));
            //week number for thursday:
            int wk = cult.Calendar.GetWeekOfYear(thursday, cult.DateTimeFormat.CalendarWeekRule, cult.DateTimeFormat.FirstDayOfWeek);
            // year adjustment - if thursday is in different year than dat, there'll be -1 or +1:
            int yr = dat.AddYears(thursday.Year-dat.Year).Year;

            // return in yyww format:
            return 100 * (yr%100) + wk;
        }

        // true mod - helper function (-1%7=-1, I need -1 mod 7 = 6):
        public static int mod(int x, int m)
        {
            return (x % m + m) % m;
        }

} 
```

# javascript - 以编程方式将图像 alt 属性作为类应用到父元素

> ID：10371529
> 
> 赞同：1
> 
> 时间：2012-04-29T09:17:07.193
> 
> 标签：javascript, jquery

我想将图像 alt 属性作为一个类添加到其容器元素中。标记：

```
<div class="field-group-our-people">
  <div class="field-items even>
   <img alt="John">
  </div>
  <div class="field-items odd>
   <img alt="Kevin">
  </div>
  <div class="field-items even>
   <img alt="Kate">
  </div>
  <div class="field-items odd>
   <img alt="Martin">
  </div>
</div> 
```

变成这样：

```
<div class="field-group-our-people">
      <div class="field-items even john>
       <img alt="John">
      </div>
      <div class="field-items odd kevin>
       <img alt="Kevin">
      </div>
      <div class="field-items even kate>
       <img alt="Kate">
      </div>
      <div class="field-items odd martin>
       <img alt="Martin">
      </div>
</div> 
```

我的 Jquery 代码（但不工作）：

```
//Add the image alt attribute as class for individual styling
$('.group_our_people .field-item').each(function() {
  var att = $('.group_our_people .field-item img').attr('alt');               
  $(this).addClass(att);        
}); 
```

我的代码有什么问题/缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T10:50:43.697

你应该得到`img`当前 div 的子元素（在迭代中）：

```
var att = $(this).find('img').attr('alt'); 
```

您正在做的方式（即重复选择器），您最终会检索多个值，并且只考虑第一个值。所以，每个 div 都会得到它的类：“John”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T10:51:41.347

```
$('div.field-group_our_people div[class^=".field-items"] img').each(function()
{
  var att = $(this).attr('alt');               
  $(this).parent().addClass(att);        
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T10:51:58.357

```
$('.field-group-our-people .field-items img').each(function() {
     $(this).parent().addClass( $(this).attr('alt') );
}); 
```

# html - 有什么方法可以使边框更接近正文内容？(HTML/CSS) 提供图片

> ID：10371532
> 
> 赞同：0
> 
> 时间：2012-04-29T10:48:59.533
> 
> 标签：html, css

到目前为止我做了什么：http: [//goo.gl/sDhLA](http://goo.gl/sDhLA)

我应该达到的目标：http: [//goo.gl/tqo7m](http://goo.gl/tqo7m)

提前感谢您的帮助，这里是 html/css 的新手。

干杯。

**更新**

我的错。我忘了提到我实际上的目标是对代码进行最少的主要编辑，因为有些代码我无法更改。（在我的作业中规定）。

另一方面，学习更多的东西并没有任何害处。了解更多关于 line-height、box-sizing 等新命令的信息：border-box 真的很有趣。

但是，我很遗憾没有发生负填充。它会解决左右边缘的间隙是吗？:O

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T10:58:22.523

看起来您需要减小容器的宽度（或增加内容的宽度）。

你应该在这里发布你的代码，只有这样我才能确定这个答案是正确的。

你的代码是一团糟。这是我做的（我有单位，`cm`因为它可以在打印时提供更好的控制，您可以更改单位）

```
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>Revisions Bookstore and Cafe</title>

    <style type="text/css">

        @font-face {
            font-family: 'ChunkFiveRegular';
            src:         url('Chunkfive-webfont.eot');
            src:         local('?'), url('Chunkfive-webfont.woff') format('woff'), url('Chunkfive-webfont.ttf') format('truetype'), url('Chunkfive-webfont.svg#webfontb5K2fJwj') format('svg');
            font-weight: normal;
            font-style:  normal;
        }
        * {
            padding: 0;
            margin: 0;
        }

        h1 {
            border:           0.1cm solid rgb(65, 105, 225);
            font-family:      ChunkFiveRegular,serif;
            background-color: rgb(189, 204, 212);
            font-size:        2em;
        }

        #card div {
            font-family:      ChunkFiveRegular,serif;
        }

        #card {
            font-family:  Verdana,serif;
            width: 15cm;
            padding: 0.2cm;
            border: 0.07cm black solid;
            margin: 1cm auto;
        }

        #card div p {
            padding: 0.2cm 0.2cm 0.2cm 0.4cm;
        }

        #card > p {
            background: black;
            color: white;
            text-align: right;
            padding: 0.1cm;
        }

    </style>

</head>

<body>
<div id="card">
    <h1>Revisions Bookstore and Cafe</h1>

    <div>
        <p class="maintext">Custom brewed coffee and hand-selected books.</p>

        <p class="maintext">Special orders are our specialty.</p>
    </div>

    <p>412 N. 25th St.<br/>Richmond, VA 23223<br/>(804) 555-2565</p>
</div>

</body>

</html>

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:33:16.913

好吧，我看着实现您想要的结果，所以我基本上手动将事物设置为与原始宽度相同的宽度，但进行了一些修改（主要是设置边距和宽度），同时保持 em 格式。

但继承人新的CSS：

```
 @font-face {
            font-family: 'ChunkFiveRegular';
            src: url('Chunkfive-webfont.eot');
            src: local('?'), url('Chunkfive-webfont.woff')format('woff'),url('Chunkfivewebfont.ttf') format('truetype'), url('Chunkfive-webfont.svg#webfontb5K2fJwj')format('svg');
            font-weight: normal;
            font-style: normal;
            }

  h1 {
    text-align: center;

    border: 0.1em solid rgb(65,105,225);
    margin-top: 8px;
    margin-left:8px;
    margin-right:8px;
    padding: 0.25em;

    font-family: ChunkFiveRegular;
    background-color: rgb(189,204,212);
    font-weight: normal;
    font-size: 2em;
    }

  #contact {
    text-align: right;

    margin: 0 8px 8px;
    padding: 1em;
    font-family: ChunkFiveRegular;
    color: white;
    background-color: #212100;
    margin-bottom: 8px;
    }

  #box {

    margin: 0 8px;
    padding: 0.5em;
    }

  .maintext {
    text-align: left;
    }

  #body {
  font-family: Verdana;
  border: 0.07cm solid black;
  margin: 2.5em;
  margin-left: 23em;
  margin-right: 4em;
  width: 33.4em;

  }

</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T11:35:41.563

我更新了你的 jsfiddle：http: [//jsfiddle.net/BramVanroy/LGFLB/1/](http://jsfiddle.net/BramVanroy/LGFLB/1/)

提示：不要使用 ID 'body'（或任何 html 标签作为 ID）！它变得混乱！您可以通过简单地使用来轻松地瞄准身体`body`。

我保留了您提出的 HTML 结构。我改变了相当多的CSS。尤其是宽度、边距和大小。另请注意`box-sizing`！

```
body {
  font-family: Verdana;
  border: 0.07cm solid black;
  margin: 2.5em;
  margin-left: 17em;
  margin-right: 4em;
  width: 45em;
}

h1 {
  text-align: center;
  border: 0.1em solid rgb(65,105,225);
  width: 96%;
  margin: 0.2em auto;
  padding: 0.25em;
  font-family: Rockwell;
    font-weight: bold;
    letter-spacing: 2px;
  background-color: rgb(189,204,212);
  font-weight: normal;
  font-size: 2.5em;

    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
}

#contact {
  text-align: right;
  width: 96%;
  margin: 1em auto 0;
  padding: 0.25em;
  font-family: Rockwell;
  color: white;
  background-color: #212100;
  margin-bottom: 8px;
}

#box {
  width: 92%;
  margin: 0 auto;
  padding: 0.5em;
  line-height: 2;
}

.maintext {
  text-align: left;
} 
```

​</p>

# iphone - iPhone 上的格式化日期返回 (null)

> ID：10371535
> 
> 赞同：0
> 
> 时间：2012-04-29T10:49:40.233
> 
> 标签：iphone, date, nsdateformatter

我有一个日期格式： **Fri Jul 16 16:58:46 +0000 2010**。要将其转换为**2010 年 7 月 16 日星期五**，我尝试了：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];

for(int i=0; i<[self.data count]; i++) {
    id celldata = [self.data objectAtIndex:i];
    NSString *str = [NSString stringWithFormat:@"%@", [celldata objectForKey:@"created_at"]];
    NSLog(@"date for %u is %@",i, str); //this works and writes the date
    [df setDateFormat:@"eee MMM dd HH:mm:ss Z yyyy"];
    NSDate *date = [df dateFromString:str];
    [df setDateFormat:@"eee MMM dd yyyy"];
    NSString *dateStr = [df stringFromDate:date];
    NSLog(@"%@",dateStr);
} 
```

但是**NSLog(@"%@",dateStr)**只写（null）。如何让它工作？

编辑无论出于何种原因，我通过更改使其工作

> [df setDateFormat:@"eee MMM dd HH:mm:ss Z yyyy"];

到

> [df setDateFormat:@"MMM dd HH:mm:ss Z yyyy"];

并从我的字符串中删除工作日。不过，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:01:55.780

如果您解析为日期的原始字符串的格式确实是“20081122”，那么在两个片段中对“setDateFormat”的第一次调用都不正确，因为指定的格式不正确。

假设 [celldata objectForKey:@"created_at"] 根据您的第二个代码片段以“20081122”格式返回日期，您需要更改对 setDateFormat 的第一次调用以使用正确的字符串格式“yyyyMMdd” 这将当您调用“dateFromString”方法时驱动正确的转换然后，一旦您拥有 NSDate* 对象表示，您可以在通过 stringFromDate 将其转换回字符串时使用所需的任何格式。

```
NSString *dateStr = @"20081122";
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
//This is the important change here, this format MUST match the format of the string.
[dateFormat setDateFormat:@"yyyyMMdd"];
NSDate *date = [dateFormat dateFromString:dateStr];  
[dateFormat setDateFormat:@"EEEE MMMM d, YYYY"];
dateStr = [dateFormat stringFromDate:date];  
[dateFormat release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:55:02.880

这可能会对您有所帮助。不久前我遇到了类似的问题，所以我创建了以下方法。

* * *

**定义**

```
#define DATE_TYPE_hhmmss [NSArray arrayWithObjects:@"h", @"m", @"s", nil]
#define DATE_TYPE_MMDDYYYY [NSArray arrayWithObjects:@"M", @"D", @"Y", nil]
#define DATE_TYPE_MMDDYYYYhhmmss [NSArray arrayWithObjects:@"M", @"D", @"Y", @"h", @"m", @"s", nil]
#define DATE_TYPE_MMDDYYYYWWhhmmss [NSArray arrayWithObjects:@"M", @"D", @"Y", @"W", @"h", @"m", @"s", nil]
#define DATE_TYPE_MMDDYYYYhhmmssWW [NSArray arrayWithObjects:@"M", @"D", @"Y", @"h", @"m", @"s", @"W", nil]
#define DATE_TYPE_YYYYMMDD [NSArray arrayWithObjects:@"Y", @"M", @"D", nil]
#define DATE_TYPE_YYYYMMDDhhmmss [NSArray arrayWithObjects:@"Y", @"M", @"D", @"h", @"m", @"s", nil]
#define DATE_TYPE_YYYYMMDDWWhhmmss [NSArray arrayWithObjects:@"Y", @"M", @"D", @"W", @"h", @"m", @"s", nil]
#define DATE_TYPE_YYYYMMDDhhmmssWW [NSArray arrayWithObjects:@"Y", @"M", @"D", @"h", @"m", @"s", @"W", nil]
#define DATE_TYPE_FRIENDLY [NSArray arrayWithObjects:@"xx", nil] 
```

**日期方法**

*从值创建日期*

```
-(NSDate *) getDateWithMonth:(int)month day:(int)day year:(int)year {
    NSCalendar * calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
    NSDateComponents * dateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:[NSDate date]];

    [dateFormatter setDateFormat:@"MM"];
    [dateComponents setMonth:month];
    [dateFormatter setDateFormat:@"DD"];
    [dateComponents setDay:day];
    [dateFormatter setDateFormat:@"YYYY"];
    [dateComponents setYear:year];

    NSDate * result = [calendar dateFromComponents:dateComponents];

    return result;
}

-(NSDate *) getDateWithMonth:(int)month day:(int)day year:(int)year hour:(int)hour minute:(int)minute {
    NSCalendar * calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
    NSDateComponents * dateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:[NSDate date]];

    [dateFormatter setDateFormat:@"MM"];
    [dateComponents setMonth:month];
    [dateFormatter setDateFormat:@"DD"];
    [dateComponents setDay:day];
    [dateFormatter setDateFormat:@"YYYY"];
    [dateComponents setYear:year];
    [dateFormatter setDateFormat:@"HH"];
    [dateComponents setHour:hour];
    [dateFormatter setDateFormat:@"MM"];
    [dateComponents setMinute:minute];

    NSDate * result = [calendar dateFromComponents:dateComponents];

    return result;
}

-(NSDate *) getDateWithMonth:(int)month day:(int)day year:(int)year hour:(int)hour minute:(int)minute second:(int)second {
    NSCalendar * calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
    NSDateComponents * dateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:[NSDate date]];

    [dateFormatter setDateFormat:@"MM"];
    [dateComponents setMonth:month];
    [dateFormatter setDateFormat:@"DD"];
    [dateComponents setDay:day];
    [dateFormatter setDateFormat:@"YYYY"];
    [dateComponents setYear:year];
    [dateFormatter setDateFormat:@"HH"];
    [dateComponents setHour:hour];
    [dateFormatter setDateFormat:@"MM"];
    [dateComponents setMinute:minute];
    [dateFormatter setDateFormat:@"SS"];
    [dateComponents setSecond:second];

    NSDate * result = [calendar dateFromComponents:dateComponents];

    return result;
} 
```

*从日期获取字符串*

```
-(NSString *) getStringFromDate:(NSDate *)date dateType:(NSArray *)dateType {
    NSString * result = @"";

    NSCalendar * calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSString * format = @"";

    NSDateComponents * dateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit | NSWeekdayCalendarUnit) fromDate:date];

    NSInteger year = [dateComponents year];
    NSInteger month = [dateComponents month];
    NSInteger day = [dateComponents day];
    NSInteger weekday = [dateComponents weekday];
    NSInteger hour = [dateComponents hour];
    NSInteger minute = [dateComponents minute];
    NSInteger second = [dateComponents second];

    if (dateType != nil) {
        for (int x = 0; x < [dateType count]; x++) {
            if (x == ([dateType count]-1)) {
                if ([[dateType objectAtIndex:x] isEqualToString:@"Y"]) {
                    format = [format stringByAppendingFormat:@"%d", year];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"M"]) {
                    format = [format stringByAppendingFormat:@"%d", month];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"D"]) {
                    format = [format stringByAppendingFormat:@"%d", day];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"W"]) {
                    format = [format stringByAppendingFormat:@"%d", weekday];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"h"]) {
                    format = [format stringByAppendingFormat:@"%d", hour];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"m"]) {
                    format = [format stringByAppendingFormat:@"%d", minute];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"s"]) {
                    format = [format stringByAppendingFormat:@"%d", second];
                }
            } else {
                if ([[dateType objectAtIndex:x] isEqualToString:@"Y"]) {
                    format = [format stringByAppendingFormat:@"%d|", year];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"M"]) {
                    format = [format stringByAppendingFormat:@"%d|", month];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"D"]) {
                    format = [format stringByAppendingFormat:@"%d|", day];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"W"]) {
                    format = [format stringByAppendingFormat:@"%d|", weekday];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"h"]) {
                    format = [format stringByAppendingFormat:@"%d|", hour];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"m"]) {
                    format = [format stringByAppendingFormat:@"%d|", minute];
                } else if ([[dateType objectAtIndex:x] isEqualToString:@"s"]) {
                    format = [format stringByAppendingFormat:@"%d|", second];
                }
            }

            if ([[dateType objectAtIndex:x] isEqualToString:@"xx"]) {
                format = [NSString stringWithFormat:@"Year: %d, Month: %d, Day: %d, Weekday: %d, Hour: %d, Minute: %d, Second: %d", year, month, day, weekday, hour, minute, second];
            }
        }
    } else {
        format = [format stringByAppendingFormat:@"%d|", year];
        format = [format stringByAppendingFormat:@"%d|", month];
        format = [format stringByAppendingFormat:@"%d|", day];
        format = [format stringByAppendingFormat:@"%d|", weekday];
        format = [format stringByAppendingFormat:@"%d|", hour];
        format = [format stringByAppendingFormat:@"%d|", minute];
        format = [format stringByAppendingFormat:@"%d|", second];

        format = [NSString stringWithFormat:@"%d|%d|%d|%d|%d|%d|%d", year, month, day, weekday, hour, minute, second];
    }

    result = format;

    return result;
} 
```

* * *

**例子**

```
NSDate * date = [self getDateWithMonth:12 day:24 year:1994];
NSString * dateInString = [self getStringFromDate:date dateType:DATE_TYPE_MMDDYYYY];

int month = [[[dateInString componentsSeparatedByString:@"|"] objectAtIndex:0] intValue];
int day = [[[dateInString componentsSeparatedByString:@"|"] objectAtIndex:1] intValue];
int year = [[[dateInString componentsSeparatedByString:@"|"] objectAtIndex:2] intValue];

NSLog(@"String of Date: \"%@\"", dateInString);
NSLog(@"Month: %d", month);
NSLog(@"Day: %d", day);
NSLog(@"Year: %d", year); 
```

该方法`[self getDateWithMonth:12 day:24 year:1994]`返回一个`NSDate`通常难以阅读的对象，因此您可以使用它`[self getStringFromDate:date dateType:DATE_TYPE_MMDDYYYY]`来获取`NSDate`对象的字符串。

使用定义（宏）指定您希望在字符串中获取的日期格式。

例如： `DATE_TYPE_hhmmss`将返回`Hour|Minute|Second`, `DATE_TYPE_MMDDYYYY`将返回`Month|Day|Year`, `DATE_TYPE_MMDDYYYYhhmmss`将返回`Month|Day|Year|Hour|Minute|Second`, `DATE_TYPE_MMDDYYYYWWhhmmss`将返回`Month|Day|Year|Weekday (#)|Hour|Minute|Second`

等等...

**控制台日志**

```
2012-04-29 13:42:15.791 Atomic Class[1373:f803] String of Date: "12|24|1994"
2012-04-29 13:42:15.793 Atomic Class[1373:f803] Month: 12
2012-04-29 13:42:15.794 Atomic Class[1373:f803] Day: 24
2012-04-29 13:42:15.794 Atomic Class[1373:f803] Year: 1994 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:16:54.680

对周 EEE 使用 Dateformatter 而不是 eee

[df setDateFormat:@"EEE MMM dd HH:mm:ss Z yyyy"];

我希望这对你有帮助......

# java - hibernate：在运行时创建实体（带注释）

> ID：10371536
> 
> 赞同：10
> 
> 时间：2012-04-29T10:49:46.130
> 
> 标签：java, hibernate, reflection

是否可以在运行时创建休眠实体类（带注释）？它应该与运行时添加的表相关。实体应该对 Hibernate 可见是很重要的。一般情况下是否有可能，您能否就这个问题给我任何建议？我明白，反射是关键字，但要寻找更多的词。问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T11:02:03.060

在这种情况下，您可能希望在运行时以编程方式创建 Hibernate 会话工厂，传入您创建的新映射，请查看[http://docs.jboss.org/hibernate/orm/3.3/reference /en/html/session-configuration.html#configuration-programmatic](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic)了解详情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-08T13:50:35.123

您不需要在运行时创建 POJO 实体类和实例。您需要的是 Hibernate 动态模型。请参考[http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single/#persistent-classes-dynamicmodels](http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html_single/#persistent-classes-dynamicmodels)。

# javascript - 为什么要定义一个匿名函数并将 jQuery 作为参数传递给它？

> ID：10371539
> 
> 赞同：106
> 
> 时间：2012-04-29T10:50:27.733
> 
> 标签：javascript, jquery, backbone.js

我正在查看来自backbone.js 截屏视频的优秀peepcode 演示代码。在其中，主干代码都包含在一个匿名函数中，该函数传递给 jQuery 对象：

```
(function($) {
  // Backbone code in here
})(jQuery); 
```

在我自己的主干代码中，我刚刚将所有代码包装在 jQuery DOM 'ready' 事件中：

```
$(function(){
  // Backbone code in here
}); 
```

第一种方法的要点/优点是什么？这样做会创建一个匿名函数，然后立即执行该函数，并将 jQuery 对象作为函数参数传递，从而有效地确保 $ 是 jQuery 对象。这是唯一的一点 - 保证 jQuery 绑定到 '$' 还是有其他理由这样做？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-04-29T13:20:20.343

您展示的两个代码块在执行时间和执行原因方面有很大不同。它们并不相互排斥。它们的目的不同。

## JavaScript 模块

```
 (function($) {
  // Backbone code in here
})(jQuery); 
```

这是一种“JavaScript 模块”模式，通过立即调用函数实现。

*   [http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)
*   [http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

此代码的目的是为您的代码提供“模块化”、隐私和封装。

this 的实现是一个由调用`(jQuery)`括号立即调用的函数。将 jQuery 传入括号的目的是为全局变量提供局部范围。这有助于减少查找`$`变量的开销，并在某些情况下允许对压缩器进行更好的压缩/优化。

立即调用函数会立即执行。一旦函数定义完成，函数就会被执行。

## jQuery 的“DOMReady”函数

这是 jQuery 的“DOMReady”函数的别名：http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

```
 $(function(){
  // Backbone code in here
}); 
```

jQuery 的“DOMReady”函数在 DOM 准备好被 JavaScript 代码操作时执行。

## 主干代码中的模块与 DOMReady

在 jQuery 的 DOMReady 函数中定义 Backbone 代码是一种不好的形式，并且可能会损害您的应用程序性能。在 DOM 加载并准备好进行操作之前，不会调用此函数。这意味着在定义对象之前，您要等到浏览器至少解析一次 DOM。

在 DOMReady 函数之外定义 Backbone 对象是一个更好的主意。在许多其他人中，我更喜欢在 JavaScript 模块模式中执行此操作，以便我可以为我的代码提供封装和隐私。我倾向于使用“Revealing Module”模式（参见上面的第一个链接）来提供对我在模块之外需要的位的访问。

通过在 DOMReady 函数之外定义您的对象，并提供一些引用它们的方法，您可以让浏览器在处理您的 JavaScript 时抢占先机，从而可能加快用户体验。它还使代码更加灵活，因为您可以移动内容，而不必担心在移动内容时创建更多的 DOMREady 函数。

即使您在其他地方定义了 Backbone 对象，您仍然可能会使用 DOMReady 函数。原因是许多 Backbone 应用程序需要以某种方式操作 DOM。为此，您需要等到 DOM 准备就绪，因此您需要在定义后使用 DOMReady 函数来启动您的应用程序。

你可以在网上找到很多这样的例子，但这里有一个非常基本的实现，同时使用了 Module 和 DOMReady 函数：

```
 // Define "MyApp" as a revealing module

MyApp = (function(Backbone, $){

  var View = Backbone.View.extend({
    // do stuff here  
  });

  return {
    init: function(){
      var view = new View();
      $("#some-div").html(view.render().el);
    }
  };

})(Backbone, jQuery);

// Run "MyApp" in DOMReady

$(function(){
  MyApp.init();
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-30T09:23:33.797

作为一个小旁注，将 $ 作为参数发送给匿名函数会使 $ 成为该函数的本地函数，如果 $ 函数被大量调用，则该函数具有小的积极性能影响。这是因为 javascript 首先在本地范围内搜索变量，然后一直向下遍历到窗口范围（通常 $ 所在的位置）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-29T10:56:43.850

它确保即使使用过，您也可以始终在该闭包内**使用**。`$`[`$.noConflict()`](http://api.jquery.com/jQuery.noConflict/)

如果没有这个闭包，你应该使用`jQuery`而不是`$`整个时间。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-29T10:55:31.690

这是为了避免 $ 变量的潜在冲突。如果其他东西定义了一个名为 $ 的变量，你的插件可能使用了错误的定义

有关详细信息，请参阅[http://docs.jquery.com/Plugins/Authoring#Getting_Started](http://docs.jquery.com/Plugins/Authoring#Getting_Started)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-12T14:38:26.663

两者都用。

传入 jQuery 以防止库冲突并确保 jQuery 可用的自调用函数，正如您对 $ 所期望的那样。

并且 .ready() 仅在 DOM 加载后才运行 javascript 的快捷方法：

```
(function($) {
    $(function(){
          //add code here that needs to wait for page to be loaded
    });

    //and rest of code here
})(jQuery); 
```

# javascript - 正则表达式电子邮件验证错误 - 使用 JavaScript

> ID：10371542
> 
> 赞同：0
> 
> 时间：2012-04-29T10:50:48.993
> 
> 标签：javascript, regex, email, verification, email-validation

```
//if HTML5 input email input is not supported
if(type == 'email'){    
    if(!Modernizr.inputtypes.email){ 
         var emailRegEx = /^([a-zA-Z0-9_\.\-])+\@([a-zA-Z0-9\-])+\.+([a-zA-Z0-9]{2,4})+$/;              
         if( !emailRegEx.test(value) ){ 
            this.focus();
            formok = false;
            errors.push(errorMessages.email + nameUC);
            return false;
        }
    }
} 
```

这是我的 javascript 正则表达式，用于检查电子邮件格式是否正确。但是当我自己尝试时，它不会显示任何 ..@. 的错误。它最终不会检查 .com 或其他任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:55:04.273

您需要使用真正适合电子邮件地址的正则表达式。您当前的地址已完全损坏，因为它不接受大量有效地址。

请参阅[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)以获得更详细的描述和论点，为什么正则表达式毕竟不是一个好主意。

无论如何，这可能适合您的需求：

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])? 
```

以下是 regular-expressions.info 关于此正则表达式的说明：

> 如果我们省略使用双引号和方括号的语法，我们将获得更实用的 RFC 2822 实现。它仍将匹配当今实际使用的所有电子邮件地址的 99.99%。

# ios - MUC 如何使用 XMPPFramework

> ID：10371550
> 
> 赞同：5
> 
> 时间：2012-04-29T10:53:11.100
> 
> 标签：ios, objective-c, xmpp, xmppframework

我正在开发一个利用 Robbie Hanson 的 XMPPFramework 的 iOS XMPP 聊天应用程序。

最重要的功能已经实现 - 发送和接收消息。基本上，我已经构建了一个基本的功能聊天应用程序，当然还有一点点眼花缭乱。

现在，我遇到的问题是关于 MUC。`initWithRoomName`我从其他网站上看到的代码表明`XMPPRoom`. 但是，我克隆的 git repo 中没有这种方法。那么，有什么替代方法呢？或者，如果没有，我该如何使用 XMPPFramework 创建房间？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T08:05:01.643

以下是我如何解决自己的问题。请注意，此解决方案根本不涉及 XMPPRoom。首先，我创建了一个方法，根据情况创建或进入房间。（根据 XMPP 文档，用于创建的 XML 请求与您发送以进入房间的请求相同；也就是说，如果房间在您进入时尚不存在，则服务将为您创建它.)

开始了。这是创建/进入房间的方法。此方法的作用是将存在发送到您打算创建/进入的房间。如果您是第一个进入房间且尚未创建房间的人，您将自动成为其所有者和版主。

```
- (void)createOrEnterRoom:(NSString *)roomName
{
//here we enter a room, or if the room does not yet exist, this method creates it
//per XMPP documentation: "If the room does not yet exist, the service SHOULD create the room"
//this method accepts an argument which is what you would baptize the room you wish created
NSXMLElement *presence = [NSXMLElement elementWithName:@"presence"];
NSString *room = [roomName stringByAppendingString:@"@conference.jabber.com/iMac"];
[presence addAttributeWithName:@"to" stringValue:room];
 NSXMLElement *x = [NSXMLElement elementWithName:@"x" xmlns:@"http://jabber.org/protocol/muc"];
NSXMLElement *history = [NSXMLElement elementWithName:@"history"];
 [history addAttributeWithName:@"maxstanzas" stringValue:@"50"];
 [x addChild:history];
 [presence addChild:x];
 [[self xmppStream] sendElement:presence];
} 
```

接下来，在声明 XMPPStream 方法的 AppDelegate 中，我们通过检查服务器发送的状态代码来过滤我们在 didReceivePresence 方法中收到的 XML 响应。如果状态码是 201，宾果！房间创建进行得很好。201 以外的状态码表示不同的含义，但为了我们的目的，让我们关注 201。

```
- (void)xmppStream:(XMPPStream *)sender didReceivePresence:(XMPPPresence *)presence
{
     NSXMLElement *x = [presence elementForName:@"x" xmlns:@"http://jabber.org/protocol/muc#user"];
    for (NSXMLElement *status in [x elementsForName:@"status"])
    {
        switch ([status attributeIntValueForName:@"code"])
        {
            case 201: [self notifyRoomCreationOk:room];
        }
    }
 } 
```

然后，我们告诉服务器我们正在创建一个“即时”类型的房间，这意味着我们将发送一个 IQ 元素告诉它房间默认值。notifyRoomCreationOk 是在房间创建成功时在不同视图中调用的委托方法，毕竟我必须将房间记录在文本文件中以使其持久化，以便下次打开应用程序时，我之前创建的房间将可见。在我的 notifyRoomCreationOk 方法中，我有 sendDefaultRoomConfig，它基本上描述了本段第一句中所述的内容。

```
-(void)sendDefaultRoomConfig:(NSString *)room
{
NSXMLElement *x = [NSXMLElement elementWithName:@"x" xmlns:@"jabber:x:data"];
[x addAttributeWithName:@"type" stringValue:@"submit"];
NSXMLElement *query = [NSXMLElement elementWithName:@"query" xmlns:@"http://jabber.org/protocol/muc#owner"];
[query addChild:x];
XMPPIQ *iq = [XMPPIQ iq];
[iq addAttributeWithName:@"id" stringValue:[NSString stringWithFormat:@"inroom-cr%@", room]];
[iq addAttributeWithName:@"to" stringValue:room];
[iq addAttributeWithName:@"type" stringValue:@"set"];
[iq addChild:query];
[[self xmppStream ] sendElement:iq];
} 
```

确保在调用上述方法的视图上启用了 XMPPStream，否则这些方法将不起作用。这里的所有都是它的。玩得开心 XMPP！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:32:44.187

```
 XMPPRoom *room = [[XMPPRoom alloc] initWithRoomName:@"user101@conference.jabber.org/room" nickName:@"room"];
    [room createOrJoinRoom];
    [room sendInstantRoomConfig];
    [room setInvitedUser:@"ABC@jabber.org"];
    [room activate:[self xmppStream]];    
    [room inviteUser:jid1 withMessage:@"hello please join."];
    [room sendMessage:@"HELLO"]; 
```

用户 ABC@jabber.org 应该会收到邀请消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-09T18:17:15.673

您的帖子很旧，但是现在我会这样做：

```
- (void)createRoomWithJid:(XMPPJID*)roomJID
{
    XMPPRoom *xmppRoom = [[XMPPRoom alloc] initWithRoomStorage:self.xmppRoomHybridStorage
                                                           jid:roomJID
                                                 dispatchQueue:dispatch_get_main_queue()];
    [xmppRoom addDelegate:self delegateQueue:dispatch_get_main_queue()];
    [xmppRoom activate:self.xmppStream];

    [xmppRoom joinRoomUsingNickname:self.xmppStream.myJID.user
                            history:nil
                           password:nil];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T06:14:04.497

使用 XMPPFRAMWORK 通过以下代码创建聊天室。

```
 let roomStorage: XMPPRoomMemoryStorage = XMPPRoomMemoryStorage()
    /**
     * Remember to add 'conference' in your JID like this:
     * e.g. uniqueRoomJID@conference.yourserverdomain
     */
    let roomJID: XMPPJID = XMPPJID.jidWithString("chatRoom_name@conference.myhostname")
    let xmppRoom: XMPPRoom = XMPPRoom(roomStorage: roomStorage,
        jid: roomJID,
        dispatchQueue: dispatch_get_main_queue())
    xmppRoom.activate(SKxmpp.manager().xmppStream)
    xmppRoom.addDelegate(self, delegateQueue: dispatch_get_main_queue())
    xmppRoom.joinRoomUsingNickname(SKxmpp.manager().xmppStream.myJID.user, history: nil, password: nil)
    xmppRoom.fetchConfigurationForm() 
```

# r - sub 和 gsub 函数？

> ID：10371553
> 
> 赞同：18
> 
> 时间：2012-04-29T10:53:48.480
> 
> 标签：r, awk, substring

我有这个命令：

```
$ find $PWD -name "*.jpg" | awk '{system( "echo "  $(sub(/\//, "_")) ) }'
_home/mol/Pulpit/test/1.jpg 
```

现在同样的事情，但使用 gsub：

```
$ find $PWD -name "*.jpg" | awk '{system( "echo "  $(gsub(/\//, "_")) ) }'

mol@mol:~ 
```

我想得到结果：

```
_home_mol_Pulpit_test_1.jpg 
```

感谢您的帮助。

**编辑：**

我用'echo'来测试命令：

```
$ find $PWD -name "*.jpg" | awk '{gsub("/", "_")} {system( "echo " mv $0 " " $0) }'
_home_mol_Pulpit_test_1.jpg _home_pic_Pulpit_test_1.jpg

mol@mol:~ 
```

我想得到结果：

```
$ find $PWD -name "*.jpg" | awk '{gsub("/", "_")} {system( "echo " mv $0 " " $0) }'
/home/pic/Pulpit/test/1.jpg  _home_pic_Pulpit_test_1.jpg 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-29T11:08:41.240

如果字符串包含多个匹配项，那将不起作用......试试这个：

```
echo "/x/y/z/x" | awk '{ gsub("/", "_") ; system( "echo "  $0) }' 
```

或更好（如果`echo`不是其他东西的占位符）：

```
echo "/x/y/z/x" | awk '{ gsub("/", "_") ; print $0 }' 
```

在您的情况下，您希望在更改之前复制该值：

```
echo "/x/y/z/x" | awk '{ c=$0; gsub("/", "_", c) ; system( "echo " $0 " " c )}' 
```

# vhdl - 最大公约数 VHDL FSM

> ID：10371561
> 
> 赞同：1
> 
> 时间：2012-04-29T10:55:43.360
> 
> 标签：vhdl

我正在尝试使用 FSM 在 VHDL 中实现最大公约数。

这些是状态

![在此处输入图像描述](../Images/c7ffb153599138868a8c1699ba60c6ca.png)

以及有关设计的更多细节

![在此处输入图像描述](../Images/5f8f35cea15f95cbe262a39657f2aa90.png)

我按照描述进行了这个实现，但在模拟过程中我没有得到正确的结果

```
entity fsm is
    port (clk,rst: in std_logic; gt,eq,lt: in std_logic;
    sel,ld,sub: out std_logic_vector(1 downto 0);
    out_en: out std_logic);
end fsm;

architecture fsm of fsm is
    type STATES is (S1,S2,S3,S4,S5,S6,S7,S8);
    signal state: STATES;
begin
    process (clk, rst)
    begin
        if (rst='0') then 
            state<=S1;
        elsif (clk'event and clk='1') then
            case state is
                when S1 =>
                    sel(0) <= '1';
                    sel(1) <='0';                   
                    state <= S2;
                when S2 =>
                    ld(0) <= '1';
                    ld(1) <= '1';
                    state <= S3;
                when S3 =>
                    if(gt='1') then
                        state <= S4;
                    elsif(eq='1') then
                        state <= S6;
                    elsif(lt='1') then
                        state <= S7;
                    end if;
                when S4 =>
                    sub(0) <= '1';
                    state <= S5;
                when S6 =>
                    out_en <= '1';
                when S7 =>
                    sub(1) <= '1';
                    state <= S8;
                when S8 =>
                    sel(1) <= '1';
                    state <= S2;
                when S5 =>
                    sel(0) <= '0';
                    state <= S2;
                when others => null;
            end case;
        end if;
    end process;

end fsm; 
```

最后是接线模块。我不会在这里发布组件的实现，因为我认为它们在做什么是直截了当的。

```
library IEEE;
use IEEE.std_logic_1164.all;

entity gcd_calc is
    port (
        clk,rst: in std_logic;
        x_i,y_i: in std_logic_vector(7 downto 0);
        data_o: out std_logic_vector(7 downto 0));
end gcd_calc;

architecture struct of gcd_calc is

component mux8_2x1 
        port (sel: in std_logic;
            inp_a,inp_b: in std_logic_vector(7 downto 0);
            mout: out std_logic_vector(7 downto 0));
    end component;  
component reg8 
        port (en,clk: in std_logic;
            inp: in std_logic_vector(7 downto 0);
            outp: out std_logic_vector(7 downto 0));
    end component;

component cmp8 
        port (inp_a,inp_b: in std_logic_vector(7 downto 0);
            a_gt_b,a_eq_b,a_lt_b: out std_logic;
            outp: out std_logic_vector(7 downto 0));
    end component;

component sub8
        port (en: in std_logic;
            inp_a,inp_b: in std_logic_vector(7 downto 0);
            outp: out std_logic_vector(7 downto 0));
    end component;

component fsm
        port (clk,rst: in std_logic; gt,eq,lt: in std_logic;
            sel,ld,sub: out std_logic_vector(1 downto 0);
            out_en: out std_logic);
    end component;
    signal muxx_o,regx_o,subx_o: std_logic_vector(7 downto 0);
    signal muxy_o,regy_o,suby_o: std_logic_vector(7 downto 0);
    signal cmp_o: std_logic_vector(7 downto 0);
    signal x_sel,y_sel,x_ld,y_ld,x_sub,y_sub: std_logic;
    signal x_gt_y,x_eq_y,x_lt_y,data_en: std_logic;
begin
    mux_x: mux8_2x1 port map (x_sel,subx_o,x_i,muxx_o);
    mux_y: mux8_2x1 port map (y_sel,y_i,suby_o,muxy_o);
    reg_x: reg8 port map (x_ld,clk,muxx_o,regx_o);
    reg_y: reg8 port map (y_ld,clk,muxy_o,regy_o);
    cmp: cmp8 port map
        (regx_o,regy_o,x_gt_y,x_eq_y,x_lt_y,cmp_o);
    sub_x: sub8 port map (x_sub,regx_o,regy_o,subx_o);
    sub_y: sub8 port map (y_sub,regy_o,regx_o,suby_o);
    reg_out: reg8 port map (data_en,clk,cmp_o,data_o);
    ctrl: fsm port map
        (clk,rst,x_gt_y,x_eq_y,x_lt_y,
        sel(0)=>x_sel,sel(1)=>y_sel,
        ld(0)=>x_ld,ld(1)=>y_ld,
        sub(0)=>x_sub,sub(1)=>y_sub,out_en=>data_en);
end struct; 
```

## 编辑

模拟

![在此处输入图像描述](../Images/19aff80c6d2b1b6d19f63faf3eef46f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:15:41.727

我对 VHDL 不是很流利，但看起来您需要`ld`在 state 之后重置信号`S2`，或者在and`sub`之后重置信号。有一个时钟周期，减法器和负载信号都处于活动状态。`S4``S7`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:19:57.453

的代码`case S6`永远不会设置`state`为另一个值，因此它将“锁定”并保持在该状态。

# domain-driven-design - ddd - 创建和重构实体的身份字段

> ID：10371568
> 
> 赞同：0
> 
> 时间：2012-04-29T10:56:41.457
> 
> 标签：domain-driven-design, bounded-contexts

我们正在学习 DDD 并评估其在由遗留系统和数据存储支持的系统中的用途。

我们一直在使用 Anti-Corruption Layer、Bubble Context 和 Bounded Context 却不知道它们，这种方法对我们来说似乎很实用。

但我们对识别方法和身份相关性并没有把握和信心。旧数据存储没有主键，而是使用复合唯一索引来标识信息。

我们目前正在将模型创建为应该是实体的值对象（希望为每个对象添加“Long id”字段），或者我们很少使用唯一索引中使用的属性组合作为 id 字段。我们似乎很清楚实体模型应该有 id 字段。

以下是我的具体问题：

*   我们希望我们闪亮的新实体在理论上具有**“Long id”**字段。现在不添加该字段是否可以，因为这没有给我们任何价值，因为后端数据存储不会填充或理解该字段？
*   是否可以以 DDD 方式存储标识信息并在稍后的某个时间对其进行重构，希望数据存储能够满足我们的需求。
    *   如果是这样，从实体中抽象标识是好的方法（我的意思是可识别接口，还是每个实体的 KeyClass？-*这里需要任何好的建议..*）
*   这个问题可能超出了 DDD 的范围，但我想知道识别重构是否会对系统的多个层造成影响（例如，REST api 可能从**/entity/id_field/id_field/id_field 更改**为**/entity/new_long_id**）

和其他问题：

*   我们如何将遗留信息用于我们不断发展的完善的域模型，同时减少识别问题的痛苦？

*   或者在项目生命的任何时候都希望我们的域拥有**Long id**是不好的和没有价值的？

*   我们如何重构身份管理？

更新：

*   身份管理是 DDD 的重要方面，还是可以重构的基础设施方面，所以我们不应该花更多时间在上面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:10:54.663

使用适合您需求的任何标识符，但要现实和坦率地了解选择错误的成本和影响。从外部分配标识符并将它们与其他信息位一起存储是有好处的（无论格式如何（guid、long、uuid））。是否重构身份管理更多的是进行成本/收益分析。它甚至是遗留系统的一个选项，在什么样的时间范围内会有两个键并排？为什么还要重用同一个数据存储？为什么不对其进行分区，以便您可以拥有并行数据存储（最坏的情况甚至在它们之间同步数据，最好是在一个方向上）？尝试一些垂直切片而不是水平切片。HTH。

# ruby-on-rails - Rails：为什么我所有的 scss 文件都没有被编译？

> ID：10371573
> 
> 赞同：2
> 
> 时间：2012-04-29T10:58:01.533
> 
> 标签：ruby-on-rails, asset-pipeline, sass

我是 Rails 的初学者，我认为我对如何组织样式表还没有一个清晰的想法。目前，我的资产/样式表中有两个文件：

*   应用程序.css
*   主页.css

当我运行 rake assets:precompile - 我意识到只有 application.css 被编译到我的 public/assets 文件夹中。home.css 呢？

**更多信息**

我希望 home.css 仅在从我的家庭控制器收到响应时加载。我已删除 *= require_tree 。来自 application.css （因为我猜 home.css 会被包含在所有其他页面中——对吗？）

我试图找出解决方案的原因是因为 heroku 抛出以下错误：

```
ActionView::Template::Error (home.css isn't precompiled):
2012-04-29T10:48:20+00:00 app[web.1]:     5:     <meta name="viewport" content="width=device-width">
2012-04-29T10:48:20+00:00 app[web.1]:     7:     = stylesheet_link_tag "application"
2012-04-29T10:48:20+00:00 app[web.1]:     6:     = javascript_include_tag "application"
2012-04-29T10:48:20+00:00 app[web.1]:     8:     = stylesheet_link_tag params[:controller]
2012-04-29T10:48:20+00:00 app[web.1]:     9:     = javascript_include_tag [:controller]
2012-04-29T10:48:20+00:00 app[web.1]:     10:     = csrf_meta_tags
2012-04-29T10:48:20+00:00 app[web.1]:     11:   %body
2012-04-29T10:48:20+00:00 app[web.1]: 
2012-04-29T10:48:20+00:00 app[web.1]:   app/views/layouts/application.haml:8:in `_app_views_layouts_application_haml__2082158123561350666_35885340'
2012-04-29T10:48:20+00:00 app[web.1]: cache: [GET /] miss 
```

任何想法问题/错误是什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T11:01:41.180

默认情况下，只有 application.css 被编译（参见[指南](http://guides.rubyonrails.org/asset_pipeline.html#in-production)）。如果要更改预编译的内容，请更改`config.assets.precompile`application.rb，例如

```
config.assets.precompile += ['home.css'] 
```

# regex - 简单的正则表达式 - 双引号之间用下划线替换空格并使所有字母小写

> ID：10371574
> 
> 赞同：3
> 
> 时间：2012-04-29T10:58:04.720
> 
> 标签：regex, vim

你能帮我用一个正则表达式来改变像这样的行吗

```
<string name="Final time">Final time</string>
<string name="After extra time">After extra time</string> 
```

到线

```
<string name="final_time">Final time</string>
<string name="after_extra_time">After extra time</string> 
```

所以在双引号之间用下划线替换空格并使所有字母小写。

我将在 VIM 中使用这个正则表达式进行搜索/替换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T11:14:49.233

通用方法：

```
:%s/\(<string name="\)\(\u\)\([^" ]\+\) \([^" ]\+\)/\1\l\2\e\3_\4/ 
```

这将替换每个字符串@name

*   以大写字符 ( `\u`) 开头，并且
*   由两个空格分隔的单词 ( `\([^" ]\+\) \([^" ]\+\)`) 和
*   用相应的小写字符 ( `\l\2\e`) 替换它。
*   它还用下划线替换空格。

* * *

要使 @name 中的所有内容都小写，可以简化：

```
:%s/\(<string name="\)\([^" ]\+\) \([^" ]\+\)/\1\l\2_\3_\e/ 
```

* * *

要摆脱多个空格，请执行两个步骤。首先，将属性值设为小写：

```
:%s/\(<string name="\)\([^"]\+\)/\1\l\2\e/ 
```

然后，用下划线替换属性值中的每个空格

```
:%s/\(<string name="[^"]*\)\@<= /_/g 
```

请注意，这`\@<=`是 vim 表达积极的后视断言的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:10:11.933

（这个答案已经过时，并没有完全回答目前提出的问题。但是，它保留在这里，而不是根据另一位回答者的建议删除。）

如果你想要一个不会被愚弄的正则表达式，为什么，那将需要一些工作。然而，在使用 Vim 时，人们通常会采取一种更轻松的态度。这不服务吗？

```
:s/"final time"/"final_time"/g 
```

`g`如果您希望替换只发生一次，您可以省略尾随。另一方面，你可以做到

```
:s/"\cfinal time"/"final_time"/g 
```

使模式匹配不区分大小写（不过，要真正做到这一点，请参阅@Tomalak 的答案）。

但是，在使用 Vim 时，可能有更简单的方法，如下所示。

1.  按`qq`开始录制宏`q`（或`qa`开始录制宏`a`等，根据您的喜好；如果不确定，`qq`键入速度最快且与其他任何方法一样好）。
2.  键入搜索命令`/"\cfinal time"`并按 Enter。
3.  按`f<Space>`或`6l`将光标移至该空间。
4.  按`r_`用下划线替换空格。
5.  按`q`完成宏录制。

然后，如果您愿意，可以立即按`@q`使 Vim 自动重复相同的操作。如果您`"final time"`的文件中有多个字符串都需要进行相同的编辑，这将非常快速且有用。更棒的是，*第三次*及以后你想让 Vim 做同样的操作，你可以按`@@`重复上一次`@`操作。这特别快。

（感谢@Tomalak 添加`/"\cfinal time"`将搜索修改为不区分大小写。我不知道。）

# ruby - 如何在 ruby on rails 项目中添加其他文件字段？

> ID：10371576
> 
> 赞同：0
> 
> 时间：2012-04-29T10:58:14.877
> 
> 标签：ruby, ruby-on-rails-3

昨天我做了回形针多个上传画廊。今天我想自定义这一切，我需要制作一个按钮，点击后添加一个文件上传字段。您可以在此视频中看到示例：[http:](http://www.emersonlackey.com/article/rails-paperclip-multiple-file-uploads) //www.emersonlackey.com/article/rails-paperclip-multiple-file-uploads 28:27。

我在谷歌搜索过，但找不到任何东西。

@post 表格：

```
 <% form_for @post, :html => {:multipart => true}  do |t| %>
            <p>
                <%= t.label :title, 'Virsraksts:' %></br>
                <%= t.text_field :title %></br>
            </p>
            <p>
                <%= t.label :content, 'Teksts:' %>
                <%= t.text_area :content, :class => "mceEditor"%>
            </p>

            <p>Pievienot jaunas bildes:</p>
            <%= f.link_to_add "Add a task", :assets %>
            <%= f.fields_for :assets do |asset_fields| %>           
                <% if asset_fields.object.new_record? %>
                    <%= asset_fields.file_field :asset %>
                    <%= asset_fields.link_to_remove "Noņemt" %>
                <% end %>
            <% end %>

            <p>
                <%= f.fields_for :assets do |asset_fields| %>
                    <% unless asset_fields.object.new_record? %>
                    <p>
                        <%= link_to image_tag(asset_fields.object.asset.url(:thumb)), asset_fields.object.asset.url(:original) %>
                        <%= asset_fields.check_box :_destroy %>
                    </p>
                    <% end %>
                <% end %>
            </p>    
        <%= t.submit %> 
```

@post 模型：

```
class Post < ActiveRecord::Base
  attr_accessible :title, :content, :assets_attributes
    has_many :assets
    accepts_nested_attributes_for :assets, :allow_destroy => true 
end 
```

@资产模型：

```
class Asset < ActiveRecord::Base
  belongs_to :post
  has_attached_file :asset, :styles => { :large => "640x480", :medium => "300x300>", :thumb => "100x100>" },
                        :url => "/assets/albums/:id/:style/:basename.:extension",
                        :path => ":rails_root/public/assets/albums/:id/:style/:basename.:extension"
  accepts_nested_attributes_for :post, :allow_destroy => true 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:05:59.377

R.Bates 对[这里](http://railscasts.com/episodes/196-nested-model-form-revised)的嵌套形式做了很多介绍。我已经对其进行了修改，现在可以添加、删除照片、使用回形针、随意克隆这个 rails3.2 应用程序[https://github.com/Saidbek/multiple-image-uploader](https://github.com/Saidbek/multiple-image-uploader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T15:13:49.600

您将需要 javascript 才能使这些功能正常工作。

如果您是 railscasts 高级用户，您可以按照 Said 的建议访问上面的链接，但如果您不是，您应该查看[此链接](http://railscasts.com/episodes/197-nested-model-form-part-2)。

# java - 为什么在嵌套类中不能使用导入包？

> ID：10371580
> 
> 赞同：-3
> 
> 时间：2012-04-29T10:58:35.433
> 
> 标签：java, oop, generics, types, nested-class

我在这个包中定义了这个节点：

```
package provided;
public interface Node{
    public Node getNext();
} 
```

这里我想使用Node，嵌套类“LinkedListIterator”中的问题，它无法看到我的Node方法：

```
import provided.Node;
class LinkedList {
    private Node head;
    head.getNext(); // there is no error here, the method getNext() is available 
    class LinkedListIterator <Node> implements Iterator<Node> {
        private Node next_node;
            public Node next(){
                return next_node.getNext(); // The method getNext() is 
                                            // undefined for the type Node 
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T11:13:46.937

实际上，这里的问题不是 Class Node 没有 getNext() 方法，而是因为涉及到泛型，您已经将 Iterator 声明为`class LinkedListIterator <Node> implements Iterator<Node> {`now ，当您声明 Node 类型的变量时，编译器会将其带到是由名称“节点”定义的通用类型，为了解决这个问题，将下一个节点的声明更改为，`private provided.Node next_node;`或者，为通用定义另一个名称，例如......类型，t等。

`

```
class LinkedListIterator <Node> implements Iterator<Node> {
    private provided.Node next_node;

        @Override
        public Node next() {
            return next_node.getNext();
        } 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:05:20.313

你的界面里有这个

```
 public Integer getNext(); 
```

但是你的匿名类已经定义了这个

```
Public Node next() {
   return next_node.getNext() 
```

与返回类型不匹配。你需要把你的界面改成这样

```
 public Node getNext(); 
```

# version-control - 在 GIT 存储库中组织 C++、Java 和 Python 代码库

> ID：10371581
> 
> 赞同：4
> 
> 时间：2012-04-29T10:58:48.547
> 
> 标签：version-control

我在 Git 存储库中重新组织 Java（使用 Maven 构建）、使用 CMake 和 Python 构建的 C++ 库的 3 个不同实现。一种简单的方法是简单地拥有 3 个顶级目录 Java、C++ 和 Python，并将所有代码放在它下面。另一种方法是使用 Maven 目录结构，即 Java 代码放在 src/main/java 下，c++ 代码放在 src/main/cpp 下，Python 代码放在 src/main/python 下。对于测试（src/test/java 等）也是如此。

有没有关于如何做到这一点的建议？理想情况下，如果你能指出一些包含 Java、C++ 和 Python 代码的开源项目，我可以研究他们的代码库是如何组织的。什么是好的候选人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:02:06.167

我建议您使用后一种情况，即 Maven 目录结构。它不仅是 Java Maven 特定的约定。因此，其他编程语言将非常适合该结构，例如：

```
src/main/cpp
src/main/python
src/main/groovy
... 
```

有些人甚至会找到相应的 Maven 插件。无论如何，本身*没有建议*，但它被大量使用。

另请参阅以下问题的答案，这些问题也针对 Java 以外的其他语言得到了回答：[Java 项目目录结构约定](https://stackoverflow.com/questions/10590366/java-project-directory-structure-convention)

我也有包含多个代码的项目，它们都属于不同的组件，例如：

*   用Java编写的客户端
*   用 Python 编写的服务器

然后我为每个组件创建文件夹，因为它不属于其他项目结构所暗示的那样。

# libpcap - libpcap 是否总是复制数据包？

> ID：10371583
> 
> 赞同：6
> 
> 时间：2012-04-29T10:59:16.557
> 
> 标签：libpcap, packet-capture

我正在为一个流量非常大的网络编写监控程序（高清视频通过网络流式传输）。大多数数据包都非常大，我只想查看标头（仅限 IP 和 UDP/TCP）。当然，我想避免复制整个数据的开销。libpcap 是否一定要给我一份整个数据包的副本？如果是，是否有符合我需求的图书馆？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T18:40:55.570

这里似乎有两个问题：

*   标题中的那个，听起来好像是在询问 libpcap 是否复制了数据包；
*   正文中的那个，询问它是否总是复制*整个*数据包。

对于第一个问题：

使用 libpcap 在各种操作系统中运行的机制的任何代码可能至少完成了一个副本 - 从 mbufs/skbuff/STREAMS 缓冲区/任何到机制缓冲区的副本。对于 Linux，当*不*使用 tpacket 机制时，skbuff*可能*只是在接收队列中排队等待`PF_PACKET`libpcap 正在使用的套接字。

可能还有另一个副本 - 从该缓冲区到用户区的副本；如果 libpcap 使用“零拷贝”机制，例如 Linux tpacket 机制（libpcap 1.0 及更高版本默认使用），则不会发生第二次拷贝。如果不使用零拷贝机制，就会发生这种情况*。*

但是，如果您使用`pcap_next()`或`pcap_next_ex()`在 Linux 系统上使用 tpacket 机制，则从内存映射缓冲区到私有缓冲区的单独副本；`pcap_dispatch()`如果您使用or ，则不会发生这种情况`pcap_loop()`。

对于第二个问题：

这就是“snaplen”参数`pcap_open_live()`的`pcap_set_snaplen()`用途 - 它允许您指定不应捕获超过“snaplen”字节的数据包数据，这意味着复制的字节数不超过那么多。

请注意，此长度包括链路层标头，并且可以包括“元数据”标头，例如您可能在 802.11 适配器上获得的[radiotap标头。](http://www.radiotap.org/)此标头可能是可变长度的（例如，在 802.11 上，802.11 标头是可变长度的，并且，如果您要获取 radiotap 标头，它们也是可变长度的）。

另外，IPv4 和 TCP 头都可以有选项，而 IPv6 数据包可以有扩展头，所以 IP 和 TCP 头的长度也可以是可变的。

这意味着您可能必须确定要使用的“最坏情况”快照长度；没有办法明确地说“不要给我任何超出 TCP/UDP 标头的东西”，您只能说“给我不超过 N 个字节”。

# php - 使用 PHP 解析 html 文件时获取标签属性

> ID：10371584
> 
> 赞同：0
> 
> 时间：2012-04-29T10:59:41.067
> 
> 标签：php, dom, xpath, html-parsing

我正在使用 DOMdocument 解析 HTML 文件。

我可以轻松获取节点值，但如何获取它们的属性？到目前为止，我有这样的事情：

```
 $columns = $xpath->query('//li[@class="numberCol"]/span'); 
```

现在，如何显示“类”属性的值？

谢谢。

# asp.net-mvc - 我应该使用 cookie 来存储信息以跟踪应用程序中的用户吗

> ID：10371587
> 
> 赞同：0
> 
> 时间：2012-04-29T11:00:34.393
> 
> 标签：asp.net-mvc, asp.net-mvc-3, cookies

我需要提高我的应用程序的速度，但我还必须注意安全性。首先我将解释应用程序的作用：
当用户在应用程序中注册时，他选择学校，在数据库的用户配置文件中我存储这所学校的 ID。
每个学校都有自己的页面，如果用户来自该学校，他可以在该学校页面上做一些事情，写评论添加图片等。
用户也可以访问其他学校页面，但他不能写评论和添加图片。
目前我保持`CurrentSchoolID`在`ViewBag's`.
我想知道存储`CurrentSchoolID`在cookie中是否更好。
是否有可能某些邪恶的用户使用此 cookie 来损害应用程序？
对于应用程序用户必须启用 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:39:14.327

如果不允许用户编辑除他们之外的其他学校，则不能指望 cookie 中的 ID 是真实的。

从理论上讲，您可以做的是确实将学校 ID 保存在 cookie 中，并且在每次写入/更新/删除操作时，检查（当然在服务器上）登录用户是否有资格更改与该学校 ID 相关的数据.

但实际上，学校ID是不必要的。更好的是 - 在服务器端检查允许该用户编辑哪个学校，并且仅当用户编辑该学校的数据之一时才允许编辑操作。

# mysql - SQL：获取每个主题的最后 3 个帖子

> ID：10371589
> 
> 赞同：0
> 
> 时间：2012-04-29T11:01:13.640
> 
> 标签：mysql, sql, group-by, blogs

我有一个博客 SQL 系统，其中包含这样的“帖子”表（id、主题、标题、内容、已创建）。

我想获取每个帖子主题的最后 3 个标题，以显示在表格中，但我没有得到它。

我试过这个 SQL 代码：

```
SELECT *
FROM posts
GROUP BY theme
ORDER BY created DESC
LIMIT 0,3 
```

但这给了我表格的最后 3 个帖子！！！

你能帮我么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:15:24.037

您在某些方面做得对，但在其他方面您不理解该`GROUP BY`子句的用法。

以上`LIMIT`适用于整个查询结果。此外，您还需要一个聚合函数`GROUP BY`来应用 ，例如`SUM`，`AVG`等。您不能简单地`SELECT *`期望按 分组`theme`。

`GROUP BY`返回您分组的每个项目的一行，例如，最新的，*而*不是三行。

因此，您需要根据分组依据的**每个主题**执行查询，但在这种情况下，您根本不需要分组依据。编写一个循环，为您需要的每个主题执行此查询：

```
SELECT *
FROM posts
WHERE theme = "your-theme"
ORDER BY created DESC
LIMIT 0,3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T12:08:21.720

Josvic Zammit 的回答部分正确（我 +1），但您不必按主题执行查询。这是您可以在 MySQL 中执行此操作的一种方式，尽管在 PHP 或其他任何方式中“执行每个主题的查询”肯定会更容易。

```
SELECT * FROM
(
SELECT
IF(@prev != sq.theme, @rownum:=1, @rownum:=@rownum + 1) AS rownumber, @prev:=sq.theme, sq.*
FROM
(
    SELECT
    *
    FROM
    posts
    , (SELECT @rownum:=0, @prev:=0) r 
    ORDER BY theme, created DESC
) sq
) q
WHERE q.rownumber <= 3 
```

请注意，不幸的是，我现在无法对其进行测试，但它应该可以工作。另请注意，此查询可能比对每个主题执行更简单的查询要慢。

# bash - 使用 BASH 选择最佳可用选项

> ID：10371590
> 
> 赞同：2
> 
> 时间：2012-04-29T11:01:15.200
> 
> 标签：bash, command-line, conditional-statements

我很好奇是否可以以比这更简洁的方式编写从选项列表中选择最佳可用选项的 shell 脚本？

```
d="least wanted directory"
dt="possible directory"    && [ -d $dt ] && d=$dt
dt="preferred directory"   && [ -d $dt ] && d=$dt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:37:06.203

可读版本（高效感谢@CodeGnome）：

```
dirs=("preferred directory" "possible directory" "least wanted directory")

for test_dir in "${dirs[@]}"
do
    if [ -d "$test_dir" ]
    then
        dir="$test_dir"
        break
    fi
done
echo "$dir" 
```

# apache-flex - 从 ADT 命令行打包台式计算机的强制运行时捆绑包

> ID：10371591
> 
> 赞同：0
> 
> 时间：2012-04-29T11:01:32.943
> 
> 标签：apache-flex, air, package

朋友们，我很少有本教程[为台式计算机打包一个强制运行时包，](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f709e16db131e43659b9-8000.html#WSfffb011ac560372f-63d4a6d6131f383b813-8000)它是创建包含 AIR 运行时的安装包的指南。

我已经使用 Flash Builder 4.5 开发了 AIR 桌面应用程序，并且我使用了 SDK 版本 4.5.0 和相关的 ADT 版本来打包应用程序。我遵循了 adobe 的教程（上面的链接），但不识别命令 -target bundle。为什么？我替换了 sdk 3.6.0 是 adt 命令与该选项一起使用但无法创建包，因为我只使用 SDK 4.5.0 版本中存在的组件。如何创建具有指南相同功能的包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:50:44.053

直到 Flash Builder 4.6 才引入 Captive Runtime 选项；所以你不能用 Flash Builder 4.5 来做。

# android - Android 单选按钮

> ID：10371593
> 
> 赞同：0
> 
> 时间：2012-04-29T11:01:43.420
> 
> 标签：android, radio-button

如何在android上的radioGroup内显示四个单选按钮，以便单选按钮的位置如下：

左上 右上 左下 右下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:11:38.850

转到此链接[单选按钮的](http://androiddrawableexplorer.appspot.com/)图像-> 下载单选按钮的图像（按下和未按下）-> 将未按下的单选按钮图像设置为**按钮**小部件的背景图像，然后单击将按钮的图像更改为按下的单选按钮图像。

您可以使用相对布局来定位单选按钮的按钮和其他属性，这些属性是您在 Java 代码中为简单按钮在自己的逻辑中定义的。

# android - 在适配器内添加 onClick 侦听器以查看时，ListView 的 listSelector 样式不起作用

> ID：10371596
> 
> 赞同：3
> 
> 时间：2012-04-29T11:02:54.793
> 
> 标签：android, android-layout, android-listview

我正面临这个问题，它让我发疯。我有以下适配器代码：

```
private class ListAdaptor extends ArrayAdapter<String> {
        private ArrayList<String> listVO;

        public ListAdaptor(Context context, int textViewResourceId, ArrayList<String> items) {
            super(context, textViewResourceId, items);
            this.listVO = items;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                v = ViewGroup.inflate(getContext(), R.layout.list_friends_inflate, null);
            }
            String o = listVO.get(position);
            TextView fullName = (TextView) v.findViewById(R.id.textViewName);
            fullName.setText(o);

            v.setOnClickListener(new OnClickListener() {                
                @Override
                public void onClick(View v) {
                    Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_SHORT);
                }
            });
            /*v.setOnTouchListener(new OnTouchListener() {              
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    Toast.makeText(getApplicationContext(), "test2", Toast.LENGTH_SHORT);
                    return false;
                }
            });*/           
            return v;
        }
    } 
```

该适配器类位于 ListActivity 中。当我点击 listView 的项目时，不会发生 listSelector 样式行为。如果我评论 onClickListener 并点击它，它就可以工作。如果我取消注释 onTouchListener 并点击该项目，它也可以工作，但我不想要 onTouch 事件，而是 onClick。

我在适配器中膨胀的视图的 xml 是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp" android:clickable="false" android:focusableInTouchMode="false">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="65dp"
        android:layout_height="65dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" android:clickable="false" android:focusableInTouchMode="false"/>

    <TextView
        android:id="@+id/textViewName"
        style="@style/TextViewStyleCommon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_marginBottom="18dp"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@+id/imageView1"
        android:textAppearance="?android:attr/textAppearanceMedium" android:clickable="false" android:focusableInTouchMode="false"/>

    <TextView
        android:id="@+id/textViewPoints"
        style="@style/TextViewStyleCommon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textViewName"
        android:layout_alignBottom="@+id/textViewName"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:clickable="false" android:focusableInTouchMode="false"/>

</RelativeLayout> 
```

我知道在您膨胀的 xml 中有可聚焦元素存在问题，导致 onClick 事件**不起作用**。问题是我的活动**确实**有效，但风格行为却没有……这太疯狂了。

在我的 styles.xml 上，我有：

```
<style name="MyTheme" parent="android:Theme.Light">
        <item name="android:textAppearance">?android:attr/textAppearanceMedium</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowBackground">@drawable/ndp_background</item>
        <item name="android:windowFrame">@null</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:listViewStyle">@style/MyListView</item>
    </style>

    <style name="MyListView" parent="@android:style/Widget.ListView.White">
        <item name="android:listSelector">@drawable/list_subject_selector</item>
        <item name="android:cacheColorHint">@android:color/transparent</item>
    </style> 
```

我将 MyTheme 定义为 Android 清单中的应用程序主题...

有没有人见过这样的行为？非常感谢，费利佩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:37:50.813

如果您想在 Listview 项目单击上做一些事情，那么为什么不在 setOnItemClickListener 上使用。

```
list.setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
     Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_SHORT);
    }); 
```

# android - 来自 sql 查询的多个数据库操作

> ID：10371598
> 
> 赞同：3
> 
> 时间：2012-04-29T11:03:34.387
> 
> 标签：android

我有两个`SQLiteDatabase`数据库实例。我需要将数据从一个复制到另一个。我需要执行这个查询：

```
INSERT INTO `toDB`.`tableName` SELECT * FROM `fromDB`.`tableName` 
```

那么，我怎样才能做到这一点我的数据库实例？如何替换 toDB 和 fromDB ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:15:44.423

从未尝试过，但它应该以这种方式工作：

您必须在 SQLite 级别附加其他数据库，以便 sqlite 可以直接访问它[。](http://www.sqlite.org/lang_attach.html)

例如，您打开应该是的数据库，`toDB`然后发出以下命令（通过`execSQL`）

```
ATTACH DATABASE '/data/data/your.package/databases/dbname.db' AS fromDB 
```

您现在应该可以访问其他数据库并且可以执行

```
INSERT INTO main.tableName SELECT * FROM fromDbB.tableName 
```

您最初打开的数据库自动具有名称“main”。

您可以并且应该通过[Context#getDatabasePath](http://developer.android.com/reference/android/content/Context.html#getDatabasePath%28java.lang.String%29)获取数据库的路径，因为不能保证此路径在所有设备上都是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T01:31:12.097

是的，您可以按以下方式执行此操作：

> ```
>  DatabaseHelper dbHelper = DatabaseHelper.create(CMOSApplication.getInstance());
>     SQLiteDatabase db = null;
>     try {
>         db = dbHelper.getWritableDatabase();
>         db.execSQL("attach database ? as oldDB",
>                 new String[] { CMOSApplication.getInstance().getDatabasePath("cmos_database").getPath() });
>         db.execSQL("insert into task select * from oldDB.task");
>     } catch (SQLException e) {
>         // TODO Auto-generated catch block
>         e.printStackTrace();
>     } finally {
>         if(db != null){
>             try {
>                 db.execSQL("detach oldDB");
>             } catch (SQLException e) {
>                 // TODO Auto-generated catch block
>                 e.printStackTrace();
>             }
>         }
>     } 
> ```

# jquery-ui - Emberjs 和 jQuery UI 克隆助手

> ID：10371599
> 
> 赞同：4
> 
> 时间：2012-04-29T11:04:01.390
> 
> 标签：jquery-ui, ember.js, jquery-ui-draggable, jquery-ui-droppable

我正在尝试让 jqueryui 拖放以使用 emberjs。我在这里设置了一个小提琴：http: [//jsfiddle.net/XMgwV/13/](http://jsfiddle.net/XMgwV/13/)但我似乎无法触发 drop 事件。mixin 来自这个演示：[http ://www.lukemelia.com/blog/archives/2012/03/10/using-ember-js-with-jquery-ui/](http://www.lukemelia.com/blog/archives/2012/03/10/using-ember-js-with-jquery-ui/)

编辑：
如果我将 jQueryUI 可拖动辅助函数更改为“原始”，它会按预期工作。[正如 #7 here](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/)`.clone()`中所指出的，这似乎是 jquery ui 和 ember 的问题。codebrief 博文中的 safeClone 方法似乎并没有[完全解决问题。](http://jsfiddle.net/XMgwV/22/)

任何人都知道如何让它按预期工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:22:41.493

我必须修复 jQuery UI 包装器才能使其正常工作。但我能想出的只是一个肮脏的黑客。

我不得不转

```
var ui = jQuery.ui[this.get('uiType')](options, this.get('element')); 
```

进入

```
var ui = $(this.get('element'))[this.get('uiType')](); 
```

[http://jsfiddle.net/MSch/LrHTB/1/](http://jsfiddle.net/MSch/LrHTB/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:31:59.730

如果您添加以下内容，您的示例似乎将起作用：

```
 clone.removeClass('ember-view'); 
```

到 safeClone 助手。

这是一个应该解决问题的 jsfiddle：http: [//jsfiddle.net/Wu2cu/](http://jsfiddle.net/Wu2cu/)

# php - 使用 symfony2 和教义从现有数据库生成单个实体

> ID：10371600
> 
> 赞同：64
> 
> 时间：2012-04-29T11:04:13.730
> 
> 标签：php, database, symfony, doctrine

是否可以使用 Symfony2 控制台工具从数据库生成单个实体？

在编码过程中，我不得不添加一个表，并对现有的实体类进行了修改。所以我不希望我的所有实体都重新生成。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-16T08:34:25.513

我有同样的问题，你必须这样做：

```
php app/console doctrine:mapping:convert metadata_format \
    ./src/App/MyBundle/Resources/config/doctrine \
    --from-database \
    --filter="Yourtablename" 
```

然后

```
php app/console doctrine:mapping:import AppMyBundle \
    metadata_format --filter="Yourtablename" 
```

`metadata_format`您要生成的文件结尾在哪里（例如 xml、yml、注释）

最后

```
php app/console doctrine:generate:entities AppMyBundle --no-backup 
```

就像这个学说只会加载你需要的实体。请注意必须使用 CamelCase 的过滤器！

希望对你有帮助

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-02T21:05:36.653

对于第三个命令，教义不断重新生成所有实体文件。通过在捆绑后添加实体名称，它只生成了我感兴趣的实体。

```
php app/console doctrine:generate:entities AppMyBundle:Yourtablename --no-backup 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-08-14T05:46:03.013

Symfony 2.7 选项注释和 [/xml/yml] 的简单工作解决方案参见[http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)

分 3 步执行 3 个命令：

```
$ php app/console doctrine:mapping:import --force AppBundle xml --filter="Meeting" 
```

（**注意：**如果您的数据库名称是`my_meeting`您将需要将其更改为`MyMeeting`in`filter="MyMeeting"`以便于学说以找到您的表名。这是因为学说总是会去除下划线并将 Camel-case 添加到您的表名中。如果不是，您将收到此错误：*“数据库没有任何映射信息”*。）

```
$ php app/console doctrine:mapping:convert annotation ./src/AppBundle/Entity --from-database --filter="Meeting" 
```

（**注意：**确保您在**Meeting.php**类文件中具有以下内容`namespace AppBundle\Entity;`，如下所示：

 **```
<?php
/**
* Created by PhpStorm.
* User:
* Date: 03-Sep-2015
* Time: 3:23 PM
*/
namespace AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM; 
```

如果没有添加它。）

在哪里：

*   AppBundle 正是您在 Symfony 2.7 中的“AppBundle”
*   会议是目标表（区分大小写）

可以肯定的是，检查这个目录：

> src\AppBundle/Resources/config/doctrine/Meeting.orm.xml

并确保您只有要创建实体类文件的表的 .xml 文件，而没有其他文件。然后运行以下命令为您之前创建的实体类生成 get 和 set 方法

> $ php 应用程序/控制台原则：生成：实体 AppBundle：会议 --no-backup

注意 2：作为最后一步，您必须删除 xml 学说 orm db 文件，例如`src\AppBundle/Resources/config/doctrine/VisitorData.orm.xml`

它对我来说效果很好。

有关解释，请阅读：[http ://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-02-18T10:12:39.637

@fyrye 当前隐藏的评论值得称赞，想添加它，以免其他人错过。这是方法：

```
/** @var \Doctrine\DBAL\Connection $connection */
$config = $connection->getConfiguration();

// for excluding an specific table
$config->setFilterSchemaAssetsExpression('/^(table_to_reverse_engineer_1|table_to_reverse_engineer_2).*$/'); 
```

**来源：[https ://coderwall.com/p/jofhdw/doctrine-tell-which-tables-to-work-with](https://coderwall.com/p/jofhdw/doctrine-tell-which-tables-to-work-with)**

由于大量定义错误的旧表，我在运行以下命令时遇到问题

```
php ./vendor/bin/doctrine orm:convert-mapping --force --from-database annotation ./src/UI/Entity/ 
```

事实证明， --filter 标志仅在它从所有表中读取元数据之后进行过滤，如果它们没有主键或有其他问题，将导致命令失败

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-12T04:42:07.710

**对于使用Symfony 3**的我来说，没有一个答案是完全正确的。我最终做了：

```
php bin/console doctrine:mapping:import --force MyBundle xml --filter="MyTable"

php bin/console doctrine:mapping:convert annotation ./src --filter="MyTable"

php bin/console doctrine:generate:entities MyBundle:MyTable --path ./src 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-28T10:05:55.723

--filter 使用实体名称，而不是表名称！php bin/console 原则：映射：导入“App\Entity”注解 --path=config/doctrine --filter="YourEntity"

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-19T05:00:28.420

我会将此作为对已接受答案的评论，但我是新手。

对于像我这样在使用 --filter 开关映射多个表的名称中具有重合字符串时遇到问题的人，可以使用一种模式。

示例表名：

供应商供应商联系方式

```
php app/console doctrine:mapping:convert metadata_format \
    ./src/App/MyBundle/Resources/config/doctrine \
    --from-database \
    --filter="Vendor" 
```

该命令将转换两个表，而不仅仅是 Vendor。如果您只想要 Vendor 而不是 VendorContact，请在 --filter 中使用一个模式：

```
php app/console doctrine:mapping:convert metadata_format \
    ./src/App/MyBundle/Resources/config/doctrine \
    --from-database \
    --filter="\bVendor\b" 
```

希望对某人有所帮助！

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-03-29T16:48:03.003

也适用于 Symfony 3。

如果您收到“没有要处理的元数据类”。消息尝试在过滤器参数中将您的表名转换为 Doctrine 驼峰大小写。

“my_table_name”需要写成“MyTableName”。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-07-05T12:24:40.947

Symfony **3**

为新的“组”表生成实体

```
php bin/console doctrine:mapping:import "App\Entity" annotation --path=src/AppBundle/Entity --filter Group 
```

[![在此处输入图像描述](../Images/cf5a26ec0bca824caaca7f61fced5275.png)](https://i.stack.imgur.com/Lb04U.png)

正如[symfony 3 文档中所写](https://symfony.com/doc/3.4/doctrine/reverse_engineering.html)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-30T13:39:54.977

我在 Symfony 2.4 和 MySQL 上遇到了完全相同的问题。

上面发布的解决方法都不适合我。

我最终用我想要提取的表创建了一个新数据库（这很容易做到，因为 MySQL 提供了创建脚本）。

然后更改与该新数据库的连接并从那里执行实体提取命令。

似乎有点激进，但我不会手动创建实体。

希望有帮助

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-23T05:09:03.580

没有为我的 symfony 3.3 工作。所以我只是创建了一个目录副本并重新生成了副本目录中的所有实体。然后我在原始目录中复制了所需的实体。

--filter 由于这个问题而不起作用[https://github.com/symfony/symfony/issues/7717](https://github.com/symfony/symfony/issues/7717)**

# python - Python，iOS - 我可以用 python 编写我的应用程序的模型吗

> ID：10371606
> 
> 赞同：2
> 
> 时间：2012-04-29T11:05:03.993
> 
> 标签：python, objective-c, ios

我想为iOS编写一个计算机代数系统（只是为了好玩），我认为如果内核代码用Python编写会更好。所以我想要一种方法：

在 iOS 上从 Objective-C 调用 Python 代码，从 Objective-C 访问 Python 对象的属性和方法：

我将在 Objective-C 中完成所有 GUI（视图）代码，我不需要从 Python 调用 Cocoa。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:33:20.523

两种选择：

1) 使用 kivy ( [http://kivy.org/#home](http://kivy.org/#home) )，它与 ​​iOS 兼容，但你必须用 python 编写 UI（我没有尝试过这样做，所以可能有办法）。

2) 使用 PyObjC ( [http://pyobjc.sourceforge.net/](http://pyobjc.sourceforge.net/) ) 之类的东西。您可以在普通的 Python 模块中编写逻辑，然后从 Objective-C UI 代码中使用。

# javascript - 在 Firefox 中打开新标签页

> ID：10371609
> 
> 赞同：3
> 
> 时间：2012-04-29T11:05:33.310
> 
> 标签：javascript, jquery, cross-browser

我有这段代码可以在新窗口中打开我页面中的所有链接：

```
<base target='_new' /> 
```

它在 Chrome 中运行良好，但在 IE(8) 和 Firefox 中则不然。在 Firefox 中，它确实打开了一个新选项卡，但在第二个链接上单击它会加载到新选项卡中，但没有将此选项卡放在前面，因此用户必须手动单击新选项卡。在 IE 中，它会打开一个新的浏览器窗口。是否有等效代码 (..js/Jquery) 可以在所有浏览器的新选项卡中打开？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T11:09:32.533

无法保证浏览器将在哪里打开该新窗口/选项卡。不同的浏览器以不同的方式打开新窗口/标签，并且该行为也可能受到浏览器设置的影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T11:11:24.320

Firefox 可以选择立即切换到选项卡。

```
Tools -> Options -> Tabs, 
    "When I open a link in a new tab, switch to it immediately" 
```

IE9有同样的选择

```
Tools -> Internet Options -> General -> Tabs Settings
    "Always switch to new tabs when they are created" 
```

IE9 可以选择如何处理新的弹出窗口。

```
Tools -> Internet Options -> General -> Tabs Settings
    "When a popup is encountered"
     - Let Internet Explorer decide ...
     - Always open popups in a new tab
     - Always open popups in a new window 
```

来自[http://windows.microsoft.com/en-US/windows7/Tabbed-browsing-frequently-asked-questions](http://windows.microsoft.com/en-US/windows7/Tabbed-browsing-frequently-asked-questions)

```
If you opt to let Internet Explorer decide how to display pop-ups, it 
will display the pop-up in a new window if the pop-up specifies size 
or display requirements. Otherwise, the pop-up is displayed in a new tab. 
```

因此，行为主要取决于用户而不是开发人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T11:11:43.447

您无法控制这部分（如何打开 - 在选项卡或窗口中）。因为这是由浏览器决定的。更重要的是，您甚至不能依赖浏览器的类型，因为每个用户都可以选择他或她的方式来打开新页面：总是在选项卡中或总是在新窗口中或其他方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T13:43:18.373

我不确定这是否适用于“base”标签，但在链接上，“target”属性可以有一个预定义的关键字，或者您想给新窗口提供的任何名称。

可用的关键字是：

*   _blank：在新窗口或选项卡中打开链接
*   _self：在点击的同一帧中打开链接（这是默认设置）
*   _parent：打开父框架中的链接
*   _top：在整个窗口中打开链接

（[http://www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp)）

如果您不使用这些关键字之一，您可以使用您想要的任何名称，然后该名称将用于引用该窗口。这允许您重复使用打开的选项卡以在其中加载不同的文档。

因此，通过使用“_new”（*不是*关键字）作为基本目标，您实际上是说所有链接都必须在名为“_new”的窗口中打开。起初这个窗口不存在，所以浏览器创建它（第一次点击），并且它在所有后续点击中重复使用它。

请改用“_blank”，以便每个链接在其自己的新选项卡中打开。

# python - Python：探索GUI程序的数据

> ID：10371612
> 
> 赞同：-4
> 
> 时间：2012-04-29T11:06:24.263
> 
> 标签：python, user-interface, variables

有什么方法（使用python）来获取存储在GUI中的变量值吗？作为解释我的问题的一个例子，我将采用一个众所周知的内置 Windows 计算器。假设我输入了一个值 245。在查看计算器 GUI 显示时很容易看到这个值，但是我怎样才能让 python 得到这个值呢？

我试图使用著名的作弊引擎来查找该值存储在哪个内存地址中......没有任何结果。谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:12:49.517

让我们结束这个线程......

`pywinauto`会是你的朋友。

示例案例：

1.  启动 Windows 计算器 (calc.exe)
2.  在里面输入一个数字，比如说`42`

此脚本将获取并打印您 42：

```
from pywinauto import application

app = application.Application()
app.connect_(title='Calculator')
window = app.Calculator
print window.Children[5].Text 
```

pywinauto的主页在[这里](http://code.google.com/p/pywinauto/)

如果你在 Python 2.7 上运行，你需要自己安装和编译 SendKeys，或者为[本页](https://bitbucket.org/orutherfurd/sendkeys/issue/5/windows-installer-for-python-27)获取有用的信息。

# c++ - 铸造对象

> ID：10371614
> 
> 赞同：0
> 
> 时间：2012-04-29T11:07:27.123
> 
> 标签：c++, casting, return

在我的代码中，我有类似的东西：

```
class A
{
 enum eType
 {
  A=0,
  B,
  C
 };
 virtual eType ReturnType()
 {
  return A;
 }
};

class B : A
{
 eType ReturnType()
 {
  return B;
 }
}

class C : A
{
 eType ReturnType()
 {
  return C;
 }
} 
```

我的 MFC CList 上有很多对象 B 和 C 类。我怎么能写这样的方法

```
auto GetObjectFromList
{
 return object;
} 
```

返回适当的对象。我的意思是当列表上的对象是 B 类时，这个方法应该返回对象类 B 和 B 类的方法，当它是对象类 C 时，这个方法应该返回对象类 C 和类 C 的方法？我尝试使用 C++11 中的 auto ，但我做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:15:20.337

我认为您的意思是“B类：公共A”对吗？

```
std::auto_ptr<A> GetObjectFromList()
{
    return std::auto_ptr<A>( new B ) ;  // you can new C if you want to return a C
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:20:38.180

首先，您说您有一个 B 和 C 的集合。如果您没有 A 类的实例，请通过以下方式将其设为纯虚拟

虚拟 eType ReturnType() = 0;

其次，您需要通过以下方式进行继承：

A类：**公共**B

然后对于这个问题，您将需要使用 dynamic_cast<> 查看哪个实例存储在您要查找的索引中。

# java - 我应该使用不同的包还是相同的包来做到这一点

> ID：10371615
> 
> 赞同：1
> 
> 时间：2012-04-29T11:07:58.923
> 
> 标签：java

我正在使用 Netbeans 7.1 进行基于 GUI 的分配（销售管理软件）。它有 3 件事——

1.  界面
2.  编码
3.  数据库

现在我想知道，我应该使用 3 个不同的包还是只使用一个？还有框架呢，只有一个框架和更多面板将是它或更多框架的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:25:08.840

您可以拆分它，但它对您有意义。如有必要，您始终可以重构，因此如果它是一个小型应用程序，您可以在开始时将所有内容集中在一起，然后再将其分成模块。

帧数也取决于您。一些 GUI 使用单独的框架，但其他 GUI 可能使用单个框架并通过使用 CardLayout 或 TabbedPane 显示不同的面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:27:10.630

> ..框架怎么样，只有一个框架和更多面板将是它或更多框架的好方法？

不是“更多帧”。请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/a/9554657/418556)原因和替代方案。

# python - Google App Engine(Python) - 网站片段 - 复合视图

> ID：10371618
> 
> 赞同：0
> 
> 时间：2012-04-29T11:08:13.463
> 
> 标签：python, html, django, google-app-engine

有没有办法构建网站的三个或四个部分（三个或四个 html 模板），然后在 GAE python 中渲染其中的一些或全部？我知道我可以加载和呈现一个特定的 html django 模板，但我想在不同的文件中为网站的不同部分构建模板，然后根据情况将它们组合在一起。

一个很好的例子是，我希望在我的大多数 Web 应用程序页面中使用几乎相同的菜单、页眉、页脚，但我想切换内容的特定部分。所以我想有一个文件和模板来处理让我们说类和另一个处理学生，所以网站的总体外观（main.html）保持不变，但我显示和处理有关学生的信息的方式或类是完全不同的。我基本上想将一堆特定于页面的 html 植入通用模板中。感谢您对此的任何帮助。:)

我不确定我正在寻找的正确技术术语是什么（我尝试搜索）。=> 我认为他们在 Zend 框架中将其称为复合视图或站点片段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T11:22:26.863

您应该在 Django 中使用模板继承。看看[这个教程](http://www.webmonkey.com/2010/02/use_templates_in_django/#Inheritance)作为开始。

**编辑**关于模板继承的官方[Django Book 部分](http://www.djangobook.com/en/2.0/chapter04/)还演示了不同的“片段”（例如页脚或导航栏）如何存储在不同的模板文件中，并通过包含和继承组合在一起。

该站点显示了一个模板如何从另一个模板继承，例如当站点部分模板扩展基本布局模板时，使用代码，例如，

```
{% extends "base.html" %} 
```

它还展示了如何使用模板包含，例如，将不同的部分添加到更大的模板中，例如拼图中的部分。例如，可以将导航片段添加到带有短语的布局文件中

```
{% include "nav.html" %} 
```

正如@Nick Johnson 的评论中所指出的：`extends`更紧凑，可以不需要使用多个文件片段。仅`include`作为最后的手段，如果`extends`你失败了。

**编辑另请参阅我对**[“如何将大型 HTML 文件切割成多个 HTML 文件”](https://stackoverflow.com/a/10370414/1290420)的问题的回答

# sql - 使用 SQL Profiler 优化 SQL 查询

> ID：10371628
> 
> 赞同：0
> 
> 时间：2012-04-29T11:10:11.743
> 
> 标签：sql, sql-server, profiler

如果我的 proc 被调用，我在 SQL Profiler 中有以下记录。

**CPU - 78，读取 - 3508，写入 - 0，持续时间 - 81**

以上数据对于我的网站上 70 人的并发点击是否正常，我的 proc 在用户正在访问的每个页面上被调用，我服务器上的性能监视器显示匿名用户点击在我启用我的 SQL proc 调用时不断增加。

请建议我可以查看的内容和位置！！，我的 proc 查询如下：

```
ALTER PROCEDURE [dbo].[GETDataFromLinkInfo] 
-- Add the parameters for the stored procedure here 
(@PageID INT) 
AS 
  BEGIN 
      -- SET NOCOUNT ON added to prevent extra result sets from 
      -- interfering with SELECT statements. 
      SET NOCOUNT ON; 

      -- Insert statements for procedure here 
      SELECT DISTINCT [PUBLICATION_ID] AS n, 
                      [URL]            AS u 
      FROM   [LINK_INFO] WITH(NOLOCK) 
      WHERE  Page_ID = @PageID 
             AND Component_Template_Priority > 0 
             AND PUBLICATION_ID NOT IN( 232, 481 ) 
      ORDER  BY URL 
      FOR XML RAW ('p'), ROOT ('ps'); 

      RETURN 
  END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:22:40.177

执行 proc 1000 次并测量花费了多长时间。这是判断性能（经过时间）的最重要指标。不要测量读取和写入。

关于我的建议不要查看读/写：然而，读可以被缓存或非缓存，这是一个巨大的区别。我总是查看执行计划，以了解查询为何如此行事以及要做什么。读/写指标既不会告诉您是否需要采取行动，也不会告诉您该做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T17:12:36.587

正如 Phil 所建议的，使用[数据库引擎优化顾问](http://msdn.microsoft.com/en-us/library/ms166575.aspx)分析查询可能是您最好的选择。您必须提供更多信息才能在此处获得任何准确答案 - 人们可能会建议一个或多个索引，但索引的功效取决于其中列的选择性。添加无用的索引实际上可能会以其他方式对性能产生负面影响。

# c# - C# 文本文件搜索特定单词并删除包含该单词的整行文本

> ID：10371630
> 
> 赞同：9
> 
> 时间：2012-04-29T11:10:29.803
> 
> 标签：c#, search, text-files

基本上我有一个文本文件，我读入并显示在富文本框中，这很好，但我希望能够在文本中搜索特定单词并删除包含该单词的整行文本。我可以搜索文本以查看该单词是否存在，但我无法弄清楚如何删除整行。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-29T11:18:34.260

最简单的方法是重写整个文件而不包含包含该单词的行。您可以[`LINQ`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)为此使用：

```
var oldLines = System.IO.File.ReadAllLines(path);
var newLines = oldLines.Where(line => !line.Contains(wordToDelete));
System.IO.File.WriteAllLines(path, newLines); 
```

如果您只想删除包含该**单词**的所有行（不仅是字符序列），则需要将行拆分为`' '`：

```
var newLines = oldLines.Select(line => new { 
            Line = line, 
            Words = line.Split(' ') 
        })
        .Where(lineInfo => !lineInfo.Words.Contains(wordToDelete))
        .Select(lineInfo => lineInfo.Line); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T12:06:13.950

你可以轻松做到`LINK`

```
 string search_text = text;
                string old;
                string n="";
                StreamReader sr = File.OpenText(FileName);
                while ((old = sr.ReadLine()) != null)
                {
                    if (!old.Contains(search_text))
                    {
                        n += old+Environment.NewLine;  
                    }
                }
                sr.Close();
                File.WriteAllText(FileName, n); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T02:53:20.210

代码：

> “使用 System.Linq；” 是必须的。

编写自己的扩展方法`IsNotAnyOf(,)` *（放在静态类中）*并调用该方法 *（即被调用）* from`.Where(n => n.IsNotAnyOf(...))...();`如果条件满足，for循环将返回false，否则该方法将返回true：

```
static void aMethod()
{
    string[] wordsToDelete = { "aa", "bb" };
    string[] Lines = System.IO.File.ReadAllLines(TextFilePath)
        .Where(n => n.IsNotAnyOf(wordsToDelete)).ToArray();
    IO.File.WriteAllLines(TextFilePath, Lines);
}

static private bool IsNotAnyOf(this string n, string[] wordsToDelete)
{    for (int ct = 0; ct < wordsToDelete.Length; ct++)
         if (n == wordsToDelete[ct]) return false;
     return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-10T07:47:34.927

我们可以将字符串转换为行数组，对其进行处理，然后再转换回来：

```
string[] dados_em_lista = dados_em_txt.Split(
                        new[] { "\r\n", "\r", "\n" },
                        StringSplitOptions.None
                    );

var nova_lista = dados_em_lista.Where(line => !line.Contains(line_to_remove)).ToArray();

dados_em_txt = String.Join("\n", nova_lista); 
```

# javascript - 未选中复选框时如何使用javascript关闭HTML5音频？

> ID：10371632
> 
> 赞同：0
> 
> 时间：2012-04-29T11:10:38.157
> 
> 标签：javascript, checkbox, html5-audio

我有以下 javascript 代码来播放一些 HTML5 声音：

```
 var html5_audiotypes={ //define list of audio file extensions and their associated audio types. Add to it if your specified audio file isn't on this list:
        "mp3": "audio/mpeg",
        "mp4": "audio/mp4",
        "ogg": "audio/ogg",
        "wav": "audio/wav"
    }

    function createsound(sound){
        var html5audio=document.createElement('audio')
        if (html5audio.canPlayType){ //check support for HTML5 audio
            for (var i=0; i<arguments.length; i++){
                var sourceel=document.createElement('source')
                sourceel.setAttribute('src', arguments[i])
                if (arguments[i].match(/\.(\w+)$/i))
                    sourceel.setAttribute('type', html5_audiotypes[RegExp.$1])
                html5audio.appendChild(sourceel)
            }
            html5audio.load()
            html5audio.playclip=function(){
                html5audio.pause()
                html5audio.currentTime=0
                html5audio.play()
            }
            return html5audio
        }
        else{
            return {playclip:function(){throw new Error("Your browser doesn't support HTML5 audio")}}
        }
    }

//Initialize two sound clips with 1 fallback file each:
var sound1=createsound("audio/tileSelect.ogg", "audio/tileSelect.mp3")
var sound2=createsound("audio/tileRemove.ogg", "audio/tileRemove.mp3") 
```

在`sound1.playclip();`其他功能中使用时，我可以播放声音

问题：

我有一个带有 ID: 的复选框`sound`。检查时，应听到声音，如果没有，则不应听到声音。

当前复选框的代码是：

```
function playSound() {
    if (document.getElementById('sound').checked){
        [something has to be added here?]
    }
} 
```

我需要在这部分添加什么才能在选中而不是未选中时听到声音？我似乎无法让它工作。

亲切的问候，莫里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:21:04.127

没关系，我解决了。我想太多了，可以很简单地做到：

```
if (document.getElementById('sound').checked){
                sound1.playclip(); 
            } 
```

这有效

# mysql - 从多个表中选择（大数据）

> ID：10371633
> 
> 赞同：1
> 
> 时间：2012-04-29T11:10:47.683
> 
> 标签：mysql, union, large-data

我有四个结构相同的表（id、var1、var2）

var1中的表1只有一个单词（150000+条记录）

var1中的表2有两个词（50000+条记录）

var1 中的表 3 有 3 个单词（50000+ 条记录）

var1 中的表 4 有四个或更多单词（30000+ 条记录）

搜索它们的最佳方法是什么？

我搜索如下：

```
SELECT * FROM (
(SELECT * FROM table1 WHERE var1 LIKE '".$searchWord."' ORDER BY var1)
UNION
(SELECT * FROM table2 WHERE var1 LIKE '".$searchWord." %' OR var1 LIKE '% ".$searchWord." %' OR var1 LIKE '% ".$searchWord."' ORDER BY var1)
UNION
(SELECT * FROM table3 WHERE var1 LIKE '".$searchWord." %' OR var1 LIKE '% ".$searchWord." %' OR var1 LIKE '% ".$searchWord."' ORDER BY var1)
UNION
(SELECT * FROM table4 WHERE var1 LIKE '".$searchWord." %' OR var1 LIKE '% ".$searchWord." %' OR var1 LIKE '% ".$searchWord."' ORDER BY var1)
) AS WHOLEDATABASE ORDER BY var1
"); 
```

我这样做是因为首先我想用一个词显示结果，然后是两个词，然后是三个词，然后是其他词。

有没有其他方法可以做到这一点，因为这种方式非常慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:21:34.827

你可以组合结果然后使用长度（var1）排序，联合有点麻烦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:51:26.623

您是否尝试过使用 concat？如果所有搜索和订单字段都被索引，我认为 concat 不会花费任何额外的时间。

例子：

```
SELECT * 
FROM table1, table2, table3, table4 
WHERE concat_ws(' ',table1.var1, table2.var1, table3.var1, table4.var1) like '%"'.$searchWord.'"%' 
ORDER BY table1.id, table2.id, table3.id, table4.id; 
```

这个查询的唯一问题是，它会改变表的输出结构。

# php - sql 从每只猫中选择最新的 2 个

> ID：10371634
> 
> 赞同：0
> 
> 时间：2012-04-29T11:10:53.647
> 
> 标签：php, sql, subquery

我想获得每个类别的两个最新项目。

我已经阅读了一些关于 stackoverflow 建议的文章并找到了一些解决方案，但大多数工作基于日期，我需要基于 ID。

我的表结构“项目”

```
item_ID (int/unique), category_ID (int), (some more fields title, desc, etc.) 
```

我正在使用的查询

```
 SELECT *
FROM items
WHERE (
   select count(*) from items as i
   where i.category_ID = items.category_ID AND i.item_ID <> items.item_ID
) <= 1 
```

无论我做什么，每个类别都不会给我 1 个结果。有任何想法吗？

更新日期：2012 年 5 月 1 日

# php - 如果 URL 包含一些包含 .php 文件的内容，那么什么都不做？

> ID：10371639
> 
> 赞同：1
> 
> 时间：2012-04-29T11:11:29.100
> 
> 标签：php, caching, if-statement

我希望在站点的主脚本之上包含[智能 PHP 缓存层。](http://technologies.whitewhale.net/cache/ "智能缓存")它工作得很好，但智能缓存也会缓存一些不应该被缓存的页面（搜索结果、管理区域......）。

我查看了[Smart PHP Cache source code](http://technologies.whitewhale.net/cache/smart_cache.txt "智能PHP缓存源代码")，我不确定是否有某种方法可以配置哪些页面应该从缓存中排除，或者如何配置它。

所以，我需要的是一些 php 代码，它们将被插入到站点的主脚本顶部，在智能 PHP 缓存代码之前，它将首先检查页面是否包含例如：

“/搜索/”

“/行政/”

“/最新的/”

“/其他实时页面/实时页面.php”

然后，如果上面示例中的某些内容在 URL 中什么都不做，（不包含 smart_cache.php 并继续使用其他正常代码，因此用户可以看到实时结果），否则如果上面没有包含 smart_cache.php .

或者。

如果您有更好的知识在[智能 PHP 缓存](http://technologies.whitewhale.net/cache/ "智能 PHP 缓存")中进行修改，以便能够从缓存机制中排除一些 URL（或者告诉我如何做到这一点，因为看起来智能 PHP 缓存的配置中有一些东西可以绕过缓存层，但我不知道如何使用它。

最好的祝福。

* * *

## 问题更新：

感谢您的回答。它工作得很好，我只是想问你能不能稍微改变一下代码来做到这一点：

如果“pos1”（如果 URL 包含“/search”），则比什么都没有，false，就像现在一样

如果“pos2”（如果 URL 包含“/admin”），则比没有，假，就像现在一样

**如果“pos3”（如果 URL 包含“/latest”）包含文件“smart_cache_latest.php”**

之后就像现在一样，为任何其他 URL 包含“smart_cache.php”。

因此，实际上只有带有**"/latest"**的 URL 的变化，也应该通过包含 "smart_cache_latest.php" 来缓存。

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:21:09.430

```
$currenturl = $_SERVER['REQUEST_URI'];
$pos1 = strpos($currenturl, "/search");
$pos2 = strpos($currenturl, "/admin");
$pos3 = strpos($currenturl, "/latest");

if ($pos1 === false && $pos2 === false){
    require '/path/to/smart_cache.php';
} elseif($pos3 == true) {
    require '/path/to/smart_cache_latest.php';        
} 
```

# zooming - Javafx 2 图表缩放

> ID：10371640
> 
> 赞同：3
> 
> 时间：2012-04-29T11:11:29.553
> 
> 标签：zooming, javafx-2

当我选择图表区域时，我的缩放会得到一个“小开关”。例如，如果从刻度 3 到刻度 6 进行选择，我将获得下限：3.67 和上限 6.74。

如何解决？

任何帮助都非常感谢。

```
package testjavafxzoom;

import javafx.application.Application;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.event.EventHandler;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.stage.Stage;
import javafx.scene.Scene;
import javafx.scene.chart.LineChart;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.LineTo;
import javafx.scene.shape.MoveTo;
import javafx.scene.shape.Path;
import javafx.scene.shape.Rectangle;

public class Zoom01 extends Application {

Path path;//Add path for freehand
BorderPane pane;
Rectangle rect;
SimpleDoubleProperty rectinitX = new SimpleDoubleProperty();
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty();
SimpleDoubleProperty rectX = new SimpleDoubleProperty();
SimpleDoubleProperty rectY = new SimpleDoubleProperty();

@Override
public void start(Stage stage) {

    System.out.println("Java Version             : " + com.sun.javafx.runtime.VersionInfo.getVersion());
    System.out.println("Java getHudsonBuildNumber: " + com.sun.javafx.runtime.VersionInfo.getHudsonBuildNumber());
    System.out.println("Java getReleaseMilestone : " + com.sun.javafx.runtime.VersionInfo.getReleaseMilestone());
    System.out.println("Java getRuntimeVersion   : " + com.sun.javafx.runtime.VersionInfo.getRuntimeVersion());

    stage.setTitle("Lines plot");

    //final CategoryAxis xAxis = new CategoryAxis();
    final NumberAxis xAxis = new NumberAxis(1, 12, 1);
    final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005);

    yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {

        @Override
        public String toString(Number object) {
            return String.format("%7.5f", object);
        }
    });

    //final LineChart<String, Number> lineChart = new LineChart<String, Number>(xAxis, yAxis);
    final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis);

    //lineChart.setTitle("Stock quotes");
    lineChart.setCreateSymbols(false);
    lineChart.setAlternativeRowFillVisible(false);
    lineChart.setAnimated(true);

    XYChart.Series series1 = new XYChart.Series();
    //series1.setName("Stock 1");
    series1.getData().add(new XYChart.Data(1, 0.53185));
    series1.getData().add(new XYChart.Data(2, 0.532235));
    series1.getData().add(new XYChart.Data(3, 0.53234));
    series1.getData().add(new XYChart.Data(4, 0.538765));
    series1.getData().add(new XYChart.Data(5, 0.53442));
    series1.getData().add(new XYChart.Data(6, 0.534658));
    series1.getData().add(new XYChart.Data(7, 0.53023));
    series1.getData().add(new XYChart.Data(8, 0.53001));
    series1.getData().add(new XYChart.Data(9, 0.53589));
    series1.getData().add(new XYChart.Data(10, 0.53476));
    series1.getData().add(new XYChart.Data(11, 0.530123));
    series1.getData().add(new XYChart.Data(12, 0.53035));

    pane = new BorderPane();
    pane.setCenter(lineChart);
    //Scene scene = new Scene(lineChart, 800, 600);
    Scene scene = new Scene(pane, 800, 600);
    lineChart.getData().addAll(series1);

    stage.setScene(scene);        

    path = new Path();
    path.setStrokeWidth(1);
    path.setStroke(Color.BLACK);

    scene.setOnMouseClicked(mouseHandler);
    scene.setOnMouseDragged(mouseHandler);
    scene.setOnMouseEntered(mouseHandler);
    scene.setOnMouseExited(mouseHandler);
    scene.setOnMouseMoved(mouseHandler);
    scene.setOnMousePressed(mouseHandler);
    scene.setOnMouseReleased(mouseHandler);

    //root.getChildren().add(lineChart);
    pane.getChildren().add(path);

    rect = new Rectangle();
    rect.setFill(Color.web("blue", 0.1));
    rect.setStroke(Color.BLUE);
    rect.setStrokeDashOffset(50);

    rect.widthProperty().bind(rectX.subtract(rectinitX));
    rect.heightProperty().bind(rectY.subtract(rectinitY));
    pane.getChildren().add(rect);

    stage.show();
}
EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {

    @Override
    public void handle(MouseEvent mouseEvent) {

        if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {
            rect.setX(mouseEvent.getX());
            rect.setY(mouseEvent.getY());
            rectinitX.set(mouseEvent.getX());
            rectinitY.set(mouseEvent.getY());
        } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED) {
            rectX.set(mouseEvent.getX());
            rectY.set(mouseEvent.getY());
        } else if (mouseEvent.getEventType() == MouseEvent.MOUSE_RELEASED) {

            System.out.println("Zoom bounds : [" + rectinitX.get()+", "+rectinitY.get()+"] ["+ rectX.get()+", "+rectY.get()+"]");                
            System.out.println("TODO: Determine bound ranges according these zoom coordinates.\n");

            // TODO: Determine bound ranges according this zoom coordinates.
            //LineChart<String, Number> lineChart = (LineChart<String, Number>) pane.getCenter();
            LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter();

            // Zoom in Y-axis by changing bound range.
            NumberAxis yAxis = (NumberAxis) lineChart.getYAxis();
            yAxis.setLowerBound(0.532);
            yAxis.setUpperBound(0.538);

            // Zoom in X-axis by removing first and last data values.
            // Note: Maybe better if categoryaxis is replaced by numberaxis then setting the
            // LowerBound and UpperBound will be avaliable.
            /*
            XYChart.Series series1 = lineChart.getData().get(0);
            if (!series1.getData().isEmpty()) {
                series1.getData().remove(0);
                series1.getData().remove(series1.getData().size() - 1);
            }
            */

            NumberAxis xAxis = (NumberAxis) lineChart.getXAxis();
            System.out.println("(a) xAxis.getLowerBound() "+xAxis.getLowerBound()+" "+xAxis.getUpperBound());
            double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound());
            double newXlower, newXupper;
            newXlower = (rectinitX.get()/Tgap)+xAxis.getLowerBound();

            newXupper = (rectX.get()/Tgap)+xAxis.getLowerBound();
            if (newXupper > xAxis.getUpperBound())
                newXupper = xAxis.getUpperBound();

            xAxis.setLowerBound( newXlower );
            xAxis.setUpperBound( newXupper );

            System.out.println("(b) xAxis.getLowerBound() "+xAxis.getLowerBound()+" "+xAxis.getUpperBound());

            // Hide the rectangle
            rectX.set(0);
            rectY.set(0);
        }
    }
   };

   public static void main(String[] args) {
    launch(args);
   }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T14:24:55.507

您将鼠标事件附加到场景。所以`mouseEvent.getX()`给你相对于场景的坐标。但是您的公式将它们用作相对于`xAxis`节点的坐标。您需要考虑`xAxis`现场的位置。

介绍下一个方法：

```
// summ layout shift against parent until we ascend to scene
private static double getSceneShift(Node node) {
    double shift = 0;
    do { 
        shift += node.getLayoutX(); 
        node = node.getParent();
    } while (node != null);
    return shift;
} 
```

并相应地更改您的计算：

```
 double xAxisShift = getSceneShift(xAxis);
        newXlower = ((rectinitX.get() - xAxisShift) / Tgap) + xAxis.getLowerBound();
        newXupper = ((rectX.get() - xAxisShift) / Tgap) + xAxis.getLowerBound(); 
```

# objective-c - 使用未声明的标识符“单元格”

> ID：10371645
> 
> 赞同：-3
> 
> 时间：2012-04-29T11:12:13.983
> 
> 标签：objective-c, ios, json, cocoa-touch

我正在使用自定义表格单元，但是在我的 uilabel 中解析 JSON 时遇到问题，我正在使用下面的代码，这很好用。在我的 UILabel 中放一些东西我很简单

```
cell.One.text = @"xx"; 
```

/

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CustomCellIdentifier = @"CustomCellIdentifier ";
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];
    if (cell == nil) { 
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell"
                                                     owner:self options:nil];
        for (id oneObject in nib) if ([oneObject isKindOfClass:[CustomCell class]])
            cell = (CustomCell *)oneObject;
    } 

    return cell;    

} 
```

但是当我尝试解析我通常会做的事情时

```
- (void)fetchedData:(NSData *)responseData {

    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                         options:kNilOptions 
                                                           error:&error];
    NSArray* lastgame = [json objectForKey:@"items"]; 

    NSDictionary* game = [lastgame objectAtIndex:0];

    cell.One.text = [NSString stringWithFormat:@"%@",
                         [strijd objectForKey:@"One"]
                         ];
} 
```

但是在这一行我收到一个错误：（使用未声明的标识符'cell'）现在有人如何修复thix？

```
cell.One.text = [NSString stringWithFormat:@"%@",
                             [strijd objectForKey:@"One"]
                             ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:19:33.457

```
cell.One.text = [NSString stringWithFormat:@"%@",
                         [strijd objectForKey:@"One"]
                         ]; 
```

您的单元格未在此方法中声明，您必须在`cellForRowAtIndexPath:`

在您声明您的单元格后：`CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];`

# c - 为什么需要显式的 `-lm` 编译器选项

> ID：10371647
> 
> 赞同：15
> 
> 时间：2012-04-29T11:12:41.370
> 
> 标签：c, gcc, floating-point

> **可能重复：**
> [gcc：为什么需要 -lm 标志来链接数学库？](https://stackoverflow.com/questions/4606301/gcc-why-the-lm-flag-is-needed-to-link-the-math-library)

一般来说，为了使用除包含头文件之外的任何数学函数，`math.h`您必须使用链接器选项 -lm 进行链接。`-l`这意味着搜索特定库的链接器选项`libm.o`。

我的问题是

为什么 GCC 默认不包含这个库？是因为该库大量使用数学协处理器并且需要添加额外的代码来初始化浮点初始化（我可能在这里使用了错误的术语）？

**笔记**

[我刚刚查看了链接http://stackoverflow.com](https://stackoverflow.com/questions/4606301/gcc-why-the-lm-flag-is-needed-to-link-the-math-library)中提到的所有答案。这对我来说没有多大意义。归因于三个基本原因

1.  标准库保证可用。显式链接其他 posix 库（如 pthread）是有意义的，但为什么我们必须为标准库进行显式链接。甚至历史原因也不是很清楚。
2.  为什么 libm 与 libc 分离？
3.  为什么我们仍然在最近的 gcc 编译器中继承这些行为？它实现了怎样的简单性？这是我测试的，没有 libm 和 libm。没有 libm 的那个，我写了我自己的 Pow 版本

这是示例

```
abhibhat@abhibhat-VirtualBox:~/Projects/GIPL6_2$ ls -1 Test_*|xargs -I{} sh -c "echo {} && echo "-----------------" && cat {}"
Test_withlibm.c
-----------------
#include<stdio.h>
#include<math.h>
int main() {
    int i=20;
    double output1=pow(2.618033988749895,i);
    return 0;
    }
Test_withoutlibm.c
-----------------
#include<stdio.h>
#include<math.h>
double Pow(double _X, int _Y)  {
    double _Z = 1;
    for (; _Y; _X *= _X) {
    if (_Y & 1) _Z *= _X;
    _Y >>= 1;
    }
    return _Z; 
    }
int main() {
    int i=20;
    double output1=Pow(2.618033988749895,i);
    return 0;
    }
abhibhat@abhibhat-VirtualBox:~/Projects/GIPL6_2$ gcc Test_withlibm.c -lm -o Main_withlibm.o
abhibhat@abhibhat-VirtualBox:~/Projects/GIPL6_2$ gcc Test_withoutlibm.c -o Main_withoutlibm.o
abhibhat@abhibhat-VirtualBox:~/Projects/GIPL6_2$ objdump -d Main_withoutlibm.o|wc -l
261
abhibhat@abhibhat-VirtualBox:~/Projects/GIPL6_2$ objdump -d Main_withlibm.o|wc -l
241 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T12:58:28.450

这是为了适应无法或不需要浮点数学的系统（主要是嵌入式）。这确实有点历史，但不要忘记，`gcc`大多数其他 C 编译器都是在 386SX 被认为是高性能处理器的时候编写的。

举个例子，当我还在嵌入式计算领域工作时，我们使用标准编译器（Microsoft 和 Borland）为我们的处理器（Z80、80186 和 68030）生成代码。如果编译器默认链接到数学库，我们就会遇到麻烦，因为我们的系统都没有浮点功能，甚至不需要它们。

的确，30年后看起来很傻，但当时的理由是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:24:26.197

您可能需要许多库，而`libm`这只是其中之一。
对于其中的每一个，您可能会问为什么默认情况下不包含它。

也许`libm`比其他人更有用，但是，C 更喜欢保持简单——你想要一个库，用`-l`它来使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T12:18:53.693

**历史原因**

原因`libc`和`libm`分开并且您必须`-lm`在命令行上指定是历史原因，因为`libm`Fortran 编译器也使用了 。

# ipad - 适用于 iPad 的 adwhirl house 广告

> ID：10371649
> 
> 赞同：0
> 
> 时间：2012-04-29T11:13:21.580
> 
> 标签：ipad, adwhirl

我有一个显示广告的应用程序，为此我使用了 adWhirl。但我的应用程序是通用的。我发现了如何在那里展示 iAd 和 Admob，但我还需要展示自家广告。我正在寻找一种使用 adWhirl 为 iPad 展示自家广告的解决方案。有人知道如何管理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:57:48.243

AdWhirl 仅支持使用 320x50 格式的中介。但是，AdMob 最近推出了可以解决此用例的[中介解决方案。](https://support.google.com/admob/bin/answer.py?hl=en&answer=2413211&topic=2403413&ctx=topic)您可以使用平板电脑大小的格式以及自家广告进行调解。

# c# - 数据结构设计

> ID：10371651
> 
> 赞同：0
> 
> 时间：2012-04-29T11:13:46.683
> 
> 标签：c#, data-structures

我有一个包含大量嵌套类的大型基础架构，我正在寻找正确的设计模式。

我将解释：我有一个名为“Title”的类和名为 Item A Title 的类包含不同的项目，每个项目包含不同的数据

您可以在示意图中看到 Title 还包含 ItemList，其中包含更多项目。每个项目都可以包含项目。

我正在添加基础架构的示意图，它看起来像一棵非二叉树 ![在此处输入图像描述](../Images/92d0ef124617a8698a0130b8777ce59e.png)

我正在为这个对象寻找最好的数据结构，

要求：

1.  使用节点 ID 和树节点，我将能够快速找到节点
2.  良好的代码可维护性
3.  可以从平地切换到树，从树到平地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:28:46.163

无论层次结构如何，您的问题似乎都要求快速访问节点的 ID 值。在这种情况下，您可能最好（正如 Daniel Gabriel 在评论中建议的那样）创建一个为“搜索”ID 的平面列表而优化的平面列表，因为您的查找操作不关心层次结构。仅仅因为你的对象在树结构中并不意味着你不能在另一个结构中索引它们。字典应该非常擅长 - 键可以是整数（或任何您的节点 ID），值可以引用节点对象实例。你只需要记住保持这个结构与你的树结构同步。删除节点时从字典中删除键，并在添加节点时将它们添加到字典中（如果结构是动态的）。

这满足了您的要求#1，可能还有#2（如果必要的话，您将索引的同步封装在同一个类中）。对于#3，我们可能需要更多信息，但如果您保持这些结构同步，您将始终可以访问这两种格式而无需转换。应该很容易。

下面是一些示例代码，演示了如何封装可以始终提供平面索引和树结构的结构：

```
class Program
{
  static void Main(string[] args)
  {
     Node<int, string> node1 = new Node<int, string>(1, "One");
     Node<int, string> node2 = new Node<int, string>(2, "Two");
     Node<int, string> node3 = new Node<int, string>(3, "Three");
     Node<int, string> node4 = new Node<int, string>(4, "Four");
     node2.Parent = node1;
     node3.Parent = node1;
     node4.Parent = node2;
     Console.WriteLine(node1.GetDump());

     Node<int, string> node5 = new Node<int, string>(5, "Five");
     // Test spliting the tree attaching it and it's subtree to another parent
     node2.Parent = node5;
     Console.WriteLine(node1.GetDump());
     Console.WriteLine(node5.GetDump());

     // Test re-attaching the detached parent as a child
     node1.Parent = node2;
     Console.WriteLine(node5.GetDump());

     // Test moving a node to another parent within the tree
     node1.Parent = node5;
     Console.WriteLine(node5.GetDump());
  }
}

/// <summary>
/// Create a tree structure whose nodes are of type T and are indexed by ID type I
/// </summary>
/// <typeparam name="I">Type of the index</typeparam>
/// <typeparam name="T">Type of the node</typeparam>
class Node<I, T>
{
  private Dictionary<I, Node<I, T>> rootIndex; // Shared flat index
  public I Id { get; private set; }
  public T Value { get; set; }
  private Node<I, T> parent;
  List<Node<I, T>> childNodes;

  public Node(I id, T value)
  {
     this.Id = id;
     this.Value = value;
     this.childNodes = new List<Node<I, T>>();
  }

  public string GetDump()
  {
     System.Text.StringBuilder sb = new StringBuilder();
     if (parent == null)
     {
        foreach (KeyValuePair<I, Node<I,T>> node in rootIndex)
        {
           sb.Append(string.Format("{0}:{1} ", node.Key, node.Value.Value));
        }
        sb.AppendLine();
     }
     sb.AppendLine(string.Format("ID={0}, Value={1}, ParentId={2}", Id, Value,
        (parent == null)?"(null)":parent.Id.ToString()));
     foreach (Node<I, T> child in childNodes)
     {
        string childDump = child.GetDump();
        foreach (string line in childDump.Split(new string[] {Environment.NewLine},
           StringSplitOptions.RemoveEmptyEntries))
        {
           sb.AppendLine("  " + line);
        }
     }
     return sb.ToString();
  }

  private void RemoveFromIndex(Dictionary<I, Node<I, T>> index)
  {
     index.Remove(Id);
     foreach(Node<I, T> node in childNodes)
        node.RemoveFromIndex(index);
  }

  private void ReplaceIndex(Dictionary<I, Node<I, T>> index)
  {
     rootIndex = index;
     rootIndex[Id] = this;
     foreach (Node<I, T> node in childNodes)
        node.ReplaceIndex(index);
  }

  public Node<I, T> Parent
  {
     get
     {
        return parent;
     }
     set
     {
        // If this node was in another tree, remove it from the other tree
        if (parent != null)
        {
           // If the tree is truly a separate tree, remove it and all nodes under
           // it from the old tree's index completely.
           if (value == null || (parent.rootIndex != value.rootIndex))
           {
              // Split the child's index from the parent's
              Dictionary<I, Node<I, T>> parentRootIndex = parent.rootIndex;
              RemoveFromIndex(parentRootIndex);
              rootIndex = new Dictionary<I, Node<I, T>>();
              ReplaceIndex(rootIndex);
           }

           // Remove it from it's old parent node's child collection
           parent.childNodes.Remove(this);
        }
        // These operations only apply to a node that is not being removed
        // from the tree
        if (value != null)
        {
           // If parent does not already have an index, create one with itself listed
           if (value.rootIndex == null)
           {
              value.rootIndex = new Dictionary<I, Node<I, T>>();
              value.rootIndex[value.Id] = value;
           }
           // If the index for the child node is separate form that of the parent
           // node, merge them as appropriate
           if (this.rootIndex != value.rootIndex)
           {
              // If this node has a complete index, merge the two tree indexes
              // into the parent's index
              if (this.rootIndex != null)
              {
                 foreach (KeyValuePair<I, Node<I, T>> node in rootIndex)
                 {
                    if (value.rootIndex.ContainsKey(node.Key))
                       throw new InvalidOperationException(string.Format(
                         "Node Id {0} in child tree already exists in the parent",
                         node.Key));
                    value.rootIndex[node.Key] = node.Value;
                 }
              }
              else
              {
                 // If this node does not have an index, it is not a tree;
                 // just add it to the parent's index.
                 if (value.rootIndex.ContainsKey(this.Id))
                    throw new InvalidOperationException(string.Format(
                    "Node Id {0} already exists in the parent's tree.", Id));
                 value.rootIndex[this.Id] = this;
              }
           }
           // Make all nodes in a tree refer to a common root index.
           this.rootIndex = value.rootIndex;
           // Attach this node to the tree via the parent's child collection.
           value.childNodes.Add(this);
        }
        // Attach this node to the tree via this node's parent property
        // (null if removing from the tree)
        this.parent = value;
     }
  }

} 
```

# javascript - SCRIPT5039：重新声明 const 属性 - IE 9 Javascript 问题

> ID：10371655
> 
> 赞同：3
> 
> 时间：2012-04-29T11:14:16.520
> 
> 标签：javascript, internet-explorer-9

我一直在努力使我的网站跨浏览器兼容。

目前，我的 javascript IE 开发人员控制台出现问题，出现以下错误：

```
SCRIPT5039: Redeclaration of const property 
banner.js, line 1 character 1 
```

这是第一行：

```
var linkTemplate = new Template('<b>Time/Date:</b> #{time} #{date} (GMT)<br /><b>Username:</b> <a href="profile.php?p=#{username}" target="main">#{username}</a> <br /><b>Inbox:</b> <a href="inbox.php" target="main">#{unread}/#{inbox}</a><br /><b>Money:</b> &#163;#{money}<br /><b>Location:</b> #{location}<br /><b>Bullets:</b> #{bullets}<br /><b>Kevlars:</b> #{kevlars}<br /><b>Rank:</b> #{rank} - #{rank_percent}%');
var username, hours, minutes, seconds, messages, unread, date, money, location, bullets, kevlars, rank, rank_percent, avatar, backup ;
var ps; 
```

如果您想查看整个 javascript： [http ://www.gbmafia.com/static/js/banner.js](http://www.gbmafia.com/static/js/banner.js)

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:25:02.753

第 2 行的变量`location`与内置变量冲突`window.location`

为该变量选择另一个名称

# fortran - FORTRAN 程序中关于 DO 循环的困惑（初级）

> ID：10371658
> 
> 赞同：0
> 
> 时间：2012-04-29T06:25:26.453
> 
> 标签：fortran

我刚开始学习编程，FORTRAN 95 是我的第一语言。[我正在尝试完成此](http://www.maths.usyd.edu.au/u/david/fplecs12.pdf)pdf 文件第 45 页底部的问题 4 i) 。作为参考，这是我的整个源代码：

```
PROGRAM PARACHUTIST
! Tabulation of parachutist's descent z and and speed zdot
! as functions of time t

 !Assign the program's associated constants

IMPLICIT NONE
  REAL z, zdot, g, U1, U2, z0, u0, t0, q0, t, x,c,s
INTEGER I

g=9.8
U1=54
U2=5
!Break z0 down a little with q0
q0=COSH(g*t0/U1)
z0=U1**2/g*LOG(q0)
u0=U1*TANH(g*t0/U1)

  !Prompt for and read in the free-fall time

  Print*, 'Input free-fall time in seconds:'
  Read*, t0

  !Print the table headings
  WRITE(*,1000)

1000 FORMAT (6X, 'TIME', 6X, 'DISTANCE', 6X, 'VELOCITY', /6X, '(SEC)', 7X, '(M)', 10X, '(M/SEC)',&
    /6X, '0.0', 10X, '0.0', 10X, '0.0' )

  !Loop covering the specified times
  t=0
! I know I'm meant to start some DO loop here, but unsure
! how to set it up. 
     ! Calculate the distance above ground
200         IF(t<=15) THEN
        x=g*t/U1
        z=U1**2/g*LOG(COSH(x))
        zdot=U1*TANH(x)
     Elseif(t>15) THEN
        x=g*(t-t0)/U2  !store re-used expressions
        c=cosh(x)
        s=sinh(x)
        z= z0 + (U2**2/g)*LOG(c+ u0/U2*s)
        zdot=U2*(U2*s+u0*c)/(U2*c+u0*s) 
     Endif

     !Print a line of table using T formats
     WRITE(*,100) t, z, zdot
100      Format(4X, F5.2, 6X, F7.2, 6X, F7.2)

     !Stop with message if landed
     If(z.GE.500) THEN
    STOP

     !If we haven't yet landed then increment t as in 
    !   problem specs
     If(t<15) then
        t=t+1

     Elseif(t.GE.15) then
        t=t+10
ENDIF
GOTO 200
300 STOP
ENDIF
  !End of the t-loop

END PROGRAM PARACHUTIST 
```

现在，我认为我已经正确分配了变量类型/值并以合适的格式打印出标题（尽管我不确定，如果您看到任何错误请告诉我），我的主要问题来自“！循环覆盖指定时间”。说实话，我对整个代码块感到非常困惑。我不太确定如何构建循环，我只在更简单的问题上完成了它们，并且无法解决这个问题。有人可以看看并给我一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T14:54:14.057

如果我没看错的话，你的程序模拟了一个跳伞者的下降 在前 15 秒，跳伞者以一个速率下降，你每秒更新一次位置和速度，15 秒后应用不同的下降速率，你更新位置和每 10 秒的速度。模拟一直持续到位置达到500，我猜那是跳伞者跳跃时到地面的距离。如果我误解了以下内容将是中度错误

一种方法，不是唯一的，也可能不是最好的，是像这样构建你的程序：

```
 ... initialise stuff ...
    t = 0
    DO
        IF (t<=15) THEN
            ...do stuff...
            t = t+1
        ELSE ! no need for a else if (t>15) here
            ...do other stuff...
            t = t+10
        END IF
        ... write stuff ...
        IF (Z>=500.0) EXIT

    END DO 
```

请注意，我在测试中使用了 EXIT 语句来终止循环， STOP 停止程序， EXIT 打破最近的封闭循环并给你机会（这在这个程序中可能不是严格必要的，但会在更多您最终将编写的复杂程序）在程序停止之前进行整理。

由于您承认自己是 Fortran 新手，因此这里还有一些不请自来的建议；

*   在程序中的一个位置收集您的格式语句。我特别不喜欢循环中语句 100 的位置。
*   如果您发现自己编写 GOTO 来实现循环，那么您做错了什么。
*   90 后的 Fortran 中几乎完全不需要数字语句标签；你写的一些东西看起来很像 FORTAN77。
*   您将旧式关系运算符（例如 .GE.）与新式（例如 >=）混合在一起。坚持一种风格，新的更好，但如果你因为一些奇怪的原因不能做到这一点，那就坚持旧的风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:07:50.693

“我要在这里开始某种循环……”

你可能想要一个 WHILE 循环。用英语会是

“而 z 小于 500 {...}”

STOP 将在循环之后。

有很多“最佳实践”，你会随着你的学习而学习。其中之一是为所有常量命名。这被称为“没有幻数”。

# php - 从大型多维数组、PHP、Facebook API 中过滤帖子

> ID：10371659
> 
> 赞同：1
> 
> 时间：2012-04-29T11:14:36.593
> 
> 标签：php, facebook-graph-api, iteration, facebook-php-sdk

我需要帮助通过 Facebook PHP SDK 返回的大型数组。我正在尝试查找用户的所有帖子，然后还要检查帖子是否包含/不包含“链接”键。我已经读到，由于复制 1MB+ 的数据来处理它，在这种大小的数组上使用 foreach 循环效率很低。我应该如何有效地遍历信息？

数组的结构是这样的，其中“x”是每个帖子的数量：

```
Array
(
    [data] => Array
        (
            [x] => Array
                (
                    [from] => Array
                        (
                            [name] => james
                        )

                    [message] => Thanks for the great interview! 
                    [link] => http://example.com/link.html
                    [description] => Description here
                    [etc] => Various other keys possible
                )
        )
) 
```

然后我当前的代码如下所示，其中 $feed 是来自 Facebook API 的数组：

```
for ($x=0, $y=0; $x<=1000, $y<=19; $x++) {

    if (array_key_exists('james', $feed['data'][$x]['from']['name'])) {

        if (!array_key_exists('link', $feed['data'][$x])) {

            echo "<div>" . $feed['data'][$x]['message'] . "<hr>" . $feed['data'][$x]['description'] . "</div>";

            $y++;
        };

    };

}; 
```

我已经阅读了各种迭代器，但我不知道该使用哪个！希望你能帮助我，干杯，乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:01:02.573

您是正确的，`foreach`因为在迭代大型数组时可能会很慢，因为默认情况下它使用值的*副本*，就像您提到的那样，复制会消耗内存并需要一些时间。

但是，使用 foreach 的另一种方法是*通过引用*，它不会创建副本。它适用于原始值。这意味着无论数组大小，它都不会再次放入内存中。[这是另一个 StackOverflow 用户共享](https://stackoverflow.com/a/7787283/468592)的*foreach 引用*示例：

```
$a = array('hello', 'world');
$asRef =& $a;
$ontime = 0;
foreach($asRef as $i => $v)
{
   if (!$ontime++) $a = array('hash', 'the cat');
   echo " $i: $v\n";
} 
```

您可以选择使用 SPL 中的[ArrayIterator](http://php.net/manual/en/class.arrayiterator.php)，它是用 C 语言编写的，速度非常快。只是一个如何工作的简单示例：

```
// This would be your large facebook array
$big_array = array(1,2,3,...,10000,10001);

// Get the iterator object
$array_iterator = new ArrayIterator($big_array);

foreach($array_iterator as $item)
{
   //Do something with $item here
} 
```

我没有做任何基准测试，但我想通过引用传递数组并使用 ArrayIterator 可能是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T12:20:20.907

谈到 foreach 性能并实际上使用 array_key_exists 是没有意义的，恕我直言，这要好得多

```
foreach($feed['data'] as $post){
           if($post['from']['name']==='youruser'){
            //has user
           }
          if(isset($post['link'])){
            //has link
          }
} 
```

把它放在纤毛的方式，它应该更快。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T14:47:35.220

foreach 并不总是复制。当它复制时，它只复制被迭代的直接数据结构；它不会复制任何值。例如，如果你做了

```
foreach ($arr['data'] as $k => $v) .... 
```

如果有 100 个子元素（您将一个缩写为 [x] ），那么它将创建一个数组，复制这 100 个键，但不会复制键指向的值，这些值是子数组/树。在内部它只存储一个指针并让它指向子数组的内存地址，而不需要复制。

我认为您白做大事，因为实际复制的数据量很少。foreach 几乎总是非常非常快......

如果您想一睹为快，请查看循环前后的[memory_get_usage](http://www.php.net/memory_get_usage) () 和[memory_get_peak_usage ()。](http://www.php.net/memory_get_peak_usage)

# iphone - 体系结构 i386 的未定义符号：“_PerformXMLXPathQuery”

> ID：10371670
> 
> 赞同：0
> 
> 时间：2012-04-29T11:16:10.423
> 
> 标签：iphone, ios

我查看了所有其他具有类似标题的解决方案，但由于某种原因，这些解决方案都不起作用......希望有人能提供帮助！

架构 i386 的未定义符号：“_PerformXMLXPathQuery”，引用自：WeatherForecast.o ld 中的 -[WeatherForecast connectionDidFinishLoading:]：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 到见调用）

“_PerformXMLXPathQuery”，引用自：WeatherForecast.o ld 中的 -[WeatherForecast connectionDidFinishLoading:]：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我是iOS新手，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:19:00.423

似乎您正在使用设备（ARM）库为模拟器（i386）编译。为设备编译并在其上运行，或者获取库的 i386 版本并在模拟器上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:43:36.203

对于那些需要它的人来说，问题是我的 XPathQuery.m 文件不在 Complied Sources 列表中。就这么简单！

只是发布这个以供将来参考！希望它可以帮助某人！

# assembly - IFN A, 0x10 如何在 DCPU 16 的原始规范中转换为 0xc00d

> ID：10371672
> 
> 赞同：0
> 
> 时间：2012-04-29T11:17:05.297
> 
> 标签：assembly, dcpu-16

我正在尝试为 Notch 的 DCPU-16 规范编写汇编程序。此 CPU 的原始规格可在[此处](http://dcpu.com/doc/dcpu-16.txt)找到。

相关线路：

```
SET A, 0x30 ;7c01 0030 
```

...

```
IFN A, 0x10 ;c00d 
```

到目前为止，我了解说明，但对我来说，这应该至少有 2 个字长，而不仅仅是`0xc00d`

```
SET A, 0x10 
```

将是`7c01 0010`。所以

```
IFN A, 0x10 
```

应该`7c0d 0010`不是吗？

为什么 , 中的`b`参数`IFN`不会导致指令需要 [PC++] 或 nextword 组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T12:07:19.590

```
 0x1f: next word (literal)
0x20-0x3f: literal value 0x00-0x1f (literal) 
```

这是您所询问的规范的核心部分。可以在操作码中编码 0 到 31 (0x1f) 之间的文字值。如果值太大，那么字面值需要一个额外的字，用 0x1f 表示。

所以`IFN A, 0x10`只需要一个字，因为 0x10 字面量小到可以放入操作码中。16 位操作码分为 6 位用于 b 操作数、6 位用于 a 操作数和 4 位用于指令。所以 b = 0x30 (0x20+literal), a = 0x00 (寄存器 A), instr = 0xd (IFN)。把它们放在一起`opcode = (b << 10) | (a << 4) | instr;`，你会得到 0xc00d。

# ruby-on-rails - 如何在 Rails 2 上的 ruby 中检查对象是否为空？

> ID：10371673
> 
> 赞同：57
> 
> 时间：2012-04-29T11:17:25.403
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2

我想检查我的对象何时`@objectname`不等于 null 以显示`@objectname`else 的值以显示未找到任何值。

我试过这个：

```
<% if (@objectname != null) then %> 
```

但我遇到了一个错误。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-29T11:27:30.017

它`nil`在 Ruby 中，而不是`null`. 而且只要说`if @objectname`测试它是否不为零就足够了。没有`then`。您可以在此处找到有关`if`语法的更多信息：

[http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Control_Structures#if](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Control_Structures#if)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-29T11:34:45.387

您可以通过调用 present? 来检查对象是否为 nil（null）？还是空白？.

```
@object.present? 
```

如果项目是空字符串或 nil ，这将返回 false 。

或者你可以使用

```
@object.blank? 
```

这和现在一样吗？一声巨响，如果您不喜欢“除非”，您可以使用它。这将为空字符串或 nil 返回 true 。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-05-23T21:14:40.197

现在使用 Ruby 2.3，您可以在访问值的同时使用`&.`运算符（'lonely operator'）进行检查。`nil`

```
@person&.spouse&.name 
```

[https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#Other_operators](https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#Other_operators)

* * *

改为使用`#try`，这样您就不必继续检查`nil`.

[http://api.rubyonrails.org/classes/Object.html#method-i-try](http://api.rubyonrails.org/classes/Object.html#method-i-try)

```
@person.try(:spouse).try(:name) 
```

代替

```
@person.spouse.name if @person && @person.spouse 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-29T14:33:02.413

在您的示例中，您可以简单地替换`null`为 `nil，它会正常工作。

```
require 'erb'

template = <<EOS
<% if (@objectname != nil) then %>
  @objectname is not nil
<% else %>
  @objectname is nil
<% end %>
EOS

@objectname = nil
ERB.new(template, nil, '>').result # => "  @objectname is nil\n"

@objectname = 'some name'
ERB.new(template, nil, '>').result # => "  @objectname is not nil\n" 
```

与其他海报所说的相反，您可以在上面看到`then`在 Ruby 中运行良好。这不常见，但没关系。

`#blank?`并`#present?`有其他含义。具体来说，如果对象响应`#empty?`，他们将检查它是否为空。如果您访问[http://api.rubyonrails.org/](http://api.rubyonrails.org/)并搜索“空白？”，您将看到它定义在哪些对象上以及它是如何工作的。[查看Object](http://api.rubyonrails.org/classes/Object.html#method-i-blank-3F)的定义，我们看到*“如果对象为 false、空或空白字符串，则该对象为空白。例如，“”、“ ”、nil、[] 和 {} 都是空白的。”* 你应该确保这是你想要的。

此外，nil 被认为是假的，除了假和 nil 之外的任何东西都被认为是真。这意味着您可以直接将对象放在 if 语句中，因此编写上述内容的更规范方式是

```
require 'erb'

template = <<EOS
<% if @objectname %>
  @objectname is not nil
<% else %>
  @objectname is nil
<% end %>
EOS

@objectname = nil
ERB.new(template, nil, '>').result # => "  @objectname is nil\n"

@objectname = 'some name'
ERB.new(template, nil, '>').result # => "  @objectname is not nil\n" 
```

如果您明确需要检查`nil`而不是`false`，则可以使用该`#nil?`方法，对于该方法，nil 是唯一会导致 this 返回 true 的对象。

```
nil.nil?          # => true
false.nil?        # => false
Object.new.nil?   # => false 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-08-08T05:36:53.713

您可以使用简单的 not 标志来验证这一点。例子

```
if !@objectname 
```

如果 @objectname 为 nil，这将返回 true。您不应该使用点运算符或 nil 值，否则它会抛出

> *** NoMethodError 异常：未定义的方法 `isNil?' 对于零：NilClass

理想的 nil 检查如下：

```
!@objectname || @objectname.nil? || @objectname.empty? 
```

# python - 在 python 二维数组中排列值

> ID：10371675
> 
> 赞同：1
> 
> 时间：2012-04-29T11:17:54.310
> 
> 标签：python

我是 python 新手，我遇到了一个我无法解决的问题。

我有以下二维数组：

```
valuearray = [['A', '21', '45'], ['A', '12', '23'], 
              ['A', '54', '21'], ['A', '15', '54'], 
              ['B', '23', '53'], ['B', '34', '53'], 
              ['B', '32', '54'], ['B', '24', '13'], 
              ['C', '31', '43'], ['C', '42', '54'], 
              ['C', '35', '54'], ['C', '12', '11']]

A  21 45
A  12 23
A  54 21
A  15 54
B  23 53
B  34 53
B  32 54
B  24 13
C  31 43
C  42 54
C  35 54
C  12 11 
```

我需要从这个数组生成另一个数组，该数组具有唯一值，每个`valuearray[0]`的最大值 和最小值`valuearray[1``valuearray[0]``valuearray[2]``valuearray[0]`

结果将是：

```
resarray[]

    A  54 21
    B  34 13
    C  42 11 
```

***编辑：很抱歉没有展示我尝试过的内容***

```
 uniquenames = []
    un = []
    for i in range(len(valuearray)):
            un.append(valuearray[i][0])
    uniquenames=uniq(un)

test = []
for ci in range(len(valuearray)):
    for gn in range(len(uniquenames)):
        if(valuearray[ci][0] == uniquenames[gn]):
                      # i don't know what to do here
                      i tried append(valuearray[ci][0] , max(valuearray[ci][1]),min( valuearray[ci][2])) 
```

但 append 只取一个参数，所以我不知道如何继续。

uniq 是一个函数，它为我提供列表中的唯一值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T12:12:02.497

[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)我们可以用and很容易地做到这一点[`zip()`](http://docs.python.org/library/functions.html#zip)：

```
data = [
    ['A', '21', '45'],
    ['A', '12', '23'],
    ['A', '54', '21'],
    ['A', '15', '54'],
    ['B', '23', '53'],
    ['B', '34', '53'],
    ['B', '32', '54'],
    ['B', '24', '13'],
    ['C', '31', '43'],
    ['C', '42', '54'],
    ['C', '35', '54'],
    ['C', '12', '11']
]

from itertools import groupby
from operator import itemgetter

for name, values in groupby(data, itemgetter(0)):
    _, first, second = zip(*values)
    print(name, max(first), min(second)) 
```

我们在这里所做的是使用`groupby()`按第一项对列表项进行分组。这给了我们三个列表 - 一个以 A 开头的记录列表，然后是 B 的列表，然后是 C。还值得注意的是，`groupby()`不需要对列表进行排序。

`zip()`然后，我们通过使用将三元组列表中的值解压缩到三个单值列表中来从这些列表中提取值。我们丢弃第一列，因为它只是相关的 A、B 或 C，然后取其他列的最大值和最小值以获得您想要的值。

这给了我们：

```
A 54 21
B 34 13
C 42 11 
```

# 编辑：

如果您将值作为文本，那么您可以使用[列表推导](https://www.youtube.com/watch?v=t85uBptTDYY)并[`str.split()`](http://docs.python.org/library/stdtypes.html#str.split)从中列出：

```
data = """\
A  21 45
A  12 23
A  54 21
A  15 54
B  23 53
B  34 53
B  32 54
B  24 13
C  31 43
C  42 54
C  35 54
C  12 11\
"""

data = [value.split() for value in data.split("\n")] 
```

# 另一个编辑：

根据聊天，您可以丢弃额外的列，如下所示：

Python 3.x：

```
for name, values in groupby(data, itemgetter(0)):
    _, first, second, *_ = zip(*values)
    print(name, max(first), min(second)) 
```

Python 2.x：

```
for name, values in groupby(data, itemgetter(0)):
    first, second = zip(*values)[1:3]
    print name, max(first), min(second) 
```

# 并使输出成为列表，而不是打印值：

```
def max_min_by_group(group):
    for name, values in group:
        _, first, second, *_ = zip(*values)
        yield [name, max(first), min(second)]

new = [item for item in max_min_by_group(groupby(data, itemgetter(0)))] 
```

我们简单地使用一个列表推导和一个生成器（我们可以在一大行中做到这一点，但它会变得笨拙且不可读）。这给了我们：

```
[['A', '54', '21'], ['B', '34', '13'], ['C', '42', '11']] 
```

# linux - 当一个人想要编写工具集时，将标头放入 /usr/include 并将“外国/用户”创建的代码放入 /usr/local/lib 是标准做法吗？

> ID：10371676
> 
> 赞同：0
> 
> 时间：2012-04-29T11:18:05.937
> 
> 标签：linux, gcc, code-organization

换句话说：我是否需要为我编写的每个工具构建一个静态/共享库，将该库放在默认库路径之一中，并将其标头放入默认包含路径中？

就目前而言，我在默认包含路径中有标题，还有源文件。

如果这是一个愚蠢的问题，我深表歉意，但我对这个环境是全新的，但从我的一些发行包来看，这似乎是它的完成方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:37:52.280

你应该学习[文件系统层次标准（FHS）](http://refspecs.linuxfoundation.org/fhs.shtml)。特别是关于[`/usr/local`](http://refspecs.linuxfoundation.org/FHS_2.3/fhs-2.3.html#USRLOCALLOCALHIERARCHY)层次结构的部分。即，您的构建系统应该安装

*   标题下的某处`/usr/local/include`
*   图书馆在`/usr/local/lib`
*   公共二进制文件`/usr/local/bin`
*   系统二进制文件`/usr/local/sbin`（通常只有需要管理权限的程序）
*   配置文件在`/usr/local/etc`
*   架构独立的数据`/usr/local/share`
*   手册页`/usr/local/man`

恕我直言，在创建构建系统时遵循[GNU Makefile 约定](http://www.gnu.org/prep/standards/html_node/Directory-Variables.html)是最有用的，允许您的用户以一致的方式自定义安装目录。此外，您的构建系统应该支持该[`DESTDIR`](http://www.gnu.org/prep/standards/html_node/DESTDIR.html#DESTDIR)变量，允许用户在暂存区执行安装（例如，出于打包目的）。

# jquery - 如何为新注入的 html 附加 jquery 事件处理程序？

> ID：10371677
> 
> 赞同：12
> 
> 时间：2012-04-29T11:18:08.120
> 
> 标签：jquery, event-handling

`.on()`如果尚未生成 HTML，我将如何使用？jQuery页面说

> 如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

但我不确定该怎么做。有没有办法“重新加载”事件处理程序？

所以如果我有

```
$(document).ready(function(){
    $('.test').on('click', function(){
        var id = $(this).attr('id');
        console.log("clicked" + id);
    });
generatePage();
}); 
```

generatePage() 在哪里创建了一堆 div `.test`，我将如何重新绑定`.on()`？

我知道有人问过类似的问题，但在快速搜索后我没有找到我想要的东西。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-29T11:26:12.317

使用 .on ，如下例所示。可以假设 body-tag 始终可用，因此将事件处理程序附加到 body 并将事件委托给选择器是安全的，在本例中为**.test**。

```
$(document).ready(function(){
    $('body').on('click', '.test', function(){ // Make your changes here
        var id = $(this).attr('id');
        console.log("clicked" + id);
    });

    generatePage();
}); 
```

或者如果**generatePage()**也在生成 html，head 和 body 标签使用**document**作为你的选择器。

```
$(document).ready(function(){
    $(document).on('click', '.test', function(){ // Make your changes here
        var id = $(this).attr('id');
        console.log("clicked" + id);
    });

    generatePage();
}); 
```

根据[jquery 文档](http://api.jquery.com/on/).on 接受以下参数：

```
.on( events [, selector] [, data], handler(eventObject) ) 
```

包括**选择器**描述如下：

> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最里面到最外面的元素），并为沿着该路径匹配选择器的任何元素运行处理程序。

# c++ - enum 类型不能接受 cin 命令

> ID：10371681
> 
> 赞同：4
> 
> 时间：2012-04-29T11:18:37.413
> 
> 标签：c++, enums

请看这段代码：

```
#include <iostream>
using namespace std;
int main()
{

    enum object {s,k,g};
    object o,t;

    cout << "Player One: "; cin >> o;
    cout << "Player Two: "; cin >> t;

    if (o==s && t==g) cout << "The Winner is Player One.\n";
    else if (o==k && t==s) cout << "The Winner is Player One.\n";
    else if (o==g && t==k) cout << "The Winner is Player One.\n";
    else if (o==g && t==s) cout << "The Winner is Player Two.\n";
    else if (o==s && t==k) cout << "The Winner is Player Two.\n";
    else if (o==k && t==g) cout << "The Winner is Player Two.\n";
    else cout << "No One is the Winner.\n";
        return 0;
} 
```

在编译时我会得到这个错误：`no match for 'operator>>' in 'std::cin >> o` 我正在使用代码块。那么这段代码有什么问题呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T11:21:59.973

枚举没有运算符>>()。您可以自己实现一个：

```
std::istream& operator>>( std::istream& is, object& i )
{
    int tmp ;
    if ( is >> tmp )
        i = static_cast<object>( tmp ) ;
    return is ;
} 
```

当然，如果你只是 cin 一个整数并自己转换会更容易。只想向您展示如何编写 cin >> 运算符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T11:24:52.893

您是否希望能够输入“s”、“k”或“g”并将其解析为您的枚举类型？如果是这样，您需要定义自己的流运算符，如下所示：

```
std::istream& operator>>(std::istream& is, object& obj) {
    std::string text;
    if (is >> text) {
        if (text == "s") {
            obj = s;
        }
        // TODO: else-if blocks for other values
        // TODO: else block to set the stream state to failed
    }
    return is;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-08T11:26:32.150

如果您不熟悉**运算符重载**概念并想要快速修复，只需使用：

```
scanf("%d%d", &o, &t); 
```

# struts1 - .do 扩展名如何附加在 struts 中的 URL 中？

> ID：10371683
> 
> 赞同：4
> 
> 时间：2012-04-29T11:18:54.550
> 
> 标签：struts1

我是 struts 的新手，据我所知，.do 扩展会导致 tomcat 调用动作 servlet，动作 servlet 具有调用特定动作类的资源进程对象

但是让我们假设我们有一个jsp页面

第一个.jsp

```
<%@ taglib uri="http://struts.apache.org/tags-html" prefix="s" %>
 <s:form action="myform">... 
```

当我们提交此表格时

调用 struts.config.xml 中的 action-mapping 并从中选择：

```
<action input="/first.jsp" name="actionformbean" path="/myform" scope="session"
   type="actionclass"/> 
```

每当遇到[http://....myform.do](http://....myform.do)时，告诉 action servlet 的资源进程对象调用 actionclass

但是动作映射如何与 servlet 映射相关（如 url 模式 .do 在这里给出？）

我对这个.do感到困惑，它是如何附加到url的:(

帮助请谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T11:30:42.040

Struts 的标准 Action Servlet 映射在您的 web.xml（部署描述符）中定义。它是这样的：

```
<servlet-mapping>
  <servlet-name>action</servlet-name>
  <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

servlet-name 在前面的部署描述符中定义：

```
<servlet>
  <servlet-name>action</servlet-name>
  <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
  <init-param>
     ...
  </init-param>
  <load-on-startup>2</load-on-startup>
  ...
</servlet> 
```

url-pattern 将所有以结尾的 url 绑定`.do`到 Action Servlet。Action Servlet 反过来将所有调用委托给负责的操作。

现在，有像你提到的那样的动作映射：

```
<action input="/first.jsp" name="actionformbean" path="/myform" scope="session"
   type="actionclass"/> 
```

操作映射具有指定其 URL 的路径。URL 不需要 .do 后缀，因为 Struts 已经“知道”它被调用了，否则动作映射本身就无法执行。一旦执行了指定的操作，它会默默地附加一个 .do 后缀，因为只有带有这些后缀的 URL 才会被匹配 - 否则下一个请求将会丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T03:31:18.063

> “感谢您的回复，但您已经写道，url-pattern 会将所有以 .do 结尾的 url 绑定到 action servlet。我仍然很困惑 .do 将如何附加到 url”

默认情况下`.do`，Struts Frame 工作会自动附加 （希望它是`ActionServlet`自己完成的）。如果您希望更改扩展名（例如 .abc），则应相应地修改操作值（如`action="actionsomthing.abcd"`）。

**更正表示赞赏**

# android - 为什么我无法从联系人号码中获取个人资料图片的 URI？

> ID：10371686
> 
> 赞同：0
> 
> 时间：2012-04-29T11:19:30.650
> 
> 标签：android, imageview, uri, photo, contact

我有一个自定义来电屏幕，可以当前显示来电的姓名和电话号码。如果联系人设置了个人资料图片（在您自己的手机上），则该图像应显示在我创建的 ImageView 中。任何不在手机上的号码都会显示 Android 图标。

测试代码后，无论电话号码是否存储在手机（模拟器）上，我都会得到Android图标。以下是检索来电者联系人照片的代码（如果有的话）：

```
public Uri getPhotoUri(long contactId) { //contactId takes the phone number.

    ContentResolver contentResolver = getContentResolver();

    try {
        Cursor cursor = contentResolver
            .query(ContactsContract.Data.CONTENT_URI,
                null,
                ContactsContract.Data.CONTACT_ID
                    + "="
                    + contactId
                    + " AND "

                    + ContactsContract.Data.MIMETYPE
                    + "='"
                    + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE
                    + "'", null, null);

        if (cursor != null) {
        if (!cursor.moveToFirst()) {
            return null; // no photo
        }
        } else {
        return null; // error in cursor process
        }

    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }

    Uri person = ContentUris.withAppendedId(
        ContactsContract.Contacts.CONTENT_URI, contactId);
    return Uri.withAppendedPath(person,
        ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
  } 
```

该方法调用上述方法，并将图片分配给ImageView。问题是 else 语句总是被执行：

**IncomingCallListener.getId(getID))); 是用于获取相应头像的实际电话号码。**

```
public void showContactPhoto(){

    Uri u = getPhotoUri(IncomingCallListener.getId(getID()));
    if (u != null) {    
        qcbContactPic.setImageURI(u);
        Log.d("PHOTO", "ID launched");
    } else {
        qcbContactPic.setImageResource(R.drawable.ic_launcher);
        Log.d("PHOTO", "Default launched");
    }
} 
```

有没有人知道为什么“u”仍然为空？

**注意：联系人图片存储在媒体库中。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:30:02.583

尝试这个

```
Uri uri = ContentUris.withAppendedId(
                    ContactsContract.Contacts.CONTENT_URI, longId);
            ContentResolver cr = getContentResolver();
            InputStream input = ContactsContract.Contacts
                    .openContactPhotoInputStream(cr, uri);
            if (input == null) {
                return null;
            } else
                return BitmapFactory.decodeStream(input); 
```

使用 ImageView 的 setImageBitmap() 方法。

# ruby-on-rails-3 - 在 apache 上部署 rails capistrano 后出现错误 403

> ID：10371688
> 
> 赞同：0
> 
> 时间：2012-04-29T11:19:33.267
> 
> 标签：ruby-on-rails-3, deployment

将应用程序部署到运行 apache + 乘客的 VPS。User:Group → rails:rails 部署到 /home/rails/www/appname

以下是文件的权限： [https](https://gist.github.com/2549332) ://gist.github.com/2549332 以下是用户组：[https ://gist.github.com/2549336](https://gist.github.com/2549336)

但是在尝试请求应用程序时，我继续收到 403 错误。访问日志只是 sais Permission denied for /，没有别的。

可能是什么问题以及如何解决它。运行 Fedora 14 的操作系统。

**更新 1**

这是虚拟主机配置： [https ://gist.github.com/2550383](https://gist.github.com/2550383)

**更新 2**

将Passenger_enabled 添加到vhost

httpd.conf 中的乘客选项如下

```
#Passenger for RubyOnRails apps
LoadModule passenger_module /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12/ext/apache2/mod_passenger.so
PassengerRoot /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12
PassengerRuby /home/rails/.rvm/wrappers/ruby-1.9.3-p194/ruby 
```

乘客进程，由 ps 列出：

```
root     32342  0.0  0.6 213928  1948 ?        Ssl  13:38   0:00 PassengerWatchdog
root     32345  0.0  0.7 288308  2208 ?        Sl   13:38   0:00 PassengerHelperAgent
root     32347  0.0  2.9 112704  8520 ?        Sl   13:38   0:00 Passenger spawn server                                                                                                                                              
nobody   32350  0.0  1.3 147996  3788 ?        Sl   13:38   0:00 PassengerLoggingAgent 
```

**更新 3** 尝试将标准 Rails index.html 放在公用文件夹中。没有反应。尝试放置一个只有头部和标题的普通 index.html，也没有任何变化。

**更新 4**

甚至尝试注释掉 httpd.conf 中的 Passenger 行并重新启动服务器，但我仍然得到同样的错误。看起来它是 Apache 配置中的东西，但我找不到什么。

**更新 5* 重命名了 vhost.conf 以查看服务器如何在没有它的情况下运行，一切似乎都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:34:03.313

It may be that Passenger doesn't hook up to your site and Apache decides to list the `public` directory instead, and directory listing is disabled in Apache.

*   Are there Passenger processes visible in `ps`?

*   Do you have [`PassengerRoot`](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_passengerroot_lt_directory_gt) set correctly?

*   Try adding `PassengerEnabled on` to the vhost config.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T19:20:41.470

该问题已通过更改 /home/rails 目录的权限解决，以便组可以读取和执行它。谢谢大家！

# jquery - jQuery datepicker - 在初始化后更改 .ui-datepicker-calendar 的显示

> ID：10371690
> 
> 赞同：4
> 
> 时间：2012-04-29T11:19:46.607
> 
> 标签：jquery, css, datepicker

在 datepicker 已经初始化后，如何更改 ui-datepicker-calendar 类的 css 显示属性？我有一个带有可选复选框的 html 表单，我想从中切换该表的显示。我尝试了以下方法：

HTML 示例：

```
 <div class="row">
  <div class="adddescr"><label for="date">Zeitraum:</label></div>
  <div class="addinput" id="date"><input type="text" id="datefrom" name="datefrom" class="date" /> - <input type="text" id="dateto" name="dateto" class="date" /></div>
 </div>
 <div class="row">
  <div class="addinput"><label><input type="checkbox" id="dateplanedcheck" /> grobe Planung</label></div>
 </div> 
```

JS第一种方法：

```
 <script>
  $(document).ready(function() {
   $("#datefrom, #dateto").datepicker({ dateFormat: "dd.mm.yy",

   [...]

    beforeShow: function(input, inst) {
     if ($("#dateplanedcheck").is(':checked')) {
      $(".ui-datepicker-calendar").css("display", "none");
    }}
   });

   [...]

  });
 <script> 
```

调用了 beforeShow，但仍然显示日历。

JS第二种方法：

```
 <script>
  $(document).ready(function() {

  [....]

   $("#dateplanedcheck").change(function() {
    if ($(this).is(':checked')) {
      $(".ui-datepicker-calendar").css("display", "none");
    }
   });
  });
 </script> 
```

我错过了什么？这甚至适用于 jQuery 吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T11:34:06.603

因此，如果选中该复选框，您不想显示日历吗？

就`return false;`在beforeShow中。

```
$("#datefrom, #dateto").datepicker({
    dateFormat: "dd.mm.yy",
    beforeShow: function(input, inst) {
        if ($("#dateplanedcheck").prop('checked')) {
            return false;
           }

    }
}); 
```

[http://jsfiddle.net/JzbPD/](http://jsfiddle.net/JzbPD/)

**回答：**

仍然显示日历但使其不可见：

BeforeShow 无法访问表格上的 ui-datepicker-calendar，因为它还没有被渲染。应用一个类`$(inst.dpDiv).addClass('calendar-off')`，然后有这样的风格：http `.calendar-off table.ui-datepicker-calendar { display none; }`: [//jsfiddle.net/JzbPD/4](http://jsfiddle.net/JzbPD/4)

# ruby-on-rails - 如果在其他 erb 页面上，Rails3 显示 form_for 表单会给出路由错误

> ID：10371691
> 
> 赞同：0
> 
> 时间：2012-04-29T11:19:57.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我在 trackers_controller.show 的 show erb 中有一个“删除”按钮：

```
 <%= form_for :user_tracker, :url => user_tracker_path,:method => :delete do |f| %>
        <%= f.hidden_field :tracker_id, :value =>  @tracker.id %>
        <%= f.submit :save, :value => 'Remove' %>
    <% end %> 
```

这工作正常并调用 user_trackers_controller.destroy

用户模型如下所示：

```
 has_many :user_trackers
  has_many :trackers, :through => :user_trackers 
```

如果我将完全相同的按钮放在另一个 erb 中，我会收到此错误：

```
 No route matches {:action=>"show", :controller=>"user_trackers"} 
```

我有一些不同的组合，例如 :html => {:method => :delete }

如果我这样尝试

```
<% current_user.user_trackers.each do |user_tracker| %>
    <%= user_tracker.tracker %>
    <%= form_for user_tracker,  :method => :delete  do |f| %>
        <%= f.submit :delete, :value => 'Remove' %>
    <% end %> 
```

我得到相同的路由错误

以下是路线：

```
 user_trackers GET    /user_trackers(.:format)                user_trackers#index
                          POST   /user_trackers(.:format)                user_trackers#create
         new_user_tracker GET    /user_trackers/new(.:format)            user_trackers#new
        edit_user_tracker GET    /user_trackers/:id/edit(.:format)       user_trackers#edit
             user_tracker GET    /user_trackers/:id(.:format)            user_trackers#show
                          PUT    /user_trackers/:id(.:format)            user_trackers#update
                          DELETE /user_trackers/:id(.:format)            user_trackers#destroy 
```

我不明白，为什么在无关的erb中不会发现这是破坏？

**编辑：** 这似乎可行，但 html 会生成 id 和类，如 edit_user_tracker_7 以及 javascript 以使其成为删除，所以看来我仍然有问题：

```
 <%= form_for user_tracker, :url => user_tracker_path(user_tracker), :method => :delete do |f| %>
        <%= f.hidden_field :tracker_id, :value => user_tracker.tracker_id %>
        <%= f.submit :delete, :value => 'Remove from my portfolio' %>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T14:40:36.763

在第一行应该是

```
:url => user_tracker_path(@user) 
```

这不是一个错误，他只需要知道要删除谁:) 所以他需要 id（在 REST 中）。也`:method`应该在`:html`

```
:html => { :method => :delete } 
```

或者

```
html: { method: "delete" } 
```

带有 1.9+ 符号。

完整的form_for

user_tracker_path(@user), :html => {:method => :delete} 做 |f| %>

ofc 如果你的情况`@user`是 current_user 那么你必须交换它:)

抱歉错别字和英语我不是本地人:) 干杯！

# jquery - 如何在 jqGrid 中选择数据行

> ID：10371700
> 
> 赞同：5
> 
> 时间：2012-04-29T11:21:32.657
> 
> 标签：jquery, jqgrid, jqgrid-asp.net, jqgrid-formatter

我是 jqGrid 的初学者，我在页面中有 2 个 jqGrid，在 Grid1 中我有 inCustom 和 OutCustom 我希望用户在 Grid 中单击获取数据 inCustom 和 outCustom 编写此代码

```
var grid = $('#list');
grid.jqGrid({
    url: 'jQGridHandler.ashx',
    postData: { ActionPage: 'ClearanceRequest', Action: 'Fill' },
    ajaxGridOptions: { cache: false },
    loadonce: true,
    direction: "rtl",
    datatype: 'json',
    height: 600,
    width: 1000,
    colNames: ['', '', '', ' ', '', '', '', '', '',
               '', '', ' ', '', '', '', '', '', '',
               '', ' ', '', '', '', '',
               '', '', '', '', '', '', ' ',
               '', '', '', '', '', ''],
    colModel: [
        { name: 'REQUEST_ID', width: 100, sortable: true, hidden: true },
        { name: 'REQUEST_DATE', width: 50, sortable: true },
        { name: 'REQUEST_NO', width: 60, sortable: true },
        { name: 'CUSTOMER_ID', width: 100, sortable: true },
        { name: 'TRANSPORT_TYPE', width: 40, sortable: true },
        { name: 'CLEARANCE_TYPE', width: 50, sortable: true },
        { name: 'IMPORT_EXPORT', width: 30, sortable: true, editable: false,
            edittype: 'checkbox', editoptions: { value: "True:False" },
            formatter: "checkbox", formatoptions: { disabled: false }, hidden: true
        },
        { name: 'WAYBILL_NO', width: 50, sortable: true },
        { name: 'WAYBILL_OFFICE', width: 100, sortable: true },
        { name: 'MANIFEST', width: 200, sortable: true, hidden: true },
        { name: 'STORE_BILL', width: 100, sortable: true, hidden: true },
        { name: 'DIRECT_NO', width: 100, sortable: true, hidden: true },
        { name: 'STORE_DATE', width: 100, sortable: true, hidden: true },
        { name: 'INOUT_DATE', width: 50, sortable: true, hidden: true },
        { name: 'SOURCE_COUNTRY', width: 30, sortable: true, hidden: true },
        { name: 'SOURCE_CITY', width: 80, sortable: true, hidden: true },
        { name: 'DESTINATION_COUNTRY', width: 100, sortable: true, hidden: true },
        { name: 'IN_CUSTOMS', width: 200, sortable: true, hidden: true },
        { name: 'OUT_CUSTOMS', width: 100, sortable: true, hidden: true },
        { name: 'INSURER_ID', width: 100, sortable: true, hidden: true },
        { name: 'INSURANCE_NO', width: 100, sortable: true, hidden: true },
        { name: 'CLEARANCE_PERSON', width: 50, sortable: true, hidden: true },
        { name: 'PROXY_NO', width: 30, sortable: true, hidden: true },
        { name: 'FACTOR_NO', width: 80, sortable: true, hidden: true },
        { name: 'SHIP_NAME', width: 100, sortable: true, hidden: true },
        { name: 'TRAVEL_NO', width: 200, sortable: true, hidden: true },
        { name: 'INDENT_NO', width: 100, sortable: true, hidden: true },
        { name: 'COOTAG_NO', width: 100, sortable: true, hidden: true },
        { name: 'PERMIT_NO', width: 100, sortable: true, hidden: true },
        { name: 'CLEARANCE_NO', width: 50, sortable: true, hidden: true },
        { name: 'CARNETIR_NO', width: 30, sortable: true, hidden: true },
        { name: 'PURCHASE_TYPE', width: 80, sortable: true, hidden: true },
        { name: 'ALL_VALUE', width: 100, sortable: true, hidden: true },
        { name: 'FREIGHT_STATUS', width: 30, sortable: true, editable: false,
            edittype: 'checkbox', editoptions: { value: "True:False" },
            formatter: "checkbox", formatoptions: { disabled: false }, hidden: true
        },
        { name: 'COPY_ORIGINAL', width: 30, sortable: true, editable: false,
            edittype: 'checkbox', editoptions: { value: "True:False" },
            formatter: "checkbox", formatoptions: { disabled: false }, hidden: true
        },
        { name: 'REMARK', width: 100, sortable: true, hidden: true },
        { name: 'details', width: 20, sortable: false, search: false,
            formatter: function () {
                return "<span class='ui-icon ui-icon-document'></span>";
            }
        }
    ],
    gridview: true,
    rowNum: 30,
    rowList: [30, 60, 90],
    pager: '#pager',
    sortname: 'WorkOrderNo',
    viewrecords: true,
    sortorder: 'ASC',
    rownumbers: true,
    beforeSelectRow: function (rowid, e) {
        var iCol = $.jgrid.getCellIndex(e.target);
        // alert(rowid);
        console.log(rowid);
        //listItem
        console.log($.jgrid.getCellIndex(e.target));
        if ($.jgrid.getCellIndex(e.target) == 37) {
            $("#listItem").jqGrid("GridUnload");
            var gridItem = $('#listItem');
            gridItem.jqGrid({
                url: 'jQGridHandler.ashx',
                postData: { ActionPage: 'ClearanceItems', Action: 'Fill', requestId: rowid },
                ajaxGridOptions: { cache: false },
                loadonce: true,
                direction: "rtl",
                datatype: 'json',
                height: 200,
                colNames: ['', '', '', '', ' ', ' ', '',
                           '', '', 'ا', ' ', '', ' ',
                           '', '', ' ', '  ',
                           '', '', '', ' ', '  ', ' ', ' ', ''],
                colModel: [
                    { name: 'REQUEST_ID', width: 100, sortable: true },
                    { name: 'ITEM_NO', width: 200, sortable: true },
                    { name: 'GOODS_DESCRIPTION', width: 100, sortable: true },
                    { name: 'QUANTITY', width: 100, sortable: true },
                    { name: 'PACKING_TYPE', width: 100, sortable: true },
                    { name: 'GROSS_WEIGHT', width: 50, sortable: true },
                    { name: 'TARE_WEIGHT', width: 30, sortable: true },
                    { name: 'MEASUREMENT_TYPE', width: 80, sortable: true, hidden: true },
                    { name: 'GOODS_PRICE', width: 100, sortable: true, hidden: true },
                    { name: 'GOODS_CURRENCY', width: 200, sortable: true, hidden: true },
                    { name: 'GOODS_CURRENCY_RATE', width: 100, sortable: true, hidden: true },
                    { name: 'FREIGHT_PRICE', width: 100, sortable: true, hidden: true },
                    { name: 'FREIGHT_CURRENCY', width: 100, sortable: true, hidden: true },
                    { name: 'FREIGHT_CURRENCY_RATE', width: 50, sortable: true, hidden: true },
                    { name: 'INSURANCE_PRICE', width: 30, sortable: true, hidden: true },
                    { name: 'INSURANCE_CURRENCY', width: 80, sortable: true, hidden: true },
                    { name: 'INSURANCE_CURRENCY_RATE', width: 100, sortable: true, hidden: true },
                    { name: 'TARIFF_NO', width: 200, sortable: true, hidden: true },
                    { name: 'CUSTOM_PRICE', width: 100, sortable: true, hidden: true },
                    { name: 'WARRANTY_PRICE', width: 100, sortable: true, hidden: true },
                    { name: 'INOUT_DATE', width: 100, sortable: true, hidden: true },
                    { name: 'VEHICLE_TYPE', width: 50, sortable: true, hidden: true },
                    { name: 'VEHICLE_NO', width: 30, sortable: true, hidden: true },
                    { name: 'WAREHOUSE_ID', width: 80, sortable: true, hidden: true },
                    { name: 'REMARK', width: 80, sortable: true, hidden: true }
                ],
                gridview: true,
                rowNum: 20,
                rowList: [20, 40, 60],
                pager: '#pagerItem',
                viewrecords: true,
                sortorder: 'ASC',
                rownumbers: true
            });
            gridItem.jqGrid('navGrid', '#pagerItem', { add: true, edit: true, del: true },
                {}, {}, {}, { multipleSearch: true, overlay: false, width: 460 });

            var myGrid = grid;
            var selRowId = myGrid.jqGrid('getGridParam', 'selrow');
            celValue = myGrid.jqGrid('getCell', selRowId, 'IN_CUSTOMS');
            celValue2 = myGrid.jqGrid('getCell', selRowId, 'OUT_CUSTOMS');

            console.log(celValue);

            console.log(celValue2);

            alert(celValue);
            alert(celValue2);

            $("#POPUP2").dialog({ width: 780 });
        }

        return true;
    }
});
grid.jqGrid('navGrid', '#pager', { add: false, edit: false, del: true },
    {}, {}, {}, { multipleSearch: true, overlay: false, width: 460 })
         .navButtonAdd("#pager", {
             caption: "",
             buttonicon: "ui-icon-plus",
             onClickButton: function () {
                 // alert("Adding Row");
                 $("#POPUP1").dialog({ width: 730 });
             },
             position: "first"

         })
         .navButtonAdd("#pager", {
             caption: "",
             buttonicon: "ui-icon ui-icon-pencil",
             onClickButton: function () {

             },
             position: "first"

         })
          .navButtonAdd("#pager", {
              caption: "",
              buttonicon: "ui-icon ui-icon-trash",
              onClickButton: function () {

              },
              position: "first"
          }); 
```

当第一次单击详细信息按钮时获得错误值但之后返回正确的数据 ![enter image description here](../Images/8ba26abf2f882b61acf3045c7bb93886.png)

谢谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T06:38:27.417

首先我回答你的主要问题。问题是您在回调中获取`selrow`参数（所选行的 id） 。`beforeSelectRow`在第一次单击“详细信息”按钮时，未选择任何行。所以`myGrid.jqGrid('getGridParam', 'selrow')`将返回`null`，您将无法使用id=null 来从行的列中`getCell`获取值。`'IN_CUSTOMS'``'OUT_CUSTOMS'`

You always return true from `beforeSelectRow` callback. So you don't want to prevent row selection if the user click on the 'details' button. In the case I would recommend you better to use [onCellSelect](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events#list_of_events) callback. By the way the callback has `iCol` (the index of the cell which was clicked) as additional parameter. It will additional simplify your code.

Next remark. You use `sortable: true` in all column, but the default value of `sortable` property is already `true` (see [the documentation](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)). Additional I would recommend you to use [column templates](https://stackoverflow.com/a/6047856/315935) in the definition of jqGrid. For example in the definition of the first grid you use multiple times the same properties to define hidden column with the checkbox. Additionally there are many columns having `width: 100` and all columns have empty column header `''`. So you can define the first grid as

```
var grid = $('#list'),
    hiddenCheckboxTemplate = { width: 30, editable: false,
        edittype: 'checkbox', editoptions: { value: "True:False" },
        formatter: "checkbox", formatoptions: { disabled: false }, hidden: true
    };
grid.jqGrid({
    colModel: [
        { name: 'REQUEST_ID', hidden: true },
        { name: 'REQUEST_DATE', width: 50 },
        { name: 'REQUEST_NO', width: 60 },
        { name: 'CUSTOMER_ID' },
        { name: 'TRANSPORT_TYPE', width: 40 },
        { name: 'CLEARANCE_TYPE', width: 50 },
        { name: 'IMPORT_EXPORT', template: hiddenCheckboxTemplate },
        { name: 'WAYBILL_NO', width: 50 },
        { name: 'WAYBILL_OFFICE' },
        { name: 'MANIFEST', width: 200, hidden: true },
        { name: 'STORE_BILL', hidden: true },
        { name: 'DIRECT_NO', hidden: true },
        { name: 'STORE_DATE', hidden: true },
        { name: 'INOUT_DATE', width: 50, hidden: true },
        { name: 'SOURCE_COUNTRY', width: 30, hidden: true },
        { name: 'SOURCE_CITY', width: 80, hidden: true },
        { name: 'DESTINATION_COUNTRY', hidden: true },
        { name: 'IN_CUSTOMS', width: 200, hidden: true },
        { name: 'OUT_CUSTOMS', hidden: true },
        { name: 'INSURER_ID', hidden: true },
        { name: 'INSURANCE_NO', hidden: true },
        { name: 'CLEARANCE_PERSON', width: 50, hidden: true },
        { name: 'PROXY_NO', width: 30, hidden: true },
        { name: 'FACTOR_NO', width: 80, hidden: true },
        { name: 'SHIP_NAME', hidden: true },
        { name: 'TRAVEL_NO', width: 200, hidden: true },
        { name: 'INDENT_NO', hidden: true },
        { name: 'COOTAG_NO', hidden: true },
        { name: 'PERMIT_NO', hidden: true },
        { name: 'CLEARANCE_NO', width: 50, hidden: true },
        { name: 'CARNETIR_NO', width: 30, hidden: true },
        { name: 'PURCHASE_TYPE', width: 80, hidden: true },
        { name: 'ALL_VALUE', hidden: true },
        { name: 'FREIGHT_STATUS', template: hiddenCheckboxTemplate },
        { name: 'COPY_ORIGINAL', template: hiddenCheckboxTemplate },
        { name: 'REMARK', hidden: true },
        { name: 'details', width: 20, sortable: false, search: false,
            formatter: function () {
                return "<span class='ui-icon ui-icon-document'></span>";
            }
        }
    ],
    cmTemplate: { width: 100, label: '' },
    ... other option. No colNames are needed because of usage label
}); 
```

In the way you reduce the code and make it more manageable (easy to maintain). Because of usage `label` property in `colModel` no `colNames` option should be included.

In the same way you can reduce the code which define the second grid too.

Another remark. the code `if ($.jgrid.getCellIndex(e.target) == 37) {` is difficult to understand and to maintain. If you would include additional column in the grid or if you even change the value of some option (like `rownumbers`) the constant `37` should be changed. What you want to do is just test whether the user clicked on the 'details' column. I would recommend you to use better the column names. For example

```
var colModel = $(this).jqGrid('getGridParam', 'colModel'),
    cm = colModel[iCol]; // iCol is defined before as $.jgrid.getCellIndex(e.target)
if (cm && cm.name === 'details') {
    ....
} 
```

The last remark. You use `GridUnload` and then **recreate** the second grid with details. It would be more effective to use `.trigger('reloadGrid', [{page: 1}])` instead (see [here](https://stackoverflow.com/a/3808014/315935)). At the beginning you can create the second grid with `datatype: 'local'`. It will prevent the loading of data from the server. You can place the second grid in div which you hide directly after the grid is created and show the div if needed. If the second grid need be filled with information you can use `setGridParam` to change `datatype` to 'json' (see [the answer](https://stackoverflow.com/a/4525139/315935)), set other parameters like `requestId` of `postData` and then call `.trigger('reloadGrid', [{page: 1}])`. The way will work more effectively.

# iphone - 为什么 Core Data 没有在 iOS 4 上正确设置？

> ID：10371702
> 
> 赞同：1
> 
> 时间：2012-04-29T11:21:40.120
> 
> 标签：iphone, core-data, ios4

我正在开发一个使用 Core Data 的应用程序。在 iOS 5 中，我没有任何问题。

但是，在 iOS 4 中，当我尝试保存任何信息时，我会收到一条错误消息（更准确地说：Cocoa 错误 134030 和“没有这样的文件或目录”）。当我查看文档文件夹时，SQL 文件不存在。我已经对此进行了调试，并且这些方法都不会导致错误或`nil`指针。

最奇怪的部分：方法 addPersistentStoreWithType 没有返回任何错误，但同时没有创建 sqlite 文件。

在一行中，我的应用程序没有在文档文件夹中创建 sql 文件。同样，这只发生在 iOS 4 中。

**为什么我的应用程序没有在 iOS 4 上创建 sqlite 文件？**

```
//Core Data stack

- (NSManagedObjectContext *)managedObjectContext
{

NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
if (coordinator != nil)
{
    __managedObjectContext = [[NSManagedObjectContext alloc] init];
    [__managedObjectContext setPersistentStoreCoordinator:coordinator];
}

return __managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel
{
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Practi" withExtension:@"momd"];
__managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

if (__managedObjectModel == nil)
{
    NSLog(@"NSManagedObjectModel in AppDelegate == nil");
}

return __managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"MyAppDataBase.sqlite"];
NSError *error = nil;
__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
{

    NSLog(@"APPDELEGATE Unresolved error %@, %@", error, [error userInfo]);
}

return __persistentStoreCoordinator;
}

- (NSURL *)applicationDocumentsDirectory
{
NSString *docsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
return [NSURL fileURLWithPath:docsDirectory];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:48:36.657

`mom`有时，您应该使用文件的扩展名，有时应使用`momd`. 第一个是文件，第二个是引用目录。

我看到嵌入式资源有时需要使用`mom`扩展文件才能正确加载文件（如果是来自框架的资源，则没有目录）。也许它可能是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T08:41:16.290

我发现了解决问题的方法：

当调用上面编写的每个方法时，我再次创建对象，而不是检查它是否已经存在并返回。因此，就像现在的代码一样，它也可以在 iOS 4 中运行。

# php - file_get_contents 和无效字符

> ID：10371703
> 
> 赞同：4
> 
> 时间：2012-04-29T11:21:50.847
> 
> 标签：php, json

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:26:09.050

The API Response is GZIP'd. Refer to this page to decoding responses: [http://api.stackoverflow.com/1.1/usage/gzip](http://api.stackoverflow.com/1.1/usage/gzip)

If you switch to cURL, then you can use the CURLOPT_ENCODING option to decode it.

```
$url = 'http://api.stackoverflow.com/1.1/users/779187/';
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_ENCODING, 1);
$output = curl_exec($ch); 
$status = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
curl_close($ch); 
if($status=='200') {
    $data = json_decode($output);
    echo '<pre>' . print_r($data,true) . '</pre>';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T11:27:35.420

Use `gzdecode` to decode compressed content. You should use implementation from [this page](http://digitalpbk.com/php/file_get_contents-garbled-gzip-encoding-website-scraping) if you don't have gzdecode function. I have checked that it works with the page you want to retrieve.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T11:27:28.680

Decompress it with [`gzinflate`](http://fr.php.net/manual/en/function.gzinflate.php "PHP: gzinflate - Manual") first.

# apache - Mod_rewrite (Smacking bots)

ID：10371704

赞同：1

时间：2012-04-29T11:21:55.530

标签：apache, .htaccess, mod-rewrite, bots

# c++ - CoGetClassObject 返回错误

> ID：10371708
> 
> 赞同：2
> 
> 时间：2012-04-29T11:22:11.827
> 
> 标签：c++, visual-studio, windows-7, addressbook, clsid

我想阅读 Windows 联系人（Windows 7 通讯簿），但 CoGetClassObject 返回错误，我不知道为什么？

我的代码是：

```
 IClassFactory* pFactory = NULL;
HRESULT rc;
rc = CoGetClassObject(CLSID_Contact,CLSCTX_INPROC_SERVER,NULL,IID_IClassFactory, (void **) &pFactory);
wprintf( L"Error : %d\n",rc); 
```

它返回“错误：-2147221008”

如果有人对我有建议，那就太好了！

丹尼斯

PS详细信息：基于[http://msdn.microsoft.com/en-us/library/ms735866.aspx](http://msdn.microsoft.com/en-us/library/ms735866.aspx)（这是相当错误的）我尝试自己做，但函数CoGetClassObject返回错误，我不知道为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T11:33:29.630

当打印为十六进制数字时，此数字为 0x800401F0

此错误转化为`CoInitialize has not been called.`

在调用[`CoInitialize`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678543%28v=vs.85%29.aspx)任何 COM 代码之前调用

如果你有visual studio，你可以在Tools菜单下找到错误查找工具以备日后使用

# .net - 如何使用 VB.NET 为字符串赋值？

> ID：10371712
> 
> 赞同：9
> 
> 时间：2012-04-29T11:22:46.967
> 
> 标签：.net, vb.net, string, variable-assignment

考虑以下代码：

```
 Dim S1 As String = "a"

    'this is the string in a file
    Dim StringFromFile As String = "S1=hello"

    Dim temp() As String = Split(StringFromFile, "=", -1, CompareMethod.Binary)
    'temp(0) = variable name
    'temp(1) = variable value

    'my question is: how to assign value to S1? 
```

我已经声明了一个名为 S1 的字符串。现在我想为 S1 分配新值。新的字符串值使用以下格式存储在文件中：**[变量名][= 作为分隔符][字符串值]**。检索存储在文件中的字符串变量名称和值后，如何将值分配给 S1？

笔记：

```
temp(0) = "S1"
temp(1) = "hello" 
```

**需要注意的是，带有数据的字符串来自一个可能会不时更改的文件！当文件发生变化时，我希望变量也发生变化。**

## 进一步澄清

我需要一段代码，在处理像“S1=hello”这样的字符串时，代码将首先找到一个声明的变量（即S1），然后用“hello”字符串分配S1变量。“=”只是作为变量名和变量值的分隔符。

**更新**：

我尝试使用 Mathias Lykkegaard Lorenzen 的 EDIT 2 示例，但在此行上出现“NullReferenceException”失败`"Field.SetValue(Me, VariableValue)"`。请帮我解决问题。以下是我基于 Mathias Lykkegaard Lorenzen 的 EDIT 2 示例的代码：

```
Public Sub Ask()
    Try
        Dim S1 As String = "a"

        Dim StringFromFile As String = "S1=hello"

        Dim temp() As String = Split(StringFromFile, "=", -1, CompareMethod.Binary)
        'temp(0) = variable name
        'temp(1) = variable value

        'my question is: how to assign value to S1?
        Dim TypeOfMe As Type = Me.GetType()

        'did this for readability.
        Dim VariableName As String = temp(0)
        Dim VariableValue As String = temp(1)

        'get the field in the class which is private, given the specific name (VariableName).
        Dim Field As FieldInfo = TypeOfMe.GetField(VariableName, BindingFlags.NonPublic Or BindingFlags.Instance)

        'set the value of that field, on the object "Me".
        Field.SetValue(Me, VariableValue) '<-- this line caused NullReferenceException
        MessageBox.Show(S1)
    Catch ex As Exception
        MessageBox.Show(ex.ToString)
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T07:39:36.693

您可以使用[反射](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)来设置 S1 值：

```
Imports System.Reflection

Public Class Form1
    Public S1 As String = "a"

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim StringFromFile As String = "S1=hello"

        Dim temp() As String = Split(StringFromFile, "=", -1, CompareMethod.Binary)
        'temp(0) = variable name
        'temp(1) = variable value

        SetS1(Me, "S1", temp(1))
        MessageBox.Show(S1)
    End Sub

    ''' <summary>
    ''' 
    ''' </summary>
    ''' <param name="obj">the class that stores your S1 public field</param>
    ''' <param name="fieldName">that is your S1 field</param>
    ''' <param name="Value">S1 new value, that is hello</param>
    ''' <remarks></remarks>
    Public Sub SetS1(ByVal obj As Object, ByVal fieldName As String, ByVal Value As Object)
        Try
            Dim fi As FieldInfo = obj.GetType().GetField(fieldName, BindingFlags.Instance Or BindingFlags.Public Or BindingFlags.NonPublic)
            If Not fi Is Nothing Then
                fi.SetValue(obj, Value)
            End If

        Catch ex As Exception

        End Try
    End Sub
End Class 
```

## 额外资源

有一本关于反射的书非常好，看看：

**[Visual Basic .NET 反射手册](https://rads.stackoverflow.com/amzn/click/com/1861007590)**

> 反射是 .NET 提供的一种机制，使开发人员能够使他们的程序更加灵活和动态。反射使应用程序变得更加模块化、可扩展和可配置成为可能。基于面向对象和 .NET 类型系统的基础，反射提供了在运行时动态检查、修改甚至创建对象的机制。.NET 还增加了程序员向其类型添加属性的能力，这些属性提供有关类型的元数据，可以在运行时通过反射检查和使用这些元数据。
> 
> 本书探讨了反射的所有使用方式，并确定了依赖反射实现其功能的实际应用程序和重要的编程技术。它涵盖了反射 API、.NET 中属性的使用，还介绍了 .NET 为动态生成代码提供的机制——所有技术都允许开发人员构建更灵活、更动态的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T11:37:24.987

如果我正确理解了您的问题，您希望将 的值分配给与 的值`temp(1)`同名的局部变量`temp(0)`。因此，如果您的文件包含`S1=hello`, `S2=world`，您希望您的代码将“hello”分配给变量`S1`（如果存在这样的变量，将“world”分配给`S2`变量）。

不幸的是，Visual Basic 不支持为名称在运行时确定的局部变量赋值。如果`S1`是类字段或属性，您可以使用[反射](https://stackoverflow.com/questions/619767/net-reflection-set-object-property)或序列化库（例如[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)，但是它希望输入文件是 XML 格式而不是名称=值对）来分配它。

一般来说，需要更多的上下文来建议适合您情况的最佳替代方案。例如，如果您只有 names `S1`, ..., `S20`，我会使用[array](http://msdn.microsoft.com/en-us/library/wak0wfyt.aspx)。如果您的键是任意名称，则[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)可能更合适。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T11:54:02.893

我希望我的问题是正确的。在我看来，好像您想将值分配给您之前声明`temp(1)`的变量。`S1`

这是通过一个简单的操作完成的：

```
S1 = temp(1) 
```

或者，如果您不清楚，`Set`也可以使用：

```
Set S1 = temp(1) 
```

有关[此处](http://msdn.microsoft.com/en-us/library/cd6hcy37%28v=vs.110%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/ke6sh835%28v=vs.110%29.aspx)的更多信息。

**编辑 1**

回顾您刚刚写的作为对问题的评论的内容，您要拆分的字符串来自一个文件，该文件可能在任何给定时间点发生变化。

为此，我会考虑使用数据库（带有触发器）或（[此处](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx#Y0)`FileSystemWatcher`的文档）对象来监视特定目录的文件更改。

使用它的示例解决方案如下所示。

```
Dim watcher As New System.IO.FileSystemWatcher()
watcher.Path = "C:\MyPathToMonitor"
watcher.Filter = "*MyFileNameToLookFor" 'could be *MyFile.txt

'assign the event. could be done by declaring the watcher `WithEvents` in the class scope too.
AddHandler watcher.Changed, AddressOf OnChanged 
```

然后，在您的事件处理程序中：

```
Private Shared Sub OnChanged(source As Object, e As FileSystemEventArgs)

    'here we just say that StringFromFile has been assigned to the file contents now.

    Dim temp() As String = Split(StringFromFile, "=", -1, CompareMethod.Binary)

    'remember to have the S1 variable in your class scope.
    S1 = temp(1)

End Sub 
```

**编辑 2**

如果您希望能够更改给定变量名称为 a 的变量的值`string`，那么您应该查看反射，它允许您在运行时而不是编译时评估代码。

我在下面给了你一个示例代码，它几乎总结了反射的使用。

```
'get the reflection type of the current class.
Dim TypeOfMe As Type = Me.GetType()

'did this for readability.
Dim VariableName = temp(0)
Dim VariableValue = temp(1)

'get the field in the class which is private, given the specific name (VariableName).
Dim Field As FieldInfo = TypeOfMe.GetField(VariableName, BindingFlags.NonPublic Or BindingFlags.Instance)

'set the value of that field, on the object "Me".
Field.SetValue(Me, VariableValue) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T13:27:59.570

您无法反映局部变量，因为编译后，编译器会丢失局部变量的名称，但会保留类级别的名称。

因此，要使您的示例正常工作，您需要将 S1 设为类级别变量，而不是将其作为方法的内部变量。

```
Public Class Class1
    Dim S1 As String = "a"

    Public Sub Ask()
        Try
            Dim StringFromFile As String = "S1=hello"

            Dim temp() As String = Split(StringFromFile, "=", - 1, CompareMethod.Binary)
            'temp(0) = variable name
            'temp(1) = variable value

            'my question is: how to assign value to S1?
            Dim TypeOfMe As Type = Me.GetType()

            'did this for readability.
            Dim VariableName As String = temp(0)
            Dim VariableValue As String = temp(1)

            'get the field in the class which is private, given the specific name (VariableName).
            Dim Field As FieldInfo = TypeOfMe.GetField(VariableName, BindingFlags.NonPublic Or BindingFlags.Instance)

            'set the value of that field, on the object "Me".
            Field.SetValue(Me, VariableValue)            '<-- this line caused NullReferenceException (no more.)
            Console.WriteLine("S1 using reflection")
            Console.WriteLine(S1)

        Catch ex As Exception
            Console.WriteLine(ex.ToString)
        End Try
    End Sub
End Class 
```

然而，正如这里已经说过的，更实用的方法是使用字典。

```
Public Class Class2

    Public Sub Ask()
        Try
            Dim StringFromFile As String = "S1=hello"

            Dim temp() As String = Split(StringFromFile, "=", - 1, CompareMethod.Binary)

            ' the way you probably should do it.
            Dim test As Dictionary(Of string, string) = New Dictionary(Of String,String)()
            test.Add(temp(0), temp(1))
            Console.WriteLine("S1 using dictionary")
            Console.WriteLine(test("S1"))

        Catch ex As Exception
            Console.WriteLine(ex.ToString)
        End Try
    End Sub
End Class 
```

如果您的字典中已经包含您想要的值，那么您当然不会进行添加，您只需将键设置为新值，例如`test(temp(0)) = temp(1)`

* * *

您必须记住的是，反射很昂贵。 **除非绝对必要，否则不要这样做。** 在这种情况下，我看不出对它的真正需求，而且我没有看到任何东西可以说服我你别无选择。尝试使您的解决方案尽可能简单。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-09T02:23:39.627

`LocalVariables`虽然您可以使用类的属性来访问方法的局部变量`Reflection.MethodBody`，但没有设置值的好方法，因为变量名称没有存储在任何地方。所以你不能通过变量名的反射来查找。您可以通过索引/类型枚举局部变量，但没有明确的方法来判断哪个变量是哪个变量，除非您事先知道它们被声明的确切顺序（在这种情况下，您可以通过索引）。

您可以在此处的 msdn 主题中找到有关我所说的内容的更多信息：

[MethodBody.LocalVariables 属性](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody.localvariables.aspx)

如果你无论如何都需要通过反射来查找局部变量，那么这是一个非常糟糕的设计，你应该在这部分工作更多（重构你的代码）。您应该尽可能避免完全使用反射，因为它的开销很大并且非常慢。Dictionary/SortedDictionary 方法是一种更好的方法来应对您所处的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T15:12:29.040

如果将变量添加到变量的键控字典中，则可以使用 set 设置键值对中值的值。看一下这个：

```
Dim dctHolder As New Dictionary(Of String, Object)
Dim S1 As String
Dim tmp() As String = {"S1","Split Up Value"}
dctHolder.Add("S1",S1)
Set dctHolder(tmp(0)) = tmp(1) 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-29T11:58:35.850

如果您只想分配 to 的值`temp(1)`，`S1`您可以这样做：

```
S1 = temp(1) 
```

如果您有一组小的、固定的可能值，您可以尝试使用`Select Case`：

```
Select Case temp(0)
    Case "S1"
        S1 = temp(1)
    Case "S2"
        S2 = temp(1)
End Select 
```

但一般来说，最好的方法是使用字典来保存值，而不是变量：

```
Dim dict = New Dictionary(Of String, String)

dict(temp(0)) = temp(1) 
```

然后，您可以通过以下方式获取值`S1`：

```
dict("S1") 
```

# php - CakePHP 1.1 - 如何在 JSON 中响应

> ID：10371714
> 
> 赞同：0
> 
> 时间：2012-04-29T11:23:38.357
> 
> 标签：php, cakephp

我正在使用 PHP cake 1.1 开发 API。我想将响应写为 JSON。我发现了很多 PHP Cake 1.2 或 1.3 的内容，但不是 1.1。

这是我的控制器代码

```
function index() {
   $this->layout = 'ajax';
   $this->RequestHandler->setContent('json', 'application/json');
   $members['id'] = '001100';        
   $this->set(compact('members'));    
} 
```

这是查看代码

`echo json_encode($members);`

我的问题是，响应内容类型仍然是`Content-Type: text/html`

有什么方法我不必为每个函数创建视图而只需编写`json`.

请帮帮我。

谢谢，阿迪尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:45:20.370

在 CakePHP 1.2 中，如果将 autoRender 设置为 false 并从控制器操作返回一个值，它将直接输出。您可能需要指定一个 Content-Type。

```
function index() {
    $this->autoRender = false;
    $this->RequestHandler->respondAs('json'); // or $this->RequestHandler->respondAs('application/json'); if json is not set up with CakePHP 1.1
    $members['id'] = '001100';        
    return json_encode($members);    
} 
```

我无法立即访问 CakePHP 1.1 代码库，因此您可能需要检查 dispatcher.php，特别是 _invoke() 方法，以确保在 autoRender 为设置为假。

我强烈建议升级到 CakePHP 2.1，它包括一个可用于提供 json 响应的 JsonView。

```
function index() {
    $this->view = 'Json';
    $members['id'] = '001100';
    $this->set(compact('members'));        
    $this->set('_serialize', array('members'));    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:23:45.310

试试这个：

```
function index() {
   $this->autoRender = false;
   /**
     * leave this two lines
     *
     * $this->layout = 'ajax';  // leave it
     * $this->RequestHandler->setContent('json', 'application/json'); 
     *
     */

   // your process to get $members
   $members['id'] = '001100';        
   $this->set('members');    
} 
```

由于您的视图代码很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T11:27:55.817

我不确定我是否 100% 理解了这个问题，但如果您只是想在 JSON 字符串中输出一些内容，请查看此链接：

[http://techno-geeks.org/2009/08/easy-json-with-cakephp-and-jquery/](http://techno-geeks.org/2009/08/easy-json-with-cakephp-and-jquery/)

# mysql - mysql Binlog中的查询已更改-加载数据查询

> ID：10371715
> 
> 赞同：0
> 
> 时间：2012-04-29T11:23:54.673
> 
> 标签：mysql, load-data-infile, mysqlbinlog

我在主服务器中运行了以下 mysql 查询

```
load data local infile '/tmp/LRD.csv'
into table **offline**.LPLRD_Updates
  fields terminated by ',' ENCLOSED BY '"'
  lines terminated by '\n'; 
```

但这已在 binlog 中更改为

```
LOAD DATA LOCAL INFILE '/tmp/SQL_LOAD_MB-597-0'
INTO TABLE `LPLRD_Updates`
  FIELDS TERMINATED BY ',' ENCLOSED BY '"' ESCAPED BY '\\'
  LINES TERMINATED BY '\n' 
```

我在查询中提到了**离线**数据库，但它已更改为 binlog 中的默认数据库。

这会在复制中产生问题，因为默认数据库没有此表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:24:02.417

尝试使用 db_name; 然后将数据加载到表中。在基于语句的日志记录中，复制会中断或有一些记录在案的缺点。顺便说一句，您不能真正在 DR 站点上使用它来声明数据。

# java - 关于线程的停止

> ID：10371716
> 
> 赞同：4
> 
> 时间：2012-04-29T11:24:16.790
> 
> 标签：java

我开发了一个代码，将在执行时启动两个线程

```
public class MyThread1 extends Thread //extend thread class 
{
    // public  synchronized void run()
     //synchronized (this)

     public   void run()
    {//synchronized(this)
        //{
         for(int i=0;i<20;++i) {
             try{
                 Thread.sleep(500);

          System.out.print(i +"\n"+ "..");
             }catch(Exception e)
             {e.printStackTrace();}
          //} 
        }

     }  

 public static void main(String... a) 
 {
     MyThread1 t = new MyThread1();

     Thread x = new Thread(t);

     Thread y = new Thread(t);
     x.start();
     y.start();

     } 
```

现在它启动两个线程但是如果我想停止一个特定的线程，假设我想停止线程 Y 那么我将如何做请告知，因为停止线程意味着它的运行方法已完成但我想停止它有力地我将如何做到这一点，请告知

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T11:28:52.540

**免责声明**：这个答案有一个教程字符。

**基本方法**：我们最初保持简单，不处理`Thread.sleep`方法期间的中断。本质上，您应该有一个外部可设置的变量，run 方法在循环的每次迭代中检查该变量；然后您可以将该变量设置为正常终止该`run()`方法。请注意这个习语可以很容易地用于 Java 以外的语言。

例如：

```
public class MyThreadedClass extends Thread {

  private volatile boolean completed = false;

  public void setCompleted() {
    this.completed = true;
  }

  public void run()
  {
    while (!completed) {
      // do anything you fashion
    }
  } 

  public static void main(String... args) 
  {
    MyThreadedClass x = new MyThreadedClass();
    MyThreadedClass y = new MyThreadedClass();

    x.start();
    y.start();

    x.setCompleted(); // will complete as soon as the latest iteration finishes

    ...
  }
} 
```

**评论**： volatile 标志告诉编译器`completed`可能（并且将会）在函数控制之外进行更改`run()`，即另一个线程可能会更改它。否则循环中的迭代检查可能会根据类的唯一同步行为被错误地优化。

在您的特定`run()`情况下，我们利用`for`循环，因此我们的方法转化为以下内容：

```
public void run()
{
  try {
    for(int i=0;i<20 && !completed;++i) {        
      Thread.sleep(500);
      System.out.print(i +"\n"+ "..");
    } 
  } catch(Exception e) {
    e.printStackTrace();
  }
} 
```

**评论**：很明显，由于睡眠呼叫，您可能需要等待长达 500 毫秒。但是，一般来说，如果您的代码必须执行改变变量状态的操作（特别是，如果这些变量在多个线程之间共享！），这样您就不会让这些变量处于不正确的状态。实际上，由于您控制了终止，因此您可以正确处理**事务。**这显然假设，在循环的每次迭代结束时，变量状态是一致的。

现在让我们改进处理期间中断的基本方法`Thread.sleep`。

**完整的答案**：这个答案涉及到，从调用方来说，该`Thread.interrupt()`方法的使用，这使得该方法严格特定于 Java。

```
public class MyThreadedClass extends Thread {

  public void run()
  {
    try {
      for(int i=0;i<20 && !this.isInterrupted();++i) {        
        Thread.sleep(500);
        System.out.print(i +"\n"+ "..");
        ...
        // some molassy slow code here, where you may sprinkle isInterrupted()
        // checks and consequent break statements 
      } 
    } catch(InterruptedException e) {
      // do whatever you need to clean things up
    } catch(Exception e) {
      // handle other exceptions as seen fit
    }
  }

  public static void main(String... args) 
  {
    MyThreadedClass x = new MyThreadedClass();

    x.start();

    // will complete 
    // a) as soon as one isInterrupted() check breaks the loop, or 
    // b) "immediately" during the blocking call to sleep()
    x.interrupt(); 

    ...
  }
} 
```

**评论**：在这种情况下，线程本身已经完成了一半的工作。如果你只需要在`Thread.sleep`通话过程中打断，那么你不需要做任何事情，除了处理`InterruptedException`来清理你的状态，如果有必要的话。相反，如果您需要在“慢”代码期间中断，则必须`this.isInterrupted()`在您喜欢的任何地方（可能在多个地方）调用并中断循环；循环条件内的调用很常见但不是必需的。

更多信息可以在 Java 并发[中断教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T11:38:43.937

你应该`interrupt()`线程。`sleep()`当线程被中断时，阻塞调用（如）将抛出 InterruptedException。如果您想在紧密循环中尽快停止，请定期检查当前线程是否已使用该`isInterrupted()`方法中断。

[Java 并发教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)中有关这方面的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T13:46:01.113

让事情尽可能简单。

```
 public class Threads {
    public static class MyRunnable implements Runnable {
        public void run() {
            try {
                for (int i = 0; i < 20; ++i) {
                    Thread.sleep(500);
                    System.out.print(i + "\n" + "..");
                }
            } catch (InterruptedException e) {
                System.out.println("Interrupted");
            }
        }
    }

    public static void main(String... a) throws InterruptedException {
        Thread x = new Thread(new MyRunnable());
        Thread y = new Thread(new MyRunnable());
        x.start();
        y.start();
        Thread.sleep(2000);
        y.interrupt();
        Thread.sleep(2000);
        x.interrupt();
    }
} 
```

# java - Clojure - 如何将 DirectByteBuffer（由 getChannel.map 返回）转换为 MappedByteBuffer？

> ID：10371721
> 
> 赞同：1
> 
> 时间：2012-04-29T11:24:54.363
> 
> 标签：java, clojure

我是 Clojure 的新手，我需要 Clojure 为我做一个简单的任务，相当于下面的 Java 代码：

MappedByteBuffer out = new RandomAccessFile("file", "rw").getChannel().map(FileChannel.MapMode.READ_WRITE, 0, 100);

但是 Clojure 是一种动态语言，map() 返回 DirectByteBuffer 而不是 MappedByteBuffer。我希望使用 setInt() 方法，它是 MappedByteBuffer 的成员。有没有办法告诉 Clojure 使用 MappedByteBuffer 中的方法而不是 DirectByteBuffer？

谢谢！

顺便说一句，这是我的尝试：

```
(defprotocol MfileP
  (at     [this pos])
  (get-i  [this])
  (set-i  [this val])
  (resize [this size])
  (fsize  [this]))

(defrecord Mfile [fc buf] MfileP
  (at     [this pos]  (.position buf pos))
  (get-i  [this]      (.getInt buf))
  (set-i  [this val]  (.setInt buf val))
  (resize [this size] (assoc this :buf (.map fc FileChannel$MapMode/READ_WRITE 0 size)))
  (fsize  [this]      (.size fc)))

(defn open [path]
  (let [fc (.getChannel (new RandomAccessFile path "rw"))]
    (let [buf (.map fc FileChannel$MapMode/READ_WRITE 0 (.size fc))]
      (Mfile. fc buf)))) 
```

表单 (set-i) 会引发异常，因为 Clojure 正在 DirectMapBuffer 中寻找 .setInt。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T12:01:42.727

你没有说你认为你已经建立了`map()`回归`DirectByteBuffer`。`MappedByteBuffer`不是——毫无疑问，它正在返回抽象类的子类。

`MappedByteBuffer#setInt(int)`根据 JDK 文档，没有方法。

您应该对接口进行编码。

看：

[java.nio.FileChannel#map(...) javadocs](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#map%28java.nio.channels.FileChannel.MapMode,%20long,%20long%29)

[java.nio.MappedByteBuffer javadocs](http://docs.oracle.com/javase/7/docs/api/index.html?java/nio/MappedByteBuffer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-24T23:51:07.327

有一个例子供你参考。

```
(require '[clojure.java.io :as io])
(import [java.io File RandomAccessFile])

(def ^:private map-modes
  {:private    java.nio.channels.FileChannel$MapMode/PRIVATE
   :read-only  java.nio.channels.FileChannel$MapMode/READ_ONLY
   :read-write java.nio.channels.FileChannel$MapMode/READ_WRITE})

(def ^:private map-perms
  {:private    "r"
   :read-only  "r"
   :read-write "rw"})

;; read a Memory-Mapped File
(with-open [file (RandomAccessFile. (File. "./data/test.txt") (map-perms :read-only))]
  (let [fc (.getChannel file)
        buffer (.map fc (map-modes :read-only) 0 (.size fc))]
    (println (.isLoaded buffer)) ;; false
    (println (.capacity buffer)) ;; size of file 7087200
    (doseq [i (range 0 (.limit buffer))]
      (print (char (.get buffer))))
    (println "End of reading a Memory-Mapped File"))) 
```

# c# - IIS：如何使用 Microsoft.Web.Administration 在网站中创建虚拟目录

> ID：10371725
> 
> 赞同：7
> 
> 时间：2012-04-29T11:25:29.293
> 
> 标签：c#, iis

我正在寻找一种在默认网站中使用 Microsoft.Web.Administration 创建虚拟目录但不创建应用程序的方法。

我发现的唯一方法是创建应用程序：

```
Microsoft.Web.Administration.ServerManager manager = new Microsoft.Web.Administration.ServerManager();
Site defaultSite = manager.Sites[ "Default Web Site];
Microsoft.Web.Administration.Application app =
defaultSite.Applications.Add( "\virtDir", "c:\\path" );
manager.CommitChanges(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-09T01:37:17.857

这可能是你所追求的：

```
var serverManager = new ServerManager();
serverManager.Sites["WebsiteName"].Applications["ApplicationName"].VirtualDirectories.Add("VirtualDirectoryName, "VirtualDirectoryPath"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T16:40:43.220

不确定这是否仍然相关，但通过单独搜索很难找到任何答案。因为我只是在努力回答这个确切的问题，所以我想出的最好的方法是为了访问 Microsoft.Web.Administration.Site 的虚拟目录，您可以访问其上的第一个应用程序：

```
var serverManager = new ServerManager();
site = serverManager.Sites.Add(websiteName, physicalPath, port);
var dirs = site.Applications[0].VirtualDirectories; 
```

有点违反直觉，但似乎 IIS 将为您添加的网站创建默认应用程序。

# php - 对 PHP for 循环的工作原理感到困惑

> ID：10371726
> 
> 赞同：1
> 
> 时间：2012-04-29T11:26:08.777
> 
> 标签：php, for-loop

我有一个`for`循环显示 MySQL 数据库中的前六个项目。然后我突破到另一段代码，之后我有另一个`for`循环显示我的数据库中接下来的六个项目。

虽然这正是我想要的功能，但我对它的工作原理感到困惑，并希望有人能为我澄清一下。第二个循环如何`for`知道从第一个循环停止的地方开始？

我的代码如下：

```
for ($i = 1; $i <= 6; $i++) {
  $row = mysqli_fetch_array($result);

  $id = $row['id'];
  $title = $row['title'];
  $file = $row['file'];

  // Display items

} 
```

第二个`for`循环完全相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T11:29:34.667

当您执行返回结果集的查询时，会创建一个结果集指针。每次调用都会`mysqli_fetch_array`将结果集指针推进到下一条记录

当您在第二个 for 循环开始时，结果集指针指向第 7 条记录

# python - 在 Python 中存储字典路径

> ID：10371732
> 
> 赞同：11
> 
> 时间：2012-04-29T11:26:48.010
> 
> 标签：python, dictionary

全新的python，假设我有一个字典：

```
kidshair = {'allkids':{'child1':{'hair':'blonde'},
                      'child2':{'hair':'black'},
                      'child3':{'hair':'red'},
                      'child4':{'hair':'brown'}}} 
```

如果 child3 定期改变头发颜色，我可能想写一个应用程序来加快数据维护。在这个例子中，我会使用：

```
kidshair['allkids']['child3']['hair'] = ... 
```

有没有办法将此路径存储为变量，以便我可以随意访问它？明显地

```
mypath = kidshair['allkids']['child3']['hair'] 
```

结果 mypath = 'red'。是否有任何可能的方法来对路径本身进行硬编码，以便我可以使用：

```
mypath = 'blue' 
```

再现

```
kidshair['allkids']['child3']['hair'] = 'blue' 
```

非常感谢，ATfPT

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T11:29:49.723

根据您的需要，最简单的选择可能是使用元组作为字典键而不是嵌套字典：

```
kidshair['allkids', 'child3', 'hair']
mypath = ('allkids', 'child3', 'hair')
kidshair[mypath] 
```

唯一的问题是您无法获取字典的一部分，因此，例如，您无法（轻松/有效地）访问与`'child3'`. 根据您的使用情况，这可能是也可能不是适合您的解决方案。

您当前结构的替代方法是执行以下操作：

```
>>> from functools import partial
>>> test = {"a": {"b": {"c": 1}}}
>>> def itemsetter(item):
...     def f(name, value):
...         item[name] = value
...     return f
...
>>> mypath = partial(itemsetter(test["a"]["b"]), "c")
>>> mypath(2)
>>> test
{'a': {'b': {'c': 2}}} 
```

在这里，我们创建了一个函数`itemsetter()`，它（在 的脉络中[`operator.itemgetter()`](http://docs.python.org/library/operator.html#operator.itemgetter)）给了我们一个在给定字典中设置相关键的函数。然后我们使用[`functools.partial`](http://docs.python.org/library/functools.html#functools.partial)我们想要预填充的密钥来生成这个函数的一个版本。也不完全`mypath = blue`是，但也不错。

如果您不想费心使某些内容与`operator`模块一致，您可以简单地执行以下操作：

```
def dictsetter(item, name):
     def f(value):
         item[name] = value
     return f

mypath = dictsetter(test["a"]["b"], "c")

mypath(2) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-29T11:55:37.337

您可以创建一组函数来访问给定字典的“路径”：

```
def pathGet(dictionary, path):
    for item in path.split("/"):
        dictionary = dictionary[item]
    return dictionary

def pathSet(dictionary, path, setItem):
    path = path.split("/")
    key = path[-1]
    dictionary = pathGet(dictionary, "/".join(path[:-1]))
    dictionary[key] = setItem 
```

用法：

```
>>> pathGet(kidshair, "allkids/child1/hair")
'blonde'
>>> pathSet(kidshair, "allkids/child1/hair", "blue")
>>> kidshair['allkids']['child1']
{'hair': 'blue'} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T11:34:02.490

您可以`kidshair['allkids']['child3']`轻松保存对以下内容的引用：

```
thiskid = kidshair['allkids']['child3']
thiskid['hair'] = 'blue' 
```

您无法保存整个路径，因为分配更改了字典中的`hair`键 。 如果要更改字典，则必须引用它，而不是引用它包含的内容。`kidshair['allkids']['child3']`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T11:33:47.133

您可以对当前数据结构做的最接近的事情是获取最后一个 dict 并直接使用它：

```
child = kidshair['allkids']['child3']

child['hair'] = 'blue' 
```

这是因为在 Python 中，样式的赋值

```
name = value 
```

只需将新对象绑定到“变量” `name`。无法重载 this 并且绑定不会影响任何其他对象（除了释放之前绑定到此名称的对象）。

另一方面是：

```
name[key] = value 
```

完全不同，因为它对当前位于的对象`name`（在您的情况下为dict）执行操作（设置项目）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-31T08:36:44.213

尝试使用 dpath lib [https://pypi.org/project/dpath/](https://pypi.org/project/dpath/)

```
>>> help(dpath.util.new)
Help on function new in module dpath.util:

new(obj, path, value)
Set the element at the terminus of path to value, and create
it if it does not exist (as opposed to 'set' that can only
change existing keys).

path will NOT be treated like a glob. If it has globbing
characters in it, they will become part of the resulting
keys

>>> dpath.util.new(x, 'a/b/e/f/g', "Roffle")
>>> print json.dumps(x, indent=4, sort_keys=True)
{
    "a": {
        "b": {
            "3": 2,
            "43": 30,
            "c": "Waffles",
            "d": "Waffles",
            "e": {
                "f": {
                    "g": "Roffle"
                }
            }
        }
    }
} 
```

# javascript - 按后缀删除单词

> ID：10371733
> 
> 赞同：0
> 
> 时间：2012-04-29T11:26:57.543
> 
> 标签：javascript, regex

我正在尝试编写一个简单的 JavaScript 函数来删除字符串中所有出现的具有特定后缀的单词。

```
function removeClassBySuffix(s, suffix) {
    var regx = new RegExp(what-regex-to-put-here, 'g');
    s = s.replace(regx, '');
    return s;
}

/* new RegExp('\\b.+?' + suffix + '\\b', 'g') -- doesn't work */ 
```

所以，

```
removeClassBySuffix('hello title-edit-panel deal-edit-panel there', '-edit-panel');
// Should return 'hello   there'. 
```

请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:30:56.917

我还没有尝试过，但我认为以下应该可行：

`new RegExp('\\b\\S+?' + suffix + '\\b', 'g')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:34:02.033

怎么样：

```
function removeClassBySuffix(s, suffix) {
    var a = s.split( ' ' ),
    result = [];

    for (i in a)
        if ( a[i].indexOf( suffix ) != ( a[i].length - suffix.length ) )
            result.push( a[i] );

    return result.join(' ');
} 
```

# android - 如何访问和操作 ListView 项中的视图？

> ID：10371734
> 
> 赞同：0
> 
> 时间：2012-04-29T11:26:59.760
> 
> 标签：android, listview

我制作了一个简单的清单应用程序，它显示一个带有复选框和文本的列表视图，当项目被选中时，文本会发生变化。我想保存项目的状态（无论它们是否被选中）并且我完成了，但现在我不知道如何访问每个选中项目内的复选框以在列表视图加载时检查它。我不能使用 onlistitemclick 监听器，因为没有点击列表。它只是加载并且应该显示哪些项目已经被点击。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:52:29.753

定义您自己的适配器并使用图标实现 CheckBoxes。对于 ListView 的包含控件的项目，Android 不支持 onClickListener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:33:15.660

看看本教程是否对您有帮助[Vogella ListView](http://www.vogella.com/articles/AndroidListView/article.html)。这些人创建了 ListView，请观看来自[Google IO 2010的视频教程](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)

# c# - NAudio - 寻找和导航从指定位置播放

> ID：10371741
> 
> 赞同：7
> 
> 时间：2012-04-29T11:27:37.300
> 
> 标签：c#, audio, naudio

我在 C# 应用程序中使用 NAudio 库。我正在尝试将音频（* .mp3 文件）搜索到我想要的位置。但是我没有弄清楚该怎么做。

```
//Play the file starting from 16th second
waveStream.Seek(16, SeekOrigin.Begin); 
```

而且......它几乎从一开始就开始播放，但不是从第 16 秒开始。我还找到了一个我认为正确的解决方案：

```
waveStream.Seek(waveStream.WaveFormat.AverageBytesPerSecond * 16, SeekOrigin.Begin); 
```

似乎更接近真相。我的解决是真的还是假的？如果不是我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T09:25:45.570

您可以`Position`直接在 a 上设置`WaveStream`，它必须转换为字节偏移量 - 所以是的，将每秒平均字节数乘以秒数将使您到达正确的位置（至少对于常规 PCM WAV 文件）。`WaveStream`还有一个辅助属性，称为`CurrentTime`允许您使用 a `TimeSpan`，它会为您执行相同的计算。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-17T16:21:08.577

如果有人仍然有这个问题并且无法弄清楚。那么这里是一个例子：

```
myWaveStream.CurrentTime = myWaveStream.CurrentTime.Add(new TimeSpan(0, hours, minutes, seconds, milliseconds));

myWaveStream.CurrentTime = myWaveStream.CurrentTime.Subtract(new TimeSpan(0, hours, minutes, seconds, milliseconds)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-04T20:19:42.900

我使用 trackBar 创建了一个导航，每秒 4 个滴答声（250 毫秒 1 个滴答声）：

```
trackBar1.Maximum = (int)stream.TotalTime.TotalSeconds * 4; 
```

在每 250 毫秒调用一次的计时器滴答处理程序中，跟踪条的更新完成如下：

```
double ms = stream.Position * 1000.0 / output.OutputWaveFormat.BitsPerSample / output.OutputWaveFormat.Channels * 8.0 / output.OutputWaveFormat.SampleRate;
trackBar1.Value = (int) (4 * ms / 1000); 
```

为了设置位置（滚动后），这个公式有效：

```
double ms = trackBar1.Value * 1000.0 / 4.0;
stream.Position = (long)(ms * output.OutputWaveFormat.SampleRate * output.OutputWaveFormat.BitsPerSample * output.OutputWaveFormat.Channels / 8000.0) & ~1; 
```

# asp.net - 如何启用按钮？

> ID：10371745
> 
> 赞同：1
> 
> 时间：2012-04-29T11:28:09.187
> 
> 标签：asp.net

在使用 javascript 加载页面时，我禁用了该按钮。

那是

```
protected void Page_Load(object sender, EventArgs e){
{
  btnExcel.Attributes.Add("onclick", " this.disabled = true; " +  
  ClientScript.GetPostBackEventReference(btnExcel, null) + ";");     
} 
```

现在，我想要的是启用按钮控制

```
protected void btnExcel_Click(object sender, EventArgs e)
{
    1\.  Rpt.ExportToHttpResponse(ExportFormatType.Excel, Response, true, "Project Summary Report");

    2\.  btnexcel.enable=true;
} 
```

对`btn_click`事件执行 1 条语句后，

为什么不执行 2 语句？

如果没有执行 2 条语句，那么我的按钮控件没有启用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:10:09.820

尝试这个：

**在 page_Load 上：**

**代码隐藏：**

```
 System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), "Script1", "disable();", True) 
```

**点击按钮后：**

```
System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), "Script2", "enable();", True) 
```

在您的头部标签中：

```
disable(){
 $("#somebtn").attr("disabled", true);
}

enable(){
 $('#somebtn').removeAttr('disabled');
} 
```

# java - 使用 Spring 3 和 Hibernate 4 在 Open-Session-In-View 中实现注释驱动事务

> ID：10371749
> 
> 赞同：0
> 
> 时间：2012-04-29T11:28:57.670
> 
> 标签：java, spring-3, hibernate-4.x, open-session-in-view

我正在使用 Wicket-1.5.3、Spring-3.1.1 和 Hibernate-4.1.1 开发应用程序。

我要实施

*   Open-Session-In-View 模式
*   事务将是注释驱动的，并且
*   应用程序应该得到任何 LazyInitializationException，还有
*   嵌套模型的数据库更新操作需要正确完成。

我有单独的层、网络、数据、服务等。

首先，我想说明 web.xml 中定义的 open-session-in-view 过滤器：

```
<filter>
    <filter-name>openSessionInView</filter-name>
    <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>openSessionInView</filter-name>
    <url-pattern>/app/*</url-pattern>
</filter-mapping> 
```

在 applicationContext.xml 我有以下配置：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/ems" />
    <property name="username" value="root" />
    <property name="password" value="admin" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
    <property name="mappingDirectoryLocations" value="/WEB-INF/resources/mappings" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />   

<bean id="transactionInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor">
    <property name="transactionManager" ref="transactionManager" />
    <property name="transactionAttributeSource">
        <bean class="org.springframework.transaction.annotation.AnnotationTransactionAttributeSource" />
    </property>
</bean>

<bean id="managerTemplate" abstract="true" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="interceptorNames">
        <list>
            <value>transactionInterceptor</value>
        </list>
    </property>
</bean>

<bean id="userDao" class="app.dev.ems.data.dao.impl.UserDaoImpl">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="userManager" parent="managerTemplate">
    <property name="target">
        <bean class="app.dev.ems.manager.impl.UserManagerImpl">
            <property name="userDao" ref="userDao" />
        </bean>
    </property>
</bean> 
```

*.hbm.xml 中定义的数据模型类是基于代理的：

```
<class name="app.dev.ems.data.model.impl.User" table="USER" proxy="app.dev.ems.data.model.IUser">
    <id name="id" column="ID">
        <generator class="native"/>         
    </id>
    <property name="name" column="NAME" not-null="true" />
</class> 
```

现在我描述在 applicationConext 中定义的类：

userDao：其实就是UserDaoImpl：

```
public class UserDaoImpl extends BaseDaoImpl<User> implements IUserDao {

    public UserDaoImpl() {
        super(User.class);
    }   
} 
```

BaseDaoImpl 是一个抽象类，其中 sessionFactory 的依赖注入实际发生：

```
public abstract class BaseDaoImpl<T extends Base> implements IBaseDao<T> {

    private Class<T> entityClass;
    private SessionFactory sessionFactory;

    public BaseDaoImpl(Class<T> entityClass) {
        super();
        this.entityClass = entityClass;
    }   

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    @SuppressWarnings("unchecked")
    public List<T> getAll() {
        return getSessionFactory().getCurrentSession().createCriteria(entityClass).list();
    }

    public Integer save(T entity) {
        return (Integer) getSessionFactory().getCurrentSession().save(entity);
    }
} 
```

在这里，我有一个关于这门课的问题。我想知道如果我用 HibernateDaoSupport 扩展 BaseDaoImpl 是否会更好？如果我这样做，那么保存方法的替代版本将是：

```
public Integer save(final T entity) {
    return getHibernateTemplate().execute(new HibernateCallback<Integer>() {

        @Override
        public Integer doInHibernate(Session session) throws HibernateException, SQLException {
            return (Integer) session.save(entity);
        }
    });
} 
```

哪一个更好？

接下来是IBaseDao接口：

```
public interface IBaseDao<T extends Base> extends ISupportSave<T, Integer> {

    List<T> getAll();
} 
```

和 ISupportSave：

```
public interface ISupportSave<T extends Base, U extends Number> {

    U save(T entity);
} 
```

UserDaoImpl 实现了 IUserDao，它是：

```
public interface IUserDao extends IBaseDao<User> {

} 
```

接下来是服务层，在我描述的其他类中，userManager 是事务性的：

```
@Transactional
public class UserManagerImpl extends BaseManagerImpl<User> implements IUserManager {

    @SuppressWarnings("unused")
    private IUserDao userDao;

    public void setUserDao(IUserDao userDao) {
        super.setEntityDao(userDao);
        this.userDao = userDao;
    }   
} 
```

BaseManagerImpl 是一个由 UserManagerImpl 扩展的抽象类：

```
@Transactional
public abstract class BaseManagerImpl<T extends Base> implements IBaseManager<T> {

    private IBaseDao<T> entityDao;

    public void setEntityDao(IBaseDao<T> entityDao) {
        this.entityDao = entityDao;
    }

    @Transactional(readOnly = false, propagation = Propagation.REQUIRED)
    public Integer save(T entity) {
        return entityDao.save(entity);
    }
} 
```

以下是 IBaseManager：

```
public interface IBaseManager<T extends Base> {

    Integer save(T entity);
} 
```

IUserManager 是：

```
public interface IUserManager extends IBaseManager<User> {

} 
```

我没有给模型课。主要是我有实现 IUser 并扩展 Base 的用户。IUser 依次扩展了 IBase 并且 Base 实现了 IBase。

现在我想知道上述设计是否正确，是否能满足我的要求。

任何建议都会对我很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T14:13:45.870

1.  在 Spring 3.1 中不再推荐使用 HibernateTemplate。看[这里](http://forum.springsource.org/showthread.php?117227-Missing-Hibernate-Classes-Interfaces-in-spring-orm-3.1.0.RC1)

2.  我无法评估您的服务/dao 层设计，因为您的项目只有一个粗略的上下文。但我建议你看看[appfuse 项目](http://appfuse.org/display/APF/Home)，我相信你会从它的源代码中得到很好的提示。

# jquery - 使用动态网址打开文档上的新选项卡

> ID：10371750
> 
> 赞同：0
> 
> 时间：2012-04-29T11:29:01.013
> 
> 标签：jquery

我有一个 div，它在键上（实时事件/ajax）上填充了链接（url）。我想在新选项卡中操作此特定 div 中的所有链接，所以我尝试了：

```
$("#div a").attr("target","_blank"); 
```

我将它放在准备好的文档中，并在 live.key 中，不起作用。我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:33:59.117

您应该改用[window.open](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)。请注意，默认情况下，几乎所有浏览器都不允许在不点击用户的情况下打开新标签。这称为弹出窗口阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:34:16.983

没关系这个问题......我傻......我只需要把它放在ajax请求中......

# php - CodeIgniter - 结合表单验证和文件上传

> ID：10371755
> 
> 赞同：1
> 
> 时间：2012-04-29T11:29:56.283
> 
> 标签：php

我想创建带有一些字段的文件上传，用于上传文件的标题和摘要。我也看过[这个](https://stackoverflow.com/questions/5177421/codeigniter-form-validation-and-file-upload-data)问题，但我不完全理解。

```
function someform()
{
   // some variables for fields
   ($this->form_validation->run() == FALSE)
   {

   }
   else
   {
      // how to check if the file was uploaded?
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T13:39:27.993

您应该检查文件上传以外的所有其他字段的验证。验证成功后，检查文件。例子：

```
function someform()
{
   // some variables for fields
   ($this->form_validation->run() == TRUE)
   {

       $config['upload_path'] = './uploads/';
       $config['allowed_types'] = 'gif|jpg|png';
       $config['max_size'] = '100';
       $config['max_width'] = '1024';
       $config['max_height'] = '768';

       $this->load->library('upload', $config);

       $fileTagName = 'myfile'; // e.g <input type='file' name='myfile' />    
       if ($this->upload->do_upload($fileTagName))) {
           //Success in validation of all fields.
       }
       else {
           //Failed to upload file.
           echo $this->upload->display_errors('', '');
       }
   }
   else
   {
      //Other fields failed.
   }
} 
```

# c# - WMI SystemSlot 到 PNPEntity

> ID：10371758
> 
> 赞同：1
> 
> 时间：2012-04-29T11:30:40.613
> 
> 标签：c#, wmi

将 Win32_SystemSlot 映射到 Win32_PNPEntity 的任何方式？

基本上，我想获得连接的 PCI 卡的制造商，但 SystemSlot 的数据什么也没提供。

SystemSlot 甚至不提供 PNP 设备 ID，所以我不能那样映射它。

我只需要基本的 PCI 卡信息，包括制造商！

# php - 将 URL 与一系列缩短服务匹配

> ID：10371767
> 
> 赞同：1
> 
> 时间：2012-04-29T11:32:13.983
> 
> 标签：php, regex

考虑以下 URL 列表：

```
1 http://www.cnn.com/international/stories/423423532
2 http://www.traderscreener.com/blah
3 http://is.gd/fsdaGdfd3
4 http://goo.gl/23V534
5 http://bit.ly/54HFD
6 http://stackoverflow.com/question/ask 
```

我想将缩短的 URL 扩展为原始形式：

```
$headers = get_headers($URL, 1);
if (!empty($headers['Location'])) {
  $headers['Location'] = (array) $headers['Location'];
  $URL = array_pop($headers['Location']);
} 
```

但是，我需要将所有 URL 与一系列缩短服务进行匹配：

```
$array(
  'is.gd', 'bit.ly', 'goo.gl', 'wibi.us', 'tinyurl.com' // etc
) 
```

在这种情况下，这将不得不过滤掉 URL 3、4 和 5。我相信最简单的方法是抓取`***`. `http://***/blah`由于我使用正则表达式的经验很少，所以需要什么正则表达式？还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:39:18.917

```
preg_match('/^http:\/\/(is\.gd|bit\.ly|goog\.gl\|wibi\.us|tinyurl\.com)/i', $URL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T11:42:37.927

到目前为止，最简单的方法是不建立黑名单。相反，查询 URL 并查看它是否重定向。发送 HEAD 请求，并查找状态码。如果是 3xx，则存在重定向，因此您应该查找“Location”标头并将其用作新 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T11:39:54.383

如果您确定 URL 将采用该格式，则可以使用explode()。

```
$url = "http://bit.ly/54HFD";
$tem = explode("/", $url);

$needles = array(
  'is.gd', 'bit.ly', 'goo.gl', 'wibi.us', 'tinyurl.com' // etc
)

foreach($needles as $needle) {
         $res = strpos($tem[2], $needle);
         if ($res !== false) DO_SOMEHING
} 
```

# php - 如何在下拉 PHP MySQL 中设置所选项目

> ID：10371769
> 
> 赞同：1
> 
> 时间：2012-04-29T11:33:06.440
> 
> 标签：php, mysql, drop-down-menu

我有一个`bus`带有列的表`bus_id, bus_no`。

我尝试使用多重选择回显多重，我尝试了下面的代码，但它重复了`bus_no`.

请帮助我回显所有总线并`selected`在选定的总线旁边回显。

```
<form name="editstudent" method="get" action="testmulti.php">
<select name="numBus[]" multiple>

<?php
$selBus=mysql_query("SELECT * FROM najdsy_bus order by bus_id");
while ($rowBus=mysql_fetch_array($selBus)) {
    foreach ($numBus as $key=> $value) {
        if ($rowBus['bus_id']==$value) {
            $SelectedBus = "selected";
        } else {
            $SelectedBus = "";
        }
        echo '<option value="'.$rowBus['bus_id'].'"'.$SelectedBus.'>'.$rowBus['bus_no'].' '.$SelectedBus.'</option>';
    }
}
?>
</select>
<br/>
<input type="submit" value="test">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:37:17.883

替换`$rowBus[bus_no]`到`$rowBus['bus_no']`和`$rowBus[bus_id]`到`$rowBus['bus_id']`

这种变化的原因是 $rowBus 是一个具有这样结构的数组`Array ([bus_id] => value)`。如您所见，它的键是一个字符串，因此要访问它，您必须“告诉” php 来查找它。

字符串可以用`"some_string"`或表示`'some_string'`。因为 key 是一些没有任何特殊格式的文本以获得更好的性能，所以建议您使用`'`而不是`"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:40:13.230

看来你不应该`echo '<option value="'...`把`foreach`. 将其更改为：

```
while ($rowBus=mysql_fetch_array($selBus)) {
  $SelectedBus="";
  foreach ($numBus as $key => $value){
    if ($rowBus["bus_id"]==$value){
      $SelectedBus="selected";
    }
  }
  echo '<option value="'.$rowBus["bus_id"].'"'.$SelectedBus.'>'
     .$rowBus["bus_no"].' '.$SelectedBus.'</option>';
} 
```

# c# - 错误：传入字典的模型项为空，但此字典需要“System.DateTime”类型的非空模型项

> ID：10371770
> 
> 赞同：6
> 
> 时间：2012-04-29T11:33:07.610
> 
> 标签：c#, asp.net-mvc-4

在我的模型中

```
[DataType(DataType.Date)]
    [Display(Name="Event Date")]
    [DisplayFormat(DataFormatString = "{0:d}")]
    //[DisplayFormat(ApplyFormatInEditMode=true ,DataFormatString="{0:DD/MM/YYYY}")]
    public DateTime EventDate { get; set; } 
```

在我的视图中（Create.cshtml）

```
<div class="editor-label">
        @Html.LabelFor(model => model.EventDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.EventDate)
        @Html.ValidationMessageFor(model => model.EventDate)
    </div> 
```

在 Shared/EditorTemplates/Date.cshtml

```
@model DateTime
@Html.TextBox("", String.Format("{0:d}", Model.ToShortDateString()),
  new { @class = "datefield", type = "date" }) 
```

并出现以下错误

```
The model item passed into the dictionary is null, but this dictionary requires a non-null model item of type 'System.DateTime'. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:08:10.183

谢谢解决了....只需将脚本放入文件中..

```
@model Nullable<DateTime>

@{
     DateTime dt = DateTime.Now;
 if (Model != null)
 {
     dt = (System.DateTime)Model;

 }
@Html.TextBox("", String.Format("{0:d}", dt.ToShortDateString()), new { @class = "datefield", type = "date" })
} 

<script type='text/javascript'>
    $(document).ready(function () {
        $(".datefield").datepicker({
            //      buttonImage: "/content/images/calendar.gif",
            //      showOn: "both",
            //      defaultDate: $("#calendar-inline").attr('rel')

            showAnim: 'slideDown',
            dateFormat: 'dd/mm/yy'

        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T11:40:08.830

尝试将您定义`EventDate`为可为空的类型：`DateTime?`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T06:15:37.673

您将需要`DateTime?`用作模型，并直接处理空值。

在可空类型上，您调用`.HasValue`以查看值是否实际上为空，或者使用`??`. 这就是我的一些设置代码的工作方式：

```
// get the date the editor will work with, or use today's date if it is null
DateTime workingDate = if (Model.HasValue) ? Model.Value : DateTime.Now;

// check the model metadata to see if the underlying model type was nullable or not
bool isNullable = ViewData.ModelMetadata.IsNullableValueType;

// get the min date passed in as optional params.  default to some reasonable timeframe
var minDate = ViewBag.MinDate ?? DateTime.Now.AddDays(-30)

// now start drawing the editor 
```

[这篇博](http://mgolchin.net/posts/21/dive-deep-into-mvc-modelmetadata-and-modelmetadataprovider)文是开始阅读一些属性的好地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T19:44:41.860

虽然这是一个错误的时间问题，但我有另一种方法。您可以在模型上创建一个构造函数并使用一些值初始化日期属性，比如今天的日期。然后在从控制器创建的操作方法上，您可以将模型的新实例作为参数传递给返回视图语句。

# sql - 在 VB.NET 中更新查询

> ID：10371775
> 
> 赞同：0
> 
> 时间：2012-04-29T11:33:21.087
> 
> 标签：sql, sql-server, vb.net

```
 Dim ds As New DataSet
        ds = executeCommand("update travels set  travelpackageid='" & txtCMUser.Text & "' , no_of_person='" & txtMem.Text & "', book_date='" & txtArrivalv.Text & "',type_of_vechile='" & DropDownListTypevechile.Text & "',travel_package='" & DropDownListPackages.Text & "' where cust_id =") 
```

我已使用此查询更新我的 travels 表，但出现以下错误：

> 无效的回发或回调参数。使用配置或页面中的 <%@ Page EnableEventValidation="true" %> 启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:35:03.000

您在输入字符串之一中有一个“<”字符。

在旁注中，我希望你正在清理你的输入。否则，可能会发生[不好的事情](http://xkcd.com/327/):)

# css - 选择第 7n 个项目，包括第一个带有 css nth-child 的项目

> ID：10371777
> 
> 赞同：2
> 
> 时间：2012-04-29T11:33:30.347
> 
> 标签：css, css-selectors

使用 css :nth-child 伪选择器。我如何选择每 7n 个项目，包括第一个项目（即 0 索引处的项目）。
例如：

*   1.突出我
*   2
*   3
*   4
*   5
*   6
*   7.突出我
*   8
*   9
*   10
*   11
*   12
*   13
*   14.突出我

我试过 :nth-child(7n) 但它与第一​​项不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T11:39:06.087

采用：

```
:nth-child(6n+1) { ... } 
```

**[工作示例](http://jsbin.com/uqesud/4)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T13:18:01.127

您可以混合编写两种或多种样式：

```
:first-child, :nth-child(7n) {
  .
  .
  .
} 
```

这样就可以了！

# javascript - 可以动态适应数组中图像数量的图像滑块

> ID：10371778
> 
> 赞同：1
> 
> 时间：2012-04-29T11:33:33.203
> 
> 标签：javascript

所以我找到了这个脚本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Simple Slide Show with jQuery</title>
    <script type='text/javascript'
    src='http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js'>
    </script>
    <script type="text/javascript">
        var imgs = [
        'images/emo.jpg',
        'images/icon068.gif',
        'images/icon260.jpg'];
        var cnt = imgs.length;

        $(function() {
            setInterval(Slider, 3000);
        });

        function Slider() {
        $('#imageSlide').fadeOut("slow", function() {
           $(this).attr('src', imgs[(imgs.length++) % cnt]).fadeIn("slow");
        });
        }
</script>
</head>
<body>
    <img id="imageSlide" alt="" src="" />
</body>
</html> 
```

这几乎对我有用。

如何转换它以便图像不是硬编码但脚本动态适应图像数量？我打算经常更改滑块图像 - 图像的数量并不总是相同的。

我不是 javascript 专家，所以如果它很简单，请不要笑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:44:53.967

您的代码应该适用于动态图像数组。

使用这样的东西：

```
function addImage(url) { 
   imgs.push(url); 
   cnt = imgs.length; 
}
function removeImage(url) { 
   if( imgs.indexOf(url) > -1 ) {
     imgs.splice( imgs.indexOf(url), 1 ); 
     cnt = imgs.length;
   } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T12:10:36.443

从查看源代码来看，脚本似乎不应该工作：当数组的长度设置为零时，它变为空 - 即使稍后将数组的长度改回（在 Chrome 中测试和验证）。

检查 jQuery 循环插件 (http://jquery.malsup.com/cycle/)。由于您已经在使用 jQuery（或脚本），这可能对您来说是完美的 - 只需生成一个包含所有图像的 div，然后告诉插件循环它们，然后根据需要添加新图像，插件应该自动使用它们。

这是此插件的基本演示；使用超级简单（链接jQuery，链接插件，包含图片，将插件指向图片）：http:
[//jquery.malsup.com/cycle/basic.html](http://jquery.malsup.com/cycle/basic.html)（源代码）

如果需要，您可以设置自定义插件的选项列表：http:
[//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)
特别感兴趣的是：fx（使用的过渡），速度，缓动（过渡的速度曲线）。

编辑：这是我写的一个小脚本（未经测试）：

```
Cycler=function(container){
  var container=$(container);
  var running=false;
  var stopping=false;

  this.start=function(){
    stopping=false;
    if(!running) run();
  }

  this.stop=function(){
    stopping=true;
  }

  var run=function(){
    if(stopping){
      running=false;
      stopping=false;
      return;
    }
    running=true;
    var old=container.find(':visible');
    var new=old.nextSibling();
    if(!new.length) new=container.children(':first');

    old.fadeOut('slow');
    new.fadeIn('slow', run);
  }
} 
```

它远非完美，但你可以从那开始。

# java - Glassfish CDI 中的性能

> ID：10371786
> 
> 赞同：2
> 
> 时间：2012-04-29T11:34:26.627
> 
> 标签：java, glassfish, osgi, cdi

我想使用 OSGI 和 CDI 在 Glassfish 3.1.2 中开发 CDI 应用程序。但我不知道 CDI 应用程序中的性能损失是什么。我可以在多线程应用程序中使用 CDI 吗？我可以使用 CDI 传递大型数据结构吗？

最良好的祝愿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:41:46.917

使用 CDI 会有性能损失，但在我们部署到 glassfish 的几乎所有情况下，与正在发生的其他事情相比，它可以忽略不计。除非您特别知道/怀疑代码的 CDI 部分是应用程序花费大部分时间的地方，否则我不会再考虑使用 CDI。当我们都知道优化已经完成时，我们的世界充满了过早的优化：当出现问题时，而不是在编写代码时。并通过分析找到要优化的点，然后优化这些点来完成。使用 CDI 节省的编码和维护时间几乎总是超过在需要时恢复到另一种技术所花费的时间。

# delphi - 画布绘图 - 如何改进此 Alpha 绘图程序？

> ID：10371787
> 
> 赞同：6
> 
> 时间：2012-04-29T11:34:28.513
> 
> 标签：delphi, delphi-xe

**我正在绘制具有不透明度（Alpha 透明度）能力的画布，如下所示：**

```
var
  Form1: TForm1;

  IsDrawing: Boolean;

implementation

{$R *.dfm}

procedure DrawOpacityBrush(ACanvas: TCanvas; X, Y: Integer; AColor: TColor; ASize: Integer; Opacity: Byte);
var
  Bmp: TBitmap;
  I, J: Integer;
  Pixels: PRGBQuad;
  ColorRgb: Integer;
  ColorR, ColorG, ColorB: Byte;
begin
  Bmp := TBitmap.Create;
  try
    Bmp.PixelFormat := pf32Bit; // needed for an alpha channel
    Bmp.SetSize(ASize, ASize);

    with Bmp.Canvas do
    begin
      Brush.Color := clFuchsia; // background color to mask out
      ColorRgb := ColorToRGB(Brush.Color);
      FillRect(Rect(0, 0, ASize, ASize));
      Pen.Color := AColor;
      Pen.Style := psSolid;
      Pen.Width := ASize;
      MoveTo(ASize div 2, ASize div 2);
      LineTo(ASize div 2, ASize div 2);
    end;

    ColorR := GetRValue(ColorRgb);
    ColorG := GetGValue(ColorRgb);
    ColorB := GetBValue(ColorRgb);

    for I := 0 to Bmp.Height-1 do
    begin
      Pixels := PRGBQuad(Bmp.ScanLine[I]);
      for J := 0 to Bmp.Width-1 do
      begin
        with Pixels^ do
        begin
          if (rgbRed = ColorR) and (rgbGreen = ColorG) and (rgbBlue = ColorB) then
            rgbReserved := 0
          else
            rgbReserved := Opacity;
          // must pre-multiply the pixel with its alpha channel before drawing
          rgbRed := (rgbRed * rgbReserved) div $FF;
          rgbGreen := (rgbGreen * rgbReserved) div $FF;
          rgbBlue := (rgbBlue * rgbReserved) div $FF;
        end;
        Inc(Pixels);
      end;
    end;

    ACanvas.Draw(X, Y, Bmp, 255);
  finally
    Bmp.Free;
  end;
end;

procedure TForm1.FormMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  case Button of
    mbLeft:
    begin
      IsDrawing := True;
      DrawOpacityBrush(Form1.Canvas, X, Y, clRed, 50, 85);
    end;
  end;
end;

procedure TForm1.FormMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
  if (GetAsyncKeyState(VK_LBUTTON) <> 0) and
     (IsDrawing) then
  begin
    DrawOpacityBrush(Form1.Canvas, X, Y, clRed, 50, 85);
  end;
end;

procedure TForm1.FormMouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  IsDrawing := False;
end; 
```

绘制`DrawOpacityBrush()`过程是 Remy Lebeau 对我最近提出的一个问题的更新：[如何在具有透明度和不透明度的画布上绘画？](https://stackoverflow.com/questions/10342603/how-to-paint-on-a-canvas-with-transparency-and-opacity/10343272#10343272)

虽然这行得通，但结果并不符合我现在所需要的。

目前，每次`DrawOpacityBrush()`在 MouseMove 中调用该过程时，它都会继续绘制画笔椭圆形状。这很糟糕，因为根据您在画布上移动鼠标的速度，输出并不像希望的那样。

希望这些示例图像可以更好地说明这一点：

![在此处输入图像描述](../Images/d6f8ce2ffcc320ea6981563b45430998.png)

**-**第一个红色画笔 我将鼠标从画布底部快速移动到顶部。
**-**第二个红色刷子我移动得慢了很多。

如您所见，不透明度已正确绘制，但圆圈也在不断重复绘制。

**我希望它做的是：**

**(1)**在椭圆周围画一条不透明线。

**(2)**可以选择完全阻止绘制任何椭圆。

这个模拟示例图像应该让我了解我希望如何绘制它：

![在此处输入图像描述](../Images/9a8682aaf524ea2f2b2991c2220337a2.png)

3 条紫色画笔线显示**选项 (1)**。

为了实现**选项（2）**，画笔线内的圆圈不应该在那里。

这应该让您在绘图时花些时间，而不是在画布上疯狂地移动鼠标以希望获得所需的结果。只有当您决定返回刚刚制作的笔触时，该区域的不透明度才会变得更暗等。

**我怎样才能实现这些类型的绘图效果？**

我希望能够绘制到 TImage 上，因为这就是我目前正在做的事情，因此将 TCanvas 作为函数或过程中的参数传递将是理想的。我还将为我的绘图使用 MouseDown、MouseMove 和 MouseUp 事件。

**这是我使用 NGLN 提供的方法得到的输出：**

![在此处输入图像描述](../Images/9ddcf0e731618fda255777d439c65ebd.png)

不透明度似乎也适用于图像，它应该只是折线。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T12:23:05.643

那为什么不直接画一条折线呢？

```
unit Unit1;

interface

uses
  Windows, Classes, Graphics, Controls, Forms, ExtCtrls;

type
  TPolyLine = record
    Count: Integer;
    Points: array of TPoint;
  end;

  TPolyLines = array of TPolyLine;

  TForm1 = class(TForm)
    PaintBox: TPaintBox;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure FormResize(Sender: TObject);
     procedure PaintBoxMouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure PaintBoxMouseMove(Sender: TObject; Shift: TShiftState; X,
      Y: Integer);
    procedure PaintBoxPaint(Sender: TObject);
  private
    FBlendFunc: BLENDFUNCTION;
    FBmp: TBitmap;
    FPolyLineCount: Integer;
    FPolyLines: TPolyLines;
    procedure AddPoint(APoint: TPoint);
    function LastPoint: TPoint;
    procedure NewPolyLine;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.AddPoint(APoint: TPoint);
begin
  with FPolyLines[FPolyLineCount - 1] do
  begin
    if Length(Points) = Count then
      SetLength(Points, Count + 64);
    Points[Count] := APoint;
    Inc(Count);
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FBmp := TBitmap.Create;
  FBmp.Canvas.Brush.Color := clWhite;
  FBmp.Canvas.Pen.Width := 30;
  FBmp.Canvas.Pen.Color := clRed;
  FBlendFunc.BlendOp := AC_SRC_OVER;
  FBlendFunc.SourceConstantAlpha := 80;
  DoubleBuffered := True;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FBmp.Free;
end;

procedure TForm1.FormResize(Sender: TObject);
begin
  FBmp.Width := PaintBox.Width;
  FBmp.Height := PaintBox.Height;
end;

function TForm1.LastPoint: TPoint;
begin
  with FPolyLines[FPolyLineCount - 1] do
    Result := Points[Count - 1];
end;

procedure TForm1.NewPolyLine;
begin
  Inc(FPolyLineCount);
  SetLength(FPolyLines, FPolyLineCount);
  FPolyLines[FPolyLineCount - 1].Count := 0;
end;

procedure TForm1.PaintBoxMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  if ssLeft in Shift then
  begin
    NewPolyLine;
    AddPoint(Point(X, Y));
    PaintBox.Invalidate;
  end;
end;

procedure TForm1.PaintBoxMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
  if ssLeft in Shift then
    if Sqr(LastPoint.X - X) + Sqr(LastPoint.Y - Y) > 30 then
    begin
      AddPoint(Point(X, Y));
      PaintBox.Invalidate;
    end;
end;

procedure TForm1.PaintBoxPaint(Sender: TObject);
var
  R: TRect;
  I: Integer;
begin
  R := PaintBox.ClientRect;
  FBmp.Canvas.FillRect(R);
  for I := 0 to FPolyLineCount - 1 do
    with FPolyLines[I] do
      FBmp.Canvas.Polyline(Copy(Points, 0, Count));
  Windows.AlphaBlend(PaintBox.Canvas.Handle, 0, 0, R.Right, R.Bottom,
    FBmp.Canvas.Handle, 0, 0, R.Right, R.Bottom, FBlendFunc);
end;

end. 
```

![混合多段线](../Images/dccea6203d9413f3fdbdcce5f46458fa.png)

第二张图片显示了如何将其与背景结合起来，并通过以下对代码的次要添加获得，而`FGraphic`这是运行时加载的图片：

```
procedure TForm1.PaintBoxPaint(Sender: TObject);
var
  R: TRect;
  I: Integer;
begin
  R := PaintBox.ClientRect;
  FBmp.Canvas.FillRect(R);
  for I := 0 to FPolyLineCount - 1 do
    with FPolyLines[I] do
      FBmp.Canvas.Polyline(Copy(Points, 0, Count));
  PaintBox.Canvas.StretchDraw(R, FGraphic);
  Windows.AlphaBlend(PaintBox.Canvas.Handle, 0, 0, R.Right, R.Bottom,
    FBmp.Canvas.Handle, 0, 0, R.Right, R.Bottom, FBlendFunc);
end; 
```

*或者，要结合已绘制的作品（如您的`Image`），请将其画布复制到`PaintBox`：*

```
procedure TForm1.PaintBoxPaint(Sender: TObject);
var
  R: TRect;
  I: Integer;
begin
  R := PaintBox.ClientRect;
  FBmp.Canvas.FillRect(R);
  FBmp.Canvas.Polyline(Copy(FPoly, 0, FCount));
  for I := 0 to FPolyLineCount - 1 do
    with FPolyLines[I] do
      FBmp.Canvas.Polyline(Copy(Points, 0, Count));
  Windows.AlphaBlend(PaintBox.Canvas.Handle, 0, 0, R.Right, R.Bottom,
    FBmp.Canvas.Handle, 0, 0, R.Right, R.Bottom, FBlendFunc);
end; 
```

*但就像大卫在评论中提到的那样，我也强烈建议把所有东西都画在`PaintBox`: 这就是它的用途。*

# android - 安卓中的“Ə”字符

> ID：10371788
> 
> 赞同：3
> 
> 时间：2012-04-29T11:34:31.043
> 
> 标签：android, unicode, character-encoding, special-characters, android-webview

我正在为 Eclipse 上的 Android 编写小型应用程序。该应用程序包含 WebView 组件和不同类型的文本。文本还包含不同的 unicode 字符，例如*ü,ş,ö,ğ,ə*。我用相应的 html 代码替换了所有 unicode 字符（例如：）`&#252; &#601; &#231;`。但只有“ə”字符在模拟器中无法正常工作（我还没有在真实设备上检查）。"ü,ş,ç" 工作正常，因为它们也使用更流行的土耳其字母表。土耳其语和阿塞拜疆语非常相似，但只有最后一个有“ə”字母。如果我找不到任何解决这个问题的方法，我应该使用“Ää”而不是“Əə”，它们是一样的，但第一个是过去使用的，国家的新一代年轻一代不知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T13:15:57.723

在 Android 2.3.5 上测试，我惊讶地发现它的任何预装字体都不支持大写的 schwa “Ə”，但小 schwa “ə” 是。原因可能是 schwa 在语音学 (IPA) 中用于表示中性 (schwa) 元音，并且始终仅小写。因此字体覆盖考虑了这一点，但并非旨在覆盖使用字母的自然语言，在这两种情况下，无论出于何种目的，书写系统都有它。

有多种解决方法：

1.  在您考虑时使用 Ä 代表Ə。那么你可能也应该使用 ä 而不是 ə 。
2.  用 A 表示Ə（和 a 表示 ə）。当写阿塞拜疆人的名字时，这在英文文本中很常见。不正确，但很常见。
3.  使用较大字体大小的 ə 来模拟Ə。一个丑陋的黑客。有弄乱行间距的风险，除其他外。
4.  使用Ә，即 U+04DB 西里尔大写字母 schwa。奇怪的是，这存在于 Android 字体中。它通常具有与拉丁语 schwa 相同的形状；它们被编码为不同的字符主要是因为它们属于不同的书写系统。当然，这是一种 hack，但反对意见是理论上的，而不是实际的。但是，如果您以对语言敏感的方式处理文本（例如，拼写检查、自动翻译），就会出现问题，因为您原则上使用了所有错误的拼写。
5.  使用网络字体（可下载字体、嵌入字体），例如 Google 字体。但是，可能很难找到合适的字体（包含字符并在风格上与您的设计相匹配的字体），并且您需要决定是始终使用该字体还是仅用于问题字符（在后一种情况下，您将需要将其事件包装在`span`容器中以设置样式）。一项快速研究表明没有合适的谷歌字体用于此目的，但我可能错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-10T10:56:58.487

我已经通过这种方式解决了它：1）我从这里下载了支持阿塞拜疆语的字体：http: [//fontlar.info/](http://fontlar.info/) 2）然后我使用这个答案为所有项目显示自定义字体 [如何为一个整体设置自定义字体Android中的应用程序？](https://stackoverflow.com/questions/33923803/how-to-set-custom-font-for-a-whole-application-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:43:49.443

考虑安装更好的字体，比如[Gentium](http://scripts.sil.org/cms/scripts/page.php?item_id=Gentium)！

# java - 返回 Activity 时丢失 Intent extra

> ID：10371789
> 
> 赞同：12
> 
> 时间：2012-04-29T11:34:42.457
> 
> 标签：java, android

我有一个应用程序，其流程大致为：

*   启动 Main Activity，输入一些数据
*   启动 Activity A，在 Intent 中传递单个字符串
*   活动 A 使用字符串并为用户提供一些选项
*   有时使用会启动Activity B（将A留在后台）
*   当用户从 Activity B 返回时，将重新创建 Activity A（调用 onCreate）；我认为它已被删除以节省内存
*   getIntent() 返回的意图没有将数据传递给 Activity A 的原始实例

我知道数据在第一次调用中就在那里，因为如果不是，应用程序就会死掉。

我知道当用户返回 Activity A（通过“返回”键）时数据不存在，因为应用程序死掉了（来自 onCreate() 中 extras.getString(...) 的空指针）。

这是预期的行为吗？

我应该将附加包的内容保存在 onSaveInstanceState() 中吗？

编辑：下面的代码片段：

主活动使用以下方法启动新活动：

```
Intent i = new Intent(a, BookISBNSearch.class);
i.putExtra(BookISBNSearch.BY, "isbn");
a.startActivityForResult(i, R.id.ACTIVITY_CREATE_BOOK_ISBN); 
```

BookISBNSearch 中的 onCreate 内容如下：

```
...
Bundle extras = getIntent().getExtras();
mIsbn = extras.getString("isbn");
String by = extras.getString(BY);
... 
```

稍后使用它：

```
if (mIsbn != null) {
    ....do some stuff....
} else if (by.equals("isbn")) {
    ....do some other stuff.... 
```

用户可以从 BookISBNSearch 开始另一个活动。启动新活动的代码是：

```
/*
 * Start scanner activity.
 */
private void startScannerActivity() {
    if (mScannerIntent == null) {
        mScannerIntent = new Intent("com.google.zxing.client.android.SCAN");
    }
    if (!mScannerStarted) {
        mScannerStarted = true;
        startActivityForResult(mScannerIntent, ACTIVITY_SCAN);
    }
} 
```

用户运行扫描仪，做了一堆其他的事情，最终按下“返回”键返回到这个活动。在这一点上，他们得到了下面列出的崩溃。相关部分：

```
at com.eleybourn.bookcatalogue.BookISBNSearch.onCreate(BookISBNSearch.java:142) 
```

对应于以下行：

```
} else if (by.equals("isbn")) { 
```

从中我得出结论'by'为空。

此外，还有其他可能的代码路径启动其他（非外部）活动，这些活动表现出相同的问题。即使打开了自动删除活动，这也不会发生在我的手机中，也不会发生在 AVD 中。

它只发生在一小部分用户身上。

```
java.lang.NullPointerException
at com.eleybourn.bookcatalogue.BookISBNSearch.onCreate(BookISBNSearch.java:142)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1050)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:55:58.973

尝试将您的意图数据写入已保存的实例！

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if(getIntent() != null) {
        // Activity was started and got an Intent with data
        ...
    } else if(savedInstanceState != null) {
        // No intent is available, try getting data from savedInstance
        ...
    }

}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    if(outState != null) {
        // Write here your data
        ...
    }
} 
```

我希望这可以帮到你 ：）

# json - JSON 编码类似于 facebook 图

> ID：10371796
> 
> 赞同：0
> 
> 时间：2012-04-29T11:36:23.767
> 
> 标签：json

无论如何都知道 json 编码完全像这样[https://graph.facebook.com/4](https://graph.facebook.com/4)像 facebook graph 一样排列？

因为当我简单地写 json 时 php echo json_encode 这会出来`{"id":"4","name":"Mark Zuckerberg","first_name":"Mark","last_name":"Zuckerberg","link":"https://www.facebook.com/zuck","username":"zuck","gender":"male","locale":"en_US"}`

只是一条直线... :D 有人知道吗？:D 请分享

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:47:10.003

对于 PHP >=5.4.0，您可以在使用 json_encode 时使用 JSON_PRETTY_PRINT 选项

对于 PHP < 5.4.0，您可以使用来自 PHP 手册页面[http://www.php.net/manual/en/function.json-encode.php#80339中用户贡献注释的代码](http://www.php.net/manual/en/function.json-encode.php#80339)

```
<?php 
// Pretty print some JSON 
function json_format($json) 
{ 
    $tab = "  "; 
    $new_json = ""; 
    $indent_level = 0; 
    $in_string = false; 

    $json_obj = json_decode($json); 

    if($json_obj === false) 
        return false; 

    $json = json_encode($json_obj); 
    $len = strlen($json); 

    for($c = 0; $c < $len; $c++) 
    { 
        $char = $json[$c]; 
        switch($char) 
        { 
            case '{': 
            case '[': 
                if(!$in_string) 
                { 
                    $new_json .= $char . "\n" . str_repeat($tab, $indent_level+1); 
                    $indent_level++; 
                } 
                else 
                { 
                    $new_json .= $char; 
                } 
                break; 
            case '}': 
            case ']': 
                if(!$in_string) 
                { 
                    $indent_level--; 
                    $new_json .= "\n" . str_repeat($tab, $indent_level) . $char; 
                } 
                else 
                { 
                    $new_json .= $char; 
                } 
                break; 
            case ',': 
                if(!$in_string) 
                { 
                    $new_json .= ",\n" . str_repeat($tab, $indent_level); 
                } 
                else 
                { 
                    $new_json .= $char; 
                } 
                break; 
            case ':': 
                if(!$in_string) 
                { 
                    $new_json .= ": "; 
                } 
                else 
                { 
                    $new_json .= $char; 
                } 
                break; 
            case '"': 
                if($c > 0 && $json[$c-1] != '\\') 
                { 
                    $in_string = !$in_string; 
                } 
            default: 
                $new_json .= $char; 
                break;                    
        } 
    } 

    return $new_json; 
} 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:40:51.740

如果您使用的是 FireFox，这可能会有所帮助！

[http://jsonview.com/](http://jsonview.com/)

或者只是使用这个...

[http://jsbeautifier.org/](http://jsbeautifier.org/)

希望这些帮助！

# php - 如何使用 AJAX 作为 iframe 的替代品？

> ID：10371801
> 
> 赞同：2
> 
> 时间：2012-04-29T11:37:28.563
> 
> 标签：php, ajax, iframe

目前我在我的网站上使用 iframe 来显示来自其他页面的内容，如表单。我遇到的问题是在登录页面上，当用户使用 iframe 中的表单登录时，它只会在登录 iframe 中显示下一页 - 这是完全没用的。

我听说 AJAX 对于这样的事情更加灵活和动态，但我不知道如何使用它，我查看了一些教程，但在显示页面中似乎并没有那么远页。

如何用 AJAX 替换我的 iframe？

预先感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T12:13:03.920

由于您不会使用 iFrame，因此您需要一个容器来放入您的页面。使用 AJAX，通常的做法是使用一个`<div>`元素来保存该数据。此外，jQuery 或其他支持 AJAX 的 Javascript 库将通过工作测试代码让您的生活更轻松，这样您就可以专注于您的业务逻辑而不是细节。因此，在您的 HTML 中，您将需要一个容器元素：

```
<div id="otherpage"></div> 
```

然后在一个包含的 javascript 文件中，您可以使用这个 jQuery：

```
$(document).ready(function() {
   $('#otherpage').load('otherpage.html', function() {
      alert('Load was performed.');
   });
}); 
```

当然，在使用它之前，请确保您也包含 jQuery。[本教程](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)应该可以帮助您开始使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-18T21:51:54.153

您面临的问题与 ajax 的关系比其他任何事情都多。

尝试在主机 html 中“预加载”您的 js 函数（不是通过 ajax 加载的函数），然后通过 ajax 加载特定的渲染 html。

然后，使用 jquery ".done( function(data) { ... " 方法调用您“预加载” << （包含在基本 html/文档中）的 js 函数，一旦它们准备就绪。

希望这有帮助，问候。

尝试这样的事情：

```
    $(文档).ready(函数(){
        $.ajax(
            网址：'./your_script.php',
            上下文：'文档'，
        ).done(函数(数据){
            $('#your_div').html( 数据 );
            your_js_function();
        })
    });

    // ---- 主html
    函数 your_js_function(){
        alert('知道了！');
    };

```

# perl - Perl MongoDB 插入错误消息

> ID：10371802
> 
> 赞同：3
> 
> 时间：2012-04-29T11:37:49.613
> 
> 标签：perl, mongodb

我有以下数据库，这是数据库中已有的对象

```
{ "_id" : ObjectId("001"), "password" : "test", "user" : "test"} 
```

东西添加到该集合中

1.索引用户和密码

2.用户唯一索引

当我尝试将相同的参数插入项目时

```
my $enter = $db->data->insert({'user'=>'test','password'=>'test'}); 
```

$enter 返回一个 ObjectID 的值（如果用户重复它应该得到一个错误消息而不是一个 Objectid）

通过 mongo shell

E11000 重复键错误索引：dataofitem.user

它显示错误但是当我尝试通过 Perl 模块（[https://metacpan.org/module/MongoDB](https://metacpan.org/module/MongoDB)）

它作为对象ID返回，我想知道为什么我没有收到错误消息而不是Objectid

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T16:37:51.900

MongoDB::Collection::insert 不检查错误。

尝试

```
my $enter = $db->data->insert({'user'=>'test','password'=>'test'}, {safe => 1}); 
```

使模块在失败时发出嘶嘶声。这记录在[MongoDB::Collection](https://metacpan.org/module/MongoDB%3a%3aCollection#insert-object-options-)

如果你想检查错误，你也可以这样做

```
my $error = $db->last_error(); 
```

如此[处所述](https://metacpan.org/module/MongoDB%3a%3aDatabase#last_error-options-)。

# c++ - 为什么 while (std::cin >> foo) 语法不起作用？

> ID：10371807
> 
> 赞同：1
> 
> 时间：2012-04-29T11:38:13.690
> 
> 标签：c++, cin

我正在以下地址阅读一些 C++ 文本：http: [//www.parashift.com/c++-faq-lite/new/istream-and-while.html](http://www.parashift.com/c++-faq-lite/new/istream-and-while.html)。

根据文字，我写了这段代码：

```
int sum = 0, value;
while(cin >> value) 
{
    cout << "value: " << value << endl;
    sum += value;
}
cout << "sum: " << sum << endl; 
```

如果输入是：`1 2 3 4 5`

然后while循环并没有像我预期的那样停止。我是不是误会了什么？（我使用的是 MS Visual C++ 2005）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T11:40:00.503

您的 while 循环将读取输入，直到输入流关闭。在 Windows 控制台中，这意味着直到用户按下 Ctrl+Z。

如果你想在用户按下回车之前读取输入，你需要做不同的事情。例如，您可以使用 getline 读取整行，然后将该行放入 stringstream 并在 while 循环中读取 - 或者您可以在读取每个值后使用类的`peek()`方法`istream`来检查下一个字符是否在流是换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:56:25.017

您可以设置退出循环的特殊值。

例如：

```
int sum = 0, value = 0;
while(value != -199) 
{
    cin >> value
    if(value != -199)   {
    cout << "value: " << value << endl;
    sum += value;
    }
}
cout << "sum: " << sum << endl; 
```

这个循环只有在你按下 -199 时才会退出（不一定是 -199，我选择它是因为它对大多数程序来说都是微不足道的）。如果您不将它们用作输入，它可能是 0 或 -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T03:26:01.480

> 在 Windows 控制台中，这意味着直到用户按下 Ctrl+Z

我会注意到，关于最佳答案，这不一定是*真的。*

输入运算符将在循环中无限期地保持活动状态，直到它变为*untrue*或*false*。就其本质而言，它希望将用户输入用于*integer*。鉴于您的示例，您必须输入任何非整数才能使其评估为假。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-29T11:46:13.073

您不需要 while 循环。`cin >> value`只有一次。

# android - 基于片段的菜单

> ID：10371808
> 
> 赞同：0
> 
> 时间：2012-04-29T11:38:18.317
> 
> 标签：android, android-layout

我想创建一个静态菜单。我的意思是在编译期间我会确切地知道应该有哪些项目，并且我想使用设计器创建它。我正在考虑使用两种方法：

*   `ListView`
*   `ScrollView`

`Fragment`在这两种情况下，我都想用 a 的一些实例或者更合适的东西来填充它（我不知道这样的东西是否存在 - 请告诉我它确实存在）

这`Fragment`不会很复杂，但它仍然不仅仅是一行文本。（图标、背景、文字，也许还有更多）

在另一个应用程序中，我已经创建了一个`ListView`使用片段，即在应用程序运行时动态创建的适配器。在这种情况下，尽管这种方法似乎不是最好的方法。

那么首先这可以通过设计师静态完成吗？

其次，您会推荐哪种观点，`ListView`或者`ScrollView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:47:53.203

> 那么首先这可以通过设计师静态完成吗？

如果“这个”是指使用`ListView`、`ScrollView`、`Fragment`、图标、背景和文本，那么通常是的。

> 其次，您会推荐哪种视图，ListView 还是 ScrollView？

两者都不。使用以下方法之一：

*   让您的应用程序在某些主要活动上打开（不是菜单，而是您将放入菜单中的其中一项），其中其余功能通过操作栏访问（使用 ActionBarSherlock 实现向后兼容性）

*   如果没有明显的“主要”活动要打开，让您的应用程序在[仪表板上](http://www.androiduipatterns.com/2011/02/ui-design-pattern-dashboard.html)打开，可能使用[此布局管理器类](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/ui/widget/DashboardLayout.java)，使用操作栏在“内部”活动中导航

# c# - Google Open Auth 2.0 在服务器端获得 access_token（错误请求错误，ProtocolError）

> ID：10371809
> 
> 赞同：0
> 
> 时间：2012-04-29T11:38:22.530
> 
> 标签：c#, asp.net-mvc-3, oauth-2.0

我正在尝试通过 Google Open Auth 2.0 实现用户身份验证。我已经成功地从谷歌获得了“代码”，现在我正试图获得 access_token 来访问用户的信息。这是控制器的代码：

```
 public void Google(string code)
    {
        if (!string.IsNullOrWhiteSpace(code))
        {
            var parameters = new Dictionary<string, string>();
            parameters["code"] = code;
            parameters["client_id"] = ConfigurationProvider.GoogleApplicationId;
            parameters["client_secret"] = ConfigurationProvider.GoogleClientSecret;
            parameters["redirect_uri"] = "http://localhost:1291" + Url.Action("GoogleAuth");
            parameters["grant_type"] = "authorization_code";

            var keyValuePairs = new string[parameters.Count];
            var i = 0;
            const string keyValueTemplate = "{0}={1}";

            foreach (var parameter in parameters)
            {
                keyValuePairs[i] = string.Format(keyValueTemplate, parameter.Key, parameter.Value);
                i++;
            }

            var parametersString = string.Join("&", keyValuePairs);
            // code=CODE&client_id=MY.apps.googleusercontent.com&client_secret=SECRET&redirect_uri=http://localhost:1291/Account/GoogleAuth&grant_type=authorization_code

            const string uri = "https://accounts.google.com/o/oauth2/token";

            var webClient = new WebClient();
            webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
            webClient.UploadString(uri, "POST", parametersString); // Here I get Bad Request exception.
        }
    } 
```

异常还包含等于“ProtocolError”的状态。即使我尝试使用空参数字符串进行 POST，我也会遇到同样的错误。

我将不胜感激任何意见或建议。

谢谢

**编辑：** 我也试过这个片段有和没有参数（有相同的错误）：

```
var data = new NameValueCollection
               {
                   {"code", code},
                   {"client_id", ConfigurationProvider.GoogleApplicationId},
                   {"client_secret", ConfigurationProvider.GoogleClientSecret},
                   {"redirect_uri", "http://localhost:1291" + Url.Action("GoogleAuth")},
                   {"grant_type", "authorization_code"}
               };

    var webClient = new WebClient();
    webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded"; // with and without this header...
    var result = webClient.UploadValues(uri, "POST", data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:59:00.710

您的 redirect_uri 必须正确转义，否则您会得到格式错误的 URL。

```
parameters["redirect_uri"] = Uri.EscapeDataString(_redirectUri); 
```

# django - Django 表单 PUT 和 DELETE http 方法

> ID：10371816
> 
> 赞同：4
> 
> 时间：2012-04-29T11:39:30.390
> 
> 标签：django, rest, tastypie

我正在使用 Django Tastypie 来获得一个 Rest API。它运作良好。

现在，我想以 django 形式使用我的 Rest API。我知道网络浏览器不能发送 a`PUT`或`DELETE`http 方法（只有`GET`and `POST`）。

例如，用`ExpressJS`(A `NodeJS`web framework) 解决问题：

```
<input type="hidden" name="_method" value="delete"/> 
```

我可以使用这个技巧。

是否可以使用 Django Form 做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:17:31.003

TastyPie 使用 X-Http-Method-Override 标头在内部支持此功能，但听起来该方法覆盖的标头不再可访问。如果您可以做到这一点，请参阅[此处](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L459)。

您最好的选择可能是使用这样的 Django 中间件：

```
METHODS = [ 'GET', 'PUT', 'POST', 'DELETE' ]

class DjangoMethodMiddleware(object):
    def process_request(self, request):
        meth = request.REQUEST.get('_method', None)
        if meth is None:
            return
        if meth in METHODS:
            request.method = meth
        else:
            pass # TODO: logging? 
```

将其存储在您站点的 middleware.py 中，然后您需要在 Django 设置中加载此中间件。魔法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:14:06.463

我认为您可以像这样使用 javascript 发送 Put 或 delete

```
$("your_form_id").submit(function(e){
    $.ajax({
        url: 'your url',
        type: "PUT",
        data: $("your_form_id").serialize(),
        cache: false,
        dataType: "text",
        success: function(data){
            do_something()
        },
        error: function() {
            console.log("ERROR");
        }
    });
}); 
```

甚至您的这种 hack 方法也可以工作....您必须在服务器端检查此值，然后相应地调用他的 rest API。

# c++ - 为 TCPClient 连接选择特定的以太网设备

> ID：10371819
> 
> 赞同：1
> 
> 时间：2012-04-29T11:39:58.820
> 
> 标签：c++, c, sockets

我目前正在使用套接字编程，但是在具有多个以太网设备的计算机上测试代码时，我无法连接到我的设备。

我如何定义它应该使用的以太网设备（Mac OS X）？

来源：

```
int sock, bytes_recieved;  
char send_data[1024],recv_data[1024];
struct hostent *host;
struct sockaddr_in server_addr;  

host = gethostbyname("192.168.100.4");

cout << "Start" << endl;

if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
    // perror("Socket");
    cout << "Socket error" << endl;
    exit(1);
}

server_addr.sin_family = AF_INET;     
server_addr.sin_port = htons(30002);   
server_addr.sin_addr = *((struct in_addr *)host->h_addr);
bzero(&(server_addr.sin_zero),8); 

if (connect(sock, (struct sockaddr *)&server_addr,
            sizeof(struct sockaddr)) == -1) 
{
    //  perror("Connect");
    cout << "Connect error" << endl;
    exit(1);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T11:44:28.063

[您可以使用绑定](http://linux.die.net/man/2/bind)函数指定监听地址。

地址 0.0.0.0 用于侦听属于计算机的所有接口和 IP 地址，或者您可以指定要侦听的特定 IP 地址，它将仅选择该地址所属的接口

编辑：页面底部的[MSDN示例更易于理解](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T13:32:55.670

TCP 连接有 2 个相同的端点，一旦建立就无法区分。两端都有一个IP地址和一个端口号，另一台计算机必须向它们发送数据。

该`connect`函数告诉客户端服务器正在侦听的 IP 地址和端口

该`bind`函数告诉客户端它应该在哪个 IP 地址和端口上侦听来自服务器的回复。如果不调用`bind()`操作系统会自动选择合适的值。

您遇到的问题（根据您所说）是操作系统选择了错误的默认 IP 地址。这就是绑定函数的用武之地。

下面是您的代码的（未经测试的）固定副本，它绑定到`192.168.100.2`. 您需要将其更改为属于您要使用的接口的地址。

如果您打开终端并输入`ifconfig -a`，它将打印所有接口的列表以及属于每个接口的 IP 地址。您应该将`192.168.100.2`以下代码中的值替换为属于您希望使用的接口的 IP 地址。

```
int sock, bytes_recieved;  
char send_data[1024],recv_data[1024];
struct hostent *host;
struct sockaddr_in server_addr, local_addr; //Added a new variable in here for our local address

host = gethostbyname("192.168.100.4"); //This is the address of the server we are connecting to

cout << "Start" << endl;

if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
    // perror("Socket");
    cout << "Socket error" << endl;
    exit(1);
}

//Now we want to bind an IP address
//This is an IP address that belongs to your computer, that will be used as the reply IP address
local_addr.sin_family = AF_INET;
local_addr.sin_addr.s_addr = inet_addr("192.168.100.2"); //CHANGE THIS: this is an address on your computer
local_addr.sin_port = htons(0); //Leave this as 0 and the operating system will choose a unused one for you
if bind(sock, (struct sockaddr *)&local_addr, sizeof(local_addr)) == -1) 
{
    //  perror("Bind");
    cout << "Bind error" << endl;
    exit(1);
}

//Set up the structure that tells us what server to connect to
server_addr.sin_family = AF_INET;     
server_addr.sin_port = htons(30002);   
server_addr.sin_addr = *((struct in_addr *)host->h_addr);
bzero(&(server_addr.sin_zero),8); 
//And connect to the server
if (connect(sock, (struct sockaddr *)&server_addr,
            sizeof(struct sockaddr)) == -1) 
{
    //  perror("Connect");
    cout << "Connect error" << endl;
    exit(1);
} 
```

# sql - 获取学说查询中的行数

> ID：10371823
> 
> 赞同：1
> 
> 时间：2012-04-29T11:40:28.583
> 
> 标签：sql, symfony, doctrine-orm

A 有这样的代码：

```
$em = $this->getDoctrine()->getEntityManager();
    $query = $em->createQuery("SELECT p FROM AcmeBlogBundle:Publish p
         ORDER BY p.update_date DESC");

   $query->setFirstResult(($page-1)*$ads_on_page);
   $query->setMaxResults($ads_on_page);      
   $posts = $query->getResult(); 
```

现在我正在尝试获取查询中的总行数（不取决于 setMeaResult 课程）。我尝试使用 count() 函数，但它不起作用......

* * *

所以我做了`SELECT p, count(p.id) as p_count FROM AcmeBlogBundle:Publish p ORDER BY update_date DESC`并且它有效，但我看到现在我只有一行 [我认为它是因为`count()`只返回一行]。所以我做了两个查询，如下所示：

```
$em = $this->getDoctrine()->getEntityManager();
    $query = $em->createQuery("SELECT p FROM AcmeBlogBundle:Publish p
            ORDER BY p.update_date DESC");
   $query->setFirstResult(($page-1)*$posts_on_page);
   $query->setMaxResults($posts_on_page);

   $count_query = $em->createQuery("SELECT COUNT(p.id) AS p_count FROM AcmeBlogBundle:Publish p
            ORDER BY p.update_date DESC");

   $posts = $query->getResult();
   $count = $count_query->getResult(); 
```

它运作良好，但我想知道这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:17:35.253

是的。第一个查询将仅获取不超过使用 设置的数量的记录数`setMaxResults`。第二个查询将计算一个查询可能返回的记录数。没有其他方法可以做两件不同的事情。

PS：如果要构建分页，请考虑使用[DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions)。它只允许您编写一次查询（但它仍然在下面执行两个查询）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T23:50:54.553

Doctrine 2.2 包括一个应该解决问题的分页类：http: [//docs.doctrine-project.org/en/latest/tutorials/pagination.html](http://docs.doctrine-project.org/en/latest/tutorials/pagination.html)

# performance - ExpressJS中partial的性能

> ID：10371827
> 
> 赞同：0
> 
> 时间：2012-04-29T11:41:11.250
> 
> 标签：performance, node.js, express

我想知道这个：

> 注意：使用部分集合时要小心，因为渲染长度为 100 的数组意味着我们必须渲染 100 个视图。对于简单的集合，您可以内联迭代而不是使用部分集合支持来减少开销。

所以这样做不是一个好主意吗？

```
<%- partial('overall_header.ejs') %>
<!-- Content of the website -->
<%- partial('overall_footer.ejs') %> 
```

或者我不应该部分使用变量和数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:59:33.090

您提到的“注意”是指为大型数组渲染部分，如指南中所示：

```
partial('comment', comments); 
```

其中“评论”是大数组。

在您的示例中，overall_header 和overall_footer 只呈现一次，这很好。没有可观的开销。

# java - 如何在 java REST 中使用引号

> ID：10371828
> 
> 赞同：1
> 
> 时间：2012-04-29T11:41:15.310
> 
> 标签：java, string, rest, escaping

我知道在java中，当你希望在字符串中使用引号时，你应该这样做：`private String quotationMarks = "\"";` 在eclipse中工作时一切都很好 - 但事情是这样的：我有一个返回字符串的方法 - 里面有引号; 当我通过 REST (curl) 调用此方法时，我也看到了反斜杠。假设我的方法返回了以下字符串：`what a good "day"`- 然后当我通过 curl 调用此方法时 - 我明白`what a great \"day\"`了，这对我不利。为什么会这样，我怎样才能避免返回这个反斜杠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:08:02.610

由于**JSON 中的键值以**{"text":"what a good day"} 格式双引号引起来。因此，如果 value 中已经有一个带引号的字符串，那么您正在使用的 json 构建器库将自动在双引号之前添加转义字符。例如。在你的情况下

> {"text":"多么美好的 \"day\""} - 有效的 json
> 
> {"text":"what a good "day""} - 无效的 json

您可以在[JSONLint检查您的 json 的有效性](http://jsonlint.com/)

# numpy - 为什么大肆宣传的英特尔 MKL Numpy 在我的 PC 上构建比 ATLAS 构建慢？

> ID：10371829
> 
> 赞同：1
> 
> 时间：2012-04-29T11:41:17.847
> 
> 标签：numpy, intel-mkl, atlas

我“双启动”Ubuntu 11.04、Ubuntu 12.04 和 Windows XP SP3 均已更新至最新版本。PC 是相当旧的 Intel Celeron D CPU 3.06GHz 和 2GB RAM

在 Ubuntu 11.04 中，我使用 ATLAS 编译了 Numpy（ATLAS 从源代码编译）
在 Ubuntu 12.04 中，我使用最新可用的 MKL、icc、ifort 构建了 Numpy
在 Windows XP 中，我使用 MKL 构建了 Numpy（来自 Christoph Gohlke 提供的 Python 包）
更多详细信息在这里：[http ://pastebin.com/raw.php?i=wxuFbyVg](http://pastebin.com/raw.php?i=wxuFbyVg)

我试过很简单：
`%timeit np.dot(np.ones((1000,1000)), np.ones((1000,1000)))`

并得到了这个结果：

```
Ubuntu ATLAS: 1 loops, best of 3: 457 ms per loop
Windows MKL:  1 loops, best of 3: 680 ms per loop
Ubuntu MKL:   1 loops, best of 3: 1.04 s per loop 
```

我认为上面是一个不好的例子，我搜索了许多可用比较中的一个，即第一个谷歌点击：[http ://dpinte.wordpress.com/2010/01/15/numpy-performance-improvement-with-the-mkl/](http://dpinte.wordpress.com/2010/01/15/numpy-performance-improvement-with-the-mkl/)

我测试了相同的功能：

```
%timeit test_eigenvalue()
Ubuntu Atlas: 1 loops, best of 3: 6.38 s per loop
Windows MKL:  1 loops, best of 3: 2.22 s per loop
Ubuntu MKL:   1 loops, best of 3: 3.58 s per loop

%timeit test_svd()
Ubuntu Atlas: 1 loops, best of 3: 2.13 s per loop
Windows MKL:  1 loops, best of 3: 2.06 s per loop
Ubuntu MKL:   1 loops, best of 3: 3.09 s per loop

%timeit test_inv()
Ubuntu Atlas: 1 loops, best of 3: 964 ms per loop
Windows MKL:  1 loops, best of 3: 1.02 s per loop
Ubuntu MKL:   1 loops, best of 3: 1.59 s per loop

%timeit test_det()
Ubuntu Atlas: 1 loops, best of 3: 308 ms per loop
Windows MKL:  1 loops, best of 3: 322 ms per loop
Ubuntu MKL:   1 loops, best of 3: 491 ms per loop

%timeit test_dot()
Ubuntu Atlas: 1 loops, best of 3: 1.5 s per loop        
Windows MKL:  1 loops, best of 3: 1.77 s per loop
Ubuntu MKL:   1 loops, best of 3: 2.77 s per loop 
```

所以 ATLAS 编译的 Numpy 出于某种原因有最好的结果。
有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T00:48:11.823

英特尔® MKL 主要针对服务器以及高性能台式机和移动处理器进行设计和优化。Celeron D 是一款性能相对较低的处理器，因此 MKL 从未针对它进行过优化。例如，如果您在最近的英特尔酷睿 i7 台式机上检查 SVD 性能，启用 MKL 的 NumPy 可以比启用 ATLAS 的 NumPy 快 80%。见这里： http: [//software.intel.com/en-us/articles/numpy-scipy-with-mkl/](http://software.intel.com/en-us/articles/numpy-scipy-with-mkl/)

顺便说一句，为了更快地回答 MKL 相关问题，请加入英特尔 MKL 论坛： http: [//software.intel.com/en-us/forums/intel-math-kernel-library/](http://software.intel.com/en-us/forums/intel-math-kernel-library/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-05T04:55:24.417

我还在我的台式机英特尔酷睿 i3 第 4 代 2.3 GHz、4GB 内存上使用了 numpy 和 mkl。我已经测试了两个 4096x4096 矩阵的点积。我已经在 python 3.5 64 位（迄今为止不支持 mkl）、不带 mkl 的 python 2.7 64 位和带 mkl 的 python 2.7 64 位的 anaconda 发行版上对它们进行了测试，结果几乎相似。他们都花了大约 73 秒（+- 0.5 秒）来计算这个（对于整数数据类型的情况），对于 float64 数据类型，他们都花了 260 毫秒（+- 5 毫秒），对于复杂数据类型，他们都花了大约 1 秒（+- 100 毫秒）秒。

我还发现，即使对于复杂的矩阵乘法，numpy dot 也是最好的。他们已经实施了高斯改进。

我已经使用 blas、python 中的 blas、python 中的 einsum 测试了 cython，但 dot 是最好的。

我需要更快地乘以矩阵

# cocoa-touch - 由单个视图组成的 UITableViewCell 中的可点击元素

> ID：10371834
> 
> 赞同：0
> 
> 时间：2012-04-29T11:41:52.217
> 
> 标签：cocoa-touch, uitableview

给出了很多建议，告诉人们将 UITableViewCell 合并到一个视图中。我想知道如何做到这一点并且仍然保留可点击的元素，就像他们在 Tweetbot 等应用程序中所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:04:53.203

一种方法是[NSAttributedStrings](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)。

这些处理起来有点棘手，但包装类作为开源存在，例如[TTTArrtibutedLabel](https://github.com/mattt/TTTAttributedLabel)

您链接到的线程将文章命名为“使用 UITableView 在 Tweetie 中快速滚动”。这篇文章已经不在网上了，但是一些[github 项目](https://github.com/dongsheng/fastscrolling)，自称是为了符合这篇文章。
实际上，这似乎是诀窍，UIView 子类`-drawRect:`用来绘制自己。要使用可点击字符串，请参阅 NSAttributedStrings。

PS：
感谢[回程机](http://web.archive.org/web/20100922230053/http://blog.atebits.com/2008/12/fast-scrolling-in-tweetie-with-uitableview/)，可以看文章，其实是对GitHub项目的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:39:46.140

我是通过委托的形式来做的。该视图定义了 tableView 的控制器遵循的协议。将控制器设置为视图的委托，当点击某个区域时，发送正确的消息。

# oop - 在 Lua 中进行类型检查的 OOP

> ID：10371838
> 
> 赞同：1
> 
> 时间：2012-04-29T11:42:55.777
> 
> 标签：oop, lua, typechecking

我正在尝试在 Lua 中实现具有继承的类。此外，在创建新对象时，需要进行某种“类型检查”。

一个特殊的要求是使用特定的语法来创建一个类（示例）：

```
Class({Volkswagen, Vehicle, model=String, speed=Number, driving=Boolean}) 
```

请注意，参数作为可变长度的列表传递。所以我需要一个函数来获取任意数量的参数：

```
function Class (arguments)
    name = arguments[1]
    superclass = arguments[2]
    ...
end 
```

前两个参数是类的名称和继承它的类的名称。

我确信解决方案很简单，但我完全不知道如何处理属性的键值对，例如......

```
print(arguments.model)
print(type(arguments.model)) 
```

...都是零。有什么想法可以获取属性的类型（字符串、布尔值、数字）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T12:52:34.113

这一行：

```
{Volkswagen, Vehicle, model=String, speed=Number, driving=Boolean} 
```

并不意味着你认为它意味着什么。是价值观。

当您这样做时`{Volkswagen}`，您所做的是告诉 Lua 获取当前存储在全局表中字符串 name 下的值`"Volkswagen"`。我假设那里存储了一些价值。

您的问题是`{model=String}`将当前存储在全局表中的字符串名称下的值`"String"`放入表中。*没有*名为 的全局变量的可能性很大`"String"`。这意味着你放在`nil`桌子上。

除非 LuaJava 定义它们，否则“属性”（字符串、布尔值、数字）不存在。它们只是空值。您不能传递空值。您可以传递一个*string*，但这是不同的。

你没有很好地解释你`Class`的这个功能到底应该做什么，所以我不能给你一个关于如何做你想做的更好的事情的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:56:35.940

如果你只是在寻找一个通用的 Lua 类系统，这里是我的实现： [https ://gist.github.com/1722329](https://gist.github.com/1722329)

它不支持类型检查，但应该可以使用“TypedClass”类轻松实现，作为所有严格类型类的基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:15:03.270

为了处理键值对，您可能需要使用内置表函数将引用的表传输到本地表：

```
function Class(params)
local arguments={}

function transfer(k, v)
  arguments[k]=v
end

--transfer referenced table to local table
table.foreach (params, transfer)

print(arguments[1])
print(arguments[2])
print(arguments.model)
print(arguments.speed)
print(arguments.driving) 
```

结尾

Class({"大众","Vehicle", model="" , speed=0 ,driving=false} )

# php - 如何优化从 php 中的巨大列表中存储和获取？

> ID：10371839
> 
> 赞同：0
> 
> 时间：2012-04-29T11:42:58.330
> 
> 标签：php, javascript, mysql, database

提前感谢您的帮助，

我有一百万个名字和昵称的列表，每个名字只有一个昵称。每个名字都有对应的昵称（即使相同）

我通常使用 PHP 和 MySQL 将数据存储在行中，然后使用 select 语句进行获取。我咨询您，因为此方法可能未优化音量。

将创建一个脚本，每次需要获取百万中大约 600 个名称的相应昵称，这将在每个用户页面加载时执行。

我有使用 PHP 和 MySQL 的经验

我可以以任何最好的方式构建数据，纯文本、mysql 或其他方式。

存储和获取此数据集的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:54:22.247

1.  ### 分页/延迟加载

    切勿一次加载所有项目。让它们逐步加载。现实生活中的例子是 Facebook 和 Twitter。它只加载一定数量的项目，然后当你到达底部或点击“加载更多”时，它会加载接下来的 N 个项目或谷歌，它每页只显示十亿个可能结果中的 N 个项目。

2.  ### 使用 JSON

    这些天来，我仍然看到人们在 AJAX 请求中返回格式化的 HTML——不要那样做。让您的服务器加载初始页面（具有初始 HTML），其余部分通过 AJAX 以 JSON 格式加载。当 JSON 数据到达时，让一些客户端模板脚本为您创建 HTML。这可以节省带宽和下载时间。

3.  ### 使用压缩

    很明显为什么你应该使用压缩。

4.  ### 仅加载 SQL 中的必填字段

    通常，您会加载所有列，因为“它们有一天可能有用” - 不。如果要加载一组昵称，让 SQL 只加载昵称。当然，配对时总是需要主键字段，所以在这种情况下，需要 2 列。

并且看到昵称和人之间只是一对一的关系，将其存储在同一张表中。几乎不需要它在另一个表中。这使您免于 JOIN 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:49:25.567

正如 eggyql 提到的，将索引添加到您的名称列。还为您的 sql 选择设置限制`SELECT name, nickname FROM your_table LIMIT 0, 10`

# windows - 每个线程如何拥有 CPU 寄存器

> ID：10371842
> 
> 赞同：5
> 
> 时间：2012-04-29T11:44:07.303
> 
> 标签：windows, process, cpu-registers, context-switch

在我读过的几个地方，

> 每个线程都有自己的一组 CPU 寄存器和自己的堆栈

在这里，我可以理解堆栈，它是一种数据结构。但是线程如何拥有自己的 CPU 寄存器。它们的数量是固定的，并且系统中正在运行的线程数量是无限的。

问候

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T11:52:25.833

是的，有固定数量的寄存器。

当操作系统从一个线程切换到另一个线程时，它会将完成线程的状态（包括所有寄存器的当前值）复制到其描述符中，然后将另一个线程的描述符中的值复制到寄存器中。

这些描述符存储在 RAM 中，尽管这部分是超线程着手修复的，允许一次将 2 个线程存储在单个 CPU 内核中，但这是一个完全不同的讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T11:48:23.910

当调度程序进行上下文切换（另一个线程获取它的 CPU 时间）时，它将当前上下文保存到内存中。上下文包含大部分寄存器（如果不是全部），当线程再次获得 CPU 时，它将从内存“加载回”到寄存器中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T11:48:26.300

当执行从/到线程切换时，寄存器被保存/恢复。

# ninject - Ninject 上下文绑定魔法

> ID：10371844
> 
> 赞同：0
> 
> 时间：2012-04-29T11:44:30.860
> 
> 标签：ninject

我的绑定有点奇怪。

我有一些事件源和想要订阅它们的类。我将有不同的源实例（尽管它们都是相同的类），但订阅者的类型可能会在不同的类之间发生变化。

到目前为止，我的方法是这样的：

```
public interface ISubscribeTo<T> where T : ISubscribable
{
  void Subscribe(T eventSource);
}

public interface ISubscribable {} 
```

我希望有任何类型在激活时都有一个传递给它`ISubscribeTo<T>`的实例。`ISubscribable`

`ActivationStrategy`当我使用 an来连接这些东西时，这非常简单。

我遇到的复杂情况是`ISubscribeTo<T>`s 取决于我正在激活的类。

在我的`ActivationStrategy`中，我调用了内核的`GetAll`方法，但我想以某种方式只获取已经为请求激活的实例。

有人对我如何实现这一目标有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:20:58.757

看看事件经纪人。它们使订阅来自其他组件的事件变得非常容易，而无需添加自己的机制。看[教程](http://code.google.com/p/bbvcommon/wiki/EventBrokerTutorial)

```
https://github.com/ninject/ninject.extensions.bbveventbroker 
```

# php - PHP 升级等级

> ID：10371846
> 
> 赞同：0
> 
> 时间：2012-04-29T11:44:44.023
> 
> 标签：php

我有两个数组；`$marks`和`$grades`。`$marks`包含学生打分的分数，`$grades`通过`$marks`以下函数循环获得。

```
 function convertMarkToGrade($mark)
    {
        if($mark<21)
            return "D";
        else if($mark<33)
            return "C";
        else if($mark<41)
            return "B";
        else if($mark<=50)
            return "A";
    } 
```

问题是我想`$grades`使用以下标准升级阵列中最小和第二小的等级

1.  升级是从最低等级到下一个更高等级，依此类推，即 B 到 A，C 到 B 等

2.  在成绩并列的情况下，分数最高的成绩将被升级。

例如：
让`$marks`。`array(25,43,36,16,28)`所以我们`$grades`得到`array("C","A","B","D","C")`. 我想生成一个，`$upgraded_grades =array("C","A","B","C","B")`即 D 级（最小的等级）被升级，C 级（第二小的等级但最高分数）也被升级。

我怎样才能在php中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:03:35.853

您可以使用关联数组。这是其中一种方法：

**编辑**：

```
//create associative array that has values as array of marks
$grades_arr = array("D" => array(), "C" => array(), "B" => array(), "A" => array() );

for($i = 0;$i < count($grades);$i++)
    array_push($grades_arr[$grades[$i]], $marks[$i]);

$loop = 0;
foreach($grades_arr as $key => &$value){
    if(empty($value))
        continue;

    if($loop == 2)
        break; //break after two upgrades
    else{
        $max = max($value);
        //unset the variable
        $value = array_diff($value, array($max));
        $value = array_values($value); 
        //push it into next higher grade
        array_push($grades_arr[chr(ord($key)-1)], $max);
        $loop++;
    }
}

print_r($grades_arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:57:07.160

如果我理解正确，你需要这个：

```
 $letterMark = ....; // "A","B","C" or "D"

    /* decrese number, that is increse letter by one
       but make sure it does not exceed 'A' mark 
    */
    $ordedMark = max(ord($letterMark)- 1, ord('A')); 
    $upscaledMark = chr($ordedMark);

    return $upscaledMark; 
```

我在这里将这个片段包装成函数：http: [//codepad.viper-7.com/i9Rtgi](http://codepad.viper-7.com/i9Rtgi)

# algorithm - 如何在没有递归或堆栈但使用父指针的情况下按顺序遍历 BST？

> ID：10371848
> 
> 赞同：17
> 
> 时间：2012-04-29T11:44:51.270
> 
> 标签：algorithm, binary-search-tree, tree-traversal, iteration, inorder

`null`是否可以在不使用`visited`标志或 a 的情况下对其节点具有父指针（根的父指针）的 BST 进行迭代顺序遍历`stack`？

我用谷歌搜索并没有找到回复。关键是，我怎么知道——在某个节点——我刚刚到达它，而我已经完成了它下面的所有事情？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-29T12:27:16.030

您可以这样做，您只需要记住上次访问的节点以及当前节点即可。问题陈述不允许这样做：`visited`每个节点上的标志和 a`stack`都是（最坏情况）*O*（*n*），记住最后一个节点只是*O*（1）。

在 C# 中，算法可能如下所示：

```
static void Walk(Node node)
{
    Node lastNode = null;
    while (node != null)
    {
        if (lastNode == node.Parent)
        {
            if (node.Left != null)
            {
                lastNode = node;
                node = node.Left;
                continue;
            }
            else
                lastNode = null;
        }
        if (lastNode == node.Left)
        {
            Output(node);

            if (node.Right != null)
            {
                lastNode = node;
                node = node.Right;
                continue;
            }
            else
                lastNode = null;
        }
        if (lastNode == node.Right)
        {
            lastNode = node;
            node = node.Parent;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-29T15:58:30.923

这是另一种方法。我认为它本质上等同于 svick 的答案，但避免了额外的变量。这个版本是用 Python 实现的：

```
node=root
if node is not None:
  while node.left is not None:
    node=node.left
  while node is not None:
    output(node)
    if node.right is not None:
      node=node.right
      while node.left is not None:
        node=node.left
    else:
      while node.parent is not None and node.parent.right is node:
        node=node.parent
      node=node.parent 
```

您最后访问的任何节点都决定了您需要访问的下一个节点。如果您刚刚访问过节点 X，那么您需要访问 X 右侧的最左侧节点。如果 X 没有右孩子，则下一个节点是节点 X 不是来自右侧的第一个祖先边。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-30T08:07:07.017

使用[svick](https://stackoverflow.com/users/41071/svick)的正确想法（见他的[回答](https://stackoverflow.com/questions/10371848/bst-in-order-traversal-iterative-parent-pointer-no-visited-flag-no-stack/10372118#10372118)），这是C++ 中*经过测试*的代码。请注意，我没有测试他的代码，甚至没有看它，我只是采纳了他的想法并实现了我自己的功能。

```
void in_order_traversal_iterative_with_parent(node* root) {
node* current = root;
node* previous = NULL;

while (current) {
    if (previous == current->parent) { // Traversing down the tree.
        previous = current;
        if (current->left) {
            current = current->left;
        } else {
            cout << ' ' << current->data;
            if (current->right)
                current = current->right;
            else
                current = current->parent;
        }
    } else if (previous == current->left) { // Traversing up the tree from the left.
        previous = current;
        cout << ' ' << current->data;
        if (current->right)
            current = current->right;
        else
            current = current->parent;
    } else if (previous == current->right) { // Traversing up the tree from the right.
        previous = current;
        current = current->parent;
    }
}

cout << endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T06:19:02.387

```
public void inorderNoStack() {
    if (root == null) {
        return;
    }

    // use the previous to always track the last visited node
    // helps in deciding if we are going down/up
    Node prev = null;

    Node curr = root;

    while (curr != null) {
        // going down
        if (prev == null || prev.left == curr || prev.right == curr) {
            if (curr.left != null) {
                prev = curr;
                curr = curr.left;
                continue;
            } else {

                visitn(curr);

                if (curr.right != null) {
                    prev = curr;
                    curr = curr.right;
                    continue;
                } else {
                    // swap states
                    prev = curr;
                    curr = prev.parent;
                }
            }
        }

        // going up after left traversal
        if (curr != null && prev == curr.left) {

            visitn(curr);

            if (curr.right != null) {
                prev = curr;
                curr = curr.right;
                continue;
            } else {
                // swap states
                prev = curr;
                curr = prev.parent;
            }
        }

        // going up after right traversal
        if (curr != null && prev == curr.right) {
            // swap states
            prev = curr;
            curr = prev.parent;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-06T04:44:42.340

第 1 步：编写一个返回有序后继的函数

步骤2：从最左边的节点开始，找到有序的后继，直到没有

```
 public class TreeNode {
      int data;
      TreeNode left;
      TreeNode right;
      TreeNode parent;
    }

    public class TreeUtility {
      public void inorderNoRecursion(TreeNode root) {
        TreeNode current = leftmostNode(root);
        while(current != null) {
          System.out.println(current.data);
          current = inorderSuccessor(current);
        }
      }

      public TreeNode inorderSuccessor(TreeNode node) {
        if (node.right!=null) {
          return leftmostNode(node.right);
        }

        TreeNode p = node.parent;
        TreeNode c = node;
        while(p!=null && c != p.left) {
          c = p;
          p = p.parent;
        }
        return p;
      }

      private TreeNode leftmostNode(TreeNode node) {
        while (node.left != null) {
          node = node.left;
        }
        return node;
      }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-16T05:40:38.627

我的 Java 解决方案没有在现有树上引入任何标志。也没有父指针。这种方法将使节点保持在树的高度。请看一看。

[https://github.com/skanagavelu/Algorithams/blob/master/src/tree/InOrderTraversalIterative.java](https://github.com/skanagavelu/Algorithams/blob/master/src/tree/InOrderTraversalIterative.java)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-29T12:35:31.803

关键是父指针（或改变树的能力），但您需要恒定数量的额外状态（例如，以下协程的程序计数器）。

1.  将 v 设置为根。
2.  当 v 有一个左孩子时，将 v 设置为其左孩子。
3.  产量诉。
4.  如果 v 是根，则返回。
5.  将 p 设置为 v 的父级。
6.  如果 p 的右孩子是 v，则将 v 设置为 p 并转到步骤 4。
7.  产量 p。
8.  如果 p 有一个右孩子，则将 v 设置为 p 的右孩子并转到步骤 2。
9.  将 v 设置为 p 并转到步骤 4。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-08-14T22:18:48.480

这是在 C++ 中：

```
void InOrder(Node *r)
{
   if(r==NULL)
         return;

   Node *t=r;

   while(t!=NULL)
       t=t->left;

  while(t!=r)
  {
     if(t==(t->parent->left))
     {
        cout<<t->parent->data;
        t=t->parent->right;
       if(t!=NULL)
      {
       while(t!=NULL)
          t=t->left;
      } 
      if(t==NULL)
          t=t->parent;
     }
     if(t==t->parent->right)
     {
        t=t->parent;
     }
  }
} 
```

# java - 如何为 GWT DataGrid 构建文本修剪单元

> ID：10371853
> 
> 赞同：3
> 
> 时间：2012-04-29T11:45:36.380
> 
> 标签：java, gwt, datagrid, trim

我正在寻找为 GWT DataGrid 构建文本修剪单元的示例。我希望单元格具有固定的宽度和高度，如果文本较长 - 将出现省略号 (...)。完整的文本将出现在编辑/工具提示上。

在我当前的 DataGrid 中，文本会自动换行并且行高会增加。我想避免这种情况并保持固定的行高。

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T22:45:31.023

创建一个 CSS 类并将其应用于您的 DataGrid：

```
.myDataGrid td div {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    -o-text-overflow: ellipsis;
    -ms-text-overflow: ellipsis;
} 
```

# c++ - 浮点加法和乘法是否关联？

> ID：10371857
> 
> 赞同：17
> 
> 时间：2012-04-29T11:46:28.753
> 
> 标签：c++, floating-point, multiplication, addition, associativity

当我添加三个浮点值并将它们与 1 进行比较时，我遇到了问题。

```
cout << ((0.7 + 0.2 + 0.1)==1)<<endl;     //output is 0
cout << ((0.7 + 0.1 + 0.2)==1)<<endl;     //output is 1 
```

为什么这些值会不同？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-29T11:50:34.037

浮点加法不一定是关联的。如果您更改添加的顺序，这可能会改变结果。

关于该主题的标准论文是[What Every Computer Scientist Should Know about Floating Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。它给出了以下示例：

> 另一个灰色地带涉及括号的解释。由于舍入误差，代数的结合定律不一定适用于浮点数。例如，当 x = 1e30、y = -1e30 和 z = 1 时，表达式 (x+y)+z 与 x+(y+z) 的答案完全不同（前者为 1，后者为 0 ）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-01T15:21:18.507

对于当前流行的机器和软件，可能的情况是：

编译器编码`.7`为 0x1.6666666666666p-1（这是十六进制数字 1.6666666666666 乘以 2 的 -1 次方）、`.2`0x1.999999999999ap-3 和`.1`0x1.999999999999ap-4。这些中的每一个都是以浮点表示的最接近您编写的十进制数字的数字。

请注意，这些十六进制浮点常量中的每一个都在其有效数字中恰好有 53 位（“分数”部分，通常不准确地称为尾数）。有效数字的十六进制数字有一个“1”和另外 13 个十六进制数字（每个 4 位，总共 52 个，包括“1”），这是 IEEE-754 标准为 64 位二进制浮点提供的 -点数。

让我们添加数字`.7`和`.2`：0x1.6666666666666p-1 和 0x1.999999999999ap-3。首先，缩放第二个数字的指数以匹配第一个。为此，我们将指数乘以 4（将“p-3”更改为“p-1”）并将有效位乘以 1/4，得到 0x0.66666666666668p-1。然后添加 0x1.6666666666666p-1 和 0x0.66666666666668p-1，得到 0x1.ccccccccccccc8p-1。请注意，该数字的有效位超过 53 位：“8”是句点后的第 14 位。浮点数不能返回这么多位的结果，所以它必须四舍五入到最接近的可表示数字。在这种情况下，有两个相同的数字，0x1.cccccccccccccp-1 和 0x1.ccccccccccccdp-1。当出现平局时，使用有效数字最低位为零的数字。“c”是偶数，“d”是奇数，所以“

接下来，将`.1`(0x1.999999999999ap-4) 的数字添加到其中。同样，我们缩放以使指数匹配，因此 0x1.999999999999ap-4 变为 0x.33333333333334p-1。然后将其添加到 0x1.cccccccccccccp-1，得到 0x1.fffffffffffff4p-1。将其四舍五入为 53 位得到 0x1.fffffffffffffp-1，这就是`.7+.2+.1`.

现在考虑`.7+.1+.2`。对于`.7+.1`，添加 0x1.6666666666666p-1 和 0x1.999999999999ap-4。回想一下，后者被缩放到 0x.33333333333334p-1。那么确切的总和是 0x1.99999999999994p-1。将其四舍五入为 53 位得到 0x1.9999999999999p-1。

然后添加`.2`(0x1.999999999999ap-3) 的数字，缩放为 0x0.66666666666668p-1。确切的总和是 0x2.00000000000008p-1。浮点有效数总是从 1 开始缩放（除了特殊情况：零、无穷大和可表示范围底部的非常小的数字），因此我们将其调整为 0x1.00000000000004p0。最后，我们四舍五入到 53 位，得到 0x1.0000000000000p0。

因此，由于舍入时发生的错误，`.7+.2+.1`返回 0x1.fffffffffffffp-1（略小于 1），并`.7+.1+.2`返回 0x1.0000000000000p0（正好是 1）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-22T20:40:19.107

**浮点乘法在 C 或 C++ 中不具有关联性。**

证明：

```
#include<stdio.h>
#include<time.h>
#include<stdlib.h>
using namespace std;
int main() {
    int counter = 0;
    srand(time(NULL));
    while(counter++ < 10){
        float a = rand() / 100000;
        float b = rand() / 100000;
        float c = rand() / 100000;

        if (a*(b*c) != (a*b)*c){
            printf("Not equal\n");
        }
    }
    printf("DONE");
    return 0;
} 
```

在这个程序中，大约 30% 的时间，`(a*b)*c`不等于`a*(b*c)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-28T12:40:39.987

加法和乘法都与 IEEE 743 双精度（64 位）数字无关。以下是每个示例（使用 Python 3.9.7 评估）：

```
>>> (.1 + .2) + .3
0.6000000000000001
>>> .1 + (.2 + .3)
0.6 
```

```
>>> (.1 * .2) * .3
0.006000000000000001
>>> .1 * (.2 * .3)
0.006 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-04T03:01:47.127

与 Eric 的答案类似，但需要添加，并使用 Python。

```
import random

random.seed(0)
n = 1000
a = [random.random() for i in range(n)]
b = [random.random() for i in range(n)]
c = [random.random() for i in range(n)]

sum(1 if (a[i] + b[i]) + c[i] != a[i] + (b[i] + c[i]) else 0 for i in range(n)) 
```

# file - CRC32 对文件完整性检查真的那么糟糕吗？

> ID：10371858
> 
> 赞同：9
> 
> 时间：2012-04-29T11:46:33.123
> 
> 标签：file, crc32, integrity

当然，MD5 比 CRC32 好，SHA1 比 MD5 好等等......但它们也比 CRC32 慢得多。

没错，我正在考虑如何检查被传输文件的一致性，而 CRC32 是最快的选项。

我在任何地方都没有发现**CRC32 的完整性检查有多糟糕**（也许换句话说，CRC32 可能不会检测到格式错误的文件）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T11:54:42.377

引自[http://www.mathpages.com/home/kmath458.htm](http://www.mathpages.com/home/kmath458.htm)：

> 因此，如果我们假设数据的任何损坏以完全随机的方式影响我们的字符串，即损坏的字符串与原始字符串完全不相关，那么**未检测到损坏的字符串的概率为 1/(2^ n)** . 这就是人们说 16 位 CRC 未能检测到数据错误的概率为 1/(2^16) = 1.5E-5，而**32 位 CRC 的概率为 1 /(2^32)，约为 2.3E-10（小于十亿分之一）**。

我的观点：CRC-32 对于错误检测来说绰绰有余。它正在被广泛使用。但是，当您想将其用作“哈希函数”时，它并不安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T11:54:14.900

使用 CRC-32 很容易发生冲突（相同的哈希输出但不同的数据），因为与其他算法相比，CRC-32 仅使用 32 位。MD5是128位，SHA-1是160位，SHA-2（SHA256/512系列）是224位-512位。（取决于你使用什么）。此外，对于 SHA-2 系列，没有发现冲突。

有关可能导致数据冲突的数学和概率的更多信息。请寻找[哈希碰撞](http://en.wikipedia.org/wiki/Hash_collision)和[生日悖论问题](http://en.wikipedia.org/wiki/Birthday_problem)

# php - 我可以在 SQL Server 2008 中使用 SQL 语法更改我的表属性吗？

> ID：10371861
> 
> 赞同：0
> 
> 时间：2012-04-29T11:46:51.703
> 
> 标签：php, sql, sql-server-2008, tsql

我的学生服务器上有一个数据库，如果我想使用 SQL 服务器 DBMS 访问数据库属性，我需要去我的大学，这很痛苦。我想知道是否可以通过在特定表上使用 SQL 来更改身份规范？我无法插入表格，因为未选择是，我希望能够在家中进行这些更改，我可以这样做吗？

我正在研究如何访问表和更改一些属性，并遇到了这样的事情：

```
Set IDENTITY_INSERT TableName ON 
```

我希望能够使用 php 脚本和一些 SQL 来执行此操作，如下所示：

```
$query = "IDENTITY_INSERT customers ON ";

        $result = sqlsrv_query( $conn, $query, array(), array( "Scrollable" => SQLSRV_CURSOR_KEYSET ));

        if( $result === false)
        {
            echo "Error in query preparation/execution.\n";
            die( print_r( sqlsrv_errors(), true));
        }

        else
        {
            echo'worked';
        } 
```

这行得通吗？

这是我这样做的粗略尝试：

```
<?php
$serverName = "servername";
    $connectionInfo = array("UID" => "username", "PWD" => "password",      "Database"=>"database");
    $conn = sqlsrv_connect( $serverName, $connectionInfo);

    if( $conn === false ) // note the format of ‘equals’
    {
         echo "Could not connect.\n";
         die( print_r( sqlsrv_errors(), true));
    }

        $query = "SET IDENTITY_INSERT customers ON ";

        $result = sqlsrv_query( $conn, $query, array(), array( "Scrollable" => SQLSRV_CURSOR_KEYSET ));

        if( $result === false)
        {
            echo "Error in query preparation/execution.\n";
            die( print_r( sqlsrv_errors(), true));
        }

        else
        {
            echo'worked';
        }

?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:49:22.523

`IDENTITY_INSERT`是正确的语法，尽管您似乎在使用中错过了`SET`关键字。看到这一行：

```
$query = "IDENTITY_INSERT customers ON "; 
```

改成：

```
 $query = "SET IDENTITY_INSERT customers ON "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T12:59:23.160

我解决了这个问题，它当然没有设置为身份规范是的。首先，我删除了表列 customerID，并使用以下查询重新创建了它：

```
$query = "Alter table customers add customerID INT IDENTITY(1,1) not null"; 
```

这再次创建了该列，但将其设置为标识是。

没有你的帮助，我做不到。

谢谢你。

# ios - 如何使用 Storyboard iOS 来布局单个视图的纵向和横向？

> ID：10371864
> 
> 赞同：1
> 
> 时间：2012-04-29T11:47:23.517
> 
> 标签：ios, xcode4, storyboard, landscape-portrait

我想尽量减少我必须编写的代码量，并使用 xcode 中的故事板来指定视图在纵向和横向视图中的显示方式。

最小化代码的最佳/推荐方法是什么？我已经做了一些研究，但是找不到一个简单的解决方案..是否有必要做一些有条件的 segues，并重新连接我的景观视图中的所有内容，还是有更简单的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T12:44:48.753

通常您定义 autoResizingMask（或转到 Interface Builder 中的尺寸检查器，如下所示），以便控件会随着屏幕尺寸的变化而移动或调整大小。如果你这样做，你通常会对横向和纵向都有相当不错的支持。如果您对方向更改进行了一些相当显着的更改（例如，您希望将各种控件打乱，以便在您更改时它们相对于彼此处于非常不同的位置，则您只需对控件的框架进行编程更改方向或者你想加载非常不同的 UIImages）。但在 90% 的情况下，自动调整大小设置可以为您处理简单的控件移动/调整大小/重新居中：

![Interface Builder 中的自动调整掩码选项](../Images/54e4001a47b4cece6c266d6c5b027edf.png)

# c++ - 使用 WinSock2 开发，CreateThread() 函数出错

> ID：10371866
> 
> 赞同：0
> 
> 时间：2012-04-29T11:48:02.620
> 
> 标签：c++, windows, multithreading, sockets, winsock

我开始开发我的工具，它在 TCP 级别与 net 一起工作，但遇到了以下问题：

*   为 Winsock的*accept()*函数创建线程

我已经用谷歌搜索并寻找参考资料，并且到处都有关于创建新线程的信息：

*   它必须在前缀中有 DWORD WINAPI (unsigned long __stdcall)
*   它必须接受 LPVOID 参数

并且这样的函数将用作 CreateThread() 函数中的第三个参数作为 LPTHREAD_START_ROUTINE 结构。

但是编译后我得到了下一个错误：

(131)：错误 C2664：“CreateThread”：无法将参数 3 从“DWORD (__stdcall Net::*)(LPVOID)”转换为“LPTHREAD_START_ROUTINE”

这是我的代码：

```
#include <iostream>
#include <Windows.h>

#pragma comment(lib, "Ws2_32.lib")

typedef struct Header
{
friend struct Net;

private:
    WORD wsa_version;
    WSAData wsa_data;

    SOCKET sock;
    SOCKADDR_IN service;

    char *ip;
    unsigned short port;

public:
    Header(void)
    {
        wsa_version = 0x202;

        ip = "0x7f.0.0.1";
        port = 0x51;

        service.sin_family = AF_INET;
        service.sin_addr.s_addr = inet_addr(ip);
        service.sin_port = htons(port);
    }

} Header;

typedef struct Net
{
private:
    int result;

    void WSAInit(WSAData *data, WORD *wsa_version)
    {
        result = WSAStartup(*wsa_version, &(*data));

        if(result != NO_ERROR)
        {
            std::cout << "WSAStartup() failed with the error: " << result << std::endl;
        }
        else
        {
            std::cout << (*data).szDescription << " " << (*data).szSystemStatus << std::endl;
        }
    }

    void SocketInit(SOCKET *my_socket)
    {
        (*my_socket) = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

        if((*my_socket) == INVALID_SOCKET)
        {
            std::cout << "Socket initialization failed with the error: " << WSAGetLastError() << std::endl;
            WSACleanup();
        }
        else
        {
            std::cout << "Socket initialization successful!" << std::endl;
        }
    }

    void SocketBind(SOCKET *my_socket, SOCKADDR_IN *service)
    {
        result = bind((*my_socket), (SOCKADDR*)&(*service), sizeof(*service));

        if(result == SOCKET_ERROR)
        {
            std::cout << "Socket binding failed with the error: " << WSAGetLastError() << std::endl;
            closesocket((*my_socket));
            WSACleanup();
        }
        else
        {
            std::cout << "Socket binding successful!" << std::endl;
        }

        result = listen(*my_socket, SOMAXCONN);

        if(result == SOCKET_ERROR)
        {
            std::cout << "Socket listening failed with the error: " << WSAGetLastError() << std::endl;
        }
        else
        {
            std::cout << "Listening to the socket..." << std::endl;
        }
    }

    void SocketAccept(SOCKET *my_socket)
    {
        SOCKET sock_accept = accept((*my_socket), 0, 0);

        if(sock_accept == INVALID_SOCKET)
        {
            std::cout << "Accept failed with the error: " << WSAGetLastError() << std::endl;
            closesocket(*my_socket);
            WSACleanup();
        }
        else
        {
            std::cout << "Client socket connected!" << std::endl;
        }

        char data[0x400];
        result = recv(sock_accept, data, sizeof(data), 0);
    }

    DWORD WINAPI Threading(LPVOID lpParam)
    {
        SOCKET *my_socket = (SOCKET*)lpParam;
        SocketAccept(my_socket);
    }

public:
    Net(void)
    {
        Header *obj_h = new Header();

        WSAInit(&obj_h->wsa_data, &obj_h->wsa_version);

        SocketInit(&obj_h->sock);
        SocketBind(&obj_h->sock, &obj_h->service);

        HANDLE thrd = CreateThread(NULL, 0, &Net::Threading, &obj_h->sock, 0, NULL);

        delete &obj_h;
    }
} Net;

int main(void)
{
    Net *obj_net = new Net();

    delete &obj_net;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T11:50:20.347

您不能使用 C++ 非静态成员函数。

使用静态的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:16:10.803

Nestal 的回答是正确的—— CreateThread 需要一个函数，而不是一个方法。也就是说，这个样本还有很多其他问题，我不知道把它留在那里是否是负责任的事情。

首先，编码风格很奇怪：示例名义上是用 C++ 编写的，但实际上看起来像一个 C 程序。如果您打算从 C 切换到 C++，那么请注意，像这样使用“朋友”是您“做错了”的强烈暗示。

直接传递对朋友类属性的引用的奇怪风格隐藏了实际的代码问题：即使构建它也会失败很多，因为有许多竞争条件：套接字，作为引用传递给线程：`&obj_h->sock`将是`Threading`仍在运行时删除。即使它没有被删除，它（以及从多个线程引用的任何变量）也应该被限定，`volatile`以确保编译器不会优化将变量实际持久化到内存中。

即使您已将线程 proc 设置为“静态”、安全地传递参数、整理出竞争条件并正确 volatile 限定了任何共享变量，您仍需要添加线程同步以保护对共享变量的访问。同样 - 直接传递对值的引用的代码风格使得很难*知道*何时可以从不同的线程读取和写入变量 - 使得同步策略难以一致地实现。

祝你好运。

# c++ - 从类继承，在不同的命名空间中定义

> ID：10371873
> 
> 赞同：6
> 
> 时间：2012-04-29T11:48:59.427
> 
> 标签：c++, inheritance, pointers, namespaces

我有 2 个类，在不同的命名空间中定义：

```
//--==file1.hpp==--
namespace n1{
class x1 {
//.....
};
};
//--==file2.hpp==--
namespace n2{
class x1: public n1::x1{
//.....
    };
};

//--== file3.hpp ==--
namespace n2 {
 class x2 {
    private:
      n1::x1* data1_;
    public:
      void func(x1* data2) { data1_ = data2; }
  };
}; 
```

这个编译失败了

```
error C2440: '=' : cannot convert from `'n2::x1 *' to 'n1::x1 *'` 
```

我无法理解可能是什么问题，因为 n2:x1 继承自 n1::x1 ...？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-16T15:06:58.927

从一个命名空间继承到另一个命名空间类，不应该有任何编译错误。只是，在子类中，如果必须调用父类的方法（在另一个命名空间中），则应该使用全名（带[命名空间](http://en.cppreference.com/w/cpp/language/namespace)）。

**供您参考：**

```
namespace a
{
class A1 {
 public:
    void testA1() {...}
};
}

namespace b
{
class B1: public class a::A1
{
 public:
    void testB1()
        {
          a::A1::testA1();
          ...
        }
};
} 
```

但是看起来，上面的问题只是一个错字问题，并且已经解决了。但是，为了澄清用法，示例代码会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T12:15:58.193

在 file2.h 中：包含 file1.h

在 file3.h 中：包括 file1.h 和 file2.h。

主要包括file3.h。

int main() {

```
n2::x2 xx22;
n2::x1* xx11;
xx22.func(xx11); 
```

}

这符合得很好。

# jquery - Jquery ajax xml没有被解析

> ID：10371875
> 
> 赞同：0
> 
> 时间：2012-04-29T11:49:04.667
> 
> 标签：jquery, ajax, xml-parsing

所以我用这段代码解析我的 xml 并且一切正常，直到我添加了一个审查节点。

```
$(document).ready(function generatexml(){
$.ajax({
                type: "GET",
                url: "data/concerts.xml",
                dataType: "xml",
                success: function(xml){
                $(xml).find("concert").each(function(){
                $('#concerten').append('<div id="tabel" onclick="navigate('+"'"+$(this).find('artist').text()+"'"+')"><div id="tabelimage"><img src="http://griekenland.mixxt.at/storage/images/events/0/0/0/00000000000000000000000000000.jpg"/></div>'
                +'<div id="tabelartist">'+$(this).find('artist').text()+'</div>'
                +'<div id="tabellocation">'+$(this).find('location').text()+'</div>'
                +'<div id="tabelqs">'+$(this).find('review').text()+'</div>'
                +'<div id="tabeldate">'+$(this).find('date').text()+'</div>'
                +'<div id="tabelurl"><a href="'+$(this).find('url').text()+'">'+$(this).find('url').text()+'</a></div>').trigger('create');             
                })
                }
                })
}) 
```

xml是这样的：

```
<?xml version="1.0"?>
<concerts>
<concert>
<artist>Sioen</artist>
<location>De Zwerver leffinge</location>
<date>24/03/2012</date>
<review>Met die woorden, op zelf getekende en verspreide flyers, riep Willis Earl Beal iedereen op hem te bellen om hem één van z’n liedjes te horen zingen</review>
<url>http://www.test.be</url>
</concert>
<concert>
<artist>Sioen</artist>
<location>De Zwerver leffinge</location>
<date>24/03/2012</date>
<review>Met die woorden, op zelf getekende en verspreide flyers, riep Willis Earl Beal iedereen op hem te bellen om hem één van z’n liedjes te horen zingen</review>
<url>http://www.test.be</url>
</concert>
</concerts> 
```

我无法弄清楚它无法解析的原因，我已经通过 xml 验证器运行了它，并且 firebug 中没有 js 错误。我的节点内的文本是否可能很长（只是预感），我该如何应对？

欢迎任何帮助，Tyvm

香椿凡多伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:30:51.120

不是对您的特定问题的直接答案，但我认为它可能有用。

我认为您应该考虑在这里使用一些模板引擎。原因如下：

*   强制您在渲染之前准备/解析数据
*   允许您独立地对每个部分进行单元测试
*   提高代码的可读性和可维护性
*   以后更容易更新（例如，如果您决定在 AJAX 请求中返回 JSON 而不是 XML）

请根据您的代码考虑以下[关于 JSBin 的示例（并使用](http://jsbin.com/idobic/8/edit)[Mustache](http://mustache.github.com/)模板引擎，但您可以找到许多其他引擎）。

一些细节如下：

### 1-定义你的模板

```
<script id="concertsTpl" type="text/x-custom-tpl">
{{#concerts}}
  <div id="tabel" onclick="navigate('{{artist}}')">
    <div id="tabelimage">
      <img src="http://griekenland.mixxt.at/storage/images/events/0/0/0/00000000000000000000000000000.jpg">
    </div>
    <div id="tabelartist">{{artist}}</div>
    <div id="tabellocation">{{location}}</div>
    <div id="tabelqs">{{review}}</div>
    <div id="tabeldate">{{date}}</div>
    <div id="tabelurl">
      <a href="{{url}}">{{url}}</a>
    </div>
  </div>
{{/concerts}}
</script> 
```

### 2-定义一个函数来解析你的数据

```
function parseConcertsData(data) {
  var concerts = [];

  $(data).find("concert").each(function(){
    var concert = {
        artist: $(this).find('artist').text(),
      location: $(this).find('location').text(),
        review: $(this).find('review').text(),
          date: $(this).find('date').text(),
           url: $(this).find('url').text()
    };
    concerts.push(concert);
  });
  return {concerts: concerts};
} 
```

### 3-发送请求并处理结果

```
var jqXhr = $.ajax({
      type: 'get',
       url: "data/concerts.xml",
  dataType: 'xml'
});

jqXhr.done(function(xml){

  var concerts = parseConcertsData(xml),
      tpl = $('#concertsTpl').html(),
      rendered = Mustache.to_html(tpl, concerts);

  $('#concerten').append( rendered ).trigger('create');

}).fail(function(){
  alert('Something went wrong with the query');
}); 
```

通过这种重构，你应该可以很容易地找到问题所在：

*   您是否收到查询的回复？
*   您是否获得了预期的数据（即：响应是否正确解析）？
*   模板渲染好吗？
*   渲染的模板是否附加到文档中？

希望能帮助到你。

* * *

# c# - 如何为我的 Web 应用程序创建 MSI？

> ID：10371879
> 
> 赞同：3
> 
> 时间：2012-04-29T11:49:42.767
> 
> 标签：c#, windows, windows-installer, web-platform-installer

我有一个 Web 应用程序，其中 UI 位于单独的文件夹和解决方案中，中间层以及不同文件夹和解决方案中的数据层。

现在我需要为我的 Web 应用程序创建一个 MSI。到目前为止，我们一直在使用部署引擎，但现在我们被要求做一个 MSI，因为新服务器不支持部署引擎。

通常我们为 Windows 应用程序创建 MSI，我们将 EXE 作为主要输出。现在如何在这种情况下创建 MSI。

任何想法将不胜感激。

关于cmrhema

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:55:06.240

单击您的解决方案并添加一个新项目：一个**Web 设置项目**

![在此处输入图像描述](../Images/036b5f5ce6e1939478bad9f43baeeed4.png)

然后将您的网站添加为输出。

**重要的提示：**

这将添加所有代码（.cs / .vb 文件）并且根本不会保护任何内容，为了保护您的代码（已编译的），您需要添加 Visual Studio Extension **[Web Deploy Project](http://www.microsoft.com/en-us/download/details.aspx?id=24509)**

然后，右键单击您的网站并选择新选项，然后将此项目添加为设置的输入。

![在此处输入图像描述](../Images/0723910e7e48d5d9024f85bf02a9cb6a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:10:36.297

虽然学习曲线会更陡峭，但我建议使用 WIX 工具集来创建您的 Windows 安装程序文件 - [http://wix.sourceforge.net](http://wix.sourceforge.net)

另请参阅[https://stackoverflow.com/tags/wix/info](https://stackoverflow.com/tags/wix/info)

# iphone - 写有/没有变量声明有什么区别

> ID：10371880
> 
> 赞同：1
> 
> 时间：2012-04-29T11:49:55.317
> 
> 标签：iphone, properties, instance-variables

> **可能重复：**
> [Objective-C 2.0 中的属性和实例变量](https://stackoverflow.com/questions/3074248/properties-and-instance-variables-in-objective-c-2-0)

我写了下面的代码，都在 xcode 3/ios4 和 xcode 4/ios5 上工作

```
#import <UIKit/UIKit.h>

@interface testViewController : UIViewController {

NSString *s;

}
@property (retain ,nonatomic) NSString *s;
@end 
```

没有变量声明的那个

```
#import <UIKit/UIKit.h>

@interface testViewController : UIViewController {

}
@property (retain ,nonatomic) NSString *s;
@end 
```

和

```
#import <UIKit/UIKit.h>

@interface testViewController : UIViewController {

NSString *s;

} 
```

写有/没有变量声明有什么区别

据我所知，@property 意味着替换/简化属性的方法 setter/getter。{}中的变量声明是否意味着不能在testViewController外部访问的私有属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:36:15.137

当您声明没有相关 ivar 的属性时，编译器默认注入它。一个区别是隐式 ivar 在派生类和您的类之外是不可见的。

# java - Java枚举类

> ID：10371881
> 
> 赞同：3
> 
> 时间：2012-04-29T11:49:55.400
> 
> 标签：java, oop, enums

我正在实现枚举类，我将使用它来检索应用程序中的一些背景，这个类的当前实现在这里：

```
public enum Painters{

    /**
     * Available painters.
     */
    Background(getBackgroundPainter()),
    InactiveBackground(getInactiveBackgroundPainter()),
    DesktopBackground(getBackgroundPainter());

    /**
     * The background painter.
     */
    private Painter<Component> _painter;

    /**
     * Constructor will initialize the object.
     */
    Painters(Painter<Component> painter){
        _painter = painter;
    }

    /**
     * Will return a current painter.
     * @return instance of Painter<Component>
     */
    public Painter<Component> painter(){
        return _painter;
    }

    private static Painter<Component> getBackgroundPainter(){
        MattePainter mp = new MattePainter(Colors.White.alpha(1f));
        PinstripePainter pp = new PinstripePainter(Colors.Gray.alpha(0.2f),45d);
       return (new CompoundPainter<Component>(mp, pp)); 
    }

    private static Painter<Component> getInactiveBackgroundPainter(){
        MattePainter mp = new MattePainter(Colors.White.alpha(1f));
        GlossPainter gp = new GlossPainter(Colors.Gray.alpha(0.1f), GlossPainter.GlossPosition.BOTTOM);
        PinstripePainter pp = new PinstripePainter(Colors.Gray.alpha(0.2f), 45d);
        return (new CompoundPainter<Component>(mp, pp, gp));    
    }
} 
```

我的问题是每次我尝试获取画家时都需要调用painter() 方法，但我更喜欢只写画家的类型。我认为如果我可以通过我的枚举来扩展 Painter，那么我可能会获得正确的功能，但它看起来在 java 中是不可能的。

```
public enum Painters extends Painter<Component> 
```

你知道这个问题的任何解决方案吗？？？

目前我以这种方式使用它：

```
Painters.Background.painter(); 
```

但是我需要：

```
Painters.Background; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:57:48.507

您总是可以将您的画家定义为一个接口并让您的枚举实现它。您将无法使用通用通配符，但只要这不是约束，您也可以按照您想要的方式在代码中引用画家：

```
interface Painter<T> {
    // ...
}

public enum Painters implements Painter<Component> {
    Background(getBackgroundPainter()),
    InactiveBackground(getInactiveBackgroundPainter()),
    DesktopBackground(getBackgroundPainter());

    private Painter<Component> _painter;

    // ...
}

Painter somePainter = Painters.Background; 
```

您的枚举将有效地代理实际的画家实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T11:58:58.710

通常`Enums`保留用于不可变常量，您需要 switch/case 和构造函数的语法糖。工厂模式在这里更合适：

```
public class PainterFactory {
    public static Painter<Component> getBackgroundPainter(){
    ...
    }

    public static Painter<Component> getInactiveBackgroundPainter(){
    ...
    }
} 
```

# zend-framework - 无法打开输入文件：doctrine

> ID：10371885
> 
> 赞同：0
> 
> 时间：2012-04-29T11:50:24.217
> 
> 标签：zend-framework, doctrine, php

**我尝试在Windows XP**上将 Doctrine 与 zend 框架集成。在执行命令**php dictionary schema-build**时，我收到错误消息**无法打开输入文件：教义**。

```
C:\wamp\www\zc\application\scripts> php doctrine schema-build 
```

我正在使用 Windows 并且创建了`doctrine.bat`：

```
@echo off
echo Running Doctrine CLI.
"C:\wamp\bin\php\php5.2.1" -f C:\wamp\www\zc\application\scripts\doctrine.php %1 %2 %3 %4 %5 %6 %7 %8 %9 
```

（我不调用它，我只是创建了它）
版本
ZendFramework-1.11.11-minimal
Doctrine-1.1.5-Sandbox
我只是跟着这个视频[http://www.zendcasts.com/introducing-doctrine-1-2 -整合/2009/11/](http://www.zendcasts.com/introducing-doctrine-1-2-integration/2009/11/)

# python - python，检测元素已被删除/添加/更改列表中的位置

> ID：10371889
> 
> 赞同：4
> 
> 时间：2012-04-29T11:50:29.503
> 
> 标签：python, list

我有一个项目列表.. 一个原始列表和一个修改列表 - 我想知道哪些元素已从修改列表中删除/添加，以及原始列表的位置。列表没有重复项且未排序，因为列表中项目的顺序很重要。举个例子

```
Org = ['AMEND', 'ASTRT', 'ETIME', 'OBJ', 'ast', 'bias', 'chip', 'cold']
mod = ['AMEND', 'ASTRT',         'OBJ', 'ast', 'bias', 'chip', 'cold', 'flat', 'deb'] 
```

在 mod_list 'ETIME' 中，已删除并添加了 'flat', deb' - 因此结果将是在索引 2 处删除了 'ETIME' 并在索引 8 和 9 处添加了 'flat', deb'。

我的另一个问题是检测项目是否改变了位置。在下面的示例中，“OBJ”和“ASTRT”已经改变了位置。

```
Org = ['AMEND', 'ASTRT', 'ETIME', 'OBJ', 'ast', 'bias', 'chip', 'cold']
mod = ['AMEND', 'OBJ', 'ETIME', 'ASTRT', 'ast', 'bias', 'chip', 'cold'] 
```

关于如何解决这个问题的任何想法！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T12:06:36.023

你可以使用[difflib](http://docs.python.org/library/difflib.html)来做这种事情：

```
>>> import difflib
>>> Org = ['AMEND', 'ASTRT', 'ETIME', 'OBJ', 'ast', 'bias', 'chip', 'cold']
>>> mod = ['AMEND', 'ASTRT', 'OBJ', 'ast', 'bias', 'chip', 'cold', 'flat', 'deb']
>>> list(difflib.ndiff(Org, mod))
['  AMEND', '  ASTRT', '- ETIME', '  OBJ', '  ast', '  bias', '  chip', '  cold', '+ flat', '+ deb'] 
```

从这里您可以遍历列表并检查项目是否是新的、移动的或丢失的。例如：

```
Org = ['a', 'b' ,'c', 'd', 'e', 'f', 'g', 'h', 'i']
mod = ['i', 'b', 'c', 'z', 'd', 'f', 'g', 'h', 'a']
differences = set(difflib.ndiff(Org, mod))

moved = set([item[2:] for item in differences if item[0]=='+' and '-' + item[1:] in differences])
removed = set([item[2:] for item in differences if item[0]=='-']) - moved
added = set([item[2:] for item in differences if item[0]=='+']) - moved

print 'moved items:', moved
print 'removed items:', removed
print 'added items:', added
#output:
moved items: set(['a', 'i'])
removed items: set(['e'])
added items: set(['z']) 
```

# encryption - 针对字典和重放攻击的安全通信协议

> ID：10371892
> 
> 赞同：1
> 
> 时间：2012-04-29T11:51:20.097
> 
> 标签：encryption, dictionary, rsa

我正在尝试在两方之间实现一个基本的安全通道，可以保护自己免受字典和阻止重放攻击。

我想使用 RSA 公钥密码系统作为保护通道的一种手段。但是，我想知道以下情况是否有效：

1.  A 生成私钥和公钥
2.  A向B发送公钥
3.  B 用公钥加密消息
4.  B 将加密消息发送给 A
5.  现在 A 可以使用私钥解密消息。

现在这一切都很好。但是，如果 A 想安全地向 B 发送消息怎么办。这是否意味着我们需要两对密钥。那么 A 将拥有 B 的公钥，而 B 将拥有 A 的公钥？这是真的？这可行吗？此外，是否需要某种形式的随机散列或填充来防止块重放攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:01:29.903

看看[Diffie-Hellman 密钥协议](http://www.rsa.com/rsalabs/node.asp?id=2248)，这是一种允许两方在仅公开通信时建立（共享）私钥的协议。防止重放攻击可以通过频繁重新协商密钥来防止重放消息被接收方解密，和/或通过在加密消息中包含时间戳和接收端的有限可接受窗口。

# c++ - 使用 set 的 less 或 less_equal

> ID：10371896
> 
> 赞同：6
> 
> 时间：2012-04-29T11:51:46.397
> 
> 标签：c++, stl, set

我们可以将函数作为`<`(less) 运算符传递给 STL 数据结构，例如`set`, `multiset`, `map`, `priority_queue`, ...

如果我们的函数表现得像`<=`(less_equal) 会有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T12:01:01.447

是的，有问题。

形式上，比较函数必须定义*严格的弱排序*，并且`<=`不这样做。

更具体地说， the`<`也用于确定等价（`x`并且`y`是等价的 iff `!(x < y) && !(y < x)`）。这不适用于`<=`（使用该运算符会让您的集合相信对象*永远不*等价）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T12:00:38.257

从 Effective STL -> Item 21\. 总是让比较函数返回 false 相等的值。

创建一个集合，其中 less_equal 是比较类型，然后将 10 插入到集合中：

```
set<int, less_equal<int> > s; // s is sorted by "<="
s.insert(10); //insert the value 10 
```

现在尝试再次插入 10：

```
s.insert(10); 
```

对于这个插入调用，该集合必须确定 10 是否已经存在。我们知道它是。但是这一套像吐司一样愚蠢，所以它必须检查。为了更容易理解集合执行此操作时会发生什么，我们将最初插入的 10 称为 10A，我们将尝试插入的 10 称为 10B。集合遍历其内部数据结构以寻找位置插入 10B。它最终必须检查 10B 以查看它是否与 10A 相同。关联容器的“相同”的定义是等价的，所以集合测试看 10B 是否等价于 10A。在执行这个测试时，它自然会使用集合的比较功能。在这个例子中，就是 operator<=，因为我们指定了 less_equal 作为集合的比较函数，而 less_equal 表示操作符。

```
!(10A<= 10B)&&!(10B<= 10A) //test 10Aand 10B for equivalence 
```

嗯，10A 和 10B 都是 10，所以 10A <= 10B 显然是正确的。同样清楚的是，10B <= 10A。因此，上述表达式简化为

```
!!(true)&&!(true) 
```

这简化为

```
false && false 
```

这完全是错误的。也就是说，该集合得出结论，10A 和 10B 不等价，因此不相同，因此它将 10B 与 10A 并排插入容器中。从技术上讲，此操作会产生未定义的行为，但几乎普遍的结果是该集合以值 10 的两个副本结束，这意味着它不再是一个集合。通过使用 less_equal 作为比较类型，我们破坏了容器！此外，任何相等值返回 true 的比较函数都会做同样的事情。根据定义，相等的值不相等！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-29T11:56:49.427

确实有问题。

比较函数应该满足[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)，而`<=`不是。

# css - 如何创建这个 CSS 边框

> ID：10371910
> 
> 赞同：2
> 
> 时间：2012-04-29T11:54:14.627
> 
> 标签：css

大家好，我正在尝试在 div 周围创建[这个](http://imageshack.us/photo/my-images/804/16848527.png/#)（图像）css 边框，但是遇到了麻烦。

我已经创建了边框，但无法使边框平滑。这是我的代码

```
border-left: 5px solid #036;
border-right: 5px solid #036;
border-top: 10px solid #036;
border-bottom: 5px solid #036; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T12:01:50.857

Fiddle Up，你可以[在这里](http://jsfiddle.net/toroncino/wKFtx/4/)看到它。

希望它有所帮助。

编辑：

html:

```
<div class="a">
    <span class="abs">Title here?</span>
    <div class="b">
        Hello.                
    </div>
</div>​ 
```

CSS：

```
div.a {
    border-top: 10px solid #333;
    border-left: 5px solid #333;
    border-bottom: 5px solid #333;
    border-right: 5px solid #333;
    border-radius: 10px;
    background-color: #333;
    width: 200px;
    height: 400px;
}
div.b {
    border-radius: 5px;
    background-color: #FFF;
    width: 180px;
    height: 350px;
    padding: 10px;
}

.abs {
    color: #FFF;
    display: inline-block;
    font-weight: bold;
    margin-bottom: 10px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T12:09:23.543

您可以使用新的 CSS3 工具实现这样的设置，即背景图像的边框半径和渐变形式。您可以在互联网上找到有关这些内容的信息，例如[背景渐变](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-understanding-css3-gradients/)和[边框半径](http://www.css3.info/preview/rounded-border/)。

下面是示例，它不适用于所有浏览器，并且不完全是您想要的，但它应该足以为您提供基本概念：

html 结构可能如下所示：

```
<div id="big_div">
    Search for a hotel
    <div id="small_white_div">
    Some other content
    </div>
</div> 
```

相应的 css 将是：

```
#big_div {height:450px;width:250px;border-radius: 5px;background-color:red;
background-image: linear-gradient(bottom, rgb(33,51,140) 5%, rgb(125,187,209) 51%,
rgb(33,51,140) 100%);
background-image: -o-linear-gradient(bottom, rgb(33,51,140) 5%, rgb(125,187,209) 51%,
rgb(33,51,140) 100%);
background-image: -moz-linear-gradient(bottom, rgb(33,51,140) 5%, rgb(125,187,209)    
51%, rgb(33,51,140) 100%);
background-image: -webkit-linear-gradient(bottom, rgb(33,51,140) 5%, rgb(125,187,209)
51%, rgb(33,51,140) 100%);
background-image: -ms-linear-gradient(bottom, rgb(33,51,140) 5%, rgb(125,187,209) 51%, 
rgb(33,51,140) 100%);
background-image: -webkit-gradient(
linear,
left bottom,
left top,
color-stop(0.05, rgb(33,51,140)),
color-stop(0.51, rgb(125,187,209)),
color-stop(1, rgb(33,51,140))
);}
#small_white_div {height:400px;width:220px;margin:auto;border-radius:5px;
background-color:white;margin-top:20px;} 
```

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T11:58:35.810

它是用背景图像完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T11:58:14.533

您正在寻找边界半径来获得圆角。尝试这样的事情：

```
-webkit-border-radius: 8px 8px 8px 8px;
-moz-border-radius: 8px 8px 8px 8px;
border-radius: 8px 8px 8px 8px; 
```

请注意，这是 CSS3，不适用于旧版本的 IE

# process - 上下文切换时间

> ID：10371914
> 
> 赞同：2
> 
> 时间：2012-04-29T11:54:45.937
> 
> 标签：process, operating-system, switching

进程之间的上下文切换是否对所有进程（恒定时间）花费相同的时间，或者上下文切换时间取决于因进程而异的各种本地因素（如进程大小、堆栈大小等）？

编辑：假设操作系统和硬件是固定的，意味着给定操作系统和硬件的时间相同。环境 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:13:29.467

它因硬件以及操作系统/进程而异：（要从不同的进程运行线程，必须交换内存管理上下文、浮点上下文等。这在某些硬件上比其他硬件更容易/更快。

驱动程序在处理硬件和向操作系统发出一个线程应该运行的信号时差异很大 - 所以这是另一个复杂因素。

在某些情况下，这样的交换可能需要抢占在另一个内核上运行的线程，而不是接收到启动交换的硬件/软件中断的内核。这比在同一处理器上交换上下文花费的时间要长得多。

在这方面很难得出任何平均数字。您将从哪里开始计时 - 启动进程间线程交换的驱动程序中断或从驱动程序到调度程序的条目？

因此，总的来说，我们可能会同意这需要一些时间并且可能会有所不同。

# javascript - Facebook JavaScript SDK 登录按钮不弹出权限

> ID：10371915
> 
> 赞同：1
> 
> 时间：2012-04-29T11:54:58.037
> 
> 标签：javascript, jquery, facebook, button, login

对于我创建的许多 Facebook 应用程序，我已经使用下面的代码很长时间了，但是从几个小时前开始，这段代码似乎不再起作用了。不知道这段代码是不能再用还是暂时不能用了。有没有类似于下面代码的替代代码？

```
<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en">
<head>
<link rel="stylesheet" type="text/css" href="style.css"/>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>FB APP</title>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<style>
body{
    background: #ffffff url('lp.jpg') top center no-repeat;
    margin-left: 160px;
}
@font-face {
    font-family:fabada;
    src: url('fabada.ttf');
}
#likegate{
    text-align: center;
    margin-top: 400px;
    margin-left: 350px;
    padding-bottom: 100px;
}
</style>
</head>
<body>
<!-- DEFINITING FACEBOOK APP ID -->
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript">
    FB.init({
        appId   : '448829841800709',
        status  : true, // check login status
        cookie  : true, // enable cookies to allow the server to access the session
        xfbml   : true  // parse XFBML
    });
    FB.UIServer.setActiveNode = function(a,b){FB.UIServer._active[a.id]=b;}
    // Scroll Bar Fixed
    window.setTimeout(function() {
        FB.Canvas.setAutoResize(90);
        FB.Canvas.setAutoResize();
        FB.Canvas.setSize({ width: 810, height: 555 });
    }, 250);
</script>
<script type="text/javascript">
function loging(getuid){
jQuery("#loginfb").hide();
jQuery("#fbload").show();
FB.api(
          {
            method: 'fql.query',
            query: 'SELECT name, uid FROM user WHERE uid=' + getuid 
          },
          function(response) {
            var user = response[0];
            jQuery.ajax({
            type: 'GET',
            url: 'login.php?uid=' + getuid,
            success: function(data) {
                jQuery('#jstarget').html(data);
                jQuery("#fbload").hide();
            }
            });
          }
        );        
}

window.fbAsyncInit = function () {
FB.init({
          appId   : '448829841800709',
          status  : true, // check login status
          cookie  : true, // enable cookies to allow the server to access the session
          xfbml   : true, // parse XFBML
          oauth   : true
        });
}

jQuery(document).ready(function() {
    // fetch the status on load
    jQuery('#loginfb').bind('click', function() {
        FB.init({
              appId   : '448829841800709',
              status  : true, // check login status
              cookie  : true, // enable cookies to allow the server to access the session
              xfbml   : true, // parse XFBML
              oauth   : true
            });
        if (response.authResponse){
            FB.api('/me', function(response) {
            loging(response.id);
            }); 
        } 
        else{
            //user is not connected to your app or logged out
            FB.login(function(response) {
                if(response.authResponse) {
                    FB.api('/me', function(response) {
                    loging(response.id);
                    });
                } 
                else {
                    //user cancelled login or did not grant authorization
                }
            }, {scope:'publish_stream'});   
        }
    });
    // handle a session response from any of the auth related calls
});
</script>
<div id="jstarget"></div>

<div id="box">
    <!--MAIN CONTENT-->
    <div id="content">
        <div id="likegate">
            <img src="login.png" style="cursor: pointer; float: left;" id="loginfb" alt="Login">
            <img src="ajax-loader.gif" style="float: left; padding-left: 50px; display:none" id="fbload" alt="Loading">
        </div>
    </div>
</div>
</body>
</html> 
```

**更新**

当我删除这个

```
if (response.authResponse){
    FB.api('/me', function(response) {
    loging(response.id);
    }); 
}
else{
   // this code here not removed
} 
```

它显示弹出权限对话框，但是当我允许此应用程序时，我再次单击登录按钮，为什么它再次显示弹出权限对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:36:59.077

您需要删除所有多个 FB.init，不要在 jquery 1.7.1 之后使用 .bind() 它将被 .on() 折旧

2) 添加 channel.html 可以帮助您解决任何 XD 问题。3) 使用 FB.getAuthResponse() ，获取认证响应

我做了一个快速清理，但从未测试过！这里有很大的改进空间是它的样子：

```
<!-- DEFINITING FACEBOOK APP ID -->
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '448829841800709', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

     FB.UIServer.setActiveNode = function(a,b){FB.UIServer._active[a.id]=b;}
    // Scroll Bar Fixed
    window.setTimeout(function() {
        FB.Canvas.setAutoResize(90);
        FB.Canvas.setAutoResize();
        FB.Canvas.setSize({ width: 810, height: 555 });
    }, 250);

  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
<script type="text/javascript">
function loging(getuid){
    jQuery("#loginfb").hide();
    jQuery("#fbload").show();
    FB.api(
              {
                method: 'fql.query',
                query: 'SELECT name, uid FROM user WHERE uid=' + getuid 
              },
              function(response) {
                var user = response[0];
                jQuery.ajax({
                type: 'GET',
                url: 'login.php?uid=' + getuid,
                success: function(data) {
                    jQuery('#jstarget').html(data);
                    jQuery("#fbload").hide();
                }
                });
              }
            );        
}

jQuery(document).ready(function() {
    // fetch the status on load
    jQuery('#loginfb').on('click', function() {

        if (FB.getAuthResponse()){
            FB.api('/me', function(response) {
            loging(response.id);
            }); 
        } 
        else{
            //user is not connected to your app or logged out
            FB.login(function(response) {
                if(response.authResponse) {
                    FB.api('/me', function(response) {
                    loging(response.id);
                    });
                } 
                else {
                    //user cancelled login or did not grant authorization
                }
            }, {scope:'publish_stream'});   
        }
    });
    // handle a session response from any of the auth related calls
});
</script> 
```

# haskell - Haskell 中的“ls”是什么意思？

> ID：10371916
> 
> 赞同：4
> 
> 时间：2012-04-29T11:55:03.517
> 
> 标签：haskell

我知道“xs”可用于表示列表中的其余元素，但我完全不知道“ls”在 Haskell 中是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T12:02:50.483

`ls`不是预定义的东西。它是你绑定到的任何东西，就像`xs`.

例如，我想你已经看过这样的例子：

```
sum [] = 0
sum (x:xs) = x + sum xs 
```

`xs`由于 pattern ，您刚刚在此处定义的变量会被*绑定*（将具有值）列表的其余部分`(x:xs)`。但这同样可以写成：

```
sum [] = 0
sum (l:ls) = l + sum ls 
```

不过，我们不想调用变量`l`，因为它很容易与数字混淆`1`（甚至是`|`真正混乱字体上的管道符号）。

我们甚至可以写：

```
sum [] = 0
sum (head:tail) = head + sum tail 
```

我们重用了内置前奏函数的名称`head`和`tail`，但这势必会导致混淆。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T11:57:36.500

在 haskell 中命名引用列表的变量的经验法则是添加*-s*，就像英语中的常规复数一样。因此，如果您有 ha`x`元素列表，请命名它`xs`。如果你有一个`l`，列表`l`将是 `ls`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-29T12:35:39.260

我使用`ls`而不是列表**列表**`xs`的特殊情况。

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-29T11:57:50.920

这是完全相同的事情。xs 这个名字没有什么特别之处；将列表的头部和尾部分别命名为 x 和 xs、a 和 as、l 和 ls 等只是惯例。**

# c++ - 关于用 C++ 为酷语言制作编译器的问题

> ID：10371918
> 
> 赞同：0
> 
> 时间：2012-04-29T11:55:13.200
> 
> 标签：c++, compiler-construction

大约一周前，我在 coursera.org 上开设了在线课程“编译器”。今天我得到了一些开始的代码。

我希望你能帮助我得到一些问题的答案。

`%{ /* some code */ %}` => 这是什么，我一直以为 % 是模块运算符

`[ \t]+`
`[0-9]+ { return(NUM); }`=> 我可以理解`[0-9]+`部分代码，但我不明白`[\t]+`这里在做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T11:58:35.500

这看起来像 Lex，而不是 C++

`%{ %}`指定将被逐字复制到输出源中的 C/C++ 代码。

`[ \t]+`忽略所有空格和制表符（`\t`是制表符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T12:00:34.467

首先，如果提供编译器所针对的语言的详细信息，那就太好了。

从所提供的任何信息来看，这里最好的猜测是 [\t] 用于识别标签，以防使用缩进来识别单独的代码块的类似 python 的语言。

# osx-lion - Mac OS X Lion 10.7.3 上的 Aptana Studio 3.1.1 - 垂直滚动条受挫

> ID：10371919
> 
> 赞同：0
> 
> 时间：2012-04-29T11:55:29.300
> 
> 标签：osx-lion, scrollbar, aptana

今天早上，我接受了 Aptana Studio 3 升级以构建 3.1.1.201204131931。

在更新之前，我在每个打开的文件窗口上都有一个清晰且永久可见的垂直滚动滑块。这些现在似乎已被更新的 Mac OS 风格的滚动条所取代，该滚动条很难激活，鼠标移开后立即消失，如此模糊，直到我注意到它的存在几个小时......

喵喵的行为对我的效率产生了深远的影响，因为我现在远不能直观地知道我在源文件中的位置。

有没有办法恢复原来的行为？整个过程中的默认值恢复以及对各种偏好设置、在线论坛和用户指南的数小时搜索都没有带来任何结果。很郁闷。。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:57:00.753

我认为默认情况下 Lion 仅在滚动时显示滚动条。

您可以通过“常规”下的 OS X 首选项更改此设置。将“显示滚动条：”选项更改为“始终”。

# python - 基于cookie从Django缓存中删除特定值

> ID：10371925
> 
> 赞同：0
> 
> 时间：2012-04-29T11:56:04.110
> 
> 标签：python, django

我正在使用 Django Cache 来缓存某些页面。我正在使用 @vary_on_cookie 装饰器来允许登录的用户缓存特定的用户详细信息。但是我需要清除特定页面的特定用户的缓存。

即我需要一种方法来生成与 django 中间件缓存生成密钥相同的密钥，使用 cookie 和路径等。然后我可以使用低级缓存自己清除特定条目。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T13:08:59.927

您正在寻找的功能位于`django.middleware.cache`：

```
>>> from django.middleware.cache import get_cache_key as gk
>>> help(gk) 
```

将返回以下内容：

```
get_cache_key(request, key_prefix=None, method='GET', cache=None)
    Returns a cache key based on the request path and query. It can be used
    in the request phase because it pulls the list of headers to take into
    account from the global path registry and uses those to build a cache key
    to check against. 
```

[`KEY_FUNCTION`](https://docs.djangoproject.com/en/dev/ref/settings/#key-function)请记住，您可以通过手动设置变量来定义自己的密钥生成机制 。

！

# php - 如何将数据插入位数据类型的字段？

> ID：10371926
> 
> 赞同：4
> 
> 时间：2012-04-29T11:56:07.747
> 
> 标签：php, sql

尝试将新记录插入数据库时​​遇到问题。我认为问题在于位域。当我分配值 True 我得到这个错误：

```
Failed: Array ( [0] => Array ( [0] => 22018 [SQLSTATE] => 22018 [1] 
=> 245 [code] => 245 [2] => [Microsoft][SQL Server Native Client 10.0]
[SQL Server]Conversion failed when converting the varchar value ' 1 ' 
to data type bit. [message] => [Microsoft][SQL Server Native Client 10.0]
[SQL Server]Conversion failed when converting the varchar value ' 1 ' to 
data type bit. ) ) 
```

但如果我将其更改为 false 它可以工作。我将展示我的一些代码。我已经把它的大部分删掉了，因为我把它缩小到这个变量：

```
$active = True; 
```

这是我的插入查询。

```
$sqlInsert = "INSERT INTO customers(
                customerID,
                registeredDate,
                givenName,
                familyName,
                email,
                password,
                phone,
                mobile,
                property,
                street,
                locality,
                town,
                area,
                postalCode,
                active
            ) 
            VALUES(" .
                $newUser . "," .
                $date . ", ' " .
                $given . " ', ' " .
                $family . " ', ' " .
                $email . " ', ' " .
                $pwd . " ', ' " .
                $phone . " ', ' " .
                $mob . " ', ' " .
                $property . " ', ' " .
                $street . " ', ' " .
                $locality . " ' , ' " .
                $town . " ', ' " .
                $area . " ', ' " .
                $postalcode . " ', ' " .
                $active . " ')";

$stmtInsert = sqlsrv_query($conn, $sqlInsert); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T12:29:48.930

我假设该`active`字段是`bit`数据类型。

您不要在为活动字段传递的值周围使用任何引号，就像您为 customerid 字段所做的那样。

另外，我认为您必须将值*true* / *false*转换为**1** / **0**。

*修改代码*：注意到周围的单引号`" . $active . "`已被删除。

```
$sqlInsert = "INSERT INTO customers(customerID, registeredDate, givenName,
                familyName,  email, password, 
                phone, mobile, property, 
                street, locality, town,  
                area, postalCode, active) 
              VALUES(" . $newUser . "," . $date . ", ' " . $given . " ', 
              ' " . $family . " ', ' " . $email . " ', ' " . $pwd . " ', 
              ' " . $phone . " ', ' " . $mob . " ', ' " . $property . " ', 
              ' " . $street . " ', ' " . $locality . " ' , ' " . $town . " ', 
              ' " . $area . " ', ' " . $postalcode . " ', " . $active . ")";
$stmtInsert = sqlsrv_query($conn, $sqlInsert); 
```

我不确定为什么它与*False*值一起使用。我建议您在设置所有值后找出`INSERT`语句的评估方式。不要执行语句，而是将 INSERT 语句打印到屏幕/页面并在 SQL Server Management Studio 中针对数据库手动运行它。

# linux - 用于修改数据包的 Linux 模块（Netfilter）

> ID：10371927
> 
> 赞同：0
> 
> 时间：2012-04-29T11:56:10.567
> 
> 标签：linux, module, packet

谁能告诉我如何使用 Netfilter 钩子通过 linux 模块修改数据包数据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:27:18.050

不必编写自己的 netfilter 模块。您可以使用 iptables 中的 QUEUE 目标从用户空间访问它，并编写一个处理队列的守护进程。

这方面的例子相对较少，但确实存在一些。它通常用于过滤，但您也可以（我相信）重新注入修改过的数据包（至少在 iptables 的 mangle 表中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T12:07:15.083

试试下面的程序

编写 IPTABLES 规则以将数据包传递给用户空间数据包

```
# iptables -A INPUT -p TCP -j QUEUE 
```

编译并执行为

```
$ gcc test.c -lipq
$ sudo ./a.out 
```

源代码

```
#include <netinet/in.h> 
#include <linux/netfilter.h> 
#include <libipq.h> 
#include <stdio.h> 
#include <stdlib.h>

#define BUFSIZE 2048
static void die(struct ipq_handle *h)
{
    ipq_perror("passer");
    ipq_destroy_handle(h);
    exit(1);
}
int main(int argc, char **argv)
{
    int status, i=0;
    unsigned char buf[BUFSIZE];
    struct ipq_handle *h;
    h = ipq_create_handle(0, NFPROTO_IPV4);

    if (!h)     die(h);

    status = ipq_set_mode(h, IPQ_COPY_PACKET, BUFSIZE);

    if (status < 0) die(h);

    do{
        i++;
        status = ipq_read(h, buf, BUFSIZE, 0);

        if (status < 0) die(h);

        switch (ipq_message_type(buf)) {
            case NLMSG_ERROR:
                fprintf(stderr, "Received error message %d\n",
                ipq_get_msgerr(buf));
                break;
            case IPQM_PACKET:
            {
                ipq_packet_msg_t *m = ipq_get_packet(buf);
                printf("\nReceived Packet");
                /****YOUR CODE TO MODIFY PACKET GOES HERE****/
                status = ipq_set_verdict(h, m->packet_id, NF_ACCEPT, 0, NULL);
                if (status < 0)  die(h);
                break;
            }
            default:
                fprintf(stderr, "Unknown message type!\n");
                break;
        }
    } while (1);
    ipq_destroy_handle(h);
    return 0;
} 
```

# iphone - ASIHTTPRequest 重定向

> ID：10371928
> 
> 赞同：2
> 
> 时间：2012-04-29T11:56:16.830
> 
> 标签：iphone, objective-c, asihttprequest

我在我的应用程序中使用 ASIHTTPRequest 来处理我的应用程序中的 Google 登录。

在我的一个请求中，我得到了重定向，这就是我所做的：

```
- (void)request:(ASIHTTPRequest *)request willRedirectToURL:(NSURL *)newURL{
    ASIHTTPRequest *redirect = [[ASIHTTPRequest alloc] initWithURL:newURL];
    [redirect setTimeOutSeconds:30];
    [redirect setValidatesSecureCertificate:NO];
    [redirect setDelegate:self]; 
    [redirect startAsynchronous];

    NSLog(@"Redirect - %@",url);
} 
```

当我发出这个请求时，没有调用 ASIHTTPRequest 委托方法，这是我进行重定向的 url：

```
https://accounts.google.com/Logout2?service=sj&amp;ilo=1&amp;ils=s.IL&amp;ilc=0&amp;continue=http%3A%2F%2Fmusic.google.com%2Fmusic%2Flisten&amp;zx=-834167044 
```

知道为什么会这样吗？

# 编辑

newURL 等于：

```
https://accounts.google.com/Logout2?service=sj&amp;ilo=1&amp;ils=s.IL&amp;ilc=0&amp;continue=http%3A%2F%2Fmusic.google.com%2Fmusic%2Flisten&amp;zx=835989037 
```

但是当我尝试获取 html 时，我得到的重定向 url 是：

```
https://accounts.google.com/Logout2?service=sj&amp;amp;ilo=1&amp;amp;ils=s.IL&amp;amp;ilc=0&amp;amp;continue=http%3A%2F%2Fmusic.google.com%2Fmusic%2Flisten&amp;amp;zx=835989037 
```

两者之间存在差异。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:06:49.877

`ASIHTTPRequest`当原始请求将打开相同的 URL 时，为什么要使用新的重定向？当您不使用新请求重定向时会发生什么？

我认为您最好停止原始请求，然后创建新请求。

# c# - 将文本附加到 rtf 字符串的位置

> ID：10371930
> 
> 赞同：2
> 
> 时间：2012-04-29T11:56:39.787
> 
> 标签：c#, windows, winforms, richtextbox

我想在文本框中附加文本，例如“世界”，但不`Windows.Forms`使用`RichTextBox`. 相反，我想指定位置和要插入到 Rtf 属性中的字符串`RichTextBox`！那么，是否可以直接更新 rtf 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:33:36.883

```
string rtfStuffs = this.richTextBox1.Rtf;
// Edit as you see fit...
this.richTextBox1.Rtf = rtfStuffs; 
```

# jquery - 动态创建的 div 定位问题

> ID：10371932
> 
> 赞同：0
> 
> 时间：2012-04-29T11:56:52.967
> 
> 标签：jquery, css, position

我正在以下 heirachy 创建 div

```
<div class="box">
Content goes here
<div class="footer>Footer</div>
</div>
<div class="box">
Content goes here
<div class="footer>Footer</div>
</div>
<div class="box">
Content goes here
<div class="footer>Footer</div>
</div> 
```

主框“框”是可滚动的。我希望页脚“页脚”保持在父容器的底部，即“框”。我在谷歌上搜索了三天。没有工作。很着急。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:14:41.773

你必须使用绝对位置和底部 0，就像上面说的**Sarfraz**一样。

这是示例代码：

```
<html> 
<head> 
<style>
body { width:100%;}
.box { float: left; height: 200px; margin-right: 5%; position: relative; width: 20%;}
.footer {bottom: 0px; position: absolute; width: 100%; text-align: center;}
.box_content{ height: 180px; overflow-y: scroll;}
.clear { clear:both;}
</style> 
</head> 
<body> 
<div class="box">
    <div class="box_content">
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
    </div>
    <div class="footer">Footer</div>
</div>
<div class="box">
    <div class="box_content">
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
    </div>
    <div class="footer">Footer</div>
</div>
<div class="box">
    <div class="box_content">
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
        Content goes here <br />
    </div>
    <div class="footer">Footer</div>
</div>  
<div class="clear"> </div> 
</body> 
</html> 
```

# performance - 如何求时间复杂度？

> ID：10371934
> 
> 赞同：1
> 
> 时间：2012-04-29T11:56:54.763
> 
> 标签：performance, algorithm, big-o, time-complexity

> **可能的重复：**
> [算法的时间复杂度](https://stackoverflow.com/questions/10369061/time-complexity-for-an-algorithm)

在计算以下算法的时间复杂度时，我的解释是否正确？

*   一个 HashSet，moduleMarksheetFiles，用于添加包含指定 moduleName 的文件。-marksheetFiles 是一个哈希集。-如果模块是“数学”，那么任何带有模块“数学”的标记表都会添加到 HashSet。

    ```
    for (File file: marksheetFiles){
         while(csvReader.readRecord()){
             String moduleName = csvReader.get(ModuleName);

             if (moduleName.equals(module)){
                   moduleMarksheetFiles.add(file);
             }
         }
     } 
    ```

*   设 m 为文件数

*   设 k 为每个文件的平均记录数。
*   因为每个文件只添加一次，因为 HashSet 不允许重复。HashSet.add() 平均为 O(1)，最坏情况为 O(n)。
*   搜索具有指定 moduleName 的记录涉及将文件中的每条记录与 moduleName 进行比较，需要 O(n) 步。

因此，平均时间复杂度为：O((m*k)^2)。

这个对吗？

另外，您将如何计算最坏的情况？

谢谢。

PS。这不是功课，只是分析我系统的算法来评估性能。

# frameworks - awe6游戏框架的好教程？

> ID：10371937
> 
> 赞同：6
> 
> 时间：2012-04-29T11:57:27.837
> 
> 标签：frameworks, haxe

就在最近，我偶然发现了 Haxe 的[awe6 游戏框架](http://code.google.com/p/awe6/)，我想试一试，但该网站上唯一的“教程”是一个预构建的 FlashDevelop 项目模板，它似乎也已经相当复杂了。

我试图剖析模板，但有些事情很奇怪，我无法弄清楚为什么模板似乎工作，所以我更喜欢一个教程（或至少一个非常简单的“Hello World”示例）在不假设特定 IDE 的情况下设置并运行所有内容。我也试过谷歌，但几乎所有的结果都回到了 FlashDevelop 模板。

是否有任何带有 awe6 源代码的教程/示例/简单演示，这些教程/示例/简单演示未包含在特定于 IDE 的模板中，并且是逐步的和/或易于理解的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T19:44:29.120

我们正在开发一套教程（和视频）。同时，请查看这个非常简单的 Hello World 示例，该示例指向模板（现在也可作为 Linux bash 脚本使用）：

[http://code.google.com/p/awe6/wiki/ExampleHelloWorld](http://code.google.com/p/awe6/wiki/ExampleHelloWorld)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T03:52:26.920

这并不完全是一个答案，但该框架的作者[Rob Fell](https://twitter.com/hypersurge)几周前在 WWX 会议上做了一个演讲：

*   [幻灯片](https://prezi.com/yzvwdmevm9_c/p-may-the-force-be-with-you-making-a-game-with-awe6/?auth_key=8eadceff59596f8a8b289c119c02fa3dc670c4b9)
*   [记录](https://www.youtube.com/watch?v=MH2inmm_qYc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T02:47:06.963

Valerie Elimak 的演讲有几个很好的例子[http://workshops.elimak.com/awe6june12/](http://workshops.elimak.com/awe6june12/)

# java - 与 LinkedList 实现混淆

> ID：10371941
> 
> 赞同：2
> 
> 时间：2012-04-29T11:58:14.157
> 
> 标签：java, arrays, linked-list

所以我的一部分作业是获取一串整数并将它们中的每一个放在一个列表中，这就是我所做的：

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);

    String N;
    int count;        
    LinkedList<Integer> booksList = new LinkedList<>();

    System.out.printf("Give: ");
    N = input.nextLine();

    String[] arr = N.split(" ");        

    for (count = 0; count < arr.length - 2; count++) {            
        booksList.add(Integer.parseInt(arr[count + 2]));
    } 
```

所以我所做的是获取字符串，将其拆分为一个数组，然后使用 for 循环获取项目并将它们放入一个列表中。我感到困惑的是，我看到人们在括号内使用带有“new”的 add 命令，如下所示：

```
 booksList.add(new Integer.parseInt(arr[count + 2])); 
```

这让我很困惑，我不确定我是否以正确的方式这样做。顺便说一句，我从 count + 2 中获取数组元素，因为我不需要答案的前两个元素，但我需要将前两个整数存储在两个单独的变量中。

我也看到有人写这个：

```
List<Integer> booksList = new LinkedList<>(); 
```

这和我写的有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T12:15:12.030

构造

```
List<Integer> booksList = new LinkedList<>(); 
```

经常看到主要有两个原因：

*   a) 你不确定最适合你的收藏是什么。有很多候选对象：数组、集合、列表、向量、映射等，但您必须使用特定的东西。所以在右手边，它必须是具体的，但在左手边，你要尽可能地敞开心扉。

很多时候你只是对集合进行迭代，使用 for 循环，搜索，排序，放入，取自，删除。

如果您发现第一个想法的兄弟更适合，您可以稍后更改 RHS，而无需重写程序的其余部分，因为例如，LinkedList 和 ArrayList 的大多数方法都满足相同的合同，定义在列表中。

*   b）如果您使用更广泛的对象，您将与外部世界兼容。当然，你不能使用像 Object 这样模糊的东西，因为 Object 没有 .add (E) 方法。

但是对于排序、搜索等 List 非常适合。查看文档，并比较 List、LinkedList 和 ArrayList。尝试在您的代码中将其替换为另一个。

也许 Linked~ 和 ArrayList 中的两个 'sublist (int fromIndex, int toIndex)' 方法在基类中定义，并且行为相同。

但也许他们是专门的，并且自己实现 subList 。这里我们有一个接口 <- 类的关系，所以我们知道，接口中没有实现，它是完全抽象的。但是在（抽象）基类<-派生类的情况下，模式是相同的。派生/实现类共享相同的接口，“public List sublist (int fromIndex, int toIndex)”。您希望它们产生相同的结果，但以不同的方式 - 也许。

仅当您需要调用仅存在于 LinkedList 中的方法时，您才可以预先将 bookList**声明为 LinkedList，或者为此目的进行转换：**

```
List<Integer> books = new LinkedList<>();
// ...
LinkedList <Integer> booksLiLi = (LinkedList <Integer>) books <> ();
// do something with booksLiLi which isn't defined on the List interface. 
```

* * *

旁注：您的代码可以使用现代（7 岁）foreach 循环进行简化：

```
Scanner input = new Scanner (System.in);
LinkedList<Integer> booksList = new LinkedList<>();
System.out.printf ("Give: ");
String N = input.nextLine ();
String[] arr = answer.split (" ");        

for (String num: arr) {            
    booksList.add (Integer.parseInt (num));
}
bookList.remove ();
bookList.remove (); 
```

但是如果你声明了一个 Scanner，你可以直接从 Scanner 中获取 Integers：

```
Scanner input = new Scanner (System.in);
LinkedList<Integer> booksList = new LinkedList<>();
System.out.printf ("Give: ");       

while (input.hasNextInt ()) {            
    booksList.add (input.nextInt ());
}
bookList.remove ();
bookList.remove (); 
```

作为对评论的回应，这里是第三个代码：从 System.in 中读取一行，然后在该行上创建一个 Scanner：

```
 String line = input.nextLine (); 
    Scanner valueLine = new Scanner (line);
    List<Integer> books = new LinkedList<>();

    while (valueLine.hasNextInt ()) {            
        books.add (valueLine.nextInt ());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T12:05:41.233

该**函数** `Integer.parseInt`返回 a `new Integer`，因此您不需要使用**new**关键字。

继续试验并使用 Eclipse 之类的 IDE，它会突出显示编译错误，您很快就会学习该语言。如果您仍然在努力阅读在线教程或询问您的教授。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T12:11:04.580

你的代码很好。

以下：

```
booksList.add(new Integer.parseInt(arr[count + 2])); 
```

在语法上不正确，而您所拥有的是。

至于`List<Integer> booksList = ...`vs `LinkedList<Integer> booksList = ...`，我认为前者的风格稍好一些。但是，有时需要使用后者。区别主要在于风格，我现在不会太担心。

最后，我想回应其他人在评论中所说的话：在第一次使用变量时声明变量，而不是之前。另外，不要重用变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T12:18:57.860

Java 中的A`List`是一个接口，通过该接口在特定实现中定义方法。比如`LinkedList`实现List接口，创建自己版本的add、delete等方法。这非常重要，因为其他数据结构，例如`ArrayList`也实现了 List 接口。添加、删除和其他方法在`LinkedList`和中的操作非常不同`ArrayList`。

当你写

```
List<Integer> booksList = new LinkedList<>() 
```

它的运作方式与

```
LinkedList<Integer> booksList = new LinkedList<>() 
```

因为`new`关键字创建了一个`LinkedList`绑定到 name 的对象`booksList`。 `booksList`恰好是第一个示例中的 List 对象，从中`LinkedList`实现。

检查文档并查看哪些数据结构实现了 List 接口。您会惊讶于 a 有多少种`List<Integer> newList = new ....`有效代码。

没有提到的一件事是在声明数据结构时在所有尖括号中传递泛型类型是一个好主意。

IE`List<Integer> booksList = new LinkedList<Integer>()`

# iphone - iPhone 或 cocos2d 处理视网膜显示触摸的错误？

> ID：10371943
> 
> 赞同：1
> 
> 时间：2012-04-29T11:58:24.383
> 
> 标签：iphone, cocoa-touch, cocos2d-iphone

我试图在我的 cocos2d 1.01rc iPhone 应用程序中处理视网膜显示触摸，并发现这样做我必须将触摸点乘以比例因子（参见下面的代码），即使我在我的 AppDelegate 中设置为视网膜显示（参见代码在页面的末尾）。我有点困惑，因为我预计**locationInView**功能会检索视网膜显示触摸而不是“标准”480x640 分辨率触摸。我的猜测是，这是由于**locationInView**来自 ios 库而不是来自 cocos2d，并且 cocos2d App 委托中的视网膜显示设置直到 ios 级别才会传播。奇怪的。为了清楚起见，我发布了下面的代码和输出，但如果您有类似的问题并且我是否应该考虑这个“错误”，我将不胜感激。作为 cocos2d 和 ios sdk 之间可能丢失的其他内容的警告。我可能只是愚蠢，没有找到合适的文档页面。

这是我在 ccTouchesEnded 事件上运行的代码：

```
-(void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
for(int i=0; i<[[touches allObjects] count]; i++){
    UITouch *touch = [[touches allObjects] objectAtIndex:i];
    CGPoint point = [touch locationInView: [touch view]];
    CCLOG(@"Before x:%f y:%f", point.x, point.y);
    point = [[CCDirector sharedDirector] convertToGL: point];   
    float factor = CC_CONTENT_SCALE_FACTOR();
    CCLOG(@"factor %f:", factor);
    CCLOG(@"After x:%f y:%f", point.x  , point.y  );
    CCLOG(@"After x:%f y:%f", point.x * factor, point.y * factor);
    ...
    } 
```

输出：

```
Before x:314.000000 y:3.000000
factor 2.000000:
After x:314.000000 y:477.000000
After x:628.000000 y:954.000000 
```

该应用程序在第 4 代 iPod touch 上在视网膜显示屏下运行，以下是一些初始化数据：

```
cocos2d: cocos2d v1.0.1
 cocos2d: GL_VENDOR:   Imagination Technologies
 cocos2d: GL_RENDERER: PowerVR SGX 535
 cocos2d: GL_VERSION:  OpenGL ES-CM 1.1 IMGSGX535-63.14.2
  cocos2d: GL_MAX_TEXTURE_SIZE: 2048
 cocos2d: GL_MAX_MODELVIEW_STACK_DEPTH: 16
 cocos2d: GL_MAX_SAMPLES: 4
 cocos2d: GL supports PVRTC: YES
 cocos2d: GL supports BGRA8888 textures: YES
  cocos2d: GL supports NPOT textures: YES    
cocos2d: OS version: 5.0.1 (0x05000100)
cocos2d: surface size: 640x960 
```

我在 google 和 stackoverflow 上进行了检查，在我看来，这是一年前的一个已知错误，我只是不能 100% 确定这是否已在 rc1.01 版本中修复，或者我是否在我的 AppDelegate 中做了一些愚蠢的事情：

```
- (void) applicationDidFinishLaunching:(UIApplication*)application
{
    //added
    CC_DIRECTOR_INIT();

    // Init the window
//  window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Try to use CADisplayLink director
    // if it fails (SDK < 3.1) use the default director
    if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
        [CCDirector setDirectorType:kCCDirectorTypeDefault];

    CCDirector *director = [CCDirector sharedDirector];

    [director setDeviceOrientation:kCCDeviceOrientationPortrait];

    // Init the View Controller
//  viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
//  viewController.wantsFullScreenLayout = YES;

    //
    // Create the EAGLView manually
    //  1\. Create a RGB565 format. Alternative: RGBA8
    //  2\. depth format of 0 bit. Use 16 or 24 bit for 3d effects, like CCPageTurnTransition
    //
    //
    EAGLView *glView =  [director openGLView];
    [glView setMultipleTouchEnabled:YES];

    // attach the openglView to the director
    [director setOpenGLView:glView];

//  // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if( ! [director enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported"); 
```

有任何想法吗？这会影响我代码的其他方面吗？它似乎只涉及触摸检测，因此乘以比例因子的修复似乎没问题，当我访问精灵对象的相对位置时似乎没有问题。我会为此做更多的测试并记住这一点。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T20:35:24.670

这是设计使然。

您必须了解 iOS 设备以点为单位报告触摸位置。Retina 和非 Retina 设备的点分辨率均为 480x320 点。在 Retina 设备上，一个点由 4 个像素组成，而在所有其他设备上，一个点等于屏幕上的一个像素。

根据[事件处理指南](http://developer.apple.com/library/ios/#DOCUMENTATION/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html#//apple_ref/doc/uid/TP40009541-CH3-SW1)，Retina 设备上的触摸可以报告为 0.5 个位置（阅读第一个*注释*框），为您提供完整的 Retina 触摸分辨率。如果您不这样做，那么该分辨率可能会在转换过程中丢失（检查原始 UITouch 位置）。无论哪种方式，触摸的 Retina 分辨率都太准确了，无法使用，480x320 的触摸就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T13:37:51.783

在 iOS（和 Cocos）中，触摸和很多东西（如视图位置/大小）不是以像素为单位处理的，而是以点为单位的。

在非视网膜屏幕中，一个点正好是一个像素，但在视网膜显示器中，一个点是两个像素宽和两个像素高。

这意味着您的所有触摸和其他坐标将始终在标准显示器的范围内（纵向 320 像素宽和 480 像素高）。这很棒，因为您不必担心屏幕的种类，而且您的代码更干净。

iOS 和 Cocos 几乎都在后台管理高分辨率，因此加载的图像将具有高分辨率，但您不必担心代码中有更多像素的屏幕。

（如果出于某种特定原因您想使用像素而不是点，那么您所做的是正确的，将点乘以内容大小。Apple 对点所做的背后的想法是您不必为此烦恼， 尽管）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T13:49:30.407

尝试

```
CGPoint point = [touch locationInView: [touch view]];
CGPoint convertedLocation = [[CCDirector sharedDirector] convertToGL:point];
CGPoint locationInSelf = [self convertToNodeSpace:convertedLocation]; 
```

我认为 cocos 在 convertToNodeSpace 中应用了适当的比例因子。依赖 API 将使您的代码在任何潜在的未来变化中（无论是在 cocos 中还是在苹果的东西中）。

至于对视网膜的担忧，我的总工作时间几乎为零（只需要处理我有创意并偏离上述“生存”声明的情况，在非高清版本中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T16:01:01.670

```
CCLOG(@"After x:%f y:%f", point.x * factor, point.y * factor); 
```

这里不需要使用因子相乘。因为在视网膜显示器中 640 * 960 是像素大小，并且对于触摸处理它们返回点，所以删除因子乘法。可能是它帮助你。

# iis - 在计算机“。”上找不到服务 WAS。

> ID：10371944
> 
> 赞同：4
> 
> 时间：2012-04-29T11:58:30.677
> 
> 标签：iis, iis-7

我正在使用 Windows 7 专业版。当我尝试在 IIS 7.0 中启动 DefaultAppPool 时，出现错误 -

> 在计算机“.”上找不到服务 WAS。

是否需要更改设置？

![在此处输入图像描述](../Images/a8bc31b56dd466b564e1bfda69e37ab7.png)

# jquery - 如何在输入元素上使用引导工具提示？

> ID：10371948
> 
> 赞同：41
> 
> 时间：2012-04-29T11:58:40.323
> 
> 标签：jquery, html, tooltip, twitter-bootstrap

我不是 100% 确定这是可能的，因为`input`没有`rel`属性（Bootstrap 网站上的示例仅显示 1 个示例`rel="tooltip"`），但我认为它应该可以工作。

这是我的 HTML：

```
<input id="password" type="password" /> 
```

这就是我尝试触发它的方式：

```
$(document).ready(function () {

    $('input[id=password]').tooltip({'trigger':'focus'});
}); 
```

我也试过这个：

```
$('#password').tooltip({'trigger':'focus'}); 
```

而且它们似乎都不起作用。我最终想手动触发它，但这是第一步。有人知道解决方案吗？有可能吗？谢谢。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-04-29T12:12:42.150

尝试为工具提示指定“标题”参数。像：

```
$('#password').tooltip({'trigger':'focus', 'title': 'Password tooltip'}); 
```

顺便说一句，具有“rel”属性的输入元素没有错。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-20T23:37:38.957

如果有人想知道所有文本框的更通用的工具提示选项

```
$(document).ready(function() {
  $('input[rel="txtTooltip"]').tooltip();
});
```

```
<link href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<input type="text" rel="txtTooltip" title="**Your Title**" data-toggle="tooltip" data-placement="bottom">
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-11T13:16:13.783

**Boostrap 3 and 4**

Based on @Senthil's response, and using bootstrap 3.x or 4.x and JQuery, this will set tooltips for all input elements as long as the `title` property is set without the need of the `rel` attribute.

HTML:

```
<input class="form-control" id="inputTestID" name="inputTest" placeholder="Test" type="text" data-placement="bottom" title="Tooltip Text"> 
```

Javascript:

```
$(document).ready(function(){
  $('input').tooltip();
}); 
```

CSS:

```
.tooltip-inner {
  background-color: #fff; 
  color: #000;
  border: 1px solid #000;
} 
```

*   [Bootstrap 3 Fiddle](https://jsfiddle.net/stn5efuq/).
*   [Bootstrap 4 Fiddle](https://jsfiddle.net/foxwhy4v/).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-28T09:37:58.603

This may be useful for those having multiple input fields, so you don't end up calling several tooltip(),

Just do this, this is based on ID of input field, you could have it to work as class too;

```
$('input').each(function (i, e) {
    var label;
    switch ($(e).attr('id')) {
        case 'input-one':
            label = 'This is input #1';
            break;
        case 'input-two':
            label = 'This is input #2';
            break;
    }
    $(e).tooltip({ 'trigger': 'focus', 'title': label });
}); 
```

Hope it helps :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-22T08:34:43.350

**Enable tooltips everywhere**

One way to initialize all tooltips on a page would be to select them by their data-bs-toggle attribute:

```
var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
  return new bootstrap.Tooltip(tooltipTriggerEl)
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-25T01:09:40.570

Why not use data-toggle attribute as a trigger a tooltip if present?

```
$(document).ready(function() {
  $('[data-toggle="tooltip"]').tooltip()
})
```

```
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<button type="button" class="btn btn-secondary" data-toggle="tooltip" data-placement="bottom" title="Tooltip on bottom">
  Tooltip on bottom
</button>
```

# assembly - 调试用 yasm 创建的汇编代码

> ID：10371951
> 
> 赞同：1
> 
> 时间：2012-04-29T11:58:51.210
> 
> 标签：assembly, x86, x86-64, nasm, yasm

我需要一些帮助来查找和使用一个好的调试器，用于在 64 位 Linux 上用 yasm 组装的 asm 代码。gdb 调试器一直抱怨没有加载符号表。stackoverflow 上的某个人建议使用 -dstabs 开关进行组装，但这对我来说没有什么区别。ddd 也没有什么不同。

如果我能找到摆脱“未加载符号表”问题的方法，gdb 就不会那么糟糕了。我还需要能够查看寄存器和其他声明的内容。

我使用汇编我的 asm 文件`yasm -f elf -m amd64 file.asm`并链接到`ld file.o -o file`. 使用 yasm`-l`开关创建 .lst 文件似乎也不起作用。

我发现的关于这个问题的所有建议似乎都与使用 gcc 作为链接器而不是 ld 有关。我需要能够与 ld 链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T12:56:45.503

您应该使用该`-g`选项来`yasm`. 我建议使用这种`dwarf2`格式，因为这似乎是当今的标准。

```
yasm -f elf -m amd64 -g dwarf2 file.asm 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-02T22:59:01.540

我目前正在学习系统编程，我们使用[ddd](https://www.gnu.org/software/ddd/)进行调试，使用`-g dwarf2`标志。到目前为止，它运作良好。

# algorithm - 与神经网络中的几个输出节点相比，具有多个输出节点的优点或缺点是什么

> ID：10371953
> 
> 赞同：5
> 
> 时间：2012-04-29T11:58:59.183
> 
> 标签：algorithm, artificial-intelligence, machine-learning, neural-network

与只有几个输出节点相比，在神经网络中拥有多个输出节点有什么优点或缺点吗？

例如，如果一个场景可以用 10、3、2 或 1 个输出节点来表示，那么哪个更好？- 显然这取决于你想如何表示输出，但现在说这并不重要。

还是输出节点的数量对网络的准确性没有影响，只是训练它所需的计算时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T13:00:04.777

输出节点的数量应与您要计算的值的数量相匹配。对于简单的回归或二元分类，您只需要一个输出节点。对于[多类分类](https://en.wikipedia.org/wiki/Multiclass_classification)或[多重回归](https://en.wikipedia.org/wiki/Linear_regression#Simple_and_multiple_regression)，您需要多个输出节点。

特别是，使用前馈神经网络的二进制分类是通过计算单个输出节点的激活来完成的，然后检查它是否大于某个阈值（通常为 0 或 .5）。对于具有*k*个类别的多类别分类，您计算*k*个输出节点的值，然后选择最大值的索引*i来预测类别**i*。

此外，使用多个输出节点，您可以进行多标签[分类](https://en.wikipedia.org/wiki/Multi-label_classification)，其中每个类/标签再次有一个输出节点，并为所有超过阈值的节点预测“真”。*k*个类别的多标签分类也可以由*k*个二元分类器执行，但您需要单独训练所有这些分类器，这对于神经网络来说可能很耗时。

# sharepoint - Sharepoint 中的 Silverlight 应用程序 - 列出权限问题

> ID：10371957
> 
> 赞同：0
> 
> 时间：2012-04-29T11:59:23.533
> 
> 标签：sharepoint, silverlight-4.0, permissions

我在 Sharepoint webpart 中设置了 Silverlight 应用程序。应用程序使用客户端对象模型修改 Sharepoint 列表。

我想要实现的是为这些列表提供一些安全性。这个想法是用户应该只能通过我的应用程序修改列表。用户应该无法通过 SharePoint UI 进行修改。

我知道使用 Web 服务可以实现类似的目标，但我的问题是是否可以使用客户端对象模型？

感谢您的任何回复，并对我的英语感到抱歉。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:51:12.527

最简洁的答案是不。用户将始终拥有一个上下文，并且可以根据登录的上下文和列表权限进行编辑。

您可以尝试其他技巧，例如隐藏列表和添加基于用户不属于管理员组的编辑/新表单的控件，只需拒绝以正常方式显示列表信息，但允许列表信息通过您的Silverlight 应用程序。

# .htaccess - htaccess 强制 www 并保持尾随 url

> ID：10371960
> 
> 赞同：0
> 
> 时间：2012-04-29T11:59:56.867
> 
> 标签：.htaccess, mod-rewrite

我正在使用以下内容重定向我的非 www。使用 www 的网址：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

</IfModule>
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "http://www.domain.com/"
</IfModule> 
```

但是，如果有人访问 domain.com/abc-123，它会重定向到 www.domain.com 并丢失剩余的 url。

有什么帮助吗？我该如何设置它不会删除网址的结尾？

米罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:26:44.353

只需交换规则的顺序即可。由于第一个 (WP) 规则正在剥离路径，因此在应用第二个规则时，路径将为空。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "http://www.domain.com/"
</IfModule> 
```

# c++ - 使用 UTF-8 输出的 windows 控制台下 printf 和 std::ostream 有什么区别

> ID：10371962
> 
> 赞同：7
> 
> 时间：2012-04-29T12:00:11.367
> 
> 标签：c++, winapi, visual-c++, unicode

我有一个将 UTF-8 字符串打印到控制台的程序：

```
#include <stdio.h>

int main()
{
    printf("Мир Peace Ειρήνη\n");
    return 0;   
} 
```

我将控制台配置为使用 True Type 字体（Lucida 控制台），定义 UTF-8 代码页（chcp 65001）用 MinGW GCC 和 Visual Studio 2010 编译这个程序它完美地工作，我看到：输出：

```
Мир Peace Ειρήνη 
```

我做同样的使用`std::cout`

```
#include <iostream>

int main()
{
    std::cout << "Мир Peace Ειρήνη\n" ;
    return 0;   
} 
```

这与使用 MinGW GCC 的上述方法一样完美，但使用 Visual Studio 2010，我得到的方块比方块还多（每个非 ASCII 字母两个）。

如果我使用重定向运行程序，`test >test.txt`我会在文件中获得完美的 UTF-8 输出。

两项测试均在 Windows 7 上完成。

**问题：**

1.  Visual Studio 标准库中的 printf 和 std::cout 在处理输出流方面有什么区别 - 显然其中一个有效而另一个无效？
2.  如何解决这个问题？

**真实答案：**

简而言之：你被搞砸了 -`std::cout`不能真正使用 MSVC + UTF-8 - 或者至少需要付出巨大的努力才能使其行为合理。

长篇大论：阅读答案中引用的两篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:36:20.757

您有许多有缺陷的假设，请先纠正这些假设：

*   事情似乎与 g++ 一起工作并不意味着 g++ 工作正常。

*   Visual Studio 不是编译器，它是一个支持多种语言和编译器的 IDE。

*   Visual C++ 的标准库需要修复的结论是正确的，但导致该结论的推理是错误的。还需要修复 g++ 标准库。更不用说 g++ 编译器本身了。

现在，Visual C++ 将 Windows ANSI（`GetACP`API 函数指定的编码）作为其未记录的 C++ 执行字符集。即使您的源代码是带有 BOM 的 UTF-8，窄字符串最终也会转换为 Windows ANSI。如果编译时在您的计算机上是包含所有非 ASCII 字符的代码页，则可以，否则窄字符串会出现乱码。因此，如果没有提及源代码编码和您的 Windows ANSI 代码页是什么，您的测试结果的描述就**严重不完整。**

但无论如何，“如果我使用重定向运行程序，`test >test.txt`我会在文件中得到完美的 UTF-8 输出”表明您所面临的是来自 Visual C++ 运行时的一些 C++ 级帮助，它绕过了流输出和使用*直接控制台输出*以获得在控制台窗口中显示的正确字符。

当它的假设（例如 Windows ANSI 编码的窄字符串文字）不成立时，这种帮助会导致垃圾。

这也意味着当您重定向流时效果会神秘消失。然后运行时库检测到流转到文件，并关闭直接控制台输出功能。您不能保证随后获得原始的原始字节值，但显然您做到了，这很不幸，因为它掩盖了问题。

顺便说一句，Windows 控制台中的代码页 65001 在实践中是不可用的。许多程序只是崩溃。包括例如`more`.

* * *

获得正确输出的一种方法是直接使用 Windows API 级别，直接控制台输出。

使用 C++ 流获得正确的输出要复杂得多。

它太复杂了，在这里没有描述（正确！）的空间，所以我不得不向您推荐我的关于它的两部分博客文章系列：[第 1](http://alfps.wordpress.com/2011/11/22/unicode-part-1-windows-console-io-approaches/)部分和[第 2 部分](http://alfps.wordpress.com/2011/12/08/unicode-part-2-utf-8-stream-mode/)。

# .net - 如何使用 Scintilla 启动项目？

> ID：10371965
> 
> 赞同：0
> 
> 时间：2012-04-29T12:00:36.990
> 
> 标签：.net, scintilla

我一直在尝试基于 Scintilla 编辑器做一个项目，因为我是新手，所以我不知道如何真正开始一个项目。我按照自述文件中的步骤进行操作，并能够在 Windows 上构建 Scintilla，现在正试图弄清楚我接下来应该做什么。

任何形式的回答/建议/建议都将受到高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T19:51:08.967

当我开始使用我的词法分析器时，我发现它有点令人生畏，但一切都归结为一些重要的想法：

*   将词法分析器放在词法分析器文件夹中
*   告诉闪烁你添加的词法分析器
*   将常量添加到 scintilla.iface
*   告诉闪烁你自己的常量（如果你使用任何）
*   代码/编译+重复直到满意

一个实际的例子是：

创建 Lexer 模板后，您将其命名为 LexNEW.cxx

*   将 LexNew.cxx 放入`/lexers`文件夹
*   输入`/src`并运行`LexGen.py`，这告诉 scintilla 有一个新的词法分析器，将其添加到 Scintilla.h

现在将常量添加到 .iface 文件中。最重要的是：`val SCLEX_NEW=108`where`108`是未使用的 id 号，`lex new=SCLEX_NEW SCE_NEW_`where`new`是您的词法分析器的有效唯一短标识符。

将它们放在与其他部分相同的部分（以避免以后混淆），如果有疑问，请使用其他定义之一作为模板！

现在在您的`lex new=`行下方，您可以定义自己的常量值，例如：

```
val SCE_NEW_DEFAULT=0
val SCE_NEW_COMMENTLINE=1
val SCE_NEW_COMMENTBLOCK=2
val SCE_NEW_ERROR=31 
```

在这一步之后，你几乎准备好了。

*   输入`/include`并运行`Hface.py`它会告诉闪烁你的新常量。

如果您的 lex 代码有效，那么您就可以编译了。

记住每次创建新常量时都要重复最后一步。该`HFace.py`脚本将这些值添加到 SciLexer.h，如果您不想每次都执行两个步骤，您可以手动执行。

这就是我的朋友编译后确保你的程序设置你的词法分析器的东西：`sci.SetLexer(108)`并为每个状态设置一些颜色`sci.StyleSetFore(01, 0x008800) // SCE_NEW_COMMENTLINE`，等等。

您将要使用`SciLexer.dll`的最后一件事是包含所有词法分析器而不是`scintilla.dll` 祝您好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:01:18.983

您可能会发现[.NET 的 Scintilla 为](http://scintillanet.codeplex.com/)您提供了一个良好的开端......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:34:43.340

我正在从事基于 Scintilla 的项目，并与您分享我的一些经验。要开始一个项目，首先下载 SciLexer.dll、SciLexer.h 和 Scintilla.h。

然后基于框架构建你的演示项目：

```
 #include "Scintilla.h"
   #include "SciLexer.h" 
   static HWND global_editor_win = NULL;

      int WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow)
       {            
           HMODULE hmod = ::LoadLibrary(_T("SciLexer.dll"));       
           //other winmain code.
       }

      LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
       {
        RECT rc;       
        switch (message)   {
           case WM_CREATE:
                GetClientRect(hWnd, &rc);
                global_editor_win = ::CreateWindow(_T("Scintilla"), "Source",
                              WS_CHILD | WS_VSCROLL | WS_HSCROLL | WS_CLIPCHILDREN,
                              rc.left, rc.top, rc.right - rc.left, rc.bottom - rc.top,
                              hWnd, (HMENU)1001, hInst, 0); 

               ::SendMessage(global_editor_win , SCI_SETTEXT, 0, (LPARAM)"hello, world");   
                ShowWindow(global_editor_win , SW_SHOW);
               break;   
          }
       } 
```

享受！

# python - 使用 wxpython/python/matplot lib 绘制动态图

> ID：10371967
> 
> 赞同：0
> 
> 时间：2012-04-29T12:00:43.540
> 
> 标签：python, numpy, wxpython, matplotlib

我有一个用 Python 编写的程序。对于 Gui，我使用了 wxpython，（boa-constructor IDE）...我的程序在循环中运行，它在每个循环结束时返回一个值...我必须捕获该值由该循环返回并绘制图表。为了使我的解释简单...考虑 X 轴是固定的...1 到 1000 个值 Y 轴 - 程序返回的值...返回的每个值都必须绘制在图上然后它本身（动态）以及正在运行的程序...我不希望在我的程序结束时显示图表...

如果您提供代码本身，将会有很大帮助。

感谢你...：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T12:24:55.320

这似乎正是[Eli Bendersky 在本页的第二个演示中](http://eli.thegreenplace.net/2008/08/01/matplotlib-with-wxpython-guis/)提到的示例。

# objective-c - 使用 [[NSRunLoop currentRunLoop] runUntilDate:[NSDate date]] 让预定的选择器触发

> ID：10371971
> 
> 赞同：1
> 
> 时间：2012-04-29T12:01:04.213
> 
> 标签：objective-c, macos, cocoa, nsrunloop, performselector

在我的应用程序中，有时我会使用`performSelector`.

在某些情况下，在处理 UI 操作时，我需要等待所有当前计划的选择器触发。

我可以将我的代码放在另一种方法中，并安排它使用足够高`performSelector:target:argument:order:modes:`的`order`值以确保它会最后触发，但我认为这会是一个丑陋的解决方案是有原因的。

所以我发送`[[NSRunLoop currentRunLoop] runUntilDate:[NSDate date]]`，它似乎就像我需要的那样工作。

不过，我不确定这是否是让运行循环滚动一次迭代的合法方式。此外，这种方法是否有任何潜在的麻烦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:45:20.803

好的，回答我自己的问题。

首先，它是[重复](https://stackoverflow.com/questions/723608/nsrunloops-and-forcing-event-processing)的（也是[this](https://stackoverflow.com/questions/4923621/is-calling-nsrunloop-rununtildate-a-good-idea)）。

接下来，一般来说，`[[NSRunLoop currentRunLoop] runUntilDate:[NSDate date]]`从同一个运行循环中发送是一个坏主意：

1.  理论上，自动释放池会以这种方式耗尽。在实践中，我无法通过使用预先分配的对象`runUntilDate`（在 ARC 下）使我的应用程序崩溃，但最好还是不要冒险。

2.  如果在此期间另一个动作出队，`runUntilDate`可能会导致一些意想不到的副作用。

TL;DR 我应该帮自己一个忙，用更具确定性的代码替换那段代码。

# hibernate - 为 Hibernate 构建可重用的修改/创建列

> ID：10371972
> 
> 赞同：2
> 
> 时间：2012-04-29T12:01:22.047
> 
> 标签：hibernate, spring-roo

是否可以在 Hibernate 中重用定义的列？

我有大约 20 个表，每个表都需要至少修改和创建以及所有这些列都相同的其他一些字段。

我试过这样做：

```
public class ModifiedCreated {

    @Temporal(TemporalType.TIMESTAMP)
    @DateTimeFormat(style = "M-")
    private Date created;

    @Version
    @Temporal(TemporalType.TIMESTAMP)
    @DateTimeFormat(style = "M-")
    private Date modified;

    public ModifiedCreated() {
        created = new Date();
        modified = new Date();
    }

    @PrePersist
    protected void onPersist() {
        if (created == null) {
            created = new Date();
        }
        if (modified == null) {
            modified = new Date();
        }
    }

    @PreUpdate
    protected void onUpdate() {
        modified = new Date();
    }

    public Date getModified() {
        return modified;
    }

    public Date getCreated() {
        return created;
    }
} 
```

和 Route.java

```
@RooJavaBean
@RooToString
@RooEntity
public class Route extends ModifiedCreated {

    private String name;

    @ManyToMany(cascade = CascadeType.ALL)
    private Set<Note> notes = new HashSet<Note>();
} 
```

是否可以在 Hibernate 中重用列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T13:48:55.763

用注释注释你的`ModifiedCreated`类`@MappedSuperclass`（这是休眠的注释。但是我不知道 spring-roo 对此做了什么）

# jquery - LowSrc 属性 + 事件？

> ID：10371977
> 
> 赞同：6
> 
> 时间：2012-04-29T12:01:55.597
> 
> 标签：jquery, html, css, image

```
< IMG SRC="pete.jpg" LOWSRC="pete2.jpg" WIDTH=364 HEIGHT=500> 
```

*（低质量版本 pete2.jpg 为 7,401 字节。高质量版本 pete.jpg 为 48,952 字节。）*

我想先展示`lowsrc`.

然后在它完成加载后，开始在后台加载真正的 src。

我想同时显示一个进度条。但为了隐藏/显示进度条 - 我需要**2 个**事件。

```
when LOWSRC  load event -> show progress bar
when SRC   load event -> hide progress bar 
```

我如何为 &&捕获`LOAD`事件`lowsrc``src`

## 编辑

我测试[了这个网址](http://www.flickr.com/photos/dougneiner/6871497481/in/photostream/lightbox/)

并快进了图片 - 通过提琴手，我看到有 2 张图片。一大一小。

但这让我搜索并找到了`lowsrc`attr。

这也可以在这里提供帮助....

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T12:20:54.660

根据网络上的各种消息来源，`lowsrc`现代浏览器不再支持。至少在 Chrome 18 / Windows 7 上，它似乎被完全忽略了。

它从来都不是 HTML4 的一部分，[也不是 HTML5](http://www.ssdtutorials.com/tutorials/title/html5-obsolete-features.html)的一部分，尽管据说 Gecko 浏览器仍然[支持](https://developer.mozilla.org/en/DOM/HTMLImageElement)它（我没有对此进行测试）。

最好的办法是使用两张图片，就像 Flickr 一样。

# php - 如何在php中重定向到另一个页面

> ID：10371985
> 
> 赞同：-2
> 
> 时间：2012-04-29T12:03:30.530
> 
> 标签：php, mysql

伙计们，我对 php 很陌生，我正在尝试制作一个登录页面。

如果声明为真，我如何重定向页面？

我试过 iwth header("location: nextpage.php"); 但它不起作用

```
<html>
    <head>
        <title>Uploader</title>
    </head>
    <body>

        <form action="index.php" method="POST" enctype="application/x-www-form-urlencoded"> 
        <input id="login" class="username" type="text" name="username" autofocus placeholder="Username" maxlength="30"/>
        <input id="login" class="password" type="password" name="password" placeholder="Password" maxlength="15"/>
        <input id="login" class="submit" type="submit" value="Login" />
        <p>Last update <span id="lastupdate"><?php echo date('d-m-Y');?></span></p>

        <?php
        mysql_connect("localhost", "root","******") or die(mysql_error());
        mysql_select_db("login") or die(mysql_error());

        if(isset($_POST['username']) && isset($_POST['password'])){
            $db_user = mysql_query("SELECT username FROM login_tb");
            $db_pass = mysql_query("SELECT password FROM login_tb");
            $ctrl_user = mysql_result($db_user,0);
            $ctrl_pass = mysql_result($db_pass,0);

            $username = $_POST['username'];
            $password = $_POST['password'];
            echo $username . $password;

            if(($username || $password) == NULL){
                echo "you have entered wrong username or password! <br/> please contact site admin.";
            }else{
                if($username == $ctrl_user && $password == $ctrl_pass){
                header("location: ./nextpage.php");
                }
            }
        }
        ?>
    </body>
</html> 
```

请问有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:11:01.000

标头就是这样，在数据传输开始时出现的东西。在尝试发送标头之前，您正在发送数据（大部分网页）。

将您的 php 代码移动到文件的顶部，然后在正确位置的另一个 php 块中回显“错误的用户/密码”

```
<?php
    mysql_connect("localhost", "root","******") or die(mysql_error());
    mysql_select_db("login") or die(mysql_error());

    if(isset($_POST['username']) && isset($_POST['password'])){
        $db_user = mysql_query("SELECT username FROM login_tb");
        $db_pass = mysql_query("SELECT password FROM login_tb");
        $ctrl_user = mysql_result($db_user,0);
        $ctrl_pass = mysql_result($db_pass,0);

        $username = $_POST['username'];
        $password = $_POST['password'];

        if(($username || $password) != NULL && $username == $ctrl_user && $password == $ctrl_pass){
            header("location: ./nextpage.php");
        }
    }
?>
<html>
    <head>
        <title>Uploader</title>
    </head>
    <body>

        <form action="index.php" method="POST" enctype="application/x-www-form-urlencoded"> 
        <input id="login" class="username" type="text" name="username" autofocus placeholder="Username" maxlength="30"/>
        <input id="login" class="password" type="password" name="password" placeholder="Password" maxlength="15"/>
        <input id="login" class="submit" type="submit" value="Login" />
        <p>Last update <span id="lastupdate"><?php echo date('d-m-Y');?></span></p>
        <?php
            echo $username . $password;
            if(($username || $password) == NULL){
                echo "you have entered wrong username or password! <br/> please contact site admin.";
            }
        ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T13:49:04.667

有多种重定向页面的方法，我喜欢这样做：

```
<?php
header('Location: /blah.php');
die('<meta http-equiv="refresh" content="0; url=http:/blah.php" />\n
<p>Please visit <a href="/blah.php">Blah.php</a>.</p>');
?> 
```

这样，如果标头失败，您就有一个后备方案。

另外请允许我指出，您应该清理您的数据输入以防止 SQL 注入/XSS。这里：

```
$user = htmlspecialchars(mysql_real_escape_string($_POST['user'])); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T12:11:28.300

似乎输出缓冲问题，您可以使用`ob_start()`和`ob_end_fluh()`

和以下;

```
<? ob_start(); ?>
<html>
    <head>
        <title>Uploader</title>
    </head>
    <body>

        <form action="index.php" method="POST" enctype="application/x-www-form-urlencoded"> 
        <input id="login" class="username" type="text" name="username" autofocus placeholder="Username" maxlength="30"/>
        <input id="login" class="password" type="password" name="password" placeholder="Password" maxlength="15"/>
        <input id="login" class="submit" type="submit" value="Login" />
        <p>Last update <span id="lastupdate"><?php echo date('d-m-Y');?></span></p>

        <?php
        mysql_connect("localhost", "root","******") or die(mysql_error());
        mysql_select_db("login") or die(mysql_error());

        if(isset($_POST['username']) && isset($_POST['password'])){
            $db_user = mysql_query("SELECT username FROM login_tb");
            $db_pass = mysql_query("SELECT password FROM login_tb");
            $ctrl_user = mysql_result($db_user,0);
            $ctrl_pass = mysql_result($db_pass,0);

            $username = $_POST['username'];
            $password = $_POST['password'];
            echo $username . $password;

            if(($username || $password) == NULL){
                echo "you have entered wrong username or password! <br/> please contact site admin.";
            }else{
                if($username == $ctrl_user && $password == $ctrl_pass){
                header("Location: ./nextpage.php");
                }
            }
        }
        ?>
    </body>
</html>
<? ob_end_flush(); ?> 
```

# ios - NetworkStatus0 = TypeError：“未定义”不是函数

> ID：10371986
> 
> 赞同：0
> 
> 时间：2012-04-29T12:04:18.470
> 
> 标签：ios, xcode, cordova

我在带有 Xcode 4.3.1 的 Mac Lion 上使用 cordova-1.6.1。我收到以下错误

CordovaApp[322:13403] [INFO] 成功回调错误：NetworkStatus0 = TypeError: 'undefined' is not a function

执行以下行时。

navigator.network.isReachable("phonegap.com", reachableCallback, {});

一个函数定义如下

```
function reachableCallback(reachability) {
  var networkState = reachability.code;
  alert('Connection type: ' + networkState + ' - ' + reachability.message);
} 
```

我很长一段时间都无法弄清楚这一点。请帮忙

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T15:29:15.523

isReachable 方法已从 PhoneGap 中弃用。您最好查看新的网络功能，例如在线和离线活动。以及查看：

```
navigator.network.connection.type 
```

将告诉您您当前拥有的网络连接类型，如果没有连接，将告诉您无。

# javascript - 如何使用 Javascript 将照片上传到 Facebook？

> ID：10371990
> 
> 赞同：0
> 
> 时间：2012-04-29T12:04:43.630
> 
> 标签：javascript, facebook-graph-api

我是 facebook 集成的新手，我正在尝试使用 javascript 将照片从我的应用程序上传到 facebook，从 2 周开始，但到目前为止我还没有找到任何解决方案。我阅读了 facebook 开发者网站，但没有用。我没有找到任何解决方案与 javascript SDK 相关的正确答案。如果有人可以在 javascript 中转换此 PHP 代码或给我适当的指导将照片上传到 facebook???????????

PHP 代码在这里找到

```
https://developers.facebook.com/blog/post/498/ 
```

我在下面的网站上找到了这样做，我需要在 javascript 中这样吗？

```
 http://www.scrappur.com/ 
```

我注册到开发者网站并获得了APPID，SecretKey。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T09:37:52.253

万岁........我找到了解决方案，

```
 <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <title>My Feed Dialog Page</title>
    <g:javascript src="jquery1.7.1.js" />
  </head>
  <body>
  <div id='fb-root'></div>
    <script src='http://connect.facebook.net/en_US/all.js'></script>
    <p id='msg'></p>
<script type="text/javascript">
$().ready(
            FB.init({appId: "you appId", status: true, cookie: true})
           );

    FB.login(function(response) {
       if (response.authResponse) {
         var access_token =   FB.getAuthResponse()['accessToken'];
         console.log('Access Token = '+ access_token);
         FB.api('me/photos', 'post', {
             message: 'has shared Picture http://www.scrappur.com/',
             status: 'success',
             access_token: access_token,
             url: 'http://www.maargasystems.com/images/gallery/thumbs/1.jpg' 
         }, function (response) {

             if (!response || response.error) {
                 alert('Error occured:' + response);
             } else {
                 alert('Post ID: ' + response.id);
             }

         });
       } else {
         console.log('User cancelled login or did not fully authorize.');
       }
     }, {scope: 'user_photos,photo_upload,publish_stream,offline_access'});

</script>

</body>
</html> 
```

# spring - Spring 管理的 JSF bean

> ID：10371998
> 
> 赞同：1
> 
> 时间：2012-04-29T12:06:27.117
> 
> 标签：spring, jsf, managed-bean

我正在使用 Spring 管理的 JSF bean，现在我必须使用注释标签 Ex.@scope of spring 或 JSF 吗？

我注意到 @ViewScoped 是 JSF 注释不起作用并且仍然表现为请求范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T12:18:10.420

如果您使用`org.springframework.web.jsf.el.SpringBeanFacesELResolver`的是 Spring + JSF 集成，那么您需要使用`org.springframework.context.annotation.Scope`注释标记范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T12:15:01.920

Spring 中没有 View 作用域，但我们可以自定义实现这样的作用域。参考[this](http://www.jroller.com/RickHigh/entry/adding_a_jsf_view_scope)或[this](http://comdynamics.net/blog/109/spring3-jsf2-view-scope/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T01:09:16.393

阅读本文：本文信息：[http ://www.beyondjava.net/blog/integrate-jsf-2-spring-3-nicely/](http://www.beyondjava.net/blog/integrate-jsf-2-spring-3-nicely/)

我这样做了：

像这样为 JSF 支持 bean 定义一个抽象超类：

```
public abstract class AutowireableManagedBean {

    protected Logger logger = LoggerFactory.getLogger(getClass());

    protected AutowireCapableBeanFactory ctx;

    @PostConstruct
    protected void init() {
        logger.debug("init");
        ctx = WebApplicationContextUtils
                .getWebApplicationContext(
                        (ServletContext) FacesContext.getCurrentInstance()
                                .getExternalContext().getContext())
                .getAutowireCapableBeanFactory();
        // The following line does the magic
        ctx.autowireBean(this);
    }
   ...
} 
```

然后，让您的支持 bean 扩展该超类，您将能够自动装配 Spring bean 并使用 JSF 特定的视图范围：

```
@ManagedBean
@ViewScoped
public class MyBackingBean extends AutowireableManagedBean {

    @Autowired
    private MyDao myDao; 
```