# StackOverflow 问答 11117000-11117999

# javascript - 取消绑定视图添加到 app.vent 的所有事件

> ID：11117000
> 
> 赞同：4
> 
> 时间：2012-06-20T09:54:19.637
> 
> 标签：javascript, backbone.js, marionette

我添加到全局事件总线的事件会通过调用删除`view.unbindAll()`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T12:01:35.470

如果您将它们与`bindTo`Marionette 视图类型上的方法绑定，是的：

```
 SomeView = Backbone.Marionette.ItemView.extend({

  initialize: function(){
    // note the use of the 4th parameter. this is important when binding
    // to the App's event aggregator
    this.bindTo(MyApp.vent, "some:event", this.someCallback, this);
  },

  someCallback: function(){
    // ...
  }
}); 
```

现在，关闭 SomeView 的实例将取消绑定事件聚合器事件。

# xml - 对 XML 文件执行任何操作时如何保存一份副本？

> ID：11117001
> 
> 赞同：0
> 
> 时间：2012-06-20T09:54:20.727
> 
> 标签：xml, vb6, xml-parsing

我正在创建一个 VB6 应用程序，它从 XML 文件中读取信息，然后将特定文件复制到我的本地工作站。XML 如下所示；

```
<ArrayOfMediaFile xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <MediaFile>
    <fileName>Default.jpg</fileName> 
    <filePath>C:\Program Files\media</filePath> 
    <dateModified>2012-04-30T14:41:28.6893988-05:00</dateModified> 
    <Action>Add</Action> 
  </MediaFile>
  <MediaFile>
    <fileName>icon.jpg</fileName> 
    <filePath>C:\Program Files\media</filePath> 
    <dateModified>2012-04-30T15:43:31.2995396-05:00</dateModified> 
    <Action>Add</Action> 
  </MediaFile>
</ArrayOfMediaFile> 
```

现在我的应用程序读取文件名，如果操作节点是**“添加”**，它会复制文件并将操作节点转换为**“保留”**。

***问题***

我现在想做的是在每次操作后保存这个文件。如果在保存 XML 时出现任何错误，我应该能够制作 XML 的副本，以便在操作中再次使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:09:07.520

此代码始终将 XML 文件 .xml 备份到 .backup，然后如果成功，它会保存到 _Processed.xml。希望这就是你想要的。

```
Private Function ProcessFilesFromXml(ByRef the_sXmlFileName As String) As Boolean

    Dim nPosDot                         As Long
    Dim sXmlFileNamePrefix              As String
    Dim sXmlFileNameSuffix              As String
    Dim oXmlDoc                         As MSXML2.DOMDocument
    Dim oXmlMediaFileNode               As MSXML2.IXMLDOMElement
    Dim oXmlActionNode                  As MSXML2.IXMLDOMElement

    On Error GoTo ErrorHandler

    nPosDot = InStr(1, the_sXmlFileName, ".")

    If (nPosDot) Then
        sXmlFileNamePrefix = Left$(the_sXmlFileName, nPosDot - 1)
        sXmlFileNameSuffix = Mid$(the_sXmlFileName, nPosDot)
    Else
        sXmlFileNamePrefix = the_sXmlFileName
        sXmlFileNameSuffix = vbNullString
    End If

    ' First of all, back up the XML file <XmlFileList>.xml to <XmlFileList>.backup  . Overwrites existing backup file.
    FileCopy the_sXmlFileName, sXmlFileNamePrefix & ".backup"

    On Error GoTo ErrorHandler_ProcessingXml

    ' Load the Xml file <XmlFileList>.xml
    Set oXmlDoc = New MSXML2.DOMDocument
    oXmlDoc.Load the_sXmlFileName

    ' Iterate through each media file, and try to copy it.
    For Each oXmlMediaFileNode In oXmlDoc.selectNodes("/ArrayOfMediaFile/MediaFile")
        If Not CopyFileNameToLocalMachine(oXmlMediaFileNode.selectSingleNode("fileName").Text, oXmlMediaFileNode.selectSingleNode("filePath").Text) Then
            Set oXmlActionNode = oXmlMediaFileNode.selectSingleNode("Action")
            oXmlActionNode.Text = "keep"
        End If
    Next oXmlMediaFileNode

    ' Save under the name <XmlFileList>_Processed.xml
    oXmlDoc.save sXmlFileNamePrefix & "_Processed" & sXmlFileNameSuffix

    ' Since we got here, things must have been fine.
    ProcessFilesFromXml = True

Return_ProcessingXml:
    '
Exit Function

ErrorHandler_ProcessingXml:
    ProcessFilesFromXml = False
    Resume Return_ProcessingXml

ErrorHandler:
    Err.Raise Err.Number, Err.Source, Err.Description
End Function

Private Function CopyFileNameToLocalMachine(ByRef the_sFileName As String, ByRef the_sLocalPath As String)
    ' Your code here.
End Function 
```

# c# - 申请程序不会关闭

> ID：11117002
> 
> 赞同：13
> 
> 时间：2012-06-20T09:54:21.233
> 
> 标签：c#, wpf, process, exe

我有一个 WPF 应用程序，关闭应用程序后，它的进程`app.exe *32`仍在任务管理器的进程列表中运行。

我需要关闭它，因为当我对我的代码进行编辑时，我收到以下错误 -

```
Unable to copy file "obj\x86\Release\frontEndTest.exe" to "bin\Release\app.exe". The process cannot access the file 'bin\Release\app.exe' because it is being used by another process. 
```

我知道在此之前已经提出过此类问题[。](https://stackoverflow.com/questions/2895898/visual-studio-build-fails-unable-to-copy-exe-file-from-obj-debug-to-bin-debug)

`Assembly.cs`但是，通过将我的更改为 -该解决方案对我不起作用

```
[assembly: AssemblyVersion("2.0.0")]
[assembly: AssemblyFileVersion("2.0.0")] 
```

我想也许如果我要找到`Window closed`事件并放置类似的东西 -`Process.GetCurrentProcess().Kill();`在事件中，当用户从`'x'`表单右上角的红色按钮关闭应用程序时，这可能会终止进程？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-20T11:40:24.747

因此，您的进程在关闭后仍然存在。这通常意味着你有一个线程让它保持活力。这是您可以追踪它的方法。

首先，在调试器中附加它：

                                ![在此处输入图像描述](../Images/55194c2bb15256b32c9c4d5eb36852fa.png)

![在此处输入图像描述](../Images/d6c61fb3c69220e7fed5ee275d25a6b2.png)

                                        ![在此处输入图像描述](../Images/18cebdfff256c24911f88120cf146fa2.png)

现在打开线程列表：

        ![在此处输入图像描述](../Images/e7454a55d1bf770ed92081eff56326cf.png)

双击您在此处看到的**每个线程：**

![在此处输入图像描述](../Images/9b4492bd270f7a7356988ddc6e29067f.png)

你会被带到线程当前正在做什么：

                                ![在此处输入图像描述](../Images/3fab2ac32fa3af25421cf00d3fc25490.png)

这就是阻止应用程序关闭的原因。必须退出该循环才能使应用程序退出（或者，设置`Thread.IsBackground`为`true`）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-20T09:59:01.713

Environment.Exit(0);

```
Terminates this process and gives the underlying operating system the specified exit code. 
```

成功完成后返回 0。

# php - Zend 框架与 JavaScript 库

> ID：11117003
> 
> 赞同：3
> 
> 时间：2012-06-20T09:54:34.017
> 
> 标签：php, javascript, zend-framework, zend-form, zend-view

我已经使用 Zend Framework 工作了几个月了。到目前为止，我已经成功地使用了一些视图助手、动作助手和局部函数。现在我遇到了一些我想在我的项目中使用的 javascript 库，例如 TinyMCE 等。

我的问题是，在 Zend 项目中实现这些的最佳方式是什么？最好我希望能够在视图级别添加或启用这些 javascript 库。因此，例如，当我转到包含 zend_form 的 addSomething.phtml 时，我的文本区域之一变成了 TinyMCE 编辑器字段。但是，我不希望在我的所有表单甚至所有文本区域元素上都使用它。

那么在 ZF 1.11.11 下实现和处理这些库的最佳方法是什么？

提前感谢您提供的任何建议:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:17:13.197

您可以使用视图助手在每个控制器/视图的基础上加载 javascript 和 css 文件。这是我已经尝试过的东西，我发现它很有帮助，虽然我还没有把它放到一个实际的项目中，但我仍在评估它。

[这是我从中得到想法的 devzone 文章](http://devzone.zend.com/1651/managing-css-and-javascript-files-within-a-zend-framework-app/)。所有功劳归于 Andy Baird 发布该技术。

基本上你设置了两个视图助手，一个用于 javascript：-

```
class Zend_View_Helper_JavascriptHelper extends Zend_View_Helper_Abstract
{   
    function javascriptHelper() {
        $request = Zend_Controller_Front::getInstance()->getRequest();
        $file_uri = 'media/js/' . $request->getControllerName() . '/' . $request->getActionName() . '.js';

        if (file_exists($file_uri)) {
            $this->view->headScript()->appendFile('/' . $file_uri);
        }
    }
} 
```

一个用于css：-

```
class Zend_View_Helper_CssHelper extends Zend_View_Helper_Abstract 
{ 
    function cssHelper() { 
        $request = Zend_Controller_Front::getInstance()->getRequest(); 
        $file_uri = 'media/css/' . $request->getControllerName() . '/' . $request->getActionName() . '.css'; 

        if (file_exists($file_uri)) { 
            $this->view->headLink()->appendStylesheet('/' . $file_uri); 
        } 

        return $this->view->headLink(); 

    } 
} 
```

然后你从你的布局脚本中调用它们： -

```
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
    <title>My app title</title> 
    <? $this->headLink()->appendStylesheet('/media/css/global.css') ?> 
    <? $this->headLink()->appendStylesheet('/media/css/iefix.css','screen','lt IE 7') ?>     
    <?= $this->cssHelper() ?>    
    <? $this->headScript()->appendFile('/media/js/jquery-1.3.2.min.js') ?> 
    <? $this->headScript()->appendFile('/media/js/global.js') ?> 

    <? $this->javascriptHelper() ?> 
    <?= $this->headScript() ?> 
</head> 
```

然后，您将 javascript 和 css 文件存储在反映它们所使用的操作名称的文件夹中，例如：-

> 媒体
> /js/index/index.js 媒体/css/index/index.css

为您的索引操作加载 css 和 javascript。

在实践中，我发现最好将 javascript 和 css 放在同一个文件夹中，所以我错过了上面路径的`js`&`css`部分，并相应地调整了`$file_url`两个助手中的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:30:36.740

要在视图级别添加 JS 文件，我通常使用[inlineScript()](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.inlinescript)视图助手。

因此，要将 TinyMCE 添加到给定视图中表单的给定字段，您可以编写如下内容：

```
$this->inlineScript()->appendFile(
    $this->baseUrl('js/yourTinyMCEScript.js'),
    'text/javascript', array('charset' => 'UTF-8')
); 
```

然后，在视图的末尾（或在布局中），

```
echo $this->inlineScript(); 
```

像这样，您将只能为某些表单的某些字段激活 TinyMCE。

希望有帮助，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T17:58:33.233

我认为最好的方法是扩展 zend_form_textarea 然后创建装饰器和视图助手。

你也可以只写装饰器和视图助手，但对我来说，第一个选择更干净，因为你每次创建表单元素时都避免注入装饰器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:15:17.693

我更喜欢[ckeditor](http://ckeditor.com/)

这是我的解决方案：

下载ckeditor库并将文件复制到**/public/scripts/ckeditor/**

### *应用程序.ini*

```
; load jquery from google cdn with jquery ui
resources.jquery.version    = 1.7
resources.jquery.ui_enable  = true
resources.jquery.ui_version = 1.8
resources.jquery.stylesheets[] = "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-lightness/jquery-ui.css" 
```

### *表单.php*

```
/** @var $jq ZendX_JQuery_View_Helper_JQuery_Container */
$jq = $this->getView()->jQuery();

// Add Library CKEditor
$jq->addJavascriptFile('/scripts/ckeditor/ckeditor.js');
$jq->addJavascriptFile('/scripts/ckeditor/adapters/jquery.js');
$jq->addOnload("$('#text').ckeditor();");

//textarea
$this->addElement('textarea', 'text', array('label' => 'Testo', 'required' => true)); 
```

在文件 /public/scripts/ckeditor/config.js 中，您可以在所见即所得中设置您喜欢的工具。

**如果您必须使用 tinymce [，请阅读此处](http://juriansluiman.nl/en/article/100/improved-tinymce-solution-for-the-zend-framework)**

# java - 无法从 Ubuntu 上的 Java 程序连接到本地主机上的 MySQL

> ID：11117009
> 
> 赞同：1
> 
> 时间：2012-06-20T09:54:59.207
> 
> 标签：java, mysql, jdbc

以下是代码。

```
import java.sql.*;

public class ActivityReader {
    public static void main(String[] args) {
                      System.out.println("MySQL Connect Example.");
              Connection conn = null;
              String url = "jdbc:mysql://localhost:3306/";
              String dbName = "jdbctutorial";
              String driver = "com.mysql.jdbc.Driver";
              String userName = "root"; 
              String password = "password";
              try {
                  Class.forName("com.mysql.jdbc.Driver").newInstance();
                  conn = DriverManager.getConnection(url,userName,password);
                  System.out.println("Connected to the database");
                  conn.close();
                  System.out.println("Disconnected from database");
              } catch (Exception e) {
                      e.printStackTrace();
              }
    }

} 
```

我已经从[这个 url](http://www.mysql.com/downloads/connector/j/)在项目中添加了 mysql-connector-java-5.1.20-bin.jar 。Mysql 服务已经在运行。

```
mysql start/running, process 25326 
```

MySQL 连接示例。

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:348)
    at c

om.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2391)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2428)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2213)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:797)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:389)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at ActivityReader.main(ActivityReader.java:45)
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:218)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:257)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:298)
    ... 15 more 
```

任何的想法.... ？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:08:35.400

使用`127.0.0.1`instead连接`localhost`，也许是您系统上发生的事情的线索：

> 如果您告诉它连接到“localhost”，MySQL 将尝试连接到 unix 套接字。如果您告诉它连接到 127.0.0.1，您将强制它连接到网络套接字。因此，您可能已将 MySQL 配置为仅侦听网络套接字而不是文件系统套接字。

[https://serverfault.com/questions/295285/mysql-cannot-connect-via-localhost-only-127-0-0-1](https://serverfault.com/questions/295285/mysql-cannot-connect-via-localhost-only-127-0-0-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:50:02.473

尝试

```
>telnet localhost 3306 
```

您应该看到一些类似于以下的服务器响应

“5.5.19☺(:*b2p`p!☻Ç§4Oph7xxsV5C5mysql_native_password”

最有可能的问题将通过用 ip 替换主机名来解决，检查[https://serverfault.com/a/90055](https://serverfault.com/a/90055)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T12:28:39.583

我认为你没有在你的连接 URL 中指定你的数据库名称
试试这个
*conn = DriverManager.getConnection(url +"/"+ dbName ,userName,password);*
并确保您已创建具有相同名称的数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-08T10:31:03.483

我在 VPS linux 服务器上遇到了同样的问题。我通过用真实 IP 地址替换 localhost 或 127.0.0.1 来解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-23T12:43:15.240

如果您尝试在 Linux 机器或 Windows Server 上运行您的代码。

您可以将服务器从`'localhost' to specific IP 'xx.xx.xx.xx'`

它应该可以正常工作。

# emacs - emacs lisp 脚本优化帮助请求

> ID：11117016
> 
> 赞同：1
> 
> 时间：2012-06-20T09:55:11.430
> 
> 标签：emacs, scripting, elisp

我正在学习 emacs lisp，我正在尝试使用它编写脚本。我写了一个脚本，它工作得很好，但我只是认为我在 bash 中做的很多事情我可以在 emacs lisp 中做。

大不了：**我不确定我的启动过程是否正确**

请建议/向我展示在我的脚本上编写脚本的 lisp 方式（例如）：

```
#!/usr/bin/emacs --script
(message "Vision synchronization \n")
(let ((default-directory "/home/vision/"))
  (shell-command "git pull;")
  (princ (shell-command-to-string "git fetch upstream;git merge upstream/master;"))
  (princ (start-process "Vision push \n" "git" "git" "push")))

(message "Gentoo-haskell synchronization \n")
(let ((default-directory "/home/gentoo-haskell/"))
  (shell-command "git pull;")
  (princ (shell-command-to-string "git fetch upstream;git merge upstream/master;"))
  (princ (start-process "Gentoo-haskell push \n" "git" "git" "push")))

(message "Nengraphy synchronization \n")
(let ((default-directory "/home/nengraphy/"))
    (princ (start-process "Nengraphy pull \n" "git" "git" "pull")))

(message "Gentoo synchronization \n")
(let ((default-directory "/usr/portage/"))
  (message "Gentoo rsync (New files will be added, deprecated files will be deleted) : \n")
  (princ (shell-command-to-string "rsync --recursive --links --safe-links --perms --times --compress --force --whole-file --delete --timeout=180 --exclude=/.git --exclude=/metadata/cache/ --exclude=/distfiles --exclude=/local --exclude=/packages rsync://209.177.148.226/gentoo-portage/ /usr/portage/"))
  (message "We want to make extra-sure that we don't grab any metadata, since we don't keep metadata for the gentoo.org tree (space reasons)")
  (shell-command "[ -e metadata/cache ] && rm -rf metadata/cache")
  (shell-command "[ -e metadata/md5-cache ] && rm -rf metadata/md5-cache")
  (message "the rsync command wiped our critical .gitignore file, so recreate it.")
  (shell-command "echo \"distfiles/*\" > /usr/portage/.gitignore")
  (shell-command "echo \"packages/*\" >> /usr/portage/.gitignore")
  (message "profile formats fix")
  (shell-command "echo \"profile-formats = portage-1\" >> /usr/portage/metadata/layout.conf")
  (message "\"git add .\" will record all the changes to local files the git repo. So there must be no stray files.")
  (shell-command "if [ ! -d profiles/package.mask ]
  then
    mv profiles/package.mask profiles/package.mask.bak || exit 4
    install -d profiles/package.mask || exit 4
    mv profiles/package.mask.bak profiles/package.mask/gentoo || exit 4
  fi")
  (princ (shell-command-to-string "git add ."))
  (message "create a commit")
  (shell-command "git commit -a -m \"gentoo updates `date` update\"")
  (message "push these changes up.")
  (princ (shell-command-to-string "git push origin master")))

(message "Gentoo verification \n")
(princ (shell-command-to-string "emerge --sync;"))

(message "Layman synchronization \n")
(princ (shell-command-to-string "layman -S;")) 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:47:24.970

这实际上只是一个使用一些尴尬的 elisp 包装的 bash 脚本。以这种方式使用 elisp 没有任何优势。在您开始使用 elisp 实际计算某些东西之前，您可能应该坚持使用 bash。

您可以使用 emacs 编写打开文本文件和修改文本的脚本，就像使用 sed 或 awk 所做的一样。那会更有意义。在这一点上，对我来说，使用 elisp 执行此操作比查找 awk 语法要快。

您确实必须从某个地方开始，但是您正在做的事情对于 elisp 来说非常尴尬。最好通过利用语言的优势来学习，而不是强迫它做一些并非真正适合的事情。

此外， start-process 在脚本中没有意义。它在 emacs 中启动一个进程，以允许在脚本中不需要或不需要的持续通信。

# iphone - 当我点击时 uitableview 不加载

> ID：11117019
> 
> 赞同：0
> 
> 时间：2012-06-20T09:55:22.977
> 
> 标签：iphone, objective-c

我创建了一个表格视图，并在 uitableviewcell 中添加了两个 uitextview，它运行良好，但是当我加载时数据不显示完整数据，当我滚动表格视图时它加载，数据将显示在单元格中。所以任何人都可以告诉我。有什么问题，并告诉我如何为 textview 制作灵活的单元格长度

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

 static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier ];
     cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    if (cell == nil) {
       cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];
    NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate];
    txtView1 = [[UITextView alloc]initWithFrame:CGRectMake(0, 10, 320,100)];
    txtView1.text =entry.articleTitle;
    txtView1.editable = NO;
    txtView1.font = [UIFont systemFontOfSize:20];
    txtView1.textColor = [UIColor blackColor];
    txtView1.delegate = self;
    txtView1.textAlignment = UITextAlignmentLeft;
    txtView1.scrollEnabled = NO;
      int a= entry.articleSummary.length;

  if(a < 100)

   {

    txtView2 = [[UITextView alloc]initWithFrame:CGRectMake(0, 70, 320, 100)];
    }
    else if(a <200) 
    {
       txtView2 = [[UITextView alloc]initWithFrame:CGRectMake(0, 70, 320, 300)]; 

    }
else

{

    txtView2 = [[UITextView alloc]initWithFrame:CGRectMake(0, 70, 320, 400)]; 
}

    txtView2.text = entry.articleSummary;
    txtView2.editable = NO;
    txtView2.font = [UIFont systemFontOfSize:16];    
    txtView2.textColor = [UIColor blackColor];
    txtView2.delegate = self;
    txtView2.textAlignment = UITextAlignmentLeft;

    [cell.contentView addSubview:txtView1];
    [cell.contentView addSubview:txtView2];
return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:09:02.307

这段代码比较草率。首先，我可能会完全重新执行此操作。您最好创建一个自定义 UITableViewCell 子类，而不是像这样动态添加视图。

使用您当前的代码，您将遇到许多不同的问题，包括您似乎试图通过删除 IOS“重用”表格单元格的能力来修复（错误地）的一些问题。这将大大降低您的应用程序的速度，尤其是在有很多行的情况下。

因此，重构代码以便您使用自定义 UITableViewCell。这是第一步。

更改上面的代码，以便您现在使用重用标识符，但不要动态添加任何不必要的视图（它们都应该添加到自定义表格视图单元格类中）。

之后，您需要实现@SenithilKumar 建议的方法，这将调整单元格的大小以适合其中的所有文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:00:29.737

根据您`NSString` `sizeWithFont:constrainedToSize` 重新调整`UITableViewCell`高度的大小：

```
- (CGFloat)tableView:(UITableView *)tableView 
           heightForRowAtIndexPath:(NSIndexPath *)indexPath
        {
    CGSize textSize = {245.0, 20000.0f};
    CGSize size1 = [text1 sizeWithFont:[UIFont systemFontOfSize:11.0f] 
                     constrainedToSize:textSize 
                         lineBreakMode:UILineBreakModeWordWrap];
    CGFloat hight = MAX(size1.height, 28);

            return hight;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:34:20.953

经过一天的重新加载数据尝试后，我遇到了同样的问题，[智能加载](http://www.lwxted.com/blog/2012/smart-data-loading-table-views/)数据，解决方案 `self.window.rootViewController = navController;`在 didfinishLaunching 之后添加

```
UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:vc];
    [self.window addSubview:navController.view]; 
```

快乐编码.. :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:07:53.090

我认为你的方法不够好。您正在将 UITextView 添加到 UITableCell，它应该在 block:`if (cell == nil)`中。我更喜欢你使用自定义 UITableView。你会在[这里](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-add-uiimage-and-uilabel-in-the-uitableview/)找到一个教程，为了保持 UITableCell 的大小，你应该使用`heightForRowAtIndexPath`委托方法。

# django - Django，当我们有电子邮件而不是用户名时覆盖“is_authenticated()”

> ID：11117028
> 
> 赞同：2
> 
> 时间：2012-06-20T09:55:39.883
> 
> 标签：django, django-views, django-authentication, django-email

我使用该`django-email-as-username`应用程序使用电子邮件而不是用户名进行身份验证，它就像一个魅力。

现在，**鉴于**我想打电话

```
if request.user.is_authenticated() 
```

但是这种方法只是根据（用户名+密码）而不是（电子邮件+密码）对用户进行身份验证。我应该如何处理？

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:33:07.517

在 Django 中，总是`is_authenticated()`返回实例并且总是返回实例。它与用户名/密码/电子邮件无关，也不会改变这种行为。`True``User``False``AnonymousUser``django-email-as-username`

查看 Django 的[源代码](https://github.com/django/django/blob/master/django/contrib/auth/models.py#L279)：

```
# In User class line 279
def is_authenticated(self):
    """
    Always return True. This is a way to tell if the user has been
    authenticated in templates.
    """
    return True 
```

# asp.net-mvc - 设置关于条件 ASP.net MVC 的输出缓存属性

> ID：11117030
> 
> 赞同：1
> 
> 时间：2012-06-20T09:55:46.817
> 
> 标签：asp.net-mvc, asp.net-mvc-3, attributes, outputcache

我正在使用输出缓存属性来缓存我的页面，

```
[OutputCache(Duration = 50000)]
    public ActionResult GetRidOfZombies()
    {
       // Code 
    } 
```

现在的问题是我有两个运行同一个应用程序的域，当任何用户在其中看到我的站点时`abc.com`，`xyz.com` 我想这样做，`xyz.com`然后将此缓存属性修剪为`[OutputCache(Duration = 50)]`...。我应该怎么做。我在谷歌上搜索了很多，但没有找到任何解决方案。提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:15:42.623

您可以编写一个自定义属性：

```
public class MyDomainAwareOutputCacheAttribute : OutputCacheAttribute
{
    public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        // TODO: extract the domain from filterContext.HttpContext.Request.Url
        // and set the duration accordingly

        Duration = 50000;

        base.OnResultExecuting(filterContext);
    }
} 
```

进而：

```
[MyDomainAwareOutputCache]
public ActionResult GetRidOfZombies()
{
    // Code 
} 
```

# android - android蓝牙rfcomm连接太慢

> ID：11117035
> 
> 赞同：4
> 
> 时间：2012-06-20T09:55:56.933
> 
> 标签：android, module, bluetooth, insecure-connection

我正在使用以下代码从我的 HTC One X 到 SENA 蓝牙 ESD110 串行模块创建不安全的 rfcomm 连接：

```
BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(addr);
BluetoothSocket socket = null;

try{
socket = device.createInsecureRfcommSocketToServiceRecord(UUID.fromString(SERVICE_UUID));

 mBluetoothAdapter.cancelDiscovery();

socket.connect();
sendMessage(socket,"working!");
socket.close(); 
```

这里的重点是通过自动配对连接到模块，一切正常，但建立连接大约需要15秒。

调试仍然在：

```
socket.connect(); 
```

15 秒，然后才将字符串连接并传输到模块（需要 1 秒）。

在连接到 MAC 地址之前，手机是否可能正在处理一些其他数据（服务发现等），我将如何使其连接更快？还是HTC硬件问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:59:09.447

**编辑**如果您的问题是缓慢的服务发现，您可以尝试通过直接使用反射到 createRfcommSocket 方法来跳过整个服务发现来避免这种情况 - 我在我的 BT-SPP 相关项目中出于其他原因这样做 - 它看起来像这样：

```
BluetoothAdapter bta = BluetoothAdapter.getDefaultAdapter();
BluetoothDevice bd = bta.getRemoteDevice(mac);
Method m = bd.getClass().getMethod("createRfcommSocket",new Class[] { int.class });
bt_connection = (BluetoothSocket) m.invoke(bd, Integer.valueOf(1)); 
```

预评论：你必须一直扫描吗？如果您可以选择记住 Mac，则可以更快地连接。漫长的等待时间恕我直言来自发现 - 只有当这真的完成时才能连接（不是在 mBluetoothAdapter.cancelDiscovery(); 之后直接完成） - 这可能需要一些时间..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:10:55.177

第二次更快吗？第一次找到手机（在您的设备获得目标设备的计时之前）需要一段时间。

但是，即使它必须找到目标，也不应该花费 15 秒。

也许您遇到了这个错误： [http ://code.google.com/p/android/issues/detail?id=29039](http://code.google.com/p/android/issues/detail?id=29039)

请注意，有一种情况可以创建连接，但需要的时间比正常情况要长得多。

# ios - 为什么 [[UIScale mainScreen] scale] 1 在带有 Xcode 4.2 的 iPad 3 上？

> ID：11117041
> 
> 赞同：5
> 
> 时间：2012-06-20T09:56:13.673
> 
> 标签：ios, xcode, ipad, retina-display

在我的 iPad 3 上进行测试时，

```
[[UIScreen mainScreen] scale] == 1.0 
```

我的理解是这应该是2.0。

我在 Snow Leopard 上使用带有 Xcode 4.2 的 iOS 5.1 SDK，我知道这不是“官方支持”的配置。但是，我无法想象为什么这会影响纯粹在设备上发生的事情。（我可以想象它会破坏模拟器的各种方式。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T23:30:38.457

在 XCode 版本 4.3 之前，[UIScreen scale] 将为 iPad 3 返回 1.0。更新到 4.3 将启用返回正确的值 2.0。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-25T13:21:34.333

那是因为屏幕没有缩放。你可以得到这样的比率：

```
[[CCDirector sharedDirector] winSize].width/[[CCDirector sharedDirector] winSizeInPixels].width 
```

如果这等于 1，那么您使用的是非视网膜设备。否则，如果 2 ，在视网膜显示器上。另外，不要忘记启用视网膜支持。

问候，

乔治

# javascript - 如何在javascript中更改某些文本的背景颜色

> ID：11117042
> 
> 赞同：0
> 
> 时间：2012-06-20T09:56:15.157
> 
> 标签：javascript

我在 JavaScript 中遇到问题，我需要更改文本的背景颜色。我正在用 JavaScript 打印优惠券，效果很好我正在使用白皮书打印

例如：格式化输出收据的外观

```
***********************
Shopping  center

amount :3450

Foodworld one store
India
************************ 
```

现在我需要将文本 Foodworld 的背景颜色更改为红色，将文本颜色更改为黑色。如何在 JavaScript 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:05:03.103

只需将 Foodworld 一家商店放在一个 div 中，然后将任何像这样（div）的 id 赋予该 div 并调用此函数。

用这个 ：

```
<script type="text/javascript">
function change_color()
{
    document.getElementById("divid").style.color='black';
    document.getElementById("divid").style.backgroundColor='red';
}
</script> 
```

# c# - 在 C# 代码中从 GAC 卸载

> ID：11117043
> 
> 赞同：12
> 
> 时间：2012-06-20T09:56:18.360
> 
> 标签：c#, gac, uninstallation

如何从我的 C# 应用程序中卸载 GAC。

我无法从 GAC 卸载特定的 exe 和 DLL。

这是在 C# 中卸载 GAC 的正确方法吗？

```
public void RemoveAssembly(string ShortAssemblyName, string PublicToken)
{
    AssemblyCacheEnum AssembCache = new AssemblyCacheEnum(null);

    string FullAssembName = null;

    for (; ; )
    {
        string AssembNameLoc = AssembCache.GetNextAssembly();
        if (AssembNameLoc == null)
            break;

        string Pt;
        string ShortName = GetAssemblyShortName(AssembNameLoc, out Pt);

        if (ShortAssemblyName == ShortName)
        {

            if (PublicToken != null)
            {
                PublicToken = PublicToken.Trim().ToLower();
                if (Pt == null)
                {
                    FullAssembName = AssembNameLoc;
                    break;
                }

                Pt = Pt.ToLower().Trim();

                if (PublicToken == Pt)
                {
                    FullAssembName = AssembNameLoc;
                    break;
                }
            }
            else
            {
                FullAssembName = AssembNameLoc;
                break;
            }
        }
    }

    string Stoken = "null";
    if (PublicToken != null)
    {
        Stoken = PublicToken;
    }

    if (FullAssembName == null)
        throw new Exception("Assembly=" + ShortAssemblyName + ",PublicToken=" + 
        token + " not found in GAC");

    AssemblyCacheUninstallDisposition UninstDisp;

    AssemblyCache.UninstallAssembly(FullAssembName, null, out UninstDisp);
}

public static void UninstallAssembly(String assemblyName, InstallReference reference, out AssemblyCacheUninstallDisposition disp)
{
    AssemblyCacheUninstallDisposition dispResult = AssemblyCacheUninstallDisposition.Uninstalled;
    if (reference != null)
    {
        if (!InstallReferenceGuid.IsValidGuidScheme(reference.GuidScheme))
            throw new ArgumentException("Invalid reference guid.", "guid");
    }

    IAssemblyCache ac = null;

    int hr = Utils.CreateAssemblyCache(out ac, 0);
    if (hr >= 0)
    {
        hr = ac.UninstallAssembly(0, assemblyName, reference, out dispResult);
    }

    if (hr < 0)
    {
        Marshal.ThrowExceptionForHR(hr);
    }

    disp = dispResult;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T05:14:41.960

假设 DLL 与运行此代码的目录位于同一目录中，请尝试：

```
ArrayList libraries = new ArrayList();
libraries.Add("somedll1.dll");
libraries.Add("somedll2.dll");

Console.WriteLine("Registering DDLs in the Gac");

try
{
    for (int i = 0; i < libraries.Count; i++)
    {
        // get the path from the running exe, and remove the running exe's name from it
        new System.EnterpriseServices.Internal.Publish().GacRemove(System.Reflection.Assembly.GetExecutingAssembly().Location.Replace("ThisUtilitiesName.exe", "") + libraries[i]);
    }

    Console.WriteLine("Completed task successfully");
}
catch (Exception exp)
{
    Console.WriteLine(exp.Message);
} 
```

希望这可以帮助某人...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:41:16.190

请按照以下步骤操作：-

```
using System;
using System.Reflection;
private string assemblyFullPath = "";
public class myAssembly
{
static void Main()
{
Assembly assembly = Assembly.Load("library, version=1.0.0.0, culture=neutral, PublicKeyToken=9b184fc90fb9648d");
assemblyFullPath = assembly.Location;

} 
} 
```

也可以使用Assembly类的LoadFrom()方法加载程序集文件，但是不好用，可以看帖子了解原因。

一旦我们有了 assemblyFullPath，就很容易从 GAC 中卸载/删除程序集。System.EnterpriseServices.Internal 命名空间提供了安装或删除 GAC 文件的方法。请按照以下步骤安装/删除文件：

1.  在项目中添加对 System.EnterpriseServices.dll 的引用。
2.  使用 System.EnterpriseServices.Internal 添加；在使用部分的末尾。
3.  现在使用 assemblyFullPath，在您要删除程序集文件的方法中添加以下代码行。

    发布发布流程 = 新发布（）；publishProcess.GacRemove(assemblyFullPath);

希望它会帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T13:20:46.967

建议您不要这样做，因为它可能会导致使用该 dll 的其他应用程序出现问题。但我认为它是你自己的，所以它相对安全。

使用下一个代码从 GAC 中删除 dll。程序集名称是不带扩展名的 dll 名称。

```
public static void UninstallAssembly(string assemblyName) {
   ProcessStartInfo processStartInfo = new ProcessStartInfo("gacutil.exe", 
      string.Format("/u {0}.dll", assemblyName));

   processStartInfo.UseShellExecute = false;
   Process process = Process.Start(processStartInfo);
   process.WaitForExit;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T09:36:01.920

你为什么要这样做？GAC 是全局程序集缓存，基本上是包含您 PC 的共享 DLL 的系统文件夹。

如果您仍然想删除程序集，请检查 gacutil 文档：http: [//msdn.microsoft.com/en-us/library/ex0ss12c](http://msdn.microsoft.com/en-us/library/ex0ss12c(v=vs.71).aspx) (v=vs.71).aspx 但它将为您的所有项目删除！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T15:25:24.013

为什么不直接从应用程序中调用“gacutil /u”？还是我错过了什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-08T01:53:45.580

您可以查看 .NET 参考代码以了解有关如何以编程方式完成的详细信息（尽管参考站点的许可证会限制您在自己的软件中使用它，即复制粘贴此代码不是一个好主意）。

[http://referencesource.microsoft.com/#System.Web/xsp/system/Web/Configuration/GacUtil.cs](http://referencesource.microsoft.com/#System.Web/xsp/system/Web/Configuration/GacUtil.cs)

（向下滚动到 public bool GacUnInstall(string assemblyName)）

另请参阅 IAssemblyCache

[http://referencesource.microsoft.com/#System.Web/xsp/system/Web/Configuration/IAssemblyCache.cs](http://referencesource.microsoft.com/#System.Web/xsp/system/Web/Configuration/IAssemblyCache.cs)

和 GetAssemblyCache 的本机方法

[http://referencesource.microsoft.com/#System.Web/xsp/system/Web/NativeMethods.cs](http://referencesource.microsoft.com/#System.Web/xsp/system/Web/NativeMethods.cs)

另一方面，由于代码在汇编 System.Web 中并且该类被标记为内部，您可以使用反射来访问它。看

[如何使用反射访问内部类](https://stackoverflow.com/questions/1259222/how-to-access-internal-class-using-reflection)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T23:26:10.997

如何在 Visual C# 中将程序集安装到全局程序集缓存中：

这是来自 Microsoft 支持文章的解决方案：http: [//support.microsoft.com/kb/815808](http://support.microsoft.com/kb/815808)

另一个链接（从 GAC 注册、注销库）： [http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/7d3165cf-ca3b-43cc-8f77-a46dbf38f13d/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/7d3165cf-ca3b-43cc-8f77-a46dbf38f13d/)

# c# - 如何保护使用会话状态存储来自 Web 服务的数据的网站

> ID：11117044
> 
> 赞同：1
> 
> 时间：2012-06-20T09:56:20.273
> 
> 标签：c#, asp.net, linq, session, session-state

我正在使用 ASP.NET，使用 WebForm，使用 LINQ 从 xml 中读取数据，这些数据是来自 web 服务的响应。使用搜索功能将这些数据显示在网页上意味着用户将能够搜索集合。（当用户搜索任何关键字时，使用会话来存储和访问数据。）

我应该采取哪些因素来确保我的应用程序是安全的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:20:56.470

这是一篇关于[ASP.Net 中的会话安全](http://www.dotnetfunda.com/articles/article730-session-security-in-aspnet.aspx)性的文章。希望您觉得这个有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:31:14.767

我真的很想帮忙，但我仍然觉得这个问题有点含糊。听起来首先要做的是阅读常见漏洞，然后看看如何最好地保护您的网站。安全性始终是一种权衡，因此始终符合要求。如果数据是公开可用的（如博物馆数据），那么您可能根本不需要任何安全措施！另一方面，如果您正在处理 PCI 1 级信用卡数据，您可能必须在任何地方进行静态加密（例如）。

但是，您需要注意的漏洞利用的最佳参考是[OWASP](https://www.owasp.org/index.php/Category%3aOWASP_Top_Ten_Project)。它们很好地涵盖了 Web 漏洞，并且每年都会发布应用程序最常被利用的方式的“前十名”列表。

希望这可以帮助。

# php - 使用复选框切换具有两个类的特定 div

> ID：11117046
> 
> 赞同：-1
> 
> 时间：2012-06-20T09:56:27.603
> 
> 标签：php, javascript, jquery, css

好的，所以我的代码基本上具有这种结构：

首先打开一个主 div 并使用 foreach 创建复选框。为数组中的每个“模型”创建一个复选框

```
<div id='coltext'>
  <input class ="ModelName1">
  <input class ="ModelName2"> 
```

等等

在此之后，另一个 div 在某些条件下在 foreach 循环中打开：

```
 <div class="seqWrap">
    <div class="hit""ModelName1"></div>
    <div class="hit""ModelName2"></div>
  </div>

</div> 
```

我具有 hti 类的 div 将被着色。如果复选框被选中/未选中，我希望能够切换 div（class=hit）。因此，如果选中复选框“ModelName1”，则所有具有 class="ModelName1" 的 div 都将具有白色背景，或者被隐藏。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:17:40.853

我知道你接受你实现这个纯 CSS 的答案。像这样写：

```
.ModelName1:checked ~ .seqWrap .ModelName1,
.ModelName2:checked ~ .seqWrap .ModelName2
{background:none;} 
```

检查这个[http://jsfiddle.net/cpXPX/1/](http://jsfiddle.net/cpXPX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:01:53.283

```
$('input:checkbox').change(function(){
  if ($(this).is(':checked'))
    $('div.'+$(this).attr("class")).hide();
  else
    $('div.'+$(this).attr("class")).show();
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:07:13.353

我发现你的问题有点令人困惑，但也许你的意思是这样的：

```
$('input[type="checkbox"]').click(function() {
   $('div.' + $(this).attr('class')).toggleClass('hit'); 
}); 
```

演示：http: [//jsfiddle.net/cpXPX/](http://jsfiddle.net/cpXPX/)

请注意，您的 html 中有一个拼写错误，用于您的子 div - 您在`class`属性中间有两个双引号，您应该有一个空格，所以更改：

```
<div class="hit""ModelName1"></div> 
```

到

```
<div class="hit ModelName1"></div> 
```

（如我的[演示](http://jsfiddle.net/cpXPX/)所示。）

# php - php中带有重音字母的解析器sax

> ID：11117047
> 
> 赞同：1
> 
> 时间：2012-06-20T09:56:33.580
> 
> 标签：php, xml, parsing

我对重音字母有疑问。

例如：我有一个标签，其中包含：“il mio prodotto é molto bello”。但是，输出是：“il mio prodotto”

当在 xml 中，并且有一个重音字母时，日期被删除。我有一个xml：

```
<?xml version="1.0" encoding="utf-8"?> 
```

这是我的解析器代码：

```
<?php
class Content_Handler {
   function Content_Handler(){}
   function start_element($parser, $name, $attrs) {
       global $desc, $names, $link;
       if ($name == "PRODUCT"){
          $zupid = ($attrs["ZUPID"]);
          echo "$zupid<br>";
       }
       if ($name == "DESCRIPTION") { $desc = true;}
       if ($name == "NAME") { $names = true;}
       if ($name == "DEEPLINK") { $link = true;}
   }

   function end_element($parser, $name) {
       if ($name == "PRODUCT") {
          print "<br />";
       }
   }

   function characters($parser, $chars) {
       global $desc, $names, $link;
       if ($desc) { echo $chars."<br>"; $desc = false;} 
       if ($names) { echo $chars."<br>"; $names = false;} 
       if ($link) { echo $chars."<br>"; $link = false;} 
   }
}

$handler = new Content_Handler();
$cat_parser = xml_parser_create("UTF-8");

xml_parser_set_option($cat_parser, XML_OPTION_TARGET_ENCODING, "ISO-8859-1");
xml_set_object($cat_parser, $handler);
xml_set_element_handler($cat_parser, "start_element", "end_element");
xml_set_character_data_handler($cat_parser, "characters");

$file = "my.xml";

if ($file_stream = fopen($file, "r")) {

   while ($data = fread($file_stream, 4096)) {

       $this_chunk_parsed = xml_parse($cat_parser, $data, feof($file_stream));
       if (!$this_chunk_parsed) {
           $error_code = xml_get_error_code($cat_parser);
           $error_text = xml_error_string($error_code);
           $error_line = xml_get_current_line_number($cat_parser);

           $output_text = "Parsing problem at line $error_line: $error_text";
           die($output_text);
       }
   }
} else {

    die("Can't open XML file.");

}
xml_parser_free($cat_parser);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:05:33.057

这是处理看似任何语言的 SAX 解析时的正常错误（请参阅先前关于 java 和 C 的答案！）。

当您在解析 SAX 事件时，Characters 函数并不是开始和结束标记之间元素的全部内容，它可以被多次调用，而当您处理重音字符时，它就是。

完整的字符内容只能通过连接开始和结束标记之间的值来确定。

因此，对于您的术语“il mio prodotto é molto bello”，字符可能会被调用 3 次，分别为 'il mio prodotto '、'é' 和 'molto bello'，因此您需要将它们连接起来，而不是将它们用作 litterals .

您的“字符”功能应该更像：

```
function characters($parser, $chars) {
   global $desc, $names, $link;
   $fullchars .= $chars;
} 
```

在 end_element 和 start_element 中使用和重置您的字符。

# java - 仅允许 + 、 - 和 . 的正则表达式 在java中

> ID：11117050
> 
> 赞同：-2
> 
> 时间：2012-06-20T09:56:43.303
> 
> 标签：java, regex, string, validation

我有这个字符串

```
String criteria="ESS.(BVA4+BVA5)+(-(DIESE.(BVM5+BVM6)))"; 
```

我想对其进行验证。

1.  它应该只包含 + - 或 。或所有三个。
2.  它不应该接受其他符号，如 !、% 等。

如何为此编写正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:21:34.457

对此有很多猜测：

```
boolean foundMatch = subjectString.matches("[A-Z0-9().+-]*"); 
```

`true`如果字符串仅包含大写 ASCII 字母、ASCII 数字、括号、加号/减号或点，则返回。它包括空字符串（如果您不想要，请将其更改`*`为 a `+`）。

当然，它不会检查（例如）括号是否正确平衡（无论如何你不能在 Java 正则表达式中做到这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:11:30.470

试试这个`String regEx="[+|\-|.|]" ;`

# keyboard - LXDE (Debian) 中的键绑定

> ID：11117051
> 
> 赞同：2
> 
> 时间：2012-06-20T09:56:44.093
> 
> 标签：keyboard, debian, key-bindings

我决定使用 LXDE 作为我的桌面环境，我很高兴。唯一的问题是键绑定，它们对我不起作用。我想通过按 CTRL+ALT+x 打开一个 xterm，所以我编辑了 ~/.config/openbox/lxde-rc.xml。我添加了以下条目：

```
304     <keybind key="C-A-x">
305         <action name="xterm">
306             <command>xterm -fg green -bg black</command>
307         </action>
308     </keybind> 
```

之后我输入：

```
openbox --reconfigure 
```

但是键绑定不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-18T23:56:12.497

动作名称不仅仅是您给它的名称，而是一个预定义的动作。有关详细信息，请参阅文档，但要运行命令，您需要将操作名称更改为“执行”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T06:00:15.587

没有“xterm”之类的操作，所以你想`<action name="xterm">`用`<action name="command">`. 这使得 Openbox/LXDE 知道您要执行下一行的命令。以下是您可以在 Openbox 中使用的所有操作的完整列表（Openbox 是 LXDE 的默认窗口管理器）：

[http://openbox.org/wiki/Help:Actions](http://openbox.org/wiki/Help:Actions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-27T17:16:54.950

openbox 无法识别“xterm”操作。您必须将其更改为“执行”，这将像终端一样执行您输入的命令。我有同样的麻烦祝你好运！:)

[代码](https://gist.github.com/BruceMoustache/91e9fe041573240ac23e0e8ce24ab761)

# python - 在 PyQt 中将列表元素作为信号/槽参数传递

> ID：11117052
> 
> 赞同：1
> 
> 时间：2012-06-20T09:56:49.320
> 
> 标签：python, pyqt, arguments, signals-slots

我想将调用信号的对象作为参数传递给函数，以便我可以在该函数中使用该对象进行操作。该对象是 QLineEdit 小部件。这是示例：

```
self.fieldList = []

for i in range(10):
        self.valueField = QtGui.QLineEdit()
        self.fieldList.append(self.valueField)
        self.fieldList[i].cursorPositionChanged.connect(lambda: (self.checkState(self.fieldList[i], palette1, palette2)))

def checkState(self, line, palette1, palette2):
        if len(line.text()) > 3:
            line.setPalette(palette1)
        else:
            line.setPalette(palette2) 
```

因此，如您所见，我试图将列表元素*self.fieldList[i]*作为参数传递给*checkState()*函数中的名称*行。*如果我在*checkState()*函数中明确定义*fieldList*元素（即*self.fieldList[0]* ） ，则代码可以完美运行，但我不能将其作为参数传递。我究竟做错了什么？

 ***顺便提一句。当我尝试运行程序时，编译器没有给我错误消息，但它根本不会做它应该做的工作（当我写超过 3 个字符时改变 QLineEdit 的颜色）

**编辑：**

**@dex19dt**

是的，这是一个例子，但你是对的！只有最后一个 QLineEdit 可以正常工作！

问题是，我不能给所有这些小部件命名，因为它们的数量取决于所选的层，这意味着有时有 5 个小部件，有时甚至是 11 或 75 个。

我可以轻松地命名这些小部件并设置文本，如下所示：

```
 self.fieldList[i].setObjectName(_fromUtf8("attributeValueField_{0}".format(i)))
 self.fieldList[i].setText(_fromUtf8("{0}".format(value.toString()))) 
```

这适用于每个小部件，但我不知道如何定义信号？你有想法吗？

* * *

**编辑：**

**@dex19dt**

好的，所以我问了这个索引没有“坚持”到函数调用的问题，我发现这正是 python 的工作方式，为了解决这个问题，我需要替换这一行：

```
self.fieldList[i].cursorPositionChanged.connect(lambda: (self.checkState(self.fieldList[i], palette1, palette2))) 
```

有了这个：

```
self.fieldList[i].cursorPositionChanged.connect(lambda old, new, i=i: (self.checkState(self.fieldList[i], palette1, palette2))) 
```

所以这种方式当前索引复制到信号索引。虽然我不太确定为什么会有`old, new`一部分。它是指 lambda 函数还是简单地将左定义`i`为旧变量，右定义`i`为新变量...尝试谷歌搜索，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:05:13.127

好吧，我假设您问题中的代码是一个示例，而不是您的真实代码。因为，由于您在没有附加参数的循环中创建小部件，结果将是窗口中所有对象的重叠。你看，所有的 lineEdits 都在同一个地方（默认情况下，窗口的左上角）。如果是这样的话，真的很难说问题出在哪里，因为在我看来，这只是知道 lineEdit 的哪个实例正在发送信号的问题。

所以我会告诉你如何使上面的代码工作，如果不是这样，你可以随时回复。

这完全取决于信号的连接方式。如果您查看您的代码，您将创建具有相同名称 (self.valueField) 的所有 lineEdits。对象都被创建并且它们在内存中有自己的位置，但是它们在连接中的引用总是被最后一个连接覆盖。你甚至可以进行测试。如果将此行添加到 checkState 函数：

`print self.fieldList.index(line)`

您会看到信号总是为列表的最后一项调用，这也是最后一个连接的信号。

您可以简单地使用不同的名称一一设置所有 lineEdits。并创建您的列表，同时在其中输入所有名称。这样，您的 for 循环将仅连接 lineEdits 而不再创建它们。

编辑：

好的。完成这项工作的一种方法是使用 SignalMapper。看看[这里的文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsignalmapper.html)。

在上面的示例中，您可以执行以下操作：

首先声明映射器，与声明其他小部件的方式相同：

```
self.myMapper = QtCore.QSignalMapper() 
```

在你的第一个 for 循环之后。您遍历列表：

```
for item in self.fieldList:
     self.myMapper.setMapping(item, self.fieldList.index(item))
     item.textEdited.connect(self.myMapper.map)
self.myMapper.mapped[int].connect(checkState) 
```

所以这将做的是它将列表中的每个对象与其在列表中的相应索引（int）映射。因此，当发出信号时，映射器以该索引值作为参数调用 checkState 函数。这样您就可以再次使用列表到达您的对象：

```
def checkState(i):
    print (self.fieldList[i].objectName())
    self.fieldList[i].setText("It works!") 
```

如您所见，映射器将仅发送索引作为参数。所以我想你需要用额外的 args 来调整你的函数`palette1, palette2`。或者您可以使用过滤器之类的初步函数，然后在其中调用正确的 checkState 函数：

```
def myfilter(i):
    checkState(self.fieldList[i], palette1, palette2) 
```

我很确定存在其他方法来完成这项工作，但是这种方法可以完成这项工作，而没有出现更好的解决方案。***

# php - 什么是 PDO PHP 中的 LIMIT 子句？

> ID：11117053
> 
> 赞同：1
> 
> 时间：2012-06-20T09:56:49.860
> 
> 标签：php, pdo, limit

简单而前卫。什么是 PDO PHP 中的 LIMIT 子句？因为我在任何地方都找不到答案，所以我觉得这很简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:58:29.150

[`LIMIT`](http://dev.mysql.com/doc/refman/5.0/en/select.html#id892888)是 MySql 特定的语法，它指示服务器只返回查询产生的完整结果集的一部分。它适用于任何与 MySql 对话的代码，不仅是 PDO 或 PHP。

# events - Flex 中不同组件的事件优先级

> ID：11117056
> 
> 赞同：0
> 
> 时间：2012-06-20T09:56:57.137
> 
> 标签：events, apache-flex

我有以下代码，其中包含与每个元素关联的事件。当我单击单选按钮时，`onItemClick`事件所属的事件在事件`table`之后执行`onSelect`。我认为这是由于`table`是父母和`rb2`孩子。

```
private function onItemClick(e:ListEvent):void {
    selectedRow = parseInt(e.itemRenderer.data.Id)-1;
    trace("selectedRow: "+selectedRow);
}

public function selectPoint(event:MouseEvent):void{
    trace("selectPoint");
}

<mx:DataGrid id="table" dataProvider="{listCol}"
         itemClick="onItemClick(event)">
<mx:columns>
    <mx:DataGridColumn id="posibilidades" rendererIsEditor="true" 
                       editorDataField="selected" headerText="Posibilidades" width="100" textAlign="center"
                       draggable="false" editable="false" resizable="false" sortable="false">
        <mx:itemRenderer>
            <mx:Component>
                <mx:RadioButton name="rb2" label="Punto 2" fontSize="13" enabled="false" 
                                groupName="_rb" value="1" textAlign="center" 
                                preinitialize="event.target.styleName='rbstyle'"
                                click="outerDocument.selectPoint(event)"
                                creationComplete="outerDocument.rbCreated(event)"/>
            </mx:Component>
        </mx:itemRenderer>
    </mx:DataGridColumn>
</mx:columns>
</mx:DataGrid> 
```

我需要以相反的顺序执行这两个事件：`onItemClick`，然后`onSelect`.

我怎样才能执行`onItemClick`之前`onSelect`？我读了一些关于与 相关的优先级`addEventListener`，但它不起作用，因为事件是针对不同的组件的。

**编辑**：我将尝试解释我的问题以及为什么我在 Flex 中做这些奇怪的事情。

我有一个 Datagrid 组件，它由一个名为“添加度量”的按钮动态更新。这个 Datagrid 有 4 列；添加到此 Datagrid 的每个度量都有作为最后一个单元格（在第 4 列）两个单选按钮。

```
|-----------------------------------------------------------------------------|
|            |             |             |                                    |
|  #1 cell   |   #2 cell   |   #3 cell   | (o) Radiobutton1  (o) Radiobutton2 |
|            |             |             |                                    |
|-----------------------------------------------------------------------------| 
```

问题是：当我删除一行时，数据将从显示中删除并且工作正常。但是当我添加一个新单选按钮时，Flex 会重复使用单选按钮，我无法知道新单选按钮在哪一行（如果 Flex 重复使用它们并且我删除 3 行并添加一个新单选按钮，那么单选按钮 -按钮属于这个新行，可以属于删除的最后一行，也可以属于另一行；无法保证）。

所以，我想：“好的，弗兰，也许你可以`itemClick`在 Datagrid 中添加一个事件监听器，当用户点击单选按钮时，你可以知道最近点击的单选按钮在哪一行（因为`itemClick`处理程序）” . 但是 Flex 没有按照我预期的顺序执行处理程序，所以我现在真的被卡住了。

我正在尝试`onRollOver`事件而不是`onItemClick`并且效果很好，但并非总是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:49:46.753

您可以在两个事件处理程序中将这两个事件添加为全局数组（或使用单个事件处理程序）。每次检查数组大小是否长度为 2，并包含 ListEvent 和 MouseEvent，并使用 if(event is ListEvent) 处理事件对象，否则......

然后清空数组，为下一个要触发的事件做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:19:59.570

如果问题是在 flex 回收 itemrender 时识别当前行，我们可以在 itemRenderer 中使用一个事件监听器。创建一个新的 CustomItemRender 类，它扩展了 uiComponent 并实现了 IDropInListItemRenderer 和 IListItemRenderer。使用 listdata 和 data 属性访问行信息和数据信息。

例如 CustomRenderer 代码如下：

包 { 导入 flash.events.MouseEvent;

```
import mx.controls.DataGrid;
import mx.controls.RadioButton;
import mx.controls.listClasses.BaseListData;
import mx.controls.listClasses.IDropInListItemRenderer;
import mx.controls.listClasses.IListItemRenderer;
import mx.core.UIComponent;

public class CustomItemRender extends UIComponent implements IDropInListItemRenderer,IListItemRenderer
{
    public function CustomItemRender()
    {
        super();
    }

    private var _data:Object
    public function get data():Object
    {
        return _data;
    }

    public function set data(value:Object):void
    {
        _data = value;
    }

    private var _listData:BaseListData
    public function get listData():BaseListData
    {
        return _listData;
    }

    public function set listData(value:BaseListData):void
    {
        _listData = value;
    }

    private var radioButton:RadioButton;
    override protected function createChildren():void {
        super.createChildren();
        if(!radioButton){
            radioButton = new RadioButton();
            radioButton.addEventListener(MouseEvent.CLICK, handleRadioButtonClick, false, 0, true);
            this.addChild(radioButton);
        }           
    }

    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void{
        super.updateDisplayList(unscaledWidth, unscaledHeight);
        radioButton.move(10, unscaledHeight*0.5);
    }

    private function handleRadioButtonClick(event:MouseEvent):void{
        trace("row data: "+data);
        trace("currently visible row Info: "+listData.rowIndex+" "+listData.columnIndex);
        trace("dataprovider "+DataGrid(listData.owner).dataProvider.toString())
    }
} 
```

}

这个例子不能解决你的问题。我希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:34:17.023

为什么不只在 DataGrid 上保留一个侦听器（onItemClick(e:Event)) 并使用 'currentTarget' 和 'target' 来识别是谁导致了点击并按照您想要的方式执行您的序列。在这种情况下，target.id 将是“rb2”，而 currentTarget.id 将是“tabe”。

```
 protected function onItemClick(event:Event):void
    {
        //handle your table click here.
        selectedRow = parseInt(event.itemRenderer.data.Id)-1;
        if(event.target.id == 'rb2')
        {
            //do something
        }
    } 
```

希望能帮助到你。

# javascript - javascript 不会转换特殊的 HTML 字符

> ID：11117057
> 
> 赞同：0
> 
> 时间：2012-06-20T09:57:00.363
> 
> 标签：javascript, html, special-characters

我有一个 td 元素，它可以包含一些 HTML 代码，例如`&lt;`.

这就是我在 JavaScript 中调用的方式：

```
tr.find('td.item a').text(item.name); 
```

但是网页上的输出显示的是 HTML 代码 ( `&lt;`) 而不是实际的字符 ( `<`)。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:57:55.607

您告诉 jQuery 将输入视为文本，而不是 HTML。

如果你想让它把它当作 HTML，使用`html()`方法，而不是`text()`方法。

# c# - 在c#中保存多个图像

> ID：11117059
> 
> 赞同：0
> 
> 时间：2012-06-20T09:57:03.473
> 
> 标签：c#, asp.net, sql-server

我正在尝试使用此代码保存多个图像。但相反，它保存了所有文件，包括视频、缩略图和图像。我需要做的就是只保存图像。我在这里做错了什么？谢谢

```
 List<string> img = new List<string>();
                HttpFileCollection httpFileCollection = Request.Files;
                for (int i = 0; i < httpFileCollection.Count; i++)
                {
                    HttpPostedFile httpPostedFile = httpFileCollection[i];
                    if (httpPostedFile.ContentLength > 0  && httpPostedFile.ContentType.StartsWith("image/"))
                    {
                        httpPostedFile.SaveAs(Server.MapPath("~/Icon/") + System.IO.Path.GetFileName(httpPostedFile.FileName));
                        img.Add(Server.MapPath("~/Icon/") + System.IO.Path.GetFileName(httpPostedFile.FileName));
                    }

                }

cmd.Parameters.AddWithValue("@ImageURL", img.ToArray().Length > 0 ? String.Join(",", img.ToArray()) : Path.GetFileName(FileUpload2.PostedFile.FileName)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:03:20.530

您的代码从不检查图像的类型并保存所有文件。您可以通过检查 ContentType 字段或文件的扩展名来检测图像，例如。

```
HttpFileCollection httpFileCollection = Request.Files;
for (int i = 0; i < httpFileCollection.Count; i++)
{
    HttpPostedFile httpPostedFile = httpFileCollection[i];
    if (httpPostedFile.ContentLength > 0 
       && httpPostedFile.ContentType.StartsWith("image/"))
    {
         ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:10:33.387

如果您知道图像总是来自安全来源，您也可以检查文件扩展名

```
HttpFileCollection httpFileCollection = Request.Files;
for (int i = 0; i < httpFileCollection.Count; i++)
{
    HttpPostedFile httpPostedFile = httpFileCollection[i];
    string fileNameExtension = System.IO.Path.GetExtension(httpPostedFile.FileName);
    if (httpPostedFile.ContentLength > 0 &&  fileNameExtension ==".Jpg")
    {
         ...
    }
} 
```

# selenium - Selenium，Xpath，下一个兄弟的 StoreText，按第一个的 ID

> ID：11117061
> 
> 赞同：0
> 
> 时间：2012-06-20T09:57:11.157
> 
> 标签：selenium, xpath, html-table

今天我发现了硒，所以我很想用它。

我只是为基于网络的游戏的网页编写脚本，我可以通过放置确切的 Xpath 将文本存储在我想要的表格中，但我想根据`<th>`之前标签的 ID 名称来存储它在这个例子中，ID 是学分。

这是网页代码。

```
<table class="no_back" align="center">
    <tbody>
        <tr>
        <tr>
            <th id="credits" style="background-color: transparent;">
            <th>41</th>
            <th id="board">
            <th>0 New</th>
        </tr>
    </tbody>
</table> 
```

所以 41 将是我想要存储的值，我可以使用以下方法简单地访问 credits ID：

```
xpath=id('credits') 
```

但是当我尝试放置 /th[2] 或类似的东西时，它不会工作。我对整个 Xpath 也很陌生，所以任何指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:21:40.733

要选择特定节点，您可以使用

```
//table[@class="header_completed"]/following-sibling::table[@align="center"][1]/preceding-sibling::table[preceding-sibling::table[@class="header_completed"]] 
```

对于兄弟姐妹和前兄弟姐妹。

首先，我使用导航到**表格**`@class="header_completed"`。从那里我选择下面的第一个同级表`@align="center"`。从那里我选择所有**前面的兄弟**表，这些表具有前面的兄弟，即带有`@class="header_completed"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:13:00.530

我太傻了……

我通过查看 xpath 而不是 Selenium 找到了它。

```
xpath=id('credits')/following-sibling::th[1] 
```

这是我使用的代码，抱歉浪费了任何人的时间。

# python - 如何告诉 py.test 跳过某些目录？

> ID：11117062
> 
> 赞同：119
> 
> 时间：2012-06-20T09:57:12.813
> 
> 标签：python, unit-testing, pytest

我尝试使用[`norecursedirs`](http://pytest.org/latest/customize.html#confval-norecursedirs)setup.cfg 中的选项来告诉 py.test 不要从某些目录收集测试，但它似乎确实忽略了它。

```
[tool:pytest]
norecursedirs=lib/third 
```

当我跑步时，`py.test`我确实看到它是如何从内部获得测试的`lib/third`！

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2017-01-30T16:00:09.227

`py.test --ignore=somedir`为我工作

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2019-02-07T10:43:42.780

如果您有多个具有不同父级的目录，则可以指定不同的`--ignore`参数：

`py.test --ignore=somedir --ignore=otherdir --ignore=etcdir`

> *   新选项：--ignore 将阻止收集指定路径。
>     可以多次指定。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-06-20T13:19:39.893

我解开了这个谜团：如果在可能的配置文件（ 和 ）之一中找到 pytest 部分`pytest.ini`，`tox.ini`pytest`setup.cfg`将不会查找任何其他部分，因此请确保在单个文件中定义 py.test 选项。

我建议使用`setup.cfg`.

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-07-08T06:50:36.693

您可以使用

```
py.test -k 'not third' 
```

排除所有“第三”目录内容。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-10-09T14:20:44.170

就我而言，问题是缺少通配符。以下对我有用：

```
[tool:pytest]
norecursedirs = subpath/* 
```

而只是`norecursedirs = subpath`没有。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-06-20T12:17:39.663

`norecursedirs`应该管用。检查您是否有 pytest.ini 或其他 setup.cfg 文件。你怎么调用`py.test`？

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-27T14:37:59.697

如果您使用 setup.cfg，则必须`[tool:pytest]`按照[http://doc.pytest.org/en/latest/example/pythoncollection.html使用](https://doc.pytest.org/en/latest/example/pythoncollection.html)

> # pytest.ini 的内容
> # 也可以在 tox.ini 或 setup.cfg 文件中定义，尽管 setup.cfg 文件中的部分
> # 名称应该是“tool:pytest”

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-11-03T19:40:14.867

要使用`pytest.ini`（推荐，除非您`tox`在这种情况下使用`tox.ini`会有意义），请`pytest`使用`pytest -c pytest.ini`.

为了防止我的样品`not_me_1.py`被`not_me_2.py`测试或掉毛，我`pytest.ini`的如下：

```
[pytest]
addopts = --ignore-glob=not_me_*

[pycodestyle]
ignore = not_me_* ALL 
```

# mysql - 无法创建函数

> ID：11117065
> 
> 赞同：1
> 
> 时间：2012-06-20T09:57:15.040
> 
> 标签：mysql

我有这个 mysql 程序的代码，但我无法创建程序

```
DELIMITER @@
CREATE PROCEDURE hrpayroll.sal_gen_init
(IN `emp_id` INT)
BEGIN
    DECLARE branch_cd varchar(20)
    DECLARE comp_cd varchar(20)
    SELECT p.BRANCH_CD IN branch_cd,p.COMP_CD IN comp_cd FROM p_employee_mst p WHERE p.EMPL_ID = emp_id
    INSERT INTO p_sal_hdr (COMP_CD,BRANCH_CD,EMPL_ID) VALUES(comp_cd,branch_cd,emp_id)
END @@ 
DELIMITER ; 
```

我收到这个错误

**错误代码 1064，SQL 状态 42000：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的“DECLARE comp_cd varchar(20) SELECT p.BRANCH_CD IN branch_cd,p.COMP_CD IN com”附近使用正确的语法**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:09:45.330

`;`在声明语句后使用（分号）。前任，

```
BEGIN
    DECLARE branch_cd varchar(20);
    DECLARE comp_cd varchar(20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:54:58.747

有一些语法错误。试试这个程序 -

```
CREATE PROCEDURE sal_gen_ini(IN `emp_id` INT)
BEGIN
  DECLARE branch_cd_var varchar(20);
  DECLARE comp_cd_var varchar(20);

  SELECT
    p.BRANCH_CD, p.COMP_CD INTO branch_cd_var, comp_cd_var
  FROM
    p_employee_mst p
  WHERE
    p.EMPL_ID = emp_id;

  INSERT INTO p_sal_hdr (COMP_CD,BRANCH_CD,EMPL_ID)
    VALUES(comp_cd_var,branch_cd_var,emp_id);
END 
```

请注意，我还重命名了声明的变量以避免字段和变量值出现问题。

* * *

尝试使用一个[SELECT...INTO 语句](http://dev.mysql.com/doc/refman/5.1/en/select-into-statement.html)而不是两个 SELECT 和 INSERT。

# java - 我自己的可以自定义的 Java 应用程序

> ID：11117066
> 
> 赞同：-1
> 
> 时间：2012-06-20T09:57:17.833
> 
> 标签：java, architecture, customization, extends, plugin-architecture

我打算使用java应用程序实现一个过程。该过程有不同的阶段。每个阶段都有一个输入和输出。

所以它类似于 input1=>phase1=>outpu1=>phase2=>output2=>phase3=>final_output

我想编写一个 java 应用程序，用户可以在其中扩展任何阶段来实现自己的功能。

例如：假设 phase1 对给定的输入进行排序。我想让我的应用程序用户创建将替换阶段1 功能的自定义类。他们可能想要计数而不是排序。

关于如何做到这一点的任何想法？插件架构？任何以类似方式工作的框架示例？从哪儿开始？编辑：输入来自用户。让我们说我的应用程序需要一组数字并进行排序（阶段1）然后删除重复项（阶段2）和添加（阶段3）并给出输出。现在我希望这些阶段是可定制的。可能是通过允许他们定义自己的类来做其他事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:04:33.153

我认为您的问题过于笼统，无法提供框架。话虽如此，您可以看一下[策略模式](http://www.oodesign.com/strategy-pattern.html)（更多信息[在这里](http://en.wikipedia.org/wiki/Strategy_pattern)）。

该模式的目的是定义行为，然后将这些行为作为方法参数传递。这将允许您使用一种方法来执行多项操作，具体取决于您传递的参数类型。

但是请注意，在我看来，使用相同的方法进行排序和计数会导致问题。理想情况下，每种方法至少应该执行一些类似的操作，因此对于排序，您可以使用进行升序和降序排序的方法，然后使用另一种方法进行计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:01:26.353

你的问题太模糊了，你可以通过使用一种方法的通用接口来实现这一点。

“阶段”或阶段不能同时发生是否有特殊原因？

或者您可以实现更复杂的东西，例如基于 JMS 的框架或使用[SEDA之类的东西](http://www.eecs.harvard.edu/~mdw/proj/seda/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:03:18.810

解决方案的想法： Phase 将是一个带有 process() 方法的接口，可以用任何算法实现。这个 process() 方法可以有一个 Output 返回类型，并以另一个 Output 作为参数，而 Output 另一种类型（类或接口）。还有一个 Executor 类，它将执行整个过程，使用一个使用阶段列表的 execute() 方法，使用每个阶段的返回输出作为下一个阶段的输入。唯一悬而未决的问题是：第一阶段的输入是什么？

# java - ChangeListener -Parameter的未选中警告

> ID：11117069
> 
> 赞同：0
> 
> 时间：2012-06-20T09:57:23.797
> 
> 标签：java, generics, tableview, javafx-2, unchecked-conversion

在 JavaFX 应用程序中，我将 a 附加`ChangeListener`到 a `TableCell`，`tableRowProperty`它是类型`ChangeListener<? super TableRow>`（并且`TableRow<T>`也是通用的）。

我所做的是以下内容：

```
public final class PairingResultEditingCell extends TableCell<Pairing, Result> {

    private final ChoiceBox<Result> choiceField;

    // Unchecked casts and raw types are needed to wire the
    // tableRowProperty changed listener
    @SuppressWarnings({ "unchecked", "rawtypes" })
    private PairingResultEditingCell() {

        super();
        this.choiceField = new ChoiceBox<Result>();
        // ReadOnlyObjectProperty<TableRow> javafx.scene.control.TableCell.tableRowProperty()
        this.tableRowProperty()
            // this cast is the actual source of the warnings
            // rawtype of TableRow<T>: ChangeListener<? super TableRow>
            .addListener((ChangeListener<? super TableRow>) new ChangeListener<TableRow<Result>>() {

                @Override
                public void changed(
                        final ObservableValue<? extends TableRow<Result>> observable,
                        final TableRow<Result> oldValue,
                        final TableRow<Result> newValue) {
                    choiceField.setVisible(newValue.getItem() != null);
                }
            });
    }
} 
```

我需要两个抑制两种警告来做到这一点：`@SuppressWarnings({ "unchecked", "rawtypes" })`. rawtype 警告似乎只是*Eclipse*。然而，Jenkins CI 服务器拒绝编译代码，因为前者（我无法更改其配置）。

有没有办法在没有未经检查的强制转换和原始类型的情况下做到这一点？我尝试了一个实现接口的内部类，但我被卡住了。一般来说，我也在为 Java 的`? super MyClass`语法而苦苦挣扎。

*   [Oracle 文档：TableCell 类](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableCell.html)
*   [Oracle Docs：类 ReadOnlyObjectProperty](http://docs.oracle.com/javafx/2/api/javafx/beans/property/ReadOnlyObjectProperty.html)（`tableRowProperty`的返回类型）
*   [Oracle Docs：接口 ChangeListener](http://docs.oracle.com/javafx/2/api/javafx/beans/value/ChangeListener.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:19:50.813

我没有收到以下代码的任何警告：

```
public final class PairingResultEditingCell extends TableCell<Pairing, Result> {

    private final ChoiceBox<Result> choiceField;

    private PairingResultEditingCell() {

        super();
        this.choiceField = new ChoiceBox<Result>();

        ReadOnlyObjectProperty<TableRow> roop= this.tableRowProperty();
        this.tableRowProperty().addListener(new ChangeListener<TableRow>() {
            @Override
            public void changed(ObservableValue<? extends TableRow> observable, TableRow oldValue, TableRow newValue) {
                choiceField.setVisible(newValue.getItem() != null);
            }
        });
    }
} 
```

# android - 滚动结束时更改 Listview 中的黄色焦点？

> ID：11117072
> 
> 赞同：0
> 
> 时间：2012-06-20T09:57:27.777
> 
> 标签：android, android-listview, android-theme

`ListView`我们可以更改滚动时项目结束时出现的默认黄色焦点吗？我想将焦点颜色更改为蓝色。如何做到这一点？提前致谢。

![在此处输入图像描述](../Images/7436aae5091cb657e1de25570ae0c31f.png)

编辑：

好像有

```
public void setOverscrollFooter (Drawable footer) 
```

和

```
public void setOverscrollHeader (Drawable header) 
```

来自 API 级别 9。但他们仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:02:43.480

在 XML 文件中使用它。

```
android:overScrollMode="never" 
```

# email - 在黑莓中发送带有 pdf 附件的电子邮件

> ID：11117075
> 
> 赞同：0
> 
> 时间：2012-06-20T09:57:37.487
> 
> 标签：email, blackberry, java-me, email-attachments

我需要在我的应用程序中集成邮件服务。我的应用程序应该发送电子邮件，该电子邮件必须附加一个 .pdf 文件（详细报告）。PDF 文件现在位于远程服务器上。

谁能帮助我了解如何在黑莓中发送带有 pdf 附件的邮件？如果，它是可行的，那么我将如何去做呢？

以下是链接，我从黑莓知识库论坛获得，用于在黑莓中发送邮件

[如何 - 创建附件](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800698/How_To_-_Create_an_Attachment.html?nodeid=800544&vernum=0)

[如何 - 创建和发送消息](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800698/How_To_-_Create_and_send_messages.html?nodeid=1008283&vernum=0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:44:00.257

我相信这是您问题[中第一个链接的更新版本。](http://docs.blackberry.com/en/developers/deliverables/11935/Send_msg_with_attachment_565471_11.jsp)

在您的情况下，您想要发送 PDF 文档，因此您可以将 content-type 替换为`application/pdf`，文件名可以是`DetailedReport.pdf`，或者您喜欢的任何内容。此文件名不是完整路径。只是电子邮件收件人可以看到的名称。

```
SupportedAttachmentPart attach = new SupportedAttachmentPart(multipart,
    "application/pdf", "DetailedReport.pdf", data); 
```

这`byte[]`是您必须自己阅读的内容，打开本地 pdf 文件（无论您将其存储在何处）。它只是文件中的二进制数据，所以我会使用`DataInputStream`：

```
String fileUrl = "file:///SDCard/BlackBerry/SomePath/DetailedReport.pdf";
FileConnection fileConn = (FileConnection)Connector.open(fileUrl, Connector.READ);
int fileSize = fileConn.fileSize();
byte[] data = new byte[fileSize];
DataInputStream input = fileConn.openDataInputStream();
input.read(data); 
```

当然，我建议在后台线程上执行此工作以避免冻结您的 UI。

# jquery - jquery xml解析foreach

> ID：11117076
> 
> 赞同：1
> 
> 时间：2012-06-20T09:57:46.500
> 
> 标签：jquery, xml, foreach

我需要从 xml 文件中获取数据

```
 <?xml version="1.0"?>
    <xml>
    <User>
     <Agent>
      <id>cr4523</id>
     </Agent>
     <Time>
        <Time_Main>2-3pm</Time_Main>
        <Day>Mon</Day>
        <Time_Main>3-4pm</Time_Main>
        <Day>Mon</Day>
        <Time_Main>10-11am</Time_Main>
        <Day>Tue</Day>
      </Time>
     </User>
     </xml> 
```

我的问题是：a：不确定我的 xml 文件格式是否正确，b：我使用的 jquery 将所有数据压缩在一起，但在“Time_Main”部分和“Day”部分中。

我需要的是每个 Time_Main 和 Day 我需要调用一个简单的函数。

我正在使用的 jquery 是 -

```
 $(html).find('Time').each(function(){
        var day=$(this).find('Day').text();
    var time_main=$(this).find('Time_Main').text();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:00:28.847

首先，*格式*是正确的，但*结构*不正确（我假设时间/日期对将被选为单个实体）。那我就这样做：

```
 <?xml version="1.0"?>
<xml>
<User>
  <Agent>
     <id>cr4523</id>
  </Agent>
  <Time>
     <Time_Main>2-3pm</Time_Main>
     <Day>Mon</Day>
  </Time>
  <Time>
     <Time_Main>3-4pm</Time_Main>
     <Day>Mon</Day>
  </Time>
 </User>
 </xml> 
```

从此，您可以遍历所有“时间”标签并检索`Time_Main`和`Day`.

```
$(html).find("Time").each(
        function (i,e)
        {
            console.log("New time tag...");
            console.log($(e).find("time_main").text());
            console.log($(e).find("day").text());
        }

        ); 
```

如果您仍然需要**单个** 标签，请将/ Couples`Time`包装在另一个标签中：`Time_main``Day`

```
<Time>
   <TimeGroup>
     <Time_Main>2-3pm</Time_Main>
     <Day>Mon</Day>
  </TimeGroup>
  <TimeGroup>
     <Time_Main>3-4pm</Time_Main>
     <Day>Mon</Day>
  </TimeGroup>
 </Time>

$(html).find("Time TimeGroup").each(
        function (i,e)
        {
            console.log("New time tag...");
            console.log($(e).find("time_main").text());
            console.log($(e).find("day").text());
        }

        ); 
```

# class - Symfony2 - 教义：重新定义类问题

> ID：11117079
> 
> 赞同：1
> 
> 时间：2012-06-20T09:57:56.043
> 
> 标签：class, symfony, doctrine-orm, doctrine

我有一个奇怪的问题。
我对 symfony2 完全陌生，所以如果这是一个愚蠢的问题，请原谅我。

但是，我正在尝试创建两个实体，它们会将持久数据保存到数据库中，并且这两个实体将一个用于用户，一个用于组。
我已经按照[教程](http://symfony.com/doc/current/cookbook/security/entity_provider.html)定义了这两个类，一切似乎都很好，因为我只创建了第一个实体并运行`php app/console doctrine:schema:update --force`——顺便说一句，数据库已经创建了！

第二次我决定创建第二个实体（它将与第一个实体有关系，我决定使用教义符号来定义该关系）。

这是我的*重要*代码

```
 // src/Sestante/UserBundle/Entity/User.php
 [...]
 /**
 * @ORM\ManyToMany(targetEntity="GroupAndRoles", inversedBy="users")
 *
 */
 private $groups;
 [...] 
```

和

```
// src/Sestante/UserBundle/Entity/GroupAndRoles.php
<?php

namespace Sestante\Bundle\UserBundle\Entity;

use Symfony\Component\Security\Core\Role\RoleInterface;
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="groups")
 * @ORM\Entity()
 */
class GroupAndRoles implements RoleInterface
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id()
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(name="name", type="string", length=30)
     */
    private $name;

    /**
     * @ORM\Column(name="role", type="string", length=20, unique=true)
     */
    private $role;

    /**
     * @ORM\ManyToMany(targetEntity="User", mappedBy="groups")
     */
    private $users;

    public function __construct()
    {
        $this->users = new ArrayCollection();
    }

    // ... getters and setters for each property

    /**
     * @see RoleInterface
     */
    public function getRole()
    {
        return $this->role;
    }
}
?> 
```

当我再次运行时，`php app/console doctrine:schema:update --force`我得到了这个错误

> 致命错误：无法在第 13 行的 /var/www/html/symfony/Symfony/src/Sestante/UserBundle/Entity/GroupAndRoles.php 中重新声明类 Sestante\Bundle\UserBundle\Entity\GroupAndRoles

此外，我试图从我的应用程序的根目录中找到一个可以使用该命令重新定义该实体`find . -type f -exec grep Sestante\Bundle\UserBundle\Entity\GroupAndRoles {} \;`但没有产生结果的文件。

我想我错过了一些东西，也许是缓存或与之相关的东西？（阅读 symfony 书中的一章，其中讲述了一些关于此的内容，但不记得它了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T01:34:04.800

当我忘记声明我的命名空间（使用 Zend 1.12 和 Doctrine 2）时，我遇到了这个问题。在文件类型处添加命名空间声明解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:11:36.303

这可能只是一个错字，但您发布的文件摘录顶部的注释中的文件路径与您的致命错误和命名空间声明中的文件路径不同。您在`src/Sestante/UserBundle/Entity/GroupAndRoles.php`和处有重复的文件`src/UserBundle/GroupAndRoles.php`吗？

# php - 在 wordpress 博客之外显示 wordpress 帖子的某些部分

> ID：11117080
> 
> 赞同：1
> 
> 时间：2012-06-20T09:57:57.993
> 
> 标签：php, wordpress

我在我的自定义网站中有 wordpress 博客，我正在根据以下标签将 wordpress 博客中的一些帖子显示到我的网站中

```
require('../news/wp-blog-header.php');
                            $query = new WP_Query('tag=Dalaman');

                            if ($query->have_posts()):
                                while ($query->have_posts()) : $query->the_post();
                                    ?>
                                    <h3> <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
                                    <p><?php the_content();?></p>
                                    <?php
                                endwhile;
                            endif; 
```

`the_content`显示`10 posts`来自 wordpress 数据库的基于`WP_Query`

**问题：**我想显示帖子的某些部分，比如说 55 个字符的帖子，在我的数据库中`excerpt`默认情况下没有，我不想使用`the_exerpt()`它，因为它会去除 html 标签，并且我的帖子包含`<img>`在每个帖子的开头

我尝试了很多东西但都徒劳无功，我也使用了php的`substr()`功能，但在这种情况下它不起作用。

那么我怎样才能将帖子的某些部分与图像一起显示？

十分感谢。

亲切的问候 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:06:33.247

[http://codex.wordpress.org/Function_Reference/the_content](http://codex.wordpress.org/Function_Reference/the_content)

我建议你按照文章所说的去做，并`<!--more-->`在断点处插入 a - 这比剥离任意数量的字符更安全，因为你可能会破坏你的 html 标签。

如果你不关心这个，那么而不是

```
<?php the_content(); ?> 
```

做

```
<?php
$content = get_the_content(); //get the content as a string
$content = substr($content, 0, 55); //cut the first 55 characters
echo $content; //display it as usual
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:28:17.810

你可以像下面那样做，

```
$limit = 55;
                            $content = explode(' ', get_the_content(), $limit);

                            if (count($content) >= $limit) {
                                array_pop($content);
                                $content = implode(" ", $content) . '...';
                            } else {
                                $content = implode(" ", $content);
                            }
                            $content = preg_replace('/\[.+\]/', '', $content);
                            $content = apply_filters('the_content', $content);
                            $content = str_replace(']]>', ']]&gt;', $content);
                            echo $content; 
```

# javascript - javascript中的动态表

> ID：11117081
> 
> 赞同：0
> 
> 时间：2012-06-20T09:58:01.737
> 
> 标签：javascript, jquery, html, css

[如果您看到我的 jsbin，请查看 jsbin](http://jsbin.com/unaqel/12/edit#javascript,html,live) ，然后我有两个表硬编码表和动态表。我必须像硬编码表一样创建动态表。我在小时列中遇到问题我如何循环遍历表以准确创建小时列，如硬编码表。

```
for (var i = 1; i < parseFloat(timeSlot); i++)
            {
                row = tableAppointment.insertRow(i);
                cell1 = row.insertCell(0);
                cell1.className += 'csstablelisttd';
                cell2 = row.insertCell(1);
                cell2.className += 'csstablelisttd';
                cell3 = row.insertCell(2);
                cell3.className += 'csstablelisttd';
                cell1.innerHTML = startTime;                
                cell2.innerHTML = parseFloat(constMinutes);
                constMinutes = parseFloat(constMinutes + 15);
                if (constMinutes == "60")
                {
                    constMinutes = 0;
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:30:37.840

[http://jsbin.com/unaqel/20/edit#javascript,html,live](http://jsbin.com/unaqel/20/edit#javascript,html,live)

使用 Date 对象，它会显着减少你的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:50:37.157

```
if (constMinutes === 0)
                {
                    cell1.innerHTML = startTimeHour++ + ":00" + startTimeAMPM;
                    if (startTimeHour >= 12)
                    {
                        cell1.innerHTML = startTimeHour + ":00" + endTimeAMPM;              
                    }           
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:16:46.557

你的意思是[这样](http://jsbin.com/uvegiy/edit#javascript,html,live)吗？

```
 for (var i = 1; i < parseFloat(timeSlot); i++)
        {
            row = tableAppointment.insertRow(i);
            cell1 = row.insertCell(0);
            cell1.className += 'csstablelisttd';
            cell2 = row.insertCell(1);
            cell2.className += 'csstablelisttd';
            cell3 = row.insertCell(2);
            cell3.className += 'csstablelisttd';

            if (constMinutes === 0) {
              cell1.innerHTML=startTimeHour++ + ":00" + startTimeAMPM;
            }   

            cell2.innerHTML = parseFloat(constMinutes);
            constMinutes = parseFloat(constMinutes + 15);
            if (constMinutes == "60")
            {
                constMinutes = 0;
            }
        } 
```

我已经修改了它设置的行`cell1.innerHTML`

```
 if (constMinutes === 0) {
              cell1.innerHTML=startTimeHour++ + ":00" + startTimeAMPM;
            } 
```

编辑：

对于正确的 AM 或 PM，我设置了一个递增的整数并使用模运算符。这样，随着它的增加，它只会是 0 或 1。每次达到 12 时，我都会增加它。然后它从数组（AMPM[0] 或 AMPM[1]）中获取文本。

```
 cellAMPM = 0;
        AMPM = ["AM","PM"];

...

            if (constMinutes === 0) {

              if (startTimeHour === 12) cellAMPM++;
              cell1.innerHTML= startTimeHour + ":00" + AMPM[cellAMPM%2];

              startTimeHour = Number(startTimeHour) % 12 + 1;

            } 
```

# javadoc - javadoc: 错误 - 找不到要记录的公共或受保护的类

> ID：11117085
> 
> 赞同：6
> 
> 时间：2012-06-20T09:58:10.617
> 
> 标签：javadoc

在子项目中运行 javadoc 时遇到问题。有多个项目，它们是相互依赖的。

在子项目上运行 javadoc 时，我收到以下错误，其中在类路径中找不到其他项目类（子项目的依赖类）。javadoc: 错误 - 找不到要记录的公共或受保护的类。

如何在子项目上运行 javadoc？研究了没有太大帮助的 javadoc 选项

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-03T10:28:54.513

`javadoc`可能需要一些选项。

`-sourcepath`指定不同的子项目/目录

`-subpackages`递归地指定一个基础包及其所有子包

有关详细信息，请参阅[javadoc 选项](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javadoc.html#CHDFDACB)。

有关各种可能的情况，请参阅[javadoc 示例](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javadoc.html#CHDJBGFC)。

# java - 单个请求标头长度超过配置的最大值

> ID：11117086
> 
> 赞同：2
> 
> 时间：2012-06-20T09:58:15.147
> 
> 标签：java, servlets

我正在使用 JSP、Struts 开发 Web 应用程序，并将其部署到 OC4J 服务器。我创建了一个带有两个按钮的简单 JSP 页面。

我的问题是，当我单击任何按钮时，我收到一条错误消息，指出*“单个请求标头长度超过配置的最大值”*。是什么导致此错误消息？我应该在配置中更改什么？

请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:17:08.313

我认为它在您的服务器上启用了拒绝服务。默认情况下，每个服务器都设置以下限制：

*   最大单个标头大小
*   最大标头大小（所有标头的总和）

[在此处查找解释此问题的文档。尝试增加值。](http://docs.oracle.com/cd/E16764_01/web.1111/e10143/security.htm#CDDBCBCE)

# php - PHP isset 用于使用或运算符提交表单

> ID：11117088
> 
> 赞同：1
> 
> 时间：2012-06-20T09:58:19.420
> 
> 标签：php, forms, submit, form-submit, isset

当有两个名称不同的提交按钮时，是否可以将“OR”运算符添加到 php isset 提交表单代码？例如：

```
if (!isset($_POST['submitRequest'] || $_POST['submit'])) 
```

上面的代码提示和错误。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:59:43.797

尝试：

```
if(isset($_POST['submitRequest']) || isset($_POST['submit'])){
   //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:17:28.817

详细说明一下：

`isset()`，`empty()`还有一些其他的**不是函数，而是语言结构**。因此，根据它们看起来像函数，它们不会以人们可能期望的所有方式工作。

这里重要的部分是：**他们只检查变量**，他们不能也不会评估表达式的结果。的使用`||`使`$_POST['submitRequest'] || $_POST['submit']`表达。结果只是临时计算的，不会存储在可以设置或为空的已定义变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:00:55.227

不，这是不可能的。您需要每个变量在其自己的 isset 函数中您不能将它们组合起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:01:08.023

您可以`isset()`在多个变量上使用：

```
if(isset($_POST['submitRequest']) || isset($_POST['submit'])) {
    // One of them was pushed
} 
```

将多个参数传递给`isset()`. [作为手册文件](http://php.net/isset)：

> 如果提供了多个参数，则仅当设置了所有参数时 isset() 才会返回 TRUE。评估从左到右进行，并在遇到未设置的变量时立即停止。

所以`isset($_POST['submitRequest'], $_POST['submit'])`将相当于`isset($_POST['submitRequest']) && isset($_POST['submit'])`. 但是，如果您想检查，第二句话可能会很有用`!isset($_POST['submitRequest']) || !isset($_POST['submit'])`。由于当传递多个参数时，`isset()`第一个未设置的参数将返回 false，因此您可以使用`!isset($_POST['submitRequest'], $_POST['submit'])`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T10:02:03.797

我知道我误解了原来的帖子。

```
if(isset($_POST['submitRequest'])||isset($_POST['submit'])){
    // you can do something here
} 
```

**原件**（不正确）

你可以使用这个：

```
if(!isset($_POST['submitRequest'], $_POST['submit'])){
    die("Fail");
} 
```

如果提供了多个参数，该函数将检查所有参数。仅当设置了所有参数时，这将返回 TRUE。

参考： http: [//php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T10:02:06.370

这不是如何使用 or 运算符。你必须把它放在两个 isset 调用之间。

```
if ( ! isset($_POST['submitRequest']) || isset($_POST['submit']) ) { } 
```

你总是必须好好看看语法。*请记住，如果左侧条件或*右侧条件为真，则 or 运算符用于使整个条件评估为真。因此，您始终需要在两个条件下使用 or 运算符。

此外，如果您想使用 and 运算符执行此操作，您可以只使用一个 isset 调用。

```
if ( isset($_POST['username'], $_POST['password']) ) { } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T10:04:45.197

您需要分别对各个变量调用 isset 函数。您可以选择使用这两种语法中的任何一种，具体取决于您遵循的约定。

```
if(isset($_POST['submitRequest']) || isset($_POST['submit'])){
   //do something
}

if(isset($_POST['submitRequest']) OR isset($_POST['submit'])){
   //do something
} 
```

# windows-8 - Windows 8 Metro App MediaElement.SetSource（播放时不能改变音量）

> ID：11117096
> 
> 赞同：0
> 
> 时间：2012-06-20T09:58:44.060
> 
> 标签：windows-8, microsoft-metro, volume, mediaelement

我正在制作 Windows 8 Metro 风格的应用程序。我希望能够同时运行不同的声音并管理它们。为了这个目标，我创建了 MediaPlayService，它应该包含允许我这样做的方法。

我发现了一个问题，在“_mediaElement.SetSource()”之后我无法更改音量。我打电话给 SetVolume 并没有发生任何事情。

```
Initialize(sound);
 SetVolume(100);
 Play();        --- this sequence works

Initialize(sound);
 Play();       
SetVolume(100); --- does not work (I can not change the volume during playback)

 public void SetVolume(int volume)
         {

          //_m ediaElement.Volume = Math.Round((double)((double)volume / 100), 2);
             double dvolume = Math.Round((double)((double)volume / 100), 2);

            _mediaElement.SetValue(MediaElement.VolumeProperty, dvolume);

        }

        string _mediaPath;

        public void Initialize(Sound sound)
         {
             _mediaElement = new MediaElement();
             _mediaPath = sound.FilePath;
             _mediaElement.AudioCategory = Windows.UI.Xaml.Media.AudioCategory.Communications;
             _mediaElement.IsLooping = true;
             _mediaElement.MediaFailed += _mediaElement_MediaFailed;
             _mediaElement.RealTimePlayback = true;
         }

        public async void Play()
         {

            var pack = Windows.ApplicationModel.Package.Current;

            var installedLoction = pack.InstalledLocation;
             var storageFile = await installedLoction.GetFileAsync(_mediaPath);

            if (storageFile != null)
             {
                 var stream = await storageFile.OpenAsync(Windows.Storage.FileAccessMode.Read);
                 _mediaElement.SetSource(stream, storageFile.ContentType);

                _mediaElement.Play();
             }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:03:20.370

您的 MediaElement 不是您页面的 VisualTree 的一部分。因此，您必须处理那些无法正常工作的奇怪行为，例如设置音量或位置。

作为解决方案，您可以在 XAML 文件中创建 MediaElement 或将其从代码隐藏添加到 VisualTree（类似于 contentGrid.Children.Add( _mediaElement )。在后一种情况下，您可能必须在导航到另一个页面之前将其删除下次导航返回时，它可能不会播放。

# powershell - PowerShell Receive-Job 在脚本中不起作用

> ID：11117099
> 
> 赞同：2
> 
> 时间：2012-06-20T09:58:50.923
> 
> 标签：powershell

当我在 PowerShell 控制台中执行`$job = Start-Job { dir }`then时，我得到了正常的输出。`Receive-Job $job`但是当我制作类似的 .ps1 脚本并运行它时，没有输出。其他命令正常工作。如何在脚本中接收作业结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:30:15.250

只需在接收之前尝试等待作业完成。

```
$job = Start-Job { dir }
Wait-Job $job | out-null
receive-job $job 
```

另一种方式

```
$job = Start-Job { dir }
while ($job.state -ne "Completed") {}
receive-job $job 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:34:11.050

您需要等待作业完成：

```
Start-Job { dir } | Wait-Job | Receive-Job 
```

# java - 使用 java 的 HTTP 补丁请求

> ID：11117103
> 
> 赞同：5
> 
> 时间：2012-06-20T09:59:06.453
> 
> 标签：java, http

我需要使用 Java 程序发送 HTTP Patch 请求。有人可以发布一个代码片段来显示如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-10T21:40:40.927

也许这会帮助你：

```
Response response = request(webTarget).method("PATCH", entity); 
```

# django - Django使用南迁移应用程序 - 重复的初始

> ID：11117104
> 
> 赞同：0
> 
> 时间：2012-06-20T09:59:08.320
> 
> 标签：django, django-south

我正在尝试迁移 django 应用程序，但我遇到了一个问题。当我跑步时

```
python manage.py migrate --list |grep -v "*" 
```

我得到输出

```
dbtemplates
  ( ) 0001_initial
  ( ) 0002_auto__del_unique_template_name
  ( ) 0003_initial 
```

我刚刚下载了 dbtemplates 包，在下载的文件夹迁移中有 3 个文件：

```
__init__.py
0001_initial.py
0002_auto__del_unique_template_name.py 
```

所以我认为在我的 django 项目中`0003`不应该在这里。我应该删除`0003`，标记为假的吗？如果我需要删除`0003`迁移，我在哪里可以找到这个包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:04:41.907

```
python manage.py shell
[1]: import dbtemplates
[2]: dbtemplates 
```

这显示了路径包

# java - Eclipse RCP - ScopedPreferenceStore 限定符。如何使用默认的偏好存储？

> ID：11117105
> 
> 赞同：1
> 
> 时间：2012-06-20T09:59:10.763
> 
> 标签：java, eclipse-rcp, default, preferences

在我的 Eclipse 3.7 RCP 应用程序中，我得到 PreferenceStore 如下： `Activator.getDefault().getPreferenceStore()`它返回一个`IPreferenceStore`. 这里使用了激活器自己的偏好存储。

现在我想使用一个实例，`ScopedPreferenceStore`它是一个`IPreferenceStore`。
现在必须通过在构造函数中传递一个插件 ID 作为限定符参数来明确设置偏好存储节点`ScopedPreferenceStore(IScopeContext context, String qualifier)`。

**例子：**
`ScopedPreferenceStore(ConfigurationScope.INSTANCE, "com.example.myplugin.id")`

**问题：**
如何获得 Activator 自己的偏好存储限定符？换句话说，我如何创建一个`ScopedPreferenceStore`将首选项存储在 Activator 自己的首选项存储中的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:57:47.533

如果您想在不访问 Activator 本身的情况下为您的捆绑包获取等效的首选项存储，您将使用您列出的相同模式：

```
preferenceStore = new ScopedPreferenceStore(InstanceScope.INSTANCE, "your.bundle.id"); 
```

**编辑：**查找您的捆绑包 ID

当 eclipse 自动生成你的 bundle 激活器时，它会创建一个带有 bundle id 的静态字段。但是，如果您没有激活器，您仍然可以检索您的捆绑包 ID。您可以使用从任何一个类`FrameworkUtil`中获取对象。`Bundle`

```
import org.osgi.framework.Bundle;
import org.osgi.framework.FrameworkUtil;

final Bundle bundle = FrameworkUtil.getBundle(PrintIdHandler.class);
System.out.println(bundle.getSymbolicName()); 
```

# visual-studio-2010 - VS 2010 代码更改在“构建解决方案”上给出错误 LNK2001，必须执行“重建解决方案”

> ID：11117108
> 
> 赞同：1
> 
> 时间：2012-06-20T09:59:23.857
> 
> 标签：visual-studio-2010, dll, solution, rebuild, linker-errors

将我的项目转换为*Visual Studio 2010*，我面临一个令人烦恼的问题。

我有一个包含 9 个项目的解决方案。九个项目中有八个产生“静态库（.lib）”作为输出，其中一些依赖于这八个中的另一个。另一个项目使用其中一些库并生成一个“动态库 (.dll)”，它是项目的最终输出并由示例应用程序使用。

现在，当我在**任何**项目中进行一些代码更改并给出“构建解决方案”时，我得到链接错误**LNK2001**。但是，如果我给出“重建解决方案”，那么它会成功编译解决方案，并且我会得到更改对代码的影响。但是由于它是一个有点大的项目，所以在每次代码更改时都进行“重建”非常耗时，并且在开发过程中非常麻烦。

仅供参考，它在我使用*Visual Studio 2005*时完美运行。

有谁知道我必须更改哪些项目设置，以便我只能通过提供“**构建**解决方案”来获得更改代码的效果，它只编译更改的代码并创建最终的 DLL。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:27:00.170

经过几个痛苦的小时后，我解决了这个问题:)。

根据[此处](http://msdn.microsoft.com/en-us/library/024awkd1)的链接，我已经转到**属性页>链接器>常规**，并将生成最终 dll 的项目的“使用库依赖输入”属性更改为**True**。这结束了我所有的痛苦，现在“构建解决方案”只需构建更改并相应地创建动态库。

# windows-phone-7.1 - Windows phone的IsolatedStorage会被黑吗？

> ID：11117109
> 
> 赞同：1
> 
> 时间：2012-06-20T09:59:24.730
> 
> 标签：windows-phone-7.1, isolatedstorage

我使用我的应用程序下载文件，然后保存到独立存储中。有人可以破解并从我的应用程序中获取我的文件或文件夹吗？我不知道IsolatedStorage 是如何保护它的数据的？我们还有其他方法来保护 IsolatedStorage 中的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:50:54.680

是的，您的数据很容易受到攻击。

如果此数据包含用户详细信息，例如电子邮件、密码甚至个人信息，则应确保其安全。

如果您正在存储有关用户最喜欢的颜色或最喜欢的汽车的信息，那么这可以被视为“不敏感”，然后您必须决定是否要保护它。

始终假设人们可以获取您的数据。他们可以访问它只是时间问题（看看人们是如何越狱 iPhone 和大量其他智能手机的）。

记住[安全不是通过默默无闻获得的](http://en.wikipedia.org/wiki/Security_through_obscurity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T08:43:40.360

以下链接对 Windows 上的独立存储有很好的答案...

[https://security.stackexchange.com/questions/5660/how-secure-is-isolated-storage-on-windows](https://security.stackexchange.com/questions/5660/how-secure-is-isolated-storage-on-windows)

从托管应用程序中将无法访问另一个应用程序的隔离存储。然而，从本机代码来看，这是另一回事，WP8 支持本机代码......

[http://msdn.microsoft.com/en-us/library/windows/apps/jj681687(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj681687(v=vs.105).aspx)

另外，下面的文章断言只有一个注册表可以阻止想要将非托管代码添加到 WP 7.1 的黑客......

[http://www.wpcentral.com/let-hacking-begin-how-windows-phone-7-can-run-native-unmanaged-code](http://www.wpcentral.com/let-hacking-begin-how-windows-phone-7-can-run-native-unmanaged-code)

因此，在 WP7 上，很明显您的应用程序不应将任何敏感数据存储在 WP 上的隔离存储中，而在 WP8 上则更加清晰。如果您可以避免将敏感数据放在隔离存储中，请这样做，否则您需要对数据进行加密，然后您当然需要考虑加密的安全性以及用于解密和加密数据的密钥。以下看起来像是如何做到最好的一个很好的指南......

[http://msdn.microsoft.com/en-us/library/windows/apps/hh487164(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh487164(v=vs.105).aspx)

归根结底，对于黑客来说，安全不过是一系列障碍，如果他们真的下定决心并拥有可用的技能和资源，他们最终可能会访问数据。

# ruby - bundle exec 和 require 'bundle/setup' 是否等效？

> ID：11117112
> 
> 赞同：18
> 
> 时间：2012-06-20T09:59:33.913
> 
> 标签：ruby, bundler

这些事情是否完全一样？

*   开始一个红宝石进程`bundle exec ruby foo.rb`
*   作为`require "bundler/setup"`第一行`foo.rb`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-20T11:04:36.700

在您的*具体*示例中，它们可以被认为是相同的，但实际上它们并不相同。

`bundle exec``bundler/setup`对不做的环境做出一些改变。如果您`foo.rb`从不运行子 shell，或者从不尝试在子shell 中运行其他 ruby​​ 可执行文件，那么这两个版本是等效的（它们都将正确加载捆绑的 gem 并且工作完全相同）。

整个想法`bundle exec`是使您能够**运行****最初设计时没有考虑到捆绑器的**可执行文件。像`rspec`, `rails`, `rackup`. 如果您自己的应用`foo.rb`（因为您要确保使用 bundler 只是加载正确的 gem，并且`bundler/setup`在您的情况下完全按照预期工作。

在谈到运行 ruby​​ 系统可执行文件时，来自[bundler 文档：](http://gembundler.com/)

> 在某些情况下，如果可执行文件恰好安装在您的系统中并且没有拉入任何与您的捆绑包冲突的 gem，则在没有 bundle exec 的情况下运行可执行文件可能会起作用。
> 
> 然而，这是不可靠的并且是相当大的痛苦的来源。即使它看起来可以正常工作，但将来或在另一台机器上可能无法正常工作。

然后从[bundle exec 的联机帮助页中，](http://gembundler.com/man/bundle-exec.1.html)您可以获得一些关于`bundle exec`实际操作的额外线索：

> **环境修改**
> 
> *   确保仍然可以从 bundle exec 调用的命令内部进行打包（使用 $BUNDLE_BIN_PATH）
> *   将包含可执行文件（如 rails、rspec、rackup）的目录放在 $PATH 上
> *   确保如果在子 shell 中调用 bundler，它使用相同的 Gemfile（通过设置 BUNDLE_GEMFILE）
> *   将 -rbundler/setup 添加到 $RUBYOPT，确保在子 shell 中调用的 Ruby 程序可以看到包中的 gem

因此，如果您在构建应用时考虑到捆绑器支持，那么您永远不需要`bundle exec`您的应用。

但是，如果您需要使用**其他**工具来加载您的应用程序代码，这些工具可能会在加载您的应用程序代码**之前**加载 gem （这可能会拉入错误的非捆绑 gem），那么您需要使用`bundle exec`.

# javascript - 在动态生成列表项时被 jquery 卡住了

> ID：11117114
> 
> 赞同：0
> 
> 时间：2012-06-20T09:59:42.960
> 
> 标签：javascript, jquery, html, css

这是脚本：

```
<script type="text/javascript">
    var classname="";
    $(document).ready(function(){
        $("#submit").click(function(){ 
            name=$("input#name").val();
            $("#listview").append("<li>"+name+"</li>");
            $('#listview').attr('class','item'); 
        });

        $("li.item").click(function(){
            $(li.item).removeClass("selected");
            $(this).addClass
        });
    });
</script>
<style type="text/css">
    .selected { background-color:red;width:20px;}
</style> 
```

这是html代码：

```
<ul  id="listview" >
   data
</ul> 
```

使用上面的代码，我能够动态生成无序列表项。但是我无法在动态类的帮助下将 css 类添加到动态列表项中（类用于

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:08:50.437

尝试这个 ：

```
var classname="";    
 $(document).ready(function(){

    $("#submit").click(function(){    
     name=$("input#name").val();
     $("#listview").append("<li class='item'>"+name+"</li>");
   });

   $("li.item").click(function(){    
      $("li.item").removeClass("selected");
      $(this).addClass("selected");    
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:09:20.670

```
$(document).ready(function(){
    var clickEventHandler = function(){
        //remove class from previously clicked elements.
        $(".selected").removeClass("selected");
        //add it to the current element.
        $(this).addClass("selected");
    }       

    $("#submit").click(function(){ 
        var name=$("input#name").val(),
            ul = $("#listview");

        //generate li with jquery add a click handler to it.
        $("<li/>", {'class': "mc" })
                           .appendTo(ul)
                           .click(clickEventHandler);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:09:40.190

根据我从您的帖子中了解到的内容您可以尝试以下代码来实现您想要的

```
$(document).ready(function(){
        $("#submit").click(function(e){ 
           // if #submit is a submit button then You have to prevent
           // the default behavior or page will reload
           // you can do that by uncommenting following line
           // e.preventDefault();
            name=$("input#name").val();
            $("#listview").append("<li class='item'>"+name+"</li>");
        });

        $("ul#listview").on('click','li.item',function(){
            $('li.item').removeClass("selected");
            $(this).addClass('selected');
        });
    }); 
```

您现有代码的问题：

1.  你正在做`$('#listview').attr('class','item');`这会将类添加到`ul`不是新创建的`li`

2.  由于`li`元素是动态添加到 DOM 中的，简单地绑定`click`事件是`.click()`行不通的，你必须使用事件委托，[`.on()`](http://api.jquery.com/on)建议使用方法来做到这一点。

3.  `$(this).addClass`什么都不做，也许你打算写`$(this).addClass('selected');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:10:00.890

You need to attach the event to the dynamically created list items, not defining there click event directly using [`.bind()`](http://api.jquery.com/bind/):

```
$("li.item").bind("click", function(event){
    event.preventDefault();
    $(li.item).removeClass("selected");
    $(this).addClass("otherclass");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T10:14:56.443

这是你想要做的吗？

[http://jsfiddle.net/Wd887/3/](http://jsfiddle.net/Wd887/3/)

每次添加新列表项时，都需要应用单击事件。否则 jQuery 将不会关注该特定项目上的事件。

# c# - 使用 Linq 对 XML 进行复杂排序

> ID：11117117
> 
> 赞同：3
> 
> 时间：2012-06-20T10:00:21.417
> 
> 标签：c#, xml, visual-studio-2010, linq

我试图为我的问题找到解决方案，但我在这方面的知识（Linq、XML）相当有限。:( '已经找到了一个[类似的结构](https://stackoverflow.com/questions/6922180/sort-xmldocument-using-linq)，但我需要一种更复杂的排序方式。

考虑以下 XML 文档：

```
<Envelope>
    <Body>
        <Table>
            <Trans>
                <B>1</B>
                <A>3</A>
                <C>5</C>
            </Trans>
            <Trans>
                <D>1</D>
                <A>6</A>
                <C>3</C>
            </Trans>
            <Trans>
                <A>1</A>
                <C>3</C>
                <B>5</B>
            </Trans>
        </Table>
    </Body>
<Envelope> 
```

有什么方法可以使用 C#/Linq 对 <Trans> 中的元素进行排序，还是必须分解所有 <Trans> 元素并一一排序？

**更新** 我有一个文件，这就是我想要完成的。;)

```
<Envelope>
    <Body>
       <Table>
           <Trans>
               <A>3</A>
               <B>1</B>
               <C>5</C>
           </Trans>
           <Trans>
               <A>6</A>
               <C>3</C>
               <D>1</D>
           </Trans>
           <Trans>
               <A>1</A>
               <B>5</B>
               <C>3</C>
           </Trans>
       </Table>
   </Body>
<Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:05:56.463

这实际上取决于您到底想要做什么（按顺序处理它们，还是重新排序 XML？）以及您的“排序”到底是什么意思（按标签名称排序？按值排序？）。

如果您只想按顺序处理它们，这就是您可以`<Trans>`按值（`<D>1</D>`之前`<A>6</A>`）对每个元素中的所有元素进行排序的方法：

```
XDocument doc = /* load up your XML */

var sorted = from trans in doc.Descendants("Trans")
             select trans.Children().OrderBy(c => int.Parse(c.Value)).ToArray(); 
```

或者，这是按标签名称（`<A>6</A>`之前`<D>1</D>`）排序的方法：

```
var sorted = from trans in doc.Descendants("Trans")
             select trans.Children().OrderBy(c => c.Name.LocalName).ToArray(); 
```

有了上面，`sorted`将是一个可枚举的数组集合。集合中的每个数组都代表一个`<Trans>`，每个这样的数组都`<Trans>`按顺序保存 的子级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:08:46.740

```
XDocument xDoc = XDocument.Load(....);
foreach(var trans in xDoc.Descendants("Trans"))
{
    trans.ReplaceAll( trans.Elements().OrderBy(x=>x.Name.LocalName));
}

string newXml = xDoc.ToString(); 
```

# java - 裁剪图像的一部分并保留原始图像

> ID：11117126
> 
> 赞同：-1
> 
> 时间：2012-06-20T10:00:36.740
> 
> 标签：java, image, image-processing, graphics

所以我有一个黑色图像作为黑暗（在我的游戏中）。我只想在角色周围显示一小部分。像这样

![在此处输入图像描述](../Images/6d3f59944861e1fa54634bad61af22eb.png)

红色方块是玩家。绿色位是游戏中的地面（草）。黑色是阴影/黑暗。

我想要做的是从空白的黑色图像中切出一个椭圆/孔。我希望这个椭圆以玩家（红色方块）x 和 y 位置为中心。

目前我正在使用它来获得效果：

```
 for(int x = 0; x < width; x++) {
            for(int y = 0; y < height; y++) {
                //draw mask
                g.setColor(Color.black);
                if(!nearPlayer(x, y)) {
                    g.drawLine(x, y, x, y);
                }
            }
        } 
```

但是，这个过程非常缓慢，并且极大地滞后了玩家的运动。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:14:07.503

> ..玩家是红色方块。基本上我想要做的是在玩家相对于所述黑色图像的坐标周围从空白的黑色图像中切出一个圆圈。

“黑色图像”的 DYM 究竟是什么？对我来说，BG 看起来像是漆成黑色的，这对于任何纯色都更有意义。在这种情况下，只需使用 来创建红色的东西`Area`，**填充**它，然后为边框设置一个笔触并将颜色设置为黑色，然后**绘制**它。 [这个例子](https://stackoverflow.com/a/10890786/418556) 展示了如何。

![](../Images/9b0b39523b1491a2e437670d4a6841a7.png)

该短代码的相关部分是..

```
public void paintDaisyPart(Graphics2D g, Area daisyArea) {
    g.setClip(daisyArea);

    g.setColor(Color.YELLOW);
    g.fillRect(0, 0, 200, 200);

    g.setColor(Color.YELLOW.darker());
    g.setClip(null);
    g.setStroke(new BasicStroke(3));
    g.draw(daisyArea);
} 
```

我一定很无聊。这是绘制上图的代码的**动画**SSCCE 版本。它通常显示 >130 FPS。那是在一台笨重的机器上，我告诉那个人我的规格。很“便宜”，两次提醒他我不玩（重渲染）游戏。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

public class DaisyDisplay {

    DaisyDisplay() {
        JPanel gui = new JPanel(new BorderLayout(2,2));

        final BufferedImage daisy = new BufferedImage(
                200,200,BufferedImage.TYPE_INT_RGB);
        final JLabel daisyLabel = new JLabel(new ImageIcon(daisy));
        gui.add(daisyLabel,BorderLayout.CENTER);
        final Daisy daisyPainter = new Daisy();
        daisyPainter.setSize(200);
        final JLabel fps = new JLabel("FPS: ");
        gui.add(fps,BorderLayout.SOUTH);

        ActionListener animator = new ActionListener() {
            int counter = 0;
            long timeLast = 0;
            long timeNow = 0;
            public void actionPerformed(ActionEvent ae) {
                Graphics2D g = daisy.createGraphics();
                g.setColor(Color.GREEN.darker());
                g.fillRect(0, 0, 200, 200);

                daisyPainter.paint(g);

                g.dispose();
                daisyLabel.repaint();

                counter++;
                timeNow = System.currentTimeMillis();
                if (timeLast<timeNow-1000) {
                    fps.setText("FPS: " + counter);
                    counter = 0;
                    timeLast = timeNow;
                }
            }
        };
        Timer timer = new Timer(1,animator);
        timer.start();

        JOptionPane.showMessageDialog(null, gui);
        timer.stop();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new DaisyDisplay();
            }
        });
    }
}

class Daisy {

    double size = 200;
    Point location;

    double offset = 0.0;

    public void paint(Graphics2D g) {
        Area daisyArea = getDaisyShape();
        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
                RenderingHints.VALUE_ANTIALIAS_ON);

        offset += .02d;

        AffineTransform plain = g.getTransform();

        g.setTransform(AffineTransform.getRotateInstance(
                offset + (Math.PI*1/8),
                100,100));
        paintDaisyPart(g,daisyArea);

        g.setTransform(AffineTransform.getRotateInstance(
                offset + (Math.PI*3/8),
                100,100));
        paintDaisyPart(g,daisyArea);

        g.setTransform(AffineTransform.getRotateInstance(
                offset,
                100,100));
        paintDaisyPart(g,daisyArea);

        g.setTransform(AffineTransform.getRotateInstance(
                offset + (Math.PI*2/8),
                100,100));
        paintDaisyPart(g,daisyArea);

        g.setTransform(plain);
    }

    public void setLocation(Point location) {
        this.location = location;
    }

    public void paintDaisyPart(Graphics2D g, Area daisyArea) {
        g.setClip(daisyArea);

        g.setColor(Color.YELLOW);
        g.fillRect(0, 0, 200, 200);

        g.setColor(Color.YELLOW.darker());
        g.setClip(null);
        g.setStroke(new BasicStroke(3));
        g.draw(daisyArea);
    }

    public void setSize(double size) {
        this.size = size;
    }

    public Area getDaisyShape() {
        int diameter = (int)size*6/20;

        Ellipse2D.Double core = new Ellipse2D.Double(
                (size-diameter)/2,(size-diameter)/2,diameter,diameter);

        int pad = 10;
        int petalWidth = 50;
        int petalLength = 75;

        Area area = new Area(core);

        // left petal
        area.add(new Area(new Ellipse2D.Double(
                pad,(size-petalWidth)/2,petalLength,petalWidth)));
        // right petal
        area.add(new Area(new Ellipse2D.Double(
                (size-petalLength-pad),(size-petalWidth)/2,petalLength,petalWidth)));
        // top petal
        area.add(new Area(new Ellipse2D.Double(
                (size-petalWidth)/2,pad,petalWidth,petalLength)));
        // bottom petal
        area.add(new Area(new Ellipse2D.Double(
                (size-petalWidth)/2,(size-petalLength-pad),petalWidth,petalLength)));

        return area;
    }
} 
```

# spring - Spring中的动态数据源路由

> ID：11117127
> 
> 赞同：2
> 
> 时间：2012-06-20T10:00:54.880
> 
> 标签：spring, postgresql, jakarta-ee, transactions

我在 PostgreSQL 中有一个具有三个相同模式的数据库。现在我需要根据语言环境键（存储在用户会话中）为数据库操作选择特定的模式。我在某处发现这个东西类似于动态数据源路由。

任何人都知道如何在 Spring 中实现这一点？无论如何这会影响事务管理吗？如果可能，请分享任何示例代码。

任何建议将不胜感激。感谢和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:12:58.003

如果您有单个数据库，那么动态方面不应该与连接池相关 - 所有连接仍然适用于单个数据库。您需要做的就是在启动事务后动态设置正确的模式。

这可以通过使用阶数高于 的某些方面来实现`<tx:annotation-driven />`。在这方面，您应该获取当前连接：

```
DataSourceUtils.getConnection(dataSource) 
```

并发出以下 PostgreSQL 语句（有关参数的信息，请参见： [http](http://www.postgresql.org/docs/9.1/static/sql-set.html)`schema` ://www.postgresql.org/docs/9.1/static/sql-set.html ）；

```
set schema 'schemaname-on-the-basis-of-session-parameter'; 
```

另请参阅[在 postgres 中使用模式](https://stackoverflow.com/q/11046152/250517)。

至于事务管理 - 事务与物理连接和会话有关。另一边的模式是一种命名空间，因此您不必更改事务管理，只需在用户请求处理期间在每个事务开始时设置当前模式即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:57:19.320

我建议使用这种方法：

*   首先在 Spring MVC 配置中定义一个基于会话或更改拦截器的[语言环境拦截器。](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/mvc.html#mvc-localeresolver)
*   您现在可以[`LocaleContexHolder`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/context/i18n/LocaleContextHolder.html)用来获取附加线程上的当前语言环境。
*   使用[参考博客文章](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)来定义您的动态路由数据源。数据源路由器上的参数将来自语言环境。用于`LocaleContextHolder`确定区域设置，然后使用它来确定应使用哪个数据源。

# java - 通过语法构造Java Decompiler会出现什么问题？

> ID：11117130
> 
> 赞同：4
> 
> 时间：2012-06-20T10:01:02.080
> 
> 标签：java, jvm, antlr3, decompiling, decompiler

我目前正在构建一个 Java 反编译器。

为了辅助模式识别，我正在通过ANTLR构造一个简单的语法，并使用ANTLRWorks解释器进行调试。

以下是到目前为止的初步语法。在沿着这条路线前进时，我假设我能够将某些 JVM 字节码简化为下面的语法可以检测到的表达式。

您在这种方法中看到了哪些问题？[6 月 29 日 2:36 GMT 1](https://stackoverflow.com/questions/11117130/what-problems-would-arise-in-constructing-a-java-decompiler-through-a-grammar/11242432#comment14793788_11242432)更新了 Ira 评论的语法

```
 grammar JVM;

options {k=3;}

WS  :   (' '|'\r'|'\n'|'\t')+ {$channel=HIDDEN;}
    ;
INT :   ('0'..'9')+ ;
UINT    :   ('_' INT)?;
IFEQ    :   'ifeq';
IFGE    :   'ifge';
IFGT    :   'ifgt';
IFLE    :   'ifle';
IFLT    :   'iflt';
IFNE    :   'ifne';
IFACMP_CONDTYPE :   'if_acmp' ('eq'|'ne'|'lt'|'ge'|'gt'|'le');
// THIS :   'aload_0';
LDC :   'ldc2_w'|'ldc_w'|'ldc';
LOADREFERENCE
//  :   THIS
    : 'aload' UINT;
//  | 'aload_2'
//  | 'aload_3';
DLOAD   :   'dload' UINT;
LOADINT :   'iload_0'
    |   'iload_1'
    | 'iload_2'
    | 'iload_3'
    ;
DCONST  :   'dconst' UINT;  
ICONST  :   'iconst' UINT;

goal    :   jvmStatement2+ ;

//fragment
//jvmStatement1
//  :   returnStatement
//  | newArrayStatement
//  | storeStatement
//  | assignmentStatement
//  | assertStatement
//  | invokeStatement
//  | ifStatement
//  | gotoStatement
//  ;

fragment // to test assert
jvmStatement2
    : returnStatement     // 2
    | newArrayStatement   // 3
    | storeStatement      // 4
    | invokeStatement     // 5
    | assignmentStatement // 6
    | assertStatement     // 7
    | ifStatement         // 8  
    | gotoStatement
    ;

fragment
setAssertionStatus
    :   ifStatement pushIntegerConstant
    gotoStatement pushIntegerConstant setStaticFieldInClass;

fragment
fetchFieldFromObject
    :   LOADREFERENCE 'getfield' INT;

fragment
loadDoubleFromLocalVariable
    :   DLOAD;

fragment
loadFloatFromLocalVariable
    :   'fload' UINT;

fragment
loadIntFromLocalVariable
    :   LOADINT;

fragment
loadLongFromLocalVariable
    :   'lload' UINT;   

fragment
loadReferenceFromLocalVariable
    :   'aload' UINT;

fragment
loadReferenceFromArray
    :   'aaload';

fragment
storeReference
    : storeIntoByteOrBooleanArray;  

fragment
storeReferenceIntoLocalVariable
    :   'astore' UINT;

fragment
storeDoubleIntoLocalVariable
    :   'dstore' INT;

fragment
storeFloatIntoLocalVariable
    :   'fstore' UINT;

fragment
storeIntIntoLocalVariable
    :   'istore' (INT|UINT);

fragment
storeLongIntoLocalVariable
    :   'lstore' UINT;  

fragment
storeIntoByteOrBooleanArray
    :   'bastore';

fragment
storeIntoReferenceArray
    :   'aastore';

fragment
pushNull:   'aconst_null';

fragment
pushByte:   'bipush' INT;

fragment
pushIntegerConstant
    :   ICONST;

fragment
pushDoubleConstant
    :   DCONST;

fragment
pushLongConstant
    :   'lconst' UINT;

fragment
pushFloatConstant
    :   'fconst' UINT;

fragment
pushItemFromRuntimeConstantPool
    :   LDC INT;

fragment invokeStatementArgument: constantExpr
    | createAnonymousClass;

fragment createAnonymousClass
    :   createNewObject dup thisInstance;

fragment invokeStatementArguments: invokeStatementArgument*;

fragment invokeStatement: getStaticField? invokeStatementArguments invokeMethod;    

fragment
invokeMethod
    : invokeInstanceMethod
    | invokeVirtualMethod
    | invokeStaticMethod
    ;

fragment
invokeInstanceMethod
    :   'invokespecial' INT;

fragment
invokeVirtualMethod
    :   'invokevirtual' INT;    

fragment
invokeStaticMethod
    :   'invokestatic' INT;

fragment
newArrayStatement
    :   'newarray' simpleType;

fragment
setFieldInObject
    :   'putfield' INT;

fragment setStaticFieldInClass
    :   'putstatic' INT;

fragment
simpleType
    :   ('boolean'|'byte'|'char'|'double'|'float'|'int'|'long'|'short');

fragment
returnVoid
    :    'return';
fragment
returnSimpleType
    :   returnReference
    | returnDouble
    | returnFloat
    | returnInteger
    | returnLong;

fragment
returnReference
    :    'areturn';
fragment
returnDouble
    :   'dreturn';
fragment returnFloat
    :   'freturn';
fragment returnInteger
    :   'ireturn';
fragment returnLong
    :   'lreturn';  

fragment
returnStatement
    :   returnVoid 
    | constantExpr returnSimpleType;    

fragment
dupX1
    :   'dup_x1';

fragment
dup
    :   'dup';  

fragment
storeStatement
    : storeReferenceIntoLocalVariable 
    | storeIntIntoLocalVariable
    | setStaticFieldInClass
    | storeIntoReferenceArray
    | setFieldInObject;

fragment
convertDouble
    :   convertDoubleToFloat | convertDoubleToInt | convertDoubleToLong;

fragment
convertDoubleToFloat
    :   'd2f';

fragment
convertDoubleToInt
    :   'd2i';

fragment
convertDoubleToLong
    :   'd2l';

fragment
convertFloat
    :   convertFloatToDouble|convertFloatToInt|convertFloatToLong;

fragment
convertFloatToDouble
    :   'f2d';
fragment
convertFloatToInt
    :   'f2i';
fragment
convertFloatToLong
    :   'f2l';  

fragment
convertInt
    :   convertIntToByte
    |convertIntToChar
    |convertIntToDouble
    |convertIntToFloat
    |convertIntToLong
    |convertIntToShort;

fragment
convertIntToByte
    :   'i2b';

fragment
convertIntToChar
    :   'i2c';

fragment
convertIntToDouble
    :   'i2d';

fragment
convertIntToFloat
    :   'i2f';

fragment
convertIntToLong
    :   'i2l';

fragment
convertIntToShort
    :   'i2s';

fragment
branchComparison
    :branchIfReferenceComparison
    |branchIfIntComparison
    |branchIfIntComparisonWithZero
    |branchIfReferenceNotNull
    |branchIfReferenceNull; 

fragment
branchIfReferenceComparison
    :   'if_acmp' condType;

fragment
branchIfIntComparison
    :   'if_icmp' condType INT;

fragment
branchIfIntComparisonWithZero
    :   (IFEQ|IFGE|IFGT|IFLE|IFLT|IFNE) INT;

fragment
gotoStatement
    :   'goto' INT;

fragment
ifStatementCompare
    :   (IFEQ INT)
    |   (IFNE INT);

fragment
ifStatement
    :   booleanExpression ifStatementCompare;

fragment
ifType  : 'ifeq'
 |'ifne'
 |'iflt'
 |'ifge'
 |'ifgt'
 |'ifle';

fragment
branchIfReferenceNotNull
    :   'ifnonnull' ;

fragment
branchIfReferenceNull
    :   'ifnull';

fragment
condType:   'eq'
 |'ne'
 |'lt'
 |'ge'
 |'gt'
 |'le';

fragment
checkCast
    :   'checkcast' INT;

fragment
createNewArrayOfReference
    :   constantExpr 'anewarray' INT;

fragment
createNewObject
    :   'new' INT;

fragment
assignmentStatement
//  : pushItemFromRuntimeConstantPool storeStatement
    : (constantExpr)+ storeStatement
    | invokeInheritedConstructor
    | expressionStatement
//  | setAssertionStatus
    ;

fragment
invokeInheritedConstructor
    :   loadReferenceFromLocalVariable invokeInstanceMethod;

fragment
throwExceptionOrError
    :   'athrow';

fragment
getStaticField
    :   'getstatic' INT;

fragment
newInstance
    :   'new' INT;

fragment // this needs to be extended to recognize more patterns
booleanExpression
    :   integerComparison
    | loadIntFromLocalVariable
    | invokeMethod;

fragment
integerComparison
    : loadIntFromLocalVariable loadIntFromLocalVariable branchIfIntComparison;  

fragment assertIfAssertEnabled: getStaticField branchIfIntComparisonWithZero;

fragment assertCondition:booleanExpression branchIfIntComparisonWithZero;

fragment assertThrow:createNewObject dup assertMessage throwExceptionOrError;

fragment assertMessage:pushItemFromRuntimeConstantPool invokeMethod;

fragment assertStatement:assertIfAssertEnabled assertCondition assertThrow;

fragment
stringPlusNumber
    :pushItemFromRuntimeConstantPool invokeMethod 
 loadReferenceFromLocalVariable invokeMethod invokeMethod invokeMethod;

fragment expressionStatement:   statementExpression;

fragment
statementExpression 
    :   preIncrementExpression
    | preDecrementExpression
//  | postIncrementExpression
//  | postDecrementExpression
    | newByteArray
    | ternaryExpression
    | createAndStoreObject // assignment expression
    | createNewArrayStatement
    | fetchFieldFromObject
    ;

fragment
createNewArrayStatement // with elements
    :   createNewArrayOfReference createNewArrayInitElement+;

createNewArrayInitElement
    : (dup constantExpr getStaticField storeStatement);

fragment
createAndStoreObject
    :   createNewObject dup invokeStatement storeStatement;

fragment ternaryExpression // doesn't cover all situations yet
    : loadIntFromLocalVariable ifStatementCompare loadIntFromLocalVariable gotoStatement
    loadIntFromLocalVariable storeStatement;    

fragment preIncrementExpression: preIncrementInteger;

fragment preDecrementExpression: preDecrementFloat|preDecrementLong|preDecrementDouble; 

fragment doubleExpression: pushDoubleConstant;

fragment integerExpression: pushIntegerConstant;

fragment longExpression: pushLongConstant;

fragment floatExpression: pushFloatConstant;

fragment preIncrementInteger: loadReferenceFromLocalVariable dup fetchFieldFromObject integerExpression 
    iAdd dupX1? setFieldInObject;

fragment preDecrementDouble: loadDoubleFromLocalVariable doubleExpression dSub storeDoubleIntoLocalVariable;

fragment preDecrementLong: loadLongFromLocalVariable longExpression lSub storeLongIntoLocalVariable;

fragment preDecrementFloat: loadFloatFromLocalVariable floatExpression fSub storeFloatIntoLocalVariable;

fragment newByteArray: newByteArrayWithNull|newByteArrayWithData;

// byte[] b = {'c', 'h', 'u', 'a'};
fragment newByteArrayWithData:  constantExpr newArrayStatement byteArrayElements;

fragment byteArrayElements: constantExpr constantExpr storeIntoByteOrBooleanArray;  

fragment constantExpr: 
    //loadReferenceFromLocalVariable
    LOADREFERENCE
    |loadDoubleFromLocalVariable
    |loadFloatFromLocalVariable
    |loadIntFromLocalVariable
    |loadLongFromLocalVariable
    |pushByte
    |pushDoubleConstant
    |pushFloatConstant
    |pushIntegerConstant
    |pushItemFromRuntimeConstantPool
    |pushLongConstant
    |pushNull
    |fetchFieldFromObject
    ;

// byte[] c = null;
// String s = null;
fragment newByteArrayWithNull: pushNull (checkCast)? storeReference;

fragment thisInstance:  LOADREFERENCE invokeMethod;

fragment ternaryOperator
    :   ifStatementCompare pushIntegerConstant gotoStatement pushIntegerConstant setStaticFieldInClass;

fragment floatMultiply
    :   constantExpr constantExpr dMul;

fragment iAdd: 'iadd';      
fragment dSub: 'dsub';
fragment fSub: 'fsub';
fragment lSub: 'lsub';
fragment lAdd: 'ladd';  
fragment dMul: 'dmul'; 
```

例如，当前的语法（上述的进一步演变）可以转向

```
getstatic 25
ifne 25
iload_1
iload_2
if_icmpgt 25
new 25
dup
invokespecial 44
athrow
return 
```

进入

![在此处输入图像描述](../Images/d041c795148550fe888ec07328a9cc42.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:17:32.710

如果您只想识别单个 JVM 指令，那么语法可能没问题。您可能会花时间摆弄语法以获取正确的细节。这可能是简单的矫枉过正。字节操作码驱动的有限状态自动机 (FSA) 实现为巨型案例语句可能更容易；毕竟，JVM 指令*应该*很容易解码，以便半快速解释器可以执行这些指令。

根据模糊的回忆，类文件中还有其他部分（表格，例如文字）。您可能也可以使用解析器识别它们，但也可能会矫枉过正。

识别指令/表格信息后，您有第二个问题；解析器生成器倾向于帮助您构建某种 AST。这些指令不是 AST；它们至少是一个线性链，如果包含跳转目标，它们会形成一个引用表格的图表。所以我怀疑你最终会努力获得语义操作来以你想要的方式收集数据。

它是您可能想要捕获的图表。如果图具有某种层次结构（源自结构化编程语言），您可能希望发现该层次结构。解析器方法在这里没有任何贡献。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T10:14:16.767

这种方法存在识别参数嵌套的问题。

例如，给定声明，

```
int func1(int x, int y, int z) {
    return 0;
}

int func0() {
    return 0;
} 
```

和电话

```
Object[] x = new Object[func1(2, 3, 4)];
x = new Object[func0()];
x = new Object[func1(func1(func1(0, 1, 2), 3, 4), 5, 6)]; 
```

它生成以下字节码：

```
Offset  Instruction       Comments (Method: none)
0       aload_0           (cheewee.helloworld.test000031_applet this)
1       iconst_2
2       iconst_3
3       iconst_4
4       invokevirtual 79  (cheewee.helloworld.test000031_applet.func1)
7       anewarray 81      (java.lang.Object)
10      astore_1          (java.lang.Object[] x)
11      aload_0           (cheewee.helloworld.test000031_applet this)
12      invokevirtual 83  (cheewee.helloworld.test000031_applet.func0)
15      anewarray 81      (java.lang.Object)
18      astore_1          (java.lang.Object[] x)
19      aload_0           (cheewee.helloworld.test000031_applet this)
20      aload_0           (cheewee.helloworld.test000031_applet this)
21      aload_0           (cheewee.helloworld.test000031_applet this)
22      iconst_0
23      iconst_1
24      iconst_2
25      invokevirtual 79  (cheewee.helloworld.test000031_applet.func1)
28      iconst_3
29      iconst_4
30      invokevirtual 79  (cheewee.helloworld.test000031_applet.func1)
33      iconst_5
34      bipush 6
36      invokevirtual 79  (cheewee.helloworld.test000031_applet.func1)
39      anewarray 81      (java.lang.Object)
42      astore_1          (java.lang.Object[] x)
43      return 
```

它无法检测到涉及嵌套。我不确定这是否是 ANTLR 的限制，或者这是否是我学习如何编写 ANTLR 语法的限制。

下一步将使用混合方法，首先将字节码组简化为标记（以便将它们识别为更简单的模式），然后将其传递给解析器以检测更高级别的模式。

# php - 在 PDO 中实现 LIKE 查询

> ID：11117134
> 
> 赞同：44
> 
> 时间：2012-06-20T10:01:17.197
> 
> 标签：php, mysql, pdo, sql-like

我在 PDO 中实现 LIKE 时遇到问题

我有这个查询：

```
$query = "SELECT * FROM tbl WHERE address LIKE '%?%' OR address LIKE '%?%'";
$params = array($var1, $var2);
$stmt = $handle->prepare($query);
$stmt->execute($params); 
```

我检查了它们`$var1`，`$var2`它们包含我想要搜索的两个词，我的 PDO 工作正常，因为我的一些查询`SELECT` `INSERT`可以工作，只是我`LIKE`在 PDO 中不熟悉。

结果没有返回。my`$query`在语法上是否正确？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-20T10:06:14.260

您必须在 中包含`%`符号`$params`，而不是在查询中：

```
$query = "SELECT * FROM tbl WHERE address LIKE ? OR address LIKE ?";
$params = array("%$var1%", "%$var2%");
$stmt = $handle->prepare($query);
$stmt->execute($params); 
```

如果您查看之前代码中生成的查询，您会看到类似`SELECT * FROM tbl WHERE address LIKE '%"foo"%' OR address LIKE '%"bar"%'`的内容，因为准备好的语句在已引用的字符串中引用了您的值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-03T21:01:27.047

只需使用以下内容：

```
$query = "SELECT * FROM tbl WHERE address LIKE CONCAT('%', :var1, '%')
            OR address LIKE CONCAT('%', :var2, '%')";

$ar_val = array(':var1'=>$var1, ':var2'=>$var2);
if($sqlprep->execute($ar_val)) { ... } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T10:04:34.307

不，您不需要引用准备占位符。此外，在变量中包含 % 标记。

```
LIKE ? 
```

在变量中：`%string%`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-20T10:06:27.970

```
$query = "SELECT * FROM tbl WHERE address LIKE ? OR address LIKE ?";
$params = array("%$var1%", "%$var2%");
$stmt = $handle->prepare($query);
$stmt->execute($params); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T10:12:35.113

你可以看到下面的例子

```
$title = 'PHP%';
$author = 'Bobi%';
// query
$sql = "SELECT * FROM books WHERE title like ? AND author like ? ";
$q = $conn->prepare($sql);
$q->execute(array($title,$author)); 
```

希望它会奏效。

# c - int 和 argv 的比较

> ID：11117135
> 
> 赞同：1
> 
> 时间：2012-06-20T10:01:17.583
> 
> 标签：c, int, argv

在我的程序中，我将一个`int`值输入到`argv[1]`. 我需要这样`if`声明：

```
num = 3;    
if (argv[1] == num)
{
   [...]
} 
```

我收到警告：`comparison between pointer and integer [enabled by default]`
如何比较这两个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:05:55.260

请记住`argv`，传递给的`main`，是一个*字符串*数组。

`atoi`您可以使用or之类的函数将字符串转换为整数`strtol`（后者是首选）。或者您将整数转换为字符串，然后执行`strcmp`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:06:26.673

`num`是一个整数，而`argv[1]`是一个可能（或可能不）表示整数的字符串。您只能比较相同类型的项目，因此可以比较字符串到字符串或整数到整数：

```
if (strcmp(argv[1], "3") == 0) {
    // ...
} 
```

或者

```
if (atoi(argv[i]) == 3) {
    // ...
} 
```

当您尝试与零进行比较时，第二种方法将分崩离析（`atoi`返回零表示错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:03:53.857

命令行参数是字符串。您需要首先使用`atoi`（不建议）或`strtol`/ `strtoul`（更好，具有错误处理）转换这些字符串，然后使用转换后的值与您要比较的任何整数进行比较。

```
char *endptr;
errno = 0;
long int n = strtol(argv[ i ], &endptr, 10);
if (endptr == argv[2])
    ...;  /* no conversion */
else if (*endptr != '\0')
    ...;  /* conversion incomplete */
else if (errno == ERANGE)
    ...;  /* out of `long int''s range */
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T10:04:52.750

```
num = 3;    
if (atoi(argv[1]) == num)
{
   [...]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T10:03:41.390

您可能需要使用各种方法从 argv[1] 读取一个数字，然后与 num 进行比较。(s*scanf)

最适合您的一个：http: [//pubs.opengroup.org/onlinepubs/7908799/xsh/strtol.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strtol.html)

或者将 num 打印成字符串并使用 argv[1] (s*printf) 执行 strcmp

# nsis - NSIS 安装程序开始菜单目录

> ID：11117151
> 
> 赞同：2
> 
> 时间：2012-06-20T10:02:12.220
> 
> 标签：nsis

我有一个 NSIS 安装程序，它使用此代码硬编码了开始菜单文件夹...

```
Var SMDir ;Start menu folder
!insertmacro MUI_PAGE_STARTMENU 0 $SMDir

Section -StartMenu
  !insertmacro MUI_STARTMENU_WRITE_BEGIN 0
  CreateDirectory "$SMPrograms\MY Program\My Folder"
  CreateShortCut "$DESKTOP\My Program" "$INSTDIR\start.exe"
  CreateShortCut "$SMPROGRAMS\MY Program\My Shortcut.lnk" "$INSTDIR\start.exe"
  CreateShortCut "$SMPROGRAMS\My Program\Uninstall.lnk" "$INSTDIR\uninstall.exe" 
```

除了“选择开始菜单文件夹”之外，这一切都有效，它不允许我更改默认安装目录。

有没有办法解决这个问题，或者我怎样才能跳过这个页面但仍然触发 StartMenu 部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:48:48.460

如果您根本不想要开始菜单选择页面，只需删除该部分中`!insertmacro MUI_PAGE_STARTMENU ...`的两个`!insertmacro MUI_STARTMENU_*`宏`-StartMenu`。

如果要允许用户选择目录，则必须使用变量而不是硬编码路径：

```
outfile test.exe
name "SM Test"
requestexecutionlevel user ;Single user/"Just me" installer

!define MUI_COMPONENTSPAGE_NODESC
!include mui2.nsh

Var SMDir ;Start menu folder
!insertmacro MUI_PAGE_COMPONENTS
;!define MUI_STARTMENUPAGE_DEFAULTFOLDER "MY Program" ;Default, name is used if not defined
!insertmacro MUI_PAGE_STARTMENU 0 $SMDir
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE English

Section -StartMenu
!insertmacro MUI_STARTMENU_WRITE_BEGIN 0 ;This macro sets $SMDir and skips to MUI_STARTMENU_WRITE_END if the "Don't create shortcuts" checkbox is checked... 
CreateDirectory "$SMPrograms\$SMDir"
CreateShortCut "$SMPROGRAMS\$SMDir\Myapp.lnk" "$INSTDIR\start.exe"
!insertmacro MUI_STARTMENU_WRITE_END
SectionEnd

Section "Desktop Shortcut"
CreateShortCut "$DESKTOP\Myapp.lnk" "$INSTDIR\start.exe"
SectionEnd 
```

（如果您以管理员身份安装，那么您应该`SetShellVarContext all`在访问 $SMPrograms 之前调用，并且您可能不应该创建桌面快捷方式）

# java - 如何在 iText 5.2.1 中添加标题？

> ID：11117154
> 
> 赞同：3
> 
> 时间：2012-06-20T10:02:16.917
> 
> 标签：java, itext

我使用 iText 5.2.1 并且我已经创建了 Document 对象。

像这样：

```
document.addHeader("hello"); 
```

为什么我在 PDF 文件上看不到标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:31:40.107

使用页面事件。StackOverflow 上已经提供了许多好的答案，例如[this one](https://stackoverflow.com/a/5072468/1065525)或[this other one](https://stackoverflow.com/a/9175638/1065525)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-16T12:14:29.000

```
try {
        Document document = new Document();
        PdfWriter.getInstance(document, new FileOutputStream("FicheClient.pdf"));
        document.open();
        document.add(new Paragraph("hello World",FontFactory.getFont(FontFactory.TIMES_BOLD,20,Font.BOLD,BaseColor.BLACK)));
        document.add(new Paragraph("---------------------------------------"));
        document.close();
        JOptionPane.showMessageDialog(null, "Raport saved ");
    } catch (Exception e) {
    } 
```

# python - Python 类中的 unicode(self) 和 self.__unicode__() 有什么区别？

> ID：11117156
> 
> 赞同：3
> 
> 时间：2012-06-20T10:02:26.293
> 
> 标签：python, class, unicode

在处理 unicode 问题时，我发现`unicode(self)`并`self.__unicode__()`有不同的行为：

```
#-*- coding:utf-8 -*-
import sys
import dis
class test():
    def __unicode__(self):
        s = u'中文'
        return s.encode('utf-8')

    def __str__(self):
        return self.__unicode__()
print dis.dis(test)
a = test()
print a 
```

上面的代码可以正常工作，但是如果我更改`self.__unicode__()`为`unicode(self)`，它将显示错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe4 in position 0: ordinal not in range(128) 
```

有问题的代码是：

```
#-*- coding:utf-8 -*-
import sys
import dis
class test():
    def __unicode__(self):
        s = u'中文'
        return s.encode('utf-8')

    def __str__(self):
        return unicode(self)
print dis.dis(test)
a = test()
print a 
```

很好奇python如何处理这个问题，我尝试了dis模块但没有看到太多区别：

```
Disassembly of __str__:
 12           0 LOAD_FAST                0 (self)
              3 LOAD_ATTR                0 (__unicode__)
              6 CALL_FUNCTION            0
              9 RETURN_VALUE 
```

**VS**

```
Disassembly of __str__:
 10           0 LOAD_GLOBAL              0 (unicode)
              3 LOAD_FAST                0 (self)
              6 CALL_FUNCTION            1
              9 RETURN_VALUE 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:14:12.930

你`bytes`从你的`__unicode__`方法返回。

说清楚：

```
In [18]: class Test(object):
    def __unicode__(self):
        return u'äö↓'.encode('utf-8')
    def __str__(self):
        return unicode(self)
   ....:     

In [19]: class Test2(object):
    def __unicode__(self):
        return u'äö↓'
    def __str__(self):
        return unicode(self)
   ....:     

In [20]: t = Test()

In [21]: t.__str__()
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
/home/dav1d/<ipython-input-21-e2650f29e6ea> in <module>()
----> 1 t.__str__()

/home/dav1d/<ipython-input-18-8bc639cbc442> in __str__(self)
      3         return u'äö↓'.encode('utf-8')
      4     def __str__(self):
----> 5         return unicode(self)
      6 

UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: ordinal not in range(128)

In [22]: unicode(t)
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
/home/dav1d/<ipython-input-22-716c041af66e> in <module>()
----> 1 unicode(t)

UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: ordinal not in range(128)

In [23]: t2 = Test2()

In [24]: t2.__str__()
Out[24]: u'\xe4\xf6\u2193'

In [25]: str(_) # _ = last result
---------------------------------------------------------------------------
UnicodeEncodeError                        Traceback (most recent call last)
/home/dav1d/<ipython-input-25-3a1a0b74e31d> in <module>()
----> 1 str(_) # _ = last result

UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-2: ordinal not in range(128)'

In [26]: unicode(t2)
Out[26]: u'\xe4\xf6\u2193'

In [27]: class Test3(object):
def __unicode__(self):
    return u'äö↓'
def __str__(self):
    return unicode(self).encode('utf-8')
....:     

In [28]: t3 = Test3()

In [29]: t3.__unicode__()
Out[29]: u'\xe4\xf6\u2193'

In [30]: t3.__str__()
Out[30]: '\xc3\xa4\xc3\xb6\xe2\x86\x93'

In [31]: print t3
äö↓

In [32]: print unicode(t3)
äö↓ 
```

`print a`或者在我的情况下，`print t`将调用`t.__str__`which es expected to return`bytes`你让它返回`unicode`，因此它会尝试对其进行编码，`ascii`这将不起作用。

简单修复：让`__unicode__`返回 unicode 和`__str__`字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:38:01.047

```
s = u'中文'
return s.encode('utf-8') 
```

这将返回一个非 Unicode 字节字符串。这就是`encode`正在做的事情。utf-8 并不是一个能神奇地将数据变成 Unicode 的东西；如果有的话，它是相反的 - 一种以字节（数据，或多或少）表示 Unicode（抽象）的方式。

我们在这里需要一些术语。**编码**就是获取一个 Unicode 字符串并使用某种编码制作一个表示它*的字节字符串。***解码**是相反的：获取一个字节字符串（我们认为它编码一个 Unicode 字符串），并使用指定的编码将其*解释为 Unicode 字符串。*

当我们编码为一个字节字符串然后使用相同的编码进行解码时，我们得到了原始的 Unicode。

`utf-8`是一种可能的编码。还有很多很多。

有时 Python 会`UnicodeDecodeError`在你调用`encode`. 为什么？因为你尝试`encode`一个字节串。此过程的正确输入是 Unicode 字符串，因此 Python “有帮助”`decode`首先尝试将字节字符串转换为 Unicode。但它不知道要使用什么编解码器，所以它假设`ascii`. 在可以接收各种数据的环境中，此编解码器是最安全的选择。它只报告字节 >= 128 的错误，这些错误在各种 8 位编码中以无数种不同的方式进行处理。（还记得在过去尝试将带有字母的 Word 文件`é`从 Mac 导入 PC 或反之亦然吗？你会在另一台计算机上得到一些其他奇怪的符号，因为平台内置编码不同.)

让事情变得更复杂的是，在 Python 2 中`encode`/`decode`机制还用于实现一些与解释 Unicode 无关的其他简洁的东西。例如，有一个 Base64 编码器，以及一个自动处理字符串转义序列的东西（即，它会将反斜杠，后跟字母 't' 更改为制表符）。其中一些会**从**一个字节串“编码”或“解码”到一个字节串，或者从 Unicode 到 Unicode。

（**顺便说一句，这一切都完全不同 - 更清楚的是，恕我直言 - 在 Python 3 中。**）

类似地，当`__unicode__`返回一个字节字符串（它**不应该**，作为一种风格）时，Python`unicode()`内置函数会自动将其解码为`ascii`; 当`__str__`返回一个 Unicode 字符串（它**也不应该**）时，`str()`会将其编码为`ascii`. 这发生在幕后，在您无法控制的代码中。但是，您可以修复`__unicode__`并`__str__`执行他们应该执行的操作。

（实际上，您可以`unicode`通过传递第二个参数来覆盖 的编码。但是，这是错误的解决方案，因为您应该已经从 . 返回了一个 Unicode 字符串`__unicode__`。并且`str`不采用编码参数，所以您是运气不好。）

所以，现在我们可以解决问题了。

问题：我们想要`__unicode__`返回 Unicode 字符串`u'中文'`，并且我们想要`__str__`返回它的`utf-8`-encoded 版本。

解决方案：直接在中返回该字符串`__unicode__`，并在中显式地进行编码`__str__`：

```
class test():
    def __unicode__(self):
        return u'中文'

    def __str__(self):
        return unicode(self).encode('utf-8') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:19:02.917

当您调用`unicode`Python 对象时，输出是您传递给该`unicode`方法的参数的 unicode 表示形式。

由于您尚未指定应使用哪种编码，因此您会收到一个错误，即无法仅使用 ASCII 来表示参数。

当您使用时，`__unicode__`您指定应该使用 utf-8 来编码该字符串，这是正确的并且没有问题。

您可以使用所需的编码作为该`unicode`方法的第二个参数，例如：

```
unicode( str, "utf-8" ) 
```

这应该与您的`__unicode__`方法相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:19:30.123

当您定义`__unicode__`特殊方法时，您告诉它使用什么编码。当您简单地调用时`unicode`，您没有指定编码，因此 Python 使用默认的“ascii”。

顺便说一句，`__str__`应该返回一串字节，而不是 unicode。并且`__unicode__`应该返回 unicode，而不是字节字符串。所以这段代码是倒退的。由于它没有返回 unicode，因此 Python 可能正在尝试使用默认编码对其进行转换。

# java - 具有无序变量功能的 Java 公式评估库

> ID：11117158
> 
> 赞同：10
> 
> 时间：2012-06-20T10:02:41.623
> 
> 标签：java, parsing, math, formula

我目前正在寻找用于公式解析和评估的 Java 库（或带有 Java API 的本机库）。

使用此处的建议，我查看了许多库：

*   J公式
*   杰瓦尔
*   辛贾
*   杰普

但它们都不能满足我的需求，即：

*   具有相互依赖关系的多个公式评估（公式始终是对使用其他变量或数值的变量的影响）
*   可能仅更改 50 个公式中的一个，如果仅更改一个公式，则具有良好的性能
*   无需手动处理变量依赖
*   如果公式发生变化，自动更新其他因变量
*   可以监听哪个变量发生了变化
*   无需为变量指定特定格式（用户将直接输入名称并且不想使用复杂的符号）

也许举个例子会更好。假设我们已经按以下顺序输入了系统：

*   a = b + c
*   c = 2 * d
*   b = 3
*   d = 2

我希望能够按此顺序输入这 4 行，并询问“a”（或“b”等）的结果。那么如果在用户界面（基本上是一个表变量<>公式）“b”改为“2 * d”，库会自动改变“b”和“a”的值，并返回我（或午餐an事件或调用函数）更改列表

最好的库就像 JEP 一样，但具有无序变量功能和自动评估因变量的可能性

我知道编译器和电子表格软件使用这种机制，但我没有发现任何可直接使用的 java 或 java 兼容库

有人知道吗？

编辑：精度：问题实际上是关于一个库，或者最终是一组库链接在一起。问题是针对公司的一个项目，其想法是花费最少的时间。“自己动手”的解决方案已经估计过了，不在问题的范围内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:38:36.953

对于我还需要一个简单的公式解析器的项目，我使用了文章词法分析，第 2 部分：在 javaworld.com 中[构建应用程序的代码。](http://www.javaworld.com/jw-02-1997/jw-02-indepth.html?page=1)它既简单又小（7 类），您可以根据自己的需要进行调整。

[您可以在此处](http://www.mcmanis.com/~cmcmanis/java/javaworld/)下载源表单（搜索“词法分析第二部分”条目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:09:10.983

我会嵌入[Groovy](http://groovy.codehaus.org/)，请参阅关于嵌入的[教程](http://groovy.codehaus.org/Embedding+Groovy)。[Freeplane](http://en.wikipedia.org/wiki/Freeplane)（一个 Java Mindmapper）也使用 Groovy 来制作公式。

每当变量发生变化时，您都必须将新值放入绑定中。所有单元格代码都应作为单个代码段提供给 Groovy Shell。您可以通过[BindPath](http://groovy.codehaus.org/gapi/org/codehaus/groovy/binding/BindPath.html)注册更改。

无论如何，我假设您必须实现一个薄层来满足您的要求：

*   无需手动处理变量依赖
*   可以监听哪个变量发生了变化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T19:13:54.977

你也可以检查这些链接......

*   MathPiper（Java Yacas 版本的 Java 分支）（有自己的基于 jEdit 的编辑器）（GPL）[http://code.google.com/p/mathpiper/](http://code.google.com/p/mathpiper/)

*   Symja/Matheclipse（我自己的项目，使用 JAS 和 Commons Math 库）（LGPL）[http://krum.rz.uni-mannheim.de/jas/](http://krum.rz.uni-mannheim.de/jas/)

*   Java 代数系统 (JAS) (LGPL) [http://krum.rz.uni-mannheim.de/jas/](http://krum.rz.uni-mannheim.de/jas/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:04:14.013

你为什么不自己写呢？您对该任务复杂性的评估可能是错误的。这比你想象的要容易得多——很可能，学习如何处理任何 3rd 方库比从头开始实现这样一个微不足道的事情需要更多的努力。在最坏的情况下，它不应该超过几个小时。

寻找 3rd 方库来做简单的事情没有任何意义（我知道，它是 Java 精神的一部分，但仍然......）

我建议您查看[Cells](http://common-lisp.net/project/cells/)库以获取灵感。它在 Common Lisp 中，但想法足够基本，可以转移到其他任何地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T13:57:45.910

不知道任何图书馆。

假设您拥有的是一组方程，方程的至少一侧有一个变量（不允许 A+B=CD） *并且**没有*循环，（例如，A=B+1；B=A-2），您在技术上需要做的是构建一个数据流图，显示每个运算符如何依赖于其操作数。对于无副作用的方程（例如纯数学），这很容易；您最终会得到一个有向无环图（具有表示共享子表达式的共享子树的森林）。然后，如果变量的值发生了变化，或者引入了新的公式，则修改 dag 并重新评估更改的部分，将更改沿 dag 传播到 dag 根。因此，您需要为表达式构建树，然后共享它们（通常通过对子树进行散列以找到潜在的等效候选者）。所以，大量的结构操作来保持 dag（并且是根值）

但是，如果它只有 50 个变量的复杂性，它会起作用，你可以简单地重新评估它们。如果您将表达式存储为树（或者更好的是，反向抛光），您可以非常快速地评估每棵树，并且您无需支付任何开销来使所有这些数据结构保持最新。

如果您有数百个方程，则 dag 方案可能要好得多。

如果你有*约束*方程（例如，你没有限制两边可以有什么），你就脱离了电子表格范式，进入了约束求解器，这是一项复杂得多的技术。

# java - 没有可用于接口 List 和 MIME 媒体类型 application/json UTF-8 的阅读器

> ID：11117162
> 
> 赞同：1
> 
> 时间：2012-06-20T10:02:54.790
> 
> 标签：java, jersey, jackson

我进行了 REST 调用，我想取回包含 MyClass 对象列表的 json。实际上我得到了这个例外：

> {"error":"Java 类 java.util.List 和 Java 类型接口 java.util.List 和 MIME 媒体类型 application/json 的消息正文阅读器；未找到 charset=UTF-8","type" :"com.sun.jersey.api.client.ClientHandlerException","stackTrace":"com.sun.jersey.api.client.ClientHandlerException：Java 类 java.util.List 和 Java 类型接口 java 的消息体阅读器.util.List 和 MIME 媒体类型 application/json；未找到 charset=UTF-8\n\tat com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:550)\n\tat com .sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:506)\n\tat com.sun.jersey.api.client.WebResource.handle(WebResource.java:684)\n\tat com.sun .jersey.api.client.WebResource.access$200(WebResource.java:74)\n\tat com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:507)\n\tat ..[更多堆栈跟踪]..}

代码是：

```
public List<'MyClass> getLIst()
{

ClientConfig config = new DefaultClientConfig();
config.getClasses().add(MyObjectMapper.class);
Client client = Client.create(config);

WebResource resource = client.resource(HOST_PATH).path(PATH).type(MediaType.APPLICATION_JSON_TYPE).accept(MediaType.APPLICATION_JSON_TYPE);

return resource.get(List.class);
}

@XmlRootElement
public class MyClass
{ ... } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T10:13:04.777

是的，由于 Java 中的类型擦除，Jersey 看不到列表的类型。您应该如下更改 getList() 方法的最后一行：

```
return resource.get(new GenericType<List<MyClass>>() {}); 
```

然后它应该工作。

# ios - PHP推送通知服务，反馈为空

> ID：11117163
> 
> 赞同：1
> 
> 时间：2012-06-20T10:02:54.760
> 
> 标签：ios, push-notification, apple-push-notifications, push, feedback

推送工作得很好，问题是反馈是空的。我需要删除已过期或状态无效的令牌。这是我的推送代码：

```
// Push code example
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', $certificateName);
//stream_context_set_option($ctx, 'ssl', 'verify_peer', false);
//stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err,$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp) {
    exit("Failed to connect: $err $errstr" . PHP_EOL);
}

// Create the payload body
$body['aps'] = array(
    'alert' => $message,
    'sound' => 'default'
);

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result) {
    echo '<p>The message has not been sent '. PHP_EOL;
} else {
    echo '<p>The message has been sent  ' . PHP_EOL;
}

// Close the connection to the server
fclose($fp); 
```

对于我尝试过的反馈代码 1。

```
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', $certificateName);
stream_context_set_option($ctx, 'ssl', 'verify_peer', false);
// assume the private key passphase was removed.
// stream_context_set_option($ctx, 'ssl', 'passphrase', $pass);

$fp = stream_socket_client('ssl://feedback.sandbox.push.apple.com:2196', $error, $errorString, 60, STREAM_CLIENT_CONNECT, $ctx);
// production server is ssl://feedback.push.apple.com:2196

if (!$fp) {
    //echo "Failed to connect feedback server: $err $errstr\n";
    return;
} else {
  // echo "Connection to feedback server OK\n";
}

echo "APNS feedback results\n";
while ($devcon = fread($fp, 38)) {
    $arr = unpack("H*", $devcon); 
    $rawhex = trim(implode("", $arr));
    $feedbackTime = hexdec(substr($rawhex, 0, 8)); 
    $feedbackDate = date('Y-m-d H:i', $feedbackTime); 
    $feedbackLen = hexdec(substr($rawhex, 8, 4)); 
    $feedbackDeviceToken = substr($rawhex, 12, 64);
    echo "TIMESTAMP:" . $feedbackDate . "\n";
    echo "DEVICE ID:" . $feedbackDeviceToken. "\n\n";
}
fclose($fp); 
```

结果是空的。

2\. // 设置默认时区 date_default_timezone_set('Europe/Bucharest');

```
// Report all PHP errors
error_reporting(-1);

// Using Autoload all classes are loaded on-demand
//require_once 'ApnsPHP/Autoload.php';
$feedback = new ApnsPHP_Feedback(
    ApnsPHP_Abstract::ENVIRONMENT_SANDBOX,
    $certificateName
);

// Connect to the Apple Push Notification Feedback Service
$feedback->connect();

$aDeviceTokens = $feedback->receive();
if (!empty($aDeviceTokens)) {
    var_dump($aDeviceTokens . '<br><br>');
}

// Disconnect from the Apple Push Notification Feedback Service
$feedback->disconnect(); 
```

也有一个空的结果

3.

// 创建上下文流 $stream_context = stream_context_create();

```
stream_context_set_option($stream_context, 'ssl', 'local_cert', $certificateName);
stream_context_set_option($streamContext, 'ssl', 'verify_peer', false);
$apns = stream_socket_client('ssl://feedback.sandbox.push.apple.com:2196', $errcode, $errstr, 60, STREAM_CLIENT_CONNECT, $stream_context);
if (!$apns) {
    echo "ERROR $errcode: $errstr\n";
} else {
    $feedback_tokens = array();
    //and read the data on the connection:
    while (!feof($apns)) {
        $data = fread($apns, 38);
        if (strlen($data)) {
            $feedback_tokens[] = unpack("N1timestamp/n1length/H*devtoken", $data);
        }
    }
    var_dump($feedback_tokens); 
```

也有一个空的结果....请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:45:20.547

Apple 沙盒反馈服务器似乎没有返回非活动令牌，尽管生产环境似乎工作正常。
看看这个线程：[Apple Push Notification Feedback Service - 它检查的频率](https://stackoverflow.com/questions/2882293/apple-push-notification-feedback-service-how-frequently-does-it-check)

Suggested solution is to have two development apps on your device and then to delete one. The deleted one should appear in the list of inactive tokens.

# asp.net - 如何处理 ASP.NET 中未处理的线程异常？

> ID：11117167
> 
> 赞同：8
> 
> 时间：2012-06-20T10:03:04.527
> 
> 标签：asp.net, .net, multithreading, exception, unhandled-exception

**ASP.NET 应用程序应该如何处理在非请求后台线程（由于错误）上发生的未处理异常？**

默认情况下，此类异常会导致进程终止。**这在 ASP.NET 工作进程的设置中是不可接受的，**因为并发运行的请求会意外中止。这也是一个性能问题。

请求线程上的异常不是问题，因为 ASP.NET 会处理它们（通过显示错误页面）。

该`AppDomain.UnhandledException`事件允许观察发生了异常，但此时无法阻止终止。

这是一个需要粘贴到 ASPX 页面代码隐藏中的重现。

```
protected void Page_Load(object sender, EventArgs e)
{
    var thread = new Thread(() =>
        {
            throw new InvalidOperationException("some failure on a helper thread");
        });
    thread.Start();
    thread.Join();
} 
```

我知道的唯一解决方案是永远不要让异常“逃脱”未处理。有没有其他更全面、更彻底的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:17:11.477

Rx（Reactive Programming）就是为了解决这样的问题而生的，试着考虑改变你现在使用的框架，换成 Rx

[http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

掘金包：

[https://nuget.org/packages/Rx-Main/1.0.11226](https://nuget.org/packages/Rx-Main/1.0.11226)

这是等效的 Rx 代码：

```
 var o = Observable.Start(() => { throw new NotImplementedException(); });

        o.Subscribe(
            onNext => { },
            onError => { },
            () => { Console.WriteLine("Operation done"); }); 
```

*如您所见，当您为错误指定处理程序*时，错误不会转义后台线程，`onError => { }`

如果您不指定错误处理程序，则会传播异常：

```
 o.Subscribe(
            onNext => { },
            () => { Console.WriteLine("Operation done"); }); 
```

在上面的示例中，异常将被传播，并会导致与您发布的代码相同的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T19:35:45.693

您可以将异常标记为在未处理的异常处理程序中处理。 [https://msdn.microsoft.com/en-us/library/system.windows.applicationunhandledexceptioneventargs.handled(v=vs.95)](https://msdn.microsoft.com/en-us/library/system.windows.applicationunhandledexceptioneventargs.handled(v=vs.95))

这应该会阻止工作进程由于后台线程上的错误而回收。

不过，您不会对所有例外情况都这样做。只有您知道的可以安全地忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T06:18:06.427

我认为“legacyUnhandledExceptionPolicy”选项是您的答案。

导致 ASP.NET 在 .NET 2.0 中崩溃的未处理异常；[http://blogs.msdn.com/b/tom/archive/2007/12/04/unhandled-exceptions-causing-asp-net-to-crash-in-net-2-0.aspx](http://blogs.msdn.com/b/tom/archive/2007/12/04/unhandled-exceptions-causing-asp-net-to-crash-in-net-2-0.aspx)

# iphone - 如何在通用应用程序中创建新的 UIViewController

> ID：11117175
> 
> 赞同：1
> 
> 时间：2012-06-20T10:03:36.980
> 
> 标签：iphone

我正在开发一个应用程序。我正在使用基于单一视图的应用程序模型创建通用应用程序。所以，我需要创建一个新类。但是，它只提供一个 xib。我需要两个适用于 iPhone 和 iPad 的 xib。请告诉我如何为一个类创建两个 xib。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:08:46.430

创建一个具有相同名称的新 .. 假设您的视图控制器名称是“NewViewController” .. 您的 xib 将`NewViewController~ipad`用于 iPad 和`NewViewController~iPhone`iphone .. 所以当您实现时，`initWithNibName`只需为您编写 xib 的基本名称，`NewViewController`即iOS 将根据当前使用的平台调用匹配 xib .. 并且不要忘记将新 xib 中的文件所有者的自定义类分配为您的新类，如下图所示。

![在此处输入图像描述](../Images/15c85fc5fa96e835515cd265b0945b28.png)

**对于创建新的 xib，检查这些图像：**

![在此处输入图像描述](../Images/a13fba6191b0f86ffa5022167a146485.png)

![在此处输入图像描述](../Images/28b11e31c7a2c20c4f868589a0e3102f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T03:23:40.250

Malek_Jundi 有一个关于如何为 iphone 和 ipad 创建和加载 .nib 文件的清晰指南。

如果要为每种情况（iphone 或 ipad）创建不同的类，可以使用 IF 语句，如下所示：

```
UIViewController *target;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    target = [[NewViewController alloc] initWithNibName:@"NewViewController" bundle:[NSBundle mainBundle]];
} else {
    target = [[NewViewController_ipad alloc] initWithNibName:@"NewViewController" bundle:[NSBundle mainBundle]];
} 
```

但是我懒得在我的代码中重复输入“IF”语句来为iphone/ipad创建特定的类。我有另一种方法：

```
- (Class)idiomClassWithName:(NSString*)className
{
    Class ret;
    NSString *specificName = nil;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        specificName = [[NSString alloc] initWithFormat:@"%@_ipad", className];
    } else {
        specificName = [[NSString alloc] initWithFormat:@"%@_iphone", className];
    }
    ret = NSClassFromString(specificName);
    if (!ret) {
        ret = NSClassFromString(className);
    }
    return ret;
}

- (void)createSpecificNewController
{
    Class class = [self idiomClassWithName:@"NewViewController"];
    UIViewController *target = [[class alloc] initWithNibName:@"NewViewController" bundle:[NSBundle mainBundle]];
    //...
} 
```

# xml - PHPStorm 中的 ZenCoding：如何使 XML 标签自动关闭？

> ID：11117179
> 
> 赞同：3
> 
> 时间：2012-06-20T10:03:57.180
> 
> 标签：xml, phpstorm, emmet

我在我的 XML 文档中使用 PHPStorm 中类似于 Zen 编码的东西。我觉得它非常有用。

唯一的一点是，我写的大部分标签都应该是短（自闭合）标签。然而，默认情况下，Zen 创建长（开始和结束）标签。在处理 HTML 时，Zen 智能地知道哪些标签应该长或短（即`br`扩展为. `<br />`，而`div`扩展为`<div></div>`.

我的大部分元素都可以写成长标签和短标签，我的偏好取决于我是否希望该节点有孩子。我怎样才能明确地描述一个标签应该扩展为一个短（自关闭）标签还是一个长（打开+关闭）标签？

// 编辑：没人？我已经在互联网上看了很多，到目前为止没有任何乐趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:29:54.320

我不确定 XML，但我设法更改了 HTML，`<img>`例如`<img />`. 您可以在“设置 > 实时模板”中进行设置，然后选择 ZEN HTML、ZEN CSS 或 ZEN XSL 来编辑您想要的任何内容。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T14:40:33.590

试试这个[http://blog.kaelig.fr/post/23222600612/zen-coding-en-xhtml5-sous-sublime-text-2](http://blog.kaelig.fr/post/23222600612/zen-coding-en-xhtml5-sous-sublime-text-2) 我有同样的问题，我改变了它，它适用于 HTML 5 :)

在第 220 行的 editor.py 中使用此代码

```
if view.match_selector(pos, 'text.html'):
    if 'xhtml' in view.substr(sublime.Region(0, 1000)).lower():
        return 'xhtml'
    else:
        return 'xhtml'
else:
    return 'plain' 
```

# javascript - 如何仅在第一次加载页面时设置弹出窗口？

> ID：11117194
> 
> 赞同：0
> 
> 时间：2012-06-20T10:04:56.510
> 
> 标签：javascript, jquery

如何设置第一次加载页面时打开的弹出窗口？我将此代码用于我的弹出窗口如何设置此弹出窗口的会话？有什么方法可以使用 ip 作为会话？

```
 <script>
        !window.jQuery && document.write('<script src="fancybox/jquery-1.4.3.min.js"><\/script>');
    </script>

    <script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.pack.js"></script>   

    <script type="text/javascript">

    $(document).ready(function() {

        $("a#example1").fancybox();

        $("a#example1").trigger('click');

    });
    </script>

    <link rel="stylesheet" type="text/css" href="fancybox/jquery.fancybox-1.3.4.css" media="screen" />

</head>

<body>

<a id="example1" href="images/pic.jpg"></a> 

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:07:22.377

检查cookie，如果不存在，则弹出并设置cookie以供下次使用；如果 cookie 在那里，不要弹出。Quirksmode 有[一些](http://www.quirksmode.org/js/cookies.html)使 cookie 更容易的功能，当然还有[jQuery cookie 插件](http://archive.plugins.jquery.com/project/Cookie)（可能还有大约 50 个其他插件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:07:41.750

你可以使用[jquery-cookie](https://github.com/carhartl/jquery-cookie)

演示：

```
$(document).ready(function() {
       if($.cookie('popup') != 1){
           $.cookie('popup', '1');
           $("a#example1").fancybox();
           $("a#example1").trigger('click');
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:08:48.770

为此使用会话将对您的服务器造成不必要的负担。请改用 cookie，这有助于将数据存储在用户的计算机中。

使用 Javascript/您的服务器语言检查 cookie 并根据其值显示弹出窗口！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-30T06:32:17.393

You can you Cookies or localStorage Using Cookies:

```
$(document).ready(function() {
var loadfirst = getCookie("loadfirsttime");
if(loadfirst == null){
setCookie("loadfirst", "again" 1); // 1 is the number of days
$("a#example1").fancybox();
 $("a#example1").trigger('click');
}
}); 
```

Using LocalStorage:

```
$(document).ready(function() {
 var loadfirst = localStorage.getItem("loadfirsttime");
if(loadfirst == null){
localStorage.setItem('loadfirst ', 1); // 1 is value assigned.
$("a#example1").fancybox();
 $("a#example1").trigger('click');
}
}); 
```

Thanks

# jquery - 让元素按顺序跳动

> ID：11117200
> 
> 赞同：1
> 
> 时间：2012-06-20T10:05:28.177
> 
> 标签：jquery

我需要将每个名为 transparent.png 的图像依次脉动（或淡入、淡出）3 次，而不是像现在这样在同一时间。

transparent.png 位于每个图像的顶部并提供淡出效果。

我用：

*   jQuery 1.7.2
*   jQuery UI 1.8.21

这是我的代码：

```
jQuery('.transparent').each(function(index) {
    jQuery(this).effect("pulsate", {times:3}, 1000);
});

<div id="content">
    <a class="frontimage projectleft" href="?folder=/sculptures">
        <img width="200" title="" alt="" src="0054_46.jpg">
        <img width="200" title="" alt="" src="transparent.png" class="transparent" style="opacity: 1; display: block;">
    </a>
    <a class="frontimage projectleft" href="?folder=/furniture">
        <img width="200" title="" alt="" src="0076_20.jpg">
        <img width="200" title="" alt="" src="transparent.png" class="transparent" style="opacity: 1;">
    </a>
    <a class="frontimage projectright" href="?folder=/paintings">
        <img width="200" title="" alt="" src="156_52.jpg">
        <img width="200" title="" alt="" src="transparent.png" class="transparent" style="opacity: 1;">
    </a>
    <a class="frontimage projectleft" href="?folder=/sculptures">
        <img width="200" title="" alt="" src="174_36.jpg">
        <img width="200" title="" alt="" src="transparent.png" class="transparent" style="opacity: 1;">
    </a>
    <a class="frontimage projectleft" href="?folder=/furniture">
        <img width="200" title="" alt="" src="276_1.jpg">
        <img width="200" title="" alt="" src="transparent.png" class="transparent" style="opacity: 1;">
    </a>
    <a class="frontimage projectright" href="?folder=/paintings">
        <img width="200" title="" alt="" src="290_200076-01.jpg">
        <img width="200" title="" alt="" src="transparent.png" class="transparent" style="opacity: 1;">
    </a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:23:57.873

通常的方法是`effect()`在您提供给当前调用的回调中链接下一个调用。

为了实现这一点，我建议创建一个函数，该函数采用一组元素和您希望设置动画的元素的索引：

```
function pulsate(elements, index)
{
    if (index < elements.length) {
        elements.eq(index).effect("pulsate", {
            times: 3
        }, 1000, function() {
            pulsate(elements, ++index);
        });
    }
} 
```

然后通过发出以下命令启动序列：

```
pulsate(jQuery(".transparent"), 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:24:10.840

我没有测试过这个，但校长是健全的。

```
pulsate(jQuery('.transparent').first());    // Call this to pulsate each image sequentially

function pulsate(element)
{
    jQuery(element).effect("pulsate", {times:3}, 1000, function ()
    {
        var _next = $(element).parent().next();
        if (_next.length != 0)
            pulsate(_next.find('.transparent'));
    });
} 
```

您基本上是在使用效果函数上的回调来设置系列中的下一个元素脉动。

# android - ProgressDialog 问题

> ID：11117204
> 
> 赞同：0
> 
> 时间：2012-06-20T10:05:35.680
> 
> 标签：android, progressdialog, android-alertdialog

我有一个用户选择的按钮，我弹出一个 AlertDialog 来确定或取消替换某些数据的操作。在我弄清楚它是一个 ASYNCH 过程之后，OK 和 CANCEL 工作正常。我什至停止多次点击。但是，当用户按下 OK 时，我必须将信息与几个任务一起保存到内存中。OK过程大约需要三秒钟，这超出了不耐烦的人的边缘。我想用消息抛出一个不确定的进度条。然而，我对 Java 和 android 的新鲜感正在阻碍我。下面代码中的“上下文”到底是什么？

```
public void getData(final View v)
{
     if(AlertDialogProcessing==0)
     {   
         final String title="Set Image to Wallpaper";
         final String message="Press OK to set as Wallpaper or CANCEL";
         final String ok="OK";
         final String cancel="CANCEL";
         final AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
         try{
              alertbox.setMessage(message);
              alertbox.setTitle(title);
              alertbox.setPositiveButton(ok,new DialogInterface.OnClickListener(){ 
                   public void onClick(DialogInterface arg0, int arg1)
                   {  
                        Vibrate(ClickVibrate); 
                        Drawable drawable= getSun(imageSelect);  
                        ProgressDialog dialog = ProgressDialog.show(context, "Loading", "Please wait...", true);   //<<<<<<<<<<ERROR at context
                        AlertDialogProcessing=1;     
                        SaveData(drawable,1);
                        AlertDialogProcessing=0;
                        dialog.dismiss();
                        Toast.makeText(getApplicationContext(), "Data Saved.",Toast.LENGTH_LONG).show();      
                   } 
              });

              alertbox.setNegativeButton(cancel,new DialogInterface.OnClickListener(){
                   public void onClick(DialogInterface arg0, int arg1){
                        AlertDialogProcessing=0; 
                        Vibrate(ClickVibrate); 
                   } 
              });
              //alertbox.setCanceledOnTouchOutside(false); // maybe a 4.0 problem
              alertbox.show();
        } catch(Exception e){   
              //TODO Handle BadTokenException.    
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:13:58.597

如果您在获取上下文时遇到问题，您可以简单地替换 ,

```
 ProgressDialog dialog = ProgressDialog.show(context, "Loading", "Please
   wait...", true); 
```

和，

```
ProgressDialog dialog = ProgressDialog.show(v.getRootView().getContext(), "Loading", "Please
   wait...", true); 
```

这里， v.getRootView().getContext(); 指的是getData()方法中传入的View Object的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:16:14.553

在`onClick()`您正在创建一个progressDialog 并且您正在`saveData()`UI 线程上执行活动。您可以做的是在其显示对话框中创建一个，在关闭对话框中执行`AsyncTask`保存操作。`OnClick()``onPreExecute()``doInBackground()``onPostExecute()`

Context 的定义是（根据 android 开发者网站）：

> 与有关应用程序环境的全局信息的接口。这是一个抽象类，其实现由Android系统提供。它允许访问特定于应用程序的资源和类，以及向上调用应用程序级操作，例如启动活动、广播和接收意图等。

希望解释有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:11:06.307

这里的上下文是您调用进度对话框的活动的上下文。所以它应该是 YourActivity.this

# android - 扩展 textview 隐藏图像

> ID：11117210
> 
> 赞同：0
> 
> 时间：2012-06-20T10:06:00.653
> 
> 标签：android, android-layout, textview

![在此处输入图像描述](../Images/c25a2dcf99ddf824e7cfa849d33a1979.png)

如上所示，这是我的自定义列表视图，其中有一些复选标记。基本上有两个文本视图和一个图像视图。我的问题是每当上部文本视图中的文本很大时，图像视图就会离开屏幕并且不显示复选标记。

我希望上部文本视图的宽度应根据文本的长度扩展，但不应隐藏复选标记。

任何帮助赞赏。

编辑：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="6dip"
android:background="@color/black">
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="6dip"
    android:id="@+id/row_image"/>
    <ImageView
        android:id="@+id/multiselect_icon"
        android:src="@drawable/singlecheck"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/row_image"
        android:visibility="gone"/>
        <TextView
            android:id="@+id/top_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/multiselect_icon"
            android:layout_alignParentTop="false"
            android:layout_alignParentRight="false"
            android:textStyle="bold"
                            android:layout_weight="1"
            android:textColor="@color/white"/>
                    <ImageView
                            android:id="@+id/shared_icon"
                            android:src="@drawable/sharedcheck"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_toRightOf="@id/top_view"
                            android:visibility="gone"/>
                    <TextView
            android:id="@+id/bottom_view_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="false"
            android:layout_alignParentLeft="false"
            android:layout_below="@id/top_view"
            android:layout_toRightOf="@id/multiselect_icon"
                            android:gravity="left"
                            android:textColor="@color/lightGray"
                            android:visibility="gone"/>
        <TextView
            android:id="@+id/bottom_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_below="@id/top_view"
            android:gravity="right"
                            android:textColor="@color/lightGray"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:32:29.557

想分享答案，以便它可以帮助某人。

我将上部文本框和复选标记添加到线性布局中，它解决了问题。

```
<LinearLayout
   android:orientation="horizontal"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:id="@+id/upper_view"
   android:layout_toRightOf="@id/multiselect_icon"
   android:layout_alignParentTop="false"
   android:layout_alignParentRight="false">

   <TextView
        android:id="@+id/top_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="bold"
    android:layout_weight="1"
        android:textColor="@color/white"/>
   <ImageView
    android:id="@+id/shared_icon"
    android:src="@drawable/sharedcheck"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/top_view"
    android:visibility="gone"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:08:21.183

采用

```
android:layout_weight="1" 
```

在`textview`xml 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:10:22.233

如果您将 a`LinearLayout`用于您的 ListView 项目，我建议您将其替换为 a `RelativeLayout`，然后将其`TextView`对齐到复选标记的左侧。

# android - 无法在捕获它们的同一应用程序中将图片上传到服务器

> ID：11117215
> 
> 赞同：1
> 
> 时间：2012-06-20T10:06:22.340
> 
> 标签：android, http-post, android-image

最初单击相机按钮时，正在捕获图像，显示保存和丢弃按钮。单击保存时，它会保存在指定的文件夹中，但保存的图像不会上传到服务器。

这是我的代码：

```
public class FldrActivity extends Activity {
    private static final int CAPTURE_IMAGE = 0;
    InputStream inputStream;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        File folder = new File(Environment.getExternalStorageDirectory() + "/image");
        boolean success = false;
        if (!folder.exists()) {
            success = folder.mkdir();
        }
        String path = folder + "/example.jpg";

        //String path = Environment.getExternalStorageDirectory() + "/image/example2.jpg";
        File file = new File(path);
        Uri outputFileUri = Uri.fromFile( file );
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
        intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );

        startActivityForResult( intent, CAPTURE_IMAGE ); 

        String pathToOurFile = "/sdcard/image/example.jpg";

        Bitmap bitmap = BitmapFactory.decodeFile(pathToOurFile);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 90, stream); 

        //compress to which format you want.
        byte [] byte_arr = stream.toByteArray();
        String image_str = Base64.encodeToString(byte_arr, 0);
        ArrayList<NameValuePair> nameValuePairs = new  ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("file",image_str));

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://www.xyz.com/image/connection.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            String the_string_response = convertResponseToString(response);
            Toast.makeText(getApplicationContext(), "Response " + the_string_response,
                                Toast.LENGTH_LONG).show();
        } catch(Exception {
            Toast.makeText(getApplicationContext(), "ERROR " + e.getMessage(),
                                                  Toast.LENGTH_LONG).show();
            System.out.println("Error in http connection "+e.toString());
        }
    }

    public String convertResponseToString(HttpResponse response) throws  IllegalStateException, IOException {
        String res = "";
        StringBuffer buffer = new StringBuffer();
        inputStream = response.getEntity().getContent();
        int contentLength = (int) response.getEntity().getContentLength(); //getting content length…..
        Toast.makeText(getApplicationContext(), "contentLength : " + contentLength, Toast.LENGTH_LONG).show();
        if (contentLength < 0) {
        }
        else {
            byte[] data = new byte[512];
            int len = 0;

            try {
                while (-1 != (len = inputStream.read(data)) ) {
                    buffer.append(new String(data, 0, len)); //converting to string and appending  to stringbuffer…..
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

            try {
                inputStream.close(); // closing the stream…..
            } catch (IOException e) {
                e.printStackTrace();
            }

            res = buffer.toString();     // converting stringbuffer to string…..

            Toast.makeText(getApplicationContext(), "Result : " + res, Toast.LENGTH_LONG).show();
            //System.out.println("Response => " +  EntityUtils.toString(response.getEntity()));
        }

        return res;
    }
} 
```

# jquery - CSS 宽度：计算（100% -100px）；使用 jquery 的替代方法

> ID：11117216
> 
> 赞同：55
> 
> 时间：2012-06-20T10:06:23.310
> 
> 标签：jquery, css

我想使用`width: calc(100% -100px);`which 完美地完成我需要的工作，唯一的问题是它的兼容性。目前它只适用于最新的浏览器，根本不适用于 Safari。

我可以使用 jQuery 替代吗？IE。获取对象的 100% 宽度 -100px，然后将结果动态设置为 CSS 宽度（因此它会响应）

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-06-20T10:10:24.723

如果你的浏览器不支持`calc`表达式，用 jQuery 模仿也不难：

```
$('#yourEl').css('width', '100%').css('width', '-=100px'); 
```

让jQuery处理相对计算比自己做要容易得多。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-09-29T14:19:24.543

我认为这可能是另一种方式

```
 var width=  $('#elm').width();

    $('#element').css({ 'width': 'calc(100% - ' + width+ 'px)' }); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-20T10:10:52.373

100%-100px 是一样的

```
div.thediv {
  width: auto;
  margin-right:100px;
} 
```

使用 jQuery：

```
$(window).resize(function(){
  $('.thediv').each(function(){
    $(this).css('width', $(this).parent().width()-100);
  })
}); 
```

类似的方法是使用[jQuery resize 插件](https://github.com/alessandro-sena/jQuery-Resize-Plugin)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T10:17:36.417

尝试 jQuery`animate()`方法，例如。

```
$("#divid").animate({'width':perc+'%'}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-15T13:27:58.033

在 javascript 中复制并不难 :-) ，虽然它只适用于最好的宽度和高度，但您可以根据您的期望扩展它 :-)

```
function calcShim(element,property,expression){
    var calculated = 0;
    var freed_expression = expression.replace(/ /gi,'').replace("(","").replace(")","");
    // Remove all the ( ) and spaces 
    // Now find the parts 
    var parts = freed_expression.split(/[\*+-\/]/gi);

    var units = {
        'px':function(quantity){
            var part = 0;
            part = parseFloat(quantity,10);
            return part;
        },
        '%':function(quantity){
            var part = 0,
            parentQuantity = parseFloat(element.parent().css(property));
            part = parentQuantity * ((parseFloat(quantity,10))/100);
            return part;
        } // you can always add more units here.
    }

    for( var i = 0; i < parts.length; i++ ){
        for( var unit in units ){
            if( parts[i].indexOf(unit) != -1 ){
               // replace the expression by calculated part.
               expression = expression.replace(parts[i],units[unit](parts[i]));
               break;
            }
        }
    }
    // And now compute it. though eval is evil but in some cases its a good friend.
    // Though i wish there was math. calc
    element.css(property,eval(expression));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-20T22:27:51.123

如果您想在 CSS 文件中使用 calc ，请使用 PolyCalc 之类的[polyfill](https://github.com/Eccenux/PolyCalc)。应该足够轻，可以在移动浏览器上工作（例如低于 iOS 6 和低于 Android 4.4 的手机）。

# java - 安卓应用定时器

> ID：11117218
> 
> 赞同：-2
> 
> 时间：2012-06-20T10:06:24.900
> 
> 标签：java, android, eclipse

> **可能重复：**
> [我想使用 eclipse 制作一个 android 应用程序](https://stackoverflow.com/questions/11116903/i-wanna-make-an-android-app-using-eclipse)

我想使用eclipse制作一个android应用程序，如果该应用程序超过3天没有使用，它会提醒用户，你认为这可能吗？

它更像是应用程序内部有一个计时器，当应用程序未打开 3 天或更长时间时，它会向用户显示警报。

我不知道该怎么做，这就是我寻求帮助的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:12:28.813

使用`AlarmManager`. [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

它“适用于您希望在特定时间运行应用程序代码的情况，即使您的应用程序当前没有运行。”

您可以`set`在 3 天内发出通知，但在使用`cancel`应用程序时使用该方法。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:31:31.677

此代码可能会帮助您：

```
AlarmManager alarmMgr = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(context, YourReceiverClass.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    Calendar time = Calendar.getInstance();
    time.setTimeInMillis(System.currentTimeMillis());
    time.add(Calendar.SECOND, timeoutInSeconds);
    alarmMgr.set(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(),pendingIntent); 
```

# httpwebrequest - 使用 Titanium.Network.createHTTPClient() 发出 HTTP-GET 请求

> ID：11117223
> 
> 赞同：1
> 
> 时间：2012-06-20T10:06:41.703
> 
> 标签：httpwebrequest, timeout, titanium

我正在使用 Titanium Studio，我必须向 Couchdb 发出 HTTP 获取请求。这是我的代码：

```
var url ="http://192.168.0.152:5985/hello_world/00a271787f89c0ef2e10e88a0c0001f4";
var json;

var xhr = Ti.Network.createHTTPClient({
onload: function() {
Ti.API.info("Received text: " + this.responseText);
json = JSON.parse(this.responseText); 
},
onerror: function(e) {
Ti.API.debug("STATUS: " + this.status);
Ti.API.debug("TEXT:   " + this.responseText);
Ti.API.debug("ERROR:  " + e.error);
alert('There was an error retrieving the remote data. Try again.');
},
timeout:5000
});
xhr.open("GET", url);
xhr.send(); 
```

操作进入超时..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T02:20:17.357

代码工作正常。我用不同的 URL 对其进行了测试。首先在 Web 浏览器中检查 URL 以查看加载所需的时间，然后增加超时值。如果它工作正常尝试在模拟器的浏览器中打开 URL，您可能会发现这是一个 IP 问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:26:19.263

这是couchdb中的ip问题；couchdb 服务器监听 127.0.0.1。

# html - html5画布用多种字体绘制文本

> ID：11117224
> 
> 赞同：0
> 
> 时间：2012-06-20T10:06:44.287
> 
> 标签：html, canvas, drag-and-drop, html5-canvas

如何使用多种字体在画布中填充文本。我可以这样填写画布：

这是我想做的一个**例子**

这是我想做的另一个*例子*

我知道我可以删除刺痛并首先填充普通文本，然后是粗体文本，然后是其余文本。但我希望能够拖放文本，所以我不能那样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:22:14.547

对不起，你运气不好。这里没有简单的出路。

如果您想要在中心带有粗体字的文本，您必须调用 drawtext 至少 3 次。

将来可能会有一段时间允许您绘制任意 html，规范提到这是一种真正的可能性，但在一段时间内不会。引用规范：

> 注意：2D 上下文 API 的未来版本可能会提供一种将使用 CSS 渲染的文档片段直接渲染到画布的方法。这将优先于进行多行布局的专用方式提供。

从[本节结束](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#drawing-text-to-the-canvas)。

当然，您仍然可以拖放，您只需要拥有组成“节点”的元素列表及其位置。毫无疑问，在画布上完成了更复杂的对象。

# ruby-on-rails-3 - cancan 中的自定义操作

> ID：11117226
> 
> 赞同：4
> 
> 时间：2012-06-20T10:06:45.757
> 
> 标签：ruby-on-rails-3, cancan

除了自定义操作之外，我的一切都可以正常工作。我有一个没有正确保护的 upload_photos 操作。我在ability.rb 文件中添加了一个非常基本的测试操作，如下所示：

```
can :test, User, :id => user.id 
```

但由于某种原因，它总是评估为真，所以我将其更改为以下

```
can :test, User, :email => 'a@a.com' 
```

并且它总是评估为真。

有人知道为什么 cancan 在这里不能正常工作吗？

我的用户控制器顶部有以下内容：

```
load_and_authorize_resource 
```

提前致谢。

**解决方案：**

Cancan 的 load_and_authorize_resource 会干扰自定义操作，因此我们需要执行类似的操作

```
load_and_authorize_resource :except => [:test] 
```

然后在测试动作中：

```
authorize! :test, @user 
```

# iphone - 如何将图像存储为一个用户的个人资料图片？

> ID：11117229
> 
> 赞同：7
> 
> 时间：2012-06-20T10:06:52.337
> 
> 标签：iphone

我是 iphone 应用程序开发的初学者。我做了一个 iphone 应用程序，它包含注册页面、登录页面和使用 sql 数据库作为保存字段的个人资料。我想保留一张图片作为个人资料图片。我从已经存储的图片中选择了一张图片来自模拟器的图片。如果我再次运行它，我想保持那张图片原样......请帮助我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:26:11.137

您可以将图像存储在应用程序包中，并可以在应用程序加载时检索图像：

这是给你的教程：

[http://www.friendlydeveloper.com/2010/02/using-nsfilemanager-to-save-an-image-to-or-loadremove-an-image-from-documents-directory-coding/](http://www.friendlydeveloper.com/2010/02/using-nsfilemanager-to-save-an-image-to-or-loadremove-an-image-from-documents-directory-coding/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:36:00.513

当使用 imagepicker 获取从图库中选择的图像时使用它：

```
 -(void)saveImageInDirectoryAndStoreInDatabase
   {
     NSArray  *paths        = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
    NSString *imgFilePath  = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png",youruserName];

     NSData *data = UIImagePNGRepresentation(youruserImage) //which is obtained from imagepicker
    [data writeToFile:imgFilePath atomically:YES];
     //query here into database with imageFile(A string) which is[NSString stringWithFormat:@"%@.png",youruserName];
   } 
```

同样，在检索图像时，使用 documentDirectory+imageFile.png（通过使用其 imageFile 查询用户名从数据库中获取）路径来设置用户配置文件 pic

# javascript - 对话框弹出框

> ID：11117230
> 
> 赞同：0
> 
> 时间：2012-06-20T10:07:02.543
> 
> 标签：javascript, jquery

我想做注册按钮，但是当人们点击它时。将出现一个弹出对话框，并有两个按钮供用户单击。一个是YES，一个是NO。如果他们选择“是”，则将它们传递到 X 页面。转换方式，他们选择NO，将它们传递到Y页面。我在谷歌上搜索，但只有确定并取消确认。![在此处输入图像描述](../Images/db4359647fc7dc647743ad16abe87103.png)

是 --> VIP 注册

否 --> 常规注册

我应该使用 Jquery 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:09:47.633

您可以为此使用[jQuery UI](http://jqueryui.com/)。

```
$('<div>', {text: 'Do you have VIP code?'}).dialog({
    modal: true,
    buttons: {
        'Yes': function() {
             window.location = ...;
        },
        'No': function() {
             window.location = ...;
        }
    }
}); 
```

请注意，默认情况下，此对话框将包含一个“关闭”按钮，并且如果您按下 Escape 也会自动关闭。您需要禁用这些功能（请参阅[此处](https://stackoverflow.com/a/5438771/6782)了解如何），或者决定在发生这种情况时采取什么行动（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:10:07.453

`confirm`如果您不想自定义对话框的外观（您无法更改任何内容，包括按钮的文本），则可以使用内置方法：

```
if (confirm("Do you have VIP code?")) {
    //Yes!
} else {
   //No
} 
```

如果要自定义对话框，请查看可用的无尽[灯箱脚本。](https://www.google.com/search?&q=javascript+lightbox)正如@Alnitak 所提到的，jQuery UI 提供了一个很好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:10:16.283

您可以在经典 javascript 中执行此操作

```
var answer = confirm ("Do you have vip code?") 
```

然后相应地对待答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:11:43.637

jquery 是一个非常容易做到这一点的好方法。但通常的问题是，人们相信他们可以在不了解 Javascript 本身的情况下使用 jQuery。因此，首先学习 Javascript 的基础知识（例如：Methodchaning、Closurs、Array-Handling、Prototyping），然后尝试 jQuery。你想要的 Box 很容易用[jQuery-UI](http://jqueryui.com/demos/dialog/)和

```
window.location = "vip.html"; 
```

# java - 为什么我的 JScrollPane 不工作？

> ID：11117233
> 
> 赞同：1
> 
> 时间：2012-06-20T10:07:13.293
> 
> 标签：java, swing, jpanel, jscrollpane

有人可以弄清楚为什么我`JScrollPane`的不工作。也许我可能错过了一些东西。我意识到如果没有比我所展示的更多的上下文，这可能很愚蠢，但请询问，我很乐意提供更多。

```
public ApplicationFrame(String title, int x, int y, int width, int height) {
        // Constructor for the ApplicationFrame, no implicit Construc.
        setTitle(title);
        setResizable(true);
        setBounds(x, y, width, height);
                    setLayout(new BorderLayout());
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setIconImage(new ImageIcon(getClass().getResource("resources/topLeft.png")).getImage());
        topMostMenuBar = new TopMenuBar(this);
        setJMenuBar(topMostMenuBar.getMyJMenuBar());
        paneEdge = BorderFactory.createLineBorder(Color.gray);
        blackline = BorderFactory.createLineBorder(Color.black);
        this.frameContent = new ApplicationPanel() {
            //@Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.drawImage(TI, 0, 0, null);
            }
        };
        mainImageScrollPane = new JScrollPane(frameContent);
        statusPanel = new ApplicationPanel(new Color(0xfff0f0f0));
        leftPanel = new ApplicationPanel(new Color(0xfff0f0f0));
        testPanel = new ColorPanel(new Color(0xfff0f0f0));
        testPanel.setPreferredSize(new Dimension(50,300));
        add(mainImageScrollPane, BorderLayout.CENTER );
        add(statusPanel, BorderLayout.SOUTH);
        add(leftPanel, BorderLayout.WEST);
        Container visibleArea = getContentPane();
        visibleArea.add(frameContent);
        setVisible(true);
        do {
            loadImageIn();
        } while (!initLoadSuccess);
        initButtons();
        leftPanel.add(testPanel, BorderLayout.SOUTH);
    } // end Constructor ** 
```

这是一段很大的代码，所以我不确定如何从中制作 SSCCE。您正在查看的是我的 a 子类的构造函数`JFrame`，它包含 3 个面板。在这`ApplicationPanel`一点上只是一个`JPanel`. 该`loadImageIn()`方法打开一个文件选择器，然后加载选择的图像，该图像被绘制到`frameContent`. 图像显示正常，一切正常，除了当我调整窗口大小时，没有滚动条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:13:08.203

您有这条线，它将...添加`ApplicationPanel`到`visibleArea`...

```
visibleArea.add(frameContent); 
```

也许你真的是这个意思，它添加了`JScrollPane`（`visibleArea`并且`JScrollPane`已经包含了`ApplicationPanel`）......

```
visibleArea.add(mainImageScrollPane); 
```

当您调用 时`new JScrollPane(frameContent)`，它不会对其中的面板做任何事情，它只是在外部添加一个包装器。所以，如果你想要滚动的能力，你需要引用`JScrollPane`包装器，而不是面板本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:09:37.333

您没有为您的`frameContent`. 是故意的吗？

此外，您`frameContent`稍后将被添加到`visibleArea`. 不再存在的意思`mainImageScrollPane` `JScrollPane`

也许你想要： `visibleArea.add(mainImageScrollPane);`，但你需要设置你的面板大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:50:03.683

```
mainImageScrollPane.setViewportView(<component_to_be_scrollable>); 
```

# arrays - Perl：正确打印数组数组（取消引用）

> ID：11117241
> 
> 赞同：1
> 
> 时间：2012-06-20T10:07:40.813
> 
> 标签：arrays, for-loop, dereference, perl

嘿，perl 修道士们，

我仍在思考如何正确取消引用。（我在发布之前阅读了类似的帖子，但不幸的是，我对这个概念仍然有些模糊。）

我有以下数组，它在内部由两个数组组成。（顺便说一句，我正在使用严格和警告的编译指示。）

```
use strict; use warnings;
my @a1; my @a2; 
```

在哪里：

```
@a1 = ( "1MB", "2MB", ... ) 
```

和..

```
@a2 = ( "/home", "/home/debug", ... ) 
```

@a1 和 @a2 都是包含 51 行的数组。所以，我将这些填充到我的第二个数组中。

```
my @b;
push (@b, [ @a1, @a2 ]); 
```

但是，当我尝试打印@b 的结果时：

```
sub newl { print "\n"; print "\n"; }
my $an1; my @an1;
$an1 = $#a1;
@an1 = ( 0, 1..$an1 );

for my $i (@an1) { print @b[$i]; &newl; } 
```

我看到对数组的引用：

```
ARRAY(0x81c0a10)
  .
ARRAY(0x81c0a50)
  .
  .
  . 
```

如何正确打印此数组？我知道我需要取消对数组的引用，我不知道该怎么做。我尝试这样填充我的数组：

```
push (@b, [ \@a1, \@a2 ]); 
```

产生相同的结果。我也试过：

```
for my $i (@an1) { print @{$b[$i]}; &newl; } 
```

不幸的是，由于将 0 作为数组引用而导致错误？

```
Can't use string ("0") as an ARRAY ref while "strict refs" in use at p_disk_ex6.pl line 42. 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:00:57.280

一个简短的示例程序，可能会对您有所帮助：

```
use strict;
use warnings;

my @a1 = qw(1MB 2MB 10MB 7MB);
my @a2 = qw(/foo /bar /flub /blub);

my @b = (\@a1, \@a2);
# equivalent long version:
# my @b = ();
# $b[0] = \@a1;
# $b[1] = \@a2;

for (my $i = 0; $i <= $#a2; $i++) {
    print "a1[$i]: $b[0][$i]\n";
    print "a2[$i]: $b[1][$i]\n";
    print "\n";
} 
```

在您的示例中，您将一个匿名的 arrayref [] 推入@b。因此 $b[0] 包含 arrayref。

```
my @b;
push (@b, [ \@a1, \@a2 ]);
# this corresponds to:
# $b[0][0] = \@a1;
# $b[0][1] = \@a2; 
```

在您编写 [@a1, @a2] 的示例中，您正在创建一个 array_ref，其中包含连接的数组 @a1 和 @a2（首先是 @a1 的所有元素，然后是 @a2 的所有元素）：

```
my @b;
push(@b , [@a1, @a2]);
# $b[0] = ['1MB' , '2MB', '10Mb', '7MB', '/foo', '/bar', '/flub', '/blub'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:53:13.530

即使很简单，这也有效

```
use strict;
use warnings;

my @a1 = qw(1MB 2MB 10MB 7MB);
my @a2 = qw(/foo /bar /flub /blub);

my @b = (@a1, @a2);
print "@b"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T03:34:19.447

如果您想要一个不假设每个子数组中有多少元素的通用解决方案，并且还允许任意级别的嵌套，那么您最好使用其他人已经编写的用于显示递归数据的包结构。一个特别流行的是 YAML，如果你还没有它，你可以通过运行 cpan 来安装它：

```
$ cpan
Terminal does not support AddHistory.

cpan shell -- CPAN exploration and modules installation (v1.9800)
Enter 'h' for help.

cpan[1]> install YAML 
```

然后您可以轻松地显示任意数据结构。用一个简单的例子来演示：

```
use YAML;

my @a1 = qw(1MB 2MB 10MB 7MB);
my @a2 = qw(/foo /bar /flub /blub);

my @b = (\@a1, \@a2);

print Dump(\@b); 
```

结果输出

```
---
-
  - 1MB
  - 2MB
  - 10MB
  - 7MB
-
  - /foo
  - /bar
  - /flub
  - /blub 
```

对于一个稍微复杂的例子

```
my @b = (\@a1, \@a2,
         { a => 0, b => 1 } ); 
```

给

```
---
-
  - 1MB
  - 2MB
  - 10MB
  - 7MB
-
  - /foo
  - /bar
  - /flub
  - /blub
- a: 0
  b: 1 
```

要阅读此内容，第 1 列中的三个“-”字符表示包含三个元素的数组。前两个元素各有四个子元素（第 3 列中带有“-”的行）。第三个外部元素是哈希引用，因为它由“键：值”对组成。

YAML 的一个很好的特性是您可以使用它将任何递归数据结构转储到文件中，除了那些具有子例程引用的文件，然后稍后使用 Load 将其读回。

如果你真的必须滚动你自己的显示例程，那当然是可能的，但是如果你递归地编写它，你会更容易。您可以使用 ref 检查您的参数是数组引用还是哈希引用（或标量引用）：

```
my @a1 = qw(1MB 2MB 10MB 7MB);
my @a2 = qw(/foo /bar /flub /blub);

my @b = (\@a1, \@a2,
         { a => 0, b => 1 } );

print_recursive(\@b);
print "\n";

sub print_recursive {
    my ($obj) = @_;

    if (ref($obj) eq 'ARRAY') {
        print "[ ";
        for (my $i=0; $i < @$obj; $i++) {
            print_recursive($obj->[$i]);
            print ", " if $i < $#$obj;
        }
        print " ]";
    }
    elsif (ref($obj) eq 'HASH') {
        print "{ ";
        my @keys = sort keys %$obj;
        for (my $i=0; $i < @keys; $i++) {
            print "$keys[$i] => ";
            print_recursive($obj->{$keys[$i]});
            print ", " if $i < $#keys;
        }
        print " }";
    }
    else {
        print $obj;
    }
} 
```

产生输出

```
[ [ 1MB, 2MB, 10MB, 7MB ], [ /foo, /bar, /flub, /blub ], { a => 0, b => 1 } ] 
```

我没有编写示例代码来担心漂亮的打印，也没有处理标量、子例程或祝福对象引用，但它应该让您了解如何编写一个相当通用的递归数据结构转储程序。

# jquery - jQuery UI 可排序 - 更改单个项目的轴

> ID：11117255
> 
> 赞同：1
> 
> 时间：2012-06-20T10:08:25.790
> 
> 标签：jquery, jquery-ui, properties, axis, jquery-ui-sortable

是否可以为可排序列表中的单个项目定义轴属性？

我的问题如下：我有一个连接到另一个列表的可排序列表。到目前为止，这工作正常。（见[JsFiddle](http://jsfiddle.net/GGVeA/)）现在我想排除单个列表项被放入另一个列表中。

为此，我想更改某些项目的轴属性。

谢谢你的帮助。

问候， 阿利

# java - xml解析器数据到文本文件

> ID：11117258
> 
> 赞同：0
> 
> 时间：2012-06-20T10:08:34.930
> 
> 标签：java, xml, file, xml-parsing

我正在浏览 xml 解析器的代码，我找到了这段代码，但我想将结果数据保存到文本文件中。

```
public class ReadXMLFile 
{

public static void main(String argv[]) 
{

  try {

    File fXmlFile = new File("test.xml");
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(fXmlFile);
    doc.getDocumentElement().normalize();

    System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
    NodeList nList = doc.getElementsByTagName("test");
    System.out.println("-----------------------");

    for (int temp = 0; temp < nList.getLength(); temp++) {

       Node nNode = nList.item(temp);
       if (nNode.getNodeType() == Node.ELEMENT_NODE) {

          Element eElement = (Element) nNode;

          System.out.println("ID : " + getTagValue("id", eElement));
          System.out.println("Name : " + getTagValue("Name", eElement));
          System.out.println("AGE: " + getTagValue("age", eElement));

       }
    }
  } 
  catch (Exception e) 
  {
    e.printStackTrace();
  }
 }

 private static String getTagValue(String sTag, Element eElement) 
{
NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

    Node nValue = (Node) nlList.item(0);

return nValue.getNodeValue();
}

} 
```

如何将输出保存到文本文件？

请就此向我提出建议.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:16:13.117

创建一个 Writer 以写入文件并将 System.out.println() 替换为 Writer.write()。

```
BufferedWriter writer = new BufferedWriter(new FileWriter(file));
writer.write(s);
writer.newLine(); 
```

# javascript - 如何在 div 没有子元素的情况下给 div 填充内容？

> ID：11117262
> 
> 赞同：0
> 
> 时间：2012-06-20T10:08:47.460
> 
> 标签：javascript, html

例如，当我有：

```
<div class="abc123"></div>  <!-- no child div --> 
```

我想在其中插入一个新的 div：

```
<div class="xyz">some content</div> 
```

所以结果是：

```
<div class="abc123">
    <div class="abc">Some Content</div>
</div> 
```

如何使用 javascript 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:21:45.363

在 jQuery 中：

```
$(".abc123").each(function() {
    if (this.children(".abc").length == 0) {
        $(this).append('<div class="xyz">some content</div>');
    }
});​ 
```

在简单的 JS

```
var divs = document.getElementsByTagName("div");
for (var i = 0; i < divs.length; i++) {
    if (divs[i].childNodes.length == 0) { // testing if it has not child
        var newdiv = document.createElement('div');
        newdiv.innerHTML = "some content";
        newdiv.className = "xyz";
        divs[i].appendChild(newdiv);
    }
}​ 
```

**编辑：**

下面这段代码产生与上面提到的 jQuery 代码相同的效果（根据[RobW](https://stackoverflow.com/users/938089/rob-w)的评论编辑）：

```
var divs = document.getElementsByClassName("abc123");
for (var i = 0; i < divs.length; i++) {
    if (divs[i].getElementsByClassName("abc").length == 0) { 
        var newdiv = document.createElement('div');
        newdiv.innerHTML = "some content";
        newdiv.className = "xyz";
        divs[i].appendChild(newdiv);
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:23:36.187

也许你想看看这个问题：[How to check if element has any children in Javascript?](https://stackoverflow.com/questions/2161634/how-to-check-if-element-has-any-children-in-javascript)

好像你在找什么:)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-20T10:20:23.710

使用 jQuery：

```
if ($('.abc123 div').length == 0) {
    $('.abc123').append('<div class="xyz">some content</div>');
}​ 
```

# javascript - 更新到位置后检索的 $().position() 更改：绝对

> ID：11117269
> 
> 赞同：1
> 
> 时间：2012-06-20T10:09:12.293
> 
> 标签：javascript, jquery, css, position, absolute

我正在为 HTML 元素的动态淡入淡出寻找可能的解决方案。我的问题的核心是 jQuery 的 .position() 的一种奇怪行为，并在检索旧位置后更新了 css“位置”属性。

我制作了一个 JSFiddle 来说明我的问题：http: [//jsfiddle.net/svenhanssen/DDYVs/](http://jsfiddle.net/svenhanssen/DDYVs/)

```
/*
This works. I'll get a position.top from 0 to 90
*/

$("p").each(function( p ) {
    var position = $(this).position();

    console.log(position.top);
});

/*
This doesn't work. I'll get a position.top of 0 for all elements. Why does the css set effects the position?
*/

$("p").each(function( p ) {
    var position = $(this).position();

    console.log(position.top);

    $(this).css({
        position: "absolute"
    });
});​ 
```

之后以某种方式更改css“位置”属性会影响旧属性。有谁知道原因和可能的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:12:03.650

`<p>`将 a 设置为它的那一刻将`position: absolute`被从文档流中取出，并且下一个非绝对值`<p>`向上移动以占用释放的空间。然后你到达刚刚重新定位的`<p>`元素，果然它`top`现在是`0`（因为在它之前没有流入元素将它向下推）。

这是一个可能的解决方案：

```
$("p").each(function( p ) {
    var position = $(this).position();

    console.log(position.top);
}).css({
    position: "absolute"
});​ 
```

请注意，现在所有`<p>`元素`position: absolute`仅*在*循环滚动后设置为。

[更新的小提琴](http://jsfiddle.net/DDYVs/2/)

# actionscript-3 - 使用 Esc 按钮从全屏恢复

> ID：11117273
> 
> 赞同：0
> 
> 时间：2012-06-20T10:09:28.393
> 
> 标签：actionscript-3, apache-flex, flex3

我想使用 Esc 按钮恢复全屏。它使用空格键正确恢复，但使用 Esc 不能正确恢复视图状态。

我在进入全屏时使用视图状态，在恢复时它会恢复到默认状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:18:22.213

处理键盘事件。在 KEY_UP 或 KEY_DOWN 上添加事件监听器。然后检查事件处理函数中的键码。如果按下 ESC 键，则恢复窗口。请参阅下面提到的代码，它可能会有所帮助

```
tf.addEventListener(KeyboardEvent.KEY_UP,reportKeyUp);

function reportKeyUp(event:KeyboardEvent):void
{
    if (event.keyCode == Keyboard.ESCAPE)
         this.stage.nativeWindow.restore();
} 
```

# android - Android : Horizo ntalScrollView 像 Iphone 一样移动

> ID：11117275
> 
> 赞同：2
> 
> 时间：2012-06-20T10:09:30.623
> 
> 标签：android, scroll, scrollview, horizontalscrollview

此活动代码像 Iphone 水平滚动一样移动。

第二个代码是 ScrollView 库。

更好的主意如果你有，请评论。

或批评者欢迎。

```
public class HorizontalScrollActivity extends Activity {
    private StickyHorizontalScrollView scrollView;
    private ArrayList<View> viewList = new ArrayList<View>();
    private ViewGroup mLayout;
    private ViewGroup mLayout2;
    private ViewGroup mLayout3;
    private LinearLayout mLayoutContainer;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        scrollView = new StickyHorizontalScrollView(this);
        scrollView.setHorizontalScrollBarEnabled(false);
        scrollView.setFadingEdgeLength(0);

        LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        DisplayMetrics mDisplayMetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(mDisplayMetrics);
        int deviceWidth = mDisplayMetrics.widthPixels;
        int deviceHeight = mDisplayMetrics.heightPixels;

        mLayout = (ViewGroup)inflater.inflate(R.layout.main, null);
        mLayout.setLayoutParams(new LayoutParams(deviceWidth, deviceHeight));
        mLayout2 = (ViewGroup)inflater.inflate(R.layout.main2, null);
        mLayout2.setLayoutParams(new LayoutParams(deviceWidth, deviceHeight));
        mLayout3 = (ViewGroup)inflater.inflate(R.layout.main3, null);
        mLayoutContainer = (LinearLayout)mLayout3.findViewById(R.id.bodyLayout);
        mLayout3.removeView(mLayoutContainer);

        viewList.add(mLayout);
        viewList.add(mLayout2);

        int i = 0;
        for(View v : viewList){
            mLayoutContainer.addView(v);
            scrollView.addStickyPosition(i++ * deviceWidth);
        }
        scrollView.addView(mLayoutContainer);
        setContentView(scrollView);
    }
} 
```

以及 Iphonish Horizo​​ntalScrollView 库的此代码。

[图书馆页面](http://www.rbecker.eu/2011/05/iphone-like-swipe-gestures-in-android.html)

```
public class StickyHorizontalScrollView extends HorizontalScrollView {
    protected ArrayList<Integer> stickyPositions = new ArrayList<Integer>();
    private boolean flinged = false;
    private final String TAG = "StickyHorizontalScrollView ==========";

    public StickyHorizontalScrollView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void fling(int velocityX) {
        // TODO Auto-generated method stub
        Log.d(TAG, "FLING");
        flinged = true;

        int lastSmaller = 0;

        for(int sticky : stickyPositions){
            if(velocityX > 0 && sticky > getScrollX()){
                smoothScrollTo(sticky, getScrollY());
                break;
            }else if(velocityX < 0){
                if(sticky > getScrollX()){
                    smoothScrollTo(lastSmaller, getScrollY());
                    break;
                }else{
                    lastSmaller = sticky;
                }
            }
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        // TODO Auto-generated method stub
        Log.d(TAG, "TOUCH");
        flinged = false;
        boolean res = super.onTouchEvent(ev);

        if(ev.getAction() == MotionEvent.ACTION_UP && !flinged){
            sanitizeScrollPosition();
        }
        return res;
    }

    public void sanitizeScrollPosition(){
        Log.d(TAG, "SANITIZE");
        Integer minDistance = 0;
        Integer minStickyPosition = 0;

        for(int sticky : stickyPositions){
            int distance = Math.abs(getScrollX() - sticky);
            if(minDistance == null || minDistance > distance){
                minStickyPosition = sticky;
                minDistance = distance;
            }
        }
        smoothScrollTo(minStickyPosition, getScrollY());
    }

    public void addStickyPosition(int x){
        Log.d(TAG, "ADD STICKY POSITION");
        stickyPositions.add(x);
        Collections.sort(stickyPositions);
    }

    public void clearStickyPositions(){
        Log.d(TAG, "CLEAR STICKY POSITION");
        stickyPositions.clear();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:08:27.573

看看这里。[Android 水平滚动视图的行为类似于 iPhone（分页）](https://stackoverflow.com/questions/2595063/android-horizontal-scollview-behave-like-iphone-paging)

![在此处输入图像描述](../Images/a68486513fe74591da1fd7e785fd8ae0.png)

![在此处输入图像描述](../Images/165a5da57937e59dc8ea1e5b4ca7a525.png)

Android图像滑块：[代码在这里](http://www.techipost.com/Downloads/AndroidImageSlider.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T17:22:43.133

我知道你在一年前问过这个问题，但对于那些仍在寻找这个问题的人，我发现了这个惊人的例子，它让我很开心：

[https://github.com/ysamlan/horizo​​ntalpager](https://github.com/ysamlan/horizontalpager)

希望你也觉得它有用:)

# plugins - CKEditor 和 VideoEmbed 插件

> ID：11117283
> 
> 赞同：0
> 
> 时间：2012-06-20T10:09:46.210
> 
> 标签：plugins, configuration, ckeditor

谁能告诉我如何在 ckeditor 中使用 embedMedia 插件？我正在使用 drupal 6 和所见即所得编辑器。我已将该文件夹添加到插件文件夹中。并在 config.js 上添加了一行，

> config.extraPlugins += (config.extraPlugins?',MediaEmbed': 'MediaEmbed');

但我没有看到我的配置选项。我做错什么了吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:17:48.297

您需要将其添加到您的 config.toolbar_XXX 设置中才能显示它。

在您的 config.js 文件中查找类似的内容：

```
config.toolbar_XXX

CKEDITOR.config.toolbar_XXX 
```

标准的完整工具栏配置如下所示：

```
 config.toolbar_Full =
  [
    { name: 'document', items : [ 'Source','-','Save','NewPage','DocProps','Preview','Print','-','Templates' ] },
    { name: 'clipboard', items : [ 'Cut','Copy','Paste','PasteText','PasteFromWord','-','Undo','Redo' ] },
    { name: 'editing', items : [ 'Find','Replace','-','SelectAll','-','SpellChecker', 'Scayt' ] },
    { name: 'forms', items : [ 'Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton',
           'HiddenField' ] },
    '/',
    { name: 'basicstyles', items : [ 'Bold','Italic','Underline','Strike','Subscript','Superscript','-','RemoveFormat' ] },
    { name: 'paragraph', items : [ 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv','-

          ','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl' ] },
    { name: 'links', items : [ 'Link','Unlink','Anchor' ] },
    { name: 'insert', items : [ 'Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak','Iframe' ] },
    '/',
    { name: 'styles', items : [ 'Styles','Format','Font','FontSize' ] },
    { name: 'colors', items : [ 'TextColor','BGColor' ] },
    { name: 'tools', items : [ 'Maximize', 'ShowBlocks','-','About' ] }
  ]; 
```

您需要在您希望按钮出现的位置为您的插件添加一个条目。检查插件自述文件以查看应调用的按钮。

如果您在 config.js 文件中没有看到它，您可以在其中添加它并插入 embedmedia 插件的按钮名称。看起来按钮的名称是“MediaEmbed”，尝试将其添加到当前按钮之一旁边（添加“MediaEmbed”），它应该在工具栏中可见。

查看 CKEditor 文档以更好地了解工具栏的自定义方式可能会有所帮助：

[CKEditor 工具栏](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)

# javascript - How to document return in JavaScript

> ID：11117294
> 
> 赞同：14
> 
> 时间：2012-06-20T10:10:27.613
> 
> 标签：javascript, google-closure-compiler, jsdoc, code-documentation

I'm writing my own library for the project at work for a browser application and I am having the same old problem deciding how to comment the code.

I'm trying to follow the [JsDoc](https://code.google.com/p/jsdoc-toolkit/w/list) syntax, but will probably continue the [Google Closure Compiler](https://developers.google.com/closure/compiler/docs/js-for-compiler) way. I may end up using two @return and @returns tags in the documentation, just for portability sake (when I setup the auto-generation of the documentation).

Now, the question, **how do you document the return of a custom anonymous object from a function?** For example:

```
return {
    username: 'username',
    password: 'password',
    enabled:  true
}; 
```

JsDoc has an example of how a @param can be documented to expect object with certain fields, but not the @returns tag. Similarly, the Google Closure Compiler documentation of a Record Type is vague and has no example to work it out.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T12:02:29.020

闭包编译器使用[JSDoc 注释](http://code.google.com/p/jsdoc-toolkit/)的子集（并添加了一些自己的注释）。有关完整集，请参阅[编译器的注释参考。](https://developers.google.com/closure/compiler/docs/js-for-compiler)JSDoc 注释类似于 JavaDoc 注释，是一个以`/**`（两颗星）开头的注释块。虽然注释的每一行通常都以它自己的开头，`*`但这是一个不需要的约定。每行只允许一个 JSDoc 标签，但标签的参数可以跨越多行。

该注释通常适用于以下语句。这里有些例子：

# 多变的

```
/** @type {string} */ var a; 
```

# 类型铸造

```
var b = /** @type {string} */ (window['foo']); 
```

*注意额外的括号*

# 命名函数

```
/**
 * @param {string} bar
 * @return {boolean}
 */
function foo(bar) { return true; } 
```

# 函数表达式

```
/** @type {function(string):boolean} */
var foo = function(bar) { return true; }

var foo2 =
  /**
   * @param {string} bar
   * @return {boolean}
   */
  function(bar) { return true; } 
```

# 类型定义

复杂类型（包括联合和记录类型）可以使用 typedef 为方便和可维护性起别名。这些注释可以很长，但为了便于阅读，可以分成多行。

```
/** @typedef {{
 *             foo:string,
 *             bar:number,
 *             foobar:number|string
 *           }}
 */
var mytype; 
```

对于您的原始示例，有几种可能的方法来注释这样的函数返回值。最具体且仍然方便的一种是记录类型：

```
/** @return {{username:string, password:string, enabled:boolean}} */
function() {
  return {
    username: 'username',
    password: 'password',
    enabled:  true
  }
} 
```

注意额外的`{}`. 另请记住，记录类型不会阻止属性重命名。

这个注解告诉编译器该函数返回一个带有`username`,`password`和`enabled`属性的匿名类型。其他有效的选项是在别处定义一个接口并将返回值类型转换为该接口。最不具体的注释是`Object`or `*`。

要查看各种可能的注释，请查看[Compiler 项目中的 extern 文件](http://code.google.com/p/closure-compiler/source/browse/#svn/trunk/contrib/externs)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-23T19:04:36.307

一种很好且可移植的方法如下所示，使用 return 作为关键字。[https://github.com/senchalabs/jsduck/wiki/%40return](https://github.com/senchalabs/jsduck/wiki/%40return)

```
/**
 * @return {object} return An object with the following properties
 * @return {string} return.username Some username
 * @return {string} return.password Some password
 * @return {boolean} return.enabled Is the user enabled?
 */
function getObj () {
     return {
         username: 'username',
         password: 'password',
         enabled:  true
      };
} 
```

如果你必须在多个地方使用它，你将不得不复制它，或者使用`@typedef`，但我还没有弄清楚如何添加评论`@typedef`所以我使用类似下面的东西

```
/**
 * @typedef {username:string, password:string, enabled:boolean} MyType
 *  
 *  username: The name of the user 
 *  password: Some password
 *  enabled: Is the user enabled?
 */

/**
 * @return {MyType}
 */
function getObj () {
     return {
         username: 'username',
         password: 'password',
         enabled:  true
      };
} 
```

您也可以在此处尝试建议[如何仅使用 jsdoc 在 webstorm 中记录类型？](https://stackoverflow.com/questions/16609786/how-can-i-document-a-type-in-webstorm-using-just-jsdoc)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:21:08.233

如果把它放在函数的顶部

```
function myFunction() {
    /**
     * Description of my function
     * @return {!Object.<string, string|boolean>} Returns an object containing username, password and enabled information
     */

    // Do stuff
    return {
        username: 'username',
        password: 'password',
        enabled:  true
    }
} 
```

# javascript - 谷歌地图js api版本3多边形信息窗口位置错误

> ID：11117298
> 
> 赞同：2
> 
> 时间：2012-06-20T10:10:37.820
> 
> 标签：javascript, google-maps, google-maps-api-3, polygon

我在循环中有这段代码：

```
 var points = [new google.maps.LatLng(lat1, lon1),
          new google.maps.LatLng(lat2, lon1),
          new google.maps.LatLng(lat2, lon2),
          new google.maps.LatLng(lat1, lon2),
          new google.maps.LatLng(lat1, lon1)
          ];
      bounds.extend(new google.maps.LatLng(lat1, lon1));
      bounds.extend(new google.maps.LatLng(lat2, lon1));
      bounds.extend(new google.maps.LatLng(lat2, lon2));
      bounds.extend(new google.maps.LatLng(lat1, lon2));
      var polygon = new google.maps.Polygon({
                        paths: points,
                        strokeColor: "#f33f00",
                        strokeOpacity: 1,
                        strokeWeight: 1,
                        fillColor: "#ff0000",
                        fillOpacity: 0.2
                    });

    var x1 = Math.min(lon1,lon2);
    var y1 = Math.min(lat1,lat2);
    var x2 = Math.max(lon1,lon2);
    var y2 = Math.max(lat1,lat2);
    var x = x1 + ((x2 - x1) / 2);
    var y = y1 + ((y2 - y1) / 2);
    var cp = new google.maps.LatLng(y,x);
    var infoWindow = new google.maps.InfoWindow();
                    infoWindow.setPosition(cp);
                    infoWindow.setContent(html);

   google.maps.event.addListener(polygon, "click", function() {
                        infoWindow.open(map);
                    });

                    polygon.setMap(map); 
```

我的问题是当我单击每个多边形时，信息窗口会在所有多边形的相同位置打开。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:54:55.250

您正在覆盖每个循环上的 infoWindow 对象。

将与 infoWindow(cp,html) 相关的属性存储在多边形对象中，并使用存储的属性调用`setPosition()`和单击函数内部。`setContent()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T02:44:12.310

我所做的是，全局设置地图，用调用循环外执行相同工作的函数替换代码块，如下所示：

```
function createPolygon(lat1, lon1, lat2, lon2, html)
{
     var points = [new google.maps.LatLng(lat1, lon1),
      new google.maps.LatLng(lat2, lon1),
      new google.maps.LatLng(lat2, lon2),
      new google.maps.LatLng(lat1, lon2),
      new google.maps.LatLng(lat1, lon1)
      ];
  bounds.extend(new google.maps.LatLng(lat1, lon1));
  bounds.extend(new google.maps.LatLng(lat2, lon1));
  bounds.extend(new google.maps.LatLng(lat2, lon2));
  bounds.extend(new google.maps.LatLng(lat1, lon2));
  var polygon = new google.maps.Polygon({
                    paths: points,
                    strokeColor: "#f33f00",
                    strokeOpacity: 1,
                    strokeWeight: 1,
                    fillColor: "#ff0000",
                    fillOpacity: 0.2
                });

var x1 = Math.min(lon1,lon2);
var y1 = Math.min(lat1,lat2);
var x2 = Math.max(lon1,lon2);
var y2 = Math.max(lat1,lat2);
var x = x1 + ((x2 - x1) / 2);
var y = y1 + ((y2 - y1) / 2);
var cp = new google.maps.LatLng(y,x);
var infoWindow = new google.maps.InfoWindow();
                infoWindow.setPosition(cp);
                infoWindow.setContent(html);

 google.maps.event.addListener(polygon, "click", function() {
                    infoWindow.open(map);
                });

                polygon.setMap(map);
} 
```

# uibutton - 每行中带有不同颜色文本的 UIButton

> ID：11117300
> 
> 赞同：2
> 
> 时间：2012-06-20T10:10:42.420
> 
> 标签：uibutton

我想要一个带有两行文本的 UIButton，每行的颜色不同。有可能有这样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:16:39.353

嗨，这个答案仅适用于上述 ios 6 ...

使用 ios 6 的属性文本来实现这一点......

```
NSString* infoString=@"This is an example of Attributed String";

    NSMutableAttributedString *attString=[[NSMutableAttributedString alloc] initWithString:infoString];
    NSInteger _stringLength=[infoString length];

    UIColor *_red=[UIColor redColor];
    UIFont *font=[UIFont fontWithName:@"Helvetica-Bold" size:20.0f];
    [attString addAttribute:NSFontAttributeName value:font range:NSMakeRange(0, _stringLength)];
    [attString addAttribute:NSForegroundColorAttributeName value:_red range:NSMakeRange(0, _stringLength/2)];
    [self.attribButton setAttributedTitle:attString forState:UIControlStateNormal];
    self.attribButton.titleLabel.numberOfLines=2; 
```

试试这样...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:13:20.997

我能想到两种方法：

**方法1（简单）**：将其设为图像按钮

**方法 2（困难）**：制作一个自定义 UIButton，带有 2 个单独的 UILabel，这样您就可以为它们配置不同的颜色

要实现方法 2，您首先创建一个以 UIButton 作为超类的类。然后，覆盖`- (void)drawRect`方法。为了不在 SO 中重复回答，请阅读以下内容：[How to override -drawrect in UIButton subclass?](https://stackoverflow.com/questions/816024/how-to-override-drawrect-in-uibutton-subclass)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T01:33:39.227

```
In Swift

var main_string = "Hello World"
var string_to_color = "World"
var range = (main_string as NSString).rangeOfString(string_to_color)
var attributedString = NSMutableAttributedString(string:main_string)
        attributedString.addAttribute(NSForegroundColorAttributeName, value: appSingleton.appRedColor , range: range)
self.celciusButton.setAttributedTitle(attributedString, forState: UIControlState.Normal) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:16:43.560

是的，当然..!!! 制作您想要显示的图像，然后将图像设置为该按钮的背景..！这很简单...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-28T21:19:03.620

1.  首先，将您的按钮设为“自定义”类型。如果您需要以编程方式执行此操作：

    UIButton* myButton = [UIButton buttonWithType: UIButtonTypeCustom];

    myButton.frame = CGRectMake (x,y,width,height);

2.  现在制作你的标签：

    UILabel* line1 = [[UILabel alloc] initWithFrame:CGRectMake(0,0,buttonWidth,buttonHeight/2)];

    UILabel* line2 = [[UILabel alloc] initWithFrame:CGRectMake(0,buttonHeight/2,buttonWidth,buttonHeight/2)];

3.  并分配您想要的文本颜色：

    line1.textColor = [UIColor blueColor];

    line2.textColor = [UIColor redColor];

4.  然后将标签添加到按钮，并将按钮添加到视图：

    [myButton addSubview:line1];

    [myButton addSubview:line2];

    [self.view addSubview:myButton]; // 仅当您以编程方式创建按钮时

# php - php解析和空白错误

> ID：11117303
> 
> 赞同：0
> 
> 时间：2012-06-20T10:10:56.893
> 
> 标签：php

```
echo "<OPTION value=$data2['product_id']>$data2['product_id']</OPTION>"; 
```

这给了我以下错误：

> PHP 解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

你能帮帮我吗？如何修复此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:12:39.623

```
echo "<OPTION value=".$data2['product_id'].">".$data2['product_id']."</OPTION>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:12:02.090

任何一个

```
echo "<OPTION value=$data2[product_id]>$data2[product_id]</OPTION>"; 
```

或者

```
echo "<OPTION value={$data2['product_id']}>{$data2['product_id']}</OPTION>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:12:48.547

可以通过将变量包装在花括号内来消除该错误：

```
echo "<OPTION value={$data2['product_id']}>{$data2['product_id']}</OPTION>"; 
```

虽然这会更好（转义输出）：

```
echo '<option value="', 
  htmlspecialchars($data2['product_id']), '">', 
  htmlspecialchars($data2['product_id']), 
  '</option>'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T10:13:07.557

只需使用：

```
echo "<OPTION value=$data2[product_id]>$data2[product_id]</OPTION>"; 
```

或者

```
echo "<OPTION value=" . $data2['product_id'] . ">" . $data2['product_id'] . "</OPTION>"; 
```

或者

```
echo sprintf("<OPTION value=%s>%s</OPTION>", $data2['product_id'], $data2['product_id']); // separate logic from presentation 
```

在双引号字符串中引用关联数组或数值数组时，不得使用引号*。*

我建议您在 HTML 属性中**使用**`htmlentities()`引号，并使用and `htmlspecialchars()`for`value="..."`和里面的文本`OPTION`作为一般的最佳实践。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T10:14:51.497

我更喜欢使用[`printf`](http://php.net/printf)(or [`sprintf`](http://php.net/sprintf)) 而不是将变量放在字符串中，因为我认为它更容易阅读。如果值包含或，您可能还希望使用 HTML 转义值[`htmlspecialchars`](http://php.net/htmlspecialchars)以避免错误。`<``>`

```
$prodid = htmlspecialchars($data2['product_id']);
printf('<OPTION value="%s">%s</OPTION>',
       $prodid,
       $prodid); 
```

# jsf-2 - jsf2通过javascript从bean获取更新值

> ID：11117307
> 
> 赞同：0
> 
> 时间：2012-06-20T10:11:04.470
> 
> 标签：jsf-2, richfaces

这是我的问题：我有一些包含 users`<rich:dataTable>`的表和用于添加新用户的表`<table>`。然后我点击`<a4j:commandButton oncomplete="fnIsAdded()">`我提交的表单，`fnIsAdded()`我需要从 bean 传递值，比如 `<a4j:commandButton oncomplete="fnIsAdded(#{bean.somProperty})">`. 这是行不通的，所以我需要先将它传递给某个隐藏字段`<h:inputHidden value="#{bean.somProperty}">`以及何时通过 javascript 获取它。我现在的问题是，如果从 javascript （从隐藏字段）中获取的值在 bean 中更改，则不会刷新它。一旦它获得一些价值，它就会保持静止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:59:04.567

如果`#{bean.somProperty}`返回的字符串在 JavaScript 语法中不代表布尔值或数字，则需要将其引用，否则 JavaScript 会将其解释为变量名。

```
<a4j:commandButton ... oncomplete="fnIsAdded('#{bean.somProperty}')" /> 
```

至于具体问题，只需 ajax-render 组件。

```
<a4j:commandButton ... render="hidden" />
<h:inputHidden id="hidden" ... /> 
```

# heroku - 是否可以在 Heroku 上安装 Freetype 或 Fontconfig？

> ID：11117310
> 
> 赞同：1
> 
> 时间：2012-06-20T10:11:19.623
> 
> 标签：heroku, phantomjs, freetype, fontconfig

我正在尝试让 phantom.js 在 heroku 上运行，到目前为止，我已经成功地启动了一个自定义 buildpack 并运行了二进制文件。

但是，似乎为了正确渲染，我还需要安装 Freetype 和 Fontconfig。Heroku 似乎没有它们，我想知道这是否可行，或者我是否需要放弃这个选项并找到另一个解决方案。

有谁知道如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T09:26:33.040

另一种可能对您有用的方法是在您的应用程序运行的测功机上安装必要的字体作为系统字体。

简而言之：**在应用程序启动时将每个字体文件的****相关符号链接**放入 ~/.fonts/ 。

 **然后，在应用程序的 vendor/fonts 文件夹中收集您需要的 TTF，版本受控且整洁。

如果您要使用 Ruby on Rails，您可以完全按照以下方式进行操作，但在您的 Node.js 环境中也可能非常可行。

[这篇面向 Rails 的博客文章详细介绍了这件事](http://www.mobalean.com/blog/2011/08/02/pdf-generation-and-heroku)，但这里是作为初始化程序的相关代码，您可以调用 config/initializers/system_fonts.rb：

```
if Rails.env.production?
  font_dir = File.join(Dir.home, ".fonts")
  Dir.mkdir(font_dir) unless Dir.exists?(font_dir)

  Dir.glob(Rails.root.join("vendor", "fonts", "*")).each do |font|
    target = File.join(font_dir, File.basename(font))
    File.symlink(font, target) unless File.exists?(target)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T15:17:12.443

也许您可以简单地使用第三方提出的 phantomjs buildpack。你可以在这里找到：[https](https://devcenter.heroku.com/articles/third-party-buildpacks) : //devcenter.heroku.com/articles/third-party-buildpacks 一些第三方 buildpack。其中之一是phantomjs。这个 buildpack 已经包含了 Freetype 和 Fontconfig！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T01:35:25.297

Heroku 不支持基于每个应用程序“安装”二进制文件。[相反，它遵循依赖隔离](http://www.12factor.net/dependencies)的十二因素原则，该原则建议所有依赖项都是应用程序的包。因此，您将在应用程序结构中包含 Freetype 和 Fontconfig 箱，并调整 PATH 以包含此目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-01T15:38:47.097

根据[https://devcenter.heroku.com/articles/cedar-ubuntu-packages](https://devcenter.heroku.com/articles/cedar-ubuntu-packages) fontconfig 应该（现在）在 Cedar-10- 和 Cedar-14-stack 上都可用。**

# javascript - 在RequireJS中的任何其他代码之前不加载任何AMD模块？

> ID：11117312
> 
> 赞同：2
> 
> 时间：2012-06-20T10:11:25.430
> 
> 标签：javascript, module, requirejs, amd

如何在加载任何其他模块之前加载非 AMD 模块？我有一个用于 console.x 的 shim，但在加载它之前遇到了麻烦。

我还希望仅在条件为真时才加载它 - 所以在这种情况下，因为它是一个控制台垫片，我想测试一下“控制台”是否未定义，然后只在条件为真时加载控制台垫片。

请注意，我正在使用 RequireJS 并且也有 Modernizr 可供使用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:07:30.810

这个演示展示了做你想做的事情的基本方法。

以下脚本：

[http://jsfiddle.net/bZB9L/6/](http://jsfiddle.net/bZB9L/6/)

```
<script>
if ("undefined" === typeof window["mozInnerScreenX"]) {
    document.writeln("<script src=http://jsbin.com/erevub/4></scr" + "ipt>");
}
</script>
<script>
alert(mozInnerScreenX);
</script> 
```

从此脚本导入：

[http://jsbin.com/erevub/4](http://jsbin.com/erevub/4)

```
window["mozInnerScreenX"] = window["mozInnerScreenX"] || (function () {
    return 999;
}()); 
```

我使用`mozInnerScreenX`了 shim 属性，因为我机器上的所有浏览器都有`console`.

使用的第一个脚本块`document.writeln`必须位于与使用 shim 的以下脚本不同的脚本块中。

一个坏主意有很多原因`document.writeln`，但我不知道你的完整用例，所以这是最简单的。

`999`我收到有关 IE 和 Chrome（垫片值）和`1074.5`Firefox（实际值）的警报。

# c# - 无法使用 [] 将索引应用于“System.IntPtr”类型的表达式

> ID：11117313
> 
> 赞同：1
> 
> 时间：2012-06-20T10:11:25.733
> 
> 标签：c#

一直在阅读这是一个“不安全”的代码，而“IntPtr”通常不会以这种方式运行。

有人可以提出替代方案或解决方案。

我的技能仅限于 C#。谢谢你的帮助 ！！

```
for (num4 = 1; num4 < i; num4 += 2)
{  
    for (num = num4; num <= length; num += num5)
    {
        num2 = num + i;
        num11 = (num7 * numRef[(num2 - 1) * 8]) - (num8 * numRef[num2 * 8]);
        double num10 = (num7 * numRef[num2 * 8]) + (num8 * numRef[(num2 - 1) * 8]);
        numRef[(num2 - 1) * 8] = numRef[(num - 1) * 8] - num11;
        numRef[num2 * 8] = numRef[num * 8] - num10;
        IntPtr ptr1 = (IntPtr)(numRef + ((num - 1) * 8));
        //ptr1[0] += (IntPtr) num11;
        ptr1[0] += (IntPtr)num11;
        IntPtr ptr2 = (IntPtr)(numRef + (num * 8));
        //ptr2[0] += (IntPtr) num10;
        ptr2[0] += (IntPtr)num10;
    }

    num7 = (((num9 = num7) * num13) - (num8 * num14)) + num7;
    num8 = ((num8 * num13) + (num9 * num14)) + num8;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:23:43.643

如果要在 C# 中使用指针运算，则需要使用 unsafe 和[fixed 关键字](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.80%29.aspx)，如下所示：

```
public unsafe void Foo()
{
    int[] managedArray = new int[100000];

    // Pin the pointer on the managed heap 
    fixed (int * numRef = managedArray)
    {
        for (num4 = 1; num4 < i; num4 += 2)
        {  
            for (num = num4; num <= length; num += num5)
            {
                num2 = num + i;
                num11 = (num7 * numRef[(num2 - 1) * 8]) - (num8 * numRef[num2 * 8]);
                double num10 = (num7 * numRef[num2 * 8]) + (num8 * numRef[(num2 - 1) * 8]);

                // You can now index the pointer
                // and use pointer arithmetic 
                numRef[(num2 - 1) * 8] = numRef[(num - 1) * 8] - num11;
                numRef[num2 * 8] = numRef[num * 8] - num10;
                ... 
                int * offsetPtr = numRef + 100; 

                // Equivalent to setting numRef[105] = 5;
                offsetPtr[i+5] = 5;
            }

            num7 = (((num9 = num7) * num13) - (num8 * num14)) + num7;
            num8 = ((num8 * num13) + (num9 * num14)) + num8;
        }
    }
} 
```

# lua - 当“a”为 47 时，为什么“如果 a == 40 或 42”评估为“真”？

> ID：11117319
> 
> 赞同：2
> 
> 时间：2012-06-20T10:11:41.357
> 
> 标签：lua, lua-5.2

我是 Lua 的新手，并试图在我的代码中完成这种类型的事情，但它不起作用。这里的语法和一切都是绝对正确的，但是 elseif 条件会被折腾，条件检查会出错。

因此，为此我得到的输出是：Value = 40 或 42，这是错误的

我使用的 Lua 版本是 5.2

```
function call(a)
    print (a)
    if a == 40 or 42 then
    print ("Value = 40 or 42")
    elseif a == 43 or 45 then
    print ("Value = 43 or 45")
    elseif a == 46 or 47 then
    print ("Value = 46 or 47")
    end
end

a = 47
call(a) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T16:58:32.967

```
if a == 40 or 42 then 
```

您想`a`与 40*和*42 进行比较，但`==`不是这样。这是一个二元运算符，它比较两个且仅两个项目，所以 Lua 看到你的代码是这样的：

```
if (a == 40) or (42) then 
```

在 Lua 中，任何不为真`nil`或`false`评估为真的东西，`42`在这个表达式中都是真。所以你真正写的是：

```
if (a == 40) or true then 
```

这与以下内容相同：

```
if true then 
```

所有比较运算符都是二元的（即两个且只有两个操作数），因此您想要比较`a`多个事物，您需要使用多个比较运算符：

```
if (a == 40) or (a == 42) then 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:48:43.757

您错误地使用了关系运算符。 `or`有两个参数。参数 1 是关系表达式 (a==40)，参数 2 只是数字 42 而不是 (a==42)

你想做，`(a==40) or (a==42)`但发生的事情是`(a==40) or (42)`

所以你的代码应该是：

```
function call(a)
    print (a)
    if a == 40 or a == 42 then
        print ("Value = 40 or 42")
    elseif a == 43 or a == 45 then
        print ("Value = 43 or 45")
    elseif a == 46 or a == 47 then
        print ("Value = 46 or 47")
    end
end

a = 47
call(a) 
```

**编辑**

对不起。泥确实是对的。感谢您指出这一点。编辑了我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:01:45.837

'if 47 == 40 or 42' 是一个三元语句。如果 47 == 40，则返回 true，如果 false，则返回 42。'true' 和 '42' 都不是 false。

如果你希望它在 a 等于 40 或 42 时返回 true，你可以这样写：

'如果 a == 40 或 a == 42'

# r - 解决 R 中双引号内的双引号问题

> ID：11117321
> 
> 赞同：6
> 
> 时间：2012-06-20T10:11:44.570
> 
> 标签：r

使用 R，当我们将双引号放在双引号内时：

```
y <- " " " " 
```

它会结束

> 错误：“y <-”“”“”中出现意外的字符串常量

我的问题是如何删除所有检测到的双引号或在主双引号中转换为单引号。

例如：

```
y <- "I'm watching "Prometheus"." 
y 
```

期望的结果是

```
#[1] "I'm watching Prometheus." 
```

或者

```
#[1] "I'm watching 'Prometheus'." 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:34:33.990

您是在解析来自文件的字符串输入还是某些东西的标准输入？

`scan(what='character',sep='\n')`将从中读取数据`stdin()`并自动转义引号。如果来自文件，则相同

```
>scan(what="character",sep="\n",allowEscapes=T)
1: I'm watching "Prometheus"
2: 
Read 1 item
[1] "I'm watching \"Prometheus\""
>
>scan(what="character",sep="\n",allowEscapes=T)
1: "I'm watching "Prometheus""
2: 
Read 1 item
[1] "\"I'm watching \"Prometheus\"\"" 
```

一旦你得到你的输入，你可以使用正则表达式来替换转义的内引号......（我认为！ - 可能是一个复杂的正则表达式）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T10:21:46.923

我可能不明白，但

```
gsub("\"","","I'm watching \"Prometheus\".") 
```

或者

```
gsub("\"","'","I'm watching \"Prometheus\".") 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:48:43.797

```
y <-  "I\'m watching 'Prometheus'."

[1] "I'm watching 'Prometheus'."

y <-  "I\'m watching Prometheus."

[1] "I'm watching Prometheus." 
```

# c# - SQL 数据库模型

> ID：11117323
> 
> 赞同：0
> 
> 时间：2012-06-20T10:11:49.590
> 
> 标签：c#, sql, database, linq, database-design

我正在为如何为我要构建的数据库绘制模型而苦苦挣扎。正确建模数据库后，我将在 C# 中使用 SQL2LINQ。

我正在研究的第一部分是为分发列表设计 SQL 表。

这些 DL 看起来相当复杂，因为适用以下规则：

1.  存在三种不同类型的 DL（用于特定事件）。
2.  每种类型的 DL 将包含多个 DL（可以超过 10 个）。
3.  一个人可以处于所有三种不同类型的 DL 中。
4.  一个人可以在多个相同类型的 DL 中。

对于此人，我将持有以下信息：

1.  名字
2.  姓
3.  联系电话
4.  电子邮件地址

我不喜欢重复信息的想法，在数据库中多次拥有同一个人；那似乎不是那么干净。

任何帮助将不胜感激，我不能完全围绕最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:20:31.527

您需要了解外键和父/子关系。

我不确定我是否会完全按照您的描述进行设计。您可以为每个分发列表创建一个单独的表格，或者您可以有一个单独的表格，其中包含一列来说明它属于哪个事件类型。

我不明白为什么分发列表需要递归，但是您可以与自己建立外键关系。以这种方式编写查询将更难，但可以由具有足够技能的人完成。谷歌搜索“递归 SQL”。

在它们之间有一个 PERSON 表、一个 DISTRIBUTION_LIST 表和一个 JOIN 表。听起来 PERSON 和 DISTRIBUTION_LIST 对我来说是多对多的关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:22:51.760

听起来好像您只需要人员和分发列表之间的多对多关系，您可以使用联结表对其进行建模：

**人**

*   ID
*   名字
*   ETC

**分布列表条目**

*   ID
*   分发列表 ID
*   个人身份

**分布列表**

*   ID
*   类型

您可以将其直接存储在分发列表表中，也可以将其作为包含分发列表类型附加信息`Type`的表的外键。`DistributionListTypes`

# objective-c - 如何从 NSDate 获取没有时间的日期？

> ID：11117324
> 
> 赞同：34
> 
> 时间：2012-06-20T10:11:54.783
> 
> 标签：objective-c, nsdate

我想得到日期，`NSDate`不需要时间。例子：

```
NSDate* today = [NSDate date];  // want to give 20-06-2012 only 
```

我想在不显示时间的情况下获取今天的日期并将其用于`NSDate`变量或字符串变量中。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-07-13T15:15:32.517

以防其他人寻找这个。我使用了以下内容：

```
NSDateComponents *components = [[NSCalendar currentCalendar] 
             components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit 
              fromDate:[NSDate date]];
NSDate *startDate = [[NSCalendar currentCalendar] 
             dateFromComponents:components]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-13T18:36:03.670

在性能方面，这种方法可能比使用**NSDateFormatter**或**NSCalendar**更好。

**斯威夫特 3, 4, 5**

```
let timeInterval = floor(Date().timeIntervalSinceReferenceDate / 86400) * 86400
let newDate = Date(timeIntervalSinceReferenceDate: timeInterval) 
```

**斯威夫特 2**

```
let timeInterval = floor(NSDate().timeIntervalSinceReferenceDate / 86400) * 86400
let newDate = NSDate(timeIntervalSinceReferenceDate: timeInterval) 
```

您还可以考虑时区（此功能是 NSDate 扩展的一部分）：

**斯威夫特 3, 4, 5**

```
extension Date {

    func dateWithoutTime() -> Date {
        let timeZone = TimeZone.current
        let timeIntervalWithTimeZone = self.timeIntervalSinceReferenceDate + Double(timeZone.secondsFromGMT())
        let timeInterval = floor(timeIntervalWithTimeZone / 86400) * 86400
        return Date(timeIntervalSinceReferenceDate: timeInterval)
    }

} 
```

**斯威夫特 2**

```
extension NSDate {

    func dateWithoutTime() -> NSDate {
        let timeZone = NSTimeZone.localTimeZone()
        let timeIntervalWithTimeZone = self.timeIntervalSinceReferenceDate + Double(timeZone.secondsFromGMT)
        let timeInterval = floor(timeIntervalWithTimeZone / 86400) * 86400
        return NSDate(timeIntervalSinceReferenceDate: timeInterval)
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-18T08:25:40.423

使用此方法

```
- (NSString *)curentDateStringFromDate:(NSDate *)dateTimeInLine withFormat:(NSString *)dateFormat {
    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];

    [formatter setDateFormat:dateFormat];

    NSString *convertedString = [formatter stringFromDate:dateTimeInLine];

    return convertedString;
} 
```

像下面这样使用它

```
NSString *dateString = [self curentDateStringFromDate:[NSDate date] withFormat:@"dd-MM-yyyy"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-27T20:19:00.200

如果有人感兴趣，我实现了一个 Swift 扩展。这将为您提供 00:00:00 UTC 的当前日期（在您的时区中），我认为这是*没有 time 的当前日期*的含义。

我认为它比@Murlakatam 的答案更好，因为它不涉及弄乱原始`timeIntervalSinceReferenceDate`数据，这就是我们首先使用日期对象的原因。

```
extension NSDate
{
    // Calendar objects are expensive to create to it's better to create and reuse only one.
    private static var cachedNoTimeZoneCalendar: NSCalendar = {
        let calendar = NSCalendar.currentCalendar()
        calendar.timeZone = NSTimeZone(forSecondsFromGMT: 0)
        return calendar
    }()

    func dateWithoutTime() -> NSDate?
    {
        let dateComponents = NSCalendar.currentCalendar().components([.Year, .Month, .Day], fromDate: self)
        return NSDate.cachedNoTimeZoneCalendar.dateFromComponents(dateComponents)
    }
} 
```

# objective-c - 如何（高度）压缩文件并在 iOS 上解压缩

> ID：11117325
> 
> 赞同：1
> 
> 时间：2012-06-20T10:12:01.030
> 
> 标签：objective-c, ios, compression, zip

我有一些语音文件，我通过应用内购买销售（通过 WIFI 下载）。
一个声音大小约为 200MB，所以我的问题是：

我怎样才能压缩这个语言文件以获得不那么大的压缩文件并且可以在 iOS 上解压缩？

***只有拉链是不够的。那么还有其他想法吗？图片？柏油？gz？***

*啜饮后的文件大小为 180MB，如果可能的话，我想要更小的大小*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:14:43.757

尝试对您的声音进行下采样。在 iOS 中解压缩对于 iPhone 应用程序来说是一项繁重的任务。

# android - 显示自定义 onReceivedError 屏幕

> ID：11117329
> 
> 赞同：0
> 
> 时间：2012-06-20T10:12:07.770
> 
> 标签：android, error-handling, webview

在我的 WebView 应用程序中，我想要一个自定义的 onReceivedError 屏幕。![网页不可用](../Images/03bf70f39be78e840649743225aace53.png)

相反，我想启动一个自定义 xml 定义的视图，并可以执行一些操作。（与 webview 相同的课程要容易得多）。

这个屏幕最简单可靠的替代品是什么？对话框或某种 setContentView？如果从不显示标准的“未找到网页”，它看起来会好得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:15:53.917

创建一个包含 webview 的 xml。

在 onReceivedError 方法中，显示一个警告用户的对话框。单击确定按钮后，您可以根据需要重新加载隐藏 webview 的 webview

# qt - 更改资源（如图标）不会重新编译 .qrc 文件

> ID：11117331
> 
> 赞同：4
> 
> 时间：2012-06-20T10:12:11.733
> 
> 标签：qt, visual-studio-2005

我正在使用带有 QT Visual Studio 集成的 Visual Studio 2005 IDE。QT版本是4.7.3。

我有一个项目，其中一些资源在 QT 资源集合文件 (.qrc) 中定义。问题是每当我更改 .qrc 引用的某些文件的内容（例如编辑图像和保存）时，这些更改都不会反映在应用程序中。原因是 .qrc 不会由 IDE 自动重新编译。每次更改资源时，我都必须手动重新编译它。

以前有人遇到过这个问题吗？任何已知的解决方法？
注意：该文件具有正确的自定义构建工具设置以使其编译。但是对 .qrc 文件依赖项的更改不会标记为重新编译。

编辑：这里为 QT Creator 提到了一个类似的错误：
[QT Creator Bug: .qrc doesn't recompile](https://bugreports.qt-project.org/browse/QTCREATORBUG-1627)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:41:14.893

我遇到了同样的问题：使其工作的唯一方法是将文件路径添加到`.qrc`. 这真的很烦人，我认为您不能在其中使用通配符，例如`*.ico`. 你必须把这样的东西： `.\myicon.ico;.\anothericon.ico;.\somefile.xml`

并**确保**为所有配置和平台设置它。

QtVSAddin 确实应该这样做，但似乎没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T19:24:46.607

我有类似的问题。显然，Windows 将最常用的文件保存在缓存中。搜索 C:\ 以查找有问题的文件名。打赌你可以在 Windows 驱动器上找到它。只需将其删除并重建所有内容。

# git - Git 对 SCM 视图中的持续交付（集成）有积极影响吗？

> ID：11117334
> 
> 赞同：2
> 
> 时间：2012-06-20T10:12:24.850
> 
> 标签：git, svn, continuous-integration, continuous-delivery

我看过很多关于“Git vs SVN”主题的引文，通常的答案是

1.  你可以在任何地方提交
2.  节省空间
3.  快速分支

...

但是在这里我想讨论一下是否有利于持续交付？在我看来，Git 鼓励我们经常分支，但这与持续交付的概念背道而驰，后者主张经常合并到主线，而不是在功能上发布时分支。

所以，当我想为我们的持续交付选择一个版本控制系统时，我有点困惑，Git 还是 SVN？

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:26:23.697

我认为您必须首先了解 b/w **git 和 SVN** 的区别 看看这个链接。[为什么 Git 比 Subversion 更好？](https://stackoverflow.com/questions/871/why-is-git-better-than-subversion)

我想在此之后你可能知道你必须选择哪一个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:53:57.763

首先，我永远不会选择svn。可能有一些情况，但总的来说 git 更加灵活。

也就是说，让我们看看持续交付 (CD)。在我看来，这意味着经常部署。这也意味着您需要某种持续集成 (CI)，您可以在其中运行测试并决定版本是否发布。这也意味着您需要某种工作流程来确定如何测试和发布哪个版本。

回到 svn 时代，我们没有任何分支机构，因为这很麻烦。每个人都会提交到存储库，然后负责运送的人会查看一切是否正常并使用他的存储库版本进行运送。

这显然不适用于 CD，因为您至少需要一个稳定的分支。这个分支应该只填充软件的稳定版本，然后才能投入生产。您还需要一个测试分支，其中合并了准备好进行测试然后部署的功能。并且您需要任意数量的开发分支，其中尚未准备好功能。

别搞错了：你可以用 svn 做 CD。只是 git 被设计为与不同服务器上的许多分支和远程存储库一起工作，而 svn 被设计为作为每个人都可以提交的单个存储库工作。

您也可能会遇到用户管理问题。我不了解svn，但我认为您不能对不同的分支拥有不同的权限。这意味着对 repo 具有写访问权限的每个人都可以破坏您的应用程序并部署这些东西。另一方面，很容易建立一个只有高级开发人员才具有写入权限并被部署的存储库。所有其他开发人员都在另一个远程存储库上工作。然后负责人拉出所有东西并将它们推送到另一台服务器，以便部署它们。

这一切都源于 git 被设计成有许多存储库，这些存储库会定期合并、分支、分叉和修补（开源项目）。另一方面，svn 更像是一种公司软件，您需要在其中对文件进行版本控制，并且可能有一个或两个分支用于不同版本的软件，但仅此而已。

最后一件事：我每天都会选择 git 而不是 svn。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:53:06.810

你的担心是有道理的。来自[http://martinfowler.com/bliki/FeatureBranch.html](http://martinfowler.com/bliki/FeatureBranch.html)

> 尽管许多人将 DVCS 与特征分支联系在一起，但它们可以与 CI 一起使用。您需要做的就是将一个存储库上的一个分支标记为主线。*如果每个人每天都在拉和推，那么你就有了一个 CI 主线。*事实上，对于一个纪律严明的团队，我通常更愿意在 CI 项目中使用 DVCS，而不是集中式项目。如果团队纪律性较差，我会担心 DVCS 会将人们推向长期存在的分支，而集中式 VCS 和不愿分支会将他们推向频繁的主线提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T19:39:34.023

无论是 Subversion 还是 Git，如果工作流程正确，您应该没问题。每个版本控制系统都支持分支，有些人认为一侧或另一侧的草更绿，但事实是版本控制是一种商品。

对于围绕版本控制系统的基础架构，通常称为应用程序生命周期管理（如持续集成），更重要的目标是用于将版本控制系统与其他拼图集成的工具的成熟度。紧密的 IDE 集成也很好，可以使开发人员的时间尽可能高效。

你会发现很多 Git 狂热者活跃在论坛上，但 Subversion 拥有（并且是今天）最流行的版本控制系统是有原因的。我试图保持不可知论，但要反驳一些“svn 糟透了”的言论，您可能想阅读以下内容： [http ://steveko.wordpress.com/2012/02/24/10-things-i-hate-about-git /](http://steveko.wordpress.com/2012/02/24/10-things-i-hate-about-git/)

# sql - SQL 服务器数据优化顾问错误

> ID：11117345
> 
> 赞同：4
> 
> 时间：2012-06-20T10:12:52.110
> 
> 标签：sql, performance, sql-server-2008

我第一次使用 SQL Server 2008 DTA，我收到以下警告消息

> 55% 消耗的工作负载存在语法错误

正因为如此，我没有看到任何调整我的数据库的建议。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-22T15:15:26.513

如果提交的工作负载不再有效，这可能是正常的。

例如，假设您有一个表（也是临时表）并在您记录在工作负载中的查询中引用了该表。如果您删除表或临时表不再存在，工作负载仍会引用它，并且 DTA 将引发语法错误。

检查工作量，应该可以在management studio中打开，这样就可以验证了。

请注意临时表，特别是如果使用`SELECT INTO`而不是创建的临时表，`INSERT INTO`似乎 DTA 无法正确解析。

# c++ - 将引用传递给 C++ 构造函数并将它们保存为引用或非引用类型

> ID：11117347
> 
> 赞同：7
> 
> 时间：2012-06-20T10:12:58.397
> 
> 标签：c++, reference, constructor, pass-by-reference

我想知道这些是否基本相同。

```
class ExampleClass {
    public:
        ExampleClass(Object& newObj) : obj(newObj) {}
    private:
        Object obj;
}

class ExampleClass2 {
    public:
        ExampleClass2(Object& newObj) : objReference(newObj) {}
    private:
        Object& objReference;
} 
```

那么这对任何一个课程都不起作用吗？

```
ExampleClass* getExampleObject() {
    Object obj;
    return new ExampleClass(obj);
}

ExampleClass2* getExample2Object() {
    Object obj;
    return new ExampleClass2(obj);
}

void main() {
    ExampleClass* ec = getExampleObject();
    ExampleClass2* ec2 = getExample2Object();
    //Do something involving the member objects of ec and ec2
} 
```

那么在两个 getExampleObject 方法之后成员对象是否无效？ExampleClass 的构造函数不保存其构造函数中引用的对象的副本吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T10:17:48.780

`ExampleClass`很好，因为它需要在其构造函数参数中引用的对象的副本。

`ExampleClass2`要求在其构造函数参数中引用的对象在`ExampleClass2`实例的生命周期内存在（因为它存储对对象的引用，所以它不会复制它）。如果没有，那么`ExampleClass2`只要它所引用的对象被破坏，实例就会有一个悬空引用。`getExample2Object()`函数在返回`obj`时被破坏就是这种情况。`getExample2Object()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:19:52.040

> 我想知道这些是否基本相同。

不，他们不是。`Example`的构造函数接受一个对象引用并构造一个成员对象以使用传递的对象。该对象不是引用而是副本。在 的情况下`Example2`，您实际上是在`objReference`引用 ctor 参数中传递的对象。只要`newObj`有生之年，你就很好。

这

```
Object obj;
return new ExampleClass2(obj); 
```

是失败的经典案例。一旦函数返回，您将有一个悬空引用。

# php - 通过 facebook API 上传照片 - 路径名问题

> ID：11117348
> 
> 赞同：0
> 
> 时间：2012-06-20T10:12:58.767
> 
> 标签：php, image, facebook-graph-api

我目前在通过 facebook API 上传图像时遇到问题 - 我没有通过 API 返回任何错误，此时我认为这可能是我传入的文件路径不正确的问题。

用户使用该应用程序后，该图像存储在我们的服务器上，然后我想将其发布到 Facebook。

我的代码如下：

运行后我没有收到来自 API 的响应，而如果我故意更改 oauth_token 我会收到一个错误（所以我知道数据肯定在发布）

我也在打印 args 数组，这样我就可以准确地看到我发布的内容：

这是回应。

如果我在 @ 符号之后导航到 URL，即使我删除了 @C:\Domains 并替换为 www，它也会被破坏。如果用户知道文件名，我尝试传递用户实际可以导航到的 URL

例如[https://www.example.co.uk/competition/fb/photos/collagetest.jpg](https://www.example.co.uk/competition/fb/photos/collagetest.jpg)

^ 这是一个有效的链接，但在传递图像时仍未实际上传。

任何帮助将不胜感激！

```
Array ( [message] => Photo from ********[image] => @C:\Domains\******.co.uk\wwwroot\v2\competition\fb\photos\collagetest.jpg )

//upload photo
            $file= './photos/'.basename('collagetest.jpg');
            $args = array(
               'message' => 'Photo from friendbooth',
            );
            $args['image'] = '@' . realpath($file);
            $ch = curl_init();
            $url = 'https://graph.facebook.com/photos?access_token='.$_SESSION['oauth_token'];
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_HEADER, false);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_POST, true);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
            $data = curl_exec($ch);
            print_r($args);
            //returns the photo id
            print_r(json_decode($data,true));

            ?>
            <img src="collagetest.jpg" />
            <? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:36:57.697

> 如果我在 @ 符号之后导航到 URL，则它已损坏

“破碎”是什么意思？

该文件系统路径是否可以从您的 PHP 脚本中读取？（请*检查*，不要*猜测*。）

> 即使我删除 @C:\Domains 并替换为 www。我试过传入网址

在这个地方给出一个 URL 是胡说八道——这里需要一个文件系统路径。（你*知道*两者的区别吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:47:10.097

原来它最终与文件路径无关！

添加

```
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
            curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); 
```

彻底解决问题！希望这对将来的其他人有所帮助。如果发布到 HTTPS 网址，如果您没有收到任何响应，请尝试添加以上内容（错误消息等意味着您收到了响应）

# java - 使用 hql 检查 ArrayList 是否包含元素

> ID：11117359
> 
> 赞同：0
> 
> 时间：2012-06-20T10:13:31.233
> 
> 标签：java, hql

我正在使用 hql 请求来检查名为 SharedItems 并映射为 java.util.ArrayList 的列是否包含一些文本，如下所示：

```
where 'someText' in elements(SharedItems) 
```

这没有按预期工作当“SharedItems”列包含空值时，它显示：

```
Wrapped Exception: null
at com.xpn.xwiki.store.XWikiHibernateStore.search(XWikiHibernateStore.java:2398)
at com.xpn.xwiki.store.XWikiHibernateStore.search(XWikiHibernateStore.java:2327)
at com.xpn.xwiki.store.XWikiHibernateStore.search(XWikiHibernateStore.java:2315)
at com.xpn.xwiki.store.XWikiCacheStore.search(XWikiCacheStore.java:659)
at com.xpn.xwiki.XWiki.search(XWiki.java:1747)
at com.xpn.xwiki.api.XWiki.search(XWiki.java:512)
at sun.reflect.GeneratedMethodAccessor610.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.doInvoke(UberspectImpl.java:389)
at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.invoke(UberspectImpl.java:378)
at org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:270)
... 137 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:24:20.427

[我在这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)找到了对这个问题的回应：

> 请注意，这些结构 - size、elements、indices、minindex、maxindex、minelement、maxelement - 只能在 Hibernate3 的 where 子句中使用。
> 
> 索引集合的元素（数组、列表和映射）只能在 where 子句中通过索引来引用。

# c++ - 保留 BOOL 而不是 bool

> ID：11117362
> 
> 赞同：3
> 
> 时间：2012-06-20T10:13:41.853
> 
> 标签：c++, boolean

我知道，这`bool`是在 C++ 中使用的，而`BOOL`它是 Microsoft 特定的类型，被定义为`int`.

我的代码正在使用`BOOL`，因为它是为 Windows 开始的，但是`BOOL`当我将它移植到 Mac 时，我试图在不将代码从 bool 更改为 bool 的情况下保持相同的方式。

像这样的东西可以吗？

```
 typedef int8_t _Bool;         
    typedef _Bool (BOOL);
    static const BOOL False = 0;
    static const BOOL True = 1; 
```

如果是，有没有更好的方法，为什么？
如果不是，那么为什么以及我应该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T10:16:43.540

我不明白为什么一个好的 IDE 不能将全局从 BOOL 更改为 bool。我宁愿有更大的便携性。我不喜欢 typedef，因为它更难阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:18:37.563

我看到滚动你自己的最大问题`bool`是识别的模板规范`bool`将无法识别`BOOL`，采用默认路线。具体来说，`vector<bool>`使用不同的代码库通过将位打包到向量的表示中来节省空间；using`vector<BOOL>`将导致大约八倍大的表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:16:30.240

您可以在最顶层的头文件中执行以下操作：

```
#ifndef /* MICROSOFT specific macro */
typedef bool BOOL;
static const BOOL True  = true;  // True  or TRUE
static const BOOL False = false; // False or FALSE
#endif 
```

其他选项可以使用编译时选项来预定义宏，例如`g++ -DBOOL=bool`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T11:31:52.930

由于被`BOOL`定义*为*. `int`_*`int`*

 *因此，我会选择类似的东西：

```
#if NOT_MICROSOFT
    typedef int BOOL;
    #define TRUE 1
    #define FALSE 0
#endif 
```

如果您有机会检查您移植的代码是否可以正常工作，无论类型`BOOL`是真的`int`还是真的`bool`，那么您很可能有机会将其更改为使用`bool`（或使用`int8_t`，无论您喜欢什么）。*

# c# - 使用反射获取静态方法及其参数

> ID：11117372
> 
> 赞同：6
> 
> 时间：2012-06-20T10:14:08.047
> 
> 标签：c#, reflection

我正在使用带有参数的公共静态类和静态方法：

```
public static class WLR3Logon
{
   static void getLogon(int accountTypeID)
   {}
} 
```

现在我正在尝试将该方法及其参数提取到另一个类中并使用以下代码：

```
MethodInfo inf = typeof(WLR3Logon).GetMethod("getLogon",
    BindingFlags.Static | BindingFlags.Public | BindingFlags.FlattenHierarchy);

int[] parameters = { accountTypeId };

foreach (int parameter in parameters)
{
    inf.Invoke("getLogon", parameters);
} 
```

但它给了我错误

> “你调用的对象是空的。”

我要去哪里错了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-22T14:40:42.843

通过使用以下方法解决了这个问题：

```
using System.Reflection;    
string methodName = "getLogon";
Type type = typeof(WLR3Logon);
MethodInfo info = type.GetMethod(
    methodName, 
    BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Static | BindingFlags.FlattenHierarchy);

object value = info.Invoke(null, new object[] { accountTypeId } ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T10:25:23.163

这里有很多问题

*   您的静态方法是私有的，但您选择仅对公开可见访问进行过滤的方法。要么公开你的方法，要么确保绑定标志包含私有方法。现在，不会找到返回 inf 为 null 的方法，这会导致您的 null-ref 异常。
*   参数是一个整数数组，其中 MethodInfo 需要一个对象数组。您需要确保传入一个对象数组。
*   您循环参数只是为了使用整个参数集多次调用该方法。删除循环。
*   您使用方法名称作为第一个参数调用 MethodInfo.Invoke，这是无用的，因为当方法是实例方法时，此参数用于实例。在您的情况下，此参数将被忽略

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T10:19:46.037

您的方法是私有的，因为您没有明确声明访问修饰符。您有两个选项可以使您的代码按预期工作：

*   将您的方法更改为`public`.
*   `BindingFlags.NonPublic`在`GetMethod`通话中指定

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T10:24:19.093

做你的方法`public`。它应该在那之后工作

```
 public static class WLR3Logon
 {
       public static void getLogon(int accountTypeID)
       {}
 } 
```

# php - session_set_cookie_params 似乎有效，但 cookie 不受影响

> ID：11117374
> 
> 赞同：1
> 
> 时间：2012-06-20T10:14:17.037
> 
> 标签：php, session-cookies

我正在使用 HTTPS，我想为我创建`PHPSESSID`的另一个设置安全属性。`cookies`

```
session_set_cookie_params(0,'/','', isset($_SERVER["HTTPS"]));
session_start();
$data = session_get_cookie_params();
foreach ($data as $key=>$value) {
    echo $key.$value;
} 
```

该函数似乎有效，实际上，打印出`session_get_cookie_params()`安全属性等于 1。
但是，当我检查我的 cookie 状态时`Firefox`，`Firebug+Firecookie`它们似乎完全不受该语句的影响。即使更改域属性也会产生相同的结果。

我正在开发 XAMPP、Ubuntu 和本地主机（本地主机应该对安全问题进行特殊处理，也许）。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:31:57.213

`session name`使用时尝试使用`session_set_cookie_params`.

参考：
[PHP session_set_cookie_params](http://php.net/manual/en/function.session-set-cookie-params.php)
[PHP session_name](http://php.net/manual/en/function.session-name.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T17:21:55.470

我有同样的问题，使用 session_name() 没有帮助。我不得不禁用 session_start() 生成 cookie 并像这样手动生成 cookie：

```
$sessionID = $_COOKIE[session_name()];
ini_set('session.use_cookies', false);
if ($sessionID) session_id($sessionID); // reuse if available
session_start();
// session_set_cookie_params() is not working with a "path" part
// this way every click is extending the session for $timeout more
setcookie(session_name(), $sessionID ?: session_id(), time() + $timeout, $cookiePath, $_SERVER['HTTP_HOST'], false, true); 
```

x-供电：PHP/5.4.15

# ios - 如何将效果应用于麦克风输入？（iOS Core Audio & Audio Graph）

> ID：11117375
> 
> 赞同：1
> 
> 时间：2012-06-20T10:14:32.760
> 
> 标签：ios, ios5, core-audio, audiounit

我想在 iOS5 上开发应用程序来获取语音并对其应用效果（高通滤波器、延迟等）并从扬声器输出。

我试过 RemoteIO(input) -> effect ->RemoteIO(output) 但它没有用。

```
AudioComponentDescription   cd;
cd.componentType            = kAudioUnitType_Output;
cd.componentSubType         = kAudioUnitSubType_RemoteIO;
cd.componentManufacturer    = kAudioUnitManufacturer_Apple;
cd.componentFlags           = 0;
cd.componentFlagsMask       = 0;

AUGraphAddNode(self.auGraph, &cd, &remoteIONode);
AUGraphNodeInfo(self.auGraph, remoteIONode, NULL, &remoteIOUnit);

UInt32  flag = 1;
AudioUnitSetProperty(remoteIOUnit, kAudioOutputUnitProperty_EnableIO, kAudioUnitScope_Input, 1, &flag, sizeof(flag));

AudioStreamBasicDescription audioFormat = [self auCanonicalASBDSampleRate:44100.0 channel:1];
AudioUnitSetProperty(remoteIOUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 1, &audioFormat, sizeof(AudioStreamBasicDescription));
AudioUnitSetProperty(remoteIOUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &audioFormat, sizeof(AudioStreamBasicDescription));  

AudioComponentDescription cd_e;

cd_e.componentSubType = kAudioUnitSubType_LowPassFilter;
cd_e.componentSubType = kAudioUnitSubType_Reverb2;
cd_e.componentFlags = 0;
cd_e.componentFlagsMask = 0;
cd_e.componentManufacturer = kAudioUnitManufacturer_Apple;
AUGraphAddNode(self.auGraph, &cd_e, &effectNode);
AUGraphNodeInfo(self.auGraph, effectNode, NULL, &effectUnit);

AudioUnitSetProperty(effectUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Global, 0, &audioFormat, sizeof(AudioStreamBasicDescription));    

 AudioUnitSetParameter(effectUnit, kAudioUnitScope_Global, 0, kLowPassParam_CutoffFrequency, 10.f, 0);
 AudioUnitSetParameter(effectUnit, kAudioUnitScope_Global, 0, kLowPassParam_Resonance, 10, 0);

AUGraphConnectNodeInput(self.auGraph, remoteIONode, 1, effectNode, 0);
AUGraphConnectNodeInput(self.auGraph, effectNode, 0, remoteIONode, 0);

AUGraphInitialize(localGraph); 
```

但是如果 AUGraphConnectNodeInput 设置为 bellow ，我会从扬声器中听到我的声音。

```
AUGraphConnectNodeInput(self.auGraph, remoteIONode, 1, remoteIONode, 0); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T07:04:52.530

我写了一个[教程，详细介绍了如何](http://teragonaudio.com/article/How-to-do-realtime-recording-with-effect-processing-on-iOS.html)在 iOS 上通过麦克风进行实时处理和录音，但从那时起，我发现了 novocaine 的乐趣[，](https://github.com/alexbw/novocaine)这是在 iOS 上进行效果处理的一种*更简单的方法。*这比处理 AURemoteGraph 和那些东西要容易得多。

# c# - c# 用于映射打印机的 listview 字符串提取

> ID：11117376
> 
> 赞同：0
> 
> 时间：2012-06-20T10:14:35.320
> 
> 标签：c#, listview

我有一个带有网络打印机共享名称列表的列表视图，即 \\server\printer1.pcl5 如果我尝试转换 listview.selecteditems.tostring() 它会在字符串周围添加其他数据因此不起作用，打印机也共享c# 需要额外的 \\ 来解析名称。

真的有2个问题，双击listview项目时如何将\\server\\printer1.pcl5转换为\\\\server\\printer1.pcl5

那么如何将它插入到 SHAREDPRINTERNAMEGOESHERE 的 addwindowsprinterconnection 位中？因为它没有从 listviewitem 正确转换为字符串，所以将其存储为“ListViewItem {\\server\printer1.pcl5}”

```
private void ListView1_DoubleClick(object sender, EventArgs e)
    {

        foreach (ListViewItem item in listView1.SelectedItems)
        {

            WshNetwork objNetwork = new WshNetwork();
            objNetwork.AddWindowsPrinterConnection("SHAREDPRINTERNAMEGOESHERE", "HPLJ4100", "\\\\SERVER\\main printer");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:30:02.533

您如何尝试获得所选项目的价值？这将不起作用：

```
listView1.SelectedItems.ToString() 
```

上面的代码所做的是获取对象类型的完全限定名称，在本例中是 ListViewItems 的集合。

要获得所选项目的实际价值，您必须执行以下操作：

```
string printerShareName = listView1.SelectedItems[0].Text; 
```

请记住，如果您打开了 MultiSelect，上面的代码将只获得选择的第一项。

编辑：

然后，如果您想添加带有附加反斜杠前缀的打印机：

```
objNetwork.AddWindowsPrinterConnection("SHAREDPRINTERNAMEGOESHERE", "HPLJ4100", "\\" + printerShareName); 
```

# jquery - 一定是一个简单的jquery错误？

> ID：11117379
> 
> 赞同：0
> 
> 时间：2012-06-20T10:14:46.087
> 
> 标签：jquery

对于点击菜单脚本，这个 jquery 仍然没有运气。我研究了 attr 设置，但我们没有让它发挥作用。

我是否需要使用 onload 将脚本加载到正文中？

我有一个简单的脚本，但你必须单击菜单打开和关闭，没有花哨的幻灯片:(

**--jquery--**

```
$(function(){
    $(document).ready(function () {
        $('#top_menu_menub').click(function (e) {
            e.preventDefault();
            var $this = $(this);
            var ulId = $this.attr("#topmenu");
            var clicked_menu_is_visible = $this.parent().find("ul" + ulId).filter(':visible').length > 0;
            var visible_uls = $this.parent().find("ul").filter(':visible');
            if (visible_uls.length === 0) { 
                //no menus showing - just show clicked menu 
                $ul = $this.parent().find("ul" + ulId);
                $ul.slideToggle('medium');
            }
            else { 
                //close open menus (should only be one open) then open clicked menu
                //via callback 
                $this.parent().find("ul").filter(':visible').slideUp("medium", function() {
                    $ul = $this.parent().find("ul" + ulId);
                    //open clicked menu - unless menu was already open when clicked
                    if (!clicked_menu_is_visible) {
                        $ul.slideToggle('medium');
                    }
                });
            }
        });
    });
}); 
```

**--- CSS --**

```
#top_menu_menub {
    padding: 3px 0px 0px 0px;
    width: 200px;
    float: left;
    height: 20px;
    text-align: left;
    font-family: Helvetica, sans-serif;
    font-size: 10px;
    font-weight: bold;
    color: #aaa;
    background-image: url(../images/apecbuttona.jpg); background-repeat: no-repeat; background-position: 8px 4px;
    cursor: pointer;
}

#topmenu {list-style-type:none; width:200px; padding:0; margin:0 auto; height: 24px;}
#topmenu ul {list-style-type:none; padding:0; margin:0; border: solid 1px #eee; border-radius: 5px; }
#topmenu li {float:left; margin:1px 1px 0 0;position:relative; z-index: 9999}
#topmenu li.sub {width: 200px; height: 16px; padding: 1px 0px 0px 0px;}
#topmenu li.sub:hover { color:#00CCFF; background-image: url(../images/apecbutton.jpg); background-repeat: no-repeat;background-position: 8px 0px; height: 24px;}
#topmenu li a {display:block; color:#999; font-family:arial, sans-serif; font-size:11px; line-height:23px; width:107px; text-decoration:none; text-align:left; cursor:pointer; font-weight:100; border-bottom: 1px solid #eee; padding-left: 8px;}
#topmenu li a:hover {background:#fff; color:#4FA4F9;}
#topmenu ul {position:absolute;left:-9800px;width:115px; }
#topmenu li.click {}
#topmenu li.click ul{left: 12px; top:22px; background: #fff; } 
```

**---html---**

```
<div id="top_menu_menub">
    <ul id="topmenu">
        <li class="sub">
            <ul>
                <li><a href="">11111111</a></li>
                <li><a href="">22222222</a></li>
                <li><a href="">33333333</a></li>
                <li><a href="">44444444</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:19:07.330

这条线没有意义：

```
var ulId = $this.attr("topmenu"); 
```

还

```
find("ul" + ulId) 
```

在 HTML 中你有：

```
<ul id="topmenu"> 
```

我认为你必须**重做脚本**

# select - Go select 语句解决方法中的优先级

> ID：11117382
> 
> 赞同：43
> 
> 时间：2012-06-20T10:15:00.543
> 
> 标签：select, concurrency, go, channel

我希望在两个频道上进行常规收听，当两个频道都耗尽时被阻塞。但是，如果两个通道都包含数据，我希望在处理另一个通道之前将一个通道排空。

在下面的工作示例中，我希望在处理`out`之前将所有内容都排空`exit`。我使用`select`没有任何优先顺序的 - 语句。我该如何解决这个问题，在退出之前处理所有 10 个输出值？

```
package main

import "fmt"

func sender(out chan int, exit chan bool){
    for i := 1; i <= 10; i++ {
        out <- i
    } 
    exit <- true
}

func main(){
    out := make(chan int, 10)
    exit := make(chan bool)

    go sender(out, exit)

    L:
    for {
        select {
            case i := <-out:
                fmt.Printf("Value: %d\n", i)
            case <-exit:
                fmt.Println("Exiting")
                break L
        }
    }
    fmt.Println("Did we get all 10? Most likely not")
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-21T04:59:31.797

该语言本机支持这一点，不需要解决方法。很简单：退出通道应该只对生产者可见。退出时，生产者关闭频道。只有当通道为空且关闭时，消费者才会退出。这可以通过对信道进行测距来实现。

**下面是一个例子来说明：**

```
package main

import (
    "fmt"
    "math/rand"
    "time"
)

var (
    produced  = 0
    processed = 0
)

func produceEndlessly(out chan int, quit chan bool) {
    defer close(out)
    for {
        select {
        case <-quit:
            fmt.Println("RECV QUIT")
            return
        default:
            out <- rand.Int()
            time.Sleep(time.Duration(rand.Int63n(5e6)))
            produced++
        }
    }
}

func quitRandomly(quit chan bool) {
    d := time.Duration(rand.Int63n(5e9))
    fmt.Println("SLEEP", d)
    time.Sleep(d)
    fmt.Println("SEND QUIT")
    quit <- true
}

func main() {
    vals, quit := make(chan int, 10), make(chan bool)
    go produceEndlessly(vals, quit)
    go quitRandomly(quit)
    for x := range vals {
        fmt.Println(x)
        processed++
        time.Sleep(time.Duration(rand.Int63n(5e8)))
    }
    fmt.Println("Produced:", produced)
    fmt.Println("Processed:", processed)
} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-20T14:17:01.530

```
package main

import "fmt"

func sender(out chan int, exit chan bool) {
    for i := 1; i <= 10; i++ {
        out <- i
    }
    exit <- true
}

func main() {
    out := make(chan int, 10)
    exit := make(chan bool)

    go sender(out, exit)

    for {
        select {
        case i := <-out:
            fmt.Printf("Value: %d\n", i)
            continue
        default:
        }
        select {
        case i := <-out:
            fmt.Printf("Value: %d\n", i)
            continue
        case <-exit:
            fmt.Println("Exiting")
        }
        break
    }
    fmt.Println("Did we get all 10? I think so!")
} 
```

第一个选择的默认情况使其非阻塞。select 将在不查看退出通道的情况下耗尽 out 通道，否则不会等待。如果输出通道为空，则立即下降到第二个选择。第二个选择是阻塞的。它将等待任一通道上的数据。如果出现退出，它会处理它并允许循环退出。如果数据来了，它会回到循环的顶部并返回到排水模式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T10:45:57.487

另一种方法：

```
package main

import "fmt"

func sender(c chan int) chan int {
        go func() {
                for i := 1; i <= 15; i++ {
                        c <- i
                }
                close(c)
        }()
        return c
}

func main() {
        for i := range sender(make(chan int, 10)) {
                fmt.Printf("Value: %d\n", i)
        }
        fmt.Println("Did we get all 15? Surely yes")
} 
```

* * *

```
$ go run main.go
Value: 1
Value: 2
Value: 3
Value: 4
Value: 5
Value: 6
Value: 7
Value: 8
Value: 9
Value: 10
Value: 11
Value: 12
Value: 13
Value: 14
Value: 15
Did we get all 15? Surely yes
$ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-07T18:30:03.600

# 这是解决select的优先级问题的通用习语。

是的，至少可以说不好，但可以做到 100% 所需，**没有陷阱，也没有隐藏的限制**。

这是一个简短的代码示例，**解释如下**。

```
package main

import(
    "fmt"
    "time"
)

func sender(out chan int, exit chan bool) {
    for i := 1; i <= 10; i++ {
        out <- i
    }

    time.Sleep(2000 * time.Millisecond)
    out <- 11
    exit <- true
}

func main(){
    out := make(chan int, 20)
    exit := make(chan bool)

    go sender(out, exit)

    time.Sleep(500 * time.Millisecond)

    L:
    for {
        select {
        case i := <-out:
            fmt.Printf("Value: %d\n", i)
        default:
            select {
            case i := <-out:
                fmt.Printf("Value: %d\n", i)
            case <-exit:
                select {
                case i := <-out:
                    fmt.Printf("Value: %d\n", i)
                default:
                    fmt.Println("Exiting")
                    break L
                }
            }
        }
    }
    fmt.Println("Did we get all 10? Yes.")
    fmt.Println("Did we get 11? DEFINITELY YES")
} 
```

### 而且，这是它的工作原理，`main()`上面的注释：

```
func main(){
    out := make(chan int, 20)
    exit := make(chan bool)
    go sender(out, exit)
    time.Sleep(500 * time.Millisecond)
    L:
    for {
        select {

            // here we go when entering next loop iteration
            // and check if the out has something to be read from

            // this select is used to handle buffered data in a loop

        case i := <-out:
            fmt.Printf("Value: %d\n", i)
        default:
            // else we fallback in here

            select {

                // this select is used to block when there's no data in either chan

            case i := <-out:
            // if out has something to read, we unblock, and then go the loop round again

                fmt.Printf("Value: %d\n", i)
            case <-exit:
                select {

                    // this select is used to explicitly propritize one chan over the another,
                    // in case we woke up (unblocked up) on the low-priority case

                    // NOTE:
                    // this will prioritize high-pri one even if it came _second_, in quick
                    // succession to the first one

                case i := <-out:
                    fmt.Printf("Value: %d\n", i)
                default:
                    fmt.Println("Exiting")
                    break L
                }
            }
        }
    }

    fmt.Println("Did we get all 10? Yes.")
    fmt.Println("Did we get 11? DEFINITELY YES")
} 
```

**注意：**在玩有优先级的技巧之前，请确保您正在解决正确的问题。

很有可能，它可以以不同的方式解决。

尽管如此，在 Go 中优先选择 select 是一件很棒的事情。只是个梦..

**注意：**这是一个非常相似的答案[https://stackoverflow.com/a/45854345/11729048](https://stackoverflow.com/a/45854345/11729048)在这个线程上，但是只有*两个* `select`-s 是嵌套的，而不是像我一样的三个。有什么不同？我的方法更有效，我们明确希望在每次循环迭代中处理随机选择。

**但是**，如果高优先级通道没有缓冲，和/或您不希望它上有大量数据，只有零星的单个事件，那么更简单的两阶段习语（如该答案）就足够了：

```
L:
for {
    select {
    case i := <-out:
        fmt.Printf("Value: %d\n", i)
    case <-exit:
        select {
        case i := <-out:
            fmt.Printf("Value: %d\n", i)
        default:
            fmt.Println("Exiting")
            break L
        }
    }
} 
```

它基本上是 2 和 3 阶段，第 1 阶段被删除。

再一次：在大约 90% 的情况下，您认为确实需要优先考虑 chan 切换情况，但实际上不需要。

这是一个单行代码，可以包装在一个宏中：

```
for {
    select { case a1 := <-ch_p1: p1_action(a1); default: select { case a1 := <-ch_p1: p1_action(a1); case a2 := <-ch_p2: select { case a1 := <-ch_p1: p1_action(a1); default: p2_action(a2); }}}
} 
```

### 如果你想优先考虑两个以上的情况怎么办？

那么你有两个选择。第一个 - 使用中间 goroutines 构建一棵树，以便每个 fork 都是二进制的（上面的习语）。

第二种选择是使优先级分叉更多然后加倍。

以下是三个优先级的示例：

```
for {
    select {
    case a1 := <-ch_p1:
        p1_action(a1)
    default:
        select {
        case a2 := <-ch_p2:
            p2_action(a2)
        default:
            select {    // block here, on this select
            case a1 := <-ch_p1:
                p1_action(a1)
            case a2 := <-ch_p2:
                select {
                case a1 := <-ch_p1:
                    p1_action(a1)
                default:
                    p2_action(a2)
                }
            case a3 := <-ch_p3:
                select {
                case a1 := <-ch_p1:
                    p1_action(a1)
                case a2 := <-ch_p2:
                    p1_action(a2)
                default:
                    p2_action(a3)
                }
            }
        }
    }
} 
```

也就是说，整个结构在概念上分为三个部分，作为原始（二进制）部分。

### 再一次：机会是，你可以设计你的系统，这样你就可以避免这种混乱。

PS，修辞问题：为什么 Golang 没有将它内置到语言中？？？问题是修辞问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-25T02:52:56.900

这是另一种选择。

消费者守则：

```
 go func() {
    stop := false
    for {
      select {
      case item, _ := <-r.queue:
        doWork(item)
      case <-r.stopping:
        stop = true
      }
      if stop && len(r.queue) == 0 {
        break
      }
    }
  }() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T12:30:47.610

我创建了一个相当简单的解决方法。它可以满足我的要求，但是如果其他人有更好的解决方案，请告诉我：

```
exiting := false
for !exiting || len(out)>0 {
    select {
        case i := <-out:
            fmt.Printf("Value: %d\n", i)
        case <-exit:
            exiting = true
            fmt.Println("Exiting")
    }
} 
```

我没有在接收时退出，而是标记了一个退出，一旦我确定没有任何东西留在`chan out`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-24T06:23:18.187

我认为索尼娅的回答是不正确的。这是我的解决方案，有点复杂。

```
package main

import "fmt"

func sender(out chan int, exit chan bool){
    for i := 1; i <= 10; i++ {
        out <- i
    } 
    exit <- true
}

func main(){
    out := make(chan int, 10)
    exit := make(chan bool)

    go sender(out, exit)

    L:
    for {
        select {
            case i := <-out:
                fmt.Printf("Value: %d\n", i)
            case <-exit:
                for{
                    select{
                    case i:=<-out:
                        fmt.Printf("Value: %d\n", i)
                    default:
                        fmt.Println("Exiting")
                        break L
                    }
                }
                fmt.Println("Exiting")
                break L
        }
    }
    fmt.Println("Did we get all 10? Yes!")
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-06T10:29:15.340

就我而言，我真的想优先考虑来自一个通道的数据而不是另一个通道，而不仅仅是一个带外退出信号。为了其他有同样问题的人的利益，我认为这种方法在没有潜在竞争条件的情况下有效：

```
OUTER:
for channelA != nil || channelB != nil {

    select {

    case typeA, ok := <-channelA:
        if !ok {
            channelA = nil
            continue OUTER
        }
        doSomething(typeA)

    case nodeIn, ok := <-channelB:
        if !ok {
            channelB = nil
            continue OUTER
        }

        // Looped non-blocking nested select here checks that channelA
        // really is drained before we deal with the data from channelB
        NESTED:
        for {
            select {
            case typeA, ok := <-channelA:
                if !ok {
                    channelA = nil
                    continue NESTED
                }
                doSomething(typeA)

            default:
                // We are free to process the typeB data now
                doSomethingElse(typeB)
                break NESTED
            }
        }
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-13T13:54:39.403

使用缓冲通道有什么具体原因`make(chan int, 10)`吗？

您需要使用您正在使用的无缓冲通道与缓冲通道。

只是删除`10`，应该是刚刚`make(chan int)`。

这样，`sender`函数中的执行只能在来自通道的最后一条消息被语句出队*后*`exit <- true`继续执行该语句。如果该语句尚未执行，则无法在 goroutine 中访问。*`out``i := <-out``exit <- true`*

# properties - 如何获取 Windows 8 文件的修改日期？

> ID：11117383
> 
> 赞同：3
> 
> 时间：2012-06-20T10:15:05.170
> 
> 标签：properties, windows-8

获取为文件创建的数据很容易

```
StorageFile myFile = await storageFolder.GetFileAsync("myfile");
var dateCreated = myFile.DateCreated; 
```

但是没有对应的myFile.DateModified。

无论如何要获得数据修改属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:34:25.200

根据 Ari Polski “您可以通过 BasicProperties 修改日期”

[http://social.msdn.microsoft.com/Forums/no/winappswithcsharp/thread/0f3b989a-fb20-4313-b9ea-61aec477dc63](http://social.msdn.microsoft.com/Forums/no/winappswithcsharp/thread/0f3b989a-fb20-4313-b9ea-61aec477dc63)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:09:25.103

我无法获得 BasicProperties，这可能已在 RP 中删除。我的解决方案是复杂的

```
var check = new list<string>(); 
check.Add("System.DateModified"); 
var props = await myFile.Properties.RetrievePropertiesAsync(check); 
var dateModified = props.SingleOrDefault().Value; 
```

呸，那是辛苦的工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:51:00.207

(await file.GetBasicPropertiesAsync()).DateModified 做同样的事情

# javascript - 如何使用 javascript 修改特定域的现有 cookie 值？

> ID：11117385
> 
> 赞同：0
> 
> 时间：2012-06-20T10:15:06.100
> 
> 标签：javascript, cookies

我使用此方法重置 cookie 值，但该方法创建新 cookie 并修改相同，

```
 document.cookie="leo_auth_token=" + cookievalue; 
```

这并没有设置`leo_auth_token`我认为的值，因为此 cookie 名称位于 cookies 部分的 linkedin.com 文件夹下。

那么如何修改特定`domain`文件夹或文件夹下`linkedin.com`

请帮助我如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:41:20.670

您不能设置在另一个域上定义的 cookie 的值。**这将是一个巨大的安全风险，你不能**这样做是有充分理由的！

恐怕您需要找到替代解决方案。

# django - 为什么登录时 django-social-auth 不考虑下一个变量？

> ID：11117387
> 
> 赞同：4
> 
> 时间：2012-06-20T10:15:12.980
> 
> 标签：django, django-socialauth

如果我在没有登录的情况下直接进入一个页面（需要用户登录），Django 的身份验证框架会将我带到登录页面，然后根据`next`变量中的值重定向到我请求的页面。

然而，`django-social-auth`情况不是这样吗？我已经实现`django-social-auth`并且可以看到`next`URL 中的变量已正确填充。但是当我最终使用 Facebook 登录时，它会将我重定向到`LOGIN_REDIRECT_URL`变量中指定的 URL。

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T16:27:52.470

你的模板代码怎么样？您将 url 调用如下：

```
{% url socialauth_begin 'facebook' %}{% if request.GET.next %}?next={{ request.GET.next }}{% endif %} 
```

# ruby-on-rails-3 - pg_search 不返回单个字段的结果

> ID：11117389
> 
> 赞同：2
> 
> 时间：2012-06-20T10:15:14.443
> 
> 标签：ruby-on-rails-3, pg-search

我的“资产”模型有一个搜索页面，除了搜索特定于“serial_no”字段的任何内容之外，一切正常。

资产.rb

```
# == Schema Information
#
# Table name: assets
#
#  id                :integer         not null, primary key
#  asset_description :string(255)
#  asset_type        :string(255)
#  status            :string(255)
#  serial_no         :string(255)
#  user_id           :integer
#  cost              :decimal(, )
#  barcode           :string(255)
#  comment           :string(255)
#  date_purchased    :date
#  created_at        :datetime        not null
#  updated_at        :datetime        not null
#
class Asset < ActiveRecord::Base
  attr_accessible :asset_description, :asset_type, :comment, 
  :date_purchased, :serial_no, :status, :user_id, :cost, :barcode
  belongs_to :user
  validates  :user_id, presence: true
  validates  :asset_description, presence: true
  validates  :asset_type, presence: true
  validates  :serial_no, presence: true, uniqueness: true
  validates  :status, presence: true
  validates  :comment, length: { maximum: 150 }

  include PgSearch
  pg_search_scope :search, against: [:asset_description, :status, :asset_type, 
    :comment, :cost, :serial_no, :date_purchased],
   using: {tsearch: { dictionary: "english" }},
   associated_against: { user: :name }

  #older assets first
  default_scope order: 'assets.created_at ASC'

  def self.text_search(query)
    if query.present?
      search(query)
    else
      scoped 
    end
  end
end 
```

例如，我有一个序列号为 Z21313412A 的资产，但是当我搜索“Z”时，没有返回任何结果。我一直试图解决这个问题几个星期，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:49:15.340

根据[文档](https://github.com/Casecommons/pg_search#prefix-postgresql-84-and-newer-only)：

```
PostgreSQL’s full text search matches on whole words by default. 
If you want to search for partial words, however, you can set :prefix to true. 
Since this is a :tsearch-specific option, you should pass it to :tsearch 
directly, as shown in the following example. 
```

也许添加`:prefix`到您的配置中可以解决问题。
来自 Github 页面的示例：

```
pg_search_scope :whose_name_starts_with,
              :against => :name,
              :using => {
                :tsearch => {:prefix => true}
              } 
```

# asp.net-mvc - 适用于 MVC .NET 的 CanCan gem

> ID：11117395
> 
> 赞同：9
> 
> 时间：2012-06-20T10:15:47.860
> 
> 标签：asp.net-mvc, permissions, cancan

我正在寻找提供与 Rails 中的 CanCan gem 类似的功能的 NuGet 包（[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)）。

有谁知道提供类似功能的插件？或者一个简单的方法来实现这个？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T00:28:57.487

我最终查看了[http://www.develop.com/wifclaimsbasedauthorizationone](http://www.develop.com/wifclaimsbasedauthorizationone)，它的功能与 CanCan 非常相似。

例如

```
ClaimsPrincipalPermission.CheckAccess("Customer","Add"); 
```

将检查用户是否有权添加客户。

我们正在测试[http://thinktecture.github.com/Thinktecture.IdentityModel.45/](http://thinktecture.github.com/Thinktecture.IdentityModel.45/)

基本上是基于声明的 .Net 授权

使用 MVC5 和 One ASP.Net Claims 直接融入 .Net 的核心

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T11:05:20.927

经过长时间的搜索，我发现这些文章很有用：

[http://msdn.microsoft.com/en-us/library/ff359101.aspx](http://msdn.microsoft.com/en-us/library/ff359101.aspx) [http://www.codeproject.com/Articles/639458/Claims-Based-Authentication-and-Authorization](http://www.codeproject.com/Articles/639458/Claims-Based-Authentication-and-Authorization) [http://www.codetails。 com/punitganshani/using-claims-identity-with-simplemembership-in-asp-net-mvc/20130525](http://www.codetails.com/punitganshani/using-claims-identity-with-simplemembership-in-asp-net-mvc/20130525)
[http://leastprivilege.com/](http://leastprivilege.com/)
[http://www.postsharp.net/aspects/examples/security](http://www.postsharp.net/aspects/examples/security)

Microsoft 于 2013 年发布的最新更新：http: [//blogs.msdn.com/b/webdev/archive/2013/06/27/introducing-asp-net-identity-membership-system-for-asp-net-applications .aspx](http://blogs.msdn.com/b/webdev/archive/2013/06/27/introducing-asp-net-identity-membership-system-for-asp-net-applications.aspx)
示例：
[https ://stackoverflow.com/a/18751036/316343](https://stackoverflow.com/a/18751036/316343)
[https://github.com/rustd/AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample) [http://msdn.microsoft.com/en-us/library/hh377151.aspx](http://msdn.microsoft.com/en-us/library/hh377151.aspx)

我更喜欢 CodeProject 教程中使用的那个，它基于 Thinktecture 家伙的框架，源代码位于：
[https ://github.com/brockallen/BrockAllen.MembershipReboot](https://github.com/brockallen/BrockAllen.MembershipReboot) [https://github.com/thinktecture/Thinktecture.IdentityModel。 45](https://github.com/thinktecture/Thinktecture.IdentityModel.45)

请记住，从持久性的角度来看，CodeProject 文章已经过时了。
现在 MembershipReboot 支持 EntityFramework、MongoDB 和 RavenDB 作为数据存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-29T07:06:31.993

最近，我在搜索有关基于活动的授权的内容，发现了一些有趣的教程，如何实现它：[https ://mkarczewski.wordpress.com/2013/10/21/activity-based-authorization-in-modular-systems/](https://mkarczewski.wordpress.com/2013/10/21/activity-based-authorization-in-modular-systems/)

我也找到了这个库，看起来很酷！这是东西，我希望能找到。[https://github.com/michelgrootjans/CanI/blob/master/README.md](https://github.com/michelgrootjans/CanI/blob/master/README.md)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:26:53.973

在 .NET 中，您应该使用**[Membership Provider](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)**和`Authorize`属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-13T18:31:58.563

在 ASP.NET Core 文档中查看[此页面。](https://docs.microsoft.com/en-us/aspnet/core/security/authorization/resourcebased)它有点类似于 cancan 所做的。

你像这样编写一个授权处理程序：

```
public class DocumentAuthorizationHandler :
       AuthorizationHandler<OperationAuthorizationRequirement, Document>
   {
       public override Task HandleRequirementAsync(AuthorizationHandlerContext context,
                                                   OperationAuthorizationRequirement requirement,
                                                   Document resource)
       {
           // Validate the operation using the resource, the identity and
           // the Name property value from the requirement.

           return Task.CompletedTask;
       }
   } 
```

现在您可以在控制器中使用以下代码：

```
if (await authorizationService.AuthorizeAsync(User, document, Operations.Read))
   {
       return View(document);
   }
   else
   {
       return new ChallengeResult();
   } 
```

或在您看来：

```
@if (await AuthorizationService.AuthorizeAsync(User, Model, Operations.Edit))
   {
       <p><a class="btn btn-default" role="button"
           href="@Url.Action("Edit", "Document", new { id = Model.Id })">Edit</a></p>
   } 
```

# c# - 实体框架在大容量 IIS 网站上运行时会失败吗

> ID：11117397
> 
> 赞同：2
> 
> 时间：2012-06-20T10:15:59.467
> 
> 标签：c#, multithreading, entity-framework, iis, objectcontext

我们一直在尝试分析这个异常：

> 消息：错误：对象引用未设置为对象的实例。堆栈跟踪：在 System.RuntimeType.CreateInstanceSlow（RuntimeType 类型，Boolean publicOnly，Boolean noCheck，Boolean& canBeCached，RuntimeMethodHandleInternal& ctor，Boolean& bNeedSecurityCheck）在 System.RuntimeType.CreateInstanceSlow（ Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) at System.Activator.CreateInstanceT at Z.Services.ObjectContextManagement.ScopedObjectContextManager 2.Manage `1.get_ObjectContext() at Z.Services.DatabaseAccess.DatabaseAccess`() 在 Z. Services.DatabaseAccess.DatabaseAccess`2.get_ObjectContext()

基本上我们在获取 ObjectContext 时会出错。

从这个问题：[实体框架延迟加载在其他线程中不起作用，](https://stackoverflow.com/questions/2575990/entity-framework-lazy-loading-doesnt-work-from-other-thread)我们看到 EF 依赖于保持在同一个线程上。

从这个 Jon Skeet 对这个问题的回答：[IIS 中的请求会在单个线程上运行吗？](https://stackoverflow.com/questions/1643987/will-a-request-in-iis-run-on-a-single-thread)我们看到 IIS 具有线程敏捷性。

当流量较低时，我们看不到此错误，但当负载增加时，我们会看到此错误。

那么问题来了：如果 EF 依赖于保持在单个线程上，并且 IIS 不会将请求保持在单个线程上，那么 EF 可以在部署在 IIS 上的应用程序上使用吗？

**编辑**

```
var frameworkAssembly = Assembly.GetAssembly(typeof(ObjectContextManager<>));
var managerType = frameworkAssembly.GetType(managerTypeName + "`1", true, true);
managerType = managerType.MakeGenericType(typeof(TObjectContext));
ObjectContextManager = Activator.CreateInstance(managerType) as ObjectContextManager<TObjectContext>; 
```

似乎错误发生在上述代码的最后一行。该错误仅发生在重负载下的生产中。

**编辑 2**

ObjectContextManager 继承自 ObjectContext，它是一个 EF 类。

```
 public abstract class ObjectContextManager<T> where T : ObjectContext 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:26:22.713

我最近遇到了线程敏捷性和 IIS 的一些问题。IIS 可以在请求的线程通过管道时转移它。这并不意味着您必须更加了解并发性。重要的是上下文数据附加到线程的方式。

在 ASP.NET 环境中，此存储是通过`HttpContent.Current`变量完成的，该变量保存当前线程上正在处理的当前请求的详细信息。它通过`System.Runtime.Remoting.Messaging.CallContext.HostContext`变量来做到这一点。

许多为每个线程保留数据的解决方案都使用了该`ThreadStatic`属性，但是由于线程切换，这在 ASP 环境中失败了。线程静态开始是有价值的，然后似乎成为`null`处理管道的中途。

ASP.NET 将跟踪`HttpContext`、`CurrentPrincipal`和可能的语言环境。存储在变量中的`CallContext`数据和数据不会被复制。`ThreadStatic`

答案虽然令人恼火，但却是改变策略并使用`HttpContext.Current.Items`而不是`CallContext`线程静态。

在您的情况下，检查 EF 使用的策略，并查看实现是否可插入。

正如 Jon Skeet 所指出的，[Cup(Of T)](http://piers7.blogspot.com.au/2005/11/threadstatic-callcontext-and_02.html)上提供了更多信息，但更多地将其用作您发现的启动板，而不是其本身的目的。

# php - 如何让 Yii sendFile 函数将 Content-Desposition 设置为内联？

> ID：11117403
> 
> 赞同：1
> 
> 时间：2012-06-20T10:16:21.727
> 
> 标签：php, yii

我正在尝试使用`Yii::app()->request->sendFile()`在视图中显示图像而不弹出“下载对话框”，但我无法这样做，因为 sendFile 设置`Content-Desposition`为`attachment`. 我如何使它设置为`inline`？

顺便说一句，我使用了 xsendfile 函数，但是因为您需要 Apache 中的 mod-xsendfile 才能使用它而放弃了它。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:20:11.340

如果要在视图中显示图像，则需要使用`<img>`标签。

如果您希望返回的内容*是*图像（在这种情况下谈论视图是没有意义的），那么您需要做的通常不超过

```
header('Content-Type: image/jpeg');
echo $binaryImageContents;
Yii::app()->end(); 
```

这也是`sendFile()`原则上所做的，尽管它提供了更多的便利，因为它从文件的扩展名中检测到适当的 MIME 类型并发送一堆额外的 HTTP 响应头（包括不受欢迎的头`Content-Disposition`）。你可以[自己看看](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/web/CHttpRequest.php#752)。

# clearcase - UCM 中过时的基线有什么影响？

> ID：11117404
> 
> 赞同：1
> 
> 时间：2012-06-20T10:16:22.277
> 
> 标签：clearcase, clearcase-ucm

当基线过时时会产生不良影响吗？

例如，如果基线已经被许多人重新设定，如果我废弃了基线会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:35:35.717

您可以，**但不应**废弃当前用作现有流的基础基线的基线。
即使有可能，它也曾经有一些副作用，例如：

*   阻止“ `lsbl`”命令（[swg1IC42113](http://www-304.ibm.com/support/docview.wss?uid=swg1IC42113)，在 ClearCase 7.0.x 中修复）看到其他基线。
*   当基础基线被锁定或过时时不显示基线（[ss](http://www-304.ibm.com/support/docview.wss?uid=swg1IC41514)，在 ClearCase 7.0.x 中修复）。

（如果基线的祖先过时，像 2003 年的旧 ClearCase 可能会出现问题：[swg21214304](http://www-304.ibm.com/support/docview.wss?uid=swg21214304)。但很久以前就已经修复了）

* * *

它（即“废弃基础基线”）仍然有一个当前（2012 年 5 月，ClearCase 7.1.x）打开的错误：
[swg1PM63804](https://www-304.ibm.com/support/entdocview.wss?uid=swg1PM63804)：PM63804：锁定已废弃子流的基础基线导致该流上的所有基线不显示在基地。

> 摘要：如果恰好也是流的基础基线的组件基线被锁定-过时，则未`Show obsolete baselines`设置“”复选框的组件树浏览器**不仅隐藏该基线，而且不正确地隐藏*所有*基线刚刚锁定过时的基线是基础基线的流**。
> 
> 解决方法：
> 
> *   **在组件树浏览器窗口中没有已知的解决方法**。
> *   从命令行，这已通过 APAR IC42113 修复，“ `cleartool lsbl -tree`”命令正确隐藏了锁定过时的基础基线，并正确列出了该流上的非锁定过时的后续基线。

* * *

另一个当前的错误是[swg1IC39164](http://www-304.ibm.com/support/docview.wss?uid=swg1IC39164)：GUI 变基到最新基线（ClearCase 7.1.x）的断言失败，应该通过升级到最新补丁来修复。

* * *

除此之外，废弃旧基线主要有很多优点，主要是因为它会在浏览基线时使显示的大量对象变得杂乱无章。

# iphone - 不同的 REST 客户端 = 不同的响应

> ID：11117409
> 
> 赞同：0
> 
> 时间：2012-06-20T10:16:42.433
> 
> 标签：iphone, ios, cocoa, rest, rest-client

我正在构建一个使用 REST 与服务器通信的 iPhone 应用程序。

一些 API 得到了有效但不正确的响应，所以我与服务器开发人员交谈，他说他们正在为他工作。

我从 Mac App Store 下载了 RESTed 并在那里进行了检查，它得到了同样的错误响应。

服务器开发人员再次检查但坚持认为它正在工作。

我下载了 WizTools RESTClient 并在那里进行了尝试，并且成功并得到了正确的响应！？

我不知道现在该做什么，因为我以前从未见过或听说过。

任何人都可以提供从这里去哪里的任何提示/提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:27:38.683

呸！

我发现了问题。我没有将请求的 Content-Type 设置为 application/json。

一旦设置好了，它就没有问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:25:31.527

[捕获](https://stackoverflow.com/questions/1598407/iphone-and-wireshark)使用两个不同客户端库发送的请求，比较它们并找出不同之处。

从那里您应该能够确定导致不同结果的原因，但如果不是，请使用两个捕获更新您的问题，我们可以进一步分析它。

# c# - 如何获取测试项目的构建目录？

> ID：11117419
> 
> 赞同：9
> 
> 时间：2012-06-20T10:17:12.273
> 
> 标签：c#, visual-studio

我有一个测试项目，我需要在其中加载一个 XLSX 文件。为此，我添加了一个始终复制的文件，以便它最终位于构建目录中，但以下所有内容都返回错误的路径：

1.  `System.Reflection.Assembly.GetAssembly(typeof(testclass)).Location;`
2.  `AppDomain.CurrentDomain.BaseDirectory`
3.  `Directory.GetCurrentDirectory();`

他们都给我：

`"C:\\Users\\username\\Documents\\visual-studio-projecten\\projectname\\TestResults\\username_ICT003 2012-06-20 12_07_06\\Out"`

我需要

`"C:\\Users\\username\\Documents\\visual-studio-projecten\\projectname\\TestProject\\bin\\Debug\\SupportFiles\\"`

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T10:22:46.147

使用[DeploymentItemAttribute](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute%28v=vs.80%29.aspx)属性。引用 MSDN：

此属性标识包含由部署的测试用来运行的文件的文件和目录。测试引擎制作部署项的副本，并根据指定的 OutputDirectory 或默认目录将它们放置在测试部署目录中。

例如：

```
[TestClass]
public class MyUnitTest
{
    [TestMethod()]
    [DeploymentItem("myfile.txt")]
    public void MyTestMethod()
    {          
        string file = "myfile.txt";           
        Assert.IsTrue(File.Exists(file), "deployment failed: " + file +
            " did not get deployed");
    }
} 
```

Of course assuming you are using MSTest as your testing framework.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T10:18:55.477

试试这个：

```
string dir = Path.Combine(
    Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location),
    "SupportFiles"); 
```

不要使用`Directory.GetCurrentDirectory()`，因为当前目录不能是您的 exe 目录，并且在程序执行期间可能会更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T18:52:10.107

In case someone like me comes along, if you're using a **.testsettings file** and the **DeploymentItem attribute** on the class **doesn't work** even though you've set your files as Content and to Always Copy, it's because either you already have a Deployment section in your .testsettings file or you need to use DeploymentItem in the .testsettings file. Here's how ours looks now:

```
<Deployment>
    <DeploymentItem filename="Tests\Unit Tests\ConnectionStrings.config" />
    <DeploymentItem filename="Tests\Unit Tests\<project dir>\bin\Debug\TestFiles\" outputDirectory="TestFiles" />
</Deployment> 
```

One does a file, the other does 13 files in a directory. Note the trailing slash for the directory's "filename"!

Solution and more info was found at:

[MsTest DeploymentItem OutputDirectory in testsettings](https://stackoverflow.com/questions/9289503/mstest-deploymentitem-outputdirectory-in-testsettings)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-29T11:34:00.553

Switch to **xUnit** or **NUnit**.

Then both option 2., 3\. and `Environment.CurrentDirectory` works as needed, returning the build-output-diretory. Remove "bin\Debug" or "bin\Release" and files can be left at 'Do not copy'.

Also see the [GetFileFromMethod](https://github.com/elasticsearch/elasticsearch-net/blob/develop/src/Tests/Nest.Tests.Unit/BaseJsonTests.cs#L122-L131)-method and [usage](https://github.com/elasticsearch/elasticsearch-net/tree/develop/src/Tests/Nest.Tests.Unit/Core/Map/AnalyzerField) in ElasticSearch for a nice way to have one file per test.

# asp.net-mvc - 如何在 MVC 3 中正确进行长轮询

> ID：11117421
> 
> 赞同：5
> 
> 时间：2012-06-20T10:17:21.357
> 
> 标签：asp.net-mvc, asynchronous, long-polling

我正在尝试连接一个 AsyncController，以便当用户在订单页面上单击保存订单时，查看同一订单的所有用户都应该收到订单已更改的通知。我实现这一点的方法是在订单页面上执行长轮询 ajax 请求，但是如何制作可扩展的 AsyncController 来处理这个问题对我来说并不明显。

所以这就是我到目前为止所拥有的，ID 是指示已更改或轮询更改的订单的 ID。

```
public class MessageController : AsyncController
{
    static readonly ConcurrentDictionary<int, AutoResetEvent> Events = new ConcurrentDictionary<int, AutoResetEvent>();

    public ActionResult Signal(int id)
    {
        AutoResetEvent @event;
        if (Events.TryGetValue(id, out @event))
            @event.Set();

        return Content("Signal");
    }

    public void WaitAsync(int id)
    {
        Events.TryAdd(id, new AutoResetEvent(false));

        // TODO: This "works", but I should probably not block this thread.
        Events[id].WaitOne();
    }

    public ActionResult WaitCompleted()
    {
        return Content("WaitCompleted");
    }
} 
```

我看过[How to do long-polling AJAX requests in ASP.NET MVC?](https://stackoverflow.com/questions/1342216/how-to-do-long-polling-ajax-requests-in-asp-net-mvc) . 我试图了解有关此代码的所有详细信息，但据我了解此代码它阻塞了线程池中的每个工作线程，据我所知，这最终会导致线程饥饿。

那么，我应该如何以一种很好的、​​可扩展的方式实现它呢？请记住，我不想再使用任何第三方组件，我想很好地了解如何正确实施此方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:26:29.553

实际上我能够在不阻塞工作线程的情况下实现这一点，我缺少的是 ThreadPool.RegisterWaitForSingleObject。

```
public class ConcurrentLookup<TKey, TValue>
{
    private readonly Dictionary<TKey, List<TValue>> _lookup = new Dictionary<TKey, List<TValue>>();

    public void Add(TKey key, TValue value)
    {
        lock (_lookup)
        {
            if (!_lookup.ContainsKey(key))
                _lookup.Add(key, new List<TValue>());

            _lookup[key].Add(value);
        }
    }

    public List<TValue> Remove(TKey key)
    {
        lock (_lookup)
        {
            if (!_lookup.ContainsKey(key))
                return new List<TValue>();

            var values = _lookup[key];
            _lookup.Remove(key);

            return values;
        }
    }
}

[SessionState(SessionStateBehavior.Disabled)]
public class MessageController : AsyncController
{
    static readonly ConcurrentLookup<int, ManualResetEvent> Events = new ConcurrentLookup<int, ManualResetEvent>();

    public ActionResult Signal(int id)
    {
        foreach (var @event in Events.Remove(id))
            @event.Set();

        return Content("Signal " + id);
    }

    public void WaitAsync(int id)
    {
        AsyncManager.OutstandingOperations.Increment();

        var @event = new ManualResetEvent(false);

        Events.Add(id, @event);

        RegisteredWaitHandle handle = null;
        handle = ThreadPool.RegisterWaitForSingleObject(@event, (state, timeout) => 
        {
            handle.Unregister(@event);
            @event.Dispose();

            AsyncManager.Parameters["id"] = id;
            AsyncManager.Parameters["timeout"] = timeout;
            AsyncManager.OutstandingOperations.Decrement();
        }, null, new TimeSpan(0, 2, 0), false);
    }

    public ActionResult WaitCompleted(int id, bool timeout)
    {
        return Content("WaitCompleted " + id + " " + (timeout? "Timeout" : "Signaled"));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-28T13:35:47.160

现在，使用 async/await 实现长轮询要容易得多。

```
public class MessageController : ApiController
{
    private static readonly ConcurrentDictionary<int, ManualResetEventAsync> ManualResetEvents = new ConcurrentDictionary<int, ManualResetEventAsync>();

    [HttpGet]
    public IHttpActionResult Signal(int id)
    {
        if (ManualResetEvents.TryGetValue(id, out var manualResetEvent) == false)
        {
            return Content(HttpStatusCode.OK, "Signal: No one waiting for signal");
        }

        manualResetEvent.Set();

        return Content(HttpStatusCode.OK, "Signaled: " + id);
    }

    [HttpGet]
    public async Task<IHttpActionResult> Wait(int id)
    {
        var manualResetEvent = ManualResetEvents.GetOrAdd(id, _ => new ManualResetEventAsync());

        var signaled = await manualResetEvent.WaitAsync(TimeSpan.FromSeconds(100));

        var disposed = manualResetEvent.DisposeIfNoWaiters();
        if (disposed)
        {
            ManualResetEvents.TryRemove(id, out var _);
        }

        return Content(HttpStatusCode.OK, "Wait: " + (signaled ? "Signaled" : "Timeout") + " " + id);
    }
}

internal class ManualResetEventAsync
{
    private readonly SemaphoreSlim semaphore = new SemaphoreSlim(0, int.MaxValue);
    private int waiters;

    public void Set()
    {
        semaphore.Release(int.MaxValue);
    }

    public async Task<bool> WaitAsync(TimeSpan timeSpan)
    {
        lock (semaphore)
        {
            waiters++;
        }

        var task = await semaphore.WaitAsync(timeSpan);

        lock (semaphore)
        {
            waiters--;
        }

        return task;
    }

    public bool DisposeIfNoWaiters()
    {
        lock (semaphore)
        {
            if (waiters != 0)
            {
                return false;
            }

            semaphore.Dispose();
            return true;
        }
    }
} 
```

# iphone - 按两次主页按钮时，iPhone中的应用程序关闭通知

> ID：11117423
> 
> 赞同：2
> 
> 时间：2012-06-20T10:17:23.600
> 
> 标签：iphone, ios, ios5

在 iphone 中，当我们按下主页按钮时，应用程序进入后台。然后当我们按两次主页按钮时，我们可以看到正在运行的应用程序列表。然后当我们长按那个图标时，会出现一个红色圆形按钮，通过它我们可以删除应用程序。

我想知道在 iphone 中是否有针对这种特殊情况的任何通知。

实际上，当我们通过按两次主页按钮关闭应用程序时，我想在我的代码中处理这种情况。

请告诉我一些解决方案，并让我知道关于这个问题需要任何澄清。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:23:55.817

根据[这个问题](https://stackoverflow.com/questions/7343404/how-to-know-whether-app-is-terminated-by-user-or-ios-after-10min-background)，当用户杀死一个应用程序时，它是一个 SIGKILL（而不是当 iOS 杀死应用程序时，它调用 applicationWillTerminate）。

当用户终止应用程序时，您无法执行代码，只能针对某些常规应用程序状态执行代码，例如活动、后台、挂起和非活动。查看[Apple](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)关于应用程序状态的文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T10:41:41.003

您不应该（也不能）专门处理这个问题，因为当用户双击主页键并杀死您的应用程序时，这就是用户打算做的 - 他想杀死您的应用程序。

这样做的最常见原因是您的应用程序存在问题。另一个原因可能是用户试图以某种方式欺骗您的应用程序（例如在游戏中），所以我推荐给您的策略是：

1.  很好地构建您的应用程序，因此用户不会因为问题而终止它 =)
2.  在“applicationWillEnterBackground”事件中保存您的应用程序数据和应用程序状态。这样，您可以
    保证用户在关闭应用程序时不会丢失任何数据（以正常方式）
3.  如果您认为用户会尝试“欺骗”您的应用程序，请在应用程序运行的关键时刻保存您的应用程序数据。例如，如果您正在制作游戏并且玩家任务失败，请立即保存应用程序状态，以便玩家无法通过杀死应用程序来作弊。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T10:25:06.967

当您双击主页按钮时，显示的应用程序列表并非所有正在运行的应用程序列表。但是一个应用程序列表开始了。按最后启动的应用程序排序。该应用程序在此列表中并不意味着它正在运行。

当您在这里杀死一个应用程序时，您的应用程序不会收到任何即将被杀死的通知。因此，您的应用程序没有关闭而是被杀死。

如果系统需要释放内存，iOS 可能会在后台关闭您的应用程序。同样，您的应用不会以任何方式收到通知。（*但这次它会留在你双击主页按钮时弹出的列表中*）

# java - 如何让 JScrollPane 不隐藏 JTable？

> ID：11117426
> 
> 赞同：1
> 
> 时间：2012-06-20T10:17:28.780
> 
> 标签：java, swing, jtable, jscrollpane

我的问题是里面`JScrollPane`没有显示。`JTable`当我初始化一个没有`JScrollPane`一切正常的表时。

如何使`JScrollPane`不隐藏`JTable`？

```
private void initComponents() {
    setLayout(new GroupLayout());
    add(getJComboBox0(), new Constraints(new Leading(24, 284, 12, 12), new Leading(45, 10, 10)));
    add(getJLabel0(), new Constraints(new Leading(24, 12, 12), new Leading(17, 12, 12)));
    add(getJButton1(), new Constraints(new Leading(320, 12, 12), new Leading(86, 10, 10)));
    add(getJButton0(), new Constraints(new Leading(320, 126, 12, 12), new Leading(45, 12, 12)));
    add(getJScrollPane1(), new Constraints(new Leading(25, 282, 12, 12), new Bilateral(82, 12, 26, 403)));
    setSize(1200, 650);
}

private JScrollPane getJScrollPane1() {
    if (jScrollPane1 == null) {

        jScrollPane1 = new JScrollPane();
        jScrollPane1.setViewportView(getJTable1());
    }
    return jScrollPane1;
}

private JTable getJTable1() {
    if (testCaseTable == null) {
        ProjectTableModel ptm =new ProjectTableModel();
        testCaseTable = new JTable();
        testCaseTable.setModel(ptm);

    }
    return testCaseTable;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:21:13.240

如果没有看到您的代码很难回答，但请确保您将 . 添加`JScrollPane`到您`JFrame`的`JTable`.

因此，对于没有滚动的表格，您可以这样做...

```
add(myTable); 
```

并添加滚动你这样做......

```
add(new JScrollPane(myTable)); 
```

现在我可以看到你的代码，我会改变这一行......

```
jScrollPane1 = new JScrollPane();
jScrollPane1.setViewportView(getJTable1()); 
```

简直就是这样……

```
jScrollPane1 = new JScrollPane(getJTable1()); 
```

此外，正如@alain 所指出的，以下行不应该编译......

```
setLayout(new GroupLayout()); 
```

所以你为什么不把它改成这个，然后试一试......

```
setLayout(new GroupLayout(this)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:50:09.033

您提供的代码无法编译：

```
setLayout(new GroupLayout()); 
```

[类 GroupLayout](http://docs.oracle.com/javase/7/docs/api/javax/swing/GroupLayout.html#constructor_summary)没有空的构造函数。

将其替换为：

```
setLayout(new GridLayout()); 
```

# plot - JFreeChart - 禁止 TimeSeries 的初始拉伸

> ID：11117433
> 
> 赞同：1
> 
> 时间：2012-06-20T10:17:44.753
> 
> 标签：plot, jfreechart, timeserieschart

我想采用 JFreeChart 中著名的示例演示内存消耗：[http ://www.koders.com/java/fidAC2CC42CB6511A1240DFE1A6BE1B9D04D34CF001.aspx](http://www.koders.com/java/fidAC2CC42CB6511A1240DFE1A6BE1B9D04D34CF001.aspx)

问题：
我不希望它最初在情节的两端之间拉伸，并且在`maximumItemAge`到达时开始“滚动”。
我希望时间范围具有恒定宽度，并且测量表示**从左侧左侧空白开始，从右侧填充绘图**。

填满整个情节后滚动（`free.setMaximumItemAge(MAXIMUM_AGE);`）对我来说非常好。

我已经尝试过一堆涉及`setRange(.., ..)`and的员工`setAutoRange(false)`。
似乎`TimeSeries`使用起来更棘手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:49:46.093

您只需要添加以下行：`domain.setFixedAutoRange(MAXIMUM_AGE);`

这将从右侧填充你的情节并在它满时滚动。

# c# - C# 混合不安全/安全库

> ID：11117437
> 
> 赞同：4
> 
> 时间：2012-06-20T10:18:06.173
> 
> 标签：c#, unsafe

我正在慢慢构建一个跨多个应用程序使用的代码库。一些代码正在处理图像和预先存在的消息格式（从 C++ 转换），因此需要不安全的代码。

为什么我通常不应该在同一个库程序集中混合不安全和安全的代码，而不是我必须这样做的任何原因？

换句话说：我应该维护一个纯粹安全的库并将不安全的代码收集到不同的库中吗？

我很欣赏“不安全”库需要考虑的信任问题，但由于这些功能对我的大多数应用程序都至关重要，这真的很重要吗？我的所有代码（安全和不安全）要么受信任，要么不受信任，我的应用程序将无法运行。还是我错过了重点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:37:10.567

理论上你可以用安全代码开发你需要的东西，但是让我们假设你有充分的理由使用不安全代码:)

在您运行不安全代码的代码部分中，您可能会忘记释放内存等......所以如果您管理好内存，您应该不会有问题。当您有一个使用 COM+ dll 的 C# 项目时，您一直都在这样做。在您的情况下更好，因为您拥有所有代码，因此如果您能够检测到它，您可以修复任何内存泄漏。

如果您将所有不安全代码收集在单独的库中

**优点**

*   您可以在未来创建一个新的安全库
*   如果您在执行日志上看到该 dll 失败，您将能够更容易地隔离问题的根源。

**缺点**

*   如果您必须以不自然的方式拆分安全/不安全代码，则代码的可读性最差。

所以说实话，决定是你的。如果我是你，我会将不安全代码拆分到不同的项目中，以便在需要时能够将其替换为安全代码。

# android - 根据 Screensize 设置 ListView 的 Content

> ID：11117438
> 
> 赞同：0
> 
> 时间：2012-06-20T10:18:12.310
> 
> 标签：android, listview

我想根据屏幕大小自动调整列表视图的内容，即如果列表视图有五个数据并且屏幕很大，即使这五个数据也应该显示在整个屏幕上。如果可能的话，这是否可能，那么如何。

```
 <ListView
            android:id="@+id/listView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@+id/moreBtn"
            android:layout_below="@+id/etSearch"
            android:layout_marginTop="10dp" >
        </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:20:52.537

不。根据你的问题，你的每一行都有相同的大小是更好的 UI。你可以这样做，但它不是填满整个屏幕的正确方法。当只有一行并且你试图填满整个屏幕时呢？

简而言之，在整个屏幕上填充列表视图并不好。

如果你想这样做，那么将你的行布局大小设置为`fill_parent`，但它只显示一个项目。所以你必须检查列表中有多少行，然后除以屏幕高度并以编程方式设置行大小。

# asp.net-mvc-3 - c# 4.0 - 使用 bit.ly 缩短 url

> ID：11117439
> 
> 赞同：3
> 
> 时间：2012-06-20T10:18:14.037
> 
> 标签：asp.net-mvc-3, c#-4.0, bit.ly

我将使用 bitly 在 Twitter 上发布快捷链接，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:25:15.627

不完全清楚您要做什么，但听起来您正在寻找[bit.ly API](http://dev.bitly.com/code_libraries.html) - 该链接为您提供 C# 库。

您还需要使用[Twitter API](https://dev.twitter.com/)。

仔细阅读这些资源，了解如何进行身份验证（api 密钥等），然后使用 c# 库向这些服务发出请求。

然后，您可以缩短 url，并将这些缩短的 url 发布到 twitter。

# lua - 是否可以在 Lua 中模拟绑定？

> ID：11117440
> 
> 赞同：7
> 
> 时间：2012-06-20T10:18:14.893
> 
> 标签：lua

给定一个带有一个参数的 lua 函数，是否可以将此参数绑定到一个固定值以获得一个没有参数的函数？

更一般地说，如何将 lua 函数的某些输入参数绑定到某些值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T11:42:16.247

是的，这几乎可以用任何具有一流价值功能的语言来完成。

```
function f1(a)
   return a+1
end

function bind(a)
   return function() return f1(a) end
end

local f2 = bind(42)
print(f2())
-- 43 
```

这个特定示例适用于特定函数和参数数量，但可以轻松扩展为采用任意函数/参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-01T14:30:15.053

我刚刚创建了一个辅助函数来执行 Boost::bind 所做的事情：

*   它处理占位符以能够替换任何位置参数
*   它在任何地方处理 nil

# 用法 ：

`function_binder(base_function, placeholders_format, args...)`

*   base_function (function) : 要包装的函数
*   placeholders_format (string) : 表示 args 应该如何放置，每个字符代表一个参数
    *   `.`: 表示来自包装器的参数
    *   `A`：表示来自活页夹的参数
    *   `~`：表示来自包装器的所有待处理参数

请参阅以下示例以更好地理解。

## 简单的例子：

```
local function divide(a, b)
    return a / b
end

local div_by_4 = function_binder(divide, ".A", 4)
print(div_by_4(12)) -- => prints: 3

local div_12_by = function_binder(divide, "A.", 12)
print(div_12_by(4)) -- => prints: 3 
```

## 您还可以使用内置函数：

```
local debug_print = function_binder(print, "A~", "DEBUG:")
debug_print("some logs for debug")
-- => prints: DEBUG some logs for debug

-- '~' will put all following arguments:
debug_print("some", "logs", "for", "debug")
-- => prints: DEBUG some logs for debug 
```

## 你也可以制作复杂的东西：

```
local function stuff(...)
    print("Args: ", ...)
end

local wrapper = function_binder(stuff, ".A..AA~", "two", "five", "six")
wrapper(1, 3, 4, 7, nil, 9)
-- => prints: 1 two 3 4 five six 7 nil 9 
```

# 面向对象的方式

## 设置

要做更多的面向对象的东西，你可以使用调试库：

```
-- apply metatable to all function
debug.setmetatable(function()end, {
    __index = {
        bind = function_binder,
    },
}) 
```

## 用法

```
local debug_print = print:bind("A~", "DEBUG:")
debug_print("add some log")
-- => prints: DEBUG: add some log 
```

# 这是 function_binder 代码：

```
local function packed_args_append(packed, nb_insert, ...)
    nb_insert = nb_insert > 0 and nb_insert or select('#', ...)

    for i = 1, nb_insert do
        packed[packed.n + 1] = select(i, ...)
        packed.n = packed.n + 1
    end
end

-- replace table.unpack as it doesn't always handle nil values correctly..
local function unpacknil(packed)
    local nb_args = packed.n

    local function unpack_n(n)
        if n == nb_args then
            return packed[n]
        end
        return packed[n], unpack_n(n + 1)
    end
    return unpack_n(1)
end

function function_binder(self, placeholder_format, ...)
    local placeholders = table.pack(...)

    return function(...)
        local args = {n = 0}
        local arg_idx = 1
        local placeholder_idx = 1

        for c in placeholder_format:gmatch"." do
            if c == 'A' then
                packed_args_append(args, 1, placeholders[placeholder_idx])
                placeholder_idx = placeholder_idx + 1
            elseif c == '.' then
                packed_args_append(args, 1, select(arg_idx, ...))
                arg_idx = arg_idx + 1
            elseif c == '~' then
                packed_args_append(args, -1, select(arg_idx, ...))
                break
            end
        end
        --return self(table.unpack(args))
        return self(unpacknil(args))
    end
end 
```

它与 Lua 5.3 完美配合

托管在这里：[https ://github.com/Bew78LesellB/luaMiscTests/commit/e9e52aea7933b58332fff36738356f18aed3db92](https://github.com/Bew78LesellB/luaMiscTests/commit/e9e52aea7933b58332fff36738356f18aed3db92)

# c++ - int 的默认构造函数

> ID：11117450
> 
> 赞同：21
> 
> 时间：2012-06-20T10:19:02.587
> 
> 标签：c++

> **可能重复：**
> [为什么使用空括号调用不带参数的构造函数是错误的？](https://stackoverflow.com/questions/180172/why-is-it-an-error-to-use-an-empty-set-of-brackets-to-call-a-constructor-with-no)

在对[这个问题](https://stackoverflow.com/q/507971/1025391)的回答中，有人说

> int 默认构造为 0，就像您使用 int() 初始化它们一样。其他原始类型也以类似方式初始化（​​例如，double()、long()、bool() 等）。

就在我向我的一位同事解释这一点时，我编写了以下代码，[编译 (gcc-4.3.4) 并运行](http://ideone.com/8yB1R)，并观察到意外行为。

```
#include <iostream>

int main() {
  int i(); 
  std::cout << i << std::endl; // output is 1
} 
```

为什么是输出`1`而不是`0`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-20T10:20:38.483

**大多数令人烦恼的解析**在这里发挥作用。您实际上是在声明一个函数`i`，而不是一个`int`变量。它甚至不应该编译（除非您实际上在`i`某处定义了一个函数……**是吗？**）。

要对 int 进行值初始化，您需要：

```
int i = int(); 
```

# java - 用不同的参数覆盖抽象方法？

> ID：11117458
> 
> 赞同：0
> 
> 时间：2012-06-20T10:19:40.370
> 
> 标签：java, junit

我想定义一个抽象方法，以便在我的抽象类中使用这个方法。然后，我想在扩展我的抽象类的不同类中定义这个抽象方法。

但我怎么能这样做呢？

（目标是为集成测试提供一些基本方法，它们都使用相同的“结构”，但实现一些不同的逻辑）。

如何在抽象类中定义一个带参数的抽象方法，在抽象类中已经使用这个抽象方法，但在我的测试实现中首先实现该方法？

```
public abstract class BaseIT {
    protected doVerify(String params..) {
        if (isValid()) {
            //basic verification for all extending testcases
        }
    }

    protected abstract boolean isValid(Object o);
}

public class TestA_IT extends BaseIT{
    @Test
    public void myTest {
        //do some specific stuff and verify with resulting params

        doVerify(params..);
    }

    protected boolean isValid(Object o) {
        return o.isValid();
    }   
} 
```

请记住，这只是我的问题的一个（愚蠢的）例子。当然，我可以将 isValid 的结果交给基类方法，但在我的具体情况下可能不会这样。

问题是：`Object o`不同的测试用例实现是不同的对象。

我可能不会为此使用接口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:25:45.427

Make`isValid`方法接收一个 BaseIT 对象并使您的`TestA_IT`extend `BaseIT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:26:03.303

你可以这样做：

```
public class TestA_IT extends BaseIT {
    @Test
    public void myTest {
        //do some specific stuff and verify with resulting params

        doVerify(params..);
    }

    protected boolean isValid(Object o) {
        return (o instanceOf YourObject) ? ((YourObject)o).isValid() : false;
    }   
} 
```

一个更酷的方法是实现访问者模式，但我认为你会这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:26:41.790

您可以定义一个 `Template method` ，然后子类的实现将定义行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:28:23.567

你可以投它：

```
((Class)o).isValid() 
```

但我认为更好的方法是制作一个带有方法的接口`isValid()`。并使所有这些对象实现它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T13:00:18.657

您的示例令人困惑，因为您显示的两个类没有继承关系。在您澄清这一点之前，您是否考虑过使您的`isValid()`方法具有通用性和/或采用作为`isValid()`方法接口的类型的对象？

无论如何，请远离涉及强制转换或`instanceof`.

# c# - 从 URL 读取图像将其保存在隔离存储中并读取并绑定到图像源

> ID：11117464
> 
> 赞同：1
> 
> 时间：2012-06-20T10:20:07.593
> 
> 标签：c#, windows-phone-7, url, binding, isolatedstorage

我正在将 URL 链接中的图像保存到隔离存储，稍后我需要将其绑定到图像。

这是我获取并保存图像的代码：（
路径值和值是类属性）

```
private void saveImage(string name)
{
        path = name;

        string uri = "http://sherutnetphpapi.cloudapp.net/mini_logos/" + path;
        WebClient m_webClient = new WebClient();
        imageUri = new Uri(uri, UriKind.Relative);
        m_webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_ImageOpenReadCompleted);
        m_webClient.OpenReadAsync(imageUri);
}

void webClient_ImageOpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
        using (IsolatedStorageFile myIsf = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (myIsf.FileExists(path))
            {
                myIsf.DeleteFile(path);
            }

            IsolatedStorageFileStream fileStream = myIsf.CreateFile(path);

            StreamResourceInfo sri = null;
            sri = Application.GetResourceStream(imageUri);

            BitmapImage bitmap = new BitmapImage();
            bitmap.SetSource(sri.Stream);
            WriteableBitmap wb = new WriteableBitmap(bitmap);

            // Encode WriteableBitmap object to a JPEG stream.
            System.Windows.Media.Imaging.Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
            wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
            fileStream.Close();
        }
} 
```

在另一个类中，我读取图像并将其绑定到图像源：

```
public class CompanyItem
{
    public String companyIcon { get; set; } //save the file name in the isolated storge
    public String companyName { get; set; }

    [IgnoreDataMember]
    public BitmapImage ReadImageFromStorage 
    {
        get
        {
            BitmapImage image = new BitmapImage();
            IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();
            string isoFileName = this.companyIcon;
            var stream = isoStore.OpenFile(isoFileName, System.IO.FileMode.Open);
            image.SetSource(stream);
            return image;
        }
    } 
```

xml代码是：

```
<Image Height="63" HorizontalAlignment="Left" Margin="392,7,0,0" Name="imgConpamyIcon" Stretch="Fill" VerticalAlignment="Top" Width="70" CacheMode="BitmapCache" Source="{Binding ReadImageFromStorage}" /> 
```

图像位于 listBox 内的 listBox 中

请帮助我....它让我发疯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:35:00.917

在彻底检查了您的代码之后，我得到了一些东西：

在您的 SaveImage 类中，`imageUri = new Uri(uri, UriKind.Relative);` 将其更改为`UriKind.Absolute`

然后在`webClient_ImageOpenReadCompleted`你可以直接设置`bitmap.SetSource(e.Result);`而不是使用`StreamResourceInfo`类

再说一次，我不知道将 Image 标签的 Source 属性绑定到 XAML 中的 BitmapImage 是否有效（在后面的代码中有效）

# java - memcpy + 指针 + java

> ID：11117465
> 
> 赞同：2
> 
> 时间：2012-06-20T10:20:10.747
> 
> 标签：java, arrays, memcpy

我看到没有问题，专门回复这个参数组合：

Java + memcpy + 指针。

我的 C/C++ 背景可能对我有偏见。在 C++ 中，我可以这样做：

```
memcpy (Destination, Source, length_data); 
```

Destination 和 Source 可以只是两个内存位置。有没有办法在 Java 中使用原始类型的数组来做到这一点？

所有的实现

```
Arrays.copyOf
Arrays.copyOfRange 
```

基本上做了一半的工作。从某种意义上说，您可以指定数据量或给定范围，但它们都返回一个数组，它们不会修改现有数组。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:21:55.127

看[`System.arraycopy(src, srcPos, dest, destPos, length)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:22:05.300

Java 没有 C/C++ 那样的指针。

有 System.arraycopy(); 看看javadocs。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:23:02.480

[您可以使用System.arraycopy()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)修改现有数组

> 如果 src 和 dest 参数引用同一个数组对象，则执行复制，就好像首先将位置 srcPos 到 srcPos+length-1 的分量复制到具有长度分量的临时数组，然后临时数组的内容是通过目标数组的 destPos+length-1 复制到位置 destPos。

当然，鉴于 Java 中缺少指针，这不是一个完美的类比操作。

# authentication - 如何扩展 ServiceStack 身份验证

> ID：11117469
> 
> 赞同：19
> 
> 时间：2012-06-20T10:20:27.000
> 
> 标签：authentication, servicestack

我将 ServiceStack 身份验证与 ServiceStack.OrmLite (SqlServer) 一起使用。我有不同的用户类型，如学生、教师、校长。所有用户类型都与其他 Db 表有关系。实施它的最佳实践是什么？

A）将必要的字段添加到 UserAuth 表并制作 Black Magic。（在创建 UserAuth 后手动将必要的额外信息添加到表中）

B）学生：UserAuth（UserAuth中的所有字段都将被克隆）

C) Student.UserAuthId, UserAuth.Meta[UserType.Student,StudentId] 相互引用

D) 扩展 XService、XFeature 或 ??

PS：如何将 Owner 和 Type 字段添加到 ServiceStack UserAuth 表。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-20T11:41:46.773

有几种策略可以将额外的元数据附加到**UserAuth**和**UserAuthDetails**表中，

如果您想用您自己的自定义 POCO 扩展[UserAuth](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Auth/UserAuth.cs)的模式，您需要对`OrmLiteAuthRepository<T,T>`包括您的自定义 POCO 的类进行子类化，例如查看[OrmLiteAuthRepository](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/AuthUserSession.cs)的源代码：

```
public class OrmLiteAuthRepository 
    : OrmLiteAuthRepository<UserAuth, UserAuthDetails>, IUserAuthRepository
{
    public OrmLiteAuthRepository(IDbConnectionFactory dbFactory) 
        : base(dbFactory) { }
} 
```

## 使用您自己键入的自定义会话扩展 UserAuthSession

同时扩展和提供一个类型化的、自定义的[AuthUserSession](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/AuthUserSession.cs)是推荐的方法，因为它受到[ServiceStack 的](https://servicestack.net/) [身份验证功能](http://docs.servicestack.net/authentication-and-authorization)的支持，因为用户会话只是在[缓存提供程序](http://docs.servicestack.net/caching)（即不在 RDBMS 中）中，它的无模式持久性特征很容易支持扩展类型。

## 向元字典字段添加额外的元数据

对于次要扩展，您可以使用每个表上的**元**字符串字典字段，这些字段是专门为支持自定义元数据而添加的。它们还包括有用的`Get<T>`和`Set<T>`方法，这些方法也支持 blobbing 复杂类型：

```
userAuth.Set(new Address { ... });
var address = userAuth.Get<Address>(); 
```

## 将参考数据与 RefId 和 RefIdStr 字段链接

`UserAuth`和`UserAuthDetails`表还包括一个`int? RefId`和一个字段，您可以使用这些`string RefIdStr`字段来引用外部数据，例如针对每个用户身份验证记录或用户 OAuth 注册的自定义表。

## 将 UserAuth 信息提取到您自己的自定义表中

另一种选择是执行[SocialBootstrapApi 示例演示正在做的事情，并通过覆盖您自己的自定义 UserSession 中的](https://github.com/ServiceStackApps/SocialBootstrapApi)**OnAuthenticated**钩子将 UserAuth 信息提取到您自己的自定义表中，每次用户成功进行身份验证时都会调用该钩子。

这是将会话数据复制到自定义用户 POCO 并将其保存在不同表中的[SocialBootstrapApi 示例。](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Models/CustomUserSession.cs#L22)

```
public class CustomUserSession : AuthUserSession
{
    public string CustomId { get; set; }

    public override void OnAuthenticated(IServiceBase authService, IAuthSession session, 
        IAuthTokens tokens, Dictionary<string, string> authInfo)
    {
        base.OnAuthenticated(authService, session, tokens, authInfo);

        //Populate all matching fields from this session to your own custom User table
        var user = session.TranslateTo<User>();
        user.Id = int.Parse(session.UserAuthId);
        user.GravatarImageUrl64 = !session.Email.IsNullOrEmpty()
            ? CreateGravatarUrl(session.Email, 64)
            : null;

        //Resolve the DbFactory from the IOC and persist the user info
        using (var db = authService.TryResolve<IDbConnectionFactory>().Open())
        {
            db.Save(user);
        }
    }
} 
```

# java - 蓝牙通讯器

> ID：11117473
> 
> 赞同：0
> 
> 时间：2012-06-20T10:20:33.883
> 
> 标签：java, android, bluetooth

我想从具有蓝牙的探头（用于测量温度的手持设备）中获取信息并在 android 设备上显示信息。请建议执行此操作的最简单方法以及我应该如何获取信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:46:40.610

1.  查找此设备的文档。
2.  在文档中查找 UUID 用于提供结果。
3.  将设备与手机配对
4.  在电话端找到处理指定 UUID 的配对设备（[getBondedDevices()](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#getBondedDevices%28%29)，[getUuids()](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#getUuids%28%29)）
5.  在电话端，当您找到具有该 UUID ( [createRfcommSocketToServiceRecord(UUID)](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord%28java.util.UUID%29) ) 的电话打开套接字时。
6.  返回设备文档并检查您如何查询结果，交付数据的格式是什么，而不是分别解析和处理该数据（[getInputStream()](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html#getInputStream%28%29)，[getOutputStream()](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html#getOutputStream%28%29)）。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:28:48.013

有了您提供的大量信息，几乎所有可以说的就是查阅[面向开发人员的 Android 蓝牙文档](http://developer.android.com/guide/topics/wireless/bluetooth.html)和[相应的 API](http://developer.android.com/reference/android/bluetooth/package-summary.html)，您当然应该已经这样做了。

# android - 如何使用 json webservice 在 android 中填充微调器

> ID：11117477
> 
> 赞同：1
> 
> 时间：2012-06-20T10:20:46.593
> 
> 标签：android, json, android-spinner

我用了这段代码

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.wisknowtech.com/hotel_jobs/country_list.php");         
ResponseHandler<String> responseHandler = new BasicResponseHandler();
String responseBody = httpclient.execute(httppost,responseHandler);                     
JSONObject json = new JSONObject(responseBody);

JSONArray jArray = json.getJSONArray("data");
//JSONArray  jsonArray = new JSONArray(responseBody);

final String[] array_spinner = new String[jArray.length()];                         

final Spinner countryspiner = (Spinner) findViewById(R.id.rescountry);                             
ArrayAdapter<String> classNameAdapter = new ArrayAdapter<String>(this,                            android.R.layout.simple_spinner_item,array_spinner);
                 classNameAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
for (int i=0; i<jArray.length(); i++)
{
     String styleValue = jArray.getJSONArray(i).getString(0); 
     array_spinner[i] = styleValue;
}
countryspinner.setAdapter(classNameAdapter);
}
catch (JSONException e) {
    e.printStackTrace();
} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我在 responseBody 中得到了值 bt `JSONObject`json=new `JSONObject`(responseBody);行有问题 这里 json 具有空值。

# java - android调用上的密钥库版本错误

> ID：11117486
> 
> 赞同：36
> 
> 时间：2012-06-20T10:21:10.217
> 
> 标签：java, android, certificate, bouncycastle, keystore

我想发出一个 https 请求。

我使用 bouncycastle 生成这样的密钥库：

```
keytool -importcert -trustcacerts -alias ludevCA -file lu_dev_cert.crt -keypass mypass -keystore keystore.bks -storepass mypass -storetype BKS -providerclass org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath bcprov-jdk15on-146.jar 
```

并且 keylist 命令返回一个正确的值。

但是当我这样做时：

```
KeyStore ks = KeyStore.getInstance("BKS");
InputStream in = getResources().openRawResource(R.raw.keystore);  
ks.load(in, "mypass".toCharArray()); 
```

我有一个错误：

```
wrong version of keystore 
```

我尝试使用几个版本的 bouncycast，但结果是一样的。我也尝试定义 keysize 1024，但没有任何改变。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-20T10:57:39.500

看看它[Android：信任 SSL 证书](http://blog.crazybob.org/2010/02/android-trusting-ssl-certificates.html)

```
 -storetype BKS
  -provider org.bouncycastle.jce.provider.BouncyCastleProvider
  -providerpath /path/to/bouncycastle.jar 
```

**并在创建密钥库时使用此版本：版本 1.46** [在这里找到](https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk16/1.46)

愿它有帮助...

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-10-18T12:19:40.013

您需要将密钥库的类型从 BKS 更改为 BKS-v1（BKS-v1 是 BKS 的旧版本）。因为BKS版本如[这里所说改变了](https://android-developers.googleblog.com/2013/02/security-enhancements-in-jelly-bean.html)

还有另一种解决方案，这要容易得多：

1.  **使用 Portecle：**

*   下载 Portecle [http://portecle.sourceforge.net/](http://portecle.sourceforge.net/)
*   使用密码和 portecle 打开您的 bks 文件
*   做工具>>更改密钥库类型>> **BKS-v1**
*   保存文件

2.  **您可以使用[KeyStore Explorer](https://keystore-explorer.org/)**

新文件将使用 BKS-v1 编码，不再显示错误。要更改 KeyStore 类型，请打开 KeyStore Explorer 并转到`Tools -> Change KeyStore Type`然后保存文件。

**注意：**
Android 支持不同的 BKS 版本：例如，API 15 需要 BKS-1，而 API 23 需要 BKS，因此您可能需要将这两个文件都放入您的应用程序中。

您可以使用此代码根据 API 级别在它们之间切换：

```
int bks_version;
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
    bks_version = R.raw.publickey; //The BKS file
} else {
    bks_version = R.raw.publickey_v1; //The BKS (v-1) file
}
KeyStore ks = KeyStore.getInstance("BKS");
InputStream in = getResources().openRawResource(bks_version);  
ks.load(in, "mypass".toCharArray()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T14:05:35.977

最后我在 Windows 下使用了一个图形编辑器（KeyStore Explorer）并且它正在工作。

可能该错误是由 Java/Mac 版本问题引起的

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-10T08:34:09.233

解决方案在这里，能够删除版本问题

为android客户端创建BKS文件

创建 BKS 文件所需的软件安装详细信息：

[从链接http://keystore-explorer.sourceforge.net/](http://keystore-explorer.sourceforge.net/)下载 Keystore Explorer 软件

[从http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html)下载 UnlimitedJCEPolicyJDK7

解压缩 zip 并将 US_export_policy 和 local_policy 复制到您的 C:/programes 文件/java/jre7/lib/security 文件夹。

安装 Keystore Explorer 软件。

生成 BKS 文件的步骤：（需要 CA 文件、证书文件、密钥文件和 .P12 iePKCS 文件（如果有）。

1) 使用密钥库软件使用 CA .crt 文件创建信任文件。

脚步：

打开软件
Go File->New->从向导中选择.BKS 导入CA证书文件Go Tool->Import trust certificate->选择CA .crt文件->输入密码->(如果证书是self会抛出异常签名）强制导入文件。

4.以.bks 扩展名保存文件。

2) 使用密钥库软件使用 .P12 文件创建密钥文件

脚步

打开软件Go File->New->从向导中选择.BKS

导入 >p12 文件 Go Tool -> 导入密钥对 -> 从向导中选择 PKCS #12 -> 输入文件的解密密码并浏览文件 -> 输入别名（如果要更改，可以保持原样）-> 输入新的密码

以 .bks 扩展名保存文件。

3) 如果 .P12 不可用，则使用密钥库软件创建密钥文件

脚步

打开软件

转到文件->新建->从向导中选择 .BKS 导入 >p12 文件转到工具 -> 导入密钥对 -> 从向导中选择 OpenSSL ->未选中文件的解密密码，浏览 .key 和 .crt（证书文件不是 CA）文件 -> 输入别名（如果要更改，可以保持原样） -> 输入新密码

以 .bks 扩展名保存文件。

将两个文件复制到 res/raw 文件夹中（两个 BKS 文件都是强制性的）。

代码：

```
 static final String ENABLED_CIPHERS[] = {
    "TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA",
    "TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA",
    "TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA",
    "TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA",
    "TLS_DHE_RSA_WITH_AES_128_CBC_SHA",
    "TLS_DHE_RSA_WITH_AES_256_CBC_SHA",
    "TLS_DHE_DSS_WITH_AES_128_CBC_SHA",
    "TLS_ECDHE_RSA_WITH_RC4_128_SHA",
    "TLS_ECDHE_ECDSA_WITH_RC4_128_SHA",
    "TLS_RSA_WITH_AES_256_CBC_SHA",
    "TLS_RSA_WITH_AES_128_CBC_SHA",
    "SSL_RSA_WITH_3DES_EDE_CBC_SHA",
    "SSL_RSA_WITH_RC4_128_SHA",
    "SSL_RSA_WITH_RC4_128_MD5",
};
// put this in a place where it can be reused
static final String ENABLED_PROTOCOLS[] = {
        "TLSv1.2", "TLSv1.1", "TLSv1"
    };

   private void sslCon()
    {
        try {
                             // setup truststore to provide trust for the server certificate
              // load truststore certificate
            InputStream trustStoresIs = getResources().openRawResource(R.raw.client_ca);
            String trustStoreType = KeyStore.getDefaultType();
            KeyStore trustStore = KeyStore.getInstance(trustStoreType);
            trustStore.load(trustStoresIs, "spsoft_123".toCharArray());
            //keyStore.setCertificateEntry("ca", ca);

            // initialize trust manager factory with the read truststore
            String tmfAlgorithm = TrustManagerFactory.getDefaultAlgorithm();
            TrustManagerFactory tmf = TrustManagerFactory.getInstance(tmfAlgorithm);
            tmf.init(trustStore);

            // setup client certificate
            // load client certificate
            InputStream keyStoreStream = getResources().openRawResource(R.raw.client_cert_key);
            KeyStore keyStore = null;
            keyStore = KeyStore.getInstance("BKS");
            keyStore.load(keyStoreStream, "your password".toCharArray());

            KeyManagerFactory keyManagerFactory = null;
            keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
            keyManagerFactory.init(keyStore, "your password".toCharArray());

            // Create an SSLContext that uses our TrustManager
            SSLContext context = SSLContext.getInstance("SSL");
            context.init(keyManagerFactory.getKeyManagers(), tmf.getTrustManagers(), null);

            SSLSocketFactory sslsocketfactory = (SSLSocketFactory)context.getSocketFactory();
            InetAddress serverAddr = InetAddress.getByName("192.168.11.104");
            sslSocket = (SSLSocket) sslsocketfactory.createSocket(serverAddr, 5212);
            //String[] ciphers = sslSocket.getEnabledCipherSuites();
            sslSocket.setEnabledCipherSuites(ENABLED_CIPHERS);
            // put this right before setEnabledCipherSuites()!
            //sslSocket.setEnabledProtocols(ENABLED_PROTOCOLS);
            //InputStream inputStream =  sslSocket.getInputStream();
            OutputStream out = sslSocket.getOutputStream();

            Toast.makeText(getApplicationContext(), "Connected", Toast.LENGTH_SHORT).show();
            sslSocket.close();

        } catch (KeyManagementException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (CertificateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (KeyStoreException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnrecoverableKeyException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-02T12:58:31.707

我发布这个答案是为了提供一个用于将`.pkcs12`文件转换为的 cmdline-version`keystore.bks`

需要什么：

*   Portecle - 从[https://sourceforge.net/projects/portecle/下载](https://sourceforge.net/projects/portecle/)

如果您不知道如何生成`.PKCS12`-File，请查看以下站点：

*   [http://www.robinhowlett.com/blog/2016/01/05/everything-you-ever-wanted-to-know-about-ssl-but-were-afraid-to-ask/](http://www.robinhowlett.com/blog/2016/01/05/everything-you-ever-wanted-to-know-about-ssl-but-were-afraid-to-ask/)
*   [https://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html](https://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html)

对于此示例，我将`jetty.pkcs12`其用作源。该命令生成：keystore.bks /usr/local/share/java/portecle-1.9/ 是我安装下载的 Portecle-Tool (.ZIP) 的路径

```
keytool -importkeystore -srckeystore jetty.pkcs12 \
-srcstoretype PKCS12 -deststoretype BKS -providerpath \
/usr/local/share/java/portecle-1.9/bcprov.jar -provider \
org.bouncycastle.jce.provider.BouncyCastleProvider-destkeystore \
keystore.bks 
```

现在您可以在 Android 下使用 BKS-Keystore

感谢上一篇文章，我能够找到解决方案并提供此 cmd。希望它可以帮助某人！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-13T08:24:11.993

采用：

```
KeyStore.getInstance("BKS"); 
```

或者

```
KeyStore.getInstance("PKCS12"); 
```

# python - django manytomany 对象的字段返回空

> ID：11117491
> 
> 赞同：2
> 
> 时间：2012-06-20T10:21:24.820
> 
> 标签：python, django, django-models, many-to-many

我在与 ManyToManyField 链接的模型中有几个类：

```
class UserProfile(models.Model):
    contacts = models.ManyToManyField(Contact)

class Contact(models.Model):
    first_name = models.CharField(max_length=50) 
```

在一个视图中，我正在传递：

```
contacts_list = request.user_profile.contacts 
```

这会产生一些奇怪的数字字符串，每次刷新模板时都会更改：

```
{% for c in contacts_list %}
    {{ c }}
{% endfor %} 
```

这不会产生任何结果：

```
{% for c in contacts_list %}
    {{ c.first_name }}
{% endfor %} 
```

在我的 Contact 类中，我也`__unicode__(self)`定义了返回`first_name`，那么为什么`ManyToManyField`对象不返回这个值呢？我也无法弄清楚如何成功显示`first_name`字段值。感谢您的任何建议或帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:24:51.760

尝试添加`all`到视图：

```
contacts_list = request.user_profile.contacts.all() 
```

或模板：

```
{% for c in contacts_list.all %}
    {{ c.first_name }}
{% endfor %} 
```

# shell - 如何用awk删除以“C”开头的行？

> ID：11117493
> 
> 赞同：8
> 
> 时间：2012-06-20T10:21:30.400
> 
> 标签：shell, awk

如何使用从文本文件中删除以“C”开头的行`awk`？

请有任何建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T11:54:06.133

如果数据在文件中`data.txt`，则

与`awk`：

```
awk '!/^C/' data.txt 
```

与`grep`：

```
grep -v ^C data.txt 
```

显示所有开头不带“C”的行。

`^C`*表示在行首*匹配字母“C” 。`!`在 awk 和`-v`grep 中否定匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:24:37.237

你可以：

```
awk '!/^C/{print $0}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:34:01.580

这是基本的：

```
awk '/^[^C]/' 
```

当您省略`{}`awk 命令的部分时，它的含义与`{print}`或*打印该行*相同。并且`//`是应用于标准输入的重新过滤器。只有符合过滤器的行才会被处理。

`^[^C]`是一个正则表达式。第一个`^`是anchor，表示*行*首；and`[^C]`是一个符号类，表示*除 C 之外的任何字符*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T11:15:20.477

与`sed`：

```
sed -i~ '/^C/d' inFile 
```

# iphone - iphone：使用 dispatch_async 进行内存管理

> ID：11117499
> 
> 赞同：1
> 
> 时间：2012-06-20T10:21:47.810
> 
> 标签：iphone, objective-c, ios, memory-management, grand-central-dispatch

我有一个使用的功能`dispatch_async`

```
- (void)_handleMessage:(id)message{
    dispatch_async(_callbackQueue, ^{
        [self.delegate webSocket:self didReceiveMessage:message];
    });
} 
```

我这样调用这个函数

```
NSString *str = [[NSString alloc] initWithData:frameData encoding:NSUTF8StringEncoding];
[self _handleMessage:str]
//[str release];  <== Can I release str here??? 
```

我的问题是

*   我在哪里可以释放变量`str`？

通常我可以在调用后立即释放`[self _handleMessage:str]`，但由于 dispatch_async 执行语句

```
[self.delegate webSocket:self didReceiveMessage:message]; 
```

异步（可能在一段时间后），我正在考虑一个糟糕的访问错误。在这种情况下管理内存的最佳方法是什么？

如果您仍然有疑问，我是一个老学生，并且没有使用 ARC

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T10:30:56.387

> ```
>  //[str release];  <== Can I release str here??? 
> ```

据我了解，您可以在那里释放变量。[确实](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html)：

> 在手动引用计数的环境中，复制块时保留块内使用的局部变量。在块中使用实例变量将导致对象本身被保留。如果您希望为特定对象变量覆盖此行为，您可以使用 __block 存储类型修饰符对其进行标记。

这意味着该块将保留`message`您在其中使用的对象，并在完成后将其释放，因此您可以在调用后自由释放它`_handleMessage`。

# php - spl_autoload_register 在包含的文件中不起作用

> ID：11117500
> 
> 赞同：3
> 
> 时间：2012-06-20T10:21:50.920
> 
> 标签：php, autoload

我正在使用[`spl_autoload_register`](http://php.net/spl_autoload_register)以加载类。

我有一个`index.php`包含文件的`init.php`文件。该`spl_autoload_register`函数在`init.php`文件中调用。

在`index.php`文件中，它可以正常工作：我可以创建类和东西，它们的名称已解析。

但后来，在 中`index.php`，我包含了另一个文件，`work.php`以执行某些特定任务。

奇怪的是，在 中`work.php`，找不到我正在使用的类。

如果我`spl_autoload_register`再次调用 in `work.php`，则可以解决该类。

真正奇怪的是这种行为并不一致：在我的测试服务器上，我不必重复`spl_autoload_register`调用，但在我的生产服务器上，这是强制性的。

我错过了一些选项`php.ini`吗？

**编辑/更新：**这是`init.php`文件上的内容，以防万一：

```
<?php
function my_autoload($class){
    include 'class/' . $class . '.class.php';
}

spl_autoload_register('my_autoload');
?> 
```

我的 index.php ：

```
<?php
require_once 'include/init.php';

$barcode = new Barcode();
// here is a bunch of test and stuff
include 'work.php';
?> 
```

我的 work.php ：

```
<?php
$myObj = new Barcode();
// more useles stuff
?> 
```

条形码在 index.php 代码部分完美创建，但在 work.php 部分失败......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:03:52.590

嗯，其实我是个笨蛋。问题不在于包含路径等，而在于 apache 配置：MultiViews。

我的网站只有一个访问点：index.php。我使用 url 重写重定向所有内容。但是由于多视图选项，如果 url 与文件同名，则 url 重写无法正常工作。

我的目录包含 index.php 和 work.php。

我的重写脚本是这样的：如果你点击 www.mywebsite.com/work，你继续使用参数 url=work 的 index.php。index.php 初始化所有内容，然后包含 work.php

但是多亏了 MultiViews 选项，如果我点击 www.mywebsite.com/work，它会搜索文件，找到一个 work.php，然后直接调用它。含义：没有 init，含义：没有 spl_autoload_register。

感谢您的回答，抱歉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T10:32:47.917

检查您的`include_path`设置是否包含本地目录。

通常，使用相对路径不是一个好主意。创建相对于 init.php 文件的绝对路径很容易，如下所示：

```
function my_autoload($class){
    include __DIR__.'/class/' . $class . '.class.php';
} 
```

此代码假定您的 init.php 文件与“class”文件夹位于同一文件夹中。

此外，不要盲目地包含给定路径中可能存在也可能不存在的文件，而不是潜在地产生错误，而是在包含文件之前检查文件是否存在：

```
function my_autoload($class){
    $file = __DIR__.'/class/' . $class . '.class.php';
    if(file_exists($file)) {
       include $file;
    }
} 
```

请注意，这`__DIR__`是 PHP 5.3 的一项功能，在装有 PHP 5.2 的主机上不可用。您可以将其替换为`dirname(__FILE__)`

另外，请注意，在 Linux 上以**区分大小写的**方式搜索文件，在大多数 Mac OS X 安装中，文件以不区分大小写的方式查找。如果您实例化类`MyClass`，Linux 将寻找，`MyClass.class.php`而 Mac OS X 也会加载该类，如果它位于名为`myclass.class.php`,`Myclass.class.php`等的文件中。

# python - json.dumps 是否保证不会丢失浮点精度？

> ID：11117502
> 
> 赞同：6
> 
> 时间：2012-06-20T10:21:52.057
> 
> 标签：python

我说的是 JSON 转换，例如：

```
>>> a = {'asas': 1/7.0}
>>> b = json.dumps(a)
>>> c = json.loads(b)
>>> c
{u'asas': 0.14285714285714285}
>>> c['asas'] == 1.0/7
True 
```

JSON编码是否保证不会四舍五入？

在我的[如何将浮点数存储为文本而不丢失精度？](https://stackoverflow.com/questions/11113767/how-to-store-a-floating-point-number-as-text-without-losing-precision#comment14562791_11113767)，马克狄金森说那`repr`不会导致精确度的损失。是否`json.dumps`使用`repr`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T10:30:09.153

文档中没有提到`repr`任何地方[`json`](http://docs.python.org/library/json.html)，但它是浮点到字符串强制的当前实现：

```
FLOAT_REPR = repr 
```

（[`Lib/json/encoder.py`，第 31 行](http://hg.python.org/cpython/file/c4b8c8064ef4/Lib/json/encoder.py#l31)）

[`JSONEncoder`](http://docs.python.org/library/json.html#json.JSONEncoder)如果你想要一个严格的保证，你可以建立自己的。

# javascript - JavaScript - 使用新关键字的标准

> ID：11117503
> 
> 赞同：3
> 
> 时间：2012-06-20T10:21:54.490
> 
> 标签：javascript, memory, var

这是一个与内存使用和“new”关键字有关的问题。我需要您对在本地方法中使用“新”的建议和偏好。

```
get: function ()
{
    **var get = new Ajax.Updater**('resourceList',
    "url",
    {
        method: 'POST',
        onComplete: this._onComplete.bind(this)
    });
}
```

在上面的代码中，我将对象分配给一个没有在任何地方使用的局部变量，我也可以按以下方式编写代码

```
get: function ()
{
    **new Ajax.Updater**('resourceList',
    "url",
    {
        method: 'POST',
        onComplete: this._onComplete.bind(this)
    });
}
```

在这里，我没有将对象分配给任何变量。

我现在有点困惑。哪种方式更好，分配给变量还是不分配给变量？如果我在本地方法范围之后分配给一个变量，该对象将从内存中删除，但如果我不分配会发生什么？它会被垃圾收集处理吗？什么是最好的方法？我个人更喜欢分配给变量；那是对的吗？如果我不分配给变量，对象什么时候会被销毁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:24:37.657

JavaScripts 垃圾收集器将在项目超出范围时处理它们，并且不再可访问；`Ajax.Updater`无论您是否将其分配给变量，这对于您的对象都是正确的。

那么你是否应该将它分配给一个变量？**我不会**。它清楚地表明，没有其他任何东西再次引用该对象。如果将其分配给变量，人们将开始查看该变量的使用位置。

垃圾收集器*非常*聪明和智能。您很少需要担心垃圾收集器是否会捡起一些东西。在 99.99999999% 的情况下，它会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:26:08.233

如果您随后需要访问该对象，您应该只将它分配给一个变量。无论哪种方式，对象都将被垃圾收集，因此您最好为自己保存一个变量声明和几个字节。

# symfony - Symfony2：为不同的包定制错误页面

> ID：11117508
> 
> 赞同：13
> 
> 时间：2012-06-20T10:22:07.220
> 
> 标签：symfony, bundles

我有几个包，我想知道是否可以**为每个包自定义它们自己的错误页面**。

我阅读了食谱，示例仅显示了所有捆绑包的通用自定义页面。

有没有办法覆盖每个捆绑包的异常过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T17:32:21.797

侦听器本身必须检测到这一点-我不知道有任何方法可以为单个捆绑包指定侦听器。

```
<?

namespace Your\MainBundle\EventListener;
use Symfony\Component\HttpKernel\Event\GetResponseForExceptionEvent;

class YourExceptionListener
{
  public function onKernelException(GetResponseForExceptionEvent $event)
  {
    $exception = $event->getException();
    $namespace = new \ReflectionObject( $event->getController() )->getNamespaceName();

    switch ( $namespace )
    {
      case 'Acme\\DemoBundle':
        // do whatever with $exception here
        break;
      case 'Some\\OtherBundle':
        // do whatever with $exception here
        break;
      case 'Your\\MainBundle':
        // do whatever with $exception here
        break;
      default;
        // default
    }
  }
} 
```

并注册

```
//services.yml
kernel.listener.yourlistener:
  class: Your\MainBundle\YourExceptionListener
  tags:
    - { name: kernel.event_listener, event: kernel.exception, method: onKernelException } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-03T13:18:46.000

我制作了一个捆绑包，用于从路由正则表达式配置中捕获不同的错误页面，它适用于文档中所述的“kernel.exception_listener”侦听器和“kernel.exception”事件（[http://symfony.com/doc/当前/cookbook/controller/error_pages.html#use-kernel-exception-event](http://symfony.com/doc/current/cookbook/controller/error_pages.html#use-kernel-exception-event)）。

使用此捆绑包，您可以：

*   从您想要的路线的正则表达式更改树枝异常模板
*   仅更改某些 http 状态代码的 twig 异常模板
*   启用/禁用调试模式的自定义模板

链接到捆绑包（MIT 许可证）：[https ://github.com/Kwrz/TwigException](https://github.com/Kwrz/TwigException)

感谢您的想法彼得，我想在我的捆绑包的下一个版本中添加一个功能，以从相应的捆绑包命名空间定义模板。

# jquery - IHTTPHANDLER / 下载文件。网页上没有任何反应

> ID：11117509
> 
> 赞同：2
> 
> 时间：2012-06-20T10:22:09.667
> 
> 标签：jquery, asp.net, ihttphandler

我写了一个 Ihttphandler 来下载文件：

```
public class DescargaFichero : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        Okiservice usuariosbd = new Okiservice();

        usuariosbd.CommandTimeout = 9000;

        byte[] datos;
        //var lista = usuariosbd.ficheros
        //    .Where (p=> p.iddoc==iddoc)
        //    .Select(p => new { IdDoc = p.iddoc, Area = p.area, Nombre = p.nombreweb, Descripcion = p.descripcion, FicheroReal = p.SystemFile, Tamano = p.Size,Extension=p.Extension,MIME=p.Content_Type }).FirstOrDefault();

        int id= Convert.ToInt32(context.Request["Id"]);

        var lista = (from binario in usuariosbd.Documentos_Binario
                     join docs in usuariosbd.Documentos on binario.FK_Adjunto equals docs.FK_Adjunto
                     join tipo in usuariosbd.Content_Type on binario.FileType equals tipo.id_content
                     where docs.iddoc == id
                     select new { binario.SystemFile, tipo.Content_Type1, docs.nombreweb }).First();

        datos = lista.SystemFile;

        //System.Web.HttpContext.Current.Response.ContentType =
        //    "application/vnd.ms-excel";

       string tipocontenido= lista.Content_Type1;

       string nombrefichero = lista.nombreweb;

        System.IO.Stream iStream = null;

        // Buffer to read 10K bytes in chunk:
        byte[] buffer = new Byte[10000];

        // Length of the file:
        int length;

        // Total bytes to read:
        long dataToRead;

        // Identify the file to download including its path.
        string filepath = "DownloadFileName";

        // Identify the file name.
        //string filename = System.IO.Path.GetFileName(filepath);

        try
        {
            // Open the file.
            //iStream = new System.IO.FileStream(sfichero, System.IO.FileMode.Open,
            //            System.IO.FileAccess.Read, System.IO.FileShare.Read);

            MemoryStream input = new MemoryStream(datos);
            iStream = input;

            // Total bytes to read:
            dataToRead = iStream.Length;

            System.Web.HttpContext.Current.Response.ContentType = tipocontenido;
            System.Web.HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=" + nombrefichero);

            // Read the bytes.
            while (dataToRead > 0)
            {
                // Verify that the client is connected.
                if (System.Web.HttpContext.Current.Response.IsClientConnected)
                {
                    // Read the data in buffer.
                    length = iStream.Read(buffer, 0, 10000);

                    // Write the data to the current output stream.
                    System.Web.HttpContext.Current.Response.OutputStream.Write(buffer, 0, length);

                    // Flush the data to the HTML output.
                    System.Web.HttpContext.Current.Response.Flush();

                    buffer = new Byte[10000];
                    dataToRead = dataToRead - length;
                }
                else
                {
                    //prevent infinite loop if user disconnects
                    dataToRead = -1;
                }
            }
        }
        catch (Exception ex)
        {
            // Trap the error, if any.
            System.Web.HttpContext.Current.Response.Write("Error : " + ex.Message);
        }
        finally
        {
            if (iStream != null)
            {
                //Close the file.
                iStream.Close();
            }
            System.Web.HttpContext.Current.Response.Close();
        }

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

它由一个 JQuery AJAX 函数调用，我在其中传递 Id 参数，这是必须下载的文件的 id：

```
function obtenerFichero(id) {
                $(document).ready(function () {

                    $.ajax({
                        type: "POST",
                        url: "../HELPDESK/DescargaFichero.ashx",

                        data:"Id="+id,

                        success: function (msg) {

                        }

                    });
                });
            } 
```

当我运行调试时，我可以看到我在响应时在 IHttpHandler 中获得了正确的数据： => System.Web.HttpContext.Current.Response.OutputStream.Write(buffer, 0, length); 但是网页中什么也没有发生，什么都没有。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:07:18.837

我认为问题在于您的代码尝试从 AJAX 调用下载文件，这是不可能的。

要触发下载文件，请将 window.location 更改为处理程序的 URL。既然你使用`Content-Disposition`，它应该会提示下载。

```
function obtenerFichero(id) {
   window.location.href = '../HELPDESK/DescargaFichero.ashx?ID=' + id;
} 
```

# php - 在我添加更多要插入的列后，PHP SQL 查询不起作用

> ID：11117510
> 
> 赞同：2
> 
> 时间：2012-06-20T10:22:10.667
> 
> 标签：php, mysql, sql

我是新来的，所以如果我做错了什么或者应该做一些我不知道的事情，请告诉我！

我的问题：我正在通过 PHP 运行 sql 查询，一切都很好。这是以下查询：

```
$query = "INSERT INTO products ( name, type, brand, price, discount, dateAdded, categories, status, description, code, weight, insurance, frame, fork, transmission, brakes, isDiscount, isPromo, gender ) VALUES ( '{$name}' , '{$sub}' , '{$status}' , '{$brand}' , '{$price}' , '{$discount}' , NOW() , '{$category}' , '{$status}' , '{$description}' , '{$id}' , '{$weight}' , '{$insurance}' , '{$frame}' , '{$fork}' , '{$transmission}' , '{$brakes}' , '{$is_discount}' , '{$promo}' , '{$gender}' )"; 
```

但是现在，我在其中添加了几列，但它停止了工作......有没有人看到我错过了什么？新的查询是：

```
$query = "INSERT INTO products ( name, type, brand, price, discount, dateAdded, categories, status, description, code, weight, insurance, frame, fork, transmission, brakes, isDiscount, isPromo, gender, frontlight, backlight, stem, seatpost, lock, year ) VALUES ( '{$name}' , '{$sub}' , '{$status}' , '{$brand}' , '{$price}' , '{$discount}' , NOW() , '{$category}' , '{$status}' , '{$description}' , '{$id}' , '{$weight}' , '{$insurance}' , '{$frame}' , '{$fork}' , '{$transmission}' , '{$brakes}' , '{$is_discount}' , '{$promo}' , '{$gender}' , '{$front}' , '{$back}' , '{$stem}' , '{$seat}' , '{$lock}' , '{$year}' )"; 
```

这真的很奇怪，因为除了要插入一些额外的列之外，真的没有什么区别！提前致谢！！

编辑：我还不能投票，因为我没有足够的声誉。所以，我想但不能，对不起！从我在 stackoverflow 上看到的情况来看，你们真的很欣赏这些赞成票，我可以理解 :)

编辑：非常感谢大家。我还是 MySQL 的新手，不知道 lock 是保留字。我更改了该字段的名称，现在一切正常。我对所有帮助过的人表示感谢的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:25:00.140

您必须转义`lock`，因为它是保留字：

```
INSERT INTO ... `lock`, year) VALUES (...) 
```

正如 Marco 的回答所述：VALUES 括号中的字段比定义要插入的列多。错误在这里：

```
INSERT INTO products (name, type, ... ) 
VALUES ( '{$name}' , '{$sub}' , '{$status}', ...)"; 
```

您需要在值列表之前或之后添加另一个列名或`type`从值列表中删除一个：要么`sub`或`status`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:25:36.597

*   第一个问题：您有 25 个字段`INSERT INTO`和 26个字段`VALUES`。
*   第二：每个字段都包含在'：你确定吗？例如 year 在我的脑海中应该是一个整数，但你用 '.
*   第三：有一些字段名称是保留字。你可以看看[MySql 保留字](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)链接

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T10:26:26.843

列列表有 25 项，但值列表有 26

我认为这是不需要的值列表中的状态字段

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T10:28:18.157

您忘记了子字段：

```
name, 
sub,
type, 
brand, 
price, 
discount, 
dateAdded, 
categories,
status, 
description, 
code, 
weight, 
insurance, 
frame, 
fork, 
transmission, 
brakes, 
isDiscount, 
isPromo, 
gender, 
frontlight, 
backlight, 
stem, 
seatpost, 
lock, 
year

'{$name}' , 
'{$sub}' , 
'{$status}' , 
'{$brand}' , 
'{$price}' , 
'{$discount}' , 
NOW() , 
'{$category}' ,
'{$status}' , 
'{$description}' , 
'{$id}' , 
'{$weight}' , 
'{$insurance}' , 
'{$frame}' , 
'{$fork}' , 
'{$transmission}' , 
'{$brakes}' , 
'{$is_discount}' , 
'{$promo}' , 
'{$gender}' , 
'{$front}' , 
'{$back}' , 
'{$stem}' , 
'{$seat}' , 
'{$lock}' , 
'{$year}' 
```

您的要求将是：

```
$query = "INSERT INTO products ( name, sub, type, brand, price, discount, dateAdded, categories, status, description, code, weight, insurance, frame, fork, transmission, brakes, isDiscount, isPromo, gender, frontlight, backlight, stem, seatpost, lock, year ) VALUES ( '{$name}' , '{$sub}' , '{$status}' , '{$brand}' , '{$price}' , '{$discount}' , NOW() , '{$category}' , '{$status}' , '{$description}' , '{$id}' , '{$weight}' , '{$insurance}' , '{$frame}' , '{$fork}' , '{$transmission}' , '{$brakes}' , '{$is_discount}' , '{$promo}' , '{$gender}' , '{$front}' , '{$back}' , '{$stem}' , '{$seat}' , '{$lock}' , '{$year}' )"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T10:25:17.453

也许是因为`year`作为字段名称也是关键字？

尝试使用像`year`这样的反引号

# sql-server - 运行配置文件中指定的扩展时出现异常。超出最大请求长度

> ID：11117511
> 
> 赞同：13
> 
> 时间：2012-06-20T10:22:11.323
> 
> 标签：sql-server, sql-server-2008, reporting-services, bids

直到今天，我每次进行任何更改时都可以完美部署报告部分。

该报告有大约 20 个链接和一张图片。

我今天添加了一个表，单击部署，它给了我以下错误：

```
Error   1   There was an exception running the extensions specified in the config file. ---> Maximum request length exceeded.       0   0 
```

正如我所说，我所做的只是在其中添加了一张桌子，这造成了混乱。为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-20T10:34:19.803

我最近遇到了这个问题。在以下位置的机器和文件中有一个名为的属性`maxRequestLength`需要增加。`web.config`

```
C:\Program Files\Microsoft SQL Server\MSRS10.MSSQLSERVER\Reporting Services\ReportServer 
```

如需进一步参考，请参阅[本文](http://www.bidn.com/blogs/MikeMollenhour/ssis/248/reporting-services-2008-error-maximum-request-length-exceeded)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-23T19:36:36.413

聚会迟到了，但我已经看到这种情况发生在具有多个嵌入图像的报告中，您可能已从布局中删除这些图像，但仍存在于报告数据 -> 图像下。他们可以放大报告的大小，并且在更改 IIS 中的最大请求长度设置之前很容易检查。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-20T06:01:33.563

“SQL Reporting Services 错误 - 超出最大请求长度”

这可以通过增加报告服务器的 web.config 文件中的连接超时属性来解决。
您必须为 Web 应用程序调整 web.config，在报告服务器的情况下，它通常是这样的：C:\Program Files\Microsoft SQL Server\MSSQL.2\Reporting Services\ReportServer 查找网络您的报告服务实例的 .config 文件，打开它，并跟踪看起来像这样的行

```
<httpRuntime executionTimeout="9000" requestValidationMode="2.0" /> 
```

现在只需在其中添加一个最大请求长度属性来解决问题，根据需要调整您的大小。这是5meg。

```
executionTimeout = "9000" maxRequestLength="500000" /> 
```

现在您需要重新启动 IIS。开始->运行->“iisreset”

参考： [https ://www.isolutionspartners.com/2011/09/16/sql-reporting-services-error-maximum-request-length-exceeded/](https://www.isolutionspartners.com/2011/09/16/sql-reporting-services-error-maximum-request-length-exceeded/)

# javascript - JqueryUI滑块句柄卡在div边框上并且句柄没有达到最大值

> ID：11117515
> 
> 赞同：0
> 
> 时间：2012-06-20T10:22:23.647
> 
> 标签：javascript, jquery, html, css, jquery-ui

大家好，我是 Jquery 菜鸟，我正在使用 jqueryUI 滑块，但滑块手柄总是卡在 div 边框（左侧）上，单击滑块后它会向前移动，但没有达到最大限制并卡在两者之间。

检查快照来自浏览器的**[JsFiddle](http://jsfiddle.net/VaMJ2/1/)**（您可以在其中看到滑块句柄），我已将所有代码放在小提琴上，但无法使 jsFiddle 工作。

![在此处输入图像描述](../Images/8c1133d6ada470313844f57da457a2a7.png)
*滑块：*
1\. 滑块手柄粘在 div 边框上。
2\. 滑块手柄不会向最大值移动，而是卡在中间的某个值上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:30:38.017

第一个问题是您指定`ui.values[0]`而不是`ui.value`, 来获取值。第二个问题是这`range: true`不是一个有效的选项。我[更新了示例`range: 'min'`](http://jsfiddle.net/cchana/QuFtg/2/)以显示它按预期工作。

# android - 通过 Single Sign On 进行身份验证后移动到 Facebook 应用程序页面

> ID：11117516
> 
> 赞同：1
> 
> 时间：2012-06-20T10:22:34.320
> 
> 标签：android, facebook, authentication

我正在开发一个需要集成 Facebook 社交功能的应用程序。

我想要的是使用 SSO（单点登录）功能，当用户在我的应用程序中按下一个按钮时，一个 web 视图将打开并向他显示我在 Facebook 中的应用程序页面，在用户进行身份验证后，现在他可以做其他类似的事情作为经过身份验证的用户的事情。

我下载了 Facebook SDK 并将其包含在我的项目中，我还在 Facebook 开发人员页面中签署了我的应用程序并获得了一个 APP-ID。

这是我的代码到目前为止的样子：

```
public class WebViewLike extends Activity {

    private static final String TAG = "WebViewLike";
    public static final String APP_ID = "1222222";
    private Facebook facebook = new Facebook(APP_ID);

    private WebView webView;
    private Activity myActivity;

    private final class WallWebChromeClient extends WebChromeClient {

        public void onProgressChanged(WebView view, int progress)   
        {
            myActivity.setTitle("Loading...");
            myActivity.setProgress(progress * 100);

            if(progress == 100)
                myActivity.setTitle(R.string.app_name);
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.view_weblike);
        myActivity = this;

        facebook.authorize(this, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {

                Log.d(TAG, "onComplete");
                Log.d(TAG, "facebook.getAccessToken() " + facebook.getAccessToken());
                Log.d(TAG, "facebook.getAccessExpires() " + facebook.getAccessExpires()); 

                //Load the given URL
                webView.loadUrl(getFacebookWallUrl());
            }

            @Override
            public void onFacebookError(FacebookError error) {Log.d(TAG, "onComplete");}

            @Override
            public void onError(DialogError e) {Log.d(TAG, "onComplete");}

            @Override
            public void onCancel() {Log.d(TAG, "onComplete");}
        });

        initWebView();
    }

    private void initWebView() {
        webView = (WebView) findViewById( R.id.likeWebView );
        final WebSettings webSettings = webView.getSettings(); 
        webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
        webSettings.setJavaScriptEnabled(true);
        webSettings.setBuiltInZoomControls(false);
        webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        webView.setHorizontalScrollBarEnabled(false);
        webView.setWebChromeClient(new WallWebChromeClient());
    }

    private String getFacebookWallUrl() {

        Log.d(TAG, "facebook.getAccessToken() != null");
        String wallUrl = "http://www.facebook.com/plugins/login.php?" + "href="
                + URLEncoder.encode("http://www.facebook.com/MyAppPage") + "&access_token="
                + URLEncoder.encode(facebook.getAccessToken());

        Log.d(TAG, "wallUrl " + wallUrl);
        return wallUrl;
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Log.d(TAG, "onActivityResult");
        facebook.authorizeCallback(requestCode, resultCode, data);
    }
} 
```

现在，当我按下按钮时，我会转到一个表明我已获得授权的新活动，这意味着 SSO 工作正常。问题是当我按下“确定”按钮时，正如我所说，我想移动到我的应用程序页面，但我尝试的所有内容都显示我的 Facebook 应用程序页面，但要求我再次登录。从我的角度来看，我需要在方法中更改`wallUrl`字符串的开头`getFacebookWallUrl()`，但我找不到任何关于它的信息。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:30:30.963

您是否正在通过社交网络分享有关您的应用的信息？如果你的答案是肯定的，那么试试[这个](http://support.addthis.com/customer/portal/articles/381271-addthis-for-android-quickstart-guide#.T-Gl1PXeDIU)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:59:19.793

您可以使用 fbrocket api 进行 Facebook 集成，如下例所示。我正在成功使用它。

[http://www.androidpeople.com/android-facebook-api-example-using-fbrocket/#idc-cover](http://www.androidpeople.com/android-facebook-api-example-using-fbrocket/#idc-cover)

# asp.net-mvc - MVC3：如何从处理错误的类重定向到 html 页面

> ID：11117517
> 
> 赞同：1
> 
> 时间：2012-06-20T10:22:37.487
> 
> 标签：asp.net-mvc, redirect, razor

我在 MVC3 应用程序中有一个自定义错误处理程序类属性。它`ExceptionContext`作为参数。我想在编写错误日志后重定向到 error.html 页面。我已经尝试过，但它不起作用。请问有什么建议吗？

```
context.Result = new RedirectResult("~/Error.html"); 
```

**自定义错误处理程序**

```
private static void LogUnhandledException(ExceptionContext context)
{
    var e = context.Exception;
    ErrorLog.Error(1, e.Message, e, "test");

    // Redirect to Error Page
    //context.Result = new RedirectResult("~/Error.htm");
    context.Result = new FilePathResult("~/Error.htm", "text/html");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:38:48.083

尝试这个

```
 context.Result = new FilePathResult("~/Error.html", "text/html"); 
```

而且我认为您应该在`Error` `Action`not in 中执行此操作`HandleErrorAttribute`：

```
public ActionResult Error(){
   var result = new FilePathResult("~/Error.html", "text/html");
   return result;
} 
```

# javascript - 在原始文件之后插入克隆

> ID：11117519
> 
> 赞同：1
> 
> 时间：2012-06-20T10:22:46.593
> 
> 标签：javascript

我试图在原始元素之后放置一个克隆元素。

我做了一些研究，发现了如何创建克隆以及如何将克隆放置在原版之后，但我似乎无法将它们放在一起。

这是我的代码：

```
<html>

<head>

<script type="text/javascript">

function onClickAdd() {

    var tableRow = document.getElementById("tableRow");
    var tableRowClone = tableRow.cloneNode(true);
    document.getElementById("tableRow").insertBefore(tableRowClone, tableRow.nextSibling);
}

</script>
</head>
<body>    
    <table>
        <tr id="tableRow">
            <td>
                <input type="text" name="textField">
            </td>
        </tr>

        <tr>
            <td>
                <input type="button" name="addButton" value="Add" onClick="Javascript:onClickAdd()">
            </td>
        </tr>
    </table>
</body>

</html> 
```

我的预期输出是：每次单击 addButton 时，都会在文本字段堆栈的底部放置一个新的文本输入字段。按钮不是堆栈的一部分，应始终位于堆栈下方。

我完全是 Javascript 的菜鸟。上面的代码可能不正确，也可能不正确。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:26:53.943

关。:-) 您在*父*节点上调用它（无需再次查找）：

```
function onClickAdd() {

    var tableRow = document.getElementById("tableRow");
    var tableRowClone = tableRow.cloneNode(true);
    tableRow.parentNode.insertBefore(tableRowClone, tableRow.nextSibling);
//  ^^^^^^^^^^^^^^^^^^^--- changes here
} 
```

当然，上面创建了一个无效的 DOM 结构，因为您最终会得到具有相同值 ( )的*两*行，并且值在文档中**必须**是唯一的。所以：`id``"tableRow"``id`

 **```
function onClickAdd() {

    var tableRow = document.getElementById("tableRow");
    var tableRowClone = tableRow.cloneNode(true);
    // Clear the `id` from the clone
    tableRowClone.id = ""; // To clear it, or include something to give it its own
    tableRow.parentNode.insertBefore(tableRowClone, tableRow.nextSibling);
//  ^^^^^^^^^^^^^^^^^^^--- changes here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:26:03.803

您必须[`insertBefore`](https://developer.mozilla.org/en/DOM/Node.insertBefore)在父元素上使用：

```
tableRow.parentNode.insertBefore(tableRowClone, tableRow.nextSibling); 
```

并且不要忘记更改`id`. ID 必须是唯一的。
并且，在 inline 事件中，`Javascript:`已经过时了。它不会导致任何错误，因为它被解释为标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:28:59.897

```
function onClickAdd() {
    var tableRow = document.getElementById("tableRow");
    var tableRowClone = tableRow.cloneNode(true);
    tableRow.parentNode.insertBefore(tableRowClone, tableRow.nextSibling);
} 
```

和[演示](http://jsfiddle.net/dfK9H/)。**

# xml - XML解析xml标签具有属性和值的地方

> ID：11117520
> 
> 赞同：-2
> 
> 时间：2012-06-20T10:22:50.307
> 
> 标签：xml, parsing

我需要帮助。我必须从 xml 文件中获取值。我的 XML 属于以下类型。

```
<CREDIT_SUMMARY BorrowerID="Borrower" _Name="TransUnionCreditSummaryDescription">
    <_DATA_SET _Name="SummaryType" _Value="R"></_DATA_SET>
    <_DATA_SET _Name="HighCredit" _Value="5128"></_DATA_SET>
    <_DATA_SET _Name="CreditLimit" _Value="23600"></_DATA_SET>
    <_DATA_SET _Name="Balance" _Value="13364"></_DATA_SET>
    <_DATA_SET _Name="AmountPastDue" _Value="0"></_DATA_SET>
    <_DATA_SET _Name="MonthlyPayment" _Value="148"></_DATA_SET>
    <_DATA_SET _Name="PercentOfCreditAvailable" _Value="43"></_DATA_SET>
    <_Text>TransUnion Credit Summary: Revolving or Check Credit Accounts</_Text>
</CREDIT_SUMMARY> 
```

我必须获取 xml 标记内的 _Name 和 _Value 的值。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:35:02.460

使用以下[Xpath](http://www.w3schools.com/xpath/xpath_intro.asp)表达式获取第一个和第二个属性的属性标识符：

```
//_DATA_SET/@*[position() = 1 or position() = 2]/name() 
```

或者这个来获取值：

```
//_DATA_SET/@*[position() = 1 or position() = 2]/string() 
```

[Saxon HE](http://sourceforge.net/projects/saxon/)可用于在命令行上执行查询：

```
$ cat credit.xml 
<CREDIT_SUMMARY BorrowerID="Borrower" _Name="TransUnionCreditSummaryDescription">
    <_DATA_SET _Name="SummaryType" _Value="R"></_DATA_SET>
    <_DATA_SET _Name="HighCredit" _Value="5128"></_DATA_SET>
    <_DATA_SET _Name="CreditLimit" _Value="23600"></_DATA_SET>
    <_DATA_SET _Name="Balance" _Value="13364"></_DATA_SET>
    <_DATA_SET _Name="AmountPastDue" _Value="0"></_DATA_SET>
    <_DATA_SET _Name="MonthlyPayment" _Value="148"></_DATA_SET>
    <_DATA_SET _Name="PercentOfCreditAvailable" _Value="43"></_DATA_SET>
    <_Text>TransUnion Credit Summary: Revolving or Check Credit Accounts</_Text>
</CREDIT_SUMMARY>
$ java -cp saxon9he.jar net.sf.saxon.Query -s:credit.xml -qs:'//_DATA_SET/@*[position() = 1 or position() = 2]/string()' '!omit-xml-declaration=yes'
SummaryType R HighCredit 5128 CreditLimit 23600 Balance 13364 AmountPastDue 0 MonthlyPayment 148 PercentOfCreditAvailable 43 
```

# matlab - 从代码执行 MATLAB 文件

> ID：11117523
> 
> 赞同：1
> 
> 时间：2012-06-20T10:22:57.783
> 
> 标签：matlab

如何从另一个 MATLAB 文件（“main.m”）执行 MATLAB 文件（比如“text1.m”）？
我尝试了 MATLAB 的`eval`功能，但没有奏效：

```
evalc('K:\DOWNLOADS\experiments\bag_of_words\config_file_1.m'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:57:00.203

如果它是一个[脚本](http://www.mathworks.se/help/techdoc/ref/script.html)，您可以在另一个 M 文件脚本中使用其文件名（不带“.m”）直接调用它（类似于不带任何参数或括号的函数调用）。如果它声明了一个[函数](http://www.mathworks.se/help/techdoc/ref/function.html)，它应该位于 MATLAB 搜索路径或当前文件夹中，以便您能够调用该函数。这也可能是脚本的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:54:09.390

如果 M 文件不在路径上，则有一个方便的函数[RUN](http://www.mathworks.com/help/techdoc/ref/run.html)来运行脚本。

# algorithm - 在哈希中查找剩余的较小值

> ID：11117530
> 
> 赞同：0
> 
> 时间：2012-06-20T10:23:20.967
> 
> 标签：algorithm, perl, hash

交叉发布在[http://perlmonks.org/index.pl?node_id=977333](http://perlmonks.org/index.pl?node_id=977333)

给定以下哈希：

```
my %hash = (1 => "i", 2 => "j", 3 => "k", 4=> "l"); 
```

和输入对

```
 my @pair  = (1,2);   
   my @pair2 = (2,3);  
   my @pair3 = (1,3);
   my @pair4 = (2,4); 
```

我们希望找到`%hash`值小于任何给定对的成员的键。

所以所需的输出是：

```
@pair -> []
@pair2 -> [1]
@pair3 -> [2]
@pair4 -> [1,3] 
```

什么是正确的算法来做到这一点？以下是我的代码但失败：

```
sub get_output {
     my ($inputhash,$pair) = @_;

  my @output = ();
  my %done = ();
  foreach my $pr (@{$pair}){
     foreach my $kn (keys %{$inputhash}){
             next if ($pr <= $kn || $done{$kn});
             push @output,$kn;  
             $done{$kn} = 1;

     }
  }

  use Data::Dumper;
  print Dumper \@output;
  return @output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:23:45.073

这不是很有效，但它有效。鉴于您请求的输出不涉及哈希，仍然看不到哈希的意义。：

```
#!/usr/bin/perl

use strict;
use warnings;
my %hash = (1 => "i", 2 => "j", 3 => "k", 4=> "l");
my @pair = (1,2); #tested all your cases and it showed to work
my $it;
my $iterator;
my $sit;
my @occurence;
my @oldpair = @pair;
@occurence =  (0, 0, 0, 0);
foreach(@oldpair)
{
if ($_ == 1)
{
    $occurence[0] += 1;
}
if ($_ == 2)
{
    push(@pair, 1);
    $occurence[0] += 1;
    $occurence[1] += 1;
}
if ($_ == 3)
{
    push(@pair, 2);
    $occurence[1] += 1;
    $occurence[2] += 1;
}
if ($_ == 4)
{
    push(@pair, 3);
    $occurence[2] += 1;
    $occurence[3] += 1;
}
}

foreach $iterator(@occurence)
{
    $it++;
    if ($iterator > 1)
    {
        @pair = grep { $_ != $it } @pair;
    }

}
foreach $sit(@oldpair)
{
    @pair = grep { $_ != $sit } @pair;
} 
```

# .net - 使用自定义比较类并行执行数据行比较

> ID：11117536
> 
> 赞同：1
> 
> 时间：2012-06-20T10:23:44.210
> 
> 标签：.net, c#-4.0, linq-to-objects, task-parallel-library, parallel-extensions

我正在实现一个“协调”库，它允许在不同的数据对象之间执行差异。作为实现的一部分，我将要比较的对象（主要是 CSV 文件）转换为数据表，并执行特定的比较步骤，最后一个是比较行中的实际值。

为了进行行比较，我使用下面的代码：

```
 var rowsMissingInTrgt = rowsInTrgt.Except(rowsInSrc, DataRowComparer.Default);
  var rowsMissingInSrc = rowsInSrc.Except(rowsInTrgt, DataRowComparer.Default);
  return rowsMissingInSrc.Count() > 0 ? false : 
         rowsMissingInTrgt.Count() > 0 ? false : 
         true; 
```

我不想使用默认的 DataRowComparer，而是想实现一个自定义 DataRowComparer，但希望所有比较并行发生，因为这些任务彼此独立，最后提供了在比较上执行逻辑与或逻辑或的可选性任务。

## 问题：

1.  实现“ `IEqualityComparer<TRow>where TRow : DataRow`”是否足以调用行的并行比较？

2.  对于logical_AND，我认为，在第一个“假”上中止其余比较是有意义的。这可以做到吗？

3.  对于logical_OR，我需要类似于线程上的wait_All 的东西。如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:04:05.270

用于`IEnumerable<T>.AsParallel()`源和目标集合。

```
DataTable sourceTable;
DataTable targetTable;

// run each collection as parallel.
var sourceRows = sourceTable.Rows.Cast<DataRow>().AsParallel();
var targetRows = targetTable.Rows.Cast<DataRow>().AsParallel();

var rowsMissingInTarget = sourceRows.Except(targetRows, DataRowComparer.Default);
var rowsMissingInSource = targetRows.Except(sourceRows, DataRowComparar.Default); 
```

并行性适用于行集合，而不适用于比较本身。例如，在一个有 100k 记录的表上，可以使用 2 个（或更多）线程来完成处理，每个线程进行 50k 比较。我建议您进行一些性能测试。由于每行比较都非常快，我怀疑在这种情况下并行处理行实际上会更慢。

# .net - .net 框架 - 文件版本似乎是特定于操作系统的？

> ID：11117543
> 
> 赞同：2
> 
> 时间：2012-06-20T10:24:06.530
> 
> 标签：.net, .net-2.0

为什么 .net framework 2.0 中包含的程序集的*文件版本*在各个机器上不同？

我有两个系统，都有最新的微软补丁和更新。

对于此示例，我将查看 dotnet 2.0 (x86)：

*   windows xp (x86) 有 System.Windows.Forms.dll - 2.0.50727。**3637**
*   Windows 7 (x64) 具有 System.Windows.Forms.dll - 2.0.50727。**5460**

不同文件版本背后的模式是什么？

*   它是操作系统特定的（xp 与 7）吗？
*   它是特定于平台的（x86 与 x64）吗？
*   它是特定语言的吗？

--

**[编辑]**
使问题更清楚：似乎微软正在安装 dotnet 框架的不同“风格”。
我想了解适用的**规则**。就像是：

*   **风味 A**安装在目标系统**X上**
*   **风味 B**安装在目标系统**Y上**

例如，如果您曾经自己编写过 msi，您将理解我在“组件”表中的“条件”的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:26:23.927

看起来它是特定于操作系统的。

来自 MSDN： http: [//support.microsoft.com/kb/2686831](http://support.microsoft.com/kb/2686831)。

```
This article applies to the following:   
Microsoft .NET Framework 3.5.1 when used with:
     Windows 7 Service Pack 1
     Windows Server 2008 R2 Service Pack 1 
```

和[http://support.microsoft.com/kb/2686828](http://support.microsoft.com/kb/2686828)

```
This article applies to the following:
Microsoft .NET Framework 2.0 Service Pack 2 when used with:
    Windows XP Service Pack 3
    Windows Server 2003 Service Pack 2 
```

# c# - 解析日志字符串，没有 :Split

> ID：11117545
> 
> 赞同：1
> 
> 时间：2012-06-20T10:24:12.870
> 
> 标签：c#, regex, string-parsing

搜索了一下，但我只发现用逗号分隔的情况。本案不同。

为了解释我的问题，我将展示一个小例子：

```
JAN 01 00:00:01 <Admin> Action, May have spaces etc. 
```

（这是一个日志条目）

我想将此字符串解析为几个变量。第一位显然是日期，没有年份。在 <> 之间列出了登录名，在日志条目后面。

配置应该是这样的：

```
{month} {day} {hour}:{minute}:{second} <{login}> {the_rest} 
```

这将允许更改而无需对整个内容进行硬编码（使用拆分等）。

我认为在这里使用正则表达式可能很有用，但我对它并不太了解，也不知道它是否可以在这种情况下使用。速度并不重要，但我真的不知道如何实现这一点。

谢谢，

~Tgys

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:30:25.000

```
string line = "JAN 01 00:00:01 <Admin> Action, May have spaces etc.";
var m = Regex.Match(line, @"(\w{3} \d{2} \d{2}:\d{2}:\d{2}) \<(\w+)\>([\w ]+),([\w ]+)");

var date = DateTime.ParseExact(m.Groups[1].Value,"MMM dd HH:mm:ss",CultureInfo.InvariantCulture);
var user = m.Groups[2].Value;
var action = m.Groups[3].Value;
var text = m.Groups[4].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:28:38.980

您仍然可以使用 split ，在空格字符上进行拆分。

显然，您的问题是您希望在一定数量的拆分后保留空格，以便您的“其余部分”保持在一起。

split 的可选 int 参数允许您提供希望执行的最大拆分数量，因此可能会提供您正在寻找的解决方法。

[http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:37:47.607

您还可以将其用作正则表达式并使用捕获的组：

```
^(?<Month>\w{3})\s(?<Day>\d{2})\s(?<Hour>\d{2}):(?<Min>\d{2}):(?<Sec>\d{2})\s(?<User>\<(\w.+?)\>)(.+)$ 
```

[RegEx Hero 示例在这里](http://regexhero.net/tester/?id=4aa5f883-922f-4f3f-92a0-3627218e3343)。

编辑：错过了用户部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T10:45:26.227

正则表达式确实是这里的正确工具。首先，让我们看看如何使用硬编码的正则表达式来解析此日志。

### 使用硬编码的正则表达式进行解析

```
var str = "JAN 01 00:00:01 <Admin> Action, May have spaces etc.";
var re = new Regex("^" +
       @"(?<month>(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))" +
       " " +
       @"(?<day>\d+)" +
       " " +
       @"(?<hour>\d+)" +
       ":" +
       @"(?<the_rest>.*)" +
       "$");
var match = re.Match(str); 
```

我们在这里所做的是使用*命名捕获组逐段*创建正则表达式。为简洁起见，我没有捕获所有相关信息，也没有花太多时间考虑在每个组的上下文中什么是有效输入（例如`day`will match `999`，尽管那不是有效的一天）。这一切都可以在以后发生；现在，[**看看它的实际效果**](http://ideone.com/QC2C9)。

### 从预定义的部分构造正则表达式

下一步是很好地将每个捕获组的定义提取到字典中：

```
var groups = new Dictionary<string, string>
{
    { "month", "(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)" },
    { "day", @"\d+" },
    { "hour", @"\d+" },
    { "the_rest", ".*" },
}; 
```

鉴于此，我们现在可以构造相同的正则表达式

```
var re = new Regex("^" +
       string.Format("(?<month{0}>)", groups["month"]) +
       " " +
       string.Format("(?<day{0}>)", groups["day"]) +
       " " +
       string.Format("(?<hour{0}>)", groups["hour"]) +
       ":" +
       string.Format("(?<the_rest{0}>)", groups["the_rest"]) +
       "$"); 
```

好的，这开始看起来像是可以动态构建的东西。

### 根据用户提供的规范构造正则表达式

假设我们想从一个看起来像的规范构建它

```
"{month} {day} {hour}:{the_rest}" 
```

这该怎么做？用另一个正则表达式！具体来说，我们将使用 that 的重载[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/cft8645c.aspx)，可以用函数的结果替换匹配项：

```
var format = "{month} {day} {hour}:{the_rest}";
var result = Regex.Replace(format, @"\{(\w+)\}", m => groups[m.Groups[1].Value]); 
```

回来之前[看看这个。](http://ideone.com/ehKUK)

### 使用正则表达式解析输入

此时，我们可以传入一个格式规范，并根据该格式取回一个匹配输入的正则表达式。还剩下什么？要将正则表达式与输入匹配的结果转换回“动态”结构：

```
var format = "{month} {day} {hour}:{the_rest}";
var re = Regex.Replace(format,
                       @"\{(\w+)\}",
                       m => string.Format("(?<{0}>{1})", m.Groups[1].Value, groups[m.Groups[1].Value]));
var regex = new Regex("^" + re + "$", RegexOptions.ExplicitCapture);
var match = regex.Match(str); 
```

### 拉出最终结果

在此刻：

*   我们可以测试`match.Success`一下动态构造的表达式是否与输入匹配
*   我们可以迭代`regex.GetGroupNames()`以获取解析中使用的组的名称
*   我们可以迭代`match.Groups`得到解析每个组的结果

所以让我们把它们放在字典里：

```
var results = regex.GetGroupNames().ToDictionary(n => n, n => match.Groups[n].Value); 
```

### 成功！

您现在可以创建一个`Parse`允许这样做的方法：

```
var input = "JAN 01 00:00:01 <Admin> Action, May have spaces etc.";
var format = "{month} {day} {hour}:{the_rest}";
var results = Parse(input, format); 
```

`Parse`将识别（但不允许用户修改）表达式，例如`"{month}"`，同时允许用户自由混合和匹配这些表达式以解析输入。

**[查看最终结果](http://ideone.com/RlXCq)**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T10:38:24.043

您可以使用此正则表达式：

```
(?<Month>[A-Z]{3})\s(?<Day>[0-9]{1,2})\s(?<Hour>[0-9]{1,2}):(?<Minute>[0-9]{1,2}):(?<Second>[0-9]{1,2})\s<(?<Login>[^>]+)>(?<Rest>.*) 
```

这有点笨拙和复杂，但我希望下面的例子能让你得到你想要的。

```
class Foo
{
public string Month { get; set; }
public int Day { get; set; }
public int Hour { get; set; }
public int Minute { get; set; }
public int Second { get; set; }
public string Login { get; set; }
public string Rest { get; set; }
}

string strRegex = @"(?<Month>[A-Z]{3})\s(?<Day>[0-9]{1,2})\s(?<Hour>[0-9]{1,2}):(?<Minute>[0-9]{1,2}):(?<Second>[0-9]{1,2})\s<(?<Login>[^>]+)>(?<Rest>.*)";
RegexOptions myRegexOptions = RegexOptions.None;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"JAN 01 00:00:01 <Admin> Action, May have spaces etc. \n";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
    if (myMatch.Success)
    {
        new Foo
        {
            Month = myMatch.Groups["Month"].Value,
            Day = Convert.ToInt32(myMatch.Groups["Day"].Value),
            Hour = Convert.ToInt32(myMatch.Groups["Hour"].Value),
            Minute = Convert.ToInt32(myMatch.Groups["Minute"].Value),
            Second = Convert.ToInt32(myMatch.Groups["Second"].Value),
            Login = myMatch.Groups["Login"].Value,
            Rest = myMatch.Groups["Rest"].Value
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T10:41:00.420

下面的正则表达式可以解决问题。

```
^([A-Z]{3})\s*([0-9]{1,2})\s*([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})\s*<(.+)>\s*(.+) 
```

使用在线[正则表达式生成器](http://gskinner.com/RegExr/)对其进行了测试。

它将返回 7 个捕获的组。

*   第 1 组：（[AZ]{3}）：月
*   第 2 组：（[0-9]{1,2}）：天
*   第 3 组：（[0-9]{1,2}）：小时
*   第 4 组：（[0-9]{1,2}）：分钟
*   第 5 组：（[0-9]{1,2}）：第二
*   第 6 组：(.+)：用户名
*   第 7 组：(.+)：其余

# android - android 中的 CustomizedView - listView 和 Button UI

> ID：11117549
> 
> 赞同：0
> 
> 时间：2012-06-20T10:24:30.167
> 
> 标签：android, listview, android-layout, android-custom-view

我正在尝试在android中开发给定的UI，有一个ListView，在它上面有一个按钮是可见的，listView的高度是Fill_PARENT，按钮固定在它的位置。

如何在视图上方添加视图？或有关使用 XML 或自定义视图创建此布局的任何想法。

![在此处输入图像描述](../Images/328bba03a64b72c10cb5b01fb9333911.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:32:42.237

您需要为您的项目创建布局，并`BaseAdapter`为您的自定义创建自己的适配器`ListView`，

请参阅本[教程](http://www.mubasheralam.com/tutorials/android/listview-custom-layout-rows)以了解如何创建自定义`ListView`

看到这个问题，它与您的情况类似：[如何自定义 listview 行 android](https://stackoverflow.com/questions/4407865/how-to-customize-listview-row-android)

最后，本[教程](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)非常好，它管理列表项的选择状态：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T16:28:58.890

我认为根据我对您问题的理解，您似乎正在寻找`FrameLayout`。所以有一个列表视图，顶部是一个按钮。对？试试这个。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout android:id="@+id/mainlayout" android:layout_height="fill_parent" android:layout_width="fill_parent" android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">

<ListView android:layout_height="fill_parent" android:layout_width="fill_parent" android:padding="10dp" android:id="@+id/myListView"/>

<ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/buttondrawable" />
</FrameLayout> 
```

# android - SBS 视频未在 LG3D 手机中正确显示

> ID：11117554
> 
> 赞同：0
> 
> 时间：2012-06-20T10:24:42.947
> 
> 标签：android, video, 3d, lg

我使用流行的软件转换了 2D>3D 视频，并在选项中选择了 SBS。转换没问题，但是当我在装有 Android 的 LG 3D 智能手机中播放视频时，它显示为 2 张 3D 图片并排显示，并且播放器无法将 2 张图片合二为一。

有人有什么建议吗？似乎缺少使智能手机正确读取视频的标志或...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:25:38.467

解决了！问题不止一个 1-更新到最新的 SDK 2-将项目目标修改为特定的 LG 添加库 3-在清单中添加

```
<uses-library android:name="com.lge.real3d" android:required="true"/> 
```

4-在活动中必须为 Real3D 设置一些代码，您可以在 LG 提供的带有附加组件的 Real 3D 规范指南中找到

注意设置正确的 API，我建议使用 API 8 2.2.2 而不是 API 10 并在清单中设置`android:minSdkVersion="8"`

# ios - iPhone应用程序是否需要启动画面？

> ID：11117556
> 
> 赞同：3
> 
> 时间：2012-06-20T10:24:44.440
> 
> 标签：ios, iphone, ipad, splash-screen

这是我第一次提交我的应用程序。我从文档中知道应该指定启动图像，但是我创建了自己的启动视图（带有 uilabel 和 uiimageview 的视图控制器）并且效果很好。但是如果我不做发布图片，我怕不被接受。有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T10:35:04.317

苹果引用：

> 自定义图标和图像：
> - 应用程序图标（所有应用程序都需要）
> - App Store 的应用程序图标（所有应用程序都需要）
> - 启动图像（所有应用程序都需要）
> - [...]

当没有指定启动图像时，该应用程序确实会被拒绝。
只需截取您的自定义启动查看器的屏幕截图，仅此而已:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T10:41:37.907

是的。这是必需的。[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html) ![在此处输入图像描述](../Images/cd67d013f0f68075886b69ae5dd4cb02.png)

这也是世界上最简单的任务。您只需要将图像设置为启动/启动图像。

更新：来自 Apple HIG：`Design a launch image that is identical to the first screen of the app. The launch image gives users the impression that your app is fast and responsive because it appears instantly and is quickly replaced by the first screen of your app.`

**更新链接：** [https ://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/LaunchImages.html#//apple_ref/doc/uid/TP40006556-CH22-SW1](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/LaunchImages.html#//apple_ref/doc/uid/TP40006556-CH22-SW1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T10:34:49.177

要将您的应用提交到应用商店，您**需要一个启动图像**。您不需要在 Interface Builder 中或以编程方式构建它，它只是一张图片。您可以通过运行 iPhone 模拟器并截取屏幕截图来快速轻松地完成此操作。然后您所要做的就是将图像复制到目标文件夹并指定该图像用作启动图像：

![在此处输入图像描述](../Images/e4d90ddcb0ba2b9dc55bb106d7417d8f.png)

只需将您的图像文件拖入框中。

这是关于应用程序图像要求的苹果文档：[自定义图标和图像创建指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-06-20T10:34:15.230

不，不需要设置启动图像。

# python - 使用 Python 在数据库中使用 Like 语句

> ID：11117558
> 
> 赞同：0
> 
> 时间：2012-06-20T10:24:45.643
> 
> 标签：python, mysql, database

我仍在学习 Python 作为一种非常简单的编程语言，问题出在 DataBase 上，我正在使用 MySQL 来构建它，然后我想从 Python 代码中选择一些元组，因为我确实编写了如下查询：

```
Q = "INSERT INTO contacts (FirstName,LastName,phone,mobile,email,address) VALUES('%s','%s','%s','%s','%s','%s') "% \
            (FN,LN,phone,Mobile,email,address) 
```

因为使用变量，没关系。
但是如果我想在查询中使用 (LIKE'') 语句，我会遇到引用问题！如下：

```
 Q = "SELECT LastName FROM contacts WHERE phone LIKE '_'%s'%'" %\
            (phone) 
```

我能做些什么来解决这个问题，有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:27:29.587

使用[prepared statements](https://stackoverflow.com/questions/1947750/does-python-support-mysql-prepared-statements)，避免字符串格式化的麻烦：

```
pattern = "_" + phone + "%"
cursor.execute("SELECT LastName FROM contacts WHERE phone LIKE %s", (pattern,)) 
```

如果您不想使用准备好的语句，或者在其他情况下偶然发现此问题，请切换到使用[str.format](http://docs.python.org/library/stdtypes.html#str.format)（但在执行此操作之前请阅读有关[SQL 注入的信息）：](http://bobby-tables.com/)

```
Q = "SELECT LastName FROM contacts WHERE phone LIKE '_{0}%'".format(phone) 
```

或者将两者结合起来：

```
pattern = "_{0}%".format(phone)
cursor.execute("SELECT LastName FROM contacts WHERE phone LIKE %s", (pattern,)) 
```

# asp.net - 如何将 web.config appSettings 作为 ConfigurationSection 而不是 NameValueCollection

> ID：11117560
> 
> 赞同：10
> 
> 时间：2012-06-20T10:24:48.933
> 
> 标签：asp.net, .net

ConfigurationManager.AppSettings 属性 返回一个 NameValueCollection 对象，该对象包含当前应用程序默认配置的 AppSettingsSection 对象的内容。

但我需要 AppSettingsSection 对象，因为我需要在运行时更改它的 configSource 属性

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T20:23:41.420

```
var configuration = WebConfigurationManager.OpenWebConfiguration("~");
var appSettingsSection = (AppSettingsSection)configuration.GetSection("appSettings"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T10:28:32.567

您可以`AppSettingsSection`使用[Configuration.GetSection](http://msdn.microsoft.com/en-us/library/system.configuration.configuration.getsection.aspx)方法或[Configuration.AppSetting](http://msdn.microsoft.com/en-us/library/system.configuration.configuration.appsettings.aspx)属性来获取。

要获取`Configuration`对象，您需要使用`ConfigurationManager.Open...`或`WebConfigurationManager.Open...`方法：

```
string sectionName = "appSettings";
var config = 
    ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
AppSettingsSection appSettingSection =
    (AppSettingsSection)config .GetSection(sectionName); 
```

# password-encryption - 为什么 MD5/SHA1 密码哈希无法解密？

> ID：11117581
> 
> 赞同：5
> 
> 时间：2012-06-20T10:25:58.760
> 
> 标签：password-encryption, password-hash

我最近读了一篇关于[密码散列](http://phpsec.org/articles/2005/password-hashing.html)的文章。

如何创建 MD5 或 SHA1 哈希使其无法解密？我的想法是，它必须通过某些 FORMULA 加密字符串（它总是为相同的字符串提供相同的哈希值；所以必须没有随机化），这就是为什么我们应该能够用相同的 FORMULA 解密它？或者人们不知道论坛？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-20T10:31:20.903

MD5 和 SHA1 不是加密算法。它们是散列算法。

这是一个单向公式。在特定字符串上运行 MD5 或 SHA1 会得到始终相同的哈希值。无法反转函数以返回原始字符串。

例如：

> 15 模 4 = 3

即使你知道公式是

> x 模组 4

您不能推断出 x，因为它可能是 3、7、11、15 等...

显然 MD5 和 SHA1 要复杂得多！

在上面的例子中，输入 15 总是会给你 3 的答案，但没有人能够推断出原始数字。这确实很好地导致了多个输入字符串可能给出相同哈希的冲突：

[http://en.wikipedia.org/wiki/MD5#Collision_vulnerabilities](http://en.wikipedia.org/wiki/MD5#Collision_vulnerabilities)

维基百科有关于使用的特定算法的信息：

[http://en.wikipedia.org/wiki/MD5#Algorithm](http://en.wikipedia.org/wiki/MD5#Algorithm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T19:11:48.250

心理学正确地解释了一切，我想再补充一点：

> 15 模 4 = 3
> 
> 即使你知道公式是
> 
> x 模组 4
> 
> 你不能推断出 x，因为它可能是 3、7、11、15 等

我们可以更接近我们的情况并得到动作的结果（就像你有哈希作为动作和动作描述的结果）

> x 模 4 = 3

x 可以是 12、13、14 或 15，这并不能说明我们有什么传入的整数。

# ssrs-2008 - SSRS 报告每个类别都有一个单独的表格/网格

> ID：11117582
> 
> 赞同：7
> 
> 时间：2012-06-20T10:25:58.900
> 
> 标签：ssrs-2008, reporting-services

我正在使用 BIDS 和 SQL Server Reporting Services (SSRS) 2008 R2 来构建报告。我希望每个类别都显示为单独的表格/网格。

重要提示：列（CELERY、EGG 等）是动态的，并且来自表中的值，因此构建报告的人无法将它们硬编码到报告中。所以我们目前正在使用矩阵控制。

报告现在的样子： ![前](../Images/c7dd339287859b1a7de9b691269ab586.png)

我希望报告的外观： ![后](../Images/f306ac39ef7e1772b64fa4b86d378550.png)

有任何想法吗？

谢谢，克雷格

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T13:43:49.260

使用列表控件并将矩阵放入列表中。使用类别作为列表的分组。在矩阵上方添加一个文本框以显示类别。

# c# - 简单的 LINQ 搜索查询，添加额外的参数

> ID：11117588
> 
> 赞同：2
> 
> 时间：2012-06-20T10:26:23.553
> 
> 标签：c#, .net, linq

下午，我正在尝试进行简单的搜索，该搜索适用于产品标题。但是我需要在搜索中添加其他参数。我有下面代码的基础，至少我认为它应该是。我已经注释掉了其他项目

有人可以提供一些指导，因为我被困在自动取款机上。

```
var query = from a in dc.aProducts
            join t in dc.bProducts on a.sku equals t.sku
            where SqlMethods.Like(t.title, "%" + productName + "%")

            //Compare Prices
            //&& (p => (double)p.Price >= priceFrom && (double)p.Price <= priceTo)
            //Product SKU
            //t.sku == productSku
            //Product Brand
            //t.brand == productBrand
            //a.asin == productAsin
            //a.Live == IsLive 
```

非常感谢您，非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T13:22:30.067

我很想做这样的事情：

```
bool comparePrices = true;

// Join tables and get all products into query
var query = from a in dc.aProducts
            join t in dc.bProducts on a.sku equals t.sku
            select a;

// Now go through each search criteria if needed in order to filter down
if(comparePrices)
    query = query.Where(p => (double)p.Price >= priceFrom 
                          && (double)p.Price <= priceTo);

if(!string.IsNullOrEmpty(productSku))
{
    query = query.Where(t.sku == productSku);
} 
```

等等。

每次您有条件地向原始查询添加过滤器时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:30:44.033

有人给了我精彩的答案：

```
var filters = new List<Func<f_results, bool>>();

if (comparePrices) filters.add((p => (double)p.Price >= priceFrom && (double)p.Price <= priceTo);
if (productQuery) filters.add(p => p.sku == productSku);

result = query.find (p => filters.All(filter => filter(p))); 
```

# javascript - 在jquery中有没有更好的方法来做到这一点？

> ID：11117589
> 
> 赞同：2
> 
> 时间：2012-06-20T10:26:23.690
> 
> 标签：javascript, jquery

我想知道有没有更好的方法：

```
var name = $('input').attr("name") != "undefined" ? $('input').attr("name") : ""; 
```

在这里，我正在`name`阅读`input`. 我的问题是当我阅读`name`新创建的`text`元素时，它是`undefined`. 因此，为了不`undefined`向用户显示，我必须进行此检查。现在我必须准备这么多属性，并且始终存在相同的问题，所以这就是为什么我想知道，有没有更好的方法来处理会这？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:28:02.690

您不必明确地将其与未定义进行比较。在 if 语句中使用时，undefined 将返回 false。通过使用 OR 操作，您可以在这种情况下分配空字符串。

```
var name = $('input').attr("name") || ''; 
```

在 JavaScript 中也未定义`"undefined"`且不相等。您的原始代码已经得到了误报。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:28:41.927

[短路评估：（](http://en.wikipedia.org/wiki/Short-circuit_evaluation)我喜欢 JS 中的这个）

```
var name = $('input').attr("name") || ''; 
```

# lucene - Lucene QueryParser 问题

> ID：11117593
> 
> 赞同：0
> 
> 时间：2012-06-20T10:26:28.463
> 
> 标签：lucene, query-parser

有人可以解释为什么原始查询（以编程方式生成）中的 OR（左起第二个）在解析后的查询中变成 MUST 吗？我该如何防止这种情况？

```
Original Query: +matchAllDocs:true +( request_id:(00000000000000000000000000002796 OR 00000000000000000000000000002829) OR ( matchAllDocs:true AND ( request_id:(00000000000000000000000000002796) AND status_id:(1)) OR ( request_id:(00000000000000000000000000002829) AND status_id:(2))) AND (alltext:(internal) OR subject:(internal )^1.5))

Parsed Query: +matchAllDocs:true +((request_id:00000000000000000000000000002796 request_id:00000000000000000000000000002829) +(+matchAllDocs:true +(+request_id:00000000000000000000000000002796 +status_id:1) (+request_id:00000000000000000000000000002829 +status_id:2)) +(alltext:intern subject:intern^1.5)) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:23:47.113

因为 AND 优于 OR（运算顺序）：

```
(something) OR //left will be SHOULD
(
    matchAllDocs:true AND 
    (
        request_id:(00000000000000000000000000002796) AND status_id:(1)
    ) OR 
    (
         request_id:(00000000000000000000000000002829) AND status_id:(2)
    )
) **AND** // left will be MUST
(alltext:(internal) OR subject:(internal )^1.5) 
```

解决方案是使用更多的括号，如下所示：

```
+matchAllDocs:true +((request_id:(00000000000000000000000000002796 OR 00000000000000000000000000002829) OR ( matchAllDocs:true AND ( request_id:(00000000000000000000000000002796) AND status_id:(1)) OR ( request_id:(00000000000000000000000000002829) AND status_id:(2)))) AND (alltext:(internal) OR subject:(internal )^1.5)) 
```

# jquery - 如何在javascript中访问从php创建的json数组

> ID：11117600
> 
> 赞同：1
> 
> 时间：2012-06-20T10:26:54.383
> 
> 标签：jquery, arrays, json

我在php中有一个这样的数组：

```
$arr['test'] = "asd";
$arr['test1'] = "asd1";
echo json_encode($arr); 
```

我使用jquery post得到这个：

```
$.post("fillScheda.php",{scheda:num_scheda,id:idCliente},function(msg){

}); 
```

所以`msg`那里有我的json数组......我试图以某种方式访问​​......

```
alert(msg[0].test);

alert(msg.test); 
```

但结果总是`undefined`......我如何访问值？有人能帮我吗？谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:38:47.583

尝试解析json对象

```
msg = JSON.parse(msg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:39:40.207

有没有试过设置json返回值的类型：

```
$.post("fillScheda.php",{scheda:num_scheda,id:idCliente},function(msg){

},'json'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:43:35.527

您应该使用此标头从 php 文件中提供 json：

```
header('Content-type: application/json'); 
```

所以代码应该是：

```
$arr['test'] = "asd";
$arr['test1'] = "asd1";

header('Content-type: application/json');
echo json_encode($arr);
exit(); 
```

# jquery - 图像在 HTML 中重新调整为原始大小的 50%

> ID：11117602
> 
> 赞同：60
> 
> 时间：2012-06-20T10:27:01.290
> 
> 标签：jquery, html, image

我正在尝试在 HTML 中重新调整图像的大小，它的宽度为 314 像素，高度为 212 像素。我想将其重新调整为 50%...

但是使用它我仍然可以获得更大的图像而不是半尺寸图像。

```
<img src="image.jpg" width="50%" height="50%" /> 
```

我做错什么了？谢谢

```
<html>
    <head>
    <title></title>
    </head>    
    <body>
        <div>
        <img src="image4.png" width="50%" height="50%"/>
        </div>
    </body>
</html> 
```

我在下面使用 jquery 解决了上述问题：

```
$(document).ready(function(e) {
        var imgs = document.getElementsByTagName('img');
        var imgLength = imgs.length;

        for(var i=0; i<= imgLength-1;i++){

            var imgWidth = imgs[i].clientWidth;
            var imgHeight = imgs[i].clientHeight;

            $('img').eq(i).attr({width:imgWidth/2, height: imgHeight/2});

            console.log(imgWidth);
        }

        console.log(imgLength); 

    }); 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-06-20T10:31:25.563

您在这里没有做错任何事情，它会覆盖图像大小的任何其他事情。

你可以检查这个工作[小提琴](http://jsfiddle.net/pb8We/)。

在[这个小提琴](http://jsfiddle.net/pb8We/1/)中，我使用 改变了图像大小`%`，它正在工作。

也尝试使用此代码：

```
<img src="image.jpg" style="width: 50%; height: 50%"/>​ 
```

[这是](http://jsfiddle.net/pb8We/2/)示例小提琴。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-27T08:22:42.443

我们也可以通过 css3 做到这一点。试试这个：

```
.halfsize {
    -moz-transform:scale(0.5);
    -webkit-transform:scale(0.5);
    transform:scale(0.5);
}

<img class="halfsize" src="image4.jpg"> 
```

*   受限于浏览器兼容性

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-01T16:30:05.693

百分比设置不考虑原始图像大小。来自[w3schools](http://www.w3schools.com/tags/att_img_width.asp)  ：

> 在 HTML 4.01 中，宽度可以以像素或包含元素的百分比来定义。在 HTML5 中，该值必须以像素为单位。

此外，来自同一来源的良好实践建议：

> 提示：缩小具有高度和宽度属性的大图像会迫使用户下载大图像（即使它在页面上看起来很小）。为避免这种情况，请在将图像用于页面之前使用程序重新缩放图像。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-02-08T21:14:04.077

您可以像这样使用属性的`x`描述符：`srcset`

```
<!-- Original image -->
<img src="https://fr.wikipedia.org/static/images/mobile/copyright/wikipedia.png" />

<!-- With a 80% size reduction (1/0.8=1.25) -->
<img srcset="https://fr.wikipedia.org/static/images/mobile/copyright/wikipedia.png 1.25x" />

<!-- With a 50% size reduction (1/0.5=2) -->
<img srcset="https://fr.wikipedia.org/static/images/mobile/copyright/wikipedia.png 2x" />
```

目前除 IE 外的所有浏览器都支持。（[犬](https://caniuse.com/srcset)）

[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-srcset)

# java - 创建 clojure 库（jar）以便从 java 调用它

> ID：11117606
> 
> 赞同：3
> 
> 时间：2012-06-20T10:27:10.043
> 
> 标签：java, clojure

```
(ns lol.test
  (:gen-class
   :name lol.test
   :methods [[createHashMap [String] Java.util.HashMap]])
  (:import [java.util HashMap]))

(defn -createHashMap [this s]
  (HashMap. (assoc {} s "test"))) 
```

我正在尝试从 java 调用 clojure 函数，为此我创建了这个文件，它可以用 lein 完美编译，我通过调用“lein uberjar”创建了一个 jar 文件。

现在的问题是，当我像这样从 java 调用它时：

```
lol.test l = new lol.test();
l.createhashMap("test"); 
```

它抛出一个 ArityException

```
Wrong number of args (2) passed to 
```

我试图从 clojure 代码中删除 'this' 参数，但它没有帮助。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:04:43.920

您需要修复`:methods`声明。现在你有

```
:methods [[createHashMap [String] java.util.HashMap]] 
```

它必须成为

```
:methods [[createHashMap [Test String] java.util.HashMap]] 
```

否则你只会在你的编译类中得到一个 1-arity 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:59:00.687

所以问题出在

```
Java.util.HashMap 
```

java应该从小写字母开始。但更大的问题是 clojure lib 不想将 java.util.HashMap 作为对象返回。解决方法是序列化它然后返回。

# gmail - Google Apps 起始页 - 或嵌入登录？

> ID：11117609
> 
> 赞同：2
> 
> 时间：2012-06-20T10:27:15.253
> 
> 标签：gmail, google-apps

我们在我工作的地方使用 Google Apps，我们正在尝试创建一个新的“起始页”，因为 Google Apps 的默认页面很糟糕。我希望能够将 Google Mail 登录表单嵌入到我的网站中，或者修改当前的“起始页”结构。

据我所知，有一种叫做 SSO 的东西，但我真的不知道它是什么。哎呀，我什至不知道 API 是什么，所以我什至不知道从哪里开始使用它。

我找到了一个将 Gmail 嵌入网页的脚本：http: [//pastebin.com/H5q1Lz0P](http://pastebin.com/H5q1Lz0P)
该脚本的唯一问题是当您输入详细信息时，它会重定向到 Gmail 的登录页面。您的电子邮件在电子邮件/用户名框中，但需要再次输入您的密码。

1.  有没有办法解决 Gmail 问题？

2.  或者有人可以给我一些关于 SSO 的见解 - 如果那是我需要做的我想做的事。

**编辑**
我还在某处读到 Ajax 可以使用？有人可以给我一些资源来开始吗？我不知道谷歌平台是什么，除了它的界面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T13:47:30.743

关于登录页面，这是预期的行为，由于 Google 几个月前进行的更改和标准化，如果不使用 SSO，则无法绕过它。可以在[此处](https://support.google.com/a/answer/4421331)找到有关此的更多信息。

如上文和您的问题所述，SSO 是解决此问题的一种方法。如果您使用 SSO，只要用户在您的子网掩码内或您没有子网掩码，用户就会从新的标准登录页面重定向到您的 SSO 页面。有关使用 Google Apps 进行 SSO 的一般信息，请查看[此](https://support.google.com/a/answer/60224)内容。

有许多第三方 SSO 提供程序，因此只需找到一个适合您并适合您的环境的提供程序（例如，从 LDAP 同步帐户/密码）。

# opencv - opencv中SURF特征提取的最佳hessian阈值+最小描述符匹配

> ID：11117610
> 
> 赞同：7
> 
> 时间：2012-06-20T10:27:15.423
> 
> 标签：opencv, face-recognition, surf, hessian, feature-extraction

目前我正在从事人脸识别项目，我正在使用 Fisherfaces/LDA 在更广泛的层面上过滤掉图像，然后使用 SURF 来验证 LDA 的输出。应该传递到什么是一个好的 Hessian 阈值`CvSURFParam()`？OpenCV提供的示例代码有500个。是最优的吗？

此外，应该匹配的最少描述符数量是多少，以便我的代码可以确认身份？50%就够了吗？

我在 Windows 上使用 OpenCV 2.4 和 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T09:25:55.013

ArtemStorozhuk 是对的。由于我们不知道您的数据集（尤其是图像质量），因此我们无法建议更好的阈值值。是的，**对此没有一般**的答案

**要增加**训练集中测试图像的数量，您可以使用公共域人脸数据库（例如[FERET](http://www.itl.nist.gov/iad/humanid/feret/feret_master.html)）。

请允许我另外注意（也适用于将来通过搜索引擎找到此内容的每个人），**您正在尝试的不是一个好主意**。使用 SURF 只会确认您找到了另一张面孔。为必须匹配的描述符设置最小值再次**很大程度上取决于图像质量**。发现较少的 SURF 特征可能只是意味着图像有点太模糊了。

# android - 发送短信时出现 NullPointerException

> ID：11117621
> 
> 赞同：0
> 
> 时间：2012-06-20T10:27:45.747
> 
> 标签：android, sms, nullpointerexception

当我发送短信时，我收到了`NullPointerException`。我认为可能是`context`. 我在`TabActivityGroup`.

这是我的代码：

```
 if(sendSMS.equals("1")) {
    double invoiceVal = getInvoiceValue();
    String phone = getPhoneNo(); 
    String[] arrPhone = phone.split(";");
    System.out.println("==arrPhone==" +arrPhone.length);
    StringBuffer sms = new StringBuffer();
    sms.append("Miscellaneous Sale");
    sms.append("\n");
    sms.append("\n");
    sms.append("Territory: " + territoryCode +"\n");
    sms.append("Sales Rep: " + strExecutive +"\n");
    sms.append("Route Code: " + routeCode +"\n");
    sms.append("Retailer Code: " + retailCode +" " +retailerName +"\n");
    sms.append("Invoice No: " + printInPrefix+"\\"+printInvoiceNo +"\n");
    sms.append("Invoice Value: " + df.format(invoiceVal) +"\n");
    sendSMS(arrPhone, sms.toString());
}

 String sendSMS(String[] arrPhone, String message){        
     String SENT = "SMS_SENT";
     smsStatus ="YES";
     String DELIVERED = "SMS_DELIVERED";
     String phoneNumber = "";
     try {
         for (int i = 0; i < arrPhone.length; i++) {
             phoneNumber = arrPhone[i];
             System.out.println("==phoneNumber==" +phoneNumber);
             PendingIntent sentPI = PendingIntent.getBroadcast(getBaseContext(), 0, new Intent(SENT), 0);
             PendingIntent deliveredPI = PendingIntent.getBroadcast(getBaseContext(), 0,new Intent(DELIVERED), 0);
             registerReceiver(new BroadcastReceiver(){
                @Override
                 public void onReceive(Context arg0, Intent arg1) {
                     switch (getResultCode()){
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS sent", Toast.LENGTH_SHORT).show();
                            break;
                        case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                            Toast.makeText(getBaseContext(), "Generic failure", Toast.LENGTH_SHORT).show();
                            smsStatus ="NO";
                            break;
                        case SmsManager.RESULT_ERROR_NO_SERVICE:
                            Toast.makeText(getBaseContext(), "No service",  Toast.LENGTH_SHORT).show();
                            smsStatus ="NO";
                            break;
                        case SmsManager.RESULT_ERROR_NULL_PDU:
                            Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_SHORT).show();
                            smsStatus ="NO";
                            break;
                        case SmsManager.RESULT_ERROR_RADIO_OFF:
                            Toast.makeText(getBaseContext(), "Radio off", Toast.LENGTH_SHORT).show();
                            smsStatus ="NO"; 
                            break;
                      }
                }
             }, new IntentFilter(SENT));

              //---when the SMS has been delivered---
              registerReceiver(new BroadcastReceiver(){
                  @Override
                   public void onReceive(Context arg0, Intent arg1) {
                        switch (getResultCode()){
                            case Activity.RESULT_OK:
                                Toast.makeText(getBaseContext(), "SMS delivered", Toast.LENGTH_SHORT).show();
                                break;
                            case Activity.RESULT_CANCELED:
                                Toast.makeText(getBaseContext(), "SMS not delivered", Toast.LENGTH_SHORT).show();
                                smsStatus ="NO";
                                break;                        
                        }
                    }
                }, new IntentFilter(DELIVERED));        

                SmsManager sms = SmsManager.getDefault();
                sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);       
        }
    } catch (Exception e) {
        e.printStackTrace();
        smsStatus ="NO";
    }
     return smsStatus;

} 
```

* * *

**错误：**

```
 06-21 15:46:31.335: W/System.err(7510): java.lang.NullPointerException
06-21 15:46:31.345: W/System.err(7510):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:349)
06-21 15:46:31.345: W/System.err(7510):     at xont.ventura.controller.sales.LineDiscountActivity.sendSMS(LineDiscountActivity.java:1498)
06-21 15:46:31.345: W/System.err(7510):     at xont.ventura.controller.sales.LineDiscountActivity.saveInvoice(LineDiscountActivity.java:1354)
06-21 15:46:31.345: W/System.err(7510):     at xont.ventura.controller.sales.BatchActivity$2$1.onClick(BatchActivity.java:164)
06-21 15:46:31.345: W/System.err(7510):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:193)
06-21 15:46:31.345: W/System.err(7510):     at android.os.Handler.dispatchMessage(Handler.java:130)
06-21 15:46:31.355: W/System.err(7510):     at android.os.Looper.loop(Looper.java:154)
06-21 15:46:31.355: W/System.err(7510):     at android.app.ActivityThread.main(ActivityThread.java:4668)
06-21 15:46:31.355: W/System.err(7510):     at java.lang.reflect.Method.invokeNative(Native Method)
06-21 15:46:31.355: W/System.err(7510):     at java.lang.reflect.Method.invoke(Method.java:552)
06-21 15:46:31.355: W/System.err(7510):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:917)
06-21 15:46:31.355: W/System.err(7510):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:674)
06-21 15:46:31.355: W/System.err(7510):     at dalvik.system.NativeStart.main(Native Method) 
```

我试过使用`SalesActivityGroup.group.getApplicationContext()`, `SalesActivityGroup.group.getParent()`, 但是直到我得到同样的错误。

`NullPointerException`行没有`1498`地方是： registerReceiver(new BroadcastReceiver(){

请告诉我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:33:08.633

替换`getBaseContext()`为`arg0`

你这里有错误。

`onReceive`给你上下文`onReceive`。那么你不应该使用`getBaseContext()`

```
public void onReceive(Context arg0, Intent arg1) {   <--- Use this context i.e arg0
                     switch (getResultCode()){
                        case Activity.RESULT_OK:
                            Toast.makeText(getBaseContext(), "SMS sent", Toast.LENGTH_SHORT).show();
                            break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:33:20.973

我想你`should use arg0 (which is Context ) instead of getBaseContext()`里面 onReceive(Context arg0, Intent arg1) in toast ......

也改变getBaseContext

```
PendingIntent.getBroadcast(getBaseContext(), 0 
```

和`<your_actvity_name>.this`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T11:24:42.497

由于您使用的是 ActivityGroup 使用此答案[如何在活动组中获取子活动？](https://stackoverflow.com/questions/6391843/how-to-get-child-activity-in-activity-group)获取实例而不是在课堂上`LineDiscountActivity`调用 `new LineDiscountActivity()``onClick``BatchActivity`

你永远不应该使用“new”来创建从 Activity 派生的类的实例，因为这样的实例没有正确启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T11:03:57.810

尝试在您的`onStart()`

```
private SMSReceiver smsReceiver;
@Override
public void onStart()
{
    super.onStart();

       smsReceiver = new SMSReceiver();
       IntentFilter intentFilter = new IntentFilter();
       intentFilter.addAction(SENT);
       registerReceiver(smsReceiver, intentFilter);

       //Start our own service
       Intent intent = new Intent(Activity.this, 
       SMSReceiver.class);
       startService(intent);   
 } 
```

在单独的班级中接收它

```
private class SMSReceiver extends BroadcastReceiver
    {

            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode())
                {
                    case Activity.RESULT_OK:
                        Toast.makeText(getBaseContext(), "SMS sent", 
                                Toast.LENGTH_SHORT).show(); 
                        break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        Toast.makeText(getBaseContext(), "Invalid PhoneNumber", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        Toast.makeText(getBaseContext(), "No service", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        Toast.makeText(getBaseContext(), "Null PDU", 
                                Toast.LENGTH_SHORT).show();
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        Toast.makeText(getBaseContext(), "Radio off", 
                                Toast.LENGTH_SHORT).show();
                        break; 
                } 
            }  
    } 
```

不要忘记在 onStop() 中取消注册接收器

```
 @Override
      protected void onStop() {
         super.onStop();
         unregisterReceiver(smsReceiver);  
     } 
```

它对我来说非常有用。我希望它会对你有所帮助。

# sql - 选择多对多关系中的所有子集

> ID：11117622
> 
> 赞同：1
> 
> 时间：2012-06-20T10:27:59.417
> 
> 标签：sql, ruby-on-rails, postgresql

在我正在构建的 rails 3 应用程序中，我有这三个类：

```
class Instrument < ActiveRecord::Base
  has_many :parts
  has_many :pieces, through: :parts
end    
class Part < ActiveRecord::Base
  belongs_to :instrument
  belongs_to :piece
end
class Piece < ActiveRecord::Base
  has_many :parts
  has_many :instruments, through: :parts
end 
```

我正在寻找一种方法来选择所有相关乐器是任意一组乐器的子集的片段。

为避免混淆，我将举一个例子：

*   Piece(id:1) with instruments: [1,2,3],
*   Piece(id:2) 与 [1,2,3,4]
*   Piece(id:3) 与 [1,3,4]
*   带有 [2] 的片段（id:4），

`somequery(1,2,3,4)`应该产生所有四个部分，`somequery(1,2,3)`只有 1 和 4，`somequery(1,3,4)`只有 3 和`somequery(2)`只有 4。

我正在使用rails 3.2，rails中的解决方案会很棒，但sql也很好，最好是postgres，但如果有一个mysql特定的解决方案也可以。此外，我没有使用相对较小的数据库（1000 多件、50 件仪器和 15.000 个零件），它没有被大量查询，所以如果查询在效率上不是最佳的，那也没问题。

作为最后的免责声明，我知道我在 ruby​​/rails 中的方法，但在 SQL 中相当绿色。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:34:37.813

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp;

SET search_path='tmp';

CREATE TABLE instrument
        ( id INTEGER NOT NULL PRIMARY KEY
        , zname varchar
        );
INSERT INTO instrument(id, zname) VALUES
(1, 'instrument_1'), (2, 'instrument_2')
, (3, 'instrument_3'), (4, 'instrument_4');

CREATE TABLE piece
        ( id INTEGER NOT NULL PRIMARY KEY
        , zname varchar
        );
INSERT INTO piece(id, zname) VALUES
(1, 'piece_1'), (2, 'piece_2'), (3, 'piece_3'), (4, 'piece_4');

CREATE TABLE has_part
        ( piece_id INTEGER NOT NULL
        , instrument_id INTEGER NOT NULL
        , PRIMARY KEY (piece_id,instrument_id)
        );

INSERT INTO has_part(piece_id,instrument_id) VALUES
(1,1), (1,2), (1,3)
, (2,1), (2,2), (2,3), (2,4)
, (3,1), (3,3), (3,4)
, (4,2)
        ; 
```

纯sql（不是双重否定`NOT EXISTS , NOT IN()`：

```
SELECT zname
FROM piece pp
WHERE NOT EXISTS (
        SELECT * FROM has_part nx
        WHERE nx.piece_id = pp.id
        AND nx.instrument_id NOT IN (1,2,3)
        )
        ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:41:03.783

尝试这样的事情：

```
Piece.joins(:instruments).where(:instruments => {:id => [1, 2, 3, 4]}) 
```

这将创建一个查询，该查询连接 2 个表并选择带有所需 id 的乐器的片段，最后将它们包装在 ActiveRecord 对象中，以便您以后可以做任何您想做的事情。

# java - java rmi 传递 ImageIcon 对象

> ID：11117626
> 
> 赞同：0
> 
> 时间：2012-06-20T10:28:14.640
> 
> 标签：java, rmi, imageicon

我正在做一个`rmi client server based program`假设`pass Image object through remote object interfaces`。**客户端从服务器接收图像**。

以下是我的代码....

**在客户端**

```
 public class ImageReceiver
       {
                  public static ImageIcon imageicon;

                  public static void main(String Data[])
                  {

                         imageicon = new ImageIcon(url);
                         imageicon=remoteObject.getImageFromServer();
                  }

        }
        // The Details regarding the binding of remote objects are excluded since they are worling fine... 
```

sendImage 是一个实现的接口方法......

```
 public ImageIcon getImageFromServer() throws RemoteException; 
```

**在服务器**

```
 public ImageIcon getImageFromServer()
           {
                  ImageIcon ic = new ImageIcon("local url specified");
                  return ic;
           }

         // Much of the Exceptions and other binding details are excluded for simpicity..... 
```

现在的问题是，我收到一个名为

```
 java.rmi.UnmarshalException: error unmarshalling return
          nested exception is: java.io.EOFException 
```

现在，实际上我不知道它是怎么来的……我的两个主要疑问是……

***是否可以通过 rmi 发送 ImageIcon 对象...？？如果是的话，这里可能是什么错误。如果没有，是否存在任何简单的方法来通过 rmi 将基于图像的对象作为参数传递......？？***

**我还在某处听说 javax.swing.ImageIcon 是串行的....但在我的情况下并没有发生**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T16:32:29.333

发生了同样的问题......当我试图通过 RMI 传递 ImageIcon 对象时......

经过长时间的检查......我发现我指定的网址不正确......

它发生了......这里的编译器经常像你展示的那样显示 Unmarshall 异常......

尝试检查您的本地 URL .....

# javascript - JQuery 偏移量#NaN 问题

> ID：11117627
> 
> 赞同：1
> 
> 时间：2012-06-20T10:28:16.673
> 
> 标签：javascript, jquery

我在页面顶部有一个固定的菜单栏，所有菜单链接都是同一页面上的锚链接。简而言之，它是一个单页网站，分为多个部分，其中锚链接作为菜单项。

当单击菜单项时，我正在使用下面的 javascript 平滑滑动到部分。

```
$(document).ready(function() {
    $("a.anchorLink").anchorAnimate()
});

jQuery.fn.anchorAnimate = function(settings) {

    settings = jQuery.extend({
        speed : 1100
    }, settings);   

    return this.each(function(){
        var caller = this
        $(caller).click(function (event) {  
            event.preventDefault()
            var locationHref = window.location.href
            var elementClick = $(caller).attr("href")

            var destination = $(elementClick).offset().top-60;
            $("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination}, settings.speed, function() {
                window.location.hash = elementClick-60
            });
            return false;
        })
    })
} 
```

由于顶部菜单高度为 60 像素，我需要从 offset().top 中减去它以确保幻灯片正常工作。我还必须在位置哈希中减去，否则一旦幻灯片点击完成，就会出现一个生涩的幻灯片（在 FF 和 IE 中，在 Chrome 中工作正常）。

它很好用，但问题是 URL 显示为[http://www.site.com/#NaN](http://www.site.com/#NaN)而不是[http://www.site.com/#linkname](http://www.site.com/#linkname)

这是完整的代码 - [http://jsfiddle.net/85saK/1/](http://jsfiddle.net/85saK/1/)。不幸的是，点击后它不会显示以#NaN 结尾的URL，而不是实际的链接ID，例如#store、#home 或#contact。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:34:48.777

尝试：

```
var destination = $(elementClick).offset().top -60;
$("html:not(:animated),body:not(:animated)").animate({ scrollTop: destination}, settings.speed, function() {
    //window.location.hash = elementClick
    elementClick
}); 
```

# node.js - 如何将 Heroku 中的 RedisToGo 数据库复制到本地机器？

> ID：11117631
> 
> 赞同：4
> 
> 时间：2012-06-20T10:28:26.593
> 
> 标签：node.js, heroku, redis, redistogo

我有一个 node.js 应用程序，使用 RedisToGo 并在 Heroku 中运行。我想将 Redis To Go 数据库复制到 localhost 进行测试。

在开发 Ruby on Rails 应用程序时，我可以使用`heroku db:pull`命令。是否有任何类似的命令可用于 node.js 和 Redis？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T23:58:30.230

redistogo支持知识库**中提供了一个指南，但它被删除了，我使用返回机器获取它的内容并提出了一个要点：** [https](https://gist.github.com/mmcdaris/29cfe920c846ae6dd5c6eb354c9abdd2) ://gist.github.com/mmcdaris/29cfe920c846ae6dd5c6eb354c9abdd2 相同的结果不同的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T11:26:29.700

您可以将本地 Redis 实例从属到 RedisToGo 实例 - [http://redistogo.com/documentation/exporting](http://redistogo.com/documentation/exporting)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-08T15:16:25.233

这些是我为 Heroku Redis 实例创建本地备份所采取的步骤，但这对于 RedisToGo 和 RedisCloud 等其他提供商应该是有效的。

在您要进行备份的机器上，跳转到 redis CLI：

```
redis-cli 
```

## 密码？

如果您的主 Redis 数据库（您要复制的数据库）有密码：

```
config set masterauth <password> 
```

## 开始复制

运行以下命令开始复制：

```
SLAVEOF <host> <port> 
```

要检查复制是否正在进行，请运行：

```
INFO replication 
```

您应该会看到如下内容：

```
# Replication
role:slave
master_host:some-host.compute-1.amazonaws.com
master_port:6519
master_link_status:up
master_last_io_seconds_ago:3
master_sync_in_progress:0
slave_repl_offset:35492914
slave_priority:100
slave_read_only:1
connected_slaves:0
master_repl_offset:0
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0 
```

注意`master_link_status`应该是`up`.

## 检查同步进度

同步完成后，`INFO replication`应显示：

```
master_sync_in_progress:0 
```

要检查数据集是否已同步，您可以比较数据库的大小：

```
DBSIZE 
```

## 将数据转储保存到磁盘

给定从属数据库和主数据库匹配中的键数，然后将数据库保存到磁盘：

```
BGSAVE
CONFIG GET dir 
```

你应该找到`dump.rdb`config 命令列出的。

## 停止复制

最后，您可以使用以下命令停止复制：

```
SLAVEOF NO ONE 
```

* * *

参考：[Redis 复制指南](https://redis.io/topics/replication)

# c# - 如何禁用方法中的参数评估

> ID：11117632
> 
> 赞同：3
> 
> 时间：2012-06-20T10:28:29.370
> 
> 标签：c#, logging, .net-4.0

不记得更好的标题，请随意将其更改为更好的名称:)

我的应用程序包含很多日志记录语句，如下所示：

```
var logger = new Logger(/*..get flag from settings if the logger should be active..*/);
// ....
logger.LogActivity(..serialize an object..);
//...
logger.LogActivity(..get another object's expensive overriden ToString method..);
//...
logger.LogActivity(..log something new..); 
```

记录器类：

```
public class Logger
{
  private readonly bool _isActive;

  public Logger(bool isActive)
  {
    _isActive = isActive;
  }

  public void LogActivity(string activity)
  {
    if (_isActive)
    {
      // Save activity to Database.
    }
  }
} 
```

当我在设置中禁用记录器时（因此 Logger 类中的 _isActive 字段为假），则没有任何内容保存到数据库中。但是 Logger.LogActivity 方法中的所有表达式仍然被评估（例如 ..serialize object.. 在前面的例子中），这会减慢我的应用程序。我可以使用这样的日志语句：

```
var logger = new Logger(/*..get flag from settings if the logger should be active..*/);
// ....
if (loggerIsActive) logger.LogActivity(..serialize an object..);
//...
if (loggerIsActive) logger.LogActivity(..get another object's expensive overriden ToString method..);
//...
if (loggerIsActive) logger.LogActivity(..log something new..); 
```

但是只更改 LogActivity 方法会更好......是否可以以某种方式仅更改 LogActivity 方法，以便在禁用记录器时，不评估 LogActivity 调用中的表达式？好吧 - 如果这在 C# 中是可能的，我会感到惊讶，但是有没有其他方法/模式可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:57:04.493

您可以添加一个重载，该重载`Func<string>`将生成要记录的字符串。

```
public void LogActivity(Func<string> activity)
{
    if (_isActive)
    {
        string log = activity();
        // save 'log' to database
    }
} 
```

然后像这样使用它：

```
logger.LogActivity(() => expensiveObject.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:24:14.440

您不能完全避免参数评估，不，但您可以提供一些额外的日志记录方法来帮助您。

@Martin 和 @kenny 建议传递 lambda 表达式。这将推迟代码的评估，但会导致丑陋的客户端代码。您可能会节省几个周期，但我怀疑这是否值得。

我建议您创建几个 LogActivity 覆盖：

```
LogActivity(string message) // logs the message
LogActivity(object obj) // calls obj.ToString() and logs it 
```

如果您认为确实有必要，请保留 lambda 表达式变体：

```
LogActivity(Func<String> func) // evaluates the function and logs its response 
```

请注意，您将无法避免调用 LogActivity 的成本。C# 不是 C，而且您没有像在 C 中那样工作的宏。这几乎不是问题，如果调用非虚拟方法对您来说代价高昂，那么您经常这样做，您不应该这样做无论如何，将日志消息放在那里。

# iphone - 关于 NSData 的不清楚的信息 - Objective C/Xcode

> ID：11117633
> 
> 赞同：0
> 
> 时间：2012-06-20T10:28:30.290
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用以下代码行下载并保存 html 页面 ::

```
NSURL *goo = [[NSURL alloc] initWithString:@"http://www.google.com"];
NSData *data = [[NSData alloc] initWithContentsOfURL:goo]; 
```

这些数据中实际包含什么？它是否还包含显示在 google 主页上的 CSS 文件和图像？我尝试 NSLog 这些数据，但结果没有用。我的意思是我无法理解 gdb 中显示的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:32:47.453

包含的数据正是您作为对请求的响应而得到的，因此仅 html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:41:45.953

尝试转换`NSData`为`NSString`，然后`NSLog`您将看到实际数据包含的内容

```
NSString* dataStr = [[[NSString alloc] initWithData:theData
                                           encoding:NSUTF8StringEncoding] autorelease];
NSLog(@"%@",dataStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:33:08.320

你可以在这里找到：

[NSData 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)

NSData 只是一个字节数组，用于存储一些信息，在你的情况下，是 HTML 响应

# php - 在 PHP 中获取扩展类的当前工作目录

> ID：11117637
> 
> 赞同：5
> 
> 时间：2012-06-20T10:28:33.707
> 
> 标签：php, inheritance

我有一个抽象类“类”。类子类扩展类。Class 抽象类具有以下调用：

```
is_readable('some_file.ext') 
```

如何强制抽象类的子级在他们所在的文件夹中查找文件，而不是在父抽象类的文件夹中查找，而不覆盖子级中的方法？

即如果摘要在

类/摘要/Class.php

孩子在

类/儿童/Subclass.php，

如何让 Subclass.php 在类/孩子/而不是类/摘要中查找 some_file.ext，而不在子类中明确定义它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T10:40:17.570

您可以使用[`ReflectionClass::getFileName()`](http://www.php.net/manual/en/reflectionclass.getfilename.php)来检索定义子类的文件名。

```
// In Superclass
public function isReadableFileInClassDir($file='somefile.ext') {
    $reflection = new ReflectionClass($this);
    $directory = dirname($reflection->getFileName()) . PATH_SEPARATOR;

    return is_readable($directory . $filename);
} 
```

这是有效的，因为`$this`无论在哪里定义它都将始终引用实例化的类（而不是它的父类，即使`$this`在父类中找到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:33:06.017

您可能可以使用以下内容：

```
is_readable(dirname(__FILE__).DIRECTORY_SEPARATOR.'some_file.ext'); 
```

[dirname](http://php.net/manual/en/function.dirname.php)方法返回您传递给它的文件的目录。

查看[魔术常量](http://php.net/manual/en/language.constants.predefined.php)以获取更多信息`__FILE__`

编辑

在子类中包含一个成员变量集`__FILE__`并引用抽象类中的成员变量。

儿童班

```
var $source_location = __FILE__; 
```

抽象类

```
is_readable($this->source_location.DIRECTORY_SEPARATOR.'some_file.ext'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:57:13.853

我相信您有充分的理由将类和子类保存在文件系统中的不同文件夹中，但请考虑 Zend 自动加载或基于名称空间的类加载 - 在您的情况下它将失败......

而不是拥有这个架构：

```
classes
   | - abstracts
          | - AbstractClass1.php
          | - AbstractClass2.php
   | - children
          | - ChildClass1.php
          | - ChildClass2.php 
```

考虑一下：

```
classes
   | - AbstractClass1.php
   | - AbstractClass2.php
   | - AnotherClass.php
   | - AbstractClass1
          | - ChildClass1.php
          | - ChildClass12.php
   | - AbstractClass2
          | - ChildClass2.php
          | - ChildClass22.php
   | - AnotherClass
          | - ClassA.php
          | - ClassB.php
          | - ClassB
                | - ClassBA.php 
```

通过这种架构，很明显那`ClassBA`是在 path `classes/AnotherClass/ClassB`extends `ClassB`which extends`AnotherClass`中。现在您可以使用命名空间（当使用 PHP 5.3 < 时）或通过命名您的类`class AnotherClass_ClassB_ClassBA { ... }`（Zend 类命名约定）您可以使用 Zend 自动加载器（例如）...

# ios - 用于测量图像相似度的 iOS 库

> ID：11117644
> 
> 赞同：1
> 
> 时间：2012-06-20T10:28:52.783
> 
> 标签：ios, cocoa-touch, image-processing

我正在寻找一个可以计算两个图像（dssim、感知/平均哈希等）之间相似度的objective-c库（用于iOS）。我对如何构建它有基本的了解，但我真的不想重新发明这口井，所以如果有什么东西，我宁愿使用它/适应我的范围，重写一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:01:09.013

You can use OpenCV for this. Just google "iphone image comparison OpenCV". You will find many links.

This one is very good for measuring similarity : [http://opencv.willowgarage.com/wiki/FastMatchTemplate](http://opencv.willowgarage.com/wiki/FastMatchTemplate)

# c# - 我需要通过 Oracle .NET 连接器选择参数

> ID：11117645
> 
> 赞同：0
> 
> 时间：2012-06-20T10:28:54.410
> 
> 标签：c#, sql, oracle, select

我需要在 Oracle 中执行此选择语句：

（MS SQL 的 TSQL 示例）：

```
select @maxvalue = isnull(max(MYFIELD),0) from mytable 
```

我认为甲骨文是这样的：

```
select nvl(max(MYFIELD),0) into maxvalue from mytable 
```

但是，我可以只调用在.NET 连接器 maxvalue 中加载参数的 oracle 语句，还是需要一些 BEGIN END voodoo？（我使用的是 Oracle .NET 连接器，而不是 MS 连接器。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:31:25.837

你可以同时做（有或没有“voodoo”）：

```
 // without voodoo

        OracleCommand ncmd = new OracleCommand("select nvl(max(MYFIELD),0) from mytable", conn);

        ncmd.CommandType = CommandType.Text;

        object r = ncmd.ExecuteScalar();

        Console.WriteLine("a: " + r);
        Console.WriteLine("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");

        // with the voodoo

        ncmd.CommandText = "begin select nvl(max(MYFIELD),0) into :maxvalue from mytable; end;";
        ncmd.CommandType = CommandType.Text;

        OracleParameter res = new OracleParameter(":res", OracleDbType.Double);
        res.Direction = ParameterDirection.ReturnValue;
        ncmd.Parameters.Add(res);

        ncmd.ExecuteNonQuery();

        Console.WriteLine("b: " + res.Value);
        Console.WriteLine("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"); 
```

# grid - 为了构建球形网格，它是 numpy 还是 scipy 中的工具？

> ID：11117650
> 
> 赞同：0
> 
> 时间：2012-06-20T10:29:05.160
> 
> 标签：grid, scipy

一切都在标题中，我想在球体的表面上构建一个网格。做起来并不难，但我不知道它是否已经存在？

例如我这样做了：

```
import scipy as sp
from scipy import pi, cos, sin

d = 1.0

for theta in sp.linspace(0, pi, 20, endpoint = False):
    for phi in sp.linspace(0, 2\. * pi, 20, endpoint = False):
        x = d * sin(theta) * cos(phi)
        y = d * sin(theta) * sin(phi)
        z = d * cos(theta) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:34:52.180

我认为没有任何东西可以做到这一点。但是，您可以摆脱 Python 循环，这可能会为更高的点数加快速度。

```
theta = numpy.linspace(0, numpy.pi, 20, endpoint=False)
phi = numpy.linspace(0, 2 * numpy.pi, 20, endpoint=False)
theta, phi = numpy.meshgrid(theta, phi)
d = 1.0
x = d * numpy.sin(theta) * numpy.cos(phi)
y = d * numpy.sin(theta) * numpy.sin(phi)
z = d * numpy.cos(theta) 
```

# splunk - 如何使用不同的时间戳格式解析多行 Java EE 日志 splunkstorm

> ID：11117652
> 
> 赞同：0
> 
> 时间：2012-06-20T10:29:13.190
> 
> 标签：splunk

我有看起来像这样的日志：

> 2012 年 6 月 19 日上午 7:15:59 org.apache.catalina.core.StandardEngine 开始
> 
> 信息：启动 Servlet 引擎：Apache Tomcat/6.0.29

时间戳不遵循 ISO 8601。有什么方法可以根据上述格式实现隔离？现在它正在随机合并多条线路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:37:51.880

在 splunk 中创建新的源类型为

```
[javaee_logs]
BREAK_ONLY_BEFORE=^\w\w\w\s\d{2},\s\d{4}\s\d+:\d{2}:\d{2}
NO_BINARY_CHECK=1
SHOULD_LINEMERGE=true
TIME_FORMAT=%b %d, %Y %H:%M:%S %p
TIME_PREFIX=^ 
```

# ruby-on-rails - ror 如何路由到书籍/id/1

> ID：11117653
> 
> 赞同：0
> 
> 时间：2012-06-20T10:29:13.470
> 
> 标签：ruby-on-rails, resources

我有书籍作为资源，id、ean、isbn 是它的属性。我希望它被访问为`books/id/1`or `books/isbn/1212100000`or`books/ean/1313911`

在我的 routes.rb 中，我写了以下内容。

```
 resources :books do
        collection do
            get 'isbn'
            get 'ean'
            get 'id'
        end
    end 
```

但是，当我尝试访问 l`ocalhost:3000/books/id/1`时，它给出了....没有路线匹配“ `/books/id/1`”

我可以访问`localhost:3000/books/id`。这意味着我需要在 routes.rb 中编写单独的映射，但是资源声明的用途是什么？

任何人都可以建议我在不编写显式映射的情况下这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:20:50.510

收集路由预计会返回多个结果，因此没有 id 参数。如果您想要 id，请使用成员路由，例如：

```
resources :books do
    member do
        get 'isbn'
        get 'ean'
        get 'id'
    end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T11:22:29.313

添加

```
match ':controller/:action/:id/' 
```

到你的 routes.rb，接近尾声。

# javascript - ** 在 JavaScript 中？

> ID：11117654
> 
> 赞同：2
> 
> 时间：2012-06-20T10:29:14.003
> 
> 标签：javascript

[这个问题](https://stackoverflow.com/questions/11117503/javascript-standard-in-using-new-key-word#11117553)显示了的用法，`**var = new Object();`这对我来说是全新的。

由于我没有在任何答案中注意到双星与 JS 无关，因此出现了问题。

**`**`JavaScript中的双星是做什么用的？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:30:59.710

没有。

在这种情况下，这意味着“我无法在 Markdown 的代码部分中添加粗体文本”

# java - 字符数组到字节数组到可读字符串

> ID：11117659
> 
> 赞同：-5
> 
> 时间：2012-06-20T10:29:36.483
> 
> 标签：java, bytearray, ebcdic

我有一个从 WireShark 检索到的 char 数组：

```
char peer0_0[] = {
0x00, 0x00, 0x04, 0xf2, 0x5c, 0xc8, 0xd6, 0xe2, 
0xe3, 0xf1, 0xf9, 0xf2, 0x4b, 0xf1, 0xf6, 0xf8, 
0x4b, 0xf1, 0xf0, 0xf7, 0x4b, 0xf9, 0xf7, 0x40, 
0x00, 0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x0f, 
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0x40, 
0x40, 0x40, 0x40, 0xc1, 0xc2, 0xc3, 0xe2, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x5c, 0xc1, 0xe7, 
0xc9, 0xe2, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0xf0, 
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 
0xf0, 0xf0, 0xf0, 0xf0, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0xc1, 0xe7, 0xc9, 0xe2, 0xe2, 0xe8, 0xe2, 0xe3, 
0xc5, 0xd4, 0xe2, 0xc4, 0xd5, 0xc2, 0xc8, 0xc4, 
0xc1, 0xe7, 0xc9, 0xe2, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0xf0, 0xf0, 
0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 0xf0, 
0xf0, 0xf0, 0xf0, 0xf3, 0xf0, 0xf1, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0xa6, 0xa2, 0xf7, 0x97, 
0x92, 0xf9, 0xf7, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 
0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x48, 0x53, 
0x47, 0x55, 0x46, 0x72, 0x74, 0x71, 0x62, 0x70, 
0x73, 0x70, 0x71, 0xc0, 0x46, 0x72, 0x74, 0x71, 
0x62, 0x70, 0x73, 0x70, 0x71, 0xc0, 0xc0, 0xc0, 
0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 
0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 
0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 
0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 
0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 
0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 
0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }; 
```

我必须将此字符数组转换为字节数组。

随着 char 数组成功转换为字节数组，我应该能够`new String(bytes, "Cp1047")`工作，因为我必须将字节数组转换为 EDCDIC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:32:00.213

我怀疑你不应该把它作为一个 char 数组开始。您说您从 Wireshark 检索到它 - 但您没有指定如何。

从根本上说，通过网络传输的是二进制数据。*在将数据解释为文本时可以使用表示编码的标头，但除非您需要*将其视为文本，否则我会将其保留为二进制数据。

因此，将创建该 char 数组的任何内容更改为创建一个字节数组。不要*从*char 数组转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:46:37.047

使用以下方法将字符数组转换为字节数组。这将对您有所帮助。

```
 public byte[] convertCharArrayToByteArray(char[] peer0_0) {
  byte[] ba = new byte[peer0_0.length*2];
  int j = 0;
  byte mask = 0xff;

  for(int i = 0; i < peer0_0.length; ++i, j+=2) {
    byte upper8bits = (byte) ((peer0_0[i] >> (1<<3)) & mask);
    byte lower8bits = (byte)(peer0_0[i] & mask);
    ba[j] = upper8bits;
    ba[j+1] = lower8bits;
  }

  return ba;
} 
```

将您的字符数组作为参数传递，您将获得字节数组。然后，您可以将字节数组转换为 EDCDIC。

# simile - 展览时间表前：开始可接受的日期格式

> ID：11117660
> 
> 赞同：1
> 
> 时间：2012-06-20T10:29:44.753
> 
> 标签：simile

我不确定我应该使用什么日期格式才能使时间线正常工作。这是代码和我在它之后尝试过的事情的简要说明：

```
<div ex:role="view"
                   ex:viewClass="Timeline"
                   ex:start=".Ddate"
                   ex:colorKey=".feedTitle">
</div> 
```

现在我尝试将（dd-MM-yyyy）和从.toString（）生成的原始日期格式。但都没有奏效。在我尝试过的一些教程中，它们只使用了多年，但对于 rss 阅读器来说，这几乎毫无意义，因为 rss 每天都会更新。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:00:26.550

日期格式如下：yyyy-mm-dd HH:mm

[http://simile.mit.edu/wiki/Exhibit/How_to_make_an_exhibit_from_data_fed_directly_from_a_Google_Spreadsheet](http://simile.mit.edu/wiki/Exhibit/How_to_make_an_exhibit_from_data_fed_directly_from_a_Google_Spreadsheet)

# javascript - jQuery 表格排序器：停止排序

> ID：11117662
> 
> 赞同：8
> 
> 时间：2012-06-20T10:30:01.223
> 
> 标签：javascript, jquery, tablesorter

如果用户点击`div`表格标题内部，是否可以停止表格排序`th`？

就我而言， div 具有`onClick="resize(e)"`我所做的功能：

```
function resize(e) {
        if (!e) var e = window.event;
        e.stopPropagation();
        .... 
```

但它不起作用。

*编辑：表格在`e.stopPropagation()`或之前排序`return false`*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T14:21:32.667

我为你做了两个演示。第一个将表头的内容包裹在一个跨度中，第二个使用未记录的`onRenderHeader`函数添加表头`span`内部。无论哪种方式，只有内容`span`是可单击的（文本），而在内容之外单击将对列进行排序。如果您使用`div`仅标题填充可用于初始化列排序。

[演示 1](http://jsfiddle.net/Mottie/eY8uH/26/) - 包含在标记中的标题内容

```
$('table')
    .tablesorter()
    .find('.inner-header')
    .click(function(){
        console.log('header text clicked');
        return false;
    }); 
```

[演示 2](http://jsfiddle.net/Mottie/eY8uH/25/)`onRenderHeader` - 使用选项包装的标题内容

```
$('table').tablesorter({

    // customize header HTML
    onRenderHeader: function(index) {
        $(this)
            .wrapInner('<span class="inner-header"/>')
            .find('.inner-header')
            .click(function(){
                console.log('header text clicked');
                return false;
            });
    }

});​ 
```

如果您需要有关使用该`onRenderHeader`选项的更多信息，请查看我的[博客文章](http://wowmotty.blogspot.com/2011/06/jquery-tablesorter-missing-docs.html#defaults)，了解文档中缺少的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T23:48:52.040

我刚刚遇到了这个确切的问题。我尝试了所有建议，包括直接将非委托事件处理程序分配给我想要的精确元素，然后停止所有传播 + 事件本身。仍然没有运气。

但是....事实证明，jQuery 表格排序器将事件分配给**mouseup**事件，而不是**click**事件（如您所料！）。因此，为了防止 tablesort 这样做，您只需要取消该事件即可。希望这可以帮助。

*   本

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T10:39:07.787

停止传播防止事件冒泡，但如果你想取消默认操作，你应该使用 event.preventDefault()

# c# - 允许操作访问共享上下文（如 WCF 中的 OperationContext）

> ID：11117669
> 
> 赞同：3
> 
> 时间：2012-06-20T10:30:29.433
> 
> 标签：c#, .net, winforms, operationcontext

我想在我的应用程序（.NET、C#）中为正在进行的操作实现特定的上下文，以便应用程序启动和执行的代码可以访问它。

问题是上下文没有像某些 API 那样作为对象传递。

我想在 WCF 中实现类似于 OperationContext 的东西，这个静态类可以为每个操作提供其上下文。

如何实现这样的系统？

一个示例用法：

我们的应用程序加载并执行由有权访问我们 SDK 的任何人创建的第 3 方“插件”。

这样的用户代码可能如下所示：

```
public void SomeMethod(string a, string b)
{
    // NEEDED: something like this
    Context.Results = new Results();

    // Do some stuff here

    // Call another method (without passing Results to it)
    AnotherMethod();
}

public void AnotherMethod()
{
     // NEEDED: Access the context (Results) somehow to add more info to it.
     Context.Results.Add(something);
} 
```

根据这个例子，我只需要一些静态的 Context 类，但我如何确保它对于我的应用程序中的每个执行操作都是唯一的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:39:06.733

作为一种选择，如果您要在解决方案中引入像 Autofac 这样的 IoC 容器，它可以在创建对象时提供对共享上下文的访问。

有关示例，请参阅[此 SO question](https://stackoverflow.com/questions/4609360/resolve-icontainer) ，该问题指向有关对象关系类型的[这篇文章。](http://code.google.com/p/autofac/wiki/RelationshipTypes)它应该给你一些关于这种方法可能发生的事情的想法。

# visual-studio - Visual Studio 2012 Ultimate RC 中没有 C++ 模板

> ID：11117674
> 
> 赞同：2
> 
> 时间：2012-06-20T10:30:38.883
> 
> 标签：visual-studio, visual-c++

我已经下载并安装了 VS2012 [VS2012_RC_ULT_ENU.iso](http://download.microsoft.com/download/6/9/7/697096F6-4EEA-4704-AF2D-F3BAF57C7634/VS2012_RC_ULT_ENU.iso)的 RC 版本。现在，当我启动 Visual Studio 时，没有 C++ 程序的项目模板。

这是其他人报告的这个问题： [http ://connect.microsoft.com/VisualStudio/feedback/details/745797/no-c-projects-in-vs2012-rc-premium](http://connect.microsoft.com/VisualStudio/feedback/details/745797/no-c-projects-in-vs2012-rc-premium)

这个问题只针对我还是我必须做一些特别的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:08:27.570

[http://connect.microsoft.com/VisualStudio/feedback/details/745402/error-message-cant-find-localized-resources](http://connect.microsoft.com/VisualStudio/feedback/details/745402/error-message-cant-find-localized-resources)

看起来您的安装或机器不知何故处于不良状态。

我会按这个顺序尝试：

1.  修复VS安装
2.  重新安装 VS
3.  重新安装 Windows，然后 VS

您可能还想尝试使用不同的安装介质。

# facebook - heroku 的 facebook 默认模板：IE 循环验证并在 chrome/firefox 上正常工作

> ID：11117679
> 
> 赞同：1
> 
> 时间：2012-06-20T10:30:56.347
> 
> 标签：facebook, internet-explorer, heroku

我正在开发一个 facebook 应用程序并使用 chrome 一切都很好。在 IE 上，发现身份验证似乎卡在一个恒定的循环中。

我重新抓取了 heruko 默认模板并发现了相同的行为。

[例子](https://apps.facebook.com/192658744196642/)

此示例仅添加了 div。heroku 的 php 都没有被触及。

我不确定如何解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:53:19.217

将此添加到您的 fb index.php 中的第一个 php 块。它将解决您的 IE 问题。

`//for IE iFrame 3rd party cookie blocking header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');`

这不会解决关闭第三方 cookie 的人的问题。例如，默认情况下第三方 cookie 关闭的 Safari 用户。

我处理这个问题的方法是检查用户使用的浏览器，并向应用程序添加警报或额外元素。后者将重新加载，因此不那么容易阅读。

一个优秀的浏览器检测资源是 Serban Ghita 的[php-mobile-detect](http://code.google.com/p/php-mobile-detect/)

# c++ - 尝试从父表单创建事件处理程序时出错

> ID：11117682
> 
> 赞同：-1
> 
> 时间：2012-06-20T10:31:11.070
> 
> 标签：c++, windows, forms

我正在尝试从创建它的表单中处理某种形式的事件，如下所示

```
 Atom^ atomForm = gcnew Atom();
             atomForm->FormClosed+= gcnew System::Windows::Forms::FormClosedEventHandler(atomForm,&Form1::Atom_FormClosed);
             atomForm->ShowDialog(); 
```

但它正在生成此错误 Error 1 error C2440: 'initializing' : cannot convert from 'LRTSimulation::Atom ^' to 'LRTSimulation::Form1 ^' LRTDesign.h 167 1 LRTSimulation

我曾经在 C# 中平静地做到这一点。我怎样才能在这里避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:08:57.107

```
 gcnew FormClosedEventHandler(atomForm, &Form1::Atom_FormClosed); 
```

您传递了错误的对象。显然 Atom_FormClosed() 方法是 Form1 类的方法。所以你需要传递一个Form1类型的对象。正如错误消息告诉您的那样，它不能是*atomForm 。*

可能是*this*，虽然我们看不到这段代码的位置。

您在 C# 中从来没有遇到过这个问题，因为该语言不允许像 C++/CLI 那样指定委托目标对象。

# scala - 纯 scala 代码示例的 Junit4 教程

> ID：11117684
> 
> 赞同：1
> 
> 时间：2012-06-20T10:31:20.507
> 
> 标签：scala, junit4

我正处于 Scala 学习的初级阶段（我对 java 代码了解甚少）。尝试编写小型应用程序并同时想要测试它们。通过这样做，我打算创建真实的项目场景，以便理解和运行构建机制、持续测试等。

**在哪里可以找到带有纯 Scala 代码示例的 JUnit4 教程。非常基本的样品是优选的。**

我的大部分搜索都让我找到了基于 Java 的 JUnit4 教程/书籍。

请注意，我的学习环境是 Eclipse 平台版本：3.7.2、Scala 2.9.2 和 Junit4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T11:07:54.230

我建议不要使用 JUnit4，而是使用 Scala 测试框架。一次主要有两个：

*   [规格2](http://etorreborre.github.com/specs2/)

*   [ScalaTest](http://www.scalatest.org/)

我个人更喜欢第二种，它与 JUnit 集成，因此您实际上将在 Eclipse 中将测试作为 JUnit 测试运行，但它们是 ScalaTest 测试。有关详细信息，请参见此处：[http ://www.scalatest.org/getting_started_with_junit_4_in_scala](http://www.scalatest.org/getting_started_with_junit_4_in_scala)

Specs2 可能可以做类似的事情，我只是不知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T11:03:54.037

这不应该是一个问题。这是一个教程：[http](http://dearjunior.blogspot.de/2011/03/getting-started-with-junit-and-tdd-in.html) ://dearjunior.blogspot.de/2011/03/getting-started-with-junit-and-tdd-in.html 。

但我建议使用[specs2](http://etorreborre.github.com/specs2/)或[ScalaTest](http://www.scalatest.org/)进行测试。他们有一些不错的功能。通过添加 @RunWith(classOf[JUnitRunner]) 注释，可以在 Eclipse 中将 Specs2 测试作为 JUnit 测试运行。

# php - 如何用正则表达式解析 HTML？

> ID：11117690
> 
> 赞同：-2
> 
> 时间：2012-06-20T10:31:35.560
> 
> 标签：php, html

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我有 HTML 文档，其中包含许多具有以下格式的记录：

```
<tr><td>af</td><td>Afrikaans</td></tr> 
```

请告诉我，如何使用正则表达式提取“af”和“Afrikaans”？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:41:12.410

这只是一个让您入门的简单示例，但根据 HTML 的结构，您需要进行一些调整：

```
$s = <<<EOM
<tr><td>af</td><td>Afrikaans</td></tr>
EOM;

$d = new DOMDocument;
$d->loadHTML($s);
foreach ($d->getElementsByTagName('td') as $node) {
    echo $node->nodeValue;
} 
```

另请参阅[`DOMDocument`](http://www.php.net/domdocument)文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:47:00.250

您应该使用 DOM、SAX、SimpleXML、PHPQuesry、tidy 而不是正则表达式来解析 XML

# java - 如何写入文本文件 - HttpConnection J2ME

> ID：11117692
> 
> 赞同：0
> 
> 时间：2012-06-20T10:31:40.613
> 
> 标签：java, java-me, midp, httpconnection

我没有收到任何错误，但我的代码没有将任何新数据保存到文本文件中，这是我的代码：

```
public void saveToLeaderboard() throws IOException {
        String toSave = "Random info I want to save";
        HttpConnection connection = null;

        connection = (HttpConnection) Connector.open("EXTERNAL URL", Connector.READ_WRITE, true);
        connection.setRequestMethod(HttpConnection.POST);

        DataOutputStream out = new DataOutputStream(connection.openDataOutputStream());
        out.writeUTF(toSave);        

        out.flush();
        connection.close();
    } 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:36:06.887

我在您的代码中看不到任何 FileOutputStream。DataOutputStream 应该如何写入文件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:37:40.003

要真正触发 HTTP 请求，您需要获取有关 HTTP 响应的任何信息，例如使用`URLConnection.getInputStream()`or的响应正文`URLConnection.getResposeCode()`等。

有关更多详细信息，请参阅[HTTP 请求的工作原理](https://stackoverflow.com/a/2793153/945945)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:00:39.247

**一天结束时我自己的解决方案：**

我创建了一个服务器端文件（在我的情况下它是一个 .Net 文件 [.aspx]），我设置我的外部 url 来调用我的 .Net 页面，其中包含我需要的数据的 url 变量。

并使用服务器代码（在我的情况下为 C#）做了一个基本的保存到 txt 文件。

```
public void saveToLeaderboard() throws IOException {
        String toSave = "Data to save";
        InputStream inputStream = null;
        HttpConnection connection = (HttpConnection) Connector.open("External Url" + "?info=" + toSave, Connector.READ_WRITE, true);
        connection.setRequestMethod(HttpConnection.POST);
        inputStream = connection.openInputStream();
        inputStream.close();
        connection.close();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T09:43:49.670

最好尝试以下代码片段

```
public void saveToLeaderboard() {

    String toSave = "Random info I want to save";
    HttpConnection connection = null;
    int response_code=HttpConnection.HTTP_OK-1;
    FileConnection fc=null;
    DataOutputStream dos=null;
    DataOutputStream out
    InputStream dis=null; 
    try
    {    
    connection = (HttpConnection) Connector.open("EXTERNAL URL");
    connection.setRequestMethod(HttpConnection.POST);

     out= connection.openDataOutputStream();
    out.writeUTF(toSave);        

    out.flush();
    response_code=connection.getResponseCode();

    if(response_code==HttpConnection.HTTP_OK)
    {
       dis=connection.openDataInputStream();
       int ch;

       fc=(FileConnection)Connector.open(path,Connector.READ_WRITE); //path is a path of the file to be saved 
       fos=fc.openDataOutputStream(); byte temp; while((ch=dis.read()) !=-1) 
       { 
           temp=(byte)ch; fos.write(temp); 
       } 
       fos.flush(); 
     } 
      else 
       { //Status code not ok }

    }
    catch(ConnectionNotFoundException cnex){//Connection not found} 
    catch(IOException cnex){//ioe exception} 
    catch(Exception cnex){//exception} 

    if(out!=null)
    {
       try{
           out.close();
       }
       catch(Exception cnex){//exception} 
    }  
    if(dis!=null)
    {
       try{
           dis.close();
       }
       catch(Exception cnex){//exception} 
    }  
    if(connection!=null)
    {
       try{
           connection.close();
       }
       catch(Exception cnex){//exception} 
    }  
   if(fos!=null)
    {
       try{
           fos.close();
       }
       catch(Exception cnex){//exception} 
    } 
```

# css - CSS蒙版图像问题

> ID：11117693
> 
> 赞同：3
> 
> 时间：2012-06-20T10:31:45.450
> 
> 标签：css

我正在尝试用条纹图像掩盖一些文本。当我检查元素时，我可以看到遮罩图像，但它不起作用。下方链接。

[http://piersrueb.com/colors/](http://piersrueb.com/colors/)

我从 Trent Walton 网站获得了代码，奇怪的是，如果我从 Trent 的网站复制图像路径并将其放在我的 css 中，它就可以工作。

[http://trentwalton.com/2011/05/19/mask-image-text/](http://trentwalton.com/2011/05/19/mask-image-text/)

如果您能告诉我哪里出错了，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:39:38.927

蒙版图像必须是单色的。它们内部的颜色将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:44:34.740

这与您的 PNG 有关。我不太确定为什么，但我很快将您的[http://piersrueb.com/colors/img/stripes.png](http://piersrueb.com/colors/img/stripes.png)换成了Trent 的[http://trentwalton.com/wp-content/uploads/2011/05/mask .png](http://trentwalton.com/wp-content/uploads/2011/05/mask.png)使用 Chrome 的网络检查器，它开始工作。

我无法告诉你为什么会发生这种情况，也许是一些奇怪的图像元？但我希望这能帮助你弄清楚。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:06:03.347

我希望你在看这个：-

[http://jsfiddle.net/rD6wq/18/](http://jsfiddle.net/rD6wq/18/)

您可以使用 css3 属性**-webkit-text-fill-color: transparent;** 对于透明文本 &
**-webkit-background-clip: text;** 用于在文本剪辑中调用 bg 图像....

但这些属性只支持 web-kit 浏览器.....

**HTML**

```
<p>R</p>

<p>T</p>

<p>SUPER</p> 
```

**CSS**

```
p{
    font-size:5em;
    font-family:impact;
    background: url(http://farm8.staticflickr.com/7245/7086291447_06484c1d6a_z.jpg) fixed; 
position:relative;
            -webkit-text-fill-color: transparent;
   -webkit-background-clip: text;        
    display:inline-block;
    text-align:center;
    padding:10px;
}
p:after{
    content:'';
    position:absolute;
    background:rgba(0,0,0,0.5);
    width:100%;
    height:100%;
    top:0;
    left:0;
    z-index:-1;
}
body{
    background: url(http://farm8.staticflickr.com/7245/7086291447_06484c1d6a_z.jpg)  fixed;
} 
```

​</p>

# php - MySQL 服务器以美国格式显示日期

> ID：11117695
> 
> 赞同：0
> 
> 时间：2012-06-20T10:31:56.090
> 
> 标签：php, mysql

有没有办法让我的 mysql 和 php 服务器自动以英国格式显示日期。

目前我运行一个函数来转换它们。

数据存储在数据库中的方式 2012/06/20 我希望服务器存储它的方式 20/06/2012

--------------Update------------------ //SQL_data 来自表

回声 $sql_date; // 2012/06/20

然后我用它来交换日期。

```
function fixdate($in_date) {
    $split_data = explode('-', $in_date);
    if(count($split_data) == 3) {
        $year = $split_data[2]; $month = $split_data[1]; $day = $split_data[0];
        return "$year-$month-$day";
     } else {
        return FALSE;
     }
} 
```

然后我显示日期。

然后我再次使用该函数将其存储在数据库中，因为它不接受任何其他格式。

我的问题是：有没有一种方法可以将默认的 mysql 日期格式设置为英国标准。

希望我这次解释得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:34:11.957

尝试在 PHP中使用[setlocale函数。](http://php.net/manual/ru/function.setlocale.php)对于 MySQL 尝试使用[文档更改语言环境](http://dev.mysql.com/doc/refman/5.0/en/locale-support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:02:54.457

在 PHP 中，您可以使用 date() 和 strtotime() 函数将日期转换为您想要的任何格式。例如对于 DD-MM-YYYY

```
date('d-m-Y', strtotime($date_from_db)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:19:38.017

显然你可以设置 mysql 接受未经授权的日期，强烈不推荐。

因此，我必须在从数据库中检索日期并插入它们时格式化日期。

```
DATE_FORMAT(mydate, '%d/%m/%Y') 
```

我的例子

```
public function customerList()
    {
        return $this->db->select("
            SELECT
            _payments.id,
            _payments.dueDate,
            _payments.paymentMethod,
            _payments.paymentAmount,
            DATE_FORMAT(_payments.paidDate,'%d/%m/%Y') as paidDate,
            _payments.custId,
            _customers.firstname,
            _customers.lastname,
            _customers.advisor
            FROM
            _payments
            Inner Join _customers ON _payments.custId = _customers.id
            WHERE _payments.paid = 0
        ");
    } 
```

# html - 在 CSS 按钮中包裹文本和奇怪的高度问题

> ID：11117697
> 
> 赞同：0
> 
> 时间：2012-06-20T10:32:04.067
> 
> 标签：html, css

我有以下 CSS 和按钮设置来在我的项目中创建按钮。然而，他们现在希望所有按钮的宽度相同，并且不会根据文本的大小而增长。他们希望文本换行。我有文本换行和相同的宽度和高度，宽度和高度固定，但它将按钮移动到奇怪的地方，并且中心的文本需要向上移动，所以它仍然是集中的（如果这有意义的话！）

[http://www.screenup.info/uploads/4548070.jpeg](http://www.screenup.info/uploads/4548070.jpeg)是它如何出来的一个例子。正如您所看到的，它们已经跳遍了整个地方，并且在换行时文本不在中间。

jsfiddle：http: [//jsfiddle.net/DqUfx/](http://jsfiddle.net/DqUfx/)

```
.dark-orange-button
{
    -moz-box-shadow: inset 0px 1px 0px 0px #fed897;
    -webkit-box-shadow: inset 0px 1px 0px 0px #fed897;
    box-shadow: inset 0px 1px 0px 0px #fed897;
    background: -webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f6b33d), color-stop(1, #d29105) );
    background: -moz-linear-gradient( center top, #f6b33d 5%, #d29105 100% );
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr= '#f6b33d' , endColorstr= '#d29105' );
    background-color: #f6b33d;
    -moz-border-radius: 9px;
    -webkit-border-radius: 9px;
    border-radius: 9px;
    border: 3px solid #eda933;
    display: inline-block;
    color: #ffffff;
    font-family: arial;
    font-size: 15px;
    font-weight: bold;
    width: 300px;
    height: 18px;
    text-align:center;
    padding: 23px 56px;
    text-decoration: none;
    text-shadow: 1px 1px 0px #cd8a15;
}

.dark-orange-button:hover
{
    background: -webkit-gradient( linear, left top, left bottom, color-stop(0.05, #d29105), color-stop(1, #f6b33d) );
    background: -moz-linear-gradient( center top, #d29105 5%, #f6b33d 100% );
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr= '#d29105' , endColorstr= '#f6b33d' );
    background-color: #d29105;
}

.dark-orange-button:active
{
    position: relative;
    top: 1px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:34:04.910

要修复错位，`vertical-align: top`请在您拥有的位置添加`display: inline-block`.

[http://jsfiddle.net/thirtydot/DqUfx/1/](http://jsfiddle.net/thirtydot/DqUfx/1/)

如果您不需要支持 IE6/7 - 使用，垂直居中多行文本很容易`display: table-cell`。

[http://jsfiddle.net/thirtydot/DqUfx/2/](http://jsfiddle.net/thirtydot/DqUfx/2/)

如果您确实需要支持 IE6/7，请查看[此处](https://stackoverflow.com/questions/10998614/ie7-vertically-align-middle-not-working/10998683#10998683)或[此处](http://css-tricks.com/vertically-center-multi-lined-text/)。

# ruby-on-rails-3 - 在 Rails 3.2.x 中从 SendGrid 接收带有附件的电子邮件

> ID：11117698
> 
> 赞同：2
> 
> 时间：2012-06-20T10:32:04.030
> 
> 标签：ruby-on-rails-3, email-attachments, sendgrid

我可以成功接收来自 SendGrid 的电子邮件并处理其数据。我的问题是电子邮件附件。

当我查看每个附件发布的内容时，我会得到以下内容：

```
"attachment12"=>#<ActionDispatch::Http::UploadedFile:0x00000008a793f8 
                  @original_filename="image036.png", 
                  @content_type="image/png", 
                  @headers="Content-Disposition: form-data; 
                            name=\"attachment12\";
                            filename=\"image036.png\"\r\n
                            Content-Type: image/png\r\n", 
                  @tempfile=#<File:/tmp/RackMultipart20120620-35076-1xav4k1>
                > 
```

而不是

```
Array
(
  [attachment1] => Array
    (
      [name] => Upload.csv
      [type] => text/csv
      [tmp_name] => /tmp/phpo34iHI
      [error] => 0
      [size] => 76
    )
) 
```

在显示的 Parse API 中引用了在[此处输入链接描述](http://docs.sendgrid.com/documentation/api/parse-api-2/) 显然，Rails 一如既往地优雅。

但是，我的问题是：

1.  文件在哪里，它们在哪里下载？我找不到他们（如果发生这种情况我会担心）

* * *

我实际上正在阅读 ActionDispatch::Http::UploadedFile，根据我应该能够执行 params['attachment12'].read 的文档

我将发布我的发现

* * *

1.  生产是 Heroku，所以我需要将文件粘贴在某种容器中，如 DB、Mongo 或 S3
2.  我猜该文件实际上是在 sendgrid 但他们的支持不理解我的问题并将我恢复为解析 api！可能有一个 URL，但在他们的支持下我无法深入了解它。很遗憾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:18:55.233

这些文件实际上已发布到您的服务器，但您可以`ActionDispatch::Http::UploadedFile`使用。如果您查看[课程描述](http://rubydoc.info/docs/rails/3.1.1/ActionDispatch/Http/UploadedFile)，您会发现您可以使用以下内容：

该`original_filename`属性很明显，但是您可以使用它`.read`来实际读出内容并保存它，或者您可以将临时文件直接传递给您正在使用的任何 gem。

如果您能告诉我您使用哪种上传解决方案（回形针、carrierwave）（如果有的话），我可以为您提供更好的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T15:18:43.097

`tempfile`是的，该文件实际上已经上传到您的服务器，并且存储在`UploadFile`. 您可以使用以下内容访问完整的文件路径：

```
params['attachment12'].tempfile.to_path.to_s 
```

*资料来源：[如何从“ActionDispatch::Http::UploadedFile”实例中检索 FileBlob？](https://stackoverflow.com/questions/9544768/how-to-retrieve-a-fileblob-from-actiondispatchhttpuploadedfile-instance)*

* * *

为了清楚起见，在此过程中，这些文件实际上并不在 SendGrid 的服务器上。它们已经发布给您并存储在您服务器上的某个位置（可能在`/tmp`目录中）。

# c# - 使用 c# 在网络中移动目录

> ID：11117700
> 
> 赞同：0
> 
> 时间：2012-06-20T10:32:19.530
> 
> 标签：c#, networking, directory

我有一个文件夹 A，我想将它从我的计算机移动到网络上的服务器。

我试过`Directory.Move(A,Server)`了，但是因为它们没有相同的根，所以它不起作用。

`File.Copy(A,Server)`将不起作用，因为该文件夹是只读的并且无法更改权限。

提前致谢。

**编辑** *包含代码*

```
string copyFrom = @"folder";
string copyTo = @"\\server\Libraries\Documents";
string destinationPath = Path.Combine(copyTo, Path.GetFileName(copyFrom));
File.Copy(copyFrom, destinationPath); 
```

那是我目前正在使用的代码。

**编辑 2**

我的计算机和服务器位于不同的域上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:39:35.320

正如@Tigran 建议的那样，您可以将 cmd 与 xcopy （或 robocopy 如果您愿意）一起使用。

尝试使用这个：

```
ProcessStartInfo Info = new ProcessStartInfo(); 
Info.Arguments = "/C xcopy C:\A \\server\A /I /E /Y"; 
Info.WindowStyle = ProcessWindowStyle.Hidden; 
Info.CreateNoWindow = true; 
Info.FileName = "cmd.exe"; 
Process.Start(Info); 
```

# c# - 像 Web 浏览器控件一样显示 html 的富文本框

> ID：11117701
> 
> 赞同：0
> 
> 时间：2012-06-20T10:32:21.197
> 
> 标签：c#, visual-studio-2010, richtextbox

我在富文本框中显示文本，我希望它在文本上显示 html 格式。有没有办法让富文本框显示 html。

**如果您按下以下链接上的按钮，您将看到我的输出显示方式，我希望它在富文本框中完成。**

[http://neil.fraser.name/software/diff_match_patch/svn/trunk/demos/demo_diff.html](http://neil.fraser.name/software/diff_match_patch/svn/trunk/demos/demo_diff.html)

有没有办法建立一个可以显示html的富文本框？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:37:06.043

`RTF encoding`不同于`HTML`.

如果没有，那么您需要编写自己的 HTML 到 RTF 转换器或找到类似的东西。

[编写自己的 RTF 转换器](http://www.codeproject.com/Articles/27431/Writing-Your-Own-RTF-Converter)。这个人对程序如何工作以及转换的细节进行了很好的分解。

一个[扩展的 Richtextbox](http://www.codeproject.com/Articles/12172/An-extended-RichTextBox-to-save-and-load-quot-HTML)控件，检查一下。它可能会解决您的解决方案

# javascript - Firefox：附加大树后的第一个 DOM 操作非常慢

> ID：11117702
> 
> 赞同：0
> 
> 时间：2012-06-20T10:32:23.257
> 
> 标签：javascript, firefox, dom

我有以下 JS 伪代码：

```
var tree = $('<div id="root"></div>');
tree = build_big_tree();   // appends ~250 rows / 3000 DOM elements incl. 1 <audio> per row
$('body').append(tree);
some_DOM_call(); 
```

代码在浏览器上运行良好，但在 Firefox（13，在 Ubuntu 上）上运行`some_DOM_call()`速度非常慢（250 行大约需要 10 秒，而整个 JS 运行时间不到 1 秒）。我`console.timeStamp()`在代码中发现了这个，直到我找到了罪魁祸首。

10 与行数大致成正比。实际页面位于[http://wikiotics.org/fr/FSI-French-basic-course-revised-volume-01-unit-01-lesson-01?view=edit](http://wikiotics.org/fr/FSI-French-basic-course-revised-volume-01-unit-01-lesson-01?view=edit)

除了花费时间之外，最烦人的部分是整个浏览器对于这 10 秒甚至其他选项卡都无法使用。

some_DOM_call() 最初是 jQuery 代码，但我将其缩小到`elem.offsetWidth`（出于好奇，在 jQuery cssHooks() 中）。当我注释掉 some_DOM_call() 时，下面的 DOM 访问导致了 10 秒的延迟（`body.appendChild(OBJECT)`）。所以我做什么似乎并不重要，只要它是一个与 DOM 相关的动作，它就会受到打击。

Firebug 并没有告诉我这 10 年代发生了什么，所以我只能猜测它与渲染我在页面中插入的树有关。但我可能错了。

我怎样才能弄清楚实际发生了什么，以便我可以改进？

# xslt - 使用 xsl:include 或 xsl:import 时 xsltproc 缩进不起作用

> ID：11117707
> 
> 赞同：2
> 
> 时间：2012-06-20T10:32:44.597
> 
> 标签：xslt

我有两个模板 - List.xsl 和 Main.xsl。Main.xsl 通过 xsl:include 包含在 List.xsl 中。当使用 xsltproc 转换 List.xsl 时，它生成的所有代码都没有任何缩进，但如果将相同的代码放在 Main.xsl 中而不是`<xsl:apply-templates />`在正文标记之间，则缩进起作用。在这两种情况下，缩进也适用于撒克逊人。是 xsltproc 的错误吗？

列表.xsl

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:xdt="http://www.w3.org/2005/04/xpath-datatypes"
  xmlns="http://www.w3.org/1999/xhtml">
  <xsl:include href="Main.xsl" />

  ...

</xsl:stylesheet> 
```

主文件

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns="http://www.w3.org/1999/xhtml">
  <xsl:output
    omit-xml-declaration="yes"
    doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
    doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"
    method="xml"
    encoding="utf-8"
    indent="yes"
    cdata-section-elements="script style" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/">
    <html>
      <head>
        <title> List </title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      </head>
      <body>
        <xsl:apply-templates />
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

第一种情况下的输出示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title> List </title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  </head>
  <body><dl class="list"><dt>Term</dt><dd><ul><li> ... </li></ul></dd></dl></body>
</html> 
```

第二种情况下的输出示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title> List </title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  </head>
  <body>
    <dl class="list">
      <dt>Term</dt>
      <dd>
        <ul>
          <li> ... </li>
        </ul>
      </dd>
    </dl>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:06:33.687

如果 List.xsl 有一个`xsl:output`元素，它的值优先于导入样式表中指定的值。对于 List.xsl 中未指定的输出属性，应应用导入的 Main.xsl 中指定的值。如果 List.xsl 没有任何`xsl:output`带有 的元素`indent="yes"`，那么是的，这似乎是 libxslt 中的一个错误。

# windows-phone-7 - 使用 Windows Phone 7 和 PhoneGap 自动更新

> ID：11117714
> 
> 赞同：0
> 
> 时间：2012-06-20T10:33:06.027
> 
> 标签：windows-phone-7, cordova

我正在考虑使用 PhoneGap 开发一个 Windows Phone 7 应用程序，并且对可用功能有一些疑问。我之前没有开发过 WP7 应用程序，也没有使用过 PhoneGap，所以如果这些问题的一些答案是显而易见的，请原谅我。

1.  PhoneGap 是否支持更新由 WP7 应用托管的 HTML/JS/CSS/图像？我想可以轻松下载新内容，但是否可以更新或扩展PhoneGap 用于该应用程序的现有文件尚不清楚。鉴于应用程序功能将主要由 HTML/JS 驱动，我认为可以异步下载更新的 HTML/JS 并更新设备上的内容。实际上，这相当于在不通过 MarketPlace 下载应用程序的新版本的情况下更新应用程序。假设这是可能的，那么这样做的应用程序通过应用程序验证过程的机会有多大？
2.  在使用 PhoneGap 开发应用程序时，是否有任何特定的限制/指南需要特别注意？我怀疑有，但如果有人在这方面有任何具体建议，那将会很有帮助。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:54:10.323

1）简短的回答是肯定的。长答案是你需要做一些本机（在本例中为 C#）开发来实现这一点。我不知道PhoneGap 的细节，但我知道你可以从JS 调用C# 方法。所以你会调用一个方法来下载数据并将其存储在IsolatedStorage中，然后可能会回调JS让它知道它已经完成了。否则，*可能*有一种方法可以在 JS 中下载图像并将其传递给后面的代码，但除非 PhoneGap 的人专门针对这种情况，否则我高度怀疑它。

1.2）是的，这将通过证书就好了。由 MS 决定如何/为什么/何时/何地获取内容。他们不会从你更新应用程序中赚钱，所以他们不会关心你是否制定了自己的内容交付系统。

2）也许不是您正在寻找的答案 - 但如果您在 PhoneGap 或任何其他非本地方式中制作应用程序，应用程序之神会让您失望。简单地说，PhoneGap 和类似的东西都是垃圾。不是实际的框架（我相信他们在其中投入了大量工作），而是结果。说真的，当你运行一个非本地应用程序的那一刻，你就知道它有多糟糕。我不知道如何强调这一点。真的值得在每个平台上本地开发它。

# java - 如何组织不同类型的数组？

> ID：11117719
> 
> 赞同：1
> 
> 时间：2012-06-20T10:33:14.577
> 
> 标签：java, arrays, multidimensional-array

你好，

我是 Java 新手，想弄清楚如何将这些数据推送到数组中（6 行，3 列）？

```
x1 John 6
x2 Smith 9
x3 Alex 7
y1 Peter 8
y2 Frank 9
y3 Andy 4 
```

之后，我将从最后一列中取出数字进行数学计算。

这是我的代码...

```
public class Testing {
    public static void main(String[] args) {

        Employee eh = new Employee_hour();

        Employee_hour [] eh_list = new Employee_hour[6];
        eh_list[0] = new Employee_hour("x1", "John", 6);
        eh_list[1] = new Employee_hour("x2", "Smith", 9);
        eh_list[2] = new Employee_hour("x3", "Alex", 7);
        eh_list[3] = new Employee_hour("y1", "Peter", 8);
        eh_list[4] = new Employee_hour("y2", "Frank", 9);
        eh_list[5] = new Employee_hour("y3", "Andy", 4);
        print(eh_list);
    }

    private static void print(Employee_hour[] mass){
        for (int i = 0; i < mass.length; i++) {
            System.out.print(mass[i] + " ");
        }
        System.out.println();
    }
} 
```

但我得到这个作为输出......

> testing.Employee_hour@1a752144 testing.Employee_hour@7fdb04ed testing.Employee_hour@420a52f testing.Employee_hour@7b3cb2c6 testing.Employee_hour@4dfd245f testing.Employee_hour@265f00f9

如何从最后一列获取数字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T10:37:07.813

为什么不为您的记录创建一个特定的 Java bean？

```
class Person {
  String id;
  String name;
  int anotherNumber;
  // constructor, getters, setters
} 
```

然后像这样使用它：

```
Person [] people = new Person[10];
people[0] = new Person("x1", "John", 6);
... 
```

或者更好的是使用`java.util.List`而不是数组。

**现场访问**

为了访问单独的字段，您要么需要公开您的字段（非常糟糕的主意）并将它们简单地称为`object_instance.field_name`，要么提供所谓的 getter：

```
class Person {
  String id;
  String name;
  int anotherNumber;
  // constructor, getters, setters

  public int getAnotherNumber() {
     return anotherNumber;
  }
} 
```

然后在打印时调用它：

```
for (int i = 0; i < mass.length; i++) {
    System.out.print(mass[i].getAnotherNumber() + " ");
} 
```

**为什么您尝试的方法不起作用：**

`System.out.println(mass[0])`在您的情况下将打印整个对象表示，默认情况下它会打印在您的情况下所做的事情。为了做得更好，您需要覆盖`Object`的`String toString()`方法：

```
class Person {
  String id;
  String name;
  int anotherNumber;
  // constructor, getters, setters

  public String toString() {
     return "{id="+id+", name="+name+", anotherNumber="+anotherNumber+"}";
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:36:32.787

Java 是强类型的，因此您不能只创建一个可以接受任何类型的数组。
但是，您可以创建一个类型为 的多维数组`Object`，并将`java.lang.Integer`其用于整数值。
另一种方法是创建一个代表表中行的类，并创建一个该类的数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T10:45:09.150

如果要将其存储为数组用户 2 维数组。这是一个示例。

```
String[][] a2 = new String[10][5];
   for (int i=0; i<a2.length; i++) {
   for (int j=0; j<a2[i].length; j++) {
   a2[i][j] = i;
   System.out.print(" " + a2[i][j]);
   }
   System.out.println("");
   }
  } 
```

更好的方法是创建一个对象

```
class User {
  String id;
  String userName;
  int userSomeValue;

 //
} 
```

然后将其推送到列表

```
User ob1=new User();
// set the values.
List<User> userList=new ArrayList<User>();
userList.add(ob1); 
```

使用此列表通过使用检索内容进行处理

```
userList.get(index); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T10:41:13.390

`Array`是一个类型安全的集合，您可以使用泛型对象数组。其他方式使用`collection Api`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T10:51:34.250

有一些方法可以将数据存储在数组中，但您只能将相同类型的值存储在一个数组中。例如只是 String、int 或 float。在您的情况下，您必须使用 String 但您不能使用字符串类型变量进行任何计算，即使它包含一个数字。我会建议马克西莫夫描述的方式。

# android - 在 android 中播放来自 youtube 的视频文件

> ID：11117720
> 
> 赞同：3
> 
> 时间：2012-06-20T10:33:17.820
> 
> 标签：android, youtube

我遵循了有关如何使用 youtube gdata 的教程。使用来自 youtube 的视频和来自[stackoverflow的 onclick 填充列表视图](https://stackoverflow.com/questions/10503187/youtube-intent-starts-in-browser-android)

但仍然在 youtube 上播放视频，而不是在我的应用程序中。请帮我找到这个。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T10:53:07.563

一旦你得到 You tube url...，从 Url 中对 Video_ID 进行子串化。请参阅下面我给出的示例。

您可以使用[http://gdata.youtube.com/feeds/mobile/videos/VIDEO_ID](http://gdata.youtube.com/feeds/mobile/videos/VIDEO_ID) api 从您的实际管 url 获取 rtsp 链接。数据在`XML format`

获得 rtsp 链接后，您可以在 VideoView 中播放视频，[这是示例](http://android-coding.blogspot.in/2011/03/simple-example-using-videoview-to-play.html)

**例如：** 如果此链接是视频[http://www.youtube.com/watch?v=sMM0R19IisI](http://www.youtube.com/watch?v=sMM0R19IisI)

然后`sMM0R19IisI`是Video_ID。所以您可以将此视频ID传递给上面的api以获取rtsp链接

要`JSON format`使用此[http://gdata.youtube.com/feeds/mobile/videos/"+videoid+"?alt=json获取数据](http://gdata.youtube.com/feeds/mobile/videos/%22+videoid%5Bi%5D+%22?alt=json)

参考这两个链接：

[链接1](https://stackoverflow.com/questions/8716146/rtsp-youtube-link)

[链接2](https://stackoverflow.com/questions/6520313/how-to-get-rtsp-links-android)

获得 rtsp 链接后，您可以在其中播放`VideoView`

# java - 在 Android 上本地存储来自互联网的图像

> ID：11117722
> 
> 赞同：0
> 
> 时间：2012-06-20T10:33:23.833
> 
> 标签：java, android, caching, bitmap, httpurlconnection

我需要在 android 设备上本地存储一些从互联网上获取的图像，以便以后更快地显示

我写了这段代码，我没有得到任何异常，但是当我尝试重新加载图像时，我得到一个 FileNotFoundException

```
public String md5(String s) {
    try {
        // Create MD5 Hash
        MessageDigest digest = java.security.MessageDigest
                .getInstance("MD5");
        digest.update(s.getBytes());
        byte messageDigest[] = digest.digest();
        // Create Hex String
        StringBuffer hexString = new StringBuffer();
        for (int i = 0; i < messageDigest.length; i++)
            hexString.append(Integer.toHexString(0xFF & messageDigest[i]));
        return hexString.toString();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    }
    return "";
}

public boolean saveImage() {
    fileName = this.md5(fullURL);
    URL ulrn = new URL(fullURL);
    HttpURLConnection con = (HttpURLConnection) ulrn.openConnection();
    InputStream is = con.getInputStream();
    Bitmap bmp = BitmapFactory.decodeStream(is);
    File f = new File(cacheImagePath, filename); // cacheImagePath is
                                                    // /data/data/com.mycompany.myapp/cache/
    try {
        if (f.exists()) {
            f.delete();
        }
        f.createNewFile();
        FileOutputStream out = new FileOutputStream(f);
        bm.compress(Bitmap.CompressFormat.JPEG, 92, out);
        out.flush();
        out.close();
        return true;
    } catch (Exception e) {
        Log.e("Exception", "saveImage " + filename);
        e.printStackTrace();
        return false;
    }
} 
```

编辑 ：

尝试访问文件时出现 LogCat 错误：

```
06-20 14:39:11.965: W/System.err(560): java.io.FileNotFoundException: /data/data/com.accessdev.tellmeplus/cache/files/tagpromo-d3d908befad2892c35f3ba957d5c18 (No such file or directory)
06-20 14:39:11.965: W/System.err(560):  at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
06-20 14:39:11.965: W/System.err(560):  at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
06-20 14:39:11.965: W/System.err(560):  at java.io.FileInputStream.<init>(FileInputStream.java:80)
06-20 14:39:11.965: W/System.err(560):  at java.io.FileInputStream.<init>(FileInputStream.java:132)
06-20 14:39:11.965: W/System.err(560):  at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:362)
06-20 14:39:11.965: W/System.err(560):  at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:412)
06-20 14:39:11.965: W/System.err(560):  at com.accessdev.tellmeplus.TMPOfferImageAdapter.createBitmap(TMPOfferImageAdapter.java:124)
06-20 14:39:11.970: W/System.err(560):  at pl.polidea.coverflow.AbstractCoverFlowImageAdapter.getItem(AbstractCoverFlowImageAdapter.java:70)
06-20 14:39:11.970: W/System.err(560):  at pl.polidea.coverflow.AbstractCoverFlowImageAdapter.getView(AbstractCoverFlowImageAdapter.java:111)
06-20 14:39:11.970: W/System.err(560):  at pl.polidea.coverflow.AbstractCoverFlowImageAdapter.getView(AbstractCoverFlowImageAdapter.java:1)
06-20 14:39:11.970: W/System.err(560):  at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
06-20 14:39:11.970: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.970: W/System.err(560):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-20 14:39:11.970: W/System.err(560):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
06-20 14:39:11.970: W/System.err(560):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
06-20 14:39:11.970: W/System.err(560):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
06-20 14:39:11.970: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.975: W/System.err(560):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-20 14:39:11.975: W/System.err(560):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-20 14:39:11.975: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.975: W/System.err(560):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-20 14:39:11.975: W/System.err(560):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-20 14:39:11.975: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.975: W/System.err(560):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-20 14:39:11.975: W/System.err(560):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-20 14:39:11.975: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.975: W/System.err(560):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-20 14:39:11.975: W/System.err(560):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
06-20 14:39:11.975: W/System.err(560):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
06-20 14:39:11.975: W/System.err(560):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
06-20 14:39:11.980: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.980: W/System.err(560):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-20 14:39:11.980: W/System.err(560):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-20 14:39:11.980: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.980: W/System.err(560):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-20 14:39:11.980: W/System.err(560):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-20 14:39:11.980: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.980: W/System.err(560):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
06-20 14:39:11.980: W/System.err(560):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
06-20 14:39:11.985: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.985: W/System.err(560):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-20 14:39:11.985: W/System.err(560):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-20 14:39:11.985: W/System.err(560):  at android.view.View.measure(View.java:8366)
06-20 14:39:11.985: W/System.err(560):  at android.view.ViewRoot.performTraversals(ViewRoot.java:847)
06-20 14:39:11.985: W/System.err(560):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
06-20 14:39:11.985: W/System.err(560):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-20 14:39:11.985: W/System.err(560):  at android.os.Looper.loop(Looper.java:130)
06-20 14:39:11.990: W/System.err(560):  at android.app.ActivityThread.main(ActivityThread.java:3691)
06-20 14:39:11.990: W/System.err(560):  at java.lang.reflect.Method.invokeNative(Native Method)
06-20 14:39:11.990: W/System.err(560):  at java.lang.reflect.Method.invoke(Method.java:507)
06-20 14:39:11.990: W/System.err(560):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
06-20 14:39:11.990: W/System.err(560):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
06-20 14:39:11.990: W/System.err(560):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:58:59.213

您尝试创建一个新文件，`f.createNewFile()`但没有创建目录。

做`new File(cacheImagePath).mkdirs()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:00:03.673

这是代码

```
 try {
        URL url = new URL(image_URL);
        HttpURLConnection c = (HttpURLConnection) url.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();
        String PATH = Environment.getExternalStorageDirectory().toString();
        Log.v("LOG_TAG", "PATH: " + PATH);
        File file = new File(PATH);
        file.mkdirs();
        String fileName = image.jpg;
        File outputFile = new File(file, fileName);
        FileOutputStream fos = new FileOutputStream(outputFile);
        InputStream is = c.getInputStream();
        byte[] buffer = new byte[1024];
        int len1 = 0;
        while ((len1 = is.read(buffer)) != -1) {
            fos.write(buffer, 0, len1);
        }
        fos.close();
        is.close();
        // Toast.makeText(this, "Downloaded Successfully", 600).show();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

将权限放入清单文件

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

这会将图像存储在 sd 卡上，然后您可以在应用程序中更快地加载它。

# perl - 无法访问使用 XML 解析器创建的数组元素的哈希

> ID：11117723
> 
> 赞同：0
> 
> 时间：2012-06-20T10:33:23.780
> 
> 标签：perl

我的 XML 解析器如下所示：

```
$VAR1 = {
    'Symmetrix' => {
        'Masking_View' => {
            'View_Info' => {
                'Initiators' => {
                    'user_node_name' => [
                        '5001438001725614',
                        '5001438001725714'
                    ],
                    'user_port_name' => [
                        '5001438001725614',
                        '5001438001725714'
                    ],
                    'wwn' => [
                        '5001438001725614',
                        '5001438001725714'
                    ]
                },
                'port_grpname' => 'PG_1E0_2E0'
            }
        },
        'Symm_Info' => {
            'symid' => '000295900074'
        }
    }
}; 
```

我正在尝试提取`wwn`. 但我无法通过。

```
#!C:\Perl\bin

use strict;
use XML::Simple;
use Data::Dumper;

my $input_file = $ARGV[0];
my $detail_info = XMLin("$input_file");

# Loop through each view_info
$detail_info->{Symmetrix}{Masking_View}{View_Info} = [ $detail_info->{Symmetrix}       {Masking_View}{View_Info} ] if ref ($detail_info->{Symmetrix}{Masking_View}{View_Info})   ne 'ARRAY';
foreach my $view_info  (@{$detail_info-> {Symmetrix}{Masking_View}{View_Info}})
{
      $view_info->{Initiators} = [$view_info->{Initiators}] if ref ($view_info->    {Initiators}) ne 'ARRAY';
foreach my $wwn (keys %{$view_info->{Initiators}})
    {
     my @flags = ();
     push (@flags,"$wwn:$view_info->{Initiators}{$wwn}";
     print @flags;
     #"{$wwn->{wwn}}";
    }
} 
```

我得到如下输出；

```
{ARRAY(0x20c8904)} 
```

我正在寻找`wwn`不同行的单行中的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:47:48.893

您正在生成太多代码来区分 arrayref 值和非参考值。[严格模式](http://p3rl.org/XML%3a%3aSimple#STRICT-MODE)要求您设置`ForceArray`选项，因此您可以确定每个值都是一个数组引用，即使其中只有一个元素。

```
use strictures;
use XML::Simple qw(:strict);
my $detail_info = XMLin($ARGV[0], ForceArray => 1, KeyAttr => []);
# $detail_info is {
#     Symmetrix => [
#         {
#             name      => 'Masking_View',
#             View_Info => [
#                 {
#                     Initiators => [
#                         {
#                             user_node_name => [5001438001725614, 5001438001725714],
#                             user_port_name => [5001438001725614, 5001438001725714],
#                             wwn            => [5001438001725614, 5001438001725714]
#                         }
#                     ],
#                     port_grpname => 'PG_1E0_2E0'
#                 }
#             ]
#         },
#         {
#             name  => 'Symm_Info',
#             symid => '000295900074'
#         }
#     ]
# }
my @flags;
for my $view_info (@{ $detail_info->{Symmetrix}[0]{View_Info} }) {
    for my $initiator (@{ $view_info->{Initiators} }) {
        push @flags, $initiator->{wwn};
    }
}
# @flags is (
#     [
#         5001438001725614,
#         5001438001725714
#     ]
# ) 
```

# python - 如何从外键关系创建 Django 表单？

> ID：11117730
> 
> 赞同：2
> 
> 时间：2012-06-20T10:34:07.933
> 
> 标签：python, django, django-forms

我想创建一个多项选择问题表单，其中外键指向该问题的所有选择都显示为复选框。

从类似的问题中，我收集到子类`ModelForms`化可能是做到这一点的方法。但我不知道如何将特定传递`question_id`给`ModelForm`.

目前，我正在尝试以下操作：

来自`model.py`：

```
class Question(models.Model):
    question = models.CharField(max_length=200)
    creationDate = models.DateTimeField('date published')
    author = models.ForeignKey(User)
    def __unicode__(self):
        return self.question

class Choice(models.Model):
    question = models.ForeignKey(Question)
    choice = models.CharField(max_length=200)
    correct = models.BooleanField()
    def __unicode__(self):
    return self.choice 
```

因此`forms.py`，我尝试创建这样的表单：

```
class QuestionForm(forms.Form):
    def __init__(self, *args, **kwargs):
        super(QuestionForm, self).__init__(*args, **kwargs)
        question_id = kwargs.pop('question')
        self.fields['checkboxes'] = forms.ModelChoiceField(
             queryset = Choice.objects.filter(question = question_id)) 
```

在`views.py`中，我创建了一个`QuestionForm`，传递`question_id`as 构造函数参数。但是我一直`NameError "name 'question_id' is not defined`在 QuestionForm 中得到一个构造 MOdelChoiceField 的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:20:26.853

[文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)谈论 Meta 类：

```
class ArticleForm(ModelForm):
    class Meta:
        model = Article 
```

有帮助吗？

# fpdf - 如何在 FPDF 中使用 WriteHTML 文本换行？

> ID：11117736
> 
> 赞同：0
> 
> 时间：2012-06-20T10:34:21.267
> 
> 标签：fpdf

嗨，我想自动换**行 writehtml** ()... 我试过 $pdf->WriteHTML($text); 但右侧文本显示在 pdf 之外。我想使用 WriteHTML 而不是**Cell**来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:37:37.533

```
<BR> tag in String works. 
```

[http://www.fpdf.de/downloads/addons/41/](http://www.fpdf.de/downloads/addons/41/) , [http://www.fpdf.org/en/script/ex41.pdf](http://www.fpdf.org/en/script/ex41.pdf)

```
$pdf->WriteHTML('You can<BR>add a horizontal rule:<BR><HR>'); 
```

# ajax - Grails在重定向之前调用ajax函数？

> ID：11117738
> 
> 赞同：0
> 
> 时间：2012-06-20T10:34:28.617
> 
> 标签：ajax, grails

我有一个控制器，它具有 ajax 功能和重定向页面的单独操作。我想知道是否可以在单击链接时进行 ajax 调用，但在调用重定向操作之前等待函数完成？

例如

```
<g:link controller="myController" action="myRedirectAction" before="saveData">link</g:link> 
```

编辑添加的代码

**控制器**

```
def ajx_saveServiceGroup = {

    //Code to save data to object
    return
}

def saveConfigToRoLo = {

    //code to save object to DB
    redirect(action:"displayPDFSummary", id:orderId, params: [origSessionId: params.origSessionId, theSession: tempSession])
} 
```

**普惠制**

```
<g:link class="buttonSend" action="saveConfigToRoLo" id="${orderDataInstance.id}"  params="[origSessionId: origSessionId, orderId: orderDataInstance.id, submitToBT: true]" before="ajx_saveServiceGroup">Submit</g:link> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:44:08.880

你可以有一个[remoteLink](http://grails.org/doc/2.0.x/ref/Tags/remoteLink.html)然后 onSuccess 回调你可以将 windows.location 更改为任何你想要的！

详细描述您要达到的目标将帮助我们提供更好的答案。

# jquery - 如何让我的 jquery/js 代码在继续之前等待获取？

> ID：11117744
> 
> 赞同：0
> 
> 时间：2012-06-20T10:35:09.753
> 
> 标签：jquery, get, wait

我有一个在提交时调用的表单验证方法。它执行“get”以验证其中一个字段，如果该字段无效则返回 false：

```
$.get('validate.cfc', 
    {
        method: 'validateUserID',
        userID: $('#userID').val(),
        returnformat: 'plain'
    },
    function(data){
        if($.trim(data) == 0){
            alert('Invalid userID!');
            return false;
        }
    }
); 
```

然后它继续执行一些更简单的验证步骤（没有 ajax 调用）。例如：

```
if(!isDate($('#endDate').val()) && $('#endDate').val() != ""){
    alert("Please enter a valid end date");
    return false;
} 
```

问题是代码在`get`执行时继续。因此，如果用户 ID 无效且结束日期不是日期，则首先显示“请输入有效的结束日期”消息，然后显示“用户 ID 无效！” 信息。如何让我的代码等到获取完成？

（我唯一能想到的就是在 get 之后在函数中的所有其余代码周围放置一个小的 setTimeOut ......这不是最优雅的解决方案。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:39:53.060

将第二部分代码放在成功函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:01:58.043

如果我做对了，那么应该这样做：

```
$.get('validate.cfc', 
{
    method: 'validateUserID',
    userID: $('#userID').val(),
    returnformat: 'plain'
},
function(data){
    if($.trim(data) == 0){
        alert('Invalid userID!');
        return false;
    }else{
            if(!isDate($('#endDate').val()) && $('#endDate').val() != ""){
            alert("Please enter a valid end date");
            return false;

            }else{
                   submit the form
                 }
         }
 }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:39:29.670

有一个异步属性作为您的 jquery ajax 请求的一部分发送，只需将其设置为 false。

虽然他们说在新版本中它已被弃用，但我以前使用过它并且它有效。不确定新语法是什么。. . 或者如果是

见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# facebook - Facebook：如何显示 Facebook 页面的点赞数和点赞按钮来点赞 Facebook 页面？

> ID：11117745
> 
> 赞同：6
> 
> 时间：2012-06-20T10:35:13.500
> 
> 标签：facebook

我在 facebook 中创建了一个“全民教育”页面。在我的网站中，我想提供一个赞按钮来赞这个**页面**而不是**url**，并且还想显示在网站中收到的该页面的赞数以及赞按钮。我使用了“添加这个”，但它显示了 url 的点赞数。你能推荐我任何插件吗？

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T10:43:08.177

从这里生成您的 facebook like 按钮，

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

请提供正确的信息以获得正确的代码，或者您可以按照说明使用下面的代码，只需将**http://www.yoururl.com**替换为需要被喜欢的页面的所需 URL：-

**1\. 在您的页面上包含一次 JavaScript SDK，最好是在开始标记之后。**

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

**将插件代码放置在您希望插件出现在页面上的任何位置。**

```
<div class="fb-like" data-href="http://www.yoururl.com" data-send="true" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:41:27.033

您是否已经尝试通过[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)生成点赞按钮？

它为您提供了以下代码，例如：

```
<iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Fedforall&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=35&amp;appId=225116190942635" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:35px;" allowTransparency="true"></iframe> 
```

# gcc - g ++链接时找不到符号

> ID：11117746
> 
> 赞同：3
> 
> 时间：2012-06-20T10:35:16.190
> 
> 标签：gcc, linker, g++

好的，这可能是非常基本的，但我找不到问题。我正在尝试使用 -lyajl 将我的 C++ 程序与 C 共享库（以 YAJL 命名）链接；链接器似乎找到了它（它不会为此抱怨）但找不到我在代码中使用的符号：

```
$> g++ test.c -lyajl

Undefined symbols for architecture x86_64:
  "yajl_tree_parse(char const*, char*, unsigned long)", referenced from:
      _main in ccEqsAaJ.o
  "yajl_tree_get(yajl_val_s*, char const**, yajl_type)", referenced from:
      _main in ccEqsAaJ.o
  "yajl_tree_free(yajl_val_s*)", referenced from:
      _main in ccEqsAaJ.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
$> 
```

我制作了一个极简的 test.c 文件来隔离行为。好吧，非常奇怪的是 gcc 似乎完全可以使用代码（顺便说一下，test.c 只是 C 代码，这里没有 C++ 功能）：

```
$> gcc test.c -lyajl
$> 
```

gcc 在做什么，g++ 似乎无法做对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:44:55.190

会不会是 libyajl.so 中的符号是 C 链接，但是您的代码（或您正在使用的头文件）没有声明它们`extern "C"`？在这种情况下，将代码编译为 C++ 会导致目标文件中出现[名称损坏的符号](https://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)，这与库中的（C 链接，未损坏的）符号不匹配。

解决方案是在头文件中编写如下内容：

```
#ifdef __cplusplus
// "__cplusplus" is defined whenever it's a C++ compiler,
// not a C compiler, that is doing the compiling.
extern "C" {
#endif

// Exchange "void" with the real return type for these functions
void yajl_tree_parse(char const*, char*, unsigned long);
void yajl_tree_get(yajl_val_s*, char const**, yajl_type);
void yajl_tree_free(yajl_val_s*);

#ifdef __cplusplus
}
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T10:32:04.060

如果`extern "C"`不能修复，试试这个。

我在尝试链接静态库 libyajl_s.a 时遇到了同样的问题。可以通过将 yajl 源代码编译成可执行文件来解决这个问题，但我确实需要静态库。在仔细检查 yajl 源代码后，您会看到源代码正在两个单独的文件夹中查找标题，例如

`#include <api/yajl_tree.h>`
`#include <api/yajl_parse.h>`
`#include "yajl_parser.h"`

链接器似乎将 yajl_tree_parse、yajl_tree_get 和 yajl_tree_free 解析为它们在 yajl_tree.h 中的原型，而不是它们在 yajl_tree.c 中的定义。换句话说 - 它们在生成的库中仍未定义。

解决方案是将所有标头从*api*文件夹移动到*src*文件夹并删除所有对`<api/...>`. 然后链接器正确地选择了 yajl_tree_xxx 函数定义。

# android - Android Intent - 我如何打开文件

> ID：11117749
> 
> 赞同：0
> 
> 时间：2012-06-20T10:35:24.013
> 
> 标签：android, android-intent

要打开图像或声音，我们可以使用以下代码：

```
public String getExt(String filename)
{
    int dotIndex = 0;
    for(int i = filename.length()-1; i >= 0; i--)
    {
        if(filename.charAt(i) == '.')
        {
            dotIndex = i;
            break;
        }
    }

    return filename.substring(dotIndex + 1, filename.length());
}

public String getTypeAction(String s)
{
    int slashIndex = 0;
    for(int i = 0; i < s.length(); i++)
    {
        if(s.charAt(i) == '/')
        {
            slashIndex = i;
            break;
        }
    }
    return s.substring(0, slashIndex);
}
//////
//////

MimeTypeMap mime = MimeTypeMap.getSingleton();
String ext = getExt(file_to_action.getName());
ext = ext.toLowerCase();

String type = mime.getMimeTypeFromExtension(ext);

Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file_to_action), getTypeAction(type) + "/*" );
startActivity(intent); !> 
```

但问题是当我想打开任何不同的文件时，例如：.mhtml、.bak。APK。当我这样做时，我的应用程序崩溃了。我不知道问题出在哪里，我有 .mhtml、.odt extenio 的应用程序，但我的应用程序无法使用此应用程序打开文件。我如何打开所有文件格式或如何检查任何文件格式的可用应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-19T22:33:33.873

你也可以这样做

```
 File file = new File(filepath);

  String extension =   file.getName().substring(file.getName().lastIndexOf(".")+1);

    MimeTypeMap mime = MimeTypeMap.getSingleton();
    String type = mime.getMimeTypeFromExtension(extension);
    Intent intent = new Intent();

    intent.setAction(android.content.Intent.ACTION_VIEW);
  intent.setDataAndType(Uri.fromFile(file), type);
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:26:54.857

这会崩溃，因为您的手机上没有安装用于处理此类数据的应用程序。

您应该使用[`queryIntentActivies(intent,flags)`](http://developer.android.com/reference/android/content/pm/PackageManager.html)from`PackageManager`来查看是否有任何应用程序可以处理您的`Intent`. 如果`List<ResolveInfo>`大小大于 0，则有一些应用程序可以处理您的数据。如果 size 为 0，则应显示 a`Toast`并告知用户无法处理数据，`startActivity()`这种情况下也不要调用。

# php - 正则表达式无法使用 php 处理标签

> ID：11117753
> 
> 赞同：0
> 
> 时间：2012-06-20T10:35:40.457
> 
> 标签：php, regex

我有这个代码：

```
 $subject=<<<EOD
<object height="400" width="500"><param name="allowfullscreen" value="false">
<param name="AllowScriptAccess" value="always">
<param name="movie" value="http://embed.rede.com/player/">
<param name="FlashVars" value="id=97219&style=reube&autostart=false">
<embed src="http://embed.rube" allowfullscreen="false" AllowScriptAccess="always"
flashvars="autostart=false" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" 
type="application/x-shockwave-flash" height="400" width="500" /></object>
EOD; 
```

我正在尝试使用 php regex 获取页面上的所有对象标签：

```
 $pattern="/<object(.*)object>/i";
   preg_match_all($pattern, $subject, $matches ,PREG_PATTERN_ORDER);
   echo "<br/><br/><br/><br/><br/><br/><br/><br/>";
   print_r($matches); 
```

但它什么也没得到。我对括号内的内容不感兴趣..我想获得整个对象标签。注意：我不是在刮。我的输入实际上是一个带有几个标签的字符串（它是用户发布的）。问题是为什么它没有检索到我任何东西？！？

**更新 。**

这就是解决方案的所在：

> s (PCRE_DOTALL) 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。这个修饰符等价于 Perl 的 /s 修饰符。诸如 [^a] 之类的否定类始终匹配换行符，与此修饰符的设置无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:43:18.190

danneth 是正确的，您的初始标签不会被读取。您也有可能没有指出您的正则表达式是多行的，这就是为什么它会在第一行停止而不继续（默认情况下，点都是单行 IIRC）。

```
"/<object.*?>(.+?)<\/object>/is" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:43:26.840

匹配此标签的更好的正则表达式是：

`'~<object[^>]*>(.+)</object>~ismU'`

# javascript - 我可以在 jQuery 过滤器方法上使用多重选择器表达式吗？

> ID：11117762
> 
> 赞同：0
> 
> 时间：2012-06-20T10:36:24.683
> 
> 标签：javascript, jquery

我有一堆要选择的锚标签。但是，如果这些链接的 href 属性等于“#”或“”（一个空字符串），那么我想将它们从选择中排除。

**目前，如果 href不等于 "#"**，我有以下内容会过滤掉选择：

**在这里演示：http:** [//jsfiddle.net/dzrRS/2/](http://jsfiddle.net/dzrRS/2/)

```
jQuery("a[href]").filter("[href!='#']").each(function() {
    jQuery(this).addClass("selected");
 }); 
```

然后，我尝试将其更改为以下内容，以便在 href 也不等于“”时也过滤掉选择。**但是，这不起作用。**

```
jQuery("a[href]").filter("[href!='#'], [href!='']").each(function() {
        jQuery(this).addClass("selected");
     }); 
```

为了实现我的选择，我不得不使用**过滤器方法两次。例如**：

```
jQuery("a[href]").filter("[href!='#']").filter("[href!='']").each(function() {
    jQuery(this).addClass("selected");
 }); 
```

**我真的需要这样做还是可以在一个过滤器方法中使用多个选择器？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:38:38.820

```
jQuery("a[href]").filter("[href!='#'][href!='']").each(function() {
    jQuery(this).addClass("selected");
}); 
```

有关详细信息，请参阅[http://api.jquery.com/multiple-attribute-selector/](http://api.jquery.com/multiple-attribute-selector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:47:17.300

如果您想稍微冗长一些，并且可能更容易理解，您可以使用：

```
jQuery('a[href]').filter(
    function(){
        var href = jQuery(this).attr('href');
        return (href.indexOf('#') > -1 && href.length);
    }).addClass('selected'); 
```

[JS 小提琴演示](http://jsfiddle.net/B8NDG/)。

参考：

*   [`filter()`](http://api.jquery.com/filter/).

# android - 通过 App Store 或 Google Play 下载 Android 应用程序时无法运行 - ANR

> ID：11117763
> 
> 赞同：3
> 
> 时间：2012-06-20T10:36:30.613
> 
> 标签：android, opengl-es, android-ndk, google-play

我有一个基于 OpenGL 的应用程序，当我从 eclipse 编译和构建并将其安装在我的 android 设备上时，它运行良好，但是，当我尝试发布相同的应用程序并通过 Google-Play 安装时，应用程序似乎崩溃了，没有给出一个 ANR 对话。我什至尝试从 USB 安装我签名的 .apk 并且一切正常。但是已发布的 Google-Play 版本不起作用。

有什么方法可以在已发布的 Google-play 版本上添加一些调试输出？

我没有看到任何强制关闭或任何东西，它只是退出，然后是日志。它似乎在我的本机 c++ 函数中崩溃：

```
06-20 12:27:36.859: D/SensorManager(14842): ====>>>>>Num Sensor: 1
06-20 12:27:36.859: D/SensorManager(14842): ====>>>>>Num Sensor: 2
06-20 12:27:36.869: D/SensorManager(14842): ====>>>>>Num Sensor: 3
06-20 12:27:36.869: D/SensorManager(14842): ====>>>>>Num Sensor: 4
06-20 12:27:36.869: D/SensorManager(14842): ====>>>>>Num Sensor: 5
06-20 12:27:36.869: D/SensorManager(14842): ====>>>>>Num Sensor: 6
06-20 12:27:36.869: D/SensorManager(14842): ====>>>>>Num Sensor: 0
06-20 12:27:36.889: I/GLThread(14842): noticed surfaceView surface lost tid=11
06-20 12:27:36.969: I/GLThread(14842): noticed surfaceView surface acquired tid=11
06-20 12:27:36.969: W/EglHelper(14842): start() tid=11
06-20 12:27:38.019: W/dalvikvm(14842): threadid=6: spin on suspend #1 threadid=9 (pcf=0)
06-20 12:27:38.769: W/dalvikvm(14842): threadid=6: spin on suspend #2 threadid=9 (pcf=0)
06-20 12:27:38.769: I/dalvikvm(14842): "Compiler" daemon prio=5 tid=6 VMWAIT
06-20 12:27:38.769: I/dalvikvm(14842):   | group="system" sCount=0 dsCount=0 obj=0x40510ff0 self=0x1a7d20
06-20 12:27:38.769: I/dalvikvm(14842):   | sysTid=14847 nice=0 sched=0/0 cgrp=default handle=619240
06-20 12:27:38.769: I/dalvikvm(14842):   at dalvik.system.NativeStart.run(Native Method)
06-20 12:27:38.769: I/dalvikvm(14842): "Thread-10" prio=5 tid=9 RUNNABLE
06-20 12:27:38.769: I/dalvikvm(14842):   | group="main" sCount=1 dsCount=0 obj=0x4052aa30 self=0x1e8c68
06-20 12:27:38.769: I/dalvikvm(14842):   | sysTid=14850 nice=0 sched=0/0 cgrp=default handle=2001728
06-20 12:27:38.779: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.nativeInit(Native Method)
06-20 12:27:38.779: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.<init>((null):-1)
06-20 12:27:38.779: I/dalvikvm(14842):   at surreal.quake3.engine.CameraVFP.<init>((null):-1)
06-20 12:27:38.779: I/dalvikvm(14842):   at surreal.quake3.engine.c.run((null):-1)
06-20 12:27:39.529: W/dalvikvm(14842): threadid=6: spin on suspend #3 threadid=9 (pcf=0)
06-20 12:27:39.529: I/dalvikvm(14842): "Compiler" daemon prio=5 tid=6 VMWAIT
06-20 12:27:39.529: I/dalvikvm(14842):   | group="system" sCount=0 dsCount=0 obj=0x40510ff0 self=0x1a7d20
06-20 12:27:39.529: I/dalvikvm(14842):   | sysTid=14847 nice=0 sched=0/0 cgrp=default handle=619240
06-20 12:27:39.529: I/dalvikvm(14842):   at dalvik.system.NativeStart.run(Native Method)
06-20 12:27:39.529: I/dalvikvm(14842): "Thread-10" prio=5 tid=9 RUNNABLE
06-20 12:27:39.529: I/dalvikvm(14842):   | group="main" sCount=1 dsCount=0 obj=0x4052aa30 self=0x1e8c68
06-20 12:27:39.529: I/dalvikvm(14842):   | sysTid=14850 nice=0 sched=0/0 cgrp=default handle=2001728
06-20 12:27:39.539: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.nativeInit(Native Method)
06-20 12:27:39.539: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.<init>((null):-1)
06-20 12:27:39.539: I/dalvikvm(14842):   at surreal.quake3.engine.CameraVFP.<init>((null):-1)
06-20 12:27:39.539: I/dalvikvm(14842):   at surreal.quake3.engine.c.run((null):-1)
06-20 12:27:40.299: W/dalvikvm(14842): threadid=6: spin on suspend #4 threadid=9 (pcf=0)
06-20 12:27:40.299: I/dalvikvm(14842): "Compiler" daemon prio=5 tid=6 VMWAIT
06-20 12:27:40.299: I/dalvikvm(14842):   | group="system" sCount=0 dsCount=0 obj=0x40510ff0 self=0x1a7d20
06-20 12:27:40.299: I/dalvikvm(14842):   | sysTid=14847 nice=0 sched=0/0 cgrp=default handle=619240
06-20 12:27:40.299: I/dalvikvm(14842):   at dalvik.system.NativeStart.run(Native Method)
06-20 12:27:40.299: I/dalvikvm(14842): "Thread-10" prio=5 tid=9 RUNNABLE
06-20 12:27:40.299: I/dalvikvm(14842):   | group="main" sCount=1 dsCount=0 obj=0x4052aa30 self=0x1e8c68
06-20 12:27:40.299: I/dalvikvm(14842):   | sysTid=14850 nice=0 sched=0/0 cgrp=default handle=2001728
06-20 12:27:40.519: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.nativeInit(Native Method)
06-20 12:27:40.519: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.<init>((null):-1)
06-20 12:27:40.519: I/dalvikvm(14842):   at surreal.quake3.engine.CameraVFP.<init>((null):-1)
06-20 12:27:40.519: I/dalvikvm(14842):   at surreal.quake3.engine.c.run((null):-1)
06-20 12:27:41.269: W/dalvikvm(14842): threadid=6: spin on suspend #5 threadid=9 (pcf=0)
06-20 12:27:41.269: I/dalvikvm(14842): "Compiler" daemon prio=5 tid=6 VMWAIT
06-20 12:27:41.269: I/dalvikvm(14842):   | group="system" sCount=0 dsCount=0 obj=0x40510ff0 self=0x1a7d20
06-20 12:27:41.269: I/dalvikvm(14842):   | sysTid=14847 nice=0 sched=0/0 cgrp=default handle=619240
06-20 12:27:41.269: I/dalvikvm(14842):   at dalvik.system.NativeStart.run(Native Method)
06-20 12:27:41.269: I/dalvikvm(14842): "Thread-10" prio=5 tid=9 RUNNABLE
06-20 12:27:41.269: I/dalvikvm(14842):   | group="main" sCount=1 dsCount=0 obj=0x4052aa30 self=0x1e8c68
06-20 12:27:41.269: I/dalvikvm(14842):   | sysTid=14850 nice=0 sched=0/0 cgrp=default handle=2001728
06-20 12:27:42.319: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.nativeInit(Native Method)
06-20 12:27:42.319: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.<init>((null):-1)
06-20 12:27:42.319: I/dalvikvm(14842):   at surreal.quake3.engine.CameraVFP.<init>((null):-1)
06-20 12:27:42.319: I/dalvikvm(14842):   at surreal.quake3.engine.c.run((null):-1)
06-20 12:27:43.069: W/dalvikvm(14842): threadid=6: spin on suspend #6 threadid=9 (pcf=0)
06-20 12:27:43.069: I/dalvikvm(14842): "Compiler" daemon prio=5 tid=6 VMWAIT
06-20 12:27:43.069: I/dalvikvm(14842):   | group="system" sCount=0 dsCount=0 obj=0x40510ff0 self=0x1a7d20
06-20 12:27:43.069: I/dalvikvm(14842):   | sysTid=14847 nice=0 sched=0/0 cgrp=default handle=619240
06-20 12:27:43.069: I/dalvikvm(14842):   at dalvik.system.NativeStart.run(Native Method)
06-20 12:27:43.069: I/dalvikvm(14842): "Thread-10" prio=5 tid=9 RUNNABLE
06-20 12:27:43.069: I/dalvikvm(14842):   | group="main" sCount=1 dsCount=0 obj=0x4052aa30 self=0x1e8c68
06-20 12:27:43.069: I/dalvikvm(14842):   | sysTid=14850 nice=0 sched=0/0 cgrp=default handle=2001728
06-20 12:27:43.139: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.nativeInit(Native Method)
06-20 12:27:43.139: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.<init>((null):-1)
06-20 12:27:43.139: I/dalvikvm(14842):   at surreal.quake3.engine.CameraVFP.<init>((null):-1)
06-20 12:27:43.139: I/dalvikvm(14842):   at surreal.quake3.engine.c.run((null):-1)
06-20 12:27:43.899: W/dalvikvm(14842): threadid=6: spin on suspend #7 threadid=9 (pcf=0)
06-20 12:27:43.899: I/dalvikvm(14842): "Compiler" daemon prio=5 tid=6 VMWAIT
06-20 12:27:43.899: I/dalvikvm(14842):   | group="system" sCount=0 dsCount=0 obj=0x40510ff0 self=0x1a7d20
06-20 12:27:43.899: I/dalvikvm(14842):   | sysTid=14847 nice=0 sched=0/0 cgrp=default handle=619240
06-20 12:27:43.899: I/dalvikvm(14842):   at dalvik.system.NativeStart.run(Native Method)
06-20 12:27:43.899: I/dalvikvm(14842): "Thread-10" prio=5 tid=9 RUNNABLE
06-20 12:27:43.899: I/dalvikvm(14842):   | group="main" sCount=1 dsCount=0 obj=0x4052aa30 self=0x1e8c68
06-20 12:27:43.899: I/dalvikvm(14842):   | sysTid=14850 nice=0 sched=0/0 cgrp=default handle=2001728
06-20 12:27:43.899: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.nativeInit(Native Method)
06-20 12:27:43.899: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.<init>((null):-1)
06-20 12:27:43.899: I/dalvikvm(14842):   at surreal.quake3.engine.CameraVFP.<init>((null):-1)
06-20 12:27:43.899: I/dalvikvm(14842):   at surreal.quake3.engine.c.run((null):-1)
06-20 12:27:44.649: W/dalvikvm(14842): threadid=6: spin on suspend #8 threadid=9 (pcf=0)
06-20 12:27:44.649: I/dalvikvm(14842): "Compiler" daemon prio=5 tid=6 VMWAIT
06-20 12:27:44.649: I/dalvikvm(14842):   | group="system" sCount=0 dsCount=0 obj=0x40510ff0 self=0x1a7d20
06-20 12:27:44.649: I/dalvikvm(14842):   | sysTid=14847 nice=0 sched=0/0 cgrp=default handle=619240
06-20 12:27:44.649: I/dalvikvm(14842):   at dalvik.system.NativeStart.run(Native Method)
06-20 12:27:44.649: I/dalvikvm(14842): "Thread-10" prio=5 tid=9 RUNNABLE
06-20 12:27:44.649: I/dalvikvm(14842):   | group="main" sCount=1 dsCount=0 obj=0x4052aa30 self=0x1e8c68
06-20 12:27:44.649: I/dalvikvm(14842):   | sysTid=14850 nice=0 sched=0/0 cgrp=default handle=2001728
06-20 12:27:44.679: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.nativeInit(Native Method)
06-20 12:27:44.679: I/dalvikvm(14842):   at surreal.quake3.engine.Camera9.<init>((null):-1)
06-20 12:27:44.679: I/dalvikvm(14842):   at surreal.quake3.engine.CameraVFP.<init>((null):-1)
06-20 12:27:44.679: I/dalvikvm(14842):   at surreal.quake3.engine.c.run((null):-1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:49:04.553

哇，这是本机 C 代码的一个非常典型的情况，您通常在调试模式下测试应用程序编译并在发布模式下交付。

通常它会改变很多编译器使用的优化标志，并且应用程序对错误的内存指针、NULL 初始化等变得敏感。

我建议：

*   检查用于调试和生产的 android.mk 文件是否具有相同的优化设置。检查优化级别（即 LOCAL_CFLAGS += -O3）

*   获取您在市场上上传的 apk 并从 apk 安装应用程序。通过这种方式，您可以安全地排除市场本身所做的任何更改（如果有）

*   如果使用 OpenGL，一旦应用程序由于 OpenGL 驱动程序崩溃而崩溃，我确实会遇到这种情况。在这种情况下，很难检查问题的根本原因。在我的情况下，这是由于指向脏内存位置的错误 VBO 标识符。就我而言，也没有生成 ANR。

*   检查任何“内存不足”的情况。同样，有时，在 C 中，当您在调试时，变量 init 为零，并且您使用它们来分配内存。如果你没有自己初始化它们，当你去使用它和一个为发布库编译的时候，你会得到很多惊喜。其中之一可能是您的崩溃类型。

*   检查“发布”版本触发的任何其他元素。在我之前的一个应用程序中，应用程序由于 admob（广告）错误而崩溃，该错误在 admob SDK 的测试模式中不存在。这也可以解释你的行为。

我希望这在某种程度上有所帮助。

干杯毛里齐奥

# php - 无法在 PHP 类中使用正确的继承

> ID：11117766
> 
> 赞同：0
> 
> 时间：2012-06-20T10:36:32.673
> 
> 标签：php, sql, inheritance, constructor

我在 PHP 中有这个父类：

```
 class parentClass{
    public $table;

    public function __construct(){
       $this->table = "my_parent_table";
    }

    public function getName($id) {
      $strQuery = "SELECT name FROM $this->table WHERE id=$id";

      $result = mysql_query($strQuery);
      if ($result) {
         $row = mysql_fetch_object($result);
         if ($row) {
             return $row->name;
          } else {
             return false;
          }
      } else {      
         return false;
      }
    } 
 } 
```

而且我还有另一个类继承了这个：

```
 class childClass extends parentClass{
     public $table;

     public function __construct(){
       $this->table = "my_child_table";
     }
 } 
```

然后在另一个文件中我正在做：

```
 $myObj = new childClass();
 $name = $myObj->getName('1'); 
```

现在的问题是 getName 函数有一个空表，所以变量 $this->table 为空，而我希望它是 ""my_child_table" 只要我有一个 childClass 对象。

有谁知道我做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:45:50.970

不确定，但这看起来很棘手：

```
class childClass extends parentClass{
     public $table; 
```

`parentClass`已经定义了 a ，因此在`$table`子类中重新声明它很可能会破坏父类的版本。您必须在此处删除声明。此外，公共可见性并不能很好地封装状态。改为在父级中使用`protected`。

```
 public function __construct()
    { 
```

您应该在`parent::__construct()`此处添加（除非 parent 仅设置`$this->table`，但即使这样添加也很好）

```
 $this->table = "my_child_table";
    }
} 
```

# java - 如何在java中找到两个arraylist之间的区别

> ID：11117767
> 
> 赞同：1
> 
> 时间：2012-06-20T10:36:40.503
> 
> 标签：java, collections, arraylist

我有两个带有多个模型对象的数组列表。我想找出这些数组列表的区别。当我使用字符串而不是模型时，我得到了集合框架中的 removeall 函数的区别。但对于模型对象，它不起作用。请任何人帮助我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T10:38:41.120

在您的自定义对象中实现`equals`和`hashCode`，您可以使用与`String`s 相同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:39:55.037

好吧，该`removeAll`方法是一个通用库方法，它对您的模型类一无所知*。*所以如果你想一想，它怎么知道哪些是“相同的”？

简短的回答是您需要[覆盖类中的`equals()`方法](http://www.javapractices.com/topic/TopicAction.do?Id=17)`Model`，因为这是检查的基础。对于您希望被视为相同的任何一对模型实例，实现应该返回 true - 默认继承行为仅在它们是内存中的相同对象时才返回 true。（和往常一样，当您覆盖时，您`equals()`也[必须](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)[覆盖`hashCode()`](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:47:19.970

`String`class 已经覆盖了`equals`and`hashCode`方法的版本，因此您可以使用`remove()`方法。如果您必须在集合中使用您的类， `(List or Set)`那么您将必须在您的类中覆盖这些方法，否则它将使用这些方法的默认实现。

如果两个对象在逻辑上相等，则意味着它们`hashCode`必须相等并且它们满足 equals()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T05:14:54.927

要比较两个 ArraList，您需要两个比较两个对象。在您的情况下，它是您的模型对象，因此您需要覆盖 equals 方法。试试这个代码 @Override public boolean equals(Object compareObj) { if (this == compareObj) return true;

```
 if (compareObj == null) 
        return false;

    if (!(compareObj instanceof MyModel)) 
        return false;

    MyModel model = (MyModel)compareObj; 

    return this.name.equals(model.name); // Are they equal?
    }

    @Override
    public int hashCode()
    {
    int primeNumber = 31;
    return primeNumber + this.name.hashCode();
        return 0;
    } 
```

# ruby-on-rails - 当使用“未更改”数据执行`update_attribute`时如何避免命中数据库？

> ID：11117770
> 
> 赞同：0
> 
> 时间：2012-06-20T10:36:54.247
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3, performance

我正在使用 Ruby on Rails 3.2.2，我想知道是否可以使用缓存或 IdentityMapping 技术之类的技术，或者至少“保护”数据库不被命中（例如，如果当前对象数据不是t 更改数据库根本不应该被击中）当在同一个控制器操作和视图渲染工作流程中*多次*[`ActiveRecord::Persistence#update_attribute`](http://apidock.com/rails/v3.2.1/ActiveRecord/Persistence/update_attribute)运行该方法时。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:41:49.000

```
object.update_attribute(foo, bar) if object.changed? 
```

欲了解更多信息...

[http://ar.rubyonrails.org/classes/ActiveRecord/Dirty.html](http://ar.rubyonrails.org/classes/ActiveRecord/Dirty.html)

希望这可以帮助，...*

# c# - 使用 Quartz .NET 和 AdoJobStore 调度通用 IJob<>

> ID：11117772
> 
> 赞同：2
> 
> 时间：2012-06-20T10:37:01.953
> 
> 标签：c#, generics, scheduler, quartz.net, jobs

我正在使用 Quartz .NET 开发简单的调度程序。我想 Quartz 将所有作业和触发器保存在数据库中，所以我设置了 AdoJobStore 并且**使用“正常”作业它可以正常工作。**

现在，我在从数据库通用作业中反序列化时遇到问题。我有课：

```
class DefaultJob<TEventType, TArgsType> : IJob{
 public void Execute(IJobExecutionContext context)
 {
         //do sth
 }
} 
```

使用 RamJobStore 和 DefaultJob<,> 一切正常 - 调度和运行工作。

使用 AdoJobStore 和 DefaultJob<,> 我可以安排，Quartz 将其保存到数据库中（我可以通过 Management Studio 看到它），但是当它尝试从数据库中恢复它时，我得到：

```
A first chance exception of type 'System.ArgumentException' occurred in mscorlib.dll
A first chance exception of type 'Quartz.JobPersistenceException' occurred in Quartz.dll
A first chance exception of type 'Quartz.JobPersistenceException' occurred in Quartz.dll 
```

我调试了 JobFactory，根本没有调用方法 NewJob。在它之前发生了一些错误。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:48:36.423

我在官方 Quartz 邮件列表上转发 Marko Lahma 的答案：

> Quartz.NET 不支持泛型作业类型，我认为它不应该，因为它可以通过具有泛型定义的基类来轻松表达，并且您的每个作业都只是继承这个类并因此定义泛型类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-25T21:36:23.937

好的。这个问题很老了。并且似乎需要用新数据进行更新。现在，Quartz.NET 支持通用作业。就这样。问题中的示例现在可以完美运行。

```
class DefaultJob<TEventType, TArgsType> : IJob {
    public Task Execute(IJobExecutionContext context)
    { }
} 
```

# asp.net-mvc - ASP MVC 多个下拉列表搜索表单

> ID：11117778
> 
> 赞同：2
> 
> 时间：2012-06-20T10:37:14.407
> 
> 标签：asp.net-mvc, model-view-controller, dynamic, html.dropdownlistfor

我正在尝试使用具有多个下拉列表的表单执行搜索以限制搜索值，下拉列表通过视图模型填充。

视图模型：PesquisaHomeViewModel.cs

```
using System; 
using System.Collections.Generic; 
using System.Linq;
using System.Web; 
using MinisPT.Models;

namespace MinisPT.ViewModels {
     public class PesquisaHomeViewModel
     {
        public List<Marca> Marcas { get; set; }       
         public List<Modelo> Modelos { get; set; }
         public List<EstadoProduto> EstadosProdutos { get; set; }
     } 
} 
```

这是具有以下形式的视图的一部分：Home/Index.cshtml

```
@using (Html.BeginForm("Index", "ResultadosPesquisa", FormMethod.Get))
            {
                @Html.ValidationSummary(true)                 
                <div id="coluna1">
                <div class="coluna1_titulo">Marca</div>
                <div class="coluna1_DropDownList">
                    @Html.DropDownListFor(m => m.Marcas, new SelectList(Model.Marcas, "MarcaNome", "MarcaNome"), String.Empty)
                </div>
                <div class="coluna1_titulo">Modelo</div>
                <div class="coluna1_DropDownList">
                    @Html.DropDownListFor(md => md.Modelos, new SelectList(Model.Modelos, "ModeloNome", "ModeloNome"), String.Empty)
                </div>
                <div class="coluna1_titulo">Estado</div>
                <div class="coluna1_DropDownList">
                    @Html.DropDownListFor(e => e.EstadosProdutos, new SelectList(Model.EstadosProdutos, "EstadoProdutoTipo", "EstadoProdutoTipo"), String.Empty)
                </div>
                <span>
                    <input type="submit" value="Pesquisar" class="botaoPesquisa" />
                </span>                
           } 
```

正如您通过提交所看到的，我调用“ResultadosPesquisa”控制器的索引操作，在该控制器中，我使用表单的参数并尝试对名为“Anuncios”的模型进行搜索（这意味着“广告”在我的语言）

结果PesquisaController.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Data;
using System.Data.Entity;
using MinisPT.Models;
using MinisPT.ViewModels;

namespace MinisPT.Controllers
{
    public class ResultadosPesquisaController : Controller
    {
        MinisPTEntities db = new MinisPTEntities();

        //
        // GET: /ResultadosPesquisa/
        public ActionResult Index(string Marcas, string Modelos, string EstadosProdutos)
        {
            var query = from m in db.Anuncios.Include(a => a.Marca).Include(a => a.Modelo)
                        where m.Marca.MarcaNome == Marcas
                        where m.Modelo.ModeloNome == Modelos
                        where m.EstadoProduto.EstadoProdutoTipo == EstadosProdutos
                        select m;

            return View(query.ToList());
        }
    }
} 
```

我应该稍后显示结果，它调用视图 ResultadosPesquisa/Index.cshtml：

```
@model IEnumerable<MinisPT.Models.Anuncio>

... (html stuff in here) 

<table>
    <tr>
        <th>
            Marca
        </th>
        <th>
            Modelo
        </th>
        <th>
            Estado
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(a => item.Marca.MarcaNome)
        </td>
        <td>
            @Html.DisplayFor(a => item.Modelo.ModeloNome)
        </td>
        <td>
            @Html.DisplayFor(a => item.EstadoProduto.EstadoProdutoTipo)
        </td>
    </tr>
}

</table> 
```

**我的问题是 **如果我将值放在所有 3 个下拉列表中，则 ResultadosPesquisaController 上的查询只会让我得到结果，如果我只在其中一个下拉列表中选择一个值，则不会返回任何值，但我想让所有下拉列表都是可选的，我怎么能达到这个？

我想到了一种可能的方法，使用 LINQ 动态查询库，

[使用 scott gu 的 LINQ 动态查询库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

这样我就可以在第一个索引操作上构造查询，使用一堆 if 语句（不是很优雅）并重定向到第二个操作，在该操作中我将使用带有动态 LINQ 的预构建查询并执行它。

如果有更优雅的方式来完成这个，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:40:37.473

您将 Linq 结构化的方式就像`&&`操作一样堆叠。您需要将其更改为：

```
var query = from m in db.Anuncios.Include(a => a.Marca).Include(a => a.Modelo)
            where m.Marca.MarcaNome == Marcas ||
                m.Modelo.ModeloNome == Modelos ||
                m.EstadoProduto.EstadoProdutoTipo == EstadosProdutos
            select m 
```

这应该返回任何选择的结果。

**编辑：**
根据您在下面的评论，您最好使用扩展方法来堆叠它们。由于这将涉及数据上下文（我的假设基于`db.Anuncios`），因此这些调用将被推迟到实际使用时。

```
var query = from m in db.Anuncios.Include(a => a.Marca).Include(a => a.Modelo)
            select m;

if (!string.IsNullOrWhitespace(Marcas))
    query = query.Where(m => m.Marca.MarcaNome == Marcas);

if (!string.IsNullOrWhitespace(Modelos))
    query = query.Where(m => m.Modelo.ModeloNome == Modelos);

if (!string.IsNullOrWhitespace(EstadoProdutoTipo))
    query = query.Where(m => m.EstadoProduto.EstadoProdutoTipo == EstadosProdutos); 
```

无论 m 是什么，最终结果仍然是 an `IQueryable<T>`，但是因为 where 子句在实际调用之前不会被添加。这可以在您使用的查询语法中完成，但它变得非常丑陋和复杂。这看起来更干净，更容易维护 IMO。

# c++ - 将指针作为参数传递给函数

> ID：11117781
> 
> 赞同：2
> 
> 时间：2012-06-20T10:37:25.323
> 
> 标签：c++, pointers

我有以下代码：

```
#include<iostream>
using namespace std;

typedef void (*HandlerFunc)(int, int);
HandlerFunc  mr;
HandlerFunc mm()
{
    return mr;
}

void sample(int a, int b, HandlerFunc func)
{
}

void main()
{
     sample(1, 2, mm);
} 
```

在这里，我试图将一个类型的函数传递`HandlerFunc`给另一个函数，但出现错误：

> 错误：*：无法将参数 3 从转换`'void (__cdecl *(void))(int,int)'`为`'void (__cdecl *)(int,int)'`

如果我键入 cast`sample(1, 2, (HandlerFunc)mm);`一切正常。
谁能告诉解决错误问题的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:38:42.380

```
HandlerFunc mm()
{...} 
```

应该：

```
void mm(int, int)
{...} 
```

您的函数`sample()`将指向函数（*you `typedef`d as`HandlerFunc`*）的指针作为最后一个参数。作为此参数传递的函数的地址必须与它所指向的函数的类型相匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T10:40:12.310

不，不，你混淆了类型。`mm`是一个返回适当类型的函数指针的函数。然而，`mm`它本身*不是*合适的类型——它不接受任何参数。

您应该传入`mr`main，或者通过`mm()`（即-调用mm并传递​​返回值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:40:03.510

main 中的代码应该是：

```
sample(1,2,mm()); 
```

由于 mm 返回一个 HandlerFunc，它本身不是一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:29:38.660

```
HandlerFunc mm() 
{     
   return mr; 
} 
```

这意味着`nm`函数不会接收任何 agruments( `void`)，它会返回一个指向函数类型的指针`void (*)(int, int)`

所以只有你得到那个错误。

# django - 将 OO 或 xslt doc 从 django 推送到 google 驱动器

> ID：11117787
> 
> 赞同：0
> 
> 时间：2012-06-20T10:37:57.197
> 
> 标签：django, google-docs, google-drive-api

我使用[pod](http://appyframework.org/pod.html)从 django 生成报告。一个非常聪明的解决方案，我喜欢它。

但是 pod 解决方案需要在客户端桌面（或服务器端）上安装 Open Office（或 LibreOffice）。

为了避免使用 Open Office 软件，我希望将报告作为 django 应用程序（或 python ...）的新（或现有）文档发送到谷歌驱动器。

有人会分享这类问题的专业知识吗？否则，从 django 应用程序发布谷歌文档的步骤是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:05:08.360

If your Python app can produce a csv file, you can upload it to Google Docs using the Documents List API and convert it into a Spreadsheet:

[https://developers.google.com/google-apps/documents-list/#creating_or_uploading_spreadsheets](https://developers.google.com/google-apps/documents-list/#creating_or_uploading_spreadsheets)

Many other file formats can be imported, please check the docs for more details.

# php - 在查询中创建空间以导出 csv 文件

> ID：11117791
> 
> 赞同：0
> 
> 时间：2012-06-20T10:38:21.593
> 
> 标签：php, mysql, export-to-csv

> **可能重复：**
> [将 MySQL 查询转换为 CSV 的 PHP 代码](https://stackoverflow.com/questions/125113/php-code-to-convert-a-mysql-query-to-csv)

我正在尝试导出一个 csv 文件，我需要在打印的数据库字段之间创建空间，因为所有内容都是一个简单的行。

我需要做的也是在标题中打印字段的名称。这是我拥有的代码。首先，我需要导出 csv 选项卡中的字段或字段之间的空格...

```
if ( !$result1 ) { echo mysql_error(); }
while ($row = mysql_fetch_array($result1)) {
    $last = end($row);
    foreach ($row as $item) {
        fwrite($fh, $item);
        if ($item != $last)
            fwrite($fh, "\t");
    }
    fwrite($fh, "\n");
}
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T11:25:48.547

您可能会考虑使用[fputcsv](http://de3.php.net/manual/en/function.fputcsv.php)而不是 fwrite 的这种麻烦。语法是这样的：

```
int fputcsv ( resource $handle , array $fields [, string $delimiter = ',' [, string $enclosure = '"' ]] ) 
```

对于您的代码，它看起来像：

```
$fh = fopen('file.csv', 'w');
if ( !$result1 ) { echo mysql_error(); }
while ($row = mysql_fetch_array($result1)) {
    fputcsv($fh, $result1, ',');
}
fclose($fh); 
```

`$enclosure`如果您需要对字符串值使用其他引号（双引号是标准的），则可以使用可选参数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T10:53:34.520

在 foreach

fwrite($fh, $item.',');中试试这个

看看 [http://net.tutsplus.com/tutorials/php/how-to-generate-a-complete-excel-spreadsheet-from-mysql/](http://net.tutsplus.com/tutorials/php/how-to-generate-a-complete-excel-spreadsheet-from-mysql/)

# github - 我可以创建一个与已存在但已删除的 github 存储库名称相同的 github 存储库吗？

> ID：11117792
> 
> 赞同：27
> 
> 时间：2012-06-20T10:38:23.140
> 
> 标签：github

通过 github Web 界面，我创建了一个新的存储库。我忘记在创建时选择一些选项，并认为我会删除新的空存储库并重新开始。

我删除了存储库，但现在无法创建与已删除存储库同名的新存储库。我尝试时收到“名称已存在于此帐户”错误。

我不知道这是否是永久性问题（即，我永远无法创建与已删除的存储库名称相同的新存储库）或只是临时问题，可能是由于某些信息被缓存而稍后将被清除。

我可以创建一个与已存在但已删除的 github 存储库名称相同的 github 存储库吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-20T10:40:45.757

您当然应该能够创建一个具有相同名称的新文件。我很确定我以前做过。

如果我是你，我会等 5/10 分钟再试一次。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-13T18:57:54.920

我面临这个困境。但后来我注意到我可以重命名一个 repo，然后用旧名称创建一个新 repo，如果用旧名称创建一个问题，只需再次重命名旧名称......所以不需要删除 repo ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-16T12:35:44.670

我在使用 Web 界面时遇到了类似的问题，新的存储库创建页面显示存储库名称可用，但我无法单击“创建存储库”按钮。我打开了开发者工具并删除`disabled`了按钮上的属性。再次单击，它就起作用了；本来可以尝试稍等一下，然后按 Ctrl+刷新页面，但我不想丢失存储库设置...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:56:37.443

如果您在客户端界面（即 Windows 客户端）中遇到此问题，您可以刷新您的 repo 列表。一旦有问题的 repo 从列表中消失，您应该可以毫无问题地创建具有相同名称的新 repo。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-03-19T06:15:13.783

我想出了这个。创建存储库时，请确保“发布到 GitHub”未选中。问题是它试图在 GitHub 上创建一个与您之前在那里创建的名称相同的新存储库。

你还应该考虑进入你的 GitHub 控制面板，如果旧的 repo 没有任何有价值的信息，则删除它。

# ios - ios中的音频流持续时间

> ID：11117795
> 
> 赞同：1
> 
> 时间：2012-06-20T10:38:30.193
> 
> 标签：ios, audio

我正在使用 AVAudioPlayer 播放音频流（将流下载到缓冲区并播放）。
我需要知道如何通过 AVAudioPlayer 类禁用读取一些 id3 标签，因为我需要加载数据的持续时间，而不是所有文件的持续时间。或者也许有人知道如何获取加载数据的持续时间。
PS。播放时缓冲区填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:54:25.673

尝试以下代码以获取持续时间。

```
// get the URL of the sound file to be played
    AVURLAsset* audioAsset = [AVURLAsset URLAssetWithURL:[NSURL fileURLWithPath:audioPath ] options:nil];
    // get the duration of sound to be played in seconds 
    CMTime audioDuration = audioAsset.duration; 
```

可能需要以下导入：

1) `#import <AVFoundation/AVFoundation.h>`

2) CMTime 的 CoreMedia 框架

# iphone - 目标C中一组点算法的凸包

> ID：11117796
> 
> 赞同：-1
> 
> 时间：2012-06-20T10:38:35.020
> 
> 标签：iphone, objective-c, google-maps-api-3

如标题所示，我正在尝试找到准备使用的实现，因此我将能够绘制正确的 PolygonView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T14:12:48.800

看起来您是 Stack Overflow 的新手，所以这里有一个很好的 C++ 版本的[2D Convex Hull](http://softsurfer.com/Archive/algorithm_0109/algorithm_0109.htm)算法。在objective-c中应该很容易使用。

正如您从收到的评论中看到的那样，Stack Overflow 上的方法实际上是为了专注于特定的编程问题。提出问题的最佳方式是：我正在尝试做 XYZ，我尝试过 A、B 和 C，但没有成功。我能得到一些帮助吗？

像你这样的问题，更像是一个一般性的询问，更适合[Programmers](https://softwareengineering.stackexchange.com/)，但我自己也犯了同样的错误，尤其是当我刚接触 Stack Overflow 时。

希望这个答案对你有帮助-

# nunit - 无法使用 Nant 运行 nunit 测试

> ID：11117804
> 
> 赞同：1
> 
> 时间：2012-06-20T10:39:00.060
> 
> 标签：nunit, nant

我正在尝试使用 nant 启动 nunit ui 测试并得到错误：

> 构建文件：file:///c:/UItests/nant.build 目标框架：Microsoft .NET Framework 4.0 指定目标：构建
> 
> 建造：
> 
> [nunit2] 2012/06/20/13:29:52：设置方法中的异常：CurrentThread 需要将其 ApartmentState 设置为 ApartmentState.STA 才能使 Internet Explorer 自动化。[nunit2] 2012/06/20/13:29:52：设置方法中的异常：CurrentThread 需要将其 ApartmentState 设置为 ApartmentState.STA 才能使 Internet Explorer 自动化。[nunit2] 2012/06/20/13:29:52：设置方法中的异常：CurrentThread 需要将其 ApartmentState 设置为 ApartmentState.STA 才能使 Internet Explorer 自动化。[nunit2] 2012/06/20/13:29:52：设置方法中的异常：CurrentThread 需要将其 ApartmentState 设置为 ApartmentState.STA 才能使 Internet Explorer 自动化。
> [nunit2] 2012/06/20/13:29:52：设置方法中的异常：CurrentThread 需要将其 ApartmentState 设置为 ApartmentState.STA 才能使 Internet Explorer 自动化。

我尝试使用我的项目附带的 App.config，如下所示：

```
<test assemblyname="UITests.dll" appconfig="UITests.dll.config" /> 
```

而且我还手动创建了配置文件并将其放入包含 test 和 nunit 程序集的文件夹中。但没有任何帮助。在配置文件中我有：

```
 <add key="ApartmentState" value="STA" /> 
```

这是 nant.build 文件：

```
 <?xml version="1.0"?>
 <project name="UITests" default="build">
 <property name="build.dir" value="" />
 <target name="build">
  <nunit2>
<formatter type="Plain" />
<test assemblyname="${build.dir}UITests.dll" appconfig="UITests.dll.config" />
  </nunit2>
</target>
</project> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:01:07.730

一种可能且简单的解决方案：

设置这个：

```
[assembly: RequiresSTA] 
```

在 AssemblyInfo.cs 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:52:01.617

Nant 能够运行测试，但 TestSetup 正在执行未正确配置的操作。可能尝试编写和运行一个更简单的测试，例如`Assert.That( 10+1, Is.Equals(11));`并运行它。如果它有效，那么我认为应该发布问题，并详细说明您正在测试什么以及如何测试

# ruby-on-rails - 将带有数组的Ruby字符串转换为数组并对其进行迭代

> ID：11117807
> 
> 赞同：0
> 
> 时间：2012-06-20T10:39:19.220
> 
> 标签：ruby-on-rails, ruby

我想将以下字符串转换为数组/嵌套数组并遍历它，以便我可以使用其中的值。

```
 str = "[[{"one": "1"}],[{"two": "2"}],[{"three": "3"}]]"

// I want to use value inside the {} brace 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:41:36.100

即 JSON(*)，可以解析为 JSON。

```
require 'json'
data = JSON.parse(str) 
```

然后你可以使用通常的`Array#each`或`Hash#each`迭代器。

*) 或者至少它会是 JSON，如果它不是语法错误的话。双引号内不能有未转义的双引号。

# javascript - 如何在jquery ui自动完成自定义数据中移除焦点并显示

> ID：11117821
> 
> 赞同：0
> 
> 时间：2012-06-20T10:40:13.857
> 
> 标签：javascript, jquery-ui, jqgrid

我已经实现了 jquery ui 自动完成，如示例中所示：[使用自定义数据和显示自动完成](http://jqueryui.com/demos/autocomplete/#custom-data)
我的焦点有一些问题。用户继续用鼠标在菜单上输入框，所以我想移除焦点。问题是，一旦我评论 **//focus:** 当用户选择一个项目时，它不会触发 select 事件，而只是 changeEvent 并且 ui 项目为空，所以我不知道谁是选定的项目。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:07:28.387

只需评论焦点：部分，但如果您有一个 .blur 或 .change 的处理程序，请确保没有处理程序 jquery ui 自动完成不会应用所选值，并且不会触发选择处理程序

# git - Git Push错误：拒绝更新签出的分支

> ID：11117823
> 
> 赞同：225
> 
> 时间：2012-06-20T10:40:18.267
> 
> 标签：git, git-push

我已经解决了一些合并冲突，提交然后尝试推送我的更改并收到以下错误：

```
c:\Program Files (x86)\Git\bin\git.exe push --recurse-submodules=check "origin" master:master
Done
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
To C:/Development/GIT_Repo/Project
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to 'C:/Development/GIT_Repo/Project' 
```

有谁知道可能导致此错误的原因？

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2012-06-20T10:47:46.270

原因：您正在推送到非裸存储库

有两种类型的存储库：[裸存储库和非裸存储库](https://stackoverflow.com/q/5540883/3803682)

裸存储库没有工作副本，您可以推送到它们。这些是您在 Github 中获得的存储库类型！如果要创建裸存储库，可以使用

```
git init --bare 
```

~~所以，简而言之，**你不能推送到非裸存储库**~~（编辑：好吧，您不能推送到存储库的当前签出分支。对于裸存储库，您可以推送到任何分支，因为没有签出。虽然可能，但推送到非裸存储库并不常见） . 您可以做的是从其他存储库中获取和合并。这就是`pull request`你可以在 Github 中看到的工作方式。你要求他们从你身边拉开，而不是强行推入他们。

* * *

**更新**：感谢 VonC 指出这一点，在最新的 git 版本（当前为 2.3.0）中，[推送到非裸存储库的签出分支是可能的](https://stackoverflow.com/a/28262104/912144)。尽管如此，您仍然不能推送到*脏*的工作树，这无论如何都不是安全的操作。

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2014-06-20T21:11:44.817

我解决了这个问题，首先验证遥控器没有检查任何东西（它真的不应该），然后让它裸露：

```
$ git config --bool core.bare true 
```

之后 git push 工作正常。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2013-02-14T15:35:27.443

# 概括

您不能推送到存储库的已签出分支，因为它会以一种很可能以**丢失数据和历史记录**的方式与该存储库的用户混淆。但是您可以推送到同一存储库的任何其他分支。

由于裸存储库从未检出任何分支，因此您始终可以推送到裸存储库的任何分支。

# 问题的尸检

当一个分支被签出时，提交将添加一个以当前分支的头部作为其父分支的新提交，并将分支的头部移动到该新提交。

所以

```
A ← B
    ↑
[HEAD,branch1] 
```

变成

```
A ← B ← C
        ↑
    [HEAD,branch1] 
```

但是如果有人可以在中间推送到那个分支，用户就会进入 git 所说的**分离头**模式：

```
A ← B ← X
    ↑   ↑
[HEAD] [branch1] 
```

现在用户不再在 branch1 中，没有明确要求签出另一个分支。更糟糕的是，用户现在**在任何分支之外**，任何新的提交都只是**悬空**：

```
 [HEAD]
        ↓
        C
      ↙
A ← B ← X
        ↑
       [branch1] 
```

假设，如果此时用户签出另一个分支，那么这个悬空提交对于 Git 的**垃圾收集器**来说是公平的游戏。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2016-03-12T02:17:10.713

对我来说，以下是诀窍：

```
git config --global receive.denyCurrentBranch updateInstead 
```

我几乎全部设置了驱动器 F:，以使用 Git 在我的 Windows 10 台式机和我的 Windows 10 笔记本电脑之间同步。我最终在两台机器上运行了上述命令。

首先我在网络上共享了桌面的F盘。然后我可以通过运行在我的笔记本电脑上克隆它：

```
F:
git clone 'file://///DESKTOP-PC/f' 
```

不幸的是，所有文件都在我的笔记本电脑上的“F:\f”下结束，而不是直接在 F:\ 下。但我能够手动剪切和粘贴它们。之后 Git 仍然在新位置工作。

然后我尝试对笔记本电脑上的文件进行一些更改，提交它们，然后将它们推回桌面。直到我运行上面提到的 git config 命令，这才起作用。

请注意，我在两台机器上都从 Windows PowerShell 中运行了所有这些命令。

更新：在某些情况下，我仍然在推动更改时遇到问题。我终于开始拉动更改，而是在我想拉动最新提交的计算机上运行以下命令：

```
git pull --all --prune 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-05-20T03:09:24.577

cd 进入您在远程机器上推入的 repo/目录并输入

```
$ git config core.bare true 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-07-31T10:34:35.120

### TLDR

1.  再次拉和推：`git pull &&& git push`。
2.  还是有问题？推入不同的分支：`git push origin master:foo`并将其合并到远程仓库。
3.  `-f`或者通过添加(`denyCurrentBranch`需要忽略) 来强制推送。

* * *

基本上，该错误意味着您的存储库与远程代码不是最新的（其索引和工作树与您推送的内容不一致）。

通常，您应该`pull`首先获取最近的更改，`push`然后再次获取。

如果没有帮助，请尝试推入不同的分支，例如：

```
git push origin master:foo 
```

然后将远程存储库上的这个分支与 master 合并。

如果您有意更改了一些过去的提交，`git rebase`并且您想用您的更改覆盖 repo，您​​可能希望通过添加`-f`/`--force`参数来强制推送（如果您没有这样做，则不推荐`rebase`）。如果仍然无法工作，您需要按照 git 消息的建议通过以下方式设置`receive.denyCurrentBranch`为远程：`ignore`

```
git config receive.denyCurrentBranch ignore 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2014-12-18T17:11:45.747

由于已经有一个现有的存储库，正在运行

```
git config --bool core.bare true 
```

在远程存储库上就足够了

**来自 core.bare 文档**

如果为真（bare = true），则假定存储库是裸露的，没有关联的工作目录。如果是这种情况，许多需要工作目录的命令将被禁用，例如 git-add 或 git-merge（但您将能够推送到它）。

创建存储库时，git-clone 或 git-init 会自动猜测此设置。默认情况下，假设以“/.git”结尾的存储库不是裸露的（bare = false），而所有其他存储库都假定是裸露的（bare = true）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-06-23T05:25:14.427

也许您的远程仓库位于您要推送的分支中。您可以尝试在远程机器中检出另一个分支。我这样做了，然后这些错误消失了，我将成功推送到我的远程仓库。请注意，我使用 ssh 来连接我自己的服务器，而不是 github.com。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-10-02T18:17:51.443

正如其他答案中提到的，您不能推送到已[签出的](https://www.atlassian.com/git/tutorials/using-branches/git-checkout)分支。让我们从那里开始。

从远程服务器，让我们将远程存储库签出到一个临时分支。

```
git checkout -b temp 
```

现在从我们的本地存储库，我们可以推送到主分支。

```
git push 
```

但这不是一个永久的解决方案。未来的推动将带来同样的问题。为了一劳永逸地解决这个问题，您需要将远程存储库变成裸存储库。从远程服务器，输入：

```
git config core.bare true 
```

现在您可以毫无问题地推送到遥控器。

将来，使用如下`--bare`选项创建远程存储库：

```
git init --bare 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-16T08:20:49.840

我有这个错误是因为 git repo （意外地）在同一个位置初始化了两次：首先作为非裸 repo，不久之后作为裸 repo。因为 .git 文件夹仍然存在，所以 git 假定存储库是非裸的。删除 .git 文件夹和工作目录数据解决了这个问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-11T08:00:02.443

这对我有用

1.  `git config --global receive.denyCurrentBranch updateInstead`

2.  `git push origin master`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-31T16:13:55.730

当我在阅读 progit 时玩耍时出现此错误。我创建了一个本地存储库，然后在同一文件系统上的另一个存储库中获取它，进行了编辑并尝试推送。在阅读了 NowhereMan 的答案后，一个快速的解决方法是转到“远程”目录并临时签出另一个提交，从我进行更改的目录中推送，然后返回并将头放回 master。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-26T06:29:31.470

我有同样的问题并尝试这样做：

1.  SSH 到 gitlab 服务器（远程服务器机器不是你的个人机器）并发现 [core]:bare value is false in yourRepo/.git/config

[![在此处输入图像描述](../Images/9ab8437da6de6f595e30655841942222.png)](https://i.stack.imgur.com/AOjG3.png)

2\. vim config 并将其编辑为 true 现在，很好。我可以推送到 master。

# django-models - 为什么 Django 不让我做 email=models.ManyToManyField(models.EmailField)？

> ID：11117825
> 
> 赞同：0
> 
> 时间：2012-06-20T10:40:32.700
> 
> 标签：django-models

我的意思是，如果我有一个可以有多个电子邮件的模型联系人是我重用模型并重用 EmailField 的逻辑，我会这样做：

类联系人（models.Model）：
           电子邮件=models.ManyToManyField（models.EmailField）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:45:35.283

关系字段只能连接到其他模型。创建一个单独的模型来保存电子邮件地址。

# javascript - jQuery-UI 日期选择器不起作用

> ID：11117829
> 
> 赞同：0
> 
> 时间：2012-06-20T10:41:02.450
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我试图动态添加 jquery UI 日期选择器。即当我单击一个按钮时，它将创建一个带有日历选项的文本字段...由于我动态创建日历，日历不会打开。我的代码是

```
$("#button").click(function()
{
"<table id='submitReportTable' class = 'OGTable"
                                                + tab_counter
                                                + "'><tr><td><b>PortFolio</b></td><td><select id='portfolio"
                                                + tab_counter
                                                + "'></select></td></tr><tr><td><b>From Date</b></td><td> <input type=text id='datepicker' class='fromDate"
                                                + tab_counter
                                                + "' /></td></tr><tr><td><b>End Date</b></td><td> <input type=text id='datepicker' class='endDate"
                                                + tab_counter
                                                + "' /></td></tr><tr><td><b>Frequncy</b></td><td> <select id='frequency"
                                                + tab_counter
                                                + "'><option>Yearly</option><option>Quarterly</option><option>Monthly</option><option>Weekly</option><option>Daily</option></select></td></tr><tr><td> <input type=button id=submitButton name=submit value='Submit' class='submit"
                                                + tab_counter
                                                + "'></input></td></tr></table>"}); 
```

这个不是在按钮点击时创建的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:49:44.380

那甚至不是有效的 jQuery 代码。你不能像那样混合 jQuery 和 html。您的代码没有任何意义：

```
$("#button").click(function()
</td></tr><tr><td><b>From Date</b></td><td> 
```

您的按钮单击事件处理程序必须是有效的 jQuery 而不是 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:47:23.353

我很确定您添加 id 为“datepicker”的输入文本不会这样做。尝试按照文档中的说明在新元素上调用 .datepicker()：http: [//jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:50:44.860

我已经创建了一个你想要在这里实现的（我认为）的工作小提琴：

[http://jsfiddle.net/Bk9Ut/](http://jsfiddle.net/Bk9Ut/)

单击按钮时，它会创建一个新的输入元素，然后在新元素上运行 datepicker 命令。请参阅此处的文档：http: [//jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)了解日期选择器信息和初始化选项。

# unit-testing - RPG（或其他 ILE 语言）中的自动化测试

> ID：11117837
> 
> 赞同：7
> 
> 时间：2012-06-20T10:41:26.260
> 
> 标签：unit-testing, integration-testing, ibm-midrange, automated-tests, rpgle

我们这里有很多 RPG 程序，并且我们进行了很多自动化测试，但是我们还不能很好地将这两者结合起来。有没有对 RPG 程序或任何其他 ILE 程序进行自动化测试的好方法？

我知道一个名为[RPGUnit](http://rpgunit.sourceforge.net/)的项目，但它的最后一次更新是在 2007 年。但是，它似乎仍在使用，因为[RPG Next Gen](http://www.rpgnextgen.com/)目前正在投入一些工作来包含它。

你对这些有什么经验？还有什么我想念的东西，比如谷歌找不到一些很棒的软件工具吗？

我对单元测试以及完整项目的集成测试很感兴趣。任何与[jenkins](http://jenkins-ci.org/)等工具集成的东西都是受欢迎的。如果它涉及 IBM 的 Rational Developer 或 System i Navigator，那也没关系。

我们正处于为我们的 RPG 开发过程创建新测试计划的早期阶段，我不希望它从一开始就朝着错误的方向前进。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T14:34:09.237

您可能已经知道主题“测试”的范围有多大。IBM 有一个名为 Rational Function Tester 的产品（我没有使用过）[http://www-01.ibm.com/software/awdtools/tester/functional/](http://www-01.ibm.com/software/awdtools/tester/functional/) 我自己使用 RPGUnit。不，它最近没有更新，但它仍然具有测试子过程所需的所有部分，就像测试 Java 方法一样。

坦率地说，这很容易。困难的部分是创建一个测试数据库并保持它足够最新以代表生产数据库。罗丹有一些数据库工具，但我没有这些工具的预算，所以我或多或少地手动推出了自己的工具。我在 CL 程序中使用许多 SQL 语句来提取生产数据，这样我就可以保持参照完整性。然后我使用更多的 SQL 来添加我的特殊测试用例——生产数据中不存在但需要测试的那些关系。然后我制作一个完整的测试数据库副本作为参考点。然后我运行我的测试用例，这将更新测试数据库。我编写了一个自制的 CMPPFM 实用程序，它允许我将参考数据库与现在修改的测试数据库进行比较。这将显示变化，但是仍然需要大量的体力劳动来检查比较以确保正确的行得到正确的更新。我还没有付出额外的努力来实现自动化。一个重要的警告是有些列您不关心，例如更改时间戳。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-24T08:28:07.160

我们选择了 RPGUNIT，发现它是一个很好的工作基础，但最终扩展了很多，以配合我们的变更管理系统和我们的工作方式。我已经写过我们在这里尝试过的东西： [http ://www.littlebluemonkey.com/blog/my-rpg-unit-test-journey](http://www.littlebluemonkey.com/blog/my-rpg-unit-test-journey)

# c# - 如何在 Function buttonCreate_Click 中使用 Function MenuItem

> ID：11117839
> 
> 赞同：0
> 
> 时间：2012-06-20T10:41:34.287
> 
> 标签：c#, visual-studio, button, directory, menustrip

我在 C# 中相对较新。我的问题是：我创建了一个 MenuStrip。我想用 ButtonCreate_Click 在目录路径下创建一个文件夹。那么如何才能使用Function buttonCreate中的路径呢？那可能吗？

```
 private void buttonCreate_Click(object sender, EventArgs e)
    {

        string MyFileName = "Car.txt";

        string newPath1 = Path.Combine(patheto, MyFileName);
        //Create a folder in the active Directory
        Directory.CreateDirectory(newPath1);
    }

    private void DirectoryPathToolStripMenuItem_Click(object sender, EventArgs e)
    {
        string patheto = @"C:\temp";
        Process.Start(patheto);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:46:14.057

因为您在菜单项单击事件中声明 patheto，所以它只是该范围的局部变量。如果您为表单创建属性，则可以在表单范围内使用该属性。像这样的东西：

```
private string patheto = @"C:\temp";

private void buttonCreate_Click(object sender, EventArgs e)
{

    string MyFileName = "Car.txt";

    string newPath1 = Path.Combine(patheto, MyFileName);
    // Create a folder in the active Directory
    Directory.CreateDirectory(newPath1);
}

private void DirectoryPathToolStripMenuItem_Click(object sender, EventArgs e)
{
    Process.Start(patheto);
} 
```

这意味着您的变量 patheto 可以在表单中的任何位置访问。您必须记住的是，无论您在何处声明变量，它们都只能在该函数/类或子函数/方法中访问。

# jquery - 带有 jQ uery 的 SVG 链接标签

> ID：11117844
> 
> 赞同：4
> 
> 时间：2012-06-20T10:41:39.983
> 
> 标签：jquery, svg

在以下示例中，我尝试将链接标记动态添加到 svg 元素。

[http://lizziemalcolm.com/svgtest.html](http://lizziemalcolm.com/svgtest.html)

```
$('#button').click(function(){
    $('.svgClass').wrap('<a xlink:href="http://www.w3.org/" />');
}); 
```

在示例中，虽然语法完全相同，但带有动态添加链接的椭圆消失了。

任何想法为什么会发生这种情况？

我尝试这样做的原因是我希望使用 SVG 制作自定义[http://www.addthis.com/](http://www.addthis.com/)图标，并且该元素必须包含在标签中。

也尝试使用纯 javascript 但没有运气：

```
function wrapElem( innerId, wrapType, wrapperId, wrapperUrl ){
    var innerElem = document.getElementById( innerId ),
    wrapper = document.createElement( wrapType );  
    wrapper.appendChild( innerElem.parentNode.replaceChild( wrapper, innerElem ) );
    wrapper.setAttribute('xml:id', wrapperId); 
    wrapper.setAttribute('xlink:href', wrapperUrl); 
    return wrapper;
} 
```

链接也更新了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:06:31.443

可能是您的根 SVG 标记（xmlns 和 xmlns:link）上缺少一些命名空间，不确定这是否会有所作为，但值得一试。

如果这没有帮助，这里有一个简单的例子，它显示了两个工作链接：

[http://www.w3.org/2004/CDF/TestSuite/WICD_CDR_WP1/test-scalable-icon2.xhtml](http://www.w3.org/2004/CDF/TestSuite/WICD_CDR_WP1/test-scalable-icon2.xhtml)

它对两个链接都使用了唯一的 ID，所以也许这也值得一试！:)

希望这可以帮助！

安迪。

**更新**

似乎当圆圈被删除并再次添加到包装中时，jQuery 无法正确处理 SVG 元素。不幸的是，jQuery 似乎不支持向 DOM 添加 SVG 元素。

这些 SO 问题回答了同样的问题：

[jquery 的追加不适用于 svg 元素？](https://stackoverflow.com/questions/3642035/jquerys-append-not-working-with-svg-element) [使用 Javascript 创建 SVG 图形？](https://stackoverflow.com/questions/1034712/creating-svg-graphics-using-javascript)

# salesforce - 在 VisualForce 中访问电子邮件模板

> ID：11117846
> 
> 赞同：0
> 
> 时间：2012-06-20T10:41:44.727
> 
> 标签：salesforce, apex-code

嗨，我创建了一个对象，其中一个字段是查找用户，其他字段是电子邮件模板的 id。我必须创建一个 visualforce 页面，在该页面中我必须将不同的电子邮件模板分配给不同的用户，然后保存自定义对象的记录。你能告诉我如何在 VF 页面的选择列表中获取在 MyTemplates 中创建的所有电子邮件模板名称和 ID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:10:32.213

顶点控制器

```
public class TemplateSelectorController {

    public String selectedTemplateId { public get; public set; }

    public List<SelectOption> getMyPersonalTemplateOptions() {
        List<SelectOption> options = new List<SelectOption>();
        for (EmailTemplate t : [
            select Id,Name 
            from EmailTemplate
            // Each User has a 'My Personal Templates' folder
            // of EmailTemplates, whose Id is the User's Id
            where FolderId = :UserInfo.getUserId()
        ]) {
            options.add(new SelectOption(t.Id,t.Name));
        }
        return options;
    }
} 
```

视觉力量页面

```
<apex:page controller="TemplateSelectorController">
     <apex:form>
         <apex:selectList value="{!selectedTemplateId}">
             <apex:selectOptions value="{!myPersonalTemplateOptions}"/>
         </apex:selectList>
     </apex:form>
</apex:page> 
```

# java - Spring MVC ResourceBundleMessageSource XML 配置

> ID：11117850
> 
> 赞同：1
> 
> 时间：2012-06-20T10:41:55.913
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-roo

我想模仿 Grails 解决 i18n 消息的方式。

在 WEB-INF/i18n/ 我有以下目录：

**管理员**/messages_EN.properties

**管理员**/messages_FR.properties

**网站**/messages_EN.properties

**网站**/messages_FR.properties

*请忽略此示例中的语言结尾（ EN 和 FR ）*

在我的 xml 配置中，我目前拥有：

```
<!-- Register the welcome.properties -->
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
  <property name="defaultEncoding" value="utf-8" />
  <property name="basename" value="/WEB-INF/i18n/" />
</bean> 
```

我在这里寻找的是一种告诉 Spring 在 i18n 下查找 .properties 文件但没有明确告诉它每个子目录是什么的方法。那是没有**指向**/ *WEB-INF/i18n/admin/*和*/WEB-INF/i18n/website/*的**基本名称****列表**

 ****我希望 WEB-INF/i18n/ 目录是动态的，并且可以创建包（目录）而无需重新修改 xml 配置文件。

**我不是想用 admin 和 website 子目录来解决这个特定的例子**

这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T09:30:07.200

这是解决方案：

```
package com.mypackage.core.src;

import java.io.File;
import java.util.ArrayList;

import javax.servlet.ServletContext;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.support.ReloadableResourceBundleMessageSource;

public class UnderDirectoryReloadableResourceBundleMessageSource extends ReloadableResourceBundleMessageSource {

    @Autowired
    ServletContext servletContext;

    public void setWorkingDirectory(String directoryPath) {
        File rootDir = new File( servletContext.getRealPath(directoryPath) );
        ArrayList<String> baseNames = new ArrayList<String>();
        iterateScanDirectoryAndAddBaseNames(baseNames, rootDir);
        setBasenames(baseNames.toArray(new String[baseNames.size()]));
    }

    private void iterateScanDirectoryAndAddBaseNames(ArrayList<String> baseNames, File directory) {
        File[] files = directory.listFiles();

        for (File file : files) {
            if (file.isDirectory()) {
                iterateScanDirectoryAndAddBaseNames(baseNames, file);
            } else {
                if (file.getName().endsWith(".properties")) {
                    String filePath = file.getAbsolutePath().replaceAll("\\\\", "/").replaceAll(".properties$", "");
                    filePath = filePath.substring(filePath.indexOf("/WEB-INF/"), filePath.length());
                    baseNames.add(filePath);
                    System.out.println("Added file to baseNames: " + filePath);
                }
            }
        }
    }

} 
```

XML配置：

```
<bean id="messageSource" class="com.mypackage.core.src.UnderDirectoryReloadableResourceBundleMessageSource">
  <property name="defaultEncoding" value="utf-8" />
  <property name="workingDirectory" value="/WEB-INF/webspring/i18n" />
  <property name="cacheSeconds" value="3" />
  <property name="fallbackToSystemLocale" value="false" />
</bean> 
```

享受！****

# node.js - 使用 Mongoose 进行多对多映射

> ID：11117854
> 
> 赞同：53
> 
> 时间：2012-06-20T10:42:25.430
> 
> 标签：node.js, mongodb, mongoose

我的设计中有 FlashcardSchemas 和 PackageSchemas。一个抽认卡可以属于不同的包，一个包可以包含不同的抽认卡。

下面你可以看到我的猫鼬模式定义的精简版本：

```
// package-schema.js
var Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId;

var PackageSchema = new Schema({
    id          : ObjectId,
    title       : { type: String, required: true },
    flashcards  : [ FlashcardSchema ]
});

var exports = module.exports = mongoose.model('Package', PackageSchema);

// flashcard-schema.js
var Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId;

var FlashcardSchema = new Schema({
    id      : ObjectId,
    type        : { type: String, default: '' },
    story       : { type: String, default: '' },
    packages    : [ PackageSchema ]
});

var exports = module.exports = mongoose.model('Flashcard', FlashcardSchema); 
```

从上面的注释可以看出，这两个模式定义属于不同的文件，相互引用。

我收到一个异常，指出未按预期定义 PackageSchema。如何映射与猫鼬的多对多关系？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2013-04-14T16:55:38.350

我是 node、mongoDB 和 mongoose 的新手，但我认为正确的方法是：

```
var PackageSchema = new Schema({
    id: ObjectId,
    title: { type: String, required: true },
    flashcards: [ {type : mongoose.Schema.ObjectId, ref : 'Flashcard'} ]
});

var FlashcardSchema = new Schema({
    id: ObjectId,
    type: { type: String, default: '' },
    story: { type: String, default: '' },
    packages: [ {type : mongoose.Schema.ObjectId, ref : 'Package'} ]
}); 
```

这样，您只存储对象引用而不是嵌入对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T10:43:07.560

你这样做是正确的，但问题是你必须在 flashcard-schema.js 中包含 PackageSchema，反之亦然。否则这些文件不知道你在引用什么

```
var Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId;
    PackageSchema = require('./path/to/package-schema.js')

var FlashcardSchema = new Schema({
    id      : ObjectId,
    type        : { type: String, default: '' },
    story       : { type: String, default: '' },
    packages    : [ PackageSchema ]
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T13:29:25.470

*您可以使用 Schema.add() 方法来避免前向引用问题。*

*这个（未经测试的）解决方案将架构放在一个 .js 文件中*

**模型/index.js**

```
var Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId;

// avoid forward referencing
var PackageSchema = new Schema();
var FlashcardSchema = new Schema();

PackageSchema.add({
    id          : ObjectId,
    title       : { type: String, required: true },
    flashcards  : [ FlashcardSchema ]
});

FlashcardSchema.add({
    id      : ObjectId,
    type        : { type: String, default: '' },
    story       : { type: String, default: '' },
    packages    : [ PackageSchema ]
});

// Exports both types
module.exports = {
    Package:   mongoose.model('Package', PackageSchema),
    Flashcard: mongoose.model('Flashcard', FlashcardSchema)
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:52:41.177

您认为这太像关系数据存储了。如果这是您想要的，请使用 MySQL（或其他 RDBMS）

如果做不到这一点，那么是的，可以使用第三个模式，但不要忘记它仍然只是每个对象的 id（没有连接，记住）所以你仍然必须在单独的查询中检索其他项目.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-03T17:49:27.980

```
https://www.npmjs.com/package/mongoose-relationship

##Many-To-Many with Multiple paths

var mongoose = require("mongoose"),
    Schema = mongoose.Schema,
    relationship = require("mongoose-relationship");

var ParentSchema = new Schema({
    children:[{ type:Schema.ObjectId, ref:"Child" }]
});
var Parent = mongoose.models("Parent", ParentSchema);

var OtherParentSchema = new Schema({
    children:[{ type:Schema.ObjectId, ref:"Child" }]
});
var OtherParent = mongoose.models("OtherParent", OtherParentSchema);

var ChildSchema = new Schema({
    parents: [{ type:Schema.ObjectId, ref:"Parent", childPath:"children" }]
    otherParents: [{ type:Schema.ObjectId, ref:"OtherParent", childPath:"children" }]
});
ChildSchema.plugin(relationship, { relationshipPathName:['parents', 'otherParents'] });
var Child = mongoose.models("Child", ChildSchema)

var parent = new Parent({});
parent.save();
var otherParent = new OtherParent({});
otherParent.save();

var child = new Child({});
child.parents.push(parent);
child.otherParents.push(otherParent);
child.save() //both parent and otherParent children property will now contain the child's id 
child.remove() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-07T20:01:50.437

这就是循环/循环依赖的问题。这就是让它在 nodejs 中工作的方式。有关更多详细信息，请查看[http://exploringjs.com/es6/ch_modules.html#sec_modules-in-javascript中的“CommonJS 中的循环依赖项”](http://exploringjs.com/es6/ch_modules.html#sec_modules-in-javascript)

```
//------ a.js ------
var b = require('b');
function foo() {
    b.bar();
}
exports.foo = foo;

//------ b.js ------
var a = require('a'); // (i)
function bar() {
    if (Math.random()) {
        a.foo(); // (ii)
    }
}
exports.bar = bar;
```

# ios - NSTImer 的选择器方法在 beginBackgroundTaskWithExpirationHandler 中调用了两次

> ID：11117856
> 
> 赞同：0
> 
> 时间：2012-06-20T10:42:33.113
> 
> 标签：ios, nstimer

在“-applicationDidEnterBackground”方法中的 beginBackgroundTaskWithExpirationHandler 代码块中，我将 nstimer 实现如下：

```
UIBackgroundTaskIdentifier taskId = [application beginBackgroundTaskWithExpirationHandler:^{
        timer = [NSTimer scheduledTimerWithTimeInterval:0.0 target:self selector:@selector(print:) userInfo:nil repeats:NO];
    }]; 
```

尽管它`repeats:NO`的“打印”方法作为选择器被调用了两次，但我可以看穿`NSLog`。

除了 in 之外，没有从其他任何地方调用此计时器`applicationDidEnterBackground`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:59:28.403

我向你保证，没有任何问题：

```
timer = [NSTimer scheduledTimerWithTimeInterval:0.0 target:self selector:@selector(print:) userInfo:nil repeats:NO]; 
```

您的“打印”方法不会被调用两次。你的问题是别的东西。还有一件事，时间间隔为 0.0 的计时器是毫无意义的，你不同意吗？

# bdd - 如何设置 NCrunch 以运行 nspec 测试

> ID：11117857
> 
> 赞同：6
> 
> 时间：2012-06-20T10:42:48.067
> 
> 标签：bdd, ncrunch, continuous-testing, nspec

我正在努力设置 NCrunch 以自动运行我的 nspec 测试。在 ncrunch 论坛上，它说这个功能还没有实现，但后来 MattFlo 说他更喜欢使用 NCrunch，所以我很确定它可以工作。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:06:14.103

我们正在努力让 NCrunch 得到全面支持。

现在，您可以使用 DebuggerShim（它是 NSpec 中包含的一个 cs 文件）作为 shim 来通过 NCrunch 运行它。DebuggerShim 几乎是一个运行 NSpec 测试的 NUnit 测试。

您可能想看看[specwatchr](http://nspec.org/continuoustesting)。Matt 喜欢使用 NCruch，但我发现它非常渴望运行我的测试。我必须有意识地停止打字才能让 NCrunch 有机会运行我的测试...我宁愿点击保存按钮并让后台进程为我运行我的测试（即 specwatchr）。希望有帮助。

Amir（NSpec 上的黑客）

NSpec 的 NUnit 扩展：[https ://github.com/ddaysoftware/NSpec4NUnit](https://github.com/ddaysoftware/NSpec4NUnit)

# c++ - 在 Linux 上的多线程 C++ 应用程序中检测堆栈溢出/覆盖

> ID：11117858
> 
> 赞同：2
> 
> 时间：2012-06-20T10:42:58.257
> 
> 标签：c++, c, linux, multithreading, stack

一个线程是否有可能覆盖另一个线程堆栈中的内存？因此，例如，可能会破坏返回地址。

如果可能，是否有任何调试工具或其他实践来帮助检测此类问题？

我说的是在 Linux x86 系统上使用 pthreads 的 C/C++ 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T20:06:14.840

您可以使用 GCC [mudflap](http://gcc.gnu.org/wiki/Mudflap_Pointer_Debugging) library/instrumentation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:28:05.917

如果你使用自己的内存管理器来减少`sbrk`系统调用，valgrind 可能检测不到 ABW。因为 valgrind 覆盖`malloc`了 libc。如果是这种情况，您可能必须重新链接（或编译）您的程序以使用`malloc`而不是您自己的内存分配函数。

除了免费工具 valgrind 之外，如果您不介意使用商业工具，[purify](http://www-01.ibm.com/software/awdtools/purify/)可能是另一种选择。

这两种工具的使用方式不同。使用 purify，您需要将您的程序与 purify 提供的库重新链接。使用 valgrind，您只需通过 valgrind 运行程序，无需重新链接。

# jquery - 我知道原因但不知道如何解决（jQuery）

> ID：11117865
> 
> 赞同：0
> 
> 时间：2012-06-20T10:43:35.323
> 
> 标签：jquery, ruby-on-rails

下一个代码用于在用户注册时显示弹出模式，但它会使我的下一个代码崩溃。我怎样才能覆盖这个？

```
 if($('.alert').html().indexOf('Welcome! You have signed up successfully.') != -1) 
          $('#congrats').show(); 
```

应该显示细节的其他部分不再显示。

```
 $(".sub a").click(function() {
    $(this).siblings("div").show("fast");
      }); 
```

视图代码：

```
 <div class="sub">   
<%= link_to(image_tag("/images/caret-horizontal.png", id: "caret-horizontal"), '#') %>
<h3>
 <%= website.name  %>
</h3>

<div class="desc">
  <p> <%= website.url %> </p>
  <p> <%= website.category %> </p>
  <p> <%= website.language %> </p>
</div> 
```

来自 Chrome 控制台的错误：

```
 Uncaught TypeError: Cannot call method 'indexOf' of null 
```

好人（Rob W）对此表示：

```
 The error is caused by the fact that .html() returns null when the jQuery collection consists of zero DOM elements. 
```

我的通知/警报的 HTML：

```
 <div class="alert alert-notice">Signed out successfully.</div> 
```

# php - 在这个 AJAX 场景中，什么是最好的安全指南，特别是关于身份验证？

> ID：11117867
> 
> 赞同：1
> 
> 时间：2012-06-20T10:43:49.840
> 
> 标签：php, mysql, ajax, security

[我希望这个问题不要太宽泛，我认为这个主题*很*有趣，但我鼓励你告诉我这是否违反政策。]

我的情况是这样的：

*   我有一个 LAMP 网站，它还存储敏感数据和文档
*   只有注册用户才能在网站上进行操作，并且只能对某些数据和文件进行操作。用户存储在 $_SESSION 变量中
*   大多数页面都实现了一种基本的权限控制，但一些重要的数据库操作是通过 AJAX 调用的
*   AJAX 安全性实施得很差，因为任何聪明的人都可以篡改发送他们喜欢的任何 id 的请求，并以残酷的简单性删除记录

要求一本关于安全性的完整书籍显然有点过分（而且我已经在阅读并尝试了很多关于该主题的内容），假设我主要关心的是是否应该特别对待 AJAX 页面，因为我需要保护整个软件以防止黑客攻击和其他问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:45:26.927

> 假设我主要关心的是是否应该特别关注 AJAX 页面

并不真地。他们应该与任何其他请求几乎完全相同。**所有**HTTP 请求都来自您的系统外部，并在客户端的控制下（因此可以或多或少地包含用户可以想象的任何内容）。

您可能会返回 JSON，可能会返回完整的 HTML 文档，也可能会返回 XML — 但格式无关紧要，数据才是。

如果请求是针对敏感数据的，那么您需要（在服务器上）对用户进行身份验证，然后确保他们有权查看/编辑该数据。

唯一的区别是您如何呈现“您未获授权”消息。当您希望浏览器将数据加载到 XHR 中时，您不能简单地返回带有登录表单的 HTML 文档。响应需要进行适当的格式化，并且 JavaScript 需要能够处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:49:02.300

> 我有一个 LAMP 网站，它还存储敏感数据和文档

您应该尽可能少地存储敏感数据。特别是当您不确定如何保护这些信息的安全/私密时。例如，使用 OpenID 或其他东西进行身份验证。我真的很喜欢[LightOpenID](http://gitorious.org/lightopenid)，因为它很简单。我创建了一个小[示例项目/库](https://github.com/alfredwesterveld/php-openid)来查看使用中的 lightopenId。它通过使用[openID-selector](http://code.google.com/p/openid-selector/)简化了 OpenID 的使用。当您使用 OpenID 时，您还使用了安全的 OpenID 提供程序，密码也不会以纯文本形式通过网络传输，而是受 https/SSL 保护。

> 只有注册用户才能在网站上进行操作，并且只能对某些数据和文件进行操作。用户存储在 $_SESSION 变量中

是的，这就是会话的用途。

> 大多数页面都实现了一种基本的权限控制，但一些重要的数据库操作是通过 AJAX 调用的

您至少应该阅读[OWASP 前 10 名](https://www.owasp.org/index.php/Top_10_2010)。（**不要停在10点。**）

> AJAX 安全性实施得很差，因为任何聪明的人都可以篡改发送他们喜欢的任何 id 的请求，并以残酷的简单性删除记录

请参阅上一节。至少阅读 OWASP 前 10 部分。例如，很多人忽略的东西是[CSRF](http://shiflett.org/articles/cross-site-request-forgeries)。

# python - 切片一个numpy数组

> ID：11117868
> 
> 赞同：1
> 
> 时间：2012-06-20T10:43:51.000
> 
> 标签：python, numpy

[本](http://scipy-lectures.github.com/)教程中的练习说：

> 生成一个 10 x 3 的随机数数组（在 范围内`[0,1]`）。对于每一行，选择最接近 的数字`0.5`。
> 
> 使用`abs`和`argsort`查找`j`每行最接近的列。
> 
> 使用花哨的索引来提取数字。（提示：`a[i,j]`– 数组`i`必须包含与 中的内容相对应的行号`j`。）

所以我做了一切，但我觉得我使用的切片方法（以及 的初始化`b`）根本不是 pythonic：

```
a = np.random.rand(10,3)

mask = np.argmin(abs(a-0.5), axis = 1)

b = np.ones(mask.size)

for j in range(0,mask.size):
    b[j] = a[j,mask[j]] 
```

`for`不使用循环的另一种方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:58:24.333

```
import numpy as np
a = np.random.rand(10,3)
b = np.argmin(abs(a - .5), axis=1).choose(a.T)

# a
array([[ 0.97272372,  0.45351387,  0.19105835],
       [ 0.27895897,  0.12438789,  0.64857335],
       [ 0.05298066,  0.58122882,  0.805319  ],
       [ 0.39952727,  0.77728036,  0.65742471],
       [ 0.36522802,  0.06938552,  0.6595684 ],
       [ 0.9030323 ,  0.08965774,  0.01823633],
       [ 0.30996923,  0.53400339,  0.87600912],
       [ 0.17953532,  0.4888832 ,  0.0746074 ],
       [ 0.09052476,  0.47397504,  0.30317449],
       [ 0.31851577,  0.68135476,  0.38335483]])

# b
array([ 0.45351387,  0.64857335,  0.58122882,  0.39952727,  0.36522802,
        0.9030323 ,  0.53400339,  0.4888832 ,  0.47397504,  0.38335483]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:47:46.393

从技术上讲，它并没有避免`for`循环，但是一种更 Pythonic 的编写方式是避免初始`np.ones`分配，而只使用列表推导：

```
b = [a[j, mask[j]] for j in range(0, mask.size)] 
```

# c++ - 捕获函数调用？

> ID：11117870
> 
> 赞同：0
> 
> 时间：2012-06-20T10:43:56.210
> 
> 标签：c++, function

有没有办法在 C++ 中捕获函数调用。就像一个进程可能正在调用 setLocale 一样。我想知道是否有人打电话给它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:49:19.047

从你的陈述中我可以理解。使用任何调试器都相当容易。在函数的第一行`gdb`添加 a运行代码。`breakpoint`当此断点命中时，请参阅`backtrace`以了解如何调用此函数。

# java - JTree单击事件不起作用

> ID：11117874
> 
> 赞同：1
> 
> 时间：2012-06-20T10:44:18.047
> 
> 标签：java, swing, dynamic, listener, jtree

嗨，我是 Jtree 组件的新手。

我根据按钮单击事件动态添加节点。当我单击按钮时，节点添加成功，但在节点单击事件上添加面板后，节点功能（即，单击可见的节点按钮时）停止工作。

![在此处输入图像描述](../Images/deb2f8e6b41f9b327bc7534bf4a7f086.png)

这是我的代码：

```
@Override
public void valueChanged(TreeSelectionEvent event) {
    (tree.getLastSelectedPathComponent().toString().startsWith("Channel")) {
            //if i click Channel node the device button is not visible
            //block button have to invisible
            //treePanel contains jtree
            treePanel.revalidate();
            treePanel.repaint();
            modbusButton.setEnabled(false);
            channelButton.setEnabled(false);
            blockButton.setEnabled(false);
            deviceButton.setEnabled(true);

            modbus2 mcon = null;
            try {
                mcon = new modbus2();
            } catch (SQLException ex) {
                Logger.getLogger(ModBusTree.class.getName()).log(Level.SEVERE,null,ex);
            }

            ModbusMainPanel.rightPanel.removeAll();
            ModbusMainPanel.rightPanel.add(mcon.p2);
            ModbusMainPanel.rightPanel.revalidate();
            ModbusMainPanel.rightPanel.repaint();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:52:02.030

[*您可能会从教程部分如何使用树：动态更改树*](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#dynamic)中获得一些见解，其中引用了[`DynamicTreeDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html#eg)一个与您正在做的类似的竞争示例。

![动态树演示](../Images/dd3db5aa3e0e7137bfac3d447d92cfb1.png)

# asp.net - SQL Server 中的错误 40

> ID：11117876
> 
> 赞同：1
> 
> 时间：2012-06-20T10:44:35.043
> 
> 标签：asp.net, sql-server, sql-server-2008-r2

我在我的服务器上安装了一个在 Asp.net 中的网站，在 SQL Server 2008 R2 中安装了我网站的数据库。我的网站有包含 ActiveX 组件的页面。当我在服务器上运行我的网站时，ActiveX 组件工作正常，但是当我从客户端运行网站时出现问题。

不包含 ActiveX 组件的页面可以正常工作，我可以从数据库中获取和插入数据。在包含 ActiveX 组件的页面中，它给了我 SQL Server 错误号 40，它无法打开连接。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T20:52:04.567

正如史蒂夫 B 在他的评论中暗示的那样，问题在于 ActiveX 组件直接调用数据库。应用程序中的连接字符串指定从 Web 服务器到数据库服务器的连接。这些连接有效，因为您的防火墙设置允许从该 Web 服务器到数据库服务器的入站连接。当在 ActiveX 控件中设置连接以直接连接到数据库时，您会遇到连接失败，因为防火墙阻止了来自运行 ActiveX 组件的客户端的入站连接。解决方法是重新设计您的应用程序，以便客户端计算机上的 ActiveX 组件不再直接对数据库进行调用；使用网络服务或类似的东西。

# zend-framework - zend routes ini 根据优先级按顺序加载路由。

> ID：11117879
> 
> 赞同：0
> 
> 时间：2012-06-20T10:44:55.957
> 
> 标签：zend-framework

Zend 项目有多个模块，每个模块都在其中定义了自己的 routes.ini。并且每个 routes.ini 文件都使用基于模块的引导文件中的以下脚本加载。

```
 protected function _initRoutes() {
            $frontController = Zend_Controller_Front::getInstance();
            $router = $frontController->getRouter();
            $routerDir = realpath(dirname(__FILE__)). "/configs/routes/moduleRoutes.ini";
            $config = new Zend_Config_Ini($routerDir,'production');
            $router->addConfig($config,'routes');
    } 
```

并且所有路线都在无序加载。因为路由是按照加载顺序的相反顺序检查的，它首先检查/执行那些应该稍后检查/执行的路由。

有没有一种方法可以在每个模块的 routes.ini 文件中为每个路由添加一个 orderBy 位（1,2,3,4 ...），并按特定顺序加载它们，以便它按顺序检查路由 I定义。

模块的典型 routes.ini 文件如下所示。

```
routes.frontindex.type = "Zend_Controller_Router_Route_Regex"
routes.frontindex.route = "/?(?!login/)([a-zA-Z0-9_-]+)?/?([a-zA-Z0-9_-]+)?/?([0-9_-]+)?"
routes.frontindex.defaults.module = mymodule1
routes.frontindex.defaults.controller = mycontroller1
routes.frontindex.map.page = 1

routes.siteimage.type = "Zend_Controller_Router_Route_Regex"
routes.siteimage.route = "siteimage/?([a-zA-Z0-9_-]+)?/?(jpg|png|gif)?"
routes.siteimage.defaults.module = mymodule1
routes.siteimage.defaults.controller = mycontroller2
routes.siteimage.defaults.action = getimage
routes.siteimage.map.imageid = 1

routes.sitemapseo.type = "Zend_Controller_Router_Route_Static"
routes.sitemapseo.route = "sitemap.xml"
routes.sitemapseo.defaults.module = mymodule1
routes.sitemapseo.defaults.controller = mycontroller3
routes.sitemapseo.defaults.action = sitemap 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:12:34.197

我不相信你可以指定一个订单。您必须编写自己的代码才能做到这一点。我敢肯定有多种方法，但是您是否考虑过编写自定义[Zend 控制器插件](http://framework.zend.com/manual/en/zend.controller.plugins.html)？您可以制作一个并在方法内组装您的路线`routeStartup()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:56:21.003

可以做到，但需要一些工作，并且您需要对 ZF 相当熟悉。

您需要扩展`Zend_Controller_Router_Rewrite`以创建自己的路由器类（您需要在引导程序中使用前端控制器的 setRouter() 方法进行设置）。在您的路由器类中，您需要：

*   扩展该`addRoute`方法以添加指示优先级的第三个参数。（这可能是一个常数，例如 等`Your_Router::HIGH_PRIORITY`，`Your_Router::MEDIUM_PRIORITY`或者只是一个数字）。您会看到现有方法将路由存储在一个名为`_routes`. 您可以根据优先级参数（等）将路线存储在不同的`$this->_highPriorityRoutes`数组`$this->_lowPriorityRoutes`中

*   扩展`route()`方法。不幸的是，其中大部分将被剪切和粘贴。但是你会看到它调用`array_reverse`然后`$this->_routes`循环通过这些来进行匹配。您需要将您的路由数组合并在一起，以便最终结果是一个优先级最高的路由数组。所以你最终可能会得到类似的东西：

    ```
    $routes = array_merge($this->_lowPriorityRoutes, $this->_highPriorityRoutes);
    $routes = array_reverse($routes, true);

    foreach ($routes as $name => $route) {
        (...as before) 
    ```

*   更新您的 ini 文件以向您的路线添加一个参数来指示优先级。然后在路由器类中扩展该`addConfig()`方法，以便将此参数传递给该`addRoute()`方法。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T15:12:25.387

我还尝试为 application.ini 中的路由设置优先级。

为此，我阅读了`Zend_Controller_Router_Rewrite`. 重要的函数是`addRoute()`和`route()`。我的结论很简单：路由以相反的顺序评估，比较 application.ini 中的顺序。

**例子 ：**

如果我写在 application.ini

*路线A*

*路线B*

*路线C*

*首先检查 routeC，然后检查*routeB*，*最后检查**routeA*。*

 *优先*路由C* > 优先*路由B* > 优先*路由A**

# unit-testing - 我是否应该在仅用于 json 序列化的类中为单元测试添加 getter

> ID：11117880
> 
> 赞同：1
> 
> 时间：2012-06-20T10:44:56.513
> 
> 标签：unit-testing

我有一个仅用于使用 Jackson 进行字段访问的 json 序列化的类，现在我有一个方法，该方法接受一些输入并创建该类的实例，并使用 setter 填充属性。要对该方法进行单元测试，我需要比较该类的每个属性。没有公共吸气剂，它只能通过我试图避免的反射来完成。此外，我不想使用所有属性覆盖该类的 equals 方法。

如果我添加 getter，那么我只是为了单元测试而更改该类的 api。在这种情况下，最好的解决方案是什么，为什么？对此的任何想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:28:50.977

或者，您可以像通常使用的那样测试类的形式——它的序列化版本。由于序列化器是一个您可以放心地[假设*工作*](https://stackoverflow.com/a/9018501/343266)的组件，因此只需在测试类完成工作后序列化对象并将结果与​​参考 JSON 进行比较。这将间接测试您的类是否正确设置了属性。

另一方面，人们可能会争论添加吸气剂的*影响有多大。*如果这是一种自动生成的样板代码，也许最好重新配置生成器以包含 getter。如果不是，并且您故意决定不实现 getter，它可能应该保持这种方式。

# c# - 用于查询运算符“不同”的不受支持的重载

> ID：11117881
> 
> 赞同：2
> 
> 时间：2012-06-20T10:44:57.430
> 
> 标签：c#, .net, linq

我遇到了这个错误消息的问题，因为它出错的行实际上根本没有使用 Distinct() 。我想知道这是否与`IEqualityComparer`我实施的有关？

它在这一行的视图中创建了一个不受支持的异常，特别是在`.Count()`：

```
tr style="display: @( Model.FeaturedOffers.Count() == 0 ? "" : "none" ) " id="none"> 
```

这是 IEqualityComparer 类：

```
public class RewardOfferEqualityComparer : IEqualityComparer<OfferOverviewViewModel>
{
    public bool Equals(OfferOverviewViewModel x, OfferOverviewViewModel y)
    {
        return Equals(x.OfferId, y.OfferId);
    }

    public int GetHashCode(OfferOverviewViewModel x)
    {
        return x.OfferId.GetHashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T10:50:13.603

发现调用`.ToList().Distinct()`而不是`.Distinct()`解决问题。

[在这里](http://dkowalski.com/blog/archive/2009/11/27/unsupported-overload-used-for-query-operator-distinct.aspx)找到答案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:48:42.727

您可能没有使用`Distinct()`，但我猜在由`Model.FeaturedOffers`我猜想的可枚举链中的某个地方`IQueryable`使用了`Distinct`底层提供程序不支持的调用 - 例如 Linq to SQL 或实体框架。

例如 - 如果您在实体框架中查询表并传递您自己的比较器，那么这肯定不会起作用 - 因为 EF 无法在 SQL 或 eSQL 中重新实现比较器

# wcf - WCF 4：WCF 服务的默认限制设置

> ID：11117882
> 
> 赞同：1
> 
> 时间：2012-06-20T10:44:57.547
> 
> 标签：wcf

我正在阅读[Wenlong Dong 的关于 WCF 4 中 WCF 服务的默认限制设置的博客文章](http://blogs.msdn.com/b/wenlong/archive/2009/07/26/wcf-4-higher-default-throttling-settings-for-wcf-services.aspx)，并且对默认设置的值有疑问：

> MaxConcurrentSessions：默认为 100 * **ProcessorCount**
> 
> MaxConcurrentCalls：默认为 16 * **ProcessorCount**
> 
> MaxConcurrentInstances：默认是以上两个的总和，跟之前的模式一样。

ProcessorCount**指**的是：

1.  物理 CPU/插槽数
2.  所有 CPU 上的物理内核数
3.  如果启用了超线程，逻辑内核的数量？

谢谢，

——帕特里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:09:17.937

处理器数量意味着逻辑核心。该值实际上是**System.Environment.ProcessorCount提供的值**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:52:06.143

以下是 MSDN 中的一些内容，可能会有所帮助。优化 WCF Web 服务性能： http: [//msdn.microsoft.com/en-us/library/ee377061 (v=bts.10).aspx](http://msdn.microsoft.com/en-us/library/ee377061(v=bts.10).aspx)

ServiceThrottlingBehavior 成员： http: [//msdn.microsoft.com/en-us/library/system.servicemodel.description.servicethrottlingbehavior.maxconcurrentsessions (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicethrottlingbehavior.maxconcurrentsessions(v=vs.100).aspx)

[http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicethrottlingbehavior_members(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.servicethrottlingbehavior_members(v=vs.90).aspx)

干杯

# c# - 为什么设置 ServicePointManager.ServerCertificateValidationCallback = null 不起作用？

> ID：11117884
> 
> 赞同：1
> 
> 时间：2012-06-20T10:44:58.097
> 
> 标签：c#, .net, ssl-certificate, webclient, servicepointmanager

我有以下片段，我从一组集成测试中调用：

```
private void Url_Contains_String_With_Certificate_Warning(string url, string expected) {
  // This line should restore default cert validation behaviour
  ServicePointManager.ServerCertificateValidationCallback = null;
  var wc = new WebClient();
  try {
    wc.DownloadString(url);
    Assert.Fail("Should have thrown a WebException by now");
  } catch (WebException x) {
    Assert.That(x.InnerException is AuthenticationException, "Expected an AuthenticationException inside a WebException due to invalid certificate");
    Assert.AreEqual("The remote certificate is invalid according to the validation procedure.", x.InnerException.Message);
  }
  // This line overrides cert validation behaviour to accept invalid certs
  ServicePointManager.ServerCertificateValidationCallback = delegate { return(true); };
  var result = wc.DownloadString(url);
  Assert.That(result.Contains(expected), String.Format("Didn't find expected text '{0}' in HTML response", expected));
} 
```

但是，只有在任何给定的测试运行中的第一个测试才会通过......一旦我运行了这一行：

```
ServicePointManager.ServerCertificateValidationCallback = delegate { return(true); }; 
```

我无法让 WebClient 在同一测试运行中再次引发证书错误，即使我明确将此委托分配给 null。我也尝试过明确返回 false；我尝试添加一个命名的委托引用，然后将其删除，而不是仅仅分配/重新分配，甚至检查回调中的 SslPolicyErrors 并返回`policyErrors == SslPolicyErrors.None`- 没有任何效果。

（我明确地验证了我们测试环境中的某些 URL 返回证书警告，并且我还需要验证如果用户忽略证书警告，他们将看到特定页面，因此证书处理有点奇怪）

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:14:15.260

将 System.Net.ServicePointManager.MaxServicePointIdleTime 设置为 0

没有这个，连接通道将保持打开状态，因此没有委托调用

[http://blogs.msdn.com/b/jpsanders/archive/2009/05/20/understanding-maxservicepointidletime-and-defaultconnectionlimit.aspx](http://blogs.msdn.com/b/jpsanders/archive/2009/05/20/understanding-maxservicepointidletime-and-defaultconnectionlimit.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T22:55:59.950

你应该打电话——

```
ServicePointManager.ServerCertificateValidationCallback == delegate { return(true); }; 
```

在创建请求之前，在您的情况下，在调用之前

```
var wc = new WebClient(); 
```

# html - 如果您没有为 css 文件声明 MIME 类型，服务器是否会尝试确定它？

> ID：11117889
> 
> 赞同：0
> 
> 时间：2012-06-20T10:45:12.723
> 
> 标签：html, apache, http-headers

我正在观察我的 css 文件的 HTTP 标头并注意到两个样式表

```
<link type="text/css" rel="stylesheet" href="css/stuff1.css">
<link rel="stylesheet" href="css/stuff2.css"> 
```

`Content-Type: text/css`在他们的 HTTP 标头中有以下内容。是服务器在猜测`Content-Type`吗？

另外 -`<link>`如果服务器要确定 mime 类型是什么，那么在标签中声明 mime 类型的目的是什么？

我正在运行 ubuntu 12.04 和 apache2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:47:55.970

HTTP 服务器根据已存储的 mimetype 列表设置 Content-Type。

您不必在链接标签中指定它，但我想这意味着服务器不必猜测，而且这意味着您可以拥有一个`css.min`文件`type="text/css"`并且它仍然可以作为 css 服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:01:01.713

我不认为该`type`属性是`<link>`标签所必需的。HTML 4.01/HTML 5 规范声明它是关于链接目标地址上可用内容的内容类型的“建议”提示。

[HTML 5 规范](http://www.w3.org/TR/2011/WD-html5-20110525/semantics.html#attr-link-type)说-

**如果省略该属性，但外部资源链接类型定义了默认类型，则用户代理必须假定资源属于该类型。**

# django - Django模型乘法过滤器

> ID：11117890
> 
> 赞同：0
> 
> 时间：2012-06-20T10:45:16.533
> 
> 标签：django, django-models

我想使用两个过滤器过滤我的模型对象。因此，它可以只有一个过滤器，也可以是两者，也可以没有。我的解决方案是使用大量的“如果”：

```
if _topic or _curator:
    if _topic and _curator:
        queryset = Article.objects.filter(topic=_topic,curator=_curator)
    elif _curator:
        queryset = Article.objects.filter(curator=_curator)
    else # so topic is the last choice
        queryset = Article.objects.filter(topic=_topic)
else
    queryset = Article.objects.all() 
```

有人可以建议一种更简单的过滤方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:48:57.323

查询集过滤器是累积的。

```
queryset = Article.objects.all()
if _topic:
    queryset = queryset.filter(topic=_topic)
if _curator:
    queryset = queryset.filter(curator=_curator) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:53:51.493

```
kwargs = {}
if _topic:
    kwargs[topic] = _topic
if _curator:
    kwargs[curator] = _curator
queryset = Article.objects.filter(**kwargs) 
```

# c# - Linq 返回特定类型

> ID：11117894
> 
> 赞同：0
> 
> 时间：2012-06-20T10:45:29.550
> 
> 标签：c#, linq

如何在 Linq 查询中返回特定类型？我知道您可以使用 ToList() 返回特定对象的列表，但是如何返回非列表？

```
MyObj x = from x in list where x.id == 99 select x; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:46:13.243

```
MyObj x = (from x in list where x.id == 99 select x).Single(); 
```

如果您希望 id 可能不存在，那么您可以使用 SingleOrDefault 返回该类型的默认值（在这种情况下可能为 null）。

当然，您可以使用 First() 但我会小心，因为如果您希望只返回一个项目，这可能会隐藏错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:47:47.407

```
MyObj x = list.FirstOrDefault(i=>i.id == 99); 
```

`IEnumerable`可用于返回单个项目的替代方法：

*   `list.Single(i=>i.id == 99)`: 如果没有找到匹配项或找到多个匹配项，则抛出异常。
*   `list.SingleOrDefault(i=>i.id == 99)`: 如果没有找到匹配项，则返回 null，如果找到多个匹配项，则抛出异常。
*   `list.First(i=>i.id == 99)`: 如果没有找到匹配项，则抛出异常。如果找到多个匹配项，则返回列表中的第一项。
*   `list.FirstOrDefault(i=>i.id == 99)`: 如果没有找到匹配项，则返回 null。如果找到多个匹配项，则返回列表中的第一项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:47:29.173

```
MyObj x = list.Where(x => x.id == 99).FirstOrDefault(); 
```

# asp.net-mvc - 我可以使用 silverlight 来克服 chrome 中的 activex 问题吗？

> ID：11117898
> 
> 赞同：0
> 
> 时间：2012-06-20T10:45:55.443
> 
> 标签：asp.net-mvc, silverlight, entity-framework, google-chrome, activex

我有一个电话来电显示设备。我想将呼叫号码记录到数据库。我使用了 javascript 和 Activex，但这仅适用于 IE。我正在使用 MVC 和 EF。

是否可以使用 Silverlight 并将其嵌入到我的 Web 应用程序项目中，以便 silverlight 项目可以访问数据库并记录电话号码。

如果可能的话，你能给我看一个简单的例子吗？（我在 Silverlight 上创建了一个项目，但无法将 dll（来电显示设备 SDK）添加到引用中。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:46:08.773

您是否尝试过使用“ActiveX for Chrome”扩展程序？

[https://chrome.google.com/webstore/detail/lgllffgicojgllpmdbemgglaponefajn](https://chrome.google.com/webstore/detail/lgllffgicojgllpmdbemgglaponefajn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:43:35.590

您没有解释为什么要使用 ActiveX，所以我假设该控件能够为您的硬件电话呼叫者 ID 设备提供接口。

Silverlight 可能会解决您的问题。但是，如果您必须调用本机代码（例如，访问电话 ID 设备的 COM 对象），您必须将 Silverlight 应用程序作为[受信任的应用程序](http://msdn.microsoft.com/en-us/library/ee721083%28v=vs.95%29.aspx)运行。通常，这要求应用程序在浏览器之外运行 (OOB)。这使得浏览器仅成为安装 OOB Silverlight 应用程序的工具。

您还必须创建一个允许 Silverlight 应用程序与数据库交互的 Web 服务接口。您不能只在 Silverlight 项目中添加对实体框架的引用，然后直接访问数据库。但是，使用[WCF RIA 服务](http://www.silverlight.net/learn/advanced-techniques/wcf-ria-services)将 Silverligt 应用程序连接到 IIS 中托管的实体框架是相当简单的。

# oracle10g - select first letter of different columns in oracle

> ID：11117904
> 
> 赞同：-1
> 
> 时间：2012-06-20T10:46:13.680
> 
> 标签：oracle10g, oracle-xe

I want a query which will return a combination of characters and number

Example:

Table name - emp
Columns required - fname,lname,code

If fname=abc and lname=pqr and the row is very first of the table then result should be code = ap001.

For next row it should be like this:

Fname = efg, lname = rst
Code = er002 and likewise.

I know that we can use substr to retrieve first letter of a colume but I don't know how to use it to do with two columns and how to concatenate.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:44:39.230

OK. You know you can use `substr` function. Now, to concatenate you will need a concatenation operator `||`. To get the number of row retrieved by your query, you need the `rownum` pseudocolumn. Perhaps you will also need to use `to_char` function to format the number. About all those functions and operators you can read in [SQL reference](http://docs.oracle.com/cd/B19306_01/server.102/b14200/toc.htm). Anyway I think you need something like this (I didn't check it):

```
select substr(fname, 1, 1) || substr(lname, 1, 1) || to_char(rownum, 'fm009') code
from emp 
```

# xml - 使用 XSLT 连接相似的 XML 标记值

> ID：11117909
> 
> 赞同：2
> 
> 时间：2012-06-20T10:46:34.880
> 
> 标签：xml, xslt

我该如何处理这个，在 XML 文件中连接类似的 XML 标签

我有以下格式的 XML::

```
<addressbook>
 <address>
    <first-name>Chester Hasbrouck</first-name>
     <Descritpion>Hi</Descritpion>
     <Descritpion>This is Chester </Descritpion>
   <street>1234 Main Street</street>
  <city>Sheboygan</city>
  <state>WI</state>
  <zip>48392</zip>
 </address>
 <address>
    <first-name>Mary</first-name>
     <Descritpion>Hi</Descritpion>
     <Descritpion>This is Mary </Descritpion>
     <Descritpion>Bye</Descritpion>
     <street>283 First Avenue</street>
  <city>Skunk Haven</city>
  <state>MA</state>
  <zip>02718</zip>
 </address>
</addressbook> 
```

我需要以下格式的人请为此建议 XSLT。

```
<addressbook>
 <address>
    <first-name>Chester Hasbrouck</first-name>
     <Descritpion>Hi | This is Chester </Descritpion>
   <street>1234 Main Street</street>
  <city>Sheboygan</city>
  <state>WI</state>
  <zip>48392</zip>
 </address>
 <address>
    <first-name>Mary</first-name>
     <Descritpion>Hi | This is Mary | Bye</Descritpion>
     <street>283 First Avenue</street>
  <city>Skunk Haven</city>
  <state>MA</state>
  <zip>02718</zip>
 </address>
</addressbook> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:55:53.870

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Descritpion[not(preceding-sibling::*[1][self::Descritpion])]">
  <Descritpion>
   <xsl:value-of select="."/>
   <xsl:apply-templates select="following-sibling::Descritpion/text()"/>
  </Descritpion>
 </xsl:template>

 <xsl:template match="Descritpion/text()">
   <xsl:value-of select="concat(' | ', .)"/>
 </xsl:template>
 <xsl:template match="Descritpion"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<addressbook>
    <address>
        <first-name>Chester Hasbrouck</first-name>
        <Descritpion>Hi</Descritpion>
        <Descritpion>This is Chester </Descritpion>
        <street>1234 Main Street</street>
        <city>Sheboygan</city>
        <state>WI</state>
        <zip>48392</zip>
    </address>
    <address>
        <first-name>Mary</first-name>
        <Descritpion>Hi</Descritpion>
        <Descritpion>This is Mary </Descritpion>
        <Descritpion>Bye</Descritpion>
        <street>283 First Avenue</street>
        <city>Skunk Haven</city>
        <state>MA</state>
        <zip>02718</zip>
    </address>
</addressbook> 
```

**产生想要的正确结果**：

```
<addressbook>
   <address>
      <first-name>Chester Hasbrouck</first-name>
      <Descritpion>Hi | This is Chester </Descritpion>
      <street>1234 Main Street</street>
      <city>Sheboygan</city>
      <state>WI</state>
      <zip>48392</zip>
   </address>
   <address>
      <first-name>Mary</first-name>
      <Descritpion>Hi | This is Mary  | Bye</Descritpion>
      <street>283 First Avenue</street>
      <city>Skunk Haven</city>
      <state>MA</state>
      <zip>02718</zip>
   </address>
</addressbook> 
```

**说明**：

1.  身份规则“按原样”复制每个节点。

2.  `Descritpion`元素通常通过使用空体模板匹配覆盖标识模板而被忽略/删除`Descritpion`。

3.  只有`Descritpion`紧接其前面的兄弟元素不是 a`Descritpion`本身的元素才会被另一个覆盖模板特殊处理。这里复制元素的字符串值，然后将模板应用于以下兄弟元素的所有文本节点子`Descritpion`元素。

4.  匹配`Descritpion`元素的 text-node-child 的模板实现了所需的文本连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:31:51.557

为此，您可以在身份转换的基础上进行构建，但添加额外的规则来处理您感兴趣的元素

我认为您首先需要匹配其中没有子元素的元素

```
<xsl:template match="*[not(*)]" priority="1"> 
```

然后，您将向其中添加代码以输出当前文本值，然后选择所有具有相同名称的后续兄弟的文本值（将在它们之前使用分隔符输出）

```
<xsl:apply-templates 
   select="following-sibling::*[local-name() = local-name(current())]/text()" 
   mode="concat"/> 
```

您还需要添加一个模板来忽略与前一个兄弟同名的元素，这样它们就不会得到两次输出

```
<xsl:template 
    match="*[not(*)][local-name() = local-name(preceding-sibling::*[1])]" 
    priority="2" /> 
```

请注意此处**优先级**属性的使用，因此 XSLT 处理器首先匹配具有较高优先级的处理器。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="*[not(*)]" priority="1">
      <xsl:copy>
         <xsl:value-of select="normalize-space(.)"/>
         <xsl:apply-templates select="following-sibling::*[local-name() = local-name(current())]/text()" mode="concat"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="*[not(*)][local-name() = local-name(preceding-sibling::*[1])]" priority="2"/>

   <xsl:template match="text()" mode="concat">
      <xsl:value-of select="concat(' | ', normalize-space(.))"/>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<addressbook>
   <address>
      <first-name>Chester Hasbrouck</first-name>
      <Descritpion>Hi | This is Chester</Descritpion>
      <street>1234 Main Street</street>
      <city>Sheboygan</city>
      <state>WI</state>
      <zip>48392</zip>
   </address>
   <address>
      <first-name>Mary</first-name>
      <Descritpion>Hi | This is Mary | Bye</Descritpion>
      <street>283 First Avenue</street>
      <city>Skunk Haven</city>
      <state>MA</state>
      <zip>02718</zip>
   </address>
</addressbook> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:59:44.913

这是另一种方法。

*需要注意的一点：*此解决方案不维护输出文档的顺序（即，它不`<Descritpion>`直接在元素下创建新`<first-name>`元素）。如果这对您很重要，请查看其他提供的解决方案。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!-- TEMPLATE #1 -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- TEMPLATE #2 -->
  <xsl:template match="address">
    <xsl:copy>
      <xsl:apply-templates/>
      <Descritpion>
        <xsl:apply-templates select="Descritpion/text()"/>
      </Descritpion>
    </xsl:copy>
  </xsl:template>

  <!-- TEMPLATE #3 -->
  <xsl:template match="Descritpion/text()">
    <xsl:value-of select="." />
    <xsl:if test="position() != last()"> | </xsl:if>    
  </xsl:template>

  <!-- TEMPLATE #4 -->
  <xsl:template match="Descritpion" />
</xsl:stylesheet> 
```

在提供的 XML 文档上提供此信息时：

```
<?xml version="1.0" encoding="UTF-8"?>
<addressbook>
  <address>
    <first-name>Chester Hasbrouck</first-name>
    <Descritpion>Hi</Descritpion>
    <Descritpion>This is Chester </Descritpion>
    <street>1234 Main Street</street>
    <city>Sheboygan</city>
    <state>WI</state>
    <zip>48392</zip>
  </address>
  <address>
    <first-name>Mary</first-name>
    <Descritpion>Hi</Descritpion>
    <Descritpion>This is Mary </Descritpion>
    <Descritpion>Bye</Descritpion>
    <street>283 First Avenue</street>
    <city>Skunk Haven</city>
    <state>MA</state>
    <zip>02718</zip>
  </address>
</addressbook> 
```

...产生了预期的结果：

```
<?xml version="1.0" encoding="UTF-8"?><addressbook>
  <address>
    <first-name>Chester Hasbrouck</first-name>
    <street>1234 Main Street</street>
    <city>Sheboygan</city>
    <state>WI</state>
    <zip>48392</zip>
    <Descritpion>Hi | This is Chester </Descritpion>
  </address>
  <address>
    <first-name>Mary</first-name>
    <street>283 First Avenue</street>
    <city>Skunk Haven</city>
    <state>MA</state>
    <zip>02718</zip>
    <Descritpion>Hi | This is Mary  | Bye</Descritpion>
  </address>
</addressbook> 
```

**解释：**

*   **模板#1：** “身份模板”按原样复制所有内容。

*   **模板 #2：**此模板按原样复制每个`<address>`元素，创建一个新`<Descritpion>`元素，并指示 XSLT 处理器使用来自任何匹配的模板的结果填充该新元素`Descritpion/text()`。

*   **模板#3：**该模板处理来自模板#2的结果；特别是，它会从所有旧`<Descritpion>`元素中复制文本，并在到达最后一个元素之前将 a`|`放在结果之间。

*   **模板 #4：**`<Descritpion>`此模板从源文档中删除原始元素。

# c# - 如何编写一个类方法来处理c#中的现有表单

> ID：11117911
> 
> 赞同：1
> 
> 时间：2012-06-20T10:46:38.873
> 
> 标签：c#

我的项目中有两个表格，form1 和 form2。我在我的项目中添加了一个新类。它有一个接受表单对象的方法，它应该能够做以下事情。

1.  显示接受的表单对象 (frm.ShowDialog())

2.  当我在显示的表单（frm）上按回车键时，它应该关闭。（不向 form2 的 keydown 事件添加代码）。它应该由新添加的类处理。

我试图添加新的 keyeventhandler，但我不知道如何从这里开始。（Dispose（）不起作用）请帮我解决这个问题。谢谢你。

```
class Class1
{
    public static void SearchResultBox(Form2 frm) 
    {            
        frm.KeyDown += new KeyEventHandler(frm_KeyDown);
        frm.ShowDialog();

    }

    static void frm_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode==Keys.Enter)
        {

        }
        throw new NotImplementedException();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:52:20.680

frm.close() 和 frm.dispose() 不会执行您要求的任务。

```
static void frm_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode==Keys.Enter)
    {
        frm.close();
        frm.dispose();

    }
    throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:53:00.643

创建自己的`Form`类并使用[AcceptButton](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton%28v=vs.100%29.aspx)，像这样

```
public class MyOwnForm : Form 
{
    private override OnLoad(...)
    {
        base.OnLoad(..);

        AcceptButton = yourOkButtonObject;
    }
} 
```

**我想**在您的表单上出现`yourOkButtonObject`的“确定”按钮的对象在哪里。*如果没有确认*表单的任何其他按钮。

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:53:09.247

您需要保留对传入表单的引用，然后使用该引用关闭表单

```
class Class1 
{   
    private static Form2 _frm = null;  
    public static void SearchResultBox(Form2 frm)      
    {                     
         _frm = frm;
         frm.KeyDown += new KeyEventHandler(frm_KeyDown);         
         frm.ShowDialog();      
    }      
    static void frm_KeyDown(object sender, KeyEventArgs e)     
    {         
        if (e.KeyCode==Keys.Enter)         
        {     
             if(_frm != null)
             {      
                 _frm.Close();
                 _frm.Dispose();
             }
        }         
    }
} 
```***

# c# - 单击禁用的控件时如何播放哔声？

> ID：11117913
> 
> 赞同：0
> 
> 时间：2012-06-20T10:46:41.717
> 
> 标签：c#, winforms

我想要 btn1.Click 上的以下内容：

```
if (btn1.Enabled == false) System.Media.SystemSounds.Beep.Play(); 
```

尽管 btn1 被禁用，有没有办法播放哔声？

实际上，默认情况下我需要这样的东西：

```
foreach (controls c in Form1.Controls)
if (c is clicked && c.Enabled == false)
System.Media.SystemSounds.Beep.Play(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T11:02:57.593

You can add a click event to the form and get the control that is at the position of the click:

```
private void Form1_Click(object sender, EventArgs e)
{
  var p = PointToClient(Cursor.Position);
  var c = GetChildAtPoint(p);
  if (c != null && c.Enabled == false)
    System.Media.SystemSounds.Beep.Play();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:00:55.317

If you are making controls disabled manually , instead of disabling the buttons you can just change the button's style to disabled. And on click event check the button's style. If you can explain why you want that functionality we can help more maybe

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:48:17.067

如果 Button 被禁用，它将不会接收 Click 事件。所以唯一的方法是启用它并使用自定义标志来存储状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T10:56:23.610

您不能在表单的 OnMouseClick 事件中执行此操作（接收 MouseEventArgs e）：

```
Control control = GetChildAtPoint(e.Location);

if (control != null)
{
} 
```

从那里，您可以做一些肮脏的事情来检索控件类型及其状态，并在必要时发出哔哔声。无论如何，我讨厌使用一直发出哔哔声的应用程序 ;-)

# css - 如何使用数据属性在 CSS 中设置背景图像？

> ID：11117915
> 
> 赞同：13
> 
> 时间：2012-06-20T10:47:03.383
> 
> 标签：css, custom-data-attribute

我有一个文件夹，里面有一些背景图片 (one.jpg, two.jpg, three.jpg) 和这个标记

```
<section class="slide" data-bg="one"></section>
<section class="slide" data-bg="two"></section>
<section class="slide" data-bg="three"></section> 
```

是否有可能**仅使用 CSS**来做这样的事情？

```
.slide{
    background-image: url(img/attr(data-bg).jpg);
} 
```

当然，这段代码不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T10:52:48.493

除非您以“非动态”方式执行此操作，否则纯 css 将无法做到这一点：

```
.slide[data-bg="one"]{
  background-image: url('img/one.jpg');
}
.slide[data-bg="two"]{
  background-image: url('img/two.jpg');
}
... 
```

也许您可以从服务器端的文件名动态创建该样式表。

另一种（可能更容易）的可能性是使用 JavaScript 执行此操作 - 但由于您排除了我假设您知道这一点并且不想使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-16T00:48:43.567

我知道最初的问题强调只用 CSS 来做，但我之所以提出这个问题，是因为另一个问题（不一定要求 CSS 解决方案）被标记为与此问题重复。这是我用作解决方案的方法，以防它帮助其他任何人，并且它使用带有 jQ​​uery 的 javascript：

```
$('.slide').each(function (index) {
    var slide = $(this);
    slide.css('background-image', 'url(' + slide.data('bg') + ')');
}); 
```

# java - Log4j 日志会降低应用程序性能？

> ID：11117916
> 
> 赞同：12
> 
> 时间：2012-06-20T10:47:08.597
> 
> 标签：java, logging, log4j

日志记录会降低应用程序性能吗？以及如何限制在日志文件中打印显示标签日志？

例如。我的日志文件有以下日志

```
[2012-06-20 15:52:06,290] org.displaytag.tags.TableTag isFirstIteration 684 - [data] first iteration=true (row number=1)
[2012-06-20 15:52:06,290] org.displaytag.tags.TableTag isFirstIteration 684 - [data] first iteration=true (row number=1)
[2012-06-20 15:52:06,290] org.displaytag.tags.TableTag isFirstIteration 684 - [data] first iteration=true (row number=1)
[2012-06-20 15:52:06,290] org.displaytag.tags.TableTag isFirstIteration 684 - [data] first iteration=true (row number=1) 
```

为什么以上在日志文件中？

log.properties 文件

```
# Log4j configuration file.
 log4j.rootCategory=DEBUG, A1
 # Available levels are DEBUG, INFO, WARN, ERROR, FATAL

 #
 # A1 is a ConsoleAppender 
 #

log4j.appender.A1 = org.apache.log4j.RollingFileAppender
log4j.appender.A1.File = C:/LogInfo/logfile.log
log4j.appender.A1.MaxFileSize = 100MB
log4j.appender.A1.MaxBackupIndex=50
log4j.appender.A1.layout = org.apache.log4j.PatternLayout
log4j.appender.A1.append = true
log4j.appender.A1.layout.ConversionPattern = [%d] %C %M %L - %m%n
log4j.appender.A1.Threshold = DEBUG 
```

如何停止（org.displaytag.tags.TableTag）这些类型的日志打印在日志文件中

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T10:55:39.713

> 日志记录会降低应用程序性能吗？

是的。它的作用取决于许多因素；见下文。

> 以及如何限制在日志文件中打印显示标签日志？

通过更改日志记录属性中的 ConversionPattern

> 为什么以上在日志文件中？

因为：

1.  代码中的某处是使用该消息调用 Logger 方法（可能`debug(String)`），并且
2.  您的日志记录属性将日志记录阈值设置为附加程序的调试。

要提高性能：

1.  更改 ConversionPattern 以使用更便宜的日期/时间格式，并且（更重要的是）避免使用“C”、“F”、“L”和“M”，因为它们特别昂贵。
2.  将日志记录阈值更改为 INFO 或 WARNING 或 ERROR 以减少日志记录量，
3.  将`Logger.debug(...)`调用放在`if`检查是否启用调试日志记录的语句中。这节省了在不需要时组装日志消息的成本；请参阅[在 log4j 中，在记录之前检查 isDebugEnabled 是否会提高性能？](https://stackoverflow.com/questions/963492/in-log4j-does-checking-isdebugenabled-before-logging-improve-performance).
4.  使用 log4j 版本 2 (log4j2)，在采用格式和参数的日志记录方法上有重载。这些减少了在禁用级别进行日志记录时的开销。
5.  还请查看 logback 和 log4j 2.0。

您还可以按照[log4j 文档](http://logging.apache.org/log4j/1.2/manual.html)`Logger`中的描述在级别...限制日志记录。实际上，该文档回答了您提出的大部分问题，并且对日志记录性能和日志记录配置等主题有很多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:50:30.770

简短的回答：是的，它会降低应用程序的性能，因为它使用一些 CPU 周期和其他资源（内存等）。

另请参阅此问题：[log4j 性能](https://stackoverflow.com/questions/3053134/log4j-performance)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:55:11.850

日志记录可以占您 CPU 时间的 30% 或更多。就抖动而言，它与您的 GC 延迟一样大（并且更频繁）。

减少开销的一个简单方法是使用模式关闭记录每条消息的位置。在您的情况下，这是 %C %M 和 %L 因为它必须获取（整个堆栈的）堆栈跟踪才能获取此信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:50:29.810

是的，他们这样做。这就是为什么您应该只记录错误或绝对必须记录的内容。您还可以在调试通道中记录有助于调试的信息，以免影响生产性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T10:56:09.820

您可以像这样限制垃圾日志。将根记录器设置为 INFO，这样不必要的调试日志就不会出现并填满您的日志文件。

```
log4j.rootCategory=INFO, A1 
```

如果您希望特定的类或包发出 DEBUG 日志，您可以这样做。

```
log4j.logger.org.hibernate.event.def.DefaultLoadEventListener=DEBUG,A1 
```

以上将打印日志文件中 DefaultLoadEventListener 类的 DEBUG 级别日志以及其他 INFO 级别日志。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T10:59:11.727

怎么样？

```
log4j.category.org.displaytag.tags.TableTag=ERROR, A1 
```

# asp.net - ASP.NET：无法模拟调用者（2 跳？）

> ID：11117918
> 
> 赞同：0
> 
> 时间：2012-06-20T10:47:14.073
> 
> 标签：asp.net, security, impersonation, kerberos

我有一个作为 DOMAIN\USER1 帐户运行的 MVC3 Web 应用程序。此用户在 AD 集中具有 SPN，并且受委派信任。

我希望此应用程序代表调用者访问共享点服务器并为她/他上传文件。我使用以下代码

```
Dim request = HttpWebRequest.Create(http://sharepoint.domain.com)

request.Method = WebRequestMethods.Http.Head
request.PreAuthenticate = True
Dim identity = New WindowsIdentity(callerName & "@domain.com")
Dim impContext = identity.Impersonate()
'###### At this point identity.ImpersonationLevel is `Impersonate` not `Delegate`

request.Credentials = CredentialCache.DefaultNetworkCredentials
'###### DefaultNetworkCredentials is empty (Username, domain and password are all empty strings)

Dim response As HttpWebResponse

Try
    response = request.GetResponse()
    Return JsonSuccess()
Catch ex As WebException

    '###### I get 401 Unauthorized exception
    Return JsonError(ex.Message)
Finally
    impContext.Undo()
End Try 
```

我的问题是。此时的模拟级别应该是`Impersonate`还是`Delegate`（Sharepoint 在与 IIS 服务器不同的机器上运行）？在 AD 中，我还为共享点和 HTTP 配置了协议转换，所以也许`Impersonate`应该`Delegate`在它发出请求后更改为？我不知道，将不胜感激。

另一个问题是 - CredentialCache.DefaultNetworkCredentials 不应该至少包含模拟用户的用户名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:22:25.197

我在这里找到了答案：

[http://support.microsoft.com/kb/810572](http://support.microsoft.com/kb/810572)

“Kerberos 在负载平衡的体系结构中不起作用，IIS 退回到 NTLM 身份验证。因为您不能使用 NTLM 进行委派，所以任何需要委派的应用程序或服务都不起作用。有关详细信息，请单击以下文章编号以查看微软的文章”

情况正是如此。我现在尝试使用另一台没有负载平衡的机器并且它可以工作。

唯一让我感到惊讶的是，身份的ImpersonationLevel仍然`Impersonate`没有`Delegate`......

# asp.net-mvc - 对 IModelBinder.BindModel 的调用是否已经设置了 bindingContext.Model/ModelMetadata？

> ID：11117925
> 
> 赞同：1
> 
> 时间：2012-06-20T10:47:33.117
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model, model-binding

盲目地覆盖绑定上下文的 ModelMetaData 来设置模型的类型是否安全？我担心活页夹可能会用于更新编辑场景中的预建模型，如果我只是覆盖 ModelMetaData，我会丢失数据。

示例代码：

```
Public Class CustomModelBinder
    Inherits DefaultModelBinder

    Public Overrides Function BindModel(ByVal controllerContext As ControllerContext, ByVal bindingContext As ModelBindingContext) As Object
        bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(Nothing, GetSpecificModelTypeBasedOnBindingData(bindingContext))

        Return MyBase.BindModel(controllerContext, bindingContext)
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:47:12.140

是的，可能已经指定了模型。`TryUpdateModel`例如，当有人尝试使用/更新现有模型时，就会发生这种情况，`UpdateModel`如下所示。

```
public ActionResult Update(int id)
{
   var modelToUpdate = GetExistingModel(id);

   if (TryUpdateModel(modelToUpdate)) // replacing the Model or ModelBinderContext.Metadata in the model binder could have unexpected and unwanted results.
   {
      // etc.
   }

   // etc.
} 
```

# android - 当来电来自特定号码时，振铃模式由振动变为振铃

> ID：11117926
> 
> 赞同：-1
> 
> 时间：2012-06-20T10:47:40.277
> 
> 标签：android, android-vibration

我想创建一个 android 应用程序，当来自特定号码的来电时，将模式更改为振动振铃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:01:40.263

For Changing ringing from vibration on incoming call use Use `TelephonyManager,AudioManager and PhoneStateListener` as:

```
 TelephonyManager mTelephonyMgr = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
 mTelephonyMgr.listen(new TeleListener(), PhoneStateListener.LISTEN_CALL_STATE);
class TeleListener extends PhoneStateListener 
{
    public void onCallStateChanged(int state, String incomingNumber) 
    {   
        super.onCallStateChanged(state, incomingNumber);
        switch (state) 
        {
            case TelephonyManager.CALL_STATE_IDLE: 
                //CALL_STATE_IDLE;
               break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
               //CALL_STATE_OFFHOOK;
               break;
            case TelephonyManager.CALL_STATE_RINGING: 
               //CALL_STATE_RINGING
               //CHECK YOUR PARTICULAR NUMBER HERE
               if(incomingNumber=="1234567890")
                 {
                    // USE AudioManager  for Settingringing from vibration
                    AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);   

                    switch (am.getRingerMode()) {   
                        case AudioManager.RINGER_MODE_NORMAL:   
                            Log.i("MyApp","NORMAL mode");
                            am.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
                            break;   
                    }  

                 }
                 else
                 {
                       //DO SOMETHING HERE
                 }
               break;
            default:
               break;
         }
      }

    } 
```

add `<uses-permission android:name="android.permission.READ_PHONE_STATE">` permission in manifest.xml

or How we Get Phone State using BroadcastReceiver see this tutorial:

[Get Phone State When Someone is calling using BroadcastReceiver Example](http://www.tutorialforandroid.com/2009/01/get-phone-state-when-someone-is-calling_22.html)

# html - 延伸到屏幕外的 HTML 表格

> ID：11117927
> 
> 赞同：2
> 
> 时间：2012-06-20T10:47:41.810
> 
> 标签：html, html-table, width

我有一张桌子，它从屏幕向右延伸（它已固定，并且此宽度大于屏幕宽度）。浏览器会自动在底部创建滚动条。如何指示浏览器在右侧“不可见”区域显示此表格时不创建滚动条？本练习的目的是使用 Javascript 向左滚动该表格，将其内容显示在最初不在屏幕上的右侧。

* * *

如果我为“body”设置“overflow:hidden”，则所有其他内容都将无法滚动，以防它不适合屏幕（例如，在 1024 浏览器中，因为内容已针对 1280 进行了优化）。我只需要这个表（在两个 DIV 内）不创建浏览器滚动条......

代码如下所示

```
<div style="position:relative;overflow:hidden;width:1500px">
    <div style="float:left">
        <table style="table-layout:fixed;width:1500px">
            <tr>
                <td style="width:300px">
                    aaa
                </td>
                <td style="width:300px">
                    bbb
                </td>
                <td style="width:300px">
                    ccc
                </td>
                <td style="width:300px">
                    ddd
                </td>
                <td style="width:300px">
                    eee
                </td>
            </tr>
        </table>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:49:59.950

添加以下 CSS 规则：

```
body
{
  overflow-x:hidden;
} 
```

* * *

**编辑：**看到您的评论后，`table`我`div`建议以下内容。假设您的标记是：

```
<div class="tablecontainer">
  <table />
</div> 
```

使用以下 CSS 规则：

```
div.tablecontainer
{
  overflow-x:hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:51:08.687

尝试这个

`<body style="overflow-x:hidden;">`

或使用任何 CSS 类将此属性添加到您的 body 标记中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-23T18:47:01.163

> 为其添加“overflow-x”样式。您可以隐藏溢出或为包含表格的 div 提供水平滚动。

水平滚动溢出

```
<div class="col-12" style="overflow-x:scroll;"> 
```

隐藏溢出

```
<div class="col-12" style="overflow-x:hidden;"> 
```

# c# - 从数据库提供的 ListBox 中获取 SelectedItems

> ID：11117932
> 
> 赞同：2
> 
> 时间：2012-06-20T10:47:58.667
> 
> 标签：c#, wpf, listbox, datarowview

我需要从从数据库绑定的列表框中的选定项目中获取值。但如果我尝试

```
listBoxAtribute.SelectedItems[0].ToString() 
```

它返回`System.Data.DataRowView`

有没有办法将数据从转换`DataRowView`为`string`？

我的想法是这样的：

```
for(int i = 0; i < listBoxAtribute.SelectedItems.Count; i++)
{
  MessageBox.Show(listBoxAtribute.SelectedItems[i].Tostring);
} 
```

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:53:32.803

尝试首先将列表框的选定项目转换为 DataRowItem 并访问列值，将列名传递给索引器

这是示例

```
((DataRowView)Listbox.SelectedItem)["<column_name>"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:54:04.160

如果要显示第一个列值，则将 listBoxAtribute.SelectedItem 的第一个项作为

```
for(int i = 0; i < listBoxAtribute.SelectedItems.Count; i++)
{
  MessageBox.Show(listBoxAtribute.SelectedItems[i].Item[0]); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:57:08.750

```
string[] items = listBoxAtribute.SelectedItems.Select(x => x.Item[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T13:07:12.363

假设您看到的是来自所述数据库驱动条目的单个特定列，这表明您具有`DisplayMember`列表框集的属性。可能也是`ValueMember`如此，假设您在任何地方使用 EditValue。我会沿着这些思路写一些东西。

```
((DataRowView)listBoxAtribute.SelectedItems[0])[listBoxAtribute.DisplayMember].ToString(); 
```

这样，您就可以准确地获得用户在屏幕上看到的内容。现在，如果您想要与屏幕上显示的数据不同的数据，则需要使用 user968441 的方法并对列名进行硬编码。但这也相对容易。

# image - OpenCv：在 for 循环中旋转图像时应用程序挂起

> ID：11117934
> 
> 赞同：0
> 
> 时间：2012-06-20T10:48:25.220
> 
> 标签：image, image-processing, opencv, opencvdotnet

以下代码给出了段错误和一些时间停止/挂起并且永远不会工作。

```
for(i=0;i<360;i++)

{

CVrotate(image, i); //i is angle

display("image" in some window);  

} 
```

但以下工作非常好。

```
 for(i=0;i<360;i++)

 {

 CVrotate(image, i); //i is angle

 waitkey(10);

 display("image" in some window);  
 } 
```

cvrotate是一个正在旋转图像的函数，旋转后的图像正在被opencv函数显示出来。

为什么是waitkey(); 这里需要吗？我知道只有在 CVrotate 完成其工作后才应调用显示。同样，我假设下一次迭代在显示结束时开始，而不是在那之前。请赐教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:16:16.930

[OpenCV 的 cvWaitKey() 函数有什么作用？](https://stackoverflow.com/questions/5217519/opencv-cvwaitkey) 此链接消除了有关 cvWaitkey 及其用途的所有误解。希望这对您有用。cvWaitKey 的主要作用是暂停代码一段时间。

# sql - 你将如何实现一对多的关系？

> ID：11117942
> 
> 赞同：0
> 
> 时间：2012-06-20T10:49:14.960
> 
> 标签：sql, database, database-design

一辆车**必须**有**一个**车主，一个车主可以有很多车。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T10:50:49.923

像这样的东西？

```
**Owner**
ID

**Car** 
ID
OwnerID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:59:09.157

在 Car 关系中使用外键。

**车**

carID - 主键

ownerID - 外键

**所有者**

ownerID - 主键

**例子**

![在此处输入图像描述](../Images/25f471fad5d9971e62b684287429f681.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T21:24:17.657

正如其他人所说，在它们之间使用两个表和一个外键。

我想补充一点，有两种通用策略可以做到这一点：

*   **使用识别关系（并在**子 PK 中迁移父PK）。
*   使用非识别关系（并将父 PK 迁移到子 PK**之外**）。

更多信息[在这里](https://stackoverflow.com/a/10884652/533120)和[这里](https://stackoverflow.com/questions/10656173/database-modeling-for-a-weak-entity/10658665#10658665)。

# php - 在非对象上调用成员函数，尽管对象存在

> ID：11117944
> 
> 赞同：0
> 
> 时间：2012-06-20T10:49:19.663
> 
> 标签：php, cakephp

我在这里发生了一件非常奇怪的事情。我检查了 AppController 的 beforeFilter() 函数，id 是否存在。当我打开 url /project/user/1 时它可以工作，但是当我打开 /project/user/edit/1 时它说我在非对象上使用了一个函数。我已经检查过我是否真的这样做，但我没有。我用 pr() 输出值，它显示了对象内容。

这是我的 beforeFilter() 函数：

```
$request = $this->request;

if (isset($request->params['id'])) {
            $model = Inflector::singularize(ucfirst($request->params['controller']));
            $cond = array('conditions' => array($model . '.id' => $request->params['id']));
            pr($this->{$model});
            exit;
            if (!$this->{$model}->find('first', $cond)) {
                $this->Session->setFlash(__('Invalid id.'), 'flash_notice');
                $this->redirect(array(
                    'manager' => (bool)$request->params['manager'],
                    'controller' => 'tournaments',
                    'action' => 'index'
                ));
            }
        } 
```

在执行 id 条件之前，$model 的输出包含对象数据并且是绝对正确的。我没有看到问题：/

你能帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:16:56.760

好吧，我得到了错误...

当您打开的 URL 出现其他错误（例如数据库连接错误）时，该代码根本不起作用。我很难解释，但是当我删除上面的代码并打开我的 URL 时，出现了这样的错误：

> 数据库错误
> 
> 错误：SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“isAdmin”附近使用正确的语法

当我修复该错误时，上面的代码可以正常工作。

# html - 删除表格中图像之间的空白

> ID：11117950
> 
> 赞同：14
> 
> 时间：2012-06-20T10:49:59.913
> 
> 标签：html

我知道这之前已经介绍过，但解决方案对我没有帮助——我不是程序员，但我可以处理基本的 HTML 代码。我正在尝试发送一封 HTML 电子邮件，其中有 11 个图像放置在一个表格中以成为一个大图像 - 但是当我发送它时，行之间会出现白线。

我设置了表格样式，`border="0" cellpadding="0" cellspacing="0"`但这无济于事 - 任何人都可以给我建议吗？另外，由于我不是程序员，我可能无法理解任何复杂的答案！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Untitled document</title>
</head>
<body>
<!-- Save for Web Slices (toast offer mailer 2.jpg) --> 
<table style="height: 920px;" id="Table_01" width="650" border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td colspan="2"><a href="http://www.metroplan.co.uk/2012/#/4/"> <img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_01.jpg" width="236" height="201" border="0" style="border: 0;"></a></td>
<td colspan="3"><a href="http://www.metroplan.co.uk/2012/#/78/"> <img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_02.jpg" width="177" height="201" border="0" style="border: 0;"></a></td>
<td colspan="2"><a href="http://www.metroplan.co.uk/2012/#/10/"><img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_03.jpg" width="237" height="201" border="0" style="border: 0;"></a></td>
</tr>
<tr>
<td><img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_04.jpg" width="152" height="155"></td>
<td colspan="3"><a href="http://www.metroplan.co.uk/2012/#/116/"> <img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_05.jpg" width="173" height="155" border="0" style="border: 0;"></a></td>
<td colspan="2"><a href="http://www.metroplan.co.uk/2012/#/42/"> <img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_06.jpg" width="180" height="155" border="0" style="border: 0;"></a></td>
<td><img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_07.jpg" width="145" height="155"></td>
</tr>
<tr>
<td colspan="7"><img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_08.jpg" width="650" height="237"></td>
</tr>
<tr>
<td colspan="7"><img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_09.jpg" width="650" height="231"></td>
</tr>
<tr>
<td colspan="3"><a href="http://www.metroplan.co.uk/"> <img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_10.jpg" width="314" height="95" border="0" style="border: 0;"></a></td>
<td colspan="4"><a href="mailto:marketing@metroplan.co.uk"> <img src="http://mail.bridgemailsystem.com/pms/graphics/metroplan/toast-offer-mailer-2_11.jpg" width="336" height="95" border="0" style="border: 0;"></a></td>
</tr>
<tr>
<td><img src="images/spacer.gif" width="152" height="1"></td>
<td><img src="images/spacer.gif" width="84" height="1"></td>
<td><img src="images/spacer.gif" width="78" height="1"></td>
<td><img src="images/spacer.gif" width="11" height="1"></td>
<td><img src="images/spacer.gif" width="88" height="1"></td>
<td><img src="images/spacer.gif" width="92" height="1"></td>
<td><img src="images/spacer.gif" width="145" height="1"></td>
</tr>
</tbody>
</table>
<!-- End Save for Web Slices -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-20T10:58:55.657

在图像上，尝试使用

```
style="display:block" 
```

它应该工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T11:03:07.777

From quick check I just did, looks like the problem is due to blank space inside the cells markup taking up some place and making the cells bigger.

One way around this is setting the font size of the cells to 0 thus eliminating that extra space.

[Live test case with the fix applied](http://jsfiddle.net/SHL3H/).

In your case, try adding this to the HTML you send:

```
<style type="text/css">
    table td { font-size: 0px; }
</style> 
```

This is assuming you have only one table and all cells have only images, if you have more tables then give that specific table `id` e.g. `<table id="MyImagesTable">` then change to:

```
#MyImagesTable td { font-size: 0px; } 
```

If the email client of those getting the email does not support style sheets you will have to manually set it for each cell:

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td style="font-size: 0px;">...</td>
        <td style="font-size: 0px;">...</td>
        <td style="font-size: 0px;">...</td>
    </tr>
    <!-- ...more rows... -->
</table> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-19T08:14:51.733

我也面临同样的问题。

但我试过了

```
<img src ="images/xyz.jpg"  style="display:block"> 
```

并解决了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T22:40:44.913

这个问题在许多邮件客户端上很常见，只需使用：

```
<img style="display:block" /> 
```

在您的 HTML 中的每个图像上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T11:00:32.753

在没有实际看到您的代码的情况下，我猜您会看到图像之间的空格，因为您的图像之间有实际的空间。

如果你有这样的...

```
<img src="image1.jpg">
<img src="image2.jpg"> 
```

将其更改为...（注意两个图像标签之间没有空格）

```
<img src="image1.jpg"><img src="image2.jpg"> 
```

如果您将图像放置在单个单元格中（即每个单元格一个图像），然后尝试将`border-collapse:collapse`...的 CSS

```
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse:collapse"> 
```

**更新**

正如@Shadow 指出的那样，上述任何部分都不会产生任何影响。

似乎 FireFox 和 Chrome 会像处理文本一样处理图像（出于某种原因），因此他的建议`table td { font-size:0px; }`是恕我直言，这是正确的答案。（IE 似乎不受该问题的影响。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-04T15:19:06.940

某些邮件客户端完全忽略了其中的很多内容。这始终是您在大量图形 html 电子邮件中承担的风险。几乎可以保证您的收件人看错了。我总是鼓励我的客户不要要求这种将 6 到 12 张图像组合在一个表格中的电子邮件设计。但是，总会有人坚持要完成，即使我在多个邮件客户端中向他们展示了结果，他们仍然要求完成。

如果可以的话，避免它。不幸的是，确实没有保证的解决方法。

如果您要将电子邮件发送给一组都在同一个邮件客户端中的收件人，您可能可以使用上述代码之一来解决它，以找到您的邮件客户端响应最好的那个。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-02T20:14:14.173

很多时候可能是用户错误。当您在 Photoshop 中切片时，请确保所有切片都可以触摸。如果有 1px 的差距，那一切都会搞砸的！！！

另外，这是我学到的一个技巧......

将所有图像设置为在 alt=""... 之后有一个border="0" 标签

如果有任何** **标签，我的意思是只有，不是

所以例如....

试试看，并确保所有图像的边框 =“0”，所有标签都有一个固定的宽度，所有的切片都是接触的，你应该有 0 个间隙。

# browser - 到目前为止，除了 Chrome 之外，还有其他浏览器实现了 WebRTC 吗？

> ID：11117957
> 
> 赞同：2
> 
> 时间：2012-06-20T10:50:28.780
> 
> 标签：browser, webrtc

谷歌非常重视在 Chrome 中实施 WebRTC，这从 Chrome 的 Canary 和 Beta 通道的频繁更新中可以看出。是否有其他浏览器可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T03:13:39.093

Firefox/IE/Opera 正在处理它。Apple/Safari 或 Microsoft/IE 没有任何消息，尽管 IE 充其量是不太可能的，因为不幸的是他们正在制定自己的标准。更疯狂的事情发生了，但我不会指望它。苹果在这个问题上一直保持沉默。

如果您想支持其他浏览器，我们使用[IceLink](http://www.frozenmountain.com/downloads#icelink)为它构建了一个解决方案@Frozen Mountain（我在那里工作） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:58:44.707

[Opera Mobile](http://weblog.bocoup.com/javascript-webrtc-opera-mobile-12/)确实提供对 WebRTC 的支持。根据[这篇](http://hacks.mozilla.org/2012/04/webrtc-efforts-underway-at-mozilla/)文章，Mozilla 也不甘落后。爱立信实验室有自己的支持 WebRTC的[自定义浏览器。](https://labs.ericsson.com/apis/web-real-time-communication/downloads)但它目前仅在 Ubuntu 上运行。WebRTC 本身仍在开发中，我相信我们可以在一段时间内看到所有主要浏览器的完全支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T20:09:57.423

Mozilla 在实施 WebRTC 方面走得很远，我们正在领导 WebRTC 中 DataChannels 的设计和实施，以及身份工作。我们现在正在开发一个特定于项目的 repo (alder)，但部分内容已经转移到 mozilla-central，例如对 getUserMedia 的初始支持。

# asp.net - 在标记中使用 if 条件中的值

> ID：11117962
> 
> 赞同：2
> 
> 时间：2012-06-20T10:50:33.743
> 
> 标签：asp.net, vb.net, databinder

我想在 if 语句中使用从 SQL 中提取的值。理想情况下，我想做相当于

```
<% If DataBinder.Eval(Container, "DataItem.BookID") == 1 Then%> 
```

有没有办法用正确的语法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:59:24.173

这就是您在 aspx 文件中放置条件的方式。根据我的理解，只是一个粗略的示例：

```
<%# System.Convert.ToInt32((DataBinder.Eval(Container.DataItem, "BookID")!="") ? DataBinder.Eval(Container.DataItem, "BookID"):0) %> 
```

确保 BookID 中有 int 而不是任何其他类型。

**进一步解释：**

如果你想要一个 if else 条件：

```
<%# If DataBinder.Eval(Container.DataItem, "DATAFIELD") <> "" Then

   Response.Write("something")

End If %> // This is invalid 
```

上面的语句可以**正确地**写在 aspx 文件中，如下所示：

```
<%# DataBinder.Eval(Container.DataItem, "DataField").Equals("")?"":"Something"%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T02:22:16.103

我不确定这是否可以按照您要求的方式完成。

您可能知道也可能不知道，执行此操作的典型方法是在您的标记中进行控制，就像这样

```
<asp:listView ID="SophiesListView" ...
..
<ItemTemplate>
<asp:HyperLink ID="hlGlossary" title="click here for more information" target="_blank" runat="server" />
</ItemTemplate>
</asp:listView /> 
```

然后，在代码隐藏中，找到您的列表视图/中继器/数据网格或您有什么并选择 ItemDataBound。在此事件中，执行以下操作：

```
If e.Item.DataItem("vehicleType") IsNot DBNull.Value AndAlso e.Item.DataItem("vehicleType") = "JETSKI" Then
    DirectCast(e.Item.FindControl("hlGlossary"), HyperLink).NavigateUrl = "Glossary.aspx#JETSKI"
    DirectCast(e.Item.FindControl("hlGlossary"), HyperLink).Text = "?"
End If 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T13:05:46.780

为了使您的页面逻辑尽可能简单，最好的办法是将数据绑定到控件的 Visible 属性。例如，如果您只想在 BookID == 1 的情况下显示一些 html，则在您的数据源上创建一个新属性，如下所示

```
public bool Show
{
     get
     {
         return BookID == 1;
     }
} 
```

在您的页面中，您将拥有

```
<asp:Placeholder runat="server" Visible='<%# Eval("Show") %>'>
    ...html goes here...
</asp:Placeholder> 
```

# ruby - 将全角日文文本转换为半角（zen-kaku 到 han-kaku）

> ID：11117966
> 
> 赞同：6
> 
> 时间：2012-06-20T10:50:44.130
> 
> 标签：ruby, text, unicode, cjk

在 PHP 中，可以使用函数将双角字符转换为单角字符`mb_convert_kana`。他们称其为“将禅格转化为韩格”。例如，我有一个要转换的字符串：

```
dbl = "ＢＯＸ" 
```

我想找到一些这样的方法

```
dbl = "ＢＯＸ".convert_to_half_width # dbl is now "BOX" 
```

有没有办法在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-26T00:58:16.273

我使用 Ruby 内置`NKF`和`String#tr`

```
require 'nkf'
dbl = "ＢＯＸｶﾀｶﾅ"
dbl = NKF.nkf('-X -w', dbl).tr('０-９ａ-ｚＡ-Ｚ', '0-9a-zA-Z')
# dbl now is "BOXカタカナ" 
```

这还具有将半角片假名转换为全角片假名的额外好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T16:02:10.297

嗯，它不漂亮，它只适用于罗马字（可以扩展到处理其他字符）但它对我有用：

```
title = "ＢＯＸ"
englishReplacements = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"
japaneseReplacements = "ａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ１２３４５６７８９０"

converted = title.tr(japaneseReplacements, englishReplacements) 
# title is now "BOX" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:00:28.310

有一个宝石：[hz_on_fly](https://github.com/jinzhu/hz_on_fly)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-26T02:03:58.373

我认为[Moji](https://github.com/gimite/moji) gem（[日文文档](http://gimite.net/gimite/rubymess/moji.html)）非常适合这个，一般来说也是一个非常有用的日语 gem（适用于 Ruby 1.8 和 1.9）：

```
require 'moji'

dbl = Moji.zen_to_han("ＢＯＸ")
# => "BOX" 
```

# php - xhprof 图表说明

> ID：11117971
> 
> 赞同：1
> 
> 时间：2012-06-20T10:50:56.293
> 
> 标签：php, optimization, profiling, xhprof

对于分析，我已经开始使用 XHprof。不错的工具！但是，我自己无法回答的一个问题与图表内容有关。有谁知道 XHProf 生成的图表上的颜色框和箭头宽度是什么意思？

**更新** 这不是最后一个问题，这里有几个新问题：

*   为什么图表上可能有两个或多个红色方块，但只有一个会用黄色方块的粗箭头连接？
*   load:: in "Function name" column (on table mode view) 是什么意思？这是否意味着 PHP 花费了（cpu、mem 等）来加载该文件？CPU 时间和内存使用量因文件而异，是否取决于文件大小？或文件内容？或两者 ？或者是其他东西 ？
*   当你看到这样的图表时，你能说什么（没有细节）？

[https://dl.dropbox.com/u/7017985/Screenshots/h4kq.png](https://dl.dropbox.com/u/7017985/Screenshots/h4kq.png) [https://dl.dropbox.com/u/7017985/Screenshots/r1bc.png](https://dl.dropbox.com/u/7017985/Screenshots/r1bc.png)

是否有可能在没有细节的情况下弄清楚任何事情，只看这些图表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:44:17.990

*   红色方块只是占用大量总时间的项目。黄色方块是程序到达它们的路径。如果您想提高性能，请先查看红色方块 :)
*   查看我的示例， load:: 是加载特定文件的方法调用，所以是的，不同的调用将取决于加载的文件的大小。
*   如上，先看红色方块，提高性能。在第二个链接上，您可能有一些可以优化的 sql 查询。

# c - 如何在 C 中同时使用 libevent 和 pthread

> ID：11117977
> 
> 赞同：10
> 
> 时间：2012-06-20T10:51:30.683
> 
> 标签：c, libevent

main函数基于libevent，但函数中有一个long run task。所以启动 N 个线程来运行任务。这个想法可以吗？以及如何在 C 中同时使用 libevent 和 pthread？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-21T05:12:05.290

碰到一个老问题，可能已经解决了。但是发布答案以防万一其他人需要它。

是的，在这种情况下可以进行线程化。我最近在 pthreads 中使用了 libevent，它似乎工作得很好。这是代码：

```
#include <stdint.h>
#include <pthread.h>
#include <event.h>

void * thread_func (void *);

int main(void)
{
    int32_t tid = 0, ret = -1;
    struct event_base *evbase;
    struct event *timer;
    int32_t *t_ret = &ret;
    struct timeval tv;

    // 1\. initialize libevent for pthreads
    evthread_use_pthreads();

    ret = pthread_create(&tid, NULL, thread_func, NULL);
    // check ret for error

    // 2\. allocate event base
    evbase = event_base_new();
    // 3\. allocate event object
    timer = event_new(evbase, -1, EV_PERSIST, callback_func, NULL);
    // 4\. add event
    tv.tv_sec = 0;
    tv.tv_usec = 1000;
    evtimer_add(timer, &tv);
    // 5\. start the event loop
    event_base_dispatch(evbase);   // event loop

    // join pthread...

    // 6\. free resources
    event_free(timer);
    event_base_free(evbase);
    return 0;
}

void * thread_func(void *arg)
{
    struct event *ev;
    struct event_base *base;

    base = event_base_new();
    ev = event_new(base, -1, EV_PERSIST, thread_callback, NULL);
    event_add(ev, NULL);  // wait forever
    event_base_dispatch(base);  // start event loop

    event_free(ev);
    event_base_free(base);
    pthread_exit(0);
} 
```

如您所见，在我的例子中，主线程的事件是计时器。遵循的基本逻辑如下：

1.  调用**evthread_use_pthreads()**为 Linux 上的 pthreads 初始化 libevent（我的例子）。对于 Windows **evthread_use_window_threads()**。**查看event.h**本身给出的文档。
2.  按照文档中的说明在全局堆上分配**event_base结构。**确保检查返回值是否有错误。
3.  同上，但分配**事件**结构本身。就我而言，我没有等待任何文件描述符，因此 -1 作为参数传递。另外，我希望我的事件持续存在，因此**EV_PERSIST**。回调函数的代码被省略。
4.  安排事件执行
5.  启动事件循环
6.  完成后释放资源。

在我的案例中使用的 Libevent 版本是**libevent2 5.1.9**，您还需要**libevent_pthreads.so**库进行链接。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T17:29:29.720

这篇博文中有一个多线程 libevent 示例： [http ://www.roncemer.com/multi-threaded-libevent-server-example](http://www.roncemer.com/multi-threaded-libevent-server-example)

他的解决方案是，引用：

> 解决方案是为每个活动连接创建一个 libevent 事件队列 (AKA event_base)，每个连接都有自己的事件泵线程。这个项目正是这样做的，为您提供编写高性能、多线程、基于 libevent 的套接字服务器所需的一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:10:12.610

那会奏效。

在 I/O 回调函数中，将耗时的工作委托给线程池的另一个线程。确切的机制取决于工作线程或线程池的接口。

要将结果从工作线程传回 I/O 线程，请使用管道。工作线程将指向结果对象的指针写入管道，然后 I/O 线程唤醒并从管道中读取指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T17:50:58.193

**注意**这适用于 libev 而不是 libevent，但这个想法可能适用。

在这里，我为社区提供了一个示例。请评论并让我知道是否有任何明显的错误。此示例可能包括用于线程终止和将来优雅退出的信号处理程序。

```
//This program is demo for using pthreads with libev. 
//Try using Timeout values as large as 1.0 and as small as 0.000001
//and notice the difference in the output

//(c) 2009 debuguo
//(c) 2013 enthusiasticgeek for stack overflow
//Free to distribute and improve the code. Leave credits intact
//compile using:           gcc -g test.c -o test -lpthread -lev

#include <ev.h>
#include <stdio.h> // for puts
#include <stdlib.h>
#include <pthread.h>

pthread_mutex_t lock;
double timeout = 0.00001;
ev_timer timeout_watcher;
int timeout_count = 0;

ev_async async_watcher;
int async_count = 0;

struct ev_loop* loop2;

void* loop2thread(void* args)
{ 
    // now wait for events to arrive on the inner loop
    ev_loop(loop2, 0);
    return NULL;
}

static void async_cb (EV_P_ ev_async *w, int revents)
{
    //puts ("async ready");
    pthread_mutex_lock(&lock);     //Don't forget locking
    ++async_count;
    printf("async = %d, timeout = %d \n", async_count, timeout_count);
    pthread_mutex_unlock(&lock);   //Don't forget unlocking
}

static void timeout_cb (EV_P_ ev_timer *w, int revents) // Timer callback function
{
    //puts ("timeout");
    if(ev_async_pending(&async_watcher)==false){ //the event has not yet been processed (or even noted) by the event loop? (i.e. Is it serviced? If yes then proceed to)
        ev_async_send(loop2, &async_watcher); //Sends/signals/activates the given ev_async watcher, that is, feeds an EV_ASYNC event on the watcher into the event loop. 
    }

    pthread_mutex_lock(&lock);     //Don't forget locking
    ++timeout_count;
    pthread_mutex_unlock(&lock);   //Don't forget unlocking
    w->repeat = timeout;
    ev_timer_again(loop, &timeout_watcher); //Start the timer again.
}

int main (int argc, char** argv)
{
    if (argc < 2) {
        puts("Timeout value missing.\n./demo <timeout>");
        return -1;
    }
    timeout = atof(argv[1]);

    struct ev_loop *loop = EV_DEFAULT;  //or ev_default_loop (0);

    //Initialize pthread
    pthread_mutex_init(&lock, NULL);
    pthread_t thread;

    // This loop sits in the pthread
    loop2 = ev_loop_new(0);

    //This block is specifically used pre-empting thread (i.e. temporary interruption and suspension of a task, without asking for its cooperation, with the intention to resume that task later.)  
    //This takes into account thread safety
    ev_async_init(&async_watcher, async_cb);
    ev_async_start(loop2, &async_watcher);
    pthread_create(&thread, NULL, loop2thread, NULL);

    ev_timer_init (&timeout_watcher, timeout_cb, timeout, 0.); // Non repeating timer. The timer starts repeating in the timeout callback function
    ev_timer_start (loop, &timeout_watcher);

    // now wait for events to arrive on the main loop
    ev_loop(loop, 0);
    //Wait on threads for execution
    pthread_join(thread, NULL);

    pthread_mutex_destroy(&lock);
    return 0;
} 
```

# jquery - 使用类序列化？

> ID：11117979
> 
> 赞同：1
> 
> 时间：2012-06-20T10:51:41.243
> 
> 标签：jquery, serialization, jquery-selectors, jquery-ui-sortable

我目前在标签中使用`id`值，即：`div``serialize`

HTML：

```
<div class="column">
    <div id="portlet_1">some content here</div>
    <div id="portlet_2">some content here</div>
    <div id="portlet_3">some content here</div>
</div> 
```

jQuery：

```
$(this).sortable('serialize', {key: 'item'}) 
```

这很好用。

问题是我需要允许用户动态选择他/她想要在屏幕上的哪个 portlet，如果他们愿意，他们可以在屏幕上多次使用相同的 portlet，即：

HTML：

```
<div class="column">
    <div id="portlet_1">some content here</div>
    <div id="portlet_1">some content here</div>
    <div id="portlet_1">some content here</div>
    <div id="portlet_2">some content here</div>
    <div id="portlet_2">some content here</div>
    <div id="portlet_3">some content here</div>
</div> 
```

`id`由于相同的 s ，这会导致很多问题。

现在我已经将结构更改为使用`class`es 而不是`id`s，即：

HTML：

```
<div class="column">
    <div class="portlet_1">some content here</div>
    <div class="portlet_1">some content here</div>
    <div class="portlet_1">some content here</div>
    <div class="portlet_2">some content here</div>
    <div class="portlet_2">some content here</div>
    <div class="portlet_3">some content here</div>
</div> 
```

如何基于`class`而不是序列化`id`？

`id`这是一个更完整的代码摘录，因为它基于s序列化，所以它不起作用：

jQuery：

```
$(".column").sortable({
    connectWith: '.column',
    update: function(event, ui) {
        var that = this;

        $.ajax({
            url: 'some web service here',
            type: 'POST',
            data: { strItems:$(that).sortable('serialize', {key: 'item'}) },
            error: function(xhr, status, error) {
                //some error message here
            },
            success: function() {
                //do something on success
            }
        });

    }
}); 
```

抱歉，忘了说我使用的是旧的 jquery 1.4 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:06:45.683

试试这个 ：

```
$(this).sortable('serialize', {key: 'item', attribute: 'class'}); 
```

jQuery UI 1.8[文档](http://docs.jquery.com/UI/Sortable#method-serialize)：

> 可能的选项是：'key'（用你想要的任何东西替换 part1[]）、'attribute'（测试除 'id' 之外的另一个属性）和'expression'（使用你自己的正则表达式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:11:50.300

您可以手动完成：

```
data: function(){
    var mySerial;
    $(this).find('div').each(function(){
        var raw = $(this).attr('class');
        var el = raw.split('_');
        mySerial += el[0]+"[]="+el[1]+"&";
    });
    return mySerial.substr(0,(mySerial.length-1));
} 
```

这应该返回如下内容： `portlet[]=1&portlet[]=1&portlet[]=2`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:46:17.550

这是这个要点。

```
jQuery('.class_input').serializeAnything() 
```

[https://gist.github.com/4482228](https://gist.github.com/4482228)

```
(function($) {

$.fn.serializeAnything = function() {

var toReturn = [];

$.each(this, function() {

if (this.name && !this.disabled && (this.checked || /select|textarea/i.test(this.nodeName) || /text|hidden|password/i.test(this.type))) {

var val = $(this).val();

toReturn.push( encodeURIComponent(this.name) + "=" + encodeURIComponent( val ) );

}

});

return toReturn.join("&").replace(/%20/g, "+");

}

})(jQuery); 
```

# windows - 如何使用 InstallShied 2009 在 msi 创建中自定义消息？

> ID：11117980
> 
> 赞同：0
> 
> 时间：2012-06-20T10:51:45.223
> 
> 标签：windows, installation

我正在为 x64 位创建 msi 设置，并且已经在模板摘要中声明它是 x64 和 1033 用于语言设置。如果版本是“NOTVersionNT64”，我还创建了一个条件来给出消息“需要 64 位处理器”。当我尝试在 32 位上安装此设置时，它必须给我一条消息，例如“需要 64 位处理器”，但它却给了我以下消息——“此处理器类型不支持此安装包。联系您的产品供应商。

如何自定义上述消息以提供用户友好的消息，例如“运行此设置需要 64 位处理器”？

任何帮助将不胜感激。

谢谢，维迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:00:35.970

不，您不能自定义此消息。

Windows 安装程序检测到您的程序包适用于 64 位体系结构，而您尝试以 32 位消息运行它，并显示错误消息。32 位机器上的所有 64 位软件包都会显示相同的错误消息。

自定义消息的唯一方法是使用引导程序。除非您真的需要引导程序，否则我不建议您使用它。

# web-services - 在哪里可以获得弹簧模拟库？

> ID：11117983
> 
> 赞同：0
> 
> 时间：2012-06-20T10:51:50.463
> 
> 标签：web-services, spring, mocking, spring-3

我想用`org.springframework.mock.web.MockHttpServletRequest`

它没有出现在我从[Spring 官方网站下载的任何这些链接上](http://www.springsource.org/download/community?project=Spring%2520Framework)

不知道在哪里可以获得模拟库，因为它没有出现在 spring 框架库中。有什么建议么？

我基本上是在尝试使用：

```
 private MockHttpServletRequest request;
    private MockHttpServletResponse response; 
```

对我的控制器进行单元测试。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:03:58.527

在这里找到库[http://mvnrepository.com/artifact/org.springframework/spring-test/2.5](http://mvnrepository.com/artifact/org.springframework/spring-test/2.5)

弹簧测试

# tsql - SQL：针对列的 PIVOTting 计数和百分比

> ID：11117987
> 
> 赞同：3
> 
> 时间：2012-06-20T10:52:05.723
> 
> 标签：tsql, sql-server-2008-r2, pivot, aggregate

我正在尝试生成一份报告，显示每个零件编号的这些零件的测试结果，包括通过和失败的数量，以及通过和失败的百分比。

到目前为止，我有以下内容：

```
SELECT r2.PartNo, [Pass] AS Passed, [Fail] as Failed
    FROM
    (SELECT ResultID, PartNo, Result FROM Results) r1
PIVOT (Count(ResultID) FOR Result IN ([Pass], [Fail])) AS r2
ORDER By r2.PartNo 
```

这是解决方案的一半（通过和失败的总数）；问题是，我如何推动并包括百分比？

我还没有尝试过，但我想我可以从头开始，并建立一系列子查询，但这更像是一个学习练习 - 我想知道“最好”（最优雅或最有效）的解决方案，所以我想我会寻求建议。

*我可以扩展这个 PIVOT 查询，还是应该采取不同的方法？*

DDL：

```
CREATE TABLE RESULTS (
    [ResultID] [int] NOT NULL,
    [SerialNo] [int] NOT NULL,
    [PartNo] [varchar](10) NOT NULL,
    [Result] [varchar](10) NOT NULL); 
```

DML：

```
INSERT INTO Results VALUES (1, '100', 'ABC', 'Pass')
INSERT INTO Results VALUES (2, '101', 'DEF', 'Pass')
INSERT INTO Results VALUES (3, '100', 'ABC', 'Fail')
INSERT INTO Results VALUES (4, '102', 'DEF', 'Pass')
INSERT INTO Results VALUES (5, '102', 'DEF', 'Pass')
INSERT INTO Results VALUES (6, '102', 'DEF', 'Fail')
INSERT INTO Results VALUES (7, '101', 'DEF', 'Fail') 
```

**更新：**

根据bluefeet的回答，我的解决方案是：

```
SELECT r2.PartNo, 
    [Pass] AS Passed, 
    [Fail] as Failed,
    ROUND(([Fail] / CAST(([Pass] + [Fail]) AS REAL)) * 100, 2) AS PercentFailed
    FROM
    (SELECT ResultID, PartNo, Result FROM Results) r1
PIVOT (Count(ResultID) FOR Result IN ([Pass], [Fail])) AS r2
ORDER By r2.PartNo 
```

我已经将 FLOAT 舍入（而不是 CAST 到 DECIMAL 两次），因为它的效率更高一点，而且我还决定我们只需要失败 %age。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T14:31:01.967

听起来您只需要为 Percent Passed 和 Percent Failed 添加一列。您可以在`PIVOT`.

```
SELECT r2.PartNo
    , [Pass] AS Passed
    , [Fail] as Failed
    , ([Pass] / Cast(([Pass] + [Fail]) as decimal(5, 2))) * 100 as PercentPassed
    , ([Fail] / Cast(([Pass] + [Fail]) as decimal(5, 2))) * 100 as PercentFailed
FROM
(
    SELECT ResultID, PartNo, Result 
    FROM Results
) r1
PIVOT 
(
    Count(ResultID) 
    FOR Result IN ([Pass], [Fail])
) AS r2
ORDER By r2.PartNo 
```