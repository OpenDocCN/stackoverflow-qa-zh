# StackOverflow 问答 10907000-10907999

# android - 手机和平板的兼容模式

> ID：10907000
> 
> 赞同：0
> 
> 时间：2012-06-06T01:02:30.697
> 
> 标签：android, android-layout, android-emulator

[阅读“屏幕兼容模式”文档](http://developer.android.com/guide/practices/screen-compat-mode.html)后，我很困惑。首先，我创建了同一张图片的两种不同尺寸。其次，我只创建了一个布局。第三，我为我的图像设置了 150dip。最后，我在我的 Galaxy SII（高密度）中得到了正确的结果，但是当我模拟平板电脑 10 英寸（中密度）时我没有得到正确的结果。查看两个设备中到右边框的距离。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="150dip"
    android:layout_height="150dip"
    android:text="DENSIDADE" />

<ImageView 
    android:id="@+id/image1"
    android:src="@drawable/mode_tapcolor"
    android:layout_width="150dip"
    android:layout_height="150dip" />

</LinearLayout> 
```

![Tablet 10 模拟器](../Images/8afeb732b58aa43475bf38fe8423168a.png) ![三星盖乐世 SII](../Images/befc2234155bfcca38a4328e2c2bfcb9.png)

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:15:15.873

您应该在**res**中创建另一个文件夹**value-xlarge**来存储维度值。所以 XML 代码应该是：

 ****布局.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="@dimen/default_width"
    android:layout_height="@dimen/default_height"
    android:text="DENSIDADE" />

<ImageView 
    android:id="@+id/image1"
    android:src="@drawable/mode_tapcolor"
    android:layout_width="@dimen/default_width"
    android:layout_height="@dimen/default_height" />

</LinearLayout> 
```

**值/尺寸.xml：**

```
<resources>
    <dimen name="default_width">75dip</dimen>
    <dimen name="default_height">75dip</dimen>
</resources> 
```

**值-xlarge/dimens.xml：**

```
<resources>
    <dimen name="default_width">150dip</dimen>
    <dimen name="default_height">150dip</dimen>
</resources> 
```

因此，当安装 apk 时，它将为正确的设备使用正确的尺寸值。drawable 也是如此，如果需要，您可以创建 drawable-xlarge 来存储平板电脑的图像。**

# ios - 如果视图控制器由于内存压力低而被卸载，一旦它即将再次显示，是否会再次调用 loadView？

> ID：10907007
> 
> 赞同：0
> 
> 时间：2012-06-06T01:03:13.273
> 
> 标签：ios, uiviewcontroller, loadview

我知道当应用程序处于低内存压力时会调用viewDidUnload，那么当相关视图/控制器即将再次“活动”时，会调用loadView吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:51:35.017

是的，它会。查看 iOS 视图控制器编程指南的[了解视图是如何加载和卸载](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW2)的部分，以查看其工作原理的流程图。的[文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW1)还指出，`-loadView`当访问属性时将调用此方法`view`，但当前是`nil`.

# objective-c - Objective - C，使用 NSDecimalNumberHandler 和 NSDecimalNumberBehaviors 协议

> ID：10907009
> 
> 赞同：2
> 
> 时间：2012-06-06T01:03:26.213
> 
> 标签：objective-c, ios, protocols, nsdecimalnumber, raise

对于那些学习 Objective-C 的人来说，计算器课似乎是一个流行的起点。所以在我的“计算器”类中，我定义了我的加法函数以使用“decimalNumberByAdding:withBehavior:”方法。'_behavior' 在 init 方法中定义。描述的代码如下所示：

```
-(id)init
{
    if ((self = [super init]))
    {
        // Yes, raise errors (or exceptions) 
        // on all of these cases, 
        // and control the scale (number precision).
        _behavior = [NSDecimalNumberHandler 
                    decimalNumberHandlerWithRoundingMode:NSRoundPlain 
                    scale:NSDecimalNoScale 
                    raiseOnExactness:YES 
                    raiseOnOverflow:YES 
                    raiseOnUnderflow:YES 
                    raiseOnDivideByZero:YES];
    }
    return self;
}

// My addition method
-(NSDecimalNumber *)addNum1:(NSDecimalNumber *)num1 
                    andNum2:(NSDecimalNumber *)num2
{
    NSDecimalNumber *result = [num1 decimalNumberByAdding:num2
                                    withBehavior:_behavior];
    return result;
} 
```

要正确使用 NSDecimalNumberBehaviors 协议，需要实现 3 个方法：'-roundingMode'、'-scale' 和 '-exceptionDuringOperation:error:leftOperand:rightOperand:'（但是，上面的 NSDecimalNumberHandler 中没有指定 roundingMode 和 scale，称为'_行为'？）。

使用此协议的动机是如果出现“_behavior”中定义的错误之一（例如溢出或精度丢失错误），则引发并处理异常。

在搜索网络和 Apple 的文档后，尚不清楚如何使用 NSDecimalNumberBehaviors 协议，以及如何正确引发和处理上面“_behavior”中描述的错误（与“_behavior”相比，协议实现似乎包括冗余' 宣言）。

使用 NSDecimalNumberBehaviors 协议并引发和处理“_behavior”中定义的错误的正确方法是什么？也许一个例子最有帮助。谢谢 ： ）

- 更新：

再次查看文档后，我现在看到 NSDecimalNumberHandler 采用了 NSDecimalNumberBehaviors 协议。所以这意味着我只需要正确初始化和使用 NSDecimalNumberHandler 。

添加除法方法后（为了测试除以 0 异常），我看到代码看起来更像这样：

```
-(id)init
{
    if ((self = [super init]))
    {
    // Yes, raise errors (or exceptions) 
        // on all of these cases, 
        // and control the scale (number precision).
        _behavior = [NSDecimalNumberHandler alloc] 
                    initWithRoundingMode:NSRoundPlain
                    scale:NSDecimalNoScale 
                    raiseOnExactness:YES 
                    raiseOnOverflow:YES 
                    raiseOnUnderflow:YES 
                    raiseOnDivideByZero:YES];
    }
    return self;
}

// My division method
-(NSDecimalNumber *)divideNum1:(NSDecimalNumber *)num1 byNum2:(NSDecimalNumber *)num2
{
    NSDecimalNumber *result = [num1 decimalNumberByDividingBy:num2
                                    withBehavior:_behavior];
    return result;
} 
```

实际上，除以 0 会引发未捕获的异常并终止程序。好的，这样更好。我如何捕获抛出的异常，以及在语法上，在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:34:40.930

使用`@try`, `@catch`ObjC 文字。将您的除法代码包装在`@try`块中，并在块中捕获捕获的异常`@catch`。

# javascript - 两个视图，一个模型 - 如何处理两者的获取错误？

> ID：10907013
> 
> 赞同：0
> 
> 时间：2012-06-06T01:03:39.163
> 
> 标签：javascript, backbone.js, backbone-views

我有一个模型在 2 个视图之间共享。我希望将错误附加到在两个视图中都显示错误的 fetch 方法。

但是，如果我执行 model.fetch({error:...})，则该错误只会涉及一个视图

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:27:30.770

错误地触发模型上的事件并在两个视图中监听它。

# iis - 使用 isapi_wsgi 通过 IIS 访问多个 Trac 项目

> ID：10907016
> 
> 赞同：0
> 
> 时间：2012-06-06T01:04:37.417
> 
> 标签：iis, wsgi, trac, isapi

我是错误跟踪系统领域的新手。

我设法在 Windows Server 2003 中安装了 Trac 0.12，并且能够使用 IIS 通过 isapi_wsgi 扩展使用此处找到的过程为项目提供服务：http: [//trac.edgewall.org/wiki/TracOnWindowsIisIsapi](http://trac.edgewall.org/wiki/TracOnWindowsIisIsapi)

我将 Trac 项目安装在 中`c:\Trac\Project1`，生成 cgi-bin 和 htdocs 目录并将它们放在`c:\Trac\Project1\`.

现在我想创建与 Project1 相同级别的其他项目（`c:\Trac\Project2`等等`c:\Trac\Project3`）。

如何更改 trac_wsgi.py 并使用如下 URL：“ `http://localhost/Project1`”、“ `http://localhost/Project2`”等？

我对 IIS 有基本的经验，而对 Python 完全没有经验。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:26:49.687

您选择了看起来不错的安装说明。如果我理解正确，您的答案已经在此处给出的示例中：

```
# Setup the virtual directories - this is a list of directories our
# extension uses - in this case only 1. 
```

因此，您需要通过使用如下目录列表复制示例来注册多个虚拟目录（未经测试）：

```
vd1 = VirtualDirParameters(Name="Project1",
                          Description = "ISAPI-WSGI Trac",
                          ScriptMaps = sm,
                          ScriptMapUpdate = "replace"
                          )
vd2 = VirtualDirParameters(Name="Project2",
                          Description = "ISAPI-WSGI Trac",
                          ScriptMaps = sm,
                          ScriptMapUpdate = "replace"
                          )
...
params.VirtualDirs = [vd1, vd2, ...] 
```

我不知道，如果你真的想摆脱的`ENV_PARENT_DIR`路径。使用“http://localhost/trac/Project1”而不是“http://localhost/Project1”会不会很痛？这是多个项目 Trac 安装的常见和预期布局。只是我的2ct。

# ios - IOS导航非分层

> ID：10907021
> 
> 赞同：2
> 
> 时间：2012-06-06T01:06:05.000
> 
> 标签：ios, navigation, segue

我有一个使用 iOS 5 和 Xcode 4.3.2 的 iOS 应用程序，它由 7 个视图控制器组成。VC1 链接到 VC2，VC2 可以链接到 VC3-VC7，并且这些控制器中的每一个都可以相互链接（将其视为侧边栏导航）。如果我使用 segues，视图会重复添加到堆栈中，并且如果用户来回移动它可能会使用大量内存。如何在释放前一个控制器的地方实现此导航？它们都是小型控制器，因此加载它们需要很少的时间/处理器/内存。我可以先presentViewController，然后以某种方式释放presentingViewController吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:20:17.793

如果你实现了一个 UINavigationController，你可以使用 push 和 pop 视图控制器方法来回切换。 [此处描述了popToViewController:animated:](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/popToViewController%3aanimated%3a)以及其他 3 个有用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T01:20:59.437

看来从 VC1 到 VC2 应该没有问题。对于 VC3 - VC7，您可以：

*   呈现为 modalViewController 而不是将其推送到堆栈。

或者： - 如果控制器已经存在于控制器堆栈中，则使用 UINavigationController 的 popToViewController:animated: 函数，否则推送它。像

```
// Assuming u need to push VC6
for(UIViewController *controller in [urNavController viewControllers]){
        if([controller isKindOfClass:[VC6 class]])
        {
           [urNavController popToViewController:controller animated:YES];
        }
        else{
            VC6 *VC6controller = [[VC6 alloc] init];
           [urNavController pushViewController:VC6controller];
        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T02:23:30.027

您可以使用`UINavigationController`'`- (void)setViewControllers:(NSArray *)viewControllers animated:(BOOL)animated`方法删除最上面的任何视图控制器。由于导航控制器的`viewControllers`数组是不可变的，因此您不能直接在数组上使用任何`NSMutableArray`'s方法。您必须将 a制成一个可变数组，从可变数组中删除您希望丢弃的任何（隐藏）视图控制器，并将生成的精简视图控制器堆栈传递给上述方法。由于您的最顶层视图控制器将保持不变，因此在您的情况下将没有过渡动画（请参见下面的讨论），因此您也可以直接设置 viewControllers 属性而无需打扰参数。`removeObject...``viewControllers``mutableCopy``animated:`

来自 Apple 的文档：

讨论 您可以使用此方法更新或替换当前视图控制器堆栈，而无需显式推送或弹出每个控制器。此外，此方法允许您在不为更改设置动画的情况下更新控制器集，当您希望将导航控制器返回到以前的状态时，这可能适用于启动时。

如果启用了动画，此方法会根据 items 数组中的最后一项是否已经在导航堆栈中来决定执行哪种类型的转换。如果视图控制器当前在堆栈中，但不是最顶部的项目，则此方法使用弹出过渡；如果它是最顶层的项目，则不执行转换。如果视图控制器不在堆栈上，则此方法使用推送转换。只执行一次转换，但当该转换完成时，堆栈的全部内容将被新的视图控制器替换。例如，如果控制器 A、B 和 C 在堆栈上，并且您设置了控制器 D、A 和 B，则此方法使用弹出转换，并且生成的堆栈包含控制器 D、A 和 B。

# php - 我只需要在 mySQL 的表中显示前缀为“250”的记录

> ID：10907027
> 
> 赞同：0
> 
> 时间：2012-06-06T01:07:09.957
> 
> 标签：php, mysql, filter, html-table

我只需要过滤以“250”开头的记录，而不是显示我的所有记录。有没有办法改变我现有的表格脚本只显示以“250”开头的记录？

```
<?php
$db = new mysqli("localhost", "XXXXXX", "XXXXXX", "naturan8_hero");
$query = "SELECT type, part_no, description, artwork, min, max, qty FROM cartons_current     LIMIT 0,100"; 
$result = $db->query($query, MYSQLI_STORE_RESULT);
$o = '<table id="tablesorter-demo" class="tablesorter" border="0" cellpadding="0" cellspacing="1"><thead><tr><th>TP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Item Number&nbsp;&nbsp; &nbsp; &nbsp;</th><th>Description</th><th>Artwork No.   </th><th class="hidden">PDF &nbsp; &nbsp;</th><th>Min &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Max &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th><th>Qty&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</th>  </tr></thead><tbody>';
while(list($type, $part_no, $description, $artwork, $min, $max, $qty) = $result->fetch_row()) {
$o .= '<tr><td>'.$type.'</td><td class="ptn">'.$part_no.'</td><td>'.$description.'</td><td>'.$artwork.' &nbsp; &nbsp;</td><td class="hidden"><a href="/data/hero/upload/'.$part_no.'.pdf" target="_blank">Link &nbsp;</a></td><td align="right" class="min">'.$min.'</td><td align="right" class="max">'.$max.'</td><td align="right" class="quantity"> '.$qty.'</td></tr>';}
$o .= '</tbody></table>';
echo $o;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:26:09.377

尝试：

```
SELECT type, part_no, description, artwork, min, max, qty FROM cartons_current WHERE part_no like '250%' 
```

或者：

SELECT type, part_no, description, artifact, min, max, qty FROM cartons_current WHERE left(part_no,3) = '250'

# asp.net-mvc - MVC 4 - 部署到 IIS 7.5 时，上传在 IE 中不起作用

> ID：10907031
> 
> 赞同：2
> 
> 时间：2012-06-06T01:08:02.793
> 
> 标签：asp.net-mvc, internet-explorer, iis-7.5, asp.net-mvc-4, httppostedfilebase

此问题仅在我将其部署到我们的实时服务器时发生，它在我的 Visual Studio Web 服务器的开发机器上运行良好，并且仅在 IE 中存在问题（8 和 9 两者）

使用此表格发布 jpeg...

```
<form method="post" id="uploadForm" enctype="multipart/form-data" action="/ImageUpload/UploadImageNew">
   <input type="file" onchange="postFile()" name="file"></div>
   <input type="submit" value="OK">
</form> 
```

使用这个 javascript...

```
function postFile(ctrl) {
    document.getElementById('uploadForm').submit();
} 
```

对这个控制器...

```
[HttpPost]
public ActionResult UploadImageNew(HttpPostedFileBase file)
{
    // Verify that the user selected a file
    if (file != null && file.ContentLength > 0)
    {
        file.SaveAs("AFilename.file");
     }
     else
     {
         throw new Exception("File not found")
     }
     return View("UploadImageNew");
} 
```

在 IE 中导致 file.ContentLength = 0，但在 FF 和 Chrome 中工作正常，如果这有什么不同，机器就在我们的 Intranet 上。

非常感谢任何帮助

更新 1：

奇怪的是，问题似乎是间歇性的，周五我的同事不能上传任何东西，但我可以，今天早上是我不能，我的同事都可以使用 IE。

一切似乎都指向 IIS 配置问题？

更新 2：

好的，看来我的问题与过期的会话/安全性有关。我正在使用混合身份验证方法，它给我带来了问题。

主站点使用表单身份验证，但是我有另一个站点为我进行 Windows 身份验证并设置 cookie，禁用它为我解决了这个问题。

不知道为什么，但我认为这在另一个问题上会更好。

我将 smartcaveman 的答案标记为正确的答案，因为他的帖子让我得到了正确的答案/解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:39:48.963

您的问题与 IIS 无关。它已损坏，因为您正在使用该`change`事件进行接线。`change`IE 和事件存在已知问题。[quirksmode](http://www.quirksmode.org/dom/events/change.html)提供了一个表格，其中包含不同浏览器与此事件在不同 HTML 元素上的兼容性。

**以下是有关该主题的几篇博客文章：**

*   [http://passionatedevelopment.com/blog/2010/03/24/onchange-on-ie-vs-firefox-the-importance-of-cross-browser-test/](http://passionatedevelopment.com/blog/2010/03/24/onchange-on-ie-vs-firefox-the-importance-of-cross-browser-test/)
*   [http://www.nofluffjuststuff.com/blog/scott_leberknight/2005/04/onclick_versus_onchange_in_ie_and_firefox](http://www.nofluffjuststuff.com/blog/scott_leberknight/2005/04/onclick_versus_onchange_in_ie_and_firefox)

我想到的最明显的方法是使用`blur`and`focus`方法。（在焦点上记录一个值，在模糊上检查它，如果它不同则提交）。

## 更新

那么，它仍然无法正常工作吗？这里还有一些其他值得研究的事情。

1.  如果您在提交之前尝试从客户端的表单字段中获取值，会发生什么情况。例如`function postFile(ctrl) { alert(document.getElementById('uploadForm').value); return false; }`。它有价值吗？另外，您是否确认该功能在没有 JavaScript 的情况下可以在实时环境中运行？（例如，只需正常提交表格）。如果是这样，那么您可以确定问题出在前端。如果没有，那么 JS 很好，问题出在后端。

2.  最大请求长度/最大内容长度。在对您的帖子的评论中，您说您在 maxRequestLength 中启用了最多 2GB。但是，这在 IIS7 中的工作方式与在 IIS6（或 Casini，如果那是您之前的测试环境）中的工作方式略有不同。[此博客中引用了](http://weblogs.asp.net/jeffwids/archive/2009/09/24/from-iis6-maxrequestlength-to-iis7-maxallowedcontentlengthfile-specifying-maximum-file-upload-size.aspx)有关此内容的详细信息，但总的来说，您需要确保您的 web.config 具有 system.webServer 部分中的设置，并且该值实际上代表了您认为它所做的事情。详细信息在文章中。

3.  你有异常处理和/或日志功能吗？您是否有可能在某处吞下导致请求被放弃的异常？是否有任何空`try - catch`块可以保护您的视图免受可能导致请求失败的潜在错误的影响？如果您确实启用了日志记录，您能否区分您的尝试使用和您同事的使用？

4.  实时站点上的文件结构与您的开发环境有什么不同吗？我注意到您有一个硬编码的表单操作`/ImageUpload/UploadImageNew`目标，这可能会影响应用程序匹配传入路由的能力。

5.  您在评论中说内容长度为0，但是如果您用来确定此内容的测试是您在帖子中的内容，那么您可能错了。您的测试相当于`file == null || file.ContentLength == 0)`. 根据实际情况，有不同的含义。如果文件为空，则可能与模型绑定有关。如果内容长度为 0，那么它至少识别出正在发送一个文件，但是当它决定如何处理它时出现了问题。`HttpContext.Request.Form`您可以通过循环遍历集合并写出值来检查您是否实际接收到文件数据（这就是我们过去的做法……在 ASP Classic 时代）。这另一篇文章，[Valum 文件上传 - 适用于 Chrome 但不适用于 IE，Image img = Image.FromStream(Request.InputStream)](https://stackoverflow.com/questions/4371015/valum-file-upload-works-in-chrome-but-not-ie-image-img-image-fromstreamreq), 表示有相同问题的用户在`Request.Files`集合中找到了文件内容。在你检查之前你不会确定。无论如何，如果文件数据位于其中一个位置，您就知道模型绑定中正在发生问题（并且您知道解决方法，直到找到正确的方法来修复它）。

6.  我还在[Telerik 论坛](http://www.telerik.com/community/forums/aspnet-mvc/upload/when-0-byte-file-contentlength-reported-randomly-when-multiple-clients-are-uploading.aspx)上发现了一些东西，似乎描述了他们的组件发生的类似事情（这实际上只是你正在做的事情的包装）。它指出可能的会话超时。

我建议仔细阅读这些项目，看看它们是否能揭示更多关于问题的信息（至少 #1 肯定会）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T01:16:28.767

上次我在编写基于 ajax 的 UI 时遇到了同样的问题。我使用 ajax.only 上传文件，即为那时创建问题。

不确定，但试试这些链接可能有帮助

[Ajax 文件上传在 IE7](https://stackoverflow.com/questions/10297309/ajax-file-upload-not-working-in-ie7) [Valum 文件上传中不起作用 - 适用于 Chrome 但不适用于 IE，Image img = Image.FromStream(Request.InputStream)](https://stackoverflow.com/questions/4371015/valum-file-upload-works-in-chrome-but-not-ie-image-img-image-fromstreamreq)

[http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

您是通过 ajax 还是表单提交 postFile() 保存文件？IE 不像 chrome 和 firefox 那样采用（上传的）文件名。当您上传调试代码并检查它们是否存在时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-26T18:14:06.467

在 IE11 上对我有用的简单解决方案：**启用兼容模式**。

出于某种原因，IE11向我的上传端点发出了**两个**请求...一个没有文件，工作正常并返回 200 状态（但由于它没有文件，对我来说没用），另一个请求有文件...但是第二个总是“待定”在 IE 内的开发工具的网络选项卡上。我找不到这种奇怪行为的原因。观察来自服务器的日志，我注意到第二个请求从未到达服务器。

然而，这并不能解决每个人的问题，因为您必须要求系统的每个用户为您的网站启用兼容模式......而且要求互联网用户不是一件好事。

# java - QtJambi - Unicode QLineEdit？

> ID：10907037
> 
> 赞同：0
> 
> 时间：2012-06-06T01:09:01.810
> 
> 标签：java, unicode, subscript, qt-jambi, qlineedit

是否可以设置`QLineEdits`显示`QtJambi`unicode 文本？

我需要在 a 中显示 unicode 下标字符`QLineEdit`，尽管只是将`QLineEdit`结果的文本设置为审美错误（一个奇怪的行字符；`|`）。
我已经读到这可以通过设置 a 的编码参数来实现`QString`，但现在我什至无法从我的 Java 内置等效项创建一个新字符串。
我似乎什至无法制作任何`QString`.

有没有人有这方面的经验？
谢谢！

# magento - Magento商店需要Authorize.net付款方式帮助

> ID：10907041
> 
> 赞同：0
> 
> 时间：2012-06-06T01:10:44.393
> 
> 标签：magento, payment, credit-card, authorize.net

我们有一家 magento 商店，付款方式一切正常，但不幸的是，我们有一些带有测试模式的真实订单，我们收到了这样的消息

```
"Credit Card: xxxx-XXXX amount $47.39 authorize and capture - successful. Authorize.Net Transaction ID 0\. Transaction ID: "0". 
```

这就是我们无法收到任何付款的原因，但主要问题是我们发货时没有在我们的帐户中检查收到的金额。

那么是否有任何解决方案可以向他们收费。任何解决方案表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:12:53.620

交易 ID 为 0 表示您使用的是测试账户，而不是您的真实账户。看起来有人在网站上线时忘记切换 Authorize.Net 账户。退出测试模式并输入真实帐户的凭据，您应该可以继续前进。

# entity-framework - 如何使用 MSBuild 任务自动化 EF 4.3 Code-First SQL 架构迁移脚本

> ID：10907042
> 
> 赞同：2
> 
> 时间：2012-06-06T01:10:48.293
> 
> 标签：entity-framework, msbuild-task, entity-framework-migrations

对于后台上下文，我们在 MVC 3 应用程序中使用 EF 4.3.1 代码优先和迁移。过去，我们手动完成了开发和暂存部署，但现在我们正在尝试使用 MSBUILD 任务和 TFS 作为源代码控制来自动化创建开发和暂存构建的过程。

我的问题与上述上下文有关，因为我们如何在 MSBUILD 任务中使用 EF 迁移 powershell 命令“Update-Database -verbose -script”生成 sql 迁移脚本。

有没有办法在 MSBUILD 任务中使用本机 EF 4.3.1 迁移命令来自动生成差异 sql 脚本？

提前感谢您的投入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T03:15:03.953

您应该只调用 powershell：请参阅[使用 MSBuild 中的 Powershell 脚本、计划任务等](http://blog.brianhartsock.com/2009/10/20/using-powershell-scripts-from-msbuild-scheduled-tasks-etc/)

```
<Target Name="AfterBuild">
    <Exec Command="powershell.exe -command &quot;&amp; {.\Register-myscript.ps1 &apos;$(TargetPath)&apos;}&quot;" />
</Target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T09:20:05.560

您可以让 MSBuild 任务运行 Migrate.exe，如此处所述[如何使用 MSBuild 和 Migrate.exe 运行实体框架迁移](http://blog.brianhartsock.com/2009/10/20/using-powershell-scripts-from-msbuild-scheduled-tasks-etc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T16:41:14.967

这是 msbuild 任务的工作版本。它将 migrate.exe 从 EF 6 的工具文件夹复制到构建目录中。为了使它起作用，所有路径都是绝对的。

```
 <Target Name="AfterBuild">
<copy SourceFiles="$(SolutionDir)packages\EntityFramework.6.1.3\tools\migrate.exe" DestinationFolder="$(TargetDir)" />
<exec Command="$(TargetDir)migrate.exe *YourData.dll* Configuration /startUpDirectory:$(TargetDir) /startUpConfigurationFile:$(TargetDir)WebStart.NET.dll.config /verbose"/>
</Target> 
```

# c++ - 基于 dlopen 的应用程序第二次运行不同（错误）

> ID：10907043
> 
> 赞同：0
> 
> 时间：2012-06-06T01:10:52.943
> 
> 标签：c++, c, dlopen

我有一个脚本解释器，它是由一个守护进程生成的，并且必须一直处于运行状态。换句话说，一旦它发生故障（崩溃、段错误、正常终止等），守护程序就会再次生成它。

`dlopen`该解释器使用( )动态打开一个库`lib1`。这个库打开了很多其他的库（`lib2`, `lib3`, ...）。其中一些引用了第一个库。所以我在通话中使用`RTLD_GLOBAL`and`RTLD_NOW`标志`dlopen`。

到目前为止，一切正常。

当解释器被杀死或崩溃并再次产生时，就会出现问题。我再次使用 dlopen ，没问题...我可以`lib1`正常调用 's 函数。在`lib1`的代码中，我从`lib2`. 程序就停在那里。

看起来它没有崩溃（没有段错误或其他东西）。在函数的第一行调用和其他调用之前有一个调试调用。第一个被执行。第二个没有。

最后一个细节：`lib1`实际上是一个返回对象实例的 C++ 库。我`lib1`从所有模块中省略了destroyer方法和所有头文件。如果有人认为这很重要，我可以提供更多信息。

有人对可能发生的事情有任何想法吗？

为了说明场景，请考虑“伪”代码：

口译员：

```
Lib1_obj *instance;

void interpreter_start() {
  // dlopen lib1
  // get lib1_creator symbol.
  instance = lib1_creator();
}

void interpreter_on_event_X() {
  int x = instance->method1();
  printf("x = %d\n", x);
} 
```

库1：

```
class Lib1_obj {
public:
  int method1() {
    printf("Check point 1.\n");
    return lib2_do_something();
  }
}

Lib1_obj * creator() {
  return new Lib1_obj();
} 
```

库2：

```
lib2_do_something() {
  printf("Check point 2.\n");
  return 1;
} 
```

`dlclose`我怀疑这个问题与进程被杀死时我无法调用的事实有关。是否有可能搞乱 dlopen 机制？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:14:28.927

有一个未使用 -fPIC 选项编译的库。这样做解决了问题。

感谢 user315052 的帮助。

# jquery - 滑块构建时触发滑块更改事件

> ID：10907045
> 
> 赞同：1
> 
> 时间：2012-06-06T01:11:51.223
> 
> 标签：jquery, jquery-ui

我正在使用 jquery 滑块。我设置了一个在滑块更改时调用的函数。

我遇到的问题是在最初构建滑块时调用该函数。我不希望更改功能在事件构建时触发。只是在改变。

这是我的代码

```
$('.sliderClass').slider({
    range: true,
    step: 5,
    values: [0, 5],
    min: 0,
    max: 100,
    change: function (e, ui) {
        myFunction(e, ui);
    }
});

var myFunction = function (e, ui){
    //do stuff
}; 
```

此代码正在文档准备就绪时调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:01:36.603

我用这个链接弄明白了

[http://forum.jquery.com/topic/slider-event-originalevent](http://forum.jquery.com/topic/slider-event-originalevent)

```
$('.sliderClass').slider({
  change: function(e, ui) {
  if(e.originalEvent==undefined) {

    } else {
        myFunction(e, ui);
    }
}}); 
```

# excel - Microsoft Excel 2010：使用数组函数生成箱线图数据

> ID：10907054
> 
> 赞同：2
> 
> 时间：2012-06-06T01:13:16.223
> 
> 标签：excel

我有一张有四列的表。其中三个是试验的设置，第四个是试验产生的值。每行代表一个试验，每个试验配置都进行了多次试验。我想为每个配置建立一个表格，列出这些试验的五个值（最小值、第 25 个百分位、中值、第 75 个百分位和最大值）。

我建立了一个单独的表，其中列出了每个独特的实验配置一次。有以百分位值作为列标题的额外列。我设置了以下公式来尝试计算五个值：

```
{=PERCENTILE.INC(IF(AND($B$2:$B$35341=$G2,$C$2:$C$35341=$H2,$D$2:$D$35341=$I2),$E$2:$E$35341),J$1)} 
```

这是为了比较行的三个设置，以确保只有具有该行配置的试验返回百分位评估的读数。

但是，此公式仅返回零。

如何生成我需要的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:38:22.340

您通常不能在数组函数中使用 AND 或 OR，因为它们不返回数组，只返回一个 TRUE 或 FALSE。这将条件相乘，并为不解析为 TRUE 的数组三元组返回空白。PERCENTILE 忽略空白并求解剩余元素：

```
=PERCENTILE.INC(IF(($B$2:$B$35=G2)*($C$2:$C$35=H2)*($D$2:$D$35=I2)=0,"",
($B$2:$B$35=G2)*($C$2:$C$35=H2)*($D$2:$D$35=I2)*($E$2:$E$35)),J$1) 
```

# javascript - 如何将订单小计价值转换为美分

> ID：10907056
> 
> 赞同：1
> 
> 时间：2012-06-06T01:13:36.093
> 
> 标签：javascript, function, variables

我正在尝试将我的订单小计传递给第三方，以便在优化系统上进行收入跟踪。

但是，系统需要以美分为单位的数字。我怎样才能得到我的价值，它是这样输出的`{{$cart.subtotal}}`

在脚本中转换为乘以 100 并显示结果？

```
<script type="text/javascript">

window.optimizely = window.optimizely || [];
    window.optimizely.push(['trackEvent', 'PURCHASE',{{$cart.subtotal}}]);

</script> 
```

如果有人在上面购买了 29.99 美元，那就是 29.99，但我需要它显示 2999

抱歉，我刚开始学习 javascript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:56:44.817

如果值是字符串，您可以删除小数位：

```
$cart.subtotal.replace('.','') 
```

但是乘以 100 应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T01:19:02.133

```
<script type="text/javascript">

window.optimizely = window.optimizely || [];
    window.optimizely.push(['trackEvent', 'PURCHASE',{{$cart.subtotal*100}}]);

</script> 
```

# svg - 将两个 SVG feColorMatrix 滤镜效果合并为一个矩阵？

> ID：10907059
> 
> 赞同：1
> 
> 时间：2012-06-06T01:14:10.943
> 
> 标签：svg, matrix-multiplication, colormatrix, svg-filters

我正在使用 SVG 过滤器在一些复杂的路径上创建模糊的“阴影”类型效果。

```
<defs>
    <filter id="dropshadow" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feColorMatrix result="hueOut" in="SourceAlpha" type="hueRotate" values="340"/>
        <feColorMatrix result="satOut" in="hueOut" type="saturate" values="3"/>
        <feGaussianBlur in="satOut" stdDeviation="8"/> 
        <feMerge> 
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/> 
        </feMerge>
    </filter>
</defs> 
```

`feColorMatrix`我纯粹通过反复试验得出了上述值。（如果我单独使用矩阵数学，我永远不会想出一种从暗到亮的特别美丽的色调变化。）基本上，我将色轮旋转 340 度，然后我正在饱和颜色使用值 3，就在模糊之前。（过去的规范对此有些不清楚，但反复试验表明，大于 1 的`type="saturate"`值会使图像饱和，小于 1 的值会使图像去饱和。）

这就是问题所在：我正在迭代大量路径，双矩阵运算使我的机器停止运行。它经常崩溃。

一些矩阵数学大师可以帮我计算出将上面的两个 feColorMatrix 过滤器组合成一个更有效`feColorMatrix`的 type="matrix" 过滤器原语的数字吗？我得到了[规范](http://dvcs.w3.org/hg/FXTF/raw-file/3f1fdd4a8004/filters/publish/Filters.html#feColorMatrixElement)的要点，但我在数学方面有点不知所措。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T04:19:36.200

根据我的经验，ColorMatrix 操作非常快，而模糊非常慢，所以我猜测将这些结合起来不会让你走得太远。但是FWIW，这是组合矩阵。（这并不难 - 有很多在线矩阵乘法器：）

```
2.5537  -0.61224    0.52246 0   0
-0.4163 1.30776 -0.10754    0   0
0.3037  -0.88224    2.3546  0   0
0   0   0   1   0
0   0   0   0   1 
```

更新：

好的，一步一步来。根据[svg 过滤器规范](http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement)，饱和的矩阵等价物是：

```
| R' |     |0.213+0.787s  0.715-0.715s  0.072-0.072s 0  0 |   | R |
| G' |     |0.213-0.213s  0.715+0.285s  0.072-0.072s 0  0 |   | G |
| B' |  =  |0.213-0.213s  0.715-0.715s  0.072+0.928s 0  0 | * | B |
| A' |     |           0            0             0  1  0 |   | A |
| 1  |     |           0            0             0  0  1 |   | 1 | 
```

因此，您所要做的就是构建一个小的 Excel 表格，为您倍增这个表格。

然后您查看色调旋转的规范，您会发现色调旋转的等效矩阵是：

```
| R' |     | a00  a01  a02  0  0 |   | R |
| G' |     | a10  a11  a12  0  0 |   | G |
| B' |  =  | a20  a21  a22  0  0 | * | B |
| A' |     | 0    0    0    1  0 |   | A |
| 1  |     | 0    0    0    0  1 |   | 1 | 
```

其中 a00、a01 等项的计算如下：

```
| a00 a01 a02 |    [+0.213 +0.715 +0.072]
| a10 a11 a12 | =  [+0.213 +0.715 +0.072] +
| a20 a21 a22 |    [+0.213 +0.715 +0.072]
                        [+0.787 -0.715 -0.072]
cos(hueRotate value) *  [-0.213 +0.285 -0.072] +
                        [-0.213 -0.715 +0.928]
                        [-0.213 -0.715+0.928]
sin(hueRotate value) *  [+0.143 +0.140-0.283]
                        [-0.787 +0.715+0.072] 
```

由于弧度是 Excel 三角公式的预期输入，因此您需要对弧度进行度数转换（340 度约为 5.9 弧度 - 或仅小于 2* pi），然后在 Excel 中构建结果矩阵。您可以手动将矩阵相乘，但坦率地说，我没有重温线性代数课的强烈愿望。因此，您使用谷歌搜索“在线矩阵乘法”并将这两个矩阵弹出到结果第 1 页上的任何矩阵乘法工具中。你去吧。合并矩阵。

简单的 ：-）

# asp.net-mvc - Passing an object as an error message in validation

> ID：10907068
> 
> 赞同：1
> 
> 时间：2012-06-06T01:15:41.067
> 
> 标签：asp.net-mvc, validation

I want to know, is there a way that I can pass an object(let's say a Message instance) from the validation in the model's fields and retrieve them from the ModelState( or by using some other thing) instance. Why I'm asking this is, I want to differentiate between the validation error message types so I can display only the messages I want in the view at a time. (Ex : required messages shown before the unique validation messages.)

I was trying to use a custom created Message object which I can then distinguish using its messageType field. But as the validation only returns string messages, can't think of a way.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:43:09.563

Are you ok with reading the messages out of ModelState and determining type based on message content? That can be done if you set a custom message for all the validations.

Then you can evaluate each message looking for specific content and take action. Such as putting the word "Error" in the `Required` attribute and `Info` in the rest.

Here's a class you can use to test

**Model**

* * *

```
public class EmployeeViewModel {

    public int ID { get; set; }

    [Display(Name = "First Name")]
    [Required(ErrorMessage = "Error")]
    public string FirstName { get; set; }

    [Display(Name = "Last Name")]
    [Required(ErrorMessage = "Error")]
    public string LastName { get; set; }

    [Display(Name = "Username")]
    public string Username { get; set; }

    [Display(Name = "Email Address")]
    public string EmailAddress { get; set; }
} 
```

**Controller**

* * *

```
using System.Collections.Generic;
using System.Linq;
using System.Web.Mvc;
using TestApp.Models;

namespace TestApp.Controllers {

    public class HomeController : Controller {

        public ActionResult Index() {
            return RedirectToAction("Test");
        }

        public ActionResult Test() {
            var model = new EmployeeViewModel();
            return View(model);
        }

        [HttpPost]
        public ActionResult Test(EmployeeViewModel model) {
            // Force an error on this property - THIS should be the only real error that gets returned back to the view
            ModelState.AddModelError("", "Error on First Name");

            if(model.EmailAddress == null) // Add an INFO message
                ModelState.AddModelError("", "Email Address Info");
            if (model.Username == null) // Add another INFO message
                ModelState.AddModelError("", "Username Info");

            // Get the Real error off the ModelState
            var errors = GetRealErrors(ModelState);

            // clear out anything that the ModelState currently has in it's Errors collection
            foreach (var modelValue in ModelState.Values) {
                modelValue.Errors.Clear();
            }
            // Add the real errors back on to the ModelState
            foreach (var realError in errors) {
                ModelState.AddModelError("", realError.ErrorMessage);
            }
            return View(model);
        }

        private IEnumerable<ModelError> GetRealErrors(IEnumerable<KeyValuePair<string, ModelState>> modelStateDictionary) {
            var errorMessages = new List<ModelError>() ;
            foreach (var keyValuePair in modelStateDictionary.Where(keyValuePair => keyValuePair.Value.Errors.Count > 0)) {
                errorMessages.AddRange(keyValuePair.Value.Errors.Where(error => !error.ErrorMessage.Contains("Info")));
            }
            return errorMessages;
        }
    }
}

private IEnumerable<ModelError> GetRealErrors(IEnumerable<KeyValuePair<string, ModelState>> modelStateDictionary) {
    var errorMessages = new List<ModelError>() ;
    foreach (var keyValuePair in modelStateDictionary.Where(keyValuePair => keyValuePair.Value.Errors.Count > 0)) {
        errorMessages.AddRange(keyValuePair.Value.Errors.Where(error => !error.ErrorMessage.Contains("Info")));
    }
    return errorMessages;
} 
```

**View**

* * *

```
@model TestApp.Models.EmployeeViewModel

<h2>Test</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>EmployeeViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Username)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Username)
            @Html.ValidationMessageFor(model => model.Username)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EmailAddress)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EmailAddress)
            @Html.ValidationMessageFor(model => model.EmailAddress)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

# javascript - 给定一个全名变量如何仅返回名字+最后一个初始 w JS

> ID：10907074
> 
> 赞同：0
> 
> 时间：2012-06-06T01:16:50.927
> 
> 标签：javascript, regex

给定一个 JS 变量，例如：

```
var n = James Bond;
var n = James Earl Bond;
var n = James; 
```

如何返回名字加上姓氏首字母？同时考虑忽略中间名和他们只是名字的可能性？以前有人优雅地解决过这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:21:28.880

```
function formatName(name)
{
    var newName;

    name = name.split(' ');
    newName = name.shift();

    if ( name.length ) newName += ' ' + name.pop()[0] + '.';

    return newName;
} 
```

这是小提琴：http: [//jsfiddle.net/68JVS/](http://jsfiddle.net/68JVS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T01:24:03.403

```
var names=n.split(' ');

var newname=names[0];

if (names.length>1) {
    names.reverse();
    var newname+=' '+names[0].substr(0,1)+'.';
} 
```

如果只有一个名字“James B”，则返回“James”。如果是先生的名字。忽略中间名，同时考虑未提供姓氏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T01:25:55.107

```
var name_comps = name.split(' ');
var first_name = name_comps[0];
var last_init = '';
if(name_comps.length >0){
    var last_init =  name_comps[name_comps.length -1].charAt(0);
}

var userName = first_name +  (last_init ? ' ' + last_init : ''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T01:32:55.043

你可以使用一些这样的正则表达式：

```
var formattedName = name.replace(/([^ ]+).*([A-Z])[^ ]*$/,"$1 $2."); 
```

但是，根据个人经验，将姓名/姓氏作为一个整体处理会引起很多问题，因为没有命名规则，尤其是当您有全球用户案例场景时。

# php - 如何对这个多维数组进行排序

> ID：10907079
> 
> 赞同：0
> 
> 时间：2012-06-06T01:18:14.660
> 
> 标签：php, sorting

我正在尝试更改我的购物车软件的输出。我相信我已经找到了数组的来源，我只需要对其进行排序。排序（）没有工作。我使用 print_r 查看数组，它的维度超出了我的小脑袋所能处理的范围。如何按完整的货币名称对其进行排序？

```
Array ( [0] => Array ( [id] => USD [text] => US Dollar ) [1] => Array ( [id] => EUR [text] => Euro ) [2] => Array ( [id] => GBP [text] => United Kingdom Pound ) [3] => Array ( [id] => CAD [text] => Canadian Dollar ) [4] => Array ( [id] => AUD [text] => Australian Dollar ) [5] => Array ( [id] => CHF [text] => Swiss Franc ) [6] => Array ( [id] => CZK [text] => Czech Koruna ) [7] => Array ( [id] => DKK [text] => Danish Krone ) [8] => Array ( [id] => HKD [text] => Hong Kong Dollar ) [9] => Array ( [id] => HUF [text] => Hungarian Forint ) [10] => Array ( [id] => JPY [text] => Japanese Yen ) [11] => Array ( [id] => NZD [text] => New Zealand Dollar ) [12] => Array ( [id] => NOK [text] => Norwegian Kroner ) [13] => Array ( [id] => PLN [text] => Polish Zloty ) [14] => Array ( [id] => SGD [text] => Singapore Dollar ) [15] => Array ( [id] => SEK [text] => Swedish Krona ) [16] => Array ( [id] => ILS [text] => Israeli New Shekel ) [17] => Array ( [id] => MXN [text] => Mexican Peso ) [18] => Array ( [id] => TWD [text] => Taiwan Dollar ) [19] => Array ( [id] => PHP [text] => Philippine Peso ) [20] => Array ( [id] => THB [text] => Thai Baht ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:40:32.833

正如 Interstellar_Coder 所说，使用[`usort`](http://php.net/usort)，但要正确使用！

```
usort($array,create_function('$a,$b','return strnatcasecmp($a["text"],$b["text"]);')); 
```

或者，从 PHP 5.3 开始：

```
usort($array,function($a,$b) {return strnatcasecmp($a['text'],$b['text']);}); 
```

# javascript - 无法在移动页面内滚动

> ID：10907080
> 
> 赞同：1
> 
> 时间：2012-06-06T01:18:19.553
> 
> 标签：javascript, android, ios, mobile

我尝试了多种方法，包括取出 preventDefaults 并实现一个强制触摸滚动的 js，但它都失败了。我想要做的是保持此页面顶部的蓝色条固定并允许页面滚动。最终我想添加一个只会影响可滚动区域的过渡，但目前我一直在试图弄清楚为什么这个页面不会垂直滚动。

这是html：http: [//jsbin.com/ocijax](http://jsbin.com/ocijax)

这是来源：http: [//jsbin.com/ocijax/edit#javascript,html](http://jsbin.com/ocijax/edit#javascript,html)

任何帮助将不胜感激。我只是有一种非常糟糕的感觉，解决方案就在我面前。谢谢！

# delphi - 电子邮件中 ShellExecute 正文的空格字符

> ID：10907081
> 
> 赞同：2
> 
> 时间：2012-06-06T01:18:30.317
> 
> 标签：delphi

我想使用 ShellExecute 以便用户可以从他的默认电子邮件程序发送电子邮件；例如

```
const
  CRLF = '%0D%0A';
var
  Body: string;
begin
  Body := 'Information from my program'+CRLF+
      'that is put in the body of the email'; 
  ShellExecute(Application.Handle, 'open', PChar('?Subject=My Subject&Body=' +  
      Body),nil, nil, SW_SHOWNORMAL); 
```

我想用信息列格式化正文。我怎样才能放一个空白？似乎 %20 将适用于单个空格 - 有时，但它不适用于一行的开头或几个连续的空格。这个 ' ' 也不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:36:12.197

`Chr(34)`在字符串中使用双引号 ( )：

```
Body :=  #34 + 'Information from my program' + CRLF +
      'that is put in the body of the email' + #34; 
ShellExecute(Application.Handle, 'open', 
    PChar('?Subject=My Subject&Body=' + Body), nil, nil, SW_SHOWNORMAL); 
```

要排列列，您可以**尝试**使用制表符 ( `Chr(9)`) - 正如我在评论中所说，我无法`ShellExecute`使用`mailto`Thunderbird 在 Windows 7 上使用：

```
Body :=  #34 + 'Information from my program' + CRLF +
      'that is put in the body of the email' + CRLF +
      'Col1'#9'Col2'#9'Col3' + #34; 
```

（使用`Stuff`#9'More stuff' 嵌入是`'Stuff' + #9 + 'More Stuff'`, BTW 的简写。

# python - 使用 Google Docs List API、Python 和 OAuth 2 进行身份验证

> ID：10907087
> 
> 赞同：1
> 
> 时间：2012-06-06T01:19:13.500
> 
> 标签：python, oauth-2.0, google-docs-api

我正在尝试将 Google Docs API 与 Python+Django 和 OAuth 2 一起使用。我通过 google-api-python-client 获得了 OAuth 访问令牌等，代码基本上是从[http://code 复制的。 google.com/p/google-api-python-client/source/browse/samples/django_sample/plus/views.py](http://code.google.com/p/google-api-python-client/source/browse/samples/django_sample/plus/views.py)

现在，我假设我应该使用 google gdata API，v 2.0.17。如果是这样，我无法准确找到如何授权使用 gdata 客户端进行的查询。[http://packages.python.org/gdata/docs/auth.html#upgrading-to-an-access-token](http://packages.python.org/gdata/docs/auth.html#upgrading-to-an-access-token)上的文档（无论如何都显得过时了），说将客户端上的 auth_token 属性设置为gdata.oauth.OAuthToken。如果是这种情况，我应该将哪些参数传递给 OAuthToken？

简而言之，我正在寻找一个简短的示例，说明如何在给定 OAuth 访问令牌的情况下授权使用 gdata API 进行的查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T16:48:26.453

OAuth 2.0 序列类似于以下内容（给定为您注册的应用程序适当定义的应用程序常量）。

1.  生成请求令牌。

    ```
    token = gdata.gauth.OAuth2Token(client_id=CLIENT_ID, 
                                    client_secret=CLIENT_SECRET, 
                                    scope=" ".join(SCOPES), 
                                    user_agent=USER_AGENT) 
    ```

2.  授权请求令牌。对于一个简单的命令行应用程序，您可以执行以下操作：

    ```
    print 'Visit the following URL in your browser to authorise this app:'
    print str(token.generate_authorize_url(redirect_url=REDIRECT_URI))
    print 'After agreeing to authorise the app, copy the verification code from the browser.'
    access_code = raw_input('Please enter the verification code: ') 
    ```

3.  获取访问令牌。

    ```
    token.get_access_token(access_code) 
    ```

4.  创建一个 gdata 客户端。

    ```
    client = gdata.docs.client.DocsClient(source=APP_NAME) 
    ```

5.  授权客户。

    ```
    client = token.authorize(client) 
    ```

您可以通过执行以下操作保存访问令牌以供以后使用（因此避免在令牌再次过期之前执行手动身份验证步骤）：

```
f = open(tokenfile, 'w')
blob = gdata.gauth.token_to_blob(token)
f.write(blob)
f.close() 
```

下次开始时，您可以通过执行以下操作重用保存的令牌：

```
f = open(tokenfile, 'r')
blob = f.read()
f.close()
if blob:
    token = gdata.gauth.token_from_blob(blob) 
```

然后，对身份验证序列的唯一更改是您通过指定 refresh_token 参数将此令牌传递给 OAuth2Token：

```
token = gdata.gauth.OAuth2Token(client_id=CLIENT_ID, 
                                client_secret=CLIENT_SECRET, 
                                scope=" ".join(SCOPES), 
                                user_agent=USER_AGENT,
                                refresh_token=token.refresh_token) 
```

希望这可以帮助。花了一段时间来解决它:-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:24:31.463

这是来自[https://developers.google.com/gdata/docs/auth/overview](https://developers.google.com/gdata/docs/auth/overview)：

> 警告：大多数较新的 Google API 不是 Google Data API。Google 数据 API 文档仅适用于 Google 数据 API 目录中列出的旧 API。有关特定新 API 的信息，请参阅该 API 的文档。有关使用较新 API 授权请求的信息，请参阅 Google 帐户身份验证和授权。

您应该使用 OAuth 进行授权和访问，或者同时使用 OAuth 2.0。

对于 OAuth 2.0 API，现在位于[https://developers.google.com/gdata/docs/directory](https://developers.google.com/gdata/docs/directory)。

# r - 在函数中从标准偏差切换到移动平均值

> ID：10907089
> 
> 赞同：0
> 
> 时间：2012-06-06T01:19:18.103
> 
> 标签：r, function

我正在从我的数据集中删除错误的数据值。到目前为止，我是通过以下方法进行的：

假设 z[,1] 是我的时间序列变量。ei 是其中的各个元素。
`std_d is sd(abs( diff(z[,1], lag=1) ))`

```
e1-e2> std_d... remove e2.
e1-e3> std_d...remove e3
e1-e4<std_d...move on to e4
e4-e5 <std_d..move on e5
e5-e6>std_d...remove e6
e5-e7<std_d...move on e7 
```

我正在使用以下代码执行此操作：

```
 zx <- as.numeric(coredata(z[,1]))
 coredata(z[,1]) <- Reduce(function(y,xx){ 
                          if( abs(tail(y[!is.na(y)], 1) - xx) > std_d ) {
                                    c(y,NA)} else { 
                                    c(y,xx)} }, 
                              zx ) 
```

我的问题是：

我想从 std_d （即滞后差的标准差）切换到“移动标准差”。例如，如果我们正在检查 e20 ，std_d 应该是-->它之前的 15 个元素和之后的 15 个元素的差的 std 偏差，其中 lag=1。

我正在考虑在动物园中使用滚动平均值。但我没能把它放在上面的函数中。怎么做到呢？

感谢您的时间和考虑。这是示例数据：

```
 "timestamp" "mesured_distance" "IFC_Code" "from_sensor_to_river_bottom"
   "1" "2012-06-04 21:30:09-05" 4818 995 5030
   "2" "2012-06-04 21:15:11-05" 4820 995 5030
   "3" "2012-06-04 21:00:10-05" 4818 995 5030
   "4" "2012-06-04 20:45:10-05" 4817 995 5030
   "5" "2012-06-04 20:30:09-05" 8816 995 5030
   "6" "2012-06-04 20:15:09-05" 4816 995 5030
   "7" "2012-06-04 20:00:08-05" 4811 995 5030
   "8" "2012-06-04 19:45:07-05" 15009 995 5030
   "9" "2012-06-04 19:30:07-05" 4810 995 5030
   "10" "2012-06-04 19:15:09-05" 4795 995 5030 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:14:30.270

也许......在没有数据的情况下未经测试：

```
zx <- as.numeric(coredata(z[,1]))
coredata(z[,1]) <- Reduce(function(y,xx){ 
                          if( length(y) <15) {c(y,xx) } else {
                          if( abs(tail(y[!is.na(y)], 1) - xx) > std(tail( y, 15) ) {
                                    c(y,NA)} else { 
                                    c(y,xx)}                                       } 
                                          }, 
                              zx ) 
```

不能确定我在没有测试的情况下正确匹配了括号和括号

# java-7 - 在闪存驱动器上安装 jdk - 不提供选择安装位置的机会，

> ID：10907096
> 
> 赞同：0
> 
> 时间：2012-06-06T01:20:11.523
> 
> 标签：java-7

我徒劳地尝试在闪存驱动器上安装 JDK。我已经看到了很多关于如何做到这一点的主题，但是，我没有看到一个可以解决我的问题的主题。我的 PC 上已经有 JDK。无论我是从网站运行还是保存到桌面或闪存驱动器本身，当我双击 Java 图标进行安装时，我都没有机会选择任何安装首选项。它只是运行配置然后告诉我文件已经存在。即使我保存到闪存并单击闪存文件夹中的图标，它仍会尝试在 PC 上安装。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T17:05:34.510

有一种我不推荐的hacky方法，但除了将文件直接复制到闪存驱动器之外，这是我能想到的唯一解决方案。Java 安装程序可能会检测您已安装的注册表项。除非您知道自己在做什么，否则我不建议您这样做，但要删除以下文件夹：

HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java 开发工具包

可以让它跳过检查并安装它。我建议您写下您在注册表中修改的内容，并确保在执行此操作之前可以重新创建它。如果这能正常工作，Java 安装程序应该不会检测到您计算机上的其他 Java 版本，并且您应该能够继续安装。我仍然建议将适当的目录复制到您的闪存驱动器，但克里斯 B 的想法是正确的。

注意：这是我的第一个答案。我希望我能帮助你！如果没有，请在评论中告诉我，以便我尽我所能为您提供您正在寻找的最佳解决方案！:)

# python - 绑定需要访问私有变量的外部方法：特性还是错误？

> ID：10907103
> 
> 赞同：1
> 
> 时间：2012-06-06T01:21:50.900
> 
> 标签：python, cpython

**简短版本**：绑定到实例的外部方法不能直接通过`self.__privatevarname`. 这是功能还是错误？

**扩展版（带解释和示例）**：

在[Python 中：绑定一个未绑定的方法？](https://stackoverflow.com/a/1015405/1068170), Alex Martelli 解释了一种将函数绑定到实例的简单方法。

使用这种方法，可以使用外部函数在类中设置实例方法（in `__init__`）。

但是，当绑定到实例的函数需要访问私有变量时，这种方法就会失效。这是因为名称修改发生在[编译](http://hg.python.org/cpython/file/bdc7ad1f05ef/Python/compile.c#l206)步骤中`_Py_Mangle`，因此函数永远没有机会调用`__getattribute__('_classname__privatevarname')`。

例如，如果我们定义一个访问私有实例变量的简单外部添加函数`__obj_val`：

```
def add_extern(self, value):
  return self.__obj_val + value 
```

并将其绑定到每个实例中，同时还在类定义中定义`__init__`类似的实例方法`add_intern`

```
class TestClass(object):
  def __init__(self, object_value):
    self.__obj_val = object_value
    self.add_extern = add_extern.__get__(self, TestClass)

  def add_intern(self, value):
    return self.__obj_val + value 
```

那么内部方法将起作用，但外部绑定方法将引发异常：

```
>>> t = TestClass(0)
>>> t.add_intern(1)
1
>>> t.add_extern(1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in add_extern
AttributeError: 'TestClass' object has no attribute '__obj_val' 
```

**POSTSCRIPT**`__getattribute__` ：您可以通过重写为您进行修改来克服这个缺点：

```
class TestClass(object):
  ...
  def __getattribute__(self, name):
    try:
      return super(TestClass, self).__getattribute__(name)
    except AttributeError:
      # mimic behavior of _Py_Mangle
      if not name.startswith('__'):  # only private attrs
        raise
      if name.endswith('__'):  # don't mangle dunder attrs
        raise
      if '.' in name:  # don't mangle for modules
        raise
      if not name.lstrip('_'):  # don't mangle if just underscores
        raise

      mangled_name = '_{cls_name}{attr_name}'.format(
          cls_name=self.__class__.__name__, attr_name=name)
      return super(TestClass, self).__getattribute__(mangled_name) 
```

但是，这并没有将变量留给外部调用者私有，这是我们不想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:37:42.000

由于 Python 的[name-mangling](http://docs.python.org/release/1.5/tut/node67.html)，存储的属性的实际名称`t`是`_TestClass__obj_val`（如您在 中看到的`dir(t)`）。没有在类上定义的外部函数只是在寻找`__obj_val`.

损坏的名称存储在函数的代码对象（例如`t.add_extern.func_code.co_names`）中并且是只读的，因此没有简单的方法来更新它。

所以有理由不使用这种技术……至少在名称混乱的情况下。

# java - Netbeans 中的 Git - 解决冲突

> ID：10907104
> 
> 赞同：5
> 
> 时间：2012-06-06T01:21:51.783
> 
> 标签：java, git, netbeans

我在 netbeans 中使用 Git，我想提交我的更改，但是首先我做了一个 pull，现在出现了冲突。

在左侧，我有一个 .java 类，由于冲突而显示为红色，我右键单击它并选择了 Resolve Conflicts，然后完成了这些步骤。

但它仍然不会让我承诺。我想用我的代码覆盖当前的 HEAD 版本，但是它不会让我提交。我该怎么做呢？

当我选择文件并选择查看 Git -> Diff 时，它只允许我用 HEAD 中的代码替换或删除工作副本中的代码，而不是替换 HEAD 中的代码。

基本上，我想提交我的代码，而不是还原等。如何在 netbeans 中执行此操作？它一直告诉我，由于冲突，我不能承诺。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:32:34.673

我刚刚解决了我的问题，希望对您有所帮助。

*   1) 更新到 Netbeans 7.1.2 IDE，重新启动新的 IDE。
*   2）打开Git Repository Browser（使用（无分支）本地分支）并切换到Team菜单下有问题的分支（默认情况下它将被标记为无分支，检查长“Md5 sum”相同）。
*   3）从其他分支中提取其他需要的代码（如果需要，我必须这样做）。
*   4) 现在编辑/粘贴您要覆盖的代码。（这会将文件名变成红色字体）。
*   5）只需右键单击文件，Git>Resolve Conflicts（它会发挥它的魔力并将文件名变为蓝色字体）。
*   6）提交您的本地分支并完成。

# php - Magento：自定义模块布局覆盖不起作用

> ID：10907106
> 
> 赞同：1
> 
> 时间：2012-06-06T01:22:14.817
> 
> 标签：php, xml, magento, layout

我有一个小的自定义模块，它应该显示在所有产品页面上，但它没有。它仅在将其引用设置为“内容”时显示，但我希望它在已经存在的产品视图 div 中显示，因此，将其显示在“product.info”引用中。

这是我的代码：

**应用程序/设计/前端/默认/公司/布局/公司/socialbuttons.xml**

```
<?xml version="1.0"?>
<layout>
  <catalog_product_view>
    <reference name="product.info">
     <block type="core/template" name="company_socialbuttons" template="company/socialbuttons.phtml" />
</reference>
  </catalog_product_view>
</layout> 
```

我花了几个小时找到错误，但没有成功，如果我很快找不到解决方案，我会用丑陋的方式（在父 phtml 中调用 phtml）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:26:10.953

如果直接引用 product.info 块，则必须在产品视图模板中调用 getChildHtml()：

`echo $this->getChildHtml('company_socialbuttons');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T07:30:39.990

`product.info`句柄是`catalog/product_view`块的实例，并且`content`是`core/text_list`块的实例。后一个块正在渲染每个子块，即使`getChildHtml()`模板中没有对方法的调用。
所以，如果你想将你的块添加到，你应该在模板中 `product.info`调用方法。 或者，您可以尝试在块中引用其他块：或`getChildHtml()`
`product.info``alert.urls``product.info.extrahint`

# android - seteglcontextclientversion(2) 在 OpenGL ES 2.0 设备上无法正常工作

> ID：10907107
> 
> 赞同：1
> 
> 时间：2012-06-06T01:22:42.677
> 
> 标签：android, opengl-es-2.0, galaxy, samsung-mobile, nexus-s

我正在尝试按照基本教程学习 OpenGL ES 2.0

[http://www.droidnova.com/android-3d-game-tutorial-part-ii,328.html](http://www.droidnova.com/android-3d-game-tutorial-part-ii,328.html)

这是我的 GLSurfaceView 派生的构造函数

```
public FirstOpenGLSurfaceView(Context context){
        super(context);
        // Set the Renderer for drawing on the GLSurfaceView
        setEGLContextClientVersion(2);
        _renderer = new FirstOpenGLRenderer();
        setRenderer(_renderer);
    } 
```

经过一些实验，我得出的结论是，如果发出对 seteglcontextclientversion(2) 的调用，项目将无法正常运行（注释掉这行代码并且渲染工作。）每当尝试时，Logcat 都会指示“调用未实现的 OpenGL ES API”运行上述方法。

我已经更新了清单并遵循了这篇文章中的所有建议......（包括 manifest.xml 设置）

[Android：GLES20：调用未实现的 OpenGL ES API](https://stackoverflow.com/questions/5926316/android-gles20-called-unimplemented-opengl-es-api)

我听说这可能表明 OpenGL ES 2.0 在有问题的设备上不可用（或者正在使用模拟器。）我不相信在这种情况下这是真的，因为当我运行以下代码时...（在一些教程中找到，我相信这段代码说的是实话）

```
// Check if the system supports OpenGL ES 2.0.
final ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
final ConfigurationInfo configurationInfo = activityManager.getDeviceConfigurationInfo();
final boolean supportsEs2 = configurationInfo.reqGlEsVersion >= 0x20000; 
```

supportsEs2 的值为“true”，这适用于三个独立的设备，即

*   三星 Galaxy Tab 10.1 - 带有 2.6.36.4 内核的 Android 3.2
*   谷歌 Nexus S - Android 4.0.4 - 内核 3.0.27
*   三星 Galaxy S3 - 带有内核 3.0.15 的 Android 4.0.4

有谁之前经历过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T14:52:46.370

我在 XOLO a500s 上也遇到了同样的问题，使用`setEGLConfigChooser()`解决了我的问题：

```
myGLSurface.setEGLConfigChooser(5, 6, 5, 0, 24, 8);
myGLSurface.setEGLContextClientVersion(2);
myGLSurface.setRenderer(new MyGLRenderer()); 
```

我从哪里得到的值`setEGLConfigChooser(redSize, greenSize, blueSize, alphaSize, depthSize, stencilSize)`：

[http://gfxbench.com/result.jsp](http://gfxbench.com/result.jsp)

# grails - Grails - 在参数列表中查找逐项参数

> ID：10907109
> 
> 赞同：1
> 
> 时间：2012-06-06T01:23:19.300
> 
> 标签：grails

什么是正确的语法。我想找到选择 x_2 的值：

```
<g:select name="x_${personInstance.id}" from="${allPeople}" value="" /> 
```

控制器：

```
params.x_it 
```

这是我正在运行的循环中的当前位置。我需要弄清楚如何使用它的“通配符”编写 params.x_2。快把我逼疯了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T08:15:11.603

您可以在控制器中执行此操作：

```
params["x_${personInstance.id}"] 
```

# sql - Azure Bacpac 文件还原错误

> ID：10907115
> 
> 赞同：2
> 
> 时间：2012-06-06T01:24:36.290
> 
> 标签：sql, sql-server-2008, azure, azure-sql-database, bacpac

我使用[RedGate Azure Backup tool](http://www.red-gate.com/products/dba/sql-azure-backup/)从 Azure 数据库进行每日 bacpac 文件备份。直到 5 月 31 日，我所有的 Bacpac 文件都可以使用[DAC Client Tool](http://sqldacexamples.codeplex.com/releases/view/77085)恢复到本地 SQL2008R2 数据库。

从 6 月 1 日开始，我收到如下错误：

```
Failure Creating schema objects in database
'XXXXX' System.Data.SqlClient.SqlException (0x80131904): Cannot
find the object "dbo.XXXX" because it does not exist or you do not have per
missions. 
```

当我检查它时，表仍然存在于 DB 中。对此也不知道。有没有人面对那种丢失的表格，无效的列..等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-02T18:20:04.157

我使用免费实用程序 SQL Backup 和 FTP 将 Azure SQL 数据库备份到本地 .bacpac 文件。免费版最多允许您备份2个不同的数据库，然后付费版非常合理（即专业版是70美元左右）。

[http://sqlbackupandftp.com/](http://sqlbackupandftp.com/)

它实际上按我的计划运行，自动将备份结果通过电子邮件发送给我并将其存储在我的 Google Drive 上（即使是免费版本 - 我只是让它将时间戳备份存储在我的 Google Drive 的文件夹中）。

我用来将其还原到本地数据库的过程是：

1.  将 SQL Azure 备份到 .bacpac 文件
2.  以 sa 身份登录到本地数据库服务器
3.  右键单击数据库
4.  单击导入数据层应用程序
5.  从 Azure 或本地磁盘中选择 .bacpac 文件
6.  输入名称和位置以存储数据和日志文件
7.  如有必要，将原始数据库设置为单用户模式并删除
8.  如有必要，将恢复的数据库重命名为原始数据库名称

注意：必须使用 SQL Server 2012（或更高版本）管理工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:34:34.577

[RedGate Azure 备份现已弃用](http://www.red-gate.com/products/dba/sql-azure-backup/discontinued)。DAC 客户端工具 ( `DacCli.exe`) 已[集成到 SSMS 2012 和 SSDT](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_sqlazuredac.aspx)中。您可以尝试将您的[DAC 客户端工具更新到最新版本](http://sqldacexamples.codeplex.com/releases/view/87880)（*从 1.2 到 1.6*）

SSMS 2012 数据工具现在允许您**导入数据层应用程序**。查看 SQL 2012 下载中的[数据层应用程序框架功能](http://www.microsoft.com/en-us/download/details.aspx?id=29065&ocid=aff-n-in-loc--pd)。查看[此 MSDN 文章以供参考](http://msdn.microsoft.com/en-us/library/windowsazure/hh694043.aspx)。

# java - 用户按键时创建移动对象（Java）

> ID：10907116
> 
> 赞同：1
> 
> 时间：2012-06-06T01:24:43.453
> 
> 标签：java, animation, acm-java-libraries

我的程序的想法是创建一张图片并让该图片在图形窗口中向上移动，这正是该`rollBall()`方法所做的。当我将方法放入`rollBall()`方法中时，该`run()`方法有效。`rollBall()`但问题在于当我将方法放入方法中时它无法运行`keyPressed()`。

我正在使用该`acm.jar`库，因为它是一个有用的工具，可以更轻松地创建 java 图形程序。

有人可以指出我正确的方向。

这是我的代码...

```
import java.awt.Color;
import java.awt.event.KeyEvent;

import acm.graphics.GImage;
import acm.graphics.GOval;
import acm.program.GraphicsProgram;
import acm.util.RandomGenerator;

public class BallDrop extends GraphicsProgram {

    /** width and height of application window in pixels */
    public static final int APPLICATION_WIDTH = 900;
    public static final int APPLICATION_HEIGHT = 768;

    private static final double GRAVITY = 1;

    /** Radius of the ball in pixels */
    private static final int BALL_RADIUS = 50;
    private static final int WIDTH = APPLICATION_WIDTH;

    public void run() {         
        setSize(APPLICATION_WIDTH, APPLICATION_HEIGHT);
        addKeyListeners();
    }

    public void keyPressed(KeyEvent e){ 
        char linkMoveRightKey = e.getKeyChar();
        if(linkMoveRightKey == 'z'){
            rollBall();
        }   
     }

     private void rollBall(){
         setup_Ball();          
         game_Loop();
     }

    private void setup_Ball(){
         pic = new GImage("link.png");
         add(pic,gameBallInitialLocationX, gameBallInitialLocationY);
    }

    private void game_Loop(){
         while(pic.getX() > 0 ){            
              move_Ball();
              pause(DELAY);
         }
    }

    private void move_Ball() {
         ballVelocityX = 0;
         ballVelocityY -= GRAVITY;
         pic.move(ballVelocityX, ballVelocityY);
    }

    private RandomGenerator rgen = RandomGenerator.getInstance();
    private GImage pic;
    private int gameBallInitialLocationX = 500;
    private int gameBallInitialLocationY = 500;
    private int ballVelocityX = (int) rgen.nextDouble(3.0, 5.0);
    private int ballVelocityY =10;
    private static final int DELAY = 50;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:03:18.503

我刚刚阅读了手册，我的理解是您调用了错误的方法：

不是调用`run()`方法，而是定义`init()`方法。

也`setup_Ball()`应该在里面`init()`而不是在里面`rollBall()` ——你只想在程序启动时初始化球，而不是每次按下键时。

因此，不要`run()`定义`init()` 并`setup_Ball()`从`rollBall()`方法中删除：

```
public void init() {
    setSize(APPLICATION_WIDTH, APPLICATION_HEIGHT);
    setup_Ball();
    addKeyListeners();
} 
```

`run()`注意：当您希望程序启动时出现一些动画而无需等待按键被按下时，您可以使用该方法。在这种情况下，您可以调用适当的方法`run()`

# wpf - WPF DataGrid 交替列颜色

> ID：10907117
> 
> 赞同：0
> 
> 时间：2012-06-06T01:24:54.860
> 
> 标签：wpf, xaml, datagrid, wpfdatagrid

我正在尝试创建一个具有交替背景颜色的 WPF DataGrid。我目前正在使用 DataGridTemplateColumn 列并设置 CellStyle 背景颜色，但对此结果并不完全满意：

![具有交替列颜色的简化示例 WPF DataGrid](../Images/1281546b5d5b44786c208e7e8b6a33d2.png)

```
<DataGridTemplateColumn.CellStyle>
    <Style TargetType="DataGridCell">
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="False">
                <Setter Property="Background" Value="#FFF7F7F7" />
            </Trigger>
        </Style.Triggers>
    </Style>
</DataGridTemplateColumn.CellStyle> 
```

我正在根据现有的 WinForms 项目对我的 DataGrid 进行建模，并尝试复制它的外观。我面临两个问题：

1.  不同的列背景附加到单元格，而不是网格本身的属性。因此未使用的行不显示这些背景。我什至想要一个空网格来显示列和背景。

2.  列背景应该在透明的 Expander 标题下延伸。我相信如果满足（1），这也可以。

可以直接使用 DataGrid 实现这些目标吗？如果没有，什么变通方法可以解决问题；也许以某种方式直接在 DataGrids 面板 (DataGridRowsPresenter) 上绘制列背景并支持列调整大小？

有任何想法吗？谢谢！

注意：这个问题类似且未回答： [WPF Datagrid Template column edit event and alter column color](https://stackoverflow.com/questions/3875637/wpf-datagrid-template-column-edit-event-and-alternating-column-color)

* * *

# 更新：

此更新基于@LeslieDavies 提出的答案，这让我大部分时间都在那里。我对这个解决方案有两个问题：

1.  我无法为DataGrid 列设置*星号。*如果我尝试增加星号，则列会不断增长而不受限制。

2.  如果我`DataGrid.GroupStyle`从 XAML 中删除 ，则调整大小将不再正常工作。矩形正确增长，但是当缩小列时，矩形会缩小，但网格列不能正确缩小。

XAML：

```
<Window x:Class="GridColumnColors.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Background="Black">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Rectangle Name="Rect0" Grid.Column="0" HorizontalAlignment="Left" Margin="-1,0,0,0" Fill="#FFCACACA" />
        <Rectangle Name="Rect1" Grid.Column="1" HorizontalAlignment="Left" Margin="-1,0,0,0" Fill="White"/>
        <Rectangle Name="Rect2" Grid.Column="2" HorizontalAlignment="Left" Margin="-1,0,0,0" Fill="#FFCACACA"/>
        <DataGrid Name="DataGridStudents"  AutoGenerateColumns="False" Visibility="Visible" Grid.ColumnSpan="4" ItemsSource="{Binding StudentsCollectionView}"
                    SelectionMode="Extended" GridLinesVisibility="None" RowHeaderWidth="0"  RowBackground="Transparent"
                    CanUserResizeRows="False" IsReadOnly="True" Background="Transparent" LayoutUpdated="Students_LayoutUpdated">
            <DataGrid.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <Expander Header="{Binding}">
                                            <ItemsPresenter />
                                        </Expander>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </DataGrid.GroupStyle>
            <DataGrid.Columns>
                <DataGridTextColumn Header="First Name" MinWidth="100" Binding="{Binding FirstName}"/>
                <DataGridTextColumn Header="Last Name"  MinWidth="100" Binding="{Binding LastName}"/>
                <DataGridTextColumn Header="Age"        MinWidth="100" Binding="{Binding Age}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

代码背后：

```
private void Students_LayoutUpdated(object sender, EventArgs e)
{
    Rect0.Width = DataGridStudents.Columns[0].ActualWidth+3;
    Rect1.Width = DataGridStudents.Columns[1].ActualWidth+0;
    Rect2.Width = DataGridStudents.Columns[2].ActualWidth+1;
} 
```

![更新了交替列颜色的 DataGrid](../Images/e4cb187502de3d515131d4861bd7e6c9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:34:15.293

这不是一个优雅的解决方案，但它为您提供了您想要的视图。

1.  使 DataGrid 的背景“透明”。
2.  将 DataGrid 的 RowBackground 设为“透明”。
3.  将 DataGrid 放在网格中。
4.  在 Grid 中创建与 DataGrid 中的列一样多的 ColumnDefinition。
5.  创建与列一样多的矩形。将它们放在每列的网格中。使他们的水平对齐“左”。用他们的“填充”给它们上色。
6.  对于 DataGrid，添加一个 LayoutChanged 事件。
7.  在 LayoutChanged 事件的代码中，更新矩形的宽度。前任：

    rectangle.Width = dataGrid.Columns[0].Width.DesiredValue;

8.  由于 DataGrid 样式，给第一个矩形的边距 (7,0,0,0)。

# android - onLongClick 显示菜单选项

> ID：10907127
> 
> 赞同：2
> 
> 时间：2012-06-06T01:26:11.867
> 
> 标签：android, contextmenu, menuitem, onlongclicklistener

这是我第一次来这里，我正在寻找这个问题的答案 2 天，但没有任何效果。在这里，我想在用户按住所选项目时显示 MenuOptions（编辑、删除），长按。我的代码：

```
public class ProjetoProTelefoneActivity extends ListActivity {
public final static String ID_EXTRA = "br.com.DaniloDeLuca.ProjetoProTelefone._ID";
Cursor modelo = null;
RestaurantAdapter adapter = null;
RestauranteHelper helper=null;
SharedPreferences prefs=null;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    helper = new RestauranteHelper(this);
    prefs = PreferenceManager.getDefaultSharedPreferences(this);
    initList();
    prefs.registerOnSharedPreferenceChangeListener(prefListener);
}

public void onDestroy(){
    super.onDestroy();

    helper.close();
}
public void onListItemClick(ListView list, View view,
        int position,long id){
    Intent i=new Intent(ProjetoProTelefoneActivity.this, DetailForm.class);
    i.putExtra(ID_EXTRA, String.valueOf(id));
    startActivity(i);
}

public void onListItemLongClic( View view,int position,Menu menu){
    new MenuInflater(this).inflate(R.menu.option,menu);
    super.onCreateOptionsMenu(menu);

}

//hook into menu button for activity 
public boolean onCreateOptionsMenu(Menu menu){
    new MenuInflater(this).inflate(R.menu.option,menu);
    return(super.onCreateOptionsMenu(menu));
}
/// when menu button option selected 
public boolean onOptionsItemSelected(MenuItem item){
    if(item.getItemId()==R.id.add){
        startActivity(new Intent(ProjetoProTelefoneActivity.this, DetailForm.class));
        return(true);
    }
    else if(item.getItemId()==R.id.prefs){

        startActivity(new Intent(this, EditPreferences.class));
        return(true);
    }
    return(super.onOptionsItemSelected(item));
}
private SharedPreferences.OnSharedPreferenceChangeListener prefListener=
        new SharedPreferences.OnSharedPreferenceChangeListener() {

            public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
                    String key) {
                if(key.equals("sort_order")){
                    initList();
                }

            }
};
private void initList(){
    if(modelo!=null){
        stopManagingCursor(modelo);
        modelo.close();
    }
    modelo =helper.getAll(prefs.getString("sort_order","nome DESC"));
    startManagingCursor(modelo);

    adapter = new RestaurantAdapter(modelo);       
    setListAdapter(adapter); 

}

class RestaurantAdapter extends CursorAdapter {
    RestaurantAdapter(Cursor c) {
      super(ProjetoProTelefoneActivity.this, c);
    }

    public void bindView(View row, Context ctxt,
                         Cursor c) {
      RestaurantHolder holder=(RestaurantHolder)row.getTag();

      holder.populateFrom(c, helper);
    }

    public View newView(Context ctxt, Cursor c,
                         ViewGroup parent) {
      LayoutInflater inflater=getLayoutInflater();
      View row=inflater.inflate(R.layout.row, parent, false);
      RestaurantHolder holder=new RestaurantHolder(row);

      row.setTag(holder);

      return(row);
    }
  }

  static class RestaurantHolder {
    private TextView name=null;
    private TextView address=null;
    private ImageView icon=null;

    RestaurantHolder(View row) {
      name=(TextView)row.findViewById(R.id.title);
      address=(TextView)row.findViewById(R.id.address);
      icon=(ImageView)row.findViewById(R.id.icon);
    }

    void populateFrom(Cursor r,RestauranteHelper helper) {
      name.setText(helper.getNome(r));
      address.setText(helper.getEnd(r));

      if (helper.getTipo(r).equals("casa")) {
        icon.setImageResource(R.drawable.casa_icon);
      }
      else if (helper.getTipo(r).equals("apartamento")) {
        icon.setImageResource(R.drawable.apartamento_icon);
      }
      else {
        icon.setImageResource(R.drawable.comercio_ico);
      }
    }
  }

} 
```

仅当我选择 MenuButton 时才有效。但我想让“MenuButton”活动成为 LongPress 动作，我不知道它是否清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T01:29:04.463

你想要的是`registerForContextMenu`，那就是注册你`ListView`的，`Activity`这样长按它就会创建一个新菜单并显示给用户。看

[http://developer.android.com/reference/android/app/Activity.html#registerForContextMenu%28android.view.View%29](http://developer.android.com/reference/android/app/Activity.html#registerForContextMenu%28android.view.View%29)

# php - php mysql jquery javascript 聊天

> ID：10907128
> 
> 赞同：0
> 
> 时间：2012-06-06T01:26:59.753
> 
> 标签：php, javascript, jquery, mysql, ajax

好的，我正在开发类似聊天环境的东西，如果不是实时对话，我希望进行近乎实时的对话。但我知道浏览器一次只会为每个域的事务放弃 2 个线程。所以我试图找出一种在不真正影响浏览器的情况下进行同步聊天的方法。我也知道浏览器倾向于锁定同步请求。

那么从头开始在站点上创建类似聊天的环境的最佳方法是什么，假设数据库和脚本概念很好，它是连接管理，想知道如何保持不会阻塞浏览器并导致它可能会冻结。

任何人都有任何想法。我不是在寻找基于 Flash 或 java 的解决方案。我也不想每秒轮询一次。但是什么是栈印象，你会怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:37:34.473

首先，规范只建议允许两个连接。大多数现代浏览器实际上最多支持 6 个。

使用纯 Javascript 创建聊天系统的主要接受方法有以下三种：

**轮询**

第一个解决方案很简单，只需每隔几秒轮询一次服务器（5 是一个不错的数字）以查看遗漏的内容。它工作简单高效，但如果不小心可能会导致大量不必要的请求，从而导致不必要的服务器负载。

一个更好的实现是通过轮询来简单地检查自上次聊天更新以来是否发生了任何事情，如果是，那么只有通过找出发生了什么的过程。节省服务器负载和带宽方面。

**等待**

这种方法更常用，它涉及浏览器向服务器发送一个从未完成的请求，而是一直“等待响应”。当事情发生时，服务器输出它并满足请求，客户端发出另一个请求并重复该过程。这样可以节省请求方面的费用，但最终可能会导致服务器上正在进行的进程积压。

**网络套接字**

[https://developer.mozilla.org/en/WebSockets](https://developer.mozilla.org/en/WebSockets)

这涉及到创建到服务器的直接套接字连接，允许在需要时将数据推送到客户端。虽然它相对较新，并且可能存在一些兼容性问题，尤其是对于旧浏览器。

其中，没有一个是专门的“最佳方法”；这取决于你的目标是什么，以及什么是重要的。如果你有一个为最新浏览器设计的网站，那么 websockets 可能是你的答案，但如果你有一个小型服务器，那么例如轮询可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T01:35:51.730

我自己的聊天引擎每五秒钟检查一次新消息。这已经足够接近即时了，没有人知道其中的区别。

就像`setInterval(updateChat,5000);`.

# asp.net - 在 SQL 参数中转义用户输入

> ID：10907131
> 
> 赞同：1
> 
> 时间：2012-06-06T01:27:16.710
> 
> 标签：asp.net, sql-server, .net-3.5

我在声明中有以下`WHERE`条件`SELECT`：

```
WHERE ('.' + column_name LIKE @prefix)) 
```

并且`@prefix`参数设置如下：

```
cmd.Parameters.AddWithValue("@prefix", "%[^a-z]" & prefix & "%") 
```

该`prefix`变量取自表单输入。

我遇到的问题是当用户输入“%”或“[”或其他特殊字符时。如何确保这些被转义而不是被视为特殊字符？

相关：通常，您如何阻止人们在输入中输入“％”并将其视为通配符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:32:45.623

[SQL 的`LIKE`运算符](http://msdn.microsoft.com/en-us/library/ms179859.aspx)提供了一个可选`ESCAPE`子句：

```
match_expression [ NOT ] LIKE pattern [ ESCAPE escape_character ] 
```

您可以将转义字符设置为您喜欢的单个字符，并使用它转义元字符。

# javascript - 是否可以使用来自另一个 dom 的选择部分来创建一个新的 dom？或修剪掉不需要的部分

> ID：10907133
> 
> 赞同：0
> 
> 时间：2012-06-06T01:28:06.227
> 
> 标签：javascript, html, dom

我想知道是否可以加载一个 html 页面，但只显示它的几个选定部分。

我想到了两种可能的方法：

1）删除dom中我不感兴趣的部分。但是我不知道所有这些部分是什么，我只知道我感兴趣的部分。是否可以找到我感兴趣的部分然后删除其他所有内容？

2）创建一个新的dom，它是通过从原始dom中提取部分dom来制作的。是否有可能以某种方式与现有 dom 并行创建它并使浏览器切换到这个新 dom？或者从这个新的dom创建一个html页面然后加载它？

这些是疯狂的想法吗？任何简单/替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:30:25.537

那么最简单的两种方法可能如下。

1.  **不要装载*不需要*的零件。**我的意思是，如果您知道不想显示哪些部分，那么只需将它们从 HTML 中删除。这并不总是一种选择，但如果只有一定数量的选择，它肯定是最好的。

2.  **通过 CSS 隐藏元素。**您可以通过设置`display: none`不需要的元素来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T01:31:59.213

是的，只需使用 JavaScript/jQuery。

首先，您必须像这样将 jquery 库作为 javascript 链接添加到您的网站。

```
<script src="jquery.js" type="text/javascript"/>. 
```

您需要创建一个类似于在链接上放置 onclick 事件的函数。

```
 <script>
function switch(){
$("#button").onclick(function()
{
 $(".classOfCertainElements").css("display", "none");
 $(".classOtherElements").css("display", "inline");
});

} 
</script>
<a href="" id="button">Click me</a> 
```

这有帮助吗？

# iphone - 在 2 个不同的 IBAction 中使用 NS 对象的自定义子类

> ID：10907139
> 
> 赞同：1
> 
> 时间：2012-06-06T01:29:43.283
> 
> 标签：iphone, objective-c, xcode, uiviewcontroller, nsobject

这是一个objective-c问题。我创建了一个 NSObject 的子类 person，参数为“height”和“weight”，在一个名为 Person.h 的文件中包含属性和综合，该文件包含接口和实现。

我想将 Person.h 导入我的 viewcontroller.m 并创建人员对象并使用 2 个 IBActions 更改它们。

```
-(IBAction)alterperson_1{

 person *bob = [person alloc]init];
 bob.height = 72;
 bob.weight = 200;
}

-(IBAction)alterperson_2{

 bob.height = 80;
 bob.weight = 250;

} 
```

这种安排不起作用，因为方法 alterperson_2 找不到 Bob，因为它是 alterperson_1 的局部变量。我的问题是我如何以及在 viewcontroller.m 中的何处将 Bob 分配为一个人，以便他的属性可以被两个 IBActions 更改。

我尝试在 viewdidload 以及 initwith nibname 方法中进行分配。那没起效。我也尝试过 viewcontroller.m 的实现{}，但这也不起作用，因为 Bob 的分配不是编译时间常数。

谢谢！

**用代码更新**

因此，我现在可以正确导入 Person.h 文件（感谢 Robotnik），并且能够在整个 ViewController.m 中创建 Person 的实例——但是，我创建的实例 *bob 似乎没有保留其属性的值（请参阅注释通过代码中的 NSLog 语句）。我认为这是一个初始化问题，但我不知道在哪里初始化。目前，我在 viewDidLoad 中初始化时收到警告。当我的 IBAction 被调用时，如何让 bob.weight 打印 200，而不是我目前得到的 0？谢谢。

```
// Person.h

#import <Foundation/Foundation.h>

@interface Person : NSObject{

int weight;
int height;
}

@property int weight, height;

@end 
```

***结束 Person.h***

```
//Person.m

#import "Person.h"

@implementation Person

@synthesize weight, height;

@end 
```

***结束人.m***

```
//ViewController.h

#import <UIKit/UIKit.h>
#import "person.h"

@interface ViewController : UIViewController{

}

@property Person *bob;

-(IBAction)persontest:(id)sender;

@end 
```

***结束 ViewController.h***

```
//ViewController.m

#import "ViewController.h"

@implementation ViewController

@synthesize bob;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    Person *bob = [[Person alloc]init]; // this causes a local declaration warning, if I remove this code, however, it still doesn't work
    bob.weight = 100;
    NSLog(@"viewDidLoad bob's weight, %i", bob.weight); // this will print 100, but only because I made the local initialization. The value is lost once the viewDidLoad Method ends.
}

-(IBAction)persontest:(id)sender{

    bob.weight = bob.weight + 100;
    NSLog(@"IBAction bob's weight %i", bob.weight); // this prints 0, probably because value is nil. How can I make it print 200?
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

***结束 ViewController.m***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T05:58:10.357

您似乎将变量的声明与变量的分配混淆了。您也没有正确使用属性。

变量的声明是这样完成的：

```
Person *bob; 
```

而已。如果你把这一行放在你的@interface 部分，或者在你的实现部分顶部的 {braces} 中，那么这将成为一个*实例变量*，任何时候你`bob`在你的类的其余部分中使用它都会知道你正在和一个人。因此，在您的 viewDidLoad 中，您现在可以这样做：

```
bob = [[Person alloc] init]; 
```

它知道您指的是实例变量。在您当前的代码中，您`Person *`在这一行前面，正如编译器告诉您的那样，它声明了一个名为 bob 的*局部*变量，因此隐藏了您的实例变量，因此您根本不会更改您的实例变量，所以以后没有任何价值。

看看这个问题的性质，以及您的评论，我强烈建议您先阅读一些 Objective-C 的介绍性文本，然后再继续进行。您可以在这里提问，但 SO 并不是真正学习语言的地方 - 大多数回答者会假设您了解语言基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:01:48.977

`ViewController.h`如果您希望他可以通过多种方法访问，则需要在您的中声明 Bob 。然后你可以在 viewDidLoad 中初始化他

```
@interface ViewController
{
    Person *bob;
}

-(IBAction)alterperson_1;
-(IBAction)alterperson_2;
@end 
```

你提到你想实例化多个人。在这种情况下，您可能希望将多个 Person 对象保留在一个`NSMutableArray`或类似中。这仍应在 中声明，`ViewController.h`以便可以在多种方法中访问。然后，您可以使用该方法`addObject:`将人员添加到数组中。这是一个存储字符串的数组示例。

```
NSMutableArray *stringArray = [[NSMutableArray alloc] init];

[stringArray addObject:@"Dog"];
[stringArray addObject:@"Cat"]; 
```

# iphone - iPhone - 委托或通知？

> ID：10907142
> 
> 赞同：3
> 
> 时间：2012-06-06T01:30:11.637
> 
> 标签：iphone, ios, ipad

您有一个必须向其父级发送消息的类。您的应用程序的任何其他成员都不会使用此类。您将消息作为 NSNotification 发送，或者在该类上创建委托协议并在父类中实现委托方法，这样您就可以发送消息？

什么是最好的方法，为什么？一种方法比另一种方法有什么优势吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T01:35:05.410

当您有多个对通知感兴趣的观察者或对象时，通知很有用。 [它们对于 Key Value Observing 也很有用](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。

委托对于将消息（符合您声明的协议）从一个对象发送到指定为委托目标的另一个对象非常有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T01:44:35.790

虽然这两种方法都可以用来满足所描述的消息传递要求，但在这种情况下委托协议是更合适的选择。

通知作为模式的好处是许多对象可以响应已发布的通知。希望观察通知的对象只需注册即可接收它们。这样做的一个优点是您的代码非常松散耦合（通常是 oop 中的理想值）。在这种情况下，松散耦合的缺点是，您可能会在不同的类之间以及基本上在您的代码库中发生潜在的相关行为。

委托模式耦合更紧密，您的委托对象必须符合它将接收消息的对象的协议。正因为如此，观察通知对象和被通知对象之间交互（或预期交互）的性质相对容易 - 只需查看代码，两个“相关”对象之间的对象消息传递就更容易掌握。如果您的孩子基本上宣布了某些行为（大概与父母的行为直接相关），我认为委派是一种更好的方法。

# sql - SQL查询以检索打孔顺序的差异

> ID：10907144
> 
> 赞同：1
> 
> 时间：2012-06-06T01:30:26.497
> 
> 标签：sql

考虑下表。

规则是 - 员工在打卡到工作编号 2 之前不能从工作编号 1 休息（需要下班）。在这种情况下，员工“A”应该在工作编号 1 上打卡而不是休息，因为他后来打卡到 JobNum#2

是否可以编写查询以在普通 SQL 中找到它？

![桌子](../Images/ded8420a94e6e955de957c1494b8fbec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:42:34.957

这是SQL

```
 select * from employees e1 cross join employees e2 where e1.JOBNUM = (e2.JOBNUM + 1) 
    and e1.PUNCH_TYPE = 'BREAK' and e2.PUNCH_TYPE = 'IN'
    and e1.PUNCHTIME < e2.PUNCHTIME
            and e1.EMPLID = e2.EMPLID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T12:14:17.083

想法是检查下一条记录是否正确。要找到下一条记录，必须找到同一员工当前之后的第一个打卡时间。一旦检索到此信息，就可以隔离记录本身并检查感兴趣的字段，特别是 jobnum 是否相同并且 [可选] 是 punch_type 'IN'。如果不是，则不存在评估为真并输出记录。

```
select *
from @punch p
-- Isolate breaks only
where p.punch_type = 'BREAK'
-- The ones having no proper entry
and not exists
(
    select null
    -- The same table
    from @punch a
    where a.emplid = p.emplid
      and a.jobnum = p.jobnum
    -- Next record has punchtime from subquery
      and a.punchtime = (select min (n.punchtime) 
                           from @punch n 
                          where n.emplid = p.emplid 
                            and n.punchtime > p.punchtime
                        )
    -- Optionally you might force next record to be 'IN'
      and a.punch_type = 'IN'
) 
```

将 @punch 替换为您的表名。`--`是 Sql Server 中的注释；如果您不使用此数据库，请删除此行。标记您的数据库和版本是一个好主意，因为可能有更快/更好的方法来做到这一点。

# oauth - 使用 OAuth2 时获取用户信息 - 以下是否合理？

> ID：10907151
> 
> 赞同：0
> 
> 时间：2012-06-06T01:31:59.343
> 
> 标签：oauth, openid, restlet

我正在创建一个 API（Restlet、GAE）并实施 OpenId 进行身份验证和 OAuth2 以保护对 API 的访问。从我构建的客户端 Web 应用程序进行测试时，一切都很好。当用户点击想要访问 API 的 Web 应用程序的一部分时，会要求用户通过 OpenId 登录，然后要求授予对 Web 应用程序的访问权限以从 API 中获取资源。

但是，我注意到网络应用程序不知道用户是谁（！）。Web 应用程序只有一个身份验证令牌。因此，网络应用程序不能说“你好，用户名”，因为它不知道用户是谁。

使用 Restlet 技术，认证本质上是： // 认证码 OpenIdVerifier verifier = new OpenIdVerifier(OpenIdVerifier.PROVIDER_YAHOO); 验证器.addRequiredAttribute(AttributeExchange.EMAIL);
Authenticator au = new MyRedirectAuthenticator(getContext(), verifier, null);

虽然以下处理*身份*验证和 OAuth2 授权： // 身份验证 + OAuth 代码：OAuthParameters params = new OAuthParameters("2345678901", "secret2", "http://localhost:8888/v3/", roles); OAuthProxy local = new OAuthProxy(params, getContext());

最初，我只在我的网络应用程序中使用“身份验证 + OAuth”，并且身份验证是“不可见的”发生的（如上所述）。

我认为解决“问题”的一种方法是，如果网络应用程序“可见”地处理身份验证。所以我将身份验证代码添加到网络应用程序中。流程对用户来说看起来完全一样，但是 Web 应用程序能够捕获用户信息（电子邮件）并且一切都很好。与“两者”代码似乎也没有任何冲突。

解决此问题的另一种方法是向 API 添加一些内容，以返回与 authToken 关联的用户信息（类似于 Twitter 的 verify_credentials）。

我的问题：我采取的方法合理吗？我应该改用 Twitter 方法吗？还是完全不同的东西？（我对所有这些东西都很陌生，所以很难弄清楚我是否选择了一个似乎有效的解决方案，只是后来碰上了砖墙）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:30:18.020

简短的回答是，当客户端 Web 应用程序获得代表用户访问 OAuth 资源的权限时，客户端 Web 应用程序不应该知道有关用户的任何信息（登录名、密码等）。如果客户端 Web 应用程序想知道用户是谁，它可以提供身份验证。

我已经使用 Restlet 和 google app 引擎实现了上述方案，允许用户通过 OpenId 对资源服务器进行身份验证，并为 Web 客户端应用程序添加 Google 身份验证（这样它就可以发出“hello”消息）。一切似乎都很好。

# gwt - 以 mvp 模式传递参数

> ID：10907155
> 
> 赞同：0
> 
> 时间：2012-06-06T01:32:29.953
> 
> 标签：gwt, cordova, mvp

这可能是一个一般的 mvp 地点和活动问题，但我在这里试图理解的展示案例是这个[`gwtphonegap-showcase-gwt`例子](http://code.google.com/p/gwt-phonegap/wiki/RunningShowcase)。

如何将参数传递给另一个视图？

例如，假设我希望当用户单击 上的任何单元格时`OverviewActivity`，每次都会将他们带到同一个位置（`AboutPlace`），但文本应该不同（假设它包含单元格编号）。

我`setText(String text)`在`AboutDisplay`界面中添加了带有相应标签`setText()`的a `AboutDisplayGwtImpl`，但我不知道在哪里调用它。我尝试在`AboutActivity` `start()`方法和`ClientFactoryGwtImpl` `getAboutDisplay()`方法中调用它，但它们似乎只在应用程序首次加载时被调用一次，所以我每次都得到相同的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:38:31.173

你不应该直接使用视图。

您可以在一个地方添加一个字段并在那里设置您的值，并在下一个活动中访问相同的值。

# regex - VBScript RegEx 组匹配与反向引用问题

> ID：10907160
> 
> 赞同：1
> 
> 时间：2012-06-06T01:33:04.740
> 
> 标签：regex, vbscript, web-config

我的 web.config 中有一行如下

```
<clientDependency loggerType="xxx.ClientDependencies.Logger,StrattonWebShared" version="144"> 
```

我正在尝试做的是编写一个脚本来检查我的代码库是否有修改，然后如果找到的话，将 clientDependency 模块版本更新为 1。所以版本加一的代码位如下

```
Set clientDepRegExp = new RegExp
    clientDepRegExp.IgnoreCase = True
    clientDepRegExp.Global = True
    clientDepRegExp.Pattern = "(<clientDependency.*version=\"")(\d+)(\"".*)"

    '1 = open file for reading
    Set clientDependencyConfigFile = fileSystemObject.OpenTextFile(targetFile, 1)

    fileContents = clientDependencyConfigFile.ReadAll

    clientDependencyConfigFile.Close

    fileContents = clientDepRegExp.Replace(fileContents, "$1" & CInt("$2") + 1 & "$3") 
```

我的问题是最后一行。`$2`是版本号，做`CInt("$2") + 1`的只是给我`3`（`2 + 1`就是这样）。如果我只是使用`"$2"`，那么它会返回`144`（请参阅第一行的版本号）。所以我的问题是，如果我想在内部进行快速算术替换，我应该怎么做？

提前感谢您提供的任何提示和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:49:37.230

**改变你的代码是这样的：**

```
Set clientDepRegExp = New RegExp
Set fso = New Scripting.FileSystemObject
With clientDepRegExp
    .IgnoreCase = True
    .Global = True
    .Pattern = "(<clientDependency[^<>]*?version="")(\d+)\b"
    fileContents = fso.OpenTextFile(targetFile).ReadAll
    tmp = .Replace(reftext, "$2")
    fileContents = .Replace(reftext, "$1" & CStr(Val(tmp) + 1))
End With 
```

* * *

希望这项工作。

# php - PHP数组序列化

> ID：10907170
> 
> 赞同：0
> 
> 时间：2012-06-06T01:35:18.703
> 
> 标签：php, database, arrays, serialization

我正在开发一个以某种方式在数据库中存储对象数组的系统。

像这样：

```
key             | value
------------------------------
person_0_name   | David
person_0_age    | 32
person_0_job    | Programmer
person_1_name   | Sue
person_1_age    | 26
person_1_job    | Teacher
person_2_name   | Jon
person_2_age    | 40
person_2_job    | Bus Driver 
```

这是编造的格式吗？我想知道是否有一种简单的方法来反序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:38:24.223

好吧，你可能想要这样的东西：

```
$lines = explode("\n",$data);
$keys = array_shift($lines);
array_shift($lines); // discard the line of dashes
$keylist = Array();
foreach(explode("|",$keys) as $k) {
    $keylist[] = trim($k);
}
$out = Array();
foreach($lines as $line) {
    foreach(explode("|",$line) as $i=>$l) {
        $out[$keylist[$i]] = trim($l);
    }
}
// var_dump($out); 
```

唯一的缺点是，如果数据中有任何空格，它不会保留尾随空格 - 可能不会造成巨大损失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T01:39:26.243

这是一种虚构的格式，显然是由不了解数据库设计的人完成的。您需要制作一个`persons`包含四列的表格：

1.  ID
2.  姓名
3.  年龄
4.  工作

然后每一行都应该填充每个`person`. 第一列是唯一 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T02:00:25.887

我觉得上面说的有点绕。根据您访问数据库的方式，可以轻松调整以下内容。我使用了最简单的数据库连接形式。

编码：

```
<?php
$m = mysql_connect('localhost', 'root', 'stack');
mysql_select_db('stack');

$q = mysql_query('SELECT * FROM example');

$arr = array();

while($row = mysql_fetch_assoc($q)){
    $arr[substr($row['key'],0, 8)][substr($row['key'],9)] = $row['value'];
    print_r($arr);
} 
```

结果看起来像

```
Array
(
    [person_0] => Array
    (
        [name] => David
        [age] => 32
        [job] => Programmer
    )

) 
```

如果您有任何问题，请告诉我。简而言之，脚本在键字段上执行子字符串以根据人员/值创建数组键。

享受 - 经济特区

# git - 撤消 git pull --rebase？

> ID：10907173
> 
> 赞同：5
> 
> 时间：2012-06-06T01:36:16.767
> 
> 标签：git

我刚跑

```
git pull --rebase 
```

忘记指定“原点”。看起来 git 从所有不同的分支中拉出来。有没有办法从这里恢复我的回购以撤消拉动？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T01:46:15.420

一次`git pull`操作后，`ORIG_HEAD`应该指向之前的值`HEAD`。你应该能够：

```
git reset --hard ORIG_HEAD 
```

并回到你在`pull`手术前开始的地方。你可以运行：

```
git show ORIG_HEAD 
```

在运行命令之前准确查看`ORIG_HEAD`指向的位置。`reset`

另一种解决方案是创建一个基于以下内容的新分支`ORIG_HEAD`：

```
git checkout -b newbranch ORIG_HEAD 
```

验证事情是否符合您的预期，然后删除旧分支并重命名`new branch`。

另请参阅[此问题](https://stackoverflow.com/questions/964876/head-and-orig-head-in-git)以讨论引用同一事物的`HEAD`和`ORIG_HEAD`替代语法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T01:47:32.940

采用`git reflog`

你会看到一大堆来自过去的 HEAD 提交。

最安全的是在新分支中检查您需要的 HEAD 并从那里继续

```
git checkout -b phew HEAD@{x} # fill in the number of the commit you need. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-16T07:45:06.830

**从一个无聊/愚蠢/垂死的变基中恢复**

不小心我跑了`git pull origin master --rebase`，而不是`git pull origin develop --rebase`.

我只是想恢复变基后发生的事情并回到最后一次提交。我没有推送到远程分支。

这是一个很大的错误，想要退出合并。

退出合并的最快方法是`git rebase --abort`

# java - 如何使用 LWJGL 创建图层？

> ID：10907175
> 
> 赞同：0
> 
> 时间：2012-06-06T01:37:11.957
> 
> 标签：java, opengl, lwjgl

我一直在尝试将我以前的游戏从 C# 移植到 Java。我想知道如何创建可以绘制图块的图形图层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:34:34.703

对我来说效果最好（在 2D 游戏中）：

*   Z-Buffer：首先设置 Z-buffer，当你绘制时，你每次定义一个 Z 值，就是这样（但在半透明对象处失败）
*   知道绘制顺序：先绘制底层，最后绘制顶层（比 z-Buffer 慢）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:23:59.670

除了深度缓冲区、颜色缓冲区和模板缓冲区之外，您还可以使用帧缓冲区对象 (FBO) [http://www.songho.ca/opengl/gl_fbo.html](http://www.songho.ca/opengl/gl_fbo.html)。

它可以用作绘图目标，例如制作镜子，您首先将镜像视点渲染到一些临时纹理上，然后使用此纹理渲染镜子，同样的方式您可以为每一层制作纹理，这样您就可以准确地在您需要的图层上绘制，最后以不同的高度渲染所有图层（或您想要对它们做什么）。

或者就像蒂姆评论的那样，当您想在“n”层上绘制某些东西时，您可以在高度 z=n 上渲染它，但是这样您就不会拥有物理层图像，而是将它们全部组合在一起，所以如果您在图像处理后需要它们（不同图层上的特殊效果）或将它们保存为您应该使用 FBO 的图像。但在某些情况下，您可以在不同图层上绘制时应用不同的着色器。

FBO 更难使用但功能强大的工具。

# c++ - 从哑指针向量切换到 boost::shared_ptr 时出现问题

> ID：10907178
> 
> 赞同：3
> 
> 时间：2012-06-06T01:37:26.893
> 
> 标签：c++, boost, vector, shared-ptr

好吧，这让我困扰了几个月，所以我会看看是否有其他人可以帮助解决这个问题。

所以在我的主程序中，我有两种结构（solarBody_t，ship_t），它们都派生自同一个基类（physical_t）。我制作了两个对象的向量，因为我不能将 solarBody 和船放在同一个向量中。它们都是哑指针向量。
我尝试使用 boost::shared_ptrs 的向量将两者放在同一个向量中。现在，据我了解，shared_ptrs 应该具有与哑指针相同的语义和语法（例如 foobar->mass = 42; 应该适用于两者）。但是，只是将声明更改为 boost::shared_ptr 的向量到哑指针，当我尝试将某些内容推送到 shared_ptrs 的向量时，它会给我一个错误。

据我所知，这应该可行。boost 文档给出了以下示例

```
boost::shared_ptr<int> p(new int(2)); 
```

这几乎就是我正在做的事情。

有没有人有过这方面的经验？或者想建议另一种将所有内容存储在向量中的方法？

有关更多详细信息，[这是它的要点](https://gist.github.com/2879256)（有点矛盾，但我做了双关语，所以在那里。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T01:45:08.847

我认为它不会让您自动`shared_ptr`从裸指针构造 a 。`push_back`是期待的`shared_ptr<foobar_t>`，不是裸的`foobar_t`。你应该看看[`boost::make_shared`](http://www.boost.org/doc/libs/1_43_0/libs/smart_ptr/make_shared.html)并尝试这样的事情：

```
entity_smart.push_back(boost::make_shared<foobar_t>(42)); 
```

`make_shared`有几个优点：即，它在一次分配中分配指针控制块和对象本身，并`new`在您的代码中保持不匹配。它还明确表明您正在创建一个`shared_ptr`对象。

除此之外，是的，语义应该基本相同。但是，请记住`shared_ptr`，如果您实际上不需要共享对象的所有权，那么这对于您正在做的事情可能有点过头了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T08:48:52.600

横向思维：

您实际上并不需要`shared_ptr`这里，您想要的是一个存储多态值的 STL(-like) 集合；该集合是所有者。

您基本上有两种解决方案：

*   使用指针感知集合：`boost::ptr_vector`，来自[指针容器库](http://www.boost.org/doc/libs/1_49_0/libs/ptr_container/doc/ptr_container.html)。
*   使用更好的指针：`std::unique_ptr`，来自 C++11 标准

即使您可以访问 C++11，我仍然建议`boost::ptr_vector`您，因为它提供了额外的保证（默认情况下不允许为 null）和糖衣（取消引用迭代器会提供引用，而不是指针，因为您必须再次取消引用）。

# iphone - 按下时突出显示 UIButton

> ID：10907179
> 
> 赞同：0
> 
> 时间：2012-06-06T01:37:29.797
> 
> 标签：iphone, ios, xcode

我有两个`UIButtons`。按下时我能够使它们突出显示。：

```
-(IBAction) button1Pressed:(id)sender {

    [self performSelector:@selector(highlightButton1:) withObject:sender afterDelay:0.0];
}

- (void)highlightButton1:(UIButton *)a { 
    [a setHighlighted:YES];
}

-(IBAction) button2Pressed:(id)sender {

    [self performSelector:@selector(highlightButton2:) withObject:sender afterDelay:0.0];
}

- (void)highlightButton2:(UIButton *)b { 
    [b setHighlighted:YES];
} 
```

我想在突出显示另一个按钮时取消突出显示一个按钮。但我不能让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:05:53.433

If you really have your buttons defined as:

```
IBOutlet NSButton * mode1;
IBOutlet NSButton * mode2; 
```

then you can do:

```
- (void)highlightButton1:(UIButton *)a { 
    [mode1 setHighlighted:YES];
    [mode2 setHighlited:NO];
}

- (void)highlightButton2:(UIButton *)b { 
    [mode1 setHighlighted:NO];
    [mode2 setHighlited:YES];
} 
```

parameters a & b are ignored in this particular case...

# ios - iPhone http:// URL 重定向

> ID：10907185
> 
> 赞同：2
> 
> 时间：2012-06-06T01:39:00.160
> 
> 标签：ios, xcode, redirect, url-scheme

我要完成的主要任务是使用 URL 打开我的应用程序。

将自定义 URL 方案添加到 appName-Info.plist 使用相应的 handleOpenUrl: 等一切正常。

我的观点是我的应用程序也有一个网站。所以我想要做的是，给我的用户一个 url（小，短的 url 无关紧要）将这 3 种不同的情况结合在一起：

*   如果用户从他的 iPhone 打开 URL 并且他已经安装了应用程序：打开 iPhone 应用程序；
*   如果用户从他的 iPhone 打开 URL 并且他没有安装应用程序：打开应用程序的 iTunes 商店 URL；
*   如果用户从他的手机（安卓、平板电脑等）或网络打开 URL，则显示网页。

我的问题是我可以单独完成所有这些任务，但我不能将所有这些任务结合在一起。

注意：尝试将[http://myApp.com](http://myApp.com)添加到 UrlScheme 但当然没有工作，因为 http:// 由 iPhone 中的 Safari 管理。

任何的想法？帮助和建议将不胜感激。很多小伙子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T01:50:10.080

这个[SO question](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like/1109200#1109200)似乎有您正在寻找的答案：

1.  检查用户代理是否是 iPhone/iPod Touch 的
2.  检查 appInstalled cookie
3.  如果 cookie 存在并设置为 true，则将 window.location 设置为 your-uri://（或执行重定向服务器端）
4.  如果 cookie 不存在，请打开“您知道您的站点名称有 iPhone 应用程序吗？” 带有“是的，我已经得到它”、“不，但我很想尝试一下”和“别管我”按钮的模态。

“是”按钮将 cookie 设置为 true 并重定向到 your-uri:// “否”按钮重定向到“ [http://itunes.com/apps/yourappname](http://itunes.com/apps/yourappname) ”，这将打开设备上的 App Store “别管我”按钮将cookie设置为false并关闭模式我玩过但发现有点笨拙的另一个选项是在Javascript中执行以下操作：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T01:43:47.557

这将解决您的一个问题，它将用户链接到应用程序页面：

```
itms-apps://itunes.com/apps/APPNAME 
```

# path - 回声“示例” | 剪辑，添加不需要的换行符

> ID：10907188
> 
> 赞同：4
> 
> 时间：2012-06-06T01:39:33.493
> 
> 标签：path, cmd, echo, clipboard, image-capture

所以-我正在使用图像捕获工具（snagit）。默认情况下，图像本身会保存到剪贴板（捕获后）。我希望图像的路径存储在剪贴板中。

该应用程序允许我（而不是）保存文件，并将图像作为参数传递给外部应用程序。我将它传递给以下 .vbs 文件：

```
Dim Clipboard
Set args = WScript.Arguments
if args.length > 0 then
    arg1 = trim(args.Item(0))
else
    arg1 = "(No Data)"
end if

Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run "cmd /C echo "&arg1&" | CLIP", 2 
```

这完成了我想要的 99%，除了我发现 'ECHO ... | CLIP' 倾向于将换页符/回车符附加到我的字符串中。

我可以使用更好的命令吗（在 cmd/vbs 中）？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:10:53.343

我严重怀疑您的代码`<formfeed><carriage return>`在剪贴板上生成。它应该`<carriage return><line feed>`在最后产生。这些是 Windows 上的标准行终止字符。它们由`ECHO`命令自动添加。

您可以在不使用新行的情况下写入标准输出`<NUL SET /P "=message"`

我不明白为什么您在无法直接访问剪贴板时使用 VBS。使用批处理文件对我来说更有意义。

```
@echo off
setlocal
set "arg1=%~1"
if not defined arg1 set "arg1=(No Data)"
<nul set /p "=%arg1%"|clip 
```

或作为单行批处理文件：

```
@if "%~1"=="" (<nul set/p"=(No Data)"|clip) else <nul set/p"=%~1"|clip 
```

如果你真的想使用 VBS，那么这里就是

```
Dim args, arg1, objShell
Set args = WScript.Arguments
if args.length > 0 then
  arg1 = trim(args.Item(0))
else
  arg1 = "(No Data)"
end if

Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run "cmd /C <nul set /p ""="&arg1&""" | CLIP", 2 
```

# actionscript-3 - 抽象类和具体类

> ID：10907189
> 
> 赞同：0
> 
> 时间：2012-06-06T01:39:47.000
> 
> 标签：actionscript-3, design-patterns

我想知道...

我知道抽象类用于接口目的。

具体类呢？它是抽象类的子类？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:47:36.210

具体类是可以实例化的类，而抽象类则不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:01:12.087

具体类是可以为其创建实体（实例）的类。与抽象类不同，具体类没有虚拟成员函数或受保护成员。具体存在于现实中。

# portal - 如何获取 filemaker 12 中指定门户行中指定字段的值？

> ID：10907191
> 
> 赞同：1
> 
> 时间：2012-06-06T01:40:01.320
> 
> 标签：portal, filemaker

我有一个自动排序的门户，以便特定的兴趣行出现在顶部。我想获取该行中特定字段的值，并通过一些计算将其显示在另一个字段中。但是我不知道如何引用特定行中的值。

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:35:58.193

我找到了解决办法！使用 GetRepetition 函数并指定字段和行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T04:05:28.390

您也可以使用 GetNthRecord 函数来执行此操作，而无需门户。

# ios - iCarousel 滚动

> ID：10907195
> 
> 赞同：0
> 
> 时间：2012-06-06T01:40:21.793
> 
> 标签：ios, objective-c, iphone, xcode, icarousel

如何滚动特定项目或索引，例如：我`NSInteger`在另一个上设置一个`UIView`然后将它传递给我的`iCarousel`. 在我的另一个`UIView`中，我设置`NSInteger`如下：

```
[[NSUserDefaults standardUserDefaults] setInteger:button.tag
                                           forKey:@"integer"];

[[NSUserDefaults standardUserDefaults] synchronize]; 
```

滚动时我使用这个：

```
[carousel scrollByNumberOfItems:-35 duration:10.7550f]; 
```

如何将整数传递给轮播，使其滚动然后将其停止到该特定项目或索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:43:35.820

```
- (void)scrollToItemAtIndex:(NSInteger)index animated:(BOOL)animated;` 
```

[在README](https://github.com/nicklockwood/iCarousel)中明确说明和描述。方法下的第一种**方法**

或者，如果您愿意：

```
- (void)scrollToItemAtIndex:(NSInteger)index 
                   duration:(NSTimeInterval)scrollDuration;` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T15:04:11.463

in your `ViewDidLoad method` in your `Viewcontroller`....

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //configure carousel
    carousel.type=iCarouselTypeCylinder;
    carousel.autoscroll=0.4;
} 
```

# css - AirTime 如何改变 Facebook 权限对话框的外观？

> ID：10907204
> 
> 赞同：-1
> 
> 时间：2012-06-06T01:41:55.980
> 
> 标签：css, facebook, facebook-apps, facebook-authentication

我看到这个*非常*个性化的 Facebook 对话框安装了 AirTime Facebook 应用程序：

![通话时间 Facebook 对话框](../Images/aa1c0df62defc8054accd486f976594b.png)

1.  他们怎么能在技术上做到这一点？（只是沉重的 CSS 黑客攻击？）
2.  是否违反 Facebook 的服务条款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:58:38.933

这只是一个启动对话框的页面，而不是实际的对话框（当您单击按钮时它会在弹出窗口中启动），因此它仍然是他们网站的一部分，位于检测您是否允许 Facebook 权限的页面上。

# android - 如何显示@

> ID：10907209
> 
> 赞同：0
> 
> 时间：2012-06-06T01:43:05.330
> 
> 标签：android, xml

如何显示@我想显示&所以我做了&它工作正常但我不知道如何显示@

```
 <string name="feedbackname">nom &amp; prenom</string>
<string name="feedbackemail"> @ email</string> 
```

没用它显示xml错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:00:29.353

您应该在“@”之前使用“\”。例如

```
<string name="google mail">\@gmail.com</string> 
```

参考这个[链接](http://androidcookbook.com/Recipe.seam?recipeId=2219)非常有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T01:51:37.937

`@`不需要在 XML 中转义。你可以试试`&#64;`，但你不应该这样做。

但是，这些确实需要转义：

```
<   &lt;
>   &gt;
&   &amp;
'   &apos;
"   &quot; 
```

请提供有关您的 XML 解析器及其抛出的实际错误消息的更多详细信息。

# php - 如何在 PDO 中编写以下代码

> ID：10907211
> 
> 赞同：2
> 
> 时间：2012-06-06T01:43:26.187
> 
> 标签：php, mysql, pdo

我有一个旧的 mysql 代码，我想将其转换为 PHP 数据对象，但我在网上找不到如何做到这一点，有什么帮助吗？

```
 $num = mysql_num_rows($result = mysql_query($query));

while($row = mysql_fetch_array($result))
  {

...
} 
```

$query 是一个 SELECT 语句。

更新：

我的代码只显示消息“找不到驱动程序”而不是其他，它没有显示表单代码或类似的东西。我在 PDO 中做错了什么？我知道数据库、主机名、用户名和密码是正确的，所以它应该能够显示表单，然后让我连接到数据库。

```
<?php

session_start(); 

$hostname = 'localhost';
$username="xxx";
$password="xxx";
$database="mobile_app";

try {
    $dbh = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);

?>

,,, //Form Code is in here

<?php
if (isset($_POST['submit'])) {

$query = "
SELECT * FROM Teacher t  
WHERE 
(t.TeacherUsername = '".mysql_real_escape_string($teacherusername)."')
AND
(t.TeacherPassword = '".mysql_real_escape_string($teacherpassword)."')
";

$loged = false;

foreach ($dbh->query($sql) as $row)
  {

,,,, //results for each row

  }

 $dbh = null;

}

    }
catch(PDOException $e)
    {
    echo $e->getMessage();
    }
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T01:46:20.850

```
$result = $link->query($query); # Replace $link with your database handle
$rows = $link->fetchAll(PDO::FETCH_BOTH);
$num = count($rows);

foreach($rows as $row) {
    # ...
} 
```

…是直接等价物。当然，您可能不需要`PDO::FETCH_BOTH`（我建议`PDO::FETCH_OBJ`在更干净的包中使用相同类型的功能），并且您可能希望利用参数化查询，在这种情况下，您将调用`prepare`而不是`query`，然后绑定参数，然后调用`execute()`以获取结果。

您可能会找到有用[的参考。`PDOStatement`](http://php.net/manual/en/class.pdostatement.php)

编辑：正如评论者指出`rowCount()`的那样，即使它是最直接的等价物，也不是很好。我用更好的东西更新了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T01:48:17.480

```
try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

// PDOStatement is traversable, so you could use foreach.
foreach ($dbh->query($sql) as $row) {
  //...
} 
```

# mysql - 按组返回前 n 个平均值

> ID：10907214
> 
> 赞同：2
> 
> 时间：2012-06-06T01:43:51.657
> 
> 标签：mysql, sql

我有一个房地产交易数据库。用简单的英语，我正在尝试编写一个查询来查找每个城市最昂贵的 N 栋公寓楼。

我有以下相关领域：

```
Address
City
Sold Price
Sold Date 
```

为了解决这个问题，我的假设是我需要按地址和按城市分组取平均售价，限制为 N，并按平均价格排序。为了弄清楚哪些地址可能是公寓楼，人们会期望在短时间内具有相同地址的大量交易是公寓楼（地址不包括单元#）。因此，如果 XYZ 地址在定义的时间范围内包含在 N 次交易中，则假定它是一栋公寓楼。

披露：我对 SQL 很熟悉，所以到目前为止我所做的研究让我有点困惑。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:37:45.443

在不知道 SQL 的确切品牌的情况下，您可能需要查找一些语法，但这可能有效：（前 10 名，其中 5 次销售在日期范围内）

```
 select top 10 address,city, soldCount from 

    (

    select 

    address, city, count(*) as soldCount, average(sold_price) as myAvg

    group by address, city
having soldCount > 5
    where sold_date between '2012-05-01' and '2012-05-15'
    ) mytable order by soldCount 
```

参考此站点以获取有关 Oracle 等“顶级”的更多信息。 [http://www.w3schools.com/sql/sql_top.asp](http://www.w3schools.com/sql/sql_top.asp)

您可能可以在一次选择中完成所有这些操作，但有时我使用这样的内部表来分隔逻辑.. count(*) 背后的想法只是意味着有多少行

# c# - 如何将javascript键码转换为正确的键码？

> ID：10907216
> 
> 赞同：1
> 
> 时间：2012-06-06T01:44:22.043
> 
> 标签：c#, javascript, keycode

有没有一种方法可以将 javascript 键码转换为 C# 使用的键码？

例如 87 是 javascript 中的字符“w”，但在 C# 中是 57。77 是“m”，而在 C# 中是 4D。有没有简单的方法来转换它们？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T01:51:25.077

问题不在于它们不同；你的 C# 只是十六进制的。

87 [10] = 57 [16]
77 [10] = 4D [16]

只需将它们视为`int`s，而不是字符串，就可以了。

# html - 背景图片与网站在中间

> ID：10907218
> 
> 赞同：0
> 
> 时间：2012-06-06T01:44:33.940
> 
> 标签：html, css

所以我希望我的网站在页面中间有一个静态背景图片的内容，而我在页面下方，就像[这个页面](http://www.gldesert.com/)一样。我怎样才能让它工作？我已经尽可能地查看了所有内容，但我无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T01:49:22.067

他们很可能使用 CSS 来实现这种效果。我们需要做的第一件事是设置背景图像。

```
body {
  background-image: url(path/to/image.png);
} 
```

接下来我们需要使用`background-attachment`属性设置背景附件。

```
body {
  background-image: url(path/to/image.png);
  background-attachment: fixed;
} 
```

这样就可以达到你想要的效果，一个随页面滚动的背景图片。请注意，除非图像足够大，否则背景颜色将显示出来。

* * *

**编辑：**您可以通过设置`background-repeat`属性将背景设置为不重复。

```
body {
  background-image: url(path/to/image.png);
  background-repeat: no-repeat;
  background-attachment: fixed;
} 
```

* * *

**编辑：**`background-position`您可以通过属性设置背景的位置。为了使其居中，我们会这样做。

```
body {
  background-image: url(path/to/image.png);
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:16:35.037

the html

```
<body>
<div id="container">
<h2>Hi how are you?
content goes here
</h2>
</div>
</body​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&gt;` 
```

The css

```
body {
background-image: url(/path/image.jpg);
background-repeat: no-repeat;
background-attachment: fixed;
background-position:top center;
}
#container {
background: white;
margin: 20px auto;
padding: 20px;
width: 400px;  /* change to suit need*/
}​ 
```

Example of how it appears: [http://jsfiddle.net/rgZgY/](http://jsfiddle.net/rgZgY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T01:49:11.777

他们正在使用一个名为 jScrollPane 的库。

[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

相关标记如下，您应该在检查器中搜索它。当你这样做时，你会看到'top' 属性随着你的滚动而改变。

```
<div class="jspPane" style="padding: 0px; width: 569px; top: -271px; "><div id="tab1" class="tab_content" style="display: block; ">
                            <div class="inner">
                                    <div class="review_block">
                                        <figure><img src="http://www.examiner.com/images/blog/EXID43556/images/vote_check_image.jpg" width="190" height="190" alt=""></figure>
                                      <div class="img-wrap"><strong>Vote, Vote, Vote!!</strong>
                                        <p>Vote fast!</p>
                                        <strong>The votes on MinecraftServers.net have reset! Get us over a hundred or two right off the bat at 12AM, and we will be the best!  For the next week, we are raising the reward amount too 20 diamonds per vote!  Happy voting, Thanks!</strong></div>
                                    </div>
                                  <div class="review_block">
                                        <figure><img src="images/diamond.png" width="190" height="190" alt=""></figure>
                                        <div class="img-wrap">  
                                            <strong>New Website!</strong>
                                            <p>It's awesome!</p>
                                        <strong>We love the new look of things, it's cleaner and up-to-date!</strong></div>
                                  </div>
                                    <div class="review_block">
                                        <figure><img src="images/page1_img1.jpg" width="190" height="190" alt=""></figure>
                                      <div class="img-wrap"><strong>New Domain Name!</strong>
                                        <p>www.gld.bz</p>
                                        <strong>New Domain Name! Easier to remember, type, and it actually fits on signs and in chat better! Just a shortcut for www.gldesert.com</strong></div>
                                    </div>
                                    <div class="review_block">
                                      <figure><img src="images/arrow.png" alt=""></figure>
                                      <div class="img-wrap"><strong>Upgraded Server!</strong>
                                        <p>So much faster, and 0 lag!</p>
                                        We went to the furthest extent possible, We rented out Google.... Ok, maybe not Google, but it's close enough. We have 512GB SSD, 32GB of RAM, 8 Core CPU @ 3.8GHz a core. Infact, here is the servers temporary theme song!<embed type="application/x-shockwave-flash" wmode="transparent" src="http://www.google.com/reader/ui/3523697345-audio-player.swf?audioUrl=http://gldesert.com/music/better.mp3" height="27" width="320">                                 </div>
                                    </div>
                              <div class="review_block">
                                      <figure><object width="425" height="350"><param name="movie" value="http://www.youtube.com/v/lp-62YcdpxU&amp;autoplay=0&amp;loop=1&amp;volume=" 25"=""><embed src="http://www.youtube.com/v/lp-62YcdpxU&amp;autoplay=0&amp;loop=1&amp;volume=" 25"&akkiwfullscreen="1" type="application/x-shockwave-flash" width="190&quot;" height="144"></object></figure>
                                        <div class="img-wrap">  
                                            <strong>Video Contest is over!</strong>
                                            <p>And the winner is.... Silver Vapour!</p>
                                           Congrats SilverVapour! You have received a free Captain Rank! Awesome job with the video!
                                        </div>
                              </div>
                              </div>
                            </div><div id="tab3" class="tab_content" style="display: none; ">
                              <div class="inner"></div>
                          </div></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T01:51:07.427

使用“位置：固定”作为背景图像。然后给它一个低 z-index 以将它放在所有内容的后面。把其他的东西都照常放就好了。 [http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp) 背景图片的css应该如下所示：

```
#backgroundImage{
width:100%;
height:100%;
position:fixed;
z-index:-1;
} 
```

其他一切都将保持不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T07:08:03.790

保留`background-attachment: fixed`背景图像。

要将内容保持在中间，请添加以下 CSS

```
#container {
    margin: 0 auto;
    padding: 0 0 20px;
    width: 1009px;
} 
```

container 是具有主要内容的元素的 id

# javascript - Javascript/jQuery 可以自动填充只读文本字段吗？

> ID：10907223
> 
> 赞同：1
> 
> 时间：2012-06-06T01:46:16.280
> 
> 标签：javascript, jquery, readonly

我的应用程序有一个区域需要用户同意一个声明，并且我正在使用 Javascript/jQuery，因此当用户选择“是”时，它会自动将日期/时间输入到只读字段中。

虽然我无法重现它，但我有多个用户告诉我，当他们选择“是”时，它不会填充日期/时间，并且由于该字段是只读的，他们无法自己输入。

我的代码中是否有任何非常规的内容会在特定浏览器中导致上述问题？任何人都可以在他们的机器上重现这个吗？

这是一个工作示例：http: [//jsfiddle.net/YL2Wd/](http://jsfiddle.net/YL2Wd/)

HTML：

```
<div>
    <label>I agree:*</label>
    <span class="options">
        <label for="agreement_no">No</label>
        <input type="radio" class="required authorization" value="0" id="agreement_no" name="agreement">

        <label for="agreement_yes">Yes</label>
        <input type="radio" class="required authorization" value="1" id="agreement_yes" name="agreement">
    </span>
</div>
<div class="description">
    Agreement Text
</div>
<div class="question">
    <label for="authorization_timestamp">Date/Time*</label>
    <input type="text" readonly="readonly" maxlength="100" class="authorization_timestamp required" name="authorization_timestamp" id="authorization_timestamp">
</div> 
```

Javascript：

```
$('.authorization[id$="yes"]').on('change', function() {

    var dateStr;

    if ($(this).val() == 1) {

        var now = new Date();

        var month = now.getMonth() + 1;
        var day = now.getDate();
        var year = now.getFullYear();
        var h = now.getHours();
        var m = now.getMinutes();
        var s = now.getSeconds();

        month = month < 10 ? "0" + month : month;
        day = day < 10 ? "0" + day : day;
        h = h < 10 ? "0" + h : h;
        m = m < 10 ? "0" + m : m;
        s = s < 10 ? "0" + s : s;

        dateStr = month + "/" + day + "/" + year + " " + h + ":" + m + ":" + s
    }

    $(this).parent().parent().nextAll().find(".authorization_timestamp").first().val(dateStr);

});

$('.authorization[id$="no"]').on('change', function() {

    var dateStr;
    dateStr = "";
    $(this).parent().parent().nextAll().find(".authorization_timestamp").first().val(dateStr);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:50:48.393

代替

```
 $(this).parent().parent().nextAll().find(".authorization_timestamp").first().val(dateStr); 
```

只需使用

```
 $("#authorization_timestamp").val(dateStr); 
```

这意味着你应该去寻找`id`或`class`指向那个元素。

**[演示](http://jsfiddle.net/thecodeparadox/UCTEv/)**

* * *

> ### 尽量避免 .next().next()... 链接。因为它很脆，会导致 html 中断。总是尝试使用`id`或`class`指向元素。一些浏览器会导致问题并在那里创建空文本节点。

* * *

***如果您根本不感兴趣更改您的代码（不好，您应该）然后***

```
 $(this)
        .parent()   // go to span
        .parent()  // jump to parent div
        .next()   // .description div
        .next('.question') // .question div
        .find('.authorization_timestamp')  // find the input
        .val(dateStr); // set value 
```

并对您的查询进行一些编辑：

```
 $(this)
        .parent()
        .parent()
        .nextAll('.question')
        .find(".authorization_timestamp")
        .val(dateStr); 
```

### 根据您的评论：

试试这样：

```
var index = this.id                          // get id of radio
                  .replace('agreement','')   // replace agreement string
                  .replace('_yes','');       // replace yes string
                                             // output: 1, 2, 3 ...

$("input#authorization" + index + '_timestamp')   // get the target input field 
                                                  // using that index, because your
                                                  // html is synchronous with index
                                    .val(dateStr); 
```

**[演示](http://jsfiddle.net/thecodeparadox/YL2Wd/7/)**

我这样做是为了`yes`，同样是为了`no`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:39:38.330

我修改了你的[JSFiddle](http://jsfiddle.net/YL2Wd/12/)来演示一个简单的方法来做到这一点。基本上，当您动态创建单选按钮输入时，添加一个`data-timestamp`指向相关时间戳文本框的动态生成 ID 的属性，如下所示：

```
<input type="radio" class="required authorization" value="0" id="agreement1_no" data-timestamp="authorization1_timestamp" name="agreement1">
<input type="radio" class="required authorization" value="1" id="agreement1_yes" data-timestamp="authorization1_timestamp" name="agreement1"> 
```

然后，在您的 jQuery 函数中，获取该属性的值并将其用作 jQuery 选择器来设置文本框的值。

```
var targetElement = "#" + $(this).attr("data-timestamp");
$(targetElement).val(dateStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T02:04:21.707

thecodeparadox 已经向您展示了该怎么做`$("#authorization_timestamp").val(dateStr);`。它在某些浏览器中可能不起作用的原因可能是因为空文本节点是围绕 HTML 元素创建的。

如果您将 HTML 更改为不包含任何空格，则您的选择器应该可以工作。话虽如此，使用类似的代码

```
$(this).parent().parent().nextAll() 
```

是通过对 HTML 进行任何细微更改来破坏代码的可靠方法。

**在不使用 ID 的情况下使其工作** 如果可能有多个`authorization_timestamp`s，则无法分配 id。使它成为一个类并使用类似下面的东西

```
<!-- Add a div with a class around all your HTML so you can properly 
     walk up and back down to the search field to your form wrapper -->
<div class="form-wrapper">old content</div>... 
```

现在找到您的元素，如下所示

```
$(this).parents(".form-wrapper").find("authorization_timestamp"); 
```

我在这里创建了一个工作示例：http: [//jsfiddle.net/YL2Wd/11/](http://jsfiddle.net/YL2Wd/11/)我还改进了您的代码，因此它不需要两个单独的处理程序。

# python - Python正则表达式匹配路径

> ID：10907231
> 
> 赞同：0
> 
> 时间：2012-06-06T01:47:10.767
> 
> 标签：python, regex

我正在尝试编写一个正则表达式来匹配文件中的库和包含该文件的路径。文件中的所有库都将采用该格式。

```
text = "mylib|C://desktop//baseicmylib.lib
        randlib|C://desktop//randlib.lib" 
```

所以如果我想找到 mylib

我写

```
str = "mylib"
pattern = r'%s\\|.*lib'%str
mypath = re.findall(pattern,text) 
```

有人可以帮助我在哪里犯错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T02:05:21.753

也许不需要正则表达式？

```
text = '''mylib|C://desktop//baseicmylib.lib
    randlib|C://desktop//randlib.lib'''

libs = dict(line.split('|', 1) for line in
    (s.strip() for s in text.split('\n'))) 
```

结果：

```
{'randlib': 'C://desktop//randlib.lib',
   'mylib': 'C://desktop//baseicmylib.lib'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T01:52:22.347

管道之前的 // 导致问题。以下对我来说很好：

```
text = "argh|foo.lib"
str = "argh"
pattern = r"%s\|.*lib" %str
print re.findall(pattern,text)

['argh', '|hehe.lib'] 
```

// 不用于转义，如果您想在原始字符串中转义，则单个 \ 就足够了（对于非原始字符串，双 \ 就足够了）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T02:01:52.003

需要稍微调整一下你的模式：

```
text = '''mylib|C://desktop//baseicmylib.lib
randlib|C://desktop//randlib.lib'''
str = 'mylib'
pattern = "%s\|(.+?\.lib)" %str
print re.findall(pattern,text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T02:06:45.397

```
>>>pattern = r'%s.*?lib'%str
>>>re.findall(pattern, text)
['mylib|C://desktop//baseicmylib'] 
```

这是正则表达式中的[非贪婪](http://docs.python.org/library/re.html)匹配

> *?, +?, ??
> 
> , , 和限定符都是贪婪的`'*'`，`'+'`它们`'?'`匹配尽可能多的文本。有时这种行为是不希望的；如果 RE`<.*>` 与 'title' 匹配，它将匹配整个字符串，而不仅仅是 ''。添加“？” 在预选赛使其以非贪婪或最低限度的方式执行比赛之后；将匹配尽可能少的字符。使用 。*？在前面的表达式中将只匹配 ''。

# azure - 什么时候不使用 ACS？

> ID：10907233
> 
> 赞同：6
> 
> 时间：2012-06-06T01:47:28.587
> 
> 标签：azure, identity, wif, claims-based-identity, acs

我一直在研究 Azure 访问控制服务 (ACS)，它看起来特别擅长处理来自异构（可配置）身份提供者的身份验证。然后，它似乎支持许多其他方案（参见例如[ACS How-To's](http://msdn.microsoft.com/en-us/library/windowsazure/gg185939)）。

我的问题是相反的：它真的可以帮助我理解为了正确使用它，ACS**不**适合什么。ACS 的局限性是什么，和/或在哪些情况下 ACS 不合适？

（假设，为了论证，我计划创建一个 - 有利可图的 :) - 公共 Web API 和相应的网站前端，托管在 Azure 中 - 即，我确实关心用户身份。如果您愿意，您可以进一步假设我的系统将使用 .NET 构建。）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T15:17:55.263

您不应将 ACS 用作身份提供者。

有时，我对 ACS 所扮演的角色感到有些困惑。ACS at is core 是一个联合提供者，但在一个有效的场景中，您希望您的后端服务（受信任的子系统）使用共享密钥或证书直接向 ACS 进行身份验证。这可以使用服务标识来完成。然而，我不止一次地看到一个 ACS 场景提出了要配置多个帐户的情况，这将通过为每个用户创建一个服务身份来实现。

这真的不是 ACS 的设计方式。如果您突然拥有成千上万的用户，那么将 ACS 设置为您的权威源用户目录将无法扩展。ACS 提供了一个很好的规则引擎，旨在规范来自各种身份提供者的传入声明类型，或用于简单的授权策略，例如生成角色声明。

但 ACS 的功能不应与 AD 和 ADFS 等功能齐全的目录、身份验证和授权解决方案相混淆。简而言之，ACS 不是 AD/ADFS 的版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T09:44:04.253

尽管您可以在 ACS 中使用 Windows Live 作为身份提供者，但在某些情况下您不想使用它。您收到的用户 ID 取决于 ACS 命名空间。这意味着如果您的应用程序使用多个 ACS 命名空间（假设一个用于欧洲，一个用于美国），这可能会导致一些问题。

想象一下您的用户通过您的 USA 命名空间登录的场景。您的应用程序将收到该用户的 ID（哈希），您可能会在您的应用程序中为该用户创建一个配置文件。一周后，您的用户前往欧洲并可能通过您的欧洲命名空间登录。即使这是同一个用户，您也会得到该用户的另一个 ID（哈希），这看起来像是一个新用户，即使它不是。这是因为 ID（哈希）取决于 ACS 命名空间。

[引用 MSFT 员工的话](http://social.msdn.microsoft.com/Forums/pl-PL/windowsazuresecurity/thread/82c2006a-69f6-43d7-a03e-946cd586e3e6)：

> 您从 ACS for Windows Live ID 收到的用户 ID 将特定于您的服务命名空间中的该用户。如果您使用不同的服务命名空间，您将为同一用户获得不同的值。因此，回答您的问题：* Labs ACS 和 Prod ACS [不同 ID]
> 
> *   不同订阅中的不同依赖方（在产品中）[不同 ID]
>     
>     
> *   同一订阅中的不同RP [如果服务命名空间相同，则ID相同，同一订阅中的2个命名空间不同]
>     
>     
> *   如果我删除并重建 RP 到同一个领域，同一个帐户 [同一个 ID]

**更新：**

要回复其中一条评论，您确实不会从 Windows Live 身份提供商那里获得电子邮件地址。但是您应该假设您无法控制从公共身份提供者那里获得的信息。一个好的做法是简单地依赖用户的标识符并为用户创建配置文件（您将在应用程序中管理配置文件）。当您从身份提供者处获得一些信息时，您已经可以更新个人资料，但如果此信息不可用，您应该简单地要求用户更新他/她的个人资料。请务必查看[BlobShare](http://blobshare.codeplex.com/)示例以获取更多信息。

# .net - 从 CompositonContainer 中移除部分

> ID：10907236
> 
> 赞同：1
> 
> 时间：2012-06-06T01:47:40.967
> 
> 标签：.net, mef

文使用组合批次从容器中移除部件，如何获得对需要移除的部件的引用？组合批量删除方法采用可组合部分。AddPart 方法也接受一个可组合部件类型参数，但有一个过载（扩展方法），它接受一个对象并使用 AttributedModelServices.CreatePart 来获取一个可组合部件。我尝试在从容器中获得的引用上使用 AttributedModelServices.CreatePart，然后将其用于 remove 方法，但它没有从容器中删除它。

我可以保存原始 AddPart 调用返回的引用，但这意味着我必须在整个应用程序中保留该引用。不是我想做的。我已经看到了循环遍历容器部分的示例，但这对我来说似乎很老套。

我如何让容器返回我需要的东西。

**伪代码**

```
CompositionBatch batch = new CompositionBatch([] { Part1, Part2 }, []{});
Container.Compose(batch);

var partRef = Container.GetExport<Part2>();

batch = new CompositionBatch();
batch.RemovePart(partRef);

container.Compose(batch); 
```

# grails - grails submitButton 上的验证

> ID：10907240
> 
> 赞同：4
> 
> 时间：2012-06-06T01:48:49.940
> 
> 标签：grails, button, spring-webflow-2

是否可以使用 javascript 创建验证以在 grails`<g:submitButton>`标记的 onCLick 属性上实现？我正在使用 webflow 从一个页面继续到另一个页面。这是我的下一步按钮的代码：

```
 <g:submitButton class="btn btn-primary" name="next" value="Next" onclick="return isfilipinoCitizen()"></g:submitButton> 
```

isfilipinoCitizen 函数位于我的 javascript 代码中：

```
 <script type="text/Javascript">                      
                function isfilipinoCitizen() {    
                  var selected = "${accountInfo?.filipinoCitizen}";
                      if(selected == "1"){
                          return true;
                      }else{
                          alert(selected)
                          alert("You must be a Filipino citizen to register!")
                          document.location.href = "myhomepage";
                      }
                }
                </script> 
```

我在这里要做的是，如果来自用户的输入为0，则阻止页面进入下一页，并将用户重定向到系统的主页。但它似乎根本不起作用。

非常感谢你们的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T07:11:45.870

首先，我认为您应该使用[Firebug](http://getfirebug.com/)来检查实际呈现为 html 的内容。它还有助于发现一些 javascript 错误或加载资源失败。

`alert('come here');`其次，您应该首先检查是否调用了 javascript，方法是在 isfilipinoCitizen() 的开头放置一个权利。之后，在第一个条件下发出警报。Javascript 是一门特殊的语言，我们在处理它时必须小心 :) :

```
 <script type="text/Javascript">                      
                function isfilipinoCitizen() {    
                  alert("come here");
                  var selected = "${accountInfo?.filipinoCitizen}";
                      if(selected == "1"){
                          alert("come there");
                          return true;
                      }else{
                          alert(selected)
                          alert("You must be a Filipino citizen to register!")
                          document.location.href = "myhomepage";
                      }
                }
                </script> 
```

最后（在你保证你的javascript函数被正确调用之后），你必须做的不仅仅是“document.location.href”来阻止表单提交。为了快速生效，我会推荐[jQuery](http://api.jquery.com/)和[onSubmit() 事件](https://stackoverflow.com/questions/8888164/prevent-form-from-submitting-to-a-different-page)。如果你喜欢纯 javascript 解决方案，可以按照 Galm 和 Anuj 提出的解决方案：将 onsubmit 放入标签中：

```
<g:form name="myForm" action="myaction" onsubmit="return isfilipinoCitizen()">...</g:form> 
```

**在失败的情况下，请记住返回 false :)**

P/s：`${accountInfo?.filipinoCitizen}`直接插入到 javascript 可能有效，但这不是最佳实践。将“isFilipinoCitizen”作为参数传递给 javascript 函数会更好。

**另一个可用性思考**：如果你已经知道哪个用户有权注册，为什么还要等到用户填写完所有表格，告诉他们必须是菲律宾公民才能注册？为什么之前（页面加载后）没有通知用户？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T02:10:36.627

试试`onsubmit`吧。

```
<g:submitButton class="btn btn-primary" name="next" value="Next" onsubmit="return isfilipinoCitizen()"></g:submitButton> 
```

并在您的函数中返回`true`或`false`。

# c++ - 为什么将 0 分配给指针是悬空指针的解决方案？

> ID：10907241
> 
> 赞同：-3
> 
> 时间：2012-06-06T01:48:54.117
> 
> 标签：c++, memory-management, dangling-pointer

当指针被赋值为 0 时操作系统/调试器会做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T02:00:55.547

这解决的基本问题是并非所有 CPU 都实现相同类型的内存取消引用语义。`free()`在某些情况下，在地址出现任何看起来像错误的情况后，无法取消引用该地址。在嵌入式处理器上尤其如此。在其他情况下，出于性能原因，分配器可能非常懒惰地将释放的内存返回给主机操作系统。

从根本上说，取消引用这样的指针可能会导致实际看到已释放的区域、看到归零的区域、看到后续分配返回的内存或导致 cpu 异常。由于这种可能性是完全合理的，c++ 已将此条件指定为“未定义行为”。

要摆脱这种情况，您需要一种方法来区分已释放或分配的指针值。因此，C++ 要求取消引用已分配的指针`0`是错误的，并且将此类指针转换为整数也返回零。

* * *

回复：您当前的编辑。

出于操作系统的目的，指针不存在。在最低级别，没有任何类型的字符串、整数、浮点数或指针。只有字节。当您编写一个将 0 分配给指针值的 c++ 程序时，操作系统根本不会进入等式。这完全取决于编译器的实现。

另一方面，当您在程序中*取消引用*此类指针时，c++ 要求这是一个运行时错误。在嵌入式系统上，这基本上是不实际的，0 是此类系统上完全有效的内存地址，通常 SRAM 靠近该地址。*如果编译器严格执行标准，它可能会在每次*取消引用之前插入检查以查看它是否为空，并将 MCU 置于错误状态，但这是不寻常的，因为它会减慢已经很慢的系统并增加程序大小。

在功能更齐全的系统上，那些具有内存管理单元的系统上，应用程序中的零地址通常不会映射到任何物理页面，因此操作系统确实可以帮助您，通过在页面程序中引发段错误来尝试访问空指针值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T01:51:52.073

指向 0 的指针称为空指针，通常用于表示它没有指向任何东西。这可以通过调试器/运行时/编译器/任何东西来检查，以确保您没有指向无效数据的指针。这只是一个明确的认识，即指针现在不应该指向任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T01:52:52.510

将 0（或 NULL，或根据您的导入为您预定义的任何内容）分配给指针是用于指示的**一般约定：**

*   **指针未使用**（未指向感兴趣的内存地址），
*   并且**它不应该被取消引用**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T01:54:01.563

我想它对程序员比对操作系统/调试器更有用。

操作系统/调试器不关心指针指向的位置。

但是检查指针是否指向有意义的地方对您很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T02:11:39.700

Simply, to add to this long list of answers, the runtime will assign `0`, or `NULL` to the pointer. The memory at the other end, unless previously freed (`free()` or `operator delete`) if it was dynamically allocated (`malloc()` and `operator new`), or just cleaned up automatically because it was an `auto` (all locals by default).

Assigning `NULL` to a pointer that has valid memory at the other end creates a *memory leak*. A memory leak is when the OS thinks that a process is still using some memory, but the process has no handle on the memory (it has lost the address), and thus has no way of freeing it or using it. The memory will be cleaned up when the process terminates, but for long-running processes, or process that leak multiple times, or, worst of all, programs that leak large amounts of memory can cause big problems.

If a process leaks enough memory, at the least it will make the system sluggish and force the user to kill it, in worse circumstances, it would invoke the OOM killer (on systems with one), or worse, crash the entire system because of lack of memory. Also, if you dereference a `NULL` pointer, on any modern OS you will cause a segfault or bus error, and on ancient OS', you could destroy the system (eg. DOS).

Debuggers may notify you if they have enough information, you can also use static analysis tools to find memory leaks, or runtime tools like valgrind. Memory leaks are one of the biggest problems for C/C++ programs, and are something to look for carefully before realeasing code.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T01:55:51.993

将指针设置为 0 并不能解决悬空指针问题。如果代码认为悬空指针（根据定义无效）是有效的，设置为 0 并取消引用仍然会导致程序表现出非法行为。

如果代码在取消引用之前碰巧检查指针是否为空，那么将指针设置为 0 可以避免非法行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-06T01:55:59.987

空指针比约定更重要。你可以释放一个 nullptr 并且让它不做任何事情。它也被用作指针尚未指向任何东西的约定。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-06T02:09:14.173

```
Why is assigning 0 to a pointer a solution to a dangling pointer? 
```

@[wikipedia](http://en.wikipedia.org/wiki/Dangling_pointer#Dangling_pointer_detection)::

```
To expose dangling pointer errors, one common programming technique is to set
pointers to the null pointer or to an invalid address once the storage they 
point to has been released. When the null pointer is dereferenced 
(in most languages) the program will immediately terminate—there is no potential
for data corruption or unpredictable behavior. This makes the underlying 
programming mistake easier to find and resolve.  
This technique does not help when there are multiple copies of the pointer. 
```

.

```
What does the OS/Debugger do when a pointer is assigned 0? 
```

@[wikipedia](http://en.wikipedia.org/wiki/Null_pointer#Null_pointer)::

```
though, that the physical address zero is often directly accessible by hardware (for 
instance, it is directly accessible in x86 real mode, and it is where the interrupt  
table is stored), but modern operating systems usually map virtual address spaces in 
such a way that accessing address zero is forbidden. 
```

# ruby-on-rails - capistrano 错误：...../当前：没有这样的文件或目录

> ID：10907242
> 
> 赞同：2
> 
> 时间：2012-06-06T01:49:03.137
> 
> 标签：ruby-on-rails, capistrano

我正在尝试使用 capistrano 进行部署，但是当我进行 cap deploy:update 时，它​​没有创建 /current 文件夹，这是错误，有什么想法吗？

```
executing "cd /home/adamtodd/apps/homebase/current && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile --trace"
servers: ["xx.xxx.xx.xxx"]
[xx.xxx.xx.xxx] executing command
 ** [out :: xx.xxx.xx.xxx] bash: line 0: cd: /home/adamtodd/apps/homebase/current: No such file or directory 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T15:32:25.590

当我在首次部署时使用 Ben Curtis 解决方案进行资产预编译（[assets:precompile 任务重新定义](http://www.bencurtis.com/2011/12/skipping-asset-compilation-with-capistrano/)）时遇到了同样的问题（deploy:cold 没有帮助我）

简单的解决方法[在这里](https://gist.github.com/4079178)

```
namespace :deploy do
  namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      begin
        from = source.next_revision(current_revision) # <-- Fail here at first-time deploy because of current/REVISION absence
      rescue
        err_no = true
      end
      if err_no || capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l").to_i > 0
        run %Q{cd #{latest_release} && #{rake} RAILS_ENV=#{rails_env} #{asset_env} assets:precompile}
      else
        logger.info "Skipping asset pre-compilation because there were no asset changes"
      end
   end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:33:26.630

看起来您已经重新定义了 deploy:assets:precompile 任务，因为在 Capistrano 源代码中您可以看到它尝试 cd into `releases/12345`，而不是`current`：

[https://github.com/capistrano/capistrano/blob/master/lib/capistrano/recipes/deploy/assets.rb#L31-43](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/recipes/deploy/assets.rb#L31-43)

所以我会检查你的 deploy.rb 并删除重新定义的任务。

（我以同样的方式重新定义了任务，甚至添加了一个`--trace`like you，但是我试图解决的任何问题都不再是问题，开箱即用的任务对我来说很好。如果我不得不猜测，我会说我们的自定义任务是`RAILS_GROUPS=assets`进入命令字符串的黑客，但 Capistrano 现在会自动处理，如果你检查链接的源代码，你可以看到。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T23:47:46.033

`cap deploy:update`通常只适用于已经部署过一次的应用程序，我假设你的情况没有发生，因为你没有`current`目录。

尝试做一个`cap deploy:cold`。

# ruby-on-rails - 丢失的宝石可以

> ID：10907248
> 
> 赞同：1
> 
> 时间：2012-06-06T01:50:03.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

```
Bundler could not find compatible versions for gem "railties":
  In Gemfile:
    rails (= 3.2.3) ruby depends on
      railties (= 3.2.3) ruby

    jquery-rails (= 2.0.0) ruby depends on
      railties (3.2.5) 
```

我在尝试“捆绑安装”时收到该错误消息，这是我的 gemfile

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
    gem 'sqlite3', '1.3.5'
end

gem 'json'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.4'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.2.3'
end

gem 'jquery-rails', '2.0.0'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug' 
```

这是红宝石版本

```
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

在所有这些之前，我的“捆绑检查”会导致以下缺失的宝石

```
The following gems are missing
 * tilt (1.3.3)
 * mime-types (1.18)
 * mail (2.4.4)
 * sass-rails (3.2.5) 
```

有人可以帮我解决这个小问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:05:57.330

With the current combination bundler can't find a matching version of railties for both rails and jquery-rails at the same time.

**Solution**

Either:

```
gem 'jquery-rails', '2.0.1' 
```

Or:

```
gem 'jquery-rails', '~> 2.0.1' 
```

# windows - Vim 在 Mingw 上的行为很奇怪

> ID：10907250
> 
> 赞同：6
> 
> 时间：2012-06-06T01:50:16.617
> 
> 标签：windows, vim, mingw

我在 MinGW 4.6.2 上的 Vim 的行为很奇怪，例如，在插入模式下按 Backspace 会删除字符，但我必须在删除的字符消失之前用箭头键移动光标，这也会让我退出插入模式。

另一个例子，按 Del 删除字符有时会生成奇怪的字符，例如将小写字符更改为大写，或者破坏我键入的下一个字符，例如按“S”最初给我“$”。

我用错了 Vim 还是什么？我对 Vim 不太熟悉，所以我不确定这是否是默认行为，但据我所知，典型的 Vim 行为就像 Git Bash 中的 Vim，Backspace 和 Del 的工作方式就像在记事本中一样。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-05T04:12:21.340

我在 MinGW 中使用 vim 也有问题，特别是与鼠标滚轮滚动有关。但是您描述的问题听起来像 vi 兼容性。

你有没有在 vimrc 中尝试过以下设置？

```
set nocompatible
set backspace=2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T22:59:49.960

问题是，退格经常出现`^H`，而删除经常出现`^?`——有些白痴终端会交换两者，或者两者都提供相同的字符。当某些终端*真的*出错时，会生成一个按键，`ESC~<something>`然后`ESC`会`vim`进入命令模式，然后`~`会交换字符的大小写，等等。

您还需要处理终端功能的`terminfo`数据库`termcap`——如果您的`TERM`环境变量与正在运行的终端不完全匹配，则会选择错误的功能，并且应用程序将生成错误的转义序列以正确控制终端。

当然，在 Windows 上运行会使一切变得更加复杂，因为终端并不是平台的原生终端——`CMD.EXE`做自己的事情，`MSYS`做其他事情，并且`vim`可能`CMD.EXE`只是因为它很常见而被认为是沼泽标准。

所有这些都是我推荐使用的原因`gvim`；它会启动一个 GUI 窗口，其行为几乎与 text-mode 完全相同`vim`，但它的行为更具可预测性，您可以完全*在`gvim`*其中配置它——修复`vim`的行为实际上可能意味着更改`MSYS`配置，这可能会破坏*其他*程序。我不喜欢`gvim`启动“新上下文”的方式，而不仅仅是在我已经使用的环境中进行编辑，但`gvim`在 Windows 下感觉不那么尴尬。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T19:13:16.410

您的 vim 行为正确 - 只是在它检测到低功能终端的模式下，并且不想过多地触摸屏幕（`S`问题 -`$`标志着将被删除的区域的结束，但它会等到你'已完成插入，因此只需要重新绘制该行的其余部分一次）。当您按下某些键时，糟糕的终端仿真也会发送垃圾信息。

@sarnold 建议的 gvim 只是在窗口中工作的 vim 的构建，而不是另一个编辑器。它仍然是完整的 vim，并且仍然存在挑战。如果您被困在 Windows 机器上，这是比终端 vim 更好的选择，因为我不知道我喜欢在其中工作的单个终端（我包括 Cygwin）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-16T18:04:11.227

您可以通过以下方式检查发送到 Vim 的字符：

1.  按下启动命令模式`:`
2.  推`Ctrl`+`v`
3.  按所需的键（`Backspace`或`Del`在您的情况下。）

所以你会看到终端发送给vim的神奇字符序列。

例如，在我的情况下，`<C-Del>`当我按下 时`Backspace`，我可以通过将以下代码插入到我的 .vimrc 中来修复我的退格键：

"例如，如果是 xterm 终端
if &term="xterm" "修复退格：inoremap nnoremap fi

# android - VM 上的 Android 应用程序开发

> ID：10907251
> 
> 赞同：2
> 
> 时间：2012-06-06T01:50:29.313
> 
> 标签：android, vmware, virtual-machine

我有一些 C、C++、JAVA 编程经验，现在我想学习为 Android 开发应用程序。但我没有安卓设备，也没有心情买一台。那么，如何为 Android 设备开发应用程序？

我试图用一些图像创建虚拟机，但它停止了`kernel panic`
我也认为虚拟机会比模拟器更好，所以请帮助在我的电脑上设置 Android 设备。

*我真的是 Android 新手！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T01:59:22.403

下载 Eclipse 和 Android SDK。它带有一个 Android 设备模拟器，因此您实际上不需要购买 Android 设备。我尝试在模拟器上进行开发，得到的结果与我从 Android 设备得到的结果相同。但是，我建议，如果您要进行认真的 Android 开发，请购买 Android 设备，即使是便宜的也可以。它会让你的生活更轻松，因为 SDK 附带的模拟器真的很慢。此外，拥有一个物理 Android 设备将非常有利于测试目的。你不能用模拟器很好地测试（取决于你的应用程序）。

无论如何，您将在您的计算机上获取并安装 Eclipse，然后到[这里](http://developer.android.com/sdk/index.html)获取适用于您平台的 SDK。它适用于 Linux、Mac 和 Windows。

另外，请遵循[本](http://www.vogella.com/articles/Android/article.html)教程。它将带您完成需要安装的所有内容，并向您展示如何制作您的第一个 Android 应用程序。我在学习基础知识时使用它，它真的很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T21:00:29.777

我发现：[预装了 Eclipse 和 Android SDK 1.5 r2 的 Virtualbox 虚拟机](http://hartvig.de/2009/virtualbox-virtual-machine-with-eclipse-and-android-sdk-15-r2-preinstalled/)。我还没有验证它，但它声称是一个专门用于在eclipse中开发android应用程序的virtualbox镜像。它很旧（我认为是 2009 年），所以 sdk 会过时，但我希望更新会很简单。我最讨厌玩弄 IDE 和 SDK。

编辑：我可以验证它与网站上描述的完全一样，并且运行良好

# node.js - Jade 将空的 `style` 元素添加到 `head`

> ID：10907254
> 
> 赞同：3
> 
> 时间：2012-06-06T01:50:51.533
> 
> 标签：node.js, google-chrome, template-engine, pug

我使用[Jade](http://jade-lang.com/)作为我的 Express 驱动的 node.js 应用程序的模板引擎。也许是深夜，但我无法弄清楚`style`在生成的 HTML 中插入空元素的位置。

现场示例： http: [//quotation-mark.herokuapp.com/](http://quotation-mark.herokuapp.com/)（注意到`<style type="text/css"></style>`在最后`head`？）

* * *

Express 的模板设置：

```
app.set('views', settings.projectDir + '/views');
app.set('view engine', 'jade');
app.set('view options', {layout: false}); 
```

* * *

布局.jade

```
!!!html

include /helpers/css.jade

html(lang='ru')
  head
    meta(http-equiv='content-type', content='text/html; charset=utf-8')
    noscript
      meta(http-equiv="refresh", content="0; url=/noscript")

    title= title

    block css
      mixin css('/css/bootstrap/bootstrap.css')

  body
    block content 
```

* * *

索引.jade

```
extends layout

append content
  h1= title
  p Добро пожаловать в #{title}. 
```

* * *

我检查了几次，但一切似乎都很好（代码、模板、验证器）。没有线索……它应该发生吗？我在哪里弄错了吗？

即使`head`模板本身没有，浏览器中也有一个（Chrome 19.0.1084.53），也许浏览器添加了一些东西？简单的 HTML 页面没有它：

```
<!DOCTYPE html>

<html>

<head>
<title>Test</title>
<style>h1{color:red;}</style>
</head>

<body>
<h1>Hi!</h1>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T02:59:25.730

您的服务器生成的 HTML 实际上并没有空`<style>`块。

```
<!DOCTYPE html><html lang="ru">
<head>
 <meta http-equiv="content-type" content="text/html; charset=utf-8">
 <noscript><meta http-equiv="refresh" content="0; url=/noscript"></noscript>
 <title>«Кавычки»</title>
 <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>«Кавычки»</h1><p>Добро пожаловать в «Кавычки».</p>
</body>
</html> 
```

您是否使用任何浏览器扩展程序，例如 AdBlock？打开 AdBlock 后，我在访问的每个页面中都会看到那个空的样式块。禁用扩展程序使其消失。

# c - 分组运动向量

> ID：10907256
> 
> 赞同：0
> 
> 时间：2012-06-06T01:51:15.793
> 
> 标签：c, opencv, k-means, opticalflow

我正在使用 -Lucas-kanade 算法来计算带有 openCV 的视频序列的光流。我得到了运动矢量。现在我想将这些运动矢量分组到一些集群中。彼此靠近的向量我想将它们组合在一起。诸如最近邻方法之类的事情。但我不知道如何实现它。任何帮助将不胜感激。

谢谢你。

运行光流算法后，我使用 cvKMeans2() 对角点进行分组...

我在向量集群容器的向量中有集群。现在我想在每个集群周围画一条边界线..我不确定我该怎么做...如果有人知道请帮忙。

使用 openCV 手册中的以下代码，我在每个集群周围画了一个圆圈..但我想画一个矩形而不是一个圆圈..任何人请帮助我。

```
 for(int h = 0; h < clusterContainer.size(); h++ )
        {

           CvPoint pt1,pt2;
               CvMat box[100];

           pt1.x=(int)points->data.fl[h*2];
           pt1.y=(int)points->data.fl[h*2+1];
              cvCircle( frame1, pt1, 20, CV_RGB(255,255,0),4);

} 
```

![在此处输入图像描述](../Images/a5e854332218b66d9f8fd33c8ba25ec6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:56:35.780

要从一组点中获取边界矩形，可以使用 OpenCV [boundingRect()](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#boundingrect)函数。还要注意类似的[fitEllipse()](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#fitellipse)函数。

**boundingRect**
*计算点集的右上边界矩形。*

```
C++: Rect boundingRect(InputArray points)  
Python: cv2.boundingRect(points) → retval
C: CvRect cvBoundingRect(CvArr* points, int update=0 )
Python: cv.BoundingRect(points, update=0) → CvRect 
```

参数： points - 输入 2D 点集，存储在 std::vector 或 Mat 中。
该函数计算并返回指定点集的最小垂直边界矩形。

**fitEllipse**
*在一组 2D 点周围拟合一个椭圆。*

```
C++: RotatedRect fitEllipse(InputArray points)
Python: cv2.fitEllipse(points) → retval
C: CvBox2D cvFitEllipse2(const CvArr* points)
Python: cv.FitEllipse2(points) → Box2D 
```

参数：points——输入二维点集，存储在：

```
std::vector<> or Mat (C++ interface)
CvSeq* or CvMat* (C interface)
Nx2 numpy array (Python interface) 
```

该函数计算最适合（在最小二乘意义上）一组 2D 点的椭圆。它返回内接椭圆的旋转矩形。使用算法 [Fitzgibbon95]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T00:30:57.223

我使用 KMEAN 算法对具有相似方向和大小的运动矢量进行分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:48:43.457

在示例图像中，为什么要将具有相同方向且彼此靠近的向量分组？
请记住，在 2D 中，图像中指向行进方向的向量都有不同的角度/方向。

我建议您将或多或少指向相同图像点的所有向量组合在一起。

# ruby-on-rails - Rails 迁移“UTF-8 中的无效字节序列”

> ID：10907259
> 
> 赞同：0
> 
> 时间：2012-06-06T01:51:48.563
> 
> 标签：ruby-on-rails, utf-8, rake

我正在尝试运行迁移，但每当我尝试时，我都会收到错误“UTF-8 中的无效字节序列”。这是迁移：

```
class ChangeSchoolEmailToApplicationEmail < ActiveRecord::Migration
  def self.up
    rename_column :users, :school_email, :application_email
  end

  def self.down
    rename_column :users, :application_email, :school_email
  end
end 
```

如果我只运行，`rake db:migrate`我会收到我需要使用 bundle exec 的消息。所以我最后使用的命令`bundle exec rake db:migrate`会产生以下错误：

```
C:\Rails\qsn>bundle exec rake db:migrate
==  ChangeSchoolEmailToApplicationEmail: migrating ============================
-- rename_column(:users, :school_email, :application_email)
rake aborted!
An error has occurred, this and all later migrations canceled:

invalid byte sequence in UTF-8

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

帮助表示赞赏！

**编辑：** 输出`--trace`看起来像：

```
C:\Rails\qsn>bundle exec rake db:migrate --trace
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:migrate
==  ChangeSchoolEmailToApplicationEmail: migrating ============================
-- rename_column(:users, :school_email, :application_email)
rake aborted!
An error has occurred, this and all later migrations canceled:

invalid byte sequence in UTF-8
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/database.rb:48:in `gsub'
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/database.rb:48:in `quote'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:114:in `quote_string'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/abstract/quoting.rb:21:in `quote'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite3_adapter.rb:45:in `quote'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:372:in `block (2 levels) in copy_table_con
tents'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:372:in `map'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:372:in `block in copy_table_contents'
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/database.rb:142:in `block (2 levels) in execute'
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/statement.rb:110:in `block in each'
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/statement.rb:107:in `loop'
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/statement.rb:107:in `each'
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/database.rb:140:in `block in execute'
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/database.rb:95:in `prepare'
C:/Ruby/lib/ruby/gems/1.9.1/gems/sqlite3-1.3.4-x86-mingw32/lib/sqlite3/database.rb:134:in `execute'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:370:in `copy_table_contents'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:334:in `copy_table'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:311:in `move_table'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:304:in `block in alter_table'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/abstract/database_statements.rb:139:in `transaction'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:303:in `alter_table'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/sqlite_adapter.rb:275:in `rename_column'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:385:in `block in method_missing'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:361:in `block in say_with_time'
C:/Ruby/lib/ruby/1.9.1/benchmark.rb:295:in `measure'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:361:in `say_with_time'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:381:in `method_missing'
C:/Rails/qsn/db/migrate/20120606013213_change_school_email_to_application_email.rb:3:in `up'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:314:in `block in migrate'
C:/Ruby/lib/ruby/1.9.1/benchmark.rb:295:in `measure'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:314:in `migrate'
C:in `migrate'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:539:in `block (2 levels) in migrate'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:613:in `call'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:613:in `block in ddl_transaction'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/connection_adapters/abstract/database_statements.rb:139:in `transaction'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/transactions.rb:207:in `transaction'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:613:in `ddl_transaction'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:538:in `block in migrate'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:525:in `each'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:525:in `migrate'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:435:in `up'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/migration.rb:417:in `migrate'
C:/Ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.0.9/lib/active_record/railties/databases.rake:142:in `block (2 levels) in <top (required)>'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:205:in `call'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:205:in `block in execute'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:200:in `each'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:200:in `execute'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
C:/Ruby/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/task.rb:144:in `invoke'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:112:in `invoke_task'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `block (2 levels) in top_level'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `each'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:90:in `block in top_level'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:84:in `top_level'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:62:in `block in run'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:59:in `run'
C:/Ruby/lib/ruby/gems/1.9.1/gems/rake-0.9.2/bin/rake:32:in `<top (required)>'
C:/Ruby/lib/ruby/gems/1.9.1/bin/rake:19:in `load'
C:/Ruby/lib/ruby/gems/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate 
```

**编辑：**

的类型`school_email`是字符串。

另外，我刚刚想到 - 错误是否可能是数据库问题的结果？例如，它可能以某种方式部分损坏？数据库类型为 SQLite3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:14:05.657

在 SQLite 中重命名列时（不支持重命名），需要重新创建表，并且需要重新插入数据。显然，它当前拥有的某些数据不是 UTF-8 编码的。最可能的原因是数据损坏，尽管我不确定 UTF-8 规则是否存在允许此类数据在奇怪情况下传入的例外情况。

您需要在执行迁移之前修复数据，因此请尝试搜索无效数据并修复：

```
User.all.each do |user|
  email = user.school_email
  email.force_encoding "utf-8"
  unless email.valid_encoding?
    puts "Invalid email: #{email} in user id: #{user.id}" 
    email.encode!("utf-8", "utf-8", :invalid => :replace)
    user.update_attribute(:school_email, email)
  end
end 
```

无效数据完全有可能不在电子邮件字段中，在这种情况下，您需要对每个字符串字段执行类似的操作以确定罪魁祸首

# algorithm - List.mem 的复杂性

> ID：10907261
> 
> 赞同：2
> 
> 时间：2012-06-06T01:52:11.410
> 
> 标签：algorithm, list, ocaml, complexity-theory

我有一个处理列表的算法，我想表达它的复杂性。

在算法中，我有`List.mem a l`一个循环，我不确定如何考虑 的复杂性`List.mem`，它必须是`O(List.length(l))`，还是`Ocaml`可以在里面做一些魔术来比`O(List.length(l))`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T01:56:28.467

没有魔法，这是实现（OCaml 3.12.0）：

```
let rec mem x = function
    [] -> false
  | a::l -> compare a x = 0 || mem x l 
```

如果您有 OCaml 源代码分发，则它位于名为`stdlib/list.ml`（第 135 行）的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T01:56:16.610

不，对于链表，理论上检查成员资格的最佳方法是 O(n)。您可以通过牺牲空间来改进这一点，即使用哈希表代替，或者如果您关心顺序，则在此列表旁边有一个哈希表。

# c - 当我使用浮点数时，如果我限制范围会丢失精度吗？

> ID：10907266
> 
> 赞同：1
> 
> 时间：2012-06-06T01:53:26.083
> 
> 标签：c, floating-point

我尝试阅读有关浮点实现的 IEEE 标准，但它对我来说非常先进，而且我不是以编程为生。

这是我想知道的。

假设我有一个介于 0 和 N 之间的浮点变量，我会在需要时将其放大，但中间计算将在这个非标准化值中完成。

从逻辑上讲，范围`[0.0, 1.0]`就足够了。但是如果我将我的数字限制在 0 和 1 之间，我会以某种方式失去精度吗？如果我使用`[0, 10.0]`,会得到什么`[0, 1000000.0]`吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:02:17.727

您的想法是一个好主意，但您不会保存任何东西，因为从某种意义上说，浮点数旨在为您执行此操作。

在内部，浮点数有两部分，称为尾数和指数。尾数等于您的范围，指数是使其达到“真实”值所需的缩放比例。

您给出的任何数字都被归一化为 [1-9.999...] 之类的范围加上 10 乘数的幂。因此您可以获得几乎所有值的尾数精度（唯一的例外是当您达到指数的极端时 - 这些被称为“非规范化数字”（或“次规范”），但非常小（接近于零）或大，通常不需要担心）。

因此，无论您输入 1.23 还是 12.3 或 123，它都会在内部存储为 1.23（尾数）加上一个因子（1、10 或 100，指数）。

实际上，这并不完全正确，因为它使用 2 的幂（二进制）而不是 10 的幂（十进制）（参见来自 Sixlettervariable 的评论），但这是相同的一般概念。

# google-apps-script - Google Script：有条件地将行从一个电子表格复制到另一个电子表格

> ID：10907267
> 
> 赞同：3
> 
> 时间：2012-06-06T01:53:45.723
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我找到了基本解决方案[https://stackoverflow.com/a/4809413/1438650](https://stackoverflow.com/a/4809413/1438650)，但它缺乏我项目的条件和非连续方面。我需要该副本基于 Col G 的值，然后将 A、B 和 H:S 列复制到另一个电子表格。

```
function movePros() {
  var date = Utilities.formatDate(new Date, "CST", "yyyy-MM-dd'T'HH:mm:ss'Z'")            //"MM/dd/yyyy"
  var source = SpreadsheetApp.getActiveSpreadsheet();
  var target = SpreadsheetApp.openById("0ApBdJlRcFy9XdGx0aXRabWlweGxyY3czZzZIemVla3c");
  var lastRow = source.getLastRow();
  var sheet = source.getSheetByName("City");
 var data = sheet.getDataRange.getValues();  //This makes an array, right?
   Browser.msgBox(data.slice(1))
  // I've tried, but still don't know how get at the individual cell values so that I can both check them and write them in the correct order which is different than the source
  var prospect=[DateCalled,PriceSurvey,VolSurvey,Company,Phone,Contact,OdmNotes,Address,City,State,Zip,County,Sic,"","","","","","","","=IFERROR(IF(INDIRECT(\"W\"&ROW())<>\"\",TEXT(INDIRECT(\"W\"&ROW()),\"yyyyww\")+0,IF(INDIRECT(\"T\"&ROW())<>\"\",TEXT(INDIRECT(\"T\"&ROW()),\"yyyyww\")+0,IF(INDIRECT(\"A\"&ROW())<>\"\",TEXT(INDIRECT(\"A\"&ROW()),\"yyyyww\")+1,\"\"))),\"\")","U","","","","","",ODM,"",""];  
// var prospect=[data()[0]..... ugh, I don/'t know....  
 /*    
var ODM = sheet.getRange("A"+i).getValues();
var DateCalled = sheet.getRange("B"+i).getValues();
var PriceSurvey = sheet.getRange("H"+i).getValues();
var VolSurvey = sheet.getRange("I"+i).getValues();
var Company = sheet.getRange("J"+i).getValues();
var Phone = sheet.getRange("K1"+i).getValues();
var Contact = sheet.getRange("L"+i).getValues();
var OdmNotes = sheet.getRange("M"+i).getValues();
var Address = sheet.getRange("N"+i).getValues();
var City = sheet.getRange("O"+i).getValues();
var State = sheet.getRange("P"+i).getValues();
var Zip = sheet.getRange("Q"+i).getValues();
var County = sheet.getRange("R"+i).getValues();
var Sic = sheet.getRange("S"+i).getValues(); 
 */ 

while (i <= lastRow) {
  var i = 2 
  if (sheet.getRange("G"+i).getValue()==1 && sheet.getRange("U"+i).getValue()=="") {  //cheking 

target.appendRow(prospect); 

source.getRange("U"+i).setValue(date);
i++;

} else {
   i++;
  }     
  } 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T16:41:12.723

这是一个脚本“提案”，您可以完成它以使其工作。'if' 语句需要实现，如果不知道您需要什么，我就无法做到。在那里使用数组的一般想法，我相信你会设法让它工作。

```
function movePros() {
  var date = Utilities.formatDate(new Date, "CST", "yyyy-MM-dd'T'HH:mm:ss'Z'")            //"MM/dd/yyyy"
  var source = SpreadsheetApp.getActiveSpreadsheet();
  var target = SpreadsheetApp.openById("0ApBdJlRcFy9XdGx0aXRabWlweGxyY3czZzZIemVla3c");
  var lastRow = source.getLastRow();
  var sheet = source.getSheetByName("City");
  var data = sheet.getDataRange().getValues();
  var prospect=['ODM','DateCalled','PriceSurvey','VolSurvey','Company','Phone','Contact','OdmNotes','Address','City,State','Zip','County','Sic']
  var line = new Array();
  var targetArray= new Array();
  targetArray.push(prospect);// create a header on first row of target
  for(i=0;i<data.length;++i){ // iterate rows
  for (j=0;j<data[i].length;++j){ // iterate columns
  if (place here your conditions if data must be copied or not, you can have many conditions alltogether){line.push(data[i][j]}// if cell meets condition, add to destination row
  }
  targetArray.push(line)// add row to destination (you could need to add a condition here too)
  }
target.getRange(1,1,targetArray.length,targetArray[0].length).setValues(targetArray);
} 
```

备注：data[i] 是源工作表的一行，data[i][j] 是该行中的一个单元格，从那里您可以对任何行中的任何单元格进行寻址。通常在 for 循环中执行此操作，但您可以在不循环每一行来获取所需数据的情况下执行此操作。

编辑#1：您复制非连续数据的条件可能是这样的：

```
 if (j==5||j==7||j==9){line.push(data[i][j])} 
```

抱歉有点长。编辑＃2：查看您的目标文档我注意到您有多个工作表，您还应该告诉脚本它应该在哪个工作表上写入数据。这是一个如何做的例子：

```
 var ss = SpreadsheetApp.openById("your spreadsheet ID");// this is already done in your script
  SpreadsheetApp.setActiveSpreadsheet(ss);
  var sh = SpreadsheetApp.setActiveSheet(ss.getSheets()[0]);// select first sheet in target spreadsheet 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:47:39.107

> 块引用

这是我的编码，我想这会对你有所帮助。

```
function GetData() {
  var source = SpreadsheetApp.getActiveSpreadsheet();
  var target = SpreadsheetApp.openById("0Aj7gIt4f65xidEN1R1lxZksxeFRBYkdHWmVtdE5aOGc");
  var lastRow = source.getLastRow();
  var source_sheet = source.getSheetByName("Source");
  var target_sheet = target.getSheetByName("Target");

  var source_range = source_sheet.getDataRange();
  var target_range = target_sheet.getDataRange();

  var i = 2;
  while (i <= lastRow) {
  if (source_sheet.getRange("D"+i).getValue() == "Over Due" ) {
    var ItemNo = source_sheet.getRange("A"+i).getValue();
    var UserName = source_sheet.getRange("B"+i).getValue();
    var Location = source_sheet.getRange("C"+i).getValue();
    var Status = source_sheet.getRange("D"+i).getValue();
    var Comments = source_sheet.getRange("E"+i).getValue();
    var data = [ItemNo,UserName,Location,Status,Comments];
    target_sheet.appendRow(data);
    i++;
    } else {
      i++;
      }
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:49:51.073

这里有一些提示：

*   获取一个包含整行的范围，然后调用`getValues()`一次获取所有值，而不是像现在这样一次获取一个值。
*   使用您要测试的条件，围绕您的调用包装一条`if()`语句。`appendRow()`
*   有你没关系`appendRow()`，因为没有方法可以一次追加多行。

# python - 使用 Firefox 作为我的 Python 应用程序的 GUI

> ID：10907269
> 
> 赞同：-1
> 
> 时间：2012-06-06T01:54:22.337
> 
> 标签：python, firefox, rtsp

我是一名 python 开发人员，几天来我一直在尝试使用套接字制作基于 RTSP 的应用程序。我不想使用网络服务器，我想创建自己的基于 RTSP 的服务器。

我的问题是，我想让我的 python 应用程序与网络浏览器对话：我的 python 应用程序必须在某个套接字上接收一个电影流并将这个流传递给该浏览器的电影播放器​​。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:06:06.340

If you want your Python application to talk to a web browser, your Python application will either have to act as a webserver or run under the control of another webserver (such as Apache). The first option is certainly the most convenient, and many Python web frameworks ([Django](http://django.org/), [Bottle](http://bottlepy.org/), [CherryPy](http://cherrypy.org/), etc) include an embedded webserver that makes this sort of thing very easy.

# c++ - noexcept 指定函数不抛出的条件

> ID：10907271
> 
> 赞同：0
> 
> 时间：2012-06-06T01:54:24.287
> 
> 标签：c++, c++11, noexcept, gcc4.7

我在处理 noexcept 时遇到了一些麻烦。

```
template <int SIZE>
int pop(int idx) noexcept(noexcept(SIZE > 0)) // this is what I dont understand
{
  if (idx <= 0)
    throw std::out_of_range("My array doesnt go that high");
  return idx;
} 
```

这只是一个简单的函数，但你看它是如何只在 idx <= 0 时抛出异常的，我不明白。所以在我的规范中，noexcept(idx > 0)，我试图告诉编译器这个函数只有在 idx > 0 时才抛出异常。我这样做对吗？

任何帮助表示赞赏，我希望我解释正确。只是一些简单的解释会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T01:56:34.933

实际上，`noexept` *规范*需要一个*常量表达式*，而不是运行时表达式。您已将`noexcept` *规范*与`noexcept` *操作员*一起使用。`noexcept(idx >0)`返回`true`比较两个整数不会抛出，并且您将其`true`用作`noexcept` *规范*的参数，告诉编译器您的函数永远不会抛出。宣言

```
int pop(int idx) noexcept(noexcept(idx > 0)) 
```

表示这个函数只要不抛出*就*`idx > 0`不会抛出，对于.*`int`*

 ***更新：**现在您已经更改了问题中的代码，使其`idx`成为*非类型模板参数*，但同样的推理也适用。比较`int`s**永远不会抛出**。

您似乎试图做的事情无法在*C++*中完成。也就是说，根据其运行时参数指定函数是否抛出。*

# linux - 如何实时监控每个文件的 Linux 文件访问

> ID：10907277
> 
> 赞同：1
> 
> 时间：2012-06-06T01:55:20.613
> 
> 标签：linux, file, monitoring

我正在尝试识别哪些文件是实时访问的，并检查它的读写速度。类似 lsof 的东西，显示每个文件的实时文件访问速度（每个文件的 iostat）。（在 Windows 中，这是资源监视器的磁盘表。）

你有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T18:57:14.223

你应该看看 LoggedFS。它提供了非常好的输出实时处理哪些文件。

[http://loggedfs.sourceforge.net/](http://loggedfs.sourceforge.net/)

它应该在您的发行版的包管理器（apt-get install loggedfs）中可用，并且无需配置即可轻松调用：

```
loggedfs -f /home 
```

# objective-c - 启用 ARC 选项未修复内存泄漏

> ID：10907278
> 
> 赞同：0
> 
> 时间：2012-06-06T01:55:22.657
> 
> 标签：objective-c, automatic-ref-counting, xcode4.3

我的项目确实支持 ARC：

![在此处输入图像描述](../Images/e8efd8a29b5c262e267d3a59dd75e9b5.png)

但是当我运行 Xcode Analyzer、Product/Analyze 时，我仍然会出现内存泄漏，例如：

```
Potential leak of an object allocated on line xx and stored into 'xxx'. 
```

我的意思是，ARC 不是应该解决糟糕的发布问题吗？还是我必须自己添加发布/自动发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:18:25.990

确保您的文件在链接器标志中没有 -fno-objc-arc。这将它们排除在 ARC 之外。一个简单的检查方法是尝试在你的代码中释放一个对象，如果你通过释放调用得到一条红线，那么文件正在使用 ARC，xcode 不会让你在启用了 ARC 的文件中进行任何释放调用。

# asp.net - Facebox弹出消息系统asp.net

> ID：10907279
> 
> 赞同：3
> 
> 时间：2012-06-06T01:55:40.207
> 
> 标签：asp.net, facebox, private-messaging

我正在构建一个网站，用户可以在该网站上通过 Web 应用程序通过私人消息系统相互联系。而不是被发送到不同的网页，我想这样做，所以如果你点击发送消息，一个弹出窗口（就像在 facebook 上发送新消息的样子一样）出现，你可以发送你的消息而不会被重定向到一个新的页。单击发送后，弹出窗口消失。

我已经编写了 NewMessage.aspx 页面，但我对如何实现弹出（facebox？）功能感到很困惑。我在 facebox 上找到的很多帖子主要是关于 asp.net 按钮回发如何不起作用所以我想知道 facebox 是否是实现此功能的最佳方式？如果是这样，任何人都可以解释如何实现facebox的基础知识吗？它是 ASP.net 附带的东西还是我需要下载才能使用的东西？我对 jQuery 或 Ajax 不是很熟悉，所以如果我需要这些东西来实现它，也许一些关于如何将它们与 asp.net webforms 一起使用的技巧也会有所帮助。

谢谢

# cocoa - iPhone：使用 NSDateFormatter 将字符串解析为 NSDate

> ID：10907283
> 
> 赞同：-1
> 
> 时间：2012-06-06T01:55:59.567
> 
> 标签：cocoa, nsdate, nsdateformatter

> **可能重复：**
> [将 NSString 转换为 NSDate（然后再返回）](https://stackoverflow.com/questions/3917250/converting-nsstring-to-nsdate-and-back-again)

我有一个日期和时间的 NSString 表示形式：`6/06/2012 5:55:15 PM`

它来自外部来源，我无法编辑它。如果可能的话，我希望使用 NSDateFormatter 将其转换为 NSDate 对象。我尝试使用下面的代码，但我无处可去，结果日期对象为空，有人知道吗？我猜我会留下一些重要的东西来处理 AM/PM。

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd/MM/yyyy HH:mm:ss"];
NSDate *currentDate = [formatter dateFromString:job.jobDate];

NSLog(@"currentDate = %@",currentDate); // is null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:06:44.810

您的日期字符串中有一个“PM”。它的格式说明符是`a`.

```
[formatter setDateFormat:@"dd/MM/yyyy HH:mm:ss a"]; 
```

# java - 尝试传递 InputStream 时出现 StreamCorruptedException

> ID：10907294
> 
> 赞同：1
> 
> 时间：2012-06-06T01:57:23.943
> 
> 标签：java, multithreading, sockets, serialization

尝试将套接字`InputStream`变量传递给线程以写入对象时出错。我有客户端和两个线程：第一个读取文本输入，第二个读取序列化对象。它们同时运行，因此我设置了**volatile** `static InputStream socketIs;`。是对的吗？如何解决？

```
java.io.StreamCorruptedException: invalid stream header: 57656C63
    at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
    at java.io.ObjectInputStream.<init>(Unknown Source)
    at com.client.ClientThreadInObj.<init>(ClientThreadInObj.java:25)
    at com.client.Client.main(Client.java:77) 
```

* * *

```
 public class Client { 
        static ClientThreadIn threadIn;
        static ClientThreadInObj threadInObj;
        volatile static InputStream socketIs; 
        volatile static PrintStream ps;
        volatile static BufferedReader in; 
        static PrintWriter out;
        static Socket s;

    public static void main(String[] args){
             in = null; 
             out = null; 
             socketIs =null;
             threadIn = null;
             threadInObj = null;
             try{ 
                socketIs = s.getInputStream();
                in = new BufferedReader(new InputStreamReader(socketIs)); 
                out = new PrintWriter(new OutputStreamWriter(s.getOutputStream()));
                JPanelOne gui= startGUI();
                gui.setOutputPrintWriter(out);
                OutputStream outStream = gui.getRefToOutputStream(); 
                ps =  new PrintStream(outStream); 

                threadIn = new ClientThreadIn(in, ps, gui);
                threadInObj = new ClientThreadInObj(socketIs, ps, gui); // ERROR

                threadIn.start();
                threadInObj.start();
            catch(IOException ioe) 
        { ..}
...
    } 
```

* * *

服务器：

```
...
Timer timer = new Timer();
                timer.schedule(new TimerTask() {
                    @Override
                    public void run() {
                        try {
                            FlattenLot fL = new FlattenLot(clientThread.m_clientSocket.getOutputStream(), currentLot);
                            fL.sendObj();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                }, 100);
... 
```

`to out.writeObject(lot);` 调试在尝试包串行时在服务器端显示错误；

```
import java.io.ObjectOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.*;

import com.server.Lot;

public class FlattenLot {

    OutputStream oStream;
    Lot lot;

    public FlattenLot(OutputStream os, Lot l){
        lot = l;
        oStream = os;
    }

    public void sendObj(){
        ObjectOutputStream out = null;
        try {
            out = new ObjectOutputStream(oStream);
            out.writeObject(lot); // ERROR: java.io.NotSerializableException
            out.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

} 
```

* * *

很多：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import java.util.Date;
import java.util.Calendar;

public class Lot implements Serializable{
    private static final long serialVersionUID = 1L;
    private  String NAME;
    public synchronized String getName(){return NAME;}
} 
```

* * *

很多工具`Serializable`。为什么被抛出`java.io.NotSerializableException`？我从第一个使用 BufferReader(Input stream) 获取数据的线程中成功获得了 Lot 对象。第二个线程无法读取对象可能是因为第一个线程是红色的。尽管`InputStream is = socket.getInputStream()`变量定义为 volatile 并且必须确保线程安全协作，但似乎两个线程竞争套接字输入流......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:59:50.917

在套接字的生命周期中使用单个 ObjectInputStream 和 ObjectOutputStream。

# jquery - jQuery.tmpl 在 $(document).ready 函数中不起作用

> ID：10907295
> 
> 赞同：0
> 
> 时间：2012-06-06T01:57:29.363
> 
> 标签：jquery, jquery-templates

第一次做jQuery模板。

`.tmpl()`在函数内部使用时`document.ready()`不起作用。下面的示例代码：

```
 $.ajax({
    type: "GET",
    url: "http://localhost/MVCTest1/api/Plan/?ClientId==" + client.ClientID,
    contentType: "application/json;charset=utf-8",
    success: function (plans) {
        $("#ContactPlanTemplate").tmpl(plans).appendTo("ContactPlanBlock");
    },
    error: function (xhr, status, error) {
        alert(error.toString());
    }
}); 
```

有任何想法吗？

错误：

> Microsoft JScript 运行时错误：对象不支持属性或方法“tmpl”

ContactPlanTemplate 是脚本标签（模板）。ContactPlanBlock 是一个（空的）`<div>`。

# iphone - 委托和协议无法正常工作

> ID：10907296
> 
> 赞同：0
> 
> 时间：2012-06-06T01:58:19.923
> 
> 标签：iphone, ios, uiviewcontroller, delegates, protocols

我正在尝试将数据从一个 TabBarViewController 传递回我的 MasterViewController 但是当试图将数据传递回 MasterViewController 时，我的协议/委托的方法永远不会被访问。

这就是我所做的 - 我有一个 TabBarViewcontroller 和一个 MasterViewController，TabBarController 作为一个子视图添加到 MasterViewController ...我要做的是然后将另一个子视图加载到 MasterViewController 上，我打算在一个 tabbarbutton 时做在 tabBarViewController 中选择我调用我的协议/委托方法。为此，我使用以下代码。（我希望到目前为止这是有道理的）

TabBarViewController.h

```
@class MasterViewController;

@protocol LoadActionView <NSObject>
@required
- (void) loadViewsAction;
@end

@interface TabBarViewController : UIViewController <UITabBarDelegate> {

    __weak id <LoadActionView> delegate;

//..
}

@property (weak, nonatomic) id delegate;

//.. 
```

TabBarViewController.m

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
    switch (item.tag) {
        case 0:
        {
             NSLog(@"item 1 selected");
            [[self delegate] loadViewsAction]; //the thread defiantly makes it here as I have debugged to this point
        }
//.. 
```

然后，MasterViewController.h

```
 #import <UIKit/UIKit.h>
    #import "TabBarViewController.h"

    @interface MasterViewController : UIViewController <UINavigationControllerDelegate, LoadActionView> {

TabBarViewController *tbVC;

}

@property (nonatomic, strong) TabBarViewController *tbVC;
    //.. 
```

主视图控制器.m

```
#import "TabBarViewController.h"

@synthesize tbVC;
    //..

- (void) viewDidLoad {
//..

tbVC = [[TabBarViewController alloc] initWithNibName:@"TabBarViewController" bundle:[NSBundle mainBundle]];
    UIView *tbView = [[UIView alloc] initWithFrame:CGRectMake(0.0, 367.0, 320.0, 49.0)];
    [tbView addSubview:tbVC.view];
    [otherNav.view addSubview:tbView];

}

    - (void) loadViewsAction
    {
        NSLog(@"HITME!"); //threads not making it here.
    } 
```

与我通常在这里做的唯一不同的是，这个 TabBarViewController 被添加为子视图。所以如果这把事情搞砸了，我会很伤心。但如果是这样，我不知道如何修复......

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:30:40.863

您可以通过添加以下内容来调试问题：

```
NSAssert (nil != [self delegate]); 
```

就在调用`loadViewsAction`. 该断言将失败，因为您尚未分配 TabBarController 的委托。创建 TabVarController 后，执行：

```
tbVS.delegate = self; 
```

然后，您将拥有一个用于 loadViewsAction 的委托。

# java - 我的 jMonkey 稍微修改过的教程不知何故有一个 NULL 指针问题？

> ID：10907300
> 
> 赞同：0
> 
> 时间：2012-06-06T01:59:06.143
> 
> 标签：java, java-3d, jmonkeyengine

好的，这是我的代码：

```
package test;

import java.util.ArrayList;
import java.util.Vector;

import com.jme3.app.SimpleApplication;
import com.jme3.system.AppSettings;

import com.jme3.material.Material;
import com.jme3.math.Vector3f;
import com.jme3.scene.Geometry;
import com.jme3.scene.shape.Box;
import com.jme3.math.ColorRGBA;
import com.jme3.scene.Node;

public class test extends SimpleApplication {

    public static void main(String[] args){

        AppSettings settings = new AppSettings(false);
        settings.setResolution(640,480);
        test app = new test();

        app.setSettings(settings);
        app.start();

    }

    @Override
    public void simpleInitApp() {

        ArrayList<Geometry> geos = new ArrayList<Geometry>();

        for ( int count = 0; count <= 5; count++ ) {

            double x = 10;
            double y = 10;
            double z = 10;

            Box      box = new Box( new Vector3f(count*10,count*10,count*10), (int)x, (int)y, (int)z );
            Geometry geo = new Geometry( "Box", box );
            Material mat = new Material( assetManager, "Common/MatDefs/Misc/Unshaded.j3md");

            mat.setColor( "Color", ColorRGBA.Blue );
            geo.setMaterial(mat);

            geos.add( geo );

        }

        /** Create a pivot node at (0,0,0) and attach it to the root node */
        Node pivot = new Node("pivot");
        rootNode.attachChild(pivot); // put this node in the scene

        /** Attach the two boxes to the *pivot* node. */
        for( Geometry g : geos ) {
            pivot.attachChild( g );
        }

        /** Rotate the pivot node: Note that both boxes have rotated! */
        pivot.rotate(.4f,.4f,0f);

    }

} 
```

它在 app.start() 命令上出错，指出它是一个 NULL 指针异常。当它之前的行没有错误时，app如何成为空指针？我不知道出了什么问题。

历史：我需要能够为我的简单盒子工作创建 3D 渲染。我需要从另一个过程加载模型元素，然后循环浏览它们并绘制它们。我使用 jMonkey 是因为他们最初想要 Xj3D，但我找不到如何让它运行。至少这我可以让教程工作，但是当我修改它以循环并创建几个框时，我得到了空指针问题。

提前致谢！JH

编辑：

这是控制台输出：

```
Exception in thread "main" java.lang.NullPointerException
    at com.jme3.system.JmeDesktopSystem.showSettingsDialog(JmeDesktopSystem.java:73)
    at com.jme3.system.JmeSystem.showSettingsDialog(JmeSystem.java:108)
    at com.jme3.app.SimpleApplication.start(SimpleApplication.java:127)
    at test.test.main(test.java:34) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:42:24.000

好的，正在改变

```
AppSettings settings = new AppSettings(false); 
```

至

```
AppSettings settings = new AppSettings(true); 
```

解决了我的问题。现在要弄清楚为什么 false 不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T09:28:54.020

False 不会加载默认设置，这意味着您应该手动设置它们。这可能是NPE的原因。要隐藏设置对话框，请使用

```
app.setShowSettings(false); 
```

# javascript - 在 Internet Explorer 中查看 ajax 请求？

> ID：10907302
> 
> 赞同：7
> 
> 时间：2012-06-06T01:59:21.810
> 
> 标签：javascript, ajax, internet-explorer

有没有办法在 Internet Explorer 中查看正在进行的 ajax 请求，例如 google chrome 中的 firebug 和 firefox 允许您查看？

出于某种原因，我的 IE 卡在 ajax 请求上，它启动了请求，但我输入的加载消息永远不会消失，让我不知道发生了什么，请求是否失败，如果失败，为什么。相同的请求适用于 FF 和 chrome。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T02:10:39.187

Press `F12` if you are using IE8 or up or install firebug for IE.

or install

[Firebug Lite for IE](http://getfirebug.com/firebuglite)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T02:04:38.537

If you're using IE9, you should definitely be using the Developer tools. If you're using an earlier version of IE, try the [Firebug Lite](http://getfirebug.com/firebuglite) bookmarklet

You wont see network requests, but it does give you access to the console.log()

> javascript:(function(F,i,r,e,b,u,g,L,I,T,E){if(F.getElementById(b))return;E=F[i+'NS']&&F.documentElement.namespaceURI;E=E?Fi+'NS':Fi;Er;Er;Er;(Fe[0]||Fe[0]).appendChild(E);E=new%20Image;Er;})(document,'createElement','setAttribute','getElementsByTagName','FirebugLite','4','firebug-lite.js','releases/lite/latest/skin/xp/sprite.png','https://getfirebug.com/','#startOpened');

Just paste that string into the address bar in IE after you've loaded your page.

# spring - 如何在 1 个 RequestMapping 上使用 2 个控制器

> ID：10907304
> 
> 赞同：0
> 
> 时间：2012-06-06T01:59:27.257
> 
> 标签：spring, model-view-controller

```
@Controller
@RequestMapping("/person/process")
public class A {
    //.....
}

@Controller
@RequestMapping("/person/process")
public class B {
    //.....
} 
```

我可以这样做吗？因为我的控制器中有太多方法，我想把它们分开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:45:59.190

这不是您的 Web 应用程序的良好设计。*您需要通过在/person/process/b*之后添加一个路径来更改两个控制器的 url 映射，或者您需要结合两个类并且可以根据需要将两个单独的方法用作两个不同的请求。

另一件事是您可以通过在控制器类顶部的*@RequestMapping注释中指定**RequestMethod*参数来将它们分开。

 *但是您在控制器上完成相同请求映射的方式将无法成功运行您的应用程序，因为 Spring Framework 会为不明确的映射抛出异常。

希望这对您有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:44:42.770

这是不可能的。您必须能够区分这两种映射。例如，可以将一种方法配置为使用 json 和另一种 xml，或者使用请求参数的变体*

# c - 如何调用 WM_SETREDRAW？

> ID：10907307
> 
> 赞同：3
> 
> 时间：2012-06-06T02:00:16.577
> 
> 标签：c, winapi

当我发送`WM_SETREDRAW`以禁用窗口重绘时，完成后如何“恢复”以前的状态？

发送此消息的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T02:05:19.250

您无法*恢复以前的状态*，因为无法访问当前状态。没有`WM_GETREDRAW`。完成后，这次您`WM_SETREDRAW`再次发送`TRUE`作为参数，如果其他人`FALSE`在外部范围上设置了重绘，那么好吧..这对他们不利..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-04T09:28:18.073

之前的答案已经过时了。现在可以检查*调用`DefWindowProc`*. （请注意，这可能*不*包括您感兴趣的常见控制。）

[来自 MSDN](https://docs.microsoft.com/en-us/windows/win32/gdi/wm-setredraw)：

> **Windows 10 及更高版本；Windows Server 2016 及更高版本。**系统在窗口过程将消息传递到`SysSetRedraw`的窗口上设置一个名为的属性。您可以使用该函数在可用时获取属性值。禁用重绘时返回非零值。启用重绘或 window 属性不存在时将返回零。`WM_SETREDRAW``DefWindowProc``GetProp``GetProp``GetProp`

# java - Java中的多个类和main方法，以及包、命名空间

> ID：10907316
> 
> 赞同：3
> 
> 时间：2012-06-06T02:01:52.250
> 
> 标签：java, namespaces, packages

在 Eclipse 中，.java 文件名必须与类名相同。在任何情况下都是真的还是仅适用于 Eclipse？对于 main 方法，它看起来像 C 中的 main 函数，但问题是，如果我有两个类都有自己的 main 方法并且可以将它们链接在一起怎么办？另外，我可以在一个 .java 文件中编写两个类吗？我在Windows中使用Eclipse，它与Linux版本相同吗？

对于包，我的书告诉我包是一个目录。所以要指定一个文件所属的包，我只需要说“package my_pack”吗？我是否需要创建一个类似 /src/my_pack 的目录并将我的 .java 文件放入其中？

三、什么是命名空间？它与包和类有什么关系？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T02:16:22.070

> 在 Eclipse 中，.java 文件名必须与类名相同。在任何情况下都是真的还是仅适用于 Eclipse？

java 文件必须与包含的公共类同名。

> 对于 main 方法，它看起来像 C 中的 main 函数，但问题是，如果我有两个类都有自己的 main 方法并且可以将它们链接在一起怎么办？

是的，您可以在同一个项目中拥有两个具有`static void main(String[] args) {...}`方法的类，但只有 1 个是您项目的主类，您应该通过在清单文件中声明它来决定哪个是主类。

阅读有关此的更多信息：

*   [单个 Java 文件中的多个类，每个类都有一个 main 方法 - 意外行为？](https://stackoverflow.com/q/5762897/1065197)
*   [从命令行指定要在 jar 文件中运行的 Main 类](http://samindaw.wordpress.com/2008/11/04/specifying-the-main-class-to-run-in-a-jar-file-from-command-line/)
*   [如何在 NetBeans 项目生成的 jar 中的清单文件中设置 Main 类](https://stackoverflow.com/a/2851864/1065197)

> 另外，我可以在一个 .java 文件中编写两个类吗？

可以，只要文件中只有一个类并且该类的名称与文件名相同即可：

Class.java 文件

```
package edu.home.bean;

public class TheClass {
    class SomeClass {
    }
}

class AnotherClass {
} 
```

编辑：

当你没有定义对一个类的公共访问时，它可能拥有`default`或`private`访问，这取决于声明的位置。在上面的示例中，`SomeClass`将具有`private`访问权限，并且只能通过 访问`TheClass`，而`AnotherClass`可以从同一包中的任何类访问。这意味着，包中的类不同于`edu.home.bean`can't access `AnotherClass`。

```
package edu.home.control;

public class ControlClass {
    //this line compiles fine
    private TheClass x;
    //compilation error, it can't access for being in a different package
    private AnotherClass y;
    //compilation error, it can't access because its scope works only in TheClass
    private SomeClass z;
} 
```

> 我在Windows中使用Eclipse，它与Linux版本相同吗？

Java 的一个好处是代码是平台独立的（不像 C 或 C++），因此您可以将代码从 Windows 移植到 Linux，反之亦然，只要在您的操作系统中安装了 Java 虚拟机 (JVM)想要运行/开发 Java 项目。

> 对于包，我的书告诉我包是一个目录。所以要指定一个文件所属的包，我只需要说“package my_pack”吗？

是的，书是对的。当您有一个 Java 项目（如 MyFirstJavaProject）时，您可以在该文件夹中设置一个源文件夹和包。这些包将是您的源文件夹的子文件夹。一个例子：

Eclipse中的项目结构：

```
+ MyFirstJavaProject
  + src
    + edu.home.bean
    + edu.home.control
    + edu.home.gui
    + another.package

+ MyFirstJavaProject
  + src
    + edu
      + home
        + bean
          ... class files
        + control
          ... class files
        + gui
          ... class files
    + another
      + package 
```

> 我是否需要创建一个类似 /src/my_pack 的目录并将我的 .java 文件放入其中？

您可以手动完成，或者让您的 IDE（在本例中为 Eclipse）为您完成，就像在包中创建包和类一样简单。

> 三、什么是命名空间？它与包和类有什么关系？

Java 不使用命名空间，而是使用包来促进类的管理/关系。您可以从另一个包中导入类（第一种形式），或使用具有完整包名的类（第二种形式）。

第一种形式的例子：

```
package package1;

public class Package1Class {
}

package package2;

import package1.Package1Class;

public class Package2Class {
    private Package1Class x;

    public Package2Class (Package1Class x) {
        this.x = x
    }
} 
```

第二种形式的例子：

```
package package1;

public class Package1Class {
}

package package2;

public class Package2Class {
    //look that there is not use of the import statement, however everytime you need
    //to call Package1Class, you should provide the full package name
    private package1.Package1Class x;

    public Package2Class (package1.Package1Class x) {
        this.x = x
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:10:49.607

1) It is a Java thing. The file name must match the public class in the file. If there is no public class, you can name almost anything. If you have two classes with a main method, one can call the other. They are linked like in C. Just compiled against each other. You can have two classes in the same file; only one can be public. Eclipse is very similar across operating systems. There are a few differences to account for OS differences.

2) my_pack doesn't follow good naming conventions. my.pack or com.my is a better name. But yes, you want to create that directory.

3) Java doesn't use the term namespace, but I [wikipedia](http://en.wikipedia.org/wiki/Namespace_%28computer_science%29#Java) says a package is like a namespace.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T19:21:52.617

它在 java 中的规则是公共类名与 .java 文件名相同，与任何 IDE 无关。

一个.java 文件中可以有多个类，只要其中一个与公共类同名即可。

# html - 如何在 NSAttributedString 中打印 HTML 格式的文本？

> ID：10907318
> 
> 赞同：0
> 
> 时间：2012-06-06T02:02:18.163
> 
> 标签：html, objective-c, printing, webview, nsattributedstring

我已经遍历了我的核心数据实体并创建了一个 NSAttributedString，其中包含我想要打印的表格的 HTML 样式数据。我假设我应该以某种方式将此 HTML 数据放入视图中，以便可以将其发送以进行打印。我似乎无法在这里建立联系——我正试图在幕后以编程方式完成这一切。我研究了 WebKit 和 WebView，但它们似乎超出了范围吗？

我觉得这将是一个相对涵盖的话题，但我似乎找不到太多关于它的信息，而且我找到的信息并不是特别有用。我真的很希望能够打印出存储的数据以及为客户打印收据。

# html - 如何跨域加载 XML 文件？

> ID：10907319
> 
> 赞同：0
> 
> 时间：2012-06-06T02:02:50.223
> 
> 标签：html, xml

我从 W3schools 了解到，出于安全原因，我无法跨域解析 XML 文件。我有一个小型嵌入式 Web 服务器，上面有一个包含传感器数据的 XML 文件。我想通过解析 XML 文件，使用 HTML 将这些数据提取到网站中。该网站在外部托管在另一个域上。

有没有办法将 XML 数据自动复制到同一个域来绕过这个安全限制？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:13:32.273

有两种方法可以解决此问题：

1.  在加载 HTML 的服务器端代码上，实现“代理”。基本上，这意味着从 XML 实际“驻留”的服务器将 XML 下载到该服务器。您将使用 PHP/Java/Python/您使用的任何服务器端代码编写此代码。
2.  您可以做的另一件事（如果可能，这是首选）是您可以以某种方式说服使用 XML 的服务器为您提供不是 XML 格式的数据，而是 JSON 格式的数据。那么你可以做的是，你可以编写一些客户端代码（Javascript）来直接获取它，基本上绕过了安全限制。这将使用[AJAX](http://www.w3schools.com/ajax/ajax_example.asp)在客户端实现。如果数据是 XML 格式，这是不可能的。

# ruby-on-rails - 如果没有删除链接，则 Rspec 测试销毁

> ID：10907325
> 
> 赞同：3
> 
> 时间：2012-06-06T02:04:36.670
> 
> 标签：ruby-on-rails, rspec

我正在阅读 railstutorial.org 上的最新 Rails 教程，我被困在某个练习上（[http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec:updating_deleting_exercises](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec:updating_deleting_exercises)上的#8 ）。您必须编写 rspec/capybara 测试以确保管理员无法自行删除。我有实现工作，但无法让测试正常工作。这是我的代码。我在这里发现了类似的问题：[Ruby on Rails 语法](https://stackoverflow.com/questions/4510204/ruby-on-rails-syntax)和[https://getsatisfaction.com/railstutorial/topics/how_to_prevent_admin_user_from_deleting_themselves](https://getsatisfaction.com/railstutorial/topics/how_to_prevent_admin_user_from_deleting_themselves)。但我认为这是一个较旧的教程，而不是同一个问题。

以下是 spec/requests/user_pages_spec.rb 中的相关代码：

```
describe "User pages" do
  subject { page }
    describe "delete links" do
      describe "as an admin user" do
        let(:admin) { FactoryGirl.create(:admin) }
        before do
          sign_in admin
          visit users_path
        end
        it "should not be able to delete themself" do
          expect { admin.delete }.should_not change(User, :count)
        end
      end
    end
  end
end 
```

错误消息说用户数减少了 1。

为了完整起见，这是我的（工作）实现：

```
class UsersController < ApplicationController
  before_filter :current_admin,     only: :destroy
  def current_admin
  @user = User.find(params[:id])
    redirect_to users_path, notice: "Cannot delete current admin" if current_user?(@user)
  end
end 
```

我哪里错了，谢谢？（我遗漏了一些方法，但希望有足够的方法来弄清楚我想要做什么）

编辑：使用 Ruby v1.9.3，Rails v3.2.3。默认情况下，管理员没有删除链接。

Edit2：这是我的工作：

规格/控制器/users_controller_spec.rb

```
require 'spec_helper'

describe UsersController do
  describe "admins" do
    let(:admin) { FactoryGirl.create(:admin) }

    it "should not be able to delete themself" do
      sign_in admin
      expect { delete :destroy, :id => admin.id }.should_not change(User, :count)
    end
  end
end 
```

users_controller.rb

```
def destroy
  @user = User.find(params[:id])

  if current_user?(@user)
    flash[:error] = "Cannot delete current admin"
  else
    @user.destroy
    flash[:success] = "User destroyed."
  end
  redirect_to users_path
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T03:45:54.170

before_filter 的语法不正确。调用应该是这样的

```
before_filter :current_admin, :only => [:destroy] 
```

您最好将这个逻辑保留在销毁操作中。由于它仅适用于该操作，因此我认为没有任何理由将其移至单独的方法/过滤器中。您指出的其他问题实际上来自本教程的旧版本，但逻辑仍然相同：

```
class UsersController < ApplicationController
  def destroy
    @user = User.find(params[:id])

    if current_user?(@user)
      flash[:error]  = "Cannot delete current admin"
    else
      user.destroy
      flash[:notice] = "User was successfully deleted"
    end

    redirect_to users_path
  end
end 
```

至于您的测试，它失败了，因为您调用的是 delete 方法而不是控制器中的 destroy 操作。来自[ActiveRecord::Relation](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-delete)

> Active Record 对象没有被实例化，所以对象的回调没有被执行，包括任何 :dependent 关联选项或 Observer 方法。

由于他们要求您使用 rspec/capybara，因此您可以使用 click_link 方法来触发销毁操作。由于您在一个包含多个列表的索引页面上，因此您应该查看[Capybara::Node::Finders](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders)以便可靠地选择正确的按钮。

编辑：由于您要测试控制器，而不是视图，您可以使用以下方法进行测试：

```
describe "admins" do
  let(:admin) { FactoryGirl.create(:admin) }

   it "should not be able to delete themself" do
     sign_in admin
     expect { delete :destroy, :id => admin.id }.should_not change(User, :count)
   end
 end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-08T15:14:29.567

这可以在 user_pages_spec 中进行测试，这几乎是 railstutorial.org 的书似乎希望你做的。（Ruby on Rails 教程第 9 章，练习 9）。这是否是一个好主意，我留给更伟大的思想。

user_pages_spec.rb 中的测试代码如下所示：

```
 describe "I should not be able to delete admins" do
      before { delete user_path(admin.id) }

      it { should_not have_selector('div.alert.alert-error', text: 'Admins cannot delete themselves') }
    end 
```

删除 user_path(admin.id) 将模拟单击“删除”并在 rspec-capybara 中工作。假设您将错误消息更改为与我的匹配，反之亦然，这将与您的控制器代码一起传递。

此外，如果只有项目，UsersController 中的 before_filter 语法似乎可以使用或不使用 []。

# java - Java sound frequency synthesizing

> ID：10907335
> 
> 赞同：2
> 
> 时间：2012-06-06T02:05:59.460
> 
> 标签：java, audio, synthesize

I'm trying to build a frequency generator in java, but i'm having some trouble. For some reason I'm getting exactly what I want on my headphone speaker, but when I try the same code on my macbook pro 13" speaker it just doesn't work. The problem only occurs for **high** frequencies (i'm trying between 19kHz to 20kHz). For **lower** frequencies (such as 10kHz) I get the right results.

I'm using a sample rate of 44100.

Here is the code to play the produced sine frequency:

```
AudioFormat af = new AudioFormat(sampleRate, 16, 1, true, true );
DataLine.Info info = new DataLine.Info ( SourceDataLine.class, af );
SourceDataLine source = (SourceDataLine) AudioSystem.getLine( info );
source.open(af);
source.start();

source.write( buf, 0, buf.length );
source.drain();
source.stop();
source.close(); 
```

Here is how I'm generating the buffer:

```
 public void play(float seconds, int sampleRate, double frequency){

        for (int i = 0; i < numSamples; ++i) {
            sample[i] = Math.sin((2 * Math.PI * i / (sampleRate/frequency)));
        }
        for (final double dVal : sample) {
            final short val = (short) ((dVal * 32767));                

            buf[pos++] = (byte) ((val & 0xff00) >>> 8);
            buf[pos++] = (byte) (val & 0x00ff);

        }
    } 
```

[UPDATE]

The problem starts at 18kHz. Right now the best explanation is:

> It's possible there's some fairly agressive anti-aliasing filters in the mac, and that the dog park software app isn't using PCM buffering to generate the sounds, like you are. I would try a higher sampling frequency if possible. Blockquote -(comment made by Robert) But we are not 100% sure if this is precise.

One alternative solution is to plug an external speaker (make sure the computer volume is set to maximum, and regulate it on the speaker).

# matlab - 在 MATLAB 中计算标准化收益

> ID：10907337
> 
> 赞同：2
> 
> 时间：2012-06-06T02:06:07.583
> 
> 标签：matlab

我试图了解 MATLAB 的工作原理，但最终我什至难以实现最基本的概念。让我给你三个例子，并问你如何在 MATLAB 中实现它们（见附图）。此外，让我们假设以下数据表成立：

```
1.2; 3.4; 4.6
1.3; 3.7; 4.6
1.0; 3.9; 5.1
1.1; 3.7; 4.6
1.2; 3.8; 4.5 
```

在那种情况下，i = 1...5 和 k = 1...3，如果我理解正确，我们应该得到这样的结果：

```
R_hat_1 = (1.2 + 3.4 + 4.6) / 3 = 9.2/3 = 3.067
...
R_hat_5

variance_1 = (1/2) * ((1.2 - 3.067)^2 + (3.4 - 3.067)^2 + (4.6 - 3.067)^2) = 
= (1/2) * (3.48 + 0.11 + 2.35) = (1/2) * 5.94 = 2.97
...
variance_5

Y_11 = (1.2 - 3.067) / 1.72 = -1.08
...
Y_53 
```

我的问题是，如何让它在 MATLAB 上运行？我实际上缺少的是如何添加和减去不同维度的矩阵。

任何帮助将不胜感激。

![数学公式](../Images/8f46b4a6b375d10013e877575bfa90e0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T02:57:17.073

你真的应该看看 Matlab 文档，因为这是相当基本的。

首先，您应该将矩阵定义写为：

```
X = [1.2, 3.4, 4.6; ...
1.3, 3.7, 4.6; ...
1.0, 3.9, 5.1; ...
1.1, 3.7, 4.6; ...
1.2, 3.8, 4.5;]; 
```

然后，您可以使用标准函数来计算均值和方差：

```
rHat = mean(X,2);

sigma = std(X,0,2); % the 0 is a flag to use N-1 as denominator
var = sigma.^2; 
```

你可以计算出最终的等式：

```
Y = (X - repmat(rHat, [1 3])) ./ repmat(sigma, [1 3]); 
```

# google-apps-script - Capture Google Account used to access a Google site from within a GAS

> ID：10907342
> 
> 赞同：0
> 
> 时间：2012-06-06T02:07:20.690
> 
> 标签：google-apps-script, google-sites

I have a Google site that has a Google script UI that accesses a Google Spreadsheet.

I would like for the Google Script to access a different spreadsheet based on the Google account that was utilized to access the Google site.

Is this possible and if so can someone point in the right direction with some sample code?

Thanks,

JON

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:28:31.910

如果在 Google Apps 域之外，则不可能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:45:06.030

你有更多关于你想要做什么的信息吗？当用户访问脚本时，您可以通过以下方式捕获活动用户： `var currentUser = Session.getActiveUser()`

如果您的脚本中有您希望访问电子表格的用户的姓名，我不明白您为什么不能让他们访问该电子表格。您必须事先在电子表格中授予他们权限，或者在他们使用脚本期间通过`.setEditor(currentUser)`或`.setViewer(currentUser)`函数授予他们权限。

当您发布脚本时，您可以让它以访问脚本的用户（活动用户）或您（有效用户）的身份运行。您可以发布脚本并为任何人、您域中的某个人甚至匿名用户设置访问它的权限。

# c# - Using Linq to filter out certain Keys from a Dictionary and return a new dictionary

> ID：10907344
> 
> 赞同：4
> 
> 时间：2012-06-06T02:07:30.917
> 
> 标签：c#, linq

I am trying to figure out a linq query that will filter out a list of keys from a Dictionary and return a new filtered out dictionary

```
var allDictEnteries = new Dictionary<string, string>
                                     {
                                         {"Key1", "Value1"},
                                         {"Key2", "Value2"},
                                         {"Key3", "Value3"},
                                         {"Key4", "Value4"},
                                         {"Key5", "Value5"},
                                         {"Key6", "Value6"}
                                     };
var keysToBeFiltered = new List<string> {"Key1", "Key3", "Key6"}; 
```

The new dictionary should only contain the following entries

```
"Key2", "Value2"
"Key4", "Value4"
"Key5", "Value5" 
```

I don't want to make a copy of the original dictionary and do Dictionary.Remove, I am thinking there might be and efficient way than that.

Thanks for your help

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T02:13:29.020

You can filter the original dictionary, and use `ToDictionary` on the result:

```
var keysToBeFiltered = new HashSet<string> {"Key1", "Key3", "Key6"};
var filter = allDictEnteries
    .Where(p => !keysToBeFiltered.Contains(p.Key))
    .ToDictionary(p => p.Key, p => p.Value); 
```

# data-mining - A data extraction project with wikipedia dumps

> ID：10907346
> 
> 赞同：1
> 
> 时间：2012-06-06T02:07:54.390
> 
> 标签：data-mining, wikipedia, wikipedia-api

I am learning about data mining. My dream is to develop a system that receives a small text (a few sentences) and delivers a dictionary with phrases from the text and most relevant tags from a database. For example,

Input (from NYTimes website): "LOS ANGELES — The Walt Disney Company, in an effort to address concerns about entertainment’s role in childhood obesity, plans to announce on Tuesday that all products advertised on its child-focused television channels, radio stations and Web sites must comply with a strict new set of nutritional standards."

Output:

```
"LOS ANGELES" : [USA, California, Los_Angeles, city], 
"The Walt Disney Company": [Walt_Disney, Corporation, USA, movies, entertainment], 
"childhood obesity" : [childhood, illness, health],
"all products advertised": [product, advertisement,
"television channel": [TV, broadcast, advertisement],
"radio station": [Radio, broadcast, advertisement],
"web sites": [Web, broadcast, advertisement] 
```

I have downloaded the english and spanish wikipedia dumps. So far, I managed to extract all the titles, and the words from the titles, with python, lxml, and nltk. Now, I am developing a program to find the links network between the articles in the dumps, the links to external sites, etc. Also, I am thinking about the extraction of infoboxes. Also, I am going publish the python code in github this week. Now, I am commenting and testing it.

What advice can you give me? Do you think this proposal is feasible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:11:16.153

我建议您查看[DBpedia](http://dbpedia.org/About)，而不是手动处理原始维基百科转储。DBpedia 收集 Wikipedia 并对其进行结构化，以使关系易于查询。

还有其他项目可以抓取维基百科，例如[Semantic MediaWiki](https://en.wikipedia.org/wiki/Semantic_MediaWiki)和[Freebase](https://en.wikipedia.org/wiki/Freebase_%28database%29)。[WordNet](https://en.wikipedia.org/wiki/Wordnet)也可能是有用的信息来源。它是字典/词库，显示了单词之间的多种类型的关系。

# c# - 如何使用foreach检查项目是否不在控件中？

> ID：10907347
> 
> 赞同：0
> 
> 时间：2012-06-06T02:08:02.330
> 
> 标签：c#, winforms, foreach, richtextbox, textreader

我目前正在尝试使用 foreach 循环来检查 listviewitem 是否不在 listview 中，以及是否不再编写它。到目前为止，这是我的代码。

```
 private void button1_Click(object sender, EventArgs e)
    {
        TextReader reader = new StringReader(richTextBox1.Text);
        string[] strItems = null;
        foreach (ListViewItem item in listView1.Items)
        {
            strItems = reader.ReadLine().Split("-".ToCharArray());
            item.Text = strItems[0].ToString();
            item.SubItems.Add(strItems[1].ToString());
            item.SubItems.Add(strItems[2].ToString());
            item.SubItems.Add(strItems[3].ToString());
            item.SubItems.Add(strItems[4].ToString());
            listView1.Items.Add(item);
        }
    } 
```

感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:15:59.993

您不妨阅读所有开头的行，使用`File.ReadAllLines`. `.Distinct()`然后，您可以使用 LINQ 的扩展删除重复项：

```
private void button1_Click(object sender, EventArgs e)
{
    string[] lines = File.ReadAllLines(richTextBox1.Text);

    foreach (string line in lines.Distinct())
    {
        listView1.Items.Add(new ListViewItem(line.Split({'-'})));
    }
} 
```

我还使用`ListViewItem`了更方便的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:25:47.367

我认为@minitech 的答案遗漏了一件：您不仅想添加不同的新条目，还想过滤掉列表框中已经存在的任何新条目。

```
private void button1_Click(object sender, EventArgs e) 
{
    string[] lines = richTextBox1.Lines;

    // Not sure about the exact Items.Contains() and item.Text usage, but that's the idea
    foreach (string line in lines.Distinct().Where(line => 
        !listView1.Items.Contains(item => line == item.Text)))
    { 
        string[] items = line.Split('-'); 
        listView1.Items.Add(new ListViewItem(items)); 
    } 
} 
```

有一些方法可以优化这一点，但选择正确的方法首先取决于列表视图的项目来自哪里（以及列表视图中有多少项目，即您需要优化多少）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T02:11:23.670

我不确定我是否理解你的问题。

如果您在 ListView 中已经存在的所有项目中搜索特定匹配项，那么为什么不使用“FindItemWithText()”或等效项：

*   [http://msdn.microsoft.com/en-us/library/y3h4x385.aspx](http://msdn.microsoft.com/en-us/library/y3h4x385.aspx)

*   [http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection.find.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection.find.aspx)

如果查询没有返回任何内容，则该项目不在列表中。

'希望这会有所帮助......至少有一点......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T02:29:25.527

您的代码是否仅用于检查现有的 ListViewItem？如果您希望您的代码向空的 ListView 添加一个新项目，那么它将失败，因为如果 ListView 中没有任何内容，它将不会进入 foreach 循环。

如果可以尝试以下检查现有的 ListViewItem

```
private void button1_Click(object sender, EventArgs e)
{
    TextReader reader = new StringReader(richTextBox1.Text);
    string[] strItems = null;
    foreach (ListViewItem item in listView1.Items)
    {
        strItems = reader.ReadLine().Split("-".ToCharArray());
        if (ListView1.FindItemWithText(strItems[0].ToString()) != null)
        {
            item.Text = strItems[0].ToString();
            item.SubItems.Add(strItems[1].ToString());
            item.SubItems.Add(strItems[2].ToString());
            item.SubItems.Add(strItems[3].ToString());
            item.SubItems.Add(strItems[4].ToString());
            listView1.Items.Add(item);
        }
    }
} 
```

请参考以下网址

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection.find(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemcollection.find(v=vs.85).aspx)

# soapui - SoapUI IP 请求者

> ID：10907349
> 
> 赞同：1
> 
> 时间：2012-06-06T02:08:52.267
> 
> 标签：soapui

为了实现一个简单的soapui异步响应模式，我需要检索发送初始请求的客户端的IP，以便能够将响应发送回正确的请求者。

我找不到使用soapui模拟请求API从请求中检索此信息的方法，想知道是否有人有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:49:20.470

好的，当您查看好课程时，实际上真的很容易。我在看接口`com.eviware.soapui.model.mock.MockRequest`而不是实现`com.eviware.soapui.impl.wsdl.mock.WsdlMockRequest`

通过实施，这将提供响应 `mockRequest.getHttpRequest().getRemoteAddr()`

希望这对其他人有帮助！

# php - 通过数据包嗅探保护经过身份验证的 PHP 会话免受会话劫持

> ID：10907350
> 
> 赞同：2
> 
> 时间：2012-06-06T02:09:02.213
> 
> 标签：php, sessionid, session-hijacking

我对在不使用 SSL 的情况下保护 PHP 会话的主题感兴趣。

令我惊讶的是，如果中间人嗅探用户和服务器之间交换的数据包，即使会话经过身份验证，也很容易窃取会话。我知道有一些策略可以限制损害，例如在登录/注销时更改 sessionid，记录/检查用户系统参数（例如操作系统、浏览器）。

但是，如果在已经过身份验证且未注销的会话期间（也没有时间超时），攻击者能够获取会话 ID，那么他可以轻松劫持会话（据我了解问题）。

我想到了一个可能的解决方案，在加密的登录身份验证期间，服务器可以向客户端发送一个随机会话密码。会话密码仅在该登录会话期间有效。因此，在该会话期间交换的每条消息都必须使用会话密码（例如 MD5（会话密码+消息内容））进行签名。

问题解决了吗？假设攻击者无法对初始登录交换进行密码分析，这种方法的弱点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T02:34:10.330

您提出的“签名”解决方案需要客户端行为 - 因此您需要一个可以进行签名的客户端应用程序。

如果您正在编写 Flash/Java 小程序/Unity 或任何这些插件，那么您可以按照您的计划进行，因为您可以更密切地控制客户端并添加例程来进行签名。

但是我假设您在不使用插件的情况下将 HTML 页面传递给浏览器？如果是这样，你有两个选择，真的。拳头是 SSL（您正在排除），因为它内置在浏览器中。第二个是Javascript。为了获得最大的安全性，您需要以某种方式模仿 SSL，包括客户端存储加密（公共）密钥/算法（这样它们就不会与消息一起传播）。您希望尽可能接近 SSL 的公钥/私钥 + 握手 - 这绝非易事。正如 sarnold 所建议的，您需要一个强大的加密密钥。查看[http://www.jcryption.org/](http://www.jcryption.org/)以获取示例 - 其他人使用谷歌搜索出现。

如果这有点过分，您最可行的解决方案可能会使用 JS 协商一个更简单的加密算法：您发送一个“密钥”，将“密钥”存储在浏览器上的 cookie 中，所有通信都通过 AJAX 并创建一个基于该密钥的更简单的签名机制（可能加上客户端在初始握手期间与您共享的另一个变量）。任何不解码或不匹配密钥的内容，然后终止整个会话并重新开始。

* * *

sarnold 在他的回答中提出了要避免使用 md5 和 SHA-1 的优点；有些人甚至认为 SHA256 在当今的计算机上越来越受欢迎，但考虑到您需要在 JS 中实现解决方案，为了提高速度，您可能会与 md5 之类的“平淡无奇”（我的比喻）联系在一起。因此，您对此的最佳防御是准确的日志记录和蛮力/错误检测。任何到达时出现乱码的消息（您可以在任一端检查）都应该被记录和监控。失败太多，IP 地址被禁止 - 并继续记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T02:16:26.570

您会想使用[HMAC](http://en.wikipedia.org/wiki/HMAC)之类的东西而不是更简单的 MD5 ——并且您会想使用 SHA256 或更大，因为众所周知 MD5 有弱点，而 SHA-1 也开始变得虚弱。

但是即使进行了这些更改，您的方案仍然容易受到[重放攻击](http://en.wikipedia.org/wiki/Replay_attack)，攻击者可以一遍又一遍地重新发送请求，而您的服务器每次都会很高兴地重新执行它。如果它只是发布最近一次海滩旅行的照片，这没什么大不了的，但如果它发送 1000 美元小马的购买请求，那么有人会得到比他们预期的更多的小马。

所以你需要在协议中添加一个[随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)。

可能还会出现其他问题——毕竟，经过 SSL 的 3 次迭代，TLS 现在是 1.2 版。坚持使用 TLS 并感到高兴。

# c# - WPF ComboBox 将 SQL 与数据库中的 selectedValue 绑定

> ID：10907354
> 
> 赞同：0
> 
> 时间：2012-06-06T02:09:57.323
> 
> 标签：c#, wpf

我有两张桌子。Table1 通过 Table2ID 与 Table2 链接。

我需要一个组合框来加载表 2 中的所有数据并显示初始选择，如表 1 所示。

下面的代码只能从表 2 中加载所有数据，但不能显示选择的数据，如表 1 所示

谁能帮我？谢谢。

![在此处输入图像描述](../Images/0eda9e36bc76586d2c9cba1ce323ebcd.png) 在此图中，首次加载窗口时，组合框应显示“Siong Wan Trading”。

```
Table1
ID  Name    Table2ID
1   Hello   1
2   World   1
3   User    2

Table2
ID  Name
1   ABC
2   DEF

private DataSet getData()
        {
            SqlConnection conn = new SqlConnection(ConnectionString);
            SqlDataAdapter da = new SqlDataAdapter("usp_getalldata", conn);
            DataSet ds = new DataSet();
            da.Fill(ds, "DATA");
            return ds;
        }
public Details()
    {
        InitializeComponent();
        DataSet ds = getData();
        DataTable dt = ds.Tables[0];
        this.combobox.ItemsSource = ((IListSource)dt).GetList();
        this.combobox.DisplayMemberPath = "Name";
        this.combobox.SelectedValuePath = "ID";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:21:26.123

你应该在你的 XAML 中[`ObjectDataProvider`](http://msdn.microsoft.com/en-us/library/system.windows.data.objectdataprovider.aspx)作为`ItemsSource`你的。`ComboBox`

这是一个如何使用它的示例。

```
<UserControl.Resources>
    <ObjectDataProvider x:Key="MyDataSource" ObjectType="{x:Type my:StaticDataSource}" MethodName="GetMyData"/>
</UserControl.Resources>

...

<ComboBox ItemsSource="{Binding Source={StaticResource MyDataSource}}" SelectedValue="{Binding Table2ID}"/> 
```

您的`StaticDataSource`课程如下所示：

```
public class MyDataSource
{
    private static IEnumerable<Table2> myData;

    public MyDataSource(IEnumerable<Table2> data)
    {
        myData = data;
    }

    public static IEnumerable<Table2> GetMyData()
    {
        return myData;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:21:33.883

```
 this.combobox.SelectedValue = Table2ID; 
```

使用了上述方法，它起作用了。感谢您的帮助。

# java - Relationship between things I see in Eclipse and files/directories on disk

> ID：10907355
> 
> 赞同：0
> 
> 时间：2012-06-06T02:10:00.607
> 
> 标签：java, android, eclipse

I'm having some conceptual difficulties understanding how Eclipse works.

I've got a project for an Android application, which I created using the ADT wizard. Things I see in the Projects panel in Eclipse more or less resemble the contents of the filesystem directory which was generated in `~/workspaces/MyProjectName`, so I suppose that what I see in Eclipse is more or less a reflection of the filesystem.

Now I want to add some subproject/library which I checked out from github (as a git submodule) into a sub-directory inside `~/workspaces/MyProjectName`. I also edited `classpath.xml` to point to the new location, hoping that Eclipse will read the file, see the new location and everything will work.

However, this didn't happen, the directory never appeared in Eclipse and Eclipse tried to pretend that it doesn't exist at all (i.e. not allowing me to build the project which referenced the code from the new directory etc.)

I tried to add the directory to the folder manually inside the project, but Eclipse complained that the directory already exists in the filesystem so it created nothing.

Obviously I'm doing something wrong :)

The questions are:

*   Am I supposed to do everything via Eclipse, including file operations, working with VCS etc.? I'm fairly proficient with terminal and would not want to have to figure out how to do everything via a point-and-click interface.

*   Is there a sane way to make Eclipse to re-read the project structure from the disk?

*   Where does Eclipse store its settings for each project? I was hoping to be able to make the project self-contained, so I can check it out on any machine and be able to work without having to manually re-configure stuff in Eclipse, but that would not work if Eclipse stores its configuration for the project somewhere outside the project's directory.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T02:16:05.330

> 我应该通过 Eclipse 做所有事情吗

不，你可以，但没有什么能强迫你这样做。

> 有没有一种理智的方法可以让 Eclipse 从磁盘重新读取项目结构？

*   F5 用于在选择项目、文件夹或包时进行刷新。
*   如果您至少有 3.7 Eclipse 版本，则启用“访问时刷新”
*   如果某些资源未列为项目的一部分，则重新导入项目

> Eclipse 在哪里存储每个项目的设置？

`.project`位于项目根文件夹中文件系统上的文件。

但这不是编辑器、视图等的配置。这就是工作空间配置，它存储在`.metadata`工作空间根目录下的文件夹中的文件系统中。

* * *

我不确定您是否混淆了 Eclipse 中的某些概念，并且我的回答实际上解决了您的意思。

您还可以从现有项目或文件系统导入项目，如果您不希望每次创建新工作区时手动重置配置，也可以导入备份配置。

关于 VCS 和其他东西，您可以安装插件（您使用哪个 VCS？）或从命令行或外部工具执行操作。例如，许多人会为 Subversion 使用 Eclipse 插件（通常是 subclipse 或 subversive），或者使用外部命令行或 Windows shell 的 TortoiseSVN 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:17:27.810

这可以帮助你（导入>常规>文件系统）

[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-70.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-70.htm)

# c - 在 C 中使用 qsort() 并跳过特定的字符集

> ID：10907358
> 
> 赞同：0
> 
> 时间：2012-06-06T02:10:15.810
> 
> 标签：c, qsort

```
#define alen(x) ((sizeof x) / (sizeof *x))

typedef struct {
    char *movie_title;
    int minutes;
    float price;
} DVD;

int
main()
{
    DVD movies[10] = {
        { "The Dark Knight", 153, 14.99},
        { "Iron Man", 126, 12.99},
        { "Batman Begins", 141, 9.99},
        { "Batman Returns", 126, 9.99},
        { "Teenage Mutant Ninja Turtles", 87, 7.99},
        { "The Incredible Hulk", 114, 12.99},
        { "X-Men", 104, 12.99},
        { "Spider-Man", 121, 14.99},
        { "Fantastic Four", 106, 14.99},
        { "Captain America", 124, 19.99},
    };

    qsort(movies, alen(movies), sizeof *movies, tcomp);

    printf("Movies sorted: \n");
    for (int i = 0; i < alen(movies); i++)
        printf("%s\n", movies[i].movie_title);
}

int
tcomp (const void * a, const void * b)
{
    return strcmp(((DVD*)a)->movie_title,((DVD*)b)->movie_title);
} 
```

当使用函数 tcomp 和 qsort 对电影标题进行排序时，我需要忘记电影标题中的“A”、“An”和“The”。有人可以帮我弄清楚如何以优雅的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T02:20:08.843

如果您只关心前缀词，那么在进行比较之前，请调整指针

```
char* skip_irrelvant(char* s)
{
   while(*s == ' ') s++;
   if(strnicmp(s, "The ", 4)==0) s+=4;
   return s;
}

    int tcomp (const void * a, const void * b)
    {
       char* s1 = ((DVD*)a)->movie_title;
       char* s2 = ((DVD*)b)->movie_title;
       s1 = skip_irrelvant(s1);
       s2 = skip_irrelvant(s2);

       return strcmp(s1, s2);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:20:10.177

编写一个函数来在比较之前从名称的临时副本中删除您想要的忽略单词？

然后简单地比较处理后的名称。

我想这应该很简单，可以通过空格分隔来实现这样的功能，然后在将单词推入输出字符串之前确保单词是“有效单词”。

# r - R: remove rows from one data frame that are in another

> ID：10907359
> 
> 赞同：10
> 
> 时间：2012-06-06T02:10:16.820
> 
> 标签：r

I have two data frames df1 and df2\. They have the same (two) columns. I want to remove the rows from df1 that are in df2.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T02:34:46.810

你可以用几个包来做到这一点。但这里是如何使用基础 R 来做到这一点。

```
df1 <-matrix(1:6,ncol=2,byrow=TRUE)
df2 <-matrix(1:10,ncol=2,byrow=TRUE)
all <-rbind(df1,df2) #rbind the columns
#use !duplicated fromLast = FALSE and fromLast = TRUE to get unique rows.
all[!duplicated(all,fromLast = FALSE)&!duplicated(all,fromLast = TRUE),] 

     [,1] [,2]
[1,]    7    8
[2,]    9   10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T11:26:45.747

尝试这个：

```
df2 <-matrix(1:6,ncol=2,byrow=TRUE)
df1 <-matrix(1:10,ncol=2,byrow=TRUE)

data.frame(v1=setdiff(df1[,1], df2[,1]), v2=setdiff(df1[,2], df2[,2]))
  v1 v2
1  7  8
2  9 10 
```

请注意，`df1`and与 Lapointe 的相同，但反之亦然，因为您想从 df1 中删除 df2中`df2`的行，因此 setdiff 会从中删除. 看`x``y``?setdiff`

你会得到与 Lapointe 相同的结果

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-04T18:20:37.413

考虑到您有一个在两个数据帧之间匹配的变量（var_match），我得到了一个简单的：

```
df_1_minus_2 <- df_1[which(!df_1$var_match %in% df_2$var_match),] 
```

# websphere - what is the equivalent of SSLOptions in mod_ibm_ssl

> ID：10907373
> 
> 赞同：1
> 
> 时间：2012-06-06T02:12:23.320
> 
> 标签：websphere, apache, mod-ssl, ibmhttpserver

I have used mod_ssl and set the `SSLOptions +ExportCertData` in the configuration of httpd which forwards the client certificate information to the JBOSS server behind the web server and it working fine. Now I am trying to do the same on IBM - HttpServer and using the mod_ibm_ssl and am not able to find the equivalent of SSLOptions in mod_ibm_ssl .None of the options specified [here](http://www-01.ibm.com/software/webservers/httpservers/doc/v2047/manual/ibm/en_US/9acdssl.htm) has anything similar. Have anybody faced similar situation. Target is to send the client certificate information received, to the websphere app server from the httpd.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:21:15.540

如果您使用 IHS 和 WebSphere 插件，您是否可能根本不需要它？[这篇文章似乎表明，如果您使用的是 Apache](http://www-304.ibm.com/support/docview.wss?uid=swg21292700)而不是 IHS，您可能只需要该选项。

# tinymce - how to disable Flash uploader in Tinymce in magento 1.6

> ID：10907375
> 
> 赞同：1
> 
> 时间：2012-06-06T02:12:53.830
> 
> 标签：tinymce, magento-1.6, magento

There is some issue with the flash uploader in magento site I am building. I got a extension that changes the flash uploader in the catalog sectiong. But it did not change it in CMS,Block section.

Any idea how to disable flash uploader and enable normal html uploader in TINYMCE editor ?

Thanks Abhi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T10:33:01.530

您可以参考以下网址：

[magento 自定义 tinymce](http://www.raisereview.com/magento-customize-tinymce/)

您可以在 tinymce 中添加功能或在 tinymce 中删除功能。

# linux - SFTP 适用于 bash 但不适用于 nologin

> ID：10907379
> 
> 赞同：3
> 
> 时间：2012-06-06T02:13:52.047
> 
> 标签：linux, ssh, centos, sftp

我所有的 sftp 帐户都有一个默认外壳 /bin/nologin

突然之间，他们因退出代码 1 而失败。我可以将默认 shell 更改为 /bin/bash，它工作正常，但不是一个好的解决方案。

关于我所缺少的任何想法？

谢谢！

吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:29:46.580

您尝试与之进行 SFTP 的用户的*~.bashrc*中是否有任何内容？

这是一个常见的问题，因为任何 echo 语句都会破坏 SFTP / rsync、SCP

# javascript - 动态改变对象的大小而不影响其他元素

> ID：10907383
> 
> 赞同：0
> 
> 时间：2012-06-06T02:14:37.930
> 
> 标签：javascript, html, css, web

我知道标题可能有点令人困惑（我不知道该怎么问这个问题）所以这是我正在研究的例子。

[http://beautifulcreationphotography.net/gallery.html](http://beautifulcreationphotography.net/gallery.html)

所以我的问题是，每当您将鼠标悬停在图像上时，其他图像都会在图像放大时四处移动。一种可能的解决方案是使用绝对定位，但手动将所有图像定位在网格中非常麻烦（我希望将其设为 3 列宽的网格）。

还有什么其他解决方案可以帮助解决这个问题？我对纯 javascript 解决方案以及使用 JS 库都持开放态度。

HTML： http: [//pastebin.com/pfuRppdY](http://pastebin.com/pfuRppdY)

JS： http: [//pastebin.com/9m7TwNXU](http://pastebin.com/9m7TwNXU)

CSS：

```
#gallery {
    display:inline;
    margin:50px;
    height:300px;
}

#gallery img {
    position:relative;
    width:200px;
    margin:30px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:55:53.343

简单的。给每张图片一个不同的z-index！这样他们都在不同的平面...

您可以使用 JavaScript/DHTML 方法来做到这一点。如果您在数组中对图像进行编号，则可以很容易地循环遍历图像并为每个图像分配一个递增的 z-index。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:21:34.483

有没有考虑过使用 javascript 框架，比如 jQuery？

您可能想查看此站点：[http ://codecanyon.net/item/image-effects-pack-jquery-powered/full_screen_preview/136861?ref=lvraa&ref=lvraa&clickthrough_id=60503324&redirect_back=true](http://codecanyon.net/item/image-effects-pack-jquery-powered/full_screen_preview/136861?ref=lvraa&ref=lvraa&clickthrough_id=60503324&redirect_back=true)

滚动到缩放效果，您将看到您要查找的内容。

# android - 在画布上绘图时自定义路径线样式

> ID：10907386
> 
> 赞同：9
> 
> 时间：2012-06-06T02:15:02.240
> 
> 标签：android

我目前正在研究地图叠加层，它突出显示沿指定点的路线，我需要实现某些线条样式（类似于屏幕截图）

![路线指示](../Images/abd1e13541a9c8623adfd95ce09ffdee.png) 我想要做的是用透明线和两边的黑色笔划线来突出显示路线

到目前为止，使用不同的填充样式和绘画设置并没有让我找到任何解决方案。

有人知道我需要寻找什么方向吗？

目前我设法只画了实线，但这不是我想要的：

**油漆设置：**

```
mPaint.setStyle(Paint.Style.STROKE);
mPaint.setColor(COLOR_DEFAULT);
mPaint.setPathEffect(new CornerPathEffect(10));
mPaint.setStrokeWidth(6);
mPaint.setAntiAlias(true); 
```

**绘图程序**

```
canvas.drawPath(mPath, mPaint); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-06T04:30:53.970

PathDashPathEffect 使用两个非常薄的矩形和 MORPH 样式选项的“破折号”，我得到了很好的结果。在此处查看最后一行和第三行：

![在此处输入图像描述](../Images/102648f1f818087b1c10da3f96d83304.png)

这是通过修改`PathEffects`从 SDK 中获取的 ApiDemos 中的示例得出的：

```
package com.example.android.apis.graphics;

import android.content.Context;
import android.graphics.*;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;

public class PathEffects extends GraphicsActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new SampleView(this));
    }

    private static class SampleView extends View {
        private Paint mPaint;
        private Path mPath;
        private PathEffect[] mEffects;
        private int[] mColors;
        private float mPhase = 3;

        private static void makeEffects(PathEffect[] e, float phase) {
            e[0] = null;     // no effect
            e[1] = new CornerPathEffect(10);
            e[2] = new DashPathEffect(new float[] {10, 5, 5, 5}, phase);
            e[3] = new PathDashPathEffect(makePathDash(), 12, phase,
                                          PathDashPathEffect.Style.MORPH);
            e[4] = new ComposePathEffect(e[2], e[1]);
            e[5] = new ComposePathEffect(e[3], e[1]);
        }

        public SampleView(Context context) {
            super(context);
            setFocusable(true);
            setFocusableInTouchMode(true);

            mPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeWidth(6);

            mPath = makeFollowPath();

            mEffects = new PathEffect[6];

            mColors = new int[] { Color.BLACK, Color.RED, Color.BLUE,
                                  Color.GREEN, Color.MAGENTA, Color.BLACK
                                };
        }

        @Override protected void onDraw(Canvas canvas) {
            canvas.drawColor(Color.WHITE);

            RectF bounds = new RectF();
            mPath.computeBounds(bounds, false);
            canvas.translate(10 - bounds.left, 10 - bounds.top);

            makeEffects(mEffects, mPhase);
            invalidate();

            for (int i = 0; i < mEffects.length; i++) {
                mPaint.setPathEffect(mEffects[i]);
                mPaint.setColor(mColors[i]);
                canvas.drawPath(mPath, mPaint);
                canvas.translate(0, 28);
            }
        }

        @Override public boolean onKeyDown(int keyCode, KeyEvent event) {
            switch (keyCode) {
                case KeyEvent.KEYCODE_DPAD_CENTER:
                    mPath = makeFollowPath();
                    return true;
            }
            return super.onKeyDown(keyCode, event);
        }

        private static Path makeFollowPath() {
            Path p = new Path();
            p.moveTo(0, 0);
            for (int i = 1; i <= 15; i++) {
                p.lineTo(i*20, (float)Math.random() * 35);
            }
            return p;
        }

        private static Path makePathDash() {
            Path p = new Path();
            p.moveTo(-6, 4);
            p.lineTo(6,4);
            p.lineTo(6,3);
            p.lineTo(-6, 3);
            p.close();
            p.moveTo(-6, -4);
            p.lineTo(6,-4);
            p.lineTo(6,-3);
            p.lineTo(-6, -3);
            return p;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:09:35.393

我设法为我的问题找到了更好的解决方案。所以我摆脱了我的自定义路径效果并开始使用通常的笔触。所以我基本上画了我的路径2次：首先我画黑线，然后我画更细的透明线以清除之前黑线的中心。

这种方法的唯一技巧是我需要在单独的位图中绘制我的路径（使用临时画布），并且当路径位图准备好时 - 将其渲染到主画布。

希望这对其他人有帮助

```
@Override
public void draw(Canvas canvas, final MapView mapView, boolean shadow)
{
    //Generate new bitmap if old bitmap doesn't equal to the screen size (f.i. when screen orientation changes)
    if(pathBitmap == null || pathBitmap.isRecycled() || pathBitmap.getWidth()!=canvas.getWidth() || pathBitmap.getHeight()!=canvas.getHeight())
    {
        if(pathBitmap != null)
        {        
            pathBitmap.recycle();
        }
        pathBitmap = Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(), Config.ARGB_8888);
        tempCanvas.setBitmap(pathBitmap);
    }

    //Render routes to the temporary bitmap
    renderPathBitmap();

    //Render temporary bitmap onto main canvas
    canvas.drawBitmap(pathBitmap, 0, 0, null);
    }
}

private void renderPath(Path path, Canvas canvas)
{
    routePaint.setStrokeWidth(ROUTE_LINE_WIDTH);
    routePaint.setColor(OUTER_COLOR);
    routePaint.setXfermode(null);

    canvas.drawPath(path, routePaint); //render outer line

    routePaint.setStrokeWidth(ROUTE_LINE_WIDTH/1.7f);
    routePaint.setColor(Color.TRANSPARENT);
    routePaint.setXfermode(new PorterDuffXfermode(Mode.CLEAR));

    canvas.drawPath(path, routePaint); //render inner line
} 
```

所以结果看起来像：

![在此处输入图像描述](../Images/d636a750d9550d33190f02379df349d1.png)

# java - 大型 XML 文件的 XQuery Java 性能

> ID：10907387
> 
> 赞同：1
> 
> 时间：2012-06-06T02:15:42.927
> 
> 标签：java, xquery, saxon

我正在编写一些 Xquery 代码（使用 SAXON）来针对大型 XML 文件执行简单的 XQuery 文件。

XML 文件（位于 this.referenceDataPath）有 300 万个“行”节点，格式如下：

```
<row>
<ISRC_NUMBER>1234567890</ISRC_NUMBER>
</row>
<row>
<ISRC_NUMBER>1234567891</ISRC_NUMBER>
</row>
<row>
<ISRC_NUMBER>1234567892</ISRC_NUMBER>
</row> 
```

ETC...

XQuery 文档（位于 this.xqueryPath）是：

```
declare variable $isrc as xs:string external;
declare variable $refDocument external;
let $isrcNode:=$refDocument//row[ISRC_NUMBER=$isrc]
return count($isrcNode) 
```

Java代码是：

```
private XQItem referenceDataItem;
private XQPreparedExpression xPrepExec;
private XQConnection conn;

//set connection string and xquery file
this.conn = new SaxonXQDataSource().getConnection();
InputStream queryFromFile = new FileInputStream(this.xqueryPath);

//Set the prepared expression 
InputStream is  = new FileInputStream(this.referenceDataPath);
this.referenceDataItem = conn.createItemFromDocument(is, null, null);
this.xPrepExec = conn.prepareExpression(queryFromFile);
xPrepExec.bindItem(new QName("refDocument"), this.referenceDataItem);   

//the code below is in a seperate method and called multiple times
public int getCount(String searchVal){

    xPrepExec.bindString(new QName("isrc"), searchVal, conn.createAtomicType   (XQItemType.XQBASETYPE_STRING));

    XQSequence resultsFromFile = xPrepExec.executeQuery();
    int count = Integer.parseInt(resultsFromFile.getSequenceAsString(new Properties()));
    return count;

} 
```

方法 getCount 被连续调用多次（例如 1000000 次）以验证 XML 文件中是否存在许多值。

Xquery 查询的当前速度对于每次调用 getCount 大约需要 500 毫秒，考虑到 XML 文档在内存中并且查询是准备好的，这似乎非常慢。

我使用 XQuery 的原因是作为未来工作的概念证明，其中 XML 文件将具有更复杂的布局。

我在具有 8GB RAM 的 i7 上运行代码，因此内存不是问题——我还增加了程序的分配堆大小。

关于如何提高此代码的速度的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:51:16.327

Zorba 具有解析和查询大型 XML 文档的功能。有关它的一些文档，请访问[http://www.zorba-xquery.com/html/entry/2012/05/31/XML_Streaming](http://www.zorba-xquery.com/html/entry/2012/05/31/XML_Streaming)

例如，在下面的代码片段中，我们通过 HTTP 解析一个 700MB 的文档，整个过程以流式方式从上到下进行：

```
import module namespace http = "http://expath.org/ns/http-client";
import module namespace p = "http://www.zorba-xquery.com/modules/xml";
import schema namespace opt = "http://www.zorba-xquery.com/modules/xml-options";

let $raw-data as xs:string := http:send-request(<http:request href="http://cf.zorba-xquery.com.s3.amazonaws.com/forecasts.xml" method="GET" override-media-type="text/plain" />)[2]
let $data := p:parse($raw-data, <opt:options><opt:parse-external-parsed-entity opt:skip-root-nodes="1"/></opt:options>)
return
    subsequence($data, 1, 2) 
```

[您可以在http://www.zorba-xquery.com/html/demo#CGPfEyXKvDwDfgzek/VTOIAIrJ8=](http://www.zorba-xquery.com/html/demo#CGPfEyXKvDwDfgzek/VTOIAIrJ8=)现场试用此示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T23:51:25.980

对于如何提高速度的问题，最明显的答案是尝试 Saxon-EE，它具有更强大的优化器，并且还使用字节码生成。我没有尝试过，但我认为 Saxon-EE 会检测到该查询将受益于构建索引，并且每次出现查询都会重复使用相同的索引。

我要提出的另一个建议是声明变量 $refDocument 的类型 - 类型信息有助于优化器做出更明智的决策。例如，如果优化器知道 $refDocument 是单个节点，那么它知道 $refDocument//X 将自动按文档顺序排列，而无需任何排序操作。

用“eq”替换“=”运算符也值得一试。

# r - R - 需要帮助加快 for 循环

> ID：10907390
> 
> 赞同：5
> 
> 时间：2012-06-06T02:15:58.270
> 
> 标签：r, for-loop, dataframe, vectorization, data.table

我有两个数据框；一个是 48 行长，如下所示：

名称 = Z31

```
 Est.Date   Site    Cultivar   Planting
1   24/07/2011  Birchip Axe           1
2   08/08/2011  Birchip Bolac         1
3   24/07/2011  Birchip Derrimut      1
4   12/08/2011  Birchip Eaglehawk     1
5   29/07/2011  Birchip Gregory       1
6   29/07/2011  Birchip Lincoln       1
7   23/07/2011  Birchip Mace          1
8   29/07/2011  Birchip Scout         1
9   17/09/2011  Birchip Axe           2
10  19/09/2011  Birchip Bolac         2 
```

另一个是 > 23000 行，包含来自模拟器的输出。它看起来像这样：

名称 = pred

```
 Date        maxt    mint    Cultivar    Site    Planting    tt  cum_tt
1   5/05/2011   18       6.5    Axe        Birchip  1        12.25  0
2   6/05/2011   17.5     2.5    Axe        Birchip  1        10     0
3   7/05/2011   18       2.5    Axe        Birchip  1        10.25  0
4   8/05/2011   19.5       2    Axe        Birchip  1        10.75  0
5   9/05/2011   17       4.5    Axe        Birchip  1        10.75  0
6   10/05/2011  15.5    -0.5    Axe        Birchip  1        7.5    0
7   11/05/2011  14       5.5    Axe        Birchip  1        9.75   0
8   12/05/2011  19         8    Axe        Birchip  1        13.5   0
9   13/05/2011  18.5     7.5    Axe        Birchip  1        13     0
10  14/05/2011  16       3.5    Axe        Birchip  1        9.75   0 
```

我想要做的是让 cum_tt 列开始将当前行的 tt 列添加到前一行的 cum_tt （累积加法），前提是 pred DF 中的日期等于或大于 Z31 est.Date . 我编写了以下 for 循环：

```
for (i in 1:nrow(Z31)){
  for (j in 1:nrow(pred)){
    if (Z31[i,]$Site == pred[j,]$Site & Z31[i,]$Cultivar == pred[j,]$Cultivar & Z31[i,]$Planting == pred[j,]$Planting &
        pred[j,]$Date >= Z31[i,]$Est.Date)
    {
      pred[j,]$cum_tt <- pred[j,]$tt + pred[j-1,]$cum_tt
    }
  }
} 
```

这行得通，但它太慢了，运行整个集合大约需要一个小时。我知道循环不是 R 的强项，所以任何人都可以帮助我对这个操作进行矢量化吗？

提前致谢。

更新

这是 dput(Z31) 的输出：

`structure(list(Est.Date = structure(c(15179, 15194, 15179, 15198, 15184, 15184, 15178, 15184, 15234, 15236, 15230, 15238, 15229, 15236, 15229, 15231, 15155, 15170, 15160, 15168, 15165, 15159, 15170, 15170, 15191, 15205, 15198, 15203, 15202, 15195, 15203, 15206, 15193, 15193, 15195, 15200, 15193, 15205, 15200, 15205, 15226, 15245, 15231, 15259, 15241, 15241, 15241, 15241), class = "Date"), Site = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("Birchip", "Gatton", "Tarlee"), class = "factor"), Cultivar = structure(c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L), .Label = c("Axe", "Bolac", "Derrimut", "Eaglehawk", "Gregory", "Lincoln", "Mace", "Scout"), class = "factor"), Planting = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L)), .Names = c("Est.Date", "Site", "Cultivar", "Planting"), row.names = c(NA, -48L), class = "data.frame")`

这里是预告。请注意，这里有一些额外的列。为了便于阅读，我刚刚包括了上面的相关内容。

```
structure(list(Date = structure(c(15099, 15100, 15101, 15102, 
15103, 15104, 15105, 15106, 15107, 15108, 15109, 15110, 15111, 
15112, 15113, 15114, 15115, 15116, 15117, 15118), class = "Date"), 
    flowering_das = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), Zadok = c(9, 9, 
    9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 11, 11.032, 11.085, 
    11.157), stagename = structure(c(8L, 8L, 8L, 8L, 8L, 8L, 
    8L, 8L, 9L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 1L, 3L, 3L, 3L), .Label = c("emergence", 
    "end_grain_fill", "end_of_juvenil", "floral_initiat", "flowering", 
    "germination", "maturity", "out", "sowing", "start_grain_fi"
    ), class = "factor"), node_no = c(0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 2, 2.032, 2.085, 2.157), maxt = c(18, 
    17.5, 18, 19.5, 17, 15.5, 14, 19, 18.5, 16, 16, 15, 16.5, 
    16.5, 20.5, 23, 25.5, 16.5, 16.5, 15), mint = c(6.5, 2.5, 
    2.5, 2, 4.5, -0.5, 5.5, 8, 7.5, 3.5, 6, 1, 5.5, 2, 7, 7, 
    9, 13.5, 11.5, 8.5), Cultivar = c("Axe", "Axe", "Axe", "Axe", 
    "Axe", "Axe", "Axe", "Axe", "Axe", "Axe", "Axe", "Axe", "Axe", 
    "Axe", "Axe", "Axe", "Axe", "Axe", "Axe", "Axe"), Site = c("Birchip", 
    "Birchip", "Birchip", "Birchip", "Birchip", "Birchip", "Birchip", 
    "Birchip", "Birchip", "Birchip", "Birchip", "Birchip", "Birchip", 
    "Birchip", "Birchip", "Birchip", "Birchip", "Birchip", "Birchip", 
    "Birchip"), Planting = c("1", "1", "1", "1", "1", "1", "1", 
    "1", "1", "1", "1", "1", "1", "1", "1", "1", "1", "1", "1", 
    "1"), `NA` = c("Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", 
    "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", 
    "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", 
    "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", 
    "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", 
    "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", 
    "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out", "Birchip TOS1 Axe.out"
    ), tt = c(12.25, 10, 10.25, 10.75, 10.75, 7.5, 9.75, 13.5, 
    13, 9.75, 11, 8, 11, 9.25, 13.75, 15, 17.25, 15, 14, 11.75
    ), cum_tt = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0)), .Names = c("Date", "flowering_das", "Zadok", 
"stagename", "node_no", "maxt", "mint", "Cultivar", "Site", "Planting", 
NA, "tt", "cum_tt"), row.names = c(NA, 20L), class = "data.frame") 
```

更新

感谢大家的帮助。我对矢量处理方式仍然很陌生，我无法及时实施一些更复杂的解决方案。对于 Subs 建议的方式，我在下面有一些时间安排。它现在足够快，可以做我需要的。对于 Z 对 P 的一次迭代，这些数字以秒为单位。

我的方式：59.77

替补：14.62

使用数字日期的潜艇：11.12

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:12:46.333

当然，我们可以在几秒钟内做到这一点......我在这里的第一个答案，所以温柔点！

```
## first make sure we have dates in a suitable format for comparison
## by using strptime, creating the columns estdate_tidy and date_tidy
## in Z31 and pred respectively

Z31$estdate_tidy = strptime(as.character(Z31$Est.Date), "%d/%m/%Y")
pred$date_tidy = strptime(as.character(pred$Date), "%d/%m/%Y")

## now map the estdate_tidy column over to pred using the match command -
## Z31_m and pred_m are dummy variables that hopefully make this clear

Z31_m = paste(Z31$Site, Z31$Cultivar, Z31$Planting)
pred_m = paste(pred$Site, pred$Cultivar, pred$Planting)
pred$estdate_tidy = Z31$estdate_tidy[match(pred_m, Z31_m)]

## then define a ttfilter column that copies tt, except for being 0 when
## estdate_tidy is after date_tidy (think this is what you described)

pred$ttfilter = ifelse(pred$date_tidy >= pred$estdate_tidy, pred$tt, 0)

## finally use cumsum function to sum this new column up (looks like you
## wanted the answer in cum_tt so I've put it there)

pred$cum_tt = cumsum(pred$ttfilter) 
```

希望这可以帮助 ：）

**更新（6 月 7 日）：**

处理新规范的矢量化代码 - 即应针对每组条件（场地/栽培品种/种植）分别完成 cumsum - 如下所示：

```
Z31$Lookup=with(Z31,paste(Site,Cultivar,Planting,sep="~"))
Z31$LookupNum=match(Z31$Lookup,unique(Z31$Lookup))
pred$Lookup=with(pred,paste(Site,Cultivar,Planting,sep="~"))
pred$LookupNum=match(pred$Lookup,unique(pred$Lookup))

pred$Est.Date = Z31$Est.Date[match(pred$Lookup,Z31$Lookup)]
pred$ttValid = (pred$Date>=pred$Est.Date)
pred$ttFiltered = ifelse(pred$ttValid, pred$tt, 0)

### now fill in cumsum of ttFiltered separately for each LookupNum
pred$cum_tt_Z31 = as.vector(unlist(tapply(pred$ttFiltered,
                                          pred$LookupNum,cumsum))) 
```

在我的机器上运行时间为 0.16 秒，最后`pred$cum_tt_Z31`一列与非矢量化代码的答案完全匹配:)

为了完整起见，值得注意的是，上面最后一个复杂的 tapply 行可以用以下更简单的方法替换，在 48 种可能的情况下进行短循环：

```
pred$cum_tt_Z31 = rep(NA, nrow(pred))
for (lookup in unique(pred$Lookup)) {
    subs = which(pred$Lookup==lookup)
    pred$cum_tt_Z31[subs] = cumsum(pred$ttFiltered[subs])
} 
```

运行时间仅略微增加到 0.25 秒左右，因为这里的循环非常小，并且在循环内完成的工作是矢量化的。

认为我们已经破解了它！:)

**关于矢量化的一些快速观察（6 月 8 日）：**

将过程步骤矢量化的过程使运行时间从接近一个小时减少到总共 0.16 秒。即使考虑到不同的机器速度，这也是一个至少 10,000 倍的加速，这使一个人通过进行细微调整但仍保留循环结构可能获得的 2-5 倍相形见绌。

要进行的第一个关键观察：在解决方案中，每一行都创建 - 没有循环 - 一个全新的向量，其长度与 Z31 或 pred 中的列相同。为了简洁起见，我经常发现将这些新向量创建为新的数据框列很有用，但显然这并不是绝对必要的。

第二个观察结果：所需的 Est.Date 列使用“paste'n'match”策略正确地从 Z31 转移到 pred。这类任务有其他方法（例如使用合并），但我采用这条路线，因为它是完全故障安全的，并保证保留 pred 中的顺序（这是至关重要的）。本质上，粘贴操作只是让您一次匹配多个字段，因为如果粘贴的字符串匹配，那么它们的所有组成部分都匹配。我使用 ~ 作为分隔符（前提是我知道该符号不会出现在任何字段中）以避免粘贴操作导致任何歧义。如果您使用空格分隔符，则将 ("A B", "C", "D") 之类的内容粘贴在一起会得到与粘贴 ("A", "B C", "D" 相同的结果

第三个观察：向量化逻辑操作很容易，例如查看一个向量是否超过另一个（参见 pred$ttValid），或根据向量的值选择一个或另一个值（参见 pred$ttFiltered）。在目前的情况下，这些可以组合成一条线，但我把事情分解了一点作为演示。

第四个观察：创建 pred$cum_tt_Z31 的最后一行本质上只是使用 tapply 对对应于 pred$LookupNum 的每个单独值的行执行 cumsum 操作，它允许您对不同的行组应用相同的函数（这里，我们'按 pred$LookupNum 分组）。pred$LookupNum 的定义在这里有很大帮助——它是一个数字索引，包含一个 1 的块，然后是一个 2 的块，依此类推。这意味着来自 tapply 的 cumsum 向量的最终列表可以简单地不列出并放入向量中，并自动按正确的顺序排列。如果您执行 tapply 并按未像这样排序的组进行拆分，您通常需要几行额外的代码才能正确地重新匹配事物（尽管这并不棘手）。

最后的观察：如果最后的 tapply 太可怕了，那么值得强调的是，如果循环内的工作被很好地矢量化，那么在少数情况下（比如 48 个）的快速循环并不总是灾难性的。UPDATE 部分末尾的“替代方法”表明，cumsum-on-groups 步骤也可以通过预先准备一个答案列（最初是所有 NA）然后将 48 个子集一一遍历并填写每个块都有适当的 cumsum。然而，正如文中所指出的，这一步的速度大约是聪明的 tapply 方法的一半，如果需要更多的子集，这将相当慢。

如果有人对此类任务有任何后续问题，请随时给我留言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:48:44.113

一个快速的解决方案是将循环外的向量定义为：

```
 temp_cumtt=c(rep(0,nrow(pred))) 
```

然后使用这个：

```
if (Z31[i,2] == pred[j,5] & Z31[i,3] == pred[j,4] & Z31[i,4] == pred[j,6] & pred[j,1] >= Z31[i,1]){
   temp_cumtt[j]=pred[j,7] + pred[j-1,8]
} 
```

而不是直接更新 data.frame 列。

退出循环后，您可以更新该列：

```
 pred$cum_tt = temp_cumtt 
```

`j-1`另一件事是在使用with index of `j`starting at时必须小心`1`。在您的示例中，它不会导致该条件问题。

编辑：

现在查看您的数据格式，我有这些建议。

1）不要转换为`Date`类，而是将其保留为值向量。

2）`Z31`根据Date-vector对data_frame进行排序：（`Z31=Z31[with(Z31, order(-Date)), ]`注意按降序排列，因为要比较pred[,Date index]>=Z31[,Date index]

3）使用第一个循环作为`pred`。首先取 pred -> 的日期`pred[i,1]`并尝试二进制排序并找到它满足 Z31 中的哪个索引，然后从该索引开始向下列表。如果`Date`条件满足，则检查其余条件并`temp_cumtt[i]`像以前一样填写。

这应该非常快（因为二进制排序仅在 48 行上`Z31`，您可以将运行时间与其他解决方案进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:14:37.690

让我们使用`data.table`，它应该会加快速度。

```
Z31 <- data.table(Z31,key="Site,Cultivar,Planting")
pred <- data.table(pred)

## First, let's create an extra column in `pred` to see the corresponding date from `Z31` 
## Note 1: The JT is necessary since both sets have the same column names
## Note 2: I needed to use as.integer on Planting to make it work

pred[,Z31Est.Date:={JT=J(Site,Cultivar,as.integer(Planting)); Z31[JT,Est.Date][[4]]}]

## Now we can see for each row whether the date in `pred` is higher than or equal to that from `Z31`.

pred[,DateTrue:=Date>=Z31Est.Date]

## Finally, we only have to add up `pred[i,tt]` and `pred[i-1,cum_tt]` for each row where `DateTrue` equals `TRUE`.

for (i in 1:nrow(pred)) set(pred,i,13L,if(pred[i,DateTrue]) pred[i-1,cum_tt]+pred[i,tt] else(0)) 
```

# ruby-on-rails - Rails 构建用户可以构建的模板

> ID：10907392
> 
> 赞同：0
> 
> 时间：2012-06-06T02:16:01.273
> 
> 标签：ruby-on-rails

这更像是一个关于如何设计我的应用程序的一部分的一般问题。目标是允许用户创建模板或任务序列的顺序。然后用户可以从另一个模型中选择哪些对象将填充模板模型的顺序。所以基本上，模板是可以重复的任务的顺序，一旦用户选择了将填充模板的其他任务。我希望用户能够重用模板以基于单个模板创建不同的排序。我在想的是创建一个看起来像这样的模板模型：

```
model Template
  order:string
  number_of_unique_tasks:integer 
```

我会再有两个模型来存储任务等：

```
model Tasks
  has_many :list_tasks
  #some properties
model List
  has_many :list_tasks
  has_many :tasks, through: list_tasks
model ListTask
  belongs_to :lists
  belongs_to :tasks
  order:integer 
```

所以我想使用`Template`模型来构建`List`. 任何想法将不胜感激，在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:08:24.213

如果我理解正确，模板模型应该类似于列表模型。它应该有一个描述性的名称和一组任务。从模板构建列表时，应使用相同的顺序将与该模板关联的任务复制到新列表中。像这样的东西：

```
#table templates
# id: integer
# name: string
class Template < ActiveRecord::Base
  has_many :template_tasks, order: sequence
  has_many :tasks, through: :template_tasks

  def to_list
    list = List.new
    list.list_tasks = template_tasks.map{|t| 
      ListTask.new(task_id: t.task_id, order: t.sequence) 
    }
    list
  end
end

#table template_tasks
# id: integer
# template_id: integer
# task_id: integer
# sequence: integer
class TemplateTask < ActiveRecord::Base
  belongs_to :task
  belongs_to :template
end 
```

# javascript - 在 TinyMCE 中更改 FontSize 下拉列表的名称

> ID：10907395
> 
> 赞同：1
> 
> 时间：2012-06-06T02:16:24.027
> 
> 标签：javascript, tinymce

所以我正在使用 TinyMCE，我想允许用户将字体大小更改为一个预定义的大小（更大）。

我已经设法通过这个自定义设置做到了这一点：

```
font_size_style_values: "large,x-small,small,medium,large,x-large,xx-large",
theme_advanced_font_sizes: "1", 
```

但是，在字体大小选择下拉列表中，出现的文字是“1（8pt）”，对用户不是很友好。

我想把它改成“大”，或者任何东西。有任何想法吗？

如果有帮助，这是我的完整自定义设置：

```
tinyMCE.init({
    mode: "exact",
    elements: "Details", // "EventDetails_Directions, EventDetails_Details"
    width: "673",
    height: "320",
    theme: "advanced",
    plugins: "paste, media",
    autocomplete: "off",
    convert_fonts_to_spans : true,
    theme_advanced_buttons1: "bold,italic,underline,justifyleft,justifycenter,fontsizeselect,link,unlink,image,bullist,separator,undo,redo,code",
    theme_advanced_buttons2: "",
    theme_advanced_buttons3: "",
    font_size_style_values: "large,x-small,small,medium,large,x-large,xx-large",
    theme_advanced_font_sizes: "1",
    paste_auto_cleanup_on_paste: true,
    paste_remove_styles: true,
    paste_retain_style_properties: "none",
    paste_strip_class_attributes: "all",
    paste_preprocess: function(p1, o) {
        o.content = replaceWordChars(o.content);
    },
    content_css: "/ClientControlRoom/assets/css/tinymce_custom.css"
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T04:34:06.020

自 TinyMCE 3.2 起，[theme_advanced_font_sizes](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_font_sizes)配置选项允许您将文本值映射到字体大小（像素或相对）或类。

因此，如果您只想在下拉菜单中为您的用户提供一个选项（“大”），您可以

```
theme_advanced_font_sizes : "large=30px" 
```

或者，如果您使用简单的相对尺寸

```
theme_advanced_font_sizes : "large" 
```

# ios - iOS 模拟器中的 UITableView 滚动不稳定

> ID：10907397
> 
> 赞同：3
> 
> 时间：2012-06-06T02:17:01.523
> 
> 标签：ios, xcode, performance, simulator

这是一个视频，其中记录了单元格中的索引路径以获取索引路径中的行：（请参阅下面的新链接）

所以，另一个奇怪的......在我家的 iMac（全新）上，当我第一次在模拟器中运行 Xcode 项目时，它运行良好。如果我然后退出模拟器和 Xcode，然后再次打开 Xcode 并运行它 - （认为这是改天再次开始在项目上工作） - 当我尝试滚动任何 uitableview 时，模拟器会重绘所有单元格（它似乎没有正确地出列和重用）。我知道这一点，因为在绘制单元格时我正在运行 NSLog。

如果我在模拟器中重置设置然后再次运行它 - 它会平滑滚动。我已经尝试完全卸载 Xcode 并重新安装它无济于事。我正在使用 Xcode 4.3.2。

现在，有人可能会认为这是代码的问题，但是，明白这一点：我在办公室有另一台（全新的 iMac）。我在 Dropbox 上有这个 Xcode 项目，所以两个副本是相同的（办公室和家庭）。在办公室里，我没有这个奇怪的滚动问题……一切正常。

两台 mac（均为 27 英寸，内存为 16gb）之间的唯一区别是硬盘 - 办公室 mac 有一个 1tb 7200 RPM 驱动器。我的家用 Mac 有一个来自 Apple 的 SSD。

我不知道是什么原因造成的……这真的很令人沮丧。我不反对擦拭我的家庭Mac并重新开始，但这有点激烈。

想法？我没有发布代码，因为在两台不同的计算机上运行相同的代码会产生不同的结果，所以代码似乎不是问题。

更新代码 - 和视频[http://ge.tt/4ZuZ9mI/v/0](http://ge.tt/4ZuZ9mI/v/0)

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

            static NSString *CellIdentifier = @"dateCell";

            FEDateCell *cell = (FEDateCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            if (cell == nil) {
                [[NSBundle mainBundle] loadNibNamed:@"FEDateCell" owner:self options:nil];
                cell = dateCell; 
                [cell setClipsToBounds:YES];
            }
            PFObject *eventObj = [self.itemsList objectAtIndex:indexPath.row];
            //Get cell date from row
            NSDate *currentDate = [eventObj objectForKey:@"startDate"];

            cell.cellDate = currentDate;
            cell.eventsArray = [NSArray arrayWithObject:eventObj];

            [dateFormatter setDateFormat:@"dd"];
            cell.dayNumber.text = [dateFormatter stringFromDate:cell.cellDate];
            [dateFormatter setDateFormat:@"EEE"];
            cell.dayName.text = [dateFormatter stringFromDate:cell.cellDate];

            [cell updateCellData];

            return cell;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:26:40.177

经过深思熟虑，我决定彻底擦除 iMac 并进行全新安装。
现在，虽然我只是执行了全新安装（实际上，这与重置 iOS 模拟器中的内容和设置相同）——但问题似乎已经消失了。现在，我不确定这一点，因为我刚刚执行了全新安装，但是我再次关闭并重新打开了 Xcode 多次，重新启动了几次并且问题没有返回。

真的很烦人，它来格式化系统并从头开始，但无论如何。至少它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:33:12.920

如果事情按照您描述的方式发生，请考虑向 Apple[报告错误。](http://bugreporter.apple.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T04:46:59.963

尝试安装最新版本的显卡驱动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T07:52:14.153

我认为这里没有足够的信息来确定问题所在。我认为最好的方法是让您使用 Xcode 分析工具来追踪问题可能出在哪里。还要查看图形分析工具以确定是否发生过度绘图。

# ruby-on-rails - Rails best_in_place gem 输入有讨厌的额外空间

> ID：10907398
> 
> 赞同：2
> 
> 时间：2012-06-06T02:17:19.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, best-in-place

我正在使用 Rails 3.2.3、Twitter Bootstrap 和 best_in_place gem 来处理就地编辑。

问题是，每当我单击编辑输入时，输入右侧都会放置一堆额外的空间。

前： ![前](../Images/54475d3adbdea3ce0a579f87cf9d5a0f.png)

后： ![后](../Images/2b8f8717206aaab9e137279c9444461e.png)

有没有其他人有这个问题？我应该怎么办？

我尝试将填充和边距显式设置为 0，并将宽度设置为设置的像素宽度 - 小于 td 宽度。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:48:49.870

Twitter bootstrap 为您提供范围广泛的输入大小调整类。比如'input-small'，'input-large'等。

尝试为“inner_class”属性添加这些类，它应该应用于输入字段。

```
<%= best_in_place @category, :name, {:inner_class => "input-small", :type => :input} %> 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-09T14:46:34.020

我最近自己遇到了这个问题。`size`我使用 best_in_place 中可用的选项传递了 html 属性`:html_attrs`，如下所示：

`<%= best_in_place @payment, :currency, :html_attrs => { size: 3 } %>`

大小为 3 表示输入框可输入 3 个字符。在我的示例中，这大大减少了输入框的扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T02:19:39.713

我怀疑这实际上是将数据添加到您的数据库中并带有额外的空格。

这只是一个 CSS 问题，您的输入字段被设计为占用一定百分比的包含元素或类似的东西。如果没有看到输入字段背后的确切 CSS，很难分辨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-10T14:46:52.623

我使用`cols`and`rows`作为替代`size`：

```
<%= best_in_place @payment, :currency, :html_attrs =>  { :cols => '45', :rows => '10' } %> 
```

# css - 将条件 css 样式表添加到 xpage

> ID：10907404
> 
> 赞同：2
> 
> 时间：2012-06-06T02:18:33.237
> 
> 标签：css, xpages

是否可以将条件样式表添加到 xpage。

在 html 中这样做：

```
<!--[if lt IE 8]><link rel="stylesheet" href="../../blueprint/ie.css" type="text/css" media="screen, projection"><![endif]--> 
```

虽然关于添加计算字段设置为 HTML 和代码 javascript，如：

```
return '<!--[if lt IE 8]><link rel=\"stylesheet\" href=\"../../blueprint/ie.css\" type=\"text/css\" media=\"screen, projection\"><![endif]-->' 
```

但随后它将包含在页面正文中，而不是包含在其他样式表的标题中。

需要使用[http://blueprintcss.org](http://blueprintcss.org)进行概念验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:24:27.427

您可以使用 SSJS 的*渲染*属性来仅显示 IE 的元素：

*渲染="#{javascript:context.getUserAgent().isIE()}"*

然后，只有在使用 Internet Explorer 打开 XPage 时，您的 CSS 资源才会添加到生成的 HTML 响应中。

**编辑：**
在您的情况下，这应该符合您的要求：

```
<xp:this.resources>
   <xp:styleSheet href="../../blueprint/ie.css"
      rendered="#{javascript:context.getUserAgent().isIE(0,7)}"
      media="screen, projection">
   </xp:styleSheet>
</xp:this.resources> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T08:25:14.517

Xpage 主题将非常适合此。note 安装中包含一个示例。

转到 C:\ **Notes 目录**\xsp\nsf\themes

复制 webStandard.theme，重命名为 webStandard。**xml**并在您选择的编辑器中打开，这将向您展示许多主题可以做什么的示例。应用属性、添加资源、通过表达式计算这些等。

片段：

```
 <resource rendered="#{javascript:context.isDirectionRTL()}">
        <content-type>text/css</content-type>
        <href>/.ibmxspres/global/theme/webstandard/xspRTL.css</href>
    </resource>

    <!-- IE Specific -->
    <resource rendered="#{javascript:context.getUserAgent().isIE(0,6)}">
        <content-type>text/css</content-type>
        <href>/.ibmxspres/global/theme/webstandard/xspIE06.css</href>
    </resource>
    <resource rendered="#{javascript:context.getUserAgent().isIE(7,8)}">
        <content-type>text/css</content-type>
        <href>/.ibmxspres/global/theme/webstandard/xspIE78.css</href>
    </resource> 
```

# delphi - GDI 对象还是用户对象？

> ID：10907405
> 
> 赞同：0
> 
> 时间：2012-06-06T02:19:03.597
> 
> 标签：delphi, windows-7, delphi-2009, popupmenu

我有一个允许用户打开多个窗口/模块的应用程序。每个模块都有自己的弹出菜单，其中一些是在创建表单时在运行时创建的，一些是设计时间的，每个模块中有很多，一些在我右键单击表单时使用，一些在工具按钮中使用.

我遇到的问题是我打开了很多窗口，当我右键单击访问弹出菜单时，生成的菜单变得混乱，我的意思是，它没有显示正确的标签。有时它会显示所有“另存为..”或我需要显示的任何其他标签。我想解释这一点的最简单方法是向您展示菜单的屏幕截图

![普通菜单](../Images/532fb1febf4e219a7be5347043577e96.png)

![不正确的菜单](../Images/a9c6d3a6a9d108577669853f32c674d1.png)

![再次错误的菜单](../Images/901f71ff44b78dfc66c791a1e89974ea.png)

这是 GDI/用户对象问题吗？如果是这样，我该如何解决这个问题？我尝试增加我的 GDI 并使用对象限制作为测试，但仍然遇到这个问题。如果我关闭一两个窗口，问题就会解决；但是，我不能要求我的用户限制应用程序中打开的窗口数量。使用 Windows 任务管理器检查显示，在发生此问题时，我的应用程序正在使用 4,312 个用户对象和 5,570 个 GDI 对象和 437 个句柄。

# php - 正则表达式 PHP preg_match_all

> ID：10907408
> 
> 赞同：0
> 
> 时间：2012-06-06T02:19:38.633
> 
> 标签：php, arrays, preg-match-all

我是一个自以为是的 PHP 初学者，我还在学习正则表达式。这是我遇到的一个问题`preg_match_all`和数组

我的数组具有以下信息：

```
;;CARLOS||ANDREW||STEPH||SUE||JUDY||HAROLD||JAMES||KATIE||JESSICA;; 
```

我要做的是单独显示每个名称，大约有 250 个不同的名称，数组总是以 ;; 开头 并且总是以;;结尾 所以这是我的问题，首先我的数组加载正常，但只有名字：

```
 preg_match_all('/^(.+?)\|\|/', $body, $part);
    foreach ($part[1] as $part){
    print_r($part); 
```

结果是`;;CARLOS`

巨大的名字列表在哪里`$body`（包含 250 多个名字的数组）。

期望的结果：

```
CARLOS
ANDREW
STEPH
JUDY
HAROLD
JAMES
KATIE
JESSICA 
```

请理解我无法更改输入数组，它就是这样。所以基本上在第一个数组上我已经加载了整个列表然后我需要将它打破 | 人物。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T02:26:01.783

这里不需要使用正则表达式。[`explode`](http://php.net/manual/en/function.explode.php)并且[`trim`](http://php.net/manual/en/function.trim.php)会正常工作。

```
$str = trim($body, ";");    // Remove semi-colons
$arr = explode("||", $str); // Return array of strings delimited by double pipes

print_r($arr); 
```

**输出**

```
Array
(
    [0] => CARLOS
    [1] => ANDREW
    [2] => STEPH
    [3] => SUE
    [4] => JUDY
    [5] => HAROLD
    [6] => JAMES
    [7] => KATIE
    [8] => JESSICA
) 
```

[见行动。](http://codepad.org/xac42hTm)

如果你想要你*想要的结果*，那么[`implode`](http://php.net/manual/en/function.implode.php)上面的输出。

```
echo implode(" ", $arr);
// Outputs: CARLOS ANDREW STEPH SUE JUDY HAROLD JAMES KATIE JESSICA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:26:38.060

```
$list = explode('||',trim($list,';')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T02:23:32.767

`;;CARLOS||`是可用的最小匹配，这正是您要求正则表达式引擎执行的操作。试试这个正则表达式：

```
preg_match_all('/(?<=\|\||;;)(.+?)(?=\|\||;;)/', $body, $part);

print_r($part[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T02:27:45.620

我会`explode()`改用。

```
<?php

$string=";;CARLOS||ANDREW||STEPH||SUE||JUDY||HAROLD||JAMES||KATIE||JESSICA;;";

$names=explode("||", substr($string,2,strlen($string)-4));

print_r($names); 
```

给我们：

```
Array
(
    [0] => CARLOS
    [1] => ANDREW
    [2] => STEPH
    [3] => SUE
    [4] => JUDY
    [5] => HAROLD
    [6] => JAMES
    [7] => KATIE
    [8] => JESSICA
) 
```

# svn - 首次结帐后出现 SVN 错误

> ID：10907417
> 
> 赞同：0
> 
> 时间：2012-06-06T02:20:44.037
> 
> 标签：svn, revert, svn-checkout

第一次结帐后，我使用“svn status”，它显示奇怪的错误（2行内容相同）：

```
!       W_DELIVERABLES/20110715/ソースコード_20110715.zip
!       W_DELIVERABLES/20110715/ソースコード_20110715.zip 
```

然后我尝试还原：

```
svn revert -R . 
```

它显示错误：

```
svn: Error restoring text for 'trunk/W_DELIVERABLES/20110715/ソースコード_20110715.zip' 
```

我尝试重新结帐多次，同样出现错误。我不明白为什么在第一次结帐后出现错误。我该如何解决？

谢谢！

编辑：（作为 MattL 的回答）如果我使用：

```
svn remove W_DELIVERABLES/20110715/ソースコード_20110715.zip 
```

然后错误显示为：

```
!       W_DELIVERABLES/20110715/ソースコード_20110715.zip
D       W_DELIVERABLES/20110715/ソースコード_20110715.zip 
```

我仍然无法对其执行任何还原、更新、提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:49:28.580

尝试

```
svn remove W_DELIVERABLES/20110715/ソースコード_20110715.zip
svn update
svn commit 
```

似乎该文件受版本控制，但 svn 无法再找到它。'svn remove' 应该从版本控制中删除文件，svn 将不再关心它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:14:50.293

你可能有更好的运气

```
svn remove W_DELIVERABLES/20110715/ソースコード_20110715.zip --force 
```

正如它所说， --force 将强制执行操作，您可以将其应用于文件夹，以便删除其下的所有文件。

# amazon-ec2 - 如何检查应用程序在 AWS EC2 实例中运行

> ID：10907418
> 
> 赞同：15
> 
> 时间：2012-06-06T02:20:48.073
> 
> 标签：amazon-ec2, amazon-web-services, instance

如何检查我的应用程序运行的平台、AWS EC2 实例、Azure 角色实例和非云系统？现在我这样做：

```
if(isAzure())
{
    //run in Azure role instance
}
else if(isAWS())
{
   //run in AWS EC2 instance
}
else
{
   //run in the non-cloud system
}

//checked whether it runs in AWS EC2 instance or not.
bool isAWS()
{
  string url = "http://instance-data";
  try
  {
     WebRequest req = WebRequest.Create(url);
     req.GetResponse();
     return true;
  }
  catch
  {
     return false;
  }  
} 
```

但是当我的应用程序在非云系统（如本地 Windows 系统）中运行时，我遇到了一个问题。执行 isAWS() 方法时它变得非常缓慢。代码“req.GetResponse()”需要很长时间。所以我想知道我该如何处理它？请帮我！提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-12T20:53:14.980

更好的方法是请求获取实例元数据。

从[AWS 文档](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html)：

> 要从正在运行的实例中查看所有类别的实例元数据，请使用以下 URI：
> 
> `http://169.254.169.254/latest/meta-data/`
> 
> 在 Linux 实例上，您可以使用 cURL 等工具，也可以使用 GET 命令，例如：
> 
> `PROMPT> GET http://169.254.169.254/latest/meta-data/`

这是一个使用 Python Boto 包装器的示例：

```
from boto.utils import get_instance_metadata

m = get_instance_metadata()

if len(m.keys()) > 0:
    print "Running on EC2"

else:
    print "Not running on EC2" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T01:54:21.327

我认为您最初的想法非常好，但无需提出网络请求。只需尝试查看名称是否解析（在 python 中）：

```
def is_ec2():
    import socket
    try:
        socket.gethostbyname('instance-data.ec2.internal.')
        return True
    except socket.gaierror:
        return False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T22:45:45.547

正如您所说，您的桌面上的 WebRequest.Create() 调用很慢，因此您确实需要检查网络流量（使用[Netmon](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=4865)）来实际确定什么需要很长时间。这个请求打开连接，连接到目标服务器，下载内容然后关闭连接，所以很高兴知道这段时间在哪里。

此外，如果您只想知道是否有任何 URL（在 Azure、EC2 或任何其他 Web 服务器上运行且工作正常，您可以请求仅使用以下方法下载标头）

```
string URI = "http://www.microsoft.com";
HttpWebRequest  req = (HttpWebRequest)WebRequest.Create(URI);
req.Method = WebRequestMethods.Http.Head;
var response = req.GetResponse();
int TotalSize = Int32.Parse(response.Headers["Content-Length"]);
// Now you can parse the headers for 200 OK and know that it is working. 
```

您也可以只使用 GET 一个范围的数据而不是完整的数据来加快调用：

```
HttpWebRequest myHttpWebReq =(HttpWebRequest)WebRequest.Create("http://www.contoso.com");
myHttpWebReq.AddRange(-200, ContentLength); // return first 0-200 bytes
//Now you can send the request and then parse date for headers for 200 OK 
```

上述任何一种方法都可以更快地找到您的网站正在运行的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-17T20:11:01.797

在 ec2 Ubuntu 实例上，该文件`/sys/hypervisor/uuid`存在并且其前三个字符是“ec2”。我喜欢使用它，因为它不依赖外部服务器。

# java - Eclipse Tutorials哪里有好的Xj3D？

> ID：10907419
> 
> 赞同：2
> 
> 时间：2012-06-06T02:21:04.650
> 
> 标签：java, eclipse, 3d, java-3d

这似乎是一个愚蠢的问题，但有谁知道哪里有设置和使用 Xj3D 和 Eclipse 的“好”教程？我去过 www.xj3d.org 但那里的内容太少了，那里的内容我无法工作并实际显示任何内容。我知道我做错了某事或所有事情，如果我使用它，我的公司会更喜欢（为什么？我不知道，因为我是整个公司中唯一使用它的人，但它就是这样）。

提前致谢，JH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:54:19.050

这就是我在 Eclipse 中设置 Xj3D 的方式：

1.  从此处下载 .zip 文件：

    *   [http://www.java.net/node/706300](http://www.java.net/node/706300)
2.  将 .jar 文件提取到文件夹

3.  打开日食

4.  打开首选项 -> Java -> 构建路径 -> 用户库

5.  单击新建并将其命名为“X3DModelLoader”

6.  点击“X3DModelLoader”

7.  单击添加 JAR...

8.  找到刚才下载的jar文件到一个文件夹

然后你应该全部设置好，你需要做的就是确保库在你的项目的构建路径中，然后你就准备好了！

以下是一些帮助您入门的代码：

```
package com;

import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Frame;
import java.awt.GraphicsConfiguration;
import java.util.Enumeration;

import javax.media.j3d.Alpha;
import javax.media.j3d.Appearance;
import javax.media.j3d.Background;
import javax.media.j3d.BoundingSphere;
import javax.media.j3d.BranchGroup;
import javax.media.j3d.Canvas3D;
import javax.media.j3d.DirectionalLight;
import javax.media.j3d.RotationInterpolator;
import javax.media.j3d.Shape3D;
import javax.media.j3d.Transform3D;
import javax.media.j3d.TransformGroup;
import javax.media.j3d.ViewPlatform;
import javax.vecmath.Color3f;
import javax.vecmath.Point3d;
import javax.vecmath.Vector3d;
import javax.vecmath.Vector3f;

import com.interactivemesh.j3d.interchange.ext3d.XModelLoader;
import com.microcrowd.loader.java3d.max3ds.Loader3DS;
import com.sun.j3d.loaders.Scene;
import com.sun.j3d.loaders.objectfile.ObjectFile;
import com.sun.j3d.utils.applet.MainFrame;
import com.sun.j3d.utils.geometry.ColorCube;
import com.sun.j3d.utils.universe.SimpleUniverse;
import com.sun.j3d.utils.universe.ViewingPlatform;

public class ModelLoaderExample extends Applet
{
    public ModelLoaderExample()
    {
        setLayout(new BorderLayout());
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas = new Canvas3D(config);
        add("Center", canvas);

        BranchGroup content = getScene();
        content.compile();

        SimpleUniverse universe = new SimpleUniverse(canvas);
        universe.getViewingPlatform().setNominalViewingTransform();
        universe.addBranchGraph(content);
    }

    public BranchGroup getScene()
    {
        BranchGroup group = new BranchGroup();

        XModelLoader loader = new XModelLoader();
        loader.setFlags(ObjectFile.LOAD_ALL);
        loader.setBasePath("/my/base/path");

        Scene scene = null;

        try
        {
            scene = loader.load("/my/base/path/myObject.x3d");

        }catch(Exception e){e.printStackTrace();}

        group.addChild(scene.getSceneGroup());

        Background background = new Background(0.0f, 1.0f, 1.0f);
        background.setApplicationBounds(new BoundingSphere());
        group.addChild(background);

        return group;
    }

    public static void main(String args[])
    {
        Frame frame = new MainFrame(new ModelLoaderExample(), 256, 256);
    }
} 
```

# maven - 安装hoop时如何配置maven

> ID：10907422
> 
> 赞同：1
> 
> 时间：2012-06-06T02:22:31.823
> 
> 标签：maven, configuration, hadoop, installation

我正在尝试在[http://cloudera.github.com/hoop/docs/latest/ServerSetup.html](http://cloudera.github.com/hoop/docs/latest/ServerSetup.html)之后在 ubuntu 12.04 中构建安装箍，但是，当我这样做时，问题出现了`mvn clean package -Dmaven.test.skip=true site assembly:single`，箍的默认配置是 post吼叫，

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.cloudera.hoop</groupId>
  <artifactId>hoop-main</artifactId>
  <version>0.1.0-SNAPSHOT</version>
  <description>Hoop Main</description>
  <name>Hoop Main</name>
  <packaging>pom</packaging>
  <url>http://github.com/cloudera/hoop</url>

  <licenses>
    <license>
      <name>The Apache Software License, Version 2.0</name>
      <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
    </license>
  </licenses>

  <organization>
    <name>Cloudera</name>
    <url>http://www.cloudera.com</url>
  </organization>

  <scm>
    <connection>scm:git:git@github.com:cloudera/hoop.git</connection>
    <url>https://github.com/cloudera/hoop</url>
  </scm>

  <distributionManagement>
    <repository>
      <id>cdh.releases.repo</id>
      <url>https://repository.cloudera.com/content/repositories/releases</url>
      <name>CDH Releases Repository</name>
    </repository>
    <snapshotRepository>
      <id>cdh.snapshots.repo</id>
      <url>https://repository.cloudera.com/content/repositories/snapshots</url>
      <name>CDH Snapshots Repository</name>
    </snapshotRepository>
  </distributionManagement>

  <modules>
    <module>hoop-project</module>
    <module>hoop-testng</module>
    <module>hoop-server</module>
    <module>hoop-client</module>
    <module>hoop-webapp</module>
    <module>hoop-docs</module>
    <module>hoop-distro</module>
  </modules>

  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-enforcer-plugin</artifactId>
          <version>1.0</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>2.2-beta-3</version>
        </plugin>
        <plugin>
          <groupId>org.apache.rat</groupId>
          <artifactId>apache-rat-plugin</artifactId>
          <version>0.7</version>
        </plugin>
      </plugins>
    </pluginManagement>

    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-enforcer-plugin</artifactId>
        <inherited>false</inherited>
        <configuration>
          <rules>
            <requireMavenVersion>
              <version>[3.0.0,)</version>
            </requireMavenVersion>
            <requireJavaVersion>
              <version>1.6</version>
            </requireJavaVersion>
            <requireOS>
              <family>unix</family>
            </requireOS>
          </rules>
        </configuration>
        <executions>
          <execution>
            <id>clean</id>
            <goals>
              <goal>enforce</goal>
            </goals>
            <phase>pre-clean</phase>
          </execution>
          <execution>
            <id>default</id>
            <goals>
              <goal>enforce</goal>
            </goals>
            <phase>validate</phase>
          </execution>
          <execution>
            <id>site</id>
            <goals>
              <goal>enforce</goal>
            </goals>
            <phase>pre-site</phase>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <executions>
          <execution>
            <phase>post-site</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <attach>false</attach>
          <descriptors>
            <descriptor>maven/assembly-empty.xml</descriptor>
          </descriptors>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.rat</groupId>
        <artifactId>apache-rat-plugin</artifactId>
        <configuration>
          <excludes>
            <exclude>**</exclude>
          </excludes>
        </configuration>
      </plugin>
    </plugins>
  </build>

</project> 
```

输出粘贴在下面，

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] Hoop Project POM
[INFO] Hoop TestNG
[INFO] Hoop Server
[INFO] Hoop WebApp
[INFO] Hoop Client
[INFO] Hoop Docs
[INFO] Hoop Distro
[INFO] Hoop Main
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hoop Project POM 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (clean) @ hoop-project ---
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ hoop-project ---
[INFO] Deleting file set: /home/pc/hoop/hoop-project/target (included: [**], excluded: [])
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (default) @ hoop-project ---
[INFO] 
[INFO] --- maven-enforcer-plugin:1.0:enforce (site) @ hoop-project ---
[INFO] 
[INFO] --- maven-site-plugin:3.0:site (default-site) @ hoop-project ---
[INFO] configuring report plugin org.apache.maven.plugins:maven-project-info-reports-plugin:2.3.1
[INFO] Relativizing decoration links with respect to project URL: http://github.com/cloudera/hoop
[INFO] Rendering site with org.apache.maven.skins:maven-default-skin:jar:1.0 skin.
[INFO] Generating "Source Repository" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "About" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Distribution Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependencies" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Plugin Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Continuous Integration" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Summary" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Mailing Lists" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Convergence" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Plugins" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Team" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project License" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Issue Tracking" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] 
[INFO] --- maven-assembly-plugin:2.2-beta-3:single (default-cli) @ hoop-project ---
[INFO] Reading assembly descriptor: maven/assembly-empty.xml
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hoop TestNG 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ hoop-testng ---
[INFO] Deleting file set: /home/pc/hoop/hoop-testng/target (included: [**], excluded: [])
[INFO] 
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ hoop-testng ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 3 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ hoop-testng ---
[INFO] Compiling 4 source files to /home/pc/hoop/hoop-testng/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ hoop-testng ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/pc/hoop/hoop-testng/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ hoop-testng ---
[INFO] Not compiling test sources
[INFO] 
[INFO] --- maven-surefire-plugin:2.6:test (default-test) @ hoop-testng ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ hoop-testng ---
[INFO] Building jar: /home/pc/hoop/hoop-testng/target/hoop-testng-0.1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-site-plugin:3.0:site (default-site) @ hoop-testng ---
[INFO] configuring report plugin org.apache.maven.plugins:maven-project-info-reports-plugin:2.3.1
[INFO] Relativizing decoration links with respect to project URL: http://github.com/cloudera/hoop/hoop-testng
[INFO] Rendering site with org.apache.maven.skins:maven-default-skin:jar:1.0 skin.
[INFO] Generating "Source Repository" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "About" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Distribution Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependencies" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Plugin Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Continuous Integration" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Summary" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Mailing Lists" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Convergence" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Plugins" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Team" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project License" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Issue Tracking" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] 
[INFO] --- maven-assembly-plugin:2.2-beta-3:single (default-cli) @ hoop-testng ---
[INFO] Reading assembly descriptor: maven/assembly-empty.xml
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hoop Server 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ hoop-server ---
[INFO] Deleting file set: /home/pc/hoop/hoop-server/target (included: [**], excluded: [])
[INFO] 
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ hoop-server ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] Copying 2 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ hoop-server ---
[INFO] Compiling 79 source files to /home/pc/hoop/hoop-server/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ hoop-server ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 7 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ hoop-server ---
[INFO] Not compiling test sources
[INFO] 
[INFO] --- maven-surefire-plugin:2.6:test (default-test) @ hoop-server ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ hoop-server ---
[INFO] Building jar: /home/pc/hoop/hoop-server/target/hoop-server-0.1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-site-plugin:3.0:site (default-site) @ hoop-server ---
[INFO] configuring report plugin org.apache.maven.plugins:maven-project-info-reports-plugin:2.3.1
[INFO] Relativizing decoration links with respect to project URL: http://github.com/cloudera/hoop/hoop-server
[INFO] Rendering site with org.apache.maven.skins:maven-default-skin:jar:1.0 skin.
[INFO] Generating "Source Repository" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "About" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Distribution Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependencies" report    --- maven-project-info-reports-plugin:2.3.1
[WARNING] The repository url 'http://repository.codehaus.org/' is invalid - Repository 'Codehaus repository' will be blacklisted.
[INFO] Generating "Plugin Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Continuous Integration" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Summary" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Mailing Lists" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Convergence" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Plugins" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Team" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project License" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Issue Tracking" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] 
[INFO] >>> maven-javadoc-plugin:2.7:javadoc (default) @ hoop-server >>>
[INFO] 
[INFO] <<< maven-javadoc-plugin:2.7:javadoc (default) @ hoop-server <<<
[INFO] 
[INFO] --- maven-javadoc-plugin:2.7:javadoc (default) @ hoop-server ---
[INFO] The goal 'org.apache.maven.plugins:maven-javadoc-plugin:2.7:javadoc' has not be previously called for the project: 'com.cloudera.hoop:hoop-testng:jar:0.1.0-SNAPSHOT'. Trying to invoke it...
[INFO] The goal 'org.apache.maven.plugins:maven-javadoc-plugin:2.7:javadoc' has not be previously called for the project: 'com.cloudera.hoop:hoop-docs:jar:0.1.0-SNAPSHOT'. Trying to invoke it...
[ERROR] MavenInvocationException: Error when invoking Maven, consult the invoker log file: /home/pc/hoop/hoop-server/target/invoker/maven-javadoc-plugin1321551293.txt
[ERROR] Error fetching link: /home/pc/hoop/hoop-webapp/target/site/apidocs/package-list. Ignored it.
[ERROR] Error fetching link: /home/pc/hoop/hoop-docs/target/site/apidocs/package-list. Ignored it.
[ERROR] Error fetching link: /home/pc/hoop/hoop-distro/target/site/apidocs/package-list. Ignored it.
[INFO] 
5 warnings
[WARNING] Javadoc Warnings
[WARNING] /home/pc/hoop/hoop-server/src/main/java/com/cloudera/lib/server/Server.java:684: warning - @return tag has no arguments.
[WARNING] /home/pc/hoop/hoop-server/src/main/java/com/cloudera/lib/server/Server.java:256: warning - Tag @link: can't find serverStatusChange(Status, Status) in com.cloudera.lib.server.Service
[WARNING] /home/pc/hoop/hoop-server/src/main/java/com/cloudera/lib/lang/RunnableCallable.java:68: warning - @return tag cannot be used in method with void return type.
[WARNING] /home/pc/hoop/hoop-server/src/main/java/com/cloudera/hoop/FsPathParam.java:41: warning - @returns is an unknown tag.
[WARNING] /home/pc/hoop/hoop-server/src/main/java/com/cloudera/hoop/Hoop.java:455: warning - @param argument "override," is not a parameter name.
[INFO] 
[INFO] --- maven-project-info-reports-plugin:2.3.1:dependencies (default) @ hoop-server ---
[INFO] 
[INFO] --- maven-assembly-plugin:2.2-beta-3:single (default-cli) @ hoop-server ---
[INFO] Reading assembly descriptor: maven/assembly-empty.xml
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hoop WebApp 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ hoop-webapp ---
[INFO] Deleting file set: /home/pc/hoop/hoop-webapp/target (included: [**], excluded: [])
[INFO] 
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ hoop-webapp ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/pc/hoop/hoop-webapp/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ hoop-webapp ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ hoop-webapp ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/pc/hoop/hoop-webapp/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ hoop-webapp ---
[INFO] Not compiling test sources
[INFO] 
[INFO] --- maven-surefire-plugin:2.6:test (default-test) @ hoop-webapp ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-war-plugin:2.1:war (default-war) @ hoop-webapp ---
[INFO] Packaging webapp
[INFO] Assembling webapp [hoop-webapp] in [/home/pc/hoop/hoop-webapp/target/hoop-webapp-0.1.0-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/home/pc/hoop/hoop-webapp/src/main/webapp]
[INFO] Webapp assembled in [52 msecs]
[INFO] Building war: /home/pc/hoop/hoop-webapp/target/hoop-webapp-0.1.0-SNAPSHOT.war
[INFO] WEB-INF/web.xml already added, skipping
[INFO] 
[INFO] --- maven-site-plugin:3.0:site (default-site) @ hoop-webapp ---
[INFO] configuring report plugin org.apache.maven.plugins:maven-project-info-reports-plugin:2.3.1
[INFO] Relativizing decoration links with respect to project URL: http://github.com/cloudera/hoop/hoop-webapp
[INFO] Rendering site with org.apache.maven.skins:maven-default-skin:jar:1.0 skin.
[INFO] Generating "Source Repository" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "About" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Distribution Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependencies" report    --- maven-project-info-reports-plugin:2.3.1
[WARNING] The repository url 'http://www.datanucleus.org/downloads/maven2' is invalid - Repository 'datanucleus' will be blacklisted.
[WARNING] The repository url 'https://maven-repository.dev.java.net/nonav/repository' is invalid - Repository 'java.net' will be blacklisted.
[INFO] Generating "Plugin Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Continuous Integration" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Summary" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Mailing Lists" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Convergence" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Plugins" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Team" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project License" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Issue Tracking" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] 
[INFO] --- maven-assembly-plugin:2.2-beta-3:single (default-cli) @ hoop-webapp ---
[INFO] Reading assembly descriptor: maven/assembly-empty.xml
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hoop Client 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ hoop-client ---
[INFO] Deleting file set: /home/pc/hoop/hoop-client/target (included: [**], excluded: [])
[INFO] 
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ hoop-client ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/pc/hoop/hoop-client/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ hoop-client ---
[INFO] Compiling 3 source files to /home/pc/hoop/hoop-client/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ hoop-client ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/pc/hoop/hoop-client/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ hoop-client ---
[INFO] Not compiling test sources
[INFO] 
[INFO] --- maven-surefire-plugin:2.6:test (default-test) @ hoop-client ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ hoop-client ---
[INFO] Building jar: /home/pc/hoop/hoop-client/target/hoop-client-0.1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-site-plugin:3.0:site (default-site) @ hoop-client ---
[INFO] configuring report plugin org.apache.maven.plugins:maven-project-info-reports-plugin:2.3.1
[INFO] Relativizing decoration links with respect to project URL: http://github.com/cloudera/hoop/hoop-client
[INFO] Rendering site with org.apache.maven.skins:maven-default-skin:jar:1.0 skin.
[INFO] Generating "Source Repository" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "About" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Distribution Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependencies" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Plugin Management" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Continuous Integration" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Summary" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Mailing Lists" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Dependency Convergence" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Plugins" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project Team" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Project License" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] Generating "Issue Tracking" report    --- maven-project-info-reports-plugin:2.3.1
[INFO] 
[INFO] >>> maven-javadoc-plugin:2.7:javadoc (default) @ hoop-client >>>
[INFO] 
[INFO] <<< maven-javadoc-plugin:2.7:javadoc (default) @ hoop-client <<<
[INFO] 
[INFO] --- maven-javadoc-plugin:2.7:javadoc (default) @ hoop-client ---
[INFO] The goal 'org.apache.maven.plugins:maven-javadoc-plugin:2.7:javadoc' has not be previously called for the project: 'com.cloudera.hoop:hoop-webapp:war:0.1.0-SNAPSHOT'. Trying to invoke it...
[ERROR] MavenInvocationException: Error when invoking Maven, consult the invoker log file: /home/pc/hoop/hoop-client/target/invoker/maven-javadoc-plugin395037384.txt
[ERROR] Error fetching link: /home/pc/hoop/hoop-webapp/target/site/apidocs/package-list. Ignored it.
[ERROR] Error fetching link: /home/pc/hoop/hoop-docs/target/site/apidocs/package-list. Ignored it.
[ERROR] Error fetching link: /home/pc/hoop/hoop-distro/target/site/apidocs/package-list. Ignored it.
[INFO] 
[INFO] --- maven-project-info-reports-plugin:2.3.1:dependencies (default) @ hoop-client ---
[INFO] 
[INFO] --- maven-assembly-plugin:2.2-beta-3:single (default-cli) @ hoop-client ---
[INFO] Reading assembly descriptor: maven/assembly-hoop-client.xml
[INFO] Copying files to /home/pc/hoop/hoop-client/target/hoop-client-lib
[WARNING] Assembly file: /home/pc/hoop/hoop-client/target/hoop-client-lib is not a regular file (it may be a directory). It cannot be attached to the project build for installation or deployment.
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Hoop Docs 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.3:clean (default-clean) @ hoop-docs ---
[INFO] Deleting file set: /home/pc/hoop/hoop-docs/target (included: [**], excluded: [])
[INFO] 
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ hoop-docs ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/pc/hoop/hoop-docs/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ hoop-docs ---
[INFO] Compiling 1 source file to /home/pc/hoop/hoop-docs/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ hoop-docs ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/pc/hoop/hoop-docs/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ hoop-docs ---
[INFO] Not compiling test sources
[INFO] 
[INFO] --- maven-surefire-plugin:2.6:test (default-test) @ hoop-docs ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ hoop-docs ---
[INFO] Building jar: /home/pc/hoop/hoop-docs/target/hoop-docs-0.1.0-SNAPSHOT.jar
[INFO] 
[INFO] --- maven-site-plugin:3.0:site (default-site) @ hoop-docs ---
[INFO] configuring report plugin org.apache.maven.plugins:maven-project-info-reports-plugin:2.3.1
[INFO] Relativizing decoration links with respect to project URL: http://github.com/cloudera/hoop/hoop-docs
[INFO] Rendering site with org.apache.maven.skins:maven-stylus-skin:jar:1.2 skin.
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Hoop Project POM .................................. SUCCESS [7.496s]
[INFO] Hoop TestNG ....................................... SUCCESS [3:19.250s]
[INFO] Hoop Server ....................................... SUCCESS [4:11.171s]
[INFO] Hoop WebApp ....................................... SUCCESS [1:52.368s]
[INFO] Hoop Client ....................................... SUCCESS [4:30.761s]
[INFO] Hoop Docs ......................................... FAILURE [0.509s]
[INFO] Hoop Distro ....................................... SKIPPED
[INFO] Hoop Main ......................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 14:02.178s
[INFO] Finished at: Tue Jun 05 17:45:37 CST 2012
[INFO] Final Memory: 53M/724M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.0:site (default-site) on project hoop-docs: Error during site generation: error in opening zip file -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possib 
```

# gwt - 当使用 gwtquery 单击另一个对象并拖放时，jquery 开始拖动对象

> ID：10907424
> 
> 赞同：0
> 
> 时间：2012-06-06T02:22:58.597
> 
> 标签：gwt, draggable, gwtquery

在[这篇文章](https://stackoverflow.com/questions/3672222/jquery-start-dragging-object-when-clicked-on-the-other)中，询问了如何在单击另一个对象时立即启动拖动操作。我有同样的问题，但在 gwtquery 和可拖动插件的上下文中。

在参考帖子中，要拖动的新项目被移动到点击点下方，并且原始的鼠标按下事件被发送到它。是否可以在 gwt 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:47:06.300

你应该能够做这样的事情：

```
$("#myDraggable").as(Draggable).draggable();
$("#myOtherDiv").mousedown(new Function(){
@Override
public boolean f(Event e) {
    //position your draggable first
    //...
    $("#myDraggable").trigger(e);
    return false;
}
}); 
```

但是方法 trigger(Event e) 在 GQuery 中尚不存在。我打开一个涵盖该问题的问题：[http ://code.google.com/p/gwtquery/issues/detail?id=139](http://code.google.com/p/gwtquery/issues/detail?id=139)

# android - 有什么办法可以在 Android 2.3 后结束通话吗？

> ID：10907426
> 
> 赞同：4
> 
> 时间：2012-06-06T02:23:11.847
> 
> 标签：android, telephony

我正在尝试开发类似于 AutoAnswer 的东西，但它也会在通知广播接收器时自动挂断。我整天都在阅读有关此问题的其他 stackoverflow 问题，似乎权限`MODIFY_PHONE_STATE`仅限于系统应用程序，但是，有些帖子说使用 endCall(); 不需要此权限。

**我的问题有两个部分**：

1.  `endCall()`还能用吗？自 Android 2.3 以来，它是否曾在任何地方使用过？
2.  如果是，我需要帮助使它工作，因为现在它不工作。我`ITelephony.aidl`从[http://code.google.com/p/autoanswer/source/browse/trunk/src/com/#com/android/internal/telephony](http://code.google.com/p/autoanswer/source/browse/trunk/src/com/#com/android/internal/telephony)下载 并将其放入一个包中。我是新用户，不能发图片。

这是我的文件树在 netbeans 中的样子：
![在此处输入图像描述](../Images/d7d9b1b712d322e312a0decc6989b172.png)

这是在我的广播接收器中运行的代码。之前已在此处多次发布此问题的解决方案，但我仍然无法使其正常工作：/

```
 ITelephony telephonyService;
    TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);  
    try {
        Class c = Class.forName(telephony.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        telephonyService = (ITelephony) m.invoke(telephony);
        telephonyService.endCall();
    } 
    catch (Exception e) {
            //TODO: some exception handling
    } 
```

查看日志，我看到了这个错误：

```
[PhoneIntfMgr] CMD_END_CALL: no call to hang up 
```

编辑：我是 android 开发的新手，似乎找不到 android 应用程序的控制台输出——比如调用 e.printStackTrace() 但我确实让 Toast 在 catch 块内显示一些文本，如下所示：

```
catch (Exception e) {
       Toast toast = Toast.makeText(context, "IN CATCH BLOCK ", Toast.LENGTH_LONG);
       toast.show();
        e.printStackTrace();
    } 
```

但是屏幕上什么都没有显示。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:58:41.057

您可以使用此代码：

```
telephonyManager.listen(new PhoneStateListener() {

            @Override
            public void onCallStateChanged(int state, String incomingNumber) {
                switch (state) {
                case TelephonyManager.CALL_STATE_IDLE:
                    /* your code */
                    break;
                case TelephonyManager.CALL_STATE_OFFHOOK:
                    Toast.makeText(context.getApplicationContext(), "OFFHOOK",
                            Toast.LENGTH_SHORT).show();
                    setResultData(null);
                    break;
                case TelephonyManager.CALL_STATE_RINGING:
                    /* your code */
                    break;
                }
                // super.onCallStateChanged(state, incomingNumber);
            }

        }, PhoneStateListener.LISTEN_CALL_STATE); 
```

当您要进入 OFFHOOK 状态时，您会看到一个显示“OFFHOOK”的 toast，然后`setResultData(null);`结束通话。

# python - pyramid_beaker httponly 和安全 cookie

> ID：10907429
> 
> 赞同：0
> 
> 时间：2012-06-06T02:23:31.037
> 
> 标签：python, pyramid, beaker

在收到安全报告后，我被要求提供一个安全会话 cookie。

我正在使用 pyramid_beaker.session_factory_from_settings() 并且很幸运（？）能够设置 httponly `('session.httponly', True)`，但`('session.secure', True)`不提供第二个选项。

有可能做到吗？

指向不同`session.*`设置的指针也非常受欢迎。

*编辑：*我在`beaker.utils.coerce_session_params()`

谢谢。

*编辑：*我想我有问题。我在开发中使用：

```
 http_server = simple_server.make_server('0.0.0.0', no_port, app)
        http_server.serve_forever()
```

，所以没有发送 cookie，因为我不在 HTTPS 中。我需要为此设置一个 HTTPS 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T04:42:57.247

抱歉，这里有问题吗？听起来您回答了原来的问题，现在正在考虑让您的开发设置在 https 下工作？就我个人而言，我倾向于只在我的登台服务器（nginx 处理证书的地方）上担心这一点，但在我本地的 development.ini 中，我并没有使 cookie 安全。

# session - 如何基于 REST API 获取短暂的 session_key？

> ID：10907432
> 
> 赞同：0
> 
> 时间：2012-06-06T02:24:20.833
> 
> 标签：session, facebook-rest-api

我想找到一种方法让基于 REST API 的 session_key 过期来测试我的桌面应用程序。如何使基于 REST API 的 session_key 在短时间内过期？如何获得基于 REST API 的短期 session_key？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:20:41.997

The deprecated REST API endpoints which accepted a session key were all updated to use access tokens. There should be no need to use session_key anywhere in your code - thus the current Authentication documentation should be correct: [https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

# delphi - 是否有任何使用 IUPnPRegistrar.RegisterDevice 的源代码示例？

> ID：10907434
> 
> 赞同：1
> 
> 时间：2012-06-06T02:24:50.660
> 
> 标签：delphi, upnp

我正在 Windows uPNP 上进行测试。IUPnPRegistrar 有 RegisterDevice 和 UnregisterDevice 方法。如何在 Windows 中使用 RegisterDevice 将设备注册到 uPNP 服务？我在谷歌搜索中找不到任何示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:22:57.160

1.  [UPnP 调光设备示例](http://code.msdn.microsoft.com/windowsdesktop/Dimmer-Device-2274e56d)
2.  [UPnP 设备注册示例](http://code.msdn.microsoft.com/windowsdesktop/Register-Device-d0cbfba2)

# android - Android 开发 - Eclipse / AVD 可以无错误地运行吗？

> ID：10907437
> 
> 赞同：0
> 
> 时间：2012-06-06T02:25:35.340
> 
> 标签：android, sdk, logcat

我是 Android 开发和 Eclipse 的新手。我收到了一个 Android 应用程序，并被要求对其进行一些简单的更改。我可以构建项目并在模拟器中运行它，但是我在 Eclipse 的 LogCat 窗口中看到了一些错误。

我把收到的应用程序放在一边，按照 developer.android.com 上的 Hello World 教程编写了 Hello World 应用程序。使用这个简单的应用程序，我惊讶地在 LogCat 窗口中看到许多错误和堆栈转储。我关闭了 Eclipse 并重新启动它。等待 Eclipse 完成初始化后，LogCat 为空。然后我通过单击运行按钮启动了 Hello World 应用程序。一段时间后，LogCat 中出现了条目，包括许多错误。

使用从教程复制的如此简单的应用程序，我猜测错误来自开发环境和/或虚拟设备，而不是来自应用程序本身，但我希望能够无错误地运行应用程序。

能够在 AVD 上从 Eclipse 运行 Android 应用程序而没有任何错误是合理的期望吗？还是开发环境记录许多错误并转储堆栈跟踪的最先进技术，即使一切都“正常”运行？

如果是合理的，我会追查每一个错误，直到我清理了我的环境和应用程序。我更喜欢这个，因为我会知道如果在我继续开发时出现错误，它们来自我的应用程序并且必须修复。另一方面，我不能花几个月的时间来开发 Eclipse 和 Android SDK。如果我必须学会忍受充满错误消息的日志，除非发生崩溃，否则我会忽略它们。

请注意，Hello World 应用程序按预期运行 - 尽管出现错误，它似乎仍在工作。

我正在运行 Eclipse Indigo SR2 和 Android SDK ??? （我没有看到 SDK 的版本号 - 安装程序是 r18 并且 SDK 管理器说没有可用的更新）在 64 位 Windows 7 Professional 上。我正在使用 Android 4.0.3 进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:37:41.623

使用任一：

```
adb com.your.package:v 
```

或在侧面按钮上的 log cat 中（您可能需要通过在 log cat 中按下带有两个矩形的按钮使其可见）按加号按钮，然后添加应用程序过滤器

# regex - 如何在第 9 个反向引用之后对正则表达式进行分组？

> ID：10907440
> 
> 赞同：38
> 
> 时间：2012-06-06T02:26:10.317
> 
> 标签：regex, notepad++, regex-group

好的，所以我试图在记事本 ++ 中对第 9 个反向引用进行分组。wiki 说我可以使用组命名来超越第 9 个参考。但是，我似乎无法正确使用语法来进行匹配。为了简单起见，我只从两组开始。

**样本数据**

```
1000,1000 
```

**正则表达式。**

```
(?'a'[0-9]*),([0-9]*) 
```

根据[文档](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Regular_Expressions#Groups)，我需要执行以下操作。

```
(?<some name>...), (?'some name'...),(?(some name)...)
Names this group some name. 
```

但是，结果是它找不到我的文本。有什么建议么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-06T14:15:12.340

You can simply reference groups > 9 in the same way as those < 10

i.e $10 is the tenth group.

For (naive) example:

String:

> abcdefghijklmnopqrstuvwxyz

Regex find:

> (?:a)(b)(c)(d)(e)(f)(g)(h)(i)(j)(k)(l)(m)(n)(o)(p)

Replace:

> $10

Result:

> kqrstuvwxyz

My test was performed in Notepad++ v6.1.2 and gave the result I expected.

Update: This still works as of v7.5.6

* * *

SarcasticSully resurrected this to ask the question:

> "What if you want to replace with the 1st group followed by the character '0'?"

To do this change the replace to:

> $1\x30

Which is replacing with group 1 and the hex character `30` - which is a `0` in ascii.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-03T19:38:54.517

一个很晚的答案来帮助从谷歌登陆这里的其他人（就像我一样）。notepad++ 替换中的命名反向引用如下所示 `$+{name}`：不管什么原因。

这里与标准的正则表达式存在偏差，尽管......命名的反向引用也给出了数字。在标准正则表达式中，如果您有`(.*)(?<name> & )(.*)`，您将替换为`$1${name}$2`以获得与您开始时完全相同的行。在记事本++中，您必须使用`$1$+{name}$3`.

**示例：** 我需要为不匹配的配置清理 Visual Studio .sln 文件。我需要替换的文本如下所示：

```
 {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|Any CPU.ActiveCfg = Debug|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|Any CPU.Build.0 = Debug|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|x64.ActiveCfg = Debug|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|x64.Build.0 = Debug|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|x86.ActiveCfg = Debug|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|x86.Build.0 = Debug|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|Any CPU.ActiveCfg = Release|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|Any CPU.Build.0 = Release|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|x64.ActiveCfg = Release|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|x64.Build.0 = Release|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|x86.ActiveCfg = Release|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|x86.Build.0 = Release|Any CPU 
```

我的搜索正则表达式：

```
 ^(\s*\{[^}]*\}\.)(?<config>[a-zA-Z0-9]+\|[a-zA-Z0-9 ]+)*(\..+=\s*)(.*)$ 
```

我的替代正则表达式：

```
 $1$+{config}$3$+{config} 
```

结果：

```
 {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|Any CPU.ActiveCfg = Dev|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|Any CPU.Build.0 = Dev|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|x64.ActiveCfg = Dev|x64
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|x64.Build.0 = Dev|x64
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|x86.ActiveCfg = Dev|x86
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.Dev|x86.Build.0 = Dev|x86
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|Any CPU.ActiveCfg = QA|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|Any CPU.Build.0 = QA|Any CPU
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|x64.ActiveCfg = QA|x64
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|x64.Build.0 = QA|x64
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|x86.ActiveCfg = QA|x86
    {CDDB12FE-885F-4FB7-9724-1A4279573DE5}.QA|x86.Build.0 = QA|x86 
```

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-02T08:11:57.050

使用 \x 引用组的常用语法会将 \10 解释为对组 1 的引用，后跟 0。
您需要使用 $x 和 $10 的替代语法。

*注意：有些人似乎怀疑有任何理由拥有 10 个组。* *我有一个简单的，我想将一组名为
<name_start> *DDMMYYYY_TIME_DDMMYYYY_TIME* <name_end> 的文件重命名为 <name_start> *YYYYMMDD_TIME_YYYYMMDD_TIME* <name_end>，
并以替换我的输入匹配结束：
rename "\1" "\2\5 \4\3_\6_\9\8\7_$10" 因为 name_start 和 name_end 并不总是恒定的。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T06:47:37.373

好的，匹配没问题，您的示例在当前的 Notepad++ 中与我匹配。这是很重要的一点。**要在 Notepad++ 中使用 PCRE 正则表达式，您需要 Version >= 6.0**。

另一点是，你想在哪里使用反向引用？**我可以在 regex**中使用命名反向引用而不会出现问题，但在替换字符串中则不行。

方法

```
(?'a'[0-9]*),([0-9]*),\g{a} 
```

将匹配

```
1000,1001,1000 
```

但我不知道在替换字符串中使用命名组或组 > 9 的方法。

替换字符串中真的需要超过 9 个反向引用吗？如果您只需要超过 9 个组，但不是全部替换，则通过在组的开头添加 a来使不需要重用**非捕获组的组。**`?:`

```
(?:[0-9]*),([0-9]*),(?:[0-9]*),([0-9]*)
           group 1             group 2 
```

# c# - Visual Studio 2008 加载项无法加载外部文本文件

> ID：10907449
> 
> 赞同：1
> 
> 时间：2012-06-06T02:28:06.010
> 
> 标签：c#, visual-studio-2008, add-in

我目前正在开发一个简单的加载项，该加载项应该将版权声明插入源文件。它工作正常，但我希望版权文本存在于文本文件中。此文本文件被部署到与 dll 和 .AddIn 文件相同的文件夹中。

但是由于加载项可以安装在不同机器上的不同文件夹中，所以现在的问题是我无法弄清楚如何从加载项代码 (c#) 以编程方式获取文本文件的路径。我尝试了各种反射方法，但到目前为止都没有奏效。

如果这是不可能的或不正确的方法，请让我知道除了对版权文本进行硬编码外，我还有哪些替代方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:34:57.153

如果您的文本文件始终与 dll 位于同一文件夹中，那么我认为这个相关问题应该对您有所帮助：

[如何获取代码所在程序集的路径？](https://stackoverflow.com/questions/52797/how-do-i-get-the-path-of-the-assembly-the-code-is-in)

# vim - HTML页面上的VIM脚本：如何知道光标是否理解javascript块或html标签？

> ID：10907451
> 
> 赞同：0
> 
> 时间：2012-06-06T02:28:17.097
> 
> 标签：vim

我正在尝试制作一个评论插件，例如，当您按下`/`两次时，它将替换行首，例如`#`。

但是对于 HTML 页面，它是不同的，因为它包含标签和 javascript，我需要用`/* */`for javascript 块包围块，但是`<!-- -->`对于标签，但是我怎么知道它是 javascript 块还是只是标签？现在我只是用`&filetype`variable 来判断这个，但这还不够。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:18:43.063

有一个叫 vim 的插件`TComment`。这就是你想要的。

可以查看源码：[https ://github.com/jmartindf/vim-tcomment](https://github.com/jmartindf/vim-tcomment)

# ios - 在 iOS 中拦截文件读/写

> ID：10907453
> 
> 赞同：0
> 
> 时间：2012-06-06T02:28:35.697
> 
> 标签：ios

是否可以拦截iOS中其他应用程序的文件读/写？我想要做的是在应用程序写入文件系统时自动加密文件，但行为会根据应用程序而变化。例如，有应用程序 A 和 B（A 和 B 不是我自己的应用程序）。当 A 写入文件时加密文件但当 B 写入文件时我不加密文件。

由于在 iOS 中考虑了安全性，我知道未经用户许可我不能这样做，但问题是用户何时允许创建/安装此类应用程序。

我来自 Windows 世界，在 Windows 中我们可以制作文件系统过滤器驱动程序来做到这一点，但我认为 iOS 永远不允许安装这样的驱动程序。还有其他选择吗？

# input - 我已将 html 复选框的选中属性设置为 false，但它仍然选中

> ID：10907454
> 
> 赞同：16
> 
> 时间：2012-06-06T02:28:56.550
> 
> 标签：input, checkbox

这是我的 html 标记：

```
<input type="checkbox" checked="false"> 
```

我已将其设置`checked`为 false，但仍会检查[结果](http://jsfiddle.net/CK6ve/)

为什么会这样？如果我删除选中的属性，它将变为未选中。

实际上我想`input[type=checkbox]`在动态中插入 html 标记，并带有参数来确定是否选中

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-06T02:32:40.900

如果你指定checked，那么它就是checked；不管你说checked="false"、checked="true"、checked="checked" 还是简单的checked。

如果您不希望它被选中，则不要包含选中的属性。

```
<input type="checkbox" /> 
```

请参阅：[http ://www.w3schools.com/tags/tryit.asp?filename=tryhtml_input_checked](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_input_checked)

# jquery - JQuery：根据另一个元素改变高度

> ID：10907455
> 
> 赞同：10
> 
> 时间：2012-06-06T02:29:05.307
> 
> 标签：jquery, css

我有两个 DIV：一个 DIV 根据浏览器动态更改大小（响应式设计），我希望另一个 DIV 根据第一个 DIV 的高度修改其高度。我认为最简单的方法是使用 JQuery 动态更改高度。

我尝试了以下方法：

```
$('section#div2').css({height:$(this).css('height').replace($('section#div1 div.div1_container').height()+'px')}); 
```

但是，该代码不起作用。该工作的各种其他版本也没有。

我的问题是：如何在不更改给定元素的所有属性的情况下替换单个 CSS 属性？

编辑：这就是动态第一个 DIV 的编码方式......

首先是第一个 DIV 的容器：

```
position: relative;
padding-bottom: 50%;
padding-top: 30px; height: 0; overflow: hidden;
margin:0 0.7em 0 0.7em; 
```

然后，该容器内的内部对象（可能不相关）：

```
position:absolute;
top:0;
left:0;
width:100%;
height:100%; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T02:32:35.753

```
$('section#div2').css('height', $('section#div1').height()+'px'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T02:35:18.417

用这个：

```
$('section#div2').height($('section#div1').height()); 
```

# apache-flex - 如何在 Sprak RichEditableText 中精确控制内联图形的位置

> ID：10907459
> 
> 赞同：1
> 
> 时间：2012-06-06T02:29:31.120
> 
> 标签：apache-flex, position, alignment, flex4.5, richeditabletext

目前，我使用该属性`alignmentBaseline`来设置内联图形和文本的对齐方式，但它无法精确控制位置，看起来很奇怪。

在 HTML 中，我可以通过 CSS 属性填充或边距来控制它。我应该如何在 flex4.5 中做到这一点？

# python - Python：未找到子模块

> ID：10907460
> 
> 赞同：0
> 
> 时间：2012-06-06T02:29:36.907
> 
> 标签：python, importerror

当我尝试像这样导入时，我的 Python 无法找出子模块`reportlab.graphics.shapes`：

```
>>> from reportlab.graphics.shapes import Drawing

Traceback (most recent call last):
  File "<pyshell#14>", line 1, in <module>
    from reportlab.graphics.shapes import Drawing
ImportError: No module named shapes 
```

我已将`reportlab`包复制到**/site-packages**并且可以成功导入**模块 reportlab.graphics**。

我的 Python 版本是 2.7.3。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T08:07:34.643

正如@dan-boa 指出的那样，您可以将路径添加到模块搜索路径，但是由于您可以找到父模块，我怀疑这是您的根本问题。

您是否在另一条路径上安装了一些剩余的模块？您可以通过执行以下命令检查找到父包 (reportlab) 的路径：

```
import reportlab
print reportlab.__file__ 
```

如果这确实是您期望的路径，则使用子模块递归地尝试此操作，直到您可以看到问题出在哪里。也许，您的包裹已损坏？如果可以找到有问题的文件/模块，请尝试手动检查返回的路径。

如果这不是您期望的路径，请从第二个路径清理安装并重试。

最后，万一你发现是路径问题，不用每次都使用 sys.path.append 添加路径，你可以将它添加到[PYTHONPATH](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:25:50.950

请检查您的系统路径，如果模块的目录不存在，请添加它。

```
import sys
sys.path.append('PATH_OF_THE_MODULE') 
```

由于 site-packages 已经在 sys.path 中，因此可能是该包已成功导入。

# .net - CompositionBatch：AddPart 与 AddExport

> ID：10907461
> 
> 赞同：3
> 
> 时间：2012-06-06T02:29:56.940
> 
> 标签：.net, mef

组合批处理类中的 AddPart() 和 AddExport() 有什么区别？我什么时候会使用其中一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:48:58.360

我想知道同样的事情，遗憾的是找不到任何简明扼要地描述 AddPart、AddExport（和 AddExportedValue）之间区别的文档。这是我到目前为止所学到的：

MEF 术语中的*一部分*是提供功能（又名*导出*）和指定依赖项（又名*导入*）的组件。

因此，当您致电时，`batch.AddPart(something)`您是在告诉 MEF，“某物”是可能提供*export*并依赖于一个或多个*imports*的组件。
如果您打电话`batch.AddExport(new Export("someExport", () => something))`，那么您是在告诉 MEF “某物”是一个仅提供*导出*而不需要任何*导入*的组件，即 MEF 将忽略`[Import]`可能在“某物”类中指定的任何注释。

`IEnumerable<ImportDefinition>`在内部 AddExport 实际上调用 AddPart，但在此之前它将传递的对象包装在“SingleExportComposablePart”中，即 ComposablePart在调用时返回空`ComposablePart.ImportDefinitions`。

# html - Twitter Feed 未显示在我的网站上

> ID：10907464
> 
> 赞同：1
> 
> 时间：2012-06-06T02:30:09.473
> 
> 标签：html, twitter, web, widget

所以我对网页设计还很陌生，最近我一直在玩弄dreamweaver。在尝试向我的网站添加 twitter 提要时，我偶然发现了 twitter 的资源，您基本上应该在其中复制[他们在此处提供给您的代码](https://twitter.com/about/resources/widgets/widget_profile)并将其粘贴到您网站上您想要的位置。我这样做了，什么也没发生。我试过弄乱它一些，但没有任何反应。有什么我想念的吗？你应该添加任何东西吗？我只是将它生成的代码粘贴到我放置在我的网站上的 div 容器中。

即使仅将代码粘贴到记事本中的文档并打开它，提要也不会显示。

```
<div id="extracontent">
    <center>twitter feed</center>
    <script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>;
    <script>
        new TWTR.Widget({
            version: 2,
            type: 'profile',
            rpp: 4,
            interval: 30000,
            width: 250,
            height: 300,
            theme: {
                shell: {
                    background: '#333333',
                    color: '#ffffff'
                },
                tweets: {
                    background: '#000000',
                    color: '#ffffff',
                    links: '#4aed05'
                }
            },
            features: {
                scrollbar: false,
                loop: false,
                live: false,
                behavior: 'all'
            }
        }).render().setUser('Jagdevelopment').start();
    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:25:46.620

显然，twitter 小部件不适用于本地文件。您不能使用本地文件请求安全信息。一旦代码上传到正在运行的网站，它就可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T10:17:53.603

您似乎没有正确复制代码。

具体来说，您缺少 src 开头的 http://。

```
<script charset="utf-8" 
    src="http://widgets.twimg.com/j/2/widget.js"></script> 
```

# php - JSON编码和解码

> ID：10907466
> 
> 赞同：3
> 
> 时间：2012-06-06T02:30:17.113
> 
> 标签：php, json

我有一个这样的数组：

```
Array (
    [utm_source] => website
    [utm_medium] => fbshare
    [utm_campaign] => camp1
    [test_cat] => red
    [test_sub] => Category
    [test_ref] => rjdepe
) 
```

我`json_encode`把它放进饼干里。我从 cookie 中取出它，现在想解码它，但我得到一个空白屏幕。我对出了什么问题感到困惑。对我来说，这个 JSON 看起来是正确的：

```
{"utm_source":"website","utm_medium":"fbshare","utm_campaign":"camp1","test_cat":"red","test_sub":"Category","test_ref":"dodere"} 
```

有任何想法吗？

编辑：

我的代码：

```
$value = array(
    'utm_source' => 'website',
    'utm_medium' => 'fbshare',
    'utm_campaign' => 'camp1',
    'test_cat' => 'red',
    'test_sub' => 'Category',
    'test_ref' => 'rjdepe'
);
$value = json_encode($value);
setcookie("TestCookie", $value, time()+3600); 
```

其他页面：

```
$cookie = $_COOKIE['TestCookie'];
$cookie = json_decode($cookie);
print_r($cookie); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T06:43:19.520

尝试 base64_encoding 像这样：

```
$value = array(
    'utm_source' => 'website',
    'utm_medium' => 'fbshare',
    'utm_campaign' => 'camp1',
    'test_cat' => 'red',
    'test_sub' => 'Category',
    'test_ref' => 'rjdepe'
);
$value = base64_encode(json_encode($value));
setcookie("TestCookie", $value, time()+3600); 
```

其他页面：

```
$cookie = $_COOKIE['TestCookie'];
$cookie = json_decode(base64_decode($cookie));
print_r($cookie); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T02:45:33.590

在您之前：

```
print_r($cookie); 
```

做：

```
json_last_error(); 
```

它会返回任何东西吗？如果您得到一个空白屏幕，可能是因为解析器失败，可能是`"`cookie 中 json 字符串中的 's 的结果被转义了`\"`。尝试：

```
$cookie = json_decode(stripslashes($_COOKIE['TestCookie'])); 
```

**更新**

所以我使用了以下代码，并收到以下输出：

```
 $value = array(
        'utm_source' => 'website',
        'utm_medium' => 'fbshare',
        'utm_campaign' => 'camp1',
        'test_cat' => 'red',
        'test_sub' => 'Category',
        'test_ref' => 'rjdepe'
    );

    var_dump($value);

    setcookie('TestCookie', json_encode($value), time()+86400);

    echo $_COOKIE['TestCookie'];

    print_r(json_decode($_COOKIE['TestCookie'])); 
```

**输出**

```
array(6) {
  ["utm_source"]=>
      string(7) "website"
  ["utm_medium"]=>
      string(7) "fbshare"
  ["utm_campaign"]=>
      string(5) "camp1"
  ["test_cat"]=>
      string(3) "red"
  ["test_sub"]=>
      string(8) "Category"
  ["test_ref"]=>
      string(6) "rjdepe"
}

{
    "utm_source":"website",
    "utm_medium":"fbshare",
    "utm_campaign":"camp1",
    "test_cat":"red",
    "test_sub":"Category",
    "test_ref":"rjdepe"
}

stdClass Object
(
    [utm_source] => website
    [utm_medium] => fbshare
    [utm_campaign] => camp1
    [test_cat] => red
    [test_sub] => Category
    [test_ref] => rjdepe
) 
```

如果您注意到，encoded 是一个数组。json字符串是一个字符串。解码后的字符串是一个对象。

您可以将其类型转换为数组：

```
$value = (array) json_decode($_COOKIE['TestCookie']);
// Or
$value = json_decode($_COOKIE['TestCookie'], true); 
```

还，

根据您的配置，PHP 可能会转义 cookie 中的特殊字符，这似乎是您的 JSON 解码错误正在中继的内容。

尝试做：

```
json_decode(str_replace('\"', '"', $_COOKIE['TestCookie']), true); 
```

# python - python 抓取路透社网站...坏 xpath？

> ID：10907469
> 
> 赞同：1
> 
> 时间：2012-06-06T02:30:40.017
> 
> 标签：python, xpath, screen-scraping

我正在尝试做一些看起来很简单的事情......我正在尝试从此链接中抓取路透社列表的公司名称：

[http://www.reuters.com/finance/markets/index?symbol=us!spx&sortBy=&sortDir=&pn=](http://www.reuters.com/finance/markets/index?symbol=us!spx&sortBy=&sortDir=&pn=)

但是，我就是无法访问公司名称！真的，在玩了很多 xpath 查询之后，我在访问表时遇到了问题。我正在尝试获取诸如“3M 公司”和“雅培实验室”之类的名称

以下是我使用的代码片段：

```
scrape = []
companies =[]
import lxml
import lxml.html
import lxml.etree

urlbase = 'http://reuters.com/finance/markets/index?symbol=us!spx&sortBy=&sortDir=&pn='
for i in range(1:18):
    url = urlbase+str(i)
    content = lxml.html.parse(url)
    item = content.xpath('XPATH HERE')
    ticker = [thing.text for thing in item] 
```

这是我一直在玩的xpath：

```
'//*[@id="topContent"]/div/div[2]/div[1]/table/tr[2]/td[1]/a'
'//*[@id="topContent"]/div/div[2]/div[1]/table/tbody/tr[2]/td[1]/a
'/html/body/div[3]/div[3]/div/div[2]/div/table/tbody/tr[3]/td/a'
'/html/body/div[3]/div[3]/div/div[2]/div/table/tr[3]/td/a' 
```

我曾尝试通过: 访问该特定表 `'//table[@class="dataTable sortable"]'`，但没有任何运气

谁能帮忙？我觉得这是一个知道自己在做什么的人能够很快解决的问题，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:49:15.727

您尝试抓取的页面在表格中有一个表格。正确的 xpath 应该是`'//table[@class="dataTable sortable"]/form/tr/td[1]/a'`

此外，您的代码中可能有错字，它应该是`range(1,18)`而不是`range(1:18)`. 这是对我有用的最终代码：

```
scrape = []
companies =[]
import lxml
import lxml.html
import lxml.etree

urlbase = 'http://reuters.com/finance/markets/index?symbol=us!spx&sortBy=&sortDir=&pn='
for i in range(1,18):
    url = urlbase+str(i)
    content = lxml.html.parse(url)
    item = content.xpath('//table[@class="dataTable sortable"]/form/tr/td[1]/a')
    ticker = [thing.text for thing in item]
    print ticker 
```

# iphone - 初始加载时的旋转

> ID：10907474
> 
> 赞同：1
> 
> 时间：2012-06-06T02:32:13.247
> 
> 标签：iphone, objective-c, ios, ipad

当我的应用程序最初以`UIDeviceOrientationPortrait`. 我支持所有方向，在初始加载后，我可以正确旋转到任何方向。

它还可以在任何方向关闭和重新打开应用程序。它似乎只是导致问题的初始加载。关于可能发生的事情有什么想法吗？

我什至不知道要发布什么代码来尝试演示该问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:34:12.727

有两种可能：

1.）您在第一个视图中设置了错误。没有代码我无法帮助你。

2.) 您正在根据您的`UIWindow`. 我很清楚这个问题，因为`UIWindow`没有方法来处理方向。我想`UISplitView`你上面提到的，但不要让我坚持。基于`UIWindow`诸如上面的问题或视图控制器之间的手动转换之类的许多事情搞砸了。到目前为止，除了变通方法之外，没有适当的修复方法。

简而言之，只需快速检查设备方向（而不是状态栏）并将视图旋转到正确的方向`viewWillAppear`或类似的东西。这应该不是那么难，因为您已经准备好所有轮换代码。

如果你真的很懒惰，只需放入`[self willAnimateRotationToInterfaceOrientation:[[UIDevice currentDevice] orientation] duration:0.3]];`你的`ViewWillAppear`. 从理论上讲，它应该可以解决问题。

另请参阅：[https](https://stackoverflow.com/a/3897243/581194) ://stackoverflow.com/a/3897243/581194了解更多获取方向的方法。如果以上不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T05:37:16.543

试试这个，

在初始加载`viewDidLoad`将被调用，所以调用你的方向方法 `viewDidLoad`

**代码：**

`[self Methodname:[UIApplication sharedApplication].statusBarOrientation];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T11:57:40.237

尝试尽快调用它：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T12:43:42.303

事实证明，问题是由于有一个“容器”视图控制器，然后是屏幕上没有占用整个屏幕的其他视图控制器。加载我的模态视图时，我是从一个较小的视图控制器中进行的，而不是容器。将模态视图演示移动到容器中解决了这个问题。感谢您让我朝着正确的方向思考。

# c# - 动态代理对象创建

> ID：10907480
> 
> 赞同：1
> 
> 时间：2012-06-06T02:33:38.667
> 
> 标签：c#, entity-framework, dynamic, .net-4.0, proxy

最近我一直在寻找一种方法来创建以编程方式反映其他对象属性的代理对象。但是我一直无法找到有关如何执行此类操作的任何信息，我相信这应该是可能的，因为我在 EntityFramework 中注意到执行 LINQ 操作会返回具有相同属性的代理对象，这些属性可以直接转换为它们所代表的类型.

基本上我正在寻找同样的功能，如果有人能解释它是如何工作的，我会很高兴的。

伪代码：

```
object proxy = GetDynamicProxy(typeof(ProxyType)); 
```

所以基本上我正在寻找一种方法来获取一个代表的对象`ProxyType`和一种方法`GetDynamicProxy`来获取它。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:28:43.203

在 EF 中，代理是通过从实体类型动态派生并动态实现代码来生成的。您需要查看动态编译的程序集、类型和 lambda。System.Reflection.Emit 是你的朋友 (???)。这是一个应该帮助[http://msdn.microsoft.com/en-us/library/3y322t50的链接](http://msdn.microsoft.com/en-us/library/3y322t50)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T05:11:22.663

如果您的 objectcontext 将 ProxyCreationEnabled 设置为 true，那么

```
yourContext.CreateObject<YourType>() 
```

将创建您类型的动态代理版本，您可以填充数据。

[http://msdn.microsoft.com/en-us/library/dd456853.aspx](http://msdn.microsoft.com/en-us/library/dd456853.aspx)

# actionscript-3 - 在 AS3 中使用 JPGEncoder 类时出错

> ID：10907482
> 
> 赞同：0
> 
> 时间：2012-06-06T02:33:56.350
> 
> 标签：actionscript-3, flash, actionscript

我正在尝试在 Flash AS3 中使用 JPGEncoder 类，但此错误不断弹出（测试时）：

```
1046: Type was not found or was not a compile-time constant: BitString. 
```

问题行在我从[这里](https://github.com/mikechambers/as3corelib/blob/master/src/com/adobe/images/JPGEncoder.as)得到的 JPGEncoder 类中：

```
private function writeBits(bs:BitString):void 
```

有谁知道我该如何解决这个问题？谢谢xD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:47:45.103

此错误意味着它找不到 BitString 类。

确保您已经下载了[BitString 类文件](https://github.com/mikechambers/as3corelib/blob/master/src/com/adobe/images/BitString.as)和任何其他必需的类。为了确保您可能需要考虑下载整个[as3CoreLib](https://github.com/mikechambers/as3corelib/zipball/master)并将其解压缩，同时将文件结构保留到您的代码文件夹中。

确保将它们放置在正确的文件夹结构中，例如，`yourProjetRootFolder/com/ adobe/images/BitString.as`如果在根目录之外的文件夹中，请确保路径包含在 ActionScript 3 设置中。

# javascript - 如何使用客户端时区在客户端中输出数据库时间戳作为日期戳？

> ID：10907484
> 
> 赞同：0
> 
> 时间：2012-06-06T02:34:11.170
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

给定数据库中的时间戳，如下所示：2012-06-06T00:27:33Z

在浏览器中为用户呈现它的最佳方式是什么：

```
5/02/12 3:48 PM 
```

最好使用JS库来使用客户端在客户端本地时间渲染？这里的最佳做法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:45:31.367

我使用该`Moment JS`库进行一般日期解析和格式化。它很甜。

[http://momentjs.com/](http://momentjs.com/)

你的例子基本上是：

```
var date = moment('2012-06-06T00:27:33Z');
console.log('Formatted is %s', date.format('M/DD/YY h:m A'));
>> Formatted is 6/05/12 5:27 PM 
```

默认情况下，Moment 以本地时间解析，自动进行时区转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T06:03:09.840

如果您使用的是 Rails，请在 environment.rb 中添加类似

```
Date::DATE_FORMATS[:browser] = "%d/%b/%Y %H:%m" 
```

看看这个根据你的口味格式化。[http://www.onrails.org/2008/08/20/what-are-all-the-rails-date-formats](http://www.onrails.org/2008/08/20/what-are-all-the-rails-date-formats)

在你认为

```
<%= Model.date_field.to_s(:browser) %> 
```

如果您需要调整时区，您首先需要查询用户的时区。有几种方法可以做到这一点。

然后在视图中你可以使用例如

```
<%= Model.date_field.change(:offset => "+0300").to_s(:browser) %> 
```

或者

```
<%= Model.date_field.in_time_zone(-3).to_s(:browser) %> 
```

或者

```
<%= Model.date_field.utc.to_s(:browser) %> 
```

或者

```
<%= (Model.date_field.utc + Time.zone_offset('EST')).to_s(:browser) %> 
```

有任何选择！

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T07:07:53.343

尝试：

```
<%= article.created_at.local_time %> 
```

你应该使用语言环境。

语言环境/de.yml

```
de:
  date:
    formats:
      default: "%d.%m.%Y"
      short: "%e. %b"
      long: "%A, %d.%B %Y um %H:%M"
      only_day: "%e"
    day_names: [Sonntag, Montag, Dienstag, Mittwoch, Donnerstag, Freitag, Samstag]
    abbr_day_names: [So, Mo, Di, Mi, Do, Fr, Sa]
    month_names: [~, Januar, Februar, März, April, Mai, Juni, Juli, August, September, Oktober, November, Dezember]
    abbr_month_names: [~, Jan, Feb, Mär, Apr, Mai, Jun, Jul, Aug, Sep, Okt, Nov, Dez]
    order: [ :day, :month, :year ]
  time:
    formats:
      default: "%A, %d.%B %Y um %H:%M"
      short: "%d.%m.%Y"
      long: "%d.%m.%Y, %H:%M:%S" 
```

在意见中：

```
 <%= I18n.l current_article.created_at, :format => :long %> 
```

对于时区转换：

配置/环境/development.rb

```
config.time_zone = 'Berlin' 
```

# ruby-on-rails-3 - 如何将街景添加到谷歌地图（ruby on rails）？

> ID：10907489
> 
> 赞同：0
> 
> 时间：2012-06-06T02:35:24.033
> 
> 标签：ruby-on-rails-3, google-street-view

我在轨道上使用“ **gmaps4rails** ”，

它很有用，我可以显示 A 到 B 的方向，以及谷歌地图上的一些标记。

现在，我需要一些高级功能：

1.  我想在谷歌地图上 显示“**街景”，就像这样**[http://www.trulia.com/property/3064331264-482-Mariposa-Ave-Mountain-View-CA-94041](http://www.trulia.com/property/3064331264-482-Mariposa-Ave-Mountain-View-CA-94041)

2.  我注意到在这张地图的左边[http://www.trulia.com/property/3064331264-482-Mariposa-Ave-Mountain-View-CA-94041](http://www.trulia.com/property/3064331264-482-Mariposa-Ave-Mountain-View-CA-94041)，你可以点击“Comparables”，“Estimates”，“Schools” “……

这些功能是如何在 Rails 中实现的？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:40:09.607

答案与rails并没有太大关系。

看看这个[来自 Google 的示例代码](https://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-simple)。

特别是，看看javascript：

```
function initialize() {
    var fenway = new google.maps.LatLng(42.345573,-71.098326);
    var mapOptions = {
      center: fenway,
      zoom: 14,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(
        document.getElementById("map_canvas"), mapOptions);
    var panoramaOptions = {
      position: fenway,
      pov: {
        heading: 34,
        pitch: 10,
        zoom: 1
      }
    };
    var panorama = new  google.maps.StreetViewPanorama(document.getElementById("pano"),panoramaOptions);
    map.setStreetView(panorama);
  } 
```

# objective-c - 同一个 UIButton 的多个实例？

> ID：10907496
> 
> 赞同：2
> 
> 时间：2012-06-06T02:36:24.150
> 
> 标签：objective-c, ios, multiple-instances

**问题**

我正在创建一个自定义 UIView，我需要一个 UIButton 的多个实例。我希望通过为每个按钮创建一个实例来节省内存（和代码！），然后使用标签来识别哪个按钮是哪个。我可以创建新的“向上”和“向下”按钮，但我想看看我是否可以更聪明地做到这一点。

我设置它的方式是 3（*应该*适用于任何数字，但是）UILabels，每个按钮下方或上方分别有一个“向上”和“向下”按钮。我还对每个按钮的 CGPoint 位置进行计数，以匹配相应的 UILabel。

**我在做什么**

所以我正在做的是将 xCount 设置为默认值，创建第一个标签，然后在添加标签和按钮作为子视图之前创建第一个“向上”和“向下”按钮。

接下来我增加 xCount，更改标签并为每个标签和两个按钮设置框架。但是，这会将第一个按钮移动到新框架（如预期的那样）。

**我试过的：**

我尝试在每次使用后将每个按钮设置为自身的副本（在将第一个标签和按钮添加到子视图之后），但这会在运行时产生错误。

```
button = [button copy]; 
```

这更多是代码格式问题，而不是问题，但我正在寻找对问题的更明智的见解:)。

这个项目正在使用自动引用计数，如果这改变了任何东西。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T03:01:20.720

首先，你对记忆的担忧是没有根据的。只需创建您需要的按钮数量。

其次，如果您更改按钮（或任何视图）的框架，那么它会移动。你不能在两个地方都有一个按钮。

第三，复制一个对象与从头开始创建两个对象使用的内存量相同；必须为副本分配新内存。

第四，`UIButton`s不[符合`NSCopying`](http://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/ObjectCopying.html)，所以不能照搬。

第五，你对记忆的担忧是没有根据的。只需创建您需要的按钮数量。

# ruby - rbenv 在可用 ruby 版本列表中不包括系统 ruby (1.8.7)

> ID：10907497
> 
> 赞同：1
> 
> 时间：2012-06-06T02:36:27.567
> 
> 标签：ruby, ubuntu, debian, rbenv, ubuntu-12.04

我在 Ubuntu 12.04 x64 桌面上使用 Ruby，但是 rbenv 出现问题 - 它只能看到 rbenv 安装的 ruby​​ 版本，看不到通过 Aptitude 安装的 Ubuntu 系统 ruby​​：

```
$> rbenv versions
  1.9.2-p290
* 1.9.3-p0 (set by /home/kurtosis/bin/ruby/rbenv/version)
  jruby-1.6.5.1 
```

`1.8.7.352-2ubuntu1`也应该出现在该列表中。将本地或全局 ruby​​ 设置为系统，然后尝试运行`ruby`或`irb`导致挂起提示：

```
$> rbenv versions
  1.9.2-p290
* 1.9.3-p0 (set by /home/kurtosis/bin/ruby/rbenv/version)
  jruby-1.6.5.1
$> ruby --version
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]
$> rbenv global system
$> rbenv versions
  1.9.2-p290
  1.9.3-p0
  jruby-1.6.5.1
$> ruby --version
^C
$> rbenv system
rbenv: no such command `system'
$> 
```

我在安装过程中是否遗漏了什么，您是否手动将系统 ruby​​ 添加到 rbenv 或其他东西？

通过 Aptitude 安装的 Ruby 1.8.7：

```
$> aptitude show ruby
Package: ruby                            
State: installed
Automatically installed: no
Version: 4.8
Priority: optional
Section: interpreters
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Architecture: all
Uncompressed Size: 36.9 k
Depends: ruby1.8 (> 1.8.7.334-1)
Suggests: ri, ruby-dev
Conflicts: irb, irb, rdoc, rdoc
Replaces: irb, irb, rdoc, rdoc
Provides: irb, rdoc
Provided by: ruby1.8
Description: Transitional package for ruby1.8
 This is a transitional package which ensures that users of ruby will use ruby1.8 in the future. It can safely be removed.
Homepage: http://www.ruby-lang.org/

$> aptitude show ruby1.8
Package: ruby1.8                         
New: yes
State: installed
Automatically installed: yes
Version: 1.8.7.352-2ubuntu1
Priority: optional
Section: interpreters
Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>
Architecture: amd64
Uncompressed Size: 370 k
Depends: libc6 (>= 2.2.5), libruby1.8 (= 1.8.7.352-2ubuntu1)
Suggests: ruby1.8-examples, ri1.8
Conflicts: irb1.8 (< 1.8.7.249-3~), irb1.8 (< 1.8.7.249-3~), rdoc1.8 (< 1.8.7.249-3~), rdoc1.8 (< 1.8.7.249-3~), ri (<= 4.5), ri (<= 4.5), ri1.8 (<
           1.8.7.334-4~), ri1.8 (< 1.8.7.334-4~), ruby (<= 4.5), ruby (<= 4.5), ruby1.8
Replaces: irb1.8, irb1.8, rdoc1.8, rdoc1.8
Provides: irb1.8, rdoc1.8, ruby, ruby-interpreter
Description: Interpreter of object-oriented scripting language Ruby 1.8
 Ruby is the interpreted scripting language for quick and easy object-oriented programming.  It has many features to process text files and to do
 system management tasks (as in perl).  It is simple, straight-forward, and extensible. 

 This package provides version 1.8 series of Ruby. 

 On Debian, Ruby 1.8 is provided as separate packages.  You can get full Ruby 1.8 distribution by installing following packages. 

  ruby1.8 ruby1.8-dev ri1.8 ruby1.8-examples libtcltk-ruby1.8
Homepage: http://www.ruby-lang.org/

kurtosis@kurtosis-dm1-4050us:~/bin/projects/blogs/posterous/export$ 
```

小路：

```
$ echo $PATH
/home/kurtosis/bin/ruby/rbenv/shims:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/kurtosis/bin:/opt/apache/ant/default/bin:/opt/apache/maven/default/bin:/home/kurtosis/bin/ide/eclipse:/home/kurtosis/bin/ide/idea/default/bin:/opt/scala/bin/default/bin:/opt/typesafe-stack/bin:/home/kurtosis/bin/google/android/sdk/tools:/home/kurtosis/bin/google/android/sdk/platform-tools:/home/kurtosis/bin/google/android/ndk/default/:/opt/haskell/ghc/default/bin:/opt/haskell/platform/default/bin:/home/kurtosis/bin/ruby/rbenv/bin:/home/kurtosis/bin/node/node_modules/less/bin:/home/kurtosis/bin/google/go/bin:/home/kurtosis/bin/utilities/torrent/vuze:/home/kurtosis/bin/utilities/torrent/anomos:/home/kurtosis/bin/scripts:. 
```

对于它的价值，我在虚拟机中使用全新安装的 Ubuntu 12.04 Server x64 进行测试。通过`aptitude install`ruby​​-full` 安装 ruby​​，然后下载并安装 rbenv。同样的问题，由于某种原因它仍然看不到系统红宝石。新的路径是：

```
/home/kurtosis/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/kurtosis/.rbenv/bin:. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:43:32.280

当你做的时候你会得到什么

```
rbenv global system
ruby -v 
```

或者

```
rbenv local system
ruby -v 
```

特殊版本名称系统告诉 rbenv 使用系统 Ruby（通过搜索 $PATH 检测到）。

请参阅第 3.1 节

```
https://github.com/sstephenson/rbenv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:22:44.283

您应该尝试使用[chruby](https://github.com/postmodern/chruby#readme)。chruby 在启动 shell 或切换到目录时不会自动切换到其他 Ruby。默认情况下，chruby 使用系统 Ruby。

```
$ chruby jruby
$ chruby
   ruby-1.9.3-p327
 * jruby-1.7.0
   rubinius-2.0.0-rc1
$ which ruby
/usr/local/jruby-1.7.0/bin/ruby
$ chruby system
$ which ruby
/usr/bin/ruby 
```

# html - ruby 意外关键字

> ID：10907500
> 
> 赞同：0
> 
> 时间：2012-06-06T02:36:51.053
> 
> 标签：html, ruby-on-rails, ruby

我目前正在第一次使用 ruby​​ 进行开发。你能明白为什么我不断收到以下错误：

```
 /home/apple/Desktop/homework/app/views/specialization/index.html.erb:36: syntax error, unexpected keyword_ensure, expecting keyword_end

    /home/apple/Desktop/homework/app/views/specialization/index.html.erb:38: syntax error, unexpected $end, expecting keyword_end

    Extracted source (around line #36):

31: </tabel>
32: </body> 
```

我尝试使用 ruby​​ 访问数据库并阅读一些简单的专业化元组。这是我的页面代码：

```
<html>
<head>
</head>
<body>
<table border=1>

        <tr>
            <td>Specialization</td>
            <td>Number of applicants</td>
            <td>Applicants</td>
        </tr>

        <% Specialization.all.each do |s| %>
        <tr>
            <td> <%= s.title %> </td>

            <td>
                <table>
                    <td>applicant1</td>
                    <td>applicant2</td>

                </table>
            </td>

        <td><button type="button">Click Me!</button> </td>

        </tr>

        </tr>
        <% end >
</tabel>
</body> 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:40:40.263

让我们来看看

```
<% end > 
```

应该

```
<% end %> 
```

而且您不应该像这样在视图中选择模型

```
<% Specialization.all.each do |s| %> 
```

您应该在控制器中的索引操作中找到专业化

```
def index
  @specializations = Specialization.all
end 
```

并且在视图中

```
<% @specializations.each do |s| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:40:49.197

你少了一个 %

```
<% end %> 
```

# oracle - 通过电子邮件发送表格数据作为附件，获取表格名称和电子邮件 ID 作为参数

> ID：10907501
> 
> 赞同：0
> 
> 时间：2012-06-06T02:37:01.740
> 
> 标签：oracle, plsql, smtp, plsqldeveloper

我正在尝试编写这样的代码

```
CREATE OR REPLACE PROCEDURE EMAIL_TABLE (errbuf         OUT      VARCHAR2,
                       retcode        OUT      NUMBER
                      ) is
cursor head is
select column_name
from all_tab_columns a
where table_name= 'EMP'
order by column_id;         

cursor line is
select column_name
from all_tab_columns a
where table_name= 'EMP'
order by column_id; 

count3 number;
count4 number;
lines1 varchar2(3000) := '';  
lines2 varchar2(3000) := '';            
count1 number;
count2 number;
header1 varchar2(3000) := '';
header2 varchar2(3000) := '';
BEGIN
count2 := 0;
select count(1)
into count1
from all_tab_columns a
where table_name= 'EMP';
FOR I IN head LOOP
 count2 := count2+1;
 IF count2 != count1 THEN
 header1 := header1||'"'||i.column_name||'"'||',' ;
 ELSIF count1 = count2 THEN
 header1 := header1||'"'||i.column_name||'"' ;
 END IF;
END LOOP;
header2 := header1;

count4 := 0;
select count(1)
into count3
from all_tab_columns a
where table_name= 'EMP';
FOR I IN line LOOP
count4 := count4+1;
 IF count4 = 1 THEN
  lines1 := lines1||''''||'"'||''''||'||'||i.column_name ;
 ELSIF count4 != count3 THEN
  lines1 := lines1||'||'||''''||'"'||','||'"'||''''||'||'||i.column_name;
 ELSIF count3 = count4 THEN
  lines1 :=        lines1||'||'||''''||'"'||','||'"'||''''||'||'||i.column_name||'||'||''''||'"'||'''' ;
 END IF;
END LOOP;
 lines2 := lines1;

FND_FILE.PUT_LINE(fnd_file.output, header2);
EMAIL_TABLE2(lines2);
END; 
```

/

```
CREATE OR REPLACE PROCEDURE EMAIL_TABLE2(abc in varchar2) is
 xyz varchar2(1000);
 cursor lines is
 select abc a from EMP;  -- This is not working
BEGIN
  for i in lines loop
    FND_FILE.PUT_LINE(fnd_file.output,i.a);
  end loop;
END; 
```

/

以上将注册为并发程序，fnd_file.pu_line 将在 o||req_numebr||.out 中创建。我将把这个输出文件附加到电子邮件中并邮寄。

Outfile 应如下所示：

```
 "NAME","EMP_ID","DEPT","SAL"

 "JOHN","101","IT","10000"
 "ROB","102","SALES","8000" 
```

第一行是来自 all_tab_columns 的标题，行来自作为参数传递的表。

请让我知道上述方法是否有效，或者是他们的任何方式。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:17:14.377

首先，删除最后一个逗号而不是先计算结果更容易：

```
FOR I IN head LOOP
 header1 := header1||'"'||i.column_name||'"'||',';
END LOOP;

header1 := SUBSTR(header1, 1, LENGTH(header1)-1); 
```

接下来，如果您想动态构建和使用列列表，您的`EMAIL_TABLE2`过程需要使用引用游标 ( )：`SYS_REFCURSOR`

```
CREATE OR REPLACE PROCEDURE EMAIL_TABLE2(abc in varchar2) is
 xyz varchar2(1000);
 lines SYS_REFCURSOR;
 l_query varchar2(4000);
BEGIN
  l_query := 'select '||abc||' a from EMP';  
  open lines for l_query;
  loop
      fetch lines INTO xyz;
      exit when lines%NOTFOUND;
      FND_FILE.PUT_LINE(fnd_file.output,xyz);
  end loop;
END; 
```

更多关于参考游标的信息在这里：[http ://www.orafaq.com/node/63](http://www.orafaq.com/node/63)

# php - PHP OpenSSL 错误

> ID：10907502
> 
> 赞同：2
> 
> 时间：2012-06-06T02:37:05.070
> 
> 标签：php, openssl, private-key, public-key

`Warning: openssl_get_publickey() [function.openssl-get-publickey]: Don't know how to get public key from this private key on line 5`尝试从私钥获取公钥时出现错误。这是我的PHP代码：

```
<?php
$privatekeyorig = openssl_pkey_new();
openssl_pkey_export($privatekeyorig,$privatekey);
echo '<b>Private Key:</b> ' . $privatekey . '<br>';
$publickey = openssl_get_publickey($privatekeyorig);
echo '<b>Public Key:</b> ' . $publickey . '<br>';
?> 
```

根据 PHP 手册，我这样做是正确的。有人发现错误吗？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:04:18.237

我的建议是使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)。例如。

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->loadKey('...');

$privatekey = $rsa->getPrivateKey();
$publickey = $rsa->getPublicKey();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:17:52.407

查看[http://php.net/manual/en/function.openssl-pkey-new.php上的最后一条评论](http://php.net/manual/en/function.openssl-pkey-new.php)

[更新]从上面的评论:)它在我的系统上工作，为你提供一个文本公钥：

```
// Create the keypair
$res=openssl_pkey_new();

// Get private key
openssl_pkey_export($res, $privkey);

// Get public key
$pubkey=openssl_pkey_get_details($res);
$pubkey=$pubkey["key"]; 
```

# jquery - 将字符串与图像关联

> ID：10907505
> 
> 赞同：0
> 
> 时间：2012-06-06T02:37:59.463
> 
> 标签：jquery

我目前有下面的代码，它成功地将数组中的随机图像设置为`.wrapper`背景。我想要另一个与每个特定图像永久配对的变量（字符串），这样当随机选择图像时，它的特定字符串也会被传入。所以如果`foo.jpg`随机选择，变量`x`设置为'foo'，但如果`bar.jpg`随机选择，变量`x`设置为'bar'。

有什么想法可以实现吗？可能使用 JSON 对象？

我的代码：

```
var images = ["foo.jpg", "bar.jpg", "baz.jpg", "qux.jpg"];
function getImage() {
        return images[Math.floor(Math.random() * images.length)];
}
$('.wrapper').css({
    'background' : 'url(' + getImage() + ') no-repeat center center fixed'
}); 
```

让我知道您可能有任何问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:45:29.130

您可以将数组设为对象数组，而不是数组中的每个对象都包含 url 和标签。您随机选择其中一个对象，然后可以分别访问 url 和标签：

```
var images = [
    {url: "foo.jpg", tag: "foo"}, 
    {url: "bar.jpg", tag: "bar"}, 
    {url; "baz.jpg", tag: "baz"},
    {url: "qux.jpg", tag: "qux"}
];

function getNum() {
        return Math.floor(Math.random() * images.length);
}
var item = images[getNum()];
$('.wrapper').css({
    'background' : 'url(' + item.url + ') no-repeat center center fixed'
}).html(item.tag); 
```

或者，如果标签始终只是图像名称的基础，因此您可以将其从 url 中解析出来，您可以这样做：

```
var images = ["foo.jpg", "bar.jpg", "baz.jpg", "qux.jpg"];
function getNum() {
        return Math.floor(Math.random() * images.length);
}
var num = getNum();
$('.wrapper').css({
    'background' : 'url(' + images[num] + ') no-repeat center center fixed'
}).html(images[num].replace(/\.jpg$/, "")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T02:41:29.440

您可以尝试使用并行数组。

```
var images = ["foo.jpg", "bar.jpg", "baz.jpg", "qux.jpg"];
var x      = ["foo", "bar", "baz", "qux"];
function getNum() {
        return Math.floor(Math.random() * images.length);
}
var num = getNum();
$('.wrapper').css({
    'background' : 'url(' + images[num] + ') no-repeat center center fixed'
}).html(x[num]); 
```

# database-design - 基于网络的消息系统

> ID：10907507
> 
> 赞同：1
> 
> 时间：2012-06-06T02:38:15.513
> 
> 标签：database-design, messaging

我正处于一个小型 MVC 应用程序的简单私人消息收件箱解决方案的设计阶段。如何**设计数据库**以能够跟踪父消息（新消息）和后续子消息（回复）。任何 ASP.NET 教程都可以获得我开始将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:05:00.267

像这样的东西

```
message
----------
message_id
message_body
author_id

message_reply
--------------
message_id
reply_id 
```

# iphone - 原型细胞 uitableview

> ID：10907509
> 
> 赞同：1
> 
> 时间：2012-06-06T02:38:48.690
> 
> 标签：iphone, xcode, uitableview

嗨，我尝试使用 4 个原型单元和情节提要。对于每个原型单元格，我都有一个带有标签的 uitableviewCell 类。

看看我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier  = @"ProfilCell";
    static NSString *CellIdentifier1 = @"ProfilCell1";
    static NSString *CellIdentifier2 = @"ProfilCell2";
    static NSString *CellIdentifier3 = @"ProfilCell3";
    static NSString *CellIdentifier4 = @"ProfilCell4";

    if(indexPath.section == 0) 
    {
        ProfilCell* cell =(ProfilCell*)  [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        cell.pseudoLabel.text=[[infoArray objectAtIndex:indexPath.row]valueForKey:@"pseudo"];

        return cell;

    }

      if(indexPath.section == 1) 
      {
        ProfilCell2* cell = (ProfilCell2*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier1];

       cell.textLabel.text= [[infoArray objectAtIndex:indexPath.row]valueForKey:@"status"];

        return cell;

    }

   if(indexPath.section == 2) 
    {
        switch (indexPath.row) 
        {
            case 0:
            {

                 ProfilCell3* cell =(ProfilCell3*)  [tableView dequeueReusableCellWithIdentifier:CellIdentifier2];
                 cell.ageLabel.text=  [[infoArray objectAtIndex:indexPath.row]valueForKey:@"age"];
              return cell;
            }
                break;

            case 1:

            {

                ProfilCell4* cell = (ProfilCell4*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier3];
                cell.deptLabel.text= [[infoArray objectAtIndex:indexPath.row]valueForKey:@"localite"];

                return cell;

            }
                break;
            case 2:
            {
                ProfilCell5* cell = (ProfilCell5*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier4];

                cell.membreLab.text= [[infoArray objectAtIndex:indexPath.row]valueForKey:@"membre"];

                return cell;

            }
                break;   
            default:
                break;
        }
    }
          return nil;
} 
```

在第 0 节第 1 节中，我的标签中有数据，但在第 2 节案例 0 中，我有这个：

```
[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

为什么我的数组似乎是空的

没关系，现在只需为 indexPath 提供 0，因为我在数组中只有 1 个对象！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:41:16.880

您应该确认您对 dequeueReusable... 的每个调用实际上都返回了一个单元格。利用：

```
NSAssert (cell, @"Missed Cell"); 
```

在每个“if”语句的正文中。我怀疑正在返回一个零单元格。这将是因为您的“ProfilCell”、“ProfilCell1”、...的重用标识符与情节提要中的单元格标识符不一致。要修复它，请转到情节提要，逐个选择每个原型单元，确认“标识符”与您的代码中的内容一致。如果不是，则更改为同意。

“标识符”必须匹配；不是“标签”！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:11:52.673

你可能应该尝试这样的事情......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"ProfilCell";
    static NSString *CellIdentifier1 = @"ProfilCell1";
    static NSString *CellIdentifier2 = @"ProfilCell2";
    static NSString *CellIdentifier3 = @"ProfilCell3";

    id cell = nil;

    if(indexPath.section == 0) {
              cell = (ProfilCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
              cell.pseudoLabel.text= [[infoArray objectAtIndex:indexPath.row]valueForKey:@"pseudo"];
    }

    if(indexPath.section == 1) {
            cell = (ProfilCell2*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier1];
            cell.statusLabel.text= [[infoArray objectAtIndex:indexPath.row]valueForKey:@"status"];
    }

    if(indexPath.section == 2) {
            cell =(ProfilCell3*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];
            cell.ageLabel.text= [[infoArray objectAtIndex:indexPath.row]valueForKey:@"age"];
    }

    if(indexPath.section == 3) {
            cell = (ProfilCell4*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier3];
            cell.deptLabel.text= [[infoArray objectAtIndex:indexPath.row]valueForKey:@"localite"];
    }

    return cell;

    } 
```

我在这里所做的是为 type 的单元格设置一个 var `id`，这意味着它可以是任何东西。在您的 if 语句中，您决定什么是单元格，并相应地进行设置。最后只返回 1 个单元格实例，而不是在每个语句中。希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T03:53:20.167

检查 ProfilCell、ProfilCell2、ProfilCell3 和 ProfilCell4 是否都是 UITableViewCell 的子类

还要检查您的单元格标识符是否与情节提要中的标识符匹配。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-06T03:27:39.280

调用后，`dequeueReusableCellWithIdentifier:`您**必须**检查返回的值`nil`。如果返回的值不是`nil`，那么你很好；你从队列中得到了一个可重复使用的单元格。 **但如果返回值为`nil`**，则队列中没有可用的可重用单元。（对于新创建的表，情况总是如此。）在后一种情况下，您必须创建一个新单元格，或者以编程方式使用`alloc`and `init`：

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                               reuseIdentifier:@"TableViewCell"] autorelease]; 
```

或通过从 .xib 文件加载它：

```
cell = [[[NSBundle mainBundle] loadNibNamed:@"TableViewCell"
                                      owner:self options:nil] lastObject]; 
```

在您的情况下，您可以尝试以下操作（对其他部分重复）：

```
if (indexPath.section == 0)
{
    ProfilCell *cell = (ProfilCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)  // if we did not get a reusable cell from the queue, we make one…
    {
        cell = [[ProfilCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.pseudoLabel.text= [[infoArray objectAtIndex:indexPath.row]valueForKey:@"pseudo"];
    return cell;
} 
```

# c# - 你如何使用集合初始化器来创建一个新字典？

> ID：10907510
> 
> 赞同：1
> 
> 时间：2012-06-06T02:38:58.133
> 
> 标签：c#

如果您可以在列表中执行此操作

```
List<int> a = new List<int>() {
   2, 4, 6, 8, 10
}; 
```

你怎么能在字典中做同样的事情？

```
Dictionary<int, bool> b = new Dictionary<int, bool>() {
   ?, ?, ?
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T02:40:18.643

```
Dictionary<int, bool> b = new Dictionary<int, bool>() {
   {1, true},{2, false},{3, true}
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T02:40:51.597

MSDN 对此有一篇文章：http: [//msdn.microsoft.com/en-us/library/bb531208.aspx](http://msdn.microsoft.com/en-us/library/bb531208.aspx)

您只需将每个键值对包装在大括号中。

# c# - C# Facebook WP7 - display=touch 被 facebook 读取为 display=wap

> ID：10907512
> 
> 赞同：0
> 
> 时间：2012-06-06T02:39:36.550
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk, windows-phone-7.1

我正在使用 Facebook C# SDK 6.0.20 来允许使用我的应用程序的用户登录到 Facebook。我正在使用 display=touch 参数，以便为屏幕较小的移动设备呈现 fb 登录页面。问题是，fb 一直将其读取为 display=wap 已被弃用。因此，用户在登录时会收到错误消息。除了强迫用户在移动设备屏幕上看到丑陋的全屏显示之外，还有其他解决方案吗？

Facebook一直没有帮助，也不愿意接受这是一个错误，而是说这是一个“设计的功能”，但其他人似乎都认为这是一个错误。( [https://developers.facebook.com/bugs/355102764525510](https://developers.facebook.com/bugs/355102764525510) ) 当 WP7 开发者显然与微软关系良好时，为什么 Facebook 会试图阻止像这样的 WP7 开发者，后者为他们提供 fb 地方的地图服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:37:57.210

在 7 月 5 日最近的 Facebook 更新之后，WP7 的 Facebook display=touch 现在可以正确引导。这应该不再是问题。

# objective-c - 在 Interface Builder 中约束 NSTextField 的宽度

> ID：10907513
> 
> 赞同：0
> 
> 时间：2012-06-06T02:39:37.510
> 
> 标签：objective-c, cocoa, width, constraints, nstextfield

我想使用界面生成器在 NSTextField 中显示文本，我可以这样做。但是当文本太长而无法正常放入界面构建器布局中提供的空间时，我需要能够进行约束。我看到 NSTextField 上的宽度约束，但它的行为完全符合我的需要。我需要显示整个字符串，但要水平挤压字体，以便将字符串压缩到可用空间中。有没有办法做到这一点？

# android - Android，数据输出流，内存不足

> ID：10907515
> 
> 赞同：1
> 
> 时间：2012-06-06T02:40:01.247
> 
> 标签：android, io

我正在使用这一段复制一个大文件。Android 在恰好 32 个缓冲区加载时因“内存不足”而崩溃。它的作用就像 dos.write 将数据放入一个大缓冲区而不是将其假脱机到 i/o 设备。不会抛出异常。

缓冲区大小 = 512*1024。bis 是一个 BufferedInputStream。byteArray 是一个 ByteArrayBuffer，

```
 try {
        FileOutputStream fos = new FileOutputStream(file);
        dos = new DataOutputStream(fos);

        int current = 0;

        while((current = bis.read()) != -1){
            byteArray.append((byte)current);
            if (byteArray.isFull()){
                byte[] b = byteArray.toByteArray();
                dos.write(b, 0, bufferSize);
                byteArray.clear();
                }
            }

        int count = byteArray.length();
        byte[] b = byteArray.toByteArray();
        dos.write(b, 0, count);
            dos.flush();
            dos.close();
            bis.close();
       }
         catch (Exception e) {
         RunTimeError("Exception: " + e);
         return false;
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T03:03:38.917

我的猜测是，由于某种原因，`byteArray.isFull()`它总是会返回。`false`然后，当您加载 16MB 数据时，您的内存不足。我不会打扰`ByteArrayBuffer`. （就此而言，512KB 对于这种操作来说太大了。你应该尝试匹配文件 I/O 块大小。它可能因设备而异，但 4K-8K 可能接近。）你也不要' t 需要包含`fos`在一个`DataOutputStream`; 你只是在写字节。`BufferedOutputStream`另一方面，A可能有用。如果`bis`没有缓冲，将其包装在 a`BufferedInputStream`中也会有所帮助。

我会像这样重写你的代码：

```
BufferedOutputStream bos = null;
try {
    bos = new BufferedOutputStream(new FileOutputStream(file), 8192);
    byte[] buffer = new byte[1024];

    int len = 0;

    while((len = bis.read(buffer)) != -1) {
        bos.write(buffer, 0, len);
    }
} catch (Exception e) {
     RunTimeError("Exception: " + e);
     return false;
} finally {
    try { bis.close(); } catch (Exception ignored) { }
    try { bos.close(); } catch (Exception ignored) { }
} 
```

# node.js - 如何在 Node.js 中触发超时功能？

> ID：10907517
> 
> 赞同：2
> 
> 时间：2012-06-06T02:40:03.797
> 
> 标签：node.js, settimeout

我想触发setTimeout回调函数，但是好像不行。有什么问题？

```
var fs = require("fs");

// set timeout callback
setTimeout(function(){
    console.log("5000ms timeout");
    process.exit(0);
}, 5000 );

// do something more than 5000ms
while(true) {
    var stats = fs.statSync("foo");
    console.log("while statement running...");
} 
```

当我运行它时，5秒后，程序仍在运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:45:16.017

这`while(true)`是一个紧密的自旋循环，可防止任何其他异步回调触发。不要在单线程环境中执行此操作。您可以使用`setInterval`小超时而不是`while(true)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:11:44.813

Javascript 是严格的单线程的。（工人除外）

只要您的`while`循环正在运行，*就没有其他 Javascript 代码可以执行*，包括您的`setTimeout`回调。

相比之下，调用`setInterval`只是安排一个回调定期运行，但不会在此期间阻塞线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T02:45:25.507

我不熟悉 node.js，但我通常希望 while 循环继续运行。JS 阻塞。为了停止该循环，它的条件需要评估为假。在循环停止之前，不会执行任何其他操作。

# javascript - 使用 RequireJS 通过 shim 加载 Highcharts 并维护 jQuery 依赖项

> ID：10907519
> 
> 赞同：19
> 
> 时间：2012-06-06T02:40:12.230
> 
> 标签：javascript, highcharts, requirejs, js-amd

我正在尝试使用 RequireJS 中的垫片加载 Highcharts 库。但是，当 Highcharts 加载时，它会抛出异常，因为它无法访问它所依赖的 jQuery 方法。

要求配置如下所示：

```
require.config({
    baseUrl: "js",

    shim: {

        'libs/highcharts/highcharts.src.js': {
            deps: ['jquery'],
            exports: function(jQuery)
            {
                this.HighchartsAdapter = jQuery;

                return this.Highcharts;
            }
        }
    }
}); 
```

抛出的异常是：

```
Uncaught TypeError: undefined is not a function 
```

并且关于这条线：

```
dataLabels: merge(defaultLabelOptions, { 
```

问题在于`merge`调用，它最终将自身映射回 jQuery（或 Highcharts 支持的其他适配器；但我只是使用 jQuery）。

我不确定如何确保 Highcharts 可以使用 RequireJS 和 shim 访问 jQuery。

有没有人一起使用过 RequireJS 和 Highcharts ？我猜这个问题并不特定于 highcharts，而是任何具有其他类型依赖项的库。

在此先感谢您提供任何建议或指出正确的方向！

**为了添加更多上下文，希望熟悉 require.js 或 shims 的人能够提供帮助而不必非常熟悉 highcharts，这里有一些`merge`在 Highcharts 中设置此方法的源**

```
var globalAdapter = win.HighchartsAdapter,
adapter = globalAdapter || {},

// Utility functions. If the HighchartsAdapter is not defined, 
// adapter is an empty object
// and all the utility functions will be null. In that case they are 
// populated by the
// default adapters below.

// {snipped code}

merge = adapter.merge

// {snipped code}

if (!globalAdapter && win.jQuery) {
    var jQ = win.jQuery;

    // {snipped code}

    merge = function () {
        var args = arguments;
        return jQ.extend(true, null, args[0], args[1], args[2], args[3]);
    };

    // {snipped code}
} 
```

该对象是在脚本开头`win`设置的引用。`window`所以，我认为`window.jQuery = jQuery;`在 shim 上添加导出方法会导致 highcharts 获取 jQuery 参考；但事实并非如此。

同样，在这一点上，任何见解、信息、建议或质问都会受到赞赏 - 我完全不知所措，并开始质疑尝试在浏览器 JavaScript 中实现 AMD 软件包系统是否值得。

* * *

在接受了下面*pabera*的答案后，我认为更新我的问题以反映他的答案如何帮助我的解决方案是合适的（不过，这基本上是他的答案）。

RequireJS 使用“路径”来查找不受“AMD”支持的库并将它们加载到您的页面上。“shim”对象允许您为路径中定义的库定义依赖项。必须在 requirejs 尝试加载依赖脚本之前加载依赖项。

export 属性提供了一种机制来告诉 requirejs 如何确定是否加载了库。对于 jquery、backbone、socketio 等核心库，它们都导出一些窗口级别变量（`Backbone`、、`io`和`jQuery`等`$`）。您只需提供该变量名作为`exports`属性，requirejs 将能够确定何时加载 lib。

完成定义后，您可以按预期使用`requirejs`'函数。`define`

这是我的示例`require.config`对象：

```
require.config({
    baseUrl: "/js/",

    paths: {
        jquery: 'jquery',
        socketio: 'http://localhost:8000/socket.io/socket.io', //for loading the socket.io client library
        highcharts: 'libs/highcharts/highcharts.src',
        underscore: 'libs/underscore',
        backbone: 'libs/backbone'
    },

    shim: {
        jquery: {
            exports: 'jQuery'
        },

        socketio: {
            exports: 'io'
        },

        underscore: {
            exports: '_'
        },

        backbone: {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },

        highcharts: {
            deps: ['jquery'],
            exports: 'Highcharts'
        }
    }
}); 
```

正如*pabera*之前提到的，这是针对`Require.JS`version的`2.0.1`。

我希望有人能从中得到一些用处；我知道这条路挡住了我一会儿；所以希望我们通过发布这个来防止你把你的头撞到我们所做的墙上的同一个地方。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-12T12:17:58.987

我遇到了完全相同的问题，我挣扎了好几个小时，直到我在这里看到你的条目。然后我从头开始，现在它至少对我有用。

```
requirejs.config({
    baseUrl:'/js/',
    paths:{
      jquery:'vendor/jquery',
      handlebars: 'vendor/handlebars',
      text: 'vendor/require-text',
      chaplin:'vendor/chaplin',
      underscore:'vendor/underscore',
      backbone:'vendor/backbone',
      highcharts: 'vendor/highcharts'
    },

    shim: {
      backbone: {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
      },
      underscore: {
        exports: '_'
      },    
      highcharts: {
        exports: 'Highcharts'
      }    
    },
}); 
```

由于我在 Backbone 之上使用[卓别林，我在我的路径属性中包含了更多文件。](https://github.com/chaplinjs/chaplin)Highcharts 与 Backbone 有相似的结构，所以我想我可以用同样的方式加载它。它现在对我有用。如您所见，我已经在 paths 属性中引入了 highcharts 以将其导出为 shim 后缀。

也许这会有所帮助，否则让我们尝试为它做出更多贡献以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T12:42:15.363

尽管 jQuery 可以用作 AMD 模块，但它仍然会将自身导出到窗口，因此任何依赖于全局的脚本，`jQuery`或者`$`只要 jQuery 首先加载，它仍然可以工作。

您是否尝试过设置路径？jQuery 是一个有趣的工具，因为尽管 RequireJS 文档鼓励您不要为模块命名，但实际上 jQuery 确实如此。

**来自 jQuery 源**

```
if ( typeof define === "function" && define.amd && define.amd.jQuery ) {
    define( "jquery", [], function () { return jQuery; } );
} 
```

这意味着您需要告诉 RequireJS 在哪里可以找到“jquery”。所以：

```
require.config({
    paths: {
        'jquery': 'path/to/jquery'
    }
}); 
```

如果您对为什么 jQuery 以这种方式注册自己感兴趣，那么[源代码中有一个相当大的注释，](https://github.com/jquery/jquery/blob/master/src/exports/amd.js)其中包含更多详细信息

# php - 从一个大的 html 变量中获取一个字符串

> ID：10907530
> 
> 赞同：3
> 
> 时间：2012-06-06T02:41:52.170
> 
> 标签：php, html, regex

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我将如何从已被抓取的网页中获取某个字符串？我在 PHP 中使用 SimpleBrowser 将网页下载到变量中。

在某个部分生成的网页有以下内容：

```
 <tr>
        <td class="label" width="350">POD Receiver Name:&nbsp;</td>
        <td class="field" align="left">
            <b>KRISTY</b>&nbsp;
        </td>
    </tr> 
```

我想将值 KRISTY 放入变量中，但不确定如何。我对正则表达式没有真正的经验，所以我不知道从哪里开始。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:05:09.947

要从已知位置拉出一个特定部分，我会使用 xpath。[试试http://ditio.net/2008/12/01/php-xpath-tutorial-advanced-xml-part-1/](http://ditio.net/2008/12/01/php-xpath-tutorial-advanced-xml-part-1/)之类的教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:03:02.217

我不确定您为什么将页面存储在变量中。但是，如果您将页面作为字符串存储在变量中，则可以使用正则表达式从中提取字符串。对于这个特定的示例，您可以使用类似的东西。

```
$v = '<tr>
       <td class="label" width="350">POD Receiver Name:&nbsp;</td>
       <td class="field" align="left">
        <b>KRISTY</b>&nbsp;
      </td>
    </tr>';

preg_match('/\<b\>(.*?)\<\/b\>/', $v, $matches);
$result = $matches[1]; 
```

这个特殊的正则表达式获取粗体标记之间的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T04:53:12.743

如果可以依赖该结构，请试一试 SimpleXML：

```
$xml = simplexml_load_string(html_entity_decode($v));
$name = strval($xml->td[1]->b);//KRISTY 
```

[http://php.net/manual/en/function.simplexml-load-string.php](http://php.net/manual/en/function.simplexml-load-string.php)

[http://www.php.net/manual/en/class.simplexmlelement.php](http://www.php.net/manual/en/class.simplexmlelement.php)

# c# - 与数据源关联时，DataGridView 从哪里获取列名

> ID：10907538
> 
> 赞同：0
> 
> 时间：2012-06-06T02:43:01.780
> 
> 标签：c#, linq, datagridview, datasource

您好，我有一个 linq 查询如下

```
var q = (from c in db.table1
         select c).ToList(); 
```

然后我将结果分配给**DataGridView**

```
myDGV.DataSource = q; 
```

之前的 table1 有： myCol1,myCol2,myCol3 列

网格视图将按照与 db 表相同的列名显示数据

问题是它的名字是从哪里来的？

我只是将一个集合分配给它的数据源而已

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:46:05.970

你在使用实体模型吗？如果是这样，当您创建模型时，它会为每个表生成类，包括与数据库中所有表列匹配的属性。当您将 DataSource 设置为这些对象的列表时，它也会自动将属性名称分配给网格视图。

如果属性不符合您的喜好，您可以使用 DataGridView 的 HeaderText 属性为列标题指定自定义文本：

[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.headertext.aspx)

# forms - Jquery 项目渲染不正确

> ID：10907542
> 
> 赞同：0
> 
> 时间：2012-06-06T02:44:00.053
> 
> 标签：forms, jquery-ui, datepicker

我正在使用来自 google 的 jqueryui api，但我使用的项目渲染不正确。这是我的参考：

```
<script
    type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script
    type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script> 
```

我实际上只是复制粘贴了模态表单对话的代码，在这里找到：http: [//jqueryui.com/demos/dialog/#modal-form](http://jqueryui.com/demos/dialog/#modal-form)

我的日期选择器代码是：

```
$(document).ready( function() {
    $( "#datepicker" ).datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: "MM d, yy"
    }
    );
}); 
```

但是，这些项目在没有任何可识别背景的情况下呈现，如屏幕截图所示。我一直在拼命想弄清楚为什么。谢谢。 ![在此处输入图像描述](../Images/8fc0b989e21fc50092499957ed29ad67.png) ![在此处输入图像描述](../Images/1b4e59beaa4d773b9c13323dea4ccb05.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T02:46:28.927

你在使用 jQuery 主题 CSS 吗？jQueryUI 演示页面是。它位于此处：[http ://code.jquery.com/ui/1.8.21/themes/base/jquery-ui.css](http://code.jquery.com/ui/1.8.21/themes/base/jquery-ui.css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T02:49:39.923

您需要参考 jquery UI CSS 文件，您可以从 jquery UI 网站获取它们作为主题。你也应该看看[this](https://stackoverflow.com/questions/820412/downloading-jquery-css-from-googles-cdn)和[this](https://stackoverflow.com/questions/1348559/are-there-hosted-jquery-ui-themes-anywhere)。

# java - 线程中的异常，java.lang.NullPointerException

> ID：10907545
> 
> 赞同：3
> 
> 时间：2012-06-06T02:44:54.347
> 
> 标签：java, swing, graphics, nullpointerexception, jpanel

这两天我一直在寻找这个问题的答案，但这似乎并没有解决太多。主要是因为我一开始并不真正了解导致我的错误的原因，也不知道如何解决问题。

我一直在尝试制作某种“动画”，其中一个图层在屏幕右侧生成圆圈并随着时间的推移将它们发送到左侧。问题是每次它打算产生一个圆圈时，它都没有出现，我得到一个错误。

```
Exception in thread "Thread-4" java.lang.NullPointerException
at Ball.draw(Ball.java:39)
at Ball.run(Ball.java:23) 
```

这是导致错误的类：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.util.Random;
import javax.swing.JPanel;

public class Ball extends Thread{
    JPanel drawingPanel;
    private int x=400,y=200;
    private int dx=-2,dy=0;
    private static final int XSIZE=10,YSIZE=10;
    Random rdm = new Random();
    int y_rdm = rdm.nextInt(440)+30;

    public Ball(JPanel jp){
        drawingPanel=jp;
        dx-=1;

    }
    public void run(){
        draw();
        for (int i=0;i<1000;i++){
            try{
                Thread.sleep(10);
            }
            catch(InterruptedException e){} 
            move();
        }
    }
    private void move(){
        erase();
        changePos();
        draw();
    }
    private void draw(){
        Graphics g = drawingPanel.getGraphics();
        g.setColor(Color.WHITE);
        g.fillOval(x,y_rdm,XSIZE,YSIZE);
        g.dispose();
    }
    private void erase(){
        Graphics g=drawingPanel.getGraphics();
        g.setColor(drawingPanel.getBackground());
        g.fillOval(x,y_rdm,XSIZE,YSIZE);
        g.dispose();
    }

    private void changePos(){
        x+=dx;y_rdm+=dy;
    }

} 
```

* * *

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JPanel;
import javax.swing.Timer;

public class BallPanel extends JPanel implements ActionListener{

    JPanel drawingPanel = new JPanel();
    public BallPanel(){

      int delay = 300;
      ActionListener taskPerformer = new ActionListener() {
          public void actionPerformed(ActionEvent evt) {
              Ball b= new Ball(drawingPanel);
                b.start();
          }
      };

      new Timer(delay, taskPerformer).start();

    }
    @Override
    public void actionPerformed(ActionEvent e) {

    }

} 
```

* * *

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.io.InputStream;
import java.net.URL;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javazoom.jl.player.Player;

public class Window extends JFrame{

      private JLayeredPane layerpane;
      private JPanel up, down;

    public Window(){
          layerpane = new JLayeredPane();

          down = new JPanel();
          down.setBounds(0, 0, 450, 450);
          down.setBackground(new Color(0, 51, 102));
          layerpane.add(down, new Integer(1));

          BallPanel bp = new BallPanel();
          layerpane.add(bp, new Integer(2));
          bp.setBounds(0, 0, 450, 450);
          bp.setOpaque(!bp.isOpaque());

          Animation2 ani2 = new Ani2();
          ani2.setBounds(0, 0, 400, 450);
          layerpane.add(ani2, new Integer(3));

          ani2.setOpaque(!ani2.isOpaque());

         getContentPane().add(layerpane, BorderLayout.CENTER);

    }

        public static void main(String args[]){

        JFrame f = new Window();

        f.setVisible(true);
        f.setSize(450,450);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        try{
            URL url = new URL("file:///C://song.mp3");
            InputStream in = url.openStream();
            Player pl = new Player(in);
            pl.play();
            }        

            catch(Exception e){
                e.printStackTrace();
            } 

        }

    } 
```

请告诉我是否需要包括我的其他课程，它们似乎有点无关紧要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:48:17.593

的`getGraphics`方法`JComponent`返回与`Graphics`关联的对象`Component`。但是，如果没有`Graphics`关联的对象，它将返回 null，这就是您的代码中的情况。

仅当A被添加到`Component`与某个`Graphics`对象关联的容器中，或者它是顶级容器（`JFrame`、`JDialog`和`JApplet`）时，它才与对象关联。

您的问题是您`JPanel`的不包含在任何顶级容器中，因此其关联`Graphics`对象为空。

要解决此问题，请确保在调用`JPanel`顶级容器之前`getGraphics()`已将需要重新绘制（例如，如果它被调整大小，或者被其他窗口阻止和解除阻止，...））。`JPanel``paintComponent(Graphics g)``paintComponent`

(By the way, in your `BallPanel` class which extends `JPanel`, you define a new `JPanel` and pass it to `Ball`'s constructor. You should be passing `this` to the the constructor, since the `drawingPanel` is never added to any container, but the `BallPanel` instance itself is. It really doesn't make sense to define a `JPanel` field inside a class which is itself a `JPanel` and have the field do the job that the class itself is supposed to do.)

# python - 使用 Python 在文本中查找超链接（跟进另一篇文章）

> ID：10907554
> 
> 赞同：0
> 
> 时间：2012-06-06T02:46:03.217
> 
> 标签：python, regex

关于（[在 Python 中提取 URL](https://stackoverflow.com/questions/839994/extracting-a-url-in-python)）我有一个后续问题。注意：我是 SO 和 Python 的新手，所以请随时纠正我的礼仪。

我从上面的帖子中提取了正则表达式，这对我来说很好：

```
myString = """ <iframe width="640" height="390" src="http://www.youtube.com/embed/24WIANESD7k?rel=0" frameborder="0" allowfullscreen></iframe> """
print re.search("(?P<url>https?://[^\s]+)", myString).group("url") 
```

但是，我真正需要做的是遍历我之前从数据库中检索到的数据集。所以我做了下面，这给了我一个奇怪的错误，也在下面。

```
# Note: "data" here is actually a list of strings, not a data set     
for pseudo_url in data:
        print re.search("(?P<url>https?://[^\s]+)", str(pseudo_url)).group("url") 
```

错误：

```
Traceback (most recent call last):
  File "find_and_email_bad_press_urls.py", line 136, in <module>
    main()
  File "find_and_email_bad_press_urls.py", line 14, in main
    scrubbed_urls = extract_urls_from_raw_data(raw_url_data)
  File "find_and_email_bad_press_urls.py", line 47, in extract_urls_from_raw_data
    print re.search("(?P<url>https?://[^\s]+)", str(pseudo_url)).group("url")
AttributeError: 'NoneType' object has no attribute 'group' 
```

当我用谷歌搜索时，我发现了大量不相关的帖子，所以我希望 SO 能有所启发。我的预感是正则表达式在一些空数据、特殊字符等上被炸毁了，但我对 Python 的了解还不够，无法弄清楚。转换为字符串也无济于事。

任何想法或解决方法都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:54:01.440

您的正则表达式没有在`data`. 在拨打电话之前，您应该检查以确保您有匹配`group`：

```
for pseudo_url in data:
    m = re.search("(?P<url>https?://[^\s]+)", pseudo_url)
    if m:
        print m.group("url") 
```

`str()`如果 pseudo_url 已经是一个字符串，则不需要调用任何一个。

正如@Blender 在他的评论中所建议的那样，如果`data`真的是从 HTML 文件中读取的行，您可能需要考虑使用 Beautiful Soup 而不是正则表达式。

# delphi - 使用 Delphi XE 在类中存储通用数组

> ID：10907555
> 
> 赞同：3
> 
> 时间：2012-06-06T02:46:04.510
> 
> 标签：delphi, generics

使用下面的结构，我如何定义我的 TAnimalCollection 类来存储我的收藏？调用 SelectAll 或 SelectTop10 将更新 SelectedRecords。删除私有字段允许代码编译，但没有机制来存储返回的结果集。

```
 TDog = class
  private
    FBreed: string;
  public
    property Breed: string read FBreed write FBreed;
  end;

  TCat = class
  private
    IsWild: string;
  public
    property IsWild: string read FIsWild write FIsWild;
  end;

  TMyArray<T> = array of T;

  TAnimalCollection = class
  private
    SelectedRecords: TMyArray<T>; // Generates: Undeclared Identifier: 'T'
  public
    function SelectAll<T>: TMyArray<T>;
    function SelectTop10<T>: TMyArray<T>; 
    // Other Methods
  end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T04:45:52.517

首先，你不需要`TMyArray`；内置`TArray`类型做同样的事情。

不过编译器是正确的。在您的字段声明中，没有`T`. 泛型参数需要在声明的*左侧*引入，然后才能在右侧使用。**如果 Delphi 支持通用字段**，则声明将如下所示：

```
SelectedRecords<T>: TArray<T>; 
```

**但它没有**，而且在这种情况下你也不希望它出现。您显然希望将两个完全不相关的类同时存储在同一个数组中。数组始终是单一类型。唯一统一`TDog`和的单一类型`TCat`是`TObject`，因此您的数组需要属于该类型：

```
SelectedRecords: TArray<TObject>;
// or, more conventionally,
SelectedRecords: array of TObject; 
```

欢迎您声明“泛型数组”，但只能作为泛型类的字段或泛型方法的变量。如果您可以声明一个独立的泛型数组，请尝试考虑何时确定数组元素的实际类型。如果不是在你声明数组的时候，那么什么时候？使用类和方法，您可以在声明类的变量、实例化类或调用方法时指定类型参数。这些是与其*声明*分开的*用途*，并且每种用途都是不同的。当你声明一个变量时，你必须以你声明它的方式使用它——一个变量的类型不能在不重新编译程序的情况下改变。

# ios - UITableView，将第一行移到最后一行

> ID：10907557
> 
> 赞同：1
> 
> 时间：2012-06-06T02:46:17.117
> 
> 标签：ios, uitableview

我用的是方法`moveRowAtIndexPath:indexPath toIndexPath:toPath`，但是太快了，我想第一排慢慢下到最后，我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:45:50.900

您可以通过以下任何一种方式实现 -

1.  用来`NSTimer`插入一些延迟
2.  使用`performSelector withDelay`.

# javascript - 如果变量为空，则不显示显示关联的 HTML

> ID：10907560
> 
> 赞同：0
> 
> 时间：2012-06-06T02:46:46.727
> 
> 标签：javascript, facebook-graph-api, cordova

我正在开发一个 PhoneGap iOS Facebook 应用程序，并且正在显示用户的新闻源。到目前为止，这是我的代码：

```
<script>
function showPosts() {
    FB.api('/me/home', function(response) {
        console.log(response);

        if (!response.error) {
            var markup = '';

            var messages = response.data;

            for (var i = 0; i < messages.length && i < 5; i++) {
                var message = messages[i];

                markup += '<p><img src="' + message.picture + '">' + message.message + '<img src="https://graph.facebook.com/' + message.from['id'] + '/picture">' + message.from['name'] + '</p><br>';
            }

           document.getElementById('newsfeedposts').innerHTML = markup;
        }
    });
}
</script> 
```

现在，如果帖子中没有消息，则会显示“未定义”。此外，当没有消息图片时，会有一个空的图像图标，因为`<img>`标签仍在加载中。是否可以创建一个 if 语句来说明如果 message.picture 为空而不是不显示`<img src="message.picture">`？

发布消息也是如此。如果`message.message`为空，我是否可以创建一个 if 语句，说如果没有消息则不显示任何内容，从而消除“未定义”？

如果 if 语句有效，我应该把它放在哪里？我尝试在“标记”中放置一个 if 语句，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:51:51.457

很简单：

```
if (typeof message.picture != 'undefined') {
  // message.picture is not empty, so do the stuff inside of here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T04:19:12.293

由于`message`将永远存在，并且`picture`在 inside `message`，即使`picture`是 undefined 也不会抛出错误。因此，您可以这样做：

```
if (message.picture) {
    //Do things here.
} 
```

# bash - 简化 bash 中的条件语句（if 语句）

> ID：10907566
> 
> 赞同：0
> 
> 时间：2012-06-06T02:47:54.993
> 
> 标签：bash, syntax, if-statement, conditional-statements

我的问题更多的是关于代码效率和简单性的问题，而不是简单地完成一项任务。场景是这样的：我想创建一个 bash 脚本，当它位于每个用户主目录中时，它使用 for 循环遍历 /Users 我希望它查看两个不同的目录是否存在以下样式：

```
for USER in /Users/*; do
    if [ -d "$USER/Library/Caches/com.spotify.Client" ]; then 
        rm -rf "$USER/Library/Caches/com.spotify.Client" 
```

...但我需要检查多个目录。我如何以最优雅的方式完成此任务？我想避免使用一系列 if 语句，但不知道实现这一点的最佳方法。

最后，我想用find命令找到一个文件，然后将find的结果（即找到的文件的路径）设置为一个变量，并输入到另一个命令中。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:57:14.197

根据我对您的要求的了解，我将嵌套`for`循环：

```
subdirs=(
    "Library/Caches/com.spotify.client"
    "some/other/subdir/"
)

for homedir in /Users/*; do
    for subdir in "${subdirs[@]}"; do
        dir="$homedir/$subdir"
        if [[ -d "$dir" ]]; then
            rm -rf "$dir"
        fi
    done
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T05:04:06.533

以下内容建立在@David Wolever 上面的回答之上；这些版本更短，让 shell 在前面做更多的 globbing。

不使用中间（数组）变量的内联单循环版本：

```
for dir in /Users/*/'Library/Caches/com.spotify.client/' /Users/*/'some/other/subdir/'; do
    [[ -d "$dir" ]] && rm -rf "$dir"
done 
```

数组变量版本：

```
subdirs=(
    'Library/Caches/com.spotify.client/'
    'some/other/subdir/'
)

for subdir in "${subdirs[@]}"; do
    for dir in /Users/*/"$subdir"; do 
        [[ -d "$dir" ]] && rm -rf "$dir"
    done
done 
```

# ruby-on-rails - 如何解决您的供应商/缓存目录中似乎缺少一些 gem。在任何来源中都找不到“任何东西”？

> ID：10907568
> 
> 赞同：9
> 
> 时间：2012-06-06T02:48:06.327
> 
> 标签：ruby-on-rails, ruby, capistrano, bundler

这真让我抓狂。我在 Gemfile 中添加了一个 gem (hirb)，现在我无法部署。

是的，我用过`bundle install --path vendor/cache`

是的，我用过`bundle package`

是的，我提交了 Gemfile 和 Gemfile.lock

**我删除了生产机器中的 vendor/cache 文件夹，所以它会再次生成它而不是更新它。这是错的吗？**

每当我跑步时，`cap:deploy`我都会得到以下...

```
executing "cd /var/www/releases/20120606002321 && bundle install --gemfile /var/www/releases/20120606002321/Gemfile --path /var/www/shared/bundle --deployment --quiet --without development test"
    servers: ["11.111.11.11"]
    [11.111.11.11] executing command
    [11.111.11.11] env PATH=/var/lib/gems/1.9.1/bin:$PATH sh -c 'cd /var/www/releases/20120606002321 && bundle install --gemfile /var/www/releases/20120606002321/Gemfile --path /var/www/shared/bundle --deployment --quiet --without development test'
 ** [out :: 11.111.11.11] Some gems seem to be missing from your vendor/cache directory.
 ** [out :: 11.111.11.11] Could not find multi_json-1.3.6 in any of the sources
    command finished in 48571ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /var/www/releases/20120606002321; true"
    servers: ["11.111.11.11"]
    [11.111.11.11] executing command
    [11.111.11.11] env PATH=/var/lib/gems/1.9.1/bin:$PATH sh -c 'rm -rf /var/www/releases/20120606002321; true'
    command finished in 6417ms
failed: "env PATH=/var/lib/gems/1.9.1/bin:$PATH sh -c 'cd /var/www/releases/20120606002321 && bundle install --gemfile /var/www/releases/20120606002321/Gemfile --path /var/www/shared/bundle --deployment --quiet --without development test'" on 11.111.11.11 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-25T20:17:57.123

您可能想尝试删除`--deployment`标志。这似乎允许 Bundler 从`vendor/cache`源代码*和*Rubygems 安装。

**帽文件：**

```
set :bundle_flags, "--quiet --no-cache" 
```

一个相关的错误：[https ://github.com/bundler/bundler/issues/1454](https://github.com/bundler/bundler/issues/1454)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-22T21:16:23.907

尝试，

```
bundle install --no-deployment 
```

这消除了`--deployment`阻止您尝试更新的“捆绑冻结”。您可以通过`BUNDLE_FROZEN`在[`.bundle/config`](https://bundler.io/v1.16/bundle_config.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T05:40:23.380

@leonel，您可以检查几件事：

1.  看看你是否有正确的来源来获取宝石（来源“http://rubygems.org”）
2.  尝试做一个 gem install multi_json
3.  查看您的 Web 服务器的日志文件。在这种情况下，当您使用普通武器无法击中目标时，它们会很有帮助。

稍后您应该检查您是否有旧版本，然后尝试使用 gem 更新到所需（或最新）版本的 multi_json。

希望有帮助，R

# git - 克隆后立即更改 git 存储库？

> ID：10907569
> 
> 赞同：4
> 
> 时间：2012-06-06T02:48:08.933
> 
> 标签：git

刚刚克隆[了这个](https://github.com/horndude77/open-scores)，目录立即有变化吗？

我从来没有遇到过这样的事情，我很好奇为什么会这样？这怎么可能？

更新：

`git clone git://github.com/horndude77/open-scores.git`我在运行 git status 后立即使用和克隆了 repo ：

```
git status
# Not currently on any branch.
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   SaintSaensRomanceOp36/defs.ily
#       modified:   SaintSaensRomanceOp36/horn.ily
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

git diff 显示：

```
warning: CRLF will be replaced by LF in SaintSaensRomanceOp36/defs.ily.
The file will have its original line endings in your working directory.
warning: CRLF will be replaced by LF in SaintSaensRomanceOp36/horn.ily.
The file will have its original line endings in your working directory.
diff --git a/SaintSaensRomanceOp36/defs.ily b/SaintSaensRomanceOp36/defs.ily
index 07e09ac..c7961be 100644
--- a/SaintSaensRomanceOp36/defs.ily
+++ b/SaintSaensRomanceOp36/defs.ily
@@ -1,47 +1,47 @@
-\version "2.13.13"
.
.
. 
```

注意：仅包含差异的顶部，因为它很长。

当我克隆存储库时是否删除了 CRLF 字符，如果是，这些字符是如何包含在对 bigin 的提交中的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T13:59:33.233

克隆存储库时会自动删除在 Windows 机器上提交时包含的 CRLF 字符。然后 Git 检测到此更改，因此在克隆后立即修改存储库，用户执行了`git clone`.

我通过`* text=auto`从我的`.gitattributes`文件中删除来解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T02:51:05.250

这是 Windows 和 Linux 之间存在差异的问题。有一个堆栈溢出问题解决了这个[问题](https://stackoverflow.com/questions/1967370/git-replacing-lf-with-crlf)。

您可以简单地通过执行以下操作来修复它：

```
$ git config core.autocrlf true 
```

# c++ - 使用带有 clang 的初始化列表初始化简单结构

> ID：10907574
> 
> 赞同：1
> 
> 时间：2012-06-06T02:49:33.310
> 
> 标签：c++, types, initialization, clang

```
struct E_Point {
  double x, y;
  E_Point(): x(0), y(0) {}
  E_Point(double x, double y) : x(x), y(y) {}
};

E_Point problem[] = { 
  {0.3871953044519425, -0.91857980824611341}, // Error: initialization of non-aggregate type 'E_Point' with an initializer list
  {0.36139704793723609, 0.91605957361605106}, 
  {-0.8208980020500205, 0.52853407296583088}, 
  {0.36178501611208552, 0.88880385168617226}, 
  {-0.43211245441046209, 0.6803420222771047} 
}; 
```

`clang`用3.1编译。

我应该指出，这是在 GCC 4.6.1 上编译的。

我目前的理解是它`problem`是一个非聚合类型，因为它是一个结构数组，使其复合，而不仅仅是一个结构或数组。

但是发送`-std=c++11`标志`clang`并不能缓解问题。

更新：好的。看起来我的版本存在`clang`某种缺陷，无论出于何种原因都无法处理。

什么是更传统的初始化方式？我这样做吗？这可以编译，但它会产生相同的代码吗？它会在原版没有的情况下调用ctor吗？

```
E_Point problem[] = {
    E_Point(0.3871953044519425, -0.91857980824611341), // 1559
    E_Point(0.36139704793723609, 0.91605957361605106), // 1560
    E_Point(-0.8208980020500205, 0.52853407296583088), // 1798
    E_Point(0.36178501611208552, 0.88880385168617226), // 1799
    E_Point(-0.43211245441046209, 0.6803420222771047) // 1800
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:44:28.913

这是 clang++ 中的一个错误：

[http://llvm.org/bugs/show_bug.cgi?id=12670](http://llvm.org/bugs/show_bug.cgi?id=12670)

在您的情况下，您可以只使用对构造函数的显式调用，正如您在最后一个代码片段中提供的那样。至于语义是否真的相同（*是否会生成相同的代码*），在大多数情况下会。

不同语法会导致不同行为的情况是，当构造的类型有一个采用 a 的构造函数时`std::initializer_list<>`，在这种情况下，*大括号初始化器*将构造该初始化器列表。如果类型没有这样的构造函数，就像你的情况一样，大*括号初始化器*将调用适当的构造函数。

# javascript - 独特的 JavaScript/DHTML 菜单：Onmouseover/onmouseout 脚本逻辑挑战

> ID：10907578
> 
> 赞同：1
> 
> 时间：2012-06-06T02:50:01.290
> 
> 标签：javascript, drop-down-menu, dom-events, menubar, dhtml

我正在尝试创建一个使用以下 HTML 的 JavaScript 菜单：

```
<table id="mainMenu">
  <tr>
    <td id="mainMenu1">Item 1</td>
    <td id="mainMenu2">Item 2</td>
    <td id="mainMenu3">Item 3</td>
  </tr>
</table>

<table id="subMenuA" style='hidden';>
  <tr>
    <td>Subitem A1</td>
    <td>Subitem A2</td>
    <td>Subitem A3</td>  
  </tr>
</table>
<table id="subMenuB" style='hidden';>
  <tr>
    <td>Subitem B1</td>
    <td>Subitem B2</td>
    ... 
```

当#mainMenu1 onmouseover 时，我想要#subMenuA.style='visible'。
当#mainMenu1 onmouseout 时，我想要#subheaderA.style='hidden'。
当#subMenuA onmouseout 时，我想要#subheaderA.style='hidden'。

请注意，传统的下拉脚本不起作用，因为这两个菜单是两个独立的元素，并且它们之间的距离很小。因此，有必要在这两个要素之间“架起桥梁”。这该怎么做？？

任何人都可以建议一个基本的 JavaScript 代码来让它工作吗？即使只是逻辑/想法也会很棒。我真的很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:18:52.397

更新答案：http: [//jsfiddle.net/imsky/zcwJt/4/](http://jsfiddle.net/imsky/zcwJt/4/)

```
var $ = function(el) {
    return document.getElementById(el)
};

var menu_timer;

$("item1").onmouseover = function() {
    window.clearTimeout(menu_timer);
    $("menu1").style.display = "block";
}

$("menu1").onmouseover = function() {
    window.clearTimeout(menu_timer);
}

$("menu1").onmouseout = function(e) {
    window.clearTimeout(menu_timer);
    if (!parent(e.relatedTarget, this)) {
        var menu = this;
        menu_timer = window.setTimeout(function() {
            menu.style.display = "none";
        }, 1000)
    }
}

var parent = function(el, p) {
    if (!el) {
        return false;
    }
    if (el !== p) {
        while (el.parentNode) {
            el = el.parentNode;
            if (el == p) {
                return true;
            }
        }
    }
    else {
        return true;
    }
    return false;
} 
```

# java - Java：使用文件阅读器在while循环中添加到字符串数组

> ID：10907582
> 
> 赞同：1
> 
> 时间：2012-06-06T02:51:02.987
> 
> 标签：java, arrays, loops, arraylist, while-loop

我一直在制作一个小程序，需要读取可能会发生变化并且需要随时调用的高尔夫球场列表。这是代码：

```
 public class Courses {
public String[] courselist;
public void loadCourses() throws IOException{
    int count = 0;
    int counter = 0;
    File f = new File("src//courses//courses.txt");
    BufferedReader reader = new BufferedReader(new FileReader(f));
    while(count<1){
        String s = reader.readLine();
        if(s.equalsIgnoreCase("*stop*")){
            reader.close();
            count = 5;

        }else{
            courselist[counter] = s;
            counter++;
        }
        s = "";
    }
} 
```

}

现在这就是 txt 文件中的内容。

```
 RiverChase 
    Steward Peninsula 
    Lake Park 
    Coyote Ridge 
    *stop* 
```

现在，当我开始运行程序时，因为我立即调用该方法，它给了我一个抛出异常，这是因为数组。我需要留下来排列，因为我在 JComboBox 中使用它。如果你能帮助或解决问题。很可能我只是做错了，我是菜鸟。只是帮忙。提前致谢。我知道所有文件阅读器和东西都能正常工作，因为它可以正确打印到系统，我只需要帮助将它重复写入数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:58:45.450

你应该在使用它之前初始化你的数组

```
public static final MAX_SIZE = 100;
public String[] courselist = new String[MAX_SIZE]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:01:50.097

您最好创建一个更易于操作的列表，并在流程结束时将其转换为数组：

```
 List<String> list = new ArrayList<String>();
    String [] array = list.toArray(new String [] {}); 
```

这是使用 List 加载的可能实现：

```
public static String [] loadCourses() throws IOException {
    File f = new File("src//courses.txt");
    BufferedReader reader = new BufferedReader(new FileReader(f));
    List<String> courses = new ArrayList<String>();
    while (true){
        String s = reader.readLine();
        if (s == null || s.trim().equalsIgnoreCase("*stop*")){
            break;
        } else{
            courses.add(s);
        }
    }
    return courses.toArray(new String [] {});
} 
```

还有为什么要使用*stop*关键字？当您到达文件末尾时（当 s 为空时），您可以简单地停止该过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T03:03:35.133

更改您的代码以在 期间分配一个新数组`loadCourses()`，并添加`loadCourses()`对您的构造函数的调用：

```
public class Courses {
    public String[] courselist;

    public Courses() throws IOException {  // <-- Added constructor
        loadCourses();                     // <-- Added call to loadCourses
    }

    public void loadCourses() throws IOException {
        int count = 0;
        int counter = 0;
        File f = new File("src//courses//courses.txt");
        BufferedReader reader = new BufferedReader(new FileReader(f));
        List<String> courses = new ArrayList<String>(); // <-- A List can grow 
        while(true){
            String s = reader.readLine();
            if (s.equalsIgnoreCase("*stop*")){
                break;
            }
            courses.add(s);
        }
        courseList = courses.toArray(new String[0]); // <-- assign it here
    }
} 
```

这确保了当您创建一个实例时，它会从初始化数组开始。您不仅不会得到错误，而且数据将始终正确（与其他简单地创建空（即无用）数组的答案不同。

请注意，此代码适用于文件中任意数量的课程名称（不仅仅是 5 个）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T03:12:52.160

这里有一些例子，没有使用`*stop*`：

```
public class ReadFile {

    public static void main(String[] args) {
        BufferedReader reader = null;
        List<String> coursesList = new ArrayList<>();
        String[] courses;

        try {
            File file = new File("courses.txt");
            reader = new BufferedReader(new FileReader(file));
            String readLine;

            do {
                readLine = reader.readLine();
                if(readLine == null)
                    break;

                coursesList.add(readLine);
            } while (true);
        } catch (IOException ex) {
            Logger.getLogger(ReadFile.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            try {
                reader.close();
            } catch (IOException ex) {
                Logger.getLogger(ReadFile.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

        courses = coursesList.toArray(new String[coursesList.size()]);

        for(int i = 0; i < courses.length; i++) {
            System.out.println(courses[i]);
        }
    }
} 
```

# .net - web.config 的 appsettings 值内的标签。如何？

> ID：10907583
> 
> 赞同：9
> 
> 时间：2012-06-06T02:51:04.777
> 
> 标签：.net, xml, web-config

```
 <appSettings>
    <add key="CodeNF" value="somevalue"/>
  </appSettings>

In the above code, i need to put value="<somevalue>". 
```

可以在我的 web.comfig 中做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-06T02:58:59.163

您必须对 < 和 > 字符进行 html 编码

```
"&lt;somevalue&gt;" 
```

# java - 调试“安全点”错误 - 需要理论或实践来调试 JVM 崩溃？

> ID：10907589
> 
> 赞同：4
> 
> 时间：2012-06-06T02:52:39.173
> 
> 标签：java, linux, amazon-web-services, ning

我们在 AWS 上运行的 Ubuntu 服务器上发生了令人难以置信的难以捉摸的 jvm 崩溃。

*   我们的 JVM 在抓取一些网页时崩溃。

*   崩溃发生在“安全点”cpp 模块的第 308 行。在出现 gauranteeArmed==0 语句的阶段。

*   我们的系统管理员建议，在崩溃时，JVM 创建了大量线程。

*   我们没有在其他 Linux 或 OSX 机器中重现此错误。

*   我们使用 Ning 库来爬取几个网页。

**相关文章**

*   [如何调查 JVM 崩溃的原因？](https://stackoverflow.com/questions/8152393/how-do-i-investigate-the-cause-of-a-jvm-crash)
*   [JBoss / HotSpot JVM 崩溃](https://stackoverflow.com/questions/5991110/jboss-hotspot-jvm-crashing)

在这些帖子中的每一个中，都观察到了来自“无处”的“安全点”相关崩溃。最有趣的是，上面的第一篇文章实际上展示了网络相关事件期间的 JVM 崩溃。

这个错误的神秘本质让我相信存在一个与线程创建和调度相关的错误，该错误是我们当前版本的 Ubuntu 特有的，涉及 java 调用其一些并发特性的方式，或者是一些底层库不兼容。对我们的特殊情况非常特殊。

**我的问题**

我的主要问题是 - 调试涉及这些“安全点”的 JVM 堆栈跟踪的最佳方法是什么，我可以从哪里开始学习处理此类错误？沿着这条线还有其他问题，但我还没有看到一个通用的答案。

其次，对 aws、java、网络以及 Ubuntu 在云中的不同行为方式的任何见解在这里都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:09:48.067

Try using the very latest JVM (6u32 or 7u4) and see if it's still reproducible. If you are on an older version, there's at least a decent chance it's already been fixed in the latest.

# eclipse - 签入版本控制时，您将 server.xml 放在 tomcat eclipse 项目中的哪个位置？

> ID：10907592
> 
> 赞同：3
> 
> 时间：2012-06-06T02:53:51.927
> 
> 标签：eclipse, tomcat, version-control, server.xml

当你在 eclipse 中创建一个 tomcat 项目时，它会将 server.xml 文件放在 Servers 下，它在项目资源管理器中显示为一个单独的“项目”。我的问题是，如何最好地将其签入源代码控制，以便当另一个用户尝试签出项目时，server.xml 文件位于正确的位置。

我目前使用 Perforce 版本控制系统，但过去我在使用其他系统时也遇到过同样的问题。

根据我的经验，其他用户最终会在 eclipse 中创建自己的 tomcat 服务器，然后他们将不得不复制自定义 server.xml。

我能做的最好的是将 server.xml 保存到项目内的 WEB-INF 或其他目录中，然后将其更新到源代码控制。但是，这会带来风险，因为您必须记住将 server.xml 更改保存回 WEB-INF。更不用说您必须记录 server.xml 的复制作为用户创建项目的设置步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T09:29:15.480

我会在 web 应用程序项目下创建一个文件夹，例如 etc/，我会在其中放置一个大的 README 和一个指向 server.xml 的硬链接。因此，任何签出该项目的人都将被指示做同样的事情（在自述文件中）——并且对项目的所有更改都`server.xml`将被版本化。我不会弄乱 WEB-INF - server.xml 在那里没有位置。

# sql - SQL 运行股票价格

> ID：10907597
> 
> 赞同：2
> 
> 时间：2012-06-06T02:54:45.840
> 
> 标签：sql, sql-server-2005

我正在尝试编写一个 SQL 查询（SQL Server 2005）来计算手头库存的当前值。我有一个看起来像这样的表：

```
ID | QTY | BasePrice
1  | 10  | 100
2  | -2  | 0
3  | -2  | 0
4  | 10  | 200
5  | -2  | 0 
```

其中 qty > 0 是进货，< 0 是出库。由于其他业务规则，负数量不记录 BasePrice。基本价格是每单位的价格。

我需要找到仍然存在的库存的平均价格或总价格。所以结果列需要是：

```
ID | QTY | BasePrice | TotalPrice | AveragePrice
1  | 10  | 100       | 1000       | 100
2  | -2  | 0         | 800        | 100
3  | -2  | 0         | 600        | 100
4  | 10  | 200       | 2600       | 162.50
5  | -2  | 0         | 2275       | 162.50 
```

我能够解决这个问题：

```
select  g1.projectionID,
        g1.qty, 
        g1.basePrice,
        ((sum(isnull(g2.basePrice,0)))) * sum(isnull(g2.Qty,0)) + (g1.Qty * (case when g1.Qty < 0 THEN (sum(isnull(g2.basePrice,0))) ELSE g1.BasePrice END)) As CurrenctValueOfStockOnHand

from test g1
left join test g2 on g2.projectionID < g1.projectionID
group by g1.ProjectionID, g1.Qty, g1.BasePrice 
```

这使：

```
ID| QTY| BasePrice | TotalPrice
1 | 10 | 100.0000  | 1000.0000
2 | -2 | 0.0000    | 800.0000
3 | -2 | 0.0000    | 600.0000
4 | 10 | 200.0000  | 2600.0000
5 | -2 | 0.0000    | 4200.0000 
```

但正如您所见，在添加第二批库存后（在 ID 4 之后），它给出了错误的值。

我们目前有循环遍历每条记录并保持运行总数的 C# 代码。对于大型股票，这需要很长时间。如果唯一的选择是使用游标，那么我们将保留 C# 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:30:24.743

在[Randy](https://stackoverflow.com/users/318749)提到使用 LAG 函数之后，我在 SQL Server 中快速谷歌搜索了 LAG 函数，并找到了使用表变量和更新语句的代码。

```
declare @TempStocks TABLE (ProjectionID int, Qty Int, BasePrice Decimal (18,4), runningQty int, totalValueOfStockOnHand decimal(18,4))

insert into @TempStocks
select g1.*, sum(isnull(g2.Qty, 0)) + g1.Qty, 0
from gregTest g1
left join gregTest g2 on g2.projectionID < g1.ProjectionID
group by g1.ProjectionID, g1.BasePRice, g1.Qty

select * from @TempStocks

declare @CurrentValue Decimal (18,4)

set @CurrentValue = 0

update @TempStocks
set @CurrentValue = TotalValueOfStockOnHand = case when (Qty > 0) THEN (@CurrentValue + (BasePrice * Qty)) ELSE @CurrentValue + ((@CurrentValue / (RunningQty - qty) * Qty)) END

select *, TotalValueOfStockOnHand / RunningQty from @TempStocks 
```

我仍然不相信这是最好的答案，但它确实在不使用光标的情况下给出了正确的输出

# python - python windows disk monitor(snmp) ，两个脚本怎么合并成一个脚本？

> ID：10907599
> 
> 赞同：-1
> 
> 时间：2012-06-06T02:55:08.353
> 
> 标签：python, snmp

我必须用主动监控，我需要监控到windos的整个硬盘，盘符通过传递参数的方式。如果我达到我想要的，你需要这三个脚本。谁能帮我改进下一个？我想要一个脚本来完成这两个脚本的工作。如何合并？

1：编码光盘

```
import sys
import os
import commands
warning = sys.argv[2]
critical = sys.argv[3]
ip =sys.argv[5]
#val = sys.argv[1]
StorageAllocationUnitsC="1.3.6.1.2.1.25.2.3.1.4.1"#last4.1=Cdisk,4.2=Ddisk....
StorageSizeC="1.3.6.1.2.1.25.2.3.1.5.1"#last5.1=Cdisk,5.2=Ddisk....
StorageUsedC="1.3.6.1.2.1.25.2.3.1.6.1"#last6.1=Cdisk,5.2=Ddisk....

StorageAll = "snmpwalk -v 2c -c public %s %s" % (ip,StorageAllocationUnitsC)
(r_c,r_e) = commands.getstatusoutput(StorageAll)
if r_c != 0:
    print "C - snmpwalk is Error."
else:
    StorageAllC = r_e.split("INTEGER: ")[-1][:4]

StorageSize = "snmpwalk -v 2c -c public %s %s" % (ip,StorageSizeC)
(r_c,r_e) = commands.getstatusoutput(StorageSize)
if r_c != 0:
     print "C - snmpwalk is Error."
else:
     StorageSize = r_e.split("INTEGER: ")[1]

StorageUsed = "snmpwalk -v 2c -c public %s %s" % (ip,StorageUsedC)
(r_c,r_e) = commands.getstatusoutput(StorageUsed)
if r_c !=0:
    print "C - snmpwalk is not value."
else:
    StorageUsed =  r_e.split("INTEGER: ")[1]

diskall = int(StorageAllC)*int(StorageSize)/1024/1024/1024
diskusd = int(StorageAllC)*int(StorageUsed)/1024/1024/1024
diskrate = round(float(diskusd)/float(diskall)*100,2)

if int(sys.argv[2]) > int(diskrate):
    print "Critical - pls check Cdiskrate %s" % diskrate + "%"
    ret = 2
elif int (sys.argv[3]) > int(diskrate):
    print "Warning - pls check Cdiskrate %s" % diskrate + "%"
    ret = 1
else:
    print "OK - good! %s" % diskrate + "%"
    ret =0
sys.exit(ret) 
```

2：编码Ddisk

```
import sys
import os
import commands
warning = sys.argv[2]
critical = sys.argv[3]
ip =sys.argv[5]
#val = sys.argv[1]
StorageAllocationUnitsC="1.3.6.1.2.1.25.2.3.1.4.2"#last4.1=Cdisk,4.2=Ddisk....
StorageSizeC="1.3.6.1.2.1.25.2.3.1.5.2"#last5.1=Cdisk,5.2=Ddisk....
StorageUsedC="1.3.6.1.2.1.25.2.3.1.6.2"#last6.1=Cdisk,5.2=Ddisk....

StorageAll = "snmpwalk -v 2c -c public %s %s" % (ip,StorageAllocationUnitsC)
(r_c,r_e) = commands.getstatusoutput(StorageAll)
if r_c != 0:
    print "C - snmpwalk is Error."
else:
    StorageAllC = r_e.split("INTEGER: ")[-1][:4]

StorageSize = "snmpwalk -v 2c -c public %s %s" % (ip,StorageSizeC)
(r_c,r_e) = commands.getstatusoutput(StorageSize)
if r_c != 0:
     print "C - snmpwalk is Error."
else:
     StorageSize = r_e.split("INTEGER: ")[1]

StorageUsed = "snmpwalk -v 2c -c public %s %s" % (ip,StorageUsedC)
(r_c,r_e) = commands.getstatusoutput(StorageUsed)
if r_c !=0:
    print "C - snmpwalk is not value."
else:
    StorageUsed =  r_e.split("INTEGER: ")[1]

diskall = int(StorageAllC)*int(StorageSize)/1024/1024/1024
diskusd = int(StorageAllC)*int(StorageUsed)/1024/1024/1024
diskrate = round(float(diskusd)/float(diskall)*100,2)

if int(sys.argv[2]) > int(diskrate):
    print "Critical - pls check Cdiskrate %s" % diskrate + "%"
    ret = 2
elif int (sys.argv[3]) > int(diskrate):
    print "Warning - pls check Cdiskrate %s" % diskrate + "%"
    ret = 1
else:
    print "OK - good! %s" % diskrate + "%"
    ret =0
sys.exit(ret) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:03:26.233

您真正需要做的就是结合一些变量。有更好的方法来构建 snmp 查询，但这超出了这个问题的范围。

```
import sys
import os
import commands

warning = sys.argv[2]
critical = sys.argv[3]
ip =sys.argv[5]
#val = sys.argv[1]

StorageAllocationUnitsC ="1.3.6.1.2.1.25.2.3.1.4.1"
StorageAllocationUnitsD ="1.3.6.1.2.1.25.2.3.1.4.2"
StorageSizeC="1.3.6.1.2.1.25.2.3.1.5.1"
StorageSizeD="1.3.6.1.2.1.25.2.3.1.5.2"
StorageUsedC="1.3.6.1.2.1.25.2.3.1.6.1"
StorageUsedD="1.3.6.1.2.1.25.2.3.1.6.2"

results = dict()

for oid,descr in [(StorageAllocationUnitsC,"C_StorageUnits"), 
    (StorageAllocationUnitsD,"D_StorageUnits")]:
    StorageAll = "snmpwalk -v 2c -c public %s %s" % (ip,oid)
    (r_c,r_e) = commands.getstatusoutput(StorageAll)
    if r_c != 0:
        print "%s - snmpwalk is Error." % descr
    else:
        results[descr] = r_e.split("INTEGER: ")[-1][:4]

for oid,descr in [(StorageSizeC, "C_StorageSize"), 
    (StorageSizeD, "D_StorageSize"), (StorageUsedC, "C_StorageUsed"), 
    (StorageUsedD, "D_StorageUsed")]:
    Storage = "snmpwalk -v 2c -c public %s %s" % (ip,oid)
    (r_c,r_e) = commands.getstatusoutput(Storage)
    if r_c != 0:
         print "%s - snmpwalk is Error." % descr
    else:
         results[descr] = r_e.split("INTEGER: ")[1] 
```

所有结果都存储在名为的 python 字典中`results`

# c# - 没有出现带有图像的 WPF 按钮

> ID：10907600
> 
> 赞同：2
> 
> 时间：2012-06-06T02:55:13.370
> 
> 标签：c#, wpf, image, button

我正在使用几个小时前在一个问题上找到的以下代码来使按钮具有图像：

```
 <Button Name="bPlay" Height="70" Width="70" Margin="359,480,349,11">
            <Button.Template>
                <ControlTemplate>
                    <Border HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Image Source="pack://siteoforigin:,,,/Resources/play.bmp" Width="70" Height="70" />
                    </Border>
                </ControlTemplate>
            </Button.Template>
        </Button> 
```

问题是由于某种原因它在 Visual Studio 上看起来不错，但是当我运行程序时，这些按钮不会出现。我找不到问题，我有点卡住了。图片`play.bmp`显然添加到资源中，但我仍然不知道问题是什么，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T03:04:06.457

URI 中的“siteoforigin”表示文件必须位于相对于执行程序集目录的给定路径中。您的可执行文件很可能位于 bin/Debug 文件夹中。它正在查看可能不存在的可执行文件的子目录（“bin/Debug/Resources/play.bmp”）。

如果要以这种方式链接到文件，则必须告诉 Visual Studio 将其复制到输出文件夹（从“属性”窗格）。或者自己复制。

或者更好的是，您应该将其作为资源链接，它将嵌入到应用程序中。在属性窗格中将文件的构建类型设置为 Resource，并使用项目文件夹中的相对路径链接到它。在这种情况下，在 XAML 中直接写“Resources/play.bmp”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:02:02.827

尝试简化您的代码，也许只是将图像拉出并查看是否显示。

```
<Button Name="bPlay" Height="70" Width="70" Margin="359,480,349,11">
    <Image Source="pack://siteoforigin:,,,/Resources/play.bmp" Width="70" Height="70" />
</Button> 
```

也应该有效

# android - Android 蓝牙低功耗摩托罗拉 API 配对

> ID：10907602
> 
> 赞同：2
> 
> 时间：2012-06-06T02:55:25.430
> 
> 标签：android, bluetooth, bluetooth-lowenergy

我正在使用摩托罗拉随 RAZR 提供的 BT 4.0 API。在[他们的一份文档中](http://developer.motorola.com/docs/bluetooth-low-energy-api/)，它声明在连接和使用他们的框架之前使用 Android API 进行配对。根据他们的指示，我一直在与 OS 蓝牙设置应用程序配对，但它从不提示我输入密钥。它会配对但似乎不会结合，这对我来说很重要。

我的问题是，当他们说“使用 Android API”时，这是指简单地使用 OS 蓝牙实用程序进行配对（就像我一直在做的那样），或者有什么方法可以在我的应用程序中使用代码来完成。他们引用了“createBond()”函数，据我所知，它不是一个可访问的函数（至少在没有一些怪异的库或反射的情况下不是这样）。

非常感谢任何建议，特别是任何成功使用 API 的人，如果他们能说明他们的过程。在这一点上，我只是想弄清楚:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:42:08.837

劳埃德，

您是对的，请按照您发布的链接中的说明进行操作。

在编码之外，当他们说使用标准的 android api 进行“非 le”操作时，他们的意思是继续配对 ble 设备，就像在 android 设置 -> 无线和网络 -> 蓝牙 - 中的任何蓝牙经典设备一样 - > 扫描设备。

如果您使用的设备是与motorola le 兼容的设备，则ble 设备将**配对但未连接。**

现在，在代码中，您可以通过相同的方法检测此配对设备

```
BluetoothAdapter.getDefaultAdapter().getBondedDevices() 
```

要仔细检查您的 Android 手机是否与 LE 兼容，请运行以下代码：

```
 public static boolean checkBLESupport() {
        boolean deviceSupportsLE;

    try {
        @SuppressWarnings({ "unused", "rawtypes" })
        Class object = Class.forName("android.server.BluetoothGattService");
        deviceSupportsLE = true; 
    } catch (Exception e) {
        deviceSupportsLE = false; 
    }

    return deviceSupportsLE;
} 
```

当您循环连接绑定的设备时，请仔细检查您配对的蓝牙设备是否为 LE。使用此代码检查设备。

```
 if (device.getBluetoothClass() == null) {
    Log.i(TAG, "This device is BLE compatible");
        b = true;
} else {
    Log.i(TAG, "This device is not BLE");
        b = false;
} 
```

现在要建立从您的 LE 兼容手机到您的 LE 兼容蓝牙设备的连接，请按照您发布的链接下的 Gatt 服务说明进行操作。[http://developer.motorola.com/docs/bluetooth-low-energy-api/](http://developer.motorola.com/docs/bluetooth-low-energy-api/)

请注意，在此示例中，它连接到蓝牙低能量心率监测器。

如果您不尝试使用 LE 心率配置文件连接到心率监测器，这里是另一个摩托罗拉文档的链接，其中详细介绍了创建您自己的 LE 配置文件以与 GATT 框架一起使用。[http://developer.motorola.com/docs/bluetooth-low-energy-gatt-framework-api/](http://developer.motorola.com/docs/bluetooth-low-energy-gatt-framework-api/)

**如果这些文档中的任何地方的说明都不够清楚，摩托罗拉提供了使用这些文档中的框架的示例 android 应用程序。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:32:27.450

我猜摩托罗拉堆栈有BLE支持。但我觉得它不与需要绑定的设备配对，尽管它确实适用于一些传感器。我尝试使用需要粘合的接近传感器。尽管设备是通过 Razr 发现的，但它永远不会与 S3 配对。

[这里](http://www.youtube.com/watch?v=D5Jo2YjjCuk)有一个有用的视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-28T20:02:39.770

比赛迟到了，但可以确认——

如果您的 BLE 外设需要绑定，Moto X - 以及其他一些较旧的摩托罗拉设备 - 必须先通过蓝牙设置配对，然后才能通过 Android GATT 接口进行编程连接。

如果您通过 createBond 方法或读取加密特征进行绑定，您的连接通常会在 60 秒内断开，尽管 DDMS 日志显示可能建立了良好的绑定。

# javascript - JS中的数值变量

> ID：10907605
> 
> 赞同：2
> 
> 时间：2012-06-06T02:56:12.627
> 
> 标签：javascript

对于变量 x=5，我怎么知道它是数字 5 还是字符 '5'？

顺便说一句，在 JS 中，字符是否遵循 ASCII 表？然后我可以操作一个字符变量。例如，如果变量 x 是字符 a，我可以通过 x=x+1 使其变为字符 b 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T02:58:47.493

要查看 x 是否是数字 5，而不是字符串“5”，您可以使用身份运算符：

```
if (x === 5) {
} 
```

Identity 不会进行任何隐式转换；只有当两个操作数相等且没有任何转换时，它才会返回 true。

* * *

> 例如，如果变量 x 是字符 a，我可以通过 x=x+1 使其变为字符 b 吗？

No. `x = x + 1`将 1 转换为字符串，执行字符串连接并返回“a1”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T02:59:50.330

您可以使用

```
typeof x; 
```

它返回一个描述变量类型的字符串，例如`number`，`string`或`object`。

要获取字符的字符代码，请使用[`charCodeAt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/charCodeAt)：

```
var mystring = 'a';
mystring.charCodeAt(0); 
```

要从增强字符代码中获取字符，请使用[`String.fromCharCode`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/fromCharCode)：

```
var nextLetter = String.fromCharCode( mystring.charCodeAt(0) + 1 ); // returns "b" 
```

这会从`mystring`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T02:58:19.757

只需获取变量的类型：

```
console.log(typeof '5'); // Returns 'string';
console.log(typeof 5);   // Returns 'number'; 
```

至于你的第二个问题，不，它不起作用：

```
console.log('b' + 1);    // Returns 'b1' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T02:59:35.567

检查变量是否为数字：

```
if (typeof x == 'number')
    // x is a number 
```

当 x = b 时执行 x = x + 1，将产生字符串 'a1';

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-27T16:23:59.350

如果您的 var x 不是整数，这是将其更改为整数的最佳方法。

将 x 更改为整数

```
x = parseInt(x); 
```

您可以如何向 x 添加任何值，例如：

```
x = x + 2; 
```

由于我们已将 x 更改为整数，我们现在可以确定这是否等于 5

```
if(x == 5){
 //Your Codes Here
} 
```

# asp.net - 从 ASP.NET 中的代码隐藏文件设置 iframe 的 src 的最佳方法是什么？

> ID：10907607
> 
> 赞同：5
> 
> 时间：2012-06-06T02:56:34.507
> 
> 标签：asp.net, iframe, webforms, code-behind

我有一个 iframe，它具有基于 Web API 调用结果的动态 URL。在 aspx 页面中设置其 src 的最佳方法是什么？以下是 iframe 的示例：

```
<iframe id="dynamicframe" runat="server"></iframe> 
```

我应该像这样直接在代码隐藏中设置它：

```
dynamicframe.Attributes["src"] = "http://dynamicurl.com"; 
```

或者我应该在代码隐藏中创建一个属性并在 iframe 中引用它：

```
<iframe id="dynamicframe" src="<%= dynamicFrameUrl %>"></iframe> 
```

还是完全有其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T03:12:28.623

这是一个普遍的问题，对于任何 html 标记都可以代表相同的问题。

替代的第三个选项是使用文字控件并在后面的代码上完全呈现 iframe：

```
 txtLiteral.Text = "string.Format(
      "<iframe id=\"dynamicfrmae\" src=\"{0}\"></iframe>",   PageUrlForSrc  ); 
```

所有方法的不同之处：

## 直接写在页面上`<%= %>`

1.  不适用于更新面板
2.  它在页面发送到浏览器的那一刻运行（而不是在页面步骤之前）
3.  不可作为控件访问

这是我最避免的方法。我只在我想将一些计算留给以后使用并避免页面循环时使用它，或者当我`responce.flush()`在它之前使用它时。

## 用文字写出来

1.  与更新面板兼容
2.  不可作为控件访问

## 将其写为后面代码的属性

1.  使控件通过html循环的步骤
2.  可在页面上的其他位置作为变量访问
3.  此控件的 id 可能会更改，但您可以避免冲突

所有方法都有其目的，然后我根据它们最适合的方法使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:02:05.993

好吧，如果您在代码隐藏文件中有可用的 URL，我会说选项一是最直接的。但是，我对这个问题有点困惑，您是否在寻找最佳实践？

# html - 如何使用 CSS 制作多个渐变

> ID：10907615
> 
> 赞同：0
> 
> 时间：2012-06-06T02:57:48.727
> 
> 标签：html, css

我正在尝试在我的一个项目中使用多个渐变。`section`我的目标是从元素的边界产生一个渐隐的阴影。

从不同的来源这是我到现在为止的想法

```
.section2 {
    border-radius: 10px;
    border: 2px solid #E1E1E1;

    /* Mozilla Firefox */ 
    background-image: -moz-linear-gradient(left, #FFFFFF 95%, #E1E1E1 100%), -moz-linear-gradient(left, #E1E1E1 0%, #FFFFFF 5%);

    /* Webkit (Safari/Chrome 10) */ 
    background-image: -webkit-gradient(linear, left, right bottom, color-stop(0, #E1E1E1), color-stop(.05, #FFFFFF));

    /* Webkit (Chrome 11+) */ 
    background-image: -webkit-linear-gradient(right, #FFFFFF 95%, #E1E1E1 100%), -webkit-linear-gradient(left, #FFFFFF 95%, #E1E1E1 100%);
} 
```

但问题是这仅显示第一个梯度，随后的一次被忽略。

[您可以在这里](http://jsfiddle.net/arunpjohny/EDcGP/)看到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:35:28.723

`box-shadow`更适合您想要做的事情。它比渐变方法更简单、更可预测和更整洁。

它只需要一个属性；使用这些值来获得最好的结果（阅读它们的作用，这样你就不会盲目地玩）。这就是我所做的，它达到了与你的渐变类似的效果：

```
box-shadow: inset 0 0 30px 10px #E1E1E1; 
```

演示：http: [//jsfiddle.net/EDcGP/6/](http://jsfiddle.net/EDcGP/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:31:18.773

```
/* Mozilla Firefox */
    background-image: -moz-linear-gradient(left, #FF0000 95%, #E1E1E1 100%);
/* Webkit (Chrome 11+) */ 
    background-image: -webkit-linear-gradient(left, #FFFFFF 95%, #E1E1E1 100%); 
```

在 Firefox 和 Chrome 中尝试了上述 css，两者都有效。无法在 Safari 中尝试。

您必须删除第二个渐变样式。有一个渐变就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:36:28.453

通过使用不透明度和下面给出的背景颜色，我几乎已经解决了。

```
background-image: -moz-linear-gradient(to right, #E1E1E1 0, rgba(255, 255, 255, 0) 50px), -moz-linear-gradient(to left, #E1E1E1 0, rgba(255, 255, 255, 0) 50px), -moz-linear-gradient(to bottom, #E1E1E1 0, rgba(255, 255, 255, 0) 50px), -moz-linear-gradient(to top, #E1E1E1 0, rgba(255, 255, 255, 0) 50px); 
```

可以在[此处](http://jsfiddle.net/arunpjohny/EDcGP/)找到工作示例。

# objective-c - 滚动 UIScrollView 以显示几个文本字段中的最低值

> ID：10907617
> 
> 赞同：5
> 
> 时间：2012-06-06T02:58:26.510
> 
> 标签：objective-c, cocoa-touch, uiscrollview

我有一个`UIScrollView`里面有几个动态视图，每个视图都有一个文本字段。当我开始在其中一个框中输入内容时，我希望滚动视图滚动，以使该字段位于屏幕顶部（在键盘上方可见）。效果很好；这是代码：

```
(void)didStartTyping:(id)sender {
    [scrollView setContentOffset:CGPointMake(0, subView.frame.origin.y) animated:YES];
    scrollView.scrollEnabled = NO;
}

(void)didFinishTyping:(id)sender {
    scrollView.scrollEnabled = YES;
} 
```

但是，每当滚动视图向上滚动到最顶部并且我开始在最低的可见文本字段中输入时，它就不会向下滚动足够远（短约 40 像素）。令人费解的是，如果我从滚动视图的顶部向下滚动一个像素，它就可以工作，但是当我向上滚动到顶部时，它的行为就大不相同了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T00:12:51.570

我设法做到这一点的最好方法是抓住键盘框架，然后在文本视图获取 textViewDidBeginEditing: 调用时更新我的​​滚动视图插图。这里我使用的是表格视图，但相同的逻辑应该适用于滚动视图，主要区别在于滚动方式。我使用 scrollToRowAtIndexPath，你会想使用 scrollRectToVisible

```
//setup keyboard callbacks
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillShow:) 
                                                 name:UIKeyboardWillShowNotification 
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillShow:) 
                                                 name:UIKeyboardWillHideNotification 
                                               object:nil];
}

- (void)keyboardWillShow:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    kbFrame = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
}

//this is called from your UITextViewDelegate when textViewDidBeginEditing: is called
- (void)updateActiveTextScroll:(UITextView*)textView
{
    activeTextView = textView;
    UIEdgeInsets inset;
    UIInterfaceOrientation orient = [[UIApplication sharedApplication] statusBarOrientation];
    if( UIInterfaceOrientationIsLandscape(orient) )
    {
        inset = UIEdgeInsetsMake(0.0, 0.0, kbFrame.size.width, 0.0);
    }
    else
    {
        inset = UIEdgeInsetsMake(0.0, 0.0, kbFrame.size.height, 0.0);
    }
    myTableView.contentInset = inset;
    myTableView.scrollIndicatorInsets = inset;

    [myTableView scrollToRowAtIndexPath:activeNSIndexPath
                       atScrollPosition:UITableViewScrollPositionBottom
                               animated:YES];
}

//dont forget to reset when the keyboard goes away
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets inset = UIEdgeInsetsZero;
    myTableView.contentInset = inset;
    myTableView.scrollIndicatorInsets = inset;
} 
```

# android - 在android中解析多个Json对象

> ID：10907627
> 
> 赞同：1
> 
> 时间：2012-06-06T02:59:49.587
> 
> 标签：android, json

我正在尝试将此 json 发送到 Web 服务器：

```
[{"codemenu":"1","name":"Fried Rice"},
{"codemenu":"2","name":"Hongkong Fried Rice"},
{"codemenu":"3","name":"Special fried Rice"}] 
```

这是代码，但它不起作用：

```
HttpPost httppost = new HttpPost("http://10.0.2.2/pnir_restoran/test.php");
JSONObject json = new JSONObject();
try {
    // JSON data:
    json.put("codemenu", "1");
    json.put("name", "friedrice");
    json.put("codemenu", "2");
    json.put("name", "Hongkong friedrice");
    json.put("codemenu", "3");
    json.put("name", "Special friedrice");          

    JSONArray postjson=new JSONArray();
    postjson.put(json); //i cant use postjson.add(json);

    // Post the data:
    httppost.setHeader("json",json.toString());
    httppost.getParams().setParameter("jsonpost",postjson);

    // Execute HTTP Post Request
    System.out.print(json);
    HttpResponse response = httpclient.execute(httppost); 
```

我应该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:11:41.637

您需要使用[JSONArray](http://www.json.org/javadoc/org/json/JSONArray.html)，然后将单个[JSONObject](http://www.json.org/javadoc/org/json/JSONObject.html)放入数组中：

```
// Initialize the JSON Array and your three seperate objects.
JSONArray jsonArray = new JSONArray();
JSONObject jObj1 = new JSONObject();
JSONObject jObj2 = new JSONObject();
JSONObject jObj3 = new JSONObject();

// Put elements in one object at a time and put them in your array.
jObj1.put("codemenu", "1");
jObj1.put("name", "friedrice");

jsonArray.put(jObj1);

jObj2.put("codemenu", "2");
jObj2.put("name", "Hongkong friedrice");

jsonArray.put(jObj2);

jObj3.put("codemenu", "3");
jObj3.put("name", "Special friedrice");

jsonArray.put(jObj3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:15:05.603

您可以使用[Spring Android 的 RestTemplate 模块](http://static.springsource.org/spring-android/docs/1.0.x/reference/html/rest-template.html)，而不是手动进行所有 JSON 处理。

# mysql - 实时策略显示分离度

> ID：10907631
> 
> 赞同：0
> 
> 时间：2012-06-06T03:00:19.503
> 
> 标签：mysql, php-5.3, social

我有一个网站，允许用户通过互相“连接”彼此。该网站需要显示“您有 X 个共同关注者”或“您正在关注 X 个共同关注者”等统计信息。到目前为止，这个计算都是实时处理的，但是现在我们有太多的用户来实时计算这个。

我正在考虑缓存或以其他方式增强此计算的性能的选项，但在我这样做之前，我意识到可能已经存在解决此问题的通用方法，可以在我自己过度设计之前以更简单的方式解决它。

使用的技术：PHP 5.3、MySQL 5.5、nginx 和 Linux 环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:37:06.880

我假设您不会更改很多地方的朋友列表，也不会经常更改。因此，您有一种在必要时使缓存无效的简单方法。创建一个有 4 行的表：`id1, id2, num, date`，并在 id1、id2 和日期上设置索引。现在使用答案中的方法缓存您的数据，但如果您希望发生这种情况，您需要自己删除旧条目。只需添加如下内容：

```
if rand(1, 100) == 1:
    SQL(DELETE FROM cache WHERE date < now - ***) 
```

还要确保 id1 < id2，以避免缓存中的重复。

当用户的好友列表发生变化时，删除所有连接到该用户的缓存条目。这样，您的号码将始终是最新的。

如果您不关心数字是否有点，您的解决方案很好 - 只需标准化 $key，以便 id1 < id2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:06:18.593

我解决这个问题的第一种方法是简单地使用存储在内存中的缓存层（可能使用 memcache）

当用户查看包含这些统计信息的页面时，请检查缓存以查看统计信息是否已存在。如果没有，则计算相互连接的数量并将用户 ID 存储为缓存键的哈希值。

**PHP中的示例，有点伪代码：**

```
// Fred = User ID #47, George = User ID #94

$key = md5('47,94');

// Check that cache key is valid

if ($cache->isValid($key)) {
    return $cache->get($key);
} else {
    // ..calculate mutual connections
    $cacheTime = time() + (60 * 60 * 6);
    $value = calculateMutualConnections(array(47,94));
    $cache->save($key,$value,$cacheTime);
    return $value;
} 
```

这会将缓存值存储 6 小时。不确定这是否有足够的时间。我相信这种方法会奏效，但可能不像我想要的那样实时。

# ruby-on-rails - 带有新的 gemified 插件的 Ruby on Rails 生成器？

> ID：10907633
> 
> 赞同：1
> 
> 时间：2012-06-06T03:00:22.953
> 
> 标签：ruby-on-rails, plugins, devise, gem, rails-generate

我正在尝试创建一个新的 Rails 3 插件 gem，它围绕 devise/devise_ldap_authenticable 来实现内部 LDAP 支持的可重用下降。

我创建了新的插件 gem：

```
rails plugin new <gem_name> 
```

然后我将 devise/devise_ldap_authenticable gems 添加到 .gemspec 文件并运行`bundle`

在设计说明中，它说使用其生成器生成所需的文件：

```
rails generate devise:install 
rails generate devise MODEL 
```

但是，在生成插件的目录中，我似乎无法运行`rails generate`. 大多数 gem 插件教程会指导您手动创建文件。我最好按照临时项目中的说明开始一个新的 Rails 项目，然后手动将文件复制到插件中吗？有什么我想念的吗？我可以从虚拟实例运行生成器脚本吗？这个用例的标准做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:25:07.823

最后，由于相对简单，我选择放弃包装 devise_ldap_authenticable。

我将来会选择的答案是从一次性项目中移动文件。

# classloader - JVM中的类加载

> ID：10907634
> 
> 赞同：2
> 
> 时间：2012-06-06T03:00:32.077
> 
> 标签：classloader

类何时加载到 JVM 中？它们是在服务器启动时加载还是在有类引用时加载？我的假设是所有类都在像 jboss 这样的服务器启动时被加载，但是有一种叫做延迟加载的东西。

加载实际上是什么意思？这是否意味着JVM内存中有这个.class以及所有方法，变量包括实例，静态变量方法并且可以执行。我知道 ClassLoader 定位需要加载的 Java 类的字节码，读取字节码，检查特定类中使用的其他类的引用，并通过创建 java.lang.Class 类的实例来加载它们。这使得类可供 JVM 执行

方法是否也与类一起加载到 JVM 中？我的假设是方法仅在线程的堆栈内存中。那么什么是方法记忆呢？它是堆还是堆栈的一部分？

只有静态方法与类加载一起加载，而不是实例方法吗？我知道当类被加载并且所有静态变量都被初始化时，静态块被执行。

如果这些疑问得到解决，请提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T15:25:41.710

这些都是关于 JVM 的基本问题，谷歌肯定可以帮助你解答。

对于您的一些问题（尤其是有关实际加载过程的问题），您可以查看此处，例如：[http ://www.securingjava.com/chapter-two/chapter-two-7.html](http://www.securingjava.com/chapter-two/chapter-two-7.html)

简而言之，一开始，JVM 只加载基本（和受信任的）类。接下来，根据需要创建其他类加载器（例如引导类加载器），它们将加载更多类。在一个类被成功加载之前，它所依赖的所有类都必须被加载。

加载的类以各种形式存储在内存中（这是 JVM 特定的），但 Class 对象始终是公开的。类中的所有内容（方法、变量等）都会被加载。这并不意味着该类也被编译（编译发生在稍后，当需要执行方法时）。

方法变量的分配发生在堆栈（对于原语）或堆上。

静态变量的初始化和静态块的执行发生在类加载之后，在它的任何实例创建之前。

# java - Java 没有看到我的 MAIN 子句？

> ID：10907635
> 
> 赞同：1
> 
> 时间：2012-06-06T03:00:37.173
> 
> 标签：java

好吧，我不明白。我有以下代码（是的，我知道它什么都不做）：

```
package com.prim.esaa.gui;

import com.jme3.app.SimpleApplication;

public class Sim3DAnimator extends SimpleApplication {

    public static void main( String[] args ) {

    }

    @Override
    public void simpleInitApp() {

    }

} 
```

当我尝试运行它时出现以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/prim/esaa/gui/Sim3DAnimator
Caused by: java.lang.ClassNotFoundException: com.prim.esaa.gui.Sim3DAnimator
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: com.prim.esaa.gui.Sim3DAnimator. Program will exit. 
```

现在，如果我没看错的话，就是说没有主句，但有一个主句。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:14:02.173

要启动`Sim3DAnimator`，您必须指定包名称。从`com/prim/esaa/gui`.

```
> java com.prim.esaa.gui.Sim3DAnimator 
```

PS：确保类`Sim3DAnimator`位于`com/prim/esaa/gui`文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:15:35.893

看起来你正试图错误地运行这个类，因此没有找到类..

你有没有尝试过：

将 Sim3DAnimator.class 放入目录路径，例如：C:\EXAMPLE\com\prim\esaa\gui

然后运行（从根目录）： C:\EXAMPLE> java com.prim.esaa.gui.Sim3DAnimator

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T01:23:57.070

不是最好的解决方案。但是我关闭并删除了我的包资源管理器中的所有项目。然后我从 SVN 重新签出一个干净的副本。然后我创建了这个类，它运行良好。在我的构建设置中出现了一些问题，它阻止了一切运行。

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T03:11:35.593

> 现在，如果我没看错的话，就是说没有主句，但有一个主句。

它*实际上*是在说它找不到完全限定名称为“com.prim.esaa.gui.Sim3DAnimator”的**类。**事实上，它以不同的方式说了三次……。

如果它可以找到类，它会将类的“main”方法识别为入口点，因为您的 main 方法具有正确的特征。

那么为什么找不到类呢？嗯，很可能你没有正确的类路径。有关 Java 类路径如何工作以及如何设置它的详细信息，请参阅此 Java 手册页 - [http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)

另一种可能性（基于您的评论）是您尚未编译 java 代码。

# php - 如何从php中的文本中提取单词

> ID：10907636
> 
> 赞同：0
> 
> 时间：2012-06-06T03:01:13.450
> 
> 标签：php, word, extract

如何从php中的文本中提取单词？或者例如，我有这个字符串： `this is a long text string where it is written something`

我想获得：

```
this
is
long
text
string
where
it 
is written
something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:04:31.220

看看 PHP 手册`explode`

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

按空间爆炸`' '`会得到你想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:34:52.133

你可以试试内置函数`explode`

```
$string='this is a long text string where it is written something';
$output = explode(" ", $string);
var_dump($output); 
```

它将显示您所需的结果

# c# - 我绘制图表，但在新页面上看到旧图像

> ID：10907639
> 
> 赞同：0
> 
> 时间：2012-06-06T03:01:36.023
> 
> 标签：c#, asp.net

我正在开发一个 C# Web 项目。我在本地 Web 服务器上运行它。我画。我显示图像如下：

```
bitmap.Save(Server.MapPath("diagram.jpg"), ImageFormat.Jpeg);
Image1.ImageUrl = ResolveUrl("diagram.jpg"); 
```

我没有看到新的图像。只有旧的，我在更改图像名称后拥有（例如，我将 diagram.jpg 更改为 diagram2.jpg）。浏览器是火狐。C# 中的设计页面很简单。页面上只有图像和几个文本框。没有 UpdatePanel 之类的。有缓存的东西......但是如何与之抗争......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:15:27.627

> 但如何与之抗争。

始终使用单独的路径/名称。在某处 Pug 一个 GUID。就这么简单。不能缓存不同的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:26:41.217

您可以将图像文件替代为

```
diagram.jpg?ver=2 
```

保留相同的图像文件，但强制浏览器更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T03:34:49.910

如果图像具有相同的名称和 URL，浏览器会从缓存中选择图像并显示相同的图像以更快地加载页面。

即使您更改图像服务器端，也会显示相同的缓存图像，直到您清除浏览器的缓存。您可以使用查询字符串来更改图像网址，如下所示。

```
Image1.ImageUrl = ResolveUrl("diagram.jpg?" + DateTime.Now.Ticks.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T03:25:41.543

我不确定是什么`ResolveUrl`，但尝试将查询字符串添加到图像 url，以便页面始终获得“新鲜”文件。像这样的东西：

```
Image1.ImageUrl = ResolveUrl(string.Format("diagram.jpg?v={0}", Guid.NewGuid())); 
```

# ruby-on-rails - 我怎么能重构这个方法？

> ID：10907644
> 
> 赞同：0
> 
> 时间：2012-06-06T03:02:18.997
> 
> 标签：ruby-on-rails, ruby, refactoring

给定以下辅助方法。

```
def link_tags(collection)
  tags = collection.split(',')

  tags.map.each do |tag|
    if tag == tags.last
      content_tag(:a, tag, href: tags_filter_post_path(tag) )
    else
      content_tag(:a, tag, href: tags_filter_post_path(tag) ) + ', '
    end        
  end.reduce(:<<)
end 
```

我怎么能对此做一点重构呢？

编辑：建议重构后的最终代码。

```
def link_tags(collection)  
  collection.split(',').collect do |tag| 
    link = ""
    link += link_to tag, tags_filter_post_path(tag)
  end.join(', ').html_safe
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:18:41.470

```
def link_tags(collection)
  collection.split(',').map do |tag| 
    link_to tag, tag_filter_post_path(tag)
  end.join(', ')
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:17:30.360

使用 a`join`而不是专门处理最后一个元素（除非元素是唯一的，否则这也不会像你这样做的那样工作），然后在之后连接。调用 to`each`也是多余的。

```
def link_tags(collection)
  tags = collection.split(',')
  tags.map do |tag|
    content_tag(:a, tag, href: tags_filter_post_path(tag))
  end.join(', ')
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T05:05:33.750

对于代码重构[http://refactormycode.com](http://refactormycode.com)是一个不错的选择

这是 Ruby 部分：

[http://refactormycode.com/codes/recent/ruby](http://refactormycode.com/codes/recent/ruby)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T03:21:18.377

试试这个（`link_to`按照xnm的建议）：

```
def link_tags(collection)
  collection.split(',').each {|tag| link_to tag, tag_filter_post_path(tag)}.join(', ')
end 
```

# php - cakephp 媒体插件致命错误：调用未定义的方法 Folder::ls()

> ID：10907645
> 
> 赞同：0
> 
> 时间：2012-06-06T03:02:28.397
> 
> 标签：php, cakephp, media

嗨，我正在使用 cakephp 媒体插件，当我想删除文件时出现此错误..

> cakephp 媒体插件致命错误：调用未定义的方法 Folder::ls()

有什么帮助吗？

蒂亚：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:03:11.210

我猜您使用的媒体插件版本与您使用的 CakePHP 版本不兼容，因为`Folder::ls`在 CakePHP 1.3.x 中已将其删除。因此，我会检查是否有更新版本的媒体插件可用。

# php - Magento 1.5.1 结帐方法“”未在“”中定义

> ID：10907649
> 
> 赞同：1
> 
> 时间：2012-06-06T03:03:32.863
> 
> 标签：php, magento, checkout

我正在使用我创建的自定义主题运行 Magento 1.5.1（我正在使用它，因为它是与 Lightspeed POS 一起使用的最新版本）。我正在运行 Lightspeed POS 连接器，并且我已经手动安装了 Virtual Merchant 插件。我的服务器是由 hostmonster 托管的共享服务器。

当我尝试结帐时，我收到错误警报`Method "" is not defined in ""`。

Firebug 给了我以下信息：

```
POST https://odd-style.com/magento/index.php/checkout/onepage/saveOrder/ 200 OK
{"success":false,"error":true,"error_messages":"Method \"\" is not defined in \"\""} 
```

我的magento异常日志给了我：

```
2012-06-06T01:20:46+00:00 ERR (3): 
exception 'Mage_Core_Exception' with message 'Method "" is not defined in ""' in /home4/oddnycco/public_html/magento/app/Mage.php:550
Stack trace:

#0 /home4/oddnycco/public_html/magento/app/code/core/Mage/Core/Model/App.php(1274): Mage::throwException('Method "" is no...')
#1 /home4/oddnycco/public_html/magento/app/code/core/Mage/Core/Model/App.php(1253): Mage_Core_Model_App->_callObserverMethod(false, '', Object(Varien_Event_Observer))
#2 /home4/oddnycco/public_html/magento/app/Mage.php(416): Mage_Core_Model_App->dispatchEvent('checkout_type_o...', Array)
#3 /home4/oddnycco/public_html/magento/app/code/core/Mage/Sales/Model/Service/Quote.php(180): Mage::dispatchEvent('checkout_type_o...', Array)
#4 /home4/oddnycco/public_html/magento/app/code/core/Mage/Sales/Model/Service/Quote.php(238): Mage_Sales_Model_Service_Quote->submitOrder()
#5 /home4/oddnycco/public_html/magento/app/code/core/Mage/Checkout/Model/Type/Onepage.php(742): Mage_Sales_Model_Service_Quote->submitAll()
#6 /home4/oddnycco/public_html/magento/app/code/core/Mage/Checkout/controllers/OnepageController.php(499): Mage_Checkout_Model_Type_Onepage->saveOrder()
#7 /home4/oddnycco/public_html/magento/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Checkout_OnepageController->saveOrderAction()
#8 /home4/oddnycco/public_html/magento/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(253): Mage_Core_Controller_Varien_Action->dispatch('saveOrder')
#9 /home4/oddnycco/public_html/magento/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#10 /home4/oddnycco/public_html/magento/app/code/core/Mage/Core/Model/App.php(340): Mage_Core_Controller_Varien_Front->dispatch()
#11 /home4/oddnycco/public_html/magento/app/Mage.php(627): Mage_Core_Model_App->run(Array)
#12 /home4/oddnycco/public_html/magento/index.php(80): Mage::run('', 'store')
#13 {main} 
```

到目前为止，我已经尝试过书中所有类型的缓存清除。我已将 php 内存限制的大小增加到 256MB。我查看了堆栈跟踪中引用的所有文件，我只能说 $method 和 $object 都是因为作为“”传递的。我真的不明白为什么，我对如何解决它没有更多的想法。：/

提前感谢任何人的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:34:57.037

好像您在 Magento 安装的某处定义了一个事件观察器（我想在第 3 方模块之一中）。从我的角度来看，似乎为该事件注册了一个空方法。

检查模块的 config.xml 中是否有正在侦听事件“checkout_type_onepage_save_order”的观察者（您可以轻松地 grep 您的 app/code/community 和 app/code/local 文件夹以获取此字符串）。尝试禁用模块（通过 app/etc/modules/Module_Name.xml），然后再次尝试签出。

# c - add_to_array 调用导致 NULL 列表

> ID：10907650
> 
> 赞同：0
> 
> 时间：2012-06-06T03:03:33.190
> 
> 标签：c, ubuntu, multidimensional-array

我有一个 C 结构，它基本上包含两个名为 List 的 2D 字符数组。一个用于附加项目，另一个用于插入项目。然后使用将 C 字符串添加到这些名为 add_to_array 的数组的外部函数。

我遇到的问题是当我调用 add_to_array 一次它没有问题但再次调用时，我得到一个分段错误。通过测试代码，我发现无论出于何种原因，我都无法弄清楚，调用 add_to_array 后，List 中的二维数组仍然为 NULL。我检查了 add_to_array 的结果，它每次都返回 1（成功）。

目标系统/操作系统是 Ubuntu linux。

```
typedef struct
{
  char** appended;
  char** inserted;
  size_t app_alloc;
  size_t app_elem;
  size_t ins_alloc;
  size_t ins_elem;
}
List;

void init_list(List* list)
{
  list->app_alloc = 0;
  list->ins_alloc = 0;
  list->app_elem = 0;
  list->ins_elem = 0;
  list->appended = NULL;
  list->inserted = NULL;
}

void free_list(List* list)
{
  size_t i = 0;

  for (; i < list->ins_elem; ++i)
  {
    free(list->inserted[i]);
  }
  free(list->inserted);

  i = 0;

  for (; i < list->app_elem; ++i)
  {
    free(list->appended[i]);
  }
  free(list->appended);
}

int add_to_array(const char* in, char** array, size_t* alloc, size_t* elem)
{
  if (*alloc == *elem)
  {
    if (*alloc == 0) *alloc = list_buff;
    else             *alloc = (*alloc) * 2;

    char** _tmp = (char**) realloc(array, (*alloc) * sizeof(char*));

    if (!_tmp) return 0;
    else       array = _tmp;
  }

  array[(*elem)] = (char*) malloc(strlen(in) + 1);

  strcpy(array[(*elem)], in);

  (*elem)++;

  return 1;
}

int append_list(const char* in, List* out)
{
  return add_to_array(in, out->appended, &out->app_alloc, &out->app_elem);
}

int insert_list(const char* in, List* out)
{
  return add_to_array(in, out->inserted, &out->ins_alloc, &out->ins_elem);
}

int main()
{
  List test;

  init_list(&test);

  append_list("test", &test);

  if (!test.appended)
  {
    printf("*%s*", "why is test.appended still NULL?");
  }

  //append_list("wwww", &test);
  //insert_list("ffff", &test);

  //printf("%s\n", get_element(0, &test));
  //printf("%s\n", get_element(1, &test));
  //printf("%s\n", get_element(2, &test));

  //free_list(&test);

  return 0;
} 
```

> 输出：为什么 test.appended 仍然为 NULL？

多亏了大卫的建议，我的代码在这里工作了变化：

```
int add_to_array(const char* in, char*** array, size_t* alloc, size_t* elem)
{
  if (*alloc == *elem)
  {
    if (*alloc == 0) *alloc = list_buff;
    else             *alloc = (*alloc) * 2;

    char** _tmp = (char**) realloc((*array), (*alloc) * sizeof(char*));

    if (!_tmp) return 0;
    else       (*array) = _tmp;
  }

  (*array)[(*elem)] = (char*) malloc(strlen(in) + 1);

  strcpy((*array)[(*elem)], in);

  (*elem)++;

  return 1;
}

int append_list(const char* in, List* out)
{
  return add_to_array(in, &out->appended, &out->app_alloc, &out->app_elem);
}

int insert_list(const char* in, List* out)
{
  return add_to_array(in, &out->inserted, &out->ins_alloc, &out->ins_elem);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:15:35.707

因为 C 是一种按值传递的语言 :-)

当你打电话时，你似乎期待：

```
add_to_array(in, out->appended, &out->app_alloc, &out->app_elem); 
```

然后做

```
int add_to_array(const char* in, char** array, size_t* alloc, size_t* elem)
{
....
array = _tmp;
.... 
```

那改变`array`也会改变`out->appended`。

如果您希望它以这种方式工作，则必须将指针传递给`out->appended`，并使其 `add_to_array`看起来像

```
int add_to_array(const char* in, char*** array, size_t* alloc, size_t* elem) 
```

# macos - 如何在 OSX 上运行 MonoDevelop 的 nunit-console？

> ID：10907653
> 
> 赞同：2
> 
> 时间：2012-06-06T03:03:43.440
> 
> 标签：macos, nunit, monodevelop

我使用的 MonoDevelop 是 Unity3D 自带的。我可以在其包内容中看到 nunit-console `MonoDevelop/Contents/Frameworks/Mono.framework/Versions/2.10.2/bin/nunit-console`，但我不知道如何从终端内部调用它。

[在这里](http://curtis.schlak.com/2012/01/06/running-nunit-console-under-mono.html)，这家伙提到添加一条到 MONO_PATH 的路径，但我不知道如何解决包内的路径，当我键入时`env`，我根本看不到 MONO_PATH。`mono`也不是终端中的命令，所以[这里](http://darknightelf.wordpress.com/2012/05/29/using-nunit-and-c-with-mono-and-monodevelop-on-os-x/)的建议也没有真正帮助我。

这必须是一个简单的配置问题，但我是在 OSX 中开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-09T12:20:57.917

尝试这个：

1.  在终端上写以下命令

    > 单声道 {nunit-console.exe 的路径}

    例如：“单声道下载/NUnit-2.6.4/bin/nunit-console.exe”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:57:10.087

nunit-console 只是一个 shell 脚本，它使用单声道的完整路径调用 nunit-console.exe .NET 程序集，因此请尝试在文本编辑器中打开文件，看看您是否可以看到它认为单声道应该在哪里。

如果您尝试执行，您会得到什么错误：

MonoDevelop/Contents/Frameworks/Mono.framework/Versions/2.10.2/bin/nunit-console

从终端？

# javascript - 侧边栏子菜单元素未按应有的方式显示/隐藏

> ID：10907659
> 
> 赞同：4
> 
> 时间：2012-06-06T03:04:22.413
> 
> 标签：javascript, jquery, css

我正在尝试使用 jquery 为我的网站创建一个简单的侧边栏，但我在使用它的悬停功能时遇到了一些问题。当用户将鼠标悬停在一个类别上时，假设会出现一个子菜单。如果悬停在上方或下方的类别，我希望关闭子菜单。我创建了一个 jsFiddle 来帮助展示我的问题以及子菜单如何不按应有的方式关闭。我已经尝试解决这个问题几个小时了，我将不胜感激任何帮助。

[http://jsfiddle.net/BGcDc/7/](http://jsfiddle.net/BGcDc/7/)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T03:08:45.190

您忘记在 mouseleave 函数中隐藏您的子条目。只需添加`$(this).find(".submenu").hide();`到您现有的处理程序：

```
$(".category").mouseleave(function() {
    $(this).find(".submenu").hide();
    $(this).css("background-color", "#eee");
    $(this).css("border", "1px solid grey");
    $(this).css("border-bottom", "none");
    $(this).css("width", "180px");
    $(".category:last").css("border-bottom", "1px solid grey");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T03:07:46.123

[http://jsfiddle.net/ahren/BGcDc/8/](http://jsfiddle.net/ahren/BGcDc/8/)

只需`$(".submenu").hide();`在悬停开始时添加一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T03:09:05.570

你忘了隐藏列表

```
$(".category").mouseleave(function() {

    $(this).find(".submenu").hide();

}) 
```

[http://jsfiddle.net/BGcDc/10/](http://jsfiddle.net/BGcDc/10/)

但这可以通过仅使用 css 的面团来完成。通过：

```
.category .submenu{ display:none}
.category:hover .submenu{ display:block} 
```

而且你所有的 .css() 边界都在那里（更有意义的是，如果你想制作一个跨浏览器动画来显示/隐藏它可能是有意义的）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T03:09:55.703

只需像这样修改您的javascript：

```
$(".category").mouseleave(function() {
    // add this
    $(".submenu").hide();
    $(this).css("background-color", "#eee");
    $(this).css("border", "1px solid grey");
    $(this).css("border-bottom", "none");
    $(this).css("width", "180px");
    $(".category:last").css("border-bottom", "1px solid grey");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-06T03:11:53.443

jQuery 方法接受 2 个参数，您可以在[`.hover()`](http://api.jquery.com/hover/)第二个参数中使用匿名函数对象来隐藏子菜单，类似于在第一个参数的函数中显示它的方式。

**[小提琴](http://jsfiddle.net/ult_combo/BGcDc/11/)**

如果您已经有一个附加到元素的侦听器，这也是`mouseleave`不必要的。`.hover`这也更简单，更容易阅读。

[**小提琴**](http://jsfiddle.net/ult_combo/BGcDc/15/)

# javascript - 为什么有些科学数字会自动四舍五入，而有些则不会？

> ID：10907671
> 
> 赞同：4
> 
> 时间：2012-06-06T03:07:29.477
> 
> 标签：javascript, numbers

为什么以 9.999999999999999 开头的科学计数法中的某些数字四舍五入为 1，而其他数字保持不变？

例如，在 Google Chrome 20 中会发生以下情况。

`(9.999999999999999e+306).toString() === "9.999999999999999e+306" // true`

但

`(9.999999999999999e+303).toString() === "1e+304" // true`

这是为什么？是浮点问题吗？

然而最奇怪的是在 Opera 11.64 中`(1e23).toString() === "9.999999999999999e+22"`。我试图向 Opera 报告 1e23 错误，但没有人回复。

现场演示：http: [//jsfiddle.net/3ekDK/3/](http://jsfiddle.net/3ekDK/3/)

Demo源码

```
var console = console || {};
console.logToBody = function( str ){
    document.body.innerHTML += "" + str + "<br/>";
};      
var parts = ["9.999999999999999e", 310 ], tmp, tmp2;
while( parts[1]-- ){
    tmp = +(parts.join(''));
    if( /9.9{3,}e/.test( +tmp ) ){
        console.logToBody( tmp + " doesn't convert to " +  (+tmp).toPrecision(1) );
    }
    tmp2 = "1e"+parts[1];
    //Carakan Javascript Engine Math BUG:
    if( !/^1e*/.test( +tmp2 ) ){
        console.logToBody( tmp2 + " = " + (+tmp2) + " in the runtime environment.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T03:10:36.473

这是因为浮点数有时是近似值。有些数字不能用浮点格式表示，即二进制小数，所以近似为[http://en.wikipedia.org/wiki/IEEE_754-2008](http://en.wikipedia.org/wiki/IEEE_754-2008)

这就是为什么你不应该在不四舍五入的情况下依赖浮点运算。一个简单的例子如下：

```
> 20.61 - .1
  20.509999999999998 
```

这是浮点格式的一个很好的解释[http://www.randelshofer.ch/fhw/gri/float.html#chapterfloatingpointformat](http://www.randelshofer.ch/fhw/gri/float.html#chapterfloatingpointformat)

**普通十进制** 178.125

**科学十进制** 1.78125 E 102

**科学二进制** 1.0110010001 E 2111

# javascript - Backbone.js - 跨多个路由共享集合

> ID：10907673
> 
> 赞同：1
> 
> 时间：2012-06-06T03:08:26.937
> 
> 标签：javascript, backbone.js

我正在开发具有多个“部分”的 Backbone.js 应用程序。每个“部分”可能有多个路线，但共享一个集合。这是一个简单的示例（带有“a”和“b”部分）：http: [//jsfiddle.net/scttnlsn/LW4Ny/](http://jsfiddle.net/scttnlsn/LW4Ny/)

在这个例子中，所有的集合都是在路由器初始化时获取的，这样它们就可以在多个路由之间共享，而无需在每个路由处理程序中重新获取。起初这似乎很好，但当共享集合的数量开始增长时，我对继续这种方式持谨慎态度。此外，为用户可能永远不会访问的“部分”获取集合似乎很愚蠢——我更愿意按需加载数据。

显而易见的替代方法是在每个路由处理程序中获取数据，而不是在路由器初始化时获取数据。这意味着只获取实际需要的数据，但是，当在同一“部分”中的路由之间移动时，它仍然最终会执行不必​​要的获取。收集数据将不再有任何“共享”。

处理这种情况的好方法是什么？我觉得我需要实现某种类似缓存的结构。有现成的解决方案吗？

谢谢！

-斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:49:12.070

假设我理解这个问题......你可以跳过初始化获取（如你描述的替代方案），但也可以完全跳过集合的实例化，直到需要。然后声明一个工厂（ish）方法：

```
getOrFetchCollection: function(collectionId) {
  var collection = this[collectionId];
  if(!collection) {
    collection = this[collectionId] = new Backbone.Collection();
    collection.url = urlFor(collectionId);
    collection.fetch();
  }
  return collection;
} 
```

然后从每个路由处理程序中调用它：

```
a1: function() {
  var view = new View({ title: 'a1', collection: this.getOrFetchCollection('a') });
  show(view);
} 
```

# c - C SIGALARM 说明

> ID：10907674
> 
> 赞同：2
> 
> 时间：2012-06-06T03:08:32.387
> 
> 标签：c, signals

*“重写 'fgets' 以包含警报，这样如果 5 秒后用户没有输入任何数据，'fgets' 将返回指向 NULL 的指针（超时）”*

这是一项大型家庭作业的问题，我们才刚刚开始研究信号、捕捉、处理等。话虽如此，这本书和讲座幻灯片都缺乏这方面的内容......

我想到了创建一个处理程序来捕获这种类型的异常，并且我了解警报的工作原理，但我不了解接口将如何工作。

现在只想着“fgets”......如果我只是在所有其他工作完成之前（就在我的返回指针之前）放一个警报：

```
char *fgets(//...//)
{
    alarm(5);
    char * to_return = NULL;
    //...// 
```

如果警报在用户输入数据之前响起，我的处理程序可以“返回 NULL”吗？处理程序完成后，执行是否会在“fgets”中恢复？我想我对处理程序在函数内部可以做什么感到困惑（即它可以强制函数返回一些值，它可以修改函数中声明的变量，它可以强制跳转到不同的函数调用吗？ ETC。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:46:50.750

首先，信号处理程序是一个**单独**的执行线程。当信号发出时，您的代码的“正常”执行被中断，信号处理程序被执行，一旦处理程序返回，您的代码的执行将在它被中断的点恢复。

所以，1）你的信号处理程序不能影响你的返回`fgets()`（至少不是直接的），2）它不能返回一个值。（您可能会注意到，`signal()`安装信号处理程序的函数需要一个指向以*整数作为参数并**具有`void`返回类型***的函数的指针。

信号处理程序*可以*做的是设置一个值。标准（C99，“信号处理”一章，7.14.1.1 (5)）对此表示：

> 如果信号不是由于调用`abort`or`raise`函数而发生的，则如果信号处理程序引用具有静态存储持续时间的任何对象，而不是通过将值分配给声明为的对象`volatile sig_atomic_t`，或者信号处理程序调用任何函数，则行为未定义在标准库以外的`abort` 函数、`_Exit`函数或`signal`函数中，第一个参数等于导致调用处理程序的信号对应的信号编号。

这意味着，您可以声明一个类型的变量，`volatile sig_atomic_t`您`fgets()`和您的信号处理程序都可以“看到”它，将其初始化为默认值，并让信号处理程序更改该值，以便您`fgets()`可以看到信号已触发。

当然，如果您`fgets()`等到用户输入某些内容，即使在信号触发后它也会等待......如何解决这个问题取决于您如何进行输入。`getch()`要么对输入（不是 ISO/ANSI C）使用非阻塞检查，要么依赖`read()`提到的 R. 的行为（依赖于下面的 POSIX 层`fgets()`），或者其他东西。我想不出严格的 ISO/ANSI C 方法来做到这一点，所以这取决于你在课程中已经学到/做了什么。

哦，如果您觉得勇敢，请告诉您的教练，将标准函数重新定义为不同的行为是一个*非常糟糕的主意（避免称他为“愚蠢”）。*如果你想要一个`fgets()`不是真的`fgets()`，给它一个不同的名字，例如`fgets_timed()`。

# mongodb - 使用 pecl 安装到共享主机上的本地目录

> ID：10907679
> 
> 赞同：1
> 
> 时间：2012-06-06T03:09:09.107
> 
> 标签：mongodb, pear, pecl

我想在 bluehost 共享站点上安装 PHP 扩展；特别是 MongoDB 驱动程序。由于 pecl 无法写入包含所有已安装扩展的主服务器目录，我想将 mongo.so 文件安装到我在我家下指定的目录中。我在网上找到的最接近的文章是：

[http://www.site5.com/blog/programming/php/how-to-setup-your-own-php-pear-environment/20090624/](http://www.site5.com/blog/programming/php/how-to-setup-your-own-php-pear-environment/20090624/)

但是，按照我使用“pecl install mongo”命令的步骤进行操作后，它仍然会一直尝试安装到服务器上bluehost的中央目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:51:47.717

根据我的网络主机的技术支持团队的说法，使用 pecl 安装程序会尝试在服务器范围内安装扩展程序，而不是仅在您的帐户下。出于安全原因，我的虚拟主机不允许在其共享环境中进行服务器范围的安装，并且因为他们希望保持他们的机群普遍相同。我怀疑你的主机是一样的。

但是，他们确实建议我通过以下手动过程仅在我的帐户（而不是服务器范围）中下载、配置和安装 pecl 包（pecl_http）：

```
$ cd ~/ 
$ wget http://pecl.php.net/get/pecl_http
$ tar -zxvf pecl_http.tar.gz
$ cd pecl_http
$ phpize
$ ./configure --prefix=~/bin
$ make
$ make test
$ make install 
```

> 成功安装将创建 extname.so 并将其放入 PHP 扩展目录。您需要编辑 php.ini（在我的情况下，这是我使用扩展名放置在与脚本相同的文件夹中的标准 php.ini 文件的副本）并在之前添加 `extension=extname.so`一行（在我的情况下，`extension=http.so`）你可以使用扩展。 [http://www.php.net/manual/en/install.pecl.phpize.php](http://www.php.net/manual/en/install.pecl.phpize.php)

请注意，`~`上述代码中的波浪号 ( ) 指的是当前用户的主目录（例如`/home/username`，在我的主机服务器上）。

**您可能遇到的问题**

1.  使用该`tar`命令时，出现“*无法打开：不是目录*”错误，因为 pecl_http 已下载而没有文件扩展名。这很容易纠正：

    ```
    mv pecl_http pecl_http.tar.gz 
    ```

2.  使用该`make install`命令时，出现“ *cp: cannot create regular file...: Permission denied* ”错误。我通过更改`ext_dir`for pecl 解决了这个问题...

    ```
    pecl config-set ext_dir /home/username/bin/extensions 
    ```

    ...并重新运行`make install`。我还必须将 http.so 扩展名复制到`/home/username/bin/extensions`，然后在我的 php.ini 文件中引用该位置：

    ```
    extension_dir = "/home/username/bin/extensions" 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T05:10:23.603

这听起来像您没有对您的服务器的 root 访问权限。如果您需要编译任何东西，您必须对服务器具有 root 访问权限，或者您可能必须是 sudoers 之一。

# coffeescript - 如何干燥咖啡脚本

> ID：10907685
> 
> 赞同：2
> 
> 时间：2012-06-06T03:10:00.770
> 
> 标签：coffeescript, dry

在这种情况下如何坚持 DRY（手风琴的数量可能很大）：

```
$ ->
  $("#accordion-1").accordion
    autoHeight: false
    navigation: true
$ ->
  $("#accordion-2").accordion
    autoHeight: false
    navigation: true 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:19:16.000

看来您可以创建一个通过选择器生成另一个函数的函数：

```
create = (selector) ->
  $ ->
    $(selector).accordion
      autoHeight: false
      navigation: true 
```

然后：

```
create "#accordion1"
create "#accordion2" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T03:15:39.693

不知道 CoffeeScript，但是在带有 jQ​​uery 的 JS 中，你可以说喜欢`$("#accordion-1,#accordion-2").accordion(...)`同时影响两个元素。

或者，您可以对 HTML 中的手风琴应用一个类，然后说 like `$(".accordion").accordion(...)`。在我看来，这似乎是最不可能引起未来悲伤的方式；你想要一架手风琴，你只要给它适当的等级。您从 HTML 中删除它，它已经从要使用的元素列表中删除，而无需编辑单独的脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T10:42:51.287

最简单/最短的解决方案：

```
$ ->
  $("#accordion-1, #accordion-2").accordion
    autoHeight: no
    navigation: yes 
```

# firefox - 如何将我的 WAMP 本地主机从 firefox 移动到 chrome？

> ID：10907686
> 
> 赞同：6
> 
> 时间：2012-06-06T03:10:18.110
> 
> 标签：firefox, google-chrome, localhost, wamp

我最近在我的计算机上安装了 WAMP 服务器，当我打开 localhost 时，它会自动在 Firefox 中打开。我希望它在 chrome 中打开，以便我可以使用 chrome 开发人员工具。如何让我的本地主机在 chrome 而不是 firefox 中打开。提前感谢您抽出宝贵时间帮助我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-11-05T06:55:40.480

更改**Wamp**服务器的默认浏览器

*   进入**Wamp**安装目录
*   在文本编辑器中打开**wampmanager.conf文件。**
*   将导航器更改为您的浏览器

    例如：- navigator = “C:\Program Files\Mozilla Firefox\firefox.exe”</p>

*   保存并重新启动您的服务器

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T20:18:37.150

转到`wampmanager.conf`并将导航器更改为 Google Chrome。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-21T09:02:21.277

1.  进入**C盘**
2.  打开**wamp64**文件夹
3.  打开**wampmanager.config**文件
4.  在最后一步中，请参阅**导航队列**并粘贴下面给出的此语句

`navigator ="C:/Program Files/Google/Chrome/Application/chrome.exe"` 或者

`"C:/Program Files/Google/Chrome/Application/chrome.exe"`

并关闭所有文件夹。

5.  转到**wamp 服务器**并 **右键单击 wamp 服务器**
6.  **单击退出选项**并**重新启动 wamp 服务器**
7.  **自动在 chrome 浏览器中打开 localhost**或在浏览器中搜索**http://localhost**。

# javascript - 将命令从 Javascript 转换为 Greasmonkey

> ID：10907688
> 
> 赞同：0
> 
> 时间：2012-06-06T03:10:34.023
> 
> 标签：javascript, greasemonkey

我正在尝试向页面添加字符计数器，在此页面上我输入了三个值，它在 ID 为“AnswerBoxID”的 div 的 innerHTML 中返回一个大字符串，现在我希望我的脚本明显地计算数字我已经写了其中的字符来做到这一点

```
var submit=document.getElementsByClassName('Row3');
function countChars(){
    count = document.getElementById('AnswerBoxID').innerHTML.length;
    document.title ="Chars "+count+"/160";
} 
```

它返回字符的粗略近似值，然后当我将其粘贴到编辑器或其他计算字符的东西中时，我再次得到不同的结果，使用此方法计数得到其他东西报告的内容（特别是记事本++）的 5 个字符内。

但我最大的问题是我无法让 countChars() 在更新值时`document.getElementById('AnswerBoxID').innerHTML`更新，在 javascript 中我克服了使用以下代码

```
var submit=document.getElementsByClassName('Row3');
for (i=0; i<submit.length; i++){
    submit[i].firstChild.setAttribute('onclick','countChars()');
} 
```

在阅读了[GM Pitfalls 2](http://commons.oreilly.com/wiki/index.php/Greasemonkey_Hacks/Getting_Started#Pitfall_.232%3a_Event_Handlers)之后，我将我的方法修改为以下

```
for (i=0; i<submit.length; i++){
    submit[i].firstChild.addEventListener('click',countChars(),true);
} 
```

但它仍然不起作用！在有人问是之前，我确实在函数之前定义了 count 变量。我真的不介意最准确的长度，我希望它更精确，但我确实想将运行 countChars() 的 onclick 元素添加到提交按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:53:25.410

您似乎添加了错误的事件处理程序。

```
elm.setAttribute('onclick','countChars()'); 
```

`'countChars()'`将设置一个属性，并在单击元素时在全局范围内进行eval 。然而，Greasemonkey 脚本以[沙盒方式运行到它们自己的全局对象](http://wiki.greasespot.net/Global_object)，并且您声明的函数“countChars”对 eval 不可用。

```
elm.addEventListener('click',countChars(),true); 
```

立即执行函数并将返回值添加为处理程序。要使其工作，只需删除括号并传递函数本身。也可以看看[`element.addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:50:42.530

在 GreaseMonkey 中，您应该能够使用：

```
var count = document.getElementById('AnswerBoxID').textContent.length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T04:14:14.177

Greasemonkey 脚本在沙盒中运行。这意味着，脚本在页面`onload`事件中运行，然后被删除。提交表单时调用 Greasemonkey 脚本的`countChars()`函数将返回`undefined`错误，因为您的函数对象不再存在于 DOM 中。

这是我的简化`contentEval`函数（基于 GM wiki 的[Content Script Injection](http://wiki.greasespot.net/Content_Script_Injection)的函数）：

```
function contentEval(source) {
    var script = document.createElement('script');
    script.setAttribute("type", "text/javascript");
    script.textContent = source;
    document.head.appendChild(script);
} 
```

您还可以设置`text`属性而不是`textContent`与旧 IE 版本兼容，谢谢 RogG！

将该函数放入您的 GM 脚本中，它将用于将您稍后需要用户使用的任何函数附加到 DOM 的头部。

将您的`countChars`函数作为参数传递给`contentEval`函数：

```
contentEval(function countChars() {
    var count = document.getElementById('AnswerBoxID').textContent.length;
    document.title ='Chars '+count+'/160';
}); 
```

这样，您的`countChars`函数将放置在`script`附加到文档的元素中`head`，在 GM 脚本的执行时间结束后可以访问该元素。

如果你想查看上面代码的演示，请在[这个 fiddle](http://jsfiddle.net/ult_combo/vpL2k/)中使用 DOM Inspector 。它创建了一个新`script`元素，该元素附加到（在 JSfiddle 的情况下为`iframe`'s）文档中`head`，这意味着您可以随时访问它。

您也可以简单地将功能附加到[`unsafeWindow`](http://wiki.greasespot.net/UnsafeWindow)，但除非绝对必要，否则应避免使用`unsafeWindow`，并注意`unsafeWindow`Google Chrome 不支持。

使用此页面作为参考：[http ://wiki.greasespot.net/Content_Script_Injection](http://wiki.greasespot.net/Content_Script_Injection)

[`.textContent`](https://developer.mozilla.org/en/DOM/Node.textContent)如 RobG 所述，还可以使用该方法获取元素（及其后代）的文本内容。

# jquery - 使用 jQuery 填充基于复选框 ID 的文本字段？

> ID：10907692
> 
> 赞同：5
> 
> 时间：2012-06-06T03:11:23.483
> 
> 标签：jquery, wordpress

## 语境

我正在尝试为这个[WordPress question](https://wordpress.stackexchange.com/q/53803/12615)建立一个答案。

我正在媒体上传厚框窗口中生成动态复选框。它们应该用于填充用户可以复制/粘贴其值的文本字段。

文本字段的最终输出是此短代码中的*include*属性`[gallery include="23,39,45"]`。

主要是，我需要帮助来构建最后一部分：Checkbox -> Populate/Unpopulate Text Field...

* * *

## 布局

1.  动态复选框

2.  文本字段的插入点（在`<tr>`控制台中显示的最后一个之后）

3.  要填充的文本字段，应为**include="** + CheckBoxID1 ^(comma) CheckBoxID2 ^(comma) etc + **"**

    ![在此处输入图像描述](../Images/ed548734a50a8d6b6911e7d346480521.png)

* * *

## 实际代码

```
<?php
add_action( 'admin_head-media-upload-popup', 'wpse_53803_script_enqueuer' );

function wpse_53803_script_enqueuer() {
    if( $_GET['tab'] == 'gallery' ) 
    {
        ?>
            <style>#media-upload th.order-head {width: 5%} #media-upload th.actions-head {width: 10%}</style>
            <script type="text/javascript">
            jQuery(document).ready( function($) {

                /* Iterate through the media items */
                $('.filename.new').each(function(i,e){
                    var id = $(this).next('.slidetoggle').find('thead').attr('id').replace(/media-head-/, '');
                    var filename = $('<label>Add to gallery list <input type="checkbox" name="gal-item-'+id+'" id="gal-item-'+id+'" value=""  /></label>').insertBefore($(this));
                    filename.css('float','right').css('margin-right','40px');

                    filename.id = id; // PROBLEM: not sure how to do this in Javascript

                    // BUG: the alert is being fired twice
                    filename.click(function() {
                        alert('Handler for img id = '+filename.id+' called.');
                    });
                });                 
            });
            </script><?php
    }
} 
```

* * *

## 缺少的部分

*   创建要填充的动态文本字段。
*   解决评论中注意到的问题和错误。
*   在`filename.click(function()`文本字段中构建所需的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:37:52.490

你可以使用类似的东西来做到这一点

```
 $(document).on('change','input[type="checkbox"][name^="gal-item"]',function(){
    var checkedIds = $('input[type="checkbox"][name^="gal-item"]:checked')
                       .map(function(){
       return parseInt($(this).prop('name').replace(/gal-item-/,''));
    }).get();

    $('#shortcode').val('include="'+checkedIds.join(',')+'"');

}); 
```

您可以通过检查添加媒体标记来替换您必须找到的`document`任何内容。`closer static container`​并且您已经找到了要添加输入字段的元素，像这样添加

```
$('<span>[gallery</span><input type="text" id="shortcode" /><span>]</span>')
 .appendTo(TARGETIDORCLASS); 
```

[工作演示](http://jsfiddle.net/joycse06/HsGdX/2/)

基于此，您重写的代码将类似于

```
jQuery(document).ready( function($) {
     //add input field
     $('<span>[gallery</span><input type="text" id="shortcode" /><span>]</span>')
 .appendTo(TARGETIDORCLASS);
    //bind checkbox change handler

     $(document).on('change','input[type="checkbox"][name^="gal-item"]',function(){
         var checkedIds = $('input[type="checkbox"][name^="gal-item"]:checked').map(function(){
       return parseInt($(this).prop('name').replace(/gal-item-/,''));

    }).get();

    $('#shortcode').val('include="'+checkedIds.join(',')+'"');

    });

    /* Iterate through the media items */
    $('.filename.new').each(function(i,e){
        var id = $(this).next('.slidetoggle')
                        .find('thead')
                        .attr('id')
                        .replace(/media-head-/, '');
       var filename = $('<label>Add to gallery list <input type="checkbox" name="gal-item-'+id+'" id="gal-item-'+id+'" value=""  /></label>')
              .insertBefore($(this));
       filename.css('float','right').css('margin-right','40px');

                });                 
            }); 
```

这应该有效。我很着急，无法进行太多测试，如果您发现任何错误，请检查并告诉我，我很乐意解决这些问题。

# grails - 域对象中的分组约束

> ID：10907698
> 
> 赞同：1
> 
> 时间：2012-06-06T03:12:05.657
> 
> 标签：grails, constraints, domain-object

有没有办法对域对象约束进行分组？像这样的东西：

```
static constraints = {
    personalDetails {
        firstName(nullable: false)
    }
    address {
        street(nullable: false)
    }
} 
```

富域插件为非域对象执行此操作...我想为域对象执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T07:29:33.173

据我所知，Grails 不支持这种格式。可能共享的约束会对您有所帮助。

# sql - SQL Server：拆分记录

> ID：10907699
> 
> 赞同：2
> 
> 时间：2012-06-06T03:12:23.317
> 
> 标签：sql, sql-server, cross-apply, split-function

我有一张这样的桌子：

```
account   |   check1          |   check2
1         |   100]200]300     |   101]209]305
2         |   401]502         |   404]511
3         |   600             |   601 
```

我想将记录分成如下内容：

```
account   |   check1     |   check2
1         |   100        |   101
1         |   200        |   209
1         |   300        |   305
2         |   401        |   404
2         |   502        |   511
.         |     .        |    .
.         |     .        |    .
.         |     .        |    . 
```

如何**仅使用 SQL Server**执行此操作？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T05:11:10.107

首先，您需要一个拆分函数，该函数可以让您确定结果中的顺序。这是一个使用 IDENTITY 列的多语句 TVF

```
CREATE FUNCTION dbo.SplitStrings
(
    @List       NVARCHAR(MAX),
    @Delimiter  NVARCHAR(255)
)
RETURNS @t TABLE(ID INT IDENTITY(1,1), Item INT)
AS
BEGIN
    INSERT @t(Item) SELECT SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
        FROM sys.all_objects) AS n(Number)
    WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
    ORDER BY Number OPTION (MAXDOP 1);

    RETURN;
END
GO 
```

（如果您有一个 Numbers 表，您可以使用它而不是子查询，这也将允许您将 WITH SCHEMABINDING 添加到函数的定义中，这提供了潜在的性能优势。）

使用该功能后，根据您提供的数据和所需的结果，这里是示例用法：

```
DECLARE @x TABLE(account INT, check1 NVARCHAR(1000), check2 NVARCHAR(1000));

INSERT @x SELECT 1, '100]200]300','101]209]305'
UNION ALL SELECT 2, '401]502','404]511'
UNION ALL SELECT 3, '600','601'
UNION ALL SELECT 4, '205]104','304]701'; -- I added this sanity check

SELECT account, check1 = s1.Item, check2 = s2.Item
FROM @x AS x
CROSS APPLY dbo.SplitStrings(x.check1, ']') AS s1
CROSS APPLY dbo.SplitStrings(x.check2, ']') AS s2
WHERE s1.ID = s2.ID
ORDER BY account, s1.ID; 
```

结果：

```
account  check1  check2
-------  ------  ------
1        100     101
1        200     209
1        300     305
2        401     404
2        502     511
3        600     601
4        205     304
4        104     701 
```

这假设您具有某种验证/强制措施，即 check1 和 check2 列中的相应值将始终具有相同数量的值。它还假设任何 check1 / check2 值都不会超过大约 7,000 个字符（同样，数字表可以帮助使其更加灵活）。

**编辑**

在 AndriyM 的评论之后，我想回来重新访问它，主要是为了提供上述功能的一个版本，它可以在不使用多语句 TVF 的情况下工作。这使用了 Andriy 的想法 ROW_NUMBER() 可以使用。

```
CREATE FUNCTION dbo.SplitStrings
(
    @List       NVARCHAR(MAX),
    @Delimiter  NVARCHAR(255)
)
RETURNS TABLE
AS
    RETURN (SELECT Number = ROW_NUMBER() OVER (ORDER BY Number),
        Item FROM (SELECT Number, Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
        CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
    FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
        FROM sys.all_objects) AS n(Number)
    WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, 1) = @Delimiter
    ) AS y);
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:21:02.917

@Aaron Bertrand 对于第二列“check2”中具有空值的记录，如下所示：

```
Account | Check1      | Check2

001     | 100]200     | ]

002     | 300]400     | Null

003     | 500]600]700 | ]] 
```

您的函数不会像这样返回值：

```
Account | Check1      | Check2

001     | 100         | 

001     | 200         | 

002     | 300         | Null

002     | 400         | Null

003     | 500         |

003     | 600         | 

003     | 700         | 
```

如何改进函数以处理最后一个分隔符后的空值或空字符串？

# c# - 如何在 IIS 上托管 wcf 路由服务？

> ID：10907705
> 
> 赞同：0
> 
> 时间：2012-06-06T03:13:04.630
> 
> 标签：c#, .net, wcf, iis, wcf-routing

所以这与我的问题[有关](https://stackoverflow.com/questions/10899657/how-to-do-wcf-routing-service-using-xpath)。

所以我已经运行了一个现有的 wcf 服务，托管在 IIS 上。我创建了一个路由器服务，它将对标头进行一些 XPath 过滤。因此，如果标头匹配，则转到 service1。现在，我在 IIS 上托管了我的路由器服务，我可以像[http://iis.com/myrouter/router.svc/](http://iis.com/myrouter/router.svc/)一样访问它并给我这个 wsdl 东西。现在，当我尝试在 service1 上请求服务方法时，例如[http://iis.com/myrouter/router.svc/general/getMyMethod?blah=blahblah](http://iis.com/myrouter/router.svc/general/getMyMethod?blah=blahblah)。它给了我一个 404 错误。顺便说一句，我使用了提琴手。

根据我通过提琴手的请求，我添加了自定义标头，例如“service_version：1”。顺便说一句，我使用了一个命名空间，`<namespaceTable>`但我不知道如何在我的请求中附加它。无论如何，我主要关心的是如何让我的路由器服务在 IIS 上工作？

更新：顺便说一句，我正在使用`System.ServiceModel.Routing.RoutingService`。所以我想要完成的是路由服务。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:23:12.317

你很可能正面临这个问题。不能以这种方式访问​​ SOAP 服务，因为它依赖于 SOAP 包。这是另一篇文章，应该会引导您朝着正确的方向前进。但是，它引导您的方向是手动测试 SOAP 服务是*不可取*的，而且可能是徒劳的。

但是，需要注意的是，它会引导您使用 WCF 测试客户端 - 这是我朋友的最佳选择，而且它非常易于使用。提供 URL，剩下的就交给它了。

[在 Fiddler 中调用 soap wcf 服务，就像在 Wcf 测试客户端中一样](https://stackoverflow.com/questions/7386945/invoke-soap-wcf-service-in-fiddler-like-in-wcf-test-client)

**访问 RESTful 端点**

如果您尝试测试 RESTful 端点，那么问题可能与配置的路由有关。请参阅此链接以获取帮助 - 确保您设置的服务相同，因为它们使用的属性正确构建了路由。请记住，您不会使用与 SOAP 端点相同的地址来引用 RESTful 端点。

[http://geekswithblogs.net/michelotti/archive/2010/08/21/restful-wcf-services-with-no-svc-file-and-no-config.aspx](http://geekswithblogs.net/michelotti/archive/2010/08/21/restful-wcf-services-with-no-svc-file-and-no-config.aspx)

您也可以查看此链接。

[并排托管 WCF 肥皂和休息端点](https://stackoverflow.com/questions/3366103/hosting-wcf-soap-and-rest-endpoints-side-by-side)

# javascript - 我可以从外部 JavaScript 文件制作 Twitter 关注按钮吗？

> ID：10907715
> 
> 赞同：0
> 
> 时间：2012-06-06T03:14:43.797
> 
> 标签：javascript, api, twitter

我的网站调用一个外部 JavaScript 文件来在每个页面上创建页脚。我想在页脚中包含一个关注按钮。但是，开发人员页面上的所有示例都是针对从带有嵌入脚本的 HTML 文件创建按钮的，而且我对 JS 的经验不足，无法弄清楚如何重写代码以在没有 HTML 的情况下工作。我已经尝试将整个 HTML blob 存储为字符串并将其写入文档。我还将 JS 从 blob 中取出并将其添加到文件中，但这也不起作用。

这是他们提供的 HTML，我试图提取

```
<a href="https://twitter.com/dbb0" class="twitter-follow-button" data-show-count="false">Follow @dbb0</a>
<script>
    !function(d,s,id){
        var js,fjs=d.getElementsByTagName(s)[0];
        if(!d.getElementById(id)){
            js=d.createElement(s);
            js.id=id;
            js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);
        }
    }(document,"script","twitter-wjs");
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:16:56.400

回答您的主要问题：是的，这是可能的。

您应该使用 DOM、innerHTML（注意这一点）或 jQuery 创建一个非常相似的 html 结构，然后将其添加到您的文档中。

你应该问更具体的问题才能走得更远，这太模糊了:)

# php - PHP 类中的数据库连接

> ID：10907728
> 
> 赞同：1
> 
> 时间：2012-06-06T03:15:53.250
> 
> 标签：php, class, singleton, database-connection

我需要一些关于如何为我正在处理的项目创建\处理数据库连接的建议\建议。我正在使用 PHP 5.4.3 为我的公司创建一个简单的工单系统，现在没有任何类型的身份验证，因为我还没有准备好应对这种复杂性。到目前为止，我正在计划以下结构

```
<? php
class Db {
    private static $dbh = null;

    static function open_connection() {
        self::$dbh = new PDO(... }

    static function query($sql) {
        $result = self::$dbh->... }

    static function fetch_array($result){
        ...}
...

}

class Workorder extends Db {

    protected static $table_name = ...
    ...

    public $wonum;  
    ...

    function instantiate {
    //return workorder objects
    ...}

    function findallwos {
    //find all work orders...
    ...}

...} 
```

我认为这对于我需要显示所有工作订单或放入新工作订单的页面来说效果很好。但是我有一些页面需要非常简单的查询，例如，其中一个报告页面将只有我们为我们工作的 3 名技术人员的下拉列表，如果我使用全局 $dbh 变量，我可以这样做

```
function create_dropdown () {
    GLOBAL $dbh;

    $sql = "select...";
    $sth = $dbh->prepare($sql);
    $sth->execute();
    $arry = $sth->fetchAll(PDO::FETCH_ASSOC);
    ..... 
```

但我宁愿远离全局变量，因为最终我想为这个站点增加未来的复杂性，这可能不适用于全局变量。（包括具有身份验证等的多个用户）。所以我的问题是：

我不应该像我设计的那样使用 Db 类，而是使用某种 connection_factory 类来传递连接吗？（并且没有我的工作订单类是任何东西的扩展）

我应该只使用对 Db 类的静态调用来提取简单的查询吗？`db::fetch_array...`

或者大家还有什么建议吗？我遇到了很多不同的方法来解决这个问题，但理想情况下，我想设计这个，这样当我添加多个不同的用户时，我不必完全重新编码所有内容权限等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:26:39.253

我个人对您提供的代码设计的批评是您没有[分离关注点](http://en.wikipedia.org/wiki/Separation_of_concerns)并且没有抽象。不要犯以前很多人犯过的巨大错误，在代码中混合 SQL 语句、表示类型和业务逻辑。在某些时候，您可能想要切换数据库产品、创建移动版本、添加功能……然后您需要更改数十个文件。

为了防止这些事情发生，我建议采用这样的方法：

*   为实体及其关系创建一个干净且轻量级的模型，此时不要关心持久性（即数据库）、访问控制等（例如`Workorder`，包含`Employee`...的类的简单类）
*   编写在模型上定义必要的持久性操作的接口（即 saveWorkorder(Workorder $workorder)、getAllWorkorders()、loadWorkorder()、...）。在您的代码中，仅提及这些接口和它们提供的方法，而不是具体的实现
*   现在，用某个 DB 实现持久化接口的类。不要忘记将基本的 DB 操作封装在一个类中，您将在许多持久性类中使用它们。

我希望我的回答不会太模糊，但软件设计是一个非常广泛的领域，很难在一个答案中涵盖所有方面。与所有关于软件设计的问题一样，没有正确或错误的解决方案，因为它在很大程度上取决于具体项目、需求、个人编码风格等......

附带说明一下，如果您打算做更多此类项目，花时间了解框架（如 Zend Framework、Symphony、CakePHP 等）可能会有所回报，因为它们为您提供了很多您可以开箱即用的现有功能，例如数据库连接器、视图和业务逻辑的分离，...

# php - 哪种方法是提高服务器效率/减少工作量的最佳方法

> ID：10907729
> 
> 赞同：0
> 
> 时间：2012-06-06T03:16:08.513
> 
> 标签：php, mysql, database, database-design

我很想知道存储与 UserID 关联的 ID 列表的表的首选方法是什么。

我是否应该有一个字段存储所有 id 的序列化数组（每个 UserID 一行）

还是每个玩家的每个 id 一行？答案是否明确，或者在做出这样的决定时是否有需要考虑的因素？

希望您能帮助解释最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:21:24.643

如果您要每次或大部分时间获取整个 ID 列表，或者如果 ID 列表很短，那么序列化它们就可以了（尽管我不推荐它）

但是，如果您需要使用 ID 列表中的 ID 作为约束来搜索用户，那么您将错过索引。

最好的方法是有一个单独的表来存储多对多关系（这是我假设你想要的）。如果您有一对多关系，那么您应该反转引用关系的方式并将 user_id 列添加到包含 IDs 的表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:18:25.237

我会为每个玩家的每个 id 保留一行。这对我来说是更易于管理和清洁的方法。不过，您在这里查看了多少条记录？

# jquery - 在 JSON (jQuery) 中处理 500 个错误

> ID：10907733
> 
> 赞同：26
> 
> 时间：2012-06-06T03:17:03.950
> 
> 标签：jquery, ajax, json

这个 JSON 请求：

```
$.ajax({
    url:jSONurl+'?orderID='+thisOrderID+'&variationID='+thisVariationID+'&quantity='+thisQuantity+'&callback=?',
    async: false,
    type: 'POST',
    dataType: 'json',
    success: function(data) {
        if (data.response == 'success'){
            //show the tick. allow the booking to go through
            $('#loadingSML'+thisVariationID).hide();
            $('#tick'+thisVariationID).show();
        }else{
            //show the cross. Do not allow the booking to be made
            $('#loadingSML'+thisVariationID).hide();
            $('#cross'+thisVariationID).hide();
            $('#unableToReserveError').slideDown();
            //disable the form
            $('#OrderForm_OrderForm input').attr('disabled','disabled');
        }
    },
    error: function(data){
        alert('error');
    }
}) 
```

在某些情况下，会以以下形式返回 500 错误：

```
jQuery17205593111887289146_1338951277057({"message":"Availability exhausted","status":500}); 
```

然而，这对我仍然有用，我需要能够正确处理这个问题。

但是由于某种原因，当返回这个 500 错误时，我的错误函数没有被调用，我只是在 firebug 中得到一个“NetworkError：500 Internal Server Error”错误。

我该如何处理？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-06T03:55:59.563

您是否尝试`statuscode`过像这样的回调

```
 $.ajax({
    statusCode: {
        500: function() {
          alert("Script exhausted");
        }
      }
   }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-18T16:27:22.710

如果您使用的是 POST，则可以使用以下内容：

```
$.post('account/check-notifications')
    .done(function(data) {
        // success function
    })
    .fail(function(jqXHR){
        if(jqXHR.status==500 || jqXHR.status==0){
            // internal server error or internet connection broke  
        }
    }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-04T22:07:51.257

查看[jqXHR 对象](http://api.jquery.com/jQuery.ajax/#jqXHR)文档。您可以使用 fail 方法来捕获任何错误。

对于您的情况，如下所示：

```
$.post(jSONurl+'?orderID='+thisOrderID+'&variationID='+thisVariationID+'&quantity='+thisQuantity+'&callback=?')
.done(function(data){
        if (data.response == 'success'){
            //show the tick. allow the booking to go through
            $('#loadingSML'+thisVariationID).hide();
            $('#tick'+thisVariationID).show();
        }else{
            //show the cross. Do not allow the booking to be made
            $('#loadingSML'+thisVariationID).hide();
            $('#cross'+thisVariationID).hide();
            $('#unableToReserveError').slideDown();
            //disable the form
            $('#OrderForm_OrderForm input').attr('disabled','disabled');
        }
      }, "json")
.fail(function(jqXHR, textStatus, errorThrown){
      alert("Got some error: " + errorThrown);
      }); 
```

我还会考虑通过 post 传递 json 数据字符串，而不是附加查询变量：

```
$.post(jSONurl, $.toJSON({orderID: thisOrderID, variationID: thisVariationID, quantity: thisQuantity, callback: false})) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-06T03:22:02.463

我认为您可以通过添加以下内容来捕捉它：

```
$.ajax({
    statusCode: {
      500: function() {
      alert("error");
       }
    },
    url:jSONurl+'?orderID='+thisOrderID+'&variationID='+thisVariationID+'&quantity='+thisQuantity+'&callback=?',
    async: false,
    type: 'POST',
    dataType: 'json',
    success: function(data) {
        if (data.response == 'success'){
            //show the tick. allow the booking to go through
            $('#loadingSML'+thisVariationID).hide();
            $('#tick'+thisVariationID).show();
        }else{
            //show the cross. Do not allow the booking to be made
            $('#loadingSML'+thisVariationID).hide();
            $('#cross'+thisVariationID).hide();
            $('#unableToReserveError').slideDown();
            //disable the form
            $('#OrderForm_OrderForm input').attr('disabled','disabled');
        }
    },
    error: function(data){
        alert('error');
    }
}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-06T04:12:20.710

我从 ajax 调用中删除了 dataType:json 并且能够捕捉到错误。在这些情况下，幸运的是我不需要返回的 JSON 的内容；只知道返回了一个错误，所以现在就足够了。Firebug 仍然很适合但我至少能够在出现错误时执行一些操作

```
$.ajax({
            url:'http://example.com/jsonservice/LiftieWeb/reserve?token=62e52d30e1aa70831c3f09780e8593f8&orderID='+thisOrderID+'&variationID='+reserveList+'&quantity='+thisQuantity+'&callback=?',
            type: 'POST',
            success: function(data) {
                if (data.response == 'Success'){
                    //show the tick. allow the booking to go through
                    $('#loadingSML'+thisVariationID).hide();
                    $('#tick'+thisVariationID).show();
                }else{
                    //show the cross. Do not allow the booking to be made
                    $('#loadingSML'+thisVariationID).hide();
                    $('#cross'+thisVariationID).hide();
                    $('#unableToReserveError').slideDown();
                    //disable the form
                    $('#OrderForm_OrderForm input').attr('disabled','disabled');
                }
            },
            error: function(data){
                alert('error');
            }
        }) 
```

# java - 使用 JFileChooser 而不使用主声明

> ID：10907738
> 
> 赞同：1
> 
> 时间：2012-06-06T03:17:30.767
> 
> 标签：java, swing, file-io, swt, jfilechooser

[在此链接中](https://stackoverflow.com/questions/10900696/how-to-open-files-in-java-swing-without-jfilechooser/10901164#10901164)我之前的帖子之后，我遇到了另一个问题。

给定以下代码：

```
public class GuiHandler extends javax.swing.JFrame {

// GuiHandler is the class that runs the entire project 
// here are two private fields that I use in the code , I have more but they
// irrelevant for the moment 

final JFileChooser openFiles = new JFileChooser();
private DataParser xmlParser = new DataParser();

// later on I have this method - XMLfilesBrowserActionPerformed

private void XMLfilesBrowserActionPerformed(java.awt.event.ActionEvent evt) {                                                

       //setting the file chooser
    openFiles.setFileSelectionMode(JFileChooser.FILES_ONLY);
    openFiles.setAcceptAllFileFilterUsed(false);
    if (openFiles.showOpenDialog(this) == JFileChooser.APPROVE_OPTION) {
        //getting the selected file
        File selected = openFiles.getSelectedFile();

// from here I parse the XML file that I opened with JFileChooser 
// with the help of one of my methods getNodeListFromFile
xmlParser.getNodeListFromFile(selected); 
```

问题是我不能使用`main`之前在上面的链接中建议的声明（我必须补充一下这是一个非常好的：）），发布的代码是：

```
public class NativeFileChooser {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(
                            UIManager.getSystemLookAndFeelClassName());
                } catch(Exception e) {
                    e.printStackTrace();
                }
                JFileChooser jfc = new JFileChooser();
                jfc.showOpenDialog(null);
            }
        });
    }
} 
```

并且使用我的方法使以后操作文件`main`变得非常困难。`XML``getNodeListFromFile`

我需要的是使用“简单”的浏览器`JFileChooser`，然后使用选择的文件，而不涉及`main`到 .

如果有人能解释我如何将上述代码（或其他任何内容）与我的代码一起使用，我将不胜感激。

最好的祝福

**编辑：**

如果我使用这样的代码；

```
 public void launchFileChooser() {

     SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(
                        UIManager.getSystemLookAndFeelClassName());
            } catch(Exception e) {
                e.printStackTrace();
            }
            JFileChooser jfc = new JFileChooser();
            jfc.setFileSelectionMode(JFileChooser.FILES_ONLY);
            jfc.setAcceptAllFileFilterUsed(false);
            if (jfc.showOpenDialog(null) == JFileChooser.APPROVE_OPTION)
                 newFile = jfc.getSelectedFile();

        }
    });

  } 
```

这`newFile`是一个数据成员。

然后打开文件后，代码崩溃。

如果我创建`jfc`一个数据成员，代码将打开常规浏览器。知道如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:32:50.107

我确信代码只是一个自包含的示例。

`JFileChooser`你应该`GuiHandler`以某种方式工作。如果有的话，您可以将该代码添加到您的 init 方法中`GuiHandler`

```
public class GuiHandler extends javax.swing.JFrame {

  //lots of your other code
  public void launchFileChooser() {
     SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                UIManager.setLookAndFeel(
                        UIManager.getSystemLookAndFeelClassName());
            } catch(Exception e) {
                e.printStackTrace();
            }
            JFileChooser jfc = new JFileChooser();
            jfc.showOpenDialog(null);
        }
    });
  }

  public static void main(String[] args) {
     GuiHandler handler = new GuiHandler();
     handler.launchFileChooser();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:23:31.833

声明任何 Other 类或使用 JFrame 类并通过声明新类/接口或在那里本身将调用委托给 JFileChooser ，实际上从 Main 方法调用 JFileChooser 没有任何意义

# android - 在android列表项中捕获触摸事件并防止滚动

> ID：10907739
> 
> 赞同：4
> 
> 时间：2012-06-06T03:17:41.113
> 
> 标签：android, events, custom-controls, touch, android-event

我在这里通过在某个列表视图的项目中放置一个自定义控件来尝试一个疯狂的想法。只有当用户触碰某个触发点然后他们可以“拖动”时，该控件才会“激活”。

我的问题是，我可以在 onTouchEvent(...) 中做什么来防止列表视图接收事件和滚动。现在我可以触摸并获得控件，但是如果我将手指向上或向下移动太多，列表视图会接管并开始滚动，那么我的视图甚至不会收到 ACTION_UP 事件。

这是我当前的 onTouchEvent 代码：

```
if (e.getAction() == MotionEvent.ACTION_DOWN) {

    Log.d("SwipeView", "onTouchEvent - ACTION_DOWN" + e.getX() + " " + e.getY());           
    int midX = (int)(this.getWidth() / 2);
    int midY = (int)(this.getHeight() / 2);

    if (Math.abs(e.getX() - midX) < 100 &&
        Math.abs(e.getY() - midY) < 100) {

        Log.d("SwipeView", "HEY");
        setDragActive(true);

    }

    this.invalidate();
    return true;

} else if (e.getAction() == MotionEvent.ACTION_MOVE) {

    _current[0] = e.getX();
    _current[1] = e.getY();

    this.invalidate();
    return true;

} else if (e.getAction() == MotionEvent.ACTION_UP) {

    _current[0] = 0;
    _current[1] = 0;

    setDragActive(false);

    this.invalidate();
    return true;

} 
```

我确信它以某种方式与事件层次结构有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:24:31.437

这可能不是您想要的，但可以在您的活动中实现捕获功能。添加

```
private View capturedView;
public void setCapturedView(View view) { this.capturedView = view); }

@Override
public boolean dispatchTouchEvent(MotionEvent event) {
    return (this.capturedView != null) ?
        this.capturedView.dispatchTouchEvent(event) :
        super.dispatchTouchEvent(event);
} 
```

到您的活动，然后只需将您的观点传递给 on`ACTION_DOWN`和 null on `ACTION_UP`。它并不完全漂亮，但它确实有效。我确信有一种正确的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:08:15.603

终于学会了正确的方法：[requestDisallowInterceptTouchEvent](http://developer.android.com/reference/android/view/ViewParent.html#requestDisallowInterceptTouchEvent%28boolean%29)

# ios - presentingViewController 总是得到 UITabBarController

> ID：10907742
> 
> 赞同：11
> 
> 时间：2012-06-06T03:17:53.380
> 
> 标签：ios, ios5

我只是添加 TabBarController + NavigationController。在此之前一切正常，但现在当我从模式调用 presentingViewController 时，出现此错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UITabBarController tableViewListado]：无法识别的选择器发送到实例

我得到的是“UITabBarController”，而不是接收预期的对象（ViewController），我应该在使用 TabBar 和 Nav 控制器时以某种不同的方式获取呈现控制器吗？

没有 TabBar/Nav 我使用的是这个：

```
ViewController *parentView = (ViewController *)[self presentingViewController]; 

[parentView something]; 
```

**编辑：**

只要发现如果我这样做它就可以工作，但不要认为这实际上是最好的方法：

```
ViewController *parentView = (ViewController *)[(UINavigationController *)[((UITabBarController *)[self presentingViewController] ) selectedViewController] topViewController]  ;

[parentView something]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-03T20:20:26.910

[我对这个问题](https://stackoverflow.com/questions/8905961/modal-view-controller-not-calling-presenting-view-controllers-dismissmodalviewc/26185639#26185639)的回答的副本

从[Programming iOS 6, by Matt Neuburg](http://www.apeth.com/iOSBook/ch19.html)：

> 在 iPad 上，当呈现的视图控制器的 modalPresentationStyle 是 UIModalPresentationCurrentContext 时，必须决定哪个视图控制器应该是呈现的视图控制器的presentingViewController。这将确定哪个视图将被呈现的视图控制器的视图替换。这个决定涉及另一个 UIViewController 属性，definePresentationContext (a BOOL)。从 presentViewController:animated:completion: 被发送到的视图控制器开始，我们沿着父视图控制器链查找其定义PresentationContext 属性为 YES 的视图控制器。如果我们找到一个，那就是那个；它将是presentingViewController，并且它的视图将被呈现的视图控制器的视图替换。如果我们没有找到，

TL;DR
1\. 将所需设置`definesPresentationContext`为真`presentingViewController`
2\. 设置`modalPresentationStyle`为`UIModalPresentationCurrentContext`所需`presentedViewController`

# c++ - 带有 std::is_reference 的 std::enable_if 无法编译

> ID：10907743
> 
> 赞同：3
> 
> 时间：2012-06-06T03:18:03.577
> 
> 标签：c++, c++11, typetraits, enable-if

就像`std::reference_wrapper`在幕后使用指针来存储“引用”一样，我正在尝试使用以下代码做类似的事情。

```
#include <type_traits>

struct Foo
{
    void* _ptr;

    template<typename T>
    Foo(T val,
        typename std::enable_if
            <
                std::is_reference<T>::value,
                void
            >::type* = nullptr)
        : _ptr(&val)
    { }
};

int main()
{
    int i = 0;
    int& l = i;

    Foo u2(l);

    return 0;
} 
```

但是，这无法编译：

```
CXX main.cpp
main.cpp: In function ‘int main()’:
main.cpp:23:13: error: no matching function for call to ‘Foo::Foo(int&)’
main.cpp:23:13: note: candidates are:
main.cpp:8:5: note: template<class T> Foo::Foo(T, typename std::enable_if<std::is_reference<_Tp>::value, void>::type*)
main.cpp:8:5: note:   template argument deduction/substitution failed:
main.cpp: In substitution of ‘template<class T> Foo::Foo(T, typename std::enable_if<std::is_reference<_Tp>::value, void>::type*) [with T = int]’:
main.cpp:23:13:   required from here
main.cpp:8:5: error: no type named ‘type’ in ‘struct std::enable_if<false, void>’
main.cpp:3:8: note: constexpr Foo::Foo(const Foo&)
main.cpp:3:8: note:   no known conversion for argument 1 from ‘int’ to ‘const Foo&’
main.cpp:3:8: note: constexpr Foo::Foo(Foo&&)
main.cpp:3:8: note:   no known conversion for argument 1 from ‘int’ to ‘Foo&&’ 
```

如何使`enable_if`参考参数的返回为真？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:30:23.393

`T`在这种情况下，永远不会被推断为引用类型。在您构造对象`u2`时，构造函数模板参数被推导出为`int`。

虽然变量的类型`u2`是`int&`，但在表达式中*使用* 时，它是类型的左值表达式。 [表达式永远没有引用类型。](https://stackoverflow.com/a/10238252/151292)`u2``int`

模板实参推导使用函数实参的类型来推导模板形参类型。函数参数是表达式。因此，因为没有表达式具有引用类型，模板参数永远不会被推断为引用类型。

[在 C++11 中，如果函数参数具有 type `T&&`，如果参数是左值，`T`则可以推断为类型。`T&`这种机制可以实现完美转发。不过，这与您的情况无关。]

实际上，在表达式中，对象和对该对象的引用是无法区分的。引用只允许您为对象指定另一个名称。

# php - PHP中的静态和非静态调用

> ID：10907746
> 
> 赞同：14
> 
> 时间：2012-06-06T03:18:13.943
> 
> 标签：php, oop

好的，我有这个代码，我正在学习

```
 class scope{

    function printme(){
        return "hello";
    }

    public static function printme(){
        return "hello"; 
    }

 }

$s = new scope();
echo $s->printme(); //non-static call
echo "<br>";
echo scope::printme(); //static call 
```

现在，这不是我项目的真正代码，但这些是我想做的事情

1.  我想创建一个包含静态和非静态函数的类。
2.  我希望一个函数在静态和非静态调用中都可用。

由于非静态函数有很多操作，我还需要将它作为静态函数调用，这样我就不需要实例化类。这可能吗？或者我真的需要将函数重写为另一个函数或类？

注意：如果我已经在做一些糟糕的编程，请告诉我。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-06T03:22:43.347

***这是规则：***

静态方法既可以用于静态方法，也可以用于非静态方法。

非静态方法只能在非静态方法中使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T03:27:25.367

如果你的类的实例很少需要，你可以让静态方法创建一个实例，调用非静态方法并返回值。

```
class Scope {
    public function mynonstatic() {
    }

    public static function mystatic() {
        $s = new Scope();
        return $s->mynonstatic();
    }
} 
```

请记住，静态方法实际上只是一个范围缩小的全局函数。它们很有用，但不应在没有充分理由的情况下创建它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T03:26:19.320

> 由于非静态函数有很多操作，我还需要将它作为静态函数调用，这样我就不需要实例化类。这可能吗？或者我真的需要将函数重写为另一个函数或类？

如果你需要它是静态的，那就让它成为静态的。如果您不需要它，请保持原样。可以从非静态函数内部调用静态函数。

```
class Foo
{
    public function bar()
    {
        Foo::zex();

        // or self::zex() or even $this->zex();
    }

    public static function zex()
    {
    }
}

$foo    = new Foo;
$foo->bar(); 
```

蚂蚁反过来。

```
class Foo
{
    public function bar()
    {

    }

    public static function zex()
    {
        $foo    = new Foo;
        $foo->bar();
    }
} 
```

什么时候应该做或应该做是另一个问题。后者最常见的用法可能是 Singleton 模式。

# sqlclr - 为 CLR 函数设置 SCHEMABINDING 和 IsDeterministic

> ID：10907747
> 
> 赞同：3
> 
> 时间：2012-06-06T03:18:22.310
> 
> 标签：sqlclr, sql-server-2012

我有一个与 SQL Server 2012 一起使用的现有 C# CLR 运行时函数。我想在此函数上设置`IsDeterministic`和`SCHEMABINDING`选项，以便我可以使用它来持久化表中的计算列。

这是更改语句：

```
ALTER FUNCTION [dbo].[authorityFromURI](@URI [nvarchar](4000))
RETURNS [nvarchar](4000) WITH EXECUTE AS CALLER
AS 
EXTERNAL NAME [KDPSqlServerProject].[UserDefinedFunctions].[authorityFromURI] 
```

应该如何修改这个 alter 语句来设置这些选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T04:52:06.670

您必须在函数代码本身内设置 IsDeterminstic 属性，例如

```
[SqlFunction(IsDeterministic = true, IsPrecise = true [...])] 
```

使其成为模式绑定：

```
RETURNS NVARCHAR(4000)
WITH SCHEMABINDING, EXECUTE AS CALLER 
```

也就是说，我还没有测试这些选项和持久性......

# mysql - 计算MySQL中两个日期时间之间的差异

> ID：10907750
> 
> 赞同：180
> 
> 时间：2012-06-06T03:18:38.497
> 
> 标签：mysql

我将 MySQL 中的最后一次登录时间存储在`datetime`-type 字段中。当用户登录时，我想获得上次登录时间和当前时间（我使用`NOW()`）之间的差异。

我该如何计算呢？

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2012-06-06T03:21:54.267

使用[`TIMESTAMPDIFF`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)MySQL 功能。例如，您可以使用：

```
SELECT TIMESTAMPDIFF(SECOND, '2012-06-06 13:13:55', '2012-06-06 15:20:18') 
```

在您的情况下，函数的第三个参数`TIMSTAMPDIFF`将是当前登录时间（`NOW()`）。第二个参数是上次登录时间，它已经在数据库中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-15T06:48:30.317

我关于逻辑的两分钱：

语法是“旧日期” - :“新日期”，所以：

```
SELECT TIMESTAMPDIFF(SECOND, '2018-11-15 15:00:00', '2018-11-15 15:00:30') 
```

给30，

```
SELECT TIMESTAMPDIFF(SECOND, '2018-11-15 15:00:55', '2018-11-15 15:00:15') 
```

给出：-40

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-20T15:03:44.793

如果您的开始和结束日期时间在不同的日期，请使用 TIMEDIFF。

```
SELECT TIMEDIFF(datetime1,datetime2) 
```

如果 datetime1 > datetime2 那么

```
SELECT TIMEDIFF("2019-02-20 23:46:00","2019-02-19 23:45:00") 
```

给：24:01:00

和日期时间 1 < 日期时间 2

```
SELECT TIMEDIFF("2019-02-19 23:45:00","2019-02-20 23:46:00") 
```

给出：-24:01:00

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-22T13:13:29.933

我认为接受的答案不合适。例如，如果上次登录时间和当前时间之间的差异是 8 小时，那么以秒为单位的差异是不合逻辑的。正确的格式是小时、分钟和秒。我已经说明了如下 -

在这里，我创建了一个表`login_info`来存储用户的登录信息。

```
CREATE TABLE login_info (
    -> user_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    -> last_login DATETIME NOT NULL,
    -> PRIMARY KEY (user_id)
    -> ); 
```

然后我使用一些随机值填充表格 -

```
INSERT INTO login_info (last_login) VALUES 
    -> ("2021-09-22 09:32:44"),
    -> ("2021-09-22 13:02:57"),
    -> ("2021-09-21 23:43:21"),
    -> ("2021-09-22 04:43:39"),
    -> ("2021-09-22 17:23:21"); 
```

现在我计算 last_login 和 current_time 之间的差异如下：

```
CREATE TABLE login_dur_in_sec AS 
    -> SELECT user_id,
    -> TIMESTAMPDIFF(SECOND, last_login, NOW()) AS diff
    -> FROM login_info; 
```

```
SELECT * FROM login_dur_in_sec;
+---------+-------+
| user_id | diff  |
+---------+-------+
|       1 | 28580 |
|       2 | 15967 |
|       3 | 63943 |
|       4 | 45925 |
|       5 |   343 |
+---------+-------+ 
```

```
CREATE TABLE hour_section AS 
    -> SELECT user_id,
    -> FLOOR (diff / 3600) AS hour_part 
    -> FROM login_dur_in_sec; 
```

```
CREATE TABLE minute_section AS 
    -> SELECT user_id, 
    -> FLOOR (MOD (diff, 3600)/ 60) AS minute_part
    -> FROM login_dur_in_sec; 
```

```
CREATE TABLE second_section AS
    -> SELECT user_id,
    -> MOD (MOD (diff, 3600), 60) AS second_part
    -> FROM login_dur_in_sec; 
```

```
CREATE TABLE login_dur AS 
    -> SELECT h.user_id, h.hour_part, m.minute_part, s.second_part
    -> FROM hour_section AS h INNER JOIN minute_section AS m
    -> ON h.user_id = m.user_id
    -> INNER JOIN second_section AS s
    -> ON m.user_id = s.user_id; 
```

```
CREATE TABLE login_dur_trunc AS 
    -> SELECT user_id,
    -> CONCAT (hour_part, ":", minute_part, ":", second_part) AS login_duration
    -> FROM login_dur; 
```

```
SELECT * FROM login_dur_trunc;
+---------+----------------+
| user_id | login_duration |
+---------+----------------+
|       1 | 8:14:46        |
|       2 | 4:44:33        |
|       3 | 18:4:9         |
|       4 | 13:3:51        |
|       5 | 0:24:9         |
+---------+----------------+ 
```

在这里，@Adi 给出的答案并不总是像@CaiusJard 所指出的那样有效。

# python - 使用 Python 和函数进行设计

> ID：10907752
> 
> 赞同：1
> 
> 时间：2012-06-06T03:18:43.240
> 
> 标签：python, printing, function

感谢 stackoverflow 上的另一位成员，今天晚上早些时候我看到了这种很酷的技术。我是 python 的初学者，所以我的大部分学习都是通过阅读我拥有的这本书并编辑代码来了解它是如何工作的。

我正在尝试为菜单底部设计这个：

```
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X  TASK1  X  TASK2  X  TASK3  X  TASK4  X  TASK5  X
X   [ ]   X   [ ]   X   [ ]   X   [ ]   X   [ ]   X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

所以你基本上看到了这个：

```
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X                                                 X
X          TASK MANAGER - TASK SELECTION          X
X                                                 X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X                                                 X
X                 READY TO START?                 X
X              ---------------------              X
X                PRESS THE 'ENTER'                X
X                  KEY TO BEGIN!                  X
X              ---------------------              X
X                                                 X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X  TASK1  X  TASK2  X  TASK3  X  TASK4  X  TASK5  X
X   [ ]   X   [ ]   X   [ ]   X   [ ]   X   [ ]   X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

底部的目的是，如果您选择说任务 2，那么它只会为选择的任何一个打印一个函数......所以它会是（如果选择了任务 2）：

```
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X                                                 X
X          TASK MANAGER - TASK SELECTION          X
X                                                 X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X                                                 X
X                 READY TO START?                 X
X              ---------------------              X
X                PRESS THE 'ENTER'                X
X                  KEY TO BEGIN!                  X
X              ---------------------              X
X                                                 X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X  TASK1  X  TASK2  X  TASK3  X  TASK4  X  TASK5  X
X   [ ]   X   [X]   X   [ ]   X   [ ]   X   [ ]   X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

这是当前代码：

```
def printLine (text = ''):
    print('X {: ^47} X'.format(text))

def printSelTitle (text = '', title = None):
    print('X{: ^9}'.format(text)),

def printSelCheck (text = '', title = None):
    print('X   [ ]   X'.format(text)),

def printBorder (title = None):
    print('X' * 51)

def printBox (*lines, title = None, showBottomBorder = False):
    printBorder(title)
    printLine()
    for line in lines:
        printLine(line)
    printLine()
    if showBottomBorder:
        printBorder()

printBox('TASK MANAGER - TASK SELECTION')
printBox('READY TO START?', '-' * 21, "PRESS THE 'ENTER'",\
         'KEY TO BEGIN!', '-' * 21, showBottomBorder = True)
printSelTitle('TASK1') and printSelTitle('TASK2')
printSelCheck()
printBorder()

printSelTitle('TASK3')
printSelTitle('TASK4')
printSelTitle('TASK5') 
```

这是当前代码的样子：

```
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X                                                 X
X          TASK MANAGER - TASK SELECTION          X
X                                                 X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X                                                 X
X                 READY TO START?                 X
X              ---------------------              X
X                PRESS THE 'ENTER'                X
X                  KEY TO BEGIN!                  X
X              ---------------------              X
X                                                 X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X  TASK1  
X   [ ]   X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X  TASK3  
X  TASK4  
X  TASK5 
```

有什么想法吗？提前感谢您的帮助。

最好的，

史蒂文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T03:27:01.607

如果您不想在 之后没有换行符`print`，请不要使用`print(aasd),`（这是元组构造），但是`print('123', end='')`

打印语法差异：Python 2.x：

```
print "1", # special syntax for print statement
print "2" 
```

普顿3：

```
print("1", end="") # actually returns None (print() is a function)
print("2") 
```

两种情况的结果：`12`

Python 3（交互式外壳）：

```
>>> a = print('123')
123
>>> repr(a)
'None'
>>> a = print('123'),
123 # newline presents
>>> repr(a)
'(None,)' # result is tuple constructed by comma 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:41:24.013

这是代码：

```
def printLine (text = ''):
    print('X {: ^47} X'.format(text))

def printSelTitle (text = '', title = None):
    print('X{: ^9}'.format(text), end = ""),

def printSelCheck (text = '', title = None):
    print('X   [ ]   '.format(text), end = "")

def printBorder (title = None):
    print('X' * 51)

def printBox (*lines, title = None, showBottomBorder = False):
    printBorder(title)
    printLine()
    for line in lines:
        printLine(line)
    printLine()
    if showBottomBorder:
        printBorder()

printBox('TASK MANAGER - TASK SELECTION')
printBox('READY TO START?', '-' * 21, "PRESS THE 'ENTER'",\
         'KEY TO BEGIN!', '-' * 21, showBottomBorder = True)
printSelTitle('TASK1'), printSelTitle('TASK2'),\
        printSelTitle('TASK3'), printSelTitle('TASK4'),\
        printSelTitle('TASK5'), print("X")
printSelCheck(), printSelCheck(), printSelCheck(),\
                 printSelCheck(), printSelCheck(), print("X")
printBorder() 
```

这是它的样子：

```
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X                                                 X
X          TASK MANAGER - TASK SELECTION          X
X                                                 X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X                                                 X
X                 READY TO START?                 X
X              ---------------------              X
X                PRESS THE 'ENTER'                X
X                  KEY TO BEGIN!                  X
X              ---------------------              X
X                                                 X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
X  TASK1  X  TASK2  X  TASK3  X  TASK4  X  TASK5  X
X   [ ]   X   [ ]   X   [ ]   X   [ ]   X   [ ]   X
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

仍在尝试布局我将如何在选择时制作“X”......但我会进一步研究它。

# text - 如何将“文本/纯文本”更改为 xml？

> ID：10907757
> 
> 赞同：0
> 
> 时间：2012-06-06T03:20:03.807
> 
> 标签：text, wso2

我的端点是地址端点。响应内容类型是“文本/纯文本”。回复内容为：

```
<message>
   <header>
      <TransactionID>1</TransactionID>
      <Timestamp>2012-06-04 10:45:35</Timestamp>
      <OpCode>AAA_Response</OpCode>
      <MsgType>RESP</MsgType>
      <ReturnCode>1007</ReturnCode>
      <ErrorMessage/>
   </header>
   <body/>
</message> 
```

但是在 wso2 中，响应变为：

```
<text xmlns="http://ws.apache.org/commons/ns/payload">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;message&gt;&lt;header&gt;&lt;TransactionID&gt;1&lt;/TransactionID&gt;&lt;Timestamp&gt;2012-06-04 10:45:35&lt;/Timestamp&gt;&lt;OpCode&gt;AAA_Response&lt;/OpCode&gt;&lt;MsgType&gt;RESP&lt;/MsgType&gt;&lt;ReturnCode&gt;1007&lt;/ReturnCode&gt;&lt;ErrorMessage&gt;&lt;/ErrorMessage&gt;&lt;/header&gt;&lt;body/&gt;&lt;/message&gt;
</text> 
```

我想我需要在axis2.xml 中编辑生成器和格式化程序。但是如何做到这一点？任何人都可以帮助我吗？此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:46:31.117

问题是您没有在axis2.xml 中设置适当的构建器和格式化程序。

为内容类型 text/plain 设置 org.apache.axis2.format.PlainTextBuilder

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:27:48.203

如果可能，您可以先尝试更改服务器端。

# android - Android OpenGL 多重采样/抗锯齿问题

> ID：10907758
> 
> 赞同：3
> 
> 时间：2012-06-06T03:20:06.260
> 
> 标签：android, opengl-es, antialiasing, multisampling

我正在开发一款适用于 Android 的应用程序，允许用户点击屏幕来绘制颜色。我已经让所有绘图代码在 OpenGL 下运行良好（在 Android 4.0.4、Galaxy Nexus 上进行测试，尽管我试图尽可能向后兼容；我的 SDK 以 API 14 为目标，但 minSDK 为 8 ）。

我遇到的问题是抗锯齿；我希望我的所有多边形和线条都经过抗锯齿处理，但它们出现锯齿状。我很肯定 Galaxy Nexus 支持抗锯齿（我在其他应用程序中看到过），所以我确定我做错了什么。

我已经在谷歌上下了一个多小时，通过几个 StackOverflow Q/As，我找到了一些答案：

```
gl.glEnable(GL10.GL_BLEND);
gl.glEnable(GL10.GL_ALPHA_BITS);
gl.glEnable(GL10.GL_MULTISAMPLE);
gl.glEnable(GL10.GL_SMOOTH);
gl.glShadeModel(GL10.GL_SMOOTH);
gl.glHint(GL10.GL_POLYGON_SMOOTH_HINT, GL10.GL_NICEST);
gl.glHint(GL10.GL_POINT_SMOOTH_HINT, GL10.GL_NICEST); 
```

我以不同的顺序添加了部分或全部这些行，但没有任何效果。（这些是在 onSurfaceCreated 中添加的。）

```
gl.glEnable(GL10.GL_DITHER); 
```

我认为这个有点帮助......但这可能是我的想法在欺骗我。但是，即使在使用它时，仍然可以找到锯齿状的线条。（也在 onSurfaceCreated 中添加。）

```
gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA); 
```

这似乎是最常见的答案。但是这样做时，一切都被画成不可见的；也就是说，当从黑色背景开始时，一切都是黑色的，总是。（由于 LogCat 中的内存刷新消息，我知道它仍在绘制中。）我还结合上述所有其他方法尝试了此方法。（这也是在 onSurfaceCreated 中添加的。）

**回顾一下**：我在 Android 4+ 上使用 OpenGL，似乎没有多重采样方法有效；虽然大多数都没有效果，但使用 glBlendFunc 似乎完全破坏了渲染。

所以，我很困惑。我对任何建议都持开放态度……它们肯定会比拆开我的电脑更有帮助！

在此先感谢所有耐心阅读本文的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:02:10.350

如果您没有在 EGL 上下文中请求多重采样，则不能仅使用 GL 函数将其打开。在这里查看如何做到这一点：

*   [http://code.google.com/p/gdc2011-android-opengl/source/browse/trunk/src/com/example/gdc11/MultisampleConfigChooser.java](http://code.google.com/p/gdc2011-android-opengl/source/browse/trunk/src/com/example/gdc11/MultisampleConfigChooser.java)
*   [https://stackoverflow.com/a/7388176/675078](https://stackoverflow.com/a/7388176/675078)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T12:29:51.060

如果你不能用 c++ srry 编程，你可以 在 c++ (android ndk) 上启用多重采样。

1.  安装android-ndk（我的android ndk版本是r8b）
2.  打开 `android-ndk-r8b/samples/android-native-egl-example/jni/renderer.cpp`
3.  更改添加到包含`EGL/egl.h` `GLES/gl.h` `GLES2/gl2.h` `GLES2/gl2ext.h`文件
4.  在布尔`Renderer::initialize() function :`

改变

```
 const EGLint attribs to {
                EGL_RED_SIZE, 5,  
                EGL_GREEN_SIZE, 6,  
                EGL_BLUE_SIZE, 5,  
                EGL_DEPTH_SIZE, 16,  
                // Requires that setEGLContextClientVersion(2) is called on the view.
                EGL_RENDERABLE_TYPE, 4 /* EGL_OPENGL_ES2_BIT */,
                EGL_SAMPLE_BUFFERS, 1 /* true */,
                EGL_SAMPLES, 2,
                EGL_NONE  }; 
```

`EGL_SAMPLES`这个参数改变样本数很重要

# c++ - 访问存储在开始和结束指针之间的值

> ID：10907761
> 
> 赞同：-2
> 
> 时间：2012-06-06T03:20:22.683
> 
> 标签：c++, pointers

我在一大段代码中有下面提到的函数（在 C++ 中）：

```
void startup(const char *&      start,
    const char *&   stop); 
```

调用此函数后，我想访问字符值，即存储在“开始”和“停止”之间的字符串。

我尝试访问的方式是：

```
 char *var=(c.start);
  cout<<"\n Iterating over char pointer \n";
  while(var<=(c.stop))
  {
      cout<<*var;
      var++;
  }
  cout<<"\n"; 
```

但是，在尝试以这种方式访问​​它时，我收到了下面提到的错误：

```
 error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive] 
```

有人可以纠正错误...并帮助我访问字符值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:23:00.263

您需要做的就是替换该行：

```
char *var=(c.start); 
```

和：

```
const char *var=(c.start); 
```

请注意，这`const`是指指针指向的字符，而不是指针本身。所以像这样的表达式`var++`非常好，因为指针不是 const。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:23:52.433

您可以在分配语句中尝试这种转换：

```
char *pc = (char *)(c.start); 
```

# google-maps - Google Maps V3 setCenter 将位置移动到左上角

> ID：10907762
> 
> 赞同：4
> 
> 时间：2012-06-06T03:20:35.057
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3

我已经阅读[了这篇文章](https://stackoverflow.com/questions/2773263/google-maps-setcenter-problem)，但问题仍然存在。基本上，当我`setCenter`在 LatLng 上使用时，标记总是在地图的左上角，就在视线之外。

标记放置在正确的位置，但是当我使用其中一个`panTo`或`setCenter`标记总是隐藏在左上方，就在视线之外。

它在桌面上的 Safari 中运行良好，但问题出现在 iPhone 上。我正在使用 Javascript、jQuery、jQuery Mobile。

有解决办法吗？

```
<div id="map_canvas" style="height:280px;"></div>
googleMap.get('map').setCenter(latLng); 
```

## googleMap 定义为：

```
$('#map_canvas').gmap({ 'disableDefaultUI': true, 'callback': function (map) {
    googleMap = this; 
```

## 添加标记：

```
googleMap.addMarker({ 'position': new google.maps.LatLng(markers[t].latlng.$a, markers[t].latlng.ab), 'label': markers[t].label}, function (map, marker) { }) 
```

# java - 通过挂钩到 JVM 来跟踪 java 异常

> ID：10907763
> 
> 赞同：2
> 
> 时间：2012-06-06T03:20:38.910
> 
> 标签：java

Yourkit 有一个非常简洁的功能，基本上可以跟踪 JVM 中抛出的任何异常。我想知道他们是怎么做到的。具体来说，我希望能够检查日志文件并查看抛出了多少异常以及引发了哪些异常。显然，日志记录似乎可以在这里发挥作用，但我真的在寻找一种不需要开发人员任何工作的解决方案。

有没有办法通过 jmx 或使用自定义 javaagent 连接到 JVM？

谢谢！

# iphone - NSKeyedUnarchiver unarchiveObjectWithFile 导致崩溃

> ID：10907765
> 
> 赞同：1
> 
> 时间：2012-06-06T03:20:54.003
> 
> 标签：iphone

我尝试使用代码

```
-(bool)checIfWorksOnJailbreak;
{

    NSString *s = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Info.plist"];

    NSLog(@"%@",s);

    if([[NSFileManager defaultManager] fileExistsAtPath:s]) {

        NSDictionary *plistDictionary =  (NSDictionary*)[NSKeyedUnarchiver unarchiveObjectWithFile:s];

        NSString *valueString = [plistDictionary objectForKey:@"SigerIdentity"];
        if([valueString isEqualToString:@"Apple OS Application Signing"])
            return true;
        else
            return false; 
    }

    return false;

} 
```

它总是导致错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '*** -[NSKeyedUnarchiver initForReadingWithData:]: 
incomprehensible archive version (-1)' 
```

在线

```
NSDictionary *plistDictionary =  (NSDictionary*)[NSKeyedUnarchiver unarchiveObjectWithFile:s]; 
```

欢迎任何评论

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T03:24:26.753

`NSKeyedUnarchiver`(and `NSKeyedArchiver`) 不适用于编码和解码 plist。相反，它们用于序列化和反序列化实现`NSCoding`协议的对象。要将您的 plist 数据读入字典，您应该使用：

```
NSDictionary *plistDictionary = [NSDictionary dictionaryWithContentsOfFile:s]; 
```

# backbone.js - Backbone.Model`defaults`干扰`set`？

> ID：10907766
> 
> 赞同：0
> 
> 时间：2012-06-06T03:20:59.447
> 
> 标签：backbone.js

我注意到当我有如下代码时：http: **[//jsfiddle.net/MtULf/1/](http://jsfiddle.net/MtULf/1/)**

```
window.Todo = Backbone.Model.extend({
    defaults: {
        "title": ""  
    },
    validate: function() {
        if (this.get("title") === "")
            return "Title is missing!"            
    }
});

var todo = new Todo();
console.log("Expects blank: ", todo.get("title"));

todo.set({ title: "A valid title" });
console.log("Expects 'A valid title': ", todo.get("title"));

todo.set("title", "");
console.log("Expects blank: ", todo.get("title")); 
```

一切`set(...)`似乎都失败了：`todo.get("title")`总是返回空字符串

但是，如果我删除`defaults`，我会得到预期的输出：http: **[//jsfiddle.net/MtULf/2/](http://jsfiddle.net/MtULf/2/)**

```
window.Todo = Backbone.Model.extend({
    validate: function() {
        if (this.get("title") === "")
            return "Title is missing!"            
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:23:46.653

validate 没有获取模型，因为它是上下文，因此您需要使用函数属性，然后它按预期工作（除了 validate 防止标题设置为空白）

[http://jsfiddle.net/MtULf/3/](http://jsfiddle.net/MtULf/3/)

不，这不是真的，是吗.. validate 确实获取了模型作为它的上下文，但是 validate 在模型中设置值之前运行，因此当默认设置为“”时它总是失败，但没有默认成功，因为未定义！=== ""。

好的，我想我当时明白了。。

# java - 动态配置管理

> ID：10907767
> 
> 赞同：2
> 
> 时间：2012-06-06T03:21:06.697
> 
> 标签：java, linux, scala, configuration-management

我正在寻找一种工具或一组工具来管理我们的 scala 应用程序堆栈和其他应用程序的配置，例如 lighttpd。

我一直在考虑使用 Apache Zookeeper，但我还没有找到任何看起来像 lighttpd （可能还有其他）模块的东西。我也考虑过使用例如 Puppet，但它似乎没有太多的 Zookeeper 模块。

从本质上讲，我想要实现的是拥有一项服务来保持配置并且我可以动态重新配置，并且可以传播到所有服务，包括 JVM 内外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:18:18.257

老实说，选择一个[开源配置管理系统](http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software)。最近出现但未在 Wiki 上列出的一个有趣的选择是[ANSIBLE](http://ansible.github.com/)。

此外，您的问题可能是编排问题之一，在这种情况下，像 Chef's [Knife](http://wiki.opscode.com/display/chef/Knife)、[Capistrano](https://github.com/capistrano/capistrano/wiki)、[Fabric](http://docs.fabfile.org/en/1.4.2/index.html)或[MCollective](http://puppetlabs.com/mcollective/introduction/)这样的工具更合适。

当然，你甚至可能两者都想要。

最好的选择是用您熟悉的语言编写的。我不知道任何用 Scala 编写的东西，尽管[这篇博](http://kafecho.blogspot.com.br/2009/12/thought-exercise-scala-features-for.html)文很有趣。对于程序员来说，[Chef](http://wiki.opscode.com/display/chef/Home)具有很大的吸引力，并且可以很好地处理非常动态的配置。我知道有人使用它来按需创建/销毁 VM 实例，具体取决于应用程序负载——用 Puppet 试试，你会哭的。

我喜欢[Puppet 的](http://puppetlabs.com/)声明式配置风格，特别是它使您远离操作系统差异的事实。对 Puppet 来说，一个包就是一个包，无论你使用什么操作系统。

至于“动物园管理员模块”……您可能会在网上找到这些工具的好食谱/模块，但您最好准备好编写自己的。不要根据一个特定模块的存在来选择——根据你编写它们的舒适程度来选择。

# ruby-on-rails - 如何将特定事件从 Rails 记录到日志文件？

> ID：10907775
> 
> 赞同：3
> 
> 时间：2012-06-06T03:22:24.557
> 
> 标签：ruby-on-rails, ruby

## 要求

我想保留特定事件的审核日志，例如：

*   用户登录成功
*   用户无法登录（原因：密码错误、未确认等）
*   超级用户修改了其他用户的详细信息（他们所做的更改）
*   等等

该日志应包括以下详细信息：

*   执行操作的登录用户（基于控制器的`current_user`）
*   被修改的记录（如超级用户的其他用户记录）
*   该操作的请求 IP 地址

此日志还应该存储在文件系统上的文件中，而不是数据库表中，以便稍后可以由机器上的另一个服务摄取。

## 一些可能性

以下是我迄今为止考虑过的方法的简短列表：

### 活动记录::观察者

观察者提供了一种很好的分离方式来观察这些特定事件。
然后我可以让观察者附加到一个日志文件，但我不确定我能多么容易地获得这种调用的结果（例如登录失败或工作），我需要以某种方式调用控制器方法`current_user`查找登录用户并获取HTTP请求以获取IP地址。

### 审计 gem（如 audited、auditable、paper_trail 等）

这些 gem 可以方便地知道如何访问当前用户和 IP 地址的控制器，但它们都记录到数据库中的审计表中。`Auditable`特别好，因为它可以审核对象上的任何方法调用，而不仅仅是 AR 回调，但我可能需要修补它以写入文件而不是数据库.. 还是什么？

### ActiveSupport::通知

我仍然需要阅读此内容，但我相信它提供了一种在 Rails 中订阅低级别事件的低级别方式。对于这种情况，这可能太低级了，但我需要进一步调查。

### 日志4r

看起来这将是一个很好的日志文件，但我认为它没有任何方式来监视事件。这只是问题的一部分。

## 有什么建议吗？

是否有这样做的最佳实践方式？你能推荐任何从以前的经验中学到的宝石或教训吗？还有什么我应该考虑的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:57:22.337

感谢大家的回复。
Casper，我确实决定建立一些定制的东西。

无论如何，我明白您写入本地数据库的观点，但该项目的要求是转储日志文件，以便更精细的日志解析服务可以查询文件，甚至将它们与来自其他来源的信息结合起来。

为了从模型和控制器中获取日志，我最终制作了一个模块，我将在观察者和`ApplicationController`.

该模块看起来有点像这样：

```
module MyEventLogger
  mattr_accessor :logged_current_user
  mattr_accessor :logged_remote_ip

  def log_event(message)
    @@logger ||= Logger.new(Rails.root.join('log', 'audit.log'))
    @@logger.info "#{Time.now} | #{logged_current_user}@#{logged_remote_ip} | #{message}"
  end

  def logged_current_user
    @@logged_current_user || "SYSTEM"
  end

  def logged_remote_ip
    @@logged_remote_ip || "NO IP ADDRESS"
  end
end 
```

ApplicationController 将具有：

```
include MyEventLogger
before_filter :setup_logger

...

def setup_logger
  MyEventLogger.logged_current_user = current_user
  MyEventLogger.logged_ip_address = request.remote_ip
end 
```

观察者只需要`include MyEventLogger`访问该`log_event`方法以及当前用户和 IP 地址即可。例如：

```
class UserObserver < ActiveRecord::Observer
  include MyEventLogger

  def after_save(user)
    log_event "The User #{user} was saved by #{logged_current_user}"
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T05:42:37.673

一些想法：

审计宝石听起来最接近您想要的。如果您查看它们的源代码，它们并没有那么复杂，而且大多数似乎实际上都是围绕 Rails Observers 构建的。您可以轻松地使用他们的代码作为基础来创建您自己的专用版本。

例如，如果您查看 Audited 的代码，您会发现存储实际上非常简单`current_user`（如果您决定推出自己的实现）：

[https://github.com/collectiveidea/audited/blob/master/lib/audited/sweeper.rb](https://github.com/collectiveidea/audited/blob/master/lib/audited/sweeper.rb)

我认为在数据库中拥有审计数据不一定是坏事。有一天，当您需要从数千个先前的交易中追踪某个复杂问题时，您实际上可能会发现这很有用。您始终可以创建一个简单的 Rake 任务，以便在需要时将数据转储为日志文件格式。

但是我会说这`Log4r`非常好，我自己在几个项目中使用过它。但我没有审计类型的需求。仅用于调试和故障排除的基本日志记录。

如果您想要的话，您还可以考虑将您自己的 Observer 类型系统与 Log4r 驱动程序而不是 DB 驱动程序相结合。因为这听起来有点像您可能需要在 Observer 系统提供的之外触发日志事件。这意味着您将不得不实现对现有 gem 的扩展，或者使用 gem 作为基础并使用您自己的功能对其进行扩展。

无论如何 - 我仍然认为 DB 方法实际上是一个好处，并且能够在您的审计跟踪上运行查询有点酷。像这样的东西不会受到伤害（顺便说一句，Log4r 也支持自定义“输出驱动程序”，所以即使这样也可以用来登录数据库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T03:37:36.150

只是分享我的个人经验：

我创建了与您在此处提到的非常相似的东西。我在数据库中使用了一个表，将相关`post`请求捕获在 application_controller 中，并将信息传递给与我的日志表关联的模型。逻辑很简单，我拥有我想要的所有控制权。唯一的努力是选择/拒绝特定的交易，并重组所有有用的参数以很好地适应文本字段。

如果你决定走那条路，我很乐意分享更多细节。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T04:06:53.893

这样做的一种方法是，无论您想在何处运行已记录的操作，都在一个块中运行它

我真的建议看一下 Russ Olsen 的 Eloquent Ruby 第 18 章[http://books.google.com/books?id=-s2xL0pVsLUC&lpg=PA219&ots=l7I3oAK3M2&dq=eloquent%20ruby%20chapter%2018&pg=PA219#v=onepage&q&f=false](http://books.google.com/books?id=-s2xL0pVsLUC&lpg=PA219&ots=l7I3oAK3M2&dq=eloquent%20ruby%20chapter%2018&pg=PA219#v=onepage&q&f=false)和可能是 Gregory Brown 的 Ruby Best Practices 第 2 章中的“使用块” [http://majesticseaacreature.com/rbp-book/pdfs/rbp_1-0.pdf](http://majesticseacreature.com/rbp-book/pdfs/rbp_1-0.pdf)

例如

```
def with_logging(description)
 begin
    @logger.debug( "Starting #{description}" ) 
    yield # this is when the code in the block executes
    @logger.debug( "Completed #{description}" )
  rescue
    @logger.error( "#{description} failed!!") 
    raise
  end
end

with_logging('code example') { puts "just printing something" } 
```

另外：可能值得研究 graylog [http://graylog2.org/about/gelf](http://graylog2.org/about/gelf)之类的工具（并参见[http://arrrrcamp.be/videos/2011/lennart-koopmann---managing-the-logs-of -your-rails-applications/](http://arrrrcamp.be/videos/2011/lennart-koopmann---managing-the-logs-of-your-rails-applications/) ) 或这些帖子[http://openmymind.net/2012/4/4/You-Really-Should-Log-Client-Side-Error/](http://openmymind.net/2012/4/4/You-Really-Should-Log-Client-Side-Error/) (javascript), [https://github.com /TwP/记录](https://github.com/TwP/logging)，[http://amon.cx/](http://amon.cx/)

# php - GET 中的 GET

> ID：10907776
> 
> 赞同：2
> 
> 时间：2012-06-06T03:22:26.390
> 
> 标签：php, facebook, url, facebook-graph-api, get

我现在面临的问题是我正在获取一个 URL，如下所示：

```
www.example.com/example.php?url=www.google.com 
```

现在的问题是，如果我的网址中有一个 get ，如下所示：

```
www.example.com/example.php?url=www.google.com?id=1 
```

它实际上还没有引起问题，但是如果我的 URL 中有两个 GET 变量，它不知道“和”在哪里，第一个 get 或第二个，基本上只选择第一个，例如：

```
www.example.com/example.php?url=www.google.com?id=1&username=me 
```

有解决方法吗？我可以重新编码很多东西，让它成为一个变量，但这会涉及很多工作，我希望我能有一个解决方案！谢谢！

这是我的代码：

```
$facebookapi=new facebook(array('appId'=>'*******','secret'=>'********','fileUpload'=>'false'));
$url='http://******.com/questions/view.php?id=884&username=robot';
$facebookapi->api('/me/******app:answer?question=' . urlencode($url),'POST'); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T03:24:53.067

您需要[`urlencode`](http://php.net/manual/en/function.urlencode.php)对`url`参数进行编码。

```
$url = 'www.google.com?id=1';
echo 'www.example.com/example.php?url='.urlencode($url).'&username=me'; 
```

***编辑：*** 看到您发布的代码后，您似乎应该使用第三个参数作为参数。

```
$url='http://******.com/questions/view.php?id=884&username=robot';
$facebookapi->api('/me/******app:answer', 'POST', array('question' => $url)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:31:01.423

那么函数[urlencode](http://php.net/manual/en/function.urlencode.php)非常适合这个。

一旦 url 被编码，第一个 get 变量将从这个

`www.google.com?id=1&username=me`

对此

`www.google.com%3Fid%3D1&6username=me`

然后，您的网站将显示为 [www.example.com/example.php?url=www.google.com%3Fid%3D1%26username%3Dme]

一旦 PHP 接收到该变量，您就可以对其进行解码

`$url = urldecode($_GET['url']);`

注意：某些版本的 PHP 会自动执行此操作。

# validation - 验证自定义 tumblr 主题

> ID：10907780
> 
> 赞同：0
> 
> 时间：2012-06-06T03:22:59.250
> 
> 标签：validation, themes, tumblr

我正在使用自定义 tumblr 主题。当我使用 W3C 验证器对其进行验证时，我从 tumblr 插入到我的主题代码之外的博客中的代码中得到了一大堆错误。所以我对 101 进行了故障排除并安装了他们的默认主题并尝试对其进行验证。我使用了 Redux 主题。当我将它放入验证器时，我收到以下 3 个错误：

```
Line 2, Column 871: Stray doctype.

….0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

Error Line 3, Column 67: Stray end tag html.

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

Error Line 3, Column 67: Cannot recover after last error. Any further errors will be ignored.

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

所以我的问题是，验证有多重要？我要解决的问题是我的自定义主题非常缓慢。我认为加速它的第 1 步将是使用有效的标记。但这似乎不可能。（还从我无法控制的 FB G+ 和 TW 按钮代码中获取大量错误）。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:51:04.210

我认为尝试验证 Tumblr 主题的问题在于 Tumblr 识别并需要特定代码，HTML 验证器将被视为无效。尽管它在 Tumblr 中使用，但它在技术上并不像 html 那样正确。

博客文章的代码，例如

```
{block:Label} 
```

可能会被标记为无效，因为 HTML 验证器不知道它是正确结构化的 Tumblr 代码。验证器可能会说它在放置在特定上下文（例如“li”元素中）时是无效的，即使对于 Tumblr 来说这是它应该放置的位置。

尝试使用此验证器，因为您可以按类型对错误进行分组，这样您就可以查看是否存在使用 Tumblr 代码创建的错误以外的错误。 [http://validator.keegan.st/](http://validator.keegan.st/)

解决所有 html 错误，不用担心 tumblr 引起的错误。

# android - 在 Eclipse 的图形布局中删除 Android 状态栏

> ID：10907782
> 
> 赞同：10
> 
> 时间：2012-06-06T03:23:05.343
> 
> 标签：android

如何在 Eclipse 的图形布局中删除 android 模拟器的状态栏？我的应用程序设置为以全屏模式运行，但我在布局时遇到了困难，因为状态栏出现在 Eclipse 的图形布局中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-06T03:30:41.673

`Spinner`您可以将布局编辑器右上角的下拉列表中的主题（或者用 Android 术语说得更好： :)）更改为`*.NoTitleBar.Fullscreen`选项之一。

**编辑：**添加截图。

![Eclipse 布局编辑器中的 android 主题](../Images/7ee245eed815a087614cc40419bc07f2.png)

顺便说一句，如果您在创建带有或不带有标题栏/操作栏的布局时遇到困难，您可能需要重新考虑是否走在正确的道路上。如果您正在为特定（数量）设备开发，那么我什么都没说。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T05:15:35.647

您可以选择主题微调器并选择“Theme.NoTitleBar.Fullscreen”。

使用代码：-

requestWindowFeature(Window.FEATURE_NO_TITLE); getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);

上面写的代码放在oncreate方法中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T14:46:32.290

我有同样的问题。在调试过程中，我的图形布局在 Eclipse 上是完美的，但在我的物理设备上却不正确，因为 Eclipse 图形布局底部的状态栏。我解决了这个问题，修改了eclip内部布局的主题并选择了“SearchBar”，如下图所示。我希望能解决这个问题。

[查看 Eclipse 上的设置](http://i.stack.imgur.com/OHD2l.png)

# java - java.lang.StackOverflowError 导致我的应用出现问题

> ID：10907788
> 
> 赞同：1
> 
> 时间：2012-06-06T03:24:25.687
> 
> 标签：java, android, loops, stack-overflow

我的应用程序有问题，我无法弄清楚问题是什么。在 ICS 上该应用程序可以工作，但在任何 2.X 上它都有问题。我相信它与循环有关，但我仍然有点困惑。

开发人员控制台向我抛出此错误报告：

```
Exception class > java.lang.StackOverflowError
Source method > Matrix.setScale() 
```

这是导致问题的代码...

```
private void shiftLoop7()
{
    if (d7 != doy && d7 < 366)
    {
        d7 = d7 + 8;
        shiftLoop7();
    }
    else if(d7 == doy)
    {

        if (hour >= 0 && hour < 8)
        {
            shift.setText("C");
            shift.setTextAppearance(getApplicationContext(), R.style.CShift);

            shiftImage.setImageResource(R.drawable.c);
            timeTill.setText("till 7:45 AM");

            dayshift.setText("A Shift");
            day1.setBackgroundResource(R.color.A);
            day2.setBackgroundResource(R.color.A);
            day3.setBackgroundResource(R.color.A);
            day4.setBackgroundResource(R.color.A);

            nightshift.setText("C Shift");
            night1.setBackgroundResource(R.color.C);
            night2.setBackgroundResource(R.color.C);
            night3.setBackgroundResource(R.color.C);
            night4.setBackgroundResource(R.color.C);
        }
        else if (hour >= 8 && hour < 17)
        {
            shift.setText("A");
            shift.setTextAppearance(getApplicationContext(), R.style.AShift);

            shiftImage.setImageResource(R.drawable.a);
            timeTill.setText("till 4:45 PM");

            dayshift.setText("A Shift");
            day1.setBackgroundResource(R.color.A);
            day2.setBackgroundResource(R.color.A);
            day3.setBackgroundResource(R.color.A);
            day4.setBackgroundResource(R.color.A);

            nightshift.setText("C Shift");
            night1.setBackgroundResource(R.color.C);
            night2.setBackgroundResource(R.color.C);
            night3.setBackgroundResource(R.color.C);
            night4.setBackgroundResource(R.color.C);
        }
        else
        {
            shift.setText("C");
            shift.setTextAppearance(getApplicationContext(), R.style.CShift);

            shiftImage.setImageResource(R.drawable.c);
            timeTill.setText("till 7:45 AM");

            dayshift.setText("A Shift");
            day1.setBackgroundResource(R.color.A);
            day2.setBackgroundResource(R.color.A);
            day3.setBackgroundResource(R.color.A);
            day4.setBackgroundResource(R.color.A);

            nightshift.setText("C Shift");
            night1.setBackgroundResource(R.color.C);
            night2.setBackgroundResource(R.color.C);
            night3.setBackgroundResource(R.color.C);
            night4.setBackgroundResource(R.color.C);
        }
    }
    else
    {
        shiftLoop8();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:33:04.653

堆栈溢出的一个常见原因是大量的递归调用——要么是由于导致无限递归的错误，要么是由于代码结构具有非常深的递归。

在您的情况下，堆栈溢出可能是由于您的代码有可能进行相当大的递归调用深度。您能否将递归调用重构为只是 while 循环？例如，而不是：

```
if (d7 != doy && d7 < 366)
{
    d7 = d7 + 8;
    shiftLoop7();
} 
```

你能做到以下几点：

```
while (d7 != doy && d7 < 366)
{
    d7 = d7 + 8;
} 
```

# perl - perl 使用 lwp 或 www::mechanize 获取网站的 ip

> ID：10907801
> 
> 赞同：0
> 
> 时间：2012-06-06T03:27:09.190
> 
> 标签：perl, ip, web-crawler, www-mechanize, lwp

所以我正在研究一个爬虫，我想存储的一些关于我爬的网站的数据是它们的 IP 地址。我宁愿这样做而不必再次访问他们的服务器，那么在您已经请求网页之后，无论如何可以从 LWP 或 WWW::Mechanize 获取此信息？例如：

```
my $mech = WWW::Mechanize->new();
$mech->get($url);
$ip = $mech->url_ip; 
```

我查看了 LWP 和 WWW::Mechanize 的文档，似乎找不到任何东西，但是我之前错过了一些东西。那么有谁知道用这些模块之一来做到这一点的方法吗？或者甚至是另一个可以做到的类似模块？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:43:52.417

如果它只是您想要存储的任意 (quad-)A 记录，您也可以尝试这样的操作：

```
use strictures;
use Perl6::Take qw(gather take);
use Socket 1.96 qw(getaddrinfo getnameinfo AF_INET6 AF_INET SOCK_STREAM NI_NUMERICHOST NIx_NOSERV);
# require 1.96 or better for NIx_NOSERV, ships with Perl 5.14
⋮
my $host = $mech->url->host;
my @ip = gather {
    for my $family (AF_INET6, AF_INET) {
        my ($err, @addrinfo) = getaddrinfo($host, 'http', { family => $family, socktype => SOCK_STREAM });
        warn "Cannot getaddrinfo - $err" if $err;
        for my $ai (@addrinfo) {
            my ($err, $ipaddr) = getnameinfo($ai->{addr}, NI_NUMERICHOST, NIx_NOSERV);
            warn "Cannot getnameinfo - $err" if $err;
            take $ipaddr;
        }
    };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:32:42.243

使用[Net::DNS](http://search.cpan.org/~olaf/Net-DNS/lib/Net/DNS.pm)。这是一个简单的例子：

```
my $resolver = Net::DNS::Resolver->new();
my $response = $Resolver->send("example.com", "A");
my @rr = grep { $_->type eq "A" } $response->answer;
my $ip = $rr[0]->address; 
```

# mysql - MySQL 恢复性能

> ID：10907803
> 
> 赞同：1
> 
> 时间：2012-06-06T03:27:21.880
> 
> 标签：mysql

我的 MySQL 恢复速度似乎很慢，并且正在寻找一些调整建议（我是 PostgreSQL 和 SQL Server 的人）。

开发服务器有 48GB 的​​ RAM，8 个内核，运行 Centos 6.2 64 位和 MySQL 5.1.61（与生产 MySQL 相同），以及软件管理的 RAID-10 / XFS 中的 4 x 7200 RPM SAS 驱动器。唯一的 MySQL 客户端进程是还原。转储是使用生产服务器上所有数据库的普通 mysqldump 进行的。

我已经应用了[http://derwiki.tumblr.com/post/24490758395/loading-half-a-billion-rows-into-mysql](http://derwiki.tumblr.com/post/24490758395/loading-half-a-billion-rows-into-mysql)中的一些选项，包括将 FOREIGN_KEY_CHECKS 和 UNIQUE_CHECKS 设置为零。我在下面包含了 my.cnf。

使用 mytop 和 pv (pv backup.sql | mysql -u root -p) 监控恢复，INSERT INTO 语句似乎开始逐渐变慢。mytop 显示的 qps 从 3 开始，通过转储文件在 60% 时下降到 0。不确定在这种情况下 mytop 有多准确，因为 3 次插入（带值）似乎仍然很慢。htop 显示 MySQL 使用的 CPU 的 CPU 利用率 < 10%，并且使用了不到 8GB 的​​ 48GB RAM。

不同的数据库，但相似的恢复技术，在使用 PostgreSQL 的同一台服务器上运行速度大约快 5-10 倍。

想法？

```
[mysqld]
# my.cnf
socket=/var/lib/mysql/mysql.sock
user=mysql
symbolic-links=0
slow-query-log
long_query_time = 60
log-slow-admin-statements
slow_query_log_file = /var/log/mysql_slow.log
innodb_buffer_pool_size = 2G
max_allowed_packet = 1G
key_buffer_size = 1G
concurrent_insert = 1
innodb_flush_log_at_trx_commit = 2
bulk_insert_buffer_size = 1G
innodb_flush_method = O_DIRECT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:44:44.033

听起来您的 innodb 索引正在减慢您的速度。如果可以更改转储数据库的方式，则可以删除所有非主键索引加载数据然后重新添加它们。最好还是按主键排序要加载的数据。这可能问得太多了。

听起来您已经知道这些提示： [http ://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb-bulk-data-loading.html](http://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb-bulk-data-loading.html)

刷新到磁盘操作 ( `innodb_flush_log_at_trx_commit = 2`) 可能每秒发生多次。检查您的`innodb_log_file_size`*`innodb_log_files_in_group`是否足以避免过于频繁地写入磁盘。

（我假设您从设置中使用 Innodb）

# javascript - 是否可以通过 API 为特定页面添加 Facebook 评论以避免需要评论插件？

> ID：10907811
> 
> 赞同：1
> 
> 时间：2012-06-06T03:29:13.937
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-comments

假设我有一个页面[http://foo.com/bar](http://foo.com/bar)。是否可以使用 Graph API 让用户为该 url 添加评论以避免需要托管 Facebook 评论插件？

我有一个案例，我想让用户使用 Facebook 登录，但要创建自己的评论 UI。我知道我可以通过这样的电话阅读所有评论：

[https://graph.facebook.com/comments?id=http://imdb.com](https://graph.facebook.com/comments?id=http://imdb.com)

（假设我关心的链接是`http://imdb.com`）。

但是，我找不到记录的方式来允许我为给定特定 access_token 的用户写评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:15:30.097

不，这是不可能的。以前有一个参数`POST`到`/comments`端点的漏洞`messages`，但现在已经关闭。您*必须*使用评论插件来添加评论。

# bash - bash脚本从.txt中提取变量，尝试使用mount命令时不断给出语法错误

> ID：10907812
> 
> 赞同：0
> 
> 时间：2012-06-06T03:29:15.183
> 
> 标签：bash, sh

上周我一直试图让它工作，但无法弄清楚为什么这不起作用。我直接在终端中输入混合结果，但从 .sh 运行时不断收到语法错误消息。使用 Ubuntu 11.10

看起来 mount 命令的一部分被推到下一行，不允许它正确完成。我不知道为什么会发生这种情况，也不知道如何防止它进入第二行。

我在 mounts.txt 中有几行定义如下，从下面的 mount-drives.sh 中读取

我已经使用 sudo 调用它来运行它，所以它不应该是权限问题。

感谢您查看，如果需要其他信息，请告诉我。

mounts.txt

```
 mountname,//server/share$,username,password, 
```

mount-drives.sh ---原始，更新如下

```
 #!/bin/bash
    while read LINE;
    do 

    # split lines up using , to separate variables
    name=$(echo $LINE | cut -d ',' -f 1)
    path=$(echo $LINE | cut -d ',' -f 2)
    user=$(echo $LINE | cut -d ',' -f 3)
    pass=$(echo $LINE | cut -d ',' -f 4)

    echo $name
    echo $path
    echo $user
    echo $pass

    location="/mnt/test/$name/"

    if [ ! -d $location ]
    then
        mkdir $location
    fi

    otherstuff="-o rw,uid=1000,gid=1000,file_mode=0777,dir_mode=0777,username=$user,password=$pass"

    mount -t cifs $otherstuff $path $location

    done < "/path/to/mounts.txt"; 
```

mount-drives.sh ---更新

```
 #!/bin/bash

    while read LINE
    do
        name=$(echo $LINE | cut -d ',' -f 1)
        path=$(echo $LINE | cut -d ',' -f 2)
        user=$(echo $LINE | cut -d ',' -f 3)
        pass=$(echo $LINE | cut -d ',' -f 4)
        empty=$(echo $LINE | cut -d ',' -f 5)
        location="/mount/test/$name/"
        if [ ! -d $location ]
        then
            mkdir $location
        fi
        mounting="mount -t cifs $path $location -o username=$user,password=$pass,rw,uid=1000,gid=1000,file_mode=0777,dir_mode=0777"
        $mounting
        echo $mounting >> test.txt
     done < "/var/www/MediaCenter/mounts.txt" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T04:56:20.173

在黑暗中刺伤（阅读评论后）。"$pass" 正在选择换行符，因为 mounts.txt 是在 windows 中创建的并且具有 windows 行结尾。尝试将`echo $pass`行更改为：

```
echo ---${pass}--- 
```

看看它是否全部正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T20:54:48.727

这里有很多可以改进的地方。考虑以下——更紧凑、更正确——的方法：

```
while IFS=, read -u 3 -r name path user pass empty _; do
  mkdir -p "$location"
  cmd=( mount \
    -t cifs \
    -o "rw,uid=1000,gid=1000,file_mode=0777,dir_mode=0777,username=$user,password=$pass" \
    "$path" "$location" \
  )
  printf -v cmd_str '%q ' "${cmd[@]}" # generate a string corresponding with the command
  echo "$cmd_str" >>test.txt          # append that string to our output file
  "${cmd[@]}"                         # run the command in the array
done 3<mounts.txt 
```

与原始版本不同，即使您的路径或位置值包含空格，它也能正常工作。

# asp.net-mvc - MVC3 中的文件依赖缓存

> ID：10907813
> 
> 赞同：0
> 
> 时间：2012-06-06T03:29:18.487
> 
> 标签：asp.net-mvc

我正在尝试在 mvc3 中实现文件依赖缓存。由于我是 MVC 新手，所以我浏览了搜索过的 google，但没有得到任何帮助。

我们的任何人都可以帮助我吗？或者解决这个问题的方法是什么？

我尝试与我们在 asp.net 中所做的相同，但出现错误。

我试过的代码：

```
public ActionResult About()
    {
        Cache.Insert("DropDownData", "", new System.Web.Caching.CacheDependency(Server.MapPath("~/testxml.xml")));

        return View();
    } 
```

我得到的错误：

```
An object reference is required for the non-static field, method, or property 'System.Web.Caching.Cache.Insert(string, object, System.Web.Caching.CacheDependency) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:49:27.823

您的问题是您在 `Cache.Insert`没有引用缓存实例的情况下调用实例方法。默认情况下，ASP.NET MVC 不会在 Controller 中公开默认缓存。

## 为了从控制器访问它，您需要使用`HttpContext.Cache.Insert`

话虽如此，这种行为更适合在 ActionFilter 中进行本地化。查看以下内容以了解更多信息：[http ://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T06:49:13.593

您是否正确添加了参考？

尝试同样制作一个对象

```
CacheDependency CDep = new CacheDependency(fileName /*your file path*/, dt /*Set Start parameter to current date */); 
```

然后`insert`用作

```
cache.Insert("DropDownData", "", CDep); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T06:52:18.243

尝试

```
System.Web.HttpRuntime.Cache.Insert 
```

`System.Web.HttpRuntime.Cache`是您当前应用程序的缓存实例。

# javascript - 实用的 Javascript 挑战

> ID：10907818
> 
> 赞同：4
> 
> 时间：2012-06-06T03:30:23.873
> 
> 标签：javascript

所以我已经掌握了 Javascript 的基础知识，但现在我正在寻找能够挑战我完成一些基于 JS 的常见任务并提供示例的资源。这些例子至关重要，否则我只是在黑暗中拍摄。我意识到我可以查看实现 JS 的网站，但我没有足够的信心来解析完全实现的网站上的代码。我正在寻找更多的东西，比如独立计算器和简单的基于文本的游戏等。我知道 CodeAcademy 并完成了他们的挑战，但在这一点上，我发现他们的挑战过于引导和简单；我需要一些能更强烈地锻炼和加强我的编程问题解决能力的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:49:25.807

使用 Window Previews 使 Javascript 中的 Windows 7 UI 完整：p

# testing - 通过 SOAP API 插入 ApexTestQueueItem 记录时启用调试日志记录

> ID：10907819
> 
> 赞同：1
> 
> 时间：2012-06-06T03:30:24.047
> 
> 标签：testing, salesforce, apex-code

我通过合作伙伴 API 将几个[ApexTestQueueItem](http://www.salesforce.com/us/developer/docs/apexcode/Content/sforce_api_objects_apextestqueueitem.htm)记录插入到组织中，以将相应的 Apex 类排队以进行异步测试。我要填充的唯一字段是 ApexClassId。（根据[使用 API 运行测试的](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_testing_unit_tests_running.htm#APISectionTitle)步骤）

在测试运行并检索相应的[ApexTestResult](http://www.salesforce.com/us/developer/docs/apexcode/Content/sforce_api_objects_apextestresult.htm)记录后，ApexLogId 字段始终为空。

对于 ApexLogId 字段，帮助文档具有描述：

> 如果启用了调试日志记录，则指向此测试方法执行的 ApexLog；否则为空

如何为异步测试用例启用调试日志记录？

我过去曾将[DebuggingHeader](http://www.salesforce.com/us/developer/docs/apexcode/Content/sforce_api_header_debuggingheader.htm)与 runTests() 方法一起使用，但它似乎不适用于这种情况。

* * *

**更新：**

我发现如果我在*管理设置 > 监控 > 调试日志*下将拥有 Salesforce 会话的用户添加为受监控用户，ApexLogId 将被填充。我不确定如何通过合作伙伴 API 执行此操作，或者它是否是为异步测试用例启用日志记录的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:06:23.457

你做对了。这是获取日志的预期方式。

# java - 找不到符号 java / android

> ID：10907821
> 
> 赞同：0
> 
> 时间：2012-06-06T03:30:36.253
> 
> 标签：java, android

我想修改一个 callerid 应用程序，以便它打开一个浏览器窗口并调用一个特定的 URL。当调用进入下面的代码时，会转到一个 URL 并返回调用者信息。这很好用。我遇到的问题是我还想用预先格式化的 url 打开手机默认浏览器。类似[http://www.myurl.com/index.php?action=getCallerInformation&number=phoneNumber.toString](http://www.myurl.com/index.php?action=getCallerInformation&number=phoneNumber.toString) () 我拥有的代码是

```
package com.integralblue.callerid;

import java.text.MessageFormat;
import java.util.HashMap;
import java.util.Map;

import org.springframework.http.HttpStatus;
import org.springframework.web.client.HttpClientErrorException;
import org.springframework.web.client.RestTemplate;

import roboguice.inject.InjectResource;
import android.content.SharedPreferences;
import android.telephony.TelephonyManager;
import android.text.TextUtils;
import com.google.inject.Inject;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;

public class HttpCallerIDLookup implements CallerIDLookup {
    @Inject SharedPreferences sharedPreferences;
    @InjectResource(R.string.default_lookup_url) String defaultLookupUrl;
    @Inject RestTemplate restTemplate;

    @Inject TelephonyManager telephonyManager;

    public CallerIDResult lookup(final CharSequence phoneNumber) throws NoResultException {
        //use the network's country if it's available (as I figure that's probably the best? I'm just guessing)
        //if the network's country isn't available, using the SIM's
        //I have no idea how or if this works on CDMA networks
        //(Android documentation warns that these function may not work as expected with CDMA)
        final String agentCountry = TextUtils.isEmpty(telephonyManager.getNetworkCountryIso())?telephonyManager.getNetworkCountryIso():telephonyManager.getSimCountryIso();

        final String beforeSubstitutionLookupUrl = sharedPreferences.getString("lookup_url", defaultLookupUrl);
        final String url;

            final Intent intent = new Intent(Intent.ACTION_VIEW).setData(Uri.parse("http://www.myurl.com/index.php?action=getCallerInformation&number=phoneNumber.toString()"));
            startActivity(intent);

        if(beforeSubstitutionLookupUrl.contains("{0}")){
            // ensure backwards compatibility. The URL used to use {0} and {1}
            url = MessageFormat.format(beforeSubstitutionLookupUrl, "{number}", "{agentCountry}");
        }else{
            url = beforeSubstitutionLookupUrl;
        }
        final Map<String, String> urlVariables = new HashMap<String, String>();
        urlVariables.put("number", phoneNumber.toString());
        urlVariables.put("agentCountry", agentCountry);
        try{
            return restTemplate.getForObject(url, CallerIDResult.class, urlVariables);
        }catch(HttpClientErrorException e){
            if(HttpStatus.NOT_FOUND.equals(e.getStatusCode())){
                throw new NoResultException();
            }else{
                throw new RuntimeException(e);
            }
        }catch(Exception e){
            throw new RuntimeException(e);
        }
    }

} 
```

当我编译它抱怨 startActivity(intent); 找不到标志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:41:33.267

我现在已经阅读了有关[roboguice](http://code.google.com/p/roboguice/)的信息，因此您似乎需要：

```
@Inject Activity thisActivity; 
```

将上述内容添加到您的声明中，然后使用以下命令调用意图：

```
thisActivity.startActivity(intent); 
```

# python - 而不是模型，在 GtkTreeView 中获取 cellrenderer 的值

> ID：10907828
> 
> 赞同：0
> 
> 时间：2012-06-06T03:31:23.493
> 
> 标签：python, pygtk, gtktreeview, cellrenderer

对于将数据设置为树视图，我使用`set_cell_data_func`at 某些列。
像这样的来源：

```
myRenderer = gtk.CellRendererText()
column = gtk.TreeViewColumn("col1", myRenderer, text=columnId)
column.set_cell_data_func(myRenderer, func1)

def func1(self, column, cell, model, iter):
    cell_name = model.get_value(iter, 0)
    if cell_name in category_dict:
        cell.set_property('text', category_dict[cell_name])
    else:
        cell.set_property('text', "")
    return 
```

因此，我的 tree_view_model 没有树视图中显示的数据。
如何找回set_cell_data_func中设置的数据，
你有吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T00:38:28.003

利用`cell.get_property ("text")`

# java - 尝试写入对象时出现 NotSerializableException

> ID：10907838
> 
> 赞同：2
> 
> 时间：2012-06-06T03:33:18.810
> 
> 标签：java, serialization

尝试序列化并将`Lot`对象发送到套接字。得到错误：

```
java.io.NotSerializableException: com.server.ClientServiceThread 
```

为什么？

```
public class ClientServiceThread extends Thread  {... // form here called sendObj ...}

public class FlattenLot {
public void sendObj(){
        try {
            out = new ObjectOutputStream(oStream);
            out.writeObject(lot); // error
            out.flush();
            out.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    } 
```

**批次类：**

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import java.util.Date;
import java.util.Calendar;

public class Lot implements Serializable{
private static final long serialVersionUID = 1L;
    public ArrayList<ClientServiceThread> clientBidsLog = new ArrayList<ClientServiceThread>();
    public ArrayList<Integer> bidLog = new ArrayList<Integer>();

    private List<Integer> bids = new ArrayList<Integer>();
    private List<ClientServiceThread> clients = new ArrayList<ClientServiceThread>();

    private  String NAME;
    private  int INITIAL_PRICE;

    private int MAX_BID = 0;
    public volatile boolean notAvailable = false;
Lot(String name, int initPrice){
        NAME = name;
        INITIAL_PRICE = initPrice;
    }
public synchronized String getName(){return NAME;}
public synchronized int getInitPrice(){return INITIAL_PRICE;}
public synchronized void subscribe(ClientServiceThread t){
        clients.add(t);
      }
public synchronized void unsubscribe(ClientServiceThread t){
        clients.remove(t);
      }
public  synchronized boolean makeBid(ClientServiceThread t,int i){
          if(i > INITIAL_PRICE && i > MAX_BID){
                clientBidsLog.add(t);
                bidLog.add(i);
                bids.add(i);
                MAX_BID = i;
                t.LAST_BID = i;
                notifyAllSubscribers("New bid: "+this.getMaxBid()+" made by "+this.clientBidsLog.get(this.clientBidsLog.size()-1).CLIENT_NAME);
                return true;
          }else{
                return false;
          }

          }
public synchronized void notifyAllSubscribers(String msg){
        for (ClientServiceThread client : clients){
              client.lotUpdated(this, msg);
            }
    }
public synchronized int getMaxBid(){return MAX_BID;}

    private Date time;

    public Lot() {
        time = Calendar.getInstance().getTime();
    }

    public Date getTime() {
        return time;
    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:41:09.440

该错误是由尝试序列化 a 引起的`ClientServiceThread`，它是不可序列化的。不知何故，其中一个是`Lot`. 如果`Lot`未使用`ClientServiceThread`字段（或包含 a 的字段`ClientServiceThread`）声明，则另一种可能性是`Lot`确实具有此类字段的类的非静态内部类。然后，外部类实例将是 的（隐藏）成员`Lot`。

解决方案是要么使`ClientServiceThread`序列化（不太可能，从它的名称），要么通过标记相关字段（或从类`transient`中删除它们）从序列化中消除它。`Lot`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T03:41:30.560

`Lot`包含

```
public ArrayList<ClientServiceThread> clientBidsLog 
private List<ClientServiceThread> clients 
```

如果您希望此字段被序列化，请`ClientServiceThread` `serializable`标记

如果您不希望它被序列化，只需将其标记`transient`为

```
public transient ArrayList<ClientServiceThread> clientBidsLog 
private transient List<ClientServiceThread> clients 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T04:03:22.660

一些答案表明您可以将可`ClientServiceThread`序列化声明为可能的解决方案。

警告 - 这可能行不通！

是的，你可以声明一个`Thread`实现的子类`Serializable`，但是Java序列化机制不能序列化一个活动线程的堆栈。事实上，我什至认为它不会成功序列化非活动线程的状态（例如线程的`ThreadGroup`引用），因此您可能会遇到更多异常。

我认为您唯一的选择是通过将这些集合声明为`transient`.

# optimization - 返回查询结果和单个函数中的总行数

> ID：10907840
> 
> 赞同：1
> 
> 时间：2012-06-05T20:53:45.223
> 
> 标签：optimization, codeigniter, count

如果有其他选择或者是唯一的方法，这个问题可能集中在以最佳方式工作：

使用 Codeigniter ... 我有列表记录的典型 2 功能并显示记录总数（使用页面作为替代）。问题是它们相当大。我的模型中的示例 2 函数：

**计算行数：**

```
function get_all_count()
    {
        $this->db->select('u.id_user');
        $this->db->from('user u');
        if($this->session->userdata('detail') != '1')
        {
            $this->db->join('management m', 'm.id_user = u.id_user', 'inner');
            $this->db->where('id_detail', $this->session->userdata('detail'));
            if($this->session->userdata('management') === '1')
            {
                $this->db->or_where('detail', 1);
            }
            else
            {
                $this->db->where("id_profile IN (
                                SELECT
                                e2.id_profile
                                FROM profile e, profile e2, profile_path p, profile_path p2
                                WHERE e.id_profile = " . $this->session->userdata('profile') . "
                                AND p2.id_profile = e.id_profile
                                AND p.path LIKE(CONCAT(p2.path,'%'))
                                AND e2.id_profile = p.id_profile
                                )", NULL, FALSE);

                $this->db->where('MD5(u.id_user) <>', $this->session->userdata('id_user'));
            }
        }       
        $this->db->where('u.id_user <>', 1);
        $this->db->where('flag <>', 3);
        $query = $this->db->get();
        return $query->num_rows();  
    } 
```

**每页结果**

```
function get_all($limit, $offset, $sort = '')
    {
        $this->db->select('u.id_user, user, email, flag');
        $this->db->from('user u');
        if($this->session->userdata('detail') != '1')
        {
            $this->db->join('management m', 'm.id_user = u.id_user', 'inner');
            $this->db->where('id_detail', $this->session->userdata('detail'));
            if($this->session->userdata('management') === '1')
            {
                $this->db->or_where('detail', 1);
            }
            else
            {
                $this->db->where("id_profile IN (
                                SELECT
                                e2.id_profile
                                FROM profile e, profile e2, profile_path p, profile_path p2
                                WHERE e.id_profile = " . $this->session->userdata('profile') . "
                                AND p2.id_profile = e.id_profile
                                AND p.path LIKE(CONCAT(p2.path,'%'))
                                AND e2.id_profile = p.id_profile
                                )", NULL, FALSE);

                $this->db->where('MD5(u.id_user) <>', $this->session->userdata('id_user'));
            }
        }
        $this->db->where('u.id_user <>', 1);
        $this->db->where('flag <>', 3);
        if($sort) $this->db->order_by($sort);
        $this->db->limit($limit, $offset);
        $query = $this->db->get();
        return $query->result();    
    } 
```

你看，我重复了大部分的功能，不同的只是字段数和管理页数。

我想知道是否有任何替代方法可以在单个函数中获得与查询一样多的结果。我看过很多教程，都创建了 2 个函数：一个用于计数，另一个用于显示结果……会有更优化的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:41:23.293

您必须`SQL_CALC_FOUND_ROWS`在查询中使用，如下所示：

```
SELECT SQL_CALC_FOUND_ROWS first_name, age FROM table 
```

要返回结果，您可以简单地创建一个新数组：

```
$result['total'] = $this->db->query("SELECT FOUND_ROWS() as total")->row_array();
$result['result_array'] = $query->result();
return $result; 
```

# mongodb - 带有数组的 mongo $ne 查询未按预期工作

> ID：10907843
> 
> 赞同：4
> 
> 时间：2012-06-06T03:34:43.280
> 
> 标签：mongodb

我正在尝试使用插入的数据运行以下查询，如下所示。无论出于何种原因，价值为 0 的 $ne 似乎都不起作用。我使用 v2.0.4 在 linux 和 mac 上都试过这个。还使用 mongo shell 运行这些。

有人有什么想法吗？这是一个错误还是我误解了什么？

```
db.associated.insert({
    "diskinfo" : {
            "physical" : [
                    {"merror_count" : "Count: 0"},
                    {"merror_count" : "Count: 0"},
                    {"merror_count" : "Count: 0"},
                    {"merror_count" : "Count: 509"}
            ]
    }})

db.associated.insert({
    "diskinfo" : {
            "physical" : [
                    {"merror_count" : "Count: 0"},
                    {"merror_count" : "Count: 5"},
                    {"merror_count" : "Count: 0"}
            ]
    }})

db.associated.insert({
    "diskinfo" : {
            "physical" : [
                    {"merror_count" : "Count: 0"},
                    {"merror_count" : "Count: 0"},
                    {"merror_count" : "Count: 0"}
            ]
    }}) 
```

在 mongo shell 上运行这些查询。并在评论中得到结果

```
db.associated.find( { "diskinfo.physical.merror_count" : { $ne : 'Count: 0'}}).count()
// 结果：0，预期：2
db.associated.find( { "diskinfo.physical.merror_count" : { $ne : 'Count: 509'}}).count()
// 结果：2，预期：2
db.associated.find( { "diskinfo.physical.merror_count" : { $ne : 'Count: 5'}}).count()
// 结果：2，预期：2

```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-04-07T18:18:05.120

虽然这是一个老问题，但我认为仍然有一些关于 $ne 与数组的语义的额外解释。

1.  众所周知，mongo 的行为具有以下形式的查询

    db.collection.find({a:v})

当 a 是一个数组时：它返回所有文档，使得（至少）数组键中的一个元素是 v。在示例中：

```
db.associated.find({"diskinfo.physical.merror_count" : "Count: 0"}).count() 
```

返回 3，因为数组“diskinfo.physical.merror_count”在集合的三个文档中包含一个值“Count: 0”。

2.  那么，期望

    db.collection.find({a:{$ne:v}})

    将返回文档，使得 a 包含与 v 不同的内容。但是，这不是 Mongo 中的行为。相反，使用 $ne 表示**仅选择数组 a 不包含 v 的那些文档**。

这种语义在开始时可能看起来很奇怪，但如果我们以这种方式考虑表达式是有道理的：

```
 db.collection.find({a:v}).count() + db.collection.find({a:{$ne:v}}).count() 
```

返回集合中元素的总数。因此，在示例中，有意义的是

```
db.associated.find({"diskinfo.physical.merror_count" : {$ne: "Count: 0"}}).count() 
```

返回 0，因为数组“diskinfo.physical.merror_count”在集合的 3 个文档中包含至少一次出现的“Count: 0”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T05:18:52.380

这些结果是正确的。

您的期望可能基于嵌入数组中与您的谓词匹配的元素数量。但是，您将获得满足查询的文档数量。

在第一种情况下，您查询所有 diskinfo.physical.merror_count 不等于“计数：0”的文档。每个文档都有 diskinfo.physical.merror_count 'Count: 0' 所以你会得到 0。

这样看，您的集合中的每个文档都有一个 diskinfo.physical.merror_count 值，它不是“计数：0”。如果你用平等而不是不平等进行查询，你会得到所有三个。

您是否要查找所有*只有*“计数：0”条目的文档？

似乎没有一种直接的方法可以做到这一点，但是一个可以让你做到这一点的查询是：

`db.associated.find( { "diskinfo.physical.merror_count" : { $gt : 'Count: 0'}}).count()`

如果计数实际上是整数，至少这将是解决方案 - 它恰好也适用于字符串，因为“1”>“0”等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T11:39:25.180

另一种解决方案，使用[`$elemMatch`](https://docs.mongodb.org/manual/reference/operator/query/elemMatch/)：

```
find( { "diskinfo.physical" : { $elemMatch: { merror_count: { $ne: 'Count: 0' } } ) 
```

这*将*匹配一个数组，其中只有一项是`$ne`. 另一个优点是您可以在匹配中添加更多运算符，以执行复杂的操作，例如：

```
find ({
  'partners.id': 'C30016',
  'partners': { $elemMatch: {
     id: { $ne: 'C30016' },
     type: 'shipper'
   }
  } 
}) 
```

（查找帐户“C30016”中所有作为托运人的合作伙伴）。

# iphone - 如何在复制时完全删除 CouchDB 文档

> ID：10907846
> 
> 赞同：0
> 
> 时间：2012-06-06T03:34:53.363
> 
> 标签：iphone, couchdb

我的应用程序正在使用 TouchDB，并且正在执行大量 REST 请求以提取已删除的文档/修订。是否可以基本上告诉 Couch，“嘿，删除它们，忘记它们的过去”？我知道 _changes 会显示已删除的内容，但如果它只是删除，我会喜欢它，并且没有问任何其他内容……为了 iPhone 电池寿命和 3G 连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:41:24.170

有 'compact' api，它从 couchDB 中删除所有已删除的文档。您有时可以启动它。但是标准的 couchDB 复制不会发送所有修订，而只会发送修订历史记录（没有数据）和最后一个修订。检查您的复制算法是否与[此](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API#Posting_Existing_Revisions)API兼容

# regex - 使用正则表达式从过程脚本文本中提取字符串？

> ID：10907847
> 
> 赞同：0
> 
> 时间：2012-06-06T03:35:12.920
> 
> 标签：regex

在下面的这段代码中，我想用正则表达式返回这个字符串：' `DataSource=xxxtransxxx;Initial Catalog=Sales`'

`Sales`可以或不能有 a`prefix`并且在上面的字符串中的项目之间可以或不可以有空格。我在下面的代码中尝试了正则表达式，但它不起作用。任何建议表示赞赏，谢谢！

```
var thestring = @"'SELECT CONVERT(VARCHAR(MAX), [Measures].[EmployeeID ParameterCaption]) AS [EmployeeID]
                            ,CONVERT(VARCHAR(50),  [Measures].[Sales Rep Name ParameterCaption]) AS [EmployeeName]
                            ,CONVERT(VARCHAR(50),  [Measures].[Manager EmployeeID ParameterCaption]) AS   [ManagerEmployeeID]
                            ,CONVERT(MONEY, [MEASURES].[PrevFYYTD])AS  PrevFYYTD
                            ,CONVERT(MONEY, [MEASURES].[CurrentFYYTD] ) AS CurrentFYYTD 
                            ,CONVERT(VARCHAR(50),[MEASURES].[PCTGrowth] )+''%'' AS [PCTGrowth]
                            ,CONVERT(VARCHAR, [MEASURES].[DollarGrowth] ) AS DollarGrowth 
                            ,CONVERT(VARCHAR, [MEASURES].[HasParent] )  AS HasParent
                            ,CONVERT(VARCHAR, [MEASURES].[HasChild] ) AS HasChild 
                       FROM OPENROWSET(''MSOLAP'',''DataSource=xxxtransxxx;Initial Catalog=Sales''  , SET @MDX =     ''' WITH;";

        Regex rgx = new Regex(@"'\s*DataSource\s*=\s.*trans*(.*Sales) *'", RegexOptions.IgnoreCase);
        string result = rgx.Match(thestring).Groups[0].Value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:30:43.933

**你可以使用**

```
\s*DataSource\s*=[^';]+?;\s*Initial *Catalog\s*=[^;']+$ 
```

**代码**

```
string resultString = null;
try {
    resultString = Regex.Match(subjectString, @"\bDataSource\s*=[^';]+?;\s*Initial *Catalog\s*=[^;']+", RegexOptions.IgnoreCase | RegexOptions.Multiline).Value;
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

**解释**

```
@"
(?i)          # Match the remainder of the regex with the options: case insensitive (i)
\b            # Assert position at a word boundary
DataSource    # Match the characters “DataSource” literally
\s            # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   *             # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
=             # Match the character “=” literally
[^';]         # Match a single character NOT present in the list “';”
   +?            # Between one and unlimited times, as few times as possible, expanding as needed (lazy)
;             # Match the character “;” literally
\s            # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   *             # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
Initial       # Match the characters “Initial” literally
\             # Match the character “ ” literally
   *             # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
Catalog       # Match the characters “Catalog” literally
\s            # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   *             # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
=             # Match the character “=” literally
[^;']         # Match a single character NOT present in the list “;'”
   +             # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
" 
```

# asp.net-mvc - Neo4j 返回具有最少跳数的不同节点

> ID：10907848
> 
> 赞同：0
> 
> 时间：2012-06-06T03:35:24.287
> 
> 标签：asp.net-mvc, graph, neo4j, cypher, neo4jclient

我有以下数据：

```
A --> B
B --> C 
```

考虑这个查询：

```
START n = node(A, B)
MATCH p = n-[*..2]-(x)
RETURN n.Name, x.Name, length(p) 
```

从 2 个输入节点开始，遍历不超过 2 跳的其他节点。

返回以下内容：

```
==> +------------------------------------------------+
==> | n.Name       | x.Name              | length(p) |
==> +------------------------------------------------+
==> | "A"          | "C"                 | 2         |
==> | "B"          | "C"                 | 1         | 
```

背景故事：在我的应用程序中，您可以搜索兴趣（一次多个）。每个兴趣都可以有相关的兴趣。有时输入的兴趣共享共同的兴趣，从而导致重复的兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:16:04.580

看起来简单地调用`MIN`就是我想要的：

```
RETURN x.Name, min(length(p)) 
```

所以它将按 x.Name 分组并采用最小的跃点列。

[http://docs.neo4j.org/chunked/stable/query-aggregation.html](http://docs.neo4j.org/chunked/stable/query-aggregation.html)

> 可以对所有匹配的子图进行聚合，也可以通过引入键值进一步划分。这些是非聚合表达式，用于对进入聚合函数的值进行分组。

# ios - UIPasteboard 安全性

> ID：10907849
> 
> 赞同：0
> 
> 时间：2012-06-06T03:35:44.940
> 
> 标签：ios, security, data-storage, uipasteboard

我需要存储打开应用程序时始终需要读取的应用程序信息。但我不希望用户复制/转储/或编辑它。所以问题是：“UIPasteboard 可以解决这个问题吗？” 是安全吗？如果没有，还有什么适合使用的。

非常感谢你。

编辑：是否有其他解决方案可以解决“删除并重新安装应用程序”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:42:39.767

UIPasteboard 可以随时被覆盖，我认为它不安全。

您可能需要考虑对数据进行加密和序列化。然后当你需要访问它时，解密它并读入内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:52:49.910

对于您的问题，使用粘贴板似乎不是正确的方向。您应该更有可能与服务器通信并使用`identifierForVendor`UIDevice 中的方法。

但是，如果您确定需要粘贴板，请查看命名粘贴板的概念。在您的上下文中，以下方法似乎是合适的： + (UIPasteboard *)pasteboardWithUniqueName // 具有唯一名称的应用程序粘贴板对象。

请注意，默认情况下，这种粘贴板仅在应用打开之前存在。`persistent`如果要更改此行为，请查看该属性。

也许（未经测试），即使您删除/重新安装应用程序，系统也会保留它。

# ruby-on-rails - sqlite3 和 rails 服务器加载错误

> ID：10907850
> 
> 赞同：0
> 
> 时间：2012-06-06T03:35:46.163
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sqlite

我在 Windows 中使用 ROR，我下载了 RailsInstaller，一切正常，直到我调用 rails server

页面加载错误“无法加载此类文件--sqlite3”

我想我缺少 sqlite3 dll，但如果我下载了一个，我应该把它放在当前安装的 Rails 文件夹中的哪里？太感谢了。

[**更新**]感谢您的阅读和您的关注，我已经按照您告诉我的所有方式修复了它，但我仍然遇到 LoadError “无法加载此类文件 - sqlite3”的相同问题。我不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:56:15.207

`sqlite3-ruby`（和`sqlite3`）gem 默认使用 RailsInstaller 安装，您可以`gem list sqlite3`从命令提示符验证

从 sqlite3 1.3.4 开始，Windows 上的二进制 gem 不依赖于外部`sqlite3.dll`，因此不需要额外下载和复制任何东西。

现在，您遇到的错误可能与您的 中缺少该宝石有关`Gemfile`，这很可能需要您添加：

```
gem "sqlite3", "~> 1.3.6" 
```

到上面提到的`Gemfile`，然后`bundle install`在你的应用程序目录的根目录下执行。

您还可以检查是否从交互式 Ruby 控制台 (IRB) 正确安装了 sqlite3 gem：

```
require "rubygems"
require "sqlite3"
puts SQLite3::VERSION 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:39:43.073

你不会把它放在你的 rails 目录中。您将把它`/WINDOWS/system32`放在您的 PATH 环境变量中或其他地方。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T03:48:21.693

从 SQLite 网站下载 SQLite3 >=3.5.4 的预编译版本，解压缩并将单个 sqlite3.exe 复制到我的 ruby​​/bin 目录。

现在已经安装了 SQLite3，只需安装 gem：

```
gem install sqlite3-ruby 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-06T03:49:02.173

你安装了sqlite吗？如果没有，我建议您执行以下操作：

*   [从http://www.sqllite.org](http://www.sqllite.org)下载“sqlite-shell-win32-x86-3071201.zip”
*   解压并复制`sqlite3.exe`到`c:/ruby193/bin`. （`c:/ruby193`是我安装红宝石的地方）
*   运行命令`c:\gem install sqlite3`。

# php - PHP：为什么不能识别类中的变量 PHPSESSID？

> ID：10907852
> 
> 赞同：0
> 
> 时间：2012-06-06T03:36:13.763
> 
> 标签：php, mysql, sessionid

正如标题所说，我想知道是因为它无法识别 DB_Functions 类中的 $sessionID 变量。

当我检查表格时，除了变量 sessionID 之外的所有字段都存储了。

```
<?php

session_start();
$sessionID = $_COOKIE['PHPSESSID'];

class DB_Functions {
....
....
....

public function insertItemToCart($dataMovieToInsertCart) {
        $precio = $dataMovieToInsertCart['precioMovie'];
        $id =  $dataMovieToInsertCart['claveMovie'];

        $query = "INSERT INTO carrito (session_carrito,id_pelicula,precio_pelicula) VALUES('$sessionID','$id','$precio')";
        $result = mysql_query($query) or die (mysql_error());

        if ($result) {
            return true;
        } else {
            return false;
        }
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:43:52.167

两种方式修复：

1.) 在函数内部使用 global 关键字来赶上函数范围内不可用的全局变量

2.) 如果只有 session_id 的情况，在函数内部使用 session_id() 函数。

例如对于 1：

```
global $sessionID;
$id =  $dataMovieToInsertCart['claveMovie'];
$query = "INSERT INTO carrito (session_carrito,id_pelicula,precio_pelicula) VALUES('$sessionID','$id','$precio')"; 
```

# c# - 使用 emgu CV 编写视频时出现“System.AccessViolationException 未处理”错误

> ID：10907853
> 
> 赞同：2
> 
> 时间：2012-06-06T03:36:15.743
> 
> 标签：c#, visual-studio-2010, emgucv

我正在尝试在 Visual Studio 2010 中使用 EMGU CV 捕获视频，但是当它执行该行时

```
video.WriteFrame<Bgr, byte>(marked); 
```

我得到以下错误：

System.AccessViolationException 未处理

尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

```
private void button3_Click_1(object sender, EventArgs e)
    {
        Capture camera = new Capture();
        if (camera == null)
        {
            MessageBox.Show("can't find a camera", "error");
        }
        double fps = camera.GetCaptureProperty(CAP_PROP.CV_CAP_PROP_FPS);
        double cpHeight = camera.GetCaptureProperty(CAP_PROP.CV_CAP_PROP_FRAME_HEIGHT);
        double cpWidth = camera.GetCaptureProperty(CAP_PROP.CV_CAP_PROP_FRAME_WIDTH);
        double fourcc = camera.GetCaptureProperty(CAP_PROP.CV_CAP_PROP_FOURCC);
        CvInvoke.cvNamedWindow("camera");
        Image<Bgr, byte> temp = camera.QueryFrame();
        //路径
        SaveFileDialog SaveFileDialog1 = new SaveFileDialog();
        SaveFileDialog1.FileName = DateTime.Now.ToString("yyyyMMddhhmmss");
        SaveFileDialog1.Filter = "Image Files(*.avi)|*.avi|All files (*.*)|*.*";
        if (SaveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            MessageBox.Show("START RECORD，ESC TO STOP");
        }
        VideoWriter video = new VideoWriter(SaveFileDialog1.FileName, (int)fourcc, 15, 800, 600, true);
        while (temp != null)
        {
            CvInvoke.cvShowImage("camera", temp.Ptr);
            temp = camera.QueryFrame();
            int c = CvInvoke.cvWaitKey(20);
            Image<Bgr, byte> marked = faceDetection(temp);
            video.WriteFrame<Bgr, byte>(marked);
            if (c == 27) break;
        }
        video.Dispose();
        camera.Dispose();
        CvInvoke.cvDestroyWindow("camera");
    } 
```

有谁知道这可能是什么原因造成的？

谢谢

埃文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T14:33:17.180

很抱歉回答迟了，但也许有人会觉得它有帮助。

我自己现在（在不同的情况下）正在与这个错误作斗争，看起来尝试在 64 位 Windows 上的项目中包含 32 位组件是一个问题。

在 32 位系统上它运行完美，在 64 位上我有“System.AccessViolationException 未处理”

可悲的是，在我的情况下无能为力，只是放弃组件并以其他方式做

也许这里也有问题。什么是 VideoWriter，看起来不像标准的 .NET 类？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T06:06:23.597

重新排序以下几行后，它对我来说非常有用。还检查**标记**为不为空。如果标记为空，那么它将引发访问冲突错误。

```
while (temp != null)
{
    CvInvoke.cvShowImage("camera", temp.Ptr);

    Image<Bgr, byte> marked = faceDetection(temp);
    video.WriteFrame<Bgr, byte>(marked);

    int c = CvInvoke.cvWaitKey(20);
    if (c == 27) break;

    temp = camera.QueryFrame();
} 
```

# c# - 如何检查标签数据与列表项相等的树视图（winform）中的节点？

> ID：10907854
> 
> 赞同：1
> 
> 时间：2012-06-06T03:36:49.493
> 
> 标签：c#, treeview

在我下面的代码中，我有一个 AccessId 列表，它存储在树节点的标记中。如何检查它们的标签在我的列表中的节点（或子节点）？

```
List<AccessFieldSet> AccessList = new List<AccessFieldSet>();
private void GetRolesAccessData(Int32 RolesId)
{            
    C_RolesUsers Db = new C_RolesUsers();
    AccessList = Db.GetRolesAccessData(RolesId);
    foreach (AccessFieldSet Afs in AccessList)
    {
        foreach (TreeNode node in TreeRoles.Nodes)
        {
            if (node.Tag == Afs.AccessId.ToString())
            {
                //Check Node is true ?
            }
            GetTagChildren(node);
        }
    }
}

private void GetTagChildren(TreeNode Node)
{
    TreeNode ChNode = null;
    //TreeFieldSet nodeCat = (TreeFieldSet)Node.Tag;
    //Int32 nodeCat = (Int32)Node.Tag;
    foreach (AccessFieldSet Afs in AccessList)
    {
        if (Afs.AccessId.ToString() == Node.Tag)
        {
            //Check Node is true ?
            GetTagChildren(ChNode);
        }
    }
} 
```

我将代码编辑为：

```
List<AccessFieldSet> AccessList = new List<AccessFieldSet>();
private void GetRolesAccessData(Int32 RolesId)
{            
    C_RolesUsers Db = new C_RolesUsers();
    AccessList = Db.GetRolesAccessData(RolesId);
    for (int i = 0; i < TreeRoles.Nodes.Count; i++)
    {
        CheckedSelectedNodes(i, TreeRoles.Nodes, AccessList);
    }
}

private void CheckedSelectedNodes(Int32 i, TreeNodeCollection nodes, List<AccessFieldSet> AccessList)
{
    TreeNode node = nodes[i];
    for (int j = 0; j < AccessList.Count; j++)
    {
        foreach (AccessFieldSet Afs in AccessList)
        {
            if ((int)node.Tag == Afs.AccessId)
            {
                node.Checked = true;
            }
        }
    }
} 
```

使用新代码，我可以检查节点标记在 AccessList 中的节点。如何更改 ChildNodes（节点的孩子）的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:29:43.943

您可以使用递归来非常优雅地做到这一点。

```
List<AccessFieldSet> accessList = new List<AccessFieldSet>(); 

private void GetRolesAccessData(Int32 RolesId) 
{             
    C_RolesUsers Db = new C_RolesUsers(); 
    accessList = Db.GetRolesAccessData(RolesId);
    foreach (TreeNode node in TreeRoles.Nodes)
    {
        CheckNodeRecursively(node, accessList);
    } 
} 

private void CheckNodeRecursively(TreeNode node, List<AccessFieldSet> accessList) 
{
    // Note: You don't need the for loop through 'j'.
    foreach (AccessFieldSet afs in accessList) 
    { 
        if ((int)node.Tag == afs.AccessId) 
        { 
            node.Checked = true; 
        } 
    }
    foreach (TreeNode childNode in node.Nodes)
    {
        CheckNodeRecursively(childNode, accessList);
    }
} 
```

如果您发现自己经常做这种事情，您可以将递归分解为实用方法并使用 Action 来改变“每个节点上的操作”逻辑。例如：

```
public static void ActOnAllRecursively(this TreeNodeCollection nodes, Action<TreeNode> action)
{
    foreach (TreeNode node in nodes)
    {
        ActOnRecursively(node, action);
    }
}

public static void ActOnRecursively(this TreeNode node, Action<TreeNode> action)
{
    action(node);
    foreach (TreeNode node in node.Nodes)
    {
        ActOnRecursively(node);
    }
} 
```

然后你的代码看起来像这样：

```
List<AccessFieldSet> accessList = new List<AccessFieldSet>(); 

private void GetRolesAccessData(Int32 RolesId) 
{             
    C_RolesUsers Db = new C_RolesUsers(); 
    accessList = Db.GetRolesAccessData(RolesId);
    TreeRoles.Nodes.ActOnAllRecursively((node) =>
    {
        foreach (AccessFieldSet afs in accessList) 
        { 
            if ((int)node.Tag == afs.AccessId) 
            { 
                node.Checked = true; 
            } 
        } 
    });
} 
```

最后，您可以疯狂地使用 LINQ 并以声明式样式编写特定于应用程序的代码：

```
List<AccessFieldSet> accessList = new List<AccessFieldSet>(); 

private void GetRolesAccessData(Int32 RolesId) 
{             
    C_RolesUsers Db = new C_RolesUsers(); 
    accessList = Db.GetRolesAccessData(RolesId);
    TreeRoles.Nodes.ActOnAllRecursively((node) =>
    {
        node.Checked = accessList.Any(afs => afs.AccessId == (int)node.Tag);
    });
} 
```

# c - gcc 4.6.1 (linux) 中的 long double 问题

> ID：10907857
> 
> 赞同：1
> 
> 时间：2012-06-06T03:37:14.533
> 
> 标签：c, gcc, type-conversion, linux-mint

```
#include <stdio.h>

int main()
{
    long double n = (long double)1208925819614629174706175; // (1<<80)-1 (generated in python)
    printf("%LG\n",n);
} 
```

在用 gcc 编译时，我收到一个警告

```
test.c:5:31: warning: integer constant is too large for its type [enabled by default] 
```

运行时打印`-1`

在做 a`sizeof(long double)`时，它会打印`12`. 所以一个签名`long double`应该容纳**(1<<83)-1**对吗？

如何让它正常工作？

PS：我正在处理的原始问题是处理存储大至**12*(10 ^(18)** ) 的有符号整数。我不想编写乘法、加法和其他计算例程。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T07:33:15.830

Starbolin 是正确的，但我认为需要对这个表达式进行详细解释：

在 C 中，数字常量（不带小数点）的类型为`int`或`long`，具体取决于值。
你使用的常数 ,`1208925819614629174706175`甚至对于 来说都太大了`long`，所以它被截断了。
所有这些都发生在投射到`long double`和分配到之前`n`。
当浮点类型进入画面时，数值常量已经被截断，丢失的位再也回不来了。

发生这种情况是因为 C 是一种简单的语言，它在编译期间遵循简单定义的步骤。编译器不会“窥视”来查看数字常量将被强制转换为`long double`. 它首先将其视为`long`，然后继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T04:12:33.040

Long double 将处理 10**300 及以上，这不是编译器所抱怨的。它说您尝试转换为 long 的整数对于整数来说太大了。（提示 - 添加小数点） – starbolin

# hadoop - 是否可以使用几个 jar 来指定 hadoop 中的作业？

> ID：10907860
> 
> 赞同：1
> 
> 时间：2012-06-06T03:37:43.090
> 
> 标签：hadoop, hadoop-plugins

我通常在不同的 jar 文件中有公共/共享库和实际工作代码。是否可以只重新编译一个作业 jar 文件来执行 hadoop 命令`hadoop jar asd`？如果没有，是否有简化 jar 包装的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:54:24.100

我正在使用 Ant 制作工作 jar。要在 buildConfig.xml 文件中包含所有公共/共享库，您必须添加这样的行：

```
<zipgroupfileset dir="pathToAllCommonAndSharedLibraries" includes="**/*.jar" /> 
```

这是构建配置文件的最简单示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Example.makejar" default="jar" basedir=".">
    <target name="jar">
        <jar destfile="Example.jar" basedir="bin">
            <manifest></manifest>
            <zipgroupfileset dir="pathToAllCommonAndSharedLibraries" includes="**/*.jar" />
        </jar>
    </target>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:26:35.490

我不确定 hadoop 对此的支持，我稍后会问，但这里是解决方法：如果您使用 maven 构建您的工作项目，使用 maven shade 插件或 maven 程序集插件将所有依赖项嵌入到 jar 文件中，这样您将只部署一个文件。

# android - android 应用程序可以使用套接字与本机 Android 服务通信吗？

> ID：10907861
> 
> 赞同：4
> 
> 时间：2012-06-06T03:37:44.300
> 
> 标签：android, sockets, native

我正在尝试让一个 android 应用程序与本机服务（交叉编译的 ARM 二进制文件或 Linux 脚本）对话，我想知道我是否可以使用套接字来做到这一点？

基本上，本机服务将在初始化时运行，并在执行其他操作之前等待应用程序向其发送数据。

这可能吗，android应用程序是否需要root权限才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T04:04:03.030

是的，这是可能的。不，该应用程序不需要任何特殊权限即可 - 对于 unix 域套接字，您甚至不需要互联网权限。

您需要特殊许可的唯一地方是启动服务的地方 - 本质上，您必须为其提供 oom 杀手值，这将告诉 android 不理会该进程，和/或将其设置为自动重启。否则，资源受限的安卓系统可能会杀死一个似乎与任何特定合法活动或服务无关的神秘进程。

更 android 风格的集成方式当然是实现你的服务更像现有的 android 服务，即使用在客户端进程中运行的存根 api，并通过 Binder IPC 将事物推送到在特殊进程中运行的服务（相当可能是系统进程）。这也可能更容易使用现有的包/清单权限方案来规范对您的服务的访问。但这最终是一种风格上的东西，虽然在某种程度上可能与让谷歌接受你的设备有关，但这并不是制作可行的东西的唯一方法。

# git - 从 BitBucket 下载 Git 存储库

> ID：10907863
> 
> 赞同：32
> 
> 时间：2012-06-06T03:38:18.643
> 
> 标签：git, download, bitbucket

我刚刚下载了 Git bash，现在我想从 Bitbucket 下载一个存储库。我有用户名和密码。

当我尝试：

```
$ git clone https://xxxxx@bitbucket.org/xxxx/xxxxx.git 
```

我得到：

```
Cloning into 'xxxx'...

fatal:https://xxxxx@bitbucket.org/xxxx/xxxxx/info/refs not found did you git
 update server-info on the server ? 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-15T15:26:47.783

当您在 bitbucket 中创建存储库时，用户界面会显示您需要的确切克隆命令：

![捕获克隆帮助](../Images/c3f15e7b3896b30db5af6e512ec7dfbe.png)

因此，您的克隆命令需要是：

https://用户名@bitbucket.org/**用户名****/reponame.git**

 *** * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-13T20:49:41.717

您还可以使用 ssh 进行克隆，这允许使用 ssh 密钥设置无密码推送和拉取。

git clone git@bitbucket.org:username/reponame.git

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-22T18:38:00.223

*Bitbucket*可以使用*Mercurial*。你真的在克隆一个**git**存储库吗？*我通过使用hg*克隆解决了同样的问题;-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-21T13:50:54.180

bitbucket 上的界面已更改，因此寻找正确命令的人可以在左侧的“操作”->“克隆”下找到它，您会看到该命令已经为 https 编码。有用。**

# blackberry - 如何将任何字段添加到黑莓中的自定义垂直字段管理器？

> ID：10907864
> 
> 赞同：0
> 
> 时间：2012-06-06T03:38:21.240
> 
> 标签：blackberry

我的自定义垂直字段管理器

```
public class Custom_TopField extends VerticalFieldManager {
private static final int FIELD_HEIGHT = 70;
private LabelField maintitle;

private String _text;

Custom_TopField(int color, String text) {
    super(Manager.NO_VERTICAL_SCROLL);
    _text = text;
    Background background = BackgroundFactory.createSolidBackground(color);
    setBackground(background);
    maintitle = new LabelField(_text, Field.FIELD_VCENTER | Field.FIELD_HCENTER);
    Font font = Font.getDefault().derive(Font.BOLD, 35);
    maintitle.setFont(font);
    add(maintitle);
}

protected void sublayout(int width, int height) {
    width = Math.min(width, getPreferredWidth());
    height = Math.min(height, getPreferredHeight());
    setExtent(width, height);
}

public int getPreferredHeight() {
    return FIELD_HEIGHT;
}

public int getPreferredWidth() {
    return Display.getWidth();
}

public void paint(Graphics graphics) {
    int rectHeight = getPreferredHeight();
    int rectWidth = getPreferredWidth();    
    graphics.drawRect(0, 0, rectWidth, rectHeight);     
    super.paint(graphics);
}
} 
```

虽然我`add(maintitle)`但它没有出现在垂直场的中间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:42:57.003

你可以试试这个：

向构造函数添加标志：

```
super(Manager.NO_VERTICAL_SCROLL | Manager.USE_ALL_WIDTH); 
```

也到场：

```
maintitle = new LabelField(DrawStyle.HCENTER | Field.FIELD_HCENTER); 
```

这应该水平居中字段。您也可以尝试将标志添加到垂直居中，但很可能它不起作用，因为 VFM 存在垂直滚动问题。规则是：水平居中，使用 a `VerticalFieldManager`，垂直居中，使用 a `HorizontalFieldManager`。这是您可以垂直居中的方式：

```
 HorizontalFieldManager hfm = new HorizontalFieldManager(Manager.USE_ALL_HEIGHT);
    Field toCenter = new <Field>(DrawStyle.VCENTER | Field.FIELD_VCENTER );
    hfm.add(toCenter); 
```

从理论上讲，您可以制定一个结合这两种方法的解决方案，并将一个管理器嵌套在另一个管理器中。

# android-4.0-ice-cream-sandwich - 如何将项目从 2.3 编译到 4.0？

> ID：10907866
> 
> 赞同：1
> 
> 时间：2012-06-06T03:38:47.543
> 
> 标签：android-4.0-ice-cream-sandwich, android-2.3-gingerbread

最近，我被要求为新的 4.0 版本编译一些基于 2.3 的 Android 项目。因此，在没有太多关于如何做的知识的情况下，我只是尝试通过在清单文件中进行一些更改来自己做，比如`min SDK`and `targeted SDK`。我将其设置`min SDK`为**10**和**15**。希望这会以某种方式起作用，我测试运行我的代码只是发现它没有按照我希望的方式运行。当然，它在 2.3 上运行得非常好，无论是在模拟器还是设备上。 `targeted SDK`

 **有没有办法升级/转换这个项目以使用最新版本编译和构建，而不是重做它？任何人都可以帮忙吗？

**编辑 1：** 经过数小时的故障排除和搜索在线线索。我决定更深入地研究一下。我发现这一行：

```
DefaultHttpClient client = new MyHttpClient(getApplicationContext());
HttpGet get = new HttpGet(url11);
HttpResponse getResponse = client.execute(get); // 4.0.3 crashes here.... 
```

是问题的原因。现在我从 2.3.3 和 4.0.3 运行 AVD Manager 来测试这个问题，结果证明这条线运行顺利，在 2.3.3 上没有错误。新的 4.0.3 中可能会有弃用或其他内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:59:27.540

很可能是由于在主线程上执行网络操作引起的。

当 AndroidManifest.xml 上的 targetSdkVersion 为 11 或更高时，它会导致[NetworkOnMainThreadException 。](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

使用 AsyncTask 或 AsyncTaskLoader 将其移动到后台线程。**

# mysql - 具有挑战性的 mysql INTERSECT 查询

> ID：10907870
> 
> 赞同：0
> 
> 时间：2012-06-06T03:39:15.210
> 
> 标签：mysql, sql

我试图找到两个用户之间的相互联系。联系人表是这样设置的：

```
userprofile_usercontact
- first_user_id
- second_user_id
- mutual 
```

以下是我想要实现的查询：

```
/* get the first user's contacts */
SELECT second_user_id FROM userprofile_usercontact WHERE first_user_id = 1 AND mutual = 1
   UNION 
SELECT first_user_id FROM userprofile_usercontact WHERE second_user_id = 1 AND mutual = 1
    *INTERSECT*
/* get the second user's contacts */
SELECT second_user_id FROM userprofile_usercontact WHERE first_user_id = 37 AND mutual = 1
    UNION 
SELECT first_user_id FROM userprofile_usercontact WHERE second_user_id = 37 AND mutual = 1 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:28:15.053

我不明白共同属性的重要性 - 但由于它在您的示例代码中始终为 1，因此要找到 $user1 和 $user2 之间的共同联系人（单度分离），只需（内部）加入数据.

```
SELECT user1_contacts.uid
FROM
(SELECT a.first_user_id as uid
 FROM userprofile_usercontact a
 WHERE a.second_user_id=$user1
 AND a.mutual=1
 UNION
 SELECT b.second_user_id
 FROM userprofile_usercontact b
 WHERE b.second_user_id=$user1
 AND b.mutual=1) as user1_contacts,
(SELECT a.first_user_id as uid
 FROM userprofile_usercontact a
 WHERE a.second_user_id=$user2
 AND a.mutual=1
 UNION
 SELECT b.second_user_id
 FROM userprofile_usercontact b
 WHERE b.second_user_id=$user2
 AND b.mutual=1) as user2_contacts
WHERE user1_contacts.uid=user2_contacts.uid 
```

实际上，您正在强制合并连接，这可能不是最有效的解决方案（但比尝试使用“IN”和“OR”要高效得多。可以使用嵌套查找来编写整个内容，但是代码会变得非常混乱。

如果您想超越单一程度的分离，那么使用[图形优化的 DBMS会更干净](http://openquery.com/products/graph-engine)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:51:48.047

这不漂亮，但它应该工作：

```
SELECT * FROM userprofile_usercontact 
WHERE 
(
first_user_id IN
(
/* get the first user's contacts */
SELECT second_user_id FROM userprofile_usercontact WHERE first_user_id = 1 AND mutual = 1
   UNION 
SELECT first_user_id FROM userprofile_usercontact WHERE second_user_id = 1 AND mutual = 1
) AND first_user_id IN (
/* get the second user's contacts */
SELECT second_user_id FROM userprofile_usercontact WHERE first_user_id = 37 AND mutual = 1
    UNION 
SELECT first_user_id FROM userprofile_usercontact WHERE second_user_id = 37 AND mutual = 1
)
) OR (
second_user_id IN
(
SELECT second_user_id FROM userprofile_usercontact WHERE first_user_id = 1 AND mutual = 1
   UNION 
SELECT first_user_id FROM userprofile_usercontact WHERE second_user_id = 1 AND mutual = 1
) AND second_user_id IN (
/* get the second user's contacts */
SELECT second_user_id FROM userprofile_usercontact WHERE first_user_id = 37 AND mutual = 1
    UNION 
SELECT first_user_id FROM userprofile_usercontact WHERE second_user_id = 37 AND mutual = 1
)
) 
```

# c - Arduino处理开放网络套接字

> ID：10907872
> 
> 赞同：0
> 
> 时间：2012-06-06T03:39:19.073
> 
> 标签：c, sockets, networking, arduino

有没有办法通过 Arduino 处理（计算机上运行的程序）打开网络套接字？我想在处理程序上打开一个客户端或服务器套接字，这样我就可以通过 WiFi 与之交谈并通过串行连接控制我的 Arduino。串行连接的东西正在工作，我现在想要的只是通过网络控制处理的某种方式。当然我可以用 wifi shield 直接控制 Arduino，但请不要担心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:07:13.463

据我了解您的问题，您希望在处理中建立网络。有一个[图书馆](http://processing.org/reference/libraries/net/index.html)可以做到这一点。它允许您创建简单的客户端或服务器。

`The Network library makes it easy to read and write data across machines on the Internet. It allows the creation clients and servers. A server connects to a list of clients for reading and writing data. A client is able to read and write data to a server.`

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:42:25.847

是的，有一个[库](http://www.arduino.cc/playground/Code/SerialIP)可以使用没有以太网卡的 Arduino进行[SLIP （串行线路互联网协议）](http://en.wikipedia.org/wiki/SLIP)

# authentication - 在 Java EE 中保护和验证 + 授权 REST API 调用

> ID：10907877
> 
> 赞同：1
> 
> 时间：2012-06-06T03:40:16.577
> 
> 标签：authentication, rest, jakarta-ee, authorization

我在服务器端和客户端的不同应用服务器中有单独的 WAR。与服务器端的 UI 交互是通过 REST API。

现在的问题是 REST 服务托管在 8080 端口上，我看到如果我只提供 URL，我可以看到结果 XML。现在这很危险。除了来自客户端 WAR 的请求之外，我不希望任何人实际看到结果。客户端身份验证和授权在那里，但我如何将其传播到服务器端 WAR。为了解释工作流程，让我举一个示例用例： 1\. 用户请求他需要查看他的所有订单。现在，在 post 请求中发送的用户 ID 和相应的 REST API 被调用，它返回该用户 ID 的所有订单。现在我担心的是，任何知道该 URL 的人实际上都可以获得任何用户的所有订单列表。我如何停止这个未经授权和可能未经身份验证的请求？在部署在不同容器中的客户端和服务器端的两个不同 WAR 的场景中，我如何最好地集成授权和身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:17:48.293

用户登录时生成令牌保存在服务器端以及在cookie中设置在客户端

现在，当任何对服务器令牌 cookie 的请求都自动与该请求一起出现时，您可以在服务器端获取该 cookie，`@CookieParam` 以便您可以轻松地验证用户是否经过身份验证。

# c# - 在 Redis (ServiceStack RedisClient) 中使用事务的自动增量 ID

> ID：10907878
> 
> 赞同：1
> 
> 时间：2012-06-06T03:40:34.220
> 
> 标签：c#, redis, servicestack

带有 IncrementKey 的 ActionSuccess 回调在事务中不起作用：

```
public class Article
{
    public long Id { get; set; }
    public string Name { get; set; }
}

[Test]
public void Can_create_article_with_autoincremental-id()
{
    Article a = new Article() { Name = "I Love Writing Test" };
    using (var trans = Redis.CreateTransaction())
    {
        trans.QueueCommand(r => r.IncrementValue("id:article"), id => a.Id = id);
        trans.QueueCommand(r => r.Store<Article>(a));

        trans.Commit();
    }

    Assert.That(Redis.Get<Article>("1").Id,Is.Equal("1"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:12:13.850

Redis 事务都是同时执行的，只有在整个事务完成后才会触发回调。因此，您不能在该事务的另一部分中的同一事务中使用回调中的返回值。

如果您只想存储带有自动递增 Id 计数器的文章，您可以简单地执行以下操作：

```
var a = new Article { 
   Id = Redis.As<Article>().GetNextSequence(), 
   Name = "I Love Writing Test" 
};
Redis.Store(a); 
```

没有必要为此进行交易。要在事务中使用 Redis 中的值，该事务仅在没有值更改时才会执行，请使用[WATCH](http://redis.io/commands/watch)命令。[有关示例，](https://stackoverflow.com/a/10844575/85785)请参见我之前的答案。

# css - Firefox 中的 select 元素内边框

> ID：10907879
> 
> 赞同：0
> 
> 时间：2012-06-06T03:40:34.210
> 
> 标签：css, firefox

选择元素仍然获得焦点内边框。这是一个示例表格：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Sample Form</title>
<style type="text/css">
* {outline:none;}
::-moz-focus-inner {border:none;}
</style>
</head>
<body>
<form action="">
<select>
  <option value="first">First option</option>
  <option value="second">Second option</option>
</select>
</form>
</body>
</html> 
```

我怎样才能删除它？

提前致谢！

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T19:18:18.757

边框作为面向用户的功能存在，因此用户可以看到重点。你不能删除它。

# apache - 在 Apache Ace 和管理代理之间启用 SSL 身份验证

> ID：10907880
> 
> 赞同：3
> 
> 时间：2012-06-06T03:40:34.947
> 
> 标签：apache, openssl, ssl-certificate, apache-ace

我正在尝试在 Apache Ace 和管理代理之间启用两种方式的 ssl 身份验证（通过遵循文档[http://ace.apache.org/dev-doc/design/using-client-certificates.html](http://ace.apache.org/dev-doc/design/using-client-certificates.html)）。为此，首先我按照以下步骤创建了所需的证书：

步骤#1) 通过执行以下命令使用 OpenSSL 创建一个自签名证书颁发机构：

```
openssl req -x509 -new -config Certi/X509CA/openssl.cnf -days 365 -out Certi/X509CA/ca/new_ca.pem -keyout Certi/X509CA/ca/new_ca_pk.pem 
```

此命令创建了证书 new_ca.pem 及其私钥 new_ca_pk.pem。

步骤#2) 使用以下命令将证书 new_ca.pem 导入名为 truststore 的密钥库文件

```
keytool -import -alias truststore -keystore truststore -file new_ca.pem 
```

步骤#3) 为管理代理创建证书，可在名为 keystore-ma.jks 的 Java 密钥库文件中找到。

```
keytool -genkey -dname "CN=<hostIP>, OU=IT, O=<Organization Name>, ST=UP, C=IN" -validity 365 -alias keystore-ma -keypass secret -keystore keystore-ma.jks -storepass secret 
```

步骤#4) 创建了一个 CSR：

```
keytool -certreq -alias keystore-ma -file keystore-ma_csr.pem -keypass secret -keystore keystore-ma.jks -storepass secret 
```

步骤#5) 使用在步骤 1 中创建的证书颁发机构签署证书。

```
openssl ca -config X509CA/openssl.cnf -days 365 -cert C:/X509CA/ca/new_ca.pem -keyfile C:/X509CA/ca/new_ca_pk.pem -in C:/X509CA/ca/keystore-ma_csr.pem -out C:/X509CA/ca/keystore-ma.pem 
```

Step#6) 在名为 keystore-ma 的 kestore 文件中导入证书

```
keytool -import -alias keystore-ma -keystore keystore-ma -file keystore-ma.pem 
```

遵循类似的步骤 (3-6) 来创建证书或 ACE 服务器并对其进行签名，这些证书或 ACE 服务器在 Java 密钥库文件中可用，称为 keystore-server。

然后我更新了 Ace Server 的 Platform.properties 以包含其他属性并启动 Ace Server：

```
-Dorg.osgi.service.http.port.secure=8443
-Dorg.apache.felix.https.enable=true
-Dorg.apache.felix.https.truststore=/path/to/truststore
-Dorg.apache.felix.https.truststore.password=secret
-Dorg.apache.felix.https.keystore=/path/to/keystore-server
-Dorg.apache.felix.https.keystore.password=secret
-Dorg.apache.felix.https.clientcertificate=needs 
```

使用以下命令启动 ace-launcher.jar：

```
java -Djavax.net.ssl.trustStore=/path/to/truststore -Djavax.net.ssl.trustStorePassword=secret -Djavax.net.ssl.keyStore=/path/to/keystore-ma -Djavax.net.ssl.keyStorePassword=secret -jar org.apache.ace.launcher-0.8.1-SNAPSHOT.jar  discovery=https://<Ace Server Ip>:8443 identification=MyTarget 
```

我通过将发现 url 更改为多次尝试

```
 1) https://<Ace Server Ip>:8080
 2) http://<Ace Server Ip>:8080
 3) https://<Ace Server Ip>:8443 
```

但目标未在 Ace 服务器中注册。我是否使用正确的 URL 通过 HTTPS 连接到 Ace 服务器？另外如何确认我的 Ace 服务器是否配置为接受来自管理代理的 HTTPS 流量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:52:04.170

我看到您使用的专有名称 (DN) 不仅仅是一个通用名称。
按照惯例，作为公用名的主机名用于证书验证。`CN=hostname-of-target`如果您使用（IP 地址不够）创建证书，它应该可以工作。

另一个提示我可以给您解决 SSL 错误：`-Djavax.net.debug=ssl`用于服务器，它会吐出大量信息，但会提供有关正在发生的事情和导致错误的原因的详细信息。

# postgresql - 为什么我不能将单个值添加到 PostgreSQL PostGIS 中的整个列？

> ID：10907882
> 
> 赞同：0
> 
> 时间：2012-06-06T03:41:07.537
> 
> 标签：postgresql, postgis

我是 PostgreSQL 的新手，所以请耐心等待。

我有两张桌子，一张叫做“polys”，有几个多边形，另一张叫做“box”，只包含一个多边形（我的边界框）。我的查询选择了“多边形”中落在边界框“框”内的所有多边形——如果你愿意，可以选择一个剪辑。两个表都有两列，一列包含它们的 ID，另一列包含名为“the_geom”的 GeoJSON。

我想要的是一列包含落在边界框内的多边形的 ID，另一列包含这些多边形的 GeoJSON，称为“the_geom_webmercator”，另一列称为“polygonarea”，每个多边形的面积，然后是另一列称为“totalarea”，其中包含每个多边形的相同值（该值是所有多边形的总和）。但是，简单地询问 SUM 是行不通的，因为它只返回 1 个值。相反，我希望这个值填满整个列。以下是我尝试过的；`SUM...AS' 是有问题的部分。

```
SELECT polys.id, ST_Transform(ST_Intersection(polys.the_geom, box.the_geom),3857)
AS the_geom_webmercator,
ST_Area(ST_Transform(ST_Intersection(polys.the_geom,box.the_geom),3857))
AS polygonarea,
SUM(ST_Area(ST_Transform(ST_Intersection(polys.the_geom,box.the_geom),3857)))
AS totalarea FROM polys,box 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T09:47:24.000

如果您使用 SUM() 聚合函数，您还需要一个 GROUP BY 语句。

我猜你想要的是一个窗口函数

[http://www.postgresql.org/docs/9.1/static/tutorial-window.html](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)

使用窗口函数，您可以在没有 GROUP BY 的情况下计算单行的聚合。

```
SELECT 
 polys.id, 
 ST_Transform(ST_Intersection(polys.the_geom, box.the_geom),3857) AS the_geom_webmercator,
 ST_Area(ST_Transform(ST_Intersection(polys.the_geom,box.the_geom),3857)) AS polygonarea,
 SUM(ST_Area(ST_Transform(ST_Intersection(polys.the_geom,box.the_geom),3857)))  OVER () AS totalarea
FROM polys,box 
```

# php - Recess Framework 中的 JSON 视图

> ID：10907888
> 
> 赞同：1
> 
> 时间：2012-06-06T03:41:32.637
> 
> 标签：php, json, api, recess

我正在尝试使用 Recess 创建一个 api，但我对它的 JsonView 有疑问。目前，如果我在 /users/1 上执行 GET 请求（它路由到一个函数，该函数获取 id 为 1 的用户的所有详细信息并以 Json 响应），我得到以下信息：

```
{"users":{"id":"1","username":null,"password":null,"datejoined":false}} 
```

我怎样才能做到这一点，以便我得到以下内容：

```
{"id":"1","username":null,"password":null,"datejoined":false} 
```

也就是说，我不想把所有的细节都包裹在里面`"users":{}`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:19:46.657

默认情况下，Recess 的 JsonView 会使用[您的控制器](https://github.com/recess/recess/blob/47444bc8b6dc367460220be47f08f20c0392e7e5/recess/recess/framework/controllers/Controller.class.php#L208)的属性进行[响应](https://github.com/recess/recess/blob/47444bc8b6dc367460220be47f08f20c0392e7e5/recess/recess/framework/views/JsonView.class.php#L25)。因此，您的属性将直接编码为 JSON。`$users`

您可以通过返回[自定义响应对象](https://github.com/recess/recess/blob/47444bc8b6dc367460220be47f08f20c0392e7e5/recess/recess/http/responses/OkResponse.class.php)来覆盖它：

```
return new OkResponse($this->request, (array)$this->users); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T03:54:49.580

不确定具体的凹槽，但如果您使用带有输入参数的 JsonView 方法/函数`(array) $result`，那么更改`$result`为`$result['users']`可能会给您您正在寻找的答案。

例如使用纯 PHP：

```
first object: echo json_encode($result);
second object: echo json_encode($result['users']); 
```

# sorting - Blackberry - 按日期对 ListField 数据进行排序

> ID：10907891
> 
> 赞同：0
> 
> 时间：2012-06-06T03:41:49.780
> 
> 标签：sorting, blackberry, labelfield, pubdate

我从 XML 解析中获得了数据，并尝试根据日期对其进行排序，其格式类似于“Wed, 06 Jun 2012 09:53:05 +0700”。因此，来自每个提供商的所有新闻都将被混合并从最新到最新进行组织。

这是代码：

```
int i=0;
while (i<vec.size()){

    row = new TableRowManager();

    prov = new LabelField(((BinNews)vec.elementAt(i)).getProv(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.ORANGERED);
            super.paint(g);
        }
    };

    title = new LabelField(((BinNews)vec.elementAt(i)).getTitle(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.BLUE);
            super.paint(g);
        }
    };
    title.setFont(Font.getDefault().derive(Font.BOLD));

    desc = new LabelField(((BinNews)vec.elementAt(i)).getDesc(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.BLACK);
            super.paint(g);
        }
    };

    date = new LabelField(((BinNews)vec.elementAt(i)).getDate(),DrawStyle.ELLIPSIS){
        protected void paint(Graphics g) {
            g.setColor(Color.ORANGERED);
            super.paint(g);
        }
    };

    rows.addElement(row);
    setSize(rows.size());
    row.add(prov);
    row.add(date);
    row.add(title);
    row.add(desc);
    i++;
} 
```

所以，在我将它添加到行之前，它将首先排序。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:46:52.807

试试这个 -

```
public static SimpleSortingVector  vector = new SimpleSortingVector ();

vector.setSortComparator(new MyComparator());
vector.addElement(new FriendsRequestObject(id_,name_));
vector.reSort();    

import net.rim.device.api.util.Comparator;
public class MyComparator implements Comparator {
 public int compare(Object o1, Object o2) {
    FriendsRequestObject f1 = (FriendsRequestObject)o1;
    FriendsRequestObject f2 = (FriendsRequestObject)o2;

    return f1.getSender_name().compareTo(f2.getSender_name());
  }

  public boolean equals(Object obj) {
    return compare(this, obj) == 0;
  }

} 
```

# ruby - 如果给定起始地址，则创建 IP 地址序列

> ID：10907892
> 
> 赞同：0
> 
> 时间：2012-06-06T03:41:54.960
> 
> 标签：ruby

如果给定一个起始 IP 地址（例如 192.168.0.1），我需要编写代码来 ping 一系列 20 个 IP 地址。每个连续的 IP 地址应该比前一个大一位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:07:27.587

That's what [`IPAddr#succ`](http://RubyDoc.Info/stdlib/ipaddr/IPAddr%3asucc) is for:

```
require 'ipaddr'

ipaddr = IPAddr.new('192.168.0.1')

20.times do
  ping ipaddr
  ipaddr = ipaddr.succ
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T05:26:21.513

```
ip = "192.168.0.1"
ips = []

(0..20).each do |n|

  temp = ip.split('.').map(&:to_i)

  temp[3] = temp[3] + n

  ips << temp.join('.')

end

puts ips 
```

# dart - 如何使用 Dart 动态加载 HTML 并插入我的网页？

> ID：10907893
> 
> 赞同：13
> 
> 时间：2012-06-06T03:42:03.827
> 
> 标签：dart

如何动态加载 HTML 片段并将其插入我的网页？我正在使用飞镖。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T03:42:04.387

很高兴你问！使用 Dart 完成这项任务与 JavaScript 没有太大区别，除了您可以获得打字、代码完成和流畅的编辑体验。

首先，创建snippet.html：

```
<p>This is the snippet</p> 
```

接下来，创建应用程序。注意使用 XMLHttpRequest 来请求片段。此外，用于`new Element.html(string)`从字符串创建 HTML 块。

```
import 'dart:html';

void main() {
  var div = querySelector('#insert-here');
  HttpRequest.getString("snippet.html").then((resp) {
    div.append(new Element.html(resp));
  });
} 
```

最后，这是主机 HTML 页面：

```
<!DOCTYPE html>

<html>
  <head>
    <title>dynamicdiv</title>
  </head>
  <body>
    <h1>dynamicdiv</h1>
    <div id="insert-here"></div>
    <script type="application/dart" src="dynamicdiv.dart"></script>
    <script src="packages/browser/dart.js"></script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-24T06:14:14.513

主要飞镖：

```
import 'dart:html';

DivElement div = querySelector('div');

main() async {
  String template = await HttpRequest.getString("template.html");
  div.setInnerHtml(template, treeSanitizer: NodeTreeSanitizer.trusted);
} 
```

模板.html：

```
<h1>Hello world.</h1>

Check my bird... <em>it flies</em> !
<img src="https://www.dartlang.org/logos/dart-bird.svg"> 
```

有关开箱即用的完整示例，请参阅：

[https://gist.github.com/kasperpeulen/536b021ac1cf397d4e6d](https://gist.github.com/kasperpeulen/536b021ac1cf397d4e6d)

请注意，您需要 1.12 才能开始`NodeTreeSanitizer.trusted`工作。

# asp.net-mvc - MVC3：@Html.Hidden 的缓存值

> ID：10907902
> 
> 赞同：1
> 
> 时间：2012-06-06T03:43:27.093
> 
> 标签：asp.net-mvc, asp.net-mvc-3

这是出于好奇而提出的问题，而不是因为我遇到了无法解决的问题。

在 MVC3（可能还有更早的版本）中，我经常遇到使用 @Html.Hidden 和 @Html.HiddenFor 的问题，所有这些问题都源自辅助方法使用的“幕后”缓存。对于那些不熟悉它的人，即使您为方法调用提供新值，重新执行使用这些助手的局部视图也会从缓存中获取值。我不太清楚何时会发生这种情况，但我知道确实如此，并且已将其记录为需要在线注意的问题。

我想知道这个缓存的价值是什么。至少在我使用隐藏字段的方式上，每个视图执行的值都是不同的。鉴于这种使用模式，缓存的阻碍比它的帮助更频繁。

缓存在哪些场景下增值？

# objective-c - Clang NSTask 与流

> ID：10907903
> 
> 赞同：1
> 
> 时间：2012-06-06T03:43:31.270
> 
> 标签：objective-c, clang, nstask, nsfilehandle, nspipe

别介意所有的“为什么？”，“没用？”和“不要打扰”的评论。我想使用 clang 在另一个程序中编译一个程序。我可以创建`NSTask`并设置参数，如果文件存在（即没有流），它将工作，并写入物理文件。我无法得到我真正想要的，即使用流进行输入和输出。我知道如果您使用 -xc 和 - 选项，clang 和 gcc 都允许编译标准输入，但无法使用管道实现该功能。我也不确定如何将 clang 的输出重定向到文件句柄或流。

这是我编译它并在 outfile 中生成正确输出的代码

```
task = [[NSTask alloc] init];

NSPipe* outputPipe = [[NSPipe alloc] init];
[task setStandardOutput:outputPipe ];
[task setStandardError: [task standardOutput]];

NSPipe* inPipe = [NSPipe pipe];
[task setStandardInput:inPipe];

[task setLaunchPath:@"/usr/bin/clang"];
NSString* outfile= [NSString stringWithFormat:@"%@.out",[[filename lastPathComponent] stringByDeletingPathExtension]];

//[data writeToFile:@"file.c" atomically:YES];
[task setArguments:[NSArray arrayWithObjects:filename,@"-S",@"-o",outfile,nil]];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(getData:) 
                                             name: NSFileHandleReadCompletionNotification 
                                           object: [[task standardOutput] fileHandleForReading]];

[[[task standardOutput] fileHandleForReading] readInBackgroundAndNotify];

[task launch]; 
```

我尝试将其用于输入流：

```
/* on pipe creation*/
dup2([[inPipe fileHandleForReading] fileDescriptor], STDIN_FILENO);
NSFileHandle* curInputHandle = [inPipe fileHandleForWriting];
/* tried before launch and after, no output just sits */ 
[curInputHandle writeData:[NSData dataWithContentsOfFile:filename]]; 
```

有时，我假设当管道关闭而 NSTask 仍然存在时，输出文件被创建并运行。这让我觉得 clang 只是在等待 stdin 关闭。读取数据后有没有办法关闭管道？

对于输出，我尝试使用 NSPipe 的 fileHandleForWriting 作为 -o 的参数，这给出了`[NSConcretePipe fileSystemRepresentation]`无法识别的选择器的错误。我尝试使用 stdout 的文件描述符创建一个文件句柄，以解决相同的错误。我不知道任何重定向它的命令行参数。我尝试使用`|`重定向但无法使其正常工作。如果有任何 unix 魔法可以重定向它，我可以将 stdout 复制到我想要的任何地方。

那么有没有办法在读取所有数据时关闭管道？和重定向铿锵声输出？如果有任何其他方法可以更轻松或更清洁地完成相同的事情，我愿意接受任何实施。对这两个项目的任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:39:32.100

我不清楚您的问题是什么或您尝试了什么。但是，如果您要使用通知从主线程上的管道读取输出并且还希望写入管道，则一种选择是写入另一个线程中的管道。下面的代码基于您的代码，使用 GCD 执行此操作。在本例中为简单起见，二进制文件存放在 /tmp 中：

```
// send a simple program to clang using a GCD task
- (void)provideStdin:(NSFileHandle *)stdinHandle
{
   dispatch_queue_t aQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
   dispatch_async(aQueue, ^{
      [stdinHandle writeData:[@"int main(int argc, char **argv)\n" dataUsingEncoding:NSUTF8StringEncoding]];
      [stdinHandle writeData:[@"{\n" dataUsingEncoding:NSUTF8StringEncoding]];
      [stdinHandle writeData:[@"   write(1, \"hello\\n\", 6);\n" dataUsingEncoding:NSUTF8StringEncoding]];
      [stdinHandle writeData:[@"}\n" dataUsingEncoding:NSUTF8StringEncoding]];
      [stdinHandle closeFile];   // sent the code, close the file (pipe in this case)
   });
}

// read the output from clang and dump to console
- (void) getData:(NSNotification *)notifcation
{
   NSData *dataRead = [[notifcation userInfo] objectForKey:NSFileHandleNotificationDataItem];
   NSString *textRead = [[NSString alloc] initWithData:dataRead encoding:NSUTF8StringEncoding];
   NSLog(@"read %3ld: %@", (long)[textRead length], textRead);
}

// invoke clang using an NSTask, reading output via notifications
// and providing input via an async GCD task
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
   NSTask *task = [NSTask new];

   NSPipe *outputPipe = [NSPipe new];
   [task setStandardOutput:outputPipe];
   [task setStandardError:outputPipe];
   NSFileHandle *outputHandle = [outputPipe fileHandleForReading];

   NSPipe* inPipe = [NSPipe pipe];
   [task setStandardInput:inPipe];

   [task setLaunchPath:@"/usr/bin/clang"];

   [task setArguments:[NSArray arrayWithObjects:@"-o", @"/tmp/clang.out", @"-xc",@"-",nil]];

   [[NSNotificationCenter defaultCenter] addObserver:self 
                                            selector:@selector(getData:) 
                                                name:NSFileHandleReadCompletionNotification 
                                              object:outputHandle];

   [outputHandle readInBackgroundAndNotify];

   [task launch];
   [self provideStdin:[inPipe fileHandleForWriting]];
} 
```

# apache - 没有 index.html 的 Tomcat 显示目录中的文件

> ID：10907907
> 
> 赞同：0
> 
> 时间：2012-06-06T03:44:25.327
> 
> 标签：apache, tomcat, configuration, local

我想知道当 index.html 不在根目录中时，如何让 tomcat 显示目录中的文件？目前它给了我一个错误页面。

```
description The requested resource 
(/Tutorials/ios/exercise-files/Ex_Files_iOS4_Web_Apps/Ch02/) is not available. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T03:48:30.167

打开 Tomcat 自己的`/conf/web.xml`文件（如果你使用 Eclipse，则打开*Servers*`<servlet>`项目中的文件），找到 的条目`DefaultServlet`并将`listings`初始化参数从更改`false`为`true`。

```
<init-param>
    <param-name>listings</param-name>
    <param-value>true</param-value>
</init-param> 
```

### 也可以看看：

*   [Tomcat 7.0 文档 - 默认 servlet](http://tomcat.apache.org/tomcat-7.0-doc/default-servlet.html)

# asp.net-mvc-3 - 验证摘要消息中的链接

> ID：10907908
> 
> 赞同：8
> 
> 时间：2012-06-06T03:44:25.670
> 
> 标签：asp.net-mvc-3, razor

是否可以在验证摘要消息中放置 HTML 链接？例如，如果出现验证错误，我想放置一个指向另一个页面的链接：

```
@Html.ValidationSummary(False, "read <a href=""anotherpage.html"">more</a>") 
```

或者

```
@Html.ValidationSummary(False, "read " &
    Html.ActionLink("more", "helpforerror").ToHtmlString) 
```

但在浏览器中，标签被转义，因此它不会形成链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T08:05:01.913

我知道您已经接受了答案，但我认为我的解决方案更简单，如果您想添加指向现有验证摘要的链接，则需要更少的重写。

您需要在验证消息中添加一个`{0}`类型[格式项](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)，如下所示，它将被您的链接替换。

```
ModelState.AddModelError("", "Some error message with a link here {0}."); 
```

然后在您的视图中调用您的验证摘要，如下所示：

```
@string.Format(Html.ValidationSummary().ToString(), Html.ActionLink("Click Here", "Action_To_Link_To")).ToHtmlString() 
```

在这种情况下，我使用了添加到字符串对象的扩展方法，该方法`.ToHtmlString()`基本上只是将字符串转换为 HtmlString，以防止任何标记被转义。它看起来像这样：

```
public static HtmlString ToHtmlString(this String str)
{
    return new HtmlString(str);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T02:24:58.773

最后我选择了另一种方法：在验证摘要之外创建一个包含链接等的 div，并且仅在 modelstate 无效时添加 div：

```
@If Not ViewData.ModelState.IsValid Then
    @<div>read <a href="anotherpage.html">more</a></div>
End If 
```

[这是受类似问题的回答](https://stackoverflow.com/questions/10267515/show-div-if-unobtrusive-validation-was-invalid-and-hide-it-if-valid-in-mvc-3/10267912#10267912)启发的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-08T17:40:46.837

验证文本在 ValidationSumary 或 ValidationFor 等之前编码...

你只需要你解码 html，然后创建一个 MvcHtmlString ...

例子：

```
@HttpUtility.HtmlDecode(Html.ValidationSummary().ToString()).ToMvcHtmlString() 
```

这是我为制作 MvcHtmlString 所做的扩展：

```
namespace System
{
    public static class StringExtension
    {
        public static System.Web.Mvc.MvcHtmlString ToMvcHtmlString(this string value)
        {
        return System.Web.Mvc.MvcHtmlString.Create(value);
        }
    }
 } 
```

或者，如果您打算重用它，您可以创建一个 HtmlHelper：

```
namespace System.Web.Mvc.Html
{
    public static class FormHelper
    {
        public static MvcHtmlString ValidationSummaryEx(this HtmlHelper htmlHelper, bool excludePropertyErrors)
        {
            var original = htmlHelper.ValidationSummary(excludePropertyErrors);
            var decoded = HttpUtility.HtmlDecode(original.ToString());
            return decoded.ToMvcHtmlString();
        }
    }
} 
```

希望它对您或未来的观众有所帮助。注意：它适用于所有验证 Summary 和 ValidationFor ...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T04:00:31.747

不，默认行为不允许这样做，但您可以自己制作。这就是你需要的：[validationsummary 中的 Html raw](https://stackoverflow.com/questions/7049893/how-to-display-html-elements-like-links-in-errors-rendered-via-html-validationsu)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T12:53:16.590

您可以通过 jquery 检查表单是否有效并使用链接文本更新 div：

```
<div id="divToUpdate">

</div>

$('form').submit(function(){
   if(!this.valid())
       $('#divToUpdate').html("read <a href='anotherpage.html'>more</a>"); 
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-20T17:02:29.177

如果您要在 ModelStateError 中发回 HTML，则可以使用这一行：

```
@Html.Raw(HttpUtility.HtmlDecode(Html.ValidationSummary().ToHtmlString())) 
```

这与@Benoit 的建议非常相似，只是不需要扩展。

# mysql - 使用范围标准对连接表进行 MySQL 优化

> ID：10907910
> 
> 赞同：3
> 
> 时间：2012-06-06T03:44:33.890
> 
> 标签：mysql, query-optimization

我将通过使用一个表中的单个位置连接到另一个表中的范围（由两列表示）来连接两个表。

但是，性能太慢了，大约是 20 分钟。我尝试在表上添加索引或更改查询。但性能仍然很差。

所以，我要求优化加入速度。

* * *

以下是对 MySQL 的查询。

```
mysql> SELECT `inVar`.chrom, `inVar`.pos, `openChrom_K562`.score
    -> FROM `inVar`
    -> LEFT JOIN `openChrom_K562`
    -> ON (
    -> `inVar`.chrom=`openChrom_K562`.chrom AND
    -> `inVar`.pos BETWEEN `openChrom_K562`.chromStart AND `openChrom_K562`.chromEnd
    -> ); 
```

`inVar`并且`openChrom_K562`是我使用的表。

`inVar`存储每行中的单个位置。

`openChrom_K562`存储由`chromStart`和指示的范围信息`chromEnd`。

`inVar`分别包含 57902 行和`openChrom_K562`137373 行。

* * *

表上的字段。

```
mysql> DESCRIBE inVar;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| chrom | varchar(31) | NO   | PRI | NULL    |       |
| pos   | int(10)     | NO   | PRI | NULL    |       |
+-------+-------------+------+-----+---------+-------+

mysql> DESCRIBE openChrom_K562;
+------------+-------------+------+-----+---------+-------+
| Field      | Type        | Null | Key | Default | Extra |
+------------+-------------+------+-----+---------+-------+
| chrom      | varchar(31) | NO   | MUL | NULL    |       |
| chromStart | int(10)     | NO   | MUL | NULL    |       |
| chromEnd   | int(10)     | NO   |     | NULL    |       |
| score      | int(10)     | NO   |     | NULL    |       |
+------------+-------------+------+-----+---------+-------+ 
```

* * *

表内建索引

```
mysql> SHOW INDEX FROM inVar;
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| inVar |          0 | PRIMARY  |            1 | chrom       | A         |        NULL |     NULL | NULL   |      | BTREE      |         |
| inVar |          0 | PRIMARY  |            2 | pos         | A         |       57902 |     NULL | NULL   |      | BTREE      |         |
+-------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+

mysql> SHOW INDEX FROM openChrom_K562;
+----------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table          | Non_unique | Key_name    | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+----------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| openChrom_K562 |          1 | start_end   |            1 | chromStart  | A         |      137373 |     NULL | NULL   |      | BTREE      |         |
| openChrom_K562 |          1 | start_end   |            2 | chromEnd    | A         |      137373 |     NULL | NULL   |      | BTREE      |         |
| openChrom_K562 |          1 | chrom_only  |            1 | chrom       | A         |          22 |     NULL | NULL   |      | BTREE      |         |
| openChrom_K562 |          1 | chrom_start |            1 | chrom       | A         |          22 |     NULL | NULL   |      | BTREE      |         |
| openChrom_K562 |          1 | chrom_start |            2 | chromStart  | A         |      137373 |     NULL | NULL   |      | BTREE      |         |
| openChrom_K562 |          1 | chrom_end   |            1 | chrom       | A         |          22 |     NULL | NULL   |      | BTREE      |         |
| openChrom_K562 |          1 | chrom_end   |            2 | chromEnd    | A         |      137373 |     NULL | NULL   |      | BTREE      |         |
+----------------+------------+-------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

* * *

MySQL上的执行计划

```
mysql> EXPLAIN SELECT `inVar`.chrom, `inVar`.pos, score  FROM `inVar`  LEFT JOIN `openChrom_K562`  ON ( inVar.chrom=openChrom_K562.chrom AND  `inVar`.pos BETWEEN chromStart AND chromEnd );
+----+-------------+----------------+-------+--------------------------------------------+------------+---------+-----------------+-------+-------------+
| id | select_type | table          | type  | possible_keys                              | key        | key_len | ref             | rows  | Extra       |
+----+-------------+----------------+-------+--------------------------------------------+------------+---------+-----------------+-------+-------------+
|  1 | SIMPLE      | inVar          | index | NULL                                       | PRIMARY    | 37      | NULL            | 57902 | Using index |
|  1 | SIMPLE      | openChrom_K562 | ref   | start_end,chrom_only,chrom_start,chrom_end | chrom_only | 33      | tmp.inVar.chrom |  5973 |             |
+----+-------------+----------------+-------+--------------------------------------------+------------+---------+-----------------+-------+-------------+ 
```

它似乎只能通过查看`chrom`两个表来优化。然后在表格中进行蛮力比较。

有没有办法做进一步的优化，比如索引位置？

*（这是我第一次发布问题，对于糟糕的发布质量感到抱歉。）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T03:54:23.717

`chrom_only`由于您只有 chrom 22 值，因此可能是您的联接的错误索引选择。

如果我已经正确解释了这一点，那么如果使用查询应该会更快`start_end`

```
SELECT `inVar`.chrom, `inVar`.pos, `openChrom_K562`.score
FROM `inVar`
LEFT JOIN `openChrom_K562`
USE INDEX (`start_end`)
ON (
`inVar`.chrom=`openChrom_K562`.chrom AND
`inVar`.pos BETWEEN `openChrom_K562`.chromStart AND `openChrom_K562`.chromEnd
) 
```

# c# - 我无法显示通过 form1Load 填充的数组。将运行没有错误，但不会运行

> ID：10907914
> 
> 赞同：-3
> 
> 时间：2012-06-06T03:45:04.823
> 
> 标签：c#, csharpcodeprovider

```
public partial class Form1 : Form       
{

    DateTime[] birth = new DateTime[20];
    Person[] People = new Person[20];

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {          

        // Create a class Person with the following fields _firstname, _lastname, _birthDate(DateTime Type) Add constructor, properties (get only) and a method GetAge that returns the age (int) of a person. 
        // In Form1, Create an array of Person objects to hold 20 people
        // In Form1_Load: Populate the array with 20 Person objects

        // Add Gui to display all the people in the list (first and last names, birthdate, and age
        // Add Gui 
        //people[0] = new Person("John","Stockton", DateTime.)

        string[] first = new string[20] { "Scott", "Ramona", "Todd", "Melissa", "Naomi", "Leland", "Conor", "Julie", "Armondo", "Leah",
                                          "Frank", "Peter", "Ila", "Mandy", "Sammy", "Gareth", "Garth", "Wayne", "Freddy", "Mark" };

        string[] last = new string[20] { "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Kennedy", "Carrel", "MaloyTheBeautiful", "Johnson", "Smith", 
                                         "Sinatra", "Clemens", "Eels", "Johnson", "Eels", "Thompson", "Brooks", "World", "Crugar", "Thomas" };

        birth[0] = new DateTime(1987, 22, 7);
        birth[1] = new DateTime(1962, 15, 9);
        birth[2] = new DateTime(1984, 21, 4);
        birth[3] = new DateTime(1977, 24, 1);
        birth[4] = new DateTime(1983, 12, 8);
        birth[5] = new DateTime(1979, 14, 1);
        birth[6] = new DateTime(1965, 19, 9);
        birth[7] = new DateTime(1968, 21, 2);
        birth[8] = new DateTime(1980, 22, 7);
        birth[9] = new DateTime(1982, 20, 7);
        birth[10] = new DateTime(1984, 19, 4);
        birth[11] = new DateTime(1968, 11, 9);
        birth[12] = new DateTime(1968, 21, 8);
        birth[13] = new DateTime(1975, 5, 2);
        birth[14] = new DateTime(1945, 15, 3);
        birth[15] = new DateTime(1969, 14, 6);
        birth[16] = new DateTime(1987, 141, 4);
        birth[17] = new DateTime(1976, 23, 5);
        birth[18] = new DateTime(1989, 28, 6);
        birth[19] = new DateTime(1988, 23, 9);        

        // Populate Array Person[] People = new Person[20];   
        for (int i = 0; i < People.Length; i++)
        {
            People[i]= new Person(first[i], last[i], birth[i]);
        }

    }

    private void btnDisAll_Click(object sender, EventArgs e)
    {
        try
        {
            for (int i = 0; i < People.Length; i++)
            { 
```

这是我需要帮助的地方 显示我通过 form1 填充的数组

```
 displayMessage("Name: " + People[i].Firstname + People[i].Lastname + " BirthDate: " + People[i].Birthdate.Year + People[i].Birthdate.Day + People[i].Birthdate.Month +  "\n\n");
                //richTxtDisplay.AppendText(People[i].ToString());
                //richTxtDisplay.AppendText(People[i].Firstname + People[i].Lastname + People[i].Birthdate + "\n");
            }
        }
        catch
        { }
    }

    private void btnGetAge_Click(object sender, EventArgs e)
    {
        int Birth = int.Parse(textBox1.Text);

    }
    public void displayMessage(string message)
    {
        // Void Method
        MessageBox.Show(message);
    }
    public void displayRichTxtMessAppendText(string message)
    {
        // Void Method
        richTxtDisplay.AppendText(message);
    }
} 
```

我的班级是Person ..

```
 public class Person
 {

        private string _firstname;
        private string _lastname;
        private DateTime _birthdate;

        public Person(string firstname, string lastname, DateTime birthdate)
        {
           _firstname = firstname;
           _lastname = lastname;
           _birthdate = birthdate;
        }
        public string Firstname
        { get { return _firstname; } }

        public string Lastname
        { get { return _lastname; } }

        public DateTime Birthdate
        { get { return _birthdate; } }

        public int getAge()
        {
            TimeSpan ts =
                DateTime.Now - _birthdate;
            int year = (int)ts.TotalDays / 365;
            return year;

        }
        public int daysUntillBirthDate()
        {
            int age = getAge();
            DateTime proximobirthday = _birthdate.AddYears(age + 1);
            TimeSpan ts = proximobirthday - DateTime.Now;

            return ts.Days;
        }        
} 
```

我已经用名字、姓氏和出生日期标记了显示数组的位置。我没有任何错误，它不会显示任何内容，我可以单击按钮多次显示，它不会破坏我的代码。我不记得要使用哪种格式豁免，但 try catch 应该足够好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:09:45.493

您的初始化日期错误

```
new DateTime(1987, 22, 7); // month can't be 22! 
```

格式应为年、月和日。

这行不通，请纠正。这是唯一的问题。

这是 DateTime 的构造函数签名

```
public DateTime(int year, int month, int day); 
```

# android - 如何为 OnItemClick 方法提供正确的上下文以正常运行？

> ID：10907915
> 
> 赞同：0
> 
> 时间：2012-06-06T03:45:09.683
> 
> 标签：android, onitemclicklistener

我有这个代码：

```
list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Cursor cursor = databaseHelper.getAgendaToEdit(id);
            Intent intent = new Intent(view.getContext(), EditAgendaActivity.class);
            cursor.moveToFirst();
            intent.putExtra("id", cursor.getString(0));
            startActivity(intent);
        }
    }); 
```

错误是：

```
java.lang.InstantiationException: can't instantiate class com.zeroe.EditAgendaActivity; no empty constructor 
```

目标是在单击列表中的项目时开始一个新活动。我从我的主要活动中调用此方法，其中

```
list 
```

也是来自。我认为问题出在我没有从 ListView 所在的位置获取上下文这一事实。问题是它应该工作，因为我提供了正确的上下文，至少我假设。任何帮助将非常感激。

如果有人需要我澄清，请告诉我，我会立即这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:49:24.967

您的`Activity`子类都需要一个默认构造函数。显然`EditAgendaActivity`没有。这就是问题所在，而不是您发布的代码。

通常，您应该只有一个`Activity`子类的默认（无参数）构造函数或根本没有构造函数（并让编译器为您生成一个无参数构造函数）。

# java - 尝试释放 WakeLock 时强制关闭？

> ID：10907916
> 
> 赞同：1
> 
> 时间：2012-06-06T03:45:35.723
> 
> 标签：java, android, screen, wakelock

我有一个按钮，当您单击它时，它会打开 WakeLock，而且效果很好！但是，当您再次单击它时，它会关闭 WakeLock，但它只会使应用程序崩溃！任何帮助将不胜感激，我知道这不是因为我正在更改图像，因为那部分工作正常！:) 这是我的代码：

```
PowerManager.WakeLock wl; //This is before my oncreate
int stayAwake = 0; //This is before my oncreate

   ((Button) findViewById(R.id.sleepLock)).setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
    PowerManager pm = (PowerManager) getSystemService (Context.POWER_SERVICE); 
    wl = pm.newWakeLock (PowerManager.FULL_WAKE_LOCK, "My Tag"); 
        if (stayAwake == 0) {
        ((Button) findViewById(R.id.sleepLock)).setBackgroundResource(R.drawable.awake);
        stayAwake = 1;
        wl.acquire();
        }else {
            ((Button) findViewById(R.id.sleepLock)).setBackgroundResource(R.drawable.sleep);
            stayAwake = 0;
            wl.release();
        }

        // TODO Auto-generated method stub

    }
}); 
```

日志猫：

```
06-06 00:44:25.206: W/dalvikvm(3855): threadid=1: thread exiting with uncaught exception (group=0x40a031f8)
06-06 00:44:25.230: E/AndroidRuntime(3855): FATAL EXCEPTION: main
06-06 00:44:25.230: E/AndroidRuntime(3855): java.lang.RuntimeException: WakeLock under-locked My Tag
06-06 00:44:25.230: E/AndroidRuntime(3855):     at android.os.PowerManager$WakeLock.release(PowerManager.java:325)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at android.os.PowerManager$WakeLock.release(PowerManager.java:300)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at com.something.something.SavedGame$5.onClick(SavedGame.java:259)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at android.view.View.performClick(View.java:3511)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at android.view.View$PerformClick.run(View.java:14105)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at android.os.Handler.handleCallback(Handler.java:605)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at android.os.Looper.loop(Looper.java:137)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at java.lang.reflect.Method.invokeNative(Native Method)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at java.lang.reflect.Method.invoke(Method.java:511)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
06-06 00:44:25.230: E/AndroidRuntime(3855):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:14:19.400

当您释放锁定时，您的按钮没有任何参考，因为您再次重新初始化按钮并且没有设置 clickListener

更改您的代码

```
Button btn=(Button) findViewById(R.id.sleepLock);
PowerManager.WakeLock wl; //This is before my oncreate
int stayAwake = 0; //This is before my oncreate

btn.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        PowerManager pm = (PowerManager) getSystemService (Context.POWER_SERVICE); 
        wl = pm.newWakeLock (PowerManager.FULL_WAKE_LOCK, "My Tag"); 
        if (stayAwake == 0) {
            btn.setBackgroundResource(R.drawable.awake);
            stayAwake = 1;
            wl.acquire();
        } else {
            btn.setBackgroundResource(R.drawable.sleep);
            stayAwake = 0;
            wl.release();
        }
    }
}); 
```

现在你的代码可以正常工作了

# python - Python numpy添加错误

> ID：10907917
> 
> 赞同：6
> 
> 时间：2012-06-06T03:45:36.510
> 
> 标签：python, numpy

我在 python 中使用基本的快捷方法遇到了一个非常奇怪的错误。看来，除非我非常愚蠢，否则我会得到不同的 A = A + B 和 A += B 值。这是我的代码：

```
def variance(phi,sigma,numberOfIterations):
    variance = sigma
    for k in range(1,numberOfIterations):
        phik = np.linalg.matrix_power(phi,k)
        variance = variance + phik*sigma*phik.T
    return variance 
```

这基本上只是计算向量自回归的协方差。因此对于：

```
phi    = np.matrix('0.7 0.2 -0.1; 0.001 0.8 0.1; 0.001 0.002 0.9')
sigma  = np.matrix('0.07 0.01 0.001; 0.01 0.05 0.004; 0.001 0.004 0.01') 
```

我得到：

```
variance(phi,sigma,10) = 
[[ 0.1825225   0.07054728  0.00430524]
 [ 0.07054728  0.14837229  0.02659357]
 [ 0.00430524  0.02659357  0.04657858]] 
```

我相信这是正确的（同意 Matlab）。现在，如果我将上面的行更改为

```
variance += phik*sigma*(phik.T) 
```

我得到：

```
variance(phi,sigma,10) =
[[ 0.34537165  0.20258329  0.04365378]
 [ 0.20258329  0.33471052  0.1529369 ]
 [ 0.04365378  0.1529369   0.19684553]] 
```

这是怎么回事？

非常感谢

担

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T04:06:15.287

罪魁祸首是：

```
variance = sigma 
```

如果您将其更改为：

```
variance = sigma.copy() 
```

你会看到正确的结果。

这是因为`+=`实际上执行了（更有效的）就地添加......并且由于两者都`variance`引用`sigma`相同的数组，*因此两者都*将被更新。例如：

```
>>> sigma = np.array([1])
>>> variance = sigma
>>> variance += 3
>>> sigma
array([4]) 
```

# c# - 如何在 C# 中使用 Powershell 创建变量

> ID：10907923
> 
> 赞同：3
> 
> 时间：2012-06-06T03:46:32.120
> 
> 标签：c#, powershell

尝试在 C# 的 powershell 中执行以下操作

```
$certThumbrint = "someLocationToACert"
$cert = get-item $certThumbrint

Get-RoleInstanceCount -ServiceName "someServiceName" -DeploymentSlot "someSlot" -RoleName "someRole" -SubscriptionId "someId" -Certificate $cert 
```

在 powershell 命令行中一一运行它们时，这非常有效。但我无法弄清楚如何通过代码来做到这一点。到目前为止，我已经做到了。

```
Pipeline pipeline = runspace.CreatePipeline();

pipeline.Commands.Add("$certThumbrint = \"someLocationToACert\"");
pipeline.Commands.Add(@"$cert = get-item $certThumbrint");

Command instanceCount = new Command("Get-RoleInstanceCount");
instanceCount.Parameters.Add(new CommandParameter("ServiceName", "someServiceName"));
....
instanceCount.Parameters.Add(new CommandParameter("Certificate", "$cert")); 
```

然后我得到以下异常：

> “术语 '$certThumbrint = “someLocation”' 未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。请检查名称的拼写，或者如果包含路径，请验证路径是否正确然后再试一次。

我尝试将变量添加为“AddScrips”，我也使用了

```
SessionStateVariableEntry var2 = new SessionStateVariableEntry("cert", "get-item $certThumbrint", "Initial session state MyVar1 test");
initialSessionState.Variables.Add(var2); 
```

在创建运行空间之前。没有任何工作。还将所有代码添加到字符串中并尝试将其作为脚本运行。

我实际上没有办法做到这一点，感觉这是一件必须能够做到的非常简单的事情......谢谢。

编辑：还尝试了以下方法：

```
 const string getInstanceCountScript = "$certThumbrint = \"somecert\" \n " + 
                                              "$cert = get-item $certThumbrint \n " +
                                              "Get-RoleInstanceCount -ServiceName someservicename" +
                                                                     ...
                                                                   " -Certificate $cert";

pipeline.Commands.AddScript(getInstanceCountScript); 
```

它运行但返回一个空字符串。如果我将相同的代码放入我用“Add()”调用的 ps1 文件中，它就会运行并给我正确的输出。但我真的不想在我的项目中加载 ps1 文件，只需要 3 行或更少的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:13:33.333

这段代码非常适合我。你确定，那个 PS1 文件包含完全相同的代码吗？

```
 static void Main(string[] args)
            {

                using (Runspace rs = RunspaceFactory.CreateRunspace())
                {

                    rs.Open();
                    var pipeline = rs.CreatePipeline();
                    pipeline.Commands.AddScript("$certThumbrint = \"c:\\1.txt\"\n" +
                                                "$cert = get-item $certThumbrint\n" +
                                                "Get-Content $cert");

                    foreach (var s in pipeline.Invoke())
                    {
                        Console.WriteLine(s);

                    }

                }
                Console.ReadLine();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:29:47.793

看一下`New-Variable`命令行开关。

# javascript - 运行 Web Socket 客户端编程

> ID：10907927
> 
> 赞同：0
> 
> 时间：2012-06-06T03:47:38.387
> 
> 标签：javascript, html, websocket

我刚刚阅读了有关 Web 套接字的内容并编写了这个简单的客户端 Java 脚本。但即使我在 Chrome 浏览器上运行并且我不知道 FAULT 是什么，它也没有给我任何输出？可能是 google.com 不支持 Web 套接字？

```
<!DOCTYPE html>
<html>
<head>
    <title>Web socket Experiment</title>
    <script type="text/javascript">
        function callWebSocket() {

            var socket = new WebSocket("ws://www.google.com");

            socket.onopen = function () {
                alert("Hello, Connected To WS server");
            };

            socket.onmessage = function (e) {
                alert("The message received is : " + e.data);
            };
            socket.onerror = function (e) {
                alert("An error occured while connecting... " + e.data);
            };
            socket.onclose = function () {
                alert("hello.. The coonection has been clsoed");
            };

        }
    </script>
</head>

<body>
    <input type="button" value="Open Connecton" onclcik="callWebSocket()" />
</body>
</html> 
```

请帮忙..

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:03:45.097

您`onclcik`在输入按钮中输入错误。除此之外，您的代码应该可以正常工作，除了他的评论中提到的 minitech，我认为 google 目前没有供您使用的网络套接字脚本设置。尝试制作自己的服务器端脚本来指向，或搜索现有的第 3 方站点示例来玩（例如，快速谷歌搜索，我找到了 ws://echo.websocket.org，我尝试了你的代码，它工作，除了错字）

# git - 如何在 gitlabhq 中通过 Web 界面在线接受合并请求？

> ID：10907928
> 
> 赞同：7
> 
> 时间：2012-06-06T03:47:48.717
> 
> 标签：git, gitlab

我使用 gitlabhq 2.5，我的团队成员签出一个名为的本地分支`feature1`并添加一些功能，然后推送到远程源`feature1`分支。

他在“合并请求”选项卡中创建了一个合并请求，但我无法合并他的请求。有一条警告消息显示“正在检查自动合并的能力...”

问题是什么？有什么我没有设置正确的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T04:18:52.883

我自己找到了答案：

```
rake gitlab:app:enable_automerge RAILS_ENV=production 
```

我从生产日志中找到了原因。

# java - java - 如何实现Java windows服务包装器YAJSW的停止和启动逻辑？

> ID：10907933
> 
> 赞同：0
> 
> 时间：2012-06-06T03:48:27.140
> 
> 标签：java, windows, service

我正在与 YAJSW 合作，将 Java 应用程序包装到 Windows 服务中。它适用于启动应用程序，但我想知道如何在 java 应用程序中实现逻辑，以便当我停止服务时，它会在 java 应用程序中执行该逻辑。

像在我的 java 应用程序中实现 onStart() 和 onStop() 方法这样我可以在启动或停止 java 服务时调用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:20:12.627

您可以在作为应用程序入口点的 main 方法中调用 onStart() 方法/逻辑。为了实现 onStop()，我们就是这样做的……

步骤1）创建以下类...

```
public class ShutdownHandler implements Runnable {
    public ShutdownHandler() {
        super();
    }
    @Override
    public void run() {
        // call to your onStop() or code right here;
    }
} 
```

step-2) 在 main 方法里面...

```
Thread shutdownThread = new Thread(new ShutdownHandler());
Runtime.getRuntime().addShutdownHook(shutdownThread); 
```

这将在您的 java 应用程序终止时调用 ShutdownHandler 的 run 方法。希望这可以帮助。

# jquery - dojo可以绑定用户自定义事件吗？

> ID：10907935
> 
> 赞同：3
> 
> 时间：2012-06-06T03:48:37.547
> 
> 标签：jquery, event-handling, dojo, jquery-events

我使用dojo 1.7版本，我想绑定用户定义的事件，在jQuery中我可以这样做：

```
$(window).bind("pushMessage",function(){}); 
```

然后像这样触发事件：

```
$(window).trigger("pushMessage",{}); 
```

dojo 能得到和上面一样的结果吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T05:01:33.723

是的，它可以通过[`dojo/on`](http://livedocs.dojotoolkit.org/dojo/on)：

```
on(window, "pushMessage", function(event) {});

on.emit(window, "pushMessage", {
    bubbles: true,
    cancelable: true
}); 
```

看看它在行动：http: [//jsfiddle.net/phusick/MQThM/](http://jsfiddle.net/phusick/MQThM/)

还有[`dojo/Evented`](http://livedocs.dojotoolkit.org/dojo/Evented)一个类可以用作发出自己的事件的 JavaScript 类的基类或 mixin。文档中的一个示例：

```
require([
    "dojo/_base/declare",
    "dojo/Evented"
], function(
    declare,
    Evented
) {

    var MyComponent = declare([Evented], {
        startup: function() {
            this.emit("ready", {});
        }            
    });

    var component = new MyComponent();
    component.on("ready", function() {
        console.log("Component is ready.");        
    });

    component.startup();

});​ 
```

也在 jsFiddle 玩：http: [//jsfiddle.net/phusick/ZhG58/](http://jsfiddle.net/phusick/ZhG58/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T15:34:28.800

如果您想发布/订阅全局事件，您可能会发现[dojo/topic](http://dojotoolkit.org/reference-guide/1.8/dojo/topic.html)很有帮助。

# many-to-many - 如何在redis中建立多对多关系

> ID：10907942
> 
> 赞同：20
> 
> 时间：2012-06-06T03:49:18.460
> 
> 标签：many-to-many, redis

在关系数据库中，我有一个用户表、一个类别表和一个用户类别表，它们执行多对多关系。

这个结构在 Redis 中的形式是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-06T15:51:26.750

使用 Redis，关系通常由集合表示。集合可用于表示单向关系，因此每个对象需要一个集合来表示多对多关系。

尝试将关系数据库模型与 Redis 数据结构进行比较是毫无用处的。使用 Redis，一切都以非规范化的方式存储。例子：

```
# Here are my categories
> hset category:1 name cinema  ... more fields ...
> hset category:2 name music   ... more fields ...
> hset category:3 name sports  ... more fields ...
> hset category:4 name nature  ... more fields ...

# Here are my users
> hset user:1 name Jack   ... more fields ...
> hset user:2 name John   ... more fields ...
> hset user:3 name Julia  ... more fields ...

# Let's establish the many-to-many relationship
# Jack likes cinema and sports
# John likes music and nature
# Julia likes cinema, music and nature

# For each category, we keep a set of reference on the users
> sadd category:1:users 1 3
> sadd category:2:users 2 3
> sadd category:3:users 1
> sadd category:4:users 2 3

# For each user, we keep a set of reference on the categories
> sadd user:1:categories 1 3
> sadd user:2:categories 2 4
> sadd user:3:categories 1 2 4 
```

一旦我们有了这个数据结构，就很容易使用集合代数来查询它：

```
# Categories of Julia
> smembers user:3:categories
1) "1"
2) "2"
3) "4"

# Users interested by music
> smembers category:2:users
1) "2"
2) "3"

# Users interested by both music and cinema
> sinter category:1:users category:2:users
1) "3" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T03:51:50.630

恕我直言，Redis 不是用于进行结构化查询（SQL），而是用于快速访问数据，您可以这样做：创建一个以 user_id 为键的“表”，例如，数据是一个包含朋友的列表。然后您查询 user_id 并处理您需要的内容。这与标准化相反。如果数据的顺序很重要，例如状态更新，您所做的就是将数据推送和弹出到列表中。例如，表“status”以 user_id 作为键，数据是一个列表。例如，您 lpush 数据，然后查询最后 20 个元素。

# c++ - 为多线程场景重构单线程 GUI 代码

> ID：10907946
> 
> 赞同：3
> 
> 时间：2012-06-06T03:49:45.910
> 
> 标签：c++, multithreading, user-interface, marshalling

通常情况下，有一个 MFC/Win32/WTL/wxWidgets/Qt 应用程序可以做一些有用的事情。它被设计为单线程的，并且有一些逻辑可以处理处理块中的错误/问题。

因此，在某个类的深处，可以触发一个对话框，询问用户“您确定要完成操作吗？”/“文档布局错误”或类似的东西。

问题是对话框是从计算量大/简单的代码中触发的。像 FFT/图像锐化/文件系统碎片整理功能，或类似的东西。如果不是 GUI，它可以很容易地在工作线程中启动。并且更适合那里，因为它可以避免对用户来说如此烦人的 GUI 停顿。

然而，GUI 不能在工作线程中工作，并且依赖注入几乎是不可能的，因为它会经过几层计算代码。从类接口的角度来看，这是一种非常不干净的方式，比如`someclass instance(data_in, data_out, param1, param2, GUI_class_ref) : m_GUI(GUI_class_ref), ...`3 级或更多级别。

如果代码被拆分为多个线程，是否有此类场景的模式/清单可用于将 GUI 提示编组回主线程并将结果返回到计算代码的核心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T05:03:40.833

您可以创建同步上下文。它是由主线程执行的命令队列。工作线程将命令添加到此队列（必须锁定以进行单线程访问）并等待。主线程定期处理此队列，执行命令（例如，“取消操作”对话框）并通知工作线程有关结果。
在 C# 中，这是通过委托和调用它们的参数来完成的。在 C++ 中，您可以使用要在开关中处理的枚举编码消息（如 Windows 程序中的消息）。或者使用指向成员函数的指针 + 对象指针以从 + 参数调用它们来创建一些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:25:08.673

您正处于一个经典的旧代码重构十字路口。适当的隔离和依赖注入是不可行的，因此您只能让 GUI 上下文全局可访问。那就是创建一个单例。它不一定需要直接作为 GUI 上下文，因此至少可以实现一些隔离。它可以是某种具有 GUI 上下文并仅接受来自计算代码的特定目的调用的管理器。您可以使 GUI 线程类成为该管理器的朋友，并使 GUI 回调（在关闭对话框时）私有。

当我经历完全相同的挑战（现有重型应用程序的线程化）时，我可以给出更具体的想法。但是我很困惑您是否只希望 GUI 线程自由运行，或者也希望后台计算。您给出的示例对话框提示令人困惑，因为它建议需要回答一个决定，以了解是否继续（这意味着计算处于暂停状态）。

# ruby-on-rails - 即使电子邮件不是空白的，Devise 也会给我一个“电子邮件不能为空白”的错误

> ID：10907947
> 
> 赞同：3
> 
> 时间：2012-06-06T03:49:57.110
> 
> 标签：ruby-on-rails, devise

我在 Devise 的用户注册中做了两件事。

1.  [两步确认](https://github.com/plataformatec/devise/wiki/How-To%3a-Two-Step-Confirmation)- 用户需要做的就是首先输入他们的电子邮件地址。
2.  我已将注册/新表格移至我的`welcome#index`视图。

即使我正确输入了电子邮件地址，并且我看到它包含在`params`日志的哈希中：

```
Started POST "/users" for 127.0.0.1 at 2012-06-05 20:35:43 -0500
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"0qWg/RxG+XyDqdsdadww=", "email"=>"abc@test.com", "commit"=>"Sign Me Up!"}
   (0.1ms)  begin transaction
  User Exists (0.2ms)  SELECT 1 FROM "users" WHERE LOWER("users"."email") = LOWER('') LIMIT 1
   (0.1ms)  rollback transaction
  Rendered devise/registrations/new.html.erb within layouts/application (9.2ms)
Completed 200 OK in 65ms (Views: 54.9ms | ActiveRecord: 0.0ms) 
```

这是我得到的错误：

```
1 error prohibited this user from being saved:
Email can't be blank 
```

我的初始注册表如下所示：

```
<%= form_for(resource, :as => resource_name, :class => "send-with-ajax", :url => user_registration_path(resource)) do |f| %>
            <%= devise_error_messages! %>
              <%= f.email_field :email, :name => :email, :id => "form-email", :placeholder => "your-email@address.com", :input_html => {:autofocus => true} %>
              <%= f.submit :label => "Submit", :value => "Sign Me Up!"  %>
          <% end %> 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T04:01:33.210

可能的解释：

您的电子邮件字段在`params`哈希中`params[:email]`，而您在控制器中的创建操作可能期望它在`params[:resource][:email]`. 删除`:name => :email`作业后，电子邮件将移回`params[:resource][:email]`。

您已发布此哈希：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"0qWg/RxG+XyDqdsdadww=", "email"=>"abc@test.com", "commit"=>"Sign Me Up!"} 
```

你能看出它在工作时的样子有什么不同吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:55:05.983

我只是想通了，似乎`:name`我的电子邮件字段表单助手中的属性导致了问题。

这是原始字段：

```
<%= f.email_field :email, :name => :email, :id => "form-email", :placeholder => "your-email@address.com", :input_html => {:autofocus => true} %> 
```

我将其更改为：

```
<%= f.email_field :email, :id => "form-email", :placeholder => "your-email@address.com", :input_html => {:autofocus => true} %> 
```

这解决了它，但我不知道为什么。

# .net - 用于存储密码并随后检索的字符串加密

> ID：10907948
> 
> 赞同：2
> 
> 时间：2012-06-06T03:50:04.880
> 
> 标签：.net, encryption, encryption-symmetric

我需要将密码作为加密字符串存储在 XML 文件中，并且能够再次将其拉出。快速浏览一下[System.Security.Cryptography 命名空间](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aspx)会发现许多选项，其中一些是散列和一些加密。

这是我第一次进行任何类型的字符串加密（值再次被拉回），我期待这样的事情：

```
string plainTextPassword = "mypassword";
string myKey = "some key that people are unlikely to guess";
string encryptedPassword = SomeObject.Encrypt(myKey, plainTextPassword);
// ... write encryptedPassword to xml file ... 
```

和

```
// ... read encryptedPassword from xml file ...
string decryptedPassword = SomeObject.Decrypt(myKey, encryptedPassword); 
```

但是当我查看命名空间时，那里也有提供散列的服务，而不是纯粹的加密。我还注意到许多其他问题更多地与散列（或至少一种方式加密）有关，并且并不特别关注事后检索字符串。

我绝对想要的不仅仅是散列密码。我应该从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:16:13.163

这篇 CodeProject 文章将回答您的所有问题，并提供代码片段来帮助您解决问题： http: [//www.codeproject.com/Articles/10154/NET-Encryption-Simplified](http://www.codeproject.com/Articles/10154/NET-Encryption-Simplified)

代码示例是 VB.NET（刚刚注意到），但很容易转换为 C#。注意哈希是如何与加密技术一起使用的，它们不是加密。

这是使用 Rijndael 的代码示例：http: [//kiranpatils.wordpress.com/2008/03/13/encryptiondecryption-helper-class-using-rijandelmanaged/](http://kiranpatils.wordpress.com/2008/03/13/encryptiondecryption-helper-class-using-rijandelmanaged/)它的实现方式对于加密的“强度”来说很糟糕，但会有所进展很快（希望如此。）

# ruby-on-rails - rails 3.1 sphinx search hosting *thinking sphinx*

> ID：10907951
> 
> 赞同：0
> 
> 时间：2012-06-06T03:50:34.013
> 
> 标签：ruby-on-rails, hosting, sphinx

首先，我是狮身人面像搜索的忠实粉丝。感谢狮身人面像。

现在我的问题是，

我们已经准备好使用 sphinx 搜索进行全文搜索的 rails 3.1 应用程序。

现在，我知道 Heroku 在 Rails 托管方面是最好的。我听说它不支持 sphinxsearch。

如果你们中的任何人知道使用 sphinx 搜索托管 rails 3.1 应用程序的正确位置，请指导我。

我将提到我在我的 gem 文件中列出的 rails 3.1 应用程序中使用的其他东西。

```
#############################################################
source ' http://rubygems.org '

gem 'rails', '3.1.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'
gem 'execjs'
gem 'therubyracer'
gem 'thinking-sphinx', '2.0.10'
gem "gritter", "1.0.1"
# Gems used only for assets and not required
# in production environments by default.
group :assets do
    gem 'sass-rails', '~> 3.1.4'
    gem 'coffee-rails', '~> 3.1.1'
    gem 'uglifier', '>= 1.0.3'
end
gem 'will_paginate', '3.0.pre2'
gem 'jquery-rails'
gem 'client_side_validations'
gem "bcrypt-ruby", :require => "bcrypt"
############################################################# 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:56:42.887

实际上，Heroku 确实通过[Flying Sphinx](https://addons.heroku.com/flying_sphinx)插件支持 Sphinx。否则，任何体面的 VPS 都应该适合您。[尤其是Linode](http://www.linode.com)，有着相当不错的声誉。

# iphone - 如何停止一个子视图覆盖另一个

> ID：10907952
> 
> 赞同：0
> 
> 时间：2012-06-06T03:50:39.277
> 
> 标签：iphone, ios, addsubview

我有两个加载的子视图。一个是视图控制器内的选项卡栏，它在相当早的时候被加载，第二个是按下选项卡栏项目时出现的视图。

但是，当添加此子视图时，它会加载到选项卡栏子视图上。. 有没有办法把这些东西带到前面或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:56:33.720

有很多方法可供选择...请参阅[UIView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)中的**管理视图层次结构部分**

# http - HTTP请求和查询字符串与标头？

> ID：10907954
> 
> 赞同：11
> 
> 时间：2012-06-06T03:50:52.410
> 
> 标签：http, rest

我试图了解查询字符串和标头之间的区别。你在哪里使用每个？

我想查询字符串在使 URL 可读性方面可能更有用，但除此之外，将它嵌入到您自己的自定义 HTTP 标头中不是更容易吗（附带问题，但这与 cookie 有什么关系？）？两者有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T04:00:45.910

请参阅类似的问题[添加自定义 HTTP 标头](https://stackoverflow.com/questions/581383/adding-custom-http-headers-using-javascript)

为什么我更喜欢查询字符串而不是 http-header 字段？

1.  这很容易
2.  我不需要任何额外的 API
3.  当涉及到标头字段时， [HTTP-RFC](https://www.rfc-editor.org/rfc/rfc2616#page-31)还建议 “遵循通用形式”。

# android - 无法更新 SQLite 上的特定列

> ID：10907960
> 
> 赞同：-2
> 
> 时间：2012-06-06T03:52:16.603
> 
> 标签：android, sqlite

我一直在尝试更新我的数据库中名为 COLUMN_NAME_PERIOD_END 的列，但似乎无法更新。

```
String[] endDate = new String[1];
endDate[0] = paraPeriodDetailsPojoObj.getPeriodEndDate();

Log.d("PeriodEnd.onClick()", "Date: " + endDate[0]);

/*UPDATE table_name
SET column1=value, column2=value2,...
WHERE some_column=some_value
*/

sqliteDatabase.update(DBStorage.TABLE_NAME_PERIODSTART, contentValues, DBStorage.COLUMN_NAME_PERIOD_END+"=?", endDate); 
```

没有显示错误消息，所以我想是我的更新语句有错误。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T06:44:44.177

从文档：

```
update(String table, ContentValues values, String whereClause, String[] whereArgs) 
```

因此，您将数组`contentValues`（您未显示，因此问题可能存在）放入由 定义的表中`TABLE_NAME_PERIODSTART`，并通过搜索由`COLUMN_NAME_PERIOD_END`which must equal定义的列来选择要更新的记录`endDate`。

我阅读您的问题标题的方式给我的印象是您实际上想`COLUMN_NAME_PERIOD_END`用 endDate 更新列...如果是这种情况，您的 SQL 不正确。

否则，一些突然想到寻找的可能性是：

1) 约束...您是否`not null`定义了一个字段并且您正在尝试使用 null 进行更新？
2）程序中的日期格式与数据库中的日期格式不同
3）您在数据库中搜索的 endDate 没有匹配记录

# json.net - 未实现 WriteToStreamAsync 方法

> ID：10907961
> 
> 赞同：0
> 
> 时间：2012-06-06T03:52:53.503
> 
> 标签：json.net, asp.net-mvc-4, asp.net-web-api

我正在使用发布候选者开发 MVC4 api。当我使用 Content-Type: application/json 执行 GET 时出现错误我收到此错误：“JsonNetFormatter”类型的媒体类型格式化程序不支持写入，因为它没有实现 WriteToStreamAsync 方法。

我相信我是！

```
public Task WriteToStreamAsync(Type type, object value, Stream stream, HttpContent content, TransportContext transportContext)
    {
        var task = Task.Factory.StartNew(() =>
        {
            var settings = new JsonSerializerSettings()
            {
                NullValueHandling = NullValueHandling.Ignore,
            };

            string json = JsonConvert.SerializeObject(value, Formatting.Indented,
                                                      new JsonConverter[1] { new IsoDateTimeConverter() });

            byte[] buf = System.Text.Encoding.Default.GetBytes(json);
            stream.Write(buf, 0, buf.Length);
            stream.Flush();
        });

        return task;
    } 
```

我看过一个覆盖此方法的示例，但我收到一个错误，即没有合适的方法可以覆盖。我猜这是 System.Net.Http.Formatting.dll 的版本控制问题，但我仔细检查了版本，它看起来不错：

```
// Type: System.Net.Http.Formatting.MediaTypeFormatter
// Assembly: System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// Assembly location: C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies\System.Net.Http.Formatting.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:47:41.407

我在如何实现该方法时犯了一个错误。就像错误所说的那样。HttpContent 应将 HttpContentHeaders 更改为：

```
public override Task WriteToStreamAsync(Type type, object value,
                                    Stream stream,
                                    HttpContentHeaders content,
                                    TransportContext transportContext) 
```

# python - 如何在 python 文件中编写 sudo vbetool dpms off 命令？

> ID：10907965
> 
> 赞同：0
> 
> 时间：2012-06-06T03:53:25.680
> 
> 标签：python

我是 python 新手，我只是打开 .py 文件并将此命令写入文件“sudo vbetool dpms off”中。但是在运行文件时，它显示无效的语法。如何将此命令写入python文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T03:57:28.877

使用标准库[子进程](http://docs.python.org/library/subprocess.html)

```
import subprocess
passwd='mypassword'
subprocess.call('echo %s|sudo -S vbetool dpms off' % passwd, shell=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T04:09:33.210

使用`sudo -S`which 用于从标准输入而不是终端读取密码。将其存储在文件中，例如 passwd 然后执行：

```
import os
os.system("sudo -S vbetool dpms off < passwd") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T04:28:25.370

或者

您可以使用[pexpect](http://pypi.python.org/pypi/pexpect/)库，该库通常用于自动化需要用户输入的程序。

```
import pexpect

child = pexpect.spawn('sudo vbetool dpms off')
child.expect('Password:')
child.sendline(password)
child.expect(pexpect.EOF, timeout=None)
output_data =  child.before 
```

在这里，您只需提供您期望的匹配提示，然后发送密码。之后，您可以收集输出并进行处理。

当您有不接受密码管道的程序时，这更通用并且很有用。

你可以安装这个模块

```
easy_install pexpect
or
pip install pexpect 
```

# java - Tomcat中服务器的客户端/证书身份验证

> ID：10907967
> 
> 赞同：1
> 
> 时间：2012-06-06T03:54:26.210
> 
> 标签：java, tomcat, web-applications, servlets, ssl

谁能告诉我**tomcat中服务器的客户端/证书身份验证**是什么，在我们的应用程序中，我们将证书作为请求参数的一部分并进行证书验证，这是否意味着我们正在进行客户端/证书身份验证？我想我们正在应用程序代码中进行证书验证，这意味着它的应用程序级别，我们没有在服务器级别进行任何客户端/证书身份验证..**任何人都可以确认这一点**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T05:01:31.820

**什么是tomcat中服务器的客户端/证书身份验证**

这是两种方式的 SSL 身份验证。在服务器上启用 SSL 时，服务器证书应该在客户端受信任的证书存储中。

同样，`client/certificate authentication`启用时，客户端 SSL 证书应该存在于服务器受信任的证书存储中。

**我们将证书作为请求参数的一部分并进行证书验证，这是否意味着我们正在进行客户端/证书身份验证？**

不，那是应用程序验证。但是，谁在请求参数中设置。

**注意：**此客户端证书身份验证由 Container 完成。但是，容器使用请求参数提供 ssl 属性。

[查看此处](https://stackoverflow.com/questions/8200853/how-can-i-know-if-the-request-to-the-servlet-was-executed-using-http-or-https/8208910#8208910)以了解连接安全时服务器设置了哪些属性。

# entity-framework-4.3 - 为 EDMX 文件补水时遇到错误？

> ID：10907968
> 
> 赞同：9
> 
> 时间：2012-06-06T03:54:34.640
> 
> 标签：entity-framework-4.3, visual-studio-2012

我刚拿到 Visual Studio 2012 RC Ultimate，我正在尝试使用 EntityFramework Database First 连接到数据库。我已经创建了 EDMX 文件，就像我已经完成了一千次一样，当我构建我的项目时，我得到了 2 个错误。我不确定它们是否相关。

> 水合 EDMX 文件“Model.edmx”时遇到错误。
> 
> 无法加载文件或程序集“Microsoft.Data.Tools.Schema.Sql，版本=11.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。

我在谷歌上花了几个小时试图看看是否有其他人遇到过这个问题，但我什么也没找到。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T17:43:31.877

1.  关闭 Visual Studio 的所有实例
2.  删除文件**`C:\Program Files (x86)\MSBuild\4.0\Microsoft.Common.targets\ImportAfterMicrosoft.Data.Tools.Integration.targets`**
3.  重新启动 Visual Studio 并重建解决方案

我希望这可以为我节省很多麻烦-ck

**更新：**

显然，如果您在 VS2012 Developer Preview 的顶部安装 VS2012RC，这只是一个问题，因为某些内容已被删除/重命名，并且该文件仍保留在旧安装中并造成严重破坏......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T00:47:44.347

非常感谢 divega 用他在这篇文章中的回答为我指明了正确的方向

[EntityHydrate 任务失败](https://stackoverflow.com/questions/9554626/entityhydrate-task-failed/9986445)

在那里寻找他的答案，只需简单地删除这个文件，一切就完美了

> C:\Program Files (x86)\MSbuild\4.0\Microsoft.Common.Targets\ImportAfter\Microsoft.Data.Tools.Integration.targets

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T06:53:11.000

飞扬

重命名文件不起作用。

删除它解决了我的问题。

还有一件事：这个问题只发生在我的 32 位 W7 盒子上。在我的 64 位 W7 盒子上一切正常

非常感谢您的快速回答，我可以继续工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T19:38:38.880

我们正在尝试确定此问题的准确重现，以防这有助于我们在 Visual Studio 2012 RTM 的设置中获得修复。我需要能够复制此内容的人提供有关 RC 之前的预览版和 beta 版软件的确切配置和安装顺序的信息。

# firefox - Firefox中的最小高度不起作用

> ID：10907971
> 
> 赞同：1
> 
> 时间：2012-06-06T03:54:50.133
> 
> 标签：firefox, height, css

我对 Firefox 的最小高度有疑问，我试图将其设置为 100%，但它不起作用。在 Chrome 中它可以完美运行。

我的代码是：

```
 <html>
    <head>
        <link rel="stylesheet" type="text/css" media="all" href="../css/main.css"/>
    </head>
    <body>
        <div class="main">
            <div class="header">Here is the header</div>
            <div class="content ">Here is the content</div>
            <div class="footer">Here is the footer</div>
        </div>
    </body>
   </html> 
```

而css文件是

```
.header {
    height:160px;
}

.content{
    min-height: 100%;
    height: auto !important;
    height: 100%;   
}

.footer{
    margin: -215px auto 0 0; 
    height: 55px;
} 
```

我要做的就是将页脚保持在页面底部，在 Chrome 中它可以工作，但在 Firefox 中它不需要内容的高度。我一直在寻找解决方案，很多人都说要

```
#page{min-height:100%;} 
html, body{min-height:100%;} 
```

但它是一样的，它仍然适用于chrome，但不适用于firefox。

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:09:36.733

如果您只是想将页脚保持在底部，则可以使用

```
 .footer{
 position:fixed; /*or absolute, or whatever*/
 bottom:0px;
 height: 55px;
 } 
```

# c# - 在选择项目时，更改作为 Windows Phone 中 ListBoxItem 一部分的矩形的颜色

> ID：10907977
> 
> 赞同：0
> 
> 时间：2012-06-06T03:55:51.943
> 
> 标签：c#, windows-phone-7, windows-phone

我有一个带有以下 XAML 的 ListBox：

```
<ListBox.ItemTemplate>
  <DataTemplate>
    <Grid Name="listItemGrid">
      <Grid.ColumnDefinitions>
        <ColumnDefinition MaxWidth="20" MinWidth="20" Width="20" />
        <ColumnDefinition />
      </Grid.ColumnDefinitions>
      <Rectangle Name="listItemSideBar" Height="85" HorizontalAlignment="Left"
         Margin="0, 0, 0, 0" Stroke="{StaticResource PhoneAccentBrush}" 
         StrokeThickness="1" VerticalAlignment="Top" Fill="{StaticResource
         PhoneAccentBrush}" MinHeight="85" Width="25"/>
      <StackPanel Margin="0,0,0,17" Grid.Column="1" Grid.ColumnSpan="2">
        <TextBlock Name="listItemMainData" Text="{Binding LineTwo}" 
          TextWrapping="NoWrap" Margin="12,0,0,0" Style="{StaticResource 
          PhoneTextExtraLargeStyle}"/>
        <TextBlock Name="listItemSubData" Text="{Binding LineOne}" 
          TextWrapping="NoWrap" Margin="12,-6,0,0" 
          Style="{StaticResource PhoneTextSubtleStyle}"/>
      </StackPanel>
    </Grid>
  </DataTemplate>
</ListBox.ItemTemplate> 
```

选择ListBoxItem时，我想将ListBoxItem的矩形填充颜色更改为其他颜色。当取消选择 ListBoxItem 时，我希望填充颜色变回 PhoneAccentBrush。

有没有办法完成这个任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:24:25.537

我终于找到了一个我在下面复制的解决方案。该类`ColorHelper`只是从 PhoneAccentBrush 资源中获取 PhoneAccentColor。DarkPhoneAccentColor 是通过[此处](http://unknownprogrammer.com/2011/10/darker-shade-of-the-phoneaccentbrush/)找到的方法生成的。`PropertyValue<string>(child, "Name")`是一种语法糖扩展方法，用于从类型的属性中获取值；`default(T)`如果属性不存在，则返回。

尚未对此代码应用完整的错误检查。

```
private void listBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    Color accent = ColorHelper.PhoneAccentColor;
    Color accentDark = ColorHelper.DarkPhoneAccentColor;
    foreach (object item in e.RemovedItems)
        SetListBoxItemColor(item, accentDark);
    foreach (object item in e.AddedItems)
        SetListBoxItemColor(item, accent);
}

private void SetListBoxItemColor(object item, Color color)
{
    ListBoxItem listBoxItem = listBox.ItemContainerGenerator
        .ContainerFromItem(item) as ListBoxItem;
    if (listBoxItem != null)
    {
        Rectangle rectangle = GetItemsRecursive<Rectangle>(
            listBoxItem, "listItemSideBar");
        SolidColorBrush fillBrush = new SolidColorBrush();
        fillBrush.Color = color;
        rectangle.Fill = fillBrush;
    }
}

private T GetItemsRecursive<T>(DependencyObject lb, string name)
    where T : DependencyObject
{
    int childrenCount = VisualTreeHelper.GetChildrenCount(lb);

    for (int i = 0; i < childrenCount; i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(lb, i);
        if (child is T)
        {
            string childName = child.GetType().PropertyValue<string>(child, "Name");
            if (String.Compare(childName, name) == 0)
                return (T)child;
        }
        return GetItemsRecursive<T>(child, name);
    }
    return default(T);
} 
```

# c - 分配大量文件描述符

> ID：10907984
> 
> 赞同：1
> 
> 时间：2012-06-06T03:57:21.933
> 
> 标签：c, linux, file-descriptor

我有兴趣通过分配大量文件描述符并导致文件外描述符失败来关闭系统（例如 15 分钟）。（别担心，我并没有试图破解任何东西。这是为了测试我正在编写的服务......看看它在其他程序行为不端的情况下如何表现。）有什么最佳实践吗？我应该在无限 for 循环中一直说 fopen() 吗？15分钟后，我可以杀死进程吗？有人有这方面的经验吗？

更新：我正在运行 Linux，我正在编写的程序将具有超级用户权限。

谢谢，~瑜伽士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T05:10:02.523

您是否考虑在运行程序之前使用[setrlimit](http://linux.die.net/man/2/setrlimit) `RLIMIT_NOFILE`降低文件描述符限制？

这可以简单地使用内置的 bash [ulimit](http://ss64.com/bash/ulimit.html) `-n`在您测试应用程序的同一 shell 中完成，例如：

```
 ulimit -n 32 
```

而且它不会对已经在运行的许多其他服务造成太大影响。降低该限制将使您的应用程序（在同一个 shell 中运行）迅速对其造成伤害（出于测试目的）。

在整个系统级别上，您还可以写入`/proc/sys/fs/file-max`例如

```
echo 1024 > /proc/sys/fs/file-max 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T04:27:03.473

我的 2 美分：

1.编写一个创建大量文件描述符的程序。您可以通过以下方法之一实现它：

(a)在代码中打开很多不同的文件
(b)打开很多套接字描述符

(c)创建很多线程

2.现在，继续使用shell 脚本或类似的东西生成在步骤1 中创建的程序的多个实例（即创建多个进程）。

**注意：** 在 linux 以及大多数其他操作系统中，每个进程的文件描述符数量是有限制的（在 linux 中，我猜默认是 1024。您可以使用 ulimit -a 检查它）。因此，当您执行此操作时，您的过程将失败。我真的不太确定仅仅通过增加文件描述符使用的数量就可以使系统崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T04:04:24.867

取决于操作系统的实现，但是从同一个进程对同一个文件调用 fopen 不会分配新的文件描述，而只是增加引用计数器。

我建议您阅读有关[压力测试的内容](http://en.wikipedia.org/wiki/Stress_testing_%28software%29)

以下是一些可用的软件（您不标记任何操作系统平台）：

[http://www.opensourcetesting.org/performance.php](http://www.opensourcetesting.org/performance.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T04:04:37.997

我在正常使用中发生过一次。我相信你在 linux 中运行 inode。我不知道打开文件的更快方法。请小心，我们锁定了我们的系统。那是不久前，所以我不记得是什么试图打开文件，但事情通常假设他们可以获得文件句柄并且在他们不能的情况下表现得不如他们应该的那样。〜本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T07:08:35.513

您可以使用[mkstemp](http://linux.die.net/man/3/mkstemp)获取临时文件的文件描述符。

# javascript - jQuery localtime，得到一个不支持的日期/时间字符串错误

> ID：10907988
> 
> 赞同：0
> 
> 时间：2012-06-06T03:58:08.760
> 
> 标签：javascript, jquery

我正在使用以下插件：[http ://code.google.com/p/jquery-localtime/wiki/Usage](http://code.google.com/p/jquery-localtime/wiki/Usage)

我的元素是使用 JS 在页面上呈现的，因此我将插件应用于元素，如下所示：

```
 var format = "dd/MM/yy HH:mm a";
    var localise = function () {
        jQuery(this).text(jQuery.localtime.toLocalTime(jQuery(this).text(), format));
    };
    jQuery(".localtime").each(localise); 
```

问题是这会导致以下错误：

```
Uncaught Error: 01/06/12 14:43 PM is not a supported date/time string
jquery.localtime-0.5.js:183 
```

传递给插件的文本看起来像这样“2012-06-01T21:43:15Z”有什么想法吗？我是否错误地调用了插件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T09:49:24.067

问题是本地时间插件会在页面加载时自动应用格式；因此在页面加载时应用格式，并再次使用您在上面提供的代码。

要么阻止插件默认应用样式：

```
<script type="text/javascript">$.localtime.setFormat({});</script> 
```

或者删除尝试再次重新应用它的代码。

# c# - 无法将对象类型“PictureBox”转换为 myClassControl

> ID：10907992
> 
> 赞同：2
> 
> 时间：2012-06-06T03:59:10.273
> 
> 标签：c#, casting, controls

我有一个延伸到的课程`Control`：

```
public foo : Control 
{
  //.. 
} 
```

然后我得到一个控制：

```
var baa = (((foo)((Control)Controls.Find(controlName, true).First()));
baa.etc = ..; 
```

但是当我这样做时：

```
 ((PictureBox)((Control)controlImg)).MyExtensionMethod(..) 
```

我得到一个**例外**：

> 无法将“System.Windows.Forms.PictureBox”类型的对象转换为“ControlExtensions.foo”类型。

如何解决此异常并让我知道。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T04:03:00.977

没有办法解决这个问题。你的课`foo`是正确的。错误消息说明了一切。`foo`不继承`PictureBox`。如果`foo`是某种图片框，请实现`PictureBox`类而不是`Control`.

给你一个现实生活中的例子：

```
interface IAnimal { }
class Dog : IAnimal { public static void Bark() { } }
class Cat : IAnimal { public static void Meow() { } } 
```

的签名与定义的`Cat`不同，而没有。定义，而没有。例如，以下带有注释的代码将帮助您理解这一点：`Dog``Cat``Cat.Meow()``Dog``Dog``Dog.Bark()``Cat`

```
class Program
{
    static void Main(string[] args)
    {
        Dog myDog = new Dog(); // myDog contains definition for Bark
        IAnimal myPet = (IAnimal)myDog; // Cast not necessary.
                                        // myPet's signiature is of Dog, but typeof(myPet)
                                        //   is Animal as it was boxed (google for help on this)
        Cat myCat = (Cat)myPet // now try and imagine this in real life
                               // (turning a dog into a cat) [I don't even]
                               // It doesn't work because Cat doesn't
                               //   contain a definition for Bark()
        Cat myDimentedCat = (Cat)(IAnimal)myDog; // which is why this code fails.
    }
} 
```

* * *

我要展示的内容与以下内容相同`a square is a rectangle, but a rectangle isn't always a square`：

```
interface IRectangle { }
interface ISquare : IRectangle { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T04:46:50.320

评论中的安东尼和回答中的科尔都向您展示了异常的来源。至于如何修复它，我不确定我是否得到了你想要做的事情，但是看看你试图调用的方法的名称，以及你说 foo “扩展”控制的事实，它在我看来，您正在尝试扩展 Windows 窗体控件的行为，添加一些 MyExtensionMethod。如果是这种情况，则不应创建从 Control 派生的 foo 类，而应创建包含所需扩展方法的静态类。即你的代码应该是这样的：

```
public static class SomeControlExtensions
{
    public static int MyExtensionMethod(this Control aCtl)
    {
        // whatever you want
    }
} 
```

扩展方法总是至少有一个参数来表示消息的接收者。这由参数类型之前的关键字“this”标识。通过这种方式，您将能够编译：

```
Control baa = (Control)Controls.Find(controlName, true).First();
baa.MyExtensionMethod(); 
```

# ruby - 如何使用 ruby 中的标头发出 HTTP 标头请求？

> ID：10907994
> 
> 赞同：0
> 
> 时间：2012-06-06T03:59:38.533
> 
> 标签：ruby, https, http-headers

我一直在尝试使用几个库来发出 HTTP HEAD 请求，但似乎没有任何效果。

我看过一些例子，但没有我想要的。

这是 Curl 请求，现在我必须在 ruby​​ 中执行此操作：

```
curl -XHEAD -H x-auth-user: myusername -H x-auth-key: mykey "url" 
```

此外，这是一个 HTTPS 网址，如果有区别的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:03:46.280

试试这个：

```
require 'net/http'

url = 'http://...'
myusename = '...'
mykey = '...'

request = Net::HTTP.new(url, 80)
request.request_head('/', 'x-auth-user' => myusername, 'x-auth-key' => my_key) 
```

# javascript - 为什么我对 dom 的更改要等到函数运行后才会显示

> ID：10907999
> 
> 赞同：3
> 
> 时间：2012-06-06T03:59:56.577
> 
> 标签：javascript, jquery, dom

我的`eval()`电话相当密集，生成每个解决方案大约需要一秒钟。

因此生成每个段落元素大约需要一秒钟（然后我将其附加到 dom - `document.getElementById('project_euler_solutions').appendChild(p);` ）。

因此，我希望每个段落出现在网页上大约相隔一秒钟。（所以大约 40 秒后我会说 40 段）。

但是，当我单击按钮时，40 秒内什么都没有发生，然后所有解决方案同时出现。

**为什么在更新 dom 之前要等待所有这些都完成？**

**我认为每个段落一旦附加到 dom 就会出现**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.6.2.min.js"></script>
    <script src="/statics/project_euler.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("button").click(function(){
                for (var i in window) {
                    if (i.slice(0,5) == "solve") {
                        var p = document.createElement('p');
                        p.innerHTML = "running: " + i;
                        document.getElementById('project_euler_solutions').appendChild(p);
                        var p = document.createElement('p');
                        p.innerHTML = "Solution: " + eval(i + "()");
                        document.getElementById('project_euler_solutions').appendChild(p);
                    }
                }
            });
        });
    </script>
</head>

<body>
<div id="project_euler_solutions"><button>Calculate solutions</button></button></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T04:02:05.160

Javascript 与 UI 在同一线程中运行，因此您需要将控制权交还给 DOM 以重新绘制所有更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T04:05:00.317

强制回流：

```
 $(document).ready(function(){
        $("button").click(function(){
            for (var i in window) {
                if (i.slice(0,5) == "solve") {
                    var p = document.createElement('p');
                    p.innerHTML = "running: " + i;
                    document.getElementById('project_euler_solutions').appendChild(p);
                    var p = document.createElement('p');
                    p.innerHTML = "Solution: " + eval(i + "()");
                    document.getElementById('project_euler_solutions').appendChild(p);
                    document.getElementById('project_euler_solutions').offsetHeight; //Force a reflow
                }
            }
        });
    }); 
```

您还可以在图纸之间设置Timeout：

```
 var keys = Object.keys(window).filter(function(i){
        return i.slice(0,5) === "solve";
    });

    (function (i){
        (function k(){
            var p = document.createElement('p');
            p.innerHTML = "running: " + keys[i];
            document.getElementById('project_euler_solutions').appendChild(p);
            var p = document.createElement('p');
            p.innerHTML = "Solution: " + eval(keys[i] + "()");
            document.getElementById('project_euler_solutions').appendChild(p);
            if( i++ < keys.length - 1 ) {
                setTimeout(k, 0);
            }            
        })()
    })(0) 
```