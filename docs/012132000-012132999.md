# StackOverflow 问答 12132000-12132999

# java - 在 Intellij 的 Java 项目中获取“找不到符号”

> ID：12132003
> 
> 赞同：138
> 
> 时间：2012-08-26T16:50:33.823
> 
> 标签：java, intellij-idea

我从类中调用了一个静态单例实例`GameManager.java`。

```
HUD.getInstance().update(timeDelta); 
```

`HUD.java`包含`HUD`该类以及其他两个相关的类，`HUDTextElement`并且`HUDElement`. 所有的类都在同一个根路径`../src/org/mypackage`中。

但是，在 IntelliJ 中编译这个 java 项目时，我在拨打电话的那一行**找不到 Symbol HUD**`HUD.getInstance()`。

这个完全相同的代码在eclipse中编译得很好，知道问题是什么吗？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2016-12-10T05:34:26.023

选择 Build->Rebuild Project 将解决它

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2016-05-10T10:03:18.723

我有同样的问题并通过单击文件>使缓存无效/重新启动来修复它

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2013-03-06T09:13:30.087

我遇到了同样的问题，结果我从未完全编译过新项目。因此，右键单击并选择 Compile''（mac 上的 shift-cmd-F9）修复它。似乎保存时编译不会“看到”非编译文件。

在我的情况下，将 src 文件夹标记为源并*没有*帮助。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2012-08-26T16:54:27.123

这很可能是您的 ../src 文件夹在 Intellij IDEA 中未标记为“源”文件夹，因此它不知道到那里查找您的课程。您可以右键单击项目资源管理器中的文件夹并选择“标记为源文件夹”来解决此问题。

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2014-10-13T18:43:10.177

当我这样做时，我遇到了同样的“找不到符号”错误`Build -> Make Project`。我通过删除我的 Maven`/target`文件夹、右键单击我的项目模块并执行`Maven -> Reimport`和执行来解决此问题`Build -> Rebuild Project`。这是在 IntelliJ Idea 13.1.5 上。

事实证明这`Maven -> Reimport`是关键，因为在我最终这样做之前，问题又出现了几次。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-10-25T22:38:12.860

对我来说 - 我尝试了这些步骤（无效缓存和重新启动，Maven 重新导入））但它们没有用。所以我删除了`.idea`,`.settings`和`.project`文件夹并尝试了 - 它有效。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2012-08-26T18:09:59.697

感谢到目前为止的帮助，原来修复是首先编译 HUD.java（右键单击文件-> 编译 HUD.java）。编译完 java 文件后，项目的其余部分可以毫无问题地编译。

我真的不知道为什么会修复它，或者为什么 IntelliJ 不会自动执行此操作，但根错误似乎与 IntelliJ 未正确处理单个 .java 文件中的多个类有关。

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2020-06-18T11:10:32.810

我遇到了同样的问题，答案中给出了很多解决方案，尝试所有这些解决方案花了我相当长的时间，所以如果你遇到这个错误，我想在这里提出一个有条不紊的方法。

**检查以下内容，如果缺少某些内容，则创建/更新**

1.  src 文件夹被标记为源文件夹
2.  .imls 文件存在
3.  启用注释处理
4.  如果您最近使用过@UtilityClass，那么这也可能是原因，[Bug Link](https://github.com/rzwitserloot/lombok/issues/2044)

**如果一切正常，您可以按给定顺序尝试以下解决方案**

1.  重新编译文件/模块

2.  如果这不能解决问题，请尝试刷新 maven 依赖项并使用`Maven -> Reimport`和构建项目`Build -> Rebuild Project`

3.  尝试`mvn clean install -DskipTests`

4.  尝试使 IntelliJ 缓存无效并重新启动 IDE，使用`File > Invalidate caches/ restart`

5.  删除 .idea 文件夹并重新导入项目

感谢所有回答此问题的人，您可以参考他们的答案以获取有关每个点的更多描述。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-08-09T08:25:54.143

当我删除一个文件夹然后将其复制粘贴回项目时，这发生在我身上。

`Right-click project folder -> Rebuild`为我工作。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2018-09-19T19:58:18.990

我必须右键单击该项目，然后在“运行 Maven”子菜单下选择“重新导入”。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2013-04-25T19:58:51.260

我在我的项目中使用 maven。出于某种原因，IntelliJ 给了我这些奇怪的错误。我运行 mvn clean 并尝试重新同步，这些错误消失了。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-01-20T06:28:19.677

重新编译主 Application.java 类为我做了，右键单击类>重新编译

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-02-03T15:46:49.037

如果您使用的是 Lombok，请确保您已启用注释处理。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-02-27T09:09:44.283

对我来说，Lombok 有一个问题，因为它需要启用注释处理。您可以在以下位置找到此复选框`Settings > Build > Compiler > Annotation Processors`

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-07-14T15:41:15.227

我知道这是一个老问题，但根据我最近的经验，发生这种情况是因为构建资源被删除或 Idea 无法将它们识别为源。

无论出现错误，请提供文件夹/目录的来源，并且必须解决此错误。

有时即使我们为整个文件夹分配源，个别类可能仍然不可用。对于新手用户来说，简单的解决方案是导入一个新的副本并再次构建应用程序以备不时之需。

建议在此之后进行全新安装。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-07-19T13:23:23.643

我知道这个线程很旧，但是另一个解决方案是运行

```
$ mvn clean install -Dmaven.test.skip=true 
```

在 IntelliJ 上执行 CMD + Shift + A (mac os) -> 输入“重新导入所有 Maven 项目”。

如果这不起作用，请尝试强制重新下载 maven 依赖项

```
$ mvn clean -U install -Dmaven.test.skip=true 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2021-11-22T12:01:11.040

我通过右键单击 Java 文件夹和重建解决了这个问题

[![IntelliJ 截图](../Images/5ed25494e4321c39165eafef8badf4d3.png)](https://i.stack.imgur.com/ghbag.png)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-10-02T20:20:42.997

就我而言，问题在于在 Intellij Idea 的 java 项目中使用 Lombok 的实验功能 @UtilityClass 将类方法注释为“静态”。当我明确地将类的每个方法设置为“静态”而不是使用注释时，所有编译问题都消失了。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-02-07T01:15:19.330

有时你想要的类在`test`源目录中。反正发生在我身上……</p>

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-06-14T21:23:22.940

确保您尝试引用的 java 类的源文件具有`.java`扩展名。就`.aj`我而言（我必须在创建它时点击“创建方面”而不是“创建类”）。IntelliJ 显示此文件的图标与“普通”类相同，但编译器在构建时看不到它。

在我的情况下更改`.aj`为`.java`修复它。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-03-04T18:04:21.100

Once when *Maven Reimport*, *Rebuild Project*, *Invalidate caches* didn't help I deleted subfolders `artifacts` and `libraries` from .idea folder, not whole one, so I saved custom project settings.

...and when nothing written here helps check *idea.log* file as posted [here](https://stackoverflow.com/a/42427510/6721361)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-05-30T09:10:48.007

由于这是谷歌搜索“intelliJ 找不到符号”错误的第一次点击，我也将提出我的解决方案。

对我来说，问题是我的项目源自 Eclipse，并且一些文件包含对`src/generated-sources`由 pom.xml 中的规范生成的类的依赖。出于某种原因，当我第一次打开项目并且重建/重新导入没有帮助时，这没有正确执行，因此从未生成文件。

解决方案是右键单击该模块，然后选择`Maven -> Generate Sources and Update Folders`“解决了问题，我可以编译”。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-08-20T13:52:30.910

我遇到了同样的问题，除了我正在导入依赖项无法以某种方式解决的类。我刷新了 maven 项目，Rebuild Project。它仍然没有解决。看起来 IntelliJ 缓存的东西不正确。我重新启动了 IntelliJ 并解决了依赖关系。我猜它以某种方式清除了缓存。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-01-23T13:43:15.890

这对我有用，比如说 A 类依赖于 B 类（以及 c、d 类等），但是错误会在没有任何错误的 A 类上引发。所以我尝试先单独编译 A 类 -> 它在**B 类的包上**显示错误。所以试图编译B类的整个包。现在它抛出了确切的错误类（在我的案例中，B类有错误）。通常 Intellj 在编译/构建时会显示带有行号的确切错误类。在某些情况下，它会在错误的地方/班级中引发错误。试试。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-03-24T14:52:23.747

就我而言，我在从另一个模块中查找类时遇到了问题。在`pom.xml`中，我只是`<scope>compile</scope>`指定了这个依赖项。删除这条线有帮助。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-05-20T01:31:58.150

对我来说，错误来自`@RequiredArgsConstructor(onConstructor = @__(@Inject))`，消息来自`cannot find symbol __`。上面的错误消息是“java：您没有使用 lombok 支持的编译器，因此 lombok 将无法工作并且已被禁用”。

在 VM 选项下面添加参数按照[这里](https://stackoverflow.com/a/65188047/3255453)的建议对我有用。

```
-Djps.track.ap.dependencies=false 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-08-05T10:20:54.697

我尝试了一切，但对我没有任何帮助。所以，在浪费了几个小时之后，我决定**升级 IntelliJ** idea 版本，终于，它成功了！

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-02-13T14:19:25.310

我看到很多建议构建或重新构建的答案，但以防万一这不能解决您的问题，请注意 IDEA 可以检测到一个方法，但如果您有一个`new`之前的方法，它将无法编译期待实例。

[![在此处输入图像描述](../Images/5fd062b1fa76a27ca8d5304840be786a.png)](https://i.stack.imgur.com/XDYlj.png)

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2015-11-02T00:28:39.043

我知道这很旧，但是对于其他任何人，请确保缺少的类与您收到错误/从哪里调用它的类在同一个包中。

# c# - C#，是否可以在不创建新对象变量的情况下重铸对象并访问方法和属性

> ID：12132005
> 
> 赞同：3
> 
> 时间：2012-08-26T16:50:43.293
> 
> 标签：c#, object, methods, casting

C#，是否可以在不创建新对象变量的情况下重铸对象并访问方法和属性？

例如：

```
foreach (object o in collection)
{
    if (o is MyType)
        {
            (MyType)o.MyProperty = x
        }
 } 
```

目前，我必须将 o 重新转换为 MyType [ex: MyType m = (MyType)o ] 的另一个变量，以便访问 MyType 的方法或属性。这似乎很浪费，所以我想知道我是否缺少一些允许我跳过新对象变量的声明的机制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T16:57:11.097

您的代码不起作用，因为`.`它的优先级高于演员表。所以你需要添加括号：

```
foreach (object o in collection) 
{ 
    if (o is MyType) 
        { 
            ((MyType)o).MyProperty = x; 
        } 
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:54:53.850

您可以使用 Linq：

```
foreach(MyType t in collection.OfType<MyType>()) {} 
```

您还可以使用直接投射：

```
foreach(object o in collection)
{
    if(o is MyType)
    {
        ((MyType)o).MyProperty = x;
    }
} 
```

* * *

或者，如果您*知道*或想要确定（请记住，`InvalidCastException`如果集合是混合类型，则可能），您可以使用`Cast`Linq 方法：

```
// If your collection is all of the same type
foreach(MyType t in collection.Cast<MyType>()) {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T17:00:39.167

你需要两对括号。

```
((MyType)o).MyProperty = x; 
```

否则，强制转换将应用于整个表达式。

* * *

```
y = (MyType)o.MyMethod(x); 
```

是相同的

```
y = (MyType)(o.MyMethod(x)); 
```

这不是您想要的（它会转换 的结果`MyMethod`）。而是写

```
y = ((MyType)o).MyMethod(x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T16:56:44.703

是的，你可以投

```
foreach(var t in collection.Cast<YourType>())
{
  t.MyProperty = x;
} 
```

注意：但您必须知道，当您从引用类型传递到值类型或从值类型传递到引用类型时，装箱或拆箱操作在您的内存中是昂贵的操作。

在这种情况下，您没有此限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T17:01:01.957

实现一个接口

```
interface MyInterface
{
 string MyProperty;
}

foreach(object o in collection)
{
MyInterface o= originalObject as MyInterface

if (MyInterface!= null)

  ((MyInterface)o).MyProperty = x;
} 
```

# scala - 学习 Play for Scala 的资源

> ID：12132006
> 
> 赞同：2
> 
> 时间：2012-08-26T16:51:00.393
> 
> 标签：scala, playframework

这个网站有关于如何为 Java 开发 Play 的问题，但很难为 Scala 找到相同的问题。除了官方文档，还有哪些学习 Play 的高质量（至少完整）资源？

[http://www.playframework.org/documentation/2.0.2/ScalaHome](http://www.playframework.org/documentation/2.0.2/ScalaHome)

# ios - 为 iphone 模拟器构建库设置正确的架构

> ID：12132010
> 
> 赞同：0
> 
> 时间：2012-08-26T16:51:56.347
> 
> 标签：ios, sdl

我有一个问题，在构建大量库（例如 sdl 和 irrlicht）时，当我构建 armv6 和 armv7 时它工作正常，但是当我将架构更改为 i386（模拟器对吗？）时，它说警告没有规则来处理源文件名对于架构 i386，我可以看到编译 .h 文件时发生了很多错误？头文件不需要编译吧？

但它与 armv7 和 armv6 for device 编译得很好。所以我的问题是：1.如何解决这个问题？我需要删除每个 .h 吗？2.当为模拟器编译 sdl 时，即使编译 .c 文件，它也会说同样的话。

# android - Apprequest DialogListener 的返回 bundle 数组类型

> ID：12132012
> 
> 赞同：2
> 
> 时间：2012-08-26T16:52:18.047
> 
> 标签：android, facebook, bundle, apprequests

大家好，我正在尝试从 apprequest 邀请中获取返回的值，所以我这样做了；

```
public void onComplete(Bundle values) {
final int[] to = values.getIntArray("to");
int n = to.length
} 
```

但是当我使用 n 变量时，这是 LogCat：

```
08-26 18:40:04.312: E/AndroidRuntime(6464): java.lang.NullPointerException 
```

我尝试过使用 getIntArray、getFloatArray、getLongArray、getStringArray，但没有任何效果。如果我查看 Facebook Developer 的页面，它会说：

```
An array of the recipient user IDs for the request that was created. 
```

但它没有说什么是数组类型。谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T07:01:30.170

感谢nandeesh的提示，我发现我们无法检索数组类型的数据很奇怪。

应使用不同的密钥检索每个收件人用户的 ID。

我尝试了以下代码，它现在可以工作了。

```
Set<String> keys = values.keySet();
int userNum = values.keySet().size() - 1;
for (int i = 0; i < userNum; i++) {
    Log.d("user IDs", values.getString("to[" + String.format("%1$d", i) + "]"));
} 
```

# c++ - 猪拉丁字符串迭代，多个单词

> ID：12132013
> 
> 赞同：1
> 
> 时间：2012-08-26T16:52:19.643
> 
> 标签：c++

我正在阅读一本关于 C++ 的书和一个创建猪拉丁语翻译器的练习。我已经想出了翻译一个单词的所有必要步骤。现在我在制作一个处理多字串的函数时遇到了很多麻烦。

基本上，我需要一种标准习语的帮助来遍历字符串的每个单词并对每个单词执行操作。

到目前为止，我所拥有的功能充其量只是草率，我只是卡住了。

```
string sentenceToPigLatin(string str) {
    string result = "";
    for (int i = 0; i < str.length(); i++) {
        char ch = str.at(i);
        if (ch == ' ') {
            result += toPigLatin(str.substr(0, i));
            str = str.substr(i);
        }
    }
    return result;
} 
```

您可以假设 toPigLatin() 对不包含空格的单词执行正确的过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T16:56:25.673

您可以将整个字符串放在一个字符串流中[并](http://en.cppreference.com/w/cpp/io/basic_istringstream)使用提取运算符来取出一个单词：

```
#include <sstream>  // for stringstreams

string sentenceToPigLatin(const string& str)
{ 
    istringstream stream(str);
    ostringstream result;
    string temp;
    while (stream >> temp)
            result << toPigLatin(temp) << ' ';
    return result.str();
} 
```

另一种方法是将[标准算法](http://en.cppreference.com/w/cpp/algorithm)与[流迭代器](http://en.cppreference.com/w/cpp/iterator)一起使用：

```
#include <algorithm> // for transform
#include <iterator>  // for istream_iterator and ostream_iterator

string sentenceToPigLatin(const string& str)
{ 
    istringstream stream(str);
    ostringstream result;
    transform(istream_iterator<string>(stream),
              istream_iterator<string>(),
              ostream_iterator<string>(result, " "),
              toPigLatin);
    return result.str();
} 
```

# javascript - Backbone dummy：了解集合同步

> ID：12132015
> 
> 赞同：0
> 
> 时间：2012-08-26T16:52:56.423
> 
> 标签：javascript, backbone.js

我想在每次添加项目时同步我的收藏。

因此，如果用户在另一个浏览器窗口中添加项目 - 服务器仍会向我们发送有效数据。

所以……我被卡住了！我读了几次文档，但仍然无法理解：

*   哪种方法将数据发送到服务器？

*   哪种方法从服务器的响应中解析项目并将它们放入集合中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:38:03.377

*   哪种方法将数据发送到服务器？

[模型.保存（[属性]，[选项]）](http://backbonejs.org/#Model-save)：

> 通过委托给 Backbone.sync 将模型保存到您的数据库（或替代持久层）。

*   哪种方法从服务器的响应中解析项目并将它们放入集合中？

[model.parse(response)](http://backbonejs.org/#Model-parse) 或[collection.parse(response)](http://backbonejs.org/#Collection-parse)：

> 每当服务器返回模型的数据，获取和保存时，都会调用 parse。该函数传递原始响应对象，并应返回要在模型上设置的属性散列。默认实现是无操作的，只是通过 JSON 响应。如果您需要使用预先存在的 API 或更好的响应命名空间，请覆盖此选项。

# php - mysqli insert 在重复项上不返回 false

> ID：12132017
> 
> 赞同：0
> 
> 时间：2012-08-26T16:53:10.200
> 
> 标签：php, mysqli, prepared-statement

我有一个将新用户插入数据库的功能。如果输入有点糟糕或者用户名或电子邮件已经存在，我希望它返回 false。

这是它的样子：

```
public function input( $username, $password, $email ){
    if( $stmt = $this->mysqli->prepare("INSERT INTO users (username, password, email) VALUES (?, ?, ?)" )){

        $stmt->bind_param('sss', $username, $password, $email);
        $stmt->execute();
        $stmt->close();
        $this->mysqli->close();

        return true;
    }
    else{
        return false;
    }
} 
```

在我尝试创建副本之前，它工作得非常好，它返回 true，但不会影响数据库中的表数据，正如我所见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:03:37.647

```
return !!$this->mysqli->insert_id; // instead of true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:06:14.867

如果失败，您的函数只会返回 false `prepare`- 在此之后您不会添加数据。

您可以检查您的插入语句的返回值以查看它实际返回的内容，以查看您的 INSERT 是否成功。

此外，您的问题标题和标签表明您正在使用 mysqli，但您的函数调用都是针对`mysql_*`- 一个或另一个是错字吗？

# ruby-on-rails - 如何在我的资产管道中存根 jquery？

> ID：12132021
> 
> 赞同：5
> 
> 时间：2012-08-26T16:53:35.147
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets

我正在使用 Rails 3.2 和 jquery-ui-rails 插件将日期选择器添加到我的 JS 清单文件中。

这是我的清单文件：

```
//= require jquery_ujs
//= require jquery.ui.datepicker
//= require_tree . 
```

我将我的 jQuery 库与 Google 的 CDN 分开。

但是，通过将 jquery.ui 添加到清单文件，它会自动包含其 jQuery 依赖项 - 所以现在我在最终的 HTML 文档中得到了两个 jQueries。

我不想要这个额外的 jQuery 文件——我只想要来自 Google 的 CDN 的那个。使用 sprockets，我可以使用 stub 指令选择性地“排除”jQuery 文件。

所以这就是我所做的 - 它不起作用 - 即 jQuery 仍然添加到我的最终 JS 文件中......

```
//= stub jquery
//= require jquery_ujs
//= require jquery.ui.datepicker
//= require_tree . 
```

我尝试了几种组合：

```
//= stub jquery.js

//= stub "jquery"

//= stub "jquery.js"

//= stub "/jquery.js" 
```

ETC ...

但这些都不起作用。我无法在任何地方找到应该如何工作的示例。顺便说一句，我也试过

```
//= stub jquery_ujs 
```

哪个也没有存根 jquery_ujs 库...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:58:51.487

我认为它不起作用的原因是 Rails 3.2.x 只使用了 sprockets v2.1。但是，存根仅在 sprockets >= 2.2 中可用。您可以尝试手动更新链轮（分叉动作包）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:21:37.527

您总是可以只获取[jquery_ujs](https://github.com/rails/jquery-rails/blob/master/vendor/assets/javascripts/jquery_ujs.js#L291)文件，将其放入，从您的 Gemfile 中`vendor/javascripts`删除该行，然后在您的清单中包含该供应商的 js。`jquery-rails`

# matlab - 如何保存 parfor 循环的单个迭代

> ID：12132022
> 
> 赞同：1
> 
> 时间：2012-08-26T16:53:39.510
> 
> 标签：matlab, parallel-processing

我正在努力保存每次 PARFOR 迭代的输出，但直到现在都没有成功。我在网上搜索了很多，根据一些官方的 newgroup 回复，处理保存在 PARFOR 中的正确方法（即解决“透明度”问题）是以以下方式使用外部函数（基本示例） ：

```
parfor i=1:120
  display(i);
  [LL ll] = eig(rand(1000,1000));
  record(:,i) = diag(ll);
  samplesave('save.mat',record(:,i),i);
end 
```

随着

```
function samplesave(fname, data,i)
   persistent st;
   store(:,i)=data;
   save(fname);
end 
```

问题是，将“st”声明为 PERSISTENT 会使变量在同一个工作人员的*调用*中“持久”，但不会*跨越 PARFOR 循环*，因此在任何给定点上，您只有最后一个工作人员的全部历史记录; 下一次 PARFOR 迭代（来自不同的工作人员）将用（仅）该工作人员的整个历史记录覆盖该记录，依此类推。

如何逐步保存所有工人的历史记录？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:15:57.303

我认为你不能等到循环终止后保存整个矩阵是有原因的。

一个想法是使用类似这样的方法将每个迭代独立于其他迭代保存：

```
baseFile = ('part_%03d.mat');
parfor i=1:120
  display(i);
  [LL ll] = eig(rand(1000,1000));
  singleRecord = diag(ll);
  record(:,i) = singleRecord;
  save(sprintf(baseFile, i), 'singleRecord');
end 
```

然后一个一个地加载文件并将这些值组合成一个矩阵。

```
mat = [];
baseFile = ('part_%03d.mat');
for i = 1:120
  d = load(sprintf(baseFile, i));
  mat(:,i) = d.singleRecord;
end 
```

# sql - 从具有数千行的表中查询最新 1000 条记录的最佳方法？

> ID：12132026
> 
> 赞同：1
> 
> 时间：2012-08-26T16:54:22.803
> 
> 标签：sql, postgresql, sql-order-by

我有这个 postgresql 代码。

```
SELECT * 
FROM listings 
WHERE status != 'inactive' 
ORDER BY pkey DESC LIMIT 1000 OFFSET 0 
```

准确地说，这将查询仍然处于活动状态的 FIRST 1000 个列表，然后对其进行 DESC 排序。是否有查询最新/最新数据的最佳方法？例如，我有 500000 行，现在当我执行查询时，我希望查询 499000-500000 的 DESC。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:01:14.223

言简意赅，你说

> 这将查询仍处于活动状态的 FIRST 1000 个列表，然后对其进行排序 DESC

这是不准确的。它将排序排序 id DESC **，然后**选择“第一个”1000（当排序 DESC 时，可以将其视为“最后一个”1000）。

所以，我认为你的问题的答案就*在*你的问题中。您显示的查询将选择“最后一个”（即“pkey”列中具有最大值的记录）1000 条记录，从*最近**到*一千*前*的顺序排列。

请注意，唯一真正需要注意的是，它不完全是 499000-500000，只有当所有 1,000 个最近的行都“活动”时才会如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T16:58:02.130

按 Y 降序排列的最后 X 个记录与按 Y 升序排列的第一个 X 记录相同，不是吗？一旦得到结果，您就必须再次翻转订单。

简单的例子：

```
Data: C, E, B, A, D

Descending:  E, D, C, B, A
Descending (last 3):  C, B, A

Ascending:  A, B, C, D, E
Ascending (first 3):  A, B, C
Ascending (first 3, reverse sorted):  C, B, A 
```

# java - 如何解决这种类型的编译错误？

> ID：12132029
> 
> 赞同：-6
> 
> 时间：2012-08-26T16:54:42.583
> 
> 标签：java

```
import java.net.*;
import java.io.*;

public class DjPageDownloader {

    public URL url;
    public InputStream is = null;
    public DataInputStream dis;
    public String line;

    public static void main(String []args){
        try {
            url = new URL("http://stackoverflow.com/");
            is = url.openStream();  // throws an IOException
            dis = new DataInputStream(new BufferedInputStream(is));

            while ((line = dis.readLine()) != null) {
                System.out.println(line);
            }
        } catch (MalformedURLException mue) {
             mue.printStackTrace();
        } catch (IOException ioe) {
             ioe.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException ioe) {
                // nothing to see here
            }
        }

    } 
```

这在编译时显示错误为：-

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    Cannot make a static reference to the non-static field url
    Cannot make a static reference to the non-static field is
    Cannot make a static reference to the non-static field url
    Cannot make a static reference to the non-static field dis
    Cannot make a static reference to the non-static field is
    Cannot make a static reference to the non-static field line
    Cannot make a static reference to the non-static field dis
    Cannot make a static reference to the non-static field line
    Cannot make a static reference to the non-static field is

    at djPageDownloader.DjPageDownloader.main(DjPageDownloader.java:16) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T16:56:52.983

如果您只是从 Main 类中调用它们，请将所有字段设为静态。您不能从静态位置调用实例字段，因为您当前不在实例中。如果您希望它们保持非静态，则必须通过将 DjPageDownloader 放入构造函数中并调用它来创建 DjPageDownloader 的实例，如下所示：

```
public DjPageDownloader() {
    try {
        url = new URL("http://stackoverflow.com/");
        is = url.openStream();  // throws an IOException
        dis = new DataInputStream(new BufferedInputStream(is));

        while ((line = dis.readLine()) != null) {
            System.out.println(line);
        }
    } catch (MalformedURLException mue) {
         mue.printStackTrace();
    } catch (IOException ioe) {
         ioe.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException ioe) {
            // nothing to see here
        }
    }
} 
```

然后在你的 main 方法中调用它：

```
public static void main(String []args){
    new DjPageDownloader();//If you use it more later, store to a variable, but atm you aren't
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T16:59:07.260

```
public static URL url;
public static InputStream is = null;
public static DataInputStream dis;
public static String line; 
```

或者

```
public class DjPageDownloader {

public static void main(String []args){

    URL url;
    InputStream is = null;
    DataInputStream dis;
    String line;
    try {
        url = new URL("http://stackoverflow.com/");
        is = url.openStream();  // throws an IOException
        dis = new DataInputStream(new BufferedInputStream(is));

        while ((line = dis.readLine()) != null) {
            System.out.println(line);
        }
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T16:58:34.810

您正在从静态方法调用`url`、`is`、`dis`和`line`字段`main()`。所以它们要么自己必须是静态的，要么你必须从非静态方法（如构造函数）调用它们，并`main()`实例化`DjPageDownloader`类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T17:08:33.567

静态方法只能从方法外部访问静态方法和静态变量。因此，从主方法中，如果您想从方法外部访问任何方法或变量，则必须对它们进行静态引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T16:57:57.150

将所有字段声明移到 main 方法中。你没有使用对象本身，只是主要方法。

# android - Android 设备 (3G) 和 whatismyip.com 的 IP 不同？

> ID：12132030
> 
> 赞同：1
> 
> 时间：2012-08-26T16:54:48.193
> 
> 标签：android, networking

为什么我使用以下方法获得不同的 ip：

[连接到3G移动网络时获取android设备的IP地址](https://stackoverflow.com/questions/5818725/getting-the-ip-address-of-the-android-device-when-connected-to-3g-mobile-network)

我通过访问 whatismyip.com 来做到这一点，有没有办法获得“真实 ip”。

我看到的两个 ip 之间的区别在于，将 UDP 包发送到 whatismyip.com 的 ip 比 android 提供的 ip 更快。

我还在 logcat 中看到 whatismyip.com 的 IP 地址正在被其他服务找到：

I/pppd (3178)：本地 IP 地址 107.52.xxx.xxx
I/pppd (3178)：远程 IP 地址 66.1.xxx.xxx

所以必须有一种方法......或者其他一些服务正在从一些网络服务获取IP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T16:59:43.360

可能是您的 ISP [NAT](http://en.wikipedia.org/wiki/Network_address_translation)您的连接，因此使用 whatismyip.com 您会看到公共 IP，使用该 Android 代码您会看到私有（本地）IP

# yahoo-pipes - 在 Yahoo Pipes 中，如何删除一个字段？

> ID：12132035
> 
> 赞同：2
> 
> 时间：2012-08-26T16:55:24.193
> 
> 标签：yahoo-pipes

我在我的网站[Romneyomics](http://Romneyomics.org)上运行了一个 Yahoo Pipe，它接收来自 Delicious 和 Topsy 的提要。Delicious 提要不提供“描述”字段，但 Topsy 提供，而且不仅是链接，还有重复的详细信息行。

![在此处输入图像描述](../Images/1e3e57ba953a68636d07d7524417d759.png)

这里的图像应该显示我遇到的问题，顶部链接是我希望它看起来的样子，下面两个有我想去掉的“描述”。

这里的类似答案并没有完全回答这个问题。如果是这样，我不明白。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T05:03:09.643

目前，没有模块可以删除某些字段。这里有替代方案。

1.  ![重命名模块](../Images/c5381082848cdd42353760ebeed22c31.png)
    使用重命名为字段设置一个无意义的名称。

2.  ![循环，项目生成器模块](../Images/10ba5f48cbf508383fc6c9cbc1fe3acf.png)
    保留某些字段，并使用项目生成器和循环删除任何其他字段。

    在此示例中，除标题和链接之外的所有字段都被删除。

# facebook - 如何将上传的照片设置为头像

> ID：12132037
> 
> 赞同：0
> 
> 时间：2012-08-26T16:55:47.950
> 
> 标签：facebook, cakephp, profile

过去几天我一直在尝试这个，但似乎我错过了一些东西：好吧，我可以使用以下代码将照片上传到用户个人资料（我正在使用 cakephp 和[Nick Baker 的](https://github.com/webtechnick/CakePHP-Facebook-Plugin)facebook 插件） ：

```
$Fb = new FB();
      FB::setFileUploadSupport(true);
   $token = FB::getAccessToken();

//upload photo
$file= IMAGES.'badge.png';

$attachment = array(
    'access_token'=> $token,
    'name' => 'Album name',
    'source' => '@'.$file
                );
    $fb_photo = FB::api('/me/photos','POST', $attachment); 
```

我可以将照片上传到新相册，并且我想重定向用户以将上传的照片设置为他们的 facebook 个人资料。我遵循[了 Stack Overflow 上发布的答案，](https://stackoverflow.com/questions/4306786/how-to-set-a-facebook-profile-picture-using-the-graph-api/5431751#5431751)但似乎我仍然遗漏了一些东西。我可以使用获取上传的照片 ID，`$fb_photo['id']`但无法获取照片链接（我`$fb_photo['link']`按照评论中的建议进行了尝试，但它返回 NULL）。我做错了什么，或者我应该怎么做才能实现成功的重定向？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:18:52.793

发布照片的回调只是照片 ID，您还需要从 API 请求返回照片的完整详细信息，

所以之后

```
$fb_photo = FB::api('/me/photos','POST', $attachment); 
```

你需要做类似的事情

```
$fb_photo_details = FB::api('/'.$fb_photo);
$link = $fb_photo_details['link']; 
```

# php - 在哪里放置 $user->logged_in() 函数？用户模型或用户控制器？

> ID：12132041
> 
> 赞同：1
> 
> 时间：2012-08-26T16:56:00.527
> 
> 标签：php, codeigniter, model-view-controller, authentication

我一直将用户身份验证放在 中`application/models/user_model.php`，但这真的是放置该功能的最佳位置吗？

让我怀疑这种编码方式的原因是，我听说模型应该只适用于数据库。所以这意味着与会话相关的东西不能在模型中。真的是这样吗？

我通过`user_model`.`config/autoload.php`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:16:16.850

它应该是真实 MVC 和受 MVC 启发的设计模式中的模型层的一部分，因为`logged-in`它将是[域对象](http://c2.com/cgi/wiki?DomainObject)的状态，视图应该通过身份验证/识别服务对其进行检查。

您可能会从阅读[这篇文章](https://stackoverflow.com/a/5864000/727208)中受益，但这里有一个快速提示 - 模型不依赖于 SQL 数据库或任何其他特定的存储介质。会话只是一种不同的存储形式。

不幸的是，CodeIgniter 实际上并没有实现 MVC 或受 MVC 启发的设计模式，而是复制了 Rails。这意味着，除非您想在 CI 中实现适当的模型层（这并不容易），否则您将不得不执行此检查，CodeIgniter 将其称为“控制器”。

* * *

**更新**

您可能想研究将授权检查放在控制器外部的方法（如此处所述[）](https://stackoverflow.com/a/9685039/727208)。这样，当您检测到当前用户无权访问方法时，您将获得对代码执行的额外控制，并且不会“锁定”所选控制器。

如果您在控制器内部进行授权检查，您最终会重定向客户端，并且您必须在某些情况发生变化时重写每个控制器（因此违反[OCP](http://en.wikipedia.org/wiki/Open/closed_principle)）。

将身份验证服务的初始化和授权检查的执行放在控制器之外不会违背 MVC 的思想，因为在 MVC 的定义中，视图只负责改变模型层和当前视图的状态。关于实例化它们没有任何说明。因此，在对控制器执行操作之前初始化身份验证服务（它是模型层的一部分）是可以的。

# c# - 创建一个 Windows 挂钩来检测菜单点击

> ID：12132056
> 
> 赞同：3
> 
> 时间：2012-08-26T16:57:27.993
> 
> 标签：c#, .net, windows, hook

我想附加到一个单独的应用程序（例如 Microsoft Excel），并检测何时单击某个菜单项（或新版本中的功能区命令等）。

我以为我可以使用`RegisterWindowMessage`in来做到这一点`user32.dll`，但我不知道要拦截哪些消息。理想情况下，我想对此进行概括并检测以下内容：

```
"menu item XXX was clicked in the app YYY" 
```

我找到了这篇[CodeProject 文章](http://www.codeproject.com/Articles/18638/Using-Window-Messages-to-Implement-Global-System-H)，它展示了如何为创建控件、应用程序启动/停止等事件注册钩子，但我找不到如何获取按钮点击或菜单点击的示例。

这甚至可能吗？我是在正确的轨道上，还是我需要采取不同的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T07:06:21.497

好吧，所以我无法抗拒这里的挑战 :) 编写了一个小程序，可以满足您的需求。

**它是如何工作**的：`SetWindowsHookEx`让你放置一个全局鼠标钩子。**现在**，你得到了`X`，`Y`然后使用[WindowFromPoint](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633558%28v=vs.85%29.aspx)得到`hWnd`你的目标窗口。从这里你可以做任何你喜欢的事情，在我的例子中，我发送了一个`WM_GETTEXT`来获取它的标题。

这就是程序看起来执行的样子。单击`Begin`后，它将全局查找右键单击事件，并将它们添加到列表框中。**注意**：它需要是一个窗体应用程序，钩子不适用于控制台应用程序。

![在此处输入图像描述](../Images/e5eefba076b3e515891d9e6673e6251f.png)

用法（只需创建一个默认的 WinForms 项目并将其更改为此）：

```
 public partial class MainForm : Form
 {
    public MainForm()
    {
        InitializeComponent();
    }
    RMouseListener _native;
    private void button1_Click(object sender, EventArgs e)
    {//start
        _native = new RMouseListener();
        _native.RButtonClicked += 
             new EventHandler<SysMouseEventInfo>(_native_RButtonClicked);
    }
    private void button2_Click(object sender, EventArgs e)
    {//stop
        _native.Close();
    }
    void _native_RButtonClicked(object sender, SysMouseEventInfo e)
    {
        listBox1.Items.Add(e.WindowTitle);
    }

} 
```

* * *

实现（这是一些代码；））

```
public class SysMouseEventInfo : EventArgs
{
    public string WindowTitle { get; set; }
}
public class RMouseListener
{
    public RMouseListener()
    {
        this.CallBack += new HookProc(MouseEvents);
        //Module mod = Assembly.GetExecutingAssembly().GetModules()[0];
        //IntPtr hMod = Marshal.GetHINSTANCE(mod);
        using (Process process = Process.GetCurrentProcess())
        using (ProcessModule module = process.MainModule)
        {
            IntPtr hModule = GetModuleHandle(module.ModuleName);
            _hook = SetWindowsHookEx(WH_MOUSE_LL, this.CallBack, hModule, 0);
            //if (_hook != IntPtr.Zero)
            //{
            //    Console.WriteLine("Started");
            //}
        }
    }
    int WH_MOUSE_LL = 14;
    int HC_ACTION = 0;
    HookProc CallBack = null;
    IntPtr _hook = IntPtr.Zero;

    public event EventHandler<SysMouseEventInfo> RButtonClicked;

    int MouseEvents(int code, IntPtr wParam, IntPtr lParam)
    {
        //Console.WriteLine("Called");

        if (code < 0)
            return CallNextHookEx(_hook, code, wParam, lParam);

        if (code == this.HC_ACTION)
        {
            // Left button pressed somewhere
            if (wParam.ToInt32() == (uint)WM.WM_RBUTTONDOWN)
            {
                MSLLHOOKSTRUCT ms = new MSLLHOOKSTRUCT();
                ms = (MSLLHOOKSTRUCT)Marshal.PtrToStructure(lParam, typeof(MSLLHOOKSTRUCT));
                IntPtr win = WindowFromPoint(ms.pt);
                string title = GetWindowTextRaw(win);
                if (RButtonClicked != null)
                {
                    RButtonClicked(this, new SysMouseEventInfo { WindowTitle = title });
                }
            }
        }
        return CallNextHookEx(_hook, code, wParam, lParam);
    }

    public void Close()
    {
        if (_hook != IntPtr.Zero)
        {
            UnhookWindowsHookEx(_hook);
        }
    }
    public delegate int HookProc(int code, IntPtr wParam, IntPtr lParam);

    [System.Runtime.InteropServices.DllImport("user32.dll", EntryPoint = "SetWindowsHookEx", SetLastError = true)]
    public static extern IntPtr SetWindowsHookEx(int idHook, HookProc lpfn, IntPtr hMod, uint dwThreadId);

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    public static extern int CallNextHookEx(IntPtr hhk, int nCode, IntPtr wParam, IntPtr lParam);

    [System.Runtime.InteropServices.DllImport("kernel32.dll", CharSet = System.Runtime.InteropServices.CharSet.Auto)]
    public static extern IntPtr GetModuleHandle(string lpModuleName);

    [DllImport("user32.dll")]
    static extern IntPtr WindowFromPoint(int xPoint, int yPoint);

    [DllImport("user32.dll")]
    static extern IntPtr WindowFromPoint(POINT Point);

    [DllImport("user32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool UnhookWindowsHookEx(IntPtr hhk);

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, [Out] StringBuilder lParam);

    public static string GetWindowTextRaw(IntPtr hwnd)
    {
        // Allocate correct string length first
        //int length = (int)SendMessage(hwnd, (int)WM.WM_GETTEXTLENGTH, IntPtr.Zero, IntPtr.Zero);
        StringBuilder sb = new StringBuilder(65535);//THIS COULD BE BAD. Maybe you shoudl get the length
        SendMessage(hwnd, (int)WM.WM_GETTEXT, (IntPtr)sb.Capacity, sb);
        return sb.ToString();
    }
}
[StructLayout(LayoutKind.Sequential)]
public struct MSLLHOOKSTRUCT
{
    public POINT pt;
    public int mouseData;
    public int flags;
    public int time;
    public UIntPtr dwExtraInfo;
}
enum WM : uint
{//all windows messages here
    WM_RBUTTONDOWN = 0x0204,
    WM_GETTEXT = 0x000D,
    WM_GETTEXTLENGTH = 0x000E
}

[StructLayout(LayoutKind.Sequential)]
public struct POINT
{
    public int X;
    public int Y;

    public POINT(int x, int y)
    {
        this.X = x;
        this.Y = y;
    }
} 
```

# jakarta-ee - 管理者层与服务层

> ID：12132058
> 
> 赞同：2
> 
> 时间：2012-08-26T16:57:44.780
> 
> 标签：jakarta-ee, service-layer, 3-tier

在 3 层架构中，有 Presentation/Web 层、服务层和 DB 层。然而，在我最近参与的一个项目中，我看到了一个对我来说是新的管理层。您能否解释一下服务层/类与管理层/类之间的区别？

另外请推荐一些学习三层架构和相关模式的好书。（适用于 Java/Java EE 应用程序）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T16:55:27.050

根据我的说法：管理层是小型应用程序中服务层的一部分。在复杂的应用程序中，我们需要在 Service Layer 之上提供 Manager Layer。

通常我们不需要在具有单个 UI 的简单应用程序中两者都需要，在这种情况下，我们只管理业务逻辑层/管理器层。如果有多个 UI 和客户端，我们将服务层分为两部分来处理 UI 并在应用程序中提供其他服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T04:57:59.413

Manager 层实际上是作为一个委托组件使用的。您阅读的 3 层架构是正确的。当层实际上变得复杂时，就会出现管理器的概念；你喜欢在每一层使用一个单独的组件来做委托人的活动。通常称为经理。

因此，您所听说的新层并没有打破您目前所读到的 3 层架构的概念。

# javascript - 在 window.onbeforeunload 上确认（）

> ID：12132060
> 
> 赞同：11
> 
> 时间：2012-08-26T16:57:55.667
> 
> 标签：javascript

如果用户想要离开带有未保存表单数据的页面，我想显示一个确认对话框。我所拥有的是：

```
window.onbeforeunload = function() {
    if (not_saved) if (confirm('Changes will not be saved')) return true;
    return false;
} 
```

但无论用户点击什么，结果都是一样的——愚蠢的硬编码对话框，询问他们是要离开页面还是留在页面上。我想问他们是想留下还是离开，如果他们想留下，什么都没有发生，如果他们想离开，他们就离开。这甚至可能吗？我可以看到浏览器想要限制网站可以做些什么来让用户留在页面上，但我想我已经看到一些网站（我认为是谷歌文档）有很好的文明对话框。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-26T16:58:54.123

```
window.onbeforeunload = function(e) {
    return 'Dialog text here.';
}; 
```

文件：

*   [https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)
*   [http://dev.w3.org/html5/spec-LC/history.html#unloading-documents](http://dev.w3.org/html5/spec-LC/history.html#unloading-documents)

> **请注意，在 Firefox 4 及更高版本中，返回的字符串不会显示给用户。**
> 
> 如果事件对象的 returnValue 属性不是空字符串，或者如果事件被取消，那么用户代理应该要求用户确认他们希望卸载文档。用户代理显示的提示可能包括 returnValue 属性的字符串，或者它的一些前导子集。（例如，用户代理可能希望将字符串截断为 1024 个字符以供显示。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-26T17:06:00.240

虽然`window.onbeforeunload`有效，但它被认为是不好的做法。最好使用以下内容：

```
if (typeof window.addEventListener === 'undefined') {
    window.addEventListener = function(e, callback) {
        return window.attachEvent('on' + e, callback);
    }
}

window.addEventListener('beforeunload', function() {
    return 'Dialog Text Here';
}); 
```

首先我们检查是否`window.addEventListener`存在，它在 IE 中不存在，否则我们填充它，然后我们附加事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T13:23:01.273

使用 jQuery，您可以设置相同的处理程序。代码可能会根据您的版本有所延迟。

```
 function AnyFunction(e){ /**** your code *****/ };

    $(function () {
      $(window).bind('unload', function (e) { return AnyFunction(e); });
      $(window).bind('beforeunload', function (e) { return AnyFunction(e); });
    }); 
```

您还可以使用插件作为[bootbox更改确认或警报](http://bootboxjs.com/)[功能](https://jsfiddle.net/xpvt214o/651687/)。

# php - 访问由 PHP 中的函数创建的对象实例

> ID：12132064
> 
> 赞同：1
> 
> 时间：2012-08-26T16:58:02.410
> 
> 标签：php, oop, function

我刚刚进入 OOP PHP 但有点卡住了。

基本上我想创建一个函数来创建对象，问题是我不能访问函数之外的对象：

```
$website0 = new website(0,'test','NameTest');
echo $website0 ->getProperty('name'); 
```

这行得通。然而：

```
createWebsitesFromDatabase();
echo $website0 ->getProperty('name');

function createWebsitesFromDatabase() {
    $website0 = new website (0,'test','NameTest');
} 
```

不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:03:54.630

您必须使用返回值将创建的对象分配给函数外部的变量，这比在大多数情况下使用全局要好。

```
<?php
   function createWebsitesFromDatabase(){
       $insideVar = new website(0, 'test', 'NameTest');
       return $insideVar;
   }

   $website0 = createWebsitesFromDatabase();
   echo $website0->getProperty('name');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:01:19.067

```
function createWebsitesFromDatabase() {
   global $website0; // here is the trick
   $website0 = new website (0,'test','NameTest');
}

createWebsitesFromDatabase();    
echo $website0 ->getProperty('name'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:02:54.643

做这个：

```
function createWebsitesFromDatabase() {
global $website0;
$website0 = new website (0,'test','NameTest');
} 
```

这个链接应该澄清你的问题

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

# macos - 403 Forbidden on OS X with Apache & Zend Framework

> ID：12132065
> 
> 赞同：0
> 
> 时间：2012-08-26T16:58:22.617
> 
> 标签：macos, apache, zend-framework, http-status-code-403, vhosts

我有 Zend Framework 在 OS X Lion 10.7 上使用 AMPPS，但我想切换到预装的 PHP/Apache。但是，我的权限似乎有问题。我有以下内容`httpd-vhosts.conf`：

```
<VirtualHost *:80>
ServerName zend.local
SetEnv APPLICATION_ENV development
DocumentRoot "/Users/Andy/Dropbox/My own folder/dev/quickstart/public"

<Directory "/Users/Andy/Dropbox/My own folder/dev/quickstart/public">
    DirectoryIndex index.php
    #Options FollowSymLinks Indexes # Didn't need it with AMPPS; doesn't help when uncommented
    AllowOverride All
    Order deny,allow
    allow from All
</Directory>
</VirtualHost> 
```

这个确切的配置在我的 AMPPS 设置中对我有用。我尝试将目录和 DocumentRoot 更改为不同的文件夹（/Users/Andy/zendtest/public）并且它有效。但是，当我尝试使用我的 Dropbox 文件夹时，我得到了 403 Forbidden - 即使我在我的 AMPPS 设置中使用了同一个文件夹。我在 OS X 中使用管理员帐户。我尝试了类似主题的建议，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:26:09.443

正如我之前所说，如果 Dropbox 允许执行 TCP 以外的其他协议，这将是一个重大漏洞，我的意思是 SUPER MAJOR 漏洞。但是，这只是一个假设。但是，我只是问了一位和我一起工作的专家。他说，从安全角度来看也是一样（领子向上），但他也提到 Dropbox 不喜欢（点文件）。.htaccess、.git、.gitignore 等...前缀点通常是指隐藏文件或系统文件。此外，mime 检查将确保没有任何远程操作妨碍保管箱服务器。

关于论点，我确实说过所有 Dropbox 所做的就是创建一个文件夹或一个快捷方式。这有什么关系？听到我们谈话的另一位专家介入并说保管箱`folder`的概念与名为`/dev/null`. 您将文件移动到 dev null 或将文件移动到保管箱，它可能在您的系统上和/或它可能只是同步过来！Dropbox 使用不同的协议，而不是我们系统理解的协议。

希望这解释得很好:)

PS：如果您希望将应用程序部署在云中，这样您就不必担心它的备份和可从所有人下载。然后，您可以尝试 GitHub（如果支持，您可以连接到您的 IDE）或 PHPCloud。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:07:34.157

通过使用符号链接（符号链接）弄清楚了。我将我的`DocumentRoot`和设置`Directory`为`/Users/Andy/Sites/quickstart/public`。然后我从终端添加了一个符号链接（在添加符号链接之前该文件夹`/Users/Andy/Sites`不*存在*）：

```
cd /Users/Andy/
ln -s /Users/Andy/Dropbox/My\ own\ folder/dev/quickstart /Users/Andy/Sites/quickstart 
```

然后我更改了 Dropbox 文件夹的权限，如下所示：

`chmod 755 /Users/Andy/Dropbox`

如果这对您不起作用，请尝试在 Google 上搜索“dropbox apache”并尝试遵循有关该主题的一些教程。

# ruby - 如何在 Ruby 中为 eval 创建单独的命名空间？

> ID：12132067
> 
> 赞同：3
> 
> 时间：2012-08-26T16:58:33.610
> 
> 标签：ruby, metaprogramming

我有以下代码：

```
code = "def hi; \"hi!\"; end"
eval code

hi == "hi!" # true 
```

我可以访问 method `hi`，因为在评估代码中定义它时，它被定义为主对象的方法。

然而，这也意味着被评估的代码可以访问我在它之外定义的东西：

```
def hi; "hi!"; end
eval "hi == \"hi\"" # => true 
```

我想有一个单独的命名空间，我可以在其中运行评估代码；我该怎么做？

我尝试使用`module_eval`和使用命名空间的模块，但我无法让它定义一个方法或一个类并在另一个评估中访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:27:10.433

您可以像这样评估对象内部的代码：

```
 module DSL
    def helper_method_to_be_used_by_evaled_code
      # ...
    end

    # ...
  end

  container = Object.new
  container.extend(DSL)
  File.open(eval_file1, 'r') {|f| container.instance_eval(f.read, eval_file1)}
  File.open(eval_file2, 'r') {|f| container.instance_eval(f.read, eval_file2)} 
```

有了这个，您可以控制是否在 eval 之间保留定义：您可以重用`container`实例或处置它并创建新实例。这适用于方法定义和常量，在此类调用之间不保留局部变量。

此外，`Object`您可能想要查看`BlankState`模式，而不是。“ [blankslate](https://github.com/masover/blankslate) ”就是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:00:55.950

您似乎不是在谈论使模块成为评估代码的一部分，所以这样的事情应该可以正常工作：

```
module EvalMethods
  class << self
    code = "def hi; \"hi!\"; end"
    eval code
  end
end

puts EvalMethods::hi == "hi!" 
```

# jquery-ui - 试图让 jQuery UI 选项卡在动态内容上触发

> ID：12132071
> 
> 赞同：0
> 
> 时间：2012-08-26T16:58:43.380
> 
> 标签：jquery-ui, jquery-ui-tabs

考虑以下：

```
 var ids = [];
    function loadFeeds(id, terms) {
        $("#loadingdiv").removeClass("ui-helper-hidden");
        $('#' + id).empty(); 
      try {
            $.getJSON('https://mysite.com/search.json?q=' + terms', function(data) {
                $.each(data.results, function(i, data) { 
                $('#' + id).append('<tr><td> + data.user + '</td><td>' + data.created + '</td><td>' + data.text + '</td></tr>');                 
                });
            });
        }
        catch (e) {
            alert('Error creating feed - ' + e.Message);
        }
    }
    function loopids()
     {
       for(i=0;i&lt;ids.length;i++)
       {
          loadFeeds(ids[i][0], ids[i][1]);       
       }
     }
    function createTabsList()
     {
       $("#tabs").append('<ul id="tabsul"></ul>');
       for(i=0;i&lt;ids.length;i++)
       {
         $("#tabsul").append('<li><a href="#tabs-' + ids[i][0] +'">Test</a></li>');
       }
     }
... PAGE CODE ...
<div class="content clearfix">
          <div id="tabs" class="ui-tabs">
... REPEATER CODE ...
<div>
                      <xsl:attribute name="id">
                        tabs-<value-of select="@id"/>
                      </xsl:attribute>
                        <table class="display">
                          <tr><th>Search Results</th></tr>
                        </table>
                        <table class="display">
                          <xsl:attribute name="id">
                            <value-of select="@id"/>
                          </xsl:attribute>
                              <thead>
                                <tr>
                                    <th>
                                        User
                                    </th>
                                    <th>
                                        Date
                                    </th>
                                    <th>
                                        Message
                                    </th>
                                </tr>
                            </thead>
                          <tbody></tbody>
                        </table>
                        <script type="text/javascript">
                            ids.push(['<xsl:value-of select="@dataid"></value-of>', '<xsl:value-of select="@txtSearchParams" />']);
                        </script>
                      </div>
... END REPEATER CODE ...
            </div>
        </div> 
```

我可以让表格正确加载 - 检查 id，一切都正确，但无论我在哪里或如何调用 $("tabs").tabs() - 它都无法正确呈现内容。当它确实呈现“选项卡”时，其他表永远不会消失，并且单击选项卡会导致引发“未捕获的异常”。

如何让动态选项卡在这种情况下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:46:45.623

所以我不能完全让它工作，所以我使用动态创建的按钮创建了一个解决方法，并手动从 jQuery UI 添加 CSS 类。

```
function setTabs(){
        try
        {
         $("div.tabs > div:gt(0)").hide();
          for(var i=0;i&lt;ids.length;i++)
          {
            createButton(i, ids[i][1]);       
          }
          $(".tb").click(function(){
            $(".tb").removeClass('ui-state-active');
            //alert($(this).attr('id'));
            $(this).addClass('ui-state-active');
          });
          $(".Title").each(function(){
                var txt = decodeURIComponent($(this).text());
                $(this).text(txt);
            });
          loopids();
          $(".tb").first().addClass('ui-state-active');
          $("#loadingdiv").addClass('ui-helper-hidden');
        }
        catch(e)
        {
          alert("Error in setTabs - " + e.Message);
        }
    } 
```

这是关键功能。如果有人碰到这个，我总是可以解释更多。

# android - 具有三个以上设备的 Ad Hoc 网络

> ID：12132072
> 
> 赞同：2
> 
> 时间：2012-08-26T16:58:47.157
> 
> 标签：android, bluetooth, android-wifi, adhoc, wifi-direct

在一堆 android 设备（>3）上，是否有可能形成一个 ad hoc 网络，每部手机都可以发现彼此？我正在使用 4.0+，因此可以使用蓝牙、WiFi 或 WiFi Direct。我设法查找的先前提出的问题似乎建议 1\. 根设备，并更改配置文件等以启用 ad hoc 网络 2\. 将一个设备设置为接入点，并让其他设备连接到它。

1 不是通用的，2 不适合我设想的那种应用程序。我想要的是，如果 A、B 和 C 是设备，它们都可以相互发现并进行数据传输。两者可以同时发生吗？

# javascript - 如何使用 v3 api 从谷歌地图中清除所有标记

> ID：12132078
> 
> 赞同：-4
> 
> 时间：2012-08-26T16:59:00.010
> 
> 标签：javascript, google-maps-api-3, map

当我单击提交按钮时，我想清除所有标记。如果我有纬度和经度并想清除该标记，我该怎么做。此外，如果我搜索任何路线，我想清除所有已加载的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:48:12.363

要在插入后从地图中删除标记，您应该使用全局变量来跟踪它们：

```
var markers = []; 
```

然后，每当您向地图添加标记时，也将标记添加到`markers`数组中：

```
markers.push(new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng(20, 20)
}); 
```

* * *

要清除地图上的所有标记，您可以使用以下命令：

```
for (var i = 0; i < markers.length; i++)
    markers[i].setMap(null); 
```

如果你想同时清除`markers`数组，你可以使用这个：

```
for (var i = markers.length-1; i >= 0; i++) {
    markers[i].setMap(null);
    markers.pop();
} 
```

或这个：

```
for (var i = 0; i < markers.length; i++)
    markers[i].setMap(null);
markers = []; 
```

* * *

如果您想删除基于纬度和经度值的标记作为`LatLng`对象，您可以使用以下内容：

```
for (var i = 0; i < markers.length; i++) {
    if (markers[i].getPosition().equals(latLng)
        markers[i].setMap(null);
} 
```

如果您只有坐标，则可以使用以下内容：

```
for (var i = 0; i < markers.length; i++) {
    var latLng = new google.maps.LatLng(lat, lng);
    if (markers[i].getPosition().equals(latLng)
        markers[i].setMap(null);
} 
```

# iphone - 在应用程序在后台运行时检测 iPhone 跌落

> ID：12132084
> 
> 赞同：0
> 
> 时间：2012-08-26T17:00:11.067
> 
> 标签：iphone, accelerometer

当应用程序在后台运行时，我可以使用加速度计检测 iPhone 跌倒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:06:34.907

我不知道您是否可以在前台检测到跌倒 - 但在后台您没有跑步。所以，不，你不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:10:13.473

如果它跌倒，让您的手机响铃将是一个很好的功能！但是我很确定你不能在后台运行这样的代码。

# c# - 下拉列表选定值的奇怪行为

> ID：12132085
> 
> 赞同：0
> 
> 时间：2012-08-26T17:00:18.747
> 
> 标签：c#, asp.net

我正在用另一个 DDL 填充一个 DDL，并且我正在从另一个页面获取值`

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DropDownList1.DataSource = ProfileMasterDAL.bindcountry();
        DropDownList1.DataBind();
        DropDownList1.Items.Insert(0, "--Select country--");

    }

    if(Session["uname"]!=null)
    {
          DropDownList1.SelectedValue = Session["country"].ToString();
       ProfileMasterBLL bll=new ProfileMasterBLL();
        foreach (var VARIABLE in ProfileMasterDAL.bindcountry())
        {
            if (VARIABLE.ToString().Contains(DropDownList1.SelectedItem.Text))
            {
                var query = (ProfileMasterDAL.GetStatesByCountrys(DropDownList1.SelectedItem.Text));
                DropDownList2.DataSource = query;
                DropDownList2.DataBind();
             }
        }

        DropDownList1.SelectedIndex = DropDownList1.Items.IndexOf(DropDownList1.Items.FindByText(DropDownList1.SelectedItem.Text));

      DropDownList1.Items.FindByText(DropDownList1.SelectedItem.Text).Selected = true;
        string str = DropDownList1.SelectedItem.Value;

        DropDownList1.Items.FindByText(DropDownList1.SelectedItem.Text).Selected = true;

      var states = (new ProfileMasterDAL()).GetStatesByCountry(str);
      DropDownList2.Enabled = true;
        DropDownList2.Items.Clear();
        DropDownList2.DataSource = states;
        DropDownList2.DataBind();

    }

  <countrys>
  <country>
    <name>India</name>
    <state>
      <text>Maharashtra</text>
      <text>Kashmir</text>
      <text>Goa</text>
    </state>
  </country>
  <country>
    <name>Sri lanka</name>
    <state>
      <text>Kanady</text>
      <text>Colombo</text>
      <text>Galle</text>
    </state>
  </country>
  <country>
    <name> Australia</name>
    <state>
      <text>Sydney</text>
      <text>Perth</text>
      <text>Melbourne</text>
    </state>
  </country>
  <country>
    <name>South Africa</name>
    <state>
      <text>Capetown</text>
      <text>Johanusburg</text>
      <text>Durban</text>
    </state>
  </country>
  <country>
    <name>USA</name>
    <state>
      <text>Alabama</text>
      <text>California</text>
      <text>Detroit</text>
    </state>
  </country>
  <country>
    <name>UK</name>
    <state>
      <text>London</text>
      <text>Paris</text>
      <text>Italy</text>
    </state>
  </country>
</countrys> 
```

奇怪的问题是，如果我选择其他国家的 DDL，比如英国或美国，DropDownList1.SelectedItem.Text 值仍然是南非（会话中的值），如果我选择南非以上的国家，DDL 正在填充我不它背后的原因是什么？有什么解决方案或建议吗？

```
f (!IsPostBack)
        {
            DropDownList1.DataSource = ProfileMasterDAL.bindcountry();
            DropDownList1.DataBind();
            DropDownList1.Items.Insert(0, "--Select a country--");

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:07:43.507

这很正常，因为你每次都重新绑定你的 DDL，你必须只用一次 whane

```
if(! IsPostBack)
{
   //Just one time here

} 
```

你用 Viewstate 持久化你的 DDL

您可以在 DDL 上添加 Chandra `AutoPostBack="true"`，并在 DDL 上添加 OnSelectChanged

在您的数据库中验证您的州是否映射到国家的好名称

例如 DropDownList1.SelectedItem.Text == "USA"

```
var query = (ProfileMasterDAL.GetStatesByCountrys(DropDownList1.SelectedItem.Text)); 
```

验证州是否映射到好名称，即 USA

# linux - 在linux中定期读取性能计数器

> ID：12132096
> 
> 赞同：6
> 
> 时间：2012-08-26T17:01:41.270
> 
> 标签：linux, perf

有没有办法在linux中定期读取性能计数器？

`perf stat`我正在寻找能够对每个 X 周期进行采样的能力。

基本上，我希望能够在某些程序的每 X 个 cpu 周期中读取指令计数器（执行的指令数）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T13:45:06.433

好消息：在下一个内核（Linux 3.9）中，perf stat 将有一个选项`-I msecs`以定期打印事件增量。

[https://patchwork.kernel.org/patch/2004891/](https://patchwork.kernel.org/patch/2004891/)

> ```
> $ perf stat -I 1000 -e cycles noploop 10
> noploop for 10 seconds
> 1.000086918         2385155642 cycles                    #    0.000 GHz
> 2.000267937         2392279774 cycles                    #    0.000 GHz
> 3.000385400         2390971450 cycles                    #    0.000 GHz
> 4.000504408         2390996752 cycles                    #    0.000 GHz
> 5.000626878         2390853097 cycles                    #    0.000 GHz 
> ```

[http://man7.org/linux/man-pages/man1/perf-stat.1.html](http://man7.org/linux/man-pages/man1/perf-stat.1.html)

> ```
> -I msecs, --interval-print msecs 
> ```
> 
> 每 N 毫秒打印一次计数增量（最小值：10 毫秒）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T19:51:57.073

Linux 中的 perf 工具似乎通过在计数器达到特定值时记录事件来工作，而不是定期采样。

命令`perf record -e cycles,instructions -c 10000`每 10000 个周期和每 10000 条指令存储一个事件。它可以针对新命令或现有 pid 运行。它记录`perf.data`在当前目录中。

分析数据是另一回事。使用`perf script`让你非常接近：

```
ls 16040 2152149.005813: cycles:          c113a068  ([kernel.kallsyms])
ls 16040 2152149.005820: cycles:          c1576af0  ([kernel.kallsyms])
ls 16040 2152149.005827: cycles:          c10ed6aa  ([kernel.kallsyms])
ls 16040 2152149.005831: instructions:          c1104b30  ([kernel.kallsyms])
ls 16040 2152149.005835: cycles:          c11777c1  ([kernel.kallsyms])
ls 16040 2152149.005842: cycles:          c10702a8  ([kernel.kallsyms])
... 
```

您需要编写一个脚本，从该输出中获取一堆行并计算该集合中“循环”和“指令”事件的数量。您可以通过更改`-c 10000`录制命令中的参数来调整分辨率。

我通过运行`perf stat`和`perf record`反对验证了分析`ls /`。Stat 报告了 2 634 205 个周期、1 725 255 条指令，而脚本输出有 410 个周期事件和 189 个指令事件。该`-c`值越小，循环读数中的开销似乎就越大。

还有一个`-F`选项`perf record`，它定期采样。但是，使用此选项时，我找不到检索计数器值的方法。

**编辑：** `perf stat`显然也适用于 pid，并在按下 ctrl-c 之前捕获数据。修改源代码应该很容易，使其始终捕获 N 秒，然后循环运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:06:35.697

您可以轻松修改 perf stat 来执行此操作。

事实上，我已经实施了一个粗略的修改，很高兴与你分享这个变化。

我所做的更改主要在 while(!done) 循环中的 run_perf_stat 函数中

只需将 while(!done) {sleep(1);} 下面的行移动到循环内部，然后将睡眠更改为 nanosleep 并使用您希望采样的时间段

这应该使 perf 在 STDOUT（或 STDERR）上打印输出

如果您希望存储这些值，我建议您创建一个 struct stats 类型的二维数组，用每个样本更新它并定期写入文件

# arrays - 将 JSON 数组转换为对象（例如 [{"Name":"A"},{"Name":"B"}] 到 {"Table1":[{"Name":"A"},{"Name": "B"}]}

> ID：12132097
> 
> 赞同：0
> 
> 时间：2012-08-26T17:01:45.387
> 
> 标签：arrays, object

如何转换 JSON 数组：示例 1：

```
[{"Name":"John","Surname":"Johnson"},{"Name":"Peter","Surname":"Johnson"}] 
```

进入：示例2：

```
{"Table1":[{"Name":"John","Surname":"Johnson"}, {"Name":"Peter","Surname":"Johnson"}]} 
```

我有一些实例，有时我使用的值在一个数组中，有时不是（它只是称为一个对象吗？就像在第二个例子中一样？还是我的术语有误？）所以我只需要将数组添加到一个对象中（？）为了能够对数组（第一个示例）和带有数组的对象（？）（Example2）使用相同的功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:12:46.557

> 所以我只需要将数组添加到对象中（？）

是的。您还可以检查参数是否是方法中的数组。

```
var fn = function(mixed) {

    if(Object.prototype.toString.call(mixed) == '[object Array]') {
        mixed = {'Table1':mixed}
    }

    // do stuff
} 
```

# asp.net-mvc-3 - Adam Freeman 书中 Pro.ASP.NET.MVC.3.Framework 中的错误

> ID：12132098
> 
> 赞同：3
> 
> 时间：2012-08-26T17:02:01.160
> 
> 标签：asp.net-mvc-3

我正在关注 Adam Freeman 的这本书 Pro.ASP.NET.MVC.3.Framework。所以我下载了代码并在他的菜单类别中生成了这个 html 代码。

的HTML：

```
<a class="" href="/Chess%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20">Chess                                             </a> 
```

我按下链接时的结果（很明显）：

```
http://localhost:43190/Chess%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20 
```

我不知道有人对这本书有这个问题。

我在我的 global.asax 中尝试：

```
 routes.IgnoreRoute("favicon.ico");
            routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" }); 
```

在我的布局中：

```
 <link rel="shortcut icon" href="@Url.Content( "~/Content/themes/base/images/favicon.ico" )" type="image/x-icon" /> 
```

在我的 ninject 控制器中：

```
 protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
        {

            if (controllerType != null)
            {
                return (IController)ninjectKernel.Get(controllerType);
            }
            else
            {
                return base.GetControllerInstance(requestContext, controllerType);
            }

        } 
```

不知道有没有人和我一样的问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:09:57.873

编辑：真正的答案好的我知道我的 sql 是 nvarchar 所以它生成了空格，我改为 varchar 并且知道不生成空格

我在某处读到添加 .trim() 就可以了，是的，它可以工作，我不明白为什么要放这个（%20%20%20%20%20%20%20%20%20%20%20%20% 20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20% 20%20%20%20%20%20%20%20)

将此“category = link”更改为此“category = link.Trim()”

Menu.chtml

```
@model IEnumerable<string>
    @{
        Layout = null;
    }
    @Html.ActionLink("Home", "List", "Product")
    @foreach (var link in Model)
    {
        @Html.RouteLink(link, new {
    controller = "Product",
    action = "List",
    category = link.Trim(),
    page = 1
    }, new {@class = link == ViewBag.SelectedCategory ? "selected": null}
    )
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:16:23.673

您应该查看您的 MSSQL 数据库。在作者的书中使用`nchar`type 作为 column `Category`，你应该使用 type`nvarchar`来代替。用`nchar`空格 (%20) 填充行尾。或者您可以`ANSI-PADDING {off}`在 SQL Designer 中的字段上进行设置。

# delphi - 创建未知数量的循环

> ID：12132099
> 
> 赞同：5
> 
> 时间：2012-08-26T17:02:23.317
> 
> 标签：delphi, loops, delphi-7, permutation, combinations

这是我生成一组所有可能组合的简单代码，例如

1,2,3：

*   显示：123 132 213 231 312 321

我想创建可变数量的 for 循环，让用户确定给定字符串的长度...

有没有人有想法...

提前致谢。

```
type
  TNumber = '0'..'9';

procedure TForm1.Button1Click(Sender: TObject);
var
  Numbers: array[0..3] of TNumber;
  a, b, c, d: Integer;
  s: string;
begin
  Numbers[0] := '1';
  Numbers[1] := '8';
  Numbers[2] := '7';
  Numbers[3] := '2';
  for a := low(Numbers) to High(Numbers) do
    for b := low(Numbers) to High(Numbers) do
      for c := low(Numbers) to High(Numbers) do
        for d := low(Numbers) to High(Numbers) do
        begin
          s := Numbers[a] + Numbers[b] + Numbers[c]  + Numbers[d];
          if
            (Occurrences('1', s) > 1 ) or
            (Occurrences('8', s) > 1 ) or
            (Occurrences('7', s) > 1 ) or
            (Occurrences('2', s) > 1 )
          then
            Continue
          else
            Memo1.Lines.Add(s);
  end;
end;

function TForm1.Occurrences(const Substring, Text: string): Integer;
var
  Offset: Integer;
begin
  Result := 0;
  Offset := PosEx(Substring, Text, 1);
  while Offset <> 0 do
  begin
    Inc(Result);
    Offset := PosEx(Substring, Text, offset + length(Substring));
  end;
end; 
```

结尾。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T17:30:23.943

这是一些产生您想要的输出的代码。您需要根据自己的需要对其进行一些处理，但是此递归解决方案中表达的概念很重要：

```
program Permuatations;

{$APPTYPE CONSOLE}

type
  TElements = '1'..'3';

procedure EnumerateCombinations(const Stem: string; Len: Integer);
var
  i: Integer;
  el: TElements;
  Used: set of TElements;
begin
  if Len=0 then
    exit;
  Used := [];
  for i := 1 to Length(Stem) do
    Include(Used, Stem[i]);
  for el := low(el) to high(el) do
  begin
    if el in Used then
      continue;
    if Len=1 then
      Writeln(Stem+el)
    else
      EnumerateCombinations(Stem+el, Len-1)
  end;
end;

procedure Main;
begin
  EnumerateCombinations('', 1+ord(high(TElements))-ord(low(TElements)));
end;

begin
  Main;
  Readln;
end. 
```

**输出：**

```
123
132
213
231
312
321 
```

例如，如果您将 的定义更改为`TElements`，`'1'..'4'`您将看到 24 种可能的排列。

# zend-framework - Zend Framework：重命名上传文件

> ID：12132100
> 
> 赞同：0
> 
> 时间：2012-08-26T17:02:33.033
> 
> 标签：zend-framework

我有重命名文件的问题。我需要新文件名是西里尔字母，但是，当在 img 文件夹中重命名 img 时，新名称是“РҐСЂРёСЃС,Рѕ Р'РѕС,РµРІ.jpg”。那是我的代码：

```
 $newName = $formdata['name'];

 try {
       $ext = end(explode('.', $form->img3->getFileName()));
       path = (APPLICATION_PATH . '/../public/imgs/' . $newName . '.') . $ext;

       $form->img3->addFilter('Rename', array('target' => $path,
                        'overwrite' => true));

       $form->img3->receive();

       $form->reset();
    } 
       catch (Exception $e) 
       {
         $editMessage[][] = 'Invalid image.';
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:12:37.920

尝试：

```
$path = (APPLICATION_PATH . '/../public/imgs/' . $newName . '.') . $ext;
$path = iconv('utf-8', 'cp1251', $path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:10:11.163

尝试使用 iconv() 函数来转换文件名的编码。

[关于 iconv() 的更多信息](http://www.php.net/manual/en/function.iconv.php)

# c# - C# do-while 会在每个循环中增加进程内存。怎么修？

> ID：12132101
> 
> 赞同：1
> 
> 时间：2012-08-26T17:02:36.447
> 
> 标签：c#, loops, memory, while-loop

我正在使用 C# 程序来自动重启我的 DSL 路由器（如果它关闭）。到目前为止我写了这个：

```
using Microsoft.Win32;
using System;
using System.Diagnostics;
using System.Net;

namespace RebootRouter
{

    static class Program
    {
        [STAThread]

        static void Main()
        {
            bool ProgramLoop = true;
            do
            {
                CheckAndRun();
                System.Threading.Thread.Sleep(180000);
            }
            while (ProgramLoop == true);
        }

        public static void CheckAndRun()
        {
            if (ScreenSaverCheck.IsScreenSaverRunning() == true)
            {
                if (InternetCheck.IsConnected() == false)
                {
                    string FirefoxBinary = (string)Registry
                                   .GetValue(@"HKEY_LOCAL_MACHINE\SOFTWARE\    
                                   Microsoft\Windows\CurrentVersion\
                                   App Paths\firefox.exe", null, false);
                    Process LaunchMacro = new Process();
                    LaunchMacro.StartInfo.FileName = FirefoxBinary;
                    LaunchMacro.StartInfo.Arguments = "imacros://run/?
                                                   m=RebootRouter.iim";
                    LaunchMacro.Start();
                }
            }
        }

        public class ScreenSaverCheck
        {
            public static bool IsScreenSaverRunning()
            {
                Process[] FullProcessList = Process.GetProcesses();
                foreach (Process ProcessFromList in FullProcessList)
                {
                    if (ProcessFromList.ProcessName.EndsWith(".scr"))
                    {
                        return true;
                    }
                }
                return false;
            }
        }
        public class InternetCheck
        {
            public static bool IsConnected()
            {
                try
                {
                    IPAddress[] GoogleIPAddressList = Dns.
                                          GetHostAddresses("google.com");
                    if (GoogleIPAddressList[0].ToString().Length > 6)
                    {
                        return true;
                    }
                }
                catch (Exception)
                {
                }
                return false;
            }
        }
    }
} 
```

它按预期工作，但问题是该进程每次循环时都会将其内存使用量增加 15 KB。这是正常的还是有办法优化？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:23:54.617

我补充说：

```
public static void CheckAndRun()
{
    if (ScreenSaverCheck.IsScreenSaverRunning() == true)
    {
        if (InternetCheck.IsConnected() == false)
        {
            string FirefoxBinary = (string)Registry.GetValue(@"HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\firefox.exe", null, false);
            using (Process LaunchMacro = new Process())
            {
                LaunchMacro.StartInfo.FileName = FirefoxBinary;
                LaunchMacro.StartInfo.Arguments = "imacros://run/?m=RebootRouter.iim";
                LaunchMacro.Start();
            }
        }
    }
} 
```

和：

```
public class ScreenSaverCheck
{
    public static bool IsScreenSaverRunning()
    {
        Process[] FullProcessList = Process.GetProcesses();
        try
        {
            foreach (Process ProcessFromList in FullProcessList)
            {
                if (ProcessFromList.ProcessName.EndsWith(".scr"))
                {
                    return true;
                }
            }
        }
        finally
        {
            foreach (Process ProcessFromList in FullProcessList)
            {
                ProcessFromList.Dispose();
            }
        }
        return false;
    }
} 
```

然后我测试了：

```
static void Main()
{
    int MyInteger = 0;
    do
    {
        CheckAndRun();
        MyInteger = MyInteger + 1;
    }
    while (MyInteger < 100000);
} 
```

现在稳定了。内存不超过 5 MB。非常感谢 Douglas 和 Rob Walker。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:06:10.757

首先，您应该注意处置其类实现`IDisposable`接口的所有对象——在您的情况下，`Process`.

例如：

```
using (Process LaunchMacro = new Process())
{
    LaunchMacro.StartInfo.FileName = FirefoxBinary;
    LaunchMacro.StartInfo.Arguments = "imacros://run/?m=RebootRouter.iim";
    LaunchMacro.Start();
} 
```

处理数组时：

```
Process[] processes = Process.GetProcesses();
try
{
    foreach (Process p in processes)
        if (p.ProcessName.EndsWith(".scr"))
            return true;
}
finally
{
    foreach (Process p in processes)
        p.Dispose();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:09:18.010

您应该在启动新进程之前终止现有的 firefox 进程。未连接并不自动意味着该进程不再运行。

# android - Pusher 不适用于 Android 的 Phonegap

> ID：12132103
> 
> 赞同：0
> 
> 时间：2012-08-26T17:02:43.330
> 
> 标签：android, cordova, pusher

我遇到了问题，非常感谢您的帮助...

> Android SDK：4.0
> Phonegap：1.8.1
> Pusher：1.12

我使用 Phonegap 创建了一个需要通过 Pusher 接收服务器通知的 Android 项目。

我在 Eclipse 和 AVD 模拟器中运行它，但问题是每次我尝试建立与推送器的连接时，我都会`Unavailable`从绑定到`state_change`.

我已经在模拟器浏览器中测试了与 Internet 的连接，它工作正常。我还通过在 Firefox 上测试我的代码测试了服务器是否响应并且 Pusher 键是正确的。

这是我遵循的步骤：

1.  我已经在 src 文件夹中包含了`WebSocket.java`和文件。`WebSocketFactory.java`
2.  我已经`websocket.js`在我的 js 文件夹中包含了文件，并在文件中包含了一个引用`index.html`。
3.  我在索引文件中包含了对[http://js.pusher.com/1.12/pusher.js的引用。](http://js.pusher.com/1.12/pusher.js)
4.  我在我的 Android`App.java`文件中包含以下行： this.appView.addJavascriptInterface(new WebSocketFactory(this), "WebSocketFactory");

5.  这是我用来连接 Pusher 的代码：

```
// Connect

var pusher = new Pusher(CONFIG.PUSHER.APP_KEY);
pusher.connection.bind('state_change', connectionStateChange);

function connectionStateChange(state) {
    alert(state.current);
} 
```

有什么我想念的吗？关于为什么连接不起作用或在哪里检查的任何想法？

谢谢你的帮助。

乍得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:00:42.383

对于 pusher-js 及更高版本的 2.x 版本，该库将在 PhoneGap 中运行，无需任何额外要求或设置。只需包含库并使用它 - 不需要`WebSocket.java`or `WebSocketFactory.java`。

* * *

对于 1.x 版，此博客文章和相关代码演示了如何让 Pusher 在 PhoneGap 上工作：http: [//blog.pusher.com/2012/7/5/pusher-on-phonegap-for-android](http://blog.pusher.com/2012/7/5/pusher-on-phonegap-for-android)

# c - 为什么在这种情况下将 void 指针转换为 char 指针不起作用

> ID：12132104
> 
> 赞同：1
> 
> 时间：2012-08-26T17:02:45.530
> 
> 标签：c, casting, void-pointers

我有 void 指针，我想对其进行指针运算。为此，我想将其转换为 char 指针。

```
( char * ) buf += current_size; 
```

但是，当我这样做时，我收到以下错误：

```
error: lvalue required as left operand of assignment 
```

我也尝试在整个左侧添加括号，但没有成功。为什么我会得到这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T17:06:00.403

> 为什么我会得到这个

**仅仅因为语言规则规定，即使操作数为 one**，强制转换也不会产生左值。

> [ISO/IEC 9899:201x - n1570](http://www.open-std.org/jtc1/sc22/wg14/www/docs/post-London-2011.htm)
> 
> 在脚注中，第 91 页
> 
> 强制转换不会产生左值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T17:07:19.730

您可以通过写出赋值运算符来避免警告：

```
buf = (char *)buf + current_size; 
```

您收到警告的部分原因`sizeof(void)`是未定义，您无法对`void *`. 注意：GCC 有一个扩展，它将代码视为 if `sizeof(void) == 1`，但这不在 C 标准中。

分配的 LHS 上的演员表对分配没有影响。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T17:07:09.877

因为它是无效的，所以你不能这样做。如果你想实现这一点，要么

将 buf 声明为 char 指针；或使用临时变量：

```
char *tmp = buf; // note you don't need the casting, void * works with everything
tmp += current_size;
buf = tmp; 
```

编辑：正如其他人还建议的那样，您甚至可以删除那个丑陋的 tmp：

```
buf = (char *)buf + current_size; 
```

# google-maps-api-3 - 谷歌地图API高速公路与道路距离

> ID：12132111
> 
> 赞同：9
> 
> 时间：2012-08-26T17:03:08.093
> 
> 标签：google-maps-api-3

我正在使用谷歌地图 api 来计算从 A 点到 B 点的路线。“DirectionsResult”对象给了我很多关于距离等的信息 [。https://developers.google.com/maps/documentation/javascript/方向#DirectionsResults](https://developers.google.com/maps/documentation/javascript/directions#DirectionsResults)

但是，我很想知道高速公路上的距离（部分）是多少，而城市道路上的距离是多少。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-27T19:38:20.907

没有办法使用 API 来区分高速公路和非高速公路。

但是，您可以通过计算路线中每条腿的速度自己假设差异。

元代码：

```
// find meters per second and convert to miles per hour
mph = (route.leg[i].distance.value / route.leg[i].duration.value) * 2.23694
if mph >= 55
    route.leg[i].road = highway
else
    route.leg[i].road = city 
```

显然，如果结果考虑到交通状况，这将不起作用。

[例子](http://www.geocodezip.com/v3_GoogleEx_directions-simple_highways.html)

```
var infowindow = new google.maps.InfoWindow();
var directions = new google.maps.DirectionsService();
var renderer = new google.maps.DirectionsRenderer({
  suppressPolylines: true,
  infoWindow: infowindow,
});
var map;

function initialize() {
  var mapOptions = {
    zoom: 13,
    center: new google.maps.LatLng(40.7482333, -73.8681295),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  map = new google.maps.Map(document.getElementById('map'), mapOptions);

  google.maps.event.addDomListener(document.getElementById('go'), 'click',
    route);
  route();
}

function route() {
  var request = {
    origin: document.getElementById('from').value,
    destination: document.getElementById('to').value,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
  };

  var panel = document.getElementById('panel');
  panel.innerHTML = '';
  directions.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      renderer.setDirections(response);
      renderer.setMap(map);
      renderer.setPanel(panel);
      renderDirectionsPolylines(response);
      console.log(renderer.getDirections());
    } else {
      renderer.setMap(null);
      renderer.setPanel(null);
    }

  });

}

var polylineOptions = {
  strokeColor: '#C83939',
  strokeOpacity: 1,
  strokeWeight: 4
};
var polylines = [];

function renderDirectionsPolylines(response) {
  for (var i = 0; i < polylines.length; i++) {
    polylines[i].setMap(null);
  }
  var legs = response.routes[0].legs;
  for (i = 0; i < legs.length; i++) {
    var steps = legs[i].steps;
    for (j = 0; j < steps.length; j++) {
      // find meters per second and convert to miles per hour
      var mph = (steps[j].distance.value / steps[j].duration.value) * 2.23694
      if (mph >= 55) {
        // route.leg[i].road = highway
        color = "#FF0000";
      } else {
        // route.leg[i].road = city
        color = "black";
      }
      console.log("step " + j + " color=" + color + " mph=" + mph + " dist=" + steps[j].distance.value + " meters/time=" + steps[j].duration.value + " seconds");

      var nextSegment = steps[j].path;
      polylineOptions.strokeColor = color;
      var stepPolyline = new google.maps.Polyline(polylineOptions);
      for (k = 0; k < nextSegment.length; k++) {
        stepPolyline.getPath().push(nextSegment[k]);
      }
      polylines.push(stepPolyline);
      stepPolyline.setMap(map);
      // route click listeners, different one on each step
      google.maps.event.addListener(stepPolyline, 'click', (function(mph) {
        return function(evt) {
          infowindow.setContent("you clicked on the route<br>speed ~= " + mph.toFixed(2) + " mph<br>" + evt.latLng.toUrlValue(6));
          infowindow.setPosition(evt.latLng);
          infowindow.open(map);
        }
      }(mph)));
    }
  }
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
html,
body {
  height: 100%;
  padding: 0;
  margin: 0;
  color: black;
  font-family: arial, sans-serif;
  font-size: 13px;
}
#map {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 50%;
}
#panel-wpr {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  right: 0;
  overflow: auto;
}
#panel {
  font-family: arial;
  padding: 5px 5px;
}
#info {
  padding: 5px;
}
#from,
#to {
  width: 90%;
  font-size: 1.2em;
}
.adp-directions {
  width: 100%;
}
.input {
  background-color: white;
  padding-left: 8px;
  border: 1px solid #D9D9D9;
  border-top: 1px solid silver;
  -webkit-border-radius: 1px;
  -moz-border-radius: 1px;
  border-radius: 1px;
}
.time {
  margin: 0;
  height: 17px;
  border: 1px solid;
  border-top-color: #CCC;
  border-right-color: #999;
  border-left-color: #999;
  border-bottom-color: #CCC;
  padding: 2px 15px 1px 1px;
}
button {
  border: 1px solid #3079ED;
  color: white;
  background-color: #4D90FE;
  background-image: -webkit-gradient(linear, left top, left bottom, from(#4D90FE), to(#4787ED));
  background-image: -webkit-linear-gradient(top, #4D90FE, #4787ED);
  background-image: -moz-linear-gradient(top, #4D90FE, #4787ED);
  background-image: -ms-linear-gradient(top, #4D90FE, #4787ED);
  background-image: -o-linear-gradient(top, #4D90FE, #4787ED);
  background-image: linear-gradient(top, #4D90FE, #4787ED);
  filter: progid: DXImageTransform.Microsoft.gradient(startColorStr='#4d90fe', EndColorStr='#4787ed');
  display: inline-block;
  min-width: 54px;
  text-align: center;
  font-weight: bold;
  padding: 0 8px;
  line-height: 27px;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  -webkit-transition: all 0.218s;
  -moz-transition: all 0.218s;
  -o-transition: all 0.218s;
  transition: all 0.218s;
}
#info div {
  line-height: 22px;
  font-size: 110%;
}
.btn {} #panel-wpr {
  border-left: 1px solid #e6e6e6;
}
#info {
  border-bottom: 1px solid #E6E6E6;
  margin-bottom: 5px;
}
h2 {
  margin: 0;
  padding: 0;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js"></script>
<div id="map"></div>
<div id="panel-wpr">
  <div id="info">
    <div>
      <label>from:</label>
      <input id="from" value="New York, NY" />
    </div>
    <div>
      <label>to:</label>
      <input id="to" value="Philadelphia, PA" />
    </div>
    <div class="btn">
      <button id="go">Get Directions</button>
    </div>
  </div>
  <div id="panel"></div>
</div>
```

# python - 在 Django 中创建对象的更好方法

> ID：12132112
> 
> 赞同：0
> 
> 时间：2012-08-26T17:03:09.430
> 
> 标签：python, django, object, csv

我正在寻找更“美丽”的东西来做我正在做的事情。现在工作得很好。

```
f = open(pathdata+'blocoh2.csv', 'r')
reader = csv.reader(f)
for row in reader:
    dpt, created = Departamento.objects.get_or_create(name = row[3])
    print str(created) + "dprmentp"
    blc, created = Bloco.objects.get_or_create(nm_andar = row[5],name = row[6])
    print str(created) + "bloco"
    tplugar, created = TipoLugar.objects.get_or_create(name = (smart_str(row[2])))
    print str(created) + "tipo_lugar"
    lugar, created = Lugar.objects.get_or_create(name=row[0], utilizacao=row[1], 
                  tipoLugar = tplugar,
                  metragem = 0,
                  coordx = 0,
                  coordy = 0,
                  bloco = blc,
                  departamento = dpt)
    print str(created) + "lugar" 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:27:40.720

你可以阅读[PEP8](http://www.python.org/dev/peps/pep-0008/)并将你的代码格式化为这个 Python 标准。

# c++ - GLSL 构建错误

> ID：12132113
> 
> 赞同：0
> 
> 时间：2012-08-26T17:03:21.327
> 
> 标签：c++, opengl, glsl, shader

当我尝试从网站上整理一个 GLSL 示例程序时，我得到了这些错误，这样我就可以对着色器有所了解。当我尝试在我自己的程序中实现这个着色器时，我也会遇到这些完全相同的错误。

[http://www.swiftless.com/tutorials/glsl/1_setup.html#DL](http://www.swiftless.com/tutorials/glsl/1_setup.html#DL)

```
>------ Build started: Project: TheLightingExperiment2, Configuration: Debug Win32 ------
1>  main.cpp
1>main.obj : error LNK2019: unresolved external symbol "public: void __thiscall Shader::init(char const *,char const *)" (?init@Shader@@QAEXPBD0@Z) referenced in function "void __cdecl init(void)" (?init@@YAXXZ)
1>main.obj : error LNK2019: unresolved external symbol "public: void __thiscall Shader::unbind(void)" (?unbind@Shader@@QAEXXZ) referenced in function "void __cdecl display(void)" (?display@@YAXXZ)
1>main.obj : error LNK2019: unresolved external symbol "public: void __thiscall Shader::bind(void)" (?bind@Shader@@QAEXXZ) referenced in function "void __cdecl display(void)" (?display@@YAXXZ)
1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall Shader::Shader(void)" (??0Shader@@QAE@XZ) referenced in function "void __cdecl `dynamic initializer for 'shader''(void)" (??__Eshader@@YAXXZ)
1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall Shader::~Shader(void)" (??1Shader@@QAE@XZ) referenced in function "void __cdecl `dynamic atexit destructor for 'shader''(void)" (??__Fshader@@YAXXZ)
1>C:\Users\Shawn\Desktop\TheLightingExperiment2\Debug\TheLightingExperiment2.exe : fatal error LNK1120: 5 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:06:18.473

这些都是`undefined reference`错误。来自链接器。您没有附加库。正如您在 Visual Studio 中一样，您可以通过右键单击您的解决方案然后转到属性来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:13:24.957

看起来您缺少库。查看 GLEW the GL Extension Wrangler 并将其链接到您的项目中。它对于使着色器扩展工作特别有用。

[GLEW 页面](http://glew.sourceforge.net/)

# cuda - 如何最快地将 256 字节的数据块从一个 CUDA 块传输到另一个块？

> ID：12132115
> 
> 赞同：0
> 
> 时间：2012-08-26T17:03:40.380
> 
> 标签：cuda, gpgpu, transfer

如何最快地将 256 字节的数据块从一个 CUDA 块传输到另一个块？有没有办法比全局内存传输得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:33:56.887

理论上，在计算能力 >= 2.0 的设备上，使用全局内存的块之间的传输可能非常快，因为全局内存事务使用 L1 和 L2 缓存。

但是，在块之间安全地传输内存的唯一方法是在单独的内核调用中启动这些块。然后，您将失去我刚才描述的理论优势，因为缓存在调用之间被刷新。

在给定的内核调用中，您无法知道块将以何种顺序启动。

在由单独的内核调用启动的块之间传输数据是 CUDA 中的常见范例，如果有足够的计算工作要做，则可以完全隐藏全局内存事务的延迟。

# sql - SQL IF 语句有 3 种选择

> ID：12132117
> 
> 赞同：2
> 
> 时间：2012-08-26T17:03:55.423
> 
> 标签：sql, if-statement, ms-access-2010, calculated-columns

嘿伙计们，我真的可以使用一些帮助来编码这个 IF 语句！我设法适应了 2 个条件，但不确定第 3 个（计算）如何适应。这是伪代码中的 calc；

```
IF Producer_Type = 'Oil', Unallocated OIL&GAS = UnallocatedLossesOIL
IF Producer_Type = 'Gas', Unallocated OIL&GAS = UnallocatedLossesGAS
ELSE Unallocated OIL GAS = UnallocatedLossesOIL(MPPOil ÷ (MPPOil + MPPGas)) + 
UnallocatedLossesGAS(MPPGas ÷ (MPPOil + MPPGas)) 
```

这是我的代码：

```
SELECT qb1.CompanyName, qb1.AssetName, qb1.Year, 
IIf(qb1.Producer_Type='Oil',qb1.DatapointValue, qb2.DatapointValue) AS UnallocatedOilGas
FROM PEBaseQuery AS qb1 INNER JOIN PEBaseQuery AS qb2 ON qb1.Assetname=qb2.AssetName
WHERE qb1.DatapointID=2026 And qb2.DatapointID=2027; 
```

其中 2026 的 DatapointID 是 UnallocatedLossesOIL，而 2027 是 UnallocatedLossesGAS。计算需要参考 MPPOil 和 MPPGas 值（与特定公司/资产/年份相关，它们是来自两个单独查询的结果......任何帮助将不胜感激！抱歉，如果其中一些没有意义......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:36:55.700

嵌套if条件怎么样？我的意思是，如果可能的话，这应该有效：

```
SELECT qb1.CompanyName, qb1.AssetName, qb1.Year, 
IIf(qb1.Producer_Type='Oil', qb1.DatapointValue, 
  IIF(qb1.Producer_Type='Gas', qb2.DatapointValue,
   qb1.DatapointValue * (MPPOil / (MPPOil + MPPGas)) + 
   qb2.DatapointValue * (MPPGas / (MPPOil + MPPGas)) )) AS UnallocatedOilGas
FROM PEBaseQuery AS qb1 INNER JOIN PEBaseQuery AS qb2 ON qb1.Assetname=qb2.AssetName
WHERE qb1.DatapointID=2026 And qb2.DatapointID=2027; 
```

关于 and 的值`MPPGas`，`MPPOil`我不知道在哪里可以找到它们，所以让它们保持原样。我希望这行得通。

# r - 在 R 中编辑 CSV 文件的列名

> ID：12132119
> 
> 赞同：0
> 
> 时间：2012-08-26T17:04:00.470
> 
> 标签：r, csv, data-manipulation

我有一个简单的 CSV 文件：

```
Alpha   Beta    Gamma
1       4       4
2       6       3 
```

如何在列名中添加特定的整数或字符串，比如 1 或“June”？我期望的输出是：

```
Alpha_1 Beta_1  Gamma_1
1       4       4
2       6       3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:06:55.700

使用`paste`或。`paste0`_`names`

假设你`data.frame`被称为`test`：`names(test) = paste0(names(test), "_1")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:07:16.750

```
DF <- read.table(text='
       Alpha   Beta    Gamma
       1       4       4
       2       6       3', header=TRUE)

colnames(DF) <- paste(colnames(DF), 1, sep='_') 
```

# asp.net - 如何保存在 Response.Write 中形成的图像

> ID：12132122
> 
> 赞同：0
> 
> 时间：2012-08-26T17:04:33.797
> 
> 标签：asp.net

嗨，我在网页中使用 Response.Write 生成图像，我想将生成的图像保存在文件夹中，请帮我做。

`Response.Write("<img src='image/Black.gif'>")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:14:12.553

`Dim Image As String Image="" For i=0 to 10

图像=图像 &""

下一个 Response.Write(Image) `

将使用此代码显示图像，现在的问题是我想将其保存为我的文件夹中的单个图像（服务器端）

使用文件上传控件

```
 //Get Filename from fileupload control
    string filename = Path.GetFileName(fileuploadimages.PostedFile.FileName);
    //Save images into Images folder
    fileuploadimages.SaveAs(Server.MapPath("Images/"+filename));

if your image generated is a stream use Image class to convert it 

    Image.FromStream(yourstream);

to save it without upload control:
      Image.Save(Server.MapPath("Images/"+filename")); 
```

`Dim Image As String Image="" For i=0 to 10

图像=图像 &""

Next Response.Write(Image) ` 将使用此代码显示图像，现在的问题是我想将其作为单个图像保存在我的文件夹中（服务器端）

# typo3 - 从 Link-Type 字段构建 Typo3 链接

> ID：12132123
> 
> 赞同：0
> 
> 时间：2012-08-26T17:04:38.417
> 
> 标签：typo3, typoscript

我在后端有一个链接类型字段。它存储这样的信息：

"3 _blank" <----- 用于内部页面

"http://www.google.com _blank" <--- 用于外部页面

如何使用此值在 Typoscript 中建立链接？常见的错字链接技术在这里不适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:45:19.293

它将应用这些值作为typolink的参数

```
lib.mylink = TEXT
lib.mylink.parameter = 3 _blank 
```

它将创建一个指向页面的链接

```
<a href="index.php?id=3" target="_blank">Page title here</a> 
```

# r - ggplot2中的自动非等距中断

> ID：12132124
> 
> 赞同：3
> 
> 时间：2012-08-26T17:04:39.710
> 
> 标签：r, ggplot2

我创建一个简单的散点图，`ggplot2`并用颜色可视化 z 变量：

```
 require(ggplot2)

 data = data.frame(x=runif(1000), y=runif(1000), vis=rf(1000, df1=1, df2=3))
 qplot(x=x, y=y, data=data, color=vis) 
```

但是，这当然不是很丰富，因为分布严重偏斜：

```
 hist(data$vis) 
```

问题 - 在我看来 - 是等距的中断，它为根本不在样本中的数据创建了 bin。

所以这是我的问题：有没有一种有效的方法来克服这个问题并在更多数据可用的地方创造更多的休息时间。或者换句话说，我正在寻找非线性中断或非等距刹车。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:40:54.357

**编辑：**可能更类似于你想要的东西：

```
breaks <- quantile(data$vis)
qplot(x=x, y=y, data = data, color = vis) + 
     scale_colour_gradientn(breaks = as.vector(breaks), colours = 
     c("grey", "blue", "red"), values = as.vector(breaks), 
     oob = identity, rescaler = function(x,...) x, labels = names(breaks)) 
```

![在此处输入图像描述](../Images/a16a6d4ab4df635159a82263fe3ef315.png)

**旧答案：**在这种情况下，休息不是你真正想要的

```
qplot(x=x, y=y, data=data, color=vis) + scale_colour_gradient(breaks = 1:10 * 10) 
```

![在此处输入图像描述](../Images/19685d26b34da0abcf310bf0d0d1c214.png)

考虑到我们拥有的数据量

```
quantile(data$vis, seq(0, 1, 0.1))
          0%          10%          20%          30%          40% 
9.294095e-07 1.883887e-02 8.059213e-02 1.646752e-01 3.580304e-01 
         50%          60%          70%          80%          90% 
6.055612e-01 9.463869e-01 1.638687e+00 2.686160e+00 5.308239e+00 
        100% 
1.693077e+02 
```

所以可能像

```
qplot(x=x, y=y, data=data, color=vis) + scale_colour_gradient(limits = c(0,5)) 
```

![在此处输入图像描述](../Images/4e2e6a8ea61fbe23494b3307bf20819f.png)

会很好，这里点 > 5 是灰色的。一个更复杂的解决方案，您可能首先想要的是[this](https://stackoverflow.com/questions/10142180/using-multiple-scale-colour-gradient-scales-for-different-ranges-of-the-data-in)。

# windows - golang：跨平台路径.Dir

> ID：12132125
> 
> 赞同：11
> 
> 时间：2012-08-26T17:04:43.557
> 
> 标签：windows, path, go

我想`path.Dir()`在具有平台特定目录的 Unix 和 Windows 上使用。请看一下代码：

```
package main

import (
    "fmt"
    "path"
)

func main() {
    fmt.Println(`path.Dir("a/b/c"): `, path.Dir("a/b/c"))
    fmt.Println(`path.Dir("c:\foo\bar.exe"): `, path.Dir(`c:\foo\bar.exe`))
} 
```

这输出

```
path.Dir("a/b/c"):  a/b
path.Dir("c:\foo\bar.exe"):  . 
```

我想第二次调用`path.Dir()`（windows）类似的东西

```
c:\foo 
```

是否可以告诉`path.dir()`我在 Windows 上运行的程序使用 Windows 分隔符？或者我应该总是将反斜杠转换`\` 为正斜杠（`/`）？这里的首选策略是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T17:46:14.207

我知道“问题”在哪里。[golang-nuts 上的这个讨论](https://groups.google.com/d/topic/golang-nuts/UoRlbaSqtDk/discussion)给了我提示，它`path.Dir()`总是使用`/`并且`filepath.Dir()`是用于平台相关操作的函数。

```
package main

import (
    "fmt"
    "path/filepath"
)

func main() {
    fmt.Println(`filepath.Dir("a/b/c"): `, filepath.Dir("a/b/c"))
    fmt.Println(`filepath.Dir("c:\foo\bar.exe"): `, filepath.Dir(`c:\foo\bar.exe`))
} 
```

在窗户上：

```
filepath.Dir("a/b/c"):  a\b
filepath.Dir("c:\foo\bar.exe"):  c:\foo 
```

# graph - 在 GraphViz 中显示网络的任意图节点和边

> ID：12132135
> 
> 赞同：1
> 
> 时间：2012-08-26T17:06:16.393
> 
> 标签：graph, graphviz, graph-visualization

我想绘制一个网络，作为一个完全连接的有向图，具有任意数量的节点和边，如图所示。 ![在此处输入图像描述](../Images/f0c5c728e49672e82f55a83a38f1c4f2.png) 用 GraphViz 绘制这个的简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:23:14.427

graphviz 画廊有一个非常相似的[条目](http://graphviz.org/Gallery/gradient/cluster.html)，带有精美的图形：就像`start`在生成脚本中用您自己的名称替换名称等一样简单。把它喂给`dot`程序。

```
digraph G {bgcolor="red:cyan" gradientangle=0

    subgraph cluster_0 {
        style=filled;
        color=lightgrey;
        fillcolor="blue:yellow";
        gradientangle=90;
        node [fillcolor="yellow:green" style=filled gradientangle=270] a0;
        node [fillcolor="green:red"] a1;
        node [fillcolor="red:cyan"] a2;
        node [fillcolor="cyan:blue"] a3;

        a0 -> a1 -> a2 -> a3;
        label = "process #1";
    }

    subgraph cluster_1 {
        node [fillcolor="yellow:magenta" 
             style=filled gradientangle=270] b0;
        node [fillcolor="magenta:cyan"] b1;
        node [fillcolor="cyan:red"] b2;
        node [fillcolor="red:blue"] b3;

        b0 -> b1 -> b2 -> b3;
        label = "process #2";
        color=blue
        fillcolor="blue:yellow";
        style=filled;
        gradientangle=90;
    }
    start -> a0;
    start -> b0;
    a1 -> b3;
    b2 -> a3;
    a3 -> a0;
    a3 -> end;
    b3 -> end;

    start [shape=Mdiamond ,
        fillcolor="yellow:brown",
        gradientangle=90,
        style=radial];
    end [shape=Msquare,
        fillcolor="orange:blue",
        style=radial,
        gradientangle=90];
} 
```

# php - Socket 服务器在本地获得 500 毫秒的往返时间

> ID：12132137
> 
> 赞同：-1
> 
> 时间：2012-08-26T17:06:18.190
> 
> 标签：php, javascript, sockets, websocket

我在我们的办公室（Ubuntu 12.04）中设置了一个基本的 Ubuntu 虚拟机，并安装了基本的 LAMP 堆栈。

我使用`socket_create`. 见代码：

```
$this -> master = socket_create(AF_INET, SOCK_STREAM, SOL_TCP) or die("Failed: socket_create()");
    socket_set_option($this -> master, SOL_SOCKET, SO_REUSEADDR, 1) or die("Failed: socket_option()");
    socket_bind($this -> master, $addr, $port) or die("Failed: socket_bind()");
    socket_listen($this -> master, 20) or die("Failed: socket_listen()"); 
```

一切似乎都很好。我们可以在本地 ping 服务器并获得少于 1 毫秒的 ping 时间，但是当我们使用 Chrome 的新`WebSocket`javascript API 时，我们会以 500 毫秒的间隔持续发送和接收消息。从字面上看，如 497、501、503、500 毫秒等。

有什么建议可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:08:41.193

原来是 ESET Smart Security 防火墙保护。禁用“HTTP/HTTPS 扫描程序”立即导致速度下降到 60 毫秒，就像他们应该的那样！

# java - 搜索 Solr / SolrJ 中的所有字段

> ID：12132139
> 
> 赞同：0
> 
> 时间：2012-08-26T17:06:26.683
> 
> 标签：java, solr, solrj

有没有一种简单的方法来构建一个查询，使用一次调用 Solr 来搜索 Solr 索引中的所有字段？

我可以通过单独定义每个字段来搜索所有字段中的一些文本：

```
String textToSearchFor = "someText";
HttpSolrServer solrServer = new HttpSolrServer("http://localhost:8983/solr");

SolrQuery query = new SolrQuery();
query.setQuery( "customerName:" + textToSearchFor
                + " OR customerAddress:" + textToSearchFor
                + " OR customerNotes:" + textToSearchFor
                );
query.setQueryType("edismax");
QueryResponse rsp = solrServer.query( query ); 
```

这种方法的问题是，如果在 Solr 模式中添加或删除字段，我必须更新此代码。我希望我设置我的查询请求，以便它搜索所有可用字段，而不会强迫我指定每个字段名称。

我可以通过对 Solr 服务器的一次调用来完成此操作吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:49:45.780

这最好在模式本身中完成。定义一个`fullSearch`字段（使用适当的 fieldType），然后使用 copyField 指令将您要搜索的所有字段复制到这个新字段中。（重建索引）。然后在您的查询中，您只在这一个字段中进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:09:58.977

我可以看到您已经在使用为此目的而设计的*Extended DisMax Query Parser 。*您应该阅读有关*[Dismax Query Parser](http://docs.lucidworks.com/display/solr/The+DisMax+Query+Parser)*的文档，它是 eDismax 的某种父亲。eDismax 共享 dismax 查询解析器提供的大部分功能。

您可以在您的 solrconfig.xml 中为您的请求处理程序配置默认值。

```
<requestHandler name="standard" class="solr.StandardRequestHandler" default="true">
<!-- default values for query parameters -->
  <lst name="defaults">
    <str name="defType">edismax</str>
    <str name="q.alt">*:*</str>
    <!-- define the fields to query for here -->
    <str name="qf">customerName customerAddress customerNotes</str>
  </lst>
</requestHandler> 
```

这样你的java代码就会减少，因为queryType已经默认定义为edismax。

```
String textToSearchFor = "someText";
HttpSolrServer solrServer = new HttpSolrServer("http://localhost:8983/solr");

SolrQuery query = new SolrQuery();
query.setQuery(textToSearchFor);
QueryResponse rsp = solrServer.query( query ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:29:19.500

如果您使用的是 Solr 3.6，那么您可以使用用户字段。有关详细信息，请参阅[此](https://issues.apache.org/jira/browse/SOLR-3026)JIRA 问题和[此](http://wiki.apache.org/solr/ExtendedDisMax#qf_.28Query_Fields.29)Wiki 页面。

您需要将以下内容添加到查询或`solrconfig.xml`

> uf="* 所有字段"
> 
> f.allFields.qf="customerName customerAddress customerNotes"

之后，只需在字段中`allFields`搜索，它将在 3 个字段中进行搜索`customerName customerAddress customerNotes`。您可以根据需要创建任意数量的此类用户字段。

# uiscrollview - 目标c中的圆形无限滚动视图

> ID：12132154
> 
> 赞同：1
> 
> 时间：2012-08-26T17:08:03.963
> 
> 标签：uiscrollview

我在 uiscrollview 中添加了一个按钮，一次在滚动视图中添加了 5 个按钮。我想在 uiscrollview 中制作一个圆形效果而不需要分页以下功能。

1.  以圆形滚动为例：5 1 2 3 4 5 1
2.  当在滚动视图中选择任何按钮时，在 uiscrollview 中进行选择，如 uipickerview。然后它进入中心：

    例如--选择前：1 2 3 4 5，假设选择第5个按钮，然后选择后：3 4 5 1 2.当从中心选择左按钮时向右移动滚动视图，当右btn然后向左移动滚动视图.

3.  假设在滚动过程中选择按钮时滚动滚动视图，则不会触发按钮事件。

# java - 出现在同一帧

> ID：12132157
> 
> 赞同：2
> 
> 时间：2012-08-26T17:08:23.707
> 
> 标签：java, swing, jframe, jpanel

我希望两个不同的图像出现在两个不同的帧中。问题是这段代码没有显示这两个图像（圆圈），而只显示最后一个。任何帮助将不胜感激！谢谢你。

```
public class MyCanvas extends JPanel {

private static final long serialVersionUID = 1L;
static int paint=0;

public MyCanvas(){              
}

public void paintComponent(Graphics graphics){  

    System.out.println("mpika!!!"); 
    //  super.paintComponent(graphics);
        if(paint==0){
            graphics.setColor(Color.blue);
            graphics.drawOval(250,250,250,250);                        
        }
        else{       
            graphics.setColor(Color.red);       
            graphics.drawOval(150,150,150,150);                        
        }
}

public static void other(){
    JFrame frame2 = new JFrame();
    MyCanvas canvas2 = new MyCanvas();
    frame2.setSize(700, 700);
    frame2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame2.add(canvas2);
    frame2.setVisible(true);
    Graphics graph2 = canvas2.getGraphics();
    canvas2.paintComponent(graph2); 

}
public static void main(String[] args){
    double t;
    JFrame frame = new JFrame();
    MyCanvas canvas = new MyCanvas();
    frame.setSize(700, 700);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(canvas);
    frame.setVisible(true);
    Scanner input = new Scanner(System.in);
    Graphics graph = canvas.getGraphics();
    canvas.paintComponent(graph);   
//      t = input.nextInt();

    paint=1;
    other();

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:19:13.857

你从不打电话`setVisible`。`frame2`

同样`paint`是静态的：

静态int油漆= 0；

你只会看到一种颜色。

解决方案是将它变成一个成员变量 in `MyCanvas`，例如：

```
public void setColorFlag(int color) 
```

或者最好还是传入圆圈颜色（！）。

# apache - 如何使用 .htaccess 设置（apache 2）在服务器上存储压缩文件？

> ID：12132158
> 
> 赞同：2
> 
> 时间：2012-08-26T17:08:30.430
> 
> 标签：apache, gzip

我正在寻找在我的 .htaccess 上设置的规则，以便在从服务器压缩压缩文件时将压缩文件存储在服务器上。如果有可能，我可以从始终 gzip 相同的文件中保存 cpu，并且服务器可以简单地发送 gzip 压缩文件而不是“即时”压缩它。

这是我的 .htaccess 配置

```
 # BEGIN Compress text files
    <ifModule mod_deflate.c>
      <filesMatch "\.(css|js|x?html?|php)$">
        SetOutputFilter DEFLATE
      </filesMatch>
    </ifModule>
    # END Compress text files

    # BEGIN Expire headers
    <ifModule mod_expires.c>
      ExpiresActive On
      ExpiresDefault "access plus 1 seconds"
      ExpiresByType image/x-icon "access plus 2592000 seconds"
      ExpiresByType image/jpeg "access plus 2592000 seconds"
      ExpiresByType image/png "access plus 2592000 seconds"
      ExpiresByType image/gif "access plus 2592000 seconds"
      ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
      ExpiresByType text/css "access plus 604800 seconds"
      ExpiresByType text/javascript "access plus 216000 seconds"
      ExpiresByType application/javascript "access plus 216000 seconds"
      ExpiresByType application/x-javascript "access plus 216000 seconds"
      ExpiresByType text/html "access plus 600 seconds"
      ExpiresByType application/xhtml+xml "access plus 600 seconds"
    </ifModule>
    # END Expire headers

    # BEGIN Cache-Control Headers
    <ifModule mod_headers.c>
      <filesMatch "\.(ico|jpe?g|png|gif|swf)$">
        Header set Cache-Control "max-age=2592000, public"
      </filesMatch>
      <filesMatch "\.(css)$">
        Header set Cache-Control "max-age=604800, public"
      </filesMatch>
      <filesMatch "\.(js)$">
        Header set Cache-Control "max-age=216000, private"
      </filesMatch>
      <filesMatch "\.(x?html?|php)$">
        Header set Cache-Control "max-age=600, private, must-revalidate"
      </filesMatch>
    </ifModule>
    # END Cache-Control Headers

    # BEGIN Turn ETags Off
    <ifModule mod_headers.c>
      Header unset ETag
    </ifModule>
    FileETag None
    # END Turn ETags Off

    # BEGIN Remove Last-Modified Header
    <ifModule mod_headers.c>
      Header unset Last-Modified
    </ifModule>
    # END Remove Last-Modified Header 
```

谢谢

# html - SVG作为CSS背景的标题警告

> ID：12132160
> 
> 赞同：1
> 
> 时间：2012-08-26T17:08:41.947
> 
> 标签：html, css, apache, svg, http-headers

> **可能重复：**
> [在 <img> 中加载 SVG 时，Chrome 会发出警告](https://stackoverflow.com/questions/5065887/chrome-gives-a-warning-when-loading-an-svg-in-an-img)

我有一个奇怪的问题。此问题的现场演示位于[beta.netbarg.com](http://beta.netbarg.com)

问题是，我编写了一个 SVG 文件作为元素的背景属性。这是样式表：

```
#lightburst {
    ...
    background: url('../nb2img/non-sprites/backlight.svg');
    ...
} 
```

根据[这个链接](http://kaioa.com/node/45)和[这个](https://jwatt.org/svg/authoring/)链接，我已经将 Apache 配置为发送`Content-Type: image/svg+xml`我的 SVG 文件的标头。

**奇怪的部分：**

*   在 Windows 上，一切正常。
*   在 Linux (Ubuntu 10.4 - Chromium-browser/11) 控制台上记录一个奇怪的警告：`Resource interpreted as Image but transferred with MIME type image/svg+xml`

这是什么？这是一个错误吗？我应该如何处理这个警告？

# c# - DataContractSerializer 将对象列表中的重复属性引用反序列化为 null

> ID：12132162
> 
> 赞同：2
> 
> 时间：2012-08-26T17:09:01.930
> 
> 标签：c#, .net, wcf, datacontractserializer

一切都很好，对象正在使用 datacontractserializer 进行序列化和反序列化。然而，我的一位同事为我创建了一个样本，但并没有按预期进行。场景是这样的：我们有一个对象列表，它们由作为对象引用的属性组成，因为这些是从 edmx 创建的 POCO 实体，所以会有循环引用，我已将 PreserveObjectReferences 设置为“true”，**但现在如果列表中的两个项目包含相同的属性引用，则只有其中一个会反序列化，而另一个会将其属性反序列化为 null！！！！**

DataContractSerializer 配置如下：

编辑：解决我自己的问题后，我只发布了序列化的简化版本。

**即使在简化版本中，我使用相同的序列化器进行序列化和反序列化，以及相同的 MemoryStream，它仍然是相同的，反序列化不会产生原始列表 :((**

```
returnType = result.GetType().ToString();
serializer = new DataContractSerializer(result.GetType(), null, 0x7fff, false, true, null);
tempStream = new MemoryStream();
serializer.WriteObject(tempStream, result);
tempStream.Position = 0;
serializedReturn = new StreamReader(tempStream).ReadToEnd();
tempStream.Position = 0;
object res = serializer.ReadObject(tempStream); 
```

POCO 实体由名为“POCO 实体生成器”的 T4 模板创建，可在 Visual Studio 的扩展在线图库中找到。它们没有用 datacontract 和 datamember 属性装饰，但它仍然有效。

我只是不知道可能出了什么问题，因为如果我没有重复引用，一切都很好，有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T17:41:01.183

好的，由于没有人回答或帮助这件事，我自己找到了解决方案。不幸的是，.NET 自己的 DataContractSerializer 存在错误，相反我使用了 James NewtonKing 的 Json.NET，感谢他制作了一个非常适合我的情况的序列化器，而微软的却没有。

[http://json.codeplex.com/](http://json.codeplex.com/)

# c# - DeploymentItem 在 VS2010 和 VS2012 中的行为不同

> ID：12132164
> 
> 赞同：9
> 
> 时间：2012-08-26T17:09:14.143
> 
> 标签：c#, mstest, visual-studio-2012, .net-4.5, deploymentitem

我有一个 VS2010 解决方案，我正在尝试升级到 VS2012。

我在 VS2012 中的 MSTest 单元测试有问题。所有测试都包括测试类的 DeploymentItem 属性。

```
[TestClass]
[DeploymentItem(@"SubDir\SubDir2\models", "models")]
public class UnitTests
{ ... } 
```

在 2010 年，它正确地从`SolutionDirectory\SubDir\SubDir2\models`目录复制依赖文件。

在 2012 年，它试图从部署测试的目录中复制`SolutionDirectory\UnitTests\bin\debug\SubDir\SubDir2\models`

我正在寻找一种方法来恢复旧的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:38:17.240

如果您在解决方案中创建测试设置文件，请在其中启用部署（默认情况下，部署在测试设置中处于关闭状态）并在测试资源管理器中选择它（测试 -> 测试设置 -> 选择测试设置文件），那么它应该也可以在不更改代码的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T17:18:23.653

安装 vs2012 和 .net 4.5 后，deploymentitemattribute 似乎与它移动文件的位置以及可执行文件在执行测试期间查找文件的位置不同步。

便宜的解决方法：

1.  保持 deploymentitemattribute 路径不变
2.  查看文件被移动到的位置
3.  更改测试代码以查看该位置

在此升级之前，mstest 足够聪明，即使部署项已移动到 bin 目录中的子目录，也可以找到它们。似乎不再是这种情况了。

因此，在升级之前，一行单元测试代码可能看起来像这样......

```
FileInfo fi = new FileInfo("temp.txt"); 
```

升级后，一行单元测试代码可能如下所示...

```
FileInfo fi = new FileInfo("\SubDir\SubDir2\models\temp.txt"); 
```

# visual-studio-2010 - 运行时的代码域

> ID：12132166
> 
> 赞同：0
> 
> 时间：2012-08-26T17:09:30.027
> 
> 标签：visual-studio-2010, code-generation, codedom, class-diagram

我正在使用 vs 2010 可视化和建模 sdk 构建代码生成工具。我需要生成的一件事是一个简单的数据捕获 ui（windows 窗体，最好使用 devexpress 布局控件），其中包含类中每个属性的捕获字段和标签。

我可以使用 t4 文本模板来执行此操作，但我意识到如果我这样做，我将重新发明轮子 - 一种更简单的方法是将控件添加到在运行时构造的表单并允许适当的 codedomseriaizer 生成适合我的 form.designer.cs 代码 - 这可能吗？

总而言之，我想在运行时构建一个表单，并检索 Designer.cs 文件的字符串..

格雷厄姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:39:12.700

您不能简单地保留运行时生成代码，而只使用设计器设计表单的其他部分吗？这样，如果将新属性添加到类中，自动生成的控件将自动更新。

# html - Picmonkey 拼贴布局 Javascript

> ID：12132169
> 
> 赞同：0
> 
> 时间：2012-08-26T17:09:54.497
> 
> 标签：html, layout

我想复制类似于的动态拖放布局

[http://www.picmonkey.com/](http://www.picmonkey.com/)拼贴，

您可以在容器边缘拖动项目并将其放置并相应地调整布局。

你知道任何算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:14:23.747

看一下

[http://www.sitepen.com/blog/2011/12/05/dojo-drag-n-drop-redux/](http://www.sitepen.com/blog/2011/12/05/dojo-drag-n-drop-redux/)

如果你在谷歌中搜索，还有更多这样的例子。选择任何人，你就可以开始了。

# android - 显示列表中的随机单词

> ID：12132170
> 
> 赞同：0
> 
> 时间：2012-08-26T17:09:55.423
> 
> 标签：android, random

我是初学者，我正在制作一个 android 应用程序。我的目标是让应用程序在按下按钮时从单词列表中随机返回一个特定单词。我该怎么做呢？另外，我正在使用eclipse并且根本没有太多经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:13:51.050

由于您已经在问题中提到要从单词列表中生成一个单词，因此我假设您已经准备好列表。

使用以下内容生成一个随机数，然后显示与该索引对应的单词。

```
Random randomGenerator = new Random();
int randomInt = randomGenerator.nextInt(100); // maximum value 100; you can give this as the maximum index in your list of words 
```

***注意***：不要使用**Math.random**（它产生双精度，而不是整数）

**`import java.util.Random;`**

编辑 ：

假设您有一个包含 30 个单词的字符串数组中的单词列表。

```
String wordList[] = new String[30];
// enter the words in the wordList (if you have a String, use a Tokenizer to get the individual words and store them in wordList)
int randomInt = randomGenerator.nextInt(30);
String wordToDisplay = wordList[randomInt]; 
```

然后，您可以使用在 TextView 中显示 wordToDisplay`mTextView.setText(wordToDisplay);`

# javascript - 使用 AJAX 设置对象属性

> ID：12132174
> 
> 赞同：0
> 
> 时间：2012-08-26T17:10:22.617
> 
> 标签：javascript, ajax, oop, jquery

我是 OOP 的新手，我尝试使用 ajax 请求构建一个对象。我需要的是获取 JSON 格式的“responseArray”，然后进行处理。

```
function adres(adres) {

this.adres_string = adres;
var self = this
$.ajax({
    type: 'POST',
    url: "http://nominatim.openstreetmap.org/search?q="+adres+"&format=json&polygon=0&addressdetails=0",
    success: function(data) {
        self.responseArray = eval('(' + data + ')')

    }

})

//Method returning point coordinates in EPSG:4326 system
this.getLonLat = function() {

    var lonlat = new OpenLayers.LonLat(this.responseArray.lon, this.responseArray.lat);
    return lonlat;

}
} 
```

当我在应用程序代码中编写时，问题就开始了：

```
var adr = new adres('Zimna 3, Warszawa');
adr.getLonLat(); 
```

这不会返回任何内容，因为没有时间从服务器获取响应。如何以最好的方式正确编写它？我读过 jQuery 中的 when().then() 方法。这对我来说可能没问题。我只想了解最佳实践

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:17:55.887

这就是 AJAX 的工作方式（注意*A*同步部分）。你是对的，你呼叫`adr.getLonLat()`响应的那一刻还没有回来。这是我建议的设计：只需将回调函数引用传递给`adres`构造函数：

```
function adres(adres, callbackFun) {
  //...
  success: function(data) {
    var responseArray = eval('(' + data + ')')
    var lonlat = new OpenLayers.LonLat(responseArray[i].lon, responseArray[i].lat);
    callbackFun(lonlat)
} 
```

并这样称呼它：

```
adres('Zimna 3, Warszawa', function(lonlat) {
  //...
}) 
```

几点说明：

*   `adres`现在基本上是一个函数，你在这里不需要一个对象。

*   不`eval`用于解析 JSON，使用`JSON`对象。

*   你确定你可以 POST 到`http://nominatim.openstreetmap.org`? 您可能会遇到相同的原产地政策问题

*   `i`变量来自哪里`responseArray[i]`？

# c# - 将 IOrderedEnumerable 转换回自定义列表

> ID：12132175
> 
> 赞同：-1
> 
> 时间：2012-08-26T17:10:35.550
> 
> 标签：c#

我如何转换

`public class MyCustomList: List<MyCustomList>`

下单后返回`MyCustomList`？

`myCustomListObject = myCustomListObject.OrderBy(...);`

我试过`.ToList() as myCustomListObject`哪个返回null。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:19:48.997

问题是 ToList() 将返回一个列表。您不能将它转换为 MyCustomList ，就像您不能将另一个对象转换为某些它不是的东西一样。

```
List<string> result = myCustomListObject.OrderBy(...).ToList(); 
```

如果你真的需要一个 MyCustomListObject ，你应该创建一个接受显式转换操作的构造函数。

如果 MyCustomList 只是 List<string> 的另一个名称，您可以使用：

```
using MyCustomList = List<string>; 
```

然后它会像你想要的那样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T19:32:13.847

```
public class MyCustomList: List<MyCustomList>
{
  //stuff you already have here, including your current constructors
  public MyCustomList(IEnumerable<MyCustomList> source)
  {
    //something here that (perhaps after using `this` to call
    //one of the existing constructors, loads all of the items
    //in source into it. There may be optimisations available
    //in particular cases, as a bonus.
  }
} 
```

如果您真的希望能够做类似`ToList()`样式的事情，那么您可以添加：

```
public static class MyBigOClassOHelpfulStaticMethods //maybe pick a better name
{
  public static MyCustomList ToMyCustomList(this IEnumerable<MyCustomList> source)
  {
    return new MyCustomList(source);
  }
} 
```

这与`ToList()`工作原理相去甚远。

尽管如此，如果你要经常用新的重写第一个，那么调用而不是`MyCustomList`调用会有一些好处，就像对列表进行就地排序一样。`Sort``OrderBy``Sort`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T17:14:01.783

简单的返回值`OrderBy`不是 的实例`MyCustomList`，也不是 的返回值`ToList`。因此，您*不能*将其转换为`MyCustomList`.

您唯一的选择是：

*   您创建 的新实例`MyCustomList`并添加`OrderBy`.
*   您将`MyCustomList`实例的当前内容替换为`OrderBy`.

如果不知道更多关于你的`MyCustomList`班级，就不可能说出更多。但是，由于它继承自`List<MyCustomList>`，因此可以假设上述两个选项都是可行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T17:20:08.637

我同意 OR Mapper 的观点，在不了解 MyCustomList 的情况下很难回答。但是你可以做一些像这样简单的事情（同样，在不知道更多的情况下，这现在可能有效）：

```
void Main()
{
    var list = new MyList() { new Stuff() { ugg = "z" }, new Stuff() { ugg = "b" } };

    var myOrderedList = list.OrderBy(s => s.ugg);

    myOrderedList.ToList().Dump();

    var list2 = new MyList();
    list2.AddRange(myOrderedList);
    list2.GetType().Name.Dump();
}

public class Stuff{
    public string ugg {get;set;}
}
// Define other methods and classes here
public class MyList : List<Stuff>{
} 
```

我使用 LinqPad 使用`Dump()`扩展方法显示内容和类型名称。

# resharper - ReSharper 实时模板可以进行条件代码生成吗？

> ID：12132176
> 
> 赞同：2
> 
> 时间：2012-08-26T17:10:44.327
> 
> 标签：resharper, live-templates

示例：我想要一个插入方法的模板。如果声明了类`sealed`，那么我希望声明方法`private`。如果该类不是`sealed`，那么我希望声明该方法`protected virtual`。

另一个例子。如果类是继承的，并且超类包含一个方法`X`，则调用，`base.X();`否则什么也不做。

ReSharper 中是否提供这种类型的条件处理？我想这已经接近 T4 领域，但能够在 Live Templates 中做到这一点真的很方便。

以防万一，我使用的是 R# 7。

## 详细场景

这两个要求都来自尝试为 IDisposable 模式编写实时模板（请参阅[正确实现 Disposable 模式](http://www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P)）。生成的代码需要根据类是基类还是子类而有所不同。可以定义两个模板，但不难想象其他有用的场景。这是我的 IDisposable 模板中的代码：

```
#region IDisposable Pattern
    /// <summary>
    ///   Finalizes this instance (called prior to garbage collection by the CLR)
    /// </summary>
    ~$ClassName$() {
    Dispose(fromUserCode: false);
    }

public void Dispose()
{
    Dispose(fromUserCode: true);
    GC.SuppressFinalize(this);
}

private bool disposed = false;

// Declare as private if this class is sealed.
protected virtual void Dispose(bool fromUserCode)
{
    if (!disposed)
    {
        if (fromUserCode)
        {
            // ToDo - Dispose managed resources (call Dispose() on any owned objects).
            // Do not dispose of any objects that may be referenced elsewhere.
        }

        // ToDo - Release unmanaged resources here, if necessary.
    }
    disposed = true;

    // ToDo: Call the base class's Dispose(Boolean) method, if available.
    // base.Dispose(fromUserCode);
}
#endregion 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T21:12:36.520

你当然可以做到这一点。您需要的是一个插件，它实现了执行实际检查的相应[实时模板宏。](http://confluence.jetbrains.net/display/ReSharper/4.04+Live+Template+Macros+%28R7%29)

# javascript - 使用 .join 方法将数组转换为不带逗号的字符串

> ID：12132178
> 
> 赞同：159
> 
> 时间：2012-08-26T17:11:12.790
> 
> 标签：javascript, jquery

> **可能重复：**
> [没有分隔符的数组 join() 方法](https://stackoverflow.com/questions/2125779/array-join-method-with-a-separator)

我正在使用`.join()`将数组转换为字符串，以便在用户在计算器中选择数字时将其输出到文本框中，但我不完全确定如何删除也在列表中输出的逗号. 有人可以建议如何实现这一点，或者我应该使用不同的方法吗？

**JS**

```
$(document).ready(function() {
    var total = 0;
    var arr = [];

    //Testing
    $('#calculator').children('.num').on('click', function(e) {
        var clickedNumber = $(this).data('id');
        arr.push(clickedNumber);
        console.log(arr.join());
        e.preventDefault();
    });
});​ 
```

JS 小提琴[http://jsfiddle.net/CVr25/](http://jsfiddle.net/CVr25/)

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2012-08-26T17:14:41.703

就像这样：

```
arr.join("") 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-08-26T17:15:20.563

您可以指定一个空字符串作为加入的参数，如果没有指定参数，则使用逗号。

```
 arr.join(''); 
```

[http://jsfiddle.net/mowglisanu/CVr25/1/](http://jsfiddle.net/mowglisanu/CVr25/1/)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-08-26T17:22:44.680

该[`.join()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)有一个用于分隔字符串的参数。如果您希望它为空而不是默认逗号，请使用

```
arr.join(""); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-08-26T17:15:32.427

您需要做的就是：

```
arr.join(''); 
```

[**小提琴**](http://jsfiddle.net/CVr25/4/)

# c++ - 在 C++ 中用随机数填充二维数组

> ID：12132183
> 
> 赞同：0
> 
> 时间：2012-08-26T17:11:53.660
> 
> 标签：c++, arrays, random, variable-assignment, double-pointer

我正在制作一个程序，该程序插入一个带有随机整数的二维数组并定位最高值以显示它以及它在数组中的坐标。我正在使用三个文件。utils.h、utils.cpp 和 main.cpp。我的程序显示了一个数组，但它不正确，尽管我进行了所有研究，但我无法弄清楚原因。任何帮助，将不胜感激。这是一项大学作业，我知道我的教授希望 main 和 utils.h 保持原样，所以我唯一可以更改的是 utils.cpp。感谢您的时间。

```
#include "utils.h"

void fillTable(int table[ROW_COL_SIZE][ROW_COL_SIZE]) {
    for(int i = 0; i < ROW_COL_SIZE; i++) { 
        for(int c = 0; c < ROW_COL_SIZE; c++) { 
            cout << rand() % table[i][c];
        }
    }
} 

void findLargest(int table[ROW_COL_SIZE][ROW_COL_SIZE], int& largestRow, 
                 int& largestCol) {
    largestRow = 0;
    largestCol = 0;

    for ( int i = 0; i < ROW_COL_SIZE; i++) {
        for ( int j = 0; j < ROW_COL_SIZE; j++) {
            if(table[i][j] > table[largestRow][largestCol]) {
                largestRow = i;
                largestCol = j;
            }
        }
    }
}

void displayTable(int table[ROW_COL_SIZE][ROW_COL_SIZE]) {
    for (int i = 0; i < 10; i++) {
        for ( int j = 0; j < 10; j++) {
            cout << table[i][j];
        }
    }
} 
```

这是我得到的输出。

```
55302337713078127332504421405961229072248303443307961481223132483391855019110600
92808812679236602328231529150663269913935376911094217591887215022974011255316512
71103276228950168692675422850260269511370054042617128509148242205517590190271332
93168530667935211606208729747118402681321223203422069312038223266476231187148148
05966618422064721159313592422312213211891498452701498229001417726265175102184575
4298481247015001631326472115171254718059341323252489617888241851323216308-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460-858993460-858993460-858993460-858993460-858993
460-858993460-858993460-858993460The largest value located at [0] [0] is: -85899
3460
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:16:40.080

应该`fillTable`填`table`吗？目前它没有 - 它只打印到`cout`. 因此，`table`似乎保持未初始化。

因此，在 中`fillTable`，而不是：

```
cout << rand() % table[i][c]; 
```

你可能想要这样的东西：

```
table[i][c] = rand(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:21:08.917

在`fillTable`你应该使用类似的东西：

```
table[i][c] = rand() % MAX_VALUE; // MAX_VALUE is the largest value +1 you want to generate
cout << table[i][c] << " "; 
```

（注意分隔数字的空格，您可能还想`cout << endl;`在每行之后插入一个。但我不确定是否`fillTable`还应该打印出这些值？）

此外，该`displayTable`函数仅打印前十行/列（但这可能是故意的？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:22:33.847

您只是在输出随机数，而不是在其中插入。像这样做

```
table [i][c] = rand () % table [i][c] ; 
```

另外，当您找到最大值时，您会得到一个垃圾值，因为数组中没有存储实际值。

# emacs - 防止将鼠标选择的文本放入 Emacs 粘贴缓冲区？

> ID：12132184
> 
> 赞同：2
> 
> 时间：2012-08-26T17:11:58.697
> 
> 标签：emacs, editor, cua-mode

在 emacs 中，有一个功能，如果我用鼠标选择文本，那么 `ctrl-c`如果我打开了 cua 模式，我可以用 ctrl-v 粘贴到 emacs 中。

我想在保持 cua 模式的同时关闭此功能。我的意思是我想明确地按 ctrl-c 以便将文本复制到剪贴板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:24:51.097

我怀疑您使用的 Emacs 版本早于 24 版？[如果是这样，请参阅当前 Emacs 手册本页](http://www.gnu.org/software/emacs/manual/html_node/emacs/Clipboard.html#Clipboard)的最后一段。`x-select-enable-primary`您可能可以通过设置来摆脱您不喜欢的行为`nil`。

根据我的快速测试，将其设置为`T`（这不是 Emacs 24 上的默认设置）会重现问题行为，并且这发生在`cua-mode`.

# android - TableLayout 与图标对齐

> ID：12132186
> 
> 赞同：0
> 
> 时间：2012-08-26T17:12:10.327
> 
> 标签：android, icons, alignment, tablelayout

这是我的 XML。我想将图标向左对齐，文本应该出现在图标旁边，并留有一些空间，就像你在其他地方看到的那样。但是文本显示在中心。（或右对齐到第二列，在两列布局中）

```
 <?xml version="1.0" encoding="utf-8"?>
  <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/main_scroll"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:fillViewport="true" >

  <TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:background="@android:color/white"
    android:layout_margin="5dp"
    android:stretchColumns="2"  
    android:layout_height="wrap_content">

       <TableRow
        android:id="@+id/events_header"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@android:drawable/list_selector_background"
        android:clickable="true"
        android:padding="5dip">
              <ImageView android:id="@+id/ImageView02" 
                  android:src="@drawable/event_icon"
                      android:layout_width="wrap_content"
          android:layout_height="wrap_content"
                  android:layout_gravity="center_vertical|left"
                  android:layout_margin="5dp">
              </ImageView>
              <TextView
                android:id="@+id/text1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="View Events"
                android:layout_gravity="left"
                android:textSize="21dp"
                android:textStyle="bold"
                android:background="@android:color/black"
                android:textColor="@android:color/white" />
         </TableRow>
        </TableLayout>
   </ScrollView> 
```

这是它的显示方式：

```
 [  *             View Events        ] 
```

*   是图标。我想这样显示。

    ```
    [  *  View Events                   ] 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:33:09.353

尝试更改`android:stretchColumns="2"`为，`android:stretchColumns="1"`因为列索引以**0**开头。因此，如果您只有两列，则第二列位于索引**1**处。

# rest - 我需要在每个回复中提供所有链接吗？

> ID：12132187
> 
> 赞同：0
> 
> 时间：2012-08-26T17:12:12.383
> 
> 标签：rest, hateoas

我尝试遵循**HATEAOS**约定。对于每个响应，我将提供指向另一个页面的链接。

我知道我可以提供下一页的链接（用于记录分页）。我的问题是，我是否需要提供常见页眉和页脚的链接（包括登录/注销、导航栏、常见信息 - 关于我等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:09:08.523

这应该可以帮助你

[http://vimeo.com/28761654](http://vimeo.com/28761654)

您应该根据资源的状态提供任何可用的合法后续步骤。

# php - 解析错误：语法错误，意外的 '<'，需要 T_STRING 或 T_VARIABLE

> ID：12132189
> 
> 赞同：-2
> 
> 时间：2012-08-26T17:12:24.673
> 
> 标签：php, codeigniter

我正在按照[net.tutsplus.com/tutorials/](http://goo.gl/mOto)中给出的教程在 PHP 中创建 Helloworld 。以下是创建错误的控制器代码：

```
<?php  
class Helloworld extends Controller{  
    function index()  
    {  
        $this->load->model('helloworld_model');  

        $data['result'] = $this->helloworld_model-><span class="sql">getData</span>();  
        $data['page_title'] = "CI Hello World App!";  

        $this->load->view('helloworld_view',$data);  
    }  
}   ?> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:13:27.447

您访问的页面出现渲染错误。不应该显示的 HTML 标记正在显示。这是固定线路：

```
$data['result'] = $this->helloworld_model->getData(); 
```

# java - LoadingCache：RemovalListener 返回空值

> ID：12132193
> 
> 赞同：1
> 
> 时间：2012-08-26T17:12:46.587
> 
> 标签：java, caching, guava

我最近开始玩 LoadingCache 类，我得到了一些意想不到的行为。我现在知道解决方案，但我发布了这个问题，以便其他人可以从中学习。

基本上，我在缓存中为某个键放置了一个非空值。键是值在文件中的位置，使用 CacheLoader.load( ) 方法，可以从文件中读取值。目前 LoadingCache 由单个线程使用。

当我运行我的应用程序时，删除通知侦听器被调用，并使用一个以前用于插入非空值的键的空值。我知道这一点是因为我使用断言语句来检查进入缓存的所有值是否不为空（无论如何都不应该发生这种情况）。我也可以看到这一点，因为我在 CacheLoader.load() 调用的方法中打印了密钥：CacheLoader.load() 是*唯一*可以调用打印密钥的方法的方法。此外，此方法不能返回空值。

如果有人可以让我知道我做错了什么，我将非常感激。

以下是我对加载缓存的定义。

```
 private LoadingCache<Long,T> gcache( ) {
        @SuppressWarnings( Constants.UNCHECKED )
        final CacheLoader<Long,T> loader =
            new CacheLoader<Long,T>() {
                public T load(Long key) {
                    // This following method _did_ print the key for which
                    // the RemovalNotification listener returns a null value.
                    // See output further on.
                    return getElement( key );
                }
            };
        @SuppressWarnings( Constants.UNCHECKED )
        final RemovalListener<Long,T> listener
            = new RemovalListener<Long,T>( ) {
                  @Override
                  public void onRemoval( RemovalNotification<Long,T> notification ) {
                      final T value = notification.getValue( );
////////////////////////////////////////////////////////////////////////////
if (value == null) {
System.out.println( "????: " + notification.getKey( ) );
}
assert( value != null);
////////////////////////////////////////////////////////////////////////////
                      if (!value.immutable( )) {
                          put( notification.getKey( ), value );
                      }
                  }
              };
        @SuppressWarnings( Constants.UNCHECKED )
        final LoadingCache<Long, T> gcache
            = CacheBuilder.newBuilder( )
                          .softValues( )
                          .removalListener( listener )
                          .build( loader );
        return gcache;
    }

    private T getElement( long pos ) {
        // Critical section, but at the moment there's only one thread.
        enter( );
        seek( pos );
        final T creation = inflator.inflate( this );
///////////////////////////////////////////////////////////////////////
System.out.println( "getElement: pos = " + pos );
assert( creation != null );
///////////////////////////////////////////////////////////////////////
        leave( );
        return creation;
    } 
```

一些输出：

```
[ cut ]
getElement: pos = 362848
[ cut ]
????: 362848 
```

在问号之后，我得到了无法控制的输出量，并且 JVM 很难停止。我必须按几次键才能终止应用程序。（当然 kill 也可以，但键盘速度稍快一些。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T18:12:07.290

我只是在猜测：在它的 javadoc 中`RemovalNotification`读取

> 删除单个条目的通知。如果它们已经被垃圾回收，则键和/或值可能为空。

而你正在使用`softValues()`. 当值被 GC'ed 时，整个条目将从缓存中删除，并且密钥也可能被收集。

# mysql - 如果删除或更新，删除之前的mysql会触发重新插入记录

> ID：12132195
> 
> 赞同：1
> 
> 时间：2012-08-26T17:12:56.743
> 
> 标签：mysql, triggers

我正在尝试在 mysql 表上编写一个删除前触发器，这就是我正在尝试做的事情；我需要一条特定的记录始终在表中，例如删除或更新记录，触发器将简单地重新插入初始记录。

```
EXAMPLE
Tablename: Users
Table Columns(3):ID,Username,Password
and I am trying to keep the following record from being deleted(Initial Record)
Username=Dames, Password=Password 
```

然而，我是触发器的新手，并且一直在尝试一件事或三件事，但似乎我确实需要一些帮助，我希望我把问题说清楚了，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:08:14.940

1.  如果您愿意将您希望保留的记录的详细信息硬编码到触发器中，那么您可以执行以下操作：

    ```
    DELIMITER ;;

    CREATE TRIGGER foo_upd BEFORE UPDATE ON Users FOR EACH ROW
    IF OLD.Username <=> 'Dames' AND OLD.Password <=> 'Password' THEN
      INSERT INTO Users (Username, Password) VALUES ('Dames', 'Password');
    END IF ;;

    CREATE TRIGGER foo_del BEFORE DELETE ON Users FOR EACH ROW
    IF OLD.Username <=> 'Dames' AND OLD.Password <=> 'Password' THEN
      INSERT INTO Users (Username, Password) VALUES ('Dames', 'Password');
    END IF ;;

    DELIMITER ; 
    ```

2.  否则，我建议在表中添加一个额外的布尔列`Users`——例如`locked`：

    ```
    ALTER TABLE Users ADD COLUMN locked BOOLEAN NOT NULL DEFAULT FALSE; 
    ```

    然后将该列的值设置为`TRUE`您希望保留的记录：

    ```
    UPDATE Users SET locked = TRUE
    WHERE  Username = 'Dames' AND Password = 'Password'; 
    ```

    然后按照以下几行创建触发器：

    ```
    DELIMITER ;;

    CREATE TRIGGER foo_upd BEFORE UPDATE ON Users FOR EACH ROW
    IF OLD.locked THEN
      INSERT INTO Users (Username, Password) VALUES (OLD.Username, OLD.Password);
    END IF ;;

    CREATE TRIGGER foo_del BEFORE DELETE ON Users FOR EACH ROW
    IF OLD.locked THEN
      INSERT INTO Users (Username, Password) VALUES (OLD.Username, OLD.Password);
    END IF ;;

    DELIMITER ; 
    ```

# php - cURL 返回 404 错误

> ID：12132198
> 
> 赞同：0
> 
> 时间：2012-08-26T17:13:18.357
> 
> 标签：php, parsing, curl, file-get-contents

尝试提取页面源时，我从某些 URL 中收到一个奇怪的错误。某些 URL 在页面明显存在时返回页面不存在...

这是我正在使用的代码：

更新：添加`curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);`

仍然得到同样的错误

```
function file_get_contents_curl($url) {
$ch = curl_init();

curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //Set curl to return the data instead of printing it to the browser.
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$data = curl_exec($ch);
curl_close($ch);

return $data;
}

$url = 'http://www.asos.com/American-Apparel/American-Apparel-Slim-Slack-Jeans/Prod/pgeproduct.aspx?iid=2503251&cid=4208&sh=0&pge=0&pgesize=20&sort=-1&clr=Truffle';

$html = file_get_contents_curl($url);

 echo $html; 
```

有人看到这个的原因吗？还是有办法解决？file_get_contents 也不起作用，所以我猜同样的错误

var_dump(curl_getinfo($ch)); 生产

`array(22) { ["url"]=> string(67) "http://www.asos.com/holding.html#500?aspxerrorpath=/pgeproduct.aspx" ["content_type"]=> string(9) "text/html" ["http_code"]=> int(200) ["header_size"]=> int(2131) ["request_size"]=> int(437) ["filetime"]=> int(-1) ["ssl_verify_result"]=> int(0) ["redirect_count"]=> int(2) ["total_time"]=> float(0.115457) ["namelookup_time"]=> float(4.1E-5) ["connect_time"]=> float(4.1E-5) ["pretransfer_time"]=> float(7.0E-5) ["size_upload"]=> float(0) ["size_download"]=> float(4064) ["speed_download"]=> float(35199) ["speed_upload"]=> float(0) ["download_content_length"]=> float(4064) ["upload_content_length"]=> float(0) ["starttransfer_time"]=> float(0.047221) ["redirect_time"]=> float(0.067962) ["certinfo"]=> array(0) { } ["redirect_url"]=> string(0) "" }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:44:30.393

已修复，至少我希望如此：

添加`curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");`，现在一切似乎都很好。

非常感谢我收到的帮助。

# ruby-on-rails - 在 if 中使用 Ruby OR 时出错

> ID：12132200
> 
> 赞同：1
> 
> 时间：2012-08-26T17:13:26.510
> 
> 标签：ruby-on-rails

我的红宝石代码中有这个简单的条件：

```
if user.text != ("Empty" || "Damaged") 
```

做一点事...

问题是当它“损坏”时它仍然进入循环，所以我必须使用这个：

```
if user.text != "Empty"
    if user.text != "Damaged"
...
.. 
```

使第一个工作的正确语法是什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T17:15:49.537

用这个：

```
unless ["Empty", "Damaged"].include?(user.text)
  ...
end 
```

您的第一种方法的问题`a || b`在于：如果`a != nil`它是`a`，则它是`b`。如您所见，它适用于变量，而不是常量，因为它们很少为零。你的表达式`("Empty" || "Damaged")`简单地等于`"Empty"`。

您想使用 this 作为二元运算符，正确的形式是：

```
if (user.text != "Empty") && (user.text != "Damaged") 
```

上面的解决方案更短。它由您要避免的元素数组组成，您只需检查其中`user.text`是否不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T17:28:45.577

@Matzi 肯定有正确的答案。但这就是您正在做的事情失败的原因：

您的陈述`("Empty" || "Damaged")`评估为“空”

您是说返回其中任何一个，无论您首先找到哪个非错误的东西。在 Ruby 中，任何字符串、数字或对象都返回 true，因此每次都返回“Empty”。

如果您真的想使用 if 语句，一种更好的布局方式：

```
if user.text != "Empty" && user.text != "Damaged"
  ...
end 
```

顺便说一句，我假设您想说“如果用户文本既不是损坏也不是空的”。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:19:57.927

if ((text != "Empty") && (text != "Damaged"))

# tesseract - 正方体训练数据

> ID：12132204
> 
> 赞同：25
> 
> 时间：2012-08-26T17:14:07.647
> 
> 标签：tesseract

我正在尝试使用 Tessaract 从收据和账单中提取数据，我正在使用 tesseract 3.02 版本。

我只使用英文数据，输出准确率仍然在 60% 左右。

是否有任何可用的训练数据，我只是在 tessdata 文件夹中替换

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-29T19:28:25.873

这是作为“典型示例文件”提供的图像 nicky：

![典型示例文件](../Images/7888468f11a639704751ef532676ede3.png)

看着它，我会明确地说：*“算了吧，nicky！你不能训练 Tesseract 从这种类型的图像中识别 100% 的文本！”*

但是，您可以通过这种类型的收据训练自己使用*iPhone 3GS*（即用于示例图片的设备）拍摄***更好的照片。***这里有一些提示：

 **   不要使用深色背景。改用白色。
*   不要让收据纸崩溃。把它理顺。
*   不要将收据松散地放在不平整的地下。将其固定在平面上：
    *   要么把它放在一张白纸上，然后在上面放一个玻璃压板。
    *   或者使用一些胶水将其平粘在一张白纸上，不要有任何弯曲的边缘或角落。
*   不要使用像 640x480 像素这样的低分辨率（如示例图片所示）。请改用更高的像素，例如 1280x960 像素。
*   不要使用标准曝光。将相机设置为使用极高的对比度。你希望字母是黑色的，白色背景是真正的白色（你不需要图片中的灰色......）
*   尝试使 10-12 pt 字体的任何字符使用大约 24-30 像素的高度（即，将图像设置为大约 300 dpi 以实现 100% 缩放）。

* * *

也就是说，类似下面的 ImageMagick 命令可能会在一定程度上提高 Tesseract 的识别率：

```
convert                               \
   http://i.stack.imgur.com/q3Ad4.jpg \
  -colorspace gray                    \
  -rotate 90                          \
  -crop 260x540+110+75 +repage        \
  -scale 166%                         \
  -normalize                          \
  -colors 32                          \
   out1 .png 
```

它产生以下输出：

![OCR 的 ImageMagick 优化](../Images/9a4e7137da242b8c57b85650dfeed67d.png)

你甚至可以在上面的命令中添加类似`-threshold 30%` **最后一个命令行选项的**东西来获得这个：

![在此处输入图像描述](../Images/8370f9d05d7d5895fa4f7cc21a8a3794.png)

（您应该对值进行一些变化以`30%`调整结果......我没有时间这样做。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-08T10:28:20.837

使用 tesseract 从收据中获取准确信息并非不可能。您将需要在 Tesseract 旁边添加图像过滤器和一些其他工具，例如 OpenCV、NumPy ImageMagick。Franck Chastagnol 在 PyCon 2013 上做了一个演讲，他描述了他的公司是如何做到的。

这是链接： http: [//pyvideo.org/video/1702/building-an-image-processing-pipeline-with-python](http://pyvideo.org/video/1702/building-an-image-processing-pipeline-with-python)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-09T21:27:13.670

在使用 Tesseract 对文本进行 OCR 之前，您可以获得更清晰的后处理图像。尝试使用背景表面阈值 (BST) 技术，而不是其他简单的阈值方法。[您可以在此处](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CB4QFjAA&url=http%3A%2F%2Fwww.xrce.xerox.com%2Fcontent%2Fdownload%2F18530%2F133350%2Ffile%2FBinarising-camera-images-for-OCR.pdf&ei=A0SwVNS9GJSoyAT0nYCoAQ&usg=AFQjCNG__3BgMsM9C1aAGikrjkloHdSD5Q&sig2=RYbuQA5RXnUPuunGGITSqg&bvm=bv.83339334,d.cGU)找到有关该主题的白皮书。

有一个适用于 OpenCV 的 BST 实现，效果很好[https://stackoverflow.com/a/22127181/3475075](https://stackoverflow.com/a/22127181/3475075)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T11:24:08.147

我需要完全相同的东西，我尝试了一些图像优化来改善输出

你可以在这里找到我对 tessaract 的实验

[https://github.com/aryansbtloe/ExperimentWithTesseract](https://github.com/aryansbtloe/ExperimentWithTesseract)*

# ios - 在 iOS 中处理对用户的付款

> ID：12132206
> 
> 赞同：0
> 
> 时间：2012-08-26T17:14:21.740
> 
> 标签：ios, payment

我正在探索是否有可能实现我在 iOS 中的想法。然而，这个想法取决于能够*给*用户钱。这在iOS中可能吗？我知道 Apple 希望您在从用户那里收钱（应用内购买等）时使用 StoreKit *，*但 StoreKit 中是否有一种机制可以向用户*提供*资金，如果没有，iOS 规则是否允许使用第三个 -像 PayPal 这样的派对服务给用户钱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:52:55.450

是的，您可以使用 Paypal 等第三方服务进行付款。要实现 Paypal 机制，请执行以下步骤。

[1)在此处](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)下载适用于 iOS 的移动支付库表格

2) 在视图控制器的头文件中导入 PayPal.h 文件。

3）在项目中包含以下框架——Security.framework、MapKit、ImageIO、SystemConfiguration

4) 还包括以下两个库文件 - libz.dylib、libxml2.dylib

5）创建一个支付按钮，如

```
 UIButton checkOutBtn=[[PayPal getPayPalInst] getPayButtonWithTarget:self andAction:@selector(payWithPayPal) andButtonType:BUTTON_152x33 andButtonText:BUTTON_TEXT_PAY];
     checkOutBtn.frame=CGRectMake(60, 100, 200, 45);
     [self.view addSubview:checkOutBtn]; 
```

6）使用以下代码实现按钮操作方法：

```
 -(void) payWithPayPal
    {
           [PayPal getPayPalInst].shippingEnabled=TRUE;
           [PayPal getPayPalInst].dynamicAmountUpdateEnabled=TRUE;
           [PayPal getPayPalInst].feePayer=FEEPAYER_EACHRECEIVER;

           PayPalPayment *payment=[[[PayPalPayment alloc] init] autorelease];
           payment.recipient=@"xyz@paypal.com";
           payment.paymentCurrency=@"USD";

           payment.description = @"Paypal";
           payment.merchantName = @"Title Name";

           //subtotal of all items, without tax and shipping

           payment.subTotal = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%1.2f", 5320.50 ]];   // total Price

          //invoiceData is a PayPalInvoiceData object which contains tax, shipping, and a list of PayPalInvoiceItem objects

           payment.invoiceData = [[[PayPalInvoiceData alloc] init] autorelease];
           payment.invoiceData.totalShipping = [NSDecimalNumber decimalNumberWithString:@"2"];   // Shipping Cost
           payment.invoiceData.totalTax = [NSDecimalNumber decimalNumberWithString:@"0.35"];   // Tax On Product

           //invoiceItems is a list of PayPalInvoiceItem objects
           //NOTE: sum of totalPrice for all items must equal payment.subTotal

           payment.invoiceData.invoiceItems = [NSMutableArray array];
           PayPalInvoiceItem *item = [[[PayPalInvoiceItem alloc] init] autorelease];

           item.totalPrice = payment.subTotal;
           item.name = @"Product Name";
           [payment.invoiceData.invoiceItems addObject:item];

           [[PayPal getPayPalInst] checkoutWithPayment:payment];
    } 
```

7) 使用以下代表

```
 -(void)paymentSuccessWithKey:(NSString *)payKey andStatus:(PayPalPaymentStatus)paymentStatus
    {
           NSLog(@"Successfully Paid");
    }
    -(void)paymentCanceled
    {
           NSLog(@"Cancelled");
    }
    - (void)paymentFailedWithCorrelationID:(NSString *)correlationID
    {
           NSLog(@"Failed");
    }
    -(void)paymentLibraryExit
    {
           NSLog(@"Exit");
    } 
```

# php - 如何使用 php 在我的网站上实现用户对用户的聊天

> ID：12132208
> 
> 赞同：-1
> 
> 时间：2012-08-26T17:14:29.240
> 
> 标签：php, jquery

我正在开发一个项目，该项目使用户能够发布他们想要出售的物品，客户要求用户能够与其他人聊天。例如，用户搜索一个项目，查看该项目并查看该项目的发布者是否在线，然后单击聊天以启动聊天会话。

1.  为了跟踪在线用户，我在我的数据库中创建了一个“在线”表，以便在登录时，用户名存储在该表中并在注销时被删除。这样做的问题是，如果用户没有注销而只是关闭浏览器，则用户名不会从“在线”表中删除。实现这一点的最佳方法是什么？

2.  我如何在用户之间实现聊天，以便如果用户看到他想购买的物品并且用户在线，他可以点击“聊天”或类似的东西，然后像 Facebook 一样打开一个聊天窗口，只有 2 个用户聊天，并且每个用户一次可以与多个其他用户聊天。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:18:43.813

1.  您可以在登录时创建会话，然后在 x 次后终止它们并从数据库中删除该条目。
2.  您可以使用 cometchat，然后根据您的需要重写它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:09:34.470

试试[freichat](http://evnix.com/drupal2/)。它是一个免费的 1-1 聊天 jquery 聊天系统。

# notifications - iOS6：在设备中接收到任何类型的通知时，iPhone 应用程序会重新启动

> ID：12132209
> 
> 赞同：0
> 
> 时间：2012-08-26T17:14:31.150
> 
> 标签：notifications, ios6

**在使用iOS 6 beta 4**的设备中测试我们的 iPhone 应用程序时，我们发现了一个问题，即如果收到任何通知（如提醒警报）或当我们拉下通知窗帘时，应用程序将从头开始重新启动。

在 iOS 5.X 之前，它从未像现在这样发生过。Apple 发布说明或 iOS 6 测试版的已知问题没有提及任何关于此的内容。

有人遇到过这个问题吗？

对出了什么问题有任何评论吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:46:52.807

检查应用程序的 .plist 文件以查看应用程序是否以某种方式设置为不在后台运行。

# gwt - 推荐的服务器端架构（框架/堆栈）与 GWT 一起用于大型应用程序

> ID：12132213
> 
> 赞同：1
> 
> 时间：2012-08-26T17:14:43.550
> 
> 标签：gwt, architecture, server-side

在过去的 2 天里，我一直在研究这个，现在差不多 3 天了。我觉得我已经在阳光下搜索了所有关于此事的内容（包括这些论坛），并且几乎都接受过教程。在我详细讨论这个问题之前，我只想快速概述项目的范围和计划，看看什么最适合它：

-大型应用程序，非平凡
-50+ 数据库表-庞大的
用户群 -
用户管理/身份验证/会话-事务 - 安全
-MVP （根据 GWT 推荐） -专注于性能和可伸缩性（自然 :)，我在使用 GWT 之后all) - 更喜欢使用 Java 服务器端

我还阅读并观看了大型应用程序架构 (Google/GWT) 的所有最佳实践。在上一次关于涉及 GWT 的最佳架构实践的演讲中，我可以找到 Ray Ryan 在 2010 年发表的演讲，他在演讲中表示，他们认为 JavaBeans 和属性更改事件工作得不是很好，因此最好将 DTO 用于模型。

在我的搜索中，出现在最前沿的两个框架是 Seam 和 Spring。

坚持使用 MVP，我的领域大部分是具有胖客户端的数据服务。但是，我仍然希望服务器端具有安全性和会话功能，因为我希望用户能够保持状态，即使他们不使用 cookie 并且他们最终会刷新。我还希望有一个像 Hibernate 这样的 ORM 来管理很多事务方面。我想仍然使用 RequestFactory 并且一直在考虑使用 Spring。

我想我可以将我的问题缩小到：

**考虑到上述情况，对于大型 GWT 应用程序，特别是服务器端和与 GWT 的集成，推荐的应用程序堆栈是什么？**

这是我的第一个这种规模的项目，我最不想做的就是走上错误的道路，浪费大量的时间和精力。非常感谢您的帮助，我真的只是想弄清楚这一点，这样我就可以回到编码而不是谷歌搜索地球的尽头；）。

-赛斯

我还已经查看[了 GWT 中应用程序的最佳架构](https://stackoverflow.com/questions/6957057/best-architecture-for-applications-in-gwt)，我发现它可能与此最接近，但它并没有真正回答我的问题，而且我觉得我的用例更具针对性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:39:58.657

我没有任何经验`Seam`，但是我正在做一个相对较大的项目`GWT`，在前端和`Spring`后端使用，到目前为止它工作得非常好（RequestFactory、JPA2/Hibernate、PostgreSQL）。顺便说一句，您还可以查看[JBoss Erai](http://www.jboss.org/errai)

使用的好处`Spring`是，添加新功能非常容易。例如，我添加了对**openid 身份验证**的支持，我所要做的就是在 maven 中定义一个额外的依赖项，并在配置文件中定义一些额外的行，现在通过 google、facebook、twitter 帐户的身份验证可以开箱即用。
这种分层方法有很多优点。

但是如果你真的坚持开发 GWT 应用程序（MVP 等）的最佳实践，你最终会得到两个或多或少独立的项目。当您开发传统的 Spring MVC/Web Flow 应用程序时，这有点不同，您或多或少只有一个项目（顺便说一句：查看 Thomas Broyer 的[gwt maven 原型](https://github.com/tbroyer/gwt-maven-archetypes)，它可以帮助您提出一个好的项目结构）。

除此之外，当您在客户端使用 MVP 时，您的后端实际上只会充当数据服务，为您的 GWT 客户端提供数据。所有[流同步](http://martinfowler.com/eaaDev/FlowSynchronization.html)都将在您的 GWT 应用程序中处理。
因此，您可能不会使用许多后端功能（即 的 MVC 部分`Spring MVC`）。
我`RequestFactory`用于后端和前端之间的数据通信，并且对于`CRUD`应用程序来说效果非常好（它也支持 Android btw）。但是，如果您想支持更多的客户，您可能宁愿使用一种`Restless`方法。同样，通过`Spring`在后端使用，为您的应用程序添加支持相对容易，`Restless`并且有几个 3rd 方库支持 GWT 中的 RESTful 服务（[RestyGWT](http://restygwt.fusesource.org/),[休息](http://www.restlet.org/))。

以下是关于开发过程的一些想法：

*   使用**依赖管理**系统，例如`maven`. 它使团队开发和将项目拆分为可管理的单元/模块变得非常容易（例如，GWT maven 应用程序可以拆分为前端部分（GWT）、后端（Spring）部分和共享（comong DTO，等）部分。
*   尝试进行**测试驱动开发**（TDD 或 BDD）。例如，在您在 Spring 后端（即 getAllProducts()）中创建服务函数之前，为它编写一个单元测试。这也有助于创建一个好的服务层，因为通过编写单元测试，您可以定义服务层应该做什么。
*   《[过早的优化是万恶之源](http://c2.com/cgi/wiki?PrematureOptimization)》：不要在早期优化上花太多时间。
*   考虑购买/使用[JRebel](http://zeroturnaround.com/software/jrebel/)，特别是如果您使用`Spring`. 相对较大`Spring`的应用程序可能具有相对较大的启动时间。JRebel 可帮助您更改后端中的类，而无需重新加载/重新启动应用程序。它节省了很多时间。
*   在域级别实现**ACL**并非易事。里面有**ACL**类`Spring Security`，它们适用于简单的用例，但是如果你有复杂的用例（例如，根据 ACL 条目过滤项目列表），如果你想有效地做到这一点，这可能会非常复杂。另一方面，`Spring`使用另一个库（即 Apache Shiro）相对容易。此外，您必须确保在前端显示正确的控件（即，如果用户没有编辑权限，则没有编辑按钮等）。使用 JSP 很容易，因为您在后端创建 UI（HTML 页面）。在`GWT`你必须自己做。

# php - 代码注释 - 是否应该对使用的设计模式进行注释

> ID：12132214
> 
> 赞同：3
> 
> 时间：2012-08-26T17:14:57.840
> 
> 标签：php, oop, design-patterns, comments

如果在类中使用了设计模式，那么类顶部或相关方法顶部的注释是否应该解释所使用的特定设计模式或实际功能。

IE

```
/**
 *  Class MyClass
 *
 * Utilizes Factory Method patter to accomplish xyz
 */ 
```

或者

```
/**
 *  Class MyClass
 *
 *  Allows the creation of objects for xyz
 */ 
```

这是非常简化的说明

我的查询的主要部分是是否依赖其他人想知道使用了哪些设计模式，或者仅仅说出使用了什么设计模式可能会让人觉得它像个聪明人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:19:26.157

常见的做法是命名您的类（即 XyzFactory），以便轻松查看您使用的模式并在注释中给出实际功能，最好比仅描述设计模式已经完成的功能更具描述性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:19:44.180

如果有外部依赖，那么我认为提及它是好的。如果它与另一个函数形成对比（参见 PHP 的[`mt_rand`](http://php.net/mt-rand)vs. [`rand`](http://php.net/rand)），那么值得一提。

否则，没有必要，但是否提及仍取决于个人喜好。

# c++ - Qt Creator 不显示 SFML 窗口

> ID：12132218
> 
> 赞同：1
> 
> 时间：2012-08-26T17:15:33.443
> 
> 标签：c++, qt, qt-creator, runtime-error, sfml

我最近设置了 qt creator 来使用 SFML，我尝试运行一段代码作为测试，看看它是否有效。我必须注意下面的代码在 Codeblocks IDE 中**完美**运行，但在 qt creator 中它只是显示一个带有文本“Press RETURN to close this window...”的控制台

```
 #include <SFML/System.hpp>
  #include <SFML/Window.hpp>
  #include <iostream> 

 using namespace std;
 using namespace sf;

  Window w(VideoMode(350,350,32), "Tic Tac Toe"); Event e1; const Input&
  in1 = w.GetInput();

  int main() {
      while(w.IsOpened())
      {
          w.Display();
      }
      return EXIT_SUCCESS;
  } 
```

这是我的 .pro 文件：

```
INCLUDEPATH += C:\SFML-1.6\include
LIBS += C:\SFML-1.6\lib\sfml-system.lib \
    C:\SFML-1.6\lib\sfml-window.lib \
    C:\SFML-1.6\lib\sfml-graphics.lib \
    C:\SFML-1.6\lib\sfml-audio.lib \
    C:\SFML-1.6\lib\sfml-network.lib 
```

一百万年来，我从未想过在我最喜欢的 IDE 上使用 SFML 会如此困难，问题是什么？

# spring - 如何为多个实体创建存储库？

> ID：12132222
> 
> 赞同：1
> 
> 时间：2012-08-26T17:16:09.307
> 
> 标签：spring, spring-mvc, spring-data-jpa

我正在尝试创建一个简单的网站，其中包含主题和评论。我从主题开始，并为它们创建了存储库：

```
package com.myProject.mvc3.repository;
import org.springframework.data.repository.CrudRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface TopicRepository extends CrudRepository<Topic, Integer>{    
     public List<Topic> findAllByTopicTag(Tag currentTag);
} 
```

我已经在 servlet-context.xml 中定义了我的存储库的路径：

```
jpa:repositories base-package="com.myProject.mvc3.repository" 
```

现在，我想在我的存储库中包含评论，但以下代码不起作用：

```
package com.myProject.mvc3.repository;
import org.springframework.data.repository.CrudRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface CommentRepository extends CrudRepository<Comment, Integer> {
    public List<Comment> findTopicComments(Topic topic);

} 
```

我的项目甚至没有建立。你能给我一个建议吗，如何为多个实体创建存储库（**主题**类和**评论**类是用**@Entity**声明的）？

我面对的是：

*   **TopicRepository**类图标上有 HDD pic
*   **CommentRepository**类图标上有一个问号
*   错误日志（一个巨大的）：

org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0”的bean时出错：bean初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“topicController”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 com.epam.mvc3.service.CommentService com.epam.mvc3.controller.TopicController.commentService；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“commentService”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：私有 com.epam.mvc3.repository.CommentRepository com.epam.mvc3.service.CommentService.commentRepository；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“commentRepository”的 bean 时出错：FactoryBean 在创建对象时抛出异常；嵌套异常是 java.lang.IllegalArgumentException: No property find found for type class com.epam.mvc3.model.Comment org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) org.springframework.beans .factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293) org.springframework.beans。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:53:34.820

只需添加`By`，`findTopicComments`使其成为`findByTopicComments`. 当然，这只有在`Comment`实体有`topicComments`字段或者它有`topic`字段的情况下才有效，而该字段又具有`comments`字段。

顺便说一句，您不需要`@Repository`对存储库进行注释`Spring-data-jpa`。

`^(find|read|get)(\\p{Upper}.*?)??By`实际上，如果您的查询名称与[此类](https://github.com/SpringSource/spring-data-commons/blob/master/spring-data-commons-core/src/main/java/org/springframework/data/repository/query/parser/PartTree.java)的模式不匹配，则会发生以下情况：

*   任何前缀，例如`get`，'read'，`find`都不会被剥离，将被视为`JPQL`要生成的查询的一部分。在这种情况下，您将得到一个例外： `java.lang.IllegalArgumentException: No property find found for type class ...`.
*   如果您的方法名称中没有任何内容可以删除，那么它将被处理，就好像它之前有`findBy`前缀一样。

由于从文档中不清楚这一点，我在问题跟踪器中创建了[问题。](https://jira.springsource.org/browse/DATACMNS-220?focusedCommentId=82879#comment-82879)`Spring Data Commons`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:32:37.793

尝试以这种方式编写您的存储库：

```
@Repository
public interface TopicRepository extends JpaRepository<Topic, Integer> >{    

     @Query("select topic from Topic topic where topic.topicTag.id=?1")
     public List<Topic> findAllByTopicTag(int topicTagId);
} 

@Repository
public interface CommentRepository extends JpaRepository<Comment, Integer> {

    @Query("select comment from Comment comment where comment.topic.id=?1")
    public List<Comment> findTopicComments(int topicId);
} 
```

在此示例中，我将实体的 id 指定为搜索条件，因为它们通常用作外键。如果需要，您可以轻松添加其他搜索条件。

有关 Spring Data 中查询方法的更多详细信息，您可以在[参考文档](http://static.springsource.org/spring-data/data-jpa/docs/1.1.x/reference/html/#jpa.query-methods)中找到。

**更新**

关于你的错误堆栈跟踪 - 我认为这个错误意味着你没有在 persistent.xml 中指定你的类。

还有一种方法可以不在您的 persistent.xml 中指定所有类 -> 请查看[此处](https://stackoverflow.com/questions/1780341/do-i-need-class-elements-in-persistence-xml)和[此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/orm.html#orm-jpa)了解详细信息。

同样使用 Spring，如果您使用完整的 java 配置，您可以轻松地配置您的 JPA 项目而无需 persistent.xml 文件。例如：

```
@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean() {
    LocalContainerEntityManagerFactoryBean factoryBean = 
            new LocalContainerEntityManagerFactoryBean();

    factoryBean.setDataSource(dataSource());
    factoryBean.setPackagesToScan(new String[] {"com.dimasco.springjpa.domain"});

    HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();
    vendorAdapter.setShowSql(true);
    //vendorAdapter.setGenerateDdl(generateDdl)

    factoryBean.setJpaVendorAdapter(vendorAdapter);

    Properties additionalProperties = new Properties();
    additionalProperties.put("hibernate.hbm2ddl.auto", "update");

    factoryBean.setJpaProperties(additionalProperties);

    return factoryBean;
} 
```

正如您在此示例中所看到的，我只是定义了要扫描的包。

# backbone.js - Backbone.js 基础：创建视图

> ID：12132223
> 
> 赞同：0
> 
> 时间：2012-08-26T17:16:10.507
> 
> 标签：backbone.js

我刚开始学习backbone.js。我正在backbonetutorials.com 上关注[本教程](http://backbonetutorials.com/what-is-a-view/)，但由于某种原因，我无法使其正常工作。这是我到目前为止所得到的（[小提琴](http://jsfiddle.net/joplomacedo/eykKL/)）：

```
var View = Backbone.View.extend({
    el: $('.container'),

    initialize: function() {
        this.render();
    },

    render: function() {
        var templ = _.template($('#template').html(), {});
        this.el.html(templ);

    },

    events: {
        "click button": "buttonClick"
    },

    buttonClick: function() {
        alert('clicked!');
    }
});

var view = new View();​ 
```

以上有什么问题？我几乎只是从教程复制/粘贴到小提琴。它与正在使用的主干/下划线版本有关吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:22:37.233

尝试

```
this.$el.html(templ); 
```

代替

```
this.el.html(templ); 
```

[http://jsfiddle.net/eykKL/4/](http://jsfiddle.net/eykKL/4/)

# ffmpeg - 使用 FFMPEG 更改中间视频的分辨率

> ID：12132224
> 
> 赞同：0
> 
> 时间：2012-08-26T17:16:14.830
> 
> 标签：ffmpeg, resolution, aspect-ratio, nice

我有一个源视频 (mpeg2video)，我正在将其转码为 x264。源包含从电视录制的 2 个不同的节目。一个是 4:3 AR，另一个是 16:9 AR。当我通过 VLC 播放源文件时，播放器会正确更改大小以在正确的 AR 上显示视频。到目前为止，一切都很好。

当我转码时，转换过程会自动检测前几帧的 AR，然后使用此 AR 对整个视频进行转码。如果 16:9 部分先出现，则整个转换在 16:9 中完成，4:3 部分看起来水平拉伸。如果 4:3 部分位于源文件的开头，则整个转码以 4:3 完成，而 16:9 部分看起来被水平挤压。

永远看不到黑条。

这是我的命令：

```
nice -n 17 ffmpeg -i source.mpg -acodec libfaac -ar 48000 -ab 192k -async 1 -copyts -vcodec libx264 -b 1250k -threads 2 -level 31 -map 0:0 -map 0:1 -map 0:2 -scodec copy -deinterlace output.mkv 
```

我不完全明白发生了什么。如何在输出文件中获得与输入视频中相同的“AR 变化”中间视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:50:08.557

我不认为 ffmpeg 旨在中途做到这一点。您必须使用 libav 编写自己的应用程序。更简单的方法是创建两个您组合的视频块。

编辑：处理它的最好方法是，如果您可以自己检测到 AR 的变化，并分别转码这两个片段并加入它们。

EDIT2：使用 ffmpeg 本身来分块视频，解复用任何你想要的东西，然后再把它混回去。它应该可以正常工作。你不需要使用avidemux。

# php - 从数据库中获取记录并将它们显示为不同的值

> ID：12132226
> 
> 赞同：1
> 
> 时间：2012-08-26T17:16:26.320
> 
> 标签：php, mysql, arrays, offset

我一直在练习 php & mysql，目前我正在创建一个简单的数据库管理器。一切正常，除了这段代码：[http ://snipt.org/vCW0](http://snipt.org/vCW0)

这段代码应该做的是从数据库中获取所有结果并显示它们，除了在显示位置和团队名称时它应该更改位置和团队名称值（我使用缩写插入数据库，例如 'qb ' 而不是 'Quarterback' 以节省空间）到它们的完整等价物（所以 'gba' 应该显示为 'Green Bay Packers' 等）（最后是一个用于添加新条目的表格）。它实际上正确显示了它们，但是当我向数据库添加新播放器时，出现以下错误：

```
警告：第 97 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移量 'qb'

警告：第 98 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'rb'

警告：第 99 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'fb'

警告：第 100 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'te'

警告：第 101 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'wr'

警告：第 102 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'ol'

警告：第 103 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'dt'

警告：第 104 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'de'

警告：第 105 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'mlb'

警告：第 106 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'olb'

警告：第 107 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'cb'

警告：第 108 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 's'

警告：第 109 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'ret'

警告：第 110 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'k'

警告：第 111 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'p'

警告：第 116 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'ari'

警告：第 117 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'atl'

警告：第 118 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'bal'

警告：第 119 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'buf'

警告：第 120 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'car'

警告：第 121 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'chi'

警告：第 122 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'cin'

警告：第 123 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'cle'

警告：第 124 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'dal'

警告：第 125 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'den'

警告：第 126 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'det'

警告：第 127 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'gba'

警告：第 128 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'hou'

警告：第 129 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'ind'

警告：第 130 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'jax'

警告：第 131 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'kan'

警告：第 132 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'mia'

警告：第 133 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移量 'min'

警告：第 134 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'nen'

警告：第 135 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'nor'

警告：第 136 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'nyg'

警告：第 137 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'nyj'

警告：第 138 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'oak'

警告：第 139 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'phi'

警告：第 140 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'pit'

警告：第 141 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'sdg'

警告：第 142 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'sfr'

警告：第 143 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'sea'

警告：第 144 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'stl'

警告：第 145 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'tam'

警告：第 146 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移量“十”

警告：第 147 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'was'

警告：第 153 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'gba'

警告：第 154 行 C:\web\project2\ranking_nfl.php 中的非法字符串偏移 'qb'
```

但是，尽管出现错误，记录仍会添加到数据库并显示在页面上。删除记录不会显示任何错误。

这是完整的代码：[http ://snipt.org/vCV8](http://snipt.org/vCV8)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:03:50.103

[在http://snipt.org/vCV8](http://snipt.org/vCV8)参考您的代码

尝试在第 97 行之前添加此语句

```
$position = array(); 
```

并在第 116 行之前添加此语句

```
$team = array(); 
```

# r - 修改文本图例 ggplot2

> ID：12132235
> 
> 赞同：2
> 
> 时间：2012-08-26T17:17:40.123
> 
> 标签：r, ggplot2, legend

我想使用文本 geom 修改 ggplot2 中的图例。示例如下所示。我想将 a 更改为点（圆圈），而不是 1、2、3 使用自定义名称，例如低、中、高。任何建议将不胜感激。

示例数据：

```
 x  y Freq colors
1 -2 32    2      1
2 -2 36    1      1
3 -2 37    1      1
4 -2 40    2      1
5 -1 32    2      1
6  0 29    2      1 
```

代码：

```
 fit=ggplot(a1,aes(x,y,color=factor(colors)),col=colors)+
    geom_text(aes(label=Freq),size=5)+
    theme_bw()+
    opts(legend.position='top',
         legend.title=theme_blank(),
         legend.key=theme_rect(fill="white",colour="white"))
  print(fit) 
```

![在此处输入图像描述](../Images/070691135578c5fb4d7ffdca538adb6f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T01:46:59.893

感谢 Tyler 的评论，我找到了一个解决方案（注意需要加载网格库）：

```
 fit=ggplot(a1,aes(x,y,color=factor(colors)),col=colors)+
    geom_text(aes(label=Freq),size=5)+
    theme_bw()+
    scale_color_hue(breaks=c("1", "2", "3"),
                      labels=c("Low", "Medium", "High"))+
    opts(legend.position='top',
         legend.title=theme_blank(),
         legend.key=theme_rect(fill="white",colour="white"))
  print(fit)
  grid.gedit("^key-[-0-9]+$", label = "*") 
```

我希望我可以将图例中的“*”变大，我知道 ggplot2 的下一个版本将有更多的图例控件。

# android - 如何从android调用服务器IP地址

> ID：12132236
> 
> 赞同：0
> 
> 时间：2012-08-26T17:17:39.967
> 
> 标签：android, hadoop

我必须在 android 中编写一个调用 hadoop 集群节点的应用程序。我有一个 IP 地址，我可以通过我的 Windows 机器上的 putty 登录。我不知道如何从我的 android 应用程序调用该服务器？以及，如何运行部署在 hadoop 节点上的可执行 jar 文件。

任何指导或示例代码片段都会有很大帮助。

在此先感谢 Manu Misra

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:37:31.373

我建议您想通过 SSH 登录并在服务器上执行命令？

更好的方法是编写一个小的“服务器应用程序”，它通过 http 提供一个接口来启动处理。（你可以看看[Sinatra](http://www.sinatrarb.com/)）

如果你更喜欢 ssh，你应该看看[ssh java library](https://stackoverflow.com/questions/995944/ssh-library-for-java)。

# javascript - 显示纹理 - maya to three.js

> ID：12132237
> 
> 赞同：1
> 
> 时间：2012-08-26T17:17:42.350
> 
> 标签：javascript, three.js, maya

我需要将 Maya 转换为 js，以便具有纹理的简单模型可以正常工作，但在没有纹理的情况下显示我的代码： var loader = new THREE.JSONLoader();

```
loader.load( "models/t2.js", function(geometry) {
var part1 = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial() );
    mesh =new THREE.Object3D();
    mesh.add( part1 );
    //var mesh = new THREE.Mesh(geometry, material);
    mesh.position.set(0,0,0);
    mesh.rotation.set(0,0,0);
    mesh.scale.set(30,30,30);
    scene.add( mesh );
}); 
```

在线演示： http: [//mika.ir/virtual-exhibition/](http://mika.ir/virtual-exhibition/) 下载代码： http: [//mika.ir/virtual-exhibition/virtual-exhibition.rar](http://mika.ir/virtual-exhibition/virtual-exhibition.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:22:50.720

您必须将纹理传递给其中一个材质对象。使用 MeshLambertMaterial 或 MeshPhongMaterial 并传入 THREE.Texture。您首先必须加载纹理并传递回调。如果您要加载的纹理是“path/texture.png”，我会执行以下操作：

```
var modelTexture = THREE.ImageUtils.loadTexture('path/texture.png', false, loadModel);

function loadModel() {
    loader.load( "models/t2.js", function(geometry) {
    var part1 = new THREE.Mesh( geometry, new THREE.MeshPhongMaterial({ map: modelTexture });
        mesh =new THREE.Object3D();
        mesh.add( part1 );
        //var mesh = new THREE.Mesh(geometry, material);
        mesh.position.set(0,0,0);
        mesh.rotation.set(0,0,0);
        mesh.scale.set(30,30,30);
        scene.add( mesh );
    });
} 
```

# javascript - Javascript从外部站点获取html

> ID：12132240
> 
> 赞同：0
> 
> 时间：2012-08-26T17:17:45.517
> 
> 标签：javascript, ajax, json, jsonp

我不知道这是否可能或允许，但基本上我想去[http://www.nfl.com/scores](http://www.nfl.com/scores)并获得特定一周的分数。似乎每场比赛都有一个特定的班级，如果我可以访问他们的 html，我可以轻松地得分和团队。我想我需要使用 AJAX 或 JSON 或某种组合。谢谢！

更新：

代理.php

```
<html>
    <head>
    </head>

    <body>
        <?php
            $url = "http://www.nfl.com/scores/2012/PRE1http://www.nfl.com/scores/2012/PRE1";
            $htm = file_get_contents($url);
            echo $htm;
        ?>
    </body>
</html> 
```

nflScores.php

```
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    </head>

    <body>
        <p></p>
        <script type="text/javascript">
            $.get("proxy.php", function(response) { 
    alert(response) });
        </script>
    </body>
</html> 
```

似乎我的警报框充满了大量的 html。我可以使用某种 .getElementByID() 方法来查找某些元素吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:19:03.587

[由于 XHR 的同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，这是不可能的。

检查 NFL 是否有可用于获取分数的 API。看看[这个问题](https://stackoverflow.com/questions/57106/anyone-know-of-an-nfl-or-nba-api)。看起来他们没有发布 API，但无论如何您都可以收集信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T17:21:04.150

编写您的服务器端（PHP？）脚本，下载 nhl.com 站点，解析 html，使用 json 发送到 javascript 或直接在您的网站上打印。

但是，我认为 nfl.com 不会对此感到高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T17:22:52.617

无论哪种方式，围绕“屏幕抓取”的法律都是灰色的。

# objective-c - GNUStep 上的 Objective-C：访问父类的 ivars

> ID：12132244
> 
> 赞同：0
> 
> 时间：2012-08-26T17:18:28.017
> 
> 标签：objective-c, inheritance, gnustep

我对Objective-C很陌生。我的大部分经验都是在 Java 中。我有一个基类：

```
@interface Bug : NSObject <BugProtocol> {

    @private
    World* world;
    NSString* name;
    NSString* layer;
    long x;
    long y;
    BOOL alive;

...
...

}

...
...

@end 
```

和一个扩展这个基类的类：

```
@interface RandomBug : Bug
    ...
    ...
@end 
```

但是，当我尝试访问在父类中定义的属性时，编译器会抱怨它找不到它们。我看到的大多数访问属性示例都是针对 OS X 量身定制的（即，`@property`据我所知，使用 GNUStep 不完全支持的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:23:41.007

我想到了。我只需要使用`@protected`（就像在 Java 中一样）：

```
@interface Bug : NSObject <BugProtocol> {

    @protected
    World* world;
    NSString* name;
    NSString* layer;
    long x;
    long y;
    BOOL alive;

...
...

}

...
...

@end 
```

# node.js - nodejs/express 应用程序的翻译/本地化工作流程

> ID：12132251
> 
> 赞同：4
> 
> 时间：2012-08-26T17:19:19.730
> 
> 标签：node.js, mongodb, internationalization, express, redis

您在 nodejs/express 应用程序中使用什么设置进行本地化？

现在我在我的项目中使用[i18n-node](https://github.com/mashpie/i18n-node)。但我对 json 文件中的存储不满意。我想将翻译存储在数据库中。

我发现了一个很有前途的模块，名为[dialect](https://github.com/masylum/dialect)。它可以将翻译存储在 mongodb 中，并且还有一个来自同一作者的模块，它使您能够通过 web 界面（[dialect-http](https://github.com/masylum/dialect-http)）管理翻译。

不幸的是，方言模块似乎不适用于最新的稳定版本的节点。该问题已知 2 个月，但由于此后没有任何更新，我猜该模块不再积极维护。

我认为使用 redis db 来存储翻译也很有意义。我不知道是否有一个模块。

也许你们有一些提示或知道任何好的模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T16:42:06.840

为什么不直接 fork [i18n-node](https://github.com/mashpie/i18n-node)并*用*自己的持久化机制覆盖*读写函数呢？*

 *[https://github.com/mashpie/i18n-node/blob/master/i18n.js#L235](https://github.com/mashpie/i18n-node/blob/master/i18n.js#L235)

似乎您可以轻松地将 json 数据保存在 redis 键中，而不是 json 文件中，只需进行一些更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T09:04:55.867

lingua 的另一个选择可能是[http://i18next.com/node](http://i18next.com/node)带有 redis、mongodb 或 couchDb 的后端（当然还有文件系统！）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T07:03:08.460

我可以建议你使用 lingua。这里是一个例子 =) [http://www.jmanzano.es/blog/?p=647](http://www.jmanzano.es/blog/?p=647)*

# c# - 在 ListBox 和 PivotControl 中加载 XML 节点（c# & Windows Phone 7）

> ID：12132253
> 
> 赞同：0
> 
> 时间：2012-08-26T17:19:29.513
> 
> 标签：c#, xml, windows-phone-7

我有以下 XML

```
<?xml version="1.0" encoding="utf-8" ?>
    <root>
    <Sxoles>
        <sxoli>
            <onoma>name1</onoma>
            <sch>school1</sch>
            <sxoliId>100</sxoliId>
            <mathima>lesson1</mathima>
            <mathima>lesson2</mathima>

        </sxoli>
        <sxoli>
            <onoma>name2</onoma>
            <sch>school2</sch>
            <sxoliId>200</sxoliId>
            <mathima>lesson1</mathima>
            <mathima>lesson2</mathima>

        </sxoli>

    </Sxoles>
    </root> 
```

我想读取**mathima**节点并加载到列表框中（见下文）

```
 <Grid>
                                <ListBox x:Name="testList">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                            <TextBlock Grid.Column="1" 
                                            x:Name="mathima"
                                            Style='{StaticResource                PhoneTextSubtleStyle}'
                                             />
                                      </DataTemplate>
                                    </ListBox.ItemTemplate>
                            </ListBox>
                            </Grid> 
```

列表框包含在数据透视控件的数据透视项中

结果，我想在列表中看到第 1 课、第 2 课等...（只有**mathima**节点）。

我创建了一个类

```
 public class Sxoli
    {
        ...
        [XmlElement("mathima")]
        public string mathima { get; set; }

    } 
```

在后面的代码（.xaml.cs 文件）中我有

```
mathima.Text = sxoli.mathima; 
```

但我收到以下错误

“名称*mathima*在当前上下文中不存在”

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:30:45.160

您可以`mathima`使用获取值`LINQ 2 XML`

```
XElement doc=XElement.Load("yourXML.xml");//loads your xml
var mathimaList=doc.Descendants("Sxoles").Descendants("sxoli").Elements("mathima").Select(x=>x.Value);//gets mathima values 
```

`mathimaList`现在包含`mathima`..的所有值

# haskell - 使用 Numeric Prelude 中的加法类会导致实例重叠

> ID：12132255
> 
> 赞同：0
> 
> 时间：2012-08-26T17:19:40.087
> 
> 标签：haskell, overlapping-instances

在尝试使用 Numeric prelude 定义一些数学对象时，我遇到了一个问题。Additive 类型类定义了一个实例

```
instance Additive.C v => Additive.C [v] 
```

我读到“如果 v 是加法，[v] 也是”（显然我在这里错了）。它的实现类似于

```
(+) x y = map (\(a,b) -> a + b) $ zip x y 
```

所以 [1,2,3] + [4,5,6] = [5,7,9] 这对我想做的事情毫无用处。我以为我不会有问题，因为我的 v 类型不是 Additive。不幸的是，我仍然遇到了一个重叠的实例错误，我发现这非常令人困惑。我做了一些阅读，现在我明白了，出于某种原因，Haskell 忽略了“=>”位之前的所有内容，所以我应该将默认实例阅读为“任何列表在默认实例的意义上都可能是附加的”。尽管这个扩展有“危险”的名声，但我尝试过使用 OverlappingInstances，但即使这样似乎也无济于事。

这是我的测试用例。

```
{-# LANGUAGE NoImplicitPrelude #-}
{-# LANGUAGE MultiParamTypeClasses,FlexibleInstances #-}
{-# LANGUAGE OverlappingInstances #-} --This doesn't seem to help
import NumericPrelude

import qualified Algebra.Additive    as Additive

data Test = Red | Green | Blue deriving Show

instance Additive.C [Test] where
   zero = undefined
   (+) =  undefined
   negate = undefined

test = [Red] + [Green] + [Blue] 
```

产生错误（更新：这似乎只发生在旧版本的 GHC 中。版本 7.2.2 似乎接受它）：

```
Overlapping instances for Additive.C [Test]
  arising from a use of `+'
Matching instances:
  instance Additive.C v => Additive.C [v]
    -- Defined in Algebra.Additive
  instance [overlap ok] Additive.C [Test]
    -- Defined at Testcase.hs:10:10-26
In the first argument of `(+)', namely `[Red] + [Green]'
In the expression: [Red] + [Green] + [Blue]
In an equation for `test': test = [Red] + [Green] + [Blue] 
```

这是否意味着我不能使用列表，因为我不想默认 Additive 实例？我真正想做的是告诉 ghc 忘记那个默认实例，这可能吗？如果没有，除了删除列表之外，我不确定从这里去哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T17:57:05.353

**编辑：**正如@kosmikus 提到的，你的例子对我也很有效。我正在使用 ghc 7.4.1。

您不能让编译器忘记该实例，因为它是在您导入模块后立即导入的，该实例是在其中定义的。请注意，`OverlappingInstances`这并不告诉编译器忘记一个实例，而是采用最指定的可用实例。

为了防止重叠实例，您可以使用类型包装器，用于将任意列表与您正在使用的列表区分开来。例如，您可以定义

```
data TestList = TestList [Test] 
```

然后，您可以为`TestList`. 在大多数情况下，人们使用记录语法来定义列表的访问器，因为您必须包装和打开列表。

```
data TestList = TestList { list :: [Test] } 
```

为了减少额外构造函数的成本，您可以使用 a`newtype`而不是 a `data`。

```
newtype TestList = TestList { list :: [Test] } 
```

A`newtype`可能只有一个参数，编译器基本上处理它，就好像它不存在一样，但使用构造函数提供的类型信息，在选择正确的实例时将您的列表与任意列表区分开来。

# javascript - javascript重新加载对象

> ID：12132259
> 
> 赞同：0
> 
> 时间：2012-08-26T17:19:59.163
> 
> 标签：javascript, html

我有一个将 Flash 加载到页面中的对象标签。如果我点击一个按钮，这个闪光灯将附加到一个显示弹出框。

```
//first load
<object data="url.swf"></object>
//after alick will be appended to a div popup box
<div><object data="url.swf"></object></div> 
```

在 chrome 和 Firefox 中，将对象附加到弹出框中后将重新加载，我需要此重新加载操作来显示一些信息。

```
//after load
alert('have loaded') 
```

但是，在 IE 中，没有任何重新加载操作，信息不会显示。如何手动重新加载对象

# api - Shell、Kernel 和 API 有什么区别

> ID：12132260
> 
> 赞同：25
> 
> 时间：2012-08-26T17:19:59.527
> 
> 标签：api, shell, operating-system, kernel

我想了解这如何适用于操作系统以及那些实际上不是操作系统的东西。我无法理解这三者之间的区别及其本质。API是我们可以调用的函数，但是什么是Shell？如果我们有一个 API，那么操作系统的内核到底是什么？我知道操作系统有一个不会改变的核心，这个核心完成了典型操作系统的基本工作，而我们可能有不同的用户界面，如 GUI 或具有相同内核的命令行。所以问题是我很困惑这些东西有什么不同。啊啊啊啊！

C中的printf和fopen等函数可以称为API调用吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-26T22:29:06.980

*   **命令行界面 (CLI) shell**是一个命令解释器，即处理您在命令行中输入的命令（也称为终端）或处理 shell 脚本（包含命令的文本文件）（批处理模式）的程序。在早期的 Unix 时代，它曾经是用户与他们的机器交互的独特方式。如今，图形用户界面 (GUI) 正在成为大多数用户的首选外壳类型。

*   **内核**是与运行应用程序的硬件（CPU、RAM、磁盘、网络……）交互的低级程序。它是在计算机上运行的最低级别的程序，尽管通过虚拟化，您可以在虚拟机之上运行多个内核，这些虚拟机本身在另一个操作系统之上运行。

*   **API**是一个通用术语，定义了开发人员在使用库和编程语言编写代码时必须使用的接口。**内核没有 API**，因为它们不是库。他们确实有一个**ABI**，除了其他东西之外，它还定义了应用程序如何通过系统调用与他们交互。Unix 应用程序开发人员使用标准 C 库（例如：`libc`、、`glibc`）来构建符合 ABI 的二进制文件。`printf(3)`并且`fopen(3)`不是系统调用的包装器，而是`(g)libc`标准设施。他们最终使用的低级系统调用是`write(2)`，`open(2)`并且可能还有其他诸如`brk`. `mmap`括号中的数字是一个约定，说明在哪个手册中可以找到该命令。

Unix 手册页的第一卷包含**shell**命令。

第二个包含系统调用**包装器**，如`write`和`open`。它们构成了**内核**的接口。

第三个包含标准库（包括 Unix 标准**API**）函数（不包括系统调用）`fopen`和`printf`. 这些**不是**特定系统调用的包装器，而只是在需要时使用系统调用的代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T17:27:21.097

Shell 是通过命令行与操作系统和内核进行通信的方式。Shell 通过调用 API 来实现这一点。内核确实是操作系统的核心，它执行内存管理、任务调度、文件系统处理、I/O 处理……内核所做的所有事情，都可以通过操作系统提供的 API 以某种方式调用。

printf 和 fopen 封装了操作系统和内核提供的系统调用 (API)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T17:29:21.197

Shell：它就像您的操作系统的命令行界面。ls、ps、kill 等命令可用于请求完成对操作系统的特定操作。它就像 Windows 上的“cmd”。

内核：它是任何操作系统的主要代码。您在 shell 上或通过 GUI 发出的任何请求（如内存分配、打开文件等）最终都由内核完成。

是的，您提到的调用被视为 API 调用。对这些调用的请求也由内核处理。请转到以下链接以在 unix 中查找 API 调用。 [http://www.mkssoftware.com/docs/api_index.asp](http://www.mkssoftware.com/docs/api_index.asp)

这是 Unix 操作系统的整体情况：

应用程序=>（shell+库例程）=>系统调用=>内核

看看最终的请求处理程序是内核。谢谢！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T08:44:13.787

考虑一个例子，你正在看电影是在**shell**上，实际上通过硬件完成的过程是**内核**。**对于用户和软件接口， shell**大致类似于 os 的**工作**，而对于软件和硬件，shell 大致类似于 os 的工作。

# reflection - 基于镜子的反射和传统反射有什么区别？

> ID：12132264
> 
> 赞同：14
> 
> 时间：2012-08-26T17:20:30.157
> 
> 标签：reflection, programming-languages, dart, language-design, dart-mirrors

像 Dart 这样的一些语言使用基于镜像的反射，所以简单来说，这种实现与您在 C# 或 Java 中看到的传统反射之间有什么区别。

更新：我发现 Gilad Bracha 的这个优秀（而且有点古怪）的视频是关于 Newspeak 中基于镜子的反射。 [http://www.hpi.uni-potsdam.de/hirschfeld/events/past/media/100105_Bracha_2010_LinguisticReflectionViaMirrors_HPI.mp4](http://www.hpi.uni-potsdam.de/hirschfeld/events/past/media/100105_Bracha_2010_LinguisticReflectionViaMirrors_HPI.mp4)（镜像内容从 7:42 开始）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-27T17:01:47.850

对于许多用途，我认为镜像与 Java 反射没有什么不同。了解镜像最重要的一点是它们将反射 API 与标准对象 API 解耦，因此您使用反射 (obj) 代替 obj.getClass()。这是一个看似很小的差异，但它为您提供了一些好处：

1.  对象 API 没有被污染，并且没有通过覆盖反射方法来破坏反射的危险。
2.  您可能有不同的镜像系统。比如说，不允许访问私有方法。这最终可能对工具非常有用。
3.  镜像系统不必包括在内。对于编译为 JS，这可能很重要。如果不使用镜像，则没有带外访问代码，修剪变得可行。
4.  可以使镜像在远程代码上工作，而不仅仅是本地代码，因为您不需要反射对象与镜像位于相同的 Isolate 或 VM 中。

以下是在 Java 和 Javascript 中用于获取对象方法的镜像与反射的不同之处：

爪哇：

```
myObject.getClass().getMethods(); // returns an array 
```

镖：

```
reflect(myObject).type.methods; // returns a map 
```

Javascript：

```
var methods = [];
for (var m in myObject) {
  if (typeof m === 'function') {
    methods.push(m);
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T19:18:34.673

您最好的选择是Dart 的联合设计师和规范作者[Gilad Bracha 的这篇文章。](http://bracha.org/mirrors.pdf)为了一睹为快，阅读第一章可能就足够了。

摘要声称镜子遵循传统反射不遵循的三个必要原则：

> 我们确定了面向对象编程语言中反射和元编程设施的三个设计原则。 **封装：** 元级设施必须封装它们的实现。 **分层：**元级设施必须与基础级功能分开。 **本体对应：**元级设施的本体应该对应于它们操作的语言的本体。*传统/主流反射架构不遵循这些规则。*相比之下，围绕镜像概念构建的反射 API 的特点是遵守这三个原则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T20:37:37.033

我还要向您指出 Gilad 最近的另一个答案，他在其中列出了一些其他很好的参考资料：[如何通过镜像 API 获取静态方法的具体对象？](https://stackoverflow.com/questions/12113647/how-to-get-concrete-object-of-a-static-method-via-mirror-api)

# symfony - 奏鸣曲管理包：标签很奇怪

> ID：12132265
> 
> 赞同：4
> 
> 时间：2012-08-26T17:20:31.290
> 
> 标签：symfony, symfony-2.1, symfony-sonata, sonata-admin

我在 symfony 2.1 上安装了最新的 Sonata 管理包，但遇到了以下问题： ![奇怪的标签](../Images/9a993549d091b689f28e5b9802dbf1d1.png)

配置.yml：

```
services:
  app.geo.admin.city:
      class: App\GeoBundle\Admin\CityAdmin
      tags:
        - { name: sonata.admin, manager_type: orm, group: Гео данные, label: Города}
      arguments: [null, App\GeoBundle\Entity\City, SonataAdminBundle:CRUD] 
```

管理类：

```
class CityAdmin extends Admin
{
    public function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('name', null, array('required' => true))
            ->add('code')
            ->add('region')
            ->add('crest', 'file', array('required' => false))
            ->add('banner', 'file', array('required' => false))
            ->add('sort')
        ;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:41:01.370

这也是我几周前遇到的一种行为。我认为它在更新后消失了。

不过，明确地向字段添加标签通常是有意义的，就像这样

```
$formMapper
    ->add('name', null, array('required' => true, 
            'label' => 'Lastname'
        )); 
```

# asana - 我可以根据一些正则表达式检查 Asana API 密钥吗

> ID：12132266
> 
> 赞同：0
> 
> 时间：2012-08-26T17:20:36.500
> 
> 标签：asana

我可以根据一些正则表达式检查 API 密钥，例如，如果我想在输入表单上使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:19:56.483

（我在 Asana 工作）

不，我们不保证 API 密钥的格式。此外，出于安全原因，我们不鼓励编写向用户请求 API 密钥的应用程序。未来，我们计划改进我们支持的身份验证机制，让用户更轻松地使用开发人员编写的应用程序进行安全身份验证。

# git - 如何撤消最后一个 git add？

> ID：12132272
> 
> 赞同：200
> 
> 时间：2012-08-26T17:21:05.523
> 
> 标签：git

**是否可以取消git**中最后一次分阶段（未提交）的更改？假设当前分支中有很多文件，有些是暂存的，有些没有。在某些时候，一些愚蠢的程序员不小心执行了：

```
git add -- . 
```

...代替：

```
git checkout -- . 
```

这个程序员现在可以用一些神奇的**git**命令取消他最后的更改吗？还是他应该在实验之前就做出承诺？

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2012-08-26T17:59:35.023

您可以使用`git reset`. 这将“取消暂存”您在上次提交后添加的所有文件。

如果您只想取消暂存某些文件，请使用`git reset -- <file 1> <file 2> <file n>`.

也可以通过使用取消暂存文件中的一些更改`git reset -p`。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-08-26T17:39:25.977

您无法撤消*最新*的git add，但您可以撤消`add`自上次提交以来的所有 s。[`git reset`](http://www.kernel.org/pub/software/scm/git/docs/git-reset.html)没有提交参数会重置索引（取消分阶段更改）：

```
git reset 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-10-17T12:35:38.350

所以真正的答案

> 这个程序员现在可以用一些神奇的 git 命令取消他最后的更改吗？

实际上是：**不，您不能只取消最后一个`git add`.**

也就是说，如果我们将问题解释为以下情况：

初始文件：

```
void foo() {

}

main() {
    foo();
} 
```

第一个更改，然后是`git add`：

```
void foo(int bar) {
    print("$bar");
}

main() {
    foo(1337);
} 
```

第二次更改后跟`git add`：

```
void foo(int bar, String baz) {
    print("$bar $baz");
}

main() {
    foo(1337, "h4x0r");
} 
```

在这种情况下，`git reset -p`将无济于事，因为它的最小粒度是行。`git`不知道以下的中间状态：

```
void foo(int bar) {
    print("$bar");
}

main() {
    foo(1337);
} 
```

不再。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-26T17:39:32.423

您可以使用`git reset`（请参阅[文档](http://www.kernel.org/pub/software/scm/git/docs/git-reset.html)）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-06T20:25:59.950

在日期 git 提示：

1.  `use "git rm --cached <file>..." to unstage`如果文件不在仓库中。它取消暂存文件，将它们保存在那里。
2.  `use "git reset HEAD <file>..." to unstage`如果文件在 repo 中，并且您将它们添加为已修改。它保持文件原样，并取消暂存它们。

据我所知，您无法撤消该操作，`git add --`但您可以取消暂存上述文件列表。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-04T05:29:16.427

*   从索引中删除文件，但保留它的版本并在工作副本中保留未提交的更改：

    ```
    git reset head <file> 
    ```

*   将文件从 HEAD 重置为最后一个状态，撤消更改并将它们从索引中删除：

    ```
    git reset HEAD <file>
    git checkout <file>

    # If you have a `<branch>` named like `<file>`, use:
    git checkout -- <file> 
    ```

    这是必需的，因为它`git reset --hard HEAD`不适用于单个文件。

*   从索引和版本控制中删除`<file>`，在工作副本中保留未版本控制的文件：

    ```
    git rm --cached <file> 
    ```

*   `<file>`完全从工作副本和版本控制中删除：

    ```
    git rm <file> 
    ```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-10-25T11:03:57.650

如果要从 git 中**删除所有添加的文件**以进行提交

```
git reset 
```

如果要**删除单个文件**

```
git rm <file> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-16T09:59:29.820

您可以使用

```
git reset 
```

撤消最近添加的本地文件

```
 git reset file_name 
```

撤消对特定文件的更改

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-27T13:06:33.653

根据难度的大小和规模，您可以创建一个临时（临时）分支并在那里提交当前工作。

然后切换到并签出您的原始分支，并从草稿提交中选择适当的文件。

至少您将拥有当前和以前状态的永久记录（直到您删除该临时分支）。

# vb.net - 使用通用列表（表单），无法收集对象的名称属性

> ID：12132276
> 
> 赞同：0
> 
> 时间：2012-08-26T17:21:55.720
> 
> 标签：vb.net, list, foreach, arraylist

我最近对接口以及在默认状态下使用它们之外进一步自定义它们的能力非常感兴趣。

我一直在专门研究 IList(of T)。与 ArrayLists 相比，使用泛型列表的优势让我大吃一惊。这是一张[测试](http://0.tqn.com/d/visualbasic/1/0/7/C/gen04.gif)的照片。这是进一步解释[测试](http://visualbasic.about.com/od/vbnetspecialtopics/a/gen01_2.htm)的站点。

所以，很自然地我想尝试一下。当我第一次使用 ForNext 方法遍历列表时，代码工作正常。第二次我无法访问列表中表单的名称，因为它已被释放。任何人都知道如何访问列表中的表单属性。

```
Public Class frmMain

    Dim Cabinet As List(Of Form) = New List(Of Form)
    Dim FormA As New Form1
    Dim FormB As New Form2
    Dim FormC As New Form3

    Private Sub frmMain_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles _Me.Load

        Cabinet.Add(FormA)
        Cabinet.Add(FormB)
        Cabinet.Add(FormC)

    End Sub

    Sub displayForm(ByVal aForm As Form)

        Dim myFormName As String = ""

        Stopwatch.Start()

        If aForm.IsDisposed = False Then
            aForm.Show()
        Else
            myFormName = aForm.(How do I access this objects Name?) 
            aForm = New Form  '<----- I would rather simply use aForm = New(aForm) 
            aForm.Name = myFormName
            aForm.Show()

        End If

        Stopwatch.Stop()

        Dim RealResult As Decimal = (Stopwatch.ElapsedMilliseconds / 1000)

        Debug.WriteLine(RealResult)

        Stopwatch.Reset()

    End Sub

    Private Sub btnForEach_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnForEach.Click

        'Dim instance as List 
        'Dim action as Action(of T) 

        'instance.ForEach(action) 
        'action = delegate to a method that performs an action on the object passeed to it

        Cabinet.ForEach(AddressOf displayForm)
    End Sub 
```

我真的不明白为什么如果VB知道这是一个通用列表，这意味着它知道列表的类型，并且对象都被限制为表单；为什么我不能在列表中的项目上调用构造函数。前任。aForm = 新 aForm 或 aForm = 新内阁.aForm

撕开这个给我的人。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:27:34.257

您不能构造“aForm”的新实例，因为它不是类型，它是 Form 类型的实例。

如果您想阻止 ObjectDisposedException，您可以隐藏表单而不是关闭它。将以下代码放在每个表单代码后面：

```
Public Class Form1

    Private Sub Form1_FormClosing(sender As Object, e As FormClosingEventArgs) Handles MyBase.FormClosing
        Dim form = CType(sender, Form)
        form.Visible = False
        e.Cancel = True
    End Sub

End Class 
```

但是，这有点 hacky，但是您不需要`Else`块中的代码。

**编辑** 你可以试试这个：

```
Private Sub displayForm(ByVal aForm As Form)

    Dim indexOfCab As Integer = Cabinet.IndexOf(aForm)
    If indexOfCab <> -1 Then

        If aForm.IsDisposed Then
            aForm = CreateForm(aForm.GetType())
            Cabinet(indexOfCab) = aForm
        End If

        aForm.Show()
    End If

End Sub

Private Shared Function CreateForm(formType As Type) As Form
    Return CType(Activator.CreateInstance(formType), Form)
End Function 
```

你不需要那么大的`Select`声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:45:29.797

这是我能够让它工作的唯一方法。然而，我觉得它的效率极低，希望有人能让我走上一条更好的方法来做到这一点。以下是我想要实现的目标。

**子 displayForm(ByVal aForm As Form)**

```
 Dim myFormName As String = ""

   If Cabinet.Contains(aForm) Then

       Dim indexOfCab As Integer = Cabinet.IndexOf(aForm)
       Dim ObjForm As Form = Cabinet.Item(indexOfCab)

       If aForm.IsDisposed Then

           Select Case indexOfCab

               Case 0
                   aForm = Nothing
                   aForm = New Form1
                   Cabinet.Item(indexOfCab) = aForm
                   Cabinet.Item(indexOfCab).Show()
               Case 1
                   aForm = Nothing
                   aForm = New Form2
                   Cabinet.Item(indexOfCab) = aForm
                   aForm.Show()
               Case 2
                   aForm = Nothing
                   aForm = New Form3
                   Cabinet.Item(indexOfCab) = aForm
                   Cabinet.Item(indexOfCab).Show()
           End Select

       Else
           Cabinet.Item(indexOfCab).Show()
       End If

   End If 
```

**结束子**

# grails - 我的域名到 cloudfoundry 实例

> ID：12132277
> 
> 赞同：4
> 
> 时间：2012-08-26T17:22:02.373
> 
> 标签：grails, cloud-foundry

我刚刚在公共 cloudfoundry(myApp.cloudfoundry.me) 上部署了我的 Grails 应用程序，我需要我的域指向它。这是如何实现的？或者有什么选择？

问题：使用我自己的域名而不是 something.cloudfoundry.me 通过 cloudfoundry 在云上部署 Grails 应用程序

资源：我有一个具有可用静态公共 IP 的虚拟服务器 Ubuntu。

目标：有办法部署我的许多应用程序，每个应用程序都有自己的域名

如果您不介意分享您今天的操作方式，也许您可​​以参考非常有用的教程

谢谢你，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:19:28.170

Cloud Foundry 目前不支持自定义域映射。但是，此功能在优先级列表中排名很高，目前正在开发中。如果您在[Cloud Foundry 支持](http://support.cloudfoundry.com)中进行搜索， 您会发现一系列关于此问题的帖子以及一些可能对您和您的特定情况有所帮助的短期解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T00:21:43.107

谢谢八十辛！但是，我接受了您的重播作为答案。我想分享我最终做了什么让我的域指向 Cloud Foundry 托管应用程序

选项 1。我使用 GoDaddies Forward+Masking 在 myapp.cloudfoundry.com 上推送应用程序，然后在 godaddy 上转发+masking 让 mydomain.com 将我的应用程序指向 cloudfoundry ......我确信我从 SEO 方面受到了一些惩罚范围，但到目前为止有效

选项 2。我也相信相同的目标 - 让我的自定义域通过 EC2 的 Elastic Ip 指向 Cloud Foundry 应用程序，如以下博客所述：http: [//www.cloudsoftcorp.com/blog/first-steps-with-cloud -foundry-on-amazon-ec2/](http://www.cloudsoftcorp.com/blog/first-steps-with-cloud-foundry-on-amazon-ec2/) 或者将 Stakato 与运行在云代工厂之上的 EC2 结合使用，据我所知。更多信息： http: [//docs.stackato.com/server/ec2.html#vm-ec2](http://docs.stackato.com/server/ec2.html#vm-ec2)

无论哪种方式，我希望 Cloud Foundry 很快就能获得这个功能，这样我们就不必采取额外的步骤来完成这个功能

# javascript - 如何正确从backbone.js localStorage 集合中删除模型

> ID：12132279
> 
> 赞同：0
> 
> 时间：2012-08-26T17:22:22.240
> 
> 标签：javascript, backbone.js, local-storage

我正在使用主干本地存储插件来缓存来自服务器的数据。我正在使用 jquery ajax 从服务器手动获取数据，然后添加到骨干集合。每次加载页面时，我都会从本地存储中删除现有数据，然后从服务器加载新数据。

我正在使用以下代码：

```
success : function(response){
            var json = $.parseJSON(response);
            var channelList = new NewsApp.channelCollection();
            channelList.localStorage = new Backbone.LocalStorage("channellist");
            channelList.fetch();

            //Clear the current items from the localStorage so as not to exceed the localstorage limit
            channelList.each(function(model) {
                console.log("Channel Removed");
                model.destroy();
            } );

            _.each(json.channel, function(channel){
                channelList.create(channel);
            });

            console.log(channelList);
} 
```

这在我第一次运行时工作正常。但是当我第二次运行它时，上次执行的**一些**模型仍然存在于集合中。

这是从主干本地存储中插入和删除数据的正确方法吗？

# ruby - (Ruby) 使用 RegEx 解析字符串

> ID：12132281
> 
> 赞同：0
> 
> 时间：2012-08-26T17:22:34.937
> 
> 标签：ruby, regex

这是我要解析的字符串：`2 Sep 27 Sep 28 SOME TEXT HERE 35.00`

我想将它解析成一个列表，使值看起来像：

```
list[0] = 'Sep 28'
list[1] = 'SOME TEXT HERE'
list[2] = '35.00' 
```

我一直在研究的正则表达式：

```
^\d{1}\s{1}[a-zA-Z]{3}\s{1}\d{2}\s{1}([a-zA-Z]{3}\s{1}\d{2})\s{1}([a-zA-Z0-9]*\s{1})+(\d+.\d+) 
```

我的价值观是：

```
list[0] = 'Sep 28'
list[1] = 'HERE'
list[2] = '35.00' 
```

该`list[1]`值已关闭。我也可能没有正确解析空格，但我在“Pickaxe”一书或网上找不到任何指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T17:45:39.593

您的问题出在您的第二个捕获组中：

```
([a-zA-Z0-9]*\s{1})+ 
```

重复括号中的组，匹配每个单词`'SOME'`,`'TEXT'`和`'HERE'`单独，使您的第二个捕获组仅与最终匹配项 , 匹配`'HERE'`。

您需要将捕获括号组放在`+` *内部*，并使用非捕获括号`(?:...)`将现有组括起来。`(?:`用于开始组和结束组的非捕获括号`)`是正则表达式中将匹配部分组合在一起而不*捕获*组的一种方式。您可以在非捕获组上使用重复运算符（`+`、`*`、`{n}`或），然后捕获整个表达式：`{n,m}`

```
((?:[a-zA-Z0-9]*\s{1})+) 
```

总共：

```
/^\d{1}\s{1}[a-zA-Z]{3}\s{1}\d{2}\s{1}([a-zA-Z]{3}\s{1}\d{2})\s{1}((?:[a-zA-Z0-9]*\s{1})+)(\d+.\d+)/ 
```

* * *

作为旁注，这是一个非常笨重的正则表达式。您永远不需要`{1}`在正则表达式中指定，因为单个匹配是默认设置。类似地，比*少*`\d\d`一个字符。此外，您可能只想要而不是. 由于您似乎不关心大小写，您可能只想使用该选项并简化字母字符类。像这样的东西是一个更惯用的正则表达式：*`\d{2}``\w``[a-zA-Z0-9]``/i`*

 *```
/^\d [a-z]{3} \d\d ([a-z]{3} \d\d) ((?:\w* )+)(\d+.\d+)/i 
```

[最后，虽然正则表达式的 Ruby 文档有点薄，但 Ruby 使用了一些标准的 Perl 兼容正则表达式，您可以在regular-expressions.info](http://www.regular-expressions.info/tutorial.html)找到更多关于正则表达式的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T19:39:03.763

你可能也来过这里并尝试过这个工具，但我强烈推荐[Rubular](http://rubular.com)。它提供了非常快速的字符串解析。

看起来你已经得到了问题的具体答案，所以我只是想把这个放到其他人那里，这样他们就可以知道去哪里测试他们的正则表达式或只是练习。*

# objective-c - 当显示搜索栏时（如在 Apple 的邮件应用程序中），如何将 tableView 的编辑按钮放在工具栏中？

> ID：12132283
> 
> 赞同：3
> 
> 时间：2012-08-26T17:22:40.260
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller, uisearchbar

我想把**编辑**按钮放在底部的**工具栏中。**编辑按钮通常用`self.navigationItem.rightBarButtonItem = self.editButtonItem`in实例化，`viewDidLoad`通常放置在导航栏中。

尝试将编辑按钮 (= `self.editButtonItem`) 放在工具栏中（通过将其添加到工具栏项目），该按钮不会出现。但是，我使用 Interface Builder 添加的所有其他工具栏项都正确显示。

您如何建议将此按钮添加到工具栏？

将编辑按钮添加到工具栏的原因是在启用的`UISearchBar`搜索当前处于活动状态并且搜索栏隐藏导航栏中的编辑按钮时启用表格的编辑模式。

我希望获得与 Apple 电子邮件应用程序相同的行为，当搜索处于活动状态时，工具栏中会显示“编辑”按钮。

我将不胜感激任何建议。

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:25:22.413

您可以通过以下方式将编辑按钮添加到工具栏：

```
self.editButton = 
[[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit 
                                             target:nil 
                                             action:nil] 
autorelease];

NSArray *toolbarItems = 
[NSArray arrayWithObjects:self.editButton,nil];

self.toolbar.items = toolbarItems; 
```

如果要隐藏/显示它，只需切换其`hidden`属性：

```
self.editButton.hidden = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:25:48.300

您可以通过[`UIBarButtonItem`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html)使用 style创建一个新的来手动完成`UIBarButtonSystemItemEdit`。然后只需将其添加到标签栏，分配目标和操作并调用`[tableView setEditing:YES animated:YES];`.

# jquery - jQuery 根本不工作？

> ID：12132290
> 
> 赞同：0
> 
> 时间：2012-08-26T17:24:04.393
> 
> 标签：jquery

我正在尝试学习 jQuery，但我不明白为什么它根本不起作用。我的 index.html 很简单，如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <title>JQuery Tutorial</title>
</head>
<body>
    $(function() { alert("Hello world!"); });

    <script src="js/jquery-1.8.0.min.js"></script>
</body>
</html> 
```

我在本地机器上使用 XAMPP 托管网站，文件结构是这样的，在 htdocs 下：

```
XAMPP/xamppfiles/htdocs
...
jquerytuts2/
  index.html
  /js
    jquery-1.8.0.js
    jquery-1.8.0.min.js 
```

jQuery 只是在浏览器中显示，纯文本。我在 Chrome、Safari、Firefox 上看到过这个，我使用的是运行 OSX 10.8.1 的 2012 MacBook Pro。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:25:03.847

`$(function() { ... })`在将库包含在文档中之前，您正在尝试使用 jQuery DOM 就绪方法 ( )。是的，别忘了`<script></script>`为你的 JavaScript 使用标签：

```
<!DOCTYPE html>
<html>
<head>
    <title>JQuery Tutorial</title>

    <!-- place your code here: -->
    <script src="js/jquery-1.8.0.min.js"></script>
</head>
<body>
    <!-- and don't forget the tags: -->
    <script>
        $(function() { alert("Hello world!"); });
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T17:27:30.353

```
<!DOCTYPE html>
<html>
<head>
    <title>JQuery Tutorial</title>
</head>
<body>
    <script src="js/jquery-1.8.0.min.js"></script>
    <script>
    $(function() { alert("Hello world!"); });
    </script>
</body>
</html> 
```

解释：因为文档通常是从上到下执行的，所以在加载 jQuery 之前执行 jQuery 代码，导致网站崩溃。哦，是的，你忘了`<script>`在你的 JavaScript 代码周围加上一个标签。

编辑：还有一些进一步的建议：除非您有理由不这样做，否则请将您的 javascript 放在站点中其他任何内容的下方。这会导致网站加载速度更快。脚本标签的 HTML5 属性使这变得不必要（理论上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:28:25.843

嘿，你的代码有问题..你需要把你的 jquery 代码放在脚本标签中

```
 <!DOCTYPE html>
    <html>
    <head>
        <title>JQuery Tutorial</title>
    </head>
    <body>
<script type="text/javascript">
        $(function() { alert("Hello world!"); });
</script>

        <script src="js/jquery-1.8.0.min.js"></script>
    </body>
    </html> 
```

**笔记**

无需将您的 jquery 文件放在顶部，然后调用 ready 函数。浏览器如何呈现 DOM 是它下载所有外部文件 css、js 等。然后它用于内联标签。在这里，因为它已准备就绪，所以无论您将代码放在页面中的何处，它都不会影响。但是如果你在外部 js 文件中写了同样的东西，然后你在 jquery 文件之前包含它，它肯定会给你一个错误..

# java - 使用 ParseInt 从命令行转换字符串并分配绘制的 g2 图形的列和行

> ID：12132291
> 
> 赞同：0
> 
> 时间：2012-08-26T17:24:19.623
> 
> 标签：java, swing, graphics2d, parseint

我确定我的代码是正确的，这只是非常简单的事情，给出了我的运行时错误并且没有任何东西被绘制。我知道这很简单，但我觉得我已经尝试过任何东西。

如果我制作 numCols, numRows = a num 它可以正常工作，但当我制作它时却不行 = 相应的 nR/nC

我应该能够从命令行运行 W1Graphics，包括两个将设置行和列的数字。

它需要以这种方式完成，因为它是某些课程作业的一部分。

提前谢谢

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;
import java.io.*;

public class W1Graphics extends JFrame
{
    MyPanel myVeryOwnPanel;
    int nR;
    int nC;

    public static void main(String[] args)
    {
        W1Graphics w = new W1Graphics();
        w.setVisible(true);

        // Convert the String into its corresponding integer
        //by calling one of the methods of the integer wrapper class
        int nR = Integer.parseInt(args[0]);
        int nC = Integer.parseInt(args[1]);
        System.out.println("The rows are: " +nR);
        System.out.println("The columns are: " +nC);
    }

    public W1Graphics()
    {
        setTitle("Workshop 1 - Lewis John Sherlock (Graphics): starting code");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(370, 290); ///Must stay in proportion to keep Ovals within lines
        setLocation(300,300);
        myVeryOwnPanel = new MyPanel(nR, nC);
        add(myVeryOwnPanel);
    }

 } 
```

.....................

```
import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

class MyPanel extends JPanel
{
    int numCols;
    int numRows;
    int nC, nR;

    public MyPanel(int nC, int nR)
    {
        numRows = nR;
        numCols = nC;
    }

    public void paint(Graphics g)
    {
        Graphics2D g2 = (Graphics2D)g;
        // above: this "upgrades" the Graphics class to a Graphics2D class:
        // this has some extra methods that we'll use later on

        int w = getWidth();
        int h = getHeight();

        g2.setColor(Color.red);
        Rectangle r1 = new Rectangle(0,0,w,h);
        g2.fill(r1);

        g2.setColor(Color.green);
        Rectangle r2 = getRect(3,2);
        g2.fillOval(r2.x, r2.y, r2.width, r2.height);

        g2.setColor(Color.blue);
        Rectangle r3 = getRect(3,2);
        g2.fillOval(r3.x, r3.y, r3.width, r3.height);

        g2.setColor(Color.green);
        Rectangle r4 = getRect(1,1);
        g2.fillOval(r4.x, r4.y, r4.width, r4.height);

        g2.setColor(Color.blue);
        Rectangle r5 = getRect(2,2);
        g2.fillOval(r5.x, r5.y, r5.width, r5.height);

        g2.setColor(Color.blue);
        System.out.println( "Width is: " +w );
        System.out.println( "Height is: " +h );

        g2.setColor(Color.white);

        BasicStroke b = new BasicStroke(4);

        g2.setStroke(b);

        for(int thisRow = 0;thisRow<numRows;thisRow++)

        {
            Rectangle r6 = getRect(2, thisRow);
            g2.draw(r6);

            for(int thisCol = 0;thisCol<numCols;thisCol++)

            {
                Rectangle r7 = getRect(thisCol, thisRow);
                g2.draw(r7);
            }
        }
    }

    public Rectangle getRect(int thisCol, int thisRow)
    {
        if ((thisCol <= numRows-1) || (thisRow <= numCols-1))

                    {

                    int r_w = getWidth()/numCols;
                    int r_h = getHeight()/numRows;
                    int r_x = thisCol * r_w;
                    int r_y = thisRow * r_h;

                    Rectangle r = new Rectangle(r_x, r_y,50,50);

                        return r;
                    }

                    else {
                            return null;
                 }
    }

} 
```

我收到的运行时错误是这个....

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
        at MyPanel.paint(MyPanel.java:33)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JLayeredPane.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paintToOffscreen(Unknown Source)
        at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown S
ource)
        at javax.swing.RepaintManager$PaintManager.paint(Unknown Source)
        at javax.swing.RepaintManager.paint(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at java.awt.GraphicsCallback$PaintCallback.run(Unknown Source)
        at sun.awt.SunGraphicsCallback.runOneComponent(Unknown Source)
        at sun.awt.SunGraphicsCallback.runComponents(Unknown Source)
        at java.awt.Container.paint(Unknown Source)
        at java.awt.Window.paint(Unknown Source)
        at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.access$700(Unknown Source)
        at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
        at java.awt.event.InvocationEvent.dispatch(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$000(Unknown Source)
        at java.awt.EventQueue$1.run(Unknown Source)
        at java.awt.EventQueue$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown
Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
        at MyPanel.paint(MyPanel.java:33)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at javax.swing.JLayeredPane.paint(Unknown Source)
        at javax.swing.JComponent.paintChildren(Unknown Source)
        at javax.swing.JComponent.paintToOffscreen(Unknown Source)
        at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown S
ource)
        at javax.swing.RepaintManager$PaintManager.paint(Unknown Source)
        at javax.swing.RepaintManager.paint(Unknown Source)
        at javax.swing.JComponent.paint(Unknown Source)
        at java.awt.GraphicsCallback$PaintCallback.run(Unknown Source)
        at sun.awt.SunGraphicsCallback.runOneComponent(Unknown Source)
        at sun.awt.SunGraphicsCallback.runComponents(Unknown Source)
        at java.awt.Container.paint(Unknown Source)
        at java.awt.Window.paint(Unknown Source)
        at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.paintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.prePaintDirtyRegions(Unknown Source)
        at javax.swing.RepaintManager.access$700(Unknown Source)
        at javax.swing.RepaintManager$ProcessingRunnable.run(Unknown Source)
        at java.awt.event.InvocationEvent.dispatch(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$000(Unknown Source)
        at java.awt.EventQueue$1.run(Unknown Source)
        at java.awt.EventQueue$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown
Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:30:29.513

每个 int nR 都是它自己的新变量声明。所以试试这个：

```
int nR;
int nC;

public static void main(String[] args)
{
    // Convert the String into its corresponding integer
    //by calling one of the methods of the integer wrapper class
    int xnR = Integer.parseInt(args[0]);
    int xnC = Integer.parseInt(args[1]);
    System.out.println("The rows are: " +xnR);
    System.out.println("The columns are: " +xnC);

    W1Graphics w = new W1Graphics(xnR, xnC);
    w.setVisible(true);
}

public W1Graphics(int nR, int nC)
{
    this.nR = nR;
    this.nC = nC; 
```

以前对象的 nR 和 nC 为 0。

# c# - Method to return two random ints always returns the same one twice

> ID：12132294
> 
> 赞同：0
> 
> 时间：2012-08-26T17:24:39.187
> 
> 标签：c#, random

I know how to do this in VB but im coding in C# so i need to figure out how to get two different radomized integers (1 - 8) and i cant seem to get it to work, i get the same over and over even more the harder i try. I have read up alot but i cant find a more specific help as most people just want one rnd number and that i can do...easy ;)

what i have coded is this thou it does not give me two different numbers.

```
 public string GetFruitCombination()
    {
        Random fruitcombo = new Random();
        int indexone = fruitcombo.Next(0, 8);
        Random fruitcombotwo = new Random();
        int indextwo = fruitcombotwo.Next(0, 8);

        string firstfruit = m_fruit[indexone];
        string secondfruit = m_fruit[indextwo];

        return string.Format("{0}&{1}", firstfruit, secondfruit);
    } 
```

There must be an easier way to get 2 different rnd numbers right? So i need someone to push me in the right direction!

Thanks in advance for any idea and help!!!

//Regards

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T17:25:38.387

Don't create a second instance of `Random`, just use the same one twice.

(The default seed is time based, so in creating two so quickly there is a significant chance they will both have the same seed.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T17:47:28.497

```
 public string GetFruitCombination() 
    { 
        Random fruitcombo = new Random(Environment.TickCount); 
        int indexone = fruitcombo.Next(0, 8); 
        int indextwo = fruitcombo.Next(0, 8); 

        string firstfruit = m_fruit[indexone]; 
        string secondfruit = m_fruit[indextwo]; 

        return string.Format("{0}&{1}", firstfruit, secondfruit); 
    } 
```

Although personally I use a static version of Random so the seed is set at start up and then just Nexted each use. There is also a better random in the RNGCryptoServiceProvider example [HERE](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider%28v=vs.100%29.aspx)

# python - 如何在python中应用渐变函数？

> ID：12132295
> 
> 赞同：2
> 
> 时间：2012-08-26T17:24:46.990
> 
> 标签：python, statistics, gradient

我正在寻找python中[matlab梯度函数的实现。](http://www.mathworks.com/help/techdoc/ref/gradient.html)的示例输出如下所示。

我在 Matlab 中使用它的方式是：

```
img = rgb2gray(imread('img.png'));
[dx,dy] = gradient(img); 
```

![在此处输入图像描述](../Images/f04d606b355ff76f0c410e7de20fb3ef.png)

我该如何解决这个问题？有没有它的库或包？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T17:55:34.607

我相信你正在寻找[Numpy.gradient](http://docs.scipy.org/doc/numpy/reference/generated/numpy.gradient.html)

我通过谷歌搜索“Python scipy gradient”找到了它

# c - 如何将 y[7990272] 值的数组写入文本文件，每行文本有 2448 个值

> ID：12132299
> 
> 赞同：0
> 
> 时间：2012-08-26T17:25:18.387
> 
> 标签：c

如何`fopen()`以 2448x3264 的顺序将 y[7990272] 值数组写入文本文件（使用函数打开）（因此文本文件中的每一行都有 2448 个值）。

```
FILE *fp;

fp=fopen("output.txt","w");

for(int i=0;i<7990272;i++)
{
    fprintf(fp,"%f\n",y[i]);
}
fclose(fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:28:07.283

维护一个计数器来跟踪写在每一行上的值，如下所示？

```
FILE *fp;

fp=fopen("output.txt","w");

const int NUM_VALUES_PER_LINE = 2448;
int count = 0;
for(int i=0;i<7990272;i++)
{
    fprintf(fp,"%f ",y[i]);
    count++;
    if (count == NUM_VALUES_PER_LINE)
    {
        fprintf(fp, "\n");
        count = 0;
    }
}
fclose(fp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:30:39.073

```
for (int i = 0; i < 3264; i++)
{
    for (int j = 0; j < 2448; j++)
        fprintf(fp, "%f", y[i*2448+j]);
    putc('\n', fp);
} 
```

剩下的问题是写的数字之间不会有任何空格。有多种方法可以处理它；我通常使用以下变体：

```
for (int i = 0; i < 3264; i++)
{
    const char *pad = "";
    for (int j = 0; j < 2448; j++)
    {
        fprintf(fp, "%s%f", pad, y[i*2448+j]);
        pad = " ";
    }
    putc('\n', fp);
} 
```

如果你不喜欢数组下标的重新计算，你可以保留另一个简单地单调递增的变量：

```
index = 0;
for (int i = 0; i < 3264; i++)
{
    const char *pad = "";
    for (int j = 0; j < 2448; j++)
    {
        fprintf(fp, "%s%f", pad, y[index++]);
        pad = " ";
    }
    putc('\n', fp);
} 
```

# nginx - 为什么以下规则在 NGINX 中会发生冲突？

> ID：12132303
> 
> 赞同：0
> 
> 时间：2012-08-26T17:25:51.337
> 
> 标签：nginx

我有这两个规则：

```
 location ~* ^.+\.(jpg|jpeg|gif|css|js|png)$ {
        proxy_pass http://127.0.0.1:44843$request_uri;
    }

    location /pc {
        proxy_pass http://127.0.0.1:12345$request_uri;
    } 
```

URI：

/pc/asser/somefile.js

属于第二条规则，为什么？

这是“位置/ pc”规则优先级较低的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:39:06.803

Nginx[文档](http://library.linode.com/web-servers/nginx/configuration/basic#sph_server-configuration)定义了它：

指令按以下方式处理：

*   首先处理精确的字符串匹配。如果找到匹配项，nginx 会停止搜索并满足请求。
*   接下来处理剩余的文字字符串指令。如果使用了 "^~" 参数，那么 ngnix 会在此处停止并完成请求。否则，nginx 会继续处理位置指令。
*   处理由正则表达式（带有 ~ 和 ~* 参数）指定的所有位置指令。如果正则表达式匹配请求，nginx 会在此处停止并完成请求。
*   当没有正则表达式或没有正则表达式匹配时，使用最具体的文字字符串匹配。

所以你也应该对 /pc 使用正则表达式：

```
位置 ~ /pc/.* {
  proxy_pass http://127.0.0.1:12345$request_uri;
}
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:33:56.833

首先 nginx 检查使用前缀字符串（前缀位置）定义的位置。只有在此之后，它才会按照它们在配置文件中出现的顺序检查使用正则表达式定义的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:07:39.763

[http://nginx.org/en/docs/http/ngx_http_core_module.html#location](http://nginx.org/en/docs/http/ngx_http_core_module.html#location)指定查看 nging 位置指令的顺序：

```
To find a location matching a given request, nginx first checks locations defined  
using the prefix strings (prefix locations). Among them, the most specific one is 
searched. 
```

基本上这里的问题是前缀位置总是优先于正则表达式

因此，在您的配置中，如果两个块都匹配，则 /pc 前缀具有优先级

# linux - 变量名的一部分成为变量

> ID：12132307
> 
> 赞同：1
> 
> 时间：2012-08-26T17:27:13.980
> 
> 标签：linux, bash

假设我有以下两个变量：

```
arg1=5
count5="test" 
```

现在，我希望能够执行以下操作：

```
echo ${'count' . $arg1} #which should give me "test" but its returning bad-substitution error 
```

即可以将变量的一部分设置为bash 中的变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:37:35.077

好的，通过 Bash v2 中引入的间接变量引用使其工作：

```
my_var="count$arg1"
echo ${!my_var} 
```

# php - PHP PDO 不返回任何结果

> ID：12132310
> 
> 赞同：0
> 
> 时间：2012-08-26T17:27:29.997
> 
> 标签：php, pdo

我目前遇到了一些我无法弄清楚的问题，我想我错过了一些东西。
这是不起作用的代码（出于某种原因）：

```
$search = "my search keyword";
$findTopics = $db->prepare('SELECT * FROM topics LEFT JOIN forum ON forum.f_id = topics.f_id WHERE topics.keywords LIKE "%:keyword%"');
$findTopics->bindValue(':keyword', $search);
$findTopics->execute();
var_dump($findTopics->fetchAll(PDO::FETCH_ASSOC)); 
```

执行上述代码时的结果是一个空数组`array(0) { }`。
如果您更改`:keyword`为`my search keyword`并删除`$findTopics->bindValue(..)`它，则会返回结果。如果您通过控制台直接在 mysql 中执行查询，该查询也可以正常工作。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T17:31:08.420

将前两行更改为：

```
$search = "%my search keyword%";
$findTopics = $db->prepare('SELECT * FROM topics LEFT JOIN forum ON forum.f_id = topics.f_id WHERE topics.keywords LIKE :keyword'); 
```

它应该可以正常工作。

PDO 将为您在参数周围添加引号。

# javascript - 如果用户未提供任何响应，则关闭弹出窗口

> ID：12132312
> 
> 赞同：1
> 
> 时间：2012-08-26T17:27:33.947
> 
> 标签：javascript, asp.net

我实现了会话超时功能，如果 30 分钟内没有任何活动，用户会看到弹出窗口（您的会话即将到期）。

需要帮助：

当此弹出窗口打开并假设用户已锁定他的桌面并且不提供输入时。然后我想要的是 - 如果用户在 1 分钟内没有提供任何输入，那么这个弹出窗口将关闭并且新的弹出窗口将显示“会话已过期”

任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:32:37.227

如果弹出窗口是由创建的`window.open`，那么你可以使用`.close()`这样的方法：

```
var popup = window.open('some url', 'name_of_the_window');
setTimeout(function(){
    popup.close();
}, 60000); 
```

在这里，我只是在 1 分钟后关闭弹出窗口，没有任何输入检查，所以你需要以某种方式检查输入。

如果问题是关于如何检查输入，我可以提供另一个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:32:49.520

应该相当容易实现。使用动作监听器来检测用户动作。

```
var userActionDetected = false;
var x = document.getElementById('yourID');
x.onclick = function (){
    // some more stuff you wanna do 
    userActionDetected = true;
};
setTimeout(
    function() {
        if(!userActionDetected){
            //close popups etc.
        }
    },
    60000
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:34:21.450

你不能用普通的`alert()`盒子来做到这一点，但是至少有两个选项：

1.  显示一个警报，并注明会话将在它出现后一分钟到期（可能显示它到期的确切时间）。如果用户在时间到后单击“确定”，它会返回并说“对不起，您的会话已过期”。

2.  自定义警报框。这可以很容易地通过让一个元素覆盖屏幕并另一个显示信息来实现：

例子：

```
<div id="mask"><div id="alert">Your session will expire soon</div></div>
CSS:
#mask {
    position: fixed;
    left: 0; right: 0; top: 0; bottom: 0;
    /* fallback for browsers that don't support rgba() */
    background: #cccccc;
    background: rgba(255,255,255,0.75);
}
#alert {
    position: fixed;
    left: 50%;
    width: 200px;
    margin-left: -100px; /* half the width */
    top: 20%;
    background: white;
    color: black;
} 
```

You can of course customise this further with buttons and so on. jQuery provides some libraries for this, but I made a fully-customisable box (unlimited buttons with custom text and callbacks) in just 40 lines of raw JavaScript. To each his own...

# java - KeyListener 类

> ID：12132313
> 
> 赞同：1
> 
> 时间：2012-08-26T17:27:42.490
> 
> 标签：java, swing, class, object, keylistener

因此，我想在我的程序中创建一个可应用于其中所有类的 keylistener（就像将类创建为对象时一样）。

我不知道如何使用键（或任何其他）侦听器来做到这一点。

通常它会去：class blabla extends JPanel {blablabla;}，但它不是那样工作的。

要走的路是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:32:25.327

考虑创建一个`EventHandler`实现`KeyListener`接口的类。实例化此类并传递给`addKeyListener()`方法：

```
class EventHandler implements KeyListener{
    @Override
    public void keyPressed(KeyEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyReleased(KeyEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent e) {
        // TODO Auto-generated method stub

    }
}   

/**
* Usage
*/
EventHandler eh = new EventHandler();
nameOfComponent.addKeyListener(eh); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:33:28.403

KeyListener 是一个接口，所以你应该使用关键字 implements 而不是 extends。

# automapper - 使用 Automapper 清空字典

> ID：12132321
> 
> 赞同：0
> 
> 时间：2012-08-26T17:28:58.237
> 
> 标签：automapper

我正在尝试将一个映射`IDictionary<string,object>`到另一个`IDictionary<string,object>`。源字典包含域对象的`int`、`int[]`和`string[]`强类型列表。我想将该字典映射到我的域对象映射到 DTO 的字典。

我为将它们映射到等效 DTO 的域对象创建了映射。但是，当尝试映射字典时，它会导致一个空的`IDictionary<string,object>`.

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:48:37.847

没关系，我在做一些愚蠢的事情。字典在父对象的构造函数中被初始化，很难覆盖 Automapper 生成的字典。

叹。

# iphone - XCode 仪器 - 分配仪器未找到僵尸

> ID：12132325
> 
> 赞同：2
> 
> 时间：2012-08-26T17:30:05.703
> 
> 标签：iphone, ios, xcode, ios5, nszombie

我正在运行 Xcode 4.4.1 并构建一个 iOS 应用程序。我的应用程序正在崩溃并且存在内存问题（我知道是因为它正在崩溃`objc_msgSend`）。

所以我正在运行 Zombies Instruments 工具。问题是，它运行没有错误，对我的僵尸没有帮助：

![没有找到僵尸，没有崩溃](../Images/f4aa274066031b971932a5cc2e0d0105.png)

如果我关闭僵尸检测，那么程序会意外崩溃。我是否错误地使用了僵尸工具？或者这是否表明我有不同的问题？

无用的堆栈跟踪如下...

```
#0  0x0212a09b in objc_msgSend ()
#1  0x01bd36b7 in -[NSError dealloc] ()
#2  0x0212ae3d in _objc_rootRelease ()
#3  0x01bc1f28 in -[NSFilesystemItemRemoveOperation dealloc] ()
#4  0x01bb0e16 in -[NSOperation release] ()
#5  0x0212ae00 in objc_release ()
#6  0x0212bc50 in (anonymous namespace)::AutoreleasePoolPage::pop(void*) ()
#7  0x004faea8 in _CFAutoreleasePoolPop ()
#8  0x004fd80b in __CFRunLoopRun ()
#9  0x004fcd84 in CFRunLoopRunSpecific ()
#10 0x004fcc9b in CFRunLoopRunInMode ()
#11 0x02ca57d8 in GSEventRunModal ()
#12 0x02ca588a in GSEventRun ()
#13 0x0127a626 in UIApplicationMain ()
#14 0x00002e5d in main at /Users/willentriken/Developer/EnglishStudy/EnglishStudy/main.m:16
#15 0x00002dc5 in start () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:37:42.903

在 ARC 和 NSZombieEnabled 下，iOS 6.0 之前（以及 Mac OS 10.8 之前）存在一个错误，阻止了实例变量和属性的自动释放。

这就解释了你所看到的，因为物体只会泄漏而不是变成僵尸。

解决方法：在iOS 6.0下测试。

附加信息：在 5.1 模拟器中测试时，Mountain Lion 下的问题仍然存在。

# ruby - 单击 watir 中的链接组

> ID：12132332
> 
> 赞同：0
> 
> 时间：2012-08-26T17:31:08.407
> 
> 标签：ruby, watir, watir-webdriver

我是 ruby​​ 新手，我正在尝试与 watir 合作。我想我已经掌握了基础知识，但是我无法单击所有 id 与正则表达式匹配的链接。我试过这个；

```
require "watir-webdriver"
browser = Watir::Browser.new :ff
browser.goto "http://mysite.com"
browser.links(:id, /asd[0-7]/).each do |adv|
    adv.click
    sleep 1
end 
```

但它似乎没有点击链接。我在这里做错了什么？链接在新窗口中打开，因此循环浏览它们是没有问题的。但我无法使循环工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T03:04:10.017

这种调查在 IRB 中比较好。无论如何，您应该确认您有可以点击的链接。

```
require "watir-webdriver"
browser = Watir::Browser.new :ff
browser.goto "https://rvm.io/"
links = browser.links(:href => /gemsets/)
links.count 
```

我改变了我的使用一个我可以访问并有链接的网站。

# python - 如何创建交互式选择？

> ID：12132333
> 
> 赞同：4
> 
> 时间：2012-08-26T17:31:20.013
> 
> 标签：python, interactive-shell

我想在 Python 中创建一个“交互式选择”（不确定我的措辞是否正确，请看下面的示例），让用户按下向上和向下键来选择一个选项并返回以确认它，然后它继续脚本。终端中的示例输出如下所示：

```
$ python script.py
Please select an option.

  [ ] Option 1
  [ ] Option 2
  [*] Option 3

You have chosen: Option 3 
```

在打印完第一个字符串后，用户可以使用他们的箭头键来选择他们用星号标记的选项。脚本看起来有点像这样：

```
print 'Please select an option.'
option = interactive_choice(['Option 1', 'Option 2', 'Option 3'])
print 'You have chosen: ' + option 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:02:54.070

在 Windows 上，你对这些东西非常有限。您可能想要查看的库是[wcurses](http://code.google.com/p/wcurses/)、[PDCurses](http://pdcurses.sourceforge.net/)和[Wconsio](http://newcenturycomputers.net/projects/wconio.html)。请注意，我自己都没有使用这些库。[使用像Boa Constructor](http://boa-constructor.sourceforge.net/)这样看起来像终端的 IDE 设计 GUI 可能会更好，但毫无疑问，这要困难得多。

# c# - C# SqlParameters 没有被传递到查询中

> ID：12132334
> 
> 赞同：2
> 
> 时间：2012-08-26T17:31:24.350
> 
> 标签：c#, sql, sql-server-2008

### Sql 命令构造

我已经按如下方式构建了 Sql 命令：

```
 string _InsertVehicleQuery = "INSERT INTO VSI_VehicleRecords(StockNumber,Status,Make,Model,Colour,Spefication) VALUES (@StockNumber, @Status, '@Make', '@Model', '@Colour', '@Specification');";

    SqlCommand _InsertVehicleCommand = new SqlCommand(_InsertVehicleQuery);
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@StockNumber", __StockNumber));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Status", __Status));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Make", Make));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Model", Model));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Colour", Colour));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Specification", Specification)); 
```

### Sql 命令执行

```
 //Method call
    DataUtility.NonQuery(_InsertVehicleCommand);

    //Method structure
    public static void NonQuery(SqlCommand Command)
    {
        Command.Connection = __Connection;

        OpenConnection();
        Command.ExecuteNonQuery();
        CloseConnection();
    } 
```

在 SQL 查询的执行或构造中，我没有做任何明显的事情。我在数据库表中得到的结果：

```
VehicleRecordID StockNumber Status  Make    Model   Colour  Spefication
1                 -1            0   @Make   @Model  @Colour @Specification 
```

在此先感谢您的任何解决方案，也欢迎任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T17:33:13.237

参数名称不应在`VALUES`列表中使用单引号，因为它们将被解释为字符串文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T17:33:12.317

不要在参数周围加上引号，即

```
... (@StockNumber, @Status, @Make, @Model, @Colour, @Specification);"; 
```

代替

```
... (@StockNumber, @Status, '@Make', '@Model', '@Colour', '@Specification');"; 
```

此外，您可以使用 AddWithValue

```
_InsertVehicleCommand.Parameters.AddWithValue("@Make", Make); 
```

代替

```
_InsertVehicleCommand.Parameters.Add(new SqlParameter("@Make", Make)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T17:34:12.703

不要在参数周围加上“@parameter”

```
string _InsertVehicleQuery = "INSERT INTO VSI_VehicleRecords(StockNumber,Status,Make,Model,Colour,Spefication) VALUES (@StockNumber, @Status, @Make, @Model, @Colour, @Specification);";

    SqlCommand _InsertVehicleCommand = new SqlCommand(_InsertVehicleQuery);
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@StockNumber", __StockNumber));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Status", __Status));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Make", Make));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Model", Model));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Colour", Colour));
    _InsertVehicleCommand.Parameters.Add(new SqlParameter("@Specification", Specification)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T17:34:20.410

从参数定义中删除`@`字符和引号`'`。

然后设置每个参数添加的Value属性

新的 SqlParameter("StockNumber", __StockNumber).Value = value;

# android - 从 apk 文件开始活动

> ID：12132335
> 
> 赞同：1
> 
> 时间：2012-08-26T17:31:49.030
> 
> 标签：android, launching-application, android-install-apk

我正在尝试从外部 apk 文件开始活动。apk 文件是一个简单的文本显示，我从 URL 将它下载到 /mnt/sdcard/ 中的本地安装目录中。到那时一切都很好。现在，我想从该文件开始一个活动，但我遇到了错误。两种类型，取决于 Intent 构造。下面是关联 LogCat 的两个实现，“targetFilePath”是相同的。案例一：

```
try {
    Intent install = new Intent(Intent.ACTION_VIEW)
    .setData(Uri.fromFile(new File(targetFilePath)))
    .setType("application/vnd.android.package-archive");
    startActivity(install);
}
catch (Exception e) {
    e.printStackTrace();
    Toast.makeText(DownloadFile.this, "apk file launch error: " +   e.getMessage(), Toast.LENGTH_LONG).show();
} 
```

日志猫：

```
08-26 17:03:02.153: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.VIEW typ=application/vnd.android.package-archive }
08-26 17:03:02.153: W/System.err(390): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW typ=application/vnd.android.package-archive }
08-26 17:03:02.162: W/System.err(390):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
08-26 17:03:02.162: W/System.err(390):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
08-26 17:03:02.162: W/System.err(390):  at android.app.Activity.startActivityForResult(Activity.java:2817)
08-26 17:03:02.162: W/System.err(390):  at android.app.Activity.startActivity(Activity.java:2923)
08-26 17:03:02.162: W/System.err(390):  at com.agorasoft.sandbox.DownloadFile$1.onClick(DownloadFile.java:137)
08-26 17:03:02.162: W/System.err(390):  at android.view.View.performClick(View.java:2408)
08-26 17:03:02.172: W/System.err(390):  at android.view.View$PerformClick.run(View.java:8816)
08-26 17:03:02.172: W/System.err(390):  at android.os.Handler.handleCallback(Handler.java:587)
08-26 17:03:02.172: W/System.err(390):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-26 17:03:02.172: W/System.err(390):  at android.os.Looper.loop(Looper.java:123)
08-26 17:03:02.182: W/System.err(390):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-26 17:03:02.182: W/System.err(390):  at java.lang.reflect.Method.invokeNative(Native Method)
08-26 17:03:02.182: W/System.err(390):  at java.lang.reflect.Method.invoke(Method.java:521)
08-26 17:03:02.182: W/System.err(390):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-26 17:03:02.182: W/System.err(390):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-26 17:03:02.182: W/System.err(390):  at dalvik.system.NativeStart.main(Native Method)
08-26 17:03:21.761: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol 
```

案例二：

```
try {
    Intent intent = new Intent(Intent.ACTION_VIEW);
    Uri apkUri = Uri.fromFile(new File(targetFilePath));
    intent.setDataAndType(apkUri, "application/vnd.android.package-archive");
    startActivity(intent);
}
catch (Exception e) {
    e.printStackTrace();
    Toast.makeText(DownloadFile.this, "apk file launch error: " +   e.getMessage(), Toast.LENGTH_LONG).show();
} 
```

解析错误弹窗：**解析包有问题**

日志猫：

```
08-26 17:09:48.862: W/PackageParser(329): Unable to read AndroidManifest.xml of /mnt/sdcard/Downloads/ApkTest.apk
08-26 17:09:48.862: W/PackageParser(329): java.io.FileNotFoundException: AndroidManifest.xml
08-26 17:09:48.862: W/PackageParser(329):   at android.content.res.AssetManager.openXmlAssetNative(Native Method)
08-26 17:09:48.862: W/PackageParser(329):   at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:485)
08-26 17:09:48.862: W/PackageParser(329):   at android.content.res.AssetManager.openXmlResourceParser(AssetManager.java:453)
08-26 17:09:48.862: W/PackageParser(329):   at android.content.pm.PackageParser.parsePackage(PackageParser.java:396)
08-26 17:09:48.862: W/PackageParser(329):   at com.android.packageinstaller.PackageUtil.getPackageInfo(PackageUtil.java:79)
08-26 17:09:48.862: W/PackageParser(329):   at com.android.packageinstaller.PackageInstallerActivity.onCreate(PackageInstallerActivity.java:242)
08-26 17:09:48.862: W/PackageParser(329):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-26 17:09:48.862: W/PackageParser(329):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-26 17:09:48.862: W/PackageParser(329):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-26 17:09:48.862: W/PackageParser(329):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-26 17:09:48.862: W/PackageParser(329):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-26 17:09:48.862: W/PackageParser(329):   at android.os.Handler.dispatchMessage(Handler.java:99)
08-26 17:09:48.862: W/PackageParser(329):   at android.os.Looper.loop(Looper.java:123)
08-26 17:09:48.862: W/PackageParser(329):   at android.app.ActivityThread.main(ActivityThread.java:4627)
08-26 17:09:48.862: W/PackageParser(329):   at java.lang.reflect.Method.invokeNative(Native Method)
08-26 17:09:48.862: W/PackageParser(329):   at java.lang.reflect.Method.invoke(Method.java:521)
08-26 17:09:48.862: W/PackageParser(329):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-26 17:09:48.862: W/PackageParser(329):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-26 17:09:48.862: W/PackageParser(329):   at dalvik.system.NativeStart.main(Native Method)
08-26 17:09:48.862: W/PackageInstaller(329): Parse error when parsing manifest. Discontinuing installation
08-26 17:09:49.902: I/ActivityManager(59): Displayed activity com.android.packageinstaller/.PackageInstallerActivity: 1168 ms (total 1168 ms) 
```

对于冗长的论点感到抱歉，但似乎很奇怪，首先，它不起作用，然后我对意图/安装定义的两种语法有不同的行为。调用应用程序和 apk 文件具有相同的 SDK 目标/最小版本。在调用应用程序清单中没有为此代码块设置特殊权限（我需要任何权限吗？）。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:45:26.297

文档持有您的答案：[`Intent.setType`](http://developer.android.com/reference/android/content/Intent.html#setType%28java.lang.String%29)

> 这用于创建**仅指定类型而不指定数据的**意图，例如指示要返回的数据类型。
> 
> 此方法**会自动清除之前设置的所有数据**（例如通过 setData(Uri)）。

和文档[`Intent.setDataAndType`](http://developer.android.com/reference/android/content/Intent.html#setDataAndType%28android.net.Uri,%20java.lang.String%29)

> **这种方法应该很少使用**——它允许您使用此处给出的您自己的类型覆盖通常从数据中推断出的 MIME 类型。

简而言之，你在构造这个意图时不需要指定类型，它会根据给定 URI 的数据本身推断出来。

综上所述，nandeesh 的评论似乎是正确的——您尝试安装的软件包看起来已损坏。另外值得注意的是，如果您打算将此应用发布到 Play 商店，则开发者协议不允许下载或安装其他 apk 的应用。

# python - Python 正则表达式：匹配括号/括号对

> ID：12132336
> 
> 赞同：3
> 
> 时间：2012-08-26T17:31:49.437
> 
> 标签：python, regex

我想捕捉彼此相邻的括号/括号对并掌握其中的单词。在下面的文字中，我想捕捉`[oh](so)`和`[bad](things)`。

```
[oh](so)funny
[all]the[bad](things) 
```

如果我使用正则表达式`r'\[(.*?)\]\((.*?)\)'`，它会捕获`[oh](so)`and `[all]the[bad](things)`，这不是我想要的。

什么是解决这个问题的好正则表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T17:33:26.113

不要使用`.*?`.

而是使用`[^\]]+`和`[^\)]+`

换句话说：

`r'\[([^\]]+)\]\(([^\)]+)\)'`

# django - 最终用户 Google 帐户未获得授权

> ID：12132337
> 
> 赞同：1
> 
> 时间：2012-08-26T17:32:00.730
> 
> 标签：django, google-app-engine, google-cloud-sql

我有一个在 appengine 上运行的 django 应用程序，并且想将一个云 sql 实例附加到它上面。我已根据需要设置了所有内容，并希望使用简单的方法填充数据库

```
manage.py syncdb 
```

但上面的调用给了我一个“google.storage.speckle.python.api.rdbms.DatabaseError: 0: End user Google Account not authorized”错误

我已经设置了 cloudsql 以允许访问我的 appenging。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:35:46.093

也许您使用了错误的 OAuth2 凭据。尝试删除凭据 .dat 文件并再次登录。 [https://developers.google.com/appengine/docs/python/cloud-sql/django#authentication](https://developers.google.com/appengine/docs/python/cloud-sql/django#authentication)

# javascript - 使用javascript从输入框中获取值

> ID：12132338
> 
> 赞同：0
> 
> 时间：2012-08-26T17:32:10.960
> 
> 标签：javascript, jquery

我有一个表单，想将一个值从它传递给我的 javascript - 并使用这个值来创建一个 javascript 变量。

我是 javascript 的新手，无法让它工作。

这是我的代码：

```
<input id="bartype" name="bartype" type="text" value="<?php echo $bartype; ?>" style="display:none" /> 
```

我想获取值并在我的 javascript 中创建这个 var：

```
var type = $('#bartype');
var targetUrl = 'listing.php?page=$'+type; 
```

我该怎么做呢？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:32:52.667

```
var type = $('#bartype').val();
var targetUrl = 'listing.php?page='+type; 
```

使用 google 开发者工具或 firebug 调试 javascript

```
console.log($('#bartype')) 
```

您应该阅读一些教程：

[http://docs.jquery.com/Tutorials](http://docs.jquery.com/Tutorials)

# c# - 如何运行对象变量的已知方法？

> ID：12132340
> 
> 赞同：0
> 
> 时间：2012-08-26T17:32:32.077
> 
> 标签：c#, object, methods

我有`public object LastControl`其中将包含自定义类，其中一些具有 Resize() 方法。我想知道如何找出当前值是否属于具有此方法的类并在这种情况下运行它。

截至目前，我在尝试编译时遇到错误，`LastControl.Resize()`因为类型对象本身没有该方法。转换为控制类可能是一个简单的解决方案，但是有多个类，所以我不知道在这里做什么。我想我应该以某种方式开始使用`GetType`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T17:39:47.900

正如您提到的那样，基于反射的方式`GetType`使用[`GetMethod`method](http://msdn.microsoft.com/en-us/library/05eey4y9.aspx)。您可以使用它来获取一个[`MethodInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)实例，然后您可以在该实例上调用该[`Invoke`方法](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)来执行该方法。

然而，更简洁的方法是声明一个提供`Resize()`方法的接口：

```
public interface IResizeable
{
    void Resize();
} 
```

在您的任何具有`Resize()`方法的自定义类中，您都可以实现该接口。然后，为了检查 的当前值是否`LastControl`有`Resize()`方法，你尝试使用 using 强制转换对象`as`，如果结果不是`null`，你可以安全地调用该`Resize()`方法：

```
IResizeable resizeable = LastObject as IResizeable;
if (resizeable != null) {
    resizeable.Resize();
} 
```

# magento - 亚马逊支付与 magento 的集成

> ID：12132350
> 
> 赞同：1
> 
> 时间：2012-08-26T17:33:26.600
> 
> 标签：magento, amazon

我想将亚马逊支付和亚马逊履行与 magento 集成。谁能告诉我哪个扩展（免费或付费）最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:32:09.970

检查下面的 Magento 连接页面。这可能会对您有所帮助。

[http://www.magentocommerce.com/magento-connect/catalogsearch/result/?q=amazon+payment&pl=0](http://www.magentocommerce.com/magento-connect/catalogsearch/result/?q=amazon%20payment&pl=0)

检查它具有的客户评论和功能并选择任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-23T08:25:45.447

根据[Magentocommerce](https://www.magentocommerce.com/magento-connect/pay-with-amazon-for-magento-1.html)最新版本是 1.4.0

但这已经过时了。[您将在GitHub 上](https://github.com/amzn/amazon-payments-magento-plugin)找到更新的版本（此时为 1.4.3）

所以我建议将来（也）检查 GitHub。

# c++ - 点到线/段的距离

> ID：12132352
> 
> 赞同：5
> 
> 时间：2012-08-26T17:33:42.027
> 
> 标签：c++, c

我必须计算点到线的距离（检查它是线还是线段）。我不确定布尔函数 IsSegment 是否正常工作。我可以有一些建议吗？谢谢你。

```
double Distance_From_Line_to_Point(int *a, int *b, int *c, bool IsSegment) {
    double distance;
    int dot1;
    int dot2;
    distance = Cross_Product(a, b, c) / Distance(a, b);
    if (IsSegment(a,b,c) == true) {
        dot1 = Dot_Product(a, b, c);
        if (dot1 > 0) {
            return Distance(b, c);
        }
        dot2 = Dot_Product(b, a, c);
        if (dot2 > 0) {
            return Distance(a, c);
        }
    }
    return fabs(distance);
}

bool IsSegment(int *a, int *b, int *c) {
    double angle1;
    double angle2;
    angle1 = atan(double(b[1] - a[1]) / (b[0] - a[0]));
    angle2 = atan(double(c[1] - b[1]) / (c[0] - b[0]));
    if ((angle2 - angle1) * (180 / PI) > 90) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T18:23:53.963

你不能用公式来得到距离吗？

所以要找到这条线：

```
void getLine(double x1, double y1, double x2, double y2, double &a, double &b, double &c)
{
       // (x- p1X) / (p2X - p1X) = (y - p1Y) / (p2Y - p1Y) 
       a = y1 - y2; // Note: this was incorrectly "y2 - y1" in the original answer
       b = x2 - x1;
       c = x1 * y2 - x2 * y1;
} 
```

[http://formule-matematica.tripod.com/distanta-de-dreapta.htm](http://formule-matematica.tripod.com/distanta-de-dreapta.htm)

```
double dist(double pct1X, double pct1Y, double pct2X, double pct2Y, double pct3X, double pct3Y)
{
     double a, b, c;
     getLine(pct2X, pct2Y, pct3X, pct3Y, a, b, c);
     return abs(a * pct1X + b * pct1Y + c) / sqrt(a * a + b * b);
} 
```

有关如何使用代码的示例：

```
#include <CMATH>

void getLine(double x1, double y1, double x2, double y2, double &a, double &b, double &c)
{
    // (x- p1X) / (p2X - p1X) = (y - p1Y) / (p2Y - p1Y) 
    a = y1 - y2; // Note: this was incorrectly "y2 - y1" in the original answer
    b = x2 - x1;
    c = x1 * y2 - x2 * y1;
}

double dist(double pct1X, double pct1Y, double pct2X, double pct2Y, double pct3X, double pct3Y)
{
    double a, b, c;
    getLine(pct2X, pct2Y, pct3X, pct3Y, a, b, c);
    return abs(a * pct1X + b * pct1Y + c) / sqrt(a * a + b * b);
}

int main(int argc, char* argv[])
{
    double d = dist(1,2,3,4,5,6);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-16T04:46:32.517

# 点到线的距离

[![点到线的距离](../Images/ff0d3e6af5f51062d1376f8dc550dd01.png)](https://i.stack.imgur.com/3OFam.png)

你需要2个公式：

行公式：来源[this answer](https://stackoverflow.com/a/13242831/4608491)。

```
 private Vector2 m_point1;
    private Vector2 m_point1;
    private float m_A;
    private float m_B;
    private float m_C;
    public void CalculateLine()
    {
        m_A = m_point1.y - m_point2.y;
        m_B = m_point2.x - m_point1.x;
        m_C = m_point1.x * m_point2.y - m_point2.x * m_point1.y;
        if(m_A == 0 && m_B == 0)
        {
            Debug.LogError("Line error: A & B = 0");
        }
    } 
```

点到线的距离：来源[维基百科](https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line)

```
public float Distance2DPointToLine(Vector2 point)
{
    return Mathf.Abs(m_A * point.x + m_B * point.y + m_C) / 
        Mathf.Sqrt(m_A * m_A + m_B * m_B);
} 
```

# 点到线段的距离

这取决于您定义的“从点到线段的距离”

也许从点到线段的距离是从点到线段中点的距离： [![到中点？](../Images/a3762dd806cf9412ab2e55c4d5f2a3a3.png)](https://i.stack.imgur.com/83LoM.png)

如果点可以投影到线段上，可能距离可用 [![距离：存在或不存在](../Images/5408cd63734fd93b9c97fe5f1a6b1989.png)](https://i.stack.imgur.com/Ww3xw.png)

可能你在问segment的时候没有想象到结果是什么，所以我无法为你回答segment部分。

# database - opa 数据库：如何知道数据库中是否存在值？

> ID：12132353
> 
> 赞同：0
> 
> 时间：2012-08-26T17:33:45.127
> 
> 标签：database, opa

我想知道数据库中是否存在记录，使用与关键字段不同的字段。

我尝试了以下代码：

```
function start()
{
  jlog("start db query")
  myType d1 = {A:"rabbit", B:"poney"};
  /myDataBase/data[A == d1.A] = d1
  jlog("db write done")
   option opt = ?/myDataBase/data[B == "rabit"]
  jlog("db query done")

  match(opt)
  {
   case {none} : <>Nothing in db</>
   case {some:data} : <>{data} in database</>
  }
}

Server.start(
   {port:8092, netmask:0.0.0.0, encryption: {no_encryption}, name:"test"},
   [
     {page: start, title: "test" }
   ]
) 
```

但是服务器挂断了，并且永远不会到达 jlog("db query done") 行。我心甘情愿地拼错了“兔子”。我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:03:16.593

确实，您的示例失败了，我有一个“匹配失败 8859742”异常，您没看到吗？

但不要使用`?/myDataBase/data[B == "rabit"]`（它应该在编译时被拒绝 - 发送错误报告）但`/myDataBase/data[B == "rabit"]`它是一个 DbSet。原因是当您不使用主键时，您可以有多个值作为回报，即一组值。

您可以使用 DbSet.iterator 将 dbset 转换为 iter。然后用 Iter 操作它：http: [//doc.opalang.org/module/stdlib.core.iter/Iter](http://doc.opalang.org/module/stdlib.core.iter/Iter)

# c++ - 获取摩尔斯电码转换器的字符串长度不断循环

> ID：12132363
> 
> 赞同：1
> 
> 时间：2012-08-26T17:34:35.973
> 
> 标签：c++, morse-code

处理我的第一个编程任务，一个文本到莫尔斯（和返回）转换器，但无论出于何种原因，当我引入一段文字之间有空格的文本时，我的程序进入无限循环并崩溃。有任何想法吗？对不起，如果这个描述很糟糕，我仍然在思考编程术语。

这是程序无法正常运行的部分：

```
 {

        string user_input;
        cout << "----------------------------------------" <<endl
        << "Text to Morse Mode" << endl
        << "Enter text for conversion : "<<endl;
        cin >> user_input;
        cout << endl << endl << user_input << " converts to : ";
        unsigned int str_lenght;
        str_lenght=user_input.size();
        cout << endl;

        for (i=0;i<str_lenght;i++)
        {

            find_string=0;

            while (find_string < stop_string)
            {

                if (user_input[i]==text[find_string][0])
                {
                    count=1;
                    cout << morse[find_string] << " ";
                    break;

                }

                find_string = find_string+1;
            }

        }

        cout << endl << endl << endl;

        if (count==0)
            cout << endl << " an error was encountered " << "\a" << endl ;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:41:27.197

First you haven't defined stop_string variable anywhere. First define it or use another variable. If it is string length intent to use here, use the str_length you have created. Secondly if you want to input spaces in between your words, use getline instead of cin. cin delimits space character.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:36:56.933

`stop_string`从我看到的任何地方都没有定义。为了通过递增来打破循环，您需要定义`stop_string`. 也`find_string = find_string+1;`可以缩短为`find_string++`

# objective-c - iOS 5、Storyboards、ARC：导航控制器在自定义委托中不起作用

> ID：12132365
> 
> 赞同：0
> 
> 时间：2012-08-26T17:34:41.037
> 
> 标签：objective-c, ios, cocoa-touch

这个问题的前传在[这里](https://stackoverflow.com/questions/12059235/ios-5-storyboards-arc-creating-and-setting-custom-delegate-and-datasource-to-p)。现在我遇到了另一个问题。尽管在点击单元格时调用了 didSelectRowAtIndexPath，但我无法导航

```
KMList *detailViewController = [self.storyboard     instantiateViewControllerWithIdentifier:@"KMs"];
detailViewController.fromPeriod=self.fromPeriod;
detailViewController.period1=self.entityID;
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

什么问题。是因为我有点脱离故事板吗？

PS没有警告或错误。只是什么都没有发生。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:00:26.090

使用情节提要时，不应在代码中推送新的视图控制器。这是自动完成的。而是在 Interface Builder 中创建一个 push-Segue 并给它一个标识符。然后在您的视图控制器中，您覆盖`prepareForSegue:sender:`并检查如下标识符：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"<your segue identifier>"]) {
        KMList *detailViewController = [segue destinationViewController];
        detailViewController.fromPeriod=self.fromPeriod;
        detailViewController.period1=self.entityID;
    }
} 
```

# objective-c - 如何告诉我的 GNUMakefile 链接到特定库？

> ID：12132366
> 
> 赞同：1
> 
> 时间：2012-08-26T17:34:53.920
> 
> 标签：objective-c, gnustep, gnu-make

我的 GNUMakefile 如下：

```
include $(GNUSTEP_MAKEFILES)/common.make

APP_NAME = MyApp

MyApp_HEADER_FILES = src/objc/framework/Bug.h src/objc/framework/NSMutableArray+Shuffle.h src/objc/framework/World.h src/objc/framework/BugProtocol.h src/objc/domain/RandomBug.h 
MyApp_OBJC_FILES =  src/objc/framework/Bug.m src/objc/framework/World.m src/objc/framework/NSMutableArray+Shuffle.m src/objc/domain/RandomBug.m 

include $(GNUSTEP_MAKEFILES)/application.make 
```

在我使用的代码中`arc4random`，这意味着我需要链接到`libbsd`. 我如何在我的makefile中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:02:38.203

我想通了。我用过`ADDITIONAL_TOOL_LIBS`：

```
include $(GNUSTEP_MAKEFILES)/common.make

APP_NAME = BhumiApp

BhumiApp_HEADER_FILES = src/objc/framework/Bug.h src/objc/framework/NSMutableArray+Shuffle.h src/objc/framework/World.h src/objc/framework/BugProtocol.h src/objc/domain/RandomBug.h 
BhumiApp_OBJC_FILES =  src/objc/framework/Bug.m src/objc/framework/World.m src/objc/framework/NSMutableArray+Shuffle.m src/objc/domain/RandomBug.m 
ADDITIONAL_TOOL_LIBS = -l:libbsd.so.0

include $(GNUSTEP_MAKEFILES)/application.make 
```

# c# - XML 文档中的相对引用

> ID：12132367
> 
> 赞同：1
> 
> 时间：2012-08-26T17:35:03.267
> 
> 标签：c#, xml, linq-to-xml

我正在尝试从似乎使用这样的相对引用的 XML 文档中提取数据：

```
<action>
  <topic reference="../../action[110]/topic"/>
  <context reference="../../../../../../../../../../../../../contexts/items/context[2]"/>
</action> 
```

两个问题：

1.  这是正常的还是常见的？
2.  有没有办法用 linq to XML / XDocument 来处理这个问题，还是我需要手动遍历文档树？

* * *

## 编辑：

澄清一下，这些引用指向同一 XML 文档中的其他节点。上面的`context`节点引用了一个上下文列表，并说要在索引 2 处获取一个。

该`topic`节点更让我担心，因为它引用了某个其他操作的主题，而该主题又可以引用主题列表。如果没有发生这种情况，我只会将上下文和主题列表加载到缓存中并以这种方式查找它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:39:33.767

我最终手动遍历树。但是使用扩展方法，一切都很好，而且不碍事。以防它将来可能对任何人有所帮助，这就是我为我的用例汇总的内容：

```
public static XElement GetRelativeNode(this XAttribute attribute)
    {
        return attribute.Parent.GetRelativeNode(attribute.Value);
    }

    public static string GetRelativeNode(this XElement node, string pathReference)
    {
        if (!pathReference.Contains("..")) return node; // Not relative reference

        var parts = pathReference.Split(new string[] { "/"}, StringSplitOptions.RemoveEmptyEntries);
        XElement current = node;
        foreach (var part in parts)
        {
            if (string.IsNullOrEmpty(part)) continue;
            if (part == "..")
            {
                current = current.Parent;
            } 
            else
            {
                if (part.Contains("["))
                {
                    var opening = part.IndexOf("[");
                    var targetNodeName = part.Substring(0, opening);
                    var ending = part.IndexOf("]");
                    var nodeIndex = int.Parse(part.Substring(opening + 1, ending - opening - 1));

                    current = current.Descendants(targetNodeName).Skip(nodeIndex-1).First();
                } 
                else
                {
                    current = current.Element(part);    
                }

            }
        }

        return current;
    } 
```

然后你会像这样使用它（`item`is an `XElement`）：

```
item.Element("topic").Attribute("reference").GetRelativeNode().Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:56:46.027

您可以使用 XPATH Query 来提取节点，它非常有效。

Step1：将 XML 加载到 XMLDocument 中
Step2：使用 `node.SelectNodes("//*[reference]")`
Step3：之后您可以循环遍历 XML 节点。

# django - Django 查询集 __contains 区分大小写？

> ID：12132368
> 
> 赞同：15
> 
> 时间：2012-08-26T17:35:24.937
> 
> 标签：django, django-models

我想执行一个简单的查询：

```
Pizza.object.filter(topping__contains='PEPERONI') 
```

像这样，它就像一个魅力。但如果我尝试这样做：

```
Pizza.object.filter(topping__contains='peperoni') 
```

它不工作。

你知道为什么它是区分大小写的吗？是否可以从 django 取消此功能？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-26T17:37:48.643

使用`Pizza.object.filter(topping__icontains='peperoni')`.

[`__icontains`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#icontains)用检查过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-19T07:15:23.763

您需要导入和使用`Q`对象：

```
from django.db.models import Q 

Resulting_Queryset = MyModel.objects.filter(Q(name__istartswith='Nishank Gupta'.strip().lower()) &  Q(name__iendswith='Nishank Gupta'.strip().lower())) 
```

这将匹配`Nishank Gupta`和`Nishank GUPTA` 等等 `NisHANnk Gupta`。希望这可以帮助。请让我知道你的看法。

或使用 iexact：

```
MyModel.objects.filter(name__iexact='Nishank Gupta'.strip().lower()) 
```

# android - getLayoutInflater() 和 .getSystemService(Context.LAYOUT_INFLATER_SERVICE) 之间有什么区别吗

> ID：12132370
> 
> 赞同：32
> 
> 时间：2012-08-26T17:35:41.783
> 
> 标签：android, android-layout, android-widget

简单的“不”回答会让我平静下来。如果有任何区别，那么它是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-26T18:19:22.607

不

只要调用的 Activity 或 Window 与调用`getLayoutInflater()`的 Context 相同，就`getSystemService()`没有区别。

* * *

**证明**您可以跟踪由[LayoutInflater.from()](http://developer.android.com/reference/android/view/LayoutInflater.html#from%28android.content.Context%29)`getLayoutInflater()`返回的LayoutInflater ，您可以看到这只是源代码的快捷方式：`getSystemService()`

```
public static LayoutInflater from(Context context) {
    LayoutInflater LayoutInflater =
            (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    if (LayoutInflater == null) {
        throw new AssertionError("LayoutInflater not found.");
    }
    return LayoutInflater;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-22T04:19:29.283

至少有一种情况只有

> 获取系统服务（上下文。LAYOUT_INFLATER_SERVICE）；

必须使用而不是对应的

> getLayoutInflater

这种情况是在任意对象类中。例如，我有一个类调用 objectA 的实例。在 objectA 中，我想将视图膨胀到父视图上（发生在 ArrayAdapter 中，它会膨胀其列表视图上的自定义行。）在这种情况下，***context.getLayoutInflater***不起作用，因为没有与上下文关联的活动或窗口。只有***getSystemService(Context.LAYOUT_INFLATER_SERVICE)***是合适的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T17:42:36.290

这就是您定义 LayoutInflater 的方式。

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService (Context.LAYOUT_INFLATER_SERVICE); 
```

并且`getLayoutInflater()`只是通过返回 LayoutInflater 来“快速访问窗口从其上下文中检索的 LayoutInflater 实例”（来自[文档](http://developer.android.com/reference/android/view/Window.html#getLayoutInflater%28%29)）。

同样，`getSystemService(Context.LAYOUT_INFLATER_SERVICE)`用于检索 LayoutInflater 以在此上下文中膨胀布局资源。

因此，实际上两者之间***没有***区别。

来源：[文档](http://developer.android.com/index.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-17T16:44:25.080

不。

完全没有区别。

# c++ - 打印数组副本时出现分段错误

> ID：12132371
> 
> 赞同：0
> 
> 时间：2012-08-26T17:35:44.347
> 
> 标签：c++, c, arrays, segmentation-fault

以下程序在`v2`打印时会出现段错误，但在数组复制期间不会出现。有谁知道为什么？

```
#include <stdio.h>
#include <stdlib.h>

void cpyarray (void* dst, void* src, size_t memsize, size_t size) {

    for (size_t i = 0; i < size; i++) {

        *(((char*) dst) + i*memsize) = *(((char*) src) + i*memsize);
    }
}

int main () {

    size_t N = 10;

    double* v1 = (double *) malloc(N * sizeof(double));
    double* v2 = (double *) malloc(N * sizeof(double));

    for (size_t i = 0; i < N; i++) *(v1+i) = i;

    printf("\n\nv1: ");
    for (size_t i = 0; i < N; i++) printf("%g ", v1[i]);

    cpyarray(&v2, &v1, sizeof(double), N);

    printf("\n\nv2: ");
    for (size_t i = 0; i < N; i++) printf("%g ", v2[i]); // program crashes here

    return 0;
} 
```

**编辑**`ints`：如果我复制数组而不是，代码不会崩溃`doubles`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:45:06.677

`v1`,`v2`是指向要操作的内存块的指针。但是您将他们的*地址*传递给您的`cpyarray`函数。

因此，您在错误的内存块上进行操作，在`v2`变量周围踩踏内存，并更改`v2`指向的内容。

```
cpyarray(v2, v1, sizeof(double), N); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:44:46.067

You are passing `&v2` to `cpyarray()`, which means that your function is changing where `v2` is pointing! Since it's now pointing to an invalid location, you get a seg fault when you dereference it for `printf()`.

Instead, just pass `v2` to `cpyarray()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:45:40.507

您正在传递错误的`cpyarray`函数指针。

您的代码发送指向数组的指针（指向双精度指针的指针）

```
cpyarray(&v2, &v1, sizeof(double), N); 
```

您应该改为发送数组（指向双精度的指针）

```
cpyarray(v2, v1, sizeof(double), N); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T17:49:05.590

除了当前答案指出的问题之外，`cpyarray`不复制数组，只是复制其中的一部分。不要试图用 来模仿类型`i*memsize`，只需将内存块视为一堆字节并一个一个地复制它们。现在您所要做的就是弄清楚要复制多少字节，这并不难。

# php - 将代码片段放入php

> ID：12132376
> 
> 赞同：0
> 
> 时间：2012-08-26T17:36:30.470
> 
> 标签：php

我需要在我的提交按钮的 php 代码中放置以下代码，以便能够跟踪点击。 `onClick="_gaq.push(['_trackEvent', 'test', 'test',,, false]);"` 我需要将其放入的代码如下所示 `<input id=”contact-submit” class=”button” type=”submit” value=”Submit” onClick="_gaq.push(['_trackEvent', 'test', 'test',,, false]);">` 问题是“'”标记似乎破坏了代码。如何在代码中打印此标记？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:38:08.117

使用`\`反斜杠转义它们

```
echo '<input id="contact-submit" class="button" type="submit" value="Submit" onClick="_gaq.push([\'_trackEvent\', \'test\', \'test\',,, false]);">'; 
```

# arrays - Powershell：从数组中获取项目并将变量分配给它们

> ID：12132380
> 
> 赞同：0
> 
> 时间：2012-08-26T17:37:09.803
> 
> 标签：arrays, string, object, powershell

我正在尝试从此列表中提取 GUIDS。

获取-WMIObject WIN32_Product | ? {$_.IdentifyingNumber -like "*26A24AE4-039D-4CA4-87B4-2F8321*FF*"} | 格式列表识别号码

是否可以将每个项目转换为字符串并可能将它们分配给变量？

这是我正在尝试的，但它不起作用。但也许这会显示我正在尝试的逻辑：

$A = 获取 WMIObject WIN32_Product | ? {$_.IdentifyingNumber -like "*26A24AE4-039D-4CA4-87B4-2F8321*FF*"} | 格式列表识别号码

$GUIDList = ForEach-Object{$A.ToString()}

$GUIDList

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:45:41.317

顾名思义，Format-list 用于显示格式化目的。

根据您的使用情况，我想您可以使用 Select-Object 代替：

```
| Select-Object IdentifyingNumber 
```

之后，您将拥有一个具有属性 IdentificationNumbers 的对象数组。

如果你只想要数组/字符串列表（假设属性是字符串），你可以这样做：

```
| Select-Object -expand IdentifyingNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T19:31:51.007

这是另一个有用的选项，它使用 WQL 过滤器并使用`Foreach-Object`cmdlet 来提取标识符：

```
Get-WmiObject Win32_Product -Filter "IdentifyingNumber LIKE "%26A24AE4-039D-4CA4-87B4-2F8321%FF%"} | 
Foreach-Object {$_.IdentifyingNumber} 
```

# android - SectionIndexer 如何影响 Android 快速滚动？

> ID：12132381
> 
> 赞同：1
> 
> 时间：2012-08-26T17:37:24.313
> 
> 标签：android, listview

在`ArrayAdapter`实现内部`SectionIndexer`有代码检查以相同的第一个字母开头的列表项 - 因此可以合并它。

像这样：

```
 alphaIndexer = new HashMap<String, Integer>();
    int size = objects.length; 

    for (int i = 0; i < size; i++) {

        // Log.d("ObjectLength", String.valueOf(objects.length));

        ItemObject it = objects[i];
        String name = it.name;
        String s = name.substring(0, 1);
        s = s.toUpperCase();

        if (!alphaIndexer.containsKey(s)) {
            alphaIndexer.put(s, i);
        }
    }

    Set<String> sectionLetters = alphaIndexer.keySet();
    ArrayList<String> sectionList = new ArrayList<String>(sectionLetters);
    Collections.sort(sectionList);
    sections = new String[sectionList.size()];

    // sectionList.toArray(sections);

    for (int i = 0; i < sectionList.size(); i++)
        sections[i] = sectionList.get(i); 
```

我的问题是，合并这种方式会影响 FastScrolling 吗？有时在使用 的 ListViews 上`SectionIndexer`，Fast Scroll 并不总是流畅，而是“断断续续”。我可以`SectionIndexer`从情况中删除，快速滚动突然平滑且按比例滚动。

添加代码：

```
public int getPositionForSection(int section) {
    return alphaIndexer.get(sections[section]);
}

public int getSectionForPosition(int position) {
    return 0;
}

public Object[] getSections() {
        return sections;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T18:08:49.187

SectionIndexer 确实会影响快速滚动。

使用 SectionIndexer 时，您的意思是希望用户能够精确地跳转到数据集的这些部分。如果这些部分中的数据分布不均匀，则快速滚动条将与其在这组部分中的进度成比例地移动，而不是与其在数据集中每个单独项目中的进度成比例地移动。

这是故意的；这样做是为了当用户拖动快速滚动拇指时，每个部分都被赋予相同的权重。精确定位任何部分就像定位任何其他部分一样容易，即使一个部分只有一个项目，而它两侧的部分有数百个。

# php - zend 和 htaccess 的问题

> ID：12132382
> 
> 赞同：2
> 
> 时间：2012-08-26T17:37:29.877
> 
> 标签：php, .htaccess, zend-framework, shared-hosting

我正在尝试在共享的 webhost 上创建 Zend 应用程序，我无法访问 php.ini 或任何东西。

Zend 已为索引控制器/视图设置并工作。但是，当我尝试通过“mysite.com/About”访问另一个控制器/视图时，我收到此错误：

```
Not Found
The requested URL /home/vhosting/g/vhostxx/domains/mysite.com/htdocs/projectname/public/index.php was not found on this server. 
```

我的文件夹结构在这里看起来像这样：http: [//framework.zend.com/wiki/display/ZFPROP/Zend+Framework+Default+Project+Structure+-+Wil+Sinclair](http://framework.zend.com/wiki/display/ZFPROP/Zend+Framework+Default+Project+Structure+-+Wil+Sinclair)（见第 9 点）

根目录（/home/vhosting/g/vhostxx/domains/mysite.com/htdocs/projectname）中的 .htaccess 如下所示：

```
php_value include_path "/domains/mysite.com/htdocs/www/library"

Options All -Indexes

php_flag display_errors on

RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule (.*) /public/$1 [L] 
```

公共文件夹中的 .htaccess 如下所示：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

这是公共文件夹中的 index.php：

```
// Define path to application directory
defined('APPLICATION_PATH')
|| define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
|| define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') :  'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
realpath(APPLICATION_PATH . '/../library'),
get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
APPLICATION_ENV,
APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
        ->run(); 
```

以及应用程序文件夹中的（空）引导程序：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

} 
```

我试图访问的控制器是：projectname/application/controllers/AboutController.php 应该可以通过 mysite.com/About 访问，但我收到了前面所述的消息。

我真的不知道我做错了什么或我错过了什么。谁能告诉我如何解决这个问题或如何调试这个？

旁注：我的主机自动翻译

```
mysite.com/htdocs/projectname/ 
```

进入

```
mysite.com/htdocs/www/ 
```

在 ftp 上，不确定这是一个问题还是在通过 http 访问它时发生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T18:00:36.763

在公用文件夹的 htaccess 文件中，更改：

```
RewriteRule ^.*$ index.php [NC,L] 
```

包括一个前导斜杠：

```
RewriteRule ^.*$ /index.php [NC,L] 
```

Apache 猜测重写规则的目标是什么，它是否是文件路径的 URI 路径，看起来它错误地猜测它是文件路径。您也可以将基础添加到您的 htaccess 文件中：

```
RewriteBase / 
```

# ruby-on-rails-3 - has_many 通过不同的主键

> ID：12132384
> 
> 赞同：0
> 
> 时间：2012-08-26T17:37:46.543
> 
> 标签：ruby-on-rails-3, activerecord, model-associations

```
 class Foo
  set_primary_key :foo_user_id
 end

 class Bar
  set_primary_key :bar_account_id
 end

 class Baz
 end 
```

`Foo`有很多`Bar`通过`Baz`。如何编写与涉及的不同主键的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:52:34.750

您可以通过添加来指定关联的主要 id `:primary_key => "my_custom_id"`。检查[文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)。

```
belongs_to :Foo, :primary_key => "foo_user_id" 
```

其余的取决于是 Foo`has_many`还是`has_one`Baz。

# android - 有什么简单的方法可以将 SpannableStringBuilder 解析为 XML？

> ID：12132387
> 
> 赞同：1
> 
> 时间：2012-08-26T17:38:01.750
> 
> 标签：android, xml, spannablestring

我正在尝试将富文本字段转换为 XML 文件以进行导出；这似乎是一个相当复杂的过程；尝试正确关闭 StyleSpans，例如使用以下跨度布局转动 SpannableStringBuilder：

`<bold>some text<italics>more text</bold>even more text</italics>`

进入正确的xml：

`<bold>some text<italics>more text</italics></bold><italics>even more text</italics>`

是否有任何库或函数可以为我进行必要的迭代，或者一些代码示例可以正确关闭跨度，而我不必从头开始？

# html - 无法显示 在 tags posted from TinyMCE

> ID：12132389
> 
> 赞同：1
> 
> 时间：2012-08-26T17:38:15.807
> 
> 标签：html, tinymce

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T01:04:58.427

如果您尝试渲染字符串`<br/>`，请不要忘记您需要将其编码为`&lt;br/&gt;`

（还有人`<br/>`不只是写作`<br>`吗？哇。）

# android - Error in SQLiteDatabase Android

> ID：12132392
> 
> 赞同：0
> 
> 时间：2012-08-26T17:39:01.327
> 
> 标签：android, sqlite

Currently Im am implementing SQLiteDatabase into my android application. So i wanted to create a table called TABLE_LOGIN and store all the data of the login user but i met with a error saying 1 of the column doesnt exist. I check and i did put the column when the table is created Below is my code:

```
// Login Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_CNAME = "cname";
private static final String KEY_EMAIL = "email";
private static final String KEY_UID = "uid";
private static final String KEY_CREATED_AT = "created_at";

public void onCreate(SQLiteDatabase db) {
    String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
            + KEY_ID + " INTEGER PRIMARY KEY," 
            + KEY_NAME + " TEXT,"
            + KEY_CNAME + " TEXT,"
            + KEY_EMAIL + " TEXT UNIQUE,"
            + KEY_UID + " TEXT,"
            + KEY_CREATED_AT + " TEXT" + ")";
    db.execSQL(CREATE_LOGIN_TABLE);
} 
```

This is my logcat:

```
08-27 01:29:57.336: E/JSON(531): {"tag":"login","success":1,"error":0,"uid":"5033b1eeedde88.60881196","user":{"name":"a","cname":"a","email":"a@gmail.com","created_at":"2012-08-22 00:06:06","updated_at":null}}
08-27 01:29:57.486: E/Database(531): Error inserting uid=5033b1eeedde88.60881196 created_at=2012-08-22 00:06:06 email=a@gmail.com cname=a name=a
08-27 01:29:57.486: E/Database(531): android.database.sqlite.SQLiteException: table login has no column named cname: , while compiling: INSERT INTO login(uid, created_at, email, cname, name) VALUES(?, ?, ?, ?, ?);
08-27 01:29:57.486: E/Database(531):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
08-27 01:29:57.486: E/Database(531):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
08-27 01:29:57.486: E/Database(531):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
08-27 01:29:57.486: E/Database(531):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
08-27 01:29:57.486: E/Database(531):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
08-27 01:29:57.486: E/Database(531):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
08-27 01:29:57.486: E/Database(531):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
08-27 01:29:57.486: E/Database(531):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
08-27 01:29:57.486: E/Database(531):    at com.stts.sparetimetradingsystem.library.DatabaseHandlerEmployer.addUser(DatabaseHandlerEmployer.java:72)
08-27 01:29:57.486: E/Database(531):    at com.stts.sparetimetradingsystem.employer.LoginEmployerActivity$LoginEmployer$1.run(LoginEmployerActivity.java:129)
08-27 01:29:57.486: E/Database(531):    at android.os.Handler.handleCallback(Handler.java:587)
08-27 01:29:57.486: E/Database(531):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 01:29:57.486: E/Database(531):    at android.os.Looper.loop(Looper.java:123)
08-27 01:29:57.486: E/Database(531):    at android.app.ActivityThread.main(ActivityThread.java:4627)
08-27 01:29:57.486: E/Database(531):    at java.lang.reflect.Method.invokeNative(Native Method)
08-27 01:29:57.486: E/Database(531):    at java.lang.reflect.Method.invoke(Method.java:521)
08-27 01:29:57.486: E/Database(531):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-27 01:29:57.486: E/Database(531):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-27 01:29:57.486: E/Database(531):    at dalvik.system.NativeStart.main(Native Method)
08-27 01:29:58.736: E/AndroidRuntime(531): FATAL EXCEPTION: main
08-27 01:29:58.736: E/AndroidRuntime(531): java.lang.RuntimeException: Unable to destroy activity {com.stts.sparetimetradingsystem/com.stts.sparetimetradingsystem.employer.HomepageEmployerActivity}: java.lang.NullPointerException
08-27 01:29:58.736: E/AndroidRuntime(531):  at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3655)
08-27 01:29:58.736: E/AndroidRuntime(531):  at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3673)
08-27 01:29:58.736: E/AndroidRuntime(531):  at android.app.ActivityThread.access$2900(ActivityThread.java:125)
08-27 01:29:58.736: E/AndroidRuntime(531):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)
08-27 01:29:58.736: E/AndroidRuntime(531):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-27 01:29:58.736: E/AndroidRuntime(531):  at android.os.Looper.loop(Looper.java:123)
08-27 01:29:58.736: E/AndroidRuntime(531):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-27 01:29:58.736: E/AndroidRuntime(531):  at java.lang.reflect.Method.invokeNative(Native Method)
-27 01:29:58.736: E/AndroidRuntime(531):    at java.lang.reflect.Method.invoke(Method.java:521)
08-27 01:29:58.736: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-27 01:29:58.736: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-27 01:29:58.736: E/AndroidRuntime(531):  at dalvik.system.NativeStart.main(Native Method)
08-27 01:29:58.736: E/AndroidRuntime(531): Caused by: java.lang.NullPointerException
08-27 01:29:58.736: E/AndroidRuntime(531):  at com.stts.sparetimetradingsystem.employer.HomepageEmployerActivity.onDestroy(HomepageEmployerActivity.java:315)
08-27 01:29:58.736: E/AndroidRuntime(531):  at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3642)
08-27 01:29:58.736: E/AndroidRuntime(531):  ... 11 more 
```

***EDIT*** INSERT USER DATA CODE:

```
public void addUser(String name, String cname, String email, String uid, String created_at) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, name); // Name
        values.put(KEY_CNAME, cname); // CName
        values.put(KEY_EMAIL, email); // Email
        values.put(KEY_UID, uid); // UID
        values.put(KEY_CREATED_AT, created_at); // Created At

        // Inserting Row
        db.insert(TABLE_LOGIN, null, values);
        db.close(); // Closing database connection
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:25:23.533

我无法阅读整个日志猫，因为我无法在手机的浏览器中滚动它，但我认为问题出在列 ID 上。我认为设置为主键的列会自动设置为不为空，对吗？我看不到您在插入命令中为该列赋值。

如果这个建议是正确的，那么将列设置为 autoincrememt 会有所帮助。如果您想在列表视图中使用该表，请将名称更改为 _id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:53:30.117

转到**设置**->**管理应用程序**->**您的应用程序**->**清除所有应用程序数据**。

*在您在表中添加此列之前，它可能*正在使用存储在手机中的旧表。

***编辑***：我认为您使用的字符串连接有一个小问题。

```
String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
      + KEY_ID + " INTEGER PRIMARY KEY, " + KEY_NAME+" TEXT, "+KEY_CNAME+" TEXT, "+KEY_EMAIL+" TEXT UNIQUE, "+KEY_UID+" TEXT, "+KEY_CREATED_AT+" TEXT)"; 
```

# ios - iOS 启动一个带有起点的 FGallery

> ID：12132394
> 
> 赞同：1
> 
> 时间：2012-08-26T17:39:14.843
> 
> 标签：ios, gallery

我想知道我们是否可以在给定的起点启动 FGallery 组件。 [https://github.com/gdavis/FGallery-iPhone](https://github.com/gdavis/FGallery-iPhone)

我尝试使用缩略图网格使用的 loadFullsizeImageWithIndex: 方法但是......失败了。

有人这样做吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:18:56.493

如果您的意思是控制器开始的图像，请尝试

```
gallery.startingIndex = 1; // or whatever number 
```

# python - having issue with parsing xml in python

> ID：12132399
> 
> 赞同：0
> 
> 时间：2012-08-26T17:39:40.850
> 
> 标签：python, xml

i am really new to python. this is actually my first script with it and most of it is a copied example. i have an xml file that i need to parse out an attribute for. i got that part figured out but my issue is that that attribute does not always exist in the xml file. here is my code:

```
#!/usr/bin/python
#import library to do http requests:
import urllib2
import os

#import easy to use xml parser called minidom:
from xml.dom.minidom import parseString

#download the history:
history = urllib2.urlopen('http://192.168.1.1/example.xml')
#convert to string:
historydata = history.read()
history.close()

#parse the xml you downloaded
dom = parseString(historydata)
xmlTagHistory = dom.getElementsByTagName('loaded')[0].toxml()
xmlDataHistory=xmlTagHistory.replace('<loaded>','').replace('</loaded>','')

print xmlDataHistory 
```

when the attribute doesnt exist i get a return of "IndexError: list index out of range". what i am attempting to do with this code is to get it to run a command if the attribute doesnt exist, or it is false. the other issue i will probably have is that there will be times when that attribute appears more than once so i would also need it to account for that scenario by NOT running the command if there is even one instance of "loaded" being true. as i said, i am really new at this so i could use all the help i can get. much appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:42:40.957

Since `dom.getElementsByTagName('loaded')` returns a list, you can just check the list size with the `len(list)` function. Only if the list length is above 0, is it valid to do the [0] dereferencing.

An alternative is to wrap the code in try/exception pair and catch the parse exception.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:44:52.030

[http://docs.python.org/tutorial/errors.html](http://docs.python.org/tutorial/errors.html)

using the try and except you should be able to handle everything you need.

# javascript - 初学者 Javascript 尝试使用事件键

> ID：12132404
> 
> 赞同：0
> 
> 时间：2012-08-26T17:40:28.570
> 
> 标签：javascript, html, javascript-events

我是 javascript 的新手，并且正在尝试快速学习它。我需要有关键盘事件键的帮助。我正在尝试使用 WASD 在 javascript 中移动图像。我可以让它向上、向下、向左和向右移动，但我不知道如何让它沿对角线移动。非常感谢您的帮助。

```
"use strict";

var cvs;
var ctx;
var imagex=100;
var imagey=100;

function keydown_callback(ev){
    if(ev.keyCode === 68 )
        imagex += 5;
    if(ev.keyCode === 65 )
        imagex -= 5;
    if(ev.keyCode === 87 )
        imagey -= 5;
    if(ev.keyCode === 83 )
        imagey += 5;
    draw();
 }

function draw(){
    ctx.clearRect(0,0,600,600);
    var background = new Image();
    background.src="wallpaper.jpg";
    ctx.drawImage(background, 0, 0, 600, 600);
    var img = new Image();
    img.src="ninja.png";
    ctx.drawImage(img,imagex,imagey,128,256);
}

function main(){
    var tmp = document.getElementsByTagName("body");
    var body = tmp[0];
    body.addEventListener("keydown",keydown_callback);
    cvs = document.getElementById("foo");
    ctx = cvs.getContext("2d");
    draw();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:17:35.130

见[http://jsfiddle.net/7xkD7/1/](http://jsfiddle.net/7xkD7/1/)（先点击结果单元格）

```
"use strict";
var cvs,
    ctx,
    imagex=100,
    imagey=100,
    mov={'x+':0,'x-':0,'y+':0,'y-':0};
function get(thing,key){
    for(var i in window[thing]){
        if(window[thing][i].indexOf(key)!==-1){return i;}
    }
    return false;
}
function changeMov(key,val){
    switch(key){
        case 68:case 39:
            mov['x+']=val;break;
        case 65:case 37:
            mov['x-']=val;break;
        case 87:case 38:
            mov['y-']=val;break;
        case 83:case 40:
            mov['y+']=val;break;
        default:return false;
    }
}

function keydown_callback(ev){
    var key=ev.which||ev.keyCode;
    if(changeMov(key,1)===false){return;}
    draw();
    ev.preventDefault();
    return false;
}
function keyup_callback(ev){
    var key=ev.which||ev.keyCode;
     if(changeMov(key,0)===false){return;}
}
function draw(){
    imagex+=5*(mov['x+']-mov['x-']);
    imagey+=5*(mov['y+']-mov['y-']);
    ctx.clearRect(0,0,600,600);
    var background = new Image();
    background.src="http://images1.videolan.org/images/largeVLC.png";
    ctx.drawImage(background, 0, 0, 100, 100);
    var img = new Image();
    img.src="http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png";
    ctx.drawImage(img,imagex,imagey,128,256);
}

function main(){
    var body = document.body;
    body.addEventListener("keydown",keydown_callback);
    body.addEventListener("keyup",keyup_callback);
    cvs = document.getElementById("foo");
    ctx = cvs.getContext("2d");
    draw();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T19:17:47.913

要使其沿对角线移动，您只需选择一个要沿对角线移动的键码，当按下该键时，您可以同时更改 x 和 y 值。如果将 x 和 y 值更改相同的量，它将以 45 度角移动。

请参阅此代码演示，该代码使用数字键盘移动图像并使用 Home 键向上/向左移动，使用 PgUp 键向上/向右移动等：

[http://jsfiddle.net/jfriend00/TmbN5/](http://jsfiddle.net/jfriend00/TmbN5/)

```
var cvs;
var ctx;
var imagex=0;
var imagey=0;
var img;

function keydown_callback(ev){
    var keymap = {
        '38': [0,-5],   // up
        '40': [0,5],    // down
        '37': [-5,0],   // left
        '39': [5,0],    // right
        '36': [-5,-5],  // up/left diagonal
        '34': [5,5],    // down/right diagonal
        '33': [5,-5],    // up/right diagonal
        '35': [-5,5]     // down/left diagonal
    };
    var move = keymap[ev.keyCode];
    if (move) {
        imagex += move[0];
        imagey += move[1];
    }
    draw();
    ev.preventDefault();
 }

function draw(){
    ctx.clearRect(0,0,1000,1000);
    ctx.drawImage(img,imagex,imagey);
}

function main(){
    img = new Image();
    img.src="http://photos.smugmug.com/photos/344291068_HdnTo-Ti.jpg";
    document.body.addEventListener("keydown",keydown_callback);
    cvs = document.getElementById("foo");
    ctx = cvs.getContext("2d");
    draw();
    // grab initial keyboard focus (in jsFiddle)
    setTimeout(function() {
        document.getElementById("setFocus").focus();
    }, 1000);
}

main(); 
```

# matlab - 如何更改矩阵特定行中的值

> ID：12132407
> 
> 赞同：0
> 
> 时间：2012-08-26T17:40:53.327
> 
> 标签：matlab

我在特定“深度”中更改值矩阵时遇到问题

```
R = 6;
C = 12;
depth = 6

for j=1:depth;
    result(:,:,j)=randint(R,C,[0 2])
    for i=1:R,
        A(i,:,j)=randperm(C);
    end
end 
```

我目前使用的以下代码，但此代码仅在第 1 深度时仍有效。然后，我希望我的代码可以从第 3 个深度（h=3:depth）开始工作。

```
for h=3:depth;       
    idx = bitand(A(:,:,h)>= 1, A(:,:,h)<= 4); 
    result([false(size(idx,1),1) idx(:,1:end-1)]) = 3
    result(idx)=1
end 
```

有人有改进该代码的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:25:32.217

这个问题很模糊。如果您只想知道 3D 索引是如何工作的，您可以使用以下代码：

```
%# Construct A and result.
result = rand(R, C, depth);
A = 10 * rand(R, C, depth);

idx = (A >= 1) & (A <= 3);
result([false(size(A, 1), 1, size(A, 3)) idx(:,1:end-1,:)]) = 1; %# or 3?? 
```

# mysql - 具有标识属性的 MySQL 语句

> ID：12132408
> 
> 赞同：0
> 
> 时间：2012-08-26T17:40:59.023
> 
> 标签：mysql

我是一个 MySQL 初学者，我在网上跟着一个简单的教程，它有这么简单的创建表语句

```
create table users(
userID int primary key identity(1,1)
) 
```

我现在对身份的含义有所了解，但是，每当我在 MySQL 控制台中键入此语句时，它总是抱怨我有语法错误。

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:45:19.597

您可以尝试使用此语法

```
CREATE TABLE users(
userID  INT NOT NULL AUTO_INCREMENT, 
PRIMARY KEY(userID  )
); 
```

您的语法是否适合 sql server

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T17:46:05.000

`Identity(1,1)`不是mysql语法；`auto_increment`改为使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:54:17.510

标识用于自动增加新行的字段值。

> 身份（增量，种子）

. 话虽如此，我认为mysql根本不支持。我已经在 sql-server 中看到了。在mysql`auto_increment`中使用。

# android - Move view itself to animation's end position

> ID：12132412
> 
> 赞同：1
> 
> 时间：2012-08-26T17:42:32.653
> 
> 标签：android, android-layout, animation, view, position

I'm having a real serious problem. I want to implement UI where some view is moving on the screen and the user can touch it. I know that regular API-1 Animation framework move just the graphics of the view, and API-11 Animator framework move the view itself, but the problem is that it support only API-11+ which is very high.

I thought that instead of putting click listener on the view itself - I will identify which item was clicked by getting its position. So this is what I will do: * User touch the screen. * Stop all the animations. * Get all the animated views to the position where the animation was ended. (This is were I need your help). * Iterate over the views and find out if the click was in the area of one of them.

But I can't find a way to move the view to the animation's end position.

If someone knows a way, I will be very thankful!

Thanks in advance, Elad

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:44:52.197

> But I can't find a way to move the view to the animation's end position.

Modify its `LayoutParams` to move it to the end position. Use `getLayoutParams()` on the `View`, cast it to the appropriate type based on its container, modify the `LayoutParams` object, then call `setLayoutParams()` on the `View` to commit the changes.

# javascript - JavaScript: module pattern differences

> ID：12132415
> 
> 赞同：1
> 
> 时间：2012-08-26T17:43:01.033
> 
> 标签：javascript, design-patterns

What is the difference between

```
var module = (function(){
    return {} 
})() 
```

and

```
(function(context){
    var module = {}
    context.module = module;
})(this) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:48:22.380

的属性`this`不等同于变量。在全局范围内（即 where `this`references `window`），它们是相似的。然而，例如，当您尝试它们时，它们会有不同的行为[`delete`](http://perfectionkills.com/understanding-delete/)：

```
> this.module = {};
> delete this.module
true
> var module = {};
// cant be deleted 
```

除此之外，两个片段都创建了一个空对象，包裹在一个闭包中，您可以在其中定义局部（私有）变量/函数等。在第二个函数中，该对象也被分配给局部变量`module`，但这可以在第一个中完成一个也是。

* * *

@Eric：您使用[`new`operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Special/new)的方法与第一个关于变量的方法相似。但是，它将创建该匿名函数的实例，而不是返回普通对象。它将从自定义原型继承属性，例如`module.constructor`，然后将指向匿名函数（它不能被垃圾收集，但例如甚至可以重用于创建克隆）。我不建议使用这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:48:43.023

第一个是显示模块模式。它允许您定义私有函数（尽可能多地在 javascript 中）并选择通过返回调用公开哪些函数。

```
var module = (function(){ 
    function foo() {}; // Public, since it's returned

    function bar() {}; // Private, since it is not returned

    return {
        foo: foo
    } 
})(); 
```

据我所知，最下面的只是将一个对象字面量分配给另一个对象的命名空间。这可能是单例模式的开始。

```
(function(context){
    var module = {};
    context.module = module;
}(this) 
```

该模块实际上可以用显示模块模式定义，很难说，因为在您的示例中它只是一个对象文字。

# php - Removing an tag from string and placing it in variable where img src location in string can vary

> ID：12132420
> 
> 赞同：0
> 
> 时间：2012-08-26T17:43:55.867
> 
> 标签：php, preg-match, strip

I am using drupal and have a variable that contains loads of html. What I want to do is select the first image that appears in that html, capture the image src so that I can manipulate the image in other ways and then remove all images from the html. I should now have a variable containing the captured first image source, and a variable containing the html minus any images.

To place the first image into a variable I have tried -

```
 $texthtml =  $node->teaser;
preg_match('/<img.+src=[\'"](?P<src>.+?)[\'"].*>/i', $texthtml, $image);
echo $image['src']; 
```

This works fine so long as the image code follows the following logic - 'img src..' however thanks to my content management system, some img tags dont place 'src' straight after 'img' such as - 'img class..'. In this instance the above code only takes the first image that follows the specific order of 'img src..' How do I do this where the img code can be in any order?

To then remove the image from the original string I am successfully using -

```
 $stripped = $node->teaser;
$stripped = preg_replace("/<img[^>]+\>/i", "(image) ", $stripped); 
echo $stripped; 
```

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:55:19.430

使用以下，

```
preg_match_all('/\<img(.*?)\/\>/', $texthtml, $matches); 
```

# ruby - 为什么 Thread.start 不启动？

> ID：12132422
> 
> 赞同：0
> 
> 时间：2012-08-26T17:44:10.277
> 
> 标签：ruby, multithreading

我似乎无法让这个工作；为什么不会`Thread.start`启动？

```
# encoding: utf-8
require 'socket'
print "choose host: "
host = gets.chomp
print "choose starting port: "
sport = gets.to_i
print "choose ending port: "
eport = gets.to_i
def scanner (sport, eport, host)
    while sport <= eport
        begin
            s = TCPSocket.new(host, sport)
            if s
                puts "Port #{sport} is open!"
            end
        rescue 
            puts "Port #{sport} is closed!"
        end 
        sport += 1

    end
end
Thread.start([scanner]sport, eport, host) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:12:10.677

您需要从主线程加入工作线程。正在发生的是主线程退出，这导致整个进程退出，在工作线程完成之前关闭它。

您需要在启动后加入工作线程来等待它。`Thread.join`在您的语言线程 api 中寻找类似或类似的功能。

# ruby-on-rails - How to add functionality to Mongoid::Document from a gem?

> ID：12132425
> 
> 赞同：1
> 
> 时间：2012-08-26T17:44:18.937
> 
> 标签：ruby-on-rails, ruby, gem, mongoid, mongoid3

I want to create a gem which adds some functionality to my models. How to define a custom keyword for a Mongoid model? E.g.:

```
class Book
  include Mongoid::Document

  has_my_awesome_functionality
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:44:18.937

If you have a gem called `foobar` you can put the following into your gem's initialiser, or in a separate file (usually called `railtie.rb`[, just make sure it's being loaded]):

```
require 'foobar'
require 'rails'

class FooBar
  class Railtie < Rails::Railtie

  config.before_initialize do
    ::Mongoid::Document.module_eval do
      def self.included(base)
        base.extend FooBar::MongoidExtension
      end
    end
  end if defined?(Mongoid)
end 
```

and your extension can look like this:

```
module Foobar::MongoidExtension
  def has_my_awesome_functionality
    # logic here
  end
end 
```

# java - java.io.FileNotFoundException，为什么？

> ID：12132436
> 
> 赞同：2
> 
> 时间：2012-08-26T17:45:14.603
> 
> 标签：java, file

我已经下载了 SSJ 库，这是一个用于随机模拟的 Java 库。其中一个文件需要打开 *.dat 文件。

我正在尝试运行下载的文件，并且 dat 文件也在那里，但我每次都得到 FileNotFoundException。

这是源代码：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.StringTokenizer;
import umontreal.iro.lecuyer.randvar.ExponentialGen;
import umontreal.iro.lecuyer.rng.MRG32k3a;
import umontreal.iro.lecuyer.rng.RandomStream;
import umontreal.iro.lecuyer.simevents.Event;
import umontreal.iro.lecuyer.simevents.Sim;
import umontreal.iro.lecuyer.simprocs.Resource;
import umontreal.iro.lecuyer.simprocs.SimProcess;
import umontreal.iro.lecuyer.stat.Tally;

public final class Jobshop {
   int nbMachTypes;       // Number of machine types M.
   int nbTaskTypes;       // Number of task types N.
   double warmupTime;     // Warmup time T_0.
   double horizonTime;    // Horizon length T.
   boolean warmupDone;    // Becomes true when warmup time is over.
   Resource[] machType;   // The machines groups as resources.
   Jobshop.TaskType[] taskType;   // The task types.
   RandomStream streamArr = new MRG32k3a(); // Stream for arrivals.
   BufferedReader input;

   public Jobshop() throws IOException { readData(); }

   // Reads data file, and creates machine types and task types.
   void readData() throws IOException {
 // input = new BufferedReader (new FileReader ("Jobshop.dat"));
  input = new BufferedReader (new FileReader ("JobShop.dat"));
  StringTokenizer line = new StringTokenizer (input.readLine());
  warmupTime = Double.parseDouble (line.nextToken());
  line = new StringTokenizer (input.readLine());
  horizonTime = Double.parseDouble (line.nextToken());
  line = new StringTokenizer (input.readLine());
  nbMachTypes = Integer.parseInt (line.nextToken());
  nbTaskTypes = Integer.parseInt (line.nextToken());
  machType = new Resource[nbMachTypes];
  for (int m=0; m < nbMachTypes; m++) {
     line = new StringTokenizer (input.readLine());
     String name = line.nextToken();
     int nb = Integer.parseInt (line.nextToken());
     machType[m] = new Resource (nb, name);
  }
  taskType = new Jobshop.TaskType[nbTaskTypes];
  for (int n=0; n < nbTaskTypes; n++)
     taskType[n] = new Jobshop.TaskType();
  input.close();
}

class TaskType {
  public String     name;        // Task name.
  public double     arrivalRate; // Arrival rate.
  public int        nbOper;      // Number of operations.
  public Resource[] machOper;    // Machines where operations occur.
  public double[]   lengthOper;  // Durations of operations.
  public Tally      statSojourn; // Stats on sojourn times.

  // Reads data for new task type and creates data structures.
  TaskType() throws IOException {
     StringTokenizer line = new StringTokenizer (input.readLine());
     statSojourn = new Tally (name = line.nextToken()); 
     arrivalRate = Double.parseDouble (line.nextToken());
     nbOper = Integer.parseInt (line.nextToken());
     machOper = new Resource[nbOper];
     lengthOper = new double[nbOper];
     for (int i = 0; i < nbOper; i++) {
        int p = Integer.parseInt (line.nextToken());
        machOper[i] = machType[p-1];
        lengthOper[i] = Double.parseDouble (line.nextToken());
     }
  }

  // Performs the operations of this task (to be called by a process).
  public void performTask (SimProcess p) {
     double arrivalTime = Sim.time();
     for (int i=0; i < nbOper; i++) {
        machOper[i].request (1); p.delay (lengthOper[i]);
        machOper[i].release (1);
     }
     if (warmupDone) statSojourn.add (Sim.time() - arrivalTime);
  }
}

public class Task extends SimProcess {
  Jobshop.TaskType type;

  Task (Jobshop.TaskType type) { this.type = type; }

  public void actions() { 
  // First schedules next task of this type, then executes task.
     new Jobshop.Task (type).schedule (ExponentialGen.nextDouble
           (streamArr, type.arrivalRate));
     type.performTask (this);
  }
}

Event endWarmup = new Event() {
  public void actions() {
     for (int m=0; m < nbMachTypes; m++)
        machType[m].setStatCollecting (true);
     warmupDone = true;
  }
};

Event endOfSim = new Event() {
    @Override
  public void actions() { Sim.stop(); }
};

public void simulateOneRun() {
  SimProcess.init();
  endOfSim.schedule (horizonTime);
  endWarmup.schedule (warmupTime);
  warmupDone = false;
  for (int n = 0; n < nbTaskTypes; n++) {
     new Jobshop.Task (taskType[n]).schedule (ExponentialGen.nextDouble 
        (streamArr, taskType[n].arrivalRate));
  }
  Sim.start();
}

public void printReportOneRun() {
  for (int m=0; m < nbMachTypes; m++) 
     System.out.println (machType[m].report());
  for (int n=0; n < nbTaskTypes; n++) 
     System.out.println (taskType[n].statSojourn.report());
}

static public void main (String[] args) throws IOException { 
  Jobshop shop = new Jobshop();
  shop.simulateOneRun();
  shop.printReportOneRun();
}
} 
```

这是输出：

```
 Exception in thread "main" java.io.FileNotFoundException: JobShop.dat (O sistema não conseguiu localizar o ficheiro especificado)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:138)
at java.io.FileInputStream.<init>(FileInputStream.java:97)
at java.io.FileReader.<init>(FileReader.java:58)
at Jobshop.readData(Jobshop.java:31)
at Jobshop.<init>(Jobshop.java:26)
at Jobshop.main(Jobshop.java:133)
Java Result: 1 
```

关于如何修复它的任何线索？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:48:38.277

引用文件的方式是，它希望在您运行应用程序的位置找到该文件。好像在那里找不到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T17:49:10.647

确保指定 .dat 文件相对于当前工作目录（运行 java 命令的目录）的路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:36:42.140

当我使用 NetBeans IDE 运行项目时，该文件应添加到 NetBeansProjects 目录内的主项目目录中。

当我在源包中创建它时，我必须在打开文件时添加它的路径：

```
input = new BufferedReader (new FileReader ("src/JobShop.dat")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T17:49:46.420

您的路径可能是错误的：

```
input = new BufferedReader (new FileReader ("JobShop.dat")); 
```

# asp.net-mvc-3 - 3层架构中表示层的MVC设计模式

> ID：12132444
> 
> 赞同：1
> 
> 时间：2012-08-26T17:46:13.770
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, 3-tier, presentation-layer

我目前有一个基于 3 层架构的 Web 应用程序。我希望将我的表示层从使用 Web 窗体更改为 MVC4。

现在我做了一些研究，从我读到的内容中，我了解到 View 代表 Web 窗体的 .aspx。控制器代表 Web 表单的代码隐藏 (.cs)。

我遇到的问题是我看不到模型有任何用处。这是因为我可以直接从控制器直接调用业务逻辑层的方法，从而使模型的目的无用。

我有什么误解吗？如果是这样，您对在 3 层架构中为表示层实现 MVC 设计模式有何看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:51:22.940

在一个简单的应用程序中，MVC 中的模型可以简单地是来自应用程序或业务层的 DTO。在这种情况下，您是对的，您可能不需要 UI 中的单独模型。

# javascript - NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数 arg 0 [nsIDOMWindow.getComputedStyle]（后续）

> ID：12132446
> 
> 赞同：1
> 
> 时间：2012-08-26T17:46:16.060
> 
> 标签：javascript, jquery, data-binding, knockout.js, observable

好的，所以我终于弄清楚了我的代码的哪一部分导致了异常。你可以在这里阅读最初的帖子[。](https://stackoverflow.com/questions/12099156/ns-error-xpc-bad-convert-js-could-not-convert-javascript-argument-arg-0-nsidom)初始帖子中的代码缺少实际导致异常的部分（手动订阅`viewPortData`observable）。显然，我以某种方式做错了......这是代码：

```
self.viewPortData = ko.observable();
self.viewPortData.subscribe(function (newValue) {
    var viewPort = $('#metro-view-port');
    if (viewPort && newValue) {
        self.fadeInOut(viewPort, newValue);
    }
});

self.fadeInOut = function (domObject, newContent) {
    if (newContent) {
        var currentContent = domObject.html();
        if (currentContent) {
            var wrappedContent = $(currentContent);
            wrappedContent.fadeOut(400, function () {
                wrappedContent.empty();
                domObject.html(newContent).hide().fadeIn(400);
            });
        } else {
            domObject.html(newContent).hide().fadeIn(400);
        }
    }
}; 
```

那么我哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T16:24:41.300

我也发生了同样的错误。问题是因为 HTML 有评论引起的。就像是：

```
<!-- Some Comment goes here -->
<div>
    ...
</div> 
```

为了解决这个问题，在不更改 HTML 的情况下，您需要用其他东西包装 HTML，因此您只需将一个元素传递给 jQuery：

```
var div = document.createElement( 'div' );
div.innerHTML = nativeHtml;

var $html = $( div ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T23:36:49.263

我使用您在这篇文章和上一篇文章中的代码创建了一个[小提琴](http://jsfiddle.net/jimmym715/J2pp6/)，它可以正常工作。

但是，我只返回一个简单的`<div>`标签来填充`metro-view-port` `<div>`.

我最好的猜测是您返回的 HTML 是问题所在。

我对您的建议是首先通过将返回的 HTML 简化为非常简单的内容来确认这一点，然后*逐渐*重新引入预期的代码，直到您发现问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T23:33:44.110

将您的 fadeIn(400) 翻转为 show()。

jQuery 做数学运算更简单......我认为它无法获得元素的计算样式，因为它内部有一些浮点数或其他东西。

我遇到了同样的问题.....但是经过一些研究后，我到了这里（DAMMET 我丢失了选项卡-无论如何这是一个 jQuery 错误报告）并意识到需要解决什么问题才能修复它。

在我的代码中，我将 fadeIn() 换成了 show() 所以它与动画无关

您可能会认为如果没有动画，问题也不会普遍存在 - 但确实如此。

尝试 slideDown(0 如果您仍然在动画之后，它可能无法正常工作，但值得一试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T10:50:20.990

这个错误存在于旧版本的 jQuery 中。尝试将 .hide() 更改为 .css('display', 'none')

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-23T21:39:45.607

根据[这个 jQuery bug](http://bugs.jquery.com/ticket/12462)，问题可能与 HTML 中的换行符和空白文本节点有关。就我而言，我正在使用这样的模板：

```
<script id="myTemplate" type="text/template">
  <div>
    <h2>Important stuff</h2>
  </div>
</script> 
```

并像这样解析它：

```
var currentContent = $.parseHTML($('#myTemplate').html()); 
```

所以我最终得到了一堆文本节点，它们代表原始 HTML 模板中的换行符和空白字符。可能类似的事情发生在你身上。

为了解决这个问题，我像这样去掉了换行符和空格：

```
$('#myTemplate').html().replace(/\n/g, '').replace(/>\s+</g, '><').trim(); 
```

希望对某人有所帮助！

# php - 警告：出于安全原因，已在 syslog_watchdog() 中禁用了 openlog()

> ID：12132447
> 
> 赞同：0
> 
> 时间：2012-08-26T17:46:24.187
> 
> 标签：php, mysql, drupal, drupal-7

我已将 Drupal 站点移至新服务器。之后我有

> 警告：出于安全原因，openlog() 已在 syslog_watchdog() 中禁用（/home/fissionsof/domains/fissionsoft.co.th/public_html/modules/syslog/syslog.module 的第 102 行）。

如何解决这个警告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:50:21.417

您可以通过在函数调用前加上“@”字符来防止显示大多数警告，[请参见文档](http://www.php.net/manual/en/language.operators.errorcontrol.php)（即`@foo()`，而不仅仅是`foo()`. 所以基本上您需要编辑提到的文件并将“@”添加到它列出的行中）。或者您可以尝试通过`error_reporting(0);`在代码中做第一件事或在您的 php.ini 或通过 .htaccess 中设置它来“安静”PHP 错误报告。或者，`openlog()`如果您可以在该级别控制服务器配置，请启用。

# php - 使用 Xdebug 跟踪回显输出（在 NetBeans 中）

> ID：12132448
> 
> 赞同：1
> 
> 时间：2012-08-26T17:46:35.673
> 
> 标签：php, netbeans, buffer, echo, xdebug

在使用简单的共享软件文本编辑器编写 PHP 十几年之后，我终于像 1999 年一样进入了 IDE 的世界。

我正在使用 XDebug 在 NetBeans 中进行调试。我了解了如何设置断点或逐步遍历代码中的每一行，并查看为变量分配了哪些值。很酷！

但是，我看不到任何被回显或发送到缓冲区的东西会发生什么。

有没有办法看到这一点，或者 NetBeans 是否假设我将所有字符串分配给要在最后输出的变量（无论如何我通常都是这样做的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:53:46.247

您可以使用**[`ob_start()`](http://php.net/manual/en/function.ob-start.php)**缓冲输出，然后使用 将其复制到变量中**[`ob_get_contents()`](http://www.php.net/manual/en/function.ob-get-contents.php)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T07:02:38.260

您还可以使用 IDE 并添加 ob_get_contents() 表达式

# delphi - 禁用异常处理并让windows捕获它？

> ID：12132452
> 
> 赞同：6
> 
> 时间：2012-08-26T17:47:38.477
> 
> 标签：delphi, exception

我想禁用 Delphi 捕获的异常并让 Windows 捕获它 - 使其产生一个像“AppName crashed.Debug, Send”这样的窗口，将其添加到应用程序事件中，创建内存转储等等。

默认情况下，Delphi 会捕获 TApplication.Run 过程中的所有异常...如何在不修改 Forms.pas 的情况下避免这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T18:08:54.957

您可以添加一个`OnException`重新引发异常的处理程序：

```
class procedure TMainForm.OnException(Sender: TObject; E: Exception);
begin
  raise Exception(AcquireExceptionObject);
end;

initialization
  Application.OnException := TMainForm.OnException; 
```

不过，我不确定您为什么要这样做。使用 madExcept 或 EurekaLog 之类的工具来显示错误对话框更为正常，该对话框产生的信息比系统对话框有用得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T22:53:47.587

您可以设置[`JITEnable`](http://docwiki.embarcadero.com/Libraries/en/System.JITEnable)为“1”或更高（默认为“0”）。使用“1”，非本地异常，高于“1”，所有异常都将由 JIT 或 WER 处理（取决于系统）。

不过，这可能不是您想要的。使用此解决方案，任何合格的异常都将传递给操作系统，无论它们是否在代码中处理都没有关系。澄清（在调试器之外运行）：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  raise EAccessViolation.Create('access denied');
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  try
    PInteger(0)^ := 0;
  except
  end;
end;

initialization
  JITEnable := 1; 
```

第一个例子是原生异常，为1时会被应用程序异常处理机制处理`JITEnable`。但第二个例子会触发JIT/WER。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T18:23:24.450

添加您自己的处理程序。`Application.OnException`可能是你想要的。也比把它留给 Windows 更好，因为您会根据环境获得不同的行为。例如，如果打开 Windows 错误报告，它会询问用户是否要向 MS 发送错误报告。

像 Heffernan 先生一样，我建议你看看 EurekaLog 之类的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T07:54:36.403

作为。我同意上面的声音，这个愿望很奇怪。我也同意实际上挂钩 TApplication.OnException 可能就足够了（“如果它看起来像鸭子......”）

但是，如果您真的想让 RTL 忽略异常，也有一些方法。

异常处理程序是低级 RTL 的插件，就像堆管理等一样。

您可以查看 KOL（关键对象库）。在 Delphi 5 次中，我设法制作了 2KB 大小的 DLL。

这需要缺少许多被视为“理所当然”的功能。其中有例外。

要在 KOL 的系统 RTL 替换中启用异常，您必须制作一些 $DEFINE，然后解锁向 IDE 添加异常支持的代码。

我相信您仍然可以获得该模块化 RTL 版本并为该 $IfDef grep 并查看哪个代码被哪个代码替换。我相信您很有可能可以撤消该操作并让 Windows 避免通过异常调用 Delphi RTL。我不记得细节，但我相信 Delphi RTL 异常处理程序只是在 Windows 核心中注册为回调。而且您可能可以取消注册它（注册 nil 回调）。我相信你可以在股票 RTL 中找到它，但 KOL 的模块化 RTL 只会让搜索变得更容易。

# c++ - 错误 LNK1169：找到一个或多个多重定义的符号

> ID：12132453
> 
> 赞同：1
> 
> 时间：2012-08-26T17:47:48.620
> 
> 标签：c++

我有 3 个文件：

```
SilverLines.h
SilverLines.cpp
main.cpp 
```

在 SilverLines.cpp 我有：

```
#include "SilverLines.h." 
```

当我不这样做时：

```
#include "SilverLines.h" 
```

在 main.cpp，一切都很好。项目编译。

但是当我这样做时：

```
#include "SilverLines.h" 
```

在 main.cpp （我需要做的）中，我收到以下 2 个错误：

![致命错误](../Images/476b6db42d9745ed79db937364e3af0d.png)

有什么问题？

**> 编辑：**

根据您的要求，这是整个 *.h 代码：

```
#ifndef SILVER_H
#define SILVER_H

#include <iostream>
#include <algorithm>
#include <iterator>
#include <vector>
#include <string>
#include <map>

using namespace std;

typedef unsigned short int u_s_int;

map<string /*phone*/,string /*company*/> companies; // a map of a phone number and its     company
string findCompany(const string& phoneNum); //Given a phone number, the function     returns the right company 
```

//抽象客户端类：

```
class AbsClient //Abstract Client Class
{
protected:
//string phone_number;
int counter; //CALL DURATION TO BE CHARGED
double charge;
public:
string phone_number; //MOVE TO PROTECTED LATER
void setCharge(double ch) {charge=ch;}
void setCoutner(int count) {counter=count;}
AbsClient(string ph_num): phone_number(ph_num),counter(0), charge(0.0) {} //c'tor     that must be given a phone#.
                                                                            //Initializes the counter and the charge to 0.
virtual void registerCall(string /*phone#*/, int /*minutes*/) = 0; //make a call     and charge the customer
void printReport(string /*phone#*/) const; //prints a minutes report
}; 
```

//临时客户端类：

```
class TempClient : public AbsClient //TempClient class (NO DISCOUNT!) 2.3 NIS PER MINUTE, inherits from ABS
{
private:
string company;
public:
//string company;
TempClient(string ph_num, string cmp_name): AbsClient(ph_num), company(cmp_name) {}
virtual void registerCall(string /*phone#*/, int /*minutes*/); //make a call and     charge the customer
//virtual void printReport(string phone) const {cout << "the number of minutes: " << this->counter << endl;}
}; 
```

//注册客户端类：

```
class RegisteredClient : public AbsClient //RegisteredClient, 10% DISCOUNT! , inherits from ABS
{
protected:
string name;
string id;
long account; //ACCOUNT NUMBER
private:
static const int discount = 10; //STATIC DISCOUNT OF 10% FOR ALL Registered Clients
public:
RegisteredClient(string ph_num, string n, string i, long acc_num):     AbsClient(ph_num), name(n) , id(i) , account(acc_num) {}
virtual void registerCall(string /*phone#*/, int /*minutes*/); //make a call and     charge the customer
//virtual void printReport(string /*phone#*/) const {cout << "the number of     minutes: " << this->counter << endl;}
}; 
```

//VIP客户类

```
class VIPClient : public RegisteredClient //VIP Client! X% DISCOUNT! also, inherits from RegisteredClient
{
private: //protected?
int discount; //A SPECIAL INDIVIDUAL DISCOUTN FOR VIP Clients
public:
VIPClient(string ph_num, string n, string i, long acc_num, int X):     RegisteredClient(ph_num,n,i,acc_num), discount(X) {}
virtual void registerCall(string /*phone#*/, int /*minutes*/); //make a call and     charge the customer
//virtual void printReport(string /*phone#*/) const {cout << "the number of     minutes: " << this->counter << endl;}
}; 
```

//SilverLines（公司）类

```
class SilverLines // The Company Class
{
protected:
vector<AbsClient*> clients;
vector<string> address_book; //DELETE
public:
//static vector<AbsClient*> clients;
//SilverLines();
void addNewClient(string /*phone#*/);
void addNewClient(string /*phone#*/, string /*name*/ , string /*id*/ , u_s_int     /*importance lvl*/ , long /*account#*/);
void registerCall(string /*phone#*/ , int /*call duration*/);
void resetCustomer(string /*phone#*/); //given a phone#, clear the appropriate     customer's data ('charge' and 'counter')
void printReport(string /*phone#*/) const;

~SilverLines(){
    vector<AbsClient*>::iterator it;
    for(it = clients.begin(); it != clients.end(); ++it)
        delete(*it);
}
};

#endif 
```

**paercebal 的回答：**

您的代码有多个问题（

> 使用命名空间标准；

一），但编译失败的是在头文件中声明全局变量：

```
map<string /*phone*/,string /*company*/> companies; 
```

我很确定您的大多数来源（至少 main.cpp 和 SilverLines.cpp）都包含此标头。

您应该在一个源文件中定义您的全局对象：

// SilverLines.h

```
extern map<string /*phone*/,string /*company*/> companies; 
```

然后在标题中声明它（作为外部）：

// 全局.cpp

```
extern map<string /*phone*/,string /*company*/> companies; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T17:51:26.260

很有可能您的“SilverLines.h”实际上确实定义了一些东西，而不仅仅是声明它。不过，我不会尝试破译错误消息:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:51:31.163

您的代码中可能还有另一个错误。还要确保您没有在 .h 文件中编写主代码或任何其他代码。.h 文件应该只包含函数的原型，后跟分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T17:57:01.333

由于包含 SilverLines.h 两次，似乎有一些多重定义。PL。在您的 SilverLines.h 头文件中使用如下标头保护，然后包含它。

这可能会有所帮助。

```
 #ifndef SILVER_H
 #define SILVER_H

 //Write the contents of SilverLines.h here.

 #endif  // SILVER_H 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T19:05:56.870

谢谢各位，我解决了：

`findCompany()`现在是一个全局函数，并且`map<string,string> companies`是其中的一个`static`字段。它编译得很好。

# c++ - 我在 Mingw 中为 fcntl.h 和 unistd.h 链接了哪个库

> ID：12132456
> 
> 赞同：1
> 
> 时间：2012-08-26T17:48:42.323
> 
> 标签：c++, mingw, static-libraries

当 #include`unistd.h`和`fcntl.h`文件时，我还必须链接哪些 mingw 库才能正确编译？还有什么简单的方法可以确定这一点，或者列出哪些头文件需要哪些库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:02:43.243

这两个文件都在 c std 库中。根据这个：[mingW中的标准C库](https://stackoverflow.com/questions/6394512/standard-c-library-in-mingw)你需要链接到msvcrt.a

以下是 c std 库中的文件列表：[http ://en.wikipedia.org/wiki/C_POSIX_library](http://en.wikipedia.org/wiki/C_POSIX_library)

# linq - 从 linq 函数返回列表

> ID：12132460
> 
> 赞同：0
> 
> 时间：2012-08-26T17:49:05.213
> 
> 标签：linq, entity-framework

我想从 ApplicaitonType 类返回类型名列表，但收到错误 Error 1 Instance argument: cannot convert from 'System.Linq.IQueryable' to 'System.Collections.Generic.IEnumerable' C:\Users\sharaman\documents\visual工作室 2010\Projects\IssueTracking\BAL_IssueTracking\AppQuery.cs 19 17 BAL_IssueTracking

请提供您对此的反馈...非常感谢

公共静态列表 AppType()

{

```
 List<ApplicationType> m = new List<ApplicationType>();

        var context = new Dll_IssueTracking.IssuTrackingEntities();// Object context defined in Dll_IssuTracking DLL

        var query = from c in context.ApplicationTypes//Query to find TypeNames

                    select new { c.TypeName };

        //return query.ToList<ApplicationType>();

        m = query.ToList<ApplicationType>();//Error here

        return m;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:54:44.870

您的查询选择了一个匿名类型的序列：

```
select new { c.TypeName }; 
```

目前尚不清楚您希望如何将该匿名类型转换为`ApplicationType`.

鉴于您的数据源名称，我*希望*该方法非常简单：

```
public static List<ApplicationType> AppType()    
{
    using (var context = new Dll_IssueTracking.IssuTrackingEntities())
    {
        return context.ApplicationTypes.ToList();
    }
} 
```

特别是，创建一个实例`List<ApplicationType>`然后忽略它是没有意义的，就像您目前所做的那样：

```
 List<ApplicationType> m = new List<ApplicationType>();
    ...
    m = query.ToList<ApplicationType>();
    return m; 
```

您为什么要在这里为变量烦恼，为什么要为它分配一个您从不使用的值？

编辑：根据您的评论：

> 实际上我需要从 ApplicaitonType 类返回 TypeNames 并通过这个函数绑定到 Dropdownlist

这表明您的方法声明不当。您可以返回 a并指定为数据绑定中的显示部分，*或者**您*可以更改方法以返回 a （假设这是 的类型）：`List<ApplicationType>``TypeName`*`List<string>``TypeName`*

 *```
public static List<string> GetApplicationTypeNames()
{
    using (var context = new Dll_IssueTracking.IssuTrackingEntities())
    {
        return context.ApplicationTypes.Select(type => type.typeName)
                                       .ToList();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:55:03.250

尝试使用此代码

```
 public static List<ApplicationType> AppType()
    {

        var context = new Dll_IssueTracking.IssuTrackingEntities();// Object context defined in Dll_IssuTracking DLL

        var query = from c in context.ApplicationTypes//Query to find TypeNames
                    select new ApplicationType{TypeName = c.TypeName };
            return query.ToList();
    } 
```*

# .htaccess - .Htaccess Mod 将 file.php 重写为 file.xml？

> ID：12132462
> 
> 赞同：0
> 
> 时间：2012-08-26T17:49:40.550
> 
> 标签：.htaccess, mod-rewrite

我遇到了一项需要通过ajax加载一些flash xml vars的工作，但我必须用php生成xml文件，由于某种原因，当我尝试jquery加载它时它会中断，但是当我改变了从 php 扩展到 xml 并且它有效。

现在我想用 mod rewrite 来重写

```
settings.php?id=1 
```

到

```
/1/settings.xml 
```

我一直在尝试自己使用教程来做，但我就是做错了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T17:57:24.593

> 我想使用 mod rewrite 来`settings.php?id=1`重写`/1/settings.xml`

这意味着：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^id=([0-9]+)$
RewriteRule ^([a-z_]+)\.php$ /%1/$1.xml [L] 
```

因此，当有人请求时`http://domain.com/settings.php?id=1`，他们会在 获得内容`/1/settings.xml`，但如果是相反的：

```
RewriteEngine On
RewriteRule ^([0-9]+)/([a-z]+)\.xml /settings.php?id=1 [L,QSA] 
```

因此，请求`http://domain.com/1/settings.xml`将在以下位置获得内容`/settings.php?id=1`

因为永远不清楚“重写`<uri>`为`<another uri>`”是什么意思。

# php - 配置 SublimeLinter 插件以使用 PHP

> ID：12132469
> 
> 赞同：13
> 
> 时间：2012-08-26T17:50:11.033
> 
> 标签：php, sublimetext2

我在 Ubuntu 12.04 中为 Sumblime-text-2安装了[SublimeLinter 插件。](https://github.com/SublimeLinter/SublimeLinter)

PHP linting 不起作用。在互联网上进行了详尽的搜索后，我发现我必须在 sublimeLinter 设置中给出 PHP 的路径，如下所示：

```
"sublimelinter_executable_map":
 {
     "php":"/usr/share/php"
 }, 
```

这是我在**phpInfo()中找到的****include_path**行中的路径。但它不起作用。我尝试转义特殊字符，以及 /usr/share/php5、/usr/lib/php5 等其他路径，但似乎没有任何效果。

 **任何人都可以帮助进行正确的配置，以便我可以使用 linter 功能吗？

注意：这里有一个以前未回答的[问题](https://stackoverflow.com/questions/11817164/sublimelinter-php-linting-not-working)。我想也许我应该再问一次，更详细一点。

**更新**：[原始问题](https://stackoverflow.com/questions/11817164/sublimelinter-php-linting-not-working)已得到回答并**解决了这个问题**。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-15T15:11:34.497

1-安装node.js。顺便说一句，这本身就非常棒。
2- 打开 Sublime Text，然后关闭所有打开的文件。
3- 前往 Preferences->Package Settings->SublimeLinter->Settings – User （如果您之前没有弄乱它，它将为空），并插入以下内容：

```
{

  "sublimelinter_executable_map":
    {
        "javascript":"C:/Program Files/nodejs/node.exe",
        "css":"C:/Program Files/nodejs/node.exe",
        "php":"C:/wamp/bin/php/php5.4.3/php.exe"
    }

} 
```

这也是您放置路径的地方，例如用于 linting 的 php。确保获得正确的节点路径——这是 Windows 7 安装的默认位置。保存文件，关闭文件，然后重新启动 Sublime Text。

来源： http: [//fuzzytolerance.info/blog/2012/05/14/2012-05-15-getting-sublimelinter-running-on-windows/](http://fuzzytolerance.info/blog/2012/05/14/2012-05-15-getting-sublimelinter-running-on-windows/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T01:44:56.213

对于终端中的 ubuntu 系统类型：

```
which php 
```

并在你的 php 路径中使用结果（Preferences->Package Settings->SublimeLinter->Settings -User）。

就我而言，它是：

```
{
    "sublimelinter_executable_map": {
       "php": "/usr/bin/php"
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:30:30.680

Windows 7 上的 php.exe 文件路径对我没有用，而 php-win.exe 可以：

```
{
    "sublimelinter_executable_map":
    {
        "php":"C:/php/php-win.exe"
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T12:27:17.183

Windows 7 上的 php-win.exe 文件路径对我没有用！！！

```
"sublimelinter_executable_map":
{
    "javascript":"C:/Program Files/nodejs/node.exe",
    "php":"C:/xampp/php/php-win.exe",
    "css":"C:/Program Files/nodejs/node.exe"
} 
```**

# xml - XSLT 将 Zotero xml 输出转换为 FMPXMLRESULT xml？

> ID：12132470
> 
> 赞同：1
> 
> 时间：2012-08-26T17:50:14.997
> 
> 标签：xml, xslt, filemaker

我需要将 Zotero 数据库中的项目导入 FileMaker Pro。最明显的方法是从 Zotero 导出为 xml，将该 xml 转换为 FMPXMLRESULT xml 格式，然后导入 FileMaker Pro。

我是处理翻译 xml 格式的新手。

有没有人有 xslt 可以做到这一点，或者为我提供一些针对这两种 xml 格式的建议（不仅仅是一般的 xslt/xml 参考）？

Zotero xml 输出采用国会图书馆 MODS 格式：[http](http://www.loc.gov/standards/mods/) ://www.loc.gov/standards/mods/ 。

FileMaker Pro FMPXMLRESULT xml 格式在此处描述：[http](http://www.filemaker.com/help/html/import_export.16.30.html) ://www.filemaker.com/help/html/import_export.16.30.html 。

下面是 Zotero MODS 导出的示例。（抱歉，在这篇文章中复制文件以形成代码块时，一些缩进丢失了。这是实际文件的 Dropbox 链接：[https](https://www.dropbox.com/s/otrwr7xk0uwmff7/From_Zotero_MODS.xml) ://www.dropbox.com/s/otrwr7xk0uwmff7/From_Zotero_MODS.xml ）

```
<?xml version="1.0"?>
<modsCollection xsi:schemaLocation="http://www.loc.gov/mods/v3     
http://www.loc.gov/standards/mods/v3/mods-3-2.xsd" xmlns="http://www.loc.gov/mods/v3"     
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <mods>
<titleInfo>
  <title>Roberto Giobbi's Card college. Volume 1</title>
</titleInfo>
<typeOfResource>text</typeOfResource>
<genre authority="local">book</genre>
<genre authority="marcgt">book</genre>
<name type="personal">
  <namePart type="family">Giobbi</namePart>
  <namePart type="given">Roberto</namePart>
  <role>
    <roleTerm type="code" authority="marcrelator">aut</roleTerm>
  </role>
</name>
<originInfo>
  <place>
    <placeTerm type="text">Seattle, Wash.</placeTerm>
  </place>
  <publisher>Hermetic Press</publisher>
  <copyrightDate>1996</copyrightDate>
  <issuance>monographic</issuance>
</originInfo>
<identifier type="isbn">0945296185</identifier>
<subject>
  <topic>Card tricks</topic>
</subject>
<note>External Resources: Cite This Item Search for versions with same title and author     
| Advanced options ...
Uniform Title: Grosse kartenschule. Band 1\. English
Edition: Rev. 2nd ed. ; English language ed.
Language: English
Note(s): Includes bibliographical references (p. [245]-247) and index.
Other Titles: Card college
Responsibility: illustrated by Barbara Giobbi-Ebnöther ; translated from the German by     
Richard Hatch.
Vendor Info: Baker &amp; Taylor YBP Library Services (BKTY YANK) 32.00 Status:                 
active Note:               B&amp;T Title: Card College
Entry: 19960709
Update: 20091103
Provider: OCLC</note>
</mods>
<mods>
<titleInfo>
  <title>Book of magic.</title>
</titleInfo>
<typeOfResource>text</typeOfResource>
<genre authority="local">book</genre>
<genre authority="marcgt">book</genre>
<name type="personal">
  <namePart type="family">Warlock</namePart>
  <namePart type="given">Peter</namePart>
  <role>
    <roleTerm type="code" authority="marcrelator">aut</roleTerm>
  </role>
</name>
<originInfo>
  <publisher>London New York, Arco</publisher>
  <copyrightDate>1956</copyrightDate>
  <issuance>monographic</issuance>
</originInfo>
<subject>
  <topic>Magic tricks</topic>
</subject>
<note>External Resources: Cite This Item Search for versions with same title and author  
| Advanced options ...
Edition: [1st ed.]
Language: English
Class Descriptors: LC: GV1547; Dewey: 793.8
Entry: 19750729
Update: 20120116
Provider: OCLC</note>
</mods>
<mods>
<titleInfo>
  <title>The amateur magician's handbook,</title>
</titleInfo>
<typeOfResource>text</typeOfResource>
<genre authority="local">book</genre>
<genre authority="marcgt">book</genre>
<name type="personal">
  <namePart type="family">Hay, Henry</namePart>
  <namePart type="given"/>
  <role>
    <roleTerm type="code" authority="marcrelator">aut</roleTerm>
  </role>
</name>
<name type="personal">
  <namePart type="family">Mussey</namePart>
  <namePart type="given">June Barrows</namePart>
  <role>
    <roleTerm type="code" authority="marcrelator">aut</roleTerm>
  </role>
</name>
<originInfo>
  <publisher>New York, Crowell</publisher>
  <copyrightDate>1972</copyrightDate>
  <issuance>monographic</issuance>
</originInfo>
<identifier type="isbn">0690057113</identifier>
<subject>
  <topic>Magic tricks</topic>
</subject>
<note>External Resources: Cite This Item Search for versions with same title and author 
| Advanced options ...
Edition: 3d ed., rev. and expanded.
Language: English
Note(s): Bibliography: p. 365-373.
Class Descriptors: LC: GV1547; Dewey: 793.8
Responsibility: by Henry Hay. Photos. by Audrey Alley.
Vendor Info: Baker and Taylor (BTCP)
Entry: 19720814
Update: 20080829
Provider: OCLC</note>
</mods>
</modsCollection> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:16:15.223

所以它就像一个参考书目。好吧，这取决于您希望如何在 FileMaker 中使用它。基本的 FileMaker XSLT 将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
  xmlns:mod="http://www.loc.gov/mods/v3"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="/">
    <FMPXMLRESULT xmlns="http://www.filemaker.com/fmpxmlresult">
      <ERRORCODE>0</ERRORCODE>
      <PRODUCT NAME="N/A" BUILD="N/A" VERSION="N/A"/>
      <DATABASE NAME="N/A" LAYOUT="N/A" RECORDS="1"
        DATEFORMAT="M/d/yyyy" TIMEFORMAT="h:mm:ss a"/>
      <METADATA>
        <!-- 1 -->
        <FIELD EMPTYOK="YES" MAXREPEAT="1" TYPE="NUMBER"
            NAME="Title" />
        <!-- More field definitions -->
      </METADATA>
      <RESULTSET>
        <xsl:for-each select="mod:modsCollection/mod:mods">
          <ROW MODID="1" RECORDID="1">
            <!-- 1\. Title -->
            <COL>
              <DATA>
                <xsl:value-of select="mod:titleInfo/mod:title" />
              </DATA>
            </COL>
            <!-- More COL's in the same order as the fields -->
          </ROW>
        </xsl:for-each>
      </RESULTSET>
    </FMPXMLRESULT>
  </xsl:template>
</xsl:stylesheet> 
```

这个应该导入标题。`template match="/"`就像在 C中一样`main()`，它是（典型的）入口点。一旦我们到达那里，我们就会输出生成的 XML 的骨架。

到达行后，我们使用 XSLT 指令循环遍历要在表中记录的元素；在我们的例子中，这些是`mod:modsCollection/mod:mods`，即参考书目条目，但它们可以是任何东西；例如，我们可以遍历所有名称 ( `//mod:name`)。`mod:`前缀是 Zotero 命名空间 ( ) 的快捷方式`http://www.loc.gov/mods/v3`；在原始 XML 中，它被指定为默认命名空间，因此它不带前缀使用，但在 XSLT 中，我使用 FileMaker XML 命名空间作为默认命名空间（请参阅我如何在 中指定它`FMPXMLRESULT`）并定义一个前缀来引用 Zotero 元素。

循环表达式是一个 XPath 表达式；谷歌它找到完整的规格。在这里，我使用了一个简单的表达式来获取所有`mods`元素。当我浏览它们时，我会输出更多 FileMaker 文具 ( `ROW`)，然后为每个字段输出`COL`和`DATA`。现在，对于第一个字段，`DATA`我需要读取标题数据。由于我在`mods`元素中，因此数据的路径是`titleInfo/title`；获得我使用`xsl:value-of`元素的值。

要导入更多字段，请添加更多字段定义和更多`COL`。要导入其他内容（例如，不是条目，而是所有人），请在`xsl:for-each`. 这应该让你开始:)

# java - 在 JFace 查看器中反映数据更改的正确方法

> ID：12132473
> 
> 赞同：2
> 
> 时间：2012-08-26T17:50:20.943
> 
> 标签：java, eclipse, swt, rcp, jface

我正在研究`JFace`Eclipse 开发。*我制作了一个插件*来充当`ComboViewer`. 该提供程序本质上将数据模型提供`ArrayList`为硬编码值。无论如何，我试图理解这种方法。

我`ComboViewer`通过`comboViewer.setInput(list)`方法设置模型。
在按下按钮时，我调用另一个对象的方法来更新`list`我传递`input`的`ComboViewer`（添加另一个元素）并且我调用`comboViewer.refresh`以反映更改，但没有任何反应。

**结果是：**

我需要调用`comboViewer.setInput(list)` *更新后的列表*来查看我的 UI 组合中数据的变化（即之前的添加）。我发现`comboViewer.refresh`只有当我将`comboViewer`' 作为输入传递`Object`并对其进行修改时，它才会反映任何更新。即如果我这样做：

```
List<SomeObject> data = ((List<SomeObject>)(comboViewer.getInput()));  
data.add(new SomeObject("aaa","cccc"));  
comboViewer.refresh(); 
```

只有这样，数据才会被刷新。但我不明白使用这些 API 的正确方法是什么。
我是否应该持有并修改我在`setInput`方法中传递的对象？感觉我不应该这样做。那么这样做的目的是`refresh`什么？

更新提供给`Viewer`s 的数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:42:06.307

反映更改的正确方法是调用`refresh`. 这`list`

```
String[] values = {"1","2","3"};
List<String> list = new ArrayList<String>(Arrays.asList(values)); 
```

创建组件

```
final ComboViewer comboViewer = new ComboViewer(shell, SWT.DROP_DOWN);
comboViewer.setLabelProvider(new LabelProvider());
comboViewer.setContentProvider(new ArrayContentProvider());
comboViewer.setInput(list);
Button button1 = new Button(shell, SWT.PUSH);
button1.setText("Button 5");
button1.addSelectionListener(new SelectionListener(){

  @Override
  public void widgetSelected(SelectionEvent e) {
     // TODO Auto-generated method stub
     System.out.println("Button 5");
     list.add("4");
     comboViewer.refresh();             
  }

  @Override
  public void widgetDefaultSelected(SelectionEvent e) {
     // TODO Auto-generated method stub     
  }

}); 
```

当您按下按钮时，组合查看器会更新。

# c# - mvc3 组合框默认选择值

> ID：12132474
> 
> 赞同：1
> 
> 时间：2012-08-26T17:50:25.983
> 
> 标签：c#, asp.net-mvc-3

我正在使用这种方法，使用 viewmodel 来操作组合框中的值。现在，我很难选择创建操作中使用的实际选定值作为默认值，而不是组合中的第一个值。我知道这是其中的第四个参数，`SelectList`但我不知道如何使用实际 `UserGroupId`原因，这样使用时会给我一个错误

```
var model = new UserViewModel 
    { 
        UserGroups = new SelectList(GetAllUsers(), "UserId", "Name", UserGroupId) 
    } 
    return View(model); 
```

* * *

```
 public class UserViewModel 
    { 
        public int UserGroupId { get; set; } 
        public IEnumerable<SelectListItem> UserGroups { get; set; } 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:10:47.717

像这样：

```
var model = new UserViewModel 
{ 
    // preselct an item in the dropdown whose value equals 5
    // This means that inside your `GetAllUsers()` collection you must
    // have an element with UserId=5 and this element will automatically be
    // preselcted. Here you could put any value of course
    UserGroupId = 5,
    UserGroups = new SelectList(GetAllUsers(), "UserId", "Name") 
};
return View(model); 
```

在您看来：

```
@model UserViewModel
...
@Html.DropDownListFor(x => x.UserGroupId, Model.UserGroups) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:15:02.283

至于第 4 个参数，它需要是一个实际实例，它是 GetAllUsers() 返回的集合的一部分

例如：

```
var users = GetAllUsers();
var defaultUser = users[0];
var model = new UserViewModel 
{ 
     UserGroups = new SelectList(users, "UserId", "Name", defaultUser) 
};

return View(model); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:59:53.880

您可能希望手动构建 SelectList 而不是使用 SelectList 构造函数。这将为您提供处理“UserId”和“Name”所需的控制权。这也解决了如何将整数记录 id 添加到选择列表的问题。

让我们从一个构建并返回一个`List<SelectListItem>`

```
public static List<SelectListItem> UserGroups(int userGroupId, int selectedUserId)
{
    var userGroupsQuery = from u in dbContext.Users
                          where u.UserGroupId == userGroupId
                          select u;

    var userSelectList= new List<SelectListItem>();

    foreach (var user in userGroupsQuery.Users)
    {
        userSelectList.Add(
            new SelectListItem
            {
                Text = userGroup.Name,
                Value = userGroup.UserId.ToString(CultureInfo.InvariantCulture),
                Selected = (user.UserId == selectedUserId)
            };
    }

    return userSelectList;
} 
```

现在我们有了一个可以使用的选择列表，所以让我们在我们的操作方法中使用它。

```
int selectedUserId = 1000;
int userGroupId = 5;

var userViewModel = new UserViewModel
{
    UserGroups = ListLookup.UserGroups(userGroupId, selectedUserId)
}

return View(userViewModel); 
```

然后在视图中。

```
@Html.DropDownList("UserId", Model.Users) 
```

这里的关键是`Value`选择列表中的属性必须是字符串，而不是整数。另请注意，默认情况下，您不能在 lambda 表达式中调用字符串（因此使用了 foreach 循环）。大多数 SelectList 示例没有显示如何使用该`Selected`属性来选择 SelectList 项中的特定值。

我希望这有帮助 ：）

# python - 安装 reindent python

> ID：12132481
> 
> 赞同：1
> 
> 时间：2012-08-26T17:51:46.123
> 
> 标签：python

Notepad++ 的 Python 缩进有很多问题。为了解决，我尝试安装 Python reindent 模块，但我没有成功使用它。如果有人成功了，请告诉我..

这是我尝试的步骤。

1.使用简单安装我尝试安装包，

```
C:\Python27\Scripts>easy_install reindent
Searching for reindent
Reading http://pypi.python.org/simple/reindent/
Best match: Reindent 0.1.1
Downloading http://pypi.python.org/packages/source/R/Reindent/Reindent-0.1.1.tar
.gz#md5=878352c36c421a0b944607efba3b01ad
Processing Reindent-0.1.1.tar.gz
Running Reindent-0.1.1\setup.py -q bdist_egg --dist-dir c:\users\premvi~1\appdat
a\local\temp\easy_install-qdahih\Reindent-0.1.1\egg-dist-tmp-1z1zw8
zip_safe flag not set; analyzing archive contents...
Adding reindent 0.1.1 to easy-install.pth file
Installing reindent script to C:\Python27\Scripts

Installed c:\python27\lib\site-packages\reindent-0.1.1-py2.7.egg
Processing dependencies for reindent
Finished processing dependencies for reindent 
```

1.  当我在 python GUI 上执行导入命令时，它是成功的。

2.  当我尝试使用它时出现以下错误。

```
>>> import reindent
>>> reindent -d c:/python27/wxpython/ch2-updateui.py
SyntaxError: invalid syntax
>>> reindent -d c:\python2\wxpython\ch2-updateui.py
SyntaxError: invalid syntax 
```

请让我知道如何解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T18:21:26.557

您正在尝试从 Python 解释器而不是命令行运行命令。由于 reindent 是一个脚本程序，它需要从命令行运行。

你想使用

```
 C:\...\> python -m reindent -d C:\Python27\wxpython\ch2-updateui.py 
```

要不就

```
 C:\...\> reindent -d C:\Python27\wxpython\ch2-updateui.py 
```

在您的命令提示符下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T17:57:25.557

我对这个包一无所知，但你使用的命令确实不符合 Python 语法。我猜您需要在终端中运行它，而不是 Python 解释器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T17:57:49.003

尝试在 C:\Python27\Scripts 中将[其作为reindent.bat 下载。](https://gist.github.com/1455509)那么这应该只是一个问题`reindent path\to\file.py`

# css - CSS 媒体查询捕获高分辨率手机，但不捕获低分辨率平板电脑

> ID：12132484
> 
> 赞同：6
> 
> 时间：2012-08-26T17:52:11.350
> 
> 标签：css, web-applications, mobile, mobile-website, media-queries

我一直`min-width: 600px`在我的 CSS 媒体查询中使用我的断点。我的理由是，在 600 像素及以上我会捕获平板设备（Kindle Fire、iPad 等），低于 600 像素会捕获所有手机设备。

事实证明，虽然 iPhone 通过将像素翻倍表现不错，但仍报告为 320 像素 x 480 像素，但仍有大量 Android 手机的分辨率为 700 像素 x 1280 像素。问题是，如何在不给它们提供类似平板电脑的界面的情况下捕获这些设备？

通常我只会让内容响应设备的像素分辨率，但是，4.3 英寸屏幕上的 1280 像素布局看起来并不正确，特别是因为我的应用程序处理大量表单元素，这些元素在手机上您想跨越整个宽度，但在平板电脑或台式机上却没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:09:25.830

一个不错的选择是[使用 ems](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)为您的内容定制媒体查询，而不是任意设备像素大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:10:35.750

请使用响应式 css 框架来避免此类问题。我建议使用[Foundation](http://foundation.zurb.com)或[Twitter Bootstrap](http://twitter.github.com/bootstrap)

# .net - 使用 Visual Studio.Net 进行 iOS 开发

> ID：12132486
> 
> 赞同：3
> 
> 时间：2012-08-26T17:52:25.760
> 
> 标签：.net, ios, frameworks, evaluation

我有一个新的移动应用程序需要出门，但我需要利用我们的 VS.Net IDE 来构建应用程序。

此应用程序需要具有 iOS UI 特性和功能。

它需要在 VS.Net 中开发（2010 或 2012 - 没关系）。

我愿意使用合理的多个步骤来构建这个应用程序，但我对沿着 Objective-C 路线不感兴趣（如果我这样做，那么我是在 mac 上做的）。

这是我到目前为止所看到的内容和一些一般性说明：

iOS 构建环境 [http://www.pmbaty.com/iosbuildenv/](http://www.pmbaty.com/iosbuildenv/)

*   Objective-C
*   使用 vcproj 文件在 C 中创建初始项目的工具
*   不确定应该支持哪个版本的 VS.Net，因为 2010/2012 都想转换
*   需要在工具和 VS.Net 之间来回切换
*   需要大量的高级培训：Objective-C，新工具

可视化 Web GUI [http://www.visualwebgui.com/tabid/711/Default.aspx](http://www.visualwebgui.com/tabid/711/Default.aspx)

*   VS.Net 2010 的新项目类型
*   有自己的一套必须使用的控件，没有其他的
*   使用老式设计器实现的 winform 轻松绘制 UI
*   尝试运行项目，但只在浏览器中列出项目目录
*   编码在 C# 中，类似于任何 winforms 项目
*   大量浪费时间 - 不是很直观

Nomad - VS.Net 扩展（可能是 vs.net 最简单的用法） [http://www.vsnomad.com/documentation/index.html](http://www.vsnomad.com/documentation/index.html)

*   VS.Net 2010 的新项目类型
*   使用 Html 作为带有 Html 控件的文档类型
*   jquery 和 cordova 中的链接（phonegap）
*   基本上是 VS.Net 的 phonegap 项目
*   需要 Apple Dev 会员资格（证书等）才能构建 iOS 应用程序
*   编码是Javascript
*   如果您有配置文件和签名证书，是否允许您从 VS.Net 构建
*   有可能，但需要进行大量的高级培训，因为需要学习 phonegap

iPhone 的工作室 - ComponentOne [http://www.componentone.com/SuperProducts/StudioiPhone/Demos/](http://www.componentone.com/SuperProducts/StudioiPhone/Demos/)

*   利用 Asp.Net 项目
*   在设计模式下不能很好地工作 - 几乎就像完全集成到 VS.Net
*   不得不为项目添加控件，这很奇怪
*   在我意识到这只是 iPhone 而不是设备无关之前通过演示获得了 1/2
*   使用起来不太直观，但可行，输出非常好
*   有可能，但这感觉就像破解 Asp.net - 可能只有我

**我正在寻找的是其他选项或确认我已经涵盖了主要选项，因此我可以继续使用类似 PhoneGap、Sencha 或？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T07:43:45.587

看看Xamarin 的[MonoTouch](http://xamarin.com/monotouch/)项目。它允许在 iOS 中使用许多 .NET 功能。您可以在 MonoDevelop 中打开您的 VS2010 项目，在那里编译并部署到 iDevice。虽然，它不是免费的。单个专业许可证的价格为 399 美元。

# security - 服务器到服务器 REST API 安全性

> ID：12132492
> 
> 赞同：8
> 
> 时间：2012-08-26T17:53:24.423
> 
> 标签：security, rest

我们正在构建一个只能从一组已知服务器访问的 REST API。我的问题是，如果没有任何基于浏览器的客户端直接访问，需要什么安全机制。

目前拥有：

*   显然是通过 HTTPS
*   启用 HTTP 身份验证，API 使用者有密钥和密码

是否有必要：

*   创建一些更改密钥，例如`md5(timestamp + token)`为请求形成并在端点验证？
*   使用 OAuth（2 腿身份验证）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:14:25.900

没关系 - 是否来自浏览器。

> 是否有必要：
> 
> 创建一些更改密钥，例如为请求形成并在端点验证的 md5(timestamp + token)？
> 
> 使用 oauth（2 腿授权）？

**使用 OAuth**，它解决了这两个问题。OAuth 的使用很好，因为：

*   你不是在重新发明轮子

*   已经有很多依赖于技术堆栈的库和方法

您还可以使用 JWT 令牌在服务之间传递一些带有自定义声明的安全上下文。

作为参考，您可以查看不同的提供商如何解决问题。例如，Azure Active Directory 代表此目的流 [https://docs.microsoft.com/en-us/azure/active-directory/develop/v1-oauth2-on-behalf-of-flow](https://docs.microsoft.com/en-us/azure/active-directory/develop/v1-oauth2-on-behalf-of-flow)

在您的服务之间使用 OAuth2/OpenID Connect 不是强制性的，还有其他协议和替代方案，甚至是自定义的。一切都取决于哪些关系是服务，或者它们都处于完全信任的环境中。

您可以使用任何您喜欢的东西，但主要思想是不要在服务之间共享敏感信息，例如服务帐户凭据或用户凭据。

如果 REST API 安全是主要要求 - OAuth2/OpenID Connect 可能是最佳选择，如果您只需要以最简单的方式在完全信任环境中安全（在身份验证意义上）调用 - Kerberos，如果您需要它们之间的加密自定义隧道对于传输中的数据加密 - 其他选项，如 VPN。实现某些自定义是没有意义的，因为如果您有服务 A 和服务 B，并且希望确保它们之间的调用经过身份验证，那么为了避免耦合和共享敏感信息，您将始终需要一些中央服务 C 作为身份提供者. 因此，如果您从 tis pov 考虑，OAuth2/OIDC 并不过分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:58:08.383

无论您的 API 使用者是 Web 浏览器还是您无法控制的服务器，都不会改变安全状况。

如果您使用的是 HTTPS 并且客户端已经拥有密钥/密码，那么不清楚任何其他机制可以防止哪种攻击。

无论如何，客户端的任何妥协都会暴露一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-22T12:53:40.640

首先 - 用户代理（例如浏览器）是否参与呼叫很重要。

如果只有 S2S 调用，那么 1 路 SSL HTTPS（用于网络加密）和某种签名机制（SHA-256）应该足以保证您的安全。

但是，如果您在 api 响应中返回敏感信息，最好接受 2 路 ssl HTTPS 连接（以验证客户端）。

OAuth2 不会在服务器到服务器调用中添加任何值（在没有用户同意且没有任何用户代理存在的情况下发生）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-22T13:16:58.313

对于服务器之间的身份验证：

## 验证

**已知服务器：**

*   使用带有**X.509 客户端证书的****TLS**（带有相互身份验证的 TLS）。
***   **使用通用 CA**（证书颁发机构）颁发客户端证书。这样，服务器只需要在信任库中拥有 CA 证书或公钥，并且可以为其他客户端/服务器颁发新的客户端证书，而无需更新信任库。**

 ****开放的服务器集：**

*   使用由中央机构颁发的**API 密钥。**服务器需要在每个请求上验证这些密钥（并且可能会在短时间内将密钥的哈希值与验证结果一起缓存）。

## 身份传播

*   如果请求是在**非技术用户**的上下文中执行的，则使用**JWT**（或 SAML）进行**用户主体和声明的身份传播**（在安全代理/WAF/IAM 处授权，并发出由身份验证服务器签名的 JWT）。
*   否则，用户主体是指**技术用户**，可以从客户端证书（X.509 DName）中提取或返回成功的身份验证响应（API 密钥案例）。**

# javascript - JavaScript 中的深层嵌套函数

> ID：12132494
> 
> 赞同：5
> 
> 时间：2012-08-26T17:53:35.400
> 
> 标签：javascript

我找不到一个合适的例子来说明我生命中的挚爱如何做到这一点，或者即使这是可能的。根据我对示例片段的拼凑理解，我提出了以下结构

```
 var t = function()
         {
             this.nestedOne = function()
             {
                 this.nest = function()
                 {
                     alert("here");
                 }
             }
         } 
         t.nestedOne.nest(); 
```

但是，这不起作用（显然）。如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:56:38.817

只需通过以下方式完成：

```
var t = {
    nestedOne: {
        nest: function() {
            alert('here');
        }
    }
}; 
```

否则您的代码没有意义。`this`inside function 不是指函数本身，它指的是调用函数的对象上下文。你甚至没有在代码中调用函数。

如果我说`obj.func()`，那么`this`里面`func`将是`obj`那个电话。因此分配`this.asd = true`将分配`true`给该对象的`"asd"`属性。

如果你想做一个嵌套类，它看起来很不一样：

```
ClassA = (function() {
   function ClassA() {

   }

   ClassA.prototype.method1 = function() {

   };

   function ClassB() {

   }

   ClassB.prototype.method1 = function() {

   };

   return ClassA;
}()) 
```

现在只有 ClassA 可以创建 ClassB 的实例。这应该实现与 java 中的嵌套类相同的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T18:00:26.527

见[http://jsfiddle.net/CstUH/](http://jsfiddle.net/CstUH/)

```
function t(){
     function f(){
         this.nest = function()
         {
             alert("here");
         }
     }
     this.nestedOne = new f();
 }
var myt=new t();
myt.nestedOne.nest() 
```

**编辑1：**

你也可以使用

```
new t().nestedOne.nest() 
```

代替

```
var myt=new t();
myt.nestedOne.nest() 
```

( [http://jsfiddle.net/CstUH/1/](http://jsfiddle.net/CstUH/1/) )

**编辑2：**

或者更简洁：

```
function t(){
    this.nestedOne = new function(){
        this.nest = function(){
            alert("here");
        }
    }
}
new t().nestedOne.nest() 
```

[http://jsfiddle.net/CstUH/2/](http://jsfiddle.net/CstUH/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T18:01:29.297

在 JS 中，函数是**主要的类对象**，您可以直接在代码中访问它们[即不使用反射等]。

您放入`t`body 的代码将在实际执行时执行`t`：

```
t(); 
```

你写了`t.nestedOne,nest()`，但`t`没有`nestedOne`财产——你应该这样做：

```
var t = {

    nestedOne : {

        nest : function()
        {

            alert("here");

        }        

    }

};

t.nestedOne.nest();                ​ 
```

我建议你去看看[John Resig 的 Learning Advanced JavaScript](http://ejohn.org/apps/learn/)教程，这对我很有启发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:10:43.427

我今天写的一个简单的回调处理程序作为我如何进行深度嵌套的示例。如果在代码风格方面不是蜜蜂的膝盖，我深表歉意，它让我的概念更加清晰。

```
 function test () {
      this.that = this;
      this.root = this;

      this.jCallback = new Array(new Array()); // 2d
      this.jCallbackCount = -1;
      this.str = "hello";

      // Callback handler... 
      this.command = {
        that : this, // let's keep a reference to who's above us on the food chain
        root : this.root, // takes us back to the main object

        // add : function() { var that = this; console.log(that.that.str); },
        add : function(targetFnc, newFunc) { 
            var that = this; 
            var home = that.that; // pretty much root but left in as an example of chain traversal.
            var root = this.root; // useful for climbing back up the function chain

            // console.log(that.that.str); 
            home.jCallbackCount++;
            // target, addon, active
            home.jCallback[home.jCallback.length] =  { 'targetFunc' : targetFnc,  'newFunc' : newFunc,  'active' : true, 'id': home.jCallbackCount};

            console.log('cbacklength: ' + home.jCallback.length);
            console.log('added callback targetFunction:[' + targetFnc + ']');

            return home.jCallbackCount; // if we want to delete this later...      
        },

        run : function(targetFnc) {
            var that = this; 
            var home = that.that;
            console.log('running callback check for: ' + targetFnc + '  There is : ' + (home.jCallbackCount + 1) + 'in queue.');
            console.log('length of callbacks is ' + home.jCallback.length);

            for(i=0;i < home.jCallback.length - 1;i++)
            {
              console.log('checking array for a matching callback [' + targetFnc + ']...');
              console.log('current item: ' + home.jCallback[i]['targetFunc'] );
              if( home.jCallback[i]['targetFunc'] == targetFnc )
              {
                 // matched! 
                home.jCallback[i]['newFunc']();
              }

                // console.log(that.that.jCallback[i].targetFunction);
            }
        }
      };

    }

    test.prototype = {
      say : function () {
        var that = this;
        console.log('inside');
        // that.command('doSay');
        that.command.run('doSay');
        console.log(that.str);
      }

    } // end proto

    // BEGIN TESTING **************************************************************************
    // BEGIN TESTING **************************************************************************
    // BEGIN TESTING **************************************************************************
    var testing = new test();

    testing.command.add('doSay', function () { console.log('213123123'); } );
    testing.command.add('doSay', function () { console.log('12sad31'); } );
    testing.command.add('doSay', function () { console.log('asdascccc'); } );

    testing.say(); 
```

直播：http: [//jsfiddle.net/Ps5Uf/](http://jsfiddle.net/Ps5Uf/)

*   注意：要查看控制台输出，只需在 chrome 中打开检查器并单击“控制台”选项卡。

# javascript - Javascript：选中的单选按钮

> ID：12132501
> 
> 赞同：2
> 
> 时间：2012-08-26T17:54:18.103
> 
> 标签：javascript, jquery

在一页中，我有两种搜索形式：

```
<form class="search-panel" method="post" action="" onsubmit="return searchRedirect(this)">
        <input type="test" name="searchFor" />
        <div class="additional-search-button"></div>
        <div id="additional-search-box">
            <div class="as-cont">
                Books<input type="radio" name="category" value="Books" checked="1" /><br/>
                School<input type="radio" name="category" value="School" /><br/>
                Music<input type="radio" name="category" value="Music" />
            </div>
        </div>
       <input type="submit" name="search" />
    </form>

<form class="search-panel" method="post" action="" onsubmit="return searchRedirect(this)">
            <input type="test" name="searchFor" />
            Games<input type="radio" name="category" value="Games" checked="1" />
            <input type="submit" name="search" />
        </form> 
```

我的问题是，如果我在 searchRedirect 中单击搜索游戏，如果它们检查过，总是会提醒书籍、学校或音乐：

那是我的javascript函数：

```
function searchRedirect(form) {
    alert($(form['category']+':checked').val());

    if($(form['category']+':checked').val() == 'Форум')
        window.location.href = '/forum/search.php?keywords='+form['searchFor'].value;
    else {
        window.location.href = '/Search/'+$(form['category']+':checked').val()+'/'+form['searchFor'].value;
    }

    return false;
} 
```

如果我点击搜索游戏，我需要 - 只搜索游戏，如果点击搜索书籍、学校或音乐 - 只搜索它们。但是现在搜索游戏的表单总是使用第一个表单检查按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:00:17.003

`form['category']`将为您提供`NodeList`名称为 的所有表单元素`category`，因此您不能通过将其与 . 连接来将其用作选择器`:checked`。它相当于`$("[object NodeList]:checked")`.

由于您已经在使用 jQuery，因此您可以使用以下代码：

```
alert($(form).find("input[name='category']:checked").val()); 
```

也就是说，在 的上下文中，找到名称为的`form`每个`input`元素，并获取其。`category``checked``value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:39:33.337

你不能这样做`form["category"] + ":checked"`，而是使用 jQuery 的过滤器方法，而不是使用 'this' 来引用表单。此外，您可以/应该使用 jQuery .submit() 来捕获事件而不是内联处理程序，并且只是为了更清晰的代码（以及更好的性能）将其`$(form['category']+':checked')`放入变量中，这样 jquery 就不需要再次搜索元素然后再次。这是一个示例：

```
$('form').submit(function(e){
var checked = $(this['category']).filter(':checked');
var value = checked.val();
alert(value);
})​ 
```

这是一个小提琴，所以你可以摆弄（传递给提交回调的 e 是事件对象，e.preventDefault 就像返回 false 所以表单不会提交）：http: [//jsfiddle.net/SJ7Vd/](http://jsfiddle.net/SJ7Vd/)

# php - 在同一个数组中插入两个或多个查询结果

> ID：12132512
> 
> 赞同：0
> 
> 时间：2012-08-26T17:55:47.293
> 
> 标签：php, mysql, arrays, wordpress

我正在使用 wordpress 代码从我的数据库中查询结果：

```
$query = $wpdb->get_results("SELECT pic0,bio,url,site,applet FROM ".$table." WHERE $condition"); // this code returns an array. 
```

**有没有办法在 $query 数组中合并两个或多个查询结果？**

我试过这个：

```
$query = array();

$query = $wpdb->get_results("query 1");

$query = $wpdb->get_results("query 2"); 
```

它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:03:29.383

你实际上非常接近，因为你`$query`再次设置，你实际上覆盖了变量，相反，你应该**添加**它，有两种方法：

```
$query = array();

array_push($query, $wpdb->get_results("query 1"));

array_push($query, $wpdb->get_results("query 2")); 
```

或更短的版本：

```
$query = array();

$query[] = $wpdb->get_results("query 1");

$query[] = $wpdb->get_results("query 2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:58:45.870

您可以使用 array_merge 函数如下，

$query1Arr，$query2Arr

```
array_merge($query1Arr, $query2Arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:03:44.863

```
$resultSet = array_merge($wpdb->get_results("query 1"),
                         $wpdb->get_results("query 2")); 
```

# python - python httplib 是否允许持久连接？

> ID：12132520
> 
> 赞同：1
> 
> 时间：2012-08-26T17:57:05.357
> 
> 标签：python, httplib, persistent-connection

在阅读示例代码时，我首先需要打开和连接

```
conn = httplib.HTTPSConnection(server) 
```

然后我可以在不建立新连接的情况下发送多个请求：

```
 conn.request(...) 
```

那么这是否意味着我有一个持久的连接？或者 httplib 会在每个请求中建立一个新连接？如何确保与 httplib 的持久连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:25:44.400

不，你最好的选择是[httplib2](http://code.google.com/p/httplib2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T19:27:13.953

是的，连接是持久的，假设服务器支持它。在第[一个示例](http://docs.python.org/library/httplib.html#examples)中，您可以验证连接 sock 属性是否被重用。请注意，每次也必须关闭响应，例如 read()。

# android - 将数据从 ListView 传递到其他 Activity

> ID：12132530
> 
> 赞同：0
> 
> 时间：2012-08-26T17:58:24.683
> 
> 标签：android, listview

我有一个 ListView，其中每个 ListItem 的布局中有 2 个 TextView。单击 ListItem 时，我想将这些 TextViews 的值传递给另一个活动。我所有的尝试都失败了，所以我问你我该怎么做？如何传递 SQLite ROW_ID、R.id.text1 和 R.id.text2 的值？

```
 Cursor cursor = database.getAllNames();
    adapter = new SimpleCursorAdapter(this, R.layout.listrow, cursor,
            new String[] { Database.KEY_DATE , Database.KEY_NAME },
            new int[] {R.id.text1, R.id.text2}, 0);

    listView = (ListView) findViewById(R.id.list);
    listView.setAdapter(adapter);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Intent intent = new Intent(SendingData.this, ReceivingData.class);
            intent.putExtra("id", id); //this should pass the SQLite ROW_ID
            intent.putExtra("date", date); //this should pass the value of R.id.text1
            intent.putExtra("name", name); //this should pass the value of R.id.text2
            startActivity(intent);  
        }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:03:18.840

使用它从 SQLLite 数据库中检索数据。

```
cursor.getString(c.getColumnIndex(Database.columns[i])) // i is the index of the column whose details you want to fetch 
```

然后你可以在intent.putExtra 中将它们作为参数传递。

```
listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Cursor cursor = null;
            cursor = (Cursor) parent.getItemAtPosition(position);
            Intent intent = new Intent(SendingData.this, ReceivingData.class);
            intent.putExtra("id", cursor.getInt(cursor.getColumnIndex(Database.columns[0]))); //assuming that the first column in your database table is the row_id
            intent.putExtra("date", cursor.getString(cursor.getColumnIndex(Database.columns[1]))); //assuming that the second column in your database table is the text1
            intent.putExtra("name", cursor.getString(cursor.getColumnIndex(Database.columns[2]))); //assuming that the third column in your database table is the text2
            startActivity(intent);  
        }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:15:21.210

您可以通过直接从视图中获取数据而无需访问游标（并使用您已经在执行的 onItemClick 方法中传递的行 ID）来完成此操作。：

```
listView.setOnItemClickListener(new OnItemClickListener() { 
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) { 

        TextView text1 = (TextView) view.findViewById(R.id.text1);
        TextView text2 = (TextView) view.findViewById(R.id.text1);
        String date = text1.getText().tostring();
        String name = text2.getText().tostring();

        Intent intent = new Intent(SendingData.this, ReceivingData.class); 
        intent.putExtra("id", id); //this should pass the SQLite ROW_ID 
        intent.putExtra("date", date); //this should pass the value of R.id.text1 
        intent.putExtra("name", name); //this should pass the value of R.id.text2 
        startActivity(intent);   
    } 
}); 
```

# java - 特定对象的时间 日期

> ID：12132533
> 
> 赞同：0
> 
> 时间：2012-08-26T17:58:54.313
> 
> 标签：java, android, date, alarmmanager

是否有任何方法 en Date 或 Calendar 类可以知道从查询到特定 Date 对象的剩余毫秒数？

我正在使用 Alarmmanager 重新安排警报，这对我来说很重要。

我目前的解决方案是获取现有对象的毫秒并减去当前毫秒。

有更好的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:02:52.090

`Date`如果您想要两个值相差多少毫秒，那么使用起来真的很容易[`Date.getTime`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getTime%28%29)：

```
long millisLeft = target.getTime() - now.getTime(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:07:55.957

是的，只需使用日历，此类可以给您以毫秒为单位的时间（如果这是您想要的。所以在您的情况下，您可以减去两个单独的日历。顺便说一下，您可能还必须可能还需要 GregorianCalendar；

即是

```
 Calendar timeStamp = new GregorianCalendar(); 
```

希望这可以帮助您也可以在 [http://be.net/HARO看到我的一个使用它的项目](http://be.net/HARO)

见java中的progague项目，多用于设备、状态设备、数值设备类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T04:10:10.717

# php - 拒绝访问创建的文件

> ID：12132535
> 
> 赞同：2
> 
> 时间：2012-08-26T17:59:08.923
> 
> 标签：php, permissions, chmod

我的脚本创建一个图像并将其保存在服务器上。之后它将其文件权限更改为 644，以便其他用户可以读取图像：

```
imagejpeg($myImage, $savePath);
chmod($savePath, 0644); 
```

对图像的引用将包含在另一个脚本中，该脚本允许我添加缓存标头。本质上，第二个脚本添加了一些标头，然后将文件的内容写入输出流：

```
header("HTTP/1.1 200 OK");
//... caching headers
header("Content-Type: image/jpeg");
header("Content-Length: $Size");
readfile($ImageFile); 
```

但是，这会导致权限失败：

```
Warning:  readfile(...) [function.readfile]: failed to open stream: Permission denied in /.../showImage.php on line 20 
```

第 20 行是包含`readfile()`调用的行。

调用`fileperms($ImageFile)`返回 33412，即八进制的 101204。通过 ftp 我可以验证实际文件权限（对于 ftp 用户）是 644。

图片的`fileowner()`是一个 4 位用户名的用户，而`get_current_user()`脚本的 是我的 ftp 帐户。

我可以通过浏览器直接访问图像。只有脚本无法访问它。

如何启用文件的脚本访问？

# c# - 将字符串发布到 mvc

> ID：12132537
> 
> 赞同：5
> 
> 时间：2012-08-26T17:59:36.863
> 
> 标签：c#, jquery, asp.net-mvc-3

我已经看到了如何序列化为 JSON 中的对象。如何发布一个返回 a 的字符串`ViewResult`？

```
 $.ajax({
                url: url,
                dataType: 'html',
                data: $(this).val(), //$(this) is an html textarea
                type: 'POST',
                success: function (data) {
                    $("#report").html(data);
                },
                error: function (data) {
                    $("#report").html('An Error occured.  Invalid characters include \'<\'. Error: ' + data);
                }
            }); 
```

MVC

```
 [HttpPost]
    public ActionResult SomeReport(string input)
    {
        var model = new ReportBL();
        var report = model.Process(input);
        return View(report);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T18:03:57.957

怎么样：

```
 $.ajax({
            url: url,
            dataType: 'html',
            data: {input: $(this).val()}, //$(this) is an html textarea
            type: 'POST',
            success: function (data) {
                $("#report").html(data);
            },
            error: function (data) {
                $("#report").html('An Error occured.  Invalid characters include \'<\'. Error: ' + data);
            }
        }); 
```

如果您使用`data`与参数名称匹配的键创建 JSON 对象，则 MVC 应该选择它。

在 MVC 方面...

```
[HttpPost] 
public ActionResult SomeReport() 
{ 
    string input = Request["input"];
    var model = new ReportBL(); 
    var report = model.Process(input); 
    return View(report); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:01:59.710

您可能希望以 json 格式返回结果。不知道如何用 asp.net 准确地做到这一点，但如果是 Rails，它会是`return @foo.to_json`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:03:09.880

您需要添加一个`contentType`. 查看 jQuery API：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-06T14:48:20.093

您可以在您的操作方法中使用 [FromBody] 属性，它指定应使用请求正文绑定参数或属性。

```
[HttpPost]
public ActionResult SomeReport([FromBody] string input)
{
    var model = new ReportBL();
    var report = model.Process(input);
    return View(report);
} 
```

# android - 重命名包后 onSearchRequested() 不起作用

> ID：12132545
> 
> 赞同：1
> 
> 时间：2012-08-26T18:00:22.690
> 
> 标签：android

我已经通过 Android Tools -> Rename Application Package 重命名了我的 android 应用程序包，但是在重命名它之后，我无法在调用 onSearchRequested() 时看到搜索框，如果我将包名称改回其原始值，它就可以正常工作，还有什么需要改变的吗？

**[编辑]**

以下是负责调用 onSearchRequested() 的类：

```
public class SearchAction implements Action {

    Activity _activity;

    public SearchAction(Activity activity){

        _activity = activity;

    }

    public int getDrawable() {

        return R.drawable.ic_action_menu;

    }

    public void performAction(View view) {

        _activity.onSearchRequested();

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:40:12.300

我猜您在 AndroidManifest.xml 中使用了完全限定的命名方案。您还必须在那里更改包名称。

对于这些元素：

```
 <meta-data
       android:name="android.app.default_searchable"
       android:value="your.package.YourSearchActivity" /> 
```

# java - 如何在 RichFaces 中选择所有同类元素

> ID：12132548
> 
> 赞同：1
> 
> 时间：2012-08-26T18:00:33.587
> 
> 标签：java, javascript, jsf, richfaces

据我所知，RichFaces 中有几个函数允许通过 javascript 的 id 获取对“丰富：”组件的引用。但在我的情况下，我可以拥有任意数量的 collapsiblePanel，并且需要一种在单击按钮时将它们全部展开的方法。有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:15:37.147

Richfaces 不提供这样的功能。您可以尝试使用 JQuery 来查询`.rf-cp`通用的类`CollapsiblePanel`并尝试从那里获取它。

当然，由于面板的所有“任意数量”都来自您的代码，我认为每次您的 .xml 创建新面板时，您在某处添加它的 id（Javascript 代码，隐藏字段等）并从那里使用它。

Richfaces 可用功能列表： http: [//docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html_single/#chap-Component_Reference-Functions](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html_single/#chap-Component_Reference-Functions)

# xtk - XTK 不支持文件名中的查询参数（尤其是句点）吗？

> ID：12132551
> 
> 赞同：0
> 
> 时间：2012-08-26T18:00:54.697
> 
> 标签：xtk

我通过在我的 html 中直接包含[http://get.goXTK.com/xtk_edge.js来使用 edge XTK。](http://get.goXTK.com/xtk_edge.js)

以下代码片段显示了我如何在 XTK 中引用我的服务器上的文件。

```
var skull = new X.mesh();
skull.file = 'http://myserver.com/stls/skull.stl?accessingUserId=dave@ibm.com&accessCode=8999'; 
```

如您所见，我的文件 uri 有查询参数，其中有句点。在这种情况下，XTK 失败并显示错误消息：

```
com&accessCode=8999  file format is not supported. 
```

看起来 XTK 忘记考虑文件 uri 可以有带句点的查询参数。如果它是一个错误，请您考虑在版本 8 之前修复它。如果我做错了什么，请您指出正确的方向。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:31:02.330

哈哈，你是对的..它不起作用，但你可以使用以下内容：

```
var skull = new X.mesh();
skull.file = 'http://myserver.com/stls/skull.stl?accessingUserId=dave@ibm.com&accessCode=8999&skull.stl'; 
```

基本上只是在查询中附加另一个'&.stl'。

我们只是使用最后一个点拆分 url 以获得扩展名。欢迎任何关于更好解决方案的提议。

# mysql - 在 MySQL SELECT "AS" 中使用表名

> ID：12132558
> 
> 赞同：6
> 
> 时间：2012-08-26T18:02:06.410
> 
> 标签：mysql

当我在 PHP 中评估我的 MySQL SELECT JOIN 结果时，我使用表名来构建一个嵌套数组。但是，在为计算列使用 AS 时，我似乎无法按预期设置表名（为了简化，我在此示例中尝试不使用 JOIN，但问题是相同的）：

```
SELECT `field1`, `field2`, "Test" AS `Table`.`field3` FROM `Test`; 
```

这会引发错误。

如何在 SQL 中指明我想将 field3 与哪个表关联？

（导致表名`$pdoStatement->getColumnMeta()`是“表”）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T18:03:42.933

要将字符串文字声明为输出列，请保留`Table`关闭并仅使用`Test`. 它不需要与您的联接中的表关联，因为它只能通过其列别名访问。当使用类似的元数据函数`getColumnMeta()`时，表名将是一个空字符串，因为它*不*与表关联。

```
SELECT
  `field1`, 
  `field2`, 
  'Test' AS `field3` 
FROM `Test`; 
```

注意：我在上面使用单引号。MySQL 通常配置为支持字符串的双引号，但单引号在 RDBMS 中更广泛地可移植。

如果您*必须*有一个带有字面值的表别名，则需要将其包装在与要使用的表同名的子查询中：

```
SELECT
  field1,
  field2,
  field3
FROM 
  /* subquery wraps all fields to put the literal inside a table */
  (SELECT field1, field2, 'Test' AS field3 FROM Test) AS Test 
```

现在`field3`将输出为`Test.field3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:04:33.817

SELECT `field1`, `field2`, 'Test' AS `field3`FROM `Test`; // 替换为简单的引号 '

# java - 如何在 Hibernate Criteria 中表达这个 SQL（可能？）

> ID：12132559
> 
> 赞同：0
> 
> 时间：2012-08-26T18:02:12.620
> 
> 标签：java, sql, hibernate, hibernate-criteria

请看一下这个SO答案：

[MySQL在ORDER BY中获取行位置](https://stackoverflow.com/a/3614741/467240)

基本上，当有 order by 子句时获取行的位置。是否可以在 Hibernate 标准中表达这一点？

这是我的查询。我真正想要的是一种设置动态 where 子句参数的优雅方法：

```
SELECT x.id, 
       x.position
  FROM (SELECT dwq.id,
               @rownum := @rownum + 1 AS position
          FROM default_work_queue dwq
          JOIN (SELECT @rownum := 0) r 
          WHERE dwq.type=4 *AND FOO=BAR*
      ORDER BY dwq.description ASC) x
 WHERE x.id=540; 
```

也就是说，我希望能够将 0-n 个额外的 'and foo=bar' 添加到 quere 的注释部分，而无需进行大量字符串操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:03:03.147

使用标准是不可能的，因为标准不支持 FROM 子句中的任意 sql。但是，这是此查询的另一个想法

```
// select the count of all elements before the wanted element
int position = session.createCriteria(Work.class)
    .add(restrictions)
    .add(Subqueries.lt("description", DetachedCriteria.For(Work.class)
        .add(Restriction.eq("id", id))
        .setProjection(Projection.Property("description"))))
    .setProjection(Projection.RowCout())
    .UniqueResult<int>(); 
```

如果您已经加载了描述，您可以优化子查询

# android - SharedPreferences 用于存储和读取 Activity 的密码

> ID：12132562
> 
> 赞同：0
> 
> 时间：2012-08-26T18:02:40.727
> 
> 标签：android, passwords, sharedpreferences

我希望有人可以提供帮助。对 Android/Java 来说还是很新的。我有一个包含多个活动的应用程序。当用户单击特定按钮时，我希望他们在继续之前需要登录。

我正在尝试这样做，因此如果密码为 NULL，它将提示创建密码，并在成功创建密码后继续进行活动。从那时起，如果应用程序重新启动，它会询问他们创建的密码以访问该活动。

这就是我所拥有的。我似乎无法设置密码。它始终保持为 NULL。我确定我对这段代码还有其他问题，但我正在尝试一步一步来。

```
package com.soboapps.todos;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.Gravity;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Password extends Activity implements OnClickListener {

public static final String PASSWORD_PREF_KEY ="PasswordSharedPreferences";
public static final String PREFS_PRIVATE = "PREFS_PRIVATE";
public static final String KEY_PRIVATE = "KEY_PRIVATE";
public static final String PREFS_READ = "PREFS_READ";
public static final String KEY_READ = "KEY_READ";
public static final String PREFS_WRITE = "PREFS_WRITE";
public static final String KEY_WRITE = "KEY_WRITE";
public static final String PREFS_READ_WRITE = "PREFS_READ_WRITE";
public static final String KEY_READ_WRITE = "KEY_READ_WRITE";

EditText pass1, password, passwordEditText;
TextView messages, passHint;
//EditText pass1;
Button btnSubmit;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);   
    setContentView(R.layout.password);

    PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    SharedPreferences settings = this.getSharedPreferences("PasswordSharedPreferences", MODE_PRIVATE);
    String password1 = settings.getString("User Password", "");

    messages = (TextView) findViewById (R.id.text1);
    pass1 = (EditText) findViewById(R.id.txtPassword);
    btnSubmit = (Button) findViewById(R.id.btnSubmit);
    passHint = (TextView) findViewById(R.id.textView1);

    //passHint.setText(password1);
    passwordEditText = (EditText) findViewById(R.id.password);

    if(password1.isEmpty()) {
        passHint.setText("Set a Secure Password");
    }   
    btnSubmit.setOnClickListener(this);
} 

    public void onClick(View v) {
        // TODO Auto-generated method stub
        //PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        SharedPreferences settings = this.getSharedPreferences("PasswordSharedPreferences", MODE_PRIVATE);
        final String password1 = settings.getString("User Password", "");
        final String p1 = pass1.getText().toString();

        if(password1.isEmpty()) {
        //switch(v.getId()){
        //case R.id.btnSubmit:

            if (p1.toLowerCase().equals("password")) {
                pass1.setText("");
                messages.setText("Password cannot be \"password\"");
            }

            if (p1.length() < 3) {
                messages.setText("Password must be at least 3 characters");
            }

            else {

                settings.edit().putString("User Password", p1).apply();
                Toast customToast = new Toast(getBaseContext());
                customToast = Toast.makeText(getBaseContext(), "Password has been set!", Toast.LENGTH_SHORT);
                customToast.setGravity(Gravity.CENTER|Gravity.CENTER, 0, 0);
                customToast.show();
                StartGallery();
            }
        }
            else if(p1.equals(password1)) {

                StartGallery();
                }
                else {
                    Toast customToast = new Toast(getBaseContext());
                    customToast = Toast.makeText(getBaseContext(), "Incorrect Password!", Toast.LENGTH_SHORT);
                    customToast.setGravity(Gravity.CENTER|Gravity.CENTER, 0, 0);
                    customToast.show(); {
                    }
                }
        }

    public void StartGallery(){
            Intent intent = new Intent(this, GalleryActivity.class);
            startActivity(intent);
        }

        public boolean onCreateOptionsMenu(Menu menu){
            super.onCreateOptionsMenu(menu);
            MenuInflater Password = getMenuInflater();
            Password.inflate(R.menu.prefs_menu, menu);
            return true;
        }

        public boolean onOptionsItemSelected(MenuItem item){
            switch(item.getItemId()){
            case R.id.menuPrefs:

            startActivity(new Intent("com.soboapps.todos.PASSPREFS"));
            return true;
        }
            return false;
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:45:46.080

在您使用的几个地方`settings.getString(password1, null)`。这不应该`settings.getString(PASSWORD_PREF_KEY, null)`吗？

在您编写它时，您使用变量的内容`password1`作为首选项的关键，这可能不是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T19:12:38.217

我建议进行一些更改。

*   不要使用 SharedPreferences 文件名作为密码的密钥，这会造成混淆。
    您应该为密码密钥使用唯一的字符串，这样您最终可以为*不同*的用户使用*不同*的密码。

**   无论密码是成功还是失败，您都会覆盖 OnClickListener ...

    *   您只是在检查“密码”；不是“密码”、“密码”、“密码”等。

    *   设置密码后，我认为下一个活动应该立即打开。我认为用户不必单击“提交”两次。我在代码中留下了一个关于这个的建议。* 

 *这是一个修改后的 OnClickListener：

```
public void onClick(View v) {
    SharedPreferences settings = this.getSharedPreferences("PasswordSharedPreferences", MODE_PRIVATE);
    final String password1 = settings.getString("User Password", "");
    final String p1 = pass1.getText().toString();

    // No password exists, try to set one
    if(password1.isEmpty()) {
        // Forbid any variation of "password", "Password", "PASSWORD", etc
        if (p1.toLowerCase().equals("password")) {
            pass1.setText("");
            messages.setText("Password cannot be \"password\"");
        }
        // Minimum length requirement
        else if (p1.length() < 3) {
            messages.setText("Password must be at least 3 characters");
        }
        // Set input as password
        else {
            settings.edit().putString("User Password", p1).apply();
            messages.setText("Password set!");

            // You could displayed "Password set!" is a Toast and start the next activity immediately
            //StartGallery();
        }
    }
    else if(p1.equals(password1)) {
        StartGallery();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:11:09.127

我认为您可能想使用 not 运算符。您的消息表明您正在尝试限制用户不要输入密码作为密码

```
if (!p1.equals("password")) 
```

代替

```
if (p1.equals("password")) 
```

编辑：

同时删除线

```
if(settings.getString(password1, null) != null) 
```

这不是必需的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T18:47:12.507

更改此行：

```
if(settings.getString(password1, null) != null) { 
```

对此：

```
if(password1.equals(null)) { 
```

您已经将首选项的值存储在`passward1`. 没有必要再次获得它。最重要的是，**您应该`equals()`与字符串一起使用，而不是`!=`**.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T19:05:59.120

如果我说对了，那么您的问题是您无法将密码保存到首选项中。如果这个权利你可以试试[这个](https://stackoverflow.com/questions/552070/android-how-do-i-set-a-preference-in-code)。*

# iphone - 将文件解析为 NSDictionary

> ID：12132577
> 
> 赞同：0
> 
> 时间：2012-08-26T18:04:07.903
> 
> 标签：iphone, file, nsdictionary

如何将 txt 文件解析为 NSDictionary？

我的文件看起来像

```
JACK - (mr) - address
99000 - City
Phone : 09 93 81 48 51
Website 
```

这是我的代码：

```
NSString *file = [[NSBundle mainBundle]pathForResource:@"MyFile" ofType:@"txt"];
NSError *error;

NSString *text = [NSString stringWithContentsOfFile:file encoding:NSUTF8StringEncoding error:&error];

NSArray * testArray = [[NSArray alloc] init];
testArray = [text componentsSeparatedByString:@" \n"]; 
```

之后

```
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
for (NSString *s in testArray)
{
    NSArray *arr = [s componentsSeparatedByString:@" -"];
    [dict setObject:[arr objectAtIndex:0] forKey:@"name"];
    NSLog(@"Dictionary: %@", [dict description]);   
} 
```

我的 NSLog 给了我：

```
Dictionary: {
        name = "JACK";
} 
```

如何解析文件的其余部分以获取“mr”并在地址之后......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:07:24.850

从您发布的代码中，您似乎只要求 arr 获取 arr 数组中的第一个元素。尝试这个：

```
int i= 0;
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
for (NSString *s in testArray)
{
    NSArray *arr = [s componentsSeparatedByString:@" -"];
    for(NSString * pstrSubComponent in arr)
    {
          [dict setObject:pstrSubComponent forKey:paKeysArray[i++]];   
    }
}

NSLog(@"Dictionary: %@", [dict description]); 
```

您必须使用您希望在文件中使用的所有键来制作 paKeysArray。这假设您知道文件中数据的顺序并且它是一致的。

# iphone - TextField 键盘不会关闭

> ID：12132578
> 
> 赞同：0
> 
> 时间：2012-08-26T18:04:25.593
> 
> 标签：iphone, xcode, toolbar, textfield

我正在使用 xcode 中的应用程序。我陷入了一个问题。我制作了一个表格视图并制作了一个单元格，我想在其中显示 3 个文本字段和标签。我已经通过编码和分配带有标签的文本字段来完成它。TextFields 键盘是 NumPad，因此我添加了一个用于关闭键盘的工具栏。工具栏有 2 个按钮，一个取消，一个完成。当我点击取消按钮时，它对除最后一个文本字段之外的所有文本字段都有效。

请帮助我。

这是我的代码。

```
 for (int i = 0; i < 3; i++) {

        mainTextField = [[UITextField alloc] initWithFrame:CGRectMake(20, (80 + (i * 60)),               280, 30)];        
        mainTextField.borderStyle = UITextBorderStyleRoundedRect;
        mainTextField.textColor = [UIColor blackColor]; 
        mainTextField.font = [UIFont systemFontOfSize:17.0]; 
        mainTextField.backgroundColor = [UIColor whiteColor]; 
        mainTextField.autocorrectionType = UITextAutocorrectionTypeNo;   
        mainTextField.backgroundColor = [UIColor clearColor];
        mainTextField.keyboardType = UIKeyboardTypeNumberPad;
        mainTextField.keyboardType=UIKeyboardTypeDecimalPad;
        mainTextField.returnKeyType = UIReturnKeyDone;  
        mainTextField.tag= i+1;
        mainTextField.delegate=self;

           [self.mainTableView  addSubview:mainTextField];

           self. numberToolbar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
           self. numberToolbar.barStyle = UIBarStyleBlackOpaque;
           self. numberToolbar.items = [NSArray arrayWithObjects:
                                   [[UIBarButtonItem alloc]initWithTitle:@"Cancel"   style:UIBarButtonItemStyleBordered target:self action:@selector(cancelNumberPad)],
                                   [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                                   [[UIBarButtonItem alloc]initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneWithNumberPad)],
                                   nil];
           [self.numberToolbar setTag:i+1];
            [self.numberToolbar sizeToFit];

            mainTextField.inputAccessoryView = numberToolbar;

            mainTextField.clearButtonMode = UITextFieldViewModeWhileEditing;

        mainLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, 55+(i*60), 280, 18)];
        mainLabel.backgroundColor = [UIColor clearColor];
        mainLabel.textAlignment = UITextAlignmentLeft;
        mainLabel.tag= i+1;

        {
            mainLabel.text = [passedValue objectAtIndex:[mainLabel tag]-1];             

        [self.mainTableView addSubview:mainLabel];
        [self configureView];

} 
    } 

   -(void)cancelNumberPad{

    switch ([self.numberToolbar tag]) {
        case 1:
            [mainTextField resignFirstResponder];
            break;
        case 2:
            [mainTextField resignFirstResponder];
            break;
        case 3:
            [mainTextField resignFirstResponder];
            break;
        default:
            break;
    }

    mainTextField.text = @"";
}

-(void)doneWithNumberPad {

        NSString *numberFromTheKeyboard = mainTextField.text;
        [mainTextField resignFirstResponder];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:40:45.747

当您点击调用 [self.numberToolbar 标签] 的取消按钮时，标签始终为 3！您有一个名为 self.numberToolbar 的工具栏属性，该属性仅包含对一个工具栏的引用。

```
// This loop runs three times, and it just changes the tag of the self.numberToolbar.
// self.numberToolbar is only 1 toolbar and you just keep changing it's tag, the loop stops at
// 2 so the tag is 2 + 1, which is 3.
for (int i = 0; i < 3; i++) {

    [self.numberToolbar setTag:i+1];
} 
```

相反，只需为每个文本字段创建一个属性或实例变量。

```
@property (nonatomic, retain) UITextField *textFieldOne;
@property (nonatomic, retain) UITextField *textFieldTwo;
@property (nonatomic, retain) UITextField *textFieldThree; 
```

现在您有了对每个文本字段的引用，现在无需设置标签属性。您只需要在工具栏上，只需将其添加到视图并在调用时将其显示在键盘上方。

当点击取消按钮时，只需退出所有文本字段，该文本字段当前是否正在使用都没有关系。

我发现属性或实例变量比设置标签属性更清晰、更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:51:54.340

另一种方法应该是遍历所有视图的子视图，检查它是否是 UITextField，如果是，则关闭它。就像是

```
-(void)myToolbarAction
{
for(int i=0;i<self.view.subviews.count; i++)
{
if([[self.view.subviews objectAtIndex:i] isKindOfClass:[UITextField class]]
    [[self.view.subviews objectAtIndex:i] resignFirstResponder];
} 
```

希望能帮助到你

# c# - 如何在 axMozillaBrowser 控件 c#/.net 中禁用脚本错误

> ID：12132589
> 
> 赞同：1
> 
> 时间：2012-08-26T18:05:39.117
> 
> 标签：c#, .net, mozilla, javascript

请有人告诉我如何在 axMozillaBrowser 控件（Mozilla ActiveX 控件）c#/.net 中禁用脚本错误

我使用了这段代码，但它不起作用：

`axMozillaBrowser1.ScriptErrorsSuppressed = true;`

# iphone - 有没有办法连接css和UI自定义类

> ID：12132590
> 
> 赞同：0
> 
> 时间：2012-08-26T18:05:54.567
> 
> 标签：iphone, objective-c, css, ios

非常感兴趣的是有没有办法连接 CSS 样式和 UI 自定义类。例如创建继承 UIButton 类的类并向它们添加 CSS 样式。可能吗？

**编辑** 我的CSS：

```
.button {
   border: 3px solid #0a3c59;
   background: #3e779d;
   background: -webkit-gradient(linear, left top, left bottom, from(#65a9d7), to(#3e779d));
   background: -webkit-linear-gradient(top, #65a9d7, #3e779d);
   background: -moz-linear-gradient(top, #65a9d7, #3e779d);
   background: -ms-linear-gradient(top, #65a9d7, #3e779d);
   background: -o-linear-gradient(top, #65a9d7, #3e779d);
   background-image: -ms-linear-gradient(top, #65a9d7 0%, #3e779d 100%);
   padding: 20px 40px;
   -webkit-border-radius: 10px;
   -moz-border-radius: 10px;
   border-radius: 10px;
   -webkit-box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   -moz-box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   text-shadow: #7ea4bd 0 1px 0;
   color: #06426c;
   font-size: 9px;
   font-family: helvetica, serif;
   text-decoration: none;
   vertical-align: middle;
}
.button:hover {
   border: 3px solid #0a3c59;
   text-shadow: #1e4158 0 1px 0;
   background: #3e779d;
   background: -webkit-gradient(linear, left top, left bottom, from(#65a9d7), to(#3e779d));
   background: -webkit-linear-gradient(top, #65a9d7, #3e779d);
   background: -moz-linear-gradient(top, #65a9d7, #3e779d);
   background: -ms-linear-gradient(top, #65a9d7, #3e779d);
   background: -o-linear-gradient(top, #65a9d7, #3e779d);
   background-image: -ms-linear-gradient(top, #65a9d7 0%, #3e779d 100%);
   color: #fff;
}
.button:active {
  text-shadow: #1e4158 0 1px 0;
  border: 3px solid #0a3c59;
  background: #65a9d7;
  background: -webkit-gradient(linear, left top, left bottom, from(#3e779d), to(#3e779d));
  background: -webkit-linear-gradient(top, #3e779d, #65a9d7);
  background: -moz-linear-gradient(top, #3e779d, #65a9d7);
  background: -ms-linear-gradient(top, #3e779d, #65a9d7);
  background: -o-linear-gradient(top, #3e779d, #65a9d7);
  background-image: -ms-linear-gradient(top, #3e779d 0%, #65a9d7 100%);
  color: #fff;
} 
```

我的类继承自 UIButton 类，没有任何其他更改。我只想添加 css 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:12:59.420

它应该工作。

```
<script>
jQuery(function(){
    // add your own class
    jQuery(".button").addClass("ui-button-new-css");

    jQuery(".button.ui-button-new-css").hover(function(){
        jQuery(this).addClass("ui-button-new-css-hover");
    }, function(){
        jQuery(this).removeClass("ui-button-new-css-hover");
    });

    jQuery(".button.ui-button-new-css").focus(function(){
        jQuery(this).addClass("ui-button-new-css-active");
    });

    jQuery(".button.ui-button-new-css").blur(function(){
        jQuery(this).removeClass("ui-button-new-css-active");
    });
});
</script>

<style>
    .button.ui-button-new-css { 
        /* your new css property */
    }
    .button.ui-button-new-css.ui-button-new-css-hover { 
        /* your new hover css property */
    }
    .button.ui-button-new-css.ui-button-new-css-active { 
        /* your new active css property */
    }
</style> 
```

# git - Git / Subversion 中的功能反向移植

> ID：12132594
> 
> 赞同：9
> 
> 时间：2012-08-26T18:06:35.450
> 
> 标签：git, svn, merge, merge-conflict-resolution, feature-branch

`Git`使用or实现以下工作流程的首选方法是什么`Subversion` *（我对这个版本更感兴趣`Git`，但比较肯定会有用）：*

*   假设我们最近发布了该产品的主要版本，并且有一个特定的 polisihin 分支，名为`release-2.0.x`.

    > 然后开发继续进行，**几个功能分支**被合并到`master/trunk`（它们稍后将成为即将到来的部分`release-2.1.x`）。

*   现在，在某个时候，另一个特性（即`critical-feature`）被开发并合并回`master/trunk`. 我们意识到这个特性是如此重要，以至于我们必须将它反向移植到`release-2.0.x`.

* * *

这是所描述案例的一个小伪图解。`release-2.0.x`请注意，顶部的所有内容都会导致与当前之间的树差异`master/trunk`并**导致合并问题**（否则我可以简单地合并`critical-feature`并避免写这个问题:)

```
 (features added since 2.0.x, which
     should not be backported)
              ^   ^    ^
              |   |    |    (code refactorings done
              |   |    |     in master/trunk)
              \   |    /     (*) (*) (*)          
-------------------------------------------------------> master/trunk
      |                                          |
      |                                          |
      |                                          |
      \ release-2.0.x                            \ critical-feature
                                                   (should be backported) 
```

## 问题：

*   从这个角度来看，执行功能反向移植的最佳方式是`VCS`什么？

*   这应该作为具有解决冲突冲突`merge`的相应分支的简单来完成吗？`critical-feature`

*   或者这应该作为`cherry-pick`提交的 完成，它在完成时合并`critical-feature`到`master/trunk`？或者甚至可能作为分支`cherry-picks`中每个提交的一组`critical-feature`？

*   你能为冲突解决程序提供一些建议吗？如果`release-2.0.x`和之间的当前差异`master/trunk`如此之大，“幼稚”的反向移植会由于代码重构和缺少功能而导致大量冲突，或者`API`在`release-2.0.x`?

*   除了标准的合并或挑选方法之外，是否`Git`或有针对此例程提供的特定内容？`Subversion`我想在冲突数量很大的情况下，重新设置*基准*不会有帮助，但是，显然，我可能是错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T20:23:58.537

这取决于。如果关键功能相对简单且小，您可以挑选几个樱桃。但是，当然它可能会导致很多合并冲突，因为该功能的实现可以使用重构的代码。但是，据我了解，这将是最简单的解决方案。SVN 的唯一解决方案。

然而，这个解决方案并没有反映历史图表中的动作，它令人困惑。

[使用git](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)有另一种选项可以在[`merge-base`](http://www.kernel.org/pub/software/scm/git/docs/git-merge-base.html)在主节点和`release-2.0.x`分支它的字面意思是您应该使用旧代码重新实现该功能，这对于两个分支都很常见。在这种情况下，您可以合并重新定位的功能。如果您已经将该功能合并到主控，当您将重新定位的功能合并到主控时，它很可能会发生冲突（因为主控已经有这样的实现）。因此，您将解决冲突，但在大多数情况下这很容易，因为更改应该几乎相同。

rebased feature 方法的好处是，如果您发现其中的错误，您可以在 feature 分支中修复它，并轻松地将修复合并到 release 和 master 分支中。

当然，变基可能会引起很多冲突，但这意味着没有简单的方法将功能反向移植到`release-2.0.x`. 也许那时重新实现它会更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:54:34.510

**对我来说，反向移植功能**的所有想法似乎都被打破了。只有关键的和非破坏性的更改应该被反向移植。对于功能和改进，您必须创建新分支并开始稳定期。

查看 Apache Subversion 项目本身使用的发布过程： [https ://subversion.apache.org/docs/community-guide/releasing.html#release-stabilization](https://subversion.apache.org/docs/community-guide/releasing.html#release-stabilization)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T11:52:10.393

我已经开发了一些专门用于使用 git 简化此过程的工具，上周我写了一篇关于它们[的广泛博客文章。](http://blog.adamspiers.org/2013/09/19/easier-upstreaming-with-git/)特别是，该`git cherry-menu`帖子中引用的命令可以接受任意的提交列表以进行反向移植，因此使用`git log`和您最喜欢的文本编辑器，您可以构建一个合理仔细选择的提交列表，这些列表构成要反向移植的关键特性，然后运行一些东西喜欢：

```
git checkout -b release-2.0.y release-2.0.x
git cherry-menu cat commits-to-backport.txt 
```

这类似于 kan 的 rebase 建议，除了向后移植过程更加结构化，并且通过在后台使用 git 注释，您可以获得一些方便的额外功能，包括描述该过程的所有元数据在多次运行`git cherry-menu`.

当然，如果你只有少数提交到 backport，kan 是对的，你不妨直接挑选。

不幸的是，我认为接受的答案有点自相矛盾：

> 对我来说，反向移植功能的所有想法似乎都被打破了。只有关键的和非破坏性的更改应该被反向移植。对于功能和改进，您必须创建新分支并开始稳定期。

因为创建一个新分支并开始一个稳定期仍然是向后移植。唯一的区别是您决定将向后移植的提交放入哪个分支！您可以将它们放入原始`release-2.0.x`分支，也可以将它们分叉出来，就像`release-2.0.y`我上面建议的分支一样。后者通常更安全/更清洁（我想这是 Ivan 的观点），但这实际上取决于您如何组织存储库和分支。尽管如此，它仍然无法避免执行挑选和解决潜在冲突的需要。

# java - MappedByteBuffer.asFloatBuffer() 与内存中的 float[] 性能

> ID：12132595
> 
> 赞同：4
> 
> 时间：2012-08-26T18:06:41.927
> 
> 标签：java, performance, nio, mmap, memory-mapped-files

假设您正在对一大组大`float`向量进行一些计算，例如计算每个向量的平均值：

```
public static float avg(float[] data, int offset, int length) {
  float sum = 0;
  for (int i = offset; i < offset + length; i++) {
    sum += data[i];
  }
  return sum / length;
} 
```

如果您将所有向量都存储在内存中`float[]`，则可以这样实现循环：

```
float[] data; // <-- vectors here
float sum = 0;
for (int i = 0; i < nVectors; i++) {
  sum += avg(data, i * vectorSize, vectorSize);
} 
```

**如果您的向量存储在一个文件中，那么理论上**，内存映射应该与第一个解决方案一样快，一旦操作系统缓存了整个内容：

```
RandomAccessFile file; // <-- vectors here
MappedByteBuffer buffer = file.getChannel().map(READ_WRITE, 0, 4*data.length);
FloatBuffer floatBuffer = buffer.asFloatBuffer();
buffer.load(); // <-- this forces the OS to cache the file

float[] vector = new float[vectorSize];
float sum = 0;
for (int i = 0; i < nVectors; i++) {
  floatBuffer.get(vector);
  sum += avg(vector, 0, vector.length);
} 
```

但是，我的测试表明，内存映射版本比内存版本慢**约 5 倍。**我知道这`FloatBuffer.get(float[])`是在复制内存，我想这就是速度变慢的原因。能不能快点？有没有办法完全避免任何内存复制，只从操作系统的缓冲区中获取我的数据？

我已经将我的完整基准上传到[这个 gist](https://gist.github.com/3482171)，以防你想尝试它只是运行：

```
$ java -Xmx1024m ArrayVsMMap 100 100000 100 
```

**编辑：**

最后，在这种情况下，我能够摆脱的最好结果`MappedByteBuffer`仍然比使用常规慢`float[]`约 35%。到目前为止的技巧是：

*   使用本机字节顺序来避免转换：`buffer.order(ByteOrder.nativeOrder())`
*   `MappedByteBuffer`用`FloatBuffer`using包裹`buffer.asFloatBuffer()`
*   使用简单`floatBuffer.get(int index)`版本而不是批量版本，这样可以避免内存复制。

[您可以在这个要点](https://gist.github.com/3493329)上看到新的基准和结果。

1.35 的减速比 5 中的一个要好得多，但距离 1 还很远。我可能仍然缺少一些东西，或者它是 JVM 中应该改进的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T22:58:54.947

您基于数组的时间快得离谱！每个浮点数得到 0.0002 纳秒。JVM 可能正在优化循环。

这就是问题：

```
 void iterate() {
        for (int i = 0; i < nVectors; i++) {
            calc(data, i * vectorSize, vectorSize);
        }
    } 
```

JVM 意识到它`calc`没有副作用，所以`iterate`也没有，所以可以用 NOP 替换它。一个简单的解决方法是累积结果`calc`并返回它。您还需要对`iterate`计时循环中的结果执行相同的操作，并打印结果。这可以防止优化器删除您的所有代码。

**编辑：**

这看起来可能只是 Java 端的开销，与内存映射本身无关，只是它的接口。尝试以下测试，它只是将 a 包裹`FloatBuffer`在 a`ByteBuffer`周围`byte[]`：

```
 private static final class ArrayByteBufferTest extends IterationTest {
    private final FloatBuffer floatBuffer;
    private final int vectorSize;
    private final int nVectors;

    ArrayByteBufferTest(float[] data, int vectorSize, int nVectors) {
      ByteBuffer bb = ByteBuffer.wrap(new byte[data.length * 4]);
      for (int i = 0; i < data.length; i++) {
        bb.putFloat(data[i]);
      }
      bb.rewind();
      this.floatBuffer = bb.asFloatBuffer();
      this.vectorSize = vectorSize;
      this.nVectors = nVectors;
    }

    float iterate() {
      float sum = 0;
      floatBuffer.rewind();
      float[] vector = new float[vectorSize];
      for (int i = 0; i < nVectors; i++) {
        floatBuffer.get(vector);
        sum += calc(vector, 0, vector.length);
      }
      return sum;
    }
  } 
```

由于您对浮点数本身所做的工作很少（只是添加它，可能是 1 个周期），因此读取 4 个字节、构建浮点数并将其复制到数组的成本加起来。我注意到它有助于开销更少，更大的向量，至少在向量大于（L1？）缓存之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T00:35:06.563

理论上没有理由他们应该执行相同的操作。映射的解决方案意味着页面错误和磁盘 I/O 到完全不可预测的程度。float[] 数组没有。您应该期望后者更快，除非在整个文件映射到内存*并且*您永远不会更改它*并且*它保持映射并且永远不会分页的特殊情况下。大多数这些因素是您无法控制或预测的。

# javascript - 强制 DOM 元素处于“检查模式”

> ID：12132596
> 
> 赞同：5
> 
> 时间：2012-08-26T18:06:51.387
> 
> 标签：javascript, google-chrome

在 Chrome 中，如果右键单击 DOM 元素并选择“检查元素”，则会将其带到调试器的“元素”选项卡。此外，JavaScript 变量`$0`会填充“已检查”的 DOM 元素。

给定一个 DOM 元素，有没有办法让 JavaScript 强制浏览器“检查”它，以便浏览器在`$0`本机填充值，而无需自己进行赋值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T18:19:38.633

正如[文档](https://developers.google.com/chrome-developer-tools/docs/console)中所写，Chrome Web Developer 支持[Firebug 的命令行 API](http://getfirebug.com/wiki/index.php/Command_Line_API)。那里存在的一种方法是[检查](http://getfirebug.com/wiki/index.php/Inspect)，它可以满足您的需求。

不幸的是，这是一个*命令行*API，这意味着它仅在控制台、命令行中有效，而不是在页内脚本中有效。除了通过主要提供日志记录工具的[控制台 API之外，没有其他方法可以从页面内脚本控制 Web 开发人员工具。](http://getfirebug.com/wiki/index.php/Console_API)

# emacs - 复制当前行

> ID：12132601
> 
> 赞同：0
> 
> 时间：2012-08-26T18:07:42.177
> 
> 标签：emacs

在 emacs 中，我不得不编写一些本质上非常重复的代码行。除了一些琐碎的修改外，连续的行几乎完全相同。

在 emacs 中是否有一个按键，光标（点）当前所在的行被复制到下一行。为了概括这一点，如果我可以指定要将当前行粘贴到哪个行号，那也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:18:30.607

我倾向于使用以下内容：

选择一个区域，然后`C-x r x`。其中 r 是寄存器名称；键盘上的单个字符可以用作寄存器。

然后`C-x g r`你想在哪里插入你保存在寄存器 r 中的任何行。

您可以将这 2 个命令绑定到快捷键，以使您的任务更加轻松。

使用寄存器的好处是可以将不同的行保存在不同的寄存器中，随时调用。此外，如果您这样做`C-k`并杀死一条线，它不会干扰您保存的寄存器。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T21:19:57.147

这有效，调整直到它适合你。或者，只需使用宏:)

```
(defun copy-line ()
  "copies a line"
  (interactive)
  (move-beginning-of-line 1)
  (kill-line 1)
  (yank)
  (yank)
  (setq kill-ring (cdr kill-ring))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T08:36:27.597

您可以尝试使用 emacs 宏。`C-X (` `C-x )`. 可以找到更多信息：`M-: (info "(emacs)Keyboard Macros") RET`

# java - String.format 或类似的正确格式字符串

> ID：12132604
> 
> 赞同：40
> 
> 时间：2012-08-26T18:07:56.547
> 
> 标签：java, string, formatting

我敢肯定我以前见过`String.format`这样使用过：

```
String.format("Some {1}, {2}, {3}", var1, var2, var3); 
```

这会为任何人敲响警钟吗？也许我在想 C#，有没有办法在 java 中实现同样的目标？

我知道您可以执行以下操作：

```
String.format("Some %s, %d, %s", aString, aNumber, aString) 
```

但我追求的语法是前者......

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-26T18:15:03.470

您正在寻找的是[`MessageFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html)，它使用给定的格式和输入参数，例如

```
MessageFormat.format("Some {0}, {1}, {2}", var1, var2, var3); 
```

正如已经提到的，[`String.format`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)仍然可以使用替代语法来完成这项工作，但它的功能不那么强大，而不是你所要求的。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-08-31T08:24:40.790

我不喜欢同时指定参数索引或其类型 - 主要是在抛出异常并为其准备消息时。我喜欢 SLF4j 的做法。所以我像这样包装了 org.slf4j.helpers.MessageFormatter：

```
public static String subst(String string, Object...objects) {
    return MessageFormatter.arrayFormat(string, objects).getMessage();
} 
```

然后你可以像这样使用它：

```
public void main(String[] args) {
    throw new RuntimeException(MyUtils.subst("Problem with A={} and B={}!", a, b));
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-26T18:09:15.993

是的，这是*C#的典型*[格式](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)字符串。在 Java 中，可以使用后者，即.*`String.format("%s %d %d", ...)`*

 *另一种*方法*是使用`MessageFormat.format("Some {0}, {1}, {2}", var1, var2, var3)`.NET 花括号表示法，正如@Tobias 所提到的，尽管它需要您导入[`java.text.MessageFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html). 当您处理本地化资源时，它们也更适合，您通常拥有`.properties`带有格式消息的外部文件`Error {0} ocurred due to {1}`。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2020-05-26T13:02:23.083

如果你想使用空的占位符（没有位置），你可以在 周围写一个小工具`Message.format()`，像这样

```
 String format(String s, Object... var2) {
        int i = 0;
        while(s.contains("{}")) {
            s = s.replaceFirst(Pattern.quote("{}"), "{"+ i++ +"}");
        }
        return MessageFormat.format(s, var2);
    } 
```

然后，可以像这样使用它，

```
format("Some {} {} {}", var1, var2, var3); 
```*

# jquery - fancyBox 未调用 / HTTP 响应标头

> ID：12132605
> 
> 赞同：0
> 
> 时间：2012-08-26T18:08:04.967
> 
> 标签：jquery, fancybox

我希望 fancyBox 2.1`div`在我的网站上显示一个。我尝试了下载包中的示例：

```
<ul>
    <li><a class="fancybox" href="#inline1" title="Lorem ipsum dolor sit amet">Inline</a></li>
    <li><a class="fancybox fancybox.ajax" href="ajax.txt">Ajax</a></li>
    <li><a class="fancybox fancybox.iframe" href="iframe.html">Iframe</a></li>
    <li><a class="fancybox" href="http://www.adobe.com/jp/events/cs3_web_edition_tour/swfs/perform.swf">Swf</a></li>
</ul>

<div id="inline1" style="width:400px;display: none;">
    <h3>Etiam quis mi eu elit</h3>
    <p>
        Lorem ipsum [...]
    </p>
</div> 
```

我已经包含了所有相应的文件。但是如果我点击第一个链接（“内联”），fancyBox 不会打开。我使用自己编写的 PHP 应用程序，它生成 HTML 代码。如果我将这个生成的 HTML 代码 1:1 复制到一个普通`.html`文件中，一切都会非常好。所以这个问题与我的 HTML 代码无关。

fancyBox 会处理 HTTP 响应标头或类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:43:06.120

我自己发现了错误：问题是`Content-type: application/xhtml+xml`在我的标题中发送。没有它，或者有一个普通`Content-type: text/html`的，fancyBox 似乎可以正常工作。

# actionscript-2 - 必须为 AS2 中的单选按钮导入什么包

> ID：12132609
> 
> 赞同：1
> 
> 时间：2012-08-26T18:08:23.907
> 
> 标签：actionscript-2, flashdevelop

我正在做一些多项选择页面，但编译器在这一行显示错误

```
 var myradBut:RadioButton; 
```

消息是：无法加载类或接口“RadioButton”。

我不知道要导入什么来解决这个错误。我正在使用 Macromedia 的 Flash Professional 8，这是一个旧软件，但我受到 PC 功能的限制。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:11:50.663

ActionScript 2 单选按钮的包是`mx.controls.*`，因此您需要`import mx.controls.RadioButton`. （`fl.controls.*`是 AS3 包）。可在此处找到 AS2 版本的文档：[http ://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002769.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00002769.html)

在 Flash IDE 中，您需要确保已将组件实例从组件面板拖到库（或舞台），以及导入类。

如果如您的标签所示，您正在 FlashDevelop 中编辑 ActionScript，则需要设置项目以使用 Flash IDE 进行编译：[http ://www.flashdevelop.org/wikidocs/index.php?title=Projects# AS2_Flash_IDE_Project](http://www.flashdevelop.org/wikidocs/index.php?title=Projects#AS2_Flash_IDE_Project)

# c# - 在列表中双击

> ID：12132611
> 
> 赞同：2
> 
> 时间：2012-08-26T18:08:26.893
> 
> 标签：c#, .net, linq

如何在列表中选择名称？哪个本身在列表中？？？

我的结构：

```
public class Item
{
    int id;
    List<Name> names;
}

public class Name
{
    int id; 
    string name;
}

List<Item> Items; 
```

代码：

```
Items.Select(a => a.id = 1) //whats next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T18:15:11.757

假设您想要列表中的所有名称，您可以执行以下操作：

```
List<Name> matchingNames = Items.Where(a => a.id == 1).Select(a => a.names); 
```

或者，如果您想要列表中的字符串名称列表，您可以执行以下操作：

```
List<string> matchingNames = Items
    .Where(a => a.id == 1)
    .SelectMany(n => n.names)
    .Select(n => n.name)
    .ToList(); 
```

然后，如果您使用我的第二条语句，您可以`item, item, item`通过执行以下操作以格式输出列表：

```
string outputtedNames = string.Join(", " + matchingNames); 
```

**编辑：根据评论中的要求，您可以根据名称 ID 通过 ID 获取名称：**

```
List<Name> matchingNames = Items
    .SelectMany(a => a.names)
    .Where(n => n.id == 1)
    .ToList(); 
```

**编辑 2：要显示名称项目和 ID 均为 1 的项目，请尝试以下操作：**

```
List<Name> matchingNames = Items
    .Where(a => a.id == 1)
    .SelectMany(a => a.names)
    .Where(n => n.id == 1)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T18:11:35.850

您可以使用

```
var result = Items.Where(a => a.id == 1 && a.names.Contains(333)).Select(a => a.names); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T18:18:06.883

对于限制结果，您可以使用`Where`，对于投影，您可以`Select`在指定字段上使用：

```
var result = Items.Where(x=>x.id == 1).Select(x=>x.name).ToList(); 
```

最后为了得到结果，你应该执行 linq 查询，这可以用`ToList()`or`foreach`循环来完成。

# javascript - 使用jQuery在页面滚动期间获取具有相同类的下一个元素

> ID：12132612
> 
> 赞同：0
> 
> 时间：2012-08-26T18:08:30.023
> 
> 标签：javascript, jquery

在一个页面上，我有 10 个具有相同类名的元素：

```
<span class="simpleclass">text</span> 
```

我想要做的是 - 滚动页面时转到类“simpleclass”的下一个元素。这意味着，当我第一次滚动页面时，我需要在页面上使用“simpleclass”类获取对第二个跨度的引用等。有人可以帮我弄清楚如何实现这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:45:40.707

手工艺:) [http://jsfiddle.net/TK3dd/7/](http://jsfiddle.net/TK3dd/7/)

```
$(window).on('scroll', function(){
    var length = $('.simpleclass').length;
    var off = $('.simpleclass').css('height').replace('px','');
    var _tmp = Math.ceil(Math.abs(window.scrollY)/parseInt(off));
    _tmp = _tmp > (length-1) ? (length-1) : _tmp;
    console.log( $('.simpleclass:eq('+_tmp+')') );
})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:14:20.503

创建一个用于跟踪当前的全局变量`span`：

```
var currentSpan = 1; 
```

然后，无论何时滚动页面，您都可以获得下一个`span`并增加`currentSpan`变量：

```
$(window).scroll(function() {
    var span = $("span.simpleclass").eq(currentSpan);
    currentSpan++;
}); 
```

# xml - XSLT 1.0，NMAP XML，Transform 节点，其指定属性为最大值

> ID：12132616
> 
> 赞同：1
> 
> 时间：2012-08-26T18:08:53.067
> 
> 标签：xml, xslt, xslt-1.0, nmap

我目前正在研究 NMAP XML，虽然我的 XSLT 1.0 有所改进，但我仍然非常缺乏经验。以防万一有人在考虑其他解决方案，这必须使用 XSLT 1.0 来完成。我的 XSLT 处理器仅支持 XSLT 1.0，我无法使用任何 perl/python/ruby NMAP XML 特定库。LibXML/xsltproc 必须支持任何 EXSLT 函数。

这是一个有效但显着减少/编辑的 NMAP XML 示例。

```
<?xml version="1.0"?>
<nmaprun scanner="nmap" args="nmap -sU -sS -sV -O -p T:20-23,25-26,53,79-81,88,106,110-111,113,119,135-139,143-144,161-162,179,199,389,427,443-445,465,513-515,543-544,548,554,587,631,646,705,873,990,993,995,1025-1029,1110,1433,1720,1723,1755,1900,1993,2000-2001,2049,2121,2717,3000,3128,3306,3389,3986,4899,5000,5009,5051,5060,5101,5190,5354,5357,5432,5631,5666,5800,5900,6000-6001,6646,7070,8000,8008-8009,8080-8081,8443,8888,9100,9999-10000,32768,49152-49157,U:53,67,69,111,123,137-138,161-162,199,705,1993,5353 -oX - 192.168.100.1 192.168.100.3 192.168.100.5 192.168.100.6 192.168.100.7 192.168.100.8 192.168.100.9 192.168.100.10 192.168.100.13 192.168.100.15 192.168.100.16 192.168.100.17 192.168.100.18 192.168.100.20 192.168.100.21 192.168.100.24 192.168.100.25" start="1341847779" startstr="Mon Jul  9 11:29:39 2012" version="5.51.6" xmloutputversion="1.03">
  <scaninfo type="syn" protocol="tcp" numservices="105" services="20-23,25-26,53,79-81,88,106,110-111,113,119,135-139,143-144,161-162,179,199,389,427,443-445,465,513-515,543-544,548,554,587,631,646,705,873,990,993,995,1025-1029,1110,1433,1720,1723,1755,1900,1993,2000-2001,2049,2121,2717,3000,3128,3306,3389,3986,4899,5000,5009,5051,5060,5101,5190,5354,5357,5432,5631,5666,5800,5900,6000-6001,6646,7070,8000,8008-8009,8080-8081,8443,8888,9100,9999-10000,32768,49152-49157"/>
  <scaninfo type="udp" protocol="udp" numservices="13" services="53,67,69,111,123,137-138,161-162,199,705,1993,5353"/>
  <verbose level="0"/>
  <debugging level="0"/>
  <host starttime="1341847779" endtime="1341854063">
    <status state="up" reason="reset"/>
    <address addr="192.168.100.1" addrtype="ipv4"/>
    <hostnames>
      <hostname name="sub1.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <extraports state="filtered" count="103">
        <extrareasons reason="no-responses" count="103"/>
      </extraports>
      <port protocol="tcp" portid="22">
        <state state="closed" reason="reset" reason_ttl="43"/>
        <service name="ssh" method="table" conf="3"/>
      </port>
      <port protocol="tcp" portid="443">
        <state state="closed" reason="reset" reason_ttl="53"/>
        <service name="https" method="table" conf="3"/>
      </port>
      <port protocol="udp" portid="5353">
        <state state="open|filtered" reason="no-response" reason_ttl="0"/>
        <service name="zeroconf" method="table" conf="3"/>
      </port>
    </ports>
    <os>
      <portused state="closed" proto="tcp" portid="22"/>
      <osclass type="VoIP phone" vendor="Cisco" osfamily="embedded" accuracy="92"/>
      <osclass type="terminal" vendor="CMI" osfamily="embedded" accuracy="92"/>
      <osclass type="switch" vendor="Enterasys" osfamily="embedded" accuracy="92"/>
      <osclass type="general purpose" vendor="FreeBSD" osfamily="FreeBSD" osgen="4.X" accuracy="92"/>
      <osclass type="general purpose" vendor="FreeBSD" osfamily="FreeBSD" osgen="6.X" accuracy="92"/>
      <osclass type="printer" vendor="Intermec" osfamily="embedded" accuracy="92"/>
      <osclass type="general purpose" vendor="Microsoft" osfamily="Windows" osgen="XP" accuracy="92"/>
      <osclass type="load balancer" vendor="Radware" osfamily="APsolute OS" osgen="10.X" accuracy="92"/>
      <osclass type="load balancer" vendor="Cisco" osfamily="embedded" accuracy="91"/>
      <osclass type="general purpose" vendor="Microsoft" osfamily="Windows" osgen="2003" accuracy="91"/>
      <osclass type="router" vendor="Linksys" osfamily="embedded" accuracy="90"/>
      <osclass type="firewall" vendor="Nokia" osfamily="IPSO" osgen="4.X" accuracy="90"/>
      <osclass type="broadband router" vendor="Neuf" osfamily="embedded" accuracy="89"/>
      <osclass type="VoIP adapter" vendor="Avaya" osfamily="embedded" accuracy="89"/>
      <osclass type="specialized" vendor="Fuji" osfamily="Windows" osgen="XP" accuracy="89"/>
      <osclass type="printer" vendor="HP" osfamily="embedded" accuracy="89"/>
      <osclass type="general purpose" vendor="HP" osfamily="OpenVMS" osgen="7.X" accuracy="89"/>
      <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="89"/>
      <osclass type="WAP" vendor="Motorola" osfamily="embedded" accuracy="89"/>
      <osclass type="firewall" vendor="Netasq" osfamily="embedded" accuracy="89"/>
      <osclass type="WAP" vendor="Orange" osfamily="embedded" accuracy="89"/>
      <osclass type="WAP" vendor="Sagem Communication" osfamily="embedded" accuracy="89"/>
      <osclass type="broadband router" vendor="Sagem Communication" osfamily="embedded" accuracy="89"/>
      <osclass type="broadband router" vendor="Thomson" osfamily="embedded" accuracy="89"/>
      <osclass type="switch" vendor="Cisco" osfamily="embedded" accuracy="89"/>
      <osclass type="switch" vendor="Cisco" osfamily="IOS" osgen="12.X" accuracy="89"/>
      <osclass type="general purpose" vendor="Microsoft" osfamily="Windows" osgen="2000" accuracy="89"/>
      <osclass type="general purpose" vendor="Microsoft" osfamily="Windows" osgen="NT" accuracy="89"/>
      <osclass type="phone" vendor="Nokia" osfamily="Symbian OS" accuracy="89"/>
      <osclass type="firewall" vendor="3Com" osfamily="embedded" accuracy="88"/>
      <osclass type="WAP" vendor="AirSpan" osfamily="embedded" accuracy="88"/>
      <osmatch name="Cisco IP Phone 7941" accuracy="92" line="9973"/>
      <osmatch name="CMI Genus NEMA terminal" accuracy="92" line="12553"/>
      <osmatch name="Enterasys Matrix E1 switch" accuracy="92" line="16101"/>
      <osmatch name="FreeBSD 4.10-RELEASE (x86)" accuracy="92" line="17037"/>
      <osmatch name="FreeBSD 6.1-RELEASE" accuracy="92" line="17563"/>
      <osmatch name="Intermec PM4i label printer" accuracy="92" line="25391"/>
      <osmatch name="Microsoft Windows XP SP3" accuracy="92" line="50241"/>
      <osmatch name="Radware OnDemand Switch 2 XL (APsolute OS 10.31)" accuracy="92" line="56138"/>
      <osmatch name="Cisco ACE load balancer" accuracy="91" line="9310"/>
      <osmatch name="Microsoft Windows Server 2003" accuracy="91" line="41896"/>
    </os>
    <distance value="2"/>
    <times srtt="1260" rttvar="454" to="100000"/>
  </host>
  <host starttime="1341847779" endtime="1341854043">
    <status state="up" reason="echo-reply"/>
    <address addr="192.168.100.3" addrtype="ipv4"/>
    <hostnames>
      <hostname name="sub2.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <extraports state="filtered" count="102">
        <extrareasons reason="no-responses" count="102"/>
      </extraports>
      <port protocol="tcp" portid="22">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="80">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="631">
        <state state="closed" reason="reset" reason_ttl="64"/>
        <service name="ipp" method="table" conf="3"/>
      </port>
      <port protocol="udp" portid="5353">
        <state state="open|filtered" reason="no-response" reason_ttl="0"/>
        <service name="zeroconf" method="table" conf="3"/>
      </port>
    </ports>
    <os>
      <portused state="open" proto="tcp" portid="22"/>
      <portused state="closed" proto="tcp" portid="631"/>
      <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
      <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
    </os>
    <uptime seconds="3662901" lastboot="Mon May 28 03:46:31 2012"/>
    <distance value="2"/>
    <tcpsequence index="258" difficulty="Good luck!" values="E1B9999,E6F5E488,274272DD,94D932E2,B9CF9CA8,F7C309B"/>
    <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
    <tcptssequence class="1000HZ" values="DA505426,DA50548C,DA5054F2,DA505558,DA5055BD,DA505621"/>
    <times srtt="1424" rttvar="772" to="100000"/>
  </host>
  <host starttime="1341847779" endtime="1341854075">
    <status state="up" reason="echo-reply"/>
    <address addr="192.168.100.5" addrtype="ipv4"/>
    <hostnames>
      <hostname name="sub3.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <extraports state="filtered" count="100">
        <extrareasons reason="no-responses" count="100"/>
      </extraports>
      <port protocol="tcp" portid="21">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ftp" product="ProFTPD" version="1.3.3c" ostype="Unix" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="22">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="80">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
      </port>
      <port protocol="udp" portid="5353">
        <state state="open|filtered" reason="no-response" reason_ttl="0"/>
        <service name="zeroconf" method="table" conf="3"/>
      </port>
    </ports>
    <os>
      <portused state="open" proto="tcp" portid="21"/>
      <portused state="closed" proto="tcp" portid="631"/>
      <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
      <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
    </os>
    <uptime seconds="2854295" lastboot="Wed Jun  6 12:23:17 2012"/>
    <distance value="2"/>
    <tcpsequence index="261" difficulty="Good luck!" values="D0B97175,E38B93CA,E038B6D0,E754B4D7,4F3B8565,2E948D89"/>
    <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
    <tcptssequence class="1000HZ" values="AA1DFC6D,AA1DFCD3,AA1DFD39,AA1DFD9F,AA1DFE04,AA1DFE69"/>
    <times srtt="1561" rttvar="679" to="100000"/>
  </host>
  <host starttime="1341847779" endtime="1341854050">
    <status state="up" reason="echo-reply"/>
    <address addr="192.168.100.6" addrtype="ipv4"/>
    <hostnames>
      <hostname name="sub4.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <extraports state="filtered" count="100">
        <extrareasons reason="no-responses" count="100"/>
      </extraports>
      <port protocol="tcp" portid="21">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ftp" product="ProFTPD" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="22">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="80">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
      </port>
      <port protocol="udp" portid="5353">
        <state state="open|filtered" reason="no-response" reason_ttl="0"/>
        <service name="zeroconf" method="table" conf="3"/>
      </port>
    </ports>
    <os>
      <portused state="open" proto="tcp" portid="21"/>
      <portused state="closed" proto="tcp" portid="631"/>
      <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
      <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
    </os>
    <uptime seconds="2854295" lastboot="Wed Jun  6 12:23:17 2012"/>
    <distance value="2"/>
    <tcpsequence index="264" difficulty="Good luck!" values="D5B1C96,FE5DF509,C56A40B8,DF3C5676,63A52AF7,D9A58AAE"/>
    <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
    <tcptssequence class="1000HZ" values="AA1DFC6D,AA1DFCD3,AA1DFD39,AA1DFD9F,AA1DFE04,AA1DFE69"/>
    <times srtt="1608" rttvar="697" to="100000"/>
  </host>
  <host starttime="1341847779" endtime="1341854049">
    <status state="up" reason="echo-reply"/>
    <address addr="192.168.100.10" addrtype="ipv4"/>
    <hostnames>
      <hostname name="sub5.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <extraports state="closed" count="109">
        <extrareasons reason="resets" count="100"/>
        <extrareasons reason="port-unreaches" count="9"/>
      </extraports>
      <port protocol="tcp" portid="22">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ssh" method="table" conf="3"/>
      </port>
      <port protocol="tcp" portid="111">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="rpcbind" method="table" conf="3"/>
      </port>
      <port protocol="tcp" portid="199">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="smux" method="table" conf="3"/>
      </port>
      <port protocol="udp" portid="111">
        <state state="open" reason="udp-response" reason_ttl="64"/>
        <service name="rpcbind" method="probed" conf="10"/>
      </port>
      <port protocol="udp" portid="123">
        <state state="open" reason="udp-response" reason_ttl="64"/>
        <service name="ntp" product="NTP" version="v4" method="probed" conf="10"/>
      </port>
      <port protocol="udp" portid="161">
        <state state="open|filtered" reason="no-response" reason_ttl="0"/>
        <service name="snmp" method="table" conf="3"/>
      </port>
    </ports>
    <os>
      <portused state="open" proto="tcp" portid="22"/>
      <portused state="closed" proto="tcp" portid="20"/>
      <portused state="closed" proto="udp" portid="53"/>
      <osclass type="firewall" vendor="Cisco" osfamily="embedded" accuracy="95"/>
      <osclass type="switch" vendor="Cisco" osfamily="NX-OS" osgen="4.X" accuracy="93"/>
      <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="91"/>
    </os>
    <distance value="2"/>
    <times srtt="529" rttvar="321" to="100000"/>
  </host>
  <runstats>
    <finished time="1341854092" timestr="Mon Jul  9 13:14:52 2012" elapsed="6314.31" summary="Nmap done at Mon Jul  9 13:14:52 2012; 25 IP addresses (5 hosts up) scanned in 156.31 seconds" exit="success"/>
    <hosts up="119" down="29" total="148"/>
  </runstats>
</nmaprun> 
```

我正在尝试将其转换为一个简单的 CSV，只有这三个值，

```
Hostname,IP Address,OS Class 
```

我已经创建了一个样式表，它按预期工作。我还想指定，如果`os/osclass/@osfamily`值为 Linux，则仅输出主机。这是我目前所拥有的

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="text" encoding="utf-8"/>
  <xsl:strip-space elements="*"/>
  <xsl:variable name="delimiter" select="','"/>

  <xsl:template match="/nmaprun/host">

    <xsl:if test="os/osclass[@osfamily='Linux']">
        <xsl:value-of select="hostnames/hostname/@name"/>
        <xsl:value-of select="$delimiter"/>
        <xsl:value-of select="address[@addrtype='ipv4']/@addr"/>
        <xsl:value-of select="$delimiter"/>
        <xsl:value-of select="os/osclass/@osfamily"/>
        <xsl:text>&#10;</xsl:text>
    </xsl:if>

  </xsl:template>
</xsl:stylesheet> 
```

这是示例输出，使用此样式表进行转换，

```
sub1.example.com,192.168.100.1,embedded
sub2.example.com,192.168.100.3,Linux
sub3.example.com,192.168.100.5,Linux
sub4.example.com,192.168.100.6,Linux
sub5.example.com,192.168.100.10,embedded 
```

不幸的是，我得到了那些`embedded`主机，但我已经找到了原因。这是因为主机可以有多个`os/osclass/@osfamily`属性，为每个`os/osclass`元素指定一个。我想`os/osclass/@osfamily`每个主机只考虑一个值，它的`os/osclass@accuracy`值是所有`os/osclass`s 中最高的。尽管我一直在阅读有关排序值的内容，但我真的不知道该怎么做。如果有人有经验，可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:38:53.487

> 我想`os/osclass/@osfamily`每个主机只考虑一个值，它的`os/osclass@accuracy`值是最高的`os/osclasss`。

**你非常接近，使用**：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
      <xsl:output method="text" encoding="utf-8"/>
      <xsl:strip-space elements="*"/>
      <xsl:variable name="delimiter" select="','"/>

      <xsl:template match="/nmaprun/host">

        <xsl:if test=
         "os/osclass
            [@osfamily='Linux'
           and
             not(../osclass/@accuracy > @accuracy)
            ]">
            <xsl:value-of select="hostnames/hostname/@name"/>
            <xsl:value-of select="$delimiter"/>
            <xsl:value-of select="address[@addrtype='ipv4']/@addr"/>
            <xsl:value-of select="$delimiter"/>
            <xsl:value-of select="os/osclass/@osfamily"/>
            <xsl:text>&#10;</xsl:text>
        </xsl:if>
      </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于提供的 XML 文档时，现在的结果是**：

```
sub2.example.com,192.168.100.3,Linux
sub3.example.com,192.168.100.5,Linux
sub4.example.com,192.168.100.6,Linux 
```

**备注**：

上述解决方案相当低效（O（N ^ 2））。

**这是一个更有效的解决方案 (O(N*log(N)))，使用排序**：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
      <xsl:output method="text" encoding="utf-8"/>
      <xsl:strip-space elements="*"/>
      <xsl:variable name="delimiter" select="','"/>

      <xsl:template match="/nmaprun/host">
       <xsl:variable name="vMaxAccuracy">
         <xsl:for-each select="os/osclass/@accuracy">
          <xsl:sort data-type="number" order="descending"/>
          <xsl:if test="position()=1">
            <xsl:value-of select="."/>
          </xsl:if>
         </xsl:for-each>
       </xsl:variable>

        <xsl:if test=
         "os/osclass[@osfamily='Linux' and @accuracy = $vMaxAccuracy]">
            <xsl:value-of select="hostnames/hostname/@name"/>
            <xsl:value-of select="$delimiter"/>
            <xsl:value-of select="address[@addrtype='ipv4']/@addr"/>
            <xsl:value-of select="$delimiter"/>
            <xsl:value-of select="os/osclass/@osfamily"/>
            <xsl:text>&#10;</xsl:text>
        </xsl:if>
      </xsl:template>
</xsl:stylesheet> 
```

# c# - 为了播种数据，有什么方法可以将 SQL Server *data* 转换为实体框架对象？

> ID：12132620
> 
> 赞同：4
> 
> 时间：2012-08-26T18:09:00.587
> 
> 标签：c#, sql-server, asp.net-mvc, entity-framework, ef-code-first

我首先使用实体​​框架代码，我想生成 C# 代码，用于从数据库中已经存在的数据中播种数据。现在，填充 DropCreateDatabaseIfModelChanges.Seed() 似乎是一个完全手动的过程，开发人员在其中创建对象并填写值。如果开发人员是唯一负责播种数据的人，这在某种程度上是可以管理的，但我想这通常不是这种情况。

在我的特殊情况下，有一些非开发人员通过使用一些 MVCScaffolding 生成的输入表单来帮助填充数据库。他们添加的数据确实属于“种子数据”类别，因此我想将他们新添加的行包含到我的 Seed() 实现中。可以简单地将其解释为“生成 C# 代码插入脚本”功能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T23:44:55.680

可以在这里看到我为处理此问题而提供的最佳解决方案： [https ://stackoverflow.com/a/29785119/277992](https://stackoverflow.com/a/29785119/277992)

它不会生成 C# 代码，但我可以将数据快速播种到新创建的数据库中。我可以使用 SSMS“编辑数据”功能更新种子数据，然后重新生成另一个 INSERT 脚本。

# java - Grails 应用程序中的类加载器内存泄漏

> ID：12132621
> 
> 赞同：2
> 
> 时间：2012-08-26T18:09:01.430
> 
> 标签：java, grails, memory-leaks, groovy, out-of-memory

我有一个在 tomcat 上运行的 grails 应用程序，它似乎正在泄漏类加载器，并且在运行大约 2 周后它抛出了 OOME。但是，我无法弄清楚问题的根本原因是什么。任何有关如何解决此问题的帮助将不胜感激。

**已安装 Grails 插件**

```
app.grails.version=1.3.7
app.name=bm
app.servlet.version=2.4
app.version=0.1
plugins.database-migration=1.0
plugins.executor=0.3
plugins.export=0.9
plugins.google-visualization=0.5
plugins.hibernate=1.3.7
plugins.mail=1.0-SNAPSHOT
plugins.quartz=0.4.2
plugins.spring-security-core=1.2.1
plugins.tomcat=1.3.7 
```

**JMAP 输出**

```
 num     #instances         #bytes  class name
----------------------------------------------
1:        140060       18764192  <constMethodKlass>
2:        164561       17114344  org.codehaus.groovy.runtime.metaclass.MetaMethodIndex$Entry
3:        140060       16817936  <methodKlass>
4:         14326       15583816  <constantPoolKlass>
5:        157629       14203608  [C
6:         14326       12833728  <instanceKlassKlass>
7:         71899       10928648  java.lang.reflect.Method
8:         12865        9810400  <constantPoolCacheKlass>
9:        155186        9471320  <symbolKlass>
10:         28791        9364696  [B
11:        164650        7903200  java.util.concurrent.locks.ReentrantLock$NonfairSync
12:        164496        7895808  java.util.concurrent.ConcurrentHashMap$Segment
13:        154748        7427904  java.util.HashMap$Entry
14:        137621        7235504  [Ljava.lang.Object;
15:        178058        7122320  java.lang.String
16:        164496        5876008  [Ljava.util.concurrent.ConcurrentHashMap$HashEntry;
17:         25224        5322656  [Ljava.util.HashMap$Entry;
18:         16359        4774824  [Lorg.codehaus.groovy.util.ComplexKeyHashMap$Entry;
19:          6456        3368704  <methodDataKlass>
20:         69962        3358176  org.codehaus.groovy.util.SingleKeyHashMap$Entry
21:         59890        3353840  java.lang.ref.SoftReference
22:         69222        3322656  java.lang.ref.WeakReference
23:         31530        3026880  java.beans.MethodDescriptor
24:         22579        2890112  java.lang.reflect.Field
25:           897        2824728  [Lorg.codehaus.groovy.runtime.metaclass.MetaMethodIndex$Entry;
26:         15006        2761104  java.lang.Class
27:         45281        2592272  [I
28:         23921        2487784  org.codehaus.groovy.reflection.CachedMethod
29:         46947        1877880  java.util.ArrayList
30:         58290        1865280  org.codehaus.groovy.util.FastArray
31:         21968        1832888  [[I
32:         56895        1792872  [Ljava.lang.Class;
33:            34        1681456  [Lorg.apache.commons.collections.map.AbstractHashedMap$HashEntry;
34:         46489        1661760  [Ljava.lang.String;
35:         10267        1562376  [Ljava.util.concurrent.ConcurrentHashMap$Segment;
36:         12511        1501320  java.lang.reflect.Constructor
37:         30817        1479216  java.util.concurrent.ConcurrentHashMap$HashEntry
38:         17869        1248784  [S
39:         19447        1244608  java.util.HashMap
40:         20885        1169560  groovy.lang.MetaBeanProperty 
```

我想知道执行器插件是否是由于并发HashMap 条目数量多而导致的罪魁祸首。我在不同时间使用 jmap 检查了我自己的类的实例数量，它们似乎并没有增加。我该如何解决这个问题，即使你可以为我提供一个“解决这个问题的方法”，它也会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:53:46.010

可能值得一试[Plumbr](http://plumbr.eu)。它现在也发现了 permgen 泄漏，并且这个功能暂时是免费的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T19:47:49.320

一个快速的谷歌搜索提供了这些来源：

[Grails/Groovy 内存泄漏故障排除？](https://stackoverflow.com/questions/712187/troubleshooting-grails-groovy-memory-leaks)

[http://www.wapolabs.com/2011/12/13/profiling-a-grails-application-with-a-runaway-memory-leak/](http://www.wapolabs.com/2011/12/13/profiling-a-grails-application-with-a-runaway-memory-leak/)

如果你觉得是插件问题，那么移除插件测试难度有多大？

# c# - java 破坏者库 c# 模拟

> ID：12132623
> 
> 赞同：-3
> 
> 时间：2012-08-26T18:09:18.693
> 
> 标签：c#, performance, .net-4.5, hft

我正在编写 HFT 软件。

[Disruptor](http://code.google.com/p/disruptor/)声称是一个“高性能的线程间消息传递库”，并且显然提供了实质性的性能改进。

.NET 是否有可比速度的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:51:29.053

有一个[C# 端口](https://github.com/odeheurles/Disruptor-net)，但正如已经说过的，它应该只用于解决特定问题。它不是让您的软件更快的灵丹妙药。你有性能测试，看看它是否改变了什么？您当前的架构是否适合谨慎工作者的破坏者模型？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:59:58.430

正如 Sam 已经说过的，disruptor 已移植到 dotnet，您将在[GitHub Disruptor Net上看到更多信息](https://github.com/odeheurles/Disruptor-net)

前几天我在想你[关于](https://stackoverflow.com/questions/10206624/how-to-execute-50-parallel-methods-500-times-per-second-effectively/10206889)yonks 的问题，关于我今天如何处理它，知道我现在对并发性的了解（大量线程 =[坏](http://gwan.com/)）。

您可以在这里使用一些模式，

1.  单线程实现最大吞吐量和最低延迟。并行运行并执行某种形式的分片以获得每个内核的额外吞吐量。想想阿拉[Redis](http://redis.io/topics/benchmarks)
2.  一种非阻塞算法ala CAS
3.  [干扰器](http://disruptor.googlecode.com/files/Disruptor-1.0.pdf)/ [CCR](https://stackoverflow.com/questions/525154/concurrency-and-coordination-runtime-ccr-learning-resources)

如果您有任何发现什么时候最有效的方法，我个人很好奇，可以研究一些示例。

[Disruptor](http://disruptor.googlecode.com/files/Disruptor-1.0.pdf)有一篇概述技术论文，你应该浏览一下

# mysql - 使用客户ID过滤mysql中的重复行

> ID：12132628
> 
> 赞同：5
> 
> 时间：2012-08-26T18:09:41.177
> 
> 标签：mysql

我有两张桌子。

## 客户表

它有3个字段..

1.  客户ID
2.  名
3.  姓

## 客户地址表

它有2个字段

1.  客户ID
2.  地址

我的问题是我的客户表有 259 行，而我的客户地址表有 400 多行。我的意思是我的客户地址表包含重复的行。

现在我想从我的客户地址表中只选择唯一的行......

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T18:12:21.597

如果每个副本的`customer_id`and都相同，您可以使用：`address`[`DISTINCT`](http://dev.mysql.com/doc/refman/5.5/en/select.html)

```
SELECT DISTINCT(`customer_id`), `address` FROM `customer_addresses`; 
```

如果客户在表中有两个不同的地址，您将收到上述查询的两个结果。要为每个客户获得一个结果，您可以使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)：

```
SELECT `customer_id`, `address` FROM `customer_addresses` GROUP BY `customer_id`; 
```

这将保证为每个客户返回一个结果。

在使用 的基础上`GROUP BY`，您还可以使用它来*查找*具有重复条目的客户：

```
SELECT `customer_id` FROM `customer_addresses` GROUP BY `customer_id` HAVING COUNT(*) > 1; 
```

这将仅返回在表中具有重复条目（即计数> 1）的客户`customer_addresses`- 这可能会帮助您解决重复问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:12:12.973

将`DISTINCT`关键字添加到您的 SQL 语句中。

**参考：** [http ://www.techonthenet.com/sql/distinct.php](http://www.techonthenet.com/sql/distinct.php)

# ios - 如何在以下 NSDictionary 中下钻？

> ID：12132629
> 
> 赞同：1
> 
> 时间：2012-08-26T18:09:44.767
> 
> 标签：ios, nsarray, nsdictionary

我为我的 UiTableView 的每个单元格获取以下 NSDictionary。我必须能够向下钻取并获得下面资产子结构中的第一个 id 值。

```
{
    assets =     (
                {
            "chunk_size" = 262144;
            file =             {
                "is_dirty" = 0;
                "mongo_grid_f_s_file" =                 {
                    file =                     {
                        "_id" =                         {
                            "$id" = 503a58e09b41648f69000001;
                        };
                        chunkSize = 262144;
                        filename = "/private/var/tmp/phpPPZsUf";
                        length = 5849;
                        md5 = 5f2700f4d953ef866fe1d4967f9965fb;
                        name = Image1;
                        uploadDate =                         {
                            sec = 1346001120;
                            usec = 819000;
                        };
                    };
                    gridfs =                     {
                        chunks =                         {
                            w = 1;
                            wtimeout = 10000;
                        };
                        "chunks_name" = "assets.chunks";
                        "files_name" = "assets.files";
                        w = 1;
                        wtimeout = 10000;
                    };
                };
            };
            id = 503a58e09b41648f69000001;
            length = 5849;
            md5 = 5f2700f4d953ef866fe1d4967f9965fb;
            name = Image1;
            "upload_date" = "0.81900000 1346001120";
        },
                {
            "chunk_size" = 262144;
            file =             {
                "is_dirty" = 0;
                "mongo_grid_f_s_file" =                 {
                    file =                     {
                        "_id" =                         {
                            "$id" = 503a58e09b41648f69000004;
                        };
                        chunkSize = 262144;
                        filename = "/private/var/tmp/phphxvI3H";
                        length = 1551;
                        md5 = f193ffe87eb0138608a206dcf72bf704;
                        name = Image2;
                        uploadDate =                         {
                            sec = 1346001120;
                            usec = 841000;
                        };
                    };
                    gridfs =                     {
                        chunks =                         {
                            w = 1;
                            wtimeout = 10000;
                        };
                        "chunks_name" = "assets.chunks";
                        "files_name" = "assets.files";
                        w = 1;
                        wtimeout = 10000;
                    };
                };
            };
            id = 503a58e09b41648f69000004;
            length = 1551;
            md5 = f193ffe87eb0138608a206dcf72bf704;
            name = Image2;
            "upload_date" = "0.84100000 1346001120";
        }
    );
    coordinates =     {
        latitude = "37.78584";
        longitude = "-122.4064";
    };
    "created_at" = "2012-08-26T12:12:00-0500";
    id = 503a58e09b4164cf5a00000a;
    "number_of_cars" = 1;

} 
```

我尝试了以下方法：

```
 NSDictionary * classifiedAssets = [classified objectForKey:@"assets"]; 
```

然后为了获取每个 id，我已经完成了：

```
[classifiedImages objectForKey:@"id"] 
```

然而，我得到的是：

```
(503a58e09b41648f69000001, 503a58e09b41648f69000004) 
```

我希望取回各种 ID 的 NSArray，而不是括号逗号分隔的列表。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:21:52.250

我想你可能已经拥有了你需要的东西；这是解释：

```
NSDictionary * classifiedAssets = [classified objectForKey:@"assets"]; 
```

不完全是您所期望的：您可能*认为*它是一个 NSDictionary（由于您键入了变量），但它实际上是一个 NSArray（由于 JSON 中的括号而不是花括号）。然后这个：

```
[classifiedImages objectForKey:@"id"]
// by which I *assume* you mean:
[classifiedAssets valueForKey:@"id"] 
```

实际上是在利用 NSArrays 的一个漂亮特性：调用`valueForKey:`NSArray 会为您提供调用`valueForKey:`每个成员的结果的 NSArray。

我假设您正在谈论 NSLog 行中的括号和逗号。在这种情况下，用括号括起来的逗号分隔的一组事物*表示*一个 NSArray（尝试记录它`class`并查看）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:23:21.190

要获取您的资产 ID 数组，您可以执行以下操作：

```
// Assuming that 'classified' is the dictionary you have posted
NSArray *ids = [classified valueForKeyPath:@"assets.id"]; 
```

现在，有趣的`valueForKeyPath`是，`valueForKey`如果遇到`NSArray`

# java - 如何将实体、DTO 和客户端服务接口从 GWT 应用程序重用到另一个应用程序

> ID：12132632
> 
> 赞同：0
> 
> 时间：2012-08-26T18:09:58.530
> 
> 标签：java, google-app-engine, gwt, cordova

我们正在使用 GWT 开发一个应用程序（客户端+服务器）并托管在 GAE 中。现在我们要实现一个移动应用程序（GWT + phonegap），它将连接到应用程序的服务器部分。我想在客户端中使用我们在网页中使用的相同实体、DTO 和客户端服务接口。

那可能吗？如果我将 phonegap 页面作为网页执行 RPC，我会收到 0 错误（我想这是关于跨域问题），但如果我在 android 模拟器中执行，我会收到“无法获取 SerializationPolicy”异常。

我想知道我是否可以做我想做的事，并将页面作为调试页面和在模拟器中使用。

如果这很困难，我怎么能重用旧代码？或者...在我的情况下，这是最好的方法（gwt 应用程序（客户端+服务器），手机间隙页面连接到 GAE 中的同一服务器）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:33:32.597

我写了一篇关于如何一起使用 GWT RPC 和 phonegap 的博客文章：[http ://blog.daniel-kurka.de/2012/04/gwt-rpc-with-phonegap-revisited.html](http://blog.daniel-kurka.de/2012/04/gwt-rpc-with-phonegap-revisited.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T01:05:06.077

您可能想要做的是使用请求工厂而不是不需要可序列化对象的 rpc 服务机制。这也有一个可以在 android 环境中使用的本机 java jar。

这是使用 ClientFactory 去实现设备类型 gwt ui 的优秀视频 [http://www.youtube.com/watch?v=N1aCo5LvMf8](http://www.youtube.com/watch?v=N1aCo5LvMf8)

这是另一个对我有帮助的视频，它解释了对原生 android java 和 gwt [http://www.youtube.com/watch?v=M7SxNNC429U使用相同的请求工厂代码](http://www.youtube.com/watch?v=M7SxNNC429U)

# grails - 多对多关系的grails域类设计

> ID：12132634
> 
> 赞同：0
> 
> 时间：2012-08-26T18:10:05.597
> 
> 标签：grails, groovy, grails-domain-class

我正在设计一个 grails 应用程序，许多多对多的关系让我很难过。这是我目前所拥有的......

领域类

*   学生们
*   测试
*   问题

这里的测试和问题会有m2m的关系。这可能由映射类表示，如果我错了，请纠正我。

```
 TestConfig 
```

这个类可以有`many questions`和`many tests`。

但是当学生参加测试和尝试提问时，我仍然对如何设计我的数据模型感到困惑。一个可能会被调用的课程，`Attempts`其中有学生给出的答案（可能是错误的），它应该属于学生还是测试或两者兼而有之？

我想设计一个“尝试”类，这样当我查看它的一个实例时，我就可以知道它属于哪个测试以及哪个学生参加了它。

我目前的课程如下所示

```
class Questions {
    String question
    String questionType
    int points
    String tags
    String option_1
    String option_2
    String option_3
    String option_4
    boolean isOption_1_Correct
    boolean isOption_2_Correct
    boolean isOption_4_Correct
    boolean isOption_3_Correct
}

class Students {
    String firstName
    String lastName
    String email
    String password
}

class Tests {
    String name
    String tags
    String description
    int duration
    String instruction
} 
```

**- - - 编辑 - - - - -**

我想我在这里找到了一些有用的东西[http://www.databaseanswers.org/data_models/online_exams/index.htm](http://www.databaseanswers.org/data_models/online_exams/index.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:00:18.303

据我了解，学生有很多测试，测试有很多问题

这是文档

[http://grails.org/doc/2.1.0/guide/GORM.html#manyToMany](http://grails.org/doc/2.1.0/guide/GORM.html#manyToMany)

```
class Student {
    // a list named tests which contains Test object
    static hasMany = [tests:Test]
    String name
}

class Test {
    static belongsTo = Student

    // a list named students which contains Student objects
    // a list named questions which contains Quention objects
    static hasMany = [students:Student,questions:Question]
    String title
}

class Question {
    static belongsTo = Test
    static hasMany = [tests: Tests]
    String data
} 
```

# html - 下拉重叠，图像滑块 IE8，Joomla

> ID：12132635
> 
> 赞同：0
> 
> 时间：2012-08-26T18:10:13.910
> 
> 标签：html, css, joomla, internet-explorer-8, joomla2.5

我在这个 joomla 2.5 网页上安装了一个下拉模块/菜单，这里在右上角命名为“呼叫我们”：

[在这里访问网站>>](http://www.goldstarclean.co.uk/)

然而，当在 Internet Explorer 8 中查看时，图像滑块/模块与菜单重叠。我尝试在 CSS 样式中添加 z-index，但它不起作用。

任何建议将被认真考虑。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:17:44.880

好吧，试试这个 [http://aplus.rs/lab/z-pos/](http://aplus.rs/lab/z-pos/) 或 [http://www.brenelz.com/blog/2009/02/03/squish-the-internet-explorer-z-index-错误/](http://www.brenelz.com/blog/2009/02/03/squish-the-internet-explorer-z-index-bug/) 它将解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:15:50.130

检查滑块分区中的 zindex 值。如果它在那里，您可以检查菜单 zindex 值。添加 position: relative 在那个更狡猾的部门。菜单 zindex 值应大于滑块 zinex。价值。希望这会帮助你......

# asp.net - 如何使用资源文件作为可编辑列表视图的数据源？

> ID：12132642
> 
> 赞同：0
> 
> 时间：2012-08-26T18:10:54.520
> 
> 标签：asp.net, localization, resources, resx

我的客户想要控制网站上的文本内容。他想要一个可以查看和编辑资源文件文本的界面。

我*成功地在我的 listview 中显示了资源文件的内容*。**更新**是我**卡住**的地方。我只是不知道在更新事件中写什么。有谁知道一个简单的方法？

![在此处输入图像描述](../Images/ec192a09d6d751efe68ec49340cd26d1.png)

```
ResourceSet rs = Resources.resfile.ResourceManager.
                     GetResourceSet(System.Threading.Thread.CurrentThread.CurrentCulture, true, true);

protected void Page_Prerender(object sender, EventArgs e)
{
    ListView1.DataSource = rs;
    ListView1.DataBind();
}
protected void ListView1_ItemCanceling(object sender, ListViewCancelEventArgs e)
{
    ListView1.EditIndex = -1;
}
protected void Updating(Object sender,ListViewUpdateEventArgs e)
{                
} 
```

* * *

以下代码有效，但在编辑后不会刷新，在我更新其他内容后会刷新。

```
XmlDocument loResource = new XmlDocument();
loResource.Load(Server.MapPath("/App_GlobalResources/resfile.resx"));

XmlNode loRoot = loResource.SelectSingleNode(
                            string.Format("root/data[@name='{0}']/value",e.Keys[0].ToString()));

if (loRoot != null)
{
    loRoot.InnerText = e.NewValues[1].ToString();
    loResource.Save(Server.MapPath("/App_GlobalResources/resfile.resx"));
}    
ListView1.EditIndex = -1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:38:25.360

我刚刚对您的问题进行了演示，并**注意到了同样的问题**。在谷歌搜索并阅读了一些论坛条目后，我偶然发现了这个**[博客](http://www.west-wind.com/weblog/posts/2007/Jul/24/Resource-Unloading-in-a-custom-ASPNET-Localization-Resource-Provider)** *Rick Strahl*指出：

> **刷新资源**
> 
> 对资源进行更改后，您实际上可能希望看到新资源显示在实时用户界面中。[....] ASP.NET 的**资源提供程序加载资源**，并且这些**资源会被永久缓存，直到应用程序关闭**。*据我所知，没有释放资源的内置方法*，但这里的数据提供者包含一些用于跟踪每个提供者的逻辑 [...]

因为我*不想实现一个数据库*来存储可以更新的资​​源，所以我尝试了这个非常肮脏的小东西！只需**调用 Response.Redirect**并从浏览器强制执行一个全新的 Page.Request。所以*服务器得到一个新的响应并重新缓存资源！*

我知道这不是一个好的解决方案，但它对我有用。我**试图**重新**绑定 ressources**，**卸载 appDomain**等等 -**没有任何效果！**我希望这个答案对你有帮助！

```
protected void ListView1_ItemUpdating(Object sender, ListViewUpdateEventArgs e)
{
    string key = e.Keys[0].ToString();
    string value = e.NewValues[0].ToString();

    XmlDocument loResource = new XmlDocument();
    loResource.Load(Server.MapPath("App_GlobalResources/resFile.resx"));

    XmlNode loRoot = loResource.SelectSingleNode(
                                string.Format("root/data[@name='{0}']/value", key));

    if (loRoot != null)
    {
        loRoot.InnerText = value;
        loResource.Save(Server.MapPath("App_GlobalResources/resfile.resx"));
    }

    ListView1.EditIndex = -1;
    Response.Redirect("demo.aspx");  // that's all!!!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:17:23.810

这里有一个代码项目，向您解释如何更新列表视图： http: [//www.codeproject.com/Articles/24570/Complete-ListView-in-ASP-NET-3-5](http://www.codeproject.com/Articles/24570/Complete-ListView-in-ASP-NET-3-5)

# java - 原始 GUI 窗口的颜色

> ID：12132658
> 
> 赞同：1
> 
> 时间：2012-08-26T18:12:51.617
> 
> 标签：java, user-interface, colors, background-color

原GUI窗口的数字参数是多少？如果我从颜色常数中选择，`light gray`仍然比原来的要暗。`Color c = new Color(-,-,-);`请告诉我原始颜色里面是什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:17:16.380

这取决于您使用的外观，但 Swing 背景颜色`JPanel`通常是`new Color(238, 238, 238);`

# cluster-analysis - 使用 matlab 在组织病理学图像上应用 k-means

> ID：12132661
> 
> 赞同：0
> 
> 时间：2012-08-26T18:13:05.757
> 
> 标签：cluster-analysis, k-means

我在组织病理学医学图像上应用 k-means 聚类算法将像素分类。应用 k-means 时一切正常，但我有一个小问题：多次运行 k-means 函数（在 matlab 中可用）时，图像像素每次都以不同的颜色出现。多次应用k-means函数时，我们可以使像素的颜色相同吗？

研究生，

萨法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:08:29.003

Matlab [kmeans](http://www.mathworks.com/help/toolbox/stats/kmeans.html)函数有一个名为 start 的参数，您可以使用它来定义您的起始种子。

> start ，用于选择初始聚类质心位置的方法，有时称为种子。

根据文档，其默认值为

> 'sample' 从 X 中随机选择 k 个观测值（默认）。

您还有其他选项，但只有 Matrix 选项是非随机的。在这种情况下，您需要定义质心起始位置的矩阵 k×p 矩阵。

请参阅以下示例，该示例取自 matlab 文档并在此处进行了修改。

```
X = [randn(100,2)+ones(100,2);...
     randn(100,2)-ones(100,2)];
opts = statset('Display','final');

k = 2;
startPositions = [0.01 0.01 ; -0.01 -0.01];

[idx,ctrs] = kmeans(X,k,...
                    'Distance','city',...
                    'Options',opts,...
                    'Start',startPositions ...
                );

plot(X(idx==1,1),X(idx==1,2),'r.','MarkerSize',12)
hold on
plot(X(idx==2,1),X(idx==2,2),'b.','MarkerSize',12)
plot(ctrs(:,1),ctrs(:,2),'kx',...
     'MarkerSize',12,'LineWidth',2)
plot(ctrs(:,1),ctrs(:,2),'ko',...
     'MarkerSize',12,'LineWidth',2)
legend('Cluster 1','Cluster 2','Centroids',...
       'Location','NW') 
```

请注意，由于数据本身是随机的，因此聚类中心似乎发生了变化。如果将数据更改为 static ，集群中心也将是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:33:05.067

我从来没有使用过 Matlab 来实现这个功能。但我认为 Kmeans 聚类结果是基于其初始中心点的选择。所以也许，Matlab 函数随机选择 K 个初始像素，这可能解释了你每次得到不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:22:37.933

k-means 是一种*随机*算法。每次运行都会返回不同的结果。但是对于其他聚类算法，您将需要找到聚类与您的预期含义（例如颜色）的映射。

您可以通过修复随机生成器或手动选择初始方式来作弊（我不使用 Matlab，但我想它确实支持这种或另一种方式）。然后结果会更稳定，但仍然不一定在图像之间具有可比性。

# c# - 动态订阅/取消订阅事件

> ID：12132662
> 
> 赞同：1
> 
> 时间：2012-08-26T18:13:13.460
> 
> 标签：c#, event-handling, subscribe, unsubscribe

我正在用 C# 开发一个纸牌游戏项目。在这个游戏中，有许多事件被触发，桌上的牌需要订阅。但是，我需要卡片动态订阅和取消订阅事件，以便当前未激活的卡片不会响应被触发的事件。

我的解决方案是使用 EventManager 父类，每个事件有一个子类。这些管理器中的每一个都将具有以 EventHandler 作为参数的订阅/取消订阅方法。调用时，这些方法将从分配给该管理器的事件中订阅/取消订阅提供的处理程序。

下面的代码是一个基本的控制台应用程序，它使用与我的纸牌游戏相同的设计模式，并且存在相同的问题。您可以将其直接粘贴到 Visual Studio 中，它会运行。

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var example = new ExampleCard();
            example.Subscribe();
            example.Events.FireEventOne(null, new EventArgs());
            example.UnSubscribe();
            example.Events.FireEventOne(null, new EventArgs());
            Console.ReadLine();
        }
    }

    public class EventContainer
    {
        public delegate void EventOne(Object sender, EventArgs r);
        public event EventOne OnEventOne;

        public EventContainer()
        {
            OnEventOne += Default_Handler;
        }

        public void Default_Handler(object sender, EventArgs e)
        {

        }

        public void FireEventOne(object sender, EventArgs e)
        {
            OnEventOne(sender, e);
        }
    }

    public class EventManager
    {
        protected EventContainer Events;

        public EventManager(EventContainer events)
        {
            Events = events;
        }

        public virtual void Subscribe(EventHandler handler)
        {
        }

        public virtual void Unsubscribe(EventHandler handler)
        {
        }
    }

    public class EventOneManager : EventManager
    {
        public EventOneManager(EventContainer events)
            : base(events)
        {
        }

        public override void Subscribe(EventHandler handler)
        {
            Events.OnEventOne += new EventContainer.EventOne(handler);
        }

        public override void Unsubscribe(EventHandler handler)
        {
            Events.OnEventOne -= new EventContainer.EventOne(handler);
        }
    }

    public class ExampleCard
    {
        public EventContainer Events = new EventContainer();
        private readonly List<EventManager> _subscribedEvents = new List<EventManager>();

        public ExampleCard()
        {
            _subscribedEvents.Add(new EventOneManager(Events));
        }

        public void Example_OnEventOneFired(object sender, EventArgs e)
        {
            Console.WriteLine("Event One was fired.");
        }

        public void Subscribe()
        {
            _subscribedEvents[0].Subscribe(Example_OnEventOneFired);
        }

        public void UnSubscribe()
        {
            _subscribedEvents[0].Unsubscribe(Example_OnEventOneFired);
        }
    }
} 
```

EventOneManager.Subscribe() 似乎有效，但 EventOneManager.Unsubscribe() 无效；调用该方法后，示例卡仍然订阅该事件，我不知道为什么或如何修复它。

我尝试过的一件事是删除“new EventContainer.EventOne”调用，使其看起来像这样：

```
public override void Unsubscribe(EventHandler handler)
            {
                Events.OnEventOne -= handler;
            } 
```

但我收到此错误：无法将类型“System.EventHandler”隐式转换为“ConsoleApplication1.EventContainer.EventOne”有什么建议吗？

此外，我希望能够使用自定义 EventArgs 类，但我不知道如何传入一个通用处理程序，该处理程序将与我正在使用的任何事件一起工作。我可以解决这个问题，但我更喜欢使用自定义 EventArgs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:16:36.487

您需要将事件更改为 type `EventHandler`。
您不应该创建自己的委托类型。

要传递其他数据，请使用`EventHandler<T>`.

# objective-c - 不理解 Objective-C 中的这种语法

> ID：12132665
> 
> 赞同：2
> 
> 时间：2012-08-26T18:14:03.047
> 
> 标签：objective-c, syntax

在这个答案中：[https ://stackoverflow.com/a/4481896/1486928](https://stackoverflow.com/a/4481896/1486928)

有这样一行：

```
 UITableView *tableView = controller == self.fetchedResultsController ? self.tableView : self.searchDisplayController.searchResultsTableView; 
```

这是我第一次在同一行中看到所有这些符号：/（我是初学者）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T18:15:36.050

`something ? foo : bar`只是一个较短的版本

```
if(something) {
   foo
} else {
   bar 
} 
```

它被称为三元运算符。

所以你的一段代码变成：

```
UITableView *tableView;
if(controller == self.fetchedResultsController) {
    tableView = self.tableView;
} else {
    tableView = self.searchDisplayController.searchResultsTableView;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T18:18:51.577

这是条件运算符。它所做的基本上是根据其条件返回两个值之一：

```
SomeType variable = condition ? valueIfTrue : valueIfFalse; 
```

这可以解释为

```
SomeType variable;
if (condition) {
    variable = valueIfTrue;
} else {
    variable = valueIfFalse;
} 
```

这里的条件是

```
controller == self.fetchedResultsController 
```

因此视图控制器等于`self.fetchedResultsController`，tableView 变量将被分配给`self.tableView`，否则将被分配给`self.searchDisplayController.searchResultsTableView`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T18:17:04.813

这意味着如果`controller`等于`self.fetchedResultsController`，那么

设置 `tableView = self.tableView`，否则

放`tableView = self.searchDisplayController.searchResultsTableView`

您可以将其表示为

```
UITableView *tableView;
 if (controller == self.fetchedResultsController)
     tableview = self.tableView;
 else
     tableview = self.searchDisplayController.searchResultsTableView; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T18:15:01.220

这显示了[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-26T18:16:39.053

这是[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)的一个例子。

以手写方式写出：

```
 UITableView *tableView;
 if (controller == self.fetchedResultsController)
     tableview = self.tableView;
 else
     tableview = self.searchDisplayController.searchResultsTableView; 
```

# asp.net - 为什么我的 C# Web 服务没有获取我的 JSON 数组数据？

> ID：12132667
> 
> 赞同：0
> 
> 时间：2012-08-26T18:14:15.703
> 
> 标签：asp.net, json

我正在使用 AJAX 将 JSON 数组传递给 .NET Web 服务。Stringified JSON 数组在发送时是正确的 - 我在 JS 警报中显示内容 - 但是当我在 Web 服务中输出它时，它只显示空值。

帮助。

JS是这样的：

```
 var listitems = [];
                $('#job-item-list').children('.iamalistitem').each(function () {
                    listitems.push({ "title": $(this).find('.job-item-title').text(), "price": $(this).find('.job-item-price').text().replace("£","").replace("&pound;","") });
                });
                alert(JSON.stringify({ ListItems: listitems }));

                $.ajax({
                    type: "POST",
                    url: "/ld_jobs.asmx/putJobItems",
                    // The key needs to match your method's input parameter (case-sensitive).
                    data: JSON.stringify({ ListItems : listitems }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) {
                        var responseObjTwo = JSON.parse(response.d);
                        //showUserMessage(responseObjTwo.Message, false);
                        showUserMessage(response.d, false);
                    },
                    error: function (response) {
                        var responseObj = JSON.parse(response.responseText);
                        showUserMessage(responseObj.Message, true);
                    }
                }); 
```

接收服务是这样的：

```
 public class ListItem
    {
        public string itemTitle { get; set; }
        public decimal itemPrice { get; set; }
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string putJobItems(ListItem[] ListItems)
    {
        // Add to DB
        int errorNumber = 0;
        try
        {
            // check if on DB already
            string returnstring = "";
            errorNumber++; //1
            foreach (ListItem item in ListItems)
            {
                errorNumber++; //2,3,4
                returnstring += "Desc: " + item.itemTitle + "; Price: " + item.itemPrice.ToString() + "; ";
            }
            errorNumber++; //5
            return "{ \"Status\" : \"Success\", \"Message\" : \"Your request has been successfully posted.  Well done you.  Go put the kettle on and be lazy! \", \"input\" : \"" + returnstring + ": " + errorNumber.ToString() +  "\" }";
        }
        catch (Exception ex)
        {
            Exception newEx = new Exception("Well this is quite embarassing.  It seems the badgers have escaped! (Actual error: " + ex.Message + "; error: " + errorNumber.ToString() + ")");
            throw newEx;
        }
    } 
```

进入的 Stringyfied 字段是：

```
{"ListItems":[{"title":"(Groceries) 4 pints of milk","price":"2.00"},{"title":"(Groceries) 2 loafs of bread","price":"3.00"},{"title":"(Subway) Foot Long BMT","price":"3.00"}]} 
```

Response.d 返回：

```
{ "Status" : "Success", "Message" : "Your request has been successfully posted. Well done you. Go put the kettle on and be lazy! ", "input" : "Desc: ; Price: 0; Desc: ; Price: 0; Desc: ; Price: 0; : 5" } 
```

非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:41:59.207

您是客户端上的使用`title`和`price`属性名称，但`itemTitle`在`itemPrice`服务器上。调整它们以使用相同的名称。

# apache - 当 perl 脚本失败时，apache error.log 中没有错误

> ID：12132670
> 
> 赞同：3
> 
> 时间：2012-08-26T18:14:46.830
> 
> 标签：apache, logging, error-handling, mod-perl

我正在尝试调试为什么我的 index.pl 文件会生成错误，但在 apache 的错误日志中没有任何记录。如何正确设置我的环境以查看发生了什么？我认为文件权限没有问题。

这是我对带有 apache2 的虚拟主机的配置：

```
<VirtualHost *:80>
    ServerName test_perl
    DocumentRoot /var/www/test
    ErrorLog /var/www/test/error_test.log
    LogLevel debug

   <Directory />
       AllowOverride All
       Options All -Indexes +ExecCGI
       AddHandler perl-script .pl
       PerlHandler ModPerl::Registry
       PerlSendHeader On
   </Directory>
</VirtualHost> 
```

这是 HTTP 响应：

```
HTTP/1.1 200 OK
Date: Sun, 26 Aug 2012 18:08:47 GMT
Server: Apache/2.2.22 (Ubuntu)
Content-Type: text/x-perl 
```

没有身体。

但是当我使用命令行运行文件时，我可以看到错误。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:45:22.283

尽管您可能不希望正文为空，但您的 HTTP 响应似乎没有发生错误情况。您可以查看命令行调用和 HTTP 调用之间的不同之处。用于此目的的一个工具是 Apache 的[printenv 示例 CGI 脚本](http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/cgi-examples/printenv?revision=1335882&view=markup)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-28T09:41:39.167

默认情况下，所有`warn`和`STDERR`输出都转到主 Apache 错误日志，而不是`ErrorLog`在 vhost 配置中指定。

另请参阅[https://serverfault.com/questions/525627/on-apache2-mod-perl2-stderr-output-doesnt-go-to-logfile-nposed-by-errorlog/918627#918627](https://serverfault.com/questions/525627/on-apache2-mod-perl2-stderr-output-doesnt-go-to-logfile-nominated-by-errorlog/918627#918627)

# java - 在最后一个块中写入插入排序代码 if 语句是否有意义？

> ID：12132678
> 
> 赞同：1
> 
> 时间：2012-08-26T18:15:33.757
> 
> 标签：java, algorithm, insertion-sort

我阅读了 Cormen&Co 的“算法简介”并在 java 上实现了算法。我想知道在最终方法中写入插入排序代码 if 语句是否有意义`set()`？如果可能的话，我想让代码更快。

```
public static void insertion(List<Integer> a) {
    List<Integer> aList = a;
    int temp;
    int previousIndex;

    for (int i = 1; i < aList.size(); i++) {
        temp = aList.get(i);
        previousIndex = i - 1;
        while ((previousIndex >= 0) && aList.get(previousIndex) > temp) {
            aList.set(previousIndex + 1, a.get(previousIndex));
            previousIndex--;
        }

        //if(aList.get(previousIndex + 1) > temp){
            aList.set(previousIndex + 1, temp);
        //}

    }
} 
```

对不起，如果它是初级的。我非常初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T19:05:56.023

这看起来像是在尝试优化代码，使其更快。显而易见的想法是对数据进行测试以避免设置它。仅当 (1) 读取和测试值比设置值更快并且 (2) 有足够多的情况下测试将避免设置值时，这才会使执行更快。

IMO（1）是可疑的，（2）需要经常进行才能节省很多时间，我认为情况并非如此。

通过测试 (previousIndex + 1 != i) 而不是 (aList.get(previousIndex + 1) > temp) 可以实现更好更快的测试，如果列表对象的复制量很大，这可能是一个很好的优化更耗时，例如复制复杂的对象结构。但是，在这种情况下，我们谈论的是整数对象，所以我认为添加测试只会在所有情况下减慢速度。

当然，正如所有优化的情况一样，只有现实生活中的测量才能说明什么是有效的，这就是为什么优化总是最后要做的事情，而且只有在必要时才做。

# jsf - 加载表格内容时隐藏 Primefaces 数据表“未找到记录”

> ID：12132679
> 
> 赞同：3
> 
> 时间：2012-08-26T18:15:34.927
> 
> 标签：jsf, datatable, primefaces

在我的应用程序中，我使用默认值加载我的数据表，该默认值位于第一页（登录后）。加载数据时，数据表提示“未找到记录”，这让用户感到困惑。如何在加载过程中隐藏它?

![在此处输入图像描述](../Images/e55e6e851629045929def52ceb2e0089.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T09:49:12.307

我知道这有点明显，但是当您显示默认值时，您可以`emptyMessage=""`在`<p:dataTable>`.

但是，如果您需要`emptyMessage`稍后显示（例如，当要加载特定于用户的数据时），您可以在第一次加载时使用以下内容“禁用”它：

```
emptyMessage="#{dataBean.firstLoad ? '' : 'No records found.'}" 
```

where`firstLoad`将是您的支持 bean 中的一个方法，该方法在`true`用户刚刚登录时返回（例如，要加载默认值），而`false`当没有时，这意味着应该加载用户特定的数据并且`<p:dataTable>`实际上可能是空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:48:46.480

**未测试**

我想你在加载表格数据之前点击了一些按钮

因此您可以添加 jquery 命令以隐藏包含空消息的消息的行到它的 onclick 属性，如下所示

```
onclick="jQuery('#YourFormIdOrYourTableId .ui-datatable-empty-message').hide();" 
```

你可以比

将线放回可见`jQuery('#YourFormIdOrYourTableId .ui-datatable-empty-message').show();`

或者，如果您使用的是 primefces 按钮，您可以尝试

```
onstart="jQuery('#YourFormIdOrYourTableId .ui-datatable-empty-message').hide();"

onsuccess="jQuery('#YourFormIdOrYourTableId .ui-datatable-empty-message').show();" 
```

调用`.show()`on 成功是为了使表格在下次表格为空时显示空消息...

# javascript - jQuery循环函数失败

> ID：12132683
> 
> 赞同：0
> 
> 时间：2012-08-26T18:15:53.433
> 
> 标签：javascript, jquery

我对 jQuery 有一点问题。我尝试在一个 div 中显示多个文本。这些 div 应该淡入和淡出，最后该功能应该重新启动。

我写了一个简单的例子，当它运行时。它开始很好......

1.  一
2.  二
3.  三
4.  四
5.  五
6.  六

当函数循环时，问题就开始了。它显示以下顺序：

1.  二
2.  四
3.  五
4.  六，然后以这个顺序重新开始。

我不明白。谁能指出我正确的方向？

这就是脚本：

```
<html>
<head>
<script type="text/javascript" src="jquery151.js"></script>

    <script type="text/javascript">
$(document).ready(function() {
    function loop() {

    var fadeTime = 1000;
    var delayTime = 3200;       

    //if($('#layout4TextTitel').is(':visible') ) {
    $('#layout4TextTitel').fadeOut(fadeTime, function() {
    $('#layout4TextTitel').empty().html('one');
    });
    $('#layout4TextTitel').fadeIn(1000).delay(delayTime);

    $('#layout4TextTitel').fadeOut(fadeTime, function() {
    $('#layout4TextTitel').html('two').fadeIn(1000).delay(delayTime);
    }); 

    $('#layout4TextTitel').fadeOut(fadeTime, function() {
    $('#layout4TextTitel').empty().html('three');
    });
    $('#layout4TextTitel').fadeIn(fadeTime).delay(delayTime);

    $('#layout4TextTitel').fadeOut(fadeTime, function() {
    $('#layout4TextTitel').empty().html('four');
    });
    $('#layout4TextTitel').fadeIn(fadeTime).delay(delayTime);

    $('#layout4TextTitel').fadeOut(fadeTime, function() {
    $('#layout4TextTitel').empty().html('five');
    });
    $('#layout4TextTitel').fadeIn(fadeTime).delay(delayTime);

    $('#layout4TextTitel').fadeOut(fadeTime, function() {
    $('#layout4TextTitel').empty().html('six');
    });
    $('layout4TextTitel').fadeIn(fadeTime).delay(delayTime);                                                    
     // Ende for-Schleife       

    } // Ende loop()

    for(var x = 0; x <=1000; x++) {
        loop();
    } // Ende for-Schleife

    });

</script>
</head>
<body>
<div id="layout4TextTitel"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:00:06.600

```
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            function loop(x){
                var count_down = ["one","two","three","four","five","six"];
                if(x>=count_down.length)x=0;
                $('#layout4TextTitel').fadeOut(1000, function() {
                    $('#layout4TextTitel').empty().html(count_down[x]);
                });
                $('#layout4TextTitel').fadeIn(1000).delay(3200);
                setTimeout(function(){loop(x+1)},1000);
            }
            loop(0);
        });
    </script>
</head>
<body>
    <div id="layout4TextTitel"></div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:17:39.053

您的循环将执行所有 1000 次，其时间比完成单个 fadeIn 或 fadeOut 所需的时间要短。您正在告诉已经动画的元素再次动画......在不到一秒钟的时间内完成 1000 次。

使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)`loop()`每 X 毫秒运行一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T21:01:42.140

对于 jQuery 中的计时，我建议使用[jquery-timing](http://creativecouple.github.com/jquery-timing/)。

使用该插件，您的整个代码将获得：

```
var texts = ['one','two','three','four','five','six'];

function nextText(i) {
  this.html(texts[i % texts.length]);
}

$('#layout4TextTitel').hide().repeat(nextText)
  .fadeIn(1000,$).wait(3500).fadeOut(1000,$); 
```

​请参阅[http://jsfiddle.net/creativecouple/VXgcw/上的此示例](http://jsfiddle.net/creativecouple/VXgcw/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T19:00:24.190

jQuery 有一个动画队列。您向其中添加东西，它们将在将来的某个时间执行（动画）。现在，在您的循环中添加 6000 次`fadeOut`,`fadeIn`和`delay`. 虽然不是很优雅，但它会起作用。但是您的代码中存在问题：

```
$('#layout4TextTitel').fadeOut(fadeTime, function() {
    $('#layout4TextTitel').html('two').fadeIn(1000).delay(delayTime);
}); 
```

与其他片段不同，您在此处在回调中添加`fadeIn`and - 在队列中已经存在的所有其他 16000 个项目之后。这样，队列中有两个连续的 s，并且只有一个会执行。两个回调都将被调用，但在您的古老版本的 jQuery 中，它们的顺序是颠倒的（[演示](http://jsfiddle.net/aDWkL/)；[现在已修复](http://jsfiddle.net/aDWkL/1/)）-因此它将 html 设置为先到后，然后再设置为-您不会看到“三个”出现。`delay``fadeOut``fadeOut``"three"``"two"`

# spring - 带有 Spring Roo 1.2.2 的 STS 3.0.0 无法使用 MongoDB 服务部署到 CloudFoundry

> ID：12132688
> 
> 赞同：1
> 
> 时间：2012-08-26T18:16:36.497
> 
> 标签：spring, sts-springsourcetoolsuite, cloud-foundry

我下载了 STS 3.0.0 并一直在尝试使用 Roo 将一个简单的 spring 应用程序放到 CloudFoundry 上。

**第 1 步：这是我的 roo 脚本**

```
// Spring Roo 1.2.2.RELEASE [rev 7d75659] log opened at 2012-08-26 22:36:52
project --topLevelPackage com.nroots.tracker
mongo setup --cloudFoundry true
entity mongo --class ~.domain.Trackable --testAutomatically 
field string --fieldName name --notNull --sizeMin 3 
field date --fieldName datetime --type java.util.Date --dateTimeFormatPattern yyyyMMddHHmmssSSS 
repository mongo --interface ~.repository.TrackableRepository --entity ~.domain.Trackable 
service --interface ~.service.TrackableService --entity ~.domain.Trackable 
web mvc setup 
web mvc all --package ~.web 
logging setup --level DEBUG --package ROOT
logging setup --level DEBUG --package PROJECT 
perform eclipse 
```

**第 2 步：将项目导入 STS** 出现一个对话框，询问我是否要转换旧版 STS 项目，我选择“是”。该项目被导入并成功构建。

**第 3 步：**在 roo shell 仍在运行的情况下，我修改 Trackable 域类并添加一个 double[] 数组来保存 gps 坐标。然后在 Package Explorer 视图中，我执行 Refactor > Push In 项目再次成功构建。

**第 4 步：部署到 CloudFoundry** 使用 STS CloudFoundry 扩展，我创建了一个新的 VMware CloudFoundry 服务器并添加我的应用程序并将其绑定到 MongoDB 服务...

但是，我在部署期间在控制台视图中遇到了这些异常：

```
2012-08-26 18:05:41,367 [main] ERROR org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'trackableServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.nroots.tracker.repository.TrackableRepository com.nroots.tracker.service.TrackableServiceImpl.trackableRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'trackableRepository': Cannot resolve reference to bean 'mongoTemplate' while setting bean property 'template'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoTemplate' defined in file [/var/vcap/data/dea/apps/tracker-0-36d30b53f85ac47671b723302407a7ec/tomcat/webapps/ROOT/WEB-INF/classes/META-INF/spring/applicationContext-mongo.xml]: Cannot resolve reference to bean 'mongoDbFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoDbFactory': Invocation of init method failed; nested exception is org.cloudfoundry.runtime.env.CloudServiceException: Expected 1 service of class org.cloudfoundry.runtime.env.MongoServiceInfo type, but found 0
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.nroots.tracker.repository.TrackableRepository com.nroots.tracker.service.TrackableServiceImpl.trackableRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'trackableRepository': Cannot resolve reference to bean 'mongoTemplate' while setting bean property 'template'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoTemplate' defined in file [/var/vcap/data/dea/apps/tracker-0-36d30b53f85ac47671b723302407a7ec/tomcat/webapps/ROOT/WEB-INF/classes/META-INF/spring/applicationContext-mongo.xml]: Cannot resolve reference to bean 'mongoDbFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoDbFactory': Invocation of init method failed; nested exception is org.cloudfoundry.runtime.env.CloudServiceException: Expected 1 service of class org.cloudfoundry.runtime.env.MongoServiceInfo type, but found 0
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 37 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'trackableRepository': Cannot resolve reference to bean 'mongoTemplate' while setting bean property 'template'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoTemplate' defined in file [/var/vcap/data/dea/apps/tracker-0-36d30b53f85ac47671b723302407a7ec/tomcat/webapps/ROOT/WEB-INF/classes/META-INF/spring/applicationContext-mongo.xml]: Cannot resolve reference to bean 'mongoDbFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoDbFactory': Invocation of init method failed; nested exception is org.cloudfoundry.runtime.env.CloudServiceException: Expected 1 service of class org.cloudfoundry.runtime.env.MongoServiceInfo type, but found 0
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 39 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoTemplate' defined in file [/var/vcap/data/dea/apps/tracker-0-36d30b53f85ac47671b723302407a7ec/tomcat/webapps/ROOT/WEB-INF/classes/META-INF/spring/applicationContext-mongo.xml]: Cannot resolve reference to bean 'mongoDbFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoDbFactory': Invocation of init method failed; nested exception is org.cloudfoundry.runtime.env.CloudServiceException: Expected 1 service of class org.cloudfoundry.runtime.env.MongoServiceInfo type, but found 0
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 52 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoDbFactory': Invocation of init method failed; nested exception is org.cloudfoundry.runtime.env.CloudServiceException: Expected 1 service of class org.cloudfoundry.runtime.env.MongoServiceInfo type, but found 0
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 64 more
Caused by: org.cloudfoundry.runtime.env.CloudServiceException: Expected 1 service of class org.cloudfoundry.runtime.env.MongoServiceInfo type, but found 0
    at org.cloudfoundry.runtime.service.AbstractServiceCreator.createSingletonService(AbstractServiceCreator.java:53)
    at org.cloudfoundry.runtime.service.AbstractCloudServiceFactory.createInstance(AbstractCloudServiceFactory.java:46)
    at org.springframework.beans.factory.config.AbstractFactoryBean.afterPropertiesSet(AbstractFactoryBean.java:130)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 71 more
Stopping Tomcat because the context stopped. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T00:53:46.913

将您的 applicationContext-mongo.xml 更改为如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"  xmlns:cloud="http://schema.cloudfoundry.org/spring" xmlns:context="http://www.springframework.org/schema/context" xmlns:mongo="http://www.springframework.org/schema/data/mongo" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd        http://www.springframework.org/schema/data/mongo        http://www.springframework.org/schema/data/mongo/spring-mongo-1.0.xsd        http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd        http://schema.cloudfoundry.org/spring http://schema.cloudfoundry.org/spring/cloudfoundry-spring-0.8.xsd">

<mongo:repositories base-package="com.nroots.tracker"/>

<context:annotation-config/>

<mongo:db-factory
    id="mongoDbFactory"
    dbname="${mongo.name}"
    host="${mongo.host}"
    port="${mongo.port}"
    username="${mongo.username}"
    password="${mongo.password}" />

<bean class="org.springframework.data.mongodb.core.MongoTemplate" id="mongoTemplate">
    <constructor-arg ref="mongoDbFactory"/>
</bean>
</beans> 
```

删除行：

```
<cloud:mongo-db-factory id="mongoDbFactory"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:03:38.303

我通过首先添加一个 service-name 属性解决了这个异常：

```
<cloud:mongo-db-factory id="mongoDbFactory" service-name="my-service-name"/> 
```

其中“my-service-name”是我在 STS 中为 MongoDB 服务设置的名称。

然后我遇到了一个关于 MongoTemplate 构造函数参数为 null 的异常，我通过将 cloudfoundry-runtime 版本从 0.8.0 更新到 0.8.2 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T13:34:44.680

似乎 Spring 无法实例化绑定到您的 CF mongo 服务的 mongoDbFactory。我假设您的配置类似于以下内容：

```
<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg ref="mongoDbFactory"/>     
    </bean>

    <beans profile="default">
            <mongo:db-factory id="mongoDbFactory" dbname="DB name" host="127.0.0.1" port="27017" username="username" password="changeme"/>
    </beans>

    <beans profile="cloud">
        <cloud:mongo-db-factory id="mongoDbFactory"/>
    </beans> 
```

您的应用程序可以在本地运行吗？

# c# - 将“标签”控件添加到“富文本框”

> ID：12132690
> 
> 赞同：0
> 
> 时间：2012-08-26T18:16:55.347
> 
> 标签：c#, label, richtextbox

我在将`Label`控件添加到`RichTextBox`. 显然，代码中一定有我遗漏的东西。如果有人能指出我的遗漏，我将不胜感激。我知道这两个控件都已创建，但`Label`没有显示在...之上，而是在其*后面*`RichTexBox`创建。

 *```
RichTextBox richBox8;
Label label8;

private void create()
{
    richBox8 = new RichTextBox();
    richBox8.Location = new System.Drawing.Point(957, 95);
    richBox8.Size = new System.Drawing.Size(159, 50);
    richBox8.Name = "richTextBox8";
    Controls.Add(richBox8);

    label8 = new Label();
    label8.Location = new System.Drawing.Point(984, 106);
    label8.Name = "label8";
    label8.Size = new System.Drawing.Size(110, 25);
    label8.Text = ""
    Controls.Add(label8);
    richBox8.Controls.Add(label8);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:33:50.267

一般来说，您所要做的就是为您的标签**添加一个文本值！**您应该注意每个控件的 xy 坐标。

```
RichTextBox richBox8 = null;
Label label8 = null;
private void button1_Click(object sender, EventArgs e)
{
    richBox8 = new RichTextBox();
    richBox8.Location = new System.Drawing.Point(1, 1);
    richBox8.Size = new System.Drawing.Size(300, 200);
    richBox8.Name = "richTextBox8";
    Controls.Add(richBox8);

    label8 = new Label();
    label8.Location = new System.Drawing.Point(5, 5);
    label8.Name = "label8";
    label8.Size = new System.Drawing.Size(110, 25);
    label8.Text = "hello world";  // crucial, if there is no text, you won't see any label!
    richBox8.Controls.Add(label8);
    // adding the label once again to the form.Controls collection is unnecessary
} 
```

而且虽然***可以*** **为控件添加标签`RichTextBox`**，但我认为它不是很有用！A`RichTextBox`可用于*显示*和*格式化文本*：

```
public Form1()
{
    InitializeComponent();
    richTextBox1.Text = "demo text demo text demo text demo text demo text demo text demo text demo text demo text demo text demo text demo text ";
}

private void button1_Click(object sender, EventArgs e)
{
    richTextBox1.Select(10, 20);
    richTextBox1.SelectionColor = Color.Blue;

    richTextBox1.Select(25, 30);
    richTextBox1.SelectionFont = new Font("Verdana", 12);
} 
```*

# iphone - cocos2d 从父空间转换到子空间

> ID：12132691
> 
> 赞同：1
> 
> 时间：2012-08-26T18:17:00.873
> 
> 标签：iphone, cocos2d-iphone, coordinates

我正在使用 cocos2d 开发一个 iphone 应用程序，我在将坐标从父空间转换为子空间时遇到问题。

我有 N 个元素，其中每个元素都有一个位置（0,0 在左上角，而不是在左下角），每个元素都可以有一个父元素。如果元素有父元素，则它的位置在父元素的局部坐标空间中。

例子：

```
Sprite1 at global position(10,10)
Sprite2 at global position(20,20)
   Sprite3 at local position(20,20) and at global position(40,40)
      Sprite4 at local position(30,30) and at global position(70,70) 
```

当我添加一个精灵时，我会像这样计算坐标（没有父级）：

```
CCSprite * sprite = [CCSprite spriteWithFile:image];
CGPoint position =  [[CCDirector sharedDirector] convertToGL: ccp(element.x, element.y);
sprite.position = position; 
```

由于元素坐标空间从左上角开始，我必须设置锚点：

```
sprite.anchor = ccp(0,1) 
```

这适用于没有父元素的元素，但是当我添加一个有父元素的元素（使用上面的代码）时，位置是错误的。我怎样才能正确计算坐标（无需遍历所有父母）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:19:48.867

`CCNode`有方法`convertFromWorldSpace(AR):`and `convertToWorldSpace(AR):`。您可以使用它们先转换为世界坐标，然后再转换回父空间。

# php - codeigniter 中的 URL 路由不起作用

> ID：12132694
> 
> 赞同：1
> 
> 时间：2012-08-26T18:17:16.463
> 
> 标签：php, codeigniter, url-routing

我需要将 var（值为 3 的 int）发送到控制器中的索引函数。
没有问题，除了 url 看起来像这样：

```
tasks/index/3 
```

我希望网址是这样的：

```
tasks/ 
```

我在 routes.php 中试过这个，但是它给出了一个错误，说找不到页面。

```
$route['tasks/index/(:num)'] = 'tasks'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:58:12.010

这是相反的方式。

尝试做：

```
$route['tasks/(:num)'] = 'tasks/index/$1'; 
```

[CI 路由文档](http://codeigniter.com/user_guide/general/routing.html)

# .htaccess - mod 重写 settings.php?id=5 到 xml/5/settings.xml

> ID：12132697
> 
> 赞同：1
> 
> 时间：2012-08-26T18:17:20.403
> 
> 标签：.htaccess, mod-rewrite

我正在尝试加载

```
settings.php?id=5 
```

通过访问

```
xml/5/settings.xml 
```

这是代码，但它不起作用我只是得到一个 404 错误：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^id=([0-9]+)$
RewriteRule ^([a-z_]+)\.php$ /%1/$1.xml [L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:21:03.220

如果您希望您的最终用户进入`xml/5/settings.xml`，您必须*向后*重写。在左侧输入端，您需要匹配输入 URI：

这假设`settings`是一个动态值，在`$2`

```
RewriteEngine On
RewriteRule ^xml/([\d]+)/([a-z]+)\.xml$ $2.php?id=$1 
```

如果`settings`是*静态*值，则对其进行硬编码：

```
RewriteEngine On
RewriteRule ^xml/([\d]+)/settings.xml$ settings.php?id=$1 
```

# firefox - 如何将 AdSense 与我的 Firefox/Chrome 扩展程序一起使用？（反正有吗？）

> ID：12132702
> 
> 赞同：2
> 
> 时间：2012-08-26T18:17:38.730
> 
> 标签：firefox, google-chrome, google-chrome-extension, firefox-addon, adsense

我有一个网站，并在那里展示我的 AdSense 广告。

我还为浏览器游戏开发了一个 Firefox/Chrome 扩展。为了不给我的扩展定价，我想显示一些添加。这意味着我的广告将在我不拥有的域上，而且我不知道 Google 如何验证它们。

我可以将我的广告放在我的网页上并让我的插件用户从 iframe 中看到它们吗？我担心这样做会导致我的帐户被禁止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:31:33.977

这实际上很容易在[AdSense 服务条款中](https://www.google.com/adsense/localized-terms)进行研究。第 5 节（禁止使用）特别指出：

> (vi) 通过或从任何软件应用程序、网站直接或间接访问、启动和/或激活广告、链接、搜索结果或推荐按钮，或**以其他方式将广告**、链接、搜索结果或推荐按钮合并到任何软件应用程序、网站中，或**您的财产以外的**其他方式，并且仅在本协议明确允许的范围内；

这无疑意味着一旦发现这种行为，在您不拥有的网站上展示广告就会导致暂停。换句话说：不，你不能这样做，至少不能长久。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:21:29.093

是的你可以。在我们公司，我们这样做并且没有被禁止，我们使用 div 注入，而不是 iFrame。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T21:03:20.677

您不应该使用`iFrame`，因为[Adsense 不允许这样做](http://www.labnol.org/internet/google-ads-in-iframe/19457/)。

另一个有趣的事情是您可以显示其他网络的广告。`Google Chrome`团队[允许](http://browserfame.com/751/chrome-extension-advertisement)在`WebStore`.

# heroku - 检查 Heroku 传入和传出流量

> ID：12132707
> 
> 赞同：9
> 
> 时间：2012-08-26T18:18:39.710
> 
> 标签：heroku, bandwidth

有什么方法可以检查 Heroku 应用程序消耗了多少 GB 的流量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T04:07:09.140

您可以编写一个日志解析器来计算使用的带宽。这是路由器日志消息的示例

```
2013-03-27T04:02:21+00:00 heroku[router]: at=info method=GET path=/ 
host=somehost.herokuapp.com fwd="1.1.1.1" dyno=web.1 connect=1ms 
service=35ms status=200 bytes=49 
```

用一个部分解析每个路由器线路`"bytes="`并将字节相加。

# javascript - iFrame 不适用于移动版网站

> ID：12132709
> 
> 赞同：2
> 
> 时间：2012-08-26T18:18:46.697
> 
> 标签：javascript, mobile, iframe

所以我有一个网站使用 iFrames 来实现与 StumbleUpon 类似的目的，并且该网站可以在移动设备和桌面设备上运行（或应该运行）。当 iFrame 包含来自 Yahoo! 的内容时，我在移动设备上遇到问题！消息。此内容适用于台式机和 iPad，但在 iPhone 上使用时，框架不显示任何内容。

我相信这个问题是由雅虎引起的！新闻切换到它的移动版本，不知何故弄乱了 iFrame。所以我需要帮助！我尝试使用沙箱参数禁用 JavaScript，但这似乎没有奏效，我尝试了很多技巧来尝试将其保留在网站的桌面版本上，但这似乎不起作用任何一个。

无论是留在桌面版本还是切换到移动版本，我都很好，我只是希望它可以查看。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:33:10.160

也可以从 php 跟踪移动设备，所以我认为 javascript 不会起作用。

您可以在 yahoo url 中找到更深的搜索，也许您会找到一个不会更改为移动版本的 url

或者

在您的服务器上加载页面代码，然后将其显示在 iframe 内（或在 iframe 内打开服务器中执行此操作的页面），但我认为您不应该这样做......

# facebook - Facebook no_feed_story 不工作

> ID：12132710
> 
> 赞同：0
> 
> 时间：2012-08-26T18:18:47.347
> 
> 标签：facebook, facebook-opengraph, facebook-feed, facebook-stream-story

我正在尝试发布到 Facebook，但没有提要故事标志似乎不起作用。我正在尝试的代码是

```
FB.api('/me/marsmsps:review?recipe=https://sultry-brook-4860.herokuapp.com/',
    'post', 
'no_feed_story=1',
function(response) {
       if (!response || response.error) {
          alert('Error occured'+response.error.message);
       } else {
          alert('successful! Action ID: ' + response.id);
       }
    }); 
```

无论我是否设置 no_feed_story 标志，在所有情况下，提要都可以在我的个人资料中使用我的 ID 显示，但在我朋友的 ID 中不可见。我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:13:21.063

尝试 no_feed_story=true。您使用 no_feed_story=1，但 Facebook 预计它是 true 或 false。

# java - 如何编译 LuaJ？

> ID：12132713
> 
> 赞同：1
> 
> 时间：2012-08-26T18:19:00.023
> 
> 标签：java, lua, luaj

我已经下载了 LuaJ，但它不会正确编译。它一直说 import org.apache.bcel.* 在编译期间找不到。我通过结合 core 和 jse 来设置我的工作区。所有导入错误都发生在包 org.luaj.vm2.luajc.JavaBuilder 对此编译问题的任何帮助。我觉得我错过了一个图书馆之类的东西。但我不确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:34:24.283

解决了。从 apache 找到库，虽然所有链接都死了，但我从某个地方找到了一个副本

# asp.net-mvc-3 - 如何传回 actionlink 值 - mvc3

> ID：12132721
> 
> 赞同：1
> 
> 时间：2012-08-26T18:20:03.127
> 
> 标签：asp.net-mvc-3, c#-4.0

我有以下代码`HomeController`；它获取最新日期并根据该日期显示歌曲。

```
public ActionResult Index()
{           
   var topsong = db.TopSongs;
   var topDate = db.TopDates;
   var latestDate = topDate.OrderByDescending(d => d.Date).FirstOrDefault();
   int dateId = topDate.OrderByDescending(d => d.DateId).FirstOrDefault().DateId;
   var topTitles = topsong.Where(s => s.DateId == latestDate.DateId).ToList();

   ViewBag.Message = "Top Songs";                                    
   ViewBag.latestDate = latestDate.Date.ToShortDateString();            

   return View(topTitles);
} 
```

这会进入数据库并选择最新日期——比如 08/25/2012——并显示与该日期对应的所有歌曲。这部分工作正常；现在我想添加一个功能，用户可以从数据库中选择以前的日期或下一个日期，并据此显示歌曲。

我想要做的是在视图中添加上一个和下一个日期按钮。像这样：

```
<h2>Songs Updated On: @ViewBag.latestDate</h2>
@Html.ActionLink("Previous Week's Songs", "Index", new { });
@Html.ActionLink("Next Week's Songs", "Index", new { }); 
```

由于我是 MVC3 的新手，有人可以告诉我如何让上一个和下一个日期出现吗？如果我在视图中计算它们，我如何将它们传递回控制器以显示这些日期的歌曲？

这是示例日期表： DateId Date 1 08/25/2012 2 08/20/2012 3 09/21/2012

**更新代码：**

*这是 HomeController 的代码：*

```
 public ActionResult Index(DateTime? date = null)
        {            
            var topsong = db.TopSongs;
            var topDate = db.TopDates;

            var latestDate = (date.HasValue) ? date.Value : topDate.OrderByDescending(d => d.Date).FirstOrDefault();           

            //var latestDate = topDate.OrderByDescending(d => d.Date).FirstOrDefault();

            int dateId = topDate.OrderByDescending(d => d.DateId).FirstOrDefault().DateId;           
            var topTitles = topsong.Where(s => s.DateId == latestDate.DateId).ToList();

            /////
            ViewBag.NextDate = topDate.Where(d => d.Date > latestDate).OrderBy(d => d.Date).FirstOrDefault();
            ViewBag.PreviousDate = topDate.Where(d => d.Date < latestDate).OrderByDescending(d => d.Date).FirstOrDefault();
            ////////

            ViewBag.Dates = topDate.Select(d => d.Date).Distinct();
            ViewBag.latestDate = latestDate.Date.ToShortDateString();            

            return View(topTitles);
        } 
```

*Index.cshtml 的代码*

```
@model IEnumerable<App.Models.TopSong>
@{
    ViewBag.Title = "Top Songs";
    var songs = ViewBag.songs;
}            
<h1>@ViewBag.Message</h1>

<h2>Song's Updated On: @ViewBag.latestDate</h2>
@Html.ActionLink("Previous Week's Songs", "Index", new { date=@ViewBag.PreviousDate });
@Html.ActionLink("Next Week's Songs", "Index", new { date=@ViewBag.NextDate }); 
```

基本上我只是希望能够使用操作链接转到上一个或下一个日期。我尝试了上面的代码，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:11:16.600

对于第一个问题，答案是创建一个*View Model*。这里的想法是提供视图所需的所有数据。例如：

```
public class ViewModel
{
    public string CurrentDate { get; set; }
    public DateTime NextDate { get; set; }
    public DateTime PreviousDate { get; set; }
    public List<Song> Songs { get; set; }
} 
```

因此，您将根据需要填充它，例如

```
var topDate = db.TopDates;
var model = new ViewModel();
model.Songs = ...
model.CurrentDate = latestDate.Date.ToShortDateString();
model.NextDate = topDate.Where(d => d.Date > latestDate).OrderBy(d => d.Date).FirstOrDefault(d => d.Date);
model.PreviousDate = topDate.Where(d => d.Date < latestDate).OrderByDescending(d => d.Date).FirstOrDefault(d => d.Date); 
```

现在您可以使用模型中的值在 Razor 视图中创建链接：

```
@Html.ActionLink("Previous Week's Songs", "Index", new { date=Model.PreviousDate });
@Html.ActionLink("Next Week's Songs", "Index", new { date=Model.NextDate }); 
```

最后，要处理回发中的链接，请在 Action 方法中添加一个与上面指定的路由值相匹配的参数 ( `date`)。

```
public ActionResult Index(int? date = null)
{
    var latestDate = (date.HasValue) ? date.Value : db.TopDates.OrderByDescending(d => d.Date).FirstOrDefault(d => d.Date);
    // same logic
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:48:00.197

一种方法如下：

一、创建动作方法

```
Public ActionResult Songs(string val)
{
   if (val == "Previous")
   {
    // code to get and return previous week songs
   }

   if (val == "Next")
   {
    // code to get and return next week songs
   }

    // By default return either previous/next/current week's songs...
} 
```

其次，修改您的操作链接以匹配如下

```
@Html.ActionLink("Previous Week's songs", "Songs", new { val = "Previous"})

@Html.ActionLink("Next Week's Songs", "Songs", new { val = "Next"}) 
```

**另一种方法：**

另一种方法是为每个方法创建一个操作方法，这意味着您可以有一个操作方法只返回上一周的歌曲，而另一个操作方法返回下周的歌曲。这意味着您不需要传递任何参数，并且您的 actionlink 代码将如下所示简单

```
 @Html.ActionLink("Previous Week's songs", "PreviousWeekSongs")

   @Html.ActionLink("Next Week's Songs", "NextWeekSongs") 
```

**更新：**

嘿，您似乎没有任何特定于将模型数据绑定回视图的代码...因此请尝试如下更新您的视图代码

```
 @model IEnumerable<App.Models.TopSong>
@{
    ViewBag.Title = "Top Songs";
    var songs = ViewBag.songs;
}            
<h1>@ViewBag.Message</h1>
// Code to Display Songs
@foreach(var song in model)
{
  <div> 
   <span>@song.Property1</span>
   <span>@song.Property2</span>
   <span>@song.Property3</span>          
  </div>

}

<h2>Song's Updated On: @ViewBag.latestDate</h2>
@Html.ActionLink("Previous Week's Songs", "Index", new { date=@ViewBag.PreviousDate });
@Html.ActionLink("Next Week's Songs", "Index", new { date=@ViewBag.NextDate }); 
```

我希望这可以帮助你...

# c# - 如何将数据集导出到 xls 并保存在服务器硬盘上

> ID：12132722
> 
> 赞同：0
> 
> 时间：2012-08-26T18:20:05.277
> 
> 标签：c#, asp.net, .net, security, download

我使用以下代码将数据集转换为 xls。它工作正常，但会引发错误。（一些格式问题）

**我想在未经用户许可的情况下保存在特定位置创建的 xls 文件。**

```
conn.Open();
SqlDataAdapter getData = new SqlDataAdapter("SELECT * FROM profile", conn);
data.Clear();
getData.Fill(data);
conn.Close();
HttpResponse response = HttpContext.Current.Response;
response.Clear();
response.Charset = "";
response.ContentType = "application/vnd.ms-excel";
response.AddHeader("Content-Disposition", "attachment;filename=\"" +"siv" +"\"");
using (StringWriter sw = new StringWriter())
using (HtmlTextWriter htw = new HtmlTextWriter(sw))
{
    DataGrid dg = new DataGrid();
    dg.DataSource = data.Tables[0];
    dg.DataBind();
    dg.RenderControl(htw);
    response.Write(sw.ToString());
    response.End();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T18:25:40.120

这显然是不可能的，因为这会带来巨大的**安全风险**。您不能将文件拖放到用户硬盘上。

没有不需要用户同意的解决方法。如果有的话，我会很紧张使用网络浏览器......

如果您设法做到这一点，您可能会获得 Google 的 50,000 美元现金奖励，作为其安全奖励计划的一部分。

# excel - 行高自动调整不起作用

> ID：12132726
> 
> 赞同：8
> 
> 时间：2012-08-26T18:21:10.130
> 
> 标签：excel, vba

所以，今天是我糟糕的一天
，我发现 excel 行 AutoFit - 不起作用

```
a = "Please"
b = "Do AutoFit"
range01.Value = a & vbNewLine & b  
range01.EntireRow.AutoFit // First and last line are horizontally cutted 
```

Chr(10) 而不是 vbNewLine - 无济于事
它只有在我没有换行符的情况下才有效：

```
range01.value = a & b
range01.EntireRow.AutoFit  //  works !!!  Thanks to Microsoft ! 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-26T19:54:43.297

确保其中有换行符的单元格已打开“换行文本”。您可以使用 VBA 将其打开，如下所示：

```
Sub test1()
    Dim a As String, b As String
    a = "Please"
    b = "Do AutoFit"
    Range("A1").Value = a & vbNewLine & b
    Range("A1").WrapText = True
    Range("A1").EntireRow.AutoFit
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-27T17:54:09.600

自动调整不适用于合并的单元格。我的猜测是这就是你想要做的。

通过在与合并单元格具有相同宽度的单个单元格上模拟自动调整并设置它为您提供的高度来解决此问题。

像这样的东西：

```
Dim YourString As String, a As String, b As String
Dim TempLoc as Range

a = "Please"
b = "Do AutoFit"
YourString = a & vbNewLine & b
Set TempLoc = range01.offset(0, 10) ' Given the column 10 columns to the right has the exact same witdh as your merged cell.

' Autofit a single cell to get correct height
With TempLoc
       .Value = YourString
       .WrapText = True
       .EntireRow.AutoFit
       .RowHeight = TempLoc.RowHeight
       .ClearContents
End With 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-15T11:40:36.753

I solved an issue with this - I had a row with two merged cells both containing multi-line text with Chr(10) linefeeds - with Wrap set ON (but no lines actually wrap - only the Chr(10)s cause new lines). Autofit wouldn't work due to the merged cells.

The VBA workaround was to use a spare cell on the same row, and fill it with the same number of Chr(10) as found in one (either) of the multi-line cells. Then call AutoFit for that cell now containing the same number of invisible line feeds. **Make sure** the font and size are the same in the spare cell!

```
' make C36 spare cell contain the same number of Chr(10) as D36, using a Repeat function :
' (after counting Chr(10) by comparing the length before and after substituting Chr(10) with "")
Worksheets(1).Range("C36").Value = _
   Application.WorksheetFunction.Rept(Chr(10), _
     Len(Worksheets(1).Range("D36").Value) - Len(Replace(Worksheets(1).Range("D36").Value, Chr(10), "")))
Worksheets(1).Range("C36").Rows.AutoFit 
```

An alternative method for other scenarios could be to use an extra, hidden, worksheet - set a single cell to the same column width as your merged cells, copy the contents over, call autofit (which should work on the unmerged cell), then use the resulting rowheight from that one.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-16T16:58:14.120

你可以这样做：

```
Private Sub Worksheet_Activate()
Worksheets("Sheet1").Range("A:A").EntireRow.AutoFit
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-11T15:12:19.667

一种解决方法是将导致自动调整问题的列的列宽缩小一点，选择要更改的所有行，通过双击行分隔符之一自动调整行高，最后自动调整通过双击列分隔符来获取第一步中的列。如果只有一列或几列始终在其单元格中包含最多的文本，则可能效果最佳。

# c++ - 字符串的第 n 个字符转换为 int

> ID：12132730
> 
> 赞同：6
> 
> 时间：2012-08-26T18:21:39.117
> 
> 标签：c++

如何将字符串的第 n 个字符转换为数字？我有一个表示为字符串的长数字，我想制作一个数组，其中每个字符都是单独的数字。我已经尝试过以下代码：

```
#include <iostream>
#include <string>
#include <sstream>
using namespace std;

int main()
{
    string str ="73167176531330624919225119674426574742355349194934969835203127745063262395783180169848018";
    int ints[1000] = {0};

    for (int i = 0; i < str.size(); i++)
    {
        istringstream ss(str[i]);
        ss >> ints[i];
    }

    cout << ints[9] << endl;

    return 0;
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T18:23:41.087

怎么样：

```
for (int i = 0; i < str.size(); i++)
    if (isdigit(str[i]))
        ints[i] = str[i] - '0'; 
```

* * *

或许：

```
for (string::const_iterator it = str.begin();
     it != str.end(); it++)
         if (isdigit(*it))
             ints[i] = *it - '0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:25:24.693

试试这个：

```
char a[2];
a[1] = '\0';
for (size_t i = 0; i < str.size(); i++) {
    a[0] = str[i];
    ints[i] = atoi(a);
} 
```

# php - 找不到 timezonedb.so

> ID：12132736
> 
> 赞同：3
> 
> 时间：2012-08-26T18:22:45.237
> 
> 标签：php, apache

我今天尝试使用我在互联网上找到的一个新库将 HTML 转换为 PDF，因为最近很明显 wkhtmltopdf 不是一个选项，因为我似乎对我正在使用的网络服务器没有适当的权限。我正在使用库 Htmltofpdf。

当我运行调用库的文件时，我每次都会收到此错误（如果我删除了 require 语句，我将不再收到错误）

我得到的错误是

> [26-Aug-2012 13:11:05] PHP 警告：PHP 启动：无法加载动态库 '/usr/local/lib/php/extensions/no-debug-non-zts-20060613/timezonedb.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20060613/timezonedb.so：无法打开共享对象文件：第 0 行的 Unknown 中没有此类文件或目录

有谁知道我该如何解决这个问题-“幸运的是”我对我的网站的技术支持在印度，除非我为他们拼写出来，否则他们不明白我需要什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T12:59:59.193

我的错误日志中有类似的警告。

我`php.ini`已经有了`timezonedb.os`条目，但是扩展文件夹中缺少库。

**我要求我的提供商解决这个问题，他们做到**了，但他们没有包含库，而是`timezonedb.so`在`php.ini`.

警告从 error.log 中消失了。我猜我的 PHP 版本 5.2.17 不需要这个库

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T18:31:08.177

确保您的库包含在 php.ini 设置中：例如：

```
extension=/path/to/extension/timezonedb.so 
```

您可以将库放入`/usr/local/lib/php/extensions/`，然后在 php.ini 中添加以下行：

```
extension=timezonedb.so 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T12:42:53.417

我的错误日志中有类似的警告 - 在 SLES11-SP2 上。我注释掉了这一行：

```
extension = timezonedb.so 
```

并且警告消失了 `/etc/php5/conf.d/timezonedb.ini` （重启 apache2 后）。

# c++ - 在 VB6 中获取堆栈跟踪

> ID：12132737
> 
> 赞同：3
> 
> 时间：2012-08-26T18:22:55.947
> 
> 标签：c++, vb6, stack-trace

不要[鞭打](https://stackoverflow.com/questions/127645/is-it-possible-to-retrieve-the-call-stack-programmatically-in-vb6)[死](https://stackoverflow.com/questions/3367980/stack-trace-in-vb6) [马](https://stackoverflow.com/questions/1098863/runtime-error-stacktrace-or-location-in-vb6)，但我在 CodePlex 上找到了一个名为[StackWalker](http://stackwalker.codeplex.com/)的项目，它为本地应用程序（C++ 应用程序）提供堆栈跟踪。对现代 C++ 不太了解，这也适用于 VB6 应用程序吗？VB6 函数与 C++ 中的函数有什么不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T19:04:05.297

这首先取决于您如何构建您的 vb6 应用程序。项目 + 属性，编译选项卡。确保选中“编译为本机代码”单选按钮。并打开“创建符号调试信息”选项被选中，这个工具需要一个 PDB 来提供有用的堆栈跟踪。请注意，当您从 IDE 运行代码时，它不会很好地工作，这些代码总是构建为 p-code。

更难的问题是 VB6 虚拟机 msvbvm60.dll 的调试信息。您运行的大多数代码都通过此支持 DLL，即使您构建为本机代码也是如此。Microsoft 符号服务器不再提供所需的 PDB。不知道为什么，可能是因为它真的是一匹死马。

# css - 发送属性作为 mixin 的参数

> ID：12132738
> 
> 赞同：2
> 
> 时间：2012-08-26T18:23:02.017
> 
> 标签：css, less, media-queries, less-mixins

我想打破我所有的媒体查询并将 CSS 属性作为参数传递。

```
.bp1(@css){
    @media (max-width: 959px){
        @css
    }
}

.bp1(width: 186px;); 
```

不幸的是，这不起作用并使 Less 失败:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-07T15:38:15.397

从 Less v1.7.0 开始，可以将[分离的规则集作为参数传递给 mixin](http://lesscss.org/features/#detached-rulesets-feature)。

> **少引用网站：**
> 
> 分离规则集是一组 CSS 属性、嵌套规则集、媒体声明或存储在变量中的任何其他内容。您可以将其包含到规则集或其他结构中，并且其所有属性都将被复制到那里。您也可以将其用作 mixin 参数并将其作为任何其他变量传递。

请注意，构成规则集一部分的属性必须包含在`{}`. 此外，在分离的规则集调用（如 ）之后，括号 ( `()`) 是必须的`@css();`。没有最后的括号，调用将无法工作。

```
.bp1(@css){
    @media (max-width: 959px){
        div{
            @css(); // detached ruleset call
        }
    }
}

.bp1({width: 186px;}); // passing ruleset to mixin 
```

**编译输出：**

```
@media (max-width: 959px) {
    div {
        width: 186px;
    }
} 
```

* * *

或者，可以将规则集分配给一个变量，该变量又可以在 mixin 调用中传递，如下所示。这也会在编译时产生相同的输出。

```
.bp1(@css){
    @media (max-width: 959px){
        div{
            @css(); // detached ruleset call
        }
    }
}

@ruleset: {width: 186px;};
.bp1(@ruleset); 
```

* * *

使用此功能，不仅可以传递一组属性，还可以传递选择器（如下所示）：

```
.bp1(@css){
    @media (max-width: 959px){
        @css(); // detached ruleset call
    }
}

.bp1({
    div{width: 186px;}
    div#header{color: gold;}
}); 
```

**编译输出：**

```
@media (max-width: 959px) {
    div {
        width: 186px;
    }
    div#header {
        color: gold;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:27:48.607

关于 mixins 的 LESS 文档说：“mixins 允许您通过简单地将类名作为其属性之一将类的所有属性嵌入到另一个类中。它就像变量一样，但适用于整个类。mixins 也可以表现得像函数, 并接受参数，如下面的示例所示。”

在 mixin 中，除了 css 属性及其值（由变量声明或表示）之外，您不能拥有任何东西。所以你试图做的事情是无效的。

# methods - 如何检查 Module#initialize？

> ID：12132740
> 
> 赞同：0
> 
> 时间：2012-08-26T18:23:16.667
> 
> 标签：methods, initialization, ruby-1.9.3

我已经定义了一个模块 Vehicle 使得

```
module Vehicle
  def initialize(make, model)
  end

  def start
  end

  def stop
  end
end 
```

我想使用 Module#instance_methods 和 Module#instance_method 来检查 Vehicle 中定义的实例方法

```
Vehicle.instance_methods.each do |method|
  Vehicle.instance_method(method).parameters
end 
```

问题是 Vehicle#instance_methods 只返回 [:start, :stop]。如何检查初始化方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:43:40.033

`initialize`由于它是私有的，因此不会出现在公共实例方法列表中：

```
>> Vehicle.instance_methods
=> ["start", "stop"]
>> Vehicle.private_instance_methods
=> ["initialize"] 
```

所以，你可以做

```
Vehicle.instance_method("initialize").parameters 
```

# c++ - 三元运算符的结果不是右值

> ID：12132747
> 
> 赞同：11
> 
> 时间：2012-08-26T18:23:54.170
> 
> 标签：c++, c++11, rvalue, ternary

如果您使用 C++11 编译器编译此程序，则向量不会移出函数。

```
#include <vector>
using namespace std;
vector<int> create(bool cond) {
    vector<int> a(1);
    vector<int> b(2);

    return cond ? a : b;
}
int main() {
    vector<int> v = create(true);
    return 0;
} 
```

如果您像这样返回实例，它会被移动。

```
if(cond) return a;
else return b; 
```

这是[关于 ideone 的演示](http://ideone.com/nNyXu)。

我用 gcc 4.7.0 和 MSVC10 试过了。两者的行为方式相同。
我猜为什么会发生这种情况：
三元运算符类型是左值，因为它是在执行 return 语句之前评估的。此时 a 和 b 还不是 xvalues（即将到期）。
这个解释正确吗？

这是标准的缺陷吗？
这显然不是预期的行为，在我看来是一个非常常见的情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-26T18:27:32.807

这将解决它

```
return cond ? std::move(a) : std::move(b); 
```

将三元运算符视为一个函数，就像您的代码一样

```
return ternary(cond, a, b); 
```

参数不会被隐式移动，您需要使其显式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-26T18:56:52.773

以下是相关的标准报价：

12.8 第 32 段：

> *在以下情况下允许*复制省略[...]**
> 
>  **   在`return`具有类返回类型的函数的语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作
> *   [当`throw`ing，有条件]
> *   【当来源是临时的，有条件的时候】
> *   [当`catch`按值，有条件时]*

 *第33段：

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。如果重载决议失败，或者如果所选构造函数的第一个参数的类型不是对对象类型的右值引用（可能是 cv 限定的），则再次执行重载决议，将对象视为左值。[*注：*无论是否会发生复制删除，都必须执行此两阶段重载解决方案。它确定如果不执行省略则要调用的构造函数，并且即使调用被省略，所选构造函数也必须是可访问的。-*结束注*]

由于表达式 in`return (cond ? a : b);`不是一个简单的变量名，它不符合复制省略或右值处理的条件。也许有点不幸，但很容易想象一次将示例进一步扩展，直到您对编译器实现的期望感到头疼。

`std::move`当您知道返回值是安全的时，您当然可以通过明确地告诉返回值来解决所有这些问题。*

# self-extracting - 实施自解压档案？

> ID：12132756
> 
> 赞同：2
> 
> 时间：2012-08-26T18:24:34.710
> 
> 标签：self-extracting

我知道我可以使用 7z 或 winrar，但我想自己学习。

我将如何实现自解压存档？我可以使用 C# 或 C++，但让我解决问题。

当我打开 exe 时，我需要某种 GUI 来询问在哪里提取文件。一旦用户说好的，我显然应该提取它们。我已经在 C# winforms 中实现了一个简单的示例，但我的问题是如何将文件的文件名和二进制文件放入 exe 中？

曾几何时，我问[将额外数据添加到 exe 末尾是否安全？](https://stackoverflow.com/questions/11977518/is-it-safe-to-add-extra-data-to-end-of-exe)答案建议如果我只是将数据添加到 exe 的末尾，它可能会被病毒扫描程序拾取。现在很容易将存档的长度写为最后 4 个字节，只需将数据附加到我的通用 exe 中，我相信我的进程可以读取我自己的 exe，所以这可以工作。但这感觉很hacky，我宁愿不要因为我使用这种技术而让人们指责我编写病毒。实现这一点的正确方法是什么？

注意：我检查了自解压标签，很多问题是如何操作自解压而不是如何实现。除了这个问别的东西[自解压自检可执行文件](https://stackoverflow.com/questions/10541801/self-extracting-self-checking-executable)

-edit- 我用 7z 做了两个自解压并比较了它们。它看起来像......它是`7z.sfx`文件，但附加了一个常规的 7z 存档。所以……这样做有什么不对吗？有没有更好的办法？我的目标是 Windows，可以使用 C# 编译器来提供帮助，但我不知道有多少额外的工作或以编程方式可能有多困难，也许将数据添加到 exe 的末尾不是坏事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:10:25.620

有可能的。当我们需要为应用程序分发更新时，我曾经使用过以下技术，但是计算机已配置为最终用户无权更改应用程序文件。该更新应该登录到管理员帐户并更新所需的文件（因此我们遇到了相同的问题：如何将许多文件作为单个可执行文件分发）。

解决方案是 C# 中的文件资源。您需要做的就是：

1.  在 C# 项目中创建一个资源文件（以 .resx 结尾的文件）。
2.  添加“文件”类型的新资源。您可以轻松地将现有文件添加为`byte[]`资源。
3.  在程序中，您可以简单地将资源提取为文件：

```
System.IO.FileStream file = new System.IO.FileStream("C:\\PathToFile",
    System.IO.FileMode.OpenOrCreate);
System.IO.BinaryWriter writer = new System.IO.BinaryWriter(file);
writer.Write(UpdateApplication.Data.DataValue, 0, UpdateApplication.Data.DataValue.Length); 
```

（这里`UpdateApplication.Data`表示二进制资源）。

我们的解决方案缺乏压缩，但我相信这可以通过 C#ZipLib 等库轻松实现。

我希望这个解决方案是病毒扫描程序安全的，因为这种方法会创建完整、有效的可执行文件。

# objective-c - 为什么“表达式不可分配”（UIView.frame.origin）？

> ID：12132757
> 
> 赞同：11
> 
> 时间：2012-08-26T18:24:47.563
> 
> 标签：objective-c, ios

*这个问题不是“我该怎么做”，而是关于 Objective-C 中的某些类属性的“为什么会这样”。*

我知道下面的两个示例是不允许的，并且会导致错误（“表达式不可分配”）：

```
self.myUIView.frame.origin.x = 50;
self.myUIView.frame.origin = CGPointMake(50,50); 
```

并且正确的方法是创建一个新的 CGRect，设置所需的值，然后分配它：

```
CGRect rect = self.myUIView.frame;
rect.origin = CGPointMake(50, 50);
self.myUIView.frame = rect; 
```

我想了解这是为什么。

CGRect 是一个包含两个结构的结构。限制是否与结构的分配方式有关，以防止可能溢出该内存的分配？或者它更像是关于公共和私人财产的约定？

我意识到这似乎是一个小问题/基本问题，但我认为澄清对这些基本事物的模糊/错误理解很重要。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T18:28:20.260

这是因为如果您能够直接更改框架的原点或大小，您将绕过 UIView 的 frame 属性的 setter 方法。由于多种原因，这将是不好的。

UIView 将没有机会收到有关其框架更改的通知。但它必须知道这些更改才能更新它的子视图或重绘自身。

此外，[要使 KVO](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)工作，您必须使用正确的设置器（使用 setFrame: 或点表示法）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-26T18:30:20.350

分配元素的问题`struct`是拥有 的类`struct`将不知道`struct`已更改。当您谈论框架的原点时，这并不好：`UIView`预计会随着原点的变化而移动，但是由于不会通知类更改，因此不会发生移动。

`frame`另一方面，可以检测到设置，因为会调用`UIView`'方法。`setFrame`这是`UIView`可以处理调整大小、重新定位等的代码。

# jquery - 是否可以对 application/json 进行跨域 POST ajax 请求？

> ID：12132760
> 
> 赞同：2
> 
> 时间：2012-08-26T18:25:28.620
> 
> 标签：jquery, http, cross-domain, csrf, cors

我正在测试一些 csrf 的东西，我想知道是否可以使用 POST 跨域 ajax 请求`Content-Type: application/json`

每次我尝试使用 jQuery 执行此操作时：

```
 $.ajax({
    type: "post",
    url: "http://someotherdomain.com/endpoint",
    contentType: "application/json; charset=UTF-8",
    data: {"a": "1"},
    dataType: "json",
    crossDomain: true,
    success: function(data){ alert(data); }, 
    failure: function(data){ alert(data); }
  }); 
```

我总是发送**HTTP OPTIONS**请求而不是**HTTP POSTs**。

注意-我不关心接收数据，我只需要一个单向的帖子。

注意 - 内容类型不能`x-www-form-urlencoded`也不能是 GET 请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T18:54:51.340

标`Content-Type: application/json`头不是一个简单的标头，因此在实际请求之前首先需要一个预检请求。您看到的 HTTP OPTIONS 请求是预检请求。来自 CORS 规范（http://www.w3.org/TR/cors/）：

> 如果标头字段名称是 Accept、Accept-Language 或 Content-Language 的 ASCII 不区分大小写匹配，或者它是 Content-Type 和标头的 ASCII 不区分大小写匹配，则称标头为简单标头字段值媒体类型（不包括参数）是对 application/x-www-form-urlencoded、multipart/form-data 或 text/plain 的不区分大小写的 ASCII 匹配。

为了通过预检请求，服务器需要使用以下标头响应 OPTIONS 请求：

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET,PUT,POST,DELETE
Access-Control-Allow-Headers: Content-Type 
```

一旦浏览器收到此响应，它将发出实际的 HTTP POST 请求。请注意，如果您的请求包含其他自定义标头，则需要将它们包含在 Access-Control-Allow-Headers 响应标头中。您可以在此处了解有关 CORS 预检请求的更多信息：

[http://www.html5rocks.com/en/tutorials/cors/#toc-adding-cors-support-to-the-server](http://www.html5rocks.com/en/tutorials/cors/#toc-adding-cors-support-to-the-server)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T18:31:22.110

如果您的浏览器支持所谓的跨域资源共享 ( [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) )，并且[所有现代浏览器](http://caniuse.com/#search=CORS)现在都支持此功能，则它是可能的。简而言之，服务器应该为您提供`Access-Control-Allow-Origin`标头。

此外，正如您所说，您不必费心获取任何信息作为回复，您为什么不提交一些表格？

# java - Android围绕其中心旋转位图

> ID：12132762
> 
> 赞同：3
> 
> 时间：2012-08-26T18:25:41.330
> 
> 标签：java, android, 3d, android-canvas

我正在尝试使用画布和矩阵围绕 X、Y 和 Z 轴旋转常规位图。我可以使用 OpenGL，但我认为实现如此简单的效果会有点过头了，因为我很确定仅使用画布、位图和矩阵就可以做到这一点。

我尝试使用相机及其 rotateX、rotateY 和 rotateZ 方法，然后将该矩阵应用于画布，但由于某种原因，我可以让它围绕它的中心旋转位图！

我找不到改变旋转原点的方法，所以我决定平移相机，使其位于位图的中心，然后再将其翻译回来，但无论我尝试什么，位图都不会被其中心平移...![图片](../Images/e8e2aa1ed389a8e14e3da4bace592db7.png)

```
 camera.save();

            camera.translate(-(team.getWidth() / 2), (team.getHeight() / 2), 0f);

            rotateY += 1f;

            camera.rotateY(rotateY);

            camera.translate((team.getWidth() / 2), -(team.getHeight() / 2), 0f);

            camera.applyToCanvas(canvas);

            camera.restore();

            /* code that has nothing to do with this..(fading) */

            canvas.drawBitmap(team, null, rect, paint); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:45:24.310

Rotate3DAnimation 是您的答案。这是[课程](http://source-android.frandroid.com/development/samples/ApiDemos/src/com/example/android/apis/animation/Rotate3dAnimation.java)

这里也是教程： 3D翻转[教程](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)

# c - 指针值是什么意思？

> ID：12132764
> 
> 赞同：6
> 
> 时间：2012-08-26T18:25:51.930
> 
> 标签：c, pointers

考虑下面非常简单的代码：

```
#include <stdio.h>
#include <stdlib.h>
int main() {

    int* a = (int*) malloc(10 * sizeof(int));
    printf("a = %p, a+1 = %p", a, a+1);
    return 0;
} 
```

输出是这样的：

```
a = 0x127f190, a+1 = 0x127f194 
```

由于 an 的大小`int`是 4 个字节，我从上面的结果中假设指针值是我的 RAM 内存上一个**字节的索引。**因此`a+1`实际上增加了`a`by `sizeof(int) = 4`(bytes) 的值。那是对的吗？

如果是，那么为什么我要从我的程序中获取 32 位内存地址？这台机器是 64 位的，运行 64 位版本的 Ubuntu。如何让程序打印完整的 64 位地址？我必须用特殊标志编译它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T18:30:57.303

你的指针是正确的。内存传统上是按字节组织和寻址的，指针指向它们所指向的任何内容的第一个字节（编辑：它们不必这样做，但在通常的平台和编译器上它们会这样做）。

您没有看到“64 位”指针仅仅是因为输出去除了前导 0 :-) 如果您执行 sizeof(a)，您可能会在 32 位系统上获得“4”，而“8”在 64 位系统上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T19:08:45.313

> 我的 RAM 内存中一个字节的索引

这对于大多数目的来说已经足够接近了，但并不完全准确。它是进程地址空间中一个字节的索引。虚拟地址与物理 RAM 没有直接关系，有一种叫做“虚拟内存管理器”的东西，它负责跟踪每个进程中的哪些虚拟地址引用了哪些物理 RAM（以及 RAM 以外的东西）。

通常你可以忘记这一点，而只是将虚拟地址空间视为 RAM（或将其视为抽象的“内存”）。但是不同进程中的同一个虚拟地址可以引用不同的物理内存，或者不同进程中不同的虚拟地址可以引用同一个内存。或者同一进程中的相同虚拟地址可能在不同时间引用不同的物理内存，如果操作系统注意到该页面有一段时间没有使用，则将其交换到磁盘，然后在再次使用时将其返回内存。因此，它并不是 RAM 本身的真正“地址”，它只是操作系统为*您的进程*提供的地址，用于引用一些 RAM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:12:00.097

您看到增加 4 的原因是因为您正在为整数分配内存，整数长度固定为 4 个字节（在 Intel Linux gcc 中）——无论您编译的是 32 位还是 64 位代码。如前所述，您获得的指针指的是虚拟内存地址，而不是物理内存。

如果将 int 更改为 long，您将看到 32 位代码增加 4 个字节，而 64 位代码增加 8 个字节。

此外，如果您查看`sizeof(void *)`它会告诉您指针是 32 位还是 64 位。如果您的指针是 64 位的，那么您将得到 64 位的指针，并使用 %p 打印。

我编辑了您的程序以在我的 Ubuntu 副本上运行，并添加：

```
printf("Size of pointer = %d\n", (int)sizeof(void *)); 
```

这是输出：

```
a = 0x2067010, a+1 = 0x2067014
Size of pointer = 8 
```

所以指针确实是64位的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T18:29:35.407

当您编写 时`int* a = (int*) malloc(10 * sizeof(int));`，您正在为一个包含十个元素的数组分配内存。这相当于`int a[10];`并且 `a = 0x127f190`是第一个元素的地址`a[0]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T18:30:47.127

对不起，没有给你一个确切的答案。但它来了：

寻找`Pointer Arithmetic`，你会找到你要找的一切。

即使您的系统运行 x64，大多数编译器都默认使用 x86，除非您特别声明为 x64 编译。因此，在编译器文档中搜索 x64 标志和相关选项。

# linq - Linq 实体框架..导航到链接值

> ID：12132766
> 
> 赞同：-1
> 
> 时间：2012-08-26T18:26:05.990
> 
> 标签：linq, entity-framework

在实体框架中，我在数据库 AppType 和 Application 中有 2 个表。AppType 有一个主键 TypeID 和 TypeName。应用程序表具有来自 AppType 表的 AppID 主键、AppName、TypeID 外键。

我有绑定到 AppType 类型名称的下拉列表。现在我想根据下拉列表的选定类型名称返回应用程序名称。我正在使用带有实体框架的 Linq。

提供代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:22:32.300

假设您已经在下拉选择列表 (SelectedAppType) 中加载了所有应用程序类型，则此代码应该可以工作。基本思想是使用 AJAX 查询数据，并在每次选择不同的应用程序类型时更改应用程序下拉列表的内容。

在视图中：

```
 <script type="text/javascript">
    $(function () {
        $("#SelectedAppType").change(function () {
            var val = $(this).val();
            var subItems="";
            $.getJSON("@Url.Action("GetApplications","yourController")", {id:val} ,function (data) {
              $.each(data,function(index,item){
                subItems+="<option value='"+item.AppId+"'>"+item.AppName+"</option>"
              });
              $("#SelectApplication").html(subItems);

            });
        });   

    });
</script> 
```

通过 ApptypeId 获取应用程序并返回 JSON 以查看的控制器操作。

```
 [HttpPost]
    public JsonResult GetApplications(int appTypeId)
    {
        IList<Application> result = db.Applications.Where(a => a.AppTypeId == appTypeId).ToList();

        return Json(result);

    } 
```

# java - 运行时填充的类枚举类

> ID：12132767
> 
> 赞同：4
> 
> 时间：2012-08-26T18:26:10.857
> 
> 标签：java

我有很多对象使用很少的类（意味着元素视觉分类，如 html+css）。类在编译时是未知的，它们在条件下被多次使用。

为了提高性能，我有一个解决方案：

```
public class ElementClass {

    private static final Map<String, ElementClass> classes = new HashMap<>();

    public final String name;
    public final String lowerName;

    public ElementClass(String name, String lowerName) {
        this.name = name;
        this.lowerName = lowerName;
    }

    public static ElementClass get(String name) {
        String lower = name.toLowerCase();
        ElementClass c = classes.get(lower);
        if (c == null) {
            c = new ElementClass(name, lower);
            classes.put(lower, c);
        }
        return c;
    }
} 
```

与变量比较相比，该方法`get`的使用非常少。`ElementClass`它在解析配置和一些`static`变量。我不确定这是否是最好的方法，因为我是 Java 初学者。

的示例用法`ElementClass`：

```
// contains element styles based on it's class
Map<ElementClass,ElementStyle> styles;

void exampleFunction() {
    ElementClass c = ElementClass.get("special");
    for( Element e : elements ) {
        if( e.cls == c ) doSomethingSpecial();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:29:49.090

这将是缓存的教科书实现。如果没有很多 ElementClasses 并且你的程序是单线程的，这就足够了。

我认为没有必要将小写名称保留在`ElementClass`. 将其用作地图键就足够了。我还假设`ElementClass`您的项目中还有更多内容，因为现在它只包含一个名称。

# 更新

澄清后很明显，您确实只打算使用`String name`. 在这种情况下，最好让每个`Element`只包含它的小写名称，但*interned*：

```
public Element(String name) {
  this.name = name.toLowerCase().intern();
} 
```

然后您可以比较`element.name == "special"`并保证匹配任何等于“特殊”的名称。

# xcode - 可可“标签视图”控件？（初学者）

> ID：12132768
> 
> 赞同：0
> 
> 时间：2012-08-26T18:26:27.890
> 
> 标签：xcode, macos, cocoa

我正在寻找“带有图标的选项卡视图”控件，如下所示。它是标准控件还是我如何获得它？我在 Interface Builder 中没有找到它。

[![](../Images/dab12ecc1bc852a71d17218e38a08349.png)](https://i.stack.imgur.com/BBXmC.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:57:33.793

它本身不是一个标签视图，而是一个被配置为像一个一样工作的工具栏。

# sql-server-2008 - 如何从 sqlserver 获取唯一值

> ID：12132770
> 
> 赞同：0
> 
> 时间：2012-08-26T18:26:29.700
> 
> 标签：sql-server-2008, locking

我有一个预先存在的 sqlserver 表。在其他字段中，它有一个称为 ID 的标识列，它也是一个主键，还有一个 RecordNumber 列，它是一个必填字段。RecordNumber 列中的 int 值必须是唯一的。所以在插入一行之前，我得到了 ID 列的最大值，将其加 1，然后插入 RecordNumber 字段 = ID + 1 的行。问题是当两个用户尝试同时保存时，他们可能获取相同的 ID 值，因此将在 RecordNumber 字段中保存相同的值。请让我知道如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:29:49.183

最简单和最有效的方法是将该列定义为 * *auto increment **

参考

[http://www.w3schools.com/sql/sql_autoincrement.asp](http://www.w3schools.com/sql/sql_autoincrement.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:58:39.927

## 备选方案#1 - 自动增加字段

```
CREATE TABLE SampleTable
(
    P_Id int NOT NULL Identity(1,1),
    FirstName varchar(255),
    PRIMARY KEY (P_Id)
) 
```

## 备选方案 #2 - SequentialID 作为默认约束

```
CREATE TABLE SampleTable
(
    P_Id uniqueidentifier NOT NULL,
    FirstName varchar(255),
    PRIMARY KEY (P_Id)
)
ALTER TABLE [dbo].[SampleTable] 
ADD CONSTRAINT [DF_SampleTable_P_Id]  
DEFAULT newsequentialid() FOR [P_Id] 
```

## 备选方案#3 - NewID 作为默认约束

```
CREATE TABLE SampleTable
(
    P_Id Varchar(100) NOT NULL,
    FirstName varchar(255),
    PRIMARY KEY (P_Id)
)
ALTER TABLE [dbo].[SampleTable] 
ADD  CONSTRAINT [DF_SampleTable_P_Id]  
DEFAULT (newid()) FOR [P_Id] 
```

## 在多用户交易的情况下，应使用推荐的示例存储过程

```
BEGIN TRY
    SET NOCOUNT ON
    SET XACT_ABORT ON
    Begin TRAN
        --Your Code
    COMMIT TRAN
END TRY

BEGIN CATCH
    ROLLBACK TRAN
END CATCH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:28:54.550

您可以使用事务概念，使用提交和回滚操作。

MSDN 上非常有趣的链接：http: [//msdn.microsoft.com/en-gb/library/ms190295.aspx](http://msdn.microsoft.com/en-gb/library/ms190295.aspx)

# php - 访问数组中对象的值

> ID：12132773
> 
> 赞同：1
> 
> 时间：2012-08-26T18:26:43.647
> 
> 标签：php, oop

考虑以下对象数组：

```
class Person {
    public $name;
    public $occupation;
    public function __construct($n, $o){
        $this->name = $n;
        $this->occupation = $o;
    }
}

$people = array(
    new Person("John",   "singer"),
    new Person("Paul",   "guitar"),
    new Person("George", "bass"),
    new Person("Ringo",  "drums")
); 
```

有什么快速访问对象的方法吗？如果另一种数据类型可以使访问更容易，我不介意将它们存储在不同的数据类型（而不是数组）中。

访问对象的示例：我现在想将“保罗”对象更改为歌手的职业。这是当前的解决方案：

```
foreach ( $people as &$p ) {
        if ( $p->name=="Paul" )
                $p->occupation="singer";
} 
```

或者，我可能需要基于不同的属性进行访问：让我们将所有歌手的名字更改为 Yoko：

```
foreach ( $people as &$p ) {
        if ( $p->occupation=="singer" )
                $p->="Yoko";
} 
```

另一个访问对象的例子，这次是为了得到Ringo的占用：

```
$ringosOccupation="";
foreach ( $people as $p ) {
        if ( $p->name=="Ringo" )
                $ringosOccupation = $p->occupation;
} 
```

我想我可以编写一个 People 类，将每个 Person 对象存储在一个内部数组中，并提供更改或读取占用的函数，但是如果 PHP 有任何更聪明的构建，我很想知道。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:29:43.083

为什么不只是将元素的键设置为名称？

```
$people = array(
    'john'   => new Person("John",   "singer"),
    'paul'   => new Person("Paul",   "guitar"),
    'george' => new Person("George", "bass"),
    'ringo'  => new Person("Ringo",  "drums"),
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T18:29:58.927

只需使用名称索引您的数组：

```
$people = array(
    "John" => new Person("John",   "singer"),
    "Paul" => new Person("Paul",   "guitar"),
    "George" => new Person("George", "bass"),
    "Ringo" => new Person("Ringo",  "drums")
);

// Paul is the new drummer:
$people["Paul"]->occupation = "drums"; 
```

它会产生一些冗余，但可以肯定的是，这种冗余不会比在每次需要修改某些内容时循环遍历所有这些以找到所需的那个冗余更多的内存或计算密集型。

### 更新：

更新问题后，很明显名称可能是非唯一的或访问所需的其他属性。在这种情况下，如果您必须经常使用数据库来存储对象状态，您可能会更好。如果它不能被唯一索引，你就无法逃避需要遍历数组。在数据库中进行这些更改非常容易，但是您需要一直重建对象。

因此，如果您的数组不是太大，请像以前一样继续循环。如果它满足您的性能需求，这是一个不错的方法。如果您有很多这些要修改，并且经常修改，我建议将它们存储在数据库中，并仅在您需要读出一个对象时才构建对象。然后你可以这样做：

```
UPDATE people SET name = 'Yoko' WHERE occupation = 'singer' 
```

# mysql - 在 JSP 中不支持其他英语语言进行登录

> ID：12132774
> 
> 赞同：2
> 
> 时间：2012-08-26T18:27:01.477
> 
> 标签：mysql, jsp, tomcat, utf-8, character-encoding

我正在使用 Netbeans IDE 开发一个用于登录的 JSP 项目。登录 ID 是印地语，出现在我的 MySQL 数据库中，显示用户 ID 的印地语字体。

当我在 Netbeans 中运行这个项目时，它工作正常并且我可以成功登录，但是当我在 Tomcat 管理器中部署 WAR 后尝试登录时，我无法登录。

我需要将 UTF-8 添加到 web.xml 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:28:32.767

您很可能没有使用 UTF-8 处理 POST 请求正文。您可以通过在请求正文被触摸*之前*添加以下行来强制执行此操作（即*在*第一次调用 a之前`request.getParameter()`，依此类推）：

```
request.setCharacterEncoding("UTF-8"); 
```

为了防止在所有 servlet 上重复/复制粘贴这一行，一种常见的方法是创建一个[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)来完成这项工作。然后，您可以将其映射到 URL 模式上，`/*`以将其应用于所有传入请求。

我认为您已经正确地完成了它，但是您还应该确保您的 JSP 也使用 UTF-8 发出响应，`<%@page pageEncoding="UTF-8"%>`或者至少是一个 适用于*所有*JSP的`<jsp-config>`条目。`web.xml`

 *### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)*

# java - 使用 DOM 迭代包含一些具有相同名称的标签的 NodeList

> ID：12132776
> 
> 赞同：6
> 
> 时间：2012-08-26T18:27:26.253
> 
> 标签：java, xml, dom, tags, loops

我正在尝试使用 Java 中的 DOM 读取 XML

```
<?xml version="1.0"?>
<record>
<user>
    <name>Leo</name>
    <email>****@****.com</email>
        <food-list>
            <food>Hamburgers</food>
            <food>Fish</food>
        </food-list>
</user>
</record> 
```

我目前的解决方案是

```
 for (int userNumber = 0; userNumber < masterList.getLength(); userNumber++) {

           Node singleUserEntry = masterList.item(userNumber);
           if (singleUserEntry.getNodeType() == Node.ELEMENT_NODE) {

              org.w3c.dom.Element userEntryElement = (org.w3c.dom.Element) singleUserEntry;

              System.out.println("name : " + getTagValue("name", userEntryElement));
              System.out.println("email : " +getTagValue("email", userEntryElement));
              NodeList foodList = userEntryElement.getElementsByTagName("food-list").item(0).getChildNodes();
              for(int i = 0; i < foodList.getLength(); i++){
                  Node foodNode = foodList.item(i);
                  System.out.println("food : " + foodNode.getNodeValue());
              }

private static String getTagValue(String sTag, org.w3c.dom.Element eElement) {
     NodeList nlList =  eElement.getElementsByTagName(sTag).item(0).getChildNodes();
     Node nValue = (Node) nlList.item(0);
     return nValue.getNodeValue(); 
```

现在的输出是

```
name : Leo 
email : ******@*****.com
food :          
food : null
food :          
food : null
food : 
```

这让我很困惑。你能告诉我哪里错了吗？食物标签的数量不是预先定义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T18:55:48.690

```
((Node) foodNode.getChildNodes().item(0)).getNodeValue() 
```

请注意，您可以清楚地看到，在 Java 中处理 DOM API 非常痛苦。你看过[JDOM](http://java-source.net/open-source/xml-parsers/jdom)或[dom4j](http://dom4j.sourceforge.net/)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:11:50.557

为了获取元素的子元素，我创建了一个替换 NodeList 的类：

[ElementList 作为 NodeList 的替代品](http://www.jroller.com/agoubard/entry/elementlist_as_replacement_for_nodelist)

请注意，代码是公共领域的。

```
/*
 * The code of this file is in public domain.
 */
package org.xins.common.xml;

import Java.util.LinkedList;
import org.w3c.dom.Element;
import org.w3c.dom.Node;

import org.xins.common.text.ParseException;

/**
 * An ElementList is an NodeList with the following improvements:
*

    Implements List which make it iterable with for each loop *
    Only includes the direct child of the element *
    Only includes the elements *
    By default includes all direct child elements *
    Preserves the order of the child elements *
    Includes a method to get the sub element when unique * 

*
 * @author Anthony Goubard
*
 * @since XINS 3.0
 */
public class ElementList extends LinkedList {

   /**
    * The local name of the parent element.
    */
   private String parentName;

   /**
    * The local name of the child elements or * for all elements
    */
   private String childName;

   /**
    * Creates a list with all direct child element of the given element.
    *
    * @param element
    *    the parent element, cannot be null.
    */
   public ElementList(Element element) {
      this(element, "*");
   }

   /**
    * Creates a list with all direct child element with a specific local name of the given element.
    *
    * @param element
    *    the parent element, cannot be null.
    * @param childName
    *    the local name of the direct child elements that should be added to the list, cannot be null.
    */
   public ElementList(Element element, String childName) {
      parentName = element.getTagName();
      this.childName = childName;
      Node child = element.getFirstChild();
      while (child != null) {
         String newChildName = child.getLocalName();
         if (newChildName == null) {
            newChildName = child.getNodeName();
         }
         if (child.getNodeType() == Node.ELEMENT_NODE &&
                 (childName.endsWith("*") || childName.equals(newChildName))) {
            add((Element) child);
         }
         child = child.getNextSibling();
      }
   }

   /**
    * Gets the unique child of this list.
    *
    * @return
    *    the sub-element of this element list, never null.
    *
    * @throws ParseException
    *    if no child with the specified name was found,
    *    or if more than one child with the specified name was found.
    */
   public Element getUniqueChildElement() throws ParseException {
      if (isEmpty()) {
         throw new ParseException("No \"" + childName + "\" child found in the \"" + parentName + "\" element.");
      } else if (size() > 1) {
         throw new ParseException("More than one \"" + childName + "\" children found in the \"" + parentName + "\" element.");
      }
      return get(0);
   }

   /**
    * Gets the first child of this element.
    *
    * @return
    *    the sub-element of this element, or null if no element is found.
    */
   public Element getFirstChildElement() {
      if (isEmpty()) {
         return null;
      }
      return get(0);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T07:10:37.900

您可以创建自己的[NodeList](http://www.gwtproject.org/javadoc/latest/com/google/gwt/dom/client/NodeList.html)类并实现[Iterable](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)。

```
public class NodeList<T extends Node> extends JavaScriptObject implements Iterable<T> {

  protected NodeList() {
  }

  public final native T getItem(int index) /*-{
    return this[index];
  }-*/;

  public final native int getLength() /*-{
    return this.length;
  }-*/;

  @Override
  final public Iterator<T> iterator() {
    return new NodeIterator<T>(this);
  }
}

public class NodeIterator<T extends Node> implements Iterator<T> {
  private int cursor = 0;
  private NodeList<T> nodeList;

  public NodeIterator(NodeList<T> nodeList) {
    this.nodeList = nodeList;
  }

  @Override
  public boolean hasNext() {
    return cursor < nodeList.getLength();
  }

  @Override
  public T next() {
    if (hasNext()) {
      return nodeList.getItem(cursor++);
    }
    throw new NoSuchElementException();
  }

  @Override
  public void remove() {
    throw new UnsupportedOperationException();
  }
} 
```

**注意：** NodeIterator 需要在单独的文件中。

# oracle-apex - APEX 中非常简单的研究工具

> ID：12132778
> 
> 赞同：0
> 
> 时间：2012-08-26T18:27:50.293
> 
> 标签：oracle-apex

我正在尝试在 Apex 中做一个非常简单的“研究”工具。

到目前为止我所做的是

1.  创建了一个文本框
2.  创建了一个带有属性的按钮/当输入按下时总是提交页面/
3.  在报告页面中编写了此查询 - 源 - 源区域

-

```
"select NO, TITRE_CONFER, NO_CONFCIER, NO_FILM FROM S4_CON_VRAI
where titre_confer like '%' || :px_2 || '%'" 
```

这几乎是一张桌子，上面有由电影或人教授的会议。我正在寻找过滤会议的标题。px_2 是我的文本字段。因此，如果您输入任何字母，它应该使用正确的标题进行过滤。问题是每当我点击 GO 时，什么都没有发生。他仍然向我展示了整个清单。

![](../Images/0905c057674315310661a1dd22ff69c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:47:01.820

我写的步骤和查询是 100% 功能的。

实际的问题是我写了：px_2，但它是：p2_x。

# spring - servlet spring-ws 的 Spring Web 服务 Servlet.init() 抛出异常

> ID：12132781
> 
> 赞同：0
> 
> 时间：2012-08-26T18:28:36.523
> 
> 标签：spring, service, web

我正在尝试学习 Spring Web 服务，我找到了这个教程：http: [//jeromebulanadi.wordpress.com/2010/02/25/basic-spring-web-service-tutorial-from-contract-to-security/#comment -302](http://jeromebulanadi.wordpress.com/2010/02/25/basic-spring-web-service-tutorial-from-contract-to-security/#comment-302)

我在eclipse中导入了项目prerson，添加了jar文件，但是当我运行项目并输入：

```
http://localhost:8080/person/Person.wsdl 
```

我收到了这个错误：

```
javax.servlet.ServletException: Servlet.init() for servlet spring-ws threw exception
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
java.lang.Thread.run(Thread.java:662)
root cause
org.springframework.beans.factory.BeanCreationException: Error creating bean with name ‘Person’ defined in ServletContext resource [/WEB-INF/spring-ws-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/apache/xml/serializer/TreeWalker 
```

你能帮我么 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:32:53.163

使用`xalan-2.7.0.jar`. 它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T19:38:07.327

```
java.lang.NoClassDefFoundError: org/apache/xml/serializer/TreeWalker 
```

添加[`xalan-2.7.1.jar`](http://repo1.maven.org/maven2/xalan/xalan/2.7.1/xalan-2.7.1.jar)到您的 CLASSPATH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:46:32.317

我找到了解决这个问题的方法，只是将 serializer.jar 添加到我的类路径中，现在它正在工作，看起来 xalan-2.7.1.jar 缺少 TreeWalker。

# wpf - WPF 4 中的可视状态管理器可以换出控件模板/样式吗？

> ID：12132783
> 
> 赞同：1
> 
> 时间：2012-08-26T18:29:06.027
> 
> 标签：wpf, .net-4.0, visualstatemanager

我似乎无法为此找到明确的答案，所以我认为它可能会帮助其他只想问这个问题的人。VSM 可以用来交换模板吗？

例如，如果我有一个带有内容演示者的用户控件，我可以使用用户控件的 VSM 在两个不同的内容演示者模板之间移动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T23:35:26.480

事实证明，这是使用 VSM 的错误方式。这个想法是在一个模板中定义所有的状态。然后，您可以根据 VSM 状态移动、折叠或隐藏模板的各个部分。这样做的好处是您不需要多个模板，一个模板可以独立用于 ViewModel 的所有各种状态。

TL;DR 为 VSM 使用一个模板，在此模板中定义所有状态，然后使用 GoToState 隐藏或显示各个部分。

# php - htaccess 将获取变量更改为 mysql 用户名数据库

> ID：12132785
> 
> 赞同：1
> 
> 时间：2012-08-26T18:29:12.567
> 
> 标签：php, database, .htaccess, url

我想知道是否应该使用 .htaccess 将 get 变量更改为数据库中的值（用户名）。

所以如果有

```
http://www.url.com/user.php?u=1 
```

你怎么把它转换成

```
http://www.url.com/andrewliu 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:33:44.267

您需要将您的更改`user.php`为使用用户名而不是用户 ID。然后你可以使用类似的东西：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^/?([a-z0-9_-]+)/?$ /user.php?u=$1 [L] 
```

这通过`u`查询字符串参数传递用户名，本质上是：`/user.php?u=andrewliu`

否则 htaccess 和 mod_rewrite 无法知道 user_id 和 username 之间的映射是什么。或者，您可以编写数据库脚本并使用[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)为您创建映射：

```
RewriteMap usermap prg:/path/to/userscript 
```

并在您的 htaccess 中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^/?([a-z0-9_-]+)/?$ /user.php?u=${usermap:$1} [L] 
```

最后一个选项，如果您只有 5 个用户（或少量用户），您可以进行显式重写：

```
RewriteEngine On
RewriteRule ^/?andrewliu$ /user.php?u=1 [L]
RewriteRule ^/?anotheruser$ /user.php?u=2 [L]
RewriteRule ^/?foousername$ /user.php?u=3 [L] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T18:37:39.617

您需要使用 Mod-ReWrite。你可以在你的 htaccess 文件中使用它，但是如果你可以访问你的 httpd.conf 文件，它会被证明在那里更快。

理想情况下，您会在 htaccess 文件中使用 ?u=1 并使用它来查找名称并将名称附加到末尾。否则，您将不得不搜索用户名，并且可能会出现拼写错误等。

```
RewriteRule ^/([0-9]+)/.*$ /user.php?u=$1 [L] 
```

Stackoverflow 就是这样做的，尝试在没有 url 中的数字的情况下访问此页面，您将得到一个 404 页面未找到。输入正确的数字，您在正斜杠后输入的任何其他内容都将换成正确的单词！这样方便多了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:33:10.707

在 php 中使用 $GET 来获取 'u' 的值

然后使用您的逻辑将其转换为名称。

现在只需使用重定向功能转到该 URL

# python - 在 Python 解释器中导入 VTK

> ID：12132789
> 
> 赞同：4
> 
> 时间：2012-08-26T18:29:44.820
> 
> 标签：python, vtk

**目标**：尝试在 Python 解释器中使用 VTK 库。

**我做了什么**：我已经使用 CMake 安装了 VTK，并启用了选项 VTK_WRAP_PYTHON 和 Shared_Library，并在 Visual Studio 中构建了 VTK，它已成功完成所有构建。然后我制作了 Python_Path。

**问题**：当我尝试将 vtk 库导入 python 时，我收到以下错误消息：

```
>>> import vtk

Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import vtk
  File "...\VTK\VTKvisual\Wrapping\Python\vtk\__init__.py", line 42, in <module>
    from vtkFilteringPython import *
ImportError: No module named vtkFilteringPython 
```

任何想法为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:12:27.160

看起来您已将 VTK 包目录的位置添加到 PYTHONPATH 中，其中包含 .py 文件，例如“filtering.py”和“vtkFilteringPython.pyd”。

但是，现在您需要将此目录以及**包含****vtkFilteringPythonD.dll**和其他 DLL 的目录添加到您的 PATH 中。该目录的位置取决于您是刚刚运行构建还是安装目标。通常它位于“VTK\bin”或“VTK\bin\BUILDTARGET”的某个地方，其中 BUILDTARGET 是例如 Debug 或 Release。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T02:46:03.477

尝试运行 sudo apt-get install python-vtk

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-16T06:23:39.040

如果你现在只使用 Python 包装器，你可以从 PyPI 安装它。只需这样做`pip install vtk`，您将获得当前版本（现在是 8.1）。

看[这里](http://prabhuramachandran.blogspot.in/2018/01/vtk-810-wheels-for-all-platforms-on-pypi.html)的公告。**

# javascript - 菜单性能问题

> ID：12132794
> 
> 赞同：0
> 
> 时间：2012-08-26T18:30:18.303
> 
> 标签：javascript, jquery, html

我有这个 HTML 代码：

```
<ul class="menu">
    <li>Home <span class="icon home"></span><div class="clear"></div></li>
    <li class="sub">Projects <span class="icon project"></span>
        <div class="clear"></div>
        <ul class="sub-menu">
            <li>Mfrsht.com</li>
            <li>Mawsuaty.com</li>
            <li>Dzlng.com</li>
            <li>Money(Ctrl)</li>
        </ul>
    </li>
    <li>Ideas <span class="icon idea"></span><div class="clear"></div></li>
    <li>Services <span class="icon service"></span><div class="clear"></div></li>
    <li>About us <span class="icon about"></span><div class="clear"></div></li>
    <li>Contact <span class="icon contact"></span><div class="clear"></div></li>
</ul> 
```

和这个Javascript代码：

```
$(".menu > li").not(".menu > li.sub").css( {backgroundPosition: "0px 0px", height: "30px"} )
        .mouseover(function(){
            $(this).stop().animate({backgroundPosition:"(-167px 0px)", height: "36px"}, {duration:500})     
            })      
        .mouseout(function(){           
            $(this).stop().animate({backgroundPosition:"(0px 0px)", height: "30px"}, {duration:200, complete:function(){                $(this).css({backgroundPosition: "0px 0px"})            
            }})     
})

$(".menu > li.sub").css( {backgroundPosition: "0px 0px"} )
        .mouseover(function(){
            $(this).stop().animate({backgroundPosition:"(-167px 0px)"}, {duration:500}) 
            })      
        .mouseout(function(){           
            $(this).stop().animate({backgroundPosition:"(0px 0px)"}, {duration:200, complete:function(){                $(this).css({backgroundPosition: "0px 0px"})        
            }})     
})

$(".sub").hover(function() {
            $(this).animate({height: "150px"}, "slow", "", function () {
                $(this).children("ul.sub-menu").slideDown("slow");  
                });

    }, function() {
        $(this).animate({height: "30px"}, "slow");
        $(this).children("ul.sub-menu").slideUp("slow");    
        }); 
```

菜单运行良好，但有时我发现它滞后或有些迟到，所以我想改进它并让它变得更好。

注意：我正在使用背景位置插件。

[演示](http://www.shkeer.info/shkeer/)

有什么建议么？还是您认为这样好，无需修改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T18:37:41.643

需要考虑的几件事：

1.  使用 mouseenter / mouseleave 而不是 mouseover / mouseout 在必要时实际触发处理程序（因为您不关心 muse 是否在菜单项区域内移动光标 - 只关心哪个项目光标进入和离开）。
2.  `.stop(true)`在事件处理程序中运行新动画之前使用。您已经在几个地方这样做了，但是您错过了一些地方（并且您没有清除动画队列）。尝试在整个菜单中随机移动光标，然后停下来观看混乱。事件处理程序在这里和那里触发，一些项目“悬停”，一些项目显示子菜单，只是稍后隐藏。通过传递`true`给停止函数，您告诉 jQuery 清除匹配对象的动画队列。您也可以考虑使用第二个参数 for [`.stop()`](http://api.jquery.com/stop/)，这将*告诉*jQuery 继续设置完成整个动画后对象的状态。但是，这（传递第二个参数）将取决于您如何调整代码，所以不要只这样做 - 检查这是否是一个理想的效果。

# php - PHP 日期时间格式 - 2012-08-16T21:14:03.447？

> ID：12132804
> 
> 赞同：-1
> 
> 时间：2012-08-26T18:31:27.820
> 
> 标签：php, mysql

PHP 2012-08-16T21:14:03.447 中的日期时间是什么格式？如何将其转换为时间戳，反之亦然？

我有时间戳格式`1345108443790`，如何获取日期时间？

**对于投票/关闭请求此问题的人：**

尝试将`1345108443790`（我从第三方网站获得此值）转换为 DateTime 时，我得到了奇怪的结果，但经过多次尝试和@Truth 的建议，我知道在修剪最后 3 位数字（可能是微秒？）然后传递它之后in function 实际上解决了它并给出了正确的结果。在这里学习的东西，一键下注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:33:36.933

这类似于 ISO 8601（但缺少时区），即日期/时间戳*的标准。*

使用`strtotime()`它可以正确解析它。您可能还想考虑`DateTime`对象。

工作示例：

```
$ts = strtotime("2012-08-16T21:14:03.447");
echo date("H:i:s Y-m-d", $ts); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T19:54:58.570

> PHP 2012-08-16T21:14:03.447 中的日期时间是什么格式？

这种格式包含在[ISO 8601 国际标准](http://en.wikipedia.org/wiki/ISO_8601)中，尽管不是特别常用的示例。

^(另外：建议（在标准中）秒的小数部分前面有逗号而不是点。)

* * *

> 如何将其转换为时间戳，反之亦然？

像往常一样，与[`strtotime()`](http://php.net/strtotime)或[`DateTime`](http://php.net/class.datetime)类。

```
$subject = '2012-08-16T21:14:03.447';

echo date('r', strtotime($subject));
// or
$datetime = new DateTime($subject);
echo $datetime->format('r'); 
```

* * *

> 我有一个时间戳格式 1345108443790，如何获取日期时间？

这是[Unix time](http://en.wikipedia.org/wiki/Unix_time)，但以毫秒为单位。基本算术将为您提供以秒为单位的 Unix 时间，然后您可以使用该格式创建一个`DateTime`对象。`@1234567890`

```
$subject = 1345108443790;
$unixtime = (int) ($subject / 1000);

echo date('r', $unixtime);
// or
$datetime = new DateTime("@$unixtime");
echo $datetime->format('r'); 
```

如果您需要毫秒精度，那么您可以使用[`DateTime::createFromFormat()`](http://php.net/datetime.createfromformat).

```
$subject = 1345108443790;
$unixtime = (int) ($subject / 1000);
$millis   = $subject % 1000;

$datetime = DateTime::createFromFormat('U u', "$unixtime $millis");
echo $datetime->format('r u'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T20:01:28.453

我同意@Truth[建议](https://stackoverflow.com/a/12132820/623041)使用 PHP 的[DateTime](http://www.php.net/manual/en/class.datetime.php)对象，因为 v5.2.2 可以毫无问题地处理微秒：

```
$dt = new DateTime('2012-08-16T21:14:03.447');
$timestamp = $dt->format('U.u');                  // 1345151643.447000
$timestrng = $dt->format('Y-m-d\TH:i:s.u');       // 2012-08-16T21:14:03.447000 
```

# python - 从 Gnome Shell 扩展调用 Python 代码

> ID：12132810
> 
> 赞同：3
> 
> 时间：2012-08-26T18:31:58.713
> 
> 标签：python, gnome-shell

我一直在寻找一些时间，但仍然找不到任何记录在案的方式来从 GnomeShell 扩展代码调用 python 函数。有没有可能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:58:00.077

你可以这样做:)

```
const Util = imports.misc.util;
let python_script = '/path/to/python/script';
Util.spawnCommandLine("python " + python_script); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:54:44.607

我不知道如何直接从 Gnomeshell 调用 python 函数，但是有另一种方法。由于 gnomeshell 是使用 Javascript 编程的，因此您可以使用[python 到 javascript 编译器](http://pyjs.org/)来翻译您需要的 python 函数。

# php - 我可以让mysql对它接收的数据类型不那么严格吗？

> ID：12132811
> 
> 赞同：4
> 
> 时间：2012-08-26T18:32:15.593
> 
> 标签：php, mysql, pdo

我有一个用户看起来像这样的对象。

```
$user = new User();
$user->name = 'Name';
$user->age = 34; 
```

在我的数据库中有五个字段，

```
id, name, age, location, reputation 
```

我有一个方法（对于我的所有表）使用以下 SQL 从表中动态收集所有字段。通过这种方式，我可以动态获取要放入 INSERT 语句的占位符的数量。

```
SHOW FIELDS FROM users
SHOW FIELDS FROM questions
SHOW FIELDS FROM topics 
```

然后，我编写了一个 create 方法，该方法计算表中的字段数并准备一个充满占位符的字符串，并自动将其插入到我的 PDO 查询中，从而实现：

```
INSERT INTO users VALUES (?, ?, ?, ?, ?) 
```

然后，我取出我的 $user 对象并从它拥有的所有属性中创建一个数组，并将该数组提供给我在执行参数中准备好的 PDO 语句。这工作正常，该函数将数据插入数据库。

我的问题是，有时我还没有填充对象的所有属性，因此我填充了数组的其余部分，这些数组用空字符串提供执行函数。当它到达一个接受整数的字段时，它会导致致命错误并且不起作用。我可以做些什么来动态地将空字段插入到我的数据库中，而无需为代码中的每个字段编写正确的数据类型？因为这一切都是动态完成的，所以我无法提前知道将整数或空字符串放在那里。有没有办法完全省略一些占位符？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T18:43:29.383

将您的可选 mysql 字段设置为接受 NULL。

# ios - AFNetworkActivityIndi catorManager 不会因为表格单元回收取消图像请求而减少

> ID：12132814
> 
> 赞同：1
> 
> 时间：2012-08-26T18:32:50.737
> 
> 标签：ios, afnetworking

我正在使用`UIImageView+AFNetworking:setImageWithURLRequest`将图像加载到表格视图单元格中。它工作得很好，我尝试`AFNetworkActivityIndicatorManager`在下面的示例中使用在图像加载时显示活动指示器。

```
[[AFNetworkActivityIndicatorManager sharedManager] incrementActivityCount]; 
[imageView setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:placeholder]
  success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
    [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];
  } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
    [[AFNetworkActivityIndicatorManager sharedManager] decrementActivityCount];
  }
]; 
```

我遇到的问题是当快速滚动表格视图时，AFNetworking 会取消某些请求并且`AFNetworkActivityIndicatorManager`永远不会减少。取消请求确实可以保持快速，并且似乎是设计使然：

> “例如，由于表格视图单元格被回收，设置新的图像 URL 将自动取消先前的请求。” [https://github.com/AFNetworking/AFNetworking/wiki/Introduction-to-AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/Introduction-to-AFNetworking)

有没有办法检测取消，以便我可以减少`AFNetworkActivityIndicatorManager`或有更好的方法来确保请求和活动指示器保持同步？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T22:48:29.663

您不需要这样做，您需要做的就是调用：

```
AFNetworkActivityIndicatorManager.sharedManager.enabled = YES; 
```

在您的 AppDelegate application:didFinishLaunchingWithOptions: 中，然后 AFNetworking 会在网络连接开始和停止时隐藏并显示指示器。

# django - 装饰基于类的视图的两种方法有什么区别？

> ID：12132819
> 
> 赞同：6
> 
> 时间：2012-08-26T18:33:29.630
> 
> 标签：django, django-views

我正在编写一个继承自 ListView 的视图，并试图将视图限制为登录用户。

[https://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-in-urlconf](https://docs.djangoproject.com/en/dev/topics/class-based-views/#decorating-in-urlconf)说在 URLconf 中使用 login_required 进行装饰“在每个实例的基础上应用装饰器。如果你想要要装饰的视图的每个实例，您都需要采用不同的方法”-该方法是在视图代码中装饰调度方法。

我以为我知道类和实例之间的区别，但是这句话对我没有任何意义。有人可以澄清一下吗？除了在 URLconf 中而不是在您的类定义中有一个装饰器之外，这两种方法之间有什么区别？

该链接上方的段落似乎回答了这个问题：“由于基于类的视图不是函数，因此根据您是使用 as_view 还是创建子类，装饰它们的工作方式会有所不同。”

真的？？我似乎可以在我的 ListView 子类中使用 URLconf 方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T23:43:14.670

假设您有以下基于类的视图：

```
class PostListView(ListView):
     model = Post

ProtectedPostListView = login_required(PostListView.as_view()) 
```

和你的 urls.py：

```
url(r'posts$', ProtectedPostListView) 
```

如果您使用这种方法，那么您将失去子类化的能力，`ProtectedPostListView`例如

```
class MyNewView(ProtectedPostListView):
    #IMPOSSIBLE 
```

这是因为它`.as_view()`返回一个函数，并且在应用`login_required`装饰器之后，你留下了一个函数，所以子类化是不可能的。

另一方面，如果您采用第二种方法，即使用方法装饰器，则可以进行子类化。例如

```
class PostListView(ListView):
     model = Post

     @method_decorator(login_required)
     def dispatch(self, *args, **kwargs):
         return super(PostListView, self).dispatch(*args, **kwargs)

class MyNewView(PostListView):
     #LEGAL 
```

# php - 奇怪的PHP错误，它来自哪里？代码点火器

> ID：12132827
> 
> 赞同：3
> 
> 时间：2012-08-26T18:34:37.083
> 
> 标签：php, codeigniter

今天我正在为头像上传文件，一切都很好，它会调整图像大小等，但有时在选择一个大而无效的文件时会产生这个错误：

```
Warning: POST Content-Length of 52091839 bytes exceeds the limit of 8388608 bytes in Unknown on line 0
You did not select a file to upload. 
```

这不会一直发生，只是偶尔发生。通常，当文件太大时，它只会给出正确的错误消息。

有谁知道这个错误来自哪里，为什么会出现？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T18:36:49.203

听起来你需要增加[`post_max_size`](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)php.ini。如果您还没有增加[`upload_max_filesize`](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)，您可能还需要增加它。

```
# php.ini
# Allow huge files:
# Post usually needs to be bigger than file upload size!
post_max_size = 256M
upload_max_filesize 128M 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T18:42:07.827

将您的 in php.ini 更新`post_max_size`为更大的值

`upload_max_filesize`设置用户可以上传的最大文件大小，同时`post_max_size`设置可以通过表单中的 POST 发送的最大数据量。这可能是当您尝试上传单个大文件时有时会出现大文件错误的原因，但当您尝试上传多个文件时会引发上述错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T18:45:44.917

这与上传文件时的编码方式有关。

基本上它被“视为”一个非常大的 POST。

所以你想要你`php.ini` `post_max_size`的大于你的`upload_max_filesize`价值。

根据您使用的编码，它应该大 60% 到 100%。

否则，您的最大文件大小可能为 5 M，但这会被编码为 8.01 M；发生这种情况时，文件大小检查通过，但帖子正文大小检查失败。因此你的错误。

# node.js - 在“集成”测试中理解 Mocha 语法

> ID：12132828
> 
> 赞同：3
> 
> 时间：2012-08-26T18:34:44.323
> 
> 标签：node.js, testing, mocha.js

我在 Ruby 和 Rspec 方面有相当广泛的背景。然而，当我学习 Node 和 Mocha 时，我遇到了我似乎无法理解的语法。

以[本教程](http://blog.james-carr.org/2012/01/16/blog-rolling-with-mongodb-node-js-and-coffeescript/)为例，测试路由包括以下内容（使用 CoffeeScript）。还应该注意的是，我在许多其他地方看到过以下示例，这些示例向初学者解释了 Mocha。

```
require "should"
routes = require "../routes/index"

describe "routes", ->

  describe "index", ->

    it "should display index with posts", ->
      req = null
      res =
        render: (view, vars) ->
          view.should.equal 'index'
          vars.title.should.equal('My Coffeepress Blog')
      routes.index(req, res) 
```

如果我理解正确，此测试会设置模拟请求和响应变量（分别为 req 和 res）并将它们发送到 routes.index() 函数。

***不过，我不明白***的是，它为什么以及如何在 render() 函数调用中进行断言。这似乎是一种完全不同的测试方法，因为我习惯于设置数据，根据预期值测试数据，然后将数据分解。在这里，似乎“设置数据”（创建模拟 res 对象）的一部分正在做出断言。

任何人都可以向精通 Rspec 的人解释这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:07:53.593

我想，该`render`函数正在您的`index`路线内被调用。它可能看起来像：

```
index: (req, res, next) ->
    res.render 'index', { title: 'My Coffeepress Blog'} 
```

您正在传递一个暴露`render`方法的存根响应，以便您可以拦截调用并断言调用；即第一个参数（`view`参数）和数据（`vars`对象）。这就是所有需要的，因为超出此范围当然会测试底层框架。

对回调进行断言通常会导致看起来“颠倒”的测试，因为代码不会读取 top=>down。这是异步/回调世界中的生活。

如果这很烦人，您可以在局部变量中捕获调用并在事后进行断言，但是一旦您编写了一段时间的回调代码，这就会开始变得不必要地冗长：

```
# snip
viewName = null
locals = null
res: 
    render: (view, vars) > 
        viewName = view
        locals = vars
routes.index (req, res)
viewName.should.equal 'index'
locals.title.should.equal 'My Coffeepress Blog' 
```

这有帮助吗？

# wordpress - 重新处理 WordPress 中的所有图像

> ID：12132829
> 
> 赞同：0
> 
> 时间：2012-08-26T18:34:55.507
> 
> 标签：wordpress, attachment, image-compression

我有[一个博客](http://www.rustyrambles.com/)，它在帖子中嵌入了所有图像的最高分辨率版本，而不是链接到图像附件页面的缩略图。

你能告诉我如何重新处理所有嵌入的图像，以便将它们输出为缩小尺寸的缩略图，链接到它们自己的附件页面（这是 WordPress 默认设置）？

我是否认为我可以在其中涉及[Regenerate Thumbnails](http://wordpress.org/extend/plugins/regenerate-thumbnails/)插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:32:14.133

这正是我的建议，它可以创造奇迹，但根据照片的数量需要更长的时间。

您可以做的另一件事是在发布之前通过优化器运行图像以加快加载时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T15:25:16.660

我不知道这个插件，但有一个名为 auto post thunbnail for wordpress 的插件。我已经使用它并且效果很好。您只需按下生成按钮并等待它为您的所有帖子生成缩略图（如果它们中有图像）。

# python-2.6 - 格兰杰测试（Python）错误消息 - TypeError：不支持的操作数类型 -：'str' 和 'int'

> ID：12132830
> 
> 赞同：0
> 
> 时间：2012-08-26T18:35:46.103
> 
> 标签：python-2.6

我正在尝试对两个货币对进行格兰杰因果关系测试，但每当我尝试测试它时，我似乎都会在 Shell 中收到此错误消息。有人可以请教吗？

我对编程非常陌生，需要它来为我的项目运行分析。在外壳中，我将 -

导入 ats15 ats15.grangertest('EURUSD', 'EURGBP', 8)

出了什么问题？我已经复制了下面的脚本。

提前致谢。

## 标题##def grangertest(Y,X,maxlag):

```
"""
Performs a Granger causality test on variables (vectors) Y and X.
The null hypothese is: Does X cause Y ?
Returned value: pvalue, F, df1, df2
"""
# Create linear model involving Y lags only.
n = len(Y)
if n != len(X):
    raise ValueError, "grangertest: incompatible Y,X vectors"
M = [ [0] * maxlag for i in range(n-maxlag)]
for i in range(maxlag, n):
    for j in range(1, maxlag+1):
        M[i-maxlag][j-1] = Y[i-j]

fit = ols(M, Y[maxlag:])
RSSr = fit.RSS

# Create linear model including X lags.
for i in range(maxlag, n):
    xlagged = [X[i-j] for j in range(1, maxlag+1)]
    M[i-maxlag].extend(xlagged)
fit = ols(M, Y[maxlag:])
RSSu = fit.RSS
df1 = maxlag
df2 = n - 2 * maxlag - 1
F = ((RSSr - RSSu)/df1)/(RSSu/df2)
pvalue = 1.0 - stats.f.cdf(F,df1,df2)
return pvalue, F, df1, df2, RSSr, RSSu 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:46:14.303

您没有发布完整的回溯，但此错误消息：

```
TypeError: unsupported operand type(s) for -: 'str' and 'int' 
```

意思是它所说的。有一个操作数`-`——减法运算符——它不知道如何处理从字符串中减去整数。为什么会涉及字符串？好吧，您正在调用该函数：

```
ats15.grangertest('EURUSD', 'EURGBP', 8) 
```

所以你给了`grangertest`两个字符串和一个整数。但似乎`grangertest`期待

```
def grangertest(Y,X,maxlag): 
```

*两个数字*序列（列表、数组等）用作 Y 和 X，而不是字符串。如果`EURUSD`和`EURGBP`是您事先为列表指定的名称，则不需要引号：

```
ats15.grangertest(EURUSD, EURGBP, 8) 
```

但如果不是，那么您应该`grangertest`以您所称的任何名称传递列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:46:25.030

函数的输入`grangertest`必须是两个数字列表。`grangertest`对货币一无所知，因此将货币字符串传递给它是行不通的。

您必须以某种方式获取汇率数据，以便将其传递给`grangertest`. 如果`EURUSD`和是变量，那么当您将它们传递给函数（例如）`EURGBP`时，不要在它们周围加上引号。`ats15.grangertest(EURUSD, EURGBP, 8)`

# java - 将 XML 元素节点和文本节点放入字符串数组

> ID：12132831
> 
> 赞同：4
> 
> 时间：2012-08-26T18:35:51.627
> 
> 标签：java, xml

请帮助我将元素和文本节点放入 s 数组中`String`。

例如，一个 .xml 文件具有：

```
<soap:Envelope>
  <soap:Body>
    <ser:getTitle>
      <!--Optional:-->
      <ser:title>Meeting</ser:title>
    </ser:getTitle>
    <ser:getDiscription>
      <!--Optional:-->
      <ser:discription>this is the meeting</ser:discription>
    </ser:getDiscription>
    ...
  </soap:Body>
</soap:Envelop> 
```

现在我想将值放入`String[] key, value`如下：

```
key[0] = "title";
value[0] = "meeting";
key[1] = "discription";
value[1] = "this is the meeting"; 
```

... 等等。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:46:46.287

你可以使用[DOM](http://tutorials.jenkov.com/java-xml/dom.html)来解析你的输入 XML 并使用类似的东西：

```
import javax.xml.parsers.*;
import org.w3c.dom.*;
import java.io.File;

public dumpXMLTags(...) {
  String[] keys; // you would need that with appropriate size initialized
  String[] values;  

  // Parse your XML file and construct DOM tree
  File fXmlFile = new File(PATH_TO_YOUR_XML_FILE);
  DocumentBuilder dBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
  Document doc = dBuilder.parse(fXmlFile);
  doc.getDocumentElement().normalize();

  // Traverse DOM tree (make sure is not empty first, etc)
  NodeIterator iterator = traversal.createNodeIterator(
      doc.getDocumentElement(), NodeFilter.SHOW_ELEMENT, null, true);

  int i = 0;  // index to you key/value Array

  for (Node n = iterator.nextNode(); n != null; n = iterator.nextNode()) {
     keys[i] = ((Element) n).getTagName();
     values[i] = ((Element)n).getNodeValue();
     i++;
  }
} 
```

或者，您可以将 XPATH 与

```
//@* | //*[not(*)] 
```

表达式，如此处所述：[问题 7199897](https://stackoverflow.com/questions/7199897/traversing-a-dom-tree-to-get-name-value-pairs-of-attributes-and-leaf-nodes)

```
public static void main(String[] args) throws Exception {
    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    Document doc = builder.parse(new InputSource(new StringReader(xml)));

    XPathFactory xpf = XPathFactory.newInstance();
    XPath xp = xpf.newXPath();
    NodeList nodes = (NodeList)xp.evaluate("//@* | //*[not(*)]", doc, XPathConstants.NODESET);

    System.out.println(nodes.getLength());

    for (int i=0, len=nodes.getLength(); i<len; i++) {
        Node item = nodes.item(i);
        System.out.println(item.getNodeName() + " : " + item.getTextContent());
    }
} 
```

# javascript - 如何让 Twitter Bootstrap 的模式在 iPhone 上正确显示？

> ID：12132832
> 
> 赞同：1
> 
> 时间：2012-08-26T18:35:55.713
> 
> 标签：javascript, css, twitter-bootstrap

这是该网站的链接：http: [//daisy.camorada.com/](http://daisy.camorada.com/)

当您单击“文章”按钮时，它会弹出带有模态的 Twitter Bootstrap，并且在 iPhone 上无法正确显示，如何使模态在 iPhone 上正确显示？

我不确定这是 JavaScript、Bootstrap 还是 CSS 问题。

在此先感谢您的帮助，

编辑：“正确显示”的意思如下：我希望 iphone 显示引导模式在计算机上的显示方式。这是模式在计算机浏览器上的外观截图：![谷歌浏览器 13 的截图](../Images/3fc29daab34b5f5043dd8a899ffca78b.png)

这是它在 iphone 上的外观，我希望 iphone 像上面的示例一样显示它：

![在此处输入图像描述](../Images/d01e70d2734472f89fe7d9e96cf02024.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:00:59.660

Twitter Bootstrap v2.0.4（bootstrap-modal.js v2.0.4）也有同样的问题。有两个问题需要解决才能达到解决方案。

## 问题

1.  CSS：模态类 (.modal) 设置为 { top: 50%; }。这使得模态显示在屏幕外。
2.  JS：如果您向下滚动页面，模态背景可能无法正确填满屏幕。模式必须在页面顶部打开。

## 解决方案

**CSS**

```
@media only screen and (max-width: 479px) {
.modal {
  position: absolute;
  top: 16%; // ADJUSTMENT MADE HERE
  left: 50%;
  z-index: 1050;
  width: 300px;
  margin: -240px 0 0 -150px;
  overflow: auto;
  background-color: #ffffff;
  border: 1px solid #999;
  border: 1px solid rgba(0, 0, 0, 0.3);
  *border: 1px solid #999;
  -webkit-border-radius: 6px;
     -moz-border-radius: 6px;
          border-radius: 6px;
  -webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
     -moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
          box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);
  -webkit-background-clip: padding-box;
     -moz-background-clip: padding-box;
          background-clip: padding-box;
}
} 
```

**JS**

在 bootstrap.js 中调整模态显示：function()

```
show: function () {
    var that = this
      , e = $.Event('show')

    that.oldWindowPosition = $(window).scrollTop(); // 
    $('body, html').scrollTop(0); // ADD THIS LINE 

    this.$element.trigger(e)

    if (this.isShown || e.isDefaultPrevented()) return

    $('body').addClass('modal-open')

    this.isShown = true

    escape.call(this)
    backdrop.call(this, function () {
      var transition = $.support.transition && that.$element.hasClass('fade')

      if (!that.$element.parent().length) {
        that.$element.appendTo(document.body) //don't move modals dom position
      }

      that.$element
        .show()

      if (transition) {
        that.$element[0].offsetWidth // force reflow
      }

      that.$element.addClass('in')

      transition ?
        that.$element.one($.support.transition.end, function () { that.$element.trigger('shown') }) :
        that.$element.trigger('shown')

    })
  } 
```

同样，这是我对 Twitter Bootstrap 2.0.4 的修复

# java - WindowBuilder：对 GUI 完全没有影响

> ID：12132838
> 
> 赞同：0
> 
> 时间：2012-08-26T18:37:07.210
> 
> 标签：java, user-interface, windowbuilder

我正在使用 Eclipse 3.7.2，我也想使用 WindowBuilder。我的问题是它为我生成了无用的代码。当我运行我的应用程序时，我只能看到程序窗口标题栏的一小部分。无论我通过代码设置了什么，这个窗口的大小都是 0×0。当我调整它的大小时，只有一个空白框架，没有别的。事实证明，当我调试我的代码时，由 WindowBuilder 制作的构造函数已被调用并运行而没有错误。但是，此构造函数对我的程序没有任何影响。我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:56:55.880

当您进入“新建”>“其他”>“WindowBuilder”>“Swing 设计器”>“JFrame”（而不是命名您的类）时，您应该得到以下信息：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;

public class Stack extends JFrame {

private JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                Stack frame = new Stack();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public Stack() {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    contentPane.setLayout(new BorderLayout(0, 0));
    setContentPane(contentPane);
}

} 
```

相反：转到“帮助”>“安装新软件”>“已安装”。检查您是否安装了这些东西（Swing 设计器及以下）：

![在此处输入图像描述](../Images/0dbe7c396cdbdedd098a514695e31d57.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-11T08:08:30.353

最好的过程是让 WindowBuilder 创建 GUI 的框架。安装 WB 后，只需使用工具栏中的新类图标。这将为 WB 继续创建最佳方法命名。WB 不能只解析任何代码。它需要有一些结构。请参见下面的示例。

[![例子](../Images/8b131ee786151ea4a0dd666f1ce692a4.png)](https://i.stack.imgur.com/lIVZG.png)

# android - 只做 SELECT 查询的数据库

> ID：12132846
> 
> 赞同：0
> 
> 时间：2012-08-26T18:38:10.093
> 
> 标签：android, sqlite

我真的需要创建一个小型数据库来**仅**在我的应用程序中执行 SELECT 查询。正因为如此，我想知道：

1.  android 是否为设计提供一些东西并填充数据库？我的意思是没有编程。像 phpmyadmin 这样的东西，所以我可以在模拟器或手机中运行应用程序之前填充它并在 2 个表之间建立关系。
2.  如果我创建一个数据库，它是否可以从用户手机中的某个文件中看到？因为我在 android 手册中读到它是不可见的，但在某些地方我读到它保存在移动设备中......我希望这个数据库就像一个资源一样，它可以是一个层或一个字符串。
3.  如果我真的需要在每次显示应用程序时创建一个数据库以始终显示相同的信息，我可以在一行代码左右“上传一个样本”该数据库吗？

我需要这个来以不同的语言显示一大堆项目（可能是 2000 个项目）。我可以只创建一个数组字符串资源来做到这一点，但我需要根据用户的位置以不同的方式对列表进行排序。最后，我需要检索所选项目的“ID”，但是因为不可能将二维数组字符串作为资源，所以我不能为项目分配一个数字，所以我只能知道它们在列表中的位置。问题是，如果我更改项目，我的位置编号与 ID 将不匹配。

该数组用于自动填充文本。我知道我可以在每个带有数字的项目之后放置一个逗号，然后在将此数组添加到自动填充之前进行拆分并选择第一列用于自动填充，第二列用于将位置与真实 ID 进行比较，但我认为它会有更好的性能将所有内容都保存在数据库中。我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:45:32.767

```
 1\. Does android provide something for design and fill a DB? I mean no
    programming. Something like phpmyadmin so I could fill it and make a
    relation between 2 tables before running the app in an emulator or a
    phone. 
```

您可以使用[Sqlite Browser](http://sqlitebrowser.sourceforge.net/)创建数据库

```
 2\. If I create a DB, will it be visible from some file in the user  
     mobile phone? Because I read in android manual that it was invisible
    but in some places I read that it's saved in the mobile... I would
    prefer that this DB would be like a resource like it can be a layer
    or a string. 
```

这取决于您在哪里创建。通常，如果您打开一个数据库，它将在 /data/data/[yourpackagename]/databases 中创建。此文件夹在正常情况下是无法访问的，但如果您有根手机，则可以访问此文件夹。此外，在创建时，您可以更改每次都可以访问的 sdcard 的路径

```
 3\. If I really need to create a DB each time the app is 
     displayed for present the same information always, could I just "upload a
    sample" of that database in one line of code or so? 
```

您可以将数据库存储在应用程序的资产文件夹中并打开它。

编辑：

如果它只是一个二维数组，我认为最好保存为 csv 并提取。您可以将其放在资产或原始文件夹中。

# php - 在浏览器刷新时保存 XHR 渲染状态

> ID：12132848
> 
> 赞同：1
> 
> 时间：2012-08-26T18:38:21.527
> 
> 标签：php, javascript, ajax

我有一个 php 页面，其中包含 Home、About Us、Profile 等菜单。现在在主页上，如果单击“About Us”链接，该页面不会重新加载，而是“About Us”的 Ajax 响应显示在主 div 中. 但是如果用户现在重新加载窗口，主页的信息就会显示出来，但我想在主 div 中保留“关于我们”的信息，就像页面重新加载之前一样。预先感谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:40:43.693

您需要执行一些操作，例如向 url 添加哈希，以便重新呈现页面的正确状态。

喜欢`#!/About-us`

在你的代码中检查你是否有一个哈希，如果是，则进行正确的渲染。 [这](http://jsfiddle.net/lechevalierd3on/JnVGk/)是该技术的一个非常幼稚的实现。我强烈建议您看一下其中的许多出色框架。

HTML：

```
<a href="#!/About-us">About us</a>​ 
```

Javascript：

```
function renderAbout() {
 alert("render about");   
}

var hash = window.location.hash;

if (hash === "#!/About-us")
    renderAbout();
​ 
```

[演示](http://fiddle.jshell.net/lechevalierd3on/JnVGk/show/light/#!/About-us)

有很多框架可以帮助您实现这一目标：

[crossroads.js](http://millermedeiros.github.com/crossroads.js/)
[Finch.js](http://stoodder.github.com/finchjs/#)
[David.js](http://davisjs.com/)
[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)

[这](https://stackoverflow.com/questions/6566360/javascript-clientside-routing-pathing-library)是关于它们的stackoverflow讨论。这是一个关于为什么而[不仅仅是](https://stackoverflow.com/questions/3009380/whats-the-shebang-hashbang-in-facebook-and-new-twitter-urls-for)`#!/About-us``#About-us`

# ios - 在没有 CATiledLayer 的情况下渲染 Scrollview 容器中的巨大网格？

> ID：12132855
> 
> 赞同：4
> 
> 时间：2012-08-26T18:40:27.140
> 
> 标签：ios, grid, scrollview, catiledlayer

我正在寻找有关如何拥有一个相当大的滚动视图（比如说 8192x8192）的任何建议，它本质上是一个网格，其中放置了大约 5-100 个按钮的子视图。

蛮力方法内存不足，因为 CALayer 似乎正在为滚动视图内容的大小分配位图（使用缩放时内存问题尤其突出）

我接下来向它添加了 CATiledLayer，这解决了内存问题，但是由于图块是异步生成的，因此网格上的效果很模糊，并且仍然不理想，因为它使用大量内存来完成本质上是微不足道的“画一些线”任务。

似乎如果我能以某种方式控制通过 OpenGL 每帧绘制我自己的网格并告诉 UIKit 不要为滚动视图创建位图缓冲区，那将是完美的，但不确定这是否可行甚至是正确的方法？

在 Android 上，我只是控制了整个绘图/缩放/平移，但这在 iOS 上似乎已经提供了大部分功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:16:39.990

您应该查看 WWDC 2009 视频会话 102：“Mastering iPhone Scroll Views”以及 Apple 的 ScrollViewSuite 示例项目。他们解释了如何使用不同的缩放级别进行平铺滚动视图，这听起来像是您所需要的。

# javascript - 使用 addevent 时未触发 VideoJs 自动播放

> ID：12132856
> 
> 赞同：1
> 
> 时间：2012-08-26T18:40:29.757
> 
> 标签：javascript, jquery, html5-video, jquery-events

我遵循了[videojs](http://videojs.com/docs/setup/)的快速入门指南，并将以下代码放在了我的 html 文档的正文中：

```
<video id="video" class="video-js vjs-default-skin" controls width="941" 
      height="531" autoplay preload="auto" data-setup="{}">
  <source type="video/mp4" src="dummy_url">
</video> 
```

一切正常。自动播放和控制到位。

由于我需要在视频结束时删除视频，所以我在视频标签之后放置了以下代码：

```
<script type="text/javascript">
    _V_("video").addEvent("ended", videoEnd);

    function videoEnd(){
        $('#divId').slideToggle("slow");
        setTimeout("$('#divId').remove()", 700);
    }
</script> 
```

问题是每次我尝试检测一些视频时，自动播放不再起作用。即使以下内容也不会触发自动播放：

```
<script type="text/javascript">
    _V_("video").ready(function(){

        var myPlayer = this;

        // EXAMPLE: Start playing the video.
        myPlayer.play();

    });

    _V_("video").addEvent("ended", videoEnd);

    function videoEnd(){
        $('#divId').slideToggle("slow");
        setTimeout("$('#divId').remove()", 700);
    }
</script> 
```

关于如何保持自动播放并收听结束事件的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T21:15:08.380

好吧，我不确定这是否是最正确的实现，但是：

```
<video id="video" class="video-js vjs-default-skin" controls 
     width="941" height="531" autoplay preload="auto" data-setup="{}">
     <source type="video/mp4" src="dummy_url">
</video>

<script type="text/javascript">
    interval = setInterval(videoLoaded, 100);

    function videoEnd(){
            $('#someid').slideToggle("slow");
            setTimeout("$('#someid').remove()", 700);
        }

    function videoLoaded(){
        if(!_V_.players.video){
            return false;
        }

        _V_.players.video.play();
        _V_.players.video.addEvent("ended", videoEnd);
        clearInterval(interval);
    }

</script> 
```

根据我的阅读，另一种方法是仅通过 js 加载视频。

这是 videojs 初始化视频对象的方式的问题（根据我的阅读）。更多细节可以在[这里](http://help.videojs.com/discussions/problems/1171-videojs-playerinit-ignores-data-setup-attribute-content-broken-video-if-dom-ready-event-tries-to-use-player)找到。

希望它有助于一些*保险杠*:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:47:25.023

实际上更好的是使用 setTimeout 函数启动 videoLoaded 函数，因为您无法控制播放器（如果需要的话）。

# node.js - 如何在 Heroku 上为 Node.js 安装 bignum lib？

> ID：12132858
> 
> 赞同：1
> 
> 时间：2012-08-26T18:40:47.703
> 
> 标签：node.js, deployment, heroku, bignum

我收到以下错误

```
-----> Installing dependencies with npm

   > bignum@0.5.1 install /tmp/build_1xz3suiyqvjwh/node_modules/bignum
   > node-gyp configure build

   sh: node-gyp: not found
   npm ERR! error installing bignum@0.5.1 Error: bignum@0.5.1 install: `node-gyp configure build`
   npm ERR! error installing bignum@0.5.1 `sh "-c" "node-gyp configure build"` failed with 127
   npm ERR! error installing bignum@0.5.1     at ChildProcess.<anonymous> (/tmp/node-npm-Pi2L/lib/utils/exec.js:49:20)
   npm ERR! error installing bignum@0.5.1     at ChildProcess.emit (events.js:70:17)
   npm ERR! error installing bignum@0.5.1     at maybeExit (child_process.js:358:16)
   npm ERR! error installing bignum@0.5.1     at Process.onexit (child_process.js:394:5)
   npm ERR! bignum@0.5.1 install: `node-gyp configure build`
   npm ERR! `sh "-c" "node-gyp configure build"` failed with 127
   npm ERR! 
   npm ERR! Failed at the bignum@0.5.1 install script.
   npm ERR! This is most likely a problem with the bignum package,
   npm ERR! not with npm itself.
   npm ERR! Tell the author that this fails on your system:
   npm ERR!     node-gyp configure build
   npm ERR! You can get their info via:
   npm ERR!     npm owner ls bignum
   npm ERR! There is likely additional logging output above.
   npm ERR! 
   npm ERR! System Linux 2.6.32-343-ec2
   npm ERR! command "/tmp/node-node-8eWj/bin/node" "/tmp/node-npm-Pi2L/cli.js" "install" "--production"
   npm ERR! cwd /tmp/build_1xz3suiyqvjwh
   npm ERR! node -v v0.6.20
   npm ERR! npm -v 1.0.106
   npm ERR! code ELIFECYCLE
   npm ERR! 
   npm ERR! Additional logging details can be found in:
   npm ERR!     /tmp/build_1xz3suiyqvjwh/npm-debug.log
   npm not ok 
```

！无法使用 npm 安装 --production 依赖项！Heroku 推送被拒绝，无法编译 Node.js 应用程序

# json - Json 响应在 chrome 中给出未定义的错误，但在 IE 中有效

> ID：12132860
> 
> 赞同：0
> 
> 时间：2012-08-26T18:41:55.580
> 
> 标签：json, jquery, cross-domain, undefined

我是 ajax 和跨域新手，我在这里一头雾水，我一直在尝试研究上述标题，它一直指向跨域错误，有人可以帮我解决如何修复代码以遵守这些跨域。

这是我的代码：

```
function GetEmployeeInformation() {
          $.ajax({
              type: "GET",
              url: "http://localhost:8080/SampleEmpService/Employees/" + $("#txtEmpno").val(),
              contentType: "application/json; charset=utf-8",
              cache:false,
              dataType:"json",
              error: function (xhr, ajaxOptions, thrownError) {
                  alert(xhr.status);
                  alert(xhr.statusText);
                  alert(thrownError)
              },
              success: function (response) {
                  $("#divEmployeeInfo").html("");
                  $("#divEmployeeInfo").append("Id: ").append(response.Empno + "<br />");
                  $("#divEmployeeInfo").append("Name: ").append(response.Ename + "<br />");
                  $("#divEmployeeInfo").append("Salary: ").append(response.Sal + "<br />");
                  $("#divEmployeeInfo").append("Deptno: ").append(response.Deptno + "<br />");
              }
          });
      } 
```

它在 IE 中运行良好，但在 chrome 中给出了未定义的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:04:38.713

跨域使用 dataType="jsonp"。您可能还需要设置“crossDomain: true”。

# libgit2 - 如何获取 libgit2 中当前分支的名称？

> ID：12132862
> 
> 赞同：8
> 
> 时间：2012-08-26T18:41:58.363
> 
> 标签：libgit2

我正在尝试使用 libgit2 来读取当前分支的名称。我必须做某种解决吗？

我尝试使用

```
git_branch_lookup 
```

查找`git_reference`for `HEAD`，但结果是

```
Unable to find local branch 'HEAD' 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T19:43:02.953

运行`git branch -a`不列出`HEAD`。在 libgit2 中，`HEAD`也不被视为有效分支。这只是一个**参考**。

如果您想发现哪个引用是当前分支，那么您应该

*   加载当前`HEAD`参考（尝试`git_repository_head()`方便的方法）
*   确定其类型（使用`git_reference_type()`）
*   根据其类型（`GIT_REF_SYMBOLIC`或`GIT_REF_OID`）检索以下之一
    *   分支名称（使用`git_reference_symbolic_target()`）
    *   指向的提交（使用`git_reference_target()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-21T19:26:35.747

当遇到这个确切的问题时，我没有发现现有的答案/评论有帮助。相反，我结合了`git_reference_lookup()`and `git_reference_symbolic_target()`。

```
git_reference* head_ref;
git_reference_lookup(&head_ref, repo, "HEAD");
const char *symbolic_ref;
symbolic_ref = git_reference_symbolic_target(head_ref);
std::string result;
// Skip leading "refs/heads/" -- 11 chars.
if (symbolic_ref) result = &symbolic_ref[11];
git_reference_free(head_ref); 
```

这感觉像是一种肮脏的黑客行为，但这是我管理过的最好的。该`result`字符串要么以空结尾（例如，分离头，没有签出分支），要么包含签出分支的名称。符号目标由 ref 拥有，因此在释放它之前将该值复制到字符串中！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-31T22:26:59.690

[在https://libgit2.org/libgit2/ex/HEAD/status.html](https://libgit2.org/libgit2/ex/HEAD/status.html)有一个例子。它是基于方法的`get_reference_shorthand`。这应该给出分支名称而不是引用，因此不需要字符串操作，并且它也应该在分支和远程具有不同名称的边缘情况下工作。

```
static void show_branch(git_repository *repo, int format)
{
  int error = 0;
  const char *branch = NULL;
  git_reference *head = NULL;

  error = git_repository_head(&head, repo);

  if (error == GIT_EUNBORNBRANCH || error == GIT_ENOTFOUND)
    branch = NULL;
  else if (!error) {
    branch = git_reference_shorthand(head);
  } else
    check_lg2(error, "failed to get current branch", NULL);

  if (format == FORMAT_LONG)
    printf("# On branch %s\n",
      branch ? branch : "Not currently on any branch.");
  else
    printf("## %s\n", branch ? branch : "HEAD (no branch)");

  git_reference_free(head);
} 
```

# spring - 从 Spring 调用 EJB 的 2.x

> ID：12132866
> 
> 赞同：0
> 
> 时间：2012-08-26T18:42:49.447
> 
> 标签：spring

是否可以从 Spring 访问 EJB(Session bean) 2.x 提供的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T18:59:27.570

我认为你应该春天医生。访问 EJB 是可能的。 [关联](http://static.springsource.org/spring/docs/2.5.4/reference/ejb.html)

# php - 基于字段中单词数的 MySQL 相关性搜索

> ID：12132867
> 
> 赞同：1
> 
> 时间：2012-08-26T18:42:50.840
> 
> 标签：php, mysql

```
1 MySQL
2 PHP and MySQL
3 PHP MySQL Database Search 
```

这是我表中的三行。在应用搜索关键字“php mysql 数据库”时，它应该从第 3 行开始按 3-2-1 的顺序显示结果，因为其中包含所有 3 个关键字。

我尝试了这段代码，但它只显示了所有三个结果，而不是我想要的顺序。

```
SELECT data,
MATCH(data) AGAINST('PHP MySQL Database' IN BOOLEAN MODE) AS score
FROM table
WHERE MATCH(data) AGAINST('PHP MySQL Database' IN BOOLEAN MODE) ORDER BY score DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:06:28.793

比较[布尔模式](https://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)和[自然语言模式](https://dev.mysql.com/doc/refman/5.5/en/fulltext-natural-language.html)的文档：

> **布尔：**布尔全文搜索具有以下特征：它们不会自动按照相关性递减的顺序对行进行排序。
> 
> **自然语言：**当在 WHERE 子句中使用 MATCH() 时，如前面所示的示例，返回的行将自动按照相关性最高的顺序进行排序。

所以我的建议是使用自然语言模式，简单地省略你的显式排序条款。

# 注意默认设置

引用上面链接的文档：

> 在全文搜索中会忽略某些词：
> 
> 任何太短的单词都会被忽略。全文搜索找到的默认最小单词长度为四个字符。
> 
> [可以按照第12.9.6 节“微调 MySQL 全文搜索](https://dev.mysql.com/doc/refman/5.5/en/fulltext-fine-tuning.html)”中的说明更改默认的最小字长和停用词列表。

从链接到的页面：

> 例如，如果您想搜索三个字符的单词，您可以通过将以下行放在选项文件中来设置 ft_min_word_len 变量：

```
[mysqld]
ft_min_word_len=3 
```

# c# - 创建了 WCF 服务，托管在窗口服务中，尝试在该服务中使用。怎么做？

> ID：12132869
> 
> 赞同：2
> 
> 时间：2012-08-26T18:43:20.777
> 
> 标签：c#, wcf, windows-services

我创建了一个 WCF 服务库。然后我创建了一个 Windows 服务来托管这个 WCF 服务。现在我想在同一个窗口服务中调用 WCF 服务库中定义的函数。

```
 protected override void OnStart(string[] args)
    {
        if (serviceHost != null)
            serviceHost.Close();

        // Create a ServiceHost for the Registration type and 
        // provide the base address.
        serviceHost = new System.ServiceModel.ServiceHost(typeof(Registration));

        // Open the ServiceHostBase to create listeners and start 
        // listening for messages.
        serviceHost.Open();

        Registration r = new Registration();

        System.Threading.Thread t = new System.Threading.Thread(r.ReadAttempt);
        Object passParameterToCallback = null;
        t.IsBackground = false;
        t.Start(passParameterToCallback);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:06:24.120

如果您只需要在同一个类上调用一个方法，那么您已经在代码中执行此操作，只需创建一个`new Registration()`并在其上调用一个方法。没有理由通过 WCF 调用。

如果出于某种原因您确实想通过 WCF 向您自己调用您的服务，那么您应该构造一个客户端而不是实际的类。

如果需要调用 WCF 服务对象的同一*实例*，则必须将 WCF 服务设置为[Single](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx)，然后调用 WCF 客户端。

或者使用[这个构造函数](http://msdn.microsoft.com/en-us/library/ms585487.aspx)来`ServiceHost`接收一个单例对象，然后在同一个对象实例上调用方法，或者然后使用`ServiceHost.SingletonInstance`属性来取回传递给构造函数的那个​​实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:57:14.607

ServiceHost 类也应该能够接受服务的单例实例而不是类型，根据这个：http: [//msdn.microsoft.com/en-us/library/ms585487.aspx](http://msdn.microsoft.com/en-us/library/ms585487.aspx)

因此，尝试实例化类型为 Registration 的类，并将其传递给 ServiceHost。不过，这只能像我说的那样，使用单例类型的 WCF 服务，或者更具体地说，您将 InstanceContextMode 设置为 Single 的服务。

这样，您应该留下对该类的引用，并且应该能够正常访问它。

不过，这可能值得以另一种方式思考。如果您的问题只是通知 Windows 服务有关 WCF 服务中发生的事情，那么如何在您的 WCF 服务中定义一个事件，您的 Windows 服务可以订阅并以这种方式从您的 WCF 服务接收事件？

如果它是您需要在 WCF 服务中使用的逻辑，那么如何将该逻辑提取到外部类或使其成为静态类，以便您可以在任何地方使用它。

祝你好运

# c# - 具有复合键的 NHibernate 映射子项

> ID：12132872
> 
> 赞同：0
> 
> 时间：2012-08-26T18:43:43.467
> 
> 标签：c#, nhibernate

我有以下类，我想使用 NHibernate 进行映射

```
class User
{
    long Id {get; set;}
    IList<UserPassword> OldPasswords {get; set}
}

class UserPassword
{
    long UserId {get; set;}
    string Password {get; set;}
    DateTime CreateDtm {get; set;}
} 
```

在数据库（Oracle）中的 UserPassword 表中，UserId、Password 和 CreateDtm 是一个复合键（我无法更改）

目前我的映射文件看起来像

```
<hibernate-mapping assembly="DomainEntities" namespace="DomainEntities.Models" xmlns="urn:nhibernate-mapping-2.2">

  <class name="User" table="USERS" lazy="true" >
    <id name="Id">
      <column name="USER_ID" sql-type="NUMBER" not-null="true" unique="true"/>
      <generator class="identity"/>
    </id>

    <bag name="OldPasswords" cascade="all" inverse="true">
      <key column="USER_ID" not-null="true" />
      <one-to-many class="UserPassword" />
    </bag>

  </class>
</hibernate-mapping>

<hibernate-mapping assembly="DomainEntities" namespace="DomainEntities.Models" xmlns="urn:nhibernate-mapping-2.2">

  <class name="UserPassword" table="USER_PASSWORDS" lazy="true" >

    <composite-id>
      <key-property name="UserId" column="USER_ID" />
      <key-property name="Password" column="OLD_PASSWORD" />
      <key-property name="CreateDtm" column="CREATE_DATE" />
    </composite-id>

  </class>

</hibernate-mapping> 
```

查询用户对象时，它会正确加载用户密码，但是，我无法在列表中添加或删除新密码。

我尝试在 User 对象上添加映射，但是在尝试提交事务时，它在 CreateDtm 的无效数组索引上引发了异常。我怀疑这是因为复合键。

我是否在映射中遗漏了什么，或者这是一个无法完成的场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:20:30.477

我错过了复合 ID 中的标签。

复合 ID 现在看起来像

```
<composite-id> 
  <key-many-to-one name="User" column="USER_ID" lazy="proxy" class="User" /> 
  <key-property name="Password" column="OLD_PASSWORD" /> 
  <key-property name="CreateDtm" column="CREATE_DATE" /> 
</composite-id> 
```

这个问题的另一部分是父级的级联模式。我需要将级联设置为“add-delete-orphan”以删除从集合中删除的项目。

# c# - 以编程方式将数据发布到 Web 表单时出现乱码 httpWebResponse 字符串

> ID：12132873
> 
> 赞同：1
> 
> 时间：2012-08-26T18:43:51.100
> 
> 标签：c#, asp.net, character-encoding, httpwebrequest, httpwebresponse

我试图搜索有关此问题的先前讨论，但没有找到，可能是因为我没有使用正确的关键字。

我正在编写一个将数据发布到网页并获得响应的小程序。我发布数据的网站不提供 API。经过一番谷歌搜索后，我想到了 HttpWebRequest 和 HttpWebResponse 的使用。代码如下所示：

```
HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create("https://www.site.com/index.aspx");

CookieContainer cookie = new CookieContainer();

httpRequest.CookieContainer = cookie;

String sRequest = "SomeDataHere";

httpRequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

httpRequest.Headers.Add("Accept-Encoding: gzip, deflate");

httpRequest.Headers.Add("Accept-Language: en-us,en;q=0.5");

httpRequest.Headers.Add("Cookie: SomecookieHere");

httpRequest.Host = "www.site.com";
httpRequest.Referer = "https://www.site.com/";
httpRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1";
httpRequest.ContentType = "application/x-www-form-urlencoded";
//httpRequest.Connection = "keep-alive";

httpRequest.ContentLength = sRequest.Length;

byte[] bytedata = Encoding.UTF8.GetBytes(sRequest);
httpRequest.ContentLength = bytedata.Length;
httpRequest.Method = "POST";

Stream requestStream = httpRequest.GetRequestStream();
requestStream.Write(bytedata, 0, bytedata.Length);
requestStream.Flush();
requestStream.Close();

HttpWebResponse httpWebResponse = (HttpWebResponse)httpRequest.GetResponse();

string sResponse;
using (Stream stream = httpWebResponse.GetResponseStream())
{
    StreamReader reader = new StreamReader(stream, System.Text.Encoding.GetEncoding("iso-8859-1"));
    sResponse = reader.ReadToEnd();
}

return sResponse; 
```

我使用 firefox 的 firebug 来获取要发布的标题和数据。

我的问题是，当我使用字符串存储和显示响应时，我得到的只是乱码，例如：

```
?????*??????xV?J-4Si1?]R?r)f?|??;????2+g???6?N-?????7??? ?6?? x???q v ??? j?Ro??_*?e*??tZN^? 4s?????? ??Pwc??3???|??_????_??9???^??@?Y??"?k??,?a?H?Lp?A?$ ;???C@????e6'?N???L7?j@???ph??y=?I??=(e?V?6C?? 
```

通过使用 FireBug 读取响应标头，我得到了响应的内容类型：

```
Content-Type    text/html; charset=ISO-8859-1 
```

它反映在我的代码中。我什至尝试过其他编码，例如 utf-8 和 ascii，但仍然没有运气。也许我走错了方向。请指教。一个小的代码片段会更好。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T18:54:57.697

你告诉服务器你可以接受压缩响应`httpRequest.Headers.Add("Accept-Encoding: gzip, deflate");`。尝试删除该行，您应该会得到一个明文响应。

如果您想允许压缩响应，HttpWebRequest 确实[内置了对 gzip 和 deflate 的支持。](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.automaticdecompression.aspx)删除 Accept-Encoding 标题行，并将其替换为

```
httpRequest.AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate 
```

这将为您添加适当的 Accept-Encoding 标头，并在您收到内容时自动处理解压缩内容。

# c++ - cv::Mat 大整数

> ID：12132876
> 
> 赞同：3
> 
> 时间：2012-08-26T18:44:32.727
> 
> 标签：c++, opencv, integer, 8-bit

我正在努力将大整数（例如 2942584）放入 cv Mat 中。唯一接受它的类型是 CV_8UC1，但它将值从 2942584 更改为 120（显然是 8 位）。

但是无论如何在 cv Mat 中有原始值吗？

如果有帮助，这是简单的代码：

```
Mat matrix(6,10,CV_8UC1);
matrix.at<char>(0,0) = 2942584;
cout << (int)matrix.at<char>(0,0); 
```

输出：

```
120 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-26T18:59:11.923

当您定义矩阵时，`CV_8UC1`您定义每个元素必须是 8 位。这意味着您只能存储 0 到 255 之间的值。如果您想使用一个大数字，您应该将矩阵定义为`CV_32UC1`for`unsigned integers`或`CV_32SC1`for `signed integers`。此外，您应该存储一个值`int`而不是`char`并以适当的方式读取它。

更正确的代码是

```
Mat matrix(6,10,CV_32SC1); 
matrix.at<int>(0,0) = 2942584;
cout << (int)matrix.at<int>(0,0); 
```

还有一件事：矩阵元素的格式如下

```
CV_<NUMBER_OF_BITS><SIGNED/UNSIGNED>C<NUMBER_OF_CHANNELS> 
```

# c# - 如何从 DateTime 字符串中检索日期和时间

> ID：12132878
> 
> 赞同：0
> 
> 时间：2012-08-26T18:44:40.630
> 
> 标签：c#, .net

如何从`DateTime`字符串中检索日期和时间？

```
DateTime datefrom = 8/27/2012 12:08:25 AM 
```

我只想将日期检索到一个变量中，而仅将时间（使用 AM/PM）检索到另一个变量中。

我想要这样的东西：

```
string date = 8/27/2012
string time = 12:08:25 AM 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T18:47:16.213

用这个：

```
 string date = dateform.ToString("MM/dd/yy");
    string time = dateform.ToString("hh:mm:ss tt");

MM - month
dd - day
yy - year, can also use yyyy if you want it with 4 numbers

hh - hour
mm - minute
ss - second
t - one letter as in AM -> A and PM - P
tt - two letters AM/PM 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T18:51:56.533

您可以使用 Date 和 timeOfDay 属性

```
//Date
dateform.Date;

//Time
dateform.TimeOfDay; 
```

您可以使用 ToString 来格式化

# asp.net-mvc-3 - MVC3 使用 EF4.3 和依赖注入问题

> ID：12132879
> 
> 赞同：2
> 
> 时间：2012-08-26T18:44:44.517
> 
> 标签：asp.net-mvc-3, entity-framework, dependency-injection

我最近一直在使用 Entity Framework 4.3 和依赖注入来学习 MVC3，因此我可以在以后实现单元测试。我现在正在尝试实现一些我在各种示例中看到的功能，但是我遇到了一些似乎源于我使用依赖注入的问题，因此我希望有人指出我哪里出错了。

我的第一个问题很简单；在我见过的大多数 MVC3 示例中，对数据库的访问是在控制器中完成的，但是当使用依赖注入时，我似乎需要将此代码重构到已实现的存储库中。这是正常和正确的吗？

我的第二个更深入的问题是处理这个简单的例子：

我的存储库类中有这个方法，它几乎是从在线示例（[此处](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)）复制而来的。但是我收到关于该部分的错误`Include`，并且智能感知确实说该变量需要是一个字符串。我已经尝试了前面提到的链接中的原始代码，并且效果很好，该项目之间的唯一主要区别是我使用的是依赖注入。

```
public ExampleUser GetStruContractUser(int id)
{
    ExampleUser user = context.ExampleUsers
        .Include(i => i.ExampleRoles)
        .Where(i => i.UserID == id)
        .Single();

    return user;
} 
```

将参数更改`Include`为以下工作正常。

```
public ExampleUser GetStruContractUser(int id)
{
    ExampleUser user = context.ExampleUsers
        .Include("ExampleRoles")
        .Where(i => i.UserID == id)
        .Single();

    return user;
} 
```

作为参考，这是我正在使用的 DbContext 类：

```
public class EFDbContext : DbContext
{
    public DbSet<ExampleUser> ExampleUsers { get; set; }
    public DbSet<ExampleRole> ExampleRoles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Entity<ExampleUser>().ToTable("User", "MySchema");
        modelBuilder.Entity<ExampleRole>().ToTable("Role", "MySchema");

        modelBuilder.Entity<ExampleUser>()
            .HasMany(m => m.ExampleRoles)
            .WithMany(t => t.ExampleUsers)
            .Map(a =>
            {
                a.MapLeftKey("UserID");  // your PK column name in user table
                a.MapRightKey("RoleID"); // your PK column name in role table
                a.ToTable("UserRole", "MySchema");  // your join table name
            });
        }
    } 
```

这是由于我使用依赖注入导致的问题，还是我误解了其他事情？

如果您需要更多信息，请询问，我会尽力提供。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:16:13.223

**问题 1：** 使用 DI 并不强制您使用存储库模式，实际上它们是不相关的。这只是避免将控制器类与数据库上下文类紧密耦合并因此能够更轻松地测试这些类的好方法。存储库使您能够隐藏您如何访问数据库的实现细节，并允许您切换 ORM:s 如果发生这种情况（它永远不会发生）。Repository 依赖于您为 DbContext 提供接口，使用 DI 也是如此。

您想要做的是通过接口使用您的数据库，并且看到您正在使用 DI，您可以在控制器的构造函数中注入对 DbContext 类的引用，并让 DI 控制器为您完成工作.

将定义存储库的接口传递给控制器​​优于传递定义 DbContext 的接口的原因是，使后者的接口很容易变得过于复杂，而坚持使用存储库要简单得多。不过，为了简单起见，我将从直接使用 DbContext 开始，然后从那里扩展。

**问题2：**

Include 需要包含表的名称作为字符串。所以你后面对 Include 的使用是正确的，而前者不是。

如果我没记错的话，你可以这样做：".Include(i => i.ExampleRoles.Name)" 来实现同样的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T19:22:11.317

是的，提取您的数据库层（存储库/上下文）然后将其注入您的业务层（控制器）是非常正常的，并且是未来证明您的应用程序的好方法。如果您想将数据库 ORM 从实体框架更改为其他东西怎么办？将它与您的控制器紧密耦合会让人头疼。

您的第二个问题 with`include`与依赖注入无关。

`Include`在`dbset`使用 lambdas 中的扩展`System.Data.Entity`。如果您想使用它，您需要包含该参考。

# java - 为什么Java中没有Hashable接口

> ID：12132880
> 
> 赞同：23
> 
> 时间：2012-08-26T18:44:45.980
> 
> 标签：java, interface, hashcode

`Object`在 Java 中有`hashCode`方法，但是，它仅用于关联容器，如`HashSet`or `HashMap`。为什么会这样设计？`Hashable`具有`hashCode`方法的接口看起来更加优雅的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-26T18:47:50.097

在我看来，主要论点是`hashCode`可以为任何 Java 对象计算一个定义良好的默认值，以及一个同样定义良好的`equals`. 根本没有充分的理由对所有对象保留此功能，当然也有很多理由**不**保留它。所以这在我的书中是显而易见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T16:35:42.897

这个问题被声称与另一个问题重复，它询问为什么没有接口的行为类似于`Comparator`（与 不同`Comparable`）但用于散列。.NET 包含这样一个接口，称为`IEqualityComparer`，看起来 Java 也可以。事实上，如果有人想拥有一个 Java 集合，例如以不区分大小写的方式将字符串映射到其他对象（可能是 最常见的用法`IEqualityComparer`），则必须将字符串包装在对象中，其`hashCode`和`equals`方法在不区分大小写的基础上起作用.

我怀疑最大的问题是，虽然“equalityComparer”接口可能很方便，但在许多情况下，有效地测试等价关系需要缓存信息。例如，虽然不区分大小写的字符串散列函数可以制作传入字符串的仅大写副本并调用`hashCode`它，但很难避免对特定字符串的哈希码的每个请求都重复转换为大写和该大写值的散列。相比之下，“不区分大小写的字符串”对象可以包含字符串的仅大写副本的字段，然后只需为实例生成一次。

如果 An`EqualityComparer`包含类似 a 将原始字符串转换为仅大写字符串的功能，则可以实现合理的性能`WeakHashMap<string,string>`，但是这样的设计要么需要不同的线程使用不同`EqualityComparer`的实例，尽管缺乏外部可见状态，否则需要性能抢夺锁定和即使在单线程场景中也可以同步代码。

顺便说一句，比较器样式接口出现的第二个问题是，使用外部提供的比较器的集合类型（无论是比较等级还是相等）是比较器本身成为使用它的类的状态的一部分。如果哈希表使用不同的 EqualityComparer 实例，则可能无法知道它们是否可以安全地被视为等效，即使两个比较器在所有情况下的行为都相同。

# php - 如何使用 PHP 构建多级导航

> ID：12132881
> 
> 赞同：0
> 
> 时间：2012-08-26T18:44:46.543
> 
> 标签：php, html, arrays, navigation, html-lists

我正在研究一个原型，并且想构建一个多级导航 - 但不是通过循环遍历数组。我有一个 $depth 和一个 $children，它们应该确定导航的深度和每个级别的子级数量。所以 $depth = 4, $children = 8 将产生 4096 个菜单项。

这是我想要的输出片段：

```
<ul>
    <li class="level-1">
        <a href="#">Subject 1</a>
        <ul>
            <li class="level-2">
                <a href="#">Subject 1.1</a>
                <ul>
                    <li class="level-3">
                        <a href="#">Subject 1.1.1</a>
                    </li>
                    ...
                </ul>
            </li>
            ...
        </ul>
    </li>
    ...
</ul> 
```

到目前为止，我已经尝试过这个，但我无法理解它:(

```
function draw_list ($depth, $children) {

  echo '<ul>';

  for ($i = 0; $i < $children; $i++) {

    echo '<li>' . ($i++);

    $depth--;

    if ($depth > 0) {

      echo draw_list($depth, $children);

    }

    echo '</li>';

  }

  echo '</ul>';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:56:36.877

我认为需要几件事......

*   `$depth--;`需要在循环`for`之外
*   您增加`$i`了两次，一次在`for`语句中，然后再次在`echo '<li>' . ($i++);`
*   ~~$depth 检查提前停止，所以 make`>=`而不是只是`>`~~（**编辑**，考虑一下，这是一个不正确的陈述）

那应该给你...

```
function draw_list ($depth, $children) {  
  echo '<ul>';
  $depth--;
  for ($i = 0; $i < $children; $i++) {
    echo '<li>' . $i;
    if ($depth > 0) {
      echo draw_list($depth, $children);
    }
    echo '</li>';
  }
  echo '</ul>';
} 
```

**更新**

对于级别编号的显示，请尝试将字符串值作为参数传递...

```
function draw_list ($depth, $children, $display=''){  
  echo '<ul>';
  $depth--;
  for ($i = 0; $i < $children; $i++) {
    echo '<li>' . $display . ($i + 1);
    if ($depth > 0) {
      echo draw_list($depth, $children, $display . ($i + 1) . '.');
    }
    echo '</li>';
  }
  echo '</ul>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:36:06.817

我最终这样做了：

```
function build_nav ($depth, $children, $levels = array()) {

    echo '<ul>';
    $depth--;
    for ($i = 0; $i < $children; $i++) {

        $levels[$depth] = $i+1;

        echo '<li>';
        echo 'Subject: ' . implode('.', $levels); 

        if ($depth > 0) {
            build_nav($depth, $children, $levels);
        }
        echo '</li>';
    } 
    echo '</ul>';
} 
```

# android - 在clockWorkMod中将apk转换为zip可闪存？

> ID：12132882
> 
> 赞同：7
> 
> 时间：2012-08-26T18:44:51.677
> 
> 标签：android, flash, zip, apk

如何在clockWorkMod 中将apk 转换为可闪存的zip？我尝试使用 ApkInstaller。它没有用。不断收到错误；“安装中止”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:54:04.660

您可以将应用程序的 .apk 扩展名更改为 .zip 然后将 .zip 放入 SD 卡中，看看是否可以使用 CWM 进行闪存。

我不知道你想做什么，所以如果你能指定更多信息，那就太好了。

如果您只想在手机中安装一个应用程序（.apk），那么您可以按照本[教程](http://www.talkandroid.com/guides/beginner/install-apk-files-on-android/)进行操作。

# html - 如何在css中定义多个类的悬停事件？

> ID：12132884
> 
> 赞同：34
> 
> 时间：2012-08-26T18:45:13.650
> 
> 标签：html, css

在 css 中，如何定义多个类的悬停事件以使用相同的属性。这似乎不起作用：

```
.my_div:hover .my_td:hover {
    border: 1px solid red;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-26T18:46:18.980

您应该用逗号分隔，如下所示：

```
.my_div:hover, .my_td:hover {
      border: 1px solid red;
}
.contact-dpd:hover .contact-content, .work-dpd:hover .work-content{
     display:block
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-26T18:46:21.393

中间加逗号：`.my_div:hover, .my_td:hover`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-26T18:46:46.493

这应该工作

```
.my_div:hover, .my_td:hover {
        border: 1px solid red;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-26T18:46:41.220

尝试

```
.my_div:hover, .my_td:hover {
    border: 1px solid red;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-27T17:44:59.100

看看 CSS 选择器 Level 4：

> `:where()`CSS 伪类函数将选择器列表作为其参数，并选择可以由该列表中的选择器之一选择的任何元素。
> 
> `:where()`和之间的区别在于`:is()`它`:where()`始终具有 0 特异性，而`:is()`在其参数中采用最具体的选择器的特异性。

```
:where(.a, .b):hover {
  outline: 1px solid red;
}
```

```
<div class="a">a</div>
<div class="b">b</div>
<div class="c">c</div>
```

它也适用于选择子元素：

```
:where(header, footer) p:hover {
  outline: 1px solid red;
}

:where(main, aside) p:hover {
  outline: 1px solid blue;
}

:where(header, footer) a {
  color: red;
}

b, i {
  color: green;
}

main :where(b, i) {
  outline: 1px solid;
  color: black;
}
```

```
<header>
  <p>header <a href="#">link</a></p>
</header>
<main>
  <p>main <a href="#">link</a> <b>bold</b> <i>italic</i></p>
</main>
<aside>
  <p>aside <a href="#">link</a> <b>bold</b> <i>italic</i></p>
</aside>
<footer>
  <p>footer <a href="#">link</a></p>
</footer>
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-08-04T13:22:30.813

您应该以这种方式分离 CSS 类和事件：

```
.my_div, .my_td {
  &:hover {
    border: 1px solid red;
  }
} 
```

# java - Android SIP call.startAudio() 不工作

> ID：12132885
> 
> 赞同：1
> 
> 时间：2012-08-26T18:45:16.507
> 
> 标签：java, android, sip, voip

我正在为 Android 2.3 制作一个 VoIP 程序，所以没有 RTP API，但它也应该发送声音。当我打电话给我的 Android 客户端时，一切都很好。但是，当我从 Android 客户端发起呼叫时，SIP 通信正常，但根本没有声音。有人可以帮我吗？我错过了什么？

```
if (this.btnCall.isPressed()) {
  call = manager.makeAudioCall(profile.getUriString(), cdpa, listener, 30);
  call.startAudio();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:27:39.653

您应该等到呼叫建立。在您的侦听器中使用以下方法：

```
@Override
public void onCallEstablished(SipAudioCall call) {
   call.startAudio();
   if (call.isMuted()) {
      call.toggleMute();
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-01T15:38:14.667

发生在我身上也是一样

我解决了使用将此添加到清单

```
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.USE_SIP"/>
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<uses-feature android:name="android.hardware.sip.voip" android:required="true" />
<uses-feature android:name="android.hardware.wifi" android:required="true" />
<uses-feature android:name="android.hardware.microphone" android:required="true" />

<receiver android:name=".IncomingCallReceiver" android:label="Call Receiver" /> 
```

# c++ - 构建后共享 boost::shared_ptr 的所有权

> ID：12132889
> 
> 赞同：0
> 
> 时间：2012-08-26T18:45:28.413
> 
> 标签：c++, boost, shared-ptr

假设我有两个`boost::shared_ptr`'s 指向两个不同的对象`class A`：

```
boost::shared_ptr<A> x = boost::make_shared<A>();
boost::shared_ptr<A> y = boost::make_shared<A>(); 
```

在某些时候，我需要`x`放弃它所拥有的对象的所有权，并`y`与`y`. 这是如何实现的（请注意，两个 shared_ptr 都是在那时构造的，所以没有机会使用复制构造函数）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T18:48:25.027

您可以简单地分配它：

```
x = y; 
```

请参阅[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr/operator%3D)和[boost::shared_ptr assignment](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/shared_ptr.htm#Members)的赋值运算符。您可以通过检查分配前后的引用计数来验证这一点。此示例使用 C++11 `std::shared_ptr`，但`boost::shared_ptr`会产生相同的结果：

```
#include <memory>
int main()
{
    std::shared_ptr<int> x(new int);
    std::cout << x.use_count() << "\n"; // 1
    std::shared_ptr<int> y(new int);
    std::cout << x.use_count() << "\n"; // still 1
    y = x;
    std::cout << x.use_count() << "\n"; // 2
} 
```

# java - 在 webdriver 的页面中找不到 webElement 时不会出现 NoSuchElement 异常

> ID：12132895
> 
> 赞同：3
> 
> 时间：2012-08-26T18:45:54.850
> 
> 标签：java, webdriver, selenium-webdriver

在 webdriver 的页面中找不到 webElement 时不会出现 NoSuchElement 异常

当 webelement 在页面中可用时，对该 webelement 所做的所有操作都将起作用，但如果该 webelement 在该页面中不可用，那么理想情况下，当我们对该 webelement 执行任何操作时，它应该抛出异常。但对我来说，没有例外，测试没有响应，即使在调试时它也没有在那个地方响应。

谁能告诉我这正在发生吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T07:17:31.920

尝试通过设置隐式超时来查找元素

```
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
try {
    driver.findElement(By.id("element_id"));
    System.out.println("Element Found");
} catch (NoSuchElementException e) {
    System.out.println("Element Not Found");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:43:44.077

我希望你在对它采取行动之前在' **Try/Catch '块中'*****断言***'元素存在。一般做法（我遵循的和我知道的许多做法）是断言元素存在，然后对其执行操作（如果为真）。

 **就像是 -

```
public boolean isElementPresent(By by) {
    try {
        driver.findElement(by);
        System.out.println("Element Present");
        return true;
    } catch (NoSuchElementException e) {
        System.out.println("Element absent");
        return false;
    }
} 
```

可能会为您解决问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-21T14:09:48.250

```
[FindsBy(How = How.CssSelector, Using = "someCssSelector")]
IWebElement element;

  public static bool IsElementPresent(IWebElement element)
        {
            try
            {
                return element.Displayed;
            }
            catch (NoSuchElementException)
            {
                return false;
            }
        } 
```

上面的代码为我解决了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-12T18:16:04.510

确保导入： **import org.openqa.selenium.NoSuchElementException**；

不要导入*java.util***

# java - ListView - removeAll 不起作用？

> ID：12132896
> 
> 赞同：6
> 
> 时间：2012-08-26T18:46:11.090
> 
> 标签：java, javafx-2

（这是 Carl Dea 所著的“JavaFX 2.0 by example”一书中的代码——代码示例可在 Apress 上免费获得，所以我相信他们不介意我在这里使用它）

我有完美运行的示例代码

```
package javafx2introbyexample.chapter1.recipe1_11;

import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.HPos;
import javafx.geometry.Insets;
import javafx.geometry.VPos;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ListView;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.stage.Stage;

/**
 *
 * @author cdea
 */
public class CreatingAndWorkingWithObservableLists extends Application {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        Application.launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle("Chapter 1-11 Creating and Working with ObservableLists");
        Group root = new Group();
        Scene scene = new Scene(root, 400, 250, Color.WHITE);

        // create a grid pane
        GridPane gridpane = new GridPane();
        gridpane.setPadding(new Insets(5));
        gridpane.setHgap(10);
        gridpane.setVgap(10);

        // candidates label
        Label candidatesLbl = new Label("Candidates");
        GridPane.setHalignment(candidatesLbl, HPos.CENTER);
        gridpane.add(candidatesLbl, 0, 0);

        Label heroesLbl = new Label("Heroes");
        gridpane.add(heroesLbl, 2, 0);
        GridPane.setHalignment(heroesLbl, HPos.CENTER);

        // candidates
        final ObservableList<String> candidates = FXCollections.observableArrayList("Superman",
                "Spiderman",
                "Wolverine",
                "Police", 
                "Fire Rescue", 
                "Soldiers", 
                "Dad & Mom", 
                "Doctor", 
                "Politician", 
                "Pastor", 
                "Teacher");
        final ListView<String> candidatesListView = new ListView<String>(candidates);
        candidatesListView.setPrefWidth(150);
        candidatesListView.setPrefHeight(150);

        gridpane.add(candidatesListView, 0, 1);

        // heros
        final ObservableList<String> heroes = FXCollections.observableArrayList();
        final ListView<String> heroListView = new ListView<String>(heroes);
        heroListView.setPrefWidth(150);
        heroListView.setPrefHeight(150);

        gridpane.add(heroListView, 2, 1);

        // select heroes
        Button sendRightButton = new Button(">");
        sendRightButton.setOnAction(new EventHandler<ActionEvent>() {

            public void handle(ActionEvent event) {
                String potential = candidatesListView.getSelectionModel().getSelectedItem();
                if (potential != null) {
                    candidatesListView.getSelectionModel().clearSelection();
                    candidates.remove(potential);
                    heroes.add(potential);
                }
            }
        });

        // deselect heroes
        Button sendLeftButton = new Button("<");
        sendLeftButton.setOnAction(new EventHandler<ActionEvent>() {

            public void handle(ActionEvent event) {
                String notHero = heroListView.getSelectionModel().getSelectedItem();
                if (notHero != null) {
                    heroListView.getSelectionModel().clearSelection();
                    heroes.remove(notHero);
                    candidates.add(notHero);
                }
            }
        });

        VBox vbox = new VBox(5);
        vbox.getChildren().addAll(sendRightButton,sendLeftButton);

        gridpane.add(vbox, 1, 1);
        GridPane.setConstraints(vbox, 1, 1, 1, 2,HPos.CENTER, VPos.CENTER);

        root.getChildren().add(gridpane);        
        primaryStage.setScene(scene);
        primaryStage.show();
    }
} 
```

它是用于在两个列表视图之间来回移动人员的代码，一次一个。我想要做的是可以一键选择和移动几个人。

我要更改的相关摘录是：

```
final ListView<String> candidatesListView = new ListView<String>(candidates);
    candidatesListView.setPrefWidth(150);
    candidatesListView.setPrefHeight(150);

    gridpane.add(candidatesListView, 0, 1);

    // heros
    final ObservableList<String> heroes = FXCollections.observableArrayList();
    final ListView<String> heroListView = new ListView<String>(heroes); 
```

...

```
// select heroes
    Button sendRightButton = new Button(">");
    sendRightButton.setOnAction(new EventHandler<ActionEvent>() {

        public void handle(ActionEvent event) {
            String potential = candidatesListView.getSelectionModel().getSelectedItem();
            if (potential != null) {
                candidatesListView.getSelectionModel().clearSelection();
                candidates.remove(potential);
                heroes.add(potential);
            }
        }
    });

    // deselect heroes
    Button sendLeftButton = new Button("<");
    sendLeftButton.setOnAction(new EventHandler<ActionEvent>() {

        public void handle(ActionEvent event) {
            String notHero = heroListView.getSelectionModel().getSelectedItem();
            if (notHero != null) {
                heroListView.getSelectionModel().clearSelection();
                heroes.remove(notHero);
                candidates.add(notHero);
            }
        }
    }); 
```

我尝试过的改变：

首先，我添加以下导入：

```
import javafx.scene.control.SelectionMode; 
```

然后我添加行

```
candidatesListView.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);
heroListView.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE); 
```

在两个列表的各自声明下方。

最后，我将事件按钮的处理代码更改为

```
public void handle(ActionEvent event) {
            ObservableList<String> potential = candidatesListView.getSelectionModel().getSelectedItems();
            if (potential != null) {

                System.out.println(potential);
                candidates.removeAll(potential);
                heroes.addAll(potential);
                candidatesListView.getSelectionModel().clearSelection();
            }
        } 
```

那就是 - 我将其更改为 getSelectedItem_s_，然后我 addAll 和 removeAll 而不是仅仅添加/删除一个人。当我尝试将几个人移过来时，这只会使 listView 留空。是什么赋予了？

附言。我还尝试通过迭代列表“潜在”来一次添加/删除几个人，但这也给出了错误的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T19:56:18.147

不幸的是，您遇到了一个错误：http: [//javafx-jira.kenai.com/browse/RT-24367](http://javafx-jira.kenai.com/browse/RT-24367)

原始问题是下一个：`ListView.getSelectionMode()`返回它的可观察列表的一部分，但不返回副本。因此，从该列表中删除会导致各种问题。

在从中删除项目之前使用复制列表的下一个代码：

```
 sendRightButton.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent event) {
            ObservableList<String> potential = 
                FXCollections.observableArrayList( //copy
                    candidatesListView.getSelectionModel().getSelectedItems());
            if (potential != null) {
                heroes.addAll(potential);
                candidates.removeAll(potential);
                candidatesListView.getSelectionModel().clearSelection();
            }
        }
    }); 
```

# javascript - Jquery按钮选择div中的所有复选框和按钮选择页面上的所有

> ID：12132898
> 
> 赞同：0
> 
> 时间：2012-08-26T18:46:17.613
> 
> 标签：javascript, jquery, checkbox

嗨，我真的可以在这方面提供一些帮助，因为我无法让按钮选择 .voltSiteResultContainer 中的所有复选框来工作

**HTML 示例：**

```
 <div class="pageContainer">
<input type="button" class="check" value="check all"> // want this button to check all on page
<div class="voltSiteResultContainer">
    <div class="checkWrap">
        <input type="button" class="checkSite" value="check all"> // want this button to check all within .voltSiteResultContainer
    </div>
    <input name="checkFile" type="checkbox" class="checkFile" value="1514583">
    <input name="checkFile" type="checkbox" class="checkFile" value="1514583">
    <input name="checkFile" type="checkbox" class="checkFile" value="1514583">
</div>
<div class="voltSiteResultContainer">
    <div class="checkWrap">
        <input type="button" class="checkSite" value="check all"> // want this button to check all within .voltSiteResultContainer
    </div>
    <input name="checkFile" type="checkbox" class="checkFile" value="1514583">
    <input name="checkFile" type="checkbox" class="checkFile" value="1514583">
    <input name="checkFile" type="checkbox" class="checkFile" value="1514583">
</div> 
```

**当前的jQuery：**

```
 <script type="text/javascript">
            $(document).ready(function(){
        $('.check:button').toggle(function(){
            $('input:checkbox').attr('checked','checked');
            $(this).val('uncheck all')
        },function(){
            $('input:checkbox').removeAttr('checked');
            $(this).val('check all');        
        })
    })
            $(document).ready(function(){
        $('.checkSite:button').toggle(function(){
            .closest('.voltSiteResultContainer').find('input:checkbox').attr('checked','checked');
            $(this).val('uncheck all')
        },function(){
            $('input:checkbox').removeAttr('checked');
            $(this).val('check all');        
        })
    }) 
```

所以 $('.check:button') 工作但 $('.checkSite:button') 不是:(。

提前感谢您可以给我的任何帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:51:10.257

## *[jsBin 演示](http://jsbin.com/ojihos/1/edit)*

添加第 11 行 - 并在您的 HTML 中`$(this)`缺少：`</div>`

```
 $(document).ready(function(){

        $('.check:button').toggle(function(){
            $('input:checkbox').attr('checked','checked');
            $(this).val('uncheck all');
        },function(){
            $('input:checkbox').removeAttr('checked');
            $(this).val('check all');        
        });

        $('.checkSite:button').toggle(function(){
            $(this).closest('.voltSiteResultContainer').find('input:checkbox').attr('checked','checked'); // HERE!!
            $(this).val('uncheck all');
        },function(){
            $(this).closest('.voltSiteResultContainer').find('input:checkbox').removeAttr('checked');
            $(this).val('check all');        
        });

}); 
```

固定的 HTML 标记：

```
<div class="pageContainer">
    <input type="button" class="check" value="check all" /> // want this button to check all on page
    <div class="voltSiteResultContainer">
      <div class="checkWrap">
         <input type="button" class="checkSite" value="check all" /> // want this button to check all within .voltSiteResultContainer
      </div>
      <input name="checkFile" type="checkbox" class="checkFile" value="1514583" />
      <input name="checkFile" type="checkbox" class="checkFile" value="1514583" />
      <input name="checkFile" type="checkbox" class="checkFile" value="1514583" />
    </div>  
</div>

<div class="voltSiteResultContainer">
    <div class="checkWrap">
      <input type="button" class="checkSite" value="check all" /> // want this button to check all within .voltSiteResultContainer
    </div>
   <input name="checkFile" type="checkbox" class="checkFile" value="1514583" />
   <input name="checkFile" type="checkbox" class="checkFile" value="1514583" />
   <input name="checkFile" type="checkbox" class="checkFile" value="1514583" />
</div> 
```

# design-patterns - 通过构造函数注入装饰与简单继承

> ID：12132905
> 
> 赞同：6
> 
> 时间：2012-08-26T18:46:51.770
> 
> 标签：design-patterns, inversion-of-control

有人可以告诉我使用构造函数注入另一个类而不是类继承来创建装饰器类之间的区别（如好处）吗？在我能想到的例子中，我可能会以两种方式中的一种来实现相同的最终目标，但我怀疑我错过了一些基本的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T19:22:03.250

装饰器模式涉及*组合*对象。为了能够继承该对象的类型，它显然必须是可继承的。并非所有类型都是为继承而设计的，也就是说，它们都是基类，即使从纯粹的技术角度来看它们*可以*被继承（我认为这是一个设计缺陷）。

装饰器模式存在的理由是能够在不修改对象本身的情况下修改对象的行为。通过继承，您实际上是在修改对象本身，然后您得到的是通过多态性进行的常规行为变化，这意味着您*没有*完成相同的事情。

因此，装饰和继承都有其用途。当其中任何一个为真时使用装饰

*   您不能继承（例如，如果该类`sealed`在 C# 中）
*   你不应该继承（该类显然不是基类）
*   你想多次改变一个特定对象的行为（通过用不同行为的装饰器包装它）

请注意，继承是 OO 工具箱中最强大的工具。强大的力量伴随着巨大的责任，而这并不总是容易应付的。我会说：总是组合或聚合。当这无法完成时，继承。如果你不能继承，那就更努力地组合或聚合。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T21:35:42.053

我将恢复如下：

**你应该什么时候继承？**

当对象来自相同的语义层次并表示**is-a**关系时。

**那是什么意思？**

那 a `Cat` **is-a** `Feline`，确实 a `Feline` **is-a** `Vertebrate`，等等。

**你应该什么时候装修？**

当对象不代表**is-a**关系时。但是，是的，两者`Coffee`和`Milk`都可以在同一个层次结构中。但如果你[要卖`Cappuccino`](https://docs.google.com/viewer?a=v&q=cache:Em8s7PAXGiIJ:oreilly.com/catalog/hfdesignpat/chapter/ch03.pdf%20&hl=pt-BR&gl=br&pid=bl&srcid=ADGEESgBAGZCF8KBhAQuEDnCfvuNpfUkfTG-x4gOpiMz1NLlFBh_U1gpgPzmEeSwQ_HxdSSzJqKh63cxIaT6AORfUSp7CSAIpvqKfvfOoaiUUGBFllHPPKUrHP2gNuJMd_jlH2x9GsSr&sig=AHIEtbRfil6hswRnHGTl1qVdwX6Q_0hq2Q)，你不会说咖啡**是**牛奶，而是用`Milk`.

**结论：**

**[Is-a](http://en.wikipedia.org/wiki/Is-a)**与**[has-a](http://en.wikipedia.org/wiki/Has-a)**不同。一个是**子类型**，另一个是**组合的一部分**。

但是，请参阅：[https ://stackoverflow.com/questions/1621344/head-first-design-patterns-decorator-pattern](https://stackoverflow.com/questions/1621344/head-first-design-patterns-decorator-pattern)

一个真实的例子是为您的控制器或服务创建一个[安全容器作为装饰器](https://stackoverflow.com/questions/3430181/acl-implementation/9685039#9685039)，以便进行 ACL 检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T21:55:11.683

装饰的另一个非常好的理由是它为您提供了装饰接口而不是类的选项。然后你变得非常松散耦合，并且可以将正交装饰行为添加到接口的多个实现中，而无需编写更多代码。

# javascript - 如何通过一次开发实现网站、Android 应用和 Iphone 应用？

> ID：12132906
> 
> 赞同：0
> 
> 时间：2012-08-26T18:46:54.250
> 
> 标签：javascript, android, iphone

我想开发一个网站，以及一个 android 应用程序和一个 iphone 应用程序。

该程序的基本功能/需求是：

*   使用地理位置来发现用户所在的位置
*   供用户发送付款的支付系统。

我的问题是我可以采取什么开发路线来一次完成所有 3 个 - 或者几乎不需要在 3 个之间进行。网站可能是 php + javascript，Android 是 java，而 Iphone 是 Objective-c。我不想做 3 个单独的开发，只有 1 个，它必须具有我需要的所有功能。

举个例子，考虑一下 groupon.com（虽然这个程序没有任何关系）。他们有一个网站、iphone 应用程序和 android 应用程序。

如果你建议像 Phonegap 这样的东西，你为什么建议这样做，它的缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:19:40.600

您有很多选择，最好使用移动 jquery 或 sencha 框架并将其部署为网站+应用程序。

Phonegap 可以访问您的默认 api。因此，如果您想要精确定位，请使用 Phonegap，但您不能在移动站点中使用它。在移动站点中，您可以使用 Google API。

# php - 如何将访问者引导至备用页面

> ID：12132907
> 
> 赞同：1
> 
> 时间：2012-08-26T18:46:58.930
> 
> 标签：php, ab-testing

基本上，我正在尝试制作一个拆分测试的网络应用程序，但我对如何在没有任何竞争条件的情况下做到这一点有点困惑。

基本上，有3页：

*   main_page.php
*   page1.php
*   page1_alt.php

所以过程如下：

1.  用户访问 main_page.php
2.  main_page.php 检查 cookie

    *   一个。如果没有 cookie 创建一个 cookie，
    *   湾。检查最后一位访问者被发送到的页面
    *   C。将当前访问者发送到另一个页面（如果最后一个访问者访问 page1.php，则将这个访问者发送到 page1_alt.php）

我已经解决了 cookie 问题，我只想知道您认为如何执行步骤 2b 的最佳方法。如果我写信给数据库，那将是不切实际的。如果我引用一个文本文件，它会产生可能的竞争条件。

**编辑**：如果您认为有比从头开始更简单的方法，请给我一些建议。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T21:20:47.667

我知道 google analytic 可以进行拆分测试，我不确定您的最终目标是什么，但是使用 GA 它将拆分用户并测试哪个页面最能帮助用户达到目标。抱歉，如果这不是您要找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T21:37:37.930

我不确定我是否完全理解您为什么要这样做，或者为什么写入数据库是不切实际的。如果您想以精确的精度拆分它们，在我看来，这似乎是最好的解决方案。

但是，如果您只需要在没有 DB 访问权限的情况下将它们大致拆分，您可能会很有创意：

```
if (date('s') % 2 == 1) {
  header("Location: page1.php");
} else {
  header("Location: page1_alt.php");
} 
```

当然，这也有一定的可能性，但由于秒数是平均分布的，如果你有足够的用户，这两个组应该非常接近相等的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:52:38.003

考虑使用会话而不是 cookie。会话是跟踪用户活动的更灵活和安全的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T18:59:43.100

您应该使用[会话](http://php.net/manual/en/features.sessions.php)和`header("Location:...);`. 从那你可以做这样的事情

```
 if (!isset($_SESSION["var"])) {
    header("Location: main_page.php");
} 
```

`$_SESSION["cookie"]`你想把它设置在哪里。我想在您的情况下，您可以将它们设置为最后的页面。然后，您可以检查它是否存在和/或它是什么，并用于`header`将它们发送到适当的页面。

# python - 将诸如“6:02PM”之类的纯时间字符串转换为日期时间对象？

> ID：12132908
> 
> 赞同：3
> 
> 时间：2012-08-26T18:47:01.070
> 
> 标签：python, datetime

我有一个在 %I:%M%p 中给出的输入（例如“6:02PM”）。我正在尝试输入此代码以找出现在和那时之间的区别：

```
import datetime

now = datetime.now()
then = "6:02PM"
tdelta = now - then 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:56:03.697

```
import datetime as dt

now = dt.datetime.now()
then = dt.datetime.combine(now, dt.datetime.strptime("6:02PM", "%I:%M%p").time())
print(then)
# 2012-08-26 18:02:00

tdelta = now - then
print(tdelta)
# -1 day, 20:53:25.190721 
```

# hibernate - JPA 休眠异常

> ID：12132911
> 
> 赞同：1
> 
> 时间：2012-08-26T18:47:30.563
> 
> 标签：hibernate, jpa

我正在使用 JPA 和 Hibernate 将对象存储在数据库中，但出现异常：

线程“主”java.lang.IllegalStateException 中的异常：com.Main.main(Main.java:46) 的 org.hibernate.ejb.TransactionImpl.rollback(TransactionImpl.java:82) 处的事务不活动

这些是我的 com 包中的类

用户.java

```
package com;

import javax.persistence.*;

/**
 * this class show entity corresponding to 
 * 
 * user table in database
 * @author hemendra
 *
 */
@Entity
@Table(name="user")
public class User {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int id;

    @Column(name="name")
    private String name;

    @Column(name="password")
    private String password;

    public void User() {
        System.out.println("sjdflsjl");
    }

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof User) {
            User user = (User) obj;
            return user.getId() == this.getId();
        }

        return false;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

} 
```

主类.java

```
/*  this package contains classes
 *   for database connectivity
 *   and operation
 */ 

package com;

import javax.persistence.*;

/**
 * this class is for testing the 
 * 
 * connectivity to database
 * @author Hemendra
 *
 */
public class MainClass {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        /**
         * Get EntityManagerFactory from 
         * 
         * @link persistence.xml file
         */
        EntityManagerFactory factory = Persistence.createEntityManagerFactory("Hello");

        //creation of entity manager for transaction
        EntityManager manager =  factory.createEntityManager();

        try {
            manager.getTransaction().begin();
            User user = new User();
            user.setName("anc");
            user.setPassword("sdfs");
            manager.persist(user);
            manager.getTransaction().commit();

        } catch (Exception e ) {
            manager.getTransaction().rollback();
            e.printStackTrace();
        } finally {
            factory.close();            
        }
         System.out.println("It is over");
    }

}

and i have persistence.xml file in src/META-INF folder 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="Hello" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <properties>
            <property name="hibernate.show_sql" value="true" />
            <property name="javax.persistence.jdbc.driver"
                value="com.mysql.jdbc.Driver" />
            <property name="javax.persistence.jdbc.url"
                value="jdbc:mysql://localhost:3307/Test" />
            <property name="javax.persistence.jdbc.user" value="root" />
            <property name="javax.persistence.jdbc.password"
                value="root" />
            <property name="hibernate.dialect"
                value="org.hibernate.dialect.MySQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
        </properties>
    </persistence-unit>
</persistence> 
```

你能解决这个问题吗？我不知道为什么我会遇到这种异常。提前致谢

# ruby-on-rails - Rails 回形针 img 上传错误：安装 rmagick 时“未选择文件”

> ID：12132916
> 
> 赞同：0
> 
> 时间：2012-08-26T18:48:27.307
> 
> 标签：ruby-on-rails, paperclip, rmagick, image-upload

我无法使用回形针上传图片。每当我选择文件并提交页面时，都会重新加载并显示“未选择文件”。

我的代码trip.rb

```
 class Trip < ActiveRecord::Base
       has_many :images
       accepts_nested_attributes_for :images, :allow_destroy => true
       attr_accessible :messages_attributes
    end 
```

表格

```
 <%= f.fields_for :images do |image_fields| %> 
       <% if image_fields.object.new_record? %> 
         <%= image_fields.file_field :image %>  
       <% end %> 
    <% end %> 
```

图片.rb

```
 class Image < ActiveRecord::Base
     belongs_to :trips

     has_attached_file :image, :styles => { :large => "640x480", :medium => "300x300>", :thumb => "100x100" },
     :storage => :s3,
     :bucket => 'Thrill',
     :s3_credentials => {
       :access_key_id => 'XXXXXXXXXXXX',
       :secret_access_key => 'xxxxxxxxxxxxxxxxxxxxx'
     }
    end 
```

而且我还在我的 gem 文件中安装了**gem 'rmagick'**，这似乎是许多有类似问题的解决方案。但在我的情况下并非如此。

有什么想法可能是错的吗？谢谢！

**更新**

通过 Rails 控制台

`Image.create :image => File.open('c:/sites/thrillb/app/assets/images/srf.jpg')`

也不工作。

```
 identify.exe: unable to open image `AppData/Local/Temp/stream20120826-41544-1no4
 vdp.jpg': No such file or directory @ error/blob.c/OpenBlob/2641.
 identify.exe: unable to open image `AppData/Local/Temp/stream20120826-41544-1no4
 vdp.jpg': No such file or directory @ error/blob.c/OpenBlob/2641.
 identify.exe: unable to open image `AppData/Local/Temp/stream20120826-41544-1no4
 vdp.jpg': No such file or directory @ error/blob.c/OpenBlob/2641.
 => #<Image id: nil, image_file_name: "srf.jpg", image_content_type: "image/jpeg"
 , image_file_size: 142825, image_updated_at: "2012-08-26 19:28:19", trip_id: nil
 , created_at: nil, updated_at: nil, title: nil, location_id: nil> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:49:45.463

添加 -`gem "cocaine", "0.3.2"`到 gemfile 解决了这个问题。

此处提供更多信息 -[未找到回形针文件错误](https://stackoverflow.com/questions/13056932/paperclip-file-not-found-error)

# iphone - 向应用添加背景音乐时构建失败

> ID：12132917
> 
> 赞同：0
> 
> 时间：2012-08-26T18:48:37.117
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有两个问题。

1- 我正在使用以下代码在我的 iphone 应用程序中添加背景音乐。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        // Override point for customization after application launch.
        sleep(5);
         //this variable can be named differently

        NSString *path = [[NSBundle mainBundle] pathForResource:@"%@/background_music" ofType:@"wav"];

    // the file is stored in MyApp/SharedResources folder where as delegate is placed at MyApp/        
            backgroundSound =[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] 

error:nil];

        backgroundSound.delegate = self;

        [backgroundSound prepareToPlay];

        [backgroundSound play];

        backgroundSound.numberOfLoops = -1;

        return YES;
    }

    @interface AppDelegate : UIResponder <UIApplicationDelegate>{
        AVAudioPlayer *backgroundSound;

    } 
```

通过运行此代码，我的构建失败了。架构 i386 的未定义符号：

```
"_OBJC_CLASS_$_AVAudioPlayer", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的第二个问题..

`viewController`假设我必须用一个按钮关闭另一个音乐。我怎样才能做到这一点。EG `SettingsViewController`。

```
* thread #1: tid = 0x2c03, 0x90870c5a libSystem.dylib`__kill + 10, stop reason = signal SIGABRT
    frame #0: 0x90870c5a libSystem.dylib`__kill + 10
    frame #1: 0x90870c4c libSystem.dylib`kill$UNIX2003 + 32
    frame #2: 0x909035a5 libSystem.dylib`raise + 26
    frame #3: 0x909196e4 libSystem.dylib`abort + 93
    frame #4: 0x90895b1b libSystem.dylib`_Unwind_Resume + 59
    frame #5: 0x016c8e39 CoreFoundation`CFRunLoopRunSpecific + 345
    frame #6: 0x016c8ccb CoreFoundation`CFRunLoopRunInMode + 123
    frame #7: 0x0019e2a7 UIKit`-[UIApplication _run] + 576
    frame #8: 0x0019fa9b UIKit`UIApplicationMain + 1175
    frame #9: 0x00002a62 myApp`main + 130 at main.m:16
    frame #10: 0x000029d5 myApp`start + 53 
```

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:06:58.890

这是一个链接器错误，您必须链接到 AVFoundation 框架。

要停止从另一个类/实例/任何地方播放，您可以有多种解决方案：

一。在要停止播放的类上声明一个属性，并将该属性设置为原始视图控制器。然后使用该属性访问该视图控制器并在其上调用一个方法来停止音乐。

二。在某些中心类中，例如您的应用程序委托或主视图控制器，添加一个 NSNotificationCenter-observer 并在整个应用程序中简单地使用通知，而不会弄乱属性。

# magento - Magento 获取订单发货方式标题

> ID：12132923
> 
> 赞同：6
> 
> 时间：2012-08-26T18:49:37.913
> 
> 标签：magento, shipping

嗨，谁能告诉我成功下订单后如何获得运输方式标题？

这是我所拥有的

```
$iOrderId = Mage::getSingleton('checkout/session')->getLastRealOrderId();
$oOrder = Mage::getModel('sales/order')->loadByIncrementId($iOrderId);

echo $oOrder->getShippingMethod(); 
```

但我怎样才能得到这个运输方式的标题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-26T19:03:33.200

```
$oOrder->getShippingDescription(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-26T14:34:59.033

```
$order = Mage::getModel('sales/order')->loadByIncrementId($iOrderId);
$order->getShippingDescription(); 
```

或者

```
$shipping = $order->getShippingAddress()->getShippingMethod();
echo $shipping->getData('title'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-05T12:23:27.443

这在寻找自定义标题时对我有用：

```
Mage::getModel('sales/order')->loadByIncrementId($orderId)->getTracksCollection()->getFirstItem()->getTitle(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-26T10:04:49.887

```
$order->getShippingDescription(); // returns Shipping Method Title 
```

# xcode - iOS5：不使用 UITabBar 的关系 Segues 和 Tabs

> ID：12132926
> 
> 赞同：0
> 
> 时间：2012-08-26T18:49:46.030
> 
> 标签：xcode, ios5, storyboard, uitabbar, segue

**TL:DR - 如何在 Xcode 4.4 中创建关系序列？**

大家好，我有一个应用程序，我想在其中一个控制器中添加一些选项卡行为，但是由于设计决策，我不能使用 UITabbar。我已经知道如何使用带有 UISegmented 控件的 UIToolbar，但我遇到的困难是如何在视图控制器之间切换。

我知道我不能使用普通的转场（因为每个选项卡更改都会在前一个控制器的顶部堆叠一个新的控制器），但是 UITabBar 有一个叫做“关系转场”的东西。我环顾四周，但无法弄清楚如何创建一个。

有谁知道怎么做？另外，有没有更好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:17:28.393

我最近做了同样的事情。我创建了一个容器视图控制器 SegmentedViewController，并使用`addChildViewController`. 在切换视图控制器（我在 UISegmentedControl 上使用目标/操作）时，您调用`transitionFromViewController:toViewController:duration:options:animation:completion`. 这是一般的想法。请查看[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)的“实现容器视图控制器”部分了解实现细节。

# python - 错误消息：“期望一个缩进块”

> ID：12132932
> 
> 赞同：-1
> 
> 时间：2012-08-26T18:50:42.640
> 
> 标签：python

所以我正在尝试编写游戏代码并且我正在尝试连接关卡的不同区域。这部分代码应该允许用户选择进入关卡但终端不断给我这个错误命令：`"expected an indented block"`.

我试图用四个空格替换所有选项卡，反之亦然，但错误不会消失。

**顺便说一句，我知道在定义一个函数之后，每一行都会缩进四个空格或一个制表符，但这是我的第一个问题，我不知道如何在这里做到这一点。**

* * *

```
def entry_hall():   
    first = raw_input("Go upstairs\nGo forwards\nGo left\nLeave\n:")
    if first == "Go upstairs" or "upstairs":
        print "Walking up the stairs" 
        import Upstairs_hallway.py
    elif first == "Go forwards" or "forwards":
        pass
    elif first == "Go left" or "left":
        pass
    elif first == "Leave":
        print """
You're a cop. You are not a baby. Do something else
""" 
        #restart the script

entry_hall() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:55:16.007

确保您的缩进是恒定的：

```
def entry_hall():   
    first = raw_input("Go upstairs\nGo forwards\nGo left\nLeave\n:")

    if first in ["Go upstairs", "upstairs"]:
        print "Walking up the stairs" 
        import Upstairs_hallway
    elif first == "Go forwards" or "forwards":
        pass
    elif first == "Go left" or "left":
        pass
    elif first == "Leave":
        print "You're a cop. You are not a baby. Do something else" 
        #restart the script

entry_hall() 
```

此外，`if first == "Go upstairs" or "upstairs"`不会很好地工作。该语句将被评估为：

```
if (first == "Go upstairs") or "upstairs" 
```

第一个条件 ,`first == "Go upstairs"`可以计算为`True`或`False`，但第二个条件`"upstairs"`, 将始终计算为`True`。因为您也在使用`or`语句，所以您的第一个条件将*始终*评估为`True`.

使用列表将解决此问题：

```
if first in ["Go upstairs", "upstairs"]: 
```

此外，在 Python 中，`import`语句不希望有`.py`扩展。只需提供文件名：

```
import Upstairs_hallway 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T18:54:33.983

只需在每行代码后添加四个字符`def`：

```
def entry_hall():   
    first = raw_input("Go upstairs\nGo forwards\nGo left\nLeave\n:") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:57:25.433

不需要我的原始答案，因为您说`def`语句的错误对齐是由于不知道如何将其正确粘贴到 Markdown 中。

但是，您确实有另一个问题：您的`if`陈述是错误的。交换——前者永远为真，因为`if s == 'first' or 'second':`计算结果为真。`if s in ['first', 'second']:``'second'`

# objective-c - OS X目标的预处理器宏？

> ID：12132933
> 
> 赞同：17
> 
> 时间：2012-08-26T18:50:52.447
> 
> 标签：objective-c, ios, xcode, macos, cocoa

我有一个同时具有 iOS 和 OS X 目标的项目。当我为 OS X 编译时，是否有一个正确的预处理器宏？我试过这个：

```
#if TARGET_OS_MAC
@interface BFNode : NSObject <NSPasteboardReading, NSPasteboardWriting> {
#else
@interface BFNode : NSObject {
#endif 
```

但`TARGET_OS_MAC`似乎不起作用。当我尝试在 iOS 上运行该应用程序时，出现编译器错误，因为它尝试编译第一行并且`NSPasteboardReading`iOS 上没有定义协议。

我知道也有`TARGET_OS_IPHONE`。如果我使用它并交换它的`@interface`声明，它就可以工作。

但是有很多地方我有代码，没有 iOS 版本，所以我也需要 OS X 的宏。

**解决方案：**

我最终在 .pch 文件中定义了一个新宏：

```
#define TARGET_OSX TARGET_OS_IPHONE == 0 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2018-03-29T16:12:56.227

根据`TargetConditionals.h`（似乎，截至 2020 年；任何平台）中的文档：

```
+---------------------------------------------------------------------+
|                            TARGET_OS_MAC                            |
| +---+ +-----------------------------------------------+ +---------+ |
| |   | |               TARGET_OS_IPHONE                | |         | |
| |   | | +---------------+ +----+ +-------+ +--------+ | |         | |
| |   | | |      IOS      | |    | |       | |        | | |         | |
| |OSX| | |+-------------+| | TV | | WATCH | | BRIDGE | | |DRIVERKIT| |
| |   | | || MACCATALYST || |    | |       | |        | | |         | |
| |   | | |+-------------+| |    | |       | |        | | |         | |
| |   | | +---------------+ +----+ +-------+ +--------+ | |         | |
| +---+ +-----------------------------------------------+ +---------+ |
+---------------------------------------------------------------------+ 
```

这告诉我们：

*   `TARGET_OS_MAC`将`1`适用于（可能）在 Apple 平台上运行的任何 Cocoa 应用程序。

    *   `TARGET_OS_OSX`仅`1`适用于 macOS 目标
    *   `TARGET_OS_IPHONE`适用于`1`任何非 Mac Apple 产品
        *   `TARGET_OS_IOS`仅适用于 iOS
            *   `TARGET_OS_MACCATALYST`仅适用于[Project Catalyst](https://developer.apple.com/mac-catalyst/)。它似乎`TARGET_OS_UIKITFORMAC`也将起作用。
        *   `TARGET_OS_TV`仅适用于 tvOS
        *   `TARGET_OS_WATCH`仅适用于 watchOS
        *   `TARGET_OS_BRIDGE`仅适用于[bridgeOS](https://www.theiphonewiki.com/wiki/bridgeOS)（目前甚至不支持 3rd-party 应用程序，因此您可能总是会看到`0`）
    *   `TARGET_OS_DRIVERKIT`将`1`在为[DriverKit构建时](https://developer.apple.com/documentation/driverkit)

* * *

### ⚠️但是等等！⚠️

我是从 iOS 14（macOS 11、watchOS 7）SDK 中得到的。如果我回顾 iOS 13（macOS 10.15，watchOS 6）SDK，我会看到：

```
+----------------------------------------------------------------+
|                TARGET_OS_MAC                                   |
| +---+  +-----------------------------------------------------+ |
| |   |  |          TARGET_OS_IPHONE                           | |
| |OSX|  | +-----+ +----+ +-------+ +--------+ +-------------+ | |
| |   |  | | IOS | | TV | | WATCH | | BRIDGE | | MACCATALYST | | |
| |   |  | +-----+ +----+ +-------+ +--------+ +-------------+ | |
| +---+  +-----------------------------------------------------+ |
+----------------------------------------------------------------+ 
```

值得注意的是，`TARGET_OS_DRIVERKIT`它是 14 年的新产品，现在`TARGET_OS_MACCATALYST`在里面`IOS`。这告诉我，**针对 iOS 14 SDK 进行编译可能会破坏为 iOS 13 编写的一些 C 代码**，如果它假设`TARGET_OS_MACCATALYST`并且`IOS`完全独立的话。

* * *

此外，还定义了这些：

*   `TARGET_OS_SIMULATOR`仅适用于[iOS、tvOS 和 watchOS 模拟器](https://developer.apple.com/library/archive/documentation/IDEs/Conceptual/iOS_Simulator_Guide/Introduction/Introduction.html)。您可以使用上述`#define`s进一步细化它
*   `TARGET_OS_WIN32`以防您想使用 Apple 的 SDK 来制作 Windows 应用程序。除了 Apple 自己的（如 iTunes、Safari 和 QuickTime），我个人不知道其他任何东西。如果您想随身携带现有的 Objective-C 代码，现在 Swift 支持 Windows，这可能会变得有用。
*   `TARGET_OS_UNIX`适用于非 Apple UNIX 系统

这些已被弃用，不应再使用。也就是说，您可能会在必须维护的代码中找到它们，因此它们的含义如下：

*   `TARGET_IPHONE_SIMULATOR`以前是指[iPhoneOS](https://en.wikipedia.org/wiki/IOS_version_history#iPhone_OS_1)模拟器
*   `TARGET_OS_EMBEDDED`用于表示 iOS、tvOS 和 watchOS 非模拟设备
*   `TARGET_OS_NANO`可能曾经是指 iPod Nano（我在网上找不到任何历史用法）

* * *

还有一点需要注意的是，[在`TargetConditionals.h`swift-corelibs-foundation](https://github.com/apple/swift-corelibs-foundation/blob/master/CoreFoundation/Base.subproj/SwiftRuntime/TargetConditionals.h)中使用的是显着不同的，包括`#define`用于 Android、Cygwin 和其他未明确支持但技术上可以工作的平台的 s。

我不完全确定该怎么做。我猜这是为了编译 Swift Foundation 框架，而不是为了使用它，因为 Swift 不使用`#define`s。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-06-17T22:27:32.470

如果您使用的是 Swift，那么这里有一个很棒的[语言功能](http://nshipster.com/swift-system-version-checking/)。如果您使用的是 Objective-C，执行以下操作通常很有用：

```
#include <TargetConditionals.h>

#if TARGET_OS_IPHONE
    @import UIKit;
#else
    @import AppKit;
#endif 
```

理解`TARGET_OS_*`定义将使这更有意义。最值得注意的是，`TARGET_OS_MAC`任何苹果平台都非常出乎意料。`!TARGET_OS_IPHONE`是 macOS，`TARGET_OS_IPHONE`除此之外还有什么。iOS、tvOS 和 watchOS 有更具体的定义。

来自`TargetConditions.h`：

```
TARGET_OS_* 
These conditionals specify in which Operating System the generated code will
run.  Indention is used to show which conditionals are evolutionary subclasses.  

The MAC/WIN32/UNIX conditionals are mutually exclusive.
The IOS/TV/WATCH conditionals are mutually exclusive.

    TARGET_OS_WIN32           - Generated code will run under 32-bit Windows
    TARGET_OS_UNIX            - Generated code will run under some Unix (not OSX) 
    TARGET_OS_MAC             - Generated code will run under Mac OS X variant
       TARGET_OS_IPHONE          - Generated code for firmware, devices, or simulator 
          TARGET_OS_IOS             - Generated code will run under iOS 
          TARGET_OS_TV              - Generated code will run under Apple TV OS
          TARGET_OS_WATCH           - Generated code will run under Apple Watch OS
       TARGET_OS_SIMULATOR      - Generated code will run under a simulator
       TARGET_OS_EMBEDDED       - Generated code for firmware

    TARGET_IPHONE_SIMULATOR   - DEPRECATED: Same as TARGET_OS_SIMULATOR
    TARGET_OS_NANO            - DEPRECATED: Same as TARGET_OS_WATCH 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-26T19:01:29.707

那是因为`TARGET_OS_MAC`在为 iOS 构建时也定义了。

请参阅[http://sealiesoftware.com/blog/archive/2010/8/16/TargetConditionalsh.html](http://sealiesoftware.com/blog/archive/2010/8/16/TargetConditionalsh.html)。

我会尝试通过目标上的构建设置来构建我自己的目标特定定义。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-12T03:11:24.137

从 Xcode 8 GM 开始，这是iOS 10.0中**TargetConditionals.h**的相关部分：

```
#define TARGET_OS_MAC               1
#define TARGET_OS_WIN32             0
#define TARGET_OS_UNIX              0
#define TARGET_OS_OSX               0
#define TARGET_OS_IPHONE            1
#define TARGET_OS_IOS               1
#define TARGET_OS_WATCH             0
#define TARGET_OS_BRIDGE            0
#define TARGET_OS_TV                0
#define TARGET_OS_SIMULATOR         0
#define TARGET_OS_EMBEDDED          1 
#define TARGET_IPHONE_SIMULATOR     TARGET_OS_SIMULATOR /* deprecated */
#define TARGET_OS_NANO              TARGET_OS_WATCH /* deprecated */ 
```

（在 Xcode 文本编辑器上方的“面包屑”中，`iOS 10.0 > usr/include > TargetConditionals.h`）

...对于 macOS，这是同一个文件：

```
#define TARGET_OS_MAC               1
#define TARGET_OS_WIN32             0
#define TARGET_OS_UNIX              0
#define TARGET_OS_OSX               1
#define TARGET_OS_IPHONE            0
#define TARGET_OS_IOS               0
#define TARGET_OS_WATCH             0
#define TARGET_OS_BRIDGE            0
#define TARGET_OS_TV                0
#define TARGET_OS_SIMULATOR         0
#define TARGET_OS_EMBEDDED          0 
#define TARGET_IPHONE_SIMULATOR     TARGET_OS_SIMULATOR /* deprecated */
#define TARGET_OS_NANO              TARGET_OS_WATCH /* deprecated */ 
```

（在 Xcode 文本编辑器上方的“面包屑”中，`macOS 10.12 > usr/include > TargetConditionals.h`）

`TARGET_OS_MAC`在两个平台上都定义为1 **，**但仅在 macOS上定义为**1 。**`TARGET_OS_OSX`

 **在文件的注释中，它们描述如下：

> *   TARGET_OS_MAC：生成的代码将在 Mac OS X 变体下运行。
> *   TARGET_OS_OSX：生成的代码将在 OS X 设备下运行。

我想在那时的某个时候（也许是在 iPhone 发布的时候？）有人认为 iOS（né “iPhone OS”）符合“Mac OS X 变体”的定义。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-26T19:01:17.710

在 TargetConditionals.h 中查找整个列表，包括：

```
#define TARGET_OS_MAC               1
#define TARGET_OS_IPHONE            1 
#define TARGET_IPHONE_SIMULATOR     1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-21T09:26:27.337

我建议使用这个：

```
#define TARGET_OS_OSX (!(TARGET_OS_IOS || TARGET_OS_TV || TARGET_OS_WATCH)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-23T08:44:42.120

我遇到了同样的情况，但 Swift 需要它。

Apple 开发者论坛上的这个答案对于处理`NSPasteboard`您遇到的协议非常有帮助，但对于 Swift。

[https://forums.developer.apple.com/thread/16757](https://forums.developer.apple.com/thread/16757)

我最终做了：

```
#if os(iOS) || os(watchOS)
  public protocol TFPasteboardReading { }
  public protocol TFPasteboardWriting { }
#elseif os(macOS)
  public typealias TFPasteboardReading=NSPasteboardReading
  public typealias TFPasteboardWriting=NSPasteboardWriting
#endif

@objc(TFCategory)
public class TFCategory: TFBaseModel, TFPasteboardReading, TFPasteboardWriting {

...

} 
```

那样`TFPasteboardReading`和分别`TFPasteboardWriting`定义了 macOS 的意义`NSPasteboardReading`和`NSPasteboardWriting`在 iOS 中它没有意义，但仍然可以在 iOS 中被引用。所以代码对两者都正确编译。**

# magento - Magento 结账车功能控制

> ID：12132938
> 
> 赞同：0
> 
> 时间：2012-08-26T18:51:54.317
> 
> 标签：magento, checkout, cart

我有一个站点，1.5 magento，并且购物车功能（和客户帐户功能）似乎被禁用。当我尝试访问 url 'checkout/cart' 时，只显示主页。

我检查了所有常见的嫌疑人..包括：

*   检查了 url_rewrites 表（在他们的参考结帐/购物车中有一个条目......但是从结帐/购物车到结帐/购物车，所以不认为这是一个问题，但编辑它只是为了排除它）

*   启用/禁用模块本身，查看 etc/modules 文件并删除，并检查 system->config->advanced 区域中的模块列表。

*   尝试单步执行代码..尝试检测页面数据发生变化的位置 - 在这里挣扎。

*   在代码库...和数据库 SQL 文件中查找某些术语。

*   htaccess 文件，寻找重写

*   本地/社区模块..以及结帐的任何重写

我开始认为这里有一个黑客可以在访问结帐网址时显示主页。网址：www.mysite.co.uk/checkout/cart 仍保留在地址栏中，但我看到主页数据。

任何人都知道我还能在哪里检查...或轻松找到此问题的原因？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:32:14.043

您是否在 Configuration -> Sales -> Checkout 下查看了后端？

必须启用一个名为“启用单页结帐”的字段。如果禁用它，您的商店将正常运行，但注册客户和客人都无法再结帐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:12:37.287

原来这是手动添加到重写表的重写。一开始没找到。

# javascript - 剑道刷新（DropDownList.refresh（））不起作用错误未定义

> ID：12132939
> 
> 赞同：16
> 
> 时间：2012-08-26T18:51:55.337
> 
> 标签：javascript, jquery, asp.net, telerik, kendo-ui

我试图在另一个 DropDownList 更改后刷新下拉列表，但 Refresh() 方法是未定义的错误正在促进。我再次尝试读取数据源，它显示它正在加载，但数据仍然相同。帮助解决这个问题请。

代码：

```
$("#DropDownList1").change(function () {
   custCode = $("#DropDownList1").val();

   $("#titles").data("kendoDropDownList").dataSource.read(); //shows list Loading But Same Data Is present .
   $("#titles").data("kendoDropDownList").refresh(); //NOT Working 

}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-27T09:02:14.333

1-尝试`cache: false`在 Kendo DropDownList 的数据源读取属性中添加以禁用缓存：

```
read: {
    url: <<"url">>,
    cache: false
} 
```

2-然后打电话`read()`，

```
$("#ddl").data("kendoDropDownList").dataSource.read(); 
```

它对我有用:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-09T15:57:54.277

对我来说，这条线完成了这项工作：

`$("#myDropDownList").data("kendoDropDownList").dataSource.read();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T16:54:04.577

您可能会发现将参数传递给 dataSource 的“.data()”很有用。

例子：

```
var myDataSource={bookId: 10, Name: "Kendo"}
$("#titles").data("kendoDropDownList").dataSource.data(myDataSource); 
```

但是，当您想根据另一个 DropDownList 的选择更新一个 DropDownList 时，您也可以尝试 DropDownList 的[cascadingFrom属性](http://demos.telerik.com/kendo-ui/dropdownlist/cascadingdropdownlist)

//胡迪尼

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-23T22:56:58.183

在您的阅读网址上添加 '?myDate=' + new Date()。这将刷新数据。没有它（除非你有元标记来防止缓存）它会给你它已经读取的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-13T08:59:19.850

就我而言，我评论了这一行

```
//cascadeFrom: "dropdown1_id" 
```

在第二个剑道下拉菜单中，它工作了，由于某种原因，它弄乱了数据源更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-23T04:43:48.193

看起来剑道下拉列表已经改变。现在答案是：

```
 var dataSource = new kendo.data.DataSource({
        data: my_new_json_list
    });
    var dropdownlist = $("#products").data("kendoDropDownList");
    dropdownlist.setDataSource(dataSource); 
```

参考：[https ://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist/methods/setdatasource](https://docs.telerik.com/kendo-ui/api/javascript/ui/dropdownlist/methods/setdatasource)

# tcp - Erlang TCP 服务器处理

> ID：12132941
> 
> 赞同：2
> 
> 时间：2012-08-26T18:52:00.040
> 
> 标签：tcp, erlang

我开始学习 Erlang，希望为实时多人游戏创建游戏服务器。目前，我正在尝试估计 Erlang 与 Scala 相比会造成的工作量和头痛。所以，首先，我正在创建一个简单的 Erlang 服务器进程。[我找到了Jesse Farmer](http://20bits.com/article/network-programming-in-erlang/)的一个很好的教程，我已经对其进行了修改以了解更多信息。我修改后的代码类似于他的回显服务器，除了它接受英文单词并简单地返回 Lojban 等价物。但是，只会选择通配符大小写。这是代码：

```
-module(translate).
-export([listen/1]).
-import(string).

-define(TCP_OPTIONS, [binary, {packet, 0}, {active, false}, {reuseaddr, true}]).

% Call echo:listen(Port) to start the service.
listen(Port) ->
    {ok, LSocket} = gen_tcp:listen(Port, ?TCP_OPTIONS),
    accept(LSocket).

% Wait for incoming connections and spawn the echo loop when we get one.
accept(LSocket) ->
    {ok, Socket} = gen_tcp:accept(LSocket),
    spawn(fun() -> loop(Socket) end),
    accept(LSocket).

% Echo back whatever data we receive on Socket.
loop(Socket) ->
    case gen_tcp:recv(Socket, 0) of
        {ok, Data} ->
            case Data of
                "Hello" -> gen_tcp:send(Socket, "coi\n");
                "Hello\n" -> gen_tcp:send(Socket, "coi\n");
                'Hello' -> gen_tcp:send(Socket, "coi\n");
                <<"Hello">> -> gen_tcp:send(Socket, "coi\n");
                <<"Hello\n">> -> gen_tcp:send(Socket, "coi\n");
                _ -> gen_tcp:send(Socket, "I don't understand")
            end,
            loop(Socket);
        {error, closed} ->
            ok
    end. 
```

我目前的测试是打开两个终端窗口并执行

```
[CONSOLE 1]
erl
c(translate).
translate:listen(8888).

[CONSOLE 2]
telnet localhost 8888
whatever
Hello 
```

输出变为：

```
I don't understand
I don't understand 
```

如何解析传入的数据？这种模式匹配的风格似乎完全失败了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:48:12.550

试试这个：

```
case binary_to_list(Data) of
    "Hello\r\n" -> gen_tcp:send(Socket, "this will be good variant\n");
    _ -> gen_tcp:send(Socket, "I don't understand")
end, 
```

或者没有显式转换：

```
case Data of
    <<"Hello\r\n">> -> gen_tcp:send(Socket, "this will be good variant\n");
    _ -> gen_tcp:send(Socket, "I don't understand")
end, 
```

**从评论更新**

要先处理更复杂的匹配删除`"\r\n"`后缀：

```
Content = list_to_binary(lists:subtract(binary_to_list(Data), "\r\n")),
case Content of
    <<"Hello">> -> gen_tcp:send(Socket, <<"Good day!\n">>);
    <<"My name is, ", Name/binary>> -> gen_tcp:send(Socket, <<"Hello ", Name/binary, "!\n">>);
    _ -> gen_tcp:send(Socket, "I don't understand")
end, 
```

# css - 即 9 - css - 多重过滤器：

> ID：12132942
> 
> 赞同：1
> 
> 时间：2012-08-26T18:52:14.437
> 
> 标签：css, internet-explorer-9

我有一个带有透明滚动条（部分）的页面，`filter: chroma()`以及一些使用`filter: alpha()`. 我的问题是IE8会显示这个很好，IE9不会。IE9 只会显示一种或另一种透明，但不会像 IE8 一样都显示。有没有人有一些信息或提示？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T19:01:18.223

IE9 放弃了对旧`filter`样式的支持，转而支持更标准的 CSS 属性。

例如，如果您想要不透明度，请使用`opacity`样式，就像在任何其他浏览器中一样。大多数其他可能的效果`filter`也可以在 IE9 中使用标准 CSS 完成。好处是这意味着您也可以通过使用标准代码来支持其他浏览器。

有一个或两个功能，`filter`但 IE9 不支持等效标准，但大多数事情都可以完成。

如果您确实需要继续使用垃圾旧`filter`样式（例如，如果您有一个质量很差的网站以您无法更改的方式使用它们），有可能：您必须告诉 IE9 使用 IE8 兼容模式. 这并不理想，而且您一开始就抛弃了使用 IE9 的大部分优势，但可以做到。

# templates - 更改 ember.js 中的默认分隔符

> ID：12132947
> 
> 赞同：5
> 
> 时间：2012-08-26T18:52:49.453
> 
> 标签：templates, ember.js, web2py

（这个问题与[这个](https://stackoverflow.com/questions/12128593/processing-ember-js-tagged-html-with-python)有关）

我有一个 web2py 应用程序，我想用一些 ember.js 代码对其进行扩展。web2py 和 ember.js 中模板系统的分隔符冲突（都是`{{`和`}}`）。由于我的应用程序没有 ember.js 遗留，我想使用不同的分隔符编写 ember.js 代码。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T22:58:33.510

ember.js 使用的模板引擎是 Handlebars.js，我不认为你可以改变分隔符。我已经看到了另一个问题，也许可以在这里找到另一个答案：[Handlebars.js in Django templates](https://stackoverflow.com/questions/7229484/handlebars-js-in-django-templates/7232482#7232482)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T19:46:46.203

在 web2py 中： response.delimiters = ('[[',']]')

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:35:31.300

如果您不想更改任何分隔符（在 web2py 或车把中），您可以通过将车把模板保存在外部文件（例如web2py /static/ 文件夹中的**people.hbs ）中来做到这一点**

```
{{#each people}}
<div class="person">
    <h2>{{first_name}} {{last_name}}</h2>
</div>
{{/each}} 
```

并在视图中使用[jQuery load() 函数](http://api.jquery.com/load/)导入该文件。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="https://raw.github.com/wycats/handlebars.js/master/dist/handlebars.js"></script>    

<div id="list"></div>
<script id="people-template" type="text/x-handlebars-template"></script>

<script type="text/javascript">
$('#people-template').load('/static/people.hbs', function() {
    var template = Handlebars.compile($("#people-template").html());
    var data = {
        people: [
            { first_name: "Alan", last_name: "Johnson" },
            { first_name: "Allison", last_name: "House" },
        ]
    };
    $('#list').html(template(data));
});
</script> 
```

# php - Ajax 不发布到 div

> ID：12132952
> 
> 赞同：0
> 
> 时间：2012-08-26T18:54:32.597
> 
> 标签：php, javascript, jquery, html, ajax

到目前为止，我脚本中的所有内容似乎都很完美。但是通过 Json 插入和检索的数据没有被插入到我的 div 中。任何有敏锐眼光的人都可以看到任何问题。

```
<div id="commentaddid"></div> 
```

AJAX

```
 <script>
    $(document).ready(function(){
    $("form#mycommentform").submit(function(event) {
    event.preventDefault();
    var streamidcontent = $(this).children('#streamidcontent').val();
    var content = $(this).children('#content').val();

    $.ajax({
    type: "POST",
    url: "comment_add.php",
    cache: false,
    dataType: "json",
    data: { streamidcontent: streamidcontent, content: content}, 
    success: function(data){  
    $('#commentaddid').append('<div class="stream_comment">"+content+"</div>');
    }
    });
    return false
    });
    });
    </script> 
```

我工作的主要状态 AJAX。

```
<script>
$(document).ready(function(){
$("form#myform").submit(function(event) {
event.preventDefault();
var content = $("#toid").val();
var newmsg = $("#newmsg").val();

$.ajax({
type: "POST",
url: "insert.php",
cache: false,
dataType: "json",
data: { toid: content, newmsg: newmsg }, 
success: function(response){ 
 $("#newmsg").val(""); 
$("#homestatusid").html("<div id='divider-"+response['streamitem_id']+"'><div class='userinfo'><a href='/profile.php?username="+response['username']+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div class'delete' style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+response['streamitem_id']+"');\">X</div><a href='/profile.php?username="+response['username']+"'>"+response['first']+" "+ response['middle']+" "+response['last']+"</a><span class='subtleLink'> said</span><br/><a class='subtleLink' style='font-weight:normal;'>"+response['streamitem_timestamp']+"</a><hr>"+newmsg+"<div style='height:20px;' class='post_contextoptions'><div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_"+response['streamitem_id']+"' onclick=\"toggle_comments('comment_holder_"+response['streamitem_id']+"');clearTimeout(streamloop);swapcommentlabel(this.id);\">Write a comment...</a></div><div id='streamlike'><a title='Like "+response['first']+" "+ response['middle']+" "+response['last']+"s status' id='likecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"likestatus("+response['streamitem_id']+",this.id);\"><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'>Like</a></div><div style='width:50px;' id='likesprint"+response['streamitem_id']+"'><a title='See who likes "+response['first']+" "+ response['middle']+" "+response['last']+"s status' href='include/likes.php?streamitem_id="+response['streamitem_id']+"' /></a></div></div></form></div><div id='streamdislike'><a id='dislikecontext_"+response['streamitem_id']+"' style='cursor:pointer;' onClick=\"dislikestatus("+response['streamitem_id']+",this.id);\"><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'>Dislike</a></div><div style='width:70px;' id='dislikesprint"+response['streamitem_id']+"'></div></div></form><div class='stream_comment_holder' style='display:none;' id='comment_holder_"+response['streamitem_id']+"'><div id='comment_list_"+response['streamitem_id']+"'><table width=100%><tr><td valign=top width=30px><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+response['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><td valign=top align=left><div class='stream_comment_inputarea'><input id='addcomment' type='text' name='content' style='width:100%;' class='input_comment' placeholder='Write a comment...'  onkeyup='growcommentinput(this);' autocomplete='off' onkeypress=\"if(event.keyCode==13){addcomment("+response['streamitem_id']+",this.value,'comment_list_"+response['streamitem_id']+"',"+response['id']+",'"+response['first']+" "+ response['middle']+" "+response['last']+"');this.value='';}\"><br/></div></div>");
}
});
return false
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:58:17.210

您将数据获取为`data`，但将其附加为`content`（实际上是您发送的数据）。将您的代码更改为

```
$('#commentaddid').append('<div class="stream_comment">'+data+'</div>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T18:58:34.360

（注意：也许你不想替换' 的内容）`.append`。`div``div`

这段代码是错误的 - 你不匹配单引号和双引号：

```
$('#commentaddid').append('<div class="stream_comment">"+content+"</div>'); 
```

应该：

```
$('#commentaddid').append('<div class="stream_comment">'+content+'</div>'); 
```

...实际上，它应该不止于此。

JSON 返回的值`data`是一个复杂的对象，您应该对其进行格式化（在 PHP 中`Content-Type`为 JSON 发出 a 也是谨慎的做法）：

content = " **" + data.name + "**评论：" + ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T18:59:01.977

```
$('#commentaddid').append('<div class="stream_comment">'+data.content+'</div>'); 
```

# php - javascript不读取字符

> ID：12132957
> 
> 赞同：0
> 
> 时间：2012-08-26T18:55:07.587
> 
> 标签：php, javascript, string, variables

我敢肯定，这个问题的答案非常简单——但我找不到！

我在 PHP 中嵌入了一个 javascript（它将向我的 android 应用程序返回一个字符串值），并且由于某种原因，它只会在包含**所有整数**时读取 PHP echo'd 变量！

我需要它来读取字符和整数，因为用户名由它组成。

期待提示 - 很尴尬，我无法自己解决这个问题；

关于我的代码的注释：我最后停用了Android功能，因为问题发生在它实现之前；还设置了 $myvar = '20' 这样你就可以看到它适用于所有整数；

```
<?php  

if (!isset($_SERVER['WEBAUTH_USER'])){
    $login = 'Wrong username';
}else{

$login = $_SERVER['WEBAUTH_USER'];
//$myvar = 'Hello, world';
}

$myvar = $login;

//$myvar = '20';

//echo $myvar;
    ?>

<script type = "text/javascript">
jsvar = <?php echo $myvar;?>;
document.write(jsvar);  
//Android.getValue(jsvar);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:58:27.757

你省略了引号：

```
jsvar = "<?php echo $myvar; ?>"; 
```

当然，如果字符串包含引号就会出现问题，因此更好的解决方案是使用 JSON 实用程序之类的工具来清理字符串。

它适用于数字字符串，因为 JavaScript 将它们理解为数字常量。

# android - 适用于应用程序的 Android 诊断工具

> ID：12132958
> 
> 赞同：0
> 
> 时间：2012-08-26T18:55:13.907
> 
> 标签：android, diagnostics

我正在寻找一种可靠的工具来诊断 Android 应用程序。我想获取电池使用情况和 CPU 使用情况的数据。我更喜欢实时获取它，就像那些内置的开发者工具一样，但是在使用应用程序几分钟后获取数据也很好。at&t ARO 应用程序很棒，但它只能在模拟器上运行，而且我必须在真实设备上检查应用程序，因为我使用的是相机，并进行了大量图像处理。如果我能找到像 ARO 这样的工具，但适用于真实设备 - 那将是最好的。（不要向我提供 Norton Utilities 之类的应用程序。这些应用程序很棒，但不符合我的需求......）

谢谢， 亚尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:48:49.223

你试过PowerTutor吗？它根据 CPU、WiFi 和存储 I/O 等硬件利用率估算电池消耗量。如果您需要实际功率值，则需要外部功率计，因为标准电池接口过于不精确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:23:23.403

AT&T ARO 以开源形式提供：[https](https://github.com/attdevsupport/ARO) ://github.com/attdevsupport/ARO 只要您的设备已植根 - 您就可以开始使用了。

请注意，ARO 会模拟您的相机和网络功耗和电池使用情况，但不会模拟 CPU。Orange 提供了另一个名为 ATK 的免费开源工具，它可以为您做到这一点： [https ://github.com/Orange-OpenSource/ATK/downloads](https://github.com/Orange-OpenSource/ATK/downloads)

# forms - 从请求中播放框架 2 绑定表单

> ID：12132960
> 
> 赞同：6
> 
> 时间：2012-08-26T18:55:17.573
> 
> 标签：forms, binding, playframework-2.0

我是 Play2 的新手（我已经使用 Play1 开发了一个项目），并且我遇到了来自请求的表单绑定问题。关于表单的文档真的很轻。

这是我的控制器的代码：

```
private final static Form<Estimation> estimationForm = form(Estimation.class);

/**
 * Get an estimation by form
 * @return
 */
public static Result estimation() {
    return ok(views.html.rate.estimation.render(
        estimationForm,
        City.findAll()
    ));
}

/**
 * Display estimation results
 * @return
 */
public static Result results() {
    if (request().method().equals("POST")) {
        Form<Estimation> form = estimationForm.bindFromRequest();
        if (form.hasErrors()) {
            System.out.println(form.errorsAsJson().toString());
            return ok(views.html.rate.estimation.render(
                form
                City.findAll()
            ));
        }
        else {
            System.out.println(form.get());
            return ok(views.html.rate.results.render(

            ));
        }
    }
    else {
        return estimation();
    }
} 
```

我在选择中显示城市，如下所示：

```
<select id="city" name="city">      
    <option value="1">Paris, France</option>
    <option value="2">Lyon, France</option>
    <option value="3">Marseille, France</option>
    <option value="4">Barcelona, Spain</option>
    <option value="5">Berlin, Germany</option>
</select> 
```

当我提交表单时，出现以下错误：{"city":["Invalid value"]}

所以这是我的问题：活页夹似乎适用于简单的字段（例如我的模型中的 String 属性），但是 @ManyToOne 关系呢？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T21:11:18.023

将选择字段的名称设置为`name="city.id"`

# android - Android Service 1 分钟后再次调用自身

> ID：12132963
> 
> 赞同：0
> 
> 时间：2012-08-26T18:56:21.583
> 
> 标签：android, service, alarmmanager

我正在尝试创建一个服务，一分钟后唤醒并再次调用自己（在这个例子中，我知道它对电池不好）。

以下是部分代码：

```
public class SpeechService extends Service {
    @Override
    public void onCreate() {
        super.onCreate();

        setUpNextAlarm();
    }

    public void setUpNextAlarm(){
        Intent intent = new Intent(SpeechService.this, this.getClass());
        PendingIntent pendingIntent = PendingIntent.getService(this, 0, intent, 0);

        long currentTimeMillis = System.currentTimeMillis();
        long nextUpdateTimeMillis = currentTimeMillis + 1 * DateUtils.MINUTE_IN_MILLIS;

        // Schedule the alarm!
        AlarmManager am = (AlarmManager)ContextManager.getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        am.set(AlarmManager.RTC_WAKEUP,nextUpdateTimeMillis, pendingIntent);
        Log.e("test","I am back!");
    }

    protected void onHandleIntent(Intent intent)
    {
        Log.e("test","I am back!");
        setUpNextAlarm();
    }
} 
```

正如您所看到的，我在创建服务时调用了 setUpNextAlarm，我在最后看到了日志，但随后再也不会调用该服务。我已经在 IndentService 中尝试过，它可以工作，但我需要它在正常服务中工作:(。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:59:39.503

采用

```
 PendingIntent.getService 
```

不是

```
 PendingIntent.getBroadcast 
```

您正在获得广播意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T01:50:56.923

我刚刚使用了一个服务和一个 IntentService。IntentService 正在使用 AlarmManager，然后它正在调用服务。

# c++ - 奇怪的编译输出

> ID：12132966
> 
> 赞同：11
> 
> 时间：2012-08-26T18:56:55.013
> 
> 标签：c++, c, gcc

我刚刚编译了这段代码：

```
void foo(int bar...) {}

int main()
{
   foo(0, 1);
   return 0;
} 
```

编译输出真的很奇怪：

> g++ test.c

输出：

> 没有

和

> gcc 测试.c

输出：

> test.c:1:17: 错误：在 '...' 标记之前需要 ';'、',' 或 ')'

我知道参数后面没有逗号，这个关于奇怪编译输出的问题。

我理解为什么这在 C 中无效，但不明白为什么它在 C++ 中有效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T19:25:00.817

另一个答案是正确的（我赞成），但只是为了提供参考[8.3.5 Functions Clause 3]：

> 参数声明子句：
> 
> 参数声明列表^([opt]) ... ^([opt])
> 
> 参数声明列表，...

这意味着逗号在 C++ 中是*可选*的，但在 C 中不是。你也可以用`void foo(...)`C++ 编写，因为参数声明列表也是可选的。

至于为什么在 C++ 模板中`test(...)`使用 SFINAE 来实现“包罗万象”的功能很常见。但是，在 C 中，没有使用 for `foo(...)`，因此它是非法的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-26T18:58:56.183

问题是 C++ 允许

```
returntype funcname(optional_param...) 
```

可变参数函数的语法，而 C 没有。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-26T19:34:24.953

您只是偶然发现了 C 和 C++ 语言语法之间的模糊差异。是的，C++ 允许你的语法，而 C 不允许。在 C++ 中，逗号之前`...`是可选的，而在 C 中，它始终是必需的。这里的所有都是它的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T23:06:17.773

C++ 中不允许逗号版本允许 f(...) 为什么？

考虑 void f() {} 在 C 中这意味着“我接受任何东西”，而在 C++ 中这意味着“我什么都不接受”。（ void f(void) 在 C 中是“我什么都不接受”）

为了在 C++ 中声明 C“我接受任何东西”函数，您必须编写 extern "C" void f(...);

# c++ - OpenGL 相机 - 来自四元数的视图矩阵行为不正确且音高太受限制

> ID：12132969
> 
> 赞同：3
> 
> 时间：2012-08-26T18:57:13.280
> 
> 标签：c++, opengl, camera, rotation, quaternions

我正在使用它的当前方向（四元数）和它的当前位置为我的相机创建视图矩阵。

```
void Camera::updateViewMatrix()
{
    view = glm::gtx::quaternion::toMat4(orientation);

    // Include rotation (Free Look Camera)
    view[3][0] = -glm::dot(glm::vec3(view[0][0], view[0][1], view[0][2]), position);
    view[3][1] = -glm::dot(glm::vec3(view[1][0], view[1][1], view[1][2]), position);
    view[3][2] = -glm::dot(glm::vec3(view[2][0], view[2][1], view[2][2]), position);

    // Ignore rotation (FPS Camera)
    //view[3][0] = -position.x;
    //view[3][1] = -position.y;
    //view[3][2] = -position.z;

    view[3][3] = 1.0f;
} 
```

这有一个问题，我不相信矩阵计算的四元数给出了正确的答案。平移相机按预期工作，但旋转它会导致不正确的行为。

我正在使用当前鼠标位置和屏幕中心之间的差异旋转相机（每帧重置鼠标位置）

```
int xPos;
int yPos;
glfwGetMousePos(&xPos, &yPos);

int centreX = 800 / 2;
int centreY = 600 / 2;

rotate(xPos - centreX, yPos - centreY);

// Reset mouse position for next frame
glfwSetMousePos(800 / 2, 600 / 2); 
```

旋转发生在这种方法中

```
void Camera::rotate(float yawDegrees, float pitchDegrees)
{
    // Apply rotation speed to the rotation
    yawDegrees *= lookSensitivity;
    pitchDegrees *= lookSensitivity;

    if (isLookInverted)
    {
        pitchDegrees = -pitchDegrees;
    }

    pitchAccum += pitchDegrees;

    // Stop the camera from looking any higher than 90 degrees
    if (pitchAccum > 90.0f)
    {
        //pitchDegrees = 90.0f - (pitchAccum - pitchDegrees);
        pitchAccum = 90.0f;
    }

    // Stop the camera from looking any lower than 90 degrees
    if (pitchAccum < -90.0f)
    {
        //pitchDegrees = -90.0f - (pitchAccum - pitchDegrees);
        pitchAccum = -90.0f;
    }

    yawAccum += yawDegrees;

    if (yawAccum > 360.0f)
    {
        yawAccum -= 360.0f;
    }

    if (yawAccum < -360.0f)
    {
        yawAccum += 360.0f;
    }

    float yaw = yawDegrees * DEG2RAD;
    float pitch = pitchDegrees * DEG2RAD;

    glm::quat rotation;

    // Rotate the camera about the world Y axis (if mouse has moved in any x direction)
    rotation = glm::gtx::quaternion::angleAxis(yaw, 0.0f, 1.0f, 0.0f);

    // Concatenate quaterions
    orientation = orientation * rotation;

    // Rotate the camera about the world X axis (if mouse has moved in any y direction)
    rotation = glm::gtx::quaternion::angleAxis(pitch, 1.0f, 0.0f, 0.0f);

    // Concatenate quaternions
    orientation = orientation * rotation;
} 
```

我是否正确连接四元数以获得正确的方向？

音高累积还有一个问题，因为它将我的视野限制在 ±5 度而不是 ±90 度。这可能是什么原因？

编辑：

我已经解决了音高累积的问题，使其范围为 [-90, 90]。事实证明，glm 使用度数而不是向量来表示轴角，并且四元数串联的乘法顺序不正确。

```
// Rotate the camera about the world Y axis
// N.B. 'angleAxis' method takes angle in degrees (not in radians)
rotation = glm::gtx::quaternion::angleAxis(yawDegrees, 0.0f, 1.0f, 0.0f);

// Concatenate quaterions ('*' operator concatenates)
// C#: Quaternion.Concatenate(ref rotation, ref orientation)
orientation = orientation * rotation;

// Rotate the camera about the world X axis
rotation = glm::gtx::quaternion::angleAxis(pitchDegrees, 1.0f, 0.0f, 0.0f);

// Concatenate quaterions ('*' operator concatenates)
// C#: Quaternion.Concatenate(ref orientation, ref rotation)
orientation = rotation * orientation; 
```

剩下的问题是视图矩阵旋转似乎旋转了绘制的对象，而不是像普通的 FPS 相机那样环顾四周。

我已将视频上传到 YouTube 以演示该问题。我四处移动鼠标以更改相机的方向，但三角形似乎在旋转。

[演示相机方向问题的 YouTube 视频](http://youtu.be/aSGQn33UG50)

编辑2：

```
void Camera::rotate(float yawDegrees, float pitchDegrees)
{
    // Apply rotation speed to the rotation
    yawDegrees *= lookSensitivity;
    pitchDegrees *= lookSensitivity;

    if (isLookInverted)
    {
        pitchDegrees = -pitchDegrees;
    }

    pitchAccum += pitchDegrees;

    // Stop the camera from looking any higher than 90 degrees
    if (pitchAccum > 90.0f)
    {
        pitchDegrees = 90.0f - (pitchAccum - pitchDegrees);
        pitchAccum = 90.0f;
    }
    // Stop the camera from looking any lower than 90 degrees
    else if (pitchAccum < -90.0f)
    {
        pitchDegrees = -90.0f - (pitchAccum - pitchDegrees);
        pitchAccum = -90.0f;
    }

    // 'pitchAccum' range is [-90, 90]
    //printf("pitchAccum %f \n", pitchAccum);

    yawAccum += yawDegrees;

    if (yawAccum > 360.0f)
    {
        yawAccum -= 360.0f;
    }
    else if (yawAccum < -360.0f)
    {
        yawAccum += 360.0f;
    }

    orientation = 
        glm::gtx::quaternion::angleAxis(pitchAccum, 1.0f, 0.0f, 0.0f) * 
        glm::gtx::quaternion::angleAxis(yawAccum, 0.0f, 1.0f, 0.0f);
} 
```

编辑3：

以下乘法顺序允许相机围绕自己的轴旋转，但朝向错误的方向：

```
 glm::mat4 translation;
translation = glm::translate(translation, position);

view = glm::gtx::quaternion::toMat4(orientation) * translation; 
```

编辑4：

以下将起作用（根据旋转后的位置应用平移矩阵）

```
// Rotation
view = glm::gtx::quaternion::toMat4(orientation); 

// Translation
glm::mat4 translation;
translation = glm::translate(translation, -position);

view *= translation; 
```

我无法让每个方向轴的点积都起作用

```
// Rotation
view = glm::gtx::quaternion::toMat4(orientation); 

glm::vec3 p(
    glm::dot(glm::vec3(view[0][0], view[0][1], view[0][2]), position),
    glm::dot(glm::vec3(view[1][0], view[1][1], view[1][2]), position),
    glm::dot(glm::vec3(view[2][0], view[2][1], view[2][2]), position)
    );

// Translation
glm::mat4 translation;
translation = glm::translate(translation, -p);

view *= translation; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T16:14:21.717

为了给你一个明确的答案，我认为我们需要代码来显示你如何实际向`view`OpenGL 提供矩阵和顶点。然而，这个症状听起来很典型的矩阵顺序不正确。

考虑一些变量：
**V**表示相机当前方向的倒数（四元数）。
**T**表示保存相机位置的平移矩阵。这应该是一个单位矩阵，相机的位置在第四列（假设我们是右乘列向量）。
**U**代表方向变化的倒数。
**p**表示世界空间中的一个顶点。
*注意*：所有矩阵都是逆矩阵，因为变换将应用于顶点，而不是相机，但最终结果是相同的。

默认情况下，OpenGL 相机位于负 z 轴的原点。当视图没有改变时（**U==I**），那么顶点从世界坐标到相机坐标的转换应该是：**p'=TVp**。您首先定位相机（通过沿相反方向旋转世界），然后将相机平移到位置（通过沿相反方向移动世界）。

现在有几个地方可以放**U**。如果我们把**U放在****V**的右边，那么我们就会得到第一人称视角的行为。当您向上移动鼠标时，当前视图中的任何内容都会围绕相机向下旋转。当您向右移动鼠标时，视野中的任何东西都会围绕相机向左旋转。

如果我们将**U**放在**T**和**V**之间，那么相机相对于世界的轴而不是相机的轴转动。这是一种奇怪的行为。如果**V**碰巧把相机关到一边，然后上下移动鼠标将使世界看起来“滚动”而不是“俯仰”或“偏航”。

如果我们把**U放在****T**的左边，那么相机会围绕世界的原点围绕世界的轴旋转。这可能更奇怪，因为它使相机飞越世界越快，相机离原点越远。然而，因为旋转是围绕原点进行的，如果相机恰好在看原点，那里的物体就会看起来像是在转动。这就是您所看到的，因为您使用点积来旋转相机的位置。

您检查以确保它`pitchAccum`保持在 [-90,90] 范围内，但是您已经注释掉了将利用该事实的部分。这对我来说似乎很奇怪。

你左乘俯仰但右乘偏航的方式使得你的四元数对你没有多大作用。他们只是拿着你的欧拉角。除非方向更改来自其他地方，否则您可以简单地说`orientation = glm::gtx::quaternion::angleAxis(pitchAccum*DEG2RAD, 1.0f, 0.0f, 0.0f) * glm::gtx::quaternion::angleAxis(yawAccum*DEG2RAD, 0.0f, 1.0f, 0.0f);`并完全覆盖旧的方向。

# php - url重写大型网站的最佳方法

> ID：12132974
> 
> 赞同：-1
> 
> 时间：2012-08-26T18:57:58.397
> 
> 标签：php, apache, .htaccess

我有一个大型数据库，我想重写 url。它像是

```
www.example.com/products.php?id=111&cat=99&f=6&hjk=4545.. 
```

所以我写了 url rewrite 让这段代码显示为

`www.example.com/men/watches/casio/latest..`像那样，它的工作正常

问题是我有一个大型数据库，几乎不可能单独编写所有 url 重写。

我想到了`.htaacess`使用 php 自动生成文件。那有意义吗？或者什么是最好的解决方案..？

编辑：对于@ghoti

```
RewriteEngine On
RewriteRule ^/([^/]*)/check/([^/]*)/SubjectId/([^/]*)/UniversityId/([^/]*)/CourseId/([^/]*)\.html$ /dsh_course_subjects_topics.php?TopicId=$1&check=$2&SubjectId=$3&UniversityId=$4&CourseId=$5 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:03:59.803

您需要一个重写规则来捕获您正在寻找的模式并将其传递给 php 页面。例如：

（注意，所有这些都需要在同一行）

```
RewriteRule 
   ^/(men|women)/([a-z]+)/([a-z-])/(latest|newest|expensive|cheapest)$ 
   /products.php?gender=$1&product=$2&brand=$3&filter=$4 
```

这样，您可以将通用请求传递给 PHP，您可以在其中查看`$_GET`动态值是什么，然后提取正确的项目。

如果您查看 StackOverflow，它们的 URL 如下所示：

```
^/questions/([0-9]+)/([a-zA-Z0-9-]+)$ 
```

花一些时间查看 ModRewrite 文档以及正则表达式。然后考虑如何积极地识别您的产品（例如，您可能需要在 URL 中加入一个 ID）。

# structuremap - 结构图南希引导程序

> ID：12132975
> 
> 赞同：2
> 
> 时间：2012-08-26T18:58:00.207
> 
> 标签：structuremap, nancy

[我正在尝试使用结构映射引导程序https://github.com/NancyFx/Nancy.Bootstrappers.StructureMap](https://github.com/NancyFx/Nancy.Bootstrappers.StructureMap)引导 nancyfx

这是我的设置：

```
 protected override void ConfigureApplicationContainer(IContainer container)
    {

        container.Configure(x =>
        {
            x.ForSingletonOf<IRazorConfiguration>()
                .Use<DefaultRazorConfiguration>();

           x.ForSingletonOf<ISessionContainer>().Use<SessionContainer>();

           x.For<IRepository>().LifecycleIs(new HttpContextLifecycle()).Use<Repository>();

            x.Scan(scanner=>
            {
                scanner.TheCallingAssembly();
                scanner.AddAllTypesOf<IRepository>();

            });
        });
        base.ConfigureApplicationContainer(container);
    }

 public interface IRepository
{
   void Save();
}

   public class Repository:IRepository
{

   ISessionContainer _session;
   public Repository(ISessionContainer container)
   {
       _session = container;
   }

   public void Save()
   {

   }
} 
```

当我使用`var repo = ObjectFactory.GetInstance<IRepository>();`时，我得到了这个异常：

```
StructureMap Exception Code:  202
No Default Instance defined for PluginFamily Infrastructure.IRepository, Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T18:43:11.583

我想帮助你摆脱黑客......你的问题的根源是你使用 ObjectFactory 的方式。真的，您不应该在 NancyModule 中使用 ObjectFactory 来“GetInstance”。相反，您应该在需要存储库的 NancyModule 的构造函数中包含 IRepository。然后，Structuremap（已使用您的引导程序连接到 Nancy 框架）将在实例化时简单地将具体存储库注入您的模块。这是一个 NancyModule 的示例：

```
public class ProductModule : NancyModule {

    private IRepository _repository;

    public ProductModule(IRepository repository) {

        _repository = repository;

        SetupRoutes();
    }

    private void SetupRoutes() {
        Get["/product/{id}"] = p => {
            return _repository.Get<Product>((int)p.id);
        };        
    }
} 
```

在这里，该模块并没有向 IOC 发出请求来获得回购……它已经得到了它。您的引导程序使这成为可能。现在，您可以摆脱 ObjectFactory 的 hacky 配置。

作为一些一般建议，如果您发现自己使用“ObjectFactory”来解析类型，您应该打自己一巴掌并停止输入。相反，您应该像上面显示的那样使用构造函数注入来注入依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T03:54:35.153

不确定建议的答案发生了什么，但这是我最终解决此问题的方法。

```
protected override void ConfigureApplicationContainer(IContainer container)
{
    container.Configure(x =>
    {
        x.ForSingletonOf<IRazorConfiguration>()
            .Use<DefaultRazorConfiguration>();
        x.ForSingletonOf<ISessionContainer>().Use<SessionContainer>();//Duplicate
        x.Scan(scanner=>
        {
            scanner.TheCallingAssembly();
            scanner.AddAllTypesOf<IRepository>();
        });
    });
    ObjectFactory.Configure(x =>
    {
        x.ForSingletonOf<ISessionContainer>().Use<SessionContainer>();//Duplicate
        x.For<IRepository>().Use<Repository>();
    });
    base.ConfigureApplicationContainer(container);
} 
```

这是一个黑客，但这是我设法让它工作的唯一方法。

# node.js - 在 Jade 包含中使用变量

> ID：12132978
> 
> 赞同：52
> 
> 时间：2012-08-26T18:58:12.330
> 
> 标签：node.js, express, pug

我正在使用 Jade 和 Express，我想在我的 include 语句中使用一个变量。例如：

应用程序.js

```
app.get('/admin', function (req, res) {
  var Admin = require('./routes/admin/app').Admin;

  res.render(Admin.view, {
    title: 'Admin',
    page: 'admin'
  });
}); 
```

布局.jade

```
- var templates = page + '/templates/'

include templates 
```

当我这样做时，我得到了错误`EBADF, Bad file descriptor 'templates.jade'`

我什至试过

```
include #{templates} 
```

无济于事。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-26T19:44:40.533

AFAIK JADE 不支持动态包含。我建议的是在模板之外“包含”，即

**应用程序.js**

```
app.get('/admin', function (req, res) {
    var Admin = require('./routes/admin/app').Admin;
    var page = 'admin';

    var templates = page + '/templates/';

    // render template and store the result in html variable
    res.render(templates, function(err, html) {

        res.render(Admin.view, {
            title: 'Admin',
            page: page,
            html: html
        });

    });

}); 
```

**布局.jade**

```
|!{ html } 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-10-23T10:03:56.987

这也有效：

```
//controller
var jade = require('jade');
res.render('show', {templateRender: jade.renderFile});

//template
!= templateRender('my/path/'+dynamic+'.jade', options) 
```

这可能不会提高您使用[“视图缓存”](http://expressjs.com/de/api.html#app.set)设置所期望的性能（它在 NODE_ENV === 'production' 中默认启用）。甚至破坏应用程序（例如，如果在部署新代码时硬盘驱动器上的文件不可用）。由于无法编译模板，因此尝试在客户端或同构应用程序中使用此技巧也将不起作用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-12T22:37:29.710

发现此页面在谷歌上搜索相同的问题，但在不同的上下文中，所以我认为我会将我的解决方案（阅读：解决方法）放在这里以供后代使用：

我想用从变量中提取的更多上下文来包围我的包含，例如（简化）：

```
- var templates = page + '/templates/'
- var headid = page + 'head'
- var imgsrc = '/images/' + page
div(id=headid)    
  h1 #{page}
  img(src=imgsrc)
div(id=page)
  include templates 
```

由于这不起作用（Jade 不支持动态包含，正如怪异所指出的那样），我与 mixin 混合：

（编辑——比我以前的解决方法更优雅一点：）

```
mixin page1
  include page1/templates

mixin page2
  include page2/templates

...

- for (var i = 0; i < 3; i++)
  - var page = 'page' + i
  - var headid = page + 'head'
  - var imgsrc = '/images/' + page
  div(id=headid)    
    h1 #{page}
    img(src=imgsrc)
  div(id=page)
    +page 
```

我之前的回答：

```
mixin templates(page)
  - var headid = page + 'head'
  - var imgsrc = '/images/' + page
  div(id=headid)    
    h1 #{page}
    img(src=imgsrc)

+templates('page1')
#page1
  include page1/templates/

+templates('page2')
#page2
  include page2/templates/

... 
```

它不优雅，如果你需要以这种方式包含多个东西，它就行不通，但至少 Jade 的一部分是动态的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-01T17:06:13.413

为什么不用玉继承？

在中间件级别呈现您想要的内容：

```
res.render('templates/' + template_name + '.jade') 
```

写普通`common.jade`：

```
h1 This is a page
.container
  block sublevel
    h2 Default content 
```

然后编写扩展文件`common.jade`：

```
extends common.jade
block sublevel
  h2 Some things are here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-08T08:18:59.740

现在是 2019 年，在 Pug（以前的 Jade）mixins 中使用变量变得很简单。

创建 mixin 时，您可以根据您希望传递给 mixin 的值为其提供参数。您可以使用点表示法访问任何嵌套值。

mixinFile.pug:

```
mixin myMixin(parameter1, parameter2, parameter3)
    h2.MyHeading #{parameter1}
    p.MyParagraph #{parameter2.myVariable}
    .MyBox(id= parameter3.id) 
```

指数.pug：

```
include mixinFile
block content
    +MyMixin(variable1, variable2, variable3) 
```

[你可以在 Mixins 的官方 Pug 文档](https://pugjs.org/language/mixins.html)中阅读更多内容。

# xml - Apache Ant 执行错误

> ID：12132981
> 
> 赞同：0
> 
> 时间：2012-08-26T18:58:29.757
> 
> 标签：xml, apache, ant

当我尝试在 CLI 中运行“ant”时，我收到 BUILD FAILED “Execute failed: java.in.IOException: Cannot run program “phploc”: CreateProcess error=2” 错误（在 exec executable="phploc" 行）。

我的文件结构：
-- build/
-- src/
-- build.xml

构建.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="..." default="build">
 <target name="build"
   depends="prepare,phploc,pdepend,phpmd-ci,phpcs-ci,phpcpd,phpdox,phpunit,phpcb"/>

 <target name="build-parallel"
   depends="prepare,tools-parallel,phpunit,phpcb"/>

 <target name="tools-parallel" description="Run tools in parallel">
  <parallel threadCount="2">
   <sequential>
    <antcall target="pdepend"/>
    <antcall target="phpmd-ci"/>
   </sequential>
   <antcall target="phpcpd"/>
   <antcall target="phpcs-ci"/>
   <antcall target="phploc"/>
   <antcall target="phpdox"/>
  </parallel>
 </target>

 <target name="clean" description="Cleanup build artifacts">
  <delete dir="${basedir}/build/api"/>
  <delete dir="${basedir}/build/code-browser"/>
  <delete dir="${basedir}/build/coverage"/>
  <delete dir="${basedir}/build/logs"/>
  <delete dir="${basedir}/build/pdepend"/>
 </target>

 <target name="prepare" depends="clean" description="Prepare for build">
  <mkdir dir="${basedir}/build/api"/>
  <mkdir dir="${basedir}/build/code-browser"/>
  <mkdir dir="${basedir}/build/coverage"/>
  <mkdir dir="${basedir}/build/logs"/>
  <mkdir dir="${basedir}/build/pdepend"/>
  <mkdir dir="${basedir}/build/phpdox"/>
 </target>

 <target name="phploc" description="Measure project size using PHPLOC">
  <exec executable="phploc">
   <arg value="--log-csv" />
   <arg value="${basedir}/build/logs/phploc.csv" />
   <arg path="${basedir}/src/" />
  </exec>
 </target>

 <target name="pdepend" description="Calculate software metrics using PHP_Depend">
  <exec executable="pdepend">
   <arg value="--jdepend-xml=${basedir}/build/logs/jdepend.xml" />
   <arg value="--jdepend-chart=${basedir}/build/pdepend/dependencies.svg" />
   <arg value="--overview-pyramid=${basedir}/build/pdepend/overview-pyramid.svg" />
   <arg path="${basedir}/src/application" />
  </exec>
 </target>

 <target name="phpmd"
         description="Perform project mess detection using PHPMD and print human readable output. Intended for usage on the command line before committing.">
  <exec executable="phpmd">
   <arg path="${basedir}/src/application" />
   <arg value="text" />
   <arg value="${basedir}/build/phpmd.xml" />
  </exec>
 </target>

 <target name="phpmd-ci" description="Perform project mess detection using PHPMD creating a log file for the continuous integration server">
  <exec executable="phpmd">
   <arg path="${basedir}/src/application" />
   <arg value="xml" />
   <arg value="${basedir}/build/phpmd.xml" />
   <arg value="--reportfile" />
   <arg value="${basedir}/build/logs/pmd.xml" />
  </exec>
 </target>

 <target name="phpcs"
         description="Find coding standard violations using PHP_CodeSniffer and print human readable output. Intended for usage on the command line before committing.">
  <exec executable="phpcs">
   <arg value="--standard=${basedir}/build/phpcs.xml" />
   <arg path="${basedir}/src/application" />
  </exec>
 </target>

 <target name="phpcs-ci" description="Find coding standard violations using PHP_CodeSniffer creating a log file for the continuous integration server">
  <exec executable="phpcs" output="/dev/null">
   <arg value="--report=checkstyle" />
   <arg value="--report-file=${basedir}/build/logs/checkstyle.xml" />
   <arg value="--standard=${basedir}/build/phpcs.xml" />
   <arg path="${basedir}/src/application" />
  </exec>
 </target>

 <target name="phpcpd" description="Find duplicate code using PHPCPD">
  <exec executable="phpcpd">
   <arg value="--log-pmd" />
   <arg value="${basedir}/build/logs/pmd-cpd.xml" />
   <arg path="${basedir}/src/application" />
  </exec>
 </target>

 <target name="phpdox" description="Generate API documentation using phpDox">
  <exec executable="phpdox"/>
 </target>

 <target name="phpunit" description="Run unit tests with PHPUnit">
  <exec executable="phpunit" failonerror="true"/>
 </target>

 <target name="phpcb" description="Aggregate tool output with PHP_CodeBrowser">
  <exec executable="phpcb">
   <arg value="--log" />
   <arg path="${basedir}/build/logs" />
   <arg value="--source" />
   <arg path="${basedir}/src" />
   <arg value="--output" />
   <arg path="${basedir}/build/code-browser" />
  </exec>
 </target>
</project> 
```

你能给我一些关于如何解决这个问题的建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:29:39.487

错误 2 表示“找不到文件”，这表明您尝试运行的命令不在您的 PATH 上。但还要注意，Ant 的`exec`任务在后台使用 Java `Runtime.exec`，它在 Windows 上只能运行`.exe`命令，不能运行`.bat`文件。要运行批处理文件，您需要使用

```
<exec executable="cmd">
  <arg value="/c" />
  <arg file="C:/path/to/phploc.bat" />
  <arg value="--log-csv" />
  <arg value="${basedir}/build/logs/phploc.csv" />
  <arg path="${basedir}/src/" />
</exec> 
```

# c++ - C++ 异常裸抛出

> ID：12132983
> 
> 赞同：0
> 
> 时间：2012-08-26T18:58:51.987
> 
> 标签：c++, windows, visual-c++, exception, try-catch

> **可能重复：**
> [throw 和 throw 与捕获异常的 arg 有什么区别？](https://stackoverflow.com/questions/1481612/what-is-the-difference-between-throw-and-throw-with-arg-of-caught-exception)
> [catch (...) 对 throw 有效吗？没有对象？](https://stackoverflow.com/questions/5766006/does-catch-work-on-throw-with-no-object)

这将崩溃：

```
try
{
    if(1)
        throw;
}
catch(...)
{
    printf("hi");
} 
```

我以为我能做到，但我想不能。当您不需要任何信息时，正确的投掷方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T19:02:36.647

“裸抛出”重新抛出已经被捕获的异常。如果没有可重新抛出的东西，则效果不佳。

你真的可以扔任何东西，比如`throw "Error!";`，即使那不是太有用。否则你可以尝试

```
if (x == 1)
    throw std::runtime_error("x == 1 is not a good value here")`. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T21:02:01.890

```
#include <exception>

try
{
    if(1)
        throw std::exception();
}
catch(...)
{
    printf("hi");
} 
```

这可能会更好，具体取决于您要做什么：

```
class my_exception : public std::exception {}; 
```

然后，

```
try
{
    if(1)
        throw my_exception();
}
catch(my_exception)
{
    printf("hi");
} 
```

# ruby-on-rails - Ruby on Rails - 将方法的返回值传递给 has_attached_file。我是否得到 Ruby 语法错误？

> ID：12132991
> 
> 赞同：0
> 
> 时间：2012-08-26T18:59:20.760
> 
> 标签：ruby-on-rails, ruby, paperclip

我正在编写我的第一个 RoR 应用程序，目前我正在努力允许用户上传图像。我为此目的使用[回形针。](https://github.com/thoughtbot/paperclip)其中一个步骤涉及添加`has_attached_file`到我的模型中：

```
class MyModel < ActiveRecord::Base
  #...
  has_attached_file :picture, styles: {
    large: "120x150#>", 
    small: "60x75#>"
  }
  #...
end 
```

如果我这样做，一切都会顺利进行（或者看起来如此）。但我还需要在其他地方访问与整数相同的常量值，所以我添加了一个哈希：

```
class MyModel < ActiveRecord::Base
  #...
  has_attached_file :picture, styles: {
    large: "120x150#>", 
    small: "60x75#>"
  }
  def picture_sizes
  {
    large: {width: 120, height: 150},
    small: {width: 60, height: 75}
  }
  end
  #...
end 
```

这造成了丑陋的冗余。所以我想写一个从第二个哈希生成第一个哈希的方法，像这样

```
class MyModel < ActiveRecord::Base
  #...
  has_attached_file :picture, styles: picture_sizes_as_strings

  def picture_sizes
  {
    large: {width: 120, height: 150},
    small: {width: 60, height: 75}
  }
  end

  def picture_sizes_as_strings
    result = {}
    picture_sizes.each do |label, size|
      result[:label] = "#{size[:width]}x#{size[:height]}#>"
    end
    return result
  end
  #...
end 
```

但这会引发一个错误：

```
undefined local variable or method `picture_sizes_as_strings' for #<Class:0x007fdf504d3870> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T19:26:42.123

问题是您试图在声明 ( ) 中使用实例方法`picture_sizes_as_strings`，该声明 ( `has_attached_image`) 在类级别上运行。这就是打电话的区别

```
MyModel.picture_sizes_as_strings 
```

和

```
MyModel.first.picture_sizes_as_strings 
```

在第一种情况下，我们指的是类方法（类 MyModel 本身的方法），在第二种情况下，我们指的是实例方法（单个 my_model 对象上的方法。）

因此，首先您必须通过在名称前加上前缀来将方法更改为类方法`self.`，因此：

```
def self.picture_sizes
  {
    large: {width: 120, height: 150},
    small: {width: 60, height: 75}
  }
end 
```

现在这还不能完全解决您的问题，因为`has_attached_image`在模型第一次由 ruby​​ 解析时处理。`has_attached_image`这意味着它会在你定义之前尝试运行，`self.picture_sizes`所以它仍然会说`undefined method`.

`self.picture_sizes`您可以通过在声明之前添加来解决此问题，`has_attached_file`但这很丑陋。您也可以将数据放在一个常量中，但这有其自身的问题。

老实说，没有真正漂亮的方法来解决这个问题。如果是我，我可能会颠倒整个过程，将样式定义为正常，然后使用一种方法将字符串转换为整数，如下所示：

```
class MyModel < ActiveRecord::Base
  has_attached_file :picture, styles: {
    large: "120x150#>", 
    small: "60x75#>"
  }

  def numeric_sizes style
    # First find the requested style from Paperclip::Attachment
    style = self.picture.styles.detect { |s| s.first == style.to_sym }

    # You can consolidate the following into one line, I will split them for ease of reading
    # First strip all superfluous characters, we just need the numerics and the 'x' to split them
    sizes = style.geometry.gsub(/[^0-9x]/,'')
    # Next split the two numbers across the 'x'
    sizes = sizes.split('x')
    # Finally convert them to actual integer numbers
    sizes = sizes.map(&:to_i)
  end
end 
```

然后，您可以调用`MyModel.first.numeric_sizes(:medium)`以找出特定样式的大小，以数组形式返回。当然，您也可以将它们更改为哈希或您需要的任何格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T19:12:06.503

在`has_attached_file`运行时评估。您已经定义了一个实例方法，但您没有从实例上下文中调用该方法。

尝试：

```
def self.picture_sizes_as_strings
  # code here
end 
```

`self.`确保您还定义了另一种方法

接着：

```
has_attached_file :picture, :styles => picture_sizes_as_strings 
```

应该管用。