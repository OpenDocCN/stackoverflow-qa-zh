# StackOverflow 问答 11631000-11631999

# objective-c - 删除（更新）cor eData 对象

> ID：11631001
> 
> 赞同：0
> 
> 时间：2012-07-24T12:35:17.287
> 
> 标签：objective-c, ios, core-data

我正在开发一个 iOS 应用程序，我正在使用`CoreData`它来持久化我的数据。该应用程序就像 iBooks，我们可以下载一本书，阅读一本书，在书中做笔记，...为此，我在`CoreData`( `NoteEntity`,....) 中有许多实体。现在我有一个功能，正在删除用户下载的一本书（用户可以下载很多书，并且有删除一本书的功能（例如有空格））。我的问题是，有没有一种简单的方法可以删除 CoreData 中的所有对象（与用户删除的书相对应的所有对象）谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:38:26.927

在书和与之关联的所有对象之间创建“级联”删除关系。

从[核心数据编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)：

> **关系删除规则：**关系的删除规则指定如果尝试删除源对象会发生什么。请注意前一句中的措辞——“如果尝试……”。如果关系的删除规则设置为拒绝，则可能不会删除源对象。再次考虑一个部门的员工关系，以及不同删除规则的影响。
> 
> ...
> 
> **级联：** 删除关系目的地的对象。例如，如果您删除一个部门，请同时解雇该部门的所有员工。

# xamarin.android - monodroid CustomAdapter NotifyDataSetChanged 不起作用

> ID：11631002
> 
> 赞同：1
> 
> 时间：2012-07-24T12:35:18.467
> 
> 标签：xamarin.android, adapter

我的问题是这`((BaseAdapter)listAdapter).NotifyDataSetChanged();`不起作用。我使用计时器每 X 分钟获取一次新闻。我进行了调试并看到了数据适配器的变化，但在屏幕上没有任何变化。如果我缩放屏幕上看到的新数据。加载时未触发列表视图单击事件。更改 listadapter 并执行缩放单击事件后。

请你帮助我好吗？

```
[Activity (Label = "SportNews")]            
public class SportNews : Activity
{
    RssFeedItemAdapter listAdapter;
    JavaList<FeedItem> items = new JavaList<FeedItem>();
    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        SetContentView(Resource.Layout.list_view);

        items = RssHelper.Instance.SportNews();

        //ListAdapter = new ArrayAdapter<string> (this, Resource.Layout.list_item, items);
        listAdapter = new RssFeedItemAdapter(this,items);

        ListView listView = FindViewById<ListView>(Resource.Id.listView);

        listView.Adapter = listAdapter;

        ((BaseAdapter)listAdapter).NotifyDataSetChanged();

        listView.ItemClick += new EventHandler<AdapterView.ItemClickEventArgs>(listView_ItemClick);

        Timer timer = new Timer(PushNews, null, TimeSpan.Zero, TimeSpan.FromMinutes(15)); // get time from user preferences...
    }
    private void PushNews(object state)
    {
        items = RssHelper.Instance.SportNews();
        JavaList<FeedItem> feeds = new JavaList<FeedItem>();
        feeds.Add(new FeedItem()
        {
         NewsPicture = "http://www.website.com/pic/test.jpg",
         NewsTitle = "Test news",
         NewsUrl = "http://www.google.com",
        });
        listAdapter = new RssFeedItemAdapter(this,feeds);
        ((BaseAdapter)this.listAdapter).NotifyDataSetChanged();
    }

    void listView_ItemClick(object sender, Android.Widget.AdapterView.ItemClickEventArgs e)
    {
        //Get our item from the list adapter
        var item = this.listAdapter.GetItemAtPosition(e.Position);

        var intent = new Intent();
        intent.SetClass(this, typeof(NewsView));
        intent.PutExtra("Url", item.NewsUrl);
        StartActivity(intent);
    }
} 
```

# php - 我应该使用什么来制作以 API 为中心的 Web 应用程序。CMS 或任何 MVC 框架？

> ID：11631003
> 
> 赞同：-2
> 
> 时间：2012-07-24T12:35:18.837
> 
> 标签：php, model-view-controller, frameworks, content-management-system

我的要求是构建以 API 为中心的 Web 应用程序，就像我需要为特定用户获取 Faceboook、Twitter、LinkedIn Feeds 一样。用户还可以评论、分享，就像他或她可以在 FB、Twitter 或 LinkedIn 中一样。

用户也可以从 Web 应用程序更新状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:43:59.853

CMS是一个内容管理系统，所以它主要是为了帮助网站**管理员**添加新内容，更新链接，更好的SEO等。它也强制开发者以某种方式进行开发（使用一些CMS预定义的功能，结构数据在某种方式）。

MVC 框架旨在帮助**开发人员**以更健壮的方式进行开发，并为开发人员提供更容易开发的工具，例如：结构化 URL (MVC)、辅助函数等。

所以总结一下：

1.  CMS - 在开发过程中提供帮助，但主要帮助管理站点
2.  MVN FW - 帮助开发网站

# jquery - jquery livesearch（过滤器）保留所选项目

> ID：11631006
> 
> 赞同：0
> 
> 时间：2012-07-24T12:35:26.767
> 
> 标签：jquery, drop-down-menu

下面的代码非常适用`livesearch`于 Html `select`。但是，如果我有一个多选列表并且我希望能够选择一些项目，然后搜索关键字但不丢失以前选择的项目怎么办。

有任何想法吗？

```
<script type="text/javascript">
    $(function() {
        var opts = $('#optlist option').map(function(){
            return [[this.value, $(this).text()]];
        });

        $('#someinput').keyup(function(){
            var rxp = new RegExp($('#someinput').val(), 'i');
            var optlist = $('#optlist').empty();
            opts.each(function(){
                if (rxp.test(this[1])) {
                    optlist.append($('<option/>').attr('value', this[0]).text(this[1]));
                }
            });
        });
    });
</script>

<input id="someinput"><br>

<select id="optlist" multiple="multiple">
    <option value="1">foo</option>
    <option value="2">bar</option>
    <option value="3">foobar</option>
    <option value="4">foobarbaz</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:58:11.873

[我刚刚在这里](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)找到了一个不错的选择

# android - 通过应用程序内的屏幕选项将文本中的默认语音更改为语音

> ID：11631012
> 
> 赞同：6
> 
> 时间：2012-07-24T12:35:43.093
> 
> 标签：android, text-to-speech, voice-recording

我正在开发一个需要在 android 中更改默认语音的文本到语音应用程序。我如何在 android 中免费使用儿童语音或女性语音和其他可用语音？我可以将用户语音加载为语音吗？我想在应用程序的主屏幕上提供更改语音的选项。

有多少其他语音可用于 android 测试语音，这些语音可以免费使用，我如何使用它们？请帮我。谢谢你。

# android - Android App Developer 控制台：回溯到以前的版本？

> ID：11631015
> 
> 赞同：2
> 
> 时间：2012-07-24T12:36:02.530
> 
> 标签：android

是否可以回溯到已发布的 Android 应用程序的先前版本 - 如果可以，此版本是否会作为手机更新服务的一部分被替换 - 或者我是否需要发布具有递增版本号的旧应用程序的新版本？

干杯保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:38:50.463

您可以重新激活以前上传的版本。我不知道它们会保存多久，或者只要您不删除它们，它们是否会保留。

# checkbox - 单击 Wicket 中不同面板中的复选框时更新文本字段

> ID：11631019
> 
> 赞同：2
> 
> 时间：2012-07-24T12:36:13.530
> 
> 标签：checkbox, wicket, textfield

当不同面板上的复选框更新时，如何更新面板上的文本字段？

看图片

![图片](../Images/1d55bca5b75f8b164d21bf433a5ad9a7.png)

我想做的是：

```
 AjaxCheckBox checkbox= new AjaxCheckBox("checkbox") {
        @Override
        protected void onUpdate(AjaxRequestTarget target) {
            boolean selected = getModelObject();
            if(selected){
              TextField textField = panel.getTextField();
              textField.setModelObject(obj);
              textField.add(new AttributeModifier("readonly", true, 
new Model("readonly")));

            }

        }
    }; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:15:39.753

在第二个面板（包含复选框）上，您可以添加一个`onUpdateCheckbox(AjaxRequestTarget target)`必须由第一个面板（包含文本字段）实现的抽象方法。

`onUpdate(...)`您唯一的方法`AjaxCheckBox`必须调用此抽象方法。

在第一个面板的实现中，`onUpdateCheckbox(...)`您可以操作文本字段并将其添加到目标对象。

# python - Sqlite3：在从 python 附加数据库查询期间删除了错误的表

> ID：11631025
> 
> 赞同：0
> 
> 时间：2012-07-24T12:36:37.150
> 
> 标签：python, sqlite

我正在使用来自 python 2.7.2 的 SQLite 版本 3.3.6。

`executescript()`使用from python 脚本执行此查询时：

```
attach database 'Capacity.db' as WeekAgo;
drop table if exists maximums;
create table maximums (Element TEXT UNIQUE, Score NUMBER , Report TEXT);
insert into maximums (Element, Score, Report) select * from WeekAgo.maximums; 
```

我总是以删除附加数据库中的 WeekAgo.maximums 表和脚本崩溃结束，不再存在 WeekAgo.maximums。我究竟做错了什么？没有`DROP IF EXISTS`，一切正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T12:40:37.070

使用`main`关键字：

```
attach database 'Capacity.db' as WeekAgo;
drop table if exists main.maximums;
create table main.maximums (Element TEXT UNIQUE, Score NUMBER , Report TEXT);
insert into main.maximums (Element, Score, Report) select * from WeekAgo.maximums; 
```

见[https://www.sqlite.org/lang_attach.html](https://www.sqlite.org/lang_attach.html)

> 如果不同数据库中的两个或多个表具有相同的名称，并且在表引用中未使用 database-name 前缀，则选择的表是数据库中最近最少附加的表。

# javascript - 使用 DOM javascript 包含文本和图片的按钮

> ID：11631029
> 
> 赞同：1
> 
> 时间：2012-07-24T12:36:41.733
> 
> 标签：javascript, css, dom

我想使用 DOM 创建包含文本和图片的按钮。在我的代码中，我可以在按钮上获取文本和图片。但问题是，按钮上的图片出现在顶部，图片后面的文字不在同一行。

```
phone_btn.appendChild(picture)
phone_btn.appendChild( document.createTextNode(text) ); 
```

我也像这段代码一样使用CSS，但图片没有出现

```
 phone_btn.backgroundImage= 'url(http:...)';
    phone_btn.backgroundRepeat='no-repeat';
    phone_btn.paddingLef='30px';
    phone_btn.appendChild( document.createTextNode(text) ); 
```

我该怎么做才能使图片和文字对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:31:30.353

这听起来纯粹是一个 CSS 问题，与 javascript 无关。我建议先正确地获取 CSS 代码，然后如果您需要动态创建或更改该元素，请在之后进行。

```
<a class="button">Text</a>

.button {
     padding: 0 10px;
     background-image: url(bg.jpg);
     display: block;
     height: 30px;
     line-height: 30px;
     text-align: center
} 
```

结合显示块，将高度和行高设置为相等将使文本垂直居中。此高度应等于背景图像的高度。

# iframe - 在 IE9 中向下滚动网站时，带有 Flash 内容的 iframe 会浮在水平菜单上

> ID：11631030
> 
> 赞同：0
> 
> 时间：2012-07-24T12:36:44.333
> 
> 标签：iframe, scroll, internet-explorer-9, z-index

我正在尝试加载一个`<iframe>`嵌入了 Flash 文件的文件。我不能使用该`object/embed`标签，因为除非它位于`<iframe>`. 当我在 IE 9 中向下滚动页面时，我注意到`<iframe>`浮动在页面上具有固定位置的水平主菜单上。有没有办法解决这个问题，强制`<iframe>`内容进入主菜单？这是我的代码`<iframe>`：

```
<iframe name="flash object" src="http://www.website.com/flash.html?>" scrolling="no" frameborder="no" height="380" width="100%">
</iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:00:58.387

在 flash swf 文件中添加：

> wmode="透明"

这将透明 swf 文件并解决问题。 [SWF 文件中的透明背景](http://helpx.adobe.com/flash/kb/transparent-background-swf-file.html)

对于您的新问题，我为您制作了一个小脚本，您可以随时更改闪存此脚本仅执行 console.log，您必须将其分配给您的闪存：

```
<script type="text/javascript">
    var swfPaths = ['swf1.swf','swf2.swf','swf3.swf','swf4.swf'];
    var oSwfs = [];
    for(i=0; i < swfPaths.length; i++){oSwfs[i] = swfPaths[i];}
    curSwf = Math.floor(Math.random()*oSwfs.length);
    window.onload=function(){
        console.log(oSwfs[curSwf]);
    }
</script> 
```

# wpf - visualstudio 如何知道当前项目的类型？

> ID：11631034
> 
> 赞同：4
> 
> 时间：2012-07-24T12:36:54.217
> 
> 标签：wpf, winforms, visual-studio-2010, project, solution

在 Visual Studio 中，用于在 WinForms 项目中添加元素的上下文菜单命令与为 WPF 项目显示的不同。事实上，我可以在第一个中看到“Add->Windows Form”，在第二个中看到“Add->Window”。VisualStudio 通过哪些参数/配置可以区分当前打开的是哪种项目？我的第一个赌注是 .csproj 文件，但我看不出项目类型有什么特别之处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:38:29.863

项目文件中通常有一个`ProjectTypeGuids`元素允许 Visual Studio 确定它是什么项目类型。它也在解决方案文件中说明，引用项目。

```
<ProjectTypeGuids>{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

举个例子。

这是项目指南列表的旧链接，但大多数仍然有效： http: [//onlinecoder.blogspot.se/2009/09/visual-studio-projects-project-type.html](http://onlinecoder.blogspot.se/2009/09/visual-studio-projects-project-type.html)

这是一篇博文，概述了它的全部内容：

> [http://www.dzimchuk.net/blog/post/ProjectTypeGuids-node-in-VS-project-files.aspx](http://www.dzimchuk.net/blog/post/ProjectTypeGuids-node-in-VS-project-files.aspx)
> 
> “在一个常规的类库项目中，‘ProjectTypeGuids’节点根本就不见了。很快就找到了那些神秘的 GUID 是关于什么的：[已知项目类型 Guid 的列表](http://www.mztools.com/Articles/2008/MZ2008017.aspx)。所以第一个说它是一个 WPF 项目，而第二个说这是一个 C# 项目。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T12:42:04.137

`ProjectTypeGuids`识别 Visual Studio 识别的项目类型。它包含在项目文件和解决方案文件中。一个项目可以属于多个项目类型，例如 C# 和 VSTO。

**WPF**的 GUID 为，`{60dc8134-eba5-43b8-bcc9-bb4bc16c2548}`而**WinForms**的 GUID`{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}`为[OutputType`WinExe`](https://stackoverflow.com/a/924764/175679)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:40:16.977

它实际上是`.sln`文件中标识项目类型的 GUID。

```
Project("{PROJECT-TYPE-GUID}") = "OurSolution.Tests.Integration", "OurSolution.Tests.Integration\OurSolution.Tests.Integration.csproj", "{04A96D9A-FF90-4FDC-9265-704CC8D496BE}" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T12:41:24.727

几乎正确，它在解决方案文件中。搜索属性 ProjectTypeGuids。

以下是项目类型的一些 GUID 列表： [http ://www.mztools.com/articles/2008/mz2008017.aspx](http://www.mztools.com/articles/2008/mz2008017.aspx)

编辑：请参阅此帖子以获取答案：[您如何从现有的 Visual Studio 项目中区分 Visual Studio 项目类型](https://stackoverflow.com/questions/660790/how-do-you-tell-the-visual-studio-project-type-from-an-existing-visual-studio-pr)

# nivo-slider - 将位置设置为绝对位置后，Nivo 滑块不遵守“宽度”命令

> ID：11631045
> 
> 赞同：0
> 
> 时间：2012-07-24T12:37:41.607
> 
> 标签：nivo-slider

```
.slider-wrapper { 
    width: 80%; 

    position: absolute;
    top: 200px; 
```

我将`position: absolute;`and添加`top: 200px;`到 .slider-wrapper 但添加这两个命令后不再遵守 80% 的宽度。

[Nivo 滑块链接](http://nivo.dev7studios.com/)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:26:10.633

你试过设置 `width: 80% !important;`吗？

# java - 弹簧单例范围

> ID：11631047
> 
> 赞同：2
> 
> 时间：2012-07-24T12:37:43.853
> 
> 标签：java, spring

弹簧参考手册说：

Spring 单例的范围最好描述为“每个容器和每个 bean”。

考虑这个代码片段：

```
ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml")
MyBean myobj=(MyBean)context.getBean("myBean"); //myBean is of singleton scope.
MyBean myobj1=(MyBean)context.getBean("myBean"); 
```

`per container`意味着如果我们执行`context.getBean("myBean");`两次，它将返回相同的 bean，即`myobj==myobj1`is `true`。

但是`per bean`in `per container and per bean`from 上面的语句是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:06:31.433

以简单的方式

```
ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml")
MyBean myobj=(MyBean)context.getBean("myBean"); //myBean is of singleton scope.

ApplicationContext context1= new ClassPathXmlApplicationContext("Beans.xml")
MyBean myobj1=(MyBean)context1.getBean("myBean");

myobj==myobj1 would not be same 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T12:40:15.187

Spring bean 容器将为单例范围的 bean 创建单个 bean，如果您有另一个 spring 容器，则将创建不同的 bean

所以每个容器都会有一个bean实例（对于单例范围的bean）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:39:51.317

关于这个问题，我问了另一个问题：[spring singleton scope- per container per bean](https://stackoverflow.com/questions/12918066/spring-singleton-scope-per-container-per-bean)

从那我得出以下`per bean`部分短语`per container per bean`：

考虑：

```
ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml")
MyBean myobj=(MyBean)context.getBean("myBean"); 
MyBean myobj1=(MyBean)context.getBean("myBean"); 
MyBean myobj2=(MyBean)context.getBean("mySecondBean"); 
```

Beans.xml：

```
<bean id="myBean" class="MyBean"/>
<bean id="mySecondBean" class="MyBean"/> 
```

现在 Spring 中的 Singleton 是`per container per bean`.

`per container`意味着如果我们在*同一个容器中获得**相同的 bean id*，那么它们代表相同的实例 。因此是真的。`getBean()`*`myobj==myobj1`*

 *如果我们在两个*不同的容器*中获得具有相同 id 的 bean，那么它们将代表两个不同的实例。这在上面由**NirmalthInk beYond**给出的答案中表示。

但是对于单例，`per container`它也应该是`per bean`（每个 bean 标签）。

*即，如果我们在同一个类*的配置文件中定义两个bean，那么即使在*同一个容器中*，它们也代表*不同的实例*。

 *这就是为什么`myobj==myobj2`是假的。**

# php - 如何运行从 PHP 创建的初始 .pot 文件？

> ID：11631052
> 
> 赞同：0
> 
> 时间：2012-07-24T12:38:05.797
> 
> 标签：php, exec, xgettext

我正忙于编写一个需要正确本地化的应用程序，但一直手动创建可移植对象模板的行为很乏味。

谁能告诉我为什么这段代码：

```
<?php
exec("xgettext -d templates/base -s -j -o default.pot templates/base/view.php", $output);
?> 
```

什么也没做，但是当我在命令行中运行它时，它实际上会用它找到的条目填充 default.pot 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:47:30.147

我发现大多数此类问题都是由路径引起的。用户 php/apache 在您的机器上运行（通常是“nobody”或“www-data”）可能没有设置 PATH 环境变量，如果是，它可能没有包含`xgettext`. 如果未设置该变量，则在执行该命令时 bash（作为该用户）将无法找到二进制文件。

确认这是问题的最佳方法是放入完整路径`xgettext`，如果您不知道可以`which xgettext`在 bash 中执行以获取路径并对其进行硬编码。如果可行，您可以保留该路径，或者如果代码需要可移植，则可以找到另一种解决方案，例如将路径添加到 Apache 用户的 PATH 环境变量。

# http - 如何检测该消息“通过关闭连接而终止”

> ID：11631062
> 
> 赞同：1
> 
> 时间：2012-07-24T12:38:45.437
> 
> 标签：http, networking, network-programming, http-headers

HTTP 规范 (RFC2616) 有以下短语：

> 如果存在 Transfer-Encoding 头字段（第 14.41 节）并且具有除“identity”以外的任何值，则传输长度通过使用“分块”传输编码（第 3.6 节）定义，除非消息被终止通过关闭连接。

如何检测到消息“通过关闭连接而终止”？检查“连接”字段的值“关闭”是否足够？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:58:53.427

我认为RFC指向TCP连接，当你从套接字读取0字节时，对方已经关闭了连接。

更多： [已连接套接字上的 read() 函数可以返回零字节吗？](https://stackoverflow.com/questions/2416944/can-read-function-on-a-connected-socket-return-zero-bytes)

# java - 关于Java相等运算符的使用

> ID：11631064
> 
> 赞同：-6
> 
> 时间：2012-07-24T12:38:53.723
> 
> 标签：java

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

```
class StringTest {
public static void main(String[] args) {
String str1 = "Hi there";
String str2 = new String("Hi there");
System.out.println(str1 == str2);
System.out.println(str1.equals(str2));
} 
```

输出出来了：

```
 False
                          true 
```

为什么即使 str1 和 str2 看起来相等，第一个输出也是假的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T12:40:01.693

`==`比较变量的内容。（您对此非常了解`intA == intB`。）

`String`变量包含对对象的*引用*`String`，因此`==`将比较引用。

后

```
String str1 = "Hi there";
String str2 = new String("Hi there"); 
```

`str1`并将`str2`引用不同的字符串对象，因此包含不同的引用，因此`str1 == str2`将 yield `false`。

`str1.equals(str2)`另一方面，将比较`str1`和`str2`所指的对象，正如您所指出的那样，产生`true`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:41:43.940

因为如果你使用`new`操作符，它会在内存中创建一个新的引用。

> == 比较两个不同对象的引用。
> 
> 使用 equals 比较内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:41:10.097

作为 aioobe 答案的补充：您实际上应该使用 equals 方法比较对象。对象上的 == 运算符将比较两个对象的引用是否指向相同的内存地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:41:32.723

`==`比较`object reference contents`ie`str1`和`str2`not `object contents`while`equals()`比较`object contents`ie`(objects pointed by str1 and str2)`

还要检查这个：

```
String str1 = "Hi there";
String str3 = "Hi there"; 
```

> str1 == str3 => 真

这是因为 JVM 以不同的方式处理字符串文字。[在这里](http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3)检查

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T12:45:08.720

在 java 中，当您使用`new`关键字创建对象时，它们会在某个位置的堆中创建。

即使您`str3`使用`new`then 创建第三个引用变量，如果将引用与`str2`

```
String str1 = "Hi there";
String str2 = new String("Hi there");
String str3 = new String("Hi there");

 str2==str3 gives you false 
```

因此，当您使用 s`compare`的值而不是.`object``equals``reference`

# java - 存储电子邮件附件元数据

> ID：11631066
> 
> 赞同：0
> 
> 时间：2012-07-24T12:38:56.290
> 
> 标签：java, servlets, webserver, email-attachments

我有一个电子邮件系统，我正在寻找添加附件功能。我的问题是，在用户将他们的附件文件上传到我的服务器后，我想以某种方式将文件名链接到他们的会话。所以他们点击上传，弹出一个提示他们浏览文件并上传，当过程完成时（文件现在在我的服务器上并且弹出窗口关闭）。我想以某种方式向用户显示将与电子邮件一起发送的附件（只是文件名）。

我会在数据库中还是在 cookie 中执行此操作。基本上将会话 ID 与附件的文件名链接起来。

我目前正在考虑在 cookie 中执行此操作。我不确定那有多安全。或者这对任何漏洞都是开放的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:55:25.580

不，你不应该在 cookie 中这样做。会议**就是**因为这个原因。能够将任何会话对象链接到会话。

要在会话中添加文件名，只需执行以下操作：

```
session.setAttribute("filename", filename); 
```

并使用：

```
String filename = session.getAttribute("filename").toString(); 
```

您甚至可以在会话中添加孔对象而不会遇到任何问题。

# windows-8 - 单击 Windows8 Metro HTML 5 应用程序中的按钮时如何播放声音？

> ID：11631068
> 
> 赞同：0
> 
> 时间：2012-07-24T12:38:57.010
> 
> 标签：windows-8, microsoft-metro, windows-runtime, html5-audio

我有一个按钮，我想在单击该按钮时播放音频文件。下面是我正在使用的脚本。但它不起作用。Beat.mp3 文件已添加到我当前的项目中。

```
 <audio id="MoreAudio">
             <source src="Beat.mp3"  type="audio/mp3" />
        </audio>
        <input type="button" id="btnMore"  onclick="document.getElementById('MoreAudio').play()" name="More" value="More"> 
```

# android - 在android中编写插件/插件？

> ID：11631071
> 
> 赞同：3
> 
> 时间：2012-07-24T12:39:11.610
> 
> 标签：android, plugins, service, aidl

我想知道如何写一个`plugin application`in `android`。

**要求是：**

**插件应用程序：**它需要像`background service`.

**Plugin Utilizer 应用程序：**如果需要，它需要与应用程序通信`Plugin Application`。以及基于 sent的发送一些`data`到`Plugin Application`接收。`result``data`

我已经用谷歌搜索了这个问题，但我无法得到很多结果。

虽然我得到了**Gabor Paller的一篇非常清晰**[的博客文章](http://mylifewithandroid.blogspot.in/2010/06/plugins.html)。涵盖的细节非常清晰且内容丰富。

 **但我想知道，这是做到这一点的唯一方法还是有其他方法可以遵循？

请建议您是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-05T07:05:17.980

有很多方法可以在 Android 中启用所谓的“插件应用程序”。

你可以看看 Roman Nurik 的[Muzei](https://github.com/romannurik/muzei)和[Dashclock](https://github.com/romannurik/dashclock)项目，它们是很棒的应用程序，允许开发人员编写自己的扩展。**

# unix - 无法让 gnome 在 FreeBSD 上运行

> ID：11631072
> 
> 赞同：1
> 
> 时间：2012-07-24T12:39:14.340
> 
> 标签：unix, freebsd, gnome

我正在寻求帮助，让 gnome 在我站立的 FreeBSD VM 上运行。目前，当我登录时，我会直接进入控制台提示登录而不是 GUI。如果我以 root 身份登录并输入“gdm”，这就是我得到的：

```
** (gdm): WARNING **: Failed to acquire org.gnome.DisplayManager

** (gdm): WARNING **: Could not acquire name; bailing out 
```

我以 root 身份将以下内容添加到 /etc/rc.conf 文件中

```
 gnome_enable=”YES”

    hald_enable=”YES”

    gdm_enable=”YES”

    dbus_enable=”YES” 
```

我还将该行添加`proc /proc procfs rw 0 0`到 /etc/fstab

我究竟做错了什么？顺便说一句，如果我输入 startx，我可以进入带有 xterm 窗口的屏幕，而且我的鼠标似乎在那里工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T14:16:20.850

请尝试安装软件包 xorg 并重试。

pkg 安装 xorg

请参阅指南以相应地配置 Xorg。

[http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/x-config.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/x-config.html)

[http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/x11-wm.html](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/x11-wm.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:19:17.927

您是否尝试过从控制台运行以下命令？

```
echo "/usr/local/bin/gnome-session" > ~/.xinitrc' 
```

接着

```
startx 
```

# matlab - 根据指定的值顺序拆分矩阵

> ID：11631073
> 
> 赞同：1
> 
> 时间：2012-07-24T12:39:16.837
> 
> 标签：matlab, sorting, matrix

抱歉，如果以前有人问过这个问题，但我似乎找不到适用的答案！

我在 Matlab 中有这种矩阵：

```
1  0.2   0.3    1  5
1  0.25  0.36   1  6
1  0.3   0.3   -1  5
2  0.1   0.3    1  5
2  0.3   0.3   -1  5
2  0.6   0.4   -1  9 ...... 
```

该矩阵实际上要长得多，并且在第一列中的值为 346。

如何根据第一列中值的特定顺序将矩阵拆分为更小的矩阵？例如，我需要按顺序排列第一列 = 160、130、256、2 的所有值的矩阵？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:09:10.880

Say M is your MatLab matrix. Then find(M(:,1) == 7) gives you the indices of those rows you are looking for. Also, you may do something like M(M(:,1) == 7,:) to access the corresponding submatrix

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:02:22.490

要做到这一点`grep`：

```
grep -E '^(160|130|256|2)[ \t]' 
```

### 更新

`matlab`你可以使用比较运算符，例如如果是`data`矩阵：

```
 data(data(:, 1) == 1, :) 
```

将返回第一列值为 1 的子矩阵。要将其应用于您的示例，如下所示：

```
subm = [];
for i=[160, 130, 256, 2]
   subm = [subm; data(data(:, 1) == i, :);
end 
```

# asp.net-mvc - 从父级调用子级 EditorTemplates

> ID：11631078
> 
> 赞同：0
> 
> 时间：2012-07-24T12:39:53.677
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, model, editorformodel

假设我有一个简单的模型：

```
public Vehicle {
    public int year;
} 
```

我有另一个模型从那延伸出来：

```
public Car : Vehicle {
    public string make;
} 
```

我有一个用于车辆的 EditorTemplate，可让您设置年份。它存储在 Views/Shared/EditorTemplates 中：

```
@model Vehicle
Year: @Html.EditorFor(m => m.year) 
```

我想为调用车辆的 EditorTemplate 的汽车创建一个 EditorTemplate，但还增加了设置品牌的能力。这个想法是，如果我决定向 Vehicle 添加更多属性，我只需要更改 Vehicle 编辑器模板。我的汽车编辑器模板不必更改。

我会认为这样的事情会起作用：

```
@model Car
@Html.EditorForModel("Vehicle")
Make: @Html.EditorFor(m => m.make) 
```

...但无论出于何种原因，它都没有。我的观点很简单：

```
@model Vehicle
@Html.EditorForModel() 
```

当我传入 Car 模型时，该视图最终会调用我的 Car 模板，这样就可以了。但是唯一出现的是make的编辑器。一年什么都没有。因此，这条线`@Html.EditorForModel("Vehicle")`似乎根本没有做任何事情。它不调用 Vehicle EditorTemplate。

有任何想法吗？这些都是 /Views/Shared/EditorTemplates 中的编辑器模板，我想知道这是否与它有关。我尝试`@Html.EditorForModel("~/Views/Shared/EditorTemplates/Vehicle")`了，并在其上附加了一个 .cshtml，但都没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:27:55.133

至少有一个解决方法。我改变了看法：

```
@model Vehicle
@Html.EditorForModel("Vehicle")
@Html.EditorForModel() 
```

这行得通。它调用 Vehicle EditorTemplate，然后调用 Car EditorTemplate。不理想，因为这意味着我使用 Vehicle/Car 的每个视图都需要这样做。但至少它有效。

但是为什么它不能从另一个 EditorTemplate 中调用一个 EditorTemplate 呢？对我来说，这感觉就像一个错误......

# javascript - 为此的标准 JavaScript

> ID：11631079
> 
> 赞同：0
> 
> 时间：2012-07-24T12:39:59.223
> 
> 标签：javascript, web, client-side

我正在编写一些 15 年前的代码，并且有一条线似乎只在 IE 中实际设置并可用。我无法更改该行，因为实际上它们更多并且在其他 asp 页面中引用，我知道，这是一场噩梦。编码：

```
parent.frmParent.id_item.value = '<%=Request("id_item")%>' //The actual string
                                                           //doesn't matter... 
```

我试过了：

```
var parent.document.getElementById("id_item").Value
var parent.document.getElementById("frmParent")("id_item").Value 
```

我接近了吗？它必须存在于 DOM 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:41:38.293

它应该是小写字母`value`（而不是`Value`）...

```
parent.document.getElementById("id_item").value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:52:42.213

您的帖子已标记为`javascript`，但此代码段绝对是服务器端的：`<%=Request("id_item")%>`。

这将简单地打印出集合中的`id_item`字段`Request`（或者可能调用名为 的方法`Request`）。您应该查看此页面后面运行的服务器端框架并相应地更新您的帖子。如果不了解您使用的语言，我将无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:41:26.147

> 我接近了吗？它必须存在于 DOM 中。

我怀疑你正在寻找`.value`- 即只是小写，例如

```
var val = parent.document.getElementById("id_item").value; 
```

这将是从具有 id 的元素中检索值的方法`id_item`。

但是我怀疑这不是代码应该做的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:48:33.387

我要在这里做一个长镜头：

`<%=Request("id_item")%>``id_item`可能是指.NET Request 对象的键的查询字符串值。尝试使用它：

```
var qs = window.location.search(1);
var items = qs.split('&');
var pair;
var result;

for (var i = 0; i < items.length; i++) {
    pair = items[i].split('=');

    if (pair[0] === 'id_item') { // the QS key
        result = pair[1]; // the QS value
        break;
    }
}

var element = document.getElementById(result); 
```

将查询字符串逻辑放入函数中可能是值得的，例如`getQuerystringValue(querystring, key)`.

附带说明，该属性 is `.value`， not `.Value`， javascript 区分大小写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T13:41:29.277

啊，我现在看到了。您的问题可能是 IE 会自动添加文档中的 id 作为相应窗口对象的属性。在这些情况下，您需要将属性访问替换为`document.getElementById(idName)`.

通过查看您的示例，我的精神力量说这`frmParent`是一个普通的 Javascript 属性（指向另一个 javascript 窗口）带`id_item`是一个元素 ID（祖父母文档中的某些东西）。如果是这种情况，请查看以下是否有效：

```
parent.frmParent.document.getElementById("id_item").value = /*...*/ 
```

# unit-testing - 如何测试容器类？

> ID：11631090
> 
> 赞同：1
> 
> 时间：2012-07-24T12:40:22.067
> 
> 标签：unit-testing, testing

我有一堂课`ListContainer`。该类是一个列表容器并允许 3 个操作：

1.  添加
2.  消除
3.  getNotValid（返回无效元素列表）。

该列表在类中是私有的，因此我无法检查添加是否真正添加元素。你认为我应该如何测试添加功能？

我认为我应该通过 getNotValid 检查它。

```
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
Container::Container() {
}

void Container::add(Element element) {
    pthread_mutex_lock(&mutex);
    list.push_back(element);
    pthread_mutex_unlock(&mutex);
}

void Container::remove(unsigned int elementId) {
    pthread_mutex_lock(&mutex);
    list<Element>::iterator it;
    for (it = list.begin(); it != list.end(); ++it) {
        if (element->id == elementId) { //TODO is it the real check
            list.erase(it);
        }
    }
    pthread_mutex_unlock(&mutex);
}

list<Element> Container::getNotValid() {
    list<Element> result;
    pthread_mutex_lock(&mutex);
    list<Element>::iterator it;
    for (it = list.begin(); it != list.end(); ++it) {
        if (element->isNotValid()) {
            result.push_back(*it);
        }
    }
    pthread_mutex_unlock(&mutex);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:53:14.473

编写一个无法测试的类很容易。在您的情况下，该类没有任何公共 API 来测试它。这意味着除了检查您可以调用这三个方法并且它们不会引发异常之外，您不能编写任何严肃的测试。

另一方面，您不应该仅仅为了使类可测试而添加方法。注意**should not** - 它不是**must not**。如果您认真对待测试，那么拥有足够有用的测试比保持 API 简单更重要。

在你的情况下，添加一个方法是有意义的`size()`——当你添加/删除元素时，列表的大小应该改变。

或者添加一个`toString()`方法。这在调试和编写测试时很有用：

```
ListContainer c = new ListContainer();
c.add("x");
assertEquals("[x]", c.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:55:44.573

类通常通过其公共接口或（使用集成测试）通过测试某个操作将对某些应用程序状态产生的影响进行测试。

如果私有列表只是允许 API 的用户检索无效项目，那么我会说您只需要使用`add`,`remove`和`getNotValid`方法测试列表。

如果以某种方式使用了有效项目（例如写入文件系统或数据库），那么您应该通过集成测试来测试该类，并确保对应用程序状态的预期效果确实正在发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:51:44.030

测试私人的东西从来没有必要。从该列表中添加和删除必须有一些可衡量的效果。测试包含 的类`ListContainer`应该会告诉您 是否`ListContainer`正常工作。

也许您可以添加一些额外的代码以便更容易评论？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:52:25.767

客户如何`add`看到操作`ListContainer`？假设我使用您的课程，添加一个项目..然后呢？在这种状态下如何使用它？我可以观察到任何行为变化吗？状态变化？添加项目的属性更改？我应该能够*观察到一些变化*，这是你在测试时应该关注的。*可观察到的变化*。

[或者，您可以公开`private`单元测试列表（通过更改它们在测试类/程序集方面的可见性）。]

# c# - EF 4.1 Code First - 循环引用问题 (MVC 3)

> ID：11631091
> 
> 赞同：1
> 
> 时间：2012-07-24T12:40:23.023
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4.1, ef-code-first, sql-server-ce

嗨，我想弄清楚如何用我的域模型解决这个问题。我已经做了一个我正在处理的简化示例 - 使用两个父类和两个子类。

我有从父母到孩子的多条路径：

*   父 1 --> 子 1
*   父 1 --> 子 2
*   父 1 --> 父 2 --> 子 1
*   父 2 --> 子 1

这给了我以下错误：{“引用关系将导致不允许的循环引用。[约束名称= Child1_Parent2]”}

我知道这是因为有多个级联路径，但我不知道如何解决这个问题。我可以使用注释来做到这一点还是需要使用流畅的映射？

我希望模型能够像这样运行：

*   如果 Parent1 被删除： Child1 应该被删除， Child2*不*应该被删除。
*   如果 Parent2 被删除： Parent1*和*Child1 应该被删除， Child2*不*应该被删除。
*   如果删除 Child1：仅删除 Child1。
*   如果 Child2 被删除：仅 Child2 被删除。

以下是课程：

**家长1**

```
public class Parent1
{
    [Key]
    public int Id { get; set; }

    [Required]
    public virtual Parent2 Parent2 { get; set; }

    public virtual ICollection<Child1> Children1 { get; set; }
    public virtual ICollection<Child2> Children2 { get; set; }

    public Parent1()
    {
        Children1 = new List<Child1>();
        Children2 = new List<Child2>();
    }
} 
```

**父母2**

```
public class Parent2
{
    [Key]
    public int Id { get; set; }

    public virtual ICollection<Child1> Children1 { get; set; }

    public Parent2()
    {
        Children1 = new List<Child1>();
    }
} 
```

**孩子1**

```
public class Child1
{
    [Key]
    public int Id { get; set; }

    [Required]
    public Parent1 Parent1 { get; set; }
    [Required]
    public Parent2 Parent2 { get; set; }
} 
```

**孩子2**

```
public class Child2
{
    [Key]
    public int Id { get; set; }

    public Parent1 Parent1 { get; set; }
} 
```

# jquery - 在将字符串附加到文档之前解开字符串

> ID：11631097
> 
> 赞同：0
> 
> 时间：2012-07-24T12:40:40.227
> 
> 标签：jquery, ajax, string

我编写了以下代码，将一个新的表行附加到我的`#displayResult`表中，其中包含我`#getInfo`在提交时从表单中收到的数据。

[我被要求在我的 textarea ( jHtmlArea](http://jhtmlarea.codeplex.com/) )中实现 WYSIWYG HTML 编辑器，以便用户可以在他们的评论中添加基本样式。例如，它只是将目标内容包装在`<b/>`或`<i/>`标签中。

在我的表格中，仅显示实际评论的**预览**（限制为 40 个字符），并且我使用 PHP`strip_tags()`来确保在页面刷新时显示的预览中不会出现样式/不需要的标签。

简而言之，我想对我的 AJAX 响应应用相同的处理，所以我基本上是在寻找一种 JS 方式来`strip_tags()`在这种情况下进行模拟。

我的问题是：如何解开评论并在附加**之前**`<b/>`从所有or`<i/>`标记中清除它？关于如何实现这一目标的任何想法？

 **谢谢你的帮助。

```
$('#getInfo').submit(function(e) {
    e.preventDefault();

    var company = $('select#company').val();
    var name = $('input#name').val();
    var comment = $('textarea#comment').val();
    comment = comment.substring(0,40);
    comment = comment + '...'; 

    var dataString = [company, name, comment];
    var n = dataString.length;

    var row = $('<tr class="temp">');       

    $.ajax({
        type: 'POST',
        url: '../process.php',
        data: $('#getInfo').serialize(),
        success: function() {

            for(var i = 0; i < n; i++) {
                row
                    .append($('<td>')
                    .html(dataString[i]))
            }

            $(row).appendTo('#displayResult').hide().fadeIn('slow');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:47:31.520

您可以简单地使用响应创建一个 jQuery 对象，然后按如下方式获取文本：

```
var theString = dataString[i];
var strippedString = $(theString).text(); 
```

这基本上将创建一个新的 jQuery 对象，解析包装响应的任何标签。然后使用该`.text()`方法将只获取文本，忽略那些标签。

// 编辑

针对有关上述行将放置在何处的查询...我建议按如下方式使用它们：

```
for(var i = 0; i < n; i++) {
    var theString = dataString[i];
    var strippedString = $(theString).text();
    row
        .append($('<td>')
        .html(strippedString))
    } 
```

这会修改您已经必须将剥离的文本插入表格的每一行的代码。**

# parsing - 文件无法解析为 Blackberry 类型

> ID：11631098
> 
> 赞同：0
> 
> 时间：2012-07-24T12:40:40.550
> 
> 标签：parsing, blackberry

我正在尝试访问 xml 文件的内容。我使用 docBuilder 来解析存储在 /res 上的文件。

```
 Document xml = docBuilder.parse(new File("test.xml")); 
```

但我收到此错误“文件无法解析为一种类型。” 我试图添加一个外部档案，但我不知道我必须添加哪个 .zip 或 .jar。

# android - getActivity() 从 dialogFragment 返回后返回 null

> ID：11631099
> 
> 赞同：5
> 
> 时间：2012-07-24T12:40:42.997
> 
> 标签：android, android-dialogfragment

我目前在使用 DialogFragment 时遇到了一些问题。

我的应用程序如下所示：

MainActivity 使用 ActionBarSherlock 显示 6 个选项卡（其中都包含一个片段） 在其中一个选项卡上，当用户单击一个按钮时，我会显示一个 DialogFragment。此对话框包含一些 EditText 和一个按钮，用于保存用户输入（邮政地址）并调用 MainActivity 中的侦听器进行计算。

我的问题是，当我打开屏幕并打开对话框时，我设法让他留在屏幕上而不会丢失数据，但是当我调用侦听器然后关闭对话框时，在片段中调用了一个方法来添加新的邮政地址到一个列表，然后映射到 ListView 并在此方法中 getActivity() 返回 null。

我猜该片段尚未附加和/或创建，因为我在 onResume() 中的断点从未中断执行。但是我看不到一种方法来确保在侦听器调用列表更新时创建了我的片段。

如果您有任何可以帮助我的想法，我很乐意提供更多信息，这次谷歌并没有提供太多帮助:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:42:03.433

嘿，我昨天也遇到了同样的问题。查看此线程以获得两个修复：

[DialogFragment 导致空指针崩溃](https://stackoverflow.com/questions/11608080/dialogfragment-causing-nullpointer-crash)

# uitableview - UITableView reloadData - 如何停止闪烁

> ID：11631104
> 
> 赞同：0
> 
> 时间：2012-07-24T12:41:01.433
> 
> 标签：uitableview

我遇到了 UITableView 闪烁的问题。

我有一个*隐藏*的UITableView，我想在它显示给用户之前对其进行刷新。这样做会导致表格视图在再次隐藏之前非常短暂地显示在所有其他子视图之上。

即使是这样的代码也无济于事：

```
self.tableView.hidden = YES;
[self.tableView reloadData];
self.tableView.hidden = YES; 
```

任何人都可以提出解决方案吗？

蒂姆

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-07-24T13:19:58.403

我已经解决了这个问题。

我需要从视图层次结构中删除表视图，重新加载数据，然后将其放回原处！

# sublimetext - Sublimetext2 使用 python 控制台

> ID：11631106
> 
> 赞同：4
> 
> 时间：2012-07-24T12:41:09.520
> 
> 标签：sublimetext, sublimetext2

我尝试在 SublimeText2 编辑器的 python 控制台中编写两行或多行代码，当我在“：”后按 Enter 时出现以下错误

```
 >>> for i in dir():
  File "<string>", line 1
    for i in dir():
                 ^
   SyntaxError: unexpected EOF while parsing 
```

这是一个错误还是我做错了什么？另一个问题是在控制台中使用多行方法的任何方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:15:37.203

Sublime Text 控制台不适合用于编码。它主要用于故障排除和插件输出。尽管您使用 ; 输入了多行，但我强烈建议您不要这样做。Will Bond 这样做是为了安装[Package Control](http://wbond.net/sublime_packages/package_control/installation)，如果您还没有下载，我建议您这样做。如果您正在寻找 Python REPL，请查看 Wuub 的优秀插件[SublimeREPL](https://github.com/wuub/SublimeREPL)，它将为您提供类似终端/控制台的快速 Python 输入体验。

# php - CakePHP Session 组件错误

> ID：11631115
> 
> 赞同：0
> 
> 时间：2012-07-24T12:41:27.717
> 
> 标签：php, cakephp, cakephp-2.0, fatal-error

在我的 CakePHP 应用程序中，当我使用另一个控制器的类时，我得到 Session read function 错误。

`example.com/app/getList`运作良好
`example.com/seconds/parseList`运作良好
但`example.com/first/index`给出了这个错误：

```
Fatal error: Call to a member function read() on a non-object in
/example.com/app/Controller/AppController.php on line 468 
```

第 468 行是这样的：`$list=$this->Session->read('myList');`

我怎样才能解决这个问题 ？

```
class FirstController extends AppController {
    public function index () {
        $Seconds = new SecondsController();
        $Seconds->parseList();
    }
}

class SecondsController extends AppController {
    public $helpers = array('Html', 'Session');

    public function parseList () {
        $output = $this->getList();
        return output;
    }
}

class AppController extends Controller {
    public $uses = array('App', 'Mydata');
    var $components    = array('Session');
    public $helpers = array('Session','Html','Cache');

    public function getList () {
        $list=$this->Session->read('myList');
        return $list;
    }
} 
```

编辑：我应该提到`example.com/app/getList`效果很好。当我独立运行此操作时，它不会给出会话错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:46:57.630

您必须`constructClasses()`在手动创建控制器实例后调用该方法：

```
$Seconds = new SecondsController();
$Seconds->constructClasses(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:54:18.887

你把`var $components = array('Session');`你的AppController放进去了吗？

# android - 修改安卓固件

> ID：11631119
> 
> 赞同：-2
> 
> 时间：2012-07-24T12:41:39.513
> 
> 标签：android, operating-system, rom

我想制作一个应用程序或更类似于 android 的调整我想编写一些可以在 android 设备上运行的代码，并将根据来自蓝牙设备的输入执行窗帘操作，此应用程序需要始终在后台运行（好像它是设备操作系统的一部分）并且每秒都在获取输入我需要它能够调出我要设计的自定义键盘并设置一个课程，就像在可以控制的桌面中一样应用程序。

我读到了一种叫做 ROM 的东西，但我不知道那是不是我要找的东西。

我也知道安卓操作系统可以修改或替换为另一种操作系统，如 cyanogen 操作系统。

我是一个初学者，我有一些java背景

我尝试创建一个 android 应用程序，但我不知道如何让这个东西在操作系统上运行

我需要有人给我一个非常详细的解释，因为我对这些东西一无所知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:57:57.237

听起来您正在尝试制作一个需要蓝牙输入的应用程序...

听起来您不需要编辑操作系统本身...

您需要设置 Android SDK 才能开始开发... [http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html) 1\. 下载 SDK 2\. 安装 Eclipse 插件 3\. 编写代码，然后运行它在模拟器或您连接的设备上（确保在设置->应用程序->开发人员下启用调试）

这里有一些关于开始使用蓝牙的信息... [http://developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

既然你希望它一直运行，我也会研究 Android 服务...... [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

在您下载 SDK 并设置您的 IDE 和模拟器（或手机）后，您可能还想查看包含在 SDK 中的示例项目... [http://developer.android.com/tools/samples/索引.html](http://developer.android.com/tools/samples/index.html)

希望这有助于清除一些东西......

# android - 如何放大android中的音频频率或降低背景噪音

> ID：11631120
> 
> 赞同：2
> 
> 时间：2012-07-24T12:41:40.100
> 
> 标签：android, frequency, noise-reduction

这是我的代码

```
Thread Rthread = null;
AudioRecord record = null;
int freq = 8000;
AudioManager am;
AudioTrack play;
int minbuff=20000;
AudioRecord m_record;
AudioTrack m_track;
byte[] buffer = new byte[freq];

protected void Start() {
    Rthread = new Thread(new Runnable() {
        public void run() {
            loopback();
        }
    });
    Rthread.start();
}

protected void loopback() {
    android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
    minbuff = AudioRecord.getMinBufferSize(freq,
    AudioFormat.CHANNEL_CONFIGURATION_MONO,
    AudioFormat.ENCODING_PCM_16BIT);
    if (minbuff &lt;= freq) {
        minbuff = freq;
    }
    am.setParameters("noise_suppression=on");
    m_record = new AudioRecord(MediaRecorder.AudioSource.MIC, freq,
    AudioFormat.CHANNEL_CONFIGURATION_MONO,
    MediaRecorder.AudioEncoder.AMR_NB, minbuff);
    m_track = new AudioTrack(AudioManager.ROUTE_HEADSET, freq,
    AudioFormat.CHANNEL_CONFIGURATION_MONO,
    MediaRecorder.AudioEncoder.AMR_NB, minbuff,
    AudioTrack.MODE_STREAM);
    m_track.setPlaybackRate(freq);
    byte[] buffer = new byte[minbuff];
    m_record.startRecording();
    Log.i(LOG_TAG, "Audio Recording started");
    m_track.play();
    Log.i(LOG_TAG, "Audio Playing started");
    while (true) {
        try {
            m_record.read(buffer, 0, minbuff);
            for (int i = 1; i &lt; buffer.length; i++) {
                buffer[i] *=amp;
            }
            m_track.write(buffer, 0, buffer.length);
            } catch (Throwable t) {
            Log.e("Error", "Read write failed");
            t.printStackTrace();
        }
    }
} 
```

所以请告诉我如何减少背景噪音并放大录制音频的频率。

# liferay - Liferay 6.1 速度动态数据列表

> ID：11631122
> 
> 赞同：2
> 
> 时间：2012-07-24T12:41:44.173
> 
> 标签：liferay, liferay-6, liferay-theme, liferay-velocity, dynamic-data-list

我为 DDL 构建了一些自定义视图。对于文本类型字段，我将遍历记录并显示如下：

```
$record.getField("field_name").getValue() 
```

这不适用于日期字段。我想我应该使用 getRenderedValue(themeDisplay) 方法而不是 getValue()

我可以通过 request.get("theme-display") 在速度标记中访问 themeDisplay，但是如果我将它设置为变量并作为参数传递给 getRenderedValue 方法，我将没有结果

这是正确的方法吗？在速度标记中获取主题显示的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T00:17:53.707

我认为当您遍历记录时它应该起作用。我想，在迭代之前你已经完成了

```
$serviceLocator.findService("com.liferay.portlet.dynamicdatalists.service.DDLRecordLocalService"))
#set ($recordSetId = $getterUtil.getLong($reserved_record_set_id.data))
#set ($records = ${ddlRecordsUtil.getRecords($recordSetId)}) 
```

第一次检查：你能打印记录吗？如果否，您能否检查一下您是否已在您的 portal-ext.properties 文件中添加了此属性？

```
journal.template.velocity.restricted.variables= 
```

默认情况下，它将是

```
journal.template.velocity.restricted.variables=serviceLocator 
```

您需要删除 serviceLocator 然后尝试吗？

高温高压

# java - 按几个日期字段对类进行排序

> ID：11631124
> 
> 赞同：0
> 
> 时间：2012-07-24T12:41:49.097
> 
> 标签：java, date, sorting

我有一个类“条目”，它有几个日期字段：

1.  创建日期（始终可用）
2.  manualSetDate（不总是）
3.  会议日期（不总是）

现在我想按第一个 meetingDate 对条目进行排序（将会议的所有条目放在一起），然后或者如果在一个条目中不可用，则按 manualSetDate，如果他们有相同的会议，或者如果一个条目没有 manualSetDate 也按创建日期。

困难在于许多条目没有会议或手动设置日期。所以我已经迭代了所有（我希望如此）可能的组合，比如：

```
Date relevant1; //at the end i compare both relevant dates
Date relevant2;
if e1.creationdate != null && e2.creationdate == null) 
  {relevant2 = e2.creationdate}...
if e1.creationdate == null && e2.creationdate != null) 
  {relevant2 = e2.creationdate}...
... 
```

这导致高复杂度

**排序：**

1.  会议日期（如果两者都有）
2.  ManualSetDate（如果两者都有）
3.  创建日期

我遍历了所有组合，但似乎会出错......

有没有更好的方法来进行排序？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:24:05.293

我想我会在我的条目中创建一个找到“相关”日期的函数。然后让您的 compareTo 使用该新功能。这样，您就不会像上面的代码那样考虑所有可能的组合。

```
public class Entry implements Comparable<Entry>
{

   private Date getAvailableDate() 
   {
     if (meetingDate != null)
        return meetingDate;
     else if (manualSetDate != null)
        return manualSetDate;
     else
        return creationDate;
   }

   public int compareTo(Entry other)
   {
      return this.getAvailableDate().compareTo(other.getAvailableDate());
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:10:15.910

最好编写自己的方法`Comparator`并实现`compare`类似下面的代码

```
class MyComparator implements Comparator<DateEntry>{

@Override
public int compare(DateEntry o1, DateEntry o2) {

    int i = o1.creationDate.compareTo(o2.creationDate);
    if (i != 0) return i;

    if(o1.manualSetDate!=null&&o2.manualSetDate!=null)
    i = o1.manualSetDate.compareTo(o2.manualSetDate);
    if (i != 0) return i;

    if(o1.meetingDate!=null&&o2.meetingDate!=null)
        i = o1.meetingDate.compareTo(o2.meetingDate);
        if (i != 0) return i;

        return i;
}

} 
```

然后对它们进行排序。

```
Collections.sort(list,new MyComparator ()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:15:22.263

我建议您使用[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)定义顺序，然后使用一些库函数来进行实际排序。我也会在比较方法中寻求多个早期回报。实现类似于以下内容：

```
public class Entry {
    ...
    public Date getMeetingDate() { return meetingDate;}
    public Date getManualSetDate() { return manualSetDate; }
    public Date getCreationDate() { return creationDate; }
}

public class EntryComparator implements Comparator<Entry> {

    @Override
    public int compare(Entry o1, Entry o2) {
        if (o1.getMeetingDate() != null && o2.getMeetingDate() != null) {
           int compared = o1.getMeetingDate().compareTo(o2.getMeetingDate());
           if (compared != 0) {
               return compared;
           }
        }
        if (o1.getManualSetDate() != null && o2.getManualSetDate() != null) {
            int compared = o1.getManualSetDate().compareTo(o2.getManualSetDate());
            if (compared != 0) {
                return compared;
            }
        }
        return o1.getCreationDate().compareTo(o2.getCreationDate());
    }
}

//and actual sorting:
List<Entry> entries ...
Collections.sort( entries, new EntryComparator() ); 
```

# java - 如何使用 FileUpload 的 GWT 错误读取 txt 文件

> ID：11631127
> 
> 赞同：0
> 
> 时间：2012-07-24T12:41:58.817
> 
> 标签：java, google-app-engine, gwt, jakarta-ee, file-upload

我希望该客户在他的计算机上搜索一个 txt 文件，然后将其导入。这是一个包含此站点首选项的文件。我已经用 FileUpload 完成了，但我有一个错误：

```
javax.servlet.ServletException: Content-Type was 'multipart/form-data; boundary=---------------------------14895149261880284533914609527'. Expected 'text/x-gwt-rpc'. 
```

我到处搜索，什么都没有……还有其他方法可以导入吗？或者我做错了什么。这是我的代码：

```
final DialogBox dialogBox = new DialogBox();
    dialogBox.setAnimationEnabled(true);
    dialogBox.setVisible(true);
    dialogBox.center();
    dialogBox.setText("Load settings file");    

    final FormPanel form = new FormPanel();
    form.setEncoding(FormPanel.ENCODING_MULTIPART);
    form.setMethod(FormPanel.METHOD_POST);
    form.addStyleName("loadSettingsfile");
    form.setWidth("275px");
    form.setAction(GWT.getModuleBaseURL()+"fileUpload");

    VerticalPanel holder = new VerticalPanel();

    final FileUpload upload = new FileUpload();
    upload.setName("upload");
    holder.add(upload);
    holder.add(new HTML("<hr />"));

    holder.setHorizontalAlignment(HasAlignment.ALIGN_RIGHT);

    HorizontalPanel hrPan = new HorizontalPanel();

    Button submitButton = new Button("Load settings");
    Button cancelButton = new Button("Cancel");

    hrPan.add(cancelButton);
    hrPan.add(submitButton);
    holder.add(hrPan);

    form.add(holder);

    submitButton.addClickHandler(new ClickHandler() {

        public void onClick(ClickEvent event) {
            form.submit();
        }
    });

    cancelButton.addClickHandler(new ClickHandler() {

        public void onClick(ClickEvent event) {
            dialogBox.hide();   
        }
    });

    form.addSubmitCompleteHandler(new SubmitCompleteHandler() {

        public void onSubmitComplete(SubmitCompleteEvent event) {

                //Window.alert(event.getResults());

                dialogBox.hide();   
        }
    });

    form.addSubmitHandler(new SubmitHandler() {

        public void onSubmit(SubmitEvent event) {

        }
    });

    dialogBox.setWidget(form); 
```

和小服务程序：

```
public class FileUpload extends HttpServlet {

public void doPost(HttpServletRequest request, HttpServletResponse response)  throws ServletException, IOException {
    ServletFileUpload upload = new ServletFileUpload();
    response.setContentType("text/x-gwt-rpc");

    response.addHeader("Path", request.getPathInfo());
    try{
        FileItemIterator iter = upload.getItemIterator(request);

        while (iter.hasNext()) {
            FileItemStream item = iter.next();

            String name = item.getFieldName();
            InputStream stream = item.openStream();

            // Process the input stream
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            int len;
            byte[] buffer = new byte[8192];
            while ((len = stream.read(buffer, 0, buffer.length)) != -1) {
                out.write(buffer, 0, len);
            }

            int maxFileSize = 10*(1024*1024); //10 megs max 
            if (out.size() > maxFileSize) { 
                throw new RuntimeException("File is > than " + maxFileSize);
            }
        }
    }
    catch(Exception e){
        throw new RuntimeException(e);
    }

} 
```

# mysql - 如何在 MySQL 中导出特定列数据

> ID：11631128
> 
> 赞同：7
> 
> 时间：2012-07-24T12:42:00.563
> 
> 标签：mysql

我有一张桌子。我只需要导出 1 列的所有行。我怎样才能做到这一点？我知道如何导出整个表，但还没有找到导出单列数据的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T13:36:52.957

此查询应该有效（使用 SELECT INTO OUTFILE 'file_name'）-

```
SELECT `column` FROM `table` INTO OUTFILE 'file_name' 
```

参考[这个](http://dev.mysql.com/doc/refman/5.5/en/select.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T13:00:05.770

您可以使用[SQLyog](http://www.webyog.com/en/downloads.php)、PHPMyAdmin 等 MySQL GUI 工具轻松完成此操作。在[SQLyog](http://www.webyog.com/en/downloads.php)中，您只需要选择表，单击“导出为...”图标，您将获得对话框以选择要导出的列。然后点击“导出按钮”。导出完成...

这是显示以 XML 格式导出“城市”列的屏幕截图。

希望能帮助到你...

![SQLyog 导出为屏幕截图](../Images/8414208e7e2504ed53a99c9437611bf5.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T12:50:31.057

这是用于 mysql phpmyadmin

```
 select column_name from table_name 
```

现在将显示结果集。您可以看到`Query results operations Print view` 页面底部的选项卡，选择导出并下载您想要的类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T12:57:22.153

mysql 数据库 -e '选择字段，表中的字段' | 较少的

或放入文件中。

在Unix上它正在工作。

祝一切顺利

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-14T12:33:59.647

试试这个..每个结果数据将在每一行中逐个单元格

SELECT cu.*, cy.name as country_name, st.name as state_name FROM `table_name`cu, all_countries cy, all_states st where cu.country = cy.id and cu.state = st.id INTO OUTFILE 'file_info3.csv' FIELDS TERMINATED BY ',' 可选地由 '"' 包围 由 '\t\n' 终止的行

输出文件将位于“C:\wamp\bin\mysql\mysql5.6.17\data\db_name\”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-07T07:05:02.953

对于工作台，您可以这样做（我使用的是 MySQL Workbench 6.3 版）：

右键单击表格，然后单击“表格数据导出向导”，您可以选择要导出的列：

[![在此处输入图像描述](../Images/ce4986f34be65186f1205afffe7a0a8c.png)](https://i.stack.imgur.com/RVZ2L.png)

[![在此处输入图像描述](../Images/deddea74def031bfa90261a66c88d8ca.png)](https://i.stack.imgur.com/08AgZ.png)

它导出为 csv 或 json。

您可以以类似的方式将其导入回来。（右击表格，点击“表格数据导入向导”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-23T12:14:35.773

[https://www.sitepoint.com/community/t/using-mysqldump-to-export-individual-fields/4743](https://www.sitepoint.com/community/t/using-mysqldump-to-export-individual-fields/4743)的解决方案对我有用

```
mysql -u USERNAME --password=PASSWORD --database=DATABASE --execute='SELECT FIELD, FIELD FROM TABLE LIMIT 0, 10000 ’ -X > file.xml 
```

我尝试使用以下查询从 kubernet pod 导出数据，它对我有用

```
kubectl exec  podName -n namespaceName  -- mysql --host=hostName --user=userName --password=password dbName --execute=“SELECT FIELD, FIELD FROM TABLE LIMIT 0, 10000”&gt; a5.sql 
```

# c# - 刷新后 Cookie 不保留

> ID：11631131
> 
> 赞同：1
> 
> 时间：2012-07-24T12:42:06.483
> 
> 标签：c#, asp.net-mvc-3, expired-cookies

我正在使用 c# 和 mvc。我正在尝试将 cookie 写入用户浏览器。但刷新浏览器后，cookie 消失了。

这是我编写 cookie 的代码：

```
 movieCookie = new HttpCookie(cookieName);
 movieCookie.Value = "test;
 movieCookie.Expires = DateTime.Now.AddDays(30);
 //add the cookie 
 HttpContext.Current.Response.Cookies.Add(movieCookie); 
```

和一个用于读取 cookie 的：

```
//check if such cookie exist
HttpCookie movieCookie = null;
if (HttpContext.Current.Request.Cookies.AllKeys.Contains(cookieName))
    movieCookie = HttpContext.Current.Request.Cookies[cookieName]; 
```

要补充的另一件事是，当我像这样搜索“AllKeys”时：

```
HttpContext.Current.Request.Cookies.AllKeys 
```

由于某种原因，它显示了一个空字符串数组。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:45:49.430

一些可能很愚蠢的问题

*   检查您的网络服务器时间和日期，它们是否设置正确，如果它们（在您的情况下）超过 2 年，它将立即过期 cookie。

*   检查 cookieName 是否相同

*   检查在将 cookie 设置为响应之后，您在设置 cookie 之前没有重定向。要设置 cookie，您需要设置标题并将它们推出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:34:43.010

我解决了。似乎在MVC中创建cookie后的“返回视图”导致cookie不被保存。

# java - 在 Windows 上的 squid 代理后面运行的 Java servlet 应用程序

> ID：11631132
> 
> 赞同：0
> 
> 时间：2012-07-24T12:42:12.590
> 
> 标签：java, servlets, proxy, jvm

我在一个需要身份验证的 squid HTTP 代理后面，并希望向外部服务器发出 API 请求。但是，当我这样做时，我收到以下错误：

原因：java.io.IOException：无法通过代理隧道。代理返回“需要 HTTP/1.0 407 代理身份验证”

我尝试通过转到控制面板> Java > 网络设置来设置代理配置，但无济于事。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:49:19.417

您应该在 java 中设置代理设置。

```
System.getProperties().put("http.proxyHost", "someProxyURL");
System.getProperties().put("http.proxyPort", "someProxyPort");
System.getProperties().put("http.proxyUser", "someUserName");
System.getProperties().put("http.proxyPassword", "somePassword"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:17:50.377

[从http://www.it.iitb.ac.in/~roshan/articles/javahttpproxy.html](http://www.it.iitb.ac.in/~roshan/articles/javahttpproxy.html)复制：

Tomcat 设置：catalina.properties

将这些属性附加到 Tomcat 中的 catalina.properties 文件： ${CATALINA_OME}/conf/catalina.properties 文件：

http.proxyHost=yourProxyURL http.proxyPort=yourProxyPort http.proxyUser=yourUserName http.proxyPassword=yourPassword Tomcat 设置：catalina.bat

在 ${CATALINA_HOME}/bin/catalina.bat（对于 Windows）或 ${CATALINA_HOME}/bin/catalina.bat（对于 *nix）中添加上面定义的所有参数： JAVA_OPTS="-Dhttp.proxyHost=yourProxyURL .. ." （每个选项用空格分隔。）

# ajax - 在struts中使用什么数据选择器

> ID：11631133
> 
> 赞同：0
> 
> 时间：2012-07-24T12:42:13.503
> 
> 标签：ajax, struts2

我正在使用 Struts 2 - 我的项目中的 Ajax 标签我添加`struts2-dojo-plugin-2.1.8.1.jar`到我的项目的 lib 文件夹中，并且`<%@ taglib prefix="sx" uri="/struts-dojo-tags"%>`也被添加，`<sx:head />`被添加到标题中，`<sx:datetimepicker name="deliverydate" label="Delivery Date" displayFormat="dd/MM/yyyy" />` 也被添加到页面的 body 标签内，但我收到错误为 java.lang.ClassNotFoundException ：com.opensymphony.xwork2.util.logging.LoggerFactory，任何人都可以帮助我，这是我的错误日志..

```
'java.lang.ClassNotFoundException: com.opensymphony.xwork2.util.logging.LoggerFactory
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
at org.apache.struts2.dojo.components.DateTimePicker.<clinit>(DateTimePicker.java:184)
at org.apache.struts2.dojo.views.jsp.ui.DateTimePickerTag.getBean(DateTimePickerTag.java:59)
at org.apache.struts2.views.jsp.ComponentTagSupport.doStartTag(ComponentTagSupport.java:49)
at org.apache.jsp.login_jsp._jspx_meth_sx_005fdatetimepicker_005f0(login_jsp.java:277)
at org.apache.jsp.login_jsp._jspx_meth_s_005fform_005f0(login_jsp.java:196)
at org.apache.jsp.login_jsp._jspService(login_jsp.java:117)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:416)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:39:13.463

我认为您的项目没有`xwork-core-xxx.jar`文件。添加`xwork-core-xxx.jar`到您的`lib`目录。`xxx`是jar的版本号。这将解决您的问题。

# javascript - kendoGrid 添加命令和本地数据

> ID：11631134
> 
> 赞同：1
> 
> 时间：2012-07-24T12:42:16.420
> 
> 标签：javascript, kendo-ui

考虑到这个[小提琴。](http://jsfiddle.net/sT94F/3/)

单击“添加”按钮时，出现引用错误，“colA 未定义”。

有没有办法在添加行时传递一个“空”对象？

我正在使用 v2012.1.327

注意：我已经在 kendoui 论坛上打开了相同的[主题](http://www.kendoui.com/forums/ui/grid/add-command-with-local-data.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:02:18.033

好吧，经过一段时间的猜测，我终于从部分的[文档](http://docs.kendoui.com/api/framework/datasource#configuration)中得到了它`schema.model`

结果[在这里](http://jsfiddle.net/sT94F/6/)。

# jquery - 如何根据花式框内容高度（大叠加或滚动页面）修复叠加背景高度。

> ID：11631135
> 
> 赞同：0
> 
> 时间：2012-07-24T12:42:16.887
> 
> 标签：jquery, html, css, fancybox, fancybox-2

请任何人告诉我如何根据fancybox内容高度修复覆盖背景高度（overlayOpacity部分）（意味着fancybox的顶部和底部没有额外的空间），我正在使用fancybox 2（最新版本）

代码：

```
jQuery.fancybox({                           
   'scrolling': 'no',
   'hideOnContentClick': true,
   'autoSize'    : true,
   'fitToView'  : false,
   'height' : '100%',
   'hideOnOverlayClick' : true,
   'content' : jQuery('.EngpopupContent'),
   'overlayShow' : true,
   'overlayOpacity' : 0.9,
   'overlayColor' : '#000',
   'transitionIn' : 'elastic',
   'transitionOut' : 'elastic',
   'changeFade' : 'fast',
   'easingIn' : 'swing',
   'easingOut' : 'swing',
   'showCloseButton' : true,
   //'showNavArrows' : true,
   'enableEscapeButton' : true,
   'onStart': function(){
       jQuery("#fancybox-overlay").css({"position":"fixed"});
   }
}); 
```

参考[链接](http://www.carid.com/ace-wheels/concept-5-silver-480984.html)

我需要像上面的参考网址一样使用fancybox...请点击“请选择产品选项”按钮

请任何人帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:18:31.603

如果我理解正确，您需要从呈现的内容中删除边距和填充。您可以通过在配置中添加另外两个选项来做到这一点

```
jQuery.fancybox({ 
//other options
'padding': 0,
'margin' : 0,
//other options 
```

欲了解更多信息，请访问[http://fancybox.net/api](http://fancybox.net/api)

后期编辑：

现在我想我明白了。如果您使用带有关闭按钮的默认布局，请尝试将其添加到您的 CSS 文件中：

```
#fancybox-outer { background: transparent;}
#fancybox-close {top: 25px !important;}
#fancybox-wrap {top: -45px  !important;} 
```

这将从顶部删除白色背景并将包装器定位在更靠近顶部的位置（如果您不想看到白色边边框，则需要将填充和边距设置为 0）

# firefox - 扩展的自动更新不起作用

> ID：11631137
> 
> 赞同：0
> 
> 时间：2012-07-24T12:42:22.700
> 
> 标签：firefox, firefox-addon, distribution, automatic-updates

我为自动更新服务编写了一个 update.rdf。

在添加概述中，可以右键单击“搜索新更新”，Firefox 会在我的测试网站空间中找到新版本，下载并“安装”它。但重启后我有和以前一样的版本，它没有改变 xpi 文件。这是一些图片和代码片段。也许你有个主意。

[http://s12.postimage.org/f68kptdy3/script_error1.png](http://s12.postimage.org/f68kptdy3/script_error1.png)

[http://s12.postimage.org/57nm3c4ij/script_error2.png](http://s12.postimage.org/57nm3c4ij/script_error2.png)

重新启动后，我再次获得了 0.2.3 版本，没有任何变化。

install.rdf 版本 0.2.3

代码：全选

```
 <Description about="urn:mozilla:install-manifest">

      <em:id>megxbar@megx.net</em:id>
      <em:type>2</em:type>
      <em:name>MegxBar</em:name>
      <em:version>0.2.3</em:version>
       .
       .
       .
      <em:updateURL>http://home.arcor.de/eniac2000/update.rdf</em:updateURL>           <em:updateKey>MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDO65zOLKafZWtmX/cvs9ELMT1VkCQ8GlZNbRMku0su8VxDr+k4eGFYUupHWy2Ll+rfXJ43k+nYQvYHZRoU94DtiCCk4GEpfGytQPCCHOl30aV9elJH+cmeSKZiejPvMptZfp9GXTcLWgVycPVwS59J/LFJ2St2QQSv2hgWV1dKlwIDAQAB</em:updateKey>
      <em:targetApplication>
         <Description>
            <em:id>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</em:id> <!-- Firefox -->
            <em:minVersion>1.5</em:minVersion>
            <em:maxVersion>15.0</em:maxVersion>
         </Description>
      </em:targetApplication>   
   </Description>
</RDF> 
```

update.rdf 带签名（在服务器上）

```
<?xml version="1.0"?>
<RDF:RDF xmlns:em="http://www.mozilla.org/2004/em-rdf#"
         xmlns:NC="http://home.netscape.com/NC-rdf#"
         xmlns:RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <RDF:Description RDF:about="rdf:#$ZpuSg3"
                   em:id="{ec8030f7-c20a-464f-9b0e-13a3a9e97384}"
                   em:minVersion="1.5"
                   em:maxVersion="15.0"
                   em:updateLink="http://home.arcor.de/eniac2000/MegxBar_0.3.3.xpi"
                   em:updateHash="sha1:02226eedd92e895379881ec919ce07c7f73ff9a9" />
  <RDF:Seq RDF:about="rdf:#$VpuSg3">
    <RDF:li RDF:resource="rdf:#$WpuSg3"/>
  </RDF:Seq>
  <RDF:Description RDF:about="rdf:#$WpuSg3"
                   em:version="0.3.3">
    <em:targetApplication RDF:resource="rdf:#$ZpuSg3"/>
  </RDF:Description>
  <RDF:Description RDF:about="urn:mozilla:extension:megxbar@megx.net"
                   em:signature="MIGTMA0GCSqGSIb3DQEBDQUAA4GBAFOK3mZUdai/KCVRtHNvTYPV7Hu3+3b9ymfkGM3u08m0O7Ltl1tc0guYtZ74i+qUYC8T+66pgK/LeXnwzAHFUBcEfXFZGfwH8ZG8SR/lyZaUzSsAM9CPoYv1YIM/PjLfHtIEJdzROW1HG31YlsP3nouT5wSyEhvJiNQvAUwP37Aj">
    <em:updates RDF:resource="rdf:#$VpuSg3"/>
  </RDF:Description>
</RDF:RDF> 
```

服务器上0.3.3版本的xpi中的install.rdf

```
<?xml version="1.0" encoding="UTF-8"?>
<RDF xmlns="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:em="http://www.mozilla.org/2004/em-rdf#">

   <Description about="urn:mozilla:install-manifest">

      <em:id>megxbar@megx.net</em:id>
      <em:type>2</em:type>
      <em:name>MegxBar</em:name>
      <em:version>0.3.3</em:version>
         .
         .
         .
      <em:updateURL>http://home.arcor.de/eniac2000/update.rdf</em:updateURL>
      <em:updateKey>MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDO65zOLKafZWtmX/cvs9ELMT1VkCQ8GlZNbRMku0su8VxDr+k4eGFYUupHWy2Ll+rfXJ43k+nYQvYHZRoU94DtiCCk4GEpfGytQPCCHOl30aV9elJH+cmeSKZiejPvMptZfp9GXTcLWgVycPVwS59J/LFJ2St2QQSv2hgWV1dKlwIDAQAB</em:updateKey>
      <em:targetApplication>
         <Description>
            <em:id>{ec8030f7-c20a-464f-9b0e-13a3a9e97384}</em:id> <!-- Firefox -->
            <em:minVersion>1.5</em:minVersion>
            <em:maxVersion>15.0</em:maxVersion>
         </Description>
      </em:targetApplication>   
   </Description> 
</RDF> 
```

我使用 MCCOY 创建了签名，并使用 Windows 的备用哈希生成器创建了哈希值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:21:33.203

如果我`MegxBar_0.3.3.xpi`从您的服务器下载并查看`install.rdf`里面的文件，我会看到：

```
<em:version>0.2.3</em:version> 
```

因此 Firefox 会正确更新您的扩展程序并安装新版本。唯一的问题是服务器上的“新”版本是旧版本，尽管有文件名。

# matlab - 找到离散化步骤

> ID：11631139
> 
> 赞同：0
> 
> 时间：2012-07-24T12:42:24.260
> 
> 标签：matlab, math

我有数据文件 F_j，每个文件都包含一个小数位数未知的数字列表。每个文件都包含一些连续变量的离散化测量，我想找到文件 F_j 的离散化步骤 d_j

我可以想出的解决方案：对于每个 F_j，

*   找到小数位数 (n_j)；
*   将 F_j 中的每个数字乘以 10^{n_j} 以获得整数；
*   找到整个列表的最大公约数。

我正在寻找一种用 Matlab 找到 n_j 的优雅方法。

此外，找到一长串整数的 gcd 似乎很难——你有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:18:18.130

找到一长串数字的 gcd 并不*难*。您可以在列表大小的时间内线性地做到这一点。如果你幸运的话，你可以在时间上比线性少得多。本质上这是因为：

```
gcd(a,b,c) = gcd(gcd(a,b),c) 
```

并且`a=1`无论其他数字的大小`b=1`如何`gcd(a,b)=1`。

所以如果你有一个数字列表，`xs`你可以做

```
g = xs(1);

for i = 2:length(xs)
  g = gcd(x(i),g);
  if g == 1
    break
  end
end 
```

该变量`g`现在将存储列表的 gcd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:20:29.937

这是一些示例代码，我相信一旦您获得想要查看的数字，它们将帮助您获得 GCD。

```
A = [15 30 20];
A_min = min(A);
GCD = 1;
for n = A_min:-1:1
    temp = A / n;
    if (max(mod(temp,1))==0)
        % yay GCD found
        GCD = n;
        break;
    end
end 
```

这里的基本概念是默认的 GCD 将始终为 1，因为每个数字都可以被自己整除`1`，当然 =)。GCD 也不能大于列表中的最小数字，因此我从最小数字开始，然后减 1。这是假设您此时已经将数字转换为整数形式。小数会扔掉这个！

通过使用 1 的模数，您正在测试该数字是否为整数，如果不是，您将留下大于 0 的小数余数。如果您预计必须处理负数，则必须进行调整这个测试！

除此之外，当您第一次找到列表的模数（mod 1）全为零时，您就找到了 GCD。

享受！

# php - 在 jqgrid JS 上使用 jqgrid PHP 的安全优势？

> ID：11631140
> 
> 赞同：2
> 
> 时间：2012-07-24T12:42:35.587
> 
> 标签：php, javascript, jquery, security, jqgrid

在过去，我使用过 jqgrid，就像[这里](http://trirand.com/blog/jqgrid/jqgrid.html)的示例一样。在这组网格中，您必须使用 Javascript 进行网格定义，并且我为服务器端回调提供 PHP 脚本。最近又在研究jqgrid，对[PHP版](http://www.trirand.net/demophp.aspx)很感兴趣。

为了提高我的网络应用程序的安全性，我想问一下使用 PHP over JS jqgrid 是否有安全优势（或劣势）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T17:29:16.560

不是我知道的。正如 fbfcn 所说，PHP jqGrid 基本上只是 JavaScript jqGrid 的服务器端包装器，以使其更易于使用。相同的底层 JavaScript 代码仍将在客户端上执行。如果您检查 PHP 示例中包含的 JavaScript 文件和生成的代码，您可以自己验证这一点。

底线是您可以使用任何一种技术构建安全的 Web 应用程序。在这两种情况下，您都需要防范相同的威胁；确保网格的 Web 请求不能用于暴露未经授权的私有数据，确保网格中显示的数据在网格内正确转义以防止 XSS 攻击等。

# mysql - 子查询中的限制

> ID：11631145
> 
> 赞同：1
> 
> 时间：2012-07-24T12:43:02.340
> 
> 标签：mysql, subquery, limit

当我在子查询中使用没有 LIMIT 的以下查询时

```
SELECT   `c`.*, 
         GROUP_CONCAT(g.photo SEPARATOR "|") AS `photos_list` 
  FROM   `contests` AS `c` 
              LEFT JOIN 
                  (
                      SELECT   `gallery`.`contest_id`, 
                               `gallery`.`photo` 
                        FROM   `gallery`
                   ) AS `g` ON c.id = g.contest_id 
GROUP BY `c`.`id` 
```

一切正常

```
id   title    photos_list 

1    title1   50026c35632eb.jpg
2    title2   50026ac53567f.jpg|50026ac5ec82e.jpg|500e71557270f.... 
```

当我添加 LIMIT 时，我只在一行中得到“photos_list”。以下查询

```
SELECT   `c`.*, 
         GROUP_CONCAT(g.photo SEPARATOR "|") AS `photos_list` 
  FROM   `contests` AS `c` 
              LEFT JOIN 
                  (
                      SELECT   `gallery`.`contest_id`, 
                               `gallery`.`photo` 
                        FROM   `gallery`
                       LIMIT    0, 2
                   ) AS `g` ON c.id = g.contest_id 
GROUP BY `c`.`id` 
```

将返回

```
id  title   photos_list 

1   title1  NULL
2   title2  50026ac46ea05.jpg|50026ac53567f.jpg 
```

*id = 1*的项目必须包含`photos_list`，但事实并非如此。值得注意的是**LIMIT**确实适用于*id = 2*的项目。

我应该怎么做才能得到正确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:33:25.970

```
SELECT   `c`.*, 
     GROUP_CONCAT(g.photo SEPARATOR "|") AS `photos_list` 
FROM   `contests` AS `c` 
          LEFT JOIN 
              (
                  SELECT   `gallery`.`contest_id`, 
                           `gallery`.`photo` 
                    FROM   `gallery`
               ) AS `g` ON c.id = g.contest_id 
GROUP BY `c`.`id` 
```

将 GROUP_CONCAT 更改为：

```
SUBSTRING_INDEX(GROUP_CONCAT(g.photo SEPARATOR "|"),'|',2) AS `photos_list` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T16:03:04.930

`photo_date > gsub.photo_date`您可以使用时间戳（例如 AND ）或更复杂的标准来做类似的事情。唯一需要注意的是，如果有几行都符合条件（例如，几张照片具有相同的时间戳），则它们都将被包括在内。这就是我选择 的原因`photo_id`，这可能是独一无二的。

将其插入到您的原始查询中，如下所示：

```
SELECT c.id, c.title,
       GROUP_CONCAT(g.photo SEPARATOR "|") AS photos_list
FROM   contests AS c
  LEFT JOIN (
    //put query from above here
  ) AS g 
ON c.id = g.contest_id  GROUP BY c.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T13:04:28.220

这也有效。但是，如果没有围绕它包装另一个 SELECT 子句，如果没有比赛的照片，比赛将不会出现。

```
SELECT c.*, GROUP_CONCAT(g.photo SEPARATOR "|") AS photo_list
FROM 
  contests c 
LEFT JOIN
  (SELECT *, @num:= if(@contest = contest_id, @num + 1,1) as row_num,
             @contest := contest_id as c_id
   FROM gallery
   ORDER BY contest_id) AS g
ON c.id = g.contest_id
WHERE g.row_num <= 2
GROUP BY c.id, c.title 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T13:59:56.257

 ~~~~```
SELECT c.*, ((
  SELECT GROUP_CONCAT(temp.photo SEPARATOR "|")
  FROM (SELECT photo FROM gallery g WHERE c.id = g.contest_id LIMIT 2) temp
)) AS photo_list
FROM contests c 
```~~  ~~抱歉回答不正确。我并不是说以下解决方案是最佳解决方案，但至少它有效。顺便说一句，在这个新解决方案中，我假设您`gallery`的表有一个名为`id`.

```
SELECT c.*, GROUP_CONCAT(g.photo SEPARATOR "|") AS photos_list
FROM contests AS c
LEFT JOIN (
    SELECT
        g_0.*
    FROM (
        SELECT
            g_1.*
            , ((SELECT COUNT(*) FROM gallery g_2 WHERE g_2.contest_id = g_1.contest_id AND g_2.id <= g_1.id)) AS i
        FROM gallery g_1
    ) g_0
    WHERE
        g_0.i <= 2
) g ON (c.id = g.contest_id)
GROUP BY c.id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T12:02:46.590

您如何决定应返回特定比赛的可能照片集中的哪 2 张？它是一个随机的东西吗？还是最近的 2 张照片，或 2 张评分最高的照片，或其他一些标准？一旦您可以设置选择照片的条件，剩下的就很简单了。此查询将为您提供每个竞赛 ID 具有最高 photo_id 的 2 张照片：

```
 SELECT contest_id, photo, photo_id
       FROM gallery gsub
       WHERE (
         SELECT COUNT(*) FROM gallery 
           WHERE contest_id=gsub.contest_id //for each category
           AND photo_id > gsub.photo_id 
       ) < 2 //if number of photo_ids > than this photo_id < 2, keep this photo
       ORDER BY contest_id 
```

`AND photo_date > gsub.photo_date`您可以使用时间戳（例如）或更复杂的标准来做类似的事情。唯一需要注意的是，如果有几行都符合条件（例如，几张照片具有相同的时间戳），则它们都将被包括在内。这就是我选择 photo_id 的原因，它可能是独一无二的。

将其插入到您的原始查询中，如下所示：

```
SELECT c.id, c.title,
           GROUP_CONCAT(g.photo SEPARATOR "|") AS photos_list
    FROM   contests AS c
      LEFT JOIN (
        //put query from above here
      ) AS g 
    ON c.id = g.contest_id  GROUP BY c.id 
```~~~~

# excel - 在 Excel 电子表格中移动数据，我需要使用 VBA 吗？如果是这样，我将如何去做？

> ID：11631156
> 
> 赞同：0
> 
> 时间：2012-07-24T12:44:04.453
> 
> 标签：excel, vba, spreadsheet

听起来很陈词滥调，长期读者，第一次海报。我目前正在帮助一位家庭成员完成一些工作，他必须整理数千条记录并稍微更改格式，显然如果没有某种自动化，这将需要数十个小时，他问我是否可以帮助快速完成. 起初我以为我可以，但我对这些东西有点不知所措。

基本上，他有这种格式的数据：

```
样品编号
1 银 20
1 金 50
1 铜 80
2 AG 1
2金30
3 铜 30

```

但是我们需要这样的数据：

```
样品编号 Ag Au Cu
1 20 50 80
2 1 30 -
3 - - 30

```

起初我以为我可以用一个公式来水平移动数据。唯一的问题是丢失的数据最好用'-'填充，但在原始数据中，它们只是完全被遗漏了，所以我假设我需要 VBA。

抱歉，如果我遗漏了任何内容，但是使用 VBA 指向正确方向的任何指针都会非常方便。

谢谢

编辑：固定格式并切换了两个数字，对不起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:59:06.423

您可以为此使用[数据透视表](http://office.microsoft.com/en-us/excel-help/pivottable-reports-101-HA001034632.aspx)。

假设您的数据当前位于单个列中，您可以执行以下操作：

1.  数据菜单 > 文本到列，按空格分割
2.  使用您的三个新列，在 A1 中插入一行
3.  给你的三列标题，例如样本、元素和大小
4.  突出显示整个范围，然后选择数据菜单 > 数据透视表和数据透视图报告...
5.  选择“Microsoft Office Excel 列表或数据库”，然后按“下一步”
6.  如果您想要新工作表中的数据，请选择“新建工作表”
7.  从这里，将 Sample 元素放入表格的左侧，将 Element 元素放入表格的顶部，将 Size 元素放入表格的中间。

您的缺失数据不会有破折号，但这应该可以满足您的需求。

# android - 按通知后应用程序不退出

> ID：11631159
> 
> 赞同：1
> 
> 时间：2012-07-24T12:44:21.530
> 
> 标签：android

我使用如下代码开始通知。如果我从带有按钮的应用程序启动通知，它将启动，但如果我在同一个应用程序上按下“退出”按钮，它将清除通知并退出。

但是，如果我在通知启动后关闭应用程序，使用 PendingIntent 再次使用通知启动应用程序。应用程序的“退出”按钮将清除通知，但不会退出应用程序，除非再次按下它。

无论应用程序如何打开，我如何开发它以清除通知并退出。

任何人都可以帮忙，这段代码有什么问题？

```
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.bStat:
        Intent intent = new Intent(this, NotifyActivity.class);
        PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
        String body = "This is a Test..";
        String title = "XxxXxx Xxxxx..";
        Notification n = new Notification(R.drawable.ttsn, body,
                System.currentTimeMillis());
        n.setLatestEventInfo(this, title, body, pi);
        n.defaults = 0;
        // Notification.DEFAULT_ALL
        nm.notify(uniqueID, n);
        break;

    case R.id.bExit:
        nm.cancel(uniqueID);
        finish();
        break;
    }

} 
```

# c++ - 强制链接未使用的共享库

> ID：11631161
> 
> 赞同：19
> 
> 时间：2012-07-24T12:44:28.720
> 
> 标签：c++, linux, gcc

从 gcc 4.5 移动到 gcc 4.6，现在它不会链接到编译时未使用的库（即，如果没有从它们导入符号）。

然而，这些库的目的是它们执行静态构造函数，从而使它们在运行时对应用程序可用（注册它们的符号）。

有没有办法强制 gcc 链接到通过 -l 列出的所有库？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-24T12:55:06.330

看起来您需要`-Wl,--no-as-needed`完全禁用它。或者，`--no-as-needed -lfoo --as-needed`仅针对`libfoo`.

来源：[https ://lists.ubuntu.com/archives/ubuntu-devel/2010-November/031991.html](https://lists.ubuntu.com/archives/ubuntu-devel/2010-November/031991.html)

# django - Django 无法加载应用程序

> ID：11631163
> 
> 赞同：0
> 
> 时间：2012-07-24T12:44:37.123
> 
> 标签：django, django-apps

我正在使用 django **1.4**`django-admin`，`settings.py`在使用 .`INSTALLED_APPS``manage.py runserver`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:45:29.380

确保你有两件事：

*   正确的路径。你应该可以做 ./manage.py shell 然后导入 'myapp' 如果不试试 'myproject.myapp'
*   models.py 在您的应用程序文件夹中和`__init__.py`**

# android - Android：重新排序列表，如媒体播放器中的播放列表

> ID：11631167
> 
> 赞同：1
> 
> 时间：2012-07-24T12:44:50.010
> 
> 标签：android

我需要像在媒体播放器中那样实现 ListView 行的重新排序。我找到了很多解决方案，但大多数都很难实施，而且已经有 2 年历史了。是否有任何新的想法和示例如何实施？

PS：我应该支持 API 10

# c# - .NET 正则表达式使用反向引用替换

> ID：11631171
> 
> 赞同：4
> 
> 时间：2012-07-24T12:45:14.407
> 
> 标签：c#, regex

我有一个相当长的字符串，其中包含具有以下格式的子字符串：

```
project[1]/someword[1]
project[1]/someotherword[1] 
```

字符串中将有大约 10 个这种模式的实例。

我想要做的是能够用不同的替换方括号中的第二个整数。所以字符串看起来像这样：

```
project[1]/someword[2]
project[1]/someotherword[2] 
```

我认为正则表达式是我需要的。我想出了正则表达式：

```
project\[1\]/.*\[([0-9])\] 
```

哪个应该捕获组 [0-9] 以便我可以用其他东西替换它。我正在查看 MSDN Regex.Replace() 但我没有看到如何用您选择的值替换捕获的字符串的一部分。任何有关如何实现此目的的建议将不胜感激。非常感谢。

**编辑：**在与@Tharwen 合作后，我改变了一些方法。这是我正在使用的新代码：

```
 String yourString = String yourString = @"<element w:xpath=""/project[1]/someword[1]""/> <anothernode></anothernode> <another element w:xpath=""/project[1]/someotherword[1]""/>";
 int yourNumber = 2;
 string anotherString = string.Empty;
 anotherString = Regex.Replace(yourString, @"(?<=project\[1\]/.*\[)\d(?=\]"")", yourNumber.ToString()); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-24T13:11:56.430

使用 $1, $2 语法替换匹配的组，如下所示：-

```
csharp> Regex.Replace("Meaning of life is 42", @"([^\d]*)(\d+)", "$1($2)");
"Meaning of life is (42)" 
```

如果您不熟悉 .NET 中的正则表达式，我推荐[http://www.ultrapico.com/Expresso.htm](http://www.ultrapico.com/Expresso.htm)

[http://www.regular-expressions.info/dotnet.html](http://www.regular-expressions.info/dotnet.html)也有一些好东西供快速参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:18:42.457

我已经调整你的使用后向和前瞻来匹配一个数字，它前面是 'project[1]/xxxxx[' 然后是 ']'：

```
(?<=project\[1\]/.*\[)\d(?=\]") 
```

然后，您可以使用：

```
String yourString = "project[1]/someword[1]";
int yourNumber = 2;
yourString = Regex.Replace(yourString, @"(?<=project\[1\]/.*\[)\d(?=\]"")", yourNumber.ToString()); 
```

我想你可能很困惑，因为 Regex.Replace 有很多重载，它们做的事情略有不同。我用过[这个](http://msdn.microsoft.com/en-us/library/e7f5w83z)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:04:40.820

如果您想在替换之前处理捕获组的值，您必须分离字符串的不同部分，进行修改并将它们重新组合在一起。

```
string test = "project[1]/someword[1]\nproject[1]/someotherword[1]\n";

string result = string.Empty;
foreach (Match match in Regex.Matches(test, @"(project\[1\]/.*\[)([0-9])(\]\n)"))
{
    result += match.Groups[1].Value;
    result += (int.Parse(match.Groups[2].Value) + 1).ToString();
    result += match.Groups[3].Value;
} 
```

如果您只想逐字替换文本，则更简单：`Regex.Replace(test, @"abc(.*)cba", @"cba$1abc")`.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-24T12:48:58.263

例如，您可以使用 String.Replace (String, String)

```
String.Replace ("someword[1]", "someword[2]") 
```

# silverlight - Silverlight WebClient.DownloadStringAsync() 仅适用于浏览器

> ID：11631172
> 
> 赞同：1
> 
> 时间：2012-07-24T12:45:24.873
> 
> 标签：silverlight, get, webclient, silverlight-5.0

我的 Silverlight 5 应用程序使用 WebClient 上传和下载 json 内容。POST 请求工作正常，但 GET 请求仅在浏览器外上下文中工作。

这是我的服务器的 clientaccesspolicy.xml

```
<access-policy>
    <cross-domain-access>
        <policy>
            <allow-from http-request-headers="*" http-methods="*">
                <domain uri="*"/>
            </allow-from>
            <grant-to>
                <resource include-subpaths="true" path="/"/>
            </grant-to>
        </policy>
    </cross-domain-access>
</access-policy> 
```

有谁知道如何使 GET 请求在浏览器上下文中工作？

谢谢！

# jquery - Ruby on Rails：日期选择器不保存格式

> ID：11631173
> 
> 赞同：0
> 
> 时间：2012-07-24T12:45:27.550
> 
> 标签：jquery, ruby-on-rails, ruby, datepicker, format

我有一个表格，可以在数据库中创建一个新条目。其中一个字段使用 jquery Datepicker。目前，我可以使用 UI 日历选择一个日期，它会以正确的格式显示在文本框中，但是当我提交表单时，格式会更改回默认设置，并保存在数据库中。我以前在我的网站的旧版本上做过这个工作，我尝试了以下已经发布的问题，但没有运气。希望有人能看到问题。谢谢。

这是我的项目控制器的一部分：

```
def create

    @project = Project.new(params[:project])

    @project.client = params[:new_client] unless params[:new_client].blank?
    @project.exception_pm = params[:new_exception_pm] unless params[:new_exception_pm].blank?
    @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?
    @project.role = params[:new_role] unless params[:new_role].blank?
    @project.industry = params[:new_industry] unless params[:new_industry].blank?
    @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

这是我的表单视图的一部分：

```
<%= form_for(@project) do |f| %>

  <% if @project.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>

      <ul>
      <% @project.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

   <div class="field">
    <%= f.label :start_date %><br />
    <%= f.text_field :start_date, :class => 'datepicker' %>
  </div>

<div class="field">
    <%= f.label :end_date %><br />
    <%= f.text_field :end_date, :class => 'datepicker' %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

这是我的 application.js 文件：

```
$(function() {
  $("#project_start_date").datepicker({dateFormat: 'dd-mm-yy'});
});

$(function() {
  $("#project_end_date").datepicker({dateFormat: 'dd-mm-yy'});
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T21:19:11.467

您可以通过在 config/initializers 中创建 date_formats.rb 并添加以下行来快速设置日期的通用默认格式，而不是使用 strftime：

```
Date::DATE_FORMATS[:default] = "%m-%d-%Y" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:18:32.567

这可能与日期的保存无关，而是与日期的显示有关。日期在数据库中存储为日期，而不是字符串，因此当您查看日期时，它会显示为 rails 转换类型后的默认输出格式。

在您看来，您需要使用`strftime`或可能使用[I18N 例程对其进行格式化](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T12:04:41.510

jQuery 默认给我 mm/dd/yyyy。所以在我的控制器中，我使用解析参数

```
to_date = DateTime.strptime(params["to_date"],'%m/%d/%Y').strftime("%Y-%m-%d")
from_date = DateTime.strptime(params["from_date"], '%m/%d/%Y').strftime("%Y-%m-%d") 
```

这在格式化方面效果很好。所有日期格式化 API 都可以在[ruby​​-doc](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html)获得。

# closedxml - 复制工作表丢失页眉和页脚

> ID：11631176
> 
> 赞同：0
> 
> 时间：2012-07-24T12:45:57.580
> 
> 标签：closedxml

我的 Web 应用程序使用 ClosedXML 处理 Excel 文件。

我正在尝试使用带有页眉和页脚的 Excel 模板复制工作表，但结果它们没有出现。仅显示数据和单元格。我使用这种方法来复制我的工作表。

```
IXLWorksheet sheet_new = sheet_old.CopyTo("Sheet_new"); 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:28:20.290

这已在提交 76008 中修复。从[源代码](http://closedxml.codeplex.com/SourceControl/list/changesets)中选择一个或等待下一个版本。

# android - Android：bindService 总是返回 false（扩展 APK api）

> ID：11631178
> 
> 赞同：3
> 
> 时间：2012-07-24T12:46:23.083
> 
> 标签：android, android-service, android-service-binding, apk-expansion-files

我正在尝试使用 Google 的 APK 扩展扩展来下载我托管的扩展文件。我还使用 SampleDownloadActivity 中的代码来执行此操作，尽管稍作修改以适合我的应用程序。

我的问题是永远不会启动下载。在我实现 IDownloadClient 的类中，调用了 onStart()，但没有调用 onServiceConnected()。

我在 DownloaderClientMarshaller 中将其追溯到这一行：

```
if( c.bindService(bindIntent, mConnection, Context.BIND_DEBUG_UNBIND) ) { 
```

这总是返回 false，因此服务未绑定。

我在 TabHost 中使用调用活动，这给其他人带来了问题。他们说您不能将 TabHost 上下文传递给连接函数，而不能将 Application 上下文传递给连接函数。我通过以下方式改变了这一点：

```
mDownloaderClientStub.connect(getApplicationContext()); 
```

代替：

```
mDownloaderClientStub.connect(this); 
```

但这无济于事，我仍然是假的。如果这有所作为，我正在模拟器上进行所有测试。

我真的把头发拉出来了。如果有人有任何想法，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-28T14:08:54.797

在大多数情况下，如果服务未在应用程序的清单文件中声明，则`bindService()`方法返回。`false`

就我而言，问题是我给该`DownloaderClientMarshaller.CreateStub()`方法提供了错误的类对象。我不小心使用`DownloaderService.class`了`MyDownloaderService.class`.

使用下载器 API 时，请确保传递正确的扩展 base 的类对象`DownloaderService`。

[我建议使用Better APK 扩展](https://github.com/bolein/better-apk-expansion)包中包含的更新的下载器库。它修复了这个问题和其他问题，还提供了简化的 API，最大限度地减少了自己的脚射门机会。

要接收下载进度，您只需扩展`BroadcastDownloaderClient`.

```
public class SampleDownloaderActivity extends AppCompatActivity {
    private final DownloaderClient mClient = new DownloaderClient(this);

    // ...

    @Override 
    protected void onStart() {
        super.onStart();
        mClient.register(this);
    }

    @Override 
    protected void onStop() {
        mClient.unregister(this);
        super.onStop();
    }

    // ...

    class DownloaderClient extends BroadcastDownloaderClient {

        @Override 
        public void onDownloadStateChanged(int newState) {
            if (newState == STATE_COMPLETED) {
                // downloaded successfully...
            } else if (newState >= 15) {
                // failed
                int message = Helpers.getDownloaderStringResourceIDFromState(newState);
                Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
            } 
        }

        @Override 
        public void onDownloadProgress(DownloadProgressInfo progress) {
            if (progress.mOverallTotal > 0) {
                // receive the download progress
                // you can then display the progress in your activity
                String progress = Helpers.getDownloadProgressPercent(
                        progress.mOverallProgress, progress.mOverallTotal);
                Log.i("SampleDownloaderActivity", "downloading progress: " + progress);
            }
        }
    }

} 
```

检查图书馆[页面](https://github.com/bolein/better-apk-expansion)上的完整文档。

# mysql - MySQL GROUP BY，子字符串不循环

> ID：11631182
> 
> 赞同：1
> 
> 时间：2012-07-24T12:46:39.077
> 
> 标签：mysql, group-by, substring

我正在尝试按子字符串分组。我只得到一个结果：

```
Region = Coastal, Value (R) = 1144900. 
```

我应该得到2个结果。

这是我的代码：

```
SELECT
  DISTINCT SUBSTRING_INDEX(`team_name`, '-', 1) AS 'Region', 
  SUM(`opportunities`.`value`) AS 'Value (R)'
FROM 
  `opportunities` 
  LEFT JOIN cf_type_link_data ON cf_type_link_data.sourceid = opportunities.id
  LEFT JOIN cf_lu_type_fields ON cf_type_link_data.fieldid = cf_lu_type_fields.id
  LEFT JOIN cf_lu_types_fields_dropdown ON cf_type_link_data.`value` = cf_lu_types_fields_dropdown.id AND cf_lu_type_fields.id = cf_lu_types_fields_dropdown.fieldid
  LEFT JOIN `lu_teams` ON `lu_teams`.`contactid` = `opportunities`.`user_allocation`
  LEFT JOIN `teams` ON `teams`.`id` = `lu_teams`.`teamid`
  LEFT JOIN `lu_opportunity_status` ON `lu_opportunity_status`.`id` = `opportunities`.`status`
WHERE 1 
  AND `cf_lu_types_fields_dropdown`.`values` = 'Building Project'
  AND cf_lu_type_fields.fieldname = 'Scaffolding Segment'
  AND (`opportunities`.`expecteddate` >= '2012-01-01' AND `opportunities`.`expecteddate` <= '2012-07-24')
GROUP BY 'Region' 
ORDER BY cf_lu_types_fields_dropdown.`values`; 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:51:24.867

您不能在 select in`GROUP BY`子句中使用相同的别名

尝试

```
SELECT DISTINCT SUBSTRING_INDEX(team_name, '-', 1) AS 'Region', 
       SUM(opportunities.value) AS 'Value (R)'....

GROUP BY SUBSTRING_INDEX(team_name, '-', 1)
ORDER BY cf_lu_types_fields_dropdown.values; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:52:04.543

尽量不要使用引号作为字段标识符 -

“地区”-> 地区

在您的情况下，您在结果数据集中只看到一条记录，因为您按字符串“区域”分组，但您应该按值分组。

# jfreechart - JFreeChart - 标记堆叠条形组件之间的边界

> ID：11631184
> 
> 赞同：0
> 
> 时间：2012-07-24T12:46:41.820
> 
> 标签：jfreechart

我正在使用 jfreechart 堆叠条，而不是颜色，我只想用黑线标记组件之间的边界。那可能吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:48:32.620

假设你有两个系列，设置`DrawBarOutline`为 true 然后设置`SeriesOutlinePaint`

```
StackedXYBarRenderer renderer = new StackedXYBarRenderer(0.10);
renderer.setDrawBarOutline(true);
renderer.setSeriesOutlinePaint(0, Color.BLACK);
renderer.setSeriesOutlinePaint(1, Color.BLACK); 
```

# c++ - 通过迭代自适应阈值和形状分析检测圆形对象的集群

> ID：11631188
> 
> 赞同：16
> 
> 时间：2012-07-24T12:47:20.170
> 
> 标签：c++, algorithm, image-processing, opencv, openmp

我一直在开发一个应用程序来计算圆形物体，例如图片中的细菌菌落。

使事情变得容易的是对象通常与背景完全不同的事实。

然而，很少有困难使分析变得棘手：

1.  背景将呈现逐渐以及快速的强度变化。
2.  在容器的边缘，对象将是椭圆形而不是圆形。
3.  物体的边缘有时相当模糊。
4.  对象将聚集。
5.  对象可以非常小（直径 6px）
6.  最终，算法将由对图像分析没有深入了解的人使用（通过 GUI），因此参数必须直观且很少。

该问题已在科学文献中多次解决并“解决”，例如，使用循环霍夫变换或分水岭方法，但我从未对结果感到满意。

所描述的一种简单方法是通过自适应阈值处理来获得前景，并使用距离变换分割（如我在[这篇文章](https://stackoverflow.com/questions/10313602/reshaping-noisy-coin-into-a-circle-form/10324759#10324759)中所描述的）聚类对象。

我已经成功地实施了这种方法，但它不能总是处理强度的突然变化。此外，同行要求我提出一种更“新颖”的方法。

**因此，我一直在寻找一种提取前景的新方法。**

因此，我研究了其他阈值/斑点检测方法。我尝试了 MSER，但发现在我的情况下它们不是很健壮而且很慢。

我最终提出了一个算法，到目前为止，它给了我很好的结果：

1.  我拆分图像的三个通道并减少它们的噪声（模糊/中值模糊）。对于每个频道：
2.  我通过计算原始通道和卷积（通过大内核模糊）通道之间的绝对差来应用自适应阈值的第一步的手动实现。然后，对于阈值的所有相关值：
3.  我对 2) 的结果应用阈值
4.  寻找轮廓
5.  在授予其形状（大小、面积、凸度...）时验证或使轮廓无效
6.  然后只有有效的连续区域（*即*由轮廓分隔）在累加器中重绘（每个通道 1 个累加器）。
7.  在累积超过阈值的连续区域后，我最终得到了一张“区域分数”的地图。具有最高强度的区域是最常满足形态过滤标准的区域。
8.  然后将三个地图（每个通道一个）转换为灰度并进行阈值处理（阈值由用户控制）

只是为了向您展示我必须使用的图像类型： ![在此处输入图像描述](../Images/c191510dd51f06a7bf4f711240df4c6b.png) 这张图片代表顶部 3 个示例图像的一部分，以及底部各个部分的算法结果（蓝色 = 前景）。

这是我的 C++ 实现：3-7

```
/*
 * cv::Mat dst[3] is the result of the absolute difference between original and convolved channel.
 * MCF(std::vector<cv::Point>, int, int) is a filter function that returns an positive int only if the input contour is valid.
 */

/* Allocate 3 matrices (1 per channel)*/
cv::Mat accu[3];

/* We define the maximal threshold to be tried as half of the absolute maximal value in each channel*/
int maxBGR[3];
for(unsigned int i=0; i<3;i++){
    double min, max;
    cv::minMaxLoc(dst[i],&min,&max);
    maxBGR[i] = max/2;
    /* In addition, we fill accumulators by zeros*/
    accu[i]=cv::Mat(compos[0].rows,compos[0].cols,CV_8U,cv::Scalar(0));
}
/* This loops are intended to be multithreaded using
#pragma omp parallel for collapse(2) schedule(dynamic)
For each channel */
for(unsigned int i=0; i<3;i++){
    /* For each value of threshold (m_step can be > 1 in order to save time)*/
    for(int j=0;j<maxBGR[i] ;j += m_step ){
            /* Temporary matrix*/
            cv::Mat tmp;
            std::vector<std::vector<cv::Point> > contours;
            /* Thresholds dst by j*/
            cv::threshold(dst[i],tmp, j, 255, cv::THRESH_BINARY);
            /* Finds continous regions*/
            cv::findContours(tmp, contours, CV_RETR_LIST, CV_CHAIN_APPROX_TC89_L1);
            if(contours.size() > 0){
                /* Tests each contours*/
                for(unsigned int k=0;k<contours.size();k++){
                    int valid = MCF(contours[k],m_minRad,m_maxRad);
                    if(valid>0){
                        /* I found that redrawing was very much faster if the given contour was copied in a smaller container.
                         * I do not really understand why though. For instance,
                         cv::drawContours(miniTmp,contours,k,cv::Scalar(1),-1,8,cv::noArray(), INT_MAX, cv::Point(-rect.x,-rect.y));
                         is slower especially if contours is very long.
                         */
                        std::vector<std::vector<cv::Point> > tpv(1);
                        std::copy(contours.begin()+k, contours.begin()+k+1, tpv.begin());
                        /* We make a Roi here*/
                        cv::Rect rect = cv::boundingRect(tpv[0]);
                        cv::Mat miniTmp(rect.height,rect.width,CV_8U,cv::Scalar(0));
                        cv::drawContours(miniTmp,tpv,0,cv::Scalar(1),-1,8,cv::noArray(), INT_MAX, cv::Point(-rect.x,-rect.y));
                        accu[i](rect)    = miniTmp + accu[i](rect);
                    }
                }
            }
        }
    }
/* Make the global scoreMap*/
cv::merge(accu,3,scoreMap);
/* Conditional noise removal*/
if(m_minRad>2)
    cv::medianBlur(scoreMap,scoreMap,3);
cvtColor(scoreMap,scoreMap,CV_BGR2GRAY); 
```

我有两个问题：

1.  这种前景提取方法的名称是什么，您是否认为在这种情况下使用它可能不合适？

2.  由于递归查找和绘制轮廓非常密集，我想让我的算法更快。你能告诉我实现这个目标的任何方法吗？

非常感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:37:53.743

几年前，我写了一个在显微镜图像中检测细胞的应用程序。代码是用 Matlab 编写的，我认为现在比它应该的要复杂得多（这是我的第一个 CV 项目），所以我只会概述对你有帮助的技巧。顺便说一句，它非常缓慢，但它非常擅长分离大量双胞胎。

我定义了一个度量来评估给定点是单元格中心的机会： - 亮度在它周围的圆形图案中降低 - 纹理亮度的变化遵循给定的图案 - 一个单元格不会覆盖超过 %相邻单元格的

有了它，我开始迭代地找到最好的单元格，将其标记为已找到，然后寻找下一个。因为这样的搜索很昂贵，所以我使用遗传算法在我的特征空间中更快地搜索。

一些结果如下：

![细胞 2](../Images/a15aec5af03dcaf91e0d3e8e53c898e2.png) ![细胞](../Images/9d53117971466aee97a2d21b4c72070d.png)

# cakephp - 下拉列表缺少一些值

> ID：11631189
> 
> 赞同：0
> 
> 时间：2012-07-24T12:47:23.843
> 
> 标签：cakephp, select, concat, form-fields

我有一个运行良好的选择输入字段，但有些用户不在此列表中，尽管数据库看起来不错并且我没有条件。我将选项文本与 $virtualFields 看起来像`$virtualFields = array( 'full_name_withTitle' => 'CONCAT(lastname, " ", firstname, " (", title, ")")'`

尽管我有括号中的标题，但当没有值时，没有值的空行至少应该有“（）”。

该字段如下所示：

![选择缺少行的输入字段](../Images/6f05d59cb617e16636ec133cbaa12e42.png)

任何提示

```
endo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:53:24.917

您应该在定义 virtualFields 时使用以下代码：

```
$virtualFields = array( 'full_name_withTitle' => 'CONCAT(IF(lastname IS NULL '', lastname), " ", IF(firstname IS NULL, '', firstname), " (", IF(title IS NULL, '', title), ")")' 
```

[这个链接](http://forums.mysql.com/read.php?100,94227,94227)会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:50:56.990

> 尽管我有括号中的标题，但当没有值时，没有值的空行至少应该有“（）”

否。如果一个参数为 null，则 CONCAT 返回 null。

[连接文档](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)：

> 如果任何参数为 NULL，则 CONCAT() 返回 NULL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T17:21:10.677

另一种可能性是你有字符编码问题，也许你的数据库字段有非 UTF8 编码的字符串，但 PHP/CakePHP 需要 UTF8。具体来说（或它包装`htmlspecialchars()`的 Cake's ），如果发现无效字符，[它将默默地输出一个空字符串。](http://www.php.net/manual/en/function.htmlspecialchars.php)`h()`

修复此类问题有时会很棘手，因为字符编码不可见。如果整个数据库很小且非 UTF8，有时最简单的方法是将数据库转储为 SQL，使用编辑器或命令行工具进行转换，然后重新导入数据库。一些快速搜索发现了一些关于该主题的[可能](https://stackoverflow.com/questions/2986510/converting-latin-mysql-data-to-utf8) [有用](http://nicj.net/mysql-converting-an-incorrect-latin1-column-to-utf8/)的帖子。

# cuda - 为什么 Cuda 运行时在初始化时会保留 80 GiB 虚拟内存？

> ID：11631191
> 
> 赞同：12
> 
> 时间：2012-07-24T12:47:29.010
> 
> 标签：cuda

我正在分析我的 Cuda 4 程序，结果发现在某个阶段运行进程使用了​​超过 80 GiB 的虚拟内存。这比我预期的要多得多。在检查了内存映射随时间的演变并比较了它正在执行的代码行之后，结果发现在这些简单的指令之后，虚拟内存使用量上升到超过 80 GiB：

```
 int deviceCount;
  cudaGetDeviceCount(&deviceCount);
  if (deviceCount == 0) {
    perror("No devices supporting CUDA");
  } 
```

显然，这是第一次 Cuda 调用，因此运行时已初始化。在此之后，内存映射看起来像（截断）：

```
Address           Kbytes     RSS   Dirty Mode   Mapping
0000000000400000   89796   14716       0 r-x--  prg
0000000005db1000      12      12       8 rw---  prg
0000000005db4000      80      76      76 rw---    [ anon ]
0000000007343000   39192   37492   37492 rw---    [ anon ]
0000000200000000    4608       0       0 -----    [ anon ]
0000000200480000    1536    1536    1536 rw---    [ anon ]
0000000200600000 83879936       0       0 -----    [ anon ] 
```

现在有了这个巨大的内存区域映射到虚拟内存空间。

好吧，这可能不是一个大问题，因为在 Linux 中保留/分配内存并没有多大作用，除非您实际写入该内存。但这真的很烦人，因为例如 MPI 作业必须指定作业可用的最大 vmem 数量。而 80GiB 对于 Cuda 工作来说只是一个较低的界限——还必须添加所有其他东西。

我可以想象它与 Cuda 维护的所谓暂存空间有关。一种可以动态增长和收缩的内核代码内存池。但那是猜测。它也分配在设备内存中。

有什么见解吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T13:27:27.437

与暂存空间无关，它是寻址系统的结果，它允许主机和多个 GPU 之间的统一寻址和对等访问。CUDA 驱动程序使用内核的虚拟内存系统在单个虚拟地址空间中注册所有 GPU 内存 + 主机内存。它本身实际上并不是内存消耗，它只是将所有可用地址空间映射到线性虚拟空间以进行统一寻址的“技巧”。

# python - 无法从 django 的设置文件中获取设置

> ID：11631194
> 
> 赞同：13
> 
> 时间：2012-07-24T12:47:32.700
> 
> 标签：python, django, settings

我`gi`在`settings.py`文件中有一个设置。我创建了一个单独的 python 文件（即我没有在视图中使用它）并使用 import 语句：

```
from django.conf import settings 
```

但是当我尝试访问时`settings.gi`，它会说`'Settings' object has no attribute 'gi'`。少了什么东西？：秒

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-24T12:51:27.890

从 Django 文档中[创建您自己的设置](https://docs.djangoproject.com/en/dev/topics/settings/#creating-your-own-settings)状态：

> 设置名称全部大写。

尝试将设置重命名为`GI`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:03:54.413

必须在 PYTHONPATH 上添加项目，并且必须定义 DJANGO_SETTINGS_MODULE。请参考下面提到的命令。

```
export PYTHONPATH=PATH_OF_PROJECT
export DJANGO_SETTINGS_MODULE=settings 
```

# regex - Perl 正则表达式奇怪的行为

> ID：11631197
> 
> 赞同：1
> 
> 时间：2012-07-24T12:47:53.253
> 
> 标签：regex, perl

方法一：

```
$C_HOME = "$ENV{EO_HOME}\\common\\";
print $C_HOME; 
```

给出 C:\work\System11R1\common\

即环境变量正在扩展。

方法二：

解析具有 C_HOME = $ENV{EO_HOME}\common\ 的属性文件

```
while(<IN>) {
    if(m/(.*)\s+=\s+(.*)/)
    {
        $o{$1}=$2;
    }
}

$C_HOME = $o{"C_HOME"};
print $C_HOME; 
```

这给出了 $ENV{EO_HOME}\common\ 的输出

即环境变量没有得到扩展。

如何确保环境变量在第二种情况下也得到扩展。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T12:58:40.357

问题在于：

```
 $o{$1}=$2; 
```

当然 perl`$2`在读取时不会自动评估。

如果需要，您可以手动评估它：

```
 $o{$1}=eval($2); 
```

但是从安全的角度来看，您必须确保它是可以的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T12:59:59.733

的值`$o{C_HOME}`包含文字字符串`$ENV{C_HOME}\common\`。要获得 $ENV-value eval-ed，请使用`eval`...

```
$C_HOME = eval $o{"C_HOME"}; 
```

我留给你找出为什么会失败，但是......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:56:22.617

必须评估表达式：

```
$C_HOME = eval($o{"C_HOME"}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T16:48:30.073

Perl 在类似双引号的*代码*字符串中扩展变量，而不是在*data*中。

您必须使用`eval`一个字符串来显式地在其中插入变量，但是这样做而不检查您传递的`eval`内容是危险的。

相反，查找您可能想要在字符串中插入的所有内容，并使用带有`/ee`修饰符的正则表达式替换来评估那些。

该程序在配置值中查找对`%ENV`散列元素的所有引用并替换它们。您可能希望在 Perl 允许的任何地方添加对空格的支持（`$ ENV { EO_HOME }`编译得很好）。它还分配`%ENV`您需要删除的测试值。

```
use strict;
use warnings;

my %data;

%ENV = ( EO_HOME => 'C:\work\System11R1' );

while (<DATA>) {
    if ( my ($key, $val) = m/ (.*) \s+ = \s* (.*) /x ) {
        $val =~ s/ ( \$ENV \{ \w+ \} ) / $1 /gxee;
        $data{$key} = $val;
    }
}

print $data{C_HOME};

__DATA__
C_HOME = $ENV{EO_HOME}\common\ 
```

**输出**

```
C:\work\System11R1\common\ 
```

# android - 如何制作在线收音机小部件

> ID：11631201
> 
> 赞同：0
> 
> 时间：2012-07-24T12:48:02.647
> 
> 标签：android, android-widget

当我点击这个`Widget`收音机应该开始播放，当我再次点击它时，收音机应该停止。

这是我的代码~！

```
private RemoteViews buildUpdate(Context context) {
            RemoteViews updateViews = new RemoteViews(context.getPackageName(),
                    R.layout.widget);   
     player =new MediaPlayer();
         try {
            player.setDataSource("http://94.102.55.40:8123");
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         player.prepareAsync();
         player.start();
     if(player.isPlaying()){
            player.stop();
        updateViews.setImageViewResource(R.id.phoneState,
                        R.drawable.on);
         }else{
        player.prepareAsync();
        player.start();
        updateViews.setImageViewResource(R.id.phoneState,
                        R.drawable.off);        
          }
    Intent i = new Intent(this, Appwidget.class);
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, i, 0);
    updateViews.setOnClickPendingIntent(R.id.phoneState, pi);
    return updateViews;
} 
```

# coffeescript - Coffeescript 基本编译错误

> ID：11631203
> 
> 赞同：1
> 
> 时间：2012-07-24T12:48:25.317
> 
> 标签：coffeescript

刚开始使用 Coffeescript 并已正确安装它，但是在基本编译工作时遇到问题

我有 2 个文件夹名称“src”和“js”

我在名为 test.coffee 的 src 文件夹中创建了一个简单的 .coffee 文件

在父文件夹中，我打开一个终端窗口并输入以下内容

```
coffee -wc src -o js 
```

这应该自动编译 src 文件夹中的任何 .coffee 文件并放入 js 文件夹，但我总是得到一个错误

```
File not found: –wc.coffee 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:55:15.307

咖啡对参数顺序很挑剔。

> 用法：coffee [options] path/to/script.coffee -- [args]

如您所见，您必须在要编译的脚本（或目录）*之前指定所有选项：*

```
coffee -w -c -o js src 
```

或者

```
coffee -wco js src 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:53:49.263

根据[coffeescript.org](http://coffeescript.org/)上的使用示例，“监视”功能适用于文件，而不是目录。

尝试删除`-w`.

# tfs - 构建文件夹的 Team Foundation 构建属性

> ID：11631204
> 
> 赞同：1
> 
> 时间：2012-07-24T12:48:29.740
> 
> 标签：tfs, tfsbuild

使用 TFS 2010，我需要构建一个依赖于不同团队项目中的其他几个解决方案的解决方案。我正在编辑我的构建定义并创建一个“要构建的项目”列表。在构建父解决方案时出现错误，因为它无法引用其他解决方案创建的程序集。所以我回去编辑构建定义并将 /p:ReferencePath="c:\builds\3\referencedproject\binaries\" 添加到“MSBuild Arguments”构建过程参数中。

问题是，我不想硬编码 c:\build\3。我想可能有一个 $() 属性我可以用它来代替 - 有人可以请教吗？

我遇到的另一个问题是“主要”项目和它引用的另外两个项目在源代码中处于同一级别。据我所知，我必须将源代码管理文件夹设置为高于此级别 - 恰好是根目录。这意味着 TFS Build 会获取根目录上的所有项目 - 其中包括我的构建不需要的数十个项目。这不是一个关键问题，因为它没有尝试编译这些不相关的项目，但它确实增加了构建周期的完成时间。这是避免这种情况的唯一方法，将我构建所需的项目“分组”到不同的 TFS 源文件夹中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:13:39.483

对于参考问题，有几个选项。最常见的是通过将二进制文件签入到 TFS 来显式依赖特定版本。

例如，如果您的团队项目 A 依赖于团队项目 B，我会假设它们被设置为单独的项目，因为它们的发展方式不同，可能有不同的团队在处理它们，并且具有不同的发布周期。管理这种依赖关系的常用方法是将 B.dll 签入到团队项目 A 中（通常在专门为此目的的 lib 文件夹中），然后使用项目 A 的解决方案/项目中对 lib 文件夹中的 dll 的文件引用。

这种方法让项目 A 团队可以明确选择他们希望依赖的 B.dll 版本，并根据自己的时间表明确决定采用更新版本的 B.dll。

对于如何让构建定义下载仅选择源代码路径的另一个问题，您可以在设置构建定义时在工作区映射屏幕中指定多行。例如，您可能有以下内容：

```
$\ProjectA -> $(SourceDir)\ProjectA
$\ProjectB -> $(SourceDir)\ProjectB 
```

这将下载项目 A + B，但不会下载 C。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:43:22.653

我将从问题 2 开始，因为这应该是最容易解决的。

您有 2 个选项都涉及更改构建定义的工作区映射。

您不必映射到“上方”​​文件夹，您可以映射单个文件夹，因此如果您的源看起来像这样。

`$/TP/SolutionA`

`$/TP/Folder1/SolutionB`

`$/TP/Folder1/SolutionC`

`$/TP/Folder2/SolutionD`

并且您只想在构建中包含 SolutionA 和 SolutionC，您可以按如下方式设置工作区。

![工作区映射](../Images/72fd09a2f031519649de0ec842ef0bf2.png)

这将只获得您需要的代码并保留它们之间的相对路径。

另一种选择是使用隐藏，您映射“根”文件夹，然后隐藏您希望构建忽略的任何文件夹。

![在此处输入图像描述](../Images/9c23c11680f304e279bc80b29bf0791b.png)

这两种方法都将限制构建运行时下载的源数量，并防止在未映射/隐藏的文件夹中发生签入时启动“连续”构建。

* * *

问题编号 1。

正如 Dylan 建议的那样，最好的办法可能是在解决方案之间使用二进制引用。特别是在单独的团队项目中的解决方案。

查看我[对这个问题的回答以](https://stackoverflow.com/a/5751241/568475)获得完整的描述。

# fixed-width - ANSI C 中的定宽整数

> ID：11631206
> 
> 赞同：2
> 
> 时间：2012-07-24T12:48:40.577
> 
> 标签：fixed-width, c89

```
How do I handle a 4-byte char array as a typical int in ANSI C? 
```

**一些上下文：**

我正在解析一个二进制文件，我需要在其中读取 4 字节无符号整数。

我想确保，无论这个解析器在什么平台上编译，“int”总是 4 个字节长。

我读过关于 uint32_t 和朋友的文章，但我仅限于 ANSI C。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:05:28.690

在那里扔一些预处理器命令

```
#include <limits.h>

#if LONG_BIT == 32
    long buffer [BUFFER_SIZE];
#elif WORD_BIT == 32
    int buffer [BUFFER_SIZE];
#endif 
```

您也可以在运行时使用 sizeof(int) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T16:05:38.700

我建议与其尝试覆盖数据，不如简单地编写函数来执行类似的操作`uint32 GetUInt32LE(unsigned char *dat)`，然后可以将其实现`return ((uint32)(dat[3]) << 24) | ((uint32)(dat[2]) << 16) | ((uint32)(dat[1]) << 8) | dat[0];`为最大可移植性（假设已`uint32`适当定义），或者可以在系统上更简单地定义其中 a`int`已知为 32 位或更大。请注意，仍然有一些嵌入式编译器适用于`int`只有 16 位的较小系统，因此需要对单个字节进行强制转换。演员表`dat[1]`在这样的系统上是必需的，因为否则将像 0xFF 这样的字节值左移 8 会产生未定义的行为，其最可能的实际结果是将其解释为 (int)(0xFF00)，这将被符号扩展为 0xFFFFFF00，从而破坏结果的两个高字节。

# mfc - MFC: CToolTipCtrl::SetTipBkColor 不工作

> ID：11631210
> 
> 赞同：0
> 
> 时间：2012-07-24T12:48:51.623
> 
> 标签：mfc, tooltip

我正在尝试使用深色背景自定义我的工具提示，以便它们清晰可见。为此，我尝试使用 CToolTipCtrl::SetTipBkColor。但我仍然看到带有银色渐变背景和阴影的默认样式工具提示。

请找到我为此目的使用的示例代码。

```
BOOL CAboutDlg::OnInitDialog()
{
CDialogEx::OnInitDialog();
m_ToolTipCtrl.Create(this, TTS_ALWAYSTIP | TTS_NOPREFIX );
m_ToolTipCtrl.Activate(TRUE);
m_ToolTipCtrl.SetDelayTime(TTDT_INITIAL, 0);
m_ToolTipCtrl.SetTipBkColor(RGB(255,0,0));

CWnd* pWnd = GetDlgItem(IDC_BUTTON1);
m_ToolTipCtrl.AddTool(pWnd,_T("TOOLTIP Displayed"));

return TRUE;  // return TRUE unless you set the focus to a control
// EXCEPTION: OCX Property Pages should return FALSE
} 
```

搜索后我发现我需要禁用视觉样式。我不知道它的真正含义。我认为它与 CToolTipCtrl:::SetWindowTheme 有关，但不知道需要传递什么值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:46:22.680

只需为主题传递一个空白字符串：

```
m_ToolTipCtrl.SetWindowTheme(""); 
```

# java - Java 静态字段初始化

> ID：11631216
> 
> 赞同：7
> 
> 时间：2012-07-24T12:49:49.577
> 
> 标签：java, initialization, static-methods

我刚刚花了半个小时来解决这个问题，我已经设法修复了我的代码，但我并不完全理解发生了什么，并且想知道是否有人可以对此有所了解。

我有一个**utils**类型类，它包含一些静态字段（例如数据库连接端点），这些字段被各种其他程序根据手头的任务使用。本质上是一个图书馆。

这就是它以前的样子（虽然还是坏了）；

```
//DBUtils.java
public final class DBUtils {

    private static DBConnection myDBConnection = spawnDBConnection();
    private static DBIndex myDBIndex = null;

    private static DBConnection spawnDBConnection() {
        //connect to the database
        //assign a value to myDBIndex (by calling a method on the DBConnection object) <- IMPORTANT
        //myDbIndex NOT NULL HERE
        System.out.println("database connection completed");
        //return the DBConnection object
    }

    public static searchDB(String name) {
        //use the myDBIndex to find a row and return it
    }
} 
```

简而言之，我使用静态 spawnDBConnection() 方法为**myDBConnection**和**myDBIndex**分配一个值。这很完美，我的程序的第一行输出总是“数据库连接完成”，在 spawnDBConnection() 方法的末尾，myDBConnection 或 myDBIndex 都不是空的，一切都应该是这样。

我的外部程序如下所示；

```
//DoSomethingUsefulWithTheDatabase.java
public final class DoSomethingUsefulWithTheDatabase {

    public static void main(String args[]) {
        DBUtils.searchDB("John Smith"); //fails with NullPointerException on myDBIndex!
    }
} 
```

这个对 searchDB 的调用发生在 spawnDBConnection 完成之后，我已经广泛使用标准输出来展示这一点。但是，一旦进入 searchDB 方法，myDBIndex 的值为 null！这是一个静态字段，在 spawnDBConnection 结束时它不是 null，没有进行其他分配，现在它是 null :(

简单的解决方法是删除“= null”，因此字段声明现在看起来像；

```
private static DBIndex myDBIndex; 
```

为什么会有所作为？我被这个彻底搞糊涂了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T12:52:06.770

那是因为`null`to的分配`myDBIndex`是在之后完成的

```
private static DBConnection myDBConnection = spawnDBConnection(); 
```

例如覆盖分配`spawnDBConnection`

顺序是：

1.  声明字段`myDBConnection`，`myDBIndex`
2.  初始化`myDBConnection = spawnDBConnection();`

    其中包括调用`spawnDBConnection`和分配返回值到`myDBConnection`

3.  初始化`myDBIndex`（为空）

在您的第二个示例中，第三步不存在。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T12:52:22.403

> 为什么会有所作为？我被这个彻底搞糊涂了。

的初始化程序`spawnDBConnection`正在运行，*然后*初始化程序`myDBIndex`正在运行。`myDBIndex`将值设置为 null的初始化程序。由于这是在将其设置为非空值*之后发生的，因此最终结果是它为空。* `spawnDBConnection`

尽量不要这样做 - 静态初始化程序调用的方法设置其他静态变量很奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T12:51:52.337

`static`这是在生成的初始化程序块中发生的事情：

```
static {
   myDBConnection = spawnDBConnection();
   myDBIndex = null;
} 
```

我希望现在很清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:04:22.037

据我所知，如果您在字段起作用之前定义您的方法，则在初始化时，**类将从 top 解析**：

```
public class DbUtils {
    private static String spawnDBConnection() {
        System.out.println("database connection completed");
        return "INIT";
    }
    private static String myDBConnection = spawnDBConnection();
    private static int myDBIndex = 0;

    public static void main(final String[] args) {
        System.out.println(myDBConnection);
    }
} 
```

输出 ：

```
database connection completed
INIT 
```

# android - 从drawable解码文件

> ID：11631218
> 
> 赞同：1
> 
> 时间：2012-07-24T12:49:59.380
> 
> 标签：android, image, drawable

我找到了这个功能

```
//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
   try {
    //Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(new FileInputStream(f),null,o);

    //The new size we want to scale to
    final int REQUIRED_SIZE=70;

    //Find the correct scale value. It should be the power of 2.
    int scale=1;
    while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
        scale*=2;

    //Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize=scale;
    return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
} catch (FileNotFoundException e) {}
return null;
} 
```

我的问题很简单，如果我的图像来自 res/drawable，我该如何使用此功能？我使用 decodeResource(getResources(),R.drawable.android); 但是当我使用 ViewPager 在我的应用程序中实现时给我内存不足

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:54:43.057

解码位图时，只需将 BitmanFactory.Options 放在最后。

```
Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.yourbitmap, o2); 
```

# iphone - 应用程序因内存使用率非常低而崩溃 iphone/iPad

> ID：11631223
> 
> 赞同：2
> 
> 时间：2012-07-24T12:50:27.253
> 
> 标签：iphone, ipad, memory, crash, ios-simulator

我已经阅读了很多关于内存不足警告崩溃的帖子，但我无法解决我的应用程序崩溃的问题。仪器的分配显示 2-7MB 的实时字节。它永远不会超过 7 或 7.5MB，但应用程序仍然会崩溃。

我阅读了一些链接，这些链接告诉分配和活动监视器显示不同的内存使用值。如前所述，Allocations 将显示最大 7-7.5MB 但活动监视器显示应用程序启动时大约 75MB 的使用量，当我使用该程序时，它开始增加和减少。它将上升到 110-120MB，然后减少到 75-80MB。

更多链接说要查看 VM Tracker 中的脏大小和驻留大小。当我签入 VM Tracker 时，Dirty 大小将从 30MB 开始，并随着我使用该应用程序而开始增加。它超过 400MB。我正在使用大约 150 张图像，其中大约 70-80 张是 1024x1024 尺寸，大约 35 张是 110x110 尺寸，其余的是 3000x4000 尺寸的图像。所有这些图像最初都是 png 格式，我已经以编程方式转换为 JPG+ALPHA 并作为资产添加到应用程序中。每当需要加载相应的图像时，我将 JPG+ALPHA 图像分成 16 个部分，最后将它们连接起来得到原始图像。我这样做是因为当我尝试加载分辨率为 3000x4000 的图像时，内存在分配中飙升到 40-45MB，所以使用了这种方法。此方法确保内存永远不会超过 10MB。

所有这些记录和统计数据都是使用模拟器测量的。

应用程序永远不会在模拟器上崩溃，但它会在真实设备上崩溃。我正在使用 iPad2 进行测试。

请帮我解决这个问题。过去 2 天我被困住了，看到应用程序崩溃完全沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:04:38.153

您尝试加载的图像非常大。也许您应该考虑使用 CATiledLayer 来显示图像。[您可以在此处](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html)找到苹果类定义。

还要考虑使图像更易于渲染与减少图片的内存使用之间的区别。如果您将图像分割成更小的部分，您将减少单独的绘制负载，但如果将这些图像中的每一个都加载到内存中，您仍然会遇到内存问题。

平铺层显示非常大的图像，同时通过尝试仅加载可见平铺来降低内存使用量。

此外，您的模拟器没有实际设备的内存限制。您应该在实际设备上执行所有压力测试。

编辑：您还应该避免使用 UIImage imageNamed，因为它会缓存图像并且会使您的内存问题更加严重。请改用 imageWithContentsOfFile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:27:50.090

这段代码正确吗？

```
 UIImageView* framebadgeOrAccessoryImage = [[UIImageView alloc]initWithFrame:sizeOfFrameOrAccessoriesView];
    [framebadgeOrAccessoryImage setCenter:imageArea.center];
    [framebadgeOrAccessoryImage setContentMode:UIViewContentModeScaleAspectFit];
    [framebadgeOrAccessoryImage setImage:badgeOrAccessoryImage];
    [framebadgeOrAccessoryImage setTag:iObjectTag];
    [framebadgeOrAccessoryImage setObservationInfo:@"BadgeAccessories"];
    [framebadgeOrAccessoryImage setExclusiveTouch:YES];

    iObjectTag++;

    [framebadgeOrAccessoryImage setMultipleTouchEnabled:YES];
    [framebadgeOrAccessoryImage setBackgroundColor:[UIColor clearColor]];
    [framebadgeOrAccessoryImage setUserInteractionEnabled:YES];

    [imageArea addSubview:framebadgeOrAccessoryImage];

selectedItem = framebadgeOrAccessoryImage;

    [framebadgeOrAccessoryImage release]; 
```

我使用我设置的标签在我的其他方法中使用“framebadgeOrAccessoryImage”。我是否必须像在代码的最后一行中所做的那样释放“framebadgeOrAccessoryImage”，或者在释放它之后将其分配给 nil？

“framebadgeOrAccessoryImage”在这里使用名称“selectedItem”。

```
- (void)panRecognized:(UIPanGestureRecognizer *)gestureRecognizer
{   
    if(selectedItem.image && [gestureRecognizer isEnabled])
    {
        UIImageView *piece = selectedItem;

        if ((([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged)) && [((NSString*) [piece observationInfo]) isEqualToString:@"BadgeAccessories"])
        {
            CGPoint translation = [gestureRecognizer translationInView:[piece superview]];
            [piece setCenter:CGPointMake([piece center].x + translation.x, [piece center].y + translation.y)];
            [gestureRecognizer setTranslation:CGPointZero inView:[piece superview]];

        }

        if ([gestureRecognizer state] == UIGestureRecognizerStateEnded ||[gestureRecognizer state] == UIGestureRecognizerStateCancelled || [gestureRecognizer state] == UIGestureRecognizerStateFailed)
        {   
            if(CGRectContainsPoint([[self view]viewWithTag:RECYCLEBIN_TAG].frame, [gestureRecognizer locationInView:imageArea]))
            {
                NSAutoreleasePool* pool = [[NSAutoreleasePool alloc]init];
                [objectsAdded removeObjectForKey:[NSString stringWithFormat:@"%d",selectedItem.tag]];
                [pool release];
                [UIView beginAnimations:NULL context:nil];
                [UIView setAnimationBeginsFromCurrentState:YES];
                [UIView setAnimationDuration:0.4];
                [UIView setAnimationDidStopSelector:@selector(propDeleted:finished:context:)];
                [UIView setAnimationDelegate:self];

                [selectedItem setFrame:CGRectMake(selectedItem.frame.origin.x, selectedItem.frame.origin.y, 5, 5)];
                selectedItem.center = [[[self view]viewWithTag:RECYCLEBIN_TAG]center];
                [UIView commitAnimations];
            }
            else
            {
                [self applyEffectOnTouch:0];
            }
        }
    }
} 
```

# javascript - 如何创建带有私有变量的实例方法？

> ID：11631231
> 
> 赞同：0
> 
> 时间：2012-07-24T12:50:56.893
> 
> 标签：javascript

我正在处理“JavaScript Web 应用程序”，希望附加我创建的类库。这是小提琴[http://jsfiddle.net/andrewjmead/gXMp8/](http://jsfiddle.net/andrewjmead/gXMp8/)。现在它可以工作，但我记得听说最好避免在代码中使用 __proto__。我目前正在使用它来创建函数来操作私有变量。

现在 Cat 类继承自 Animal 类。我想在 cat 的构造函数中添加一个私有变量“name”，然后创建一个 getName 和 setName 来为每个实例操作这个值。

```
Var tom = Cat("tom");
tom.setName("fud");
tom.getName(); //fud 
```

我应该使用 this.getName() 而不是这个。**proto** .getName()，还是我完全错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:56:06.407

我认为在 javscript 或 Python 等动态语言中，不需要真正的`private`变量。当我们说某事`private`时，我们实际上是在说“如果你不知道自己在做什么，就不要碰这些东西”。所以不要对这`private`件事太严格。而且，如果你真的想保留一些变量`private`，我更喜欢使用`closure`. 这是真正使一些变量的好方法`private`。例如：

```
function Cat(name){
    var _name = name;

    this.getName = function(){
        return _name;
    }

    this.setName = function(name){
        _name = name;
    }
} 
```

在这种方法中，没有办法`_name`从`Cat`. 但是有一些缺点你可以很容易地发现，你必须在函数内部编写你的`getter`和`setter`方法`constructor`。花哨的`Cat.prototype.someFunc`宣言消失了。

In my real work, I used to work with javascript for 2 years, I am favor of using the leading `_` to tell others, this is a private variable, cause I am a Python fan. ;-)

# ruby-on-rails - 突然设计宝石坠毁

> ID：11631239
> 
> 赞同：0
> 
> 时间：2012-07-24T12:51:20.717
> 
> 标签：ruby-on-rails, devise

一切都很好，但突然我的应用程序开始崩溃并且没有启动。

这是我的日志：

```
 C:/Ruby193/lib/ruby/gems/1.9.1/gems/activerecord-3.2.2/lib/active_record/dynamic
   _matchers.rb:50:in `method_missing': undefined local variable or method `after_sign_up_path_for' for #<Class:0x4422480> (NameError) 
```

下面的其他错误与此有关。

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:58:34.103

对不起，我发现了我的错误。我是错误调用方法引起的。

# jquery - 解析 json 问题：object.property 未定义

> ID：11631242
> 
> 赞同：2
> 
> 时间：2012-07-24T12:51:22.157
> 
> 标签：jquery, json

这是 ajax 调用返回的 json：

```
{
    "StumbleUpon": 0,
    "Reddit": 0,
    "Facebook": {
        "commentsbox_count": 0,
        "click_count": 0,
        "total_count": 0,
        "comment_count": 0,
        "like_count": 0,
        "share_count": 0
    },
    "Delicious": 0,
    "GooglePlusOne": 1,
    "Buzz": 0,
    "Twitter": 1,
    "Diggs": 0,
    "Pinterest": 0,
    "LinkedIn": 1
} 
```

我正在尝试在 jquery 中处理它，但由于某种我无法理解的原因，Facebook.total_count 未定义。我会期待否则，因为控制台告诉我收到了上面的 json。此外，所有其他（data.Twitter 等）都可以正常工作。这是产生错误的回调函数。我究竟做错了什么？

```
function(data){

                console.log(data);
//this line throws the error
                var fb = data.Facebook;
                var total = parseInt(data.Twitter + parseInt(fb.total_count) + data.GooglePlusOne + data.Pinterest + data.LinkedIn);
// rest of code.
} 
```

请参阅[jsFiddle](http://jsfiddle.net/MPCPx/)上的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:07:14.617

从根本上说，[该代码有效](http://jsbin.com/esogog/2)——前提是`data`已经反序列化。如果还没有，那也...

...添加`dataType: "JSON"`到`ajax`通话中：

```
$.ajax({
    // ...
    dataType: "JSON",
    // ...
}); 
```

...或用于`$.parseJSON`结果。

```
function(data) {
    if (typeof data === "string") {
        data = $.parseJSON(data);
    }
    // ...
} 
```

* * *

注意：您不需要`parseInt`在这些数字上使用，它们已经是 JSON 中的数字，并且将被正确反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:58:47.520

据我所知，您将 JSON 作为字符串接收，但也没有将其解析为实际对象。页面上有太多内容无法真正筛选并准确地告诉您，但这似乎是问题所在。试试[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)

# php - 使用带有 swift openstack 的 php 云文件时出现内部服务器错误

> ID：11631246
> 
> 赞同：0
> 
> 时间：2012-07-24T12:51:30.957
> 
> 标签：php, cloudfiles, openstack, openstack-swift

我目前正在使用 php can 文件作为 API，以便在带有 tempauth 的 SAIO 安装中快速进行。执行php文件：

```
 require('cloudfiles.php');
 $username="test:teste";
 $api_key="AUTH_tkfec9a726c0584d3d8f0150eb36446fd4";
 $auth = new CF_Authentication($username, $api_key);
 $auth->authenticate();
 if ( $auth->authenticated() )
     echo "CF Authentication successful \n";
 else
     echo "Authentication faile \n"; 
```

由于一些身份验证问题，执行没有奏效：

> PHP 致命错误：未捕获的异常 'AuthenticationException' 带有消息'无效的用户名或访问密钥。

用户名和 api_key 是正确的（用 swift 命令测试，我可以在 swift 上对容器进行操作？我想知道它在身份验证时是如何工作的？任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:21:43.210

您没有提供身份验证主机 URL，因此默认[值为 https://auth.api.rackspace.com](https://auth.api.rackspace.com)。这可能是问题所在。

顺便提一句。您应该将函数包装在一个`try-catch`块中。

```
echo "Authentication faile \n"; 
```

永远不会被调用，因为`authenticate()`如果它不抛出异常，总是返回 true。

# database - 多合一桌子的设计很好吗？

> ID：11631249
> 
> 赞同：0
> 
> 时间：2012-07-24T12:51:41.860
> 
> 标签：database

我有一个社交网络系统，里面有话题、任务、问题、链接、文档、视频等等。我打算将它们全部放在一个名为 的表中`posts`，并且有一个列名`kind`要识别。这是一个好的设计吗？为什么 ？

顺便提一句：

1、我用的是postgresql 2、我只是觉得它们之间有很多重复的列，例如：标题、内容、created_at和作者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:57:26.110

根据您的描述，所有这些域对象似乎都有一些共同点。否则，您甚至不会考虑将它们存储在一张表中。您是否偶然地描述了将继承映射到关系模型的技术之一，称为[*单表*](http://www.agiledata.org/essays/mappingObjects.html#MapHierarchyToTable)。上面的链接详细描述了其他技术以及它们的[优缺点](http://www.agiledata.org/essays/mappingObjects.html#ComparingTheStrategies)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:56:59.190

您无法索引要对其执行搜索的列。为什么首先要将所有内容放在同一张桌子上？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:54:19.200

不，它将这些东西限制为所有具有相同属性的东西。因此，例如，如果“链接”需要一个 URL 字段、一个主题、一个任务、一个问题等，都必须有一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T12:54:25.260

这不是 postgresql 的好设计。[规范化](http://www.sqlmag.com/article/performance/sql-by-design-why-you-need-database-normalization)关系数据库中的数据非常重要。

您应该考虑使用 NoSQL 数据库系统，例如[mongodb](http://www.mongodb.org/)。

# objective-c - 一个应用程序代表，两个窗口

> ID：11631250
> 
> 赞同：2
> 
> 时间：2012-07-24T12:51:42.617
> 
> 标签：objective-c, macos, cocoa, interface-builder

我有一个简单的 Cocoa 应用程序。它有两个窗口，每个窗口都在一个单独的 xib 文件中：

*   主菜单.xib
*   辅助窗口.xib

我有一个 AppDelegate 类，它引用了 MainMenu.xib 中的窗口。我试图让它引用 SecondaryWindow.xib 中的窗口。我对如何做到这一点感到困惑。我做了一个出口，例如：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet NSWindow *secondaryWindow;

@end 
```

这是实现：

```
@implementation AppDelegate

@synthesize window = _window;
@synthesize secondaryWindow = _secondaryWindow;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    [NSBundle loadNibNamed:@"SecondaryWindow" owner:self];
    NSLog(@"_window = %@", _window);
    NSLog(@"_secondaryWindow = %@", _secondaryWindow);
}

@end 
```

_secondaryWindow 始终为 (null)

我已经在 SecondaryWindow.xib 中添加了一个出口，将第二个窗口连接到 AppDelegate 中的出口。我还需要在 SecondaryWindow.xib 中做什么才能完成连接？

编辑：添加 [NSBundle loadNibNamed...]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:56:05.550

您需要加载它... 默认情况下，MainWindow.xib 由框架加载，它创建自己的应用程序委托实例。您应该从您的应用程序委托加载您的第二个窗口（尝试`[NSBundle laodNibNamed:@"SecondaryWindow" owner:self]`。当您这样做时，文件的所有者将成为应用程序委托 - 在界面构建器中更改文件所有者的类以反映这一点并建立您的连接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:00:44.053

您是否将辅助窗口的 .xib 中的 File's Owner 类型设置为您的应用程序委托的类型？然后您是否将该 .xib 中的窗口连接到`secondaryWindow`File's Owner 的插座？

如果您做了这些事情，并且 .xib 正确包含在项目中，并且您在`+loadNibNamed:owner:`消息中正确指定了文件名，那么`secondaryWindow`应该填充您的属性。

# android - android模拟器上的UnknownHostException

> ID：11631253
> 
> 赞同：0
> 
> 时间：2012-07-24T12:51:56.223
> 
> 标签：android, emulation, hosts-file, unknown-host

当我想访问我的网络服务时，我的 android 应用程序中有一个**UnknownHostException 。**

`<uses-permission android:name="android.permission.INTERNET" />`我在我的 AndroidManifest.xml 中插入了一个。

如果我通过浏览器访问我的网络服务链接，一切都会好起来的。

`C:\Windows\System32\drivers\etc\hosts`我在文件中输入了域名和 IP 。

但是如果我通过模拟器运行应用程序，我会得到一个**UnknownHostException**。据我了解，模拟器应该使用我的系统文件来连接服务器......但是，实际上它并没有......请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-30T18:51:43.893

就我而言，当我在登录 VPN 时启动模拟器时遇到了这个问题。在我退出模拟器并重新启动之前，注销 VPN 无效。很容易测试您的模拟器是否无法正确解析名称 - 只需转到**模拟器**浏览器并输入网站主机名（除 Google 之外的任何名称）即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:13:07.617

使用这样的域解决了问题

```
CustomHttpClient.executeHttpPost("http//192.168.1.2/path"); 
```

一切正常。即使具有 root 权限，我也无法在 android 文件系统中编辑主机文件。因此，如果您有类似的问题 - 好的解决方案是使用 IP 地址，而不是域。

感谢[Haresh Chaudhary](https://stackoverflow.com/users/1155805/haresh-chaudhary)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:01:35.113

**一个非常好的连接网络服务的教程是[here](http://wowjava.wordpress.com/2011/01/16/login-application-for-android/)**

**您将在本教程中完成这一行。**

```
CustomHttpClient.executeHttpPost("http//192.168.1.2/path"); 
```

这里的***路径***是指你的***文件***的路径放在`htdocs`.

# java - 有什么方法可以配置 jboss 在线程执行结束时清除 ThreadLocal 变量？

> ID：11631254
> 
> 赞同：1
> 
> 时间：2012-07-24T12:51:55.973
> 
> 标签：java, jakarta-ee, threadpool, jboss5.x, thread-local

我正在**Jboss AS 5.1.0.GA**下部署一个 Web 应用程序，在我的应用程序中，我使用了一些`java.lang.Threadlocal`变量。根据定义，`java.lang.Threadlocal`变量应该在线程执行结束时被清除。在应用程序服务器的情况下，由于它使用**线程池**，因此`java.lang.Threadlocal`不会清除变量。

你知道如何配置`Jboss AS 5`来清除这些**java.lang.Threadlocal**变量吗？我已经用谷歌搜索了，我没有发现任何有趣的东西。我正在寻找**Jboss 5**而不是**Jboss 6**的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:17:55.493

您可以创建 ContextListener 并覆盖 onContextDestroyed 或创建 servlet 并覆盖 destroy 方法，在覆盖的方法中清理您的线程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:08:50.027

您是否从 jboss 获得任何关于为什么无法删除 threadlocal 的日志？如果存在这样的问题，我会感到惊讶。

# jquery - 可排序列表在 ipad 上不起作用

> ID：11631258
> 
> 赞同：0
> 
> 时间：2012-07-24T12:52:11.817
> 
> 标签：jquery, ios, ipad, jquery-ui, jquery-mobile

我正在尝试在 Ipad 上制作可排序的列表。我使用了以下[链接](http://jsfiddle.net/sidonaldson/PeS2D/)。但它不起作用我只能滚动整个页面而不是移动列表的组件。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:29:31.490

[在Safari](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)上查看 Apple 的文档，其中讨论了事件处理。本质上，您必须防止默认的拖动行为。

```
function touchMove(event) {
    event.preventDefault();
    curX = event.targetTouches[0].pageX - startX;
    curY = event.targetTouches[0].pageY - startY;
    event.targetTouches[0].target.style.webkitTransform =
        'translate(' + curX + 'px, ' + curY + 'px)';
} 
```

# windbg - !mlocks 需要翻译帮助

> ID：11631263
> 
> 赞同：1
> 
> 时间：2012-07-24T12:52:33.560
> 
> 标签：windbg, hung

我试图调查一个挂着windbg的人，想知道我的假设是否正确。如果我调用命令 !mlocks 我得到以下信息：

```
0:000> !mlocks
Examining SyncBlocks...
Scanning for ReaderWriterLock instances...
Scanning for holders of ReaderWriterLock locks...
Scanning for ReaderWriterLockSlim instances...
Scanning for holders of ReaderWriterLockSlim locks...
Examining CriticalSections...

ClrThread  DbgThread  OsThread    LockType    Lock              LockLevel 
-------------------------------------------------------------------------- 
0x640064   -1         0xffffffff  RWLock      000000000339a338  Writer  
0x6        7          0x1ea8      thinlock    000000000343ddd8  (recursion:0) 
```

执行 rwlocks 时，我得到以下信息：

```
 0:000> !rwlock 000000000339a338            
WriterThread:           0x640064 (DEAD) WriterLevel:            115 WaitingWriterCount:     0 
WriterEvent:            0 
WaitingWriterThreadIds: None 
ReaderCount:            116 
CurrentReaderThreadIds:  
WaitingReaderCount:     576 
ReaderEvent:            80400002 
WaitingReaderThreadIds:  
*This lock has 116 orphaned reader locks. 
```

0:007> !rwlock

```
Address            ReaderCount   WaitingReaderCount     WriterThread   WaitingWriterCount 
... 
000000000339a338           116                  576            0x640064                 0 
... 
00000000053f0688           568                  499            --                       6 
... 
```

我懂了。当我打电话

```
 0:000> !dlk Examining SyncBlocks... Scanning for ReaderWriterLock instances... Scanning for holders of ReaderWriterLock locks... Scanning for ReaderWriterLockSlim instances... 
Scanning for holders of ReaderWriterLockSlim locks... 
Examining CriticalSections... 
Scanning for threads waiting on SyncBlocks... 
Scanning for threads waiting on ReaderWriterLock locks... 
Scanning for threads waiting on ReaderWriterLocksSlim locks... 
Scanning for threads waiting on CriticalSections... 
No deadlocks detected. 
```

则不会检测到死锁。我在 Tess 的博客上找到了这个 我的问题是这个线程是否与我挂起的应用程序有关，以及可能的情况。线程死了是什么意思。锁会发生在死线程上吗？还是我必须在其他地方找到我挂起的应用程序的根本原因？请帮我解释这个输出。

问候，伯恩哈德

这是一些附加信息：

```
0:000> dc 000000000339a338
00000000`0339a338  f2073268 000007fe 00000000 80000000  h2..............
00000000`0339a348  f2066960 000007fe 00000010 00650047  `i..........G.e.
00000000`0339a358  00480074 0073006f 00410074 00640064  t.H.o.s.t.A.d.d.
00000000`0339a368  00650072 00730073 00730065 00000000  r.e.s.s.e.s.....
00000000`0339a378  00000000 00000000 00000000 00000000  ................
00000000`0339a388  f2066960 000007fe 0000001c 00650066  `i..........f.e.
00000000`0339a398  00300038 003a003a 00380034 00310038  8.0.:.:.4.8.8.1.
00000000`0339a3a8  0034003a 00660039 003a0063 00300039  :.4.9.f.c.:.9.0.
0:000> db 000000000339a338
00000000`0339a338  68 32 07 f2 fe 07 00 00-00 00 00 00 00 00 00 80  h2..............
00000000`0339a348  60 69 06 f2 fe 07 00 00-10 00 00 00 47 00 65 00  `i..........G.e.
00000000`0339a358  74 00 48 00 6f 00 73 00-74 00 41 00 64 00 64 00  t.H.o.s.t.A.d.d.
00000000`0339a368  72 00 65 00 73 00 73 00-65 00 73 00 00 00 00 00  r.e.s.s.e.s.....
00000000`0339a378  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
00000000`0339a388  60 69 06 f2 fe 07 00 00-1c 00 00 00 66 00 65 00  `i..........f.e.
00000000`0339a398  38 00 30 00 3a 00 3a 00-34 00 38 00 38 00 31 00  8.0.:.:.4.8.8.1.
00000000`0339a3a8  3a 00 34 00 39 00 66 00-63 00 3a 00 39 00 30 00  :.4.9.f.c.:.9.0.

0:000> !mdt 000000000339a338  
Can't get name for module 000007ff0068c3c0\. Error = 0x80070057.
Can't get name for module 000007ff00791908\. Error = 0x80070057.
Can't get name for module 000007ff0068c3c0\. Error = 0x80070057.
Can't get name for module 000007ff00791908\. Error = 0x80070057.
000000000339a338 (System.Threading.ReaderWriterLock)
    _hWriterEvent:8000000000000000 (System.IntPtr)
    _hReaderEvent:000007fef2066960 (System.IntPtr)
    _hObjectHandle:0065004700000010 (System.IntPtr)
    _dwState:0x480074 (System.Int32)
    _dwULockID:0x73006f (System.Int32)
    _dwLLockID:0x410074 (System.Int32)
    _dwWriterID:0x640064 (System.Int32)
    _dwWriterSeqNum:0x650072 (System.Int32)
    _wWriterLevel:0x0073 (System.Int16)

0:000> !mdt 000000000343ddd8  
Can't get name for module 000007ff0068c3c0\. Error = 0x80070057.
Can't get name for module 000007ff00791908\. Error = 0x80070057.
000000000343ddd8 (System.Collections.Generic.LinkedList`1[[TAU.GuiAccess.PopupHandler.ClientInfo, TAU.GuiAccess.PopupHandler]])
    head:000000000823e148 (System.Collections.Generic.LinkedListNode`1[[TAU.GuiAccess.PopupHandler.ClientInfo, TAU.GuiAccess.PopupHandler]])
    count:0x1 (System.Int32)
    version:0x3b (System.Int32)
    _syncRoot:NULL (System.Object)
    siInfo:NULL (System.Runtime.Serialization.SerializationInfo)

0:000> !do 000000000343ddd8 
Name:        System.Collections.Generic.LinkedList`1[[TAU.GuiAccess.PopupHandler.ClientInfo, TAU.GuiAccess.PopupHandler]]
MethodTable: 000007ff009ce218
EEClass:     000007ff009dda20
Size:        48(0x30) bytes
File:        C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll
Fields:
              MT    Field   Offset                 Type VT     Attr            Value Name
000007ff009ced28  4000586        8 ...ss.PopupHandler]]  0 instance 000000000823e148 head
000007fef206c848  4000587       20         System.Int32  1 instance                1 count
000007fef206c848  4000588       24         System.Int32  1 instance               59 version
000007fef2065ab8  4000589       10        System.Object  0 instance 0000000000000000 _syncRoot
000007fef208a1b8  400058a       18 ...SerializationInfo  0 instance 0000000000000000 siInfo
ThinLock owner 6 (0000000000000000), Recursive 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:10:34.667

“DEAD”指示表示没有相应的 OS 线程。创建托管线程时，会创建托管线程对象并为其分配线程 ID。在 Windows 上，托管线程和本机线程之间目前始终存在 1:1 映射，因此还分配了一个 OS 线程 ID。当一个线程终止时，托管线程对象和本机线程之间的关联显然被破坏了。但是，托管线程对象需要一段时间才能被清理干净。处于此状态的线程被 sosex 列为“DEAD”，并在 !sos.threads 输出中列为 XXXX。

在这种情况下，CLR 线程 ID (00640064) 看起来很可疑。奇怪的是，它看起来像 Unicode 文本“dd”。托管锁地址周围可能存在损坏。使用调试器的“dc”或“db”命令查看是否有一些文本覆盖了线程 ID 字段。

# .net-4.0 - C# 静态类 - 计算大小

> ID：11631264
> 
> 赞同：1
> 
> 时间：2012-07-24T12:52:40.027
> 
> 标签：.net-4.0, static, size

假设我有一个 C# 静态类。它只包含静态方法。我如何计算它的大小？什么会影响它在内存中的大小？

如果我包含静态字段，它会有多重？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:53:54.353

您永远不会创建它的任何实例，因此大小几乎无关紧要。

显然，当您添加更多方法时，它们会占用*一些*内存（IL、JIT 编译的本机代码等），但不会比其他任何地方多——而且几乎肯定不会在您的应用程序中显着增加。

如果您添加一些静态字段，它们又会占用内存 - 但它们仅与类型相关联，而不是与该类型的任何实例相关联。因此，如果您添加（比如说）一个 type 的静态字段，每次加载该类型`long`将需要额外的 8 个字节。`AppDomain`在宏伟的计划中微不足道。

# sql - MVC EF Database first 和 SQL 多对多关系

> ID：11631265
> 
> 赞同：0
> 
> 时间：2012-07-24T12:52:40.000
> 
> 标签：sql, asp.net-mvc, entity-framework, database-design

资源：

```
DictionaryTable:

DictID     int
RUWordID   int   -> FK to RUWordsTable.RUWordID
ENWordID   int   -> FK to ENWordsTable.ENWordID

RUWordTable:

RUWordID   int
Word       string

ENWordTable:

ENWordID   int
Word       string 
```

我希望能够将数据读/写到使用以下结构的表中：

```
RUWord   ENWord
Привет   Hello
... 
```

在速度和从 MVC 视图轻松访问数据方面做我想做的事情的最佳选择是什么。据我了解，可以选择创建 SQL 视图并使用它（但不确定可能的数据插入）。或者只是在 Visual Studio 设计器中创建相同但使用实体框架。基本上一个词可以被不同地翻译（在另一个表中有几个条目）。我的目标是找到一种方法如何通过自动插入将单词添加到字典中（当找不到源或翻译时，将其添加到参考表中，如果找到 - 只需使用现有条目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:44:25.083

这在很大程度上取决于您需要一口气读取的数据量。如果您想查找一个或几个单词的翻译，实体框架模型将做得很好。如果您需要获取大量数据，则视图或存储过程会更好。但我不希望后者发生。在 MVC 视图中，您可能会使用分页。

至于插入数据 EF 将是一个可行的选择。您已经定义了一个联结表 ( `DictionaryTable`)。您可以以连接表透明的方式设置 EF：

```
class RuWord
{
    public int Id { get; set; }
    public string Word { get; set; }
    public ICollection<EnWord> EnWords { get; set; }
}

class EnWord
{
    public int Id { get; set; }
    public string Word { get; set; }
    public ICollection<RuWord> RuWords { get; set; }
} 
```

（假设您首先使用代码）

在数据输入中，您可以将新的俄语单词添加到`RussianWords`上下文的 DbSet 中，并将新的或现有的英语单词添加到单词的`EnWords`集合中并调用`SaveChanges()`. EF 将在联结表中插入单词*和适当的记录（将两个外键作为其复合主键）。*

但是......在现实生活中，我几乎从未见过纯接线表。我将其引入是因为在您的情况下，我几乎无法想象仅注册俄语和英语单词之间的关联就足够了。您是否（至少）不需要某种程度的偏好？就像“日期”这个词有更多的翻译一样，但首选的是日历（除非你正在为约会网站工作，但即便如此......）。无论如何，如果您想记录*有关*关联的某些内容，则需要显式映射联结表并创建关联记录，并将其所有详细信息写入代码。

我希望这能给一些方向。

* * *

**编辑**（在您发表评论后）

如果您使用显式联结实体（即与联结表对应的类）。该实体可以具有两个属性`EnWord`并`RuWord`作为对上述两个表的引用。数据输入意味着创建一个新`DictionaryTable`实例并设置其属性（可以是新词或现有词）。

# c# - VSTO：有没有办法检索已插入文档的图片（InlineShape）的原始文件名？

> ID：11631268
> 
> 赞同：1
> 
> 时间：2012-07-24T12:52:44.677
> 
> 标签：c#, file, vsto, image

我正在开发一个 Word 插件。插件中有一项功能需要检索已插入文档的图片的原始位置。

如果图像文件不再存在于原始目录中，则无关紧要。我将在代码中处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:12:26.783

我认为没有办法做到这一点。我确实有从文档中的图像中查找文件名的相同要求。所以我不得不在替代文本描述中插入带有文件名的图像来实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T15:53:39.327

这个问题让我很好奇，所以我尝试了以下方法：将图像添加到 word 文档，保存，压缩并开始查看 xml 文档。**媒体**文件夹包含嵌入在 word 中的图像，此时已重命名并“忘记”其来源。另一方面，**document.xml**确实包含很多关于包含在标签中的图像的信息，其中包括原始图片的整个路径。

我不知道 Open XML SDK 是否允许您直接访问它（怀疑），但在最坏的情况下，假设您正在使用已保存的文件，您应该能够通过挖掘文件​​来获得它。

如果文件还没有保存，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T15:37:05.623

我知道这已经有多年历史了，但是已拖放到文档中的图像的完整路径`AlternativeText`在`InlineShape`. 不幸的是，当它被插入时你不能得到这个值`Insert Picture`。已粘贴的图像可能因是否可用而有所不同，例如，如果它是从拖放的文档中粘贴的，则它可能存在，否则不存在。

此信息来自使用 VSTO 定位 Word 2010。

# c# - 有没有办法从一个数组中初始化多个变量？

> ID：11631271
> 
> 赞同：2
> 
> 时间：2012-07-24T12:52:46.167
> 
> 标签：c#

在某些语言中，可以同时从一个数组初始化多个变量。例如，在 PHP 中，您可以执行以下操作：

```
$array = array('a', 'b', 'c');
list($a, $b, $c) = $array; 
```

是否也可以在 C# 中执行此操作？

我想将其应用于一个程序，在该程序中，我从一个文件中读取所有行，我知道每行只有两个单词（永远不会更多，永远不会更少）。我知道我可以自己创建函数（并通过`out`关键字引用发送变量）但我想知道是否存在任何内置功能。

我想知道这主要是因为如果可能的话，代码对于其他开发人员来说可能更具可读性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:55:04.917

在 C# 中，

```
string[] arr1 = new string[] { "one", "two", "three" };
string s1 = arr1[0];
string s2 = arr1[1];
string s3 = arr1[2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:57:23.000

如果可读性是问题，并且如果我理解正确 - 我不知道内置的方式。但是您可以为此创建一个函数。

```
void Doit(out string one, out string two, string[] input)
{
    one = input[0];
    two = input[1];
} 
```

并这样使用它：

```
string[] s = new string[] { "First", "Second" };
string a, b;
Doit(out a, out b, s); 
```

我才意识到你不需要我的回答。（我最初对“我知道我可以自己创建函数……”的理解不同。）不过，也许它可以帮助其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T12:55:01.317

```
char[] array = new char[] {'a','b','c'}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:19:38.360

据我所知，没有内置的方法可以做到这一点。

也许实现该功能的一个好方法是使用扩展方法来提高可读性。

只需在扩展方法中编写所需的代码，该方法可以附加到您要初始化的类型，如上面示例中的列表，并将数组作为该函数的输入：

```
public static class Extensions {

    public static void initFromArray<T> (this List<T> list, T[] array) {

        for (int i = 0; i < array.Length; i++) {

            list[i] = array[i];
        }
    }
} 
```

然后您可以使用此方法，例如如下所示：

```
int[] array = new int [] { 1, 4, 6, 2, 5 };

List<int> list = new List<int>();

for (int i = 0; i < 4; i++) list.Add(0);

list.initFromArray<T>(array); 
```

# javascript - 如何使用 tinymce 在选择更改时启用/禁用自定义按钮

> ID：11631272
> 
> 赞同：5
> 
> 时间：2012-07-24T12:52:47.410
> 
> 标签：javascript, tinymce, wysiwyg

我使用此代码创建一个自定义 tinymce 按钮，该按钮可以更改一类图像。它在设置块中。

```
ed.addButton('cust_setimgaspreview', {
        title : 'Set image as a preview image',
        image : 'ikony/previews.png',
        onclick : function() {
            if(ed.selection.getNode().tagName == 'IMG')
            {
                 ed.selection.getNode().className = 'preview';
            } else {
                alert('You need to select an image.');
            }
        }
    }); 
```

如您所见，我使用“丑陋的方法”来禁用除图像以外的其他元素的类更改。如何以与 tinymce 使用其默认按钮（如编辑图像或编辑链接）相同的方式禁用/启用该按钮？我想我需要以某种方式捕捉选择更改，然后根据选择更改按钮状态，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T17:19:32.067

刚刚想通了——这很简单。我刚刚编辑了我的设置函数并添加了“onNodeChange”处理程序。

```
setup : function(ed) {

    ed.onNodeChange.add(function(ed, cm, node) {
        cm.setDisabled('cust_setimgaspreview', !(node.tagName == 'IMG'))
    });

    ed.addButton('cust_setimgaspreview', {
        title : 'Set image as a preview image',
        image : 'ikony/previews.png',
        onclick : function() {
            ed.selection.getNode().className = 'preview';
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T10:57:50.883

您可以使用控制管理器提供的功能。

你可以使用即

```
 state = !state;
        ed.controlManager.setActive('my_button_id', state); 
```

# node.js - 如何在 node.js 中正确导出？

> ID：11631274
> 
> 赞同：0
> 
> 时间：2012-07-24T12:52:58.920
> 
> 标签：node.js, express

升级到 Express 3.0 后，我的节点应用程序出现了一些问题。所以，由于我正在重写它，我试图遵循它的风格，`routes/index.js`因为它看起来很干净。

所以，我主要`app.js`有一些变量，例如：

```
var calls = 0;
var agents = []; 
```

并且还使用该`node-mysql`模块。但是，路由定义没有`app.js`范围，而是它们自己的范围，因此`calls`不`agents`可见。

我应该如何让它们可见？

对于 mysql，我尝试了类似的方法：

```
// libraries/mysql.js
mysql = require('mysql');
var mysql_conf = {
    host: myhost,
    user: myuser,
    password: mypass,
    database: mydb
};
var mysql_client = mysql.createClient(mysql_conf);

exports.mysql_client;

//Later in routes/index.js
mysql_client = require('../helpers/mysql.js'); 
```

但它似乎不像它所说的那样工作`TypeError: Object #<Object> has no method 'query'`

请问有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:54:38.723

线

```
exports.mysql_client; 
```

实际上并不为 的`mysql_client`属性分配任何东西`exports`。它访问一个属性，并立即丢弃该值。你需要做这样的事情：

```
var mysql_client = mysql.createClient(mysql_conf);
exports.mysql_client = mysql_client;

// or simply

exports.mysql_client = mysql.createClient(mysql_conf); 
```

# jsf - 如何在延迟加载数据表中获取页码

> ID：11631282
> 
> 赞同：0
> 
> 时间：2012-07-24T12:53:48.267
> 
> 标签：jsf, primefaces

我有一个延迟加载的数据表，我想将 XHTML 中的页码或行数传递给 ManagedBean。我该怎么做？这是我正在使用的数据表：

```
<p:dataTable var="studyPlanList" value="#{editBean.lazyModel}"
        paginator="true" rows="5"
        paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
        rowsPerPageTemplate="5,10,15" selectionMode="single"
        selection="#{editBean.selectedStudyPlan}" id="studyPlanTable">
        <p:ajax event="rowSelect" listener="#{editBean.onRowSelect}"
            update=":studyPlanEditForm :relatedFileEditForm" />
        <p:column headerText="StudyPlan" sortBy="#{studyPlanList.name}"
            filterBy="#{studyPlanList.name}" width="100">
            <h:outputText value="#{studyPlanList.name}" />
        </p:column>
        <p:column headerText="StudyPlan Status" width="100">
            <h:graphicImage
                value="#{editBean.statusKeyMap.get(studyPlanList.status)}"
                style="float:center;height: 18px;width: 20px"
                title="#{editBean.statusTitleMap.get(studyPlanList.status)}" />
        </p:column>
        <p:column headerText="Messages" width="100">
            <ui:fragment rendered="#{studyPlanList.status eq 300}">
                <h:outputText style="font: italic;"
                    value="Please click Finish Editing to Finish SpokenTutorial" />
            </ui:fragment>
        </p:column>
    </p:dataTable> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:14:41.843

如果您使用 LazyLoading，那么在您的 bean 中您有一个 LazyDataModel 的实现，并且您正在覆盖方法`load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String,String> filters)`。您应该从该方法内部从数据库加载集合，在这里您有页面大小，以及要检索的第一条记录（页码为`first / pageSize`）

# linq - 如何根据另一个列表中的匹配项过滤列表？

> ID：11631284
> 
> 赞同：1
> 
> 时间：2012-07-24T12:53:57.007
> 
> 标签：linq

我有一个组织对象

```
public class Organisation
{
    OrgId {get....}
    OrgName {get...}
    AccountTypes { get....} //this is of type List<AccountType>
} 
```

和一个 AccountType 对象

```
public class AccountType
{
    AccountTypeId {get....}
    AccountTypeName {get...}
} 
```

我正在寻找一种方法来查看现有组织列表并从每个组织中删除帐户类型，其中帐户类型在另一个帐户类型列表中找不到（这将是来自浏览器的回发）。

我会做类似的事情吗？

```
var foundOrgs = from org in orgs
                where org.OrganisationId == Convert.ToInt32(hash["orgId"])
                select org;
Organisation organisation = foundOrgs.ElementAt(0);
organisation.AccountTypes.Clear();
organisation.AccountTypes = // What goes here? 
```

我正在寻找一个 Linq 查询，它将一个列表与另一个列表进行比较，并仅返回 AccountTypeID 匹配或存在的那些项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:57:12.497

您可以使用[`List<T>.RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)：

```
// where accounts is IEnumerable<int>
organisation.AccountTypes.RemoveAll(at => !accounts.Contains(at.AccountTypeId)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:58:17.047

## 编辑代码

```
//created account id list over here
var AccountTypeID = accountType.Select(x=>x. AccountTypeId);

//you code    
var foundOrgs = from org in orgs
                 where org.OrganisationId == Convert.ToInt32(hash["orgId"])
                 select org;
 Organisation organisation = foundOrgs.ElementAt(0);
 organisation.AccountTypes.Clear();
//changes in code where you want to change -// What goes here? 
List<AccountTypes> templist = organisation.AccountTypes;
 organisation.AccountTypes = 
               from acc in templist 
               where !AccountTypeID.Conains(acc.AccountTypeId)
                       select acc).ToList(); 
```

* * *

## 编辑

不确定，但你可以试试

```
var orgdata= from org in foundOrgs
        select { OrgId =org.OrgId ,OrgName = org.OrgName , 
                 AccountTypes  = ( from acc in org.AccountTypes
                                  where !AccountTypeID.Conains(acc.AccountTypeId)
                                  select acc) }; 
```

* * *

尝试这样的事情

```
var ids = {1, 2, 3};
  var query = from item in context.items
             where !ids.Contains( item.id )
             select item; 
```

这将为您提供不属于 1,2,3 即 ids 列表的元素列表，同样您可以在代码中应用，首先找出哪些不存在，然后将其从列表中删除

图片 ![在此处输入图像描述](../Images/c3b384f0e4c335188adcfdc604921e8d.png)

# database - 使用现有的 sql 代码创建数据库

> ID：11631286
> 
> 赞同：-2
> 
> 时间：2012-07-24T12:53:58.030
> 
> 标签：database

当我已经有现有的 SQL 代码时，如何构建数据库？
我想要一个简单的“.db”文件。
你知道任何也可以在 Mac 上运行的程序吗？

PS.：我是 sql 和数据库的新手！;)

弗罗约

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:01:30.650

大多数数据库不支持将所有数据放入单个文件中；例如，MySQL 会在数据库中为每个表创建一个或两个文件，每个索引创建一个文件。

“建立数据库”也没有意义；数据库是一个容器（如文件系统），您可以在其中存储信息。如果要将文件保存到磁盘，则需要格式化在其上创建文件系统结构的硬盘。如果你想在 SQL 数据库中存储信息，你需要设置结构（这将在你的文件系统中创建很多文件，但数据库会知道这一点——你不需要关心这个）。

我建议阅读 MySQL 文档以了解如何[安装](https://dev.mysql.com/doc/refman/5.0/en/installing.html)它并“格式化”文件系统的一部分（= 为 SQL 表分配空间）以及了解如何使用 MySQL的[教程。](https://dev.mysql.com/doc/refman/5.0/en/tutorial.html)

# mysql - SQL 错误 - 表定义不正确；只能有一个自动列

> ID：11631290
> 
> 赞同：8
> 
> 时间：2012-07-24T12:54:10.950
> 
> 标签：mysql, sql

这个 SQL 有什么问题，-> ); ERROR 1075 (42000)：表定义不正确；只能有一个自动列

SQL

```
CREATE TABLE TABLENAME12
(
TAB_ID INT NOT NULL AUTO_INCREMENT,

NAME_FIRST NVARCHAR(200),
TYPE NVARCHAR(200)

); 
```

我正在使用mysql，我该如何解决这个问题。我正在尝试创建一个表。我得到这个错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T12:55:03.413

您必须将`AUTO_INCREMENT`列指定为`PRIMARY KEY`try：

```
CREATE TABLE TABLENAME12
(
 TAB_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
 NAME_FIRST NVARCHAR(200),
 TYPE NVARCHAR(200)
); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T12:59:14.537

正如错误所说。

```
"Incorrect table definition; there can be only one auto column and it must be 
defined as a key" 
```

[http://sqlfiddle.com/#!2/7e064](http://sqlfiddle.com/#!2/7e064)

在 auto_increment 列上添加主键。

```
CREATE TABLE TABLENAME12
(
TAB_ID INT NOT NULL AUTO_INCREMENT,
NAME_FIRST NVARCHAR(200),
TYPE NVARCHAR(200),
PRIMARY KEY (TAB_ID)
); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-24T13:04:44.537

您将获得的类似结果

```
CREATE TABLE TABLENAME12
(
  TAB_ID INT NOT NULL AUTO_INCREMENT,
  NAME_FIRST NVARCHAR(200),
  TYPE NVARCHAR(200),
  PRIMARY KEY( TAB_ID )
); 
```

除了类型定义 int 和 nvarchar 之外，这也可用于其他 db 作为 mysql。如果您使用 varchar 和 integer 代替，则与 postgresql 兼容。

# hibernate - 使用 JPA 映射 java.util.Map

> ID：11631294
> 
> 赞同：1
> 
> 时间：2012-07-24T12:54:21.430
> 
> 标签：hibernate, jpa, mapping, many-to-many, map

我有带有 Hibernate 映射类的 Java EE 应用程序（我使用 *.hbm.xml 映射）。现在我需要使用 JPA 注释重新制作映射。一切都很好，但我无法使用我的 Map 属性创建正确的映射。

```
@Entity
@Table(name = DataBaseConstants.EMPLOYEE_TABLE)
public class Employee implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@SequenceGenerator(name = DataBaseConstants.EMPLOYEE_ID, sequenceName = DataBaseConstants.EMPLOYEE_SEQ)
@GeneratedValue(generator = DataBaseConstants.EMPLOYEE_ID)
@Column(name = DataBaseConstants.EMPLOYEE_ID)
private long id = 0;
@Column(name = DataBaseConstants.EMPLOYEE_NAME)
private String name = null;
@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = DataBaseConstants.ADDRESS_ID_FK)
private Address address = null; 

private Map<Office, Position> officePositions = null; 
```

这是数据库中数据模型的一部分。 [DB MODEL IMAGE](http://imgur.com/S1ZWu.jpg) （对不起，我无法发布图片）请帮我映射 officeEmployee MAP

在休眠中，我使用了这种方式，一切正常。

```
<map name="officePositions" table="EMPLOYEE_POSITION_OFFICE" lazy="false"
                fetch="join" batch-size="100">
            <key>
            <column name="EMPLOYEE_ID"></column>
        </key>
        <map-key-many-to-many class="com.example.jpajdbctask.entities.Office">
            <column name="OFFICE_ID">
            </column>
        </map-key-many-to-many>
        <many-to-many column="POSITION_ID"
            class="com.example.jpajdbctask.entities.Position" />
        </map> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:06:05.583

我自己从未使用过它，所以我无法帮助您进行确切的实现，但您需要使用[@CollectionOfElements](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/annotations/CollectionOfElements.html)注释，例如：

```
@CollectionOfElements(fetch=FetchType.EAGER)
@JoinTable(
    name = "MappingTable", 
    joinColumns = @JoinColumn(name = "mapOwner"))
@Column(
   name = "mapValueItem", 
   nullable = false
)  
@org.hibernate.annotations.MapKey(
    columns={
        @Column(
             name="mapKeyItem"
        )
   }
)
protected Map<String, String> getMapping() {
    return mapping_;
} 
```

[这个](https://forum.hibernate.org/viewtopic.php?t=955308)论坛可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:04:41.370

对于基本情况（其中 key 是一些原语），这是一个带有示例的[MapKey注释的 JavaDoc。](http://docs.oracle.com/javaee/6/api/javax/persistence/MapKey.html)

在您的情况下，似乎应该使用@MapKeyColumn；这是一个与您的非常相似的[示例。](http://wiki.eclipse.org/EclipseLink/Examples/JPA/2.0/MapKeyColumns#Example_of_a_map_key_join_column_relationship_annotation)

您必须将`Employee`类内的 Map 更改为`Map<Office, EmployeePositionOffice>`.

# javascript - 用于 Node.js 的 PHP 的 SimpleXMLElement 模拟

> ID：11631297
> 
> 赞同：0
> 
> 时间：2012-07-24T12:54:22.700
> 
> 标签：javascript, xml, api, node.js

我用过的最好的 XML 读写 API 是 PHP 的[SimpleXMLElement](http://php.net/manual/en/class.simplexmlelement.php)。例如，要创建以下 XML 文本的 DOM：

```
<root>
    <foo>
        <bar baz="goo">
            moo
        </bar>
    </foo>
</root> 
```

在 PHP 中，只需编写：

```
$root = new SimpleXMLElement('<root/>');
$root->foo->bar = 'moo';
$root->foo->bar['baz'] = 'goo'; 
```

读取 XML 的风格相同，但增加了`xpath()`功能。

我听说人们称它为“建造者模式”。不太确定这是否合适。无论如何，Node.js 下是否有任何 API 具有相当的易用性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:58:17.227

是的，它有[jsdom](https://github.com/tmpvar/jsdom/)。

jsdom 允许您像在客户端一样使用 DOM。

如果裸 DOM 吓到你，你甚至可以使用 jQuery。

来自文档的示例：

```
// Run some jQuery on a html fragment
var jsdom = require('jsdom');

jsdom.env('<p><a class="the-link" href="https://github.com/tmpvar/jsdom">jsdom\'s Homepage</a></p>', [
  'http://code.jquery.com/jquery-1.5.min.js'
],
function(errors, window) {
  console.log("contents of a.the-link:", window.$("a.the-link").text());
}); 
```

# asp.net - .NET 连接池区域

> ID：11631299
> 
> 赞同：0
> 
> 时间：2012-07-24T12:54:28.580
> 
> 标签：asp.net, vb.net

我已阅读此帖子的已接受答案：[ExecuteReader 需要一个开放且可用的连接。连接的当前状态是 Connecting](https://stackoverflow.com/questions/9705637/executereader-requires-an-open-and-available-connection-the-connections-curren/9707060#9707060)

我有一些存储在数据库表中的连接字符串。我正在考虑做这样的事情：

```
 Public class classConnection
       private con1 As dbConnection
       private strConnectionString As String
       private intType As Integer

    Public Sub New()
     con1 = New SQLConnection({connectionstring})
   End Sub

    Public Sub getConnectionStringByDescription()
      'Connect to con1 and get connection string
      'Set the connection string property
      'Set the database type e.g. Oracle
    End Sub

    Public Sub getConnectionStringByStatus()
      'Connect to con1 and get connection string
      'Set the database type e.g. Oracle
    End Sub

    Public Function getConnection() As dbConnection
       If intType=1 Then
            return New SQLConnection(strConnectionString)
       ElseIf intType=2 Then
            return New OracleConnection(strConnectionString)
       End If
    End Function 
```

如果这会导致连接池机制出现问题，我正在徘徊，因为我有效地将一些逻辑封装在一个类中以连接到这些数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:17:36.097

您的类的实例不会影响 SQL Server 池连接字符串的能力。只要连接字符串声明了连接池并且连接字符串相同，SQL Server 就会尝试使用当前连接而不创建新连接。有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)。

# android - 在 Android 应用程序中使用 Amazon Webservices

> ID：11631304
> 
> 赞同：0
> 
> 时间：2012-07-24T12:54:56.433
> 
> 标签：android, amazon-web-services

我在网上阅读了云可以用于存储数据的教程。所以我想问一下 sql server 2005 表数据是否存储在亚马逊云中。谁能给我示例代码以在亚马逊中存储来自 sql server 的数据并检索它在android应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:06:01.400

Amazon 为您提供了一个服务器实例，其中包含您指定的操作系统。从技术上讲，您可以在其上安装任何东西并托管它。

1.  从技术上讲，您应该做的是从 Amazon 获取所需规范的实例。
2.  编写一个简单的 Web 应用程序（我会做一个 java webapp。确保你可以像你已经在做 Android 编程一样去做。）连接到你的数据库，并且有控制器来运行你的 SQL 查询并返回值。

这是一些示例代码。这使用了 Spring，所以你知道。如果你想简单地开始，你也可以使用普通的 MVC。

```
 @RequestMapping ( value = "runquery" , method = RequestMethod.GET )
@ResponseBody
public void runQuery()
{

    Statement lStatement        = null;
    Connection lConnection      = null;
    ResultSet lResultSet        = null;
    try
    {
        lConnection = DBAccess.getConnection();
        lStatement  = lConnection.createStatement();
        lResultSet  =  lStatement.executeQuery( "select * from table" );

        while ( lResultSet.next() )
         {
            mLogger.info("The result set is : "+lResultSet.toString());
         }

    }
    catch( Exception e )
    {
        e.printStackTrace();
        mLogger.error("Exception occurred while trying to runQuery : "+e.getMessage());
    }
    finally
    {
        DBAccess.closeResultSet( lResultSet );
        DBAccess.closeStatement( lStatement );
        DBAccess.closeDBConnection( lConnection );
    }

} 
```

# c# - 从任务管理器中隐藏 WPF 应用程序 - 错误

> ID：11631311
> 
> 赞同：2
> 
> 时间：2012-07-24T12:55:32.650
> 
> 标签：c#, wpf, taskmanager

您好我正在尝试从任务管理器中隐藏 WPF 应用程序。

我使用下面的代码。它在 Windows 窗体中运行良好，但是当我将它实现到 WPF 中时，它给了我这个错误：“ **CustomWindowStyle.MainWindow.CreateParams'：找不到合适的方法来覆盖**”

代码：

```
protected override CreateParams CreateParams // <---- here is the error
{
    get
    {
        var cp = base.CreateParams;
        cp.ExStyle |= 0x80;  // Turn on WS_EX_TOOLWINDOW
        return cp;
    }
} 
```

**我必须更改代码才能工作？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:11:05.313

[这个答案](https://stackoverflow.com/a/551847/314334)是一个非常详细的描述如何 `WS_EX_TOOLWINDOW`在 WPF中设置

PS：这会隐藏您的窗口**Alt-Tab**，就像您的原始代码一样。我不确定是否可以（甚至可取）将其完全隐藏在**Task Manager**中。

# javascript - 将此（对象）传递给对象方法之一嵌套方法

> ID：11631313
> 
> 赞同：1
> 
> 时间：2012-07-24T12:55:43.330
> 
> 标签：javascript, dom, object, parameters, this

抱歉标题冗长，但我认为它总结了我的问题

我创建了一个 jsfiddle 来减少和创建我的困境的简化问题 [http://jsfiddle.net/afw6k/3/](http://jsfiddle.net/afw6k/3/)

```
<input id="txtA"/>
<!-- after setupOnclick is executed my onlick for txtA should be onclick="someObj.log("Clicked!")"-->
<script>
    function someObject(field){
        this.field = field;

        this.log = function(msg){
            if(this.field.value != "") this.field.value += ", ";
            this.field.value += msg
        }

        this.setupOnlick = function(){ 
            field.onlick = function(){//So how do I pass this (as in someObject) to this?
                this.log("Clicked!"); //As if I have written someObj.log("Clicked!");
            }
        }
    }

    var someObj = new someObject(document.getElementById("txtA"));
    someObj.setupOnlick();
</script> 
```

我不是想在单击时简单地向文本框写一些东西，但上面是我在这里尝试完成的简化版本。

将这个（对象）传递给对象函数嵌套函数

还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:56:47.193

保存`this`在变量中：

```
 this.setupOnlick = function(){ 
        var theObj = this;
        field.onlick = function(){//So how do I pass this (as in someObject) to this?
            theObj.log("Clicked!"); //As if I have written someObj.log("Clicked!");
        }
    } 
```

的值`this`只是一个值，因此可以将其复制到另一个变量中。变量“theObj”在运行时将保留在“click”处理程序的范围内。

# android - 连接到 apache 服务器被拒绝

> ID：11631315
> 
> 赞同：0
> 
> 时间：2012-07-24T12:55:44.947
> 
> 标签：android, apache, file-upload

我知道 Stackoverflow 上有类似的问题，但它们并没有解决我的问题。我想将文件从 android 上传到本地 apache 服务器，但出现“连接被拒绝”错误。

我在 Mac OS X Lion（端口 80 上的 Apache）上使用带有 Android 3.2 和 MAMP 的物理设备。我还在清单中添加了 INTERNET 权限。

这是代码：

```
 String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";

    FileInputStream fileInputStream = null;
    try {
        fileInputStream = new FileInputStream(new File(
                "/mnt/sdcard/somefile.xml"));
    } catch (FileNotFoundException e) {
        ...
    }

    URL url = null;
    try {
        url = new URL("http://192.168.x.xxx:80/index.php");
    } catch (MalformedURLException e) {
        ...
    }

    try {
        // Open a HTTP connection to the URL
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();

        // Allow Inputs
        conn.setDoInput(true);
        // Allow Outputs
        conn.setDoOutput(true);

        // Don't use a cached copy.
        conn.setUseCaches(false);

        // Use a post method.
        conn.setRequestMethod("POST");

        conn.setRequestProperty("Connection", "Keep-Alive");

        conn.setRequestProperty("Content-Type",
                "multipart/form-data;boundary=" + boundary);

        DataOutputStream dos = new DataOutputStream(conn.getOutputStream());

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: post-data; name=uploadedfile;filename="
                + SOMEFILE + "" + lineEnd);
        dos.writeBytes(lineEnd);

        // create a buffer of maximum size
        int bytesAvailable = fileInputStream.available();
        int maxBufferSize = 1000;
        // int bufferSize = Math.min(bytesAvailable, maxBufferSize);
        byte[] buffer = new byte[bytesAvailable];

        // read file and write it into form...
        int bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);

        while (bytesRead > 0) {
            dos.write(buffer, 0, bytesAvailable);
            bytesAvailable = fileInputStream.available();
            bytesAvailable = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bytesAvailable);
        }

        // send multipart form data necesssary after file data...
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // close streams
        fileInputStream.close();
        dos.flush();
        dos.close();
    } catch (IOException e) {
        ...
    } 
```

例外：

```
07-24 14:48:43.280: E/App(5802): failed to upload file '/mnt/sdcard/somefile.xml' to   
server 'http://192.168.x.xxx:80/index.php'
07-24 14:48:43.280: E/App(5802): java.net.ConnectException: /192.168.x.xxx:80 -   
Connection refused 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:54:51.017

您是否在 Mac 上启用并运行了防火墙？

确定端口 80 是否真的打开的最佳方法（恕我直言）是在本地网络上的另一台机器上针对目标地址运行 NMap（或 gui Zenmap）。

如果它只是您的台式机和您的 Android 设备，您可以尝试浏览到[http://192.168.xx](http://192.168.x.x)以查看 Apache 服务器是否正在给出响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T07:13:53.093

代码似乎没问题。模拟器可以毫无问题地连接。路由器防火墙有问题

# cocoa-touch - 使用iphone sdk中的字典对象键获取NSMutableArray中的对象索引

> ID：11631317
> 
> 赞同：0
> 
> 时间：2012-07-24T12:55:49.173
> 
> 标签：cocoa-touch, ios5, ios4, nsmutablearray, nsdictionary

我正在尝试使用字典键对象从数组中获取对象索引...但无法获取它。

这是详细信息..

我有数组有字典....

```
 (
   {
        CATEGORYID = 865;
        CATEGORYNAME = "sample1";
        CATEGORYTHUMBIMAGEURL = "1.jpg";
    },
            {
        CATEGORYID = 140;
        CATEGORYNAME = "sample2";
        CATEGORYTHUMBIMAGEURL = "2.jpg";
    },
            {
        CATEGORYID = 1194;
        CATEGORYNAME = "sample3";
        CATEGORYTHUMBIMAGEURL = "3.jpg";
    }
); 
```

在这里，我有 CATEGORYID.... 使用类别 ID 我需要在数组中获取对象索引...

我实现的代码是......

```
 int inx;
    for (int i=0; i<[mutArrData count]; i++) {
    NSString *str=(NSString*)[sender tag];
    //NSLog(@"MY Str %@",str);
    id myOjbect =(id)[sender tag];
    //NSLog(@"My OBJECT %d",[myOjbect intValue]);

    if ([[[mutArrData objectAtIndex:i] allKeys] containsObject:[NSString stringWithFormat:@"%d",[sender tag]]]) {
        inx=i;
        NSLog(@"Breaking here %d",inx);

    }

} 
```

但无法获得它，任何人都可以帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:27:50.917

一个问题是标签是一个整数，上面你把它当作一个 NSString、一个对象和一个整数。

假设您将数组列为一些示例数据，但您的主要问题是 allKeys 返回一个*键名*数组，而不是您要比较的值。

您要做的是提取 categoryid 键的 int 值：

```
// Return matching index, or -1 for not found
-(int)indexInArray:(NSArray)array forCategoryId:(int)categoryId {
  for (int i = 0; i < [array count]; i++) {
    int currentCategoryId = [[[array objectAtIndex:i] valueForKey:@"CATEGORYID"] integerValue];
    if (currentCategoryId == categoryId) {
      return i;
    }
  }
  return -1;
} 
```

# c# - c# 在运行时动态传递字符串方法以进行字符串操作

> ID：11631330
> 
> 赞同：-2
> 
> 时间：2012-07-24T12:56:40.590
> 
> 标签：c#

如何动态传递字符串方法以在运行时应用于字符串。前任。

```
Private String Formatting(String Data, String Format) 
```

当我们通过`String S1 = "S1111tring Manipulation"`并且`format = Remove(1,4)`- 在幕后它会`S1.Remove(1,4)`导致“字符串操作”

或者如果我们经过`String S1 = "S1111tring Manipulation"`并且`format = ToLower()`在幕后它会`S1.ToLower()`导致`"s1111tring manipulation"`

我应该能够传递任何有效的方法，如,`PadLeft(25,'0')`等...`PadRight``Replace`

我会很感激一个完整的例子

这是我尝试过的，但它不起作用

```
using System.Reflection;
string MainString = "S1111tring Manipulation";
string strFormat = "Remove(1, 4)";
string result = DoFormat(MainString, strFormat);

private string DoFormat(string data, string format)
        {
            MethodInfo mi = typeof(string).GetMethod(format, new Type[0]);
            if (null == mi)
                throw new Exception(String.Format("Could not find method with name '{0}'", format));

            return mi.Invoke(data, null).ToString();
        } 
```

引发错误（找不到名称为“Remove(1, 4)”的方法） - 所以我不确定如何继续

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:03:23.587

看看[反射](http://msdn.microsoft.com/en-us/library/f7ykdhsy.aspx)。除了解析用户提供的文本外，您基本上可以使用它来实现您所描述的内容。

您在那里使用的简单示例将类似于，

```
var method = "ToLower()";
var methodInfo = typeof(String).GetMethod(method);
var string = "foo";
string.GetType().InvokeMember(....); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:10:15.517

考虑使用枚举而不是第二个字符串参数。这将有助于类型安全。

```
public enum StringManipulationType
{
  ToLower,
  ToUpper
} 
```

然后用以下内容重写您的操作方法：

```
private string Formatting(String data, StringManipulationType manipulationType)
{
  switch (manipulationType)
  {
    case StringManipulationType.ToLower:
      return data.ToLower();
    case StringManipulationType.ToUpper:
      return data.ToUpper();
    case default:
      throw new ArgumentException();
  }
} 
```

在您拥有早期“字符串参数”的所有地方，使用枚举更改它，如下所示：

# c# - 未从用户控件内的 ASPxRadioButtonList 获取值

> ID：11631331
> 
> 赞同：0
> 
> 时间：2012-07-24T12:56:41.013
> 
> 标签：c#, asp.net, devexpress

我有一个场景，其中我有一个具有 ASPxRadioButtonList 的用户控件，我有一个绑定到此列表的数据源。

现在，当我在 ASPxRadioButtonList 和更新按钮上选择某个选项时，当我尝试获取所选项目时，它返回 null。

我使用了以下代码：

```
 int id = ((ASPxRadioButtonList)ucPlannedRelease.FindControl("lstRdoTicketDetail")).Value.ToString(); 
```

即使我试图在控件中创建一个函数并获取选择项，但它总是返回 null。

我无法找到我做错的地方

# phpunit - 蚂蚁：设置 phpunit.xml

> ID：11631342
> 
> 赞同：2
> 
> 时间：2012-07-24T12:57:08.327
> 
> 标签：phpunit

在我的应用程序中，我在源代码旁边有 phpunit 测试。所以在接下来的所有地图中，假设 DoSometing.class.php 我有一个 DoSomethingTest.class.php。

我想配置 phpunit.xml 来测试所有这些 *Test.class.php 文件。

我该如何在 phpunit.xml 中做到这一点？

我现在有这样的事情：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit 
    backupGlobals="false"
    backupStaticAttributes="true"
    colors="true"
    convertErrorsToExceptions="true"
    convertNoticesToExceptions="true"
    convertWarningsToExceptions="true"
    processIsolation="true"
    stopOnFailure="true"
    syntaxCheck="false">
    <testsuites>
        <testsuite name="My Test Suite">
            <directory>./*Test.class.php</directory>
        </testsuite>
    </testsuites>
    <groups />
    <filter />
    <logging />
    <listeners />
</phpunit> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:09:27.253

我们使用类似的结构，只是我们的测试文件以扩展名 .TEST 或 .QTEST、.JTEST 结尾，基于测试框架，因为我们有 JavaScript 和其他需要测试的嵌入式代码。因此，我们在目录节点上使用后缀选项，如下所示。

```
<phpunit>
<testsuites>
    <testsuite name="Your Test Suite Name">
            <directory suffix=".test">.</directory>
    </testsuite>
</testsuites>
</phpunit> 
```

对于 PHP 单元测试 (*.TEST)，我们使用以下 PHPUNIT.xml（已针对大小进行了编辑）

```
<!-- PHPUnit Core Settings -->
<phpunit backupStaticAttributes="false"
     bootstrap="PeriScope-Bootstrap.php"
             ...

    <testsuites>
        <testsuite name="ICAP User Interface Library">
            <directory suffix=".test">lib/.</directory>
        </testsuite>
        <testsuite name="Enterprise Scale Manager">
            <directory suffix=".test">ESM/.</directory>
        </testsuite>
        ...
    </testsuites>

<!-- Add files not covered with tests into Code Coverage Analysis -->
    <filter>
        <whitelist addUncoveredFilesFromWhitelist="true">
            <directory suffix=".class">lib/.</directory>
            <directory suffix=".fn">lib/.</directory>
            <directory suffix=".php">lib/.</directory>
            ...

            <exclude>
                <directory>ExternalLibraries</directory>
            </exclude>
        </whitelist>
    </filter>

    <logging>
        ...
    </logging>
</phpunit> 
```

# javascript - fetch() 没有调用它的 Success 和 Error 回调函数 (backbone.js)

> ID：11631350
> 
> 赞同：2
> 
> 时间：2012-07-24T12:57:26.147
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一个`fetch()`在回调函数中`$.post()`。从`fetch()`后端抓取数据并更新集合就好了，但是当它运行它`success`或`error`回调时，什么都没有发生！我将`console.log()`s 放在它的两个回调中，它们从未出现在 Javascript 控制台中。

知道发生了什么吗？

**视图中的方法**

```
create_set: function() {
    var self = this;

    // Post data to server
    $.post('api/create_set', {
        user_id: $('#user_id').val(),
        post_id: this.post_id,
        set_name: $('#new_set_name').val()
    }, function() {

        // Update list of Sets
        self.setList.fetch({
            data: {
                user_id: $('#user_id').val(),
                post_id: this.post_id
            },
            processData: true
        }, {
            success: function() {
                // Highlight the first class in list
                $(self.setListView.el).children('div:first').addClass('active');
                console.log('success'); // DOESNT RUN!
            }
        }, {
            error: function() {
                console.log('error');  // DOESNT RUN!
            }
        });

        console.log('hello');  // RUNS!

    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:02:55.347

`success`并且`error`应该是`options`您传递给的对象的属性`fetch`，您不必为它们创建单独的对象：

```
self.setList.fetch({
  data: {...},
  processData: true,
  success: function(){...},
  error: function(){...}
}) 
```

# xml - 将xml文件导入sql server表

> ID：11631352
> 
> 赞同：2
> 
> 时间：2012-07-24T12:57:29.690
> 
> 标签：xml

我正在寻求帮助，将 XML 文件读入 SQL Server 2008 R2 数据表。

我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
    <e_objects xmlns="http://www.blank.info/ns/2012/objects">
    <item  item_id="41-FE-001">
    <class display="true">
    <class_name>FEEDER</class_name>
    </class>
    </item>
</e_objects> 
```

我的创建表 SQL 如下所示：

```
CREATE TABLE [dbo].[handover_data](
  [item_id] [nchar](15) NULL,
  [class] [nchar](10) NULL,
 ) ON [PRIMARY]
 GO 
```

这是我正在使用的 SQL。我无法让它返回任何值：

```
SELECT xmldata.value('(item[@name="item_id"]/@value)[1])', 'NCHAR') AS item_id,
xmldata.value('(class_name)', 'NCHAR') AS class       
FROM ( 
SELECT CAST(x AS XML)
FROM OPENROWSET(BULK 'C:\xmlfile.xml',
SINGLE_BLOB) AS T(x)) AS T(x)
CROSS APPLY x.nodes('e_objects/*') AS X(xmldata); 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:33:34.960

好吧，首先——你又一次，[就像我已经回答的最后一个问题一样](https://stackoverflow.com/questions/11623565/sql-server-2008-xml-file-to-table)，**忽略了 XML 命名空间**——不要！

```
<e_objects xmlns="http://www.blank.info/ns/2012/objects">
           ********************************************* 
```

这就是**XML 命名空间**——它的存在是有原因的——不要忽略它！

那么你就没有注意你的 XML 文件的结构。您`<class_name>`的元素在`<class>`元素内，并且再次在`<item>`节点内。所以你需要相应地选择。

另外：您选择 XML 属性的语法无效；看我的样品——这对你有用吗？

尝试这样的事情：

```
;WITH XMLNAMESPACES(DEFAULT 'http://www.blank.info/ns/2012/objects')
SELECT 
    xmldata.value('(@item_id)[1]', 'NCHAR(10)') AS item_id,
    xmldata.value('(class/class_name)[1]', 'NCHAR(20)') AS class       
FROM 
    (SELECT CAST(x AS XML)
     FROM OPENROWSET(BULK 'C:\xmlfile.xml',
     SINGLE_BLOB) AS T(x)) AS T(x)
CROSS APPLY 
    x.nodes('/e_objects/item') AS X(xmldata); 
```

这将获取as`<item>`下所有节点的列表。然后从这些元素中选择`<e_objects>``X(xmldata)`

*   节点本身的`item_id`属性`<item>`
*   节点内包含的`<class>/<class_name>`元素`<item>`

另外：我建议**不要**使用`NCHAR`太多——它是**固定长度**的，即它总是 10 或 20 个字符长——即使你的字符串只有 2 个字符。不是一个好主意，大多数类型 -`NVARCHAR(20)`改为使用 - 更好，字符串长度 >= 5 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:19:40.650

创建一个带有 xml 列的表来存储该列。试试这个，对我来说很好用

```
 CREATE TABLE XmlImportTest
    (
        xmlFileName VARCHAR(300),
        xml_data xml
    )
    GO

    DECLARE @xmlFileName VARCHAR(300)
    SELECT  @xmlFileName = 'C:\xmlPath.xml'
    -- dynamic sql is just so we can use @xmlFileName variable in OPENROWSET
    EXEC('
    INSERT INTO XmlImportTest(xmlFileName, xml_data)

    SELECT ''' + @xmlFileName + ''', xmlData 
    FROM
    (
        SELECT  * 
        FROM    OPENROWSET (BULK ''' + @xmlFileName + ''' , SINGLE_BLOB) AS XMLDATA
    ) AS FileImport (XMLDATA)
    ')
    GO
    SELECT * FROM XmlImportTest

    DROP TABLE XmlImportTest 
```

参考： [http ://weblogs.sqlteam.com/mladenp/archive/2007/06/18/60235.aspx](http://weblogs.sqlteam.com/mladenp/archive/2007/06/18/60235.aspx)

# excel - 如何使用特定单词在excel中复制一行并粘贴到另一个excel表？

> ID：11631363
> 
> 赞同：17
> 
> 时间：2012-07-24T12:58:01.277
> 
> 标签：excel, vba

我检查了一堆不同的帖子，似乎找不到我正在寻找的确切代码。此外，我以前从未使用过*VBA*，所以我试图从其他帖子中获取代码并输入我的信息以使其工作。还没有运气。在工作中，我们有一个*Excel*工资系统。我正在尝试搜索我的姓名`"Clarke, Matthew"`，然后复制该行并将其粘贴到我保存在桌面上的工作簿中`"Total hours"`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-24T14:35:52.777

**代码**

```
Sub Sample()
    Dim wb1 As Workbook, wb2 As Workbook
    Dim ws1 As Worksheet, ws2 As Worksheet
    Dim copyFrom As Range
    Dim lRow As Long '<~~ Not Integer. Might give you error in higher versions of excel
    Dim strSearch As String

    Set wb1 = ThisWorkbook
    Set ws1 = wb1.Worksheets("yourSheetName")

    strSearch = "Clarke, Matthew"

    With ws1

        '~~> Remove any filters
        .AutoFilterMode = False

        '~~> I am assuming that the names are in Col A
        '~~> if not then change A below to whatever column letter
        lRow = .Range("A" & .Rows.Count).End(xlUp).Row

        With .Range("A1:A" & lRow)
            .AutoFilter Field:=1, Criteria1:="=*" & strSearch & "*"
            Set copyFrom = .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow
        End With

        '~~> Remove any filters
        .AutoFilterMode = False
    End With

    '~~> Destination File
    Set wb2 = Application.Workbooks.Open("C:\Sample.xlsx")
    Set ws2 = wb2.Worksheets("Sheet1")

    With ws2
        If Application.WorksheetFunction.CountA(.Cells) <> 0 Then
            lRow = .Cells.Find(What:="*", _
                          After:=.Range("A1"), _
                          Lookat:=xlPart, _
                          LookIn:=xlFormulas, _
                          SearchOrder:=xlByRows, _
                          SearchDirection:=xlPrevious, _
                          MatchCase:=False).Row
        Else
            lRow = 1
        End If

        copyFrom.Copy .Rows(lRow)
    End With

    wb2.Save
    wb2.Close
End Sub 
```

**快照**

![在此处输入图像描述](../Images/47b24251cee061ec6b76b6458e4f69f7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:39:20.850

扩展 timrau 在他的评论中所说的内容，您可以使用 AutoFilter 功能查找包含您姓名的行。（请注意，我假设您打开了源工作簿）

```
Dim curBook As Workbook
Dim targetBook As Workbook
Dim curSheet As Worksheet
Dim targetSheet As Worksheet
Dim lastRow As Integer

Set curBook = ActiveWorkbook
Set curSheet = curBook.Worksheets("yourSheetName")

'change the Field number to the correct column
curSheet.Cells.AutoFilter Field:=1, Criteria1:="Clarke, Matthew" 

'The Offset is to remove the header row from the copy
curSheet.AutoFilter.Range.Offset(1).Copy  
curSheet.ShowAllData 

Set targetBook = Application.Workbooks.Open "PathTo Total Hours"
Set targetSheet = targetBook.WorkSheet("DestinationSheet")

lastRow = Cells.Find(What:="*", After:=Range("A1"), LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlPrevious).row

targetSheet.Cells(lastRow + 1, 1).PasteSpecial

targetBook.Save
targetBook.Close 
```

如您所见，我为您的工作簿的特定设置添加了占位符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-21T02:09:17.173

我知道这是旧的，但对于其他寻找如何做到这一点的人来说，它可以以更直接的方式完成：

```
Public Sub ExportRow()
    Dim v
    Const KEY = "Clarke, Matthew"
    Const WS = "Sheet1"
    Const OUTPUT = "c:\totalhours.xlsx"
    Const OUTPUT_WS = "Sheet1"

    v = ThisWorkbook.Sheets(WS).Evaluate("index(a:xfd,match(""" & KEY & """,a:a,),)")
    With Workbooks.Open(OUTPUT).Sheets(OUTPUT_WS)
        .[1:1].Offset(.[counta(a:a)]) = v
        .Parent.Save: .Parent.Close
    End With
End Sub 
```

# javascript - 创建 jquery 函数并将它们用于 html 元素？

> ID：11631364
> 
> 赞同：0
> 
> 时间：2012-07-24T12:58:07.143
> 
> 标签：javascript, jquery, function

我试图在 javascript 中创建这个函数但它不起作用，我对 js 有点陌生，所以我不知道我在这里真正做错了什么。

编码：

```
<div id="test">TESTING</div> 
```

JS：

```
function animateDiv(div){

var text = $('#' + div + '"').text();

var doAnimate = function() {
    $('span').each(function() {
        var that = $(this);
        setTimeout(function() {
            that.animate({ fontSize: "90px" }, 1500 )
                .animate({ fontSize: "50px" }, 1500 );
        },that.index()*100);
    });
}

$('#' + div + "'").html('');

for(i=0; i<text.length; i++) {
  $('#' + div + "'").append('<span>'+text[i]+'</span>');
    if(i==text.length-1) doAnimate();
  }

}
  // using the function here to run animation on div test from html  
 animateDiv(test); 
```

jsfiddle 在这里：http: [//jsfiddle.net/aA8Un/3/](http://jsfiddle.net/aA8Un/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:01:57.893

您必须使用单/双引号调用该函数，例如

```
animateDiv("test"); 
```

代替

```
animateDiv(test); 
```

并从任何地方的代码中删除 '"'

`$('#' + div + '"')`所以让它`$('#' + div)`

**[工作演示](http://jsfiddle.net/aA8Un/7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:07:54.610

[这](http://jsfiddle.net/aA8Un/8/)现在有效

```
function animateDiv(div){

var text = $('#' + div.id).text();

var doAnimate = function() {
    $('span').each(function() {
        var that = $(this);
        setTimeout(function() {
            that.animate({ fontSize: "90px" }, 1500 )
                .animate({ fontSize: "50px" }, 1500 );
        },that.index()*100);
    });
}

$('#' + div.id).html('');

for(i=0; i<text.length; i++) {
  $('#' + div.id).append('<span>'+text[i]+'</span>');
    if(i==text.length-1) doAnimate();
  }

}

 animateDiv(test); 
```

实际上，您试图通过 this 连接一个字符串和一个对象`$("#"+div)`，这是错误的，您应该这样做`$("#"+div.id)`是合法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:02:26.920

```
var text = $('#' + div + '"').text(); 
```

用。。。来代替

```
var text = $('#' + div).text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:05:38.983

1.  `animateDiv('test')`

2.  替代品`$('#' + div + '"') with $('#' + div)`

# makefile - 尽管安装了 gfortran，但找不到 -lgfortran

> ID：11631365
> 
> 赞同：2
> 
> 时间：2012-07-24T12:58:08.063
> 
> 标签：makefile, static-libraries, ada, gfortran, gnat

> **可能重复：**
> [未找到 lgfortran](https://stackoverflow.com/questions/10881002/lgfortran-not-found)

我必须承认我的问题可以被认为与[lgfortran not found](https://stackoverflow.com/questions/10881002/lgfortran-not-found)非常相似，但由于我是 Linux 的新手，我需要更多帮助，但我在上面的帖子中找不到我想要的东西。

我安装了一个新的 linux mint Debian 版本，我正在尝试为 Ada 制作一个 lapack 绑定。

如果我检查 gfortran，我会得到：

```
gfortran-4.6 -v
Using built-in specs.
COLLECT_GCC=gfortran-4.6
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i486-linux-gnu/4.6/lto-wrapper
Target: i486-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Debian 4.6.3-1' --with-   bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++,go --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-objc-gc --enable-targets=all --with-arch-32=i586 --with-tune=generic --enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu --target=i486-linux-gnu
Thread model: posix
gcc version 4.6.3 (Debian 4.6.3-1) 
```

如果我`locate libgfortran`，我得到：

```
/usr/lib/gcc/i486-linux-gnu/4.6/libgfortran.a
/usr/lib/gcc/i486-linux-gnu/4.6/libgfortran.so
/usr/lib/gcc/i486-linux-gnu/4.6/libgfortran.spec
/usr/lib/gcc/i486-linux-gnu/4.6/libgfortranbegin.a
/usr/lib/i386-linux-gnu/libgfortran.so.3
/usr/lib/i386-linux-gnu/libgfortran.so.3.0.0
/usr/share/doc/libgfortran3
/var/lib/dpkg/info/libgfortran3.list
/var/lib/dpkg/info/libgfortran3.md5sums
/var/lib/dpkg/info/libgfortran3.postinst
/var/lib/dpkg/info/libgfortran3.postrm
/var/lib/dpkg/info/libgfortran3.shlibs
/var/lib/dpkg/info/libgfortran3.symbols 
```

当我运行 a`makefile`时，我得到：

```
make all
gcc -c cxbbase.ads
gcc -c cxbbase.ads
gnatmake cxbi.adb -largs ifinc.o -lgfortran -lm
gnatbind -x cxbi.ali
gnatlink cxbi.ali ifinc.o -lgfortran -lm
/usr/gnat/libexec/gcc/i686-pc-linux-gnu/4.5.3/ld: cannot find -lgfortran
collect2: ld returned 1 exit status
gnatlink: error when calling /usr/gnat/bin/gcc
gnatmake: *** link failed.
make: *** [cxbi] Error 4 
```

我正在使用的makefile在这里：

[http://12000.org/my_notes/ada/lapack_and_blas/lapack_interf_makefile.txt](http://12000.org/my_notes/ada/lapack_and_blas/lapack_interf_makefile.txt)

由于我对 Linux 很陌生，如果我能获得有关如何解决此问题的详细说明，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:05:26.447

解决方案是 /usr/lib/gcc/i486-linux-gnu/4.6 到 LIBRARY_PATH。此解决方案在 Comp Lang Ada 上讨论：

[https://groups.google.com/forum/#!topic/comp.lang.ada/Ii7YljKqu5M](https://groups.google.com/forum/#!topic/comp.lang.ada/Ii7YljKqu5M)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T14:03:16.250

您的 GNAT 和 GCC 的版本不匹配。请为两者使用相同的版本。

您的 GNAT 似乎是 4.5.3 版本，而您的 GCC 是 4.6.3。

我的猜测是你必须更新 GNAT（Debian 上的 gnat 包）。你是怎么安装 GNAT 的？Debian 似乎只有 4.4 和 4.6 在 repos 中。此外，官方包根本不使用`/usr/gnat`。

# mysql - 加速 GROUP BY、SUM 和 AVG 查询

> ID：11631367
> 
> 赞同：3
> 
> 时间：2012-07-24T12:58:10.587
> 
> 标签：mysql, performance

在我的测试机器上，表 arg_rec 包含 800K 行，通常该表将包含超过 15M 行。我想运行以下查询：

```
SELECT STE_ID, PNT_NO, YR, MN, AVG(AVR_WS) AS AVR_WS, SUM(AVR_PW) FROM arg_rec GROUP BY STE_ID, PNT_NO, YR, MN; 
```

此查询从风力涡轮机数据中提供每日平均风速和总功率。`STE_ID`在我的测试机器上，这个查询在, `PNT_NO`, `YR`,上的组合索引执行 10 分钟后超时`MN`，这只是主键列的一个子集。如果没有索引，查询将在几分钟后完成。

我正在运行几乎所有的 MySQL 安装，除了调整服务器之外，我还想了解更多关于处理此问题的其他方法，例如：

1.  是否可以基于此查询创建视图并缓存结果？
2.  是否有更高级的索引功能来封装 YR、MN、DY、HR、MI、SC 对应记录时间戳的年、月、日等字段的事实？
3.  使用应用程序的业务层复制数据是否更好？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T13:03:59.290

为了在 GROUP BY 查询中获得最佳性能，您必须将覆盖索引添加为：

```
ALTER TABLE arg_rec ADD KEY ix1(STE_ID, PNT_NO, YR, MN,AVR_WS, AVR_PW ); 
```

对于覆盖索引，您添加：

1.  首先在 where 子句中使用的列，然后
2.  group by 中使用的列，然后
3.  按顺序使用的列，然后
4.  选择中使用的列。

详情请访问：[MySQL 中的 Group By Optimization](http://dev.mysql.com/doc/refman/5.0/en/group-by-optimization.html)

1.  [您可以通过在查询缓存配置](http://dev.mysql.com/doc/refman/5.1/en/query-cache-configuration.html)中启用查询缓存战利品来缓存 MySQL 中的查询

2.  您可以将 YR、MN、DY、HR、MI、SC 存储在具有数据类型的单个列中，`TIMESTAMP`这将提高索引和按操作分组的性能​​。

# java - 引用另一个类中的类按钮操作

> ID：11631368
> 
> 赞同：0
> 
> 时间：2012-07-24T12:58:15.633
> 
> 标签：java, android, reference

我有一个非常棒的语音输入类。但是，我希望我的应用程序的用户能够在应用程序的任何页面上使用语音输入代码。我需要做的是在每个 xml 上设置一个按钮，允许我使用我的语音输入代码，而不必将我的所有语音输入代码复制到每个单独的类中。如何引用我的代码，以便我可以简单地在我的代码中添加一些内容，说明如果我按下此按钮，它会在另一个类中执行该活动？代码顺序如下，voiceinput代码java类，java类我希望能有一个按钮使用这个代码。

```
package com.example.com.proto1;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

import java.util.ArrayList;
import java.util.List;

/**
 * Sample code that invokes the speech recognition intent API.
 */
public class VoiceRecognition extends Activity implements OnClickListener {

    public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

    public ListView mList;
    public Button speakButton;

    /**
     * Called with the activity is first created.
     */
    @Override
    public void onCreate(Bundle voiceinput) {
        super.onCreate(voiceinput);

        // Inflate our UI from its XML layout description.
        setContentView(R.layout.voice_recognition);

        // Get display items for later interaction

        voiceinputbuttons();

        // Check to see if a recognition activity is present
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(
                RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
        if (activities.size() != 0) {
            speakButton.setOnClickListener(this);
        } else {
            speakButton.setEnabled(false);
            speakButton.setText("Recognizer not present");
        }
    }

    public void voiceinputbuttons() {
        // TODO Auto-generated method stub
        speakButton = (Button) findViewById(R.id.btn_speak);
        mList = (ListView) findViewById(R.id.list);
    }

    /**
     * Handle the click on the start recognition button.
     */
    public void onClick(View v) {
        if (v.getId() == R.id.btn_speak) {
            startVoiceRecognitionActivity();
        }
    }

    /**
     * Fire an intent to start the speech recognition activity.
     */
    public void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
                "Speech recognition demo");
        startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    }

    /**
     * Handle the results from the recognition activity.
     */
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == VOICE_RECOGNITION_REQUEST_CODE
                && resultCode == RESULT_OK) {
            // Fill the list view with the strings the recognizer thought it
            // could have heard
            ArrayList<String> matches = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, matches));
            //matches is the result of voice input. It is a list of what the user possibly said.
            //Using an if statement for the keyword you want to use allows the use of any activity if keywords match
            //it is possible to set up multiple keywords to use the same activity so more than one word will allow the user 
            //to use the activity (makes it so the user doesn't have to memorize words from a list)
            //to use an activity from the voice input information simply use the following format;
            //if (matches.contains("keyword(s) here") {  startActivity(new Intent("name.of.manifest.ACTIVITY")

            if (matches.contains("information")) {
                startActivity(new Intent("android.intent.action.INFOSCREEN"));
            }

            if (matches.contains("home")) {
                startActivity(new Intent("android.intent.action.MENU"));
            }

        }

        super.onActivityResult(requestCode, resultCode, data);

    }
}

package com.example.com.proto1;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.speech.RecognizerIntent;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.speech.tts.TextToSpeech;
import java.util.ArrayList;
import java.util.List;

public class menu extends Activity implements TextToSpeech.OnInitListener {

    MediaPlayer sep, aep, vpm;

    TextToSpeech mTts;

    public void onInit(int i) {
        // TODO Auto-generated method stub
        mTts.speak("EyePhone Main Menu", TextToSpeech.QUEUE_FLUSH, null);

    }

    @Override
    protected void onCreate(Bundle aboutmenu) {
        // TODO Auto-generated method stub
        super.onCreate(aboutmenu);
        setContentView(R.layout.mainx);

        // Setting up the button references
        Button info = (Button) findViewById(R.id.aboutbutton);
        Button voice = (Button) findViewById(R.id.voicebutton);
        Button speakButton = (Button) findViewById(R.id.btn_speak);

        info.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("android.intent.action.INFOSCREEN"));

            }
        });

        voice.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {
                    Intent voiceIntent = new Intent(
                            "android.intent.action.RECOGNITIONMENU");
                    startActivity(voiceIntent);
                } catch (Exception e) {

                }
            }
        });

        speakButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {

                    //this is the place where I thought the code should go that I am asking about

                } catch (Exception e) {

                }
            }

        });

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:08:51.173

Define a `STATIC` method in a new class file (lets say `TTSHelper`) which takes *Activity* reference as parameter (and others if required). Now call this static method from the **onClick** method of your button. Doing so will allow you not to repeat the code in each activity class.

Define as:

```
public class TTSHelper {
    public static void myMethod(Activity activity){
        //do whatever you want
    }
} 
```

Use as:

```
public void onClick(View v) {
    TTSHelper.meMethod(this);
} 
```

P.S. You may replace reference of Activity with Context as a parameter to your static method, but then you should be aware of which context reference you need to pass (activity/application).

# java - 为什么 Eclipse Juno 4.2 运行“JPA Java Change Event Handler”进程？

> ID：11631371
> 
> 赞同：64
> 
> 时间：2012-07-24T12:58:21.383
> 
> 标签：java, eclipse, jpa, eclipse-juno

我刚刚升级到 Eclipse Juno 4.2。我有一个全新的工作区，但是导入了以前在 Eclipse 3.7 中使用过的项目，因此其中包含一些 Eclipse 元数据。

当移动到 4.2 时，我将一个项目转换为使用“Project Facets”。唯一启用的 Facet 是“Java”。

但是，我的进度视图中经常出现“JPA Java Change Event Handler (Waiting)”。我在项目中确实有 JPA 注释类，但我没有启用 JPA 方面。

那么......为什么我让这些任务由 Eclipse 运行？

![eclipse进度窗口截图](../Images/f269079df4ff51f8ceb2a96573c83d9b.png)

*更新：*已经向 Eclipse 提交了错误，并且正在通过它的外观来查看它：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=386171](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386171)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-30T16:09:26.853

不幸的是，JPA java 完成建议扩展点错误地强制 oejpt.jpa.core 插件激活。一旦我们的插件被激活，我们就开始监听 java 事件和 facet 事件，无论是否 JPA faceted。在 Juno 中，这些后台线程被转换为 Eclipse Jobs 框架。在 Helios 中，您不会在进度视图中看到它们，但存在同样的问题。

感谢您针对此问题输入针对 Dali [https://bugs.eclipse.org/bugs/show_bug.cgi?id=386171](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386171)的错误。

*更新*：Juno SR1 的错误已修复，感谢 JDT Text 快速解决这个 Dali 错误！

**更新 2**：其他用例仍然存在此问题。在 Juno SR2 中，有 3 个错误正在解决，这将有助于解决此问题。其中一些有进一步的修复，需要在 Kepler 中进行。查看错误：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=397778](https://bugs.eclipse.org/bugs/show_bug.cgi?id=397778)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=397606](https://bugs.eclipse.org/bugs/show_bug.cgi?id=397606)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=386393](https://bugs.eclipse.org/bugs/show_bug.cgi?id=386393)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-18T12:51:06.940

每当我禁用`JPA Validator`in时，我都会遇到这种行为`Window => Preferences => Validation`。为两者启用它`Build`并使`Manual`疯狂的循环消失。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-25T02:49:39.093

我发现（在*仍然*发生这种情况的 Eclipse Neon 中）删除 JPA Validator 中的所有组效果很好。单击 JPA Validator 右侧的框并删除所有包含的组：

[![在此处输入图像描述](../Images/89b9aa1e100009ef52be7ab9ca9f58de.png)](https://i.stack.imgur.com/Zl1DR.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-02T12:03:05.920

在我的情况下，激进的解决方案是卸载“Dali JPA”。这似乎为我解决了这个问题。

当然，这不是最好的解决方案。首先尝试启用验证，如 NPE 的 anwser 中所述。错误 386171 有人在 2015 年 5 月报告了同样的问题，所以我一定不是唯一一个。

如果发现更好的东西，我会很乐意删除我的答案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-17T18:56:15.677

```
set eclipse_dir=D:\eclipse\release

mkdir %eclipse_dir%\disabled
mkdir %eclipse_dir%\disabled\features 
mkdir %eclipse_dir%\disabled\plugins

move %eclipse_dir%\plugins\org.eclipse.jpt.* disabled\plugins

for /f %%i in ('dir features\org.eclipse.jpt.*" /ad /b') do (
    move features\%%i" "%eclipse_dir%\disabled\features\%%i"
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-17T09:05:22.853

我遇到了同样的问题，我在 eclipse 4.5.2（mars 2）中遇到了同样的问题。我已经尝试了stackoverflow的几乎所有答案，调整了我的eclipse设置（我认为这可能是一个性能问题）。

在每个项目属性的项目构面中禁用 JPA 后问题停止。

[![在此处输入图像描述](../Images/21d3ad5420a0a5e7fbd9dabc3282cef1.png)](https://i.stack.imgur.com/xXdmv.png)

在此更改之后，Eclipse 不断对 JPA 事件处理程序大喊大叫，但完成保存或清理并不需要很长时间，所以它看起来像是被禁用了（在更改此之前大约需要 10 分钟才能完成，现在只需几秒钟）

希望能帮助某人解决这个问题。

[![在此处输入图像描述](../Images/515c8684134d0e9e90d1e8ada61b9579.png)](https://i.stack.imgur.com/4TnTD.png)

# objective-c - 没有主从模板的核心数据

> ID：11631379
> 
> 赞同：2
> 
> 时间：2012-07-24T12:58:47.217
> 
> 标签：objective-c, ios, xcode, cocoa

我想创建一个使用 Core Data 的 iphone 应用程序。据我了解，只有主从应用程序模板为我提供了使用 Core Data 的选项。但它会创建表格视图。

我想要使​​用的是视图控制器而不是表视图控制器。我无法将核心数据与单视图应用程序模板一起使用..

我应该遵循哪种方式来克服这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:11:45.803

你应该意识到 CoreData 是一个框架，它没有绑定到任何 UIKit 组件，如 UITableView。您可以在任何类型的应用程序中自由使用它。您所要做的就是创建管理 CoreData 操作的单例类并将 CoreData.framework 添加到您的项目中。

这是我的 DataAccessLayer 模板：

数据访问层.h

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
@interface DataAccessLayer : NSObject

@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (strong, nonatomic) NSPersistentStoreCoordinator *storeCoordinator;

+ (DataAccessLayer *)sharedInstance;
- (void)saveContext;

@end 
```

数据访问层.m

```
#import "DataAccessLayer.h"
@interface DataAccessLayer ()
- (NSURL *)applicationDocumentsDirectory;
@end

@implementation DataAccessLayer
@synthesize storeCoordinator;
@synthesize managedObjectModel;
@synthesize managedObjectContext;

+ (DataAccessLayer *)sharedInstance {
  __strong static DataAccessLayer *sharedInstance = nil;
  static dispatch_once_t onceToken;
  dispatch_once(&onceToken, ^{
    sharedInstance = [[DataAccessLayer alloc] init];
    sharedInstance.storeCoordinator = [sharedInstance persistentStoreCoordinator];
    sharedInstance.managedObjectContext = [sharedInstance managedObjectContext];
  });
  return sharedInstance;
}

#pragma mark - Core Data

- (void)saveContext {
  @synchronized(self) {
    NSError *error = nil;
    if (managedObjectContext != nil)
    {
      if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error])
      {
        NSLog(@"error: %@", error.userInfo);
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops!"
                                                        message:@"Something has gone terribly wrong! You need to reinstall the app in order for it to work properly."
                                                       delegate:nil
                                              cancelButtonTitle:@"Close."
                                              otherButtonTitles:nil, nil];
        [alert show];
      } 
    }
  }
}

#pragma mark Core Data stack

/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *)managedObjectContext {
  if (managedObjectContext != nil)
  {
    return managedObjectContext;
  }

  if (storeCoordinator != nil)
  {
    managedObjectContext = [[NSManagedObjectContext alloc] init];
    [managedObjectContext setPersistentStoreCoordinator:storeCoordinator];
  }
  return managedObjectContext;
}

/**
 Returns the managed object model for the application.
 If the model doesn't already exist, it is created from the application's model.
 */
- (NSManagedObjectModel *)managedObjectModel {
  if (managedObjectModel != nil)
  {
    return managedObjectModel;
  }
  NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DataModel" withExtension:@"momd"];
  managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];    
  return managedObjectModel;
}

/**
 Returns the persistent store coordinator for the application.
 If the coordinator doesn't already exist, it is created and the application's store added to it.
 */
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
  if (storeCoordinator != nil)
  {
    return storeCoordinator;
  }

  NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"words_db.sqlite"];

  NSError *error = nil;
  storeCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
  if (![storeCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error])
  {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.

     Typical reasons for an error here include:
     * The persistent store is not accessible;
     * The schema for the persistent store is incompatible with current managed object model.
     Check the error message to determine what the actual problem was.

     If the persistent store is not accessible, there is typically something wrong with the file path. Often, a file URL is pointing into the application's resources directory instead of a writeable directory.

     If you encounter schema incompatibility errors during development, you can reduce their frequency by:
     * Simply deleting the existing store:
     [[NSFileManager defaultManager] removeItemAtURL:storeURL error:nil]

     * Performing automatic lightweight migration by passing the following dictionary as the options parameter: 
     [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

     Lightweight migration will only work for a limited set of schema changes; consult "Core Data Model Versioning and Data Migration Programming Guide" for details.

     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oops!"
                                                    message:@"Something has gone terribly wrong! You need to reinstall the app in order for it to work properly."
                                                   delegate:nil
                                          cancelButtonTitle:@"Close."
                                          otherButtonTitles:nil, nil];
    [alert show];
  }    

  return storeCoordinator;
}

#pragma mark Application's Documents directory

/**
 Returns the URL to the application's Documents directory.
 */
- (NSURL *)applicationDocumentsDirectory {
  return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
}

@end 
```

您还必须创建一个 .xcdatamodeld 文件才能创建您的数据模型对象。并将此处的名称替换为适当的

```
 NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DataModel" withExtension:@"momd"]; 
```

# sqlite - 如何将日期列添加到以当前日期为默认值的表中？

> ID：11631390
> 
> 赞同：7
> 
> 时间：2012-07-24T12:59:20.393
> 
> 标签：sqlite

在哪里可以看到创建后 SQLite 表将具有哪些默认列？我需要一个带有 datetime 的列，它具有将数据添加到表中时的默认时间值。\

现在我正在尝试：

```
ALTER TABLE recipes ADD COLUMN timestamp DATE DEFAULT (datetime('now','localtime')); 
```

我收到以下消息：

```
SQLiteManager: Likely SQL syntax error: ALTER TABLE recipes ADD COLUMN timestamp DATE DEFAULT (datetime('now','localtime')); [ Cannot add a column with non-constant default ]
Exception Name: NS_ERROR_FAILURE
 Exception Message: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE)         [mozIStorageConnection.createStatement] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T13:09:52.227

使用创建表而不是更改表。如果里面有值，你就会遇到这种问题。看

[http://sqlite.1065341.n5.nabble.com/Can-t-insert-timestamp-field-with-value-CURRENT-TIME-td42729.html](http://sqlite.1065341.n5.nabble.com/Can-t-insert-timestamp-field-with-value-CURRENT-TIME-td42729.html)

祝一切顺利

# javascript - 如何过滤输入框中的文本？

> ID：11631392
> 
> 赞同：-1
> 
> 时间：2012-07-24T12:59:22.710
> 
> 标签：javascript, validation

我有这个脚本来接受输入框的某些字符，但我需要修改它。我只想接受字母、数字和一个空格。我怎么能这样做？

```
var r={
'special':/[\W]/g,
'quotes':/['\''&'\"']/g,
'notnumbers':/[^\d]/g
}

function valid(o,w){
o.value = o.value.replace(r[w],'');
} 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:04:07.720

```
[\d*\w*\s{1}] 
```

*   `\d*`零个或多个数字
*   `\w*`零个或多个字母
*   `\s{1}`一个空格字符

将它们放在一个字符类中`[...]`允许它们按任何顺序排列。

这是一个构建和测试正则表达式的[好网站。](http://gskinner.com/RegExr/)

# ajax - ajax 图像加载弹出窗口

> ID：11631398
> 
> 赞同：0
> 
> 时间：2012-07-24T12:59:46.397
> 
> 标签：ajax, popup

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

    <head>

<script type="text/javascript">

function loadXMLDoc()
{

var xmlhttp;

if (window.XMLHttpRequest)

  {// code for IE7+, Firefox, Chrome, Opera, Safari

  xmlhttp=new XMLHttpRequest();

  }

else

  {// code for IE6, IE5

  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

  }

xmlhttp.onreadystatechange=function()

  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)

    {

    window.alert(xmlhttp.responseText);

    }

  }
xmlhttp.open("GET","popup.html",true);

xmlhttp.send();

}
</script>
</head>
<body onload="javascript:loadXMLDoc()">

<div id="myDiv"><h2>AJAX image popup</h2></div>

</body>
</html> 
```

实际上我想在 joomla 页面上使用它，但我无法获得任何扩展来做到这一点，所以我创建了这个脚本，但弹出窗口显示 html 而不是页面代码中的图像。我也尝试直接获取图像，但无法显示。

我想要实现的只是在页面加载时弹出图像。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:05:36.700

通过 JavaScript 功能实现的标准浏览器“弹出”`alert()`无法显示图像。它只是纯文本。

显示包含渲染 HTML 的“弹出窗口”的一种方法是使用[jQuery UI Dialog](http://jqueryui.com/demos/dialog/)。这实质上`div`在页面上创建了一个模态，它在 DOM 范围内模仿“弹出”的功能。它`div`可以包含您想要的任何 HTML：

```
<script>
    $(function() {
        $( "#dialog" ).dialog();
    });
</script>
<div id="dialog" title="Basic dialog">
    <!-- put your markup here -->
</div> 
```

# javascript - 您如何比较客户端日期和服务器日期？

> ID：11631406
> 
> 赞同：3
> 
> 时间：2012-07-24T13:00:10.407
> 
> 标签：javascript, jquery, jsp

我有一个代码可以运行以从日历中选择日期，但我想将其设置`current_date`为上述日历中服务器的日期。并具有`client_date`与`server_date`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:22:52.323

这是可能的。正如其他地方所建议的，您应该将日期转换为字符串，原因有两个：

1.  搜索错误时更容易阅读/理解
2.  客户端和服务器之间的“当前时间”总是不同的

要将当前日期发送到客户端，您可以使用隐藏的表单字段或 AJAX 请求或 Web 服务或 REST 或 JSON 或 JSONP 或......好吧，有太多方法可以做到这一点。

要比较日期，请将字符串转换为`Date`对象，然后使用常用方法来比较它们（`compareTo()`在 Java 中和JavaScript 中的 ,`<`​​ ）。`==``>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:12:01.190

您可以使用以下方式来做到这一点：

在 Java 中

```
public class YourJavaClass{
 public static String getServerDate()
 {
    Calendar cal = Calendar.getInstance();

    return cal.get(Calendar.YEAR) + "-" + cal.get(Calendar.MONTH) + "-" + cal.get(Calendar.DATE);
 }
} 
```

在jsp中

```
$('input.datepicker').datepicker(
{
    minDate : new Date(<%out.print(YourJavaClass.getServerDate());%>)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:05:57.270

一种方法是将当前日期从您的服务器脚本传递到模板，因此当页面呈现时，javascript 可以访问它并进行比较。这有一个明显的问题 - 如果用户将页面保持打开到第二天，则日期将过时。

另一种方法是对后端使用异步调用并从那里获取日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:12:51.323

最简单的方法是将两个日期与会话进行比较，以毫秒为单位。两种语言都为其提供了方法。

**Javascript：**

```
<script type="">
  var myDate = new Date();
  var milliseconds = myDate.getTime();
</script> 
```

**爪哇（JSP）：**

```
<script type="text/javascript">
<%!
    Date myJavaDate = new Date();
    long myJavaMilliseconds = 0L;
    myJavaMilliseconds = myJavaDate.getTime();
%>
 var myJavaMillisondsInJs = <%= myJavaMilliseconds %>;
</script> 
```

/* 在此处放置代码以比较这些日期 */

如果要比较 dateas 服务器端，则必须通过 Ajax 或表单将 javatime 提交到服务器。

# android - 安卓。片段 getActivity() 有时返回 null

> ID：11631408
> 
> 赞同：197
> 
> 时间：2012-07-24T13:00:13.950
> 
> 标签：android, android-fragments, android-activity, android-asynctask, nullpointerexception

在开发人员控制台错误报告中，有时我会看到带有 NPE 问题的报告。我不明白我的代码有什么问题。在模拟器上，我的设备应用程序在没有强制关闭的情况下运行良好，但是当调用 getActivity() 方法时，一些用户在片段类中得到 NullPointerException。

活动

```
pulic class MyActivity extends FragmentActivity{

    private ViewPager pager; 
    private TitlePageIndicator indicator;
    private TabsAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        pager = (ViewPager) findViewById(R.id.pager);
        indicator = (TitlePageIndicator) findViewById(R.id.indicator);
        adapter = new TabsAdapter(getSupportFragmentManager(), false);

        adapter.addFragment(new FirstFragment());
        adapter.addFragment(new SecondFragment());
        indicator.notifyDataSetChanged();
        adapter.notifyDataSetChanged();

        // push first task
        FirstTask firstTask = new FirstTask(MyActivity.this);
        // set first fragment as listener
        firstTask.setTaskListener((TaskListener) adapter.getItem(0));
        firstTask.execute();
    }

    indicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener()  {
        @Override
        public void onPageSelected(int position) {
            Fragment currentFragment = adapter.getItem(position);
            ((Taskable) currentFragment).executeTask();
        }

        @Override
        public void onPageScrolled(int i, float v, int i1) {}

        @Override
        public void onPageScrollStateChanged(int i) {}
    });
} 
```

异步任务类

```
public class FirstTask extends AsyncTask{

    private TaskListener taskListener;

    ...

    @Override
    protected void onPostExecute(T result) {
        ... 
        taskListener.onTaskComplete(result);
    }   
} 
```

片段类

```
public class FirstFragment extends Fragment immplements Taskable, TaskListener{

    public FirstFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.first_view, container, false);
    }

    @Override
    public void executeTask() {
        FirstTask firstTask = new FirstTask(MyActivity.this);
        firstTask.setTaskListener(this);
        firstTask.execute();
    }

    @Override
    public void onTaskComplete(T result) {
        // NPE is here 
        Resources res = getActivity().getResources();
        ...
    }
} 
```

当应用程序从后台恢复时，可能会发生此错误。在这种情况下，我应该如何正确处理这种情况？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-10-17T17:57:04.523

看来我找到了解决问题的方法。[这里](https://stackoverflow.com/a/9646622/423868)和[这里](https://stackoverflow.com/a/9745935/423868)给出了很好的解释。这是我的例子：

```
pulic class MyActivity extends FragmentActivity{

private ViewPager pager; 
private TitlePageIndicator indicator;
private TabsAdapter adapter;
private Bundle savedInstanceState;

 @Override
public void onCreate(Bundle savedInstanceState) {

    .... 
    this.savedInstanceState = savedInstanceState;
    pager = (ViewPager) findViewById(R.id.pager);;
    indicator = (TitlePageIndicator) findViewById(R.id.indicator);
    adapter = new TabsAdapter(getSupportFragmentManager(), false);

    if (savedInstanceState == null){    
        adapter.addFragment(new FirstFragment());
        adapter.addFragment(new SecondFragment());
    }else{
        Integer  count  = savedInstanceState.getInt("tabsCount");
        String[] titles = savedInstanceState.getStringArray("titles");
        for (int i = 0; i < count; i++){
            adapter.addFragment(getFragment(i), titles[i]);
        }
    }

    indicator.notifyDataSetChanged();
    adapter.notifyDataSetChanged();

    // push first task
    FirstTask firstTask = new FirstTask(MyActivity.this);
    // set first fragment as listener
    firstTask.setTaskListener((TaskListener) getFragment(0));
    firstTask.execute();

}

private Fragment getFragment(int position){
     return savedInstanceState == null ? adapter.getItem(position) : getSupportFragmentManager().findFragmentByTag(getFragmentTag(position));
}

private String getFragmentTag(int position) {
    return "android:switcher:" + R.id.pager + ":" + position;
}

 @Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tabsCount",      adapter.getCount());
    outState.putStringArray("titles", adapter.getTitles().toArray(new String[0]));
}

 indicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            Fragment currentFragment = adapter.getItem(position);
            ((Taskable) currentFragment).executeTask();
        }

        @Override
        public void onPageScrolled(int i, float v, int i1) {}

        @Override
        public void onPageScrollStateChanged(int i) {}
 }); 
```

这段代码的主要思想是，在正常运行应用程序时，您会创建新片段并将它们传递给适配器。当您恢复应用程序片段管理器时，您已经拥有该片段的实例，您需要从片段管理器获取它并将其传递给适配器。

**更新**

此外，在调用 getActivity() 之前使用片段检查 isAdded 是一个很好的做法。当片段与活动分离时，这有助于避免空指针异常。例如，一个活动可能包含一个推送异步任务的片段。任务完成后，将调用 onTaskComplete 侦听器。

```
@Override
public void onTaskComplete(List<Feed> result) {

    progress.setVisibility(View.GONE);
    progress.setIndeterminate(false);
    list.setVisibility(View.VISIBLE);

    if (isAdded()) {

        adapter = new FeedAdapter(getActivity(), R.layout.feed_item, result);
        list.setAdapter(adapter);
        adapter.notifyDataSetChanged();
    }

} 
```

如果我们打开fragment，push一个task，然后快速按回返回上一个activity，当task完成后，它会通过调用getActivity()方法尝试访问onPostExecute()中的activity。如果活动已经分离并且此检查不存在：

```
if (isAdded()) 
```

然后应用程序崩溃。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-06T11:05:10.030

摆脱这种情况的最好方法是在`onAttach`调用时保留活动引用并在需要时使用活动引用，例如

```
@Override
public void onAttach(Context context) {
    super.onAttach(context);
    mContext = context;
}

@Override
public void onDetach() {
    super.onDetach();
    mContext = null;
} 
```

已编辑，因为`onAttach(Activity)`已折旧，现在`onAttach(Context)`正在使用

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-09-24T09:16:40.007

好的，我知道这个问题实际上已经解决了，但我决定分享我的解决方案。我为我创建了抽象父类`Fragment`：

```
public abstract class ABaseFragment extends Fragment{

    protected IActivityEnabledListener aeListener;

    protected interface IActivityEnabledListener{
        void onActivityEnabled(FragmentActivity activity);
    }

    protected void getAvailableActivity(IActivityEnabledListener listener){
        if (getActivity() == null){
            aeListener = listener;

        } else {
            listener.onActivityEnabled(getActivity());
        }
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        if (aeListener != null){
            aeListener.onActivityEnabled((FragmentActivity) activity);
            aeListener = null;
        }
    }

    @Override
    public void onAttach(Context context) {
        super.onAttach(context);

        if (aeListener != null){
            aeListener.onActivityEnabled((FragmentActivity) context);
            aeListener = null;
        }
    }
} 
```

如您所见，我添加了一个侦听器，因此，每当我需要 get`Fragments` `Activity`而不是 standard`getActivity()`时，我都需要调用

```
 getAvailableActivity(new IActivityEnabledListener() {
        @Override
        public void onActivityEnabled(FragmentActivity activity) {
            // Do manipulations with your activity
        }
    }); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-07-14T16:12:20.413

在父 Activity 中的 onStart 之前，不要调用 Fragment 中需要 getActivity() 的方法。

```
private MyFragment myFragment;

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    myFragment = new MyFragment();

    ft.add(android.R.id.content, youtubeListFragment).commit();

    //Other init calls
    //...
}

@Override
public void onStart()
{
    super.onStart();

    //Call your Fragment functions that uses getActivity()
    myFragment.onPageSelected();
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-19T14:45:22.370

我一直在[与这种问题](https://stackoverflow.com/questions/44328669/is-it-safe-to-use-the-applicationcontext-for-a-dialog)作斗争一段时间，我想我已经想出了一个可靠的解决方案。

很难确定它`this.getActivity()`不会返回`null`a `Fragment`，特别是如果您正在处理任何类型的网络行为，这让您的代码有足够的时间来撤回`Activity`引用。

在下面的解决方案中，我声明了一个名为`ActivityBuffer`. 本质上，这`class`涉及维护对拥有的可靠引用`Activity`，并承诺只要有有效的引用可用，就会`Runnable`在有效的上下文中执行 s 。`Activity`如果`Runnable`s 可用，则立即安排在 UI 线程上`Context`执行，否则将延迟执行，直到`Context`准备好。

```
/** A class which maintains a list of transactions to occur when Context becomes available. */
public final class ActivityBuffer {

    /** A class which defines operations to execute once there's an available Context. */
    public interface IRunnable {
        /** Executes when there's an available Context. Ideally, will it operate immediately. */
        void run(final Activity pActivity);
    }

    /* Member Variables. */
    private       Activity        mActivity;
    private final List<IRunnable> mRunnables;

    /** Constructor. */
    public ActivityBuffer() {
        // Initialize Member Variables.
        this.mActivity  = null;
        this.mRunnables = new ArrayList<IRunnable>();
    }

    /** Executes the Runnable if there's an available Context. Otherwise, defers execution until it becomes available. */
    public final void safely(final IRunnable pRunnable) {
        // Synchronize along the current instance.
        synchronized(this) {
            // Do we have a context available?
            if(this.isContextAvailable()) {
                // Fetch the Activity.
                final Activity lActivity = this.getActivity();
                // Execute the Runnable along the Activity.
                lActivity.runOnUiThread(new Runnable() { @Override public final void run() { pRunnable.run(lActivity); } });
            }
            else {
                // Buffer the Runnable so that it's ready to receive a valid reference.
                this.getRunnables().add(pRunnable);
            }
        }
    }

    /** Called to inform the ActivityBuffer that there's an available Activity reference. */
    public final void onContextGained(final Activity pActivity) {
        // Synchronize along ourself.
        synchronized(this) {
            // Update the Activity reference.
            this.setActivity(pActivity);
            // Are there any Runnables awaiting execution?
            if(!this.getRunnables().isEmpty()) {
                // Iterate the Runnables.
                for(final IRunnable lRunnable : this.getRunnables()) {
                    // Execute the Runnable on the UI Thread.
                    pActivity.runOnUiThread(new Runnable() { @Override public final void run() {
                        // Execute the Runnable.
                        lRunnable.run(pActivity);
                    } });
                }
                // Empty the Runnables.
                this.getRunnables().clear();
            }
        }
    }

    /** Called to inform the ActivityBuffer that the Context has been lost. */
    public final void onContextLost() {
        // Synchronize along ourself.
        synchronized(this) {
            // Remove the Context reference.
            this.setActivity(null);
        }
    }

    /** Defines whether there's a safe Context available for the ActivityBuffer. */
    public final boolean isContextAvailable() {
        // Synchronize upon ourself.
        synchronized(this) {
            // Return the state of the Activity reference.
            return (this.getActivity() != null);
        }
    }

    /* Getters and Setters. */
    private final void setActivity(final Activity pActivity) {
        this.mActivity = pActivity;
    }

    private final Activity getActivity() {
        return this.mActivity;
    }

    private final List<IRunnable> getRunnables() {
        return this.mRunnables;
    }

} 
```

在其实现方面，我们必须注意应用*生命周期*方法以与上述[Pawan M](https://stackoverflow.com/users/648030/pawan-m)描述的行为相一致：

```
public class BaseFragment extends Fragment {

    /* Member Variables. */
    private ActivityBuffer mActivityBuffer;

    public BaseFragment() {
        // Implement the Parent.
        super();
        // Allocate the ActivityBuffer.
        this.mActivityBuffer = new ActivityBuffer();
    }

    @Override
    public final void onAttach(final Context pContext) {
        // Handle as usual.
        super.onAttach(pContext);
        // Is the Context an Activity?
        if(pContext instanceof Activity) {
            // Cast Accordingly.
            final Activity lActivity = (Activity)pContext;
            // Inform the ActivityBuffer.
            this.getActivityBuffer().onContextGained(lActivity);
        }
    }

    @Deprecated @Override
    public final void onAttach(final Activity pActivity) {
        // Handle as usual.
        super.onAttach(pActivity);
        // Inform the ActivityBuffer.
        this.getActivityBuffer().onContextGained(pActivity);
    }

    @Override
    public final void onDetach() {
        // Handle as usual.
        super.onDetach();
        // Inform the ActivityBuffer.
        this.getActivityBuffer().onContextLost();
    }

    /* Getters. */
    public final ActivityBuffer getActivityBuffer() {
        return this.mActivityBuffer;
    }

} 
```

最后，在您对调用不信任的任何区域中`Fragment`，`BaseFragment`只需`getActivity()`调用`this.getActivityBuffer().safely(...)`并声明`ActivityBuffer.IRunnable`任务！

然后保证您的内容`void run(final Activity pActivity)`沿着 UI 线程执行。

然后`ActivityBuffer`可以按如下方式使用：

```
this.getActivityBuffer().safely(
  new ActivityBuffer.IRunnable() {
    @Override public final void run(final Activity pActivity) {
       // Do something with guaranteed Context.
    }
  }
); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-14T16:04:25.340

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    // run the code making use of getActivity() from here
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-03T15:20:05.743

我知道这是一个老问题，但我认为我必须提供我的答案，因为我的问题没有被其他人解决。

首先：我正在使用 fragmentTransactions 动态添加片段。第二：我的片段是使用 AsyncTasks（服务器上的数据库查询）修改的。第三：我的片段在活动开始时未实例化第四：我使用自定义片段实例化“创建或加载它”来获取片段变量。第四：活动因方向变化而重新创建

问题是由于查询答案，我想“删除”片段，但片段之前被错误地创建。我不知道为什么，可能是因为稍后完成了“提交”，当需要删除它时，还没有添加片段。因此 getActivity() 返回 null。

解决方案：1）我必须在创建新片段之前检查我是否正确地尝试找到片段的第一个实例 2）我必须将 serRetainInstance(true) 放在该片段上，以便通过方向更改保持它（没有回栈需要因此没问题） 3）而不是在“删除它”之前“重新创建或获取旧片段”，我直接将片段放在活动开始处。在活动开始时实例化它而不是在删除之前“加载”（或实例化）片段变量可以防止 getActivity 问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-23T16:55:01.137

在 Kotlin 中，您可以尝试这种方式来处理 getActivity() null 条件。

```
 activity?.let { // activity == getActivity() in java

        //your code here

   } 
```

它将检查活动是否为空，如果不为空，则执行内部代码。

# php - 与 FTP 服务器同步文件

> ID：11631409
> 
> 赞同：2
> 
> 时间：2012-07-24T13:00:20.573
> 
> 标签：php, ftp, web-deployment

我在 BigRock.com 有一个带有 FTP 服务器的网站。我的问题是，无论何时进行部署，我都必须手动搜索并找到所有需要更改的文件。现在项目越来越大，进行这些更改占用了我很多宝贵的时间。

那么是否有任何软件/工具可用于与 FTP 服务器同步并根据本地所做的更改更改文件？我不确定 FileZilla 客户端，因为我在其中找不到太多选项。我很确定会有一些解决方案。我的项目是在 Zend 框架中使用 Doctrine ORM 和许多其他库完成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:58:01.600

如果您需要从本地文件到服务器的单向同步，可以查看这个免费工具：http: [//sourceforge.net/p/phpfilesync/wiki/Home/](http://sourceforge.net/p/phpfilesync/wiki/Home/)

它的安装或使用再简单不过了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:34:57.563

尝试**[Allway 同步](http://allwaysync.com/)**

它使用创新的同步算法在台式电脑、笔记本电脑、USB 驱动器、远程 FTP/SFTP 服务器、不同的在线数据存储等之间同步您的数据。支持加密档案。Allway Sync 结合了防弹的可靠性和极其易于使用的界面。

网址[http://allwaysync.com/](http://allwaysync.com/)

我亲自尝试过对于 ftp 和本地文件同步工作正常。而且它是免费的..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:10:34.640

使用 Assembla，我在其中找到了 FTP 工具。

这是参考链接，

[http://blog.assembla.com/assemblablog/tabid/12618/bid/78103/Deploying-a-Web-site-is-easy-with-Assembla-s-FTP-tool-Video.aspx](http://blog.assembla.com/assemblablog/tabid/12618/bid/78103/Deploying-a-Web-site-is-easy-with-Assembla-s-FTP-tool-Video.aspx)

它易于锻炼，

1.  使用“管理”选项卡的“工具”部分添加 FTP 工具。
2.  将代码部署到任何安装了 ftp 或 sftp 的服务器。
3.  将部署频率设置为手动（按下按钮）或为每次提交安排自动部署，每小时、每天或每周。
4.  仅部署更改的文件以实现快速准确的部署。
5.  轻松回滚和部署之前的修订。
6.  添加多个服务器用于暂存和生产版本，或者只是将不同的存储库目录部署到不同的位置。

# javascript - 上传前查看图片

> ID：11631414
> 
> 赞同：0
> 
> 时间：2012-07-24T13:00:43.103
> 
> 标签：javascript, jquery, html

我需要在使用 jquery 上传之前显示上传图像，但在 chrome 路径中显示的假路径如下：

```
C:\fakepath\myImage.jpg 
```

在 Firefox 中只显示文件名：

```
myImage.jpg 
```

那么如何在上传之前预览我的图像文件

```
<input type="file">
<img src="" class="preview" /> 
```

**如果那是不可能的.. HTML5 呢？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:37:47.577

我不知道 jQuery 函数（抱歉），但是 HTML5 可以，并且大多数浏览器都支持这个 HTML5 函数。我在 HTML5rocks (1) 中找到了一段代码：

```
<style>
  .thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }
</style>

<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>

<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['<img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>'].join('');
          document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

祝你好运 ：）

* * *

(1) HTML5rocks - 阅读文件：[http ://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:03:01.123

你不能。您需要使用ajax上传图片，例如，返回图片url，最后显示。

# javascript - 在 POST 之前延迟提交

> ID：11631415
> 
> 赞同：3
> 
> 时间：2012-07-24T13:00:55.520
> 
> 标签：javascript, jquery, asp.net, client, submit

我有按钮

```
 <UpdatePanel>
         <asp:Button CssClass="btn-send" runat="server"
              OnClick="SendMessage" Text="Send" />
    </UpdatePanel> 
```

服务器端方法

```
protected void SendMessage(object sender, EventArgs e){...} 
```

我需要在 POST 之前稍作延迟并显示进度条动画。我想为此使用javascript（jquery）。

如何使这个延迟提交
1) 没有服务器延迟
2) 没有带有客户端脚本的第二个按钮，单击服务器按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:20:55.513

你可以试试这样的...

```
<asp:Button runat="server" OnClick="SendMessage" Text="Send"
   OnClientClick="return sendMessage(this);" />

<script type="text/javascript">
  var sendBtn = null;
  function sendMessage(btn){
    if(sendBtn==null){
      sendBtn = btn;
      window.setTimeout(function(){ sendBtn.click(); }, 1000);
      // DO YOUR VISUAL STUFF HERE
      return false;
    }else{
      return true;
    }
  }
</script> 
```

想法是，按钮的点击首先存储按钮对象，设置点击按钮的超时时间，然后做你想做的视觉上的事情。

然后一秒钟后，再次点击按钮（这次不做超时部分）

（我还没有时间学习 jquery，但我确信有一种更简单的方法可以做到这一点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:03:14.100

您可以在没有 jQuery 的情况下执行此操作，只需使用常规 Javascript [setTimeout](http://www.w3schools.com/js/js_timing.asp)即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:14:05.273

您可以捕获`onsubmit`表单，然后在提交（按下按钮）时打开页面的等待消息。所以你在 Page_Load() 上添加这一行

```
Page.Form.Attributes["onsubmit"] = "return AllowFormToRun();"; 
```

和javascript：

```
<script>
    function AllowFormToRun()
    {
        setTimeout(OpenWaitMsg, 10);
        return true; 
    }

    function OpenWaitMsg()
    {
        // open here the wait div 
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:35:44.877

您应该`Event.preventDefault()`在提交按钮上单击以防止页面在单击时提交。然后开始你的进度动画，当它完成时，从js调用你的表单提交。

```
$("form").submit(function(e){
  var form = this;
  e.preventDefault();
  function animation(total,callback){
    //perform your animation
    callback();
  };

  animation(100,function(){
    form.submit();
  });
}); 
```

# c# - 如何使用城市（“l”）参数创建 LDAP 过滤器

> ID：11631425
> 
> 赞同：0
> 
> 时间：2012-07-24T13:01:34.800
> 
> 标签：c#, asp.net, active-directory, ldap, directoryentry

我编写了一个从 Active Directory 获取数据的程序，我需要一个 LDAP 过滤器将数据过滤为 l（城市）参数。

我的代码：

```
public void SearchByCity(string city)
        {
                                                         //What I must do :(
            DirectoryEntry Entry = new DirectoryEntry("LDAP://<l= + city + >");
            string filter = "(&(objectClass=user)(objectCategory=person)(cn=*))";
            DirectorySearcher Searcher = new DirectorySearcher(Entry, filter);

            var q = from s in Searcher.FindAll().OfType<SearchResult>()
                    select new
                    {
                        Benutzer = GetProperty(s, "sAMAccountName"),
                        eMail = GetProperty(s, "mail"),
                        Vorname = GetProperty(s, "givenName"),
                        Nachname = GetProperty(s, "sn"),
                        Telefon = GetProperty(s, "telephoneNumber"),
                        UserID = s.GetDirectoryEntry().Guid
                    };

            this.myListView.DataSource = q;
            this.myListView.DataBind();
        } 
```

塔拉索夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:07:29.043

解决方案：

```
public void SearchByPlace(string city)
        {
            DirectoryEntry Entry = new DirectoryEntry("LDAP://" + Properties.Settings.Default.Domain);
            string filter = "(&(objectClass=user)(objectCategory=person)(l=" + city + ")(cn=*))";
            DirectorySearcher Searcher = new DirectorySearcher(Entry, filter);

            var q = from s in Searcher.FindAll().OfType<SearchResult>()
                    select new
                    {
                        Benutzer = GetProperty(s, "sAMAccountName"),
                        eMail = GetProperty(s, "mail"),
                        Vorname = GetProperty(s, "givenName"),
                        Nachname = GetProperty(s, "sn"),
                        Telefon = GetProperty(s, "telephoneNumber"),
                        UserID = s.GetDirectoryEntry().Guid
                    };

            this.myListView.DataSource = q;
            this.myListView.DataBind();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T11:48:47.800

使用这个过滤器

```
(&(objectCategory=person)(objectClass=user)(!sAMAccountType=805306370)(l=yourcity)) 
```

# c++ - 错误：无法将参数 '1' 的 'std::string' 转换为 'X509*' 到 'EVP_PKEY* X509_get_pubkey(X509*)'

> ID：11631428
> 
> 赞同：0
> 
> 时间：2012-07-24T13:01:41.773
> 
> 标签：c++, ssl, openssl, ssl-certificate

我想验证证书的格式是否有效，所以我写了这段代码，但似乎有错误

```
if (validConfigFile()) {    
    INIReader reader(CONFIG_FILE);
    string certFile= reader.Get("Server", "cert-file", "None");
    if (certFile == "None") {
        syslog(LOG_ERR, "cert-file in configuration file is not properly adjusted");
        exit(EXIT_FAILURE); }
    else {
        std::string fileName(certFile);
        ifstream fin(fileName.c_str());
        if(fin.fail()) {
            syslog(LOG_ERR, "cert-file not found in its file path");
            exit(EXIT_FAILURE); }
        else {
            OpenSSL_add_all_digests();
            SSL_CTX *sslctx = SSL_CTX_new(SSLv23_server_method());
            SSL_CTX_use_certificate_file(sslctx, certFile, SSL_FILETYPE_PEM);
            SSL *ssl = SSL_new(sslctx);
            X509 *CERT = SSL_get_certificate(ssl);
            if (X509_verify(CERT,X509_get_pubkey(CERT)) == -1) {
                syslog(LOG_ERR, "cert-file not valid");
                exit(EXIT_FAILURE); }
        }
    }
} 
```

编译时出现此错误

```
/main.cpp:68: error: cannot convert ‘std::string’ to ‘const char*’ for argument ‘2’ to ‘int SSL_CTX_use_certificate_file(SSL_CTX*, const char*, int)’ 
```

并且

```
main.cpp:70: error: expected unqualified-id before ‘char’ for that line  : X509 *CERT = SSL_get_certificate(ssl); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:04:05.503

std::string 没有隐式转换为 char* （C 风格的字符串），因此请改用该方法`c_str()`：

```
SSL_CTX_use_certificate_file(sslctx, certFile.c_str(), SSL_FILETYPE_PEM); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:03:53.413

改变

```
SSL_CTX_use_certificate_file(sslctx, certFile, SSL_FILETYPE_PEM); 
```

进入

```
SSL_CTX_use_certificate_file(sslctx, certFile.c_str(), SSL_FILETYPE_PEM); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T13:04:08.843

尝试使用`c_str()`

```
 SSL_CTX_use_certificate_file(sslctx, certFile.c_str(), SSL_FILETYPE_PEM);
                                                ^
                                                ^ 
```

而是`char*`从`string`

# c# - 根据名称选择性删除文件夹中的文件

> ID：11631430
> 
> 赞同：-1
> 
> 时间：2012-07-24T13:01:56.407
> 
> 标签：c#

我想知道（使用 c#）如何删除某个目录中名称包含 *mhz.prj 的文件。

事实上，这个文件夹中有几个文件，例如我只想删除 Amhz.prj Bmhz.prj。我的问题是文件名的结尾很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:44:42.890

这将循环`C:\MyDir`并删除任何扩展名为`prj`.

```
foreach(var file in Directory.GetFiles(@"C:\MyDir", "*.prj"))
{
    File.Delete(Path.GetFullPath(file));
} 
```

# c++ - 声明与实例化

> ID：11631431
> 
> 赞同：2
> 
> 时间：2012-07-24T13:01:57.203
> 
> 标签：c++, oop

来自Java，我对下面的代码有困难。在我的理解 b 只是在第 3 行声明但没有实例化。

在 A 类中创建 B 实例的教科书方法是什么？

```
class A {
  private:
    B b;
  public:
    A() { 
      //instantiate b here?
    }
}; 
```

编辑：如果 B 没有默认构造函数怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T13:04:11.163

例如，您可以`b`在`A`构造函数的初始化列表中显式初始化

```
class A {
  B b; // private
 public:
  A : b() {} // the compiler provides the equivalent of this if you don't
}; 
```

但是，`b`无论如何都会自动实例化。`B`如果您需要使用非默认构造函数构建 a ，或者`B`无法默认初始化，则上述内容是有意义的：

```
class A {
  B b; // private
 public:
  A : b(someParam) {}
}; 
```

在构造函数的初始化列表中可能无法正确初始化，在这种情况下，可以在构造函数的主体中进行*赋值：*

```
class A {
  B b; // private
 public:
  A {
    b = somethingComplicated...; // assigns new value to default constructed B.
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:05:20.573

您已经在第 3 行创建了一个实例`b` 。这一行足以调用 B 的构造函数。如果你有这样的代码

```
class A {
  private:
    B *b;
  public:
    A() { 
      //instantiate b here?
    }
}; 
```

那么`b`在`A's`构造函数中实例化就像

```
A()
 { 
    b = new B();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:22:16.977

您正在寻找的正确阶段是“C++ 初始化列表”。在调用构造函数之前调用/初始化此初始化列表

在默认构造函数的情况下，编译器等效构造函数将是`A() : B() {}`

一个很好的参考 [http://www.cprogramming.com/tutorial/initialization-lists-c++.html](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:22:22.667

在第 3 行，它只是 B 的声明。但是在您的代码中的某处，您有：

`A a;`

或者

```
A a(); 
```

这调用了 A 的构造函数。内部 b 私有成员已满或垃圾，如未初始化。您是正确的，因为您可以并且可能应该在可能的情况下在构造期间初始化成员变量。有两种方法可以做到这一点：

```
A () 
{
   b = B ();
} 
```

就像你所说：

或者

```
A () : b (B())
{
} 
```

第二个版本（初始化列表）稍微高效一些，因为它直接在 b 内部创建新的 B 对象。而第一个版本创建一个临时的，然后将其移动到 b。无论如何，当您从传入的参数初始化成员时就是这种情况（对于非内置类型）。在这种情况下，我假设它是相同的，但有人将能够澄清。

# javascript - 使样式影响整行

> ID：11631434
> 
> 赞同：0
> 
> 时间：2012-07-24T13:02:01.010
> 
> 标签：javascript, jquery

在我的文字游戏中，当正确的字母拼出单词时，它会随着“wordglow2”消失。目前它对这个词是这样做的。如果我想让整行在拼写正确的单词时消失，我该怎么做？

```
$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));
    console.log($(event));
    console.log($(ui.draggable).text());

    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }
    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass("wordglow2");

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");
            guesses[word].splice(0, guesses[word].length);
        }
    } 
```

我本来应该是这样的，但它没有用......

```
 if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + 'td' + ']').addClass("wordglow2"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:26:51.983

根据评论：

目前，您将拥有

```
.wordglow2 { background: red; } 
```

更新它，使其读取

```
.wordglow2 td { background: red; } 
```

然后更新你的 jQuery 代码，这样就可以了

```
$('td[data-word=' + word + ']').parent().addClass("wordglow2"); 
```

然后，这会将背景颜色应用于行内的所有单元格。

# linq - LINQ 和实体框架：连接 NULL 值的问题

> ID：11631436
> 
> 赞同：2
> 
> 时间：2012-07-24T13:02:04.987
> 
> 标签：linq, entity-framework

我有一个名为 TradeNo 的 INT 字段，它可能包含 NULL 值。要求是在下拉菜单中显示“合约 ID”和括号中的“交易编号”，如果“交易编号”为空，则显示 N/A。

```
Example:
44444 (2222)
55555 ( N/A ) 
```

这是我认为可行的方法。这是我返回 SelectList 的函数

```
public IEnumerable<SelectListItem> GetContractsBySupplierDropDown(string supplier)
{
    var result = from c in context.Contracts 
                     where c.Supplier==supplier 
                     orderby c.ContractID
                     select new { 
                            Text = c.ContractID.ToString() + " (" + 
                                   (c.TradeNo.HasValue  ? 
                                       c.TradeNo.Value.ToString() : 
                                       " N/A ").ToString() + 
                                    " )", 
                            Value = c.ContractID };

    return new SelectList(result, "Text", "Value"); 
} 
```

返回的错误是：

```
LINQ to Entities does not recognize the method 'System.String ToString()'
method, and this method cannot be translated into a store expression. 
```

据我所知，显示的错误意味着 EF 正在尝试将 ToString 转换为数据库函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:34:49.427

不幸的是，您不能`ToString`在来自数据库的数字字段中使用。

作为一种解决方法，您可以在执行此操作`ToList`之前进行转换，因此内容在内存中。

```
public IEnumerable<SelectListItem> GetContractsBySupplierDropDown(string supplier)
{
    var query =  from c in context.Contracts 
                 where c.Supplier==supplier 
                 orderby c.ContractID
                 select new {
                     c.ContractID,
                     c.TradeNo,

                 };
    var result = from c in query.ToList()
                 select new { 
                            Text = c.ContractID.ToString() + " (" + 
                                   (c.TradeNo.HasValue  ?
                                       c.TradeNo.Value.ToString() : 
                                       " N/A ") + 
                                    " )", 
                            Value = c.ContractID
                  };

    return new SelectList(result, "Text", "Value");
} 
```

# php - PHP unpack() 的意外行为

> ID：11631437
> 
> 赞同：6
> 
> 时间：2012-07-24T13:02:11.247
> 
> 标签：php, unpack

# 测试

```
$x = sprintf( "foo\x00bar\x00baz" );
$y = unpack( 'afoo/abar/abaz' , $x );
print_r( $y ); 
```

```
$x = sprintf( "foo\x00bar\x00baz" );
$y = unpack( 'a*foo/a*bar/a*baz' , $x );
print_r( $y ); 
```

# 结果

```
大批
(
    [foo] => f
    [酒吧] => o
    [巴兹] => o
)

```

```
大批
(
    [foo] => foobarbaz
    [酒吧] =>
    [巴兹] =>
)

```

*请注意，NULL 字节始终存在，您可以使用`hexdump`.*

# 预期结果

```
大批
(
    [foo] => 富
    [酒吧] => 酒吧
    [巴兹] => 巴兹
)

```

# 笔记

我知道我可以用它`explode`来实现类似的结果。我不是在问替代方案，我只是想了解`a`格式字符背后的逻辑（如文档所说的“NUL-padded string”）。

“NULL”值在哪里涉及到这一切？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:55:10.567

## 原始答案

““NULL”值在哪里涉及到这一切？”

无处。

我很确定 PHP pack()/unpack() 的文档需要更新。基本上，无论您在哪里看到它指的是一个以 NULL 结尾的字符串，该文档都是取自 Perl 版本的代码，而不是 PHP 中发生的事情的反映。

基本上 Perl 有 C 风格的字符串，可以空终止，让您知道字符串的结尾在哪里。在 PHP 中没有 NULL 字符的概念。例如

```
$test1 = "Test".NULL."ing";
$test2 = "Testing";

if(strcmp($test1, $test2) == 0){
    echo "The strings are the same";
}
else{
    echo "They are different.";
} 
```

将打印“字符串相同”。

顺便说一句：“foo\x00bar\x00baz”

可能没有做你认为它正在做的事情。它没有在 foo + bar 之间和 bar + baz 之间的字符串中放置“NULL”字符，因为没有 NULL 字符。相反，它放置了字符“0”，它恰好没有在大多数字符集中打印出来，但作为字符没有特殊含义。

我知道您提到使用 explode 而不是 unpack 但如果您知道字符串长度，那么您可以使用：

```
unpack( 'a3foo/a3bar/a3baz' , $binarydata); 
```

## 为清楚起见添加

赛勒斯写道：

> “NULL byte”是指值为 0 的字节：

我不确定你从哪里得到字符串 "foo\x00bar\x00baz" 但是：

i) 它必须来自支持由零表示的 NULL 字符的语言。PHP 不支持 NULL 字符，如果你调用 pack("A*A*A*", "foo", "bar", "baz"); 它不会生成其中包含零的字符串。

ii) PHP 版本的 unpack 不支持 NULL 字符（因为 PHP 不支持 NULL 字符）并将十六进制值为 0 的字符视为另一个字符。例如

```
function strToHex($string){
    $hex='';
    for ($i=0; $i < strlen($string); $i++)
    {
        $hex .= dechex(ord($string[$i]));
    }
    return $hex;
}

$binarydata = "foo\x00bar\x00baz";

echo "binarydata is ";

var_dump($binarydata);
$y = unpack( 'a3foo/a3bar/a3baz' , $binarydata);
var_dump( $y );

echo strToHex($y['foo'])."\r\n";
echo strToHex($y['bar'])."\r\n";
echo strToHex($y['baz'])."\r\n"; 
```

将输出：

```
binarydata is string(11) "foobarbaz"
array(3) {
  ["foo"]=>
  string(3) "foo"
  ["bar"]=>
  string(3) "ba"
  ["baz"]=>
  string(3) "rb"
}
666f6f
06261
72062 
```

即，它提取值 0x66、0x6f、0x6f 的前三个字符。然后它提取接下来的三个字符，即 0x0、0x62、0x61。最后，它提取值 0x72、0x0、0x62。

# zend-framework - 致命错误：找不到类“Form_BugReport”

> ID：11631440
> 
> 赞同：0
> 
> 时间：2012-07-24T13:02:25.110
> 
> 标签：zend-framework, zend-form

我一直在研究 Apress 的书“Pro Zend Framework Techniques”。我已经达到了尝试在视图上呈现表单的地步。

表单名为`BugReport`，位于`forms/BugReportForm.php`; 这是文件的内容：

```
<?php

class Form_BugReportForm extends Zend_Form
{
   public function init()
   {
      // add element: author textbox
      $author = this->createElement('text', 'author');
      $author->setLabel('Enter your name:');
      $author->setRequired(TRUE);
      $author->setAttrib('size', 30);
      $this->addElement($author);

      // add element: email textbox
      $email = $this->createElement('text', 'email');
      $email->setLabel('Your email address:');
      $email->setRequired(TRUE);
      $email->addValidator(new Zend_Validate_EmailAddress());
      $email->addFilters(array(
         new Zend_Filter_StringTrim(),
         new Zend_Filter_StringToLower()
         ));
      $email = setAttrib('size', 40);
      $this->addElement($email);

      // add element: date textbox
      $date = $this->createElement('text', 'date');
      $date->setLabel('Date the issue occurred (dd-mm-yyyy)');
      $date->setRequired(TRUE);
      $date->addValidator(new Zend_Validate_Date('MM-DD-YYYY'));
      $date->setAttrib('size', 20);
      $this->addElement($date);

      // add element: URL textbox
      $url = $this->createElement('text', 'url');
      $url->setLabel('Issue URL:');
      $url->setRequired(TRUE);
      $url->setAttrib('size', 50);
      $this->addElement($url);

      // add element: description text area
      $description = $this->createElement('textarea', 'description');
      $description->setLabel('Issue description:');
      $description->setRequired(TRUE);
      $description->setAttrib('cols', 50);
      $description->setAttrib('rows', 4);
      $this->addElement($description);

      // add element: priority select box
      $priority = $this->createElement('select', 'priority');
      $priority->setLabel('Issue priority:');
      $priority->setRequired(TRUE);
      $priority->addMultiOptions(array(
         'low'   =>   'Low',
         'med'   =>   'Medium',
         'high'   =>   'High'
         ));
      $this->addElement($priority);

      // add element: status select box
      $status = $this->createElement('select', 'status');
      $status->setLabel('Current status:');
      $status->setRequired(TRUE);
      $status->addMultiOptions(array(
         'new'         =>   'New',
         'in_progress'   =>   'In Progress',
         'resolved'      =>   'Resolved'
         ));
      $this->addElement($status);

      // add element: submit button
      $this->addElement('submit', 'submit', array('label' => 'Submit'));
   }
} 
```

这种形式通过`BugController`位于的控制器控制`/controllers/BugController.php`

```
<?php

class BugController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        // action body
    }

    public function createAction()
    {
        // action body
    }

   public function submitAction()
   {
      $frmBugReport = new Form_BugReport();
      $frmBugReport->setAction('/bug/submit');
      $frmBugReport->setMethod('post');
      $this->view->form = $frmBugReport();
   }

} 
```

最后，我的引导程序中有以下自动加载器。

```
protected function _initAutoload()
{
   // Add autoloader empty namespace
   $autoLoader = Zend_Loader_Autoloader::getInstance();
   $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
      'basePath'      => APPLICATION_PATH,
      'namespace'      => '',
      'resourceTypes'   => array(
         'form'   => array(
            'path'      => 'forms/',
            'namespace'   => 'Form_',
         )
      ),
   ));

   // Return it so it can be stored by the bootstrap
   return $autoLoader;
} 
```

我得到的错误可以在这里看到：http: [//zend.danielgroves.net/bug/submit](http://zend.danielgroves.net/bug/submit)

或者，如果您只想阅读它：Fatal error: Class 'Form_BugReport' not found in /home/www-data/zend.danielgroves.net/htdocs/application/controllers/BugController.php on line 23

关于我做错了什么的任何想法，以及如何解决这个问题？

**编辑**

ArneRie 指出我使用了错误的类名，但不幸的是，这并没有解决问题。这是 BugController 现在的样子：

```
<?php

class BugController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        // action body
    }

    public function createAction()
    {
        // action body
    }

    public function submitAction()
    {
        $frmBugReport = new Form_BugReportForm();
        $frmBugReport->setAction('/bug/submit');
        $frmBugReport->setMethod('post');
        $this->view->form = $frmBugReport;
    }

} 
```

尽管这确实消除了有问题的错误，但一个新的错误已经取代了它。

```
Parse error: syntax error, unexpected T_OBJECT_OPERATOR in /home/www-data/zend.danielgroves.net/htdocs/application/forms/BugReportForm.php on line 8 
```

第8行很有趣`/* Initialize action controller here */`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:24:58.510

你有一个小错字。该错误在您的表单中。您在第 9 行的“this”之前缺少了一个 $。祝您项目的其余部分好运，这对于初学者来说是一本非常好的书，但其中有一些小错误。详情请查看编辑网站：http: [//www.apress.com/9781430218791/](http://www.apress.com/9781430218791/)勘误部分。

```
<?php

class Form_BugReportForm extends Zend_Form
{
   public function init()
   {
      // add element: author textbox
//Next line is the line to change (add a $ before the "this")
      $author = $this->createElement('text', 'author');
      $author->setLabel('Enter your name:');
      $author->setRequired(TRUE);
      $author->setAttrib('size', 30);
      $this->addElement($author); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:15:30.293

试试看：`$frmBugReport = new Form_BugReportForm();`

您使用了错误的类名。

# c# - 通过 OutputDataReceived 事件捕获过程输出

> ID：11631443
> 
> 赞同：55
> 
> 时间：2012-07-24T13:02:26.473
> 
> 标签：c#, process, stdout

我正在尝试“实时”捕获进程输出（在它运行时）。我使用的代码相当简单（见下文）。由于某些奇怪的原因，从未调用 OutputDataReceived 事件。为什么？

```
private void button2_Click(object sender, EventArgs e)
    {
      // Setup the process start info
      var processStartInfo = new ProcessStartInfo("ping.exe", "-t -n 3 192.168.100.1")
      {
        UseShellExecute = false,
        RedirectStandardOutput = true
      };

      // Setup the process
      mProcess = new Process { StartInfo = processStartInfo, EnableRaisingEvents = true };

      // Register event
      mProcess.OutputDataReceived += OnOutputDataReceived;

      // Start process
      mProcess.Start();
      mProcess.WaitForExit();
    }

    void OnOutputDataReceived(object sender, DataReceivedEventArgs e)
    {
       //Never gets called...
    } 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-07-24T14:00:09.220

你需要打电话

```
mProcess.BeginOutputReadLine(); 
```

[BeginOutputReadLine](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline) - “在应用程序的重定向 StandardOutput 流上开始异步读取操作。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-31T21:03:46.157

```
void ExecuteCommand(string cmdpath, string cmdargs)
{
    string command = cmdpath + " " + cmdargs;

    tabc_results.SelectTab(1); 
    DoConsole("\r\nCmd>> " + command + "\r\n");

    var processInfo = new System.Diagnostics.ProcessStartInfo("cmd.exe", "/c " + command);
    processInfo.CreateNoWindow = true;
    processInfo.UseShellExecute = false;
    processInfo.RedirectStandardError = true;
    processInfo.RedirectStandardOutput = true;

    var process = System.Diagnostics.Process.Start(processInfo);

    process.OutputDataReceived += (
        object sender, System.Diagnostics.DataReceivedEventArgs e
    ) => DoConsole("stdout>>  " + e.Data + "\r\n");
    //Console.WriteLine("output>>" + e.Data);
    process.BeginOutputReadLine();

    process.ErrorDataReceived += (
        object sender, System.Diagnostics.DataReceivedEventArgs e
    ) =>DoConsole("stderr>>  " + e.Data + "\r\n");
    //Console.WriteLine("error>>" + e.Data);
    process.BeginErrorReadLine();

    process.WaitForExit();

    DoConsole("retcode>> " + process.ExitCode.ToString() + "\r\n");
    //Console.WriteLine("ExitCode: {0}", process.ExitCode);
    process.Close();
} 
```

# c# - 在 C# 中比较对象的最快方法

> ID：11631445
> 
> 赞同：3
> 
> 时间：2012-07-24T13:02:32.303
> 
> 标签：c#, performance

我正在编写一个验证某些城市的应用程序。验证的一部分是通过匹配国家代码和城市名称（或替代城市名称）来检查城市是否已经在列表中。

我将现有的城市列表存储为：

```
public struct City
{
    public int id;
    public string countrycode;
    public string name;
    public string altName;
    public int timezoneId;
}

List<City> cityCache = new List<City>(); 
```

然后我有一个包含国家代码和城市名称等的位置字符串列表。我拆分这个字符串，然后检查城市是否已经存在。

```
string cityString = GetCity(); //get the city string
string countryCode = GetCountry(); //get the country string
city = new City();             //create a new city object
if (!string.IsNullOrEmpty(cityString)) //don't bother checking if no city was specified
{
    //check if city exists in the list in the same country 
    city = cityCache.FirstOrDefault(x => countryCode == x.countrycode && (Like(x.name, cityString ) || Like(x.altName, cityString )));
    //if no city if found, search for a single match accross any country
    if (city.id == default(int) && cityCache.Count(x => Like(x.name, cityString ) || Like(x.altName, cityString )) == 1)
        city = cityCache.FirstOrDefault(x => Like(x.name, cityString ) || Like(x.altName, cityString ));
}

if (city.id == default(int))
{
    //city not matched
} 
```

这对于很多记录来说非常慢，因为我也在以同样的方式检查其他对象，如机场和国家。有什么办法可以加快速度吗？这种比较有没有比 List<> 更快的集合，有没有比 FirsOrDefault() 更快的比较函数？

**编辑**

我忘了发布我的 Like() 函数：

```
bool Like(string s1, string s2)
    {
        if (string.IsNullOrEmpty(s1) || string.IsNullOrEmpty(s2))
            return s1 == s2;
        if (s1.ToLower().Trim() == s2.ToLower().Trim())
            return true;

        return Regex.IsMatch(Regex.Escape(s1.ToLower().Trim()), Regex.Escape(s2.ToLower().Trim()) + ".");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:13:36.213

我会为 CityString 和 CountryCode 使用 HashSet。就像是

```
var validCountryCode = new HashSet<string>(StringComparison.OrdinalIgnoreCase);
if (validCountryCode.Contains(city.CountryCode))
{
} 
```

ETC...

就我个人而言，我会在构造函数中进行所有验证，以确保仅存在有效的 City 对象。

其他需要注意的性能

1.  如果您在有效列表中查找它，请使用 HashSet。
2.  在适当的情况下使用 IEqualityComparer，重用对象以避免构造/GC 成本。
3.  将字典用于您需要查找的任何内容（例如 timeZoneId）

**编辑 1**

你是 cityCache 可能是这样的，

```
var cityCache = new Dictionary<string, Dictionary<string, int>>();
var countryCode = "";
var cityCode = "";
var id = x;

public static IsCityValid(City c)
{
     return
         cityCache.ContainsKey(c.CountryCode) &&
         cityCache[c.CountryCode].ContainsKey(c.CityCode) &&
         cityCache[c.CountryCode][c.CityCode] == c.Id;  
} 
```

**编辑 2**

不认为我必须解释这一点，但根据评论，也许。

`FirstOrDefault()`是一个 O(n) 操作。基本上每次您试图在列表中查找内容时，您可能是幸运的，它是列表中的第一个，或者是不幸的，它是 list.Count / 2 的平均值。另一方面是字典将是 O(1) 查找。使用 IEqualtiyComparer 它将生成一个 HashCode() 并查找它所在的存储桶。如果只有大量冲突，它将使用 Equals 在同一个存储桶中的事物列表中查找您所追求的内容。即使使用质量差的 HashCode() （总是返回相同的 HashCode），因为`Dictionary`/`HashSet`使用素数存储桶，您会将列表拆分，从而减少您需要完成的 Equalities 的数量。

因此，包含 10 个对象的列表意味着您平均运行 LIKE 5 次。与下面相同的 10 个对象的字典（取决于 HashCode 的质量），可能只有一个`HashCode()`调用，然后是一个`Equals()`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:32:48.300

这听起来像是二叉树的一个很好的候选者。

有关 .NET 中的二叉树实现，请参阅：[表示树的对象](https://stackoverflow.com/questions/1806511/binary-tree-in-c-sharp)

**编辑：**
如果您想快速搜索一个集合，并且该集合特别大，那么您最好的选择是对其进行排序并实现基于该排序的搜索算法。

当您想要快速搜索并相对不频繁地插入项目时，二叉树是一个不错的选择。但是，为了保持快速搜索，您需要使用平衡二叉树。

但是，要使其正常工作，您还需要一个用于您的城市的标准密钥。数字键是最好的，但字符串也可以正常工作。如果您将您的城市与其他信息（例如州和国家/地区）连接起来，您将获得一个很好的唯一键。您还可以将大小写更改为全部大写或小写，以获得不区分大小写的密钥。

如果您没有密钥，则无法对数据进行排序。如果您无法对数据进行排序，那么就不会有很多“快速”选项。

**编辑 2：**
我注意到您的 Like 函数会大量编辑您的字符串。编辑字符串是一项极其昂贵的操作。最好执行一次`ToLower()`and`Trim()`函数，最好是在第一次加载数据时执行。这可能会大大加快您的功能。

# android - 如何在Android中通过mediaserver进程获取流媒体进程的名称？

> ID：11631453
> 
> 赞同：1
> 
> 时间：2012-07-24T13:02:56.517
> 
> 标签：android, android-mediaplayer

我在互联网上找不到详细信息。

但据我所知，`mediaserver`位于`/system/bin/mediaserver`Android 中的进程控制着媒体事务。

例如，在`youtube`应用程序上流式传输视频时，此媒体服务器似乎正在打开远程服务器的端口并下载内容，因为它看起来

```
cat /proc/net/tcp 
```

mediaserver 应用程序的 linux UID 为 1013，这是一个内部 Android UID。

对于新的套接字连接，我通过检查打开的端口来获取应用程序 UID

但是对于这个 mediaserver 进程案例，我得到了 UID 1013，因为 mediaserver 已经打开了端口。

问题是当我打电话时`getRunningAppProcesses`，此媒体服务器应用程序未列在列表中。

更具体地说，`getRunningAppProcesses()`仅返回命令输出中的包名称`ps`，不显示 eg`/system/bin/mediaserver`或`/system/bin/keystore`etc。

所以我需要知道哪个应用程序导致 mediaserver 为远程服务打开了一个新端口。在这种情况下如何获取原始应用程序名称或pid？我不知道这是否真的可以完成或Android的限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T14:09:47.207

您可以知道您是否跟踪为启动服务而创建的意图。不幸的是，我不知道有任何方法可以在不跟踪系统调用的情况下获取该信息（即修改固件以跟踪它）

# file-io - 何时关闭文件？

> ID：11631454
> 
> 赞同：2
> 
> 时间：2012-07-24T13:02:57.283
> 
> 标签：file-io, go

当您只想创建文件时是否需要关闭它？我认为只有在阅读或写作的情况下才有必要。

```
_, err := os.OpenFile(name, os.O_CREATE, 0640) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:07:49.997

它会起作用吗？是的。该文件将被创建。

你应该这样做吗？不。一般来说这是一个坏主意，即使你有时可以侥幸逃脱。

打开文件会为您的进程分配文件句柄等资源。您应该关闭它以释放这些资源。否则它们将不可用，直到进程终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:07:28.357

当您创建文件时，您也会打开它，因此您应该关闭它。

# python - 在 Python 3.2 中并行执行 for 循环

> ID：11631457
> 
> 赞同：17
> 
> 时间：2012-07-24T13:02:58.143
> 
> 标签：python, parallel-processing, python-3.x, multiprocessing, pickle

> **可能重复：**
> [如何并行化一个简单的 python 循环？](https://stackoverflow.com/questions/9786102/how-do-i-parallelize-a-simple-python-loop)

我对 Python 很陌生（使用 Python 3.2），我有一个关于并行化的问题。我有一个 for 循环，我希望在 Python 3.2 中使用“多处理”并行执行：

```
def computation:    
    global output

    for x in range(i,j):
        localResult = ... #perform some computation as a function of i and j
        output.append(localResult) 
```

总的来说，我想在 i=0 到 j=100 的范围内执行此计算。因此，我想创建许多进程，每个进程都使用总范围的子域调用函数“计算”。关于如何做到这一点的任何想法？有没有比使用多处理更好的方法？

更具体地说，我想执行域分解，我有以下代码：

```
from multiprocessing import Pool

class testModule:

    def __init__(self):
        self

    def computation(self, args):
        start, end = args
        print('start: ', start, ' end: ', end)

testMod = testModule()
length = 100
np=4
p = Pool(processes=np)
p.map(yes tMod.computation, [(length, startPosition, length//np) for startPosition in    range(0, length, length//np)]) 
```

我收到一条提到 PicklingError 的错误消息。有什么想法可能是这里的问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T13:17:24.380

[Joblib](http://packages.python.org/joblib/)专为简单的并行循环而设计用于环绕多处理。我建议使用它而不是直接处理多处理。

简单的案例看起来像这样：

```
from joblib import Parallel, delayed
Parallel(n_jobs=2)(delayed(foo)(i**2) for i in range(10))  # n_jobs = number of processes 
```

一旦你理解它的语法很简单。我们正在使用生成器语法，其中`delayed`用于调用函数`foo`，其参数包含在后面的括号中。

在您的情况下，您应该使用生成器语法重写您的 for 循环，或者定义另一个函数（即“worker”函数）来执行单个循环迭代的操作并将其放入调用 Parallel 的生成器语法中。

在后一种情况下，您将执行以下操作：

```
Parallel(n_jobs=2)(delayed(foo)(parameters) for x in range(i,j)) 
```

where`foo`是您定义的用于处理 for 循环主体的函数。请注意，您不想追加到列表，因为 Parallel 无论如何都会返回一个列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T13:18:35.147

在这种情况下，您可能希望定义一个简单的函数来执行计算并获取`localResult`.

```
def getLocalResult(args):
    """ Do whatever you want in this func.  
        The point is that it takes x,i,j and 
        returns localResult
    """
    x,i,j = args  #unpack args
    return doSomething(x,i,j) 
```

现在在您的计算函数中，您只需创建一个工人池并映射本地结果：

```
import multiprocessing
def computation(np=4):
    """ np is number of processes to fork """
    p = multiprocessing.Pool(np)
    output = p.map(getLocalResults, [(x,i,j) for x in range(i,j)] )
    return output 
```

我在这里删除了全局，因为它是不必要的（全局通常是不必要的）。在您的呼叫例程中，您应该只做`output.extend(computation(np=4))`或类似的事情。

**编辑**

这是您的代码的“工作”示例：

```
from multiprocessing import Pool

def computation(args):
    length, startPosition, npoints = args
    print(args)

length = 100
np=4
p = Pool(processes=np)
p.map(computation, [(startPosition,startPosition+length//np, length//np) for startPosition in  range(0, length, length//np)]) 
```

请注意，您没有工作，因为您使用实例方法作为您的函数。multiprocessing 启动新进程并通过 发送进程之间的信息`pickle`，因此，只能使用可以腌制的对象。请注意，无论如何使用实例方法确实没有意义。每个进程都是父进程的副本，因此进程中发生的任何状态更改都不会传播回父进程。

# asp.net - 从子用户控制页面设置父页面控制可见性

> ID：11631461
> 
> 赞同：0
> 
> 时间：2012-07-24T13:03:02.620
> 
> 标签：asp.net, .net, updatepanel, parent-child

我有一个具有 button1 的父页面 Page1。Page1 有一个用户控件 uc1。uc1 有一个更新面板，其中存在一个网格 grid1。我正在尝试将 Page1.button1 的可见性设置为 false，具体取决于 uc1.grid1 的行命令事件（行命令事件中有一些 if 条件）。我通过以下方式设置 Page1.button1 的可见性：

在 uc1 中创建一个 IsButton1Visible 属性。将 UC1.Grid1.RowCommand 中的属性设置为 false，在 page1 PreRender 事件上，访问 IsButton1Visible 并设置 Page1.button1 可见性。

即使在快速观看 Page1.button1 可见性在分配行设置为 false 时，当我看到 UI 时，它仍然可见。我不知道我做错了什么。或者我获取 button1 的方式及其可见性不正确。

一般来说，我们可以在用户控件事件期间从用户控件中设置父页面的控件属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:17:59.553

如果您使用事件驱动模型方法

委托/EventArgs 代码：

```
public class ButtonVisiblityEventArgs : EventArgs
{
    public ButtonVisiblityEventArgs(bool visible)
    {
        this.Visiblity = visible;
    }

    public bool Visiblity { get; private set; }
}

public delegate void UpdateParentButtonVisibilityEventHandler(object sender, ButtonVisiblityEventArgs args); 
```

用户控制代码：

```
 public event UpdateParentButtonVisibilityEventHandler RaiseUpdateParentButtonVisibilityEvent;

    private void RequestParentButtonVisibilityChange(bool setVisible)
    {
        if (RaiseUpdateParentButtonVisibilityEvent != null)
        {
            RaiseUpdateParentButtonVisibilityEvent(this, new ButtonVisiblityEventArgs(setVisible));
        }
    } 
```

在您的命令处理程序中，只需调用：

```
 RequestParentButtonVisibilityChange(false); 
```

每当您想隐藏按钮时。在您的页面上：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.RaiseUpdateParentButtonVisibilityEvent += new UpdateParentButtonVisibilityEventHandler(uc_RaiseUpdatecurrentDisplayPanelRequestEvent);
    }

    private void uc_RaiseUpdatecurrentDisplayPanelRequestEvent(object sender, ButtonVisiblityEventArgs args)
    {
        button1.Visible = args.Visiblity;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:31:37.287

如果您遇到的问题是您的按钮位于更新面板之外，您可以执行以下操作。页面代码绑定：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string hideScript = string.Format("function updateButtonVisibility( visibility ) {{ var button = $('#{0}'); if (visibility) {{ button.show(); }} else {{ button.hide(); }} }}", this.button1.ClientID);

        Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "updateButtonVisibility", hideScript, true);

    } 
```

在您的用户控制命令处理程序中：

```
 bool shouldButtonBeVisible = false; //update this appropriately in your logic
   ScriptManager.RegisterStartupScript(this, this.GetType(), "upUpdateButtonVisibility", "updateButtonVisibility(" + shouldButtonBeVisible ? "true" : "false" + ");", true); 
```

请注意，这会在您的 UC 和页面之间创建紧密的依赖关系。它要求使用此控件的任何页面都已注册此脚本。有一些方法可以解决这个问题（例如设置要调用的函数脚本回调，检测该 javascript 函数是否存在等），但这至少应该让你动起来。

如果更新面板完成后页面上有特定内容可以关闭，最好注册一个结束请求处理程序

```
$(function() { Sys.WebForms.PageRequestManager.getInstance().add_endRequest(updatePanelEndRequestHandler); } );

function updatePanelEndRequestHandler() {
   var shouldBeVisible = $('.MyClassThatSaysIShouldntAllowMoreButtons').length > 0; //do some checking on the grid
   updateButtonVisibility(shouldBeVisible);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-11T08:55:08.180

您可以将用户控件放在父页面上的面板内并更改可见性。

例如

```
 <asp:Panel runat="server" ID="pnlQuote">
        ...
    </asp:Panel>

    <asp:Panel runat="server" ID="pnlContact">
        <uc1:ContactForm runat="server" ID="ContactForm " />
    </asp:Panel> 
```

从子控件中，您可以创建一个按钮单击事件，它执行类似这样的操作

```
 protected void btnBackToQuote_Click(object sender, EventArgs e)
        {
            Panel pnlQuote = this.Parent.FindControl("pnlQuote") as Panel;
            Panel pnlContact = this.Parent.FindControl("pnlContact") as Panel;

            pnlQuote .Visible = true;
            pnlContact.Visible = false;
        } 
```

# javascript - 我无法显示第三个果汁盒画廊

> ID：11631464
> 
> 赞同：0
> 
> 时间：2012-07-24T13:03:04.237
> 
> 标签：javascript, jquery, html, flexslider

在我网站的“工作”部分，我似乎无法让第三个画廊（商业）出现。

链接 - [http://www.alliedoglass.com/20120521_index.html#work](http://www.alliedouglass.com/20120521_index.html#work)

您会注意到，如果您从“新闻”幻灯片开始，然后单击“商业”，它会短暂显示，然后消失。

照片库插件是[http://juicebox.net/](http://juicebox.net/)，内容滑块是 flexslider。

这是我的第一个网站，所以我想为代码中的错误数量以及页面加载缓慢表示歉意。这些都是我目前正在解决的问题，或者至少正在尝试解决这些问题。

# optimization - MVC4 捆绑策略

> ID：11631479
> 
> 赞同：5
> 
> 时间：2012-07-24T13:03:57.013
> 
> 标签：optimization, asp.net-mvc-4, minify

我正在使用 ASP.NET MVC4 中的新捆绑功能。目前我配置了以下捆绑包：

*   ~/js/jquery
*   ~/js/表格
*   ～/js/bootstrap

根据我所服务的视图，我通常将这三个组合称为（例如，主页需要 jquery 包，而联系页面需要 jquery + bootstrap，而表单需要全部三个）。

我的问题是：有没有办法从视图中调用三个捆绑包作为一个文件呈现？我不想为每种可能的组合制作捆绑包：

*   〜/js/formsAndBootstrap
*   〜/js/formsAndJQueryAndBootstrap
*   等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:57:43.123

```
bundles.Add(new ScriptBundle("~/bundles/formsAndBootstrap").Include(
                             "~/Content/Scripts/jquery-1.7.2.js",
                             "~/Content/Scripts/bootstrap.js",
                             "~/Content/Scripts/form.js")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T00:57:18.353

看来您必须定义一个捆绑包。它不能从视图中“即时”完成。

# html - 阿贾克斯帖子不起作用

> ID：11631495
> 
> 赞同：0
> 
> 时间：2012-07-24T13:04:32.730
> 
> 标签：html, ajax, csrf

我正在尝试通过 ajax 发布表单。它给了我“405 Method Not Allowed”错误。如果我将 url 放在 html 表单的操作部分并在单击按钮时手动提交（所以它不是 csrf 问题..rite？），则相同的 html 文件可以工作。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:12:11.877

确保您对 ajax 请求使用相同的方法。也许您对表单使用“POST”方法，对 ajax 请求使用“GET”方法。

CSRF 应该抛出 403，如果不允许使用方法 (POST,GET,PUT,DELETE,...)，您将看到 405 错误消息。

**编辑：**尝试使用 jquery 提交您的表单：

```
// change the selector!
var data = $("form").serialize();
alert(data);

$.ajax({
 type: "POST",
 url: "/your-backend.php",
 data: data, 
```

});

当你这样做时，萤火虫会说什么？

# apache - 不使用 .htaccess 重定向子域

> ID：11631500
> 
> 赞同：0
> 
> 时间：2012-07-24T13:04:45.240
> 
> 标签：apache, .htaccess, url-rewriting, subdomain

我有使用 wordpress 的网站，我通常以以下身份登录：mydomain.com/wp-admin。我希望它在子域上。我尝试使用以下重写 url 创建子域：

```
RewriteCond %{HTTP_HOST} ^wp-admin
RewriteCond %{REQUEST_URI} !^/wp-admin
RewriteRule ^(.*)$ wp-admin/$1 [L] 
```

但是当我试图访问`http://wp-admin.mydomain.com/`一个奇怪的页面时，会出现一条错误消息：

`If you feel you have reached this page in error, please contact the web site owner:`

并且网址更改为：

```
http://wp-admin.mydomain.com/cgi-sys/defaultwebpage.cgi 
```

请帮助我如何能够创建一个子域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:19:07.323

您可以尝试提供绝对路径，并强制执行内部重定向（又名[pass-through](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_pt)）。

```
RewriteRule ^(.*)$ /wp-admin/$1 [PT,L]
                   ^             ^^ 
```

# c# - 我可以使用 foreach 和初始声明重塑该代码吗

> ID：11631503
> 
> 赞同：2
> 
> 时间：2012-07-24T13:05:03.707
> 
> 标签：c#, arrays, foreach

我必须设置一个期望得到一个数组的属性，因此我需要一个 X 类实例的数组，如下所示：

```
X[] x = new X[]
{
  new X () { Parameter = parameter },
  new X () { Parameter = parameter2 }
  // ...
} 
```

由于参数是在运行时生成并存储在列表中，因此应动态创建实例。我用那个代码达到了我的预期目标

```
X[] x = new X[list.Count];
for (int i = 0; i < list.Count; i++)
{
  x[i] = new X() { Parameter = list.ElementAt(i) }
} 
```

这些线完成了他们的工作，但是，我对这些线不满意。我想改变一些东西，即看起来像伪代码的代码

```
X[] x = new X[]
{
  foreach (var item in list)
  {
    new X () { Parameter = item }
  }
} 
```

但是，此代码将不起作用。有没有办法实现这样的代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T13:07:00.403

怎么样：

```
X[] x = list.Select(param => new X { Parameter = param }).ToArray(); 
```

在这里，`.Select(...)`创建一个投影，即对列表中的每个项目执行`new X {...}`操作的序列；将该`.ToArray()`序列转换为数组。

# facebook - 为什么访问 https://graph.facebook.com/me/home 无法获取所有数据？

> ID：11631507
> 
> 赞同：-3
> 
> 时间：2012-07-24T13:05:23.713
> 
> 标签：facebook, facebook-graph-api

访问[https://graph.facebook.com/me/home](https://graph.facebook.com/me/home)时，facebook默认限制，显示25条数据，但是访问模拟器返回下一页链接，没有返回任何数据。home显然不只是25条数据，但是显示只有25个，这是为什么呢？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:07:39.277

/home 是什么意思？

如果您想要您的信息，请仅保留[https://graph.facebook.com/me](https://graph.facebook.com/me)

你也应该有一个访问令牌。

使用此链接来测试图形 url。

[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

如果对您有帮助，请投票。

# android - Android：从数据库中检索特定值的数据

> ID：11631509
> 
> 赞同：-1
> 
> 时间：2012-07-24T13:05:28.967
> 
> 标签：android, database, sqlite

我正在制作一个从 URL 获取数据的 Android 应用程序，将其存储到数据库中（直到这个阶段我已经完成）并使用该表的一些字段。

我尝试使用此 SQL 查询获取特定数据

```
"select persons_name where persons_name=s" 
```

但有一个错误

> I/Database(23722)：sqlite 返回：错误代码 = 1，msg = “FROM”附近：语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:25:26.067

这将选择所有名称开头字母为“s”的名称

```
"SELECT persons_name FROM persons WHERE persons_name LIKE 's%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:07:15.070

您必须指定数据位于哪个表中。

正确的 SQL 是：

```
select persons_name FROM Persons where persons_name=s 
```

假设表是 Persons

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:14:18.377

正如@JesusS 所指出的，试试这个：

```
"SELECT persons_name FROM persons WHERE persons_name LIKE 's'" 
```

# python - 我们如何在 Python 中填写 Flash 表单

> ID：11631510
> 
> 赞同：2
> 
> 时间：2012-07-24T13:05:29.980
> 
> 标签：python, forms, flash, internet-explorer-8, pywin32

我又问了一个愚蠢的问题，标题说明了一切，我想用 python 填写一个 Flash 表单！我可以打开 IE，但我不知道如何向该表单填写信息，因为它会闪烁，当我尝试查看 HTTP POST 一切都搞砸了时，我什至尝试使用简单的 urllib opener 或 mechanize 在 python 中打开该帖子库，它们不起作用，它只是挂起我的 python IDLE 窗口！我正在使用 pythoncom/win32.client 打开 IE，请告诉我是否可以在 python 中填写 Flash 表单或使用 IE/python 在 Flash 表单中进行任何点击。

谢谢

# c++ - C++ 中的长委托链

> ID：11631513
> 
> 赞同：23
> 
> 时间：2012-07-24T13:05:38.937
> 
> 标签：c++, design-patterns, delegation, chaining, method-chaining

> 这绝对是主观的，但我想尽量避免它变得有争议。我认为如果人们适当地对待它，这可能是一个有趣的问题。

在我最近的几个项目中，我曾经实现过长委托链很常见的架构。

双委托链经常会遇到：

```
bool Exists = Env->FileSystem->FileExists( "foo.txt" ); 
```

三重委托并不罕见：

```
Env->Renderer->GetCanvas()->TextStr( ... ); 
```

存在更高阶的委托链，但非常稀缺。

在上面提到的示例中，没有执行 NULL 运行时检查，因为使用的对象始终存在并且对程序的运行至关重要，并且在执行开始时显式构建。基本上我曾经在这些情况下拆分委托链：

**1）**我重用通过委托链获得的对象：

```
{ // make C invisible to the parent scope
   clCanvas* C = Env->Renderer->GetCanvas();
   C->TextStr( ... );
   C->TextStr( ... );
   C->TextStr( ... );
} 
```

**2)**委托链中间某处的中间对象在使用前应检查是否为 NULL。例如。

```
clCanvas* C = Env->Renderer->GetCanvas();

if ( C ) C->TextStr( ... ); 
```

我曾经通过提供代理对象来对抗情况 (2)，以便可以在导致结果的非 NULL 对象上调用方法`empty`。

**我的问题是：**

1.  案例 (1) 或 (2) 是模式还是反模式？
2.  有没有更好的方法来处理 C++ 中的长委托链？

以下是我在做出选择时考虑的一些利弊：

**优点：**

*   它非常具有描述性：从 1 行代码中可以清楚地看出对象来自哪里
*   长委托链看起来不错

**缺点：**

*   交互式调试很费力，因为很难在委托链中检查多个临时对象

我想知道长委托链的其他优点和缺点。请提出您的推理并根据有充分理由的意见进行投票，而不是您是否同意。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T13:17:40.217

我不会说这两种模式都是反模式。但是，第一个缺点`C`是即使在逻辑上相关之后，您的变量也是可见的（范围太无意义）。

您可以使用以下语法解决此问题：

```
if (clCanvas* C = Env->Renderer->GetCanvas()) {
  C->TextStr( ... );
  /* some more things with C */
} 
```

这在 C++ 中是允许的（虽然它不在 C 中），并且允许您保持适当的范围（`C`范围就像在条件块内一样）并检查 NULL。

断言某些东西不是 NULL 绝对比被 SegFault 杀死要好。所以我不建议简单地跳过这些检查，除非你 100% 确定该指针永远不会为 NULL。

* * *

此外，如果您觉得特别花哨，您可以将您的检查封装在一个额外的免费函数中：

```
template <typename T>
T notNULL(T value) {
  assert(value);
  return value;
}

// e.g.
notNULL(notNULL(Env)->Renderer->GetCanvas())->TextStr(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T13:11:26.227

以我的经验，这样的链通常包含不那么微不足道的吸气剂，导致效率低下。我认为（1）是一种合理的方法。使用代理对象似乎有点矫枉过正。我宁愿看到 NULL 指针崩溃，也不愿使用代理对象。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T17:39:22.060

如果您遵循得[墨忒耳法则，](http://en.wikipedia.org/wiki/Law_of_Demeter)就不应该发生如此长的授权链。我经常与它的一些支持者争辩说，他们过于认真地坚持它，但如果你想知道如何最好地处理长委托链，你可能应该更符合它的建议。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-24T13:24:58.740

有趣的问题，我认为这是可以解释的，但是：

**我的两分钱**

设计模式只是常见问题的可重用解决方案，这些解决方案足够通用，可以广泛应用于面向对象（通常）编程中。许多常见模式将从接口、继承链和/或包含关系开始，这将导致您在某种程度上使用链接来调用事物。这些模式并没有试图解决这样的编程问题——链接只是它们解决手头功能问题的副作用。所以，我不会真的认为它是一种模式。

同样，反模式是（在我看来）与设计模式的目的相反的方法。例如，设计模式都与代码的结构和适应性有关。人们认为单例是一种反模式，因为它（通常，并非总是）会产生类似蜘蛛网的代码，因为它固有地创建了一个全局，并且当你有很多时，你的设计会迅速恶化。

因此，同样，您的链接问题并不一定表明设计的好坏 - 它与模式的功能目标或反模式的缺点无关。即使设计得很好，有些设计也只有很多嵌套对象。

* * *

**该怎么办：**

一段时间后，长的委托链肯定会让人头疼，只要您的设计规定这些链中的指针不会被重新分配，我认为将临时指针保存到链中您感兴趣的点in 完全没问题（功能范围或更小）。

不过，就我个人而言，我反对将指向链的一部分的永久指针保存为类成员，因为我已经看到最终导致人们拥有 30 个指向永久存储的子对象的指针，并且你失去了对对象如何的所有概念在您正在使用的模式或架构中进行布局。

另一个想法 - 我不确定我是否喜欢这个，但我看到有些人创建了一个私人（为了你的理智）功能来导航链，这样你就可以回忆起它而不处理关于是否您的指针在幕后发生变化，或者您是否有空值。将所有逻辑包装一次会很好，在函数顶部放置一个很好的注释，说明它从链的哪一部分获取指针，然后直接在代码中使用函数结果而不是使用委托每次上链。

**表现**

我的最后一点是，这种功能包装方法以及您的委托链方法都存在性能缺陷。如果您在循环中使用这些对象，保存临时指针可以让您避免额外的两次取消引用。同样，存储来自函数调用的指针将避免每个循环周期的额外函数调用的开销。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-27T11:44:19.000

因为`bool Exists = Env->FileSystem->FileExists( "foo.txt" );`我宁愿对你的链进行更详细的细分，所以在我的理想世界中，有以下代码行：

```
Environment* env = GetEnv();
FileSystem* fs = env->FileSystem;
bool exists = fs->FileExists( "foo.txt" ); 
```

为什么？一些原因：

1.  **可读性**：我的注意力会丢失，直到我不得不读到行尾，以防万一`bool Exists = Env->FileSystem->FileExists( "foo.txt" );`这对我来说太长了。
2.  **有效性**：不管您提到的对象是，如果您的公司明天雇用一个新程序员并且他开始编写代码，那么后天对象可能不存在。这些长行非常不友好，新人可能会害怕它们并会做一些有趣的事情，例如优化它们......这将需要更有经验的程序员额外的时间来修复。
3.  **调试**：如果有任何机会（并且在您雇用了新程序员之后）应用程序在长链列表中抛出了分段错误，那么很难找出哪个对象是有罪的。细分越详细，就越容易找到错误的位置。
4.  **speed**：如果您需要进行大量调用以获取相同的链元素，则从链中“拉出”局部变量而不是为其调用“适当的”getter 函数可能会更快。我不知道您的代码是否是生产代码，但它似乎错过了“正确的”getter 函数，而是似乎只使用了属性。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-31T00:07:41.583

长的委托链对我来说有点设计的味道。

委托链告诉我的是，一段代码可以深度访问一段不相关的代码，这让我想到了[高耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)，这违背了[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)设计原则。

我遇到的主要问题是可维护性。如果你达到了两个层次，那就是两段独立的代码，它们可以自行进化并在你的控制下崩溃。当您在链中拥有函数时，这会很快复合，因为它们可以包含自己的链 - 例如，`Renderer->GetCanvas()`可能会根据来自另一个对象层次结构的信息选择画布，并且很难强制执行不会结束的代码路径在代码库的整个生命周期内深入到对象。

更好的方法是创建一个遵循 SOLID 原则并使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)和[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)等技术的架构，以确保您的对象始终可以访问他们执行职责所需的内容。这种方法也很适合自动化和单元测试。

只是我的2美分。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-24T17:33:20.950

如果可能的话，我会使用引用而不是指针。所以委托保证返回有效对象或抛出异常。

```
clCanvas & C = Env.Renderer().GetCanvas(); 
```

对于不存在的对象，我将提供额外的方法，例如 has、is 等。

```
if ( Env.HasRenderer() ) clCanvas* C = Env.Renderer().GetCanvas(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-30T23:56:55.117

如果您可以保证所有对象都存在，那么我真的不认为您正在做的事情有问题。正如其他人所提到的，即使您认为 NULL 永远不会发生，它也可能会发生。

话虽如此，我看到您到处都使用裸指针。我建议你开始使用智能指针。当您使用 -> 运算符时，如果指针为 NULL，则通常会抛出智能指针。所以你避免了SegFault。不仅如此，如果您使用智能指针，您可以保留副本，并且对象不会消失在您的脚下。您必须在指针变为 NULL 之前显式重置每个智能指针。

话虽如此，它不会阻止 -> 运算符偶尔抛出一次。

否则我宁愿使用 AProgrammer 提出的方法。如果对象 A 需要一个指向对象 B 指向的对象 C 的指针，那么对象 A 正在做的工作很可能是对象 B 实际上应该做的事情。所以 A 可以保证它始终有一个指向 B 的指针（因为它拥有一个指向 B 的共享指针，因此它不能为 NULL），因此它总是可以调用 B 上的函数来对对象 C 执行操作 Z。 Z, B 知道它是否总是有一个指向 C 的指针。这是其 B 实现的一部分。

请注意，对于 C++11，您有 std::smart_ptr<>，所以使用它！

# core-plot - 如何在coreplot中选择标签

> ID：11631515
> 
> 赞同：1
> 
> 时间：2012-07-24T13:05:46.517
> 
> 标签：core-plot

我想通过单击它来绘制折线图来获取axisLabel值？怎样才能做到这一点？是否有可能选择每个标签值？我已经尝试过绘图空间委托方法。`-(BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDownEvent:(id)event atPoint:(CGPoint)point`通过这个我只能获得绑定值。什么是最好的解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:27:50.197

1.  将图形图层坐标系中的点转换为绘图区域：

    ```
    CGPoint pointInPlotArea = [space.graph convertPoint:interactionPoint
                                                toLayer:space.graph.plotAreaFrame.plotArea]; 
    ```

2.  将点转换为数据坐标：

    ```
    NSDecimal plotPoint[2];
    [space plotPoint:plotPoint forPlotAreaViewPoint:pointInPlotArea]; 
    ```

    或者

    ```
    double plotPoint[2];
    [space doublePrecisionPlotPoint:plotPoint forPlotAreaViewPoint:pointInPlotArea]; 
    ```

# c++ - 使用函子的自动类型推断不起作用

> ID：11631519
> 
> 赞同：1
> 
> 时间：2012-07-24T13:06:00.477
> 
> 标签：c++, c++11, bind, std, stdbind

> **可能重复：**
> [std::bind 绑定函数](https://stackoverflow.com/questions/10777421/stdbind-a-bound-function)

```
void foo0(int val) { std::cout << "val " << val << "\n"; }
void foo1(int val, std::function<void (int)> ftor) { ftor(val); }
void foo2(int val, std::function<void (int)> ftor) { ftor(val); }

int main(int argc, char* argv[]) {
    auto                applyWithFoo0       ( std::bind(foo0,     std::placeholders::_1) );
    //std::function<void (int)> applyWithFoo0       ( std::bind(foo0,     std::placeholders::_1) ); // use this instead to make compile
    auto                applyFoo1       (     std::bind(foo1, std::placeholders::_1, applyWithFoo0) );
    foo2(123, applyFoo1);
} 
```

上面的示例无法编译并给出多个错误，例如：`Error 1 error C2780: '_Ret std::tr1::_Callable_fun<_Ty,_Indirect>::_ApplyX(_Arg0 &&,_Arg1 &&,_Arg2 &&,_Arg3 &&,_Arg4 &&,_Arg5 &&,_Arg6 &&,_Arg7 &&,_Arg8 &&,_Arg9 &&) const' : expects 10 arguments - 2 provided`.
使用带有显式类型的注释行确实可以编译。似乎推断的类型`auto`不正确。在这种情况下有什么问题`auto`？
平台：MSVC 10 SP 1、GCC 4.6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:41:10.053

问题在于`std::bind`将“绑定表达式”（如您的`applyWithFoo0`）与其他类型不同。它不是使用作为参数调用 foo1，`applyWithFoo0`而是尝试调用`applyWithFoo0`并将其返回值传递给 foo1。但`applyWithFoo0`不返回任何可转换为`std::function<void(int)>`. 像这样处理“绑定表达式”的目的是使它们易于组合。在大多数情况下，您可能不希望将绑定表达式作为函数参数传递，而只希望它们的结果。如果将绑定表达式显式包装到`function<>`对象中，则该`function<>`对象将直接传递给 foo1，因为它*不是*“绑定表达式”，因此不会被`std::bind`.

考虑以下示例：

```
#include <iostream>
#include <functional>

int twice(int x) { return x*2; }

int main()
{
  using namespace std;
  using namespace std::placeholders;
  auto mul_by_2 = bind(twice,_1);
  auto mul_by_4 = bind(twice,mul_by_2); // #2
  auto mul_by_8 = bind(twice,mul_by_4); // #3
  cout << mul_by_8(1) << endl;
} 
```

这实际上是可以编译和工作的，因为不像您可能期望从绑定表达式 #2 和 #3 那样将函子传递给两次，bind 实际上会计算传递的绑定表达式并将**其结果**用作函数参数两次。在这里，这是故意的。但是在您的情况下，您偶然绊倒了这种行为，因为您实际上希望 bind 将仿函数本身而不是其评估值传递给函数。将仿函数包装到 function<> 对象中显然是一种解决方法。

在我看来，这个设计决定有点尴尬，因为它引入了人们必须知道才能正确使用绑定的不规则性。也许，我们将来会得到另一个更令人满意的工作，比如

```
auto applyFoo1 = bind( foo1, _1, noeval(applyWithFoo0) ); 
```

where`noeval`告诉 bind 不要计算表达式，而是将其传递给函数。但也许反过来——明确告诉 bind 将仿函数的结果传递给函数——会是一个更好的设计：

```
auto mul_by_8 = bind( twice, eval(mul_by_4) ); 
```

但我想，现在为时已晚......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:11:18.663

我的猜测是 std::bind 周围的括号使解析器认为您正在声明名为 applyWithFoo0 和 applyFoo1 的函数。

std::bind 返回一个 auto 应该能够检测到的函子类型。

试试这个：

```
 int main(int argc, char* argv[]) {
    auto                applyWithFoo0  =     std::bind(foo0,     std::placeholders::_1);
    //std::function<void (int)> applyWithFoo0        std::bind(foo0,     std::placeholders::_1) ); // use this instead to make compile
    auto                applyFoo1   =    std::bind(foo1, std::placeholders::_1, applyWithFoo0);
    foo2(123, applyFoo1);
} 
```

# repository - 领域驱动设计和聚合参考

> ID：11631524
> 
> 赞同：3
> 
> 时间：2012-07-24T13:06:23.597
> 
> 标签：repository, domain-driven-design, aggregateroot, aggregates

我正在设计域模型，但有些东西似乎不太好。

我从一个主要的聚合开始。它引用了其他聚合，而那些其他聚合也引用了更多聚合。我可以从主聚合开始遍历洞域模型。

我看到的问题是我将在内存中保存所有聚合实例。

这是一个好的设计吗？我可以通过延迟加载来解决内存问题，但我认为我有更深层次的问题。

我有另一个关于聚合引用的问题。我应该懒惰地加载对其他聚合的引用吗？如果是这种情况，我几乎不会使用他们的存储库。那样可以么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T18:58:38.340

在聚合根 (AR) 之间直接引用可能会导致延迟加载无法解决的问题。此外，它强制所有连接的 AR 位于同一个数据库中，这使得推理和执行不变量变得更加困难，而这首先是 AR 的主要目的。最好限制或消除 AR 之间的直接引用。[Vaughn Vernon的](https://twitter.com/vaughnvernon)[一系列文章](http://dddcommunity.org/library/vernon_2011)是学习聚合设计的重要资源. 基本理念是让您的 AR 精益求精并专注于所有功能，同时牢记它们的功能 - 执行业务约束并围绕根实体建立边界。如果一个 AR 需要来自另一个 AR 的数据来执行其工作，则该数据可以由应用程序服务通过存储库提供给它。此外，如果仅需要引用来满足 UI 要求，则考虑使用[读取模型模式](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)。

# templates - Sencha Touch：XTemplate 在 DataView 中不可见

> ID：11631529
> 
> 赞同：0
> 
> 时间：2012-07-24T13:06:45.483
> 
> 标签：templates, touch, extjs, dataview

我是所有 Sencha Touch 东西的新手，但直到现在我对它的功能非常热情。有一个问题，不知怎么解决不了。

我想将 Tpl (XTemplate) 用于日历视图。这个想法是为每个约会创建一个 div 元素，我可以将其放置在容器中以对其进行布局。不知何故，我无法让数据视图工作。

我已将我的代码精简到最低限度：一个包含 DataView 的面板。当我使用 itemTpl 时，一切正常。但是当我使用 tpl（有或没有 XTemplate）时，我什么也看不到。我检查了它是否只是显示故障（从模板中搜索 XXX），但事实并非如此。

这是我的代码：

```
Ext.define('InfoApp.view.CalendarDay', {
extend: 'Ext.Panel',
xtype: 'calendarday',
requires: [ 'InfoApp.store.sAppointments'],
config: {
    title: 'Dag',
    layout: 'fit',
        items: [
                {
                    xtype: 'dataview',
                    store: 'appointmentStore',

                    //itemTpl: [ 'XXX {day} {course}' ] --> Works
                    tpl: new Ext.XTemplate('<tpl for=".">XXX {day} {course}</tpl>')--> Doesn't Work... 
                }        
        ]
}
}); 
```

提前感谢您的任何建议或改进！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:06:33.247

假设 ST2 而不是 ST1

从[http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-tpl](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-tpl)和文档中 tpl: config 的评论来看，使用遥控器时似乎存在错误店铺。即使您的商店有数据。tpl：显然只有当您的数据在 data 中硬编码时才有效：[]

您可以使用 itemTpl: new XTemplate() 或 itemTpl: XTemplate.from('someid') 或者您可以推迟指定直到之后，获取您的数据视图并转到 dv.setItemTpl(new XTemplate()) 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:54:57.410

坦克@brink 为您解答。

我花了几天时间，但这对我有用：

```
 // Load the store
  var store = Ext.getStore('appointmentStore');

  // Get the current range of the store
  var data = store.getRange();

  // Create a custom template
  var tpl = new Ext.XTemplate(<tpl for=".">{day} {course}</tpl>);

  // Loop through the data array 
  var showData = array(); 
  for(var i=0;i<data.length;i++){
      showData.push(data[i].data); 
  }

  // Get the panel by ID and push the html template
  var panel = Ext.getCmp('appointmentspanel');
  panel.updateHtml(tpl.applyTemplate(showData)); 
```

# windows - Node.js 在 Windows 上安装模块

> ID：11631530
> 
> 赞同：4
> 
> 时间：2012-07-24T13:06:48.393
> 
> 标签：windows, node.js, module, sh

Cmd 错误：“sh”不是内部或外部命令、可运行程序或批处理文件。

```
C:\Users\user>npm install -g node-curl
    npm http GET https://registry.npmjs.org/node-curl
    npm http 304 https://registry.npmjs.org/node-curl

    > node-curl@0.1.4 install C:\Users\user\AppData\Roaming\npm\node_modules\node-cu
    rl
    > sh src/generate_curl_options_list.sh && node-waf configure build || true

    "sh" is not recognized as an internal or external command, operable program or batch file.
    "true" is not recognized as an internal or external command, operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:53:25.713

扩展弗洛里安的回答：你在 Windows 上，没有`cURL`or `sh`。您正在尝试安装一个模块，该模块依赖于提供 libcurl-library 的操作系统`sh`，并且 Windows 未附带该模块。

你有一些选择：

1.  编写您自己的仅节点实现，其行为类似于 curl。

    在 SO 上看到这个问题：[Curl 等价于 nodejs？](https://stackoverflow.com/questions/6819143/curl-equivalent-in-nodejs) 它详细介绍了如何使用内置`http`模块，例如 curl。

2.  或者使用[cygwin 之](http://www.cygwin.com/)类的工具在 Windows 上安装`libcurl`和安装。我还没有尝试过，您尝试安装的 npm 模块可能仍然依赖于 cygwin 无法解决的其他 unix 工具。`sh`

3.  [或者在http://search.npmjs.org/](http://search.npmjs.org/)中寻找类似 curl 的其他内容。尝试`httpsync`或`curly`

我推荐选项 1，它会教你基本的 http 原则。node 中的原生模块已经提供了你可能需要 curl 的一切。:)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-24T13:13:43.470

好吧，在没有 curl 的 Windows 上使用 node-curl 是非常愚蠢的。

不要尝试。

# c++ - 用 OpenCV 计算物体的面积

> ID：11631533
> 
> 赞同：10
> 
> 时间：2012-07-24T13:06:53.970
> 
> 标签：c++, opencv, contour

我需要使用*OpenCV*计算灰度图片中的 blob/对象的面积（将其加载为 Mat，而不是 IplImage） 。我认为获取边缘的坐标（边缘的数量从对象到对象的变化）或获取轮廓的所有坐标然后`contourArea()`用来计算我的对象的面积是一个好主意。

`findContours()`我通过使用（*C++ 编程*）删除了所有噪音并获得了一些漂亮且令人满意的轮廓。

```
findContours(InputOutputArray image, OutputArrayOfArrays contours, OutputArray hierarchy,int mode, int method, Point offset=Point()); 
```

现在我明白了 param`contours`已经拥有我的对象所有轮廓的坐标。我做对了吗？

如果是，有办法访问它们吗？

如果没有，无论如何我如何获得轮廓的坐标？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-24T13:19:10.983

`contours`实际上定义为

```
vector<vector<Point> > contours; 
```

现在我认为如何访问它的点已经很清楚了。

轮廓区域由一个很好地称为的函数计算`contourArea()`：

```
for (unsigned int i = 0;  i < contours.size();  i++)
{
     std::cout << "# of contour points: " << contours[i].size() << std::endl;

     for (unsigned int j=0;  j<contours[i].size();  j++)
     {
         std::cout << "Point(x,y)=" << contours[i][j] << std::endl;
     }

     std::cout << " Area: " << contourArea(contours[i]) << std::endl;
} 
```

# objective-c - 整合信用卡/借记卡交易

> ID：11631536
> 
> 赞同：0
> 
> 时间：2012-07-24T13:07:00.140
> 
> 标签：objective-c, ios

我正在开发一个应用程序。在这个应用程序中购买一些非数字商品，我必须授予用户使用`credit card / debit card`. 我在应用商店中看到了一些接受`credit card / debit card` . 这些应用程序是`Pay Anywhere`, `Rev COIN`。1) 我们能知道他们使用了哪些第三方 API。2）在使用这些应用程序时，我们是否需要任何读卡器（另一台设备）来刷卡。以及如何获取这些 API。任何人都可以帮助我。这在我的应用程序中起主要作用。请有任何建议。

做一些交易`ZOOZ`是可以的。但是来到我的应用程序我有一个要求。即用户可以发送一个项目的订单，用户可以在提供项目付款时说到期时间（即产品必须交付多少天）。在交付产品之前，用户可以取消订单。每当订单被取消时，必须扣除一些金额并退还剩余的金额。

例如，用户发送价值 10 美元的百事可乐请求，到期时间为 3 天，付款将立即完成。第二天他可能想取消订单，在这种情况下，用户 2 美元将被扣除，剩​​余的 8 美元必须退回用户帐户。我们可以使用一些`API's`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:20:06.253

[Zooz](http://www.zooz.com/)是您进行应用内付款的一种方式。这应该很容易。这种模式适合您将应用程序用作亚马逊之类的在线“商店”。

如果您正在谈论使用 iOS 设备记录交易（使用单个单元作为收银系统），那么您将需要一个刷卡插件，除非您希望客户在付款时输入他们的所有信用信息.

或者，正如 jgervin 指出的那样，您可以使用[card.io](https://www.card.io/)让用户为他们的信用卡拍照。但是，该公司会向您收取每次扫描费用。

**重要提示：** Apple 会从应用商店拒绝您的应用。请参阅链接的问题。

[通过应用内购买支付实体产品](https://stackoverflow.com/q/1980595/1487063)

[有没有人通过原生 iPhone 应用程序实现了 PayPal API？](https://stackoverflow.com/q/779423/1487063)

[我应该使用哪个 PayPal iPhone SDK？](https://stackoverflow.com/q/9229770/1487063)

因此，希望您计划使用 airwatch 或类似的东西进行部署。

# android - (Android) 如何在地图视图中设置默认 GPS 位置

> ID：11631541
> 
> 赞同：0
> 
> 时间：2012-07-24T13:07:05.223
> 
> 标签：android, controller, geolocation, gps, android-mapview

所以我有一个应用程序，它必须显示许多商店的位置，这取决于你选择哪一个。带有 mapView 的页面的 XML 布局是 ViewFlipper 的一部分，而具有地图布局的部分是：

```
<RelativeLayout
    android:id="@+id/RelativeLayout3"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/back2"
    android:gravity="left" >

    <ImageButton
        android:id="@+id/backLocation3"
        android:layout_width="72dp"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:src="@drawable/btn_zuruck2" />

    <ImageView
        android:id="@+id/imageViewMap"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/backLocation3"
        android:layout_marginTop="14dp"
        android:src="@drawable/businesslounge" />

    <RelativeLayout
        android:id="@+id/mapPlaceHolderLayout"
        android:layout_width="300dp"
        android:layout_height="200dip"
        android:layout_alignLeft="@+id/backLocation3"
        android:layout_below="@+id/imageViewMap"
        android:layout_marginTop="92dp" >
    </RelativeLayout>

    <TextView
        android:id="@+id/mapLocation"
        android:layout_width="240dp"
        android:layout_height="40dp"
        android:layout_alignLeft="@+id/mapPlaceHolderLayout"
        android:layout_below="@+id/imageViewMap"
        android:layout_marginTop="47dp"
        android:text="@string/maplocation"
        android:textSize="25dp"
        android:textColor="@color/purple" />

    <ImageButton
        android:id="@+id/phonereserve"
        android:layout_width="220dp"
        android:layout_height="36dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="24dp"
        android:src="@drawable/rezervephone" />

</RelativeLayout> 
```

与地图视图相关的代码部分是：

```
public class StandorteFragment extends MapHostFragment {

public String text2;
private RelativeLayout mapPlaceHolderLayout;
public AQuery aQuery;

private MapView myMapView;
private GeoPoint geoPoint;
private MapController mc;

@Override
protected Class<? extends Activity> getActivityClass() {
    return LocationMapActivity.class;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.location, container, false);
    ViewFlipperStandorte = (ViewFlipper) v.findViewById(R.id.viewFlipperLocation);
    geoPoint = new GeoPoint( (int) (48.949997* 1E6), (int) (22.140213 * 1E6));
    mapPlaceHolderLayout = (RelativeLayout)v.findViewById(R.id.mapPlaceHolderLayout);
    mapPlaceHolderLayout.addView(onCreateMapView());
//      myMapView = (MapView) v.findViewById(R.id.mapPlaceHolderLayout);
//        mc = myMapView.getController();
//        mc.animateTo(geoPoint);
// 
```

它可以工作，但在 mapView 中不显示任何内容。如果我不使用 myMapView 和动画 geoPoint 评论这 3 行，它会强制关闭。我需要做什么？

编辑：onCreateMapView：

```
public View onCreateMapView() {
    Intent intent = new Intent(getActivity(), getActivityClass());
    final Window w = getLocalActivityManager().startActivity(ACTIVITY_TAG,
            intent);
    final View wd = w != null ? w.getDecorView() : null;

    if (wd != null) {
        ViewParent parent = wd.getParent();
        if (parent != null) {
            ViewGroup v = (ViewGroup) parent;
            v.removeView(wd);
        }

        wd.setVisibility(View.VISIBLE);
        wd.setFocusableInTouchMode(true);
        if (wd instanceof ViewGroup) {
            ((ViewGroup) wd)
                    .setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
        }
    }
    return wd;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:15:09.287

好吧，您的 xml 中的 R.id.mapPLaceHolderLayout 不是地图视图，因此您不能将其转换为一个。该行将导致异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:41:00.377

mapPlaceHolderLayout.addView(onCreateMapView()); 称为 MapHostFragment，它称为 LocalActivityManagerFragment，它以某种方式转到扩展 MapActivity 的 LocationMapActivity，所以在这里我可以实例化 Mapcontroller，一切都在那里正常进行

# xquery - Saxon XQuery 处理器

> ID：11631554
> 
> 赞同：1
> 
> 时间：2012-07-24T13:07:47.597
> 
> 标签：xquery, saxon

我是使用撒克逊语的新手。能否请一位使用 Saxon 处理 XQuery 的专家指出一些**关于 Saxon 有什么好处的细节？它与其他 XQuery 处理器有何不同？** 提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T09:12:58.997

XQuery 处理器的主要区别可能在于它们分为三个类别：

*   在内存中处理 XML 的独立 XQuery 处理器

*   XQuery 作为原生 XML 数据库的查询语言

*   XQuery 作为 SQL 的扩展，用于访问关系数据库中保存的 XML（和其他数据）

撒克逊人属于头等舱，尽管它当然没有自己的空间。如果您正在选择一种产品，那么您就会被宠坏了。我知道有些人试图确保他们的应用程序使用多个 XQuery 处理器运行，以便他们可以在一段时间内进行比较，但这有点奢侈。大多数人只是随机选择一个或多或少一个，然后只有在它被证明是无效的时候才改变。

Saxon 并不总是在性能基准测试中名列前茅，尽管它通常足够接近前沿，因此性能不会成为与其他领先产品的显着差异化因素。当然，基准测试的结果会因工作负载的种类而异。持续获得银牌比偶尔获得金牌更重要。但性能本身并不是我们开发 Saxon 的首要目标：我们的首要任务是符合标准，其次是可用性（尤其是调试和错误消息，还有 API），而性能仅排在第三位。

如果你想要一个选择 Saxon 的理由，我会说它是为了调试和诊断。您将花费大部分时间和金钱来尝试找出您的查询给出错误答案的原因，我们付出了巨大的努力来帮助您尽可能快速、轻松地回答这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:25:40.340

[Saxon 的作者 Michael Kay 在论文Saxon XQuery 快速的十个原因](http://sites.computer.org/debull/A08dec/saxonica.pdf)(PDF)中写到了这一点。它很好地描述了在开发 Saxon 时所做的设计选择。

# android - Android 2.3 中带有图标的 GridView 菜单

> ID：11631558
> 
> 赞同：0
> 
> 时间：2012-07-24T13:08:01.513
> 
> 标签：android, android-layout, gridview, menu, android-image

我正在为 android 开发一个应用程序，并希望使用 GridView 构建一个带有图标的菜单。为此，我使用了[http://www.edumobile.org/android/android-beginner-tutorials/draw-menu-in-grid-view/](http://www.edumobile.org/android/android-beginner-tutorials/draw-menu-in-grid-view/)的现有解决方案，但结果系统显示**mThumbIds** -**无法解决对于一个变量**，当我尝试将其声明为新的局部变量时，错误仍然存​​在。我是android新手，可能犯了非常简单的错误，但我自己无法解决。因此，任何建议都会有所帮助。这是代码：

```
 public class ImageAdapter extends BaseAdapter {
    public ImageAdapter(Context c) {
        mContext = c;
    }
    public int getCount() {
        return mThumbIds.length;
    }
    public Object getItem(int position) {
        return position;
    }
    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;

        if (convertView == null) {
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(45, 45));
            imageView.setAdjustViewBounds(false);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    private Context mContext;
    private Integer[] mThumIbs = {
            R.drawable.ic_cards, R.drawable.ic_bank,
            R.drawable.ic_currency, R.drawable.ic_calc,
            R.drawable.ic_banking, R.drawable.ic_call,
    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:08:59.677

你有一个错字：

```
private Integer[] mThumIbs = {
            R.drawable.ic_cards, R.drawable.ic_bank,
            R.drawable.ic_currency, R.drawable.ic_calc,
            R.drawable.ic_banking, R.drawable.ic_call,
    }; 
```

而不是**mThumbIbs**，这不应该是**mThumbIds**吗？

# .net - 对于 Windows 或 Linux 的 Paradox 表等数据库表，什么是好的选择？

> ID：11631559
> 
> 赞同：0
> 
> 时间：2012-07-24T13:08:01.910
> 
> 标签：.net, linux, database, delphi-prism

我的软件是围绕 BDE 引擎和用于 Windows 的 Paradox 表构建的，而我正在将其转换为 .NET。我正在寻找实现我的 .NET 软件的数据库功能的选项。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:59:58.567

我推荐[SQLite](http://www.sqlite.org/)。它简单、快速、受支持且经过严格测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:55:10.137

正如我所预料的那样。在数据库实现方面有太多的 if 和 buts 。据我了解，BDE 已经很久没有得到支持了。但是，过去 5 年我们一直在使用它。现在他们也不支持 FireBird。它已停产。相反，他们现在拥有 JayBird。听起来您需要在系统上安装 SDK JVM 引擎（如果尚未安装它才能工作）。

我想，我将利用好旧的平面文件。这会很简单。我们希望拥有真正的数据库表的主要原因之一是能够使用 SQL 语句搜索表，这就是我们现在通过 BDE 引擎所做的。

# javascript - jQuery .offset() 表现相当糟糕

> ID：11631560
> 
> 赞同：0
> 
> 时间：2012-07-24T13:08:05.300
> 
> 标签：javascript, jquery, css

所以我在一个元素中有这个`<div class="help">`（一个帮助框或你会称之为的东西） 。`<td>`帮助框最初不显示，但当鼠标悬停在`<td>`. 帮助框的定位是通过 jQuery 完成的，通过这个小片段：

```
var $help = $that.add($cousin).find("div.help").first();
var height = $help.parent().siblings().first().height();
$help.offset({
    top: $help.parent().offset().top + height,
    left: $help.parent().offset().left
});
$help.css("display", "block"); 
```

我发现我们是否有一个帮助框，当悬停一个`<td>`单元格时，获取第一个兄弟的高度，`<td>`然后重新定位。这确实有效！

...第一次。当`<td>`再次悬停时，帮助框似乎位于屏幕外，因为我看到一个水平滚动条，每次悬停时其宽度都会增加。所以我想我的使用有问题`.offset()`。帮助`<div>`有`position: absolute`，但我认为这与 CSS 无关。

帮助一个高大英俊的瑞典人出去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:29:44.650

根据评论：

在这里查看我的小提琴[http://jsfiddle.net/gRoberts/h3T6u/](http://jsfiddle.net/gRoberts/h3T6u/)，它展示了如何使用 css 和 position 属性来实现你想要做的事情。

希望有帮助；）

# mongodb - MongoMapper、Padrino 和Passenger - 连接失败？

> ID：11631561
> 
> 赞同：0
> 
> 时间：2012-07-24T13:08:24.000
> 
> 标签：mongodb, passenger, mongomapper, padrino

我目前正在开发一个 Padrino 项目，该项目在开发中运行得非常好，但是在将它推送到我的生活环境之后，我遇到了问题。检查日志，我得到的错误是：

```
[31m  ERROR[0m -[33m24/Jul/2012 11:32:53[0mMongo::ConnectionFailure - Operation failed with the following exception: #<Mongo::ConnectionFailure:0xa762528>: 
```

我的`database.rb`文件是Padrino生成的标准文件，即：

```
MongoMapper.connection = Mongo::Connection.new('localhost', nil, :logger => logger)

case Padrino.env
  when :development then MongoMapper.database = 'licensing_development'
  when :production  then MongoMapper.database = 'licensing_production'
  when :test        then MongoMapper.database = 'licensing_test'
end 
```

一切都在控制台中完美运行，所以我假设问题与Passenger有关。有什么想法我可能会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:28:35.783

好吧，那就无视我吧。`RACK_ENV`我在运行导入数据的 rake 任务时以及启动控制台时忘记设置，所以我的生产数据库中没有数据。

# styles - 如何在碧玉报告的图表中使用条件样式？

> ID：11631570
> 
> 赞同：-1
> 
> 时间：2012-07-24T13:08:54.087
> 
> 标签：styles, jasper-reports, report, conditional

我想根据某些条件绘制我的条形图（在条形图中），但我找不到如何做到这一点的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:12:53.827

我不知道它是从什么版本开始工作的，但如果你有最新版本，它应该可以工作：

*   打开报表导航；

*   在分支“样式”上单击右键，然后单击添加一个新的；

*   在新样式上，您再次单击右键并创建条件样式；

*   再次右键单击新的条件样式并编辑您的条件，之后您只需根据需要设置您的样式。

# c++ - Unix域：connect（）：没有这样的文件或目录

> ID：11631578
> 
> 赞同：8
> 
> 时间：2012-07-24T13:09:29.963
> 
> 标签：c++, unix-socket

如标题中所述，我对具有相应地址的 unix 域类型套接字的*connect()*调用导致错误**ENOENT: no such file or directory**。

正确初始化了两个套接字，并相应地创建和绑定了套接字文件。服务器和客户端套接字在不同的进程中运行，尽管客户端进程是 fork()-ed 和 execl()-ed。这也是我解析客户端和服务器套接字地址的方式，我用它来设置客户端套接字。服务器进程正在使用 pthreads。

这是我的*connect()*尝试：

```
struct sockaddr_un address;
address.sun_family = AF_UNIX;
memcpy(address.sun_path, filepath.c_str(), filepath.length());
address.sun_path[filepath.length()] = '\0';

if(-1 == connect(this->unix_domain_descriptor_.descriptor(),       \
                (struct sockaddr*)&address,                       \
                size))
{
    global::ExitDebug(-1, "connect() failed", __FILE__, __LINE__);
    return -1;
} 
```

我尝试了不同的大小值，例如：

```
//  this is from unix(7) man page. It doesn't work neither with nor without "+1"
socklen_t size =  offsetof(struct sockaddr_un, sun_path);
          size += strlen(address.sun_path) + 1; 
```

* * *

```
//  this is from one of my books about linux programming
socklen_t size = sizeof(address); 
```

* * *

```
//  this is from a sample code which I found at the internet
socklen_t size = sizeof(address.sun_family) + strlen(address.sun_path); 
```

* * *

```
//  Update 1: 
socklen_t size = SUN_LEN(&address); 
```

* * *

```
//  this is what I tried out after looking into the declaration
//  of struct sockaddr_un
socklen_t size = strlen(address.sun_path); 
```

* * *

令人惊讶的是，除了最后一个之外的所有初始化都会导致**EINVAL:** *connect()*的参数无效错误，我得到**ENOENT: no such file or directory**只有最后一个。我什至从互联网上尝试了整个示例，但没有成功。*显然，用 size_t 或int*交换 socklen_t不会改变任何东西。

我已经检查过了：

*   address.sun_path 包含从根目录开始的正确套接字文件路径
*   address.sun_path 的长度为 61 个字符
*   address.sun_family 设置为 AF_UNIX/AF_LOCAL
*   address.sun_family 的大小为 2 个字节
*   创建和绑定两个套接字时没有错误
*   服务器套接字处于监听状态
*   sizeof(address) 返回 110，因为它应该是

现在我想知道为什么手册页示例不起作用以及是否有未在[linux.die.net](http://linux.die.net "linux.die.net")或[www.kernel.org](http://www.kernel.org "www.kernel.org")更新的更改。如果相关的话，我的操作系统是 Debian Squeeze。

任何想法我做错了什么？以及如何解决？如果您需要更多代码或有疑问，请随时问我（虽然我可能不需要说明这一点，但这是我在这里的第一篇文章>.<）。

*顺便说一句，对不起我的英语不好*

## 更新 2

解决了。为了清楚起见，我将在下面的额外答案中发布它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:55:38.067

在确定我正确处理了套接字之后，我稍微修改了 connect() 的代码，现在它可以工作了。我刚刚在我的变量声明后添加了这一行：

```
memset(&address, 0, sizeof(struct sockaddr_un)); 
```

有谁知道为什么我需要将整个变量设置为 0 才能使其工作？我应该在一个新的话题中问这个还是我可以在这里问这个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:27:59.067

引用[glibc 手册](http://www.gnu.org/software/libc/manual/html_node/Local-Namespace-Details.html)：

> 您应该将本地命名空间中套接字地址的 LENGTH 参数计算为`sun_family`组件大小和文件名字符串的字符串长度（*不是*分配大小！）的总和。这可以使用宏来完成`SUN_LEN`：
> 
> *   宏： int SUN_LEN (_struct sockaddr_un *_ PTR)
>     该宏计算本地命名空间中套接字地址的长度。

下面的[示例](http://www.gnu.org/software/libc/manual/html_node/Local-Socket-Example.html)使用您说它失败的计算：

```
size = (offsetof (struct sockaddr_un, sun_path)
       + strlen (name.sun_path) + 1); 
```

但是你应该试试那个宏。如果发生了一些变化，或者示例错误，那么该宏仍然很有可能按预期工作。如果是这样，你可以看看它的内脏。乍一看，在我看来，宏缺少`+ 1`所有示例中使用的部分。这与手册中的警告相匹配，使用“<em>not the allocation size!” 正如您的帖子所说，如果没有这两者都行不通`+ 1`，但机会很小。

出于好奇，路径的长度是多少？您是否检查过结构中提供的字段是否足够大以容纳它？您`sizeof(address.sun_path)`的实施中有什么？我想知道您是否可能正在复制到未保留的内存，并且部分路径在下一次函数调用时被覆盖。

# php - 正则表达式 li 和 a

> ID：11631579
> 
> 赞同：-3
> 
> 时间：2012-07-24T13:09:33.090
> 
> 标签：php, preg-split

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我试图弄清楚如何通过正则表达式获取 -tagg 中的单词/单词。我的内容是这样的：

```
<li id="menu-item-90" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-90"><a href="http://example.com/">Start</a></li>
<li id="menu-item-484" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-484"><a href="http://example.com/test/">Test</a></li>
<li id="menu-item-375" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-375"><a href="http://example.com/test2/">test number two</a></li>
<li id="menu-item-171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-171"><a href="http://example.com/test3/">Test 3</a></li> 
```

所以上面的代码我只想从中得到以下内容：

*   开始
*   测试
*   测试二
*   测试 3

如何使用 preg_split 和格式化链接上的正则表达式来实现这一点？我尝试了以下方法，但我的正则表达式技能不是第一。只输出一个空数组。

```
$tag = 'a';
$topMenuValues = preg_split('{<'.$tag.'[^>]*>(.*?)</'.$tag.'>}', $topMenuValues); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T13:15:40.980

您正在拆分整个`<a..>...</a>`标签，这意味着它与整个标签匹配。问题在于`(.*?)`中间，您应该将它们与您的分隔符正则表达式匹配。试试吧

```
'{(<'.$tag.'[^>]*>)|(</'.$tag.'>)}' 
```

话虽如此，这仅适用于上述 html 的特定实例。你真的应该使用 html 解析器

[用于 PHP 的强大且成熟的 HTML 解析器](https://stackoverflow.com/questions/292926/robust-mature-html-parser-for-php)

# css - 如何使只有一个行列表比屏幕宽？

> ID：11631580
> 
> 赞同：2
> 
> 时间：2012-07-24T13:09:33.800
> 
> 标签：css, list, user-interface

我有一个列表，它的长度是可变的，它可以有 4 项或 30 项。

问题是这个列表被渲染为一个选取框，通过一个正在工作的 Javascript，但是项目达到了屏幕宽度，然后它们传递到下一行。

我想让所有项目都在同一行，这样我就可以移动列表来重新创建选取框效果。

![我有什么和我想要什么](../Images/e73bbbfe494d4ac608ffc7c347df89ec.png)

```
<div class="submenu-container">
<div id="agrupador">
 <ul style="font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 11px;" class="submenu" id="moverlo">
       <li> Item </li>
       <li> Item </li>
       <li> Item </li>
       <li> Item </li>
       <li> Item </li>
       <li> Item </li>
     </ul>
    </div>
</div>

    .submenu-container {
    background:#F0F7FF;
    border-bottom:1px silver solid;
    width: 100%; 
    overflow: hidden;
}

.submenu li {
    display: inline-block;
    margin-left:4px;
    background:none;
    *display: inline; /* IE */
    float:left;
}

.submenu {
    margin:0;
    padding-top:8px;
    padding-bottom:8px;
    padding-left:0;
    padding-right:0;
    clear:none;
    width:auto;
    float:left;
} 
```

并使用 javascript：

```
function ClonarAvisos(){
var width = alertSize(); // Usable window width
var xVarScreen = width - $('moverlo').getWidth();
alert($('moverlo').getWidth());
$('moverlo').setStyle({ width: $('moverlo').getWidth() + xVarScreen });
$('agrupador').setStyle({ width: $('moverlo').getWidth() * 2 });
var clon = Element.clone('moverlo', true);
clon.id = 'moverlo2';
$('agrupador').insert(clon); 
```

}

```
function MoveNoticias(p) {
//Función que imita el comportamiento del Tag "marquee"
new Effect.Move('agrupador', {
    x: -3,
    y: 0,
    mode: 'relative',
    duration: 0.1,
    afterFinish: function() {
        var offSetDistance = $('agrupador').offsetLeft ;
        offSetDistance = Math.abs(offSetDistance);
        var gettingWidth = $('moverlo').getWidth() ; 
        if ( offSetDistance >= gettingWidth ) {
            Element.setStyle('agrupador', {left: '0px' });
        }
        MoveNoticias();
    }
});
} 
```

我希望你明白我想要做什么！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:33:37.410

尝试从`float: left`中删除`li`，并添加`white-space: nowrap`到“ul”。

我在这里试过：http: [//jsfiddle.net/76d6p/](http://jsfiddle.net/76d6p/)

# javascript - 如何将事件侦听器添加到 jEditable 输入？

> ID：11631582
> 
> 赞同：3
> 
> 时间：2012-07-24T13:09:43.110
> 
> 标签：javascript, jquery, jquery-events, jeditable

如何将事件侦听器添加到 jEditable 输入？

默认情况下，`ENTER`密钥用于提交，但我还需要其他密钥来提交值吗？

```
 $('.editable').editable(function(value, settings) { 
     console.log(this);
     console.log(value);
     console.log(settings);
     return(value);
  }, { 
     width: "100%"
     onblur: 'submit'
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:37:16.780

您可以`keypress`在文档中添加一个事件监听器来监听那些被按下的额外键。

每当您开始编辑某些内容时，jEditable 都会向页面添加`form`一个类。`editable`使用`.on()`注册事件侦听器将确保即使在`form`块被动态添加到页面时也会触发处理程序。

**这是[一个工作示例](http://jsfiddle.net/REbsr/)。**

这只是说明如何确定何时按下“空格”或“#”。您必须修改代码才能为您工作。

```
<form class="editable">
  <input type="text" class="editable" />
</form>​

$(document).ready(function() {
    $('form.editable').on('keypress', function(e) {
        if (e.keyCode === 32 || e.keyCode === 35) alert('Time to submit!');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T13:30:43.493

Jason 的解决方案不起作用：jEditable 在事件（单击、dbleclick ...）上添加表单和输入，因此当您在准备好文档时执行该功能时，它们不存在！

您可以修改 jEditable 之前添加此代码`input.keydown`：

`input.keyup(function(e){if (e.keyCode === 32 || e.keyCode === 35) alert('Time to submit!');});`

# computer-vision - 有哪些好的过滤器可用于通过提升来生成特征

> ID：11631587
> 
> 赞同：1
> 
> 时间：2012-07-24T13:09:56.460
> 
> 标签：computer-vision

我正在尝试实现类似于此处给出的方法：

research.microsoft.com/en-us/um/people/viola/Pubs/MIT/tieuIJCV.pdf

与查询图像“相似”的图像是通过对从图像生成的特征使用 AdaBoost 来从数据库中检索出来的，该特征是通过反复过滤和缩小它们的大小来实现的。

该论文显示了它用于检测基本图像特征（垂直线、对角线、角等）的过滤器的图像，并指出这些是可分离的，但没有准确说明这些特征的矩阵是什么。有谁知道过滤器使用了哪些矩阵，或者一般来说，什么是过滤器的好选择，用于检测与提升一起使用的简单几何形状。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:50:36.683

它们似乎与同一作者在他的第一篇 boosting 论文中描述的 Haar 特征相似。

[点击这里](http://research.microsoft.com/en-us/um/people/viola/Pubs/Detect/violaJones_CVPR2001.pdf)

在课堂上实现 AdaBoost 时，我只使用了 haar 功能。一般来说，我想你可以制作自己的 haar 过滤器，一些简单的例子可以在[这里看到。](http://morph.cs.st-andrews.ac.uk/fof/haarDemo/index.html)

# java - Java检查日期是否为下周日

> ID：11631588
> 
> 赞同：2
> 
> 时间：2012-07-24T13:09:56.593
> 
> 标签：java, date

我得到一个日期并想检查它是否是下一个星期日。我找到了很多日历等代码，但我找不到正确的代码。而且我真的不明白我怎么知道约会后是否是下个星期天。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:13:13.743

分解问题：

1.  获取今天的日期：`new Date();`
2.  获取今天日期的星期几。
3.  提前到周日
4.  得到那个日期

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T13:13:17.513

首先，我推荐[Joda Time](http://joda-time.sourceforge.net/)作为比`Calendar`.

至于您的处理，它分为几个简单的步骤：

1.  `DateTime`为两个日期构造对象
2.  检查目标日期是否为星期日
3.  检查它们之间的差异是否在 0 到 7 天之间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:12:58.190

如果您寻找不错的日期管理，请查看[Joda Time](http://joda-time.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:14:01.273

[这](https://stackoverflow.com/questions/4637238/how-to-check-if-its-saturday-sunday)可能对您有帮助，您可以在添加一天后按 dayOfWeek == Calendar.SUNDAY 进行检查

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-29T19:54:28.333

使用[Lamma Date](http://lamma.io)很容易首先获得下周日，然后我们可以使用`equals`检查日期是否为下周日。

```
 Date today = new Date(2014, 7, 1);  // assume today is 2014-07-01
    Date nextSunday = today.next(DayOfWeek.SUNDAY);     // 2014-07-06 
```

# selenium - 如何使用 JUnit4 在 Selenium Webdriver 中捕获测试失败？

> ID：11631598
> 
> 赞同：1
> 
> 时间：2012-07-24T13:10:43.220
> 
> 标签：selenium, webdriver, apache-poi, junit4

*我需要在Excel*报告中写入测试用例`Pass/Fail`状态。如何以简单的方式捕获结果？在 Ant报告中显示状态*（成功/失败）*，所以我相信一定有某种方法可以捕捉到这个……可能在. 谁能帮我解决这个问题？*`XML/HTML`*`@After Class`** 

 **我正在将*Selenium Webdriver*与*JUnit4*一起使用，并使用*Apache POI*（哦，这也让我心烦意乱！）进行 excel 处理。如果您需要更多信息，请告诉我。

谢谢 ：）

PS：当我问了很多问题时，如果有人可以更改或建议我更改以使这些问题和线程对其他人有所帮助，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T05:32:30.873

我遇到了你的问题，这就是我现在在所有测试用例中所做的 -

在您的测试用例中，如果您想检查 2 个字符串是否相等 -

您可能正在使用此代码 -

```
Assert.assertTrue(value1.equals(value2)); 
```

如果这些值不相等，则会生成 AssertionError。

相反，您可以像这样更改代码 -

```
String testCaseStatus = "";
if(value1.equals(value2)){
   testCaseStatus = "success";
}
else{
   testCaseStatus = "fail"; 
 } 
```

现在，您通过将 传递给您的代码将此结果存储在您的 Excel 工作表中，该`testCaseStatus`代码向您使用 Apache POI 实现的 Excel 添加一行。如果你实现了一个 try catch 块，你也可以处理“错误”的情况。

例如，您可以捕获一些异常并将状态作为错误添加到您的 Excel 工作表中。

**编辑部分答案 -**

我刚刚想出了如何使用 TestResult 类 - 这是我发布的一些示例代码 -

这是名为 ExampleTest 的测试用例类 -

```
public class ExampleTest implements junit.framework.Test {

@Before
public void setUp() throws Exception {
}

@After
public void tearDown() throws Exception {
}

@Test
public void test(TestResult result) {

    try{

        Assert.assertEquals("hari", "");

    }catch(AssertionFailedError e){

        result.addFailure(this, e);         
    }catch(AssertionError e){
        result.addError(this, e);
    }

}

@Override
public int countTestCases() {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public void run(TestResult result) {

    test(result);
} 
```

}

我从这段代码中调用上面的测试用例 -

```
public class Test {

public static void main(String[] args) {

    TestResult result = new TestResult();

    TestSuite suite = new TestSuite();

    suite.addTest(new ExampleTest());

    suite.run(result);

    System.out.println(result.errorCount());

} 
```

}

您可以通过将它们添加到此套件来调用许多测试用例，然后使用 TestResult 类的[failures()](http://www.junit.org/junit/javadoc/3.8.1/junit/framework/TestResult.html#failures%28%29)和 errors() 方法获取整个结果。

您可以从[这里](http://junit.sourceforge.net/doc/cookstour/cookstour.htm)阅读更多信息。**

# jquery - 使用 jQuery 获得元素大小的几率为 50/50

> ID：11631606
> 
> 赞同：1
> 
> 时间：2012-07-24T13:11:25.267
> 
> 标签：jquery, image, window, image-size

我有一个奇怪的问题，我发现很难在 jsfiddle 上重现。我能做的最好的就是[这样](http://jsfiddle.net/SUst2/)，但每次都打印出正确的宽度和高度。

同时它只工作 50% 的时间。其他时候它得到 0 作为图像大小和宽度。

我的 HTML 是：

```
<div role="main" id="main">
<div class="row">
    <div class="twelve columns" style="float:none;">
            <img src="/media/files/clientfiles/test1_X-1a_.png" id="editorImage">
    </div>
    <div class="four columns">zalalal</div>
</div>
</div> 
```

匹配的css是：

```
#main {
width: 1000px;
margin: 50px auto;
background: white;
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
-moz-box-shadow: 0px 0px 5px rgba(0,0,0,0.23);
-webkit-box-shadow: 0px 0px 5px rgba(0,0,0,0.23);
box-shadow: 0px 0px 5px rgba(0,0,0,0.23);
color: #666;}

.row {
width: 1000px;
max-width: 100%;
min-width: 768px;
margin: 0 auto;
}

.row .twelve {
width: 75%;
}

.column, .columns {
float: left;
min-height: 1px;
padding: 0 10px;
position: relative;
} 
```

和 javascript 是

```
jQuery(function($){
        var element = $('#editorImage');
        console.log(element);
        console.log(element.width());
        console.log(element.height());
        console.log(element.outerWidth());
        console.log(element.outerHeight());
        console.log(element.offsetWidth);
        console.log(element.offsetHeight);
}); 
```

起初我认为这与在文档准备好之前尝试获取元素大小有关，但`jQuery(function($...`应该注意这一点，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:13:50.140

你应该陷进去`window.load`，不是`document.ready`。

后者等待 DOM 树准备好，但如果您还想等待所有图像加载，则前者是必要的。

```
$(function() {
    // do DOM ready related stuff here
});

$(window).on('load', function() {
    // do image related stuff here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:14:29.910

您确定图像已加载吗？

尝试在 $(window).load(function); 之后获取尺寸 或 $(img).load(function);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T13:58:55.427

其他人建议使用 a`$(window).load`但是我可能会建议使用不同的选项。

由于您可能希望在加载特定图像后立即设置样式，例如假设您加载了 100 个图像，并且每行样式仅依赖于一个图像，因此您不想等待所有图像加载。

您可以`.load`在图像上使用该函数，但是您必须小心，因为如果图像存储在缓存中，某些浏览器将不会调用此函数，因此我将我的函数拆分如下，您可以在需要时传递参数对于我的例子，我会把它们排除在外。

```
function imageLoadedFunction() {
    //some code to execute once the image has loaded
    //(you could pass a reference to the image in the function)
}

$(document).ready(function() {
    $image = $('#imageId');
    if($image.width() != 0)
        imageLoadedFunction();
});

$('#imageId').load(function() {
    imageLoadedFunction();
}); 
```

这确保了如果图像未缓存`load()`，则在图像完成加载后将调用该函数，如果图像已缓存，则将从准备好的文档中调用该函数。

# variables - 将php变量添加到 这是我的代码还有很多但是这些独立工作 echo $row['Queue']; echo "[Modify](\"modifyp.php?id=")"; 我想做的是这个 echo "[Modify](\)"; 我想做的是这个 echo "[$row['Queue']](\"modifyp.php?id=")"; 这不起作用并给出语法错误。关于如何使它工作的任何提示？ 谢谢！ 回复电子邮件中是否会包含自定义电子邮件标题？ 我正在编写一个 C# 应用程序来发送带有自定义标题的电子邮件。如果我向具有自定义标题的人发送电子邮件并且他们回复，它会在回复中保留该自定义标题吗？ variableshref 4 2 回答 2 This answer is useful 1 这将是： echo "[" . $row['Queue'] . "](\"modifyp.php?id=")"; 于 2012-07-24T13:13:19.787 回答 This answer is useful 1 echo "[".$row['Queue']."](\"modifyp.php?id=")"; 于 2012-07-24T13:13:44.947 回答 Related 2 java - Java最通用的第三方链表是什么？ 1 css - 过渡期间闪烁的固定背景 1 c# - 我可以将文件和数据发布到 .net mvc web api 控制器吗 1 python - 在 python (django) 中选择性地导入模块 1 ruby - 如何定期监控sketchup ruby 插件中的url？ 1 mysql - 将不同 MySQL 表的列粘贴到 ascii 文件中 1 google-apps-script - Google Doc Script onEdit 1 jquery - 在我的简单响应菜单中添加一个简单的下拉菜单 4 java - java的cron库 1 asp.net - grdivew 回发值中的动态模板字段 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11631608
> 
> 赞同：0
> 
> 时间：
> 
> 标签：variables, href

这是我的代码还有很多但是这些独立工作

```
echo $row['Queue'];
echo "<a href=\"modifyp.php?id=" . $row['id1'] . "\">Modify</a>"; 
```

我想做的是这个

```
echo "<a href=\"modifyp.php?id=" . $row['id1'] . "\">$row['Queue']</a>"; 
```

这不起作用并给出语法错误。关于如何使它工作的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:13:19.787

这将是：

```
echo "<a href=\"modifyp.php?id=" . $row['id1'] . "\">" . $row['Queue'] . "</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:13:44.947

```
echo "<a href=\"modifyp.php?id=" . $row['id1'] . "\">".$row['Queue']."</a>"; 
```

# c# - 回复电子邮件中是否会包含自定义电子邮件标题？

> ID：11631609
> 
> 赞同：2
> 
> 时间：2012-07-24T13:11:32.107
> 
> 标签：c#, email, email-headers

我正在编写一个 C# 应用程序来发送带有自定义标题的电子邮件。如果我向具有自定义标题的人发送电子邮件并且他们回复，它会在回复中保留该自定义标题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:18:32.997

可能不是。

回复消息的格式或内容（通常作为电子邮件消息的特殊情况）在任何方面都没有标准化；因此，邮件客户端可以自由地包含（或不包含）任何被认为相关的部分。在大多数情况下，不保留标头。

所以：标题*可能*出现在回复中，但这更多的是巧合而不是确定性。

您可以做什么：将某种标识符嵌入到邮件中——例如，嵌入到`Subject`、`From`地址或可能`Reply-To`中，并保存您发送的特定标题。然后，如果收到回复，您就可以查找该特定消息的内容。

# java - 如何在集群中维护会话或变量状态或对象状态（特别针对基于 Java 的应用服务器）？

> ID：11631620
> 
> 赞同：0
> 
> 时间：2012-07-24T13:12:23.817
> 
> 标签：java, jakarta-ee, appserver

假设当我的应用程序通过集群中的一个节点访问并进行修改时。节点突然发生某些事情并被集群中的另一个节点接管，转换是否会正确发生，是否会丢失任何东西？

我确实看到了一些参考资料，但仍然不清楚应用程序是如何在集群环境中维护的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:26:50.863

可以使用分布式会话缓存或存储，例如与 Glassfish 兼容的[Hazelcast 之一](http://www.hazelcast.com/documentation.jsp#HttpSessionClustering)

# string - 使用 XE2 进行远程调试 - 显示字符串

> ID：11631625
> 
> 赞同：58
> 
> 时间：2012-07-24T13:12:43.950
> 
> 标签：string, delphi, debugging, delphi-xe2, remote-debugging

我正在远程调试 DElphi XE2（更新 #4）和 Windows XP 目标之间的大型应用程序。PAServer 正在目标上运行，应用程序运行良好并在断点处停止（您不会相信该成就有多难 - 提示 - 如果它已通过 XE 之前的任何 IDE，请删除您的 DPROJ 并重新开始）。

我注意到，与本地调试时看到的“某些字符串”格式的通常显示相比，局部变量和手表的显示以一种奇怪的格式显示我的字符串。我懂了：

![在此处输入图像描述](../Images/760030fbf1a91247c349380e6121695c.png)

谁能告诉我为什么字符串会这样显示？在尚未分配的输出变量上，我还得到了相当多的 { NULL } 和 {} 之间的垃圾。谢谢。

. 我看到这种格式表示宽字符串。我在 Windows 7 上尝试了一个简单的应用程序，得到了以下结果。我的应用程序处于断点：

![在此处输入图像描述](../Images/cee6855d928d64504eca5c8be0cc1471.png)

显示的本地字符串变量：

![在此处输入图像描述](../Images/196fca637370d778c811570f3806f322.png)

请注意截断的“Hello”。XE2 似乎有时会遇到远程 unicode 字符串的问题。我的 PaServer 是 1.0.2 版。任何人都可以检查这是最新的吗？'Twas from Update #4...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T22:27:19.850

我不完全确定为什么您在字符串值周围有 {}，-我的直觉是它是为了证明这些值来自远程执行-但我知道`S`由于优化而被截断的事实。 ..

```
{$O-} // Disable Optimization
var
  S: AnsiString;
  S2: UnicodeString;
begin
  S := 'Hello';
  S2 := 'Hello2';
  ShowMessage(S2);
end;
{$O+} // Enable Optimization 
```

您现在会注意到，值 'Hello'（变量`S`）在调试时保持不变。同样，如果您使用分配给的值`S`：

```
var
  S: AnsiString;
  S2: UnicodeString;
begin
  S := 'Hello';
  S2 := 'Hello2';
  ShowMessage(S + S2);
end; 
```

Delphi 的优化现在可以识别`S`在其有效范围内使用的，因此保留了该值。

所以，你所说的“错误”实际上是一个“编译器功能”，正如 Borland/Inprise/Codegear/Embarcadero 所期望的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:18:43.403

（我正在从@Dave 复制代码）

```
var
  S1: AnsiString;
  S2: UnicodeString;
begin
  S1 := 'Foo';
  S2 := 'Bar';
  ShowMessage(Format('%s!', S2));
end; 
```

我猜这里的本地 var S1 是优化的，因为它没有在任何地方使用，所以该值不再相关。

尝试在本地机器上运行它，你能看到 S1 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T01:42:21.773

我不确定它是否相关，但我知道 System.AnsiStrings 包含专门的命令，如“格式”等......使用类似以下的内容可能会解决您的问题：

```
var
  S1: AnsiString;
  S2: UnicodeString;
begin
  S1 := 'Foo';
  S2 := 'Bar';
  ShowMessage(Format('%s!', S2));
end; 
```

还有一些开放的错误，只是为了排除其中任何一个，您使用的是哪些特定版本的操作系统和工具，即 Win7 x64 Ultimate 等？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T10:36:07.093

项目 -> 选项 -> Delphi 编译器 -> 链接 -> 包括远程调试符号 = true

# asp.net - IIS Express - 临时模拟经过身份验证的用户

> ID：11631630
> 
> 赞同：2
> 
> 时间：2012-07-24T13:12:53.240
> 
> 标签：asp.net, security, iis-express

根据这份文件：

> [http://msdn.microsoft.com/en-us/library/ff647405.aspx](http://msdn.microsoft.com/en-us/library/ff647405.aspx)

我在 web.config 中设置了以下内容

```
<authentication mode="Windows" />
<identity impersonate="false" /> 
```

并且还在 IIS Express 7.5 的 applicationhost.config 中进行了设置

```
<anonymousAuthentication enabled="false" userName="" />

<windowsAuthentication enabled="true">
  <providers>
    <add value="Negotiate" />
    <add value="NTLM" />
  </providers>
</windowsAuthentication> 
```

但是 System.Threading.Thread.CurrentPrincipal.Identity 仍然始终等于经过身份验证的用户的 Windows 身份，即不是运行 IISExpress.exe 的帐户（我的开发帐户）。

需要明确的是，我以帐户 A 登录，IIS Express 作为帐户 A 运行，但我使用帐户 B 调用我的 Web 服务（在 HttpWebRequest 上设置凭据），但服务器端代码作为帐户 B 运行，即线程有这个ID，我可以访问网络资源。

我希望以帐户 A 的身份执行（在产品服务器上，作为服务帐户），并且仅在我想要的时候模拟。

我做错了什么还是这个领域在 IISX 中没有完美实现？

谢谢

卢克

# 更新 1

所以，我想我知道发生了什么；请参阅下面的答案。问题是它似乎在反向工作！

```
string n1 = System.Security.Principal.WindowsIdentity.GetCurrent().Name;    // Runtime account.
string n2 = System.Threading.Thread.CurrentPrincipal.Identity.Name;         // Calling account.

var winId = (System.Security.Principal.WindowsIdentity)HttpContext.Current.User.Identity;
System.Security.Principal.WindowsImpersonationContext ctx = null;
try
{
    bool b = System.IO.File.Exists(@"d:\p\p.txt");    // true (!)

    using (ctx = winId.Impersonate())
    {
        // Now impersonating. Access (local) resources using the identity of the authenticated user.

        n1 = System.Security.Principal.WindowsIdentity.GetCurrent().Name;   // Calling account.
        n2 = System.Threading.Thread.CurrentPrincipal.Identity.Name;        // Calling account.

        b = System.IO.File.Exists(@"d:\p\p.txt");     // false (!)
    }
... 
```

文件夹 d:\p 设置为仅允许调用帐户访问，这在 DOS 中测试时很好，但从我的 Web 服务，它可以访问，我希望这是因为线程具有调用者的安全上下文，在我之前开始冒充了！

更奇怪的是，当我冒充时，我突然无法访问它！

我将在适当的 IIS 7.5 服务器上创建一个测试项目，看看这是否是 IIS Express 中的错误。

# 更新 2

Exists 测试的问题已经解决了一半。我删除了对该文件夹的权限，但文件本身仍然具有一些权限，并且 .NET 在不遍历文件夹的情况下访问文件的方式意味着它仍然可以访问它。

现在我明白了

```
b == false // as expected.
...
b == false // unexpected, after impersonation I should be able to see this file. 
```

我希望冒充可以让我访问，但事实并非如此。

# 更新 3

我已经放弃了。模拟不起作用，我只能假设它是网络策略或一些无法发现的隐藏设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:11:09.293

知道了。有点。

```
string n1 = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
string n2 = System.Threading.Thread.CurrentPrincipal.Identity.Name; 
```

n1 = 进程标识 n2 = 调用者的标识

线程的安全上下文有调用者的身份，这是我没想到的。我认为线程会有流程的上下文流向它，但这显然不是它的工作方式。

我现在有一个有趣的情况，当我在呼叫者 WindowsIdentity 上调用 .Impersonate 时，我仍然无法访问呼叫帐户许可的本地文件，但我会解决这个问题并更新我的答案。

**查看有问题的更新**

# android - 如何在Android中隐藏和显示TabWidget的上半部分

> ID：11631631
> 
> 赞同：2
> 
> 时间：2012-07-24T13:12:53.983
> 
> 标签：android

我正在android中开发一个应用程序。我需要在Android的TabWidget中实现一些功能，以便在单击某个按钮时，Tab小部件的上部将被隐藏并且其内容仅可见。再次单击该按钮时，上部可以再次可见。通过这种方式，我们可以增加结果区域来显示其内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:25:31.493

这应该这样做：

```
public void hideOrShowTabWidget(){
tabHost.getTabWidget().setVisibility((tabHost.getTabWidget().isShown() ? View.GONE : View.VISIBLE));
} 
```

更新了一些更好的代码:)

# php - PHP：需要解码嵌入 utf 字符的字符串

> ID：11631633
> 
> 赞同：0
> 
> 时间：2012-07-24T13:13:01.690
> 
> 标签：php, regex, utf-8, decode

我有一个字符串被解码为base36，即0-9a-z，任何其他字符都被解码如下：一个unicode字符代码，转换为base36，前面是大写字母'A'，后面是字母'B'。如果出现多个 unicode 字符，则只有最后一个字符后跟“B”。

例子：

```
zergme@wtfd-婴儿服饰.com 
```

转换为：

```
zergmeA1sBwtfdA19Ahv8Ag1rAkctAub4A1aBcom 
```

以这种方式转换数据很方便，但现在我对如何编写解码返回算法感到头疼。

我已经提供了一个将 charcodes 转换为 Unicode chars 的函数，我们称之为 'unichr($code)';

...但我想不出找到这些字符的好方法。

我试图首先使用正则表达式，例如：

```
preg_replace('/A.*?B?(?=[AB])/',"$1",$mail); 
```

但它并没有按照我想要的方式工作......而且我也没有意识到如何在比赛中投射我的自定义转换函数，即“unichr()”。

然后我也在考虑用 strpos() 手动查找字符，但结果也很混乱。

你能建议一些模式吗？或者我是否应该详细说明正则表达式或尝试使用一些循环？我有点空白...谢谢:)

**洛茂**

就是这样，看起来我想通了，感谢您的贡献：

```
'/A(.*?)((?=A)|B)/' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:30:33.677

如何使用 Base64 编码（gzcompress）和解码（gzuncompress）。

使用名称“testBase64.php”保存以下内容：

```
<?php
    if(isset($_POST['text'])){
       echo("<b>input:</b> ".$_POST['text']."<br/>");
       $c = gzcompress($_POST['text']); 
       echo("<b>base64 encoding:</b> .".$c."<br/>");
       echo("<b>base64 decoding:</b> " .gzuncompress($c));
       exit;
    }
?>

<html>

    <body>
       <form method=post action=testBase64.php>
          <input type=text name=text />
          <input type=submit />
       </form>
    </body>
</html> 
```

运行并在文本字段中输入“zergme@wtfd-婴儿服饰.com”。

**输出：**

> **输入：** zergme@wtfd-婴儿服饰.com
> 
> **base64 编码：** .xœ«J-JÏMu(/IKÑUS62645³Òæ–– ÚÌØÂH[YXë%ççG°@
> 
> **base64解码：** zergme@wtfd-婴儿服饰.com

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:41:48.887

您是否考虑过使用[`preg_replace_callback()`](http://php.net/preg_replace_callback)？它将一个函数而不是字符串作为替换值，并将匹配项传递给函数并使用函数的返回值作为替换字符串。

松散的例子，你必须玩一下

```
<?php
$str = 'zergmeA1sBwtfdA19Ahv8Ag1rAkctAub4A1aBcom';

function convert_to_unicode_cb( $match )
{
    // $match1 would be 1s, 19, hv8, etc
    return unichr( $match[1] );
}

preg_replace_callback( '/A(.*?)(?=A|B)/', 'convert_to_unicode_cb', $str ); 
```

# c# - enum_in.Single() 为 1 并引发异常

> ID：11631636
> 
> 赞同：0
> 
> 时间：2012-07-24T13:13:14.830
> 
> 标签：c#, linq

我正在执行以下代码：

```
private static T FooException<T>(this IEnumerable<T> enum_in)    
{    
    try    
    {
        return enum_in.Single();
    }    
    catch(InvalidOperationException e)    
    {
        throw new XXXException(enum_in.Count(),  e   ...
    }    
} 
```

并得到一个`InvalidOperationException`. 如果我看一下，`enum.Count()`那么正是一个项目。那是我不明白的。是否存在枚举可以使用 count = 1 并运行的情况`InvalidOperationException`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:17:47.447

并非所有 Linq 实现都支持所有操作。尝试`.First()`改用。

编辑：回答有关这不正确的评论。首先，我们不知道变量的具体类，所以即使你不知道任何不支持 Single 的实现，这并不意味着它不存在。

此外，我正在考虑 LINQ-To-Entity 实现。我的资料来源是[Microsoft Press for Exam 70-516](https://rads.stackoverflow.com/amzn/click/com/0735627398)，它在第 423 页上指出有一些不受支持的方法与分页有关：

> **分页**分页操作从序列中返回单个特定元素。支持的方法有 First、FirstOrDefault、Skip 和 Take。不支持的方法是 ElementAt、ElementAtOrDefault、Last、LastOrDefault、***Single***、SingleOrDefault、SkipWhile 和 TakeWhile。

在该章中，所有示例也使用 First 而不是 Single，这就是我特别注意这一点的原因。有趣的是，这与评论中链接的 msdn 文档相矛盾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:19:30.973

如果可枚举为空或序列包含多个元素，则 Single 会引发 InvalidOperationException。如果你调用 SingleOrDefault()，你会得到什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:21:09.813

[MSDN](http://msdn.microsoft.com/de-de/library/bb155325.aspx)说

无效操作异常

输入序列包含多个元素。

-或者-

输入序列为空。

所以我猜你或者 MSDN 是错的。你也尝试过 SingleOrDefault 吗？也许它是空的。

# javascript - Javascript regex 文件类型使 chrome 崩溃

> ID：11631639
> 
> 赞同：2
> 
> 时间：2012-07-24T13:13:17.413
> 
> 标签：javascript, regex

我在尝试匹配最后包含图像文件扩展名的 url 时遇到了一个奇怪的问题。im 使用的正则表达式非常简单（没有 url 验证，但现在第一次迭代就可以了）。

我已经设置了一个小提琴，它应该比我用语言更好地解释它。在这里看小提琴：

[http://jsfiddle.net/Vwat2/1/](http://jsfiddle.net/Vwat2/1/)

笔记：

1.  确保您在 chrome 中进行测试
2.  确保您为 chrome 打开了任务管理器（设置图标 > 工具 > 任务管理器）
3.  运行jsfiddle，最后没有文件扩展名匹配的正则表达式将在您将url复制到textarea后3秒触发并且没问题），3秒后带有文件扩展名匹配的正则表达式将触发，如果它影响你，文本不会更改为已触发，您将在任务管理器中看到 jsfiddle 占用 CPU

希望有人能解释这里发生了什么，我已经在 PHP 和 expresso 中运行了正则表达式，它没有任何问题，所以我不认为它卡在某种正则表达式内部循环或任何东西中。

谢谢你的帮助

编辑：这是一个精简版本，更类似于我在我的应用程序中使用它（我从第一个小提琴中删除了计时器和其他助手）。

[http://jsfiddle.net/A96Mw/1/](http://jsfiddle.net/A96Mw/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:39:09.493

两个字：[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)：

```
(?:[^ ]+)+\. 
```

是一个无用的构造 -`[^ ]+\.`完全匹配并且不容易回溯。

通过嵌套这两个量词，您将在不以句点结尾的字符串上获得运行时间的指数增长。一些浏览器可能会选择在几百万个循环后中止正则表达式匹配，其他浏览器（似乎是 Chrome）会继续尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:38:51.240

由于这个表达式，似乎是[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)`(?:[^ ]+)+`的情况： . 不知道为什么第一个有效，而第二个无效。

你想要的正则表达式是

```
url = new RegExp("https?://(?:[^ ]+)\\.", "i")
// or
url = /https?:\/\/(?:[^ ]+)+\./i 
```

和

```
imgurl = new RegExp("https?://(?:[^ ]+)\\.(?:jpe?g|gif|png)", "i")
// or
imgurl = /https?:\/\/(?:[^ ]+)+\.(?:jpe?g|gif|png)/i 
```

# excel - SharePoint 文件夹中的第一个 Excel 文件是只读的，无法编辑

> ID：11631651
> 
> 赞同：1
> 
> 时间：2012-07-24T13:13:49.750
> 
> 标签：excel, sharepoint

此问题仅发生在少数客户端 PC 上，而不是所有客户端 PC。而且我认为这应该与客户端PC的配置/设置有关。登录 PC 的人都会遇到同样的问题。

我们有一个将文件上传到 SharePoint 文件夹的应用程序。SP 文件夹中的第一个 Excel 或 PowerPoint 文件是只读的，不能编辑。我尝试了很多事情，事实/结果如下：

1.  Monitored Content.MSO 和所有文件在关闭后被正确删除；
2.  此问题仅发生在 SP 文件夹下的第一个 XlSX/PPT 文件。第二个或以下文件不会有问题；
3.  在 Content.IE5 下的文件夹之一下创建了一个临时文件。当问题发生时（excel文件是只读的），我仍然可以在Content.IE5下编辑临时文件（添加新行等）并成功保存。但是对于 SP 文件夹下的第二个文件，我无法编辑 Content.IE5 下的临时文件（被另一个名称锁定）。看起来当问题发生时，excel文件并没有真正绑定到临时文件夹；
4.  我尝试卸载IE8并重新安装IE8（从Microsoft关闭然后打开），没有区别；
5.  我检查了 OWSSUPP.DLL，只在 office14 下找到了一个；
6.  我尝试删除Content.IE5和Content.MSO下的所有文件，没有区别；
7.  一旦打开和关闭第一个文件而不保存（只读，无法保存），下次文件能够编辑（屏幕顶部将有编辑工作簿按钮和只读（从服务器只读） );
8.  我尝试了 Paul Liebrand 的方法，但无法从寄存器中找到名为 CacheFolderID 的条目。这是保罗的解决方案：http:
    [//paulliebrand.com/2010/04/12/document-is-locked-for-editing-part-2/](http://paulliebrand.com/2010/04/12/document-is-locked-for-editing-part-2/)

我在这个问题上挣扎了几天，似乎找不到原因。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:15:02.363

尝试手动签出文件并打开文件，因为如果未签出，则通常该文件是只读的，因此不可编辑。通过从系统帐户的共享点执行此默认设置，从

**文档库选项**

设置 > 文档库设置 > 常规设置（在 catgery 下）版本设置 > “需要先签出文档才能进行编辑？” 选择选项“是”。

当用户单击文件（word、excel 等）时，sharepoint 会自动结帐。

# android - ListView 中内容的对齐方式

> ID：11631654
> 
> 赞同：0
> 
> 时间：2012-07-24T13:14:04.080
> 
> 标签：android, listview, alignment, adapter

我有一个列表视图，我希望在左侧显示一些内容，在右侧显示其他内容： [例如](http://lh3.ggpht.com/l9BfwHuON835jCoyVvFVBSRXTs-kv1Aca3Rb1q4RPeUAvBoNUnd5ZG7mT5scJhmK35rh)

意思是内容

`getItem(position).getIsMO() == false`

显示在列表的左侧。以及其中的内容

`getItem(position).getIsMO() == true`

显示在列表的右侧。

该部分的代码是：

```
 public static class EfficientAdapter extends ArrayAdapter<Message>
            implements Filterable {
        private LayoutInflater mInflater;
        // private Bitmap mIcon1;
        private final Context context;
        private final ArrayList<Message> values;

        public EfficientAdapter(Context context, ArrayList<Message> values) {
            // Cache the LayoutInflate to avoid asking for a new one each time.
            super(context, R.layout.mycontent, values);
            mInflater = LayoutInflater.from(context);
            this.context = context;
            this.values = values;
        }

        /**
         * Make a view to hold each row.
         * 
         * @see android.widget.ListAdapter#getView1(int, android.view.View,
         *      android.view.ViewGroup)
         */
        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // A ViewHolder keeps references to children views to avoid
            // unneccessary calls
            // to findViewById() on each row.
            ViewHolder holder;
            // When convertView is not null, we can reuse it directly, there is
            // no need
            // to reinflate it. We only inflate a new View when the convertView
            // supplied
            // by ListView is null.

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.mycontent, null);

                holder = new ViewHolder();
                if (getItem(position).getIsMO() == false) {
                    // parent.setPadding(0, 0, 15, 0);
                    // convertView.layout(15, 0, 0, 0);
                    holder.body = (TextView) convertView
                            .findViewById(R.id.body);
                    holder.date = (TextView) convertView
                            .findViewById(R.id.date);
                    holder.from = (TextView) convertView
                            .findViewById(R.id.from);
                    holder.status = (TextView) convertView
                            .findViewById(R.id.status);
                } else {
                    // convertView.layout(0, 0, 15, 0);
                    // parent.setPadding(15, 0, 0, 0);

                    holder.body = (TextView) convertView
                            .findViewById(R.id.body);
                    holder.date = (TextView) convertView
                            .findViewById(R.id.date);
                    holder.from = (TextView) convertView
                            .findViewById(R.id.from);
                    holder.status = (TextView) convertView
                            .findViewById(R.id.status);
                }
                convertView.setTag(holder);
            }

            else {
                // Get the ViewHolder back to get fast access to the TextView
                // and the ImageView.
                holder = (ViewHolder) convertView.getTag();
            }
            convertView.setOnClickListener(new OnClickListener() {
                private int pos = position;

                @Override
                public void onClick(View v) {
                    Toast.makeText(context, "Click-" + pos, Toast.LENGTH_SHORT)
                            .show();
                }
            });

            holder.body.setText(getItem(position).getBody());
            holder.date.setText(getItem(position).getDate());
            holder.from.setText(getItem(position).getPhoneNumber());
            holder.status
                    .setText(String.valueOf(getItem(position).getStatus()));
            /*
             * if ("000".equals(getItem(position).getPhoneNumber())) { //
             * convertView.setPadding(5, 0, 0, 0); // View layout =
             * View.inflate(context, R.layout.mycontent, null); //
             * layout.setPadding(5, 0, 0, 0);
             * convertView.setLayoutParams(params); // parent.setPadding(5, 0,
             * 0, 0); } else { // View layout = View.inflate(context,
             * R.layout.mycontent, null); // layout.setPadding(0, 0, 5, 0);
             * parent.setPadding(0, 0, 5, 0); // convertView.setPadding(0, 0, 5,
             * 0); }
             */
            return convertView;

        }

        static class ViewHolder {
            TextView from;
            TextView date;
            TextView body;
            TextView status;
        }
} 
```

问题是，当我尝试`parent.setPadding()`所有对象在一侧的列表视图中对齐时。

感谢您抽出宝贵时间

我的内容1.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/objectscreenmoall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/content"
    android:clickable="true"
    android:onClick="btnListener"
    android:orientation="vertical"
    android:paddingRight="20dp"

    >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/fromMO"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="@string/phoNum"
            android:textColor="#01acec"
            android:textSize="15dp" />

        <TextView
            android:id="@+id/dateMO"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="@string/date"
            android:textColor="#01acec"
            android:textSize="15dp"
            android:layout_marginRight="10dp" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/bodyMO"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="@string/body"
            android:textColor="#01acec"
            android:textSize="15dp"
            android:layout_marginLeft="7dp" />

        <TextView
            android:id="@+id/statusMO"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:drawableRight="@drawable/ringtone_"
            android:layout_marginRight="10dp"
             />
    </RelativeLayout>

</LinearLayout> 
```

列表视图.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/allList"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listall"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:layout_weight="2"
        android:divider="#000000"
        android:dividerHeight="2dp"
        android:footerDividersEnabled="true"
         >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:27:02.180

您可以在此处拥有两个不同的 XML。

那是当`getItem(position).getIsMO() == false`设置第一个布局时：

```
convertView = mInflater.inflate(R.layout.mycontent1, null); // the row with blue background. 
```

别的

```
convertView = mInflater.inflate(R.layout.mycontent2, null); // the row with green background. 
```

尝试这样做。

如果这不起作用，我们会找到其他解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:28:35.167

我想我会使用两种不同的行布局，一种`android:layout_gravity="right"`带有`android:layout_gravity="left"`. 然后只需检查您需要在适配器中使用哪个。

# vb.net - Vb.net在两点之间画线

> ID：11631657
> 
> 赞同：0
> 
> 时间：2012-07-24T13:14:09.130
> 
> 标签：vb.net, winforms

我想在两点之间画一条线：

[http://i.stack.imgur.com/Yuhsd.gif](http://i.stack.imgur.com/Yuhsd.gif)

假设我有**2 个面板**，想从 to 画`Panel1`线`Panel2`。

解释：

```
dim p1 as new panel
dim p2 as new panel

p1.left = 100
p1.top = 10
me.controls.add(p1)

p2.left = 300
p2.top = 20
me.controls.add(p2)

DrawLineBetween(p1,p2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:31:00.480

在窗体的事件中使用[Graphics.DrawLine](http://msdn.microsoft.com/en-us/library/f956fzw1.aspx)方法。`Paint`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:43:59.590

试试下面的方法，它在 c# 中，但您可以轻松地将其转换为 vb.net，并且您需要根据面板位置调整 x、y 坐标。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        this.Controls.Add(new Panel{Left = 10, Top = 10,Width = 50,Height = 50, BackColor = Color.Blue});
        this.Controls.Add(new Panel {Left = 100, Top = 100,Width = 50,Height = 50, BackColor = Color.Blue});

    }
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        Graphics g;

        g = e.Graphics;

        Pen myPen = new Pen(Color.Red);
        myPen.Width = 1;

        g.DrawLine(myPen, 12, 12, 45, 65);

        g.DrawLine(myPen, 100, 100, 45, 65);

    } 
```

# java - 集合分配、浅拷贝、惰性拷贝和深拷贝的区别和最佳方法

> ID：11631660
> 
> 赞同：1
> 
> 时间：2012-07-24T13:14:14.230
> 
> 标签：java, pointers, collections, reference, copy

编辑：更新信息和答案

我试图对收集不同的复制方式有一个整体的看法。我想我得到了这个概念，但需要如此四舍五入，而且我需要这样的总结也很有用（随时修改我的帖子）。我有：

集合 a，b；//我省略了泛型

那么我复制收藏的机会有多大？：

*   赋值（完全相同的对象）

    ```
    a=b 
    ```

*   浅拷贝（2 个不同的集合，相同的对象引用，所以如果我们从一个列表中添加/删除一个对象，则不会反映在另一个列表中）

    ```
    a = new ArrayList(b);  // Or any other implementation of Collections

    a = b.clone(); //This also? 

    b = new ArrayList(); //This also?
    for (Object o : a) b.add(a); 
    ```

*   惰性复制（与 java 中的浅层相同？）

*   深度复制（具有复制对象的不同列表，因此修改一个列表或对象不会影响另一个）

    ```
    b = new ArrayList(); // Or any other implementation of Collections
    for (Object o : a) b.add(o.clone()); 
    ```

所以我想象这些情况：

# 集合复制/复制（或返回 DAO 数据）

```
 SyncStateOfListing    OriginalListingSafe   OriginalObjectsStateSafe  
 Mutual aware of changs
 **********************
 Assignment in other var         y - Mirrored         n                      n
 Iterator*                       y - Concurrnt.Exc    n (remove())           n    

 New is aware of old´ changes (RO ProxyView)
 ******************************************

 Coll.unmodifiableColl(orig)     y - Mirrored**       y NotSuppOpExc on RW   n  
 Coll.unmodif(orig).iterator()*  y - Concurrnt.Exc    y NotSuppOpExc on RW   n
 Enum                            y - ?                y No RW methods                  

 Independent copies
 ******************
 Shallow Copy                    n                    y                      n
 Deep Copy                       n                    y                      y (expensive) 

 * Iterator we force to regenerate it in any use and we get Exceptions if at some moment the snapshot is obsolete, so we assure the state for which the operation is meant, transactionally. Cannot add elements or retraverse.
 ** The "new" collection is totally mirrored for any change on the original, but internally, inner iterator is always used when traversing (the obvious stateful operation) so we get the same properties as when using it 
```

我的假设是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:41:25.717

分配： a 和 b 将指向同一个列表，因此那里不会有任何副本。

Shallow 和 Lazy 似乎与我等价。对列表中对象的引用将是相同的。您可能会这样说：“两个列表中将出现相同的对象”。因此，修改一个列表的对象也会在第二个列表中修改它，因为这是同一个对象。

最后我认为你应该为深拷贝写这个：

```
b = new ArrayList();
for (Object o : a) b.add(o.clone()); // and not a.clone() 
```

这样，您可以修改列表 a 中的一个对象，而无需修改列表 b 中的副本。

警告：使用可克隆对象有一些限制。有关详细信息，请参阅 JDK 文档。

# jquery - 在选择框中向数组添加多个值

> ID：11631663
> 
> 赞同：0
> 
> 时间：2012-07-24T13:14:17.523
> 
> 标签：jquery

我根据[这个问题](https://stackoverflow.com/questions/11612639/add-value-to-form-array-on-click)中接受的答案进行了以下工作。

请参阅[此链接](http://jsfiddle.net/aaronk85/SDCkW/)以了解其工作原理

```
<form action="" name="testform" method="post" id="testform">
<div id='div_block1'>
<input type="text" value="" name="a[]" class='input_text'>
<input type="text" value="" name="b[]" class='input_text'>
<input type="text" value="" name="c[]" class='input_text'>
<select id='block1'>
    <option value="" data-value=""></option>
    <option value="1" data-value="11,12,13">1</option>
    <option value="2" data-value="21,22,23">2</option>
    <option value="3" data-value="31,32,33">3</option>
    <option value="4" data-value="41,42,43">4</option>
    <option value="5" data-value="51,52,53">5</option>
</select>     
</div>
<div id='div_block2'>        
<input type="text" value="" name="a[]" class='input_text'>
<input type="text" value="" name="b[]" class='input_text'>
<input type="text" value="" name="c[]" class='input_text'>
<select id='block2'>
    <option value="" data-value=""></option>
    <option value="1" data-value="11,12,13">1</option>
    <option value="2" data-value="21,22,23">2</option>
    <option value="3" data-value="31,32,33">3</option>
    <option value="4" data-value="41,42,43">4</option>
    <option value="5" data-value="51,52,53">5</option>
</select>     
</div>
</form>
<script>
$(function() {
$('select').on('change', function() {
    var div_id = 'div_'+$(this).attr('id');
    var select_val = $(this).find('option:selected').data('value');
    console.log();
        if( select_val != '' ) {
            var a = select_val.split(',');
            $('div#'+div_id+' input[name="a[]"]').val(a[0]);
            $('div#'+div_id+' input[name="b[]"]').val(a[1]);
            $('div#'+div_id+' input[name="c[]"]').val(a[2]);
        } else {
            $('div#'+div_id+' input.input_text').val('');
            }
    });
});    
</script> 
```

我想稍微改变一下，例如，如果我选择 1，我会得到 a[]、b[]、c[] 的两个值

我做了以下

```
<form action="" name="testform" method="post" id="testform">
<div id='div_block1'>
<input type="text" value="" name="a[]" class='input_text'>
<input type="text" value="" name="b[]" class='input_text'>
<input type="text" value="" name="c[]" class='input_text'>
<input type="text" value="" name="a[]" class='input_text'>
<input type="text" value="" name="b[]" class='input_text'>
<input type="text" value="" name="c[]" class='input_text'>        
<select id='block1'>
    <option value="" data-value=""></option>
    <option value="1" data-value="11,12,13,6,12,8">1</option>
    <option value="2" data-value="21,22,23,8,10,33">2</option>
    <option value="3" data-value="31,32,33,2,8,6">3</option>
    <option value="4" data-value="41,42,43,22,54,63">4</option>
    <option value="5" data-value="51,52,53,12,34,55">5</option>
</select>     
</div>
<div id='div_block2'>        
<input type="text" value="" name="a[]" class='input_text'>
<input type="text" value="" name="b[]" class='input_text'>
<input type="text" value="" name="c[]" class='input_text'>
<input type="text" value="" name="a[]" class='input_text'>
<input type="text" value="" name="b[]" class='input_text'>
<input type="text" value="" name="c[]" class='input_text'>
<select id='block2'>
    <option value="" data-value=""></option>
    <option value="1" data-value="11,12,13,95,44,32">1</option>
    <option value="2" data-value="21,22,23,12,35,51">2</option>
    <option value="3" data-value="31,32,33,21,12,24">3</option>
    <option value="4" data-value="41,42,43,35,52,15">4</option>
    <option value="5" data-value="51,52,53,23,42,15">5</option>
</select>     
</div>
</form> 
```

[见小提琴](http://jsfiddle.net/aaronk85/SDCkW/2/)。根据我对第一个如何工作的理解，我认为这会起作用，但是它只取 a[]、b[]、c[] 的最后一个值，例如 6、12、8、6、12、8 而不是 11，如果选择 1，则为 12、13、6、12、8。

我还需要添加什么才能使其按需要工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:20:16.307

用这个：

```
 <input type="text" value="" name="a[0]" class='input_text'>
    <input type="text" value="" name="b[0]" class='input_text'>
    <input type="text" value="" name="c[0]" class='input_text'>
    <input type="text" value="" name="a[1]" class='input_text'>
    <input type="text" value="" name="b[1]" class='input_text'>
    <input type="text" value="" name="c[1]" class='input_text'> 
```

还有这个：

```
 $('div#'+div_id+' input[name="a[0]"]').val(a[0]);
        $('div#'+div_id+' input[name="b[0]"]').val(a[1]);
        $('div#'+div_id+' input[name="c[0]"]').val(a[2]);
        $('div#'+div_id+' input[name="a[1]"]').val(a[3]);
        $('div#'+div_id+' input[name="b[1]"]').val(a[4]);
        $('div#'+div_id+' input[name="c[1]"]').val(a[5]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:41:11.253

我简化了 JS

添加一个类以适合输入的任何标志

```
<div>
    <form action="" name="testform" method="post" id="testform">
    <div id='div_block1'>
        <input type="text" value="" name="a[]" class='input_text flag'>
        <input type="text" value="" name="b[]" class='input_text flag'>
        <input type="text" value="" name="c[]" class='input_text flag'>
        <input type="text" value="" name="a[]" class='input_text flag'>
        <input type="text" value="" name="b[]" class='input_text flag'>
        <input type="text" value="" name="c[]" class='input_text flag'>
        <select id='block1'>
        <option value="" data-value=""></option>
        <option value="1" data-value="11,12,13,6,12,8">1</option>
        <option value="2" data-value="21,22,23,8,10,33">2</option>
        <option value="3" data-value="31,32,33,2,8,6">3</option>
        <option value="4" data-value="41,42,43,22,54,63">4</option>
        <option value="5" data-value="51,52,53,12,34,55">5</option>
        </select>     
    </div>
    <div id='div_block2'>        
        <input type="text" value="" name="a[]" class='input_text flag'>
        <input type="text" value="" name="b[]" class='input_text flag'>
        <input type="text" value="" name="c[]" class='input_text flag'>
        <input type="text" value="" name="a[]" class='input_text flag'>
        <input type="text" value="" name="b[]" class='input_text flag'>
        <input type="text" value="" name="c[]" class='input_text flag'>
        <select id='block2'>
        <option value="" data-value=""></option>
        <option value="1" data-value="11,12,13,95,44,32">1</option>
        <option value="2" data-value="21,22,23,12,35,51">2</option>
        <option value="3" data-value="31,32,33,21,12,24">3</option>
        <option value="4" data-value="41,42,43,35,52,15">4</option>
        <option value="5" data-value="51,52,53,23,42,15">5</option>
        </select>     
    </div>
    </form>
<div> 
```

现在使用下面的 JS

```
$(function() {
$('select').on('change', function() {
    var div_id = 'div_'+$(this).attr('id');
    var select_val = $(this).find('option:selected').data('value');
    console.log();
    if( select_val != '' ) {
        var a = select_val.split(',');
        var count = 0;
        $('div#'+div_id+' .flag').each(function() {
            $(this).val(a[count]);
            ++count;
        });
    } else {
        $('div#'+div_id+' input.input_text').val('');
    }
}); 
```

});​</p>

# facebook-opengraph - 在 Facebook NewsFeed 中播放视频

> ID：11631665
> 
> 赞同：0
> 
> 时间：2012-07-24T13:14:23.683
> 
> 标签：facebook-opengraph

想在 Facebook 上播放视频。这是我的页面。当您访问该网站[http://sefid.co.ke时，视频播放良好](http://sefid.co.ke)

```
 <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#">
  <head>
    <title>The Rock (1996)</title>
<meta property="og:title" content="#video.title#"> 
<meta property="og:description" content="#video.description#">
<meta property="og:type" content="video">
<meta property="og:image" content="http://sefid.co.ke/jwplayer/preview.jpg">
<meta property="og:video" content="http://sefid.co.ke/jwplayer/player.swf?embedCode=#url.watch#&autoplay=1&keepembedCode=true">
<meta property="og:video:type" content="application/x-shockwave-flash">
<meta property="og:video:width" content="470">
<meta property="og:video:height" content="320">
<meta property="og:site_name" content="AOPA">

</head>
<body>
<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='470' height='320' id='single1' name='single1'>
<param name='movie' value='/jwplayer/player.swf'>
<param name='allowfullscreen' value='true'>
<param name='allowscriptaccess' value='always'>
<param name='wmode' value='transparent'>
<param name='flashvars' value='file=http://sefid.co.ke/jwplayer/player.swf?file=%2Fjwplayer%2Fvideo.mp4'>
<embed
  id='single2'
  name='single2'
  src='/jwplayer/player.swf'
  width='470'
  height='320'
  bgcolor='#000000'
  allowscriptaccess='always'
  allowfullscreen='true'
  flashvars='file=/jwplayer/video.mp4'
/>
</object>
</body>

</html> 
```

可能有什么问题？

请协助。

我很感激

罗杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:59:04.197

尝试类似：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<meta property="og:image" content="http://xxxxx.XXXX.www/wwwwww/XXXXX.jpg" />
<meta property="og:video" content="http://www.wwwww.www/wwwww/wwwwwwww.swf" />
<meta content="video" name="medium" />
<meta content="400" property="og:video:height" />
<meta content="400" property="og:video:width" />
<meta content="application/x-shockwave-flash" property="og:video:type" />

</head>
<body>
<div id="live" style="display:block;width:400px;height:400px;"></div>
</body>
</html> 
```

# java - 将 java 类中 StringArray 的值打印到 JSP 中

> ID：11631668
> 
> 赞同：0
> 
> 时间：2012-07-24T13:14:33.417
> 
> 标签：java, jsp, data-structures

我有一个表单类，其中有一个字符串数组。我正在设置字符串数组的值。我需要在 JSP 页面中一一打印这个数组值。我写的代码是：

```
paxList = getPaxList(id);

List<String> passengerName = new ArrayList<String>();
List<Double> passengerAge = new ArrayList<Double>();

for(int i=0; i < paxList.size(); i++){
    passengerName.add(paxList.get(i).getPassengerName());
    passengerAge.add(paxList.get(i).getPassengerAge());
}

bookingsForm.setPassengerName(passengerName.toArray(new String[paxList.size()]));
bookingsForm.setPassengerAge(passengerAge.toArray(new Double[paxList.size()])); 
```

现在我需要打印`PassengerName`.

我在我的 JSP 页面中尝试过这样

```
<logic:iterate id="currentPassName" property="passengerName" >
    <bean:write name="currentPassName" />
</logic:iterate> 
```

但这对我不起作用。有人可以指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:27:46.340

您不应该将您的乘客名单分成两个名单，分别是姓名和年龄。这就是让事情变得困难的原因。只需`paxList`直接存储到您的表单中。

完成后，帮自己一个忙，使用 JSTL 而不是弃用的 struts 逻辑和 bean 标签：

```
<c:forEach items="${bookingsForm.paxList}" var="passenger">
    Passenger <c:out value="${passenger.name}" is aged ${passenger.age}<br/>
</c:forEach> 
```

解释为什么它不能按原样工作：

```
<logic:iterate id="passRecord" property="passengerName" >
    <bean:write name="passengerName" property="passRecord" />
</logic:iterate> 
```

上面遍历了表单`passengerName`数组的元素（你应该命名它`passengerNames`，因为它们中有几个），并定义了一个名为`passRecord`你必须在循环内使用的页面属性。

既然`passengerName`是一个String数组，`passRecord`那么就是一个String。在循环内部，您尝试访问`passRecord`. 中`passengerName`没有方法`getPassRecord()`。`String[]`乘客姓名存储在`passRecord`. 你只需要写它。使用正确命名的变量，它会更清晰：

```
<logic:iterate id="currentPassengerName" property="passengerNames" >
    <bean:write name="currentPassengerName" />
</logic:iterate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:20:53.160

使用 jstl 你可以这样做：

```
<table>
    <c:forEach var = "oneName" items = "${passengerName}" >
    <tr><td> ${oneName}</td</tr>
    </c:forEach>
</table> 
```

# javascript - 如何在 ExtJs 中的网格上显示行数？

> ID：11631670
> 
> 赞同：0
> 
> 时间：2012-07-24T13:14:44.147
> 
> 标签：javascript, extjs

我正在开发一个 ExtJs 应用程序；在这个应用程序中，可以动态地将新线添加到网格中。但是，我不知道如何在添加行时对其进行编号。谁能给我一些见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:02:56.223

检查文档中的 RowNumberer 类。

```
columns: [
    {xtype: 'rownumberer'},
    {text: "Company", flex: 1, sortable: true, dataIndex: 'company'},
    {text: "Price", width: 120, sortable: true, renderer: Ext.util.Format.usMoney, dataIndex: 'price'},
    {text: "Change", width: 120, sortable: true, dataIndex: 'change'},
    {text: "% Change", width: 120, sortable: true, dataIndex: 'pctChange'},
    {text: "Last Updated", width: 120, sortable: true, renderer: Ext.util.Format.dateRenderer('m/d/Y'), dataIndex: 'lastChange'}
] 
```

[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.RowNumberer](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.RowNumberer)

# android - 用于 Android HAL 和 Linux 设备驱动程序的 sysfs 接口

> ID：11631672
> 
> 赞同：1
> 
> 时间：2012-07-24T13:15:02.940
> 
> 标签：android, linux, android-ndk, linux-kernel, hal

为什么 SYSFS 接口用于 Android HAL 和设备驱动程序之间的通信？它们是否还有其他可用于*Android*中用户空间和内核空间之间通信的接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T10:25:12.527

用户空间和内核空间的其他通信接口：系统调用、ioctl、proc文件系统、netlink套接字。

据我所知，开发 sysfs 是为了解决 proc 文件系统包含的许多非进程相关行为。sysfs 具有 ATTRIBUTE 特性，可以轻松访问内核。

# asp.net-mvc - 如何使用 asp.net mvc 模拟测试

> ID：11631677
> 
> 赞同：1
> 
> 时间：2012-07-24T13:15:19.937
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, appharbor

我正在编写一个已部署到 appharbor 的应用程序。我现在无法构建我的项目，因为我已经扩展了我的测试。我相信问题在于我正在使用数据库初始化程序来使用测试种子数据填充数据库。这些测试在我的本地机器上通过，但是一旦我在 appharbor 上部署测试失败。我怀疑我需要模拟数据，但我不知道该怎么做。例如，这是我对我的一种操作方法进行的控制器测试。

**控制器**

```
 // GET: /Lead/Url
    // TODO: Add optional url parameters
    public ActionResult Url(string pfirstname, string plastname, string phone, int leadsource)
    {

        var lead = new Lead();
        //store 
        lead.parent_FirstName = pfirstname;
        lead.parent_LastName = plastname;
        lead.parent_Phone = phone;
        lead.LeadSourceID = leadsource;
        lead.AgentID = 1;

        if (ModelState.IsValid)
        {
            leadRepository.InsertLead(lead);
            leadRepository.Save();
            ViewBag.Message = "Success";
        }

        return View(lead);
    }

    //
    // POST: /Lead/URL       
    [HttpPost, ActionName("Url")]
    public ActionResult Url(Lead lead)
    {
        return View();
    } 
```

**单元测试**

```
[TestMethod]
    public void LeadUrl()
    {
        //ARRANGE
        ILeadRepository leadrepository = new LeadRepository(new LeadManagerContext());
        Database.SetInitializer<LeadManagerContext>(new LeadManagerInitializer());
        LeadController controller = new LeadController(leadrepository);

        //ACT
        ViewResult result = controller.Url("Brad", "woods","465-456-4965",1) as ViewResult;
        var lead = (Lead)result.ViewData.Model;

        //ASSERT
       Assert.AreEqual("Success" ,result.ViewBag.Message);
        /*check for valid data */
       Assert.AreEqual("Brad", lead.parent_FirstName);

    } 
```

有人可以解释一下我接下来需要做什么来改进这样的代码并让它在 app Harbor 上成功运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:32:14.687

实际上，您还没有验证控制器与其依赖项（存储库）之间的交互。这是最重要的部分 - 控制器应该将您的`Lead`对象传递给存储库。然后调用`Save`（也考虑到工作单元模式）。

此外，您应该单独测试控制器，只有这样您才能确定控制器测试失败是控制器的问题，而不是`LeadRepository`or的问题`LeadManagerInitializer`。

```
// Arrange
Lead expected = CreateBrad();    
var repository = new Mock<ILeadRepository>();
LeadController controller = new LeadController(repository.Object);    
// Act
ViewResult result = (ViewResult)controller.Url("Brad", "woods", "465-456", 1);
// Assert      
Lead actual = (Lead)result.ViewData.Model;
// All fields should be equal, not only name
Assert.That(actual, Is.EqualTo(expected));
Assert.AreEqual("Success", result.ViewBag.Message);
// You need to be sure, that expected lead object passed to repository
repository.Verify(r => r.InsertLead(expected));
repository.Verify(r => r.Save()); 
```

顺便说一句，我已将预期`Lead`的创建移至单独的方法：

```
private Lead CreateBrad()
{
    Lead lead = new Lead();
    lead.parent_FirstName = "Brad";
    lead.parent_LastName = "woods";
    lead.parent_Phone = "465-456";
    lead.LeadSourceID = 1;
    lead.AgentID = 1;
    return lead;
} 
```

您还应该覆盖实例比较`Equals`的方法：`Lead`

```
public class Lead
{
   // your current code here

   public override bool Equals(object obj)
   {
       Lead other = obj as Lead;
       if (other == null)
           return false;

       return other.parent_FirstName == parent_FirstName &&
              other.parent_LastName == parent_LastName &&
              // compare other properties here
              other.AgentID == AgentID;
   }

   // also override GetHashCode method
} 
```

顺便说一句，为什么您不将`Lead`对象传递给您的操作方法（通过 POST 消息）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:33:02.270

您必须存根您的存储库。最简单的方法是使用模拟框架（我更喜欢[Moq](http://www.nuget.org/packages/Moq "起订量")），并存根每个方法。

像这样的东西（起订量）：

```
var repository = new Mock<ILeadReporisory>();
repository.Setup(r => r.InsertLead(It.IsAny<Lead>()));
//raise, rinse, repeat

LeadController controller = new LeadController(repository.Object); 
```

# svn - netbeans 7.2 svn 问题

> ID：11631679
> 
> 赞同：0
> 
> 时间：2012-07-24T13:15:22.747
> 
> 标签：svn, netbeans, netbeans-7.2

我在使用 subversion 1.6.12（作为服务器）和 netbeans 7.2RC 作为客户端时遇到问题。svn 服务器与 TortoiseSVN 1.7.7 完美配合，但 netbeans 抛出以下错误：

`svn: authentication cancelled`

提前感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:32:18.277

如果您以管理员身份启动 NB（如果是 Windows），它可以工作吗？

其他方面：

*   你的名字/密码中有非 ascii 字符吗？
*   从用户配置文件目录中的 netbeans 文件夹中删除您保存的 SVN 信息（登录等）（之前进行备份！）

# java - 如何创建一个包含 shell 脚本和不在 jar 中的属性文件的 maven 程序集？

> ID：11631682
> 
> 赞同：15
> 
> 时间：2012-07-24T13:15:30.173
> 
> 标签：java, maven, build

我正在尝试使用 Maven 构建一个独立的应用程序

[使用如何使用 Maven 创建具有完整依赖项的独立应用程序中](https://stackoverflow.com/questions/10224631/how-do-you-create-a-standalone-application-with-dependencies-intact-using-maven)描述的程序集插件 ？

这将创建小部件分发 zip，其中包含

```
widget-1.0
widget-1.0/lib/widget.jar
widget-1.0/lib/3rdpartyjar1.jar
widget-1.0/lib/3rdpartyjar2.jar 
```

...

但在我的 src 树中，我有：

```
src/main/bin/widget.sh 
```

这并没有进入最终的发行版 zip，我希望它放在这里

```
widget-1.0/widget.sh 
```

同样在我的 src 树中，我有一个属性文件

```
src/main/properties/widget.properties 
```

目前正在进入

```
widget-1.0/lib/widget.jar 
```

但是因为我希望它是可编辑的，所以我希望它在

```
widget-1.0/widget.properties 
```

是否可以在 maven 中执行此操作？

**编辑** 在博客中使用信息的工作如下：

1.  将 bin 文件夹重命名为 scripts 文件夹，因为这是标准 Maven 名称
2.  将 widget.properties 移至脚本文件夹
3.  修改了我的 assembly.xml 以包含一个文件集

这是新的xml

```
<?xml version="1.0" encoding="UTF-8"?>
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    <id>distribution</id>
    <formats>
        <format>zip</format>
    </formats>
    <dependencySets>
        <dependencySet>
            <scope>runtime</scope>
            <outputDirectory>lib</outputDirectory>
            <unpack>false</unpack>
        </dependencySet>
    </dependencySets>
    <fileSets>
        <fileSet>
            <directory>${project.build.scriptSourceDirectory}</directory>
            <outputDirectory></outputDirectory>
            <includes>
                <include>widget.sh</include>
                <include>widget.properties</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

然而次要但无法在任何地方找到 maven 标准文件夹变量列表，即属性文件夹是否有 ${project.build.scriptSourceDirectory} 的等价物

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T13:28:52.297

我发现[这篇博客文章](http://www.petrikainulainen.net/programming/tips-and-tricks/creating-a-runnable-binary-distribution-with-maven-assembly-plugin/)是关于如何做到这一点的一个很好的教程。

另外，我认为您放置文件的文件夹的名称是相关的。Maven 对文件的处理显然`src/main/java`与对`src/main/resources`. 我不是 100% 确定，但是这个文件夹的名称可能意味着文件是否在 jar 中结束。

[这](http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html)是 Maven 目录名称属性的列表。

# wordpress - Wordpress 插件中的自定义页面

> ID：11631685
> 
> 赞同：0
> 
> 时间：2012-07-24T13:15:33.560
> 
> 标签：wordpress

我正在创建简单的插件，我准备了几个页面：add.php、edit.php、delete.php 和 list.php。我使用过 add_menu_page 和 add_submenu_page - 所以我理解为什么它们在管理菜单中可见。如何在不将其放入菜单的情况下创建页面（或带有参数的自定义 URL）？我想在列表页面上添加编辑页面的链接并删除 url（由插件执行的代码） - 类似于帖子列表页面中的内容，但找不到实现此目的的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:59:26.697

对于这个问题，这里有两种可能的解决方案：

[如何在不将其添加到菜单的情况下添加 WordPress 管理页面？](https://stackoverflow.com/questions/3902760/how-do-you-add-a-wordpress-admin-page-without-adding-it-to-the-menu)

就我个人而言，我没有尝试过，但它就像您在正常设置后从菜单中删除该项目一样。

还有一个很棒的插件叫做**WP Router**可以帮助你设置完全独特的 url 和你想要的回调。

# .htaccess - htaccess 重定向子域

> ID：11631686
> 
> 赞同：4
> 
> 时间：2012-07-24T13:15:35.770
> 
> 标签：.htaccess, redirect, subdomain

我有以下 .htaccess 代码：

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.mysite.co$ [NC]
RewriteRule ^(.*)$ http://www.mysite.co/$1 [R=301,QSA,L]

</IfModule> 
```

问题是所有子域都被重定向到 www.mysite.co/subdomain 我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:22:31.667

简单地说，您的重写规则逻辑正在执行以下操作：

1.  对于除 www.mysite.co 以外的**任何主机**（包括 foo.mysite.com、blog.mysite.com 等）
2.  永久重定向 (301) 到[http://www.mysite.co/](http://www.mysite.co/)
3.  这是检查 .htaccess 文件的最后一条规则，因此请退出

为了不重定向您自己的子域，最简单和最清晰的方法是使用更多重写条件显式处理它（参见下面的示例）。更多功夫 htaccess 的乐趣试试这个：[.htaccess 通配符子域](https://stackoverflow.com/questions/1059441/htaccess-wildcard-subdomains)

```
<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteCond %{HTTP_HOST} !^www.mysite.co$ [NC]        
    RewriteCond %{HTTP_HOST} !^blog.mysite.co$ [NC]
    RewriteCond %{HTTP_HOST} !^foo.mysite.co$ [NC]
    RewriteRule ^(.*)$ http://www.mysite.co/$1 [R=301,QSA,L]

 </IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-30T13:24:18.453

你需要运行你的 index.php 文件

```
RewriteCond %{HTTP_HOST} !^www\.example\.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+)\.example\.com$ [NC]
RewriteRule !^index\.php($|/) index.php/accounts/%2%{REQUEST_URI} [PT,L] 
```

# php - Zend FR finfo 错误警告：字符串扩展“B”无效

> ID：11631690
> 
> 赞同：2
> 
> 时间：2012-07-24T13:15:43.343
> 
> 标签：php, zend-framework

将 Zend FR 更新到 1.11 后出现问题

Mimetype 文件检查生成：

警告：字符串扩展“B”无效

Zend_Validate_File_MimeType 中的字符串看起来像是问题的原因

```
$finfo = finfo_open(FILEINFO_MIME_TYPE, $file); 
```

我创建了简单的测试用例

```
$finfo = finfo_open(FILEINFO_MIME_TYPE, '/usr/share/misc/magic');
echo finfo_file($finfo, PUBLIC_HTML_PATH . '/images/missing.png');
finfo_close($finfo); 
```

我得到了同样的错误:(

```
finfo_open(FILEINFO_MIME_TYPE, '/usr/share/misc/magic'); //generates: Warning: string extension `B' invalid. 
```

我的操作系统：Kbuntu 10.10

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:49:00.970

遇到与 Mike Purcell相同的错误消息（**“Warning: string extension w' invalid in Command”**），但修复方法不同。

在我们的服务器上，我们有一个`/usr/share/misc/magic`和一个`/usr/share/misc/magic.mgc`文件。该`magic.mgc`文件已从该`magic`文件编译，但 PHP 仍然不乐意直接与该`/usr/share/misc/magic`文件对话（我们已转移到该文件作为该`magic.mgc`文件需要更新的调试的一部分）。

对我们的修复是将我们的`putenv`行改回`magic.mgc`文件：

```
putenv('MAGIC=/usr/share/misc/magic.mgc'); 
```

然后，`magic`-ally :-)，整个 mime 类型的检测系统又开始工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T22:37:08.983

这可能与您的确切问题无关，但它确实解决了我遇到的问题，该问题导致了非常相似的错误消息：“**警告：字符串扩展名 w' 在命令中无效**”。

对于我们来说，我们有一个异构设置，其中一些服务器仍在运行 php 5.2，而另一些服务器仍在运行 php 5.3。在 5.2 盒子上，魔术文件位于 . `/usr/share/file/magic`，但在 5.3 盒子上，文件位于默认路径`/usr/share/misc/magic`. 显然有人试图通过符号链接 5.2 路径来协调这些路径差异，因此代码库可能与 php 版本无关。但是根据 PHP 网站上发布的有关[魔术文件符号链接的](http://php.net/manual/en/ref.fileinfo.php#85348)一些评论，这将导致意外行为，这当然是导致上述错误消息的原因。

因此，请确保您传递的路径是实际的魔术文件，而不是符号链接，看看是否能解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T20:07:48.403

根据您的 PHP 版本，魔术格式可能会更新。这记录在[http://php.net/manual/en/function.finfo-open.php的注释中](http://php.net/manual/en/function.finfo-open.php)

运行 php -v 查看你的版本

在我们的源代码树中指向一个较旧的魔术文件时，我遇到了同样的错误，并在从我当前的 linux 发行版中指向一个较新的魔术文件时解决了它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T15:10:45.950

我在 Laravel 中遇到了这个错误（当然，减去 Zend FR）。在带有 IIS 的 Windows 机器上运行 PHP 5.3.21。

在网上找到的信息很少，我几乎要放弃了。当我按照 PHP.net 上的评论中的说明进行操作时，它最初是有效的，基本上是将 fileinfo.dll 添加到您的 PHP 安装中，并下载相关的魔法文件并将环境变量指向它们。

最初有些混乱，直到我意识到我实际上并没有 php_fileinfo.dll，所以除了将它添加到 php.ini 文件之外，我还必须下载文件本身并将其添加到我的*ext*目录中。

现在真正让我陷入困境的是它最初是有效的。第二天就没有了。长话短说，它不需要环境变量 MAGIC。这让我陷入困境的原因是因为我已经尝试了所有可能的场景，但是一旦设置了环境变量，它就已经设置好了。而且我必须在删除 Windows 服务器后重新启动它，才能取消它。一旦我这样做了，它就完美地工作了。

# blackberry - 黑莓 9700 和 9300 中的应用程序权限未出现

> ID：11631692
> 
> 赞同：0
> 
> 时间：2012-07-24T13:15:57.450
> 
> 标签：blackberry

我正在开发一个应用程序，我正在录制语音并将录音存储在 file:///home/ 中。为此，当我单击记录按钮时，它会请求许可

应用程序许可 应用程序已请求记录

允许否认

单击允许时，它会要求以下权限：

应用程序权限 应用程序已请求文件连接以收听消息 不要求文件 不要求文件以收听消息 允许 拒绝

点击允许后，它开始录制并同时将录制内容保存在 SDCard 中。这在 9250 Storm 中运行良好。

但是当我在 9700 和 9300 中测试同一个应用程序时，它只要求记录权限而不是文件保存，因此不保存我的文件。我错过了手机中的一些设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:37:26.180

您可以在进入流程之前明确要求获得所请求的权限。

这是执行此操作的代码示例

```
ApplicationPermissionsManager manager = ApplicationPermissionsManager.getInstance();
            int current = manager.getPermission(ApplicationPermissions.PERMISSION_FILE_API);
                if (current != ApplicationPermissions.VALUE_ALLOW) {
                    ApplicationPermissions permissions = new ApplicationPermissions();
                    permissions.addPermission(ApplicationPermissions.PERMISSION_FILE_API);
                    manager.invokePermissionsRequest(permissions);
                } 
```

# c# - 如何通过 DataGrid 标题中的 TextBoxes 中的值填充 ViewModel 中的字典

> ID：11631696
> 
> 赞同：1
> 
> 时间：2012-07-24T13:16:15.193
> 
> 标签：c#, wpf, xaml

我们需要解决下面的问题。在视图中我们定义了包含 TextBox 的 DataGrid 和 DataTemplate。DataTemplate 用于 DataGrid 列的 HeaderTemplate。DataGrid 的列是从代码中动态添加的（而不是在 View 后面的代码中）。

我的问题是：

我想在 ViewModel 中填写 Dictionary。该字典将包含 Keys = DataGridTextColumn.Header （列名）和 Values = TextBox.Text 并且应该在 TextBox 中的文本更改时不断填充。怎么做？

这是我的代码：

主窗口.xaml

```
<Window x:Class="WpfApplication1.MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525"
xmlns:wpfToolkit="http://schemas.microsoft.com/wpf/2008/toolkit">

    <Window.Resources>
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        </Style>
    </Window.Resources>
    <Grid>
        <DataGrid AutoGenerateColumns="False" HeadersVisibility="Column" HorizontalAlignment="Left" VerticalAlignment="Top"  Loaded="Grid_Loaded">
            <DataGrid.Resources>
                <DataTemplate x:Key="HeaderDataTemplate">
                    <StackPanel Orientation="Vertical" >
                        <ContentControl Content="{Binding}" />
                        <TextBox x:Name="tbName"/>
                    </StackPanel>
                </DataTemplate>
            </DataGrid.Resources>
            <DataGrid.Columns>
            </DataGrid.Columns>
        </DataGrid>        
    </Grid>
</Window> 
```

主窗口.xaml.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new ViewModel();
        }

        private void Grid_Loaded(object sender, RoutedEventArgs e)
        {
            DataGrid grid = (DataGrid)sender;
            ResourceDictionary resourecs = grid.Resources;
            grid.Columns.Add(new DataGridTextColumn() { Header = "Column_1", Width = 150, HeaderTemplate = (DataTemplate)resourecs["HeaderDataTemplate"] });
            grid.Columns.Add(new DataGridTextColumn() { Header = "Column_2", Width = 150, HeaderTemplate = (DataTemplate)resourecs["HeaderDataTemplate"] });
            grid.Columns.Add(new DataGridTextColumn() { Header = "Column_N", Width = 150, HeaderTemplate = (DataTemplate)resourecs["HeaderDataTemplate"] });
        }
    }

    public class ViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        public IDictionary<string, string> HeaderTextValues
        {
            //Here is Dictionary, which should by filled by Key = DataGridTextColumn.Header, Value = TextBox.Text
            get { return null; /*???? */ }
        }
    }
} 
```

# android - 如何获取不同地点的日出和日落时间？

> ID：11631697
> 
> 赞同：1
> 
> 时间：2012-07-24T13:16:19.250
> 
> 标签：android, api, libraries

我计划开发一个应用程序，我需要根据地点（区域/城市）知道任何一天（至少一年完成）的日出和日落时间。

考虑到我需要为 Android 和桌面应用程序开发这样的应用程序，我想知道是否有任何 API 或库可以帮助我轻松获取这些数据。

PS：虽然我提到了 Android 和桌面，但偏好更多的是前者，但使用兼容两者的 API 会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:32:04.863

简单研究发现以下内容：

*   [想在网站上显示日出/日落时间](https://stackoverflow.com/questions/5102178/want-to-show-sunrise-sunset-time-on-website)

*   [https://developers.google.com/search?q=google+weather+api](https://developers.google.com/search?q=google+weather+api)

花钱的选择：

*   [http://portal.theweatherchannel.com/](http://portal.theweatherchannel.com/)

**免费解决方案：为您提供 RSS 提要，返回指向 XML 文件的直接链接，其中包含所有数据，包括日出/日落时间**

*   [http://developer.yahoo.com/weather/](http://developer.yahoo.com/weather/)

PS：您也可以使用在线可用的算法直接计算它，但使用 API 可能是最好的

编辑：我修复了错误的格式。我的错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-26T15:18:33.503

在这里您可以进行 7 天的预测：

[https://developer.here.com/api-explorer/rest/auto_weather](https://developer.here.com/api-explorer/rest/auto_weather)

这是完整的请求：

[https://weather.cit.api.here.com/weather/1.0/report.json?product=forecast_astronomy&name=Chicago&app_id=DemoAppId01082013GAL&app_code=AJKnXv84fjrb0KIHawS0Tg](https://weather.cit.api.here.com/weather/1.0/report.json?product=forecast_astronomy&name=Chicago&app_id=DemoAppId01082013GAL&app_code=AJKnXv84fjrb0KIHawS0Tg)

您可以简单地将城市名称从芝加哥更改为您的 cityName

[在这里您可以看到它的外观 JSON 格式的请求](https://i.stack.imgur.com/DDC6M.png)

# android - 如何在 Android 应用程序中用手指绘制东西......并将其保存到网络

> ID：11631700
> 
> 赞同：10
> 
> 时间：2012-07-24T13:16:28.890
> 
> 标签：android, drawing, save

**[此问题已成功回答并已成为博客文章 <- 点击](http://wiki.nofolder.com/how-to-draw-something-with-your-finger-in-an-android-app-and-save-it-to-the-web)**

嗨，我是一名 PHP 开发人员，我想做一件简单的事情 - 我想在 Android 手机的空白页面上绘制一些东西（用一根带有较大“模拟笔尖”的手指）并将位图存储为 jpeg通过 http 发布服务器。

这是我到目前为止所拥有的，但这是从[一个涉及为游戏编写精灵的教程](http://www.youtube.com/watch?v=LHRDeDHW5zI&feature=relmfu)中获取的。我无法适应它

```
package com.my.example;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnTouchListener;

public class DrawCapture extends Activity implements OnTouchListener{

    OurView v;
    Bitmap ball;
    float x,y;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.draw_capture);
        v = new OurView(this);
        v.setOnTouchListener(this);
        ball = BitmapFactory.decodeResource(getResources(), R.drawable.blueball);
        x = y = 0;
        setContentView(v);
    }

    @Override
    protected void onPause(){
        super.onPause();
        v.pause();
    }

    protected void onResume(){
        super.onResume();
        v.resume();
    }

    public class OurView extends SurfaceView implements Runnable{
        Thread t = null;
        SurfaceHolder holder;
        boolean isItOK = false;

        public OurView(Context context) {
            super(context);
            holder = getHolder();
        }

        public void run() {
            while (isItOK == true){

                try {
                    Thread.sleep(50);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                //perform canvas drawing
                if (!holder.getSurface().isValid()){
                    continue;
                }
                Canvas c = holder.lockCanvas();
                onDraw(c);
                holder.unlockCanvasAndPost(c);
            }       
        }

        public void onDraw(Canvas c){
            c.drawARGB(255, 210, 210, 210);
            c.drawBitmap(ball, x - (ball.getWidth()/2), y - (ball.getHeight()/2), null);
        }

        public void pause(){
            isItOK = false;
            while(true){
                try{
                    t.join();
                } catch(InterruptedException e){
                    e.printStackTrace();
                }
                break;
            }
            t = null;
        }

        public void resume(){
            isItOK = true;
            t = new Thread(this);
            t.start();
        }
    }

    public boolean onTouch(View v, MotionEvent me){

        switch (me.getAction()){
            case MotionEvent.ACTION_DOWN : 
                x = me.getX();
                y = me.getY();              
                break;
            case MotionEvent.ACTION_UP : 
                x = me.getX();
                y = me.getY();              
                break;
            case MotionEvent.ACTION_MOVE : 
                x = me.getX();
                y = me.getY();              
                break;
        }
        return true;
    }
} 
```

这是XML

```
<?xml version="1.0" encoding="utf-8"?>
<SurfaceView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</SurfaceView> 
```

有人可以帮帮我吗？我觉得我很接近 - 我将它`blueball`用作笔尖，我只是想“保存”它，可能我需要在 XML 页面上有一个按钮（或菜单）来执行此操作？我知道这有点乞求，但有**很多**人在网上询问如何用手指绘图并将某些内容保存到“云”，如果人们可以用代码示例（不是参考）做出回应，我保证我会编译这个为所有人最终受益的适当的教程代码。包括我已经非常满意的 PHP 服务器端代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T13:57:48.613

您可以尝试使用 Google 提出的 Gesture Object，尝试执行我的以下代码：

活动 1 xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#FFFFFF" >

        <android.gesture.GestureOverlayView
            android:id="@+id/gestures"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:fadeEnabled="false"
            android:fadeOffset="5000000000"
            android:gestureColor="#000000"
            android:gestureStrokeType="multiple"
            android:gestureStrokeWidth="1"
            android:uncertainGestureColor="#000000"
            android:layout_above="@+id/save_button" />

        <Button
            android:id="@id/save_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="20sp"
            android:paddingLeft="20sp"
            android:paddingRight="20sp"
            android:text="Save"
            android:textSize="22sp" />

    </RelativeLayout> 
```

活动1 java：

```
包 com.testandroidproject；

导入 java.io.ByteArrayOutputStream；

导入android.app.Activity；
导入android.content.Intent；
导入 android.gesture.GestureOverlayView；
导入android.graphics.Bitmap；
导入android.graphics.Color；
导入android.os.Bundle；
导入android.view.View；
导入 android.view.View.OnClickListener；
导入android.widget.Button；
导入 android.widget.Toast；

公共类 Activity1 扩展 Activity {

    私人按钮 button_save;
    私有 GestureOverlayView 手势；

    @覆盖
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        设置内容视图（R.layout.main）；

        手势 = (GestureOverlayView) findViewById(R.id.gestures);
        button_save = (Button) findViewById(R.id.save_button);

        button_save.setOnClickListener(new OnClickListener() {

            @覆盖
            公共无效 onClick（查看 arg0）{
                尝试 {
                    位图gestureImg = gesture.getGesture().toBitmap(100, 100,
                            8、彩色.黑色）；

                    ByteArrayOutputStream bos = new ByteArrayOutputStream();
                    手势Img.compress(Bitmap.CompressFormat.PNG, 100, bos);
                    byte[] bArray = bos.toByteArray();

                    Intent 意图 = new Intent(Activity1.this, Activity2.class);

                    intent.putExtra("draw", bArray);
                    开始活动（意图）；

                } 捕捉（异常 e）{
                    e.printStackTrace();
                    Toast.makeText(Activity1.this, "没有在字符串上绘制",
                            3000).show();
                }
            }
        });
    }

}

```

活动 2 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/image_saved"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal" />

</LinearLayout> 
```

活动2 java：

```
package com.testandroidproject;

import java.io.ByteArrayInputStream;

import android.app.Activity;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class Activity2 extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.display_image);

        ImageView image = (ImageView) findViewById(R.id.image_saved);

        ByteArrayInputStream imageStreamClient = new ByteArrayInputStream(
                getIntent().getExtras().getByteArray("draw"));
        image.setImageBitmap(BitmapFactory.decodeStream(imageStreamClient));
    }

} 
```

希望你会发现这很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:37:31.670

我不确定您要完成“保存”的哪一部分，但我假设您正在询问如何将您在画布上绘制的内容存储到位图。

首先，为自己制作一个位图以进行绘制。说，canvasBitmap。然后：

```
c.setBitmap(canvasBitmap); 
```

这将存储已绘制到“canvasBitmap”中的所有内容。然后，当用户按下按钮进行保存时：

```
savedBitmap = Bitmap.copy(canvasBitmap.getConfig(), true); 
```

现在，获取 savedBitmap 并将其发射到云中。希望有帮助。

# asp.net - ASP.net 应用架构建议？

> ID：11631706
> 
> 赞同：0
> 
> 时间：2012-07-24T13:16:43.997
> 
> 标签：asp.net, web-applications, architecture

我需要为我正在创建的 .Net Web 应用程序创建一个应用程序架构。

我对制作应用程序架构不太熟悉，但 Web 应用程序有主要的 .ASPX 页面，并且有 VB.net 代码隐藏文件。最终，我们将在 Web 应用程序中实现一个数据库。

根据代码隐藏中的逻辑，我们将根据用户在主 UI 页面中选择的选项在 Windows/Unix 系统上运行远程脚本。

关于我如何去做这件事的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:22:37.170

鉴于您将运行可能需要很长时间的脚本，我将设置 WCF 服务以异步运行脚本，这样调用 Web 应用程序就不会被阻塞。然后，让 Web 应用程序检查另一个 WCF 服务的已运行脚本的状态。最有可能的是，您希望 Web 应用程序上的 UI 启用 AJAX，以便 UI 无需刷新屏幕即可刷新。然后只需编写 WCF 服务代码以运行脚本（记住权限很重要）并编写一个服务来检查脚本的状态。

# sql - 将动态 SQL 转换为静态 SQL

> ID：11631710
> 
> 赞同：0
> 
> 时间：2012-07-24T13:16:51.967
> 
> 标签：sql, sql-server, database, tsql, stored-procedures

谁能帮我解决这个`Dynamic query`问题`Static one`

```
DECLARE @REPCD VARCHAR(10)
SET @REPCD='CA%'

IF (CHARINDEX('*',@REPCD,1)>0 OR  CHARINDEX('%',@REPCD,1)>0) 
BEGIN
    SET @WHERE = ' AND REP_CD like ''' + REPLACE(@REPCD, '''', '') + ''''
END
ELSE
BEGIN
    SET @WHERE = ' AND REP_CD = ''' + REPLACE(@REPCD, '''', '') + ''''
END 
```

我想将上面的查询转换成这样的

```
SELECT * FROM REP
WHERE CASE WHEN CHARINDEX('%',@REPCD,1)>0 THEN REP_CD like 'CA%' END AS REP_CD 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:20:23.467

为什么这行不通？

```
...
WHERE REP_CD LIKE REPLACE(@REPCD, '*', '%'); 
```

`@REPCD`在不包含通配符的情况下，`LIKE`就像`=`. 因此，根本没有理由使用`CASE`条件逻辑或任何其他变体。

如果没有动态 SQL ，目前无法实现`LIKE`/`=`可互换。好吧，我想有这种复杂的方式（假设 REP_CD 不能为 NULL），但我不知道为什么这比我上面发布的更好。

```
SET @REPCD = REPLACE(@REPCD, '*', '%');

...
WHERE REP_CD LIKE CASE WHEN CHARINDEX('%', @REPCD) > 0 THEN @REPCD ELSE REP_CD END
AND REP_CD = CASE WHEN CHARINDEX('%', @REPCD) > 0 THEN REP_CD ELSE @REPCD END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:24:31.153

```
select * 
from Rep
where Rep_CD like replace(@repcd, '*','%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:24:57.500

试试这个

```
DECLARE @REPCD VARCHAR(10)
SET @REPCD='CA'
set @REPCD=REPLACE(@REPCD,'*','%')
SELECT * FROM REP where REP_CD like @REPCD 
```

# jquery - 如何了解 jQuery 选择器在幕后的工作原理？

> ID：11631711
> 
> 赞同：15
> 
> 时间：2012-07-24T13:16:51.210
> 
> 标签：jquery, jquery-selectors

例如，当我们使用 时`$('div span')`，jQuery 是如何为我们做这样的搜索的？

它是先搜索`span`元素还是先搜索`div`？

好像jQuery官网对这些东西没有解释；它只是向我们展示了通过 API 可以使用哪些功能。

我想知道每种类型的 jQuery 选择器是如何实现的，所以我可以选择最好的选择器来使用。

你知道我在哪里可以得到这样的信息吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T13:24:00.430

概括地说，你需要知道的：

1.  jQuery[从右到左](https://stackoverflow.com/q/6028555/901048)读取选择器。
2.  [使用准确的 ID 最快](https://stackoverflow.com/q/5029254/901048)，其次是使用准确的标签名称，因为它们使用优化的 JavaScript 原生方法。
3.  原生 CSS 选择器比[jQuery 选择器](http://api.jquery.com/first-selector/)`:first-child`更快。`:first`

您也可以阅读[官方 Sizzle 文档](https://github.com/jquery/sizzle/wiki/Sizzle-Documentation)，但它并没有真正讨论优化技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T14:03:36.423

它首先搜索`span`元素。它将选择器解析为：

1.  任何带有 tagName = span 的元素
2.  有一个带有 tagName = div 的祖先

对于第一部分，它可以使用该`getElementsByTagName`方法查找所有`span`元素，然后它必须遍历每个元素的祖先以查找`div`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:19:57.040

寻找最简单的地方是直接从源头阅读。从 jquery 站点下载 uncompresserd 源并从原始源中读取它的作用和顺序。

[http://jquery.com/download/](http://jquery.com/download/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:20:23.387

正如[@Juhana](https://stackoverflow.com/questions/11631711/where-i-can-know-how-jquery-selector-works/11631772#comment15404940_11631711)所评论的，如果您想了解 jQuery 用于根据其选择器选择对象的具体方法，请查看 github 存储库：

[https://github.com/jquery/jquery/](https://github.com/jquery/jquery/)

或者，查看未压缩的 jQuery 下载中提供的源代码：

[http://jquery.com/download/](http://jquery.com/download/)

如果您只想知道有哪些不同的选择器可供您使用，jQuery 在这里提供了它们的列表：

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T13:22:09.327

它们是从右到左解析的。

请参阅[http://csswizardry.com/2011/09/writing-efficient-css-selectors/](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)和[为什么浏览器从右到左匹配 CSS 选择器？](https://stackoverflow.com/questions/5797014/css-selectors-parsed-right-to-left-why)

# java - jsf2 flash 的寿命应该更长吗？

> ID：11631712
> 
> 赞同：2
> 
> 时间：2012-07-24T13:16:53.527
> 
> 标签：java, jsf, richfaces, flash-scope

我使用的是：RichFaces 版本 v.4.1.0.Final Mojarra 2.0.3

*编辑：我安装了 mojarra 2.1.11*

所以，我面临两个问题。

1 - 我要通过闪光灯，在下一个视图中看到它的对象。问题是，当通过 faces-config 重新引导我的页面时，对象永远不会出现。当我做的是

```
Company companyToView = (Company)FacesContext.getCurrentInstance().getExternalContext().getFlash().get("publicProfileCompany"); 
```

我什么都得不到。这不应该发生，因为在重新定向到新的 .xhtml 之前我设置了值。我如何设置

```
FacesContext.getCurrentInstance().getExternalContext().getFlash().put("publicProfileCompany", record.getContactedCompany());
  return "goToPublicProfile"; 
```

2 - 在其他页面中，将对象插入闪存后，它的寿命比一次重定向要长。在一种情况下，它的寿命延长了 6 倍！

我想放代码，但帖子太长了。如果需要，我会这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:19:21.310

Mojarra 2.0.3 是一个相当旧的版本。它的日期是 2010 年 7 月 1 日。那已经是 2 多年前了！已知较旧的 Mojarra 版本恰好具有与此闪存范围相关的问题，其中包括[issue 1751](http://java.net/jira/browse/JAVASERVERFACES-1751)报告。

将其升级到[Mojarra 2.0.9 或 2.1.11](http://javaserverfaces.java.net)（当前最新的 Mojarra 2.0 和 2.1），您与闪存范围相关的大多数问题应该会消失。只剩下一个与闪存范围相关的特定问题：当您重定向到不同路径（文件夹）中的页面时，它不起作用，但当您重定向到同一路径（文件夹）中的页面时，它应该起作用。

# c# - 如何在 .NET 中调试类库

> ID：11631716
> 
> 赞同：1
> 
> 时间：2012-07-24T13:17:03.030
> 
> 标签：c#, .net, c

我有两个项目的解决方案

1.  我的项目 PortCloud
2.  带有源代码的库 Renci.SshNet

我从 PortCloud 项目引用到 Renci.SshNet 库

当我尝试运行/调试解决方案时，库中出现异常错误并且应用程序崩溃。

问题是我在调试器中没有看到异常。我想看看图书馆里发生这种情况的地方以及原因。我究竟做错了什么？为什么调试器不会自动打开有问题的文件并向我显示确切的错误？

**更新**访问[http://screencast.com/t/1aIUVX27](http://screencast.com/t/1aIUVX27)视频，了解我在 Visual Studio 中的实际操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:21:00.407

将这两个项目添加到您的 Visual Studio 解决方案中

1.  从项目，转到参考
2.  添加项目参考
3.  添加要调试的项目。

运行 F5 进行调试。F10 跳过和 F11 进入功能

[此处](http://www.codeproject.com/Articles/79508/Mastering-Debugging-in-Visual-Studio-2010-A-Beginn)调试的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T10:40:31.170

您可以添加一个新的 unitest 项目。然后您可以将其添加为项目的引用并进行调试。

# php - Javascript函数在使用PHP的mongoDB中无法正常工作

> ID：11631717
> 
> 赞同：1
> 
> 时间：2012-07-24T13:17:10.470
> 
> 标签：php, javascript, mongodb

我已将正则表达式保存为集合中的值。我想根据 mongodb 中的正则表达式检查一个字符串，它是否匹配？我知道我应该使用相同的javascript代码，但它不适用于php-mongodb。

它从 mongodb 客户端控制台工作。

这里我的代码，

```
<?php

    $dbName = "XYZ";
    try
    {
            $dbInstanceName = $dbName;
            $mongoInstance  = new Mongo("localhost:27017", array("persist"    => "x"));
            $dbReference = $mongoInstance->$dbInstanceName;
            $db          = $mongoInstance->$dbInstanceName;
    }
    catch (Exception $e)
    {
            echo "<pre>";
            print_r($e);
            echo "</pre>";
            exit;
    }

    $query  = new MongoCode("function (){return RegExp(this.regCountry).test('India');}");

    $c = "Countries1";

    $cursor = $db->$c->find($query);

    if ($cursor->count() == 0)
    {
            echo "<pre>";
            print_r("No Data Found.!");
            echo "</pre>";
            exit;
    }
    else
    {

            $data = array();
            while ($cursor->hasNext())
            {
                    $cursor->next();
                    array_push($data, $cursor->current());
            }                
    }
    echo "<pre>";
    print_r($data);
    echo "</pre>";
    exit; 
```

?>

它的工作，但没有返回......！

共鸣：

```
Array
(

) 
```

在这里，控制台屏幕排序，它给定的返回一个值。

![在此处输入图像描述](../Images/21d37f786f8b926cc9b8f0d4271c36c3.png)

这是我的数据样本：

![在此处输入图像描述](../Images/0410d75c8831a44bc11ebe6196dcd56d.png)

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:40:40.910

如果我上面的评论不起作用，请尝试更改：

```
$cursor = $db->$c->find($query); 
```

到：

```
$cursor = $db->selectCollection($c)->find($query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:22:38.290

最后我得到了答案：

更改我的代码如下所示

```
<?php

    $dbName = "Scrubly";
    try
    {
            $dbInstanceName = $dbName;
            $mongoInstance  = new Mongo("localhost:27017", array("persist"    => "x"));
            $dbReference = $mongoInstance->$dbInstanceName;
            $db          = $mongoInstance->$dbInstanceName;
    }
    catch (Exception $e)
    {
            echo "<pre>";
            print_r($e);
            echo "</pre>";
            exit;
    }

    $query = "function(){return db.Countries1.find(function (){return RegExp(this.regCountry).test('India');}).toArray();}";

    $result = $db->execute($query);
    echo "<pre>";
    print_r($result);
    echo "</pre>";
    exit;

?> 
```

输出 ：

```
Array
(
[retval] => Array
    (
        [0] => Array
            (
                [_id] => MongoId Object
                    (
                        [$id] => 500e5b456bcb44780d000072
                    )

                [country] => India
                [countryCode] => IN
                [createdAt] => 2012-07-24 13:52:29
                [id] => 386
                [regCountry] => ^(.*)India(.*)$
                [updatedAt] => 2012-07-24 13:52:29
            )

    )

[ok] => 1
) 
```

# java - 小程序中禁用的一些子菜单

> ID：11631723
> 
> 赞同：0
> 
> 时间：2012-07-24T13:17:24.260
> 
> 标签：java, swing, browser, applet

我的小程序有一个菜单栏和一些子菜单。当我从系统浏览器访问小程序时，所有子菜单都已启用，但是当我从其他机器访问相同的 url 时，某些子菜单被禁用。可能是什么问题？

我需要对浏览器的设置进行任何更改吗？

代码片段

```
private void setupMenus() {
        getContentPane().add(mainMenuBar, BorderLayout.NORTH);
        JMenu fileMenu = new JMenu("File");
        fileMenu.setMnemonic('f');
        mainMenuBar.add(fileMenu);
        fileMenu.add(myGenDocViewer.getAction("new_doc")).setMnemonic('n');
        fileMenu.add(myGenDocViewer.getAction("open_doc")).setMnemonic('o');   //Disabled
        fileMenu.addSeparator();
        fileMenu.add(myGenDocViewer.getAction("save_doc")).setMnemonic('s');                fileMenu.add(myGenDocViewer.getAction("save_as")).setMnemonic('a');
        fileMenu.addSeparator();
        fileMenu.add(myGenDocViewer.getAction("export_doc")).setMnemonic('e'); //Disabled

        fileMenu.add(myGenDocViewer.getAction("print")).setMnemonic('p');
        fileMenu.add(myGenDocViewer.getAction("print_all"));
        fileMenu.addSeparator();
        fileMenu.add(myGenDocViewer.getAction("close_doc")).setMnemonic('c');
        fileMenu.add(myGenDocViewer.getAction("close_all_doc")).setMnemonic('l');

        JMenu editMenu = new JMenu("Edit");
        editMenu.setMnemonic('e');
        mainMenuBar.add(editMenu);
        editMenu.add(myGenDocViewer.getAction("undo")).setMnemonic('u');
        editMenu.add(myGenDocViewer.getAction("redo")).setMnemonic('r');
        editMenu.addSeparator();
        editMenu.add(myGenDocViewer.getAction("cut")).setMnemonic('t');
        editMenu.add(myGenDocViewer.getAction("copy")).setMnemonic('c');
        editMenu.add(myGenDocViewer.getAction("paste")).setMnemonic('p');
        editMenu.add(myGenDocViewer.getAction("delete")).setMnemonic('d');
        editMenu.addSeparator();
        editMenu.add(myGenDocViewer.getAction("selectAll")).setMnemonic('s');
        editMenu.add(myGenDocViewer.getAction("deselectAll")).setMnemonic('e');
        editMenu.add(myGenDocViewer.getAction("selectArea")).setMnemonic('a');
        editMenu.addSeparator();
        editMenu.add(myGenDocViewer.getAction("preferences")).setMnemonic('f');

        JMenu viewMenu = new JMenu("View");
        viewMenu.setMnemonic('v');
        mainMenuBar.add(viewMenu);
        viewMenu.add(myGenDocViewer.getAction("page_first")).setMnemonic('f');
        viewMenu.add(myGenDocViewer.getAction("page_prev")).setMnemonic('p');
        viewMenu.add(myGenDocViewer.getAction("page_next")).setMnemonic('n');
        viewMenu.add(myGenDocViewer.getAction("page_last")).setMnemonic('l');
        viewMenu.add(myGenDocViewer.getAction("goto_page")).setMnemonic('g');
        viewMenu.addSeparator();
        viewMenu.add(myGenDocViewer.getAction("doc_first")).setMnemonic('i');
        viewMenu.add(myGenDocViewer.getAction("doc_prev")).setMnemonic('r');
        viewMenu.add(myGenDocViewer.getAction("doc_next")).setMnemonic('e');
        viewMenu.add(myGenDocViewer.getAction("doc_last")).setMnemonic('s');
        viewMenu.addSeparator();
        viewMenu.add(myGenDocViewer.getAction("showhidethumb")).setMnemonic('b');
        viewMenu.add(myGenDocViewer.getAction("hide_show")).setMnemonic('a');

        JMenu imageMenu = new JMenu("Image");
        imageMenu.setMnemonic('i');
        mainMenuBar.add(imageMenu);
        imageMenu.add(myGenDocViewer.getAction("enhance")).setMnemonic('e');
        imageMenu.add(myGenDocViewer.getAction("invert")).setMnemonic('v');
        imageMenu.addSeparator();
        imageMenu.add(myGenDocViewer.getAction("zoom_in")).setMnemonic('i');
        imageMenu.add(myGenDocViewer.getAction("zoom_out")).setMnemonic('o');
        imageMenu.add(myGenDocViewer.getAction("zoom_custom")).setMnemonic('z');
        imageMenu.addSeparator();
        imageMenu.add(myGenDocViewer.getAction("fit_height")).setMnemonic('h');
        imageMenu.add(myGenDocViewer.getAction("fit_width")).setMnemonic('w');
        imageMenu.add(myGenDocViewer.getAction("fit_window")).setMnemonic('o');
        imageMenu.add(myGenDocViewer.getAction("fit_actualsize")).setMnemonic('a');
        imageMenu.addSeparator();
        imageMenu.add(myGenDocViewer.getAction("rotate_90")).setMnemonic('r');
        imageMenu.add(myGenDocViewer.getAction("rotate_180")).setMnemonic('8');
        imageMenu.add(myGenDocViewer.getAction("rotate_270")).setMnemonic('l');
        imageMenu.add(myGenDocViewer.getAction("rotate_pages")).setMnemonic('p');

        JMenu annotationMenu = new JMenu("Annotation");
        annotationMenu.setMnemonic('a');
        mainMenuBar.add(annotationMenu);
        annotationMenu.add(myGenDocViewer.getAction("Arrow")).setMnemonic('a');
        annotationMenu.add(myGenDocViewer.getAction("Circle")).setMnemonic('c');
        annotationMenu.add(myGenDocViewer.getAction("Highlight")).setMnemonic('h');
        annotationMenu.add(myGenDocViewer.getAction("Line")).setMnemonic('l');
        annotationMenu.add(myGenDocViewer.getAction("Note")).setMnemonic('n');
        annotationMenu.add(myGenDocViewer.getAction("Pen")).setMnemonic('p');
        annotationMenu.add(myGenDocViewer.getAction("Rect")).setMnemonic('r');
        annotationMenu.add(myGenDocViewer.getAction("Stamp")).setMnemonic('s');
        annotationMenu.add(myGenDocViewer.getAction("Text")).setMnemonic('t');
        annotationMenu.addSeparator();
        annotationMenu.add(myGenDocViewer.getAction("eraser")).setMnemonic('e');
        annotationMenu.add(myGenDocViewer.getAction("move_front")).setMnemonic('f');
        annotationMenu.add(myGenDocViewer.getAction("send_back")).setMnemonic('b');
        annotationMenu.add(myGenDocViewer.getAction("properties")).setMnemonic('o');
    } 
```

我从这里使用 TViewerApplet.java（它扩展了 JApplet）[http://publib.boulder.ibm.com/infocenter/cmgmt/v8r4m0/index.jsp?topic=%2Fcom.ibm.samples.doc%2Fsamples%2Fjava% 2Fviewer%2Freadme.html](http://publib.boulder.ibm.com/infocenter/cmgmt/v8r4m0/index.jsp?topic=%2Fcom.ibm.samples.doc%2Fsamples%2Fjava%2Fviewer%2Freadme.html)

浏览器信息:: 我使用的是 Internet Explorer 8

jdk版本：jdk1.6

# c# - SSIS 脚本组件中的 ComponentMetaData.FireError 方法有什么作用

> ID：11631725
> 
> 赞同：5
> 
> 时间：2012-07-24T13:17:24.867
> 
> 标签：c#, sql-server-2008-r2, ssis

我已经浏览了 MSDN。但无法正确理解下面提到的方法。

如果下面的代码包含在 SSIS 脚本目标组件中，它会做什么？

```
bool Error = false;
this.ComponentMetaData.FireError(0, "myScriptComponent", 
    "`A Transformation error occurred. Check the corresponding Text File ", 
    "", 0, out Error);` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:40:41.777

FireError 方法允许您引发与 SSIS 中其他地方使用的内置错误处理方法一致的错误。即上面的代码引发了由 OnError 事件拾取的错误。

FireError 方法后面的参数在 BOL 上进行了描述。

这可用于提供足够的错误处理（在编写任何自定义代码时始终应该这样做）。例如：

```
Try

   'Your Code Here

Catch

   'Error handling here
   Me.ComponentMetadata.FireError(...)

end try 
```

除了 .FireError 之外，附加的 .Fire... 方法允许您触发将被 SSIS 拾取的类似事件，例如 .FireInformation 允许您将消息写入输出窗口。

# xpath - XPath 中是否存在“位置不同”

> ID：11631740
> 
> 赞同：3
> 
> 时间：2012-07-24T13:18:43.943
> 
> 标签：xpath

考虑一个查询

```
//item[value='testvalue']/ancestor::container[1] 
```

如果*项目在**容器*内出现多次，那么我们有几个命中应该在结果中出现多次。结果是节点，对吧？因此，如果我对它们应用**不同的值**，它们将不再是节点，并且该函数在技术上将返回丢失位置信息的值。但是是否存在允许保持“节点”结果同时排除重复命中的操作（重构、函数）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:31:14.037

> 是否存在允许保持“节点”结果同时排除重复命中的操作（重构、函数）？

根据定义，XPath 运算符`/`执行重复数据删除，因此：

```
//item[value='testvalue']/ancestor::container[1] 
```

不选择两个相同的节点。

# mysql - MySQL 状态“关闭表”需要双倍的处理时间

> ID：11631743
> 
> 赞同：5
> 
> 时间：2012-07-24T13:18:57.043
> 
> 标签：mysql, performance

我有一个需要很长时间的删除查询。当我签入时，`processlist`该状态显示为“*关闭表格*”。关闭表需要很长时间。

*示例：*
我运行一个查询，总时间为*1:42*秒，其中*80-90*秒用于关闭表。

所有查询都发生这种情况，`load data`例如`select`和`insert`。

以下是*my.cnf*设置：

```
key_buffer_size = 2G
sort_buffer_size = 8M
read_buffer_size = 10M
read_rnd_buffer_size = 10M
join_buffer_size = 2M
bulk_insert_buffer_size = 100M
myisam_sort_buffer_size = 64M

#tmp_table_size = 100M
#max_heap_table_size = 64M
#max_allowed_packet = 64M

table_cache=1024 
```

我的信息

```
[root@localhost ~]# free -m
             total       used       free     shared    buffers     cached
Mem:          7862       6686       1175          0         11       4091
-/+ buffers/cache:       2583       5278
Swap:        15998         18      15980 
```

请告诉我我需要在*my.cnf*文件中进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:36:10.590

**收盘**

该线程正在将更改的表数据刷新到磁盘并关闭已使用的表。这应该是一个快速的操作。如果没有，您应该确认您没有完整的磁盘并且该磁盘没有被大量使用。

您可以查看[General MySql Thread States](http://dev.mysql.com/doc/refman/5.0/en/general-thread-states.html)以获取更多详细信息。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:33:55.767

您需要在 my.cnf 中设置以下变量以避免打开和关闭表：

```
table_open_cache = 10000
table_definition_cache = 10000 
```

看看[http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_table_open_cache](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_table_open_cache)

和[http://dev.mysql.com/doc/refman/5.5/en/table-cache.html](http://dev.mysql.com/doc/refman/5.5/en/table-cache.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-01T08:36:52.040

检查这两个变量的值，这对于在这种情况下提高 mysql 性能也很重要。

**query_cache_size** : - 每次插入时都会刷新查询缓存，这会降低 MySQL 的性能，因为它会增加开销。检查该值是否太高并且以兆字节为单位。

**Innodb_flush_log_at_trx_commit**： - 您可以将其设置为 0（日志文件每秒刷新到磁盘）、1（日志文件在每次提交时刷新到磁盘）和 2（日志文件在每个短时间间隔内刷新，以秒为单位）。

# javascript - 使用数据 URI 提示用户保存文件

> ID：11631749
> 
> 赞同：0
> 
> 时间：2012-07-24T13:19:11.203
> 
> 标签：javascript, file, save, prompt, data-uri

我正在编写一个 Web 应用程序，它允许用户选择一个`PNG`文件，向其中写入一个`iTXt`块，然后将其保存回他们的本地文件系统。我会使用新的`FileWriter`API 来执行此操作，但目前只有 Google Chrome 添加了对它的支持。

由于我的文件在内存中表示为[二进制字符串](https://developer.mozilla.org/en/DOM/FileReader#readAsBinaryString%28%29 "文件阅读器 - MDN")，因此我使用数据 URI 提示用户保存文件，如下所示：

```
window.location.href = "data:application/octet-stream;base64," + btoa(blob); 
```

由于 mime-type 是`application/octet-stream`浏览器提示用户打开或保存它。但是问题是用户不知道它是哪种类型的文件。所以用户必须手动添加文件扩展名。

目前我提醒用户文件需要保存的扩展名。然而，这似乎是一个不雅的解决方案。有没有更好的方法来达到相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:06:05.627

如果这是 HTTP，那么您要么必须将内容处置设置为附件，即使文件的 mime 类型已知，也要保存文件，或者为八位字节流类型的附件设置文件名。[`data:`但是，这些标头都不能使用URI](https://www.rfc-editor.org/rfc/rfc2397)来模拟，所以我看不到使用这样的 URI 打开“另存为...”对话框的方法。

其他人询问如何[为 js 变量打开保存文件对话框](https://stackoverflow.com/q/2980569/1468366)，从那里的答案来看，似乎有现成的解决方案，只要客户端安装了 Flash（并且没有被阻止）就可以使用。

因此，也许您可​​以尝试多种解决方案，从您提到的开始，如果不可用，则尝试基于闪存的方法，然后使用有关文件扩展名的警报消息`FileWriter`回退到URI。`data:`这样，您可能会为每个客户实现最佳结果。

# c# - 从业务层中声明的对象调用网站中声明的对象的静态方法？

> ID：11631750
> 
> 赞同：0
> 
> 时间：2012-07-24T13:19:12.080
> 
> 标签：c#, interface, static-methods

GlobalCache 在网站中声明，我正在业务层中创建另一个对象，该对象需要调用 GlobalCache 上的方法。由于两者都引用了一个“Contract”接口的组装，我的第一个想法是在“Contract”中定义IGlobalCache，并在业务层使用Ninject实例化IGlobalCache来调用方法。

问题是该方法是静态的，您不能在接口中声明静态方法。你怎么能从不知道方法所属类型的程序集中调用静态方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:22:42.540

您可以使用该方法创建一个接口（显然是非静态的），并在知道具有静态方法的类的程序集中创建该接口的实现。这个实现只是简单地委托给具有静态方法的类。

在大会 A（合同）中：

```
public interface IGlobalCache
{
    void Foo();
} 
```

在大会 B（业务）中：

```
class FooBar
{
    public FooBar(IGlobalCache globalCache) { /*...*/ } // dependency injection
} 
```

在装配 C 中：

```
class GlobalCacheImpl : IGlobalCache
{
    public void Foo()
    {
        GlobalCache.FooStatic();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:24:52.523

您可以在另一个程序集中设置静态类 GlobalCache，从您的网站项目或业务项目中添加对该程序集的引用。您的 GlobalCache 类是技术类，他必须存在于技术项目中

# c++ - 如何将对象移动到未初始化的内存中？

> ID：11631752
> 
> 赞同：5
> 
> 时间：2012-07-24T13:19:19.997
> 
> 标签：c++, c++11, move-semantics

给定一个已分配但未初始化的内存位置，我如何将一些对象移动到该位置（破坏原始位置），**而不**构造可能昂贵的中间对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T13:24:59.310

您可以使用placement new 在内存中移动构造它：

```
void * memory = get_some_memory();
Thing * new_thing = new (memory) Thing(std::move(old_thing)); 
```

如果它有一个重要的析构函数，那么你需要在完成后显式地销毁它：

```
new_thing->~Thing(); 
```

# java - 如何以我想要的方式/格式使用 log4j？

> ID：11631753
> 
> 赞同：0
> 
> 时间：2012-07-24T13:19:20.463
> 
> 标签：java, logging, log4j

我想了解 log4j 是如何工作的。我已经阅读了很多教程和该站点的所有答案，但我仍然没有得到一个有效的具体示例。

我试过这个：

```
import org.apache.log4j.*;

public class Exercise {
    private static Logger logger = Logger.getLogger(SimpleLogger.class);

    public static void main(String args[]) {

        BasicConfigurator.configure();

        // ConsoleAppender myAppender = new ConsoleAppender(null, "System.out");
        // myAppender.setLayout(new SimpleLayout());
        // logger.addAppender(myAppender);

        for (int i = 0; i < 5; i++) {
            logger.info("You are here!");
        }

        logger.info("End of program");
    }
} 
```

有了这个类：

```
import org.apache.log4j.spi.LoggingEvent;

public class SimpleLogger extends org.apache.log4j.Layout {

    @Override
    public void activateOptions() {

    }

    @Override
    public String format(LoggingEvent event) {
        return "log message = " + event.getMessage().toString() + "/n";
    }

    @Override
    public boolean ignoresThrowable() {
        return true;
    }
} 
```

但我的输出是：

```
0 [main] INFO SimpleLogger  - You are here!
1 [main] INFO SimpleLogger  - You are here!
1 [main] INFO SimpleLogger  - You are here!
1 [main] INFO SimpleLogger  - You are here!
1 [main] INFO SimpleLogger  - You are here!
1 [main] INFO SimpleLogger  - End of program 
```

我也试过了，代码没有注释，但我得到的只是双重形式的输出或其他东西。

问题：如何使输出（控制台或文件）成为我想要的格式？我是否需要修改（log4j.properties）之类的外部文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:29:21.483

这一行：

```
private static Logger logger = Logger.getLogger(SimpleLogger.class); 
```

只是通知默认记录器当前的记录上下文是 SimpleLogger。它没有指定底层的记录器实现。事实上，您根本不需要实现自定义记录器。您只需要使用允许您在配置文件中指定格式的配置器。一种常见的技术是使用 XmlConfigurator，然后您的 XML 配置文件可以非常具体地在各种上下文下进行格式化。[在此处](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)查看有关基于 XML 的配置的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:26:06.520

在属性文件中配置 log4j 是最佳实践。
通过指定`ConversionPattern`您可以获得所需的输出格式。例如

```
log4j.appender.rollingFile.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:29:10.753

该行：

```
private static Logger logger = Logger.getLogger(SimpleLogger.class); 
```

并不意味着现在记录器将使用您的类来记录，它只是意味着它将在 log4j.properties 文件中查找一个被调用的记录器`SimpleLogger`（或者如果它在一个包中它将查找`some.package.SimpleLogger`）并且它将使用模式布局为该记录器定义。

如果找不到该记录器，它将默认为根记录器并使用根记录器附加程序的模式布局。

# objective-c - AVAudioRecorder 不保留

> ID：11631755
> 
> 赞同：0
> 
> 时间：2012-07-24T13:19:22.513
> 
> 标签：objective-c, cocoa, release, dealloc, avaudiorecorder

我在我的 mac 应用程序中使用 AVAudioRecorder。在我的 .m 文件中，我声明

```
@interface RecordViewController ()
{
    AVAudioRecorder *audioRecorder;
...
}
@end 
```

再往下，我然后像这样分配初始化对象：

```
audioRecorder = [[[AVAudioRecorder alloc] initWithURL:soundFileURL settings:recorderSettings error:&error] retain];
...
[audioRecorder prepareToRecord];
...
[audioRecorder record]; 
```

我可以看到文件已创建，但它只有 4KB。我没有收到错误消息，但是当我测试是否`[audioRecorder isRecording]`可以看到 [audioRecorder 不再录制。我假设该对象已被释放，即使我没有使用 ARC 并且没有调用 dealloc 方法。

我对 AVAudioPlayer 也有类似的问题，但`retain]`附加到 alloc init 的附加功能解决了这个问题。

我究竟做错了什么？

谢谢

**更新 1：**

我什至尝试过执行以下操作（均采用相同的方法）：

```
[audioRecorder record];
NSLog(@"recording is ... %d", [audioRecorder isRecording]); 
```

结果是0。？？？

我必须使用`self`吗？还是懒惰地实例化`audioRecorder`？

**更新 2：** 我重新创建了项目 - 将其命名为 TEST 并从我的旧项目中复制了源代码。现在它起作用了？！？！去搞清楚。源代码是逐行相同的。这是 XCode 的一个已知问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:57:37.013

首先，根据您的评论，如果您仍然可以访问该实例，则意味着您的对象不是 dealloc。

AVAudioRecorder 提供一个委托（[AVAudioRecorderDelegate](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioRecorderDelegate_ProtocolReference/Reference/Reference.html#//apple_ref/occ/intf/AVAudioRecorderDelegate)）如果录制成功或出现错误，您是否尝试过使用委托记录日志？

特别是如果在录制时发生该方法 `audioRecorderEncodeErrorDidOccur:error:`应该会给您一些错误。

顺便说一句，`retain]`不需要添加，因为`alloc` `init`您拥有该对象的所有权，您应该释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:44:37.920

除非你释放它，否则它不能被释放，因为你分配和初始化并且你不释放。（它也不是自动释放的。）

如果启用了 ARC，它必须是强的。

请看[http://chinki-singh.blogspot.com/2011/07/how-to-record-audio-using.html](http://chinki-singh.blogspot.com/2011/07/how-to-record-audio-using.html)

# image - 连接的 Flex 图像源

> ID：11631756
> 
> 赞同：0
> 
> 时间：2012-07-24T13:19:23.133
> 
> 标签：image, apache-flex

在 Flex 中，我试图在路径名中连接图像的名称。最好，我想通过嵌入来做到这一点，但如果它只能在没有嵌入的情况下工作，那么我会走那条路。我的嵌入代码如下所示：

```
<s:Image id="loader1" source="@Embed(source="'/images/'+{data.photo}+'.png'")"/> 
```

我的未嵌入代码如下所示：

```
<s:Image id="loader1" source="'/images/'+{data.photo}+'.png'"/> 
```

当我编码直接路径名时，我可以得到图片。该代码如下所示：

```
<s:Image id="loader1" source="@Embed(source='/images/2008-2011.png')"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:25:32.230

这是不可能的，因为嵌入是编译时间，并且您可以通过元数据指定图像的显式路径。虽然您的 data.photo 变量在运行时获取其值。我建议您预先嵌入所有需要的图像并声明一个哈希表，其中 data.photo 的所有可能值都是键，嵌入的图像是值。这将帮助您以与您正在寻找的方式非常相似的方式实现绑定。

# jquery - 如何在 jQuery 动画完成后使文本区域聚焦？

> ID：11631757
> 
> 赞同：-1
> 
> 时间：2012-07-24T13:19:27.710
> 
> 标签：jquery, jquery-plugins, show-hide

我的脚本中有一个 jQuery 插件，它显示和隐藏 html 中的任何元素，从[这里下载](http://papermashup.com/jquery-show-hide-plugin/)

所以在我的脚本中，它显示和隐藏了一个 div，如下所示：

```
<div class="show" rel="#hild<?php echo $r[id]; ?>">
   <button class="action">
        Respond with a new comment
   </button>
</div> 
```

单击此按钮后，将显示以下 div：

```
 <div id="hild<?php echo $r[id]; ?>" style="display:none;">
    <form method="post" name="form">
       <textarea rows="5" cols="35" name="texttcons" id="texttcons"></textarea>
    </form>
 </div> 
```

所以，我的问题是当我单击该按钮以显示另一个 div 时，动画完成后需要对文本区域进行聚焦。

请告诉我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:24:05.457

您可以使用`trigger()`：

```
$('#hild textarea').trigger('focus') 
```

而不是那个插件，你可以使用[`slideToggle()`](http://api.jquery.com/slideToggle/)方法：

> 滑动显示或隐藏匹配的元素。

```
$('.show').click(function(){
   var id = $(this).attr('rel')
   $(id).slideToggle('slow', function(){
       $(id).find('textarea').trigger('focus')
   })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:30:11.087

或[http://www.mtslo.bplaced.com/jquery/danawoodman-jquery-showhide-7a5c5fd/#example-5](http://www.mtslo.bplaced.com/jquery/danawoodman-jquery-showhide-7a5c5fd/#example-5)

```
$('#hild<?php echo $r[id]; ?>').showhide({
    default_open: false,
    target_obj: '$obj.parent().next()',
    focus_target: '$target.find("input")[0]'
}); 
```

你为什么用身份证？如果它是由php生成的？为什么不使用类？

```
$('.ex-2').showhide({
    default_open: false,
    target_obj: '$obj.parent().next()',
    focus_target: '$target.find("input")[0]'
}); 
```

和html：

```
<ul>
    <li>
        <a href="#" title="Toggle the span" class="ex-2">Toggle item 1</a>
        <span><form>label <input /></form></span>
    </li>
    <li>
        <a href="#" title="Toggle the span" class="ex-2">Toggle item 2</a>
        <span><form>label <input /></form></span>
    </li>
    <li>
        <a href="#" title="Toggle the span" class="ex-2">Toggle item 3</a>
        <span><form>label <input /></form></span>
    </li>
</ul> 
```

**更新！**

**[工作jsfiddle](http://jsfiddle.net/FKSDp/)**

# ruby-on-rails - Rails + Twitter Bootstrap -- btn-mini btn-small 不改变大小

> ID：11631763
> 
> 赞同：1
> 
> 时间：2012-07-24T13:19:50.657
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails

希望在表格中使用图标作为删除按钮，如下所示：

```
<a href="#" class="btn btn-danger btn-mini"><i class="icon-white icon-trash"></i></a> 
```

如果我将此代码粘贴到我的 rails 应用程序中的纯 html 页面中，btn-mini 和 btn-small 似乎没有任何效果。

[当我在http://www.plugolabs.com/twitter-bootstrap-button-generator/](http://www.plugolabs.com/twitter-bootstrap-button-generator/)上预览此按钮时，它会按我的预期出现。任何熟悉为什么这可能不起作用的人？我没有加载任何自定义 css 文件，只有引导程序。

另外，我正在跑步

```
gem 'bootstrap-sass', '~> 2.0.4.0' 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T19:22:45.193

在这里查看 bootstrap-sass 源代码：

[https://github.com/twbs/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_buttons.scss](https://github.com/twbs/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_buttons.scss)

gem 使用 Bootstrap 3，所以使用：

.btn-xs 代替 .btn-mini
.btn-sm 代替 .btn-small
.btn-lg 代替 .btn-large

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T03:29:29.400

我遇到了类似的问题，我的解决方案是更换 gem。您是否尝试过更改引导 gem？看看[这个](https://github.com/seyhunak/twitter-bootstrap-rails/)

# sql - 对于 Visual Studio 2008 中的 SSRS，如何使变量接受多个值以及单个值？

> ID：11631765
> 
> 赞同：2
> 
> 时间：2012-07-24T13:19:56.213
> 
> 标签：sql, visual-studio-2008, variables, reporting-services

我正在使用 Visual Studio 2008 制作报告，从数据库中的表中提取信息。假设我只想显示`Type`员工（由 表示`int`，例如 1-10）和他们的`Name`. 然后我的数据集将是这个查询：

```
SELECT Type, Name
FROM Employees
WHERE Type = @Type 
```

这是 SSRS，所以我不需要声明或设置变量（如果我错了，请纠正我）。当我运行报告时，它会给我一个选项来输入一个`int`for`Type`并且它会创建相应的报告。我的问题是如何设置它以便我可以输入这些类型`1,2,3`的`Type`员工以便获得报告？因此，让`int`变量能够接受一个列表`ints`或仅一个`int`. 本质上，该示例中的“结果查询”如下所示：

```
SELECT Type, Name
FROM Employees
WHERE Type = 1 AND Type = 2 AND Type = 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:28:30.130

在“参数”文件夹下的“报表数据”窗口的左侧，右键单击变量，点击“参数属性”，然后选中“允许多个值”并在下拉列表中选择正确的数据类型。我不确定为什么它决定在您运行报告时进行下拉，并且您必须在各自的行中输入每个值而不是用逗号分隔，但它似乎工作正常。然后只需将`WHERE`数据集中的子句从更改`WHERE Type = @Type`为`WHERE Type IN (@Type)`。我不知道括号是否必要。

此外，如果您创建一个单独的数据集来显示某些值，您可以显示这些值，而不必输入它们。例如，创建一个包含此查询的数据集

```
SELECT DISTINCT Type
FROM Employees
ORDER BY Type 
```

这将为您可以选中/取消选中的类型创建一个不同值的列表。你也可以让它变得更复杂。

# c++ - 使用“this”指针删除

> ID：11631770
> 
> 赞同：2
> 
> 时间：2012-07-24T13:20:19.463
> 
> 标签：c++, this, delete-operator

我正在为学校做一个项目。它模拟学生从自动售货机购买汽水。有一个名为 Card 的类，它是 Student 类的成员。那是，

每个学生都有一张卡片，这是有道理的。

```
class Student {
public:
    Student( Office &cardOffice );
    ~Student();
    bool action();
    private:
    Office* studentOffice;          // stores cardoffice.
    Card* card;                 // stores card
}; 
```

通过调用 studentOffice.create() 函数来创建学生卡。该函数返回一张卡片。

```
Card* Office::create( int id, int money ) {
    Card* card = new Card();
    card->id = id;
    card->amount = money;
    return card;
} 
```

学生调用 VendingMachine 类中的一个名为 action() 的函数来购买食物。VendingMachine 中的 buy 函数从 VendingMachine 类的 Status 枚举中返回一个类型枚举。

有一个 prng，生成一个从 0 到 9 的随机数。作业说学生的卡片有十分之一的机会被破坏。下次调用 student.action() 时，他/她将获得一个新的。

```
VendingMachine::Status VendingMachine::buy(Card* &card)
{
    if(prng(9) == 0) // generates number from 0-9
    {
        delete card;
    }
    return status;
} 
```

最初，我想检查学生的 action() 例程以查看卡是否为 NULL（如果已被删除），如果发生这种情况则创建一个新卡。但是，我知道代码会到达删除卡部分，但在检查卡是否为 NULL 时会失败。所以这一定意味着卡不为空，这意味着删除不起作用。

但我也注意到传入的卡是类型

```
Card* &card 
```

然后我正在考虑使用带有“this”指针的调用，因为我知道学生就是所谓的这个例程，并且“this”将指向调用它的对象：

它指向调用成员函数的对象。来自[http://msdn.microsoft.com/en-us/library/y0dddwwd(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/y0dddwwd(v=vs.80).aspx)

但是，如果我这样做：

```
if(prng(9) == 0)
{
    delete this->card;
} 
```

运行我的makefile时它给了我这个错误：

> 错误：VendingMachine 类没有名为 card 的成员

这是真的，它没有。编译器是否假设 VendingMachine 将调用此方法？因为学生会。

1.  也许我应该在每台自动售货机上添加一个学生，然后从该成员那里删除该卡？我强烈不希望这样做，因为有多个学生，这意味着如果他们被分配到这台自动售货机，我需要将他们全部存储起来。虽然，如果归根结底，我可以这样做。

2.  如果删除卡发生，但卡不是NULL，我删除卡时到底发生了什么？

3.  我将如何删除卡？

谢谢！

编辑：应用更改后，代码现在是：

```
if(prng(9) == 0)
{
    cout << "Destroying card" << endl;
    delete card;
    card = NULL;
    cout << "Card Destroyed" << endl;
    } 
```

不幸的是，我遇到了段错误，这可能是因为我正在访问一张不存在的已损坏卡。因为显示了销毁卡和已销毁卡，

但是我在这个电话中的 cout 没有出现：

```
 if(card == NULL)
    {
        cout << "CARD DESTROYEDADJIWJDOQIODJWDIOJWQODWODIQODJWJOWDW" << endl;
        card = studentOffice->create(id, 5);
    } 
```

那么显然该卡仍然不是NULL？这很奇怪。

EDIT2：我想我知道问题出在哪里，以及为什么会出现段错误。现在正在处理它。

EDIT3：通过重新排列使用卡时使用卡的调用顺序来解决。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:23:55.320

在方法`buy`中，您应该删除指针并将其设置为`NULL`（`delete`不会自动将指针设置为`NULL`）：

```
VendingMachine::Status VendingMachine::buy(Card* &card)
{
    if(prng(9) == 0) // generates number from 0-9
    {
        delete card;
        card = NULL;
    }
    return status;
} 
```

这就是指针通过引用传递的原因（因此您可以分配`NULL`给原始指针而不是它的副本）。

除此之外，`this->card`不编译，因为`card`属于 class `Student`，而不是 `VendingMachine`. 从`VendingMachine`的角度来看，它只是方法中的一个参数`buy`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:24:44.387

当您调用`delete`时，没有什么可以说您调用它的指针设置为`NULL`. 如果要确保删除后为NULL，则应在删除后自己进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T13:44:13.407

除了@betabandido 的答案，您始终可以在宏中定义一个删除方法来为您执行此操作。

```
#define DELETE(ptr) ( delete ptr; ptr = NULL;) 
```

虽然不可否认，这几乎总是一个坏主意，尤其是在你上学的时候，你应该养成在删除指针后将指针设置回 NULL 的习惯。

此外，这可能会导致您产生错误的安全感：

```
void MethodDeleteThis(void* item)
{
   delete item;
   item = NULL;
} 
```

并不能真正解决问题，因为 item 是传递的任何指针的副本。因此，虽然 delete 可能已释放 item 指向的对象，但将指针设置为 NULL 不会将传递给方法的指针的值更改为 NULL。解决这个问题的唯一方法是采用双指针或通过引用传递指针——这通常看起来很奇怪而且不合适。但是，我已经看到 gobject 和 gstreamer 这样做了。

我注意到，如果有任何分配或释放，许多库总是返回指针，以便您可以更可靠地检索和测试值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T14:15:09.753

正如其他人指出的那样，任何时候您`delete`都应该在指针`NULL`之后立即将其设置为。不要使用宏，养成这样做的习惯。

现在，尝试戴上我的最佳实践帽子：

我一直发现在做这种事情时传递双指针比通过引用传递指针更有用：

```
VendingMachine::Status VendingMachine::buy(Card** card) {
    // ...
    if (NULL == *card) {
        delete *card;
        *card = NULL;
    } 
```

这迫使您在代码中以不同的方式处理指针，但好处是您正在操作指针更加明显，并且它消除了方法调用中的歧义：

```
 vend.buy(card);  // Pointer reference
  vend.buy(&card); // Pointer to pointer 
```

通过第二次调用，您只需查看它就知道该方法可以并且可能会修改`card`.

# c# - c#中的泛型问题

> ID：11631775
> 
> 赞同：1
> 
> 时间：2012-07-24T13:20:43.157
> 
> 标签：c#, generics

在现有结构中添加新类时遇到问题。我将尽可能清楚地解释我的问题

```
public interface Imust
{
    string Name { get; set; }
    string File { get; set; }
    string RowKey { get; set; }
    string Time { get; set; }
    string PartitionKey { get; set; }
}

public class TA : TableServiceEntity, Imust
{
    public string Time { get; set; }
    public string Name { get; set; }
    public string File { get; set; }
}

public class TB : TableServiceEntity, Imust
{
    public string Time { get; set; }
    public string Name { get; set; }
    public string File { get; set; }
}

public class TC : TableServiceEntity, Imust
{
    public string Time { get; set; }
    public string Name { get; set; }
    public string File { get; set; }
}    

public class _Table <T> : _Account where T : Imust 
{
} 
```

在这里，上述 3 个类在我的项目中实现为表，其属性作为其列。我必须在每个类中实现接口，因为在泛型类中我放置了接口约束。TableServiceEntity 类包含 RowKey 和 PartitionKey 的实现。并且这个类在所有 3 个实体中也是继承的。

**问题**：现在我必须在我的应用程序中添加一个新表。所以为此我必须在这里添加一个新类

```
public class TD : TableServiceEntity
{

} 
```

我不希望此类实现 Imust 接口，因为它不包含这些列。但是我必须将它作为泛型类中的参数传递`_Table`。因为这个新类具有不同的列，但它执行与其他 3 个实体相同的功能。现在我将如何在维护现有结构的同时添加这个新类？

请建议我为这个问题提供更好的解决方案？

**编辑**

是的，我可以将约束 TableServiceEntity 作为基类。但是在泛型类`_Table`中，很少有对`File`属性进行操作的函数，例如

```
 public T AccessEntity(string Id = "0", string File = "0")
    {
        return (from e in ServiceContext.CreateQuery<T>(TableName)
                where e.RowKey == Id || e.File == File
                select e).FirstOrDefault();
    } 
```

如果我删除了这个接口约束，那么它会显示一个错误`T does not have a defination for File`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:26:04.510

我会这样做...接口在您的声明中没有意义，因为表的更通用类型是 TableServiceEntity

```
public class _Table <T> : _Account where T : TableServiceEntity
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:29:37.107

将界面一分为二：

```
public interface Ibase

    string RowKey { get; set; }
    string PartitionKey { get; set; }
}

public interface Imust : Ibase
{
    string Name { get; set; }
    string File { get; set; }
    string Time { get; set; }
}

public class TA : TableServiceEntity, Imust
{
    public string Time { get; set; }
    public string Name { get; set; }
    public string File { get; set; }
}

public class TB : TableServiceEntity, Imust
{
    public string Time { get; set; }
    public string Name { get; set; }
    public string File { get; set; }
}

public class TC : TableServiceEntity, Imust
{
    public string Time { get; set; }
    public string Name { get; set; }
    public string File { get; set; }
}    

public class _BaseTable <T> : _Account where T : Ibase 
{
}

public class _Table <T> : _BaseTable<T> where T : Imust 
{
} 
```

并在`_BaseTable`和 这个特定于`Time`和在 中实现通用功能。`Name``File``_Table`

在您对问题进行编辑和编辑之后，它会更加直观。`_BaseTable`那些依赖于的方法`File`，`Name`或者`Time`可以标记为抽象并在`_Table`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:25:08.820

为什么不让 _Table 成为`<TableServiceEntity>`类型？显然，您正在破坏您的接口，因此您不能继续将其用作泛型，因为并非每个类都属于该接口？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:25:45.050

1.  您有 3 个完全相同的课程（TA、TB 和 TC）。不过，你为什么没有一个班级？
2.  对于**行为**（即方法），使用接口。对于**结构**（即属性），使用*继承*（如 at `TableServiceEntity`）。
3.  让 TD 从基类继承，但不实现接口。
4.  将限制更改`_Table`为`where T : TableServiceEntity`

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T13:28:09.690

更新以反映海报的附加信息：

您需要指定一个新的接口：

```
public interface IMust2 {
    public string File {get;set;}
    public string Rowkey {get;set;

} 
```

修改 IMust 以继承自 IMust2

```
public interface IMust : IMust2 
{
   public string Name {get;set;}
   public string Time {get;set;}
   public string PartitoinKey {get;set;}
} 
```

# c++ - 访问另一个子类中基类的受保护成员

> ID：11631777
> 
> 赞同：36
> 
> 时间：2012-07-24T13:20:47.913
> 
> 标签：c++, inheritance, encapsulation, protected

为什么会这样编译：

```
class FooBase
{
protected:
    void fooBase(void);
};

class Foo : public FooBase
{
public:
    void foo(Foo& fooBar)
    {
        fooBar.fooBase();
    }
}; 
```

但这不是吗？

```
class FooBase
{
protected:
    void fooBase(void);
};

class Foo : public FooBase
{
public:
    void foo(FooBase& fooBar)
    {
        fooBar.fooBase();
    }
}; 
```

一方面，C++ 授予对该类的所有实例的私有/受保护成员的访问权限，但另一方面，它不授予对子类所有实例的基类的受保护成员的访问权限。这在我看来相当不一致。

我已经测试过使用 VC++ 和 ideone.com 进行编译，并且都编译了第一个而不是第二个代码片段。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-24T13:26:27.117

当`foo`接收到一个`FooBase`引用时，编译器不知道参数是否是 的后代`Foo`，所以它必须假设它不是。`Foo`可以访问*其他`Foo`对象*的继承的受保护成员，而不是所有其他兄弟类。

考虑这段代码：

```
class FooSibling: public FooBase { };

FooSibling sib;
Foo f;
f.foo(sib); // calls sib.fooBase()!? 
```

如果`Foo::foo`可以调用任意后代的protected 成员`FooBase`，则可以调用与`FooSibling`没有直接关系的protected 方法`Foo`。这不是受保护的访问应该如何工作。

如果`Foo`需要访问所有`FooBase`对象的受保护成员，而不仅仅是那些也被称为`Foo`后代的对象，则`Foo`需要成为以下对象的朋友`FooBase`：

```
class FooBase
{
protected:
  void fooBase(void);
  friend class Foo;
}; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-04T10:00:31.983

[C++ FAQ](https://isocpp.org/wiki/faq/classes-and-objects#directly-access-private-in-other-instances)很好地总结了这个问题：

> [你]可以扒自己的口袋，不可以扒父亲的口袋，也不能扒哥哥的口袋。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-24T15:21:29.960

关键点是`protected`授予您访问您自己的成员副本的权限，而不是访问*任何*其他对象中的那些成员。这是一个常见的误解，因为我们通常会概括和状态`protected`授予对派生类型的成员的访问权限（没有明确说明仅对他们自己的基类......）

现在，这是有原因的，通常您不应该访问层次结构的不同分支中的成员，因为您可能会破坏其他对象所依赖的不变量。考虑一种对某些大型数据成员（受保护的）执行昂贵计算的类型和两种按照不同策略缓存结果的派生类型：

```
class base {
protected:
   LargeData data;
// ...
public:
   virtual int result() const;      // expensive calculation
   virtual void modify();           // modifies data
};
class cache_on_read : base {
private:
   mutable bool cached;
   mutable int cache_value;
// ...
   virtual int result() const {
       if (cached) return cache_value;
       cache_value = base::result();
       cached = true;
   }
   virtual void modify() {
       cached = false;
       base::modify();
   }
};
class cache_on_write : base {
   int result_value;
   virtual int result() const {
      return result_value;
   }
   virtual void modify() {
      base::modify();
      result_value = base::result(); 
   }
}; 
```

该`cache_on_read`类型捕获对数据的修改并将结果标记为无效，以便重新计算下一次*读取*的值。如果写入次数相对较多，这是一个很好的方法，因为我们只按需执行计算（即多次修改不会触发重新计算）。`cache_on_write`预先计算结果，如果写入次数很少，并且您希望读取的成本具有确定性（考虑读取的低延迟），这可能是一个很好的策略。

现在，回到最初的问题。两种缓存策略都维护一组比基础更严格的不变量。在第一种情况下，额外的不变量是`cached`只有`true`在`data`最后一次读取后没有被修改。在第二种情况下，额外的不变量是`result_value`操作始终的值。

如果第三个派生类型引用了 a`base`并且可以`data`写入（如果`protected`允许的话），那么它会破坏派生类型的不变量。

话虽如此，语言的规范被*破坏了*（个人观点），因为它留下了后门来实现特定的结果。特别是，如果您从派生类型中的基类创建指向成员成员的指针，则访问被签入`derived`，但返回的指针是指向成员的指针`base`，它可以应用于*任何* `base`对象：

```
class base {
protected:
   int x;
};
struct derived : base {
   static void modify( base& b ) {
      // b.x = 5;                        // error!
      b.*(&derived::x) = 5;              // allowed ?!?!?!
   }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-24T13:25:06.870

在这两个示例中都`Foo`继承了受保护的方法`fooBase`。但是，在您的第一个示例中，您尝试从同一个类（`Foo::foo`调用`Foo::fooBase`）访问给定的受保护方法，而在第二个示例中，您尝试从另一个未声明为朋友类的类访问受保护的方法（`Foo::foo`尝试调用`FooBase::fooBase`，失败，后者受到保护）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T13:29:05.240

在第一个示例中，您传递了一个 Foo 类型的对象，它显然继承了 fooBase() 方法，因此能够调用它。在第二个示例中，您试图调用受保护的函数，简单地说，无论在哪个上下文中，您都不能从其声明的类实例中调用受保护的函数。在第一个示例中，您继承了受保护的方法 fooBase，因此您有权在 Foo 上下文中调用它

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T14:00:36.597

我倾向于从概念和信息的角度来看待事物。如果您的 FooBase 方法实际上被称为“SendMessage”并且 Foo 是“EnglishSpeakingPerson”并且 FooBase 是 SpeechPerson，那么您的*受保护*声明旨在将 SendMessage 限制在 EnglishSpeakingPersons（和子类，例如：AmericanEnglishSpeakingPerson、AustralianEnglishSpeakingPerson）之间。另一种派生自SpeakingPerson 的FrenchSpeakingPerson 将无法接收SendMessage，除非您将FrenchSpeakingPerson 声明为朋友，其中“朋友”意味着FrenchSpeakingPerson 具有从EnglishSpeakingPerson 接收SendMessage 的特殊能力（即可以理解英语）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-08T13:29:21.357

除了[流浪汉的回答](https://stackoverflow.com/a/14154903/40916)之外，您还可以寻求解决方法。

如果您希望子类想要调用该`fooBase`方法，您可以制作它`static`。具有所有参数的子类可以访问静态受保护方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-30T09:58:32.883

你可以在没有这样的朋友的情况下工作......

```
class FooBase
{
protected:
    void fooBase(void);
    static void fooBase(FooBase *pFooBase) { pFooBase->fooBase(); }
};
```

这避免了必须将派生类型添加到基类。这似乎有点循环。

# sql - 修改搜索以使其在 SQL Server 中不区分重音

> ID：11631783
> 
> 赞同：3
> 
> 时间：2012-07-24T13:21:21.260
> 
> 标签：sql, sql-server-2005, collation

我有一个当前排序规则为 French_CI_AS 的数据库，这意味着搜索不区分大小写，但区分重音。我的印象是，将数据库的排序规则更改为 French_CI_AI 可以解决我的问题，所以我做到了。但是，我仍然无法进行简单的搜索工作 Accent-Insensitive。我查了一下，表排序规则是 French_CI_AI，这可能是因为它与数据库一起更改了。

是否有某种方法可以使所有数据库上的口音不敏感的搜索成为可能？或者有没有办法以这种方式进行一次搜索？我只有一两个需要它的存储过程，所以我可以这样做。

如果它有任何区别，我寻找的数据类型都是 nvarchar(n)s。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:27:46.697

您可以使搜索使用您想要的任何排序规则，例如

```
WHERE column COLLATE FRENCH_CI_AI LIKE '%something%' COLLATE FRENCH_CI_AI 
```

但是，我怀疑如果您实际修复该列（更改数据库排序规则时没有发生），它会更好地工作。忽略任何约束和其他依赖项，如何解决这个问题的简短答案：

```
ALTER TABLE dbo.foo ADD newcol NVARCHAR(32) COLLATE FRENCH_CI_AI;

UPDATE dbo.foo SET newcol = oldcol;

ALTER TABLE dbo.foo DROP COLUMN oldcol;

EXEC sp_rename N'dbo.foo.newcol', N'oldcol', 'COLUMN'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T18:36:02.873

首先，更改数据库排序规则不会影响表中现有的列，但会影响新创建的表和列。这是在数据库中创建新对象时使用的默认排序规则。

因此，您要做的就是查找所有现有列并更新当前排序规则。

您可以使用 sql 游标并查询所有表和列并更新特定类型或列名的排序规则。

举例：

1）您更改未来对象的排序规则

```
USE master;
GO
ALTER DATABASE databasename COLLATE French_CI_AI ;
GO 
```

2）手动更改特定列的列排序规则

```
 ALTER TABLE tablenameX ALTER COLUMN LastName varchar(100) COLLATE French_CI_AI NULL
 ALTER TABLE tablenameY ALTER COLUMN FirstName varchar(100) COLLATE French_CI_AI NULL 
```

3) 生成带光标的sql脚本

您需要决定更改排序规则的列。它可以是类型、名称或特定表。

您可以从查看您拥有的字符类型开始并在示例中替换它们，请参见列光标。

从 information_schema.columns 中选择不同的 DATA_TYPE

你可以参考这篇文章：

[http://www.codeproject.com/Articles/302405/The-Easy-way-of-sharing-Collat​​ion-of-all-Database](http://www.codeproject.com/Articles/302405/The-Easy-way-of-changing-Collation-of-all-Database)

```
declare @CollationName as nvarchar = 'Latin1_General_CI_AS'

declare @tablename as nvarchar(100) = ''
declare @sqltext as nvarchar(100) = ''
declare @columnname as nvarchar(200) = ''
declare @DataType as nvarchar(100) = ''
declare @CharacterMaxLen as int = 0
declare @IsNullable as bit = 0

DECLARE MyTableCursor Cursor
FOR 
SELECT * from information_schema.TABLES
            WHERE TABLE_TYPE = 'BASE TABLE'
OPEN MyTableCursor
WHILE @@FETCH_STATUS = 0
    BEGIN
        DECLARE MyColumnCursor Cursor
        FOR 
        SELECT COLUMN_NAME,DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,
            IS_NULLABLE from information_schema.columns
            WHERE table_name = @TableName AND  (Data_Type LIKE '%char%' 
            OR Data_Type LIKE '%text%') AND COLLATION_NAME <> @CollationName
            ORDER BY ordinal_position 
        Open MyColumnCursor

        FETCH NEXT FROM MyColumnCursor INTO @ColumnName, @DataType, 
              @CharacterMaxLen, @IsNullable
        WHILE @@FETCH_STATUS = 0
            BEGIN
            SET @SQLText = 'ALTER TABLE ' + @TableName + ' ALTER COLUMN [' + @ColumnName + '] ' + 
              @DataType + '(' + CASE WHEN @CharacterMaxLen = -1 THEN 'MAX' ELSE @CharacterMaxLen END + 
              ') COLLATE ' + @CollationName + ' ' + 
              CASE WHEN @IsNullable = 'NO' THEN 'NOT NULL' ELSE 'NULL' END
            PRINT @SQLText 

        FETCH NEXT FROM MyColumnCursor INTO @ColumnName, @DataType, 
              @CharacterMaxLen, @IsNullable
        END
        CLOSE MyColumnCursor
        DEALLOCATE MyColumnCursor

FETCH NEXT FROM MyTableCursor INTO @TableName
END
CLOSE MyTableCursor
DEALLOCATE MyTableCursor 
```

# mysql - MYSQL - 准备 stmt 并执行 stmt 并添加 WHERE 和 LIKE

> ID：11631784
> 
> 赞同：0
> 
> 时间：2012-07-24T13:21:25.370
> 
> 标签：mysql

我正在尝试构建下一个存储过程，但它不起作用。

```
PREPARE STMT FROM 'SELECT a, b, c, d, e FROM TABLE_1 WHERE (`a` like `%?%` OR `b` like `%?%` OR `c` like `%?%` OR `d` like `%?%` OR `e` like `%?%`) LIMIT ?, ?';
EXECUTE STMT USING @search, @skip, @rows; 
```

基本上，我试图在其中一列中搜索一个字符串，并返回适合的列的行。请帮我修复它，因为我收到下一个错误：

```
Unknown column '%?%' in 'where clause' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:26:34.723

这是因为数? 应该等于`USING`子句后的参数数量。你也给出了错误的报价？而不是`"?"`尝试：

```
PREPARE STMT FROM 'SELECT a, b, c, d, e FROM TABLE_1 WHERE (`a` like "%?%" OR `b` like "%?%" OR `c` like "%?%" OR `d` like "%?%" OR `e` like "%?%") LIMIT ?, ?';

EXECUTE STMT USING @search, @search, @search, @search, @search, @skip, @rows; 
```

或尝试

```
SET @query1 = CONCAT('
    SELECT SQL_CALC_FOUND_ROWS a, b, c, d, e
    FROM TABLE_1
    WHERE (`a` like "%',@search,'%" OR
        `b` like "%',@search,'%" OR
        `c` like "%',@search,'%" OR
        `d` like "%',@search,'%" OR
        `e` like "%',@search,'%")
    LIMIT ',@skip,', ',@rows,'');

    PREPARE stmt FROM @query1; 
    EXECUTE stmt; 
    SELECT FOUND_ROWS() AS total_rows;
    DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:27:05.133

mysql 上的给定示例似乎表明问号的数量应该与参数的数量相似？

[http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)

我错了吗？

在您的情况下，这意味着七个问号和七个参数。

一切顺利

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:49:11.990

尝试这个...

```
PREPARE STMT FROM 'SELECT a, b, c, d, e FROM TABLE_1 WHERE (`a` like "%?%" OR `b` like "%?%" OR `c` like "%?%" OR `d` like "%?%" OR `e` like "%?%") LIMIT ?, ?';

EXECUTE STMT USING @search, @search, @search, @search, @search, @skip, @rows; 
```

**笔记**

变量的数量应该等于我们拥有的问号的数量。

你有 7 个问号，只有 3 个变量。所以错误来了 4th `?`。

# linux - Linux下数据库预写日志的文件系统

> ID：11631786
> 
> 赞同：1
> 
> 时间：2012-07-24T13:21:36.950
> 
> 标签：linux, filesystems, journal

我正在寻找一个自定义文件系统，它允许我执行最快的 fsync 调用，以便我可以将我的应用程序的预写日志放在 Linux 下。

对我来说，文件系统应该是最简单的一个文件，它代表我可以写入/读取并调用 fsync 的磁盘映像。

我知道 Oracle 有时会使用自己的文件系统来放置日志以使其最快。

我假设之前有人已经解决了这个问题......

# android - monodroid 和桌面应用程序的通用库

> ID：11631793
> 
> 赞同：1
> 
> 时间：2012-07-24T13:22:09.100
> 
> 标签：android, .net, mono, xamarin.android

我目前正在启动一个项目，我想开发一个 Android 和桌面应用程序以使用[mono for android](http://xamarin.com/monoforandroid)。我想将通用逻辑封装到一个共享库中，但目前我不确定如何适应这两个框架。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:53:21.230

您必须使用“Android 类库”项目模板创建项目，因为 monodroid(v2.0.5.0) 支持的 mscorlib 低于 MSFX2.0 (v2.0.50727)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:20:01.253

您需要为每个平台创建单独的类库项目，然后在它们之间共享源文件。[这个问题](https://stackoverflow.com/questions/10656092/code-sharing-between-monotouch-and-monoforandroid)有很多关于如何去做的链接和细节。

# oracle - 将select语句的结果插入Oracle存储过程中的另一个表

> ID：11631796
> 
> 赞同：4
> 
> 时间：2012-07-24T13:22:11.377
> 
> 标签：oracle, stored-procedures

我正在oracle中准备一个存储过程。在这个过程中，我有一个 select 语句，它将导致多行。现在我想将这些行插入到另一个表中。

请有人告诉我这真的很紧急。

**更新：**

我忘记提及的一件事是，我还必须在我的 select 语句结果中添加另一列。此列将包含此存储过程中的参数值。

以下是此示例存储过程

```
Create or Replace PROCEDURE "My Procedure" 
  (
    my_id in number,
    nric in VARCHAR2
  )
BEGIN
insert into new_table(my_new_id,field1, field2)
select my_id,table1.field1, table2.field2 
from table1, table2 
where table1.age=table2.age AND table1.my_nric=nric;
END 
```

在上面的示例中，我在过程参数中有 my_id，并且希望将它插入到 new_table 中，用于 table1 和 table2 中的每个结果条目。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T13:27:46.940

你可以试试这个

```
INSERT INTO myTable(field1, field2, field3)
   SELECT field1, field2, field3
     FROM anotherTable
       WHERE thisCondition = 'mycondition'; 
```

# java - 使用 XML 文件不断更新网页

> ID：11631797
> 
> 赞同：3
> 
> 时间：2012-07-24T13:22:11.060
> 
> 标签：java, javascript, html, xml, netbeans

我在将 XML 文件加载到网页并显示其中包含的信息时遇到了一个小问题。对于这个程序，我正在尝试使用加载到 XML 文件的恒定数据流来更新一个非常简单的网页。当我的程序找到新数据时（通常每隔几秒一次），它会修改 XML 文件并保存它。另一个 Web 客户端（在 Netbeans 中）运行显示此信息的网页。截至目前，我的问题是当我刷新页面时，没有出现新数据（相同的值仍然存在，即使我知道它们不应该存在）。然后我检查 XML 文件，新数据存在，因此它成功写入。奇怪的是，一旦我打开xml文件查看信息，一旦我刷新页面，网页就会自动更新。这似乎是更新网页的唯一方法是我自己打开 xml 文件。我的问题是有谁知道发生了什么，你能提供解决这个问题的方法吗？

我提供了我的 ModifyXML.java 代码和 index.jsp 页面以供参考

**修改 XML**

```
import java.io... //all import statements not shown
public class ModifyXML {

    //provide the byte array and the number of the sensor that needs to be 
    //updated in the XML file
    public ModifyXML(byte[] array, int signal) {

        try {
            //create a new Document Builder to modify the XML file 
            String filepath = "C:\\user\\projects\\onlineClient\\web\\HTTP.xml";
            DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
            Document doc = docBuilder.parse(filepath);

            // Get the root element
            Node Sensor = doc.getFirstChild();

            // Get the staff elements by tag name directly
            Node data = doc.getElementsByTagName("Data").item(0);
            Node data2 = doc.getElementsByTagName("Data2").item(0);

         /* Methods to update the information are not shown as they work fine (it saves space)*/

            // write the content into xml file
            TransformerFactory transformerFactory = TransformerFactory.newInstance();
            Transformer transformer = transformerFactory.newTransformer();
            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(new File(filepath));
            transformer.transform(source, result);

            System.out.println("Done");

        } catch (ParserConfigurationException pce) {
            pce.printStackTrace();
        } catch (TransformerException tfe) {
            tfe.printStackTrace();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        } catch (SAXException sae) {
            sae.printStackTrace();
        }
    }
} 
```

**索引.jsp**

```
<html>
<title>Home Monitor Web Client</title>
<body>
    <h1>Home Monitor</h1>
    <p id="demo">Paragraph.</p>

    <p id="demo2">Paragraph.</p>

    <br>

    <p id="demo3">Paragraph.</p>

    <p id="demo4">Paragraph.</p>

    <script type="text/javascript">
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","HTTP.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;

    //document.write("<table border='1'>");
    var data=xmlDoc.getElementsByTagName("data");
    var data2=xmlDoc.getElementsByTagName("data2");
    for (i=0;i<temperature.length;i++)
    {
        document.getElementById("demo").innerHTML="ID Number: "+data[i].getElementsByTagName("ID")[0].childNodes[0].nodeValue;
        document.getElementById("demo2").innerHTML="Reading: "+data[i].getElementsByTagName("Value")[0].childNodes[0].nodeValue;
        document.getElementById("demo3").innerHTML="ID Number: "+data2[i].getElementsByTagName("ID")[0].childNodes[0].nodeValue;
        document.getElementById("demo4").innerHTML="Reading: "+data2[i].getElementsByTagName("Value")[0].childNodes[0].nodeValue;
    }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:34:50.853

You can use the html5 Event Sources with Server Side Events. There is a good article on it at

They show this example (written in PHP and js, but you *should* be able to convert it to java)

**Server Code (PHP)**

```
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache'); // recommended to prevent caching of event data.

/**
 * Constructs the SSE data format and flushes that data to the client.
 *
 * @param string $id Timestamp/id of this connection.
 * @param string $msg Line of text that should be transmitted.
 */
function sendMsg($id, $msg) {
  echo "id: $id" . PHP_EOL;
  echo "data: $msg" . PHP_EOL;
  echo PHP_EOL;
  ob_flush();
  flush();
}

$serverTime = time();

sendMsg($serverTime, 'server time: ' . date("h:i:s", time())); 
```

**Client Code (js)**

```
if (!!window.EventSource) {
var source = new EventSource('stream.php');
source.onmessage = function(e) {
      document.body.innerHTML += e.data + '<br>';
    };    
} else {
  // Result to xhr polling :(
} 
```

check out the tutorial here. [http://www.html5rocks.com/en/tutorials/eventsource/basics/](http://www.html5rocks.com/en/tutorials/eventsource/basics/)

# hibernate - Hibernate：如何使用注释指定自定义序列生成器类名？

> ID：11631800
> 
> 赞同：10
> 
> 时间：2012-07-24T13:22:21.590
> 
> 标签：hibernate, jpa

我想使用注释指定以下 hbm 配置：

```
<id name="somePK" column="&quot;somePK&quot;" type="long">
            <generator class="com.db.hibernate.KeyGenerator"/>
        </id> 
```

我不知道如何提供类名

```
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="SEQ_STORE") 
```

我必须`@javax.persistence.SequenceGenerator`在每个实体类中指定吗？
我可以在`@GeneratedValue`注释下只指定类名吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-24T13:39:34.973

请在下面找到我在项目中使用的相同代码集。

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "XyzIdGenerator")
@GenericGenerator(name = "XyzIdGenerator",
        strategy = "com.mycompany.myapp.id.BigIntegerSequenceGenerator",
        parameters = {
            @Parameter(name = "sequence", value = "xyz_id_sequence")
        })
public BigInteger getId()
{
   return id;
}

package com.mycompany.myapp.id;

import org.hibernate.id.SequenceGenerator;
...

public class BigIntegerSequenceGenerator
    extends SequenceGenerator
{
    @Override
    public Serializable generate(SessionImplementor session, Object obj)
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-08-22T03:01:19.663

请参考[custom-id-generator-in-hibernate](http://supportmycode.com/2014/08/22/custom-id-generator-in-hibernate/)这可能会对您有所帮助。在此示例中，我通过从名为**pk_table**的主键表中获取 MAX 号来创建序列号。

**员工**类如下所示。

```
@Entity
@Table(name="EMPLOYEE")
public class Employee {

@Id
@GenericGenerator(name = "sequence_emp_id", strategy = "com.supportmycode.model.EmployeeIdGenerator")
@GeneratedValue(generator = "sequence_emp_id")  
@Column(name="employee_id")
private String employeeId;

@Column(name="firstname")
private String firstname;

@Column(name="lastname")
private String lastname;

@Column(name="birth_date")
private Date birthDate;

@Column(name="cell_phone")
private String cellphone;

//Getter and Setter methods.
} 
```

**EmployeeIdGenerator**类如下所示

```
public class EmployeeIdGenerator implements IdentifierGenerator {

public Serializable generate(SessionImplementor session, Object object)
        throws HibernateException {

    String prefix = "EMP";
    Connection connection = session.connection();
    try {

        PreparedStatement ps = connection
                .prepareStatement("SELECT MAX(value) as value from hibernate_tutorial.pk_table");

        ResultSet rs = ps.executeQuery();
        if (rs.next()) {
            int id = rs.getInt("value");
            String code = prefix + new Integer(id).toString();
            System.out.println("Generated Stock Code: " + code);
            return code;
        }

    } catch (SQLException e) {       
        e.printStackTrace();
    }
    return null;
}

} 
```

在这里，我们已经实现了`IdentifierGenerator`覆盖函数的接口`generate(SessionImplementor session, Object object)`。该语句`SELECT MAX(value) as value from hibernate_tutorial.pk_table`将从表 pk_table 中获取 MAX 数。然后我们在**MAX**数字前加上字符串“ **EMP** ”。

输出如下所示：

**员工**

```
------------------------------------------------------------
employee_id | birth_date | cell_phone | firstname | lastname
------------------------------------------------------------
EMP1        | 2014-08-22 | 111        | Nina      |  Mayers 
```

# javascript - 什么是编写内联赋值和检查 PHP“逻辑”但在 JavaScript 中的等效方法

> ID：11631802
> 
> 赞同：0
> 
> 时间：2012-07-24T13:22:25.740
> 
> 标签：javascript, comparison

在 PHP 中你可以这样写：

```
if(false !== ($value = someFunctionCall())) {
 // use $value
} 
```

如果没有定义，你将如何在 JavaScript 中编写等效的 this

```
var value; 
```

在这个比较之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:24:15.340

你会写

```
if (value = someFunction()) { 
```

我不太相信我对 PHP 的了解，但我怀疑没有必要与`false`in`if`语句进行显式比较，因为表达式是隐式布尔值。（*编辑*——有时，如果一个函数可以返回一个显式的布尔值*或*一些“好”的值，评估结果为“假”，那么是的，你确实需要与布尔值进行显式比较。）

*编辑*-如果您对`=`and之间由来已久的混淆（或潜在的混淆）感到不安`==`，那么我建议您完全避免该构造。除了有时需要相等比较而有时需要赋值之外，这并没有什么问题。

*编辑*哦，这也假定“值”已在`var` *某处*声明- 如果问题是关于如何在语句的上下文中进行*声明*`if`，那么答案是你不能这样做。

*最后的编辑我有点保证*——总结一下：

*假设*声明了“值”：

```
var value; 
```

某处，然后：

```
if (false !== (value = someFunction())) { ... } 
```

具有与 PHP 原版几乎相同的语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:26:04.630

你可以让它在执行时赋值，JavaScript 会自动添加`var`声明：

```
function foo(){
    return (Math.random() * 0.5) > 0;
}
if (false !== (f = foo())){
    alert('True!');
}
alert('f=' + f.toString()); 
```

[jsFiddle 示例](http://jsfiddle.net/7Vwsb/)

**但是**，这是非常糟糕的做法。您应该**始终**首先在需要它们的时间和地点声明您的变量。仅仅因为 PHP 和 JS 接受这种语法并不意味着它是好的做法。正确的样式如下：

```
var f = false;
if (false !== (f = foo())){
    alert('True!');
}
alert('f=' + f.toString()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T13:24:23.627

这在 JavaScript 中将是非常糟糕的做法，

你最好这样做

```
if(!(var value = someFunctionCall())) { // use value //} 
```

我个人会说之前定义它。不过你的电话。如果您担心内存，请定义它并在使用后将其清空。

# java - 有没有一种有效的方法可以将 Trove 地图中的所有值设置为零？

> ID：11631815
> 
> 赞同：0
> 
> 时间：2012-07-24T13:22:56.213
> 
> 标签：java, trove4j

有没有一种有效的方法可以将 Trove 地图中的所有值设置为零？

现在我正在这样做：

```
 public static class NcZeroD implements TDoubleProcedure{
        public TDoubleDoubleHashMap map;

        @Override
        public boolean execute(double k) {
            map.put(k, 0);
            return true;
        }   
    }

    static NcZeroD ncZeroD=new NcZeroD();   

    public static void zero(TDoubleDoubleHashMap map){
        ncZeroD.map=map;
        map.forEachKey(ncZeroD);
    } 
```

但它似乎有点乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:36:42.493

[`transformValues()`](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/TDoubleDoubleMap.html#transformValues%28gnu.trove.function.TDoubleFunction%29)如果您使用而不是，它至少会更干净一点`forEachKey()`：

```
private static final TDoubleFunction TO_ZERO = new TDoubleFunction() {
    @Override
    public double execute(double value) {
        return 0;
    }
};

public static void zero(TDoubleDoubleHashMap map) {
    map.transformValues(TO_ZERO);
} 
```

我认为您不会看到更有效的解决方案——在某些时候，必须对所有值进行迭代。

# mysql - 将值插入 MySQL

> ID：11631818
> 
> 赞同：1
> 
> 时间：2012-07-24T13:23:42.477
> 
> 标签：mysql, sql

如果我的 SQL 创建语句如下；

```
CREATE TABLE TABLENAME12
(
  TAB_ID INT NOT NULL AUTO_INCREMENT,
  NAME_FIRST NVARCHAR(200),
  TYPE NVARCHAR(200),
  PRIMARY KEY( TAB_ID )
); 
```

如果我想向其中插入值，我也应该输入`TAB_ID`吗？因为它是自动递增的。

当我`INSERT INTO SWM_SALES_FEEDBACK VALUES (1,'Jerry','ty');`插入它时，如果我没有指定主键，`INSERT INTO SWM_SALES_FEEDBACK VALUES ('Jerry','ty');`我会收到以下错误：

```
ERROR 1136 (21S01): Column count doesn't match value count at row 1 
```

1.) 如果它没有自动递增，那么拥有 AUTO_INCREMENT 有什么意义。2.）如果我有一个名为：

```
BIRTH_TIME DATE, 
```

我应该如何向该字段插入值，因为它是 `DATE`类型

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:26:12.227

1）您必须尊重表格中列的顺序。您可以执行以下任一操作：

```
INSERT INTO SWM_SALES_FEEDBACK VALUES (null, 'Jerry','ty'); 
```

或者

```
INSERT INTO SWM_SALES_FEEDBACK (NAME_FIRST, TYPE) VALUES ('Jerry','ty'); 
```

2) 日期列可以使用 '2012-07-24' 格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T13:26:22.617

使用自动增量，您需要指定列

```
INSERT INTO tablename12 ('name_first','type') values ('Jerry','ty') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T13:26:49.303

如果您没有插入每一列，则需要告诉查询您要插入哪些列。尝试`INSERT INTO SWM_SALES_FEEDBACK (NAME_FIRST,TYPE) VALUES ('Jerry','ty');`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T13:27:40.877

不确定 mysql 在新版本中是否有 to_date() 函数：

但是，您可以使用：只需将日期时间字段括在单引号中。您可以指定日期时间格式

```
 INSERT INTO table_name (birth_date) VALUES ('2008-07-04') 
```

对于其他日期格式问题，请参阅[此](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-literals.html)。

对于您的自动增量，指定列

```
INSERT INTO SWM_SALES_FEEDBACK (NAME_FIRST,TYPE) VALUES ('Jerry','ty'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T13:26:24.763

试试下面的代码

```
INSERT INTO SWM_SALES_FEEDBACK (NAME_FIRST,TYPE) VALUES ('Jerry','ty'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T13:39:26.737

## `Point 1`

如果您不想将所有字段存储在 DB 中，则必须在`VALUES`子句之前指定这些列名，如下所示。

```
INSERT INTO myTable (field2,field3) VALUES ('field2','field3') 
```

在你的情况下，声明应该是

```
INSERT INTO SWM_SALES_FEEDBACK (name_first, type) VALUES ('Jerry','ty')
                               ^^^^^^^^^^^^^^^^^^ 
```

* * *

## `Point 2`

如果您的字段为 DATETIME，TIMESTAMP 作为数据类型，则可以输入日期为

```
INSERT INTO myTable (myDate) VALUES ('2012-12-28 12:12:12') 
```

格式为`yyyy-mm-dd hh:mm:ss`

如果要将系统的当前时间存储在数据库中，可以使用`NOW()`如下所示。

```
INSERT INTO myTable (myDate) VALUES (NOW()) 
```

# .net - 如何获取piv卡认证和证书信息

> ID：11631820
> 
> 赞同：2
> 
> 时间：2012-07-24T13:23:57.487
> 
> 标签：.net, authentication, pki

我四处搜索有一个与 IIS 相关的方法（[http://technet.microsoft.com/en-us/library/cc732116.aspx](http://technet.microsoft.com/en-us/library/cc732116.aspx)），但我无法让它工作。

我需要从 Web 应用程序验证 piv 卡，然后将证书返回给 Web 应用程序。我如何在 C#.net 中做到这一点

更新：以防万一，其他人感兴趣。我找到了一个解决方案（不完美），但我在这个线程中[使用客户端证书进行智能卡身份验证](https://stackoverflow.com/questions/11760613/smart-card-authentication-using-a-client-certificate/11853354#11853354)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T19:18:56.490

我找到了一个解决方案（不完美但有效），我将其放入此线程[Smart card authentication using a client certificate](https://stackoverflow.com/questions/11760613/smart-card-authentication-using-a-client-certificate/11853354#11853354)

# zend-framework - Zend Framework - 从数据库代码中删除的问题

> ID：11631826
> 
> 赞同：0
> 
> 时间：2012-07-24T13:24:04.943
> 
> 标签：zend-framework, zend-db

在我的`Application_Model_DbTable_User`，我有以下功能：

```
public function deleteUser($username)
{
    $this->delete('username = ' . (string) $username);
} 
```

`AdminController`使用这三行代码从 my 调用此函数。

```
$uname = $this->getRequest()->getParam('username');
$user = new Application_Model_DbTable_User();
$user->deleteUser($uname); 
```

然而，这个错误出现了。

> 未找到列：1054 'where 子句'中的未知列 'test'

测试是我要删除的用户。

此代码改编自先前的代码，该代码基于`id`INT 字段删除，该代码运行良好。我究竟做错了什么？如果需要，我很乐意提供更详细的代码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:31:37.073

未引用您的查询：

```
$this->delete('username = ' . (string) $username); 
```

这相当于：

```
WHERE username = test 
```

如果您使用 where() 方法，它将为您执行此操作：

```
$table->where('username = ?', $username); 
```

或者（如文档中的示例）：

```
$where = $table->getAdapter()->quoteInto('bug_id = ?', 1235);
$table->delete($where); 
```

# iphone - UIButton Action 不使用 UITapGestureRecognizer iphone 应用程序调用？

> ID：11631827
> 
> 赞同：2
> 
> 时间：2012-07-24T13:24:05.927
> 
> 标签：iphone, ios, uibutton, uitapgesturerecognizer

我正在使用 UITapGestureRecognizer 和 UIButton 在 iPhone 应用程序中工作。我在 self.view 中添加了 UITapGestureRecognizer。当我单击 UIButton 时，它不会调用它的动作，仅调用 Tapgesture 动作。如何解决这个问题？有人可以帮忙解决这个问题吗？

这是我的代码`-ViewDidLoad`，

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapFrom:)];
    [self.view addGestureRecognizer:tapRecognizer];
    [tapRecognizer release];

UIButton *infoButton1 = [UIButton buttonWithType:UIButtonTypeInfoDark];
    infoButton1.frame = CGRectMake(0, 5, 30, 30);
    infoButton1.tag = 1;
    infoButton1.opaque = YES;
    [infoButton1 addTarget:self action:@selector(infoAlert:) forControlEvents:UIControlEventTouchUpInside | UIControlEventTouchUpOutside];
    [toolBarView1 addSubview:infoButton1]; 

-(void) infoAlert:(id) sender
{
    NSLog(@"Get Info Alert"); // Here the control not calling..
}

-(void)handleTapFrom:(UITapGestureRecognizer *)recognizer
{    
    NSLog(@"%@",[NSString stringWithFormat:@"%d", recognizer.view.tag]); // Whenever i touch the button this method only calling.
} 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:27:54.947

为什么没有人使用堆栈溢出或谷歌的精彩搜索？

这是你的答案：[https ://stackoverflow.com/a/3348532/312312](https://stackoverflow.com/a/3348532/312312)

从同一个线程来看，这似乎是一个更简单的解决方案： [https ://stackoverflow.com/a/8891030/312312](https://stackoverflow.com/a/8891030/312312)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T16:11:50.140

这是最好的解决方案：在您声明您的 tapRecognizer 之后（我指的是您的问题代码）添加以下内容：

```
 tapRecognizer.cancelsTouchesInView = NO; 
```

# java - HTTP 标头中缺少 Spring WebServiceTemplate SOAPAction

> ID：11631833
> 
> 赞同：5
> 
> 时间：2012-07-24T13:24:28.677
> 
> 标签：java, spring, soap, spring-ws

我在通过 Spring-ws WebServiceTemplate 调用 SOAP 1.2 WebService 时遇到了困难。发出的请求在 Http Header 中缺少 SOAPAction，服务器抛出错误“无法处理没有有效操作参数的请求。请提供有效的肥皂操作。” 通过通过wireshark进行监视，我能够找出SOAP Action丢失了。我也不支持任何代理。

我通过 TCP Mon（SOAP UI 之类的工具）运行请求，确保我尝试发送的 SOAP XML 是有效的，并且能够获得响应。

这是我的弹簧配置：

```
<?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
   xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans  
                        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                        http://www.springframework.org/schema/util
                        http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">
    <property name="soapVersion">
    <util:constant static-field="org.springframework.ws.soap.SoapVersion.SOAP_12" />
    </property>
</bean>

<bean id="webServiceTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
 <constructor-arg ref="messageFactory" />
<property name="defaultUri" value="https://ecomapi.networksolutions.com/soapservice.asmx" />
<property name="messageSender">
    <bean class="org.springframework.ws.transport.http.CommonsHttpMessageSender" />     </property>
</bean> 
```

这是我的java代码：

```
 public void simpleSendAndReceive() {
            try{
            StreamSource source = new StreamSource(new StringReader(MESSAGE));
            StreamResult result = new StreamResult(System.out);
            SoapActionCallback actionCallBack = new SoapActionCallback("https://ecomapi.networksolutions.com/soapservice.asmx") {
                public void doWithMessage(WebServiceMessage msg) {
                    SoapMessage smsg = (SoapMessage)msg;
                    smsg.setSoapAction("http://networksolutions.com/ReadOrder");
                }
            };
            webServiceTemplate.sendSourceAndReceiveToResult(
                    "https://ecomapi.networksolutions.com/soapservice.asmx",
                     source,
                     new SoapActionCallback("http://networksolutions.com/ReadOrder"),
     //                      actionCallBack,
                     result);

            System.out.println(source.getInputStream().toString());
            System.out.println(result.getWriter().toString());

            }catch (SoapFaultClientException e) {
                System.out.println(e.getFaultCode());
                System.out.println(e.getFaultStringOrReason());
                System.out.println(e.fillInStackTrace().getLocalizedMessage());
            } catch (WebServiceIOException we) {
                System.out.println(we.getRootCause());
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:03:06.183

我遇到了同样的问题，我将其追溯到 com.sun.xml.messaging.saaj.soap.MessageImpl 实现的 1.3.2 版本中的一个错误（[http://java.net/jira/browse/SAAJ- 37](http://java.net/jira/browse/SAAJ-37) ). 我升级到 1.3.19 版本，一切都很好。

**问题**：-

在将请求写入输出流之前，会调用 saveChanges() 方法。此类的 1.3.2 版本在其“saveChanges”方法的实现中覆盖了“Content-Type”请求标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T09:20:06.397

SOAPAction 仅在 SOAP 1.1 中是强制性的，请参阅[Content Type 部分](http://www.hadleynet.org/marc/whatsnew.html)。

> SOAP 1.1 强制 SOAPAction HTTP 标头已在 SOAP 1.2 中删除。取而代之的是 application/soap+xml 媒体类型的可选操作参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T20:08:48.217

我有一个类似的问题，这是由于 package-info.java 文件中 XmlSchema 注释的命名空间与我试图调用的肥皂服务不同。这是因为我使用 xjc 从 xsd 生成 jaxb 请求和响应对象，这些 xsd 是我从 wsdl 部分加上我正在连接的先前服务的 xsd 标头缝合在一起的，所以这对我来说是一个纯粹的剪切和粘贴错误但是之前关于命名空间的答案让我很快发现了我的错误。

# java - 什么是 java:comp/env？

> ID：11631839
> 
> 赞同：87
> 
> 时间：2012-07-24T13:24:41.773
> 
> 标签：java, jakarta-ee, jndi

什么意思`java:comp/env`？

看起来像什么：

```
Context envContext = (Context)initContext.lookup("java:comp/env"); 
```

做 ？

我知道这样的查找：

```
(DataSource)envContext.lookup("jdbc/MyDatasource") 
```

`MyDatasource`在`context.xml`或中查找名称`web.xml`以获取数据库的 URL。*是这样吗 ？！！*但是前者的查找是做什么的呢？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-24T13:41:57.780

`java:comp/env`是 JNDI 树中的节点，您可以在其中找到当前 Java EE 组件（webapp 或 EJB）的属性。

```
Context envContext = (Context)initContext.lookup("java:comp/env"); 
```

允许定义一个直接指向该节点的变量。它允许做

```
SomeBean s = (SomeBean) envContext.lookup("ejb/someBean");
DataSource ds = (DataSource) envContext.lookup("jdbc/dataSource"); 
```

而不是

```
SomeBean s = (SomeBean) initContext.lookup("java:comp/env/ejb/someBean");
DataSource ds = (DataSource) initContext.lookup("java:comp/env/jdbc/dataSource"); 
```

相对路径而不是绝对路径。这就是它的用途。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-18T03:38:01.963

它是一个内存中的全局哈希表，您可以在其中按名称存储全局变量。

“java:” url 方案使 JNDI 查找一个`javaURLContextFactory`类，该类通常由您的应用程序容器提供，例如[这里是 Tomcat 的实现 javadoc](https://tomcat.apache.org/tomcat-4.0-doc/catalina/docs/api/org/apache/naming/java/javaURLContextFactory.html)

另请参阅[NamingManager.getURLContext](http://docs.oracle.com/javase/6/docs/api/javax/naming/spi/NamingManager.html#getURLContext(java.lang.String,%20java.util.Hashtable))

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-02-23T00:55:23.270

我知道我来晚了，但我问了同样的问题，我想我得到了一些答案。所以，如果我可以把我的两分钱。

`java:comp/env/jdbc/myDataSource`

*   `java:`就像`jdbc:`来自连接字符串一样。充当协议。
*   `comp`是所有 JNDI 上下文的根。
*   `env`是所有相关资源的子上下文。用户还有另一个。看看[这个](https://docs.oracle.com/cd/E19747-01/819-0079/dgjndi.html)。
*   `jdbc`是 jdbc 资源的子上下文。有种类。检查上一个项目符号中的链接。
*   `myDataSource`是您的 jdbc 资源的名称。

# objective-c - NSString 的网格格式

> ID：11631843
> 
> 赞同：0
> 
> 时间：2012-07-24T13:24:48.237
> 
> 标签：objective-c, ios5

我如何将我的 NSString 格式化为类似

```
1  Item1  7.00  0%  7.00
1  Item2  6.00  0%  6.00 
```

我从 html 获取字符串，它是表格格式。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:31:59.780

您可以使用 IEEE printf 标志来指定字段宽度（在 iOS 库文档中）。这意味着如果您将表格单元格的内容作为单独的值或对象，您可以使用 NSString 的`stringWithFormat:`方法创建您的固定空间字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:38:26.083

我想，它解决了你的问题？

```
NSString *str = [NSString stringWithFormat:@"%i \t %@ \t %.2f %%%i %.2f",1,@"Item1",7.00,0,6.00];
NSLog(@"%@", str); 
```

# wordpress - 样式化 RSS 提要？

> ID：11631844
> 
> 赞同：1
> 
> 时间：2012-07-24T13:24:50.420
> 
> 标签：wordpress, wordpress-theming

我正在尝试设置用户将看到的 RSS 提要的样式。因此，他们所看到的只是帖子中的图像、所见即所得编辑器中的文本以及作为主题一部分的按钮。

这是 single.php 模板文件中的按钮：

```
<div class="bottomgift clearfix">
<a target="_blank" rel="nofollow" href="<?php getCustomField('Affiliate Link'); ?>" class="go-button">Go</a>
</div> 
```

如何添加所有这些来设置 RSS 提要的样式？

在 Functions.php 中

```
function modRSS($content) {
   global $post;

   if ( has_post_thumbnail( $post->ID ) ){
      $content = '<div>' . get_the_post_thumbnail( $post->ID, 'full', array( 'style' => 'margin-bottom: 15px;' ) ) . '</div>' . $content;
   }

   $content = $content . '<a href="' . getCustomField('Affiliate Link') . '">Go</a>';

   return $content;
}

add_filter('the_excerpt_rss', 'modRSS');
add_filter('the_content_feed', 'modRSS'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:12:11.647

您可以很容易地为 WordPress RSS 提要添加或修改任何语法。

这里有一些代码可以从这里获取... [http://webdesignzo.com/show-featured-images-in-rss-feed-feedburner/](http://webdesignzo.com/show-featured-images-in-rss-feed-feedburner/)为您的目的做了一些修改。

```
function modRSS($content) {
   global $post;

   if ( has_post_thumbnail( $post->ID ) ){
      $content = '<div>' . get_the_post_thumbnail( $post->ID, 'thumbnail', array( 'style' => 'margin-bottom: 15px;' ) ) . '</div>' . $content;
   }

   $content = $content . '<div class="bottomgift clearfix"><a target="_blank" rel="nofollow" href="' . getCustomField('Affiliate Link') . '" class="go-button">Go</a</div>';

   //Adding Custom Fields
   $content = $content . get_post_meta($post->ID,'custom_field_name', true);

   return $content;
}

add_filter('the_excerpt_rss', 'modRSS');
add_filter('the_content_feed', 'modRSS'); 
```

我的代码**未经测试**，但这样的东西应该是你正在寻找的。

PS这不是你的问题标题所暗示的*每*一个造型，而是更多地添加标记。

# oop - Matlab：将超类转换为子类对象

> ID：11631858
> 
> 赞同：3
> 
> 时间：2012-07-24T13:25:12.383
> 
> 标签：oop, matlab, inheritance, casting

我想为`ess`内置类创建一个子`ss`类。我希望能够将现有`ss`对象转换为`ess`对象，同时添加缺少的属性，例如`w`，通过类似这样的东西

```
sys=ss(a,b,c,d);
esys=ess(sys,w); 
```

但我不知道如何正确设置构造函数。实现这一目标的最佳方法是什么？我的代码目前看起来像这样

```
classdef ess < ss
    properties
        w
    end
    methods
        function obj = ess(varargin)
            if nargin>0 && isa(varargin{1},'StateSpaceModel')
                super_args{1} = sys;
            else
                super_args = varargin;
            end
            obj = obj@ss(super_args{:});
        end
    end 
end 
```

但这不起作用，因为我收到以下错误：

```
 >> ess(ss(a,b,c,d))
 ??? When constructing an instance of class 'ess', the constructor must preserve
 the class of the returned object. 
```

当然，我可以手动复制所有对象属性，但在我看来应该有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:04:01.927

这是我想到的一个例子：

```
classdef ss < handle
    properties
        a
        b
    end

    methods
        function obj = ss(varargin)
            args = {0 0};     %# default values
            if nargin > 0, args = varargin; end
            obj.a = args{1};
            obj.b = args{2};
        end
    end
end 
```

和：

```
classdef ess < ss
    properties
        c
    end

    methods
        function obj = ess(c, varargin)
            args = {};
            if nargin>1 && isa(varargin{1}, 'ss')
                args = getProps(varargin{1});
            end
            obj@ss(args{:});    %# call base-class constructor
            obj.c = c;
        end     
    end
end

%# private function that extracts object properties
function props = getProps(ssObj)
    props{1} = ssObj.a;
    props{2} = ssObj.b;
end 
```

让我们测试这些类：

```
x = ss(1,2);
xx = ess(3,x) 
```

我得到：

```
xx = 
  ess handle

  Properties:
    c: 3
    a: 1
    b: 2
  Methods, Events, Superclasses 
```

# php - “最后一分钟订阅”项目 PHP/MySQL 原子性问题

> ID：11631859
> 
> 赞同：1
> 
> 时间：2012-07-24T13:25:13.367
> 
> 标签：php, mysql, ajax, transactions, atomic

我正在开发一个 AJAX 应用程序。用户单击一个按钮，他的名字将保存到数据库中并显示在 <div> 中，其内容是通过 AJAX 长轮询从数据库中获取的。数据库还包含一个表示过期的时间戳：不得接受超过该时间戳的订阅。用户订阅也有限制。

我有一个由 AJAX 请求调用的 PHP 脚本，该脚本查询数据库并检查是否过期（点击的时间戳由 JavaScript 计算并通过 AJAX 发送）。它还检查用户限制：我在用户和产品（订阅）之间有 N 对 N 的关系。这些任务显然需要时间，我担心可能出现的并发问题。我应该使用数据库事务吗？我可以使用什么技术来确保此操作的原子性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:44:30.523

这取决于完成那些“长期”任务的工作类型。

## 一般信息：

如果您只插入用户驱动的数据和在 PHP 中生成的数据，而没有被读取和/或与从数据库中获取的数据交叉关联，那么事务性应该不是问题。

如果您正在更新数据并将其与数据库中的其他元素进行交叉关联，那么您需要开始使用事务并仔细选择您计划使用的事务的隔离级别。

当并发性增加时，事务会严重影响速度。选择一个非常安全的隔离级别可能比您的应用程序所需的更安全，并且您可能会给 MVCC 添加许多不必要的工作。

此外，将事务用作单独的 PHP api 调用并管理应用程序中的回滚逻辑会增加事务的总体持续时间，因为它会增加 PHP 生成的所有处理延迟。如果您可以将 DB 通信压缩为一次通信中请求的一组查询，那就更好了。

## 案例信息：

让我们考虑这种情况：有 8 个插槽，订阅了 7 个用户。两个用户几乎同时单击订阅按钮。当为最后点击用户启动控制脚本时，可能仍会执行对第一个点击用户订阅的查询。这意味着系统接受两个用户作为有效订阅。

这属于我解释的第二种情况，即您将用户驱动的数据与数据库中的数据进行交叉关联的情况。在提交用户驱动器数据之前，您正在读取数据库的状态，所以是的，在这种情况下您需要事务。

有可能推测一个更新语句的内在原子性。Any`UPDATE table_name SET x = x+1 WHERE a = 'value';`保证是原子的。你可以利用它来发挥你的优势。

所有订阅 PHP 线程必须首先减少订阅者计数。如果减量时受影响的行数不为0，说明减量成功，可以继续提交用户相关数据，否则通知用户0.3ms太慢了。

# php - php。使用将在派生中定义的基类中的方法

> ID：11631860
> 
> 赞同：0
> 
> 时间：2012-07-24T13:25:26.753
> 
> 标签：php, oop, inheritance

在基类中使用将在派生类中定义的方法是一种好习惯吗？例如：

```
abstract class CApplication {
    use TSingleton;

    protected final function singletonInstanceInit() {
        if (php_sapi_name() == 'cli') {
            $this->initCLIApp();
    }
        else {
            $this->initWebApp();
        }
    }
}

abstract class CWebApplication extends CApplication {   
      protected function initWebApp() { }
}

abstract class CCLIApplication extends CApplication {
    protected function initCLIApp() { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:55:28.657

你说的是两种不同的思想流派。我见过 ruby​​ 开发人员做这样的事情，因为他们正在使用 mixins（是的，很多 gem 都这样做）。另一方面，如果你去问一个经典的 Java 程序员，他不会建议你这样做。您刚刚在代码中显示的自由类型是只有动态类型语言才能提供​​给您的（是的，我知道有些人会点头说我使用了 CGLib），它们可以以静态类型语言的骇人听闻的方式实现，或者它们不是完全使用。

长话短说，如果我是你，我会研究场景并决定我是否需要这种**黑魔法**来完成给定的任务？只要不损害代码质量，没有规则是坏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:28:37.630

AFAIK 这不是一个好习惯。

为了定义新的行为和新的特殊类型的对象，需要继承。这意味着您现在*可以*/*应该*编写一个基类并在稍后的某个时间对其进行扩展。

如果基类知道它的派生类的结构，这在某种程度上是一种契约，那么派生类*需要*实现一些功能才能与该基类一起工作，在这种情况下，就会想到“契约式设计”。

如果您需要在派生类中具有某个函数，则可能应将其声明为`abstract`基类中的函数或该类实现的接口中的方法。

这样，基类*知道*派生类中实现的方法并不是不合理的。

此外，AFAIK 其他更严格的语言在编译器级别也不允许这样做。你真的需要做一些重构来实现这一点，`c++`或者`Java`按照我上面所说的使用基类或接口中的抽象函数来实现这一点。

# javascript - 格式不正确的 json/javascript

> ID：11631866
> 
> 赞同：-1
> 
> 时间：2012-07-24T13:25:48.747
> 
> 标签：javascript, json

在此站点上工作时，我遇到了一个格式不正确的错误，希望能得到一些帮助。这是我正在使用的 json 文件。它很长，但我在第一行代码中遇到了错误（“product”：{“）。我昨天发布了这个，但人们要求我提供我正在使用的整个代码。

```
{
 "product": {
        "@attributes": {
            "name": "Special Ops",
            "price": "29.9900",
            "currency": "$"
        },
        "views": {
            "@attributes": {
                "total": "2",
                "etchingMaxChars": "20",
                "defaultEtchingText": "",
                "defaultLoad": "null,lenses|858388,frames|FFFFFF,left_clip|FFFFFF,right_clip|FFFFFF,left_gas|FFFFFF,right_gas|FFFFFF,adjuster|FFFFFF,strap|FFFFFF,null"
            },
            "viewcontainer": [
                {
                    "@attributes": {
                        "name": "angledRight",
                        "type": "web/desktop",
                        "baseURLPath": "file:///C:/Users/.../goggles/specops_custom/VIEW_1_600X393",
                        "width": "600",
                        "height": "393",
                        "zoomFactor": "1.47"
                    },
                    "info": {
                        "@attributes": {
                            "txt": "About Special Ops Text goes here about the goggles."
                        }
                    },
                    "view": [
                        {
                            "@attributes": {
                                "inventoryAvail": "",
                                "prices": "5.0000",
                                "leftNav": "true",
                                "displayOrder": "3",
                                "group": "",
                                "layer": "laserEtching",
                                "dispName": "Laser Etching",
                                "options": "",
                                "maxCharacters": "20",
                                "fonts": "InterstateRegular",
                                "xPos": "0px",
                                "yPos": "-8px",
                                "svgPath": "M241.98,341.199c33.033,21.092,69.746,1.989,78.103-15.621",
                                "profanityFilterWords": ""
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "324.0000,370.0000,370.0000,366.0000,377.0000,360.0000,365.0000,321.0000",
                                "prices": "0,0,0,5,5,5,5,5",
                                "leftNav": "true",
                                "displayOrder": "2",
                                "group": "",
                                "layer": "lenses",
                                "dispName": "Polarized Lens",
                                "options": "Smoke,Clear,Blue,Amber|Purple|Mirror,Blue|Silver|Mirror,Smoke|Silver|Mirror,Red|Magenta|Mirror,Smoke|Red|Mirror",
                                "fullAssetURL": "/lenses/",
                                "id": "",
                                "colorHEX": "858388,B6ADB6,007DFA,6A4A7D,7B93AA,9E9193,DE0447,5E3343"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "339.0000,354.0000,337.0000,361.0000,370.0000,335.0000,368.0000,369.0000,392.0000,328.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "1",
                                "group": "",
                                "layer": "frames",
                                "dispName": "Frame",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/frames/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "350.0000,352.0000,348.0000,372.0000,376.0000,334.0000,364.0000,317.0000,392.0000,348.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "4",
                                "group": "",
                                "layer": "left_clip",
                                "dispName": "Left Frame Lock",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Black,Clear|,Yellow",
                                "fullAssetURL": "/left_clip/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,000000,CFCFCF,F2D600"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "352.0000,362.0000,348.0000,371.0000,376.0000,343.0000,352.0000,341.0000,390.0000,318.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "5",
                                "group": "",
                                "layer": "right_clip",
                                "dispName": "Right Frame Lock",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/right_clip/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "363.0000,356.0000,341.0000,377.0000,371.0000,348.0000,355.0000,370.0000,391.0000,281.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "6",
                                "group": "",
                                "layer": "left_gas",
                                "dispName": "Left Gasket",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/left_gas/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "365.0000,361.0000,340.0000,374.0000,379.0000,351.0000,356.0000,355.0000,390.0000,282.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "7",
                                "group": "",
                                "layer": "right_gas",
                                "dispName": "Right Gasket",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/right_gas/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "307.0000,316.0000,308.0000,337.0000,350.0000,281.0000,332.0000,298.0000,362.0000,234.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "9",
                                "group": "",
                                "layer": "adjuster",
                                "dispName": "Strap Adjuster",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/adjuster/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "366.0000,345.0000,344.0000,356.0000,378.0000,352.0000,368.0000,375.0000,382.0000,287.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "8",
                                "group": "",
                                "layer": "strap",
                                "dispName": "Strap",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/strap/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "",
                                "prices": "",
                                "leftNav": "false",
                                "displayOrder": "",
                                "group": "",
                                "layer": "background",
                                "dispName": "",
                                "options": "background",
                                "id": "",
                                "colorHEX": ""
                            }
                        }
                    ]
                },
                {
                    "@attributes": {
                        "name": "front",
                        "type": "web/desktop",
                        "baseURLPath": "file:///C:/Users/.../goggles/specops_custom/VIEW_2_650x252",
                        "width": "650",
                        "height": "252",
                        "zoomFactor": "1.37"
                    },
                    "info": {
                        "@attributes": {
                            "txt": "About Special Ops. More text about special ops"
                        }
                    },
                    "view": [
                        {
                            "@attributes": {
                                "inventoryAvail": "",
                                "prices": "5.0000",
                                "leftNav": "true",
                                "displayOrder": "3",
                                "group": "",
                                "layer": "laserEtching",
                                "dispName": "Laser Etching",
                                "options": "",
                                "maxCharacters": "20",
                                "fonts": "InterstateRegular",
                                "xPos": "-15px",
                                "yPos": "-58px",
                                "svgPath": "M467.503,168.446c18.426-3.05,49.64-19.418,43.423-58.752",
                                "profanityFilterWords": ""
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "324.0000,370.0000,370.0000,366.0000,377.0000,360.0000,365.0000,321.0000",
                                "prices": "0,0,0,5,5,5,5,5",
                                "leftNav": "true",
                                "displayOrder": "2",
                                "group": "",
                                "layer": "lenses",
                                "dispName": "Polarized Lens",
                                "options": "Smoke,Clear,Blue,Amber|Purple|Mirror,Blue|Silver|Mirror,Smoke|Silver|Mirror,Red|Magenta|Mirror,Smoke|Red|Mirror",
                                "fullAssetURL": "/lenses/",
                                "id": "",
                                "colorHEX": "858388,B6ADB6,007DFA,6A4A7D,7B93AA,9E9193,DE0447,5E3343"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "339.0000,354.0000,337.0000,361.0000,370.0000,335.0000,368.0000,369.0000,392.0000,328.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "1",
                                "group": "",
                                "layer": "frames",
                                "dispName": "Frame",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/frames/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "350.0000,352.0000,348.0000,372.0000,376.0000,334.0000,364.0000,317.0000,392.0000,348.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "4",
                                "group": "",
                                "layer": "left_clip",
                                "dispName": "Left Frame Lock",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Black,Clear|,Yellow",
                                "fullAssetURL": "/left_clip/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,000000,CFCFCF,F2D600"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "352.0000,362.0000,348.0000,371.0000,376.0000,343.0000,352.0000,341.0000,390.0000,318.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "5",
                                "group": "",
                                "layer": "right_clip",
                                "dispName": "Right Frame Lock",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/right_clip/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "363.0000,356.0000,341.0000,377.0000,371.0000,348.0000,355.0000,370.0000,391.0000,281.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "6",
                                "group": "",
                                "layer": "left_gas",
                                "dispName": "Left Gasket",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/left_gas/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "365.0000,361.0000,340.0000,374.0000,379.0000,351.0000,356.0000,355.0000,390.0000,282.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "7",
                                "group": "",
                                "layer": "right_gas",
                                "dispName": "Right Gasket",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/right_gas/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "307.0000,316.0000,308.0000,337.0000,350.0000,281.0000,332.0000,298.0000,362.0000,234.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "9",
                                "group": "",
                                "layer": "adjuster",
                                "dispName": "Strap Adjuster",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/adjuster/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "366.0000,345.0000,344.0000,356.0000,378.0000,352.0000,368.0000,375.0000,382.0000,287.0000",
                                "prices": "0,0,0,0,0,0,0,0,0,0",
                                "leftNav": "true",
                                "displayOrder": "8",
                                "group": "",
                                "layer": "strap",
                                "dispName": "Strap",
                                "options": "White,Green,Blue,Purple,Magenta,Red,Orange,Yellow,Clear|,Black",
                                "fullAssetURL": "/strap/",
                                "id": "",
                                "colorHEX": "FFFFFF,43DC1A,007DFA,4A0999,FF0066,FF0000,FF8400,F2D600,CFCFCF,000000"
                            }
                        },
                        {
                            "@attributes": {
                                "inventoryAvail": "",
                                "prices": "",
                                "leftNav": "false",
                                "displayOrder": "",
                                "group": "",
                                "layer": "background",
                                "dispName": "",
                                "options": "background",
                                "id": "",
                                "colorHEX": ""
                            }
                        }
                    ]
                }
            ]
        }
    }
} 
```

然后这就是我使用 js 调用它的方式。

```
$j.getJSON(
            "file:///C:/Users/.../specops.js",{},

            function (d) {
                $j.extend(tdata, d);
            }
        ); 
```

我对使用 json 等进行广泛的工作还很陌生，所以我确定我做错了什么。任何想法和帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:29:54.363

听起来你在 JSON 中的最后一个对象后面可能有一个逗号

```
var test = {
                "product": {
                    "@attributes": {
                        "name": "Special Ops",
                        "price": "29.9900",
                        "currency": "$"
                    },
                    "views": {
                        "@attributes": {
                            "total": "2",
                            "etchingMaxChars": "20",
                            "defaultEtchingText": "",
                            "defaultLoad": "null,lenses|858388,frames|FFFFFF,left_clip|FFFFFF,right_clip|FFFFFF,left_gas|FFFFFF,right_gas|FFFFFF,adjuster|FFFFFF,strap|FFFFFF,null"
                        }
                    }
                }
            }; 
```

我试过了，效果很好。在“查看”之后：{} 如果有逗号，我收到了您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:55:45.043

我刚刚在本地对此进行了测试，并且收到了`Origin null is not allowed by Access-Control-Allow-Origin`. 问题是您不能使用 AJAX 通过`file`协议访问文件。将您的 JSON 文件、脚本和 HTML 托管在 IIS 或 Apache 等 Web 服务器上，然后再试一次，看看是否遇到同样的错误。

# c# - c#中的指尖检测

> ID：11631868
> 
> 赞同：5
> 
> 时间：2012-07-24T13:25:59.780
> 
> 标签：c#, winforms, image-processing, computer-vision, aforge

我只是想知道如何检测手势的指尖。

我正在使用这个手指数来进行手指拼写。更具体地说，我正在使用[AFORGE.NET](http://www.aforgenet.com/)开发 C#，并希望对其使用凸包算法。我能找到的一切都在`OPENCV`平台上完成。

请提出一种在 C# 中查找指尖计数的方法，如果可能的话，不要使用`OPENCV`平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:33:17.517

使用[Kinect](https://stackoverflow.com/tags/kinect/info)，您可以使用CSAIL 的[这个 hack](http://www.csail.mit.edu/node/1392)来使用[OpenKinect](http://openkinect.org/wiki/Main_Page)或[Kinect for Windows SDK](http://kinectforwindows.org)。

# logging - 记录哪些 IP 访问了 WAMP 内网页面？

> ID：11631871
> 
> 赞同：0
> 
> 时间：2012-07-24T13:26:04.853
> 
> 标签：logging, wamp, intranet

我在我们的 Intranet (WAMP) 上有几份报告，并被要求查看哪些经理使用这些报告。

我可以相当容易地查找他们的 IP 地址，但需要知道记录谁访问了每个页面以及他们访问了哪个页面的最佳方式。

我知道您可以使用 access.log 查看谁访问了服务器托管的任何页面的概述，但是是否可以为特定页面创建特定日志？

任何指针都有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:14:33.990

我最终设法解决了问题，这就是方法。

在 httpd.conf 中，我添加了一种新的日志格式，它向我展示了我需要知道的各个位

```
LogFormat "%h %t \"%{Referer}i\" \"%r\"" simple 
```

然后我创建了一个变量，这样如果有人访问该特定页面集，它就会获取该变量，并且我可以独立于其余流量记录该特定网页的流量。

```
SetEnvIf Referer http://intranet-srv02/reports/hourly/ intranet_report 
```

最后，我使用我创建的日志格式和变量创建了第二个日志

```
CustomLog "logs/reportlog.log" simple env=intranet_report 
```

然后，这为我提供了访问这些报告的内部 IP 的日志，然后我可以使用命令提示符命令 nbtstat -a ip.ip.ip.ip 来查找主机名，然后在我们的主机上查找哪个用户登录日志。

# apache - 301重定向特殊字符问题

> ID：11631873
> 
> 赞同：0
> 
> 时间：2012-07-24T13:26:08.280
> 
> 标签：apache, .htaccess, url-redirection

带有 , 等特殊字符的 URL`é`不能`ü`正确重定向。

例如 ：`Redirect 301 /de/pages/schuhe_mit_schmaler_füßbreite http://www.mydomain.com/de/schuhe-für-schmale-füße/l/`

我已经尝试使用[此堆栈帖子](https://stackoverflow.com/questions/9002623/redirection-rules-with-special-characters)中的建议，但它对我不起作用。

工作规则： `Redirect 301 /de/pages/duo_latest http://www.mydomain.com/de/entdecken-sie-duo/neues/`

不工作规则： `Redirect 301 /fr/pages/duo_latest http://www.mydomain.com/fr/découvrez-duo/nouvelles/`

无效规则包含特殊字符`é`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:02:45.953

确保您用来保存到 .htaccess 文件的文本编辑器支持[UTF-8 编码](http://en.wikipedia.org/wiki/UTF-8)。如果您使用的是记事本，请配置设置使其不保存为 ANSI。

如果您无法将其保存为 UTF-8，请创建一个以 UTF-8 保存的全新 .htaccess 文件，并将旧文件替换为新文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:33:32.293

这可能很好

```
 RewriteRule ^türen/(.*) http://google.de?$1 [L] 
```

你有什么问题？你能发布更多细节吗

# android - 带有列表视图的 Android 网上商店应用

> ID：11631883
> 
> 赞同：1
> 
> 时间：2012-07-24T13:26:32.493
> 
> 标签：android, web

我想知道如何使用从互联网加载的项目创建应用程序，如**e-bay或列表视图。**

我是否需要创建`php script`返回 xml，然后解析并显示在列表中。

还是用 Json 制作？或者还有其他方法吗？

什么是流行和最好的方法？

# java - Google App Engine Java - javax.servlet 源文件

> ID：11631885
> 
> 赞同：0
> 
> 时间：2012-07-24T13:26:38.373
> 
> 标签：java, google-app-engine

使用 Eclipse (juno) 和 GAE 插件，我编译并运行了“留言簿”示例 (https://developers.google.com/appengine/docs/java/gettingstarted/creating)，没有任何问题。示例的两个类都扩展了 javax.servlet.http 包的“HttpServlet”类。

我想看看这个类和包的另一个类（和超级包）的源代码（和 javadoc），但我不知道它们在哪里。

它们不在 Program Files\eclipse-jee-juno-win32\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.7.0\appengine-java-sdk-1.7.0\src 中（我已经尝试了所有里面的文件）

二进制文件应位于 Program Files\eclipse-jee-juno-win32\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.7.0\appengine-java-sdk-1.7.0\lib\ 的 servlet-api.jar 中共享

我用谷歌搜索了很多都没有成功。有人知道在哪里可以找到 javax.servlet 包的来源吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T17:59:10.537

类的源代码`javax`包含在 Java EE 发行版中，而不是 App Engine SDK 中。如果找不到本地 Java EE 发行版，可以尝试在[此处](http://svn.apache.org/viewvc/geronimo/specs/trunk/geronimo-servlet_2.5_spec/src/main/java/)下载源代码，并从 Eclipse 中引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-27T07:12:23.160

项目属性 -> 配置构建路径 -> 库 -> App Engine SDK 的下拉箭头 -> servlet-api.jar 的下拉箭头 -> 点击 javadoc 位置 -> 点击编辑 -> 输入 javadoc URL：[http://docs .oracle.com/javaee/6/api/](http://docs.oracle.com/javaee/6/api/)

# vba - 在 MS Word 中计算未来日期

> ID：11631893
> 
> 赞同：1
> 
> 时间：2012-07-24T13:26:57.057
> 
> 标签：vba, date, ms-word

我正在尝试使用 MS-Word 表单字段计算未来日期。我从[http://word.tips.net/T001476_Calculating_a_Future_Date.html](http://word.tips.net/T001476_Calculating_a_Future_Date.html)中提取了这段代码，并试图让它对我有用。它抛出一个错误，指出“需要对象”。代码在宏中，当退出 frmApprovalDate 字段时调用宏。

```
Dim approvalDate As Date
approvalDate = frmApprovalDate.Text
frmExpirationDate.Text = DateAdd("yyyy", 1, approvalDate) 
```

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:48:39.340

这是你正在尝试的吗？

```
Dim approvalDate As Date

approvalDate = ActiveDocument.FormFields("frmApprovalDate").Range.Text

ActiveDocument.FormFields("frmExpirationDate").Result = _
DateAdd("yyyy", 1, approvalDate) 
```

# vb6 - 在vb6中列出所有连接到局域网的计算机的IP地址

> ID：11631896
> 
> 赞同：1
> 
> 时间：2012-07-24T13:27:04.927
> 
> 标签：vb6, ip-address, lan

我想将所有连接 LAN 的 IP 地址列出到 VB6 的列表框中。我参观过[这个](https://stackoverflow.com/questions/1993891/list-the-ip-address-of-all-computers-connected-to-a-single-lan)。但我想在 VB6 中做到这一点。我不知道该怎么做。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:14:46.313

纯粹为了获取本地 IP 地址而使用 WinSock 控件 (wsck)，请使用以下代码：

```
Option Explicit

Private Type IPAddr
    s_b1    As Byte
    s_b2    As Byte
    s_b3    As Byte
    s_b4    As Byte
End Type

Private Type IPAddrCompat
    ul      As Long
End Type

Private Type MacAddress
    s_b1    As Byte
    s_b2    As Byte
    s_b3    As Byte
    s_b4    As Byte
    s_b5    As Byte
    s_b6    As Byte
    unused  As Integer
End Type

Private Declare Function SendARP Lib "Iphlpapi.dll" ( _
    ByVal DestIP As Long, _
    ByVal SrcIP As Long, _
    ByRef pMacAddr As MacAddress, _
    ByRef PhyAddrLen As Long _
) As Long

Private Sub cmdGetIPs_Click()

    Dim nIndex As Long

    Dim vasLocalIP          As Variant
    Dim uIPAddr             As IPAddr
    Dim uIPAddrCompat       As IPAddrCompat
    Dim uMacAddr            As MacAddress
    Dim nMacAddrLen         As Long

    vasLocalIP = Split(wsck.LocalIP, ".")
    uIPAddr.s_b1 = CByte(vasLocalIP(0))
    uIPAddr.s_b2 = CByte(vasLocalIP(1))
    uIPAddr.s_b3 = CByte(vasLocalIP(2))

    ' Iterate through all valid addresses in the final quartet.
    For nIndex = 1 To 254
        uIPAddr.s_b4 = CByte(nIndex)
        LSet uIPAddrCompat = uIPAddr ' Convert 4 bytes into 1 long.
        nMacAddrLen = 8 ' Indicate that we are allocating a buffer with 8 bytes.

        ' Try to find the MAC address for this IP.
        If SendARP(uIPAddrCompat.ul, 0&, uMacAddr, nMacAddrLen) = 0 Then
            ' MAC addresses are 6 bytes long.
            If nMacAddrLen = 6 Then
                vasLocalIP(3) = CStr(nIndex)
                Debug.Print Join(vasLocalIP, "."), MacAddrString(uMacAddr, nMacAddrLen)
            End If
        End If
    Next nIndex

End Sub

' Returns the MAC address as a six byte hex string.
Private Function MacAddrString(ByRef the_uMacAddr As MacAddress, ByVal the_nMacAddrLen) As String

    With the_uMacAddr
        MacAddrString = Hex2(.s_b1) & ":" & Hex2(.s_b2) & ":" & Hex2(.s_b3) & ":" & Hex2(.s_b4) & ":" & Hex2(.s_b5) & ":" & Hex2(.s_b6)
    End With

End Function

' Returns the byte as a two digit hex string.
Private Function Hex2(ByVal the_byt As Byte) As String

    Hex2 = Hex$(the_byt)
    If Len(Hex2) = 1 Then
        Hex2 = "0" & Hex2
    End If

End Function 
```

# wpf - ToggleButton 重新设计，找不到属性“IsChecked”

> ID：11631897
> 
> 赞同：0
> 
> 时间：2012-07-24T13:27:08.210
> 
> 标签：wpf, templates, styles, togglebutton

我想重新设计我的 ToggleButton。我在 xaml 中创建了 ToggleButton：

```
<ToggleButton Width="15" Grid.Column="2" /> 
```

并在资源中有 ToggleButton 样式：

```
<Style TargetType="ToggleButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Path Name="Arrow" Fill="Black" HorizontalAlignment="Center" VerticalAlignment="Center" Data="M 0 0 L 4 4 L 8 0 Z" />   
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="true">
                        <Setter TargetName="Arrow" Property="Data" Value="M 0 4 L 4 0 L 8 4 Z" />
                    </Trigger>
                </ControlTemplate.Triggers>                     
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

当我尝试构建时，我遇到了这个错误：

> 在“System.Windows.Controls.Control”类型上找不到模板属性“IsChecked”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:30:07.527

也给`ControlTemplate`_`TargetType`

```
<ControlTemplate TargetType="ToggleButton"> 
```

# .net - 初始化结构图

> ID：11631898
> 
> 赞同：1
> 
> 时间：2012-07-24T13:27:16.550
> 
> 标签：.net, asp.net-mvc, controller, structuremap

我遇到了控制器无参数构造函数的问题，为了解决它，我将使用 StructureMap

我添加了这个类

```
public class StructureMapControllerFactory : DefaultControllerFactory
{
    public override IController CreateController(RequestContext requestContext, string controllerName)
    {
        try
        {
            string key = controllerName.ToLowerInvariant();
            return ObjectFactory.GetNamedInstance<IController>(key);
        }
        catch (StructureMapException ex)
        {
            //Use the default logic.
            return base.CreateController(requestContext, controllerName);
        }
    }
} 
```

我补充说

```
ControllerBuilder.Current.SetControllerFactory(new StructureMapControllerFactory()); 
```

到 Global.asax.cs 的 Application_Start()

但我有错误，可能是因为我没有初始化 StructureMap 如何正确初始化它以仅使用 ControllerFactory？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:21:58.720

您需要在某处注册您的依赖项。有几种方法可以做到这一点，您可以在结构图文档中阅读。

还有一个名为 StructureMap.MVC3 的 NuGet 包，根据项目站点，它可以让所有东西开箱即用。我自己没有测试过。

这是一个带有一个控制器的网站的简单示例

控制器

```
public class MyController : Controller
{
    private readonly IRepository repository;

    public MyController(IRepository repository)
    {
        this.repository = repository;
    }

    public ActionResult Index()
    {
        ViewBag.Message = repository.GetData();

        return View();
    }
} 
```

全球.asax

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    ObjectFactory.Initialize(a => a.For<IRepository>().Use<Repository>());
    ControllerBuilder.Current.SetControllerFactory(new MyControllerFactory());

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);
} 
```

在我的控制器工厂

```
protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
{
    return (Controller)ObjectFactory.GetInstance(controllerType);
} 
```

[配置结构图](http://docs.structuremap.net/ConfiguringStructureMap.htm)

[结构图.MVC3](https://github.com/webadvanced/Structuremap-MVC3)

# powershell - powershell/sqlplus 错误 SP2-0042：未知命令“■@” - 忽略行的其余部分

> ID：11631901
> 
> 赞同：2
> 
> 时间：2012-07-24T13:27:18.940
> 
> 标签：powershell, sqlplus

我在powershell中运行这个命令：

```
sqlplus system/passwd@mydb  @my_sql 
```

我已经尝试过使用和不使用反引号以及通过 Google 找到的各种其他版本。当命令传递给 sqlplus 并且无法成功找到修复程序时，我不断收到错误消息。希望这里有人可以帮忙？

我得到的错误是：

```
Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
With the Partitioning, OLAP, Data Mining and Real Application Testing options

SP2-0042: unknown command " ■@" - rest of line ignored. 
```

所以我成功地连接到数据库，但是在'@'前面有一个额外的字符被传递给 sqlplus。notepad++ 中的“■@”看起来像“¦@”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-04-15T21:38:43.530

如果您在 powershell 中使用重定向（> 或 >>）创建了 SQL 命令文件，例如：

**myProgram > mySQL.out**
然后像这样运行它：
**&sqlplus mypw/myuser@mydb.xyz.com "@mySQL.out"**

Powershell 可能将输出文件保存为 UTF-16 格式，Sqlplus 不喜欢这种格式。（您可以通过手动创建完全相同的文件然后进行比较来确认 - 字节数将关闭，并且在 KDiff 中您将收到消息，表明文本相等，但文件不是二进制相等的）。

要修复 - 你需要做两件事：

1.  在 SQL 命令的顶部添加一些空白行 - Powershell 仍会在其中写入 BOM（字节顺序标记），看起来很难避免这种情况 - 但 sqlplus 会通过它，尽管会给出错误- 但会继续你的代码的其余部分。
2.  然后在创建文件之前在 powershell 中运行此命令：**$PSDefaultParameterValues['Out-File:Encoding'] = 'utf8'** 

请参阅[将 PowerShell 的默认输出编码更改为 UTF-8](https://stackoverflow.com/questions/40098771/changing-powershells-default-output-encoding-to-utf-8)

我收到此错误：
SP2-0042：未知命令“■S”- 忽略行的其余部分。
这解决了这个问题 - 或者至少我能够运行它。您也可以使用 Notepad++ 将其从一个窗口剪切并粘贴到另一个窗口，这将解决 BOM 和编码问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:29:32.820

更新问题已解决。原来这是“穿过森林看不到树木”。我已经使用这些 sql 脚本几年了，没有从 bash 脚本调用的问题。当我尝试将 bash 脚本转换为 powershell 并遇到问题时，我将其归咎于 powershell。然而; 事实证明，sql文件本身有一些损坏。在 notepad++ 中查看文件时，即使单击显示所有符号并且它是 ANSI 格式，也没有明显的错误。当我从 cmd 窗口手动运行 sqlplus 时，我确定它是 sql 文件本身，但我仍然遇到与 powershell 相同的错误。我重写了脚本并保存了它，问题得到了解决。我应该在第一天手动运行脚本，我可能会早点解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-25T09:20:00.097

我有同样的问题。我的问题是由于脚本文件保存为 unicode 引起的。我不知道这是否对您有帮助，但这是我修复它的方法：

用记事本编辑脚本。单击文件 -> 另存为。将类型从 Unicode（或其他）更改为 ANSI，然后保存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T08:59:08.813

我有典型的问题。消息是：未知命令“和” - 忽略行的其余部分。原因是代码中有一个空字符串。例如 select ... from ... where ... [empty string] and ... < 这是一条错误消息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T22:40:06.503

几个建议

尝试调用运算符：

```
&sqlplus system/passwd@mydb @my_sql 
```

尝试启动过程：

```
start-process -NoNewWindow -FilePath sqlplus -ArgumentList @"
system/passwd@mydb @my_sql
"@ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-15T09:12:46.527

使用如下

```
sqlplus -s system/passwd@mydb  "@my_sql"; 
```

# c++ - C++11`using`关键字：专门模板参数的模板别名

> ID：11631919
> 
> 赞同：14
> 
> 时间：2012-07-24T13:28:21.627
> 
> 标签：c++, templates, c++11, using-directives

我今天在使用`using`关键字 in 时遇到了问题`C++11`。我决定现在使用另一种方法（在下面的示例中添加为注释）。您可以将其`X`视为一个矩阵，`Y`或者一个 mixin，其目的是访问 in 的转置矩阵`X`类型`Y`。代替`typedef`ing `X<B,A>`in `X<A,B>`，我们采用另一种更强大的方法并定义一个`Sibling`别名，该别名本身带有两个模板参数。

```
template <class A, class B>
struct X
{
  using Left = A;
  using Right = B;
  template <class T1, class T2>
  using Sibling = X<T1, T2>;
  // using Reversed = X<B, A>; // What I really want and use now. :-)
};

template <class A>
struct Y
{
  using Left = typename A::Left;
  using Right = typename A::Right;
  using AReverse = typename A::Sibling<Right, Left>; // Gives a compiler error
  // using AReverse2 = typename A::Reversed; // Works, of course.
};

using Z = X<int,double>::Sibling<double,int>; // Works 
```

我尝试编译上面的代码，`g++-4.7 -std=c++11 -c`它向我显示以下错误消息：

```
t.cpp:16:9: error: expected nested-name-specifier before ‘AReverse’
t.cpp:16:9: error: using-declaration for non-member at class scope
t.cpp:16:18: error: expected ‘;’ before ‘=’ token
t.cpp:16:18: error: expected unqualified-id before ‘=’ token 
```

我完全不明白为什么会收到错误消息或如何修复它。有人可以向我解释问题是什么吗？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T13:43:02.033

您需要删除`typename`并`::template`改用：

```
using AReverse = A::template Sibling<Right, Left>; 
```

`::`在这种情况下 ( )右侧的标识符`Sibling`不是类型，而是模板，这就是为什么需要这个消歧器而不是`typename`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-14T06:56:37.847

这是 Clang 所说的：

```
<stdin>:16:32: error: use 'template' keyword to treat 'Sibling' as a dependent template name
  using AReverse = typename A::Sibling<Right, Left>; // Gives a compiler error
                               ^
                               template 
```

# javascript - Google Map jQuery - 通过鼠标点击获取 LatLng

> ID：11631922
> 
> 赞同：6
> 
> 时间：2012-07-24T13:28:32.067
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我目前正在将 Google Maps v3 API 与[他们的 jQuery 客户端](http://code.google.com/p/jquery-ui-map)一起使用。我正在尝试通过在地图上单击鼠标来获取纬度和经度，将它们连接到一个字符串并将该字符串添加到页面上的输入字段中。作为 jQuery 的新手，我完全迷路了。谁能指出我正确的方向？我在我的页面上初始化谷歌地图的代码如下：

```
$(document).ready(function() { 
    var yourStartLatLng = new google.maps.LatLng(53.307697, -6.222317);
    $('#map-canvas').gmap({'center': yourStartLatLng, zoom: 15});
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T14:28:12.573

```
$(document).ready(function() {
    var yourStartLatLng = new google.maps.LatLng(53.307697, -6.222317);
    $('#map_canvas').gmap({'center': yourStartLatLng, zoom: 15})
    .bind('init', function(event, map) { 
        $(map).click( function(event) {
            var lat=event.latLng.lat();
            var lng=event.latLng.lng();
            $('#latlng').val(lat+', '+lng); // 'latlng' is the id of the input
        });
    });
}); 
```

[**演示。**](http://jsfiddle.net/heera/X5r8r/515/)

# paypal - Paypal IPN 处理多个自定义变量

> ID：11631926
> 
> 赞同：11
> 
> 时间：2012-07-24T13:28:41.817
> 
> 标签：paypal, paypal-ipn

所以我已经在我的网站中实施了贝宝 IPN，我正处于工作过程的中间。现在我想在 pp 表单中使用超过 1 个自定义变量，目前我只使用这个

```
<input type="hidden" name="custom" value="<?php echo $user_id; ?>"> 
```

所以我知道名称为“自定义”的变量是允许的。我想知道我是否可以传递更多变量，以便根据他们的标准过滤付款。因此，例如，如果运费超过 0.00 美元，我将设置一个变量“shipping_cost”，如下所示：

```
<input type="hidden" name="shipping_cost" value="<?php echo $cost; ?>"> 
```

或用于其他目的。这是允许的吗？或者贝宝已经定义了我们可以使用的允许变量列表？我真的很想解决这个问题，因为我们可以处理的付款方式并不总是一种......谢谢你们。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-08-22T06:18:01.377

这样你可以传递更多的参数

```
<input type="hidden" name="custom" value="variable1=234&var2=summa&etc=xyz"/> 
```

在您的贝宝表格上使用上述一个。

并通过以下代码进行处理。

```
 parse_str($_POST['custom'],$_MYVAR);

echo $_MYVAR['variable1'];
echo $_MYVAR['var2'];
echo $_MYVAR['etc']; 
```

我希望这个对你有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T01:52:22.260

当我（以及我想象的许多其他人）也面临这个问题时，我想我会分享一些我遇到的解决方案。

[这个](https://www.paypal-community.com/t5/How-to-use-PayPal-Archive/how-to-send-mulitple-custom-parameters/m-p/45712#M28932)在 PayPal 社区提出的建议使用选项变量，它似乎提供了一个键/值对实现来促进多达 99 个变量（据记录，我实际上没有尝试过）。

最普遍接受的解决方案（我也赞成）是将您的所有数据添加到数据库记录中，然后使用自定义 var 来存储您的记录 ID，这显然可以在以后使用（例如通过 IPN）来检索您的数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T17:10:55.930

PayPal 定义了您可以[在此处](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)使用的字段。任何其他字段都将被忽略。

定义了一个“运费”字段，PayPal 将使用该字段的值来收取额外的运费。您还可以从 IPN 或 PDT 数据中获取该值。

如果您需要传递其他值，您可以考虑在“自定义”字段中传递以查询字符串样式 (var1=value1&var2=value2...) 格式的字符串。请注意，此字段中允许的最大字符数为 256。然后，您将在收到 IPN 或 PDT 响应时对其进行解析。

如果自定义字段的大小太有限，那么您可以尝试我在[此处的另一个答案](https://stackoverflow.com/a/11679419/1342180)中描述的内容。

# android - 使用 OAuth2 对应用*和*网站进行身份验证

> ID：11631928
> 
> 赞同：66
> 
> 时间：2012-07-24T13:28:46.340
> 
> 标签：android, oauth, oauth-2.0, google-authentication

我正在开发一个主要通过应用程序访问的网站，并且我想使用 OAuth2 进行用户注册和身份验证。由于它是一个 Android 应用程序，我将开始使用 Google 的 OAuth2 东西，因为它在 Android 上提供了不错的 UI。

谷歌声明[“你可以选择使用谷歌的身份验证系统来为你的应用程序外包用户身份验证。这可以消除创建、维护和保护用户名和密码存储的需要。”](https://developers.google.com/accounts/docs/OAuth2Login) 这就是我想要做的。*但是*，当我浏览他们的所有示例等等时，我只能找到有关让网站*或*应用程序根据 Google 的服务对用户进行身份验证的内容。

事实上，当我使用 Google 的 OAuth2 注册我的应用程序（“客户端”）时，可以选择网站客户端和“已安装”客户端（即移动应用程序），但不能同时使用两者。我可以创建两个单独的客户端，但我阅读了 OAuth2 草案，我认为会有一个问题，我现在将对此进行解释。

以下是我设想它的工作方式：

![OAuth2流程图](../Images/c015e5640927023bbbb28eaa1514ccb5.png)

1.  用户要求 MyApp 访问他的私人数据。
2.  应用程序使用 Android 的`AccountManager`类来为 Google 的 API 请求访问令牌。
3.  Android 对用户说“应用程序‘MyApp’想要访问您在 Google 上的基本信息。可以吗？”
4.  用户说是。
5.  `AccountManager`使用存储在手机上的凭据连接到 Google 的 OAuth2 服务器，并要求提供访问令牌。
6.  返回访问令牌（跟随绿线）。
7.  `AccountManager`将访问令牌返回给 MyApp。
8.  MyApp 向 MySite 发送请求以获取用户的私有数据，包括访问令牌。
9.  MySite 需要使用访问令牌验证用户。它使用 Google 验证[此处描述](https://developers.google.com/accounts/docs/OAuth2Login#validatingtoken)的令牌- “Google，此令牌有效吗？”。
10.  现在，我*想要*发生的是谷歌说“是的，给你的人确实是那个用户。”，但我认为实际会发生的事情（基于 OAuth2 草案和谷歌的文档）是它会说“不方式！该令牌仅对 MyApp 有效，而您是 MySite。GTFO！”。

那么我该怎么做呢？请不要说“使用 OpenID”或“不要使用 OAuth2”或其他类似无益的答案。哦，我真的很想继续使用漂亮的`AccountManager`UI 而不是蹩脚`WebView`的popup

# 编辑

来自 Nikolay 的临时答案（如果它有效，我会报告！）是它应该真正有效，而且 Google 的服务器不会关心访问令牌来自哪里。对我来说似乎有点不安全，但我会看看它是否有效！

# 更新

我用 Facebook 而不是 Google 实现了这个模式，它完全有效。OAuth2 服务器不关心访问令牌的来源。至少 Facebook 没有，所以我认为 Google 也没有。

鉴于此，存储访问令牌是一个非常非常糟糕的主意！但是我们也不想访问 Facebook/Google 的服务器来检查*每个*请求的身份验证，因为它会减慢一切。最好的办法可能是为您的站点添加一个额外的身份验证 cookie，在验证访问令牌时分发该 cookie，但更简单的方法是将访问令牌视为密码并存储它的哈希值。你也不需要加盐，因为访问令牌真的很长。所以上面的步骤变成了这样：

9\. MySite 需要使用访问令牌验证用户。首先，它检查其哈希有效访问令牌的缓存。如果在那里找到令牌的散列，则它知道用户已通过身份验证。否则，它会[按照此处所述](https://developers.google.com/accounts/docs/OAuth2Login#validatingtoken)与 Google 进行检查，使用 Google -“Google，此令牌有效吗？”。

10\. 如果 Google 说访问令牌无效，我们会告诉用户 GTFO。否则谷歌会说“是的，这是一个有效的用户”，然后我们检查我们的注册用户数据库。如果找不到该 Google 用户名（或 Facebook id，如果使用 Facebook），我们可以创建一个新用户。然后我们缓存访问令牌的哈希值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-12T02:22:08.140

我刚刚发布了一个类似 StackOverflow 问题[的答案。](https://stackoverflow.com/a/17606189/459863)

Google 将此称为[混合应用程序](https://developers.google.com/accounts/cookbook/platforms/Hybrid)，并解释了[“Android 应用程序如何获得 Web 后端的离线访问”](https://developers.google.com/accounts/docs/CrossClientAuth#offlineAccess)。

它的要点是，您必须将经过按摩的`scope`字符串传递`GoogleAuthUtil.getToken`到其中才能使其返回授权码（而不是 OAuth2 令牌）。[根据此原理图](https://developers.google.com/accounts/docs/OAuth2#installed)，该授权代码可以从您的移动应用程序传递到您的服务器，并交换为 OAuth2 令牌和刷新令牌。

`scope`参数需要看起来像这样：

```
oauth2:server:client_id:<your_server_client_it>:api_scope:<scope_url_1> <scope_url_2> ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T17:54:55.503

您可以在其他任何地方使用移动应用程序检索到的访问令牌。Drive SDK 有一个漂亮而简单的介绍，贯穿[https://developers.google.com/drive/quickstart-android上的流程](https://developers.google.com/drive/quickstart-android)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T02:57:06.930

您可能需要 OpenID Connect，它使用 OAuth 令牌进行身份验证。至于`AccountManager`，目前的 OAuth 支持有点老套，新的[Google Play 服务](https://developers.google.com/android/google-play-services/)，即将发布，希望能做得更好。请参阅此处进行[演示](http://oauthssodemo.appspot.com/step/1)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-08T16:27:02.670

至少对于 Google，访问令牌最终会过期。这就是android`[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)`有这个`invalidateAuthToken`方法的原因——缓存的访问令牌已经过期，你需要告诉`AccountManager`你停止给你旧的，而是得到一个新的。这使得缓存令牌更加安全，因为令牌本身不会让您作为该用户永久访问。相反，当它有效时，它只是说“在最近的某个时候，这个令牌是由一个受信任的来源获得的”。

以下是我在使用令牌时发现的一些有用的东西。第一个是 Google 的 tokeninfo 端点。令牌本身只是 base64 编码的 JSON。这意味着它没有加密，因此您需要确保使用 HTTPS 进行通信。但是，这也意味着您可以检查令牌并更好地了解正在发生的事情。

[https://www.googleapis.com/oauth2/v1/tokeninfo?id_token=](https://www.googleapis.com/oauth2/v1/tokeninfo?id_token=)

如果您的令牌是“abcdef”，您将导航到：

[https://www.googleapis.com/oauth2/v1/tokeninfo?id_token=abcdef](https://www.googleapis.com/oauth2/v1/tokeninfo?id_token=abcdef)

谷歌会为你解包令牌。它是一个简单的 JSON 对象，其中包含一个“expires_in”字段，告诉您令牌仍然有效的秒数。在下面的视频中的 6:03，您可以看到解压后的令牌：

[https://developers.google.com/events/io/sessions/383266187](https://developers.google.com/events/io/sessions/383266187)

该视频包含对 OAuth2 的全面概述，如果您要处理 OAuth 和令牌，则非常值得完整观看。演讲者还讨论了其他形式的 Oauth2 令牌，它们不是访问令牌，不会过期。

另一个有用的资源是 OAuth Playground。这让你可以做一些基本的事情，比如请求范围、组成请求和取回令牌。这个链接似乎偶尔可以工作，在 Chrome 上我必须安装 Oauth Playground 应用程序：

[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

这里是视频中的演讲者 Tim Bray 的教程，解释了如何使用访问令牌从 Android 应用程序与服务器进行通信。这对我很有用，因为我开始了解 Google API 控制台中的不同事物如何协同工作：

[http://android-developers.blogspot.in/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.in/2013/01/verifying-back-end-calls-from-android.html)

关于您问题的实际答案，我想说您永远不需要在服务器上缓存访问令牌。正如上面的验证来自 Android 的后端调用链接中所解释的，验证令牌几乎总是一个快速的静态调用，这意味着没有理由缓存令牌：

> 这些库可以缓存 Google 证书并仅在需要时刷新它们，因此验证（几乎总是）是一个快速的静态调用。

最后，您确实可以使用`AccountManager`来获取访问令牌。但是，Google 现在反而鼓励使用`[GoogleAuthUtil](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html)`Play Services 库中的类：

[简而言之，与使用 OAuth2 请求 getAuthToken 和 getToken 有什么区别](https://stackoverflow.com/questions/14365219/in-a-nutshell-whats-the-difference-from-using-oauth2-request-getauthtoken-and-g)

请注意蒂姆·布雷（Tim Bray）的评论，同一个人再次来自上述链接，称他们正在为这`GoogleAuthUtil`条路线付出努力。但是请注意，这意味着您将仅限于 Google 身份验证。我相信`AccountManager`可以用来获取例如 Facebook 令牌，而不是`GoogleAuthUtil`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-20T12:07:56.977

它准确地描述了您想要的内容： [https ://developers.google.com/identity/protocols/CrossClientAuth](https://developers.google.com/identity/protocols/CrossClientAuth)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T01:00:43.230

当我们需要在非谷歌 OAuth 服务器上做类似的事情时，我们将令牌保存在网站上的数据库中。然后，该应用程序将在需要请求数据时使用 Web 服务来请求令牌。

用户可以在 Web 或应用程序上进行 OAuth 注册。它们共享相同的应用程序令牌，因此它们可以共享相同的访问令牌。注册后，我们会将访问和刷新令牌存储在数据库中，以供任何需要它的应用程序使用。

# gradle - 如何将依赖项部分中的所有源 jar 复制到 gradle 中的目录

> ID：11631932
> 
> 赞同：1
> 
> 时间：2012-07-24T13:28:54.420
> 
> 标签：gradle

我可以像这样复制依赖部分中的所有 jar 以进行“编译”配置

```
task('copyJars') { 
    ext.collection = files { genLibDir.listFiles() }
    delete ext.collection
    copy { from configurations.compile into genLibDir }
} 
```

但是我如何将他们的源 jar 文件复制到某个地方呢？

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:58:34.460

从 Gradle 1.0 开始，我不知道有一种简单的方法可以处理第三方来源的 Jars。您可以将它们添加为显式依赖项（添加到单独的配置中），或者爬取 Gradle 缓存。

顺便说一句，`delete ext.collection`是在错误的地方。它将在配置阶段执行，无论执行哪个任务都会删除文件。（也`listFiles()`将为每个构建调用。）

此外，主要目的是复制的任务应始终使用`Copy`任务类型而不是`copy`方法。

# matlab - 在 Matlab 中对坐标点进行排序

> ID：11631934
> 
> 赞同：4
> 
> 时间：2012-07-24T13:28:57.670
> 
> 标签：matlab

我想要做的是对这些坐标点进行排序：

测量坐标 (x,y)= (2,2),(2,3),(1,2),(1,3),(2,1),(1,1),(3,2), (3,3),(3 ,1)

我需要获取这些点的序列或轨迹，以便通过迭代来跟踪它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:42:33.380

```
data = [2,2 ; 2,3 ; 1,2 ; 1,3 ; 2,1 ; 1,1 ; 3,2 ; 3,3 ; 3 ,1]
% corresponding sort-value, pick one out or make one up yourself:
sortval = data(:,1); % the x-value
sortval = data(:,2); % y-value
sortval = (data(:,1)-x0).^2 + (data(:,2)-y0).^2; % distance form point (xo,y0)
sortval = ...

[~,sortorder] = sort(sortval);
sorted_data = data(sortorder,:); 
```

但是根据您的评论，我知道您实际上需要一些东西来重建路径并迭代地找到最后找到的点（到目前为止的重建路径）的最近邻居。

以下是我将如何解决这个问题（使用 pdist2 计算所有点之间的距离以便于计算）：

```
data = [2,2 ; 2,3 ; 1,2 ; 1,3 ; 2,1 ; 1,1 ; 3,2 ; 3,3 ; 3 ,1];
dist = pdist2(data,data);

N = size(data,1);
result = NaN(1,N);
result(1) = 1; % first point is first row in data matrix

for ii=2:N
    dist(:,result(ii-1)) = Inf;
    [~, closest_idx] = min(dist(result(ii-1),:));
    result(ii) = closest_idx;
end 
```

这导致：

```
result =
     1     2     4     3     6     5     9     7     8 
```

是曲线上连续点的索引。这是这个结果的图表：

![在此处输入图像描述](../Images/e310ba6d9cc1d4dd3aee27ec3cfee4d7.png)

正如@mathematician1975 已经提到的，到一个点的距离可以相等。这是通过使用`min`它来解决的，它只找到数组中最小值的第一次出现。这意味着如果您对输入数据进行不同的排序，当然可以获得不同的结果，这是等距离问题所固有的。

第二条评论：我不知道在使用大型输入数据矩阵时这会如何表现，因为循环可能有点慢，这是你无法避免的。我仍然看到改进的空间，但这取决于你；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T13:40:52.537

从你的点创建一个矩阵，这样你就有了类似的东西

```
 A = [2 2 1 1 2 1 3 3 3;
       2 3 2 3 1 1 2 3 1]'; 
```

然后尝试

```
 B = sortrows(A,1); 
```

得到一个矩阵，其中的行是您按`x`值排序的点或

```
 B = sortrows(A,2) 
```

得到一个矩阵，其中的行是你的点，按它们的 'y' 值排序。如果您的点是相对于其他一些排序参数（例如时间）进行排序的，那么排序将不起作用，除非您记住它们的创建顺序。

# sql - 查询逻辑回归，存在多个

> ID：11631938
> 
> 赞同：1
> 
> 时间：2012-07-24T13:29:17.863
> 
> 标签：sql, sql-server-2008, tsql

逻辑回归是由一个唯一标识数字组成，后跟多个二进制变量（始终为 1 或 0），具体取决于一个人是否符合某些标准。下面我有一个查询，列出了其中几个二进制条件。只有四个这样的标准，查询的运行时间比我想象的要长一些。有没有比下面更有效的方法？笔记。tblicd 是一个大型表查找表，具有 15k+ 行的文本表示。该查询没有真正的意义，只是一个概念证明。我的复合键上有正确的索引。

```
select  patient.patientid 
,case when exists
(
    select c.patientid from tblclaims as c
    inner join patient as p on p.patientid=c.patientid
    and c.admissiondate = p.admissiondate
    and c.dischargedate = p.dischargedate
    where patient.patientid = p.patientid
    group by c.patientid
    having count(*) > 1000
    )
    then '1' else '0'
    end as moreThan1000
,case when exists
(
    select c.patientid from tblclaims as c
    inner join patient as p on p.patientid=c.patientid
    and c.admissiondate = p.admissiondate
    and c.dischargedate = p.dischargedate
    where patient.patientid = p.patientid
    group by c.patientid
    having count(*) > 1500
    )
    then '1' else '0'
    end as moreThan1500
,case when exists
(
    select distinct picd.patientid from patienticd as picd
    inner join patient as p on p.patientid= picd.patientid
    and picd.admissiondate = p.admissiondate
    and picd.dischargedate = p.dischargedate
    inner join tblicd as t on t.icd_id = picd.icd_id
    where t.descrip like '%diabetes%' and patient.patientid = picd.patientid
    )
    then '1' else '0'
    end as diabetes
,case when exists
(
    select r.patientid, count(*) from patient as r
    where r.patientid = patient.patientid
    group by r.patientid
    having count(*) >1
    ) 
    then '1' else '0'
    end 

from patient
order by moreThan1000 desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:43:27.437

我将从在 from 子句中使用子查询开始：

```
select q.patientid, moreThan1000, moreThan1500,
       (case when d.patientid is not null then 1 else 0 end),
       (case when pc.patientid is not null then 1 else 0 end)
from patient p left outer join
     (select c.patientid,
             (case when count(*) > 1000 then 1 else 0 end) as moreThan1000,
             (case when count(*) > 1500 then 1 else 0 end) as moreThan1500
      from tblclaims as c inner join
           patient as p
           on p.patientid=c.patientid and
              c.admissiondate = p.admissiondate and
              c.dischargedate = p.dischargedate
      group by c.patientid
     ) q
     on p.patientid = q.patientid left outer join
     (select distinct picd.patientid
      from patienticd as picd inner join
           patient as p
           on p.patientid= picd.patientid and
              picd.admissiondate = p.admissiondate and
              picd.dischargedate = p.dischargedate inner join
          tblicd as t
          on t.icd_id = picd.icd_id
      where t.descrip like '%diabetes%'
     ) d
     on p.patientid = d.patientid left outer join
     (select r.patientid, count(*) as cnt
      from patient as r
      group by r.patientid
      having count(*) >1
     ) pc
     on p.patientid = pc.patientid
order by 2 desc 
```

然后，您可以通过组合它们来进一步简化这些子查询（例如，外部查询上的“p”和“pc”可以组合成一个）。但是，如果没有相关的子查询，SQL Server 应该会发现更容易优化查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:52:08.863

根据要求的左连接示例...

```
SELECT
    patientid,
    ISNULL(CondA.ConditionA,0) as IsConditionA,
    ISNULL(CondB.ConditionB,0) as IsConditionB,
    ....
FROM
    patient
        LEFT JOIN
    (SELECT DISTINCT patientid, 1 as ConditionA from ... where ... ) CondA
        ON patient.patientid = CondA.patientID
        LEFT JOIN
    (SELECT DISTINCT patientid, 1 as ConditionB from ... where ... ) CondB
        ON patient.patientid = CondB.patientID 
```

如果您的 Condition 查询最多只返回一行，您可以将它们简化为

```
 (SELECT patientid, 1 as ConditionA from ... where ... ) CondA 
```

# sql - 使用 Microsoft SQL Server 仅使用百分比计算运行日期

> ID：11631944
> 
> 赞同：2
> 
> 时间：2012-07-24T13:29:48.753
> 
> 标签：sql, sql-server, sql-server-2008, tsql, datetime

我有一张包含资源信息的表格，基本信息是：

```
ID    Total    Start        End          Used
----------------------------------------------
1     350      01-01-2012   31-12-2012   80.6%
2     250      01-01-2012   31-12-2012   51.5%
3     3500     01-01-2012   31-07-2013   12.5%
4     350      01-01-2012   31-10-2012   91.0% 
```

列是：

*   `Total`-- 资源总数（货币、时间、纸张等）。
*   `Start`-- 资源开始日期
*   `End`-- 资源结束日期
*   `Used`-- 迄今为止使用的资源百分比

我必须尝试计算（或估计）资源何时会以目前使用的速度耗尽。

我尝试了几种不同的方法，使用使用的百分比和百分比，但没有任何意义，我很确定有一种简单的方法可以做到这一点，但我找不到它。

我的理想输出将是下面的文本，但我可能会在应用程序中格式化：

```
You have used X% of your [resource name] in Y% of the time allotted, 
at this rate the resource will run down around [Run Down Date]. 
```

任何人都可以计算出这是如何计算的吗？

[可以玩的 SQL Fiddle](http://www.sqlfiddle.com/#!3/2b212/1)

**编辑：**

为了尝试使问题更清楚，我将解释如何计算单个日期：

对于第一行 (ID = 1)。

```
Average % per day = Percentage (80.6) / Days between Start and Today (205)
Average % per day = 0.003931707%

% remaining = Percentage (80.6%)
% remaining = 19.4%

Days remaining = Average % per day (0.003931707%) / % remaining (19.4%)
Days remaining = 49.34243176

Project Run Down = Today + Days Remaining (49.34243176)
Project Run Down = 11/09/2012 (11th Sep) 
```

我已尝试将此过程转换为 SQL，但无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:48:59.260

你可以试试这样的

```
declare @res table(
    id int identity(1,1)
    ,total int
    ,start date
    ,[end] date
    ,used float )

insert into @res(total, start , [end], used) 
values
    (350, '20120101', '20121231', 0.806)
    ,(250, '20120101', '20121231', 0.515)   

select 
*
,used/DATEDIFF(DAY,start,GETDATE()) as avUsePerDay
,1/(used/DATEDIFF(DAY,start,GETDATE())) as expectedDaysTotal
,DATEADD(day,1/(used/DATEDIFF(DAY,start,GETDATE())),start) as expectedToDie
from @res 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:51:19.860

那将是...

```
SELECT DATEDIFF(d, [StartDate], GETDATE()) * 100.0 /  DATEDIFF(d, [StartDate], [EndDate]) AS PercentageTimeGone,
       DATEADD(d, (100 - USED) / (Used / DATEDIFF(d, [StartDate], GETDATE())), GETDATE()) AS ProjectedEndingDate
FROM Resources 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:43:52.787

关于什么

```
select id, total, start, end, datediff(day,start,getdate()) / ( total / 100 ) 
```

我不擅长计算，但在数字上它是有效的。

祝一切顺利

# jquery - 如何在 ajax 查询后将项目添加到组合框中？

> ID：11631949
> 
> 赞同：3
> 
> 时间：2012-07-24T13:30:11.157
> 
> 标签：jquery, autocomplete, combobox

我无法找到解决问题的方法。我有 JqueryUI 给出的组合框示例。

我的来源是 Json Ajax，所有这些都运行良好。但我想手动将一个项目添加到我的组合框（我想将其附加到 Ajax 项目），上面写着“添加一个新项目”，当我点击它时，我的模态表单变得可见。

我在我的代码中添加了一些注释，我需要帮助来更多地解释我的问题。

```
 $('#combobox_scenario').combobox({
    source: function( request, response ) {
        $.ajax({
            url: "?module=gestionApplication&action=getListeScenarios&option="+encodeURI($(".ui-combobox:first input").val()),
            dataType: "json",
            success: function( data ) {
                response( $.map( data, function( item ) {
                    return {
                        label: item.test,
                        value: item.test,
                        option: this
                    }
                }));
                //I want to add an item Here !
                //response.add({label: 'Ajouter un Scénario',value: 'Ajouter un Scénario',option : this});
                console.log(response);
            }
        });
    },
    selected: function(event, ui) {
        var scenario = ui.item2;
        //if (scenario = "This Item added manually") 
            //MyForm.show()
        //else
            $.ajax({
                url: "?module=gestionApplication&action=getScenario&option="+encodeURI(scenario),
                dataType: "json",
                success: function( data ) {
                    data = data[0];
                    $("#scenario").show();
                    $("#scenario").html('<hr><h2>Informations sur le scénario '+data.TEST+'</h2><p>Description : '+data.DESCRIPTION+'</p>'+'<p>Application : '+data.APPLICATION+'</p>');
                }
            });
        //EndIf
    }
}); 
```

# 编辑

这是我的自动完成组合框代码：

```
(function( $ ) {
$.widget( "ui.combobox", {
    _create: function() {
        var input,
            self = this,
            source = this.options,
            select = this.element.hide(),
            selected = select.children( ":selected" ),
            value = selected.val() ? selected.text() : "",
            wrapper = this.wrapper = $( "<span>" )
                .addClass( "ui-combobox" )
                .insertAfter( select );
        input = $( "<input>" )
            .appendTo( wrapper )
            .val( value )
            .addClass( "ui-state-default ui-combobox-input" )
            .autocomplete({
                delay: 0,
                minLength: 0,

                // Need define source in my main js
                source: this.options.source,
                select: function( event, ui ) {
                    ui.item.option.selected = true;
                    self._trigger( "selected", event, {
                        item: ui.item.option,
                        item2 : ui.item.label
                    });
                },
                change: function( event, ui ) {
                    if ( !ui.item ) {

                        var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                            valid = false;
                        select.children( "option" ).each(function() {
                            if ( $( this ).text().match( matcher ) ) {
                                this.selected = valid = true;
                                return false;
                            }
                        });
                        if ( !valid ) {
                            // remove invalid value, as it didn't match anything
                            $( this ).val( "" );
                            select.val( "" );
                            input.data( "autocomplete" ).term = "";
                            return false;
                        }
                    }
                }
            })
            .addClass( "ui-widget ui-widget-content ui-corner-left" );

        input.data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>" + item.label + "</a>" )
                .appendTo( ul );
        };

        $( "<a>" )
            .attr( "tabIndex", -1 )
            .attr( "title", "Show All Items" )
            .appendTo( wrapper )
            .button({
                icons: {
                    primary: "ui-icon-triangle-1-s"
                },
                text: false
            })
            .removeClass( "ui-corner-all" )
            .addClass( "ui-corner-right ui-combobox-toggle" )
            .click(function() {
                // close if already visible
                if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                    input.autocomplete( "close" );
                    return;
                }

                // work around a bug (likely same cause as #5265)
                $( this ).blur();

                // pass empty string as value to search for, displaying all results
                input.autocomplete( "search", "" );
                input.focus();
            });
    },

    destroy: function() {
        this.wrapper.remove();
        this.element.show();
        $.Widget.prototype.destroy.call( this );
    }
});
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:37:03.830

# 新答案

在考虑了您的要求后，我更新了答案。请注意，我以[JQuery UI 示例](http://jqueryui.com/demos/autocomplete/#combobox)代码为基础。

我对组合框小部件进行了三处更改：

**1.修改你的ajax成功函数添加“ADD NEW ITEM”项**

```
var responseContainer = $.map( data, function( item ) {
    return {
        label: item.test,
        value: item.test,
        option: this
    };
})
responseContainer.push({label:'ADD NEW ITEM',value:'ADD NEW ITEM',option:this});
response(responseContainer); 
```

**`<strong>`2\. 在 ui-menu-item 元素中输出标准 html，而不是用标签分割文本。**

**3\. 自动完成选择事件添加if语句**

```
if(ui.item.value == "ADD NEW ITEM") {
    $("#dialog").dialog();
    $( this ).val( "" );
    select.val( "" );
    input.data( "autocomplete" ).term = "";
    return false;
} 
```

**说明：**所以当一个项目被选中时，它的值会被检查以查看它是否显示“添加新项目”。如果是这样，我们会显示一个对话框并将组合框重置为默认值。

[**使用原始 JQuery UI 小部件 (JSFiddle) 的完整代码示例**](http://jsfiddle.net/umSrH/7/)

***请注意***，我们正在编辑小部件，因此如果您将其用于其他用途，这可能不是最佳选择。如果我有更多时间，我会寻找不编辑小部件的方法，但可惜时间很短。

* * *

# 原始答案

## 使用 JQuery Append() 追加

要添加选项元素，请使用 JQuerys 的 append() 函数：

```
$('select#combobox_scenario').append('<option id="Combobox_Item_AddNewItem" value="Combobox_Item_AddNewItem">ADD A NEW ITEM</option>'); 
```

这会将给定的 html 附加到父元素的末尾，即在结束标记之前：`...</select>`

这是关于[append()的文档](http://api.jquery.com/append/)

## 或者直接添加到元素中

另一种方法是将选项添加到 html 中的选择列表中。像这样：

```
<select>
    // ...
    <option id="Combobox_Item_AddNewItem" value="Combobox_Item_AddNewItem">ADD A NEW ITEM</option>
</select> 
```

问题在于您通过 ajax 获得的值很可能会在此*之前*附加。

## 然后，选择时显示一个对话框

那么你想在选择元素时显示一个对话框吗？好的，在下一行（在附加新的选项元素之后），也添加这个：

```
$("#Combobox_Item_AddNewItem").live("click", function() {

    // Call the dialog ...
    $( "#AddNewItemDialog").dialog();
}); 
```

# continuous-integration - Jenkins控制台输出不是实时的

> ID：11631951
> 
> 赞同：48
> 
> 时间：2012-07-24T13:30:20.493
> 
> 标签：continuous-integration, jenkins

詹金斯很新，我有一个简单但烦人的问题。当我在 Jenkins 上运行作业（构建）时，我触发了 ruby​​ 命令来执行我的测试脚本。

问题是 Jenkins 没有从控制台实时显示输出。这是触发日志。

```
Building in workspace /var/lib/jenkins/workspace/foo_bar
No emails were triggered.
[foo_bar] $ /bin/sh -xe /tmp/hudson4042436272524123595.sh
+ ruby /var/lib/jenkins/test-script.rb 
```

基本上它会挂在这个输出上，直到构建完成，而不是只显示完整的输出。有趣的是，这不是一致的行为，有时它可以正常工作。但大多数时候没有实时控制台输出。

詹金斯版本：1.461

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-01-21T19:44:55.200

澄清一些答案。

*   `ruby`or`python`或任何合理的脚本语言将缓冲输出；这是为了最小化IO；写入磁盘很慢，写入控制台很慢......
*   通常，`flush()`在缓冲区中有足够的数据并对换行符进行特殊处理后，数据会自动获取。例如，在没有换行符的情况下编写字符串，然后`sleep()`在完成之前不会写入任何内容`sleep()`（我仅用`sleep`作示例，请随意替换任何其他昂贵的系统调用）。

例如，这将等待 8 秒，打印一行，再等 5 秒，打印第二行。

```
from time import sleep

def test():
    print "ok",
    time.sleep(3)
    print "now",
    time.sleep(5)
    print "done"
    time.sleep(5)
    print "again"

test() 
```

*   对于`ruby`, [`STDOUT.sync = true`](https://stackoverflow.com/questions/2215455/printing-to-screen-in-a-rake-task), 开启`autoflush`；所有的写入`STDOUT`都跟在`flush()`. 这将解决您的问题，但会导致更多的 IO。

    ```
    STDOUT.sync = true 
    ```

*   对于`python`, 可以使用`python -u`or 环境变量`PYTHONUNBUFFERED`来做`stdin/stdout/stout`不缓冲，但是[还有其他的解决方案](https://stackoverflow.com/questions/107705/python-output-buffering)不改`stdin`或者`stderr`

    ```
    export PYTHONUNBUFFERED=1 
    ```

*   因为`perl`，你有[`autoflush`](https://stackoverflow.com/questions/5014750/autoflush-question)

    ```
    autoflush STDOUT 1; 
    ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-19T11:43:16.700

确保您的脚本正在刷新其标准输出和标准错误。就我而言，我遇到了与您描述的类似的缓冲问题，但我使用的是 python。以下python代码为我修复了它：

```
import sys
sys.stdout.flush() 
```

我不是 Ruby 编码员，但 Google 揭示了以下内容：

```
$stdout.flush 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-21T00:22:08.040

在我看来，这`python -u`也有效。

例如在批处理命令中

```
python -u foo.py 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T12:10:49.353

这里最简单的解决方案是打开同步缓冲区到输出。@Craig 在他的回答中写了一些东西，但是一个解决方案将涵盖整个脚本，并且不需要您多次刷新缓冲区。

写吧

```
STDOUT.sync = true 
```

后面的逻辑很简单，避免多次使用 IO 操作输出缓冲。要禁用此使用

```
STDOUT.sync = false 
```

这是 Ruby 解决方案 ofc。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-11T02:39:05.717

其他每个答案都特定于一个程序或另一个，但我在这里找到了一个更通用的解决方案：

[https://unix.stackexchange.com/a/25378](https://unix.stackexchange.com/a/25378)

您可以使用它`stdbuf`来改变任何程序的缓冲行为。

`tee`在我的例子中，我将 shell 脚本的输出通过管道`grep`传输到控制台或基于内容的文件中。如 OP 所述，控制台已挂起。这解决了它：

```
./slowly_parse.py login.csv |tee >(grep -v LOG: > out.csv) | stdbuf -oL -eL grep LOG: 
```

最终我发现我可以传递`--line-buffered`给 grep 以获得相同的结果：

```
./slowly_parse.py login.csv |tee >(grep -v LOG: > out.csv) | grep --line-buffered LOG: 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-08T08:36:27.170

其他答案是正确的，您需要确保标准输出不被缓冲。

要注意的另一件事是 Jenkins 本身会逐行缓冲。如果您有一个运行缓慢的进程发出单个字符（例如，一个 nunit 测试套件摘要，它打印一个`.`成功测试和`E`一个错误），您将在行尾之前看不到任何内容。

[适用于我在 Windows 机器上运行的 Jenkins 1.572。]

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-09T18:30:50.027

对于某些命令，包括`tee`取消缓冲的最佳选择是[`unbuffer`](http://expect.sourceforge.net/example/unbuffer.man.html)从[`expect`](http://expect.sourceforge.net/)包中调用的程序。

**使用示例：**

代替

`somecommand | tee /some/path`

做

`somecommand | unbuffer -p tee /some/path`

**来源和更多信息：**

*   [https://stackoverflow.com/a/11337310/2693875](https://stackoverflow.com/a/11337310/2693875)
*   [https://unix.stackexchange.com/a/25375/53245](https://unix.stackexchange.com/a/25375/53245)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-24T20:41:27.213

操作系统本质上是缓冲输出数据以节省 CPU，Jenkins 也是如此。

看起来您正在使用 shell 命令运行 Ruby 脚本 -
我建议直接通过专用插件运行 Ruby 脚本：

[**詹金斯红宝石插件**](https://wiki.jenkins-ci.org/display/JENKINS/Ruby+Plugin)

（可能需要安装）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-23T14:06:38.150

Python 缓冲其输出跟踪并在脚本末尾打印它，以尽量减少控制台上的写入，因为写入控制台很慢。

您可以在跟踪后使用以下命令。它会将所有跟踪刷新到控制台，这些跟踪在该命令之前排队。

> sys.stdout.flush()

# php - 将此数字转换为人类可读的形式？

> ID：11631952
> 
> 赞同：1
> 
> 时间：2012-07-24T13:30:23.823
> 
> 标签：php, numbers

我有一个从 XLS 文件移植的数据库。我的号码是这种形式

```
3.41002E+13 
```

但可读的形式应该是：`34100224263318`

如何将第一种形式转换为第二种形式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:34:21.913

使用[number_format()](http://us.php.net/function.number_format)

> string **number_format** (float $number, int $decimals = 0, string $dec_point = '.', string $thousands_sep = ',' )

默认情况下，千位由 分隔`,`，这就是您需要传递所有四个参数的原因：

```
number_format(3.41002E+13, 0, ".", "");
34100200000000 
```

正如你所看到的，你还有一个额外的问题：你失去了精确度——至少在某种程度上：它从一开始就不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T13:33:01.507

你需要使用`number_format`，看看[这里](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T13:35:14.297

3.41002E+13 == 3.41002*10^13 == 3.41002 * 100000000000000

它只是一个浮点类型。如果你想实现这一点，你需要使用 number_format();

```
number_format(3.41002E+13) == 34100224263318 
```

如果您使用 phant0m 评论

```
number_format(1.11E-2) == 0,00111 
```

但是对于整数，如果你想要一个点就可以了

```
number_format(1.11E-2, 5, '.', '') == 0.00111 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T13:40:13.677

您将永远无法获得确切的数字（例如 34100224263318） “Ex”代表 10^x，它用于具有很多数字的数字，作为实际数字的近似值。number_format 是您可以用来获得标准人类可读数字版本的近似值（Ex 也是可读的，但无论如何）。

# c# - NLog 控件到现有的 RichTextBox Windows 窗体

> ID：11631959
> 
> 赞同：5
> 
> 时间：2012-07-24T13:30:59.237
> 
> 标签：c#, nlog

下面是我的 NLog 配置，我想将日志加载到 Form1 中名为 rtMessage 的现有 RichTextBox 中，但 NLog 将创建一个新窗口，并将日志消息加载到 RichTextBox 中：

```
 <targets>
    <target xsi:type="RichTextBox" name="m" layout="${longdate}|${level:uppercase=true}|${logger}|${message}" 
            controlName="rtMessage" formName="Form1" />
  </targets>

  <rules>
    <logger name="*" minlevel="Debug" writeTo="m" />
  </rules> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T15:29:44.697

我想你可以在 NLog Codeplex 论坛上找到你的问题的答案，[这里](http://nlog.codeplex.com/workitem/2707)。

如果您直接在表单`static` `logger`内的字段声明中初始化，*实例*将不存在，NLog 将继续为目标创建一个新表单。`Form1``Form1` *`RichTextBox`*

 *您需要做的是将初始化延迟`logger`到实例已经初始化的时间`Form1`，例如在`Load`事件处理程序中。

以下是 Codeplex 问题的功能代码摘录：

```
public partial class Form1 : Form
{
    private static Logger logger;// = LogManager.GetCurrentClassLogger();

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        logger = LogManager.GetCurrentClassLogger();
    }
} 
```

为避免不必要的重新初始化，您可能希望`logger`仅在尚未初始化时才进行初始化，即

```
 private void Form1_Load(object sender, EventArgs e)
    {
        if (logger == null) logger = LogManager.GetCurrentClassLogger();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T06:00:34.497

`winform1_Load` 1.通常在完成后初始化记录器`InitializeComponent`-> 已初始化您自己的 RichTextBox。

2.然后确保你`RichTextBoxTarget`的`FormName`和`ControlName`初始化好的。如：

```
RichTextBoxTarget rtbTarget = new RichTextBoxTarget();
logConfig.AddTarget("richTextBox", rtbTarget);
rtbTarget.FormName = "frmScrapeAmazonProduct"; // your winform class name
rtbTarget.ControlName = "rtbLog"; // your RichTextBox control/variable name 
```

更多可以参考[我的帖子](http://www.crifan.com/csharp_nlog_richtextbox_alwayls_create_new_window/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-16T17:31:09.373

不要忘记添加

```
LogManager.ReconfigExistingLoggers(); 
```

如果以编程方式将richtextbox 设置为记录器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-20T01:17:46.847

以下是三个提示，可帮助您在现有 RichTextBox 中加载日志。

1.  确保formName和controlName与实际使用一致
2.  `allowAccessoryFormCreation="False"`在 NLog.config 中设置
3.  `RichTextBoxTarget.ReInitializeAllTextboxes(this);`在 Form_Load

PS：按照这种方式，你需要在NLog.config中配置你的RichTextBoxTarget，请参考[RictTextBoxTarget](https://github.com/NLog/NLog.Windows.Forms/wiki/RichTextBoxTargetq)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-17T15:43:06.990

[https://github.com/NLog/NLog.Windows.Forms/wiki/RichTextBoxTarget](https://github.com/NLog/NLog.Windows.Forms/wiki/RichTextBoxTarget)

我在登录 windows.form 时遇到了类似的问题。我将 Nugget 中的 NLog.Windows.Forms 与 Nlog 和 Nlog.config 一起使用。我按照链接中的给定模板进行操作，无需任何手动初始化即可使其工作。我将部分代码提供到 Nlog.config 中。希望能帮助到你。

```
<targets>
<target xsi:type="RichTextBox"
      name="richTextBox1"
      layout="${longdate}|${level:uppercase=true}|${logger}|${message}"
      height="30"
      autoScroll="true"
      maxLines="60"
      showMinimized="true"
      toolWindow="true"
      controlName="richTextBox1"
      formName="Form1"
      width="50"
      useDefaultRowColoringRules="true"
      allowAccessoryFormCreation="true"
      messageRetention="None"
      supportLinks="false"
>
</target>
</targets> 
```*

# c# - MVC 3、EF4 自定义远程验证与单独的模型组装项目

> ID：11631964
> 
> 赞同：1
> 
> 时间：2012-07-24T13:31:18.950
> 
> 标签：c#, asp.net-mvc-3, validation

我已经设置了一个 MVC3 EF4 项目，其中模型和存储库被拆分为单独的装配项目。所需属性等的基本验证工作正常，但如果我需要进行任何远程验证，比如检查用户是否已经在一个组中，等等。远程验证无法识别模型项目中的控制器。

```
[Remote("IsUID_Available", "Validation")] 
```

当我尝试在 Model 项目中添加对主项目的引用时，它说这会导致循环依赖并且不允许添加它。

我是否需要将我的模型从单独的程序集中移到主项目中，或者是否有另一种方法可以在模型位于单独的程序集中时进行远程验证。

还有什么是这里的最佳做法。我读过几篇文章说将模型放在单独的程序集中是最佳实践，但如果你不能使用 MVC 的一半验证功能，那还有什么意义。我还注意到大多数 Microsoft MVC 示例仅在主项目中显示模型，而不是分解为程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:00:54.323

事实证明这毕竟不是问题。远程验证可以按照上面代码中的指定与单独程序集中的模型一起使用。

是 ReSharper 在 Visual Studio 中给出了一个错误，即控制器未知并用红色下划线标记它，但在实际编译和测试远程验证工作时。

# sql-injection - OWASP ZAP 工具未在 IE8 中跟踪

> ID：11631965
> 
> 赞同：0
> 
> 时间：2012-07-24T13:31:25.550
> 
> 标签：sql-injection, owasp

目前我正在从事渗透测试，特别是 SQL 注入，因为我正在使用 OWASP ZAP 工具，配置后我可以将我的 Web 应用程序跟踪到该 ZAP 工具中，但问题是我无法跟踪我的 Web我在 IE8 中运行的应用程序。实际上在手册中他们清楚地提到它将支持 IE8，但我不能。请就这方面给我一些建议。

提前致谢。凯萨瓦库玛五世

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:53:59.990

是的，ZAP 将支持 IE8——我自己测试过。

我假设您已按照以下方式将 ZAP 配置为 IE8 的代理：[http ://code.google.com/p/zaproxy/wiki/HelpStartProxies](http://code.google.com/p/zaproxy/wiki/HelpStartProxies)

你的目标应用程序是在同一台机器上吗？与本地应用程序对话时，IE 可能会很痛苦，并且通常会忽略代理设置。如果是这样，请确保*未选中*“绕过本地地址的代理服务器” 。

无论您是否针对本地应用程序，请确保目标主机名*不在*IE8 代理设置“例外”列表中 - 在 IE8/Internet 选项/“局域网 (LAN) 设置”对话框中单击“高级”按钮。

如果目标主机在例外列表中，则将其删除。

希望这能解决问题。

这很可能是一个“IE”问题，而不是 ZAP 问题。如果您将 IE 配置为使用 ZAP 并且 ZAP 中没有出现任何内容，则关闭 ZAP 并继续尝试使用 IE。如果它继续工作，那么它会忽略代理设置:)

让我知道这是否有效。

西蒙（ZAP 项目负责人）。

PS我们也有一个[用户组](http://groups.google.com/group/zaproxy-users)，你可能会得到更快的答案；）

# linux - 如何在 Linux 内核中启用动态调试？

> ID：11631968
> 
> 赞同：7
> 
> 时间：2012-07-24T13:31:32.323
> 
> 标签：linux, kernel

我`CONFIG_DYNAMIC_DEBUG`在内核配置文件中启用了该标志。当我在我的系统中启动时，我可以挂载`/sys/kernel/debug`并且也有`dynamic_debug/control`文件。

但是当我发出任何命令时

```
echo -n 'module nfsd +p' > <debugfs>/dynamic_debug/control 
```

`dmesg`它在OR中没有显示任何输出`syslogd`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:55:01.843

您是否设置了日志级别？

```
echo 8 > /proc/sys/kernel/printk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T11:52:56.670

尝试这个：

```
echo -n 'module <module name/folder> +p' > <debugfs>/dynamic_debug/control 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-13T23:19:43.890

`<debugfs>`只是文档中的占位符。无论出于何种原因，文档都没有提到安装 debugfs 的实际路径。您可以使用 找到路径`mount | grep debugfs`。

例如，在我的系统上：

```
$ mount | grep debug
debugfs on /sys/kernel/debug type debugfs (rw,relatime)

$ mount | grep debug | awk '{print $3}'
/sys/kernel/debug 
```

我怀疑它会安装到其他系统上的另一条路径，但我可能是错的。

此命令/路径应该适合您：

`echo -n 'module nfsd +p' > /sys/kernel/debug/dynamic_debug/control`

# python - STATIC_URL 在 Django 中不起作用

> ID：11631969
> 
> 赞同：2
> 
> 时间：2012-07-24T13:31:32.357
> 
> 标签：python, django, static

请考虑我的 django 项目下面给出的 seetings.py 文件

```
# Django settings for sadhana project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'test1',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': 'root123',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '#4twv0hz6f459ft+es3u$$z+uk#b@*_luj7)4-!4i9%(t9^ka_'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'sadhana.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'sadhana.wsgi.application'

TEMPLATE_DIRS = (
                 "/home/rahit/rahit/sahana/template/",
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'demo',             
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

当我尝试在模板中使用 {{STATIC_URL}} 时，我正在使用 django 1.4

```
<img src="{{ STATIC_URL }}images/feature_image_multi-party_video-conferencing.jpg" alt="Hi!" /> 
```

但是图像没有加载到 html 页面上请帮助我解决我做错了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:34:26.210

`STATIC_URL`除非您添加[`django.core.context_processors.static`](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.core.context_processors.static)到`TEMPLATE_CONTEXT_PROCESSORS`. 因此，您可以这样做，或者您也可以使用[模板标签](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#static)（仅限 Django 1.4+）：

```
{% load static from staticfiles %}
<img src="{% static "images/hi.jpg" %}" alt="Hi!" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:39:14.507

在生产或开发环境中部署静态文件是有区别的。

据我所知，您可能处于开发环境中，因此您应该将静态文件目录添加到 STATICFILES_DIR 设置变量中。或者，如果您的静态文件位于 django 应用程序的根目录中，请将“django.template.loaders.app_directories.Loader”添加到 TEMPLATE_LOADERS 设置变量中。

有关此主题的更多信息，请参阅[https://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)。

# .net - 如何解析 json 对象？

> ID：11631970
> 
> 赞同：0
> 
> 时间：2012-07-24T13:31:34.880
> 
> 标签：.net, regex, json

我目前正在尝试从我们从 Web 服务器进入我们的应用程序的文件中过滤一些信息

信息当前的格式是：

```
{"ns2":"ns2.xxxx.xxx","ns1":"ns1.xxxx.xxx","classname":"com.logicboxes.foundation.sfnb.order.domorder.DomCno","privacyprotectedallowed":"true","isOrderSuspendedUponExpiry":"false","noOfNameServers":"2","isprivacyprotected":"true","classkey":"domcno","isImmediateReseller":"false"} 
```

我们想做的是一块一块地提取信息，但我们试图从 NS2 和 NS1 字段开始

在我们有以下内容来格式化我们的数据之前，但它似乎无法改变它以使其过滤掉上面的字符串

```
Dim m As New Regex("(?<=<div id=""xxxx"">).+(?=</div>)") 
```

我想知道这里是否有人可以给我一条下坡路

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:50:14.697

在您的情况下，您可以执行以下操作：

您的 JSON 结果为 .net 对象

```
string json = "{"ns2":"ns2.xxxx.xxx","ns1":"ns1.xxxx.xxx","classname":"com.logicboxes.foundation.sfnb.order.domorder.DomCno","privacyprotectedallowed":"true","isOrderSuspendedUponExpiry":"false","noOfNameServers":"2","isprivacyprotected":"true","classkey":"domcno","isImmediateReseller":"false"}";

public class Blob
{
      public string ns2 {get;set;}
      public string ns1 {get;set;}
      public string classname {get;set;}
      public bool privacyprotectedallowed {get;set;}
      public bool isOrderSuspendedUponExpiry{get;set;}
      public int noOfNameServers{get;set;}
      public bool isprivacyprotected{get;set;}
      public string classkey{get;set;}
      public bool isImmediateReseller{get;set;}
} 
```

你可以使用这个库来转换它：http: [//james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

这是示例：

```
var Blob = JsonConvert.DeserializeObject<Blob>(json); 
```

希望这可以帮助你！

我还建议您查看 ContractResolvers，以便您可以将 PascalCasing 用于您的属性。更多信息可以在[这里找到](http://james.newtonking.com/projects/json/help/html/ContractResolver.htm)

如果你不想创建 Blob 对象，你也可以试试这个：

```
JObject obj = JObject.Parse(json);
string ns1 = (string)obj["ns1"];
string ns2 = (string)obj["ns2"]; 
```

# c# - 性能计数器集合

> ID：11631974
> 
> 赞同：2
> 
> 时间：2012-07-24T13:31:45.290
> 
> 标签：c#, performancecounter

有没有办法获得性能计数器的集合？

我的意思是，而不是创建几个性能计数器，例如

```
PerformanceCounter actions = new PerformanceCounter("CategoryName", "CounterName1","instance");
PerformanceCounter tests = new PerformanceCounter("CategoryName", "CounterName2", "instance"); 
```

我想获得一个集合（用于 CategoryName），其中每个项目都是 CounterName 项目。

所以不需要单独的计数器创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:08:59.760

根据您的描述，我相信您想要创建自定义计数器。您可以一次创建计数器，但您必须一个一个地创建它们的实例。

使用[CounterCreationDataCollection](http://msdn.microsoft.com/en-us/library/system.diagnostics.countercreationdatacollection%28v=vs.100%29.aspx)和[CounterCreationData](http://msdn.microsoft.com/en-us/library/system.diagnostics.countercreationdata.aspx)类。首先，创建计数器数据，将它们添加到新的计数器类别，然后创建它们的实例：

```
//Create the counters data. You could also use a loop here if your counters will have exactly these names.
CounterCreationDataCollection counters = new CounterCreationDataCollection();
counters.Add(new CounterCreationData("CounterName1", "Description of Counter1", PerformanceCounterType.AverageCount64));
counters.Add(new CounterCreationData("CounterName2", "Description of Counter2", PerformanceCounterType.AverageCount64));

//Create the category with the prwviously defined counters.
PerformanceCounterCategory.Create("CategoryName", "CategoryDescription", PerformanceCounterCategoryType.MultiInstance, counters);

//Create the Instances
CategoryName actions = new PerformanceCounter("CategoryName", "CounterName1", "Instance1", false));
CategoryName tests = new PerformanceCounter("CategoryName", "CounterName2", "Instance1", false)); 
```

我的建议是不要使用通用名称作为计数器名称。创建计数器后，您可能希望收集它们的数据（可能通过性能监视器），因此不要`CounteName1`使用计数器所代表的名称（例如操作、测试...）。

**编辑**

要一次获取特定类别的所有计数器，请创建计数器类别的实例并使用[GetCounters](http://msdn.microsoft.com/en-us/library/ew6c05xw.aspx)方法：

```
PerformanceCounterCategory category = new PerformanceCounterCategory("CategoryName");
PerformanceCounter[] counters = category.GetCounters("instance");

foreach (PerformanceCounter counter in counters)
{
    //do something with the counter
} 
```

# ruby - 为什么 Date 在需要之前就存在于 Ruby 中？

> ID：11631975
> 
> 赞同：23
> 
> 时间：2012-07-24T13:31:55.040
> 
> 标签：ruby, date

在 Ruby 中，我希望一个不需要的类会引发“未初始化的常量”错误。例如，情况就是这样`CSV`。

但是，`Date`行为很奇怪：它可用，但显然不起作用，直到需要它。

```
~: irb                                                                                             
>> Date.new(2012,7,24)
ArgumentError: wrong number of arguments(3 for 0)
>> require 'date'
=> true
>> Date.new(2012,7,24)
=> #<Date: 2012-07-24 ((2456133j,0s,0n),+0s,2299161j)> 
```

什么解释了这种行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T15:13:31.297

我相信这`date`不是来自`irb`，而是来自`rubygems`，特别是定义[的文件：](https://github.com/ruby/ruby/blob/ruby_1_9_3/lib/rubygems/specification.rb#L13)`Gem::Specification`

```
class Date; end # for ruby_code if date.rb wasn't required 
```

我相信他们需要定义*任何* `Date`类，以便口译员不会在`Specification`课堂上进一步抱怨。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T13:57:33.873

类似于[这个问题](https://stackoverflow.com/questions/9704969/why-is-rubys-date-class-automatically-loaded-but-datetime-is-not)。`irb`默认加载一个`Date`类，但 Ruby 本身不加载（例如`puts Date.new`在文件中尝试）。

正如您所指出的，加载的`Date`类似乎与分发类不同。`irb`此外，这似乎只是在 Ruby 1.9 中的情况——如果我在 1.8 中尝试它，我会在 require 之前和之后得到相同的类方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T13:57:41.133

部分答案：似乎不完整的`Date`类[来自irb，而不是ruby。](http://www.whynotwiki.com/Ruby_/_Dates_and_times#Caveat%3a_you_may_need_to_require_certain_date_classes_for_certain_Date.2FTime_features)

# xcode - 在 Xcode 4.3.2、iOS 中使用静态库文件时构建失败

> ID：11631976
> 
> 赞同：1
> 
> 时间：2012-07-24T13:31:56.603
> 
> 标签：xcode, ios5, static-libraries

我是 iOS 新手。我使用[http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)创建了静态库文件 当我在另一个项目中使用静态库文件时给出错误为

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_Exact_Library", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请帮助我在哪里做错了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:42:27.763

您必须将静态库添加到“使用库链接二进制文件”构建阶段。在左侧菜单中单击您的项目，然后单击“构建阶段”选项卡。将您的静态库拖放到“Link Binary With Libraries”部分。

# python - pyinstaller 和 win32com

> ID：11631982
> 
> 赞同：1
> 
> 时间：2012-07-24T13:32:07.793
> 
> 标签：python, win32com, pyinstaller

所以我对如何让 pyinstaller 构建使用 win32com 的应用程序感到困惑。我有一个脚本可以从 IDLE 或通过与 excel 交互的命令行毫无问题地运行

```
xl = Dispatch('Excel.Application') 
```

然后是其他一些非常基本的 excel 调用，然后关闭。我已经看到将“clsctx=pythoncom.CLSCTX_LOCAL_SERVER”作为 Dispatch 的参数包含在内的建议，但它不会改变任何东西。每当我构建脚本时，都会收到类似于此的错误

```
Traceback (most recent call last):
File "<string>", line 7, in <module>
File "C:\Python27\trunk\iu.py", line 436, in importHook
mod = _self_doimport(nm, ctx, fqname)
File "C:\Python27\trunk\iu.py", line 521, in doimport
exec co in mod.__dict__
File "Myskript\build\pyi.win32\Myskript\outPYZ1.pyz/win32com.client", line 11,
in <module>
File "C:\Python27\trunk\iu.py", line 436, in importHook
mod = _self_doimport(nm, ctx, fqname)
File "C:\Python27\trunk\iu.py", line 521, in doimport
exec co in mod.__dict__
File "Myskript\build\pyi.win32\Myskript\outPYZ1.pyz/win32com.client.gencache",
line 662, in <module>
File "Myskript\build\pyi.win32\Myskript\outPYZ1.pyz/win32com.client.gencache",
line 58, in __init__
File "Myskript\build\pyi.win32\Myskript\outPYZ1.pyz/win32com.client.gencache",
line 649, in Rebuild
File "Myskript\build\pyi.win32\Myskript\outPYZ1.pyz/win32com.client.gencache",
line 65, in _SaveDicts
File "Myskript\build\pyi.win32\Myskript\outPYZ1.pyz/win32com.client.gencache",
line 141, in GetGeneratePath
IOError: [Errno 22] invalid mode ('w') or filename: 'C:\\Python27\\trunk\\Myskri
pt\\dist\\Myskript.exe?844863\\__init__.py' 
```

这是从这个德国问题[http://www.python-forum.de/viewtopic.php?f=1&t=25010](http://www.python-forum.de/viewtopic.php?f=1&t=25010)复制的，但我的错误基本相同。我试图实施该页面上给出的建议也无济于事。

我对 COM 的东西几乎一无所知，只是希望能运行这个小的 excel 应用程序。

编辑：还尝试导入pythoncom并运行“CoInitialize（）”（基于这个家伙[在用py2exe编译后从Python调用MS Access模块​​函数失败](https://stackoverflow.com/questions/9565812/call-ms-access-module-function-from-python-after-compiling-with-py2exe-fails)说他的脚本在pyinstaller上运行良好）但这也没有改变任何东西。在这里真的很茫然，感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T18:06:09.410

我不确定您是否仍在使用 py2exe，当我偶然发现此线程时，我正要尝试您的解决方法： [Call MS Access module function from Python after compiling with py2exe failed](https://stackoverflow.com/questions/9565812/call-ms-access-module-function-from-python-after-compiling-with-py2exe-fails)

“解决方案”是使用 Pyinstaller，默认情况下根据您的脚本实现了一堆变通方法。我用我的 pywin32 脚本尝试了它，它使用了 excel 和 word com 对象，它完美地工作，没有任何调整。

# django - 从 django 1.3 更新到 1.4 时出现 apache 500 内部错误

> ID：11631986
> 
> 赞同：2
> 
> 时间：2012-07-24T13:32:16.843
> 
> 标签：django, django-1.3, django-1.4, django-wsgi

最初，当我在我的 ubuntu 服务器上安装带有 wsgi 的 Django 1.3 时，我使用了包含的 setup.py 文件，因此当我想更新时，请按照安装指南的[删除任何旧版本的 Django](https://docs.djangoproject.com/en/dev/topics/install/#removing-old-versions-of-django)部分，重命名我的站点中的“django”文件夹-packages “django.old”，然后使用 Django 1.4 的 setup.py 文件安装新版本

重新启动我的 apache 服务器后，我得到了一个标准的 500 内部错误。我检查了 apache 错误日志，发现 ADMIN_MEDIA_PREFIX 已被弃用，因此按照[Django 1.4 发行说明](https://docs.djangoproject.com/en/dev/releases/1.4/)，我从设置文件中删除了 ADMIN_MEDIA_PREFIX，并将管理文件移动到名为“admin”的文件夹下的静态目录中，如图所示。

我再次重新启动了我的 apache 服务器并收到了相同的标准 500 错误，但是这次当我尝试在 apache 错误日志上运行 tail 时，没有注册新的错误。

没有任何进一步的错误消息，我真的被卡住了，所以任何帮助都将不胜感激。

以下是我的 apache 站点配置文件和 wsgi 文件的内容

站点配置：

```
<VirtualHost *:80>
    ServerAdmin me@mysite.com
    ServerName  www.mysite.com
    ServerAlias mysite.com

    # Indexes + Directory Root.
    # DirectoryIndex index.html index.htm index.php
    DocumentRoot /home/www/www.mysite.com/htdocs/

    # CGI Directory
    ScriptAlias /cgi-bin/ /home/www/www.mysite.com/cgi-bin/
    <Location /cgi-bin>
            Options +ExecCGI
    </Location>

    # Logfiles
    ErrorLog  /home/www/www.mysite.com/logs/error.log
    CustomLog /home/www/www.mysite.com/logs/access.log combined

    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /home/www/www.mysite.com/htdocs/>
            Options FollowSymLinks MultiViews
            AllowOverride All
           allow from all
    </Directory>

    ### Connect Django to the URL using WSGI (the django recommended method)
    WSGIScriptAlias /myproject /django/myproject/django.wsgi

    ### Alias to the location of the static dir (images, css, js etc.)
    Alias /myproject/static /django/myproject/static
    <Directory /django/myproject/static>
            Order deny,allow
            allow from all
    </Directory>
</VirtualHost> 
```

django.wsgi：

```
import sys
import os
import django.core.handlers.wsgi

sys.path.append(os.path.dirname(os.path.abspath(__file__)) + '/..')
os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings'

application = django.core.handlers.wsgi.WSGIHandler()

sys.path.insert(0, '/django/myproject/')
sys.path.insert(0, '/django/myproject/')

from django.core.handlers.wsgi import WSGIHandler

application = WSGIHandler() 
```

**请注意，出于安全原因，我已尝试从这些文件中删除或重命名任何识别信息，因此如果存在明显的语法错误等，可能是由于此编辑所致。这些文件的原始版本对于名称更改是相同的，并且在 Django 1.3 下运行良好**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:28:05.077

django 1.4 包含一个 wsgi.py 文件配置：

请参阅文档： [https ://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/#the-application-object](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/#the-application-object)

# php - SQL查询从表中获取多次信息

> ID：11631991
> 
> 赞同：1
> 
> 时间：2012-07-24T13:32:32.800
> 
> 标签：php, sql

我猜这对于实验过的 Sql 用户来说非常容易：

给出下表：

表用户

```
 id  Name
   1 | Stephan
   2 | Marion
   3 | Jonathan
   4 | Morgan 
```

表消息

```
 id| sender | reveiver | message
   1|    2   |     4    | "hello world!" 
```

您将如何请求获得以下内容（仅在一个 sql 请求中）：

```
 id| sender | reveiver | message        | sender.username | receiver.username
  1|    2   |     4    | "hello world!" |       Marion    |        Morgan 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:36:28.993

尝试

```
select m.id, sender, receiver, message, sender.name, receiver.name
from messages m
left outer join users sender on sender.id = m.sender
left outer join users receiver on receiver.id = m.receiver 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T13:37:37.067

```
SELECT
    m.id
    , m.sender
    , m.receiver
    , m.message
    , s.name
    , r.name
FROM
    messages m
    , INNER JOIN names s ON (s.id = m.sender)
    , INNER JOIN names r ON (r.id = m.receiver) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T13:39:07.683

```
 select
        m.id
    ,  m.sender
    ,  m.receiver
    ,  m.message
    ,  su.user
    ,  ru.user
    from message m
    join user su on (su.id = m.sender)
    join user ru on (ru.id = m.receiver) 
```

我确信有一种更有效的方法，但这可能是最简单的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T13:50:05.750

```
select m.id, sender, reveiver, message,
  sender.Name as sender_username, receiver.Name as receiver_username
from messages m
inner join users sender on sender.id = m.sender
inner join users receiver on receiver.id = m.reveiver 
```

# ios - 如何在 AVCaptureSession 上设置音频采样率？

> ID：11631996
> 
> 赞同：6
> 
> 时间：2012-07-24T13:33:02.973
> 
> 标签：ios, audio, avcapturesession, sample-rate

我正在使用**AVCaptureSession使用****AVCaptureVideoDataOutput**和**AVCaptureAudioDataOutput**将视频和音频录制到样本缓冲区中。

iPhone（4 和 4S）的默认音频采样率为 44100Hz。我想将其设置为 48000Hz，但是 AVCaptureSession 似乎没有任何音频采样率设置。

我曾尝试使用**AVAudioSession**更改硬件采样率（使用 setPreferredHardwareSampleRate），但尽管它报告硬件采样率已更改（激活会话后），但这不会影响我在 AVCaptureAudioDataOutput 的示例委托中获得的实际采样率。

有没有办法从 AVCaptureSession 本身设置音频采样率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:30:52.577

根据 Apple 的支持，在 iOS 5 中没有办法做到这一点。他们建议这个功能可能会在以后的版本中添加，甚至可能是 6。

# rest - 用于获取完整用户列表的 Jira Rest Api

> ID：11631997
> 
> 赞同：4
> 
> 时间：2012-07-24T13:33:09.307
> 
> 标签：rest, jira

如何获取使用 Jira Rest APIs 的所有用户的列表。

我试过了：-

```
/rest/api/latest/user/search?username= 
```

在这里，我尝试使用空白用户名字符串，但它没有返回完整的用户列表。只有当用户名的长度至少为 1 时，我们才会得到一些结果。

如何从 Jira rest API 获取完整的用户列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:35:27.340

我不认为 Rest API 有这种能力。据我所知，您必须选择不同的方式，例如，您可以使用[Soap API](https://developer.atlassian.com/display/JIRADEV/Creating+a+JIRA+SOAP+Client)来执行此操作，如问题[JIRA SOAP API : get the list of users](https://stackoverflow.com/questions/1093564/jira-soap-api-get-the-list-of-users)中所示。另一种方法可能是[直接查询数据库](https://confluence.atlassian.com/display/JIRACOM/Example+SQL+queries+for+JIRA#ExampleSQLqueriesforJIRA-Listuserswhohavenotcreatedissuessinceaparticulardate)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T12:53:49.263

您可以创建一个循环，在其中您将遍历所有字母和另一个循环以显示每个名称以该字母开头的用户的结果。像这样的东西：

```
char[] ch = {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};

int j = ch.length;
 for (int i = 0; i < ch.length; i++)
                        {
                            System.out.print(Character.toString(Character.toUpperCase(ch[i])));
                            --j;

String projects = invokeGetMethod(auth, BASE_URL+"/rest/api/2/user/search?username="+Character.toString(ch[i]));
                            System.out.println(projects);
                            JSONArray projectArray = new JSONArray(projects);
                            for (int k = 0; k < projectArray.length(); k++) {
                            JSONObject proj = projectArray.getJSONObject(k);
                            System.out.println("Key:"+proj.getString("key"));
}

}

 private static String invokeGetMethod(String auth, String url) throws AuthenticationException, ClientHandlerException {
        Client client = Client.create();
        WebResource webResource = client.resource(url);
        ClientResponse response = webResource.header("Authorization", "Basic " + auth).type("application/json")
                .accept("application/json").get(ClientResponse.class);
        int statusCode = response.getStatus();
        if (statusCode == 401) {
            throw new AuthenticationException("Invalid Username or Password");
        }
        return response.getEntity(String.class);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-19T15:18:07.607

`/rest/api/2/user/search?username=%`作品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-30T18:29:02.557

`/rest/api/2/group/member?groupname=`如果您是管理员用户，则[可以使用。](https://docs.atlassian.com/jira/REST/cloud/#api/2/group-getUsersFromGroup)否则，这是不可用的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T19:06:03.977

我有时在 jira-users 上使用 SOAP getGroup 方法来获取 jira-users 的成员，但它似乎在 5K 左右错过了一些用户，你必须以 JIRA 管理员用户身份运行它。如果可以的话，更好的方法是直接访问 AD。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-17T21:32:31.520

这是我在 perl 中使用的示例。我相信它可以改进，但它对我有用。只需相应地更改“用户”和“密码”。

```
#!/usr/bin/env perl
use strict;
use warnings;
use 5.10.0;
use Data::Dumper;
use JIRA::REST;

$Data::Dumper::Sortkeys = 1;

my $jira='http://jira:8080';

my $jirarest = JIRA::REST->new($jira, 'user', 'password');

my %users;

for my $c ( 'a' .. 'z', '0'..'9' ,'_') {
    say "Scanning '$c'";
    my @u =  @{$jirarest->GET("/user/search?username=$c&includeInactive=1&maxResults=1000")};
    say scalar (keys @u);
    @users{  map {$_->{name}} @u } =  @u;
}

say Dumper(\%users);

say scalar (keys %users); 
```

主要假设是没有一个字符有超过 1000 个条目。我将调查 startAt 参数，看看它是否支持某种分页。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-03-11T21:45:02.087

我想获取我的电子邮件域中的所有用户。因为 JIRA 使用 username 参数搜索 username、displayName 和 emailAddress，所以我需要做的就是指定 username=mydomain.com 作为参数，然后我就得到了我的电子邮件域中的完整用户列表。如果您想将搜索范围扩大到多个域，请尝试 username=.com。嗯。

# java - .jar 适用于 Windows 和 Linux，但不适用于 OSX

> ID：11631998
> 
> 赞同：2
> 
> 时间：2012-07-24T13:33:10.937
> 
> 标签：java, macos

我最近为我所在的社区制作了一个应用程序，因为我运行 Windows 并且目前无法访问其他操作系统，所以我发布它说它在 Linux 和 OSX 上未经测试，人们反馈说它运行在 Linux 和 Windows 上很好，但在 OSX 上甚至无法启动，一个人在尝试运行它时发布了输出，这就是他们得到的结果：

```
ccemu.jar: line 1: PK: command not found
ccemu.jar: line 2:???@: command not found
ccemu.jar: line 3???@D?: command not found
ccemu.jar: line 4: syntax error near unexpected token `('
ccemu.jar: line 4: `?|?META-INF/MANIFEST.MFM??? Ew??Q^(1j???M7W?ħ???<p??K7??s?1??o?9?ة?}?#???C??z^?Jᘰ?S?ݿ????~X???I??kb,??J1b??͘s??????m??=-_?)??PK' 
```

显然，我不知道这些错误中的任何一个是什么意思，否则我不会在这里，希望有人能洞察我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:20:02.237

似乎正在测试它的人试图通过做来执行它`chmod +x ccemu.jar; ./ccemu.jar`，这在一般情况下是行不通的。该人可能应该尝试打电话`java -jar ccemu.jar`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T14:39:46.440

我对 Java 应用程序（在 OS X 上尝试）也有同样的问题，问题是在运行应用程序的脚本中，类路径用`;`而不是`:`.

# android - ActionBarSherlock：方向更改 ICS 时可折叠项目崩溃

> ID：11631999
> 
> 赞同：2
> 
> 时间：2012-07-24T13:33:11.253
> 
> 标签：android, actionbarsherlock

我有一个在 XML 中定义的可折叠菜单项，如下所示：

```
<item
    android:id="@+id/searchMenu"
    android:icon="@android:drawable/ic_menu_search"
    android:showAsAction="withText|always|collapseActionView"
    android:actionLayout="@layout/collapsible_edittext"/> 
```

这是 collapsible_edittext.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:imeOptions="actionSearch"
android:inputType="text"
android:hint="@string/search"/> 
```

当项目展开，并且您更改手机的方向时，它会崩溃，并在 logcat 中显示此错误：

07-24 08:59:19.353: E/AndroidRuntime(1284): 由: java.lang.IllegalArgumentException: 错误的状态类，期待视图状态，但收到类 android.widget.TextView$SavedState 代替。当不同类型的两个视图在同一层次结构中具有相同的 id 时，通常会发生这种情况。这个视图的 id 是 id/searchMenu。确保其他视图不使用相同的 ID。

如果我删除 android:id="@+id/searchMenu"，一切正常，但我需要代码中的项目 ID。此错误仅发生在 ICS 上（它甚至可以在果冻豆模拟器中使用）并且我使用的是 ActionBarSherlock 4.1.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T12:15:21.833

我终于找到了问题，实际上它甚至没有与 ActionBarSherlock 链接（我从我的项目中删除了 action bar sherlock 并且它仍然崩溃）。

我只需要在我的 EditText 中添加一个 id 就可以了。

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/collapsibleEditText"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:imeOptions="actionSearch"
    android:inputType="text"
    android:hint="@string/search"/> 
```