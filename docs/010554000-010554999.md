# StackOverflow 问答 10554000-10554999

# silverlight - 查询字符串参数加密/解密？使用 Silverlight 的 Usabe？

> ID：10554002
> 
> 赞同：0
> 
> 时间：2012-05-11T15:07:10.710
> 
> 标签：silverlight, encryption, query-string

我有一个实例，外部源将弹出一个浏览器，该浏览器将导航到我的 Silverlight 应用程序的主机页面。在第三方正在发送我不希望用户能够操作的伪敏感数据的查询字符串中。查看数据本身不是问题，它只是能够将值增加或更改为假定值。

我的问题是，我发现的大多数密码学在 Silverlight 中无法用于解密查询字符串值。

我有 3 个需要加密的查询字符串参数。

IE

第 3 方：（加密值需要为 value1、2 和 3）

```
//make call to Silverlight application host page
http://server/SilverlightRIA.aspx?value1=blah&value2=foo&value3=bar 
```

我的应用程序的 ASPX 页面将剥离查询字符串参数，并通过 init 参数将它们发送到 Silverlight 应用程序。此时它们可以被解密并设置为全局变量或任何情况。

我希望对加密值的最佳方式或最有效/最简单的方式提出一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:12:41.273

实际上最终找到了一种适用于 Silverlight 的相当简单的加密方法。

# javascript - ASP 提交按钮 onclick/_doPostBack

> ID：10554005
> 
> 赞同：1
> 
> 时间：2012-05-11T15:07:25.233
> 
> 标签：javascript, asp.net-mvc, forms, form-submit

**表格开始：**

```
 <% using (Html.BeginForm("Index", "recordssbook", FormMethod.Post, new { id = "SubmitForm" }))
    { %> 
```

**我要验证的提交按钮（同一表单中还有其他提交按钮）：**

```
<div><input type="submit" value="Delete Selected"  id ="DeleteButton" name="DeleteButton" onclick="deleteRecordsDialog();"/></div> 
```

**我在 js 中的确认对话框中的按钮会自动返回 false：**

```
function deleteRecordsDialog() {
    var returnThis;
    var numRecords = selectedRecordsArr.length;
    document.getElementById("popupContainer");
    var html = ""
    html= html + '<table>';
    html= html + '<tr>';
    html= html + '<td class="warning-icon-cell"></td>';
    html= html + '<td style="padding-left: 5px;">';
    if (numAddresses == 1) {
        html = html + '<p>You have chosen to delete a record.</p>';
    }
    else {
        html = html + '<p>You have chosen to delete ' + numRecords + ' records.</p>';
    }
    html= html + '<p>Are you sure you wish to proceed?</p>';
    html= html + '</td>';
    html= html + '</tr>';
    html = html + '</table>';
    if (numAddresses == 1) {
        html = html + '<div><input type="button" value="Yes, Delete Contact" style="width: 160px; onclick="document.DSubmitForm.HDeleteButton.submit(); CloseDialog();"/>&nbsp;&nbsp;<input type="button" value="Cancel" onclick="CloseDialog();"/></div>';
    }
    else {
        html = html + '<div><input type="submit" value="Yes, Delete Contact(s)" style="width: 160px; onclick="document.DSubmitForm.HDeleteButton.submit(); CloseDialog();"/>&nbsp;&nbsp;<input type="button" value="Cancel" onclick="CloseDialog();"/></div>';
    }
    html = html + '</div>';
    html = html + '</div>';
    html = html + '</div>';
    html = html + '</div>';
    OpenDialog(html, 350, 180, false, "Delete Contact")
    return false;
} 
```

我的问题：

1.  即使 onclick 返回 false，表单也已提交：我可以将输入类型更改为按钮而不是提交，如果我可以让伪提交工作，这应该可以工作
2.  _doPostBack 是另一种提交表单的方式吗？：从我的谷歌搜索中，我认为这应该模拟提交，但是当我将提交按钮设置为常规按钮时，如数字 1 中所述，单击“是，删除记录”不会提交表格。
3.  我有多个提交按钮，这使得这更复杂
4.  我不能使用 JQuery 的简单 .dialog

如果有人可以帮助我完成这项工作，我将不胜感激！

谢谢！！

**编辑** 所以html是一个带有按钮的记录列表，可以根据字母查询，添加记录，删除记录和编辑记录。所有这些按钮都是相同形式的提交按钮。

```
<td><input type="submit" value="ABC"  name="SubmitButton"/></td>
<td><input type="submit" value="DEF"  name="SubmitButton" /></td>
<td><input type="submit" value="GHI"  name="SubmitButton" /></td>
<td><input type="submit" value="JKL"  name="SubmitButton"/></td>
<td><input type="submit" value="MNO"  name="SubmitButton"/></td>
<td><input type="submit" value="PQRS"  name="SubmitButton" /></td>
<td><input type="submit" value="TUV"  name="SubmitButton"/></td>
<td><input type="submit" value="WXYZ" name="SubmitButton" /></td>
<div><input type="button" value="Add Contact" id="addAddress" onclick="AddAddresDialog()" /></div>
<div><input type="button" value="View &amp; Edit Selected" id="EditButton" name="EditButton"  onclick="updateAddressDialog()"/></div>
<div><input type="submit" value="Delete Selected"  id ="DeleteButton" name="SubmitButton" /></div> 
```

我只想将确认对话框添加到单击的删除按钮中。我想使用一个自定义对话框窗口来确认它，该窗口是站点主控上的一个 div，它通过放置在覆盖整个屏幕的掩码顶部弹出，该掩码是在 deleteRecordsDialog() 中创建的。

我想要做的是将删除任务 (id="DeleteButton) 的提交按钮更改为仅打开由 deleteRecordsDialog() 创建的对话框而不是现在提交的表单的常规按钮。“是的，删除联系人（ s)”自定义确认对话框中的按钮应该承担提交表单的任务，该任务的值是“删除选定的”，就像提交按钮现在所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:43:35.863

如果没有 html，很难真正理解您要做什么。但是，您可以尝试以下方法：

**HTML**：

```
<div>
    <input type="submit" value="Delete Selected"  id ="DeleteButton" name="DeleteButton" onclick="deleteRecordsDialog();"/>
    <input type="button"  id ="DeleteButtonSubmit" name="DeleteButtonSubmit" style="display:none;" />
</div> 
```

**Javascript**：

为模态创建按钮：

```
 html = html + '<div><input type="button" value="Yes, Delete Contact(s)" style="width: 160px; onclick="deleteContact();"/>&nbsp;&nbsp;<input type="button" value="Cancel" onclick="CloseDialog();"/></div>'; 
```

发布删除确认的功能：

```
function deleteContact()
{
    document.getElementById('DeleteButtonSubmit').click();
} 
```

此函数将单击用户最初单击的按钮下方的隐藏按钮。如果您正确设置此按钮，则表单应提交您需要的所有信息。

# jquery - 使用jquery拖放克隆和调整大小

> ID：10554007
> 
> 赞同：1
> 
> 时间：2012-05-11T15:07:34.217
> 
> 标签：jquery, jquery-ui

我有一些 jquery 代码，我希望能够拖放、克隆和调整大小。我可以在第一次尝试时拖放和调整大小。之后我将克隆的项目拖到容器周围，它不再能够调整大小。知道为什么吗？

我的来自 dragndrop.js 的 HTML、css 和 jquery 如下

```
.col{
    float:left;
    padding: 5px 5px 5px 5px;
    margin: 5px 5px 5px 5px;
}

#col1{
    width:200px;
    height:500px;
    border:1px solid black;

}

.drag{
    width:100px;
    border:1px solid black;
    height:40px;
    position:relative;
    background-color:red;
}

#droppable{
    width:500px;
    height :500px;
    border:1px solid black;
    }

<html>
    <head>
        <link rel="stylesheet" type="text/css" href="dragndrop.css" />
        <script src="http://www.google.com/jsapi" type="text/javascript"></script>
        <script type="text/javascript">
           google.load("jquery", "1.6.3");
           google.load("jqueryui", "1.8.16");
        </script>
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
        <script src="dragndrop.js" type="text/javascript"></script>
    </head>
    <body>
        <div id="wrapper">
            <div class = "col" id="col1">
                <div id="drag1" class="drag">
                </div>
            </div>
            <div class="col" id ="droppable">
            </div>
        </div>
    </body>
</html>

$(document).ready(function () {

    var x = null;

    //Make element draggable
    $(".drag").draggable({
        helper: 'clone',
        cursor: 'move',
        tolerance: 'fit'
    });

    $("#droppable").droppable({

        drop: function(e, ui) {

            x = ui.helper.clone();
                  x.draggable({
                helper: 'original',
                containment: '#droppable',
                tolerance: 'fit'
            });
            x.resizable({
                maxHeight: 40,
                minHeight:40,
                minWidth:50
            });
            x.appendTo('#droppable');
            ui.helper.remove();
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:18:45.057

问题是您正在克隆已经在可放置表面上的 div。

我添加了检查（可能需要更新）以查看 id 是否已设置（当它们被克隆时，id 设置为“”），如果它是空白的，则克隆并添加到可放置的表面，否则，不要管它，它是已经可以丢弃了。

```
 $("#droppable").droppable({

            drop: function (e, ui) {

                if ($(ui.draggable)[0].id != "") {
                    x = ui.helper.clone();
                ui.helper.remove();
                x.draggable({
                    helper: 'original',
                    containment: '#droppable',
                    tolerance: 'fit'
                });
                x.resizable({
                    maxHeight: 40,
                    minHeight: 40,
                    minWidth: 50
                });
                x.appendTo('#droppable');
            }

            }
        }); 
```

在此处查看完整演示[http://jsfiddle.net/ezzxX/2/](http://jsfiddle.net/ezzxX/2/)

# maven - 使用 Maven 配置文件中的内部版本号插件来构建模块

> ID：10554019
> 
> 赞同：0
> 
> 时间：2012-05-11T15:08:33.250
> 
> 标签：maven, dependencies, maven-profiles

我有父项目“父”，它有三个模块，如：

```
 <groupId>com.dummy.bla.bla</groupId>
 <artifactId>parent</artifactId>
 <version>1.0-SNAPSHOT</version>
 <packaging>pom</packaging>

<modules>
    <module>A</module>
    <module>B</module>
    <module>C</module>
</modules> 
```

三个模块像链条一样相互依赖：

```
A<--B<--C 
```

当我在 parent 下运行构建时，我将首先生成 A-1.0-SNAPSHOT.jar，然后是 B-1.0-SNAPSHOT.jar，最后是 C-1.0-SNAPSHOT.jar。

然后问题是，我有另一个 Maven 配置文件来每天生成夜间构建。在我的父 pom.xml 中，我有：

```
<build>
    <profile>
    <id>nightlybuild</id>
    <finalName>${artifcateId}-${buildNumber}</finalName>
    <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>buildnumber-maven-plugin</artifactId>
    <executions>
        <execution>
            <phase>generate-resources</phase>
            <goals>
                <goal>create</goal>
            </goals>
       </execution>
    </executions>
    <configuration>
        <doCheck>false</doCheck>
        <doUpdate>false</doUpdate>
        <format>{0,date,yyyy-MM-dd_HH-mm}_{1}</format>
        <items>
            <item>timestamp</item>
            <item>${user.name}</item>
        </items>
    </configuration>
</plugin>
</build> 
```

然后我在使用配置文件“nighlybuild”构建所有模块时遇到问题，因为它首先生成 A-${buildNumber}.jar，然后在构建 B 时，它无法查找 A-1.0-SNAPSHOT.jar（因为在B/pom.xml 我有 A 作为版本 1.0-SNAPSHOT 的依赖项）。无论如何，B下的pom.xml可以有类似的东西：

```
if(normal build) {
    dependency A version is: 1.0-SNAPSHOT
}
if(nightly build) {
    dependency A version is: ${buildNumber}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:17:34.843

这不是一个很好的做法。如果您正在更改版本，那么您必须真正发布您的工件，即使用 maven-release-plugin（在您的夜间构建期间仍然可以这样做）。

但是要回答您的问题，没有什么能真正阻止您将项目 B 中的依赖项声明移动到配置文件中，尽管我认为您不能在依赖项版本声明中使用插件设置的属性。

# php - php：防止表单重新提交

> ID：10554023
> 
> 赞同：0
> 
> 时间：2012-05-11T15:08:43.110
> 
> 标签：php, forms

我有一个用于使用的 php 注册过程。当用户到达注册过程的倒数第二页时，它会显示所有注册详细信息的摘要和提交按钮（基本上是确认和支付按钮）。现在，当用户单击此按钮时，所有这些详细信息都会发布到 sql 数据库中，并且该用户会在数据库中使用用户名和密码创建。现在的问题是，如果您多次单击该提交按钮，它会重新提交数据并在数据库中创建重复条目，其中每个重复条目具有相同的详细信息（姓名、电子邮件等），但用户名和密码不同。我该如何防止这种情况？我知道您可以立即提交并回发给自己，但我该怎么做呢？我试图实现这段代码，但它不起作用：[http://www.bjw.co.nz/developer/general/75-how-to-prevent-form-resubmission](http://www.bjw.co.nz/developer/general/75-how-to-prevent-form-resubmission)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:11:52.133

在这种情况下，我会建议一些 JavaScript。将以下内容添加到提交按钮：

```
onclick="this.disabled=true;" 
```

这将在单击按钮后禁用该按钮，以便无法再次单击它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T15:12:36.000

您应该将一个值保存到 PHP 会话中，以标识表单是否已提交，使用`$_SESSION`. PHP Session 在每个请求执行时都被锁定，因此当第一次提交锁定它时，第二次将不得不等到第一次提交完成并设置值。第二个请求随后将读取它，并在设置为已提交的值时中断。

这是如何做到这一点的示例。如果一个用户同时进行多个注册，它可能会包含错误（他为什么要注册？）。

在包含表单提交按钮的页面上，您应该设置一个标记：

```
session_start();
$_SESSION["RegistrationSubmitted"] = false; 
```

这表示用户当前正在进行的注册尚未提交。

在提交（发布）到的页面上，您可以检查此值：

```
session_start();
if (isset($_SESSION["RegistrationSubmitted"]) {
    if ($_SESSION["RegistrationSubmitted"] == true) {
         die("Registration has already been submitted!");
    } else {
         // Process registration here
         $_SESSION["RegistrationSubmitted"] == true;
    }
} else {
    die("Last registration page hasn't been reached! (A bot?)");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:18:19.287

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:14:40.593

您可以创建一个表单键，如：

```
<input type="hidden" name="form-key" value="<?php echo $last_order_datetime; ?>" /> 
```

然后，在提交新订单时，检查 $_POST['form-key'] 的值是否与最近存储的订单完全相同。

如果是，则处理表单。否则，这是重新提交或其他尝试。

# visual-studio-2010 - 从有序测试运行时不显示 Web 测试详细信息

> ID：10554027
> 
> 赞同：1
> 
> 时间：2012-05-11T15:09:08.587
> 
> 标签：visual-studio-2010, .net-4.0, webtest, ordered-test

我有一个包含 4 个网络测试的有序测试。问题是 Visual Studio 似乎在加载单个测试的测试结果时出现问题。

我附上了一个屏幕截图来补充 1000 个单词。:)

![测试结果截图](../Images/de62d2bd47e44fd12e5e1ea24b717a2b.png)

如您所见，第三个测试（直观地称为 Webservice03）失败了。上面的截图是在我双击相应的行以打开有关该测试运行的详细信息后截取的。包含请求和其他有用信息的面板是空的。

这个问题很烦人，因为测试是定期运行的更大测试套件的一部分，所以当它失败时，我必须从测试配置中手动禁用设置和清理脚本，手动运行它们，然后运行每个测试手动，而不是轻松地打开测试结果。

有没有人遇到过这个问题？谢谢。

版本详情：

Microsoft Visual Studio 2010 终极版 10.0.40219.1 SP1Rel

Microsoft .NET 框架版本 4.0.30319 SP1Rel

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:26:46.067

我有同样的问题，并试图通过微软论坛澄清：

[从有序测试运行时不显示 Web 测试详细信息](http://social.msdn.microsoft.com/Forums/en-US/vstswebtest/thread/44c6ca51-0773-4bfa-8c4e-519b1ee48a2f)

根据答案，作为有序测试的一部分，您无法获得 Web 测试运行的详细测试结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T22:21:43.920

这是有序测试的替代方法：

1.  将 Web 测试添加到负载测试

2.  在测试组合中选择“基于顺序测试顺序的测试组合”。这将实现与有序测试相同的效果。

    ![在此处输入图像描述](../Images/cfdc2b50df3715bfa7868f27a98a7eb6.png)

3.  在负载测试运行设置中，确保“Save Log on Test Failure”设置为 True：

    ![在此处输入图像描述](../Images/a705844cea9a0f311d3e87279dd47c86.png)

4.  设置 1 个用户的恒定负载模式

在“加载”测试结束时，您将能够看到失败的数量，并且在表格视图中，您可以单击错误计数，这会将您带到一个对话框，让您浏览各个 Web 测试失败。

![在此处输入图像描述](../Images/870aeaeebec4bd7a754eee4ed7a51724.png)

![在此处输入图像描述](../Images/047795d86942c3e135b5f8988b9e0bf2.png)

# objective-c - Can I add a hyperlink inside a tooltip in an NSView?

> ID：10554036
> 
> 赞同：2
> 
> 时间：2012-05-11T15:09:47.040
> 
> 标签：objective-c, macos, cocoa, tooltip, nsview

I want hyperlinks in the tooltips of my OSX application, which then link to the Help Book in various places. Is this possible?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:12:49.647

No, a tooltip is always placed next to the mouse with no possibility to click on it. But I guess you could achieve the look of a hyperlink by using `NSAttributedString`, although I'm not sure if the tooltips render them correctly.

# spring - Hibernate 元组条件查询

> ID：10554039
> 
> 赞同：0
> 
> 时间：2012-05-11T15:09:50.723
> 
> 标签：spring, hibernate, jpa, jboss, hibernate-criteria

我正在尝试按照[第 9 章第 9.2 节中给出的示例使用休眠创建查询](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/querycriteria.html#querycriteria-tuple)

我尝试的不同之处在于我使用的是 spring MVC 3.0。这是我的地址类以及我创建的方法。

```
@RooJavaBean
@RooToString
@RooEntity
@RooJson
public class Address {

    @NotNull
    @Size(min = 1)
    private String street1;

    @Size(max = 100)
    private String street2;

    private String postalcode;

    private String zipcode;

    @NotNull
    @ManyToOne
    private City city;

    @NotNull
    @ManyToOne
    private Country country;

    @ManyToOne
    private AddressType addressType;

    @Transient
    public static List<Tuple> jqgridAddresses(Long pID){
        CriteriaBuilder builder = Address.entityManager().getCriteriaBuilder();
        CriteriaQuery<Tuple> criteria = builder.createTupleQuery();
        Root<Address> addressRoot = criteria.from( Address.class );
        criteria.multiselect(addressRoot.get("id"), addressRoot.get("street1"), addressRoot.get("street2"));
        criteria.where(builder.equal(addressRoot.<Set<Long>>get("id"), pID));
        return Address.entityManager().createQuery( criteria ).getResultList();
    }
} 
```

上面调用的方法`jqgridAddresses`是重点。我选择不使用“**路径”**，因为当我说类似**Path idPath = addressRoot.get(Address_.id);** 在文档的第 9.2 节中，**PathAddress_.id**东西会产生编译错误。

上面的方法返回一个空的类型列表，`Tuple`因为它的大小为零，即使它应该包含一些东西。这表明查询失败。有人可以给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T16:45:13.920

好的，所以我对我的项目特定的逻辑进行了一些小的调整，但是，以下方法非常有效。希望它能帮助有需要的人！

```
@Transient
public static List<Tuple> jqgridPersons(Boolean isStudent, String column, String orderType, int limitStart, int limitAmount){
    CriteriaBuilder builder = Person.entityManager().getCriteriaBuilder();
    CriteriaQuery<Tuple> criteria = builder.createTupleQuery();
    Root<Person> personRoot = criteria.from(Person.class );
    criteria.select(builder.tuple(personRoot.get("id"), personRoot.get("firstName"), personRoot.get("lastName"), personRoot.get("dateOfBirth"), personRoot.get("gender"), personRoot.get("maritalStatus"))); 
    criteria.where(builder.equal( personRoot.get("isStudent"), true));
    if(orderType.equals("desc")){
        criteria.orderBy(builder.desc(personRoot.get(column)));
    }else{
        criteria.orderBy(builder.asc(personRoot.get(column)));
    }
    return Address.entityManager().createQuery( criteria ).setFirstResult(limitStart).setMaxResults(limitAmount).getResultList(); 
} 
```

# python - 检测空的 XML 根元素

> ID：10554049
> 
> 赞同：1
> 
> 时间：2012-05-11T15:10:10.713
> 
> 标签：python, xml, elementtree

我正在阅读一堆 XML 文件。如果文件只包含一个空的根元素，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<root /> 
```

我想跳过它。目前我做：

```
import xml.etree.cElementTree as ET 
xml = ET.parse(filename)
if not [el for el in xml.getroot()]:
    # skip 
```

有没有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:23:28.427

而不是列表理解，使用 DOM 方法`ElementTree`为您提供：

```
if not xml.getroot().getchildren(): 
    # skip 
```

# java - Porter 和 Lancaster Stemming 算法的主要区别和优势是什么？

> ID：10554052
> 
> 赞同：78
> 
> 时间：2012-05-11T15:10:15.533
> 
> 标签：java, machine-learning, nlp

我正在处理 java 中的文档分类任务。

强烈推荐这两种算法，每种算法的优点和缺点是什么，在自然语言处理任务的文献中更常用的是哪一种？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-06-26T15:07:55.200

在它的基础上，porter 和 lancaster 词干提取算法之间的主要区别在于，lancaster 词干提取器比 porter 词干提取器更具侵略性。目前使用的三种主要词干提取算法是 Porter、Snowball (Porter2) 和 Lancaster (Paice-Husk)，攻击性连续统基本上遵循相同的路线。Porter 是最不激进的算法，每个算法的细节实际上都相当冗长和技术性。不过，这里有一个细分：

Porter：毫无疑问是最常用的词干分析器，也是最温和的词干分析器之一。为数不多的真正支持 Java 的词干分析器之一，这是一个加分项，尽管它也是算法中计算量最大的（当然不是很大的优势）。它也是最古老的词干提取算法。

Porter2：几乎普遍认为是对波特的改进，这是有充分理由的。事实上，波特本人也承认它比他原来的算法要好。计算时间比 porter 稍快，周围有相当大的社区。

Lancaster：非常激进的词干提取算法，有时会出错。对于 porter 和 snowball，词干表示对读者来说通常是相当直观的，而 Lancaster 则不然，因为许多较短的单词会变得完全混淆。这里最快的算法，并且会大大减少你的工作单词集，但如果你想要更多的区别，而不是你想要的工具。

老实说，我觉得 Snowball 通常是要走的路。在某些情况下，Lancaster 会极大地减少您的工作集，这可能非常有用，但是在我看来，雪球的边际速度增加不值得缺乏精度。虽然 Porter 的实现最多，因此通常是默认的首选算法，但如果可以，请使用雪球。

## 雪球 - 附加信息

> [Snowball](https://snowballstem.org/)是一种小型字符串处理语言，旨在创建用于信息检索的词干算法。
> 
> Snowball 编译器将 Snowball 脚本翻译成另一种语言 - 目前支持 ISO C、C#、Go、Java、Javascript、Object Pascal、Python 和 Rust。

### 名字的历史

> 由于它有效地提供了“后缀 STRIPPER GRAMmar”，所以我曾玩弄过将其称为“strippergram”的想法，但良好的感觉已经占了上风，因此它被命名为“Snowball”，以向 SNOBOL 致敬，SNOBOL 是优秀的字符串处理语言1960 年代的 Farber、Griswold、Poage 和 Polonsky 先生。
> ---马丁·波特

以 Snowball 语言实现的词干分析器有时简称为 Snowball 词干分析器。例如，请参阅自然语言工具包：[nltk.stem.snowball](https://www.nltk.org/_modules/nltk/stem/snowball.html)。

# javascript - 应用css高度后获取网页元素的默认高度）

> ID：10554053
> 
> 赞同：1
> 
> 时间：2012-05-11T15:10:20.340
> 
> 标签：javascript, jquery, css, html

如果忽略应用于它的“高度”css 属性，我该如何获取页面上元素的高度？

我正在处理的网站是[http://www.wncba.co.uk/results](http://www.wncba.co.uk/results)，到目前为止我得到的实际脚本是：

```
jQuery(document).ready(function($) {

    document.origContentHeight = $("#auto-resize").outerHeight(true);
    refreshContentSize(); //run initially
    $(window).resize(function() { //run whenever window size changes
        refreshContentSize();
    });
});

function refreshContentSize()
{       
    var startPos = $("#auto-resize").position();
    var topHeight = startPos.top;
    var footerHeight = $("#footer").outerHeight(true);
    var viewportHeight = $(window).height();    
    var spaceForContent = viewportHeight - footerHeight - topHeight;

    if (spaceForContent <= document.origContentHeight)
    {
        var newHeight = document.origContentHeight;
    }
    else
    {
        var newHeight = spaceForContent;
    }
    $("#auto-resize").css('height', newHeight);
    return; 
} 
```

[ [http://www.wncba.co.uk/results/javascript/fill-page.js](http://www.wncba.co.uk/results/javascript/fill-page.js) ]

我要做的是让主页内容拉伸以填充窗口，以便绿线始终沿着页面向下流动，并且“有效 HTML5”和“设计者”消息永远不会高于底部窗户。我不希望页脚粘在底部。如果没有足够的内容来填充它，我只是希望它留在那里而不是向上移动页面。如果浏览器窗口大小发生变化，它也必须相应地进行自我调整。

到目前为止我得到的脚本有效，但有一个小问题我想用它来解决。目前，如果页面上的内容动态变化（导致页面变长或变短），脚本将不会检测到这一点。该变量`document.origContentHeight`将保持设置为旧高度。

有没有一种方法可以检测元素的高度（例如示例中的#auto-resize）以及它是否已经改变而忽略了在css中为其设置的高度？然后我将使用它来更新变量`document.origContentHeight`并重新运行脚本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:40:29.497

我认为除了使用插件之外，没有办法检测元素大小何时发生变化，

```
$(element).resize(function() //only works when element = window 
```

但是为什么不`refreshContentSize`动态调用页面更改上的函数呢？

看看这个[jsFiddle DEMO](http://jsfiddle.net/26utk/)，你就会明白我的意思了。

或者您可以使用[Jquery-resize-plugin](http://benalman.com/code/projects/jquery-resize/examples/resize/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:04:04.823

我已经让它工作了。我不得不重新考虑一下。解决方案在现场。

如果可能的话，我认为我想改变的是

```
setInterval('refreshContentSize()', 500); // in case content size changes 
```

有没有一种方法可以检测表行的大小已经改变，而不需要每 500 毫秒进行一次检查。我试过`(#content).resize(function()`但无法让它工作。

# php - Ajax 发送和检索

> ID：10554058
> 
> 赞同：0
> 
> 时间：2012-05-11T15:10:43.890
> 
> 标签：php, jquery, ajax

我已经使用 ajax 一段时间了，我想了解更多有关检索数据的信息。我只知道如何使用`callbacks`.

当我使用回调并且我想要单独的值时，我使用`split()`or`explode()`所以我可以获得单独的值。还有比这更好的方法吗？`pattern`如果我继续使用它，我认为如果输入与for `split`/具有相同的字符，它会变得混乱`explode`。

我想知道如何通过变量而不是`echo`HTML 输出单独检索数据。

问你是否不明白我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:13:14.510

您可以将 PHP 页面的输出返回为`jSON`. 您可以使用方法遍历 json 结果`each`并获取项目。这比做更清洁`split`

一个样品

```
$.getJSON("yourphppage.php", function(data){
   $.each(data.ResultSet.Results,function(i,item){
      console.log(data.ResultSet.Results[i].Name);
      console.log(data.ResultSet.Results[i].Age);
   });     
}); 
```

假设您`JSON`从 php 页面返回如下结果

```
{
    "ResultSet": {          
        "ErrorMessage": "No error",
        "Results": [
            {
                "Name": "John",
                "Age": "22"
            },
            {
                "Name": "John",
                "Age": "22"
            }
        ]
    }
} 
```

**编辑：**使用使用**jSONLint**时，这是一个很棒的基于 Web 的工具，可以告诉您 JSON 是否有效。

[http://jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:23:57.617

使用 Ajax/jquery $.get 示例：

```
$.get(
    path_to_your_script. "?run=process_ajax_callback",
    {
        var_ajax: 1, // var sample
        // more vars to your function
    },
    function(response, status) {
        // evaluate response var as a javascript object/array
    },
    'json' // we expect json formatted response
    ); 
```

从 PHP 函数返回值：

```
function process_ajax_callback()
{
    // ...

    $output['var'] = array(1, 2, 3); // var sample

    echo json_encode($output); // encode as json!!!

    exit; // very important (only output from this function)
} 
```

# windows-phone-7 - 从 microsoft 推送通知服务返回的 uri 中将包含哪些所有信息？

> ID：10554073
> 
> 赞同：0
> 
> 时间：2012-05-11T15:11:41.220
> 
> 标签：windows-phone-7

当 Windows Mobile 首次注册到 Microsoft 推送通知服务时，URI 中将包含哪些所有信息？这个uri会不断变化吗？应用程序是否应该在每次启动时更新此 uri？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:21:59.897

该文档发现了您的所有问题：[Receiving Push Notifications for Windows Phone](http://msdn.microsoft.com/en-us/library/hh202940%28v=vs.92%29.aspx)

1.  该URI 包含Phone+Application 对的某种唯一标识符。
2.  您的应用程序应注册 ChannelUriUpdated 事件，以防推送通知 URI 发生变化。
3.  每次您的应用程序启动时，您应该将 URI 从您的推送通道传递到发送推送通知的 Web 服务。

# javascript - 在这个 javascript 的异步示例中，为什么第二个函数不运行？

> ID：10554079
> 
> 赞同：2
> 
> 时间：2012-05-11T15:12:04.940
> 
> 标签：javascript, asynchronous

```
var async = require('async');

function f1() {
    setTimeout(function(){ console.log('111');},300);
}

function f2() {
    setTimeout(function(){ console.log('222');},100);
}

async.series([f1,f2], function(err, result){
    console.log(result);
}); 
```

它打印：

```
111 
```

没有`222`？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T15:21:29.230

`f1()`并且`f2()`预计将异步完成，因此当它们“完成”时，它们会得到一个回调来调用。试试这个：

```
var async = require('async');

function f1(done) {
    setTimeout(function(){ console.log('111'); done(); },300);
}

function f2(done) {
    setTimeout(function(){ console.log('222'); done(); },100);
}

async.series([f1,f2], function(err, result){
    console.log(result);
}); 
```

* * *

编辑：关于“为什么”，这是因为`f1()`立即被调用，因此您的初始设置`setTimeout()`按预期安排。但是，由于您永远不会告诉`async`已`f1()`完成，因此它永远不会调用`f2()`.

# java - 作为 JPQL 查询的结果，如何访问对象数组列表

> ID：10554080
> 
> 赞同：1
> 
> 时间：2012-05-11T15:12:11.080
> 
> 标签：java, generics, jpa, collections, jpql

**模式**：每个员工可能有很多电话号码，每个电话号码属于一个员工（一对多关系）。

使用以下 JPQL 查询`SELECT e, p FROM Employee e JOIN e.phones p`：

您将如何`List<Object[]>`在应用程序代码中处理此查询的结果？在访问应用程序中的每个员工及其电话号码方面。代码从那`List<Object[]>`？使用

```
em.createNamedQuery("..").getResultList().get(1)[]
// or
em.createNamedQuery("..").getResultList().get(2)[0] 
```

导致错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:14:37.493

最有可能的问题是`getResultList()`返回非泛型`List`，因此您必须`List<Object[]>`先将其转换为。

假设，您的列表至少有一个条目，这应该有效：

```
Employee e = (Employee)((List<Object[]>)em.createNamedQuery("..").getResultList()).get(0)[0]; 
```

*更新*：

仅供参考：根据您使用的 JPA 版本，您可能会得到一个`List<Object>`。在这种情况下，您可以将值转换为`Object[]`：

```
Employee e = (Employee)((Object[])em.createNamedQuery("..").getResultList().get(0))[0]; 
```

# c# - WebParts 上传文件

> ID：10554081
> 
> 赞同：1
> 
> 时间：2012-05-11T15:12:25.243
> 
> 标签：c#, sharepoint, web-parts

有谁知道如何使用允许我选择图像文件并在浏览器上显示图片（例如图像）的浏览按钮创建 Web 部件。

例如，这是 Windows 窗体中按钮处理程序下的等价物：

```
 Image img;
      OpenFileDialog openFileDia = new OpenFileDialog();
      if (openFileDia.ShowDialog() == DialogResult.OK)
      {
          this.img              = Image.FromFile(openFileDia.FileName);
          pictureBox1.Image     = img;
      } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:17:15.177

阅读： http: [//www.codeproject.com/Articles/95954/Sharepoint-WebPart-for-Programmatically-Uploading](http://www.codeproject.com/Articles/95954/Sharepoint-WebPart-for-Programmatically-Uploading)

# .net - 在一台 PC 上拉绳更宽

> ID：10554084
> 
> 赞同：0
> 
> 时间：2012-05-11T15:12:31.520
> 
> 标签：.net, vb.net, gdi+

我正在使用graphic.DrawString 来...画一个字符串。

我指定字体系列、字体大小、字体样式、图形单位。

一切都适用于 50 台计算机，但只有一台，字体“更粗”。字符的高度相同，但由于某种原因，“像素”是宽度的两倍。

这可以用代码修复吗？
可以使用 Windows 设置解决此问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:32:29.083

可以通过确保在所有机器上安装相同的适用字体并确保 Windows 个性化设置相同来修复它，但最终，您的代码不应假设 DrawString 将始终在每台机器上绘制相同宽度的文本。字体是可变的，因此当您选择字体时，每台计算机上实际使用的字体可能不同。如果可能，您应该对应用程序进行编码以处理不同宽度的文本。在绘制之前可以通过调用Graphics.MeasureString获取文本的宽度，如：

```
Dim textSize As SizeF = graphic.MeasureString("text to measure", Me.Font, Me.ClientRectangle.Width) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:45:38.210

我能够修复它，将“使用以下方法平滑屏幕字体的边缘”从清除类型更改为标准。

也可以在代码中通过修改graphic.TextRenderingHint来改变

# css - 尝试排列 Twitter、Pinterest 和 Facebook 按钮

> ID：10554093
> 
> 赞同：1
> 
> 时间：2012-05-11T15:13:04.003
> 
> 标签：css, button, alignment, media, social

在stackoverflow上还有其他一些类似的问题，但我无法从中得到任何东西，所以必须发布我自己的。这是网址...

[http://quoteic.com/part?no=PC68EN302RC25](http://quoteic.com/part?no=PC68EN302RC25)

我希望 3 个按钮位于一条线上并底部对齐。Fiverr 的网站就是一个很好的例子（抱歉，我不让我发布截图）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:03:36.457

将所有按钮放入它们自己的 DIV 中，并使用宽度和 a 设置它们的样式`float:left`，然后将所有这些包装到 DIV 中。这帮助我调整和控制他们的立场。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:06:00.700

你最好的选择，因为它们都略有不同，并且在不同的浏览器中再次不同，所以将每一个都包装在你自己的代码中。例如

```
<div class="btn_facebook"></div>
<div class="btn_twitter"></div> 
```

等等

并将其包装在另一个容器中：

```
<div class="social_buttons"></div> 
```

然后要么将它们向左浮动，要么显示内联块。将每一个设置为相同的高度，它们将尽可能排成一行。

除非您愿意浏览每个浏览器以相对定位来推动它们，否则它们永远不会完美排列。如果您确实想这样做：

```
.social_buttons > div {
    position: relative;
} 
```

和

```
.social_buttons .btn_facebook {
    top: -2px;
} 
```

或者任何显示最好结果的东西。

确保将每个按钮的所有宽度都设置为最小值，否则它们都非常宽。脸书尤其如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:01:08.043

您可以使用无序列表并将每个图像放在列表项中并内联显示。然后，这将在水平线上显示您的链接。您还可以从网站上找到免费使用的社交媒体图标（16 像素或 32 像素等），这样您的所有图标都可以保持一致的大小。

```
<div id="socialmedia">
    <ul>
        <li><a href="http://www.twitter.com" target="_blank"><img src="YourTwitterFileName" /></a></li>
        <li><a href="http://www.pinterest.com" target="_blank"><img src="YourPinterestFileName" /></a></li>
        <li><a href="http://www.facebook.com" target="_blank"><img src="YourFacebookFileName" /></a></li>
    </ul>
</div> 
```

这是您可以用于 ul 的样式

```
#socialmedia ul li {
    display: inline;
    margin-left: 5px;
}   

#socialmedia img {
    border: none;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-11T15:55:27.430

您需要做的是创建以下结构：

```
<table id="social_links_tab">
    <tr>
        <td><a href="http://link_to_twitter_page"><img src="http://src_of_img"/></a></td>
        <td><a href="http://link_to_pinterest_page"><img src="http://src_of_img"/></a></td>
        <td><a href="http://link_to_facebook_page"><img src="http://src_of_img"/></a></td>
    </tr>
</table> 
```

这将有效地将图标水平排列在一起。此外，您可以随意将样式附加到`<table>`内部的特定元素或任何特定元素。

# java - 创建 HTML 链接或按钮以将事件添加到 Lotus Notes 用户的日历

> ID：10554095
> 
> 赞同：0
> 
> 时间：2012-05-11T15:13:07.423
> 
> 标签：java, javascript, html, lotus-notes, lotus

我的客户使用 Lotus Notes 进行日历。我们需要在 SharePoint 上提供事件信息。我正在尝试创建一个 HTML 链接或按钮，我可以在 SharePoint (HTML) 上的自定义显示表单中使用，用户可以单击该链接或按钮将事件添加到他们的 Notes 日历中。到目前为止，我还没有找到办法做到这一点。

我的客户的 Domino 部署中存在一个应用程序（？），它创建了用于 Notes 电子邮件消息的按钮，这些按钮也可以收集响应信息。这个按钮的动作是由在我看来像 Java 的东西处理的。我已经包含了一个示例，以防它是相关的，如果它看起来有帮助，我可以包含所有它，但它很长：

```
 Set CurDb=Session.CurrentDatabase
'Get mail file information from Location document using Notes.ini
    MailServer$ = session.GetEnvironmentString( "MailServer",True)
    MailFile$ = session.GetEnvironmentString( "MailFile",True)
'Set MailDB = session.CurrentDatabase
    If CurDb.Server = ""  Then
            'Attempt to open local mail file
        Set MailDB = session.GetDatabase("", MailFile$) 
        If Not MailDB.IsOpen Then
            Set MailDB = New NotesDatabase(MailServer$, MailFile$)  
            If Not MailDB.IsOpen Then
                Msgbox "Unable to add event to your calendar because your local and server mail file cannot be located.",16, "Notice"
                Exit Sub                  
            End If
        End If          
    Else
            'Attempt to open server replica of mail file
        Set MailDB = New NotesDatabase(MailServer$, MailFile$)  
        If Not MailDB.IsOpen Then
            Msgbox "Unable to add event to your calendar because your server mail file cannot be located.",16, "Notice"
            Exit Sub                  
        End If
    End If 
```

同一个应用程序可以创建一个可以添加到我们当前 Intranet 平台的“网络”版本，但它使用在我看来像自定义“挂钩”的东西来与按钮应用程序和用户日历交互，如果未放置在该平台上的对象内。我在此处包含该片段以防它提供线索：

```
<input type="button" onclick="SendEmailNotification('PTHN-132512')"
value="Send me a Notes Calendar Invitation" id="HTMLWebBtn"> 
```

我想知道在其他地方使用该片段是否像链接到我的源代码中的 .js 文件一样简单，并且正在等待内部管理平台的人员的回复，但经验表明这是一个死胡同。

到目前为止，在 Googlybox 上搜索基本上没有结果。我知道您可以通过将 替换为服务器名称和应用程序/数据库/文档地址（通常是有时非常长的字母数字字符串）来打开 Lotus Notes 的`http://`链接`Notes://`。我发现了一篇文章，其中包含您可以放置​​在 之后的字符串，`Notes://`以便在给定的应用程序（即电子邮件编辑器）中打开一个新文档。但这和我来的时候一样近。

任何帮助，伙计们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:37:49.353

您可以利用 Notes 支持 .ics 文件格式这一事实。打开 ICS 文件时，Notes 可以通过创建新的日历条目来响应。最好的是，这也适用于其他邮件平台，以防您的环境混合。

以下是有关设置 Notes 的一些信息：http: [//www.ibm.com/developerworks/lotus/library/notes85-icalendar/](http://www.ibm.com/developerworks/lotus/library/notes85-icalendar/)

您可以以编程方式生成该 ICS 文件，或者如果您只是想玩玩，有一些在线网站会为您生成一个：http: [//www.pratie.com/lab/icalendar/](http://www.pratie.com/lab/icalendar/)

# c# - 用类和接口定义通用对象

> ID：10554102
> 
> 赞同：4
> 
> 时间：2012-05-11T15:13:18.507
> 
> 标签：c#, generics, inheritance

在使用泛型对象时，我在弄清楚如何要求类扩展接口时遇到了一些麻烦。我发现这很难解释，但我希望在创建我的通用对象时能够需要一个类和一个接口。

我已经创建了我能想到的最简单的版本——希望这能比我能更好地解释我的问题。

```
abstract class Base
{}
class Class1 : Base, IComparable<Base>
{
    public int CompareTo(Base other)
    {
        return GetHashCode().CompareTo(other.GetHashCode());
    }
}
class Class2 : Base, IComparable<Base>
{
    public int CompareTo(Base other)
    {
        return GetHashCode().CompareTo(other.GetHashCode());
    }
}
class Class3 : Base
{}
class Program
{
    // This list should only accept objects that extend (Base & IComparable<Base>)
    public static List<Base> BigList = new List<Base>();

    static void Main(string[] args)
    {
        Class1 c1 = new Class1();
        Class2 c2 = new Class2();
        Class3 c3 = new Class3();
        BigList.Add(c1);
        BigList.Add(c2);
        // This should not be allowed because Class3 does not extend IComparable<Base>
        BigList.Add(c3);

        Check(new Class1());
    }
    public static void Check(Base bb)
    {
        foreach (Base b in BigList)
        {
            // Assert that this is true
            IComparable<Base> c = (IComparable<Base>)b;

            if (c.CompareTo(bb) < 0)
                Console.WriteLine("Less Than");
            else if (c.CompareTo(bb) == 0)
                Console.WriteLine("Equal");
            else if (c.CompareTo(bb) > 0)
                Console.WriteLine("Greater Than");
        }
    }
} 
```

正如您从代码中的内联注释中看到的那样，我希望该列表`BigList`要求添加的对象扩展`Base` **AND**实现`IComparable<Base>`。这并不是真正的多重继承，因为它只是一个类（和一个接口）。

有谁知道这样做的方法？

**编辑**

感谢大家的评论。基本上答案有两种形式：创建一个中级类，或者使用`List<IComparable<Base>>`. #2 不是一个选项，因为 Base 中有我们确实需要的逻辑。#1 是最可行的选择，也是我们不*情愿*的选择。这种方法的问题是这将在实际的类层次结构中增加的混乱和复杂性。

不管 C# 是否不允许我们做我们想做的事，那么我们将不得不使用中间类来做。谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T15:19:22.533

那这个呢：

```
abstract class Base {
}

abstract class Intermediate : Base, IComparable<Base> {
}

class Class1 : Intermediate {
}

class Class2 : Intermediate {
}

class Class3 : Base {
}

public static List<Intermediate> BigList = new List<Intermediate>();
BigList.Add(new Class1()); // ok
BigList.Add(new Class2()); // ok
BigList.Add(new Class3()); // error 
```

当然，仅当您需要实现类`Base`但不需要时才需要这样做`IComparable<Base>`，否则您可以声明`Base`为

```
abstract class Base : IComparable<Base> {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:22:31.823

为什么不创建另一个继承基并实现 IComparable 的类？

```
public class ComparableBase :Base, IComparable<Base>
{
....
}

class Class2 : ComparableBase 
{
    public int CompareTo(Base other)
    {
        return GetHashCode().CompareTo(other.GetHashCode());
    }
}

public static List<ComparableBase > BigList = new List<ComparableBase >(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:24:38.313

如果您将 Bi​​gList 设置为`List<IComparable<Base>>`应该获得您在 Check 方法中显示的行为。

```
public static List<IComparable<Base>> BigList = new List<IComparable<Base>>();
static void Main(string[] args)
{
    Class1 c1 = new Class1();
    Class2 c2 = new Class2();
    Class3 c3 = new Class3();
    BigList.Add(c1);
    BigList.Add(c2);
    // This will now cause a compile error
    // BigList.Add(c3);

    Check(new Class1());
}

public static void Check(Base bb)
{
    foreach (IComparable<Base> c in BigList)
    {
        if (c.CompareTo(bb) < 0)
            Console.WriteLine("Less Than");
        else if (c.CompareTo(bb) == 0)
            Console.WriteLine("Equal");
        else if (c.CompareTo(bb) > 0)
            Console.WriteLine("Greater Than");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:28:05.070

IMO，**没有中间类的**实现可以这样完成：

```
abstract class Base{}

class Class1 : Base, IComparable<Base>{}

class Class2 : Base, IComparable<Base>{}

class Class3 : Base{}

var BigList = new List<IComparable<Base>>();

BigList.Add(new Class1());
BigList.Add(new Class2());
BigList.Add(new Class3()); // error 
```

你可以比较为：

```
public static void Check(Base BB){
 foreach (var c in BigList)
    {
        if (c.CompareTo(bb) < 0)
            Console.WriteLine("Less Than");
        else if (c.CompareTo(bb) == 0)
            Console.WriteLine("Equal");
        else if (c.CompareTo(bb) > 0)
            Console.WriteLine("Greater Than");
    }
} 
```

# jboss - jboss netty 通道缓冲线程安全

> ID：10554103
> 
> 赞同：0
> 
> 时间：2012-05-11T15:13:18.930
> 
> 标签：jboss, netty

我正在编写小型实用程序应用程序（基于 JBoss Netty），它应该针对 http 请求执行一些简单的登录。

想象一个图像缓冲区

```
private static byte[] image = DatatypeConverter.parseBase64Binary("...some base64 data here....");

private static final ChannelBuffer imageBuf = ChannelBuffers.wrappedBuffer(image); 
```

所以，问题是：`imageBuf`跨多个线程共享它以进行编写是否正确？或者我应该为每个响应创建一个新的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:47:58.677

不，跨线程共享 ChannelBuffer 是不安全的。ChannelBuffer 不是线程安全的

# bing-maps - 编辑 bing 地图多边形

> ID：10554104
> 
> 赞同：0
> 
> 时间：2012-05-11T15:13:20.317
> 
> 标签：bing-maps

社区使用哪些技术来编辑 Bing 地图上的多边形？

想到一个矢量绘图程序，您可以选择一条边，添加一个点以平分一条边，移动橡皮筋平分边的点等。

用例是用户绘制了一个多边形，但他们想要在绘制后对其进行调整或调整。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:12:51.487

据我所知，对于您想要完成的工作，没有框架实现可以“开箱即用”。但是，所有的构建块都在那里。您有 Polygon 对象来表示地图上的多边形。对于侧面，您可以使用折线。对于您的顶点，您可以使用图钉。所有这些形状都能够处理自己的鼠标事件，因此只需一点代码和一天的工作，您就可以自己创建一个简单的多边形编辑器。

这个想法是有许多折线段（每个 2 个顶点）围绕您的多边形。这些折线段上会有 mousedown 事件处理程序，因此当用户单击一侧时，您知道他/她单击的位置。使用此信息，您现在可以更新多边形和周围的折线以包含此新顶点。

对于您的顶点，您可以使用图钉将它们可视化。对于每个顶点，提供 mousedown 和 mousemove 事件。当用户点击一个顶点时，mousedown 将触发。这是用户想要移动该顶点的提示，因此您可以启用该顶点的 mousemove 处理程序以使其生效。当用户随后移动他的鼠标时，您将用鼠标移动顶点，同时更新多边形和相关的多段线（或者如果您很懒，则更新所有这些）。

无论如何，这是我为我正在从事的项目所做的。它是一个屋顶测量工具，但您可以看到它具有您想要实现的许多相同功能，即用户可以通过移动顶点来编辑多边形。这是使用常规 v7 API 完成的，因此您也应该能够实现类似的功能。

![在此处输入图像描述](../Images/0870c436fa82738926f00f47c813b16e.png)

# build - 如何在 Gradle 中指定依赖组的属性？

> ID：10554105
> 
> 赞同：2
> 
> 时间：2012-05-11T15:13:28.920
> 
> 标签：build, gradle, dependency-management

使用 Gradle，我希望能够禁用一组依赖项的传递性，同时仍然允许其他依赖项。像这样的东西：

```
// transitivity enabled
compile(
  [group: 'log4j', name: 'log4j', version: '1.2.16'],
  [group: 'commons-beanutils', name: 'commons-beanutils', version: '1.7.0']
)

// transitivity disabled
compile(
  [group: 'commons-collections', name: 'commons-collections', version: '3.2.1'],
  [group: 'commons-lang', name: 'commons-lang', version: '2.6'],
) { 
  transitive = false
} 
```

Gradle 不会接受这种语法。如果我这样做，我*可以*让它工作：

```
compile(group: 'commons-collections', name: 'commons-collections', version: '3.2.1') { transitive = false }
compile(group: 'commons-lang', name: 'commons-lang', version: '2.6']) { transitive = false } 
```

但这需要我指定每个依赖项的属性，而我宁愿将它们组合在一起。

有人对适用于此的语法有建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T17:43:44.963

首先，有一些方法可以简化（或至少缩短）您的声明。例如：

```
compile 'commons-collections:commons-collections:3.2.1@jar'
compile 'commons-lang:commons-lang:2.6@jar' 
```

或者：

```
def nonTransitive = { transitive = false }

compile 'commons-collections:commons-collections:3.2.1', nonTransitive
compile 'commons-lang:commons-lang:2.6', nonTransitive 
```

为了一次创建、配置和添加多个依赖项，您必须引入一些抽象。就像是：

```
def deps(String... notations, Closure config) { 
    def deps = notations.collect { project.dependencies.create(it) }
    project.configure(deps, config)
}

dependencies {
    compile deps('commons-collections:commons-collections:3.2.1', 
            'commons-lang:commons-lang:2.6') { 
        transitive = false
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T02:28:07.367

创建单独的配置，并在所需配置上设置传递 = false。在依赖项中，只需将配置包含到 compile 或它们所属的任何其他配置中

```
configurations {
    apache
    log {
        transitive = false
        visible = false //mark them private configuration if you need to
    }
}

dependencies {
    apache 'commons-collections:commons-collections:3.2.1'
    log 'log4j:log4j:1.2.16'

    compile configurations.apache
    compile configurations.log
} 
```

以上让我禁用了日志相关资源的传递依赖项，而我将默认传递 = true 应用于 apache 配置。

根据 tair 的评论在下面编辑：

这会解决吗？

```
//just to show all configurations and setting transtivity to false
configurations.all.each { config->
    config.transitive = true
    println config.name + ' ' + config.transitive
} 
```

并运行 gradle 依赖项

查看依赖项。我正在使用 Gradle-1.0，并且在使用传递性 false 和 true 时，就显示依赖关系而言，它的行为还可以。

我有一个活动项目，当使用上述方法将传递性转换为 true 时，我有 75 个依赖项，而当传递到 false 时，我有 64 个。

值得做一个类似的检查并检查构建工件。

# flash - 关闭fancybox时IE8屏幕变黑

> ID：10554106
> 
> 赞同：0
> 
> 时间：2012-05-11T15:13:33.353
> 
> 标签：flash, youtube, fancybox

我在youtube上使用fancybox，当我在IE8上关闭fancybox时，屏幕变黑，似乎无法覆盖flash。这真的很奇怪，只发生在 IE8 上。

这是网站。花式框将出现在页面加载时。

谢谢布鲁诺

# javascript - javascript 在 Firefox 上不起作用

> ID：10554108
> 
> 赞同：-1
> 
> 时间：2012-05-11T15:13:38.013
> 
> 标签：javascript

> **可能重复：**
> [为什么用 document.write() 编写 <script> 标签时要拆分它？](https://stackoverflow.com/questions/236073/why-split-the-script-tag-when-writing-it-with-document-write)

我的网站上应该有一个 American Apparel 广告，在右侧栏中，在标题“Bloglovin”和“Twitter”之间。它似乎在 iphone/ipad 上运行良好，但它没有出现在我的计算机上的 Firefox 或 Safari 上。如果有人可以帮助我了解为什么会这样，将不胜感激。

[http://www.lookbookcookbook.com/](http://www.lookbookcookbook.com/)

我正在使用以下代码

```
<!-- JavaScript for Static HTML -->
<script type="text/javascript">
var mpt = new Date();
var mpts = mpt.getTimezoneOffset() + mpt.getTime();
document.write("<scri" + "pt type=\"text\/javascript\" src=\"http:\/\/altfarm.mediaplex.com\/ad\/js\/8975-64333-44152-3\?mpt=" + mpts + "&mpvc=\"><\/scr" + "ipt>");
</script>
 <noscript>
<a href="http://altfarm.mediaplex.com/ad/nc/8975-64333-44152-3">
<img src="http://altfarm.mediaplex.com/ad/nb/8975-64333-44152-3" 
alt="Click Here" border="0" />
</a>
</noscript> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:28:41.360

您正在使用 CloudFlare 的[Rocket Script](http://www.cloudflare.com/wiki/Rocket_Script)，这意味着您不能使用`document.write`（`document.write`无论如何都不应该使用）。

你需要`document.createElement`改用。

```
var script = document.createElement('script');
script.src = "http://altfarm.mediaplex.com/ad/js/8975-64333-44152-3?mpt=" + mpts + "&mpvc=";
document.getElementsByTagName('head')[0].appendChild(script); 
```

编辑：他们的脚本还包含一个`document.write`. 除非您关闭“Rocket Script”，否则您实际上无法在您的网页上使用此广告。

# java - 计费系统 - 编程

> ID：10554114
> 
> 赞同：1
> 
> 时间：2012-05-11T15:13:58.597
> 
> 标签：java, ruby, math

我需要一些关于以下逻辑的输入。

它是一种计费系统，接受输入并具有与之相关的值。

```
A = 2 , 3A = 5
B = 3
C = 1 , 4C = 3 
```

我的代码应该采用 ABCCBAACCA ，输出应该是 16 的值。

到目前为止，我的解决方案是，我正在考虑对字符串中的每个元素进行计数，对于 A ，它们 mod(modulus) 乘以 3，对于 C 乘以 4（如上例所示，在 B 的情况下不需要）每个元素，以便得到结果。

我很困惑我应该使用什么数据结构来实现这样的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:37:06.227

好吧，模数运算符对您没有帮助，因为您每次都会得到 0 是 3 或 5 的倍数，具体取决于您正在评估的字母（如果这就是您要描述的内容，如果我弄错了，对不起）。

我相信最简单的方法是扫描字符串并添加值。

当你遇到第三个 A 时，你只加 1，而不是 2（因为你必须减去 4，然后加 5）与 C 类似，当你遇到第四个 C 时，你只加 0，而不是 1。

您需要 2 个额外的变量来保留 A 和 C 的实例，是的，您可以使用模运算符来了解您是否刚刚到达一个倍数，您必须根据具体情况添加 1 或 0。

希望这个对你有帮助。

编辑：在这里，我做了一个快速的实现。如果您真的需要它，请随意优化它；）

```
 String value = "ABCCBAACCA";
    int numA =0;
    int numC =0;
    int endResult = 0;

    for (int x = 0; x < value.length(); x++)
    {
        if (value.charAt(x) =='A')
        {
            numA = numA +1;

           endResult = endResult + ((numA%3 == 0)?1:2);
        }
        else if (value.charAt(x) =='B')
        {
            endResult = endResult +3;
        }
        else if (value.charAt(x) =='C')
        {
            numC = numC +1;
            endResult = endResult + ((numC%4 == 0)?0:1);
        }
    }

    System.out.println(endResult);  //16 as expected 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:44:23.157

在伪代码中，我相信它会是：

计算所有 A、B 和 C

1.  将 A 除以 3 并乘以 5

2.  模 A 乘以 3 并乘以 2

3.  将 B 乘以 3

4.  将 C 除以 4 并乘以 3

5.  模数 C 的 4

将 5 个结果相加。

在 Ruby 中，它可能像这样：

```
input = "ABCCBAACCA"
letters = ["A", "B", "C"]
total = 0

def score(letter,count)
  if letter == "A"
    ((count/3)*5)+((count%3)*2)
  elsif letter == "B"  
    count*3
  else letter == "C"  
    ((count/4)*3)+(count%4)
  end  
end 

letters.each do |letter|   
  puts "#{letter}: #{score(letter, input.count(letter))}"
  total += score(letter, input.count(letter))
end

puts "Total: #{total}" 
```

产生：

```
A: 7
B: 6
C: 3
Total: 16 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:01:22.273

好吧，我会从这样的事情开始：

```
public static void main(String[] args) {
    // FIXME
    String inputString = null;

    Map<Character, Integer> map = new HashMap<Character, Integer>();

    for (Character c : inputString.toCharArray()) {
        map = countCharacters(map, c);
    }
}

private static Map<Character, Integer> countCharacters(Map<Character, Integer> map,
        Character charatcer) {
    map.put(charatcer,
            (map.get(charatcer) != null) ? map.get(charatcer) + 1 : 
                Integer.valueOf(1));

    return map;
} 
```

然后从第二步到第五步引入**@vlasits**，因为上面的代码是他伪代码的第一步。它通过制作“character”的映射来计算字符串中的所有字符：“its Occurences”，如果之前没有这样的字符，它会将 1 放到映射中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T17:09:30.723

```
class CharBucket
  attr_accessor :count

  def initialize(thresholds)
    @thresholds = thresholds
    @count = 0
  end

  def total
    @thresholds.inject([0, @count]) do |sum_left, a|
      sum = sum_left[0]
      left = sum_left[1]
      sum += (left / a[0]) * a[1]
      left %= a[0]
      [sum, left]
    end[0]
  end
end

a = CharBucket.new({3 => 5, 1 => 2})
b = CharBucket.new({1 => 3})
c = CharBucket.new({4 => 3, 1 => 1})
buckets = {'A' => a, 'B' => b, 'C' => c}

"ABCCBAACCA".each_char{|c| buckets[c].count += 1 }
total = buckets.values.inject(0){|sum, b| sum += b.total} # => 16 
```

# asp.net - IIS 7 上用于多个网站的 httpCompression 目录

> ID：10554115
> 
> 赞同：0
> 
> 时间：2012-05-11T15:14:05.793
> 
> 标签：asp.net, iis, iis-7, iis-7.5, http-compression

**场景：** 在我们公司，我们为我们的网站启用了 httpCompression。该网站（称为主网站）及其预览版都托管在同一个 Web 服务器上。预览版用于测试。

web.config 文件中的压缩设置为

```
 <httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
  <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll"/>
  <dynamicTypes>
    <add mimeType="text/*" enabled="true"/>
    <add mimeType="message/*" enabled="true"/>
    <add mimeType="application/javascript" enabled="true"/>
    <add mimeType="*/*" enabled="false"/>
  </dynamicTypes>
  <staticTypes>
    <add mimeType="text/*" enabled="true"/>
    <add mimeType="message/*" enabled="true"/>
    <add mimeType="application/javascript" enabled="true"/>
    <add mimeType="*/*" enabled="false"/>
  </staticTypes>
</httpCompression>
<urlCompression doStaticCompression="true" doDynamicCompression="true" dynamicCompressionBeforeCache="true"/> 
```

[根据这篇文章](http://www.iis.net/ConfigReference/system.webServer/httpCompression)，压缩文件被临时保存/缓存到配置设置中指定的目录。在我的情况下，它是`%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files`. 我无权访问 Web 服务器来查看这些压缩文件。所以这是我的问题。

1.  压缩文件如何为不同的网站保存/缓存或命名？
2.  假设我对两个网站（预览版和主版）使用相同的压缩目录。如果用户从预览网站请求静态文件，它会被压缩并缓存在目录中。现在，另一个用户从主网站请求相同的文件。服务器是发送预览网站的压缩文件还是再次压缩文件并保存到目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:27:04.310

IIS 创建一个复杂的目录结构，如下所示：

%SystemDrive%\inetpub\temp\IIS 临时压缩文件\(compressionType)\(AppPool)\(WebSite)\compressed files

它不会在 Web 应用程序之间共享相同文件的压缩版本。

因此，为了回答您的问题，该文件将有 2 个压缩版本。

PS - 您也可以在 IIS 7.5 上本地打开压缩并在本地查看此结构。

# compiler-construction - GNAT 支持的目标架构列表？

> ID：10554116
> 
> 赞同：3
> 
> 时间：2012-05-11T15:14:14.570
> 
> 标签：compiler-construction, embedded, ada, gnat, target-platform

我想知道 GNAT 支持哪些 CPU 架构，尤其是在嵌入式领域。Ada 是否也自动支持 gnu C 编译器支持的每个目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:56:24.370

更严重的是，快速阅读`man gcc`表明我在语言和架构之间没有限制。并不是说可能不存在。

有希望的是，声明：

> 如果特定选项的描述未提及源语言，您可以将该选项与所有支持的语言一起使用。

from`man gcc`似乎对您的问题表示“是”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T20:56:36.010

AdaCore 的[嵌入式开发页面](http://www.adacore.com/gnatpro/embedded/)有该列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:44:22.947

这是我为 Freenode 上的#Ada IRC 频道写的事实，它回答了你的问题：

目标x：理论上任何平台都可以被Ada编译器作为目标，实际上它取决于目标的硬件，即如果目标是嵌入式的并且非常有限，那么您可能只能在所述目标上实现Ada的一个子集。或者：查看您感兴趣的特定目标是否可以被 Ada 定位的一个好方法是检查目标 CPU 是否受 GCC 后端支持，如果支持，则查看 GNAT 是否有前端最后，它可能只支持一个子集，它可能根本不支持它，在这种情况下，你必须在编译器的 GNAT 前端做一些工作来支持这个目标。或者：GCC 后端列表可以在[http://gcc.gnu.org/backends.html找到](http://gcc.gnu.org/backends.html) 或者：您可以通过查看 /gcc/ada/gcc-interface/Makefile.in 中的模式匹配行来了解 GNAT 是否支持特定的 CPU/OS 组合，方法是查看类似于“ifeq ($(strip $(filter- out mips% wrs vx%,$(targ))),)" 此模式将 MIPS CPU 与 Wind River Systems vxWorks 操作系统相匹配。或：有关硬件特定选项，请参见 GCC 手册的第 3.17 节，[http ://gcc.gnu.org/onlinedocs](http://gcc.gnu.org/onlinedocs)

我将把上面的链接添加到 AdaCore。

# jquery - jQuery ScrollTo Ajax 不滑动

> ID：10554117
> 
> 赞同：0
> 
> 时间：2012-05-11T15:14:16.147
> 
> 标签：jquery, scrollto

我正在尝试通过 ajax 加载页面，然后使用[jQuery Scroll library](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)在屏幕上水平滑动该内容。

单击链接时，所有其他当前加载的页面都隐藏在 DOM 中，通过 ajax 加载下一页，并调用 scrollTo 滑动到新页面。

如果用户从左到右点击（即内容被加载到前一页下方的 DOM 中），这一切都很好。但是，如果用户从右到左单击链接（即在 DOM 中将页面加载到当前页面上方，以便页面反向滑动），它不会滑动而是直接跳转到该页面。

我有点困惑为什么这张幻灯片在一个方向上起作用，而不是在另一个方向上。如果我预加载 DOM 中的所有页面，它工作正常，所以我假设它与 ScrollTo 如何计算到下一页的宽度/距离有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:07:25.437

我最终通过创建几个占位符 div（左和右）解决了这个问题，其中内容通过 AJAX 加载并根据其在菜单中的页面位置进行动画处理。由于膨胀，将每个页面都加载到 DOM 中是不现实的。

# sql - 为什么我的 update(select from when) 语句拒绝识别我的表别名？

> ID：10554122
> 
> 赞同：1
> 
> 时间：2012-05-11T15:14:40.563
> 
> 标签：sql, oracle, subquery

我正在浏览 AskTom 网站，发现应该是一个非常强大的更新语句工具，但我的语句拒绝接受子查询后的别名。有人可以为我解释一下并可能给出解决方案吗？

```
Update (SELECT T.Date_,T.Name_ 
        FROM TableA T, TableB P
        WHERE P.Date_ = T.Date_
        AND   P.Name_ = T.Name_) SET P.ID = T.Name_ 
```

关于如何运行此类更新可能还有其他问题，那将是一个奖励。在这一点上，我对尝试理解别名问题更感兴趣。我试图加入

```
TableB.ID = TableA.Name_ 
```

但没有运气

具体来说，错误是 ORA-00904 无效标识符。

一如既往地提前感谢。

上述问题已为我解答，但我确实有一些其他问题，因为我试图理解它。

我现在得到 ORA-01779 无法修改映射到非键保留表的列。我想这是指我要更新的表正确吗？因为我可以从视图或任何其他可能没有 pk 或 fk 的适当来源进行更新。

这种类型的更新语句可以与 Oracle 临时表一起使用吗？或者我会遇到问题吗？

我可以使用这种类型的语句和 case 语句来更新 TableA 中的多个列还是会出现问题？

再次感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T15:24:45.877

执行`UPDATE (query)`操作时，您可以在括号外使用的唯一列是查询返回的列的名称 - 在本例中为 Date_ 和 Name_。您在查询中使用的表别名在括号外也无效。

因此，您需要的是：

```
Update (SELECT P.ID ,T.Name_ 
        FROM TableA T, TableB P
        WHERE P.Date_ = T.Date_
        AND   P.Name_ = T.Name_) SET ID = Name_ 
```

# arm - bitbake 在“bitbake nano”上失败

> ID：10554124
> 
> 赞同：1
> 
> 时间：2012-05-11T15:14:45.233
> 
> 标签：arm, beagleboard, angstrom-linux, openembedded

我正在尝试设置 bitbake 和 openembedded，以便在 devkit8000（beagleboard 的克隆）上交叉编译 angstrom 2009.x 的代码。我已关注[此页面](http://www.openembedded.org/wiki/Getting_started)，但当我尝试时

```
$ bitbake nano 
```

我明白了

```
Loading cache: 100% |##############################################################################################################################################################################################| Time: 00:00:00
Loaded 1 entries from dependency cache.
ERROR: Error parsing /home/hnsl/stuff/openembedded/recipes/images/initramfs-kexecboot-image.bb: Could not inherit file classes/rootfs_${IMAGE_PKGTYPE}.bbclass                                                     | ETA:  --:--:--
ERROR: Command execution failed: Exited with 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:11:30.170

显然，我似乎需要更改 Angstrom 的版本。使用

```
"DISTRO="angstrom-2010.x" 
```

在 stuff/build/conf/local.conf 上解决了这个问题。

# linq - 嵌套 linq 查询

> ID：10554126
> 
> 赞同：-2
> 
> 时间：2012-05-11T15:14:47.587
> 
> 标签：linq, nested

我有一个 xml 文件，其中包含我可以反序列化到我的列表中的项目列表： 类如下：

```
 [Serializable()]
   public class cls_item
   {
      #region enum
      public enum itemtype
      {
         cash,
         credit,
         check
      }
      #endregion

      #region properties
      public DateTime Date { get; set; }
      public itemtype Type { get; set; }
      public double Value { get; set; }
      #endregion
   } 
```

加载数据后，根据接收到的数据，我想做一个嵌套的 linq 查询来构建一个树，如下所示：

```
--2005
 |--1月
   |-- 01/01/2005
   |-- 2005 年 1 月 10 日
 |--三月
   |-- 03/05/2005
--2010
 |--1月
   |-- 2010 年 1 月 1 日
   |-- 2010 年 1 月 10 日
 |--三月
   |-- 2010 年 3 月 5 日
...

```

为了得到我想要的结果，我可以对我的数据做的最好和最快的 linq 查询是什么？

我尝试了以下方法：

var grouped = from p in data.items group p by new { month = p.Date.Month, year = p.Date.Year } into d select new { dt = string.Format("{0}/{1}" , d.Key.month, d.Key.year), count = d.Count() };

但需要有另一个层次结构或数据，因此我需要帮助生成嵌套的 Linq 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:34:52.427

这样的事情可能会让你朝着正确的方向前进：

```
var result = from d in myList
             group d by d.Date.Year into g
             select new
                {
                    Year = g.Key,
                    Months = g.GroupBy (x => x.Date.Month)
                        .Select (x => new {Month=x.Key, Dates=x.Select (y => y.Date)})
                }; 
```

# php - PHP 扩展一个类

> ID：10554135
> 
> 赞同：4
> 
> 时间：2012-05-11T15:15:52.797
> 
> 标签：php, oop

我有一个关于在 PHP 中扩展类的问题。

我在 php 网站上看到的示例在方法中只有 1 行代码...如果该方法有大量代码，是否相同？

如果这是基类：

```
class BaseClass {

    public function WithWayTooMuchCode {
      // like 100 lines of code here
    }

} 
```

如果我想使用相同的方法，我是否必须复制所有代码，但只更改 1 或 2 件事？

```
class MyOwnClass extends BaseClass {
     public function WithWayTooMuchCode {
      // like 100 lines of code here

     // do I have to copy all of the other code and then add my code??
    }

} 
```

这对我来说似乎有点不干燥......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:20:30.373

是的，除非这 1 或 2 件事恰好在开头或结尾。您可以通过调用父函数

```
parent::WithWayTooMuchCode(); 
```

您可以将其放置在子/覆盖方法中的任何位置。

如果感觉不 DRY，请考虑将函数拆分为更小的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T15:20:44.410

> 如果我想使用相同的方法，我是否必须复制所有代码，但只更改 1 或 2 件事？

不，您不必复制所有代码，假设您要添加到函数中而不是删除它的一部分。

所以它如下：

```
class BaseClass {

    public function WithWayTooMuchCode {
      // like 100 lines of code here
    }

}

class MyOwnClass extends BaseClass {

    public function WithWayTooMuchCode { 
        parent::WithWayTooMuchCode();
        //additionally, do something else
    }

}

$moc = new MyOwnClass();
$moc->WithWayTooMuchCode(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T15:24:50.430

您可以使用 parent::WithWayTooMuchCode() 来执行父方法，然后您可以添加代码。它看起来像这样：

```
class MyOwnClass extends BaseClass {
     public function WithWayTooMuchCode {
      parent::WithWayTooMuchCode()

     // do I have to copy all of the other code and then add my code??
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:25:44.097

您可以为要在父类中单独执行的操作编写一个单独的函数，然后以您的方式调用。

换句话说，把你需要做的事情分开，然后为它们创建一个函数。并在子类中分别调用它们。子类中的最终函数将调用父类函数以及那些单独的函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T15:27:47.350

你有几个选择。假设;

```
class BaseClass {

    public function WithWayTooMuchCode {
      // like 100 lines of code here
       }
    } 
```

你可以做

```
class MyOwnClass extends BaseClass {
     public function AnotherFunction() {
         // put other code here
    }

} 
```

这允许您执行 MyOwnClass->AnotherFunction() 和 MyOwnClass->WithWayTooMuchCode()

或者你可以做

```
class MyOwnClass extends BaseClass {
     public function WithWayTooMuchCode() {
         // put new code here
    }

} 
```

这将允许您运行 MyOwnClass->WithWayTooMuchCode() 并且只会运行“新代码”，而不是“100 行”。

最后你可以做

```
class MyOwnClass extends BaseClass {
     public function WithWayTooMuchCode() {
         parent::WithWayTooMuchCode();
         // Do more processing
    }

} 
```

这将允许您运行 MyOwnClass->WithWayTooMuchCode() 将运行“100 行代码”和新代码。您可以在新代码之前/之后/期间放置父级，以便您可以根据需要对其进行调整

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T15:30:50.953

除了其他答案之外，我应该指出，这个问题可以通过事件来解决。它们是一种确定类中点的方法，您可以从外部添加自己的功能。如果您可以控制代码库和时间/倾向，您可能需要考虑实现此功能。不幸的是，PHP 并不像 C# 那样直接支持它们，所以您必须自己[动手](http://www.devshed.com/c/a/PHP/Simulating-Events-with-PHP-5/)。

如果您只在一个地方遇到此问题，我怀疑您是否应该打扰，但如果它正在成为一种模式，您可能需要考虑这种方法。

# javascript - 加载点击链接

> ID：10554137
> 
> 赞同：1
> 
> 时间：2012-05-11T15:16:01.823
> 
> 标签：javascript, jquery

目前，仅当用户单击链接时才会加载以下代码。

我希望在加载页面时无需用户点击。

```
<script>
$(document).ready(function() {
    // Support for AJAX loaded modal window
    $(document).on('click', '.btn-modal', function() {
        $.get($(this).attr('data-target'), function(data) {
            $('#modal').html(data);
            $('#modal').modal('show');
        }, 'html');
    });
});​
</script>

<!-- Modal window to load dynamic content -->

<div class="modal hide fade customDialog" id="modal"></div>
<a class="btn btn-modal" data-target="page.html" >Launch Modal</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:19:58.057

```
 $(document).ready(function() {

        // Support for AJAX loaded modal window
        $(document).on('click','.btn-modal',function() {

            $.get($(this).attr('data-target'), function(data) {
             $('#modal').html(data);
             $('#modal').modal('show');
           }, 'html');
       });

      // here write
      $('.btn-modal').click();
     // if you have multiple button then keep filter
     // eg.
     // $('.btn-modal:eq(0)').click(); // for first button
     // $('.btn-modal:eq(1)').click(); // for second button and so more
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:17:06.053

只需将其添加到`$(document).ready()`处理程序的末尾：

```
$('.btn-modal:first').click(); 
```

# java - 使用 Twilio 发送短信后如何确保短信通过

> ID：10554138
> 
> 赞同：3
> 
> 时间：2012-05-11T15:16:02.120
> 
> 标签：java, twilio

我正在使用网站上提供的 Twilio java 包装器并开始进行一些测试。我能够发送成功接收的短信。但是，我想确保消息已成功发送，并且 Twilio 没有遇到任何问题（电话号码错误或任何原因）。

我了解当您向 Twilio 发出 REST 请求以发送 SMS 时，Twilio 会以状态响应。我怎么能得到这个回应？

这是我找到的解释页面：http: [//www.twilio.com/docs/howto/sms-notifications-and-alerts](http://www.twilio.com/docs/howto/sms-notifications-and-alerts)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:04:35.753

如果您在请求发送 SMS 时指定了 StatusCallback URL，我们将在消息处理完成后向您提供的回调 URL 发出请求，参数为 SmsStatus=sent 或 SmsStatus=failed。您可以使用此信息对 SMS 消息进行更多处理。这里有更多信息：http: [//www.twilio.com/docs/api/rest/sending-sms#post-parameters-optional](http://www.twilio.com/docs/api/rest/sending-sms#post-parameters-optional)

或者，如果您继续使用 SMS 消息 Sid，您应该能够查询 API 以获取消息并在响应中获取状态。因此，如果 sid 是 SM123，则发出 GET 请求`https://api.twilio.com/2010-04-01/Accounts/AC123/SMS/Messages/SM123.json`应该返回一个带有 SMS 消息状态的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:19:43.640

我记得响应来自您的网址，并且可以通过 ID 进行匹配。在发送到 SMSMessages 的 REST 帖子中，您可以指定一个 statuscallback url，Twilio 会将状态消息发布到您的 url。

当您在您的网站上收到该帖子时，您可以记录它或采取您需要的任何其他操作，例如重试或使用其他通信方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-20T20:41:52.620

在 2020 年，使用 Java SDK，您现在可以`MessageFetcher`使用该 SID 创建一个实例，然后调用`fetch`以请求`Message`实例，直到其`getStatus`返回“已交付”、“未交付”或“失败”。

# jquery - 指向同一页面上的位置的链接不匹配

> ID：10554139
> 
> 赞同：0
> 
> 时间：2012-05-11T15:16:05.490
> 
> 标签：jquery, css, scroll, scrollview, css-transitions

我需要你的帮助。

我制作了一个导航栏，链接到同一页面上的锚点位置，允许在单击时向下滚动视口（没什么复杂的）。

问题：顶部有一个很大的封面页，它使用网络转换并将高度缩小为 0。导航链接认为有一个大页面挡住了路，向下滚动得太远了。

有没有人有办法解决吗？？也许 Jquery 检测到 scrollTop() 并使用 if 语句来调整/偏移() 位置？

这是链接：[www.imbenton.com][1]

代码：

```
 var $window = $(window);    
    $window.bind('scroll', function(){  
    var pos = $(window).scrollTop();    

        if (pos > 2){
            $('#cover').addClass("alt");
            $('#cover img').addClass("alt");
            $('.logo').addClass("alt");
            $('nav').addClass("still");
            $('.navhead').addClass("still");
        }   
        if (pos < 1){
            $('nav').removeClass("alt");    
            $('#cover').removeClass("alt");
            $('#cover img').removeClass("alt");         
            $('.logo').removeClass("alt");
            $('nav').removeClass("still");
            $('.navhead').removeClass("still");
        }       
}); 
```

------------ CSS ----------

```
#cover img{ 
    max-width: 90%; 
    padding: 300px 0 600px 0;
    margin: 0 auto;
  -webkit-transition: all 0.8s ease-out;
     -moz-transition: all 0.8s ease-out;
      -ms-transition: all 0.8s ease-out;
       -o-transition: all 0.8s ease-out;
          transition: all 0.8s ease-out;
}

#cover img.alt{
background: url("dvsup.png") repeat fixed;  
    max-width: 0%;  
    padding: 100px 0;
    margin: 0 auto;
} 

nav {
    position: fixed;
    width: 100%;
    top: 173px;
    padding: 0px 0 5px 0;
    text-align: center;
    height: auto;
    -webkit-transition: all 0.8s ease-out;
    -moz-transition: all 0.8s ease-out;
    -ms-transition: all 0.8s ease-out;
    -o-transition: all 0.8s ease-out;
    transition: all 0.8s ease-out;
    z-index: 999;

}
nav.still{
    position: fixed;
    top: -980px;
    padding-top: 900px;
    background: url("dvsup.png") repeat fixed;  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:28:39.013

该页面有点酷，但也有点糟糕的体验。你能发布一些关于它是如何工作的代码吗？

您始终可以将封面页作为顶部的叠加层，这样可以正确计算高度，或者如果您知道计算错误的高度差，您可以随时调整滚动 y 位置

更新：

我有一个未经测试的想法，使用 jquery 将填充或边距放在内容的顶部（不是封面）。这个空间应该等于封面的高度。这可能会更正计算，您将不得不对其进行测试。你也可以发布一些html吗？除非链接只是内部链接，否则不要担心 html

# java - 你如何在java中编写零拷贝？主要区别是什么

> ID：10554142
> 
> 赞同：9
> 
> 时间：2012-05-11T15:16:15.287
> 
> 标签：java, file-io, zero-copy

我正在阅读有关如何使用 java nio 库来利用称为“零复制”的 O/S 级别的文件传输/缓冲的信息。

那么您创建/写入文件的方式有什么区别？使用零拷贝有什么缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T15:33:51.117

零拷贝意味着你的程序不会将数据从内核空间传输到用户空间等等。这是更快的好文章，可以在这里找到：http: [//www.ibm.com/developerworks/library/j-zerocopy/](http://www.ibm.com/developerworks/library/j-zerocopy/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T15:32:25.570

零拷贝是一种技术，应用程序不再是从磁盘传输数据到套接字的“中间人”。使用零拷贝的应用程序请求内核直接将数据从磁盘文件复制到套接字，而不经过应用程序，这样可以提高性能并减少上下文切换。

这完全取决于应用程序将如何处理从磁盘读取的数据。如果它是一个通过读取文件并通过套接字中继它们来提供大量静态内容的 Web 应用程序，那么零拷贝是获得更好性能的方法。但是，如果应用程序在本地使用数据（以某种方式对其进行处理然后将其写回，或者在本地显示它而不将其持久化），您将不会使用零拷贝。

这篇关于零拷贝的[IBM DeveloperWorks 文章值得一读。](https://www.ibm.com/developerworks/library/j-zerocopy/)

Java 中文件 I/O 的其他方式是通过使用基于您想要读/写的文件类型的 Stream 类。这涉及缓冲和非缓冲流，尽管通常缓冲流承诺更好的性能，因为它们导致更少的 I/O 搜索周期，因此更少的上下文切换。

# asp.net-mvc-4 - Upshotjs 和 Web API

> ID：10554145
> 
> 赞同：1
> 
> 时间：2012-05-11T15:16:23.620
> 
> 标签：asp.net-mvc-4, upshot

我在 MVC4 SPA 项目中使用 Upshotjs 和淘汰赛来创建一个简单的博客站点。我正在尝试启用基于角色的身份验证，以便只有注册用户才能发布博客。

为此，我在 DbDataController AddBlog 方法上有一个授权过滤器，它为未经授权的用户传回 401。这工作正常，并且触发了发起 dataSource.commitChanges 调用中的错误回调函数，但是如何从该函数获取错误详细信息？

我已经尝试过 dataSource.getEntityErrors 方法，但这里面什么都没有。

感谢任何帮助。

# visual-studio-2010 - 是否仍然可以为 Visual Studio 安装 PerfWatson？

> ID：10554147
> 
> 赞同：0
> 
> 时间：2012-05-11T15:16:28.033
> 
> 标签：visual-studio-2010, perfwatson

很久以前，[Scott Hanselman 谈到了 PerfWatson](https://www.hanselminutes.com/289/inside-visual-studio-performance-and-perfwatson-with-phil-price)。我最终决定在 Visual Studio 中安装此扩展，但该扩展似乎不再可供公众使用（执行搜索或单击[PerfWatson Monitor 扩展上的相应链接）](http://visualstudiogallery.msdn.microsoft.com/a3c888f2-40e0-4370-83e0-2952febf9e4f)。

是否有 PerfWatson 的替代品，还是已完全淘汰？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T12:52:51.793

[PerfWatson 扩展现已推出](http://visualstudiogallery.msdn.microsoft.com/fa85b17d-3df2-49b1-bee6-71527ffef441?SRC=Home)，并于 5 月 24 日更新。第一段说：

> Visual Studio 团队不再收集 Visual Studio 2010 的 PerfWatson 报告。您的报告帮助我们确定了对您影响最大的问题，您可以在 Visual Studio 11 Beta 中看到改进。PerfWatson 扩展包含在 VS11 Beta 版本中。如果您想使用 PerfWatson 自动报告您遇到的任何响应问题，请下载并试用 VS11 Beta。

好像已经不值钱了。

## 2017 年 7 月更新

PerfWatson 似乎可作为[2012、2013、2015 和 2017 的 Visual Studio 扩展使用](https://marketplace.visualstudio.com/items?itemName=PaulHarrington.PerfWatsonMonitor-9621)。

[Paul Harrington](https://social.msdn.microsoft.com/profile/paul%20harrington/)似乎是微软的一名软件工程师，但不知道扩展的目的是否保持不变。

# php - Jquery $.get() 方法从 root.Why 获取 url

> ID：10554149
> 
> 赞同：0
> 
> 时间：2012-05-11T15:16:56.880
> 
> 标签：php, javascript, jquery, function, directory

我有一个根文件夹 www 有一个名为 myweb 的文件夹，其中存在两个页面 raw.php 和成熟.php。现在我的 raw.php 脚本代码

```
<script>
 $.get("ripe.php", function(result){
 $("body").append(result);
  });
</script> 
```

不工作。工作代码是

```
<script>
 $.get("myweb/ripe.php", function(result){
 $("body").append(result);
  });
</script> 
```

现在我想知道为什么它从 jquery 的根文件夹中获取 url。我怎样才能让它获取相对于当前文件夹的 url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:20:08.187

这取决于您正在执行该 JS 的文件所在的位置。

如果它位于，`http://www.mydomain.com/myweb/raw.php`那么成熟.php 也必须在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:52:08.830

发出 ajax 请求时，当前文件夹（标记为 ./ 或缺少该文件夹）是被调用的 html 文件的位置。如果您的 html 文件位于根目录中，则所有 ajax 请求都将相对于根目录。

.htaccess 文件也会影响文件路径。

示例：假设 www 文件夹是您的根目录，并且您具有以下结构：

```
www/
--->index.php
--->myweb/
--->----->script.js 
```

当您在 index.php 上时，script.js 发出的所有请求都是相对于 index.php 而不是 script.js 完成的。你`myweb/ripe.php`的是相对路径，不是绝对的。这告诉我您的索引文件位于 myweb 文件夹之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:30:53.007

如果您在其中运行 AJAX 脚本，`http://localhost/index.php`那么这将是正确的结果，但是如果 AJAX 脚本位于`http://localhost/myweb/index.php`ajax 调用中，则应该是相对的。

# facebook - Kodak Kiosk Facebook 实施

> ID：10554154
> 
> 赞同：2
> 
> 时间：2012-05-11T15:17:12.167
> 
> 标签：facebook, facebook-graph-api, kiosk

如果您观看下面的视频，柯达已将 Facebook 集成到他们的信息亭中，因此您可以打印您的 Facebook 照片。

[http://www.kodak.com/global/en/consumer/kiosk/pff/printFromFacebook.jhtml?pq-path=164/7959/2301161](http://www.kodak.com/global/en/consumer/kiosk/pff/printFromFacebook.jhtml?pq-path=164/7959/2301161)

我的问题是他们如何在不使用授权对话框的情况下实施授权？他们只需输入用户名和密码并列出照片。我找不到任何关于以这种方式授权的文档，这让我觉得这是一些特殊的实现。我错过了什么吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:23:50.100

我认为你是对的，这是一个特殊的实现。来自[Facebook API 服务条款](http://developers.facebook.com/policy/)：

> 您不得包含代理、请求或收集 Facebook 用户名或密码的功能。

FIOS 也做了类似的事情，这让我相信还有另一种（不一定是公开的）方式来以这种方式进行身份验证。

# spring - spring security：我可以使用 EL（或其他方式）将页面范围属性传递给 spring 安全标签吗？

> ID：10554156
> 
> 赞同：1
> 
> 时间：2012-05-11T15:17:17.847
> 
> 标签：spring, spring-security, spring-3

以下工作正常：

```
<sec:authorize access="canViewUser(AMIT)">
    //SOMETHING TO BE SECURED
</sec:authorize> 
```

但是，我想做类似的事情：

```
<sec:authorize access="canViewUser(${userId})">
    //SOMETHING TO BE SECURED
</sec:authorize> 
```

但是 Spring 安全标签似乎不支持 EL，这给出了错误：

> 根据标记文件中的 TLD 或属性指令，属性访问不接受任何表达式

是否有任何解决方法可以将页面范围属性传递给这些标签？甚至可以将 scriptlet 解决方案视为最后的手段。

另外，TLD 在哪里提到它不接受表达式？我检查了**TLD**文件中的 spring 安全标签，它似乎没有在任何地方表明这个东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:50:13.223

我必须编写一个自定义**TLD**文件，其选项与原始 spring security tld 文件几乎相同，除了以下几行：

```
<attribute>
            <name>access</name>
            <required>false</required>
            <rtexprvalue>true</rtexprvalue>
            <type>java.lang.String</type>
            <description>
                A Spring-EL expression which is supported by the WebSecurityExpressionHandler
                in the application context. The latter will be used to evaluate the expression.
            </description>
</attribute> 
```

它替换了原始 TLD 中属性“访问”的描述。**将url**属性也更改为任何其他值。这个 tld，我放在 WEB-INF 下并在我的 jsp 中使用它。

希望在未来的版本中，此功能将在 Spring 安全性中默认存在。

# mysql - ROR 初学者，为什么我的查询的一个版本有效，而另一个版本无效

> ID：10554157
> 
> 赞同：0
> 
> 时间：2012-05-11T15:17:20.187
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

以下工作正常：

```
def self.already_joined?(days_event,user)
    already_joined=DaysEventsUser.where(:user_id=>user, :days_events_id=>days_event)
    if !already_joined.empty?
        return true
    end
end 
```

但以下没有：

```
def self.already_joined?(days_event,user)
already_joined=DaysEventsUser.where("user_id=>? AND days_events_id=>?",user,days_event)
if !already_joined.empty?
    return true
end
end 
```

我的理解是第二个更安全，并且查询本身似乎可以正常工作，但是一旦我尝试测量它是否返回值，我就会收到错误消息：

Mysql2::Error: 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '=>37 AND days_events_id=>'20')' 附近使用正确的语法： SELECT COUNT(*) FROM `days_events_users` WHERE (user_id=>37 AND days_events_id=> '20')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:28:40.923

```
already_joined=DaysEventsUser.where("user_id= ? AND days_events_id= ?",user,days_event) 
```

# c# - 使用 .NET 模拟 DTSExec /REP EWCDI

> ID：10554159
> 
> 赞同：1
> 
> 时间：2012-05-11T15:17:25.373
> 
> 标签：c#, .net, ssis

使用库[microsoft.sqlserver.dts.runtime.package](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.package.aspx)是否可以将 DTEXEC (/REP EWCDI) 使用的等效选项从 .NET 推送到 SSIS 包？? （[/REP EWCDI 是 DTEXEC 的一个报告功能](http://msdn.microsoft.com/en-ca/library/ms162810%28v=sql.105%29.aspx)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:53:58.157

/REP 命令行选项是 DTEXEC.EXE 的一项功能。

DTEXEC（在概念上）只是一个命令行接口，用于启用执行 ssis 包的类，您已经在问题中链接到该包。

当您使用这些类自己启动包时，您也需要自己提供报告功能。这是通过创建派生类[DefaultEvents](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.defaultevents.aspx)类来完成的。在那里，您覆盖所有 OnError、OnInformation 等方法，将输出重定向到您想要的位置（Console.Error 用于错误和警告；Console.Out 用于其他消息）。

如果您想控制输出哪些消息，就像 DTEXEC 通过让您使用 /REP 选项指定级别来实现的那样，您也必须自己提供。例如。通过在派生事件类上具有相应的标志/属性，您可以在实际打印消息之前检查 On* 方法。

最后，如果您想拥有与 DTEXEC 完全相同的消息格式（例如“开始错误”“结束错误”块），您还必须在派生事件类中模拟它。

如果真的没有[这个](http://msdn.microsoft.com/en-us/library/ms136090.aspx)MSDN 页面显示的那么难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:34:43.307

在此处查看“从正在运行的包中捕获事件”下的示例：

[http://msdn.microsoft.com/en-us/library/ms136090.aspx](http://msdn.microsoft.com/en-us/library/ms136090.aspx)

此示例也可以扩展为包括其他事件（OnInformation、OnWarning...）。

# php - 如何从每个表行传递选项值？

> ID：10554166
> 
> 赞同：0
> 
> 时间：2012-05-11T15:17:50.697
> 
> 标签：php, select, options

我正在创建一个表格，其中包含每个单元格中的选项。这些选项是从数据库表中接收的。由于每一行都有一个选项单元格，我必须从每一行接收值。在选择标签中，“名称”随行递增。但我只得到最后一行的值。

在此处附上代码部分。

```
for ($i = 1; $i <= $_GET['pno']; $i++) {
                echo'<tr>';
                echo "<td>$i</td>";
                echo '<td><select name="prod_$i">'; echo "prod_$i";
                //Query for production table gets processed.
                $qry_pr="SELECT * FROM production";
                $result_pr=mysql_query($qry_pr);
                $rows_pr=mysql_affected_rows($con);
                //Production options get filled from the table data.
                for($j=0;$j<=$rows_pr;$j++)
                {
                    $res_arr_pr=mysql_fetch_array($result_pr);
                    echo "<option value=$res_arr_pr[0]>$res_arr_pr[1]</option>";
                    //$res++;
                }
                //mysql_close($con);
                echo '</select></td>';
                echo '<td><select name="prod_mu_$i">';
                //Query for measurement_unit table gets processed.
                $qry_mu="SELECT * FROM measurement_unit";
                $result_mu=mysql_query($qry_mu);
                $rows_mu=mysql_affected_rows($con);
                //Unit options get filled from the table data
                for($k=0;$k<=$rows_mu;$k++)
                {
                    $res_arr_mu=mysql_fetch_array($result_mu);
                    echo "<option value=$res_arr_mu[0]>$res_arr_mu[1]</option>";
                }
                echo '</td>';
                echo '</tr>'; echo "prod_$i";
            }
            echo'</table><br>'; 
```

希望我对查询很清楚。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T08:22:35.390

您已将 SQL 查询置于 for 循环中，使其变得沉重。因为它将一遍又一遍地执行相同的查询。如果您稍微调整一下代码，您可以使用执行单个查询并将其用于所有循环迭代。

```
<?php
//initialize blank 
$productions = $measurements = '';

// create the production select box
$qry_pr="SELECT * FROM production";
$result_pr=mysql_query($qry_pr);
if( mysql_num_rows($result_pr) )
{
    $productions .= "<select name='prod_%index%'>";
    while( $rec_pr = mysql_fetch_row($result_pr) )
    {
        $productions .= "<option value='{$rec_pr[0]}'>{$rec_pr[1]}</option>";
    }
    $productions .= "</select>";
}

// create the measurement select box
$qry_mu="SELECT * FROM measurement_unit";
$result_mu=mysql_query($qry_mu);
if( mysql_num_rows($result_mu) )
{
    $measurements .= "<select name='prod_mu_%index%'>";
    while( $rec_mu = mysql_fetch_array($result_mu) )
    {
        $measurements .= "<option value='{$rec_mu[0]}'>{$rec_mu[1]}</option>";
    }
    $measurements .= "</select>";
}
?>

<table>
<?php for($i=1;$i<=$_GET['pno'];$i++): ?>
<tr>
    <td><?php echo str_replace('%index%',$i,$productions); ?></td>
    <td><?php echo str_replace('%index%',$i,$measurements); ?></td>
</tr>
<?php endfor; ?>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:22:52.420

mysql_affected_rows 只会给你最后一个 INSERT、UPDATE、REPLACE 或 DELETE 查询受影响的行数。您执行 SELECT，因此该`$rows_mu`值将是错误的。

代替：

```
$rows_mu=mysql_affected_rows($con);
//Unit options get filled from the table data
for($k=0;$k<=$rows_mu;$k++)
{
    $res_arr_mu=mysql_fetch_array($result_mu);
    echo "<option value=$res_arr_mu[0]>$res_arr_mu[1]</option>";
} 
```

尝试这个：

```
//Unit options get filled from the table data
while ($res_arr_mu = mysql_fetch_array($result_mu)) 
{
   echo "<option value=$res_arr_mu[0]>$res_arr_mu[1]</option>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:23:12.403

改变：

```
echo '<td><select name="prod_$i">'; echo "prod_$i"; 
```

至：

```
echo '<td><select name="prod_' . $i . '[]">'; echo "prod_$i"; 
```

# jquery - 使用相对位置

> ID：10554167
> 
> 赞同：3
> 
> 时间：2012-05-11T15:17:55.507
> 
> 标签：jquery, html, css

我需要在我的 Web 应用程序中进行一些设计调整。这是示例[功能](http://jsfiddle.net/rkumarnirmal/FSDPH/5/)

你可以看到黑色的可移动盒子。转到**TEXT**部分并在其中键入一些文本。同时，您可以在页面顶部看到它。所以这里的问题是，当在字段上键入文本时，您可以看到框稍微向底部移动。这不应该发生，我该如何控制它？我尝试在**#text-preview上使用****position: relative**，但没​​有用。

 **我正在使用一些其他功能，例如我无法在 jsfiddle 中显示的字体大小滑块，所以如果滑块移动字体大小会增加并且框根据文本大小从上到下移动，反之亦然不好。

那么如何控制盒子在其中执行某些操作时不移动呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:21:13.943

你可以这样写：

```
<div id="name-preview" style="position: absolute;">
    <p id="np"></p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:24:38.900

如果您添加`float:left`，`#text-preview`那么它将保持原样

[例子](http://jsfiddle.net/JcJeN/ "例子")**

# .net - Couchbase .NET app.config 中的多个存储桶

> ID：10554175
> 
> 赞同：3
> 
> 时间：2012-05-11T15:18:39.687
> 
> 标签：.net, app-config, couchbase

Couchbase .Net 手册说我可以通过这种方式配置我的客户端：

```
<couchbase><servers bucket="default" bucketPassword="">
  <add uri="http://192.168.0.2:8091/pools/default"/>
  <add uri="http://192.168.0.3:8091/pools/default"/>
</servers></couchbase> 
```

有没有办法在 app.config 中定义多个存储桶，然后在我的应用程序中切换它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T12:45:26.853

根据约翰的建议，我使用了这样的配置：

```
<configuration>
  <configSections>
    <sectionGroup name="couchbase">
      <section name="bucket-1" type="Couchbase.Configuration.CouchbaseClientSection, Couchbase"/>
      ...
      <section name="bucket-N" type="Couchbase.Configuration.CouchbaseClientSection, Couchbase"/>
    </sectionGroup>
  </configSections>
  ...
  <couchbase>
    <bucket-1>
      <servers bucket="bucket-1" bucketPassword="pass">
        <add uri="http://10.0.0.1:8091/pools/default"/>
        <add uri="http://10.0.0.2:8091/pools/default"/>
      </servers>
    </bucket-1>
  </couchbase>
  ...
</configuration> 
```

然后在应用代码中你可以得到bucket的客户端：

```
var client = new CouchbaseClient((CouchbaseClientSection)ConfigurationManager.GetSection("couchbase/bucket-1")); 
```

如果 .Net couchbase 库的开发人员实现读取这样的配置，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:00:33.110

我找到了解决上述问题的方法。

我们可以使用 CouchbaseClient 构造函数重载并传入存储桶名称和密码。例如： var client = new CouchbaseClient("default","");

不需要将所有存储桶配置放在 app 或 web.cong 文件中。

# android - 在 ActivityInstrumentationTestCase2 中阻塞直到 Loader 完成

> ID：10554182
> 
> 赞同：2
> 
> 时间：2012-05-11T15:18:48.877
> 
> 标签：android, android-testing

我正在通过扩展 ActivityInstrumentationTestCase2 编写一个 Android Activity 测试用例。我正在测试的活动将工作卸载到加载程序。Activity 本身就是 LoaderCallback。

问题是测试用例在加载器完成其工作之前完成（因为加载器显然在测试用例之外的另一个线程上运行）。我怎样才能让测试用例等到加载器完成它的工作。

我的一个想法是加入底层的 Loader 线程。但是，我似乎找不到访问底层线程的方法。此外，加载程序线程可能不会立即启动，因此不确定这是正确的方法。

另一种方法是在测试用例中注册一个 LoaderListener，但似乎一个特定的 Loader 只能有一个 LoaderListener。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:01:31.320

您可以设置最大超时。每隔一段时间检查加载程序中的空值，直到达到最大超时。一旦设置了最大超时，测试就会失败，因为加载程序不会加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:20:15.920

尝试使用互斥锁或 ReentrantLock 来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T22:13:53.537

您需要在运行测试用例的线程与您等待完成的后台线程或操作之间使用一些 Java 同步方法。

我使用了倒计时锁存器。

在您的测试代码中（在我的情况下为活动）

创建活动时对其进行初始化

*   私有最终 CountDownLatch 信号 = 新 CountDownLatch(1);

当 Loader 完成时，让您的代码表示它已完成：

*   信号.countDown();

我在我的测试代码中为闩锁提供了一个吸气剂

*   public CountDownLatch getSignal() { 返回信号；}

在您的测试中：

*   启动活动（启动后台线程）
    *   MainActivity 活动 = getActivity();
*   让闩锁等待
    *   CountDownLatch 信号 = activity.getSignal();
*   做其他事情，然后等待后台任务结束
    *   if (!signal.await(30, TimeUnit.SECONDS)) { fail("等待后台任务完成超时"); }

这适用于在后台线程中完成的工作，AsyncTasks 等由您的活动的 onCreate() 方法启动...

# json - 找不到模块“commonjs-utils”？

> ID：10554185
> 
> 赞同：1
> 
> 时间：2012-05-11T15:18:55.420
> 
> 标签：json, node.js, commonjs

我正在尝试启动并运行 JSON 模式验证器：

[http://davidwalsh.name/json-validation](http://davidwalsh.name/json-validation)

我通过 brew 安装了节点，并安装了 commonjs-utils，但不知道如何要求它：

```
bash-3.2$ npm install commonjs-utils
commonjs-utils@0.1.1 ./node_modules/commonjs-utils 
bash-3.2$ node
> require('commonjs-utils')
Error: Cannot find module 'commonjs-utils'
    at Function._resolveFilename (module.js:317:11)
    at Function._load (module.js:262:25)
    at require (module.js:346:19)
    at [object Context]:1:1
    at Interface.<anonymous> (repl.js:171:22)
    at Interface.emit (events.js:64:17)
    at Interface._onLine (readline.js:153:10)
    at Interface._line (readline.js:408:8)
    at Interface._ttyWrite (readline.js:585:14)
    at ReadStream.<anonymous> (readline.js:73:12)
> var sys = require('sys'), fs = require('fs');
> var validate = require('commonjs-utils/json-schema').validate;
Error: Cannot find module 'commonjs-utils/json-schema'
    at Function._resolveFilename (module.js:317:11)
    at Function._load (module.js:262:25)
    at require (module.js:346:19)
    at [object Context]:1:16
    at Interface.<anonymous> (repl.js:171:22)
    at Interface.emit (events.js:64:17)
    at Interface._onLine (readline.js:153:10)
    at Interface._line (readline.js:408:8)
    at Interface._ttyWrite (readline.js:585:14)
    at ReadStream.<anonymous> (readline.js:73:12) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:57:46.493

试试这个：

```
require('json-schema'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-08-09T06:00:49.673

我尝试了来自“David Walsh”（[链接](https://davidwalsh.name/json-validation)）的相同代码，但我得到了同样的错误。就我而言，在将原始代码的第 6 行更改如下后，我可以看到验证功能起作用。

```
[OLD] var validate = require('commonjs-utils/json-schema').validate;
[NEW] var validate = require('commonjs-utils/lib/json-schema').validate; 
```

# eclipse - 如何在 Eclipse e4 应用程序中获取视图部件实例？

> ID：10554186
> 
> 赞同：4
> 
> 时间：2012-05-11T15:19:00.223
> 
> 标签：eclipse

我试图在 Eclipse e4 应用程序中获取视图部件的实例，但我找不到 PlatformUI 类。自 Eclipse 3 以来名称是否已更改，还是位于不同的包中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T02:27:23.523

查看[Eclipse e4 Parts](http://www.vogella.com/articles/Eclipse4RCP/article.html#parts)时：

![e4 部分](../Images/ed206fa3eaba0954878b968461b56f21.png)

像[371405](https://bugs.eclipse.org/bugs/show_bug.cgi?id=371405)这样的错误可能很有启发性：

## org.eclipse.ui.presentations

> 这个 API 在 4.2 中不再工作，我们也从未打算让它工作。
> 它与 4.2 中的可插拔渲染故事不兼容。以前可以由演示扩展做出的决定现在由渲染器决定。
> 
> 需要弃用的受影响 API：
> 
> *   整个 API 包：`org.eclipse.ui.presentations`
> *   延伸点：`org.eclipse.ui.presentationFactories`

```
    org.eclipse.ui.IWorkbenchPreferenceConstants#PRESENTATION_FACTORY_ID
    org.eclipse.ui.IWorkbenchWindowConfigurer#getPresentationFactory
    org.eclipse.ui.IWorkbenchWindowConfigurer#setPresentationFactory

```

教程的其余部分解释了如何声明“部分”（编辑器或视图）

* * *

[OP August Karlstrom](https://stackoverflow.com/users/337149/august-karlstrom)提到：

> 这曾经有效：

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().findView("‌​some view"); 
```

使用像 PlatformUI 这样的单例是一种不好的做法，也是在 e4 中引入**[Context](http://wiki.eclipse.org/E4/Contexts)**的原因之一。请参阅[有关 Context 的演示文稿](http://www.eclipse.org/e4/resources/contexts.pdf)。

* * *

[Paul Webster](https://stackoverflow.com/users/713646/paul-webster)（IBM Eclipse 平台团队成员）评论：

> 在 Eclipse4 中，您将使用按 ID`org.eclipse.e4.ui.workbench.modeling.EPartService.findPart(String)`查找。包含在其对象属性中的注入部分 。`MPart`
> `MPart`

作为[Workbench_Services](http://wiki.eclipse.org/Eclipse4/RCP/EAS/Workbench_Services)页面的详细信息：

> 在 e4 中，将不存在工作台页面的概念。**[部件服务 API](https://bugs.eclipse.org/bugs/show_bug.cgi?id=295003)**本质上是现有 3.x和接口
> 的合并。`IPartService``WorkbenchPage`

* * *

请注意，这并不理想，如[错误 372488](https://bugs.eclipse.org/bugs/show_bug.cgi?id=372488)所示（在[此线程](http://www.eclipse.org/forums/index.php/t/297595/)之后）：

> 一个`MPart`for an`MPartDescriptor`是用 来创建的`EPartService.createPart(descriptor_id)`，其中descriptor_id 是 的标识符`MPartDescriptor`。
> 这部分可以再次找到`EPartService.findPart(descriptor_id)`-**如果只有一个**。
> 
> `MPart`问题是，一个人可能需要为一对一创建多个`MPartDescriptor`。
> 编辑器可能是一个例子：一个人可能想要编辑同一种类型的不同实例。
> 
> `MPart`为给定创建多个`MPartDescriptor`是可能的，但是没有方便的方法来找到这些部分。
> `EPartService.findPart(descriptor_id)`将返回`MPart`为特定创建的第一个`MPartDescriptor`，即使有多个。
> 因此，对于给定的 MPartDescriptor，存在三个问题：
> 
> 1.  `EPartService.findPart(id)`不说不止一个`MPart`。
> 2.  没有方便的方法来获取`MParts`此描述符的所有内容。
> 3.  没有 API 方式来获取`MPart`给定描述符和“内容”或“参考”的特定信息。
> 
> 目前要走的路是使用`EPartService.getParts()`which 不幸地返回所有`MPart`s，而不仅仅是那些对应于一个特定的 s `MPartDescriptor`。
> 然后需要检查是否有一个`MPart`针对`MPartDescriptor`具有特定“内容”的特定内容。
> 
> 因此，缺少一些可以找到 具有特定“内容”或“参考”`MPart`的给定的东西。`MPartDescriptor`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-26T01:02:03.943

只是有同样的问题。找到此线程并尝试使用后：

```
MPart mPart = epartService.findPart("MyPart");

MyPart myPart = (MyPart)mPart.getObject(); 
```

然后我得到了我的观点。

# c++ - 正在创建重复的 USB 虚拟串行端口 - 可能导致这种情况的原因是什么？

> ID：10554192
> 
> 赞同：5
> 
> 时间：2012-05-11T15:19:11.387
> 
> 标签：c++, windows, usbserial

我从另一个离开公司的程序员那里继承了一些代码，我遇到了一个奇怪的问题，需要一些关于如何开始解决它的指导。

问题是——在半定期的基础上，我们发现正在创建重复的 USB 虚拟通信端口。例如，在我的 PC 上，当我在设备管理器中查看端口并选择“查看隐藏设备”时，我有两个相同设备的条目——一个在 COM6 上，一个在 COM8 上。

不幸的是，我们无法可靠地重现问题。我们怀疑当我们的软件运行时有人快速断开并重新连接 USB 电缆时可能会发生这种情况，但这需要确认。

据我所知，编写代码的前提是没有人会拔掉电缆。在 SW 启动后，我看不出有任何逻辑可以检测到这种情况。当您重新插入电缆时它会失败 - 即使在重新插入电缆后也会默默地产生读写错误。您必须重新启动程序才能再次工作。

我几乎没有串行和 USB 经验，甚至不知道如何开始修复这个问题。

谁能建议为什么会发生这种情况？

* * *

杂项。详细信息，以防它们可能相关：

USB 串行代码位于 C++ DLL 中

VS2008

FTDIBUS USB/串行驱动程序

Windows XP 和 Win7

重复注册表项的屏幕截图（注意所选键的值！）

![注册表项的屏幕截图](../Images/192169ae3b8a95c827beae361b62b695.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:35:21.137

正如 Raymond Chen 的博客 The Old New Thing 和上面的评论所解释的那样：

*   [https://blogs.msdn.com/b/oldnewthing/archive/2004/11/10/255047.aspx](https://blogs.msdn.com/b/oldnewthing/archive/2004/11/10/255047.aspx)

总结一下：

*   对拔出并再次插入的设备进行跟踪，因此不会每次都将它们视为新设备。
*   通常这使用设备序列号来检测设备是否相同。
*   但是，并非每个设备都有序列号。仅当这些设备具有相同的供应商 ID 和产品 ID 并插入相同的端口时，它们才会被视为相同的设备。如果将它们插入不同的端口，它们将被视为不同的设备。
*   一些制造商不理解“序列号”中的“序列号”一词，并为所有设备提供相同的编号，而不是为它们提供序列号......为了解决这个问题，有一个注册表设置可用于强制这些设备被视为没有序列号。

因此，如果将没有序列号或在 Windows 注册表中标记为具有重复序列号的设备插入到之前未插入的串行端口，它将被视为新设备，而不是重新连接旧设备。这将导致您描述的“幽灵”设备。

制造商特别指出某些 FTDI 设备存在此问题：

*   [http://www.ftdichip.com/Support/Knowledgebase/index.html?ignorehardwareserialnumber.htm](http://www.ftdichip.com/Support/Knowledgebase/index.html?ignorehardwareserialnumber.htm)

# multithreading - 在 MATLAB 中处理语音而不停止录音

> ID：10554195
> 
> 赞同：1
> 
> 时间：2012-05-11T15:19:22.823
> 
> 标签：multithreading, matlab, audio-recording

我目前正在同时录制时处理语音信号。进一步来说：

1.  重复记录每 0.1 秒的语音。

2.  在 FIFO 意义上处理每个语音包（例如，调用此函数`process`）。处理一个长度为 0.1s 的语音包大约需要 1s。

以下是执行的代码：

```
r = audiorecorder(fs, 16,1);
data{k} = getaudiodata(r);
process(data{k}); 
```

问题是我在`process`执行过程中错过了 1s 语音的样本。我希望录音不间断地执行，并`process`在每 0.1 秒的语音录音中调用该函数。我尝试使用提供的函数回调`audiorecorder.`问题是`TimerFcn`录制过程中要重复执行的函数，在录制过程中无法检索样本。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-09T15:03:45.233

尝试在你使用的矩阵中找到一些东西`getaudiodata()`

那必须根据时间进行一些安排。（它应该根据时间有一些值分布，因为`plot()`在时间轴上绘制声音信号）

根据该排列遍历矩阵并调用 process() 函数。

这样，您可以一次录制声音，然后通过迭代每 0.1 秒一个一个地*处理。*

# ruby - 委派给 Ramaze 中的另一个动作

> ID：10554197
> 
> 赞同：1
> 
> 时间：2012-05-11T15:19:36.230
> 
> 标签：ruby, ramaze

如果传递了 id，我想从 Index 操作委托给 Show 操作。我似乎无法让它工作，我在这里做错了什么？

```
require 'ramaze'
require 'slim'

class UsersController < Ramaze::Controller
    engine :slim

    def index(id=nil)
        if id
            render_full "/users/show/#{id}" #id was passed, "show" the item
        end
        #alright just render the "index.slim" here...
    end

    def show(id)
        u=User[id] #ORM stuff...
    end
end

Ramaze.start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:48:22.913

你可以打电话`return show(id)`而不是`render_full "/users/show/#{id}"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:39:52.170

您必须调用`return render_full(...)`反对 just `render_full()`，否则，无论是否指定了 ID，都将执行下面的代码。

# javascript - 如何使我的 JavaScript 代码无法被其他人使用？

> ID：10554198
> 
> 赞同：2
> 
> 时间：2012-05-11T15:19:36.787
> 
> 标签：javascript, jquery, obfuscation

嘿，这是许多插件作者在不需要帮助的情况下所做的事情，不是吗？:) 这就是问题所在——我正在编写一个我打算出售的 jQuery 插件。我想提供一个现场演示；当然，我不希望任何人只使用演示代码。

我知道它很愚蠢，而且它当然不会带来任何好的因果报应，但是我可以在**演示**脚本中做哪些顽皮的事情，这会让任何尝试使用它的人的生活变得相当困难？想到设置`undefined = true`，以及覆盖 jQuery 方法。除此之外还有什么建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T15:28:20.640

我喜欢[Diodeus 的](https://stackoverflow.com/a/10554247/157247)视频（或截屏视频等）的想法。

但是，如果您绝对肯定想要一个交互式演示，请使用 jQuery、您的插件和您的演示代码，将所有三者放在一起，然后将 Closure Compiler 扔给它（如果您可以使用 jQuery 进行高级优化；使用简单否则优化）。Closure Compiler*不仅仅是*一个缩小器。它实际上重写了您的代码、内联函数（即使在简单模式下）、更改标识符名称等。如果所有代码一起编译，您不必告诉它“导出”任何符号，它可以有一个重命名，内联狂热。:-) 它将三个部分（jQuery、插件和演示）混为一谈，这样工作量就远远超过了解开它们的价值。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T15:22:36.427

JavaScript 环境就其本质而言是不安全的。除了缩小代码之外，您实际上无能为力。如果浏览器可以看到，用户就可以看到。这与试图阻止人们窃取您的图像的论点相同。

如果您想制作演示，请制作视频。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T15:36:25.083

不要让你的 deno 代码成为一个 jQuery 插件：相反，让它成为一个*功能等同于 jQuery*的库的插件。

基本上，获取 jQuery 的副本并重命名其中的所有函数（和/或交换函数参数的顺序）。然后制作一个你的插件的演示副本，它被修改为使用新的、混乱的 jQuery 副本。

或者（或另外），将它缩小并让它火炬/删除/破坏它不需要的任何 jQuery 组件。任何想要使用您的缩小代码的人都会发现他们的 jQuery 对象已被大幅更改。

**所有这些防御措施都有相当简单的解决方法**，但它可能会让任何没有足够专注于了解问题所在的人望而却步。最后，您可能会发现这根本不值得付出努力，并相信诚实的客户会让您的开发变得值得。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T15:23:23.060

添加一个只会在您自己的主机上通过的检查。然后缩小代码以掩盖工作原理。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-11T15:30:34.697

任何许多帖子都表明，大多数 JavaScript*都*可以毫不费力地被扯掉，尽管这可能会让人们感到困难。我会推荐使用一个好的 JavaScript 混淆器；我刚刚发现[了这个](http://www.daftlogic.com/projects-online-javascript-obfuscator.htm)，它似乎使它即使是受过训练的眼睛也难以阅读。

前：

```
var somethingToSay = "hello world";
function saySomething(phrase)
{
    alert(phrase);
}
sayHello(somethingToSay); 
```

后：

```
eval(function(p,a,c,k,e,d){e=function(c){return c};if(!''.replace(/^/,String)){while(c--){d[c]=k[c]||c}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('2 0="3 4";8 5(1){7(1)}6(0);',9,9,'somethingToSay|phrase|var|hello|world|saySomething|sayHello|alert|function'.split('|'),0,{})) 
```

值得注意的是，任何混淆都可能会对性能造成轻微影响，但这是为“保护”您的工作所付出的代价。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-11T15:21:29.607

您可以缩小代码以使其更难阅读。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-11T15:23:25.747

以屏幕录制而不是实时代码的形式发布您的“演示”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-11T15:23:15.303

如果它在那里，它可能会被扯掉。你可以对源代码进行缩小、模糊、做一些奇怪的事情，比如把它拆分成一堆 JS 文件，但它仍然可以被扯掉。如果您真的想要演示，您是否考虑过录制视频演示？

# jquery - jquery如何查找针对属性名称搜索的元素

> ID：10554209
> 
> 赞同：1
> 
> 时间：2012-05-11T15:20:04.000
> 
> 标签：jquery, attributes, css-selectors

我有一个非常具体的查询，如何找到具有某个属性的所有元素。

我的元素具有遵循特定模式的属性，以下是一些示例：

```
 <div data-jtemplate-href="x"></div>
 <span data-jtemplate-text="x"></span>
 <input data-jtemplate-something="x"/>
 <table data-jtemplate-else="x"></table> 
```

如您所见，我的所有元素都具有名称前缀为“data-jtemplate”的属性，我如何找到所有带有属性前缀data-jtemplate的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:27:34.497

*只需添加您可以*搜索的另一个属性（数据或其他） ：

```
 <div class="jtemplate" data-jtemplate-href="x"></div>
 <span class="jtemplate" data-jtemplate-text="x"></span>
 <input class="jtemplate" data-jtemplate-something="x"/>
 <table class="jtemplate" data-jtemplate-else="x"></table> 
```

无需将其定义为 CSS 样式。现在您只需要选择器`$('.jtemplate')`来获取所有这些元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T15:39:56.940

创建自己的表达式，请参阅[http://jsfiddle.net/6pCh4/](http://jsfiddle.net/6pCh4/)

```
$.expr[":"].dataAttrStartingWith = function(el, i, m) {
  for (var p in $(el).data()) {
     if (p.substring(0, m[3].length) === m[3]) return true;    
  }
  return false;
};  

console.log($('body *:dataAttrStartingWith(jtemplate)')) 
```

此表达式将过滤具有`data-jtemplate-*`属性的所有元素（正如您在小提琴中看到的那样，我添加了另一个被此过滤器正确丢弃的元素）

当然，这可以使用其他`data-*`属性进行自定义（只需更改`jtemplate`选择器）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:39:46.527

我建议你根据这个转换你的标记：

```
<div "data-jtemplate"="href-x"></div>
<span "data-jtemplate"="text-y"></span>
<input "data-jtemplate"="something-z" />
<table "data-jtemplate"="else-v"></table> 
```

现在你可以做一个非常简单的搜索：

```
var jTemplate = $("*[data-jtemplate]") // selects all elements with that prefix
$("*[data-jtemplate^='href-']", jTemplate) // select all elements with href in jTemplate scope
$("*[data-jtemplate^='text-']").each( function(i, ele)
{
   var attr = $(this).attr("data-jtemplate").replace("text-",""); // gives you actual value of the attribute
}); 
```

**更新：**

```
<div 'data-jtemplate'='{href:"http://example.com",text:"example",attr:10,private:false}'></div> 
// {href:"http://example.com",text:"example",attr:10,private:false} -> easy to create on the server

var json = $("[data-jtemplate]").eq(0).attr("data-jtemplate");
var parsedData = $.parseJSON(json);
var href = parsedData.href; // etc -- easy to access 
```

# facebook - 通过 Facebook API 添加到兴趣列表

> ID：10554214
> 
> 赞同：0
> 
> 时间：2012-05-11T15:20:31.720
> 
> 标签：facebook

我对 facebook API 比较陌生，但想知道如何允许用户通过 API 或社交插件将页面添加到“兴趣列表”？例如：

```
<html>
    <head>
      <title>My Great Web page</title>
    </head>
    <body>
       <iframe src="https://www.facebook.com/plugins/like.php?href=YOUR_URL"
        scrolling="no" frameborder="0"
        style="border:none; width:450px; height:80px"></iframe>
    </body>
 </html> 
```

是如何喜欢，我知道这是基本的，但我可以允许用户将喜欢的页面添加到他们的兴趣列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:57:24.980

**API**

您不能发布到兴趣连接。Graph API 不支持它。

您的应用可以通过 GET 请求*检索*用户的兴趣

```
graph.facebook.com/USER_ID/interests 
```

你需要

```
user_interests
friends_interests 
```

权限。

但是，您不能发布到兴趣连接。如果您尝试，您将得到 GraphMethodException“不支持的发布请求”作为回报。

**社交插件**

没有一个[社交插件](https://developers.facebook.com/docs/plugins/)将发布到兴趣作为一项功能。

# lucene - 在 lucene NumericField 中搜索最大值

> ID：10554220
> 
> 赞同：0
> 
> 时间：2012-05-11T15:21:04.803
> 
> 标签：lucene

我知道 Lucene 中有一个 NumericRangeQuery，但是是否可以让 lucene 简单地返回存储在 NumericField 中的最大值。我可以在整个已知范围内使用 RangeQuery 然后排序，但这非常麻烦，如果有很多记录，它可能会返回大量结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:31:25.573

的第二个参数`IndexSearcher.search(Query query, int n, Sort sort)`允许指定前 n 个匹配项（在您的情况下为 1），如果您正确排序，它只会返回所需的结果。还有其他重载方法可以实现相同的目标。

虽然不能争论繁琐:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T19:18:25.190

您可以通过您的索引[Term Enum 。](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/index/TermEnum.html)不幸的是，我不认为它们的排序方式可以立即找到最大值，但至少您不必进行实际搜索即可找到它。您需要使用[NumericUtils](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/util/NumericUtils.html)将 Lucene 的内部结构转换为普通数字。

[该线程](http://lucene.472066.n3.nabble.com/Numeric-field-min-max-values-td3474881.html)包含一个示例。

# windows-phone-7 - 使用 WebClient.OpenReadAsync 双重下载

> ID：10554227
> 
> 赞同：1
> 
> 时间：2012-05-11T15:21:19.333
> 
> 标签：windows-phone-7, asynchronous, webclient

好的，在我的应用程序中，我需要下载两个数据列表来详细说明它们，但我不知道该怎么做..

我单击一个按钮，然后我认为下载几乎是一起开始的。这对我有好处，不好的是我的应用程序无法理解如何在执行其他任何操作之前等待下载..

我知道有一个设计问题，但我不知道如何解决它..

代码（或多或少）是这样的：

```
private void button_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            WebClient webClient = new WebClient();

            Uri uri = new Uri("http://myRESTservice");
            webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
            webClient.OpenReadAsync(uri); //this will set a private variableA

            dwnl();          

            doSomething(); //this will do something with A and B

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

private void dwnl()
    {
        try
        {
            WebClient webClient = new WebClient();

            Uri uri = new Uri("http://myRESTservice/anotherAddress");
            webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted_B);
            webClient.OpenReadAsync(uri); //this will set a private variableB

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

希望你明白这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:27:05.130

当您的应用程序正在下载数据时，即调用 OpenReadAsync 方法时，您可能会显示忙碌指示。然后将从您的 OpenReadCompleted 事件处理程序中调用您的 doSomething 方法。如果您希望一个下载在另一个完成后发生，那么您还可以从 OpenReadCompleted 事件处理程序中调用 dwnl 方法。

# c - 来自不兼容指针类型的赋值 [-Werror]

> ID：10554231
> 
> 赞同：0
> 
> 时间：2012-05-11T15:21:23.980
> 
> 标签：c

我正在尝试将我的*工作*代码从 Mac OS X 移植到 GNU/Linux。
我正在使用`qsort_r`FreeBSD 和 GNU/Linux 上不同的原型。

因此，我将`qsort_r`特定的调用包装在平台特定的宏上现在当我编译时，代码在 Mac OS X 上编译并运行良好，但在 GNU/Linux

我似乎找不到问题。也许另一双眼睛可能会有所帮助。

## 错误 -

```
auto-assign.c: In function ‘get_gtype’:
auto-assign.c:1669:19: error: assignment from incompatible pointer type [-Werror]
auto-assign.c:1677:19: error: assignment from incompatible pointer type [-Werror]
auto-assign.c:1685:19: error: assignment from incompatible pointer type [-Werror]
auto-assign.c:1693:19: error: assignment from incompatible pointer type [-Werror] 
```

* * *

## auto_assign.c -

```
switch (op) {
1668 case RULE_S2_8:
1669 gtype->qsort_comp = comp_uint8_t; # -Werror
1675 break;
1676 case RULE_S2_16:
1677 gtype->qsort_comp = comp_uint16_t; # -Werror
1683 break;
1684 case RULE_S2_32:
1685 gtype->qsort_comp = comp_uint32_t; # -Werror
1691 break;
1692 case RULE_S2_64:
1693 gtype->qsort_comp = comp_uint64_t; # -Werror
1699 break;
1700 } 
```

* * *

## gtype -

```
struct grouper_type {
 71 #if defined(__APPLE__) || defined(__FreeBSD__)··
 72   int (*qsort_comp)(
 73                     void*                           thunk,
 74                     const void*                     e1,
 75                     const void*                     e2
 76                    );
 77 #elif defined(__linux)
 78   int (*qsort_comp)(
 79                     const void*                     e1,
 80                     const void*                     e2,
 81                     void*                           thunk
 82                    );
 83 #endif
 ... 
```

->`gcc -E`确实`qsort_comp`在两个平台上都给我写了。

* * *

## comp_* -

```
532 #if defined(__APPLE__) || defined(__FreeBSD__)
533   #define comp(size) \
534   int comp_##size(void *thunk, const void *e1, const void *e2) {\
535     size x, y; \
536     x = *(size *)(**(char ***)e1+*(size_t *)thunk); \
537     y = *(size *)(**(char ***)e2+*(size_t *)thunk); \
538     return (x > y) - (y > x); \
539   }
540 #elif defined(__linux)
541   #define comp(size) \
542   int comp_##size(const void *e1, const void *e2, void *thunk) {\
543     size x, y; \
544     x = *(size *)(**(char ***)e1+*(size_t *)thunk); \
545     y = *(size *)(**(char ***)e2+*(size_t *)thunk); \
546     return (x > y) - (y > x); \
547   }
548 #endif
549 
550 comp(uint8_t);
551 comp(uint16_t);
552 comp(uint32_t);
553 comp(uint64_t);
... 
```

->`gcc -E`确实`comp_*`在两个平台上都给我写了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:36:49.250

您正在删除`const`宏中的限定符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:43:25.113

我似乎找到了问题所在。我忘了包装函数原型。

```
154 #if defined (__APPLE__) || defined (__FreeBSD__)
155 int·
156 comp_uint8_t(void *thunk, const void *e1, const void *e2);
157 int·
158 comp_uint16_t(void *thunk, const void *e1, const void *e2);
159 int·
160 comp_uint32_t(void *thunk, const void *e1, const void *e2);
161 int·
162 comp_uint64_t(void *thunk, const void *e1, const void *e2);
163 #elif defined(__linux)
164 int·
165 comp_uint8_t(const void *e1, const void *e2, void* thunk);
166 int·
167 comp_uint16_t(const void *e1, const void *e2, void* thunk);
168 int·
169 comp_uint32_t(const void *e1, const void *e2, void* thunk);
170 int·
171 comp_uint64_t(const void *e1, const void *e2, void* thunk);
172 #endif 
```

# node.js - 我可以用一个 require 语句加载多个文件吗？

> ID：10554241
> 
> 赞同：30
> 
> 时间：2012-05-11T15:22:18.470
> 
> 标签：node.js

也许这个问题有点傻，但是是否可以使用一个 require 语句加载多个 .js 文件？像这样：

```
var mylib = require('./lib/mylibfiles'); 
```

并使用：

```
mylib.foo(); //return "hello from one"

mylib.bar(): //return "hello from two" 
```

在 mylibfiles 文件夹中将有两个文件：

**一个.js**

```
exports.foo= function(){return "hello from one";} 
```

**二.js**

```
exports.bar= function(){return "hello from two";} 
```

我正在考虑将 package.json 放在说要加载所有文件的文件夹中，但我不知道如何。我正在考虑的其他方法是让 index.js 再次导出所有内容，但我将重复工作。

谢谢！！

PD：我在 Windows 7 机器上使用 nodejs v0.611

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-11T15:35:43.840

首先使用`require`不会复制任何东西。它加载模块并将其**缓存**，因此`require`再次调用将从内存中获取它（因此您可以在不与其源代码交互的情况下即时修改模块 - 这有时是可取的，例如当您想在模块内存储数据库连接时）。

也`package.json`不会加载任何东西，并且根本不会与您的应用程序交互。它仅用于`npm`.

现在你不能一次需要多个模块。例如，如果两者都定义了同名的函数会发生`One.js`什么`Two.js`？还有更多的问题。

但是您可以做的是编写附加文件，例如`modules.js`以下内容

```
module.exports = {
   one : require('./one.js'),
   two : require('./two.js'),
   /* some other modules you want */
} 
```

然后你可以简单地使用

```
var modules = require('./modules.js');
modules.one.foo();
modules.two.bar(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-01T02:51:01.710

我有一段代码需要多个模块，但它并没有像您的帖子所建议的那样将它们聚集在一起。然而，这可以通过我发现的一个技巧来克服。

```
function requireMany () {
    return Array.prototype.slice.call(arguments).map(function (value) {
        try {
            return require(value)
        }
        catch (event) {
            return console.log(event)
        }
    })
} 
```

你就这样使用它

```
requireMany("fs", "socket.io", "path") 
```

哪个会回来

```
[ fs {}, socketio {}, path {} ] 
```

如果未找到模块，则会将错误发送到控制台。它不会破坏程序。错误将在数组中显示为未定义。数组不会因为其中一个模块未能加载而变短。

然后您可以将这些数组元素中的每一个绑定到一个变量名，如下所示：

```
var [fs, socketio, path] = requireMany("fs", "socket.io", "path") 
```

它本质上像一个对象一样工作，但将键及其值分配给全局命名空间。所以，在你的情况下，你可以这样做：

```
var [foo, bar] = requireMany("./foo.js", "./bar.js")
foo() //return "hello from one"
bar() //return "hello from two" 
```

* * *

如果您确实希望它在错误时破坏程序，只需使用这个修改后的版本，它更小

```
function requireMany () {
    return Array.prototype.slice.call(arguments).map(require)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-28T23:33:52.293

是的，根据[节点文档](http://nodejs.org/api/modules.html#modules_folders_as_modules)，您可能需要一个**文件夹**作为模块。假设您想要 require() 一个名为.`./mypack/`

在里面`./mypack/`，在一个目录中创建一个`package.json`包含文件`name`夹的文件和一个`main`同名的 javascript 文件`./lib/`。

```
{
  "name" : "mypack",
  "main" : "./lib/mypack.js"
} 
```

现在您可以使用`require('./mypack')`并且节点将加载`./mypack/lib/mypack.js`.

但是，如果您不包含此`package.json`文件，它可能仍然有效。`./mypack/index.js`如果没有该文件，节点将尝试加载`./mypack/index.node`.

我的理解是，如果您将程序拆分为许多 javascript 文件但又不想将它们连接起来进行部署，这可能会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-26T23:16:06.360

您可以使用[解构赋值](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)[`require`](https://nodejs.org/api/modules.html#modules_require_id)从一行中的语句映射一组导出的模块：

```
const requires = (...modules) => modules.map(module => require(module));
const [fs, path] = requires('fs', 'path'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-26T13:47:07.417

我正在做的事情类似于@freakish 在[他的回答](https://stackoverflow.com/a/10554457/2668568)中建议的一个项目，其中我有一个测试脚本列表，这些脚本被拉入 Puppeteer + Jest 测试设置。我的测试文件遵循命名约定 testname1.js - testnameN.js 并且我能够使用生成器函数通过以下方法从特定目录中要求 N 个文件：

```
const fs = require('fs');
const path = require('path');

module.exports = class FilesInDirectory {

    constructor(directory) {

        this.fid = fs.readdirSync(path.resolve(directory));
        this.requiredFiles = (this.fid.map((fileId) => {
            let resolvedPath = path.resolve(directory, fileId);
            return require(resolvedPath);
        })).filter(file => !!file);

    }

    printRetrievedFiles() {
        console.log(this.requiredFiles);
    }

    nextFileGenerator() {

        const parent = this;
        const fidLength = parent.requiredFiles.length;

        function* iterate(index) {
            while (index < fidLength) {
                yield parent.requiredFiles[index++];
            }
        }
        return iterate(0);
    }

} 
```

然后像这样使用：

```
//Use in test
const FilesInDirectory = require('./utilities/getfilesindirectory');
const StepsCollection = new FilesInDirectory('./test-steps');
const StepsGenerator = StepsCollection.nextFileGenerator();

//Assuming we're in an async function
await StepsGenerator.next().value.FUNCTION_REQUIRED_FROM_FILE(someArg); 
```

# java - 轮盘旋转

> ID：10554249
> 
> 赞同：1
> 
> 时间：2012-05-11T15:22:48.420
> 
> 标签：java, swing, animation, applet

我正在尝试为我的顶点课程编写轮盘游戏。我一直在尝试找到一种编码轮子的方法，但我是 java 新手，不知道如何开始。我发现 paintComponent(Graphics g) 方法有助于旋转我的车轮图像，但不能帮助车轮旋转。有什么办法可以做到吗，任何可以让我知道如何开始的文章。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:58:51.473

此[示例](https://stackoverflow.com/a/3420651/230513)显示如何旋转任意图像。如果您在运行时创建自己的图像，此[问答可能会建议如何旋转文本。](https://stackoverflow.com/q/6238037/230513)

附录：在有用的评论中，@Robin 回忆了这个[例子](https://stackoverflow.com/a/10055387/230513)，以及@camickr 的关键文章[*Rotated Icon*](http://tips4java.wordpress.com/2009/04/06/rotated-icon/)。由于目标是*模拟*具有旋转轮盘*视图的*[轮盘赌](http://en.wikipedia.org/wiki/Roulette)游戏，因此[MVC 模式](https://stackoverflow.com/a/3072979/230513)可能会被证明是有用的。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-18T03:29:27.707

Here's two great rotation libraries that have an out-of-the-box fling-to-spin behaviour [https://bitbucket.org/warwick/hg_dial_v2](https://bitbucket.org/warwick/hg_dial_v2) [https://bitbucket.org/warwick/hgdialrepo](https://bitbucket.org/warwick/hgdialrepo)

And here's a gesture library that implements the above code. [https://bitbucket.org/warwick/hacergestov3](https://bitbucket.org/warwick/hacergestov3)*

# python - 如何在 django tastepie json 上附加 success=true

> ID：10554251
> 
> 赞同：2
> 
> 时间：2012-05-11T15:22:50.483
> 
> 标签：python, django, extjs, tastypie

我正在使用 django-tastypie 来实现 restapi，我正在使用 sencha 作为移动客户端。我需要出于某种目的操纵响应文本。

像下面

```
form.submit({
    success: function() {
        // The callback function is run when the user taps the 'ok' button
        form.reset();

        //Ext.Msg.alert('Thank You', 'Your message has been received', function() {
        //  form.reset();
        //});
    }
}); 
```

我有json响应如下

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 13},       
 "objects": [{"body": "This will prbbly be my lst edited  post.", "id": 1,
 "pub_date":  "2011-05-22", "resource_uri": "/api/v1/entry/1/", "slug": "another-post", 
 "title": "Another Post"}, {"body": "This will prbbly be my lst post.", "id": 2, 
 "pub_date": "2011-05-22", "resource_uri": "/api/v1/entry/2/", "slug": "another-post", 
 "title": "Another Post"}, {"body": "This will prbbly be my lst edited  post"}]} 
```

发送成功 => true 非常重要 如果未定义成功或不等于 true 则将视为表单提交错误。如何在 django tastepie json 上附加 success=true

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:24:01.127

如果我正确理解您的问题，您想附加`{'success': true}`到 API 调用的结果，对吗？如果是这样，您可以覆盖类的[脱水](http://django-tastypie.readthedocs.org/en/latest/resources.html#dehydrate)方法`Resource`：

```
def dehydrate(self, bundle):
    bundle.data['success'] = True
    return bundle 
```

# c# - 比较 DateTime 获取小时数

> ID：10554253
> 
> 赞同：-2
> 
> 时间：2012-05-11T15:22:52.467
> 
> 标签：c#, datetime, hour

我使用两个 DataTimePickers（t1 和 t2）创建了一个计数器小时，其中

```
 if(t1<t2)
       hour = t2-t1
    else
       hour = t2 - (-t1) 
```

刚刚得到结果：

```
t1            t2            hour
11:00         23:00         12
11:00         00:00         11
11:00         13:00         2
11:00         03:00         14 
```

我需要的是：

```
t1            t2            hour
11:00         23:00         12
11:00         00:00          0
11:00         13:00         2
11:00         03:00         16 
```

我如何得到这个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:28:32.220

您只是想要两次值的差异还是想要时间差异？（即 08:00、06:00 应该返回 2 或 -2）

另外，我对为什么 (11:00, 00:00) 应该返回 0 感到困惑。

如果您只想要值的差异，请使用

```
if (t1<t2)
    hour = t2-t1
else
    hour = t1-t2 
```

如果你想要时差，只使用

```
hour = t2-t1 
```

# mysql - AppHarbor：NancyFx 应用程序出现内部服务器错误

> ID：10554254
> 
> 赞同：3
> 
> 时间：2012-05-11T15:22:54.867
> 
> 标签：mysql, deployment, frameworks, appharbor, nancy

我最近使用以下 NuGet 包部署到[http://domainshop.apphb.com/一个简单的 ASP.NET 应用程序：](http://domainshop.apphb.com/)

```
Nancy.Hosting.Aspnet
Dapper
MySql.Data 
```

该应用程序使用 MySQL。我已经激活了插件并使用在我的**Web.config**中编写的相同名称标记了实例。（我也将我的数据库部署到该实例）。

NancyFx 配置在`system.webServer/handler`而不是在`system.web/httpHandlers`.

我也设置`system.web/customErrors`为`Off`.

我缺少什么 get `500 - Internal Server Error`？

有趣的是静态文件被正确提供（http://domainshop.apphb.com/assets/style.css）。

问候，贾科莫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T02:12:44.560

您的视图是否设置了内容的构建操作？
我之前有过这种情况，我的视图文件设置为无，因此 AppHarbor 没有部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:34:45.073

在没有看到您的代码的情况下，我猜想您的路线中的某些东西（也许是数据库访问？）正在引发异常。听起来南希没有坏掉，因为您可以访问静态内容

# c - 指针偏移在 memset 中不起作用？

> ID：10554260
> 
> 赞同：3
> 
> 时间：2012-05-11T15:23:17.840
> 
> 标签：c, memset

普通 C，在 Windows 7 和 HP 机器上。

```
int main(void) {

    unsigned int a =  4294967295;
    unsigned int *b = &a;

    printf("before val: '%u'\n", *b); // expect 4294967295, got 4294967295

    memset(b+2, 0, 1);

    printf("after val: '%u'\n", *b);
    // little endian          4th      3rd     2nd       1st
    // expect 4278255615 - 11111111 00000000 11111111 11111111
    // got    4294967295 - 11111111 11111111 11111111 11111111

    return 0;

} 
```

我想将整数的第三个字节设置为 0x0，但保持不变。有任何想法吗？谢谢你。

在我的机器上，int 是 32 位。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T15:25:32.090

指针加法/减法不会只移动一个字节 - 它会移动被指向对象类型的大小。

也就是说（假设4字节整数），

```
int *p = 0x00004
int *q = p+1;
assert(q == 0x00008) 
```

基本上，这与您使用运算符的索引相同：

```
int *q = &p[1] 
```

如果要将指针加一，请将其强制转换为`unsigned char *`. 您这样做的方式是覆盖不属于变量的内存，`a`并可能为其他内容覆盖现有数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:27:03.373

b+2 实际上是两个 int 而不是两个字节的位移。

```
 unsigned int *b = &a;
 memset(b+2, 0, 1); 
```

其实你要修改第三个字节

```
 unsigned int *b = &a;
 memset( ((char*)b)+2, 0, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:27:37.183

int 只保证至少有两个字节，所以如果你想设置第三个字节，你应该使用 long int（或 uint32_t）。无论如何，我会使用按位和运算符来做到这一点

```
unsigned long a = 4294967293;
/* regular code */
a &= 0xFFFF00FF; 
```

# c++ - Eclipse C/C++ 显示错误但编译？

> ID：10554266
> 
> 赞同：25
> 
> 时间：2012-05-11T15:23:33.687
> 
> 标签：c++, c, eclipse, arduino

因此，我在 Eclipse 中构建了一些 Arduino 代码，如[您的第二个 Arduino 项目](http://www.arduino.cc/playground/Code/Eclipse#YourSecondArduinoProject)中所述，但每次我使用 Arduino 库时`Serial`，Eclipse 都会在我的函数名称下划线，声称它们无法解析。然而，代码实际上是编译的，所以我有点不知道为什么 Eclipse 认为这些函数丢失了。如果有人对如何解决这个问题有任何想法，将不胜感激。预先感谢。

编辑：我应该更具体一点，Eclipse 强调了 Arduino 库中的方法。因此，如果我使用`Serial.println("hello");`，它会强调`println()`并声称它无法解决。然后它编译得很好，当上传到 arduino 板时该方法有效。

EDIT2：我发现了我的错误，原来我试图在 C 文件中使用一些 C++ 函数，而 Eclipse 不喜欢它；我重命名为.cpp，所有红色都消失了；）感谢您的帮助！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-11T15:42:01.417

Eclipse 可能会或可能不会从您的构建设置中提取路径以进行索引，具体取决于配置。很可能，它不是......它正在正确构建，因为您的构建设置很好，您可能可以手动构建。

CDT 索引器（它是决定所有漂亮下划线以及代码完成、F3 声明跳转等来自何处的引擎）在很多情况下都不够聪明，无法解析您的 Makefile 并知道在哪里查找对于标题和来源。您需要手动告诉 Eclipse 该信息。

转到**项目属性 -> C/C++ 常规 -> 路径和符号**。

您需要投入的工作量可能会有很大差异，具体取决于您的环境。如果这个外部库是唯一让您头疼的东西，那么您可能只需要添加该库的路径并重新索引：

右键单击项目并选择**Index -> Rebuild**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-11T15:34:44.430

首先，下划线是什么颜色的？这会有所不同，因为黄色表示它是一个警告，而红色表示它是一个错误（关键，在大多数情况下不会构建）。

其次，您需要查看“问题”选项卡以查看是否存在实际错误。如果那里什么都没有，那么它确实编译正确。

现在，回到最初的问题。根据您正在构建的项目类型，这种行为并不少见。Eclipse 似乎在索引某些项目方面做得很差。当您从命令行运行“make all”（这实际上是 Eclipse 在构建期间所做的）时，它可能会解析您的所有代码并将其构建得很好。

但是，Eclipse 使用**不同的、单独的工具**来索引所有源代码并解析变量/函数定义和声明。这实际上是左手不知道右手在做什么的情况。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-09T21:53:07.057

下面的解决方案对我有用：使用右键单击您的项目。然后：***属性 -> C/C++ 常规 -> 路径和符号 -> 符号 -> GNU C++。*** 如果您遇到此问题，几乎可以肯定根本没有符号。添加符号“__cplusplus”，值为“201402L” 在此之后：右键单击***项目 -> 索引 -> 重建*** 你就完成了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-15T20:35:30.947

在解析符号时，CDT 索引器似乎会考虑所有头文件，而不管编译单元中实际包含哪些头文件。Eclipse Bugzilla 有一个相应的错误报告：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=439553](https://bugs.eclipse.org/bugs/show_bug.cgi?id=439553)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-30T18:47:40.370

我有包含文件夹

项目属性 -> C/C++ 常规 -> 路径和符号 -> 包含

当我删除这些时，红色下划线消失了，即同步的构建和 IDE。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-07T19:10:11.603

在我的情况下，问题是由于在编译方言下的项目属性的语言标准字段中添加了“-std=c++17”标志。之后构建通过错误，但程序运行良好。所以 Index>Rebuild 的技巧解决了一切。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-24T11:13:32.203

我有同样的问题。 **索引-> 重建**没有帮助。当我`#include <avr/iom1280.h>`在**main.cpp**中添加行并使**Index -> Rebuild**下划线消失时。然后我删除了行`#include <avr/iom1280.h>`和项目仍然没有内线。

替换`iom1280.h`为您的控制器的名称。查看**“avr\include\avr\”**文件夹中的可用名称

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-06T04:57:13.717

如果您更改了配置中的某些内容（例如，使用 notepad++ 在 *.cproject 文件中进行编辑），以下选项会有所帮助。 **构建配置**-->**清除所有**然后**索引**-->**重建**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-21T22:21:03.533

Eclipse 在 C++ 中的工作不如在 Java 中那样好，但是一旦您在菜单栏中按“重建”，它应该会警告您有关问题。

试试看，看看它是否能解决你的问题。

# windows-phone-7 - 枚举电子邮件帐户并列出 Windows Phone 7 上的未读计数

> ID：10554267
> 
> 赞同：0
> 
> 时间：2012-05-11T15:23:36.487
> 
> 标签：windows-phone-7

我想创建一个应用程序，其中列出了所有用户电子邮件配置的帐户（Hotmail、Gmail 等），如果可能的话，还包括未读和“新的未读”计数。单击其中一项将打开相应的收件箱。

这可能吗，如果可以，我应该使用哪个类？据我所知，这似乎不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:28:47.610

目前不支持：[http ://forums.create.msdn.com/forums/p/84981/84981.aspx](http://forums.create.msdn.com/forums/p/84981/84981.aspx)

# matlab - 在 GUIDE 中成像的矩阵应用程序

> ID：10554275
> 
> 赞同：0
> 
> 时间：2012-05-11T15:24:11.877
> 
> 标签：matlab, user-interface, image-processing, matrix, matlab-guide

我试图简单地将矩阵乘以图像并获得输出，所有这些都必须在 matlab GUIDE 中完成。我对语言没有经验，截止日期真的很快，这是代码：

```
function t1_OpeningFcn(hObject, eventdata, handles, varargin)

imgview=imread('1.jpg');
imshow(imgview)

guidata(hObject, handles);

function varargout = t1_OutputFcn(hObject, eventdata, handles) 
varargout{1} = handles.output;

function slider3_Callback(hObject, eventdata, handles)

function pushbutton5_Callback(hObject, eventdata, handles)
B=4;
set(handles.imgview,'CData',B); 
```

我只是想让滑块选择一个数字来乘以图像，或者在单击按钮时让一个值乘以图像！

gui 图像：http: [//imageshack.us/photo/my-images/821/testojh.jpg/](http://imageshack.us/photo/my-images/821/testojh.jpg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:36:41.657

要记住的一件事是在按钮回调结束时使用 guidata(hObject, 句柄) 将结果传回。此外，您使用其他编写函数进行的任何修改都应返回修改后的句柄数据。

# python - 从flask-restless返回自定义属性

> ID：10554276
> 
> 赞同：3
> 
> 时间：2012-05-11T15:24:12.120
> 
> 标签：python, flask, flask-sqlalchemy

我想从烧瓶中返回一个自定义属性，例如

```
class Item(db.Model):
    creator_id = db.Column(db.Integer, db.ForeignKey('User.id'))
    owner_id = db.Column(db.Integer, db.ForeignKey('User.id'))
    owner = db.relationship("User",backref="items",primary_join="Item.owner_id==User.id")
    owner = db.relationship("User",backref="created_items",primary_join="Item.creator_id==User.id")        

class User(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    firstName = db.Column(db.Unicode(50), nullable = False)
    lastName = db.Column(db.Unicode(50), nullable = False)
    email = db.Column(db.Unicode(100), nullable = False) 
```

我希望能够在 /api/User/1 中为创建者的项目中返回 firstName + " " + lastName 以用于烧瓶休息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:10:03.577

如果不修改flask-restless，您将无法真正做到这一点。如果您查看 flask-restless 的源代码，在 中`views.py`，该方法`_to_dict`显式迭代对象的属性，并且仅包括作为 SQLAlchemy`ColumnProperty`类型实例的属性。

该函数将是开始的地方，更改该代码以包含某种其他类型的属性，然后将一个属性添加到您的`User`类中连接`firstName`和`lastName`。

# regex - Perl - 返回字符串中最后一个数字后的最后一个字母字符并返回修改后的字符串

> ID：10554277
> 
> 赞同：3
> 
> 时间：2012-05-11T15:24:12.097
> 
> 标签：regex, perl

我有一个这样的字符串：

```
$var = '123456d'; 
```

或者可能

```
$var = '123456'; # (no alpha char) 
```

如果重要的话，最多会有 6 位数字，不少于 5 位。数字中没有字母、空格或特殊混合。

在我的 Perl 脚本中，我需要删除并返回最后一个字母字符和不带字母字符的字符串。

我想可以使用 \D 和修剪？还是砍？但是，必须有一种简单的方法可以快速获取两个变量。

```
my $numbers =~   s/\D+?$var//;  #???  

my $alpha = substr($var, 0, -1); ## but no alpha check. 
```

或者

```
my $alpha = chop($var); ## but no alpha check. 
```

然后 if aZ 等等来检查它是否是一个字母字符。

或者我的能力解决方案的限制：

```
$alpha = $var;
$alpha =~ s/[0-9]//ig;
$var =~ s/[a-Z]//ig;
$numbers = $var; 
```

所以结果：

```
($numbers == '123456')
($alpha eq 'd') (or '' if nothing) 
```

我觉得在这里问这个问题太微不足道了，但是我找不到或写出适用的解决方案。

我对 =~ s 的使用只是一个猜测，但是，必须有更好的方法，甚至是单线。

感谢这里的所有帮助...

深思熟虑后抱歉！数字后面可能有 2 个字母字符！它们需要作为单个 var ($alpha eq 'dd') 一起返回

我也发现了这个：

```
$var =~ s{^([0-9]+).*}{$1}i; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:54:33.160

使用`\pL`将避免捕获数字，并使字符串可选将确保即使对于没有结尾字母的数字也会发生匹配。

```
my $var = '123456d';
my ($num, $letter) = $var =~ /^(\d+)(\pL)?$/; 
```

请注意，您不能使用`\w`来捕获可能的结尾字母，因为它还包括数字。正如 tchrist 所指出的，`\p{alpha}`也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:39:56.393

也许是这样的：

```
my $numbers =~ s/(\d+)(\p{alpha}+)?/$1/;

my $alpha = $2; 
```

the`$1`指的是第一个括号捕获， the`$2`指的是第二个。

已编辑：用于`\d`数字，`\p{alpha}`用于 alpha。

# tsql - tsql join 最佳实践建议

> ID：10554288
> 
> 赞同：1
> 
> 时间：2012-05-11T15:24:49.063
> 
> 标签：tsql

首先，英语不是我的第一语言，请随时编辑我的问题，对于任何可能冒犯您的错误或没有如此清楚地暴露问题，我深表歉意。

我有一些带有很多连接的 sql 查询，这些连接基于聚集索引（不用担心）。一些连接仅用于尊重规范化，因为对维护很直观，但有时可以跳过其中的一些。就最佳实践而言，我不清楚如何处理这些连接。

编辑：

一个简单的例子：

```
select *
from things
join things_categories on
    things_categories.id_thing = things.id_thing
join categories on
    categories.id_category = things_categories.id_category
join categories_properties on
    categories_properties.id_category = categories.id_category
where
    categories_properties.bo_default = 1 
```

但可以这样做：

```
select *
from things
join things_categories on
    things_categories.id_thing = things.id_thing
join categories_properties on
    categories_properties.id_category = things_categories.id_category
where
    categories_properties.bo_default = 1 
```

第二个连接不是必需的（我在数据库级别确实具有完整性），它的存在只是因为使代码更直观并尊重数据库规范化。我不确定我是否应该遵循尽可能最小和有效的路径，或者留下不必要的连接以尊重规范化并使代码更直观。

有小费吗？

祝一切顺利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:45:26.050

**这取决于你是否已经诚信。**

一方面，如果 中`categories_properties table`有 a `foreign key`，`id_category column`那么完整性就存在，您不需要`join`与`categories table`.

另一方面，如果完整性可能不存在（即：存在`id_categories`in`categories_properties table`中未定义的`categories table`内容），那么您应该将`join`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:47:28.343

加盟：

```
join categories on
    categories.id_category = things_categories.id_category 
```

非常有必要，因为该`categories`表用于下一个连接：

```
join categories_properties on
    categories_properties.id_category = categories.id_category 
```

所以它肯定是必需的，如果它尚未定义，因为 SQL 要求您建立它需要索引的链接并将一个链接连接到下一个链接。

然而，非常痛苦的是`select *`。您不需要所有这些信息，因为 * 将带来所有表中的所有数据。

也许您可以从每个表中指定您需要的内容，或者在最坏的情况下使用 things.* 来指定特定表的所有列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T19:53:59.190

如果您不需要加入，请不要使用它。您正在遭受完全不需要的性能打击。不要强迫数据库做它不需要做的工作，因为你认为它看起来更完整，你应该在查询的可读性之前考虑性能。毕竟，一旦你开始编写高性能的 SQl 代码，它对你来说就会变得更具可读性。但是，通过确保两个版本的查询返回相同的结果集来消除它之前，请确保您实际上不需要它。

# facebook - 为什么我的 FB.api 用户对象不再包含“链接”字段？

> ID：10554291
> 
> 赞同：0
> 
> 时间：2012-05-11T15:25:13.757
> 
> 标签：facebook, facebook-graph-api

我的网站调用 Facebook API 来检索用户信息，如下所示：

```
FB.api('/' + uid, function(response)
{
    alert(JSON.stringify(response));
}); 
```

`uid`我自己的身份证在哪里。[文档](http://developers.facebook.com/docs/reference/api/user/)指出这应该包括一个字段`link`，而且它肯定曾经这样做过。它声明不需要身份验证令牌（尽管我还是提供了一个）。然而，我得到的实际响应包含以下字段：

```
{"id":, "name":, "first_name":, "last_name":, "username":, "gender":, "locale":} 
```

（删除的值）

发生了什么事，`link`我该如何取回？如果我通过 Graph API Explorer 请求完全相同的内容，我仍然会得到链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:42:27.080

不完全确定为什么此处缺少链接字段，但这里有一些可能的解决方案：

首先，您可以尝试使用“/me”而不是“/user-id”。我在一个带有 fb 集成的网站上执行此操作，它会返回一个链接。

其次，您可以尝试专门询问该字段。您可以将所需字段附加到图形 api 调用中，例如“/123456789?fields=link,first_name”

最后，如果一切都失败了，您总是可以使用您拥有的用户 ID 生成链接。例如：var url = "http://www.facebook.com/" + userId；

我意识到这并不能解释您的回复中没有链接字段，但希望它能帮助您找到解决方案。

# c++ - 是否有带有完整堆栈跟踪的 mtrace？还是可以简单地对其进行修改以具有此功能？

> ID：10554294
> 
> 赞同：4
> 
> 时间：2012-05-11T15:25:32.510
> 
> 标签：c++, memory-management, profiling, mtrace

在分析大型应用程序的内存消耗期间，我使用来自 glibc 的 mtrace。但问题是它只给出了 malloc 调用的来源，而不是完整的堆栈跟踪。因此，如果我在许多地方使用的方法中使用 malloc，我只会报告一个无法区分的 malloc 来源。另一个问题是标准 c 库和 CSimpleArray 等通用对象。我只知道有人使用了巨大的数组，但不知道具体是谁。

所以我认为我需要完整的堆栈跟踪才能知道谁使用了 malloc。你知道是否存在这样的 mtrace 变体吗？还是可以简单地修改它来做到这一点？

只是备注：我的 mtrace.out 日志包含 300k 行，在使用 mtrace 脚本处理后它有 10k 条目。如果我只本地化 10% 的最大块，这对我来说就足够了。

# javascript - 从超链接拖动时，书签在 IE9 中不起作用，但在编辑后起作用

> ID：10554295
> 
> 赞同：1
> 
> 时间：2012-05-11T15:25:34.720
> 
> 标签：javascript, jquery, dynamic, internet-explorer-9, bookmarklet

我创建了一个小书签，将数据从我的站点加载到第三方站点上的对话框中。

*   这是为了帮助第三方网站的用户使用手动完成时很乏味的功能。
*   当从图像超链接拖动到 Chrome 和 Firefox 中的收藏夹/书签栏时，小书签可以工作
*   但是，在 IE(9) 中，我只能通过更改一些数据来编辑超链接并将其放回原处，然后单击“确定”。内容不变

我在下面粘贴了我的脚本的通用版本

```
function loadScript(url, callback) {
    var script = document.createElement("script");
    script.type = "text/javascript";
    if (script.readyState) {
        script.onreadystatechange = function() {
            if (script.readyState == "loaded"
                    || script.readyState == "complete") {
                script.onreadystatechange = null;
                callback();
            }
        };
    } else {
        script.onload = function() {
            callback();
        };
    }
    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
}
if (typeof (runMyCode) == "undefined") {
    loadScript(
            "http://mysite/myscript.js",
            function() {
                runMyCode();
            });
} else {
    runMyCode();
} 
```

如果我删除最后一个分号并保存书签，它可以工作：/

编辑：在下面添加了 html

```
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>My tile</title>
<link rel="icon" type="image/vnd.microsoft.icon" href="favicon.ico">        
</head>
<body>
<a href="javascript:function loadScript(url, callback) {    var script = document.createElement(&quot;script&quot;);    script.type = &quot;text/javascript&quot;;  if(script.readyState) {     script.onreadystatechange = function() {            if (script.readyState == &quot;loaded&quot;                 || script.readyState == &quot;complete&quot;) {     script.onreadystatechange = null;   callback();         }       };  } else {    script.onload = function() {            callback();     };  }   script.src = url;   document.getElementsByTagName(&quot;head&quot;)[0].appendChild(script);}if (typeof(runMyCode) == &quot;undefined&quot;) {loadScript(&quot;http://mysite/myscript.js&quot;,function() {runMyCode();});} else{ runMyCode();}"
title="Drag me to your Bookmark and click me to check your remaining tiles in a game">
<img border="0" alt="My Alt Text" src="http://mysite/myimage" />
</a>

<br/>
<span>Drag the image above to your bookmarks toolbar<br/>and more text</span>
</body>
</html> 
```

# iphone - 在另一个位置绘制的身体

> ID：10554298
> 
> 赞同：0
> 
> 时间：2012-05-11T15:25:45.053
> 
> 标签：iphone, cocos2d-iphone

我有一个 CCSprite（其中我有一个 b2body）；范围是创建一个随身体移动到一个位置并返回的精灵；

我以这种方式创建 b2body：

```
 if (_body) 
    {
        _world->DestroyBody(_body);
    }

    b2BodyDef bd;
    bd.type = b2_kinematicBody;

    _body = _world->CreateBody(&bd);

    b2PolygonShape shape;

    b2Vec2 _p1, _p2 , _p1sub,_p2sub;

    _p1 = b2Vec2(point1.x/PTM_RATIO,point1.y/PTM_RATIO);
    _p2 = b2Vec2(point2.x/PTM_RATIO,point2.y/PTM_RATIO);

    shape.SetAsEdge(_p1, _p2);
    _body->CreateFixture(&shape, 0); 
```

创建主体后，我初始化动作：

```
id a1 = [CCMoveBy actionWithDuration:1 position:ccp(0,-self.position.y+destinationPoint.y)];
        id action2 = [CCRepeatForever actionWithAction:
                      [CCSequence actions: [[a1 copy] autorelease], [a1 reverse], nil]
                      ];
        [self runAction:action2]; 
```

在每一帧上，我都会更新身体位置

```
 _body->SetTransform(b2Vec2(self.position.x/PTM_RATIO,self.position.y/PTM_RATIO), 0); 
```

问题是它们都被绘制了，但是精灵在正确的位置，而身体却没有；动作是连贯的

仅供参考，我在整个游戏中都使用 PTM_RATIO，所以这肯定不是问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:40:14.333

请记住，精灵的位置将是其父位置的偏移量。如果父节点不是 CCNode、CCScene 或 CCLayer（或它们的位置不是 0,0），则精灵将被父节点的位置偏移。

For example, a sprite (let's call it S) with dimensions (contentSize) of 100,100 is located at position 0,0\. Now you add a child node to S. The child node's position (unless modified) will be at -50,-50 due to the fact that child nodes orient themselves on their parent's lower left corner instead of the parent's actual position. This frequently throws even the most experienced cocos2d programmers off guard.

# asp.net-mvc - 在 MVC 架构中，项目何时应该有自己的控制器？

> ID：10554302
> 
> 赞同：4
> 
> 时间：2012-05-11T15:26:03.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, controller

我目前正在构建一个 MVC 应用程序（尤其是 ASP.NET，但我想这也是一个更广泛的问题）。我已经在几个不同的情况下看到过这个问题，但是我无法从这些讨论中弄清楚我自己的情况。我有控制器，例如：

*   家庭控制器
*   帐户控制器
*   EventController（我们的客户有事件）
*   MenuController（网站导航）
*   报告控制器

我也有一些用控制器不太清楚管理的项目，这就是我的问题所在。注册后，我们的客户需要填写他们“个人资料”的许多不同方面，例如商业信息、支付卡、银行帐户、经理联系人（姓名/电话）。

目前我们已经创建了一个“ProfileController”，具有发布/获取功能，例如：

```
 [HttpGet]
    public ActionResult Business()

    [HttpPost]
    public ActionResult Business(...) 
```

他们的银行账户信息、支付卡、经理等也会有类似的东西。

这感觉不对。这一切都应该移到 AccountController 中吗？这些项目是否真的不值得拥有自己的控制器，或者这些组件中的每一个都应该有自己的控制器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:22:23.373

开发 MVC 应用程序类似于开发 REST 应用程序，您可以将 REST 原理应用于开发 MVC 应用程序。首先，您必须考虑资源。根据 REST，资源是可以通过 URL 访问的实体。

如果您觉得上面所说的每个模型都是一个资源，并且用户可以通过单独的 URL 访问它，那么您可以继续为每个其他模型创建一个单独的控制器，单个 AccountController 就可以了。

如果您绘制资源和 URL，那么您可以轻松地确定您必须在应用程序中创建多少个控制器。

# c# - 委托方法 - 如果我不知道什么类型或多少个参数，如何调用和传递参数

> ID：10554306
> 
> 赞同：2
> 
> 时间：2012-05-11T15:26:23.387
> 
> 标签：c#, delegates

假设我有一个代表...

```
public delegate void MyAction(params object[] args); 
```

还有一个带有使用该 delagate 的子类的类...

```
public class MyClass {
    public List<MySubClass> mySubClasses;
}

public class MySubClass {
    public string myString;
    public MyAction myDelegateMethod;
} 
```

我希望能够`myDelegateMethod`在运行时将任何方法传递给 ，它可以接受任意数量的不同类型的参数。像这样的东西...

```
MyClass myClass = new MyClass(){
    mySubClasses = {
        new MySubClass {
            myString = "help",
            myDelegateMethod = Method1 
        },
        new MySubClass {
            myString = "me",
            myDelegateMethod = Method2 
        }
    }   
};

public string Method1(object myObject) { ... }
public string Method2(string value, Guid id) { ... } 
```

我将如何在运行时调用这些方法中的每一个并传递适当的参数？

```
myClass.mySubClasses.ForEach(x => {
    x.myDelegateMethod; // <-- this is where I'm stumped. how do i pass arguments here?
}); 
```

这可能吗？也许我有什么实施错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:35:08.083

这是不可能的，因为`Method1`并且`Method2`不是`void <Name> (params object)`代表。考虑到它们返回不同的值并采用不同的参数来执行，它们不是相同的类型（甚至可以通过变型转换为兼容的类型）。

如果您想执行任意方法，那么我能想到的唯一方法是将包装的方法执行作为一个动作：

```
var sample = new List<MyClass>
{
    new MyClass
    {
        SomeProperty = "Help",
        Method = new Action(() =>
          {
              ExecuteMethod1("Hello", "World");
          })
    },
    new MyClass
    {
        SomeProperty = "Me",
        Method = new Action(() =>
          {
              ExecuteMethod2(1, 2, 3, 4);
          })
    },
}; 
```

然后你可以像这样执行：

```
myClass.ForEach(x => x.Method()); 
```

在这种情况下，您需要显式包装您想要执行的任何操作（使用创建时已知的参数）您想要坚持的方法`Method`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:38:07.097

首先 Method2 不能用作您的委托。这样做也不是一个好习惯。您可以尝试通过反射来实现，但对于阅读您的代码的其他人来说，这将是难以理解的。因此，我认为，您应该使用所有方法，例如委托类型，但要强制转换为需要方法内部的类型，如下所示：

```
public void Method1(params object[] pars)
{
    string value = (string)pars[0];
    Guid id = (Guid)pars[1];
} 
```

或使用先前答案中的某种闭包。

# javascript - 如何从子函数 (JavaScript) 中更改函数的返回值

> ID：10554307
> 
> 赞同：0
> 
> 时间：2012-05-11T15:26:27.397
> 
> 标签：javascript, function, scope

当检测到假期时，我无法让以下函数返回 true。警报正确触发，但结果始终返回 false。我知道这是变量范围的问题，但不确定如何*正确*修复它。

```
function isHoliday(date,currentProvince) {
  var calDate = new Date(date);
  var result = false;
  $.get(
    "@Url.Content("~/Holidays/HolidayList/?province=")"+currentProvince, 
    function(data) {
      for (h=0; h<data.length; h++) {
        holidayDate = new Date(
          parseInt(data[h].date.replace("\/Date\(","").replace("\)\/",""))
        );
        if (holidayDate.getTime() == calDate.getTime()) {
          alert("HOLIDAY");
          result = true;
        }
      }
    }
  );

  return result;
} 
```

我是否能够以某种方式更改 $.get 语句中函数（数据）的参数以将变量传入和传出？还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:29:16.723

函数在ajax调用完成之前返回；这就是回调的`$.get`用途，以及为什么这是*异步*的。

如果你想从这个 ajax 调用中得到结果，那么你需要连接你的其余逻辑作为这个调用的回调，如下所示：

```
function isHoliday(date,currentProvince, callback) {

                var calDate = new Date(date);
                $.get("@Url.Content("~/Holidays/HolidayList/?province=")"+currentProvince, function(data) {
                    for (h=0; h<data.length; h++) {
                        holidayDate= new Date(parseInt(data[h].date.replace("\/Date\(","").replace("\)\/","")));
                        if (holidayDate.getTime() == calDate.getTime()) {
                            alert("HOLIDAY");
                            callback(true);
                        }
                        else
                        {
                            callback(false);
                        }
                    }
                 });
             } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:28:17.193

普通函数返回并退出该函数。

相反，在执行异步ajax请求时，它必须任意等待，直到请求完成并发回给您。

因此，当您的函数执行 ajax 调用时，您不能依赖函数返回值。

解决该问题的一种不错的方法是将回调写入您的函数，如下所示：

```
function isHoliday(date,currentProvince, myCallback) {
    var calDate = new Date(date);
    var result = false;
    $.get("@Url.Content("~/Holidays/HolidayList/?province=")"+currentProvince, function(data) {

        myCallback();

    });
}

var callback = function() {
    for (h=0; h<data.length; h++) {
        holidayDate= new Date(parseInt(data[h].date.replace("\/Date\(","").replace("\)\/","")));
        if (holidayDate.getTime() == calDate.getTime()) {
            alert("HOLIDAY");
            result = true;
        }
    }
    //do whatever else you need to do after the ajax completes
};

isHoliday("12/01/19", "someProvince", callback); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:28:55.213

您的 get 请求是异步的，但 javascript 会继续执行。因此，它`return result`在处理get请求之前到达

# javascript - 从动作脚本文件调用 .js 文件中的 Js 函数

> ID：10554311
> 
> 赞同：1
> 
> 时间：2012-05-11T15:26:55.447
> 
> 标签：javascript, actionscript-3, air

有没有办法从动作脚本文件中调用 .js 文件中的 Js 函数（这里，我的意思是“独立”的 .js 文件，而不是嵌入在 html 标签中的 js 文件）

假设我有一个文件**lib.js**，在其中，我有两个函数**hello(str)**和**bye(str)**。

现在，我希望我的 Calculator.as 类中的函数**sayHello(str)**能够执行以下操作：

```
function sayHello(str:String) : void {
    hello(str)
    ...........
    ...........
    bye(str)
} 
```

有可能有这样的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:29:46.540

您可以使用 ExternalInterface.call 调用 javascript 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:29:49.643

如果JS文件是用flash加载到站点的，可以使用`ExternalInterface.call("hello", str)`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:48:27.503

你可以试试这个[http://livedocs.adobe.com/flex/3/html/help.html?content=ProgrammingHTMLAndJavaScript_02.html](http://livedocs.adobe.com/flex/3/html/help.html?content=ProgrammingHTMLAndJavaScript_02.html)

# c# - 将大型报表（水晶报表）导出为 pdf 时出现内存不足异常

> ID：10554318
> 
> 赞同：0
> 
> 时间：2012-05-11T15:27:16.393
> 
> 标签：c#, crystal-reports

我们有一个 Windows 应用程序，它处理一些报告并将它们导出为 PDF 格式。问题是我们的一些客户拥有庞大的数据库。因此，报告可能包含数千页。在这种情况下，我们内存不足异常。我想知道是否可以将包含数千页的大型报告导出为 pdf 格式。我还想知道水晶报告是否支持最大页数。

先感谢您

# jquery - 访问被拒绝 IE：form.submit() 文件上传 jquery 插件

> ID：10554319
> 
> 赞同：2
> 
> 时间：2012-05-11T15:27:26.913
> 
> 标签：jquery, file, plugins, upload

我正在使用 blueimp / jQuery-File-Upload，并且在 Internet Explorer（所有版本）上出现“拒绝访问”错误。其实是jQuery报错，jquery.js,line 3241 character 6 开发库。流程是这样的：点击一个按钮，触发输入文件按钮，监听 onchange 事件并开始上传。然后我得到这个错误，我不知道它来自哪里。

这个你能帮我吗。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T16:31:54.247

我最近在使用同一个插件时遇到了类似的问题，原因是：我使用 JavaScript 来触发对文件输入的单击，而不是依赖于对文件输入本身的单击。问题是，IE 不喜欢这样。它不会让您使用 JavaScript 提交包含通过 JavaScript 添加的数据的文件输入字段的表单。

没有办法解决这个问题 - 除了允许他们直接单击文件输入字段，而不是使用 JavaScript 触发。我触发点击的原因是出于风格原因。我想使用链接而不是实际的文件字段，但是使用一些花哨的 CSS 我仍然能够获得相同的外观。

[http://pastebin.com/qcYPUR6p](http://pastebin.com/qcYPUR6p)

# jquery - $.post 总是返回 undefine

> ID：10554320
> 
> 赞同：2
> 
> 时间：2012-05-11T15:27:27.223
> 
> 标签：jquery, ajax, callback

当我进行以下 jQuery 调用时

```
$.post('/publish/comments', 
  parms,
  function(data, textStatus){
    console.log('textStatus: ' . textStatus);
    console.log('returned data: ' . data);
    console.log('nextPage: ' . data.nextPage);
  },
  "json"
); 
```

控制台显示 data、textStatus 和 data.nextPage 都是未定义的。

但在 Chrome 开发工具（网络选项卡）中，我可以看到以下 JSON 数据正在从服务器传回。

```
{success:true, nextPage: /go/page/requestId/182/src/publish}
nextPage: "/go/page/requestId/182/src/send"
success: true 
```

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T15:30:21.013

正如 Felix 指出的那样，连接需要“+”

另外，我发现如果你想记录整个对象，你不想在你的 console.log() 中包含字符串。

尝试`console.log(data)`不要在其前面放置字符串（如“数据：”），这将保证可以在控制台中看到整个对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T15:30:38.613

您需要使用`+`运算符而不是`.`php 中使用的运算符来连接

```
$.post('/publish/comments', 
       parms,
       function(data, textStatus){
                            console.log('textStatus: ' + textStatus);
                            console.log('returned data: '+ data);
                            console.log('nextPage: ' + data.nextPage);    
       },
       "json"
       ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:33:46.923

尝试使用此 Code Pattern 登录到控制台：

```
console.log(['textStatus', textStatus]); 
```

这允许将消息和对象打印到控制台。

That said, `'textStatus: ' . textStatus` is `undefined` because JavaScript strings don't have a property `textStatus` (`.` is the "access property" operator not the PHP concat operator)

# ios - ios EXC_BAD_ACCESS 在一个实现上

> ID：10554321
> 
> 赞同：1
> 
> 时间：2012-05-11T15:27:31.880
> 
> 标签：ios, implementation, exc-bad-access

```
@implementation ContentView // <-- EXC_BAD_ACCESS on this line 
```

`self`从断点开始的日志：

```
<ContentView: 0x96a4690; frame = (0 0; 0 0); transform = [0, 0, 0, 0, 0, 0]; alpha = 0; autoresize = RM+BM; autoresizesSubviews = NO; layer = (null)> 
```

这里发生了什么？我的对象不见​​了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:20:35.613

我写这个是为了解释 EXC_BAD_ACCESS

[http://loufranco.com/blog/files/Understanding-EXC_BAD_ACCESS.html](http://loufranco.com/blog/files/Understanding-EXC_BAD_ACCESS.html)

基本上，这是因为您使用的内存未映射到您的进程。这通常是因为您正在访问已释放的对象或堆已损坏。您显示的代码行不可执行 - 它不会导致可能触发此错误的“内存使用”。

为了帮助调试它：

1.  运行分析并修复它标记的所有内容
2.  打开 Zombies，看看它是否抱怨您正在向已释放的对象发送消息。

# ruby-on-rails - 使用 redis ruby gem，如何从匹配模式的 redis 中清除一组键？

> ID：10554324
> 
> 赞同：4
> 
> 时间：2012-05-11T15:27:43.013
> 
> 标签：ruby-on-rails, ruby, caching, heroku, redis

我将 Redis 与 Ruby on Rails 一起使用。

如果可以的话，我想在一次操作中从 redis 中删除一整组键。我正在使用`redis.rb`宝石。密钥来自我的测试环境生成的条目，并且都包含字符串'：test：'。

谢谢 -

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:57:55.507

AFAIK client.del "some_key" 将尝试删除 somekey*

# google-apps-script - 提示用户下载“userAppPanel”？

> ID：10554336
> 
> 赞同：0
> 
> 时间：2012-05-11T15:28:37.543
> 
> 标签：google-apps-script

我有一个脚本，基本上要求用户选择他想要使用的商店。它的工作方式是脚本读取所有用户组，创建一个 UiInstance，其中包含：

*   描述预期操作的标签
*   单选按钮列表，每个商店一个
*   带有 serverHandler 的提交按钮。

这些元素包含在一个verticalPanel 中。

当代码到达

```
doc.show(app); 
```

它显示了一个空的 UiInstance，片刻之后，会出现一个“另存为”对话框。

（没有足够的代表发布附件）

单击取消不会执行任何操作。

这台电脑运行的是 Chrome 18.0.1025.168 m，与我用来开发脚本的版本相同……它在我的机器上完美运行。

关于发生了什么的任何想法？

* * *

编辑：好吧，虽然（对我来说）这真的没有意义，但我想我已经弄清楚了。如果正在运行的用户与创建脚本的用户位于不同的域中，则会收到警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T04:00:48.957

我也有同样的问题。但是，Juan Pablo，我认为这与来自不同的域无关，因为对我来说它发生在同一个域中。它似乎确实与运行脚本的人是否是所有者有关。屁股疼。如果您找到解决方法，请告诉我:)

编辑：

经过几次测试后，有关此的更多详细信息。这似乎是由于用户触发脚本执行，以及触发器的特性： - 如果从电子表格中的自定义菜单调用函数，那么每个人都可以正常工作 - 如上所述，如果调用函数onOpen()，每个人都可以正常工作 - 如果在函数上设置了可安装的 onEdit 或 onOpen 触发器，那么设置它的人一切正常，但对其他人不利。无论该人是否是所有者，都会观察最后的行为。

基本上，它似乎唯一不能正常工作的时候是有人打开或编辑电子表格并且该功能由其他人安装的可安装触发器触发。

这是一种痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:11:24.017

当我忘记返回 UiApp 时，我遇到了这个错误。

当您看到此错误时，是在应用程序的初始显示中还是在您触发另一个功能（如单击按钮）之后？

如果是后者（动作后），而不是`doc.show(app);`使用`return app;` 电子表格的ui，还是需要`doc.show(app);`第一次使用，但是后续更新app应该使用return app；

# qt - 将 Qt 3.x 形式转换为 Qt 4.x 形式

> ID：10554341
> 
> 赞同：0
> 
> 时间：2012-05-11T15:28:54.557
> 
> 标签：qt, visual-studio-2008, qt4

我有用 Qt3 编写的 Qt ui 表单，我想更新它们以集成到 Qt4 项目中。当我在 Qt Designer 中打开它们时，程序会给出一条消息：“此文件是使用 Qt-3.3 中的 Designer 创建的，将由 Qt Designer 转换为新形式。旧形式尚未触及，但您必须以新名称保存表单。”

自然，我用新名称保存文件。然后我在关闭 Qt Designer 后删除原始文件并将转换后的文件重命名为相同的名称。当我清理目录并运行 qmake 后打开 VS2008 时，ui 文件出现在项目中，但是当我尝试打开它们时，出现错误：“无法使用 Qt 4 表单编辑器打开文件。尝试使用转换文件uic.exe"

应该注意的是，在 Qt Designer 中保存文件（并重命名）后，文件在 Qt Designer 中正确打开，没有任何警告。使用 uic.exe，我在我的研究中被引导到这个页面：http: [//doc.qt.io/archives/qt-4.7/qt3to4.html](http://doc.qt.io/archives/qt-4.7/qt3to4.html)

我尝试按照 Qt 3 到 4 指南的建议运行命令：“uic3 -convert myform3.ui > myform4.ui”（当然，文件名已更改）。生成的文件是空的。

总结：

我尝试使用 Qt Designer 进行简单的重新保存。

我试图运行 uic3.exe

我试图删除文件的第一行，这里建议：[无法从 Visual Studio 打开 Qt 表单 (*.ui) 文件](https://stackoverflow.com/questions/1109300/unable-to-open-qt-form-ui-files-from-visual-studio)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:03:34.630

确保使用带有 Qt 4.6.4 命令提示符的 Visual Studio。您可以通过从 Qt 安装中加载链接或先运行以下命令来执行此操作：

```
C:\Qt\4.6.4\bin\qtvars.bat vsvars 
```

然后，您将能够`uic3`从命令提示符运行。

# ruby - Ruby - 使用 IRB 测试新 gem 的工作方式

> ID：10554347
> 
> 赞同：0
> 
> 时间：2012-05-11T15:29:02.153
> 
> 标签：ruby, rubygems, irb

我刚刚下载了包装器 gem 以通过 Rby 连接到linkedin

```
gem install linkedin 
```

这个宝石的起源在这里：[https ://github.com/genadinik/linkedin](https://github.com/genadinik/linkedin)

现在我正在学习 IRB 来尝试测试它。

这个 gem 的目的是成为处理 LinkedIn 连接的 Ruby 包装器。但我不确定如何测试它是否有效。我将如何调用它并测试我的连接键是否可以连接，然后运行命令？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:35:43.493

您基本上采用您尝试测试的示例代码，并一次输入一行到 IRB。例如，如果我想测试来自[https://github.com/genadinik/linkedin](https://github.com/genadinik/linkedin)的示例代码：

```
$ irb
1.9.2p290 :001 > require 'rubygems'
 => false 
1.9.2p290 :002 > require 'linkedin'
 => true 
1.9.2p290 :003 > client = LinkedIn::Client.new('your_consumer_key', 'your_consumer_secret')
 => #<LinkedIn::Client:0x007fd48b09fdc8 @consumer_token="your_consumer_key",@consumer_secret="your_consumer_secret", @consumer_options={}> 
```

等等。输入后以 => 开头的行代表输入的返回值。希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:35:57.570

首先打开命令提示符并键入：

```
> irb
irb> require 'linkedin'
irb> #code from the linkedin gem readme 
```

# php - 使用函数时如何获取实际变量而不是副本

> ID：10554348
> 
> 赞同：0
> 
> 时间：2012-05-11T15:29:03.107
> 
> 标签：php

正如标题所暗示的，我有一个函数，我对一个数组进行了一些更改（这个数组是我的参数）。然后我意识到我使用了我的实际数组的副本。

我知道有一种方法可以获取实际数组而不是副本，它是什么？提前谢谢大家，我知道你会很快解决这个问题:)

这是我使用它的地方

```
function findChildren($listOfParents)
    {
        static $depth=-1;
        $depth++;

        foreach ($listOfParents as $thisParent)
        {
            $thisParent->title = str_repeat(" >", $depth) . $thisParent->title;
            $children = page::model()->findAll(array('condition'=>'parent = ' . $thisParent->id));
            findChildren($children);
        }

        $depth--;
    } 
```

所以我需要这个 $listOfParents，而不是他的副本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:31:54.513

尝试通过引用传递值

```
function findChildren(&$listOfParents)
    {
        static $depth=-1;
        $depth++;

        foreach ($listOfParents as $thisParent)
        {
            $thisParent->title = str_repeat(" >", $depth) . $thisParent->title;
            $children = page::model()->findAll(array('condition'=>'parent = ' . $thisParent->id));
            findChildren($children);
        }

        $depth--;
    } 
```

请注意与`&`号，它表示您正在处理原始变量，而不是副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:32:01.860

您正在谈论通过引用传递变量：http: [//php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

试试这个：

```
function findChildren(&$listOfParents)
    {
        static $depth=-1;
        $depth++;

        foreach ($listOfParents as $thisParent)
        {
            $thisParent->title = str_repeat(" >", $depth) . $thisParent->title;
            $children = page::model()->findAll(array('condition'=>'parent = ' . $thisParent->id));
            findChildren($children);
        }

        $depth--;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:32:26.780

[通过引用传递它](http://php.net/manual/en/language.references.pass.php)。

```
function funcName (array &$param)
{
    // Do work here
} 
```

# user-interface - 我应该使用什么 ASP MVC Telerik 组件来实现带有图片的自动建议组合框？

> ID：10554349
> 
> 赞同：0
> 
> 时间：2012-05-11T15:29:11.283
> 
> 标签：user-interface, telerik, telerik-mvc

我的客户正在使用 Telerik ASP MVC [ASP MVC](http://www.telerik.com/products/aspnet-mvc.aspx)组件。所以我想知道我应该使用什么特定组件来实现带有图片的自动建议组合框（类似于 LinkedIn - 请参见下面的屏幕截图）？

![LinkedIn 自动推荐图片](../Images/e46bf543d2c3e503edd66f938235a52a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T18:57:24.787

没有这样的组件允许您像这样对其进行模板化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:05:33.437

[使用Kendo UI Autocomplete](http://demos.kendoui.com/web/autocomplete/index.html)以及一些自定义功能实际上可以实现此功能。我们已经在[docs.kendoui.c​​om](http://docs.kendoui.com)网站和[Kendo Music Store Sample](https://github.com/telerik/kendo-music-store)上进行了搜索，您可以查看后者的来源以了解更多信息。

希望有帮助。

# php - 为什么本地主机上的 php 时区是正确的，但上传到服务器后却不正确？

> ID：10554350
> 
> 赞同：1
> 
> 时间：2012-05-11T15:29:15.587
> 
> 标签：php, mysql, datetime, timezone, phpmyadmin

我正在使用php和mysql。当我将时间值插入本地主机上的 mysql 数据库时，将应用正确的时间。我正在使用该`now()`功能。

当我将时间值插入我的虚拟主机帐户上的 my_sql 数据库时，它显示了错误的时区。

如果来自不同时区的用户发布了某些内容，并且我在我的时区查看它，我该如何设置它以便显示给用户的时间与用户查看它的位置相关。

```
$sql1="INSERT INTO notifications (stamp) 
            VALUES (now()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:30:23.090

您的服务器位于不同的时区。

您可以在 PHP 和 MySQL 中设置时区。

```
date_default_timezone_set('America/Los_Angeles'); 
```

在 MySQL 中：

```
SET time_zone = 'America/Los_Angeles'; 
```

或者，您可以将时间存储为`timestamp`列，这些列在基础数据中始终为 UTC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:31:42.090

从[文档中`NOW()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)：

> 该值以当前时区表示。

因此，如果您的本地计算机与主机计算机处于不同的时区，您*将*看到不同的结果。

您可能要考虑[`UTC_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_utc-timestamp)改用。（我不清楚`DATETIME`如果在适当的上下文中使用它是否会返回一个值，但这可能就是你想要的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:31:26.553

您的网络服务器 php.ini 可能设置了不同的时区。

您可以通过在您的 php 文件中更改它[`date_default_timezone_set()`](http://de.php.net/manual/en/function.date-default-timezone-set.php)

# git - 反向分叉 .. 从另一个 repo 中提取 repo

> ID：10554354
> 
> 赞同：1
> 
> 时间：2012-05-11T15:29:39.233
> 
> 标签：git, github, git-fork

我在 github 上打开了一个 repo，之后开始编码，我发现我自己为我的域中的项目构建了一个通用应用程序模型，现在我想将应用程序模型从我的 repo 提取到另一个 repo。

我可以分叉回购并删除与我的项目相关的文件，特别是与我的项目相关的文件，但我会错过使用“分叉”操作。

还有这个命令

```
git merge origin/upstream 
```

将重现我的项目特定文件。

听起来像是反向分叉..如何实现？

# ios - 我认为卡在 for 循环中，不能使用在循环之外设置的变量？

> ID：10554357
> 
> 赞同：0
> 
> 时间：2012-05-11T15:29:49.750
> 
> 标签：ios, variables, loops, for-loop, global-variables

好的，所以我的程序似乎运行良好并完成了我需要的所有计算，程序需要的最后一块是递增的切割清单。所以我尝试构建一个 NSMutable 数组并使用以前设置的变量，我最终将使用这些变量填充一个表。只有当我运行代码并点击计算按钮时，程序才会冻结，并且在 NSLOG 等中没有显示任何内容。我可以不使用在 for 循环之外设置的先前变量吗？还是怎么回事？

```
-(IBAction)calculateGo
{
    BuildNavAppDelegate *buildNavDelegate = (BuildNavAppDelegate *)[[UIApplication sharedApplication] delegate];

    float iridge = ([ridge.text intValue]);
    float ihip = ([hip.text intValue]);
    float ispacing = ([rafterSpace.text intValue]);

    float floatTLPMR = [buildNavDelegate.TLPMR floatValue];
    int floatRafter = [buildNavDelegate.raftThicknessPassed intValue];
    int comraftbird = [buildNavDelegate.comRaftBirdPassed intValue];

    float mitre = (45 * M_PI) / 180;
    float y = tanf(mitre);
    float mitreThickness = sqrt((y*y)+1) * ihip;

    float TLRafterSpace = (floatTLPMR * ispacing);

    float firstCreeper =  (TLRafterSpace + (mitreThickness/2))-(floatRafter/2);
    firstCreep.text = [[NSString alloc] initWithFormat:@"%.1f", firstCreeper];

    float comSetBack = floatTLPMR * (iridge/2);
    comRaftSetBack.text = [[NSString alloc] initWithFormat:@"%.1f", comSetBack];

    float crownSetBack = (floatTLPMR * (floatRafter/2));
    crownEndSetBack.text = [[NSString alloc] initWithFormat:@"%.1f", crownSetBack];

    creeperArray = [[NSMutableArray alloc] initWithCapacity:20];

for (int x = firstCreeper; x <= comraftbird; x + TLRafterSpace) {
[creeperArray addObject:[NSString stringWithFormat:@"%d", x]];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:35:19.957

您陷入了无限循环，因为您忘记增加 的值`x`：

```
for (int x = firstCreeper; x <= comraftbird; x + TLRafterSpace)
                                             ^^^^^^^^^^^^^^^^^ 
```

那应该是：

```
for (int x = firstCreeper; x <= comraftbird; x += TLRafterSpace) 
```

# jquery - jquery keypress 函数在不同浏览器中的不同时间触发

> ID：10554363
> 
> 赞同：1
> 
> 时间：2012-05-11T15:30:14.417
> 
> 标签：jquery, keypress

我试图在一定数量的字符后自动跳转到第二行。我正在使用 jquery 中的 keypress 函数来执行此操作。这是我的代码：

```
<html>
<head>
    <script type="text/javascript" src="http://inet.website-name.com/jquery/jquery-1.7.min.js"></script>
</head>
<body>
    <input id="input1"></input>
    <br />
    <input id="input2"></input>
    <script type="text/javascript">
        $('#input1').keypress(function (e) {
            var tval = $('#input1').val();
            if (tval.length >= 5 && e.which !== 0 && e.charCode !== 0) {
                $('#input2').focus();
            }
        })      
    </script>
</body>
</html> 
```

我遇到的问题是，当它在 chrome 中运行时，在第一个框中键入第 6 个字符，然后将焦点更改为第二个框。当它在 Internet Explorer 中运行时，焦点首先变为第二个框，然后键入第 6 个字符。我需要它在两个浏览器中具有相同的行为。

我尝试使用 keydown 事件，它可以始终如一地改变焦点，但即使我使用退格键、箭头键或任何其他特殊键，焦点也会改变。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:27:10.630

您可以将其切换到 keyup 事件并且它会起作用，尽管您将无法使用 e.charCode 检查（是否有原因？）。另请注意**>= 5**已更改为 a **> 5**

```
 $('#input1').keyup(function (e) {
         var c = String.fromCharCode(e.keyCode);
         var isWordcharacter = c.match(/\w/);//matches a-z, A-Z, 0-9, and _
         var tval = $('#input1').val();
         if (tval.length > 5 && e.which !== 0 && isWordcharacter) {
             $('#input2').focus();
         }
    }); 
```

[小提琴](http://jsfiddle.net/fbfcn/2aaBN/5/)

# python - 应用程序和媒体服务器之间的文件传输

> ID：10554365
> 
> 赞同：4
> 
> 时间：2012-05-11T15:30:16.787
> 
> 标签：python, django

我有一个多服务器设置，两个盒子通过 Django 处理动态请求，还有一个静态/媒体文件服务器，使用 NginX 服务。

我的问题是：将上传的媒体文件从 django 盒子传输到媒体服务器的推荐方法是什么？

主要问题是通过管理员上传的文件。所有用户生成的内容都放在一个 celery 队列中，该队列使用 sftp 拉取文件，并调整它们的大小。但是，在管理中上传的文件应该在请求中处理，以便在内容更改时准备好。

我尝试了两种选择：

*   使用 django-storages 的 sftp 后端。这给了我来自底层 paramiko 的错误。
*   使用 NFS 挂载，这给了我很多权限问题。

那么推荐的方法是什么？或者其他人如何做到这一点？SFTP、SCP、SSHFS、NFS、CIFS、WebDav 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:26:52.620

您的文件上传是否与任何模型相关？如果是这样，请将存储媒体设置为您的媒体服务器，并且当您使用上传的文件创建/保存具有 FileField 的 models.py 中定义的对象时，它将自动将其保存到指定的存储媒体。以下是文档：[https ://docs.djangoproject.com/en/dev/topics/files/#the-built-in-filesystem-storage-class](https://docs.djangoproject.com/en/dev/topics/files/#the-built-in-filesystem-storage-class)

# java - 是否有用于集合处理的 Java 库？

> ID：10554370
> 
> 赞同：1
> 
> 时间：2012-05-11T15:30:40.487
> 
> 标签：java, exception, collections

我必须每月浏览一次包含 150,000 多个项目的集合，并且发生的所有事情大约需要 3 到 4 个小时，这很好。问题是有时一些数据会抛出一个`exception`（当然，这在我的第一次测试运行中没有发生，直到像项目 148,000 一样）。我只是将它设置为在逻辑上忽略异常（当然记录它），但我意识到我并不总是想简单地忽略异常。

我写了一个简单的异常处理程序，它处理不同类型的异常以及如果发生某种类型的异常该怎么办；例如，如果我得到一个`SQLException`我会中止这个过程，但`NullPointerException`我会继续，因为这通常是数据的问题。我还跟踪异常的总数，如果达到预设限制，我也会终止该进程。

所以我的问题是：我将构建更多这样的程序来处理不同类型的数据`Collections`。是否有处理集合和处理不同类型异常的库？

以下是我根据评论请求添加的一些代码。如果您对自己说：“好吧，这就是您想要它做的事情，问题是什么？”，您是对的。但是我想知道是否存在一个库，可以让我注册异常以及遇到时该怎么办。比如我想在发生A或D类型的异常时停止处理，当B发生时继续，除非它发生X次，当C发生时继续，除非它发生Y次，完全忽略E。主要是因为我知道我有不同的数据集，`collections`我和其他人将在未来使用并希望使用一致的东西。

基本代码片段：

```
exeptionLimit = 50;
exceptionCount = 0;
for (long id : MyCollection)
{
     try
     {
         //All these methods throw the exceptions 
         Item item = getItemById(id);
         NewData data = ProcessItem(item);
         SaveNewData(data);
     }
     catch (SQLException e)
     {
         //log

         throw e; //I want this to cause the process to fail
     }
     catch (NullPointerException e)
     {
          //log
          exceptionCount++;
          if (exceptionCount >= exceptionLimit) throw new Exception("Limit hit!");
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:35:33.513

A`Collection`表示数据的逻辑分组和对数据进行操作的一组函数。
您可以找到提供高级数据结构和更好性能的库，`JDK`但如果我正确理解了您的问题，您需要了解您想要在集合*之上构建的逻辑。*
我的意思是，不同类型的异常之间的分离以及它们是否被记录等是*您的*应用程序逻辑的一部分。
它与提供该功能的集合框架无关。*数据的*集合和辅助方法

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-31T05:29:31.553

您可以查看[Failsafe](https://github.com/jhalterman/failsafe)。它以富有表现力和简洁的方式处理您的场景：

```
RetryPolicy retryPolicy = new RetryPolicy()
  .abortOn(SQLException.class)
  .retryOn(NullPointerException.class)
  .withMaxRetries(50);

Connection connection = Failsafe.with(retryPolicy).run(() -> {
  Item item = getItemById(id);
  NewData data = ProcessItem(item);
  SaveNewData(data);
}); 
```

没有变得更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T14:24:57.697

我最终拼凑出自己的解决方案，但最近偶然发现了异步重试模式：

[https://github.com/nurkiewicz/async-retry](https://github.com/nurkiewicz/async-retry)

还有一篇关于它的好文章：

[http://nurkiewicz.blogspot.com/2013/07/asynchronous-retry-pattern.html](http://nurkiewicz.blogspot.com/2013/07/asynchronous-retry-pattern.html)*

# iphone - 为什么即使我覆盖 touchesMoved:withEvent:，UIScrollView 的子类仍会滚动？

> ID：10554374
> 
> 赞同：0
> 
> 时间：2012-05-11T15:30:54.333
> 
> 标签：iphone, ios, ipad, uiscrollview, uikit

在 iOS 4 中，我认为 -touchesBegan:withEvent:, -touchesMoved:withEvent:, -touchesEnded:withEvent:, -touchesCancelled:withEvent: 是唯一可用于在视图中处理触摸的方法。

但是现在当我像这样覆盖这些方法时：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    // not calling super. Doing nothing.
} 
```

在 UIScrollView 子类中，它仍然滚动。他们是如何做到的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:35:06.727

UIScrollView 使用 UIPanGestureRecognizer 进行滚动。UIKit 通过私有机制向手势识别器发送事件，独立于 touchesBegan:withEvent: 和相关方法。

# php - 我应该如何在一个函数中返回多个变量（以获得最佳实践）？

> ID：10554375
> 
> 赞同：12
> 
> 时间：2012-05-11T15:31:07.753
> 
> 标签：php, micro-optimization

只是想知道这样的最佳实践是什么：

一个返回多个变量的函数——应该如何返回这些变量？

像这样（全球化）：

```
function myfun(){

global $var1,$var2,$var3;

$var1="foo";
$var2="foo";
$var3="foo";

}//end of function 
```

或者像这样（返回一个数组）：

```
function myfun(){

$var1="foo";
$var2="foo";
$var3="foo";

$ret_var=array("var1"=>$var1,"var2"=>$var2,"var3"=>$var3);

return $ret_var;

}//end of function 
```

我做了一个性能测试，看起来使用数组更快（经过几次刷新）：

```
array took: 5.9999999999505E-6
global took: 2.0999999999938E-5 
```

但我很想知道在这样的简单情况下哪种方法最适合？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-11T15:33:28.237

你绝对应该返回一个数组。它更清晰。您甚至可以使用该[`list`](http://us1.php.net/list)构造来模拟多个返回值 a-la python：

```
function foon() {
   return array('one', 'two', 'three');
}
list($one, $two, $three) = foon(); 
```

编辑：在某些情况下，关联数组也非常合适。我无法想象性能差异会导致这种清晰度损失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T15:33:14.887

使用参考资料（如果有意义的话）[http://de.php.net/manual/en/language.references.php](http://de.php.net/manual/en/language.references.php)

例子：

```
function myfun(&$var1, &$var2, &$var3)
{
    $var1="foo";
    $var2="foo";
    $var3="foo";
} 
```

或者返回一个数组。

**并且永远不要使用全球！**这是非常糟糕的设计，不可维护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-13T10:34:36.210

您可以使用类[http://php.net/manual/en/keyword.class.php](http://php.net/manual/en/keyword.class.php)。

```
class Vari {
    var $var1;
    var $var2;
    var $var3;
}

function myfun() {    
    $var = new Vari;
    $var->var1="foo";
    $var->var2="foo";
    $var->var3="foo";
    return $var;    
}

$v = myfun();
echo $v->var1;
/*foo*/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T15:40:27.360

您可以返回一个数组并使用列表来获取值，请参阅[http://www.php.net/manual/en/function.list.php](http://www.php.net/manual/en/function.list.php)

```
function multiple() {
    return array('val1', 'anotherval');
}

list($var1, $var2) = multiple();

echo "$var1, $var2"; 
```

对我有用，我不知道这有多快，但也许它在你的代码中看起来更干净。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-11T15:32:55.117

从代码维护的角度来看，关联数组选项更好，因为您不会破坏全局命名空间。其他人也更容易阅读您的代码。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-08T20:12:48.137

由于这在谷歌上的排名如此之高，而且我花了一段时间才自己找到一个明确的答案来解决如此简单的问题......

要给出完整的答案并彻底阐明如何返回您可以在函数之外实际独立使用的多个变量：

```
 function  myFunction() {

      //your code that returns your results to variables below

     $var1 = 'message 1';
     $var2 = 'message 2';
     $var3 = 'message 3';

     // must put all variables inside an array to get them outside of function
     $return_array = ($var1, $var2, $var3);

     // return your array inside function
     return $return_array;
  }

 // call function (returns all variables in array)
 $get_results = myFunction();

 // call and assign individual variables outside of function
 $var1 = $get_results[0];
 $var2 = $get_results[1];
 $var3 = $get_results[2];

 // now you can use individual variables outside of function for example:

 echo $var2;   //will now output: message 2
 echo $var3;   //will now output: message 3 
```

如果您在函数内部使用数据库查询的结果，则很可能需要将连接变量传递给函数。例如，我们会说 $db 是我们的数据库连接，您只需修改以下两行代码：

```
 //original code to change
  function  myFunction() {
  //change to
  function  myFunction($db) {

  //original code to change
  $get_results = myFunction();
  //change to
  $get_results = myFunction($db); 
```

# formatting - 有谁知道使用 LDIF 格式化 LDAP 组意味着什么？

> ID：10554378
> 
> 赞同：1
> 
> 时间：2012-05-11T15:31:26.540
> 
> 标签：formatting, ldap, ldif

我在公司的 LDAP 目录中设置了一个组。但是，我现在的任务是使用称为 LDIF 的东西对每个用户进行格式化，但我在网上找不到任何关于此的内容。有人知道这是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:43:05.053

有一些在[LDAP 中使用 LDIF 的示例：Using ldapmodify](http://ff1959.wordpress.com/2011/07/25/master-the-ldapmodify-command-line-tool/) and other posts at my [blog](http://ff1959.wordpress.com)。

# java - 将 IP 地址转换为主机名

> ID：10554380
> 
> 赞同：10
> 
> 时间：2012-05-11T15:31:30.127
> 
> 标签：java, network-programming

在我的 java 应用程序中，如果用户输入 IP，我们需要显示主机名，如果给出主机名，那么我们需要显示主机的 IP。

例如，如果用户输入 IP 地址，则`173.194.36.37`应用程序应显示`google.com`，反之亦然。

是否有任何实用程序可用于执行此操作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-11T15:35:07.350

如果您使用 Java 编码，请尝试使用[`InetAddress`](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html)

```
InetAddress addr = InetAddress.getByName("173.194.36.37");
String host = addr.getHostName();
System.out.println(host); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:34:01.670

您正在寻找的是一种叫做[DNS](http://en.wikipedia.org/wiki/Domain_Name_System)的东西。 [这个项目](http://sourceforge.net/projects/dnsjava/)似乎就是你要找的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T15:43:36.223

SomeKittens 提到的项目看起来像一个用 Java 编写的完整 DNS 服务器，可能超出您的需要。看看[`java.net.InetAddress`](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html)：

```
java.net.InetAddress.getByName("example.com").getHostAddress(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:36:54.243

在域名方面，没有内置实用程序，没有。您*可以*`getCanonicalHostName()`使用 on获取主机名（但不是域名）[`InetAddress`](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#getCanonicalHostName%28%29)- 这应该可以。此处的最佳答案链接到[DNS Java](http://sourceforge.net/projects/dnsjava/)项目，该项目将为您提供域名。

下面给出了连接到 Google 的一台服务器并从中获取主机名的示例代码：

```
public class GetHostName {
public static void main(String[] args) throws Exception {
    InetAddress address = InetAddress.getByAddress(new byte[]{74, 125,(byte) 227, 7});
    System.out.println(address.getCanonicalHostName());
}
} 
```

# facebook - 如何使用comment.create & comment.delete 功能主义者

> ID：10554385
> 
> 赞同：1
> 
> 时间：2012-05-11T15:31:54.927
> 
> 标签：facebook, plugins, comments

我已经 2 天了，我一直在寻找一个简单的代码，说明人们如何使用与 facebook 的评论插件集成的 comment.create 和 comment.delete 功能主义者。

什么样的代码以及我应该在我的页面中添加的位置，以便当人们在我的网站上添加新评论时我在 facebook 中接收 facebook 通知？

谢谢你。

# google-analytics - Google Analytics，从 API 获取注释

> ID：10554387
> 
> 赞同：12
> 
> 时间：2012-05-11T15:32:00.780
> 
> 标签：google-analytics, google-analytics-api

有什么方法可以通过他们的 API 从 Google Analytics 获取注释。很多搜索都没有给出任何文档或可靠的答案，这是否可能。

有没有人这样做过，或者知道我需要用来获取注释的过滤器/尺寸？

谢谢杰克

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T06:55:40.733

不，到目前为止，还无法从 Google Analytics API 中获取注释。

有一个悬而未决的问题。

[http://code.google.com/p/analytics-issues/issues/detail?id=53](http://code.google.com/p/analytics-issues/issues/detail?id=53)

随意给问题加注星标以获取更新，但请不要用“我也是”的评论回复它。

该问题于 2010 年 1 月开放，到目前为止，谷歌没有更新或评论。

Google 的内部政策是不公开讨论错误和新功能。我们知道他们知道 API 上的这一点和其他遗漏，但他们不会提供任何截止日期，因此您不应该在短期内等待。

在这一点上，我猜这永远不会实现。在 GA4 中，注释还没有实现，而且还不清楚它是否会实现，所以这个特性可能会永远消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-28T16:28:38.783

2020 年 11 月 12 日更新：

我提出了使用 API 添加和修改注释的新请求，Google 已经确认他们已经向他们的开发团队提出了功能请求：

[https://issuetracker.google.com/issues/169532195](https://issuetracker.google.com/issues/169532195)

当然没有预计到达时间，但希望我们能尽快获得该功能。

原帖：

在 2020 年重新检查这一点，情况似乎仍然如此。

引自[https://developers.google.com/analytics/devguides/config/mgmt/v3](https://developers.google.com/analytics/devguides/config/mgmt/v3)

*   列出用户的所有帐户、属性和视图（配置文件）信息。
*   管理属性、视图（配置文件）和目标。
*   管理帐户层次结构的用户权限。
*   检索要与核心报告 API 一起使用的视图（配置文件）ID。
*   确定哪些目标处于活动状态并访问其配置名称。
*   管理 Analytics 媒体资源和 Google Ads 帐户之间的链接。
*   管理再营销受众。

# tfsbuild - 需要帮助创建 TFS 2010 构建定义

> ID：10554393
> 
> 赞同：0
> 
> 时间：2012-05-11T15:32:15.697
> 
> 标签：tfsbuild

我正在设置 TFS 并创建了一个包含 \Main 和 \Release 文件夹的项目。如果我创建一个构建定义（使用 CI 触发器），我假设默认情况下，只要在项目中的*任何位置*签入文件，构建就会触发？

如何将其配置为仅在 \Main 下构建解决方案，*并且*仅当在 \Main 下签入某些内容时才构建解决方案？即，例如，如果我签入\Release 下的文件，我不希望它构建。

此外，我可以提供一些关于如何配置构建以在解决方案的 assemblyinfo 文件中自动设置版本号（可能还有其他属性，如公司名称等）的指针......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:16:13.133

您可以通过更改工作空间映射来限制检查的范围。

要查找有关增加自定义构建的版本号的信息，请参阅[http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx](http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:17:26.830

在`Workspace`选项卡下，设置`Source Control Folder`要触发 CI 构建的深度。例如：`$/Demo/Dev/v2.0`

对于版本化构建，请考虑[Versioned TFS 2010 Build](http://versionedtfsbuild.codeplex.com/)和[TfsVersioning](http://tfsversioning.codeplex.com/)。

# asp.net - 如何在 LoginView 中显示其他 .aspx 页面

> ID：10554394
> 
> 赞同：1
> 
> 时间：2012-05-11T15:32:20.300
> 
> 标签：asp.net, master-pages, .net, loginview

我有一个带有 LoginView 的 asp 网络母版页。如果用户是匿名用户，我希望在 AnonymousTemplate 中看到默认的 Register.aspx 页面（不是指向它的链接，而是页面）。有可能做到吗？谢谢，橡树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:59:12.680

我能想到的唯一方法是在 AnonymousTemplate 中使用 iframe，但这会导致一个丑陋的解决方案。考虑以下替代设计之一：

*   将您的 Register.aspx 重新设计为 Register.ascx 并将其引入 AnonymousTemplate
*   使用您的母版页将 Register.aspx 重新制作为 Web 表单，并在匿名情况下重定向到该页面。

# symfony - Symfony2 Doctrine ODM 嵌入类表单验证

> ID：10554395
> 
> 赞同：4
> 
> 时间：2012-05-11T15:32:21.400
> 
> 标签：symfony, doctrine-orm, odm

我有一个已经变成表格的 Doctrine mongodb 文档。该文档有两个 emebedOne 文档，它们也在表单中。正在验证主文档，但未验证嵌入文档。我正在使用自定义断言，但我认为这并不重要。

文档

```
    类帐户记录{
    /**
     * @MongoDB\ID
     */
    私人 $id;

    /**
     * @MongoDB\Field(type="BimcoreEmail")
     * @Assert\电子邮件
     * @Assert\NotNull
     * @CustomAssert\BimcoreEmail
     */
    私人$电子邮件；

    /**
     * 访问管理员
     *
     * @MongoDB\布尔
     */
    私人 $access_admin = 0;

    /** @MongoDB\EmbedOne(targetDocument="vidAccountSettings") */
    私人 $vid;
   }

```

嵌入类的自定义断言永远不会被调用。

```
/** @MongoDB\EmbeddedDocument */
类 vidAccountSettings {
    /**
     * 分享部分路径
     *
     *
     * @MongoDB\Field(type="Url")
     * @CustomAssert\Url
     */
    私人 $sharePath;
}

```

形式

```
类 AccountEditFormType 扩展 AbstractType
{
    /**
     * 构建代表用户的嵌入表单。
     *
     * @param FormBuilder $builder
     * @param 数组 $options
     */
    公共函数 buildForm(FormBuilder $builder, array $options){
        $建造者
            ->添加（'前缀'，'隐藏'，数组（'必需' => false））
            ->add('vid.access', 'checkbox', array('required' => false))
            ->add('vid.googleAnalytics', 'text', 数组('required' => false))
            ->add('vid.liveRail', 'text', 数组('required' => false))
            ->add('vid.sharePath', 'url', 数组('required' => false))
            ;
    }

    公共函数 getDefaultOptions(数组 $options)
    {
        返回数组（
            '意图' => 'editAccount',
            'cascade_validation' => 真，
        );
    }

    公共函数 getName()
    {
        返回“bimfs_account_creation”；
    }

}
```

处理程序

```
类 AccountEditFormHandler
{
    受保护的$请求；
    受保护的 $userManager;
    受保护的$form；

    公共函数 __construct(Form $form, Request $request, BimcoreAccountManager $accountManager)
    {
        $this->form = $form;
        $this->request = $request;
        $this->accountManager = $accountManager;
    }

    公共功能流程($account)
    {
        // 为当前账户设置表单中的数据。
        $this->form->setData($account);

        if ('POST' === $this->request->getMethod()) {

            $this->form->bindRequest($this->request);
            if ($this->form->isValid()) {
                $this->onSuccess($account);
                返回真；
            } 别的 {
            }
        }

        返回假；
    }

    受保护的功能 onSuccess(BimcoreAccountRecord $account)
    {
        // 更新账户数据。
        $this->accountManager->updateAccount($account);
    }
}

```

谢谢您的帮助。

科里

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T16:20:59.923

好的，我想通了，您需要在要验证的嵌入的记录中设置一个断言有效语句。

```
/** @MongoDB\EmbedOne(targetDocument="vidAccountSettings")
    * @Assert\有效
    */
    私人 $vid;

```

# sql - 将 sql 转换为 linq

> ID：10554403
> 
> 赞同：1
> 
> 时间：2012-05-11T15:32:30.957
> 
> 标签：sql, linq, entities

我是 Linq 世界的新手，由于数据库中的一些约束影响添加我需要的一些字段，我无法弄清楚如何将以下 sql 转换为 linq：

```
select sp.SessionID,
    sp.SessionParticipationID,
    case when z.SessionParticipationID = sp.SessionParticipationID then 1 else 0 end as RecordedFL
from SessionParticipation sp
inner join (
    select sp1.SessionID,
        sp1.SessionParticipationID
    from Meeting.SessionParticipation sp1
    inner join RegistrantActivity ra on ra.SessionParticipationID = sp1.SessionParticipationID
    where ra.RegistrantID = 12345
) z on z.SessionID = sp.SessionID 
```

实体是 SessionParticipation 和 RegistrantActivity

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:39:27.683

它应该是这样的

```
from sp in SessionParticipations
join z in
(from sp1 in MeetingSessionParticipations
join ra in RegistrantActivities on sp1.SessionParticipationID equals 
                                   ra.SessionParticipationID
where ra.RegistrantID = 12345
select sp1)
on sp.SessionID equals z.SessionID
select new { 
             sp.SessionParticipationID,
             RecordedFL = z.SessionParticipationID == sp.SessionParticipationID
                          ? 1 : 0
           } 
```

假设它`Meeting.SessionParticipation`是与 不同模式中的不同表`SessionParticipation`，否则连接会使事情变得不必要地复杂。（尽管不同模式中的相同表名是......令人困惑）。

# c++ - 字符串分配的分段错误

> ID：10554404
> 
> 赞同：0
> 
> 时间：2012-05-11T15:32:35.600
> 
> 标签：c++, string, segmentation-fault, assign

我有一个文本文件，其中仅包含带有以下消息的行：

> 你好
> 你好

现在我得到了这个函数，它读取这些行并返回一个包含它们的数组。

```
string* printlines(string filename)
{
string line;
int sum = 2;
int i =0;
string *quotes;
ifstream infile(filename.c_str());

quotes= new string[2];

    if (infile.is_open())
    {

      while (infile.good())
      { 
        getline (infile,line);
        quotes[i] = line; // <--- here's the problem
        i++;
       }
    }
infile.close();
return quotes;
} 
```

gdb 报告粗体行有问题，但我没有看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:35:07.383

如果您阅读的行数超过两行，您就会在堆上分配两个字符串。如果你想返回一个动态分配的字符串数组，可以使用`std::vector`类似这样的东西：

```
std::vector<std::string> printlines(const std::string& filename)
{
    std::vector<std::string> quotes;
    std::ifstream infile(filename.c_str());

    if (infile.is_open())
    {
        while (infile.good())
        {
            std::string line;
            std::getline (infile,line);
            quotes.push_back(line);
        }
    }
    infile.close();

    return quotes;
} 
```

这样，您无需关心读取了多少字符串，它只会不断增长，为所有字符串腾出空间，您无需担心内存泄漏，当向量超出范围时，它将删除所有字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:35:24.823

循环结构不正确，将导致超出数组末尾。即使文件中只有两行，也不会立即检查`getline()`以确定是否成功。将读取前两行，但尚未设置 eof ，从而导致第三次`getline()`调用，超出数组的末尾。

改成：

```
while (getline(infile, line) && i < 2)
{
    quotes[i] = line;
    i++;
} 
```

话虽如此，考虑使用 a`std::vector<std::string>`而不是数组：

```
std::vector<std::string> quotes;
while (getline(infile, line))
{
    quotes.push_back(line);
} 
```

将`std::vector`动态增长以存储所有读取的行。无需更改代码即可将新行添加到文本文件中。

# sql - 将 Unixtime 转换为 Datetime SQL (Oracle)

> ID：10554405
> 
> 赞同：6
> 
> 时间：2012-05-11T15:32:45.117
> 
> 标签：sql, oracle, unix-timestamp

我有一个日期时间字段（P_DT），我想返回 P_DT 大于输入 unix 时间戳的所有结果。

Oracle 是否有任何可以提供帮助的内置函数？

在我的搜索中，我找到了从 DateTime 到 Unix 但没有从 Unix 到 DateTime 的结果...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T15:40:02.643

没有内置函数。但是写一个相对容易。因为 Unix 时间戳是自 1970 年 1 月 1 日以来的秒数

```
CREATE OR REPLACE FUNCTION unix_ts_to_date( p_unix_ts IN NUMBER )
  RETURN DATE
IS
  l_date DATE;
BEGIN
  l_date := date '1970-01-01' + p_unix_ts/60/60/24;
  RETURN l_date;
END; 
```

你可以看到被称为

```
SQL> select unix_ts_to_date( 1336822620 ) from dual;

UNIX_TS_TO_DATE(133
-------------------
2012-05-12 11:37:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-05T23:15:09.003

我最后用了这个...

```
date=unixtimestamp number

to_date(\'1970-01-01\',\'YYYY-MM-DD\') + numtodsinterval('.$_GET["date"].',\'SECOND\') 
```

# c# - ASP.NET Web 服务的 SharePoint API 异常

> ID：10554406
> 
> 赞同：0
> 
> 时间：2012-05-11T15:32:50.590
> 
> 标签：c#, asp.net, web-services, sharepoint-2010

我正在创建一个 Web 服务，该服务可以访问某些 SharePoint API，这些 API 将从某个 WSS 数据库中获取内容并创建一个 CMP 导出以供读取。只要该程序在 SharePoint 服务器上和场管理员帐户下运行，我就可以在 C# 中使用常规 Windows 窗体应用程序成功地以编程方式执行此操作。但是，当我尝试从我的 ASP.NET Web 服务运行相同的代码时，就会出现问题。Web 服务下出现的错误是“对象引用未设置为对象的实例”。带有 System.NullReferenceException。

请看下面的代码：

```
[WebMethod]
public bool SPRetreiveCMPTest()
{
    try
    {
        SqlConnectionStringBuilder scsb = new SqlConnectionStringBuilder("Data Source=sql1\\sharepoint;Initial Catalog=WSS_Content_Sales_Test;Integrated Security=SSPI");
        SPContentDatabase spcd = SPContentDatabase.CreateUnattachedContentDatabase(scsb); // <-- ERROR OCCURS HERE!!

        SPExportObject speo = new SPExportObject();
        speo.Url = "http://sharepoint/sites/sales/productmgmt/Product Management";
        speo.IncludeDescendants = SPIncludeDescendants.All;
        speo.Type = SPDeploymentObjectType.List;

        SPExportSettings spes = new SPExportSettings();
        spes.UnattachedContentDatabase = spcd;
        spes.SiteUrl = "http://sharepoint1:8080/sites/sales";
        spes.FileLocation = "C:\\users\\sp_farm\\test_restore";
        spes.LogFilePath = "C:\\users\\sp_farm\\test_restore\\test.log";
        spes.BaseFileName = "testout";
        spes.ExportObjects.Add(speo);
        spes.IncludeVersions = SPIncludeVersions.All;
        spes.LogExportObjectsTable = false;
        spes.IncludeSecurity = SPIncludeSecurity.All;

        using (SPExport spe = new SPExport(spes))
            spe.Run();
    }
    catch (Exception e) { return false; }

    return true;
} 
```

我已确保运行 Web 服务的应用程序池正在使用场管理员帐户。关于为什么会发生此错误的任何想法？

**编辑：**

解决它！我开始关注下面的堆栈跟踪，我意识到这是一个由两部分组成的修复。

第一个堆栈跟踪：

```
at Microsoft.SharePoint.Utilities.SPUtility.ValidateFormDigest()
at Microsoft.SharePoint.Administration.SPPersistedObject.BaseUpdate()
at Microsoft.SharePoint.Administration.SPPersistedChildCollection`1.Add(T newObj, Boolean ensure)
at Microsoft.SharePoint.Administration.SPPersistedChildCollection`1.Ensure(T newObj)
at Microsoft.SharePoint.Administration.SPContentDatabase.CreateUnattachedContentDatabase(String databaseInstanceServer, String databaseName, String username, String password)
at PHSSPWebService.PHSSPWebServiceClass.SPRetreiveCMPTest() in D:\\My Documents\\Visual Studio 2008\\Projects\\PHS\\PHSSPWebService\\PHSSPWebService\\PHSSPWebService.asmx.cs:line 100" 
```

1.) 我必须在 IIS 中为我​​的 Web 服务网站启用表单身份验证，并且出现了一个新异常 (InvalidOperationException) 和堆栈跟踪。

第二个堆栈跟踪：

```
at Microsoft.SharePoint.WebControls.SPControl.SPWebEnsureSPControl(HttpContext context)
at Microsoft.SharePoint.Utilities.SPUtility.ValidateFormDigest()
at Microsoft.SharePoint.Administration.SPPersistedObject.BaseUpdate()
at Microsoft.SharePoint.Administration.SPPersistedChildCollection`1.Add(T newObj, Boolean ensure)
at Microsoft.SharePoint.Administration.SPPersistedChildCollection`1.Ensure(T newObj)
at Microsoft.SharePoint.Administration.SPContentDatabase.CreateUnattachedContentDatabase(String databaseInstanceServer, String databaseName, String username, String password)
at PHSSPWebService.PHSSPWebServiceClass.SPRetreiveCMPTest() in D:\\My Documents\\Visual Studio 2008\\Projects\\PHS\\PHSSPWebService\\PHSSPWebService\\PHSSPWebService.asmx.cs:line 100" 
```

2.）解决方法`SPWebEnsureSPControl(HttpContext context)`是`HttpContext.Current = null`在我的代码开始时设置，瞧，它起作用了！

有关详细信息，请参见此处：http: [//johnatjornata.wordpress.com/2012/01/23/runwithelevatedprivileges-operation-is-not-valid-due-to-the-current-state-of-the-object-error-解释/](http://johnatjornata.wordpress.com/2012/01/23/runwithelevatedprivileges-operation-is-not-valid-due-to-the-current-state-of-the-object-error-explained/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T23:48:43.590

我有问题的解决方法。一直跟踪堆栈跟踪后，我发现我需要在我的 IIS 网站中打开表单身份验证，然后设置`HttpContext.Current`为`null`.

# android - -webkit-background-clip：文本在 Android 手机中不起作用

> ID：10554412
> 
> 赞同：2
> 
> 时间：2012-05-11T15:33:06.830
> 
> 标签：android, css, webkit

似乎 css3 -webkit-background-clip:text，在带有 webkit 核心鼓风机的 Android 手机中不起作用。因为我想制作具有渐变效果的文本，所以 -webkit-background-clip:text 在 PC 中运行良好。真的是这样吗？有人帮忙解决这个问题吗，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-17T21:09:19.753

我在 Android Lollipop 设备上遇到了类似的情况。我`-webkit-background-clip:text`在`<button>`标签上使用过。它在 chromium 浏览器中运行良好，甚至可以在 Android Marshmallow 设备上运行。但同样的剪辑效果不会出现在棒棒糖设备上。`<button>`几个小时后，通过将标签更改为 a 来修复它`<div>`并且它起作用了。不确定这是否是您的情况，如果不是，请发布您的 css 代码。

# python - GAE python字符串相等 - 带有unicode的奇怪行为

> ID：10554418
> 
> 赞同：3
> 
> 时间：2012-05-11T15:33:26.130
> 
> 标签：python, google-app-engine, google-cloud-datastore

我们正在尝试比较字符串，一个是从数据存储中加载的，另一个是从 HTML 表单中获取的

```
modelID = self.request.get('fieldName') 
```

然后我们比较两者：

```
result = db.Query(modelName).filter('model_id =', modelID).fetch(limit=1) 
```

但是，尽管我检查了数据存储查看器并清楚地看到存在一个带有 model_id = modelID 的实体，python 坚持认为它们不等于践踏我让我的应用程序工作的尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:57:31.567

在字符串中搜索空格

您可以使用 string.strip() 函数来摆脱它们！空间是邪恶的，会阻碍平等......

保重人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:37:23.823

在过滤器中尝试 unicode(modelID) 而不是 modelID。

我认为 GAE 将字符串存储为 unicode。

# mysql - Node.js 和 node-mysql - 无法实时广播/发送到站点

> ID：10554419
> 
> 赞同：0
> 
> 时间：2012-05-11T15:33:27.177
> 
> 标签：mysql, sockets, node.js, websocket, socket.io

我对 node.js 相当陌生，我正在尝试 ping 我的 mysql 数据库以从表中获取信息并将其放置在多个浏览器可以实时查看的套接字中。我最初是通过对 Ruby 生成的页面的 AJAX 请求获取 mysql 信息，但是当我有很多用户时（调用每秒发生 1 次），我的服务器开始运行。这就是为什么我要继续使用这个 node.js 解决方案，以便服务器可以每秒运行 1 次请求，而无需每个浏览器每秒都发出相同的请求。如果我可以让服务器迭代并 ping mysql 数据库并允许浏览器通过管道将信息传输到套接字 - 我相信我的服务器负载会很好。

我的代码如下：

```
var http = require('http');
var mysqlClient = require('mysql').createClient({'user':'root','password':'tester123'});

mysqlClient.query('USE conferenceLine');
var mysqlData = [];

setInterval(function(){
mysqlClient.query(
  'SELECT number, page_id FROM callers',
  function selectCb(err, results, fields) {
    if (err) {
      throw err;
    }

    //if there are callers log all the callers
    for(var i = 0; i < results.length; i++){
        mysqlData[i] = results[i];
        console.log(mysqlData[i]);
    }

 });
}, 1000);

var io = require('socket.io').listen(12003);

io.sockets.on('connection', function(client) {

    console.log("New Connection: ", client.id); //log new connection

    client.emit('connection', client.id);//emit to let site know its connected

    //broadcast latest mysql response as json
    for(var i=0; i<mysqlData.length; i++){
        client.broadcast.emit('init', JSON.stringify(mysqlData[i]));
        console.log("this just happend");
    }

    client.on('disconnect', function() {
    console.log("Disconnected: ", client.id);
    });
}); 
```

当我删除“client.broadcast.emit('init', JSON.stringify(mysqlData[i]));”中的“广播”时 我在浏览器中看到了 mysql 请求结果，但它不是实时/实时的。即我每次都必须刷新浏览器才能查看结果。我怎样才能使这个连接持久化并让 mysql 数据通过套接字进行管道传输？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:52:06.687

您在客户端已经有一个处理 init 事件的事件，基本上您需要做的是以下内容：

在客户端创建一个按钮（至少用于测试）：

HTML：

```
<input type="button" id="testButton" onClick="requestData();"> 
```

在客户端的javascript方面添加以下内容：

```
function requestData(){
    socket.emit("requestNewData", {"nothing":"here"});
} 
```

在节点端添加以下内容：

```
socket.on("requestNewData", function(data){
    client.emit('init', JSON.stringify(mysqlData[i]));
}); 
```

因为你已经绑定了 'init' 事件来显示你从 Node 收到的任何内容，这将用于测试目的。

请记住这一点：带有 socket.io 的 Node.js 基本上依赖于事件和事件侦听，其中好的部分是您可以设置任何您希望它使用的事件名称。

希望我能有所帮助。

# mysql - MySQL 更新错误 #1064

> ID：10554422
> 
> 赞同：1
> 
> 时间：2012-05-11T15:33:32.103
> 
> 标签：mysql

这是错误：

**#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'case='nominative' WHERE id='42'' 附近使用正确的语法**

这是查询：

```
UPDATE `ruen_kw` SET case='nominative' WHERE id='42' 
```

桌子：

```
CREATE TABLE `ruen_kw` (
  `id` tinyint(6) NOT NULL auto_increment,
  `language` varchar(2) NOT NULL,
  `keyword` varchar(80) character set utf8 NOT NULL,
  `translation` varchar(300) NOT NULL,
  `case` varchar(50) NOT NULL,
  `tense` varchar(50) NOT NULL,
  `gender` varchar(25) NOT NULL,
  `number` varchar(50) NOT NULL,
  `definition` varchar(200) character set utf8 NOT NULL,
  PRIMARY KEY  (`id`),
  FULLTEXT KEY `keyword_2` (`keyword`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=46 ; 
```

要更新的行：

插入`ruen_kw`( `id`, `language`, `keyword`, `translation`, `case`, `tense`, `gender`, `number`, `definition`) 值 (42, 'ru', 'Ñ...Ð¾Ð·ÑÐ¹Ðº¡°', 'hostess', 'nom', '', '', '', '');

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:38:36.927

“case”是 MySQL 中的保留字。来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)：

> 如果您按照第 9.2 节“模式对象名称”中的描述引用保留字，则允许它们作为标识符：

试试这个，而不是：

```
 UPDATE ruen_kw SET `case`='nominative' WHERE id='42'; 
```

# android - 使用 MQTT VS REST 发送应用程序日志

> ID：10554425
> 
> 赞同：1
> 
> 时间：2012-05-11T15:33:40.617
> 
> 标签：android, rest, logging, mqtt

我有一个 android 应用程序，我想将其使用日志发送到我的服务器，以便将其保存在数据库中。

基本上我想记录用户所做的几乎每一个动作，即使是一个简单的按钮点击。

由于 MQTT 已经在应用程序中使用，我认为将它用于日志记录可能会很好。

例如：每次我想记录一些东西时，我只是通过 MQTT 发布操作，然后一些服务器端服务会订阅该记录通道，并且每次日志发布到达时，它都会将其插入数据库.

但是有几件事我很担心-

1.  我想知道每次用户执行任何操作时发布一条 30 个字符的消息是否会占用大量带宽。
2.  对于侦听该频道并将每条消息插入数据库的服务，什么是最佳解决方案。

另一种选择是通过常规的 REST 方法发送数据，但我有 2 个选择，要么大批量发送（我必须知道在应用程序关闭之前什么时候发送它的正确时间）或实际发送- 记录操作发生的时间。

那么我就不需要订阅 MQTT 日志记录通道的服务了。

让我们假设我的服务器应该能够同时处理数千个用户。

有什么有趣的想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T13:53:39.703

如果您已经在使用 MQTT，那么将其用于日志记录非常有意义。我上面对带宽要求的快速计算表明，这不太可能是一个巨大的负担。在我的示例中，日志记录应用程序必须能够每秒处理 2000 条消息。它只是一个简单的 MQTT 客户端，它也连接到您使用的任何数据库。[在https://bitbucket.org/oojah/mosquitto/src/426b311d682d/examples/mysql_log/mysql_log.c](https://bitbucket.org/oojah/mosquitto/src/426b311d682d/examples/mysql_log/mysql_log.c)有一个简单的 mysql 示例

您可能确实需要考虑的是发送这么多事件的功耗。Stephen Nicholas 对 Android 进行了两项研究，着眼于 MQTT 的使用，首先是在许多场景中直接查看 MQTT 的使用（[http://stephendnicholas.com/archives/219](http://stephendnicholas.com/archives/219)），然后是加密的 MQTT 与 HTTPS（[http://stephendnicholas） .com/archives/1217](http://stephendnicholas.com/archives/1217)）。您应该考虑的要点是保持连接活动的电池成本以及发送消息的成本和速度。假设每秒一条消息，keepalive=240 秒，并且您的用户拥有与 Stephen 相同的手机，那么与手机上发生的任何其他事情相比，您每小时会消耗大约 3.1% 的电池寿命。

# macos - 在 xampp 上使用 redbean 时，我注意到了这个错误

> ID：10554428
> 
> 赞同：0
> 
> 时间：2012-05-11T15:33:45.713
> 
> 标签：macos, pdo, xampp, redbean

我正在尝试测试 redbeanphp 并尝试使用我的 mac 在 xampp 上实现它。但是，我的 pdo 似乎有问题。我已经检查过使用 phpinfo 设置了 mysql 的 pdo 驱动程序。任何人都可以就为什么会发生这种情况提供一些见解或方向。

提前致谢！

我正在使用的代码是：

```
<?php
require('rb.php');
R::setup('mysql:host=localhost;dbname=hoodajax');
$book = R::dispense( 'book' );
$book->title = 'Boost development with RedBeanPHP';
$book->author = 'Charles Xavier'; 
$id = R::store($book);
$book = R::load('book', $id);
echo $book->title;
R::close();
?> 
```

正在显示的错误是：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000] [1044] Access denied for
user ''@'localhost' to database 'hoodajax'' in /Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php:613
Stack trace: #0 /Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php(613):
PDO->__construct('mysql:host=127....', NULL, NULL, Array) #1
/Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php(790): RedBean_Driver_PDO->connect() #2
/Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php(1755): RedBean_Driver_PDO->Escape('book') #3
/Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php(2374): RedBean_Adapter_DBAdapter->escape('book') #4
/Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php(2334): RedBean_QueryWriter_AQueryWriter->check('book')
#5 /Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php(4594):
RedBean_QueryWriter_AQueryWriter->safeTable('book', true) #6
/Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php(4563):
RedBean_OODB->storeBean(Object(RedBean_OODBBean)) #7
/Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php(6439): RedBean_OODB->store(Ob in
/Applications/XAMPP/xamppfiles/htdocs/ajax/rb.php on line 613 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:47:59.367

错误消息是不言自明的：

> 用户 ''@'localhost' 拒绝访问数据库 'hoodajax'

您尚未为数据库访问指定用户名。

# json - 向 ActionResult 方法发送参数并返回一个文件 - asp.net mvc 3？

> ID：10554430
> 
> 赞同：0
> 
> 时间：2012-05-11T15:33:50.493
> 
> 标签：json, asp.net-mvc-3, file

我正在尝试制作一个页面，当单击按钮时文件开始下载。我遇到的问题是我想将参数发送到返回文件的 ActionResult 方法，但是当我尝试使用 post 发送 JSON 或调用 ActionResult 方法但文件没有发送到浏览器以进行下载时. 如果我输入该控制器方法的链接，则文件下载正常。我不能只拥有文件的链接，因为我需要根据网页上选择的选项动态更改文件。

我觉得我可能以错误的方式攻击这个，任何煽动都会有所帮助。

我正在使用 Asp.net MVC 3 和 Jquery，在此先感谢。

**编辑** 我想有一种方法可以在没有 JSON 的情况下将参数发送到操作结果，只需使用 JavaScript，我认为这也可以帮助我解决我的问题，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:42:39.870

您可以`file path`在`json`响应中返回，然后重定向到该路径，例如

```
$.post("",{data:yourData,function(data){

 if(data.filepath!='')
 location.href=data.filepath;//this will force the browser download dialogue 
}}); 
```

在控制器中

```
public ActionResult GetFile(/*params*/){ 
 //your code
 var filepath="some path";
 return Json(new { filepath=filepath});
} 
```

# c# - Func<>s 的 List<>，使用泛型返回类型编译错误，但为什么呢？

> ID：10554435
> 
> 赞同：16
> 
> 时间：2012-05-11T15:34:12.483
> 
> 标签：c#, generics, .net-4.0, func

这是一个有点长的问题，所以请多多包涵。

我需要在一组字符串和每个字符串的相应通用方法调用之间创建一个映射。但是我遇到了一个编译问题，下面解释一下。

在我的场景中，我使用的是`Dictionary<>`，但问题同样存在于`List<>`. 为简单起见，我`List<>`在下面的示例中使用 a 。

考虑这三个类：

```
public abstract class MyBase { /* body omitted */  }
public class MyDerived1 : MyBase { /* body omitted */  }
public class MyDerived2 : MyBase { /* body omitted */  } 
```

以及其他一些类中的方法：

```
public class Test
{
    public T GetT<T>() where T : MyBase { /* body omitted */ }
} 
```

在另一个类中，我可以`List<Func<MyBase>>`这样声明：

```
public class SomeClass
{
    public void SomeFunc()
    {
        var test = new Test();

        var list1 = new List<Func<MyBase>>
            {
                test.GetT<MyDerived1>,
                test.GetT<MyDerived2>
            };
    }
} 
```

这一切都很好。

但是，如果我想要一个返回这样的泛型类的函数怎么办：

```
public class RetVal<T> where T : MyBase { /* body omitted */ }

public class Test
{
    public RetVal<T> GetRetValT<T>() where T : MyBase
    {
        return null;
    }
} 
```

我想`List<>`使用这个函数创建一个等价物。即一个列表>>？

```
public class Class1
{
    public void SomeFunc()
    {
        var test = new Test();

        var list2 = new List<Func<RetVal<MyBase>>>
            {
                test.GetRetValT<MyDerived1>, // compile error
                test.GetRetValT<MyDerived2> // compile error
            };
    }
} 
```

我得到`Expected a method with 'RetVal<MyBase> GetRetValT()' signature`.

那么，有什么办法可以解决这个问题，还是有另一种方法可以用来创建我的*字符串...通用方法调用*映射？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T15:48:37.123

C# 只允许接口上的协方差。这意味着您不能自动将 a`RetVal<MyDerived1>`转换为 a `RetVal<MyBase>`。如果`RetVal`应该是协变的，请为其创建一个接口，如下所示：

```
public interface IRetVal<out T>
{

}
public class RetVal<T> : IRetVal<T> where T : MyBase { /* body omitted */ }

public class Test
{
    public IRetVal<T> GetRetValT<T>() where T : MyBase
    {
        return null;
    }
} 
```

然后这段代码将起作用：

```
 var list2 = new List<Func<IRetVal<MyBase>>>
        {
            test.GetRetValT<MyDerived1>,
            test.GetRetValT<MyDerived2>
        }; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T15:46:33.657

问题是泛型的经典协变/逆变。您假设因为`MyDerived1`和`MyDerived2`继承自`MyBase`，a`RetVal<MyDerived1>`继承自`RetVal<MyBase>`，但事实并非如此。

解决此问题的最简单方法可能是将代码更改为：

```
var list2 = new List<Func<RetVal<MyBase>>>
        {
            () => (MyBase)test.GetRetValT<MyDerived1>,
            () => (MyBase)test.GetRetValT<MyDerived2>
        }; 
```

或者更好的是，正如 JS 在评论中指出的那样，`RetVal<T>`如果可能的话，只需更改为协变：

```
public interface IRetVal<out T> { ... }

public class RetVal<T> : IRetVal<T> { ... } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T16:01:31.463

类的泛型类型参数不能是协变的，但它们可以是接口的协变的。*如果类型参数被声明为协变*，您可以使用 interface`IRetVal<T>`而不是 class来做您想做的事情。 为了将接口类型参数声明为协变，它必须仅用于“输出”位置。`RetVal<T>`

 *为了说明，这段代码不会编译：

```
interface IRetVal<out T>
{
    T Value { get; }
    void AcceptValue(T value);
} 
```

要编译代码，您必须`out`从类型参数中删除修饰符，或者删除 AcceptValue 方法（因为它使用 T 作为参数：输入位置）。

使用该`IRetVal<out T>`界面，您可以执行以下操作：

```
public class MyBase { }
public class MyDerived1 : MyBase { }
public class MyDerived2 : MyBase { }

public interface IRetVal<out T> where T : MyBase { /* body omitted */ }

public class Test
{
    public IRetVal<T> GetRetValT<T>() where T : MyBase
    {
        return null;
    }
}

public class Class1
{
    public void SomeFunc()
    {
        var test = new Test();

         var list = new List<Func<IRetVal<MyBase>>> 
        { 
            test.GetRetValT<MyDerived1>,
            test.GetRetValT<MyDerived2>
        };
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T15:46:26.403

我最近有一个类似的问题。

C# 不支持用于接口实现或虚拟方法覆盖的返回类型协变。有关详细信息，请参阅此问题：

[C# 是否支持返回类型协方差？](https://stackoverflow.com/questions/5709034/does-c-sharp-support-return-type-covariance/5709191#5709191).

你也许可以破解这个，我的做法是：

```
public RetVal<R> GetRetValT<T,R>() where T : MyBase where R : MyBase
{
    return null;
}

//Then, change this to:
test.GetRetValT<MyDerived1, MyBase> 
```*

# sorting - 方案 - 使用累积排序

> ID：10554441
> 
> 赞同：2
> 
> 时间：2012-05-11T15:34:49.190
> 
> 标签：sorting, scheme, fold, accumulate

我想编写一个程序来获取未排序的列表（可能包括重复值）并使用“累积”又名 foldr、reduce 等对其进行排序。

我成功过滤了双精度值，但无法对其进行排序。一般来说，我看不到如何使用地图、过滤器、累积...对其进行排序。

我必须在不使用插入排序、冒泡排序的情况下完成它....

这是我现在的代码

(accumulate (lambda (x no-duplicate) (cons x (filter (lambda (z) (not (= xz))) no-duplicate))) '() (list 1 2 0 66 3 4))

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:02:35.323

您可以简单地实现插入排序。

累积值是迄今为止看到的所有值的排序列表。当看到一个新值时，它会被插入到正确位置的排序列表中。对此使用相同`insert`的方法，就像在插入排序的普通实现中一样。

您必须编写一个函数`insert`，它给定一个元素`x`和一个排序列表，`ys`返回一个排序列表，其中包含 x 和 .x 中的所有元素`ys`。将此函数与累积一起使用，一次构建一个元素的最终结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:33:10.350

另一种方法是[树排序](http://en.wikipedia.org/wiki/Tree_sort)，它类似于插入排序（@soegaard 的解决方案），但时间复杂度更高。在这里，您从一棵空树作为初始值开始，并在每次折叠迭代时构建树。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T17:51:45.093

借用@soegaards 的答案：首先定义一个插入过程，给定一个元素、一个比较过程和一个列表，根据比较过程返回一个包含元素的新列表：

```
(define (insert-in-order e cmp lst)
  (cond ((null? lst)
         (list e))
        ((cmp e (car lst))
         (cons e lst))
        (else
         (cons (car lst) (insert-in-order e cmp (cdr lst)))))) 
```

`foldr`现在您可以根据and实现插入排序过程`insert-in-order`，它接收要排序的列表和比较过程作为参数：

```
(define (insertion-sort lst cmp)
  (foldr (lambda (e acc)
           (insert-in-order e cmp acc))
         '()
         lst)) 
```

像这样使用它：

```
(insertion-sort '(4 5 1 1 2 3) <) ; ascending order
> '(1 1 2 3 4 5)

(insertion-sort '(4 5 1 1 2 3) >) ; descending order
> '(5 4 3 2 1 1) 
```

# java - 在Java类中声明数组的正确方法是什么

> ID：10554443
> 
> 赞同：0
> 
> 时间：2012-05-11T15:35:03.710
> 
> 标签：java, arrays, constants

在类中声明常量数组的正确方法是什么？我已经阅读了 ppl 为之辩护的帖子

```
public static final Strings[] words; 
```

喜欢[这里](https://stackoverflow.com/questions/7781037/whats-the-proper-way-of-declaring-project-constants-in-java)

但是，我发现将变量声明为公开，这意味着用户（测试人员）可以看到变量；即使，他不能改变它们，因为它们是最终的......任何人都可以解释为什么我应该声明上述常量而不是

```
private static final Strings[] words; 
```

要不就

```
private final Strings[] words; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:42:28.180

通常你不应该在 Java 中使用数组，除非你真的需要性能。

您应该使用 a `Collection`（或 a`List`如果它已订购）。

对于一个公共常数，

`public static final Collection<String> FIXED_STRINGS = Collections.unmodifiableCollection(Arrays.asList("string1","string2"));`

或者`private`，如果它不用于课堂外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:39:37.020

您指向的示例谈论公共`String`常量，而不是 public `String[]`。

你无法做到`String[]`一成不变。 `final`仅表示用户不能将参考点指向不同的对象。它不会阻止用户更改数组的内容。（在 Java 中与在 C++`final`中非常不同（并且没有那么强大） ）。`const`

至于是否`static`应该在那里，记住区别是什么。使用`static`，该成员将由该类的所有实例共享。如果没有 ，`static`类的每个实例中都会有一个单独的成员副本。

通常，当某些东西是浪费的真正常数时，`static`通常在这种情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:57:12.627

由于**String [] words**是最终的，您可以将其初始化一次，即如果您说 string [] words=new string[5] 或者您以任何其他方式对其进行了初始化，但是一旦初始化，您就无法使其引用其他字符串实例大批。但它的元素是可以改变的。
例如 words[0]="string1" 可以更改为 words[0]="string2" 如果您说
private static final string[] words 那么 words 将成为类变量并且可以在类内访问。
如果你说
private final string [] words 那么 words 将成为实例变量并且可以在类中访问
如果你说 variable as public 那么它可以在类外部访问并且它的元素可以被任何人修改。
**建议**
1.使用**枚举**
2\. 使用列表并使用 Collections.unmodifiableList() 使其不可修改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:38:09.977

它只是取决于你想做什么，就像任何面向对象的概念一样。

public/private/... 是您要向您的成员/方法声明的访问权限。

BTW final 表明一旦初始化就不能更改变量。static 意味着类的所有实例都将具有相同的变量。

总之一切皆有可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T15:38:29.880

我更喜欢使用枚举来声明常量：

```
public enum Words {

    ONE("one"),
    TWO("two");

    private String title;

    private Words(String title){
        this.title = title;
    }

    public String getTitle() {
        return title;
    }
} 
```

使用起来非常方便（Words.ONE），您可以将其他属性与每个属性（标题等）相关联。

您还可以通过调用 Words.values(); 来获取常量数组；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T15:39:00.193

不鼓励将类变量声明为 public，因为它没有明确说明它们是类变量。

它还向其他编写依赖于该特定类变量的代码的人开放您的类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T15:42:37.187

您知道 static 或 final 关键字的作用吗，因为它没有显示在您的问题中！

首先阅读静态和最终！

> 它应该是**静态最终**的，因为只有它才会真正具有作为常数的意义！

顺便说一句，“字符串”？

# c# - 在 CSS 中查找和删除注释的正则表达式

> ID：10554444
> 
> 赞同：1
> 
> 时间：2012-05-11T15:35:04.523
> 
> 标签：c#, regex

我正在编写自己的练习缩小工具（正则表达式练习），但经过一些教程后，我仍然没有得到它。

例如，我试图从我的 CSS 文件中查找并删除所有注释，其中包括：

1.  单行注释，如

    /** 单行注释***** ***** / 或

    / ***** ** ******单行注释 ** / 和

2.  多行注释，如

    / ***** *****开始评论

    .myCssClass

    {

    ```
    font:13pt Arial; 
    ```

    }

****** *** ** *** *******评论结束 ** */***

 ***到目前为止，我使用的表达式只能处理单行注释，如下所示

```
(\/\*.*\*\/) 
```

但是我想了解的正则表达式是如何告诉正则表达式引擎也跨行。我确实试过这个：

```
(\/\*[.\n]*\*\/) 
```

这根本不起作用。

有人知道我要去哪里错了吗？

谢谢， 雅克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:44:53.477

如果您在 C# 中运行比赛，您是否尝试过 RegexOptions？

```
Match m = Regex.Match(word, pattern, RegexOptions.Multiline); 
```

“多行模式。更改 ^ 和 $ 的含义，以便它们分别匹配任何行的开头和结尾，而不仅仅是整个字符串的开头和结尾。”

另请参阅[去除 C 样式多行注释](https://stackoverflow.com/questions/2538279/strip-out-c-style-multi-line-comments)

**编辑：**

好的..看起来像正则表达式的问题。[这是一个使用来自http://ostermiller.org/findcomment.html](http://ostermiller.org/findcomment.html)的正则表达式模式的工作示例。这个人很好地推导了正则表达式，并展示了各种方法的缺陷和缺陷。注意：RegexOptions.Multiline/RegexOptions.Singleline 似乎不会影响结果。

```
string input = @"this is some stuff right here
    /* blah blah blah 
    blah blah blah 
    blah blah blah */ and this is more stuff /* blah */
    right here.";

string pattern = @"(/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/)";
string output = Regex.Replace(input, pattern, string.Empty, RegexOptions.Singleline); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T17:03:14.843

匹配 C 风格注释（以 开头`/*`、以 结尾`*/`且不嵌套）的正则表达式是：

```
[/][*]([^*]|[*]*[^*/])*[*]+[/] 
```

（关于这个的推导，我写了一点。见：www.nongnu.org/txr/txr-manpage.html 在目录中查找“附录A”，有一个链接到“示例：匹配C 语言注释”。）

C-style comments can include the sequence `/*` in the interior, such that `/*/**/` is a valid comment. The closest `*/` terminates the comment so that `/* */aaa/* */` is two comments with `aaa` in between, not one comment. This "non-greedy" behavior complicates the matching in a regex language which has no non-greedy operator.***

# javascript - 单击孩子时没有onclick

> ID：10554446
> 
> 赞同：16
> 
> 时间：2012-05-11T15:35:06.923
> 
> 标签：javascript, jquery, jquery-events

我有以下html代码：

```
<div class="outerElement">
    <div class="text">
     Lorem ipsum dolar sit amet
    </div>
    <div class="attachment">
      <!-- Image from youtube video here -->
    </div>
</div> 
```

而且我有一个 jQuery onclick 事件，`.outerElement`但是，我不希望在`.outerElement`单击附件时调用 onclick 事件，是否有某种方法可以防止这种情况或检查单击了哪个元素？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-11T15:35:54.990

`event.stopPropagation()`在子元素上使用。

```
$(".attachment").on("click", function(event){
  event.stopPropagation();
  console.log( "I was clicked, but my parent will not be." );
}); 
```

这可以防止事件将 DOM 冒泡到父节点。

`event`对象的一部分也是[`target`member](http://api.jquery.com/event.target/)。这将告诉您从哪个元素触发事件开始。但是，在这种情况下，`stopPropagation`似乎是最好的解决方案。

```
$(".outerElement").on("click", function(event){
  console.log( event.target );
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-17T10:02:38.587

我不确定允许从子元素传播对性能的影响，但我通过比较 event.target 和 event.currentTarget 解决了这个问题：

```
onClick={(event) => {
  if (event.target === event.currentTarget) {
     console.log('Handle click');
  }
}} 
```

这是 React ^ 更通用的 javascript 代码是：

```
$('.outerElement').click(function(event) {
  if (event.currentTarget !== event.target) {
    return;
  }
  // Handle event
}); 
```

* * *

您还可以过滤掉特定的元素类型，如下所示：

```
$('.outerElement').click(function(event) {
  if (['input', 'select', 'option'].indexOf(event.target.localName) >= 0) {
    return;
  }
  // Handle event
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-16T06:38:50.143

这在没有 jQuery 的情况下有效

```
<div class="outerElement">
    <div class="attachment">Hello</div>
</div>

<script type="text/javascript">
document.getElementsByClassName('outerElement').onclick = function(){

    alert('You clicked on parent');

}
document.getElementsByClassName('attachment').onclick = function(){

    event.stopPropagation();
    alert('You clicked on child');

}
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-06T05:39:09.617

简单地设置`onclick="event.stopPropagation();"`在孩子身上就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T15:37:12.787

我不确定您是否可以在`attachment`单击项目时阻止事件触发，但您当然可以对其进行过滤

```
$('.outerElement').click(function() {
  if ($(this).hasClass('attachment')) {
    return;
  }
  // Handle event
}); 
```

# spring - AspectJ - 无法识别连接点表达式中存在注释

> ID：10554453
> 
> 赞同：0
> 
> 时间：2012-05-11T15:35:26.710
> 
> 标签：spring, aop, aspectj

在我的一个方面，我有以下方法：

```
@Before("execution (* org.xx.xx.xx..*.*(@Standardized (*),..))")
public void standardize(JoinPoint jp) throws Throwable {
} 
```

目标是找到我的应用程序包的所有方法，这些方法至少有一个用@Standardized 注释的参数（不是用@Standardized 注释的不同的类型）

ps：@Standardized 是自定义注解。

从我在文档中阅读的内容来看，这个配置应该是正确的（如果不是，请告诉我），但是当我在 JBoss 服务器下部署我的应用程序时，出现以下异常：

java.lang.IllegalArgumentException：**警告此类型名称不匹配：标准化**

细节：

```
11.05.12 17:02:35 ERROR - ContextLoader.java@initWebApplicationContext: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: warning no match for this type name: Standardized [Xlint:invalidAbsoluteTypeName]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) 
```

我尝试使用 (@Standardized *,..) 而不是 (@Standardized (*),..) （我知道的结果不一样），但我仍然有同样的错误。

有人知道为什么吗？

提前感谢您的帮助。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:45:29.810

除非`@Standardized`注释在默认包中，否则您需要为注释指定 FQN 名称或使用`@*..Standardized`.

# less - 如何在浏览器中编译 LESS 文件

> ID：10554462
> 
> 赞同：13
> 
> 时间：2012-05-11T15:36:01.110
> 
> 标签：less

我创建了使用 LESS 功能切换主题的代码。不幸的是，LESS 文件不会在浏览器中编译。如何在浏览器中编译 LESS 文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T16:06:40.063

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-27T18:28:42.187

如果您使用谷歌浏览器，请在您的 html 中包含较少的文件并使用一些服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T17:48:31.773

您必须使用一些 Web 服务器，如 apache tomcat、统一服务器 UPX 等，以便在 IE 中编译更少。正如@ie 所说，在 localhost 中运行之前将这些文件包含在您的文档中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T20:29:02.610

检查您的网络服务器。许多服务器最初并未设置为处理提供的 LESS 文件。特别是较新版本的 IIS 往往会阻止服务`*.less`，因此需要对其进行配置。您可以通过直接从浏览器加载 LESS CSS 文件来查看是否发生这种情况。从 Firefox 执行此操作的最简单方法是查看您的页面源代码并单击指向您的 LESS 文件的链接。

# php - MySQL 查询：LIMIT 是否在 NOW() 之前和 NOW() 之后对两个条目设置了上限

> ID：10554464
> 
> 赞同：0
> 
> 时间：2012-05-11T15:36:06.133
> 
> 标签：php, mysql, limit

假设我有一个包含三个字段的数据库表：id、内容和时间戳。

条目一整天都在进来，所以有大量的条目和条目仍然会定期进入。

当访问者查看将显示条目的我的网页时，该页面将显示 10 个最新的以及访问者在页面上时出现的任何新条目。

我就这个问题发表了一个类似的帖子，我得到的唯一答案是“使用限制”，但如果这会在访问者在页面上时禁止任何新条目进入，我没有得到回应。

这就是我的意思...我想对我的数据库进行查询，然后根据常量 NOW() 变量检查每个条目的时间戳。我想限制查询及时返回的数量，但让未来的帖子无限开放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:39:16.023

[`LIMIT`](http://dev.mysql.com/doc/refman/5.5/en/select.html)在 SELECT 语句中使用对 INSERTS、UPDATES 或 DELETES 没有影响。它仅确定将从 SELECT 查询返回的行子集。

要在用户查看页面后获取已插入的行，您需要运行后续查询。您可能会通过 AJAX 执行此操作。或者，您可以使用某种长轮询或套接字机制来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:45:25.860

如果我没有完全回答你的问题，请耐心等待。如果我理解正确，这个问题似乎可以通过执行两个查询来解决。

```
-- for the 10 most recent on page load
SELECT timestamp, content FROM table WHERE timestamp < NOW() LIMIT 10; 
```

然后将最新项目的时间戳存储在一个变量中，我假设您可以在 AJAX 调用中使用该变量来获取“实时”中的内容，并使用该时间戳来查询未来的项目。

```
SELECT timestamp, comment FROM table where timestamp > $last_timestamp LIMIT 10; 
```

但是，我仍然会限制查询数量并继续存储最后一个时间戳，以免遇到用户坐在页面上并且随着输入新帖子而查询结果越来越大的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:47:09.133

如果我已经理解了你的问题，我认为有一个解决方法可以使用普通的 javascirpt 和 MySql 来解决这个问题。

你必须做的是加载网页中的 10 个最新行，并将最新的 ID 保存在一个变量中。

加载页面后，您可以放置​​一个通过 ajax 查询后端的 javascript 方法，使用带有计时器的无限循环查找，如果数据库中的 ID 比您存储在变量中的 ID 高，则获取新行。

我希望我帮助了你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T16:06:22.443

拿表：

```
######################################
# id #  content  #      timestamp    #
######################################
#  1 # something # YY-MM-DD 12:00:00 #
#  2 # something # YY-MM-DD 11:59:00 #
#  3 # something # YY-MM-DD 11:58:00 #
#  4 # something # YY-MM-DD 11:57:00 #
###################################### 
```

现在，如果您执行一个查询，返回所有时间戳 < NOW() 的行，现在是`YY-MM-DD 12:01:00`，您将只返回表中的 4 个结果。您可以使用 limit 来设置要检索的最大行数，但它只会限制匹配限制为 <NOW() 的行。

当用户查看上一个查询返回的行列表时，更多的行被添加到表中

```
######################################
# id #  content  #      timestamp    #
######################################
#  5 # something # YY-MM-DD 12:00:02 #
#  6 # something # YY-MM-DD 12:00:03 #
###################################### 
```

由于在运行前一个查询时这些行不存在，因此查询无法返回。即使它们确实存在， NOW() 在运行时也会转换为时间戳，`YY-MM-DD 12:01:00`因此实际上之前的查询正在返回时间戳 < 的所有行`YY-MM-DD 12:01:00`。由于新行具有时间戳 >，`YY-MM-DD 12:01:00`因此它们不会被返回。

为了返回这些新行，您必须再次执行查询，除非您刷新使用 AJAX 或 JQUERY 的页面，否则将无法完成。简而言之，您的查询可以而且只会返回表中已经存在的行列表。它不能返回在查询运行后添加的那些。

# android - 如何立即停止服务？

> ID：10554465
> 
> 赞同：0
> 
> 时间：2012-05-11T15:36:06.493
> 
> 标签：android, service

在 android 开发中，我有一个由 Brodcastreceiver 启动的服务，它启动并正确完成了它的任务，但是当我尝试使用 stopself(); 从它的类中停止服务时；它直到执行了 3 次任务才停止，然后在这里停止的是 onStart 服务和 onDestroy(); 的代码：

```
@Override
    public void onStart(Intent intent, int startid) {
        player.start();
        SystemClock.sleep(30000);
        onDestroy();
    }

    @Override
    public void onDestroy() {
        player.stop();
    this.stopSelf();} 
```

这是我从 BrodcastReceiver 启动服务时的代码：

```
Intent intent =new Intent(context,RingService.class);
context.startService(intent); 
```

有没有办法让我的服务在它自己完成任务后立即停止，还是我必须让 BrodcastRecevicer 停止它？

任何解决此问题的帮助或重定向将不胜感激

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:52:19.227

只需在 onStart 结束时调用 stopSelf() 而不是 onDestroy() 调用，并从 onDestroy() 中删除 stopSelf() 调用。

# haskell - 另一个 monad 下的有状态代码

> ID：10554466
> 
> 赞同：3
> 
> 时间：2012-05-11T15:36:06.850
> 
> 标签：haskell, monads, haskell-snap-framework

我有一个爱好网络项目。很简单，只是为了学习 Haskell 和 web 编程。为清楚起见，我使用 Snap 框架。我有以下代码（site.com/auth 处理程序）：

```
auth :: MonadSnap m => m ByteString  
auth = withSession $ \s -> do  
    Just user <- getPostParam "user"
    Just password <- getPostParam "password"
    if user == "demi" && password == "1234"
       then redirect "/"
       else redirect "/login" 
```

`withSession`读取当前会话并运行参数中的函数。在这里我面临一个问题：用户获得授权，我想为会话添加新值`s`并使用它运行代码。最好的方法是什么？你会怎么做？假设下面的代码也使用`s`.

`auth`另一个问题：我能否以某种方式在处理程序（如）和其他函数中透明地提供上下文？我不想使用以下参数提取所有函数中的所有上下文（如数据库连接、会话和可能其他）`ctx`：

```
findGoodies :: MonadSnap m => MyContext -> String -> m String
checkCaptcha :: MonadSnap m => MyContext -> m Bool
breakingNews :: MonadSnap m => MyContext -> m ByteString 
```

理想情况下，我想要一个功能`withContext`，但在处理请求期间可能会更改上下文。我想我可以定义我的 monad 来解决它（对吗？），但是我已经必须使用 Snap monad 并且我不能扩展它（这也是一个问题）？

希望我说得很清楚对我有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T20:51:01.503

您可以将您的`MonadSnap`monad 包装在一个`StateT`以您的上下文作为其状态的状态中。一旦定义了适当的实例，您就可以在新的 monad 中编写可以访问会话状态但仍然可以调用`MonadSnap`没有`lift`.

```
{-# LANGUAGE GeneralizedNewtypeDeriving #-}
{-# LANGUAGE MultiParamTypeClasses #-}
import Control.Monad.State

-- StateT wrapper
newtype MySnapT m a = MySnapT { unMySnapT :: StateT MyContext m a }
    deriving ( Monad )

instance MonadTrans MySnapT where
    lift = MySnapT . lift

instance MonadSnap m => MonadSnap (MySnapT m) where
    liftSnap = lift . liftSnap

instance MonadSnap m => MonadState MyContext (MySnapT m) where
    get = MySnapT get
    put = MySnapT . put

runMySnapT :: MonadSnap m => MySnapT m a -> MyContext -> m (a, MyContext)
runMySnapT m = runStateT . unMySnapT $ m

-- wrapper for withSession that runs a MySnapT action with
-- the current session as the StateT state, and sets the
-- resulting state back when it is done
withMySession :: MonadSnap m => MySnapT m a -> m a
withMySession m = do
    (a, s') <- withSession $ runMySnapT m -- read the session and run the action
    setSession s' -- write the session back to disk
    return a        

-- functions that run in the MySnapT monad have access to context as
-- state, but can still call MonadSnap functions
findGoodies :: MonadSnap m => String -> MySnapT m String
findGoodies s = do
    s <- get -- get the session
    put $ modifySession s -- modify and set the session back into the State
    liftSnap undefined -- I can still call Snap functions
    return "Hello"

auth :: MonadSnap m => m String  
auth = withMySession $ do -- use withMySession to run MySnapT actions
    findGoodies "foo"

-- dummy definitions for stuff I don't have

data Snap a = Snap a

class Monad m => MonadSnap m where
  liftSnap :: Snap a -> m a

data MyContext = MyContext

withSession :: MonadSnap m => (MyContext -> m a) -> m a
withSession = undefined

setSession :: MonadSnap m => MyContext -> m ()
setSession = undefined

modifySession :: MyContext -> MyContext
modifySession = undefined 
```

# windows - 如果我添加窗口句柄或 NULL 值有区别吗

> ID：10554467
> 
> 赞同：3
> 
> 时间：2012-05-11T15:36:12.263
> 
> 标签：windows, winapi, null, handle

我有一个小问题。我将首先向您展示一个示例，然后我会告诉您问题所在。

**例子：**

```
while(GetMessage(&msg, NULL, 0, 0)){
   TranslateMessage(&msg);
   DispatchMessage(&msg);
} 
```

该示例正常工作，但如果“GetMessage”函数中的参数 2 更改为窗口的句柄名称，如下所示：

**示例2：更改后**

```
while(GetMessage(&msg, Hwnd, 0, 0)){
   TranslateMessage(&msg);
   DispatchMessage(&msg);
} 
```

退出程序时会出现小问题。该程序仍然在进程列表中工作。并且需要选择它然后单击结束进程按钮来终止程序

现在，添加（NULL 或窗口句柄）之间有区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:09:36.643

您在第二个示例中遇到的问题是，在您的窗口被销毁后，您提供的窗口句柄`GetMessage()`不再有效。每个后续调用都会返回一个错误以通知您（使用`GetLastError()`give `ERROR_INVALID_WINDOW_HANDLE`），但代码不处理这种情况，因此永远处于忙碌循环中。

这就是为什么[MSDN 库页面`GetMessage()`](http://msdn.microsoft.com/library/ms644936.aspx "MSDN 库")建议不要使用`while (GetMessage(...))`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:59:43.563

您提供的两个示例之间的根本区别在于您的应用程序如何处理消息。第一个示例将从消息队列中为您可能在应用程序中创建的任何窗口提取消息。后面的示例将仅从与传递给函数的句柄关联的窗口中提取消息。您可能会在应用程序中创建许多窗口。如果您只对捕获特定窗口的消息感兴趣，则该参数将用于限制被转换和分派到窗口过程函数的消息。但是，如果您计划只创建一个窗口，则差异可以忽略不计。

# python - 如何将函数应用于列表元素？

> ID：10554470
> 
> 赞同：13
> 
> 时间：2012-05-11T15:36:16.240
> 
> 标签：python, list, map, python-2.7

我想将一个函数应用于列表中的所有元素，但我想实际更改元素（它们是对象），而不是查看结果。我认为这是使用`map()`或列表推导的问题。

```
class Thing(object):
    pass

# some collection of things
my_things

# they are all big...

# produces SyntaxError: invalid syntax
[i.size = "big" for i in my_things]

# produces SyntaxError: lambda cannot contain assignment
map(lambda i: i.size="big", [i for i in my_things]) 

# no error, but is it the preferred way?
for i in my_things:
    i.size="big" 
```

这样做的方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T15:45:29.187

有什么问题

```
for i in my_things:
    i.size = "big" 
```

您既不想使用也不想使用`map`列表理解，因为它们实际上会创建新列表。而且你不需要那个开销，是吗？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-11T16:02:43.017

虽然我同意没有任何问题

```
for i in my_things:
    i.size = "big" 
```

有些人对 python 单线很感兴趣。;)

一种选择是向您的类添加一个 set 方法，然后可以从 lambda 调用该方法（本质上是将赋值隐藏在函数中）：

```
class Thing(object):
    def setSize(self, size):
        self.size = size

map(lambda i: i.setSize("big"), my_things) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T15:57:03.797

您可以使用该`__setattr__`方法在列表理解中分配属性。虽然，根据一些 SO 线程，使用列表推导而不使用输出不是 Pythonic。

```
[i.__setattr__('size', 'big') for i in my_things] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:38:25.710

> 我认为这是使用 map() 或列表推导的问题。

不是完全。

```
my_things[:] = map(...) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-17T03:55:06.753

在 python3 上可能是这样的：

```
[dict(**i.__dict__, size='big') for i in my_things] 
```

或者

```
map(lambda x: dict(**x.__dict__, size='big'), my_things) 
```

如果我是 dict 不是对象

```
[dict(**i, size='big') for i in my_things] 
```

在 python2 上

```
[dict(i.copy(), size='big') for i in my_things]  # isinstance(i, dict)
[dict(i.__dict__.copy(), size='big') for i in my_things]  # isinstance(i, object) 
```

# iphone - 调整 uiimage 大小并添加空格

> ID：10554471
> 
> 赞同：3
> 
> 时间：2012-05-11T15:36:20.127
> 
> 标签：iphone, ios, uiimage, image-resizing

我一直在谷歌搜索，似乎找不到解决方案。这是我的问题。我需要将 UIImage 调整为特定大小 - 即大小，以便宽度和高度都是 2 的幂。我的图像来自相机，因此尺寸不是 2 的幂。我需要保留整个图像，同时保持正确的 aspect-ie **aspect fit mode**。我知道如何调整 UIImage 的大小，但我不知道如何调整图像大小并在顶部和底部适当地添加空白以保持正确的整体图像大小，同时保持正确的方面。有人对此有见识吗？

顺便说一句，这是我当前的调整大小代码（只是调整大小）

```
- (UIImage *) resizeImage:(UIImage *)initialImage
{
    CGSize newSize = CGSizeMake(256, 256);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [initialImage drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    return newImage;
} 
```

我尝试使用[这个](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)`UIViewContentModeScaleAspectFit`博客，但是当我为内容模式指定时，它确实给了我正确的图像大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:41:40.107

一个简单的方法是

将您的图像放入 UIImageView，使用空白和白色背景颜色设置您想要的大小，然后设置 UIViewContentModeScaleAspectFit 模式

然后将其转换为 UIImage

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:yourFrame];
imageView.image = yourImage;
imageView.contentMode = UIViewContentModeScaleAspectFit ;
imageView.backgroundColor = [UIColor whiteColor];

UIGraphicsBeginImageContextWithOptions(imageView.bounds.size, imageView.opaque, 0.0);
[imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
//the image you want
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

你说对了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:19:29.560

您拥有的解决方案大部分已经存在。只需更改 [initialImage drawInRect:] 的矩形。解决方案看起来像这样（未经测试！）：

```
CGSize size = initialImage.size;
CGFloat max = (size.width > size.height) ? size.width : size.height;
CGSize newSize = CGSizeMake(size.width * newSize.width / max, size.height * newSize.height / max);
CGRect rect = CGRectMake((newSize.width-newSize.width)/2.0,
                         (newSize.height-newSize.height)/2.0,
                         newSize.width, newSize.height);
[initialImage drawInRect:rect]; 
```

# c++ - 为什么我的 cout 输出没有立即出现？

> ID：10554474
> 
> 赞同：11
> 
> 时间：2012-05-11T15:36:42.007
> 
> 标签：c++

它不打印放在循环中的字符串。该程序是在 g++ 的帮助下编写的，包含 sys/types.h 头文件

```
for(int i=0;i<9;i++)
{
    cout<<"||";
    sleep(1);
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T15:38:48.640

你没有刷新你的输出。

```
std::cout << "||" << std::flush; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T15:38:42.520

您可能在这里看到的是输出被缓冲的效果。通常，在使用之前不会实际写入输出`std::endl`。

```
for(int i=0;i<9;i++)
{
    // Flushes and adds a newline
    cout<< "||" << endl;
    sleep(1);
} 
```

幕后`std::endl`是添加换行符，然后使用`std::flush`强制输出到控制台。可以`std::flush`直接使用得到同样的效果

```
for(int i=0;i<9;i++)
{
    cout << "||" << flush;
    sleep(1);
} 
```

# php - 如何在 PHP 中拆分此数组？

> ID：10554477
> 
> 赞同：0
> 
> 时间：2012-05-11T15:36:51.747
> 
> 标签：php, arrays, preg-split

菜鸟问题。我有这个：

```
Array
(
    [0] => address = 123 Something Street
    [1] => address2 = Something else
    [2] => city = Kalamazoo
    [3] => state = MI
    [4] => zip = 49097
    [5] => country = United States
) 
```

但我想要这个：

```
Array
(
    [address] => 123 Something Street
    [address2] => Something else
    [city] => Kalamazoo
    [state] => MI
    [zip] => 49097
    [country] => United States
) 
```

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T15:40:11.060

试试这个：

```
$new_array = array();
foreach($your_array as $line) {
 list($key, $value) = explode('=', $line, 2);
 $new_array[$key] = $value;
} 
```

访问`$new_array`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T15:42:27.720

您需要遍历数组并将值分解为“=”之前的位和之后的位。使用这两条数据，您可以创建一个新数组，该数组由第一位索引，并将值作为第二位。

```
$new_array = array();
foreach($your_array as $value)
{
    $chunks = explode(' = ', $value);
    $key = $chunks[0];
    $new_array[$key] = $chunks[1];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:42:04.820

```
$arrayOriginal = Array
(
    [0] => address = 123 Something Street
    [1] => address2 = Something else
    [2] => city = Kalamazoo
    [3] => state = MI
    [4] => zip = 49097
    [5] => country = United States
);
$arrayNew = Array();
for($arrayOriginal as $value)
{
    $strArray = explode(" = ", $value, 2);
    $arrayNew[$strArray[0]] = $stArray[1];
} 
```

需要注意的一点是，如果您的数组不太可能完全格式化，请执行以下操作：

```
for($arrayOriginal as $value)
{
    $strArray = explode("=", $value, 2);
    $arrayNew[trim($strArray[0])] = trim($strArray[1]);
} 
```

这确保了即使像“something = something”这样的值也会被正确解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:43:42.470

我不相信有任何功能可以自动为您执行此操作，但我只是写了以下内容。

```
$newArr = array();
foreach ($oldArr as $value) {
    $split = explode(" = ", $value, 2);
    $newArr[$split[0]] = $split[1];
} 
```

# php - 电子邮件解析和处理架构

> ID：10554482
> 
> 赞同：1
> 
> 时间：2012-05-11T15:37:21.347
> 
> 标签：php, python, mysql, email, architecture

好的，我在处理每封电子邮件时做了大量的工作。假设我在为系统制作人工智能，他会自动回复他收到的电子邮件，但我仍然不知道从哪里开始。

这就是我的想法

**架构 1** ![在此处输入图像描述](../Images/f5d21b835e3f1fe87116b2e47b49b310.png)

问题 ：

1.  假设我们每秒有 1000 封电子邮件，邮件服务器、exim 或 sendmail、davecot 等究竟是如何工作的？

2.  parseandsavetomysql.py 可以通过管道在一秒钟内处理 1000 封电子邮件吗？这也是如何工作的？顺便说一句，目前它工作正常，但我需要知道这一点。

3.  我对工人的逻辑是否正确？还是排队系统？我试图看到 resque 和朋友，但我仍然不明白我们如何锁定会话让我们在这个问题中说“嘿，我正在处理这个文件不适用于 email1.rawemail 工作在其他”我们怎样才能做到正确或更简单的方法？

**架构 2**

![在此处输入图像描述](../Images/4a8bb7437e27d0332fef59df7f26b69b.png)

问题？

1.  如书面
2.  pop/stmp 服务器如何每秒接收 1000 封电子邮件？
3.  我们可以通过 imap 和 pop 获取电子邮件吗？因为我们只是在处理 pop3 是选择性能的正确方法吗？*我目前正在使用的 php 上有一个 imap_open*

添加在

1.  有没有很好的链接或博客文章可以解决与我相同的问题？
2.  请给我解决我的问题的项目、应用程序或第三方的链接？
3.  如果有什么想法，请写下来。

感谢您的帮助，亚当·拉马丹

编辑**了我当前的架构**

![在此处输入图像描述](../Images/767c82cb54655aa62542c9c0d4680940.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:16:32.650

就像许多“大图”架构问题一样，最好的解决方案确实是其中之一……这取决于。你能控制部署环境吗？也就是说...您可以使用任何您喜欢的电子邮件服务器，还是只能使用已经安装和托管的电子邮件服务器？您可以在与 SMTP 服务相同的机器上运行代码吗？应该考虑这些问题以及许多其他问题来提出（接近）最佳架构。

鉴于此，我将做一些假设并提供一些我认为值得探索的想法......

您应该研究一个高性能的消息传递系统。具体来说，看看[RabbitMQ](http://www.rabbitmq.com/)。RabbitMQ 可靠且高效，基于异步传入事件的工作负载分配是他们在他们的（在我看来，非常好的）教程中专门讨论的一种模式。

使用这样的消息传递服务器，您有一个接收传入电子邮件的进程。最好这是作为 SMTP 过程的一部分完成，或者至少非常接近它 - 特别是在您提到的工作负载下。如果您别无选择，那么您关于使用 cron 通过 POP 或 IMAP 收集消息的想法现在必须奏效。

然后，电子邮件收集过程会将消息推送到 RabbitMQ 队列中。（也许不是字面上的电子邮件本身，虽然这是一种可能性，但我认为更像是对电子邮件有效存储位置的引用）。然后，您运行多个订阅了命名消息队列的工作进程。RabbitMQ（或您决定的任何消息传递服务）然后将以循环方式将这些消息分发给各个订阅者。如果已经加载，工作进程可以 NACK 消息，或者将自己的控制流消息发送回服务。对于非常高的工作量（再次，就像您提出的那样），我强烈推荐某种管理过程来密切关注分布式系统的整体健康状况。经理将收集运行时统计数据（对于整个系统的未来增长计划、优化和重构非常有用），并且能够启动和关闭新的工作进程。在您达到如此高的工作量之前，并假设您的工作进程是稳定的并且可以在没有内存碎片等的情况下存活很长时间，那么仅使用消息服务器来分配工作就足够了。

对于它的价值，我有一些编写电子邮件处理器的经验（特别是[xmail](http://www.xmailserver.org/) - 如果您刚刚开始您的项目并且对它的早期阶段有很多控制，我会推荐它）。另外，我目前正在使用 RabbitMQ 为主要的科学计算网格构建多代理结果缓存系统。

无论如何......祝你的项目好运！

# python - 可以编写将在 Python 和 IronPython 上运行的 XML 读取代码吗？

> ID：10554484
> 
> 赞同：2
> 
> 时间：2012-05-11T15:37:25.683
> 
> 标签：python, xml, ironpython

我正在编写代码来解析 XML（实际上是 KML）文件并将它们加载到数据库中。我想在 Python 或 IronPython 下运行代码。

不幸的是，我发现它`xml.dom.minidom`不会在 IronPython 下加载，因为它依赖于 expat.py，而这不是在 IronPython 上实现的。我还尝试使用`try / except`块从任一平台获取 XML 文档对象。虽然我可以获得在任一平台下优雅运行的文档，但文档的内部实现差异太大，无法编写在任一平台下运行的代码。

是否有跨 Python 和 IronPython 兼容的 XML 解析策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:41:38.470

根据[此网页](http://foolish-assertions.blogspot.com/2009/12/spare-batteries-for-ironpython.html)，您可能可以`xml.dom.minidom`运行（如果唯一缺少的部分是`expat.py`）：

*“下载 FePy 的[pyexpat.py](https://fepy.svn.sourceforge.net/svnroot/fepy/trunk/lib/pyexpat.py)，将其复制到 IronPython 的 Lib/xml/parsers 子目录，并重命名为 expat.py。”*

相关：http: [//ironpython.codeplex.com/workitem/20023](http://ironpython.codeplex.com/workitem/20023)

# php - 使用“secret_token”轻松实现安全的 PHP 登录以进行查询

> ID：10554488
> 
> 赞同：1
> 
> 时间：2012-05-11T15:38:01.177
> 
> 标签：php, authentication

我正在编写一个 C# 桌面照片应用程序，它需要用户登录/注销、在服务器中存储照片、共享照片。我想知道是否已经有开源的、易于实现的安全（并使用临时令牌）登录库/桌面应用程序示例。

我正在寻找可以轻松构建类似于以下请求的东西：[https ://myphp_system.com/userid1847236/getphoto?secret_token=cj58sghcvz63jh0nar42vco669dnhx6g](https://myphp_system.com/userid1847236/getphoto?secret_token=cj58sghcvz63jh0nar42vco669dnhx6g)

我想要的是避免诸如暴力攻击或 SQL 注入攻击之类的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:53:57.490

您可以在此处实现自己的[教程](http://djpate.com/2011/01/13/how-to-write-a-complete-oauth-provider-in-php5/)服务，并包括 twitter、facebook 等其他服务

# wcf - WCF 数据序列化

> ID：10554490
> 
> 赞同：1
> 
> 时间：2012-05-11T15:38:07.223
> 
> 标签：wcf, xml-serialization

使用 WCF 如何修改此 DataContract 或代码：

```
<DataContract()>
Public Class listaActos
Private _codigoActo As List(Of String)

<DataMember(IsRequired:=True)>
Public Property codigoActo() As List(Of String)
    Get
        Return _codigoActo
    End Get

    Set(ByVal value As List(Of String))
        _codigoActo = value
    End Set
End Property   ... 
```

序列化时生成以下响应xml：

```
 <a:listaActos>
     <a:codigoActo xmlns:b="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
            <b:string>01672</b:string>
     </a:codigoActo>  </a:listaActos> 
```

但我想博如下：

```
<a:listaActos>
     <a:codigoActo>01672</a:codigoActo>
     <a:codigoActo>01673</a:codigoActo>
     <a:codigoActo>01674</a:codigoActo></a:listaActos> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:05:51.703

如果您的类`listaActos`只有其中的列表`codigoActo`，那么您可以将其设为集合类型（例如，使其继承自`List(Of String)`）。这将为您提供所需的 XML 形状`DataContractSerializer`。

如果它有更多成员，那么您需要使用`XmlSerializer`, 并这样定义类。

下面的代码显示了列表选项。

```
Public Class StackOverflow_10554490
    <CollectionDataContract(Name:="listaActos", Namespace:="http://my.namespace", ItemName:="codigoActo")> _
    Public Class listaActos
        Inherits List(Of String)
    End Class

    <DataContract(Name:="Root", Namespace:="http://my.namespace")> _
    Public Class Root
        <DataMember()> _
        Public Property listaActos As listaActos
    End Class

    Public Shared Sub Test()
        Dim list As listaActos = New listaActos()
        list.Add("01672")
        list.Add("01673")
        list.Add("01674")
        Dim root = New Root With {.listaActos = list}
        Dim dcs = New DataContractSerializer(GetType(Root))
        Dim ms = New MemoryStream()
        dcs.WriteObject(ms, root)
        Console.WriteLine(Encoding.UTF8.GetString(ms.ToArray()))
    End Sub
End Class 
```

# jquery - jQuery：删除“几乎”空的 div

> ID：10554497
> 
> 赞同：1
> 
> 时间：2012-05-11T15:38:41.873
> 
> 标签：jquery, jquery-selectors

给定以下html：

```
<div id='foo'>
  <div class='prodbar'>
    <div class='title'>Group 1</div>
    <div class='product'>Product #1</div>
    <div class='product'>Product #2</div>
    <div class='product'>Product #3</div>
    <div class='product'>Product #4</div>
  </div>
  <div class='prodbar'>
    <div class='title'>Group 2</div>
    <div class='product'>Product #5</div>
  </div>
  <div class='prodbar'>
    <div class='title'>Group 3</div>
    <div class='product'>Product #6</div>
    <div class='product'>Product #7</div>
  </div>
</div> 
```

我有将类添加`'selected'`到单击的任何产品的代码。选择某些产品后，用户可以单击一个按钮，将所选产品从屏幕中删除，这很简单：

```
$(".selected").remove(); 
```

现在，如果这清空了一个产品组，我希望也可以删除组 div 周围的 div。因此，在上面的示例中，如果选择并删除了 Product #5，我希望将现在只有一个标题的 prodbar 与它一起删除。

我知道我可以通过一个循环来完成我想要的，但我希望有更 jQuery 优雅的东西。本质上，我需要知道一个 div 是否只有 1 个孩子。我对 jQuery 相当陌生，我不确定这是否可以直接在选择器中实现。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:42:19.780

如果您正在寻找清理代码，那么下面将过滤所有 prodbar 并删除如果 title 是唯一的孩子，

[**演示**](http://jsfiddle.net/skram/KeRgq/16/)

```
$('button').click(function() {

    $('.selected').parent().filter(function() {
       if ($(this).children().not('.selected').length <= 1) { //remove the prodbar
          return true;
       } else { //remove selected alone
          $(this).find('.selected').remove();
          return false;
       }
    }).remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:45:52.040

你可以试试这个：

```
$(".selected").each(function() {
    if ($(this).siblings(".product:not(.selected)").length == 0) {
        $(this).parent(".prodbar").remove();
    }
}); 
```

**演示：http:** [//jsfiddle.net/FaF5t/](http://jsfiddle.net/FaF5t/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:46:07.237

尝试：

```
$(".product.selected").remove();

$(".prodbar").each(function(){
    if($(this).children('.product').length == 0)
        $(this).remove();
}); 
```

此外，如果每个产品都有一个关键字（如`Product`），您可以在不使用的情况下删除组`.each()`：

```
$(".prodbar:not(:contains(Product))").remove(); 
```

证明：http: [//jsfiddle.net/iambriansreed/KeRgq/](http://jsfiddle.net/iambriansreed/KeRgq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:40:21.793

如果您需要知道某个特定元素是否只有一个子元素，您可以直接对其进行测试：

```
if ($('#selector').children().length <= 1) {
    $('#selector').remove();
}; 
```

如果您没有使用唯一的选择器，请务必`.each`单独[测试每个](http://jsfiddle.net/mblase75/9jEJn/)选择器：

```
$('.selector').each(function(i,el) {
    if ($(this).children().length <= 1) {
        $(this).remove();
    };
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T15:44:59.623

这会成功的

```
$('.selected').remove();

$('.prodbar').each(function(){
    if ($(this).children().length <= 1) {
        $(this).remove();
    }
}); 
```

示例：http: [//jsfiddle.net/trapper/NMm8P/](http://jsfiddle.net/trapper/NMm8P/)

# r - R - ggplot2，几个问题，多个相关图

> ID：10554504
> 
> 赞同：3
> 
> 时间：2012-05-11T15:39:02.947
> 
> 标签：r, ggplot2

我在堆栈上提出的第一个问题，我对 R 很陌生，所以请原谅任何礼仪上的冒犯。我正在使用 ggplot2 绘制 2 个堆积面积图。数据是来自 Oracle 数据库的等待事件。这是一个性能调整图表。我有几个问题。

![在此处输入图像描述](../Images/ebbb17180f69b9445e087bea26b72a81.png)

1.  下面的两个图没有正确排列，很可能是由于图例中的文本宽度。有一个简单的解决方案吗？
2.  这两个图确实相关，其中顶部图显示了“CPU”和“用户 I/O”等等待类，底部图显示了这些类中特定等待事件的详细信息。我希望底部的颜色基于等待类，与顶部相同，只是特定事件的颜色深浅不同。如果您不喜欢这个概念，我也愿意接受其他选择。要传达的信息很多。我已将事件的数量限制为 12 以适应配色方案，但如果它可以工作，还有更多。
3.  我想在 X 上显示更精细的时间刻度，或者甚至将下班时间（下午 6 点至上午 8 点）设为灰色，以更好地传达一天中的时间感。
4.  有没有人们常用的超过12种颜色的配色方案？通过 brewer 查看，这是最大值。我知道我可以创建自己的，只是好奇。

这是我的代码：

```
library(ggplot2)
library(RColorBrewer)
library(gridExtra)

DF_AAS <- read.csv('http://dl.dropbox.com/u/4131944/Permanent/R-Questions/AAS-Plot/DATA_FRAME_AAS.csv', head=TRUE,sep=",",stringsAsFactors=TRUE)
DF_AAS <- within(DF_AAS, snap_time <- as.POSIXlt(snap_times2,
                                          format = "%Y-%m-%d %H:%M:%S"))
DF_AAS[c('snap_times2')] <- NULL

DF_AAS_EVENT <- read.csv('http://dl.dropbox.com/u/4131944/Permanent/R-Questions/AAS-Plot/DF_AAS_EVENT.csv', head=TRUE,sep=",",stringsAsFactors=TRUE)
DF_AAS_EVENT <- within(DF_AAS_EVENT, snap_time <- as.POSIXlt(snap_times2,
                                                 format = "%Y-%m-%d %H:%M:%S"))
DF_AAS_EVENT[c('snap_times2')] <- NULL

plot_aas_wait_class <- ggplot()+
  geom_area(data=DF_AAS, aes(x = snap_time, y = aas,
                                    fill = wait_class),stat = "identity", position = "stack",alpha=.9)+
                                      scale_fill_brewer(palette="Paired",breaks = sort(levels(DF_AAS$wait_class)))+
                                      scale_y_continuous(breaks = seq(0, max(DF_AAS$aas)+(max(DF_AAS$aas)*.2), 5))+
                                      opts(panel.background = theme_rect(colour = "#aaaaaa"))

plot_aas_event <- ggplot()+
  geom_area(data=DF_AAS_EVENT, aes(x = snap_time, y = aas,
                                   fill = wait_class_event),stat = "identity", position = "stack")+
                                     scale_fill_brewer(palette="Paired",breaks = DF_AAS_EVENT$wait_class_event)+
                                     scale_y_continuous(breaks = seq(0, max(DF_AAS_EVENT$aas)+(max(DF_AAS_EVENT$aas)*.2), 5))+
                                     opts( panel.background = theme_rect(colour = "#aaaaaa"))

grid.arrange(arrangeGrob(plot_aas_wait_class, plot_aas_event),heights=c(1/2,1/2),ncol=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:38:50.607

对齐问题最简单的解决方案可能是移动图例：

```
library(scales)
plot_aas_wait_class <- ggplot()+
  geom_area(data=DF_AAS, aes(x = snap_time, y = aas,fill = wait_class),stat = "identity", position = "stack",alpha=.9)+
  scale_fill_brewer(palette="Paired",breaks = sort(levels(DF_AAS$wait_class)))+
  scale_y_continuous(breaks = seq(0, max(DF_AAS$aas)+(max(DF_AAS$aas)*.2), 5))+
  opts(panel.background = theme_rect(colour = "#aaaaaa")) +  
  opts(legend.position = "bottom",legend.direction = "horizontal") + 
  guides(fill = guide_legend(nrow = 2))

plot_aas_event <- ggplot()+
  geom_area(data=DF_AAS_EVENT, aes(x = snap_time, y = aas,fill = wait_class_event),stat = "identity", position = "stack")+
  scale_fill_brewer(palette="Paired",breaks = DF_AAS_EVENT$wait_class_event)+
  scale_y_continuous(breaks = seq(0, max(DF_AAS_EVENT$aas)+(max(DF_AAS_EVENT$aas)*.2), 5))+
  opts( panel.background = theme_rect(colour = "#aaaaaa")) +  
  opts(legend.position = "bottom",legend.direction = "horizontal") + 
  guides(fill = guide_legend(ncol = 2))

grid.arrange(arrangeGrob(plot_aas_wait_class, plot_aas_event),heights=c(1/2,1/2),ncol=1) 
```

为了增加 x 轴上的分辨率，我会使用类似的东西：

```
+ scale_x_datetime(breaks = date_breaks("2 hours")) 
```

或任何你喜欢的休息时间。

对特定区域进行着色通常使用`geom_rect`和设置`alpha = 0.25`或其他方式完成。`Inf`这将需要创建一个单独的数据框，其中包含 rect 的起点和终点（使用`-Inf`y 坐标）传递给`geom_rect`.

# asp.net-mvc - 使用 HTML.Begin 将 ViewBag 值从 Razor 视图传递到控制器

> ID：10554506
> 
> 赞同：0
> 
> 时间：2012-05-11T15:39:14.413
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, viewbag

如何通过 ViewBag 将值传递给控制器`HTML.BeginForm()`​​？

```
@using (Html.BeginForm("SaveServiceItemCategory", "Admin", 
                       FormMethod.Post, new { Sku = @ViewBag.SkuCategory  }))
{
    <span>Service Item Sku : @ViewBag.SkuCategory</span>
} 
```

控制器

```
public ActionResult SaveServiceItemCategory(FormCollection formCollection, 
                                            string Sku)
{} 
```

我将 Sku 设为 null，而不是 ViewBag 中的值。

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:42:21.770

没有任何变体`BeginForm`接受要发布的值。

for的`IDictionary`集合参数`BeginForm`是 for `htmlAttributes`。检查您的 HTML 代码，您可能会在名为`Sku`. 这些属性不会发布到服务器。

您需要创建一个表单元素来包含要发布的数据。

```
@Html.Hidden("Sku", @ViewBag.SkuCategory); 
```

# ruby-on-rails - 使用haml将项目嵌套在容器中

> ID：10554509
> 
> 赞同：0
> 
> 时间：2012-05-11T15:39:34.330
> 
> 标签：ruby-on-rails, ruby, haml

我想使用 if 语句来确定项目是否位于同一个 html 容器中或获取新容器。由于它处理嵌套的方式，我似乎无法使用 haml 在同一个容器中获取多个项目。

例子：

```
%div.line.boards.main_boards
  - @boards.each_with_index do |board, index|
    - @board = board
    -if index == 0
      %div.unit.size1of5
    -if index <= 1
      = render :partial => "board_projects"
    -if index == 2
      %div.unit.size4of5
        = render :partial => "board_projects" 
```

在此示例中，元素 %div.unit.size1of5 应该环绕索引 0 和 1 的两个项目。但是它会在 div 关闭后放置它们。如果我缩进渲染部分的代码，使其嵌套在 div 内，它只会拉入索引 0 项。

这是如何在haml中完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:22:01.557

您可以像这样将参数传递到 div 的类中：

```
.unit{:class => "size#{index}"}
  = render :partial => "board_projects" 
```

然后让它成为 CSS 问题而不是 Ruby/HAML 问题。

# ruby-on-rails - 如何：每个 VHost 多个 Rails 应用程序 - 从乘客 RailsBaseURI 迁移？

> ID：10554511
> 
> 赞同：2
> 
> 时间：2012-05-11T15:39:42.947
> 
> 标签：ruby-on-rails, nginx, rack, unicorn

我正在从 apache/passenger 迁移到 nginx/unicorn。我已经成功加载了 nginix 并使用 unicorn 托管了多个站点，但每个域只有一个。

在Passenger中，可以通过子文件夹在一个域下托管多个rails应用程序，并继续在根目录下托管一个html文件。例如：

```
<VirtualHost 10.0.0.2>
    ServerName preview.site.com
    ServerAlias preview.site.com

    DocumentRoot /var/www/com.site.preview

    <Directory /var/www/com.site.preview>
            AllowOverride all
            Options -MultiViews
    </Directory>

    RailsBaseURI /app-one
    RailsBaseURI /app-two
    RailsBaseURI /app-three

</VirtualHost> 
```

所以要去

```
http://preview.site.com 
```

会给我一个目录。即将 ：

```
http://preview.site.com/app-one
http://preview.site.com/app-two
http://preview.site.com/app-three 
```

而是运行该子文件夹下的每个应用程序。有没有我仍然可以在 nginx/unicorn 中做到这一点？

关于[如何让独角兽在路径下运行 Rails 3.0 应用程序，有人提出了类似的问题？](https://stackoverflow.com/questions/10386305/how-to-make-unicorn-run-a-rails-3-0-app-under-a-path)，但只提供了部分答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-18T10:40:11.290

您需要做的是`locations`在您的 nginx 配置中定义。该`server`块定义了 nginx 应用程序在哪个端口上运行，以及它侦听的 URL。在该块内，添加以下内容：

```
location /app-one/ {
   proxy_set_header X-Real-IP  $remote_addr;
   proxy_set_header X-Forwarded-For $remote_addr;
   proxy_set_header Host $host;
   proxy_pass http://127.0.0.1:3000;
}

location /app-two/ {
   proxy_set_header X-Real-IP  $remote_addr;
   proxy_set_header X-Forwarded-For $remote_addr;
   proxy_set_header Host $host;
   proxy_pass http://127.0.0.1:4000;
}

location /app-three/ {
   proxy_set_header X-Real-IP  $remote_addr;
   proxy_set_header X-Forwarded-For $remote_addr;
   proxy_set_header Host $host;
   proxy_pass http://127.0.0.1:5000;
} 
```

这假设以下情况：

*   您的应用程序在与 nginx 相同的机器上运行
*   您的应用程序在上述三个端口上运行：3000、4000、5000

这种方法是一种反向代理，是 Nginx 最常见的用途之一。

# android - R.java 文件在 Eclipse 中丢失

> ID：10554515
> 
> 赞同：0
> 
> 时间：2012-05-11T15:39:46.583
> 
> 标签：android, eclipse

将图像和声音文件导入 Eclipse 资源中的 raw 和 layout 文件夹时，R.java 文件消失。如何修复错误并恢复丢失的 R.java 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:58:33.830

**如果没有错误（最大时间问题在**XML**文件中） ***，清理***您的项目（ **Project -> Clean...**）将带回**R.java文件。**如果问题仍然存在，请**重新启动 Eclipse**。**

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T15:45:19.993

R.java 在构建时自动生成。如果不存在，则您的一个布局中的 XML 可能存在问题，导致构建停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T12:17:25.307

这可能是几个问题，根据我的个人经验，我建议如下：

*   **尝试构建时检查所有文件中的错误**（我知道这是基本的，但无论如何我必须提及）
*   **检查布局中的错误**
*   **检查文件名中的错误**（如“@”或文件/资源​​名称的其他不兼容字符）。
*   **不要在任何地方*“导入 android.R.java”***
*   **在 Eclipse 上检查项目的 Android 属性，并查看属性和 Manifest 具有相同的版本目标。**
*   **在清单上，检查包名称是否正确**（如果您从另一个项目复制/粘贴代码，则可能会发生这种情况，您忘记在清单上更正此问题，它只会在项目上标记一般错误，但不具体在 Manifest.xml 上）

毕竟，执行项目->清理，然后构建。

*PS.：我建议的另一件事是取消选中自动构建选项。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:41:21.073

R.Java 是一个自动生成的文件。如果您没有创建任何错误，它应该在您运行项目时返回。******

# javascript - 将具有一个元素的数组拆分为具有多个元素的数组

> ID：10554531
> 
> 赞同：5
> 
> 时间：2012-05-11T15:40:21.847
> 
> 标签：javascript, arrays, join, split

我想获取包含一个项目的这个数组（*一个带有一堆逗号分隔项目的字符串*）

`["Bucknell Venture Plan Competition, Mitch Blumenfeld, DreamIt Ventures, Deep Fork Capital, John Ason, Mitchell Blumenfeld, Gianni Martire"]`

我想把它变成这个。一个数组，包含每个名称作为单独的数组项。

`["Bucknell Venture Plan Competition", "Mitch Blumenfeld", "DreamIt Ventures", "Deep Fork Capital", "John Ason", "Mitchell Blumenfeld", "Gianni Martire"]`

谢谢！

更新：

谢谢您的帮助。那行得通！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T15:41:31.120

简单如：

```
var myArr = ["Bucknell Venture Plan Competition, Mitch Blumenfeld, DreamIt Ventures, Deep Fork Capital, John Ason, Mitchell Blumenfeld, Gianni Martire"];
var myNewArr = myArr[0].split(","); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T15:42:50.940

我认为这应该有效：

```
var items = ["Bucknell Venture Plan Competition, Mitch Blumenfeld, DreamIt Ventures, Deep Fork Capital, John Ason, Mitchell Blumenfeld, Gianni Martire"];
var array = items[0].split(","); 
```

# css - 强制在 iframe 顶部固定导航栏？

> ID：10554540
> 
> 赞同：4
> 
> 时间：2012-05-11T15:40:48.843
> 
> 标签：css, iframe, youtube, embed, css-position

我将导航固定在页面顶部，但如果在其上滚动嵌入 iframe 的 youtube 视频，它会显示在导航顶部（以及任何覆盖或模态窗口 div）。

尝试在其上设置z-index，但无济于事。

我发现您可以在嵌入对象上设置 wmode="opaque" 以使其与旧式 Flash 嵌入一起使用，但我更喜欢使用 HTML 5 而不必在视频嵌入上要求特定设置

[http://jsfiddle.net/EB6gN/9/](http://jsfiddle.net/EB6gN/9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:30:19.270

正确答案是将**wmode=opaque**设置为 iframe **src**值的 YouTube 查询字符串。

iframe没有属性**不透明**。**允许的属性**的完整列表在这里： [http ://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

这个更新的 jsfiddle 仅包含**HTML5 API Embed YouTube Method**，省略了旧样式的嵌入类型和您不想要的 z-index。
[http://jsfiddle.net/EB6gN/16/](http://jsfiddle.net/EB6gN/16/)

如果您在视频上单击播放看到黑屏，那是因为当前的 YouTube HTML5 Flash Fallback 错误。一旦 iframe 尺寸变大，您将看到控件，但播放器已损坏。请参考此 SO 帖子以获取该信息：
[https ://stackoverflow.com/a/10560802/1195891](https://stackoverflow.com/a/10560802/1195891)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:28:06.853

[JSFiddle](http://jsfiddle.net/EB6gN/11/)

您需要将帧的 wmode 设置为不透明或透明。您还需要将该参数添加到 iframe 中的 youtube 视频中。

更多关于[wmode](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)。

编辑：将所有内容设置为不透明[效果很好，至少在 Chrome 中](http://jsfiddle.net/EB6gN/13/)。

# javascript - 专注于加载时 iframe 中的内容可编辑主体

> ID：10554541
> 
> 赞同：0
> 
> 时间：2012-05-11T15:40:54.037
> 
> 标签：javascript, iframe, contenteditable

这在 Firefox 和 IE 中运行良好，但我无法在 Chrome 中运行：

```
self.editorIframeDocument.body.focus() 
```

`editorIframeDocument`== `contentDocument`|| `contentWindow.document`取决于浏览器。

`.body.focus()`这样当编辑器加载时，我可以立即开始输入。完美，但是，在 Chrome 中它不起作用。我尝试连接到 iframe 和 iframe，`#document`但没有成功。

我看到了一些设置选择和删除选择的技巧，但它们都是`<div>` `contenteditable`带有特定 HTML 的示例，而不是`<iframe>`可以包含从无到大量文本的任何内容。

***没有 jQuery。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:27:13.277

问题是编辑器尚未加载，因此 Chrome 不会让我专注于它。检查就绪状态修复了问题：

```
if (self.settings.focusOnLoad) {
  // We need to wait until all three iframes are done loading by waiting until the parent
  // iframe's ready state == complete, then we can focus on the contenteditable
  self.iframe.addEventListener('readystatechange', function () {
    if (self.iframe.readyState == 'complete') {
      self.editorIframeDocument.body.focus();
    }
  });
} 
```

# java - （按钮）是什么意思？

> ID：10554544
> 
> 赞同：3
> 
> 时间：2012-05-11T15:41:17.900
> 
> 标签：java, android

我是 Java 的初学者，遇到过这行代码：

```
Button orderButton = (Button)findViewById(R.id.order); 
```

`(Button)`当它在括号内时是什么意思？

像这样放在里面是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T15:42:45.113

这是一个类型转换。您正在将结果转换为 typeof(Button)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T15:45:12.803

强制转换的目的是让执行环境和 IDE 知道 findViewById(R.id.order); 返回的对象的类型。

findViewById(R.id.order) 不返回特定类型，而是返回通用对象。由于 Button 包含与对象引用的项目相关的方法，因此您需要告诉它它的类型，以便新变量 orderButton 可以访问正确的方法。

这是一个简单的示例

[http://www.java-samples.com/showtutorial.php?tutorialid=1170](http://www.java-samples.com/showtutorial.php?tutorialid=1170)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T15:43:39.620

这是一个[类型转换](http://en.wikipedia.org/wiki/Type_conversion)。`findViewById`返回一个对象，`View`但你需要一个`Button`对象。将`(Button)`视图转换为按钮

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T15:44:21.323

这称为**类型转换**。由返回的对象`findViewById(R.id.order);`可能是`Button`扩展自的东西。编写代码的人认为该函数调用返回的对象实际上是 的实例`Button`，因此他将函数的返回值类型转换为 的实例`Button`。

# iphone - 在 drawRect 中绘制对象与添加子视图并移动它们的框架

> ID：10554545
> 
> 赞同：3
> 
> 时间：2012-05-11T15:41:17.900
> 
> 标签：iphone, objective-c, ios

（第一次在这里问问题，所以请原谅我的礼仪错误）

**基本情况**：我有多个可以在屏幕上移动的图像。

**简单的解决方案#1**：
主循环将遍历对象数组，告诉每个对象移动自己，然后告诉视图刷新自己`[self.view setNeedsDisplay]`。然后视图将获取数组并跨过它并在屏幕上的点绘制对象。

[非常简单的示例项目，将 200 个箭头放在一个 NSArray 中并在此处](http://mesazero.com/d/testProjectDraw.zip)移动它们。

**简单的解决方案#2**：
然后我开始尝试让对象拥有自己的视图作为属性。

当对象被添加到主 NSArray 时，视图被添加到主绘图视图中。`[self.view addSubView:newThing.view]`.

主循环将跨过对象并告诉它们移动。在对象类中，移动将导致视图的 frame.origin 移动，这将导致它们在主视图上移动。

这还有一个优点，即对象可以在需要时将子视图添加到其图像中，例如粒子效果或相关子视图。

缺点是它似乎将更多类似视图的代码放入模型中并隐藏了一些视图工作。

简单的示例项目[在这里](http://mesazero.com/d/TestProjectView.zip)。
*注意：这两个示例项目都绘制了我期望在我的真实模拟器中需要的更多东西。*

**我的问题？”**
解决方案 #2 导致代码看起来更清晰，并且做一些简短的分析表明在我处理数千个对象之前似乎没有太大的性能或内存差异，然后绘图版本节省了大量的内存开销。但即使是 400 个对象，也没有那么多额外的内存来保存所有这些视图。

是否有某些原因我不应该使用我缺少的解决方案＃2？通过让模型更聪明地了解最终将要绘制的内容，是否可以“打破”VMC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:31:11.863

您可以通过在对象和视图之间添加另一层来绕过 MVC 违规，对象知道模型对象和视图，并告诉视图在发生变化时移动。

解决方案 #2 需要更多的内存和计算，尤其是在您有很多对象的情况下。它还使您对绘图的控制较少，如果您想要具有特殊效果，这可能是一个问题。出于这个原因，至少对于游戏来说，它通常不被使用。但最后，如果它确实让您的生活更轻松并且您对性能感到满意，那么没有理由不选择它。

不过，看看 Core Animation 可能是个好主意。它允许您实现类似的模式（然后每个对象都有自己的层而不是视图），但对于特殊效果更快、更灵活。

# iphone - youtube视频结束或按下完成按钮时的iOS捕获事件

> ID：10554553
> 
> 赞同：1
> 
> 时间：2012-05-11T15:41:46.137
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我在 uiwebview 上显示 youtube 视频。当用户选择它时，全屏视频正常启动。视频结束或按下“完成”按钮时会触发哪个事件？我阅读了一些关于它的帖子，但建议的方法现在已被弃用。View 事件也很有用，例如，如果 viewDidAppear 在视频结束时被触发，但不是。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:01:57.207

`MPMoviePlayerController`如果可以的话，实现你的视频在里面播放，然后在下面尝试。或者你可以直接在下面尝试（但我没有测试过`MPMoviePlayerController`） **MPMoviePlayerPlaybackDidFinishNotification**通知`MPMoviePlayerController`为

链接： http: [//www.devx.com/wireless/Article/44642/1954](http://www.devx.com/wireless/Article/44642/1954)

# javascript - 如何将基于标准的样式应用于 Kendo UI 网格？

> ID：10554555
> 
> 赞同：0
> 
> 时间：2012-05-11T15:41:50.733
> 
> 标签：javascript, css, kendo-ui

我正在使用 Kendo UI；特别是网格组件。有没有人知道一种技术可以让我根据行中的数据设置行的样式？

例如，如果其中一列的值为负数，我会用红色文本设置该行的样式。

我对如何自己做一些想法，但我希望有人已经解决了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:46:17.003

只需用 JavaScript 读取值即可。然后根据值是负数、零还是正数，或者根本不是数字，您可以设置不同的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:25:20.270

以下代码是最终解决方案：

```
var ApplyTestStyles = function () {
    //Get a reference to our data grid
    var grid = $("#grid").data("kendoGrid");

    //Get grid data 
    var gridData = grid._data;

    //iterate the data items based on data length
    for (var i = 0; i < gridData.length; i++) {

        //grab the current grid data item
        var current = gridData[i];

        //the css selector used to find the given data items html table row
        var rowSelector = ">tr:nth-child(" + (i + 1) + ")";

        //Grab a reference to the corrosponding data row
        var row = grid.tbody.find(rowSelector);

        //apply criteria based styles
        //TODO: refactor this logic into criteria based style providersf 
        if (current.Nav <= 670) {
            row.addClass("Negative");
        }
        else if (current.Nav >= 670) {
            row.addClass("Positive");
        }

    }

}; 
```

我最终迭代了数据发布页面加载，然后应用了特定的样式。

# c# - 日期格式化程序和 ParseException - 从 Java 迁移到 C#

> ID：10554567
> 
> 赞同：0
> 
> 时间：2012-05-11T15:42:35.130
> 
> 标签：c#, java

这是我收到消息的 C# 类的更新版本：

> 检测到无法访问的代码：**DateTime.Now.Ticks；**

其他一切似乎都很好。我的错误在哪里？

```
using System;
using System.Globalization;

namespace domain
{
    public class Request : Unique
    {
        private DateTime dateBooked_Renamed;

        private DateTime dateSignedIn ;

        private DateTime dateSignedOut ;

        private bool arrived_Renamed = false;

        private bool paid_Renamed = false;

        private Hotel hotel_Renamed;

        private Employee employee_Renamed;

        private int numberOfNights;

        public Request(Hotel hotel, Employee employee, string dateBooked, string dateArrived, int numberOfNights)
            : base()
        {
            this.hotel_Renamed = hotel;
            this.employee_Renamed = employee;
            this.numberOfNights = numberOfNights;
            try
            {
                DateTime.ParseExact(dateBooked, "dd/MM/yyyy", CultureInfo.InvariantCulture);

                this.dateBooked_Renamed = DateTime.ParseExact(dateBooked, "dd/MM/yyyy", CultureInfo.InvariantCulture);
                this.dateSignedIn = DateTime.ParseExact(dateArrived, "dd/MM/yyyy", CultureInfo.InvariantCulture);
            }
            catch (FormatException e)
            {
                Console.WriteLine(e.ToString());
                Console.Write(e.StackTrace);
            }
        }

        public virtual bool checkout(double money, string date)
        {
            try
            {
                dateCheckedOut = DateTime.ParseExact(date, "dd/MM/yyyy", CultureInfo.InvariantCulture);

            }
            catch (FormatException e)
            {
                Console.WriteLine(e.ToString());
                Console.Write(e.StackTrace);
            }
            if (money >= price())
            {
                paid = true;
            }
            else
            {
                paid = false;
            }
            return paid_Renamed;
        }

        public virtual int days()
        {
            long tNow = dateSignedOut != null ? dateSignedOut.Ticks : DateTime.Now.Ticks; 
            long tThen = arrived ? dateArrived.Ticks : tNow;
            long diff = tNow - tThen;

            long secondInMillis = 1000;
            long minuteInMillis = secondInMillis * 60;
            long hourInMillis = minuteInMillis * 60;
            long dayInMillis = hourInMillis * 24;
            long yearInMillis = dayInMillis * 365;

            diff = diff % yearInMillis;
            long elapsedDays = diff / dayInMillis;

            return (int)elapsedDays;
        }

        public virtual Hotel hotel
        {
            get
            {
                return hotel_Renamed;
            }
            set
            {
                this.hotel_Renamed = value;
            }
        }

        public virtual DateTime dateArrived
        {
            get
            {
                return dateSignedIn;
            }
            set
            {
                this.dateSignedIn = value;
            }
        }

        public virtual DateTime dateBooked
        {
            get
            {
                return dateBooked_Renamed;
            }
            set
            {
                this.dateBooked_Renamed = value;
            }
        }

        public virtual DateTime dateCheckedOut
        {
            get
            {
                return dateSignedOut;
            }
            set
            {
                this.dateSignedOut = value;
            }
        }

        public virtual Employee employee
        {
            get
            {
                return employee_Renamed;
            }
            set
            {
                this.employee_Renamed = value;
            }
        }

        public virtual bool arrived
        {
            get
            {
                return arrived_Renamed;
            }
            set
            {
                this.arrived_Renamed = value;
            }
        }

        public virtual bool paid
        {
            get
            {
                return paid_Renamed;
            }
            set
            {
                this.paid_Renamed = value;
            }
        }

        public virtual double price()
        {
            // The total cost of the stay...

            double price = days() * employee_Renamed.type.price;
            if (hotel_Renamed.premium)
            {
                return price - (0.2 * price);
            }
            else
            {
                return price;
            }
        }

        public virtual bool hasArrivalDate(string date)
        {
            try
            {
                DateTime d = DateTime.ParseExact(date, "dd/MM/yyyy", CultureInfo.InvariantCulture);
                Console.WriteLine("Comparing " + d + " with " + dateSignedIn + " = " + dateSignedIn.ToString("dd/MM/yyyy").Equals(d.ToString("dd/MM/yyyy")));
                return dateSignedIn.ToString().Equals(d.ToString());
            }
            catch (FormatException e)
            {
                Console.WriteLine(e.ToString());
                Console.Write(e.StackTrace);
                return false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:47:09.357

如果你的日期字符串是标准格式，你可以使用`DateTime.Parse(date)`
如果不是，你可以使用`DateTime.ParseExact(date,"your custom format",CultureInfo.InvariantCulture)`

作为您的代码示例

```
public virtual bool hasArrivalDate(string date)
        {
            try
            {
                DateTime d = DateTime.ParseExact(date,"dd/MM/yyyy",CultureInfo.InvariantCulture);
                Console.WriteLine("Comparing " + d.ToString("dd/MM/yyyy") + " with " + dateSignedIn.ToString("dd/MM/yyyy") + " = " + dateSignedIn.ToString("dd/MM/yyyy").Equals(d.ToString("dd/MM/yyyy")));
                return dateSignedIn.ToString().Equals(d.ToString());
            }
            catch (FormatException e)
            {
                Console.WriteLine(e.ToString());
                Console.Write(e.StackTrace);
                return false;
            }
        } 
```

所以，不需要 DateFormat 的实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:16:26.083

在您的代码中， dateSignedOut 变量是 a `DateTime`，它永远不能为空。

因此，在这一行：

```
long tNow = dateSignedOut != null ? dateSignedOut.Ticks : DateTime.Now.Ticks; 
```

dateSignedOut 永远不会为空，因此永远不会到达您声明的“else”部分。

如果您希望 dateSignedOut 可以为空，请将其设为`Nullable<DateTime>`（或`DateTime?`）。

顺便说一句，请格式化您的问题，以便它们更具可读性。这个真的有被关闭的危险。更好的问题会带来更好的答案。

**根据评论更新**

您可能应该尝试更多地了解通常如何用 C# 编写属性，但这超出了这个问题的范围。要使用您已有的代码：

```
private DateTime? dateSignedOut;  // Notice the ? to make it Nullable
long tNow = dateSignedOut.HasValue ? dateSignedOut.Ticks : DateTime.Now.Ticks; 
```

查看一些[MSDN 文档](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)或 Google Nullable 类型。

# android - 来自 JSON MYSQL 的数据

> ID：10554569
> 
> 赞同：0
> 
> 时间：2012-05-11T15:42:39.740
> 
> 标签：android, database, arrays, json, http

这是我的课程，我尝试使用 JSON 从 MYSQL 获取一些数据到 JSONArray 中。

它在屏幕上出现了两个 Toast：NullPointerEception 和另一个 Exception，它在 php 网页中逐字写入我拥有的所有内容。

```
public class ConnectMySql extends Activity{
InputStream is;
//List<String> items;
JSONArray jArray;
//String[] items;
StringBuilder sb;
//ListView list;
TextView textv;
    String result;
//List<NameValuePair> items;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
//list = (ListView) findViewById(R.id.listview);

textv = (TextView) findViewById(R.id.tvHI);
setContentView(R.layout.main);

try{
    HttpClient httpsClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("http://79.114.48.119/data.php");

    List<NameValuePair> nameValue = new ArrayList<NameValuePair>();
    httpPost.setEntity(new UrlEncodedFormEntity(nameValue));
    HttpResponse httpResponse = httpsClient.execute(httpPost);
    HttpEntity httpEntity = httpResponse.getEntity();
    is = httpEntity.getContent();
}catch(Exception e){
    Log.e("log_tag", "Error in HTTP connection" + e.toString());
    Toast.makeText(this, "http connection error: " + e.toString(), Toast.LENGTH_LONG).show();
}
    try{
        BufferedReader BufR = new BufferedReader (new InputStreamReader(is, "iso-8859-1"),8);
        sb = new StringBuilder();
        sb.append(BufR.readLine() + "\n");
        String line = "0";

        while((line = BufR.readLine()) != null){
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    }catch(Exception e){
        Log.e("log_tag", "Error in convert String" + e.toString());
    }
    int lat;
    int lon;
    try{
        jArray = new JSONArray(result);
        Toast.makeText(this, "no data found" + result, Toast.LENGTH_LONG).show();
        JSONObject json_data = null;
        for(int i = 0; i< jArray.length(); i++){
            json_data = jArray.getJSONObject(i);
            lat  = json_data.getInt("latitude");
            lon = json_data.getInt("longitude");

            textv.setText(lat + lon);

            //Here i use another function whitch uses lat & lon
        }
        //setupList();
    }catch(JSONException e){
        Toast.makeText(this, "no data found", Toast.LENGTH_LONG).show();
    }catch(Exception e){
        Toast.makeText(this, "error" + e.toString(), Toast.LENGTH_LONG).show();
    }
}
}
/*private void setupList() {

// TODO Auto-generated method stub
list.setAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, items));
}

}*/ 
```

你可以帮帮我吗 ？非常感谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:19:39.140

您的代码中有几个错误：

1) 必须在 findViewById() 或任何其他使用 xml 布局引用的方法之前调用 setContentView()。

2）您正在尝试在 UI 线程上执行网络操作（http 请求必须从另一个线程执行 - 否则 - 它会引发异常）

如果您忘记或不知道您需要，请不要忘记添加到清单 Internet 权限

# wcf - SOA 中是否需要每个用例的 DTO？

> ID：10554578
> 
> 赞同：0
> 
> 时间：2012-05-11T15:42:56.113
> 
> 标签：wcf, c#-4.0, rest, soap, soa

我收到的要求只要求写入和更新某些属性，但要读取所有属性，所以我想知道处理这个问题的最佳方法是什么？我知道这听起来很疯狂，但要求是写入/更新将通过 SOAP 完成，而读取将通过 REST 完成。想法是 SOAP API 将用于初始数据加载，Web 界面的最终用户将进行更详细的修改，然后另一组最终用户将针对 REST API 进行编程以在网页上显示数据。我会很感激一些关于最佳/良好实践的反馈和/或评论。这就是我认为需要做的事情（注意，缩写示例）：

```
namespace DTOs.Create
{
    public class Project
    {
        public string Name { get ; set; }
    }
}

namespace DTOs.Read
{
    public class Project
    {
        public string Name { get ; set; }
        public string Description { get ; set; }
        public DateTime DueDate { get ; set; }
        public int Priority { get ; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:14:34.147

仔细考虑实施的生命周期。如果其余接口和soap 接口可能会随着时间的推移而出现分歧，那么一定要选择两个不同的DTO 类。

具体到您的情况，我会保留两个 DTO 以放松这两个接口。我在项目中听到太多次诸如“我们不能只改变界面的这个精简部分吗？它只是一个字符串！” 然后要花费太多精力来实现，因为接口与应用程序的其他部分紧密耦合，这些部分也必须重写（重新测试）等。

但这在很大程度上取决于应用程序的范围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:49:56.853

我倾向于只有一个 DTO，DTO 的目的是携带数据，它不应该附加行为语义，服务操作提供了这一点。

您应该能够在许多不同的上下文中（在不同的操作中）使用项目信息 (DTO)。

什么是项目的定义在您的域中应该保持一致，如果定义项目的定义在 SOAP 和 REST 部分之间是不同的，那么您还有其他问题。

随着时间的推移，这两个接口可能会出现分歧，但分歧在于数据的使用方式而不是数据的内容。

如果一个界面真的需要这样不同的信息，那么创建一个新的领域概念，因为它不再是原来的项目概念。

# flash - 闪存缓存问题

> ID：10554581
> 
> 赞同：2
> 
> 时间：2012-05-11T15:43:05.333
> 
> 标签：flash, caching

我有一个包含 Flash 对象的页面。闪存文件错误我对指定的图像之一进行了更改。我有一个大问题，已经访问该站点的用户，似乎缓存了这个 Flash 对象。我已经尝试重命名它，已放入`<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">`，但无论我做什么，它似乎仍然将缓存的 flash 对象识别为要显示的对象。在新的浏览器中尝试它，它工作正常。现在我知道我可以清除缓存以使其正常工作，但我不能指望告诉每个用户这一点。关于我还能尝试什么的任何想法？

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540001"
        codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0"
        width="1127" height="333" id="lottery6" align="middle">
    <param name="allowScriptAccess" value="sameDomain" />
    <param name="allowFullScreen" value="false" />
    <param name="wmode"  value="transparent" />
    <param name="movie"
           value="flashtemp/lottery1.swf?logo=<%=WinnerSponsorImage%>&winningNumber=<%=Winner%>&link=<%=WinnerSponsorLink%>&sponsorName=<%=WinnerSponsorName%>&winnerName=<%=WinnerName%>&hourToPlay=<%=PrizeDrawHr%>&minToPlay=<%=PrizeDrawMin%>" />
    <param name="quality" value="high" />
    <param name="bgcolor" value="#5d8804" />
    <embed wmode="transparent" quality="high" bgcolor="#5d8804"
           width="1127" height="333"
           name="lottery6" align="middle"
           allowScriptAccess="sameDomain" allowFullScreen="false"
           type="application/x-shockwave-flash"
           pluginspage="http://www.adobe.com/go/getflashplayer"
          src="flashtemp/lottery1.swf?logo=<%=WinnerSponsorImage%>&winningNumber=<%=Winner%>&link=<%=WinnerSponsorLink%>&sponsorName=<%=WinnerSponsorName%>&winnerName=<%=WinnerName%>&hourToPlay=<%=PrizeDrawHr%>&minToPlay=<%=PrizeDrawMin%>"  />
</object> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:47:10.943

听起来浏览器正在缓存索引页面。`<head>`尝试在您的 html 部分添加以下元标记。

```
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="expires" content="-1"> 
```

如果您正在运行 Apache，则可以在其中设置与缓存相关的响应标头`.htaccess`（假设`.htaccess`在 Apache 的配置中启用了覆盖）。示例使用`.htaccess`...

```
<FilesMatch "^index\.html$">
Header set Cache-Control: "no-cache, must-revalidate"
</FilesMatch> 
```

更多关于这个 - [http://www.askapache.com/htaccess/apache-speed-cache-control.html](http://www.askapache.com/htaccess/apache-speed-cache-control.html)

编辑：如果您正在运行 IIS，则可以按照[此处](https://stackoverflow.com/questions/865252/add-expires-or-cache-control-header-to-static-content-in-iis)的说明设置缓存控制标头-[将 Expires 或缓存控制标头添加到 IIS 中的静态内容](https://stackoverflow.com/questions/865252/add-expires-or-cache-control-header-to-static-content-in-iis)

# android - 9 补丁平铺样式图像

> ID：10554583
> 
> 赞同：2
> 
> 时间：2012-05-11T15:43:22.790
> 
> 标签：android, nine-patch

我无法处理我的 9patch 工具来创建具有平铺样式背景的按钮（形状）

我有什么图像：

![我有的](../Images/f26845c42ad89f1f07a6ef66f9ec05c7.png)

我想使用 9patch 格式...

![我想要的是](../Images/a9bce9608b07e51027f4b2f9e82b4c7d.png)

注意此按钮内的图块（网格）。当我制作 9patch 时，网格拉伸错误，我无法得到第二张图片中的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:13:56.463

不幸的是，这对于 9patches 是不可能的。您只能将区域（“补丁”）标记为拉伸，不能重复。

# asp.net - 更改会员等级时区

> ID：10554586
> 
> 赞同：0
> 
> 时间：2012-05-11T15:43:27.930
> 
> 标签：asp.net, asp.net-membership

我最近注意到，当我使用`Membership Class`所有时间字段创建新用户时，例如`LastActivityDate`保存为`UTC`（比我的时区早 4 小时）。我认为使用我的时区可能会有所改变，`web.config`但没有，[这就是所有可用的。](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider_properties)

有没有办法改变会员等级使用的时区，或者这是不能改变的事情之一，因为这是使用的标准做法`UTC`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:49:11.663

LastActivityDate 保存在 UTC 上，但是当您读取它时，它会转换为服务器的 LocalTime。这是您调用查看时的代码。

```
public virtual DateTime LastActivityDate
{
    get
    {
        return this._LastActivityDate.ToLocalTime();
    }
} 
```

# sql - sql soundex 查询是否适用于一般搜索？

> ID：10554590
> 
> 赞同：0
> 
> 时间：2012-05-11T15:43:37.073
> 
> 标签：sql, sql-like, soundex

我一直在使用`LIKE`查询来搜索知识库站点中的搜索字符串。因此，从逻辑上讲，“电话”一词可能会出现所有包含“电话”一词的页面。

但是当进入不太典型的搜索时，比如“电话”、“电话”、“电话”，我开始进入 LIKE 查询也停止工作的领域。

有人`SOUNDEX`向我推荐，这样我不仅可以捕捉到精确匹配，还可以捕捉到相似匹配。

这是正确使用`SOUNDEX`吗？有更合适的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:45:28.437

如果它是仅包含单词 phonecall 或类似单词的列，那么是的，这是 SOUNDEX 的一个很好的用途，因为您正在寻找听起来相同但拼写不同的字符串。如果您正在查看大量文本，则不太合适，因为您必须在生成 SOUNDEX 之前将文本分解为单词，因此这在诸如“电话”之类的两个单词版本上会失败。

对于改进的算法，我建议您查看[Double Metaphone](http://en.wikipedia.org/wiki/Metaphone#Double_Metaphone_Implementations)。

# android - 如何制作edittext的android listview？

> ID：10554593
> 
> 赞同：0
> 
> 时间：2012-05-11T15:43:43.483
> 
> 标签：android, android-listview, android-edittext

我想让列表视图内容编辑文本和按钮

请提供任何示例代码或项目。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:49:07.133

使用 Edittext 查看 Listview 的本教程：

[ListView 内的 Android 可聚焦 EditText](http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/)

您还可以将 Button 的 item.xml 编辑为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent">
<EditText android:id="@+id/ItemCaption"
android:layout_height="wrap_content" 
android:layout_width="fill_parent"
android:layout_marginLeft="2dip" 
android:singleLine="true">
</EditText>
<Button  android:id="@+id/add"
android:layout_width="wrap_content" 
android:layout_height="wrap_content"  
android:layout_alignParentRight="true" 
android:layout_centerVertical="true"  
android:layout_marginRight="10dip" />
</LinearLayout> 
```

# mysql - @variable := variable2 在 MySQL 查询中是什么意思？

> ID：10554595
> 
> 赞同：1
> 
> 时间：2012-05-11T15:43:50.987
> 
> 标签：mysql

我在代码中的 a 中有以下查询`select if`，但我不记得包含的行`@lastComment := time`实际上是做什么的？

```
SELECT 
    IF(
        (SELECT @lastComment := `time` 
         FROM usermessages 
         WHERE userId = $userId 
         ORDER BY id DESC 
         LIMIT 1)
    IS NOT NULL,
    DATE_SUB(NOW(), INTERVAL 30 SECOND) >= @lastComment, 1
    ) 
```

看起来@lastComment 只是一个临时变量保持时间，但我不明白为什么需要它，只是将它传递给另一个查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:44:30.900

显然您不想执行两次查询，这是正确的，但您可以轻松省略用户定义的变量，从而使其更清晰：

```
SELECT 
  IFNULL(
     (
       SELECT DATE_SUB(NOW(), INTERVAL 30 SECOND) >= `time` 
       FROM usermessages 
       WHERE userId = $userId 
       ORDER BY id DESC 
       LIMIT 1
     )
     , 1
) 
```

它转换为：*检查给定的表达式是否为 NULL，如果是则返回 1，否则返回表达式值。*

# html - 画廊图像未在 Internet Explorer 9 中显示

> ID：10554596
> 
> 赞同：0
> 
> 时间：2012-05-11T15:44:08.080
> 
> 标签：html, css, internet-explorer, internet-explorer-9, slimbox

我有一个我不知道如何解决的问题。我的网站上有一个使用 slimbox 的画廊。它在 Firefox 和其他浏览器（在 Windows 和 Mac 上）中运行良好，但在 Internet Explorer 9 中查看时，图像不可见，并且不再是链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:00:49.840

`display:none;`你`.mosaic-backdrop`班上有一个。它在 Chrome/FF 中被覆盖，但在 IE 中没有。

去掉它。

# windows-vista - 以编程方式设置 VPN 服务器

> ID：10554597
> 
> 赞同：1
> 
> 时间：2012-05-11T15:44:17.367
> 
> 标签：windows-vista, vpn, windows-server-2008-r2

尝试在代码中执行此操作：[http ://www.askdrtech.com/solutions/post/How-to-create-VPN-Server-in-Windows-Vista.aspx](http://www.askdrtech.com/solutions/post/How-to-create-VPN-Server-in-Windows-Vista.aspx)

我已经阅读过有关 DotRas 的信息，但我找不到任何有关它设置服务器的信息，只能连接到已经存在的服务器。

我的应用程序在不同的计算机上使用多个客户端（当他们使用空中卡时需要 VPN）连接到安装在总办公室的中央数据库。

我需要让数据库安装程序自动告诉该服务器（最好是 Windows Server 2008 R2，但他们可能使用 Vista）来监听 VPN 连接并分配登录名。

# python - 如何在 Python 中使用 NLTK 有效地查找出现的字母列表？

> ID：10554602
> 
> 赞同：1
> 
> 时间：2012-05-11T15:44:40.707
> 
> 标签：python, nltk

我可以使用 NLTK python2.6 阅读文本语料库：

```
from nltk.corpus import gutenberg
for fileid in gutenberg.fileids():
    num_chars = len(gutenberg.raw(fileid)) 
    num_words = len(gutenberg.words(fileid))
    num_sents = len(gutenberg.sents(fileid))
    num_vocab = len(set([w.lower() for w in gutenberg.words(fileid)]))
    print int(num_chars/num_words), int(num_words/num_sents), int(num_words/num_vocab), fileid 
```

现在我想通过单词和句子找到字母的平均出现次数，比如 num_letters(whole_text, ['a', 'bb', 'ccc'])。预期输出为：

a = n11/n12，bb = n21/n22，ccc = n31/n32

其中 n11 = 单词中的出现次数，n12 = 句子中的出现次数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:20:57.103

您可以通过使用正则表达式在大量文本中查找要匹配的每个元素的所有匹配项来做到这一点：

```
import re
matches = ['a', 'bb', 'ccc', 'and']

#add this line into your for loop:
    num_letter_dict = dict([(match, len([seq.start() for seq in 
            re.finditer(match, gutenberg.raw(fileid))])) for match in matches]) 
```

这将创建一个包含所有匹配项及其频率的字典。所以对于第一个文本`austen-emma.txt`，我们得到`num_letter_dict`：

```
{'a': 53669, 'and': 5257, 'ccc': 0, 'bb': 52} 
```

从这里到单词和句子中的平均出现次数是直截了当的，只需分别除以`num_words`和`num_sents`。

要查找包含这些元素的单词数（不计算单词内的重复），请使用：

```
num_letter_in_words = dict([(match, len([word for word in gutenberg.words(fileid)
                                      if match in word])) for match in matches])
#from the same text gives:
{'a': 50043, 'and': 5257, 'ccc': 0, 'bb': 52} 
```

举个例子：

```
text = 'apples pairs bannanas'
matches = ['a', 'n', 'p']
#gives:
{'a': 3, 'p': 2, 'n': 1} 
```

# java - PhoneGap 或 Android 会更适合这个应用创意吗？

> ID：10554603
> 
> 赞同：0
> 
> 时间：2012-05-11T15:44:43.593
> 
> 标签：java, android, html, cordova

我正计划开发一个使用相机的应用程序，将图片上传到网站，显示应用程序中拍摄的所有照片，并为用户提供一点编辑能力。使用 PhoneGap 或通过 Eclipse 的原生 Android 开发设置会更好地开发吗？我知道大量的 Java 和 HTML，所以这不是大问题，但我想知道我应该使用哪个开发工具包来更快地启动应用程序，同时保持一个体面的界面。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:49:11.430

最后，这一切都归结为两件事：

```
 1.- which language do you know better? consider that android IS NOT java, but knowing java will help a lot

      2.- Do you want this app to work only on the Android OS or you want it to work in every platform? 
```

如果您担心的是接口，请不要担心。您可以在两者上创建非常好的界面。

# java - 使用线程分配内存

> ID：10554604
> 
> 赞同：3
> 
> 时间：2012-05-11T15:44:44.800
> 
> 标签：java, multithreading, memory-management

我想知道如果您在方法中声明一个本地线程会发生什么？通常，一旦函数返回，所有局部变量都会消失，因为它们都分配在堆栈上。但是，似乎本地线程将是一个不同的故事。是对的吗？

```
public int A() {
    Thread t = new Thread() {
        doSomething();
    }
    t.start();
    return -1;
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T15:51:08.417

线程是它自己的 GC 根。因此，无论何时创建一个线程，不管它的创建上下文如何，它都不会准备好进行 GC，直到它的 run 方法完成。即使本地方法完成并且线程仍然存在，也是如此。

例子：

```
public void doSomeAsync(){
   Thread th = new Thread(new Runnable(){
      public void run(){
          Thread.sleep(500);
      }
   });
   th.start();
   //do something else quickly
} 
```

在`//do somethign else quickly`任何未转义该方法的定义之后，然后将其标记为 GC。线程 th 不会被标记为 GC，而是正确地放置在具有自己的线程堆栈的堆上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T16:24:56.140

约翰的回答很好，但我想我会添加更多细节。这是一个代码示例，我将使用它来显示特定的变量用法。

```
 public void startThread() {
      long var1 = 10;
      byte[] var2 = new byte[1024];
      final byte[] var3 = new byte[1024];
      final byte[] var4 = new byte[1024];
      Thread thread = new Thread(new Runnable() {
          private long var5 = 10;
          private byte[] var6 = new byte[1024];
          public void run() {
              int var7 = 100;
              byte[] var8 = new byte[1024];
              System.out.println("Size of var4 is " + var4.length);
              baz();
              ...
          }
          private void baz() {
              long var9 = 2;
              byte[] var10 = new byte[1024];
              ...
          }
      });
      thread.start();
 } 
```

所以我们在这里围绕一个线程分配了许多变量。我们还拥有`Thread`对象本身以及`Runnable`线程正在运行的目标。

*   线程——虽然它看起来是本地的`startThread()`，但关联`Thread`的也由 JVM 管理。它只是在`run()`方法完成后才被 GC 处理，并且`Thread`被 JVM 收割。在`Thread`GC'd 之后，所有使用的字段`Thread`都可以 GC'd。
*   Runnable——这个匿名类是线程正在运行的。它可以在`Thread`完成后进行 GC 并进行 GC。
*   var1 - 这是本地的`startThread()`并在堆栈上分配。`startThread()`当方法完成并重用堆栈时，它将被覆盖。
*   var2 - 这是本地的`startThread()`并在堆上分配。它不能被线程使用，因为它不是`final`. 它可以在`startThread()`完成后进行 GC。
*   var3 - 这是本地的`startThread()`并在堆上分配。这是`final`因为它*可以*被线程使用，但事实并非如此。它可以在`startThread()`完成后进行 GC。
*   var4 - 这是本地的`startThread()`并在堆上分配。这是`final`并且它被线程使用。它只能在`startThread()`方法完成*并且*和`Runnable`都被 GC 后才能被`Thread`GC。
*   var5 - 这是内部的一个本地字段，`Runnable`并作为`Runnable`匿名类的一部分分配在堆上。它可以在`Runnable`完成后被 GC 处理，并且`Runnable`和`Thread`被 GC 处理。
*   var6 - 这是在堆内的一个本地字段`Runnable`并在堆上分配。它可以在`Runnable`完成后被 GC 处理，并且`Runnable`和`Thread`被 GC 处理。
*   var7 -- 这是`run()`方法内部的一个本地字段，分配在新线程的堆栈上。`run()`当方法完成并重用堆栈时，它将被覆盖。
*   var8 -- 这是`run()`方法内部的一个本地字段，并在堆上分配。`run()`方法完成后可以对它进行 GC 。
*   var9 -- 这是`baz()`方法内部的一个本地字段，分配在新线程的堆栈上。`baz()`当方法完成并重用堆栈时，它将被覆盖。
*   var10 -- 这是`baz()`方法内部的一个本地字段，并在堆上分配。`baz()`方法完成后可以对它进行 GC 。

其他注意事项：

*   如果新线程从未启动，那么它可以在`startThread()`完成后进行 GC。和所有与之相关的`Runnable`变量也可以被 GC 处理。
*   如果您在线程中`final long varX`声明并使用了一个原语`startThread()`，那么它必须分配在堆上而*不是*堆栈上。完成`startThread()`后它仍将被使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:46:19.133

如果一个线程是从本地上下文启动的，那么线程将继续执行，直到它的 Runnable`run`方法完成执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:49:08.370

如果变量是原始变量，那么它将在堆栈上，并且在方法返回时将消失——但是您的线程`Runnable`实例（或任何包含线程内容的对象）将具有该原始值的副本。

如果变量是引用类型，则该对象在堆上分配并一直存在，直到不再有对它的引用，此时它有资格进行垃圾回收。对该对象的*引用*在堆栈上，并且在方法返回时将消失，但与原语一样，线程`Runnable`将拥有相同引用的副本（从而使该对象保持活动状态）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-11T15:47:48.123

如果你`Thread`在一个方法中产生一个局部变量，只有声明为的局部方法变量`final`会一直存在直到`Thread`完成。当`Thread`完成它的`run()`方法时，线程和它从创建它的方法中可用的任何最终变量将像其他所有东西一样被垃圾收集。

**澄清**

只有`final`在原始方法和衍生线程的`run()`方法中使用的变量才会被垃圾收集，直到方法和`run()`方法都完成。如果线程不访问变量，那么线程的存在不会阻止变量在原始方法完成后被垃圾回收。

**参考**

[http://java.sun.com/docs/books/performance/1st_edition/html/JPAppGC.fm.html](http://java.sun.com/docs/books/performance/1st_edition/html/JPAppGC.fm.html)

# java - 在java中提取XML之前的基本身份验证

> ID：10554608
> 
> 赞同：0
> 
> 时间：2012-05-11T15:44:58.963
> 
> 标签：java, api, authentication

我刚刚开始处理在 https 上运行并需要身份验证才能从中提取的 api。我在浏览器中提取 xml 没有任何问题，但是在我尝试提取数据之前，有什么方法可以在 java 中进行身份验证？

目前，我只是在 http xml 文件上使用了简单的 sax pulls，并且从未需要进行身份验证。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:53:42.407

您可以在使用连接解析之前获取 XML 文件，然后

[http://docs.oracle.com/javase/6/docs/api/java/net/Authenticator.html](http://docs.oracle.com/javase/6/docs/api/java/net/Authenticator.html)

来自oracle的一些示例等：

[http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-auth.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-auth.html)

# c# - Itextsharp - 检查添加元素是否会创建新页面

> ID：10554611
> 
> 赞同：3
> 
> 时间：2012-05-11T15:45:11.150
> 
> 标签：c#, html, pdf, itextsharp

我正在使用 ITextSharp 将 HTML 文档转换为 PDF。我使用 HTMLWorker.ParseToList 并依次遍历每个项目。这很好用，但是第一页需要与后续页面具有不同的边距大小。我可以通过调用 MyDocument.NewPage() 和调用 MyDocument.SetMargins() 来做到这一点。

尝试检测页面转换时会出现我的问题。

我可以使用循环来跟踪页面转换，然后调用 NewPage() 并重置边距，但是，只有在我实际添加了一个换行到新页面上的段落时才会发生这种情况，从而使整个页面实际上是白色的-空间。

如果我添加某个段落对象，我需要一种预先检测页面是否会更改的方法。我已经尝试使用 ColumnText.Go(true) 来模拟它（如果结果是 ColumnText.NO_MORE_COLUMN，则将其设为分页符），不幸的是，这似乎充其量是易碎的，并且倾向于检测分页符完全错误的地方。

这是我当前的代码：

```
 ColumnText simulation = new ColumnText(Writer.DirectContent);
            simulation.SetSimpleColumn(Writer.PageSize);   
            bool FirstPage = true;
            foreach (var item in ItemList)
            {
                var para = new Paragraph("", Normal);
                para.AddAll(item.Chunks);                    
                para.SpacingAfter = 10;
                foreach (Chunk c in item.Chunks)
                {
                    simulation.AddText(c);
                }
                if(FirstPage) {
                    int simresult = simulation.Go(true);
                    if(simresult == (int)ColumnText.NO_MORE_COLUMN)
                    {
                        textDocument.SetMargins(100,100,100,100);
                        textDocument.NewPage();    
                        FirstPage = false;                 
                    }
                }

                textDocument.Add(para);
            } 
```

这导致它直到第 2 页结束才检测到分页符。这不好。

我发现让它工作的唯一方法是将进入simulation.SetSimpleColumn的高度减半。

它有效，但我不知道为什么，老实说，这不好。如果有人能给我任何见解，那就太好了。

* * *

感谢亚历克西斯，我已经解决了。ITextSharp 非常彻底地遵循 Java 事件模型，这很烦人，因为我直接在 Writer 和 Document 中查找事件。首先，我必须创建一个覆盖 PdfPageEventHelper 的类：

```
internal class MainTextEventsHandler : PdfPageEventHelper
{
    public override void OnStartPage(PdfWriter writer, Document document)
    {
        document.SetMargins(document.LeftMargin, document.LeftMargin, document.TopMargin, document.BottomMargin); //Mirror the horizontal margins
        document.NewPage(); //do this otherwise the margins won't take
    }
} 
```

接下来，我设置了 Writer 对象的 PageEvent 属性，并修改了循环以删除模拟。

```
 Writer.PageEvent = new MainTextEventsHandler();
        foreach (var item in ItemList)
        {
            var para = new Paragraph("", Normal);
            para.AddAll(item.Chunks);
            /* per-paragraph stuff here */
            para.SpacingAfter = 10;                    
            textDocument.Add(para);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:30:16.687

试试这个代码：

```
public const string pageBreakHtmlMarker = "<!-- pageBreak -->";
public MemoryStream htmlToPdf(string html)
{
    MemoryStream msOutput = new MemoryStream();
    string[] sep = new string[] { pageBreakHtmlMarker };
    string[] arrHtml = html.Split(sep, 9999, StringSplitOptions.RemoveEmptyEntries);
    htmlToPdf(arrHtml, ref msOutput);
    return msOutput;
}
private void htmlToPdf(string[] arrHtmlPages, ref MemoryStream msOutput)
{
    using (Document document = new Document(PageSize.A4, 30, 30, 30, 30))
    {
        using (HTMLWorker worker = new HTMLWorker(document))
        {
            PdfWriter writer = PdfWriter.GetInstance(document, msOutput); // writer to listen doc ad direct a XML-stream to a file            
            document.Open();
            worker.StartDocument();
            foreach (string html in arrHtmlPages)
            {
                TextReader reader = new StringReader(html); // parse the html into the document
                worker.Parse(reader);
                document.Add(Chunk.NEXTPAGE);
            }
            worker.EndDocument();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T15:53:26.170

查看[Page Events](http://itextpdf.com/themes/keyword.php?id=204)，特别是[onStartPage](http://itextpdf.com/themes/keyword.php?id=219)和/或[onEndPage](http://itextpdf.com/themes/keyword.php?id=220)以确定您是否必须更改文档的边距。

请注意，这些示例适用于 Java 版本，但转换为 iTextSharp 应该很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T01:19:31.393

Visual Basic 中的示例代码段

在`LoadPage`刚刚使用：

```
Dim pdfPageEvents As pdfPageEvents = New pdfPageEvents
writer = PdfWriter.GetInstance(doc, memMemoryStream)
writer.CloseStream = False
writer.PageEvent = pdfPageEvents
doc.Open() 
```

把这个类放到同一个文件或命名空间

```
Public Class pdfPageEvents
    Inherits iTextSharp.text.pdf.PdfPageEventHelper
    Private _strTitle As String, _strPrintFeatures As String

    Public Sub New(ByVal Title As String, ByVal PrintFeatures As String)
        _strTitle = Title
        _strPrintFeatures = PrintFeatures
    End Sub

    Public Overrides Sub OnStartPage(ByVal writer As PdfWriter, ByVal doc As Document)
        If InStr(_strPrintFeatures, "header") > 0 Then
            Dim fntFont As Font = FontFactory.GetFont("Tahoma", BaseFont.CP1250, True, 10, Font.NORMAL, New BaseColor(128, 128, 128))
            Dim imgImage As iTextSharp.text.Image = iTextSharp.text.Image.GetInstance(HttpContext.Current.Server.MapPath("../LocalResources/Images/print_company_logo_medium.png"))
            Dim tblTable As New PdfPTable(2)
            Dim celRightCell As PdfPCell

            tblTable.WidthPercentage = 100
            tblTable.HorizontalAlignment = Element.ALIGN_CENTER
            imgImage.ScalePercent(70)

            Dim celLeftCell As New PdfPCell(New Phrase(_strTitle, fntFont))
            celLeftCell.HorizontalAlignment = Element.ALIGN_LEFT
            celLeftCell.Border = 0
            celLeftCell.BorderWidthBottom = 0.5
            celLeftCell.BorderColorBottom = New BaseColor(128, 128, 128)
            celLeftCell.VerticalAlignment = Element.ALIGN_BOTTOM
            celLeftCell.PaddingBottom = 3
            tblTable.AddCell(celLeftCell)

            If InStr(_strPrintFeatures, "logo") > 0 Then
                celRightCell = New PdfPCell(imgImage)
            Else
                celRightCell = New PdfPCell(New Paragraph(""))
            End If

            celRightCell.HorizontalAlignment = Element.ALIGN_RIGHT
            celRightCell.Border = 0
            celRightCell.BorderWidthBottom = 0.5
            celRightCell.BorderColorBottom = New BaseColor(128, 128, 128)
            celRightCell.VerticalAlignment = Element.ALIGN_BOTTOM
            celRightCell.PaddingBottom = 3
            tblTable.AddCell(celRightCell)

            doc.Add(tblTable)
            doc.Add(New Paragraph(vbNewLine))
        End If
    End Sub

    Public Overrides Sub OnEndPage(ByVal writer As PdfWriter, ByVal doc As Document)
        If InStr(_strPrintFeatures, "footer") > 0 Then
            Dim fntFont As Font = FontFactory.GetFont("Tahoma", BaseFont.CP1250, True, 10, Font.NORMAL, New BaseColor(128, 128, 128))
            Dim tblTable As New PdfPTable(2)
            Dim strDate As String = IIf(InStr(_strPrintFeatures, "date") > 0, FormatDateTime(Date.Today, DateFormat.GeneralDate), "")

            tblTable.TotalWidth = doc.PageSize.Width - doc.LeftMargin - doc.RightMargin
            tblTable.HorizontalAlignment = Element.ALIGN_CENTER

            Dim celLeftCell As New PdfPCell(New Phrase(strDate, fntFont))
            celLeftCell.HorizontalAlignment = Element.ALIGN_LEFT
            celLeftCell.Border = 0
            celLeftCell.BorderWidthTop = 0.5
            celLeftCell.BorderColorTop = New BaseColor(128, 128, 128)
            celLeftCell.VerticalAlignment = Element.ALIGN_BOTTOM
            tblTable.AddCell(celLeftCell)

            Dim celRightCell As New PdfPCell(New Phrase(CStr(doc.PageNumber), fntFont))
            celRightCell.HorizontalAlignment = Element.ALIGN_RIGHT
            celRightCell.Border = 0
            celRightCell.BorderWidthTop = 0.5
            celRightCell.BorderColorTop = New BaseColor(128, 128, 128)
            celRightCell.VerticalAlignment = Element.ALIGN_BOTTOM
            tblTable.AddCell(celRightCell)
            tblTable.WriteSelectedRows(0, -1, doc.LeftMargin, (doc.BottomMargin), writer.DirectContent)
        End If
    End Sub
End Class 
```

# c++ - 在 Boost 测试中重复测试用例多次

> ID：10554613
> 
> 赞同：6
> 
> 时间：2012-05-11T15:45:15.770
> 
> 标签：c++, unit-testing, boost, boost-test

有没有办法在 Boost 测试中重复运行一个单元测试或一组单元测试？

假设我有以下内容：

```
BOOST_FIXTURE_TEST_SUITE(someSuite, someFixture)

BOOST_AUTO_TEST_CASE(someTest)
{
    ...
}

BOOST_AUTO_TEST_SUITE_END() 
```

...而且我想`someTest`使用 setup/teardown 运行 100 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:29:37.763

您始终可以循环运行您的测试程序。我不相信现在有测试用例/套件级别的功能可以做到这一点。随意通过票申请一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-27T11:08:30.313

根据[boost config](https://www.boost.org/doc/libs/1_63_0/libs/test/doc/html/boost_test/runtime_config/summary.html)，没有选项可以指定多次执行。

可以使用一些 Linux 命令，例如：

```
for i in `seq 10`; do command; done 
```

# c++ - 在 C++ 中获取另一个进程变量值（或内存地址）

> ID：10554616
> 
> 赞同：0
> 
> 时间：2012-05-11T15:45:23.600
> 
> 标签：c++, variables, process, hook

我在这里阅读了堆栈溢出中的帖子，但没有人帮助我解决这个问题。

我设法制作了一个程序，它可以获取所有正在运行的进程及其 pid，如果需要，我还可以获取进程 HANDLE，无论如何我知道我必须将我的代码挂钩到进程，这也是我必须解决的问题。

我想要的是：我有一个用这段代码制作的 C++ 程序（例如）：

> # 方案一：
> 
> ```
> using namespace std;
> 
> int main(){
>     int var,a;
>     do{
>         cout<<"1 = Change Value, 2 = Check Value, 3 = Memory Address\n";
>         cin>>a;
>         switch(a){
>             case 1:
>                 cout<<"Variable value: ";
>                 cin>>var;
>                 break;
>             case 2:
>                 cout<<"Value: "<<var<<endl;
>                 break;
>             case 3:
>                 cout<<"Memory Address: "<<&var<<endl;
>                 break;
>         }
>     }while(1);
>     return 0;
> } 
> ```

我想制作另一个程序，也是在 c++ 中，它将挂钩到该程序的进程并通过其值找到 int var 内存地址。

可以说：我将 var 设置为 5 我将第二个程序搜索为值为 5 的整数值。比在第一个程序中我将 var 值更改为 10。我在第二个程序中搜索之前找到的列表中的值 10值 5。只有一个地址带有该值，它是另一个程序 int var; 价值。

所以现在我可以根据第一个值在第二个程序中进行 if 语句。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:53:47.233

共享内存是常用的方法。您可以定义共享内存的公共段，并将其开头的偏移量用作“地址”。

这样你的代码是可移植的。

例如，参见[这个 boost library](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess/sharedmemorybetweenprocesses.html)。

# github - 在 github 代码审查中设置差异版本

> ID：10554622
> 
> 赞同：1
> 
> 时间：2012-05-11T15:45:31.040
> 
> 标签：github

一位同事在github上提交了（C1）一堆新代码，我通过github ui做了一些行注释，让她在我完成审阅之前回复。她做到了，提交了一个新的提交（C2）。当我去查看她的新代码时，我看到了 C1 和 C2 之间的差异，这不是我想要的。例如，我对同时出现在 C1 和 C2 中的代码非常感兴趣。另外，我对她从 C1 到 C2 所做的与我的评论没有直接关系的更改不感兴趣；它们只是视觉上的干扰。有没有办法查看提交 C2 并对其进行行注释而不将其视为与 C1 的差异？

编辑：请参阅回应@NullToken 的澄清评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T18:36:39.307

> 有没有办法查看提交 C2 并对其进行行注释而不将其视为与 C1 的差异？

*   单击 C2 提交链接

![提交链接](../Images/de781cd65fe35c2cc26fac9162899ccb.png)

*   这将自行打开提交，并且仅显示已作为此提交的一部分更改的代码

*   添加行注释

![笔记标记](../Images/50556ed742aacb53c2ad500e04abd6bf.png)

*   这些评论也将出现在拉取请求中

**更新以下评论**

> 我希望能够在没有任何差异注释的情况下查看当前代码，但仍然可以对其进行评论

目前，无法向纯源代码添加注释。拉取请求是 GitHub 推广的协作工作流程的中心。而且我不知道有什么办法可以关闭 Diff 显示。

如何[联系 GitHub 支持](https://github.com/contact)并提出您的功能请求？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:16:34.657

我联系了 GitHub 支持并获得了这个部分 URL，以在两个任意提交之间生成差异：

```
repo/compare/SHA…SHA 
```

他们确认他们不支持此视图中的行注释，但表示他们会将其添加到功能请求列表中。

# c# - 有没有办法将 Ajax Accordion Index 设置为当前视图以进行自动回发？

> ID：10554623
> 
> 赞同：2
> 
> 时间：2012-05-11T15:45:33.813
> 
> 标签：c#, asp.net, accordion

我有一个 Ajax Accordion，并且我将默认选定索引设置为 -1，因此所有窗格都已关闭。每个窗格都有几个不同的控件，有些会自动回发，当自动回发发生时，当然所有窗格都会崩溃。

那么是否可以在页面加载时将其设置为选定的索引 -1 并在回发时将选定的索引设置为回发之前的状态？

如果我可以澄清我的问题中的任何内容，请告诉我，以及是否有任何我可以提供的代码片段。-后面的代码是c#

谢谢

```
//My Accordion
 <ajaxtoolkit:accordion ID="MyAccordion" runat="Server" 
     HeaderCssClass="aHeader"  HeaderSelectedCssClass="aSelected"
     ContentCssClass="aContent" AutoSize="None" FadeTransitions="true"
     TransitionDuration="250" FramesPerSecond="40" RequireOpenedPane="false" 
     SuppressHeaderPostbacks="true" Height="894px" style="margin-right: 23px" 
     Width="717px">

//Page Load Event
 protected void Page_Load(object sender, EventArgs e)
    {
        if (ViewState["SelectedAccordionIndex"] == null)
        {
            MyAccordion.SelectedIndex = -1;
        }
        else
        {
            MyAccordion.SelectedIndex = (int)ViewState["SelectedAccordionIndex"];
        }
        if (!IsPostBack)
        {
            LoadPage();
        }
    }
    //drop down list set to auto post back
    protected void dropdownlist_SelectedInexChange(object sender, EventArgs e)
    {
        ViewState["SelectedAccordionIndex"] = MyAccordion.SelectedIndex;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:59:35.053

我会为此使用视图状态或查询字符串变量。检查`Page_Load`是否存在，如果不设置`selectedindex`为-1，否则将其设置为视图状态或查询字符串中的值。

当然，在导致回发的区域中，您需要将索引值存储在查询字符串或视图状态中。如果我是你，我会使用视图状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:08:54.643

URL中有一个属性hastag，可以让你做很多事情，比如

```
http://host/section/accordion  <-- default

//Pseudocode

if(hashtag == null)
{
   selectedIndex = -1;
}
else
{ 
  selectedIndex = hashtag.value;
}

http://host/section/accordion#1 <-- selectedIndex == 1
http://host/section/accordion#2 <-- selectedIndex == 2 
```

在javascript中，您可以像这样获得主题标签`window.location.hash`

你甚至可以在stackoverflow中找到一个例子，例如当你从菜单中点击某人的答案时，你的问题是专门针对响应和突出显示的

# java - 需要一些关于以抽象方式调用方法和字段的技巧

> ID：10554624
> 
> 赞同：0
> 
> 时间：2012-05-11T15:45:48.110
> 
> 标签：java, reflection, invoke

好吧，我有这个方法，我不确定如何处理它的一部分，它是评论以感叹号开头的地方：“// !!!!这是我关心的部分......”

```
public Person getPersonFromRS(ResultSet rs) throws SQLException, NoSuchMethodException,
    IllegalAccessException, IllegalArgumentException, InvocationTargetException
{
  Person person = new Person();

  // getting the fiels and methods of the class Person
  Field[] fields = person.getClass().getDeclaredFields();
  Method[] methods = Person.class.getClass().getDeclaredMethods();
  String setter = "set";

  // just ignoring these fields of the class
  for (Field field : fields) {
    if (field.getName().equals("nul") || field.getName().equals("pairMarriages")
        || field.getName().equals("pairMarriage_Date") || field.getName().equals("pairBiography")) {
      continue;
    }

    // getting the value from resultSet as string
    String value = "";
    try {
      value = rs.getString(field.getName());
    } catch (Exception e) {
      System.err.println("Error with getting the column " + field.getName() + " from database");
      continue;
    }

    // if value is not null and the string inside not NULL, set the value to the person
    if (!(value == null))
      System.out.println("THE RETRIEVED VALUE: " + value);

    if ((!(value == null)) && !value.equals(nul)) {
      // methodName = setParameter
      String methodName = setter + field.getName();
      System.out.println("\nmethod Name: " + methodName);

      Method method = null;
      try {
        System.out.println("The field type is " + field.getType());
        method = person.getClass().getDeclaredMethod(methodName, field.getType());
      } catch (Exception e) {
        System.err.println(e);
        continue;
      }

      // !!!! this is the part that concerns me, what's the best way to handle this part in order
      // to avoid this flood for every type?
      // determining the type of the value to set in
      Type type = field.getType();
      if (field.getType() == String.class) {
        method.invoke(person, value);
      } else if (field.getType() == long.class) {
        method.invoke(person, Long.parseLong(value));
      } else if (field.getType() == int.class) {
        method.invoke(person, Integer.parseInt(value));
      } else if (field.getType() == PersonDate.class) {
        PersonDate date = new PersonDate(value);
        method.invoke(person, date);
      }
    }
  }
  return person;
} 
```

有没有一种最佳的方法来做到这一点，而不是像这样处理每一个参数类型？我的意思是这对我来说似乎是开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:21:08.967

您可以先从`ResultSet`. 这`map`包含具有相应值的列名。

```
Map<String, String> map = new HashMap<>();
ResultSetMetaData metaData = rs.getMetaData();
int columnCount = metaData.getColumnCount();
for (int column = 1; column <= columnCount; column++) {
    map.put(metaData.getColumnName(column), rs.getString(column));
}
return map; 
```

然后您可以将其`map`用于. 这将需要使用类的方法，它是[Apache Commons BeanUtils](http://commons.apache.org/beanutils/)的一部分。*`populate`*`Person``populate`[`BeanUtils`](http://commons.apache.org/beanutils/)

```
Person person = new Person();
BeanUtils.populate(person, map); 
```

这个类有：

> 通过反射填充 JavaBeans 属性的实用方法。

您可以根据需要修改查询以填充所需的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:13:36.020

switch 语句会更干净，但除非你想加入真正的 ORM 解决方案，如 JDO、JPA、hibernate 等等……你将不得不这样做。你有什么顾虑？如果你说“开销”是指 CPU 周期，那么你应该更关心你正在做的所有反射，而不是一堆 if/else 语句。如果您关心的是维护，是的，这将是很多代码。也就是说，如果您只映射十几种类型......这并不是什么大问题。除了使用现成的 ORM 工具之外，这里实际上没有任何捷径。

# mysql - 在 MySQL 中从 HAVING COUNT(*) 中删除

> ID：10554627
> 
> 赞同：13
> 
> 时间：2012-05-11T15:46:01.993
> 
> 标签：mysql, count, sql-delete, having

好的，所以这里已经有几个帖子了，网上的帖子更少了。我实际上已经尝试了其中的每一个，但都无法正常工作。希望这里的人可以同情我:)

这是我正在使用的数据。我想删除所有这些记录。

```
SELECT
part_desc, count(*) as rec_num
FROM ag_master
GROUP BY part_desc HAVING COUNT(*) > 1000;

+--------------------------------------+---------+
| part_desc                            | rec_num |
+--------------------------------------+---------+
| SILICON DELAY LINE, TRUE OUTPUT      |    1092 |
| LOADABLE PLD                         |    1401 |
| 8-BIT, FLASH, 8 MHz, MICROCONTROLLER |    1411 |
| FPGA                                 |    1997 |
| 8-BIT, MROM, 8 MHz, MICROCONTROLLER  |    3425 |
+--------------------------------------+---------+
5 rows in set (0.00 sec) 
```

我找到的最接近的代码如下所示。语法检查正常并运行，但它似乎只是挂起数据库。我让它运行了长达 10 分钟，但什么也没发生，所以我中止了它。

```
DELETE
FROM ag_master
WHERE part_id IN (
  SELECT part_id
  FROM ag_master
  GROUP BY part_desc
  HAVING COUNT(*) > 1000
); 
```

这是 tmp 表上的解释计划

```
mysql> EXPLAIN SELECT * FROM ag_master WHERE part_desc IN (SELECT part_desc FROM tmp);
+----+--------------------+-----------+--------+---------------+------+---------+------+--------+-------------+
| id | select_type        | table     | type   | possible_keys | key  | key_len | ref  | rows   | Extra       |
+----+--------------------+-----------+--------+---------------+------+---------+------+--------+-------------+
|  1 | PRIMARY            | ag_master | ALL    | NULL          | NULL | NULL    | NULL | 177266 | Using where |
|  2 | DEPENDENT SUBQUERY | tmp       | system | NULL          | NULL | NULL    | NULL |      1 |             |
+----+--------------------+-----------+--------+---------------+------+---------+------+--------+-------------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-11T15:55:57.253

如[手册](http://dev.mysql.com/doc/en/delete.html)所述：

> 目前，您不能在子查询中从表中删除并从同一个表中选择。

我认为您必须通过临时表执行此操作：

```
CREATE TEMPORARY TABLE temp
  SELECT   part_desc
  FROM     ag_master
  GROUP BY part_desc
  HAVING   COUNT(*) > 1000;

DELETE FROM ag_master WHERE part_desc IN (SELECT part_desc FROM temp);

DROP TEMPORARY TABLE temp; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-21T14:42:21.587

另一种选择是使用内部连接来过滤结果：

```
DELETE
    ag_master.*
FROM
    ag_master 

    INNER JOIN 
    (
        SELECT 
            part_id
        FROM 
            ag_master
        GROUP BY 
            part_desc
        HAVING COUNT(*) > 1000
    )AS todelete ON
            todelete.part_id = ag_master.part_id 
```

# android - Android - 使用空格动态添加的图像？

> ID：10554629
> 
> 赞同：0
> 
> 时间：2012-05-11T15:46:03.643
> 
> 标签：android, imageview, whitespace

我动态地将我的图像添加到这样的活动中：

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.BELOW, POIdescription.getId());
ImageView imv=new ImageView(getApplicationContext());
imv.setImageBitmap(b);
imv.setId(presumed_id);
imv.setLayoutParams(params);
imv.setPadding(0, 0, 0, 0);
RelativeLayout rl=(RelativeLayout) findViewById(R.id.relativeLayout);
rl.addView(imv); 
```

问题是，当我动态添加图像（比如说三个）时，它们之间的间距很大。我试图将 Padding 设置为 0,0,0,0 但这没有帮助。你知道吗，我的问题在哪里？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:03:56.837

我知道空间是在包装在RelativeLayout 中的图像+描述之间，可能间距发生在RelativeLayout 而不是ImageView 上。

还是上面的描述很多图片？布局描述可能会有所帮助。

此外，有时图像不是您希望的大小，请尝试使用 ScaleType = fitXY 来查看是布局问题还是图像大小。

问候

# java - Java Android，HttpGet 错误 - 主机名可能不为空

> ID：10554630
> 
> 赞同：0
> 
> 时间：2012-05-11T15:46:04.957
> 
> 标签：java, android, uri, host, http-get

我正在使用 HttpGet 来获取一些图像的内容。它运行良好，但现在我使用的新服务器出现错误，该服务器以以下形式返回图像：

[https://amx-sfs.qpass.com/d/da/207b3f6f-4fda-4faf-b7ae-a186530e1245](https://amx-sfs.qpass.com/d/da/207b3f6f-4fda-4faf-b7ae-a186530e1245)

错误是**主机名可能不为空**

我进行了研究，似乎当 URL 上出现下划线时错误很常见，但是我的 URL 只包含我认为 URI 接受的连字符。无论如何，我也尝试使用以下方法来转义 url，但没有成功：

```
HttpGet mHttpGet = new HttpGet(new URI(null,item.getImageUrl(),null)); 
```

还有什么可能导致问题，我该如何解决？

提前致谢

**编辑**

我首先尝试使用 Url 直接使用

```
new HttpGet(item.getImageUrl()) 
```

然后我也尝试了 4 个参数：

```
HttpGet mHttpGet = new HttpGet(new URI("https","amx-sfs.qpass.com",item.getImageUrl().substring(25),null)); 
```

结果相同，即使我调试 HttpGet 对象，并观察它具有的 URI 对象，主机属性似乎 ok (amx-sfs.qpass.com) ，但我仍然得到相同的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:12:15.340

我认为您使用了错误的构造函数。三参数 URI 构造函数具有以下签名：

```
public URI(String scheme, String ssp, String fragment) 
```

但是您提供的是 URL 作为第二个参数，而不是 SSP。我认为您应该使用将 URL 字符串作为其参数的一个参数构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:37:56.877

好吧，没有Java或Android问题，它导致服务器在请求来自设备时更改了请求......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:05:30.253

您是否对 URI 进行了编码？例如删除空格或其他破坏东西的特殊字符？试试 android.net.Uri.encode(String s)

HttpGet mHttpGet = new HttpGet(new URI(null,android.net.Uri.encode(item.getImageUrl()),null));

调试此问题的最佳方法是始终打印 URL 并分析给出错误的 URL。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-23T06:19:02.337

请尝试不使用连字符“-”或下划线“_”的主机名，看看它是否有效。

# c# - ASP.NET Web API 可以处理不同控制器的子资源吗

> ID：10554631
> 
> 赞同：5
> 
> 时间：2012-05-11T15:46:05.973
> 
> 标签：c#, rest, resources, asp.net-web-api

想象一个具有用户的系统，具有相应的组`ApiControllers`。然后想象以下访问模式：

```
/api/users                  
/api/users/1
/api/users?groupId=1    <- #1 returns users belonging to group id 1 via Get(int? groupId)

/api/groups/
/api/groups/1
/api/groups/1/users     <- #2 sub resource, returns users belonging to group id 1 
```

**是否可以将#2 的责任委托给#1 的`Get(int? groupId)`方法？** 我想继续负责使用其原始控制器处理子资源。换句话说，如果子资源也作为资源存在，那么子资源处理应该是什么？委托给主要资源控制器...

PS现在，我不确定上述方法是否具有 RESTfull 样式的“cosher”，这完全是其他讨论......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T21:08:12.720

WEB Api Beta 不支持路由的方法级别属性。他们说，他们正在考虑改进下一个版本的路由故事。

目前唯一的方法（据我所知）是明确映射这些路线。在你的情况下：

```
 // for your rest style api 
 routes.MapHttpRoute(
     name: "UserGroups",
     routeTemplate: "api/groups/{groupID}/users",
     defaults: new { controller = "Users"},
     constraints: new { groupID = @"\d+" } 
 ); 
```

对于 RPC URI 样式，默认路由将作为一目了然。

```
 routes.MapHttpRoute(
           name: "ApiDefault",
           routeTemplate: "api/{controller}/{id}",
           defaults: new { controller = "Users", id = RouteParameter.Optional }
       ); 
```

您还可以覆盖 DefaultHttpControllerFactory 类以您的方式创建控制器实例。

希望这有帮助。

# java - 使用 JXL 在 excel 中访问超过 256 列

> ID：10554632
> 
> 赞同：2
> 
> 时间：2012-05-11T15:46:06.923
> 
> 标签：java, excel, jxl

我有一个 excel 文件，我需要写超过 256 列。该文件为 2007 .xls 格式。我看到我不能超过 256 列。

另一方面，如果我尝试使用 .xlsx 格式，我发现当我尝试访问 excel 文件时，我收到“无法识别 OLE 流错误”。我在某处读到这个错误是因为 excel 格式兼容性。

这似乎是一种鸡蛋问题，有人可以帮我解决这个问题吗？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:23:17.720

基本上，这与 Excel 文件和 JXL 都有关。

Excel as `.xls`（2006 及更早版本）仅支持 256 列和 65536 行。（[旧的限制文档](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx)）

这些限制在使用该格式的较新版本的 Excel（2007 或更高版本，[新限制文档](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx?CTT=5&origin=HP005199291)）中有所增加`.xlsx`，但新格式正是这种新格式。有新的功能以及新的需求和新的处理方式。

不幸的是，这也意味着与`.xls`文件的兼容性并不意味着与`.xlsx`文件的兼容性，这对您来说并不奇怪。

这就是 JXL 参与的地方。不仅它本身必须与新格式兼容（我不知道是否兼容），而且每种格式的实现可能有点不同。

我不是 JXL 用户强硬（我使用 Apache POI），所以您必须自己研究和整理可能的解决方案，抱歉。

# django - Django - 在哪里初始化静态对象？

> ID：10554636
> 
> 赞同：0
> 
> 时间：2012-05-11T15:46:11.637
> 
> 标签：django

我需要在 Django 的模型框架之外管理一个数据库连接池。

像这样初始化对象的“正确”位置在哪里（以便整个应用程序可以访问同一个对象），第二个要求是能够在 django/python 关闭时关闭我的连接。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:16:26.640

看起来 Django 在 django.db 中初始化了自己的 Connection 对象（正确类型的代理）。**_ *init* _** **.py**因此，在您的个人应用程序的***_init*** **_***中初始化您的程序似乎不是一个坏主意。*

 *Django 在关闭连接时会注册一个信号，因此只需捕获此信号即可关闭连接。以下代码取自 django.db。**_*初始化*_** .py

```
# Register an event that closes the database connection
# when a Django request is finished.
def close_connection(**kwargs):
    for conn in connections.all():
        conn.close()
signals.request_finished.connect(close_connection) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:36:33.693

对于您的第二个要求：

Djano 注册一个关闭连接的信号

[https://github.com/django/django/blob/master/django/db/init **.py** _](https://github.com/django/django/blob/master/django/db/__init__.py)*

# c# - 如何在具有长名称的文件夹中创建文件。（避免 PathTooLongException）

> ID：10554641
> 
> 赞同：2
> 
> 时间：2012-05-11T15:46:25.080
> 
> 标签：c#, asp.net-mvc, .net

> **可能重复：**
> [如何避免 System.IO.PathTooLongException？](https://stackoverflow.com/questions/530109/how-to-avoid-system-io-pathtoolongexception)

在我的应用程序文件夹结构中有很长的时间。我需要保存在此文件夹中的文件（我没有更改架构文件夹的选项！）

**[已编辑]**

```
using (var fileStream = File.Create(@"\\?\" + filePath, (int) file.Value.Length))
{
    var bytesInStream = new byte[file.Value.Length];
    file.Value.Read(bytesInStream, 0, bytesInStream.Length);
    fileStream.Write(bytesInStream, 0, bytesInStream.Length);
} 
```

问题是完整路径“filePath”有超过 260 个字符！

## 错误：

> System.IO.PathTooLongException 指定的路径、文件名或两者都太长。完全限定文件名必须少于 260 个字符，目录名必须少于 248 个字符。

但他必须保存在这个文件夹中！

**如何在不更改文件夹结构或文件名的情况下将此文件保存在此文件夹中？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:58:21.030

关于使用长路径和所涉及的头痛的好文章。在沿着这条道路前进之前，请确保您确实需要它们。相对路径不起作用“...\a.txt”

[http://blogs.msdn.com/b/bclteam/archive/2007/02/13/long-paths-in-net-part-1-of-3-kim-hamilton.aspx](http://blogs.msdn.com/b/bclteam/archive/2007/02/13/long-paths-in-net-part-1-of-3-kim-hamilton.aspx)

其他替代方法是使用 Win32 API 直接进行调用。

# c# - Castle Windsor 3.0 具有相同名称的不同服务——如何？

> ID：10554646
> 
> 赞同：1
> 
> 时间：2012-05-11T15:46:36.860
> 
> 标签：c#, .net, castle-windsor, ioc-container

假设我有两个接口 IFirst 和 ISecond，它们都有几个实现，例如 FirstClassForMe、FirstClassForYou、SecondClassForMe、SecondClassForYou。

我想在 IoC 容器中注册它们（无论哪种生活方式）：

```
this.container.Register(
    Component.For<IFirst>().ImplementedBy<FirstClassForMe>().Named("Me"),
    Component.For<IFirst>().ImplementedBy<FirstClassForYou().Named("You"), 
    Component.For<ISecond>().ImplementedBy<SecondClassForMe>).Named("Me"),
    Component.For<ISecond>().ImplementedBy<SecondClassForYou>().Named("You")) 
```

我想按如下方式使用它：

```
var forWho = this.GetCode();
var first = this.Container.Resolve<IFirst>(forWho);
var second = this.Container.Resolve<ISecond>(forWho);
this.Work(first, second); 
```

但在温莎，我得到一个 ComponentRegistrationException

> 组件 Me 无法注册。已经有一个具有该名称的组件。您是否想修改现有组件？如果不是，请确保指定一个唯一名称。

但是，我相信，只要对（接口；代码）对于每个注册都是唯一的，就可以解决这种依赖关系。是否可以根据这种情况使温莎工作？例如，查找 IFirst 的所有注册，然后按名称选择一个。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-11T16:40:05.050

Windsor 的[服务覆盖](http://docs.castleproject.org/Windsor.Registering-components-one-by-one.ashx#Supplying_the_component_for_a_dependency_to_use_Service_override_9)将适用于您想做的事情。

# c++ - 两个封装组件之间的通信

> ID：10554647
> 
> 赞同：2
> 
> 时间：2012-05-11T15:46:37.167
> 
> 标签：c++

我有三个组件——渲染系统、物理模拟和 UI。UI 代码是用脚本编写的，不受信任。现在我需要将我的物理模拟结果传达给渲染系统，并且不确定正确的设计。例如，我可以简单地将新的 sim 数据复制到渲染器中。然而，这似乎有点浪费。我可以将渲染器设置为直接对 sim 的数据进行操作，但这似乎违反了封装。

我打算让这个系统与潜在的数千个移动单元一起工作，因此值得牢记性能。

如何在不违反封装的情况下将数据从一个组件快速移动到另一个组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:34:03.517

我可能会让渲染器分配对象来保存渲染所需的数据。这些对象将定义一个足以让渲染器完成其工作的可见界面，但在其他方面是不透明的。尽管对象本身是由渲染器分配/拥有的，但它们对它来说大多是不透明的类型。

模拟器拥有这些对象内部的知识（至少如果需要比公共接口显示的更多的知识）。渲染器基本上只是从它们读取数据，模拟器可以/将修改它们的状态/向它们写入数据。

一种实现方式是对“中间人”对象使用多重继承。其中一个父级提供有限的公共接口供渲染器使用，另一个提供更全面的接口供模拟器使用。

当然，就像本质上任何由 C++ 本身提供的保护一样，这基本上只是防止意外，而不是故意破坏。我假设您对渲染器缺乏信任基本上是为了防止可能出现的错误，而不是可能试图故意破坏安全性的渲染器。如果您需要防止后者，您几乎需要至少使用操作系统级别的机制，例如模拟器和渲染器位于不同的进程中，它们之间有某种 IPC（但是，当然，这几乎不可避免地会增加相当多的开销）。

# apache - 摆脱 301 重定向

> ID：10554649
> 
> 赞同：1
> 
> 时间：2012-05-11T15:46:57.217
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, http-status-code-301

我在 .htaccess 中编写了一个错误的 301 重定向

由于它是永久性的，我的浏览器/代理总是将我重定向到错误地址，即使我在 .htaccess 中更改了重定向位置地址

我怎样才能摆脱这个旧的/错误的 301 重定向？

设置很清楚：我知道如何在 .htacces 中使用 mod_rewrite 进行 301。我想取消 301

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:25:05.430

这不取决于您的服务器配置，因为浏览器/代理决定查询您的网页或使用缓存的重定向。您应该只清理（或关闭）您正在谈论的浏览器/代理中的缓存。如果您不能这样做，请等到缓存超时（取决于代理设置）到期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T07:53:26.287

它可以`htaccess`用`mod_redirect`and来完成`mod_header`。

神奇的是，您可以`[E]`在 Rewrite 中使用修饰符设置环境变量，如果设置了环境变量，则设置非缓存标头。

这是代码

```
RewriteCond %{HTTP_HOST} !^mark\.koli\.ch [NC]
## the [E=nocache:1] modifier sets the environment variable "nocache"
RewriteRule ^/(.*)$ http://mark.koli.ch/$1 [R=301,L,E=nocache:1]

## Set the response header if the "nocache" environment variable is set
## in the RewriteRule above.
Header always set Cache-Control "no-store, no-cache, must-revalidate" env=nocache

## Set Expires too ...
Header always set Expires "Thu, 01 Jan 1970 00:00:00 GMT" env=nocache 
```

在他的[博客条目](http://mark.koli.ch/set-cache-control-and-expires-headers-on-a-redirect-with-mod-rewrite)中向[Mark S. Kolich 致敬](http://mark.koli.ch/)

当然，这应该在重定向发生***之前完成。***因此，在此之后，每个 301 重定向都不会被缓存，并且可以在没有模糊的情况下进行更改。

也许甚至可以通过[apache_setenv](http://www.php.net/manual/en/function.apache-setenv.php)使用 PHP 设置环境变量。

# nhibernate - 如何在 nhibernate 标准 api 中加入 ISet 和子对象

> ID：10554650
> 
> 赞同：0
> 
> 时间：2012-05-11T15:47:03.740
> 
> 标签：nhibernate

如果我有以下课程

```
public class Order
{

    public virtual ISet<OrderItem> OrderItems { get; set; }

}

public class OrderItem
{

    public virtual Product Product { get; set; }

} 
```

OrderItem 与产品具有一对一的关系。从一个 sql 请求中获得所有这些最有效的方法是什么。

我正在使用休眠标准 api。我如何将订单项和产品添加为连接类型

```
 using (ITransaction transaction = _session.BeginTransaction())
        {
            try
            {
                Model.Order order = _session
                .CreateCriteria(typeof(Order))
                .Add(Restrictions.Eq("Id", id))
                .CreateAlias("OrderItems", "orderItems", JoinType.xxxx)

                .UniqueResult<Model.Order>();
                transaction.Commit();
                return order;
            }
            catch (HibernateException)
            {
                transaction.Rollback();
                _session.Close();
                _session.Dispose();
                throw;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:46:19.337

```
Model.Order order = _session.CreateCriteria(typeof(Order))
    .Add(Restrictions.Eq("Id", id))
    .SetFetchMode("OrderItems", FetchMode.Eager)
    .UniqueResult<Model.Order>(); 
```

# jsf - JSF：身份验证和授权，最好的前进方式

> ID：10554654
> 
> 赞同：9
> 
> 时间：2012-05-11T15:47:11.657
> 
> 标签：jsf, jakarta-ee, authentication, jsf-2, authorization

我花了一整天的时间在谷歌上搜索并查看这里的各种问题，试图提出实现身份验证和授权的最佳解决方案。我现在已经提出了部分解决方案，但我希望有人可以填补空白。我知道下面有很多文字，但请多多包涵：O）

**背景**

我继承了一个部分完成的 CRM 应用程序，该应用程序目前使用 JSF 2.0、JavaEE 6、JPA 和 PostgreSQL 数据库。不幸的是，最初以无限智慧开始构建这个网络应用程序的人决定最好将身份验证/授权留到最后——我现在必须把它放进去。

应用程序基本上分为三层——视图、托管 bean 和 DAO。这意味着托管 bean 特别“胖”，因为它们包含所有业务逻辑、验证和导航逻辑。

**身份验证/授权要求**

1.  基于表单的身份验证，针对存储在 PostgreSQL 数据库中的凭据进行验证。
2.  唯一可以公开访问的页面（匿名用户）将是登录页面。
3.  我需要根据用户角色阻止访问应用程序的某些区域。例如，只有具有“管理员”角色的用户才能访问创建/编辑用户页面。
4.  我还需要能够限制对页面某些区域的访问。例如，具有“销售代表”角色的用户应该能够查看客户详细信息，但只有当用户具有“客户服务”角色时才应显示保存/编辑按钮。

**我在哪里**

我计划做的第一件事是遵循这个[使用 JAAS 和 Servlet 3.0 登录](http://www.greenkode.com/2011/09/user-authentication-and-authorization-using-jaas-and-servlet-3-0-login/)示例的用户身份验证和授权。我相信这将满足我的前 3 个要求。

为了在页面上显示/隐藏保存按钮等，我可以使用[此 SO answer](https://stackoverflow.com/questions/7037642/suggestion-on-jsf-authorization#7037841)中描述的技术。这将部分解决需求 4，但是我认为我仍然需要保护操作方法和/或托管 bean 本身。例如，我希望能够在客户 bean 上的 save() 方法中添加注释或其他内容，以确保只有具有“客户服务”角色的用户才能调用它——这就是我开始遇到问题的地方.

我想一种选择是做类似于我提议在视图中做的事情，并使用 facesContext 检查当前用户是否“在角色中”。我对此并不热衷，因为它只会弄乱我的代码，而宁愿使用注释。但是，如果我确实沿着这条路线走，我将如何返回 http 403 状态？

javax.annotation.security.* 注释似乎非常适合以声明方式定义对应用程序区域的访问，但据我了解，它们只能添加到 EJB 中。这意味着我需要将我的所有业务逻辑从它当前所在的托管 bean 中移到新的 EJB 中。我认为这将具有将业务逻辑分离到它自己的一组类（委托、服务或您选择调用它们的任何内容）中的额外好处。这将是一个相当大的重构，但是不会因为缺少单元测试或集成测试而有所帮助。我不确定访问控制的责任是否应该在这个新的服务级别上——我认为它应该在托管 bean 上。

**其他选择**

在我的研究中，我发现很多人提到了 Spring 和 Seam 等框架。我对 Seam 的经验有限，我认为它非常适合这个项目，据我回忆，我相信它解决了我遇到的授权问题，但我认为现在介绍它为时已晚.

我也看到很多地方都提到了Shiro。看了[10 分钟的教程](http://shiro.apache.org/10-minute-tutorial.html)，这似乎很合适，尤其是与[Deluan Quintao 的 taglib](http://techbeats.deluan.com/apache-shiro-tags-for-jsffacelets)结合使用，但我一直找不到任何教程或示例来说明如何将其与 JSF Web 应用程序集成。

我经常出人意料地遇到的另一种选择是实施自定义解决方案 - 这对我来说似乎很疯狂！

**概括**

总而言之，我真的很想得到一些指导，说明我在实现身份验证和授权方面是否走在正确的道路上，以及我如何填补保护单个方法和/或托管 bean 的缺失部分（或者至少是他们委托给的代码）和/或我如何手动返回 HTTP 状态 403。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:06:42.133

您是否尝试过使用 Spring Security 进行任何操作 - 最新版本为 3

[http://janistoolbox.typepad.com/blog/2010/03/j2ee-security-java-serverfaces-jsf-spring-security.html](http://janistoolbox.typepad.com/blog/2010/03/j2ee-security-java-serverfaces-jsf-spring-security.html)

[http://ocpsoft.org/java/jsf-java/spring-security-what-happens-after-you-log-in/](http://ocpsoft.org/java/jsf-java/spring-security-what-happens-after-you-log-in/)

spring security 不是使用请求过滤器或使用 JAAS，而是一个全面的安全框架，它将解决您的大部分安全问题。您可以使用它使用 db 领域对用户进行身份验证，根据提供的身份验证信息授权他并根据需要重定向。

您可以保护您编写的方法 [http://blog.solidcraft.eu/2011/03/spring-security-by-example-securing.html](http://blog.solidcraft.eu/2011/03/spring-security-by-example-securing.html)

@PreAuthorize("hasRole('ROLE_XXX')") 就是这样

使页面的某些元素安全.. //内容

更多阅读和示例 [http://static.springsource.org/spring-security/site/petclinic-tutorial.html](http://static.springsource.org/spring-security/site/petclinic-tutorial.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T16:48:15.747

在进行了大量研究之后，我得出的结论是，首先我的应用程序的需求将受益于部署到完全实现 Java EE 规范的应用程序服务器，而不是像 Tomcat 这样的 servlet 容器。由于我正在从事的项目使用 Maven，因此这里的关键是正确设置依赖项 - 这并不容易，并且需要进行相当多的谷歌搜索和反复试验：我相信有一种更科学的方法可以采取。

然后我必须[创建一个 mysql 模块](https://stackoverflow.com/questions/10065923/error-deploying-hibernate-app-on-jboss-no-suitable-driver-found-for-jdbc#10066664)来让我的应用程序正确地与数据库通信，然后删除已实现的工厂以创建 DAO 并将它们转换为 EJB。我还必须更新 hibernate.cfg.xml 以引用我添加的数据源和 persistence.xml 以将事务类型设置为 JTA 并引用 JTA 数据源。唯一的其他复杂情况是正在使用 Open Session In View 模式，这意味着当在视图中访问实体时，我最终会遇到休眠延迟初始化错误。我重新实现了这个答案底部所示的过滤器，以解决这个问题。我认为这是一种临时措施，可以在我希望重构该区域并消除对过滤器的需求之前让事情再次正常运行。

迁移到 JBoss 只用了一天多的时间，如果我对 Java EE 和 Maven 有更多经验，我相信它可以做得更快。既然我已经到了那个地步，我就可以将接缝 3 安全性放到项目中并利用它，而不是试图拼凑一个解决方案，这基本上是我将要采取的方向。Seam 3 的好处是您可以在一定程度上挑选您使用的模块，而不必添加整个框架（如 Seam 2）。我认为其他一些模块也会有所帮助，并且将帮助我摆脱视图模式中的开放会话。

使用 Seam 确实让我担心的一件事是有人告诉我[DeltaSpike](http://wiki.apache.org/incubator/DeltaSpikeProposal)。这看起来好像它可能会取代 seam 并且没有任何更多版本的 seam 的计划。我已经决定，既然接缝仍然受到支持，并且如果 DeltaSpike 需要与接缝 3 一样长的时间来实现，那么使用接缝 3 是非常安全的。

我希望能够写一篇适当的博客文章，详细描述此迁移。

```
public class OSVRequestFilter implements Filter {

    private static final String UserTransaction = "java:comp/UserTransaction";

    private static Logger logger = LoggerFactory.getLogger(EntityManagerRequestFilter.class);

    public void init(FilterConfig config) throws ServletException {
    }

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        if (request instanceof HttpServletRequest) {
            doFilter(request, response, chain, getUserTransaction());
        }
    }

    private UserTransaction getUserTransaction() throws ServletException {
        try {
            Context ctx = new InitialContext();
            return (UserTransaction)PortableRemoteObject.narrow(ctx.lookup(UserTransaction), UserTransaction.class);
        }
        catch (NamingException ex) {
            logger.error("Failed to get " + UserTransaction, ex);
            throw new ServletException(ex);
        }
    }

    private void doFilter(ServletRequest request, ServletResponse response, FilterChain chain, UserTransaction utx) throws IOException, ServletException {
        try {
            utx.begin();

            chain.doFilter(request, response);

            if (utx.getStatus() == Status.STATUS_ACTIVE)
                utx.commit();
            else 
                utx.rollback();
        }
        catch (ServletException ex) {
            onError(utx);
            throw ex;
        }
        catch (IOException ex) {
            onError(utx);
            throw ex;
        }
        catch (RuntimeException ex) {
            onError(utx);
            throw ex;
        }
        catch (Throwable ex){
            onError(utx);
            throw new ServletException(ex);
        }
    }

    private void onError(UserTransaction utx) throws IOException, ServletException {
        try {
            if ((utx != null) && (utx.getStatus() == Status.STATUS_ACTIVE))
                utx.rollback();
        }
        catch (Throwable e1) {
            logger.error("Cannot rollback transaction", e1);
        }
    }

    public void destroy() {
    }
} 
```

# css - CSS：三个不同插件之间的z-index冲突，z-index不生效

> ID：10554655
> 
> 赞同：0
> 
> 时间：2012-05-11T15:47:16.790
> 
> 标签：css

所以这就是我得到的：

[http://mysite.com](http://mysite.com)

现在，当您按下右侧带有“预约”的大胖蓝色按钮时，会出现一个灯箱。尽管此灯箱位于幻灯片下方并且与菜单相同，但 z-index 比灯箱大。尽管我已将灯箱的 z-index 设置为 999999，但它仍然出现在它们下方。

我应该在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:57:02.920

我即将面临类似的问题，但我一直在尽我所能忽略它。

我的计划虽然可能并不完美，但它是运行一个脚本，它会在页面上找到最高的 z-index 并将它们递减 1，以便我的对象实际上可以位于顶部。

由于您使用的是 jQuery，因此您可以使用[TopZIndex 之](http://archive.plugins.jquery.com/project/TopZIndex)类的插件，或者您可以简单地检查该插件并借用使其`$.topZIndex()`工作的代码。

一旦您拥有具有最高 z 索引的对象，您就可以修改它们的 CSS 以降低该值。

使用该插件，代码将如下所示：

```
var bastardObjects = $.topZIndex();
bastardObjects.css("z-index",999998); 
```

* * *

编辑：如果我误解了，我很抱歉，我以为你是说你有多个具有最大 z-index 的对象，因此它们不能很好地一起玩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:37:09.947

问题的根源是 modal-bg 和 modal-box 的位置。

它们都在一个带有“page-content-shadow”类的元素中——这个类的位置都是相对的，z-index 是 5。这意味着即使你将模式设置为 z -index 为 99999，这仅适用于其父元素的 z-index 的上下文（在本例中为 5）。

要解决这个问题，您只需将 page-content-shadow 类的 z-index 更改为 100。这将把它放在导航和幻灯片的顶部（至少在 Chrome 中）。

# javascript - 使用jquery滚动太长的文本

> ID：10554660
> 
> 赞同：3
> 
> 时间：2012-05-11T15:47:28.007
> 
> 标签：javascript, jquery, html

我正在尝试在线创建音乐播放器/中心。

我有一个播放音乐并显示当前曲目的播放器：

![玩家](../Images/983545b090734d79dfd6e6ad868a5c26.png)

从歌曲的标题可以看出，对于 div 来说太长了。我想做的是滚动文本并将其重置为重新滚动等。

我用下面的代码尝试了这个：

html:

```
<div id="top-bar">
<div id="player-container">
        <div id="player">
          <div id="level1">
            <div class="current-track"><h1><span id="title">Party All Night (Sleep All Day) -</span> Sean Kingston</h1></div>
            <div class="add-to-playlist"></div>
            <div class="share"></div>
          </div>
          <div class="clearfix"></div>
          <div id="level2">
            <div class="current-time">0:00</div>
            <div class="progress"><span id="slider"></span></div>
            <div class="total-time">3:43</div>
          </div>
        </div>
  </div>
</div> 
```

查询：

```
$(function() {
    var scroll_text;
    $('div.current-track').hover(

    function() {
        var $elmt = $(this);
        scroll_text = setInterval(function() {
            scrollText($elmt);
        }, 5);
    }, function() {
        clearInterval(scroll_text);
        $(this).find('div.current-track h1').css({
            left: 0
        });
    });

    var scrollText = function($elmt) {
        var left = $elmt.find('div.current-track h1').position().left - 1;
        left = -left > $elmt.find('div.current-track h1').width() ? $elmt.find('div.current-track').width() : left;
        $elmt.find('div.current-track h1').css({
            left: left
        });
    };

});​​ 
```

任何指针都会被应用

这是给你们的一个jsfiddle： [JSfiddle](http://jsfiddle.net/Dn6jx/1/)

**更新**

谁能告诉我：

1.  *如何使这种情况自动发生？* **完毕**
2.  *如何减慢滚动速度？* **完毕**

这是为你们更新的 jsfiddle： [JSfiddle](http://jsfiddle.net/Dn6jx/14/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T15:59:47.943

我认为您误解了[jquery .find()](http://api.jquery.com/find/)的工作原理：

```
$elmt.find('div.current-track h1') 
```

应该：

```
$elmt.find('h1') 
```

[http://jsfiddle.net/Dn6jx/5/](http://jsfiddle.net/Dn6jx/5/)

编辑：更新小提琴的评论

[http://jsfiddle.net/Dn6jx/15/](http://jsfiddle.net/Dn6jx/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T15:58:20.303

添加了检查以查看文本是否足够长以需要滚动，删除了清除间隔，并包含在插件中。

[JSFiddle 更新](http://jsfiddle.net/Dn6jx/95/)

```
$.fn.scrolltxt = function() {
    var options = $.extend({
        speed : 28
    }, arguments[0] || {});

    return this.each(function() {
        var el = $(this);

        if( el.find('span').width() > el.parent().width() ) {
            var scroll_text = setInterval(function() {
                scrollText();
            }, options.speed);
        };      

        var scrollText = function() {
            var width = el.width(),                
                left = el.position().left - 1;
            left = -left > width ? width : left;
            el.css({left: left});
        };
    });    };

$('.current-track h1').scrolltxt(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-21T10:21:38.690

为文本设置动画的更好方法（当文本完全阅读 => 重新设置动画时）：

[JSFiddle 更新](http://jsfiddle.net/Dn6jx/289/)

```
$.fn.scrolltxt = function() {
    var options = $.extend({
        speed : 28
    }, arguments[0] || {});

    return this.each(function() {
        var el = $(this);

        if( el.find('span').width() > el.parent().width() ) {
            var scroll_text = setInterval(function() {
                scrollText();
            }, options.speed);
        };      

        var scrollText = function() {
            var width = el.find('span').width(),
                left = el.position().left - 1;
            left = -left > width ? el.width() : left;
            el.css({left: left});
        };
    });
};

$(function() {
    $('.current-track h1').scrolltxt();
}); 
```

# android - 动态创建项目的监听器

> ID：10554662
> 
> 赞同：2
> 
> 时间：2012-05-11T15:47:28.807
> 
> 标签：android, android-widget, remoteview

我有家庭 scrren 小部件，我在小部件内部生成一些项目（我有这个项目的布局）并在它们上设置一些侦听器。这很简单，就像这样：

```
RemoteViews currentItem1 = new RemoteViews(context.getPackageName(), R.layout.complex_list_item);
    updateViews.addView(R.id.panelNews, currentItem1);
    Intent intent1 = new Intent(context, ForexWidget.class);
    intent1.setAction(Constants.ACTION_PRESSED_ITEM);
    PendingIntent pendingIntent1 = PendingIntent.getBroadcast(context, 0, intent1, 0);
    updateViews.setOnClickPendingIntent(R.id.singleLine, pendingIntent1);

    RemoteViews currentItem2 = new RemoteViews(context.getPackageName(), R.layout.complex_list_item);
    updateViews.addView(R.id.panelNews, currentItem2);
    Intent intent2 = new Intent(context, ForexWidget.class);
    intent2.setAction(Constants.ACTION_PRESSED_ITEM);
    PendingIntent pendingIntent2 = PendingIntent.getBroadcast(context, 0, intent2, 0);
    updateViews.setOnClickPendingIntent(R.id.singleLine, pendingIntent2); 
```

项目被创建，添加到小部件中，看起来很棒，但是监听器没有按照我想要的方式工作 - 只有第一个按钮的第一个监听器工作，其他人没有。我想这是因为我为具有相同 id (R.id.singleLine) 的两个按钮注册了 setOnClickPendingIntent - 但最大的问题是，当它在远程视图内部时，我无法设置按钮的 id ...

有没有办法做这样的事情？多谢

编辑：这是我的布局项目，我正在尝试生成。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/singleLine"
    android:layout_width="fill_parent"
    android:layout_height="34dp"
    android:clickable="true"
    android:orientation="vertical" >

    <TextView
            android:id="@+id/txtTime"
            android:layout_width="45dp"
            android:layout_height="wrap_content"
            android:paddingRight="5dp"
            android:textSize="@dimen/fontNewsCompact" />

        <TextView
            android:id="@+id/txtCurrency"
            android:layout_width="30dp"
            android:layout_height="wrap_content"
            android:paddingRight="5dp"
            android:textSize="@dimen/fontNewsExtraCompact" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:53:17.340

问题是每个意图的动作必须不同，如果你不改变它，它只会采取第一个（或最后一个，取决于你的标志）。

我在类似情况下所做的是为操作提供一个额外的唯一标识符，例如：

```
intent1.setAction(Constants.ACTION_PRESSED_ITEM + "-1");
...
intent2.setAction(Constants.ACTION_PRESSED_ITEM + "-2"); 
```

然后在您的 ForexWidget 类上使用以下内容：

```
if (intent.getAction().startsWith(Constants.ACTION_PRESSED_ITEM) {

    // your logic here
} 
```

此外，要向具有相同 Id 的对象添加待处理的意图，您应该进入最深的范围，以便仅包含一个具有该 Id 的项目。这样，应按如下方式添加意图：

```
currentItem1.setOnClickPendingIntent(R.id.singleLine, pendingIntent1)
...
currentItem2.setOnClickPendingIntent(R.id.singleLine, pendingIntent2) 
```

这样你就在你的列表项布局的范围内

# jquery - 使用 .on() 提交 jquery 表单

> ID：10554665
> 
> 赞同：11
> 
> 时间：2012-05-11T15:47:42.393
> 
> 标签：jquery, forms

我正在尝试发送由 jquery 创建的表单。表单附加到一个 div 和下面的变量“数据”是使用 php 创建的，我将只发布最重要的 js 代码。

我尝试了很多有和没有'on（）'的事情，但我未能让警报框显示'1'，所以我知道代码块实际上已执行..tbh我不明白我做错了什么，任何解释将不胜感激。提前致谢！

```
$(".r5").click(function(event){
    var data='<select name="sForum"><option value="1">bla</option></select>';
    $(this).parent().next('div').html('<form class="moveform">'+data+'<input type="submit" name="submit" class="movethisform" value="Move Thread" /></form>');
});
$("form.moveform").on("submit",function(event){
    alert(1);
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T15:49:52.930

您在表单存在之前绑定到它。将事件绑定到文档，并将表单选择器传递给`.on`：

```
$(".r5").click(function(event){
    var data='<select name="sForum"><option value="1">bla</option></select>';
    $(this).parent().next('div').html('<form class="moveform">'+data+'<input type="submit" name="submit" class="movethisform" value="Move Thread" /></form>');
});
$(document).on("submit", "form.moveform", function(event){
    alert(1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:53:29.693

你有没有尝试过

```
$("inout.movethisform").on("click",function(event){
    alert(1);
    $("form.moveform").submit();
}); 
```

# iphone - 使用方形 setBackgroundImage 的带有圆角的 UIButton

> ID：10554667
> 
> 赞同：5
> 
> 时间：2012-05-11T15:47:44.110
> 
> 标签：iphone, ios

所以我创建了一个按钮。我希望它有圆角而不制作圆角 .png 文件我可以设置背景图像。我可以绕过角落。但是，当我设置背景图像时，圆角消失了。

我很久以前做过一次，但似乎无法让它再次工作。如何才能做到这一点？

```
UIButton *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
[button1 addTarget:self action:@selector(goSpecials)
  forControlEvents:UIControlEventTouchUpInside];
[button1 setTitle:@"Specials" forState:UIControlStateNormal];
button1.titleLabel.font = [UIFont fontWithName:@"Arial-BoldMT" size:(15.0)];
[button1 setTitleColor:[self colorWithHexString:buttonColor] forState:UIControlStateNormal];
button1.backgroundColor = [UIColor colorWithPatternImage: [UIImage imageNamed: @"button.png"]]; 
 //[button1 setBackgroundImage:[UIImage imageNamed:@"button.png"] forState:UIControlStateNormal];
button1.frame = CGRectMake(20.0, 232.0, 135.0, 32.0);
button1.layer.borderColor = [UIColor blackColor].CGColor;
button1.layer.borderWidth = 0.5f;
button1.layer.cornerRadius = 8.0f;
[self.view addSubview:button1]; 
```

按钮.png： ![在此处输入图像描述](../Images/1651d65d89a5139e955d12274a5f7453.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T15:56:55.157

将 maskToBounds 属性添加到您的按钮。

```
button1.layer.masksToBounds = YES; 
```

# c# - 将 html 转换为某种文档类型（可能是 .pdf？）

> ID：10554670
> 
> 赞同：0
> 
> 时间：2012-05-11T15:47:58.157
> 
> 标签：c#, asp.net-mvc, printing

我有一个 HTML“打印机友好版本”类型的页面，我想将其转换为文档样式的文件类型，这样我就不必担心禁用页面上的链接和其他东西。有没有一种相当简单的方法可以在不使用第三方库的情况下从页面的 html 创建类似的文件？

乍一看，这可能看起来像是一堆其他问题的重复，但大多数答案都涉及使用第三方软件，这对我来说不是一个选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:02:33.783

如果您谈论的是一个 asp.net 站点，那么您没有提供给浏览器的 HTML；您必须做任何您想做的事情来生成 PDF 并将其发送回浏览器。您不能让 ASP.NET 将 HTML 发送回浏览器*并*期望用户看到 PDF...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:59:04.477

我只是用 CSS 做的。抱歉，我必须接受这个作为答案，但发布的唯一答案并不是我真正想要的..

# php - 如何使用 php 解析提要

> ID：10554672
> 
> 赞同：0
> 
> 时间：2012-05-11T15:48:20.040
> 
> 标签：php, xml

使用 Wikiepdia API 链接获取一些世界知名人物的基本信息。

示例：（[关于 Dave Longaberger）](http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Dave%20Longaberger&format=xml&exintro=1)

这将显示如下

![关于 Dave Longaberger](../Images/8942d9ffed5263f7dd9c9ea8069cc0eb.png)

**现在我的问题** 是我想解析 xml 以获得这样的基本信息`<extract></extract>`来显示它。

这是我的想法但失败了（I/O 警告：未能加载外部实体）

```
<?PHP
$url = 'http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Dave Longaberger&format=xml&exintro=1';

$xml = simplexml_load_file($url);

// get extract
$text=$xml->pages[0]->extract;
// show title
echo $text;
?> 
```

另一个想法但也失败了（未能打开流：HTTP请求失败！）

```
<?PHP
function get_url_contents($url){
$crl = curl_init();
$timeout = 5;
curl_setopt ($crl, CURLOPT_URL,$url);
curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
$ret = curl_exec($crl);
curl_close($crl);
return $ret;
}

$url = "http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Dave Longaberger&format=xml&exintro=1";

$text = file_get_contents($url);
echo $text;
?> 
```

所以任何想法如何做到这一点。~ 谢谢

**更新**（添加 urlencode 或 rawurlencode 后仍然无法正常工作）

```
$name = "Dave Longaberger";
$name = urlencode($name);
$url = 'http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles='.$name.'&format=xml&exintro=1';
$text = file_get_contents($url); 
```

也不工作

```
$url = 'http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Dave Longaberger&format=xml&exintro=1';
$url = urlencode($url);
$text = file_get_contents($url); 
```

也不

```
$url = 'http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles='.rawurlencode('Dave Longaberger').'&format=xml&exintro=1';
$text = file_get_contents($url); 
```

好吧，所以我真的不知道这似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:02:46.573

在您的 curl 请求中设置用户代理标头，否则维基百科将回复错误 403 禁止。

```
<?PHP
$url = "http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Dave+Longaberger&format=xml&exintro=1";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");
$xml = curl_exec($ch);
curl_close($ch);

echo $xml;
?> 
```

或者：

```
ini_set("user_agent","Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");
$url = "http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Dave+Longaberger&format=xml&exintro=1";
$xml = simplexml_load_file($url);

$extracts = $xml->xpath("/api/query/pages/page/extract");

var_dump($extracts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:53:25.967

查看此 php 手册页 [http://php.net/manual/en/function.file-get-contents.php中的注释](http://php.net/manual/en/function.file-get-contents.php)

如果您要打开带有特殊字符（例如空格）的 URI，则需要使用 urlencode() 对 URI 进行编码。

# vba - 无法使用 VBA 脚本访问 Excel 中的单元格

> ID：10554675
> 
> 赞同：0
> 
> 时间：2012-05-11T15:48:24.347
> 
> 标签：vba, excel

我有一个脚本试图根据两个不同工作簿中 Excel 电子表格第一列中的标签号比较特定数据。当我尝试访问第一个工作簿时，它运行良好，我可以使用以下命令正确访问单元格中的数据：

```
s_WS_string = Workbooks(s_WS_Filename).Sheets(s_WS_SheetName).Range(s_WS_col & s_WS_row).Value 
```

其中`s_WS_col`和`s_WS_row`是 VBA 脚本中定义的字符串。此命令成功检索数据。然而，

```
OURS_string = Workbooks("OURS.xlsx").Sheets("Sheet1").Range(s_OURS_col & s_OURS_row).Value 
```

才不是。`s_OURS_col`并且`s_OURS_row`都是字符串。`WS`代表工作表，它是与静态工作表进行比较的变量工作`OURS.xlsx`表。

它们都是完全相同的命令，传递了完全相同类型的参数，但一个从单元格中检索数据，而另一个则没有。如果归根结底，我正在将其复制到另一个环境中以进行上传。

这两个字符串旨在相互比较，如果它们不匹配，则连接并输出到复制的工作表中。根据我的输出和我自己的调试，我发现它会在第一个电子表格上找到值，但在静态电子表格上`OURS.xlsx`，即使它访问包含完全相同数据的单元格，它也会保持为空，因此被认为不匹配。

有没有其他人看到这个问题？

编辑1：澄清了一些问题。

编辑 2：我知道必须打开两个工作簿才能以这种方式访问​​它们，并且我向您保证在脚本运行期间都打开了它们。

编辑 3：我已经逐步完成脚本，直到它传递参数以访问值。我已经检查了两个正在传递的单元格中的值，它们确实匹配，但是没有正确地从工作簿中拉出一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:31:22.750

至少有一个变量一定有问题。我用 2 个工作簿 Book1 和 Book2 重新创建了您的案例，并在每个工作簿的 Sheet1 的单元格 A1 中添加了一个值。代码运行良好。

```
Sub TestCellValueFromWBs()
    Dim s_WS_string, Ours_string As String
    s_WS_string = Workbooks("Book1").Sheets("Sheet1").Range("a1").Value
    MsgBox s_WS_string

    Ours_string = Workbooks("Book2").Sheets("Sheet1").Range("a1").Value
    MsgBox Ours_string
End Sub 
```

进入您的代码 (F8) 并检查变量的值并确保它们指向正确的对象。

# jquery - jsTree 节点显示在与展开图像不同的行上

> ID：10554679
> 
> 赞同：0
> 
> 时间：2012-05-11T15:48:37.833
> 
> 标签：jquery, jstree

我在我的页面中添加了一个 jsTree，即 jQuery 1.6.4：

```
 <div id="categoriesMenu" class="categoriesMenu"><!--  --></div>
    <script type="text/javascript">
        function convertCategoriesForMenu(categories) {
            var scrubbedData = [];
            $.each(categories, function(idx,category) {
                var scrubbedCat = {
                        "data" : category.name,
                        "metadata" : { id : category.id },
                        "children" : convertCategoriesForMenu(category.childCategories),
                        "attr" : { "href" : "${categories_base_url}"+category.id }
                };

                scrubbedData.push(scrubbedCat)
            });
            return scrubbedData;
        }

        $(function () {
            $("#categoriesMenu").jstree({ 
                "json_data" : {
                    "ajax" : {
                        "url" : "${categories_base_url}",
                        "success" : function (data) { 
                            return convertCategoriesForMenu(data);
                        }
                    }
                },
                "themes" : {
                    "theme" : "classic",
                    "dots" : false,
                    "icons" : false
                },
                "plugins" : [ "themes", "json_data" ]
            });
        });
    </script> 
```

但是，它将每一行显示为扩展图像，然后在新行（和灰色背景）上显示标题： ![混乱的菜单](../Images/f47e0d562ee62d98c7c1bf2d920ccb1c.png)

我似乎无法弄清楚为什么。从我的服务器返回的 JSON 数据前面似乎没有任何回车或换行，我在 JS 中放置了断点并确认浏览器解析 JSON 时，它似乎也没有任何回车或换行。

我尝试换掉主题，但这似乎没有任何效果。

**编辑 1** CSS 继承绝对是问题所在。看起来它正在为#menu 从 Roo 的 standard.css 样式中提取 display:block。问题是，需要这种样式，以便菜单内容最终位于左侧，这就是我使用 jsTree 的目的。

树的结构如下：

```
<ul> <!-- root of menu, display:block -->
    <li> <!-- Node element, display:block -->
        <ins />  <!-- image, display:inline -->
        <a>Node Name</a> <!-- text for node, display:inline -->
    </li>
</ul> 
```

如果我将树放在标签之外，它会按预期工作。但是，如果我把它放在里面，所有的元素都会被设置为 display:block。

所以，问题是：如何在 and 标签上应用 CSS 样式？

# android - FileInputStream.read 中的 IO 异常。安卓

> ID：10554680
> 
> 赞同：1
> 
> 时间：2012-05-11T15:48:40.337
> 
> 标签：android, ioexception, fileinputstream

我正在写一个Android的应用程序。两个活动，一个有 TextEdit 来输入“你好消息”，还有一个按钮来将消息保存在内部存储中。二是主要活动。你好消息应该在应用程序启动后出现。

第二个活动：

```
 String s = ((EditText) findViewById(R.id.message_act_editText_hello)).getText().toString();
    FileOutputStream fos = openFileOutput(Lab2AndroidActivity.FILENAME, Context.MODE_PRIVATE);
    fos.write(s.getBytes());
    fos.close(); 
```

第一个（主要）活动：

```
 static String FILENAME = "message_file.zip";
    FileOutputStream fos;
    try {
        //piece of code to guarantee that file exists
        fos = openFileOutput(Lab2AndroidActivity.FILENAME, Context.MODE_APPEND);
        fos.close();
    } catch (FileNotFoundException e1) {
        e1.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        fis = openFileInput(FILENAME);
        messageString = new StringBuffer("");
        while ((length = fis.read(buffer)) != -1) {
            String temp = new String(buffer, 0,length);
            messageString.append(temp);
            fis.close();
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    Toast t = Toast.makeText(this, messageString, 3000);
    t.show(); 
```

我在 logcat 中遇到 IO 异常：

```
 while ((length = fis.read(buffer)) != -1) 
```

但应用程序似乎工作正常（应用程序启动后出现定义的消息）。我试图找到解释，我找到了几个主题，但都是根据大文件，或资产中的文件，或压缩文件。我试图将我的文件命名为

```
static String FILENAME = "message_file.zip",
static String FILENAME = "message_file.txt", 
```

尝试不同的扩展，但我总是得到相同的 IO 异常。

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:29:45.670

当然你会得到一个 IO 异常你的文件没有退出并且你请求打开它你忘记了这段代码

```
File myFile = new File("/sdcard/mysdfile.txt"); 
```

在您的第一个活动中，您可以使用此代码

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */
    EditText txtData;
    Button btnWriteSDFile;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // bind GUI elements with local controls
    txtData = (EditText) findViewById(R.id.txtData);
    txtData.setHint("Enter some lines of data here...");

    btnWriteSDFile = (Button) findViewById(R.id.btnWriteSDFile);
    btnWriteSDFile.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // write on SD card file data in the text box
        try {
            File myFile = new File("/sdcard/mysdfile.txt");
            myFile.createNewFile();
            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter = 
                                    new OutputStreamWriter(fOut);
            myOutWriter.append(txtData.getText());
            myOutWriter.close();
            fOut.close();
            Toast.makeText(getBaseContext(),
                    "Done writing SD 'mysdfile.txt'",
                    Toast.LENGTH_SHORT).show();
            Intent i = new Intent(getApplicationContext(),SecondActivity.class);
            startActivity(i);
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();
        }
    }// onClick
    });
}
} 
```

在第二个中，您可以使用它：

```
public class SecondActivity extends Activity {

    private TextView txtData2;
     @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
        txtData2 = (TextView) findViewById(R.id.textView2);
        try {
            File myFile = new File("/sdcard/mysdfile.txt");
            FileInputStream fIn = new FileInputStream(myFile);
            BufferedReader myReader = new BufferedReader(
                    new InputStreamReader(fIn));
            String aDataRow = "";
            String aBuffer = "";
            while ((aDataRow = myReader.readLine()) != null) {
                aBuffer += aDataRow + "\n";
            }
            txtData2.setText(aBuffer);
            myReader.close();
            Toast.makeText(getBaseContext(),
                    "Done reading SD 'mysdfile.txt'",
                    Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();
        }
    }

} 
```

第一个 latout 使用包含编辑文本和按钮的线性布局

第二个只有一个文本视图的线性布局

试一试，如果你发现问题让我知道！

啊，我忘了你必须在清单中添加

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:23:39.560

我找到了理由。问题出在片段中：

```
while ((length = fis.read(buffer)) != -1) {
        String temp = new String(buffer, 0,length);
        messageString.append(temp);
        fis.close();
    } 
```

有什么问题？

```
fis.close(); 
```

应该在一段时间之后。昨天没注意。。。

# jquery - 从元素外部到内部的动画背景位置

> ID：10554681
> 
> 赞同：0
> 
> 时间：2012-05-11T15:48:40.370
> 
> 标签：jquery, html, background, jquery-animate

我在将背景图像从元素的 OUTSIDE 动画到 INSIDE 时遇到问题。

只要图像始终在元素的范围内，以下代码就可以在 Chrome 中运行：

```
<script type="text/javascript">
$(document).ready(function() {

    $('.title').css({backgroundPosition: '100% 100px'}).animate({
          'background-position-x': '100%',
          'background-position-y': '50%'
        }, 1000, 'linear');
});
</script>

<style type="text/css">
.title {
    width: 100%;
    height: 400px;
    background: rgba(0,0,0,0.6) url(https://www.google.co.uk/images/srpr/logo3w.png) no-repeat;
}
</style>

<div class="title"></div>​ 
```

...但是，如果图像在元素边界之外开始，它会跳跃并且无法按预期工作。

[这是一个 JSFIDDLE](http://jsfiddle.net/YHg9n/)

上面的代码在 FF 中根本不起作用，所以我想我的代码肯定有一些我没有发现的基本错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:52:21.613

您的问题是 Firefox 故意忽略`background-position-x`and `background-position-y`- 您必须`background-position`在您的代码中使用，但您不能`animate()`在这样的分组属性上使用。我能想到的唯一解决方案是使用两个相互堆叠的 DIV 元素。

# odbc - 带 ODBC 连接的 iSeries (AS400) 输出

> ID：10554683
> 
> 赞同：1
> 
> 时间：2012-05-11T15:48:42.113
> 
> 标签：odbc, ibm-midrange

我对 AS400 很陌生，我被卡住了。我已阅读文档，但找不到我需要的东西。我有一个到 AS400 服务器的 odbc 连接。当我运行这个命令时，我会得到一个包含我需要的一切的 Outfile：

```
CALL QSYS.QCMDEXC('DSPUSRPRF USRPRF(*ALL) OUTPUT(*OUTFILE) OUTFILE(CHHFLE/TEST3)', 0000000061.00000) 
```

我需要将此命令的结果接收到通过 odbc 连接的脚本，而不是将结果发送到 outfile。如果我将 'OUTPUT(*OUTFILE)' 更改为 'OUTPUT(*)' 我在尝试 'fetchall()' 时没有得到任何结果。有没有办法通过 odbc 连接到我的脚本来获取这些信息？

**编辑：**我在 linux 服务器上，在 python 脚本中使用 pyodbc 进行连接。我可以使用此连接成功运行 sql 查询，但我不知道如何将命令的结果作为某种记录集通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:29:55.230

我希望我能正确解释您的要求。看起来您正在访问用户配置文件数据并将其转储到文件中。看起来您想在脚本或在 Windows 上运行的东西中使用该文件的内容。如果是这样的话：

通常，当从 Windows 世界访问文件中的数据时，无论是通过 ODBC 和 VBScript 还是 .NET，AS/400 都被视为数据库。库中的所有文件都通过内置的 DB2 数据库公开。它是全自动的，并且是 Universal DB2 数据库的一部分。

因此，创建此文件后，您应该在库 CHHFLE 中有一个名为 TEST3 的文件

您将创建一个连接并执行以下 SQL 语句来读取内容：

```
Select * From CHHFLE.TEST3 
```

当然，这假设您有适当的权限来访问它。您应该能够使用 iSeries Navigator 工具对此进行测试，该工具包括在执行脚本之前针对数据库运行 SQL 脚本的能力。

*阅读以上评论后添加*

[这个问题](https://stackoverflow.com/questions/4452322/pyodbc-error-im002-connecting-to-db2)上有关于从 Python 连接到 DB2的信息。我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:06:44.463

`OUTPUT(*)`不幸的是，它不是标准输出。这意味着您将无法重定向`OUTPUT(*)`到 ODBC 连接。通过转储到 DB2 表`OUTPUT(*OUTFILE)`是一个不错的计划。完成后，使用标准游标/提取循环，就好像您正在处理任何其他 DB2 表一样。

# scala - 路径相关类型是类型投影吗？

> ID：10554686
> 
> 赞同：8
> 
> 时间：2012-05-11T15:48:52.997
> 
> 标签：scala, types, projection, path-dependent-type

我现在正在深入阅读 Scala。这是本书的摘录：

> 所有依赖于路径的类型都是类型投影。路径相关类型被编译器`foo.Bar`重写为...`foo.type#Bar`
> 
> 在 Scala 中，所有类型引用都可以编写为针对命名实体的项目。scala.String 类型是`scala.type#String`名称`scala`引用包`scala`的简写，类型由scala 包上`String`的类定义。`String`

显然，没有`scala.String`课程，但我未能用`Null`.

```
scala> type N = scala.type#Null
<console>:7: error: type mismatch;
 found   : type
 required: AnyRef
       type N = scala.type#Null 
```

所以，我的问题如下。路径相关类型是类型投影吗？它只是内部编译器表示还是可以用scala代码表示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T18:22:27.597

这是一个快速的 REPL 会话，它确认了 Josh 所写的内容，

```
scala> class Foo { type T = String }
defined class Foo

scala> val foo = new Foo
foo: Foo = Foo@10babe8

scala> implicitly[foo.type#T =:= foo.T]
res0: =:=[foo.T,foo.T] = <function1> 
```

您的`scala.type#Null`示例的问题在于前缀`scala`是包前缀，而不是值的稳定标识符。可以说它应该是后者，但不幸的是它不是……这是 Scala 包的语义和 Scala 对象（在模块的意义上）之间挥之不去的不匹配。

# javascript - 仅使用 highcharts 选项的 Highcharts 图例自定义 css 样式/格式

> ID：10554694
> 
> 赞同：1
> 
> 时间：2012-05-11T15:49:11.757
> 
> 标签：javascript, styles, highcharts, legend

我在 highcharts 对象的图例选项中尝试了很多组合，但是我无法成功实现设计师所做的确切设计。

我需要的是能够有一个看起来完全像这样的图例...... [想要的图例布局](http://twitpic.com/9jtn4q)

但是我使用可用的图例选项获得的最接近的结果是...... [我可以实现的最接近的图例布局](http://twitpic.com/9jtorm)

我在 highchart 对象定义中使用的属性是：

```
legend: {
    enabled: graphProperties.legend.enabled,
    backgroundColor: ...
    borderRadius: ...
    verticalAlign: ...
    align: ...
    borderWidth: ...
    x: ...
    y: ... } 
```

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T04:23:04.440

Maybe you can use this as a starting point.

[http://jsfiddle.net/DqAqu/4/](http://jsfiddle.net/DqAqu/4/)

```
$(function () {
    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container', 
            backgroundColor: '#F5F5F5', 
            plotBackgroundColor: '#FFFFFF'
        },

        symbols: [ 'square', 'square' ], 

        legend: {
            backgroundColor: '#F5F5F5',
            layout: 'horizontal',
            floating: true,
            align: 'left',
            verticalAlign: 'top',
            x: 60,
            y: 1,
            shadow: false, 
            border: 0, 
            borderRadius: 0, 
            borderWidth: 0
        },

        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4], 
            color: '#47D147'            
        }, {
            data: [95.6, 54.4, 29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1], 
            color: '#19A3FF'            
        }]
    });
});​ 
```

# matlab - 在 Matlab 中，如何更改绘图间隔？

> ID：10554695
> 
> 赞同：2
> 
> 时间：2012-05-11T15:49:12.877
> 
> 标签：matlab, plot, intervals, subplot

我一直在写一个 Matlab 函数，它读取一个文件并绘制它的 3D 图形，具有三个投影。

在提供的四个图形中，它绘制了所有数据，并根据这些数据点确定 x、y、z 区间。我想更改这些绘图间隔，但我不知道该怎么做。

看这个图： ![在此处输入图像描述](../Images/b58acb92537957f31e80fb9b73eb6db5.png)

在这种情况下，我的问题是在第 4 张图像（zy 平面）上，我想查看区间 [1...0] 中的 y 点，而不是查看区间 [1...0.4] 中的 y 点。

这是我在四个图像中的第四个图像上的绘图代码：

```
 subplot(2,2,4) 
  plot3(FNrate, FPrate, tau);
  view(-90,0); % we rotates the figure from standard to -90° (270°);
  title('zy plane'); 
  xlabel('x = FP (AP) rate'), ylabel('y = FN (AR) rate'), zlabel('z = tau'), grid on 
```

我怎么能这样做？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:51:56.283

```
ylim([0 1]) 
```

[应该做的伎俩，在这里](http://www.mathworks.nl/help/techdoc/ref/ylim.html)查找文档

# c# - 如何设置颠覆以使用多个 Visual Studio 解决方案中的一个项目的更新

> ID：10554696
> 
> 赞同：0
> 
> 时间：2012-05-11T15:49:13.813
> 
> 标签：c#, visual-studio, svn

我想创建我想在多个解决方案中使用的 ac# 项目。所有这些解决方案都受版本控制（subverion）。

有没有办法设置这个项目，以便我可以将它放在存储库中的一个文件夹中，所有不同解决方案（也受版本控制）的所有更改都将提交到该文件夹​​中？

我的目标是，无论我们团队中的任何人在哪个解决方案中对此项目进行更改，所有其他解决方案/项目都会得到更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:52:40.100

好吧，它已经以这种方式工作了。

当您将项目添加到 中的解决方案时`VisualStudio`，您会添加指向该项目的*链接*，而不是创建副本。

换句话说，如果您有：

```
SolutionA -> ProjectA, ProjectB, ProjectZ
SolutionB -> ProjectX, ProjectB, ProjectY 
```

每当您进行一些更改`ProjectB`（在这两个解决方案之间共享）时，这些更改对于两个解决方案都是“可见的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:51:18.653

你应该做的是：

1 - 对此 C# 项目有一个单独的 repo。[2 - 使用svn:externals](http://svnbook.red-bean.com/en/1.0/ch07s03.html)
将其包含在您的其他项目中。

然后，您可以从正在使用它的任何项目提交对 C# 项目的更改，并且下次任何其他项目进行 SVN 更新时，它们将获得最新的提交。

# python - 网络摄像头无法在 Ubuntu 12.04 上使用 Python 接口连接到 OpenCV 2.4

> ID：10554699
> 
> 赞同：2
> 
> 时间：2012-05-11T15:49:30.523
> 
> 标签：python, ubuntu, opencv, webcam

昨天我在一个全新的 HD 上安装了 Ubuntu 12.04，运行了所有更新（`sudo apt-get updates && sudo apt-get upgrade`），从 apt（）安装了一堆东西`sudo apt-get install git libsdl1.2-dev python-dev python-setuptools python-numpy python-scipy python-nose ipython python-pygame libcv-dev python-opencv`，然后从源代码安装了 openCV 2.4（按照[此处](http://shambool.com/2012/05/05/install-opencv-24-on-ubuntu-1204/)的说明）。但是，当我尝试使用 python 接口从网络摄像头捕获图像时（我已经尝试过罗技的 c910 和 c920 型号），结果是“无”：

```
>>> import cv
>>> webcam_stream = cv.CaptureFromCAM(0) #I've also tried cv.CaptureFromCAM(-1) with the same results
>>> this_image = cv.QueryFrame(webcam_stream)
>>> print(this_image)
None 
```

任何想法为什么这会失败？Ubuntu 软件中心提供的网络摄像头应用程序（如 Cheese）似乎可以很好地从摄像头中获取图像，所以我很困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:01:59.537

今天有完全相同的问题，不知道为什么网络摄像头停止与 openCV 一起工作，为了修复它，我进入了我的 OpenCV 源构建目录并运行了 sudo make install 它有效 - 带有安装方法的链接的答案毫无意义且具有误导性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:50:34.760

您需要安装`v4l-utils`才能设置网络摄像头。这是有关从源代码安装 OpenCV 2.4 的详细分步信息。[http://jayrambhia.com/blog/install-opencv-2-4-in-ubuntu-12-04-precise-pangolin/](http://jayrambhia.com/blog/install-opencv-2-4-in-ubuntu-12-04-precise-pangolin/)

# php - 弹出页面php数据在提交时不显示

> ID：10554707
> 
> 赞同：0
> 
> 时间：2012-05-11T15:50:44.250
> 
> 标签：php, javascript, html

我有一个表有从中提取的 php 变量`mysql`，表在里面`Form`，我想做的是显示要为用户打印的具有发票样式布局的页面，我试图做出一个行为，当`FORM`提交，弹出页面会显示`php variables data`，这根本不起作用，我尝试在常规页面中显示`content`弹出页面，它起作用了！，这意味着我的 php 代码没有问题。

这是表单页面代码：

```
<form action="../../printInvoice.php" method="post" onsubmit="MM_openBrWindow('../../printInvoice.php','Invoice','status=yes,scrollbars=yes')">
<table width="100%" border="0">
<tr>
    <td align="left">Invoice:</td>
  </tr>
  <tr>
    <td width="12%" height="39" bgcolor="#9DE3FB" align="center">Invoice Number</td>
    <td width="12%" bgcolor="#9DE3FB" align="center">Event Name</td>
    <td width="12%" bgcolor="#9DE3FB" align="center">Reservation Date</td>
    <td width="12%" bgcolor="#9DE3FB" align="center">Quantity</td>
    <td width="12%" bgcolor="#9DE3FB" align="center">Price Per Ticket</td>
    <td width="12%" bgcolor="#9DE3FB" align="center">Total Price</td>
  </tr>
  <tr>
    <td width="12%" height="39" align="center"><input type="text" name="invoiceId" readonly="readonly" value="<? echo $row['invoiceId']; ?>" class ="field-style"/></td>
    <td width="12%" height="39" align="center"><input type="text" name="eventTitle" readonly="readonly" value="<? echo $row['name']; ?>" class="field-style" /></td>
    <td width="12%" height="39" align="center"><input type="text" name="invoiceDate" readonly="readonly" value="<? echo $row['invoiceDate']; ?>" class="field-style" /></td>
    <td width="12%" height="39" align="center"><input type="text" name="invoiceqty" readonly="readonly" value="<? echo $row['quantity'] ?>" class="field-style" /></td>
    <td width="12%" height="39" align="center"><input type="text" name="invoicePPU" readonly="readonly" value="<? echo $row['price']; ?>" class="field-style" /></td>
    <td width="12%" height="39" align="center"><input type="text" name="invoiceTotal" readonly="readonly" value="<? echo $row['totalPrice']; ?>" class="field-style" /></td>
  </tr>
</table>
<br />
<input type="submit" value="Print Invoice" />
</form> 
```

这是弹出窗口代码（要打印的发票布局）：

```
<table width="65%" border="1" cellspacing="5" cellpadding="5">
  <tr>
    <td colspan="5"><table width="100%" border="0" cellspacing="5" cellpadding="5">
      <tr>
        <td width="60%"><img src="images/Logo.png" /></td>
        <td width="40%"><p>Invoice No:# <? echo $invoiceId; ?></p>
          <p>Invoice Date: <? echo $invoiceDate ;?> </p></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td height="125" colspan="5" valign="top"><p>Bill To:</p>
    <p>Name:</p>
    <p>Address:</p></td>
  </tr>
  <tr>
    <td width="12%" align="center" height="40">Item Id</td>
    <td width="28%" align="center">Item Disc</td>
    <td width="9%" align="center">QTY</td>
    <td width="40%" align="center">Price Per Unit</td>
    <td width="11%" align="center">Total</td>
  </tr>
  <tr>
    <td align="center" valign="middle">1</td>
    <td align="center" valign="middle"><? echo $eventTitle . " ticket(s)"; ?></td>
    <td align="center" valign="middle"><? echo $invoiceqty ; ?></td>
    <td align="center" valign="middle"><? echo $invoicePPU ; ?></td>
    <td align="center" valign="middle"><? echo $invoiceqty * $invoicePPU ; ?></td>
</tr>
 </table> 
```

对于提交行为，我使用了 Dreamweaver 行为面板。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:56:31.997

你不能使用 php 来显示一个弹出窗口，你必须使用 ajax 和 javascript：

[http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)

```
 $(document).ready(function() { 
        // bind 'myForm' and provide a simple callback function 
        $('#myForm').ajaxForm(function() { 
           //show your Popup
        }); 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:59:49.857

> 您是否尝试过在弹出窗口中使用`$row['invoiceId'];`instaed `$invoiceId`？
> 
> 它似乎是同一个文件，因此 $row[] 数据应该可以访问！
> 
> 如果这不起作用，我们可能需要更多代码，尤其是 php 方面的代码。

^^ 忽略了一些东西，我们肯定需要更多的代码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:02:39.117

我不确定 Dreamweaver 的行为，但据我所知，这永远不会奏效。

您正在将数据发布到“../../printInvoice.php”，但是当您请求弹出页面时，您正在打开一个尚未收到发布数据的新实例。

您需要更改弹出页面的 javascript，以便在执行弹出请求时发布表单数据。

我不知道您使用哪个库来创建弹出窗口，但 fancybox（Jquery 插件： http: [//fancybox.net](http://fancybox.net)）允许您将数据发布到它创建的弹出窗口。

如果您能告诉我您正在使用哪个弹出库，我可能会提供进一步的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T16:11:31.400

谢谢，而不是所有这些，我将所有变量作为`url`参数发布，例如：

```
<onsubmit="MM_openBrWindow('../../printInvoice.php?invoiceId=<? echo $row['invoiceId']; ?>&eventTitle=<? echo $row['name']; ?>','Invoice' 
```

感谢大家的尝试和时间:)

# msmq - MSMQ 读取在 .Net 中的高负载期间失败

> ID：10554708
> 
> 赞同：1
> 
> 时间：2012-05-11T15:50:44.780
> 
> 标签：msmq

我在 msmq 上发送和接收消息。它在低负载下工作正常，但是一旦我将它泵送到每分钟 100 条消息，几分钟后我就会尝试读取队列：

```
System.Exception: Stream was not readable.
    at System.IO.BinaryReader..ctor(Stream input, Encoding encoding)
    at System.IO.BinaryReader..ctor(Stream input) 
```

关于如何解决此类问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T17:02:15.493

每分钟 100 条消息对于 MSMQ 来说是微不足道的……你 100% 确定异常不是来自其他地方吗？更多代码会有所帮助。你到底是如何从队列中读取的？您是从同一个进程或线程写入它吗？

# javascript - 在 iframe 中收到代码以运行函数的问题

> ID：10554709
> 
> 赞同：1
> 
> 时间：2012-05-11T15:50:45.297
> 
> 标签：javascript

![在此处输入图像描述](../Images/1f8effedd13676d5ebd922a05784c0b4.png)

`iframe`为了运行在主窗口中调用的函数，已收到此代码，`uploadingData(x,y)`但如您所见，存在问题。我不明白什么是错的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:59:43.977

IFrame 中的页面与主页面（页面）是分开的`parent`。因此，要从 IFrame 中调用主页上的代码，您必须从 IFrame 的父级获取函数，正如 Diodeus 指出的那样。看起来像这样：

```
window.parent.uploadingData(x,y); 
```

# validation - Struts - 将表单字段绑定到 bean

> ID：10554713
> 
> 赞同：0
> 
> 时间：2012-05-11T15:51:23.237
> 
> 标签：validation, struts, request

假设我的部署描述符中有几个过滤器，并且对应用程序的每个请求都必须通过这些过滤器。有一个附有formbean的表单。一旦我填写表单并点击提交，表单中的html参数什么时候绑定到表单bean？在请求通过过滤器之前还是在通过过滤器之后？

我问的原因是.. 我有一个包含 20 个字段的表格。单击提交后，17 个值被正确绑定到 bean，但团队请求到达验证方法缺少 3 个值。我对缺失值的地方一无所知。我试图在 validate 方法中打印所有请求参数的枚举，这三个字段在请求对象中。AFAIK，这三个元素名称没有问题，因为该应用程序在我的本地 IDE 中完美运行，但在测试环境中停止，这使得查明问题变得更加困难:(。

# makefile - 从命令行传递变量？

> ID：10554716
> 
> 赞同：1
> 
> 时间：2012-05-11T15:51:40.383
> 
> 标签：makefile

全部，

我正在尝试从命令行传递要 make 的变量。我的命令在下面

```
make ARCH=arm CROSS_COMPILE=/my_dir/bin/arm-openwrt-linux-g++ 
```

我收到的错误是

```
g++: error: arm: No such file or directory 
```

但是文件“arm-openwrt-linux-g++”确实存在。

我认为问题是我需要将变量传递给子制作文件。可以提供一些有关如何从命令行将变量传递给子生成文件的示例的帮助。我尝试使用 make 的 -e 和导出选项，但看不到任何工作。

谢谢

生成文件的内容：

```
# GNU Make solution makefile autogenerated by Premake
# Type "make help" for usage help

ifndef config
config=debug
endif
export config

    PROJECTS := json openjaus

.PHONY: all clean help $(PROJECTS)

all: $(PROJECTS)

json: 
@echo "==== Building json ($(config)) ===="
@${MAKE} --no-print-directory -C .build -f json.make

openjaus: json
    @echo "==== Building openjaus ($(config)) ===="
    @${MAKE} --no-print-directory -C .build -f openjaus.make 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:42:11.823

这是我认为需要发生的事情：

您需要确保您的子 makefile 确实尊重`$(ARCH)`和`$(CROSS_COMPILE)`变量。它们也是由 Premake 生成的吗？如果是这样，那是它处理交叉编译的方式吗？检查文档。

在我的测试（如下）中，我发现在命令行上设置的变量会传播到子制作中，这让我认为您的子制作文件不尊重`$(ARCH)`：

生成文件：

```
a:
        $(MAKE) -C z 
```

z/生成文件：

```
a:
        @echo "MAKE=$(MAKE)"
        @echo "ARCH=$(ARCH)" 
```

`make`不带参数运行：

```
$ make
make -C z
make[1]: Entering directory `/home/foo/test/z'
MAKE=make
ARCH=
make[1]: Leaving directory `/home/foo/test/z' 
```

运行`make ARCH=bar`：

```
$ make ARCH=bar
make -C z
make[1]: Entering directory `/home/foo/z/z'
MAKE=make
ARCH=bar
make[1]: Leaving directory `/home/foo/z/z' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T22:47:32.870

因此，您的问题与通过命令行发送变量无关。

您的问题是，在您未向我们展示的子目录中的一个生成文件中，您以不正确的方式使用变量 $(ARCH) 使得命令行的扩展不是合法`g++`命令线。

根据错误消息，您很可能在不应该在的地方添加了一个空格，而不是像`-fmarch=arm`您得到`-fmarch= arm`. 显然这只是一个示例，因为您没有提供几乎足够的信息。

另一个注意事项：我们不知道你的 makefile 是如何工作的，但通常支持像 CROSS_COMPILE 这样的变量的 makefile 期望它被设置为交叉编译命令的前缀；在你的情况下，它会是`CROSS_COMPILE=/my_dir/bin/arm-openwrt-linux-`。但是，您的 makefile 可能会有所不同。

提问时，最好不要立即猜测答案是什么。首先描述问题，包括显示错误行*以及*它之前的几行。例如，在这种情况下，您会收到一个错误，`g++`因此打印出来的命令行会向您展示它是如何调用的，这`g++`将有很大帮助。

一旦你给出了基本的细节，那么如果你认为你对问题所在有一个想法，请继续提出建议，和/或询问它。

如果您提供调用的规则`g++`和/或 make 显示`g++`命令行的输出，那么我们可以提供更多帮助。

干杯!

# windows - 如何使 Flash 屏幕键盘与 windows 一起工作？

> ID：10554717
> 
> 赞同：0
> 
> 时间：2012-05-11T15:51:43.483
> 
> 标签：windows, actionscript-3, flash, windows-7, flash-cs5

我知道 flash 我正在制作 (SWF)Flash 虚拟屏幕键盘，我想以与使用 windows 屏幕键盘相同的方式使用它。但我不知道如何走出 Flash 环境的范围并与 Windows 屏幕键盘 (osk.exe) 等系统元素进行交互。如果有人知道我如何使这成为可能，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:04:00.393

我很确定有一个文件扩展名允许您覆盖系统 EXE，我认为它可能被称为`mod`，因此将文件另存为`OSK.exe`并将其重命名为并将其`OSK.mod`复制到与系统版本相同的文件夹中，它应该覆盖它，这可能是错误的，因为我已经有一段时间没有进行 Windows 编程了。

您可以随时修改注册表，例如： http: [//geekswithblogs.net/ssimakov/archive/2005/03/22/26930.aspx](http://geekswithblogs.net/ssimakov/archive/2005/03/22/26930.aspx)

# maven-2 - 如何在 GlassFish 3.1.2 中使用 Atmosphere 框架？

> ID：10554720
> 
> 赞同：0
> 
> 时间：2012-05-11T15:52:12.303
> 
> 标签：maven-2, glassfish-3, tomcat7, netbeans-7, atmosphere

我只是尝试[Atmosphere 框架](https://github.com/Atmosphere/atmosphere)。我让[聊天示例](https://github.com/Atmosphere/atmosphere/tree/master/samples/chat)在 Tomcat 7.0.27 中运行，但是当我想用 GlassFish 3.1.2 运行它时，我只收到消息：

> “org.apache.catalina.LifecycleException：java.lang.NoClassDefFoundError：org/apache/catalina/comet/CometProcessor”。

我究竟做错了什么？我使用来自 NetBeans IDE 7.1.2 的内置 GlassFish。

亲切的问候，

本尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:11:54.383

**行。我找到了解决方案！**在 NetBeans 中，您必须单击“工具”-“服务器”-“GlassFish”中的“启用 Comet 支持”：

![在 GlassFish 中启用 Comet 支持](../Images/4eafa0e516c6424ff614c202255dbe4c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T15:31:04.293

[您是否有与此问题](https://stackoverflow.com/questions/10667058/atmosphere-cant-get-session-on-glassfish-3-1-2)类似的异常堆栈跟踪 ？如果您的回答是肯定的，那么您将面临 glassfish 的 grizzly-websockets.jar 模块中的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T01:27:10.930

我确定这个答案为时已晚，但对于其他任何人来说，问题是缺少卡塔琳娜大气罐。这些可以从大气项目或 Tomcat 中获得。只要确保获得正确的版本。在撰写本文时，这些 jar 包是大气兼容-tomcat7-1.0.2.jar 和大气兼容-tomcat-1.0.2.jar。

# android - Android & Proguard - 如何混淆，但不优化任何代码？

> ID：10554721
> 
> 赞同：11
> 
> 时间：2012-05-11T15:52:18.743
> 
> 标签：android, proguard

我想使用 Proguard 来混淆应用程序的代码。我不需要优化，也不需要 Proguard 去除任何类或方法。我想要的只是混淆。该应用程序使用了几个库项目。

我一直把头撞在墙上试图让它发生，但它没有按照我想要的方式工作。我在执行时看到应用程序中抛出了 NoSuchMethodExceptions，即使我认为我已经关闭了 Proguard 的缩小选项。

让 Proguard 只是混淆而不优化任何代码的神奇设置是什么？

更新。我已经通过反复试验确认是混淆过程（不是优化或缩小）导致了 NoSuchMethodExceptions。

Proguard.cfg

```
-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*
-dontshrink
-keep public class * extends Object
-keep class com.myapp.** { *; }
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class com.myapp.activity.Splash
-keep public class com.myapp.alarm.AlarmsViewer
-keep public class com.myapp.activity.About
-keep public class com.myapp.activity.Base
-keep public class com.myapp.activity.BaseWithMenu
-keep public class com.myapp.alarm.Alarm
-keep public class com.myapp.alarm.AlarmFragment
-keep public class com.myapp.alarm.AlarmPagerAdapter
-keep public class com.myapp.alarm.AlarmStore
-keep public class com.myapp.app.App
-keep public class com.myapp.preferences.Preferences
-keep public class com.myapp.preferences.PreferencesStore

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

-keepattributes *Annotation*

-keep public interface com.android.vending.licensing.ILicensingService

-dontwarn android.support.** 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T16:14:56.527

不久前我遇到了类似的问题，并通过蛮力和运气为我解决了它。我的 proguard.cfg 类似，但我有以下几行：

```
-dontshrink
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/* 
```

我不记得我从哪里得到这些优化选项的想法，但它们似乎对我有用。

总有一个全能开关

```
-dontoptimize 
```

（指定不优化输入类文件。默认情况下，启用优化；所有方法都在字节码级别进行优化。）

这可能更合适。

最后，我有只在 xml 文件（单击处理程序）中引用的方法，这些文件需要显式保存

```
-keepclassmembers class * extends android.app.Activity {
    public void myClickHandler(android.view.View );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-16T15:49:02.323

```
**#Retrofit**
-keep class retrofit.** { ; }

-keepattributes Signature

-keepattributes Exceptions

-keepclasseswithmembers class * {
@retrofit2.http. ;
}

-keepclasseswithmembers interface * {
@retrofit2.http.* ;
}

-dontwarn javax.annotation.Nullable

-dontwarn javax.annotation.ParametersAreNonnullByDefault

-dontobfuscate  - only in debug mode production mode dont use this

-dontoptimize

-dontshrink

Please use in this lines Dexguard-project.txt file. that's all. Enjoy your coding... 
```

# php - 连接 Actionscript 3.0 和 PHP？

> ID：10554723
> 
> 赞同：1
> 
> 时间：2012-05-11T15:52:20.193
> 
> 标签：php, actionscript-3

我使用 Actionscript 创建了这个拖放应用程序，并希望将变量从这里发送到 MySQL 数据库。但在此之前，我打算将变量存储为会话变量。

我不太确定如何去做，也没有在网上找到任何相关的东西。有人可以告诉我 PHP 和 Actionscript 端代码的样子吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:58:32.530

这里没有人会为您编写所有这些代码。

简单的阶段是这样的；每个服务都有一个 PHP 文件（可能称为“writeVariable”，另一个称为“readVariable”）。决定以某种方式在它们之间传递信息 - 可能使用 JSON 或 XML，或者只是纯文本。然后，服务将根据需要从数据库中写入和读取数据。

然后通过 URLLoader 和您设置的协议从 flash 访问这些页面。

# javascript - 如果在弹出窗口中打开页面，如何隐藏元素

> ID：10554729
> 
> 赞同：1
> 
> 时间：2012-05-11T15:53:00.953
> 
> 标签：javascript, jquery, css

jQuery

```
$('a.popup').click(function(){
    window.open( this.href, 'Page title', 'width=600, height=650' );
    return false;
}); 
```

HTML

```
<a class="popup" href="sample.html"> 
```

`sample.html`如果我的页面在弹出窗口中打开，我想隐藏页眉和页脚。`<html>`我可以在弹出窗口中添加类名`<body>`吗？这样我就可以添加 CSS 规则。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:57:54.453

从`sample.html`该`<head>`部分只检查是否`window.opener`存在，例如

```
<script>
   if (window.opener) {
      /* i'm a popup, add "popup" class to <html> element */
      document.documentElement.className += " popup";
   }
</script> 
```

然后您可以使用 class 设置自己的 CSS 样式`.popup`，例如

```
header { display: block; }
.popup header { display: none; } 
```

# xamarin.ios - CgRectGetWidth 单点触控

> ID：10554730
> 
> 赞同：3
> 
> 时间：2012-05-11T15:53:04.207
> 
> 标签：xamarin.ios, cgrect

```
floorf(CGRectGetMinX(visibleBounds) / CGRectGetWidth(visibleBounds)); 
```

什么是方法`CGrectGetWidth`和 CGrectGetMinX 的 monotouch 版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T16:50:58.053

# 更新 Xamarin.iOS 统一 API

Xamarin.iOS 引入了[统一](https://developer.xamarin.com/guides/cross-platform/macios/unified/)A​​PI，它现在`CGRect`在命名空间中包含和朋友`CoreGraphics`。

* * *

`CGRect`映射到`System.Drawing.RectangleF`（[请参阅类型映射](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Type_mappings)）

所以如果你有自己的`System.Drawing.RectangleF`

代码看起来像

```
RectangleF visibleBounds = new RectangleF(0, 0, 10, 10); // Or your own instance of visibleBounds           
float minx = visibleBounds.GetMinX();
float w = visibleBounds.Width; 
```

希望有帮助

亚历克斯

# php - 尝试在 Yii 中创建一个新应用程序：env: php: No such file or directory

> ID：10554734
> 
> 赞同：2
> 
> 时间：2012-05-11T15:53:17.467
> 
> 标签：php, yii

我正在尝试从终端创建一个新的 yii 应用程序。我的 YiiRoot 文件夹在我的 htdoc 文件夹中。我首先进入我的webroot：

```
$ cd /Applications/MAMP/htdocs 
```

然后我将进入 yiic 并尝试创建一个新应用程序：

```
/Applications/MAMP/htdocs/YiiRoot/framework/yiic webapp demo 
```

然后我收到这条消息：

```
env: php: No such file or directory 
```

我也试过：

```
cd /Applications/MAMP/htdocs/YiiRoot/framework
yiic webapp /Applications/MAMP/htdocs
-bash: yiic: command not found 
```

和：

```
cd /Applications/MAMP/htdocs/YiiRoot/framework 
./yiic webapp /Applications/MAMP/htdocs
 No such file or directory 
```

和：

```
 cd /Applications/MAMP/htdocs/YiiRoot/framework 
 php yiic webapp /Applications/MAMP/htdocs
 -bash: php: command not found 
```

和：

```
 cd /Applications/MAMP/htdocs/YiiRoot/framework 
 php yiic.php webapp /Applications/MAMP/htdocs
 -bash: php: command not found 
```

我完全没有想法。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:52:54.537

事实证明，我的特殊问题是 php 以某种方式从我的系统中删除。当我输入`find /usr -name php`终端时，没有任何迹象表明该`/bin/php`文件存在。所以我问了另一个关于stackoverflow的问题，试图解决我的php命令行问题。所以这个问题的答案实际上就是这个问题的答案，可以在[这里找到。](https://stackoverflow.com/questions/10557650/how-can-i-get-php-working-again-in-the-command-line)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:17:40.933

您必须`php-cli`为您的 disro 安装软件包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T17:55:03.837

这很常见。您需要编辑 Yiic.bat 文件，该文件位于文件夹 yii/framwork 中。在那里你会找到这条线

> PHP_COMMAND

它的预定义值通常只是“php.exe”。将该值更改为 php.exe 文件的实际地址。假设您安装了 MAMP，您可以在 mamp/php/ 文件夹中找到 php.exe 文件，因此 PHP_COMMAND 的值将是：

根：/address_to_mamp/mamp/php/php.exe

# zend-framework - Zend 框架的数据网格

> ID：10554735
> 
> 赞同：0
> 
> 时间：2012-05-11T15:53:18.460
> 
> 标签：zend-framework, datagrid

伙计们

你能在 zd 框架中建议好的数据网格，除了 zdgrid。我试图使用 Dojo。没有结果他们都没有工作。

作为 zend 框架开发人员，在功能和实现方面哪个是最佳选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:54:43.450

与 ZF 的关系较少，更多的是与您更了解哪个 java-script 库有关。如果您擅长 jquery，那么我不建议[您使用 jqGrid](http://www.trirand.com/blog/jqgrid/jqgrid.html)。它具有强大的功能，可以轻松地在客户端和服务器端轻松实现。

# r - 用上面行中的值填充数据框

> ID：10554741
> 
> 赞同：19
> 
> 时间：2012-05-11T15:53:33.250
> 
> 标签：r, dataframe

假设我有一个这样的数据框：

```
ID,  ID_2, FIRST, VALUE
-----------------------
'a', 'aa', TRUE, 2
'a', 'ab', FALSE, NA
'a', 'ac', FALSE, NA
'b', 'aa', TRUE, 5
'b', 'ab', FALSE, NA 
```

因此，每个 ID 只为 FIRST = TRUE 设置一次 VALUE。ID_2 可能在 ID 之间重复，但不是必须的。

如何将每个 ID 的第一行中的数字放入该 ID 的所有行中，使 VALUE 列变为 2、2、2、5、5？

我知道我可以简单地使用 for 循环遍历所有 ID，但我正在寻找一种更有效的方法。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-09-12T07:51:06.773

与循环相比，该问题要求效率。以下是四种解决方案的比较：

1.  `zoo::na.locf`，它引入了包依赖关系，尽管它处理了许多边缘情况，但要求“空白”值为 NA。其他解决方案很容易适应非 NA 空白。

2.  基础 R 中的一个简单循环。

3.  基数 R 中的递归函数。

4.  我自己在基础 R 中的矢量化解决方案。

5.  0.3.0 版中的新`fill()`功能`tidyr`，适用于 data.frames。

请注意，这些解决方案中的大多数都是针对向量，而不是数据帧，因此它们不检查任何 ID 列。如果数据框未按 ID 分组，要填写的值位于每个组的顶部，那么您可以尝试在`dplyr`或`data.table`

```
# A popular solution
f1 <- zoo::na.locf

# A loop, adapted from https://stat.ethz.ch/pipermail/r-help/2008-July/169199.html
f2 <- function(x) {
  for(i in seq_along(x)[-1]) if(is.na(x[i])) x[i] <- x[i-1]
  x
}

# Recursion, also from https://stat.ethz.ch/pipermail/r-help/2008-July/169199.html
f3 <- function(z) { 
  y <- c(NA, head(z, -1))
  z <- ifelse(is.na(z), y, z)
  if (any(is.na(z))) Recall(z) else z }

# My own effort
f4 <- function(x, blank = is.na) {
  # Find the values
  if (is.function(blank)) {
    isnotblank <- !blank(x)
  } else {
    isnotblank <- x != blank
  }
  # Fill down
  x[which(isnotblank)][cumsum(isnotblank)]
}

# fill() from the `tidyr` version 0.3.0
library(tidyr)
f5 <- function(y) {
  fill(y, column)
}
# Test data, 2600 values, ~58% blanks
x <- rep(LETTERS, 100)
set.seed(2015-09-12)
x[sample(1:2600, 1500)] <- NA
x <- c("A", x) # Ensure the first element is not blank
y <- data.frame(column = x, stringsAsFactors = FALSE) # data.frame version of x for tidyr

# Check that they all work (they do)
identical(f1(x), f2(x))
identical(f1(x), f3(x))
identical(f1(x), f4(x))
identical(f1(x), f5(y)$column)

library(microbenchmark)
microbenchmark(f1(x), f2(x), f3(x), f4(x), f5(y)) 
```

结果：

```
Unit: microseconds
  expr      min        lq       mean    median        uq       max neval
 f1(x)  422.762  466.6355  508.57284  505.6760  527.2540   837.626   100
 f2(x) 2118.914 2206.7370 2501.04597 2312.8000 2497.2285  5377.018   100
 f3(x) 7800.509 7832.0130 8127.06761 7882.7010 8395.3725 14128.107   100
 f4(x)   52.841   58.7645   63.98657   62.1410   65.2655   104.886   100
 f5(y)  183.494  225.9380  305.21337  331.0035  350.4040   529.064   100 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-11T16:01:55.660

如果您只需要结转 VALUE 列中的值，那么我认为您可以使用**zoo**包中的`na.lofc()`函数。这是一个例子：

 **```
a<-c(1,NA,NA,2,NA)
na.locf(a)
[1] 1 1 1 2 2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T16:03:19.730

如果特定 ID 的 VALUE 始终出现在第一条记录中，您的数据似乎就是这种情况，您可以使用它`match`来查找该记录：

```
df <- read.csv(textConnection("

ID,  ID_2, FIRST, VALUE
'a', 'aa', TRUE, 2
'a', 'ab', FALSE, NA
'a', 'ac', FALSE, NA
'b', 'aa', TRUE, 5
'b', 'ab', FALSE, NA

"))

df$VALUE <- df$VALUE[match(df$ID, df$ID)]
df
#    ID  ID_2  FIRST VALUE
# 1 'a'  'aa'   TRUE     2
# 2 'a'  'ab'  FALSE     2
# 3 'a'  'ac'  FALSE     2
# 4 'b'  'aa'   TRUE     5
# 5 'b'  'ab'  FALSE     5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-26T10:06:42.430

+1 @nacnudus 处理前导空白

```
f4 <- function(x, blank = is.na) {

  # Find the values
  if (is.function(blank)) {
    isnotblank <- !blank(x)
  } else {
    isnotblank <- x != blank
  }

  # Fill down
  xfill <- cumsum(isnotblank) 
  xfill[ xfill == 0 ] <- NA

  # Replace Blanks
  xnew <- x[ which(isnotblank) ][ xfill ]
  xnew[is.na(xnew)] <- blank
  return(xnew)
} 
```**

# jquery - 专注于输入不起作用

> ID：10554747
> 
> 赞同：1
> 
> 时间：2012-05-11T15:53:52.013
> 
> 标签：jquery, focus

我正在尝试让 .focus() 与滑入式 div 一起使用，但无论何时出现 div，光标都不在所选的输入字段中。

演示： http: [//jsfiddle.net/Mobius1/36n8y/](http://jsfiddle.net/Mobius1/36n8y/)（已修复）

单击“引用”按钮将 div 滑入。我需要光标出现在第一个输入字段（#name）中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:57:42.440

您可以使用以下回调函数`show`：

```
$("#slide").hide().delay(500).show("drop", {
    direction: "up"
}, 500, function() {
    $("#name").focus();
}); 
```

**演示：http:** [//jsfiddle.net/L366u/1/](http://jsfiddle.net/L366u/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:56:45.483

回调中的焦点：

```
$("#slide")
  .hide()
  .delay(500)
  .show("drop", { direction: "up" }, 500, function() {
    $("#name").focus();   
  }); 
```

演示：http: [//jsfiddle.net/L366u/2/](http://jsfiddle.net/L366u/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:01:44.073

更改如下-->

```
 // focus on first input of slide (not working)
        setTimeout(function(){$("#name").focus();}, 500); 
```

# html - 需要用边框和它们之间的一些空间来设置 Div 的样式

> ID：10554752
> 
> 赞同：-1
> 
> 时间：2012-05-11T15:54:39.760
> 
> 标签：html, css

不擅长造型...我想给循环中的 div 提供一种“可排序”的按钮外观，带有边框和它们之间的一些空间....任何建议：

```
<table>
    <tr>
        <td class="shaded" style="padding: 0px;" align="center">
            <div id="sortable" style="border:1px solid black">
                <c:forEach var="field" items="${detFields}">
                    <div id="${field.fieldName}">${field.fieldName}</div>
                </c:forEach>
            </div>
        </td>
    </tr>
</table>   

$(function() {
    $( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:58:48.157

有些人`margin`应该给他们你需要的空间：

```
style="border:1px solid black; margin: 10px" 
```

# css - 另一个 div 中的 div 框

> ID：10554754
> 
> 赞同：0
> 
> 时间：2012-05-11T15:54:48.527
> 
> 标签：css, html

这应该很简单，我认为我做对了……显然不是。

我需要将显示“测试”的浅灰色框放入左侧列表右侧的较深灰色区域。它应该是 270px 高（或其他），并延伸到左侧列表的右边缘，以及右侧封闭容器的边缘。

这是我的代码的[小提琴](http://jsfiddle.net/f8yLh/)。十分简单。谢谢，伙计们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T15:59:27.527

有两种方法可以解决问题，这源于您使用`float: right`. 您可以 1) 移动`.theater`侧边栏上方的灰色框，它会正确浮动到右侧，或 2) 您可以将侧边栏更改为`float: left`，从灰色框中删除浮动，并添加左边距。

[这是第二种方法的示例。](http://jsfiddle.net/PxwBH/)

您也可以同时浮动侧边栏和灰色框，但我不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:00:55.777

您需要`float:left`或以其他方式将`.revision-gutter`div 从流程中取出

在我的示例中向左浮动：http: [//jsfiddle.net/trapper/f8yLh/1/](http://jsfiddle.net/trapper/f8yLh/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:03:00.293

只需添加`float:left;`到`.revision-gutter`您的完成！

**你的 CSS 应该是**

```
.revision-gutter {
    width:270px;
    height:inherit;
    background-color:#333333;
    overflow-y:scroll;
    float: left;
} 
```

他[更新了小提琴！](http://jsfiddle.net/zuul/f8yLh/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T15:59:28.223

添加`float: left;`到您的`revision-gutter`课程中，这应该可以帮助您入门。

# asp.net - MVC2 - 在 II7 上运行应用程序导致 403 被禁止

> ID：10554758
> 
> 赞同：0
> 
> 时间：2012-05-11T15:55:11.337
> 
> 标签：asp.net, asp.net-mvc, iis-7

我正在尝试使用面向 .net 4.0 的应用程序池并使用集成管道在 IIS7 中运行我们的 MVC2 应用程序。如果我使用开发网络服务器（Cassini iis 6）运行我的应用程序，它将工作。当我尝试使用本地 iis7 网络服务器运行应用程序时，我只收到 HTTP 错误：403.14。我读过其他帖子，声称设置 runAllManagedModulesForAllRequests = true 应该可以解决问题，但它不能解决这台机器上的问题。谁能给我一个建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:01:17.907

找到了解决方案。这是一台新机器。以下命令修复了该问题。

%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir

# opencv - 图像的 OpenCV Line-Mod 问题

> ID：10554762
> 
> 赞同：2
> 
> 时间：2012-05-11T15:55:47.537
> 
> 标签：opencv, object-detection

我正在尝试在 opencv 2.4 中使用 line-mod（在特殊的 line-2d 中）来比较图像。目前我尝试更改测试实现 linemod.cpp 以使用输入图像而不是相机，但没有任何成功。

我试图通过 imread('...', CV_LOAD_IMAGE_COLOR); 加载图像 并将其推送到源向量中，但出现“OpenCV 错误：线性化中的断言失败（response_map.rows % T == 0）”错误。

如果我加载 CV_LOAD_IMAGE_GRAYSCALE 图像，则运行在检测器处停止->匹配错误“线程 1：EXC_BAD_ACCESS（代码=1，地址=0x11310f000）”。

我不明白来自 VideoCapturer 和来自 imread 的图像有什么区别......

有没有人可以帮助我？我完全迷路了......再次;-)

（例如，使用 linemod 从图像中匹配两个对象的示例代码绝对很棒！）

我在 Mac 上使用带有 xcode 的 opencv 2.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:26:59.950

也许回答太晚了，但我对算法也很感兴趣

在 OpenCV Minutes 2012-06-26 ( [http://code.opencv.org/projects/opencv/wiki/2012](http://code.opencv.org/projects/opencv/wiki/2012) ) 中，您可以阅读：

> 9 月前将与 Stefan Hinterstoisser 合作完成 LINEMOD 的最终版本

因此，如果您还没有解决它，您可能需要等待。

# jquery-mobile - 多个表单元素内联

> ID：10554768
> 
> 赞同：0
> 
> 时间：2012-05-11T15:56:04.440
> 
> 标签：jquery-mobile

我有一个表单，我想创建一个“分/秒/十分位”控件，我想用三个相邻的文本输入来做。我无法在 jquery mobile 中找到一种自然的方法来执行此操作，因为使用网格系统会导致它们重叠并脱离最后：

*   [http://jsfiddle.net/EUJW8/1/](http://jsfiddle.net/EUJW8/1/)

让我感到震惊的是，我可能没有以正确的方式做这件事——有可能做我想做的事吗？

编辑：我设法提出了一个不正确的小提琴，现在这表明了问题。

# java - 在两个字段上创建 Hibernate 条件以及类似查询

> ID：10554769
> 
> 赞同：1
> 
> 时间：2012-05-11T15:56:06.383
> 
> 标签：java, database, hibernate, hibernate-criteria

假设我想用“like”查询用户的姓名和姓氏。这两个字段在数据库中被分隔为两列。如何以like作为启动模式（如abc％）进行查询，这是sql查询代码；

```
Query query = getSession().createQuery("from UserAccount where name || ' ' || surname like '" + fullName + "%'"); 
```

如何使用标准来做到这一点？

感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:23:33.803

其实很简单。

```
Criteria criteria = session.createCriteria(UserAccount.class)
    .add(Property.forName("name").like("abc"))
    .add(Property.forName("surname").like("def")); 
```

而不是`Property.forName()`一个可以使用`Restrictions`. 例如：`Restrictions.like("name", "abc")`。

# c# - 如何查找文件是否仍在流式传输？

> ID：10554772
> 
> 赞同：0
> 
> 时间：2012-05-11T15:56:24.387
> 
> 标签：c#, file, exception, io, stream

我正在编写一个小程序来自动更改桌面壁纸，来自在线图片库（imgur）。目前我有这个代码：

```
namespace Imgur_Wallpapers
{
    public partial class Form1 : Form
    {
        //IMGUR API = 3f1e4339e7bad35ff801bf76e369ae17

        private int Count = 1;

        public Form1()
        {
            InitializeComponent();
            timer1.Enabled = false;
            if (!File.Exists("image_black"))
            {
                Bitmap black = new Bitmap(10, 10);
                black.Save("transitionpaper.bmp");
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            DownloadFromImgur download = new DownloadFromImgur("gjZEc", Path.GetDirectoryName(Application.StartupPath));
            Wallpaper.Set(new Uri(Application.StartupPath + "/Image.bmp"), Wallpaper.Style.Centered);
            Count++;
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            DownloadFromImgur download = new DownloadFromImgur(imgurAlbumIdBox.Text, Path.GetDirectoryName(Application.StartupPath));

            Wallpaper.Set(new Uri(Application.StartupPath + "/Image.bmp"), Wallpaper.Style.Centered);
            Count++;
        }

        private void button2_Click(object sender, EventArgs e)
        {
            timer1.Interval = (int)whenToRefreshBox.Value;
            timer1.Enabled = true;
        }
    }

        private string url;
        public List<string> hash;
        private Random random;
        private string albumID;

        public DownloadFromImgur(string albumID, string folderToSaveTo)
        {
            try
            {
                this.albumID = albumID;
                hash = new List<string>();
                random = new Random();
                GetWebSite();
                Wallpaper.Set(new Uri(Application.StartupPath + "/transitionpaper.bmp"), Wallpaper.Style.Centered);
                WebClient client = new WebClient();
                File.Delete(Application.StartupPath + "/Image.bmp");
                client.DownloadFile(url, Application.StartupPath +  "/Image.bmp");
                client.Dispose();
            }
            catch (WebException ex)
            {

            }
        }

        private void GetWebSite()
        {
            var doc = XDocument.Load("http://api.imgur.com/2/album/" + albumID);

            hash.Clear();
            RecursiveWrite(doc.Root);

            url = hash[random.Next(hash.Count - 1)];
        }

        private void RecursiveWrite(XElement node)
        {
            foreach (var attribute  in node.Value)
            {
                if (node.Name == "original")
                {
                    hash.Add(node.Value);
                    break;
                }
            }

            foreach (var child in node.Elements())
            {
                RecursiveWrite(child);
            }
        }
    }

    public sealed class Wallpaper
    {
        Wallpaper() { }

        const int SPI_SETDESKWALLPAPER = 20;
        const int SPIF_UPDATEINIFILE = 0x01;
        const int SPIF_SENDWININICHANGE = 0x02;

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        static extern int SystemParametersInfo(int uAction, int uParam, string lpvParam, int fuWinIni);

        public enum Style : int
        {
            Tiled,
            Centered,
            Stretched
        }

        public static void Set(Uri uri, Style style)
        {
            System.IO.Stream s = new System.Net.WebClient().OpenRead(uri.ToString());

            System.Drawing.Image img = System.Drawing.Image.FromStream(s);
            string tempPath = Path.Combine(Path.GetTempPath(), "wallpaper.bmp");
            img.Save(tempPath, System.Drawing.Imaging.ImageFormat.Bmp);

            RegistryKey key = Registry.CurrentUser.OpenSubKey(@"Control Panel\Desktop", true);
            if (style == Style.Stretched)
            {
                key.SetValue(@"WallpaperStyle", 2.ToString());
                key.SetValue(@"TileWallpaper", 0.ToString());
            }

            if (style == Style.Centered)
            {
                key.SetValue(@"WallpaperStyle", 1.ToString());
                key.SetValue(@"TileWallpaper", 0.ToString());
            }

            if (style == Style.Tiled)
            {
                key.SetValue(@"WallpaperStyle", 1.ToString());
                key.SetValue(@"TileWallpaper", 1.ToString());
            }

            SystemParametersInfo(SPI_SETDESKWALLPAPER,
                0,
                tempPath,
                SPIF_UPDATEINIFILE | SPIF_SENDWININICHANGE);
        }
    }
} 
```

它在第一次运行时工作正常，但在第二次运行时返回 IOException。显然该文件仍在某处使用。我怎样才能找到它仍在使用的地方？这是异常消息：

> System.IO.IOException 未处理
> 消息=进程无法访问文件“C:\Users\David\documents\visual studio 2010\Projects\Imgur 壁纸\Imgur 壁纸\bin\Debug\Image.bmp”，因为它正在被使用通过另一个过程。
> Source=mscorlib
> StackTrace：在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.File.Delete(String path)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:01:14.883

我总是发现这个[工具](http://download.cnet.com/Unlocker/3000-2248_4-10493998.html?tag=mncol;1)非常有助于弄清楚是什么锁定了哪个文件。

我有一段时间没用了，但值得一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:00:08.427

完成后，您不会关闭下载流。如果你不这样做，流仍然挂接到文件。尝试使用 .Close() 和 .Dispose()

# http - https 页面上的 http 内容 - 混合内容

> ID：10554775
> 
> 赞同：1
> 
> 时间：2012-05-11T15:56:36.733
> 
> 标签：http, https, warnings, mixed

我想知道我应该怎么做。

我有一些 https 页面，但需要从我的 CDN 提供商那里调用一些 http 内容。
我想通过 http 加载的内容是 javascript、css 和图像。

现在，当此时执行此操作时，一些浏览器会发出混合内容警告，并询问是否只显示安全内容或所有内容。我想做的是解决这个问题，不发出警告，但保留 https 页面。

我能想到的只是：
制作一个使用 cURL 或 file_get_contents 的 PHP 脚本，并让服务器在其中加载页面。

但问题在于，它是否使 CDN 在 https 页面上有点尖锐（我当时正在考虑注册和登录），因为它会发送服务器 IP，它是英国，而不是可能来自美国的访问者.

谁能想到另一种混合内容的方法，但绕过警告，然后要求每个访问者更改那里的设置，我认为这是不行的。

谢谢。
加里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:45:41.000

我知道这已经接受了答案，但我认为以下是更好的解决方案：

尝试使用[无协议 Urls](https://benpowell.org/https-and-http-the-protocol-less-or-protocol-relative-urls/)。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.3.1/jquery.min.js" type="text/javascript"></script> 
```

你可以对 CSS 做同样的事情：

```
<link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.20/themes/base/jquery.ui.core.css" type="text/css" rel="stylesheet" /> 
```

请注意网址中缺少`https`或`http`。浏览器将确定适当的协议。不再有混合内容警告/错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:05:57.697

如果你想使用 CDN，不幸的是你需要一个支持 HTTPS 的。

[*Google Libraries*](https://developers.google.com/speed/libraries/devguide)通过 HTTPS 提供了许多著名的库（例如 jQuery）。

# vb6 - visualbasic6中循环队列的实现

> ID：10554776
> 
> 赞同：0
> 
> 时间：2012-05-11T15:56:37.050
> 
> 标签：vb6

```
 Public Function insert(x As Integer)
    If front = 0& & rear = n - 1 Or rear + 1 = front Then
     MsgBox "queue FULL !!!", vbOKOnly, "QUEUE"
    ElseIf front = -1 Then
     front = rear = 0
    ElseIf rear = n - 1 Then
     rear = 0
    Else
     rear = rear + 1
    End If
    arr(rear) = x
    MsgBox x, vbOKOnly, "INSERTED"
    List1.AddItem x
End Function 
```

这是循环队列的 insert() 。我在“如果前 = 0& & 后 = n - 1 或后 + 1 = 前然后”
错误是“运行时错误'13'类型不匹配”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:02:34.443

我想你的意思是

```
If front = 0& & rear = n - 1 Or rear + 1 = front Then 
```

成为

```
 If front = 0 And rear = n - 1 Or rear + 1 = front Then 
```

你可能真的是说

```
If (front = 0 And rear = n - 1) Or rear + 1 = front Then 
```

你把你的“x”和“n”混在一起了吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:00:16.307

This is also wrong

```
front = rear = 0 
```

Should be

```
front = 0 
rear = 0 
```

`=` has **two** meanings in VB6

*   `=` is the equality operator, same as `==` in a c-like language
*   `=` is also the assignment statement, like the `=` operator in a c-like language

# scala - 使用分区的 Scala 编译错误

> ID：10554779
> 
> 赞同：0
> 
> 时间：2012-05-11T15:56:42.763
> 
> 标签：scala

```
scala> val set = Set("apricot", "banana", "clementine", "durian", "fig", "guava", "jackfruit", "kiwi", "lime", "mango")
set: scala.collection.immutable.Set[java.lang.String] = Set(banana, durian, fig, jackfruit, lime, mango, clementine, apricot, kiwi, guava)

scala> set.partition(_ length > 5)
<console>:1: error: ')' expected but integer literal found.
       set.partition(_ length > 5)
                                ^

scala> set.partition(_.length > 5)
res5: (scala.collection.immutable.Set[java.lang.String], scala.collection.immutable.Set[java.lang.String]) = (Set(banana, durian, jackfruit, clementine, apricot),Set(fig, lime, mango, kiwi, guava)) 
```

有人可以解释为什么我执行时它会抱怨吗

```
set.partition(_ length > 5) 
```

而不是当我执行

```
set.partition(_.length > 5) 
```

我也尝试了以下方法，但收效甚微：

```
scala> set.partition((_ length) > 5)
<console>:9: error: missing parameter type for expanded function ((x$1) => x$1.length)
              set.partition((_ length) > 5)
                             ^ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:00:08.333

当您放下点时，Scala 假定您有一个单参数方法。换句话说，当你说它`_ length > 5`认为这`length`是一种需要一个参数的方法时，那`>`就是那个参数，然后它不知道如何处理 5。

请注意，这与您编写`5 + 5`. 此语句与 writing 相同`5.+(5)`，但您删除了点和括号。Scala 注意到丢失的点并假设（正确地）这`+`是一个需要单个参数的方法。

如果您自己编写`"abc" length`，那么 Scala 就没有任何东西可以假设是参数，因此它会意识到`length`不需要参数。

所以：

```
"abc".length        // fine
"abc" length        // fine
"abc".length > 4    // fine
("abc" length) > 4  // fine
"abc" length > 4    // error! 
```

因此，您需要一个点或括号来告诉编译器`"abc"`并且`length`一起使用并且没有额外的参数。

就编码风格而言，我建议您始终将点用于零参数方法。我发现它更具可读性，它将帮助您避免诸如此类的编译错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T15:59:52.077

当你写：

```
set.partition(_ length > 5)
//            ^ object
//              ^ method
//                     ^ parameter 
```

它被视为`length`一种接收一个参数的方法，`>`.

当你写的时候：

```
set.partition(_.length > 5)
//            ^------^ object
//                     ^ method
//                       ^ parameter 
```

它被视为`_.length`对象，`>`是参数，`5`是参数。

# ruby - 如何将 rspec 测试移动到集成文件夹中

> ID：10554782
> 
> 赞同：0
> 
> 时间：2012-05-11T15:56:57.963
> 
> 标签：ruby, rspec, integration-testing, capybara

目前，我在 spec 文件夹中名为 views 的文件夹中有 rspec 测试，并且测试运行良好。我想要做的是将 rspec 测试移动到测试文件夹中的集成文件夹，而不是在创建新应用程序时在开始时生成。

当我移动 rspec 测试并尝试运行它们时，我收到一条错误消息，说它找不到 spec_helper.rb 所以我将该信息转移到 test_helper.rb 中。当我尝试运行测试时，它现在说它找不到 test_helper.rb。test_helper.rb 位于 test 文件夹中。

spec_helper.rb 代码

```
ENV["RAILS_ENV"] ||= 'test'

require File.expand_path("../../config/environment", __FILE__)
require "rspec"
require 'rspec/rails'
require "rubygems"
require "capybara/rspec"
require "capybara/dsl"

RSpec.configure do |config|
  config.mock_with :rspec
  config.include Capybara::DSL

  config.formatter = :documentation # :progress, :html, :textmate
end

Capybara.configure do |config|
  config.run_server=true
  config.default_driver=:selenium
end

end 
```

那么是否有我必须更改的配置。有什么想法或建议吗？

谢谢雷

# java - 如何覆盖 Jboss 5.1 lib/endorsed 目录中的 jar？

> ID：10554788
> 
> 赞同：3
> 
> 时间：2012-05-11T15:57:07.073
> 
> 标签：java, jboss, jboss5.x, ear, xalan

我们需要让最新版本的 Xalan/Serialize/Xerces jar 文件在我们耳边运行。当我们运行我们的应用程序代码并随后获取`java.lang.NoSuchMethodError`'s.

我读过这样的文章：[http ://www.openscope.net/2010/07/15/setting-up-a-jboss-instance-v5-x-class-loading/](http://www.openscope.net/2010/07/15/setting-up-a-jboss-instance-v5-x-class-loading/)

我已将 jboss-app.xml 文件添加到我的 meta-inf 目录中，该目录已打包到我的耳朵中。这是我坚持的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jboss-app PUBLIC
        "-//JBoss//DTD Java EE Application 5.0//EN"
        "http://www.jboss.org/j2ee/dtd/jboss-app_5_0.dtd">
<jboss-app>  
  <loader-repository>  
  org.apache.xalan:archive=servicebroker-enterprise.ear
     <loader-repository-config>  
     java2ParentDelegation=false  
     </loader-repository-config>  
  </loader-repository>  
</jboss-app> 
```

当我有该代码时，我的耳朵没有加载到 jboss 中。我看到它找到了耳朵，然后只是移动到其他耳朵而不加载它。我打开了调试日志，没有看到任何错误或提及为什么它没有被加载。

为什么我的耳朵没有加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:34:51.567

我建议您同步您的 Xalan/Serialize/Xerces 和 JBoss 的版本。首先，尝试将 JBoss 替换为新的，也许它会起作用。另一种方式，考虑将您的 JBoss 升级到将使用最新 Xalan/Serialize/Xerces 的新版本。改变类加载过程的行为会给你带来新的问题，AFAIC。

# java - 具有长精度的 Jersey/JAXB 编组问题

> ID：10554791
> 
> 赞同：4
> 
> 时间：2012-05-11T15:57:30.880
> 
> 标签：java, jaxb, jersey

我们将 Jersey/Json (v1.12) 用于 JAX-RS Web 服务，并且我们输出 long 作为一些简单的 JAXB 对象编组的一部分。我们今天发现了一些东西，我环顾四周，看看这是否是一个普遍问题，但没有运气调试。

我们拥有的对象之一使用 long 作为唯一标识符（根据 java 规范， 2^63-1 ），即 ~ 9223372036854775807 （19 位左右）。

如果我们尝试输出长（17 位或更少的数字），我们会按预期（正确）输出。

如果我们尝试输出一个长（直到 2^63-1 为止的 18 位数字），我们会得到不正确的输出 - 它似乎将最后 2/3 有效数字四舍五入，例如：

```
@GET
@Path("/longTest")
@Produces("application/json")    
public JSONObject testLong() {
    JSONObject myObject = new JSONObject();
    try {
        myObject.put("1L", 1);
        myObject.put("13365766603759910L", 13365766603759910L);
        myObject.put("133614582656610538L", 133614582656610538L);
        myObject.put("9133614582656610538L", 9133614582656610538L);    
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return myObject;
} 
```

返回：

```
{
   "1L":1,
   "13365766603759910L":13365766603759910,
   "133614582656610538L":133614582656610540,
   "9133614582656610538L":9133614582656610000
} 
```

注意最后 2 个数字（538 - 540（18 位）和 538 - 000（19 位））的换行。

如果我直接将 long 编组为 json，它可以正常工作：

```
@GET
@Path("/longTest3")
@Produces("application/json")    
public long testLong3() {
    return 133614582656610538L;
} 
```

返回：

```
133614582656610538 
```

我在初始化我的网络服务器时添加了 POJO JSON 支持。

我应该为此使用不同的 JSONConfiguration 或 JAXBContextResolver 吗？

在此先感谢您的帮助！

# facebook - 通过 facebook API 拉朋友生日

> ID：10554802
> 
> 赞同：0
> 
> 时间：2012-05-11T15:58:06.977
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我一直在努力尝试从 facebook API 中提取朋友的生日，并且我已经能够提取朋友的 uid，但是当我用其他任何东西（即姓名、性别、生日等）替换 uid 请求时，它会破坏代码. 任何见解都会有很大帮助。谢谢

```
 <div id="fb_login"> 

             <div id="fb-root"></div>
          <script>
            window.fbAsyncInit = function() {
              FB.init({
                appId      : 'APP_ID',
                status     : true, 
                cookie     : true,
                xfbml      : true,
                oauth      : true,
              });
            };
            (function(d){
               var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
               js = d.createElement('script'); js.id = id; js.async = true;
               js.src = "//connect.facebook.net/en_US/all.js";
               d.getElementsByTagName('head')[0].appendChild(js);
             }(document));
          </script>
        <div class="fb-login-button" scope="user_birthday,friends_birthday">Login with Facebook</div>

      <div id="bday_display">
      <?php
                $app_id = 'APP_ID';
                $app_secret = 'APP_SECERT';
                $my_url = 'MY_URL';

                $code = $_REQUEST["code"];

               //auth user
               if(empty($code)) {
                  $dialog_url = 'https://www.facebook.com/dialog/oauth?client_id=' 
                  . $app_id . '&redirect_uri=' . urlencode($my_url) ;
                  echo("<script>top.location.href='" . $dialog_url . "'</script>");
                }

                //get user access_token
                $token_url = 'https://graph.facebook.com/oauth/access_token?client_id='
                  . $app_id . '&redirect_uri=' . urlencode($my_url) 
                  . '&client_secret=' . $app_secret 
                  . '&code=' . $code;
                $access_token = file_get_contents($token_url);

                // Run fql query
                $fql_query_url = 'https://graph.facebook.com/'
                  . '/fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=me()'
                  . '&' . $access_token;
                $fql_query_result = file_get_contents($fql_query_url);
                $fql_query_obj = json_decode($fql_query_result, true);

                //display results of fql query
                echo '<pre>';
                print_r("query results:");
                print_r($fql_query_obj);
                echo '</pre>';

              ?>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:21:38.677

试试这个 fql 语句。请记住，并非每个人都会填写他们的生日字段，或者如果他们已经填写了，则将其显示给您。

```
SELECT name, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me() ) 
```

您可以添加`AND strlen(birthday_date) > 0`到上述 FQL 的末尾以过滤掉没有可见生日的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T18:14:44.770

这是有效的代码。感谢您对 cpilko 的所有帮助。没有你的帮助，我不可能完成它。

```
 try{
            $fql    =   "SELECT name, birthday_date FROM user WHERE uid IN (SELECT uid2          FROM friend WHERE uid1=me())";
            $param  =   array(
                 'method'    => 'fql.query',
                'query'     => $fql,
                'callback'  => ''
            );
            $fqlResult   =   $facebook->api($param);
        }
        catch(Exception $o){
            d($o);
    }
} 
```

# silverlight - 如何在不安装开发人员运行时检测和包装“调试资源字符串不可用”？

> ID：10554808
> 
> 赞同：4
> 
> 时间：2012-05-11T15:58:17.557
> 
> 标签：silverlight, exception-handling

我正在开发一个 Silverlight 应用程序，该应用程序在 App 类中有一个 UnhandledException 处理程序，它显示一个包含异常消息的消息框。这通常适用于自定义异常。但是，它对于内置异常（例如 NullReferenceException）就不是很好了，因为用户没有安装开发人员运行时，因此会收到一个相当难看的“调试资源字符串不可用”消息。

我的第一个想法（我很快就打消了）是检查“调试资源字符串”的异常消息。我想如果有人用法语运行应用程序，他们会得到“les chaînes de ressources de débogage”之类的东西，这样就行不通了。

Silverlight 应用程序是否有办法检测它是在最终用户运行时还是在开发人员运行时中运行？我查看了 Application 和 Environment 以及 Deployment 类，但没有找到任何东西。

我想如果应用程序在需要向用户显示某种消息时总是抛出自定义异常，我想这不会是一个问题。然后我可以使用更友好的通用消息轻松隐藏非自定义消息。这是最好/唯一的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T15:39:48.653

仅从应用程序设计的角度来看，哪些用户会知道如何处理任何类型的技术错误消息？“在需要对象实例的地方找到了值‘null’。” 啊？？

一个简单的“发生了不好的事情，如果它继续，请联系支持人员”就足够了。只要确保您记录了某处发生的任何不良情况，这样当您接到电话/电子邮件时，您就可以在解决问题所需的任何技术细节中检索问题。

# silverlight - 工具提示显示问题

> ID：10554809
> 
> 赞同：0
> 
> 时间：2012-05-11T15:58:22.427
> 
> 标签：silverlight, telerik, tooltip

我`ToolTipService.ToolTip="Submit Changes"`在 Button 控件的代码中添加了一个工具提示。我还在我的页面上使用了 Radpane telerik 控件。当我在按钮上移动鼠标时，工具提示隐藏在 Radpane 控件后面。

我想在那个 Telerik 控件上显示它。请给我建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:47:04.033

如果这仍然给您带来问题，请尝试更改工具提示相对于按钮的 z 顺序，以便它显示在控件的顶部。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T14:42:25.283

您必须首先设置属性以启用焦点行为。

设置 IsHitTestVisible="True"

# c# - 如何使用 Automapper 将集合映射到集合容器？

> ID：10554814
> 
> 赞同：3
> 
> 时间：2012-05-11T15:58:34.390
> 
> 标签：c#, automapper

我在尝试映射这两个类时遇到了一些麻烦（Control -> ControlVM）

```
 public class Control
    {
        public IEnumerable<FieldType> Fields { get; set; }

        public class FieldType
        {
            //Some properties
        }
    }

    public class ControlVM
    {
        public FieldList Fields { get; set; }

        public class FieldList
        {
            public IEnumerable<FieldType> Items { get; set; }
        }

        public class FieldType
        {
            //Properties I'd like to map from the original
        }
    } 
```

我尝试过，`opt.ResolveUsing(src => new { Items = src.Fields })`但显然 AutoMapper 无法解析匿名类型。也尝试过扩展`ValueResolver`，但也没有用。

**注意：**此 VM 稍后在 WebApi 中使用，并且 JSON.NET 需要对集合进行包装以正确反序列化它。因此，移除包装不是解决方案。

**注意2：**我也在做`Mapper.CreateMap<Control.FieldType, ControlVM.FieldType>()`，所以问题不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T22:32:38.553

这对我有用：

```
Mapper.CreateMap<Control.FieldType, ControlVM.FieldType>();

// Map between IEnumerable<Control.FieldType> and ControlVM.FieldList:
Mapper.CreateMap<IEnumerable<Control.FieldType>, ControlVM.FieldList>()
    .ForMember(dest => dest.Items, opt => opt.MapFrom(src => src));

Mapper.CreateMap<Control, ControlVM>(); 
```

*更新*：这是另一种映射方式：

```
Mapper.CreateMap<ControlVM.FieldType, Control.FieldType>();
Mapper.CreateMap<ControlVM, Control>()
    .ForMember(dest => dest.Fields, opt => opt.MapFrom(src => src.Fields.Items)); 
```

# css - IE8 显示边距但不应该

> ID：10554816
> 
> 赞同：0
> 
> 时间：2012-05-11T15:58:39.737
> 
> 标签：css, internet-explorer-8, margin

在 IE8 中，我的标题看起来像设置了底部边距，但边距设置为 0px。我已经设置了一个边框属性来测试它。

我使用的是 DIV 标签而不是 HTML5 标题、导航等。

现在我正在看这张照片，我注意到右边还有一个额外的像素。

```
#header
{
    margin:  0px;
    padding: 0px;
    width:   800px;
    height:  200px;
    border:  1px solid red; /* test */
}

#nav
{
    margin:  0px;
    padding: 0px;
    border:  1px solid black; /* test */
} 
```

![在此处输入图像描述](../Images/ec0a0a890b8f9987ea992d5d59447ab2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:01:57.983

标题中的灰色来自哪里？如果它是一张图片，您可能需要检查它的尺寸是否与您的 CSS 定义中的尺寸相匹配（即 800 像素 x 200 像素）。否则，请尝试删除图像上的任何边距。

如果没有看到完整的 HTML 结构，就很难排除故障。

# facebook-c#-sdk - 使用 c# sdk 获取按名称排序的 facebook 好友列表

> ID：10554817
> 
> 赞同：0
> 
> 时间：2012-05-11T15:58:39.737
> 
> 标签：facebook-c#-sdk

iwork 在与 facebook 通信的 wepp 应用程序上，我正在检索用户的朋友列表及其信息，然后我必须按名称对其进行排序，请有任何简单的方法按名称对它们进行排序，谢谢您的帮助。这是使用
ViewBag.access_token = _fb.AccessToken 的代码；
动态 myInfo = _fb.Get("/me/friends");
ViewBag.info = myInfo;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:07:12.833

您可以使用 Facebook 查询语言。像这样的东西：

```
SELECT name, pic_square FROM user WHERE uid = me()
OR uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) ORDER BY name 
```

[http://developers.facebook.com/docs/reference/fql/](http://developers.facebook.com/docs/reference/fql/)

# jpa - JPA 会尝试级联持久化和已经持久化的实体吗？

> ID：10554823
> 
> 赞同：4
> 
> 时间：2012-05-11T15:59:18.557
> 
> 标签：jpa, entity, cascade, persist

**JPA 是否会尝试级联持久化已持久化（非分离）的实体？**

为了清楚起见，这是我的情况：我想保留一个新用户：

```
public void addUser(){
    //User is an entity that is related to many Groups
    //The relationship on User side is marked with cascade persist
    User user = new User();
    user.setName("foo");
    user.setGroups(new ArrayList<Groups>());

    //selectedGroups is an List of Groups previously created with persistent Groups
    for(Group g : this.selectedGroups){
        user.getGroups().add(this.groupDao.find(g.getId()));
    }
    //At this point, User.getGroups() is a list of Managed Entities

    //What happens on the following line?
    userDao.persist(user);
} 
```

那么，会发生什么？JPA 会尝试（再次）保留 user.getGroups() 中的每个组吗？或者它会检测到这些组已经存在并且只是更新新的关系？

如果“是的，它将再次存在”，我应该如何注释这种关系以使该代码正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T08:09:37.023

JPA 将检测新组和已经持久化的组之间的差异，并且只会持久化新组。

编辑：回应评论

JPA 可能会尝试再次保留它们，因为它们已被分离。这意味着您要么必须使用合并再次附加它们，要么防止它们被分离。

他们变得分离的最可能的原因是他们参与的交易的结束。假设您正在使用 JTA 并且没有做任何额外操作，那么如果 addUser 不是 EJB 的方法而 groupDao 是 EJB，则事务以 groupDao.find 调用开始，并在 find 返回时结束。因为默认情况下，如果没有一个 EJB 方法正在运行，则该方法会启动一个事务。如果 addUser 是 EJB 的一种方法，那应该没问题，因为 addUser 将启动事务，而 groupDao.find 将使用现有事务，因此一切都发生在一个事务中。

# java - 从另一个线程泵送事件，而不是 Swing 中的事件调度线程

> ID：10554835
> 
> 赞同：2
> 
> 时间：2012-05-11T15:59:54.863
> 
> 标签：java, swing, event-dispatch-thread

在我的应用程序中，在 AWT 的事件调度线程 (EDT) 中启动的某些进程在特定情况下可能会被中断。然后它等待来自用户的输入。唉，由于进程位于 EDT，整个应用程序冻结，用户无法重新启动进程，从而造成死锁。有什么方法可以中断 EDT 并从另一个线程启动新的事件泵？然后用户将能够与 UI 进行交互。

我正在尝试做的事情看起来或多或少像打开一个模式对话框，除了我不想要一个对话框，因为我的组件很复杂。我宁愿在我的根窗格中显示它。所以我看了一下它是如何在 java.awt.Dialog 中完成的，并且对它有很好的理解，但是使用的最重要的类（EventDispatchThread、SequencedEvent、...）是受保护的，因此我无法访问。

* * *

谢谢大家的答案。

我会更具体。我实际上正在开发一个嵌入本土脚本语言的应用程序。我正在为这种语言开发一个调试器。每当遇到断点时，调试器（与所有调试器一样）都会停止脚本执行。可以从代码中的许多地方（包括从 EDT）触发脚本化进程，因此不能将进程从 EDT 中取出。我希望将调试器 UI 嵌入到应用程序中（准确地说是在侧窗格中）。因此，当遇到断点时，我需要中断当前线程（可能是 EDT，主要不是说），并且至少调试器的 UI 应该仍然响应。我也在 JDK 1.4 之上开发，所以没办法使用 JDK7 唉。

我目前正在做的是打开一个嵌入了调试器的 JDialog。一切正常，但正如我所说，我对这个解决方案并不完全满意，因为我**真的**希望我的调试器直接嵌入到我的主窗口中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T16:06:21.023

如果您使用的是JDK7，则可以使用该[`SecondaryLoop`](http://docs.oracle.com/javase/7/docs/api/java/awt/SecondaryLoop.html)接口。可以通过[`EventQueue.createSecondaryLoop`](http://docs.oracle.com/javase/7/docs/api/java/awt/EventQueue.html#createSecondaryLoop%28%29)方法创建这个接口的一个实例

有[一篇内容丰富的博客文章](http://sellmic.com/blog/2012/02/29/hidden-java-7-features-secondaryloop/)，其中包含一个示例，但服务器目前似乎处于离线状态。

一个小的编辑，因为我仍然不完全确定我理解你的问题。

如果您想等待来自工作线程的用户输入，您可以使用该`SwingUtilities.invokeAndWait`方法并使用阻塞方法（例如 show a`JOptionPane`来检索用户输入）。由于`invokeAndWait`您的工作线程将被停止，直到`Runnable`EDT 被处理。如果您在 EDT 上使用阻塞方法来检索用户输入，`Runnable`只有当用户提供他/她的输入时才会完成

# c# - 在使用 C# XmlWriter 制作的 XML excel 文档的单元格中显示多行文本值

> ID：10554836
> 
> 赞同：3
> 
> 时间：2012-05-11T16:00:02.400
> 
> 标签：c#, xml, excel, export-to-excel, multiline

情况：我正在创建一个 C# .Net 4.0 Winform 以使用用户选择的过滤器从 Oracle DB 收集数据表，并将它们放入 Gridview 预览中进行检查。一旦他们根据自己的喜好过滤了数据，他们就会单击导出按钮，该按钮将数据表转换为 XML 文档，双击该文档会在 Excel 中打开。在 XML excel 文件中，每条记录如下所示：

```
 <ss:Row>
    <ss:Cell ss:StyleID="General">
      <ss:Data ss:Type="String">110002</ss:Data>
    </ss:Cell>
    <ss:Cell ss:StyleID="General">
      <ss:Data ss:Type="String">GALV.047M X 3 G90 A653 PASSDRY SQ GR33</ss:Data>
    </ss:Cell>
    <ss:Cell ss:StyleID="General">
      <ss:Data ss:Type="String">.047 MIN X 3 X COIL
!GALV G90 ASTM A 653 SQ GR33 PASS DRY*

20" ID
5 TON MAX LIFT
SKID EYE TO THE SKY
3" X 3" SPACER IN BETWEEN EACH BUNDLE
SUPPLY TEST REPORTS CHEMICAL</ss:Data>
    </ss:Cell>
  </ss:Row> 
```

它在 excel 中显示的记录类似于文件是 CVS 时的显示方式，这是一个完全未格式化的工作表，所有文本都在一行上。很明显，在 XML 文件中保留了换行符，但 Excel 表是供用户编辑数据的，所以我需要显示我收到它的文本（即，如果是这种情况，则显示多行）。

问题：如果 XML 文件中的数据是这样格式化的，我如何格式化导出的 XML 文件以在多行上显示其单元格内容（并可能增加单元格高度以匹配）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:14:09.000

如果您创建一个包含多行内容的简单 Excel 文件并保存为 XML，您可以在输出中看到：

在标签中

```
<Style ss:ID="s62">
   <Alignment ss:Vertical="Bottom" ss:WrapText="1"/>
</Style> 
```

单元格 XML：

`<Cell ss:StyleID="s62"> <Data ss:Type="String">First Line&#10;Second Line&#10;Last Line</Data> </Cell>`

# java - 在 swing-java 中，Graphics 实例从何而来？

> ID：10554838
> 
> 赞同：6
> 
> 时间：2012-05-11T16:00:05.950
> 
> 标签：java, swing, repaint

当一个更新请求被传递到 swing 时（系统触发，例如因为调整大小或被另一个窗口阻塞，或者应用程序触发，例如通过调用 repaint() 方法），这个请求实际上是如何处理的？RepaintManager 中发生了什么过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T06:59:18.847

从您的评论中：

> 你知道在 peer.getGraphics() 中发生了什么吗？

这取决于使用哪个对等实现。

一种实现是`WComponentPeer`（在 Windows 上运行时使用），它似乎使用两种方法来获取`Graphics`对象：

1.  如果组件有一个类型的父级`Window`（或本身就是一个），而后者又关联了一个后台缓冲区图像，`Graphics`则返回该图像的对象。这取决于图像的类型，但最有可能是一个`SunGraphics2D`实例，创建于`createGraphics()`.

2.  否则，将`ScreenUpdateManager`检索一个实例并`createGraphics(...)`在其上调用该实例，该实例又返回一个新`SunGraphics2D`实例。

请注意，这只是一种可能的方式，它在很大程度上取决于所使用的操作系统、JVM 和 UI 工具包。

# ftp - 如何从 FTP 服务器获取文件名？

> ID：10554841
> 
> 赞同：0
> 
> 时间：2012-05-11T16:00:18.080
> 
> 标签：ftp, wso2, wso2carbon, vfs

我想在 WSO2 中添加一个服务，该服务主要用于扫描远程 ftp 服务器上的文件并告诉客户端文件名。

流程如下：服务定时扫描ftp方向，如果找到匹配的文件，则发送文件名给客户端(sendReportFile(fileName))。

如何在 wso2 中做到这一点？

我想我需要使用 vfs 来扫描文件，但是如何将文件名发送给客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T22:10:42.013

如果您使用 vfs 作为传输，则拾取文件的文件名可用作名为 FILE_NAME 的传输属性。文件名和完整路径可用作传输属性 FILE_PATH。

因此，您可以使用 get-property() XPath 函数来获取值，或者使用

获取属性（“运输”，“文件名”）

或者

获取属性（'$trp:FILE_NAME'）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T14:37:49.527

如果您需要在不下载实际文件的情况下处理此问题（VFS 就是这种情况），您可以使用自定义或类调解器在给定轮询时间连接到 FTP 服务器。创建自定义调解器的示例：http: [//maninda.blogspot.co.uk/2013/01/writing-custom-mediator-for-wso2-esb_7.html](http://maninda.blogspot.co.uk/2013/01/writing-custom-mediator-for-wso2-esb_7.html)

集成的 Apache Commons FTPClient 类可用于从中介内与 FTP 服务器交互：http: [//commons.apache.org/proper/commons-net//apidocs/org/apache/commons/net/ftp /FTPClient.html](http://commons.apache.org/proper/commons-net//apidocs/org/apache/commons/net/ftp/FTPClient.html)

# google-plus - 如何在 Google+ 圈子中显示拥有我的人数？

> ID：10554842
> 
> 赞同：1
> 
> 时间：2012-05-11T16:00:23.973
> 
> 标签：google-plus

我有一个网站，可以显示我每个个人帐户上的 Twitter 关注者、Facebook 粉丝和 LinkedIn 连接的数量。我的问题出在 Google+ 上——我似乎无法在他们的 API 中找到如何检索这些信息。我想检索/显示圈子中有我的人数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:25:32.847

目前，显示您在 Google+ 上的关注者数量的唯一方法是使用徽章：[https ://developers.google.com/+/web/badge/](https://developers.google.com/+/web/badge/)

该 API 目前只允许您调用 people.list() 来显示您关注的人数。

# javascript - 检查页面是否使用来自 javascript 的 asp.net ajax

> ID：10554844
> 
> 赞同：2
> 
> 时间：2012-05-11T16:00:28.000
> 
> 标签：javascript, asp.net, javascript-events

有没有办法从 javascript 确定页面是否包含脚本管理器、更新面板或者 __doPostBack 是从更新面板调用还是部分回发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:12:33.747

当调用一个更新面板时，有两个函数从 javascript 端触发。在此函数中，您还可以获得触发此更新的面板的 ID。如果在更新面板之外有完整的帖子，那么您需要捕获表单的提交。

以下是更新面板要更新时触发的代码，以及显示触发的更新面板 ID 的函数。

```
<script>

    if(window.Sys && Sys.WebForms && Sys.WebForms.PageRequestManager)
    {
      var prm = Sys.WebForms.PageRequestManager.getInstance();

       prm.add_initializeRequest(InitializeRequest);
       prm.add_endRequest(EndRequest);
    }
    else
    {
      // no ScriptManager found
    }        

      function InitializeRequest(sender, args) 
      {     
         // get the array of update panels id
         var UpdPanelsIds = args.get_updatePanelsToUpdate();
         // get the Post ID
         args.get_postBackElement().id;
      }

      function EndRequest(sender, args) {
      }
</script> 
```

'Dan Davies Brackett' 正确描述了如何知道 ScriptManager 是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:08:50.937

如果我理解正确，这里有两个问题：

(1) 如何在 JavaScript 中判断页面上是否存在 ScriptManager？

如果服务器端页面包含一个 ScriptManager，那么客户端就会有一个[PageRequestManager](http://msdn.microsoft.com/en-us/library/bb311028.aspx)可用。您可以通过以下方式发现它是否存在：

```
 var haveScriptManager = window.Sys && Sys.WebForms && Sys.WebForms.PageRequestManager; 
```

(2) 如何判断 __doPostBack 是否同步？

获得本地 PageRequestManager 的句柄后，您可以挂钩在每次回发之前触发的事件，并检查它是同步的还是异步的。同样，[PageRequestManager 的文档](http://msdn.microsoft.com/en-us/library/bb311028.aspx)将为您提供有关如何执行此操作的所有详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:06:54.887

将 scriptManager clientID 发送到一些客户端 javascript，然后在页面上查找它 (document.getElementById(emittedClientID)

您可以将 __doPostBack 重命名为... __NewDoPostBack = __doPostBack，然后创建一个新函数，例如...

```
__doPostBack = function(whatever arguments __NewDoPostBack takes){
    alert("We're doing a post back");
    __NewDoPostBack(whatever arguments __NewDoPostBack takes)
} 
```

# ajax - jquery 在焦点上发送操作并查看文本行

> ID：10554846
> 
> 赞同：1
> 
> 时间：2012-05-11T16:00:41.343
> 
> 标签：ajax, jquery

IE。我们有很多行文本的页面

```
<div class="textline" id=line1>text line or line with image no reason</div>
<div class="textline" id=line2>text line or line with image  no reason</div>
<div class="textline" id=line500>text line or line with image  no reason</div> 
```

如何在**访问者的屏幕上（不是在整个页面上）获取最后一个真正可见的 lineID**并使用 jquery 将此 ID 发送到服务器？1) 第一次发送 - 当页面聚焦超过 5 秒（真正查看）时，需要从访问者的屏幕发送最后一个可见的 lineID。2）当页面向下滚动时需要发送最后一个可见行（想想有一点超时）

用jquery可以吗？有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:03:37.017

从元素列表中获取最后一个`.textline`元素。

**例子：**

```
$(".textline").last(); 
```

或者，如果你想*在视口中选择屏幕上*可见的最后一个元素，你将不得不做一些更复杂的事情，像这样：

```
$(".textline").each(function() {
    var offset = $(this).offset().top - $(window).scrollTop();

    if(offset <= window.innerHeight - $(this).height){
        // it's the last visible line, do something with it. 
        // you can put a call to your server containing the 
        // line's current text with something like this:
        // var curText = $(this).val();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:07:48.630

this selects last `.textline`:

```
$('.textline').last().text() 
```

# ravendb - 如何构建内存实体类以从 RavenDB 加载非规范化的引用文档

> ID：10554850
> 
> 赞同：0
> 
> 时间：2012-05-11T16:00:59.420
> 
> 标签：ravendb

尝试从默认 RavenDB 数据库加载专辑文档时收到 FormatException：

```
 using (var session = _documentStore.OpenSession())
     {         
        var album = session.Load<Album>(500);
        //....
     } 
```

数据库中的专辑 JSON 文档如下所示：

```
{
 "AlbumArtUrl": "/Content/Images/placeholder.gif",
 "Genre": {
   "Id": "genres/10",
   "Name": "Classical"
 },
 "Price": 8.99,
 "Title": "The Best of Beethoven",
 "CountSold": 0,
 "Artist": {
   "Id": "artists/203",
   "Name": "Nicolaus Esterhazy Sinfonia"
 } 
```

}

我的内存中实体专辑类如下所示：

```
public class Album
{
  public long Id { get; set; }
  public string AlbumArtUrl { get; set; }
  public DenomralizedGenre Genre { get; set; }      
  public decimal Price { get; set; }
  public string Title { get; set; }
  public int CountSold { get; set; }
  public DenomralizedArtist Artist { get; set; }      
}

public class DenomralizedGenre
{
   public int Id { get; set; }
   public string Name { get; set; }
}

public class DenomralizedArtist
{
   public int Id { get; set; }
   public string Name { get; set; }
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T01:45:32.800

制作所有的 ID 字符串。你有它们作为int和long。在 RavenDB 中，ID 是字符串。

作为字符串的 Id 在 RavenDB 中是 Album/24。类名称或类型加上 HiLo 值（由客户端工具创建）构成 Id。

# ruby-on-rails-3 - 如何使 ActsAsTaggableOn::Tag 成为“acts_as_indexed”？

> ID：10554851
> 
> 赞同：0
> 
> 时间：2012-05-11T16:01:02.487
> 
> 标签：ruby-on-rails-3, full-text-search, acts-as-taggable-on

我有一个 rails 3 应用程序，我在其中使用[acts_as_taggable_on](https://github.com/mbleigh/acts-as-taggable-on)来标记 Post 模型。我有一个搜索框，可以让我搜索帖子，我使用acts_as_indexed。在我的搜索中，我还希望能够通过扩展 ActsAsTaggableOn::Tag 类以支持acts_as_indexed 来搜索所有标签。我怎么做？

我尝试了以下方法：

```
# lib/tag.rb
module ActsAsTaggableOn
 class Tag
   acts_as_indexed :fields => [:name]
 end
end 
```

但是当我尝试调用 find_with_index 时出现以下错误：

```
> ActsAsTaggableOn::Tag.find_with_index('foo')
undefined method `find_with_index' for ActsAsTaggableOn::Tag(id: integer, name: string):Class 
```

更新：我使用acts_as_taggable_on的内置查找器（特别是Tag#named_like）完成了这项工作，但我更喜欢使用acts_as_indexed，因为我将它与我的应用程序中的所有其他模型一起使用，并且我不得不进行特殊情况标记搜索到这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:50:22.120

在 Post 模型上扩展 act_as_indexed 声明可能更容易，以便将与每个帖子相关的标签包含在搜索中。

```
class Post
  acts_as_taggable_on
  acts_as_indexed :fields => [ <existing tag list> , :tag_list] 
```

# asp.net - 如果行为空，ASP.NET GridView 显示文本框

> ID：10554859
> 
> 赞同：0
> 
> 时间：2012-05-11T16:01:32.220
> 
> 标签：asp.net

我的 GridView 数据绑定到 SQL 数据连接，该连接几乎总是返回数据。所以使用 EmptyDataTemplate 对我没有帮助，因为 GridView 永远不应该为空。但我希望前几行是可编辑的，以便用户可以向 GridView 添加新信息。所以我精心设计了我的 Select 语句，总是返回 3 个空行。我希望这些行包含文本框而不是标签。但是这个：

```
<asp:GridView ID="GridView1" runat="server" 
        AutoGenerateColumns="False" DataSourceID="SqlDataSource1" 
        BorderColor="White" BorderStyle="Solid" 
        onselectedindexchanged="GridView1_SelectedIndexChanged" ShowFooter="False" 
        ViewStateMode="Disabled">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                    <input type="checkbox" id ="CheckBox1" class="checkbox" />
                </ItemTemplate>
                <ItemStyle HorizontalAlign="Center" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Serial" SortExpression="Serial">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("Serial") %>'></asp:Label>
                </ItemTemplate>
                <ItemStyle HorizontalAlign="Center" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Model" SortExpression="Model">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("Model") %>'></asp:Label>
                </ItemTemplate>
                <ItemStyle HorizontalAlign="Center" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="From Store">
                <ItemTemplate>
                    <asp:DropDownList ID="DropDownList1" runat="server" CssClass="dropdownlist" 
                        DataSourceID="SqlDataSource2" DataTextField="Store" 
                        SelectedValue='<%# Bind("Store") %>'>
                    </asp:DropDownList>
                </ItemTemplate>
                <ItemStyle HorizontalAlign="Center" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="To Store">
                <ItemTemplate>
                    <asp:DropDownList ID="DropDownList2" runat="server" CssClass="dropdownlist" 
                        DataSourceID="SqlDataSource2" DataTextField="Store">
                    </asp:DropDownList>
                </ItemTemplate>
                <ItemStyle HorizontalAlign="Center" />
            </asp:TemplateField>
        </Columns>
        <FooterStyle HorizontalAlign="Center" ForeColor="White" BorderColor="White" BorderStyle="Solid" />
        <HeaderStyle ForeColor="White" BorderColor="White" BorderStyle="Solid" />
        <RowStyle BorderColor="White" BorderStyle="Solid" ForeColor="White" />            
    </asp:GridView> 
```

产生这个： ![在此处输入图像描述](../Images/41730fe140a381506ec0e024ad10ff34.png)

其中前 3 行具有不可编辑的标签而不是文本框。我想做的事可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:09:49.807

在您的模板字段中添加`<FooterTemplate></FooterTemplate>`这使您的 gridview 的页脚行成为您可以添加新行的地方。当然你需要把物品放在里面`<FooterTemplate>`，但工作和你`<ItemTemplate`的一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:23:29.927

因此，为了满足我的特定目的，我决定只创建一个与此分开的表格，其中包含一个带有文本框的空行。然后是一个按钮，该按钮使用 JQuery 从该表中获取值，以将它们附加到 DataGrid 中不可编辑的行中。从 DataGrid 中删除了标题行，使其看起来像同一个表。

# java - 装配 MASM 事件驱动，就像 JAVA

> ID：10554861
> 
> 赞同：0
> 
> 时间：2012-05-11T16:01:38.193
> 
> 标签：java, events, assembly

是否可以在 cmd 屏幕中进行事件驱动编程移动对象或字符。如何？

例如，当您移动棋盘时，我们必须为每一步打印。我们只想下一个棋盘。

谢谢..：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:05:11.280

很难弄清楚你在问什么，但我想我听到了两个不同的问题：

1.  > 是否可以用汇编语言进行事件驱动编程？

    是的。事实上，相当多的汇编语言编程是事件驱动的（处理中断等）。

2.  > 是否可以写入控制台显示的特定部分，而不仅仅是输出滚动的字符流？

    是的，几乎在所有游戏机上。*你*这样做的方式因控制台而异。您可以查看适用于各种控制台显示器的[ANSI 转义码或类似代码。](http://en.wikipedia.org/wiki/ANSI_escape_code)

# neo4j - 如何重命名 Neo4j Web 管理应用程序中的属性？

> ID：10554862
> 
> 赞同：0
> 
> 时间：2012-05-11T16:01:39.093
> 
> 标签：neo4j

我在 Neo4j webAdmin 应用程序的 2 个节点之间创建了关系（例如“KNOWS”）。如果我想重命名关系（从“KNOWS”到“LOVES”），我该怎么做？

到目前为止，我的解决方案是删除“KNOWS”关系并创建一个新的“LOVE”关系。有没有更简单的方法来做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T08:46:23.663

是的，你就是这样做的。在密码控制台中，您可以执行

```
start n=node(1) match n-[r:KNOWS]->m create n-[:FRIEND]->m delete r 
```

有关示例，请参见[http://tinyurl.com/7umvpro 。](http://tinyurl.com/7umvpro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:17:06.803

如果您使用的是嵌入式 neo4j，则无法重命名。为此，您必须删除现有的 b/w 关系节点，然后再次创建新的 b/w 关系相同的节点。确保你们都在事务中执行此操作。

问候，
Sushil Jain
[点击这里](http://www.sushiljain.in)

# ruby-on-rails - Instant rails 2.0 不会在 Windows 7 中启动服务器

> ID：10554863
> 
> 赞同：0
> 
> 时间：2012-05-11T16:01:39.220
> 
> 标签：ruby-on-rails

我已经使用了即时轨道。在 ruby​​ 控制台窗口中，我创建了一个新的 ruby​​ rails 应用程序，但我无法从脚本文件夹运行文件服务器。为了运行它，我使用了脚本/服务器命令。它说“服务器”无法识别内部或外部命令。我没有以管理员身份运行 Windows

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:25:56.083

我个人不知道您的环境是什么样的，但似乎 Instant Rails 不再维护（2007 年停产）。

话虽这么说，可能是您没有使用 Ruby 可执行文件运行脚本。

我个人建议切换到[RailsInstaller](http://railsinstaller.org/)或[RubyStack](http://bitnami.org/stack/rubystack)。

# socket.io - 如何提供 socket.io 客户端 JavaScript 以及我的其他 JS 库

> ID：10554865
> 
> 赞同：1
> 
> 时间：2012-05-11T16:01:50.573
> 
> 标签：socket.io, client-side

我知道 socket.io JavaScript 客户端文件将由 Node.js 服务器提供，但这并不好，因为我使用了某种 JavaScript 库依赖管理器，如`require.js`or `steal.js`。

我希望我可以从我的主（静态资产）服务器而不是 Node.js 服务器提供 socket.io 客户端 JavaScript 文件。这是可行的吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:28:17.073

根据**[文档](https://github.com/LearnBoost/Socket.IO/wiki/How-do-I-serve-the-client)**，您是如何将 socket.io 服务到客户端的。据我所知，您不能像 node 那样从外部节点服务器向客户端提供 socket.io。如果我错了，请纠正我

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:03:44.750

Socket.io 已经可以从客户端使用，尽管在服务器端它通常与 node.js 一起使用，但没有理由不能从另一个 Javascript 库中使用它。我知道它没有 node.js 依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T10:04:18.030

最简单的方法是包含来自[CDNJS](http://cdnjs.com/)`socket.io`的客户端 JavaScript 库：

```
<script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.10/socket.io.min.js"><script> 
```

# c# - 如何使用 LINQ 转置 2D 集合中的维度？

> ID：10554866
> 
> 赞同：16
> 
> 时间：2012-05-11T16:01:54.543
> 
> 标签：c#, linq

考虑以下结构：

```
IEnumerable<IEnumerable<int>> collection = new[] { 
    new [] {1, 2, 3}, 
    new [] {4, 5, 6}, 
    new [] {7, 8, 9} 
}; 
```

如何枚举此集合，以便获得`IEnumerable<int>`由第一项、第二项等组成的集合？

也就是说，{1, 4, 7}, {2, 5, 8}, ...

（虽然我选择的实现是`int[]`对象，但假设你只有`IEnumerable<int>`功能。谢谢。）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T16:15:17.530

这是一种使用生成器而不是递归的方法。数组构造也更少，所以它可能会更快，但这完全是猜测。

```
public static IEnumerable<IEnumerable<T>> Transpose<T>(
    this IEnumerable<IEnumerable<T>> @this) 
{
    var enumerators = @this.Select(t => t.GetEnumerator())
                           .Where(e => e.MoveNext());

    while (enumerators.Any()) {
        yield return enumerators.Select(e => e.Current);
        enumerators = enumerators.Where(e => e.MoveNext());
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T16:05:40.067

[代码信用在这里](http://www.extensionmethod.net/Details.aspx?ID=152)（未经测试，但看起来不错）。

```
public static class LinqExtensions
{
    public static IEnumerable<IEnumerable<T>> Transpose<T>(this IEnumerable<IEnumerable<T>> values)
    {
        if (!values.Any()) 
            return values;
        if (!values.First().Any()) 
            return Transpose(values.Skip(1));

        var x = values.First().First();
        var xs = values.First().Skip(1);
        var xss = values.Skip(1);
        return
         new[] {new[] {x}
           .Concat(xss.Select(ht => ht.First()))}
           .Concat(new[] { xs }
           .Concat(xss.Select(ht => ht.Skip(1)))
           .Transpose());
    }
} 
```

```
//输入：转置[[1,2,3],[4,5,6],[7,8,9]]
//输出：[[1,4,7],[2,5,8],[3,6,9]]
var result = new[] {new[] {1, 2, 3}, new[] {4, 5, 6}, new[] {7, 8, 9}}.Transpose();     

```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T16:27:01.147

纯 linq 中只有我的 2 美分：

```
 var transpond =           collection.First().Select((frow,i)=>collection.Select(row=>row.ElementAt(i))); 
```

或带有一些杂质：

```
var r1 = collection.First().Select((frow, i) => collection.Select(row => row.ToArray()[i])); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-05T09:30:17.457

假设所有序列的长度相同。

```
static void Main(string[] args)
{
    IEnumerable<IEnumerable<int>> collection =
        new[]
        {
            new [] {1, 2, 3},
            new [] {4, 5, 6 },
            new [] {7, 8, 9}
        };
    Console.WriteLine("\tInitial");
    Print(collection);

    var transposed =
        Enumerable.Range(0, collection.First().Count())
                  .Select(i => collection.Select(j => j.ElementAt(i)));
    Console.WriteLine("\tTransposed");
    Print(transposed);
}

static void Print<T>(IEnumerable<IEnumerable<T>> collection)=>
    Console.WriteLine(string.Join(Environment.NewLine, collection.Select(i => string.Join(" ", i)))); 
```

给出：

```
 Initial
1 2 3
4 5 6
7 8 9
        Transposed
1 4 7
2 5 8
3 6 9 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T16:16:54.947

如果保证所有元素的长度相同，则可以这样做：

```
IEnumerable<IEnumerable<int>> Transpose(IEnumerable<IEnumerable<int>> collection)
{
    var width = collection.First().Count();
    var flattened = collection.SelectMany(c => c).ToArray();
    var height = flattened.Length / width;
    var result = new int[width][];

    for (int i = 0; i < width; i++)
    {
        result[i] = new int[height];
        for (int j = i, k = 0; j < flattened.Length; j += width, k++)
            result[i][k] = flattened[j];
    }

    return result;
} 
```

# objective-c - UIScrollview 问题

> ID：10554871
> 
> 赞同：0
> 
> 时间：2012-05-11T16:02:00.957
> 
> 标签：objective-c, ios5

我正在尝试使用小图像实现 uiscrollview。

1.  当滚动完成时，我需要每端的 uiscrollview 最后一个图像保持在中心，使一侧为空。现在，当滚动完成时，最后一个图像保留在侧面。

2.  我需要知道哪个图像位于 scollview 的中心，以便在其上应用阴影，

    ```
    jugadorSlide.pagingEnabled = YES;
    NSError *error = nil;
    fotosJugadores = [[NSFileManager defaultManager] contentsOfDirectoryAtPath: @"/Users/exular/Developer/GBC/exular/GBC/Caras/" error: &error];

    NSInteger numberOfViews = [fotosJugadores count];
    for (int i = 0; i < numberOfViews; i++) {

        UIImage *myImage = [UIImage imageNamed:[fotosJugadores objectAtIndex:i]];
        CGFloat yOrigin = i * myImage.size.width;
        UIImageView *awesomeView = [[UIImageView alloc] initWithFrame:CGRectMake(yOrigin, 0, myImage.size.width, myImage.size.height)];
        awesomeView.alpha = 0.5;
        awesomeView.image = myImage;
        [self.jugadorSlide addSubview:awesomeView];
        awesomeView=nil;
    }
    jugadorSlide .contentSize = CGSizeMake(65 * numberOfViews,78);
    jugadorSlide.layer.cornerRadius = 11;
    jugadorSlide.layer.masksToBounds = YES; 
    ```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:40:23.920

要让第一张和最后一张图片位于中心，只需在第一张图片之前和最后一张图片之后添加一个空白区域。换句话说：从`yOrigin`at开始`65`并添加`65`到`contentSize`宽度（我假设这`65`是您的图像宽度）：

```
...
CGFloat yOrigin = i * myImage.size.width + 65;
...
jugadorSlide.contentSize = CGSizeMake(65 * numberOfViews + 65,78);
... 
```

要找出哪个图像在中心，请在 UIScrollViewDelegate 方法中添加以下内容`scrollViewDidEndDecelerating:`。

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    int currentIndex = roundf(scrollView.contentOffset.x / 65) - 1;
    UIImageView *currentImage = [scrollView viewWithTag:currentIndex];
} 
```

要轻松获取 currentImage，请在创建图像时为图像添加标签：

```
...
awesomeView.tag = i;
... 
```

# objective-c - 创建 JSON 文件（密钥）

> ID：10554872
> 
> 赞同：0
> 
> 时间：2012-05-11T16:02:17.717
> 
> 标签：objective-c, json, serialization

在我的应用程序中，我通过以下方式使用 JSON 上传数据：

```
NSMutableDictionary *titles = [NSMutableDictionary dictionary];

for (UITextField *textField in messagename)
{
    [titles setObject: textField.text forKey: @"title"];
    // as you can see, here you're replacing the value @ at key "title" with a new object on every pass
}

NSMutableDictionary *message = [NSMutableDictionary dictionary];
for (UITextField *textField in messagetext)
{
    [message setObject: textField.text forKey: @"title"];
    // as you can see, here you're replacing the value @ at key "title" with a new object on every pass
}

NSMutableDictionary *all = [NSMutableDictionary dictionary];

for (UITextField *textField in messagename)
{
    [all setObject: titles forKey: message];
    // as you can see, here you're replacing the value @ at key "title" with a new object on every pass
}

NSString *jsonString = [all JSONRepresentation];
NSData *jsonData = [jsonString dataUsingEncoding: NSUTF8StringEncoding];

[jsonData writeToFile: getImagePath atomically: YES];

NSString *destDir = @"/sandbox/";
[[self restClient] uploadFile:filename toPath:destDir
                withParentRev:nil fromPath:getImagePath]; 
```

唯一的问题是只上传了最后创建的表格的文本，而不是全部。我将标签与案例一起使用，但它太长了，如果一个对象为零，应用程序就会崩溃。另外，我只能用这个结果单独上传“消息”或“消息名称”：

```
{"title":"Untitledjjjj"} 
```

“all”的全部目的是有类似的东西：message1（主键）带有下键标题，带有相应的标题，以及带有相应消息的消息。然后消息2...

我怎样才能做到这一点？？如果我上传所有结果是 {}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:09:03.650

您一直在使用相同的键.. 可能您应该使用数组来代替`titles`and `message`。

我将修复第一部分，这应该足够了：

```
NSMutableArray *titles = [NSMutableArray array];

for (UITextField *textField in messagename)
{
    // add textfield contents to array
    [titles addObject: textField.text];
} 
```

你明白吗？在字典中，一个键只能有一个值。所以你总是用每次调用来替换内容`[dicitonary setObject: ... forKey: @"title"];`

# visual-studio - Visual Studio 中的内存错误，但有大量可用内存

> ID：10554876
> 
> 赞同：0
> 
> 时间：2012-05-11T16:02:29.340
> 
> 标签：visual-studio, visual-studio-2008, memory, bad-alloc

这行代码产生以下错误

```
rs[se_idx][ev_idx][re_idx].trs = new re_class[report_size]; 
```

> 内存位置 0x0037c29c 处的 std::bad_alloc

我认为这与“内存不足”有关。当我减少分配的数量时，它运行良好。

我的机器上有足够的内存（16 GB），资源监视器显示只有一小部分内存被 Visual Studio 使用。我添加了编译器选项`/F 4000000000`和`/LARGEADDRESSAWARE`，但仍然出现错误。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:28:42.313

您确定您的操作系统可以利用整个 16GB 并且您使用的是 64 位版本的 VC++

[http://msdn.microsoft.com/en-us/library/h2k70f3s%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/h2k70f3s%28v=vs.90%29.aspx)

[http://msdn.microsoft.com/en-us/library/9yb4317s%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/9yb4317s%28v=vs.90%29.aspx)

# animation - 具有多个骨架的 collada 动画

> ID：10554881
> 
> 赞同：3
> 
> 时间：2012-05-11T16:02:43.240
> 
> 标签：animation, collada

我已经能够使用我自己编写的 collada 加载器加载静态几何图形。然而，下一步是添加动画。我遇到的问题是当 instance_controller 有多个骨架时该怎么办。在我当前的模型中，我试图加载每个被操纵的节点都引用每个关节。例如

```
<instance_controller url="#geom-Cylinder018-skin1">
<skeleton>#node-Bone024</skeleton>
<skeleton>#node-Bone020</skeleton>
<skeleton>#node-Bone016</skeleton>
<skeleton>#node-Bone009</skeleton>
<skeleton>#node-Bone005</skeleton>
<skeleton>#node-Bone001</skeleton>
<skeleton>#node-Bone025</skeleton> 
```

我不确定我应该怎么做？目前，我将它们全部链接到 visual_scene 中的正确节点。但是，模型中的每个节点都会执行您在上面看到的操作！我已经使用 AssimpView 加载了它，只是为了看到它实际被渲染并且工作正常。任何人都可以向我解释在上述情况下我应该做什么。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T16:33:30.387

在[COLLADA 规范](http://www.khronos.org/files/collada_spec_1_4.pdf)中，它说`<skeleton>`下面`<instance_controller>`：

> 指示皮肤控制器从哪里开始搜索它需要的关节节点

因此，在 instance_controller 中有多个骨架指针仅意味着应该搜索所有指向的节点以找到正确的关节节点。它`<controller>`本身会告诉您哪些节点应该用于关节。它将有一个看起来像这样的源：

```
<library_controllers>
  <controller id="skin">
    <skin source="#base_mesh">
      <source id="Joints">
        <Name_array count="4"> Root Spine1 Spine2 Head </Name_array>
        ...
      </source>
      ...
  </controller>
</library_controllers> 
```

指向的 应搜索每个关节名称为的`<node>`节点。例如，对于上述控制器，指向的节点如下所示：`<skeleton>``sid`

```
<node id="Skeleton1" sid="Root">
  <node sid="Spine1">
    <node sid="Spine2">
      <node sid="Head"/>
    </node>
  </node>
</node> 
```

控制器中的每个关节名称对应于具有该 sid 值的节点。如果您有多个骨架标签，则仅意味着您需要为给定的 sid 搜索更多节点。

# tomcat7 - 打开 Tomcat 7 的管理控制台时出现 AccessControlException

> ID：10554886
> 
> 赞同：0
> 
> 时间：2012-05-11T16:02:53.723
> 
> 标签：tomcat7

当我刚刚通过这个网址打开tomcat 7.0的管理控制台时，我遇到了异常

```
http://localhost:8085/

java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "accessClassInPackage.org.apache.jasper")
    java.security.AccessControlContext.checkPermission(Unknown Source)
    java.security.AccessController.checkPermission(Unknown Source)
    java.lang.SecurityManager.checkPermission(Unknown Source)
    java.lang.SecurityManager.checkPackageAccess(Unknown Source)
    sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    java.lang.ClassLoader.loadClass(Unknown Source)
    java.lang.ClassLoader.loadClass(Unknown Source)
    org.apache.jasper.servlet.JspServletWrapper.<init>(JspServletWrapper.java:120)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:382)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:274)
    org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:271)
    java.security.AccessController.doPrivileged(Native Method)
    javax.security.auth.Subject.doAsPrivileged(Unknown Source)
    org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:306)
    org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:166) 
```

请任何人建议如何解决上述问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T05:15:59.393

在文件 /etc/tomcat6/policy.d/04webapps.policy 中更改您的 webapp 的权限

添加这个->

```
grant codeBase "file:${catalina.base}/webapps/<name of your webapp>/-" {
  permission java.lang.reflect.ReflectPermission "suppressAccessChecks";
  permission java.security.AllPermission;
}; 
```

它对我有用。希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:23:25.130

不要使用安全管理器运行或恢复默认权限集（标准安装中的 $CATALINA_BASE/conf/catalina.policy）。默认的 Tomcat 安装将在有或没有安全管理器的情况下工作。

# entity-framework - 更改表和列名称映射实体框架 v4.3

> ID：10554888
> 
> 赞同：19
> 
> 时间：2012-05-11T16:03:06.657
> 
> 标签：entity-framework, entity-framework-4

我有一个应用程序，它具有从现有数据库生成的工作实体模型。我必须将我的应用程序指向一个具有相同架构的新数据库，只是表名和列名不同。

例如，我当前的模式有名为“Answer”的表。我需要指向的新模式具有完全相同的表，除了它被命名为“tblAnswer”。

我的专栏也发生了变化。以前称为“AnswerId”的列，现在是“zAnswerId”。不要问“z”前缀，这是一个很长的故事，但它在每一列。

那么，我必须将这个现有的实体模型（从数据库生成）指向一个新的数据库并调整映射？我一直在尝试一些用于“代码优先”映射的技术，如[本指南](http://weblogs.asp.net/scottgu/archive/2010/07/23/entity-framework-4-code-first-custom-database-schema-mapping.aspx)中所述，但没有任何运气。我只是不知道这是否是正确的方法，或者是否有更有意义的东西。

建议？提前致谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-11T16:06:05.693

您可以在 web.config 文件中更改数据库。

使用数据注释来使用不同的表名和列名。

例如：

```
 [Table("tblAnswer")]
    class Answer
    {
      [Column("zAnswerId")]
      public int AnswerId { get; set; }
    } 
```

# objective-c - 无线认证页面 iOS 应用

> ID：10554890
> 
> 赞同：0
> 
> 时间：2012-05-11T16:03:23.110
> 
> 标签：objective-c, ios, network-programming, wifi, http-status-codes

我不太确定如何准确地表达这一点，所以希望有人能理解它。我一直在开发一款 iPad 应用程序，该应用程序可以将文件从服务器同步到您的 iPad，并允许您使用各种文件构建演示文稿。我正在与此应用程序合作的公司有一个无线网络，要求您每小时重新进行身份验证。因此，任何 HTTP 请求都不会每隔一小时获得预期的 JSON api 响应，而是拉下重新验证​​无线网络所需的页面。我想知道是否有与发送该页面相关的特定 HTTP 响应代码或测试该页面的“最佳实践”方式而不是 JSON。

当然，我可以测试一下响应是否为 HTML，但这并不能解释我尚未找到的其他重定向响应。我可以测试部分 HTML 以查看它是否与 html 的预定部分匹配，但我是外部承包商。我不能保证在我完成交付后他们不会更改页面的标记或措辞。

那么，有没有人知道一种“最佳实践”方法来测试应用程序是否需要在同步之前重新验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:38:02.583

我注意到在 Mac OS X 甚至 iOS 上，当您连接到新的 Wi-Fi 网络时，它会尝试联系`www.apple.com`. 这样做是为了检查互联网连接是否可用。如果它不可用，则会弹出 Captive Network Assistant，向您显示身份验证页面，或者有时当我在星巴克时，会显示一个广告。

根据您的问题，由于 Apple 本身就是这样做的，我认为您可以检查 HTTP 响应代码，在 HTML 标记中查找某些内容（虽然有点不鼓励）或尝试连接到已知服务器（Reachability）。

对于一家从事有据可查的项目的公司，我很确定他们不会在不确保您的应用程序一旦部署后继续工作的情况下进行更改。

# postgresql-8.4 - 查询输出中的空行

> ID：10554891
> 
> 赞同：0
> 
> 时间：2012-05-11T16:03:26.063
> 
> 标签：postgresql-8.4

系统：Windows XP Professional Postgresql 8.4 在本地存储的数据库上运行（端口 5432）

我正在使用以下代码将大小合适的文件导入数据库中的表中：

```
-- Create headers and column variable types
CREATE TABLE special_raw_emissions
(
ORG_ID  int     ,
COUNTY  text    ,
MID_UP_STREAM   text    ,
SITE_ID int ,
PRF_ID  int ,
RN  text    ,
ACCOUNT text    ,
CERTIFYING_COMPANY_ORGANIZATION text    ,
LEASE_NAME  text    ,
LEASE_NUMBER    text    ,
SOURCE  text    ,
FACILITY_ID int ,
PROFILE text    ,
LATITUDE    float   ,
LONGITUDE   float   ,
OIL_bbl_yr  float   ,
CASINGHEAD_GAS_scf_yr   float   ,
GAS_WELL_GAS_scf_yr float   ,
CONDENSATE_bbl_yr   float   ,
PRODUCED_WATER_bbl_yr   float   ,
TOTAL_VOC_EMISSION_tpy_EXTRACTED_FROM_SE_TAB    float   ,
CONTROL_PRESENT boolean ,
CONTROL_TYPE    text    ,
CONTROL_TYPE_IF_OTHER_DESCRIBE  text    ,
NOX_CONTROL_EFFICIENCY_PCNT float   ,
VOC_CONTROL_EFFICIENCY_PCNT float   ,
VENTED_VOLUME_scf_yr    float   ,
BLOWDOWN_EVENTS int ,
OPERATING_HOURS_hrs_yr  float   ,
FUEL_CONSUMPTION_MMscf_yr   float   ,
PILOT_GAS_USED_MMscf_yr float   ,
WASTE_GAS_COMBUSTED_MMscf_yr    float   ,
GAS_TREATED_MMscf_yr    float   ,
AVERAGE_DAILY_PRODUCTION_RATE_MMscf_day float   ,
THROUGHPUT_bbl_yr   float   ,
SEPARATOR_PRESSURE_psig float   ,
SEPARATOR_TEMPERATURE_deg_F float   ,
GAS_GRAVITY float   ,
MAXIMUM_DAILY_PRODUCTION_bbl_day    text    ,
SOURCE_ANNUAL_THROUGHPUT_bbl_yr float   ,
ANNUAL_THROUGHPUT_bbl_yr    float   ,
MAXIMUM_DAILY_PRODUCTION_RATE__bbl_day  float   ,
SERIAL_NUMBER   text    ,
MAKE    text    ,
MODEL   text    ,
FUEL_TYPE   text    ,
MAXIMUM_DESIGN_CAPACITY text    ,
BURN_TYPE   text    ,
CYCLE   text    ,
ENGINE_RATING   text    ,
ASSIST_TYPE text    ,
AUTOMATIC_AIR_TO_FUEL_RATIO_CONTROLLER  boolean ,
DESTRUCTION_EFFICIENCY  text    ,
SUBJECT_TO_MACT boolean ,
IF_YES_INDICATE_MAJOR_OR_AREA_SOURCE    text    ,
SOURCE_TYPE text    ,
IF_CONDENSER_WHAT_IS_EFFICIENCY text    ,
LIQUID_TYPE text    ,
IS_HARC_51C_ACCEPTED_METHOD text    ,
WOULD_YOU_LIKE_TO_USE_HARC  text    ,
SINGLE_OR_MULTIPLE_TANKS    text    ,
NUMBER_OF_TANKS int ,
CONFIGURATION_TYPE  text    ,
WORKING_AND_BREATHING_EMISS_CALC_METHOD text    ,
FLASH_EMISS_CAL_METHOD  text    ,
FLASH_IF_OTHER_PLEASE_DESCRIBE  text    ,
IS_MONITORING_PROGRAM_VOLUNTARY int ,
AIR_ACTUATED_PNEUMATIC_VALVES_GAS   int ,
AIR_ACTUATED_PNEUMATIC_VALVES_LIGHT_OIL int ,
CONNECTORS_GAS  int ,
CONNECTORS_LIGHT_OIL    int ,
FLANGES_GAS int ,
FLANGES_LIGHT_OIL   int ,
GAS_ACTUATED_PNEUMATIC_VALVES_GAS   int ,
GAS_ACTUATED_PNEUMATIC_VALVES_LIGHT_OIL int ,
IS_COMPLETION_OPTIONAL  text    ,
NONACTUATED_VALVES_GAS  int ,
NONACTUATED_VALVES_LIGHT_OIL    int ,
OPEN_ENDED_LINES_GAS    int ,
OPEN_ENDED_LINES_LIGHT_OIL  int ,
OTHER_GAS   int ,
OTHER_LIGHT_OIL int ,
PUMP_SEALS_GAS  int ,
PUMP_SEALS_LIGHT_OIL    int ,
TOTAL_COMPONENTS    int ,
TOTAL_PUMPS_AND_COMPRESSOR_SEALS    text    ,
TOTAL_UNCONTROLLED_RELIEF_VALVES    text    ,
GAS_ACTUATED_PNEUMATIC_VALVES_HEAVY_OIL int ,
AIR_ACTUATED_PNEUMATIC_VALVES_HEAVY_OIL int ,
NON_ACTUATED_VALVES_HEAVY_OIL   int ,
PUMP_SEALS_HEAVY_OIL    int ,
CONNECTORS_HEAVY_OIL    int ,
FLANGES_HEAVY_OIL   int ,
OPEN_ENDED_LINES_HEAVY_OIL  int ,
OTHER_HEAVY_OIL int ,
GAS_ACTUATED_PNEUMATIC_VALVES_WATER_SLASH_OIL   text    ,
AIR_ACTUATED_PNEUMATIC_VALVES_WATER_SLASH_OIL   int ,
NON_ACTUATED_VALVES_WATER_SLASH_OIL int ,
PUMP_SEALS_WATER_SLASH_OIL  int ,
CONNECTORS_WATER_SLASH_OIL  int ,
FLANGES_WATER_SLASH_OIL int ,
OPEN_ENDED_LINES_WATER_SLASH_OIL    int ,
OTHER_WATER_SLASH_OIL   text    ,
VOC_Gas_Mole_Percent    float   ,
BENZENE_Gas_Mole_Percent    float   ,
ETHYBENZENE_Gas_Mole_Percent    float   ,
n_HEXANE_Gas_Mole_Percent   float   ,
TOLUENE_Gas_Mole_Percent    float   ,
XYLENE_S_Gas_Mole_Percent   float   ,
HAPs_Gas_Mole_Percent   float   ,
VOC_Liquid_Mole_Percent float   ,
BENZENE_Liquid_Mole_Percent float   ,
ETHYBENZENE_Liquid_Mole_Percent float   ,
n_HEXANE_Liquid_Mole_Percent    float   ,
TOLUENE_Liquid_Mole_Percent float   ,
XYLENE_S_Liquid_Mole_Percent    float   ,
HAPs_Liquid_Mole_Percent    float   ,
VOC_Control_Factor_PERC float   ,
CH4_Emission_Factor_tonne_Btu   float,
Engine_LF   float   ,
CO2_M1  float   ,
CO2_M2  float   ,
CH4_M1  float   ,
CH4_M2  float   ,
Source_Class    text    ,
Site_class  text);

-- Import data into database, note that the delimiter is '~'.
COPY special_raw_emissions
FROM 'C:/PostgreSQL/special results/batch.csv'
WITH DELIMITER AS '~' 
CSV; 
```

我遇到了一些奇怪的错误，所以我做了一个QA检查并查询了这个表，看看数据是否正确导入，如下所示是查询：

```
\o 'c:/postgresql/special_raw_emissions.csv'
select * from special_raw_emissions;
\o 
```

我的查询返回所有导入的数据，但随机添加了“空行”。下面显示的是“空行”的示例。

数据输入：

```
155 Wise    Midstream   8250    1
155 Wise    Midstream   8250    1
4   Wise    Upstream    7220    1
4   Wise    Upstream    7220    1
95  Wise    Midstream   7742    1
95  Wise    Midstream   7742    1
7   Clay    Upstream    1990    7
7   Cooke   Upstream    1414    7 
```

具有空行的数据（下面显示的示例建议了一种模式，在较大的输出文件中不是这种情况）

```
7   Clay    Upstream    1990    7
7   Cooke   Upstream    1414    7

7   Cooke   Upstream    1415    7
7   Cooke   Upstream    1416    7

7   Cooke   Upstream    3355    7
7   Cooke   Upstream    3356    7

7   Cooke   Upstream    1418    7
7   Cooke   Upstream    3357    7

7   Cooke   Upstream    1419    7
7   Cooke   Upstream    7489    7 
```

就像我之前所说的，这些空行导致我的查询丢失某些数据并且我正在丢失信息。

非常感谢任何帮助或指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:19:04.397

问题分两步解决。

1.  在 excel 中打开原始数据，使用适当的分隔符（在我的情况下为“~”）保存数据并关闭文件。

2.  将数据重新导入数据库。

我的猜测是，使用另一个 psql 查询创建的原始数据以某种方式损坏或缺少行结束字符。在 excel 中重新保存修复了该问题并允许导入正常工作。

我仍然觉得好像问题没有解决，我只是找到了一个解决方法。

# c# - C#中的IPC，将文本从一个exe发送到另一个exe

> ID：10554899
> 
> 赞同：2
> 
> 时间：2012-05-11T16:03:49.153
> 
> 标签：c#, wpf

我想从 WPF 应用程序的文本框向打开的记事本发送一条消息。单击文本框旁边的按钮后，我的意思是，我希望将内容写入记事本。

如何在 2 个不同的应用程序之间发送消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:21:52.257

```
[DllImport("user32.dll", EntryPoint = "FindWindowEx")]
public static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, string lpszWindow);

[DllImport("User32.dll")]
public static extern int SendMessage(IntPtr hWnd, int uMsg, int wParam, string lParam);

private static void DoSendMessage(string message)
{
    Process notepad = Process.Start(new ProcessStartInfo("notepad.exe"));
    notepad.WaitForInputIdle();

    if (notepad != null)
    {
        IntPtr child = FindWindowEx(notepad.MainWindowHandle, new IntPtr(0), "Edit", null);
        SendMessage(child, 0x000C, 0, message);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:16:56.943

要在您控制的两个应用程序之间发送数据，您可以使用[NamedPipeClientStream](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeclientstream.aspx)和[NamedPipeServerStream](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeserverstream.aspx)

# c#-4.0 - 取消订阅用户控件中的事件的标准方法

> ID：10554900
> 
> 赞同：2
> 
> 时间：2012-05-11T16:03:55.073
> 
> 标签：c#-4.0, idisposable, windows-forms-designer

我有一个正在监听事件的用户控件。

```
public partial class ObserverControl : UserControl
{
    public ObserverControl()
    {
        InitializeComponents();

        Observatory.DataUpdated += OnDataUpdate;
    }

    private void OnDataUpdated(object sender, EventArgs e)
    {
        // Process new data
    }
} 
```

确保关闭此 UserControl 时取消订阅事件的最佳方法是什么？目前，它关闭 Observatory 类仍在尝试向 ObserverControl 发送更新。

我考虑过使用 IDisposable，但我不确定它是如何工作的（特别是因为该`Dispose(bool disposing)`方法已经在设计器代码中被覆盖）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:21:10.260

将 dispose 方法移出生成的文件并添加

```
 protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);

            Observatory.DataUpdated -= OnDataUpdate;

        } 
```

# css - CSS | 固定 div 内高度可变的购物车

> ID：10554904
> 
> 赞同：0
> 
> 时间：2012-05-11T16:04:17.290
> 
> 标签：css, cart, css-position

[http://tinyurl.com/cc4qkee](http://tinyurl.com/cc4qkee)

您可以在右上角看到一个购物车。如果菜单未修复，它可以正常工作，但如果它已修复并且您将大量产品放入购物车，您将无法向下滚动查看购物车的其余部分。

我不太了解javascript，但我在另一个项目[http://tinyurl.com/bljpxm4](http://tinyurl.com/bljpxm4)中使用了javascript 方法，但购物车仍然无法正常工作。

关于如何让购物车正常工作并有固定菜单的任何想法？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:24:35.063

您可以更改购物车弹出窗口的样式吗？也许只是将其汇总为项目数、总数等。您也可以尝试删除图像，这将为您提供更多空间。

另一个想法是修改 mouseover 和 mouseout jquery 函数以更改`#top`元素的样式以在显示菜单时删除固定位置。您还必须从`#header`. 这可能有点棘手。您可能必须使用位置：绝对，获取当前滚动条位置，设置`top`为该位置，并监视滚动条位置`#top`以防有人向上滚动。在鼠标移出时，您会将所有内容设置回原来的样子。

第三个想法是设置购物车下拉的高度，并使用溢出：自动在购物车区域为您提供滚动条。

# sql - 为什么 tsql 变量在第二次调用时不保持其值？

> ID：10554905
> 
> 赞同：0
> 
> 时间：2012-05-11T16:04:28.700
> 
> 标签：sql, sql-server, tsql

如果在 SSMS 中运行 exec 存储过程命令，它会生成以下脚本：

```
USE [MY_DB]
GO

DECLARE @return_value int

EXEC    @return_value = [dbo].[usr_DailyReportsEmpty]
        @username = N'someuser'

SELECT  'Return value' = @return_value

GO 
```

但是，当我运行脚本时，EXEC 返回 16，SELECT 返回 0。这是为什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:23:32.210

您需要更改过程以显式返回您希望捕获的值。正如上面 Barry Kaye 提到的，当您简单地选择一个值来返回结果集时，该过程将返回 0 表示成功，但如果您使用 RETURN 语句，该过程将返回该值。

在下面的示例中，执行第一个过程时将选择 1 作为结果集，但在 @return1 中捕获的值将是 0 表示成功。第二个过程没有结果集，@return2 中捕获的值将是 3。

```
CREATE PROCEDURE Test1
AS
    SELECT 1;
GO

CREATE PROCEDURE Test2
AS
    RETURN 3;
GO

DECLARE @return1 INT, @return2 INT;
EXEC @return1 = Test1;
EXEC @return2 = Test2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:15:44.533

在 SQL Server 中，当您`EXEC`执行存储过程时，RETURN_VALUE 通常表示成功或失败。0（零）通常表示成功。这与`SELECT`陈述的结果不同。因此，您的 SP 可能为`SELECT`5，但您仍会收到`RETURN_VALUE`0 表示 SP 执行没有错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T19:47:57.100

您也可以使用输出变量，特别是如果您想要返回的不是整数。

# php - SELECT查询麻烦——用户登录系统

> ID：10554906
> 
> 赞同：0
> 
> 时间：2012-05-11T16:04:53.327
> 
> 标签：php, mysql

我只是想编写一个简单的脚本来验证尝试登录的用户的用户名和密码......然后开始一个会话。但是，我遇到了一些麻烦。

当我尝试运行下面的脚本时，SUCCESS 不会打印出来。好像用户名和密码不正确，但是，我知道输入的用户名和密码实际上是正确的。

```
$username = $_POST['username'];
$password = $_POST['password'];

$result = mysql_query("SELECT * FROM users WHERE username='.$username.' AND password='.$password.'");

while($row = mysql_fetch_array($result)){
    echo 'SUCCESS';
} 
```

但是，当我尝试运行下面的脚本时，成功打印了两次（这是到目前为止我在数据库中拥有的示例用户数），这是正确的。

我猜我上面的 AND mySQL 查询有问题，但是，这对我来说似乎是正确的……我上面的第一个查询有问题吗？如果不是，那么还有什么问题？

```
$username = $_POST['username'];
$password = $_POST['password'];

$result = mysql_query("SELECT * FROM users");

while($row = mysql_fetch_array($result)){
    echo 'SUCCESS';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:07:12.187

~~`username`是受保护的关键字~~，试试这个：

```
$result = mysql_query("SELECT * FROM `users` WHERE `username`='$username' AND `password`='$password'"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T16:07:56.363

您正在[解析变量](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)，而不是[连接](http://php.net/manual/en/language.operators.string.php)它们，您不需要`.`.

```
"SELECT * FROM users WHERE username='$username' AND password='$password'" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T16:08:26.077

忽略巨大的[SQL 注入](http://bobby-tables.com)漏洞，您正在错误地构建查询字符串：

```
$result = mysql_query("SELECT * FROM users WHERE username='.$username.' AND password='.$password.'");
                                                           ^         ^ 
```

您仍处于指示句点所在的“字符串模式”（以及密码部分），因此您将文字句点嵌入到查询字符串中，而不是进行字符串连接。

远程期间，你会更好（但仍然容易受到 sql 注入）：

```
$result = mysql_query("SELECT * FROM users WHERE username='$username' AND password='$password'"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T16:07:21.230

试试这个：

```
$result = mysql_query("SELECT * FROM users WHERE username=\"$username\" AND password=\"$password\""); 
```

显然，这不是插入数据的好方法。您应该至少查看 mysqli 以插入数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T16:08:26.347

试试这条线：

```
$result = mysql_query("SELECT * FROM `users` WHERE `username`='".$username."' AND `password`='".$password."'"); 
```

注意`"`我在寻找之前添加的额外的`'.$username.'`

# c# - 将文件字节流发送到 WCF 服务时，为什么会出现“401 - 未经授权”错误？

> ID：10554908
> 
> 赞同：0
> 
> 时间：2012-05-11T16:05:04.383
> 
> 标签：c#, wcf, silverlight, iis-7

我有一个 WCF 服务，其中托管在 II7 上的 basicHttp 绑定从 Silverlight 客户端调用。我可以毫无问题地调用端点上的所有服务，除了一个。

我正在尝试上传文件，以便服务接收字节数组。如果我上传大小超过 3MB 的文件，我会收到以下错误。

当我尝试调用此服务时：

```
[OperationContract]
public AuditResponse UploadVendorAuditFile( int vendorID, 
                                            int sourceSystemID, 
                                            string fileName,
                                            byte[] fileBytes )
{
    // stuff
} 
```

我收到以下错误：

> 401 - 未经授权：由于凭据无效，访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

这是我的配置。

**端点绑定**

```
<basicHttpBinding>
  <binding 
    name="basicHttpBindingConfiguration" 
    maxBufferSize="2147483647"
    maxBufferPoolSize="2147483647" 
    maxReceivedMessageSize="2147483647"
    >
    <readerQuotas 
    maxDepth="2147483647" 
    maxStringContentLength="2147483647"
    maxArrayLength="2147483647" 
    maxBytesPerRead="2147483647" 
    maxNameTableCharCount="2147483647" 
    />
    <security mode="TransportCredentialOnly">
    <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm="" />
    </security>
  </binding>
</basicHttpBinding> 
```

**服务配置**

```
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

**客户**

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding 
              name="BasicHttpBinding_WMService" 
              maxBufferSize="2147483647"
              maxReceivedMessageSize="2147483647"
              >
                <security mode="TransportCredentialOnly" />
            </binding>
        </basicHttpBinding>
    </bindings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:21:05.643

它失败的文件的大小是否大于 1MB 左右？尝试启用[**跟踪**](http://msdn.microsoft.com/en-us/library/ms733025.aspx) 以了解错误的实际原因。

如果文件较大，则可能是读取器配额设置的原因，需要在**服务器端和客户端设置更大的值**

还可以考虑在您的 serviceBehaviour 中添加 maxItemsInObjectGraph，如图所示

```
 <serviceBehaviors>        
    <behavior>
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors> 
```

**注意：确保在客户端和服务器端具有相同的 readerQuotas 设置**

还尝试在您的 web.config 中设置以下设置

```
<system.web>  
     <httpRuntime maxRequestLength ="32768"/>
  </system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:08:15.727

确保在 WCF 服务的绑定中设置最大消息大小。

例如：

```
<binding name="xxx" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
  <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="50000000" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
</binding> 
```

# android - 尝试创建 ListFragment 崩溃

> ID：10554910
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:05:15.407
> 
> 标签：android, android-listfragment

我正在尝试将 ListFragment 添加到 Gingerbread 中的 Activity 中，但是在创建 Activity 并且没有堆栈跟踪时，Android 会崩溃。我已经验证我正在使用兼容性库导入。这是我的 ListFragment 代码：

```
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.*;

public class ListViewFragment extends ListFragment {
  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
    List listData = getListData().

    setListAdapter(new ListViewAdapter(getActivity(), listData));
  }

  class ListViewAdapter extends BaseAdapter implements ListAdapter {
    .
    .
    .
  }    
} 
```

我也试过：

```
ListView listView = getListView();
listView.setAdapter(new ListViewAdapter(getActivity(), listData); 
```

代替具有相同结果的 setListAdapter() 调用。

当我从一个 Fragment 扩展并使用 ListView 扩展布局文件时，它工作正常。当我尝试在 ListFragment 中使用固有的 ListView 时，似乎有些不同。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:28:46.870

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.your_layout, container, false);
    return v;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
        // Set up your list in here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:07:59.373

在 onCreateView 中尝试比 onActivityCreated 更好。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = super.onCreateView( inflater, container, savedInstanceState );
    List listData = getListData().
    setListAdapter(new ListViewAdapter(getActivity(), listData));  
    return v;
}//met 
```

# c# - 如何使用 C# 中的 STARTUPINFOEX 调用 CreateProcess() 并重新设置孩子的父级

> ID：10554913
> 
> 赞同：6
> 
> 时间：2012-05-11T16:05:41.633
> 
> 标签：c#, .net, pinvoke, createprocess, reparenting

我需要创建一个新进程，但它是另一个进程的“子”，而不是当前进程，例如重新创建新进程。

以下让我几乎到了.NET：如何使用 C#和.NET[中的 STARTUPINFOEX 调用 CreateProcessAsUser()](https://stackoverflow.com/questions/1432646/net-how-to-call-createprocessasuser-with-startupinfoex-from-c-sharp) [：如何 PInvoke UpdateProcThreadAttribute](https://stackoverflow.com/questions/1427196/net-how-to-pinvoke-updateprocthreadattribute)和[http://winprogger.com/launching-a-non-child-process/](http://winprogger.com/launching-a-non-child-process/)

```
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;

public class ProcessCreator
{
    [DllImport("kernel32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool CreateProcess(
        string lpApplicationName, string lpCommandLine, ref SECURITY_ATTRIBUTES lpProcessAttributes,
        ref SECURITY_ATTRIBUTES lpThreadAttributes, bool bInheritHandles, uint dwCreationFlags,
        IntPtr lpEnvironment, string lpCurrentDirectory, [In] ref STARTUPINFOEX lpStartupInfo,
        out PROCESS_INFORMATION lpProcessInformation);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool UpdateProcThreadAttribute(
        out IntPtr lpAttributeList, uint dwFlags, IntPtr Attribute, IntPtr lpValue,
        IntPtr cbSize, IntPtr lpPreviousValue, IntPtr lpReturnSize);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool InitializeProcThreadAttributeList(
        out IntPtr lpAttributeList, int dwAttributeCount, int dwFlags, ref IntPtr lpSize);

    public static bool CreateProcess(int parentProcessId)
    {
        const uint EXTENDED_STARTUPINFO_PRESENT = 0x00080000;
        const int PROC_THREAD_ATTRIBUTE_PARENT_PROCESS = 0x00020000;

        var pInfo = new PROCESS_INFORMATION();
        var sInfoEx = new STARTUPINFOEX();
        sInfoEx.StartupInfo = new STARTUPINFO();

        if (parentProcessId > 0)
        {
            var lpSize = IntPtr.Zero;
            IntPtr dummyPtr;
            var success = InitializeProcThreadAttributeList(out dummyPtr, 1, 0, ref lpSize);
            if (success || lpSize == IntPtr.Zero)
            {
                return false;
            }

            sInfoEx.lpAttributeList = Marshal.AllocHGlobal(lpSize);
            if (sInfoEx.lpAttributeList == IntPtr.Zero)
            {
                return false;
            }

            success = InitializeProcThreadAttributeList(out sInfoEx.lpAttributeList, 1, 0, ref lpSize);
            if (!success)
            {
                return false;
            }

            var parentHandle = Process.GetProcessById(parentProcessId).Handle;
            success = UpdateProcThreadAttribute(
                out sInfoEx.lpAttributeList,
                0,
                (IntPtr)PROC_THREAD_ATTRIBUTE_PARENT_PROCESS,
                parentHandle,
                (IntPtr)IntPtr.Size,
                IntPtr.Zero,
                IntPtr.Zero);
            if (!success)
            {
                return false;
            }

            sInfoEx.StartupInfo.cb = Marshal.SizeOf(sInfoEx);
        }

        var pSec = new SECURITY_ATTRIBUTES();
        var tSec = new SECURITY_ATTRIBUTES();
        pSec.nLength = Marshal.SizeOf(pSec);
        tSec.nLength = Marshal.SizeOf(tSec);
        var lpApplicationName = Path.Combine(Environment.SystemDirectory, "notepad.exe");
        return CreateProcess(lpApplicationName, null, ref pSec, ref tSec, false, EXTENDED_STARTUPINFO_PRESENT, IntPtr.Zero, null, ref sInfoEx, out pInfo);
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    struct STARTUPINFOEX
    {
        public STARTUPINFO StartupInfo;
        public IntPtr lpAttributeList;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    struct STARTUPINFO
    {
        public Int32 cb;
        public string lpReserved;
        public string lpDesktop;
        public string lpTitle;
        public Int32 dwX;
        public Int32 dwY;
        public Int32 dwXSize;
        public Int32 dwYSize;
        public Int32 dwXCountChars;
        public Int32 dwYCountChars;
        public Int32 dwFillAttribute;
        public Int32 dwFlags;
        public Int16 wShowWindow;
        public Int16 cbReserved2;
        public IntPtr lpReserved2;
        public IntPtr hStdInput;
        public IntPtr hStdOutput;
        public IntPtr hStdError;
    }

    [StructLayout(LayoutKind.Sequential)]
    internal struct PROCESS_INFORMATION
    {
        public IntPtr hProcess;
        public IntPtr hThread;
        public int dwProcessId;
        public int dwThreadId;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct SECURITY_ATTRIBUTES
    {
        public int nLength;
        public IntPtr lpSecurityDescriptor;
        public int bInheritHandle;
    }
} 
```

ProcessCreator.CreateProcess(0) 将记事本作为当前进程的子进程启动，这是默认行为。到目前为止，一切都很好。

如果传入的值不是 0，则代码尝试将记事本作为进程 ID 与输入值匹配的进程的子进程启动（我假设该进程现在存在）。

不幸的是，该部分不起作用并引发以下异常：

检测到 FatalExecutionEngineError 消息：运行时遇到致命错误。错误地址位于线程 0x1de0 上的 0x69a2c7ad。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-21T08:18:45.867

您的代码有两个问题。首先，and函数的`lpAttributeList`参数必须输入为没有修饰符。其次，函数的参数必须是*指向*属性值（在您的情况下为）的指针，而不是值本身。下面是固定代码。`InitializeProcThreadAttributeList``UpdateProcThreadAttribute``IntPtr``out``lpValue``UpdateProcThreadAttribute`*`parentHandle`*

 *```
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;

public class ProcessCreator
{
    [DllImport("kernel32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool CreateProcess(
        string lpApplicationName, string lpCommandLine, ref SECURITY_ATTRIBUTES lpProcessAttributes,
        ref SECURITY_ATTRIBUTES lpThreadAttributes, bool bInheritHandles, uint dwCreationFlags,
        IntPtr lpEnvironment, string lpCurrentDirectory, [In] ref STARTUPINFOEX lpStartupInfo,
        out PROCESS_INFORMATION lpProcessInformation);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool UpdateProcThreadAttribute(
        IntPtr lpAttributeList, uint dwFlags, IntPtr Attribute, IntPtr lpValue,
        IntPtr cbSize, IntPtr lpPreviousValue, IntPtr lpReturnSize);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool InitializeProcThreadAttributeList(
        IntPtr lpAttributeList, int dwAttributeCount, int dwFlags, ref IntPtr lpSize);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool DeleteProcThreadAttributeList(IntPtr lpAttributeList);

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern bool CloseHandle(IntPtr hObject);

    public static bool CreateProcess(int parentProcessId)
    {
        const uint EXTENDED_STARTUPINFO_PRESENT = 0x00080000;
        const int PROC_THREAD_ATTRIBUTE_PARENT_PROCESS = 0x00020000;

        var pInfo = new PROCESS_INFORMATION();
        var sInfoEx = new STARTUPINFOEX();
        sInfoEx.StartupInfo.cb = Marshal.SizeOf(sInfoEx);
        IntPtr lpValue = IntPtr.Zero;

        try
        {
            if (parentProcessId > 0)
            {
                var lpSize = IntPtr.Zero;
                var success = InitializeProcThreadAttributeList(IntPtr.Zero, 1, 0, ref lpSize);
                if (success || lpSize == IntPtr.Zero)
                {
                    return false;
                }

                sInfoEx.lpAttributeList = Marshal.AllocHGlobal(lpSize);
                success = InitializeProcThreadAttributeList(sInfoEx.lpAttributeList, 1, 0, ref lpSize);
                if (!success)
                {
                    return false;
                }

                var parentHandle = Process.GetProcessById(parentProcessId).Handle;
                // This value should persist until the attribute list is destroyed using the DeleteProcThreadAttributeList function
                lpValue = Marshal.AllocHGlobal(IntPtr.Size);
                Marshal.WriteIntPtr(lpValue, parentHandle);

                success = UpdateProcThreadAttribute(
                    sInfoEx.lpAttributeList,
                    0,
                    (IntPtr)PROC_THREAD_ATTRIBUTE_PARENT_PROCESS,
                    lpValue,
                    (IntPtr)IntPtr.Size,
                    IntPtr.Zero,
                    IntPtr.Zero);
                if (!success)
                {
                    return false;
                }
            }

            var pSec = new SECURITY_ATTRIBUTES();
            var tSec = new SECURITY_ATTRIBUTES();
            pSec.nLength = Marshal.SizeOf(pSec);
            tSec.nLength = Marshal.SizeOf(tSec);
            var lpApplicationName = Path.Combine(Environment.SystemDirectory, "notepad.exe");
            return CreateProcess(lpApplicationName, null, ref pSec, ref tSec, false, EXTENDED_STARTUPINFO_PRESENT, IntPtr.Zero, null, ref sInfoEx, out pInfo);
        }
        finally
        {
            // Free the attribute list
            if (sInfoEx.lpAttributeList != IntPtr.Zero)
            {
                DeleteProcThreadAttributeList(sInfoEx.lpAttributeList);
                Marshal.FreeHGlobal(sInfoEx.lpAttributeList);
            }
            Marshal.FreeHGlobal(lpValue);

            // Close process and thread handles
            if (pInfo.hProcess != IntPtr.Zero)
            {
                CloseHandle(pInfo.hProcess);
            }
            if (pInfo.hThread != IntPtr.Zero)
            {
                CloseHandle(pInfo.hThread);
            }
        }
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    struct STARTUPINFOEX
    {
        public STARTUPINFO StartupInfo;
        public IntPtr lpAttributeList;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    struct STARTUPINFO
    {
        public Int32 cb;
        public string lpReserved;
        public string lpDesktop;
        public string lpTitle;
        public Int32 dwX;
        public Int32 dwY;
        public Int32 dwXSize;
        public Int32 dwYSize;
        public Int32 dwXCountChars;
        public Int32 dwYCountChars;
        public Int32 dwFillAttribute;
        public Int32 dwFlags;
        public Int16 wShowWindow;
        public Int16 cbReserved2;
        public IntPtr lpReserved2;
        public IntPtr hStdInput;
        public IntPtr hStdOutput;
        public IntPtr hStdError;
    }

    [StructLayout(LayoutKind.Sequential)]
    internal struct PROCESS_INFORMATION
    {
        public IntPtr hProcess;
        public IntPtr hThread;
        public int dwProcessId;
        public int dwThreadId;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct SECURITY_ATTRIBUTES
    {
        public int nLength;
        public IntPtr lpSecurityDescriptor;
        public int bInheritHandle;
    }
} 
```*

# ios - 在并行范围的块中使用变量

> ID：10554920
> 
> 赞同：0
> 
> 时间：2012-05-11T16:06:37.553
> 
> 标签：ios, exc-bad-access, objective-c-blocks, buildconfiguration

```
__block BOOL myBool = NO;
__strong MyClass *ptr = self;
self.footer.defaultSelectedItem.selectionBlock = ^{
    myBool = YES;
    ptr = nil;
}; 
```

*当我的 Scheme 的Build Configuration*设置为**Debug**时，这工作得很好，但是当我使用**Release**`EXC_BAD_ACCESS`运行时，我得到了一个。发生在以下行**`EXC_BAD_ACCESS`**

 **```
if(selectionBlock != nil) selectionBlock(); 
```

但是如果我注释掉我里面的所有行，`selectionBlock`那么它运行没有错误。为什么它在 Debug 中运行而不是在 Release 中运行？

仅供参考，我正在使用自动引用计数（弧）

** 编辑以回应@RobNapier **

在调试中工作的原始代码是：

```
__block BOOL flag = NO;
__strong EventsView *ptr = self;
self.footer.defaultSelectedItem.selectionBlock = ^{
    if(flag) return;
    flag = YES;
    [ptr backTUI:nil];
    flag = NO;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:55:22.837

这里没有额外的理由`ptr`。在块内使用`self`会更正确。在这种情况下，该块将保留`self`。这可能会导致保留循环，因此您需要记住在打破保留循环`self.selectionBlock = nil`之前的某个时间点进行设置。`dealloc`

`flag`可以在这里优化。目前尚不清楚从上面的代码中它如何可能有用。

我总是对像这样的集合操作中的长间接链感到非常紧张：

```
self.footer.defaultSelectedItem.selectionBlock = ... 
```

我会确保`footer`，并且在此运行之前*电流* `defaultSelectedItem`不会消失。

简化问题。使块只记录“运行块”。然后添加东西直到它崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:03:03.133

对于我的一生，我无法让它与块一起使用。因此，我改为使用事件视图指针的设置器。我猜想通过设置一个额外的 ARC 保留来解决我的指针问题。我仍然不确定，因为我从未见过僵尸在使用该块时被记录，所以是的。

如有疑问，请使用选择器。**

# .net - how to detect windows started or user login in c#(.net) windows service?

> ID：10554922
> 
> 赞同：1
> 
> 时间：2012-05-11T16:06:41.657
> 
> 标签：.net, windows, hibernate, service, startup

I have a c#(.net) windows service that needs to do something either when windows startup or when user logged in(including back from hibernate). how can the service detect this? any windows events specific for it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:43:47.523

对于 windows 启动检查使用[Environment.TickCount](http://msdn.microsoft.com/en-us/library/system.environment.tickcount.aspx)的简单方法，可能您需要将一些以前的 windows 启动值保存到配置中并与它们进行比较。

当 Environment.TickCount 对您来说还不够或很容易:) 然后使用 WMI：

```
public void BootTime(){    
    SelectQuery query = new SelectQuery("SELECT LastBootUpTime FROM Win32_OperatingSystem WHERE Primary='true'");
    ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);

    foreach (ManagementObject mo in searcher.Get())
    {
        DateTime dtBootTime = ManagementDateTimeConverter.ToDateTime(mo.Properties["LastBootUpTime"].Value.ToString());
        Console.WriteLine(dtBootTime.ToString());
    }
} 
```

要检测登录/注销，如评论之一所述，请使用[SystemEvents](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx)类和事件[SessionSwitch](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionswitch.aspx)。

请注意，它仅在消息泵正在运行时才有效。在 Windows 服务中，除非使用隐藏表单或手动启动消息泵，否则不会引发此事件。

# c# - Image caching issue by using files in ASP.NET

> ID：10554928
> 
> 赞同：1
> 
> 时间：2012-05-11T16:07:04.770
> 
> 标签：c#, asp.net, http-status-code-404

I am facing a problem with Image caching by using files in ASP.NET. My detailed solution is:

*   For 1st request: I check the image file not exists and write the image file into hard disk. After that returns the url of the file to the browser

*   For later requests: the function just returns the url of the file to the browser

My problem is: sometimes with 1st requests, the browser can not get the image data from the url and cause the 404 - File Not Found error. I think it might because of the file is written but not ready for retrieving from browsers, but in the code I am using both "using statement" and "Dispose method" for bitmap & graphic objects to ensure everything are ready for accessing from browsers.

In more details, I am using the similar solution as in NopCommerce:

```
lock (s_lock) { ...........
 using (var stream = new MemoryStream(LoadPictureBinary(picture))) {
  using(var b = new Bitmap(stream)){
   using(var newBitMap = new Bitmap(newSize.Width, newSize.Height)){
    .......................
    newBitMap.Save(
        Path.Combine(this.LocalThumbImagePath, localFilename),  ici, ep);
   }
  }
 } 
} // end lock

return url; 
```

More information: you can check the full code at [http://nopcommerce.codeplex.com/SourceControl/changeset/view/9125b9a7fafe#src%2fLibraries%2fNop.Services%2fMedia%2fPictureService.cs](http://nopcommerce.codeplex.com/SourceControl/changeset/view/9125b9a7fafe#src%2fLibraries%2fNop.Services%2fMedia%2fPictureService.cs) (please search the GetPictureUrl() function)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:23:07.437

这是我看到的一个例子，当多个请求同时发生在同一个图像上时。

对于这种情况，锁是不够的，你需要使用互斥锁来为所有线程和所有请求一起锁定这个过程。

**因此，我建议更改** `lock`, with`mutex`并使用图像名称或图像代码作为互斥锁的名称，以不锁定任何东西和任何将要制作的图像，但只锁定由名称定义的图像互斥体。于是用mutex换了锁，然后看看这个问题是否还存在。

一个提示：互斥锁名称对大小和字符有一些限制。如果您使用图像文件名作为互斥锁的名称，请确保它被互斥锁接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:30:16.770

将文件存在的检查移到与`s_lock`文件创建相同的位置。应该解决部分完成文件的问题（如果是问题）。

如果已修复 - 使用 @Aristos 建议将锁定（监视器）替换为命名的 Mutext 以将锁定范围锁定到单个文件（如果您的站点预计负载很重）。

# direct3d - DirectX 架构资源

> ID：10554933
> 
> 赞同：3
> 
> 时间：2012-05-11T16:07:20.757
> 
> 标签：direct3d, directx-10, direct3d10

任何人都可以**请**张贴到**DX 驱动程序架构**的链接，该架构涵盖了块管理器等主题。大量的谷歌搜索，但我对我从谷歌得到的不满意。首选 nvidia 特定资源。
MSDN 似乎也只关注 DX API。它不会诅咒他们，因为他们无法控制司机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T03:59:46.920

我不确定，但**“ [A trip through the Graphics Pipeline 2011](http://fgiesen.wordpress.com/2011/07/09/a-trip-through-the-graphics-pipeline-2011-index/) ”**可能对您有用...？

我相信，**“由 GPU 实际实现的 D3D/OpenGL 图形管道”**的某些方面可以让您了解要搜索的内容以检索有关驱动程序的更多实际信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:36:52.863

以下是一些可以帮助您了解 DX 驱动程序架构的链接：

[DirectX 等库如何与驱动程序相关联？](https://softwareengineering.stackexchange.com/questions/86311/how-do-libraries-such-as-directx-relate-to-drivers)

[Windows 上的 Direct3D 设备驱动程序开发（GameDev 论坛中的一个线程）](http://www.gamedev.net/topic/264853-direct3d-device-driver-development-on-windows/)

[DirectX 背后的架构是什么？](http://www.programmersheaven.com/2/FAQ-DIRECTX-Architecture-Behind-DirectX)

[关于程序员的 DirectX 常见问题 天堂](http://www.programmersheaven.com/2/DIRECT-X-FAQ)

[Windows 驱动程序 API 基础知识](http://www.staudio.de/kb/english/drivers/)

[WDM I/O 概念](http://www.scribd.com/doc/61435580/WDM-Input-Output-Concepts)

我希望这有帮助！

# jsp - NetBeans：如何在项目外部以 UTF-8 编辑 jsp 文件片段？

> ID：10554935
> 
> 赞同：1
> 
> 时间：2012-05-11T16:07:47.003
> 
> 标签：jsp, netbeans, utf-8, character-encoding, opencms

我正在尝试在任何项目^(2之外的 NetBeans) ¹中使用以 UTF-8 编码的 jsp“片段”（模板文件） 。请注意，我说的是“jsp 片段”，也就是说，我*认为*我不能添加[<%@page%>](http://java.sun.com/products/jsp/tags/11/syntaxref11.fm7.html)指令，因为这会在构建最终页面⁴时导致重复的编码指令³ .

 *正如我在 NetBeans 的 bugzilla[错误 212395 - Cannot edit UTF-8 JSPs fragment in Favorites (not in projects) 中](http://netbeans.org/bugzilla/show_bug.cgi?id=212395)报告的那样，我还没有找到任何方法来做到这一点。有没有人有任何提示？

我已经阅读了[如何在 netbeans 6.9 中将编码设置为 utf-8？](https://stackoverflow.com/q/5034891/413020),[如何更改 NetBeans 中的文件编码？](https://stackoverflow.com/q/4133195/413020)并[在 NetBeans 中将 JSP 保存为 UTF-8](https://stackoverflow.com/q/4900157/413020)，但所有这些解决方案都基于配置我没有的 NetBeans 项目。（我使用 File -> Open File...从 WebDAV 打开文件）

该`-J-Dfile.encoding=UTF-8`选项根本没有任何效果，并且我的语言环境也被忽略（在阅读 NetBean 的[项目编码与文件编码后预期 - NetBeans 6.x 中使用的优先规则是什么？](http://wiki.netbeans.org/DevFaqI18nFileEncodingQueryObject)

* * *

笔记：

1.  NetBeans IDE 7.1.2
2.  jsp 文件位于已安装的 WebDAV 文件系统中
3.  从规范（[JSR-000245 JavaServer Pages 2.1 FR](http://download.oracle.com/otndocs/jcp/jsp-2.1-fr-eval-spec-oth-JSpec/)）：

    > pageEncoding 属性在每个文件中最多出现一次（否则会导致翻译错误），并且仅适用于它所在的文件。

4.  jsp 是使用`<cms:include>`标签拼接在一起的 opencms 页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:39:15.600

在重新阅读 JSP 规范（之前提供的链接）之后，似乎每个“翻译单元”*可以*多次包含页面指令：

> 一个翻译单元（JSP 源文件和通过 include 指令包含的任何文件）可以包含多个页面指令的实例 [...] 在给定的指令中，该指令定义的任何属性/值对只能出现一次翻译单元，除非所有出现的重复属性的值都相同。`import`和`pageEncoding`属性不受此规则的约束，可以出现多次。[...]该`pageEncoding` 属性在每个文件中最多出现一次（否则会导致翻译错误），并且仅适用于它所在的文件。

似乎我可以解决`page`每个文件添加一次指令的问题。*

# pdf - Solr pdf索引问题

> ID：10554940
> 
> 赞同：0
> 
> 时间：2012-05-11T16:08:07.517
> 
> 标签：pdf, solr, indexing

我正在尝试用 solr 索引 pdf，但没有成功。它是 datanfig.xml 中的 baseDir 和/或 url 吗？如何正确设置上述属性？当我索引 pdf 时，我得到以下信息： **来自 Solr：**

```
<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">1</int>
</lst><lst name="initArgs">
<lst name="defaults">
<str name="config">data-config.xml</str>
</lst>
</lst><str name="command">full-import</str>
<str name="status">idle</str>
<str name="importResponse"/>
<lst name="statusMessages">
<str name="Time Elapsed">0:0:4.231</str>
<str name="Total Requests made to DataSource">0</str>
<str name="Total Rows Fetched">1</str>
<str name="Total Documents Processed">0</str>
<str name="Total Documents Skipped">0</str>
<str name="Full Dump Started">2012-05-11 18:43:30</str>
<str name="">Indexing failed. Rolled back all changes.</str>
<str name="Rolledback">2012-05-11 18:43:30</str></lst><str name="WARNING">This response format is experimental.  It is likely to change in the future.</str>
</response> 
```

**日志文件：**

```
org.apache.solr.update.processor.LogUpdateProcessor finish
INFO: {deleteByQuery=*:*} 0 4
11 Μαϊ 2012 6:55:28 μμ org.apache.solr.common.SolrException log
SEVERE: Full Import failed:java.lang.RuntimeException: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to load EntityProcessor implementation for entity:tika Processing Document # 1
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:264)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:375)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:445)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:426)
Caused by: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to load EntityProcessor implementation for entity:tika Processing Document # 1
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:621)
    at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:327)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:225)
    ... 3 more
Caused by: org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to load EntityProcessor implementation for entity:tika Processing Document # 1
    at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:72)
    at org.apache.solr.handler.dataimport.DocBuilder.getEntityProcessor(DocBuilder.java:915)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:635)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:709)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:619)
    ... 5 more
Caused by: java.lang.ClassNotFoundException: Unable to load TikaEntityProcessor or org.apache.solr.handler.dataimport.TikaEntityProcessor
    at org.apache.solr.handler.dataimport.DocBuilder.loadClass(DocBuilder.java:1110)
    at org.apache.solr.handler.dataimport.DocBuilder.getEntityProcessor(DocBuilder.java:912)
    ... 8 more
Caused by: org.apache.solr.common.SolrException: Error loading class 'TikaEntityProcessor'
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:394)
    at org.apache.solr.handler.dataimport.DocBuilder.loadClass(DocBuilder.java:1100)
    ... 9 more
Caused by: java.lang.ClassNotFoundException: TikaEntityProcessor
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.net.FactoryURLClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:378)
    ... 10 more 
```

**数据配置.xml：**

```
<?xml version="1.0" encoding="utf-8"?>

<dataConfig>
<dataSource type="BinFileDataSource" name="binary" />
    <document>
        <entity name="f" dataSource="binary" rootEntity="false" processor="FileListEntityProcessor" baseDir="/solr/solr/docu/" fileName=".*pdf" recursive="true">
            <entity name="tika" processor="TikaEntityProcessor" url="${f.fileAbsolutePath}" format="text">
                <field column="id" name="id" meta="true" />
                <field column="fake_id" name="fake_id" />
                <field column="model" name="model" meta="true" />
                <field column="text" name="biog" />
            </entity>
        </entity>
    </document>
</dataConfig> 
```

**solrconfig.xml：**

```
<?xml version="1.0" encoding="UTF-8" ?>

<config>

  <abortOnConfigurationError>${solr.abortOnConfigurationError:true}</abortOnConfigurationError>

  <luceneMatchVersion>LUCENE_36</luceneMatchVersion>

  <lib dir="lib/dist/" regex="apache-solr-cell-\d.*\.jar" />
  <lib dir="lib/contrib/extraction/lib/" regex=".*\.jar" />

  <lib dir="lib/dist/" regex="apache-solr-clustering-\d.*\.jar" />
  <lib dir="lib/contrib/clustering/lib/" regex=".*\.jar" />

  <lib dir="lib/dist/" regex="apache-solr-dataimporthandler-\d.*\.jar" />
  <lib dir="lib/contrib/dataimporthandler/lib/" regex=".*\.jar" />

  <lib dir="lib/dist/" regex="apache-solr-langid-\d.*\.jar" />
  <lib dir="lib/contrib/langid/lib/" regex=".*\.jar" />

  <lib dir="lib/dist/" regex="apache-solr-velocity-\d.*\.jar" />
  <lib dir="lib/contrib/velocity/lib/" regex=".*\.jar" />

  <lib dir="lib/contrib/extraction/lib/" />

  guration.
    -->
  <dataDir>${solr.data.dir:}</dataDir>

  <directoryFactory name="DirectoryFactory" 
                    class="${solr.directoryFactory:solr.StandardDirectoryFactory}"/>

  <indexConfig>

  </indexConfig>

  <jmx />

  <!-- The default high-performance update handler -->
  <updateHandler class="solr.DirectUpdateHandler2">

  </updateHandler>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
       Query section - these settings control query time things like caches
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <query>

    <maxBooleanClauses>1024</maxBooleanClauses>

    <filterCache class="solr.FastLRUCache"
                 size="512"
                 initialSize="512"
                 autowarmCount="0"/>

    <queryResultCache class="solr.LRUCache"
                     size="512"
                     initialSize="512"
                     autowarmCount="0"/>

    <documentCache class="solr.LRUCache"
                   size="512"
                   initialSize="512"
                   autowarmCount="0"/>

    <enableLazyFieldLoading>true</enableLazyFieldLoading>

   <queryResultWindowSize>20</queryResultWindowSize>

   <queryResultMaxDocsCached>200</queryResultMaxDocsCached>

    <listener event="newSearcher" class="solr.QuerySenderListener">
      <arr name="queries">

      </arr>
    </listener>
    <listener event="firstSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <lst>
          <str name="q">static firstSearcher warming in solrconfig.xml</str>
        </lst>
      </arr>
    </listener>

    <useColdSearcher>false</useColdSearcher>

    <maxWarmingSearchers>2</maxWarmingSearchers>

  </query>

  <requestDispatcher>

    <requestParsers enableRemoteStreaming="true" 
                    multipartUploadLimitInKB="2048000" />

    <httpCaching never304="true" />

  </requestDispatcher>

  <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config.xml</str>
    </lst>
  </requestHandler>

  <requestHandler name="/select" class="solr.SearchHandler">

     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">100</int>
       <str name="df">biog</str>
     </lst>

  </requestHandler>

  <requestHandler name="/browse" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="echoParams">explicit</str>

       <!-- VelocityResponseWriter settings -->
       <str name="wt">velocity</str>

       <str name="v.template">browse</str>
       <str name="v.layout">layout</str>
       <str name="title">Solritas</str>

       <str name="df">text</str>
       <str name="defType">edismax</str>
       <str name="q.alt">*:*</str>
       <str name="rows">10</str>
       <str name="fl">*,score</str>
       <str name="mlt.qf">
         text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="mlt.fl">text,features,name,sku,id,manu,cat</str>
       <int name="mlt.count">3</int>

       <str name="qf">
          text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>

       <str name="facet">on</str>
       <str name="facet.field">cat</str>
       <str name="facet.field">manu_exact</str>
       <str name="facet.query">ipod</str>
       <str name="facet.query">GB</str>
       <str name="facet.mincount">1</str>
       <str name="facet.pivot">cat,inStock</str>
       <str name="facet.range.other">after</str>
       <str name="facet.range">price</str>
       <int name="f.price.facet.range.start">0</int>
       <int name="f.price.facet.range.end">600</int>
       <int name="f.price.facet.range.gap">50</int>
       <str name="facet.range">popularity</str>
       <int name="f.popularity.facet.range.start">0</int>
       <int name="f.popularity.facet.range.end">10</int>
       <int name="f.popularity.facet.range.gap">3</int>
       <str name="facet.range">manufacturedate_dt</str>
       <str name="f.manufacturedate_dt.facet.range.start">NOW/YEAR-10YEARS</str>
       <str name="f.manufacturedate_dt.facet.range.end">NOW</str>
       <str name="f.manufacturedate_dt.facet.range.gap">+1YEAR</str>
       <str name="f.manufacturedate_dt.facet.range.other">before</str>
       <str name="f.manufacturedate_dt.facet.range.other">after</str>

       <!-- Highlighting defaults -->
       <str name="hl">on</str>
       <str name="hl.fl">text features name</str>
       <str name="f.name.hl.fragsize">0</str>
       <str name="f.name.hl.alternateField">name</str>
     </lst>
     <arr name="last-components">
       <str>spellcheck</str>
     </arr>
     <!--
     <str name="url-scheme">httpx</str>
     -->
  </requestHandler>

  <requestHandler name="/update" 
                  class="solr.XmlUpdateRequestHandler">

    </requestHandler>

  <requestHandler name="/update/javabin" 
                  class="solr.BinaryUpdateRequestHandler" />

  <requestHandler name="/update/csv" 
                  class="solr.CSVRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/update/json" 
                  class="solr.JsonUpdateRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <!-- All the main content goes into "text"... if you need to return
           the extracted text or do highlighting, use a stored field. -->
      <str name="fmap.content">text</str>
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>

      <!-- capture link hrefs but ignore div attributes -->
      <str name="captureAttr">true</str>
      <str name="fmap.a">links</str>
      <str name="fmap.div">ignored_</str>
    </lst>
  </requestHandler>

  <requestHandler name="/update/xslt"
                   startup="lazy"
                   class="solr.XsltUpdateRequestHandler"/>

  <requestHandler name="/analysis/field" 
                  startup="lazy"
                  class="solr.FieldAnalysisRequestHandler" />

  <requestHandler name="/analysis/document" 
                  class="solr.DocumentAnalysisRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/admin/" 
                  class="solr.admin.AdminHandlers" />

  <!-- ping/healthcheck -->
  <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
    <lst name="invariants">
      <str name="q">solrpingquery</str>
    </lst>
    <lst name="defaults">
      <str name="echoParams">all</str>
    </lst>
  </requestHandler>

  <!-- Echo the request contents back to the client -->
  <requestHandler name="/debug/dump" class="solr.DumpRequestHandler" >
    <lst name="defaults">
     <str name="echoParams">explicit</str> 
     <str name="echoHandler">true</str>
    </lst>
  </requestHandler>

  <searchComponent name="spellcheck" class="solr.SpellCheckComponent">

    <str name="queryAnalyzerFieldType">textSpell</str>

    <lst name="spellchecker">
      <str name="name">default</str>
      <str name="field">name</str>
      <str name="spellcheckIndexDir">spellchecker</str>

    </lst>

  </searchComponent>

  <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <str name="spellcheck.onlyMorePopular">false</str>
      <str name="spellcheck.extendedResults">false</str>
      <str name="spellcheck.count">1</str>
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
  </requestHandler>

  <searchComponent name="tvComponent" class="solr.TermVectorComponent"/>

  <requestHandler name="/tvrh" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <bool name="tv">true</bool>
    </lst>
    <arr name="last-components">
      <str>tvComponent</str>
    </arr>
  </requestHandler>

  <searchComponent name="clustering" 
                   enable="${solr.clustering.enabled:false}"
                   class="solr.clustering.ClusteringComponent" >
    <!-- Declare an engine -->
    <lst name="engine">
      <!-- The name, only one can be named "default" -->
      <str name="name">default</str>

      <str name="carrot.algorithm">org.carrot2.clustering.lingo.LingoClusteringAlgorithm</str>

      <str name="LingoClusteringAlgorithm.desiredClusterCountBase">20</str>

      <str name="carrot.lexicalResourcesDir">clustering/carrot2</str>

      <str name="MultilingualClustering.defaultLanguage">ENGLISH</str>
    </lst>
    <lst name="engine">
      <str name="name">stc</str>
      <str name="carrot.algorithm">org.carrot2.clustering.stc.STCClusteringAlgorithm</str>
    </lst>
  </searchComponent>

  <requestHandler name="/clustering"
                  startup="lazy"
                  enable="${solr.clustering.enabled:false}"
                  class="solr.SearchHandler">
    <lst name="defaults">
      <bool name="clustering">true</bool>
      <str name="clustering.engine">default</str>
      <bool name="clustering.results">true</bool>
      <!-- The title field -->
      <str name="carrot.title">name</str>
      <str name="carrot.url">id</str>
      <!-- The field to cluster on -->
       <str name="carrot.snippet">features</str>
       <!-- produce summaries -->
       <bool name="carrot.produceSummary">true</bool>
       <!-- the maximum number of labels per cluster -->
       <!--<int name="carrot.numDescriptions">5</int>-->
       <!-- produce sub clusters -->
       <bool name="carrot.outputSubClusters">false</bool>

       <str name="df">text</str>
       <str name="defType">edismax</str>
       <str name="qf">
          text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="q.alt">*:*</str>
       <str name="rows">10</str>
       <str name="fl">*,score</str>
    </lst>     
    <arr name="last-components">
      <str>clustering</str>
    </arr>
  </requestHandler>

  <searchComponent name="terms" class="solr.TermsComponent"/>

  <!-- A request handler for demonstrating the terms component -->
  <requestHandler name="/terms" class="solr.SearchHandler" startup="lazy">
     <lst name="defaults">
      <bool name="terms">true</bool>
    </lst>     
    <arr name="components">
      <str>terms</str>
    </arr>
  </requestHandler>

  <searchComponent name="elevator" class="solr.QueryElevationComponent" >
    <!-- pick a fieldType to analyze queries -->
    <str name="queryFieldType">string</str>
    <str name="config-file">elevate.xml</str>
  </searchComponent>

  <!-- A request handler for demonstrating the elevator component -->
  <requestHandler name="/elevate" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="df">text</str>
    </lst>
    <arr name="last-components">
      <str>elevator</str>
    </arr>
  </requestHandler>

  <!-- Highlighting Component

       http://wiki.apache.org/solr/HighlightingParameters
    -->
  <searchComponent class="solr.HighlightComponent" name="highlight">
    <highlighting>
      <!-- Configure the standard fragmenter -->
      <!-- This could most likely be commented out in the "default" case -->
      <fragmenter name="gap" 
                  default="true"
                  class="solr.highlight.GapFragmenter">
        <lst name="defaults">
          <int name="hl.fragsize">100</int>
        </lst>
      </fragmenter>

      <!-- A regular-expression-based fragmenter 
           (for sentence extraction) 
        -->
      <fragmenter name="regex" 
                  class="solr.highlight.RegexFragmenter">
        <lst name="defaults">
          <!-- slightly smaller fragsizes work better because of slop -->
          <int name="hl.fragsize">70</int>
          <!-- allow 50% slop on fragment sizes -->
          <float name="hl.regex.slop">0.5</float>
          <!-- a basic sentence pattern -->
          <str name="hl.regex.pattern">[-\w ,/\n\&quot;&apos;]{20,200}</str>
        </lst>
      </fragmenter>

      <!-- Configure the standard formatter -->
      <formatter name="html" 
                 default="true"
                 class="solr.highlight.HtmlFormatter">
        <lst name="defaults">
          <str name="hl.simple.pre"><![CDATA[<em>]]></str>
          <str name="hl.simple.post"><![CDATA[</em>]]></str>
        </lst>
      </formatter>

      <!-- Configure the standard encoder -->
      <encoder name="html" 
               class="solr.highlight.HtmlEncoder" />

      <!-- Configure the standard fragListBuilder -->
      <fragListBuilder name="simple" 
                       default="true"
                       class="solr.highlight.SimpleFragListBuilder"/>

      <!-- Configure the single fragListBuilder -->
      <fragListBuilder name="single" 
                       class="solr.highlight.SingleFragListBuilder"/>

      <!-- default tag FragmentsBuilder -->
      <fragmentsBuilder name="default" 
                        default="true"
                        class="solr.highlight.ScoreOrderFragmentsBuilder">

      </fragmentsBuilder>

      <!-- multi-colored tag FragmentsBuilder -->
      <fragmentsBuilder name="colored" 
                        class="solr.highlight.ScoreOrderFragmentsBuilder">
        <lst name="defaults">
          <str name="hl.tag.pre"><![CDATA[
               <b style="background:yellow">,<b style="background:lawgreen">,
               <b style="background:aquamarine">,<b style="background:magenta">,
               <b style="background:palegreen">,<b style="background:coral">,
               <b style="background:wheat">,<b style="background:khaki">,
               <b style="background:lime">,<b style="background:deepskyblue">]]></str>
          <str name="hl.tag.post"><![CDATA[</b>]]></str>
        </lst>
      </fragmentsBuilder>

      <boundaryScanner name="default" 
                       default="true"
                       class="solr.highlight.SimpleBoundaryScanner">
        <lst name="defaults">
          <str name="hl.bs.maxScan">10</str>
          <str name="hl.bs.chars">.,!? &#9;&#10;&#13;</str>
        </lst>
      </boundaryScanner>

      <boundaryScanner name="breakIterator" 
                       class="solr.highlight.BreakIteratorBoundaryScanner">
        <lst name="defaults">
          <!-- type should be one of:
               * CHARACTER 
               * WORD (default)
               * LINE
               * SENTENCE 
            -->
          <str name="hl.bs.type">WORD</str>
          <!-- language and country are used when constructing Locale 
               object which will be used when getting instance of 
               BreakIterator 
            -->
          <str name="hl.bs.language">en</str>
          <str name="hl.bs.country">US</str>
        </lst>
      </boundaryScanner>
    </highlighting>
  </searchComponent>

  <queryResponseWriter name="json" class="solr.JSONResponseWriter">

    <str name="content-type">text/plain; charset=UTF-8</str>
  </queryResponseWriter>

    <queryResponseWriter name="velocity" class="solr.VelocityResponseWriter" startup="lazy"/>

  <queryResponseWriter name="xslt" class="solr.XSLTResponseWriter">
    <int name="xsltCacheLifetimeSeconds">5</int>
  </queryResponseWriter>

  <!-- Legacy config for the admin interface -->
  <admin>
    <defaultQuery>*:*</defaultQuery>

  </admin>

</config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:59:28.580

对于 Tika，您需要 dist 目录中的 apache-solr-dataimporthandler-extras-3.6.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T23:02:49.383

我已经使用 Solrj 库索引了 pdf 和 doc 文件。以下代码片段有效：

```
 String urlString = "http://localhost:8983/solr";

    SolrServer solr = null;

    try {
        solr = new CommonsHttpSolrServer(urlString);
    } catch (MalformedURLException e2) {
        e2.printStackTrace();
    }

    ContentStreamUpdateRequest up = new ContentStreamUpdateRequest("/update/extract");

    try {

        try {
            up.addFile(file);
        } catch (IOException e1) {
            e1.printStackTrace();}

        up.setParam("literal.id", solrId);
        up.setParam("uprefix", "attr_");
        up.setParam("fmap.content", "attr_content");

        up.setAction(AbstractUpdateRequest.ACTION.COMMIT, true, true);

        try {
            solr.request(up);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } catch (SolrServerException e) {
        e.printStackTrace();
    } 
```

建立索引后，您可以查询“attr_content”（pdf 文件的内容）。

# gradle - Gradle 项目的自定义条件配置

> ID：10554950
> 
> 赞同：15
> 
> 时间：2012-05-11T16:08:57.720
> 
> 标签：gradle

[从https://github.com/gradle/gradle/blob/master/build.gradle](https://github.com/gradle/gradle/blob/master/build.gradle)摘录：

```
ext {
  isDevBuild = {
    gradle.taskGraph.hasTask(developerBuild)
  }
}

task developerBuild {
  description = 'Builds distributions and runs pre-checkin checks'
  group = 'build'
  dependsOn testedDists
} 
```

当我使用这种方法在我的项目中创建自定义配置时，我发现：

```
isDevBuild === true 
```

即它总是正确的，因为任务'developerBuild'在我的build.gradle项目中，因此在图中。他们有几个“不同”的配置（isCIBuild、isCommitBuild、isFinalReleaseBuild，......）所以我想我这里出了点问题。

有人可以解释如何根据一些外部参数使这个配置有条件吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-11T17:20:58.063

`taskGraph.hasTask()`告诉任务是否在任务*执行*图中，即它是否会被执行。因为任务执行图仅在配置阶段之后创建，所以必须从`whenReady`回调（或在执行阶段）调用此方法：

```
gradle.taskGraph.whenReady { graph ->
    if (graph.hasTask(developerBuild)) { 
        // do conditional configuration
    }
} 
```

为了使其更具可读性，我们可以引入一个新方法：

```
def onlyFor(task, config) {
    gradle.taskGraph.whenReady { graph ->
        if (graph.hasTask(task)) { 
            project.configure(project, config)
        }
    }
} 
```

现在我们可以写：

```
onlyFor(developerBuild) { ... }
onlyFor(ciBuild) { ... } 
```

解决此问题的另一种更简单的方法是检查特定任务名称是否包含在`gradle.startParameter.taskNames`. 但是，这有两个限制：首先，它比较任务*名称*，这可以在多项目构建中产生差异。其次，它只会找到直接指定的任务（例如在命令行上），而不是其依赖项。

PS.：在您的代码中，`isDevBuild`始终成立，因为（非空）闭包是`true`根据 Groovy 真理。（相比之下`isDevBuild()`，`isDevBuild`不会调用闭包。）

# c++ - 递归分段错误

> ID：10554954
> 
> 赞同：0
> 
> 时间：2012-05-11T16:09:07.653
> 
> 标签：c++, recursion, segmentation-fault

```
#include <stdio.h>
#include <dirent.h> 
#include <sys/types.h> 
#include <sys/param.h> 
#include <sys/stat.h> 
#include <unistd.h> 
#include <string.h>
#include <stdlib.h>
#include <limits.h>
#include <vector>

using namespace std;

enum ElementType { SIMPLEFILE, DIRECTORY, SYMBOLICLINK };

class Element{
public:
    Element(){};

    Element(char *name_, char *full_path_name_, ElementType element_type_, long element_size_)
      : name(NULL), full_path_name(NULL), element_size(0)
    {
        memcpy (name,name_,strlen(name_)+1);
        memcpy (full_path_name,full_path_name_,strlen(full_path_name_)+1);
        element_type=element_type_;
        element_size=element_size_;
    };

    char *name;
    char *full_path_name;
    ElementType element_type;
    long element_size;
};

int inspect(const char *input_path, std::vector<Element>& result_element_array, long *dir_size,const char *full_path ) {
    std::vector<Element> result_element_array_temp;
    DIR           *d;
    struct dirent *dir;
    struct stat buf;
    char *mynamebuf=(char *)malloc(0);
    int c=0;
    size_t base_len = strlen(full_path);

    long dir_size_temp=0;
    char *full_path_temp=(char *)malloc(0);
    char *full_path_dummy=(char *)malloc(0);

    result_element_array_temp.reserve(1000);

    d = opendir( full_path);

    if( d == NULL ) {
        return 1;
    }
    while( ( dir = readdir( d ) )) {
        if( strcmp( dir->d_name, "." ) == 0 || strcmp( dir->d_name, ".." ) == 0 ) {
            continue;
        }

        memcpy (mynamebuf,full_path,strlen(full_path)+1);
        strcat(mynamebuf,(full_path[base_len - 1] == '/' ? "" : "/"));
        strcat(mynamebuf,dir->d_name);
        if (stat(mynamebuf, &buf) != 0) {
            perror(mynamebuf);
            continue;
        }

        if( S_ISDIR(buf.st_mode) ) {//if dir
            chdir( dir->d_name );
            memcpy (full_path_temp,full_path,strlen(full_path)+1);
            strcat(full_path_temp,"/");
            strcat(full_path_temp,dir->d_name);
            (dir_size_temp)=0;

            inspect( ".", result_element_array_temp, &dir_size_temp, full_path_temp  );

            chdir( ".." );
            memcpy (full_path_dummy,full_path_temp,strlen(full_path_temp)+1);
            strcat(full_path_dummy,"/");
            strcat(full_path_dummy,dir->d_name);
            Element element;
            element.name=dir->d_name;
            element.full_path_name=full_path_dummy;
            element.element_type=DIRECTORY;
            element.element_size=dir_size_temp;
            result_element_array.push_back(element);
            result_element_array.insert( result_element_array.end(), result_element_array_temp.begin(), result_element_array_temp.end() );
            (*dir_size)+=(dir_size_temp);
        } else if( S_ISREG(buf.st_mode)) {//if file
            memcpy (full_path_dummy,full_path,strlen(full_path)+1);
            strcat(full_path_dummy,"/");
            strcat(full_path_dummy,dir->d_name);
            Element element;
            element.name=dir->d_name;
            element.full_path_name=full_path_dummy;
            element.element_type=SIMPLEFILE;
            element.element_size=buf.st_size;
            result_element_array.push_back(element);
            (*dir_size)+=buf.st_size;
        } else if( S_ISLNK(buf.st_mode) ) {//if link
            memcpy (full_path_dummy,full_path,strlen(full_path)+1);
            strcat(full_path_dummy,"/");
            strcat(full_path_dummy,dir->d_name);

            Element element;
            element.name=dir->d_name;
            element.full_path_name=full_path_dummy;
            element.element_type=SIMPLEFILE;
            element.element_size=buf.st_size;
            result_element_array.push_back(element);
        } else {
            continue;
        }
    }
    closedir(d);
    return 0;
}

int main(){
    std::vector<Element> result_element_array;
    result_element_array.reserve(3000); 
    long dir_size;
    const char *full_path="/";
    inspect("/", result_element_array, &dir_size,full_path  );

    std::vector <Element>::iterator It;

    for(It = result_element_array.begin(); It != result_element_array.end(); ++It){
        printf("%s\n",(*It).full_path_name);
    }
    return 0;
} 
```

代码在上面。我的目标是递归地编写目录浏览器。

我对代码进行了 GDB，它在递归调用方法`return 0`时到达，但无法执行。可能与其他一些行引起的stackoverflow有关吗？任何想法将不胜感激。`inspect``return 0`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T16:17:09.043

在您的`Element`构造函数上，您正在 memcpy-ing`char`数组而不分配目标`char*`。您应该考虑使用`std::string`：

```
class Element{
public:
    Element(){};
  Element(char *name_,
  char *full_path_name_,
  ElementType element_type_,
  long element_size_)
      :name(name),
      full_path_name(full_path_name_),
      element_size(0)
  {
      element_type=element_type_;
      element_size=element_size_;
  };
  std::string name;
  std::string full_path_name;
  ElementType element_type;
  long element_size;

}; 
```

您还执行`malloc`0 字节，然后使用此指针，就好像它是有效的一样：

```
char *mynamebuf=(char *)malloc(0); 
```

您还应该考虑使用`std::string`，或至少修复它以分配有效数量的字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:19:15.893

由于您使用的是 gdb，我将假设 valgrind 可用。您对 memcpy 的使用是不安全的，valgrind 应该有助于发现您的程序似乎存在的各种内存损坏问题。就像 Jeremy Friesner 和 fontanini 都建议的那样，使用 std::string 而不是裸字符 *。

# java - 具有泛型的模拟方法并在返回类型中扩展

> ID：10554955
> 
> 赞同：18
> 
> 时间：2012-05-11T16:09:12.870
> 
> 标签：java, generics, mockito

`Set<? extends Car> getCars()`是否可以在没有抑制警告的情况下模拟（使用 mockito）带有签名的方法？我试过了：

```
XXX cars = xxx;
when(owner.getCars()).thenReturn(cars); 
```

但无论我如何声明，`cars`我总是会遇到编译错误。例如，当我这样声明时

```
Set<? extends Car> cars = xxx 
```

我得到标准的通用/模拟编译错误

```
The method thenReturn(Set<capture#1-of ? extends Car>) in the type OngoingStubbing<Set<capture#1-of ? extends Car>> is not applicable for the arguments (Set<capture#2-of ? extends Car>) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-11T19:23:53.330

使用 doReturn-when 备用存根语法。

被测系统：

```
public class MyClass {
  Set<? extends Number> getSet() {
    return new HashSet<Integer>();
  }
} 
```

和测试用例：

```
import static org.mockito.Mockito.*;

import java.util.HashSet;
import java.util.Set;

import org.junit.Test;

public class TestMyClass {
  @Test
  public void testGetSet() {
    final MyClass mockInstance = mock(MyClass.class);

    final Set<Integer> resultSet = new HashSet<Integer>();
    resultSet.add(1);
    resultSet.add(2);
    resultSet.add(3);

    doReturn(resultSet).when(mockInstance).getSet();

    System.out.println(mockInstance.getSet());
  }
} 
```

无需错误或警告抑制

# ember.js - Ember 车把嵌入 ID

> ID：10554957
> 
> 赞同：1
> 
> 时间：2012-05-11T16:09:45.297
> 
> 标签：ember.js, handlebars.js

我正在尝试使用 ember 显示找到的内容的动态列表。问题是当我尝试将把手放在 html 属性中时，一切都会中断。

```
RegApp.PatronsFound = Ember.CollectionView.create
  tagName: 'table'
  content: []
  itemViewClass: Ember.View.extend
    template: Ember.Handlebars.compile("<td><button onclick='alert({{content.id}})'>{{content.name}}</button>")
RegApp.PatronsFound.appendTo('body') 
```

当它被输入一段 ID 为 3 且名称为 FOO 的内容时，我希望生成这个 html：

```
<button onclick="alert(3)">FOO</button> 
```

相反，我得到了这个：

```
<button onclick="alert(&lt;script id=" metamorph-4-start'="" type="text/x-placeholder">3<script id="metamorph-4-end" type="text/x-placeholder"></script>)'&gt;FOO</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:56:42.340

您可以使用

```
{{unbound content.id}} 
```

任意插入值到您的模板中。通常，这些值包含在 metamorph 标签中，这些标签允许显示的值绑定到支持值，并在支持值更改时更新。这仅在输出是常规 HTML 时才有效，在这种情况下，跨越事件处理程序和嵌入式 JS 时无效。{{unbound}} 在该属性路径中插入一次值，没有变形标记，并且如果该值将来更改，则不会更新。

# java - 如何迭代扩展 List 的内部类 ?

> ID：10554959
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:09:49.017
> 
> 标签：java

如果你有以下作为你的内部类

```
private static final class LinkedListExtension extends LinkedList<String> {
    {
        add("a");
        add("b");
        add("c");
    }
} 
```

你如何迭代`LinkedListExtension`'s 的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T16:11:18.920

与普通列表相同的方式：

```
LinkedListExtension myList = new LinkedListExtension();
for (String s : myList)
{
    System.out.println(s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T16:11:38.093

```
LinkedListExtension  list = new LinkedListExtension();
for (String s : list) { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:17:43.490

```
LinkedList<String> list = new LinkedListExtension();
for (String str : list)
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T16:23:22.320

使用[`Iterator`](https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html)：

```
Iterator i = new LinkedListExtension().iterator();
while (i.hasNext()) {
    System.out.println(i.next());
} 
```

# html - HTML & CSS：操纵字体/文本高度？

> ID：10554961
> 
> 赞同：0
> 
> 时间：2012-05-11T16:10:08.790
> 
> 标签：html, css

我正在为页面中的标题或标题使用自定义字体 (Oswald)。我相信它的高度与本机字体（Arial、san-serif 等）相冲突，并且想知道是否有办法将两种字体均匀设置......？如果稍后放置更多文本，则差距会变得很大。

请看看我在这里有什么：http: [//jsfiddle.net/x6v7F/](http://jsfiddle.net/x6v7F/)
我有一个临时背景淡入淡出来说明。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:48:17.440

这似乎不是`font-size`问题，问题似乎在于您指定`line-height`

如果你看到[这个](http://jsfiddle.net/x6v7F/1/)小提琴，你可以看到我已经改变`h1`并`h2`拥有这些`line-heights`

```
h1 {
    font: 16px 'Oswald', Arial, Helvetica, sans-serif;
    text-transform: uppercase;
    color:#000000;
    margin:14px 0;
    line-height: 100%; <----
}

h2 {
    font: 12px 'Oswald', Arial, Helvetica, sans-serif;
    text-transform: uppercase;
    color:#BBBBBB;
    margin-bottom: 14px;
    line-height: 100%; <----
    letter-spacing: .2px;    
} 
```

如果你检查那个小提琴，它似乎已经解决了你的问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:32:30.347

Rob 有 4 个并排的部分（您可能需要增加 jsfiddle 窗口的宽度）。他的问题是他希望他的部分沿着底部排列，但是由于他的正文字体和标题字体之间的不同文本大小而遇到了问题。

许多 css 网格框架试图解决这些类型的问题：规范化文本和标题的高度，以便所有行都落在一个假想的基线网格上。

老实说，我只是给这些部分一个静态高度，并在底部留下一些模糊空间以留出误差。

```
section { height: 370px; position:relative; }
section .button { position:absolute; bottom:0; right:0; } 
```

**编辑**：

如果您正在寻找动态部分高度，则必须利用 javascript 魔术。查询：

```
 <style>
    section { position:relative; padding-bottom:50px; }
    section .button { position:absolute; bottom:0; right:0; }
  <style>

  <script>
    var max_height = 0;
    $('section').each(function() {
      max_height = Math.max(max_height, $(this).height());
    }).height(max_height);
  </script> 
```

# emacs - Emacs：格式化当前文件并保持光标位置

> ID：10554963
> 
> 赞同：1
> 
> 时间：2012-05-11T16:10:15.933
> 
> 标签：emacs, format

经过短暂的谷歌搜索后，我没有得到好的答案，所以我在这里问。

通常，当我想格式化当前文件时，我会这样做：

```
c-x h c-m-\ 
```

它格式化当前文件，但我失去了光标位置。例如，我正在编辑一个长文件，我现在在第 157 行。当我重新格式化文件时，我发现我的光标跳到了第 1 行。我必须手动将它移动到第 157 行，这很不方便。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T18:11:56.497

在 Emacs 中解决此类问题的一般方法如下：

```
C-SPC C-SPC ...dowhatyouwant... C-u C-SPC 
```

C-SPC C-SPC 部件推动标记环上的当前位置，然后 Cu C-SPC 从标记环弹回该位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T16:31:32.167

您可以使用此功能并将其绑定到单个按键：

```
(defun indent-current-buffer ()
    (interactive)
    (indent-region (point-min) (point-max))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T19:44:59.960

从我的 .emacs （似乎取自[http://tuxicity.se/emacs/elisp/2010/05/07/clean-up-buffer-or-region-in-emacs.html](http://tuxicity.se/emacs/elisp/2010/05/07/clean-up-buffer-or-region-in-emacs.html)或类似）：

```
(defun clean-up-buffer-or-region ()
  "Untabifies, indents and deletes trailing whitespace from buffer or region."
  (interactive)
  (save-excursion
    (unless (region-active-p)
      (mark-whole-buffer))
    (untabify (region-beginning) (region-end))
    (indent-region (region-beginning) (region-end))
    (save-restriction
      (narrow-to-region (region-beginning) (region-end))
      (delete-trailing-whitespace))))

(global-set-key (kbd "C-c n") 'clean-up-buffer-or-region) 
```

这比您想要的要多一点，但我通常会发现额外的功能位（取消制表符和删除尾随空格）很有用。

# gwt - 如何增加 GWT 的编译排列数量？

> ID：10554964
> 
> 赞同：0
> 
> 时间：2012-05-11T16:10:31.527
> 
> 标签：gwt

eclipse中的gwt编译器只编译两个排列？我正在使用用于移动设备的 nextinterface 框架，它提供了非常漂亮且易于使用的 UI，但它并没有得到更多的支持。这就是为什么我的应用程序不能在移动设备上运行的原因。是否可以手动增加排列的数量？如果可能的话，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T21:45:51.650

看起来 NEXT mobile 只为 safari 做了一个特殊的排列，然后所有其他浏览器都使用另一个排列。您在其他移动平台上看到的任何 UI 问题都应该由框架创建者处理（或使用不同的框架）。

另外，看看他们的谷歌群组，看起来 NEXT 移动框架已经死了：

[http://groups.google.com/group/nextinterfaces/browse_thread/thread/020b5b860b8dc784#](http://groups.google.com/group/nextinterfaces/browse_thread/thread/020b5b860b8dc784#)

> 感谢您使用 NEXT 接口，不幸的是，我建议使用可行的替代方案，因为不再支持 NEXT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T21:40:50.640

排列都是延迟绑定属性值的排列。默认情况下，使用 GWT 2.4，您将拥有 6 个`user.agent`值（`gecko1_8`、`safari`、`ie6`、`ie8`和）`ie9`和`opera`1 个默认值`locale`（`default`）。这产生了 6 个排列。如果您添加一个语言环境，您将有 12 个排列，等等。

我不知道*nextinterface 框架*，但它可能通过将属性设置为一组有限的值（例如，仅支持 Firefox 和 Safari/Chrome），*人为*地限制（即未经您的同意/知识）排列的数量。`user.agent``<set-property name="user.agent" value="safari, gecko1_8" />`

无论如何，您不想“[手动]增加排列的数量”，您可能希望支持更多的用户代理、更多的语言环境、更普遍的更多运行时环境。这通常意味着有更多的排列，但这绝对不是要说服的*目标*（实际上恰恰相反：如果我们可以有一个单一的代码在任何地方工作——一个单一的排列，i18n 放在一边——那就更好了！）

# model-view-controller - 在“defaults”backbone.js 中提供新集合

> ID：10554965
> 
> 赞同：1
> 
> 时间：2012-05-11T16:10:31.933
> 
> 标签：model-view-controller, backbone.js

我是主干 js 的新手，我的第一次交互似乎很完整。问题是这样的，
我做了一个这样的模型

```
window.Dir = Backbone.Model.extend({
                defaults: { 
                  "Name": "", 
                  "ChildNodes": new window.FSNodeCollection() },
                GetFullName: function () { this.get("id"); }
            }); 
```

`window.FSNodeCollection`是我制作的其他一些收藏。`new window.FSNodeCollection()`

**正如你会注意到的，我已经根据我读过`ChildNodes``window.FSNodeCollection()`** 的内容将 ChildNodes 属性的值设置为这个值**，** 但是当我使用这个模型时

```
var fsNode = new window.FSNode({
                Type: "dir",
                Node: new window.Dir({
                    Name: "dir1",
                })
            });
var fsNode2 = new window.FSNode({
                Type: "dir",
                Node: new window.Dir({
                    Name: "dir2",
                })
            });
var subDir1Node = new window.FSNode({
                Type: "dir",
                Node: new window.Dir({
                    Name: "subDir1",
                    ChildNodes:new window.FSNodeCollection()
                })
              });
            fsNode.get("Node").get("ChildNodes").push(subDir1Node); 
```

**被`subDir1Node`添加到`ChildNodes`两者中`fsNode`，`fsNode2`**
我做错了什么？

当我尝试做这样的事情时

```
var fsNode = new window.FSNode({
                Type: "dir",
                Node: new window.Dir({
                    Name: "dir1",
                    ChildNodes:new window.FSNodeCollection()
                })
            });
var fsNode2 = new window.FSNode({
                Type: "dir",
                Node: new window.Dir({
                    Name: "dir2",
                    ChildNodes:new window.FSNodeCollection()
                })
            });
var subDir1Node = new window.FSNode({
                Type: "dir",
                Node: new window.Dir({
                    Name: "subDir1",
                    ChildNodes:new window.FSNodeCollection()
                })
              });
            fsNode.get("Node").get("ChildNodes").push(subDir1Node) 
```

问题不再存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:43:41.370

问题是它们都引用同一个数组，您需要做的是确保在创建模型时初始化数组（您可以使用初始化方法，也可以分配一个函数来分配收藏）。

你可能想看看这些问题

[Backbone.js 模型中的数组本质上是静态的？](https://stackoverflow.com/questions/9974354/arrays-in-a-backbone-js-model-are-essentially-static)

[为什么 Backbone.js 模型的新实例包含预定义默认值的附加值？](https://stackoverflow.com/questions/9970490/why-do-new-instances-of-a-backbone-js-model-contain-additional-values-to-the-pre/)

# windows-phone-7 - 使用定位服务时是否需要通知用户和/或提供退出选项？

> ID：10554968
> 
> 赞同：1
> 
> 时间：2012-05-11T16:10:40.063
> 
> 标签：windows-phone-7, marketplace

我正在我的一个应用程序中读取手机的位置，但我不知道是否必须向用户提问“此应用程序使用您的位置，您要运行它吗？” 在他第一次运行我的应用程序之前？我听说没有它的应用程序无法在 Marketplace 上获得认证。一定要加还是不加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:16:19.143

就其本身而言，您不需要让用户知道使用了该位置 - 有些应用程序通过了此认证。从道德的角度来看，这可能是一个不同的问题。当您的应用程序被下载时，用户会收到关于它正在使用位置服务这一事实的警报。

该[州](http://msdn.microsoft.com/en-us/library/hh184838%28v=vs.92%29)的认证要求：

> **6.1 - 位置感知应用**
> 
> 用户可以从系统设置页面关闭手机上的定位服务。当手机上的位置服务关闭时，位置感知应用程序必须保持响应。
> 
> 建议：
> 
> *   显示一条用户友好的消息以指示位置数据不可用。

[但是](http://msdn.microsoft.com/en-us/library/hh184841%28v=vs.92%29)，此外：

> **2.7.2**
> 
> 您的应用程序的隐私政策必须告知用户如何使用和披露来自位置服务 API 的位置数据，以及用户对位置数据的使用和共享的控制。这可以在应用程序中托管或直接链接到应用程序。
> 
> **2.7.3**
> 
> 您的应用程序必须提供应用程序内设置，以允许用户启用和禁用您的应用程序从位置服务 API 访问和使用位置。
> 
> **2.7.4**
> 
> 如果您的应用程序将从位置服务 API 获得的位置数据发布或提供给任何其他服务或其他人（包括广告网络），您的应用程序必须实施一种方法来获得选择同意。为了“实施一种获得‘选择加入’同意的方法”，应用程序必须：
> 
> ```
> (a) first describe how the location information will be used or shared;
> 
> (b) obtain the user's express permission before publishing the location information as described; and
> 
> (c) provide a mechanism through which the user can later opt out of having the location information published. Your application must 
> ```
> 
> 定期提醒用户或提供视觉指示器，表明位置数据正在发送给任何其他服务或人员。

底线 - 如果您**计划发布或存储该位置，**则需要附加通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:29:38.397

> 如果我必须问用户问题“这个应用程序使用你的位置，如果你想运行它？” 在他第一次运行我的应用程序之前？我听说没有它的应用程序无法在 Marketplace 上获得认证。

您必须在用户第一次使用该应用程序时明确询问他/她。就那么简单。您在从市场下载它时批准的功能是不够的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:15:39.173

我没有确切的答案，但是：我希望如此。我不希望未经我明确许可的应用程序跟踪我的位置。即使不需要，也要去做。假设它不是像 Foursquare 那样天生具有位置感知能力的东西，当有人不可避免地注意到跟踪时，您的应用程序将成为新闻（而且不是很好）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T16:44:13.500

当我没有让用户打开和关闭定位服务时，我的应用程序未能通过认证。我发现下面链接中的代码是一个很好的解决方法，它使我的应用程序获得了认证。

[http://blog.jerrynixon.com/2012/02/wp7-sample-use-location-services-and.html](http://blog.jerrynixon.com/2012/02/wp7-sample-use-location-services-and.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T16:25:29.493

您需要在应用程序清单设计器中指定应用程序功能。

> Metro 风格应用程序在安全容器中运行，对文件系统、网络资源和硬件的访问受限。每当用户从 Windows 应用商店安装应用程序时，Windows 都会查看 Package.appxmanifest 文件中的元数据，以确定应用程序需要哪些功能才能运行。例如，应用程序可能需要访问来自 Internet 的数据、来自用户文档库的文档或用户的网络摄像头和麦克风。安装应用程序后，它会向用户显示它需要的功能，并且用户必须授予它访问这些资源的权限。如果应用程序没有请求和接收对其所需资源的访问权限，则在用户运行它时将不允许访问该资源。

因此它会自动为您完成。[请参阅此处了解应用程序功能](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)

是的，认证要求如果用户禁用应用程序功能，您的应用程序必须仍然保持响应，并向用户表明该功能已禁用并建议用户使用它。

# r - 从单个 data.frame 创建多个时间序列对象，其中类别变量作为列，日期作为行

> ID：10554969
> 
> 赞同：1
> 
> 时间：2012-05-11T16:10:41.063
> 
> 标签：r, time-series

我有一个如下的data.frame。行名标识日期，列名标识分类变量（帐户）。

我想为每个分类变量创建一个单独的时间序列对象，记住分类变量的数量可能会有所不同（现在我有 5 个，但我可以有 7、8、9 等......）和开始并且结束日期可能会有所不同（现在每个类别变量都跨越整个时间段，但可能并非总是如此）。

我试过`if`循环`tapply()`，但没有成功。我可以手动获得我想要的结果，但我正在尝试设计一些可针对任意数量的分类变量和日期进行扩展的东西，即无论每个变量的大小/跨度如何。

```
 A  B  C   D   E
14975 130 23  1   5  53
15006 125 22  3   8  45
15034 112 20  4   6  44
15065 110 21  2   7  48
15095 122 53 10  17  60
15126 133 42 12  18  65
15156 121 46  9  16  59
15187 127 47 11  19  63
15218  95 24 13  46  66
15248 105 29 14  35  61
15279  93 25 15  33  61
15309 107 64 35 149  62
15340  81 55 26 131  67
15371  80 43 36 134  71
15400  88 49 41 130  86
15431  95 51 40 132  86
15461  87 48 39 135  90
15492 103 57 33 139  97
15522 108 58 38 129  97
15553 109 71 32 138  92
15584 104 68 34 126  84
15614 102 70 37 123  75
15645  97 68 39 124  76
15675 117 90 56 136  99
15706 111 89 30 140  96
15737 119 94 28 140  98
15765 128 97 31 137  98
15796 129 79 27 143 106
15826 113 74 50 146 100
15857 118 85 53 142  98
15887 120 85 50 145  91
15918 113 77 52 141 101
15949 115 74 55 144  95
15979 115 83 54 148  73
16010 116 78 47 147  72
16040 114 82 56 150  69 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:21:03.967

在基本图形中，for 循环将完成您描述的内容。这里有一些数据：

```
A<-round(rnorm(50,100,5))
B<-round(rnorm(50,10,5))
C<-round(rnorm(50,50,5))
t<-round(seq(1400,1500,length.out=50))
dat<-cbind(A,B,C) 
```

设置一个情节：

```
plot(t,A,ylim=c(0,150),type="n") 
```

添加行：

```
for(i in 1:ncol(dat){
ts=lines(t,dat[,i])
} 
```

# javascript - 为什么每次点击空链接都会刷新我的页面？

> ID：10554970
> 
> 赞同：0
> 
> 时间：2012-05-11T16:10:41.450
> 
> 标签：javascript, jquery

我有一个这样的链接：

```
<a hreflang="15" class="comment-show-link" href="">View/hide comments</a> 
```

然后让这段代码显示/隐藏内容：

```
$('.comment-show-link').click(function(e) {
  $('#comment-show-'+$(this).attr("hreflang")).slideToggle('slow');
  e.stopPropagation();
}); 
```

但是当我单击链接时，页面被发送并且没有显示 div "#comment-show-"，为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T16:13:11.197

您不想要[`stopPropagation`](http://api.jquery.com/event.stopPropagation/)（阻止事件冒泡），您想要[`preventDefault`](http://api.jquery.com/event.preventDefault/)（阻止事件的默认操作 - 在这种情况下，按照链接）。或者只是`false`从您的事件处理函数返回（这[两者都](http://api.jquery.com/on/) *[在链接上，向下滚动到以 "Returning false..."] 开头的段落*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:15:48.553

这就是锚标签的行为。我认为您希望 e.PreventDefault 阻止它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T16:12:24.953

只需传递给`href`属性`javascript:;`值

```
<a hreflang="15" class="comment-show-link" href="javascript:;">View/hide comments</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T16:13:23.443

尝试：

```
<a data-hreflang="15" class="comment-show-link" href="#">View/hide comments</a> 
```

-

```
$('.comment-show-link').on('click', function(e) {
    e.preventDefault();
    $('#comment-show-'+$(this).data("hreflang")).slideToggle('slow');
}); 
```

或为了防止默认操作和冒泡，请执行

```
$('.comment-show-link').on('click', function() {
    $('#comment-show-'+$(this).data("hreflang")).slideToggle('slow');
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T16:20:42.693

尝试将 href 属性设置为**href="javascript:void(0);"**

这是一个jsfiddle：

[http://jsfiddle.net/septerr/taCvq/](http://jsfiddle.net/septerr/taCvq/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T16:13:13.697

去掉href，没用（当然最好用简单的span）。

如果您添加它来更改光标，请改用 css (cursor:pointer)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T16:13:28.890

你可以使用`preventDefault()`；

```
$('.comment-show-link').click(function(e) {
  $('#comment-show-'+$(this).attr("hreflang")).slideToggle('slow');
  e.preventDefault();
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-11T16:14:09.757

不要使用链接。

您没有链接到任何内容，因此将您的内容标记为链接是没有意义的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-11T16:14:09.877

尝试

```
$('.comment-show-link').click(function(e) {
  $('#comment-show-'+$(this).attr("hreflang")).slideToggle('slow');
  e.stopPropagation();
  return false;
}); 
```

# python - 如何在 Python 中的模块之间传输变量？

> ID：10554974
> 
> 赞同：0
> 
> 时间：2012-05-11T16:11:02.290
> 
> 标签：python, module

模组.py：

```
def addone(number):
    result = number + 1 
```

测试.py：

```
import mod

print mod.addone(2) 
```

我得到的结果是`None`，所以我猜结果变量丢失了。我的代码中缺少什么。

是的，我知道这可以在没有模块的情况下轻松完成，这只是一个示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:14:19.153

你正在做正确的导入，mod.py 中没有返回结果的方法。改成：

```
def addone(number):
    return number + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:15:05.607

add_one 中缺少“return”，所以你没有

# ruby-on-rails - 按评分对图像进行排序

> ID：10554976
> 
> 赞同：-1
> 
> 时间：2012-05-11T16:11:13.180
> 
> 标签：ruby-on-rails, paperclip, ruby-on-rails-3.2

每张图片都有从 1 到 5 的评分。我想按评分对它们进行排序（例如：每张评分为 5 的图片显示在顶部，评分为 4 的图片低于 5，等等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:15:27.660

根据您的描述，它应该很简单

```
@pictures = Picture.order("rating DESC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:21:44.903

你可以写一个`default_scope`... [http://apidock.com/rails/ActiveRecord/Base/default_scope/class](http://apidock.com/rails/ActiveRecord/Base/default_scope/class)

`default_scope :order => 'rating DESC'`

然后在你的控制器中：
`@pictures = Picture.all`

# objective-c - Objective-C NSString 的内存管理

> ID：10554978
> 
> 赞同：-2
> 
> 时间：2012-05-11T16:11:21.657
> 
> 标签：objective-c, memory-management

> **可能重复：**
> [局部变量分配与直接分配；属性和内存](https://stackoverflow.com/questions/3066848/local-variable-assign-versus-direct-assign-properties-and-memory)
> [哪种方式是使用属性分配内存的正确方法？](https://stackoverflow.com/questions/7395253/which-way-is-the-correct-way-to-allocate-memory-with-a-property)

我想知道这两个代码示例之间的区别。

# 1：

```
NSString *someString = @"Blabla";

{...Some code...}

imageView.title = [[NSString alloc] initWithString:someString]; 
```

# 2：

```
NSString *someString = @"Blabla";

{...Some code...}

NSString *str = [[NSString alloc] initWithString:someString];
imageView.title = str;
[str release]; 
```

出于某种原因，Xcode Analyzer 警告我选项 #1 可能会导致内存泄漏 - 所以当我将代码更改为选项 #2 时，分析器不会警告我。

有谁知道这是什么原因？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:22:52.460

假设您没有使用 ARC，则

`[str release];`

线是这里的关键。将该行添加到第一个示例代码段的末尾，看看您是否收到相同的警告。显式调用`alloc`一个对象会增加引用计数 - 减少`release`应该调用的引用计数。

有关 ARC 的信息，请参阅：[新的自动引用计数机制如何工作？](https://stackoverflow.com/questions/6385212/how-does-the-new-automatic-reference-counting-mechanism-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:14:30.613

在第一个示例中，您分配了一个新的 NSString，将其传递，但​​没有释放它。您有责任释放该字符串，该字符串在您首次分配时具有 +1 保留计数。

（忽略您的简单示例可能不会导致实际泄漏的事实。但这不是重点，它仍然不是在这里管理该内存的正确方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:30:08.650

您的第一个示例中的问题：

```
NSString *someString = @"Blabla";
{...Some code...}
imageView.title = [[NSString alloc] initWithString:someString]; 
```

是您正在通过 alloc/init 分配一个字符串并将其分配给`imageView.title`哪个`retain`属性。事实上，alloc 会给你一个保留计数为 1 的对象；将其分配给`retain`属性还将增加其保留计数 (2)。现在，当 imageView 最终被释放时，它的`dealloc`方法将释放`title`属性（从而将其保留计数减 1），但对象不会被释放，因为您没有机会`release`再次调用来平衡自己的`alloc`.

这里要注意的重要一点是您正在分配一个`retain`属性；不是`title`保留属性，您的代码就可以了。

这是您修复第一个示例的方法：

```
imageView.title = [[[NSString alloc] initWithString:someString] autorelease]; 
```

或者

```
imageView.title = [NSString stringWithString:someString]; 
```

which relies on the use of a commodity constructor which gives you an autoreleased object by convention.

(it is also correct the way you do it in your second example, though slightly more verbose).

# android - Flex Mobile：将事件添加到日历

> ID：10554984
> 
> 赞同：2
> 
> 时间：2012-05-11T16:11:52.807
> 
> 标签：android, ios, air, flex-mobile

是否可以以编程方式将事件添加到 iOS 和 Android 上的日历？我想这必须有一个 Adob​​e Native Extension，对吧？或者有没有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:07:52.010

检查这个扩展，它看起来像你需要的

[http://code.google.com/p/flashbuilder-ane-save-date-as-calendar-events/](http://code.google.com/p/flashbuilder-ane-save-date-as-calendar-events/)

# javascript - 使用 javascript 显示 IE 收藏夹

> ID：10554985
> 
> 赞同：0
> 
> 时间：2012-05-11T16:11:53.320
> 
> 标签：javascript, internet-explorer, activex, hta

我正在编写一个 HTA，我有一个按钮，我想打开 IE 并显示用户书签。有什么好方法可以做到这一点吗？使用IE9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:39:19.710

[http://www.devguru.com/technologies/wsh/17410.asp](http://www.devguru.com/technologies/wsh/17410.asp)

```
var  objShell = new ActiveXObject("wscript.shell");
var objWshFavorite = WshShell.SpecialFolders("Favorites"); 
```

[http://technet.microsoft.com/en-us/library/ee156616.aspx](http://technet.microsoft.com/en-us/library/ee156616.aspx)

[http://www.mombu.com/microsoft/scripting-vb-script/t-browse-each-site-in-ie-favorites-list-131320.html](http://www.mombu.com/microsoft/scripting-vb-script/t-browse-each-site-in-ie-favorites-list-131320.html)

# python - 使用 stdin/stdout 与 smbpasswd 与 Python 子进程通信

> ID：10554989
> 
> 赞同：1
> 
> 时间：2012-05-11T16:12:01.287
> 
> 标签：python, linux, subprocess

我一直在尝试使用 Python 的 subprocess 模块与程序（smbpasswd）进行通信，但没有取得多大成功。我可以毫无问题地与不同的程序（例如 grep）通信，所以问题是 smbpasswd 特有的。为了说明这个问题，下面的代码有效：

```
>>> p = Popen(["grep", "n"], stdout=PIPE, stdin=PIPE, stderr=STDOUT)
>>> stdout = p.communicate(input='one\ntwo\n')[0]
>>> print(stdout)
one 
```

但是，以下内容不会：

```
>>> p = Popen(["smbpasswd", "-r", server, "-U", user], stdout=PIPE, stdin=PIPE, stderr=PIPE)
>>> stdout = p.communicate(input='old_password')[0]
>>> print(stdout) 
```

不同之处在于 grep 在调用初始“grep f”后等待用户输入，而 smbpasswd 在查找输入之前提示用户输入他们的旧密码（如果您在终端中运行该命令，则会显示“旧 SMB 密码：”） .

然而，这是我的知识结束的地方。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:16:43.103

您可以使用[pexpect](http://www.noah.org/wiki/pexpect)来实现我想要的。我很确定 smbpassword 像`su -c`a一样打开`PTY`，您不能使用子进程通过`PTY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:50:19.400

您需要告诉`smbpasswd`密码提示使用标准输入。从帮助文本中：

```
When run by root:
    smbpasswd [options] [username]
otherwise:
    smbpasswd [options]

options:
  -s                   use stdin for password prompt 
```

# java - EJB 3.0 测试客户端在没有 maven 的情况下工作但不使用

> ID：10554990
> 
> 赞同：2
> 
> 时间：2012-05-11T16:12:02.307
> 
> 标签：java, jakarta-ee, maven, ejb-3.0, jndi

这是我的问题，我用 maven 和 2 个测试客户端制作了一个 EJB，

*   一个没有 maven 的测试客户端，只将 jnp-client 和 EJB 添加到它的类路径中，就像一个魅力
*   使用 MAVEN 的测试客户端，通过 POM 和 jnp-client 添加 EJB，不起作用

这是我的 EJB：

这是POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.toto.mp</groupId>
  <artifactId>MyFirstMavenEjb</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>ejb</packaging>
  <name>MyFirstMavenEjb</name>
  <url>http://maven.apache.org</url>

  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <version>6.0</version>
      <scope>provided</scope>
    </dependency>
  </dependencies>

   <!-- setting default EJB2 to EJB3 -->
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.0.2</version>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-ejb-plugin</artifactId>
        <version>2.1</version>
        <configuration>
          <ejbVersion>3.0</ejbVersion>
        </configuration>
      </plugin>

    </plugins>
  </build>
</project> 
```

这是我的第一个测试客户端，没有 maven 的客户端与 EJB 交谈没有任何问题

这是我的第二个测试客户端，使用 maven，它无法与 EJB 对话，我得到的只是：

```
Context lookup finished
Exception in thread "main" java.lang.ClassCastException: javax.naming.Reference cannot be cast to com.toto.mp.MyFirstMavenEjb.TestMavenEjb
    at com.toto.mp.TestClientMavenEjb.App.main(App.java:27) 
```

这是POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.toto.mp</groupId>
  <artifactId>TestClientMavenEjb</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>TestClientMavenEjb</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <!-- pour la dependance jnp-client, besoin de la version 5.0.3.GA -->
  <repositories>
    <repository>
      <id>Jboss</id>
      <url>https://repository.jboss.org/nexus/content/repositories/releases/</url>
    </repository>
  </repositories>

  <dependencies>
    <dependency>
        <groupId>org.jboss.naming</groupId>
        <artifactId>jnp-client</artifactId>
        <version>5.0.3.GA</version>
    </dependency>
    <dependency>
        <groupId>com.toto.mp</groupId>
        <artifactId>MyFirstMavenEjb</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency>
  </dependencies>
</project> 
```

两个客户端都有相同的 main ：

```
public static void main( String args[] ) throws NamingException
{
    Hashtable env = new Hashtable(); 
    env.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory"); 
    env.put(Context.PROVIDER_URL, "localhost"); 
    env.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces" ); 
    Context ctx = new InitialContext(env);
        System.out.println("Context lookup finished");

        TestMavenEjb proxy = (TestMavenEjb)(ctx.lookup("TestMavenEjbBean/remote-com.toto.mp.MyFirstMavenEjb.TestMavenEjb"));
        System.out.println(proxy.getClass());

        System.out.println("do something!");

        proxy.doSomething();
} 
```

那么，任何人都对为什么 maven 测试客户端不工作有丝毫的想法吗？

Jboss 5.1.0.GA Eclipse 靛蓝 Maven 3.0.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:04:43.407

遮阳篷很简单，但我发布的内容找不到：x

我使用的是 jee6 原型，而 Jboss 5.1.0.GA 与 jee6 不兼容。如果我使用 jee5 原型，我可以毫无问题地让他们说话。

# interpreter - AST 解释器？

> ID：10554998
> 
> 赞同：12
> 
> 时间：2012-05-11T16:12:53.883
> 
> 标签：interpreter, abstract-syntax-tree

我有一个 AST（抽象语法树），现在我想通过给它 2 个或更多数字来测试我的编译器，并期望输出带有数学运算结果的输出（如计算器）。

我的问题是，构建解释器的最佳方法是什么？AST 节点的访问是递归的，所以在我到达树的末尾之前，我不知道存在多少封装计算。但是由于这是逐次迭代完成的，我最终如何进行所有操作？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T16:21:14.183

一旦你有了 AST，解释器就很容易编码：

```
 int interpret(tree t)
 { /* left to right, top down scan of tree */
   switch (t->nodetype) {
     case NodeTypeInt:
        return t->value;
     case NodeTypeVariable:
        return t->symbtable_entry->value
     case NodeTypeAdd:
        { int leftvalue= interpret(t->leftchild);
          int rightvalue= interpret(t->rightchild);
          return leftvalue+rightvalue;
        }
     case NodeTypeMultiply:
        { int leftvalue= interpret(t->leftchild);
          int rightvalue= interpret(t->rightchild);
          return leftvalue*rightvalue;
        }
     ...
     case NodeTypeStatementSequence: // assuming a right-leaning tree
        { interpret(t->leftchild);
          interpret(t->rightchild);
          return 0;
        }
     case NodeTypeAssignment:
        { int right_value=interpret(t->rightchild);
          assert: t->leftchild->Nodetype==NodeTypeVariable;
          t->leftchild->symbtable_entry->value=right_value;
          return right_value;
        }
     case NodeTypeCompareForEqual:
        { int leftvalue= interpret(t->leftchild);
          int rightvalue= interpret(t->rightchild);
          return leftvalue==rightvalue;
        }
     case NodeTypeIfThenElse
        { int condition=interpret(t->leftchild);
          if (condition) interpret(t->secondchild);
          else intepret(t->thirdchild);
          return 0;
     case NodeTypeWhile
        { int condition;
          while (condition=interpret(t->leftchild))
                interpret(t->rightchild);
          return 0;

     ...
   }
 } 
```

令人讨厌的是“goto”，因为这改变了解释器的关注点。要实现 goto 或函数调用，必须在树中搜索标签或函数声明，并在那里继续执行。[可以通过预扫描树并在查找表中收集所有标签位置/函数声明来加快这一速度。这是构建编译器的第一步。] 即使这样还不够；您必须调整递归堆栈，我们将其隐藏在函数调用中，因此这并不容易。如果将此代码转换为具有显式管理的递归堆栈的迭代循环，则修复堆栈会容易得多。

# ruby-on-rails - Rails 开发是在所有请求上描述和显示表，如何关闭它？

> ID：10554999
> 
> 赞同：2
> 
> 时间：2012-05-11T16:12:54.053
> 
> 标签：ruby-on-rails, logging, show

正如您在 rails 日志中看到的：

在 2012-05-11 13:07:54 -0300 开始 GET "/" for 127.0.0.1

SQL (1.3ms) 描述`table1`
SQL (1.0ms) 描述`table2`
SQL (0.8ms) 描述`table3`
SQL (0.8ms) 描述`table4`
SQL (0.8ms ) 描述`table5`
SQL (0.9ms) 描述`table6`
SQL (0.8ms) 描述`table7`
SQL (0.8ms) 描述`table8`
SQL (0.8ms) 描述`table9`
SQL (0.8ms) 描述`table10`
SQL (1.2ms) SHOW TABLES
SQL (1.2ms) SHOW TABLES
SQL (1.1ms ) ) SHOW TABLES
SQL (1.1ms) SHOW TABLES
SQL (1.1ms) SHOW TABLES
SQL (1.1ms) SHOW TABLES
SQL (1.2ms) SHOW TABLES
SQL (1.2ms) SHOW TABLES
SQL (1.1ms) SHOW TABLES
SQL (1.2ms)显示表格

这使我的应用程序变慢，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:43:16.373

Rails 需要这样做才能确定表中的字段，否则它无法使所有 ActiveRecord 魔术发生。如果没有这个，您必须在模型中显式声明所有 db 字段，这不会是 DRY。额外的启动时间是使用任何 ORM 的必要成本。