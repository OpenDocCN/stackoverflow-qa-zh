# StackOverflow 问答 12361000-12361999

# tortoisesvn - TortoiseSVN 显示 PPT 文件在打开-关闭时修改

> ID：12361001
> 
> 赞同：1
> 
> 时间：2012-09-11T00:00:20.343
> 
> 标签：tortoisesvn, ms-office, powerpoint

我相信你们中的一些人一定已经看到了这种行为，尽管我在 SO 上找不到关于这个非常具体的问题的现有线程，因此发布它希望 SO 专家可能有答案。

我注意到，每当从 TSVN 工作副本打开和关闭 MS PPT 文件时，TSVN 都会将其标记为已修改。例如，我查看了一个 SVN 存储库，其中存储了 PPT 文件。现在，即使我只是从本地 WC 中打开和关闭 PPT 文件（不进行 SINGLE 编辑），TSVN 也会将其标记为已修改（红色感叹号）。

一段时间后它变得非常烦人，因为很难跟踪（不使用某种差异工具）红色感叹号是因为我实际上更改了文件中的内容，还是仅仅是因为我打开和关闭了文件某个时间点。

SVN 服务器：1.4.6 (r28521) TSVN 客户端：1.7.6，内部版本 22632 - 64 位，2012/03/08 18:29:39 MS Office：Office 2010（标准）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:41:32.657

这是使用存储库的人报告的问题。不幸的是，这只是PPT所做的事情。MS 意识到了这一点，已经有几个版本了，似乎并不认为这是一个足够大的问题来打扰（或者修复它会干扰他们认为更重要的其他功能，也许）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T07:35:28.527

当您打开演示文稿文件时，PowerPoint 会自动保存演示文稿预览图像，即使您不手动保存它也是如此。为避免这种情况，您必须打开文件，转到文件属性对话框并取消选中“保存预览图片”复选框。现在您的演示文件将保持不变，除非您自己保存它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:00:09.263

MS Office 有时会自动保存文件。我认为从 SVN 的角度来看，您可以将只读属性设置为解决方法，或者从 Powerpoint 以只读模式打开文件。那么它不应该更改修改时间戳。

# android - 如何清除 MonkeyRunner 应用程序缓存？

> ID：12361004
> 
> 赞同：0
> 
> 时间：2012-09-11T00:00:50.070
> 
> 标签：android, monkeyrunner

我需要使用monkeyrunner 运行一个测试套件。有没有办法在运行一些测试后清除应用程序缓存`monkey.device.uninstall()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:34:57.657

to clear your cache use the following line of code.

```
File dir = context.getCacheDir(); 
    if (dir != null && dir.isDirectory()) { 
     deleteDir(dir); 
    } 

    public static boolean deleteDir(File dir) { 
     if (dir != null && dir.isDirectory()) 
     { 
       String[] children = dir.list(); 
       for (int i = 0; i < children.length; i++) { 
        boolean success = deleteDir(new File(dir, children[i])); 
        if (!success) { 
         return false; 
        } 
       } 
     } 
    return dir.delete(); 
   } 
```

for more detail [http://grabcodes.blogspot.com](http://grabcodes.blogspot.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:55:01.207

您可以使用 adb 命令删除应用程序的缓存文件夹，如下所示。您应该知道该应用程序的文件夹路径。对于 Facebook 应用程序，

```
adb shell
cd /Android/data/com.facebook.katakana/cache
rm *
exit 
```

这会清除缓存。如果您使用的是 monkeyrunner，那么您可以使用 jython 代码

```
subprocess.call("<above mentioned commands>") 
```

# android - 应用服务器如何将 Google 帐户关联到用户的设备？

> ID：12361006
> 
> 赞同：3
> 
> 时间：2012-09-11T00:01:04.517
> 
> 标签：android, oauth-2.0, openid, google-account, google-cloud-messaging

我希望用户能够从网络服务器和/或本地 PC 应用程序输入数据，并将其传输到他们选择的 Android 设备，其方式与在设备上安装 Google Play 的工作方式大致相同。

我想使用用户的谷歌账户[认证](https://developers.google.com/accounts/)来建立应用服务器和用户在 GCM 中注册的 Android 设备之间的链接。

[我在 Google Cloud 消息API 文档](http://developer.android.com/guide/google/gcm/index.html)中找不到关于如何处理这种身份验证的任何提及，但确实在 GCM 论坛中找到了这个[未回答的问题。](https://groups.google.com/d/topic/android-gcm/NoMaf2t0NNQ/discussion)

我想通过他或她的 Google 帐户对来自网络应用程序的用户进行身份验证。类似地，Android 应用程序会以某种方式获得同一个 Google 帐户的句柄，该句柄将与初始 GCM 注册同时发送到 Web 应用程序服务器一次。

然后，当用户使用 Web 应用程序时，服务器会提供用户已经注册到服务器的设备列表，以便提示用户他或她想向哪个 Android 设备发送数据。

如何在 Web 服务器和设备上完成此操作？

使用 Google 帐户进行身份验证后，我可以使用哪些信息在两次登录之间建立链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:07:40.980

您应该使用[注册](https://developers.google.com/accounts/docs/OpenID#AuthProcess)[`user_id`](https://developers.google.com/accounts/docs/OAuth2Login)后从 Google 帐户服务器返回的值来唯一标识每个用户。出于多种原因，不应使用电子邮件地址：

*   访问电子邮件地址可能需要用户的额外权限，并且由于信任问题而劝阻用户不要使用您的服务/应用程序。
*   增加保护用户电子邮件地址数据库的责任
*   用户可以更改他们在 Google 帐户中的电子邮件地址，但不能更改他们的用户 ID。
*   用户可以将一个电子邮件地址与多个用户 ID 相关联，因此它不一定是唯一的。

以下序列图显示了来自客户端 Android 应用程序的初始注册：

![从客户端 Android 应用程序初始注册](../Images/57d86f5b50be5d9eeff189e99cb5f0a2.png)

下图显示了当客户端想要从浏览器访问他的设备时会发生什么：

![客户想从浏览器访问他的设备](../Images/bd44321f031e8d037cf5d68a2bf41865.png)

请注意，尽管未显示，但如果需要，客户端 Android 应用程序现在可以通过应用程序服务器与客户端浏览器进行通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:47:22.387

向[`user_id`](https://developers.google.com/accounts/docs/OAuth2Login)GCM 注册时从设备获得的用户 ID 应与使用应用的 OAuth 令牌获得的 user_id 相同。只需将 OAuth 令牌和注册 ID 存储在您的用户存储库中，并将两者与 user_id 相关联。

![在此处输入图像描述](../Images/ad16d460512636853c6a313093512deb.png)

# asp.net-mvc-3 - 在 mvc3 应用程序中填充下拉列表的最佳方法

> ID：12361009
> 
> 赞同：1
> 
> 时间：2012-09-11T00:01:46.193
> 
> 标签：asp.net-mvc-3

我在 MVC3 应用程序中有一个索引视图，其 @model 是可枚举的。在这个模型中，我有一个 accountID，我想用它在视图过滤器中填充我的下拉列表中的帐户，以便用户能够过滤帐户。

实现这一目标的最佳方法是什么？

提前致谢。

这是视图：

```
@model IEnumerable<MoneyAdmin.Model.ContaAReceber>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Html.Partial("_SubmenuAdmin")

<div class="tituloCadastro">
    Lista de Contas a Receber
</div>

<div class="buttonContainer novo">
    @Html.ActionLink("Nova Conta", "Create")
</div>

<div class="filtros">
    @using (Html.BeginForm()) { 
        <div class="filterField">
            <label>Data Inicial:</label>
            @Html.TextBox("dataInicial", @DateTime.Now.ToShortDateString())
        </div>
        <div class="filterField">
            <label>Data Final:</label>
            @Html.TextBox("dataFinal", @DateTime.Now.ToShortDateString())
        </div>
        <div class="filterField">
            <label>Tipo de Conta:</label>
            @Html.DropDownList("contaID")
        </div>

        <input type="submit" value="Atualizar" />
    }     
</div> 
```

和控制器方法：

```
public ViewResult Index(string dataInicial, string dataFinal, string contaID)
    {
        var crs = from cr in db.contasareceber.Include("contas")
                       select cr;

        if (!string.IsNullOrEmpty(dataInicial) && !string.IsNullOrEmpty(dataFinal))
        {
            DateTime di = DateTime.Parse(dataInicial);
            DateTime df = DateTime.Parse(dataFinal);

            crs = crs.Where(cr => cr.dataPagamento >= di && cr.dataPagamento <= df);
        }

        return View(crs.ToList());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T00:31:34.003

我认为实现您所追求的最佳方法是使用 ViewModel。您将通过此加载要在视图中显示的内容。因此，您将使用您的帐户列表创建一个下拉列表，该下拉列表将加载到您的控制器中。您还将在其中拥有您的 IEnumerable ContaAReceber，它也将加载到您的控制器中。然后你的控制器会将 ViewModel 传递给 View。由于您没有向我们展示您的模型，因此很难给您一个准确的答案。但是您可以将其用作指南。

视图模型：

```
public class ContaAReceberViewModel
{
    public int ContaAReceberID {get;set;}
    public List<SelectListItem> ContaAReceberList {get;set;}
    public IEnumerable<ContaAReceber> ContaAReceber {get;set;}
} 
```

Razor 视图中的下拉列表：

```
@Html.DropDownListFor(m => m.ContaAReceberID, Model.ContaAReceberList) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T00:36:51.127

您可以使用 ViewBag 而不是创建 ViewModel 来传输数据。

**视图模型**

```
public class ContaFilterViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

**动作结果**

```
public ViewResult Index(string dataInicial, string dataFinal, string contaID)
{
    var crs = from cr in db.contasareceber.Include("contas")
              select cr;

    // select uniquely all available Contas
    ViewBag.UniqueContas = crs.Select(x => new ContaFilterViewModel() { Id = x.ContaId, Name = x.ContaName}).Unique().ToList();

    if (!string.IsNullOrEmpty(dataInicial) && !string.IsNullOrEmpty(dataFinal))
    {
        DateTime di = DateTime.Parse(dataInicial);
        DateTime df = DateTime.Parse(dataFinal);

        crs = crs.Where(cr => cr.dataPagamento >= di && cr.dataPagamento <= df);
    }

    // return filtered Contas
    return View(crs.ToList());
} 
```

**看法**

```
<div class="filterField">
    <label>Tipo de Conta:</label>
    @Html.DropDownList("contaID", new SelectList((ContaFilterViewModel)ViewBag.UniqueContas, "Id, "Name"))
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T01:15:54.943

谢谢大家！

我找到了这样的答案。

像这样在控制器中填充 viewbag：

```
ViewBag.Contas = new SelectList(db.contas, "contaID", "nome"); 
```

然后像这样在下拉列表中使用它：

```
@Html.DropDownList("Contas"); 
```

简单而且有效！

谢谢大家！

# knockout.js - SignalR/CoffeeScript Hub 回调问题

> ID：12361010
> 
> 赞同：0
> 
> 时间：2012-09-11T00:01:46.617
> 
> 标签：knockout.js, signalr, signalr-hub

这工作正常

```
class Window.AppViewModel
    message : ko.observable("")
    chatMessages : ko.observableArray()
    canSendMessage : ko.observable(false)
    Window.sHub.addMsg = (data) =>  
        @::chatMessages.push(data) 
```

而这

```
class Window.AppViewModel
    constructor : ->
        @message = ko.observable("")
        @chatMessages = ko.observableArray()
        @canSendMessage = ko.observable(false)
        Window.sHub.addMsg = (data) =>  
            @chatMessages.push(data) 
```

结果导致我的服务器端集线器**接收**服务器消息，但无法进行任何回调。

我在这里想念什么？？？这把我逼到了墙角。显然，基于原型的解决方案将起作用，因为它使所有内容都“静态”，但我很受挫，因为我目前无法编写分离良好的代码。

有没有办法查看集线器试图调用的内容？SignalR 文档讨论了跟踪/记录，但从未解释过如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:34:48.380

所有有线客户端事件都可以通过在 hubProxy 原型中的 jquery.SignalR 中的“On”匿名函数中添加一个小片段来找到

所以现在它看起来像这样

```
 on: function (eventName, callback) {
            /// <summary>Wires up a callback to be invoked when a invocation request is received from the server hub.</summary>
            /// <param name="eventName" type="String">The name of the hub event to register the callback for.</param>
            /// <param name="callback" type="Function">The callback to be invoked.</param>
            var self = this;

            // Normalize the event name to lowercase
            eventName = eventName.toLowerCase();
            console.log(eventName + " callback was registered on the client");
            $(self).bind(eventNamespace + eventName, function (e, data) {
                callback.apply(self, data);
            });
            self.subscribed = true;
            return self;
        } 
```

并为您提供可以从服务器回调的客户端方法的良好输出

此外，我了解到 CreateHubProxies（通过您添加的回调反映）仅对整个 hub.Start() 调用一次——因此在开始**之前**必须将所有方法添加到 hub 代理。

这绝对应该在 github wiki 上。这是有道理的，但并不明显。

编辑：允许您多次调用 CreateHubProxies 是有意义的。人们习惯于以一种延迟分配视图模型的方式编写 Knockout.js 代码，直到某个事件发生——如果您的视图模型有任何 SignalR 回调，这并非不可能。必须预先创建所有视图模型有点麻烦。您甚至可以通过保留已生成的代理成员列表并将其排除在外来保持精简。

# perl - Catalyst - 创建数据库转储 - 获取“未找到表，您是否忘记指定 db_schema？” 在 MS SQL Server 连接上

> ID：12361015
> 
> 赞同：0
> 
> 时间：2012-09-11T00:02:33.220
> 
> 标签：perl, catalyst

我正在尝试创建一个连接到现有 MS SQL Server 数据库的 Catalyst 项目。我得到了正确的连接字符串并且它正在验证，但它没有找到任何表。有人知道我可能会错过什么吗？

我替换了真实的 IP 地址、数据库名称、用户名和密码，但你明白了。

这是我运行的命令：

```
script\qa_utility_create.pl model DB DBIC::Schema QA_Utility::Schema create=static "db_schema=DatabaseName" "dbi:ODBC:Driver={sql server};Server=1.1.1.1,1433;Database=DatabaseName" username password 
```

当我运行它时，我收到以下错误：

```
exists "C:\strawberry\perl\site\bin\QA_Utility\lib\QA_Utility\Model"
exists "C:\strawberry\perl\site\bin\QA_Utility\t"
Dumping manual schema for QA_Utility::Schema to directory C:\strawberry\perl\site\bin\QA_Utility\lib ...
Schema dump completed.
WARNING: No tables found, did you forget to specify db_schema?
exists "C:\strawberry\perl\site\bin\QA_Utility\lib\QA_Utility\Model\DB.pm" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:47:10.083

按照错误提示检查您的 db_schema。默认值通常是“dbo”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T16:56:20.227

所以我在连接 mySQL 数据库时遇到了类似的问题，这让我发疯了大约 4 个小时（我是 Catalyst 的新手）。

创建脚本执行正常，但未能获取任何给出“警告未找到表......”的表

然而，这些表存在于数据库中。

在此之前，当脚本尝试连接到数据库时，我遇到了错误，在使用了一段时间的参数后，连接错误清除了，我认为此时一切都很好（错误 !!!!）。

此时指定 db_schema 的建议解决方案具有误导性，因为问题更多是连接无法返回任何有效数据的问题。所以我认为正在发生的事情是它正在找到数据库，连接正常，但没有返回任何数据，因此没有表......

在玩了大约 4 个小时的连接参数之后，一种组合神奇地起作用了。

所以这里是成功的命令行....

script/testcatalyst_create.pl 模型 DB DBIC::Schema testcatalyst::Schema::perl_test create=static dbi:mysql:perl_test:user=root

导致错误的参数是指定连接参数的最后一个参数 dbi:mysql...

以前我试过... script/testcatalyst_create.pl model DB DBIC::Schema testcatalyst::Schema::perl_test create=dynamic dbi:mysql:perl_test,username=root

以及来自各种在线搜索的许多其他格式。":user=root" 原来是正确的格式。

希望这对其他人有帮助！！！！！！！

# javascript - 面向公众的 REST 身份验证机制

> ID：12361017
> 
> 赞同：5
> 
> 时间：2012-09-11T00:02:42.267
> 
> 标签：javascript, web-services, rest, authentication

我正在设计一项新服务，使“客户”能够注册并为他们执行的特定搜索支付每次使用类型的费用。该服务将使用 RESTFul 和 SOAP 接口公开。通常，Web 服务将与客户的网站集成，然后向“公众”公开，任何人都可以使用客户的网站并利用我的 Web 服务功能（客户需要付费但可以完全控制审核）请求，这样他们就不会被收取太多费用）。

我想设计优化集成的服务，使其尽可能简单。Web 服务 API 将发生变化，因此在某些情况下，创建一个内部代理以向公众公开 Web 服务对客户来说太过分了。所以我看到的问题是创建一个平衡身份验证、安全性和集成的 Web 服务。

**理想的**

1.  不使用 OAuth
2.  避免强迫客户创建一个内部代理来重新公开我已经拥有的相同 Web 服务 API。
3.  安全（令牌用户名/传递任何内容和 ssl）
4.  在客户网站中嵌入一个 javascript 库 - 这将是一个客户端 Javascript 库，使集成步骤更加容易。
5.  Javascript 库需要足够安全，这样公众就无法简单地获取凭据并自行重新使用它
6.  如果可能的话，不要太老套，所以如果 Firefox 87 出现（将在几分钟内发布）并决定对其进行更新，则不必重新构建 Web 服务。

似乎需要某种 3 向身份验证过程才能使其工作，即对特定客户端（在公共场合）、Web 服务（客户）和 Web 服务进行身份验证。

有没有人实施过类似的事情，他们是如何解决这样的情况的？

我也明白在可以做的事情和违反跨域安全的事情之间有一个平衡，所以也许整个 Web 服务可能会被另一个只返回 JSONP 数据的 GET 接口公开。

/****附录****/

从那以后，我发现了一个 Web 服务，它可以满足我的需求。但是，我不确定我是否完全了解实施细节。所以也许有人也可以详细说明我的想法。

我发现的 Web 服务似乎在服务端托管了 Javascript。然后，客户将通过将 Javascript 包含在脚本标记中来将他们的网站与服务端集成，但提供了这样做的密钥，即

不知何故，如果我将脚本添加到我的网站，它就不起作用。因此，在某个地方，令牌必须注册到特定的客户域，而“client-lib.js”实际上是一个 servlet 或类似的东西，它可以以某种方式检测到来自“公众”的用户实际上来自“客户”域。

我的想法对吗？是否有某种可以以这种方式使用的 http 标头？那安全吗？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:14:53.347

首先-让我为您提供我昨天回答的[另一个SO问题](https://stackoverflow.com/questions/13186455/authentication-in-restful-web-services/13187135)的链接-因为它为类似的问题集提供了相当广泛的答案。

我假设您要向进行搜索的*站点*的所有者收费，而不是太在意进行搜索的个人*用户*是谁。如果这不正确，请澄清，我会相应地更新我的答案。

显然，在任何这种情况下，您需要做的第一件事就是确保您知道每个请求是哪个客户端。而且 - 正如您所说，您还想确保自己免受跨站点攻击和窃取用户密钥的人的侵害。

您可能会考虑以下内容：

1.  在您身边创建一个*私钥*- 只有您的服务知道。
2.  每当一个新的消费者网站向您创建帐户时，请创建一个只有您和他们知道的新*共享密钥。*我建议通过使用您的*私钥*作为密码来创建此密钥，并加密某种标识符，以便您识别此特定用户。
3.  作为注册过程的一部分，让消费者网站告诉您他们将在哪个 URI 上使用您的脚本。

现在 - 你们进行跟踪和身份验证的方式变得相当简单。

您提到提供一个 JS 库，每次 FF 更新时都不需要更新。我建议使用 jQuery 或其他类似支持的跨浏览器 JS 基础库构建该库 - 并让它包装您的 AJAX。

但是，当客户端站点请求您的脚本时，让他们为您提供类似的内容：

```
http://www.yourdomain.com/scripts/library.js?key={shared key} 
```

就您而言，当您收到此请求时，请检查以下内容：

1.  当您使用您的*私钥解密他们的**共享密钥*时，您不应该乱码。如果你这样做了——那是因为他们的密钥已经以某种方式改变了——并且无效。这应该会导致错误。*`401: Unauthorized`*
**   一旦您解密了密钥并知道这是*哪个客户端站点*（因为这就是密钥所包含的内容） - 检查以确保请求来自客户端注册的相同 URI。现在，这可以保护您免受他人窃取他们的密钥并将其注入不同的网站。*   只要符合上述条件，就让他们下载文件。*

 *现在 - 当您提供 JS 文件时，您可以通过将密钥注入该文件的方式来执行此操作 - 因此它可以访问它们的*共享密钥*。在您的每个 AJAX 请求中，包含该密钥，以便您可以识别该请求再次来自哪个客户端。在 RESTful 环境中，实际上不应该有会话——因此您需要在每个帖子上进行这种级别的身份验证。我建议将其作为 cookie 包含在内。

在您的服务器端 - 只需在每个后续请求中重复检查他们的密钥 - 瞧 - 您已经为自己建立了一些相当严格的安全性，而没有很多开销。

也就是说 - 如果您预计会有*大量*流量 - 您可能希望在未来返回并探索更深入的安全流程，因为滚动您自己的安全矩阵可能会留下意想不到的漏洞。然而——这是一个好的开始，会让你起步。

如果您需要，请随时提出任何问题，我会尝试相应地更新我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:47:34.083

最好的方法是这样的（假设您想使用托管在服务器上的 javascript 并使包含部分尽可能简单）：

*用户在您的网站上注册并收到他的域的令牌

*用户可以包含一个指向您的服务器的 js 文件，该 js 文件将类似于：

```
<script type="text/javascript" src="http://your.server.com/js.php?token=###&widget=xxx"></script> 
```

或者

```
<script type="text/javascript" src="http://your.server.com/js.js?token=###&widget=xxx"></script> 
```

如果您将使用 .htaccess 进行重定向

*在php文件中检查token是否与请求域匹配，如果是则回显js库，如果不是则抛出错误或其他东西

*在 js 中，您将需要构建一些对您的服务的 ajax 调用以及操作 HTML 的东西（创建一个小部件持有者，显示一些数据等）

*所有的调用也应该有令牌，你可以再次使用相同的逻辑来检查令牌==服务器地址

编辑：

REFERER 作为 HTTP 协议的一部分由客户端的浏览器发送，因此确实不可靠。

如果您想验证请求是否来自您的站点，那么您不能，但您可以验证用户是否访问过您的站点和/或已通过身份验证。Cookie 是在 AJAX 请求中发送的，因此您可以依赖它。但这意味着您需要使用 oAuth 之类的东西

如果你想使用这个方法，你仍然应该检查引用者以防止 CSRF en.wikipedia.org/wiki/Cross-site_request_forgery

理想情况下，您应该为每个用户的每个会话使用一个唯一令牌（如果您偏执，则每个请求）来防止 CSRF 攻击。检查引用者只是混淆的安全性，而不是真正的解决方案。*

# python - twitter bootstrap href 按钮不起作用

> ID：12361018
> 
> 赞同：4
> 
> 时间：2012-09-11T00:02:51.783
> 
> 标签：python, html, django, twitter-bootstrap, django-templates

我正在为基于 django 的应用程序创建一个 html 模板。我在这里为按钮使用 twitter 引导 API，但其中一个（取消按钮）似乎无法正常工作。我使用 href 将它链接到另一个页面，但是当我单击按钮时，它会重定向到当前页面的 post 方法。见下文：

```
<h2>Add new Schedule:</h2>
<form class="form-horizontal" method='post'>
<table>
{% load bootstrap %}
{{ form|bootstrap }}
{% csrf_token %}
<tr>
<td></td>
<td>
<input class="btn btn-primary" type='submit' name='reset' value='Save' />
</td>
<td></td>
<td><a href='{%url head.views.edit_instance_binding binding.id %}'><button class="btn     btn-inverse" type="submit">Cancel</button></a></td>
</tr>
</table>
</form> 
```

但是，如果我摆脱按钮并将其用作简单的 href 它似乎可以工作： `<td><a href='{%url head.views.edit_instance_binding binding.id %}'>Cancel</a></td>`

这里发生了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T00:05:41.697

您有一个`<button>`内部`<a>`元素 - 摆脱按钮，否则您将提交表单。

如果您希望将锚定为按钮样式，请给它一个`btn`类。

而且 Bootstrap 只是一大组 CSS 工具，只包含很少的 js - 根本没有 API :))

编辑：现在 HTML 语义和外观已经很好地分开了[尽管有人可能会争辩说 Bootstrap 在这方面有其技巧，请参阅它对`<i>`图标的使用]。

密切关注您的案例，您想使用 a`<button>`来设计一个简单的锚点，如浮雕按钮。但是`<button>`标签只是一种提供更丰富的方式`<input type="submit">`，例如，您可以在其中插入图像[查看所有带有按钮旁边图标的 BS 示例]。

好吧，`<input type="submit">`在后者的触发器`<button>`内部，即他们将用户输入的一些数据发布到这样的位置。`<form>``action`

如果您只需要访问某个 URL 而不提交任何内容，则需要一个锚标记 [ `<a>`]，它可以根据需要设置样式，例如使用 BS `btn`、`btn-primary`、`btn-whateva`类。

# ruby-on-rails - 设计：如何快速重置所有用户密码

> ID：12361025
> 
> 赞同：10
> 
> 时间：2012-09-11T00:04:07.497
> 
> 标签：ruby-on-rails, optimization, devise

我有一个 rake 任务（除其他外）将我的生产数据库克隆到我的本地计算机并将所有用户密码重置为`password`（或其他）。

我当前的实现看起来像：

```
User.find_each do |user|
  user.password = 'password'
  user.save
end 
```

这很好用。但是现在我们有超过 1000 个用户，它变得非常缓慢，而且肯定会变得更糟。

**编辑**

好的。这是部分答案：

```
Devise.stretches = 1
User.find_each do |user|
  user.password = 'password'
  user.save
end
Devise.stretches = 10 
```

这让我的速度提高了 5-10 倍。虽然与基于 SQL 的解决方案相比它可能仍然很慢，但它仍然是一个非常好的改进。这应该扩展到至少 10,000 个用户。

如果我有时间，我可能仍然会使用 SQL 解决方案。

我会暂时搁置这个问题。如果其他人有更好的解决方案，请发布。

### 最终答案/最佳解决方案

正如一些评论所建议的，最快的解决方案是通过 SQL 执行大规模更新。现在设计允许您`encrypted_password`直接设置：

```
sample_user = User.last
sample_user.password = "password"
encrypted_password = sample_user.encrypted_password
User.update_all(encrypted_password: encrypted_password) 
```

基本上，我们为单个用户设置密码，然后我们可以使用他们`encrypted_password`执行批量更新。这个解决方案应该可以扩展到几乎任意数量的用户。

*感谢@vladCovaliov 在下面的评论中建议此解决方案。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:07:23.453

通常我会说写你想要的sql，例如

```
ActiveRecord::Base.connection.execute(' update users set encrypted_password = 'password') 
```

但是，通常密码是加密的，您可以使用 MD5 或授权/身份验证机制（例如 Devise 或 Authlogic）直接对其进行加密。在这种情况下，您实际上是通过传入必须匹配的密码和密码确认值（在 Rails 中创建记录时）来创建或更改密码。如果它们匹配，则密码被加密并实际存储在数据库中。由于这些原因，除非您在直接 sql 中使用散列算法，否则必须逐个完成。

它可能很简单

```
ActiveRecord::Base.connection.execute(' update users set password = md5('password')) 
```

# vim - scrollbind/cursorbind 在 vi m 中的行为异常

> ID：12361027
> 
> 赞同：1
> 
> 时间：2012-09-11T00:04:29.077
> 
> 标签：vim

尝试`scrollbind`在vim中设置选项时，窗口在双向移动时正确更新，但是，光标仅在向上移动时正确突出显示，而**不是**向下移动时（见下文）

**运动前** ![初始位置](../Images/4a1b877143c5ca94955b319afd713bba.png)

请注意，我已设置`scrollbind`为突出显示两个方法签名（第 989 和 925 行）

**向上运动后** ![向上运动](../Images/8dc4629fd5d90dfd5af7bebc2e4c6e85.png)

正如预期的那样，顶部窗口光标从第 989 行向上移动到第 988 行，底部窗口光标从第 925 行移动到第 924 行。

**而是向下运动** ![在此处输入图像描述](../Images/4a50d4f3e51f7b50bc651157e924e7ca.png)

相反，如果我执行向下移动，则只有顶部（聚焦）窗口的光标位置从第 989 行更新到第 990 行。底部窗口将继续在第 925 行突出显示其光标。

**问题：** 有什么想法可以解决这个问题吗？

**更新：**

我注意到这个问题只发生在 C 文件中。例如，对于 Python 文件，问题表现为向下滚动时性能下降。如果我通过连续按下向上滚动`k`它可以无缝工作。相反，如果我按住`k`突出显示的行会有明显的延迟。虽然按下`j`此延迟总是很明显。如果我改为按住不放，`j`则突出显示的行将不会更新，直到我放开`j`. 如果我在文本文件上尝试它，那么它的行为与 C 文件完全相同。

**更新 2：** 我创建了一个 gif，它显示了两个滚动窗口的奇怪行为。在这里，我在左侧屏幕上向下滚动，有时右侧屏幕会向前跳几行。

![在此处输入图像描述](../Images/9cc78e9c8f153905485896119be202a5.png)

**版本：**

```
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Feb 26 2012 14:50:07)
Included patches: 1-285
Compiled by anonymous@main
Huge version with GTK2 GUI.  Features included (+) or not (-):
+arabic +autocmd +balloon_eval +browse ++builtin_terms +byte_offset +cindent 
+clientserver +clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments 
+conceal +cryptv +cscope +cursorbind +cursorshape +dialog_con_gui +diff 
+digraphs +dnd -ebcdic +emacs_tags +eval +ex_extra +extra_search +farsi 
+file_in_path +find_in_path +float +folding -footer +fork() +gettext 
-hangul_input +iconv +insert_expand +jumplist +keymap +langmap +libcall 
+linebreak +lispindent +listcmds +localmap -lua +menu +mksession +modify_fname 
+mouse +mouseshape +mouse_dec -mouse_gpm -mouse_jsbterm +mouse_netterm 
-mouse_sysmouse +mouse_xterm +multi_byte +multi_lang -mzscheme +netbeans_intg 
+path_extra -perl +persistent_undo +postscript +printer +profile +python 
-python3 +quickfix +reltime +rightleft -ruby +scrollbind +signs +smartindent 
-sniff +startuptime +statusline -sun_workshop +syntax +tag_binary 
+tag_old_static -tag_any_white -tcl +terminfo +termresponse +textobjects +title
 +toolbar +user_commands +vertsplit +virtualedit +visual +visualextra +viminfo 
+vreplace +wildignore +wildmenu +windows +writebackup +X11 -xfontset +xim 
+xsmp_interact +xterm_clipboard -xterm_save 
   system vimrc file: "$VIM/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  system gvimrc file: "$VIM/gvimrc"
    user gvimrc file: "$HOME/.gvimrc"
    system menu file: "$VIMRUNTIME/menu.vim"
  fall-back for $VIM: "/usr/local/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H -DFEAT_GUI_GTK  -pthread -I/usr/include/gtk-2.0 -I/usr/lib/i386-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/glib-2.0 -I/usr/lib/i386-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12   -I/usr/local/include  -g -O2 -D_FORTIFY_SOURCE=1      
Linking: gcc   -L/usr/local/lib -Wl,--as-needed -o vim   -pthread -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lrt -lglib-2.0   -lSM -lICE -lXt -lX11 -lXdmcp -lSM -lICE -lm -ltinfo -lnsl  -lselinux  -ldl     -L/usr/lib/python2.7/config -lpython2.7 -lpthread -ldl -lutil -lm -Xlinker -export-dynamic -Wl,-O1 -Wl,-Bsymbolic-functions 
```

# html - 如何在我的 WordPress 主题上获得粘性页脚？

> ID：12361029
> 
> 赞同：2
> 
> 时间：2012-09-11T00:04:48.683
> 
> 标签：html, css, wordpress, footer

我试图让我的页脚粘在我的页面底部。我已经关注了大量关于粘性页脚的不同教程（其中大多数非常相似），但没有一个对我有用。由于某种原因，页脚粘在屏幕的底部而不是页面的底部......

这是我的 HTML 中 div 的布局：

```
<div id="wrapper">
<div id="header"></div>
<div id="main"></div>
<div id="footer"></div>
</div> 
```

这是我的 CSS：

```
html, body {
height: 100%;

#wrapper {
min-height: 100%;
position: relative;
}

#content {
position: absolute;
padding-bottom: 300px; (same as footer height)
}

#footer {
width: 100%;
height: 300px;
position: absolute;
bottom: 0px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T00:20:00.187

试试这个

**CSS**

```
html, body {
    margin:0;
    padding:0;
    height:100%;
}
#wrapper{
    min-height:100%;
    position:relative;
}
#header {
   background:#00ff0f;
   padding:30px;
}
#main{
    padding:10px;
    padding-bottom:45px;   /* Height+padding(top and botton) of the footer */
    text-align:justify;
    height:100%; 
}
#footer {
    position:absolute;
    bottom:0;
    width:100%;
    height:15px; /* Height of the footer */
    background:#00ff0f;
    padding:10px 0; /*paddingtop+bottom 20*/
} 
```

**​HTML**

```
<div id="wrapper">
    <div id="header">Header</div>
    <div id="main">
        Some Content Here... 
    </div>
    <div id="footer">Footer</div>
</div>​ 
```

[**演示**](http://jsfiddle.net/FPCWD/7/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-04T03:13:21.457

我知道这是旧的，但现在你可以使用允许可变页脚高度的 flex-box

```
html, body, #wrapper{
  min-height: 100vh;
}
#wrapper{
  display: flex;
  flex-direction: column;
}
#main{
  flex-grow: 1;
} 
```

# objective-c - 有没有办法在 Objective-C 中拥有伪属性？

> ID：12361030
> 
> 赞同：1
> 
> 时间：2012-09-11T00:04:49.483
> 
> 标签：objective-c, properties

假设是否已经有类属性

```
@property (strong, nonatomic) JJNode *leftChild;
@property (strong, nonatomic) JJNode *rightChild; 
```

并且该应用程序已经广泛使用`if (parent.leftChild) { ... }`and `parent.leftChild = newNode`（getter 和 setter）。

但是说，如果左右孩子可以用一个`NSMutableArray`对象来表示，这个类可能会更好地工作，这样该类将来可以支持N个孩子，并且循环通过孩子更容易。

所以会是

```
@property (strong, nonatomic) NSMutableArray *childrenArray; 
```

在某些情况下，孩子可以通过以下方式迭代

```
for (JJNode *node in self.childrenArray) { ... } 
```

但是使用这个新数组，我们还能继续使用`parent.leftChild`and`parent.leftChild = newNode`吗？

我想知道这是否是一种好习惯，因为它看起来像是不同`parent.leftChild`的`(JJNode *)[parent objectAtIndex: 0]`对象，但实际上是同一件事。但是如果我们继续做下去，我们可以拥有伪属性来实现它吗？

看起来我们可以实际使用`@property (strong, nonatomic) JJNode *leftChild;`和更改 getter 和 setter 以实际使用数组，但是会有两个额外的实例变量。没有ivars可以吗？或者我们可以定义 2 个方法，以便`parent.leftChild = newNode`实际调用一些 setter 方法，并`parent.leftChild`调用一个 getter？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T00:11:21.113

您的属性不仅限于合成的属性 - 事实上，它们只不过是遵循特定命名约定的一对方法。

您可以删除 and 的说明`@synthesize`，并将它们替换为获取/设置包含节点的第一个和第二个元素的方法，以防有两个以上的节点。`leftChild``rightChild``NSArray`

# mysql - 合并问题

> ID：12361034
> 
> 赞同：2
> 
> 时间：2012-09-11T00:05:09.147
> 
> 标签：mysql, sql, coalesce

例如，我有 2 张桌子

```
user_table                    level_table
==================           ===================
| name | levelid |           | id | levelname  |
==================           ===================
| tom  |    1    |           | 1  |  beginner  |
------------------           -------------------
| jon  |    2    |           | 2  |  intermed  |
------------------           ------------------- 
| tom  |  null   |           | 3  |   expert   |
------------------           -------------------
| jon  |    1    |          
------------------ 
```

我只需要选择具有级别名称的用户表，如果为空，它将显示我定义的文本，例如“无级别”。并且没有相同的列标题。所以它看起来像左边的而不是右边的。

```
Right result                      Wrong result
==================               ================== 
| name |   level  |              | name |   level  | 
==================               ================== 
| tom  | beginner |              | tom  | beginner | 
------------------               ------------------ 
| jon  | intermed |              | jon  | beginner |
------------------               ------------------ 
| tom  | no level |              | tom  | beginner |
------------------               ------------------ 
| jon  | beginner |              | jon  | beginner |
------------------               ------------------ 
```

我试过合并，但似乎有一个错误，所有 levelname 行都显示相同的结果。

```
SELECT name,
       COALESCE(
               (SELECT levelname FROM user_table,level_table WHERE levelid=id),
               'no level') AS level
       FROM user_table 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T00:07:32.693

应该是这样的，您需要使用连接两个表`LEFT JOIN`

```
SELECT  a.name, COALESCE(b.levelname, 'no level') levelname
FROM    user_table a
        LEFT JOIN level_table b
            ON a.levelid = b.id 
```

`LEFT JOIN`和之间的区别在于`INNER JOIN`返回`LEFT JOIN`左表上的所有行，无论右表是否匹配，而`INNER JOIN`只返回两个表上都存在的行。

**[JOINS 的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)**

# c++ - 从 Qt 中的对话框中获取数据并在 Ui 中使用它

> ID：12361039
> 
> 赞同：0
> 
> 时间：2012-09-11T00:06:09.647
> 
> 标签：c++, qt, user-interface, dialog, qmainwindow

所以我正在使用 Qt 制作一个文本编辑器，现在我有一个按钮可以打开一个名为“格式化文本”的对话框。我希望它的工作方式类似于记事本中名为“字体”的对话框，您可以在其中从一些下拉列表中选择一些文本属性，它会向您显示文本的外观。现在我可以在其中选择字体样式、字体颜色和字体大小并点击预览，它会在对话框中的一个框中向您显示文本的外观。但是，我有一个名为“okay”的按钮，它应该更改突出显示的文本或您将要输入的文本，但我不知道如何在主窗口上显示这些更改。这 。ui 文件是私有的，许多已经创建的函数和指针在每个 ui 文件中都是相同的，所以如果我将 ui 文件更改为公共文件，我必须更改一大堆东西。无论如何可以给我一个简单的答案吗？我试图以尽可能少的混乱来做到这一点。对于我的技能水平的人来说，更多的编码和更少的混乱比更少的编码和更多的混乱要好。抱歉，这是一个巨大的段落，我没有提供任何代码，但我认为代码不是必需的，但是如果您确实需要一些代码，我很乐意分享。感谢您的帮助和时间。我希望你们有一个愉快的夜晚。对于我的技能水平的人来说，更多的编码和更少的混乱比更少的编码和更多的混乱要好。抱歉，这是一个巨大的段落，我没有提供任何代码，但我认为代码不是必需的，但是如果您确实需要一些代码，我很乐意分享。感谢您的帮助和时间。我希望你们有一个愉快的夜晚。对于我的技能水平的人来说，更多的编码和更少的混乱比更少的编码和更多的混乱要好。抱歉，这是一个巨大的段落，我没有提供任何代码，但我认为代码不是必需的，但是如果您确实需要一些代码，我很乐意分享。感谢您的帮助和时间。我希望你们有一个愉快的夜晚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:30:24.870

`QDialog`有一个名为[finished()](http://www.doc.crossplatform.ru/qt/en/4.7.x/qdialog.html#finished)的信号，您可以将此信号与您的插槽连接。为了完成您的工作，`QSettings`为简单起见，将或传递`QStringList`给对话框设置（负责更改字体、颜色...），`QStringList`将保存用户定义的设置，关闭对话框后，遍历`QStringList`成员以提醒主窗口。一个伪代码看起来像这个类编辑器：

```
Editor::Editor()
{

   TextSettings textSettings;
   textSettings.setSettings(settings); // settings is a member

   connect(textSettings, &finished(int)), this, SLOT(alertEditor(int)))
}

Editor::alertEditor(int s)
{
  if(s == 0)
  {
    for (int i = 0; i < settings.size(); ++i)
       settings.at(i).toLocal8Bit().constData(); // extract various user settings
  }
} 
```

类文本设置：

```
TextSettings::TextSettings(QStringList settings)
{
     settings << ui->combobox->currentItem(); // font name as example

} 
```

# php - 从确切字符开始回显/打印

> ID：12361042
> 
> 赞同：0
> 
> 时间：2012-09-11T00:06:46.827
> 
> 标签：php, variables

我不知道这是否可能，但我想实现这一目标：

我有很多产品 ID，每个都是不同的变量：`$p1, $p2, $p3,`等等。

我使用该变量来调用图像和链接，所以这很简单（图像名称与产品 ID 相同）。

名称的结构是：`1234-123`. 第一个序列可以是 3 或 4 个数字长度，第二个序列可以是 2 或 3 个数字长度。

IE：

`$p1 = '1234-123'`

`$p2 = '123-12'`

我需要以某种格式显示这些产品 ID：`Product($p1): 1234 (123)`

所以，我的具体问题是：

**我怎样才能分开这两个序列？我的意思是，类似：**

```
PRODUCT: <?php echo from first value to "-"?> (<?php echo from "-" to end of variable value ?>) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T00:09:22.067

使用[`explode()`](http://php.net/manual/en/function.explode.php)：

```
list($firstPart, $secondPart) = explode('-', $p1); 
```

# c++ - C++代码找不到文件

> ID：12361054
> 
> 赞同：0
> 
> 时间：2012-09-11T00:08:05.013
> 
> 标签：c++, list, ifstream

我正在尝试创建一个程序，它将连接（将两个整数列表添加在一起）每个列表都存储为文本文件。我希望 C++ 程序打开 list1.txt 和 list2.txt

我实际上无法让它工作。我已经分别放置了两个整数列表 list1 和 list2 但是我得到的输出找不到 list1。

```
#include <iostream>
#include <fstream>
#include <ostream>

using namespace std;

int main()
{
   ifstream findlist1("list1.txt", ios::in | ios::binary);
   if(!findlist1)
   {
      cout << "Cannot find list 1.\n";
      return 1;
   }
   ifstream findlist2("list2.txt", ios::in | ios::binary);
   if(!findlist2)
   {
      cout << "Cannot find list 2.\n";
      return 1;
   }
   ofstream out("list3out.txt", ios::out | ios::binary);

   if(!out)
   {
      cout << "Unable to output file ";
      return 1;
   }

   out << in1.rdbuf();
   out << " " << flush;
   out << in2.rdbuf();

   return 0;
} 
```

编辑=解决方案：

我的文件被称为 test1.txt，因此在程序中显示为 test1.txt.txt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:20:47.283

代码看起来不错，您可以尝试使用绝对路径或将文件放在可执行文件的同一目录中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:09:38.603

如果您使用的是 Visual Studio，则所有相对路径都相对于项目的[工作目录](http://en.wikipedia.org/wiki/Working_directory)。默认似乎是项目目录 - 这意味着如果`C:\SolutionX\ProjectY\Build\ProjectY.exe`您尝试打开路径“file.txt”，Windows 将查找`C:\SolutionX\ProjectY\file.txt`. 如果您想更改此目录，该设置位于项目的“配置属性”中“调试”下的“工作目录”中。

请注意，如果您手动双击可执行文件而不是通过 Visual Studio 运行它，则其工作目录将是其当前位置。相反，如果您从命令行运行程序，则工作目录将是您在命令行中的工作目录。

# gmail - 获取 [Gmail] 来自不同语言的所有邮件

> ID：12361055
> 
> 赞同：0
> 
> 时间：2012-09-11T00:08:07.570
> 
> 标签：gmail, imap

我正在使用 python imaplib 从 [Gmail] All Mail 文件夹中读取 Gmail 邮件。

对于大多数帐户，所有邮件文件夹被命名为“[Gmail] 所有邮件”。但是，有几个帐户将其命名为：“[Gmail]/&BBIEQQRP- &BD8EPgRHBEIEMA-”

它似乎与外语帐户有关。

有人认识编码吗？

有没有办法找出哪个文件夹是“所有邮件”文件夹？

或者，是否有系统的方法来获取所有邮件文件夹的所有可能名称，以便我可以搜索它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:54:08.430

GMail 支持 XLIST 函数来获取文件夹的本地化名称。

请参阅[Gmail IMAP 扩展程序](https://developers.google.com/google-apps/gmail/imap_extensions)

# css - @font-face 在 IE9 中不起作用

> ID：12361057
> 
> 赞同：1
> 
> 时间：2012-09-11T00:08:09.073
> 
> 标签：css, internet-explorer-9

我有以下代码来为我的页面设置字体样式，但不知何故 @font-face 在 mozilla 中工作但在 IE 中不起作用。有谁知道这里发生了什么，我该如何解决？

```
@font-face {
  font-family: 'TrashHand';
  src: url('../fonts/TrashHand.ttf');
  }

@font-face {
  font-family: 'BebasNeue';
  src: url('../fonts/BebasNeue.otf');
  }  

.tab_g 
{
    background:url(../images/ss_tab_0.png) no-repeat;
    width:176px;
    height:42px;
    font: 25px 'TrashHand',Arial, Helvetica, sans-serif;
    font-weight:50;
    text-transform:uppercase;
    color:#ffffff;
    padding-top:10px;
    text-align:center;
    margin-bottom:-15px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T00:33:19.943

你绝对应该看看[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)之类的东西，你可以在其中上传你的字体，它会吐回相应的 CSS。保证在所有浏览器中完美。此外，请查看[Paul Irish 的防弹@font-face](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)以获取有关该主题的更多信息。

它应该看起来像这样：

```
@font-face {
  font-family: 'Graublau Web';
  src: url('GraublauWeb.eot?') format('eot'), url('GraublauWeb.woff') format('woff'), url('GraublauWeb.ttf') format('truetype');
} 
```

# android - Linkify() - 激活链接

> ID：12361059
> 
> 赞同：0
> 
> 时间：2012-09-11T00:08:21.273
> 
> 标签：android, linkify

我在弹出对话框中添加了指向 [方括号] 包围的文本的链接。然而，这些链接是不可点击的（当它们被按下时没有任何反应）。我不知道为什么（！）

这是我的对话框活动：

```
public void popupDefinition(CharSequence term, LinkedHashMap<String, String> dictionaryMap){
    SpannableString definition = new SpannableString(dictionaryMap.get(term)); // grab the definition by checking against the dictionary map hash
    Linkify.addLinks(definition, pattern, scheme); // find text in square brackets, add links

    AlertDialog alertDialog = new AlertDialog.Builder(ListProjectActivity.this).create(); // create a dialog box
    alertDialog.setMessage(definitionFormatted); // set dialog box message
    alertDialog.show(); // actually display the dialog box
    } 
```

'scheme' 和 'pattern' 前面定义过，如下：

```
final static Pattern pattern = Pattern.compile("\\[[^]]*]"); // defines the fact that links are bound by [square brackets]
final String scheme = "http://example.com/"; // THIS IS NOT WORKING 
```

为什么，当我点击出现的链接（它们很好地显示为蓝色下划线）时，它们不会引起任何响应吗？

我实际上并没有尝试启动 URL 链接（当它发生时，我将重定向 ACTION_VIEW 意图），但我需要确认某种响应正在发生，然后才开始......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:54:02.013

> 我实际上并没有尝试启动 URL 链接

由于您不需要使用 URL，因此不必费心尝试创建自定义 Linkify 方案，因为它只创建 URLSpans。您只想从 TextView 中的关键字启动 Activity。正如我在您的一个类似但**不**重复的问题中所述，我将使用自定义跨度，引入 ActivitySpan：

```
public class ActivitySpan extends ClickableSpan {
    String keyword;
    public ActivitySpan(String keyword) {
        super();
        this.keyword = keyword;
    }

    @Override
    public void onClick(View v) {
        Context context = v.getContext();
        Intent intent = new Intent(context, AnotherActivity.class);
        intent.putExtra("keyword", keyword);
        context.startActivity(intent);
    }
} 
```

这里没有花里胡哨的东西，这个跨度需要`[keyword]`你用括号括起来并将它传递给另一个活动。

虽然由于 URLSpan 我不喜欢使用 Linkify 的想法，但它的模式匹配和跨度创建很棒，所以我复制并修改了它：

```
private void addLinks(TextView textView, Pattern pattern) {
    SpannableString spannable = SpannableString.valueOf(textView.getText());
    Matcher matcher = pattern.matcher(spannable);

    // Create ActivitySpans for each match
    while (matcher.find())
        spannable.setSpan(new ActivitySpan(matcher.group()), matcher.start(), matcher.end(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

    // Set new spans in TextView
    textView.setText(spannable);

    // Listen for spannable clicks, if not already
    MovementMethod m = textView.getMovementMethod();
    if ((m == null) || !(m instanceof LinkMovementMethod)) {
        if (textView.getLinksClickable()) {
            textView.setMovementMethod(LinkMovementMethod.getInstance());
        }
    }
} 
```

请注意，此方法不会删除`[brackets]`每个关键字周围的内容，但您可以在 while 循环中轻松执行此操作。

要使用它，只需将 TextView 和 Pattern 传递给`addLinks()`in`onCreate()`和*瞧！*

* * *

适合您的工作示例：

```
public class Example extends Activity {
    Pattern pattern = Pattern.compile("\\[[^]]*]");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        popupDefinition("Example: A [pattern] or [model], as of something to be [imitated] or [avoided]");
    }

    // It seems like you can call "popupDefinition(dictionaryMap.get(term));" rather than pass both.  
    public void popupDefinition(String string){
        SpannableString spannable = new SpannableString(string);
        Matcher matcher = pattern.matcher(spannable);

        // Create ActivitySpans for each match
        while (matcher.find())
            spannable.setSpan(new ActivitySpan(matcher.group()), matcher.start(), matcher.end(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        // Create a new TextView with these spans and enable the clickable links
        TextView textView = new TextView(this);
        textView.setText(spannable);
        textView.setMovementMethod(LinkMovementMethod.getInstance());

        // Create and display an AlertDialog with this TextView
        AlertDialog alertDialog = new AlertDialog.Builder(this)
                .setView(textView)
                .create(); 
        alertDialog.show(); 
    }

    public class ActivitySpan extends ClickableSpan {
        String keyword;
        public ActivitySpan(String keyword) {
            super();
            this.keyword = keyword;
        }

        @Override
        public void onClick(View v) {
            Context context = v.getContext();
            Toast.makeText(context, keyword, Toast.LENGTH_SHORT).show();
        }
    }
} 
```

# c# - 为什么 .NET 框架需要这么长时间才能安装？为什么让它便携起来很复杂？

> ID：12361070
> 
> 赞同：2
> 
> 时间：2012-09-11T00:10:08.107
> 
> 标签：c#, .net, installation, asp.net-4.0

我问这个问题主要是为了学习。假设我想将一个非常小的控制台应用程序发送给`(50 lines of code Also I am using the System.Text.RegularExpresion namespace.)`在 .net framework 4.0 上使用 c# 编写的朋友。我想让应用程序可移植，因此我只是将 bin 目录的输出发送给他。

为什么他必须安装.net framework 4.0客户端，这需要相当长的时间。此外，最好只包含我计划在这种情况下使用的 dll 库 system.dll（该库包含 system.text.regularexpressions 命名空间）。

换句话说，为什么我不能在我的控制台应用程序中包含 system.dll 以使其可移植并使其在未安装 .net 框架的计算机上工作。

为什么.net framework 4.0的安装这么复杂？如果 Windows 在哪里放置所有 .net 库`C:\Program Files\.net framework 4.0\`，然后在安装时将密钥写入安装该框架的路径的注册表，以便程序能够找到必要的 dll，会发生什么情况。

为什么一般的安装如此复杂？

**我尝试使用反射器反编译 system.dll，然后将其包含在我的项目中，但没有成功**

## 编辑

我想我的问题应该是为什么 .net framework 4.0 需要这么长时间才能安装？如果 windows 在哪里将必要的 dll 放在程序文件上，然后将这些 dll 所在的路径写入注册表，为什么不能运行 .net framework 4.0。这个过程会快得多。为什么不这样做呢？

* * *

## **所以总而言之**

感谢您的帮助，我现在明白了 CLR 的重要性。**我想我唯一想了解的部分是为什么安装需要这么长时间。**我知道有成千上万的dll。将这些 dll 解压缩到程序文件并在注册表上写入 10000 个键应该更快。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T00:22:46.280

您的问题似乎可以归结为“为什么我需要安装整个 .NET Framework，而不是只包含所需的 DLL？”

答案是 .NET Framework 不仅仅包含 DLL。该框架的另一个主要组件是 CLR，它负责执行和管理 .NET 代码。.NET 框架由许多其他较小的东西（例如编译器）组成，它们不是运行代码所必需的，但仍然包含在框架中。

对于 .NET，CLR 比 DLL 本身更重要。它类似于计算机上的 CPU。没有它，什么都做不了，你拥有的可执行程序只是垃圾数据。CLR 负责将您的代码 JIT 编译为本机可执行文件、内存管理等。它在概念上与 Java 应用程序的 JVM 非常相似。

甚至 DLL 也比看起来更复杂。尽管理论上您可以（暂时忽略 CLR）在您的应用程序中部署依赖 DLL，但请记住，所有这些 DLL（mscorlib 除外）都依赖于更多 DLL，依此类推，包括大量依赖对于一个简单的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T00:25:17.790

C# 编程语言要求首先在目标计算机上安装 .Net 框架，然后再运行目标程序。VB.NET 和 F# 具有相同的要求。.net 框架是一组非常庞大的库，不仅需要几个 .DLL 文件，还需要访问系统注册表。有相当深的集成，大部分通过 COM，但深入到 Win32（至少对于 WinForms）。

现在，微软本*可以*让 C# 直接编译为本机代码，但这不是他们决定做的。这些程序需要按设计安装框架。就像现在一样，.Net 框架是必需的。在 2001 年首次引入 C# 和 .Net 时，这是一笔更大的交易，因为每个人都必须安装它！今天，Windows 7（和 Vista）预装了它，使用户更容易使用。对于服务器端（网络应用程序），这也没什么大不了的，因为在许多客户端计算机上安装它并不是问题

一种看待它的方式是，每个程序都需要所有库，如果每个程序都有自己使用的 .Net 库集合，则维护错误修复会更加困难。通过在计算机上安装一个框架，当发现错误时，Microsoft 可以修补框架的一个版本，而不是如果每个程序都有自己的一组库文件，则文件可能存在的多个位置。

至于可移植性，您可以使用 Mono 在 Linux 和 Mac 上运行这些相同的 .Net (C#) 二进制文件。当然，在其他平台上，您仍然需要安装 Mono 才能使其工作。

# jquery - 为什么将此图像的高度更改为等于文档的高度会失败？

> ID：12361072
> 
> 赞同：2
> 
> 时间：2012-09-11T00:10:16.840
> 
> 标签：jquery, css

所以在一个简单的页面中，有一个`div`包含一个`img`. 该文档可能与`image`. 然而，这种情况并非如此。根据环境，文档会稍大一些。请参阅此**[jsfiddle](http://jsfiddle.net/2gftz/3/)**以查看示例。基本上发生的情况是，如果图像设置为文档高度，则文档高度会发生变化。

如果 jsfiddle 不再可用，这里是设置：

html

```
<div><img id="img" src="http://images.nationalgeographic.com/wpf/media-live/photos/000/138/overrides/save-the-ocean-tips_13821_600x450.jpg" /></div>​ 
```

js

```
$(function(){
 alert("Image Height Before Assignment: " + $("#img").height()); 
 var docH = $(document).height();
 alert("Document Height Before Assignment: " + docH);
 $("#img").height(docH);
 alert("Image Height After Assignment: " + $("#img").height()); 
 alert("Document Height After Assignment: " + $(document).height());
}); 
```

​</p>

​</p>

**为什么不能像这样在不改变文档高度的情况下将图像设置为文档高度？**

**如何在不改变文档高度的情况下将图像设置为文档高度？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:18:59.033

我已经通过添加`align="absmiddle"`到图像来解决这个问题

[演示在这里](http://jsfiddle.net/2gftz/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T00:24:25.313

它与 HTML DTD 有关。当我将其更改为 时`HTML 4.01 Transitional`，所有警报都给出了相同的值。正如您所说`HTML 5`，两者都更改了文档高度。`HTML 4.01 Strict`

'希望这有助于追查原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T16:55:38.950

使用`align="absmiddle"`形式不好，不规范。我曾要求 haynar1658 更改他的答案，以反映由于寻找更标准化的`align="absmiddle"`. 我遇到的是 css 属性**`vertical-align:middle;`**。这是[jsfiddle](http://jsfiddle.net/2gftz/8/)中的解决方案。

对于那些害怕或批评 jsfiddle 的人，这里是代码：

html

```
<div><img id="img" src="http://images.nationalgeographic.com/wpf/media-live/photos/000/138/overrides/save-the-ocean-tips_13821_600x450.jpg" /></div>​ 
```

css

```
/*
This will ensure the document height doesn't change
*/

#img
{ 
 vertical-align:middle;   
}​ 
```

js

```
//Display Image height, then document height, then change image height and show that the change no longer affects the document height
$(function(){
 //Show Image height before
 alert("Image Height Before Assignment: " + $("#img").height());

 //Get Document Height
 var docH = $(document).height();
 //Show Document Height
 alert("Document Height Before Assignment: " + docH);
 //Assign image height
 $("#img").height(docH);
 //Show image height
 alert("Image Height After Assignment: " + $("#img").height());
 //Show document height
 alert("Document Height After Assignment: " + $(document).height());
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T00:46:59.400

我建议您创建一个这样的 CSS 以从正文中删除所有额外内容

```
body{
 margin:0px;
 paddin:0px;
 border:0px;
} 
```

body 标签有它自己的属性。

# asp.net-mvc - linq mvc 外键值

> ID：12361073
> 
> 赞同：0
> 
> 时间：2012-09-11T00:10:18.210
> 
> 标签：asp.net-mvc, linq, foreign-keys

我是 MVC 的新手。我正在尝试通过在线教程找到自己的方式。

据说，

我有一个表 A (a1,a2,a_b1) 和一个表 B (b1,b2)

a_b1 是来自 B.b1 的外键。

我使用它的模板在 Visual Studio 中生成了列表视图。我可以访问表 A 的 a1 和 a2 字段 `<%=Html.Encode(item.a1) %>` 。`<%=Html.Encode(item.a2) %>`

但是当我尝试访问 A.a_b1 值（不是对表 B 的引用）时，我只能从表 B 中获取对对象的引用。谢谢基里尔，我不知道什么是 CodeFirst、ModelFirst 或 DatabaseFirst。我有这些表，并使用 Visual Studio 和 Linq 为表 A 和 B 生成类。所以 A.a1、A.a2 显示在创建的对象中。我在字段中有 AB 和 A.BReference

我认为应该有一种方法可以访问列的值而不是引用。你能帮我么？

我不想执行连接，只需要值。

我尽力具体，但如果不清楚，请告诉我。

谢谢

编辑：

我使用 ADO.Net 实体数据模型来生成与我的表关联的对象。

在我的控制器中，我有：

```
A sample1=repository.search(id);
string s1 = sample1.a1;
string s2 = sample1.a2;
string s3 = sample1.a_b1; (ERROR) 
```

相反，我有

```
 sample1.B   (an object of type B)
and 
sample1.BReference  (object of type EntityReference<B>) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:44:42.233

回答遇到同样问题的人：

我定义了一个新类 A_text，它包含 A 的所有字段。（包括 a_b1）

在选择中，我使用了：

```
var result = from pt in db.A
                     where pt.id== id
                     select new A_text
                     {
                         id= pt.id,
                         a1= pt.a1,
                         a2 = pt.a2,
                         a_b1= pt.a_b1.id
                     };
        return (result.FirstOrDefault()); 
```

与之前相比，我不确定效率

```
 db.Search(id); 
```

但到目前为止似乎还可以。

# ruby-on-rails - devise-async 不适用于 sidekiq

> ID：12361077
> 
> 赞同：3
> 
> 时间：2012-09-11T00:10:42.863
> 
> 标签：ruby-on-rails, devise, sidekiq

我尝试将我的设备配置为通过 sidekiq 异步发送电子邮件，但是，作业排队并且从未真正执行过......所以我从来没有收到电子邮件发送。

我还尝试让它使用默认队列而不是邮件队列，但仍然没有成功。

宝石版本：

```
sidekiq 2.3.0
devise 2.1.2
devise-async 0.3.1 
```

`/sidekiq/`信息：

```
Sidekiq is idle
Processed: 0
Failed: 0
Busy Workers: 0
Scheduled: 0
Retries Pending: 0
Queue Backlog: 5 
```

我仍然试图让它在这里工作，但你成功了。开始相信这是一个错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:53:54.800

问题是我的机器上没有可用的`hostname`命令。我在 sidekiq repo 中提交了一个[错误。](https://github.com/mperham/sidekiq/issues/393)

谢谢

# ios - Xcode 4.4找不到此类文件启动可执行文件

> ID：12361080
> 
> 赞同：2
> 
> 时间：2012-09-11T00:10:53.440
> 
> 标签：ios, xcode

在任何人假设我在这里说什么之前，请先阅读我要说的话。

我已经阅读了数百篇关于这个主题的帖子，并且尝试了几乎所有建议的解决方案，没有特别的顺序：

*   退出 Xcode
*   删除派生数据文件夹
*   清理项目
*   硬重置 iPhone
*   重置 Mac
*   尝试了第二部 iPhone
*   不同的USB端口
*   所有这些都按“特殊”顺序
*   检查代码签名属性
*   “验证设置”返回没有问题
*   验证返回没有问题

说到这个，我很难过。我唯一能想到的实际上就是重置我的手机，但是当它在第二部手机上也不起作用时，看不到这有什么帮助。

关于可能导致这个相当烦人的错误的任何其他建议、提示和想法？

更新：确切的错误：

```
Error launching remote program: No such file or directory (/Users/Username/Library/Developer/Xcode/DerivedData/ProjectName-dnfacjtdklqktcazrpfyupofdryp/Build/Products/Debug-iphoneos/ProjectName.app/ProjectName). 
```

为了得到错误，我执行上面列出的步骤的任意组合，然后单击“我的设备”（iPhone 4）上的运行。应用程序永远不会安装到手机上，Xcode 报告应用程序已完成运行，然后显示上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:19:12.550

我的问题是由于我不小心将“部署目标”（ios 版本）更改为高于我尝试运行代码的手机上的版本。

将部署目标更改为低于或等于手机上的 ios 软件版本。

（这个答案不在你的名单上）:)

# haskell - 为什么此代码在打开或关闭 optomisations 时表现不同？

> ID：12361085
> 
> 赞同：9
> 
> 时间：2012-09-11T00:11:21.427
> 
> 标签：haskell, ghc

我有一个简单的测试运行程序，用于我的 OpenPGP 模块[https://github.com/singpolyma/OpenPGP-Haskell/blob/master/Data/OpenPGP.hs](https://github.com/singpolyma/OpenPGP-Haskell/blob/master/Data/OpenPGP.hs)中的错误：

```
module Main where

import Data.OpenPGP
import Data.Binary (encode, decode)

packet = EmbeddedSignaturePacket (signaturePacket 2 168 ECDSA SHA256 [] [SignatureCreationTimePacket 1013401916,IssuerPacket "36FE856F4219F1C7"] 48065 [MPI 4,MPI 11,MPI 60,MPI 69,MPI 37,MPI 33,MPI 18,MPI 72,MPI 41,MPI 36,MPI 43,MPI 41,MPI 53,MPI 9,MPI 53,MPI 35,MPI 3,MPI 40,MPI 14,MPI 79,MPI 1,MPI 4,MPI 51,MPI 23,MPI 62,MPI 62,MPI 62,MPI 7,MPI 68,MPI 51,MPI 13,MPI 49,MPI 8,MPI 64,MPI 32,MPI 50,MPI 59,MPI 17,MPI 43,MPI 12,MPI 67,MPI 5,MPI 67,MPI 5,MPI 25,MPI 63,MPI 0,MPI 53,MPI 2,MPI 36,MPI 83,MPI 39,MPI 54,MPI 65,MPI 54,MPI 35,MPI 62,MPI 63,MPI 26,MPI 4,MPI 82,MPI 57,MPI 85,MPI 71,MPI 43,MPI 77])

main = print $ decode (encode packet) == packet 
```

如果你编译这个（在 ghc 7.4.1 上）：

```
ghc -O0 -fforce-recomp --make t.hs 
```

它按预期工作（即打印`True`），但如果你像这样编译：

```
ghc -O1 -fforce-recomp --make t.hs 
```

或这个：

```
ghc -O2 -fforce-recomp --make t.hs 
```

它将打印`False`.

我没有使用任何扩展（除了对 CPP 的微不足道的使用）或低级或不安全的调用，并且行为应该来自我的库而不是依赖项，因为只有我的代码在这里重新编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T05:42:28.957

问题与您的 BINARY_CLASS 实例有关`MPI`。如果我改变

```
main = do
  print packet
  print (decode (encode packet) :: SignatureSubpacket)
  print $ decode (encode packet) == packet 
```

我看到了输出（用 -O2 编译）

```
EmbeddedSignaturePacket (SignaturePacket {version = 2, signature_type = 168, key_algorithm = ECDSA, hash_algorithm = SHA256, hashed_subpackets = [], unhashed_subpackets = [SignatureCreationTimePacket 1013401916,IssuerPacket "36FE856F4219F1C7"], hash_head = 48065, signature = [MPI 4,MPI 11,MPI 60,MPI 69,MPI 37,MPI 33,MPI 18,MPI 72,MPI 41,MPI 36,MPI 43,MPI 41,MPI 53,MPI 9,MPI 53,MPI 35,MPI 3,MPI 40,MPI 14,MPI 79,MPI 1,MPI 4,MPI 51,MPI 23,MPI 62,MPI 62,MPI 62,MPI 7,MPI 68,MPI 51,MPI 13,MPI 49,MPI 8,MPI 64,MPI 32,MPI 50,MPI 59,MPI 17,MPI 43,MPI 12,MPI 67,MPI 5,MPI 67,MPI 5,MPI 25,MPI 63,MPI 0,MPI 53,MPI 2,MPI 36,MPI 83,MPI 39,MPI 54,MPI 65,MPI 54,MPI 35,MPI 62,MPI 63,MPI 26,MPI 4,MPI 82,MPI 57,MPI 85,MPI 71,MPI 43,MPI 77], trailer = Chunk "\168" (Chunk "<gI<" Empty)})
EmbeddedSignaturePacket (SignaturePacket {version = 2, signature_type = 168, key_algorithm = ECDSA, hash_algorithm = SHA256, hashed_subpackets = [], unhashed_subpackets = [SignatureCreationTimePacket 1013401916,IssuerPacket "36FE856F4219F1C7"], hash_head = 48065, signature = [MPI 4,MPI 11,MPI 60,MPI 69,MPI 37,MPI 33,MPI 18,MPI 72,MPI 41,MPI 36,MPI 43,MPI 41,MPI 53,MPI 9,MPI 53,MPI 35,MPI 3,MPI 40,MPI 14,MPI 79,MPI 1,MPI 4,MPI 51,MPI 23,MPI 62,MPI 62,MPI 62,MPI 7,MPI 68,MPI 51,MPI 13,MPI 49,MPI 8,MPI 64,MPI 32,MPI 50,MPI 59,MPI 17,MPI 43,MPI 12,MPI 67,MPI 5,MPI 67,MPI 5,MPI 25,MPI 63,MPI 0,MPI 0,MPI 339782829898145924110968965855122255180100961470274369007196973863828909184332476115285611703086303618816635857833592912611149], trailer = Chunk "\168" (Chunk "<gI<" Empty)}) 
```

将您的 MPI 实例更改为更直接的实现：

```
newtype MPI = MPI Integer deriving (Show, Read, Eq, Ord)
instance BINARY_CLASS MPI where
  put (MPI i) = do
    put (fromIntegral $ B.length bytes :: Word16)
    putSomeByteString bytes
    where
    bytes = if B.null bytes' then B.singleton 0 else bytes'
    bytes' = B.pack . map (read . (:[])) $ show i
  get = do
    length <- fmap fromIntegral (get :: Get Word16)
    bytes <- getSomeByteString length
    return (MPI $ read $ concatMap show $ B.unpack bytes) 
```

解决问题。

有几件事可能是问题的根源。您的代码可能是正确的（我没有以这种方式或其他方式检查过），在这种情况下，GHC 正在执行一些无效的转换，导致某处出现溢出/下溢。也有可能您的代码正在做一些不正确的事情，只有某些优化才会暴露出来。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T13:24:07.590

这是您的代码中的错误。考虑

```
MPI 63,MPI 0,MPI 53
       ^^^^^ 
```

和

```
instance BINARY_CLASS MPI where
    put (MPI i) = do
        put (((fromIntegral . B.length $ bytes) - 1) * 8
                + floor (logBase (2::Double) $ fromIntegral (bytes `B.index` 0))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                + 1 :: Word16)
    putSomeByteString bytes
    where
    bytes = if B.null bytes' then B.singleton 0 else bytes'
    bytes' = B.reverse $ B.unfoldr (\x ->
                    if x == 0 then Nothing else
                           Just (fromIntegral x, x `shiftR` 8)
             ) (assertProp (>=0) i) 
```

现在，如果我们编码`MPI 0`，`bytes'`则为空，`bytes = B.singleton 0`因此`bytes `B.index` 0`为 0。

但`logBase 2 0`is`-Infinity`和`floor`仅对有限值（在目标类型的范围内）定义明确。

在没有优化的情况下编译时，`floor`使用位模式 via `decodeFloat`。然后`floor (logBase 2 0)`为所有标准的固定宽度整数类型生成 0。

通过优化，重写规则处于活动状态并`floor`使用 primop `double2Int#`，它在 x86 resp 上返回硬件所做的任何事情。x86-64，`minBound :: Int`据我所知，无论位模式如何。相关代码是

```
floorDoubleInt :: Double -> Int
floorDoubleInt (D# x) =
    case double2Int# x of
      n | x <## int2Double# n   -> I# (n -# 1#)
        | otherwise             -> I# n 
```

当然，`-Infinity < int2Double minBound`，所以值变成`minBound - 1`，通常是`maxBound`。

当然这会导致错误的结果，因为现在`put`for的“长度”`MPI 0`变为 0，并且放在“长度”字段之后的 0 字节被解释为 next 的“长度”的一部分`MPI`。

# c# - 如何通过部门等属性从 Active Directory 中获取用户列表

> ID：12361086
> 
> 赞同：8
> 
> 时间：2012-09-11T00:11:35.297
> 
> 标签：c#, asp.net, active-directory

我需要使用显示名称、电话和部门等过滤器在 Active Directory 上提供搜索。显示名称和电话很容易，但我被困在部门上。这是有效的一点：

```
using (PrincipalContext context = new PrincipalContext(ContextType.Domain))
{
    UserPrincipal userPrincipal = new UserPrincipal(context);

    if (txtDisplayName.Text != "")
        userPrincipal.DisplayName = "*" + txtDisplayName.Text + "*";

    using (PrincipalSearcher searcher = new PrincipalSearcher(userPrincipal))
    {
        foreach (Principal result in searcher.FindAll())
        {
           DirectoryEntry directoryEntry = result.GetUnderlyingObject() as DirectoryEntry;
           DataRow drName = dtProfile.NewRow();
           drName["displayName"] = directoryEntry.Properties["displayName"].Value;
           drName["department"] = directoryEntry.Properties["department"].Value;
           dtProfile.Rows.Add(drName);
        }
    }
} 
```

我希望我可以添加如下内容：

```
DirectoryEntry userDirectoryEntry = userPrincipal.GetUnderlyingObject() as DirectoryEntry;
if (ddlDepartment.SelectedValue != "")
    userDirectoryEntry.Properties["title"].Value = ddlDepartment.SelectedValue; 
```

但这不起作用。有谁知道我该怎么做？

编辑：我是个白痴，更改了搜索词并找到了答案。额外的字段称为属性。[感谢 Raymund Macaalay 关于扩展 Principals 的博客文章](http://anyrest.wordpress.com/2010/10/14/how-to-use-ad-attributes-not-represented-in-userprincipal-groupprincipal-and-computerprincipal/)。

我的扩展用户主体：

```
[DirectoryObjectClass("user")]
[DirectoryRdnPrefix("CN")]

public class UserPrincipalExtended : UserPrincipal
{    
    public UserPrincipalExtended(PrincipalContext context) : base(context) 
    {
    }
    [DirectoryProperty("department")]
    public string department
    {
        get
        {
            if (ExtensionGet("department").Length != 1)
                return null;
            return (string)ExtensionGet("department")[0];
        }
        set { this.ExtensionSet("department", value); }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T01:36:05.847

由于您已经扩展`UserPrincipal`以包含该属性，因此当您想要搜索时`Department`，您需要使用该*扩展版本的用户主体。*

试试这个：

```
using (PrincipalContext context = new PrincipalContext(ContextType.Domain))
{
    UserPrincipalExtended userPrincipal = new UserPrincipalExtended(context);

    if (txtDisplayName.Text != "")
    {
        userPrincipal.DisplayName = "*" + txtDisplayName.Text + "*";
    }

    if (!string.IsNullOrEmpty(txtDepartment.Text.Trim())
    {
        userPrincipal.department = txtDepartment.Text.Trim();
    }

    using (PrincipalSearcher searcher = new PrincipalSearcher(userPrincipal))
    {
        foreach (Principal result in searcher.FindAll())
        {
           UserPrincipalExtended upe = result as UserPrincipalExtended;

           if (upe != null)
           {
               DataRow drName = dtProfile.NewRow();
               drName["displayName"] = upe.DisplayName;
               drName["department"] = upe.department;
               dtProfile.Rows.Add(drName);
           }
        }
    }
} 
```

# php - php/mysql 查询时区敏感行的正确方法

> ID：12361088
> 
> 赞同：0
> 
> 时间：2012-09-11T00:11:45.917
> 
> 标签：php, mysql, timezone, timezone-offset

我将行用户作为行存储在我的数据库中。我允许用户输入他们的时区，该时区也存储在数据库中。

我的应用程序每天都会在他们指定的时间给他们发送电子邮件。我将电子邮件传递作为一行存储在另一个数据库表中。这将通过 cron 作业发生。

我希望我的查询根据他们的时区提取该用户的最新电子邮件至少 1400 分钟（24 小时前）并经过他们指定时间的用户记录。

我有以下查询，但我不知道如何解释 mysql 的时区和用户的时区。有什么建议么？

```
SELECT u.id, u.email, u.timezone_offset, u.email_time, TIMESTAMPDIFF( 
MINUTE , CONCAT( DATE( MAX( e.created ) ) ,  ' ', u.email_time ) , NOW( ) ) AS min_since_last_email
FROM Users u
INNER JOIN Emails e ON e.user_id = u.id
WHERE min_since_last_email > 1400
GROUP BY u.id 
```

时区偏移量是与 GMT 的偏移量。所以它对我来说就像“-5”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:20:10.357

稍微扭转一下逻辑：在 PHP 中进行计算，以 UTC 将所有内容存储在数据库中。然后是一个简单的提取物。您可以使用时区函数在 PHP 中轻松完成此操作，并且可以按用户自定义 - SQL 语句是一个全局语句，按用户自定义更棘手（正如您所遇到的那样）。

因此，“发送电子邮件的时间”可能是世界标准时间凌晨 4 点（并且在数据库中），但您向用户显示“晚上 9 点”。

您可能遇到的一个问题是夏令时 - 当时区进入/退出夏令时时，您需要一直重新计算。但是，您当前的方法无论如何都不允许这样做...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:29:06.540

您上次发送电子邮件的日期是*您的*日期，因此请存储该日期。

随着您发送的电子邮件越来越多，计算每个用户的最大值将变得越来越昂贵。非规范化并将该日期时间的副本也放入用户记录中。

然后，计算该日期的年龄和用户时区的偏移量。

```
select *, date_add(now(), interval timezone_offset hour) as email_expected_on
from users
where last_email_date <= date_add(now(), interval timezone_offset hour); 
```

请注意，不要将公式应用于 users.last_email_date，这一点也很重要，否则您将无法在该列上使用索引。

# button - 如何为 jqgrid 内联导航器添加一个新的行按钮来显示模式对话框表单？

> ID：12361089
> 
> 赞同：1
> 
> 时间：2012-09-11T00:11:55.170
> 
> 标签：button, jqgrid, add, jqgrid-inlinenav

我正在使用位于**Row Editing** > **Inline Navigator的**[jqGrid Demos 页面](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)中的示例，但我需要将我的添加按钮从导航器中取出，例如**Live Data Manipulation** > **Add Row**。我已经放置了添加按钮：

 ******```
<table id="editgrid" ></table> <div id="pagered" ></div> <input type="BUTTON" id="bedata" value="Edit Selected" /> 
```

和事件

```
$("#bedata").click(function(){ jQuery("#editgrid").jqGrid('editGridRow',"new",{height:280,reloadAfterSubmit:false}); }); 
```

我的问题是，我必须使用的事件名称或 jqgrid 的配置是什么，以便在我单击**betadata时直接在网格中插入新行，就像在内联导航器示例中一样，不显示模态表单对话框**时直接在网格中插入新行，就像在内联导航器示例中一样，不显示模态表单对话框按钮？

我已经设置了**模态**属性设置为 false，但它不起作用，

任何帮助将非常感激

**回答：**

事件的名称是**addRow**，我在[inline-editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)文档中找到了它。******

# java - Java 上的服务器名称指示 (SNI)

> ID：12361090
> 
> 赞同：13
> 
> 时间：2012-09-11T00:11:57.997
> 
> 标签：java, http, ssl, sni

任何人都可以帮助我开始使用 Java 中的服务器名称指示执行 HTTP 连接吗？

我正在尝试从我正在管理的网站请求内容。我一直在使用 Apache 的 HttpClient 库，但我对安全内容的请求失败了，因为该网站仅将 SNI 用于 HTTPS，并且在 DefaultHttpClient 中未启用 SNI。我已经在 Apache 的 HttpClient 库中查找了有关如何处理此问题的说明，但我看到最终得到此文档：[http](http://hc.apache.org/httpclient-3.x/sslguide.html) ://hc.apache.org/httpclient-3.x/sslguide.html ，该文档已过时（当 HttpClient 和 HttpCore 是 Apache 的 commons 包的一部分时，指代代码）。

那么……有什么帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T02:20:23.817

您可能想跟踪[https://issues.apache.org/jira/browse/HTTPCLIENT-1119](https://issues.apache.org/jira/browse/HTTPCLIENT-1119)

Java 7 的底层客户端实现能够支持它并通过 SSLSocketImpl#setHost（由 sun.net.www.protocol.https.HttpsClient 调用）公开该功能

在 Java 7 上使用

```
 new URL("https://cmbntr.sni.velox.ch/").openStream() 
```

直到 HTTPCLIENT-1119 被修复

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-21T15:01:56.513

这就是我在 org.apache.httpcomponents 的 httpclient v4.3+ 中的做法

```
private HttpClientConnectionManager createConnectionManager(final SSLContext ctx) {
    LOG.info("Creating sslConnectionSocketFactory");
    final SSLConnectionSocketFactory sslSF = new SSLConnectionSocketFactory(ctx) {

        @Override
        protected void prepareSocket(SSLSocket socket) throws IOException {
            try {
                System.out.println("************ setting socket HOST property *************");
                PropertyUtils.setProperty(socket, HOST, Constants.SNI_HOST);
            } catch (IllegalAccessException | NoSuchMethodException | InvocationTargetException ex) {
                LOG.error(ex.getMessage());
            }
            super.prepareSocket(socket); 
        }

    };

    LOG.info("Creating connectionRegistry");
    final Registry<ConnectionSocketFactory> registry = RegistryBuilder.<ConnectionSocketFactory>create()
            .register("https", sslSF)
            .build();

    LOG.info("Creating poolingConnectionManager");
    final PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager(registry);
    connectionManager.setDefaultMaxPerRoute(MAX_CONNECTIONS_PER_ROUTE);
    connectionManager.setMaxTotal(MAX_CONNECTIONS);

    return connectionManager;
} 
```

这就是我创建`HttpClient`

```
final KeyManager[] keyManagers = createKeyManagers();
final TrustManager[] trustManagers = createTrustManagers();
final SSLContext ctx = createSslContext(keyManagers, trustManagers);

final HttpClientConnectionManager connectionManager = createConnectionManager(ctx);

LOG.info("Creating httpClient");
HttpClient httpClient = HttpClients
        .custom()
        .setConnectionManager(connectionManager)
        .build(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:10:17.500

具有如下所述的简短修复： [Java 客户端中带有 SNI 的 TLS](https://stackoverflow.com/questions/2804551/tls-with-sni-in-java-clients/14052701#14052701) 可以将 SNI 服务器支持添加到 JDK 7 并将其与 X509ExtendedKeyManager 一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T18:23:59.327

对我有用的是`ServerName`在 Apache 配置中正确配置：

`/etc/apache2/sites-avaible/default`

```
<VirtualHost *:443>
  ServerName foo.domain.com
  ...
</VirtualHost> 
```

就像在[https://stackoverflow.com/a/8058839/2088282](https://stackoverflow.com/a/8058839/2088282)中所说的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T00:23:53.193

看来这个问题已在[Java 7](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements-7.html)中得到修复。

# doctrine-orm - DQL搜索MD5字符串？

> ID：12361091
> 
> 赞同：0
> 
> 时间：2012-09-11T00:12:07.417
> 
> 标签：doctrine-orm

如何使用 DQL 在我的数据库中搜索 MD5 字符串。

我正在使用学说并想在 DQL 中编写以下查询。

```
SELECT * FROM club_members WHERE md5( CONCAT('secret_key',id)) = '8e801b9cd9b38c142472d5fc5238f538' 
```

我试过

```
$dql = "SELECT c FROM models\Club_members c WHERE md5( CONCAT('".$secret_key."',c.id)) = '8e801b9cd9b38c142472d5fc5238f538'"; 
```

但得到一个致命错误

致命错误：未捕获的异常 'Doctrine\ORM\Query\QueryException' 带有消息 '[Syntax Error] line 0, col 52: Error: Expected known function, got 'md5'' in //application/libraries/Doctrine/ORM/Query /QueryException.php:42 堆栈跟踪：#0 //application/libraries/Doctrine/ORM/Query/Parser.php(396): Doctrine\ORM\Query\QueryException::syntaxError('line 0, col 52:.. .') #1 //application/libraries/Doctrine/ORM/Query/Parser.php(2778): Doctrine\ORM\Query\Parser->syntaxError('known function', Array) #2 //application/libraries/ Doctrine/ORM/Query/Parser.php(2311): Doctrine\ORM\Query\Parser->FunctionDeclaration() #3 //application/libraries/Doctrine/ORM/Query/Parser.php(2279): Doctrine\ORM\ Query\Parser->ArithmeticPrimary() #4 //application/libraries/Doctrine/ORM/Query/Parser.php(2247):第 42 行 //application/libraries/Doctrine/ORM/Query/QueryException.php 中的 Doctrine\ORM\Query

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:11:14.300

标准Doctrine不包含MD5，需要安装MD5扩展：[https ://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/Md5.php](https://github.com/beberlei/DoctrineExtensions/blob/master/lib/DoctrineExtensions/Query/Mysql/Md5.php)

# ruby - 修改 RakeFile 以允许不同的目标

> ID：12361093
> 
> 赞同：0
> 
> 时间：2012-09-11T00:12:32.950
> 
> 标签：ruby, rake, package, rvm, rake-task

我正在开发一个带有 Ruby 封装的 HTML5/JavaScript 应用程序，可在多个平台上使用，包括汽车上的仪表板显示单元。跨平台的代码库是相同的，除了一个包装文件包含所有针对单个平台的 API 特定调用：即“sdk.web.js”或“sdk.car.js”。

我希望修改当前的 PackageTask 以允许目标平台的输入。根据目标，我希望将相应的包装文件重命名为“sdk.js”并包含在包中，忽略其余部分以使 zip 存档尽可能小。

从终端，我想说的是：

```
rake target "web" 
```

它将包含一个包含“sdk.web.js”的包重命名为“sdk.js”。任何人都知道这是否可能，以及我将如何修改现有的 RakeFile（如下）以实现此目的？

```
require 'fileutils'
require 'rake/packagetask'

VERSION = ""

task :default => [:package]

def parse_version(filename)
  f = File.open(filename, "rb")
  contents = f.read
  m = contents.match('var version = "([0-9.]+)";')
  if m
    return m[1]
  else
    return nil
  end
end

desc "Package up the app into a zip file"
Rake::PackageTask.new("myApp") do |p|
  p.version = parse_version("js/application.js")
  p.need_zip = true
  p.package_files = FileList["*", "**/*"]
  p.package_files.exclude(".git", "pkg/*", "Rakefile", ".rvmrc", "Gemfile", "Gemfile.lock", ".project", ".settings", ".gitignore", "data/store/*", "docs", "docs/*")
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:56:30.717

通常，您可以将参数传递给 rake 任务。参见例如[这个页面](http://viget.com/extend/protip-passing-parameters-to-your-rake-tasks)。

但是，您无权从 PackageTask 访问包任务。一个解决方案是定义您自己的打包任务，该任务将添加正确的 js 脚本，然后手动调用包。例如（未经测试）：

```
Rake::PackageTask.new("myApp") do |p|
  [snip]
  p.package_files << "sdk.js"
end

task 'custom_packaging', :sdk do |t, args|
  # Copy the right file to sdk.js
  FileUtils.cp_f "sdk.#{args[:sdk]}.js", "sdk.js"
  Rake::Task["package"].invoke
end 
```

# ios - 如何使用 uiview 动画完全旋转圆形对象

> ID：12361096
> 
> 赞同：4
> 
> 时间：2012-09-11T00:13:08.447
> 
> 标签：ios, objective-c, swift, xcode, uiviewanimation

我试图循环部分圆圈以实现动画，但它只转动 180 度，然后从 0 度重新开始到 180 度。所以有一个从 180 度到 360 度的突然跳跃。如何让我的圆形图像对象连续旋转而没有任何跳跃？这是我当前的代码：

```
 UIViewAnimationOptions options = UIViewAnimationOptionCurveLinear|UIViewAnimationOptionRepeat;

    [UIView animateWithDuration:ROTATE_ANIMATION_DURATION/2 delay:0 options:options 
       animations:^{
           view.transform = CGAffineTransformRotate(transform, M_PI);}//1st step of animation finished
       completion:^(BOOL finished) {
             [UIView animateWithDuration:ROTATE_ANIMATION_DURATION/2 delay:0 options:options 
                animations:^{
                    view.transform = CGAffineTransformRotate(transform, M_PI);} //2nd step of animation finished
                completion:^(BOOL finished) {nil;
                }]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T06:56:28.163

旋转 UI 对象，动画旋转 360 度
，您需要将 QuartzCore 框架添加到您的项目并包括

```
#import QuartzCore/QuartzCore.h 
```

为对象添加动画：

```
 CABasicAnimation *fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    fullRotation.fromValue = [NSNumber numberWithFloat:0];
    fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
    fullRotation.duration = 6;
    fullRotation.repeatCount = 1e100f;
    [myview.layer addAnimation:fullRotation forKey:@"360"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T06:50:49.820

我发现了一些用于将视图旋转 360 度的旧代码，希望对您有所帮助。您需要导入 QuartzCore。

```
CABasicAnimation* rotationAnimation;
rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.zRad"];
rotationAnimation.toValue = [NSNumber numberWithFloat: M_PI * 2.0];

rotationAnimation.duration = 3;
rotationAnimation.cumulative = YES;
rotationAnimation.repeatCount = INFINITY;
rotationAnimation.timingFunction = 
[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];

[viewToAnimate.layer addAnimation:rotationAnimation forKey:@"transform.rotation.zRad"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-02T13:16:10.123

使用 UIView 执行 360 度动画有以下不同的方法。

使用**CABasicAnimation**

```
var rotationAnimation = CABasicAnimation()
rotationAnimation = CABasicAnimation.init(keyPath: "transform.rotation.z")
rotationAnimation.toValue = NSNumber(value: (Double.pi * 2.0))
rotationAnimation.duration = 1.0
rotationAnimation.isCumulative = true
rotationAnimation.repeatCount = 100.0
view.layer.add(rotationAnimation, forKey: "rotationAnimation") 
```

这是处理启动和停止旋转操作的 UIView 的扩展函数：

```
extension UIView {

    // Start rotation
    func startRotation() {
        let rotation = CABasicAnimation(keyPath: "transform.rotation.z")
        rotation.fromValue = 0
        rotation.toValue = NSNumber(value: Double.pi * 2)
        rotation.duration = 1.0
        rotation.isCumulative = true
        rotation.repeatCount = FLT_MAX
        self.layer.add(rotation, forKey: "rotationAnimation")
    }

    // Stop rotation
    func stopRotation() {
        self.layer.removeAnimation(forKey: "rotationAnimation")
    }
} 
```

现在使用**UIView.animation**闭包：

```
UIView.animate(withDuration: 0.5, animations: { 
      view.transform = CGAffineTransform(rotationAngle: (CGFloat(Double.pi)) 
}) { (isAnimationComplete) in
    UIView.animate(withDuration: 0.5) { 
      view.transform = CGAffineTransform(rotationAngle: (CGFloat(Double.pi))
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-03T11:50:38.667

```
BOOL animating;

- (void)spinWithOptions:(UIViewAnimationOptions)options {  
[UIView animateWithDuration:0.5
                             delay:0
                           options:options
                        animations:^{

                           self.imageToMove.transform = CGAffineTransformRotate(imageToMove.transform, M_PI / 2);
                        }
                        completion:^(BOOL finished) {
                           if (finished) {
                              if (animating) {
                                 [self spinWithOptions: UIViewAnimationOptionCurveLinear];
                              } else if (options != UIViewAnimationOptionCurveEaseOut) {
                                 [self spinWithOptions: UIViewAnimationOptionCurveEaseOut];
                              }
                           }
                        }];
}
- (void)startSpin {   
     if (!animating) {
        animating = YES;
        [self spinWithOptions: UIViewAnimationOptionCurveEaseIn];    
     } 
}

- (void)stopSpin  {
    // set the flag to stop spinning after one last 90 degree increment
    animating = NO; 
} 
```

您可以通过分别调用 startSpin 和 stopSpin 方法来启动和停止视图动画。

这是迅速的相关答案：

```
func spin(with options: UIViewAnimationOptions) {
             UIView.animate(withDuration: 0.5, delay: 0, options: options,
        animations: {() -> Void in

                    self.imageToRotate.transform = self.imageToRotate.transform.rotated(by: .pi / 2)  
                }, completion: {(_ finished: Bool) -> Void in

            if finished {
               if self.animating {
                  self.spin(with: .curveLinear)
               }
               else if options != .curveEaseOut {
                  self.spin(with: .curveEaseOut)
               }
            }
        })
}

func startSpin() {
   if !animating {
      animating = true
      spin(with: .curveEaseIn)
   }
}

func stopSpin() {
    animating = false
} 
```

# javascript - 获取csv文件内容的get方法

> ID：12361101
> 
> 赞同：2
> 
> 时间：2012-09-11T00:13:40.347
> 
> 标签：javascript

提前道歉，因为我对 javascript 很陌生。从本质上讲，我拼凑了 2 个脚本，我正在努力开始工作。我知道 javascript 通常无法访问本地文件，但有`File object`可能吗？

在下面的代码中，如果我选择的文件是 CSV，我如何将它传递给下一个函数`$.get('data.csv', function(data)`，那么`'data.csv'`实际上是选择了文件吗？

```
<html>
<script type="text/javascript">

    document.getElementById('file').addEventListener('change', handleFileSelection, false);

    function handleFileSelection(evt) {
      console.log(evt);
      var f = evt.target.files[0];   
    }

    $(document).ready(function() {

      $.get('data.csv', function(data) {
        // Split the lines
        var lines = data.split('\n');

        //more code

      });

    });
</script>

<body>
    <input type="file" id="file" name="file" />
    <output id="list"></output>
</body>

</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:48:50.400

我在这里看到的第一个问题是您试图在创建实际元素之前添加事件侦听器（如 RobG 所说）。

我可以提到的第二个问题是您试图用来`$.get`解析该本地 CSV 文件。如果您使用的是 jQuery，则`$.get`向某个 URL 发出 GET 异步请求，这不是您所需要的。您必须调查 FileReader 对象。我对它不熟悉，所以我不能带来工作代码的例子，但你可以[在这里](http://www.nczonline.net/blog/2012/05/15/working-with-files-in-javascript-part-2/)寻找一些例子。

# wso2 - WSO2 ESB 4.0.3 和 XSLT 2.0 支持

> ID：12361105
> 
> 赞同：1
> 
> 时间：2012-09-11T00:13:59.693
> 
> 标签：wso2, wso2esb, wso2carbon

根据以下 URL，我启用了 XSLT 2.0 支持，但是当我这样做时，看起来 TryIt 服务不起作用。

[阿查拉博客条目](http://achala11.blogspot.com/2012/04/how-to-get-xslt-20-support-with-wso2.html)

尝试使用 TryIt 服务时出现以下错误。

```
[2012-09-10 11:47:03,491]  INFO - CarbonAuthenticationUtil 'admin' logged in at [2012-09-10 11:47:03,0491] from IP address 0:0:0:0:0:0:0:1%0
Warning: at xsl:stylesheet on line 32 of :
  Running an XSLT 1.0 stylesheet with an XSLT 2.0 processor
Warning: on line 286 of :
  The attribute axis starting at a namespace() node will never select anything
Error on line 1603 of :
  XPTY0004: Required item type of second operand of '|' is node(); supplied value has item
  type xs:string
[2012-09-10 11:47:09,515] ERROR - Util Required item type of second operand of '|' is node(); supplied value has item type xs:string
; SystemID: ; Line#: 1603; Column#: -1
net.sf.saxon.trans.DynamicError: Required item type of second operand of '|' is node(); supplied value has item type xs:string 
```

是否有任何解决方法，以便我们可以将 XSLT 2.0 和 TryIt 都与 WSO2 ESB 4.0.3 一起使用。

希望得到答复。谢谢阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:57:22.820

最新的 WSO2 ESB (v4.5.0) 通过 Saxson 支持 XSLT 2.0 [1]。

[1] [http://mail.wso2.org/mailarchive/announce/2012-September/000026.html](http://mail.wso2.org/mailarchive/announce/2012-September/000026.html)

问候，/女娲

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:31:12.410

您需要将标准 XSLT 处理器替换为能够处理 XSLT 2.0 的新处理器，如[WSO2 ESB 4.0.3 的博客解决方案](http://achala11.blogspot.ch/2012/04/how-to-get-xslt-20-support-with-wso2.html)中所述：

1.  删除 ESB_HOME/lib/endorsed/ 中的 xalan-2.7.0.wso2v1.jar
2.  从 ESB_HOME/repository/components/plugins 中删除 saxon-8.9.0.wso2v1.jar
3.  将 saxon9he.jar 复制到 lib/endorsed 并启动服务器。

[SAXON 9 你可以在这里下载](http://saxon.sourceforge.net/)

请注意，您还将获得 SOAP 信封和正文作为 XSLT 的输入，因此您可能还需要这些元素的 xsl:template：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:xs="http://www.w3.org/2001/XMLSchema" version="2.0">
<xsl:output method="xml" encoding="utf-8" indent="yes"/>

<xsl:template match="/soapenv:Envelope|soapenv:Body">
  <xsl:copy>
    <xsl:apply-templates/>
  </xsl:copy>
</xsl:template>

... 
```

# c++ - Visual C++ 没有运算符“>>”匹配这些操作数

> ID：12361110
> 
> 赞同：1
> 
> 时间：2012-09-11T00:14:45.370
> 
> 标签：c++, visual-studio-2010, visual-c++, sdl

我一直在寻找解决这个问题的方法。我正在尝试使用“>>”和“<<”运算符，如下所示，但不断收到错误“没有运算符'>>'与这些操作数匹配”。以下是代码片段：

```
#include "stdafx.h"
#include <iostream>
#include <cmath>
#include <fstream>
#include <string>

...

int blah;
std::string level;

level >> blah;
thisDot.setX(blah);

level >> blah;
thisDot.setY(blah); 
```

我在这个主题上找到的几篇帖子都有简单的解决方案 include `#include <string>`，但正如你所见，我已经包含了它，但仍然出现错误。我也尝试过`#include string.h`，但这也无济于事。关于为什么这仍然会发生的任何想法？...值得注意的是，我正在使用 SDL 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:28:35.903

你误读了这个例子。该示例是从*文件*中读取，而不是从*字符串*中读取。

```
 std::string level;
 // ...
 load >> offset; 
```

请注意，它`load`出现在 的左侧，而`>>`不是`level`。

# ruby-on-rails - 如何选择对同一关联有两个约束的记录？

> ID：12361112
> 
> 赞同：2
> 
> 时间：2012-09-11T00:14:55.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, roles

我希望能够选择具有多个角色的用户：

```
User < ActiveRecord::Base
  has_and_belongs_to_many :roles
end

Role < ActiveRecord::Base
  has_and_belongs_to_many :users
end 
```

我知道如何选择具有两个角色之一的用户：

```
User.joins(:roles).where(roles: { name: [:admin, :manager] }) 
```

但是如何找到至少拥有 :admin AND :manager 角色的所有用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:42:41.637

这是一个有效的解决方案：

```
User.select("DISTINCT users.*").
  joins("JOIN users_roles a ON a.user_id = users.id").
  joins("JOIN roles b ON b.id = a.role_id").
  joins("JOIN users_roles c ON c.user_id = users.id").
  joins("JOIN roles d ON d.id = c.role_id").
  where("b.name = ? and d.name = ? ", :admin, :manager) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:41:06.857

这将起作用：

```
users = User.joins(:roles)
users.where("roles.name" => "admin") & users.where("roles.name" => "manager") 
```

请注意，这会产生两个 SQL 负载查询，我认为这对于这种类型的搜索可能是不可避免的。（您的替代解决方案也进行两个 SQL 查询。）另请注意，它返回一个数组而不是一个活动记录关系，这可能不是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T02:51:56.593

如果将关联设置为`has_many :through`，则可以按用户计算唯一角色：

```
class User < ActiveRecord::Base
  has_many :user_roles
  has_many :roles, :through => :user_roles
end

# Note: add an id column on the join table
class UserRole < ActiveRecord::Base
  belongs_to :user
  belongs_to :role
end

class Role < ActiveRecord::Base
  has_many :user_roles
  has_many :users, :through => :user_roles
end

User.joins(:user_roles => :role).
  select("users.*, COUNT(DISTINCT user_roles.id) as user_role_count").
  where("roles.name IN ('Admin','Manager')").
  group("users.id").
  having("user_role_count = 2") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T00:23:40.433

这有效，但感觉不对：

```
Role.where(name: :admin).first.users.joins(:roles).where(roles: { name: :manager } ) 
```

# python - Selenium - 将所有 mime 类型保存到磁盘

> ID：12361113
> 
> 赞同：6
> 
> 时间：2012-09-11T00:15:11.017
> 
> 标签：python, firefox, selenium

我正在尝试使用 Python Selenium 下载一组 HWP（“Haansoft Word Processor”）文件。但是，无论我在 Firefox 浏览器配置文件配置中设置什么，下载管理器都会打开。我已经针对其他 mime 类型（pdf、doc）测试了以下代码，它似乎工作得很好（即，无需打开下载管理器）。

```
fp = webdriver.FirefoxProfile()
fp.set_preference("browser.download.folderList",2)
fp.set_preference("browser.download.manager.showWhenStarting",False)
fp.set_preference("browser.download.dir",downloaddir)
fp.set_preference("browser.helperApps.neverAsk.saveToDisk",
        "application/x-hwp,application/hwp,application/haansofthwp") 
```

有什么方法可以设置`browser.helperApps.neverAsk.saveToDisk`所有的 mime 类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T07:34:41.987

为了避免下载对话框，您必须确定确切的 MIME 类型并将其提供给配置文件（就像您所做的那样，但可能不是正确的 mime 类型）。至少据我所知，您必须将它们全部写成偏好。

[在此处获取 MIME 类型](http://www.yolinux.com/TUTORIALS/LinuxTutorialMimeTypesAndApplications.html)的概述：

也有帮助可能是线

```
profile.SetPreference("browser.helperApps.alwaysAsk.force", false); 
```

， 只是要确定 ;）

如果你不知道 MIME 类型并且你在 windows 上，你可以尝试[免费软件 fiddler](http://fiddler2.com/get-fiddler)来找出 MIME 类型。它是一个分析http流量的工具。[可以在此处找到](http://www.mehdi-khalili.com/fiddler-in-action/part-1)有关提琴手使用的不错的教程

# iphone - 尝试打开新视图控制器时发送到实例的无法识别的选择器

> ID：12361114
> 
> 赞同：0
> 
> 时间：2012-09-11T00:15:15.933
> 
> 标签：iphone, xcode

我有 2 个视图控制器：

1.  DemoAppViewController
2.  关于ViewController

我在 DemoAppViewController 中有一个信息按钮，它应该打开 AboutViewController。

目前我遇到运行时错误，我似乎无法弄清楚为什么..

这是代码：

DemoAppViewController .h：

```
- (IBAction)showInfo; 
```

DemoAppViewController.m：

```
- (IBAction)showInfo {

    AboutViewController *controller = [[AboutViewController alloc] initWithNibName:@"AboutViewController" bundle:nil];

    //setting style with modalTransition property

    controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

    //show on screen

    [self presentViewController:controller animated:YES completion:nil];

} 
```

当我使用 xCode 创建 AboutViewController 对象时，`initWithNibName`将以下代码添加到 AboutViewController.m：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil

{

    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {

        // Custom initialization

    }

    return self;

} 
```

我没有动过上面的内容。

运行时错误：

```
[DemoAppViewController showInfo:]: unrecognized selector sent to instance 0x688e450 
```

有人可以告诉我哪里出错了吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:20:49.780

此方法的选择器是`@selector(showInfo)`，不是`@selector(showInfo:)`。如果您以编程方式分配它，只需更正它。如果您使用 IB -`:(id) sender`在方法中添加参数。

# linux - bash 中的特殊管道/重定向

> ID：12361119
> 
> 赞同：0
> 
> 时间：2012-09-11T00:15:41.563
> 
> 标签：linux, bash, scripting, piping

（首先我一直在寻找一个小时，所以我很确定这不是重复）

我需要编写一个执行 1 个命令、1 次的脚本，然后执行以下操作：

1.  将 stdout 和 stderr 都保存到文件中（同时保持它们的正确顺序）
2.  仅将 stderr 保存到变量中。

如果我有这样的文件，请详细说明第 1 点

```
echo "one"
thisisanerrror
echo "two"
thisisanotherError 
```

我应该期望看到输出，然后是错误，然后是输出，然后是更多错误（因此连接是不够的）。

我最接近的是以下内容，它似乎损坏了日志文件：

```
errs=`((./someCommand.sh 2>&1 1>&3) | tee /dev/stderr ) 3>file.log 2>&3 ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:35:19.420

这可能是一个起点：

[如何在使用带有管道的“tee”时将 stderr 写入文件？](https://stackoverflow.com/questions/692000/how-do-i-write-stderr-to-a-file-while-using-tee-with-a-pipe)

编辑：

这似乎有效：

```
((./foo.sh) 2> >(tee >(cat) >&2)) > foo.log 
```

用 tee 拆分 stderr，将一份副本写入 stdout (cat)，将另一份写入 stderr。之后，您可以获取所有标准输出并将其写入文件。

编辑：将输出存储在变量中

```
varx=`((./foo.sh) 2> >(tee >(cat) >&2))` 
```

我还看到用额外的双引号括起来的命令，但我不知道这可能有什么好处。

# java - 计算益智游戏时间的好算法是什么？

> ID：12361120
> 
> 赞同：-2
> 
> 时间：2012-09-11T00:16:00.740
> 
> 标签：java, android, algorithm

我正在构建一个益智游戏，用户将被定时完成关卡。用户将根据他/她完成关卡所花费的时间获得评分。自然，随着级别的增加，他们变得越来越难。

我正在尝试提出一个好的算法来随着难度的增加对用户进行评分。用户应该在 10 级上获得比在 1 级上更多的时间来获得 3 星等级。

有谁知道为此使用的好算法？

**补充游戏示例：**

> 用户将有 2:00 完成每个级别。但为了在第一关获得 5 星，用户必须在 1:50 之前完成关卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:44:31.830

很难给出直接和正式的答案，因为这真的取决于游戏，而且我对你的游戏一无所知。您提到您正在制作一款益智游戏，因此我将列出一些可能有效的通用算法，您可以根据自己的需要调整/应用它​​们。

*   正如**Pshemo 所**提到的，您可以计算所需的移动/交互次数，然后给定一个基线值（例如，对于 3 星等级，没有移动应该花费更多的 0.75 秒来计算），将它们全部加起来。然后比较用户的时间和那个。

*   您还可以为所有级别创建一个基本时间等级，例如 1 分钟。然后，游戏中的每个实体都会根据它对玩家的影响来增加或减少该时间值。如果你的游戏有任何直接挑战玩家的东西（例如敌人、隐藏的炸弹等），他们会增加时间（例如：每个炸弹块都会给你额外的 3 秒等）。任何对玩家有帮助的东西都会反其道而行之（例如：玩家可以用来摧毁所有周围方块的每个星形方块会占用 3 秒。）不同的值将用于不同的难度。最后将玩家的时间与排名时间进行比较。

    总的来说，这种方法有助于保持良好的平衡。

*   如果您希望获得更*个性化*的体验，可以始终使用平均*中等*难度时间，并衡量玩家的表现如何。如果他经常以 50% 或更低的速度击败它，那么减少时间以使其更具挑战性。你也可以增加它。

这些是适用于许多类型的益智游戏的一些基本原则。它们可能会也可能不会直接应用于您的游戏，但我相信您可以轻松地调整它们。

我希望我有所帮助！:)

# asp.net - 验证 Web 表单站点使用的 .Net 版本

> ID：12361122
> 
> 赞同：1
> 
> 时间：2012-09-11T00:16:26.723
> 
> 标签：asp.net

我安装了 .Net 4.5 并在我的 web.config 文件中有 targetFramework="4.5" 但在错误页面上我看到了这个：

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17020

我如何验证它是否真的使用 4.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:51:50.567

你应该试试这个

```
string version = System.Environment.Version.ToString();
Response.Write(version); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T00:29:29.503

尝试添加一个简单的 .ASPX 文件，该文件使用一些[新的 4.5 内容](http://msdn.microsoft.com/en-us/library/ms171868.aspx#web)，看看是否可以加载它。

的`TextMode`属性`TextBox`是一个新的 HTML5 特性。这应该创建一个[HTML5 *type=number*](http://diveintohtml5.info/forms.html)输入：

```
<asp:TextBox ID="TextBox1" runat="server" TextMode="Number" /> 
```

# android - 更多 Eclipse ADT 疯狂！Logcat 完全断开连接

> ID：12361128
> 
> 赞同：4
> 
> 时间：2012-09-11T00:17:16.723
> 
> 标签：android, eclipse, adt

不知为何（对我而言）。logcat 只是停止运行。我已经尝试过 adb kill-server adb start-server 等，除了关闭 eclipse 并重新启动它之外没有任何效果。这根本没有效率。而且是浪费时间。有谁知道如何防止丢失 logcat 数据馈送，或者如何快速恢复它？这至少是我第 100 次遇到这种情况。我真的看不到在 xCode 中发生这种情况。不是这种方式。我的意思是点击重新连接到底在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:46:03.743

我以前从未碰到过这个问题。当 logcat 完全为空时，我确实发生过几次，但后来我发现我需要在 DDMS 中指向正确的设备，以便 logcat 知道从哪里获取数据。

不过，我认为这不是您的问题，因为您说 logcat 正在“丢失数据馈送”。听起来 logcat 中途停止工作。

# jquery - 视差效果 - 向下滚动时第一个背景的间隙问题

> ID：12361129
> 
> 赞同：1
> 
> 时间：2012-09-11T00:17:26.513
> 
> 标签：jquery, css, margin, padding, parallax

我正在学习如何在 jQuery 中使用视差效果。

我在不同的滑块方面做得很好，但是当我开始滚动时出现间隙问题，第一个背景会向下跳。

您可以在我的页面上查看问题，[并](http://www.hyker.be/test)查看源代码。

有什么解决方案可以避免这种情况吗？我试图改变边距值，但我认为这可能是一个“高度”问题，我不确定。

这是我的css代码的一些部分：

```
 body {
margin: 0;
padding: 0;
color:#fff;
font: normal 90% "Trebuchet MS",Verdana,"Lucida Grande",Tahoma,Arial,Helvetica,Sans-     Serif;
text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.5);
}

#slide1, #slide2, #slide3 {
height: 1000px;
}

#slide1 {
background: url(images/bg/01.jpg) 50% 0 no-repeat fixed;
color: white;
height: 800px;
margin: 0;
overflow: hidden;
padding: 0;
}

#slide2 {
background: url(images/bg/02.jpg) center 0 no-repeat fixed;
color: white;
height: 1000px;
margin: 0 auto;
overflow: hidden;
padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:31:24.813

#slide1 高度声明为 1000px，然后再次添加为 800px？第二个将覆盖第一个，并且可能是差距的来源。

# windows-8 - Metro 项目中的“未定义或导入预定义类型‘System.TypedReference’”是什么意思？

> ID：12361133
> 
> 赞同：0
> 
> 时间：2012-09-11T00:18:20.517
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012

我目前正在将一个库转换为 Windows 8 的 Metro 库。我使用“类库（Windows 应用商店应用程序）”C# 模板在 Visual Studio 2012 中创建了一个全新的项目。我一直在添加很多文件并解决编译错误，但让我感到困惑的是：

```
Error   2   Predefined type 'System.TypedReference' is not defined or
imported    CSC MyNewProject 
```

“CSC”出现在“文件”列下。双击错误不会执行任何操作。谷歌搜索只给我这个：

> *   不要从命令行编译器指定 /nostdlib 选项。
>     
>     
> *   确保项目引用了正确的 mscorlib.dll。
>     
>     
> *   重新安装 .NET Framework 公共语言运行时（如果以前的解决方案不能解决问题）。

（来源[http://msdn.microsoft.com/en-us/library/f5c3ehka.aspx](http://msdn.microsoft.com/en-us/library/f5c3ehka.aspx)）

我没有使用命令行编译器，我不知道如何包含或排除 mscorlib - 因为与 Visual Studio 中以前的 .NET 应用程序不同，我的项目引用的唯一内容是“.NET for Windows Store apps”和“Windows “（我还在习惯的东西）。

对此有何想法/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:57:28.327

该对象不可用或已针对新的 ARM .NET 体系结构重新定位。

这是供您搜索的完整 API，我会搜索它，但它缺少搜索功能。

[http://msdn.microsoft.com/en-us/library/windows/apps/br211369.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211369.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:16:37.627

对于遇到这种情况的其他人，我在将项目转换为在地铁上运行时遇到了这种情况。我继续修复其他问题（当时这是数百个错误之一），最终这只是简单地消失了。我的计划是在修复所有其他错误后最终将其与文本编辑器中的新地铁项目进行比较，但在此之前它自行解决了。

# android - 删除状态栏中的短信通知

> ID：12361135
> 
> 赞同：3
> 
> 时间：2012-09-11T00:18:27.730
> 
> 标签：android, android-notifications

我正在构建一个短信处理应用程序。如果收到的短信包含先前定义的文本（例如“ALERT”），我正在尝试仅从状态栏中删除**通知图标。**因此，如果通知声音打开，声音将照常播放。

我不能使用[abortBroadcast()](http://developer.android.com/reference/android/content/BroadcastReceiver.html#abortBroadcast%28%29)，因为我想将短信存储到收件箱中。我不想完全删除它。

[cancel(int)](http://developer.android.com/reference/android/app/NotificationManager.html#cancel%28int%29)可能有效，但我不知道如何获取由 android 的本机短信应用程序创建的通知 ID。

我已经尝试过[cancelAll()](http://developer.android.com/reference/android/app/NotificationManager.html#cancelAll%28%29)，因为它不是我的通知，它不起作用。

有什么办法吗？提前致谢

**PS。**也许我可以使用 abortBroadcast() 来阻止状态栏上的通知图标，然后我可以通过编程将 sms 放入收件箱，但这对于简单的任务来说听起来不是一个好习惯。

# jquery - jQuery，Internet Explorer 9 得到错误的不透明度

> ID：12361136
> 
> 赞同：2
> 
> 时间：2012-09-11T00:18:31.750
> 
> 标签：jquery, html, css

我正在使用[jQuery](http://en.wikipedia.org/wiki/JQuery)库，这是我的代码：

### CSS：

```
.card{
    hight: 100px;
    width: 100px;
    background-color: black;
    opacity: 0.2;
} 
```

### HTML：

```
<div class="card"></div> 
```

Javascript：

```
$(".card").hover(function () {
    alert($(this).css("opacity"))
}); 
```

opacity 选项适用于所有浏览器（该框具有透明度），但 Chrome、Firefox 和 Safari 向我显示了一个值为“0.20000002345”的弹出窗口。***只有***Internet Explorer 9 显示“1”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T19:04:26.157

使用`alpha filter`可以解决问题 - 在 IE9 中不需要它...除非 IE9 在兼容模式下查看页面（因此就像旧版本的 IE）。

如果 OP 将页面作为本地 Intranet 区域站点查看，则兼容模式是 IE9 中的默认查看模式（与 Internet 区域相反），因此`css opacity`无法正常工作。

在 IE9 中，转到：页面 -> 兼容性视图设置 -> 取消选中“在兼容性视图中显示 Intranet 站点”以将其关闭。

混合安全区域和兼容模式可以解释为什么 OP 出现问题，以及为什么在公共互联网上查看上述链接测试页面的任何人都会正确看到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T00:28:54.160

IE 中不透明度的 CSS（版本 <9）

`filter:alpha(opacity=20);`

jQuery 为它：

```
$(".card").hover(function () {
    alert($(this).css("opacity"));
    var filter = $(this).css('filter');
    if (filter) {
        filter = parseInt( filter.replace(')','').replace('alpha(opacity=','') ) / 100; }

        alert(filter);
});​ 
```

[jsFiddle 上的示例](http://jsfiddle.net/q3U5u/1/)

# session - CherryPy 会话身份验证？

> ID：12361137
> 
> 赞同：1
> 
> 时间：2012-09-11T00:18:42.013
> 
> 标签：session, authentication, cherrypy

我也可以设置会话变量并获取它们。[但是， cherrypy.lib.cptools.SessionAuth](http://docs.cherrypy.org/stable/refman/lib/cptools.html#cherrypy.lib.cptools.SessionAuth)的文档对我来说太*神秘*了，无法从中得到任何东西。我在代码中尝试了一些东西，但它要么导致错误，要么导致空白页。该网站上的教程没有进入会话身份验证。我确实找到了一个[关于在 CherryPy 2.x 中创建博客的旧教程](http://www.cherrypy.org/chrome/common/2.2/docs/book/chunk/ch03.html)，但与 CherryPy 3.2.2 一起使用似乎有点过时了。任何人都可以为我指出一个真正的教程或给出一个代码示例，以便我可以看到如何使它工作？我真的不知道还能去哪里寻找或询问，这令人沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T12:12:09.777

我使用此版本的身份验证。对我来说效果很好...

[https://github.com/cherrypy/tools/blob/master/AuthenticationAndAccessRestrictions](https://github.com/cherrypy/tools/blob/master/AuthenticationAndAccessRestrictions)

# c++ - WIN32_FIND_DATA - 获取绝对路径

> ID：12361140
> 
> 赞同：8
> 
> 时间：2012-09-11T00:19:14.330
> 
> 标签：c++, windows, filesystems, directory, absolute-path

我正在使用这样的东西：

```
std::string tempDirectory = "./test/*";

WIN32_FIND_DATA directoryHandle;
memset(&directoryHandle, 0, sizeof(WIN32_FIND_DATA));//perhaps redundant???

std::wstring wideString = std::wstring(tempDirectory.begin(), tempDirectory.end());
LPCWSTR directoryPath = wideString.c_str();

//iterate over all files
HANDLE handle = FindFirstFile(directoryPath, &directoryHandle);
while(INVALID_HANDLE_VALUE != handle)
{
    //skip non-files
    if (!(directoryHandle.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY))
    {
        //convert from WCHAR to std::string
        size_t size = wcslen(directoryHandle.cFileName);
        char * buffer = new char [2 * size + 2];
        wcstombs(buffer, directoryHandle.cFileName, 2 * size + 2);
        std::string file(buffer);
        delete [] buffer;

        std::cout << file;
    }

    if(FALSE == FindNextFile(handle, &directoryHandle)) break;
}

//close the handle
FindClose(handle); 
```

它打印相对目录中每个文件的名称`./test/*`。

有没有办法确定这个目录的绝对路径，就像`realpath()`在 Linux 上一样，不涉及任何像 BOOST 这样的第三方库？我想打印每个文件的绝对路径。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T00:38:59.913

见[`GetFullPathName`](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364963%28v=vs.85%29.aspx)功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T00:43:35.347

你可以试试[GetFullPathName](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364963%28v=vs.85%29.aspx)

或者您可以使用`SetCurrentDirectory`和`GetCurrentDirectory`。您可能希望在执行此操作之前保存当前目录，以便之后可以返回到它。

在这两种情况下，您只需要获取搜索目录的完整路径。API 调用很慢。在循环内部，您只需组合字符串。

# ruby-on-rails - 安装红宝石

> ID：12361141
> 
> 赞同：1
> 
> 时间：2012-09-11T00:19:21.757
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

我正在学习 ruby​​，我正在尝试安装 gems，但我在安装 gems 时遇到了一些麻烦：

```
$ sudo gem install rake
ERROR:  http://rubygems.org/ does not appear to be a repository
ERROR:  Could not find a valid gem … in any repository 
```

我不知道该怎么办。

我尝试按照本文中的说明进行操作：

> [http://jacob.stanley.io/2010/10/27/sudo-gem-install-behind-a-proxy/](http://jacob.stanley.io/2010/10/27/sudo-gem-install-behind-a-proxy/)

但不幸的是，我保存了更改`/etc/sudoers.tmp`（尽管我提到的文章告诉相反）。

请问你能帮我吗？

我的操作系统是 mac os x 10.7.4，我的 ruby​​ 版本是 1.8.7，$ which ruby​​ 的结果是：/usr/bin/ruby

# emacs - emacs gdb tab-completes 目录用空格而不是 /

> ID：12361142
> 
> 赞同：4
> 
> 时间：2012-09-11T00:19:22.840
> 
> 标签：emacs, gdb, gud

当我在 emacs (with) 中运行 gdb`M-x gdb`并尝试使用制表符完成目录名称时，它以空格而不是斜杠完成。因此，例如：

`(gdb) run/mn`

制表符完成到

`(gdb) run /mnt `

什么时候应该制表符完成

`(gdb) run /mnt/`

如果我在 emacs 之外运行 gdb，tab-completion 会按预期工作。

我在 debian 测试中运行 gdb 7.4.1-debian 和 emacs 23.4.1。

您可以在这里给我的任何帮助将不胜感激；这真的很烦人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:34:43.027

`gud-mode` retrieves the list of possible completitions by calling *gdb*'s `complete` command. In your example, the returned list would contain the following (assuming that there's only one directory in your file system that starts with "/mn"):

```
(run /mnt) 
```

The first part of each entry in the returned list is cut off, so that the remaining complete-list is

```
(/mnt) 
```

As you can see, this entry returned by *gdb's* `complete` command already lacks the trailing slash. Your only hope to fix this would be to either patch *gdb*'s `complete` command, or to patch Emacs' `gud-mode`, by somehow detecting that the completed word is a directory and then appending a slash (and suppressing the auto-insertion of the space character).

But of course, you could simply bind the `TAB` key to a different completion function, potentially one that falls back on the default `gud-gdb-complete-command`, but perhaps does a different kind of completion when called for.

For this, try putting the following in your .emacs file:

```
(defun my-gud-gdb-setup ()
  (define-key (current-local-map) "\t" 'my-gud-gdb-complete-command))

(defun my-gud-gdb-complete-command (&optional COMMAND PREDICATE FLAGS)
  (interactive)
  (unless (comint-dynamic-complete-filename)
    (gud-gdb-complete-command COMMAND PREDICATE FLAGS)))

(add-hook 'gdb-mode-hook 'my-gud-gdb-setup) 
```

This code binds a new function to the `TAB` key which first tries to expand the current word as a file, and only if that fails calls the default `gud-gdb-complete-command`.

# ruby-on-rails - 自定义 rake 任务无法在 rake db 任务后立即访问 ActiveRecord 数据？

> ID：12361144
> 
> 赞同：0
> 
> 时间：2012-09-11T00:19:33.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, rake-task

我有一批按顺序运行的 rake 任务：

```
task :batch_tasks => :environment do
  Rake::Task["db:drop"].execute
  Rake::Task["db:create"].execute
  Rake::Task["db:migrate"].execute
  Rake::Task["db:seed"].execute
  Rake::Task["db:test:prepare"].execute
  Rake::Task["custom_task_1"].execute
end 
```

这是 custom_task_1 中的内容：

```
task :custom_task_1 => :environment do
  puts "begin custom task"
  orders = Order.all #three records
  orders.each do |order|
    puts "Do something to Order\n"
  end
  puts "end custom task"
end 
```

当我运行上述批处理时，会发生以下情况：

```
rake batch_tasks
begin custom task
end custom task 
```

但是，如果我在批处理之后运行自定义任务，则会发生以下情况：

```
rake custom_task_1
begin custom task
Do something to Order
Do something to Order
Do something to Order
end custom task 
```

需要注意的一点是，当我在`rake batch_tasks`之后使用断点运行调试器时`rake db:seed`，检查会`eval Order.all`返回一个空数组`[]`。但是，在所有 rake 任务完成*后*`Order.all`立即有数据。

 *关于 rake db:seed 以及在下一个调用的任务中访问 ActiveRecord 数据，我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:36:06.010

由于 mu 建议太短，这与在迁移中使用模型之前需要重新加载模型有关。这样做的原因是您所有的 rake 任务都在一个公共环境中运行，即它只加载一次 rails。因此，表定义可能已经建立。您可能不得不使用`reset_column_information`来加载新值。

或者，您正在执行的任务序列看起来应该独立运行，这对于 capistrano 或 thor 来说可能是一个很好的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T03:37:40.250

所以快速解决方法是将`db:test:prepare`生产线移到批次的末尾。

我相信问题源于切换`development`到的环境`test`，然后自定义任务在最后一个环境中运行，然后有一个空的测试数据库。

该`db:seed`命令可能会将环境切换回 dev 并且自定义任务针对正确的数据库运行。

```
task :batch_tasks => :environment do
  Rake::Task["db:drop"].execute
  Rake::Task["db:create"].execute
  Rake::Task["db:migrate"].execute
  Rake::Task["db:seed"].execute
  Rake::Task["custom_task_1"].execute
  Rake::Task["db:test:prepare"].execute # <-- Moved after all other tasks
end 
```*

# tumblr - Facebook“喜欢”按钮/计数器在 tumblr 中不起作用

> ID：12361146
> 
> 赞同：1
> 
> 时间：2012-09-11T00:19:51.810
> 
> 标签：tumblr

maexculture.tumblr.com 是我的网站。

刚刚安装了facebook按钮，首先，它要求确认喜欢，然后在确认并按下“喜欢”后，它会切换到计数，然后回到零。“发送”功能有效。但是 Like 功能不是 - facebook 上没有任何内容，并且不计算在内。

这是我在页面顶部的内容：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:fb="https://www.facebook.com/2008/fbml"
      xmlns:og="http://ogp.me/ns#"
      xml:lang="en"
      lang="en"> 
```

以及具体的按钮：

```
<div class="facebook-button">
    <div class="fb-like" data-href="{Permalink}" data-send="true"
         data-layout="button_count" data-width="450" 
         data-show-faces="true"></div>
</div> 
```

我在头部标签附近也有这段代码

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s);
  js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=271140516272162";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:27:40.147

几个问题：

如果您的代码“靠近头部标签”，则很有可能 DOM 在执行时没有完全填充，因此它会错过检测某些元素。任何访问或操作现有 DOM 元素的脚本都需要出现*在*创建这些元素的任何 HTML 之后（例如，就在 之前`</body>`）。

`fjs = d.getElementsByTagName(s)[0]`真的很脆弱，因为它取决于一个特定的脚本元素是文档中的第一个元素。在该脚本上放置一个 ID，然后使用`getElementByID()`

为了回答您的评论，我的意思是（在 HTML 中）

```
<script id="fjs" type="text/javascript" src="..." </script> 
```

（在处理脚本中）

```
fjs=d.getElementByID('fjs'); 
```

换句话说，不要指望某个特定`<script>`元素是文档中的第一个元素，而是在其上贴一个`id`标签，以便无论它在哪里都可以找到它。

# node.js - MongoDB 组查询在终端中工作，在 nodejs 文件中引发错误

> ID：12361148
> 
> 赞同：1
> 
> 时间：2012-09-11T00:20:10.567
> 
> 标签：node.js, mongodb, collections, grouping

我有一个在终端查询我的 mongodb 集合时工作正常的查询，但是在我想要对数据进行分组的函数内部，我收到以下错误：

```
// QUERY WORKS:
/*
> db.twitterhashtags.group({ key: {"text":true}, initial: {sum:0}, reduce: function(doc, prev) {prev.sum +=1}});
 [
{
    "text" : "spnyc",
    "sum" : 1
},
{
*/
//RUNNING QUERY CAUSES THIS ERROR:
// TypeError: undefined is not a function
// at Collection.group.scope (/Users/propstm/Projects/nodeproject/node_modules/mongoskin/node_modules/mongodb/lib/mongodb/collection.js:1341:16)
//at g (events.js:185:14) 
```

这是引发上述错误的代码行。

```
db.collection("twitterhashtags").group({ key: {"text":true}, initial: {sum:0}, reduce: function(doc, prev) {prev.sum +=1}}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T07:57:21.973

驱动程序没有 100% 遵循控制台约定。文档有使用组的示例。

[http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#group](http://mongodb.github.com/node-mongodb-native/api-generated/collection.html#group)

但是，如果它是一个新应用程序并且您使用的是 2.2，则不应使用 group，除非您必须使用聚合框架来代替。

[http://docs.mongodb.org/manual/aggregation/](http://docs.mongodb.org/manual/aggregation/)

# gtk - GTK+ 将信号从 Widget 转发到 Widget？

> ID：12361155
> 
> 赞同：1
> 
> 时间：2012-09-11T00:20:46.773
> 
> 标签：gtk, signals

在 GTK+ 中，一旦我将一些回调连接到一些小部件信号，我如何从这些回调中将信号转发到另一个小部件？

似乎信号 api 没有提供与信号回调参数具有相同参数的函数，所以我不确定如何直接“转发”信号。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:25:56.277

我不确定术语“转发”是否适用于 glib 信号机制。实际上它是一个与事件相关的通知链，如果事件发生，订阅者的回调会被一一调用。我认为在您的情况下，如果您想将信号从 A 订阅者转发到 B 订阅者，如果您让订阅者 B 在订阅者 A 之后收到信号（即如果 B 在 A 之后被订阅），则转发将意味着相同，如果订单是相关的。或者，如果您需要订阅者 A 获取订阅者 B 的回调结果，那么您可以例如直接从 A 的回调中调用 B 的回调，而无需任何 GTK+/glib API。

# actionscript-3 - 如何使用变量作为 URL 的一部分

> ID：12361157
> 
> 赞同：0
> 
> 时间：2012-09-11T00:20:49.727
> 
> 标签：actionscript-3

我有一个变量

```
var qstAccessCode:String = "default"; 
```

和一个带有 URLRequest 的加载器

```
var qst:XML;
var qstLoader:URLLoader = new URLLoader();
qstLoader.load(new URLRequest("http://dl.dropbox.com/u/44181313/Qaaps/Audio/" + qstAccessCode + ".qst"));
qstLoader.addEventListener(Event.COMPLETE, processQST);

function processQST(e:Event):void {
    qst = new XML(e.target.data);
    trace("QST loading");
} 
```

我想使用*qstAccessCode*的值来完成 URL（所以我可以根据用户输入更改 URL - 如果没有输入，则使用“默认”）但我收到一个错误：

“1120：未定义属性 qstAccessCode 的访问”

这与范围界定有关吗？如何填写网址？提前致谢。

**编辑：**我还没有弄清楚这一点，所以我还要看看从用户输入函数生成完整的 URL，看看我是否得到 URLRequest 来将它作为一个变量来选择。如果对原始想法有任何进一步的评论，我将非常感谢阅读它们。干杯。

**编辑**：@Moorthy 我的 qstAccessCode 定义如下：

```
var qatAccessCode:String = "default";
var stageText:StageText = new StageText();
stageText.returnKeyLabel = ReturnKeyLabel.GO;
stageText.stage = this.stage;
stageText.viewPort = new Rectangle(225, 765, 200, 35 );

stageText.addEventListener(Event.CHANGE, onChange);
function onChange(e:Event):void 
{
    qatAccessCode = stageText.text; 
    trace(qatAccessCode);
} 
```

当我测试电影（Android 版 Air 3.2）时，它会跟踪键盘输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:42:47.460

`qstAccessCode`应该在与 URLRequest 相同的范围内定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:24:12.450

您必须定义`qstAccessCode`如下属性：

```
var qstAccessCode:string; 
```

`qstAccessCode`的值是你的 url 地址。

# ajax - 什么会导致 AJAX 调用的 HttpResponse 出现 500 错误？

> ID：12361158
> 
> 赞同：-2
> 
> 时间：2012-09-11T00:21:20.390
> 
> 标签：ajax, django

**编辑**市长对问题和文本进行了更改以使其清楚。事实证明，该错误是由一个非常愚蠢的错误引起的，即我忘记将 HttpResponse 导入到我的 views.py 中。由于在同一个views.py中我处理了另一个视图，我假设它是导入的。菜鸟失误。:(

**问题：** 我正在尝试通过 ajax 提交赞成票或反对票。显然，我认为大多数代码都已执行，然后在返回响应时失败。问题是django没有显示错误；我在终端中获得的唯一信息是：“POST /c/vote/ HTTP/1.1”500 10814。其中 /c/vote/ 是应该处理投票的 URL。

Chrome 中的控制台也没有多大帮助。我得到的错误是“加载资源失败：服务器响应状态为 500（内部服务器错误）”，然后如果我单击链接，我将被重定向到 /c/vote/，其中 django 返回 404。**注意**我我在不同的网址投票（即`/c/<country>/`）

我发现投票实际上正在被保存或删除，因此问题可能出在返回响应时。

我的模板（自定义模板标签以了解用户之前是否投票）：

```
<div class="vote_buttons" x:id="{{linkpost.pk}}">
    <a href="#" class="upVote{% if linkpost|is_up_voted_by:user %} voted{%endif%}" x:value="1" ></a>
    <a href="#" class="downVote{% if linkpost|is_down_voted_by:user %} voted{%endif%}" x:value="-1"></a> 
```

js 代码（我正在使用 JQuery）。变量 {{ vote_url }} 使用模板标签传递。：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".vote_buttons").bind("vote", function(event, value) {
            var vote_el = $(this);
            $.ajax({
                    type:'POST',
                url: '{{ vote_url }}',
                data: {

                    'pk': vote_el.attr("x:id"),
                    'delta': value
                },
                dataType: "json",
        success : function(data, textStatus, jqXHR) {
                    switch (data.voted_as) {
                        case 1:
                            vote_el.find("a.upVote").addClass("voted");
                            vote_el.find("a.downVote").removeClass("voted");
                       break;
                        case -1:
                            vote_el.find("a.upVote").removeClass("voted");
                            vote_el.find("a.downVote").addClass("voted");
                       break;
                    }
                },
            });
        });
        $('.upVote, .downVote').click(function(){
            $(this).parent().trigger("vote", $(this).attr("x:value"));
            return false;
        });
    });
</script> 
```

最后是视图。我添加了一些打印语句来确定它在哪里失败。感谢@Steven，代码一直执行到第 12 步。然后出现前面提到的错误。

```
def vote(request):
    """
    Likes or dislikes a linkpost.
    """
    print "Setp 1 ok!"
    #User must be authenticated to vote.
    if request.is_ajax():
        print "Step 2 ok"
        if request.method == 'POST' and request.user.is_authenticated():
            print "Step 3 ok"
            delta = request.POST['delta']
            # In case an error occurrs with delta value
            try:
                delta = int(delta)
                print "Step 4 ok"
            except ValueError:
                print "Error was value error"
                return HttpResponse("{'success': 'false'}")

            # You can only vote upwards or downwards    
            if not delta in (1, -1):
                print "Error was in delta"
                return HttpResponse("{'success': 'false'}")
            print "Step 5 ok"
            #We check if the linkpost actually exists!
            LinkPost = get_model('company', 'LinkPost')
            try:
                linkpost = LinkPost.objects.get(pk=request.POST['pk'])
                print "Step 6 ok"
            except LinkPost.DoesNotExist:
                print "Link object does not exist"
                return HttpResponse("{'success': 'false'}")

            #We check if the user voted before.
            Vote = get_model('company', 'Vote')
            try:
                vote = Vote.objects.get(linkpost = linkpost, listener = request.user)
                print "Step 7 ok!" 
            except Vote.DoesNotExist:
                print "Vote doesn't exists!" 
                vote = None

            # If there is already a vote
            if vote:

                print "Step 8."
                if vote.delta == delta:
                    vote.delete()
                else:
                    print "Step 9."
                    vote.delta = delta
                    vote.save()

            #There wasn't a vote, we create one.
            else:
                print "Step 10."
                Vote.objects.create(linkpost = linkpost,
                                           listener = request.user,
                                           delta = request.POST['delta'])

            response_dict = {'success' : 'true', 'voted_as': delta}          
            print "Step 12."    
            return HttpResponse(simplejson.dumps(response_dict), mimetype="application/json")
        else:
            print "User not authenticated"
            raise Http404('What are you doing here?')
    else:
        print "Request isn't ajax"
        raise Http404('What are you doing here?') 
```

任何解决问题的帮助将不胜感激！如果问题仍然不清楚，我将尝试澄清或添加尽可能多的信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:16:59.730

尝试：

```
response_dict = "{'success' : 'true', 'voted_as': '%s'}" % (delta) 
```

在代码中的 % 运算符之后有一个无关的 s 。它应该是`% (delta)`

此外，假设您设置了 DEBUG=True，您应该会发现您可以在浏览器开发人员工具中看到 Django 的信息错误页面（检查网络部分）。格式可能已关闭，但它仍然可以帮助您更快地解决代码错误。

* * *

编辑：OP 修正错字详述如下：

如果这不是您的问题中的错字：`except Vote.DoesNotExists:`

那么你可能会有更多的运气：

```
except Vote.DoesNotExist: 
```

# ruby - 带有标头的 Sinatra 流式响应

> ID：12361161
> 
> 赞同：6
> 
> 时间：2012-09-11T00:21:54.887
> 
> 标签：ruby, sinatra

我想通过 Sinatra 应用程序代理远程文件。这需要将带有标头的 HTTP 响应从远程源流式传输回客户端，但我无法弄清楚如何在`Net::HTTP#get_response`.

例如，这不会设置响应标头：

```
get '/file' do
  stream do |out|
    uri = URI("http://manuals.info.apple.com/en/ipad_user_guide.pdf")
    Net::HTTP.get_response(uri) do |file|
      headers 'Content-Type' => file.header['Content-Type']

      file.read_body { |chunk| out << chunk }
    end
  end
end 
```

这会导致错误`Net::HTTPOK#read_body called twice (IOError)`：：

```
get '/file' do
  response = nil
  uri = URI("http://manuals.info.apple.com/en/ipad_user_guide.pdf")
  Net::HTTP.get_response(uri) do |file|
    headers 'Content-Type' => file.header['Content-Type']

    response = stream do |out|
      file.read_body { |chunk| out << chunk }
    end
  end
  response
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:10:20.530

我可能是错的，但是在考虑了一下之后，在我看来，当从`stream`辅助块内部设置响应标头时，这些标头不会被应用到响应中，因为该块的执行实际上是被*deferred*。因此，可能会在开始执行*之前对块进行评估并设置响应标头。*

一种可能的解决方法是在流回文件内容之前发出 HEAD 请求。

例如：

```
get '/file' do
  uri = URI('http://manuals.info.apple.com/en/ipad_user_guide.pdf')

  # get only header data
  head = Net::HTTP.start(uri.host, uri.port) do |http|
    http.head(uri.request_uri)
  end

  # set headers accordingly (all that apply)
  headers 'Content-Type' => head['Content-Type']

  # stream back the contents
  stream do |out|
    Net::HTTP.get_response(uri) do |f| 
      f.read_body { |ch| out << ch }
    end
  end
end 
```

由于附加请求，它可能不适合您的用例，但它应该足够小，不会造成太大问题（延迟），并且它增加了如果该请求在发回之前失败，您的应用程序可能能够做出反应的好处任何数据。

希望能帮助到你。

# excel - Excel/VBA：如何保留包含第一次出现的 var 的第一行并删除其余的并重复？

> ID：12361164
> 
> 赞同：1
> 
> 时间：2012-09-11T00:22:00.780
> 
> 标签：excel, excel-2007, vba

**问题：**

我在 Excel 中有大约 50,000 行。每行包含一个单词 domain=[a-Z0-9] 其中 [a-Z0-9] 是一堆数字和文本（如 GUID）的占位符。这个域 ID 让我们称之为 abc123，它是唯一的。但是，在 50,000 行中，它不是表的唯一键，因此我需要通过删除域 ID = abc123 的所有其他行来使其唯一。但是我必须对所有域都这样做，所以我不能具体。我需要一个脚本来解决这个问题。域 ID 始终在同一列中，并且有许多不同的域 ID 重复出现。

**样本**

第 2 列
abunchofstuff3123123khafadkfh23k4h23kh* ***DomainID=abc123* ***

**伪代码**

```
//Whenever there is a value for domain in row i col 2    
//does it already exist in ListOfUniqueDomains?  
//if so then remove this row  
//else add to the ListOfUniqueDomains 
```

如何使用 Excel/VBA 做到这一点？

**更新的答案** 所以我真的很喜欢使用数据透视表的想法，但我仍然必须提取域 ID，所以我想我会在此处发布该部分的解决方案。实际上，我在谷歌搜索时从其他网站窃取了该功能，但我丢失了原始帖子以给予适当的信任。所以，如果那个人是你，请原谅我，但请拍拍自己的后背，如果你在我附近，我会请你吃午饭（每个人都很容易）。

所以在我的情况下，我有 2 个分隔符（=，&）用于`domain=abc123&`嵌入更长字符串中的字符串。因此，为了提取域 ID，我执行了以下操作。

```
 Public Function extract_value(str As String) As String
    Dim openPos As Integer
    Dim closePos As Integer
    Dim midBit As String
     On Error Resume Next
    openPos = InStr(str, "=") 'get the position of the equal sign
     On Error Resume Next
    closePos = InStr(str, "&") ' get the position of the &
     On Error Resume Next

    midBit = Mid(str, openPos + 1, closePos - 1) 
   'get the string that is between equal sign and before '&' however this seems  
   'greedy and so it 'picked up the last '&'.I used split to get the first occurrence
   'of '&' because that was how my string was designed.

   Dim s As String
    s = Split(midBit, "&")(0)
    extract_value = s

    End Function 
```

对于这样的事情，VBA 甚至是一个好主意吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:26:23.693

我已经为一些相当大的文件（50k 行）做了这个，我只需要提取唯一的元素。我所做的很简单：使用数据透视表。这样你甚至不需要 VBA，但如果你想进一步处理它，更新表和提取数据仍然非常简单。

我真正喜欢这种方法的原因之一是它既简单又强大。您无需编写循环或算法，它就在 Excel 功能中。

![在此处输入图像描述](../Images/f2c2b56bbdda14c97ae66b22182c3fdd.png)

# resize - JPanel 调整大小和滚动错误

> ID：12361167
> 
> 赞同：0
> 
> 时间：2012-09-11T00:22:45.003
> 
> 标签：resize, scroll, textarea, jpanel

我使用具有可变高度的文本区域和一些其他内容（示例代码中的组合框）填充窗口宽度。发生以下错误：
- 使用“innerPanel.setPreferredSize”时，当通过在文本区域中键入换行符或垂直调整窗口大小时，当文本区域高于窗口时，滚动条不会出现。
- 不使用“innerPanel.setPreferredSize”时，（如下示例代码注释所示），使用的swing元素在调整窗口宽度时会水平放大，但不会水平缩小。

```
JPanel innerPanel = new JPanel(new GridBagLayout());
JTextArea editArea = new JTextArea();
editArea.setLineWrap(true);
GridBagConstraints gbc = new GridBagConstraints();
gbc.fill = GridBagConstraints.HORIZONTAL;
gbc.weightx = 1.;
innerPanel.add(editArea, gbc);
JComboBox combo = new JComboBox();
gbc.gridy = 1;
innerPanel.add(combo, gbc);
JScrollPane scroller = new JScrollPane(innerPanel,
  JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
  JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
//innerPanel.setPreferredSize(new Dimension(50, 50));
JPanel outerPanel = new JPanel(new BorderLayout());
outerPanel.add(scroller);
frame.setContentPane(outerPanel); 
```

# php - 发布 WordPress 评论时如何执行自定义操作？

> ID：12361174
> 
> 赞同：1
> 
> 时间：2012-09-11T00:23:27.547
> 
> 标签：php, wordpress, cookies, setcookie

当访问者提交评论时，我正在尝试设置自定义 cookie，但我似乎无法使其正常工作。这是我在functions.php中的内容：

```
add_action('comment_post', 'ipro_set_comment_cookie');

function ipro_set_comment_cookie($comment) {
    setcookie("visitor_name", $comment->comment_author, time()+86400);
    setcookie("visitor_email", $comment->comment_author_email, time()+86400);
} 
```

我也尝试过更改`comment_post`-`wp_insert_comment`似乎都没有工作。我正在处理 WP 的操作参考： [http ://codex.wordpress.org/Plugin_API/Action_Reference#Comment.2C_Ping.2C_and_Trackback_Actions](http://codex.wordpress.org/Plugin_API/Action_Reference#Comment.2C_Ping.2C_and_Trackback_Actions)

...有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:00:19.670

查看[过滤器参考中的数据库写入](http://codex.wordpress.org/Plugin_API/Filter_Reference)

尝试类似的东西`comment_save_pre`

> 在更新/编辑评论数据之前应用于评论数据。函数参数：评论数据数组，索引为“comment_post_ID”、“comment_author”、“comment_author_email”、“comment_author_url”、“comment_content”、“comment_type”和“user_ID”。

这样它就设置为提交（所以它在你的错误处理开始后调用）

如果我正确理解您的问题，这应该有效：

```
add_action('comment_save_pre', 'ipro_set_comment_cookie');

function ipro_set_comment_cookie($comment) {
    setcookie("visitor_name", $comment->comment_author, time()+86400);
    setcookie("visitor_email", $comment->comment_author_email, time()+86400);
} 
```

# node.js - 获取 node.js 中当前定义的函数列表

> ID：12361184
> 
> 赞同：3
> 
> 时间：2012-09-11T00:24:42.413
> 
> 标签：node.js

是否有任何函数可用于列出 node.js 中当前定义的所有函数？我想创建一个这样的函数：

```
function getAllDefinedFunctions(){
    //return all the functions that are currently defined
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T00:30:12.070

您可以使用`for / in`循环遍历`this`（全局对象）中的所有属性并检查是否`typeof this[name]`为`'function'`.

# html - 无法对齐页脚中 p 旁边的链接

> ID：12361186
> 
> 赞同：0
> 
> 时间：2012-09-11T00:25:12.117
> 
> 标签：html, css

现在我正在尝试将我的链接与页脚中的 ap 对齐。由于某种原因，导航中的所有链接都很容易对齐，但是当我尝试在页脚中的 p 旁边放置一个链接时。链接转到底部。我试过让我的页脚内联，我试过不同的定位方法，我试过浮动。然而，通过去掉下面丑陋的白色条纹，制作页脚内联块确实稍微改善了这种情况。但我仍然需要让链接正确对齐。这是我的页脚的 html 代码

```
<div id="footer">

          <p><b>Copyright 2011 Hometown Bank, Inc.</b></p>
          <a href="google.com">Privacy Policy</a>
</div> 
```

这是页脚的css。

```
#footer
        {
            spadding-top: 1px;
            height: 7%;
            background-color:#CCDDEE;
            width: 100%;
            display:inline-block;
            position:

        } 
```

如果您需要更多代码或更多信息，请务必让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:46:55.383

嗨，现在你可以像这样轻松地做到这一点

**html**

```
 <div id="footer">

          <p><b>Copyright 2011 Hometown Bank, Inc.</b> <a href="google.com">Privacy Policy</a></p>

</div> 
```

***[现场演示](http://tinkerbin.com/qpB9S9VR)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T00:29:28.713

`<p>`将有填充/边距，默认为 display:block。因此，链接将出现在新行上。改为`<p>`a`<span>`并根据需要更新您的样式。

```
<div id="footer">
      <span style="font-weight:bold">Copyright 2011 Hometown Bank, Inc.</span>
      <a href="http://example.com/">Privacy Policy</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T00:35:37.217

[通过这种方式](http://jsfiddle.net/izaiasdotcom/KQujg/)编码，您可以很容易地做到这一点

# ios - 使用自定义 UITableViewCells 提高 ViewController 加载速度（破纪录）

> ID：12361190
> 
> 赞同：2
> 
> 时间：2012-09-11T00:26:06.847
> 
> 标签：ios, ios5, uitableview

我有一个 UIViewController 和一个 UITableView 加载速度非常慢（也许像糖蜜一样慢）我可以说这是由于在 ViewController 拥有的分组 UITableview 中为 UITableViewCells 设置了自定义背景图像。

我想我正在遵循其他 SO 问题中提到的建议： [提高 iPhone UITableView 滚动性能的技巧](https://stackoverflow.com/questions/1352479/tricks-for-improving-iphone-uitableview-scrolling-performance/1352594#1352594)

我还关注了这篇文章以确保我没有做一些愚蠢的事情： [Cocoa With Love Custom UITableView Drawing](http://cocoawithlove.com/2009/04/easy-custom-uitableview-drawing.html)

只要我不调用背景样式代码，性能就会提高。

按照建议，我正在执行所有这些步骤：

> *   由于设计的方式，我有 2 个不同的单元格变化，并且不能有统一的行高。无论单元格变化如何，行背景始终是 3 个图像中的 1 个，并且基于行索引。0：top_row_image，n-1：bottom_row_image，所有其他：middle_row_image
> *   我正在我的 ViewController 的 viewDidLoad 中加载用于背景的图像。
> *   我没有任何 drawRect 代码，因为我让单元格内的 UITextField 处理
> *   单元格的图层设置为不透明
> *   小区标识符正在被重用
> *   不从 NIB 文件加载单元格

基本上，我想使用不同的顶部、中间和底部行背景图像来设置表格的每个部分行的样式，具体取决于它是哪种类型的行类型。谁能建议一种更好的方法来在 UITableView 上自定义背景？

这是我的代码：

```
ViewController:
@property (nonatomic, weak) IBOutlet                            *tableview;
@property (nonatomic, strong, readwrite) UIImage                *topRowImage;
@property (nonatomic, strong, readwrite) UIImage                *middleRowImage;
@property (nonatomic, strong, readwrite) UIImage                *bottomRowImage;

@synthesize tableview = _tableview;    
@synthesize topRowImage = _topRowImage;         
@synthesize middleRowImage = _middleRowImage;
@synthesize bottomRowImage = _bottomRowImage;

// Load the images that will be used for the cell background ahead of time
- (void)viewDidLoad
{
    [super viewDidLoad];        

    // All of the images are 60x20 but my cells are 300x44 or 300x56
    UIEdgeInsets edgeInsets = UIEdgeInsetsMake(2, 4, 2, 4);        
    self.topRowImage = [[UIImage imageNamed:@"top_row.png"] resizableImageWithCapInsets:edgeInsets];        

    UIEdgeInsets edgeInsets = UIEdgeInsetsMake(0, 4, 0, 4);
    self.middleRowImage = [[UIImage imageNamed:@"middle_row.png"] resizableImageWithCapInsets:edgeInsets];            

    edgeInsets = UIEdgeInsetsMake(2, 4, 2, 4);
    self.bottomRowImage = [[UIImage imageNamed:@"bottom_row.png"] resizableImageWithCapInsets:edgeInsets];    
}

- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellId = [self getCellIdAt:indexPath];

    BaseCustomTableViewCell *cell = (BaseCustomTableViewCell *)[aTableView dequeueReusableCellWithIdentifier:cellId];

    if (cell == nil) 
    {
        if ([cellId isEqualToString:@"CellId1"])
        {
           cell = [[CustomTableViewCell1 alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId];     
        }
        else
        { 
           cell = [[CustomTableViewCell2 alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId];     
        }
    }

    // the following line seems to be the bottleneck
    [self styleBackground:cell indexPath:indexPath totalRows:totalRows];

    [cell configureData:myRowData];
}

- (void)styleCellBackground:(BaseCustomTableViewCell *)cell 
                  indexPath:(NSIndexPath *)indexPath
                  totalRows:(NSInteger)totalRows
{
    UIImage *backgroundImage = nil;    

    if (indexPath.row == 0)
    {
        // Top row of this section        
        backgroundImage = self.topRowImage; // ivar loaded during 'viewDidLoad'
    }
    else if (indexPath.row == totalRows - 1)
    {
        // Bottom row of this section        
        backgroundImage = self.bottomRowImage;
    }
    else {
        // Middle row of this section        
        backgroundImage = self.middleRowImage;
    }

    [cell updateRowBackground:backgroundImage];
}

@implementation CustomTableViewCell

-(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier])
    {        
        // Create my text field
        _textField = [[UITextField alloc] initWithFrame:CGRectZero];        
        _textField.backgroundColor          = [UIColor whiteColor];    

        self.backgroundColor                = [UIColor whiteColor];            
        self.contentView.backgroundColor    = [UIColor whiteColor];

        self.backgroundView = [[UIImageView alloc] init];        

        // not sure which of these should be set to opaque to ensure to meet criteria #4
        // 4\. Make your UITableViewCell's layer opaque (same goes for the content view if you have one)
        self.backgroundView.opaque = YES;
        self.layer.opaque = YES;
        self.opaque = YES;        
        self.contentView.opaque = YES;        

        [self.contentView addSubview:_textField];
    }
}

- (void)layoutSubviews
{    
    CGRect textFieldFrame = CGRectMake(10, 2, 278, 40);
    self.textField.frame = textFieldFrame;

    [super layoutSubviews];
}

- (void)updateRowBackground:(UIImage *)rowBackground
{
    ((UIImageView *)self.backgroundView).image = rowBackground;        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:08:24.253

我认为，如果您停止在每次调用`cellForRowAtIndexPath`.

听起来您有三种细胞（“顶部”、“中间”和“底部”）。您可以停止交替重复使用它们，因此每次使用时都必须重置它们的背景图像。

相反，您可以根据它们在表格中的位置使用不同的标识符来初始化表格单元格的实例。这样，您将创建一个带有“顶部”标识符的单元格、一个带有“底部”标识符的单元格，以及许多带有“中间”标识符的单元格。然后，您只能在初始化单元格时设置它们的背景图像。只要您尝试重用具有适当标识符的单元格，您就不再需要每次都更改其背景图像。

# java - 计算 x 立方 + y 立方 = z 立方 + 1

> ID：12361197
> 
> 赞同：1
> 
> 时间：2012-09-11T00:27:31.260
> 
> 标签：java, math

我正在尝试为方程找到一组给定的数字

```
x^3 + y^3 = z^3 +1 
```

在哪里

```
x < y < z 
```

下面的代码是我开始工作的。我目前遇到的问题是我生成的随机数仅在第一次运行程序时生成，我无法弄清楚为什么任何关于如何改进我的代码的帮助或线索将不胜感激。

```
import java.util.Random;

public class etude14 {

static int x = 1;
static int y = 2;
static int z = 3;
static int matchCount = 0;

public static void main(String[] args) {
    while(matchCount < 23){
     equatition(x, y, z);
    }
}

public static void equatition(int x, int y, int z) {

    double leftResult = Math.pow(x, 3) + Math.pow(y, 3);
    double rightResult = Math.pow(z, 3) + 1;

    if (leftResult == rightResult) {
        System.out.println("Match " + x + " " + y + " " + z);
        matchCount++;
        changeX();
    } else {
        System.out.println("No Match " + x + " " + y + " " + z);
        changeX();
    }
}

private static void changeX() {

     Random generator = new Random();
    int x2 = generator.nextInt(10000) + 1;
    int y2 = generator.nextInt(10000) + 1;
    int z2 = generator.nextInt(10000) + 1;

    if(x < y && y < z){
        System.out.println("WE HAVE NEW X,Y,Z");
        x = x2;
        y = y2;
        z = z2;
        return;
    }
    System.out.println("CHANGING X");
}
} 
```

第一个答案后的代码

```
import java.util.Random; 
```

公共课练习曲14 {

```
static int x = 1;
static int y = 2;
static int z = 3;
static int matchCount = 0;

public static void main(String[] args) {
    while (matchCount < 23) {
        equatition(x, y, z);
    }
}

public static void equatition(int x, int y, int z) {

    double leftResult = Math.pow(x, 3) + Math.pow(y, 3);
    double rightResult = Math.pow(z, 3) + 1;

    if (leftResult == rightResult) {
        System.out.println("Match " + x + " " + y + " " + z);
        matchCount++;
        changeX();
    } else {
        System.out.println("No Match " + x + " " + y + " " + z);
        changeX();
    }
}

private static void changeX() {

    Random generator = new Random();

    int x2 = 1;
    int y2 = 1;
    int z2 = 1;

    if (x < y && y < z) {
        System.out.println("WE HAVE NEW X,Y,Z");
        x = x2;
        y = y2;
        z = z2;
        return;
    } else {
        x2 = generator.nextInt(10000) + 1;
        y2 = generator.nextInt(10000) + 1;
        z2 = generator.nextInt(10000) + 1;
        System.out.println("CHANGING X");

    }

} 
```

}

输出

```
No Match 1 2 3 
```

我们有新的 X,Y,Z 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X比赛 1 1 1 改变 X 比赛 1 1 1 改变 X 比赛 1 1 1 改变 X 比赛 1 1 1 改变 X 比赛 1 1 1 改变 X 比赛 1 1 改变 X 比赛 1 1 1 改变 X 比赛 1 1 1 改变 X 比赛 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X 匹配 1 1 1 更改 X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:36:02.937

```
if(x < y && y < z){
    System.out.println("WE HAVE NEW X,Y,Z");
    x = x2;
    y = y2;
    z = z2;
    return;
} 
```

试试这个：

```
if(x2 < y2 && y2 < z2){
    System.out.println("WE HAVE NEW X,Y,Z");
    x = x2;
    y = y2;
    z = z2;
    return;
}
else{
    //repeat the procedure for generating random numbers.
    // You have one-sixth possibility but that is not quite much.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T00:45:41.290

这里有一个问题

```
if(x < y && y < z){
    x = x2;
    y = y2;
    z = z2;
    return;
} 
```

您已将静态整数 x、y 和 z 分别初始化为 1、2 和 3，因此您对 x < y 的测试为真且 y < z 为真，因此您执行将 x2 分配给 x 等的块。

但是对于随机选择的数字，不能保证 x2 < y2 和 y2 < z2。新值在您第一次点击该 if 语句时设置，但此后不太可能设置，除非您的随机 x2、y2 和 z2 碰巧按升序排列。

您需要的是一个循环`changeX()`来继续生成随机数，直到**然后**`x2 < y2 && y2 < z2`分配新的 x、y 和 z 值。就像是

 **```
do {
    ... // set new random values for x2, y2, and z2
} while (! (x2 < y2 && y2 < z2) ); 
```

但是请注意，此循环可能会运行*很长时间，*直到您碰巧按升序获得 3 个值。

随机值通常不是寻求方程解的好方法——您可以重复尝试相同的 3 个值。

给定 x2 和 y2 使得 x2 < y2 有可能解方程的 z2 值的下限。一种方法可能是

```
x2 = random number from 1 to 10,000
y2 = random number from x2+1 to 10,000
z2 = method_to_guess_a_lower_limit_for_z2(x2, y2); 
```

即使这种方法也非常幼稚——正如@HotLicks 在评论中提到的那样，牛顿近似方法的一些变化是一个更好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T00:46:30.507

当 z 变成一个小数时，您的随机发生器“停止”生成。

在这种情况下，`if(x2 < y2 && y2 < z2)`很少会验证条件，因此您的号码不会改变。

你需要类似的东西

```
private static void changeX() {

    Random generator = new Random();
    int x2 = generator.nextInt(10000) + 1;
    int y2 = generator.nextInt(10000) + 1;
    int z2 = generator.nextInt(10000) + 1;

    x = Math.min(Math.min(x2, y2), z2); // The Max of the 3 numbers

    z = Math.max(Math.max(x2, y2), z2); // The Min of the 3 numbers

    if (x != x2 && z != x2) { // The remaining middle number
        y = x2;
    } else if (x != y2 && z != y2) {
        y = y2;
    } else {
        y = z2;
    }

} 
```

或许

```
private static void changeX() {

    Random generator = new Random();

    List<Integer> listInt = new ArrayList<Integer>();

    int x2 = generator.nextInt(10000) + 1;
    listInt.add(x2);
    int y2 = generator.nextInt(10000) + 1;
    listInt.add(y2);
    int z2 = generator.nextInt(10000) + 1;
    listInt.add(z2);

    Collections.sort(listInt);

    x = listInt.get(0);
    y = listInt.get(1);
    z = listInt.get(2);

} 
```**

# java - 为同一个xml命名空间中的多个模式设置maven build for xjc？

> ID：12361202
> 
> 赞同：3
> 
> 时间：2012-09-11T00:28:01.330
> 
> 标签：java, maven, jaxb

我正在做一个项目，我们有基于 Jersey/JaxB 的序列化系统来与 Web 服务通信。有问题的服务返回包装在 Atom 提要中的数据。

系统的一个较旧部分为 Atom 编写了一个专门针对其服务 XSD 的一次性程序，该服务仅与它们的特定元素硬连接。我现在需要添加对新服务的支持，该服务正在做类似的事情（使用 Atom 作为“信封”），但使用明显不同的元素和内容架构。

我不想打扰现有的代码，所以理想情况下我想做与上一个项目相同的事情：为新服务正在使用的 Atom 部分定义我自己的模式。

我遇到了：

```
org.xml.sax.SAXParseException: 'feed' is already defined 
```

我显然达到了[XJC 发行说明](http://download.java.net/jdk7/archive/b123/docs/technotes/tools/share/xjc.html)`<jaxb:schemaBindings>`中描述的限制：每个命名空间拥有多个命名空间是不合法的。

有没有办法在我们的构建中进行设置，以便如果我有单独的 xjb 文件，我可以在两个不同的模式上独立运行 xjc 并为每个模式生成代码到单独的包中？如何解决此限制？

我们正在使用 maven jaxb 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T21:11:54.863

只是为了记录，我们最终做的是分别从模式生成代码，并签入生成的代码。由于 ATOM 模式没有改变，它是相当安全的。不过，不得不这样做很烦人。

# php - 在不同的控制器中应用和调用会话

> ID：12361206
> 
> 赞同：0
> 
> 时间：2012-09-11T00:28:25.650
> 
> 标签：php, zend-framework, session, authentication

我正在使用zend框架。我已经建立了一个简单的登录屏幕。当用户登录时，我想设置一个会话，然后在成员区域控制器的 init 函数中检查会话并授予访问权限，否则，重定向到登录屏幕。

我已经像这样设置了我的登录控制器，这将检查用户名和密码并设置会话：

```
if (isset($_POST['loginSubmit']) && $form->isValid($_POST)){
            $inputtedUsername = $_POST['username'];
            $inputtedPassword = $_POST['password'];
            if ($inputtedUsername == $username && $inputtedPassword == $password) {
                $loggedIn = new Zend_Session_Namespace('loggedIn');
                $loggedIn->success;
                $this->_forward('index', 'home');
            } else {
                echo 'invalid';
            }
        } 
```

我有一个家庭控制器，只有登录的用户才能看到，所以在 init 函数中我有： $loggedIn = new Zend_Session_Namespace('loggedIn');

```
if (isset($loggedIn->success)) {
            echo 'success';
        }else{
            $url = $this->view->url(array(
                'controller' => 'index',
                'action' => 'index'));
            header('Location:' . $url);
        }
    } 
```

当我使用正确的凭据登录时，它会将我重定向到其他功能中所述的登录屏幕。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:45:44.430

首先，您对 Zend_Session_Namespace 的使用是不完整的（您从未为命名空间赋值）：

```
$loggedIn = new Zend_Session_Namespace('loggedIn');//here you created a namespace
$loggedIn->success;//here you created a key in that namespace with no value 
```

您的代码似乎是结构化的方式，任何分配给的值`$loggedIn->success`都会返回 true，所以也许可以尝试：

```
$loggedIn = new Zend_Session_Namespace('loggedIn');//here you created a namespace
$loggedIn->success = true; 
```

虽然这可能会解决您当前的问题，但我想建议您查看两个真正有助于身份验证和授权的 Zend 组件。

第一个是[Zend_Auth](http://framework.zend.com/manual/1.12/en/zend.auth.introduction.html)，一个处理应用程序身份验证的组件，还将帮助处理用户会话持久性。[Rob Allen 有一个教程](http://akrabat.com/zend-auth-tutorial/)可以帮助您入门。

第二个是[Zend_Acl](http://framework.zend.com/manual/1.12/en/zend.acl.introduction.html)，访问控制列表组件，处理授权，谁有权访问什么。[从 Zend_Acl 开始的地方](http://zendguru.wordpress.com/2008/11/05/zend-framework-acl-with-example/)

# php - 如何使此代码向后兼容 Php 5.2 - 使用变量引用类

> ID：12361210
> 
> 赞同：1
> 
> 时间：2012-09-11T00:29:01.953
> 
> 标签：php, oop

有谁知道如何将此代码转换为与 PHP 5.2 兼容？

```
$myClass = 'ValidClassName';
$instance = $myClass::factory(array('arg' => 'value)); 
```

我知道在 PHP 5.3

> 从 PHP 5.3.0 开始，可以使用变量来引用类。变量的值不能是关键字（例如 self、parent 和 static）。

不知不觉中，我正在使用它。然后在 Php 5.2 环境中，我得到了错误

> 解析错误：语法错误，意外的 T_PAAMAYIM_NEKUDOTAYIM

所以我试图弄清楚如何将该代码转换为至少向后兼容 5.2 的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T00:35:51.843

只需用箭头引用类函数：

```
$className = 'ValidClassName';

$myClass = new $className();

$instance = $myClass -> factory(array('arg' => 'value)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:46:57.573

根据以下文件`call_user_func()`：

从 5.2.3 开始：

```
$instance = call_user_func($myClass.'::factory', array('arg' => 'value')); 
```

我认为这适用于 5.2.0：

```
$instance = call_user_func(array($myClass, 'factory'), array('arg' => 'value')); 
```

# javascript - 从 JSON 中删除引号

> ID：12361213
> 
> 赞同：-8
> 
> 时间：2012-09-11T00:29:32.217
> 
> 标签：javascript, json

当我打电话时`JSON.stringify`，我得到一个 JSON 字符串，如`[{"id":"001","name":"Mary"},{"id":"002","name": "Tom"}]`. 我怎样才能使它看起来像这样？

```
[
    {id: 7, name: "Ruby"},
    {id: 29, name: "C#"},
    {id: 31, name: "Fortran"},
    {id: 37, name: "Visual Basic"},
    {id: 41, name: "C"},
    {id: 43, name: "C++"},
    {id: 47, name: "Java"}
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:32:30.817

好的，显然你想去掉引号并很好地缩进？然后我会事先这样做：

```
function indent(str) {
    return str.replace(/\n/g, '\n\t');
}

function toPrettyObject(obj) {
    var ajsoln = []; // Actual JavaScript Object Literal Notation

    if(Object.prototype.toString.call(obj) === '[object Array]') {
        for(var i = 0; i < obj.length; i++) {
            ajsoln.push(indent(toPrettyObject(obj[i])));
        }

        return '[\n' + ajsoln.join(',\n') + '\n]';
    } else if(typeof obj !== 'object') {
        return JSON.stringify(obj);
    } else {
        for(var x in obj) {
            ajsoln.push('\t' + (/^[a-zA-Z_\$][\w\$]+$/.test(x) ? x : JSON.stringify(x)) + ': ' + indent(toPrettyObject(obj[x])));
        }

        return '{\n' + ajsoln.join(',\n') + '\n}';
    }
} 
```

# ios - 如何在委托函数中关闭警报视图 - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex

> ID：12361217
> 
> 赞同：1
> 
> 时间：2012-09-11T00:30:03.217
> 
> 标签：ios, delegates, uialertview, dismiss

在我的应用程序中，当用户单击警报视图中的按钮时，我需要关闭警报视图。我在我的应用程序中尝试过`[alertView dismissWithClickedButtonIndex:-1 animated:NO];`，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:35:43.967

没做什么。

> `alertView:clickedButtonAtIndex:`调用委托方法后，警报视图会自动关闭。

来自[UIAlertViewDelegate 协议参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html#//apple_ref/occ/intf/UIAlertViewDelegate)。

是什么让您认为您需要解除警报？您是否正在展示许多相同的 UIAlertView？

# mysql - 如何在 MySQL 中四舍五入到最接近的整数？

> ID：12361220
> 
> 赞同：97
> 
> 时间：2012-09-11T00:30:17.863
> 
> 标签：mysql, sql, rounding

我将如何舍入到 MySQL 中最接近的整数？

例子：`12345.7344 rounds to 12345`

mysql的`round()`功能四舍五入。

我不知道这些值和小数位有多长，可能是 10 位小数点后 4 位，可能是 2 位小数点后 7 位。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-09-11T00:32:08.253

使用[地板](https://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html#function_floor)：

```
SELECT FLOOR(your_field) FROM your_table 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-10-07T05:53:37.120

使用[FLOOR()](https://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html#function_floor)。

它会将您的小数四舍五入到**较小**的整数。例子：

```
SELECT FLOOR(1.9) /* return 1 */
SELECT FLOOR(1.1) /* return 1 */ 
```

### 其他有用的舍入

如果要将小数四舍五入到**最接近的**整数，请使用[ROUND()](https://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html#function_round)。例子：

```
SELECT ROUND(1.9) /* return 2 */
SELECT ROUND(1.1) /* return 1 */ 
```

如果要将小数四舍五入为大**整数**，请使用[CEILING()](https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_ceiling)。例子：

```
SELECT CEILING(1.9) /* return 2 */
SELECT CEILING(1.1) /* return 2 */ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T00:32:42.493

```
SELECT FLOOR(12345.7344); 
```

[在这里](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_floor)阅读更多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-04T05:45:59.603

`SUBSTR`会比`FLOOR`某些情况下更好，因为 FLOOR 有一个“错误”，如下所示：

```
SELECT 25 * 9.54 + 0.5 -> 239.00

SELECT FLOOR(25 * 9.54 + 0.5) -> 238  (oops!)

SELECT SUBSTR((25*9.54+0.5),1,LOCATE('.',(25*9.54+0.5)) - 1) -> 239 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-07T16:39:49.493

可以通过以下两种方式完成：

*   `select floor(desired_field_value) from table`
*   `select round(desired_field_value-0.5) from table`

第二种解释：假设12345.7344整数。所以，12345.7344 - 0.5 = 12345.2344，四舍五入的结果是 12345。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T00:33:36.830

尝试这个，

```
SELECT SUBSTR(12345.7344,1,LOCATE('.', 12345.7344) - 1) 
```

或者

```
SELECT FLOOR(12345.7344) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/1897)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-13T15:28:03.133

**两个查询都用于向下舍入 MySQL 中最接近的整数**

1.  选择楼层（445.6）；
2.  选择空（222.456）；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-04T19:28:34.043

如果你需要小数可以使用这个

```
DECLARE @Num NUMERIC(18, 7) = 19.1471985
SELECT FLOOR(@Num * 10000) / 10000 
```

输出：19.147100 清除：985 添加：00

或者使用这个：

```
SELECT SUBSTRING(CONVERT(VARCHAR, @Num), 1, CHARINDEX('.', @Num) + 4) 
```

输出：19.1471 清除：985

# c# - 在一个 NHibernate 查询中处理两个非直接相关的表

> ID：12361223
> 
> 赞同：0
> 
> 时间：2012-09-11T00:30:30.773
> 
> 标签：c#, nhibernate

我是 NHibernate 的新手，不确定我所问的是否有意义。

我正在尝试重写我目前拥有的一些代码：

```
public IEnumerable<Order> GetByQueue(OrderStatus orderStatus, Queue queue)
{
    var criteria = NHibernateSession.CreateCriteria(typeof (TaskDevice), "TaskDevice");

    //Pull up all Tasks where a Task's TaskDevice's SourceSiteID or DestinationSiteID are represented in a Queue's QueueLocations.
    foreach(QueueLocation queueLocation in queue.QueueLocations)
    {
        criteria.Add(
                Expression.Disjunction()
                    .Add(Restrictions.Eq("OriginalLocationID", queueLocation.ComponentID))
                    .Add(Restrictions.Eq("LocationID", queueLocation.ComponentID))
            );
    }

    //Get a hold on all the Tasks returned from TaskDevices.
    List<Task> tasks = criteria.List<TaskDevice>().Select(taskDevice => taskDevice.Task).ToList();

    //Return all Orders of the given Tasks whose OrderStatus matched the provided orderStatus.
    return tasks.Where(task => task.Order.OrderStatus == orderStatus).Select(task => task.Order);
} 
```

此代码当前依赖于 Queue 对象。我想更改此代码，以便提供 queueID 而不是 Queue 对象。表 QueueLocation 包含其列之一的“QueueID”。

这意味着我现在需要与数据库中的另一个表 QueueLocation 进行交互，加载具有与提供的 QueueID 匹配的 QueueID 的 QueueLocation，然后在不迭代 Queue 对象的情况下模拟添加限制。

任务不知道队列，队列不知道任务。它们与队列可能包含其 ComponentID 与任务的 OriginalLocationID 或 LocationID 匹配的 QueueLocation 的事实相关。

如果我将初始标准声明更改为：

```
var criteria = NHibernateSession
    .CreateCriteria(typeof (TaskDevice), "TaskDevice")
    .CreateCriteria("QueueLocation", "QueueLocation"); 
```

然后生成一个异常指示 NHibernate 在 TaskDevice 上找不到属性 QueueLocation。这是一个有效的例外——TaskDevice 不知道 QueueLocation。

我想知道如何使用 NHibernate 加载两个不相关的表，以便我可以在一个查询中通过 NHibernate 完全过滤我的限制。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:04:52.797

对于与模型中不相关的实体的查询，Criteria 不是一个好的 API。

请改用 HQL。

# sql - 使用 PostgreSQL 排序

> ID：12361225
> 
> 赞同：-1
> 
> 时间：2012-09-11T00:30:53.390
> 
> 标签：sql, postgresql, sql-order-by

有没有办法通过您未在 select 子句中选择的内容来对表格进行排序，例如：

```
Table Example

   Column  |    Type   |
-----------+-----------+
language   | character |
percentage | real      |
id         | integer   | 
```

所以我想理想地做这样的事情

```
SELECT DISTINCT language FROM Example ORDER BY percentage DESC; 
```

但这显然行不通。有没有一种方法可以让我实际按百分比对其进行排序，而无需在 SELECT 子句中实际选择百分比？

这个查询

```
SELECT DISTINCT language 
FROM countrylanguage 
ORDER BY percentage DESC; 
```

给出此错误消息：

> ```
> ERROR: for SELECT DISTINCT, ORDER BY expressions must appear in select list
> LINE 1: ...T DISTINCT language FROM countrylanguage ORDER BY percentage... 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T00:39:58.953

您无需选择一列对其进行排序。

```
create table language_pct (
  id integer primary key,
  language varchar(15) not null,
  percentage real not null,
  unique (language)
);

insert into language_pct values
(1, 'English', 15.3),
(2, 'French', 32.108),
(3, 'Russian', 12.88);

select language
from language_pct
order by percentage desc;

French
English
Russian 
```

如果你有两行英文，每行都有不同的百分比，你会让 dbms 做`select distinct...`什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:34:06.993

如果每种语言有多个条目，结果中每种语言只需要一行，并且仍想按百分比排序，您可能希望`GROUP BY language`使用`sum()`（或另一个[聚合函数](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html#FUNCTIONS-AGGREGATE-TABLE)，具体取决于您的实际数据）聚合百分比：

```
SELECT language, sum(percentage) AS total_percentage
FROM   countrylanguage
GROUP  BY language
ORDER  BY total_percentage DESC; 
```

如果您只希望每种语言有*一个具有**最大百分比*的条目，则可以使用`DISTINCT ON`但要区分的列*必须*在`ORDER BY`子句中排在第一位：

```
SELECT DISTINCT ON (language)
       language, percentage
FROM   countrylanguage
ORDER  BY language, percentage DESC; 
```

关于`DISTINCT ON`：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

现在要按语言排序，您必须将其放入子查询中：

```
SELECT * FROM (
   <query from above>
   ) AS sub
ORDER  BY percentage DESC, language; -- language only serves as tiebreaker 
```

或使用不同的路线`GROUP BY`：

```
SELECT language, max(percentage) AS max_percentage
FROM   countrylanguage
GROUP  BY language
ORDER  BY max_percentage DESC; 
```

或结合`DISTINCT`窗口[函数](http://www.postgresql.org/docs/current/interactive/functions-window.html#FUNCTIONS-WINDOW-TABLE)：

```
SELECT * FROM (
   SELECT DISTINCT
          language, max(percentage) OVER (PARTITION BY language) AS max_percent
   FROM   countrylanguage
   ) AS sub
ORDER  BY max_percent DESC; 
```

在这种情况下，最后一个将是最慢的。

# css - 边界半径与 -moz 边界半径

> ID：12361228
> 
> 赞同：1
> 
> 时间：2012-09-11T00:31:09.800
> 
> 标签：css

在为我的`<div>`. 既然`border-radius`CSS 属性在 Mozilla 中运行良好，为什么我们需要`-moz-border-radius`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T00:33:43.703

对于旧版本的 Firefox，即 Firefox 3.6 和更早版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T00:46:34.650

使用类似这样的特定于供应商的前缀有一段（简短的）历史，可以让早期的浏览器更容易地阅读代码。在 HTML5/CSS3 支持开始时，每个浏览器对元素的处理方式不同，因此边框半径如下：

```
.rectangle {
 -moz-border-radius:5px;
 -webkit-border-radius:5px;
 -o-border-radius:5px;
 border-radius:5px; 
```

}

如今，许多现代浏览器都接受像“border-radius”这样的样式（例如，最新的 Chrome、Safari、Firefox 和 IE9），因此正如前面提到的 minitech，这些样式现在用于支持旧版本的现代浏览器。

# firefox - 构建附加组件以隐藏 在 HTML 页面上阻止

> ID：12361236
> 
> 赞同：5
> 
> 时间：2012-09-11T00:32:41.370
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

有一个网页上有一些烦人的东西，我每次访问它时都想隐藏它。我认为这样做的一个好方法是为 Firefox 制作一个附加组件。

我以前从未这样做过，并且遇到了基于 Web 的 Firefox 插件构建器。我不太确定从这里去哪里。我知道这应该很容易做到这一点。我想我需要做的就是检查网站上是否使用了具有特定 id 的块，如果是，则从我的视图中删除/隐藏它。

这是解决这个问题的最好方法吗？如果没有，你有什么建议？如果是这样，你能给我一些提示来帮助我完成这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T01:19:09.400

对了，我明白了：

仅使用独立的 Firefox 附加组件使用以下代码：

```
exports.main = function() {

    var pageMod = require("page-mod");
        pageMod.PageMod({
        include: "*.ca",
        contentScriptWhen: 'end',
        contentScript: 'document.getElementById("DIVID").style.visibility="hidden";'
    });
}; 
```

换成`DIVID`你想要的就行了。

同样，在 Greasemonkey 中，只需将其添加到脚本中：

```
document.getElementById('DIVID').style.visibility='hidden'; 
```

我不想使用 Greasemonkey 的唯一原因是它不容易共享。但它的便利性是无与伦比的！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T21:21:43.657

1.  安装**最新的FF**
2.  安装**最新的 AdBlock Plus**
3.  转到网站右键单击特定元素，然后**检查元素（Q）**
4.  右下角有**Hide with ABP(AdBlock Plus)**按钮，点击它，然后**添加元素隐藏规则**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T00:38:11.287

您可以只使用[GreaseMonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)，这是一个非常有用的 firefox 插件。您可以使用在页面上运行的 JavaScript 编写自己的脚本。

但是，很可能有人已经为相关站点编写了一个脚本，您可以从[http://userscripts.org/](http://userscripts.org/)存储库安装该脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T14:51:12.313

在格式良好的 HTML 中，该`id`属性的任何特定值都应该在文档中最多出现一次。如果你的任务是寻找并摧毁一个反复出现的现象，它可能会被标记（如果有的话）带有`class`. 例如，Twitter 的“推广推文”就是这种情况。

```
 var promotedTweets = document.getElementsByClassName("promoted-tweet");
    for (k=0; k<promotedTweets.length; k++) {
     promotedTweets[k].parentNode.removeChild(promotedTweets[k]);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T08:15:17.667

[Adblock Plus](http://www.adblockplus.org)不会在这里解决问题吗？如果我没记错的话，您可以在任何给定网站上为其提供元素隐藏规则（基于类或 ID 属性）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-01T20:16:12.627

I used the up-and-coming [`jpm`](https://github.com/mozilla/jpm) tool to write this, and incorporated the suggestions here. It is specifically for filtering certain `div` tags here on StackOverflow—how fitting. The code and the `xpi` add-on file is at [Github](https://github.com/fasiha/NonHot-StackOverflow).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-02T19:04:22.877

Firefox 中的另一种方法是创建一个 userContent.css 文件并添加隐藏 div 的 css。

请参阅[https://superuser.com/a/319322/](https://superuser.com/a/319322/)并注意指出“从 Firefox 69 开始，您需要将 设置`toolkit.legacyUserProfileCustomizations.stylesheets preference`为`true`”的注释。

# jqgrid - jqGrid子网格数据未显示

> ID：12361241
> 
> 赞同：1
> 
> 时间：2012-09-11T00:33:23.130
> 
> 标签：jqgrid, subgrid

我看到有人问过同样的问题，但没有一个包含我可以使用的答案。我正在使用 jqgrid 4.4。主网格可以很好地加载数据，在子网格中我可以看到来自我的 java 控制器的响应，但不知道如何让它显示出来。

```
function(){ 
        jQuery("#subGrid").jqGrid({ 
            url: CONTEXT_ROOT+"/cartonPremium", 
            id:'gridtable', 
            datatype: "json", 
            height: 190, 
            jsonReader : {
                       root: 'gridModel', 
                       page: 'page',
                       total: 'total',
                       records: 'records',
                       repeatitems: false,      
                       id: '0'                     
             },              
            colNames:['idPremium','Name','Week', 'Departure Region' ],
            colModel:[ 
            {name:'idPremium',hidden:false, width:100},
            {name:'name',index:'name', width:300}, 
            {name:'sequence',index:'sequence', width:90}, 
            {name:'departureRegion',index:'departureRegion',width:100} 
            ], 
            hidegrid: false,
            rowNum:20, 
            rowList:[20,40,80], 
            pager: '#psubGrid', 
            sortname: 'name', 
            viewrecords: true, 
            sortorder: "desc", 
            multiselect: false, 
            sortable: true,
            autowidth: false,
            pagerButtons:true,
            navigator:true,
            //loadonce: true,
            altRows: true,
            viewsortcols: [true,'vertical',true],
            subGrid: true,
            // define the icons in subgrid 
            subGridOptions: { 
                "plusicon" : "ui-icon-triangle-1-e", 
                "minusicon" : "ui-icon-triangle-1-s", 
                "openicon" : "ui-icon-arrowreturn-1-e"//, 
                //expand all rows on load 
                //"expandOnLoad" : true 
            }, 
            subGridRowExpanded: function(subgrid_id, row_id) { 

                var subgrid_table_id, pager_id; 
                subgrid_table_id = subgrid_id+"_t"; 
                pager_id = "p_"+subgrid_table_id; 

                $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 

                jQuery("#"+subgrid_table_id).jqGrid({ 
                    url:CONTEXT_ROOT+"/premiumCasePackOption?rowId="+row_id, 
                    datatype: "json", 
                    colNames:['idCasePackOptions','cypharecommended','distributorapproved', 'height', 'length','statuscode','weight','width'],
                    colNames:['idCasePackOptions'],
                    colModel: [ 
                        {name:'idCasePackOptions', width:170,hidden:false}      
                    ], 
                    rowNum:8, 
                    pager: pager_id, 
                    sortname: 'idCasePackOptions', 
                    sortorder: "asc", 
                    sortable: true,
                    height: 400 
                }); 
            jQuery("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit:false,add:true,del:false}); 
            }   
        }
    );
    jQuery("#subGrid").jqGrid('navGrid','#psubGrid',{add:false,edit:false,del:false});
} 
```

);

这是来自服务器的响应

```
{"total":1,"page":1,"gridModel":[{"idCasePackOptions":1},{"idCasePackOptions":2},{"idCasePackOptions":3},{"idCasePackOptions":4},{"idCasePackOptions":5},{"idCasePackOptions":6}],"records":6,"rows":8} 
```

帮助！！我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T02:58:49.100

我终于开始工作了……耶！子网格中缺少的魔法

```
jsonReader: {
  root: 'gridModel',
  repeatitems: false
} 
```

所以工作版本看起来像这样

```
$(document).ready(
function(){ 
        jQuery("#subGrid").jqGrid({ 
            url: CONTEXT_ROOT+"/cartonPremium", 
            id:'gridtable', 
            datatype: "json", 
            height: '100%' ,
            mtype: 'POST',
            jsonReader : {
                       root: 'gridModel', 
                       page: 'page',
                       total: 'total',
                       records: 'records',
                       repeatitems: false,      
                       id: '0'                
             }, 
            colNames:['idPremium','Name','Week' ],
            colModel:[ 
            {name:'idPremium',hidden:false, width:100},
            {name:'name',index:'name', width:300}, 
            {name:'sequence',index:'sequence', width:90}
            ], 
            hidegrid: false,
            rowNum:20, 
            rowList:[20,40,80], 
            pager: '#psubGrid', 
            sortname: 'name', 
            viewrecords: true, 
            sortorder: "desc", 
            multiselect: false, 
            sortable: true,
            autowidth: false,
            pagerButtons:true,
            navigator:true,
            //loadonce: true,
            altRows: true,
            viewsortcols: [true,'vertical',true],
            subGrid: true,
            // define the icons in subgrid 
            subGridOptions: { 
                "plusicon" : "ui-icon-triangle-1-e", 
                "minusicon" : "ui-icon-triangle-1-s", 
                "openicon" : "ui-icon-arrowreturn-1-e",
                "reloadOnExpand" : true
            }, 
            subGridRowExpanded: function(subgrid_id, row_id) { 
                var subgrid_table_id, pager_id; 
                subgrid_table_id = subgrid_id+"_t"; 
                pager_id = "p_"+subgrid_table_id; 
                $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>"); 

                jQuery("#"+subgrid_table_id).jqGrid({ 
                    url:CONTEXT_ROOT+"/premiumCasePackOption?rowId="+row_id, 
                    datatype: "json", 
                    mtype: 'POST',
                    colNames:['idCasePackOptions','cypharecommended','distributorapproved', 'height', 'length','statuscode','weight','width'],
                    colModel: [ 
                        {name:'idCasePackOptions', width:170,hidden:false}, 
                        {name:'cypharecommended',index:'cypharecommended', width:170},
                        {name:'distributorapproved',index:'distributorapproved', width:170},
                        {name:'height',index:'height', width:100},
                        {name:'length',index:'length', width:80, align:"right"},
                        {name:'statuscode',index:'statuscode', width:90, align:"right"},        
                        {name:'weight',index:'weight', width:100,align:"right"},        
                        {name:'width',index:'width', width:100}     
                    ], 
                    rowNum:8, 
                    pager: pager_id, 
                    sortname: 'idCasePackOptions', 
                    sortorder: "asc",
                    viewrecords: true, 
                    sortable: true,
                    height: '100%' ,
                    autowidth: true,
                    jsonReader: {
                        root: 'gridModel',
                        repeatitems: false
                    }

                }); 
            jQuery("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit:false,add:true,del:false}); 
            }
        }
    );
    //jQuery("#subGrid").jqGrid('navGrid','#psubGrid',{add:false,edit:false,del:false});
} 
```

);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T14:34:51.997

如果您的给定函数之一不存在，您在子网格中的数据也不会显示。因此，如果您输入错字，则会显示空行：

```
afterSave: ReloadSubGrid, onError: UpdateFailed, delOptions:...
...
function ReloadSbuGrid(rowid, response) {
    ...
} 
```

错字：ReloadSbuGrid 应该是 ReloadSubGrid

# css - css：悬停伪类不起作用

> ID：12361244
> 
> 赞同：11
> 
> 时间：2012-09-11T00:33:47.103
> 
> 标签：css, pseudo-element

我有一个`:hover`没有产生任何结果的 CSS 伪类。

我在搞乱一些图片库代码，我设法得到这个不起作用的片段。我不知道为什么。这里关于大小的一些奇怪的 CSS 规则是因为这些 div 通常包含图像。为简单起见，我删除了图像，但保留了规则。

同一页面上的其他`:hover`元素正在工作。

我不确定对这个问题还能说些什么，因为这是非常基本的。我可能错过了一些非常明显的东西。

JSFiddle 这里 - [http://jsfiddle.net/GbxCM/](http://jsfiddle.net/GbxCM/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T00:43:26.500

在某些情况下（主要是`absolute`定位），您不能将`:hover`伪类应用于带有`display: inline-block;`. （如果您有 Chrome，请使用检查元素并`:hover`自己添加特征——注意，它会完美运行！浏览器只是不会注册`:hover`自身。）

因此，我继续将其替换为`float: left;`，添加了边距（以模拟`inline-block`外观），并将 更改`br`为`clear`. 结果在[这个 jsFiddle](http://jsfiddle.net/aLASn/)中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T00:38:54.180

如果我猜对了您要执行的操作，则无需更改定位或任何其他操作。我能看到你想要做的唯一改变是改变背景颜色。 [这是我为澄清该响应而制作的小提琴。](http://jsfiddle.net/GbxCM/4/)

为了便于阅读，这里是代码：

**HTML**

```
<div class="wrapper">
    <div class="squareswrapsolo"></div>
    <div class="squareswrapsolo"></div>
    <div class="squareswrapsolo"></div>
    <div class="squareswrapsolo"></div>
    <br>
    <div class="squareswrapsolo"></div>
    <div class="squareswrapsolo"></div>
    <div class="squareswrapsolo"></div>
    <div class="squareswrapsolo"></div>
</div>​ 
```

**CSS**

```
.wrapper {
    height: 600px;
    width: 600px;
    overflow: hidden;
    position: relative;
}

.squareswrapsolo {
    height: 100px;
    width: 100px;
    display: inline-block;
    overflow: hidden;
    background: #ccc;
}
.squareswrapsolo:hover {
    background: #000;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-26T13:56:01.923

对我来说问题出在我的**Chrome 设置**上，我在移动视图中使用 chrome 测试我的多平台 Web 应用程序，默认情况下禁用悬停事件。如图所示，您可以通过单击元素选项卡左上角的移动图标 来**禁用移动模式。**[![在此处输入图像描述](../Images/36753306bb10ea1dfb0d536f2bff9661.png)](https://i.stack.imgur.com/E4JPH.png)

此外，要检查您的`:hover`事件是否设置了所需的 css 属性，您可以从 chrome 强制触发悬停事件（通过检查`styles> :hov> hover`图像中标记为红色的悬停）并检查 :hover CSS 属性是否有效。对我来说它工作正常，所以我确信事件没有触发。

# ruby-on-rails - FactoryGirl - 验证失败：时区未包含在列表中

> ID：12361245
> 
> 赞同：1
> 
> 时间：2012-09-11T00:34:07.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capybara, factory-bot, rspec-rails

我正在使用 Rspec、FactoryGirl 和 Capybara。使用 ActiveSupport::TimeZone.us_zones 时。我为我进行了测试`requests/users_spec`，它甚至没有通过测试，因为它在工厂有问题。这是错误：

```
 Failure/Error: make_user_and_login
 ActiveRecord::RecordInvalid:
   Validation failed: Time zone is not included in the list
 # ./spec/support/user_macros.rb:3:in `make_user_and_login'
 # ./spec/requests/users_spec.rb:7:in `block (3 levels) in <top (required)>' 
```

这是我的设置：

**应用程序/模型/用户.rb**

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :remember_me, :username, :time_zone

  validates_presence_of :username
  validates_presence_of :time_zone
  validates_format_of :username, :with => /^(?=(.*[a-zA-Z]){3})[a-zA-Z0-9]+$/
  validates_uniqueness_of :email         
  validates_uniqueness_of :username, :case_sensitive => false
  validates_length_of :username, :within => 3..26
  validates_inclusion_of :time_zone, :in => ActiveSupport::TimeZone.us_zones
end 
```

**规范/spec_helper.rb**

```
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rspec'
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.use_transactional_fixtures = true
  config.infer_base_class_for_anonymous_controllers = false
  config.order = "random"
  config.include(MailerMacros)
  config.include(UserMacros)
end 
```

**规格/工厂.rb**

```
FactoryGirl.define do
  factory :user do
    username   'user1'
    time_zone  '(GMT-05:00) Eastern Time (US & Canada)'
    email      'user@example.com'
    password   'testing'
  end
end 
```

**规范/支持/user_macros.rb**

```
module UserMacros
  def make_user_and_login
    user = FactoryGirl.create(:user)
    visit login_path
    page.should have_selector('title', :text => 'Login')
    fill_in('Email',    :with => user.email)
    fill_in('Password', :with => user.password)
    click_button('Login')
    page.should have_selector('title', :text => 'Home')
  end
end 
```

当我为我的用户模型运行测试时，它通常会通过所有测试。为什么当它真的是时区时它不识别为时区？

**回答**

在我的 User.rb 模型中，我必须这样做：

```
validates_inclusion_of :time_zone, :in => ActiveSupport::TimeZone.us_zones.map(&:name) 
```

我的工厂：

```
factory :user do
  username   'user1'
  email      'user@example.com'
  time_zone  'Eastern Time (US & Canada)'
  password   'testing'
end 
```

我的观点：

```
<%= f.time_zone_select :time_zone, ActiveSupport::TimeZone.us_zones, {:prompt => "Select Your Time Zone *"} %> 
```

如果您有来自 Capybara 的测试请求：

```
page.select('(GMT-10:00) Hawaii', :from => 'Time Zone') 
```

祝你好运。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:12:38.553

在用户模型验证中将时区数组转换为字符串数组。

```
 validates_inclusion_of :time_zone, :in => ActiveSupport::TimeZone.us_zones.map(&:to_s) 
```

# c# - c# httplistener 只捕获本地 ip 请求

> ID：12361252
> 
> 赞同：2
> 
> 时间：2012-09-11T00:35:42.687
> 
> 标签：c#, networking, get, ip, httplistener

我的 c# httplistener 仅在我在本地网络中发送请求时才捕获请求（从使用本地 IP 的同一 wifi 上的机器）。

当我查看我的公共 ip（在谷歌中使用“我的 ip”）并通过该 url 输入获取请求时，我没有收到任何响应，并且我的事件不会在 Visual Studio 中触发

我正确地为它加上了前缀 `listener.Prefixes.Add("http://*:2999/");` 并设置了访问控制标头，它通过本地 url 请求完美地工作，只是不公开

此外，还有很多关于它不能在主机之外工作的问题，我的可以，只是不能在本地网络之外，因为公共 ip 没有得到响应

编辑：有没有办法做到这一点而不必在路由器上做任何事情？我在大学网络上，无法访问路由器端口设置

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T00:37:37.153

您需要将端口 2999 从路由器的 WAN 端转发到服务器。此过程是特定于制造商的，并且可以在网络上轻松搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T10:29:14.530

C# HttpListener 在本地计算机或本地网络（Windows7）上为我工作（使用正确的端口转发）。如果我访问 Internet 作为响应，HttpListener 总是给出错误 50 * 可能有禁令，但我不知道它在哪里配置。我不得不使用 TcpListener 并手动解析 HTTP 请求。

# oop - DDD：将逻辑放在聚合根中的位置

> ID：12361257
> 
> 赞同：2
> 
> 时间：2012-09-11T00:35:59.773
> 
> 标签：oop, domain-driven-design

仍在尝试 DDD 并有一些疑问，也许有人会帮助我。

假设我有 2 个模型：

```
public class Event
{
    User Creator;
    List<User> Members;
}

public class User {} 
```

我的问题是我看不到要实现的逻辑的位置。我需要 3 个动作：

*   用户加入活动
*   用户离开事件
*   创作者从活动中移除用户（只有创作者可以移除用户）

现在我刚刚创建了调用*Event.RemoveUser/AddUser的域服务**EventUserService*和 ie。检查*CurrentUser*（由*UserService*提供）是否是事件的创建者（有权删除其他用户）。也许这种方法是可以的，但我仍然觉得我应该把这个逻辑放到聚合根中，即。：

 ****   User.JoinEvent(Event) - 我可以基于某些逻辑将传递的事件添加到 User.Events 集合（双向）。
*   User.LeaveEvent(Event) - 类似于 JoinEvent。
*   User.RemoveUserFromEvent(User,Event) - 我可以在*User中拥有**CreatedEvents*集合，对于该集合中的*Event*，我可以调用*Event.RemoveUser(User)* - 这样我将确保只有创建者才能踢某人。或者
****   Evet.RemoveUser(UserToRemove) - 但我将如何确保它被创建者调用？***

 ***如果前两种方法看起来不错（至少对我而言），第三种方法将创建*Event.RemoveUser*（用于管理 Event 成员集合）方法，该方法可用于绕过*User.RemoveUserFromEvent*中的逻辑。

所以，最后我有两个问题：

1.  在这样的情况下，您的方法是什么，其中两个聚合根一起工作并且一个操作由驻留在它们两者中的逻辑确定？也许像*User.CanJoinEvent(Event)*这样的方法？
2.  如何创建像*User.RemoveUserFromEvent这样的“危险”点*

也许有人可以为我稍微说明一下，每一个帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:46:17.020

```
public class Event
{
    User Creator;
    List<User> Members;
} 
```

不要那样做。您正在违反 Demeter 法则，并且该`Event`班级无法控制该列表中的更改`Members`或该列表中的用户。相反，您应该在`Event`用于处理成员的类中定义方法。

现在，如果你做那个改变，即有这样的东西：

```
public class Event
{
    User Creator { get private set; }
    bool IsMember(string name);
    void AddMember(User user);
} 
```

你会突然有可靠的地方来生成事件。

> 但是我将如何确保它被创建者调用？

在 .NET 中，您可以使用它`Thread.CurrentPrinicpal`来获取有关已登录用户的信息。但是，它确实需要您实现自己的`IPrincipal`/ `IIdentity`。

请记住：您应该始终确保模型在 DDD 中处于有效状态。这通常意味着所有设置者都应该是私有的：http: [//blog.gauffin.org/2012/06/protect-your-data/](http://blog.gauffin.org/2012/06/protect-your-data/)******

# php - SESSION 变量之一被更改

> ID：12361259
> 
> 赞同：1
> 
> 时间：2012-09-11T00:36:40.703
> 
> 标签：php, session, session-variables

我正在开发一个具有每个角色的用户界面和功能的 Web 应用程序。在`users`表中，我有一`role`列 an `enum`，它存储每个用户的角色。在登录脚本中，如果找到用户/通行证的匹配记录，我将`SESSION['role']`变量设置为记录的角色字段的值。除了角色，我还存储了其他一些数据，例如其他`SESSION`变量中的 display_name。然后，`SESSION['role']`在整个应用程序中用于向浏览器发送正确的用户界面并强制执行访问规则。

这一切在我的本地主机上运行良好，但在远程服务器上，`SESSION['role']`只是第一次运行 - 即正确的用户界面被发送到浏览器。在那之后，`SESSION['role']`以某种方式更改为不同的（现有）角色，因此访问规则不允许这些功能可用。更离奇的是，只有`SESSION['role']`变化和`SESSION['displayname']`/或`SESSION['username']`保持不变。

我没有`SESSION`在除`login.php`. 非常感谢我应该寻找潜在原因的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:58:03.807

检查您的数据库结构是否相同。最值得注意的是 ENUM 具有相同的角色/标识符。如果您指定的值无效，SQL 将在“STRICT MODE”中失败，否则它将回退到其中一个值。

（提示：总是在“严格模式”下开发，除非有什么理由不这样做。那么你在分发直播时不会被串起来）。

如果您有一个包含角色的单独表（例如 LEFT JOIN），请也检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:07:49.177

我发现了问题。在 prod 服务器`register_globals`上（顺便说一句，这对于 PHP 5.3.6 来说是一个无味的选择）。

但是，我并不怀疑这是原因，因为我不知道它是如何影响超级全局变量的。我认为`register_globals`on 相当于在所有脚本的开头添加这段代码：

```
foreach($_SESSION as $kn => $val) eval("$kn = $val;");
same for other super globals ... 
```

换句话说，我认为`$_SESSION['role']`定义和等于与`'Manager'`这一行具有相同的效果：

```
$role = $_SESSION['role'];
or
$role = 'Manager'; 
```

但这只是*故事的一半，*因为下面的第二行

```
$role = $_SESSION['role'];
$role = 'Something else'; 
```

不影响`SESSION['role']`它，它的价值仍然是它原来的样子。但是如果`register_globals`打开，改变`$role`就会改变`$_SESSION['role']`。

# c - linux终端挂在bash脚本上

> ID：12361261
> 
> 赞同：1
> 
> 时间：2012-09-11T00:36:50.553
> 
> 标签：c, bash

我是一名学生，这是我第一次接触 bash 脚本，除了为 c 编写一个简单的 Makefile。

```
#!/usr/bin/sh
gcc -g -std=c99 -Wall -c field.c 
gcc -g -std=c99 -Wall -c testField.c 
gcc -g field.o testField.o -o testField 
#testField get 0xa 0 1 > PA1output.txt 
#testField get 0xaa 0 3 >> PA1output.txt 
```

是我的脚本。我想将 field.c 和 testField.c 编译成可执行的 testField。无论我是否将最后两行注释掉，它们的 linux 终端都会挂起，并且在 10 秒没有发生任何事情后，我按 ctrl+c 停止它。最终我想将输出重定向到 PA1output.txt，然后在文件末尾连接一些东西，但我想每次都重写文件内容。

据我了解， > 重写指定文件的内容，而 >> 连接到末尾。

这不是我的作业，我想自动化测试我的其他作业。'testField get 0xaa 0 3 是我的 c 程序的参数。'

我试过[Bash 脚本挂起](https://stackoverflow.com/questions/6971257/bash-script-hangs) ，但这并没有完全回答我的问题。

我的脚本被称为“as”，以便于输入。

为什么终端会挂起，如何让脚本执行上述操作？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T00:51:17.057

您的系统有另一个名为“as”的程序，它是一个汇编程序。您可能正在运行它而不是您的脚本，它挂起是因为汇编程序正在等待来自您的终端的输入。

如果您坚持保留名称，则应使用完整或部分路径名（如“./as”）运行脚本，以便运行正确的程序。

您可能会发现，如果没有第一行开头的“#”，您的脚本将无法运行。但是，另一种运行脚本的方法是从命令行执行 'sh ./as'，它不依赖于 #! 线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:17:24.790

正如 Jeremy 所描述的，这很可能是名称冲突。

如果你是从命令行运行你的脚本（我真的希望你是这样），你不必害怕给你的脚本（以及所有的文件名）提供更长但更具体的名称。linux 上的大多数（如果不是全部）命令行界面都有某种形式的选项卡扩展。您所要做的就是输入足够多的名称以使其唯一，然后按 [Tab]，shell 应该会为您完成名称。

这是[对 Bash 的更彻底的解释](http://tldp.org/LDP/abs/html/tabexpansion.html)。

# algorithm - R中的面部识别

> ID：12361264
> 
> 赞同：0
> 
> 时间：2012-09-11T00:37:24.593
> 
> 标签：algorithm, r

> **可能重复：**
> [R中的人脸识别](https://stackoverflow.com/questions/9105379/face-recognition-in-r)

有没有人在 R 中创建任何面部识别程序？我正在制作一个粗略的版本，但想看看是否还有其他东西。

# c# - XElement.Elements().Select() 原因尝试明确指定类型参数

> ID：12361268
> 
> 赞同：2
> 
> 时间：2012-09-11T00:38:06.113
> 
> 标签：c#, linq-to-xml

我遇到了一个奇怪的问题，想知道可能是什么原因造成的。

我有以下 XML：

```
<categories>
  <category Name="Generic" Id="0"></category>
  <category Name="Development Applications" Id="2"></category>
  <category Name="Standard Templates" Id="5"></category>      
  <category Name="Testing" Id="9" />
</categories> 
```

以及以下代码来创建“类别”列表：

```
var doc = XDocument.Load("categories.xml");

var xElement = doc.Element("categories");
if (xElement == null) return;

var categories = xElement.Elements().Select(MapCategory).ToList(); 
```

在哪里：

```
private static Category MapCategory(XElement element)
{
    var xAttribute = element.Attribute("Name");
    var attribute = element.Attribute("Id");
    return attribute != null && xAttribute != null 
        ? new Category(xAttribute.Value, attribute.Value) 
        : null;
} 
```

在编译之前没有任何错误/警告等表明这是错误的，但是我在编译后收到以下消息但仍然没有红色下划线：

> 无法从用法中推断方法 'System.Linq.Enumerable.Select<TSource,TResult>(System.Collections.Generic.IEnumerable, System.Func<TSource,TResult>)' 的类型参数。尝试明确指定类型参数。

现在，如果我将有问题的行更改为以下内容，一切都很好：

```
var categories = xElement.Elements().Select<XElement, Category>(MapCategory).ToList(); 
```

我会认为这`Select<XElement, Category>`是多余的？？？ReSharper 也同意我的看法。

为了确保，我删除了 MapCategory 并将其替换为以下内容，但这次我得到了红色下划线和一个编译错误：

```
var categories2 = doc.Element("categories").Elements().Select(element =>
            { new Category(element.Attribute("Name").Value, element.Attribute("Id").Value); }).ToList(); 
```

只是为了增加我的困惑，我让另一位开发人员也尝试了代码，他根本没有遇到任何编译错误。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T00:48:23.170

> 只是为了增加我的困惑，我让另一位开发人员也尝试了代码，他根本没有遇到任何编译错误。

我的猜测是您使用的 C# 编译器版本与您的同事不同。

这不仅限于 LINQ to XML 或`Elements()`调用的使用。如果您有以下情况，我相信您会看到相同的行为：

```
private static string ConvertToString(int x) { ... }

...
IEnumerable<int> values = null; // We're only testing the compiler here...
IEnumerable<string> strings = values.Select(ConvertToString); 
```

基本上，使用方法组转换的泛型方法调用的类型推断在 C# 4 编译器中得到了改进。（我认为C# 5 编译器*可能*也有所改进，但我记不清了。）明确指定类型参数的另一种方法是使用 lambda 表达式：

```
...Elements().Select(x => MapCategory(x))... 
```

# java - 限制对字段的并发访问

> ID：12361271
> 
> 赞同：2
> 
> 时间：2012-09-11T00:38:26.100
> 
> 标签：java, concurrency, atomic, atomicreference

因此，在我正在编写的程序中，我使用双向广度优先搜索来搜索图形。为此，我在 1 个线程中运行 1 个广度优先搜索，然后在另一个线程中运行一个。现在，当另一个搜索中的一个元素被命中或找到目标时（这从未真正发生过，但以防万一它出于某种原因......），就说搜索找到了最佳解决方案。

我遇到的问题是，我需要将此最佳解决方案保存到一个字段中，因为我需要继续找到所有解决方案，但是由于两个线程同时命中它，该字段值变得混乱（我认为）。

有没有办法阻止对最后到达那里的线程的访问？我尝试过使用 AtomicReference 及其 compareAndSet 方法，但这并没有成功。价值仍然被搞砸了......

顺便说一句，我使用的是 java，而对于线程，我使用的是 Callable 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:58:11.947

由于线程的随机顺序，您似乎有可能`Livelock`或正在发生这种情况。[`Race condition`](https://en.wikipedia.org/wiki/Race_condition)我建议采取不同的方法。（否则在某些时候你会遇到[`NP-Complete`](https://en.wikipedia.org/wiki/NP-complete)）。

> 我遇到的问题是我需要将这个**最佳解决方案**保存到一个字段中。**因为我需要继续寻找所有的解决方案**，但是由于两个线程同时命中它，所以字段值变得混乱（我认为）。

有一种方法可以大大提高您当前的技术。您不需要查看每个解决方案，采用 a[`Greedy Approach`](https://en.wikipedia.org/wiki/Greedy_algorithm)并使用 a [`Paralleled version`](http://www.cslab.ece.ntua.gr/~anastop/files/papers/mtaap09dijkstra.pdf)of [`Dijkstra's Shortest Path Algorithm`](http://en.wikipedia.org/wiki/Dijkstra's_algorithm)。

**最短路径（或在您的情况下为*Optimal Solution*）**

> Dijkstra 算法是一种图搜索算法，用于解决具有非负边路径成本的图的单源最短路径问题，生成最短路径树。该算法通常用于路由和作为其他图算法中的子程序。

**线性实现**

原始算法图1。（[来源](http://www.cslab.ece.ntua.gr/~anastop/files/papers/mtaap09dijkstra.pdf)）

[![并行 PDF 算法 线性](../Images/ce1a0a4aa5d9c9bed24d9a93a656c00c.png)](https://i.stack.imgur.com/V9wOf.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/w4b43s1r.34o.png)）]

Java 实现可以在[这里](https://web.archive.org/web/20130905005651/http://renaud.waldura.com:80/doc/java/dijkstra/)和[这里找到](http://www.vogella.com/articles/JavaAlgorithmsDijkstra/article.htm)

*   *我认为这些实现是基于 BSP 树（但你应该明白）*

**并行实现**

并行算法 图 2.（[来源](http://www.cslab.ece.ntua.gr/~anastop/files/papers/mtaap09dijkstra.pdf)）

*   `recursion`如果您想获得优雅，还有其他方法可以加快算法速度。

[![并行 PDF 算法原子](../Images/3f066d01f32ebfaf3eb80842c99be749.png)](https://i.stack.imgur.com/zm6pm.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/15ndcts5.p3a.png)）]

如果您仍然遇到问题，另一个想法可能是使用不同的并发数据结构，例如`Map Reduce`或`Hadoop`代替`Threads`用于搜索 a `Binary Tree`，来修复您的搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:00:04.270

**注意：不是答案，只是检查算法的有效性**

您的算法实际上是否产生最短路径？考虑这张图：

```
 1A - 2A - 3A - 4A - 5A
  \             /     
   -- 2B ------- 
```

并假设完美交织（每个线程以完全相同的速率访问节点）。线程`X`开始于`1A`，线程`Y`开始于`5A`。订单如下所示：

```
X visits 1A +{2A, 2B}
Y visits 5A +{4A}
X visits 2A +{3A}
Y visits 4A +{3A, 2B}
X visits 2B +{4A}
Y visits 3A +{2A}
X visits 3A (overlap; shortest path is computed to be 4) 
```

但是我们通过检查知道最短路径是 3: `1A - 2B - 4A - 5A`。

您的方法如何防止这种情况发生？无论您采用哪种方法检查重复项，我总是看到`3A`之前的重叠`2B`。在决定最佳路径长度之前，您是否总是完成“关卡”？

# android - 用黑色阴影画圆环

> ID：12361274
> 
> 赞同：2
> 
> 时间：2012-09-11T00:39:07.287
> 
> 标签：android, geometry, shadow

我正在尝试绘制一个带有黑色阴影边框的环。当我使用像 RED 这样的任何颜色时，我可以通过自定义视图来实现这一点，但我想要的是一个带有黑色阴影边框的透明圆圈。

```
Paint mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setColor(Color.RED);
    mPaint.setShadowLayer(5.5f, 6.0f, 6.0f, Color.BLACK);

protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawCircle(70, 70, 50, mPaint); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:21:29.390

这里发生的是它正在绘制一个*填充的*透明圆圈，并将阴影层设置为那个。由于圆形是透明的，您可以通过它看到对象的整个阴影，而不仅仅是您正在寻找的边缘。阴影是黑色的，所以看起来整个圆圈都是黑色的。

尝试将 Paint 样式设置为 Stroke。那应该让中间透明，只画外环的阴影。它可能会在两个方向（内部和外部）绘制阴影，因此您可能需要相应地调整阴影半径。

```
mPaint.setStyle(Paint.Style.STROKE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T21:31:36.487

You'll need to effectively draw the shadow using a fully transparent colour, as you've found so far, then remove that coloured center using PorterDuff.Mode.CLEAR - leaving just the shadow on the outside.

```
PorterDuffXfermode mXferMode = new PorterDuffXfermode(PorterDuff.Mode.CLEAR);

// draw the src/dst example into our offscreen bitmap
int sc = canvas.saveLayer(0, 0, 70 + 50, 70 + 50, null,
                                      Canvas.MATRIX_SAVE_FLAG |
                                      Canvas.CLIP_SAVE_FLAG |
                                      Canvas.HAS_ALPHA_LAYER_SAVE_FLAG |
                                      Canvas.FULL_COLOR_LAYER_SAVE_FLAG |
                                      Canvas.CLIP_TO_LAYER_SAVE_FLAG);

canvas.drawCircle(70, 70, 50, shadowPaint);
shadowPaint.setXfermode(mXferMode);
canvas.drawCircle(70, 70, 50, shadowPaint);
shadowPaint.setXfermode(null);
canvas.restoreToCount(sc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:32:25.093

您的目标是 Android SDK 11 或更高版本吗？由于带有硬件支持的 HoneyComb 阴影渲染已被禁用，因此您必须为该层打开软件渲染。你必须注释你的函数来设置这样的绘画：

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private void setUpPaint(){
    mPaint.setAntiAlias(true);
    mPaint.setColor(Color.RED);
    mPaint.setShadowLayer(5.5f, 6.0f, 6.0f, 0x80000000);

    /* --- for android:minSdkVersion="11" --- */
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    setLayerType(LAYER_TYPE_SOFTWARE, mPaint);
}
} 
```

# php - array_sum 没有计算

> ID：12361280
> 
> 赞同：-1
> 
> 时间：2012-09-11T00:42:11.967
> 
> 标签：php, arrays

看来我的 array_sum 函数加起来不正确。结果是“0”，这似乎表明没有添加任何项目。

```
 $a = array();
foreach ($ct->data as $key => $value) {

    $a[$ct->data[$key][3]];
}

$totalAmount = array_sum($a); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T00:44:09.437

您实际上并没有将任何内容放入数组中，您只是在数组中设置一个值，将值中所需的值提供给键并将值保留为空。尝试`$a[] = $ct->data[$key][3];`

# php - 显示菜单项

> ID：12361282
> 
> 赞同：0
> 
> 时间：2012-09-11T00:42:13.623
> 
> 标签：php, javascript, joomla, joomla2.5

我有一个 Web 应用程序，它使用 Dynamic Drive 的 javascript + css 在我的 Joomla 应用程序中创建一个菜单。看起来像这样

首页-关于我-联系我

关于我，有子项{我的图片、我的博客、我的一切} 在我的一切中，还有其他子项{我最喜欢的音乐、我的熟食}

在 Joomla 2.5 管理系统中，我已经创建了它们并将它们设置为子级，当我的鼠标悬停在 AboutMe 上时，会显示子菜单级别 1，但是当我的鼠标悬停在 My Everything 上时，什么都没有显示。这是查询字符串代码：

> $query = "SELECT * FROM #__menu WHERE parent_id = ".$parent." and language='".$language."' and published = 1" ;

但它只获得关于我的子项。

你知道如何获取 Mypicture 的所有子项吗？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:47:36.693

您必须再次运行查询，才能找到带有 parent_id 的“我的一切”菜单。“我的一切”子菜单与其他子菜单没有相同的父项

# wpf - 网格是左对齐的。如果第一列，如何始终显示第二列。是不是太宽了？

> ID：12361287
> 
> 赞同：0
> 
> 时间：2012-09-11T00:42:46.463
> 
> 标签：wpf, silverlight, windows-phone-7, xaml

我有什么：

```
<Grid HorizontalAligment="Stretch">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="16" />
    </Grid.ColumnDefinitions>
  <TextBlock Text="Text" Grid.Column="0" />
  <Grid Background="Black" VerticalAligment="Stretch" Grid.Column="1">
    <TextBlock Text="*" />
  </Grid>
</Grid> 
```

结果：

```
__________
|        |
|Text *  |
|________| 
```

我有一个问题：当文本太宽时，`*`会离开屏幕。

```
__________
|        |
|long Tex|t *
|________| 
```

那么，如果它离开屏幕，如何指定`*`应该覆盖部分？`Text`

```
__________
|        |
|long Te*|t
|________| 
```

第二个问题：我不能使用 MaxWidth `Text`，因为`Grid`它具有动态宽度。

**UPD**：如果我将`Width="*"`用于第一列，我会得到这个：

```
__________
|        |
|Text   *|
|________| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:28:17.867

使用以下

```
<ColumnDefinition Width="*" /> 
```

代替

```
<ColumnDefinition Width="Auto" /> 
```

编辑：这是完整的代码：

```
<Grid >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="16" />
        </Grid.ColumnDefinitions>

        <TextBlock Text="123 Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really 
                   Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really 
                   Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really Text Long. Really 
                   " Grid.Column="0"/>
        <Grid Grid.Column="1">
                <TextBlock Text="*" />
            </Grid>
    </Grid> 
```

输出如下。123是正文的开始。这不是你所期待的吗？

![输出](../Images/aba37b1f10b1cad3c2a49b5651c24877.png)

# eclipse - 如何使用快捷方式切换到 Eclipse 中的其他编辑器窗格？

> ID：12361288
> 
> 赞同：5
> 
> 时间：2012-09-11T00:42:57.087
> 
> 标签：eclipse, keyboard-shortcuts

如果我有两个窗格，每个窗格都打开了一组编辑器，我想使用快捷方式切换到另一个窗格。澄清一下，我的意思是像 Emacs 的 Cx o, (other-window) 或 sublime 的 ctr+1, ctr+2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:58:58.847

您可能正在寻找`Ctrl`+`F7`和`Ctrl`++ `Shift`。`F7`

其他`Navigational Shortcuts`可以在菜单中找到：`Window > Navigation`你应该去`Help > Key Assist`查看完整的快捷方式列表。

类似的问题[在这里](https://stackoverflow.com/a/6209097/866571)问！

# php - ajax php jquery 移动选择菜单

> ID：12361289
> 
> 赞同：0
> 
> 时间：2012-09-11T00:43:09.970
> 
> 标签：php, javascript, jquery, ajax

在同一页面上，我有一个添加患者的区域和一个单独的患者选择菜单。如果添加了一个病人，我希望选择菜单显示这个新病人而不刷新页面。

选择菜单最初填充有：

```
<?php
$result = mysql_query("SELECT * FROM `patients` WHERE `company_id` = " .     $user_data['company_id'] . " ORDER BY `patient_firstname`");

while($row = mysql_fetch_array($result)) {
      echo '<option value="' . $row['patient_id'] . '">' .  $row['patient_firstname'] . ' ' . $row['patient_lastname'] . '</option>';
}
?> 
```

使用选择菜单时，输入字段 first_name、last_name 和 dob 使用以下方式填充：

```
$('#patientselect').live('change', function() {
$.ajax({
    url     : 'patientget.php',
    type    : 'POST',
    dataType: 'json',
    data    : $('#patientform').serialize(),
    success : function( data ) {
                 for(var id in data) {        
                        $(id).val( data[id] );
                 }
              }
});
}); 
```

它从 Patientget.php 中检索信息：

```
$patientId = $_POST['patientselect']; // Selected Patient Id

$result = mysql_query("SELECT `patient_id`, `patient_firstname`,     `patient_lastname`, `patient_dob` FROM `patients` WHERE `patient_id` =     $patientId");
$row    = mysql_fetch_assoc($result);

$patientId      = $row['patient_id'];
$patientFirstName   = $row['patient_firstname'];
$patientLastName    = $row['patient_lastname'];
$patientDob     = $row['patient_dob'];

$arr = array( 
'input#patient_id'      => $patientId, 
'input#patient_firstname'   => $patientFirstName, 
'input#patient_lastname'    => $patientLastName, 
'input#patient_dob'         => $patientDob); 
echo json_encode( $arr );

?> 
```

这是我的第一篇文章，所以如果我需要提供更多/更清晰的信息，请告诉我。

预先感谢！！亚当

# android - android Activity 和一个带有 sms contentobserver 的服务

> ID：12361293
> 
> 赞同：0
> 
> 时间：2012-09-11T00:43:39.877
> 
> 标签：android, service, background, sms, contentobserver

我的应用要求

*   该应用程序将有一个活动和一个服务。

*   该服务有一个短信内容观察者。

*   应用程序安装后，无论应用程序是否处于活动状态，服务都应始终运行

*   服务内部的 contentobserver 的注册和注销应该由 Activity 控制。

*   在卸载应用程序时，服务应该被销毁。

我尝试了一些代码。在服务的创建中，我已经对内容观察者进行了重新注册，并且在销毁时我取消了它的注册。我已经使用了活动的启动和停止服务。但即使在停止服务之后，内容观察者的 onchange 方法仍然会被调用。

请让我知道一些示例代码和此服务的清单定义。

```
public class MyActivity extends ListActivity implements OnInitListener {

@Override
protected void onDestroy() {

    super.onDestroy(); // let it be here as per the android TTS samples

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent sintent = new Intent(MyActivity.this,MyService.class);
    MyActivity.this.startService(sintent);

}

private boolean SSMyservice() {
    // TODO Auto-generated method stub

    //stop service      
    Intent sintent = new Intent(MyActivity.this,MyService.class);
    MyActivity.this.stopService(sintent);

    //do some work

    //start service again
    MyActivity.this.startService(sintent); //start service again

    return true;
} //importdata

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.TTSread:
        return true;    
    case R.id.SSS:
        SSMyservice();
        return true;                        
    }

    return super.onOptionsItemSelected(item);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

//   Log.v(TAG,"option menu created");

    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.layout.omenu, menu);
    return true;
}

}

------------end MyActivity---------------------
----------------------------------

public class MyService extends Service {  

protected SmsObserver smsSentObserver=null;

@Override            
  public IBinder onBind(Intent intent) {   
      return null;
      }

    @Override          
    public void onCreate() 
    {

        registersmsevent();

    }   

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        super.onStartCommand(intent, flags, startId);

         return Service.START_STICKY;  

    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        unregistersmsevent();
    }

    public void registersmsevent() {
        // TODO Auto-generated method stub
        if(smsSentObserver == null)
        {
        final Uri SMS_STATUS_URI = Uri.parse("content://sms");  
        smsSentObserver = new SmsObserver(new Handler());
        MyService.this.getContentResolver().registerContentObserver(SMS_STATUS_URI, true, smsSentObserver); 
        }

    }

    public void unregistersmsevent() {
        if(smsSentObserver != null)
        {
            MyService.this.getContentResolver().unregisterContentObserver(smsSentObserver); 
            smsSentObserver = null;
        }
    }

    public class SmsObserver extends ContentObserver {

        Handler handler; 

          public SmsObserver(Handler handler) {        
              super(handler);
              // TODO Auto-generated constructor stub                
              this.handler = handler; 
          }

          @Override 
        public boolean deliverSelfNotifications() {
            return true;
        }

          @Override 
        public void onChange(boolean selfChange) {

              //my code........

            super.onChange(selfChange);
        }

    }//End of class SmsObserver

}//end of service 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:00:03.123

我可以解决这个问题。这是一个时间问题。停止服务需要一些时间。

# c# - 从 CRM 加载数据的性能问题

> ID：12361294
> 
> 赞同：4
> 
> 时间：2012-09-11T00:44:07.547
> 
> 标签：c#, performance, linq, web, crm

目前，当我们从我们的网站查询 CRM 时，我们的网站面临响应时间缓慢（超过 1 分钟）的问题。我们通过 Web 服务使用 CRM 2011。当我们进行调查时，我们发现时间都花在了查询 CRM 上。

我们使用 CrmSvcUtil.exe 来生成映射到 CRM 实体的代理类。然后，我们使用带有 C# 的 LINQ 创建上下文实例并查询 CRM。

当我们查询时，我们使用 LINQ to CRM 加载父对象，然后使用 LoadProperty 加载相关的子对象。

我想知道是否有人使用其他查询 CRM 的方法，以及您在实施过程中是否遇到过此类问题。

我在下面包含了一个简化的示例查询。

```
 public void SelectEventById(Guid id)
     {
            var crmEventDelivery = this.ServiceContext.EventDeliverySet.FirstOrDefault(eventDelivery => eventDelivery.Id == id);
            if (crmEventDelivery != null)
            {
              this.SelectCrmEventDeliveryWithRelationships(crmEventDelivery);
            }
    }

    private void SelectCrmEventDeliveryWithRelationships(EventDelivery crmEventDelivery)
     {
            // Loading List of Venue Delivery on parent crmEventDelivery thats been passed
            this.ServiceContext.LoadProperty(crmEventDelivery, Attributes.EventDelivery.eventdelivery_venuedelivery);

            foreach (var venueDelivery in crmEventDelivery.eventdelivery_venuedelivery)
            {
                 // Loading Venue on each Venue Delivery
                 ServiceContext.LoadProperty(venueDelivery, Attributes.VenueDelivery.venue_venuedelivery);
            }

            // Loading List of Session Delivery on parent crmEventDelivery thats been passed
            this.ServiceContext.LoadProperty(crmEventDelivery, Attributes.EventDelivery.eventdelivery_sessiondelivery);

            foreach (var sessionDelivery in crmEventDelivery.eventdelivery_sessiondelivery)
            {
              // Loading Presenters on each Session Delivery
              ServiceContext.LoadProperty(sessionDelivery, Attributes.SessionDelivery.sessiondelivery_presenterbooking);
            }
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-18T20:59:44.933

就像其他答案中提到的那样，您的主要问题是 Web 服务调用的数量。没有人提到的是，您可以使用查询连接通过一次调用来检索许多对象。所以你可以尝试这样的事情：

```
var query_join = (from e in ServiceContext.EventDeliverySet
                         join v in ServiceContext.VenueDeliverySet on e.EventDeliveryId equals v.EvendDeliveryId.Id
                         join vn in ServiceContext.VenueSet on v.VenueDeliveryId equals vn.VenueDeliveryId.Id
                         join s in ServiceContext.SessionDeliverSet on e.EventDeliveryId equals s.EvendDeliveryId.Id
                         where e.EventDeliveryId == id // *improtant (see below)
                         select new { EventDelivery = e, VenueDelivery = v, Venue = vn, SessionDeliver = s }).ToList(); 
```

然后您可以在 query_join 上运行 foreach 并将其放在一起。

***重要：不要使用基本 Id 属性（e.Id），坚持使用 e.EntityNameId.Value（不知道为什么，但我花了一段时间才弄清楚。Id 返回默认 Guid 值“00000 ..”）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T01:27:22.280

根据您提供的内容，这看起来像是一个标准的延迟加载问题，除了我的猜测是每个延迟加载都会导致 Web 服务调用。这将被称为“健谈”服务架构。您的目标应该是尽可能少地调用服务来检索单个请求的数据。

调用以填写详细信息似乎是一个好主意，因为您可以在只需要 1 或 2 级深度或一直向下的数据的情况下重复使用单独的服务方法，但会付出巨大的性能损失。

在这种情况下，您最好定义一个返回完整对象图的 Web 服务调用。我不知道您是否/什么用于 CRM 中的 ORM 层，但如果您进行特定调用以获取完整的交付图，那么 ORM 可以将数据急切地提取到更少的 SQL 语句中。更少调用 Web 服务（以及随后更少调用 CRM 数据存储）应该会显着提高您的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T11:39:46.490

在尝试了其他答案中的所有建议技巧并进行了进一步分析之后，在我们使用 CRM 的特定场景中，以及它是如何设置的——我们决定简单地**绕过它**。

我们最终使用了一些内置视图，这不是 CRM 文档中推荐的方法，但我们确实需要实现更高的性能，而这种情况下的 CRM 方法正好挡住了我们的路。

*对于其他阅读本文的人，也请参阅其他答案。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T20:04:00.563

所以我明白为什么这可能需要一段时间。我认为正如其他人所评论的那样，您正在进行相当多的网络服务调用。如果您有时间了解单个呼叫是否很慢或者仅仅是因为您拨打了很多电话会很有趣，我建议对此进行分析。

无论如何，我怀疑不使用强类型实体会获得更好的性能。

我建议使用 FetchXml 查询，这将允许您构建 Sql Xml 样式查询。基本上，您应该能够用一个呼叫替换您的许多我们 bservice 呼叫。[MSDN](http://msdn.microsoft.com/en-gb/library/gg328117.aspx)有一个示例，还可以查看[Stunnware](http://www.stunnware.com/) FetchXml 设计器，产品 > Stunnware 工具 > 下载和评估。它是为 Crm 4 构建的，但几乎支持您需要的所有功能。

如果您不喜欢，您也可以尝试使用[QueryExpression](http://msdn.microsoft.com/en-gb/library/gg328300.aspx)或[OData](http://msdn.microsoft.com/en-us/library/gg334767)，这两种方法都可以让您一键获取数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-21T01:05:33.560

因为查询不知道以后会需要哪些字段，所以当select子句中只指定实体时，所有列都从实体返回。为了仅指定您将使用的字段，您必须在 select 子句中返回一个新对象，指定您要使用的字段。

所以代替这个：

```
var accounts = from acct in xrm.AccountSet
               where acct.Name.StartsWith("Test")
               select acct; 
```

用这个：

```
var accounts = from acct in xrm.AccountSet
               where acct.Name.StartsWith("Test")
               select new Account()
               {
                   AccountId = acct.AccountId,
                   Name = acct.Name
               }; 
```

查看这篇文章的更多详细信息。

[到 Linq 还是不到 Linq](http://superiorcrm.wordpress.com/2014/08/20/crm-to-linq-or-not-to-linq/)

# arrays - 编程理论：洗牌二维数组

> ID：12361296
> 
> 赞同：0
> 
> 时间：2012-09-11T00:44:18.257
> 
> 标签：arrays, complexity-theory, theory, shuffle, computation-theory

我和一个朋友正在考虑一个**有趣**的计算机科学问题。

* * *

你有一个简单的**二维数组**：

```
[  1,  2,  3,  4 ]
[  5,  6,  7,  8 ]
[  9, 10, 11, 12 ]
[ 13, 14, 15, 16 ] 
```

现在取这个数组并**打乱数组中的所有元素**：

```
[ 11,  5, 14, 10 ]
[  8,  2,  4, 16 ]
[ 15,  1,  3, 13 ]
[  6, 12,  9,  7 ] 
```

一开始是一个相当简单的概念。但是，如果我们再**迈出一步**呢？现在，**打乱原始数组**，使新数组中的*任何元素都不会与它们在***原始数组**中在基本方向上相邻的项相邻。

我们的第一次洗牌**失败**，因为 1 在 2 旁边，并且在原始数组中也在 2 旁边。

这是一个**工作**示例：

```
[  7, 16, 13,  2 ]
[ 14,  3,  5,  8 ]
[  9,  1,  4, 11 ]
[ 12, 10, 15,  6 ] 
```

还不算*太*糟糕。现在到了**真正的**问题！

再次对**原始数组**进行洗牌，使数组中的*任何*元素都不会与它们在基数方向**或对角线**相邻的元素相邻。

我们的工作示例**失败**了，因为 1 对角线靠近 5，并且在原始数组中靠近 5。

## 一些想法：

1.  甚至可以确定一个数组吗？
2.  它取决于数组的大小吗？
3.  阵列是否需要对称？
4.  数组是否需要有偶数/奇数个元素？
5.  **解决方案是否适用于所有大小为M**乘**N**的数组？
6.  如果存在解决方案，找到新阵列的运行时间是多少？

你怎么看？

**编辑**

我很惊讶地发现我的问题被关闭为“离题”。根据[常见问题解答](https://stackoverflow.com/faq)，如果我的问题“......通常涵盖特定的编程问题......”那么它可以被问到并且不是“离题”。

我问的底线问题是：

> “你能拿一个二维数组并打乱它，这样新数组中的成员就不会彼此相邻，包括对角线”。

这不是一个好的编程问题吗？我强烈认为我的问题不应该结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:58:17.097

```
1.Can an array even be determined? 
```

*   当然，您可以通过转置到边缘来使用转换 Rn -> RN。

> 2.它取决于数组的大小吗？

*   对于 MxM <= 3，您不能这样做，所以是的。

> 3.阵列需要对称吗？

*   这取决于 *

> 数组是否需要有偶数/奇数个元素？

*   这取决于 *

> 5\. 一个解决方案是否适用于所有大小为 M 乘 N 的数组？

*   这取决于 *

> 6.如果有解决方案，找到新数组的运行时间是多少？

运行时间可以`O(N^2)`使用简单的转换（尽管考虑 as `O(1)`）。

*   这取决于是否将重复项视为解决方案的一部分（[袋子](http://en.wikipedia.org/wiki/Multiset)）或不（[集合](http://en.wikipedia.org/wiki/Set_%28mathematics%29)）。

现在至于算法本身。虽然这似乎是一种锻炼大脑的好方法，但听起来更像是一项家庭作业，所以你为什么不尝试一些东西并询问具体情况。

# nuget - Nuget - 更新包：存档文件的大小不能为 0

> ID：12361310
> 
> 赞同：2
> 
> 时间：2012-09-11T00:46:56.183
> 
> 标签：nuget

尝试将包管理器与 Nuget 一起使用时，是否有人遇到此错误？当我使用 GUI 或控制台时，就会发生这种情况。

我已清除本地缓存目录。

```
PM> Update-Package [My Name]
Update-Package : Archive file cannot be size 0.
At line:1 char:15
+ Update-Package <<<<  [My Name]
    + CategoryInfo          : NotSpecified: (:) [Update-Package], FileFormatException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.UpdatePackageCommand

PM> 
```

谢谢你的帮助

# actionscript-3 - 在日历组件flash cs6中设置最小和最大日期

> ID：12361317
> 
> 赞同：0
> 
> 时间：2012-09-11T00:48:27.107
> 
> 标签：actionscript-3, flash, calendar, flash-cs6

我正在尝试自定义要在应用程序中使用的日期选择器，根据他们是什么类型的人，他们被限制在日历中的特定日期范围内。例如，如果他们是 type1，他们将能够选择从当前日期开始的 30 天，并且在此之前的所有天都将变灰，并且 30 之后的所有天也将变灰。我已经搜索了谷歌并没有提出任何建议，所以任何帮助都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:38:25.147

我将假设您使用的是 mx DateChooser 组件，我不熟悉 Flash CS6 中的日历组件。无论哪种方式，我确信代码非常相似。

您可以为 DateChooser 组件提供禁用日期范围

```
<mx:DateChooser id="myDate" /> 
```

您需要做的就是获取当前日期，减去 30 天并将其设置为范围结束。

```
var d:Date = new Date(); //current date
d.date -= 30; //-30 days, yup- its that easy
myDate.disabledRanges = [ {rangeEnd:d} ] //disabledRanges takes an array of objects 
                                         //with rangeStart and rangeEnd
                                         //you don't need a start date since you want to disable all dates before 30 days ago. 
```

希望这可以帮助

# java - Java 的方法可以“知道”它自己的名字吗？

> ID：12361318
> 
> 赞同：3
> 
> 时间：2012-09-11T00:48:30.023
> 
> 标签：java

> **可能重复：**
> [获取当前执行方法的名称](https://stackoverflow.com/questions/442747/getting-the-name-of-the-current-executing-method)

有没有办法`Java`让给定的方法知道自己的名字？如果是这样，如何从方法内部引用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T00:50:48.177

您可以通过分析堆栈跟踪来确定它。但它可能会带来相当大的性能损失。在 AOP 世界中，您还可以拥有将确定方法名称并将其存储在某种上下文中的方面。

在堆栈跟踪方法中，您会执行类似的操作

```
Exception e = new Exception();
e.fillInStackTrace();
e.getStackTrace()[0].getMethodName(); 
```

或（如评论中所建议）

```
Thread.currentThread().getStackTrace()[0].getMethodName(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T00:51:11.047

堆栈跟踪的第一个元素（`Thread.currentThread().getStackTrace()`参见[此问题](https://stackoverflow.com/a/1069074/372643)）应该告诉您当前在运行时使用哪种方法。

# sql - 子查询中的 MySQL AVG()

> ID：12361319
> 
> 赞同：1
> 
> 时间：2012-09-11T00:48:35.717
> 
> 标签：sql, join, group-by, subquery, case

哪一个查询可以产生**table_c**？

我有三列：day、person 和income_per_person。现在我必须使用两个查询，因为我在生成**table_b**时丢失了“人” 。

**table_a**使用所有三列：

```
SELECT day, person, revenue_per_person
FROM purchase_table
GROUP BY day, person 
```

**由于 AVG() 和 GROUP BY，**table_b仅使用两列：****

 **```
SELECT day, AVG(revenue) as avg_revenue
FROM purchase_table
GROUP BY day 
```

****从table_a**和**table_b**创建的**table_c**：**

 **```
SELECT 
   CASE 
   WHEN revenue_per_person > avg_revenue THEN 'big spender'
   ELSE 'small spender'
   END as spending_bucket
FROM ???? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:53:33.403

也许这会有所帮助，试试这个

```
SELECT a.day,
    CASE 
        WHEN a.revenue_per_person > b.avg_revenue THEN 'big spender'
        ELSE 'small spender'
   END as spending_bucket
FROM
    (
        SELECT day, person, AVG(revenue) revenue_per_person
        FROM purchase_table
        GROUP BY day, person
    ) a INNER JOIN
    (
        SELECT day, AVG(revenue) as avg_revenue
        FROM purchase_table
        GROUP BY day
    ) b ON a.day = b.day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:00:02.353

您可能想要使用[分析函数](http://www.orafaq.com/node/55)。一个 Oracle 示例，显示一个人的薪水是否高于其部门的平均薪水。

```
08:56:54 HR@vm_xe> ed                                                     
Wrote file s:\toolkit\service\buffer.sql                                  

  1  select                                                               
  2    department_id                                                      
  3    ,employee_id                                                       
  4    ,salary                                                            
  5    ,avg_salary                                                        
  6    ,case when salary > avg_salary then 1 else 0 end case_is_greater   
  7  from (                                                               
  8    select                                                             
  9       department_id                                                   
 10      ,employee_id                                                     
 11      ,salary                                                          
 12      ,round(avg(salary) over(partition by department_id),2) avg_salary
 13    from employees                                                     
 14  )                                                                    
 15* where department_id = 30                                             
08:58:56 HR@vm_xe> /                                                      

DEPARTMENT_ID EMPLOYEE_ID     SALARY AVG_SALARY CASE_IS_GREATER           
------------- ----------- ---------- ---------- ---------------           
           30         114      11000       4150               1           
           30         115       3100       4150               0           
           30         116       2900       4150               0           
           30         117       2800       4150               0           
           30         118       2600       4150               0           
           30         119       2500       4150               0           

6 rows selected.                                                          

Elapsed: 00:00:00.01 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T01:02:51.793

如果您使用的是支持 windows 功能的数据库，您可以这样做：

```
SELECT (CASE WHEN revenue_per_person > avg_revenue THEN 'big spender'
             ELSE 'small spender'
        END) as spending_bucket
FROM (select pt.*,
             avg(revenue) over (partition by day, person) as revenue_per_person,
             avg(revenue) over (partition by day) as avg_revenue,
             row_number() over (partition by day, person order by day) as seqnum
      from purchase_table pt
     ) t
where seqnum = 1 
```

The purpose of seqnum is to just get one row per person/day combination.****

# php - 库在页脚中加载时基于 PHP 条件调用 Javascript

> ID：12361321
> 
> 赞同：2
> 
> 时间：2012-09-11T00:49:17.083
> 
> 标签：php, javascript, jquery

我在 php 页面的正文中有以下内容：

```
<?php if($foo) : ?>

    <script>
        js_func();
    </script>

<?php else: ?>

    //Do Something else

<?php endif; ?> 
```

基于 PHP 条件，我想或不想运行 js_func()。

但是，如果我在页面底部加载所有脚本（包括定义 js_func() 的脚本），这将导致错误。

一种可能的解决方案是在调用 js_func() 之前加载外部脚本，但我知道出于性能原因我不应该这样做。

我可以使用 $(document).ready(function() {}); 但这只是移动错误，因为 jQuery 也加载到页脚中。

我能想到的唯一其他选择是使用 window.onload 或从不内联调用 js 函数。其他人如何解决这个问题？

非常感谢。

编辑：

@Nile - 我不确定你的意思。为什么要注释掉我想要执行的代码？@haynar1658 - 我不想在 else 场景中执行 JS。@Matthew Blancarte - 明白了。这引出了我的问题，在实例化该函数之前确保加载我需要的 js 的最佳方法是什么？在它之前包含脚本？使用window.onload？等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:51:09.330

只需将脚本移至顶部即可。

差异（如果有的话）非常小。
相信所有开发人员都不会“接受”在页面`<script>s`中`<head>`放慢速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:09:14.700

您是否尝试在 PHP 中回显它？

```
<?php if($foo) {
echo "<script> js_func(); </script>";
}else{
echo "something else";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T02:38:46.373

我想你是在为自己的背部做一根棍子。根据您描述的问题，您希望**将所有函数定义脚本块放在调用它们的位置之后。不可能！**
如果您确实需要这样做，这有帮助吗？：

```
<script>    
    var fns = []; /* use fns to keep all the js code  
                     which call the functions defined after. */  
</script>

<script>
    //wrapp your code in a function and then push it into fns.   
    fns.push(function(){  
        js_func();  
    }) 
</script>

//script tags for loading your function  definition js script.  
<script src="path/to/jquery-any-version.js"></script>  
<script src="path/to/other-libraries.js"></script>

<script>
    //after your definition js scripts are loaded ,  call all functions in fns  
    for(var i=0, len=fns.length; i<len; i++){  
        var fn = fns[i];  
        fn.apply(this, []/* arguments that provided  as an array */);  
    }
</script> 
```

# objective-c - “'NSData' 没有可见的@interface 声明了 MKStoreKit 中的选择器'base64EncodedString”错误

> ID：12361322
> 
> 赞同：3
> 
> 时间：2012-09-11T00:49:25.173
> 
> 标签：objective-c, cocos2d-iphone

我正在尝试在我的应用程序中将我的 MKStoreKit 升级到 4.0 版，以便我可以将“在应用程序购买中恢复”功能合并到我的应用程序中。由于缺少此功能，Apple 想要拒绝我的应用程序。到目前为止，我已经能够解决我所有的“ARC”问题，但我遇到了“'NSData' 没有可见的@interface 声明选择器'base64EncodedString”错误。据我所知，此错误与允许审阅者在不实际购买的情况下运行您的应用内购买所需的服务器功能有关。我对这个功能不感兴趣，很想知道如何绕过它。我一直无法找到如何做到这一点。有谁知道我可以如何禁用它？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T00:53:27.700

看起来您在`base64EncodedString`某处使用方法，但您忘记在声明它的类别中包含标题。如果您在[iOS 中使用流行的 base-64 编码库](https://github.com/nicklockwood/Base64)，则标头名称为`"NSData+Base64.h"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T07:12:53.603

首先在您的项目和您收到错误 import #import 的类中添加`NSData+Base64.h`和，您将摆脱该错误。`NSData+Base64.m``NSData+Base64.h`

# javascript - 为什么我的上下文选择器和 .buttonset() 在 ie 中花了这么长时间

> ID：12361323
> 
> 赞同：1
> 
> 时间：2012-09-11T00:49:30.720
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-button

所以我认为这是我做错了。它太慢了，即这一定有什么根本性的问题。

乐HTML

```
<div id='mother'>

  <div id="radio">
    <input type="radio" id="radio1" name="radio" />
      <label for="radio1">Choice 1</label>
    <input type="radio" id="radio2" name="radio" checked="checked" />
      <label for="radio2">Choice 2</label>
  </div>

  <div id="radioTwa">
    <input type="radio" id="radioTwa1" name="radioTwa" />
      <label for="radioTwa1">Choice 1</label>
    <input type="radio" id="radioTwa2" name="radioTwa" checked="checked" />
      <label for="radioTwa2">Choice 2</label>

  </div>

  <div id="check">
    <input type="checkbox" id="check1" name="check" />
      <label for="check1">Choice 1</label>
    <input type="checkbox" id="check2" name="check" checked="checked" />
      <label for="check2">Choice 2</label>

  </div>

</div>​​​​​​​​​​​​ 
```

乐 JQuery/JQuery UI

```
 var mother = $('​​​​​​​​​​​​​​#mother');
​    mother.find('#radio').buttonset();​​​​​​
    mother.find('#radioTwa').buttonset();
    mother.find('#check').buttonset(); 
```

或者

```
 var mother = $(​​​​​​​​​​​​​​'#mother');
​    $('#radio', mother).buttonset();​​​​​​
    $('#radioTwa', mother).buttonset();
    $('#check', mother).buttonset(); 
```

这两者都会让 IE 8 崩溃并让它哭泣。为了将一些事情扼杀在萌芽状态，我故意使用母亲的语境。我没有每个单选框的唯一 ID，我计划使用上下文选择它们，因为页面上的数字 'mother' 类型 div 虽然我使用的每个母 div 元素只有大约 8 或 9 个元素它。有没有办法在 IE 8 中使用足够快的上下文来选择不让它停下来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:59:40.517

你一共有多少个按钮？stackoverlow 上似乎有一些关于慢速按钮集的规定。我还发现了 bugs.jqueryui.com/ticket/5454 – Nal

# asp.net-mvc - 显示具有大量属性的视图模型

> ID：12361327
> 
> 赞同：1
> 
> 时间：2012-09-11T00:50:05.807
> 
> 标签：asp.net-mvc, viewmodel, renderpartial

我已经阅读了 Jimmy Bogards 关于他们如何查看模型的帖子，在我自己的项目中，我遇到了一些需要同时显示大量信息的地方屏幕，例如需要填写的表格，其中所有字段一次显示。

所以我们的视图模型看起来像

```
public class FormViewModel
{
    public string field1 {get;set;}
    public int field2 {get;set;}
    public DateTime field3 {get;set;}
    public string field4 {get;set;}
    ...snip
    public string field50 {get;set;}
} 
```

现在表单确实有部分，所以我们可以像这样在视图模型中引入一些结构：

```
public class FormViewModelSection1
{
    public string field1 {get;set;}
    public int field2 {get;set;}
}

public class FormViewModelSection2
{
    public DateTime field3 {get;set;}
    public string field4 {get;set;}
} 
```

然后主视图模型变为

```
public class FormViewModel
{
    public FormViewModelSection1 {get;set;}
    public FormViewModelSection2 {get;set;}
} 
```

因此，我们会将更复杂的视图模型返回到一个主视图，该主视图基本上只是将其每个部分委托出去，以便通过像这样的渲染部分进行渲染

```
<div>
My form

<%: Html.RenderPartial("soemascx", Model.FormViewModelSection1)%>
</div> 
```

或者也许使用编辑器来呈现内容。

我的问题是，视图模型的“重组”是一件有效的事情，还是它取消了使视图模型如此平坦所提供的一些好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:51:55.037

我会说你的问题没有正确的答案。这一切都取决于可用性和功能。甚至可能是个人编码风格。意思是只要它是

*   工作（显示、回发、验证等）
*   服务于目的
*   其他人可以理解（阅读可维护）

认为这是一个很好的解决方案。如果你问我会做什么：我会使用一个装饰精美的平面类（数据注释）用于名称和验证，以及支持视觉表示的结构（如组合框的列表、枚举（或任何你喜欢的东西） ) 用于单选按钮。

*作为说明，我在视图模型的层次结构（继承）方面有一些不好的经验——在验证方面工作得非常糟糕（继承的数据注释在视图模型继承中不能按预期工作）。*

所以要回答你的具体问题 - 不，你没有做错任何事......这取决于你如何去做。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:51:08.137

我个人不会将我的 ViewModel 分成子 ViewModel，除非它是用于类似“UserControl”类型的东西，例如网页侧面的一个小表单将是一个单独的 ViewModel，而主页 ViewModel 将引用它。

但一般来说，我有一个 BaseViewModel，它是一个具有所有共享字段（如 pagetitle 等）的抽象类，然后我有一个 ViewModel 用于继承 BaseViewModel 的 View 本身。例子：

```
public abstract class BaseViewModel
{
    public string PageTitle { get; set; }
    public string MetaDescription { get; set; }
    public string MetaKeywords { get; set; }
} 
```

我可能有一个小的注册表单，我会在我的一些页面中使用它。所以我将为这个小表单创建一个单独的 ViewModel。将其分离到它自己的对象中的一个好处是，当用户提交表单时，我可以传入特定的 SignupViewModel 对象，而不是带有所有实体的主页。

```
public sealed class SignupViewModel
{
    [Required]
    public string YourName { get; set; }
    [Required]
    public string YourEmail { get; set; }
} 
```

然后对于具有上述用户控件的基本网页：

```
public sealed class PageViewModel : BaseViewModel
{
    public string PageID { get; set; }
    public string PageContents { get; set; }
    public SignupViewModel UserSignupForm { get; set; }
} 
```

我想有很多不同的方法可以解决同一件事，但以上就是我的做法。

# php - 在 iframe 中刷新 php 脚本

> ID：12361328
> 
> 赞同：-1
> 
> 时间：2012-09-11T00:50:26.710
> 
> 标签：php, iframe, refresh

我只是想问一下如何刷新 iframe 中的特定 php 脚本。我不想刷新整个 iframe，因为它会跳转到 iframe src，但我想刷新我当前正在使用的脚本以查看我应用的更改。每次我尝试重新加载 iframe 时，它​​总是跳转到 iframe src。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:03:21.413

iFrame 只是一个添加其他页面的窗口。尝试在您要刷新的页面中添加此内容

```
<meta http-equiv="refresh" content="0;URL=**linkToRefresh.php**" /> 
```

在此示例中，您需要在文件**linkToRefresh.php中的代码底部添加该行**

# css - 如何在 Rstudio 中为 markdown + knitr 自定义 css？

> ID：12361329
> 
> 赞同：4
> 
> 时间：2012-09-11T00:50:43.263
> 
> 标签：css, r, markdown, knitr

我想更改`KnitHTML`.`RStudio 0.96.331`

我按照这篇[文章](http://www.r-bloggers.com/custom-css-for-html-generated-using-rstudio/)中的说明进行操作。

[首先，我从这里](https://github.com/rstudio/markdown/blob/master/inst/resources/markdown.css)复制过去的原始 markdown.css 。作为测试，我将前几行更改为：

```
body, td {
font-family: sans-serif;
background-color: white;
font-size: 12px;
margin: 8px;
} 
```

到红色背景

```
body, td {
font-family: sans-serif;
background-color: red;
font-size: 12px;
margin: 8px;
} 
```

并将其保存`mymd.css`在我的工作目录中。然后我创建一个 style.R 文件，如下所示：

```
options(rstudio.markdownToHTML =
  function(inputFile, outputFile) {     
    require(markdown)
    markdownToHTML(inputFile, outputFile, stylesheet='mymd.css')  
  }
) 
```

最后，我通过单击 source 来获取 style.R 文件，然后返回该`.Rmd`文件并将其编织为 HTML。我得到红色背景，但未编译数学，例如 $\alpha$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T02:21:45.117

AFAIK，MathJax 服务[昨天](https://groups.google.com/forum/?fromgroups=#!topic/mathjax-users/VXNq-LtszTE)因 GoDaddy 中断而关闭。你能确认数学问题不是因为这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T20:34:53.103

所以我可能会为您解决问题，但它涉及使用[pandoc](http://johnmacfarlane.net/pandoc/)：

假设您的样式表被称为`style.css`

获取以下代码：

```
options(rstudio.markdownToHTML = function(inputFile, outputFile) {
        system(paste("pandoc -c style.css", shQuote(inputFile),
                     "-o", shQuote(outputFile)))
          }
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-11T07:33:27.017

这可能是提出问题时不可用的新功能。但是，我在这里找到了一个简单的解决方案：

[https://bookdown.org/yihui/rmarkdown/html-document.html#appearance-and-style](https://bookdown.org/yihui/rmarkdown/html-document.html#appearance-and-style)

在您的 .Rmd 的序言中，只需这样写：

```
---
title: "Your title"
output: 
  html_document:
    css: yourstylefile.css
--- 
```

# c# - 仅在一个上下文中使用 DbContext

> ID：12361330
> 
> 赞同：3
> 
> 时间：2012-09-11T00:50:46.617
> 
> 标签：c#, asp.net-mvc, entity-framework, dbcontext

在我的最新项目中，我认为在整个应用程序中只有一个上下文可能会更简单。我注意到，当我加载需要多个查询的页面时，它可能会返回空结果。

例如，我有一个约会列表，然后是一个销售代表列表。他们表现得很好。然后我按 F5，有时一切都会好起来，但有时约会和/或代表列表会是空的。

这是单一上下文应用程序的已知问题吗？那个设计是坏的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T03:45:08.433

> 这是单一上下文应用程序的已知问题吗？那个设计是坏的吗？

我相信是的，对于简单的 Web 应用程序，您可能看不出区别，但是对于具有许多用户且需要高并发的复杂 Web 应用程序，问题将是：

`DbContext`在底层实现了工作单元模式，内部有内部缓存，因此长时间保持全局 DbContext 会导致内存泄漏并从数据库中提取大量数据并暂时将它们保存在内存中（内部缓存）。

想想 Unit Of Work 是一个业务事务，Unit Of Work 中的内部缓存只是为了这个事务，而不是全局的，如果事务完成了，Unit Of Work 应该尽快处理掉。

*Web 应用程序中 DbContext 的最佳实践是根据请求*保持 DbContext 的生命周期。如果使用 IoC 容器，大多数 IoC 容器都支持按请求生命周期管理。

# wcf - 如何让 Azure Compute Emulator 在 32 位模式下运行？

> ID：12361335
> 
> 赞同：4
> 
> 时间：2012-09-11T00:51:28.287
> 
> 标签：wcf, azure, fortran

因此，我在 Stack Overflow 和其他地方找到了一些文章，这些文章展示了如何使用启动任务将 Azure 设置为在 32 位模式下运行。

问题是，这似乎不适用于 Compute Emulator。

我编写了一个 Worker Role，它运行一个调用旧版 FORTRAN dll 的服务。但是，此 DLL 仅在 x86 模式下运行。因此，我需要强制 Azure 模拟器启用 32 位应用程序。

我正在使用 VS2010 或 VS2012 在 Windows 7（或 8，如果效果更好）上运行，我得到的错误是“在这个系统上，Compute Emulator 支持 AnyCPU 和 x64”。

有人有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:10:18.663

这是我第一次听说 Azure 运行时可以在 32 位模式下运行。这种情况的典型解决方案是使用某种互操作并在单独的进程中运行 32 位代码 - 例如 DCOM 服务器或 WCF 服务，以便 Azure 运行时运行在 32 位还是 64 位无关紧要 -位模式。

# xcode - Xcode 使用苹果原生框架将 rawdata 从 8 位/通道转换为 16 位/通道

> ID：12361336
> 
> 赞同：1
> 
> 时间：2012-09-11T00:51:40.093
> 
> 标签：xcode, macos, image, cocoa, core-graphics

我有 8 位/通道的 rgb 原始数据，我需要将其转换为 16 位/通道，任何本机框架都可以这样做，谢谢。

所以输入是图像宽度、高度、原始数据，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:23:51.260

如果您只想将 8bpc 原始图像转换为 16bpc 原始图像（无需任何特殊的颜色处理和过滤） - 您不需要任何特殊的框架。您可以通过逐个像素转换来自己完成...在无符号短 16 位原始转换的情况下，将如下所示：

```
size_t ent_cnt = width*height*channel_count;
unsigned short *dst = new unsigned short[ent_cnt];
unsigned short *dst_ptr = dst;
unsigned char *src_ptr = src;
while (ent_cnt --)
    *dst_ptr++ = (unsigned short)(*src_ptr++) << 8;
return dst; 
```

# silverlight - 使用 Confuser 进行 Silverlight 混淆？

> ID：12361348
> 
> 赞同：0
> 
> 时间：2012-09-11T00:54:20.313
> 
> 标签：silverlight, obfuscation

有没有人尝试过使用 Confuser 来混淆 Silverlight 项目，或者知道是否可以这样做？

我尝试在 xap 的 dll 上使用它，但是它在用户定义的断点处结束，然后给出以下消息：

System.NotSupportedException 消息：不支持版本：5.0.5.0

[使用 Silverlight 5 (v 5.0.61118.0)]

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:50:36.373

在撰写本文时，Confuser 不支持 Silverlight。该功能已被提出，并在项目的[问题跟踪器](http://confuser.codeplex.com/workitem/8256)上标记为活动。

它是开源软件，如果更改代码以检测 Silverlight 库，它可能会在 Silverlight 上运行。XAML 重命名可能存在问题，并且由于使用反射，因此设置数据上下文也会存在问题，但可以通过关闭重命名并对该部分使用不同的混淆器来避免这些问题。

# macos - 始终检查 Cocoa 中的网络可达性

> ID：12361349
> 
> 赞同：1
> 
> 时间：2012-09-11T00:54:48.087
> 
> 标签：macos, cocoa, reachability, runloop

我想知道是否始终检查应用程序是否已连接到网络的最佳方法是什么？

比如说，安排它每 10 秒检查一次。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:07:00.857

您可以使用`SystemConfiguration`框架来监控网络状态。看一下[可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)示例。在启动需要有效 Internet 连接的操作之前检查连接。

# c++ - C++：对“f”中的成员“Foo”的错误请求，它是非类类型“Foo*”

> ID：12361350
> 
> 赞同：0
> 
> 时间：2012-09-11T00:54:49.227
> 
> 标签：c++, oop, compiler-errors

我知道以前有人问过这个问题。我已经尝试实施答案，但仍然遇到此错误。如果有人有任何建议，将不胜感激。下面是主文件、头文件和源文件。如果您需要任何其他信息，请告诉我。谢谢！

主文件

```
/* 
 * File:   main.cpp
 * Author: agoodkind
 *
 * Reads in a .list file from IMDB
 * Prompts user for Actor or Movie lookup
 * Iterates through file
 * Returns results of query
 * 
 */

#include <cstdlib>
#include <iostream>
#include <fstream>
#include <string>

#include "ActorResume.h"

using namespace std;

// function prototypes
void printmenu(void);
void createMovieList(fstream &infile);
void movieCastLookup(void);
void costarLookup(ActorResume &, fstream &infile);

int main() {    

    char choice;                //user menu selection
    bool not_done = true;       // loop control flag

    // create input file stream
    fstream infile;
    // CHANGE BACK TO NON-TEST!! 
    infile.open("/Users/agoodkind/Documents/CUNY/Analysis_and_Design/Assignments/Assignment1/actorsTEST.2010.list", ios::in);

    do {
        printmenu();
        cin >> choice;
        switch(choice)
        {
            case 'q':
            case 'Q':
                infile.close();
                not_done = false;
                break;
            case 'a':
            case 'A':
                createMovieList(infile);
                break;
            case 'm':
            case 'M':
                movieCastLookup();
                break;
            default:
                cout << endl << "Error: '" << choice << "' is an invalid selection -  try again" << endl;
                break;
        } //close switch

    } // close do() loop

    // exit program
    while (not_done);
    return 0;
} // close main()

/* Function printmenu()
 * Input:
 *  none
 * Process:
 *  Prints the menu of query choices
 * Output:
 *  Prints the menu of query choices
 */
void printmenu(void) {
    cout << endl << endl;
    cout << "Select one of the following options:" << endl;
    cout << "\t****************************" << endl;
    cout << "\t    List of Queries         " << endl;
    cout << "\t****************************" << endl;
    cout << "\t     A -- Look Up Actors' Costars" << endl;
    cout << "\t     M -- Movie Cast List" << endl;
    cout << "\t     Q -- Quit" << endl;
    cout << endl << "\tEnter your selection: ";
    return;    
}

/* Function costarLookup()
 * Input:
 *      Actor name
 * Process:
 *      Looks up all actors also in actor's movieList
 * Output:
 *      Prints list of costars
 */
void createMovieList(fstream &infile) {

    string actorName; // actor's name to be queried

    cout << endl << "Enter Actor Name: ";
    cin >> actorName;

    ActorResume *ar = new ActorResume(actorName);

    // add movie list to ActorCostars ADT created above
    // string for readline()
    string line;

    if (infile.is_open()) { //error checking to ensure file is open
        infile.seekg(0, ios::beg); // to be safe, reset get() to beginning of file
        while (infile.good()) { //error checking to ensure file is being read AND not end-of-file

            bool actor_found = false; // checks if actor name has been found
            getline(infile,line);

            if (line == actorName) {
                actor_found = true;
            }

            // add movies to actor's movieList
            while (actor_found && line[0] == '\t') {
                ar.addMovie(line);
            } 
        }
    }

    costarLookup(*ar, infile);
    delete ar;

} // close costarLookup()

void costarLookup(ActorResume actRes, fstream &infile) {

    // string for readline()
    string line;

    // vector to store costar names
    vector<string> costars;

    if (infile.is_open()) {             // error checking to ensure file is open

        infile.seekg(0, ios::beg);      // reset get() to beginning of file
        while (infile.good()) {         // error checking to ensure file is being read AND not end-of-file

            // while looping through file, store each actor's name
            string actorName;

            getline(infile,line);

            // check if first character is an alphanumeric character
            if (line[0] != '\t' && line[0] != NULL) {
                actorName = line;
            }

            // add actors name to list of costars
            if (actRes.movieInList(line)) {
                costars.push_back(actorName);
            }
        }
    }
    if (costars.size() == 0) {
        cout << "No costars found";
    }
    else if (costars.size() > 0) {
        cout << "Costars of " << actRes.getActorName() << ": " << endl;
        for (int i = 0; i < costars.size(); i++) {
            cout << "* " << costars[i];
        }
    }
} 
```

演员简历.h

```
/* 
 * ActorResume Specification Class
 */

#ifndef ACTORRESUME_H
#define ACTORRESUME_H

#include <iostream>
#include <string>
#include <vector>
#include <cstring>

using namespace std;

// ActorResume declaration
class ActorResume {

private:
    string actorName;
    vector<string> movieList;

public:

    //default constructor
    ActorResume() {
//        actorName = NULL;
        movieList.clear();
    }

    //typical constructor implemented for creating ActorResume
    ActorResume(string aName) {
        actorName = aName;
        movieList.clear();
    }

    // member functions
    void addMovie(string);
    string getActorName();
    bool movieInList(string);
//    void printMovieList();

};

#endif  /* ACTORRESUME_H */ 
```

演员简历.cpp

```
// ActorResume Implementation

#include <iostream>
#include <string>
#include <vector>
#include <cstring>

#include "ActorResume.h"

/*
 * ActorResume function addMovie()
 * Input:
 *      Movie Name
 * Process:
 *      adds movie to movieList
 * Output:
 *      None
 */
void ActorResume::addMovie(string movie) {
    movieList.push_back(movie);
//    return;
}

/*
 * ActorReusme function getActorName()
 * Input:
 *      None
 * Process:
 *      returns actor's name
 * Output:
 *      String of actor's name
 */
string ActorResume::getActorName() {
    return actorName;
}

/*
 * ActorResume function movieInList()
 * Input:
 *      string to search for
 * Process:
 *      searches movieList vector for string
 * Output:
 *      If movie is found, true
 *      Else, false
 */
bool ActorResume::movieInList(string movie) {
    for(size_t i = movieList.size() - 1; i != (size_t)-1; i--) {
        if (movieList[i] == movie) {
            return true;
        }
    }
    return false;
} 
```

错误：

```
main.cpp: In function 'void createMovieList(std::fstream&)':
main.cpp:124: error: request for member 'addMovie' in 'ar', which is of non-class type 'ActorResume*' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T00:58:23.213

> 'f' 中的成员 'Foo' 的错误请求，它是非类类型 'Foo*'

该错误告诉你所有你需要知道的。

```
ActorResume *ar = new ActorResume(actorName); 
```

`ar`是指向`ActorResume`对象的指针，而不是`ActorResume`对象本身。所以...

```
ar.addMovie(line); 
```

应该

```
ar->addMovie(line); 
```

您使用`->`运算符来取消引用指针并访问它所引用的对象的成员，而不是点运算符。指针没有成员。

# java - Java 中的 3D 渲染 - 我应该从哪里开始？

> ID：12361354
> 
> 赞同：0
> 
> 时间：2012-09-11T00:56:20.483
> 
> 标签：java, 3d, rendering

我正在考虑制作一个 3D 渲染器，我对 XYZ 尺寸了如指掌，并且是一名中级 Java 程序员。但是我应该为基本渲染器做什么？它必须是非常基本的，我应该渲染什么？立方体，金字塔？一个球体？

任何答案将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:00:34.383

对于 3D 渲染，我最喜欢的第一个问题是如何只用两条垂直和倾斜的线来赋予深度感。解决这个问题，我相信您最终会构建自己的 3D 渲染器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-12T15:35:40.640

我意识到这是一个老问题，但对于任何想知道的人，我建议你查看这个包含概念的页面：

[东西](http://gamedevelopment.tutsplus.com/series/lets-build-a-3d-graphics-software-engine--gamedev-12718)

然后查看有关创建 3D 旋转立方体的本教程。将 python 代码转换为选择的语言真的很容易。

[东西](http://www.petercollingridge.co.uk/pygame-3d-graphics-tutorial/nodes-and-edges)

这里还有一个 javascript 版本：

[东西](https://www.khanacademy.org/computer-programming/3d-tutorial-3/1645062289)

然后检查一下，它解释了创建 3D 引擎：

[http://blogs.msdn.com/b/davrous/archive/2013/06/13/tutorial-series-learning-how-to-write-a-3d-soft-engine-from-scratch-in-c-打字稿或javascript.aspx](http://blogs.msdn.com/b/davrous/archive/2013/06/13/tutorial-series-learning-how-to-write-a-3d-soft-engine-from-scratch-in-c-typescript-or-javascript.aspx)

# python - django sweetpie 获取相关列总量

> ID：12361358
> 
> 赞同：0
> 
> 时间：2012-09-11T00:56:49.767
> 
> 标签：python, django, rest, tastypie

鉴于以下来自美味派的 JSON 结果，我想在 check.payments_total 创建一个新值，该值等于付款总额（在本例中为 44.00）。关于如何做到这一点的任何线索？我完全被难住了。付款是检查表的连接外键。

```
{
"objects": [
    {
        "check": {
            "id": "58a81b36-1ea6-403b-9902-a50cbd13cf2e",
            "number": 2,
            "payments": [
                {
                    "amount": "5.00",
                },
                {
                    "amount": "39.00",
                }
            ]
        }
    }
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:19:29.983

如果对于响应，那么您可以在资源中覆盖以下方法（代码段来自`tastypie.resources.Resource`）：

```
def alter_list_data_to_serialize(self, request, data):
    """
    A hook to alter list data just before it gets serialized & sent to the user.

    Useful for restructuring/renaming aspects of the what's going to be
    sent.

    Should accommodate for a list of objects, generally also including
    meta data.
    """
    return data 
```

只包括类似的东西（未经测试，认为是伪代码）：

```
 total_amount = 0.0
 for object in data[ 'objects' ]:
     total_amount += object[ 'amount' ]

 return { 'objects' : data[ 'objects' ], 'total_amount' : total_amount } 
```

你应该完成了。

# visual-studio-2012 - 我在哪里可以找到 VS2012 最终版本中数据库项目的数据库模式视图？

> ID：12361359
> 
> 赞同：4
> 
> 时间：2012-09-11T00:56:56.303
> 
> 标签：visual-studio-2012

我正在为我在 VS2010 中创建的数据库项目寻找 VS2012 最终版本中的数据库模式视图。在早期版本中，我使用的是 SSDT 和 Power Tools。是否也需要在 VS2012 Final Release 中同时使用这两个工具。我无法在解决方案资源管理器上找到。请帮助我在哪里可以找到架构视图按钮来切换我的解决方案视图和架构视图。我在 Windows 7 Ultimate 上使用 VS2012 Ultimate x64 版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T03:15:19.270

正如您提到的，此功能在 SSDT 电动工具中，尽管尚未引入 VS2012 兼容性。

然而，根据 Sam Hughes [MSFT] 的说法，它不应该太远：

> 写于 2012 年 8 月 23 日
> 
> 我现在实际上正在研究 [VS2012 的 SSDT 电动工具]，但我不准备公开宣布“很快”以外的日期。

来源：http: [//visualstudiogallery.msdn.microsoft.com/9b0228c6-15d1-44de-9279-66dde12bf861](http://visualstudiogallery.msdn.microsoft.com/9b0228c6-15d1-44de-9279-66dde12bf861)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:48:12.810

你不能，因为那个小宝石是 SSDT 缺少的东西之一。

# android - Android - 如何使用 Intent 显示 Facebook 和 Twitter 的登录屏幕？

> ID：12361360
> 
> 赞同：0
> 
> 时间：2012-09-11T00:57:27.147
> 
> 标签：android, facebook, twitter, android-intent, login

我有一个带有 2 个按钮的屏幕，一个用于 Twitter，一个用于 Facebook。

我要做的就是在用户点击各自的按钮时将用户重定向到 Facebook/Twitter 的登录/注销屏幕（在他们各自的应用程序上）。

我怎样才能做到这一点？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:26:11.077

使用您的应用打开任何 url 使用它

```
 Intent httpIntent = new Intent(Intent.ACTION_VIEW);
httpIntent.setData(Uri.parse("http://m.facebook.com/"));                startActivity(httpIntent); 
```

并为 teitteer 做同样的事情，只需替换 url 使用以下链接进行演示[http://grabcodes.blogspot.com](http://grabcodes.blogspot.com)

# php - 嵌套 javascript 上的解析错误

> ID：12361365
> 
> 赞同：-1
> 
> 时间：2012-09-11T00:58:12.030
> 
> 标签：php, javascript

我试图将 java 脚本嵌套在 php echo 标记中。我收到这个错误

> 解析错误：语法错误，意外的 T_STRING，期待 ',' 或 ';'

我怎样才能正确地将该 java 脚本嵌套在那个 echo 标记中？

```
if($rowCount%5===0) { 
    echo '</table><br/><br/><script type='text/javascript' src='http://ads.com'></script><br/><br/><table align="center" width="70%"><tr>'; 
    $rowCount = 0; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:00:07.953

你混淆了引号：

```
echo '</table><br/><br/><script type="text/javascript" src="http://ads.com"></script><br/><br/><table align="center" width="70%"><tr>'; 
```

您应该`"`在单引号`'`字符串内使用双引号或使用转义单引号`\`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:00:15.587

你的报价还没有逃脱。用 \' 转义你的字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T01:00:23.480

您可以在 php 字符串中转义引号字符，也可以在字符串中使用双引号 (")。

# java - 从 Javascript 调用 Applet 方法

> ID：12361369
> 
> 赞同：4
> 
> 时间：2012-09-11T00:58:38.307
> 
> 标签：java, javascript, security, applet

我有一个小程序可以从特定文件夹上传一些文件并删除它们，但是当我从我的 javascript 代码调用一个小程序函数时出现问题，当我从`init()`它调用该函数时工作正常。

我的小程序代码：

```
public class Uploader extends Applet {
   String serverPath;
   String clientPath;
   private JSObject win;
   @Override
   public void init() {
       serverPath = getParameter("serverPath");
       clientPath = getParameter("clientPath");
       try {
           win = JSObject.getWindow(this);
       } catch (JSException e) {
           log.warning("Can't access JSObject object");
       }
       upload(topic,clientPath);
   }
   public void upload(String topic,String clientPath) {
       log.log(Level.SEVERE, "upload functiond");
       DefaultHttpClient client = new DefaultHttpClient();
       MultipartEntity form = new MultipartEntity();
       log.log(Level.SEVERE, "upload functiond2");
       try {
            File directory = new File(clientPath);
            log.log(Level.SEVERE, "upload functiond2.2");
            File[] files = directory.listFiles();
            log.log(Level.SEVERE, "upload functiond2.5");
            int i = 0;
            for (File file : files) {
                log.log(Level.SEVERE, "upload functiond2.6");
                i++;
                form.addPart("file" + String.valueOf(i), new FileBody(file));
                System.out.println("adding file " + String.valueOf(i) + " " + file);
                log.log(Level.SEVERE, "adding file " + String.valueOf(i) + " " + file);
            }
            log.log(Level.SEVERE, "upload functiond3");
            form.addPart("topic", new StringBody(topic, Charset.forName("UTF-8")));
            form.addPart("action", new StringBody(action, Charset.forName("UTF-8")));
            form.addPart("path", new StringBody(serverPath, Charset.forName("UTF-8")));
            HttpPost post = new HttpPost(serverPath);
      .... 
```

这是我的javascript代码：

```
document.applet.upload(title,"c:\scan"); 
```

当我从 javascript 调用时，只打印日志：

```
log.log(Level.SEVERE, "upload functiond2.2"); 
```

请注意，当我从小`init`程序的方法调用时，它工作正常。

我将我的代码包装成一个`PriviligedAction`，但只前进了一步并坚持下去

```
log.log(Level.SEVERE, "upload functiond2.5"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:05:00.187

Java 和 JS 的交互使安全性复杂化。JRE 不能信任 JS，因此它决定包含您的代码的整个“操作链”是不受信任的。有一种方法可以解决它。

代码需要包装在 a中[并](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html#method_summary)[`PrivilegedAction`](http://docs.oracle.com/javase/7/docs/api/java/security/PrivilegedAction.html)使用. 查看文档的顶部。（在方法上方）查看示例用法。[`AccessController`](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html#method_summary)`doPrivileged(..)``AccessController`

# iphone - 从 tableView 返回 NSInternalInconsistencyException:cellForRowAtIndexPath: 使用 Storyboard 时

> ID：12361370
> 
> 赞同：-3
> 
> 时间：2012-09-11T00:58:42.523
> 
> 标签：iphone, objective-c, ipad, ios5

总的来说，我对 Objective C 和 iOS 开发还很陌生，我仍在尝试了解它。但我正在尝试使用 Storyboards 制作一个简单的 iOS 应用程序，其中（截至目前）一个 UITableViewController 作为主页。我只是想让细胞出现。我的代码是：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   // Return the number of sections.
   return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   // Return the number of rows in the section.
   return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath
{
    static NSString *cervical_patterns = @"cervical_patterns";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cervical_patterns"];

   return cell;
} 
```

我密切关注第二个 iOS 观鸟教程应用程序[（链接）](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318)，并且之前获得了一个 UITableViewController 可以在模拟器中查看。但我不明白为什么这不像观鸟应用程序那样工作。

我得到的错误是：

```
'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath: 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:17:53.920

所以你正在使用 Storyboards 和 UITableViewController。这意味着您需要：

1.  转到您的故事板
2.  单击表格视图中的第一个单元格
3.  确保实用程序（右侧的窗口）正在显示
4.  单击属性检查器
5.  将“样式”从“自定义”更改为“基本”（如果您已自定义单元格，请使用自定义）
6.  单击标识符并确保它与您的 cellForRowAtIndexPath 方法（cervical_patterns）中的相同

还要检查您是否正确设置了类：

1.  转到您的故事板
2.  单击表格视图下的黑条
3.  确保实用程序（右侧的窗口）正在显示
4.  单击身份检查器
5.  确保在下拉菜单中选择了您的自定义类

我刚刚在 XCode 中完成了这项工作，并且效果很好（请注意，**不需要任何** `(cell == nil)`代码）。下面的具体代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"cervical_patterns";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the text and graphics of the cell

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T01:03:00.210

您需要实际创建单元格，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath
{
static NSString *cervical_patterns = @"cervical_patterns";
UITableViewCell *cell = [tableView         dequeueReusableCellWithIdentifier:@"cervical_patterns"];

    if (cell == nil) {
       cell = [[[UITableViewCell alloc]
               initWithStyle:UITableViewCellStyleDefault
             reuseIdentifier:cervical_patterns ] autorelease];

    }

   return cell;
} 
```

# xml - xslt - 引用前一个模板的输出结果

> ID：12361371
> 
> 赞同：2
> 
> 时间：2012-09-11T00:58:57.987
> 
> 标签：xml, xslt

我有一个 xsl:template 将一个附加节点插入到我的原始 XML 中。

然后，我想使用以下模板来引用该新节点，以帮助继续解析源文件。

我当前的方法（第二个模板）没有“看到”第一个模板中新插入的节点。我将如何处理这个？

非常感谢。

下面的示例非常简化，以表达我想要实现的目标。

启动 XML：

```
<master> 
 <node>
  <node1>hi</node1>
  <node2>bye</node2>
 </node>
</master> 
```

第一个模板：

```
<xsl:template match="master/node">
  <node>
  <xsl:apply-templates/>
  <node3>greetings</node3>
  </node>
</xsl:template> 
```

结果 XML 1：

```
<master> 
 <node>
  <node1>hi</node1>
  <node2>bye</node2>
  <node3>greetings<node3>
 </node>
</master> 
```

第二个模板：

```
<xsl:template match="master/node[node3='greetings']">
  <node>
   <newnode><xsl:value-of select="./node3"/>
  </node>
</xsl:template> 
```

预期结果：

```
<master> 
 <node>
  <newnode>greetings</newnode>
 </node>
</master> 
```

XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" omit-xml-declaration="no" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

        <!-- first template -->
<xsl:template match="master/node">
  <node>
  <xsl:apply-templates/>
  <node3>greetings</node3>
  </node>
</xsl:template>

        <!-- second template -->
<xsl:template match="master/node[node3='greetings']">
  <node>
   <newnode><xsl:value-of select="./node3"/></newnode>
  </node>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:57:55.610

在没有扩展的 XSLT 1.0 中，只有输入文档中的节点可以被模板匹配。要将模板应用于中间结果，您可以使用`nodeset`允许将模板应用于结果树片段的扩展（由 XSLT 1.0 实现广泛实现）。或者，您可以迁移到 XSLT 2.0。

有关节点集扩展的更多详细信息，请参阅[Dimitre Novatchev 对相关问题的回答](https://stackoverflow.com/questions/3880499/xslt-1-0-create-node-set-and-pass-as-a-parameter)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T04:19:39.063

Michael Sperberg-McQueen 给出了如何在 XSLT 1.0 中处理 RTF（结果树片段）的精确解释。

`node-set()`以下是使用 EXSLT扩展功能的完整解决方案示例：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:variable name="vrtfPass1">
   <xsl:apply-templates/>
  </xsl:variable>
  <xsl:apply-templates select="ext:node-set($vrtfPass1)/*"/>
 </xsl:template>

 <xsl:template match="master/node">
  <node>
   <xsl:apply-templates/>
   <node3>greetings</node3>
  </node>
 </xsl:template>

 <xsl:template match="master/node[node3='greetings']" priority="2">
  <node>
   <newnode><xsl:value-of select="./node3"/></newnode>
  </node>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<master>
 <node>
  <node1>hi</node1>
  <node2>bye</node2>
 </node>
</master> 
```

**产生了想要的正确结果：**

```
<master>
   <node>
      <newnode>greetings</newnode>
   </node>
</master> 
```

**请注意**，最好以这样的方式组织多通道处理，即在 Pass-N 中运行的所有模板都处于与在任何其他通道号中运行的所有模板不同的模式。这是为了避免在 Pass-N 和 Pass-M 中意外选择执行相同的模板时出错。

**使用模式，上述解决方案变为**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

  <xsl:template match="node()|@*" mode="pass2">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*" mode="pass2"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:variable name="vrtfPass1">
   <xsl:apply-templates/>
  </xsl:variable>
  <xsl:apply-templates mode="pass2"
  select="ext:node-set($vrtfPass1)/*"/>
 </xsl:template>

 <xsl:template match="master/node">
  <node>
   <xsl:apply-templates/>
   <node3>greetings</node3>
  </node>
 </xsl:template>

 <xsl:template mode="pass2" match="master/node[node3='greetings']"
      priority="2">
  <node>
   <newnode><xsl:value-of select="./node3"/></newnode>
  </node>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T08:02:54.700

在 XSLT 2.0 中，您只需将第一个模板的输出捕获到一个变量中，该变量的值是一个新的 XML 文档，可以像源文档一样进行处理。

在 XSLT 1.0 中，当您在变量中捕获模板的输出时，它不是一流的文档，而是只能以非常有限的方式处理的“结果树片段”。exslt:node-set() 扩展将其从“结果树片段”转换为可以正常处理的一流文档。

我希望这有助于总结其他人提供的非常详细的信息（尽管我确实觉得这些天，我们应该假设人们正在使用 XSLT 2.0，除非他们另有说明）。

# mysql - SQL中的子查询

> ID：12361373
> 
> 赞同：2
> 
> 时间：2012-09-11T00:59:09.453
> 
> 标签：mysql, sql, subquery

所以我有一个Olympic 数据库，基本布局是有一个包含competitornum、givenname 和familyname 的竞争者表（其他列不是必需的）还有一个包含竞争者数字和位置（1 到8 之间）的结果表。

我正在尝试获取名字和姓氏以及金牌、银牌和铜牌的总数（位置 = 1、2 或 3）

这是我到目前为止所得到的：

```
SELECT c.Givenname, c.Familyname, places AS TotalPlaces
FROM Competitors c,
        (SELECT COUNT(*) as places 
         FROM Results r, Competitors c 
         WHERE r.Competitornum = c.Competitornum
         AND r.Place > 0
         AND r.Place < 4) q 
```

然而，它返回每个人的名字，以及相同的总位置（恰好是 78）。例如

```
John Smith 78
Cassandra Jane 78
Bob Turner 78 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:02:18.307

目前，您的查询正在`CROSS JOIN`生产 caertesian 产品。

使用聚合函数（*count、max、min、...*）时，记录应按非聚合列分组。尝试这个，

```
SELECT c.Givenname, c.Familyname, COUNT(r.places) AS TotalPlaces
FROM Competitors c INNER JOIN Results r
        ON r.Competitornum = c.Competitornum
WHERE r.place IN (1,2,3)
GROUP BY c.Givenname, c.Familyname 
```

# objective-c - Objective-C，NSTask grep 字符串匹配，但不匹配？

> ID：12361375
> 
> 赞同：1
> 
> 时间：2012-09-11T00:59:16.257
> 
> 标签：objective-c, string, nstask

我有一个使用管道 grep 命令的 NSTask；输出匹配，并且 grep 与我的输入字符串匹配 - 尽管将其与原始字符串进行比较时，它以某种方式不匹配。我可能没有正确地将返回的字符串与另一个字符串进行比较？请帮忙。

```
NSString* filePath = [NSHomeDirectory() stringByAppendingPathComponent:@"/path/to/file"];

NSTask *task;
        task = [[NSTask alloc] init];
        [task setLaunchPath: @"/usr/bin/grep"];

NSString *words = @"words";

NSArray *arguments;
        arguments = [NSArray arrayWithObjects: @"-o", "-a", "-m 1", @"-h", @"-r", words, filePath, nil];

        [task setArguments: arguments];

NSPipe *pipe;
        pipe = [NSPipe pipe];
        [task setStandardOutput: pipe];

NSFileHandle *file;
        file = [pipe fileHandleForReading];

        [task launch];

NSData *data;
        data = [file readDataToEndOfFile];

NSString *string;
        string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];

NSLog (@"grep returned:\n%@", string);
NSLog (@"grep searched:\n%@", words);

    [task release];

if ([string isEqualToString:words]) {
    NSLog(@"match: %@", string);
} else {
    NSLog(@"failed");

    [string release]; 
```

它失败，控制台中的输出如下所示：

```
grep returned:
words
grep searched:
words
failed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:22:14.857

我相信 grep 在其输出后打印一个换行符，因此它会返回“words\n”，而您的字符串只是“words”。

# c - 由于 for 循环而使用 ffmpeg 段错误的应用程序？

> ID：12361377
> 
> 赞同：2
> 
> 时间：2012-09-11T00:59:16.940
> 
> 标签：c, ffmpeg, segmentation-fault, libavformat

我正在使用链接到 ffmpeg.org 文档页面 [[教程](http://dranger.com/ffmpeg/)] [[示例](https://github.com/mpenkov/ffmpeg-tutorial)] 的教程编写我的第一个 ffmpeg 应用程序。这是我的初始代码：

```
const char * fnmVideoIn = argv [1];
const char * fnmImageOut = argv [2];

av_register_all ();

// [] Open the file
AVFormatContext * pcxFormat;
if (avformat_open_input (&pcxFormat, fnmVideoIn, NULL, NULL)) {
    fprintf (stderr, "Could not open file %s for reading\n",
            fnmVideoIn);
    return -1;
}

// [] Get stream information
if (avformat_find_stream_info (pcxFormat, NULL) < 0) {
    fprintf (stderr, "Could not find stream info\n");
    return -1;
}

// [log] print stream info
av_dump_format (pcxFormat, 0, fnmVideoIn, 0); 
```

一切都很好。该程序运行没有错误并正确转储视频信息。但后来我进入了下一步......

```
...
// [log] print stream info
av_dump_format (pcxFormat, 0, fnmVideoIn, 0);

int ixVideoStream = -1, ixStrm;
for (ixStrm = 0; ixStrm < pcxFormat->nb_streams; ++ixStrm) {
    if (pcxFormat->streams [ixStrm]->codec->codec_type == AVMEDIA_TYPE_VIDEO) {
        ixVideoStream = ixStrm;
        break;
    }
} 
```

它以段错误退出。gdb 说：

```
(gdb) r test.mp4 out
...
Program received signal SIGSEGV, Segmentation fault.
0xb7f572c5 in avformat_open_input () from /usr/lib/libavformat.so.53 
```

由于调用*后*`avformat_open_input`添加的代码，段错误怎么可能？我什至用常规的 i=0; 测试了它。i<100 for 循环，它仍然存在段错误！这是一个错误吗？作为参考，我的系统是：

 *```
$ gcc --version
gcc (GCC) 4.7.0 20120414 (prerelease)

$ uname -srvmpio
Linux 3.3.4-1-ARCH #1 SMP PREEMPT Sat Apr 28 06:04:27 UTC 2012 i686 Intel(R) Core(TM)2 Duo CPU P7450 @ 2.13GHz GenuineIntel GNU/Linux

$ ffmpeg -version
ffmpeg version 0.10.2
built on Mar 17 2012 08:53:01 with gcc 4.6.3
configuration: --prefix=/usr --enable-libmp3lame --enable-libvorbis --enable-libxvid --enable-libx264 --enable-libvpx --enable-libtheora --enable-libgsm --enable-libspeex --enable-postproc --enable-shared --enable-x11grab --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libschroedinger --enable-libopenjpeg --enable-librtmp --enable-libpulse --enable-gpl --enable-version3 --enable-runtime-cpudetect --disable-debug --disable-static
libavutil      51\. 35.100 / 51\. 35.100
libavcodec     53\. 61.100 / 53\. 61.100
libavformat    53\. 32.100 / 53\. 32.100
libavdevice    53\.  4.100 / 53\.  4.100
libavfilter     2\. 61.100 /  2\. 61.100
libswscale      2\.  1.100 /  2\.  1.100
libswresample   0\.  6.100 /  0\.  6.100
libpostproc    52\.  0.100 / 52\.  0.100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:05:46.963

我不确定在其他地方找到解决方案的问题的礼仪，但无论如何我都会在这里自我回答，以供后代使用。

无论如何， to 的第一个参数`avformat_open_input`是指向`AVFormatContext`使用 分配的结构的指针`avformat_alloc_context`，或者如果您希望函数为您分配它，则为空指针。

在这里，我错误地为函数提供了一个*未初始化的指针*，这会触发偶尔的分段错误错误。与 for 循环的联系只是偶然的，可能与编译器如何构造生成的机器代码有关。*

# java - 在创建它的 try/catch 块之外访问文件对象 (Java)

> ID：12361378
> 
> 赞同：3
> 
> 时间：2012-09-11T00:59:40.367
> 
> 标签：java

我想创建一个 RandomAccessFile 对象（在 Java 中）并写入它并读取它。我的问题是，据我所知，我似乎需要在 try/catch 块中创建文件。如果我尝试在 try/catch 块之外创建它，然后像这样在块内初始化它，

```
RandomAccessFile valueFile; 

try
{
    valueFile = new RandomAccessFile("valuefile.txt", "rw");
    for (int i=0; i<numOfNums; i++)
        valueFile.writeDouble(randomizer.nextDouble()*200);
}
catch (Exception e)
{
    System.out.println("Couldn't find the values file.");
    System.exit(0);
}

for (int i=0; i<numOfNums; i++)
{
    double total = 0;
    valueFile.seek(0); // go to beginning of file to start reading it.
} 
```

然后我收到错误“未报告的异常 java.io.IOException；必须被捕获或声明为抛出”。（我还得到“变量 valueFile 可能尚未初始化”。）

但是当我*在*try/catch 中创建它时，像这样，

```
try
{
    RandomAccessFile valueFile = new RandomAccessFile("valuefile.txt", "rw");
    for (int i=0; i<numOfNums; i++)
        valueFile.writeDouble(randomizer.nextDouble()*200);
}
catch (Exception e)
{
    System.out.println("Couldn't find the values file.");
    System.exit(0);
}

for (int i=0; i<numOfNums; i++)
{
    double total = 0;
    valueFile.seek(0);
} 
```

我在程序的后面部分得到“找不到符号：变量 valueFile”。我认为那是因为 valueFile 被认为是 try/catch 块的本地文件？但是，我如何创建 valueFile 使其*不在*try/catch 块的本地？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T01:02:13.247

我认为您的第一种方法是正确的。该错误不是由文件创建引起的，而是由`valueFile.seek(0);`调用引起的。这也可能引发 IO 异常，因此您也需要在 try/catch 块中使用它。

***编辑：***正如乔恩指出的那样，您的代码仍然无法编译，因为`valueFile`可能未初始化。只需将其初始化为即可`null`。

```
RandomAccessFile valueFile = null; 
```

您可以改为使用 Jon 的回答中描述的一种方法来说服编译器`valueFile`在到达`valueFile.seek(0)`. 他的方法更安全，但只是初始化到`null`是一个很好的快速修复，这样你就不必用无法访问的`throw`语句来混乱你的代码。

但是，我认为如果您只移动声明、使用 new 进行初始化以及对同一块`RandomAccessFile`中的文件的所有访问，那会更好。`try`我想不出有什么好的理由把他们分开。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T01:01:55.413

第一个版本*几乎*是正确的——但有两个问题：

1.  您的方法没有声明它可以 throw `IOException`，但是您的使用`valueFile.seek`可能会引发异常。要么您需要更改方法声明，要么捕获并处理异常。

2.  编译器不知道它`System.exit(0)`永远不会正常返回——它认为这是一个正常的方法。所以你必须改变你的 catch 块以结束：

    ```
    return; 
    ```

    或者

    ```
    throw new AssertionError("We'll never get here."); 
    ```

    那时，编译器知道如果它超出了 try/catch 块，肯定会被分配`valueFile` *。*

请注意，如果您将*所有内容*移到块内`catch`，这两个问题都会消失 - 但我建议您最好*不要*抓住任何东西，而只是声明该方法可能会抛出`IOException`：

```
public void foo(int iterations) throws IOException {
    RandomAccessFile valueFile = new RandomAccessFile("valuefile.txt", "rw");
    for (int i = 0; i < iterations; i++) {
        valueFile.writeDouble(randomizer.nextDouble()*200);
    }

    for (int i = 0; i< iterations; i++) {
        double total = 0;
        valueFile.seek(0);
        // Presumably you'd read the contents here?
    }
} 
```

...除非您*还*应该在完成文件后关闭文件，如果您使用的是 Java 7，则使用 try-with-resources 语句，否则仅使用 try/finally 块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T01:29:38.983

```
RandomAccessFile valueFile; 
```

needs to be:

```
RandomAccessFile valueFile = null; 
```

> (I also get "variable valueFile might not have been initialized".)

To fix the above.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T01:02:15.280

在 try catch 块之外声明变量，然后从其中加载。

```
RandomAccessFile valueFile;

try
{
    valueFile = new RandomAccessFile("valuefile.txt", "rw");
    for (int i=0; i<numOfNums; i++)
        valueFile.writeDouble(randomizer.nextDouble()*200);
} 
```

# vim - 如何阻止 vim 在缩进/前导空格中绘制水平线？

> ID：12361382
> 
> 赞同：2
> 
> 时间：2012-09-11T01:00:07.237
> 
> 标签：vim

> **可能重复：**
> [VIM：不要在 HTML 链接中为前导空格加下划线](https://stackoverflow.com/questions/10150659/vim-dont-underline-leading-whitespace-in-html-links)

我在 vim 中的一些行在前导空白处出现奇怪的水平线。我不知道为什么。也许我已经安装了一个插件？

这是一张图片

![](../Images/89c68a3613773257cc887280f9aeadc2.png)

只有一些线得到它们。我试过关闭和打开文件。

有谁知道如何关闭这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:02:51.437

这些行是超链接下划线语法突出显示的一部分。请注意，它们出现在`<a>`标签内。一些配色方案不会在 内部的超链接内容下划线`<a>`，但如果您想继续使用相同的配色方案，则需要修改或覆盖语法文件`HtmlHiLink`中的指令。`html.vim`

# c# - 通过字符串表示确定条形码类型

> ID：12361387
> 
> 赞同：0
> 
> 时间：2012-09-11T01:00:34.380
> 
> 标签：c#, barcode

有没有办法通过它的字符串表示来确定线性条形码类型？我的意思是，我有一个公认的条形码“063211012927”，怎么知道那是什么类型的？（在这种情况下，它是 UPC-A。）用 C# 实现会很棒，但算法也很受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:01:49.877

不，因为该字符串只是解码后的文本，它没有说明用于存储它的条形码符号系统。

您可以根据大小和内容（即最大数据长度和只有数字的事实）做出一些假设，但是您经常会出错，这不是我所说的“解决方案”。

# python - 如何优化通用洪水填充算法以防止堆栈溢出？

> ID：12361388
> 
> 赞同：-1
> 
> 时间：2012-09-11T01:00:53.340
> 
> 标签：python, stack-overflow, flood-fill

Flood-fill算法的通用实现遇到堆栈溢出，有什么办法可以优化吗？我正在使用此算法在建筑模型中找到不同的空隙区域。我对这些模型进行体素化，然后解析通过简化版本的 0 和 1 表示的体素化结果。0 和 1 表示体素是否存在。0 存在，1 不存在。然后我必须找到连接 0 的不同子集，换句话说，就是 3D 建筑物内的连接空隙空间。

示例 2D 输入数据示例存储在列表中，3D 将是列表中的多个条目。(Z, Y, X) = (0, 4, 9)

```
11000111
11000000
10001110
10111110 
```

维基百科提出了几种补救措施，但我不知道如何实施。这是现有的算法，我已经为更密集的数据设置了“sys.setrecursionlimit(10000)”。这对某些人来说很好，但对于更密集的 (Z, Y, X) = (50, 46, 22) 或更大，因为建筑模型变得更加复杂，有数百个房间，我收到堆栈溢出消息

递归函数会发生错误堆栈溢出：

```
File "ZoneFinding3D_Baselined.py", line 104, in findZero
if (0 <= row < row_len) and (0 <= col < col_len) and (0 <= z < height_len) and (col, row, z) not in walked:
MemoryError: Stack overflow 
```

代码：

```
 def findZero(subset_in, col, row, z, height_len, col_len, row_len, layers3D, walked, output):
    if (0 <= row < row_len) and (0 <= col < col_len) and (0 <= z < height_len) and (col, row, z) not in walked:
        walked.append((col, row, z))
        if layers3D[z][row][col] == 0: #layers3D is in format (z, row, col) which is the actual hierarchy of input data, Z, Y, X
            if subset_in is not None:
                subset = subset_in
            else:
                subset = []

            subset.append((col, row, z))
            findZero(subset, col+1, row, z,  height_len, col_len, row_len, layers3D, walked, output)
            findZero(subset, col, row+1, z,  height_len, col_len, row_len, layers3D, walked, output)
            findZero(subset, col-1, row, z,  height_len, col_len, row_len, layers3D, walked, output)
            findZero(subset, col, row-1, z,  height_len, col_len, row_len, layers3D, walked, output)
            findZero(subset, col, row, z+1,  height_len, col_len, row_len, layers3D, walked, output)
            findZero(subset, col, row, z-1,  height_len, col_len, row_len, layers3D, walked, output)

            if subset_in is None:
                output.append(subset)

def checkThrough(layers3D, gridSizes):
    walked = []
    output = []
    countX=0; countY=0; countZ=0
    for z in range(0, gridSizes[2]):
        for row in range (countY, countY+gridSizes[1]):
            for col in range (0, gridSizes[0]):
                col_len = gridSizes[0]
                row_len = gridSizes[1]
                height_len = gridSizes[2]

                if (col, row, z) not in walked: #walked takes format of (col, row, z), modified from (z, row, col)
                    findZero(None, col, row, z, height_len, col_len, row_len, layers3D, walked, output)
    return output 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:29:39.093

You can use `scipy.ndimage.label` to do this quickly:

```
import numpy as np
from scipy.ndimage import label
a = np.random.randint(0, 2, (4, 6))
b = label(a)
print a
print b 
```

the output is:

```
[[1 0 1 1 0 0]
 [1 0 0 0 0 0]
 [1 1 0 0 0 1]
 [0 1 1 0 1 1]]
(array([[1, 0, 2, 2, 0, 0],
       [1, 0, 0, 0, 0, 0],
       [1, 1, 0, 0, 0, 3],
       [0, 1, 1, 0, 3, 3]]), 3) 
```

`label()` finds all connected 1s, so you need to reverse 0 & 1 for your data first.

# javascript - keydown 效果，如果 keyup 在效果完成之前发出警报

> ID：12361390
> 
> 赞同：2
> 
> 时间：2012-09-11T01:01:36.233
> 
> 标签：javascript, jquery, keydown, keyup

我的目标：在效果发生时按住空格键（模拟指纹扫描）。如果用户在效果完成之前释放键，我想显示一条确认消息。keydown 部分工作正常并继续执行“处理”功能，但如果在效果完成之前释放它，则不会在 keyup 上显示错误消息。这就是我所拥有的...

```
var active = false;

$(document).one("keydown", function(e) {
    if ((e.keyCode == 32) && (active == false)) {
      active = true;
      $(".panel_1").slideDown(5000, function() {
        active = false;
        $(".panel_1").slideUp(2000, function() {process(); })
      }); 
    }
});

$(document).one("keyup",function(e) {
    if ((e.keyCode == 32) && (active == true)) {
      var r=confirm("Oops! You must HOLD down the space key until scan is complete. Press OK to try again, or Cancel to return to homepage.");
      if (r==true) {
        reset();
      }
      else {
        window.location.replace("home.html");
      } 
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:18:00.887

您的代码似乎在这里工作：http: [//jsfiddle.net/D52eq/](http://jsfiddle.net/D52eq/)但请注意，只有在效果阶段释放空格键时才会出现确认消息`.slideDown()`- 您在调用之前`active = false;` *进行设置。*`.slideUp()`

如果您想确认是否在整个动画完成之前释放了空格键并`process()`调用，请尝试以下操作：

```
$(document).one("keydown", function(e) {
    if ((e.keyCode == 32) && (!active)) {
      active = true;
      $(".panel_1").slideDown(5000).slideUp(2000, function() {
         process();
         active = false;
      })
    }
}); 
```

请注意，然后您可以将 and 链接`.slideDown()`起来`.slideUp()`，您不需要提供回调函数到`.slideDown()`. 我也换成`active == false`了`!active`.

演示：http: [//jsfiddle.net/D52eq/1/](http://jsfiddle.net/D52eq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:14:11.767

确认您在第一个 slideDown 动画期间释放了键。根据您的代码，一旦它开始向上滑动，您的活动将设置为 false，然后将其设置为不会触发 keyup 事件。

另外作为旁注，我建议在 JavaScript 中使用三重 =。

# iphone - 无法用 iPod 音乐初始化 AVPlayer

> ID：12361392
> 
> 赞同：0
> 
> 时间：2012-09-11T01:01:49.877
> 
> 标签：iphone, ios, avplayer, mpmediaitem

我正在尝试使用设备 iPod 库中的歌曲内容初始化 AVPlayer。我的根控制器的 viewDidLoad 中有以下代码（将其提取到测试应用程序中以隔离它）。

```
MPMediaQuery* query = [MPMediaQuery songsQuery];

MPMediaItem* firstItem = [query.items objectAtIndex:0];
NSURL* url = [firstItem valueForKey:MPMediaItemPropertyAssetURL];
AVPlayerItem* playerItem = [[AVPlayerItem alloc] initWithURL:url];

self.player = [[AVPlayer alloc] initWithPlayerItem:playerItem];
[self.player play]; 
```

代码总是在我在 firstItem 上调用 valueForKey 以获取资产 URL 的行处抛出以下异常：

> *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[valueForUndefinedKey:]：该类不符合键assetURL 的键值编码。” ***首先抛出调用栈：

代码对我来说似乎很简单，不确定我在这里可能缺少什么，任何帮助都会很棒。这是 iPhone 4S 上的 iOS 5.1。尝试同时启用 iTunes Match 和仅具有本地音乐的设备，结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T04:06:21.340

您需要改用[valueForProperty:](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMediaEntity_ClassReference/Reference/Reference.html#//apple_ref/occ/instm/MPMediaEntity/valueForProperty%3a)方法。

# java - Java 休眠错误

> ID：12361397
> 
> 赞同：0
> 
> 时间：2012-09-11T01:02:40.887
> 
> 标签：java

我想使用hibernate插入到我的postgresql数据库中，我完全或没有弄清楚为什么我一直收到这个错误，我想做的是让hibernate创建我的数据库表和列并插入到创建的表. 所以我的第一个错误是关于丢失的 jar 文件，这是我已经添加到我的 Hibernate 库中的 slf4j，但是在我再次运行应用程序后会弹出新错误，所以这是我的错误：

```
90 [main] INFO org.hibernate.annotations.common.Version - Hibernate Commons 

Annotations 3.2.0.Final
100 [main] INFO org.hibernate.cfg.Environment - Hibernate 3.6.10.Final
100 [main] INFO org.hibernate.cfg.Environment - hibernate.properties not found
100 [main] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
100 [main] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
150 [main] INFO org.hibernate.cfg.Configuration - configuring from resource: /hibernate.cfg.xml
150 [main] INFO org.hibernate.cfg.Configuration - Configuration resource: /hibernate.cfg.xml
Exception in thread "main" org.hibernate.HibernateException: /hibernate.cfg.xml not found
    at org.hibernate.util.ConfigHelper.getResourceAsStream(ConfigHelper.java:170)
    at org.hibernate.cfg.Configuration.getConfigurationInputStream(Configuration.java:2176)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:2157)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:2137)
    at org.hibernate_main.HibernateMain.main(HibernateMain.java:13) 
```

这是我的 Jar 文件（在 Hibernate 库中）：

```
hibernate3.jar
antlr-2.7.6.jar
commons-collections-3.1.jar
dom4j-1.6.1.jar
javassist-3.12.0.GA.jar
jta-1.1.jar
slf4j-api-1.6.1.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
postgresql-9.1-902.jdbc4 
```

我的代码：配置（XML）

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- ~ Hibernate, Relational Persistence for Idiomatic Java ~ ~ Copyright (c) 2010, Red Hat Inc. or third-party contributors as ~ indicated by the @author tags or express copyright attribution ~ statements applied by the authors. All third-party contributions are ~ distributed under license by Red Hat Inc. ~ ~ This copyrighted material is made available to anyone wishing to use, modify, ~ copy, or redistribute it subject to the terms and conditions of the GNU ~ Lesser General Public License, as published by the Free Software Foundation. ~ ~ This program is distributed in the hope that it will be useful, ~ but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY ~ or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License ~ for more details. ~ ~ You should have received a copy of the GNU Lesser General Public License ~ along with this distribution; if not, write to: ~ Free Software Foundation, Inc. ~ 51 Franklin Street, Fifth Floor ~ Boston, MA 02110-1301 USA -->

<!DOCTYPE hibernate-configuration SYSTEM "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd" PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN">
-<hibernate-configuration> -<session-factory> 
<!-- Database connection settings -->
 <property name="connection.driver_class">org.postgresql.Driver</property> 
 <property name="connection.url">jdbc:postgresql://localhost:5432:MYPOS</property> 
 <property name="connection.username">postgres</property> 
 <property name="connection.password"/>perbert101
<!-- JDBC connection pool (use the built-in) -->
 <property name="connection.pool_size">1</property> 
<!-- SQL dialect -->
 <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property> 
<!-- Disable the second-level cache -->
 <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property> 
<!-- Echo all executed SQL to stdout -->
 <property name="show_sql">true</property> 
<!-- Drop and re-create the database schema on startup -->
 <property name="hbm2ddl.auto">create</property> 
<!-- Names the annotated entity class -->
 <mapping class="org.user_detail.dto.UserDetail"/> </session-factory> </hibernate-configuration> 
```

用户详细信息类：

```
package org.user_detail.dto;
import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class UserDetail {
    @Id
    private int userId;
    private String userName;

    public int getUserId() {
        return userId;
    }
    public void setUserId(int userId) {
        this.userId = userId;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }

} 
```

我的主要课程：

```
package org.hibernate_main;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.user_detail.dto.UserDetail;

public class HibernateMain {
    public static void main(String[] args){
        UserDetail user = new UserDetail();
        user.setUserId(1);
        user.setUserName("Jerome");

        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        Session session = sessionFactory.openSession();
        session.beginTransaction();
        session.save(user);
        session.getTransaction().commit();
    }
} 
```

伙计们，你能告诉我这个错误是什么以及如何修复它们，以及如何测试 XML 中的数据库连接是成功还是失败。多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:06:56.120

我认为

```
 /hibernate.cfg.xml not found 
```

很清楚。

确保它在 CLASSPATH 中。

您还可以在以下位置指定它：

```
return new Configuration().configure("/path/to/hibernate.cfg.xml" ).buildSessionFactory(); 
```

在你上面的代码中

# php - 无论我做什么，我都无法缓存我的动态 php 文件

> ID：12361402
> 
> 赞同：1
> 
> 时间：2012-09-11T01:03:47.313
> 
> 标签：php, apache, caching

好吧，我的主页加载速度相对较慢......嗯，不是真的，大约需要一秒半。它是我网站上最慢的页面。

现在的问题是，对于未登录的用户，主页是当天 100% 的静态内容。

所以，我想这样做，如果你没有登录，那么内容就会被缓存在那天（如果他们已经登录，那么我不希望它被缓存）。

在过去的几个小时里，我一直在撕扯我的眼球，诅咒每一个有名的神，像疯子一样拿着斧头到处跑，试图让这件事起作用。我有网站的其他部分目前使用缓存很好，例如 CSS/JS/图像，以及所有这些，我真的很容易做到并且没有我现在遇到的这个问题。

直言不讳...它不会*******缓存...我使用的是 HTTPS，但我不明白为什么它不会让我缓存主 html 文件，如果它让我缓存 JS/CSS/图像。

无论如何，所以我想你想知道我尝试了什么......

设置缓存控制：

```
date_default_timezone_set('Europe/Jersey');
$date = date("Y-m-d");
$date = date("D, d M Y", strtotime(date("d M Y", strtotime($date)) . " +1 day"));
$udate = date("D, d M Y", strtotime(date("d M Y", strtotime($date)) . " -1 day"));

header('Content-Type: text/html');
header("Cache-Control: max-age=86400, public, must-revalidate");
header("Last-Modified: " . $udate . " 00:00:01 GMT");
header('Expires: ' . $date . ' 00:00:01 GMT'); 
```

发送标头：

```
Cache-Control:max-age=604800, public, must-revalidate
Connection:Keep-Alive
Content-Encoding:gzip
Content-Language:en-GB
Content-Type:text/html; charset=utf-8
Date:Tue, 11 Sep 2012 00:55:11 GMT
Expires:Wed, 12 Sep 2012 00:00:01 GMT
Keep-Alive:timeout=2, max=75
Last-Modified:Tue, 11 Sep 2012 00:00:01 GMT
Server:Apache
Transfer-Encoding:chunked
Vary:Accept-Encoding 
```

它缓存了吗？不，chrome 坚持以各种方式加载此页面，它会直接转到源，即使它已经存在（从缓存加载图像/js/css 等时）。

所以然后我尝试了ETags：

```
function caching_headers ($file, $timestamp) {
    $gmt_mtime = gmdate('r', $timestamp);
    header('ETag: "'.md5($timestamp.$file).'"');
    header('Last-Modified: '.$gmt_mtime);
    header('Cache-Control: public');

    if(isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) || isset($_SERVER['HTTP_IF_NONE_MATCH'])) {
        if ($_SERVER['HTTP_IF_MODIFIED_SINCE'] == $gmt_mtime || str_replace('"', '', stripslashes($_SERVER['HTTP_IF_NONE_MATCH'])) == md5($timestamp.$file)) {
            header('HTTP/1.1 304 Not Modified');
            exit();
        }
    }
}

date_default_timezone_set('Europe/Jersey');

$date = date("D, d M Y") . " 0:0:0 GMT";

caching_headers('homepage', strtotime($date));

echo $_SERVER['HTTP_IF_MODIFIED_SINCE']; 
```

它缓存了吗？不，它总是告诉我 HTTP_IF_MODI... 没有设置

我尝试了互联网上的许多其他代码，都失败了。

我错过了什么，必须有一种方法来缓存 html 文件，我见过很多网站都这样做。

我会很快解释的。

我的主页在用户未登录时具有每天更改一次的静态内容。就带宽大小而言，此页面自然拥有最多的内容，然后是我网站上的任何其他页面。

如果用户未登录，我想通过缓存内容来加速此页面，并且缓存仅持续到第二天早上 0:0:0。我需要它在 PHP 中，而不是在 htaccess 中，所以我可以检查用户是否已登录等。

我相信我需要使用 ETAG，但无论出于何种原因，我都无法让它们工作。据我了解，我使用的这个脚本叫做 minify，使用 ETAG 很好，所以并不是我的服务器禁用了它们。

老实说，我不知道我在用 ETAG 做什么，但帮助非常有限（每次有人寻求帮助时，唯一的回复是有人告诉他禁用它。）。

[编辑] 根据 php 文档尝试了基本缓存：

```
header("Pragma: public");
header("Cache-Control: max-age=604800");
header('Expires: ' . $date . ' 00:00:01 GMT'); 
```

没有骰子...

# iphone - 快速枚举期间实际发生了什么？

> ID：12361404
> 
> 赞同：3
> 
> 时间：2012-09-11T01:04:13.873
> 
> 标签：iphone, objective-c, arrays, casting, enumeration

> **可能重复：**
> [为什么当我指定 NSStrings 时快速枚举不跳过 NSNumbers？](https://stackoverflow.com/questions/6918620/why-does-fast-enumeration-not-skip-the-nsnumbers-when-i-specify-nsstrings)

我最近在使用快速枚举时注意到了一些意外行为。事后看来，我可能期望快速枚举能做的比预期的要多，所以我正在寻找一些关于它实际上是如何工作的澄清。

假设我有一个父类**Shape**，它有 2 个子类**3SidedShape**和**4SidedShape**。我有一个名为**myShapes**的数组，其中包含来自 3 面和 4 面类的对象。

如果我想搜索数组**myShapes**，但我只关心 3 个边的形状，我正在做的是：

```
 for (3SidedShape *shape in myShapes) 
```

我的想法是我只会迭代**3SidedShape**类的对象，但事实并非如此？我想无论他们喜欢与否，我都将所有对象都转换为**3SidedShape 。**我晚上将对象作为完全不同的课程归还。诚然，我没有调用两个类都没有的任何方法，但我没想到类兄弟姐妹会如此轻松地重新转换？我只是在这里走运，还是你真的可以列举任何你喜欢的班级，不管关系如何？谁能解释枚举期间实际发生的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:55:08.947

在*for...in*循环中指定的类型，也就是快速枚举，将集合中的所有元素转换为指定的类型。它们“如此容易地重新铸造”的原因是铸造不会将一种类型的对象变成另一种类型的对象（这将如何工作？）。这是对编译器的一个提示，告诉它将该对象视为另一种类型，就好像在说“别担心，这个对象属于*(insert type)*，所以类型检查它是这样的。” 向对象发送它无法处理的消息，但它被转换为可以处理的类型，仍然会使应用程序崩溃。你应该做的是：

```
for (id shape in myShapes){
    if ([shape isKindOfClass: [3SidedShape class]]){
        //insert code here
    }
} 
```

该代码不假定任何类型，使用[自省仅对](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Introspection.html)*3SidedShape*类型或 3SidedShape 的子类的*对象*执行代码。对于精确检查（不包括子类），请使用*isMemberOfClass:*。小心使用*isMemberOfClass:*来测试类簇 (NSNumber) 中的类的成员资格，但是，因为它们的内部实现更复杂。

# javascript - 根据图像高度添加类

> ID：12361405
> 
> 赞同：-1
> 
> 时间：2012-09-11T01:04:21.373
> 
> 标签：javascript, jquery

如果照片的高度超过 450 像素高，有没有办法让页面上的每个图像都具有“.photo”类并将“.vertical”类应用于它所在的文章？我这样做的原因是因为我希望高大的照片不那么宽，因此添加 .vertical 类来设置它所在的文章的样式，使文章的宽度为 250 像素，而不是正常的 500 像素宽度......

基本上，如果在页面上显示照片的 500px 版本并且 500px 照片的高度超过 450px，它应该通过向该文章添加类 .vertical 来调整其所在的整篇文章的大小。

这听起来令人困惑，但不是一旦你理解它。我是新手，所以代码很受欢迎，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:06:17.540

就在这里。

首先获取图像高度。[如何使用 javascript 获取图像大小（高度和宽度）？](https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript)

[`.addClass()`](http://api.jquery.com/addClass/)如果高度符合您的要求，然后使用添加一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:08:21.957

尝试：

```
$('img.photo').each(function(){
    if($(this).height() > 450)
        $(this).closest('article').addClass('vertical');
}); 
```

更新为向父文章添加类。`article`根据需要更改选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T01:08:29.897

尝试这个：

```
$(".photo").each(function(){
  var el = $(this);
  if (el.height() > 450)
    el.addClass("vertical");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T01:09:05.210

就像是：

```
$(".photo").each(function(i) { 
  if ($(i).height() >450) {
     $(i).addClass('yourclass');
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T01:09:49.297

希望这会让你开始：

```
$('img.photo').each(function(index) {
    var height = $(this).height();
    if (height > 450) {
        $(this).parent().addClass('vertical');
    }
}); 
```

编辑：

关于将 .vertical 类添加到包含图像的文章中，这取决于您的标记。@anonymous 有一个可能的想法，即找到最接近 .article 类的元素。如果直接父级是包含图像的文章，您也可以在我上面编辑的代码中使用父级。

# eclipse - Eclipse Indigo“安装新软件”在 Ubuntu 10.04.4 中禁用了“下一步”按钮

> ID：12361411
> 
> 赞同：1
> 
> 时间：2012-09-11T01:06:23.623
> 
> 标签：eclipse, ubuntu-10.04

我刚刚下载了适用于 Ubuntu 10.04.4 的 Eclipse Java EE IDE（64 位）。我试图通过使用帮助-> 安装新软件来安装一些插件。但是，当我在随后出现的对话框中选择任何站点时，“下一步”按钮未启用。

我尝试卸载并重新安装eclipse，获取eclipse的tar文件，甚至是eclipse的经典IDE，以root身份运行eclipse，似乎没有任何效果。

有人可以告诉我有什么问题吗？

PS我附上问题的截图![](../Images/d9fe9a0e65dd9d5df23d35183d1b58a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:31:15.367

看起来安装对话框被垂直挤压了。应该有一大堆东西要安装。尝试使对话框更大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-05T01:04:52.967

单击**已安装**链接，查看插件是否已安装。卸载它 -> 重新启动 -> 重复 -> 应该启用下一步按钮

# ios - 有没有办法检测屏幕键盘上的触摸？

> ID：12361423
> 
> 赞同：1
> 
> 时间：2012-09-11T01:08:26.837
> 
> 标签：ios, xcode

我不在乎按下了哪个键，按下了多长时间，或者类似的东西。我所需要的只是一种检测用户是否触摸了屏幕的方法，即使它恰好位于被键盘覆盖的屏幕部分。

我的目标是检测缺少交互以将应用程序“重置”到默认状态，如果离开足够长的时间 - 考虑一个“信息亭模式”应用程序。问题是我无法检测到键盘何时被触摸，因为键盘显然会拦截所有触摸事件，甚至在我的客户窗口可以处理它们之前。

编辑：

考虑（并忽略）仅使用键盘显示和隐藏通知——如果用户正在积极打字，我们需要延长屏幕显示。由于我们使用 UIWebViews 来显示某些东西，所以我们也不能使用 UITextViews 或 UITextFields 的委托方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:40:39.867

听起来好像检测到键盘和其他地方的所有触摸就足够了。我们可以通过继承`UIApplication`覆盖来做到这一点`sendEvent:`。

我们将`UIApplicationDelegate`使用新消息扩展协议`application:willSendTouchEvent:`，并让我们的`UIApplication`子类在处理任何触摸事件之前将消息发送给它的委托。

### 我的应用程序.h

```
@interface MyApplication : UIApplication
@end

@protocol MyApplicationDelegate <UIApplicationDelegate>
- (void)application:(MyApplication *)application willSendTouchEvent:(UIEvent *)event;
@end 
```

### 我的应用程序.m

```
@implementation MyApplication

- (void)sendEvent:(UIEvent *)event {
    if (event.type == UIEventTypeTouches) {
        id<MyApplicationDelegate> delegate = (id<MyApplicationDelegate>)self.delegate;
        [delegate application:self willSendTouchEvent:event];
    }
    [super sendEvent:event];
}

@end 
```

我们需要让我们的应用委托符合`MyApplicationDelegate`协议：

### AppDelegate.h

```
#import "MyApplication.h"

@interface AppDelegate : UIResponder <MyApplicationDelegate>
// ... 
```

### AppDelegate.m

```
@implementation AppDelegate

- (void)application:(MyApplication *)application willSendTouchEvent:(UIEvent *)event {
    NSLog(@"touch event: %@", event);
    // Reset your idle timer here.
} 
```

最后，我们需要让应用程序使用我们的新`MyApplication`类：

### 主文件

```
#import "AppDelegate.h"
#import "MyApplication.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv,
            NSStringFromClass([MyApplication class]),
            NSStringFromClass([AppDelegate class]));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T01:29:47.287

使用keyboardShow 和keyBoardHide Notifications 来设置计时器怎么样？x 秒后，您将应用程序返回到所需的状态。

如果您愿意，甚至可以重置滚动视图代表或文本字段代表中的计时器。

看一眼：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                  selector:@selector(keyboardDidShow:) 
                                      name:UIKeyboardDidShowNotification 
                                    object:nil]; 
```

和这样的方法：

```
- (void)keyboardDidShow:(NSNotification *)note {
    idleTimer = [NSTimer scheduledTimerWithTimeInterval:120 
                         target:nil 
                       selector:@selector(yourMethodHere) 
                       userInfo:nil 
                        repeats:NO]; 
} 
```

请务必在 .h 和 .m 文件中声明并@synthesize 您的计时器。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T01:32:29.857

UITextField 或 UITextView 有一个委托方法来检测用户何时键入内容：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
   // user tapped a key
   //
   // reset your "idle" time variable to say user has interacted with your app
} 
```

请记住遵守 UITextField 或 UITextView 协议，具体取决于您使用的协议（如果您同时拥有文本字段和文本视图，则可能两者兼有）。还要记住将每个文本字段或文本视图的委托标记为视图控制器。

```
<UITextFieldDelegate,UITextViewDelegate> 
```

## 更新的答案

罗恩，不确定你是否真的用谷歌搜索过，但我发现了这个：

[iPhone：检测自上次屏幕触摸以来的用户不活动/空闲时间](https://stackoverflow.com/questions/273450/iphone-detecting-user-inactivity-idle-time-since-last-screen-touch)

# ios - MonoTouch：从 ALAssetsLibrary.AssetForUrl 中获取图像

> ID：12361425
> 
> 赞同：5
> 
> 时间：2012-09-11T01:09:02.683
> 
> 标签：ios, xamarin.ios, alassetslibrary

在 MonoTouch 中：

我正在将相机中的图像放入 PhotoAlbum：

```
ALAssetsLibrary library = new ALAssetsLibrary();
library.WriteImageToSavedPhotosAlbum(photo.CGImage, meta, (assetUrl, error) => {
    library.AssetForUrl(assetUrl, GotAsset, FailedGotAsset);
}); 
```

一切都在`Photo`那里，运作良好。

在委托上`GotAsset`，我试图取出图像，但只有缩略图在那里。图像在哪里？

```
 void GotAsset(ALAsset asset)
    {
         //asset has only thumbnail info???
    } 
```

这是资产的样子：

![在此处输入图像描述](../Images/b7a6a265904932ea7ed1570e4ee5e8d2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:18:56.353

您在运行时看不到*设备上*的每个属性，因为默认情况下，（托管）链接器已启用（**Link SDK**）。这将删除任何代码，包括您的应用程序未使用的属性（并节省大量 KB 和部署时间）。

您可以尝试通过添加您自己的资产（在模拟器中）在模拟器上调试它（默认为**Don't link**）。另一种方法是暂时禁用设备版本上的链接器。

在任何一种情况下，您[`ALAsset`](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html)都应该显示所有记录的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:25:26.767

基于@Poupou 的帮助，这里是我添加使其工作的代码：

```
 void GotAsset(ALAsset asset)
    {
        ALAssetRepresentation rep = asset.DefaultRepresentation;
        var iref = rep.GetImage();
        if(iref!=null)
            DoStuffWithUIImage(UIImage.FromImage(iref));
    } 
```

# linux - 在单个命令中将 pgrep 重定向到文件两次

> ID：12361437
> 
> 赞同：0
> 
> 时间：2012-09-11T01:10:27.333
> 
> 标签：linux, bash, shell

我有一个在 Linux 中练习 BASH 的练习，但我很坚持。它说：

“在命令行中列出所有带有 BASH 术语的进程。将输出重定向到文件。再执行两次，将其添加到文件末尾。然后列出按 PID 排序的命令。只需一个命令即可。”

我知道你必须使用 | 和>>....

我尝试使用这样的东西

pgrep -fl bash |

但我不知道如何继续......

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:59:17.643

这可能是一种方式——

```
$for i in 1 2 3;do  ps -ef |grep bash >> out.log;done;cat out.log|sort -n 
```

您在这里所做的是您`grep`将单词`bash`in 处理一次并将其附加到名为 的文件`out.log`中，然后再执行两次（即总共 3 次）。然后你以ed 方式`cat`输出`out.log`文件。`sort`

给我输出

```
users 4383078 4575750   0 09:56:29  pts/1  0:00 grep bash
users 4460634 4575750   0 09:54:06  pts/1  0:00 grep bash
users 4719330 4575750   0 09:57:28  pts/1  0:00 grep bash 
```

# javascript - 使用 UIWebView 提交表单

> ID：12361439
> 
> 赞同：2
> 
> 时间：2012-09-11T01:10:34.360
> 
> 标签：javascript, iphone, ios, uiwebview, onsubmit

我有这个表格：

```
<form id="form1" name="form1" method="post" action="#" onsubmit="window.open('http://www.google.com','Google','width=800,height=500,top=5000,left=6000,status=yes,resizable=yes,scrollbars=yes');">
<input type="submit" name="submit" onclick="doSubmit();" id="submit" value="Submit" />
</form> 
```

属于它的javascript是：

```
<script type="text/javascript">
    function doSubmit () {
        form1.submit();
    }
</script> 
```

当我在本机 safari 应用程序中测试它时一切顺利并且 onsubmit 操作会打开一个新选项卡，但是当我在 UIWebView 中测试它时，不会触发 onsubmit。

表格提交并注册在

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

并且所有方法都设置为拦截弹出窗口

```
[webView stringByEvaluatingJavaScriptFromString:@"window.open = function( inurl, blah, blah2 ) {  document.location = 'newTab:'+inurl; }"]; 
```

在适当的 UIWebView 委托方法中。

关于它为什么不发射的任何想法？

谢谢！

# mysql - mysql重启后第一次查询很慢

> ID：12361442
> 
> 赞同：2
> 
> 时间：2012-09-11T01:11:18.843
> 
> 标签：mysql, bash, myisam

我对 mysql 的后端没有经验，并且遇到以下情况。

每天晚上我都有一个脚本来关闭我们的 mysql 数据库并将 mysql 文件夹同步到另一个。然后打开mysql。

稍后，通过 bash 脚本或 Web 应用程序访问 mysql。

每次重新启动后，通过 bash 脚本或 webapp 传入的前几个查询非常慢（需要 10 秒的东西需要 3 分钟）。一旦慢查询完成或超时，查询将以正常速度运行。此外，当我通过命令行登录 mysql 时，一切都很好，查询以预期的速度运行。

我认为减速是因为*通常*MySQL 在我登录时读取所有表信息（假设没有使用 -A 选项）或在第一个查询已经访问了必要的元表信息之后。

我的问题是：如何通过 bash 脚本加快此过程，从而避免缓慢的查询/手动登录？我只是在必要的表格上做一个虚拟选择，还是有更聪明的方法来获取表格信息？

环境：

*   CentOS 5.8
*   带有 MyISAM 引擎的 Mysql 5.1

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:20:54.797

我推测查询时间如此长的延迟是由于重新启动服务器时页面缓存被清空。查询运行后，表将加载到页面缓存中，并且一切运行得更快。

第一个建议是为较大的表重新加载页面缓存。. . `select * from <table>`你可以通过在你的脚本中做一个来做到这一点。

但是，这提出了一个问题：为什么查询要进行全表扫描？如果是这样，您可能有机会通过使用索引来加快查询速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:18:18.867

您的查询缓存可能太大或碎片化。

看看这个有助于调整数据库的[指南。](http://www.learn4good.com/board/restarting-mysql-slow-with.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T01:15:06.847

听起来您的数据库正在丢失其缓存查询。也许尝试使用存储过程来查询您需要在第一次运行时快速运行。

# class - SugarCRM - 如何使用模块类创建条目

> ID：12361443
> 
> 赞同：1
> 
> 时间：2012-09-11T01:11:24.677
> 
> 标签：class, backend, sugarcrm

这是我正在尝试做的事情，例如案例模块，在帐户中创建一个条目后，我希望它自动创建一个联系人条目。我想使用 Logic Hooks，而且我已经知道该怎么做。

我还不知道如何使用 Contacts 类创建一个新条目，我该怎么做？当然与联系人和案例有关系，还是有其他方法可以做到这一点？所以它就像通过后端进行条目一样。

问候， 罗内尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T22:09:00.670

试试下面的代码作为 Cases 的逻辑钩子函数

```
<?php
...
// Logic hook (beforeSave or afterSave) function of cases
function logicHookFunction ($bean, $event, $arguments) {
  // create new contact
  $contact = new Contact();
  $contact->last_name = 'something';
  $contact->email1 = 'something@example.com';
  $contact->save();

  // add relationship to case ($bean)
  $bean->load_relationship('contacts');
  $bean->contacts->add($contact->id,array());
}

...
?> 
```

# c++ - c ++如何确定字母表中一个单词是否在另一个单词之前

> ID：12361447
> 
> 赞同：2
> 
> 时间：2012-09-11T01:11:53.177
> 
> 标签：c++, function, compare, alphabetical

我正在使用`sort()`C++ 中的函数对我自己定义的“游戏”类型的对象向量进行排序。为此，我手动编写了一个函数来代替`operator<`，并将作为第三个参数传递给`sort()`函数。首先，我根据分数进行比较。然后，如果分数相同，我会根据团队名称进行比较。

我需要的是一个函数，如果在字典中出现`alphabetical(string s1, string s2)`，它将返回 true 。例如：`s1``s2`

```
alphabetical("aardvark", "apple"); //true
alphabetical("balloon", "zebra"); //true
alphabetical("zebra", "apple"); //false 
```

如果字符串相同，我也希望它返回 false。图书馆里有我可以使用的东西吗？或者，我将如何编写函数？我希望我能清楚地看到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:18:24.313

`std::string`实现了一个字典小于比较运算符本身，这意味着它`stringA < stringB`通常应该做你想要的。如果您创建一个`std::list<std::string> words`，按字母顺序排序将像`words.sort();`

您的自定义`Game`类可以将其小于比较运算符简单地实现为：

```
return (score < rhs.score) || (score == rhs.score && team < rhs.team) 
```

值得注意的是，字典排序并不总是人类所期望的。[Jeff Atwood 在这篇文章](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)中讨论了所谓的“自然排序顺序”与字典排序顺序。他的帖子还提供了资源，如果您需要这种排序，您可以从中找到算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:20:37.687

如果您的字符串都是大写或小写，则标准字符串比较将起作用。我相信它甚至可以与不再使用的字符编码一起使用，例如 EBSIDIC 或其他。

如果你有混合大小写，那么这不起作用，因为'A'大于'z'。为此，您需要使用 stricmp 之类的东西。您还可以为您的 basic_string 覆盖 char_traits 以进行不敏感的比较。

如果您想编写这样的排序方式，将“A”放在“a”之前，反之亦然，但将“b”放在“a”之后……那么你需要自己写。使用当今大多数操作系统使用的 ASCII 表应该相当简单。

如果您必须支持英语以外的语言，那么问题实际上变得不简单。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T01:19:10.213

如果你使用`std::string`s 你可以只使用`<`. 但是，如果您已经拥有`char*`，并且不想（或不能）更改它，并且想要避免转换为 的开销`std::string`，那么您可以使用`std::lexicographical_compare()`.

当然，在这两种情况下，您可能都需要不区分大小写的比较。副手我不确定正确的解决方案是什么`std::string`，可能与`char_traits`，但`lexicographical_compare()`你可以提供一个比较器：

```
bool alphabetical(const char *str1, const char *str2) {
    return std::lexicographical_compare(str1, &str1[strlen(str1)], str2, &str2[strlen(str2)], [](char a, char b){
        return tolower(a) < tolower(b);
    });
} 
```

# big-o - 我需要帮助证明如果 f(n) = O(g(n)) 意味着 2^(f(n)) = O(2^g(n)))

> ID：12361448
> 
> 赞同：13
> 
> 时间：2012-09-11T01:12:02.040
> 
> 标签：big-o, logarithm, proof

在之前的问题中，我展示了（希望是正确的）这`f(n) = O(g(n))`意味着`lg(f(n)) = O(lg(g(n)))`有充分的条件（例如`lg(g(n)) >= 1, f(n) >= 1`， 和足够大的 n）。

现在，我需要证明或反驳这`f(n) = O(g(n))`意味着`2^(f(n)) = O(2^g(n)))`。直观地说，这是有道理的，所以我想我可以借助前面的定理来证明它。我注意到`f(n)`可以重写为just `lg(2^f(n))`，这让我很兴奋......这是我想要证明的双方的 log base 2，它简化了很多事情！`g(n)``lg(2^g(n))`

但我很确定这行不通。仅仅因为`lg(2^f(n)) = O(lg(2^g(n)))`并不一定意味着`2^f(n) = O(2^g(n))`……这与前面的定理相反（它说“暗示”，而不是“当且仅当”）。

我是否需要以另一种方式尝试这个证明，或者我真的可以放弃我所拥有的（至少作为首发）？

**说到其他方式，也许我可以争论如何将 2 提高到`g(n)`“高于”的一些`f(n)`仍然会保持更高？这几乎感觉像是一个常识性的论点，但也许我错过了一些重要的东西..

**哦，哎呀！我忘了添加，`f(n)`并且`g(n)`是渐近积极的。根据我们的教科书定义，这意味着它们“对于所有足够大的 n 都是正的”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-11T01:50:36.157

嗯，一开始就不是真的。

假设算法 A 需要 2n 步，算法 B 需要 n 步。那么它们的比率是一个常数。

但是 2 ^(2n)和 2 ^n的比例不是一个常数，所以你说的不成立。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-02-28T05:47:29.653

# 如果 f(n) = O(g(n)),
2^(f(n)) 不等于 O(2^g(n)))

让 f(n) = 2log n 和 g(n) = log n
（假设 log 以 2 为底）

我们知道，2log n <= c(log n) 因此 f(n) = O(g(n))

2^(f(n)) = 2^log n^2 = n^2
2^(g(n)) = 2^log n = n

我们知道
**n^2 不是 O(n)**

因此，**2^(f(n)) 不等于 O(2^g(n)))**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-12T12:52:03.483

对于任何 f,g：N->R*，如果 f(n) = O(g(n)) 则 2^(f(n) = O(2^g(n)) (1)

我们可以通过找到一个反例来反驳（1）。

假设 (1) 为真 -> 根据 Big-O 定义，存在 c>0 且整数 m >= 0，使得：

2^f(n) <= c2^g(n) ，对于所有 n >= m (2)

选择 f(n) = 2n, g(n) = n，我们也有 f(n) = O(g(n))，将它们应用于 (2)。

-> 2^(2n) <= c2^n -> 2^n <= c (3)

这意味着：存在 c>0 和整数 m >= 0 使得： 2^n <= c ，对于所有 n >= m。

不存在这样的 c，因为如果存在，我们总是会发现 n > lg(c) 使得 (3) 不成立：2^n >= c，对于所有 n >= lg(c)。

因此，(1) 不可能为真。

# javascript - Yeoman：LiveReload 与 Yeoman Watch

> ID：12361450
> 
> 赞同：11
> 
> 时间：2012-09-11T01:12:32.853
> 
> 标签：javascript, gruntjs, yeoman, livereload

我第一次尝试[Yeoman](http://yeoman.io/index.html) Server 并看到它提供了一个本地监视工具作为[LiveReload](http://livereload.com/)的后备。以下是[文档](http://yeoman.io/commandline.html#server)解释回退的方式：

“[Yeoman Server] 会自动启动该`yeoman watch`进程，因此对任何应用程序文件的更改都会导致浏览器通过 LiveReload 刷新。如果您没有在本地安装 LiveReload，则将使用后备重新加载进程。”

到目前为止，回退过程运行良好，我喜欢它不需要在浏览器/菜单栏中安装任何东西。

有没有人用 Yeoman 尝试过这两种手表工具？如果您“升级”到 LiveReload，工作流程有何不同以及您可以获得哪些附加功能？

**更新：**对 API 的快速检查显示，Yeoman 的实时重新加载功能实际上是 LiveReload。他们是一回事。它在没有浏览器扩展的情况下工作的原因是因为它们使用的是 LiveReload 的`snipvr`代码片段。有可能通过 LiveReload GUI 访问一些附加功能，也可能用于移动设备测试，但功能更可能是相同的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T05:37:13.537

正如我在更新中提到的，我检查了 Yeoman 的源代码并意识到实时重新加载功能实际上是[LiveReload](http://livereload.com/)。他们是一回事。LR 的创建者[Andrey Tarantsov](http://tarantsov.com/)让他的宝贵工具在这样一个流行的开源项目中使用而无需付费，这真是太酷了。

Yeoman Watch 在没有浏览器扩展的情况下工作的原因是因为它使用的是 LiveReload 的 snipvr 片段。

因此，LiveReload 和运行“yeoman watch”的功能本质上是相同的。但是，我发现拥有 LiveReload 仍然有好处。我首选的工作流程是将 LiveReload 和[CodeKit](http://incident57.com/codekit/)结合起来。

在（预构建）开发期间，我使用 CodeKit 来编译我的 Sass/Compass 文件和[Jade](http://jade-lang.com/)模板（另一个很棒的工具，顺便说一句），因为 CodeKit 的配置选项比 LiveReload 的更广泛。由于 CodeKit 不适用于 Firefox（仅限 Chrome 和 Safari），因此我同时运行 LiveReload，以便可以在两个浏览器中实时看到更改。

此工作流还具有额外的好处，即能够通过将 LiveReload 的“自定义命令”功能与 CodeKit 的“高级编译器设置”功能相结合来“即时分叉”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:43:10.963

**编辑：** 毕竟我在下面所说的并不完全正确。我做了一些更多的测试，发现即使没有先编辑 HTML 文件，编辑 .scss 文件也会显示更改，所以是的，在这一点上，我还没有了解 LiveReload 和后备之间的区别过程是。

* * *

> 我这样说的前提是我*没有*安装 LiveReload，但是从迄今为止我在 Yeoman 中所做的测试来看，我所看到的“后备重新加载过程”是它不会重新加载页面，直到HTML 文件被保存，因此在 HTML 文件从系统接收到 Save 事件之前，保存的 CSS 更改不会立即可见。根据 livereload.com 的说法，“...当您更改 CSS 文件或图像时，浏览器会立即更新，而无需重新加载页面”，因此它似乎是一个更强大的过程。
> 
> （对不起，不是一个完整的答案，因为我没有可用的 LiveReload，但是这个问题已经提出了几天没有回复，所以我认为任何信息总比没有好。）

# objective-c - 弹出窗口中的按钮将在主视图控制器中显示文本

> ID：12361458
> 
> 赞同：0
> 
> 时间：2012-09-11T01:13:47.260
> 
> 标签：objective-c, uipopovercontroller

我的弹出框有一个按钮，单击该按钮时，将在主视图控制器中显示一个文本。

这是我的按钮代码：

```
- (IBAction)print:(UIButton *)sender {
   self.displayText.text= @"Hello World";
} 
```

顺便说一句，我按照[这里](http://www.edumobile.org/iphone/ipad-development/presenting-a-popover-in-ipad/)的教程进行操作。

我试图运行该程序，但当我单击“打印你好世界”按钮时出现此错误：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[PopoverViewController print:]: unrecognized selector sent to instance 0xe379240”

我认为当它是弹出窗口中的按钮时，情况就不同了。我已经对这个问题采取了一些解决方案（也由遇到同样问题的人发布），但我似乎无法解决它。仍然有错误。希望你能帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:29:27.843

When you set the action for the message, you need to send the message to your View Controller instead of to your Popover.

Which you can't really do when you have them in separate xib's.

There are a few different ways of approaching this, one of which would be to implement a delegate in your popover class, and when you create the popover set the delegate to self (the view controller which created it) and implement the delegate method. Then, when you press the button, it calls a function **in your popover class** which then calls your delegate's method.

# sql - 如何将项目添加到联合 SQL 视图？

> ID：12361466
> 
> 赞同：2
> 
> 时间：2012-09-11T01:15:33.533
> 
> 标签：sql, database, select, union, crystal-reports-xi

我正在努力在 Crystal Reports 中制作一个自动报告，这需要我将表格添加到现有的预先编写的视图中。该视图包含一个联合操作，它阻止我正常使用该视图。我所做的是手动添加数据（大约一半）。

报告所需的项目是 tblSOPartsUsed.Memo。我已将其添加到两个选择查询中。在 tblCustomerInventory 和 tblSOPartsUsed 之间的连接中，.Memo 表仅出现在 PartsUsed 表中，而不出现在 CustomerInventory 中。

1.  首先选择查询位置

    ```
     tblCustomerInventory.SerialNumber AS ExchangeSerialNumber, **tblSOPartsUsed.Memo AS SOPartsNotes**, tblInvoiceDetail.Taxable AS DetailIsTaxable, 
    ```

2.  首先从查询位置

    ```
     tblCustomerInventory FULL OUTER JOIN
                  tblSOPartsUsed INNER JOIN 
    ```

我以完全相同的方式概述了第二个 Select 和 From。

有人可以解释一下吗，我什么都试过了！

完整的代码如下...

```
SELECT InvoiceAssemblyPriceBook.Features AS AssemblyFeatures,
    tblInvoiceAssemblyDetail.EachQuantity AS AssemblyEachQuantity,
    tblInvoiceAssemblyDetail.FKInvoiceDetail AS AssemblyFKInvoiceDetail,
    tblInvoiceAssemblyDetail.InvoiceAssemblyDetailKeyID,
    tblInvoiceAssemblyDetail.ItemID AS AssemblyItemID,
    tblInvoiceAssemblyDetail.ItemDescription AS AssemblyItemDescription,
    tblInvoiceAssemblyDetail.PrintOnInvoice AS AssemblyPrintOnInvoice,
    tblInvoiceAssemblyDetail.Quantity AS AssemblyQuantity,
    tblInvoiceAssemblyDetail.SellingPrice AS AssemblySellingPrice,
    tblInvoiceAssemblyDetail.TotalSellingPrice AS AssemblyTotalSellingPrice,
    tblInvoiceAssemblyDetail.Type AS AssemblyType,
    tblInvoiceAssemblyDetail.UnitOfMeasure AS AssemblyUnitOfMeasure,
    tblInvoiceDetail.AssemblyType AS DetailAssemblyType,
    tblInvoiceDetail.InvoiceDetailKeyID,
    tblInvoiceDetail.ItemDescription AS DetailItemDescription,
    tblInvoiceDetail.ItemID AS DetailItemID,
    tblInvoiceDetail.PrintOnInvoice AS DetailPrintOnInvoice,
    tblInvoiceDetail.Quantity AS DetailQuantity,
    tblInvoiceDetail.SellingPrice AS DetailSellingPrice,
    tblInvoiceDetail.TotalSellingPrice AS DetailTotalSellingPrice,
    tblInvoiceDetail.Type AS DetailType,
    tblInvoices.AccountNumber,
    tblInvoices.Comments,
    tblInvoices.ContractNumber,
    tblInvoices.Deposit,
    tblInvoices.Freight,
    tblInvoices.GSTax,
    tblInvoices.InvoiceDate,
    tblInvoices.InvoiceNumber,
    tblInvoices.PaidDate,
    tblInvoices.QuoteNumber,
    tblInvoices.SalesTaxPercent,
    CASE 
        WHEN tblInvoiceDetail.SoNumber IS NULL
            THEN tblInvoices.SONumber
        ELSE tblInvoiceDetail.SoNumber
        END AS SONumber,
    tblInvoices.STATUS,
    tblInvoices.StatusDate,
    tblInvoices.Tax,
    tblInvoices.TotalAmountDue,
    tblInvoices.TotalComment,
    tblInvoices.TotalDollarsDiscounted,
    tblInvoices.TotalGrossSell,
    tblInvoices.TotalNetSell,
    tblInvoices.TradeIn,
    tblInvoices.WorkOrderNumber,
    tblPriceLevels.IsRepairLevel,
    tblServiceOrders.ContractNumber AS ServiceOrderContractNumber,
    tblSysCompanySettings.HideGSTaxRelatedInformation,
    tblSysCompanySettings.ItemsServicedPrintOnInvoice,
    tblSysDisclaimerSettings.SalesInvoiceDisclaimer,
    tblSysDisclaimerSettings.ServiceInvoiceDisclaimer,
    tblSysPBSettings.PrintItemorPartNum,
    VoidedByReps.RepName AS VoidedByRepName,
    tblInvoices.TotalNetInvoice,
    InvoiceDetailPriceBook.PartNumber AS DetailPartNumber,
    InvoiceDetailPriceBook.UnitOfMeasure AS DetailUnitOfMeasure,
    InvoiceDetailPriceBook.Features AS DetailFeatures,
    tblSysDisclaimerSettings.ContractInvoiceDisclaimer,
    tblInvoices.ProviderTax,
    tblServiceOrders.BriefDescription AS SOBriefDescription,
    tblInvoices.GSTaxComputedBeforeTradeIn,
    tblInvoices.TaxComputedBeforeTradeIn,
    tblInvoices.ProviderTaxRate,
    tblInvoices.FreightTaxable,
    tblInvoices.GSTIsTaxable,
    tblInvoices.ProjectKeyID,
    InvoicesReps.RepName,
    tblAccounts.AccountNumber AS Expr1,
    tblAccounts.AccountID,
    tblInvoices.Terms,
    tblInvoices.Reference,
    tblInvoices.ARCustomerNumber,
    tblInvoices.PONumber,
    tblInvoices.ShipVia,
    tblServiceOrders.DateRequested,
    tblServiceOrders.DateOpened,
    tblServiceOrders.SONumber AS ServiceOrderSONumber,
    tblSysReportSettings.InvoiceCommentsAtEnd,
    tblInvoices.SourceDocument,
    tblTaxCodes.HasTieredDistrict,
    tblExchange.ExchangeKeyID,
    tblCustomerInventory.ItemID AS ExchangeItemID,
    tblCustomerInventory.ItemDescription AS ExchangeItemDescription,
    tblCustomerInventory.SerialNumber AS ExchangeSerialNumber,
    tblSOPartsUsed.Memo AS SOPartsNotes,
    tblInvoiceDetail.Taxable AS DetailIsTaxable,
    tblInvoiceAssemblyDetail.Taxable AS AssemblyIsTaxable,
    tblInvoices.IsFinalProgressiveInvoice,
    tblInvoiceDetail.IsProgressiveInvoiceItem,
    tblInvoices.IsProgressiveInvoice,
    tblInvoices.TotalPriceCredited,
    tblInvoices.TotalTaxCredited,
    tblInvoices.TotalGSTaxCredited,
    tblInvoices.TotalProviderTaxCredited,
    tblInvoices.TotalFreightCredited,
    tblInvoices.DiscountAllowed,
    tblInvoices.AmountPaid,
    (
        SELECT MAX(SOItemsServicedKeyID) AS Expr1
        FROM tblSOItemsServiced
        WHERE (SONumber = tblServiceOrders.SONumber)
        ) AS SOItemsServicedKeyID,
    tblInvoiceDetail.CommentOnly,
    ServiceOrderContacts.ContactName AS SOContactName,
    tblServiceOrders.ContactPhone AS SOContactPhone,
    tblServiceOrders.ContactPhoneLocation AS SOContactPhoneLocation,
    (
        SELECT TOP (1) FormattedPhoneNumber
        FROM tblPhoneNumbers
        WHERE (ContactNumber = 0)
            AND (PrimaryIndicator = 1)
            AND (COALESCE(PhoneLocation, '') <> 'Fax')
            AND (AccountNumber = tblAccounts.AccountNumber)
        ) AS AccountPhone,
    (
        SELECT TOP (1) PhoneLocation
        FROM tblPhoneNumbers AS tblPhoneNumbers_1
        WHERE (ContactNumber = 0)
            AND (PrimaryIndicator = 1)
            AND (COALESCE(PhoneLocation, '') <> 'Fax')
            AND (AccountNumber = tblAccounts.AccountNumber)
        ) AS AccountPhoneLocation,
    COALESCE(tvwr_TotalAmountDuePerAccount.AmountDue, 0.00) AS AmountDue,
    COALESCE(tvwr_TotalAmountDuePerAccount.Unappliedpayments, 0.00) AS Unappliedpayments,
    tblTaxCodes.IsHarmonizedTaxCode,
    tblInvoices.GSTax + tblInvoices.Tax AS HSTax
FROM tblPriceBook AS InvoiceAssemblyPriceBook
RIGHT JOIN tblPriceBook AS InvoiceDetailPriceBook
RIGHT JOIN tblInvoiceAssemblyDetail
RIGHT JOIN tblCustomerInventory
FULL JOIN tblSOPartsUsed
INNER JOIN tblExchange
    ON tblSOPartsUsed.SOPartsUsedKeyID = tblExchange.FKSOPartsUsed
        ON tblCustomerInventory.CustomerInventoryKeyID = tblExchange.FKCustomerInventory RIGHT JOIN tblInvoiceDetail
        ON tblSOPartsUsed.FKInvoiceDetail = tblInvoiceDetail.InvoiceDetailKeyID
            ON tblInvoiceAssemblyDetail.FKInvoiceDetail = tblInvoiceDetail.InvoiceDetailKeyID
                ON InvoiceDetailPriceBook.ItemID = tblInvoiceDetail.ItemID
                    ON InvoiceAssemblyPriceBook.ItemID = tblInvoiceAssemblyDetail.ItemID LEFT JOIN tblPriceLevels
                    ON tblInvoiceDetail.PriceLevel = tblPriceLevels.PriceLevelsKeyID RIGHT JOIN tvwr_TotalAmountDuePerAccount INNER JOIN tblAccounts
                ON tvwr_TotalAmountDuePerAccount.AccountNumber = tblAccounts.AccountNumber RIGHT JOIN tblReps AS VoidedByReps RIGHT JOIN tblInvoices AS tblInvoices LEFT JOIN tblTaxCodes
        ON tblInvoices.SalesTaxCode = tblTaxCodes.SalesTaxCode LEFT JOIN tblReps AS InvoicesReps
        ON tblInvoices.SalesRep = InvoicesReps.RepNumber
            ON VoidedByReps.RepNumber = tblInvoices.StatusBy LEFT JOIN tblServiceOrders LEFT JOIN tblContacts AS ServiceOrderContacts
        ON tblServiceOrders.ContactNumber = ServiceOrderContacts.ContactNumber
            ON tblInvoices.SONumber = tblServiceOrders.SONumber
                ON tblAccounts.AccountNumber = tblInvoices.AccountNumber
                    ON tblInvoiceDetail.InvoiceNumber = tblInvoices.InvoiceNumber LEFT JOIN tblContacts AS tblContacts
                    ON tblAccounts.PrimaryContactNumber = tblContacts.ContactNumber CROSS JOIN tblSysPBSettings CROSS JOIN tblSysCompanySettings CROSS JOIN tblSysReportSettings CROSS JOIN tblSysDisclaimerSettings
WHERE (tblInvoices.MSPAgreementNumber = 0)

UNION ALL

SELECT InvoiceAssemblyPriceBook.Features AS AssemblyFeatures,
    tblInvoiceAssemblyDetail.EachQuantity AS AssemblyEachQuantity,
    tblInvoiceAssemblyDetail.FKInvoiceDetail AS AssemblyFKInvoiceDetail,
    tblInvoiceAssemblyDetail.InvoiceAssemblyDetailKeyID,
    tblInvoiceAssemblyDetail.ItemID AS AssemblyItemID,
    tblInvoiceAssemblyDetail.ItemDescription AS AssemblyItemDescription,
    tblInvoiceAssemblyDetail.PrintOnInvoice AS AssemblyPrintOnInvoice,
    tblInvoiceAssemblyDetail.Quantity AS AssemblyQuantity,
    tblInvoiceAssemblyDetail.SellingPrice AS AssemblySellingPrice,
    tblInvoiceAssemblyDetail.TotalSellingPrice AS AssemblyTotalSellingPrice,
    tblInvoiceAssemblyDetail.Type AS AssemblyType,
    tblInvoiceAssemblyDetail.UnitOfMeasure AS AssemblyUnitOfMeasure,
    tblInvoiceDetail.AssemblyType AS DetailAssemblyType,
    tblInvoiceDetail.InvoiceDetailKeyID,
    tblInvoiceDetail.ItemDescription AS DetailItemDescription,
    tblInvoiceDetail.ItemID AS DetailItemID,
    tblInvoiceDetail.PrintOnInvoice AS DetailPrintOnInvoice,
    tblInvoiceDetail.Quantity AS DetailQuantity,
    tblInvoiceDetail.SellingPrice AS DetailSellingPrice,
    tblInvoiceDetail.TotalSellingPrice AS DetailTotalSellingPrice,
    tblInvoiceDetail.Type AS DetailType,
    tblInvoices.AccountNumber,
    tblInvoices.Comments,
    tblInvoices.ContractNumber,
    tblInvoices.Deposit,
    tblInvoices.Freight,
    tblInvoices.GSTax,
    tblInvoices.InvoiceDate,
    tblInvoices.InvoiceNumber,
    tblInvoices.PaidDate,
    tblInvoices.QuoteNumber,
    tblInvoices.SalesTaxPercent,
    CASE 
        WHEN tblInvoiceDetail.SoNumber IS NULL
            THEN tblInvoices.SONumber
        ELSE tblInvoiceDetail.SoNumber
        END AS SONumber,
    tblInvoices.STATUS,
    tblInvoices.StatusDate,
    tblInvoices.Tax,
    tblInvoices.TotalAmountDue,
    tblInvoices.TotalComment,
    tblInvoices.TotalDollarsDiscounted,
    tblInvoices.TotalGrossSell,
    tblInvoices.TotalNetSell,
    tblInvoices.TradeIn,
    tblInvoices.WorkOrderNumber,
    tblPriceLevels.IsRepairLevel,
    tblServiceOrders.ContractNumber AS ServiceOrderContractNumber,
    tblSysCompanySettings.HideGSTaxRelatedInformation,
    tblSysCompanySettings.ItemsServicedPrintOnInvoice,
    tblSysDisclaimerSettings.SalesInvoiceDisclaimer,
    tblSysDisclaimerSettings.MSPAgreementInvoiceDisclaimer AS ServiceInvoiceDisclaimer,
    tblSysPBSettings.PrintItemorPartNum,
    VoidedByReps.RepName AS VoidedByRepName,
    tblInvoices.TotalNetInvoice,
    InvoiceDetailPriceBook.PartNumber AS DetailPartNumber,
    InvoiceDetailPriceBook.UnitOfMeasure AS DetailUnitOfMeasure,
    InvoiceDetailPriceBook.Features AS DetailFeatures,
    tblSysDisclaimerSettings.ContractInvoiceDisclaimer,
    tblInvoices.ProviderTax,
    tblServiceOrders.BriefDescription AS SOBriefDescription,
    tblInvoices.GSTaxComputedBeforeTradeIn,
    tblInvoices.TaxComputedBeforeTradeIn,
    tblInvoices.ProviderTaxRate,
    tblInvoices.FreightTaxable,
    tblInvoices.GSTIsTaxable,
    tblInvoices.ProjectKeyID,
    InvoicesReps.RepName,
    tblAccounts.AccountNumber AS Expr1,
    tblAccounts.AccountID,
    tblInvoices.Terms,
    tblInvoices.Reference,
    tblInvoices.ARCustomerNumber,
    tblInvoices.PONumber,
    tblInvoices.ShipVia,
    tblServiceOrders.DateRequested,
    tblServiceOrders.DateOpened,
    tblServiceOrders.SONumber AS ServiceOrderSONumber,
    tblSysReportSettings.InvoiceCommentsAtEnd,
    tblInvoices.SourceDocument,
    tblTaxCodes.HasTieredDistrict,
    tblExchange.ExchangeKeyID,
    tblCustomerInventory.ItemID AS ExchangeItemID,
    tblCustomerInventory.ItemDescription AS ExchangeItemDescription,
    tblCustomerInventory.SerialNumber AS ExchangeSerialNumber,
    tblSOPartsUsed.Memo AS SOPartsNotes,
    tblInvoiceDetail.Taxable AS DetailIsTaxable,
    tblInvoiceAssemblyDetail.Taxable AS AssemblyIsTaxable,
    tblInvoices.IsFinalProgressiveInvoice,
    tblInvoiceDetail.IsProgressiveInvoiceItem,
    tblInvoices.IsProgressiveInvoice,
    tblInvoices.TotalPriceCredited,
    tblInvoices.TotalTaxCredited,
    tblInvoices.TotalGSTaxCredited,
    tblInvoices.TotalProviderTaxCredited,
    tblInvoices.TotalFreightCredited,
    tblInvoices.DiscountAllowed,
    tblInvoices.AmountPaid,
    (
        SELECT MAX(SOItemsServicedKeyID) AS Expr1
        FROM tblSOItemsServiced
        WHERE (SONumber = tblServiceOrders.SONumber)
        ) AS SOItemsServicedKeyID,
    tblInvoiceDetail.CommentOnly,
    ServiceOrderContacts.ContactName AS SOContactName,
    tblServiceOrders.ContactPhone AS SOContactPhone,
    tblServiceOrders.ContactPhoneLocation AS SOContactPhoneLocation,
    (
        SELECT TOP (1) FormattedPhoneNumber
        FROM tblPhoneNumbers
        WHERE (ContactNumber = 0)
            AND (PrimaryIndicator = 1)
            AND (COALESCE(PhoneLocation, '') <> 'Fax')
            AND (AccountNumber = tblAccounts.AccountNumber)
        ) AS AccountPhone,
    (
        SELECT TOP (1) PhoneLocation
        FROM tblPhoneNumbers AS tblPhoneNumbers_1
        WHERE (ContactNumber = 0)
            AND (PrimaryIndicator = 1)
            AND (COALESCE(PhoneLocation, '') <> 'Fax')
            AND (AccountNumber = tblAccounts.AccountNumber)
        ) AS AccountPhoneLocation,
    COALESCE(tvwr_TotalAmountDuePerAccount.AmountDue, 0.00) AS AmountDue,
    COALESCE(tvwr_TotalAmountDuePerAccount.Unappliedpayments, 0.00) AS Unappliedpayments,
    COALESCE(tblTaxCodes.IsHarmonizedTaxCode, 0) AS IsHarmonizedTaxCode,
    tblInvoices.GSTax + tblInvoices.Tax AS HSTax
FROM tblPriceBook AS InvoiceAssemblyPriceBook
RIGHT JOIN tblPriceBook AS InvoiceDetailPriceBook
RIGHT JOIN tblInvoiceAssemblyDetail
RIGHT JOIN tblCustomerInventory
FULL JOIN tblSOPartsUsed
INNER JOIN tblExchange
    ON tblSOPartsUsed.SOPartsUsedKeyID = tblExchange.FKSOPartsUsed
        ON tblCustomerInventory.CustomerInventoryKeyID = tblExchange.FKCustomerInventory RIGHT JOIN tblInvoiceDetail
        ON tblSOPartsUsed.FKInvoiceDetail = tblInvoiceDetail.InvoiceDetailKeyID
            ON tblInvoiceAssemblyDetail.FKInvoiceDetail = tblInvoiceDetail.InvoiceDetailKeyID
                ON InvoiceDetailPriceBook.ItemID = tblInvoiceDetail.ItemID
                    ON InvoiceAssemblyPriceBook.ItemID = tblInvoiceAssemblyDetail.ItemID LEFT JOIN tblPriceLevels
                    ON tblInvoiceDetail.PriceLevel = tblPriceLevels.PriceLevelsKeyID RIGHT JOIN tvwr_TotalAmountDuePerAccount INNER JOIN tblAccounts
                ON tvwr_TotalAmountDuePerAccount.AccountNumber = tblAccounts.AccountNumber RIGHT JOIN tblReps AS VoidedByReps RIGHT JOIN tblInvoices AS tblInvoices LEFT JOIN tblTaxCodes
        ON tblInvoices.SalesTaxCode = tblTaxCodes.SalesTaxCode LEFT JOIN tblReps AS InvoicesReps
        ON tblInvoices.SalesRep = InvoicesReps.RepNumber
            ON VoidedByReps.RepNumber = tblInvoices.StatusBy LEFT JOIN tblServiceOrders LEFT JOIN tblContacts AS ServiceOrderContacts
        ON tblServiceOrders.ContactNumber = ServiceOrderContacts.ContactNumber
            ON tblInvoices.SONumber = tblServiceOrders.SONumber
                ON tblAccounts.AccountNumber = tblInvoices.AccountNumber
                    ON tblInvoiceDetail.InvoiceNumber = tblInvoices.InvoiceNumber LEFT JOIN tblContacts AS tblContacts
                    ON tblAccounts.PrimaryContactNumber = tblContacts.ContactNumber CROSS JOIN tblSysPBSettings CROSS JOIN tblSysCompanySettings CROSS JOIN tblSysReportSettings CROSS JOIN tblSysDisclaimerSettings
WHERE (tblInvoices.MSPAgreementNumber <> 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:47:55.947

我设法将视图的每一半复制到一个新视图中，从 GUI 中手动勾选 tblSOPartsUsed.memo 并将两者复制在一起，这使得视图工作得很好

# ruby - Ruby 中的哈希方法不返回 object_id

> ID：12361467
> 
> 赞同：-1
> 
> 时间：2012-09-11T01:15:47.163
> 
> 标签：ruby

我正在学习红宝石。我有 O'Reilly 的书“The Ruby Programming Language”，其中明确指出：

“对象类实现散列方法以简单地返回对象的 ID。”

我还在其他书中看到了这个断言：http: [//my.safaribooksonline.com/book/web-development/ruby/9780321700308/create-classes-that-understand-equality/ch12lev1sec8](http://my.safaribooksonline.com/book/web-development/ruby/9780321700308/create-classes-that-understand-equality/ch12lev1sec8)

但是当我运行这段代码时，这两行不会生成相同的数字：

```
myObject = Object.new

puts myObject.hash
puts myObject.object_id 
```

那么有什么关系呢？我正在运行 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:23:36.193

Object 实现对`object_id`. 该值不是`object_id`，而是`object_id`是散列函数的输入。

通过[https://github.com/ruby/ruby/blob/trunk/object.c#L110](https://github.com/ruby/ruby/blob/trunk/object.c#L110)

```
VALUE
rb_obj_hash(VALUE obj)
{
    VALUE oid = rb_obj_id(obj);
    st_index_t h = rb_hash_end(rb_hash_start(NUM2LONG(oid)));
    return LONG2FIX(h);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:24:33.647

### object_id → fixnum

**返回**obj 的整数标识符。对给定对象的所有 id 调用都将返回相同的数字，并且没有两个活动对象将共享一个 id。

### 哈希（）

**为此对象**生成一个 Fixnum 哈希值。**该函数必须具有 a.eql?(b) 蕴含 a.hash == b.hash 的性质。哈希值由 Hash 类使用。任何超过 Fixnum 容量的哈希值在使用前都会被截断。**

 **恢复：整数标识符不生成散列。

*   [http://ruby-doc.org/core-1.9.3/Object.html#method-i-hash](http://ruby-doc.org/core-1.9.3/Object.html#method-i-hash)
*   [http://ruby-doc.org/core-1.9.3/Object.html#method-i-object_id](http://ruby-doc.org/core-1.9.3/Object.html#method-i-object_id)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T07:30:17.210

在 Ruby`object_id`中是一个实例方法`Object`。

[![在此处输入图像描述](../Images/68bab15557823978bc5520f2185a8046.png)](https://i.stack.imgur.com/SYL26.jpg)

`hash`也是 的实例方法`Object`，但在各个子类中都进行了重写。喜欢`String`：

[![在此处输入图像描述](../Images/e88293fce554f3d80a26c6a9c1fc91f6.png)](https://i.stack.imgur.com/cYZ67.jpg)

没有证据表明`hash`应该将保存值返回为`object_id`. 它们是为不同的目的而创建的。**

# r - 删除R中的行时如何自动缩小R数据框中的行号

> ID：12361471
> 
> 赞同：7
> 
> 时间：2012-09-11T01:16:15.780
> 
> 标签：r, dataframe, row

我很难正确缩小数据框中的行号。

**我有一个名为“mydata”的数据集，我使用R**从文本文件中导入。数据框有大约 200 行和 10 列。

我使用以下方法删除了第 3、7、9、199 行：

```
mydata <- mydata[-c(3, 7, 9, 199),] 
```

当我运行这个命令时，第 3,7,9,199 行从列表中消失了，但行号不会自动缩小到 196，而是保持在 200。我觉得这些行号以某种方式附加到每个“行”作为数据框的一部分？

我该如何解决这个问题？

更让我困惑的是，当我使用**R** Studio 导入文本文件时，我没有任何问题。（当我运行上述命令时，我看到了 196）。但是在使用**R**时，我无法更改与列表中实际行数匹配的数据框中的行号。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T01:18:08.287

你可以简单地做：

```
rownames(mydata) <- NULL 
```

执行子集后。

例如：

```
> mydata = data.frame(a=1:10, b=11:20)
> mydata = mydata[-c(6, 8), ]
> mydata
    a  b
1   1 11
2   2 12
3   3 13
4   4 14
5   5 15
7   7 17
9   9 19
10 10 20
> rownames(mydata) <- NULL
> mydata
   a  b
1  1 11
2  2 12
3  3 13
4  4 14
5  5 15
6  7 17
7  9 19
8 10 20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T01:49:50.247

您也可以使用*不*以相同方式存储 row.names的`data.table`包（请参阅[data.table intro](http://datatable.r-forge.r-project.org/datatable-intro.pdf)，而是使用*行号*打印。

 **有关data.table 如何处理*行名*和*键的信息，请参阅**键部分*

 **`data.table`继承自 `data.frame`，所以 a`data.table`是一个`data.frame`if 函数，而 pacakges 只接受*data.frames*。

例如

```
library(data.table)

mydata <- data.table(mydata)
mydata
##      a  b
##  1:  1 11
##  2:  2 12
##  3:  3 13
##  4:  4 14
##  5:  5 15
##  6:  6 16
##  7:  7 17
##  8:  8 18
##  9:  9 19
## 10: 10 20

mydata = mydata[-c(6, 8), ]
mydata
##     a  b
## 1:  1 11
## 2:  2 12
## 3:  3 13
## 4:  4 14
## 5:  5 15
## 6:  7 17
## 7:  9 19
## 8: 10 20 
```****

# javascript - jQuery：重构为函数

> ID：12361474
> 
> 赞同：1
> 
> 时间：2012-09-11T01:16:55.803
> 
> 标签：javascript, jquery, refactoring

我在搞乱 JavaScript/jQuery，只是想确定如何重构两个非常相似的：

```
 $('#a-div-element').click(function() {
    /* common stuff in here */
}) 
```

到一个带有两个参数的函数中。我希望它与我使用的其他语言有些相似，即：

```
function my_refactored_stuff(field, target_div) {
  $(field).click(function{ 
    /* common stuff in here */
  });
} 
```

但这似乎在单击时不会触发

简而言之，如果有人可以快速编写一个示例来说明如何编写一个处理跨 .click 方法的常见功能的函数，我将非常感激

非常感谢， PlankTon

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:19:20.630

只需定义和重用一个事件处理函数。

```
var handler = function(event) { /* common stuff here */ }
$("#a-div-element").on("click", handler)
$("#b-div-element").on("click", handler) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:24:36.190

```
var callback = function() {};

$('#a-div-element').click( callback ); 
```

或者，如果您希望传递参数：

```
$('#a-div-element').click(function() {
    callback( /* args */ );
}); 
```

# html - 浏览器正在显示文件的文本内容，而不是文件的呈现 HTML 内容

> ID：12361475
> 
> 赞同：1
> 
> 时间：2012-09-11T01:17:05.737
> 
> 标签：html

我是第一个网页上的网页开发新手。我`HTML`在文本编辑器中编写了一些代码并将其保存为`HTML`文件。但是，当我在浏览器中打开它时，我只看到纯`HTML`文本而不是表格。谁能帮我这个？

以下是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
    <HEAD>
    </HEAD>
    <BODY>
        <CENTER>
            <TABLE border=2>
                <CAPTION>My Homework</CAPTION>
                <TR>
                    <TD>Link to Homework #1</TD>
                    <TD>Link to Homework #2</TD>
                <TR>
                    <TD>Link to Homework #3</TD>
                    <TD>Link to Homework #4</TD>
                <TR>
                    <TD>Link to Homework #5</TD>
                    <TD>Link to Homework #6</TD>
                <TR>
                    <TD>Link to Homework #7</TD>
                    <TD>Link to Homework #8</TD>
            </TABLE>
        </CENTER>
    </BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:24:10.817

除了`<TR>`用 ' 关闭 '之外，`</TR>`请确保您保存的文件带有表明它是 HTML 文件的扩展名。page.html、page.htm 等

所以你在 Mac 上使用 TextEdit。听起来您可能想阅读[此](http://www.askdavetaylor.com/how_do_i_save_html_files_from_textedit.html)内容以确保正确保存文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:24:49.147

安德鲁所说的关于正确的 HTML 是正确的。但是所有浏览器在呈现页面时都会修复轻微损坏的 HTML。

从问题的声音来看，我认为您可能有一个带有 2 个扩展名的文件，例如：`test.html.txt`

确保在 Windows 中显示**已知的文件类型扩展名**，并且该文件的末尾没有（或除or之外的`.txt`任何其他扩展名）。`.htm``.html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T16:06:51.673

您正在使用的 HTML 编辑器可能会将您输入的内容翻译为 HTML - 也就是说，当您输入 <html> 时，它会变成：<html>

尝试打开文件是一个简单的文本编辑器，看看是否发生这种情况。

# delphi - 我可以通过 TOleContainer 或其他方式直接在 Delphi 应用程序中实例化 ActiveX 控件吗？

> ID：12361481
> 
> 赞同：1
> 
> 时间：2012-09-11T01:18:17.777
> 
> 标签：delphi, activex

TOleContainer 当然可以插入 OLE 对象，如 Word 文档。但它似乎不适用于 ActiveX。当然，我知道 Delphi 创建 ActiveX 包装器的 IDE 能力。如果我想在运行时创建控件而不创建包装器并将其安装到 IDE 中怎么办？

该控件已注册，因此[与此问题不同，我不需要免注册 com](https://stackoverflow.com/questions/8974423/how-can-i-dynamically-instantiate-an-activex-control-from-an-ocx-file)。我只需要一些关于如何启动动态 ActiveX 容器的想法或示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T02:52:05.360

与 [`TOleContainer`](http://docwiki.embarcadero.com/Libraries/en/Vcl.OleCtnrs.TOleContainer)ActiveX 控件一起工作时，您只需`ProgID`将 Activex 控件的属性传递给[`CreateObject`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.OleCtnrs.TOleContainer.CreateObject)方法，然后使用后期绑定访问 ActiveX 的属性。

检查此示例，它在运行时在 TOleContainer 内创建 Windows Media Player ActiveX 控件。

```
OleContainer1.CreateObject('Wmplayer.OCX.7', False);
OleContainer1.OleObject.URL:='F:\Music\Iron Maiden - The number of the beast.mp3';
OleContainer1.OleObject.Controls.Play; 
```

# r - R使用apply打印出行和列名的矩阵

> ID：12361484
> 
> 赞同：1
> 
> 时间：2012-09-11T01:18:35.750
> 
> 标签：r, apply

我有以下矩阵'x'

```
 a b
a 1 3
b 2 4 
```

这是一个非常大的矩阵（针对这个问题进行了修剪）我想通过每个行名和列名组合以及该单元格中的值打印出这个矩阵。所以预期的输出将是

```
a,a,1
a,b,3
b,a,2
b,b,4 
```

我可以遍历它们，但我很确定这可以避免（应用？）。任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:22:51.773

一种方法是使用包中的`melt`函数`reshape2`。

```
x <- matrix(1:4, nrow = 2, ncol = 2,
            dimnames = list(dim1 = c("a", "b"), dim2 = c("a", "b")))

library(reshape2)
melt(x)
#   dim1 dim2 value
# 1    a    a     1
# 2    b    a     2
# 3    a    b     3
# 4    b    b     4 
```

**编辑** 如果您的数据太大以至于速度成为问题，我还建议：

```
data.frame(dim1 = rep(rownames(x), ncol(x)),
           dim2 = rep(colnames(x), each = nrow(x)),
           value = c(x)) 
```

**编辑2**

经过比较大的数据测试后，我不排除`melt`：

```
x <- matrix(runif(9e6), nrow = 3000, ncol = 3000,
            dimnames = list(dim1 = paste0("x", runif(3000)),
                            dim2 = paste0("y", runif(3000))))

system.time(y1 <- melt(x))
# user  system elapsed 
# 1.17    0.44    1.61 

system.time(y2 <- data.frame(dim1 = rep(rownames(x), ncol(x)),
                             dim2 = rep(colnames(x), each = nrow(x)),
                             value = c(x)))
# user  system elapsed 
# 1.98    0.37    2.36 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:37:39.780

您还可以使用基本 R 函数`row`和 `col`

如果要引用`row.names`，`col.names`然后使用`as.factor = T`. 使用`as.character`并`as.numeric`展平矩阵。

```
do.call(data.frame,list(lapply(list(row = row(x, T),col=col(x,T)), as.character), 
                         value =as.numeric(x)))

##  row col value
## 1   a   a     1
## 2   b   a     2
## 3   a   b     3
## 4   b   b     4 
```

如果你想要一个`matrix`，你需要将所有列作为同一个类（`character`或`numeric`。然后你可以使用

```
do.call(cbind, lapply(list(row = row(x), col = col(x), value = x), as.numeric))

##      row col value
## [1,]   1   1     1
## [2,]   2   1     2
## [3,]   1   2     3
## [4,]   2   2     4 
```

或者作为性格

```
do.call(cbind, lapply(list(row = row(x, T), col = col(x, T), value = x), as.character))
##     row col value
## [1,] "a" "a" "1"  
## [2,] "b" "a" "2"  
## [3,] "a" "b" "3"  
## [4,] "b" "b" "4" 
```

# java - 我应该写什么样的测试？

> ID：12361485
> 
> 赞同：2
> 
> 时间：2012-09-11T01:18:52.233
> 
> 标签：java, unit-testing, tdd

**背景**

我正在使用 Java、slick2d 和其他框架编写一个小游戏。Slick2d 无法轻松编写单元测试，但这是我无法解决的问题。该项目的目标之一是有一些测试覆盖率，但是......

**问题**

嗯……我写了一个 200 行的测试用例，有 15 个测试，所有的测试都是针对一个只有一个方法的类。

我测试了所有我能想到的东西：无效参数、无效参数的组合、交换方法调用等等。我知道我无法测试所有内容，并且我知道我不需要测试库中的代码（Java API、slick2d API、logback API 等），但即使在这种情况下，我也会对测试感到非常疯狂，我相信如果我为我创建的每个方法编写 15 个测试，我将无法完成它。所以...

**问题**

好的 TDD 在编写测试时在哪里划清界限？我到底应该测试什么，我可以安全地忽略什么？

OBS：对于那些想知道的人，我为其编写了 15 个测试的单方法类正在将一些字符串加载到一个数组中，并且它的方法将检索字符串，给定行和文件作为参数。

OBS2：我一点也不怀疑单元测试。我实际上想从头开始将它们合并到我的项目中（只要我的 API 允许我）。我也只想完成这个项目，不要整天写测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T03:17:44.980

我会推荐以下**书籍**：[http](https://rads.stackoverflow.com/amzn/click/com/0321146530) ://www.amazon.com/dp/0321146530/?tag=stackoverfl08-20 来自亚马逊
除了书籍推荐，当你设计你的测试时，你一开始有很多工作，但是在某个时候，对于每个新代码，**您的大部分测试逻辑都已经到位**。
我还建议确保您也专注于**入侵预防**（测试 SQL 注入、缓冲区 ovf 等的代码）
要记住的另一点是，当编写代码的人是编写测试的人时，您可能需要**其他人**尝试将其分解……不是针对所有内容，但至少针对其中的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:54:33.690

如果您在谈论 TDD，请记住该方法是先测试，因为测试将推动您的设计以及最终 API 的外观。如果您使用这种方法，那么停止编写新测试的地方会更加清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T02:56:55.577

好吧，在正确的 TDD 中，您实际上首先要编写您想要添加的新功能的测试。最初它会失败，直到您完全实现了您所追求的，以及验证行为确实正确的断言。

因此，当您发现自己需要新功能时，您只需继续添加更多测试的过程。这样，测试驱动你编写的代码，而不是相反。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T02:48:32.627

我主要只为公共方法编写单元测试。当我认为某个方法以正确的方式工作时，我会停止为该方法编写测试，并且仅在发现错误时才为该方法添加更多测试。

# java - 如何确定原始变量的原始类型？

> ID：12361492
> 
> 赞同：48
> 
> 时间：2012-09-11T01:19:35.460
> 
> 标签：java, primitive-types, typeof

Java 中是否有类似“typeof”的函数，它返回原始数据类型 (PDT) 变量的类型或操作数 PDT 的表达式？

`instanceof`似乎只适用于类类型。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-11T01:24:28.690

尝试以下操作：

```
int i = 20;
float f = 20.2f;
System.out.println(((Object)i).getClass().getName());
System.out.println(((Object)f).getClass().getName()); 
```

它将打印：

```
java.lang.Integer
java.lang.Float 
```

至于`instanceof`，你可以使用它的动态对应物[`Class#isInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInstance%28java.lang.Object%29)：

```
Integer.class.isInstance(20);  // true
Integer.class.isInstance(20f); // false
Integer.class.isInstance("s"); // false 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-11T03:03:47.947

有一种不需要隐式装箱的简单方法，因此您不会在原语和它们的包装器之间感到困惑。您不能将`isInstance`其用于原始类型——例如调用`Integer.TYPE.isInstance(5)`(`Integer.TYPE`相当于`int.class`) 将返回`false`，因为`5`它被自动装箱到一个`Integer`之前的手中。

获得你想要的东西的最简单方法（注意 - 它在技术上是在编译时为原语完成的，但它仍然需要评估参数）是通过重载。看我的[ideone贴](http://ideone.com/JPgec#view_edit_box)。

```
...

public static Class<Integer> typeof(final int expr) {
  return Integer.TYPE;
}

public static Class<Long> typeof(final long expr) {
  return Long.TYPE;
}

... 
```

这可以按如下方式使用，例如：

```
System.out.println(typeof(500 * 3 - 2)); /* int */
System.out.println(typeof(50 % 3L)); /* long */ 
```

这依赖于编译器确定表达式类型和选择正确重载的能力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-23T15:04:34.387

您可以使用以下类。

```
class TypeResolver
{
    public static String Long = "long";
    public static String Int = "int";
    public static String Float = "float";
    public static String Double = "double";
    public static String Char = "char";
    public static String Boolean = "boolean";
    public static String Short = "short";
    public static String Byte = "byte";

    public static void main(String[] args)
    {
        //all true
        TypeResolver resolver = new TypeResolver();
        System.out.println(resolver.getType(1) == TypeResolver.Int); 
        System.out.println(resolver.getType(1f) == TypeResolver.Float); 
        System.out.println(resolver.getType(1.0) == TypeResolver.Double);
        System.out.println(resolver.getType('a') == TypeResolver.Char); 
        System.out.println(resolver.getType((short) 1) == TypeResolver.Short); 
        System.out.println(resolver.getType((long) 1000) == TypeResolver.Long);
        System.out.println(resolver.getType(false) == TypeResolver.Boolean); 
        System.out.println(resolver.getType((byte) 2) == TypeResolver.Byte);
    }

    public String getType(int x)
    {
        return TypeResolver.Int;
    }

    public String getType(byte x)
    {
        return TypeResolver.Byte;
    }

    public String getType(float x)
    {
        return TypeResolver.Float;
    }

    public String getType(double x)
    {
        return TypeResolver.Double;
    }

    public String getType(boolean x)
    {
        return TypeResolver.Boolean;
    }

    public String getType(short x)
    {
        return TypeResolver.Short;
    }

    public String getType(long x)
    {
        return TypeResolver.Long;
    }

    public String getType(char x)
    {
        return TypeResolver.Char;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-01T12:25:01.787

您可以使用两种方法来确定 Primitive 类型的类型。

```
package com.company;

public class Testing {
public static void main(String[] args) {
    int x;
    x=0;
    // the first method 
    System.out.println(((Object)x).getClass().getName());
    if (((Object)x).getClass().getName()=="java.lang.Integer")
        System.out.println("i am int");
   // the second method it will either return true or false
    System.out.println(Integer.class.isInstance(x));
} 
```

}

# javascript - 如何使 div 关闭并在 div 内单击关闭时隐藏？

> ID：12361493
> 
> 赞同：2
> 
> 时间：2012-09-11T01:20:01.430
> 
> 标签：javascript, jquery, css, html, show-hide

基本上，我有代码，用户单击链接，然后出现一个 div。用户必须单击相同的链接才能使该 div 消失。我有八个 div。如何设置它以便您可以单击 div 中的另一个链接来关闭它，而不是单击您用来打开它的同一个链接？我的代码如下。

[http://www.lovehatecreate.net/iqhomes/jquery-show-hide-plugin-2/index.php](http://www.lovehatecreate.net/iqhomes/jquery-show-hide-plugin-2/index.php)

请忽略说语法错误的行。该代码仍然有效，我只是忘记为页面上与我的问题无关的内容上传文件。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:49:28.437

[这](http://jsfiddle.net/vwnUv/)是否涵盖您的用例？

摘抄：

```
$('.show').click(function () {
    var divId = $(this).data('divId');
    $('#' + divId).toggle();
});

$('.hide').click(function () {
    $(this).parent().hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:30:27.813

给出所有`<div>`sa 类，表明它们将被组合在一起（一次只打开一个），然后在单击链接时，隐藏该类的每个元素，**然后再**显示您单击的链接的元素。
如果您想将此与切换结合使用，请在将它们全部隐藏之前获取切换状态，这样您就知道如果它处于打开状态则将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:04:48.710

在这里，我已经在 codebins 上完成了完整的 bins，请检查一次演示链接。

**演示：** [http ://codebins.com/bin/4ldqp7c](http://codebins.com/bin/4ldqp7c)

**HTML**

```
<div id="links">
  <a class="openlink" href="javascript:void(0);">
    Open
  </a>
  <a class="openlink" href="javascript:void(0);">
    Open
  </a>
  <a class="openlink" href="javascript:void(0);">
    Open
  </a>
  <a class="openlink" href="javascript:void(0);">
    Open
  </a>
  <a class="openlink" href="javascript:void(0);">
    Open
  </a>
  <a class="openlink" href="javascript:void(0);">
    Open
  </a>
  <a class="openlink" href="javascript:void(0);">
    Open
  </a>
  <a class="openlink" href="javascript:void(0);">
    Open
  </a>
</div>
<div id="boxes">
  <div class="box">
    <p>
      Here is Content..!! 
    </p>
    <p>
      <a class="closelink" href="javascript:void(0);">
        Close
      </a>
    </p>
  </div>
</div> 
```

**jQuery**

```
$(function() {
    var boxClone;

    $(".openlink").click(function() {
        //Clone Dialogbox
        boxClone = $("#boxes").find(".box:eq(0)").clone(true, true);
        var boxOffset = $("#boxes").find(".box:last").position();
        //Set Dialog Position
        if (boxOffset.top == 0) {
            boxOffset.top = 5;
        }
        if (boxOffset.left == 0) {
            boxOffset.left = 60;
        }
        $(boxClone).css('top', (boxOffset.top + 20));
        $(boxClone).css('left', (boxOffset.left + 20));
        $(boxClone).appendTo($("#boxes"));
        $(boxClone).show(500);
    });

    //Close Dialogbox
    $(".closelink").click(function() {
        $(this).closest(".box").remove();
    });

}); 
```

**CSS**

```
#links{
  float:left;
  width:50px;
  border:1px solid #92a3a7;
  padding:1px;
  background:#88ddfa;
}
#links a{
  dispslay:block;
  text-decoration:none;
  color:#3543ff;
}
#links a:hover{
  text-decoration:underline;
  color:#fd2211;
}
#boxes{
  float:left;
  margin-left:10px;
}
#boxes p{
  text-align:center;
  display:block;
  color:#ccc;
}
#boxes a.closelink{
  text-decoration:none;
  color:#ff2211;
  background:#99cd9a;
  width:40px;
  text-align:center;
  padding:3px;
  font-size:14px;
}
#boxes a.closelink:hover{
  text-decoration:underline;
  background:#a5d9a3;
  color:#2222ff;
}

.box{
  position:absolute;
  width:200px;
  height:200px;
  vertical-align:top;
  border:10px solid #888;
  background:url('http://www.lovehatecreate.net/iqhomes/jquery-show-hide-plugin-2/popupbg.png') #333;
  display:none;

} 
```

**演示：** [http ://codebins.com/bin/4ldqp7c](http://codebins.com/bin/4ldqp7c)

# sql - 在 SQL Server 中使用非空值更新空值

> ID：12361496
> 
> 赞同：0
> 
> 时间：2012-09-11T01:20:33.417
> 
> 标签：sql, sql-server, null, sql-update

如果以前的条目不为空，我正在尝试遍历表并更新当前为空的信息。下面的代码是我想出的，但这只是更新每个字段，以便每个联系人都有相同的传真号码。比我聪明的人知道该怎么做吗？

谢谢您的帮助。

```
UPDATE dbo.AAASTA_CONTACT
SET 
CON_CSN = COALESCE(CRNT_RCD.CON_CSN, LST_RCD.CON_CSN),
CON_COMMENTS = COALESCE(CRNT_RCD.CON_COMMENTS, LST_RCD.CON_COMMENTS),
CON_EMAIL_ADDR = COALESCE(CRNT_RCD.CON_EMAIL_ADDR, LST_RCD.CON_EMAIL_ADDR),
CON_FAX_PH_NUM = COALESCE(CRNT_RCD.CON_FAX_PH_NUM, LST_RCD.CON_FAX_PH_NUM),
CON_HOME_PH_NUM = COALESCE(CRNT_RCD.CON_HOME_PH_NUM, LST_RCD.CON_HOME_PH_NUM),
CON_SEX_MF = COALESCE(CRNT_RCD.CON_SEX_MF, LST_RCD.CON_SEX_MF),
CON_PER_TITLE = COALESCE(CRNT_RCD.CON_PER_TITLE, LST_RCD.CON_PER_TITLE),
CON_WORK_PH_NUM = COALESCE(CRNT_RCD.CON_WORK_PH_NUM, LST_RCD.CON_WORK_PH_NUM),
CON_SUPPRESSMAILFL = COALESCE(CRNT_RCD.CON_SUPPRESSMAILFL, LST_RCD.CON_SUPPRESSMAILFL)
FROM
(
SELECT
CON.ALIAS_KEY, 
CON.LAST_UPD, 
CON.CON_CSN, 
CON.CON_COMMENTS, 
CON.CON_EMAIL_ADDR, 
CON.CON_FAX_PH_NUM, 
CON.CON_HOME_PH_NUM, 
CON.CON_SEX_MF, 
CON.CON_PER_TITLE, 
CON.CON_WORK_PH_NUM,
CON.CON_SUPPRESSMAILFL,
RANK() OVER (PARTITION BY CON.ALIAS_KEY ORDER BY CON.LAST_UPD) AS UPD_RNK
FROM dbo.AAASTA_CONTACT CON
) CRNT_RCD
LEFT OUTER JOIN
(
SELECT
CON.ALIAS_KEY, 
CON.LAST_UPD, 
CON.CON_CSN, 
CON.CON_COMMENTS, 
CON.CON_EMAIL_ADDR, 
CON.CON_FAX_PH_NUM, 
CON.CON_HOME_PH_NUM, 
CON.CON_SEX_MF, 
CON.CON_PER_TITLE, 
CON.CON_WORK_PH_NUM,
CON.CON_SUPPRESSMAILFL,
RANK() OVER (PARTITION BY CON.ALIAS_KEY ORDER BY CON.LAST_UPD) AS UPD_RNK
FROM dbo.AAASTA_CONTACT CON
) LST_RCD
ON CRNT_RCD.ALIAS_KEY = LST_RCD.ALIAS_KEY
WHERE CRNT_RCD.UPD_RNK=1
AND LST_RCD.UPD_RNK>1 
```

# python - 如何检查我的机器上是否安装了 IPython 以及安装这些库的顺序？

> ID：12361500
> 
> 赞同：3
> 
> 时间：2012-09-11T01:21:22.580
> 
> 标签：python, macos, ipython, enthought

我需要使用 python 进行机器学习课程，还需要安装一些外部库。我对安装所有内容的正确顺序有点困惑，因为我听说如果操作不正确，路径可能会变得混乱。

这是我需要的：

*   Python 2.7 版
*   IPython
*   enthought 这个包中可用的库

所以第一步是看我是否安装了python 是的：我有这个版本

```
 AM@~ >python
 Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
 [GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
 Type "help", "copyright", "credits" or "license" for more information. 
```

下一个 IPython

```
 How do I check if I have IPython?
 Also whats the ideal procedure to install it? Any caveats? Any special path settings?     

 Can I use brew to install it? 
```

思想图书馆

```
 Do I have to install these libraries in any particular order? before IPython? after IPython? 
   Do I have to set any specific paths? 
```

我试图避免必须安装并出错然后重新安装等。

所以任何帮助将不胜感激。我正在运行 Mac OS X 10.7 (Mountain Lion)。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-06T09:42:52.243

您可以简单地检查版本，就像我们检查其他软件包一样，检查软件包是否安装正确。

输入您的终端。

`ipython --version`

如果 ipython 安装正确，它将打印版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:31:25.553

既然您已经安装了 Python 2.7，那么获取所有 IPython、Matplotlib、Scipy 等非常简单。如果这是针对课程的，我假设您在该机构有一个 .edu 电子邮件地址？如果是这样就去这里： [http ://www.enthought.com/products/edudownload.php](http://www.enthought.com/products/edudownload.php)

提交您的信息。像任何其他程序一样下载并安装它。然后，您将能够`ipython`从终端呼叫。`ipython --pylab`或者从终端使用 matplotlib 调用。

除非您非常熟悉它的工作原理，否则绝对不要一个接一个地安装库。

# node.js - 在jade的脚本标签中如何检查express局部变量是否存在？

> ID：12361503
> 
> 赞同：0
> 
> 时间：2012-09-11T01:22:04.633
> 
> 标签：node.js, pug

我有一个数据变量发送到客户端，但它可能并不总是作为变量包含在 express locals 中。如果不存在，则`var data = !{JSON.stringify(data)};`返回`var data = ;`导致 js 错误。

我尝试使用以“-”为前缀的条件，但这似乎不起作用。

```
script(type='text/javascript')
    - if locals.data
        var data = !{JSON.stringify(data)};
    - else
        var data = {}; 
```

如果 locals.data 未定义，我如何给它一个默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:34:51.353

Don't you hate it when you wrack your brain, then ask for help on SO, only to figure it out 5min later...

Looks like the following keeps the jade and javascript happy:

```
var data = !{ JSON.stringify(locals.data || '') }; 
```

# objective-c - 在 UITabBarController 中呈现模态视图

> ID：12361504
> 
> 赞同：1
> 
> 时间：2012-09-11T01:22:10.857
> 
> 标签：objective-c, ios, uitabbarcontroller, modalviewcontroller

所以在我的应用程序的根目录中，我有一个`UITabVarController`（在故事板中创建）。当用户转到我的一个选项卡时，我有一个特殊的类，它通过呈现一个模态视图控制器来初始化。所以我的问题是：有没有办法在 UITabBarController 中显示这个模式视图 - 所以我仍然会看到其他选项卡，而不是在它们之上。

我在想类似的事情：

```
self.parentViewController.tabBarController presentViewController
self.parentViewController ... 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:12:38.157

您可能想要的是 NavigationController 而不是模态地做事。如果不需要，可以隐藏导航栏。

# javascript - 由于不同的 jQuery 文件，某些功能不起作用

> ID：12361512
> 
> 赞同：1
> 
> 时间：2012-09-11T01:23:28.970
> 
> 标签：javascript, jquery, slider, horizontal-scrolling, parallax

我正在一个网站上工作，我为不同的功能使用不同的 jQuery 文件。比如灯箱，水平滚动页面。这些功能完美地协同工作。但是我添加了一个新插件，它是视差图像。在插件的一部分中，我必须在 body 或 head 标签中添加以下脚本。因此，只要我添加它，视差图像就会起作用，但水平滚动会停止。

这是脚本：

```
<script type="text/javascript">

   $(window).load(function() {
      $.noConflict(); 
       jQuery('#world').fhparallax({
         editor:'off',
         automatic:0,
         mobile_auto_start:"yes",
         path:'parallax/js/ZeroClipboard.swf'
      }) 
   });
</script> 
```

这些是与水平滚动相关的文件：

```
 <script type="text/javascript" src="style/js/jquery.js">
</script>
  <script type="text/javascript" src="style/js/jquery.scripts.js">
</script>
  <script type="text/javascript" src="style/js/jquery.nivo.slider.js">
</script> 
```

由于我使用的是[Nvio 滑块](http://nivo.dev7studios.com/demos/)，所以我认为您知道顶部链接，但如果您需要，我可以提供这些 js 文件的实际链接。

无论如何，当我测试时，一切都是关于 (function() b/c 当我更改它时，在顶部脚本中滑块工作。

那么是否有可能在同一页面上同时拥有这两个工具？如果是这样，你能指导我修复它吗？谢谢

# ruby-on-rails - 慢速MongoDB嵌入文档查询

> ID：12361513
> 
> 赞同：1
> 
> 时间：2012-09-11T01:23:30.373
> 
> 标签：ruby-on-rails, mongodb, mongoid

在我的 mongodb 集合中，我有一个包含两级嵌入文档的集合。

```
Collection
 - field1
 - field2
 - EmbeddedDocuments1
    - field_a
    - field_b
    - EmbeddedDocument_a
       - field_A
       - field_B
       - field_C
  - EmbeddedDocuments2
    - field_c
    - field_d
    - EmbeddedDocument_a
       - field_D
       - field_E
       - field_F
 - EmbeddedDocuments3
    - field_e
    - field_f
    - EmbeddedDocument_a
       - field_G
       - field_H
       - field_I 
```

当我进行查询以查找特定的第二级文档时，需要很长时间，~= 500ms

我尝试的查询类似于下面的行，我只想从第二级文档中获取数据。

```
db.collections.find({ "embedded_documents_1.embedded_documents_2._id":ObjectId("502e8f5565ce10780f00000c")  }) 
```

但是，这会返回整个一个集合，其中包含 field1、field2、所有 EmbeddedDocuments

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:46:55.220

您的查询正在搜索与 "embedded_documents_1.embedded_documents_2._id":ObjectId("502e8f5565ce10780f00000c") 匹配的任何文档

因此，它已完整返回与此匹配的每个文档。嵌入式文档本质上是另一个文档中的文档。所以 mongodb 已经返回了完整的文档。

您需要将返回的值限制为仅二级文档。查看[http://www.mongodb.org/display/DOCS/Querying#Querying-FieldSelection](http://www.mongodb.org/display/DOCS/Querying#Querying-FieldSelection)以获取有关如何限制查询的信息。

# javascript - GoogleMap Api - 初始化（）

> ID：12361515
> 
> 赞同：1
> 
> 时间：2012-09-11T01:23:37.253
> 
> 标签：javascript, jquery, api

如何在不使用 body 标签的情况下初始化谷歌地图（body onload=.....）

我不能使用： `<body onload="initialize()">`

我需要使用一些Javascript来获得相同的结果..但我不知道如何，我试过：

```
 <script type='text/javascript'>  
      $(window).load(function() {
         initialize()
      });
    </script> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:32:58.890

i just got it:

```
window.onload = function() {
        initialize()
    }; 
```

Can be closed..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T04:33:24.863

If you are using jQuery you can also do it like this:

```
$(function() {
    initialize();
} 
```

# objective-c - Microsoft Excel 的应用程序名称是什么？

> ID：12361517
> 
> 赞同：1
> 
> 时间：2012-09-11T01:23:47.343
> 
> 标签：objective-c, cocoa, nsworkspace

我将使用的 Microsoft Excel 的应用程序名称是什么`-[NSWorkspace fullPathForApplication:]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:11:58.677

Excel 的名称和路径可以更改，任何应用程序都可以更改。您可能需要考虑使用其捆绑 ID 启动 - 即 com.microsoft.Excel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:43:29.007

它是@"Microsoft Excel"（至少在 Office 2008 中）：

这：

```
NSString *path = [[NSWorkspace sharedWorkspace] fullPathForApplication:@"Microsoft Excel"];
NSLog(@"path: %@", path); 
```

输出：

```
2012-09-10 21:42:57.059 Craplet[2164:707] path: /Applications/Microsoft Office 2008/Microsoft Excel.app 
```

我尝试了“Excel”和“MS Excel”并确认它们返回 null。

# iphone - 如何在视图之间创建具有空间的分页滚动视图

> ID：12361519
> 
> 赞同：4
> 
> 时间：2012-09-11T01:23:52.567
> 
> 标签：iphone, objective-c, scrollview, uipagecontrol

我遵循了有关如何创建滚动视图页面控件的教程：http: [//www.iosdevnotes.com/2011/03/uiscrollview-paging/](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)

本教程非常好，我很好地实现了代码。这是我的问题：

我想在我的 PageViews 之间放置一个空格，但是当它更改页面时，它会显示下一页中视图之间的空格。当我更改页面时，滚动必须在空格后停止。

我在这里更改了教程代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];

    #define space 20

    for (int i = 0; i < colors.count; i++) {
        CGRect frame;
        frame.origin.x = (self.scrollView.frame.size.width + space) * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.

        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [colors objectAtIndex:i];
        [self.scrollView addSubview:subview];
        [subview release];
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * colors.count+ space*(colors.count-1), self.scrollView.frame.size.height);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T03:07:17.217

听起来你想要页面之间的“gutter”，以便每个页面填充滚动视图，并且 gutter 仅在用户拖动视图时可见。例如，内置的照片应用程序就是这样做的。

使您的滚动视图按`space`点变宽。例如，如果您希望滚动视图看起来与屏幕一样宽（320 点），项目之间有 20 点的边距，那么将滚动视图设置为 340 点宽，额外的 20 点悬挂在右边缘的屏幕。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSArray *colors = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];

    #define kGutterWidth 20

    UIScrollView *scrollView = self.scrollView;
    CGRect scrollViewFrame = scrollView.frame;
    scrollViewFrame.size.width += kGutterWidth;
    scrollView.frame = scrollViewFrame;

    CGSize scrollViewSize = scrollView.bounds.size;

    for (int i = 0; i < colors.count; i++) {
        CGRect frame = CGRectMake(scrollViewSize.width * i, 0,
            scrollViewSize.width - kGutterWidth, scrollViewSize.height);
        UIView *subview = [[UIView alloc] initWithFrame:frame];
        subview.backgroundColor = [colors objectAtIndex:i];
        [scrollView addSubview:subview];
        [subview release];
    }

    scrollView.contentSize = CGSizeMake(
        colors.count * scrollViewSize.width,
        scrollViewSize.height);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T03:01:57.550

我以前一直走这条路，我建议按照教程代码的建议布置滚动视图，子视图之间没有空格。

相反，给每个子视图另一个子视图，其框架从它的父级插入......

```
CGRect scrollViewFrame = self.scrollView.frame;

for (int i=0; i<colors.count; i++) {
    CGRect frame = CGRectMake(scrollViewFrame.size.width * i, 0, scrollViewFrame.size.width, scrollViewFrame.size.height);

    // this will be our framing view, full size with no gaps
    UIView *subview = [[UIView alloc] initWithFrame:frame];
    subview.backgroundColor = [UIColor whiteColor];

    // here's the trick - use CGRectInset on the framing view's bounds
    UIView *colorView = [[UIView alloc] initWithFrame:CGRectInset(subview.bounds, 10, 10)];
    colorView.backgroundColor = [colors objectAtIndex:i];

    [subview addSubview:colorView];
    [self.scrollView addSubview:subview];

    // aren't you using ARC?  your tutorial is probably older than ARC
    // would strongly suggest converting to ARC
    [subview release];
    [colorView release];
}
self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * colors.count, self.scrollView.frame.size.height); 
```

这种方法的好处是顶级子视图布局的数学仍然是宽度的简单倍数。您将引用该插入常量的唯一位置是它所属的 CGRectInset 上。

# vbscript - ActiveX、VBScript、Word 无法创建文件

> ID：12361520
> 
> 赞同：1
> 
> 时间：2012-09-10T22:25:31.190
> 
> 标签：vbscript, activex, ms-word

我正在使用一个使用 VBscript/ActiveX 在浏览器中嵌入 Word 的应用程序。如果此应用程序未以管理员身份运行，则此应用程序无法创建要在浏览器中编辑的 Word 文件 - 相反，我从 Word 中弹出并说：“Word 无法创建工作文件。检查临时环境变量”

我认为这是一个权限问题，但我不知道如何解决它。首先我想知道文件被写入哪里。我不确定它是当前用户的 TEMP 变量 (C:\users\chris\appdata\local\Temp) 还是实际环境变量 (C:\Windows\TEMP) 或 Internet Explorer 临时 Internet 文件目录 ( C:\users\chris\appdata\local\Temp\Temporary Internet Files）。
此外，哪个用户需要正确文件夹的权限？会是运行 IE 的用户吗？

一旦 Word 文件无法加载，我会在浏览器中收到错误消息，指出错误位于第 60 行。以下是页面源中的相关代码：

```
<SCRIPT Language="VBScript">
    Sub InitWrapper()
    'MsgBox "First line of onLoad"
    oframe.EnableFileCommand(0) = False
    oframe.EnableFileCommand(1) = False
    oframe.EnableFileCommand(2) = False
    oframe.EnableFileCommand(3) = False
    oframe.EnableFileCommand(4) = False
    oframe.CreateNew "Word.Document"  --------------------------------This is line 60
    oframe.ReadRTF ( "{\rtf1\...fonttbl....*MORE HERE*......
    oframe.Activate
    End Sub

    sub Save_Data
        document.THEFORM.content.value = oframe.RTF
    end sub

        sub InsertString(str)
                dim doc
                Set doc = oframe.ActiveDocument
                doc.ActiveWindow.Selection = str
                doc.ActiveWindow.Selection.Collapse wdCollapseEnd
                'Paste directly
                'doc.ActiveWindow.Selection.Paste
                oframe.Activate
                document.THEFORM.content.value = oframe.RTF
        end sub

    sub wrapperUnload()
        oframe.Close
    End Sub
</SCRIPT> 
```

谁能指出我应该寻找什么来解决这个问题的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T19:09:25.220

我看到一个类似的问题，当我通过activeX打开嵌入在IE浏览器中的word文件时，MS word在其中一个弹出框中抛出以下错误消息

> Word 无法创建工作文件。检查临时环境变量

这可以通过将 Web 应用程序/站点**URL**添加到**IE 浏览器安全**设置中的**受信任站点列表来解决。**

 **希望这可以帮助。**

# mysql - MySQL按列分类计数

> ID：12361521
> 
> 赞同：-12
> 
> 时间：2012-09-11T01:24:04.193
> 
> 标签：mysql, sql

我有一张像这样的桌子：

```
id name center1    center2   cnter3
1  abc  baroda     bhopal    chennai
2  pqr  amhedabad  Surat     kolkata
3  nml  bhopal     chennai   Surat
4  fts  baroda     Surat     Baroda 
```

我想要一个结果，比如：

```
 center1 center2  center3
Baroda     2       0        1   
Ahmedabad  1       0        0
bhopal     1       1        0
chennai    0       1        1
Kolkatta   0       0        1
Surat      0       2        1. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:32:13.383

This will require a handful of subquery joins. First, you need to get all the distinct values from the three columns, which would be done with a `UNION` of queries of each column.

That distinct list must then be `LEFT JOIN`ed against a trio of subqueries which pulls the counts per value from each of the three columns.

Finally, a `COALESCE()` replaces NULLs with 0.

```
SELECT 
  allvalues.value,
  /* LEFT JOIN will result in NULL for non-existent values, so coalesce into 0 */
  COALESCE(c1.counts, 0) AS center1,
  COALESCE(c2.counts, 0) AS center2,
  COALESCE(c3.counts, 0) AS center3
FROM
  (
    /* UNIONs gets distinct vals from all columns */
    SELECT center1 AS value FROM yourtable
    UNION
    SELECT center2 AS value FROM yourtable
    UNION
    SELECT center3 AS value FROM yourtable
  ) AS allvalues
  /* LEFT JOIN the list of distinct possible values against a count per value for each column */
  LEFT JOIN (
    SELECT center1, COUNT(*) AS counts FROM yourtable GROUP BY center1
  ) c1 ON allvalues.value = c1.center1
  LEFT JOIN (
    SELECT center2, COUNT(*) AS counts FROM yourtable GROUP BY center2
  ) c2 ON allvalues.value = c2.center2
  LEFT JOIN (
    SELECT center3, COUNT(*) AS counts FROM yourtable GROUP BY center3
  ) c3 ON allvalues.value = c3.center3 
```

### [Here is a working demonstration](http://sqlfiddle.com/#!2/9366e/1), because I guess I'm feeling extra charitable tonight.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T01:42:08.563

我使用[sqlfiddle](http://sqlfiddle.com/#!2/0d9a1/9)将表的文本表示转换为一系列 CREATE TABLE 和 INSERT INTO 语句：

```
CREATE TABLE CenterCodes
    (`id` int, `name` varchar(3), `center1` varchar(9), `center2` varchar(7), `center3` varchar(7))
;

INSERT INTO CenterCodes
    (`id`, `name`, `center1`, `center2`, `center3`)
VALUES
    (1, 'abc', 'baroda', 'bhopal', 'chennai'),
    (2, 'pqr', 'amhedabad', 'Surat', 'kolkata'),
    (3, 'nml', 'bhopal', 'chennai', 'Surat'),
    (4, 'fts', 'baroda', 'Surat', 'Baroda')
; 
```

尝试以下查询。内部`UNION`为每个字符串值生成多行，每组 3 列中的 2 列为 NULL。这些 NULL 然后被`SUM()`外部查询中的聚合 s 消除，将行集折叠为每个字符串值一行。

```
SELECT
  centername,
  SUM(CASE WHEN centername = center1 THEN 1 ELSE 0 END) AS center1,
  SUM(CASE WHEN centername = center2 THEN 1 ELSE 0 END) AS center2,
  SUM(CASE WHEN centername = center3 THEN 1 ELSE 0 END) AS center3
FROM (
  SELECT
    center1 AS centername,
    center1,
    NULL AS center2,
    NULL AS center3
  FROM CenterCodes
  UNION ALL
  SELECT
    center2 AS centername,
    NULL AS center1,
    center2,
    NULL AS center3
  FROM CenterCodes
  UNION ALL
  SELECT
    center3 AS centername,
    NULL AS center1,
    NULL AS center2,
    center3
  FROM CenterCodes
) AS Centers
GROUP BY centername; 
```

# c# - 类继承和构造函数

> ID：12361529
> 
> 赞同：2
> 
> 时间：2012-09-11T01:24:46.963
> 
> 标签：c#, class, inheritance, constructor

向 StackOverflow 的所有聪明才智致敬！

我越来越熟悉 c# 类继承和多个构造函数，但我似乎无法说出一个可以让我谷歌它的问题。

这是我所拥有的：

```
public class Order: OtherOrder
{

    private OtherOrderManager _om;

    public Order()
    {
        if (_om == null)
            _om = new OtherOrderManager();
    }

    public Order(int orderID)
        : base()
    {

    }
} 
```

很明显，现在我可以做类似的事情：

```
Order order = new Order();
order.Member_From_OtherOrder_Class = "bleh"; 
```

但这是我试图在构造函数中实现的：

```
public class Order: OtherOrder
{

private OtherOrderManager _om;

public Order()
{
    if (_om == null)
        _om = new OtherOrderManager();
}

public Order(int orderID)
    : base()
{
   this = (Order)_om.GetOrder(orderID); //Returns an instance of OtherOrder
   //Basically, I want to populate all the members of Order() interited
   //from OtherOrder and fill them with data returned by this call.
} 
```

}

显然，“this”是只读的，因此甚至无法编译。是否有任何技术表达可以描述我正在寻找的东西？甚至可能吗？

谢谢！

编辑：我想我会使用反射来遍历所有成员并以这种方式获取/设置值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T01:47:56.040

尽管对于您要实现的目标有点模糊，但我猜您可能希望使用类似于使用工厂可能带有复制构造函数的东西。从本质上讲，复制构造函数提供了一种简单的方法来使用您的副本沿继承链填充数据。

考虑以下基类：

```
public abstract class OrderBase
{
    public int OrderID { get; private set; }
    public string Name { get; protected set; }

    public OrderBase()
    {

    }

    public OrderBase(OrderBase copiedOrder)
    {
        this.OrderID = copiedOrder.OrderID;
        this.Name = copiedOrder.Name;
    }
} 
```

（我把无参数构造函数留在那里，因为我猜它会在某个地方需要）

所以 an`OrderBase`可以通过传递另一个`OrderBase`实例来实例化。在该构造函数中，我们知道要复制哪些属性并在编译时进行检查。

现在一个子类可能是：

```
public class CustomOrder : OrderBase
{
    public Guid CustomID { get; private set; }

    public CustomOrder()
    {

    }

    public CustomOrder(CustomOrder copiedOrder)
        : base(copiedOrder)
    {
        this.CustomID = copiedOrder.CustomID;
    }
} 
```

在这里，`CustomOrder`唯一复制它自己声明的属性，并将其余的复制责任传递给基类。向链中再添加一个类：

```
public class ValidatableCustomOrder : CustomOrder
{
    public bool IsValid { get; private set; }

    public ValidatableCustomOrder()
    {

    }

    public ValidatableCustomOrder(ValidatableCustomOrder copiedOrder)
        : base(copiedOrder)
    {
        this.IsValid = copiedOrder.IsValid;
    }
} 
```

您可以看到它如何很好地管理每个子类的每个属性集，而无需任何一个类对另一个类了解太多。反过来，您的工厂可能看起来像：

```
public static class ValidatableCustomOrderLoader
{
    public static ValidatableCustomOrder Get(int orderID)
    {
        ValidatableCustomOrder loadedOrder = LoadOrderFromSomewhere(orderID);
        ValidatableCustomOrder copiedOrder = new ValidatableCustomOrder(loadedOrder);
        return copiedOrder
    }

    private ValidatableCustomOrder LoadOrderFromSomewhere(int orderID)
    {
        //get your order somehow
    }
} 
```

因此它（以某种方式）加载数据（可能来自数据库），将其复制到一个新实例，该实例将链接所有复制构造函数。您的调用代码如下所示：

```
int orderID = 10;
ValidatableCustomOrder order = ValidatableCustomOrderLoader.Get(orderID); 
```

无论如何，我不能说这是否会对您有*特别*的帮助，因为您的问题/代码似乎有点离题和模糊，但希望它能帮助您提供一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:29:41.063

想到了两种方法：手动复制属性：

```
public Order(int orderID)
    : base()
{
   var other = (Order)_om.GetOrder(orderID);
   this.SomeProperty = other.SomeProperty; //repeat for each property/field that should be copied
} 
```

或者使用静态或工厂方法而不是构造函数，例如：

```
public static Order GetOrder(int orderId)
{
    return (Order)_om.GetOrder(orderID);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T01:27:42.813

尝试：

`this._om = (Order)_om.GetOrder(orderID);`

希望有帮助。

# c# - 用于编写数据库创建脚本的 ADO.NET 命令

> ID：12361533
> 
> 赞同：0
> 
> 时间：2012-09-11T01:25:30.490
> 
> 标签：c#, ado.net, .net-2.0, sql-server-2000

有没有我可以在 ADO.NET 中执行的 SELECT 命令来检索一个脚本，该脚本将使用空表从头开始重建我的数据库？我希望能够编写数据库本身的创建脚本，以及所有表、视图和存储过程以及表之间存在的任何关系。还有主键和身份规范。

我正在使用 SQL Server 2000 和 C# (.NET Framework 2.0)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:38:48.230

根据您要执行的操作，您可以考虑将数据库结构构建到模型中（系统数据库/模型）。然后，每次您创建一个新数据库时，您都会获得已经插入到新数据库中的所有需要​​的东西。

但请注意，此解决方案将为创建的所有新数据库创建所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T04:54:14.583

没有这样的 SELECT 命令，但您可以使用 SQL Server Management Studio 为您生成这样的脚本。

对象资源管理器中数据库的上下文菜单具有`Script Database as`可以为您解决问题的选项。`SqlCommand`然后，您可以使用标准对象从您的程序中执行生成的脚本。

# java - Playframework 的社会群体？

> ID：12361534
> 
> 赞同：2
> 
> 时间：2012-09-11T01:25:44.087
> 
> 标签：java, facebook, playframework, playframework-2.0, playframework-1.x

是否有任何社交团体（例如：facebook 群组、粉丝页面..等）在 playframework 上讨论？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T04:16:52.213

有一个相当活跃的谷歌群组；

[https://groups.google.com/forum/?fromgroups#!forum/play-framework](https://groups.google.com/forum/?fromgroups#!forum/play-framework)

他们的 gitHub 位置是；

[https://github.com/playframework/play20](https://github.com/playframework/play20)

我相信两者都有资格作为社交团体，但我不相信有特定的 Facebook 团体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:09:48.097

此外，对于 Play 1.x ， [https: //groups.google.com/forum/#!forum/playone](https://groups.google.com/forum/#!forum/playone)

# javascript - SimpleCart(js) 选择选项问题

> ID：12361539
> 
> 赞同：1
> 
> 时间：2012-09-11T01:26:41.820
> 
> 标签：javascript, jquery

我正在实施我的 simpleCart 项目，无法将尺寸选择转移到我的 HTML 中的购物车部分或通过 PayPal。所有其他选项都很完美，除了尺寸？？？我很难过，在此先感谢您的任何解决方案或帮助。祝您愉快。

我的HTML：

```
<div id="myLB2"><h11>DNA</h11>
<div class="simpleCart_shelfItem">
<a class="item_add" href="javascript:;"><img src="./img/LB/dna2.jpg" width="250" height="280"></a>
<h14><select class="item_size">
<option value="xs">xs </option>
<option value="sm">sm </option>
<option value="md">md </option>
<option value="LG">LG </option>
<option value="XL">XL </option>
<option value="2X">2X </option>
<option value="3X">3X </option>
</select></h14>
<h15><span class="item_name">DNA</span><br/>
<span class="item_quantity"> 3 </span><br/>
<span class="item_price">$42.78</span></h15>
</div>

</div>
<div id="Storetotal">
<h12>Store</h12>

<h10>

<div>TOTAL<br/>
<span class="simpleCart_grandTotal"></span>
<a href="javascript:;" class="simpleCart_checkout">Checkout</a>
<span class="simpleCart_items"></span>

</div><br/>
</h10>  
</div>` 
```

我的CSS：

```
h10{    
color: #1fbaf4;
font-family: Questrial ,Arial ,sans-serif;
font-size: 12px;
opacity:.35;}

h11{    
color: #000000;
font-family: Questrial ,Arial ,sans-serif;
font-size: 12px;
opacity:.9;}

h12{    
color: #1fbaf4;
position:fixed;
font-family: Questrial ,Arial ,sans-serif;
font-size: 14px;
opacity:.35;
right:12em;}

h14{    
color: #1fbaf4;
opacity:.18;
font: 12px; 
font-family: Questrial ,Arial ,sans-serif;
letter-spacing:-.1em;
position:absolute;
top:1.5em;
left:.1em;}

h15{    
color: #1fbaf4;
font-family: Questrial ,Arial ,sans-serif;
opacity:0;
font: 12px;
letter-spacing:-.12em;
position:absolute;
top:3.6em;
left:.1em;} 
```

简单购物车：

```
// default options
settings = {
checkout    : { type: "PayPal", email: "yoursite.com" },
currency    : "USD",
language    : "english-us",
cartStyle   : "div",

cartColumns : [
{ attr: "size", label: true },
{ attr: "name", label: false },
{ attr: "quantity", label: false },
{ attr: "price", label: "SubTotal", view: 'currency' },
{ view: "decrement", label: false },
{ view: "increment", label: false },
{ view: "remove", text: "Remove", label: false }
],
excludeFromCheckout : ['thumb'],
shippingFlatRate    : 0,
shippingQuantityRate    : 12.79,
shippingTotalRate   : 0,
shippingCustom      : null,
taxRate         : 0.064,
taxShipping     : false,
data    : {}
}, 
```

# c++ - wxWidgets - 如何嵌入 .ico 和 .png 图像并用于绘制工具栏项目

> ID：12361543
> 
> 赞同：1
> 
> 时间：2012-09-11T01:27:04.680
> 
> 标签：c++, visual-studio, wxwidgets

我想创建工具栏项并从程序内存中的图像而不是磁盘上的文件中绘制它们。我更喜欢使用资源文件 (.rc) 嵌入图像，但如果我需要以某种方式滚动我自己的，那也没关系。

图像文件为 .ico 和 .png。

假设我可以使用 .rc 文件中的内容，我该如何完成这段代码？

```
void MyFrame::AddToolBarItem(int ID, wxSize sz, const char* file, const char* short_help, const char *long_help) {
    const char *end = file+strlen(file);
    const char *dot = std::find(file, end, '.');
    if(dot != end) {
        // It's an external file, with an extention, like .ico or .png
        wxImage im(file);
        im.Rescale(sz.x, sz.y, wxIMAGE_QUALITY_HIGH);
        wxBitmap bmp(im);
        my_tool_bar->AddTool(ID, short_help, bmp, long_help);
    } else {
        // It's a resource
        // What now, StackOverflow???
    }
} 
```

编辑：好的，我会让它更容易。忘记重新缩放。我可以用 Gimp 图片编辑器做到这一点。假设图像大小合适。您还可以假设它们是 .ico 或任何便于 wxWidgets 使用的格式。

编辑 2：我正在接受一个答案，但我决定最好只是“手动”嵌入图像，完全避免 .rc 概念。我写了一个小程序来创建一个带有静态初始化器的 .cpp 文件，但是可以在网上找到它们。当编译到程序中时，.cpp 文件会在只读存储器中创建映像文件的副本。.rc 文件是 Windows 特定的东西，因此最好避免将其用于自定义图标和光标，以实现可移植性。但是，在 MS 项目中有一个 .rc 文件确实有意义，该文件只包含“#include <wx/msw/wx.rc>”行，这将允许访问一些默认情况下可用的库存游标等在其他平台上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:23:43.010

不支持从 wx 本身的资源中加载 PNG，但在您的代码中很容易做到这一点，请参阅[http://wiki.wxwidgets.org/Embedding_PNG_Images#Embedding_PNG_images_into_Windows_rc_file](http://wiki.wxwidgets.org/Embedding_PNG_Images#Embedding_PNG_images_into_Windows_rc_file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T07:30:16.663

[位图和图标概述](http://docs.wxwidgets.org/trunk/overview_bitmap.html)对此给出了很好的解释。基本上，一旦您将资源嵌入到 .rc 文件中，您需要做的就是：

```
wxBitmap bmp(wxBITMAP(bmpnameinrcfile)); 
```

同样对于 ico

```
wxIcon icon(wxICON(iconameinrcfile)); 
```

# database - magento 将 sales_flat_quote_payment 与 sales_flat 订单表连接起来

> ID：12361544
> 
> 赞同：0
> 
> 时间：2012-09-11T01:27:07.207
> 
> 标签：database, magento, join, database-table

我试图在报告中显示 CC 的 last4 和 Card 类型，通过查看数据库我了解到在 sales_flat_quote_payment 内部有一个称为附加信息的字段，该字段似乎包含我需要的所有信息，所以我如果离开那里就需要提取。但问题是我正在尝试找到一种方法将 sales_flat_quote_payment 与 sales_flat 订单表连接起来，这样我就可以通过 increment_id 匹配记录，但似乎找不到这样做的方法。

我已经尝试过：

```
orders->getSelect()->join(
    array('p' => $orders->getResource()->getTable('sales/order_payment')),
    'p.parent_id = main_table.entity_id',
    array('cc_last4' => 'p.cc_last4',  'cc_type'  => 'p.cc_type')
);

'OrderCreditCardLast4' => $order['cc_last4'], 
```

但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T03:29:09.547

假设您有订单号，请执行以下操作：

```
select a.reserved_order_id, b.cc_last4
    from sales_flat_quote a, sales_flat_quote_payment b
    where b.quote_id=a.entity_id and a.reserved_order_id='YOUR ORDER NUMBER HERE'; 
```

# spring-security - 春安3：病了，累了。任何人都可以复制一个简单的项目，包括 JARS

> ID：12361545
> 
> 赞同：0
> 
> 时间：2012-09-11T01:27:11.610
> 
> 标签：spring-security

我在分析错误 **配置问题上浪费了 5 个多小时：You cannot use a spring-security-2.0.xsd schema with Spring Security 3.0。请将您的架构声明更新为 3.0 架构。**

尝试了很多不同版本的罐子

什么都没解决

我真的很无助。。

PLS 任何人都可以复制一个 SPRING SECURITY 3 项目示例，包括罐子吗？

我谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:41:39.700

该错误表明您的 jars 和 xml 配置有问题。我打赌你有类似的东西

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/security 
      http://www.springframework.org/schema/security/spring-security-3.0.3.xsd
    ">
  <!-- stuff here -->
</beans:beans> 
```

在您的 security-context.xml 中，并且您使用的是旧版本的 Spring Security（即 3.0），而上述配置需要 3.0.3 版本。请确保所有`spring-security-XXX-YYY.jar`s 都在同一版本中（特别是检查 的存在`spring-security-config`），并将您的架构更新为您在此行中定义的适当版本：

```
 http://www.springframework.org/schema/security/spring-security-3.0.xsd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:35:06.473

[http://www.springframework.org/schema/security/spring-security-3.0.xsd](http://www.springframework.org/schema/security/spring-security-3.0.xsd)解决了我在代码中遇到的同样问题。+1 @Xaerxess。

# asp.net - Asp.net 中的 Ajax 更新面板太慢。如何解决？

> ID：12361546
> 
> 赞同：0
> 
> 时间：2012-09-11T01:27:20.503
> 
> 标签：asp.net, ajax, updatepanel

我只是在 RadioButtonList 中的 selectedindexchanged 期间更新了在超链接的 NavigateURL 中传递的 ID。

在 Mozilla 中，在 Hyperlink 中更新 ID 需要 3.26 秒。其他浏览器也需要很长时间。

我该如何解决这个问题？

我阅读了很多文章并采取了以下措施：

在 web.config 中将 Debug 设置为 false

在更新模式下使用条件

仅使用必须在更新面板中更新的控件。

但是，仍然需要 3.26 秒...

```
Protected Sub chlTypes_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles chlTypes.SelectedIndexChanged
    If (chlTypes.SelectedItem.Value.ToString() <> "") And (chlTypes.SelectedItem.Value.ToString() <> "0") Then
        HypView.NavigateUrl = "~/Content.aspx?ID=" + chlTypes.SelectedItem.Value.ToString()
    End If 
End Sub

 <table id="tbl1">
                <tr>
                    <td>
                        <asp:UpdatePanel ID="UP1" runat="server"  UpdateMode="Conditional">
                            <ContentTemplate>
                                <asp:RadioButtonList ID="chlTypes" runat="server" AutoPostBack="true">
                                </asp:RadioButtonList>
                            </ContentTemplate>
                        </asp:UpdatePanel>
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        <asp:UpdatePanel ID="UP2"  runat="server" UpdateMode="Conditional">
                            <ContentTemplate>
                                <div class="caregiver_view_button">
                                    <asp:HyperLink ID="HypView" class="caregiver_view_button"   
                                     runat="server"><img src="/view_button.png" /></asp:HyperLink>

                                </div>
                            </ContentTemplate>
                            <Triggers>
                                <asp:AsyncPostBackTrigger ControlID="chlTypes" />
                            </Triggers>
                        </asp:UpdatePanel> 
                    </td>
                </tr>
            </table> 
```

# iphone - 动画期间没有更新presentationLayer值？

> ID：12361552
> 
> 赞同：2
> 
> 时间：2012-09-11T01:27:46.647
> 
> 标签：iphone, ios, core-animation, grand-central-dispatch

答案很可能是我无法按照我想要的方式混合事物，我会接受“正确的方式”来混合事物（可能是更复杂的 CAAnimation？我不知道）。是）我有的：

```
__block BOOL animationComplete = FALSE;
[[UIApplication sharedApplication] beginIgnoringInteractionEvents];
[UIView animateWithDuration:0.5f delay:0.0f options:UIViewAnimationCurveEaseInOut
    animations:^{
        [self setFrame:destRect];
    }
    completion:^(BOOL finished) {
        animationComplete = YES;
        [[UIApplication sharedApplication] endIgnoringInteractionEvents];
    }]; 
```

然后对其进行轮询：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, (unsigned long)NULL), ^{
    while (!animationComplete) {
        CALayer *layer = self.layer.presentationLayer;
        CGRect frame = [layer frame];
        CGPoint point = [layer position];
        float currentTranslation = [[layer valueForKeyPath:@"transform.translation.x"] floatValue];
        NSLog(@"%.1f : %.1f : %.1f : %.1f : %.1f : %.1f",frame.origin.x, currentTranslation, frame.origin.x, layer.bounds.origin.x, layer.position.x, point.x);
    }
}); 
```

我抢错队列了吗？参数错误？我看错层了吗？上面是我尝试查看的值的散点图，在动画过程中都没有变化......

```
214.4 : 0.0 : 214.4 : 0.0 : 264.4 : 264.4
214.4 : 0.0 : 214.4 : 0.0 : 264.4 : 264.4
214.4 : 0.0 : 214.4 : 0.0 : 264.4 : 264.4
214.4 : 0.0 : 214.4 : 0.0 : 264.4 : 264.4
214.4 : 0.0 : 214.4 : 0.0 : 264.4 : 264.4 
```

ETC。 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T01:44:28.973

您只能与主线程上的视图层次结构进行交互。您不应该调用`self.layer`全局调度队列。您只能在`dispatch_get_main_queue()`.

您将不得不重写您的日志记录以不那样循环，因为完成块也在主线程上运行，并且如果您的块正在运行，它就无法运行。

### 更新

这个问题肯定是由非主线程访问层引起的。我制作了一个带有视图子类的测试项目，`MyView`. 我给了它这个方法：

```
- (IBAction)move {
    CGRect destRect = self.frame;
    destRect.origin.x = 300 - destRect.origin.x;

    __block BOOL animationComplete = FALSE;
    [[UIApplication sharedApplication] beginIgnoringInteractionEvents];
    [UIView animateWithDuration:0.5f delay:0.0f options:UIViewAnimationCurveEaseInOut
                     animations:^{
                         [self setFrame:destRect];
                     }
                     completion:^(BOOL finished) {
                         animationComplete = YES;
                         [[UIApplication sharedApplication] endIgnoringInteractionEvents];
                     }];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, (unsigned long)NULL), ^{
        while (!animationComplete) {
            dispatch_sync(dispatch_get_main_queue(), ^{
                CALayer *layer = self.layer.presentationLayer;
                CGRect frame = [layer frame];
                CGPoint point = [layer position];
                float currentTranslation = [[layer valueForKeyPath:@"transform.translation.x"] floatValue];
                NSLog(@"%.1f : %.1f : %.1f : %.1f : %.1f : %.1f",frame.origin.x, currentTranslation, frame.origin.x, layer.bounds.origin.x, layer.position.x, point.x);
            });
        }
    });
} 
```

当这个方法运行时，我得到这样的输出：

```
2012-09-10 21:06:31.732 presentationLayerTest[1274:c07] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:06:31.735 presentationLayerTest[1274:c07] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:06:31.737 presentationLayerTest[1274:c07] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:06:31.737 presentationLayerTest[1274:c07] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:06:31.738 presentationLayerTest[1274:c07] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:06:31.739 presentationLayerTest[1274:c07] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:06:31.739 presentationLayerTest[1274:c07] 20.1 : 0.0 : 20.1 : 0.0 : 100.1 : 100.1
2012-09-10 21:06:31.740 presentationLayerTest[1274:c07] 20.1 : 0.0 : 20.1 : 0.0 : 100.1 : 100.1
2012-09-10 21:06:31.741 presentationLayerTest[1274:c07] 20.1 : 0.0 : 20.1 : 0.0 : 100.1 : 100.1
2012-09-10 21:06:31.741 presentationLayerTest[1274:c07] 20.1 : 0.0 : 20.1 : 0.0 : 100.1 : 100.1
2012-09-10 21:06:31.742 presentationLayerTest[1274:c07] 20.1 : 0.0 : 20.1 : 0.0 : 100.1 : 100.1
2012-09-10 21:06:31.743 presentationLayerTest[1274:c07] 20.1 : 0.0 : 20.1 : 0.0 : 100.1 : 100.1
2012-09-10 21:06:31.743 presentationLayerTest[1274:c07] 20.2 : 0.0 : 20.2 : 0.0 : 100.2 : 100.2
2012-09-10 21:06:31.744 presentationLayerTest[1274:c07] 20.2 : 0.0 : 20.2 : 0.0 : 100.2 : 100.2
2012-09-10 21:06:31.745 presentationLayerTest[1274:c07] 20.2 : 0.0 : 20.2 : 0.0 : 100.2 : 100.2
2012-09-10 21:06:31.745 presentationLayerTest[1274:c07] 20.2 : 0.0 : 20.2 : 0.0 : 100.2 : 100.2 
```

... 以此类推，X 值最终达到 280。

然后我注释掉了这一`dispatch_sync`行，所以图层访问和日志记录发生在全局低优先级线程上，我得到如下输出：

```
2012-09-10 21:08:20.973 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.976 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.976 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.977 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.978 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.978 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.979 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.980 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.981 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.981 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.982 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.982 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.983 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0
2012-09-10 21:08:20.984 presentationLayerTest[1296:1b03] 20.0 : 0.0 : 20.0 : 0.0 : 100.0 : 100.0 
```

... 以此类推，X 值永远不会改变。

# python - Python迭代和多维数组结构

> ID：12361553
> 
> 赞同：0
> 
> 时间：2012-09-11T01:28:16.070
> 
> 标签：python, arrays, for-loop

我正在尝试将`mxn`使用嵌套循环的数组作为变量存储在 python 脚本中，如下所示：

```
A=[ ]
for j in ListA:
   for x in ListB:
      values = some.function(label_fname, stc_fname)
      A(j)=values(x) 
```

对于每个`x`，`values`是一个`mxn`矩阵`m~=n`。`values[x]`当我在这里按or索引值时，`values(x)`我得到： `output operand requires a reduction, but reduction is not enabled`OR `can't assign to function call`。

我想要的是追加`values(x)`矩阵并存储在`A(j)`. 老实说，我不能用英语说这个，但在 matlab 行话中，我正在尝试创建一个单元数组，数组在`A{j}`哪里`mxn`。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:40:46.963

您似乎对 python 有几个问题：

1.  索引到列表时，使用`[`and `]`; 不是`(`和`)`。此外，列表的第一个元素位于索引 0。这意味着如果您有一个列表 `L = ['a', 'b', 'c', 'd'],

    *   L中'a'的索引为0
    *   L中'b'的索引是1
    *   L中'c'的索引是2
    *   L中'd'的索引是3

根据我从您的解释中了解到的情况，我建议使用以下代码。看看它是否适合你：

```
A = []
for sub_list in ListA:
    temp = []
    for x in ListB:
        values = some.function(label_fname, stc_fname)
        temp.append(values)
    A.append(temp) 
```

我真的不太确定你在问什么，但希望这是一个好的开始。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:38:39.813

You might be trying / expecting to create a [`dict()`](http://docs.python.org/library/stdtypes.html#dict) with `j` as the the key.

Or, for multidimensional arrays, `numpy` is very useful

See the dict() docs: [http://docs.python.org/library/stdtypes.html#dict](http://docs.python.org/library/stdtypes.html#dict)

Note:

```
> A(j) # this calls function A
> A[j] # this returns the list item 'j'
> A[j] = foo # this sets list item 'j' = foo 
```

# php - 适当的 .htaccess 重写模块

> ID：12361556
> 
> 赞同：1
> 
> 时间：2012-09-11T01:28:51.463
> 
> 标签：php, .htaccess

我目前正在使用 .htaccess 重写我的网址

**example.com/mixtape.php?id=(WHATEVER #)**
...到...
**example.com/m/(WHATEVER #)**

我用来完成的代码如下：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^m\/([^/\.]+)/?$ mixtape.php?mixid=$1 [L] 
```

我想要实现的下一件事，在一个干净的问题上，是重写我的

**example.com/edit-mixtape.php?id=(WHATEVER #)**
...到...
**example.com/m/(WHATEVER #)/edit**

* * *

## **编辑：** “WHATEVER #”是我正在编辑的 Mixtape 的 ID。通常我会使用“$_GET['id']”来查看我指的是什么混音带，然后我会获取与该数字相关的所有内容。

有没有人可以帮助我成功编写一个合适的重写模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:37:04.427

Based on your comment, I would change your original rule as well to allow only for numbers:

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^m/(\d+)/edit/?$ edit-mixtape.php?mixid=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^m/(\d+)/?$ mixtape.php?mixid=$1 [L] 
```

By the way, I would probably use a general rule and write both urls to the same php file and handle the action in the controller.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:37:11.387

You can use the same rules that you had before but just append an `edit` to the regular expression:

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^m\/([^/\.]+)/edit/?$ edit-mixtape.php?mixid=$1 [L] 
```

Note that your original rules have the query string `mixid=` while your examples say `id=`.

# android - 在后台使用旧活动开始活动

> ID：12361557
> 
> 赞同：1
> 
> 时间：2012-09-11T01:28:51.873
> 
> 标签：android, view, android-intent, android-activity

我正在做一个游戏，当我在这个游戏中的主要角色死亡时，或者当他杀死所有敌人时，就会启动一个新的意图，一种分数屏幕，我们称之为意图 B。

当我玩游戏时，我的游戏会填满整个屏幕，当调用意图 B 时，它也会填满整个屏幕。

问题是意图 B 是一个带有 .png 背景的 XML 视图，我认为这可以作为 .pngs 在画布上工作，就像我在“记分板”周围有一个大约 100 像素宽的框架一样，它是空的，我希望在哪里显示我的旧活动（我的游戏视图）。简而言之，我希望这个框架是透明的，并且意图 B 看起来像是放在我的游戏之上，我相信你已经在其他游戏应用程序中看到了这一点。

我如何开始新意图的一些伪代码：

```
 if(Health<=0){
       setRunningOnMainThread(false);
       Intent intent = new Intent(package.package.ScoreBoard);
       intent.startActivity();
    } 
```

我已经在清单中尝试了各种`FLAGS`和一些东西，但框架一直是黑色的。就像意图 B 背后没有任何东西一样。

很难解释这一点，所以如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:31:14.450

除了sandrstar 提出的问题之外，这是另一个可能会有所帮助的stackoverflow 问题。

[如何制作Activity，不覆盖全屏](https://stackoverflow.com/questions/6421036/how-to-make-activity-not-covering-full-screen)

# c - C 基本头部命令

> ID：12361558
> 
> 赞同：5
> 
> 时间：2012-09-11T01:28:53.467
> 
> 标签：c, linux, tail, head

我正在尝试为我的编程课从 linux 重新创建 head 和 tail 命令。我们刚开始使用 C，所以我对分配内存和指针的想法很陌生。我想知道为什么这不起作用。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc,char **argv){

    /* Checks if correct amount of arguements */

    if(argc != 2 || argc != 4){
        printf("Usage: %s head <file> \n Or: head <file> -n <number of characters>", argv[0]);
        exit(-1);
    }

    if(strcmp(argv[1], "-n" != 0)){
        char fileName[strlen(argv[1])] = argv[1];
    }
}

//Compile error on char fileName[strlen(argv[1])] = argv[1]; 
```

任何额外的见解也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:37:42.977

我认为最好写：

```
char fileName[strlen(argv[1])+1];
strcpy(fileName, argv[1]); 
```

或（如果您不想复制字符串）：

```
char* fileName = argv[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T01:32:39.140

首先，您的用法与您的参数检查不匹配。根据使用情况，您必须使用以下之一：

```
head <filename>
head <filename> -n <count> 
```

换句话说，`argv[1]`始终*是*文件名，如果有两个以上的参数，则`argv[2]`需要设置为文件名。`-n`

其次，除非您想使用 VLA（可变长度数组），否则您可能应该只设置一个指向文件名参数的指针，如下所示：

```
char *fileName = argv[1]; 
```

你根本不需要改变它（你只是将它传递给`fopen`，大概），所以尝试制作另一个副本是一种浪费。

另外，你的`if`说法是错误的`or`，应该是`and`。保证`argc`不会是 2 或不是 4，因为它不能同时是两个。

我将从以下内容开始：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static int usage (void) {
    printf ("Usage: head <file>\n");
    printf ("   or: head <file> -n <number of characters>\n");
    return -1;
}

int main (int argc,char *argv[]) {
    char *fileName;
    int lineCount;

    // Checks if correct arguments

    if ((argc != 2) && (argc != 4)) return usage();

    if ((argc == 4) && (strcmp(argv[2], "-n" != 0)) return usage();

    // Get file spec and line count

    fileName = argv[1];

    lineCount = (argc == 2) ? 10 : atoi (argv[3]); // or strtol for purists
    if (linecount < 0) lineCount = 0;

    // Now go ahead and implement the logic for head.

} 
```

# opencv - opencv - 面部识别是否用于检测非面部对象？

> ID：12361559
> 
> 赞同：4
> 
> 时间：2012-09-11T01:28:56.237
> 
> 标签：opencv

我可以（或者应该）使用面部识别软件来检测非面部吗？例如，假设我想在卧室的照片中找到一罐汽水。如果我在许多汽水罐图片上使用 haartraining 算法，那么面部识别功能会在卧室图片中找到汽水罐吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T08:14:16.097

是的你可以。这些算法基于从训练集中提取特征。如果您通过他们的面孔，则将擅长从面孔中检测特征。如果您将罐子传递给他们，他们将擅长检测罐子。

一个不同的想法是，当您通过限制搜索将算法专门用于特定对象时，但情况并非如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:02:27.100

我认为您指的是人脸*检测*而不是*人脸识别*。
一般来说，人脸检测主要用于区分人脸区域内的外观或纹理。他们还隐含地假设一个主要是平面的对象。

您可以使用相同的分类器来检测其他按外观区分的大部分扁平对象，例如眼睛和嘴巴等面部特征、书籍封面等。

汽水罐是圆柱形的，因此您可能必须对每个罐子使用多个重叠的旋转视图才能使其工作。

# ruby-on-rails - 在 Rails 2.3 中将参数传递给 301 重定向

> ID：12361573
> 
> 赞同：2
> 
> 时间：2012-09-11T01:31:05.073
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我被困在一个试图重定向一些旧 URL 的 Rails 2.3 应用程序上。我是 RoR 的新手，并且知道 3+ 的方式更好，所以我无法完成这项工作。

所以：**http://siteurl.com/foo/:foo_id**转到**http://siteurl.com/foo/:foo_id/foo_items**

我想我已经接近了，因为最终产品转到：**http** ://siteurl.com/foo/foo_id/foo_items但没有传递`:foo_id`它实际写出来的参数！

非常感谢任何帮助或指针。

在我的 routes.rb

```
map.connect '/foo/:foo_id',
      :controller => 'redirect',
      :action => :redirectoldfoo,
      :monkey_tag => ':foo_id' 
```

在我的重定向控制器中：

```
 def redirectoldfoo
    redirect_to "/auctions/#{params[:monkey_tag]}/catalog_items"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:34:05.767

你根本不需要`:monkey_tag`，因为`:foo_id`无论如何你都在使用。

```
 map.connect '/foo/:foo_id',
      :controller => 'redirect',
      :action => :redirectoldfoo

  def redirectoldfoo
    redirect_to "/auctions/#{params[:foo_id]}/catalog_items"
  end 
```

请注意，在您的示例中，您表示您试图重定向到两者`/foo/:foo_id/foo_items`，然后`/auctions/:foo_id/catalog_items`。我认为第二个更接近真实代码，所以我把那个留在了那里。

# python - 如何使用 Bottle 访问上传的文件？

> ID：12361581
> 
> 赞同：0
> 
> 时间：2012-09-11T01:32:43.477
> 
> 标签：python, wsgi, bottle

我想用瓶子上传一个文本文件，然后阅读它。我怎样才能做到这一点？以下是我尝试过但没有奏效的方法。

HTML：

```
<form action="/load_from_file" method="post">
  <div>
    Load File: <input type="file" name="file"/>
    <input type="submit" value="Submit"/>
  </div>
</form> 
```

瓶装路线：

```
@post('/load_from_file')
def load_from_file():
    list_file = request.forms.get("file")
    print request.files.get("file")
    print request.files["file"]
    return "how do I get the uploaded file?" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:49:39.120

您应该将属性添加`enctype="multipart/form-data"`到表单标签。

# java - 我不确定为什么我的班级没有返回正确的类型。数组列表 >

> ID：12361583
> 
> 赞同：1
> 
> 时间：2012-09-11T01:32:54.323
> 
> 标签：java, android

我不确定为什么我的应用程序中出现以下错误：

```
Multiple markers at this line
    - implements 
     android.os.AsyncTask<java.lang.String,java.lang.Void,java.util.ArrayList<java.util.HashMap<java.lang.String,java.lang.String>>>.doInBackground
    - This method must return a result of type ArrayList<HashMap<String,String>> 
```

当我将鼠标悬停在第 195 行的 return 语句上时，我在 Aptana 的弹出窗口中得到了正确的类型。

```
 public class getResults extends AsyncTask<String, Void, ArrayList<HashMap<String, String>> > {

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... params) {
        // TODO Auto-generated method stub

        //get names from each text box

        ArrayList<HashMap<String, String>> commonFilms = new ArrayList<HashMap<String, String>>();
        ArrayList<HashMap<String, String>> firstFilms = new ArrayList<HashMap<String, String>>();
        ArrayList<HashMap<String, String>> secondFilms = new ArrayList<HashMap<String, String>>();
        String nameOne = searchOne.getText().toString();
        String nameTwo = searchTwo.getText().toString();

        nameOne = nameOne.replace(" ", "_");
        nameTwo = nameTwo.replace(" ", "_");

        String searchOneURL = personURL + nameOne;
        String searchTwoURL = personURL + nameTwo;

        //Hashmap for ListView

        //Create JSON Parser Instanece
        JSONParser jParser = new JSONParser();

        //getting JSON string from url
        JSONObject jsonOne = jParser.getJSONFromUrl(searchOneURL);
        JSONObject jsonTwo = jParser.getJSONFromUrl(searchTwoURL);

        try {
            //Get ID of each person
            idOne = jsonOne.getJSONArray(TAG_ID);
            idTwo = jsonTwo.getJSONArray(TAG_ID);

            String firstID = null;
            String secondID = null;
            for(int i = 0; i < idOne.length(); i++){
                JSONObject iDeeOne = idOne.getJSONObject(i);

                //store each json item in variable
                firstID = iDeeOne.getString(TAG_ID);

            }

            for(int i = 0; i < idTwo.length(); i++){
                JSONObject iDeeTwo = idTwo.getJSONObject(i);

                //store each json item in variable
                secondID = iDeeTwo.getString(TAG_ID);
            }
            String creditURlBase = "http://api.themoviedb.org/3/person";

            String firstCreditURL = creditURlBase + firstID;
            String secondCreditURL = creditURlBase + secondID;

            JSONObject jSon = jParser.getJSONFromUrl(firstCreditURL);

            firstCast = jSon.getJSONArray(TAG_CAST);
            for(int i = 0; i < firstCast.length(); i++){
                JSONObject c = firstCast.getJSONObject(i);
                title = c.getString(TAG_TITLE);

                //ctreate new hashmap
                HashMap<String, String> map = new HashMap<String, String>();

                //and node to map
                map.put(TAG_TITLE, title);
                firstFilms.add(map);

            }

            secondCast = jSon.getJSONArray(TAG_CAST);
            for(int i = 0; i < secondCast.length(); i++){
                JSONObject c = firstCast.getJSONObject(i);
                title = c.getString(TAG_TITLE);

                //create hashmap
                HashMap<String, String> mapTwo = new HashMap<String, String>();

                mapTwo.put(TAG_TITLE, title);
                secondFilms.add(mapTwo);

            }

            if(firstFilms.size() > secondFilms.size()){
                for(int i = 0; i < firstFilms.size(); i++){
                    if(firstFilms.contains(secondFilms.get(i))){

                        HashMap<String, String> mapThree = new HashMap<String, String>();

                        mapThree.put(TAG_TITLE, secondFilms.get(i).toString());
                        commonFilms.add(mapThree);
                    }

                }

            }else{
                for(int i = 0; i < secondFilms.size(); i++){
                    if(secondFilms.contains(firstFilms.get(i))){
                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put(TAG_TITLE, firstFilms.get(i).toString());
                        commonFilms.add(map);
                    }
                }
            }
            return commonFilms;

            }
        catch(JSONException e){
            Log.e("Error", e.toString());
        }

        }

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.totlayout, menu);
    return true;
}
} 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:36:46.970

那是因为并非您的方法的所有可能退出点都返回一个`ArrayList`. 特别是，如果你得到一个`JSONException`：

```
 catch(JSONException e) {
        Log.e("Error", e.toString());
    } 
```

你需要一个`return` `null`或一个空的`ArrayList`. 正如@BalusC 所建议的，另一种选择是声明您的方法来抛出 a`JSONException`并删除`try/catch`块或重新抛出它：

```
 catch(JSONException e) {
        Log.e("Error", e.toString());
        throw e; // Possibly wrap it with a *domain* Exception
    } 
```

# salesforce - How to limit SOQL results to those accessible to a user

> ID：12361585
> 
> 赞同：2
> 
> 时间：2012-09-11T01:32:58.780
> 
> 标签：salesforce

I have admin API access for my organization. I'd like to run the same SOQL query, but get back results as visible to various users in my org: running "SELECT Name FROM Account" for user A, should only return account names accessible to user A.

I know this is easy if each user provides my application with their password and security token, so I can log in as them and run the query, but I want to do this only using my admin account.

this is very similar to:

[Salesforce: impersonation using the API](https://stackoverflow.com/q/10102815)

but in this case I do have access to the data, I just want to filter it as though the request came from a specific user. It looks like there's an Apex "unit testing" method called System.RunAs() which looks close, but I want to run this via REST.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:27:04.910

我认为您可以使用**`HasReadAccess`**from `UserRecordAccess`table 过滤第一个 SOQL 查询。

您可以尝试先构建一组，`RecordIDs`然后使用它来**过滤**帐户查询。

```
Set<ID> sRecordIDs = [SELECT RecordID FROM UserRecordAccess WHERE UserId = :u AND HasReadAccess = True];
Account[] accs =[SELECT ID,Name FROM Account WHERE Id in :sRecordIDs]; 
```

有关[官方文档的更多详细信息](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_userrecordaccess.htm)

# sql - Using trigger to implement UPDATE CASCADE

> ID：12361586
> 
> 赞同：1
> 
> 时间：2012-09-11T01:33:13.883
> 
> 标签：sql, oracle, triggers, cascade, updating

So I have this particular attribute (`Sportcode`) I am asked to implement update cascade by writing a trigger. this particular attribute is in the table below:

Sports

```
Sportcode       sport name                     sport event no
--------------- ------------------------------ ---------------
AR              Archery                               2 
AT              Athletics                             3 
BD              Badminton                             4 
BK              Basketball                            6 
BS              Baseball                              5 
BV              Beach Volleyball                     26 
```

How do I use a trigger to implement update cascade for `Sportcode`?

* * *

EDIT:

I'm not sure whether this is what i am supposed to do but i came up with something like this:

```
CREATE OR REPLACE TRIGGER Sportcode_Upd_Cas
  BEFORE UPDATE OF Sportcode ON sports
  FOR EACH ROW
BEGIN
  UPDATE sports
    SET Sportcode =:new.Sportcode
    WHERE Sportcode =:old.Sportcode;

  DBMS_OUTPUT.PUT_LINE('Corresponding Sportcode in the Sports table has also been updated');
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:15:55.953

如果 DISCIPLINE_CODE 是您表上的主键，那么您真的不应该更改它。请记住，主键具有三个属性：

1.  它不为空
2.  它是独一无二的，并且
3.  它永远不会改变。

#3 的原因正是您现在遇到的 - 如果您更改主键，那么整个数据库中对该行的所有现有引用也需要更改。这就是为什么不应该更改主键的原因。

Oracle 将强制执行前两个，但我遇到的没有数据库强制执行 #3。如果您要更改此表上的 DISCIPLINE_CODE，那么根据定义，它并不是真正的主键，虽然您可以编写可以做到这一点的代码，但这是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:30:29.790

假设这`DISCIPLINE`是父表并且`DISCIPLINE_CHILD`是子表：

```
CREATE OR REPLACE TRIGGER discipline_code_update
 AFTER UPDATE OF discipline_code ON discipline FOR EACH ROW
BEGIN
    UPDATE discipline_child
       SET discipline_code = :new.discipline_code
     WHERE discipline_code = :old.discipline_code;
END;
/ 
```

我包含了，`OF discipline_code`以便如果语句`discipline_code`中未包含触发器，则不会触发。`UPDATE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T01:42:56.323

根据[Oracle](http://docs.oracle.com/cd/B13789_01/appdev.101/b10795/adfns_tr.htm)手册，您可以在`UPDATE CASCADE`不向我们提供引用键的情况下执行以下操作来实现效果：

```
create table p (p1 number constraint ppk primary key); 
create table f (f1 number constraint ffk references p); 
create trigger pt after update on p for each row begin
  update f set f1 = :new.p1 where f1 = :old.p1;
end;
/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-06T00:27:26.837

除了@bob-jarvis 提到的原因之外，实现 UPDATE CASCADE 的一个陷阱是另一个原因。您必须小心多行更新。如果值可能被重用，导致一个记录的 AFTER 值与另一个记录的 BEFORE 重叠，结果是子行更新多次并迁移到不同的父行。

例子：

家长

```
1
2 
```

孩子

```
1
2 
```

运行后：

```
update parent set id = id + 1 
```

你得到：

家长

```
2
3 
```

孩子

```
3
3 
```

要么不重用键值，要么实现不在触发器中两次更新同一行的逻辑，或者更好的是，根本不使用这种方法并使用真正的 IMMUTABLE 主键。

# c# - I draw a circle and inside i draw 4 lines from the center but the lines are getting out of the circle bounds why?

> ID：12361588
> 
> 赞同：1
> 
> 时间：2012-09-11T01:34:02.417
> 
> 标签：c#

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Test
{
    public partial class Form1 : Form
    {
        int circleDiameter;

        public Form1()
        {
            InitializeComponent();

            circleDiameter = 100;
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {
            Point CenterPoint = new Point()
            {
                X = this.ClientRectangle.Width / 2,
                Y = this.ClientRectangle.Height / 2
            };
            Point topLeft = new Point()
            {
                X = (this.ClientRectangle.Width - circleDiameter) / 2,
                Y = (this.ClientRectangle.Height - circleDiameter) / 2
            };
            Point topRight = new Point()
            {
                X = (this.ClientRectangle.Width + circleDiameter) / 2,
                Y = (this.ClientRectangle.Height - circleDiameter) / 2
            };
            Point bottomLeft = new Point()
            {
                X = (this.ClientRectangle.Width - circleDiameter) / 2,
                Y = (this.ClientRectangle.Height + circleDiameter) / 2
            };
            Point bottomRight = new Point()
            {
                X = (this.ClientRectangle.Width + circleDiameter) / 2,
                Y = (this.ClientRectangle.Height + circleDiameter) / 2
            };

            e.Graphics.DrawEllipse(Pens.Red,topLeft.X, topLeft.Y, circleDiameter, circleDiameter);
            e.Graphics.DrawLine(Pens.Red, CenterPoint, topLeft);
            e.Graphics.DrawLine(Pens.Red, CenterPoint, topRight);
            e.Graphics.DrawLine(Pens.Red, CenterPoint, bottomLeft);
            e.Graphics.DrawLine(Pens.Red, CenterPoint, bottomRight); 
        }
    }
} 
```

The result is a circle in the center of the Form and inside an X but the X is getting out of the circle bounds and i want the X inside the topLeft topRight bottomLeft bottomRight to get exactly to the circle bounds. How can i repair it ?

Before it was e.Graphics.DrawEllipse it was e.Graphics.DrawRectangle and it was ok but once i changed it to DrawEllipse the X inside is getting out of the circle bounds borders.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:07:39.417

自从我这样做以来已经有一段时间了。您可以使用 Cos 和 Sin 计算圆上的点，如下所示：

```
 private Point GetPointOnCircle(Point centre, double angle, double diameter)
    {
        return new Point((int)(Math.Cos(angle) * diameter) + centre.X, (int)(Math.Sin(angle) * diameter) + centre.Y);
    } 
```

我不记得 cos 是 x 还是 y 但这并不重要，它只会改变你认为是圆上 0 度的点。无论如何，因为您的角度始终为 45 度，并且 cos(45) 和 sin(45) 相同，您只需将距离乘以 0.70710678118654752440084436210485 或有人说的 1/sqrt(2)

例如

```
 Point topRight = new Point()
        {
            X = (this.ClientRectangle.Width + (int)(circleDiameter * 0.70710678118654752440084436210485)) / 2,
            Y = (this.ClientRectangle.Height - (int)(circleDiameter * 0.70710678118654752440084436210485)) / 2
        }; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-10-14T10:58:41.173

如果我们像这样将圆直径减小到 excat 值`circleDiameter = 68`，它将正常工作并进入圆

```
int circleDiameter;

public form()
{
  InitializeComponent();

  circleDiameter = 68;
} 
```

# php - 字符串到数组，由单引号和双引号分隔，忽略转义引号

> ID：12361589
> 
> 赞同：0
> 
> 时间：2012-09-11T01:34:19.577
> 
> 标签：php, regex, preg-split

[我有另一个与我上一个问题](https://stackoverflow.com/questions/12353518/string-to-array-split-by-single-and-double-quotes)`preg_split`非常相似的php问题，尽管我担心解决方案会更加复杂。和以前一样，我正在尝试使用 php 将字符串拆分为数组组件，使用 " 或 ' 作为分隔符。但是除此之外，我想忽略字符串中的转义单引号（字符串中的转义双引号将不会发生，因此无需担心）。我上一个问题中的所有示例仍然有效，但此外还应该获得以下两个期望的结果：

```
$pattern = "?????";
$str = "the 'cat\'s dad sat on' the mat then \"fell 'sideways' off\" the mat";
$res = preg_split($pattern, $str, null, PREG_SPLIT_DELIM_CAPTURE);
print_r($res);
/*output:
Array
(
    [0] => the 
    [1] => 'cat\'s dad sat on'
    [2] =>  the mat then
    [3] => "fell 'sideways' off"
    [4] =>  the mat
)*/

$str = "the \"cat\'s dad\" sat on 'the \"cat\'s\" own' mat";
$res = preg_split($pattern, $str, null, PREG_SPLIT_DELIM_CAPTURE);
print_r($res);
/*output:
Array
(
    [0] => the 
    [1] => "cat\'s dad" 
    [2] =>  sat on
    [3] => 'the "cat\'s" own'
    [4] =>  mat
)*/ 
```

如果没有转义引号，@mcrumley 对我上一个问题的回答效果很好：

```
$pattern = "/('[^']*'|\"[^\"]*\")/U"; 
```

但是，一旦给出转义的单引号，正则表达式就会将其用作匹配的结尾，这不是我想要的。

我尝试过这样的事情：

```
$pattern = "/('(?<=(?!\\').*)'|\"(?<=(?!\\').*)\")/"; 
```

但它不工作。不幸的是，我对环视的知识还不够好。

**经过一番阅读和摆弄......**

这似乎更接近：

```
$pattern = "/('(?:(?!\\').*)')|(\"(?:(?!\\'|').*)\")/"; 
```

但是贪心程度是错误的，不会产生上述输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:58:35.553

试试这个：

```
$pattern = "/(?<!\\\\)('(?:\\\\'|[^'])*'|\"(?:\\\\\"|[^\"])*\")/";
             ^^^^^^^^^  ^^^^^^^^^    ^     ^^^^^^^^^^     ^ 
```

[在http://rubular.com/r/Eps2mx8KCw](http://rubular.com/r/Eps2mx8KCw)进行演示。

您还可以使用反向引用将其折叠成统一的表达式：

```
$pattern = "/(?<!\\\\)((['\"])(?:\\\\\\2|(?!\\2).)*\\2)/"; 
```

[在http://rubular.com/r/NLZKyr9xLk](http://rubular.com/r/NLZKyr9xLk)进行演示。

如果您还希望在文本中识别转义的反斜杠，这些都不起作用，但我怀疑这是您需要考虑的情况。

# haskell - How to get directory of executable in Haskell?

> ID：12361594
> 
> 赞同：6
> 
> 时间：2012-09-11T01:36:19.327
> 
> 标签：haskell, io, readfile, working-directory

I have a program that reads and writes a text file that exists in the same directory as the executable. To access that file, I call `readFile "./file.txt"`

This works when I run the executable from within the directory where it lives. However if i `cd` to another directory and run the executable (it's on my path), Haskell tries to get the `file.txt` from the working directory in my terminal. How do I make Haskell access the `file.txt` from the location of the executable and not my working directory. I don't want to hardcode an absolute path because I want the executable to be somewhat portable.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T01:42:47.317

正确的方法是`file.txt`在文件的`data-files`字段中列出`.cabal`并用于`getDataFileName`检索它。有关前缀独立性，请参阅[cabal 文档](http://www.haskell.org/cabal/users-guide/installing-packages.html#prefix-independence)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T03:39:58.923

该功能`getExecutablePath`可以满足您的要求。不幸的是，它只被添加到`System.Environment`刚刚发布的 GHC 7.6.1 中，~~还没有被整合到 Haskell 平台~~中。

编辑：具有此功能的较新的 Haskell 平台已经发布。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-11T01:47:00.207

为什么不将您的文件存储在官方应用程序目录中？那么当前目录是什么都没有关系。（请参阅 [getAppUserDataDirectory](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/directory-1.0.1.1/System-Directory.html#v%3AgetAppUserDataDirectory)。）

[System.Directory](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/directory-1.0.1.1/System-Directory.html)中还有其他有用的目录和方便的文件系统实用程序。它是跨平台的，因为它知道根据您的操作系统应该去哪里。

推理：
如果您将工作数据与可执行文件存储在同一目录中，则只有在该目录中具有写入权限的人才能正确运行您的程序。只有超级用户可以写入类似的目录，`/usr/local/bin`并且只有管理员可以写入`C:\Program Files\`. 使用用户应用程序目录，任何人都可以运行应用程序，因为应用程序数据目录是特定于用户的并且可由他们写入，因此这是一种好的做法。

就我个人而言，我不喜欢应用程序将我的主要用户区域与配置数据混淆，但*确实*希望应用程序因此建议我的用户区域作为第一个猜测来保存我自己的一些内容（[getHomeDirectory](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/directory-1.0.1.1/System-Directory.html#v%3AgetHomeDirectory)）。我建议了用户应用程序数据目录，因为您建议了可执行文件的目录，所以它听起来像配置数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-14T12:48:02.190

```
#!/usr/bin/env stack
{- stack
   script
   --nix
   --nix-packages zlib
   --resolver lts-14.17
   --package turtle
   --package protolude
   --package directory
-}

{-# LANGUAGE NoImplicitPrelude #-}
{-# LANGUAGE OverloadedStrings #-}
{-# LANGUAGE CPP #-}

module Playground where

import Protolude hiding (find)
import Turtle
import System.Directory
import Data.String

main :: IO ()
main = do
  let thisScriptAbsFilePath :: String = __FILE__
  let thisScriptAbsFilePath' :: Turtle.FilePath = decodeString thisScriptAbsFilePath
  let projectRoot :: Turtle.FilePath = directory thisScriptAbsFilePath'
  print projectRoot
  return () 
```

# javafx-2 - JavaFX FXML communication between Application and Controller classes

> ID：12361600
> 
> 赞同：1
> 
> 时间：2012-09-11T01:37:14.037
> 
> 标签：javafx-2, processbuilder, fxml

I am trying to get and destroy an external process I've created via ProcessBuilder in my FXML application close, but it's not working. This is based on the helpful advice [Sergey Grinev gave me here](https://stackoverflow.com/a/12322123/492404).

I have tried running with/without the "// myController.setApp(this);" and with "// super.stop();" at top of subclass and at bottom (see commented out/in for that line in MyApp), but no combination works.

This probably isn't related to FXML or JavaFX, though I imagine this is a common pattern for developing apps on JavaFX. I suppose I'm asking for a Java best practice for closing dependent processes in a UI-based app like this one (in this case: FXML / JavaFX based), where there is a controller class and an application class.

Can you explain what I'm doing wrong? Or better: advise what I *should* be doing instead? Thanks.

In my Application I do this:

```
public class MyApp extends Application {

    @Override
    public void start(Stage primaryStage) throws Exception {
        FXMLLoader fxmlLoader = new FXMLLoader();
        Scene scene = (Scene)FXMLLoader.load(getClass().getResource("MyApp.fxml"));
        MyAppController myController = (MyAppController)fxmlLoader.getController();

        primaryStage.setScene(scene);
        primaryStage.show();

//        myController.setApp(this);
    }

    @Override
    public void stop() throws Exception {
//      super.stop();

      // this is called on fx app close, you may call it in an action handler too
      if (MyAppController.getScriptProcess() != null) {
        MyAppController.getScriptProcess().destroy();
      }
      super.stop();
    }
    public static void main(String[] args) {
        launch(args);
    }
} 
```

In my Controller I do this:

```
public class MyAppController implements Initializable {

  private Application app;
  private static Process scriptProcess;

  public void setApp(Application a) {
    app = a;
  }

  public static Process getScriptProcess() {
    return scriptProcess;
  }
} 
```

The result when I run with the "commented-out setApp()" *not* commented out (that is, left in the start method), is the following, immediately upon launch (the main Scene flashes, then disappears, then this dialog appears:

```
"JavaFX Launcher Error:
Exception while running Application" 
```

And it gives an, "Exception in Application start method" in the console as well.

The result when I leave out the "commented-out code" in my MyApp above (that is, remove the "setApp()" from the start method), is that my app *does* indeed close, but gives this error when it closes:

```
Exception in thread "JavaFX Application Thread" java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1440)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:28)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Node.fireEvent(Node.java:6863)
    at javafx.scene.control.Button.fire(Button.java:179)
    at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:193)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:336)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:329)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:64)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3324)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3164)
    at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3119)
    at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1559)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2261)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:228)
    at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
    at com.sun.glass.ui.View.notifyMouse(View.java:922)
    at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
    at com.sun.glass.ui.gtk.GtkApplication$3$1.run(GtkApplication.java:82)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1435)
    ... 44 more
Caused by: java.lang.NullPointerException
    at mypackage.MyController.handleCancel(MyController.java:300)
    ... 49 more
Clean up... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T09:36:51.063

The approach is right, but there are few problems.

You've created the `FXMLLoader` named `fxmlLoader` but then you call `FXMLLoader.load()` which is static method and is not connected with instance you've created before.

Also using static method to intercommunication is not very good (imagine you'll want to have several processes). Better store `myController` to a field and call it in the `stop()` method.

Even better would be to add corresponding utility method to Controller and call it from main app, because main app doesn't seem to use `Process` itself.

* * *

Here goes short app to demonstrate all described:

```
public class DoTextAreaLog extends Application {

    private LoggController controller;

    @Override
    public void start(Stage stage) throws IOException{
            FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("logg.fxml"));
            VBox root = (VBox)fxmlLoader.load();
            controller = (LoggController) fxmlLoader.getController();

            stage.setScene(new Scene(root, 400, 300));
            stage.show();
    }

    @Override
    public void stop() throws Exception {
        super.stop();
        controller.destroy();
    }

    public static void main(String[] args) { launch(); }
} 
```

Controller:

```
public class LoggController implements Initializable {

    @FXML private TextArea textarea;

    @FXML private void onAction(ActionEvent event) {
        destroy();
    }

    private Process p;

    public void destroy() {
        if (p != null) {
            p.destroy();
        }
    }

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        try {
            p = new ProcessBuilder("ping", "stackoverflow.com", "-n", "100").start();

            new Thread(new Runnable() {
                @Override
                public void run() {
                    try {
                        try (BufferedReader bri = new BufferedReader(new InputStreamReader(p.getInputStream()))) {
                            String line;

                            while ((line = bri.readLine()) != null) {
                                log(line);
                            }
                        }
                    } catch (IOException ex) {
                        ex.printStackTrace();
                    }
                }
            }).start();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    private void log(final String st) {
        Platform.runLater(new Runnable() {
            @Override
            public void run() {
                textarea.setText(st + "\n" + textarea.getText());
            }
        });
    }
} 
```

logg.fxml:

```
<VBox id="root" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml"  fx:controller="fxml.LoggController">
    <TextArea fx:id="textarea"/>
    <Button text="Stop The Madness!" onAction="#onAction"/>
</VBox> 
```

# java - 访问 JPA 实体中的父实体

> ID：12361609
> 
> 赞同：2
> 
> 时间：2012-09-11T01:38:22.353
> 
> 标签：java, jpa, struts2

我正在使用 JPA 1、Struts2.3.1、Google-App-Enging 1.7.0

在我的漫画中，我有以下带有 getter 和 setter 的属性：

```
@ManyToOne(fetch=FetchType.LAZY, targetEntity=User.class)
private User user = null; 
```

我的 JPA 查询方法：

```
public Comics readComics(int random, String url){
    EntityManager em = EMF.get().createEntityManager();
    Comics comics = null;

    try{
        Query q = em.createNamedQuery("Comics.getComics");
        q.setParameter("random", random);
        q.setParameter("url", url);
        comics = (Comics) q.getSingleResult();

    } catch(NoResultException ex){
        System.out.println("ERROR CATCHED: " + ex.getMessage());
        comics = null;
    } finally{
        em.close();
    }

    return comics;
} 
```

在我看来，我有：

```
<s:property value="comics.user.userName"/> 
```

`userName`在这种情况下无法访问，但是当实体管理器未关闭时`userName`会显示。

什么是正确的？可以去掉`em.close()`吗？

========================

**使用`BeanUtils.copyProperties`** 我还尝试了以下代码：

```
Comics emComics = (Comics) q.getSingleResult();
BeanUtils.copyProperties(comics, emComics);
BeanUtils.copyProperties(comics.getUser(), emComics.getUser()); 
```

是正确的使用方法`copyProperties`吗？删除`BeanUtils.copyProperties(comics.getUser(), emComics.getUser());`将再次不显示`user`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:11:59.590

删除 em.close() 是不行的 - 如果你这样做，你最终会出现连接泄漏。池中的所有连接都用完后，应用程序将停止工作。

简单的修复是确保在调用 em.close() 之前初始化 jsp 所需的一切。

如果您使用 hibernate 作为提供程序，那么您可以使用 Hibernate.initialize()

```
public Comics readComics(int random, String url){
    EntityManager em = EMF.get().createEntityManager();
    Comics comics = null;
   try{
        Query q = em.createNamedQuery("Comics.getComics");
        q.setParameter("random", random);
        q.setParameter("url", url);
        comics = (Comics) q.getSingleResult();

        Hibernate.initialize(comics.getUser());

    } catch(NoResultException ex){
        System.out.println("ERROR CATCHED: " + ex.getMessage());
        comics = null;
    } finally{
        em.close();
    }

    return comics;
} 
```

如果您使用的是其他提供程序，您可以寻找等效方法或编写自己的函数，该函数仅获取对象的一个​​属性以触发代理的初始化。

另一种选择是在获取漫画时使用连接获取来修改查询以获取用户关联。

正确的解决方案是使用 Spring 或 EJB，它们提供了轻松处理实体管理器的解决方案。您为每个查询打开一个新 entityManager 的方法不是最佳的 - 理想情况下，它应该是每个事务或整个请求的一个 entityManager。阅读有关延迟初始化异常、OpenSessionInViewFilter 等的信息。

# python - 在 Elastic Beanstalk 上部署 Python，针对不同的环境使用不同的配置

> ID：12361613
> 
> 赞同：12
> 
> 时间：2012-09-11T01:38:57.327
> 
> 标签：python, amazon-web-services, amazon-elastic-beanstalk

AWS 没有正确解释如何在 beantalk 上管理与不同环境相关的不同部署环境，以及如何将这些设置保存在源代码控制存储库中。

他们清楚地解释了如何在 .ebextensions 中设置您的 python.config，如下所示：

```
"aws:elasticbeanstalk:container:python:environment":
  DJANGO_SETTINGS_MODULE: "settings"
  SERVER_ROOT: "/opt/python/current/app/" 
```

但是，如果您想拥有多个环境，例如 staging 和 prod，您目前必须更换配置文件。更糟糕的是，您打算如何将其保留在源代码控制树中，以用于暂存等共享环境？看来每次推送都会需要这些配置环境设置。

我还发现 AWS 不允许我部署未分阶段的更改，这意味着编写脚本来处理我的部署也不是一种选择。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T21:25:44.547

我过去对此进行了一些研究，似乎他们喜欢你用来`eb branch`配置不同的环境，然后在 eb 客户端级别的本地选项设置中以不同的方式配置选项（当你初始化分支和东西时）。

当您考虑它时，环境配置（即`DJANGO_SETTINGS_MODULE`）应该与应用程序代码分开管理，所以我假设将其保留在 ebextensions 之外，并在我导航到新环境时进行设置。如果我切换到现有的，需要确保为我想玩的环境正确设置了该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T01:31:38.620

没试过，不过好像`DJANGO_SETTINGS_MODULE`不能通过配置文件传递，而是通过容器自己的参数传递。您可以通过 Beanstalk 控制台的 Environment Details -> Edit Configuration -> Container 部分对其进行更新。就像想法一样：

*   创建多个环境“生产”、“暂存”等
*   用相关`DJANGO_SETTINGS_MODULE`值配置每个
*   删除 DJANGO_SETTINGS_MODULE 值`.ebextensions`
*   将应用程序部署到预先创建的环境

# mysql - SQL - 没有排序的顶级结果的子查询

> ID：12361614
> 
> 赞同：0
> 
> 时间：2012-09-11T01:39:06.693
> 
> 标签：mysql, sql, subquery

（对不起标题，想不出怎么解释）

所以我有一个Olympic 数据库，基本布局是有一个包含competitornum、givenname 和familyname 的竞争者表（其他列不是必需的）还有一个包含竞争者数字和位置（1 到8 之间）的结果表。

我正在尝试获取名字和姓氏以及金牌、银牌和铜牌的总数（位置 = 1、2 或 3）

**它还需要只显示奖牌数量最多的结果，所有这些都不需要使用 Order By 子句......**

我之前问过这个问题，但意识到我忘了说一些事情，但是在添加粗体部分之前的上一个答案是：

```
SELECT c.Givenname, c.Familyname, COUNT(r.places) AS TotalPlaces
FROM Competitors c INNER JOIN Results r
    ON r.Competitornum = c.Competitornum
WHERE r.place IN (1,2,3)
GROUP BY c.Givenname, c.Familyname 
```

我认为它需要另一个子查询，例如

```
AND TotalPlaces = (SELECT MAX(TotalPlaces)) 
```

但是我不确定如何在子查询上方使用别名时在子查询中使用它...

感谢所有帮助，谢谢！

编辑：关于我的作业的官方问题（我不知道答案，我真的试过了，这就是我在这里的原因）：

哪些参赛者获得的奖牌数量最多（金、银、铜加起来）？列出他们的名字和姓氏以及他们的奖牌总数（仅）。

警告：您的解决方案不能假定竞争对手名称总是不同 **的。不要在此查询的任何部分使用 ORDER BY 子句。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T01:51:35.487

为此，您需要有另一个子查询，

```
SELECT c.Givenname, c.Familyname, COUNT(r.places) AS TotalPlaces
FROM Competitors c 
INNER JOIN Results r ON r.Competitornum = c.Competitornum
WHERE r.place IN (1,2,3)
GROUP BY c.Givenname, c.Familyname
HAVING COUNT(r.places) = 
            (
                SELECT MAX(TotalPlaces)
                FROM
                (
                    SELECT COUNT(g.places) AS TotalPlaces
                    FROM Competitors f 
                    INNER JOIN Results g ON f.Competitornum = g.Competitornum
                    WHERE g.place IN (1,2,3)
                    GROUP BY f.Givenname, f.Familyname
                )
            ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:01:22.753

最终答案（感谢 John Woo 和 lc。）为将来遇到此问题的任何人粘贴此内容：

```
SELECT c.Givenname, c.Familyname, COUNT(r.place) AS TotalPlaces
FROM Competitors c 
INNER JOIN Results r ON r.Competitornum = c.Competitornum
WHERE r.place IN (1,2,3)
GROUP BY c.competitornum, c.Givenname, c.Familyname
HAVING COUNT(r.place) = 
            (
                SELECT MAX(TotalPlaces)
                FROM
                (
                    SELECT COUNT(r.place) AS TotalPlaces
                    FROM Competitors c 
                    INNER JOIN Results r ON r.Competitornum = c.Competitornum
                    WHERE r.place IN (1,2,3)
                    GROUP BY c.competitornum, c.Givenname, c.Familyname
                )
            ) 
```

# javascript - 使用javascript向第一个孩子添加类

> ID：12361616
> 
> 赞同：6
> 
> 时间：2012-09-11T01:39:49.587
> 
> 标签：javascript

这条链不起作用有什么原因吗？它不添加类：

```
document.getElementsByTagName('nav')[0].firstChild.className = "current" 
```

它应该返回 nav 元素的第一个子元素，`<a>`它不会发生。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:46:31.767

那是因为您在和之间有[**文本节点**](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)。您可以通过以下方式过滤它们：`nav``a`[`nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)

```
var childNodes = document.getElementsByTagName('nav')[0].childNodes;
for (var i = 0; i < childNodes.length; i++) {
    if (childNodes[i].nodeType !== 3) { // nodeType 3 is a text node
      childNodes[i].className = "current";  // <a>
      break;
    }        
} 
```

这可能看起来很奇怪，但是，例如，如果您有以下标记：

```
<nav>
<a>afsa</a>
</nav> 
```

这是一个**[演示](http://jsfiddle.net/ccbEP/)**。

为什么会这样？因为*某些*`<nav>`浏览器可能会将和之间的空间解释`<a>`为*额外的*文本节点。因此，`firstChild`将不再工作，因为它将返回文本节点。

如果您有以下标记，它会**[起作用](http://jsfiddle.net/nMbP4/)**：

```
<nav><a>afsa</a></nav> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T06:21:16.303

该声明：

```
document.getElementsByTagName('nav')[0].firstChild.className = "current" 
```

有点脆弱，因为假定的文档结构中的任何更改都会破坏您的代码。所以更健壮的做类似的事情：

```
var links, 
    navs = document.getElementsByTagName('nav');

if (navs) links = nav[0].getElementsByTagName('a');

if (links) links[0].className = links[0].className + ' ' + 'current'; 
```

您还应该有健壮的 addClassName 和 removeClassName 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T01:41:09.323

Jquery 可以使这变得非常简单：

```
$("#nav:first-child").addClass("current"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-14T06:03:44.333

您可以简单地 document.querySelectorAll 来选择列表。使用“firstElementChild”获取第一个子节点并添加类。

```
 const firstChild = document.querySelectorAll('nav').firstElementChild;
 firstChild.classList.add('current'); 
```

# jquery - 如何将 Item.Id 附加到 JQuery.Modal Dialog MVC 3

> ID：12361621
> 
> 赞同：0
> 
> 时间：2012-09-11T01:40:48.420
> 
> 标签：jquery, asp.net-mvc-3, modal-dialog

我正在使用[Matt Hidinger](http://www.matthidinger.com/archive/2011/02/22/Progressive-enhancement-tutorial-with-ASP-NET-MVC-3-and-jQuery.aspx)的示例来使用 Jquery 创建模态表单。

我尝试了类似的东西

```
//Javascript click event
$("#Edit").click(function () {
        var grid = jQuery('#Tareas');
        var selId = grid.jqGrid('getGridParam', 'selrow');
        var myCellData = grid.jqGrid('getCell', selId, 'TareaId');
        if(myCellData=="") {
            alert("Select Task to Edit");
        } else {
        location.href = '/Task/Edit/'+myCellData;
            }
    });

<button id="Edit" class="openDialog" data-dialog-id="editDialog" data-dialog-Title="Edit" title="editDialog" style="border: 1; background: transparent">
    <img src="@Url.Content("~/Content/Detail.png")" />
</button> 
```

但我无法捕获点击事件。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:59:01.847

你在引用`#Edit`. 这意味着 JQuery 正在通过 DOM 查找具有`ID`Edit**的**对象。它找不到它，因为您没有将`ID`您的设置`ActionLink`为“编辑”。

试试这个：

```
@Html.ActionLink("Edit", "Edit", "MyThing", new { id = item.Id }, 
    new { @class = "openDialog", data_dialog_id = "editDialog", 
        data_dialog_title = "Edit", @id = "Edit" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T01:15:26.823

因为不仅需要发送行的id，还需要显示基于用户配置文件的编辑，所以我决定实现一个动作列。

```
$.ActionsFormatter = function(cellvalue, options, rowObject) {
// column 10 contains true or false from de user profile action
// column 1 contains the item.id
var c = rowObject[10];
if(c) {
     var src = '@Url.Content("~/Content/")' + 'Edit_16.png';
     return "<a class='openDialog' data-dialog-id='editDialog' data-dialog-Title='Edit Task' title='editDialog' href ='@Url.Action("Edit")'"+rowObject[1]+"><img title='edit' src='" + src + "' alt='edit' title='edit' /> </a>";
     } 
     else {
           return "";
     }
    }; 
```

# c++ - 在运行程序之前加载/注册 DLL

> ID：12361625
> 
> 赞同：0
> 
> 时间：2012-09-11T01:41:23.647
> 
> 标签：c++, c

我有一个存在于某个位置的 DLL。我创建了另一个依赖于这个 DLL 的应用程序。如何在运行时引用 DLL？如果我将 DLL 保存在与 exe 相同的目录中，它就可以工作。但是，这不是我的情况。我尝试使用 regsvr32.exe 在注册表中加载和注册库。但是当我这样做然后运行 ​​exe 时，它​​不会启动它。

如果你能给我一些选择，那就太好了。还有为什么 regsvr32.exe 在这种情况下不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:10:28.453

Regsvr32.exe 仅适用于特定类型的 DLL，即进程内 COM 服务器。如果它抱怨找不到 DllRegisterServer 入口点，那么它就不是这样的 DLL。

共享 DLL 在上个世纪是有意义的，当时一台机器有 16 兆字节的 RAM，整个操作系统和 Windows 7 的“去钓鱼”壁纸位图一样大。这些天你不遗余力地*防止*共享 DLL。因此，您将逃离可怕的[DLL 地狱](http://en.wikipedia.org/wiki/DLL_Hell)。特别是 COM 服务器的问题。

但是你可以，你必须[将目录添加](http://support.microsoft.com/kb/310519)到 PATH 环境变量中。应用程序也可以通过调用 SetDllDirectory() 来实现。假设它知道 DLL 的位置，这并不典型。

最好的方法就是不要这样做。只需复制 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:12:17.237

查找 DLL 的规则可在此处找到：

[http://msdn.microsoft.com/en-us/library/7d83bc18(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/7d83bc18(v=vs.80).aspx)

请注意，您可以将相关目录添加到`PATH`环境变量中。

如果您有一个始终可以找到您的文件的特定位置（或可从您的应用程序配置），您可以在调用`LoadLibrary`.

# iphone - UISearchBar 在 UIKeyboard 上的搜索按钮处于活动状态之前输入 2 个字符

> ID：12361626
> 
> 赞同：3
> 
> 时间：2012-09-11T01:41:27.517
> 
> 标签：iphone, ios, uisearchbar, uikeyboard

我使用的是 UISearchBar，搜索栏我使用的是默认的 UIKeyboard。当用户在输入一个字符后立即使用键盘键入时，搜索按钮将显示为活动状态。

我想知道是否有办法使搜索按钮在输入两个字符之前不会变为活动状态？

我在这里遇到的主要问题是我不知道如何访问 UIKeyboard 的这个功能，我希望有人可以指点我参考或向我展示一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:25:29.597

您不能禁用该按钮，但如果您实现了搜索栏的委托，则可以覆盖该`searchBarSearchButtonClicked:`方法，并停止搜索栏按钮搜索特定范围的字符。

在这里查看答案：

[https://stackoverflow.com/a/9722139/951830](https://stackoverflow.com/a/9722139/951830)

# phpexcel - 带绘图的PHPExcel导出xlsx在宽度和高度上有错误

> ID：12361627
> 
> 赞同：2
> 
> 时间：2012-09-11T01:41:35.110
> 
> 标签：phpexcel

我目前正在处理一个需要将数据导出到 Excel 并在其中绘图的项目。我在 Window XP SP3 上使用 PHPExcel 1.7.7 和 PHP 5.3.8

导出到 xlsx 后，文件内容在普通视图中看起来很好，但是当我打印预览时，绘图的宽度和高度发生了变化

这是我使用的代码片段：

```
 $file_path = dirname(__FILE__) . '\template.xlsx';
    $objReader = new PHPExcel_Reader_Excel2007();
    $objPHPExcel = $objReader->load($file_path);

    $objPHPExcel->setActiveSheetIndex(0);

    $objDrawing = new PHPExcel_Worksheet_Drawing();

    $objDrawing->setPath('C:/Documents and Settings/All Users/Documents/My Pictures/Sample Pictures/Sunset.jpg');
    $objDrawing->setWidthAndHeight(360, 252);
    $objDrawing->setCoordinates('B3');
    $objDrawing->setWorksheet($objPHPExcel->getActiveSheet());

    $objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
    $objWriter->save('C:/test.xlsx'); 
```

模板文件：[http ://www.mediafire.com/view/?cq24o5ma20kesgf](http://www.mediafire.com/view/?cq24o5ma20kesgf)

结果文件：[http ://www.mediafire.com/view/?x8c50bpdteywx20](http://www.mediafire.com/view/?x8c50bpdteywx20)

注意：在正常模式视图中，绘图完全适合我制作的边框，但在打印预览模式下，绘图已被缩放，如果您转到绘图的大小和属性，请在属性选项卡中更改对象定位选项, 绘图将在打印预览模式下正常显示

# java - 根据构造函数中的函数调用确定对象的资格

> ID：12361629
> 
> 赞同：1
> 
> 时间：2012-09-11T01:41:36.560
> 
> 标签：java, garbage-collection

就 Java（任何版本）中的垃圾收集而言，这两个代码块是否等同于它们何时符合条件：

```
public class Foo  
{  

    public Foo()  
    {  
        go();   
    }  

   public List go()  
    {  
       List things = new List();  
        things.add(42);  
        things.add(new Object());
        return things;
    }  
} 
```

以及以下内容：

```
public class Foo  
    {   
        public Foo()  
        {     
        }  

        public List go()  
        {  
           List things = new List();  
            things.add(42);  
            things.add(new Object());
            return things;
        }  
    } 
```

我的问题如下：

从构造函数调用的函数是否会导致垃圾收集器忽略该函数范围内的任何对象（如果它们是从构造函数调用的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:50:32.663

在你的第一个类中， go() 是从构造函数中调用的。直到调用 go() 代码行之前，该对象不存在任何东西，只有一个由对象实例化的变量指向的内存空间。在调用 go() 时，会在内存中创建一个新列表，添加内容并返回该列表。除非返回的列表被保存到某处的变量中，否则它就是垃圾。该方法仍然作为对象的实例方法，但返回的列表对象现在消失了。您的第二个示例与第一个示例执行相同的操作，只是构造函数没有调用 go() 方法。该方法仍然作为对象的实例方法存在，但从未创建列表对象。因此，一旦第一个示例退出 go() 方法，第一个示例与第二个示例在创建时处于相同的静止状态。两者都准备好使用自己的方法创建和返回列表，但尚未分配列表或内存。当第一个示例中的列表实际被收集时，由垃圾收集器决定，但它已被标记为垃圾（除非保存到示例中未显示的代码中某处的变量中）。

# php - SQL语句切换值而不插入数据库

> ID：12361630
> 
> 赞同：0
> 
> 时间：2012-09-11T01:41:38.093
> 
> 标签：php, mysql, sql

我从 ajax 调用运行这个 php 脚本：

```
<?php

    require_once('myConnectDB.inc.php');

    //add beer to database code
    $uID = $_GET['uID'];
    $uName = $_GET['uName'];
    $fID = $_GET['fID'];
    $fName = $_GET['fName'];

    //data from ajax call: "uID="+reqID+"&uName="+reqName+"&fName="+frID+"&fID="+frName,

    //add above data to database
    $db = new myConnectDB();
    error_log("Successfully created DB");                       

    error_log("uid" . $uID);    
    error_log("uName" . $uName);    
    error_log("fID" . $fID);    
    error_log("fName" . $fName);    

    $query3 = "INSERT INTO friends (userID,userName, friendID, friendName, friend) VALUES ($uID, '$uName' ,  $fID , '$fName' , 1 )";
    $result = $db->query($query3);

    error_log("Ran query [$query3] and got result: " . print_r($result, true));

    ?> 
```

我插入了 error_log 试图找出为什么我的查询没有插入到我的数据库中。这是我的日志的输出：

```
[10-Sep-2012 20:36:54] Successfully created DB
[10-Sep-2012 20:36:54] uid6
[10-Sep-2012 20:36:54] uNametest
[10-Sep-2012 20:36:54] fIDmike
[10-Sep-2012 20:36:54] fName3
[10-Sep-2012 20:36:54] Ran query [INSERT INTO friends (userID,userName, friendID, friendName, friend) VALUES (6, 'test' ,  mike , '3' , 1 )] and got result: 
```

在查看错误日志时，我在这里发现奇怪的是，似乎在我的 php 中的某个地方它切换了 oof fname 和 fID 的值，应该交换这些值。

这是搞砸了还是我看得太明显了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:44:33.420

查看您的 AJAX 调用：

```
"uID="+reqID+"&uName="+reqName+"&fName="+frID+"&fID="+frName, 
```

这确实看起来好像`fID`会携带`frName`，同时`fname`会携带`frID`！

附带说明：您肯定会欣赏，`fName`类似于

```
',1); DROP TABLE friends; -- 
```

会很有趣吗？

# ruby-on-rails - 从辅助方法渲染部分

> ID：12361631
> 
> 赞同：16
> 
> 时间：2012-09-11T01:41:48.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

是否可以使用辅助方法渲染局部变量，您还可以从调用辅助方法的视图中传递局部变量？例如，当我直接在视图中包含此代码时，它会正确呈现部分：

```
 <%= render :partial => "add_round", :locals => { :f => f } %> 
```

然后我把它移到一个辅助方法：

```
def addRound
  render :partial => "add_round", :locals => { :f => f }
end 
```

然后我再次从视图中调用它：

```
 <%= addRound %> 
```

这不适用于代码中包含的 :locals => { :f => f }。它返回此错误：未定义的局部变量或方法“f”。但是，addRound 方法确实渲染了以下内容：

```
def addRound
  render :partial => "add_round"
end 
```

以这种方式编写它允许我渲染不需要传递局部变量的部分（例如纯文本字符串）。但是我怎样才能让它与包含的 :locals => { :f => f } 一起工作？有没有另一种写法？

非常感谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-11T01:43:45.237

你需要传递`f`给`addRound`

```
def addRound(f)
  render partial: "add_round", locals: { f: f }
end 
```

并且在视图中

```
<%= addRound(f) %> 
```

# algorithm - 为矩阵运算找到一个有效的算法

> ID：12361634
> 
> 赞同：5
> 
> 时间：2012-09-11T01:42:10.693
> 
> 标签：algorithm

这是一道面试题：

> 对于一个矩阵，我们定义一个运算，当我们给一个条目加1时，所有周围的条目（上，下，左，右）也将加1。给定一个正矩阵，找到一个算法来确定矩阵是否可以使用这种操作从零矩阵构造。

什么是解决问题的有效算法？

我目前能想到的是使用回溯来尝试所有可能的组合，但这绝对不是有效的。这个问题有点像关灯游戏，但这里不是 0/1，这使得更复杂。

谢谢。

编辑：

例如：

```
3 3 can be constructed from 0 0 -> 1 1 -> 2 2 -> 3 3
1 2                         0 0    1 0    1 1    1 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:57:34.887

线性代数？

```
Cell i,j is touched x<sub>ij</sub> times. 
```

n ^(2 个)变量和方程。解决。`O(n^6)`通过高斯方法，可能存在其他更快的方法。

此外，矩阵很特殊，因此可以使其更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:22:53.073

我发现了一些东西（对于 2x2 矩阵），想先分享它们
- 矩阵中所有元素的总和应该被 3 整除（那么只有它是可能的）。
-我们必须以允许的操作步骤的形式表达给定的矩阵

```
3 3  -> 2* 1 1    +    1* 1 1
1 2        0 1            1 0 
```

在某些情况下这是无法做到的，例如

```
5 3  ->2* 1 0  +   2* 1 1     = 4 2
2 4       1 1         0 1       2 4

5 3   -   4 2     = 1 1 (this is not allowed operation)
2 4       2 4       0 0 
```

# wordpress - 如何让根站点在 WordPress MultiSite、多域设置中使用 www？

> ID：12361640
> 
> 赞同：2
> 
> 时间：2012-09-11T01:42:54.433
> 
> 标签：wordpress, .htaccess, redirect, domain-name, url-redirection

我有一个使用相同安装的多个域的 WordPress MultiSite 设置。我正在使用插件[Networks for WordPress](https://wordpress.org/extend/plugins/networks-for-wordpress/)来实现这一点。

Wordpress 已经配置为删除所有 www，这对子域有好处，但我想将所有根站点配置为使用 www。（留下没有 www 的子域。）

现在我的问题是，在这样的设置中，只有一个 .htaccess 文件似乎由网络中的所有站点共享（无论它们属于哪个域）。

此外，任何来自 .htaccess 的重定向都需要首先禁用根站点的默认 WordPress 重定向。（否则我会陷入无限循环。）

**那么有没有办法将多个非 www 根站点重定向到 www，都来自同一个 .htaccess 文件？以及如何仅针对根站点禁用默认的 WordPress 重定向到非 www？让这个工作还需要什么？**

PS。不幸的是，我不能直接访问 Apache 或 DNS 配置，所以我不能使用这些方法来代替 .htaccess。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:54:32.410

尝试将其添加到文档根目录中的 htaccess 文件中，高于可能存在的任何 wordpress 规则：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^[^.]+\.[a-z]{2,3}$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [L,R=301] 
```

只要您的“根站点”的域名中只有一个`.`（例如 domain.com、domain.net、domain.us），它就会将所有这些都重定向到`www`前面带有 a 的重定向。

# google-maps-api-3 - 无法让子页面在开启页面的地图上放置标记

> ID：12361643
> 
> 赞同：1
> 
> 时间：2012-09-11T01:43:15.420
> 
> 标签：google-maps-api-3

我无计可施。

我有一个包含地图的页面 A（名为“地图”的地图对象具有全局范围），以及一个打开子页面 B 的按钮。反过来，页面 B 有一个应该在地图上放置标记的按钮在页面 A 上。相关页面的链接和概要如下：

页面 A： http: [//friendsofhillforest.org/maps/HillForestTrailmap-v2-2-topo.html](http://friendsofhillforest.org/maps/HillForestTrailmap-v2-2-topo.html) “管理我的标记”按钮在新窗口中打开页面 B

B页：http: [//friendsofhillforest.org/maps/tools/marker_mgmt2.html](http://friendsofhillforest.org/maps/tools/marker_mgmt2.html)

当页面 B 按钮“选定的地图”尝试在页面 A 的地图上放置标记时，我收到错误消息“错误：属性值无效：[object Object] (main.js:1)”

这是我的代码的概要，因此您不必费力地阅读这些大型脚本：

页面 A：

```
<body>
    <input type="button" name="location" value="Manage My Markers" title="Manage My Markers" onClick="launchMarkerManager();">
    ...
    <div id="map"></div>
    <script type="text/javascript">
        var map = null;
        ...
        function launchMarkerManager() {
            var newwindow = window.open('http://friendsofhillforest.org/maps/tools/marker_mgmt1.html','Hill Forest Marker Management Tool', document.height - 50, document.width - 50); newwindow.focus();
        }
        ...
        map = new google.maps.Map(document.getElementById('map'), {
            ...
        });
    </script>
</body> 
```

B页：

```
<body>
    ...
    <input type="button" id="mapchecks" value="Map Selected" onclick="mapChecks(); />
    ...
    <script type="text/javascript">
        ...
        function mapChecks() {
            //add the markers in the results list to the calling map window
            var map = window.opener.map;
            var markerFile = '../icons/numbermarkers/iconr25.png';
            var thisMarker = new google.maps.Marker({
                map: map,
                ...     
            });
            map.setCenter(new google.maps.LatLng(36.5,-74.1));
        }
        ...
    </script>
</body> 
```

我做了很多谷歌搜索和大量搜索 Stack Overflow，但我似乎无法找到这个问题的另一个例子。谁能看到我做错了什么？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:42:13.573

I can't tell you exactly what the problem is, but it must be caused by the two different documents.

It works for me when I transfer the mapChecks-function(with some modifications, e.g. removing the 1st line) into page A and call `opener.mapChecks()` in page B

# java - Java - 搜索数组中等于给定数字的所有元素索引

> ID：12361647
> 
> 赞同：6
> 
> 时间：2012-09-11T01:43:56.273
> 
> 标签：java, arrays

我有方法 searchSales() 应该找到等于给定销售数字的所有销售数字。应用程序要求用户使用键盘输入给定的销售数字并搜索它。如果找到从键盘输入的销售数字，则应用程序显示销售数字/数字，否则显示适当的消息。好吧，我有一个代码，它只显示相等销售数字的第一个索引，例如：数组有元素 1、2、3、3、4、5，我想找到 [array] = 3 的所有索引。我怎么能做这个？

```
public static void searchSales(int search[]){

        Scanner input = new Scanner(System.in);

        System.out.print("Enter sales figure you want to find: ");
        int target = input.nextInt();
        int index = -1;
        for (int i=0; i<search.length; i++){
            if (search[i] == target){
                index=i;
                break;
            }
        }
        if (index == -1){
            System.out.println("Sales figure not found");
        }
        else {
            System.out.printf("Sales figure found at branch %d",index+1);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T01:51:36.137

```
 public static void searchSales(int search[]){

    Scanner input = new Scanner(System.in);
    System.out.print("Enter sales figure you want to find: ");
    int target = input.nextInt();
    int index = -1;
    for (int i=0; i<search.length; i++){
        if (search[i] == target){
            index=i;
            System.out.printf("Sales figure found at branch %d\n",index+1);

        }
    }
    if (index == -1){
        System.out.println("Sales figure not found");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T01:47:55.710

删除上面写着的那一行`break;`（这一行使您的代码退出循环），将每个值存储在一个数组中并在最后将它们打印出来，或者将它们打印出来而不是将它们存储在`index`变量中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T01:47:56.393

使用 a`List<Integer>`收集匹配的索引。就像是：

```
 int target = input.nextInt();
    List<Integer> indices = new ArrayList<Integer>();
    for (int i=0; i<search.length; i++){
        if (search[i] == target){
            indices.add(i);
        }
    }
    if (indices.isEmpty()){
        System.out.println("Sales figure not found");
    }
    else {
        System.out.println("Sales figures found:  " + indices);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T02:20:38.230

使用 Arrays.asList，然后在 List 上使用 indexOf/lastIndexOf。就像是：

```
ArrayList<Integer> sales = Arrays.asList(search)
int start = sales.indexOf(target);
int end = sales.lastIndexOf(target);
if(start==end){
    System.out.printf("Sales figure found at branch %d",start+1);
}
else{
    for(int i=start;i<=end-start;i++)
        if(sales.get(i)==target)
            System.out.printf("Sales figure found at branch %d",i+1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T02:47:51.510

在你的情况下，你真的不需要在任何地方存储任何东西，这样的东西就足够了：

```
public static void searchSales(int search[]){
    Scanner input = new Scanner(System.in);
    System.out.print("Enter sales figure you want to find: ");
    int target = input.nextInt();

    boolean found = false
    for (int i = 0 ; i < search.length ; i++)
        if (search[i] == target) {
            found = true;
            System.out.printf("Sales figure found at branch %d", i + 1);
        }
    if (! found)
        System.out.println("Sales figure not found");
} 
```

* * *

`highestSales`是一个不同的故事。在那里，你必须存储东西：

```
public static void highestSales(int[] nums) {
    List<Integer> list = new ArrayList<Integer>();
    list.add(0);
    for (int i = 1 ; i < nums.length ; i++) {
        if (nums[i] > nums[list.get(0)]) {
            list.clear();
            list.add(i);
        }
        else if (nums[i] == nums[list.get(0)])
            list.add(i);
    }
    System.out.println("Highest sales figure " + nums[list.get(0)] + " found at these branches");
    for (int i : list) System.out.println(i);
} 
```

# clojure - 如何找到需要为协议接口定义的功能

> ID：12361651
> 
> 赞同：2
> 
> 时间：2012-09-11T01:44:27.913
> 
> 标签：clojure

如果我希望我的类型实现一个功能，例如。`contains?`如何找出要扩展的接口？

同样，如果我看到一个界面，例如。`clojure.lang.ILookup`如何找出需要实施哪些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:31:17.917

如果您想查看接口需要哪些方法（包括继承的成员），请在 repl 中使用 java 反射：

```
 (clojure.pprint/pprint (.getMethods clojure.lang.ILookup))
 [#<Method public abstract java.lang.Object clojure.lang.ILookup.valAt(java.lang.Object)>,
  #<Method public abstract java.lang.Object clojure.lang.ILookup.valAt(java.lang.Object,java.lang.Object)>] 
```

如果您使用 Clojure 1.2，您还可以使用`clojure.contrib.repl-utils/show`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:10:10.960

首先，从这里克隆源代码：(git) [https://github.com/clojure/clojure.git](https://github.com/clojure/clojure.git) (browser) [https://github.com/clojure/clojure](https://github.com/clojure/clojure)

查看包含的来源？在 src/clj/clojure/core.clj 中，它转身调用 clojure.lang.RT.contains。

该文件位于 src/jvm/clojure/lang/RT.java 中，您可以看到它可以与 Associate、IPersistentSet、Map、Set 的实例一起使用，而且它看起来也可以索引到数组和字符串中，所以选择什么对你的情况有意义。

同样，ILookup 的源代码位于同一目录中。[如果您不熟悉接口，可以在此处](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)了解接口如何在 Java 中工作。

返回包含？但是，您也许可以使用记录来实现您想要的。

例如

```
main=> (defrecord Action [time key args state])
main.Action
main=> (def action (Action. (System/currentTimeMillis) "key" ["arg1" "arg2"] nil))
#'warscor.main/action
warscor.main=> (contains? action :time)
true
warscor.main=> (contains? action :state)
true
warscor.main=> (contains? action :foo)  
false
warscor.main=> (def action (assoc action :foo "bar"))
#'warscor.main/action
warscor.main=> (contains? action :foo)               
true 
```

# vba - VBA中的XSLT日期比较

> ID：12361654
> 
> 赞同：1
> 
> 时间：2012-09-11T01:44:48.617
> 
> 标签：vba, xslt, xslt-1.0

由于限制，我无法使用 2.0 版或任何软件包。我目前正在使用 VBA 调用此 XSL 模板，然后过滤掉 20120101 (YYYYMMDD) 之前的日期。

我想从本质上过滤所有日期大于给定变量日期的日期

```
'<xsl:template match=""BankStatementItemDetail[//BankStatementItemDetail[number(concat(substring(TransactionDate, 1, 4 ),substring( TransactionDate, 6, 2 ),substring( TransactionDate, 9, 2 ))) <= "" year & month & day ""  ]]"">` 
```

TransactionDate 格式 2012-06-22T00:00:00 年月日格式 20120101

以及xml结构的例子

```
<BankStatementItemDetail Key="e744f079-c684-4567-b844-5442e69a1827">
    <Id>https:///xxx/components/x/bank-statement-item/e744f079-c084-7567-b844-5b42569a1827</Id>
    <Version>1</Version>
    <EffectiveStatus>Active</EffectiveStatus>
    <EffectiveStatusDateTime>2012-06-23T07:34:45</EffectiveStatusDateTime>
    <SecurityDescriptor>
        <IsEditable>true</IsEditable>
    </SecurityDescriptor>
    <account Code="xxxx" ScopeCode="xxxx" Uid="a0f60cd9-25a0-4955-a55c-2dc73bb0dd51">
        <Id>https://test/components/administration/account/a0f40cd9-23a0-4955-a55c-2dc73bb0dd51</Id>
        <Description>Trial Account</Description>
    </account>
</BankStatementItemDetail> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:04:47.517

**这个简单的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "BankStatementItemDetail
   [20120101000000
   >
    translate(EffectiveStatusDateTime, '-:T', '')
   ]"/>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时**（基于提供的一个但有两个`BankStatementItemDetail`元素，其中第二个在 2012-01-01 之前）：

```
<details>
    <BankStatementItemDetail Key="e744f079-c684-4567-b844-5442e69a1827">
        <Id>https:///xxx/components/x/bank-statement-item/e744f079-c084-7567-b844-5b42569a1827</Id>
        <Version>1</Version>
        <EffectiveStatus>Active</EffectiveStatus>
        <EffectiveStatusDateTime>2012-06-23T07:34:45</EffectiveStatusDateTime>
        <SecurityDescriptor>
            <IsEditable>true</IsEditable>
        </SecurityDescriptor>
        <account Code="xxxx" ScopeCode="xxxx" Uid="a0f60cd9-25a0-4955-a55c-2dc73bb0dd51">
            <Id>https://test/components/administration/account/a0f40cd9-23a0-4955-a55c-2dc73bb0dd51</Id>
            <Description>Trial Account</Description>
        </account>
    </BankStatementItemDetail>
    <BankStatementItemDetail Key="e744f079-c684-4567-b844-5442e69a1827">
        <Id>https:///xxx/components/x/bank-statement-item/e744f079-c084-7567-b844-5b42569a1827</Id>
        <Version>1</Version>
        <EffectiveStatus>Active</EffectiveStatus>
        <EffectiveStatusDateTime>2011-12-31T08:39:52</EffectiveStatusDateTime>
        <SecurityDescriptor>
            <IsEditable>true</IsEditable>
        </SecurityDescriptor>
        <account Code="xxxx" ScopeCode="xxxx" Uid="a0f60cd9-25a0-4955-a55c-2dc73bb0dd51">
            <Id>https://test/components/administration/account/a0f40cd9-23a0-4955-a55c-2dc73bb0dd51</Id>
            <Description>Trial Account</Description>
        </account>
    </BankStatementItemDetail>
</details> 
```

**产生所需的正确结果**（2012-01-01 之前的结果`BankStatementItemDetail`已“删除”）：

```
<details>
   <BankStatementItemDetail Key="e744f079-c684-4567-b844-5442e69a1827">
      <Id>https:///xxx/components/x/bank-statement-item/e744f079-c084-7567-b844-5b42569a1827</Id>
      <Version>1</Version>
      <EffectiveStatus>Active</EffectiveStatus>
      <EffectiveStatusDateTime>2012-06-23T07:34:45</EffectiveStatusDateTime>
      <SecurityDescriptor>
         <IsEditable>true</IsEditable>
      </SecurityDescriptor>
      <account Code="xxxx" ScopeCode="xxxx" Uid="a0f60cd9-25a0-4955-a55c-2dc73bb0dd51">
         <Id>https://test/components/administration/account/a0f40cd9-23a0-4955-a55c-2dc73bb0dd51</Id>
         <Description>Trial Account</Description>
      </account>
   </BankStatementItemDetail>
</details> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T03:28:34.923

您可以使用 substring() 函数和隐式类型转换。例如，这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:variable name="ref-year" select="2012" />
<xsl:variable name="ref-mon"  select="6" />
<xsl:variable name="ref-day"  select="23" />

<xsl:template match="/*">
  <xsl:copy>
    <xsl:apply-templates select="BankStatementItemDetail[
      ((substring( EffectiveStatusDateTime, 1, 4) * 416) +
       (substring( EffectiveStatusDateTime, 6, 2) *  32) +
       (substring( EffectiveStatusDateTime, 9, 2)      )) >=
      (($ref-year * 416) + ($ref-mon * 32) + $ref-day)
    ]"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

...当应用于此输入时...

```
<BankStatementItems>
  <BankStatementItemDetail id="1">
    <EffectiveStatusDateTime>2012-06-23T07:34:45</EffectiveStatusDateTime>
  </BankStatementItemDetail>
  <BankStatementItemDetail id="2">
    <EffectiveStatusDateTime>2011-09-20</EffectiveStatusDateTime>
  </BankStatementItemDetail>
</BankStatementItems> 
```

...产量...

```
<BankStatementItems>
  <BankStatementItemDetail id="1">
    <EffectiveStatusDateTime>2012-06-23T07:34:45</EffectiveStatusDateTime>
  </BankStatementItemDetail>
</BankStatementItems> 
```

# r - 如何在不安装包的情况下计算 R 中一列中的多个数值变量？

> ID：12361655
> 
> 赞同：0
> 
> 时间：2012-09-11T01:44:53.973
> 
> 标签：r, variables

我想计算给定列中重复出现的数值变量的数量。我的数据集是：mydata

我有一个看起来像这样的数据框：

```
mydata <- structure(list(VARIABLE = c(1, 1, 2, 3, 3, 3, 4, 4)), 
  .Names = "VARIABLE",   row.names = c(NA, -8L), class = "data.frame")

mydata
##     VARIABLE
## 1        1
## 2        1
## 3        2
## 4        3
## 5        3
## 6        3
## 7        4
## 8        4 
```

我想计算列中 1s,2s,3s,4s 的数量`VARIABLE`（两个 1，一个 2，三个 3，两个 4）。无论如何我可以在不安装额外软件包的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T01:48:06.463

是的，使用`table`如下，它来自`base`包：

```
mydata <- data.frame(VARIABLE = c(1, 1, 2, 3, 3, 3, 4, 4))
table(mydata$VARIABLE)

# 1 2 3 4 
# 2 1 3 2 
```

正如 Maiasaura 所建议的，您可以将输出转换为一个不错的 data.frame：

```
data.frame(table(mydata$VARIABLE))
#   Var1 Freq
# 1    1    2
# 2    2    1
# 3    3    3
# 4    4    2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:13:46.003

作为替代方案，`?table`您也可以`?rle`在想要检测变量/向量中特定重复值的“运行”的情况下使用。在这种情况下，您将获得与使用该`table`函数相同的结果，但情况并非总是如此。

```
mydata <- data.frame(VARIABLE = c(1, 1, 2, 3, 3, 3, 4, 4))
rle(mydata$VARIABLE) 
```

结果：

```
Run Length Encoding
  lengths: int [1:4] 2 1 3 2
  values : num [1:4] 1 2 3 4 
```

您也可以对函数的结果进行子集化`rle`，如下所示：

```
rle(mydata$VARIABLE)$values
[1] 1 2 3 4

rle(mydata$VARIABLE)$lengths
[1] 2 1 3 2 
```

# php - 读取带有变量的html文件的内容

> ID：12361659
> 
> 赞同：0
> 
> 时间：2012-09-11T01:46:13.967
> 
> 标签：php, html

我想在其中写入 3 个 $vars 的 html 文件上使用 file_get_contents()，并让这些 vars 通过 $_POST 获取分配给它们的数据。

例子：

```
-html file-
    <html>
    .
    .
    <table>
    <tr>
    <td>first name</td><td>last name</td><td>id</td>
    </tr>
    <tr>
    <td>$fname</td><td>$lname</td><td>$id</td>
    </tr>
    </table>
    </html>

-php file-
    <?php
    .
    .
    $fname = $_POST('fname');
    $lname = $_POST('lname');
    $id = $_POST('id');
    $page = file_get_contents("test.html");
    echo $page;
    ?> 
```

我现在所做的是`"<!--split-->"`在变量所在的位置设置注释，然后我对 file_get_contents("test.html") 进行爆炸（），将变量附加到它的末尾并 implode（） $page。但对于这么小的任务来说似乎有点密集，我希望有更好的解决方案。我希望我的问题已经足够清楚了。如果不是，请询问，如果可以，我会尝试澄清更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:59:44.753

这是一个需要控制`test.html`文件的解决方案：

1：重命名`test.html`为`test.php`

2：编辑`test.php`使其看起来像这样（注意我添加了`echo`关键字，由 PHP 开始和结束标签包围）：

```
<?php
//View (PHP file)
?>
<html>

    <table>
        <tr>
            <td>first name</td><td>last name</td><td>id</td>
        </tr>
        <tr>
            <td><?php echo $fname; ?></td>
            <td><?php echo $lname; ?></td>
            <td><?php echo $id; ?></td>
        </tr>
    </table>

</html> 
```

3：现在，在您的主 PHP 文件中，只有`include`PHP 模板文件：

```
$fname = $_POST('fname');
$lname = $_POST('lname');
$id = $_POST('id');
include 'test.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T01:49:11.420

关于什么：

```
-html file-
    <html>
    .
    .
    <table>
    <tr>
    <td>first name</td><td>last name</td><td>id</td>
    </tr>
    <tr>
    <td>%s</td><td>%s</td><td>%s</td>
    </tr>
    </table>
    </html>

-php file-
    <?php
    .
    .
    $fname = $_POST('fname');
    $lname = $_POST('lname');
    $id = $_POST('id');
    $page = sprintf(file_get_contents("test.html"),$fname,$lname,$id);
    echo $page;
    ?> 
```

# objective-c - 块，自我，保留周期

> ID：12361661
> 
> 赞同：5
> 
> 时间：2012-09-11T01:46:30.687
> 
> 标签：objective-c, objective-c-blocks, retain-cycle

我在一个块内引用 self 而不是创建保留周期时遇到了一些麻烦。

您能否告诉我我的理解是否正确：

如果我曾经在块内引用 self ，它将创建一个保留循环，相反我应该在块外创建对 self 的弱引用，然后在块内使用该弱引用？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T01:57:52.773

是的，这是正确的，但有一些例外：

仅当`self`最终间接保留块时才会发生保留周期，例如`myblock`在属性上设置属性`self` `myproperty`：

```
self.myproperty.myblock = ^{ [self dosomething]; }; // ERROR: Retain Cycle 
```

但是，在将块用于诸如调度代码之类的东西时（通常）不会发生保留周期，如下所示：

```
dispatch_async(dispatch_get_main_queue(), ^{ [self dosomething]; }); // Safe, dispatch_async will not be retained by you 
```

`dispatch_async`当然，除非您在具有保留循环标准的块内调用该函数。

这真的很混乱，我希望能解决这个问题。现在，我个人的看法是：

* * *

情况并非总是如此，在 ARC 之前的代码中这不是问题，但由于块现在自动保留它们捕获的任何对象，所以这是一个问题。

我希望这会得到解决，因为这将是一个非常容易解决的问题，方法是将`self`' 类型设置为 a`__weak instancetype const`而不是 a `instancetype const`。它还可以解决在 ARC 中创建类集群的一些问题，诚然这不是最大的问题，但它仍然存在。

就保留周期的优势而言，并不多。

# asp.net - DataPager 不会为 ListView 加载新页面

> ID：12361663
> 
> 赞同：0
> 
> 时间：2012-09-11T01:46:31.587
> 
> 标签：asp.net, listview, datapager

我有一个与我的 ListView 一起使用的 DataPager 控件，当页面加载时，寻呼机显示第一页、下一页、最后一页、前一页和 10 页，但是当我单击页面的任何按钮或超链接时，没有任何反应，没有无论我点击多少次。我听说你必须在 preredender 中做一些事情，但没有看到任何关于它是如何工作的代码。谁能告诉我我应该在 prerender 中放入什么代码（以及如何调用 prerender），如果这是解决方案，如果不是如何让我的 datapager 工作？

```
<asp:UpdatePanel ID="upSearchResults" runat="server">
    <ContentTemplate>

        <asp:Label ID="lblErrorMSG" CssClass="ErrorText" runat="server" />

        <asp:Panel ID="plSearchResults" runat="server">
            <table  style="width: 100%" border="1">
                <tr>
                    <td>
                        <asp:Literal ID="lblTitleRow" runat="server" />
                    </td>
                    <td>
                        <asp:Literal ID="lblDescriptionRow" runat="server" />
                    </td>
                    <td class="TableSelectButton">
                        <asp:Button ID="btnAddNewItem" Text="Select" runat="server" />
                    </td>
                </tr>

                <asp:ListView ID="lvSearchResults"  runat="server">

                    <LayoutTemplate>
                        <tr id="itemPlaceHolder" runat="server" />
                    </LayoutTemplate>

                    <ItemTemplate>
                        <tr>
                            <td>
                                <%#Eval("Title")%>
                            </td>
                            <td>
                                <%#Eval("Descript")%>
                            </td>
                            <td class="TableSelectButton">
                                <asp:Button ID="btnEditItem" Text="Select" PostBackUrl='<%#String.Format("{0}.aspx?ID={1}&SectionID={2}", Eval("PageName"), Eval("ID"), ddlMediaTitle.SelectedValue.ToString())%>' runat="server" />
                            </td>
                        </tr>
                    </ItemTemplate>

                </asp:ListView>
            </table>
        </asp:Panel>

        <div class="Center">
            <asp:DataPager ID="dpSearchResults" PagedControlID="lvSearchResults" PageSize="10" runat="server"> 
                <Fields> 
                    <asp:NextPreviousPagerField ButtonType="Button" ShowNextPageButton="false" ShowFirstPageButton="true" ShowLastPageButton="false" ShowPreviousPageButton="true" /> 
                    <asp:NumericPagerField ButtonCount="10" /> 
                    <asp:NextPreviousPagerField ButtonType="Button" ShowNextPageButton="true" ShowFirstPageButton="false" ShowLastPageButton="true" ShowPreviousPageButton="false" /> 
                </Fields> 
            </asp:DataPager>
        </div>

    </ContentTemplate>

    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnSearch" EventName="Click" />
    </Triggers>

</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T03:33:23.470

通过做两件事，我能够让您的代码示例正常工作。首先在列表视图控件中，我添加了 OnPagePropertiesChanged 事件并再次绑定数据。

```
<asp:ListView ID="lvSearchResults"  runat="server" 
    OnPagePropertiesChanged="lvSearchResults_PagePropertiesChanged"> 
```

在后面的代码中：

```
protected void lvSearchResults_PagePropertiesChanged(object sender, EventArgs e)
{
    //bind the lvSearchResults
} 
```

为了让更新面板工作，我使用了这个触发器：

```
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="lvSearchResults"
        EventName="PagePropertiesChanged" />
</Triggers> 
```

我的一项建议是在一切正常后绝对最后添加更新面板。它们似乎隐藏了很多问题，使它们更难解决。

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:18:06.123

我相当确定列表视图控件是无法在更新面板控件中使用的已知控件之一。通过暂时删除更新面板标签来测试这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T03:25:50.470

如果使用 plSearchResults.DataSource = .??? 以编程方式归档列表视图数据。，所以它被称为你页面中的每个回发......包括异步的。

并且 DataSource 对象必须实现寻呼机回调。

因此，为您提供解决方案。（如果我假设正确）是：在这样的代码中添加一行..

```
if(!isPostBack) //This line will assure tha the binding will be filled just once
    plSearchResults.DataSource = .???. 
```

然后它不会重新绑定每个回发...并确保分页的回调在 DataSource 对象上实现

Asp.NET 数据源对象，如 SQLDataSource、LinqDataSource、EntitiesDataSource……它们都实现了分页。如果您以编程方式创建一个数据源，则必须实现分页回调。

# c++ - 将 std::string 转换为 char 数组

> ID：12361669
> 
> 赞同：3
> 
> 时间：2012-09-11T01:47:51.057
> 
> 标签：c++, string, char, type-conversion, winsock

我见过很多类似的问题，但似乎没有一个对我的代码有用，我想我忽略了一些基本的问题，也许你可以帮忙。

现在我正在构建一个字符串，作为一个请求发送到 winsock 发送函数，这需要发送一个 char [] 。我需要将我的 std::string 转换为 char 数组 (char [])。

目前这是有效的请求：

```
char request [] = "GET /gwc/cgi-bin/fc?client=udayton0.1&hostfile=1HTTP/1.0\nHost:www.gofoxy.net\n\n"; 
```

但是我需要将一串请求更改为相同的数据结构。

我很感激任何帮助！

**编辑**：

> 我可以将字符串转换为 char *，但是如何使用它来获取字符数组？我希望我不会让它变得更加混乱。这是我运行时产生与发送请求不兼容的字符星的两次尝试：

```
//convert request into a char[]
//char *req_ch = new char[req_str.size()+1];
//hostCh[req_str.size()] = 0;
//memcpy(req_ch, req_str.c_str(), req_str.size());

//char * req = new char[req_str.size() +1];
//std::copy(req_str.begin(), req_str.end(), req);
//req[req_str.size()] = '\0'; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T02:05:55.233

如果你有一些带有这样签名的遗留 C 风格 API，它期望一个空终止的 C 风格字符串：

```
void foo(const char* data); 
```

那么您通常可以执行以下操作：

```
std::string s("my string data");
foo(s.c_str()); 
```

如果你真的需要一个数组，或者一个非常量版本的数据，那么 API 是这样的：

```
void foo(char* data, std::size_t len);  // or foo(char[] data, std::size_t len); 
```

然后你可以做这样的事情：

```
std::string s("my string data");
std::vector<char> v(s.begin(), s.end());
foo(&v[0], v.size());    // or foo(v.data(), v.size()); in C++11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T01:56:48.840

你真的需要`char[]`还是会`char const*`做？

如果是后者， c_str() 会做你想做的事。

如果是前者，那么您需要将字符串复制到您想要的东西中：

```
std::vector<char> buff(str.size() + 1); // initializes to all 0's.
std::copy(str.begin(), str.end(), buff.begin());
fun_call(&buff[0]); 
```

您可能只需要 c_str 版本。如果您需要第二个版本，那么您正在阅读并且可能希望提供一个 buff 最大尺寸。

# jquery - 选择框 .val() 问题 Internet Explorer 8

> ID：12361673
> 
> 赞同：0
> 
> 时间：2012-09-11T01:48:05.650
> 
> 标签：jquery, internet-explorer, select

我正在向数据库发送 Ajax 调用以获取要填充的数据并创建现有的选择框。

使用创建选择后`jQuery.html()`，我正在尝试预设选择框的值。但是，设置该值并非一直有效，有时仅在 IE8 中将选择框保留为“选择一个”/-1 的默认选项。要添加的另一件事是，我通过使用使选择框可见

```
$("#selectBox").css('display', 'block') 
```

我正在使用`jQuery.val()`.

我试过了`$("#selectBox").val(id)`

和

```
$("#selectBox").find('option[value=' + id + ']').prop('selected', true); 
```

但是两者都呈现出我一直遇到的相同不一致的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T03:20:27.470

```
$("#selectBox").find('option[value="' + id + '"]').prop('selected', true); 
```

你可以试试这个，你必须确保`id`是选项的`value attribute`
或者你必须确保选项在你使用之前已经完全加载

> $("#selectBox").val(id)

# html - 在 ng-repeat 中动态加载模板

> ID：12361680
> 
> 赞同：2
> 
> 时间：2012-09-11T01:49:00.197
> 
> 标签：html, angularjs

我正在尝试在以下内容中动态加载模板`ng-repeat`：

```
<ul>
    <li ng-repeat="prop in entity" >
        <div ng-include src="prop.template"></div>
    </li>
</ul> 
```

`prop.template`等于模板的 URL，例如`'partials/form/text.html'`. 上面的代码产生以下错误：

```
Error: 10 $digest() iterations reached. Aborting!
Watchers fired in the last 5 iterations: [["prop.template; newVal: \"partials/form/text.html\"; oldVal: undefined","prop.template; newVal: \"partials/form/text.html\"; oldVal: undefined" .... (and so on) 
```

如何`prop.template`从该文件中获取模板的 URL 并将 HTML 插入到 DOM 中`ng-repeat`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T04:30:57.797

> [http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng).$rootScope.Scope#$digest
> 
> Process all of the watchers of the current scope and its children. Because a watcher's listener can change the model, the $digest() keeps calling the watchers until no more listeners are firing. This means that it is possible to get into an infinite loop. This function will throw 'Maximum iteration limit exceeded.' if the number of iterations exceeds 10.

The problem is not about the code here, it should be working perfectly. See the working example here: [http://jsfiddle.net/fmjf8/2/](http://jsfiddle.net/fmjf8/2/)

The problem is either you may have too many elements in your `ngRepeat`ing array OR the template your array, or the template you are including is doing too many stuff, raising angular's infinite loop protection. I vote for the second

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T17:57:12.287

我知道这有点不相关，但我一直在寻找类似的问题，我的任务在某个时候把我带到了这里。而且由于互联网上没有太多关于 Angular 的资源，所以我在这里为其他不幸的人写这篇文章。

我对 ng-include 的问题：

我从路由参数中加载了 ng-view 的模板（html 文件）视图，并且 ng-include 在其中一个模板中引用了其中一个模板。它在角度侧产生完全相同的响应。

据我了解，会发生这种情况：

当 ng-include 尝试将模板 html 文件嵌入到原始文件中时，它会尝试从头开始，这意味着重新加载所有内容，包括原始 html 文件、共享文件、模板所有内容；

templateX.html-> ng-include (templateY) -> templateX.html -> templateY .... 所以实际的无限循环，digest 只会防止您的浏览器由于过多的 DOM 而崩溃。

然后我尝试使用完整路径名而不是任何相对路径，它解决了我的问题。

也许您可以尝试 ng-include 中的完整路径名来解决您的问题。

希望这有所帮助。

# perl - CGI 检查可用的 Perl 版本和模块

> ID：12361683
> 
> 赞同：4
> 
> 时间：2012-09-11T01:49:22.427
> 
> 标签：perl, deployment, dependencies, cgi, web-hosting

我即将编写一个 Perl CGI 脚本，该脚本将部署在不允许 shell 访问的主机上。您可以通过他们的 Web 界面与他们进行交互，您可以在其中将文件上传到 Web 服务器，包括 Perl CGI。

在开始之前，我想检查一下安装了哪个版本的 Perl，以及某些 CPAN 模块是否可用。我可以编写自己的“probe.cgi”来做到这一点，但也许有人已经制作了这样的工具。

是否有一个 CGI 可以运行可能是非常旧的 Perl 版本，您可以将其放入任何 Web 服务器并生成有关正在使用的托管服务提供商功能的报告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T03:21:05.550

[列出已安装的模块](https://metacpan.org/search?q=cgi%20list%20installed%20modules)-> [App::Module::Lister](https://metacpan.org/module/App%3a%3aModule%3a%3aLister) *这是一个程序，用于列出它在@INC 中找到的所有 Perl 模块，用于无壳网络托管帐户*

# sql - Rails 3.1 where 子句将引号添加到 sql IN 子句

> ID：12361688
> 
> 赞同：0
> 
> 时间：2012-09-11T01:49:42.180
> 
> 标签：sql, ruby-on-rails-3.1

我花了一整天的时间在这上面。
我将权限存储在 postgresql 数据库的一个字段中。这里的值是“roseburg,kfc,kcpl”我想拆分它并让查询选择 * from engine where plant_id in ('roseburg', 'kfc', 'kcpl')

```
def fnc_user_permissions <br/>
  temp_var = current_user.permissions.split(",")

  sql_perms = String.new
  # "perm1", "perm2", "perm3"

  temp_var.each do |pm| 

   sql_perms += (sql_perms.blank? ? pm :  "', '" + pm)        

  end      

  @engines = Engine.where("plant_id in (:plant_id)", {:plant_id => sql_perms })
  @engines = @engines.order("name")          

end 
```

“Engine.where”添加了第二个“单引号”，而不是获取

```
select * from engines where plant_id in ('roseburg', 'kfc', 'kcpl') 
```

我明白了

```
select * from engines where plant_id in ('roseburg'', ''kfc'', ''kcpl') 
```

如果我将每个循环编辑为此

```
sql_perms += (sql_perms.blank? ? pm :  ", " + pm) 
```

我明白了

```
select * from engines where plant_id in ('roseburg, kfc, kcpl') 
```

我终于不得不这样做：

```
 temp_var = current_user.permissions.split(",")

  sql_perms = String.new
  # "perm1", "perm2", "perm3"

  temp_var.each do |pm| 

   sql_perms += (sql_perms.blank? ? pm :  "', '" + pm)        

  @engines = Engine.find_by_sql("select * from engines where plant_id in ('#{sql_perms}') ") 
```

它有效，但我宁愿使用 .where 代码 关于如何使 .where 停止添加我不想要的第二个引号的任何想法？它是如此微软！

提杜布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:09:23.440

或者，这个的 SQL 注入安全版本将是

```
Engine.where("plant_id in (?)", temp_var) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:52:48.950

你应该使用'？将值绑定到 sql 语句。尝试

```
Engine.where("plant_id in (#{ Array.new(temp_var.size, '?').join(',') })", *temp_var) 
```

# python - 仅替换python列表项中第一次出现的字符？

> ID：12361689
> 
> 赞同：0
> 
> 时间：2012-09-11T01:49:46.557
> 
> 标签：python, string, list, replace

这很难解释，但这是我的问题..

```
sampleList = ['_ This is an item.','__ This is also an item'] 
```

我正在尝试获取 sampleList 并查找是否`_`仅在第一个字符行中出现，将其替换为`#`，然后如果`__`出现，则替换为`&`。

即使对我自己来说，也有点难以理解。

基本上，如果我有一个列表，我希望它通过列表工作，只找到可能的 dict 的第一个实例并将其替换为相应的值。然后返回整个列表..

编辑：

对不起，如果我描述的不够充分..

```
dictarray = {
'_':'&',
'__':'*#',
'____':'*$(@'
}

sampleList = ['_ This is an item.','__ This is also an item','_ just another _ item','____ and this last one'] 
```

输出：

```
sampleList = ['& This is an item.','*# This is also an item','& just another _ item','*$(@ and this last one'] 
```

如果在项目的开头找到密钥，我需要能够捕获，如果是这样，请将其更改为值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T02:12:28.980

```
# The original input data
dictarray = {
'_':'&',
'__':'*#',
'____':'*$(@'
}

sampleList = ['_ This is an item.','__ This is also an item','_ just another _ item','____ and this last one']

# Order the substitutions so the longest are first.
subs = sorted(dictarray.items(), key=lambda pair: len(pair[0]), reverse=True)

def replace_first(s, subs):
    """Replace the prefix of `s` that first appears in `subs`."""
    for old, new in subs:
        if s.startswith(old):
            # replace takes a count of the number of replacements to do.
            return s.replace(old, new, 1)
    return s

# make a new list by replace_first'ing all the strings.
new_list = [replace_first(s, subs) for s in sampleList]

print new_list 
```

产生：

```
['& This is an item.', '*# This is also an item', '& just another _ item', '*$(@ and this last one'] 
```

在这里，我已经对 dictarray 进行了按摩，以首先订购最长的替换，因此较短的前缀不会排除较长的前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:01:49.473

这里的诀窍是将较长的下划线 ( `__`) 放在`if`条件中，然后将较小的下划线 ()`_`放在`elif`条件中：

```
dic = {
'_':'&',
'__':'*#',
'____':'*$(@'
}
lis=['_ This is an item.','__ This is also an item','_ just another _ item','____ and this last one']
for x in sorted(dic,key=len,reverse=True):
    for i,y in enumerate(lis):
        if y.startswith(x):
            lis[i]=y.replace(x,dic[x])

print(lis) 
```

**输出：**

```
['& This is an item.', '*# This is also an item', '& just another & item', '*$(@ and this last one'] 
```

# actionscript-3 - Flex/BlazeDS：多个同时的 BlazeDS 请求是否会导致问题？

> ID：12361696
> 
> 赞同：1
> 
> 时间：2012-09-11T01:50:47.530
> 
> 标签：actionscript-3, apache-flex, blazeds

我有一个 Flex Web 应用程序，它使用 BlazeDS 与服务器进行单通道端点（非安全）通信。

一切运行良好，我几乎在任何地方都使用 BlazeDS 向服务器和数据库发送和检索数据。现在我正在编写一些新代码来从服务器检索数据，但是服务器必须首先处理这些数据，这需要一些时间（比如 5 到 30 分钟，具体取决于请求）。

到目前为止，我的设计模式一直是向用户显示一个忙碌的光标并禁用主应用程序（Flex 默认情况下会在禁用时模糊应用程序）。这通常在通信完成时持续一两秒。但是，现在通信需要很长时间才能完成，我希望能够让用户继续使用该应用程序，即使来自服务器的进程尚未返回。

所以我想做的不是禁用主应用程序，这样用户就可以在他/她等待数据返回时与之交互。我担心的问题是如果用户在这段时间内使用应用程序向服务器发送另一个进程（例如在第一个进程返回之前）——这会导致问题吗？也就是说，BlazeDS 是否足够聪明，可以知道通道正忙，因此会自动将请求排队？例如，BlazeDS 是否会等到第一个请求返回后再发送第二个或第三个等？

还是我必须以某种方式手动控制此通信以确保它以串行方式发生？如果是这样，是否有任何设计模式来处理这个问题？

或者，BlazeDS 可以在第一个请求返回之前发送并返回第二个请求吗？

非常感谢任何建议。我正在寻找避免用户盯着不可用的应用程序 5 到 30 分钟等待数据返回的方法。繁忙的游标很好，因为它显示数据尚未返回，但特别是禁用的主应用程序（无论它是否模糊）是一个问题。

更新：

这里我说的是同时调用不同的方法，而不是同一个方法。所以如果我有两个方法，我想调用第一个方法，当它等待返回时，调用第二个或第三个方法，在第一个方法返回之前（最终）安全返回。BlazeDS 支持吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:44:02.310

据我所知，blazeDS中没有这样的排队系统。但是您可以配置并发变量：

> 指示如何处理对同一服务的多个调用的值。默认值为多个。允许使用以下值：
> 
> **多个**- 现有请求不会被取消，开发人员负责通过仔细管理事件流来确保返回数据的一致性。这是默认设置。
> 
> **single** - 该方法一次只允许发出一个请求；在请求未完成时发出的其他请求会立即在客户端出现故障，并且不会发送到服务器。
> 
> **last** - 发出请求会导致客户端忽略任何当前未完成请求的结果或错误。只有最近请求的结果或错误才会在客户端上分派。这可能会简化客户端应用程序中的事件处理，但应注意仅在可以安全忽略请求的结果或错误时才使用此模式。

所以使用“single”可以防止用户多次调用同一个方法

另一种解决方案，如果您想对发送到服务器的消息进行更具体的控制，则使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。您无需调用许多方法，而是仅调用一种方法并通过网络发送命令对象。您将有更多工作要做，但如果您有一些可以并行完成的操作，而其他操作则不能

# ios - IOS 企业计划 - 协会可以通过企业计划分发给成员吗

> ID：12361698
> 
> 赞同：1
> 
> 时间：2012-09-11T01:51:13.213
> 
> 标签：ios, mobile, distribution

IOS 企业计划 - 协会可以通过企业计划分发给成员吗

我们有一个家长反对发短信和驾驶协会，并希望仅向我们的会员分发反短信应用程序

如果企业计划不能满足这一需求，那会是什么？

# github - github 学生帐户的存储库在 2 年后会发生什么变化？

> ID：12361700
> 
> 赞同：124
> 
> 时间：2012-09-11T01:51:20.923
> 
> 标签：github

我刚刚使用我的大学电子邮件地址升级到了免费的 github 微型计划。我计划本学期将私人存储库用于一些课程项目，但我想知道在我的免费学生升级到期时，这些存储库在 2 年结束时会发生什么。我假设当您从微型帐户降级到免费帐户时会发生同样的事情。

我的存储库会消失、公开还是只读？我已经搜索了一下，但无法找到答案。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2014-02-06T03:34:41.677

（披露：我在 GitHub 工作）

只要您还是学生，您就有资格享受学术折扣。优惠券到期后，您可以[重新申请](https://education.github.com/discount)学生折扣。

当您重新申请时，请确保您已将[学校签发的电子邮件地址添加](https://github.com/settings/emails)到您的帐户中，这将加快审批流程。

您将在折扣到期之前收到一封通知电子邮件。当折扣到期时，您的帐户将被[锁定](https://help.github.com/articles/unlocking-a-locked-account)，这意味着您将无法访问您的私人存储库。您的私人存储库不会被删除，也不会公开。

当然，如果您有任何问题，您可以随时发送电子邮件至 support@github.com。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T01:57:03.500

两年后，您将不得不开始为私有存储库付费（每月 7 美元），否则您的存储库将在保留期后被删除。

他们会给你 30 天的时间来付款，否则他们将删除存储库。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-11-06T18:09:53.567

您即将到期的教育帐户的时间表如下所示：

*   您将在 Github 中收到一封电子邮件/通知，通知您您的教育优惠券将过期，并要求您：

    *   将您所有的私人回购公开并降级为免费帐户，
    *   添加付款方式，他们将在优惠券到期后开始向您收费，或者
    *   更新您的教育优惠券。
*   时间到了，如果你没有做任何这些，他们会把*你锁*在你的私人回购之外。

**这个锁是什么意思？**

*   你不能以任何方式访问你的回购，即。你甚至无法在 github 中看到你的文件，或者克隆它。

**你可以做些什么来访问它们？**

*   在设置中访问您的每个私人存储库，并将它们公开。这将使您可以访问它们，因此您可以快速克隆或下载副本，然后将其删除。
*   支付高级帐户。
*   更新您的教育优惠券（或任何免费高级帐户的优惠券）。

今天当我想访问我的一个私人仓库时遇到了这个问题。

我的免费教育计划于八月到期。我在 Github 上有一个很大的红色通知栏，告诉我支付 Micro 计划或降级。我不需要我的私人仓库，所以直到今天我才忽略它。

就个人而言，我觉得这个政策很奇怪，因为没有其他服务这样做。如果您停止为 Google Drive 上的额外存储空间付费，第二天您发现一半的文件在您付款之前被隐藏了，那会怎样？

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-07-24T04:47:59.980

## 更新的 2020 年答案

我的学生帐户最近过期，并被要求提供账单详细信息以继续**专业**订阅，现在每月收费 4 美元（之前为 7 美元/月）或降级为免费帐户。

降级到免费帐户仍然可以让我保留和访问我所有的私人存储库（我认为允许的协作者数量更少），同时无法访问这些私人存储库中的 GitHub Pages 和 GitHub Wiki——所以总体来说还不错。[这是我在降级帐户时收到的消息](https://i.stack.imgur.com/DMsTJ.jpg)

Microsoft 最近对其定价、功能和计费结构的更改导致以下功能包含在免费订阅中：

> GitHub 免费用户帐户
> 
> 使用适用于用户帐户的 GitHub Free，您可以在具有完整功能集的无限公共存储库以及具有有限功能集的无限私有存储库上与无限的协作者合作。
> 
> 使用 GitHub Free，您的用户帐户包括：
> 
> *   GitHub 社区支持
> *   GitHub Dependabot 警报
> *   两因素身份验证强制执行
> *   2,000 分钟 GitHub Actions
> *   500MB GitHub 包存储空间

专业帐户包括以下功能：

> GitHub 专业版
> 
> 除了 GitHub Free 为用户帐户提供的功能外，GitHub Pro 还包括：
> 
> *   通过电子邮件提供 GitHub 支持
> *   3,000 分钟 GitHub Actions
> *   2GB GitHub 包存储
> *   私有存储库中的高级工具和见解：
>     *   所需的拉取请求审阅者
>     *   多个拉取请求审阅者
>     *   自动链接参考
>     *   GitHub 页面
>     *   维基
>     *   受保护的分支
>     *   代码所有者
>     *   存储库洞察图：脉冲、贡献者、流量、提交、代码频率、网络和分叉

**来源：** [https ://docs.github.com/en/github/getting-started-with-github/githubs-products#github-pro](https://docs.github.com/en/github/getting-started-with-github/githubs-products#github-pro)

# javascript - JavaScript，JQuery。需要帮助从我的 JSON 中获取“名称”

> ID：12361701
> 
> 赞同：0
> 
> 时间：2012-09-11T01:51:28.600
> 
> 标签：javascript, jquery, json

我有 JSON，看起来像这样：

# /主题/创建/示例

```
[
    {
        "user_id": 1,
        "name": "sample",
        "created_by": "Sample96",
        "created_time": "2012-09-10T20:44:11",
        "num_of_followers": 1,
        "id": 5
    }
] 
```

现在在我的 JS 中，我想要这样的东西：

```
function fnClickAddRow(data) {
        $("#s").append(data['name']); //it doesn't work
} 
```

Html 看起来像这样：

```
<p id="s">Subject : </p> 
```

更新：

# JS

```
$(document).ready(function (){
    add_subject_to_subjects_list();
    subject_description();
    data_tables();
});

/* DataTables */
function data_tables() {
    var oTable = $('.book-grid').dataTable({
    });
}

function fnClickAddRow(data) {
    var result = data[0].user_id;
    $("#s").append(result);
}

/* PERSONAL_PAGE.HTML */

function add_subject_to_subjects_list() {
    show_subjects_list();
    $("#btn-create-subject").click(function() {
        var value = $("#id_name").val();
        var link = "/subject/create/"+value;
        $.post(link, function(data) {
            show_subjects_list();
            fnClickAddRow(data);
        });
    });
}
function show_subjects_list() {
    $("#list").text('');
    $.get("/subject/list/", function(data){
        for( var i=0; i<data.length; i++) {
            var subject = data[i]['name'];
            var followers = data[i]['num_of_followers']
        //  var link = "/user/"+username+"/subject/"+subject;
            $("#list")
            .append('<li>'+subject+'<span id="followers"> ['+followers+'] </span></li><br>');
        };
    }, 'json');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T01:52:52.027

你想要的是`data[0].name`或`data[0]['name']`（两者相等，但`.name`更常见的方式） - 看到`[]`你的对象周围？这将它包装在一个数组中（它只包含一个元素，例如具有`name`属性的对象）。

# php - netbeans 和 xdebug 与 laravel

> ID：12361706
> 
> 赞同：4
> 
> 时间：2012-09-11T01:52:32.603
> 
> 标签：php, netbeans, xdebug, laravel

有没有人在 netbeans 让 xdebug 与 laravel 一起工作方面取得了任何成功？我不确定如何使用 laravel 配置它。现在我有以下内容：

在项目属性-> 运行配置下，我有：

```
 Project url: http://localhost/m1/

 Index file: public/index.php

 Arguments: user/bob/task/1 
```

但是，xdebug 似乎永远不会超过 public/index.php 文件。

提前致谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-21T09:24:01.207

在 Properties -> Sources 下，您还需要设置正确的 Web 根目录：

`Web Root: public`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:30:33.470

Netbeans 和 xdebug 与 Laravel 一起工作没有任何问题。您是否有其他使用 xdebug 运行的工作项目？或者这是你第一次尝试？

# php - 如何在序列号中搜索模式？

> ID：12361712
> 
> 赞同：0
> 
> 时间：2012-09-11T01:53:19.390
> 
> 标签：php, mysql, function, pdo, preg-match

我有一个包含以下内容的数据库：

```
pnid     partnumber       desc       code
====     ==========       ====       ====
1        123-12345        hdd        CMYK 
```

因此，该`code`字段包含我要查找的序列号的模式。我想做的是我想从我的数据库中获取所有代码，然后检查用户输入是否与代码匹配并显示匹配代码的部件号。

所以说我的输入是`ECMYK123456`函数将返回`123-12345`。

我真的迷路了。我只有基本的 PDO 连接。

```
<?php
function checkPattern($inputString) {
    $dbuser = "root";
    $dbpass = "123456";
    $dbconn = new PDO('mysql:host=localhost;dbname=3parsfdb',$dbuser,$dbpass);  

    $dbconn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $dbconn->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $query = $dbconn->query("SELECT * FROM `partnumber` WHERE '%$inputString%' LIKE `ctcode`  LIMIT 1");
    foreach ($query as $row) {
        return $row['partnumber'];
    }
}

echo checkPattern("ECMYK12345");
?> 
```

当我尝试该功能时，它什么也不返回。代码有什么问题？

最终代码：

```
<?php
function checkPattern($inputString) {
    $dbuser = "root";
    $dbpass = "123456";
    $dbconn = new PDO('mysql:host=localhost;dbname=3parsfdb',$dbuser,$dbpass);  

    $dbconn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $dbconn->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $query = $dbconn->query("SELECT * FROM `partnumber` WHERE '$inputString' like concat('%', ctcode, '%') LIMIT 1");
    foreach ($query as $row) {
        return $row['partnumber'];
    }
}

echo checkPattern("ECMYK12345");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:59:29.273

呻吟：

```
 SELECT *
 FROM partnumber
 WHERE "ECMYK123456" like concat('%', code, '%') 
```

请注意，它不能在代码上使用索引。

# clojure - 是否可以为 deftype 定义构造函数？

> ID：12361713
> 
> 赞同：2
> 
> 时间：2012-09-11T01:53:21.963
> 
> 标签：clojure

deftype 的构造函数的一个简单案例

```
(deftype Atom [v]
    ...) 
```

我希望 v 被包裹在一个原子中，这样

```
@(.v (Atom. 1)) => 1 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T05:41:22.593

没有。如果您真的想采用构造函数的OO方式，那么您将需要使用[gen-class](http://clojuredocs.org/clojure_core/clojure.core/gen-class)。

在函数世界中，使用函数非常简单。

```
(defn createAtom [v] (Atom. (atom v)))
@(.v (createAtom 1)) => 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:44:43.007

之前问过同样的问题，请看这个：[Add constructor to deftype created class](https://stackoverflow.com/questions/6515162/add-constructor-to-deftype-created-class)

# git - Git pull 错误地优先处理旧提交

> ID：12361716
> 
> 赞同：1
> 
> 时间：2012-09-11T01:54:29.777
> 
> 标签：git, merge

在我的办公室，我们正在过渡到 Git，目前我正在使用 Git-SVN 执行以下工作流程：

```
 git svn rebase 
 git checkout -B FEATURE_NUMBER 
```

*做工作，同时在本地提交*

```
git checkout master
git svn rebase
git merge --squash FEATURE_NUMBER 
```

*修复任何冲突，运行测试等*

```
git commit -a -m "Actual Commit Message for everyone else"
git svn dcommit 
```

这很好用，但我也在办公室之间旅行并使用不同的计算机，所以如果我还没有完成，我一直在使用私人 GitHub 存储库来推动我的分支。

其工作流程是：

```
 git svn rebase 
 git checkout -B FEATURE_NUMBER 
```

*做工作，同时在本地提交*

*现在我想搬办公室*

git push origin FEATURE_NUMBER

*去新办公室*

```
 git svn rebase 
 git checkout -B FEATURE_NUMBER
 git pull origin FEATURE_NUMBER 
```

但是，这样做的问题是会发生大量冲突。似乎在想，在 Github 上，自从我最初在总部重新定位以来，我的团队所做的所有更改都已撤消。基本上，它优先考虑 GitHub 上的旧提交（即，在变基之前），而不是来自 SVN 服务器的新提交。

有什么方法可以让它很好地合并吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:45:24.260

您是否曾经在`git svn rebase`功能分支上进行过一段时间？请注意，这`git svn rebase`是一个真正的变基，即使用不同的父级创建新提交。另请注意，`git pull`自动创建合并。冲突是由于尝试合并`FEATURE_NUMBER`在树中两个不同位置的不同提交中发现的相同更改（在您移动办公室之前的更改）的结果。

为避免此问题，您可以避免拉取，而是请求`git fetch`. 它只是将新的提交提取到`origin/FEATURE_NUMBER`中，因此您可以随心所欲地使用它们，例如：

```
# fetch new work from GitHub into origin/FEATURE_BRANCH
git fetch origin
# reset FEATURE_NUMBER to the latest GitHub
git checkout -B FEATURE_NUMBER origin/FEATURE_NUMBER
# reparent those commits on top of the latest svn
git svn rebase 
```

# flash - 选择基于 Stage3D 的 2D 框架

> ID：12361717
> 
> 赞同：0
> 
> 时间：2012-09-11T01:54:33.953
> 
> 标签：flash, frameworks, line, primitive, stage3d

我想使用 Stage3D 来加速我的 2D 图形渲染（并且可能添加一两个着色器）。

我现在使用 Flixel；除了不使用 Stage3D 之外，Flixel 提供了几乎所有我想要的游戏框架。所以，我不一定需要一个成熟的游戏框架：*我只需要这个框架为我做渲染部分*。

我找到了一些潜在的候选者（ND2D、Starling、Genome2D 等），但没有使用它们的经验，我想我可以先在这里问一下。我正在寻找的是：

*   完全开源（我经常修改或至少查看我所包含的代码）并可在商业项目中免费使用
*   绘制图元的能力；在这里，我希望“能力”最好是 draw_line(int, int, int, ...) ：D
*   无需直接访问 Stage3D 即可处理 AGAL 着色器（更简单 = 更好，例如我喜欢 ND2D 的处理方式）

如果我要求太多，你能给我一些关于 ND2D 和 Starling 的快速利弊吗？关于这个主题的在线讨论似乎已经过时并且太笼统而没有用处。我正在考虑使用 ND2D，因为我已经玩过一段时间了，而 Starling 因为它似乎更受欢迎。社区规模是一个因素，因为我可能会寻找教程和示例。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:57:20.393

*   如果您想要类似于 Flixel 的东西，Axel 可能适合您。不过，我无法让它在 Flash Builder 4.7 beta 和 AIR 3.4 下运行。[http://axgl.org/](http://axgl.org/)
*   Starling 现在得到 Adob​​e 的正式支持。在 Starling 之上还有另外两个更高级别的游戏框架：
    *   柑橘引擎 - [http://citrusengine.com/](http://citrusengine.com/)
    *   八哥朋克 - [https://github.com/asaia/StarlingPunk](https://github.com/asaia/StarlingPunk)
*   ND2D看似稳定，但已停止开发
*   Genome2D 似乎不错，但我不喜欢他们缺乏专门的网站。

# c++ - “%p 格式说明符的参数类型是“void*”是什么意思？

> ID：12361719
> 
> 赞同：2
> 
> 时间：2012-09-11T01:54:58.247
> 
> 标签：c++, c

到目前为止，为了打印出我拥有的指针（地址）的值，（正确或错误地）使用了`%u`格式说明符。在这方面，说明`%p`符是什么意思？它是否打印出唯一`void*`类型的指针的值？我试过这个`%p`说明符来打印一个整数指针，看起来输出是一个十六进制值。使用`%p`打印整数或字符指针值是否错误？请告诉我有关`%p`格式说明符的一些信息。网络资源只让我感到困惑。

我从以下链接中获取了问题中的陈述：

[http://www.macs.hw.ac.uk/~rjp/Coursewww/Cwww/format.html](http://www.macs.hw.ac.uk/~rjp/Coursewww/Cwww/format.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T02:20:08.273

格式“`%u`有效”只要`sizeof(void *) == sizeof(unsigned)`，这通常适用于 32 位代码，但不适用于 64 位代码。如果您想保持对格式的控制（您无法控制 的外观`%p`），那么您将希望`<inttypes.h>`从 C99 开始使用：

```
printf("0x%.8" PRIXPTR "\n", (uintptr_t)&object); 
```

宏 PRIXPTR 为类型值`uintptr_t`和转换说明符提供正确的长度修饰符`X`。该类型`uintptr_t`是一个足以容纳任何指针的整数类型。这`.8`可确保您打印至少 8 个十六进制数字，但如果地址是 64 位数量并且在值的前导（最高有效）32 位中设置了位，则更多。

严格来说，如果你要使用`%p`，那么（a）你应该确保堆栈上的值实际上是 a`void *`通过强制转换（因为`fprintf()`et al 是可变参数函数并且转换不会自动发生），并且（b）有该格式没有跨平台标准。`0x`它通常相当于没有前缀的小写十六进制；一些系统会生成`0x`前缀。在实践中，您通常可以安全地通过`int *`.

理论上，在标准 C 中，没有办法打印函数指针。不能保证函数指针与数据指针的大小相同。幸运的是，POSIX 介入并声明在 POSIX 系统上，函数指针的大小应与数据指针的大小相同。因此，至少在 Unix 系统上，事实上在 Windows 系统上，打印数据指针和函数指针是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T01:57:10.657

是的，它用于打印指针保存的地址。它适用于任何指针类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T02:46:36.597

`void*`意思是：“指向内存中某处的指针，但我不知道它指向的是什么类型的内存。” 这就是说明`%p`符 is的原因`void*`，因为您只关心内存地址的*类型。*它旨在用于打印地址。另一方面，`%u`期望数据为`unsigned int`，虽然这可能在实践中有效，但有可能`void*`和`unsigned int`大小不同等，因此不应使用它。此外，正如另一个答案中提到的，即使所有指针都可以转换为`void*`，`printf`并且可变参数函数系列在技术上不执行这种转换，所以`void*`应该进行转换：

```
printf("%p", (void*)&x); 
```

# objective-c - NSNumber 字面量的比较

> ID：12361722
> 
> 赞同：6
> 
> 时间：2012-09-11T01:55:14.753
> 
> 标签：objective-c, comparison, objective-c-literals

我真的很喜欢 Objective-C 中的新文字。我想知道新增加的内容是否有更好的方法来比较数字。

例如，如果我想比较`a`and `b`：

```
a = @1;
b = @2; 
```

是像这样比较它们的唯一方法：

```
[a intValue] > [b intValue] 
```

还是有更好、更优雅的解决方案？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T01:59:57.277

对于相等性检查，您可以使用`isEqualToNumber`which 检查`id`or 内容是否相等（后者使用`compare`）：

```
if ([a isEqualToNumber:b])                  // if a == b 
```

不知道*为什么*他们也没有实现`isGreaterThanNumber`和`isLessThanNumber`方便的方法（可能`>=`也`<=`同样如此），因为`compare`下面的方法看起来有点笨拙。

对于不等式检查，只需`compare`直接使用（您也可以对等式执行此操作，从下面的第一个可以看出）：

```
if ([a compare:b] == NSOrderedSame)         // if (a == b)
if ([a compare:b] == NSOrderedAscending)    // if (a <  b)
if ([a compare:b] == NSOrderedDescending)   // if (a >  b)

if ([a compare:b] != NSOrderedSame)         // if (a != b)
if ([a compare:b] != NSOrderedAscending)    // if (a >= b)
if ([a compare:b] != NSOrderedSescending)   // if (a <= b) 
```

详细信息可以在[NSNumber 类文档页面上](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnumber_Class/Reference/Reference.html)找到。

* * *

请记住，没有什么可以阻止您创建自己的*辅助*函数，例如，允许以下代码：

```
if (nsnComp1 (a, ">=", b)) ... // returns true/false (yes/no) 
```

或者：

```
if (nsnComp2 (a, b) >= 0)  ... // returns -1/0/+1 
```

即使它更少 Objective-C 而更多 C :-) 这取决于您对“优雅”的定义是否主要受效率或可读性的约束。这是否比您的`intValue`选择更可取是您需要自己做出的决定。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T01:57:15.907

`NSNumber`实现`-compare:`（与许多其他类一样）。所以你可以说

```
switch ([a compare:b]) {
    case NSOrderedAscending: // a < b
        // blah blah
        break;
    case NSOrderedSame: // a == b
        // blah blah
        break;
    case NSOrderedDescending: // a > b
        // blah blah
        break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T02:00:02.100

NSNumber 也有一个 isEqualToNumber：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-08T10:23:50.537

这是检查哪个效果好的代码片段：

```
NSLog(@"%d", number1 == number2);
NSLog(@"%d", [number1 isEqual:number2]);
NSLog(@"%d", [number1 isEqualToNumber:number2]); 
```

**输出：**

```
1
1
1 
```

**结论：**

要了解比较，您需要了解实例分配。NSNumber 在内部实现了分配对象的缓存，并使用值将现有对象映射到任何新创建的对象。如果发现现有的 NSNumber 对象持有值 1，则不会创建新的 NSNumber 实例。

# windows-8 - API 失败 Sqlite

> ID：12361723
> 
> 赞同：2
> 
> 时间：2012-09-11T01:55:18.873
> 
> 标签：windows-8, microsoft-metro

我在我的应用程序上运行了 Windows 8 应用程序认证工具包，它说它会因为 Sqllite 而失败。我是否错误地引用了代码或者我可以忽略这个问题？这是回应：

> 未修复时的影响：使用不属于 Windows 应用商店应用程序的 Windows SDK 的 API 违反了 Windows 应用商店认证要求。
> 
> *   此应用程序类型不支持API`__CppXcptFilter`输入。调用此 API。`msvcr110.dll``sqlite3.dll`
> *   此应用程序类型不支持API`__clean_type_info_names_internal`输入。调用此 API。`msvcr110.dll``sqlite3.dll`
> *   此应用程序类型不支持API`__crtTerminateProcess`输入。调用此 API。`msvcr110.dll``sqlite3.dll`
> *   此应用程序类型不支持API`__crtUnhandledException`输入。调用此 API。`msvcr110.dll``sqlite3.dll`

我正在引用这个文件：

```
SQLite for Windows Runtime
SQLite.WinRT, Version=3.7.14
C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs\SQLite.WinRT\3.7.14\ 
```

在我使用 XAML 的 Windows 8 Metro 应用程序中。

以下是我的参考资料：

地铁应用：

![在此处输入图像描述](../Images/ba07e659ba0a7b5be65934e439a7719f.png)

类库

![在此处输入图像描述](../Images/dc55347cd455aeddc234dc907dc99760.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T02:11:26.663

I built the software in release mode. I then deployed it to the simulator and it passed. When you run the Windows App Certification Kit, you must put the app in release mode and deploy to the simulator. Otherwise, the system uses the last build. In that case, it was my debug version.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T03:40:52.603

您需要添加对 Microsoft Visual C++ 运行时包的引用。

这是另一个扩展 SDK，就像 SQLite for Windows Runtime Extensions SDK 一样，可以像添加对 SQLite 的引用一样添加引用：在引用管理器对话框中，您可以在 Windows -> 扩展下找到它。

Windows 运行时 SDK 的 SQLite 依赖于 Microsoft Visual C++ 运行时包（所有本机 SDK 和组件都需要 Visual C++ 运行时包）。如果在参考管理器中突出显示适用于 Windows 运行时 SDK 的 SQLite，您将在对话框的右侧看到 Visual C++ 运行时包被列为依赖项（它被列为“Microsoft.VCLibs，版本=11.0”这是相当不幸的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:38:54.307

您可以通过添加以下内容来编辑清单 XML 文件

```
<Dependencies><PackageDependency Name="Microsoft.VCLibs.110.00" MinVersion="11.0.0.0" /></Dependencies> 
```

下次您的应用将通过认证

# javascript - 计算 CSS3 缩放框在另一个框内的最高位置

> ID：12361725
> 
> 赞同：0
> 
> 时间：2012-09-11T01:56:12.787
> 
> 标签：javascript, jquery, css, position, scale

这是一个棘手的问题。

我需要找到一种方法来计算正确的位置，以将一个盒子与顶部的另一个盒子对齐。但是，内框内有 CSS3 缩放的内容（比例因子是已知的），因此基本的基于顶部 (0px) 的方法将不起作用。

由于这实际上无法正确描述，请在此处查看我的 jsFiddle：

[http://jsfiddle.net/gPyqS/a](http://jsfiddle.net/gPyqS/a)

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:39:03.907

你将不得不在这里弄脏你的数学手。基本方法将是：

1.  获取元素的偏移量
2.  获取元素的比例因子
3.  获取元素的高度
4.  获取元素变换原点的Y分量
5.  考虑 -(box height / 2)`0`的变换原点为 ，+(box height / 2) 的变换原点为`1`。鉴于这些约束，使用当前 Y 原点执行线性插值以确定要应用于顶部边缘的比例因子。
6.  将 (box height / 2) 乘以您在步骤 5 中得出的值，然后从您在步骤 1 中获得的 Y 偏移中减去它。这是框顶部边缘的视觉偏移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:12:21.897

用变换指定变换原点：

```
transform-origin: 0 0; 
-ms-transform-origin: 0 0; 
-webkit-transform-origin: 0 0;  
-moz-transform-origin: 0 0;  
-o-transform-origin: 0 0; 
```

[小提琴更新](http://jsfiddle.net/gPyqS/1/ "小提琴更新")

[W3C：变换原点](http://www.w3schools.com/cssref/css3_pr_transform-origin.asp "W3C 变换起源")

# php - 比较mysql和php之间的日期

> ID：12361727
> 
> 赞同：1
> 
> 时间：2012-09-11T01:56:25.753
> 
> 标签：php, mysql

我猜我遇到了一个错误，数据库将日期格式记录为 YYYY-MM-DD，下表是：-

![桌子](../Images/04503786770902068e72f4cc1358ad5e.png)

第一个表是基金，第二个是基金历史，你可以看到 LibraIncomeExtra Fund 的日期相同，但它仍然显示星星。以下是我的编码：-

```
<?php

$result = mysql_query("SELECT * FROM funds");
$numrows = mysql_num_rows($result);
$getdate = date('y-m-j');
while($row = mysql_fetch_array($result)) 
  {

echo "<tr>";
echo "<td>";
echo "<center>";

if ($row['nav'] != $row['oldnav'])
{

if ($row['date_update'] != $getdate)
{
echo "" .$row['fundname']. "**";
$latestupdate = $row['date_update'];
}

}
else
{
    echo $row['fundname'];

}

echo "</center>";
echo "</td>";
echo "<td>";
echo"<center>";
echo $row['nav'];
echo "</center>";
echo "</td>";
echo "</tr>";

  }
?> 
```

任何人都可以解释这个吗？我知道不推荐使用 mysql 扩展，但是这种编码是很久以前编写的，所以我不希望仅通过更改 mysqli 扩展来重做整个系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T01:58:58.590

我认为你的问题是你如何声明 $getdate

试试这个： $getdate = date('Ymd');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T03:25:38.957

我设法通过使用以下编码自己解决了这个问题：

```
<?php

$result = mysql_query("SELECT * FROM funds");
$numrows = mysql_num_rows($result);
$getdate = date('Y-m-d');

while($row = mysql_fetch_array($result)) 
  {

echo "<tr>";
echo "<td>";
echo "<center>";

if ($row['date_update'] == $getdate)
{
    echo "" .$row['fundname']. "**";
    $latestupdate = $row['date_update'];
}

else
{
    echo $row['fundname'];
}

echo "</center>";
echo "</td>";
echo "<td>";
echo"<center>";
echo $row['nav'];
echo "</center>";
echo "</td>";
echo "</tr>";

 }
?> 
```

它显示星号的原因是因为正在检查对每一行使用while，当你参考我之前的代码时，它满足两个语句，这要求nav和old nav不同，根据表格，这是正确的，接下来是表资金数据库中的日期和 $getdate 上的当前日期，这两者也是不同的，导致两个语句都为真并执行 if 语句编码。在 if 条件下看不到错误对我来说有点愚蠢。感谢 firestream 提供了 $getdate 解决方案。我犯了一个错误，fundhistory 表不涉及此错误。

这是一个棘手的问题：D 干杯！

# java - 在 Contact Listener 上使用 BeginContact 时，我的 WorldManifold 总是在所有点上返回 0,0... 为什么？

> ID：12361730
> 
> 赞同：3
> 
> 时间：2012-09-11T01:56:57.750
> 
> 标签：java, box2d, game-engine, libgdx

我正在开发一款飞机战斗机游戏，但在计算飞行路径时遇到了一些问题......

当平面传感器与雷达中的某个物体发生碰撞时，他应该转向某个方向以避免它，但我无法这样做，因为我无法找到碰撞的确切位置。

我正在使用这个（仅相关部分）：

```
public void beginContact(Contact contact) 
{
    Fixture f1 = contact.getFixtureA();
    Fixture f2 = contact.getFixtureB();

    int numpoints = contact.getWorldManifold().getNumberOfContactPoints();
    WorldManifold wm = contact.getWorldManifold();
    Vector2 point0 = new Vector2(wm.getPoints()[0].x, wm.getPoints()[0].y);

    // ...

} 
```

**var point0 始终具有值 (0,0) 并且 worldManifold.numContactPoints 始终 = 0。为什么？**

它正在碰撞传感器和静态物体。

与这个 tut ( [http://www.iforce2d.net/b2dtut/collision-anatomy](http://www.iforce2d.net/b2dtut/collision-anatomy) ) 的唯一区别是我使用`libgdx`,`tileAtlas`和`tileMapRenderer`来构建世界，因此所有静态装置都连接到同一个主体上。

抱歉，如果这是一个菜鸟问题，几天后我找不到解决方案。

还张贴在这里：[http ://badlogicgames.com/forum/viewtopic.php?f=11&t=5417#p25961](http://badlogicgames.com/forum/viewtopic.php?f=11&t=5417#p25961)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T20:20:06.197

与传感器夹具的碰撞不会引起任何碰撞响应，因此歧管中没有点，因为引擎不需要计算它们。

如果您需要碰撞点而没有任何碰撞响应，您可以更改传感器状态，使两个灯具都不是传感器，然后在您的接触侦听器的 BeginContact 和 PreSolve 函数中，您可以执行 contact->SetEnabled(false) 以便没有碰撞发生响应。

# php - 优化长时间运行的 SELECT DISTINCT 查询以及在查询中何处使用“解释”？

> ID：12361736
> 
> 赞同：1
> 
> 时间：2012-09-11T01:57:25.330
> 
> 标签：php, mysql

我在下面的代码中到底在哪里使用 EXPLAIN 并且任何人都可以建议如何加速/优化此代码（对于 jos_users 表中的 400 万行 Jobseeker 表）

```
$query =  " SELECT DISTINCT a.*,b.name,dl.id id_deg,dl.degree_level,
               (SELECT r.hits FROM #__jbjobs_resume_view r WHERE r.jseeker_id=a.user_id AND r.employer_id=$user->id) AS hits, 
               (SELECT featured FROM #__jbjobs_resume WHERE is_active='y' AND featured=1 AND featured_expire > NOW() AND jseeker_id=a.user_id) as featuredres FROM #__jbjobs_jobseeker a".
              " LEFT JOIN #__users b ON a.user_id=b.id ".
              " LEFT JOIN #__jbjobs_degree_level dl ON a.id_degree_level = dl.id".
              " LEFT JOIN #__jbjobs_custom_field_value c ON c.userid=a.user_id".
              " WHERE ".$where."AND b.block='0'".
              " ORDER BY featuredres DESC"; 
```

![结构1](../Images/52c585fe39873534b37a8763a8cdaff7.png) ![结构2](../Images/1e204df28dc90d71b5f0cad6a463726e.png)![结构3](../Images/e5025f3f535ae88a70ce69563a638047.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T04:38:20.387

resume_view.hits 和 resume.featured 只会返回 0 或 1 行？如果是这样，您应该能够通过 LEFT JOIN 完成所有操作。如果有零行，则该值将为 NULL。

```
SELECT DISTINCT a.*,b.name,dl.id id_deg,dl.degree_level, 
      r.hits,  
      r2.featured AS featuredres
 FROM #__jbjobs_jobseeker a 
    LEFT JOIN #__users b ON a.user_id=b.id  
    LEFT JOIN #__jbjobs_degree_level dl ON a.id_degree_level = dl.id 
    LEFT JOIN #__jbjobs_custom_field_value c ON c.userid=a.user_id 

    LEFT JOIN #__jbjobs_resume_view r ON r.jseeker_id=a.user_id AND r.employer_id = $user_id
    LEFT JOIN #__jbjobs_resume r2 ON r2.is_active='y' AND r2.featured=1 AND r2.featured_expire > NOW() AND r2.jseeker_id=a.user_id

    WHERE $where AND b.block='0' 
    ORDER BY featuredres DESC 
```

# java - MQSeries - 允许新接收器接管连接的任何设置？

> ID：12361739
> 
> 赞同：3
> 
> 时间：2012-09-11T01:57:43.917
> 
> 标签：java, ibm-mq

我们知道可以配置 MQ 服务器，如果已经有接收器连接到同一个 MQ 队列，则新接收器将无法连接到 MQ 服务器。错误将如下所示：

原因：com.ibm.mq.MQException：JMSCMQ0001：WebSphere MQ 调用失败，compcode '2' ('MQCC_FAILED') 原因 '2042' ('MQRC_OBJECT_IN_USE')

但是有没有办法配置服务器或客户端以允许新的接收器连接到 MQ 服务器并断开任何现有的接收器连接？

以下是目前我的接收器如何连接到服务器。我想知道是否可以对 setIntProperty 做些什么。

```
cf = new MQQueueConnectionFactory();
cf.setHostName(mqHost);
cf.setPort(mqPort);
cf.setIntProperty(WMQConstants.WMQ_CONNECTION_MODE, WMQConstants.WMQ_CM_CLIENT);
cf.setQueueManager(mqQueueManager);
cf.setChannel(mqChannel);

conn = (MQQueueConnection) cf.createQueueConnection();
session = (MQQueueSession) conn.createQueueSession(false, Session.CLIENT_ACKNOWLEDGE);
queue = (MQQueue) session.createQueue(mqQueue);
receiver = (MQQueueReceiver) session.createReceiver(queue); 
```

谢谢！

格里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:28:32.287

好的，您在这里混合了不同的概念。您的应用程序正在使用 CLNTCONN 通道连接到 QMgr 的 SVRCONN 通道。Yopu 可以在 SVRCONN 通道上拥有内存和系统资源允许的尽可能多的连接。连接不是问题。

'2042' ('MQRC_OBJECT_IN_USE') 表示程序正在获得对队列的独占访问权。对此有两个修复：

1.  不要使用对队列的独占访问。检查[`DEFSOPT`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp)队列的值是否设置为`EXCL`或`SHARED`。如果您需要它是可共享的，请确保队列设置反映了这一点。
2.  如果您需要队列保持独占（例如，因为消息依赖于序列），请在尝试新连接之前停止前一个连接。当程序没有正常关闭连接时，孤立的通道代理会保持连接的队列处于打开状态。最终代理超时并且任何独占输入队列再次变得可用。如果节目离开孤立频道，请修复节目。作为短期措施，您可以手动停止孤立通道以释放输入队列上的锁定。

# php - php 文件 - 通过标签将 html 内容放入数组中

> ID：12361743
> 
> 赞同：0
> 
> 时间：2012-09-11T01:58:39.287
> 
> 标签：php, arrays, file, file-get-contents

* * *

**更新：此代码到目前为止有效。还在吐槽。**

```
$trimmed = file('http://www.edvizenor.com/mercy/love/dm8.php');

foreach ($trimmed as $line_num => $line) 
{

if(preg_match("/<td class=\"num\">/",  $trimmed[$line_num], $matches))

  {   
 $num++;
  }

  $Content[$num] .= $trimmed[$line_num];

}

// Example array! 
echo $Content[6]; 
```

////

## 结束更新

* * *

我正在尝试使用 php 将表格内容放入数组中。我想将每个数字之后的所有段落都放入一个数组中。

这是网址：[http ://edvizenor.com/mercy/love/dm8.php](http://edvizenor.com/mercy/love/dm8.php)

我需要将每个段落编号的文本内容以及段落编号也放入一个数组中。一旦我有了它，我想将它们保存在一个文件夹中，并保存到一个以段落编号命名的 txt 文件中。

例如，在我将内容放入正确的数组之后，如果我想调用第 #832 段，那么我会做这样的事情：

```
$par = file_get_contents("353.txt"); 
// Need code to get only number
echo $num;
echo "<br>";
echo $par;

// should echo out:
353 
When Mother left for the chapel and I stayed to set the room in order,
I heard these words: Tell all the sisters that I demand that they live
in the spirit of faith towards the superiors at this present time. I 
begged my confessor to release me from this duty. 
```

我想过将整个内容放入一个字符串并“爆炸”；

```
$Content = file_get_contents("http://edvizenor.com/mercy/love/dm8.php");
$ContentArray = explode("<td class=\"num\">", $Content); 
```

但这变得越来越复杂。所以我停止了它。

有关执行此操作的最佳方法的任何想法。我一共有1868个段落和内容。所以复制和粘贴将是很多工作。值得庆幸的是，所有的 html 都是一样的，所以我应该能够找到一个模式并相应地做我想做的事情。但我想不通，所以我求助于 StackOverflow 上的聪明人 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:28:58.597

这个想法是将url的内容抓取到一个变量中，然后使用domxpath对其进行查询并将其循环到数组中。

```
$dom = new DOMDocument();
@$dom -> loadHTML($html);
$xpath = new DOMXPath($dom);

$nums = $xpath->query("//td[@class='num']");
$paragraphs = $xpath->query("//td[@class='num']/following::td[1]");

for($j = 0; $j < $nums->length; $j++){
    $num = $nums->item($j)->nodeValue;
    $para = $paragraphs->item($j)->nodeValue;

    $para_array[$num] = $para;
} 
```

这是示例结果。 [http://randtest.site11.com/](http://randtest.site11.com/)

# php - 如何将 tmp_file 从 Uploadify 发送到其他 PHP 页面

> ID：12361746
> 
> 赞同：0
> 
> 时间：2012-09-11T01:58:57.420
> 
> 标签：php, jquery, uploadify

我正在制作一个脚本来将图像文件上传到许多专辑之一（动态）。但我卡在最后，无法检索 tmp_file（上传的文件）将其移动到相册。我正在使用uploadify v2.1.4

这是我的脚本。这是我的 javascript 上传表单。

```
 $(document).ready(function(){
     //aleart('I am Ready!');
     $("#file_upload").uploadify({
       'uploader': 'upload/uploadify.swf',
       'cancelImg': 'upload/cancel.png',
       'auto': false,
       'multi' :true,
       'folder': 'uploads',**strong text**
       'method'  : 'post',
       'queueSizeLimit' : 10,
       'onQueueFull' : function(event, queueSizeLimit){
        alert(" You can upload " + queueSizeLimit + " files at once");
        return false;
       },
        'onComplete': function(event, ID, fileObj, response, data) {
          var album_id = $("#album_id option:selected").val();

         $.post("uploadify.php", { "name": fileObj.name, "tmp_name": fileObj.tmp_name, "path": fileObj.filePath, "size": fileObj.size, "album_id":album_id}, function(info){
            alert(info);
            });
       }
            });
            });

  </script>
  </head>

  <body>
  <form method="post"  action=""  enctype="multipart/form-data">
  <input type="file" name="file_upload" id="file_upload" />
  <select id="album_id" name="album_id">
  <?php foreach ($albums as $album) {
        echo '<option value="', $album['id'], '">', $album['name'],'</option>';
        } ?>
  </select>
   <a href="javascript:$('#file_upload').uploadifyUpload();">Upload File</a>

  </form>
  </body>
  </html> 
```

在我的uploadify.php 上，当我回显`$image_temp = $_POST['tmp_name'];`它没有给我任何结果但它为我通过POST 发送的所有其他字段提供了正确的输出。因此，最后我卡住了，没有图像文件可以移动专辑！！请提供指导。我正在使用uploadify.php 在数据库中插入数据并将图像从临时文件夹移动到相册文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T04:26:56.550

你把两个脚本弄混了。"tmp_name" 在 PHP 中属于 $_FILES，而不是 uploadify 中的文件对象。

您拥有的脚本实际上并未上传文件；您对 uploadify.php 的调用只是通知文件已完成。

实际的文件接收器在“脚本”参数中指定：

```
 $("#file_upload").uploadify({ 
   'uploader': 'upload/uploadify.swf', 
   'script': 'upload/uploadify.php',     //-- This bit is where the file gets uploaded to
   'cancelImg': 'upload/cancel.png', 
   'auto': false, 
   'multi' :true, 
```

.

然后检查'upload/uploadify.php' 中的$_FILES 是否有'tmp_name' 等 - 这是你的文件所在的位置。

# asp.net-mvc-4 - 包 id="DataAnnotationsExtensions.MVC3" 版本="1.1.0.0" targetFramework="net45"

> ID：12361748
> 
> 赞同：1
> 
> 时间：2012-09-11T01:59:14.000
> 
> 标签：asp.net-mvc-4, data-annotations

我在 MVC 4 中遇到上述包的问题。即使按下按钮发布数据后验证也不会触发。唯一触发的是来自 DataAnnotationsExtensions 命名空间的那些，其中仅在我尝试提交数据后才包含 Required 和 Email 属性。

下面是我用于 LogOnModel 的代码，它在 MVC 3 下运行良好：

```
public class LogOnModel 
    { 
        [Required(ErrorMessageResourceType = typeof(YeagerTechResources.Resources), ErrorMessageResourceName = "Required")] 
        [StringLength(50, ErrorMessageResourceType = typeof(YeagerTechResources.Resources), ErrorMessageResourceName = "MinLength6")] 
        [Display(Name = "Username", ResourceType = typeof(YeagerTechResources.Resources))] 
        public string UserName { get; set; } 

        [Required(ErrorMessageResourceType = typeof(YeagerTechResources.Resources), ErrorMessageResourceName = "Required")] 
        [DataType(DataType.EmailAddress)] 
        [Email(ErrorMessageResourceType = typeof(YeagerTechResources.Resources), ErrorMessageResourceName = "Email")] 
        public string Email { get; set; } 

        [Required(ErrorMessageResourceType = typeof(YeagerTechResources.Resources), ErrorMessageResourceName = "Required")] 
        [StringLength(50, ErrorMessageResourceType = typeof(YeagerTechResources.Resources), ErrorMessageResourceName = "MinLength6")] 
        [DataType(DataType.Password)] 
        [Display(Name = "Password4", ResourceType = typeof(YeagerTechResources.Resources))] 
        public string Password { get; set; } 

        [Display(Name = "AcctRemember", ResourceType = typeof(YeagerTechResources.Resources))] 
        public bool RememberMe { get; set; } 
    } 
```

这是作者的网站：[http](http://weblogs.asp.net/srkirkland/archive/2011/02/23/introducing-data-annotations-extensions.aspx) ://weblogs.asp.net/srkirkland/archive/2011/02/23/introducing-data-annotations-extensions.aspx 以及他对另一个使用它们的人的回复（日期为 2012 年 8 月 10 日) “我已经测试了当前的 NuGet 包可以在 MVC4 中正常工作，同时使用 .NET 4.0 和 4.5。”

下面是我在母版页中对脚本的设置：

```
<head> 
    <title>@ViewBag.Title</title> 
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" /> 
    <link href="@Url.Content("~/Content/kendo/2012.2.710/kendo.common.min.css")" rel="stylesheet" type="text/css" /> 
    <link href="@Url.Content("~/Content/kendo/2012.2.710/kendo.dataviz.min.css")" rel="stylesheet" type="text/css" /> 
    <link href="@Url.Content("~/Content/kendo/2012.2.710/kendo.blueopal.min.css")" rel="stylesheet" type="text/css" /> 
    <script src="~/Scripts/jquery-1.7.1.min.js"></script> 
    <script src="~/Scripts/jquery.validate.min.js"></script> 
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script> 
    <script src="~/Scripts/modernizr-2.5.3.js"></script> 
    <script src="~/Scripts/kendo/2012.2.710/kendo.web.min.js"></script> 
    <script src="~/Scripts/kendo/2012.2.710/kendo.aspnetmvc.min.js"></script> 
    <script src="@Url.Content("~/Scripts/kendo/2012.2.710/jquery.min.js")"></script> 
    <script src="@Url.Content("~/Scripts/kendo/2012.2.710/kendo.all.min.js")"></script> 
    <script type="text/javascript"> 
        $(document).ready(function () 
        { 
            $("#editor-field").css("border", "2px solid #f00"); 
            var strErrCode = '@TempData["ErrCode"]'; 
            switch (strErrCode) 
            { 
                case 'CustView': 
                    alert('@(Resources.CustViewErr)'); 
                    break; 
                case 'CustErr': 
                    alert('@(ViewBag.Error)'); 
                    break; 
                default: 
                    { 
                        if (strErrCode != "") 
                            alert(strErrCode); 
                    } 
                    break; 
            } 
        }); 
    </script> 
    <script> 
        function error_handler(e) 
        { 
            if (e.errors) 
            { 
                var message = "Errors:\n"; 
                $.each(e.errors, function (key, value) 
                { 
                    if ('errors' in value) 
                    { 
                        $.each(value.errors, function () 
                        { 
                            message += this + "\n"; 
                        }); 
                    } 
                }); 
                alert(message); 
            } 
        } 
    </script> 
</head> 
```

任何帮助将不胜感激......我死在水里，没有其他地方可以转身......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:24:16.850

底线是以下所有内容都适用于 DataAnnotationExtensions & ExtensionsDataAnnotations.ClientValidation dll。

但是，Min & Maxlength Dataannotations 在 MVC4 中不再起作用！它快把我逼疯了！

```
[Required(ErrorMessageResourceType = typeof(YeagerTechResources.Resources), ErrorMessageResourceName = "Required")]
         [StringLength(50, ErrorMessageResourceType = typeof(YeagerTechResources.Resources), ErrorMessageResourceName = "MinMaxLength", MinimumLength = 6)]
         //[StringLength(10, MinimumLength = 2)]
         //[Range(1, 100)]
         //[Min(3)]
         //[MinLength(2, ErrorMessage = "Name must be more than 5 characters")]
         //[MaxLength(5, ErrorMessage = "Name must be more than 5 characters")]
         [Display(Name = "Username", ResourceType = typeof(YeagerTechResources.Resources))] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T14:37:35.013

使用正则表达式来验证整数，

```
[RegularExpression("^[0-9]*$", ErrorMessage = "The number must be an integer")]
public int Number {get; set;} 
```

我确实认为这是解决问题的最简单方法。

# iphone - 防止游戏套件多次授予成就

> ID：12361751
> 
> 赞同：1
> 
> 时间：2012-09-11T01:59:53.923
> 
> 标签：iphone, objective-c, ios, app-store-connect, gamekit

我在我的 iPhone 游戏中使用 Game Kit，当我完成一个关卡时，我会检查这样的成就：

```
if (timeSpentInLevel < 30) {
        GKAchievement *ach = [[GKAchievement alloc] initWithIdentifier:@"cryptoquips.achievements.solutiontime.30s"];
        ach.percentComplete = 100.0;
        ach.showsCompletionBanner = YES;
        if (ach != NULL) {
            [ach reportAchievementWithCompletionHandler:^(NSError *error) {
                if (error!= nil) {
                    NSLog(@"achievement reporting failed");
                }
            }];
        }
    } 
```

但是当我在另一个级别再次执行此操作时，无论如何都会显示横幅，并且我认为会再次获得积分。在 iTunes Connect 中，我将成就“Achievable More than Once”设置为 no，因此不允许这样做。

如何防止此成就被多次授予？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:20:31.057

您可以使用*loadAchievementsWithCompletionHandler:*来执行此操作。它将获得玩家已经获得的成就的 NSArray。枚举这个数组，看看有没有一个是你要解锁的成就，如果没有，就解锁。

# java - 套接字和while循环

> ID：12361761
> 
> 赞同：0
> 
> 时间：2012-09-11T02:01:23.127
> 
> 标签：java, sockets, networking, network-programming

1）问题：两个while循环是否同时运行？我想知道的是 main() 方法中的 while 循环正在运行，而 sendDATA 中的 while 循环正在执行？

2）如果不是我怎么能同时发送和接收。我必须实现 TFTP，所以我必须读取并发送每个数据包 512 个字节，所以：我读取 512 个字节并发送它们，然后等待 ACK 数据包从客户端到达 ACK Packet = |opcode|block#| 所以传入[0] = 3 和传入[1] = int 块#

如果传入的块编号与我发送的匹配，那么我可以发送下一个数据包，否则我必须发送前一个数据包。我不知道如何用一个循环来实现这一点。

我的代码：

```
package source;

import java.io.*;
import java.net.*;
import java.nio.*;
import java.util.Scanner;

public class Server
{

    static String[] errorcodes = {"Not defined", "File not found", "Access violation", "Disk full or allocation exceeded", "Illegal TFTP Operation",
                              "Unknown transfer ID", "File already exists", "No such user"}; 

    static String FILE = "";
    static String MODE = "";

    static byte[] outgoing = new byte[512];
    static byte[] incoming = new byte[512];

    static DatagramSocket socket;

    static String clientip;
    static int clientport;

    public static void main(String[] args) throws Exception
    {   
        socket = new DatagramSocket(13373); // 69 Reserved for TFTP

        // Listen for incoming packets
        while(true) {
            DatagramPacket packet = new DatagramPacket(incoming, incoming.length);
            socket.receive(packet);

            clientip = packet.getAddress().toString().replace("/", "");
            clientport = packet.getPort();

            System.out.println(clientport);

            if(incoming[0] == 1 || incoming[0] == 2) {
                handleRequest(incoming);
            }

        }
    }

    // sends DATA opcode = 3 : | opcode | block # | data |
    private static void sendDATA() {
        outgoing = new byte[512]; // Empty array
        try {
            ByteBuffer sDATA = ByteBuffer.allocate(516);
            // 512 - 2 byte opcode, 2 byte block #, 512 data

            DatagramPacket data = new DatagramPacket(outgoing, outgoing.length, InetAddress.getByName(clientip), clientport);
            InputStream fis = new FileInputStream(new File(FILE));

            int a;
            int block = 1;

            while((a = fis.read(outgoing,0,512)) != -1)
            {
                data.setLength(a);
                sDATA.put((byte)3);
                sDATA.put((byte)block);
                sDATA.put(outgoing);
                socket.send(data);

                if(incoming[0] == 3 && incoming[1] == block) 
                {

                }

            }

        } catch (Exception e) {

        }

    }

    // Request packet: | opcode | filename | 0 | mode | 0 |
    // Upravlja le z WRQ / RRQ opcode
    private static void handleRequest(byte[] packet) 
    {

        int opcode = packet[0];
        String filename = "";
        int offset = 0;
        String mode = "";

        // Get filename
        for(int i = 1; i < packet.length; i++) {
            if(packet[i] != 0) {
                filename += (char)packet[i];
            } else {
                offset = i;
                break;
            }
        }
        // Get mode
        for(int j =  offset; j < packet.length; j++) {
            if(packet[j] != 0) {
                mode += (char)packet[j];
            }
        }
        FILE = filename;
        MODE = mode;
        if(opcode == 1) {
            // Do RRQ
            File test = new File(filename);
            if(test.exists()) {
                sendACK(); 
            } else {
                sendERROR(1);
            }
        } else {
            // Do WRQ
            File test2 = new File(filename);
            if(test2.exists()) {
                sendERROR(6);
            } else {
                sendACK();
            }
        }
    }

    // send ACK opcode = 4 : | opcode | block # |
    // block 0 -> prvi ACK, odgovor na RRQ/WRQ 
    // block 1 -> stevilo poslanega bloka, stetje blokov se zacne
    // pri 1.
    private static void sendACK() {
        outgoing = new byte[512];
        outgoing[0] = (byte)4;
        outgoing[1] = (byte)0;

        try {
            DatagramPacket ackpacket = new DatagramPacket(outgoing, outgoing.length, InetAddress.getByName(clientip), clientport);
            socket.send(ackpacket);
        } catch(Exception e) {

        }
    }   

    // send ERROR packet opcode =  5 : | opcode | errorcode | msg | 0 |
    // General errorcodes: 2
    private static void sendERROR(int errorcode) {
        ByteBuffer errpack = ByteBuffer.allocate(512);
        errpack.put((byte)5); // opcode
        errpack.put((byte)errorcode); // errorcode
        try {
            errpack.put(errorcodes[errorcode].getBytes("US-ASCII")); // msg
            errpack.put((byte)0);

            outgoing = errpack.array(); // Pack ERROR Packet

            DatagramPacket errpacket = new DatagramPacket(outgoing, outgoing.length, InetAddress.getByName(clientip), clientport);
            socket.send(errpacket);

        } catch (Exception e) {
            System.out.println(e.getMessage());
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:29:41.220

> 问题：两个while循环是否同时运行？我想知道的是 main() 方法中的 while 循环正在运行，而 sendDATA 中的 while 循环正在执行？

不会。但是当您调用 handleRequest 时，传入的 UDP 数据包会被缓冲（达到一定限制）。这样当handleRequest 返回时，如果有新的UDP 数据包可用，随后对socket.receive() 的调用将立即返回。如果您在“handleRequest”调用中花费的时间过长，这并不能保证您不会丢失数据包。但它可能适用于合理的负载和小文件。

> 如果不是，我怎么能同时发送和接收。

您应该保留一个数据结构来保存每个会话的状态。（例如，正在传输什么文件，到目前为止传输了多少字节，确认状态等...）将每个会话存储在某个集合/列表中。这样您的代码逻辑看起来像这样：

```
// this is not java, just pseudo code
while (true)
{
    packet = receive packet from network
    session = list_of_sessions.lookup(packet.fromaddress)
    if (session == null)
    {
        session = new Session(packet)
        list_of_sessions.add(new Session(), packet.fromaddress)
    }
    handleRequest(packet, session); // sends a response based on state or packet received
    if (session.isFinished)
    {
        list_of_sessions.remove(session)    
    }
} 
```

上面的单线程方法可能最适合您。但如果你想变得狂野，你可以投资线程。我不确定你是否准备好了。

# html - 图像/图标仅在我将鼠标悬停在它们上方后出现

> ID：12361763
> 
> 赞同：0
> 
> 时间：2012-09-11T02:01:40.910
> 
> 标签：html, image

出于某种奇怪的原因，图像和图标仅在我将鼠标悬停在它们上方后才会出现。

例如，这首先出现：

## ![空白图像](../Images/69d80e034025801cc4881f4752278c25.png)

在我用鼠标悬停在它上面之后：

## ![非空白图像](../Images/d27f92de16fd6d2cd8ca2503c87351e2.png)

这是内存问题吗？

这是供参考的网站链接：www.drimmit.com/inspiration。

谢谢！

# javascript - 如何知道javascript for语句中的所有结果是否都错误

> ID：12361769
> 
> 赞同：0
> 
> 时间：2012-09-11T02:02:19.933
> 
> 标签：javascript, for-loop

我有这个简单的循环：

```
for (i = 0; i < menuitem.length; i += 1) {
    if (menuitem[i].href == window.location) {
        menuitem[i].className = "current"
    } else {
        if (menuitem[i].nodeType !== 3) {
            menuitem[1].className = "current";
        }
    }; 
```

如何用“如果 menuitem[i] 的所有结果都是错误的”替换 else 语句？因为现在对于每个为假的单个语句都会执行 else 语句，我只想在整个循环为假时执行它。

我希望我说清楚了。

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:08:44.533

要查看整个数组是否包含错误值，您可以这样做：

```
var found = false;
for (i = 0; i < menuitem.length; i += 1) {
    if (menuitem[i]) {
        found = true;
    }
}
if (found) {
    // some truthy value was found in the array
} else {
    // no truthy values found in the array
} 
```

要查看整个数组是否不符合您的条件，您可以执行以下操作：

```
var found = false;
for (i = 0; i < menuitem.length; i += 1) {
    if (menuitem[i].href == window.location) {
        found = true;
    }
}
if (!found) {
    // no items in the array met your condition 
} else {
    // at least one item in the array met your condition
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:07:15.277

如果你不介意额外的依赖，你可以使用[_.js's](http://underscorejs.org/#any) `_.any`。（您也可以从源代码中复制该方法。）

# iphone - 使用 Curl 验证 App Store 收据时出现 IllegalStateException？

> ID：12361770
> 
> 赞同：8
> 
> 时间：2012-09-11T02:02:34.963
> 
> 标签：iphone, ios, ios5

我有一个应用内购买项目，我想验证其商店收据。我想通过使用 Apple 的 itunes API 从互联网上的随机机器验证这一点。交易完成后，收据存储在 Parse 中。我正在关注[Apple 开发者网站](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/VerifyingStoreReceipts/VerifyingStoreReceipts.html)上的指南。首先我从 Parse 得到交易：

```
curl -X GET \
  -H "X-Parse-Application-Id: [...]" \
  -H "X-Parse-REST-API-Key: [...]" \
  https://api.parse.com/1/classes/Transactions/123456789 
```

看起来像：

```
{
    "transactionReceipt":{"__type":"Bytes","base64":"asdfqwertyASDFQWERTY="},
    "transactionType":"Purchased",
    "transactionIdentifier":"[...]",
    "transactionDate":{"__type":"Date","iso":"2012-09-10T06:58:44.071Z"},
    "createdAt":"2012-09-10T06:58:37.234Z",
    "updatedAt":"2012-09-10T06:58:37.234Z",
    "objectId":"HyPWJBlWzt"
 } 
```

然后，我在 transactionReceipt 中获取 base64 值并将其卷曲到 Apple 端点以获取收据：

```
curl -H "Accept: application/json" \
     -H "Content-Type: application/json" \ 
     -X POST 
     -d '{"receipt-data":"asdfqwertyASDFQWERTY="}' \
     https://buy.itunes.apple.com/verifyReceipt 
```

我得到的只是没有太大帮助：

```
{"status":21002, "exception":"java.lang.IllegalStateException"} 
```

我认为这对应于“收据数据属性中的数据格式错误。”。让 curl 使用 --trace-ascii 转储整个操作并没有透露任何我认为相关的内容，我确信问题不在于连接本身。

这里有点难过。看起来确实是在他们的最后发现了交易（调整收据数据中的几个字节会引发 java.lang.IllegalArgumentException），所以我猜它与交易本身有关。有人见过这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:01:19.620

在搜索相同的错误消息后，我来到了这里。我最终解决了这个问题——我能给出的最好的建议是仔细检查收据是否有效，并且您将其发布到正确的 URL。当我使用无效收据（或者可能只是错误的类型 - 它是应用收据，而不是应用内购买收据）时，我得到了您的确切错误，并且在使用发布到的有效沙盒收据时出现类似错误生产验证网址。

我最初使用来自[http://images.worldofapple.com/validating_051110.pdf](http://images.worldofapple.com/validating_051110.pdf)的示例收据数据，在 uudecoding 并将其重新编码为 base64 之后。我尝试发布到：

*   [https://sandbox.itunes.apple.com/verifyReceipt](https://sandbox.itunes.apple.com/verifyReceipt)
*   [https://buy.itunes.apple.com/verifyReceipt](https://buy.itunes.apple.com/verifyReceipt)

两者都给出了同样的错误`{"status":21002, "exception":"java.lang.IllegalStateException"}`。我现在怀疑根本原因是这是应用收据，而不是应用内购买收据。

然后我从[https://gist.github.com/sauloarruda/2559455获得了另一个收据示例](https://gist.github.com/sauloarruda/2559455)

在[https://buy.itunes.apple.com/verifyReceipt](https://buy.itunes.apple.com/verifyReceipt)我得到了同样无用的回复： `{"status":21007}`

最后在[https://sandbox.itunes.apple.com/verifyReceipt](https://sandbox.itunes.apple.com/verifyReceipt)我得到了预期的响应：

`{ "receipt":{"original_purchase_date_pst":"2012-04-30 08:05:55 America/Los_Angeles", "original_transaction_id":"1000000046178817", "original_purchase_date_ms":"1335798355868", "transaction_id":"1000000046178817", "quantity":"1", "product_id":"com.mindmobapp.download", "bvrs":"20120427", "purchase_date_ms":"1335798355868", "purchase_date":"2012-04-30 15:05:55 Etc/GMT", "original_purchase_date":"2012-04-30 15:05:55 Etc/GMT", "purchase_date_pst":"2012-04-30 08:05:55 America/Los_Angeles", "bid":"com.mindmobapp.MindMob", "item_id":"521129812"}, "status":0}`

# ruby-on-rails - 在本地运行 Rails 3 暂存环境（所有资产为 404）

> ID：12361772
> 
> 赞同：1
> 
> 时间：2012-09-11T02:02:49.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache2

我正在使用以下方法在本地运行我的登台服务器：

```
RAILS_ENV=staging rails console -p 1337 
```

我已经预编译了资产，一切正常，除了我不知道如何为这些资产提供服务。我在我的 staging.rb 中有这个：

```
config.serve_static_assets = false 
```

在我的 apache vhost 中，如果我在 80 上收听，我可以访问我的资产：

```
http://domain.local/assets/application.css 
```

但是，如果我在 1337（与我的 rails 服务器相同的端口）上监听，那么 rails 会吐出 404。我的困惑是，我已经告诉 rails 不要为它们提供服务，那么它为什么要尝试为它们服务呢？

```
http://domain.local:1337/assets/application.css 
```

我肯定错过了什么。该站点显示正常，仅对所有资产返回 404：

```
ActionController::RoutingError (No route matches [GET] "/assets/application-791b26264f9bbe462a28d08cf9a79582.css"): 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T02:36:16.607

当您通过以下方式访问您的应用程序时

```
http://domain.local:1337/ 
```

你没有通过 Apache。

如果您只想使用 WEBrick (RAILS_ENV=staging rails s -p 1337) 运行它，那么您应该设置

```
config.serve_static_assets = true 
```

在您的 staging.rb 中。当您通过以下方式访问应用程序时，这将使 WEBrick 为预编译资产提供服务

```
http://domain.local:1337 
```

为了使用 Apache 提供的预编译资产，您应该考虑将 Apache（或 Nginx）与 Ruby 模块（如 Phusion Passenger）结合使用。然后您将能够通过以下方式访问您的应用程序

```
http://domain.local 
```

这将使 Apache 为您的资产提供服务，并将所有其他请求转发到模块。[您可以在此处](https://stackoverflow.com/questions/4113299/ruby-on-rails-server-options)阅读有关此内容的更多信息

# android - JACKSON Json 在 Android 上真的很慢吗？

> ID：12361774
> 
> 赞同：0
> 
> 时间：2012-09-11T02:02:55.590
> 
> 标签：android, json, parsing, jackson

虽然在我的平板电脑上没有问题，但在我的模拟器上运行 json 解析大文件的速度非常慢。

我读到 JACKSON JSON 是一种非常快速的处理方法，所以我安装了它，但它更糟？

我做错了什么吗，我只是在使用核心库，所以几乎没有开销。

我将数据放在 sqllite 数据库中。它运行速度一样慢，也没有转储到 sqlite 中，因此 db 调用不是问题。

关于这是否尽可能优化的任何想法？

这是整个代码：

```
public boolean dowloadfilejson(double olng,double olat, double odistance,DatabaseHelper dbc)
{   URL url;

    SQLiteDatabase db =  dbc.getWritableDatabase();
    db.setLockingEnabled(true);
    db.execSQL("delete from deals_categories;delete from deals;");      

    db.beginTransaction();

    //JsonFactory fac = Util.getJsonFactory(); // recycle JsonFactory
    JsonFactory fac = new JsonFactory(); // or just use once.
    JsonParser jp = null;

            try {
                url = new URL(URL + "lat=" + "41.778049" +"&lon="+ "-88.086898" + "&distance=10");
                jp = fac.createJsonParser(url);
                jp.nextValue();

                while (jp.nextValue() != null)
                {
                    //jp.getCurrentName();
                    if(jp.getCurrentName() =="lat")
                    {
                        Log.i("1",jp.getText());    
                    }
                    if(jp.getCurrentName() =="lon")
                    {
                        Log.i("1",jp.getText());    
                    }
                    if(jp.getCurrentName() =="distance")
                    {
                        Log.i("1",jp.getText());    
                    }
                    if(jp.getCurrentName() =="totalSize")
                    {
                        Log.i("1",jp.getText());    
                    }
                    if(jp.getCurrentName() =="items")
                    {
                        while(jp.nextValue() != JsonToken.END_ARRAY) //items array
                        {String id = "";
                        ContentValues cv = new ContentValues();
                        //Log.i("ITEM",jp.getText());   
                            while(jp.nextValue() != JsonToken.END_OBJECT) //each item
                            {   //Log.i("ITEMin",jp.getText()); 
                            /*   cv.put("deal_id",c.getString("_id"));
                               cv.put("mtype",c.getString("type"));
                               cv.put("dealUrl",c.getString("dealUrl"));
                               cv.put("options_option_buyUrl",c.getString("buyUrl"));
                               cv.put("options_option_redemptionLocations_redemptionLocation_city", c.getString("city"));
                               cv.put("startAt" ,c.getString("startAt"));
                            cv.put("endAt" ,c.getString("endAt"));
                            cv.put("lat" ,c.getString("lat"));
                            cv.put("lng" ,c.getString("lng"));
                            cv.put("mediumImageUrl" ,c.getString("mediumImageUrl"));
                            cv.put("announcementTitle" ,c.getString("title"));
                              */

                              if(jp.getCurrentName() == "_id" )
                              {
                                 id = jp.getText();
                                  cv.put("deal_id",id);  
                              }
                              if(jp.getCurrentName() == "type" )
                              {
                                  cv.put("mtype",jp.getText());  
                              }
                              if(jp.getCurrentName() == "dealUrl" )
                              {
                                  cv.put("dealUrl",jp.getText());  
                              }
                              if(jp.getCurrentName() == "buyUrl" )
                              {
                                  cv.put("options_option_buyUrl",jp.getText());  
                              } 
                              if(jp.getCurrentName() == "city" )
                              {
                                  cv.put("options_option_redemptionLocations_redemptionLocation_city",jp.getText());  
                              } 

                              if(jp.getCurrentName() == "startAt" )
                              {
                                  cv.put("startAt",jp.getText());  
                              } 
                              if(jp.getCurrentName() == "endAt" )
                              {
                                  cv.put("endAt",jp.getText());  
                              } 
                              if(jp.getCurrentName() == "lat" )
                              {
                                  cv.put("lat",jp.getText());  
                              } 

                              if(jp.getCurrentName() == "lng" )
                              {
                                  cv.put("lng",jp.getText());  
                              }                                
                              if(jp.getCurrentName() == "mediumImageUrl" )
                              {
                                  cv.put("mediumImageUrl" ,jp.getText());  
                              }
                              if(jp.getCurrentName() == "title" )
                              {
                                  cv.put("announcementTitle" ,jp.getText());  
                              }

                            if(jp.getCurrentName() == "catname" )
                            {
                            String[] s = jp.getText().split("\\|");

                            for (String val : s) {

                               ContentValues cvcat = new ContentValues();
                              cvcat.put( "active" ,1);
                              cvcat.put("catname" ,val);
                            db.insertWithOnConflict ("categories", null, cvcat,  SQLiteDatabase.CONFLICT_IGNORE);
                            cvcat = null;
                            ContentValues cvcatd = new ContentValues();
                            cvcatd.put("catname" ,val);
                            cvcatd.put("deal_id",id);
                            db.insertWithOnConflict ("deals_categories", null, cvcatd,  SQLiteDatabase.CONFLICT_IGNORE);
                            cvcatd = null;
                                }

                            }
                            }
                            id = "";
                            db.insertWithOnConflict ("deals", null, cv, SQLiteDatabase.CONFLICT_IGNORE);
                            cv = null;
                        }
                    }
                }
                return true;

            } catch (JsonParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                return false;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            return false;
}
finally{
    db.setTransactionSuccessful();
    db.endTransaction();            
    /*  if(ih!=null)
        ihdc.close();
        ihc.close();
        ih.close();
        */
        db.setLockingEnabled(false);
        db.close();
        dbc.close();

        }

} 
```

## 编辑

我发现处理速度非常慢的问题是 CONTENTVALUES。我想我会用那个 claass 报废，然后用手写的，看看是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:28:39.650

您确定要在那里使用 Streaming API 方法吗？虽然它可以更快，但它扩展了很多代码，因此您使用 100 行代码而不是 5 行代码。当您使用字符串比较时，它甚至可能不会更快。所以也许尝试使用`ObjectMapper`并直接将数据绑定到 POJO？

# windows - 你如何检测鼠标点击开始按钮？

> ID：12361777
> 
> 赞同：0
> 
> 时间：2012-09-11T02:03:04.997
> 
> 标签：windows, vb.net

我遇到了一个涉及`GetKeyState`. 我试图在 Visual Basic 2010 中检测窗体外的 Windows 开始按钮的鼠标左键单击。一个特定的行非常接近成功，但出现了问题。具体信息如下。

```
Public Class Form1

    Public Declare Function GetKeyState Lib "user32" (ByVal vKey As Integer) As Short
    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

        If GetKeyState(91) < 0 And GetKeyState(1) < 0 Then
            MsgBox("Start Button clicked.")
        End If

    End Sub
End Class 
```

如果我换行：

```
If GetKeyState(91) < 0 And GetKeyState(1) < 0 Then 
```

到：

```
If GetKeyState(91) < 0 Then 
```

我可以通过单击“开始”按钮来触发 MsgBox - 在表单之外，仅使用键盘。鼠标点击开始按钮没有反应。

如果我将同一行更改为：

```
If GetKeyState(1) < 0 Then 
```

我可以通过单击鼠标左键来触发 MsgBox - 在表单之外，在操作系统中的任何位置。

但是，当我尝试结合我所感知的内容时，会被解释为鼠标左键单击“开始”按钮：

```
If GetKeyState(91) < 0 And GetKeyState(1) < 0 Then 
```

没发生什么事。当鼠标左键单击“开始”按钮时，如何触发 MsgBox？

----------------------------------问题附录-------------- --------------------------

我现在了解键盘上的键与屏幕上的按钮之间的区别。尽管 Windows 键触发开始按钮，但 GetKeyState 只接受来自键盘的输入。顾名思义，GetKeyState 似乎只关心键盘上键的状态。但是，我在网上看到了许多涉及键盘和鼠标的 GetKeyState 函数。

但我必须得出结论，GetKeyState 不会让我到达目的地。我运行了一个类似于 Spy++ 的名为 Window Detective 的程序，它将开始按钮识别为父级：Shell_traywnd，子级：按钮。

因此，在我看来，我创建了如下内容：

myParent = FindWindow(vbNullString, "Shell_traywnd") myChild = FindWindowEx(myParent, 0, "Button", vbNullString)

那么问题是 - 我如何检测孩子是否被点击？在这种情况下，开始按钮是否称为句柄？还是窗户？另外，我知道使用 X/Y 的鼠标位置，但我不想使用它，因为开始按钮可以在 Windows 操作系统中自由重新定位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:30:00.480

您的假设不正确：91 (0x5B) 的 GetKeyState 参数是指[键盘上的左 windows 键](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)，而不是屏幕上的开始按钮。我怀疑您需要检查鼠标单击的位置。

我不是这方面的专家，但您可以使用 Visual Studio 附带的 Spy++ 来查看单击“开始”按钮所涉及的 Windows 消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T02:10:53.620

不太确定如何在一个事件中同时使用键盘和鼠标按下开始按钮。粗略猜测，您的条件语句似乎已关闭！代码不应该是：

```
If GetKeyState(91) < 0 Or GetKeyState(1) < 0 Then 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T02:31:09.903

你试过逻辑“或”吗？

```
 If GetKeyState(91) < 0 Or GetKeyState(1) < 0 Then
        MsgBox("Start Button clicked.")
    End If 
```

问候

# ios - 网格粒子发射器

> ID：12361783
> 
> 赞同：1
> 
> 时间：2012-09-11T02:05:37.623
> 
> 标签：ios, optimization, unity3d, mesh

我们使用 untiy3d 引擎。我们在 ios 目标平台上使用**3.5.0**版和 Legacy Particles 的 Ellipsoid Particle Emitter。

大量使用Mesh Particle Emitter，粒子数量少，尺寸小，但发射器多，所有参数设置相同，如何优化这种粒子发射器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:08:34.800

在 iPhone 上运行时，我体验到精灵动画在这种情况下表现更好。例如，请参阅[SpriteManager](http://wiki.unity3d.com/index.php?title=SpriteManager)或[动画平铺纹理](http://wiki.unity3d.com/index.php?title=Animating_Tiled_texture)。

另一种方法可能是通过[LOD结合这两种技术](http://docs.unity3d.com/Documentation/Components/class-LODGroup.html)

# python - Django 静态 JS 文件未加载

> ID：12361788
> 
> 赞同：0
> 
> 时间：2012-09-11T02:06:32.590
> 
> 标签：python, django, django-templates

我有一个我正在处理的 django 项目，而且我对 Django 和 Python 很陌生。我制作了一个简单的模板，我的所有 css 和 js 文件都在 base.html 文件中调用，而我正在使用`{% content block %}`它来填写模板。

正在调用所有 css 文件以及所有 js 文件。我可以通过输入 /http://myurl://static/jsfile.js 来查看它们。CSS 文件也在我的 html 文档中工作。唯一不起作用的是任何 javascript，甚至不是嵌入式 javascript。

这是我的settings.py

```
# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
# Put strings here, like "/home/html/static" or "C:/www/django/static".
# Always use forward slashes, even on Windows.
# Don't forget to use absolute paths, not relative paths.
'/djsite/djsite/static/',
'C:/djsite/djsite/templates/static/',
) 
```

这是我的 urls.py

# 网站网址

```
from django.conf.urls.defaults import *
from djsite.views import *
from django.conf import settings

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
 # Main Pages
url(r'^$', 'django.views.generic.simple.direct_to_template', {'template': 'main/home.html'}),
(r'^about', 'django.views.generic.simple.direct_to_template', {'template': 'main/about.html'}),
(r'^profile', 'django.views.generic.simple.direct_to_template', {'template': 'network/user-home.html'}),                  
(r'^privacy', 'django.views.generic.simple.direct_to_template', {'template':     'main/privacy.html'}),   
(r'^contact/$', 'djsite.views.contact'),

# Uncomment the admin/doc line below to enable admin documentation:
url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)),
) 
```

这是我的这里是我的base.html（它有点长，我尽可能地切断了）

```
<head>
<title>{% block title %}{% endblock %}</title>

<script type="text/javascript">

    //initialize tabs
$(document).ready(function() {
    $('#tabs').tabs();
});

//initialize slider
$(document).ready(function(){
    $('#showcase').bxSlider({
        hideControlOnEnd: true,
        infiniteLoop: false,
    });
}); 

//for portfolio captions
$(window).load(function capTions(){ 
    $("a.caption").each(function(){
        $(this)
            .css({
                "height" : $(this).children("img").height() + "px",
                "width" : $(this).children("img").width() + "px"
            })
            .children("span").css(
                "width", $(this).width() - 10 + "px")
            .find("big").after('<div class="clear"></div>');
            $("a.caption").hover(function(){
                $(this).children("img").stop().fadeTo(500, .6);
                $(this).children("span").stop().fadeTo(500, 1);
            }, function(){
                    $(this).children("span").stop().delay(0).fadeOut(200);
                $(this).children("img").stop().delay(0).fadeTo(500, 1);
            });
    // End $(this)   
    });
});

$(document).ready(function () {
    $("[rel=tooltip]").tooltip({
        placement: 'bottom',
    });
    $("[rel=popover]").popover();
 });
</script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">    
<meta name="author" content="Tyler Bailey">   
<meta name="description" content="" />    
<meta name="keywords" content="" />

<link rel="shortcut icon" href="/favicon.ico" />
{% load staticfiles %}
{% block addl_styles %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/network.style.css" />
{% endblock %}

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script type="text/javascript" src="{{ STATIC_URL }}libs/jquery.bxSlider.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}libs/jquery-ui-1.8.22.custom.min.js"></script>  
<script type="text/javascript" src="{{ STATIC_URL }}libs/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/hirestarts.script.js"></script>

</head>

<body>
<div id="wrapper">
    <header>
        {% include 'includes/nav.html' %}
    </header>
<div class="contentContainer">
{% block content %}

{% endblock %} 
```

主要是我现在担心的jquery-ui，但我不明白为什么CSS会加载，我可以查看/static/文件夹中的所有文件但是JS不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T04:13:58.457

一个明显的问题是您在实际加载 jQuery 之前调用了 jQuery 函数。要解决此问题，请将所有脚本加载调用移到您的内联 javascript*之前：*

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script type="text/javascript" src="{{ STATIC_URL }}libs/jquery.bxSlider.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}libs/jquery-ui-1.8.22.custom.min.js"></script>  
<script type="text/javascript" src="{{ STATIC_URL }}libs/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/hirestarts.script.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T16:39:52.430

我在 Django 项目中遇到了同样的问题。似乎 Chrome 在您刷新页面时不会获取文件，而是从缓存中加载它们。

如果你在 Chrome 中打开调试并查找你错过的静态文件 - 对我来说 - 它实际上就在那里，但里面有早期版本的代码。如果您右键单击它以在新选项卡中打开，它会显示其最新内容。

所以，对我来说，Chrome 中的**Cmd + Shift + R 就很**神奇。

# android - 签入到 TFS 时是否可以使用 ant 构建 Android 项目？

> ID：12361792
> 
> 赞同：3
> 
> 时间：2012-09-11T02:06:44.463
> 
> 标签：android, ant, tfs, azure-devops

我目前有一个 Android 项目检入到我们的 TFS 服务器中，并且最近一直在努力让它使用 ant 构建并运行 Junit 测试（也使用 Robolectric 和 Mockito）。

在本地使用 ant 构建我的项目可以正常工作，但我希望在签入更改时配置 TFS 以构建和运行我的 junit 测试。

我发现了这个，但是它没有提到它可以与 Android 项目一起使用的任何地方

[http://visualstudiogallery.msdn.microsoft.com/2d7c8577-54b8-47ce-82a5-8649f579dcb6/view/Discussions/1](http://visualstudiogallery.msdn.microsoft.com/2d7c8577-54b8-47ce-82a5-8649f579dcb6/view/Discussions/1)

任何帮助将不胜感激，

比利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:31:39.320

然而，我的大部分工作都在工作，也就是说它不能 100% 工作。我将分享我所做的一切，希望你能让它发挥作用。不起作用的部分是将apk移动到Drops目录时；我得到一个 UnauthorizedAccessException，所以我很接近。

通常，您要做的是将 Java、Ant 和 Android SDK 都签入您的项目，并设置构建以针对 Andriod SDK 和您想要构建的 SDK 版本运行 ant。为此，您需要项目中的 Java、Ant 和 Android SDK。（这里是我用来让它在某种程度上工作的资源。不起作用的部分是将 apk 移动到 drop 目录，我不确定它的去向，但是 ant build 告诉它已经构建该应用程序成功[http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html](http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html) [http://tfs.visualstudio.com/en-us/learn/build/setup -ci-build-in-eclipse/](http://tfs.visualstudio.com/en-us/learn/build/setup-ci-build-in-eclipse/) )

我还在我的博客上写了一些更详细的东西。

[http://slmtechnology.com/mobileboys/?p=194](http://slmtechnology.com/mobileboys/?p=194)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:35:41.420

您还需要检查 Android 和 JUnit SDK/libs 以使其以这种方式工作。

# jquery - CSS3 / jQuery：手风琴悬停

> ID：12361795
> 
> 赞同：0
> 
> 时间：2012-09-11T02:07:31.907
> 
> 标签：jquery, css, jquery-mobile

我有这个手风琴（关闭）如下：

[对齐顶部 http://www.kerrydeaf.com/4.png](http://www.kerrydeaf.com/4.png "工具提示")

这是我在悬停时看到的如下：

[对齐顶部 http://www.kerrydeaf.com/3.png](http://www.kerrydeaf.com/3.png "工具提示")

**我正在尝试以绿色创建悬停，而没有任何浅蓝色可见？我该如何解决？**

这是一个有问题的 CSS 代码，如下所示：

```
.trigger a:hover, .trigger a:hover:focus{background-color:#a5cd4e; color:#48c4d2;} 
```

这是一个完整的 CSS 代码，如下所示：

```
.toogle_wrap{background-color:#e4f6f8; border:1px #bfeaf0 solid;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px; width:92%; padding:3% 4%; margin:5px 0 10px 0;} 
.trigger{padding:0px;margin:0; background:url(../images/toggle_small.svg) no-repeat right; background-position:100% -20px; } /* background:url(../images/toggle.png) */
.trigger a{color: #636363;text-decoration: none;display: block; padding:2px 0 2px 0;font-size:16px;font-family:opensans;font-weight:normal; } 
.active {background-position:100% 0px; }
.trigger a:hover, .trigger a:hover:focus{background-color:#a5cd4e; color:#48c4d2;} 
.toggle_container{overflow: hidden;padding:15px 0 0 0;clear: both;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:17:44.730

请更改CSS如下：

你的 CSS 行：

```
.trigger a:hover, .trigger a:hover:focus{background-color:#a5cd4e; color:#48c4d2;} 
```

需要更改/替换 CSS Line 如下：

```
.trigger:hover { background-color:#a5cd4e; }
.trigger:hover a, .trigger:hover a:focus{ color:#48c4d2; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:53:00.400

如果它是一个 jQuery Mobile 站点，请使用[jQuery Mobile ThemeRoller](http://jquerymobile.com/themeroller)创建自定义配色方案。

# android - 在android中获取街道的方向

> ID：12361797
> 
> 赞同：1
> 
> 时间：2012-09-11T02:07:46.573
> 
> 标签：android, android-maps

假设我有一个街道名称，有没有办法找出这条街道是东西街还是南北街？？？

比如说我有一条叫约翰街的街道，我怎么知道它是东西方向还是南北方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:26:40.810

首先，假设道路总是运行 NS 或 EW 可能是危险的。这还没有考虑到地理特征或城市地区缓慢无组织的建设已经强制要求道路弯曲或运行 NW-SE 的情况。

但是，如果您有[办法从街道地址中提取相对准确的 GPS 坐标](http://developer.android.com/reference/android/location/Geocoder.html)，您可以*尝试*获取坐标`1 John St`并`21 John St`使用差异来计算道路在该点的方向。

找不到一个不错的简单 Android API 调用，称为`GetStreetDirection()`，差分 GPS 坐标将是我要研究的第一个方法。

# c++ - 更改类模板成员可见性

> ID：12361799
> 
> 赞同：3
> 
> 时间：2012-09-11T02:08:08.087
> 
> 标签：c++, templates

假设我有一个 C++ 类模板：

```
template <class _T>
class MyClass
{
public:
    int func();

private:
    _T internal;
}; 
```

我想要一种方法来为这个模板指定一个布尔值，当它为真时，将使这个模板中的每个成员都公开。

例如：

```
MyClass<SomeClass, false> c1;
c1.internal.someFunc(); // ERROR

MyClass<SomeOtherClass, true> c2;
c2.internal.someFunc(); // SUCCESS 
```

对于那些想知道的人，我正在使用 gtest 和 gmock 来模拟具体的类。所以，在我的一个单元测试中，我会有类似的东西：

```
TEST(MyClass, Test1) {
    MyClass<SomeMockClass, true> c1;
    EXPECT_CALL(c1.internal, someFunc()).Times(1);
} 
```

对于这个测试模板，我的代码必须可以访问 internal。在生产中，我想对用户隐藏它。

我正在使用 msvc 11 (Visual Studio 2012)，因此我可以访问一些 C++11 功能和元编程结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T06:13:57.903

您可以从主类继承一个测试助手，您声明为朋友的助手，然后公开您感兴趣的元素：

```
#include <iostream>

template<typename T> class TestMyClass;

template<typename T>
class MyClass
{
    friend class TestMyClass<T>;
    public:
        int func();
    private:
        T internal;
};

template <class T>
class TestMyClass : public MyClass<T>
{
    public:
        using MyClass<T>::internal;
};

int main()
{
    TestMyClass<double> s;
    s.internal = 5;
    std::cout << s.internal << "\n";
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:40:52.613

您可以使用类模板专业化来做到这一点，但是，这确实意味着您需要在进行更改时修改两组代码：

```
#include <iostream>

template <class T, bool visible>
class MyClass
{
};

template <class T>
class MyClass<T, true>
{
public:
    int func();
    T internal;
};

template <class T>
class MyClass<T, false>
{
public:
    int func();
private:
    T internal;
};

int main()
{
    MyClass<int, true> s;
    s.internal = 5;
    std::cout << s.internal << "\n";
    return 0;
} 
```

# python - 如何在 U 模式和 w+ 模式下写入文件？

> ID：12361800
> 
> 赞同：1
> 
> 时间：2012-09-11T02:08:12.907
> 
> 标签：python, file-io

我希望我的代码在MacOS和Windows下都能正常写文本，所以我希望这个脚本有U模式的功能，同时有w+的功能。

我应该如何处理 file.open() 中的 mode 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T03:18:53.697

不支持以通用换行模式写入。来自[PEP](http://www.python.org/dev/peps/pep-0278/)：

> 没有特别支持输出到具有不同换行约定的文件，因此模式“wU”也是非法的。

和

> 没有通用换行符的输出实现，Python 程序应该自己处理这个，或者用平台本地约定编写文件。这样做的原因是输入是困难的情况，在 Python 中将不同的换行符输出到文件中已经很容易了。

尝试时返回的错误实际上暗示了这一点`Uw+`：

```
ValueError: universal newline mode can only be used with modes starting with 'r' 
```

请注意，`Ur+`它不会失败，但它也不会在写入时进行任何替换；我可以`f.write('test\r\n')`在我的 Mac 上执行（OS X 使用 Unix 换行符），并且 Windows 换行符出现在我的文件中。

**编辑**：看来Python[实际上默认提供了特定于平台的换行符输出](http://docs.python.org/library/functions.html#open)，只要您保持`b`关闭状态。

> ...默认是使用文本模式，它可以在写入和读取时将 '\n' 字符转换为特定于平台的表示。

# vim - 重新格式化并打印为 PDF，Vim 中的文本

> ID：12361801
> 
> 赞同：1
> 
> 时间：2012-09-11T02:08:32.933
> 
> 标签：vim

`textwidth`当硬拷贝到 PDF 时，考虑到 Vim 中的当前字体大小，有没有办法检测 A4 格式的最大可能是多少？

*简而言之，我有一份很长的文档，我想重新格式化并打印出来，同时使用尽可能多的纸张空间。到目前为止，我总是不得不尝试一下，这很痛苦。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:16:06.087

你试过调整你的边距[`printoptions`](http://vimdoc.sourceforge.net/htmldoc/print.html#popt-option)吗？我认为`textwidth`对硬拷贝页面没有任何影响。打印字体/大小也应与硬拷贝字体/大小分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T19:01:28.183

我不知道，但是如果您将以下行复制并粘贴到文本中：

```
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111

000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999000000000011111111112222222222333333333344444444445

123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890 
```

...然后将其打印为 PDF，您将能够轻松地看到它的包装位置。（只需垂直向下读取数字。）

# mysql - 多列上的全文索引如何工作？

> ID：12361804
> 
> 赞同：21
> 
> 时间：2012-09-11T02:09:28.720
> 
> 标签：mysql, sql, database, indexing

在 3 列上添加 FULLTEXT INDEX 时，是在 3 列上添加 1 个单个索引，还是添加 3 个单独的索引？

我问这个，因为目前我正在使用这样的 FULLTEXT：

```
ALTER TABLE myTable ADD FULLTEXT all3colsIndex (col1,col2,col3);
SELECT * FROM myTable WHERE MATCH (col1, col2, col3) AGAINST ('word'); 
```

我刚刚在我的搜索界面中添加了一个用户选项，用户可以在其中从搜索中删除其中一列。那么我是否能够在不丢失索引的情况下做到这一点，我只使用了 3 列中的 2 列：

```
ALTER TABLE myTable ADD FULLTEXT all3colsIndex (col1,col2,col3);
If (UserOptionRemoveCol == "selected") {
    SELECT * FROM myTable WHERE MATCH (col1, col2) AGAINST ('word');
} else {
    SELECT * FROM myTable WHERE MATCH (col1, col2, col3) AGAINST ('word');
} 
```

或者我是否必须在两列以及三列上创建一个新的 FULLTEXT 索引？

```
ALTER TABLE myTable ADD FULLTEXT all3colsIndex (col1,col2,col3);
ALTER TABLE myTable ADD FULLTEXT 2colsIndex (col1,col2); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T02:28:11.930

[浏览CREATE FULLTEXT INDEX](http://msdn.microsoft.com/en-us/library/ms187317%28v=sql.105%29.aspx)的手册，它表明您可以通过重复以下方式来指定多个列`column_name`：

```
CREATE FULLTEXT INDEX ON table_name (column_name1 [...], column_name2 [...]) ... 
```

鉴于此信息，我假设它*跨 3 列创建单个索引*。此外，我假设它在关于复合索引的从左到右规则下工作（我将通过检查以下语句的执行计划来验证这一点）。因此，必须按该顺序选择复合索引`(col1, col2, col3)`才能使用它 ( `SELECT col1, col2 ...`)。如果您要调用`col2`它，则不会使用索引。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-22T23:33:11.307

只会创建一个 FULLTEXT 类型的索引。如有必要，该索引将“跨越”多个列。但是，索引本身对列的索引不如它们的*words*多。从[文档](https://dev.mysql.com/doc/refman/5.6/en/innodb-fulltext-index.html)中：

> InnoDB FULLTEXT 索引具有倒排索引设计。倒排索引存储单词列表，并且对于每个单词，该单词出现在文档列表中。 [...]

如果您创建一个 FULLTEXT 分组三列，或三个 FULLTEXT 仅分组一，这些列将实际上由 FULLTEXT 元数据表中的条目组成。

> 当传入的文档被标记化时，各个单词（也称为“标记”）连同位置信息和相关的文档 ID (DOC_ID) 一起插入到索引表中。

基本上，似乎多列 FULLTEXT 与多个单列 FULLTEXT 索引的工作方式相同，因为单词的存储是从列的原始分隔中抽象出来的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-07T14:47:02.453

在 MySQL 中，您需要在您计划使用的每组列上创建一个单独的索引（如果您使用的是自然语言搜索。这可能与布尔搜索不同）。

从[手册](http://dev.mysql.com/doc/refman/5.1/en/fulltext-natural-language.html)：

> 对于自然语言全文搜索，要求 MATCH() 函数中命名的列与表中某些 FULLTEXT 索引中包含的列相同。[...] 如果您想单独搜索标题或正文，则需要为每列创建单独的 FULLTEXT 索引。

# twitter - Twitter 用户搜索速率限制是每个授权用户还是每个 API 帐户？

> ID：12361805
> 
> 赞同：0
> 
> 时间：2012-09-11T02:10:07.827
> 
> 标签：twitter

我知道在进行用户搜索（按兴趣、关键字等搜索 Twitter 用户）时，每小时有 60 个限制，但这是基于每个 OAuth 令牌还是每个 API 帐户？

我见过这样的线程：[https](https://dev.twitter.com/discussions/2418) ://dev.twitter.com/discussions/2418但鉴于 API 规则已经改变，我想知道现在是什么情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:32:08.040

如果您执行 Oauth，则根据新的 API 限制，您可以使用 180 次调用/小时。继承人的文档： [https ://dev.twitter.com/docs/api/1.1/get/users/search](https://dev.twitter.com/docs/api/1.1/get/users/search)

编辑：这是每个 OAuth 令牌。请记住，如果您尝试通过循环访问多个 Oauth 令牌来绕过限制，Twitter 可能会阻止您的 IP 地址。

# php - yii 输入在空值时获得焦点

> ID：12361807
> 
> 赞同：0
> 
> 时间：2012-09-11T02:10:22.620
> 
> 标签：php, twitter-bootstrap, yii

```
<?php $form=$this->beginWidget('bootstrap.widgets.TbActiveForm',array(
    'id'=>'user-form',
    'enableAjaxValidation'=>false,
)); ?>
    <?php echo $form->textFieldRow($model,'username',array('class'=>'span5','maxlength'=>20,'value'=>'input username')); ?>

<?php $this->endWidget(); ?> 
```

Yii 提供内置方法？还是要自己写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:24:45.183

难道你的意思是“占位符”属性而不是“值”？

```
<?php echo $form->textFieldRow($model,'username',
      array(
        'class'=>'span5',
        'maxlength'=>20,
        'placeholder'=>'input username'  // <- use this
      )); ?> 
```

# python - django sweetpie 在创建时使用反向关系

> ID：12361809
> 
> 赞同：0
> 
> 时间：2012-09-11T02:10:30.480
> 
> 标签：python, django, rest, tastypie

我已将以下“付款”字段添加为与 CheckResource 的关系。

```
class CheckResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user', full=True)
    venue = fields.ForeignKey(VenueResource, 'venue', full=False)
    payments = fields.ToManyField('payments.api.PaymentResource',
        attribute=lambda bundle: Payment.objects.filter(check=bundle.obj),
        related_name=check,
        full=True,
        null=True,
        blank=True
    ) 
```

在 list/get 上一切正常，但是当我尝试创建时，我收到以下错误：

```
{"error_message": "getattr(): attribute name must be string", "traceback": "Traceback (most recent call last):\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 192, in wrapper\n response = callback(request, *args, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 397, in dispatch_list\n return self.dispatch('list', request, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 427, in dispatch\n response = method(request, **kwargs)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1165, in post_list\n updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1784, in obj_create\n self.save_m2m(m2m_bundle)\n\n File \"/Library/Python/2.7/site-packages/tastypie/resources.py\", line 1942, in save_m2m\n related_mngr = getattr(bundle.obj, field_object.attribute)\n\nTypeError: getattr(): attribute name must be string\n"} 
```

有什么线索吗？

谢谢！标记

**更新**：我的 PaymentResource 看起来像这样：

```
class PaymentResource(ModelResource):
    from checks.api import CheckResource
    venue = fields.ForeignKey(VenueResource, 'venue', full=False)
    check = fields.ToOneField(CheckResource, 'check', full=False)
    user = fields.ForeignKey(UserResource, 'user', full=False) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:36:04.523

您缺少的是`related_name`您的`ToManyField`定义中的。

[文档中的来源](http://django-tastypie.readthedocs.org/en/latest/fields.html#tastypie.fields.RelatedField.related_name)

# wordpress - wordpress 获取用户在半径范围内的帖子

> ID：12361810
> 
> 赞同：3
> 
> 时间：2012-09-11T02:10:48.417
> 
> 标签：wordpress, geocoding

**细节**

行。所以我的帖子上有一个名为 Location 的自定义字段。该位置被地理编码为 LAT LNG 值。

我还有一个自定义字段供用户执行完全相同的操作。用户还可以定义以英里或公里为单位的半径。只有此范围内的帖子才会显示。

我可以通过获取帖子元数据（lat long）并将其与用户进行比较来计算我的 query_posts 循环中帖子 lat lng 和用户 lag lng 之间的距离。

如果我在循环内执行此操作并包装一个 if 语句，该语句基本上说如果小于半径显示帖子，我只会得到半径内的帖子。

**问题**
假设我添加了 5 个 posts_per_page 并且前 5 个要循环的帖子不在定义的半径内，它将显示 0 个帖子。如果前 3 个不在半径范围内，我将获得 2 个帖子。等等。

**需要解决方案**

1）显然，解决这个问题的最佳方法是在我的查询中。我可以使用 wp_query 和 query_posts，但是我不能 100% 确定如何运行我的 PHP 函数来计算用户和帖子 lat + lng 就在查询中的距离。

2) 如果我的 if 语句在 else 中没有满足，有没有办法将 query_posts post_per_page 增加 1？

**结论**

提前感谢任何对此有所了解的人。如果我没有提供足够的信息，请告诉我，我会尝试更清楚地解释。我可以发布代码，但我不寻找代码作为回报。只是方向正确的一点。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:58:10.490

这是我的最后一个查询。正是我需要它做的。我在我的数据库中创建了一个自定义表来存储来自帖子的 lat 和 lng 信息 VS 将它们添加到帖子元表中，这样我就可以加入 2 并获取从帖子到用户的距离。任何问题让我知道:)

```
$querystr = '
            SELECT *,
            (((acos(sin(('.$userLat.'*pi()/180)) * sin((lat*pi()/180))+cos(('.$userLat.'*pi()/180)) * cos((lat*pi()/180)) * cos((('.$userLng.'- lng)*pi()/180))))*180/pi())*60*1.1515) as distance
            FROM wp_posts, tbl_post_lat_lng
            WHERE wp_posts.ID = tbl_post_lat_lng.post_id
            AND wp_posts.post_status = "publish"
            AND wp_posts.post_type = "post"
            AND distance <= '.$userRadius.'
            ORDER BY wp_posts.post_date DESC
            LIMIT 5
         '; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:16:07.700

是否像不指定要返回的帖子数量一样简单，然后如果帖子不符合您的地理位置要求则跳过循环迭代？

但我想如果有很多帖子，这可能会表现得很糟糕......

这看起来像如何在查询中执行此操作：[Codex: Displaying Posts Using a Custom Select Query](http://codex.wordpress.org/Displaying_Posts_Using_a_Custom_Select_Query)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-11T17:55:16.227

如果有人需要按距离半径进行过滤，那么您可以查看此帖子。[https://gschoppe.com/wordpress/location-searches/](https://gschoppe.com/wordpress/location-searches/)

# iphone - 显示当我们为 iPhone 输入第一个字母时搜索的所有名称

> ID：12361812
> 
> 赞同：1
> 
> 时间：2012-09-11T02:11:07.550
> 
> 标签：iphone, ios, uisearchbar

我想搜索以特定字母开头的所有名称，这意味着当我在搜索栏中键入一个字符时，它将显示以该字符开头的所有名称，但不幸的是它也显示包含该字符的名称。我只想显示那些以我在搜索栏中键入的特定字符开头的名称。请告诉我解决方案。

```
 - (void)searchBar:(UISearchBar *)searchBars textDidChange:(NSString *)search
 {

 if(search.length == 0)
 {
    isFiltered = FALSE;
 } 
 else{

    isFiltered=true;
    itemData =[[NSMutableArray alloc] init];

    for (Item *itemsearch in listOfItemForStock) {

        NSString *stringId = [NSString stringWithFormat:@"%i",itemsearch.iditem];
        NSString *stringName = [NSString stringWithFormat:@"%@",itemsearch.name];
        NSRange idRange = [stringId rangeOfString:search options:(NSCaseInsensitiveSearch)];
        NSRange nameRange = [stringName rangeOfString:search options:(NSCaseInsensitiveSearch)];

        if(idRange.location!=NSNotFound || nameRange.location != NSNotFound){

            [self.itemData addObject:itemsearch];
        }
    }
}    

[self.tableView reloadData]; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:49:35.193

将名称检查更改为前缀检查。将 nameRange 变量替换为仅指示 stringName 是否以搜索字符串开头的 BOOL...

```
/// ...
BOOL nameMatches = [[stringName lowercaseString] hasPrefix:[search lowercaseString]];

if(idRange.location!=NSNotFound || nameMatches){
    //.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:43:00.357

if(idRange.location!=NSNotFound || nameRange.location != NSNotFound){

```
 NSComparisonResult result = [itemsearch.name compare:search options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [search length])];
            NSComparisonResult resultId = [[NSString stringWithFormat:@"%i",itemsearch.iditem ] compare:search options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [search length])];

            if (result == NSOrderedSame || resultId == NSOrderedSame){
                [self.itemData addObject:itemsearch];
            }
        } 
```

# java - 如何对字符串 ArrayList 进行合并排序

> ID：12361814
> 
> 赞同：1
> 
> 时间：2012-09-11T02:11:44.770
> 
> 标签：java, sorting

所以在过去的几天里，我一直在试图弄清楚这段代码，但我一无所获。这是我得到的最远的，但现在它没有显示最终的排序数组，并且我尝试添加到返回合并语句之后的任何代码显然无法访问：/

```
import java.util.*;

public class MergeTestStringArray
{

  public static void main(String[] args)
  {
    ArrayList< String > array = new ArrayList< String >();

    array.add("John");
    array.add("Victor");
    array.add("Joe");
    array.add("Jackson");
    array.add("Anthony");
    array.add("Angelina");
    array.add("George");
    array.add("Paul");

    ArrayList< String > sortedArray = new ArrayList< String >();

    sortedArray = mergeSort(array);

    for (int i = 0; i < sortedArray.size(); i++)
    {
        System.out.println(" " + sortedArray.get(i) );
    }
  }

  public static ArrayList< String > mergeSort(ArrayList< String > list)
  {
    ArrayList < String > sorted = new ArrayList< String >();
    if (list.size() == 1)
    {
        sorted = list;
    } else {
        int mid1 = list.size() /2;

        ArrayList< String > left = new ArrayList< String >();
        ArrayList< String > right = new ArrayList< String >();

        for ( int x = 0; x < mid1; x++) {
            left.add(list.get(x));

        }
        for ( int x = mid1; x < list.size(); x++) {
            right.add(list.get(x));
        }

        System.out.println("Left Array: " + left);
        System.out.println("Right Array)" + right);

        mergeSort(left);
        mergeSort(right);
        mergeArray(left,right);
    }

    return sorted;
  }

private static ArrayList< String > mergeArray(ArrayList< String > left, ArrayList< String > right)
{
    ArrayList< String > merged = new ArrayList< String >();

    int i = 0;
    int l = 0;
    int r = 0;

    while (l < left.size() && r < right.size())
           {
              if ((left.get(l)).compareTo(right.get(r)) < 0)
              {
                 merged.add(left.get(l));
                 l++;
              }
              else
              {
                 merged.add(right.get(r));
                 r++;
              }

              i++;
           }

           while (l < left.size())
           {
              merged.add(left.get(l));
              l++;
              i++;
           }

           // Append rest of the values in the right half, if any...
           while (r < right.size())
           {
              merged.add(right.get(r));
              r++;
                  i++;
           }

    return merged;

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:22:20.847

您的错误在您的 mergeSort 函数中。具体来说，在您的递归情况下，您实际上从未将排序结果保存到`merged`列表中。尝试更换

```
mergeArray(left,right); 
```

和

```
sorted = mergeArray(left,right); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:15:58.467

不确定您的问题是什么，但是返回语句后的语句通常无法访问。一旦函数到达 return 语句，它将存在该函数并在该 return 语句处返回值..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T02:29:07.967

将返回值赋给`mergeArray`to `sorted`。

```
sorted = mergeArray(left,right); 
```

并分配您的 mergeSort 调用的结果：

```
 left = mergeSort(left);
        right = mergeSort(right); 
```

此外，当您不打算使用它时，您不需要创建一个空的 ArrayList 来声明一个变量。

以下内容就足够了：

```
ArrayList < String > sorted; 
```

# grails - Grails 域中的自定义 16 位 ID 生成器

> ID：12361815
> 
> 赞同：1
> 
> 时间：2012-09-11T02:11:58.747
> 
> 标签：grails, grails-orm

我想使用 16 位随机数作为 GORM 创建的所有表的 ID，而不是 GORM 创建的 ID 序列。我需要关于如何做到这一点的帮助。我试着做

静态映射 = { id 生成器：'uuid2' }

它没有用。帮助表示赞赏

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T03:22:59.023

如果您只想做一个自定义生成器，您可以扩展 IdentifierGenerator：

```
class CustomGenerator extends IdentifierGenerator {
    Serializable generate(SessionImplementor session, Object object) {
        return "myroutine"
    }
}

class Book {
    String id
    static mapping = {
         generator:"some.package.CustomGenerator", column:"id", unique:"true"
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T03:17:52.797

您可以使用简单的映射，例如：

```
class Book {
    static mapping = {
        id generator:'assigned'
     }
    def beforeInsert() {
        id = YourRandomGenerator.nextInt()
    }
} 
```

注意使用 beforeInsert 事件来分配 id。问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-01T15:59:51.993

您可以创建一个自定义 id 生成器，如下所示

```
public class CustomIdGenerator implements IdentifierGenerator {

public synchronized Serializable generate(final SessionImplementor session, Object obj) {
        return GENERATED ID; //return generated id 
    }
} 
```

现在，如果您希望它仅用于某些特定域..那么您可以像这样在映射闭包中执行它

```
mapping = {
        id generator:'packagename.CustomIdGenerator'
    } 
```

但是如果你想让你的所有域都使用自定义 id 生成器，你可以像这样在 Config.groovy 中指定它，它将适用于所有域

```
grails {
  gorm.default.mapping = {
        id column: 'id', generator:'packagename.CustomIdGenerator'
    }
} 
```

# ms-access-2010 - MS Access 2010 Forms!FormName!ControlName 什么都不返回？

> ID：12361819
> 
> 赞同：1
> 
> 时间：2012-09-11T02:12:18.907
> 
> 标签：ms-access-2010

我有查询

```
SELECT [Forms]![frmDataEntry]![Combo3]; 
```

我还有一个名为 frmDataEntry 的表单，上面有一个名为 combo3 的组合框。组合框有多个值，当我运行查询时选择了一个。我使用宏表达式生成器在按下按钮时打开查询。

昨晚，相似/相同的 sql 在同一个组合框中工作。我试过用不同的形式和控件做一些事情，但没有任何结果。我还尝试进行新查询并再次输入 sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:35:31.860

My `cboUserID`on`Form2`选择了 47 作为其绑定值。

此查询返回一个空字段：

```
SELECT Forms!Form2!cboUserID; 
```

明确告诉数据库引擎我想要组合的`.Value`属性会给我一个斜杠字符 ( `/`) 作为此查询的结果：

```
SELECT Forms!Form2!cboUserID.Value 
```

然而，这个查询告诉我“Long”作为组合绑定值的数据类型，这是正确的：

```
SELECT TypeName(Forms!Form2!cboUserID.Value) 
```

所以我尝试了`CLng()`通知数据库引擎我想要组合的值作为长整数的函数，这个查询给了我 47 ......这是组合中的选定值：

```
SELECT CLng(Forms!Form2!cboUserID.Value); 
```

我不知道为什么会这样；我以前从未尝试过。我只是建议您为您的组合尝试适当的数据类型转换功能。[ `CLng`; `CInt`; `CDbl`; `CStr`; `CDate`; 等] 我也使用 Access 2007 进行测试，因为我没有 2010。我希望 2010 对你来说表现类似。

# jquery - 如何使jquery函数多次工作

> ID：12361823
> 
> 赞同：-5
> 
> 时间：2012-09-11T02:12:49.483
> 
> 标签：jquery

有人能帮我吗？我想问一下JQuery上的功能。当我在我的网站上提供 JQuery 功能时，我想在 2 个对象上提供这些功能。但不知何故，当我将 Jquery 函数提供给第二个对象时，不知何故函数不起作用。我在具有相同 id 的两个对象上提供这些函数。那么，任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:17:50.543

两个元素可能没有相同的 ID。这在 HTML（和许多其他东西）中是被禁止的。事实上，甚至 ID 的定义都禁止它：ID = 标识⇒ 唯一。

# objective-c - 如何使用 AFNetworking 立即强制取消 NSOperation？

> ID：12361824
> 
> 赞同：4
> 
> 时间：2012-09-11T02:12:53.053
> 
> 标签：objective-c, cocoa-touch, nsoperation, afnetworking

我在我的应用程序中使用 AFNetworking，并尝试在我的进度 HUD 中实现“点击取消”功能。我有一个管理所有 HTTP 请求的单例类。如果点击进度HUD，我会调用：

```
[[[HTTPRequestSingleton sharedClient] operationQueue] cancelAllOperations]; 
```

但这不会像我需要的那样“取消”操作。我阅读了[`NSOperationQueue`文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)并遇到了这个：

> 取消操作对象会使对象留在队列中，但会通知对象它应该尽快中止其任务。对于当前正在执行的操作，这意味着操作对象的工作代码必须检查取消状态，停止正在执行的操作，并将自身标记为已完成。对于已排队但尚未执行的操作，队列仍必须调用操作对象的 start 方法，以便它可以处理取消事件并将自己标记为已完成。

关于`cancelAllOperations`方法：

> 此方法向队列中当前的所有操作发送取消消息。排队的操作在开始执行之前被取消。如果一个操作已经在执行，则由该操作来识别取消并停止它正在执行的操作。

我的问题似乎特别涉及已经执行的操作，我想立即取消。使用 AFNetworking，我如何提醒操作它应该取消并丢弃有关请求的所有信息？

**用于操作的代码**

```
AFJSONRequestOperation *loginOperation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

    //operation was successful

    if (loginOperation.isCancelled)
    {
        //can't do this. variable 'loginOperation' is uninitialized when captured by block      
    }

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

    //operation failed

}]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T15:44:21.603

经过一上午的 AFNetworking 源代码挖掘后，我发现我的操作没有取消的原因与操作本身无关，而是因为我一直在错误地启动操作。我一直在使用

```
[NSOperation start]; 
```

当我应该将它添加到我`HTTPRequestSingleton`的操作队列时：

```
[[[HTTPRequestSingleton sharedClient] operationQueue] addOperation:NSOperation]; 
```

将它添加到队列允许它被正确取消而无需检查`isCancelled`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T03:07:15.863

> 完成块
> 
> 当操作的主要任务完成时返回要执行的块。
> 
> *   (void (^)(void))completionBlock 返回值 操作的主要任务完成后要执行的块。这个块没有参数，也没有返回值。
> 
> 讨论 当 isFinished 方法返回的值变为 YES 时，就会执行你提供的完成块。因此，该块由操作对象在操作的主要任务 **完成或取消**后执行。

检查操作`isCancelled`属性以了解调用回调的原因。

* * *

查看初始化代码：

```
+ (AFJSONRequestOperation *)JSONRequestOperationWithRequest:(NSURLRequest *)urlRequest
                                                    success:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, id JSON))success 
                                                    failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON))failure
{
    AFJSONRequestOperation *requestOperation = [[[self alloc] initWithRequest:urlRequest] autorelease];
    [requestOperation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        if (success) {
            success(operation.request, operation.response, responseObject);
        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        if (failure) {
            failure(operation.request, operation.response, error, [(AFJSONRequestOperation *)operation responseJSON]);
        }
    }];

    return requestOperation;
} 
```

您想要`operation`在回调中获取 var 是`setCompletionBlockWithSuccess`在初始化之后 使用，`JSONRequestOperationWithRequest:success:failure:`这有点矫枉过正，更好的方法是复制代码并使用

```
 AFJSONRequestOperation *requestOperation = [[[self alloc] initWithRequest:urlRequest] autorelease];
    [requestOperation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    // ... here you can check `isCancelled` flag 
```

# ios - YouTube iframe 播放器 - 在 iOS 上触发全屏

> ID：12361825
> 
> 赞同：12
> 
> 时间：2012-09-11T02:12:55.207
> 
> 标签：ios, objective-c, youtube, youtube-iframe-api

使用 YouTube iframe 嵌入播放器，有没有办法以编程方式触发全屏？我想删除默认控件（使用控件 = 0），但随后能够自行创建自定义全屏按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-09T16:05:15.140

使 iframe 不是全屏而是全页：

```
 function fullscreen() {
        var vid = document.getElementById("vid");
        vid.style.position = "absolute";
        vid.style.width = "100vw";
        vid.style.height = "100vh";
        vid.style.top = "0px";
        vid.style.left = "0px";
        document.getElementById("exit").style.display = "inline";
    }
    function exitfullscreen() {
      var vid = document.getElementById("vid");
      vid.style.position = "";
      vid.style.width = "";
      vid.style.height = "";
      vid.style.top = "";
      vid.style.left = "";
      document.getElementById("exit").style.display = "none";
    }
```

```
<iframe width="560" height="315" src="https://www.youtube.com/embed/fq6qcvfZldE?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" id="vid" allowfullscreen></iframe>
    <button onClick="fullscreen()">Fullscreen</button>
    <button style="position: fixed; 
                   bottom: 5px; 
                   right: 5px; 
                   display: none;
                   z-index: 2000;" id="exit" onClick="exitfullscreen()">Exit Fullscreen</button>
```

`full page`代码片段右上角的按钮也以这种方式工作。如果您想让浏览器全屏显示，您可以尝试`document.requestFullscreen();`，但这仍然是实验性的，适用于极少数浏览器。看看这个函数的[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API)主题。

编辑：刚刚发现：[https](https://developers.google.com/youtube/?csw=1#player_apis) ://developers.google.com/youtube/?csw=1#player_apis ，官方 youtube 播放器 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-11T20:02:11.853

在 Webkit 浏览器中尝试以下操作：

```
if (typeof iframe.webkitRequestFullScreen === 'function') {
    button.addEventListener('click', function () {
        iframe.webkitRequestFullScreen();
    }, false);
} 
```

请注意，如果没有用户手势（在本例中为“单击”），这将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-28T10:56:41.847

您可以使用此库[XCDYouTubeKit](https://github.com/0xced/XCDYouTubeKit)代替 iframe 播放器。
它非常简单而强大。支持全屏和非全屏。

# iphone - UIImage 类我有困难

> ID：12361830
> 
> 赞同：-3
> 
> 时间：2012-09-11T02:13:59.493
> 
> 标签：iphone, ios, cocoa, uiimageview, uiimage

谁能给我一个使用的代码或项目示例，因为我想用 200 多个图像制作全屏图像（iPhone）而不会使设备崩溃。

`+ (UIImage *)animatedImageNamed:(NSString *)name duration:(NSTimeInterval)duration`

还有关于如何调用它，例如`[self (method)]`，关于如何停止动画。因为当我在苹果文档中阅读它时，我很难过，因为我没有看到有关该语法的示例代码。顺便说一句，我是 iOS 开发的实习生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:25:21.723

在方法签名中，您可以看到`+`不是实例而是类方法的符号（参见[区别](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods)）。为了调用它，你使用

```
UIImage * myAnimatedImage = [UIImage animatedImageNamed:@"Imagename.png" duration:12.0f];
myImageView.image = myAnimatedImage; // the same as [myImageView setImage:myAnimatedImage]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T03:01:27.113

两百张全屏图像会占用大量内存。您应该将图像转换为[视频文件](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html)，然后使用 an`AVPlayerLayer`来播放它。您需要阅读[*AV Foundation Programming Guide*](http://developer.apple.com/library/ios/#Documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW1)[的播放部分](http://developer.apple.com/library/ios/#Documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html#//apple_ref/doc/uid/TP40010188-CH3-SW1)*。*

# android - Android sprite sheet 动画行为变化基于 android:minSdkVersion

> ID：12361831
> 
> 赞同：2
> 
> 时间：2012-09-11T02:14:14.673
> 
> 标签：android, garbage-collection, sprite-sheet

我做了下面关于android动画和精灵表的教程，一切都很好，直到我改变了

```
<uses-sdk android:minSdkVersion="3" /> in my manifest from 3 to 10 
```

[http://warriormill.com/2009/10/adroid-game-development-part-1-gameloop-sprites/comment-page-1/#comment-1091](http://warriormill.com/2009/10/adroid-game-development-part-1-gameloop-sprites/comment-page-1/#comment-1091)

我注意到发生了两件非常奇怪的事情：

1.  垃圾收集器运行非常频繁，性能显着降低，导致内存不足错误。
2.  动画精灵未正确绘制，因为工作表上精灵位置的坐标已关闭。

有人可以向我解释为什么会这样吗？此外，我觉得我应该使用 min-sdk 版本 3，因为它执行得更快。那样行吗？

# excel - 将第三方应用程序 (MS Excel) 与 SAP R/3 连接

> ID：12361833
> 
> 赞同：2
> 
> 时间：2012-09-11T02:14:45.953
> 
> 标签：excel, vba, saprfc, sap-basis

我正在制定与 SAP 通信 MS Excel（VBA 宏）的解决方案。有时很难联系到您工作的任何公司的 SAP 支持人员，因此最好找出自己的解决方案。

出于这个原因，我从基本的开始：“将我自己的用户配置文件与 SAP R/3 连接”。做一些谷歌研究，我发现了一篇关于连接性的好[论文](http://scn.sap.com/docs/DOC-10447)，这里是代码的关键部分：

```
Dim objBAPIControl As Object 'Function Control (Collective object)
Dim sapConnection As Object 'Connection object
Set objBAPIControl = CreateObject("SAP.Functions")
Set sapConnection = objBAPIControl.Connection

sapConnection.client = "32"
sapConnection.user = "myUser"
sapConnection.Language = "EN"
sapConnection.hostname = "qwerty.example.com"
sapConnection.Password = "myPass" 
```

（以及更多用户配置文件值............）

稍后，我做了第二步，即读取一些表（在本例中为用户表）

```
If sapConnection.logon(1, True) <> True Then
MsgBox "No connection to R/3!"
Exit Sub 'End program
End If
Set objUserList = objBAPIControl.Add("BAPI_USER_GETLIST")
Set objUserDetail = objBAPIControl.Add("BAPI_USER_GET_DETAIL")

returnFunc = objUserList.Call
If returnFunc = True Then
Dim objTable As Object
Set objTable = objUserList.Tables("USERLIST")
ActiveSheet.Cells(1, 1) = "User count :" & objTable.RowCount 
```

但现在，这是我的问题：如何运行从 VBA 触发的一些事务（LM02、LS26、LX03 等）？

## 感谢你们！

PS。我正在使用 MS Office 2007 和 Windows 7。

- 编辑：

嘿，我改变了我应对挑战的方式（我会让上面的 OP 帮助其他人）

这必须添加到第一个

```
Dim RfcCallTransaction As Object
Dim Messages As Object
Dim BdcTable As Object 
```

与 SAP 的连接是相同的，但是一旦您登录：

```
If objBAPIControl.Connection.Logon(0, False) <> True Then
    Exit Sub
End If

Set RfcCallTransaction = objBAPIControl.Add("RFC_CALL_TRANSACTION_USING") 
```

[在这里](http://www.se80.co.uk/sapfms/r/rfc_/rfc_call_transaction_using.htm)您可以找到`RFC_CALL_TRANSACTION`旧函数的“新”参数。

```
 RfcCallTransaction.exports("tcode") = "SE16"
    RfcCallTransaction.exports("mode") = "N"
Set BdcTable = RfcCallTransaction.Tables("bt_data") 
```

在这部分之前，我确信三件事：

1) 它确实连接到 SAP R/3

2）它运行“SE16”事务

3) 它可以接收来自 BdcTable 的 Batch 输入

缺少的部分是，如何“格式化” BdcTable（我认为它必须是 ABAP 语言）以上传我想在 SE16 上运行的确切数据（表）。

编辑：我找到了一个我正在寻找的“格式化”表的例子：

```
add_bdcdata BdcTable, "SAPLSETB", "230", "X", "", ""
add_bdcdata BdcTable, "", "", "", "BDC_CURSOR", "DATABROWSE-TABLENAME"
add_bdcdata BdcTable, "", "", "", "BDC_OKCODE", "=ANZE"
add_bdcdata BdcTable, "", "", "", "DATABROWSE-TABLENAME", "KNA1"
add_bdcdata BdcTable, "/1BCDWB/DBKNA1", "1000", "X", "", ""
add_bdcdata BdcTable, "", "", "", "BDC_CURSOR", "MAX_SEL"
add_bdcdata BdcTable, "", "", "", "BDC_OKCODE", "=ONLI"
add_bdcdata BdcTable, "", "", "", "LIST_BRE", "250"
add_bdcdata BdcTable, "", "", "", "MAX_SEL", "5"
add_bdcdata BdcTable, "SAPMSSY0", "120", "X", "", ""
add_bdcdata BdcTable, "", "", "", "BDC_CURSOR", "01/02/2012"
add_bdcdata BdcTable, "", "", "", "BDC_OKCODE", "=%EX"
add_bdcdata BdcTable, "/1BCDWB/DBKNA1", "1000", "X", "", ""
add_bdcdata BdcTable, "", "", "", "BDC_OKCODE", "/EE"
add_bdcdata BdcTable, "", "", "", "BDC_CURSOR", "I1-LOW"
add_bdcdata BdcTable, "SAPLSETB", "230", "X", "", ""
add_bdcdata BdcTable, "", "", "", "BDC_OKCODE", "/EBACK"
add_bdcdata BdcTable, "", "", "", "BDC_CURSOR", "DATABROWSE-TABLENAME" 
```

上面的代码仍然是 VBA 宏的一部分。但我不知道所有这些填充是什么意思。

此任务完成后，第二个挑战是将数据自动保存到 MS Excel 工作表中。

（你能告诉我所有的编辑工作是否正常，还是我应该粘贴新代码并删除历史记录？）

已编辑：我在 SCN 平台上提出了与摘要相同的问题。你可以[在这里查看](http://scn.sap.com/thread/3236236)。

已编辑：我在这个挑战中的目标是通过 VBA 宏运行交易（我正在寻找的 TCODE 是 LM02，仓库的 bin 到 bin 交易），上传从 MS Excel 文件中提取的一些日期并执行交易。

-- 最后一次编辑：如果没有 SAP IT 支持的帮助，这项任务似乎无法完成。2012 年 9 月 19 日 | 还在研究这个话题。25/09/12 | 02/OCT/12 --> 我将尝试[使用 AutoIT](http://www.autoitscript.com/site/autoit/)进行日志记录，运行基本 Tcode 并显示报告。在我仔细检查后，我会评论我的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:10:10.423

注意：这是@fabiopagoti 答案的替代建议，一种完全不同的方法。

如果 - 正如您在另一条评论中所建议的 - 您想将数据导入 R/3 应用程序，您最好不要试图绕过公司 IT。相反，您可以尝试与他们交谈并访问[Legacy System Migration Workbench](http://help.sap.com/saphelp_nw70/helpdata/en/ad/2d54a41d7011d2b42e006094b944c8/frameset.htm) (LSMW)。这是一个强大的工具包，允许您记录对话步骤（在某些条件下），导入一些数据（例如从 CSV 文件），然后将记录和数据结合起来，用不同的数据“重播”相同的步骤 - 所有这些都使用标准功能，并且不绕过任何安全检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:08:04.157

好吧，让我引用我得到的最佳答案。我把它贴在这里是因为我认为其他人会和我有同样的问题。

> 第一步是了解你的事务是否有 RFC 或 BAPI，但你没有 ABAP 事务的权限，所以我不知道你如何找到它。
> 
> 理论上您可以尝试在WEB或SAP文档中查找它，但是（如果存在）您需要检查定义导入/导出参数的接口.....所以您应该拥有SE37的授权.
> 
> 下一步取决于您是否可以找到 LM02 的 RFC 函数：
> 
> 如果有一个函数，你需要了解如何运行它
> 
> 如果没有功能。您需要了解您或 abaper 是否可以开发定制的。
> 
> 最大限度

感谢您的研究工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:16:45.060

对不起，我的朋友，但你不会比这更进一步。

您在代码中所做的是调用 BAPI（基本上是 RFC 启用函数）。也就是说，SAP 提供了标准函数，可以从不同的系统调用。你可以认为这是一个老式的 API。也可以创建自定义 BAPI，但实际上几乎没有人这样做。

好消息是，通常，我说过 BAPI 通常会带来与标准事务相同的功能。因此，理论上您可以通过事务代码执行的操作可以通过 BAPI 调用执行。

BAPI 与事务代码的关系不是一对一的。例如，您可以使用单个事务来插入、搜索、删除和编辑特定类型的文档，但要使用 BAPI 调用来实现这一点，您将需要其中的许多（一个用于创建文档，一个用于删除，一个用于检索等）。

有一个名为“BAPI”的交易（可能是唯一一个名称不错的 tx 代码），它包含系统中的所有 BAPI、它的参数和（一些糟糕的）文档。

# jquery - Flexslider 的问题

> ID：12361843
> 
> 赞同：0
> 
> 时间：2012-09-11T02:16:53.160
> 
> 标签：jquery, flexslider

我正在尝试使用 Flexslider 创建一个响应式滑块。我有一些问题。我设置了以下设置：

```
 $('.portfolio .flexslider').flexslider({
    animation: "slide",
    animationLoop: false,
    controlNav: false,
    directionNav: true,
    slideshow: false,
    itemWidth: 490,
    itemMargin: 30,
    minItems: 1,
    move: 1

  }); 
```

它似乎没有应用`animationLoop: false`，当您单击右方向导航链接时，它先向左然后向右，当我加载页面时，有时高度似乎都搞砸了。您可以在此处查看预览。有什么想法可能导致这些问题吗？

[http://staging.pautlerdesign.com/portfolio/index-test.php](http://staging.pautlerdesign.com/portfolio/index-test.php)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:59:26.740

您在使用[Flexslider 2](http://www.woothemes.com/flexslider/ "弹性滑块 2")吗？

此外，如果您实际上一次不显示多个项目，则不需要轮播参数（`itemWidth`, `itemMargin`, `minItems`, `maxItems`, `move`），您真正需要的是：

```
$('.portfolio .flexslider').flexslider({
    animation: "slide",
    animationLoop: false,
    controlNav: false,
    directionNav: true,
    slideshow: false
}); 
```

您可能还需要将 section.portfolio-piece .flexslider ul.slides li 的现有 css 更改为：

```
section.portfolio-piece .flexslider ul.slides li {
    margin: 0;
} 
```

这可能会解决您看到的问题。

# ffmpeg - 连续图像的通配符

> ID：12361845
> 
> 赞同：6
> 
> 时间：2012-09-11T02:17:07.107
> 
> 标签：ffmpeg, jpeg, avconv

我正在尝试使用 avconv 为一系列 jpg 文件设置动画。基于大量示例，我正在尝试使用 %d.jpg 来指定文件。或 %05d.jpg。但是，我得到：

```
avconv -i %d.jpg a.avi
avconv version 0.8.3-4:0.8.3-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the Libav developers built on Jun 12 2012 16:37:58 with gcc 4.6.3
%d.jpg: No such file or directory 
```

这是我的目录列表的片段：

```
10380.jpg
10390.jpg
10400.jpg
1040.jpg
10410.jpg
10420.jpg
10430.jpg
10440.jpg 
```

从 00000.jpg 到 14400.jpg 有 jpeg

我不太了解通配符系统，但这就是示例中的内容。

（注意：我将其标记为 ffmpeg，因为 avconv 的标记不存在，并且 avconv 取代了 ffmpeg）

**更新** 我正在根据@av501 下面的答案更新问题。

首先，我有一个按 10 顺序排列的 png 文件列表。它们的文本前面有一个 5 位整数。例如：

```
SkinMattekNutrient_py_00000.png
SkinMattekNutrient_py_00010.png
SkinMattekNutrient_py_00020.png
...
SkinMattekNutrient_py_10440.png 
```

将这些批量转换为 jpg 的方法是什么？我试过了

```
convert ...
SkinMattekNutrient_py_%05d.png %05d.jpg 
```

和

```
convert ...
SkinMattekNutrient_py_%5d.png %5d.jpg 
```

但我得到：

```
convert SkinMattekNutrient_py_%05d.png %05d.jpg
convert: missing an image filename `%05d.jpg' @ error/convert.c/ConvertImageCommand/3011. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T04:58:50.027

您需要为您的文件使用 %5d。但你似乎有两个问题

要使 %5d 工作，您必须有 5 位数字编号。[你有一个1040.jpg]而且也是连续的。00000.jpg 然后是 00001.jpg。您的文件名似乎增加了 10。

如果它们都是 10 的倍数，那么你可以使用 %d50.jpg [但你仍然需要修复你的 1040.jpg]

否则命令行在这里工作[我正在使用 ffmpeg -i %5d.jpg out.avi 和 ffmpeg -i %5d0.jpg out.avi]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T20:53:42.167

这是在 Bash shell 中批量转换图像文件的一种方法：

```
for f in *.png; do ffmpeg -i "$f" "${f%.png}.jpg"; done 
```

我相信这种技术适用于任何需要单独列出输入和输出文件的命令。在您的情况下，这将是：

```
for f in *.png; do convert "$f" "${f%.png}.jpg"; done 
```

# php - 将时间戳转换为日期会在 php 中给出错误的日期

> ID：12361847
> 
> 赞同：0
> 
> 时间：2012-09-11T02:17:20.633
> 
> 标签：php, date, timestamp

在从 ftp 上的文件夹中提取的文件中回显时，我无法从时间戳中获取正确的日期。

```
$it = new DirectoryIterator("blahblahblah/news");
$files = array();
foreach($it as $file) {
if (!$it->isDot()) {
    $files[] = array($file->getMTime(), $file->getFilename());
}}

rsort($files);
 foreach ($files as $f) {
     $mil = $f[0];
     $seconds = $mil / 1000;
     $seconds = round($seconds);
     $theDate = date("d/m/Y", $seconds);
echo "<img src=\"images/content/social-icons/article.png\" width=\"18\" height=\"19\" alt=\"article\">" . $theDate . "-  <a  style=\"background-color:transparent;\" href=\"news/$f[1]\">" . $f[1] . "</a>";
echo "<br>";

 } 
```

我正在按时间戳对文件进行排序，然后尝试使用文件名和文件链接来回显它们。问题是 date() 出现在 1970 年 1 月 16 日...我已将时间戳放入在线转换器中，它们是准确的，所以我很困惑。我还对时间戳进行了四舍五入，但这也无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T02:38:40.500

[getMTim​​e](http://www.php.net/manual/en/directoryiterator.getmtime.php)返回一个 Unix 时间戳。

Unix 时间戳通常是自 Unix 纪元以来的秒数（不是毫秒数）。 [见这里](http://www.php.net/manual/en/directoryiterator.getmtime.php)。

所以这：`$seconds = $mil / 1000;`是你的错误来源。

简单地设置`$seconds = $f[0]`，你应该很高兴。

更正的代码：

```
$it = new DirectoryIterator("blahblahblah/news");
$files = array();
foreach($it as $file) {
if (!$it->isDot()) {
    $files[] = array($file->getMTime(), $file->getFilename());
}}

rsort($files);
 foreach ($files as $f) {
     $seconds = $f[0];
     $seconds = round($seconds);
     $theDate = date("d/m/Y", $seconds);
echo "<img src=\"images/content/social-icons/article.png\" width=\"18\" height=\"19\" alt=\"article\">" . $theDate . "-  <a  style=\"background-color:transparent;\" href=\"news/$f[1]\">" . $f[1] . "</a>";
echo "<br>";

 } 
```

# css - 在居中和底部对齐时自动调整 div 中的图像大小

> ID：12361851
> 
> 赞同：1
> 
> 时间：2012-09-11T02:17:51.660
> 
> 标签：css, html, position, margin, autoscaling

我正试图解决这个问题，但我并没有取得太多进展。我有一个自动缩放到任何窗口大小的背景图像。在它前面，我试图将始终固定在页面底部的图像居中，同时可扩展。这是我现在拥有的 CSS。

```
 #guys img{
            width:35%;
            margin-left:auto;
            margin-right:auto;
            bottom:0px;
            position: fixed;
        } 
```

这就是我所说的DIV

```
 <div id="guys">
        <img src="img/boys.png" alt="">
    </div> 
```

我最终得到的是固定在页面底部的图像，并且是可扩展的，但我从来没有能够以它为中心结束。有什么想法吗？我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:40:18.863

正如我所看到的，您的图像已经在一个 div 中，使该 div 相对和边距自动与您的图像具有相同的宽度，一切都应该正常工作。

```
 #guys{
        position:relative;
        margin:auto;
        width:35%;

    }       
       #guys img{
        width:35%;
        bottom:0px;
        position: fixed;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:31:28.907

固定位置后，边距自动停止工作。

作为替代方案，您可以将 img 的 left 值设为 50%（将页面中心与图像左侧对齐），然后将 margin-left 设为 -17.5%，将图像的中心移动到页面的中心。

见我的[jsfiddle](http://jsfiddle.net/V8GHM/)。

摘抄：

```
#bottomCentered {

    left: 50%;
    margin-left: -17.5%; /* Half of the width */

    position: fixed;
    width:35%;
    margin-left:auto;
    margin-right:auto;
    bottom:0;
    position: fixed;
    display: inline-block;
    height: 20px;
    background: #00FF00;
} 
```

# c# - MONO 中的绘画是如何工作的 [开罗]

> ID：12361852
> 
> 赞同：1
> 
> 时间：2012-09-11T02:17:59.340
> 
> 标签：c#, mono, monodevelop

问题就像这幅画在 MONO CAIRO C# 中是如何工作的？

在我的应用程序中，我正在建造一所房子，设计就像我为房子的每个部分都有一个清单，比如一个屋顶清单，一个墙壁清单，一个地下室清单。一旦所有清单都准备好了，我就会打印列表。

这是我将调用来绘制房子的函数

```
public void DrawHouse (Context ct)
{
    house.HouseDrawing.DrawBasement(ct);
    house.HouseDrawing.DrwaWall(ct);
    house.HouseDrawing.DrawRoof(ct);
    house.HouseDrawing.DrawWindows(ct);
    house.HouseDrawing.DrawDoor(ct);
} 
```

据我所知，在执行 lase 语句之前，UI 上不应显示任何内容。但在我的情况下，它会在语句执行后立即打印。

请让我知道它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:37:38.260

正在发生的是 imo 的预期行为。我不确定 house.HouseDrawing.DrawBasement 做了什么，但我认为它会绘制到屏幕上。如果是这种情况，则执行这些语句时将出现您正在绘制的任何内容。该绘图不会在屏幕上永久显示，如果屏幕的该部分因任何原因（例如最小化窗口、移动另一个窗口等）无效，则需要重新绘制。

# node.js - 用于 SaaS 的 MongoDB 中的多个数据库

> ID：12361854
> 
> 赞同：6
> 
> 时间：2012-09-11T02:18:11.257
> 
> 标签：node.js, mongodb, mongoose

我正在 node.js 中构建一个 SaaS 应用程序，并希望将 MongoDB 用于具有 Mongoose ODM 的数据库。我需要支持成百上千（希望如此）的多个客户，并且每个客户的数据之间没有交互。

我的想法是为每个客户创建一个新数据库和一个保存全球信息的“主”数据库。例如，应用程序只有一个登录页面，所以我想将所有用户/密码信息存储在“主”数据库中，但所有用户的个人资料信息都存储在他们所属的客户数据库中。我觉得这将是一个很好的设计，因为它将完全隔离每个客户的数据，并且可以轻松地单独备份/恢复客户。

我担心从 node.js 连接到多个数据库的性能影响。有谁知道这将如何影响该应用程序，或者对总体架构有什么看法？

额外问题：您是否知道在 SaaS 解决方案中进行反向操作并将所有客户数据存储在单个数据库中（与 customerid 分隔）的任何审计影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T03:21:04.663

这不是一个简单的答案，因为很大程度上取决于您的应用程序架构、使用和查询模式、客户端之间的分布（即：客户端之间的使用水平是否大致相同，或者您是否可以让 10% 的客户端使用 90% 的资源），您可以在代码与操作管理以及许多其他问题上花费多少。这里有一些要考虑的事情：

1）拥有一个数据库将使您的操作管理更容易，需要更少的计算资源，并且可以让您更好地横向扩展，但是对访问层进行编码会更加困难，并且出于显而易见的原因，您确实必须很好地构建您的安全层。您还将在客户端/网络服务器端消耗更少的资源，因为连接会更少。

处理一个单体数据库时，有两种流行的模式选项：

*   您可以将所有相似的数据放在一个集合中（即：所有帐户的配置文件都放在同一个集合中），并为每个文档提供一个 clientid 键来标识哪些数据属于哪个帐户。这可能会为您提供最佳选择（取决于您的架构架构），以使用最少的计算资源进行横向扩展。
*   另一种选择是按集合分隔客户端数据 - 每个客户端将在数据库中拥有自己的集合，并以 clientid 前缀标识（即：clientid_userprofiles）。

2) 每个客户端的数据库选项会给您带来更多的运维管理难题并且成本更高，因为您需要更多的计算资源。另一方面，您的编码成本应该更低，因为代码更容易编写。它还可以让您更好地在重度用户和轻量级用户之间分配资源。例如，您可以将使用量大的客户端转移到功能更强大的机器上，并为每个客户提供分片。

3）您可以提供两个选项的组合 - 为高端用户（支付更多费用的帐户）提供专用数据库，然后为低端客户和测试/免费增值帐户提供按集合分隔数据的共享数据库。

请注意，如果您确实使用了许多数据库路线，则应查看 --smallfiles 启动选项。这将帮助您解决有很多人设置“测试帐户”但对它们做的不多的情况。

无论如何，希望以上内容能让您深思。[在https://groups.google.com/forum/?fromgroups#!searchin/mongodb-user/multitenant](https://groups.google.com/forum/?fromgroups#!searchin/mongodb-user/multitenant)上进行搜索，因为 Mongo 论坛中已经就这个特定问题进行了许多讨论。

至于审计影响，取决于您需要遵守的审计合规级别。如果您期望财富 1000 强的客户，您的合规要求将会高得多（而且成本更高——想想 10 美元到 100 美元的数千美元），如果您的客户是可能从未听说过 SAS70 的初创公司等。答案还取决于您存储的数据类型 - 是用户财务数据，还是只是用户论坛？基本上，如果对未来需要通过大公司的安全审计有任何顾虑，那就别想共享数据库的方法了。

# xcode - brew install macvim 不适用于“xcode-lite”，即 xcode 的命令行工具？

> ID：12361856
> 
> 赞同：5
> 
> 时间：2012-09-11T02:18:23.657
> 
> 标签：xcode, installation, homebrew, xcodebuild

根据[Kenneth Reitz](http://kennethreitz.com/xcode-gcc-and-homebrew.html)的建议，我在我的 MAC OS X 10.7.4 上安装了“xcode-lite”（即 xcode 的命令行工具 (CLT)）。

但是，`brew install macvim`给了我这个错误：

```
xcode-select: Error: No Xcode is selected. Use xcode-select -switch /Applications/Xcode.app to select /Applications/Xcode.app, or see the xcode-select manpage (man xcode-select) for further information. 
```

我没有`xcodebuild`下`/Applications`。我也没有`/Developer`目录。我有`/usr/bin/xcodebuild`，但是

```
xcode-select -switch /usr/bin
brew install macvim 
```

给我这个错误：

```
Error: Can't run /usr/bin/usr/bin/xcodebuild (no such file). 
```

此外，试图强迫它寻找`xcodebuild`in`/usr/bin`会使 brew 无限期地挂起。所以我被困住了。

我在一些地方读到 CLT for xcode 不够好，我需要下载完整版的 xcode (1.5GB)。其他一些人声称 brew 确实可以与 CLT for xcode 一起使用，但是几个小时的尝试`brew install macvim`（以及大量的谷歌搜索）并没有产生任何结果。我一定遗漏了一些关于 brew 和 CLT for xcode 的基本知识。我真的需要完整的 xcode 还是我的 xcode 的 CLT 没有安装在正确的目录中？

ps：我想brew它而不是安装二进制目录的原因是因为我想用python开发特性来构建它。如果有一种更简单的方法可以让 macvim 与 python-dev 集成，我很乐意这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:07:29.173

我下载了完整版的 xcode（差不多 2GB），然后 brew install macvim 工作了。不幸的是，brew 不适用于 xcode 的 CLT。

后来我遇到了一些小问题。一个问题是 macvim 正在获取 python 的系统版本（2.7.1），而我需要它来使用我下载的版本（2.7.3）。我必须 brew remove macvim，brew edit macvim，让 macvim 引用正确的 python 版本并使用 brew install python 重建。

我必须说这是一项艰巨的练习！但现在我的 macvim 可以很好地用于 python 开发

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T14:39:48.360

就像@LloydDewolf 提到的那样，需要完整安装 Xcode。除非您需要 macvim brew 版本的特定内容（如 python 开发功能），否则您可以从 .dmg 或源代码安装。

```
user@mac:~$ brew install macvim
Warning: A newer Command Line Tools for Xcode release is available
You should install the latest version from: http://connect.apple.com
A full installation of Xcode.app is required to compile this software.
Installing just the Command Line Tools is not sufficent.
Error: An unsatisfied requirement failed this build. 
```

这与以下开放的 github 问题有关：[https ://github.com/mxcl/homebrew/issues/15111](https://github.com/mxcl/homebrew/issues/15111)

# html - 像树一样渲染嵌套列表

> ID：12361858
> 
> 赞同：5
> 
> 时间：2012-09-11T02:18:43.427
> 
> 标签：html, css

我将如何在最后一个元素处制作垂直边框？

它只能与 CSS3/现代浏览器兼容。但需要在各种背景下工作（即透明）。

[http://jsfiddle.net/ShgD6/](http://jsfiddle.net/ShgD6/)

由此：

![不需要的列表](../Images/af15168b52a1447570db526d3c2afdb3.png)

对此：

![通缉名单](../Images/6d5b2422cde2d48732f9a2df2cb67427.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T02:57:25.170

我通过修改这个小提琴中的 css 解决了这个问题：

[http://jsfiddle.net/YYdwc/2/](http://jsfiddle.net/YYdwc/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T02:54:46.513

您可以使用 CSS`:last-child`伪类来选择最后一个列表项，如下所示：

```
ul li:last-child {
    height: 0.7em;
} 
```

将其高度设置为 0.7em 似乎对我有用，切断了左边框的尾巴。我在我的小提琴中添加了更多嵌套组，以表明即使内容更改并添加了更多嵌套组，它也能正常工作。

[http://jsfiddle.net/wdages/sC5pc/3/](http://jsfiddle.net/wdages/sC5pc/3/)

# configuration - servlet、primefaces 3.4 和 glassfish 3.1.2.2 的配置是什么？

> ID：12361859
> 
> 赞同：1
> 
> 时间：2012-09-11T02:19:42.820
> 
> 标签：configuration, primefaces, glassfish-3, atmosphere, apache-tomee

我的环境是 Windows 7 上的 Glassfish 3.1.2.2（启用 Comet）、JDK 1.7.0_07、Atmosphere 1.0.0.RC1、JSF 2.1.10 和 PrimeFaces 3.4。

我正在尝试 Counter 示例（[primefaces 3.4 counter](http://www.primefaces.org/showcase-labs/push/counter.jsf)）
我按照手动[PF3.4](http://primefaces.googlecode.com/files/primefaces_users_guide_3_4.pdf)的步骤操作，并在我的域中启用了 Comet 支持。

我的servlet配置...

```
 <servlet>
      <servlet-name>Push Servlet</servlet-name>
      <servlet-class>org.primefaces.push.PushServlet</servlet-class>
      <init-param>
         <param-name>org.atmosphere.websocket.maxTextMessageSize</param-name>
         <param-value>0</param-value>
      </init-param>
      <init-param>
            <param-name>org.atmosphere.cpr.broadcasterCacheClass</param-name>
            <param-value>org.atmosphere.cache.HeaderBroadcasterCache</param-value>
        </init-param>
  </servlet>
  <servlet-mapping>
     <servlet-name>Push Servlet</servlet-name>
        <url-pattern>/primepush/*</url-pattern>
  </servlet-mapping> 
```

但是这个例子不起作用，因为浏览器之间没有通信。
另外，我有以下警告

```
WARNING: GRIZZLY0024: Terminate process interrupted.

WARNING: SelectorFactory. Can not create a selector 
```

任何人，**会缺少另一种气氛配置吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:06:39.507

目前，没有已知的工作配置或测试用例证明 PrimeFaces Push 在 Glassfish 3.1.2.2 上工作。我和 PrimeFaces 社区的其他人已经提到、讨论和实现/体验了这一点。

请参阅下面讨论过的 PrimeFaces Push 论坛主题；在对话结束时，您会看到我迁移到了 TomEE Plus (tomcat7/OpenEJB)，并且 Atmosphere 运行良好，就像冠军一样……终于！

[玻璃鱼 3.1.2.2](http://forum.primefaces.org/viewtopic.php?f=10&t=25577)

此外，请密切关注[PrimeFaces Push](http://forum.primefaces.org/viewforum.php?f=10)社区论坛中讨论的主题，因为有人可能会在 Glassfish 3.1.2.2 上使用 PrimeFaces Push 达到/找到成功。

还有一件事，我是非常忠诚的类型，我想“终生”和 Glassfish 呆在一起，但我真的很想使用 PrimeFaces Push（或 Atmosphere），当我尝试并尝试时，无法达到Glassfish 取得了成功，“并且”因为我准备从 JSF 管理的 bean 迁移到 CDI 管理的 bean，并且看到/听说 Glassfish/Weld 在 CDI 管理的 bean 方面存在问题，所以我决定从 Glassfish 3.1.2.2 迁移到 Tomcat/TomEE加。现在，我正在与 TomEE/OpenEJB 提交者交谈，试图提高我的应用程序在 TomEE/OpenEJB 容器中运行的性能。

我对 TomEE Plus 容器上的 PrimeFaces Push 只有一个问题，该问题已经解决（昨天）。请参阅/单击下面。

[如果在全页刷新 (FPR) 后未呈现文件，我如何有条件地在 h:head 中呈现 .js 文件？](https://stackoverflow.com/questions/13532172/how-can-i-conditionally-render-js-file-in-hhead-if-file-was-not-rendered-afte)

我在我的应用程序中使用 PrimeFaces Push FacesMessage（示例）。在 Glassfish 3.1.2.2 上，我通过 p:poll 开发了一个类似的实现，但现在，我终于通过 TomEE Plus 让 PrimeFaces Push FacesMessage 实现运行良好。:)

希望这会有所帮助（您也可以从 Glassfish 3.1.2.2 迁移到 TomEE 或 tomcat）。

# asp.net-mvc - MVC4 上的服务栈

> ID：12361860
> 
> 赞同：15
> 
> 时间：2012-09-11T02:20:07.977
> 
> 标签：asp.net-mvc, asp.net-mvc-4, servicestack

我只是想让[服务堆栈](http://www.servicestack.net/)在 mvc4 项目下运行。`ServiceStack.Host.Mvc`nuget 包是否适用于 mvc 4.0 ？我安装了它并将它添加`routes.IgnoreRoute("api/{*pathInfo}");`到路由配置中，但是当我去的时候它没有找到路由

`/api/metadata`

我得到了错误：

> 未找到与请求 URI“ [http://localhost:51681/api/metadata](http://localhost:51681/api/metadata) ”匹配的 HTTP 资源。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T09:39:10.057

找到了解决方案。每当我们创建新的 asp.net mvc4 项目时，它都带有 Asp.Net Web Api。这也有路径 api/. 我不需要两者都在一起，所以只需使用 nuget 包管理器删除这些模块，它就会像任何东西一样工作。

如果您仍然卡在任何地方，请告诉我。因为它现在正在使用 asp.net mvc4 为我工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-27T04:09:22.517

在安装[ServiceStack.Host.Mvc NuGet 包](https://nuget.org/packages/ServiceStack.Host.Mvc/)时的[README.txt](https://github.com/ServiceStack/ServiceStack/blob/master/NuGet/ServiceStack.Host.Mvc/content/README.txt)页面中，显示了使用 MVC 安装 ServiceStack 所需的说明，我们添加了[额外的一行以支持 MVC4，](https://github.com/ServiceStack/ServiceStack/blob/master/NuGet/ServiceStack.Host.Mvc/content/README.txt#L10)因为它与冲突的 WepApi 捆绑在一起。

```
For MVC4 applications you also need to unregister WebApi, by commenting out this line:

    //WebApiConfig.Register(GlobalConfiguration.Configuration); 
```

我们也不喜欢必须提供手动安装说明以[从 MVC4 的默认安装中禁用 WebApi，](http://tech.pro/tutorial/1148/your-first-rest-service-with-servicestack)但不幸的是，这是我们目前可用可用的最好的方法。

### ServiceStack 文档是一个社区 wiki

如果您觉得[ServiceStack 的 wiki 文档](https://github.com/ServiceStack/ServiceStack/wiki)中缺少某些内容，请随时添加它们，因为它们是由 ServiceStack 社区维护并为 ServiceStack 社区维护的社区 wiki 文档。

### 向 aspnetwebstack 团队询问禁用 WebApi 的更简单方法

我们已经向 aspnetwebstack 团队提出了请求，他们是否可以提供一种[更简单且自动化的方式来通过 Nuget 禁用 WebApi](http://aspnetwebstack.codeplex.com/workitem/935)，请随时通过评论功能请求来表示您对该功能的支持。

## 完整的 README.txt 说明

为了使 README 更易于搜索，我将在此处重复它们：

* * *

`Global.asax.cs`在 ASP.NET MVC 中托管与在任何 ASP.NET 框架中托管非常相似，即 ServiceStack AppHost 仍然需要在您（或 WebActivator）中启动时进行初始化，例如：

```
public class Global : System.Web.HttpApplication
{
    protected void Application_Start(object sender, EventArgs e)
    {
        new AppHost().Init();
    }
} 
```

您*必须*通过将以下行添加到 Global.asax 中的 MvcApplication.RegisterRoutes(RouteCollection) 来注册 ServiceStacks '/api' 路径：

```
routes.IgnoreRoute("api/{*pathInfo}"); 
routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" }); //Prevent exceptions for favicon 
```

将它们放在方法的当前条目之前。

对于 MVC4 应用程序，您还需要通过注释掉以下行来取消注册 WebApi：

```
 //WebApiConfig.Register(GlobalConfiguration.Configuration); 
```

要启用 Mini Profiler，请将以下行添加到 Global.asax.cs 中的 MvcApplication：

```
protected void Application_BeginRequest(object src, EventArgs e)
{
    if (Request.IsLocal)
        ServiceStack.MiniProfiler.Profiler.Start();
}

protected void Application_EndRequest(object src, EventArgs e)
{
    ServiceStack.MiniProfiler.Profiler.Stop();
} 
```

有关 MiniProfiler 的更多信息，请参阅[https://github.com/ServiceStack/ServiceStack/wiki/Release-Notes的 v3.09](https://github.com/ServiceStack/ServiceStack/wiki/Release-Notes)

元数据页面的 URL 和包含的服务：

*   /api/metadata - 自动生成的元数据页面
*   /api/hello - 简单的 Hello World 服务见：[http ://www.servicestack.net/ServiceStack.Hello/](http://www.servicestack.net/ServiceStack.Hello/)
*   /api/todos - 简单的 REST 服务见：[http ://www.servicestack.net/Backbone.Todos/](http://www.servicestack.net/Backbone.Todos/)
*   /default.htm - Backbone.js TODO 应用程序与 /api/todos 的 TODO REST 服务通信

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T04:59:44.617

我是使用服务堆栈的新手，我也使用 MVC 4 应用程序，@mythz 的答案是正确的。但对于

```
routes.IgnoreRoute("api/{*pathInfo}");
routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" }); //Prevent exceptions for favicon 
```

放置在 AppStart/RouteConfig.cs

我的应用程序运行良好：D

# android - 安卓：SQLite - insertWithOnConflict

> ID：12361863
> 
> 赞同：9
> 
> 时间：2012-09-11T02:20:16.683
> 
> 标签：android, sqlite, insert

我使用 SQLiteDatabase.CONFLICT_IGNORE 调用 insertWithOnConflict。但是，当发生冲突时，返回“-1”而不是现有行的 id。我该如何纠正？

表创建：

**编辑 ：**

```
String CREATE_CATEGORY_TABLE = "CREATE TABLE "+TABLE_CATEGORY+"(" +
    BaseColumns._ID+" INTEGER PRIMARY KEY AUTOINCREMENT, "+
    KEY_CATEGORY_NAME+" TEXT UNIQUE" +
    ")";
db.execSQL(CREATE_CATEGORY_TABLE); 
```

插入语句：

```
ContentValues values = new ContentValues();
values.put(KEY_CATEGORY_NAME, name);
int catID = (int) db.insertWithOnConflict(TABLE_CATEGORY, null, values, SQLiteDatabase.CONFLICT_IGNORE); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T17:24:49.327

insertWithOnConflict，使用 SQLiteDatabase.CONFLICT_IGNORE 不能按预期工作，应该完全避免，根据这个问题：
[https ://code.google.com/p/android/issues/detail?id=13045](https://code.google.com/p/android/issues/detail?id=13045)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T02:40:37.077

Android 期望调用主键列`_id`。可能是原因：由于该列不存在，因此无法返回值并返回-1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T12:07:37.413

SQLiteDatabase.CONFLICT_IGNORE 注释的功能应该与您观察到的相同。在尝试插入时，如果没有冲突的行，那么它将插入具有给定值的新行并返回新插入行的 id。另一方面，如果已经存在冲突的行（具有相同的唯一键），则传入的值将被忽略并保留现有的行，然后返回值将为 -1 以指示冲突情况。要了解更多详细信息并了解如何处理此返回值，请阅读[Android/SQLite：插入更新表列以保留标识符](https://stackoverflow.com/questions/11686645/android-sqlite-insert-update-table-columns-to-keep-the-identifier?lq=1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-10T17:55:04.763

我使用的解决方法是使用`insertOrThrow`而不是`insertWithOnConflict`，并显式捕获`SQLiteConstraintException`. 您需要显式捕获它，因为它继承自`RuntimeException`.

我不得不使用这种解决方法，因为`insert`在发生冲突时将数据库方案转储到日志中，这是不可接受的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T14:35:39.850

```
try {
        long id = db.insertWithOnConflict(StatusData.TABLE, null, values, SQLiteDatabase.CONFLICT_IGNORE);
        if (id == -1){
            throw new RuntimeException(String.format("%s: Failed to insert [%s] to [%s] for unkwon reason.",TAG,values,uri));
        }else
            return ContentUris.withAppendedId(uri, id);
    } 
```

我仍然能够将行插入到数据库中，CONFLICT_IGNORE 无法按预期工作@Tom 是正确的，但我不确定该问题是否已解决

# git - CruiseControl.Net 中的 Git 功能分支

> ID：12361866
> 
> 赞同：2
> 
> 时间：2012-09-11T02:21:08.863
> 
> 标签：git, cruisecontrol.net, feature-branch

看起来 CruiseControl.Net 的 git 源代码控制提供程序只会监控一个 git 分支。有没有办法让它监控所有 git 分支？我知道您可以通过将“要构建的分支”设置为“**”在 Jenkins 中执行此操作。CruiseControl.Net 有类似的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:13:55.977

目前，截至 1.8，不！

`<branch>`tag 只允许一个分支，默认为 master。

当目标分支改变时（不同的哈希，可以是非快进），ccnet checkout远程分支头并运行构建任务。

您可以考虑创建一个与第一个相同的单独项目，只是`<branch>`标签不同以监视另一个分支。

# ruby - 没有从零到整数的隐式转换

> ID：12361869
> 
> 赞同：0
> 
> 时间：2012-09-11T02:22:08.887
> 
> 标签：ruby, implicit-conversion

我有一个通过获取 html 并使用 split 函数创建的字符串数组。我正在尝试通过以下方式迭代它：

```
html_array.each do |line|
    ...
end 
```

我可以`puts`在每个字符串的索引中`line`使用`puts line.index('text')`，并且我可以`puts`使用索引处的字符`puts line[17]`（两者都不打印 nil），但是当我将两者组合成一个命令时

```
puts line[line.index('text')] 
```

它给了我错误：

```
no implicit conversion from nil to integer (TypeError) 
```

有人可以告诉我我做错了什么吗？我是编程和红宝石的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T02:31:25.270

`line.index('text')`在某个时候返回`nil`，因为在该行中找不到字符串“text”。然后您尝试访问`line[nil]`，这是一个无效的数组索引。

像这样的东西可能会更好：

```
index = line.index('text')
if index.nil?
  puts "Text not found"
else
  puts line[index]
end 
```

这将在尝试使用它之前检查字符串的索引是否为 nil（如果该行不包含该字符串，则会提醒您）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:28:45.997

只是为了追踪您的某些行是否有错误，请尝试：

```
html_array.each do |line|
  puts (line[line.index('text')] rescue "nil")
end 
```

这将为出现错误的每一行打印一个“nil”。我怀疑“文本”不会出现在每一行中。你能分享一下你正在努力完成的事情吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T10:51:02.717

你可以像下面这样轻松地做到这一点：

```
 html_array.each do |line|
        if line.index("Text").present?
          puts line[line.index("Text")]
        end
    end 
```

# php - PHP数据表的隐藏溢出

> ID：12361871
> 
> 赞同：0
> 
> 时间：2012-09-11T02:22:18.907
> 
> 标签：php, html, css, html-table, overflow

我有一个这样的重复数据表（我知道在这种情况下 php 部分远非正确，但这不是问题）：

```
<table style="overflow:scroll" id="displayTable">
   <tr>
      <td>
      <table id="DataTable">
          <? php repeat>
            <tr>
             <td><? php echo $rowData['Column Name'];></td>
            </tr>
          <? php end repeat>
      </table>
      </td>
    </tr>
</table> 
```

我正在寻找一种使溢出可在桌子上滚动的方法。我已经尝试过
`<div style="overflow:scroll"></div>`
如上所示，但这不起作用。我想要它，以便“DataTable”表格的整体高度可以在它所在的“displayTable”表格单元格中滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:27:14.913

只需用固定高度的`overflow:scroll`or元素包裹您的表格。`overflow:auto`

**标记**

```
<div class="wrapper">
    <table>
        <tbody>
            <tr>
                <td>A Cell</td>
                <td>A Cell</td>
                <td>A Cell</td>
            </tr>  
            <tr>
                <td>A Cell</td>
                <td>A Cell</td>
                <td>A Cell</td>
            </tr>         
        </tbody>
    </table>       
</div> 
```

**风格**

```
.wrapper{
    height:200px;
    overflow:auto;
} 
```

[大活提琴手](http://jsfiddle.net/nG6pv/1/)。

# jquery - 尝试通过 JQuery ajax 从 Microsoft CRM 2011 REST 端点检索数据时出现 TypeError

> ID：12361874
> 
> 赞同：2
> 
> 时间：2012-09-11T02:22:39.853
> 
> 标签：jquery, dynamics-crm-2011

我在字段的 onChange 事件上有以下 javascript：

```
$.ajax({
    type: "GET",
    dataType: "json",
    url: Xrm.Page.context.getServerUrl() + "/XRMServices/2011/OrganizationData.svc/rdi_departmentSet(guid'" + departmentId + "')",
    success: function (data, textStatus, xhr) {
        alert("Success");   
    },
    error: function (xhr, textStatus, errorThrown) {
        alert(errorThrown.name + " - " + errorThrown.msg + " -- " + textStatus);
    }
}); 
```

错误回调正在触发，我在警报中收到“TypeError - undefined - error”。如果我提醒我作为 url 传递的内容，我可以在 IE 中浏览到它并查看正确的结果。知道是什么导致了 TypeError 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:44:08.400

在这种情况下，我认为您缺少“？” 在“rdi_departmentSet”之后。

此外，我总是使用如下过滤器语法：http: [//msdn.microsoft.com/en-us/library/gg309461.aspx#BKMK_filter](http://msdn.microsoft.com/en-us/library/gg309461.aspx#BKMK_filter)

# javascript - 在 requirejs 中共享实例化对象

> ID：12361875
> 
> 赞同：5
> 
> 时间：2012-09-11T02:22:42.197
> 
> 标签：javascript, requirejs

我正在定义一个模块`Foo`，并在另一个模块中实例化它`Bar`。我有第三个模块`Other`，我想为它提供创建和修改的相同`Foo`实例`Bar`。

```
define('Foo', [], function() {
    var test = function() {
        this.foo = 'foo';        
    };

    return test;
});

define('Bar', ['Foo'], function(Foo) {
    Foo = new Foo();
    Foo.bar = 'bar';
    console.log('From bar', Foo);
});

define('Other', ['Foo'], function(Foo) {
    console.log('From the other', Foo);
});

require(['Foo', 'Bar', 'Other'], function(Foo, Bar, Other) {
    console.log('Bringing it all together');
}); 
```

[http://jsfiddle.net/radu/Zhyx9/](http://jsfiddle.net/radu/Zhyx9/)

没有要求，我会做类似的事情：

```
App = {};

App.Foo = function() {
    this.foo = 'foo';
}

App.Bar = function() {
    App.Foo = new App.Foo();
    App.Foo.bar = 'bar';
    console.log('From bar', App.Foo);
}

App.Other = function() {
   console.log('From other', App.Foo);
}

App.Bar();
App.Other(); 
```

[http://jsfiddle.net/radu/eqxaA/](http://jsfiddle.net/radu/eqxaA/)

我知道我必须在这里遗漏一些东西，因为这是我第一次尝试 requirejs，所以可能混入了某种误解。这个例子可能看起来很做作，但我在将项目硬塞到使用 Backbone 和 RequireJS 时遇到了类似的情况. ​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T02:41:09.723

您从使用的模块中公开的`return`内容可以从代表该模块的参数中访问

[这是您的演示，已修改](http://jsfiddle.net/Zhyx9/2/)

```
define('Bar', ['Foo'], function(Foo) {
    Foo = new Foo();
    Foo.bar = 'bar';

    //return instantiated Foo
    return Foo;
});

require(['Foo', 'Bar', 'Other'], function(Foo, Bar, Other) {
    //Bar is the instantiated Foo, exposed from Bar
    console.log(Bar);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:34:42.450

模块的返回值是 requirejs 认为暴露的 api 的值。所以你的`console.log`陈述破坏了这一点。

您需要从函数中返回一些内容，如下所示：

```
define('Bar', ['Foo'], function(Foo) {
    var Bar = { my: 'bar'};
    //or maybe return a function or whatever 
    return Bar;
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T03:14:28.967

我将此作为对其中一个答案的评论发布，但我知道我可以像这样共享一个实例：

```
define('Foo', [], function() {
    var test = function() {
        this.foo = 'foo';        
    };

    return new test();
});

define('Bar', ['Foo'], function(Foo) {
    Foo.bar = 'bar';
    console.log('From bar', Foo);
});

define('Other', ['Foo'], function(Foo) {
    Foo.other = 'other';
    console.log('From the other', Foo);
});

require(['Foo', 'Bar', 'Other'], function(Foo, Bar, Other) {
    console.log('Bringing it all together');
}); 
```

[http://jsfiddle.net/radu/XEL6S/](http://jsfiddle.net/radu/XEL6S/)

但是，我一开始没有这样做的原因是`Foo`模块无法实例化自身，因为它需要准备好 DOM。但是，作为 RequireJS 的新手，我不知道[这种功能是内置在](http://requirejs.org/docs/api.html#pageload). 换句话说，要共享`Foo`我上面指定的模块实例，请在其定义中实例化并添加`domReady`requireJS 文档中指定的模块。

# java - Java IO 是阻塞 IO 吗？

> ID：12361877
> 
> 赞同：2
> 
> 时间：2012-09-11T02:23:12.863
> 
> 标签：java, sockets, networking, io, websocket

我知道对于一个线程（一个套接字），我不能同时执行 read() 或 write()，或者我可以吗？

但是，如果我创建 2 个线程并且每个线程分别处理 read() 和 write() 怎么办？我不知道在低级视图中，read() 和 write() 是否会获得套接字锁，因此一次只允许执行一个操作？会吗？

我使用Window作为平台，但也想知道在Unix机器上有什么不同吗？

我问这个问题是因为我很困惑，为什么我们需要非阻塞 IO，因为 2 个线程能够让我们同时读取（）和写入（）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T02:38:02.453

> 我知道对于一个线程（一个套接字），我不能同时执行 read() 或 write()，或者我可以吗？

当然不是。一个线程一次只能调用一个方法。这个问题没有意义。

> 但是，如果我创建 2 个线程并且每个线程分别处理 read() 和 write() 怎么办？我不知道在低级视图中，read() 和 write() 是否会获得套接字锁，因此一次只允许执行一个操作？会吗？

他们不需要锁。TCP 是全双工的。您可以在同一个套接字上读取和写入。同时。

> 我使用Window作为平台，但也想知道在Unix机器上有什么不同吗？

不。

> 我问这个问题是因为我很困惑，为什么我们需要非阻塞 IO，因为 2 个线程能够让我们同时读取（）和写入（）？

下定决心。首先你问是否可能，现在你（正确地）说它是可能的。

NIO 允许您在同一个线程中处理*多个套接字。*这样做的目的是保护线程，例如在必须处理数十万个连接的服务器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T02:37:52.847

线程是非常昂贵的资源。我们应该尽量谨慎有效地使用它们，以充分利用它们。

NIO 允许我们在同一个线程上打开多个套接字。您基本上可以在单个线程上获得 1000 个套接字连接，而不是 1000 个线程。

让我们以[Tomcat](http://tomcat.apache.org)为例。Tomcat 是一个带有 JSP/Servlet 容器的网络服务器。它同时支持阻塞 IO 和非阻塞 IO。使用阻塞 IO，它最多可以连接 5K HTTP 连接，但是使用 NIO，当有足够的 RAM 内存可用时，它可以达到 20K HTTP 连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T02:28:24.343

因为创建数千个线程会对 JVM 和系统资源造成压力。使用异步 IO，您可以让几个线程监控大量连接，并且效率更高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:18:11.257

> 对于一个线程（一个套接字），我不能同时执行 read() 或 write()，

您可以同时读取和写入，但您可以在同一个线程中读取和写入。如果您希望写入已知数量的数据或消息，并且希望返回已知数量的数据或消息，您可以在同一个线程中写入然后读取。

例如，如果您有一个简单的服务器进程，您可能会使用单个线程读取请求并写入响应。

我会为不超过几百个连接使用阻塞 IO。如果你有几十个或更少的连接，非阻塞 IO 可能不值得额外的复杂性。

# r - 在 R 中复制和更改数据帧

> ID：12361879
> 
> 赞同：0
> 
> 时间：2012-09-11T02:23:37.923
> 
> 标签：r

您好我正在尝试复制一个数据框，然后根据复制数更改我的一个名为“i”的列进行迭代。

例如，我的起始数据框是：

```
dataframex <- data.frame(i = c(1, 1, 1),
                         x = c(1, 3, 5),
                         y = c(2, 4, 6))
dataframex 
#   i x y
# 1 1 1 2
# 2 1 3 4
# 3 1 5 6 
```

我使用了命令代码

```
dataframex[rep(1:nrow(dataframex), times=3), ]
#     i x y
# 1   1 1 2
# 2   1 3 4
# 3   1 5 6
# 1.1 1 1 2
# 2.1 1 3 4
# 3.1 1 5 6
# 1.2 1 1 2
# 2.2 1 3 4
# 3.2 1 5 6 
```

但我真正想要的是：

```
#     i x y
# 1   1 1 2
# 2   1 3 4
# 3   1 5 6
# 1.1 2 1 2
# 2.1 2 3 4
# 3.1 2 5 6
# 1.2 3 1 2
# 2.2 3 3 4
# 3.2 3 5 6 
```

即迭代列表示我拥有的复制数据集的数量。然后我想使用迭代列将此数据框与另一个合并。

Ps 抱歉，这是我第一次使用 stackoverflow，我不知道如何制作表格，所以我希望你能理解我的临时列分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:41:53.353

设置数据：

```
test <- read.table(textConnection("i x y
1 1 2
1 3 4
1 5 6"),header=TRUE)

> test
  i x y
1 1 1 2
2 1 3 4
3 1 5 6 
```

`lapply`从`1:number_of_repeats_wanted`得到结果：

```
result <- do.call(rbind,lapply(1:3,function(i) data.frame(i,test[-1])))

> result
  i x y
1 1 1 2
2 1 3 4
3 1 5 6
4 2 1 2
5 2 3 4
6 2 5 6
7 3 1 2
8 3 3 4
9 3 5 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:42:38.027

三种可能的方法：

你的数据

```
DF <- data.frame(i=1,x=1:3,y=4:6)
# create a list with your data replicated three times
df_list <- replicate(n = 3, DF, simplify = F)
# go along this list and add a replicate column as `i`
df_list <- mapply(function(x,value,i) {x[,i] <- value;x}, value = seq_along(df_list), x = df_list, MoreArgs = list(i='i'), SIMPLIFY = F)
# combine into a data.frame
do.call(rbind,df_list) 
```

# 更简单

```
# don't have `i` defined yet
DF <- data.frame(x=1:3,y=1:4)
# add and combine into a data.frame
do.call(rbind,lapply(1:3, function(i,data) {data$i <- i;data}, data = DF)) 
```

两者都会导致

```
##  i x y
## 1 1 1 4
## 2 1 2 5
## 3 1 3 6
## 4 2 1 4
## 5 2 2 5
## 6 2 3 6
## 7 3 1 4
## 8 3 2 5
## 9 3 3 6 
```

## 使用您的初始方法

```
new_DF <- DF[rep(1:nrow(DF), times=3), ]
new_DF$i <- rep(1:nrow(DF), times = 3)
new_DF
##     i x y
## 1   1 1 4
## 2   2 2 5
## 3   3 3 6
## 1.1 1 1 4
## 2.1 2 2 5
## 3.1 3 3 6
## 1.2 1 1 4
## 2.2 2 2 5
## 3.2 3 3 6 
```

# c++ - 从 C++ 应用程序向 SQL 表中的整数列发送空值

> ID：12361882
> 
> 赞同：0
> 
> 时间：2012-09-11T02:24:20.227
> 
> 标签：c++, sql-server-2005, bind, bcp

我正在将程序变量批量复制到 SQL Server 2005 表中，`bcp_bind`并且`bcp_sendrow`在 C++ 应用程序中使用

但是，表中的某些整数列允许`null`值。当需要为其中一列发送值时，我不太确定应该如何`null`在运行时发送值。`bcp_sendrow``null`

[文档](http://technet.microsoft.com/en-us/library/aa177853%28v=sql.80%29.aspx)上`bcp_bind`说：

> 要将包含绑定列的 NULL 值的行批量复制到服务器，实例的 iIndicator 成员的值应设置为 SQL_NULL_DATA

但是，这仍然不能使事情变得很清楚。我是否应该对 2 个不同的调用`bcp_sendrow`：一个用于非空情况，另一个用于空情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:26:34.977

SQL Server 大容量复制接口有两种不同的方法来声明空值：

1.  您可以将 SQL_NULL_DATA 指定为 bcp_bind 的 cbData 参数。这表明发送到服务器的*所有*行都是 NULL

2.  您可以使用指示变量来说明该列何时包含整数以及何时包含 NULL。为此，您需要在 int 之前为 64 位指示变量留出空间。文档在一个小结构中显示了这一点，如下所示：

    ```
    typedef struct tagBCPBOUNDINT
    {
    __int64 iIndicator;
    int Value;
    } BCPBOUNDINT; 
    ```

    （我在这里将 iIndicator 更改为显式的 64 位整数；重要的是它不能更短。）

    当您调用 bcp_bind 时，您指向的是结构，而不是值，并且您指定使用 8 字节指示符，并且数据长度是可变的。

    ```
    bcp_bind(hdbc, &local_struct, 8, SQL_VARLEN_DATA, NULL, 0, SQLINT4, colIndex); 
    ```

    要在此列中发送包含数据的行，请将 iIndicator 设置为整数字段 (4) 的大小，并将值放入 Value。如果该列应为空，则将 iIndicator 设置为 SQL_NULL_DATA 并且不要担心该值：

    ```
    if (my_int_is_null) {
        local_struct.iIndicator = SQL_NULL_DATA;
    } else {
        local_struct.iIndicator = sizeof(int);
        local_struct.Value = my_int_value;
    }
    /* Fill the rest of the columns in a similar way */
    /* ... */
    /* finally, queue the row */
    bcp_sendrow(hdbc); 
    ```

# php - 从静态下拉列表中选择的数据库数据

> ID：12361883
> 
> 赞同：0
> 
> 时间：2012-09-11T02:24:21.670
> 
> 标签：php, mysql, html

所以我有这个：

```
<select name="study_year">
<option>Year I</option>
<option>Year II</option>
<option>Year III</option>
</select> 
```

当我添加用户时，我已经从 INSERT 在数据库中设置了一个选项，但现在我想编辑.php 它以及默认情况下如何从数据库中选择值

我正在使用这个 fetch 数组从数据库中获取值，但我不知道如何在 selected="" 属性中应用它：

```
$list_study=(mysql_fetch_array(mysql_query("SELECT study_year from study WHERE $ID_stud=study.ID_stud"))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:34:49.633

经典但丑陋的方法是：

```
<select name="study_year">
<option <?php echo $selected['Year I'];?>>Year I</option>
<option<?php echo $selected['Year II'];?>>Year II</option>
<option<?php echo $selected['Year III'];?>>Year III</option>
</select> 
```

和

```
<?php
$selected=array('Year I'=>'','Year II'=>'','Year III'=>'');
//Query year into $year
$selected[$year]='selected';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-04T12:06:35.253

假设“$list_study”查询返回一个类似于“Year I”的值，您可以在选择中的所有选项上添加此条件

```
<?php if($list_study == "Year I"){echo"selected";}?> 
```

例如：

```
<select name="study_year">
<option <?php if($list_study == "Year I"){echo"selected";}?> >Year I</option>
<option <?php if($list_study == "Year II"){echo"selected";}?> >Year II</option>
<option <?php if($list_study == "Year III"){echo"selected";}?> >Year III</option>
</select> 
```

# jquery-ui - 与 MVC 一起使用的 JQuery UI 对话框

> ID：12361884
> 
> 赞同：0
> 
> 时间：2012-09-11T02:24:49.627
> 
> 标签：jquery-ui

我想知道是否有人将 JQuery UI DialogBox 与 MVC 一起使用。我正在使用 MVC C#。我喜欢做的是将控制器动作传递给对话框框，以便从该动作中，我可以返回一个将填充对话框框的 PartialView()。

因此，我喜欢从视图中调用 JQuery DialogBox，该视图将调用控制器操作，然后返回 PartialView 填充对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:24:12.570

你有没有试过做类似的事情

```
$.get("YOUR URL HERE", { YOUR DATA HERE }, function(data) {
    $('div').html(data).dialog();
}); 
```

# c - C 分段错误

> ID：12361887
> 
> 赞同：0
> 
> 时间：2012-09-11T02:25:06.343
> 
> 标签：c, linux, file, fopen, head

嗨，很抱歉所有问题，但是当我运行此代码时，我的终端窗口上出现“分段错误（核心转储）”。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

static int usage (void) {
    printf("Usage: head <file>\n");
    printf("   Or: head <file> -n <number of characters>\n");
    printf("   Or: head -n <number of characters> <file>\n"); 
    return -1;
}

int main (int argc,char **argv) {
    if ((argc != 2) && (argc != 4)) return usage();

    char *fileName = argv[1];
    int lineCount = 10;
    FILE *src;

    if ((argc == 4) && (strcmp(argv[1], "-n" != 0))){
        fileName = argv[1];
        lineCount = argv[3]; 
        puts("-n in last position");
    }else{
        fileName = argv[3];
        lineCount = argv[1];
        puts("-n in first position");
    }

    if((src = fopen(fileName, "r")) == NULL){
        puts("Can't open input file.");
        exit(-1);
    }
} 
```

我很确定它与 fopen 函数有关，但我不确定为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T02:31:44.723

看起来如果 argc==2 您立即访问 argv[3]。那一定很痛

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T02:32:00.563

首先有一些问题 - 比较在函数内部

```
strcmp(argv[1], "-n" != 0) 
```

您正在将 char * 分配给 int

```
lineCount = argv[3]; 
```

和这里

```
lineCount = argv[1]; 
```

这是我得到的编译错误

```
[adrian@iceweasel ~]$ gcc -Wall -ansi -pedantic uu.c
uu.c: In function ‘main’:
uu.c:15: warning: ISO C90 forbids mixed declarations and code
uu.c:19: warning: passing argument 2 of ‘strcmp’ makes pointer from integer without a cast
/usr/include/string.h:143: note: expected ‘const char *’ but argument is of type ‘int’
uu.c:21: warning: assignment makes integer from pointer without a cast
uu.c:25: warning: assignment makes integer from pointer without a cast
uu.c:33: warning: control reaches end of non-void function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T02:42:06.400

您在错误的位置有一个右括号：

```
(strcmp (argv[1], "-n" != 0)) 
```

应该：

```
(strcmp (argv[1], "-n") != 0) 
```

但是，即使解决了这个问题，您的参数处理仍然不太正确。

在[您之前的问题](https://stackoverflow.com/questions/12361558/c-basic-head-command)中，这`head -n COUNT FILE`是不可能的，这使得参数检查相当容易。

这是您现在需要遵循的逻辑，因为您允许“浮动”`-n count`部分：

```
int linecount
char *filename = NULL

if argc == 2:
    linecount = 10
    filename = argv[1]
else:
    if argc == 4:
        if argv[1] == "-n":
            linecount = argv[2]
            filename = argv[3]
        else:
            if argv[2] == "-n":
                linecount = argv[3]
                filename = argv[1]

if filename = NULL:
    generate some error 
```

它基本上首先捕获了两个参数的版本。如果它是四参数版本，它会找出“-n”在哪里，这样它就可以智能地决定哪个参数是哪个值。

如您所见，这并不是您所拥有的（您的代码会查找行数，但情况`argv[1]`并非*如此*）。您应该使用以下内容作为指南：

```
argc  argv[0]  argv[1]  argv[2]  argv[3]
----  -------  -------  -------  -------
   2  head     <file>
   4  head     <file>   -n       <count>
   4  head     -n       <count>  <file> 
```

一旦你参考了这一点，就应该很容易为不同的情况编写代码。

当然，您必须将我的伪代码转换回 C 语言（使用`strcmp`而不是`==`用于字符串，并确保`atoi/strtol`用于将字符串 linecount 参数转换为整数），但这是您应该遵循的基本流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T02:49:08.967

您是否可以使用该`getopt()`功能？在 Linux 上，该`getopt()`函数将处理`-n`任一位置的选项，除非`POSIXLY_CORRECT`设置了环境变量。它会让你的生活更轻松：

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    int numLines = 10;
    char *fileName = 0;
    int opt;

    while ((opt = getopt(argc, argv, "n:")) != -1)
    {
        switch (opt)
        {
        case 'n':
            numLines = atoi(optarg);  /* Could check for positive answer */
            break;
        default:
            usage();  /* Assuming usage() does not return */
            break;
        }
    }

    if (optind != argc - 1)  /* Insist on one filename argument */
        usage();

    fileName = argv[optind];

    ...open file and process it...

    return(0);
} 
```

请注意，处理标准输入而不是文件会很容易；当然，循环之后的条件需要调整。您还可以轻松添加`-?`或`-h`选项以寻求帮助，等等。

# xaml - 在 XAML 中使用 ScaleTransform 和 DoubleAnimation 同时缩放多个对象

> ID：12361889
> 
> 赞同：0
> 
> 时间：2012-09-11T02:25:37.997
> 
> 标签：xaml, microsoft-metro

我有一个地铁应用程序，它有一个包含一行矩形对象的网格，我想同时为所有矩形设置动画（在 1 秒内从 0 缩放到 1）。我想尽可能多地使用资源，避免代码重复。网格的基本骨架如下。

```
<Grid>
    <Grid.Resources>
        <Style TargetType="Rectangle" x:Key="RectangleStyle">
            <Setter Property="Height" Value="100"/>
            <Setter Property="Width" Value="100"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="RadiusX" Value="10"/>
            <Setter Property="RadiusY" Value="10"/>
            <Setter Property="RadiusY" Value="10"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                        <ScaleTransform x:Name="RectangleScaleTransform"  ScaleX="1" ScaleY="1" />
                </Setter.Value>
            </Setter>
        </Style>
    </Grid.Resources>
    <Grid.Triggers>
       <EventTrigger RoutedEvent="Rectangle.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="RectangleScaleTransform"
                        Storyboard.TargetProperty="(ScaleTransform.ScaleX)" From="0" To="1.0" Duration="0:0:1"  />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
        <EventTrigger RoutedEvent="Rectangle.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="RectangleScaleTransform"
                                    Storyboard.TargetProperty="(ScaleTransform.ScaleY)" From="0" To="1.0" Duration="0:0:1"  />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Grid.Triggers>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Rectangle Fill="Red" Grid.Row="0" Grid.Column="0" Style="{StaticResource RectangleStyle}" />
        <Rectangle Fill="Red" Grid.Row="0" Grid.Column="1" Style="{StaticResource RectangleStyle}" />
        <Rectangle Fill="Red" Grid.Row="0" Grid.Column="2" Style="{StaticResource RectangleStyle}"/>
        <Rectangle Fill="Red" Grid.Row="0" Grid.Column="3" Style="{StaticResource RectangleStyle}"/>
        <Rectangle Fill="Red" Grid.Row="0" Grid.Column="4" Style="{StaticResource RectangleStyle}"/>
        <Rectangle Fill="Red" Grid.Row="0" Grid.Column="5" Style="{StaticResource RectangleStyle}"/>
        <Rectangle Fill="Red" Grid.Row="0" Grid.Column="6" Style="{StaticResource RectangleStyle}"/>
        <Rectangle Fill="Red" Grid.Row="0" Grid.Column="7" Style="{StaticResource RectangleStyle}"/>
    </Grid>
</Grid> 
```

我不想向`RenderTransform`每个单独的矩形添加触发器，也不想向每个矩形三角形添加触发器，因为这似乎有很多重复。使用上面的代码，我得到了一个`Cannot resolve TargetName "RectangleScaleTransform`错误。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:11:45.887

我认为您不能引用以这样的样式定义的命名元素。

也许您可以使用代码隐藏？

还没有尝试过，但就在我的脑海中，你可以这样做：

1.  在 XAML 中命名所有矩形
2.  在 InitializeComponent 调用之后的 .xaml.cs 中，将所有矩形放在一个列表中，并循环遍历每个矩形以以编程方式添加渲染转换。
3.  然后当您需要启动动画时，为列表中的所有矩形设置渲染变换动画

# nhibernate - 关于 NHibernate 中的延迟加载大数据大小

> ID：12361890
> 
> 赞同：0
> 
> 时间：2012-09-11T02:25:41.600
> 
> 标签：nhibernate

我在映射中有一组如下：

```
<set name="Persons" cascade="all"  inverse="true" lazy="true">
  <key column="idDepartment" />
  <one-to-many class="Person" />
</set> 
```

我想懒惰地加载孩子`persons`，但是persons类有很多列，所以数据量总是很大。如果我只想延迟加载一列，例如`personid`，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:55:18.177

默认情况下不，你不能。

你有两个选择。将您很少需要的所有属性标记为延迟加载。然后将使用属性子集获取实体，而稍后获取其他实体。但这会严重损害整体性能。

第二种选择是发出单独的查询，以获得您想要的一些确切的列。Nhiberante 有 projectins，或者你可以使用 LINQ。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:26:32.487

如果您的用例是您只需要加载几个人，您可以考虑使用lazy="extra"。

您还可以质疑 Person 的设计——也许一个较小的 Person 实体引用更具体和详细的​​数据是有益的？

另一种选择是根本没有 Department.Persons 集合。我发现我倾向于避免这样的收藏，例如收藏很大而收藏所有者并不真正拥有收藏中的物品。

# android - ParseException：SAX 解析器中未定义的实体

> ID：12361891
> 
> 赞同：1
> 
> 时间：2012-09-11T02:25:46.787
> 
> 标签：android, xml, parsing, rss, sax

我在一个 Android 项目的中间，我必须使用 SAX 解析国际语言 RSS（标题和描述是另一种语言）。解析时，我在 Logcat 中收到以下警告。此外，RSS 中的任何项目都不会被解析。

```
**9-10 07:12:33.598: W/System.err(1238): org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 3921: undefined entity**
09-10 07:12:33.598: W/System.err(1238):     at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:520)
09-10 07:12:33.598: W/System.err(1238):     at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:479)
09-10 07:12:33.598: W/System.err(1238):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:318)
09-10 07:12:33.608: W/System.err(1238):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:275)
09-10 07:12:33.608: W/System.err(1238):     at com.example.news.FeedTableViewActivity$SAXHelper.parseContent(FeedTableViewActivity.java:255)
09-10 07:12:33.608: W/System.err(1238):     at com.example.news.FeedTableViewActivity$ParseIndividualFeedTask.doInBackground(FeedTableViewActivity.java:217)
09-10 07:12:33.608: W/System.err(1238):     at com.example.news.FeedTableViewActivity$ParseIndividualFeedTask.doInBackground(FeedTableViewActivity.java:1)
09-10 07:12:33.608: W/System.err(1238):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
09-10 07:12:33.608: W/System.err(1238):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
09-10 07:12:33.608: W/System.err(1238):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
09-10 07:12:33.608: W/System.err(1238):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
09-10 07:12:33.618: W/System.err(1238):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
09-10 07:12:33.618: W/System.err(1238):     at java.lang.Thread.run(Thread.java:1019) 
```

所有其他英文 RSS 提要均未显示任何警告，因此对其项目进行了解析。

示例 xml 在[这里](http://pipes.yahoo.com/pipes/pipe.run?_id=2b520e1e831fca63381e71d59ef68be2&_render=rss)，这是我的代码部分：

```
public void parseUsingSAX(currentUrl){
    SAXParserFactory spf = SAXParserFactory.newInstance();
    SAXParser sp = spf.newSAXParser();
    XMLReader xr = sp.getXMLReader();
    xr.setContentHandler(df);
    InputSource is = new InputSource(currentUrl.openStream());
    is.setEncoding("UTF-8");
    xr.parse(is);
} 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T15:54:04.713

异常告诉您，在您正在解析的 xml 中，第 1 行列/字符 3921 处存在问题。

我有一个类似的问题，它是由使用错误的代码页引起的。

查看异常指向您的位置以及它是否是您所期待的角色。

# java - 更新数组列表 我正在尝试使用ArrayList<hashmap<string, string="">>. 我不明白为什么会出现以下错误： 构造函数SimpleAdapter(Main.getResults, ArrayList<ha 0="" 1385="" 问问题="" 2012-09-11t02:26:18.307="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我正在尝试使用arraylist<hashmap<string,="" string="">>. 我不明白为什么会出现以下错误： 构造函数SimpleAdapter(Main.getResults, ArrayList<hashmap<string,string>>, int, String[])未定义 public class Main extends Activity { private static String personURL = "http://api.themoviedb.org/3/search/person?api_key=bb0b6d66c2899aefb4d0863b0d37dc4e&query="; private static String TAG_CAST = "cast"; private static String TAG_ID = "id"; private static String TAG_TITLE = "title"; String title = null; JSONArray idOne = null; JSONArray idTwo = null; JSONArray firstCast = null; JSONArray secondCast = null; EditText searchOne; EditText searchTwo; Button findMovies; List <string>searchOneFilmography = new ArrayList<string>(); List <string>searchTwoFilmography = new ArrayList<string>(); ArrayList<hashmap<string, string="">> commonFilmogrpahy = new ArrayList<hashmap<string, string="">>(); @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.totlayout); searchOne = (EditText) findViewById(R.id.searchOne); searchTwo = (EditText) findViewById(R.id.searchTwo); findMovies = (Button) findViewById(R.id.findMovies); //getting findMovies.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { // TODO Auto-generated method stub new getResults().execute(); } }); } public class getResults extends AsyncTask<string, void,="" arraylist<hashmap<string,="" string="">> > { @Override protected ArrayList<hashmap<string, string="">> doInBackground( String... params) { // TODO Auto-generated method stub //get names from each text box ArrayList<hashmap<string, string="">> commonFilms = new ArrayList<hashmap<string, string="">>(); ArrayList<hashmap<string, string="">> firstFilms = new ArrayList<hashmap<string, string="">>(); ArrayList<hashmap<string, string="">> secondFilms = new ArrayList<hashmap<string, string="">>(); String nameOne = searchOne.getText().toString(); String nameTwo = searchTwo.getText().toString(); nameOne = nameOne.replace(" ", "_"); nameTwo = nameTwo.replace(" ", "_"); String searchOneURL = personURL + nameOne; String searchTwoURL = personURL + nameTwo; //Hashmap for ListView //Create JSON Parser Instanece JSONParser jParser = new JSONParser(); //getting JSON string from url JSONObject jsonOne = jParser.getJSONFromUrl(searchOneURL); JSONObject jsonTwo = jParser.getJSONFromUrl(searchTwoURL); try { //Get ID of each person idOne = jsonOne.getJSONArray(TAG_ID); idTwo = jsonTwo.getJSONArray(TAG_ID); String firstID = null; String secondID = null; for(int i = 0; i < idOne.length(); i++){ JSONObject iDeeOne = idOne.getJSONObject(i); //store each json item in variable firstID = iDeeOne.getString(TAG_ID); } for(int i = 0; i < idTwo.length(); i++){ JSONObject iDeeTwo = idTwo.getJSONObject(i); //store each json item in variable secondID = iDeeTwo.getString(TAG_ID); } String creditURlBase = "http://api.themoviedb.org/3/person"; String firstCreditURL = creditURlBase + firstID; String secondCreditURL = creditURlBase + secondID; JSONObject jSon = jParser.getJSONFromUrl(firstCreditURL); firstCast = jSon.getJSONArray(TAG_CAST); for(int i = 0; i < firstCast.length(); i++){ JSONObject c = firstCast.getJSONObject(i); title = c.getString(TAG_TITLE); //ctreate new hashmap HashMap <string, string="">map = new HashMap<string, string="">(); //and node to map map.put(TAG_TITLE, title); firstFilms.add(map); } JSONObject jSonTwo = jParser.getJSONFromUrl(secondCreditURL); secondCast = jSonTwo.getJSONArray(TAG_CAST); for(int i = 0; i < secondCast.length(); i++){ JSONObject c = firstCast.getJSONObject(i); title = c.getString(TAG_TITLE); //create hashmap HashMap <string, string="">mapTwo = new HashMap<string, string="">(); mapTwo.put(TAG_TITLE, title); secondFilms.add(mapTwo); } if(firstFilms.size() > secondFilms.size()){ for(int i = 0; i < firstFilms.size(); i++){ if(firstFilms.contains(secondFilms.get(i))){ HashMap <string, string="">mapThree = new HashMap<string, string="">(); mapThree.put(TAG_TITLE, secondFilms.get(i).toString()); commonFilms.add(mapThree); } } }else{ for(int i = 0; i < secondFilms.size(); i++){ if(secondFilms.contains(firstFilms.get(i))){ HashMap <string, string="">map = new HashMap<string, string="">(); map.put(TAG_TITLE, firstFilms.get(i).toString()); commonFilms.add(map); } } } return commonFilms; } catch(JSONException e){ Log.e("Error", e.toString()); return null; } ListAdapter adapter = new SimpleAdapter(this, commonFilms, R.layout.resultslayout, new String[] {TAG_NAME}); setListAdapter(adapter); 我也试过 ListAdapter adapter = new SimpleAdapter(Main.this, commonFilms, R.layout.resultslayout, new String[] {TAG_NAME}); 我仍然只为 Main.this 得到相同的未定义错误。 Android EditText 不起作用，android:imeOptions="actionNext" android:inputType="phone" 我试过android:inputType="phone"了，只有删除键盘Enter才能跳转到Next EditText。不知道android:imeOptions="actionNext"和之间有没有冲突android:inputType="phone"。 代码 ： AutoCompleteTextView有android:imeOptions="actionNext"and android:inputType="phone"，但是键盘上的 Enter 不会转到下一个。 <relativelayout android:layout_width="match_parent" android:layout_height="wrap_content" android:orientation="horizontal"><imageview android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_alignparentleft="true" android:paddingbottom="12dp" android:paddingleft="13dp" android:paddingtop="12dp" android:src="@drawable/fd_28"></imageview></relativelayout><linearlayout android:id="@+id/linearLayout0_ll" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_margintop="10dip" android:background="@drawable/bg_rect_black_filled_white" android:orientation="vertical"><relativelayout android:id="@+id/linearLayout0" android:layout_width="match_parent" android:layout_height="wrap_content" android:orientation="horizontal"><imageview android:id="@+id/img_house" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_alignparentleft="true" android:paddingbottom="12dp" android:paddingleft="10dp" android:paddingtop="12dp" android:src="@drawable/fd_29"><textview android:id="@+id/textview3" style="@style/TextviewRentItem" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginleft="30dip" android:focusable="true" android:text="@string/house"><autocompletetextview android:id="@+id/add_rent_manage_house" style="@style/TextviewRentItemCon3" android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_marginright="50dip" android:layout_torightof="@id/textview3" android:dropdownheight="90dp" android:hint="@string/default_add_rent_house_remind" android:imeoptions="actionNext" android:singleline="true"></autocompletetextview></textview></imageview></relativelayout>javaandroid 4 1 回答 1 This answer is useful 3 你不是错过了一个论点吗？Javadoc forSimpleAdapter说构造函数参数是： (Context context, List> data, int resource, String[] from, int[] to) 您没有为参数传递任何int[] to参数。 编辑添加：另外，你的getResults类正在扩展AsyncTask，所以它不是Context. 于 2012-09-11T02:40:51.000 回答 Related 1 javascript - 使用 wkhtmltopdf 时压缩的 Google 图表 2 date - 将mysql日期从一种格式转换为另一种格式 1 java - Hibernate4 XML命名查询未知 0 wcf - 为什么我的 WCF 代理客户端不是强类型的？ 1 css - 如何在不让内容溢出的情况下切断容器的一角？ 1 mysql - Mysql插入命令有详细的 2 c - 动态分配二维数组 0 javascript - Google Analytics 没有正确跟踪数据 IP 地址问题？ 1 javascript - ScraperWiki 抓取频率 1 django - django form is_valid 和cleaned_data 实现保存和提交行为。 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</linearlayout></string,></string,></string,></string,></string,></string,></string,></string,></hashmap<string,></hashmap<string,></hashmap<string,></hashmap<string,></hashmap<string,></hashmap<string,></hashmap<string,></string,></hashmap<string,></hashmap<string,></string></string></string></string></hashmap<string,string></ha></hashmap<string,>

> ID：12361893
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, android

我正在尝试使用`ArrayList<HashMap<String, String>>`. 我不明白为什么会出现以下错误：

构造函数`SimpleAdapter(Main.getResults, ArrayList<HashMap<String,String>>, int, String[])`未定义

```
public class Main extends Activity {

private static String personURL = "http://api.themoviedb.org/3/search/person?api_key=bb0b6d66c2899aefb4d0863b0d37dc4e&query=";

private static String TAG_CAST = "cast";
private static String TAG_ID = "id";

private static String TAG_TITLE = "title";

String title = null;

JSONArray idOne = null;
JSONArray idTwo = null;

JSONArray firstCast = null;
JSONArray secondCast = null;

EditText searchOne;
EditText searchTwo;

Button findMovies;

List<String> searchOneFilmography = new ArrayList<String>();
List<String> searchTwoFilmography = new ArrayList<String>();
ArrayList<HashMap<String, String>> commonFilmogrpahy = new ArrayList<HashMap<String, String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.totlayout);

    searchOne = (EditText) findViewById(R.id.searchOne);
    searchTwo = (EditText) findViewById(R.id.searchTwo);

    findMovies = (Button) findViewById(R.id.findMovies);

    //getting

    findMovies.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            new getResults().execute();

        }
    });
}
public class getResults extends AsyncTask<String, Void, ArrayList<HashMap<String, String>> > {

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... params) {
        // TODO Auto-generated method stub

        //get names from each text box

        ArrayList<HashMap<String, String>> commonFilms = new ArrayList<HashMap<String, String>>();
        ArrayList<HashMap<String, String>> firstFilms = new ArrayList<HashMap<String, String>>();
        ArrayList<HashMap<String, String>> secondFilms = new ArrayList<HashMap<String, String>>();
        String nameOne = searchOne.getText().toString();
        String nameTwo = searchTwo.getText().toString();

        nameOne = nameOne.replace(" ", "_");
        nameTwo = nameTwo.replace(" ", "_");

        String searchOneURL = personURL + nameOne;
        String searchTwoURL = personURL + nameTwo;

        //Hashmap for ListView

        //Create JSON Parser Instanece
        JSONParser jParser = new JSONParser();

        //getting JSON string from url
        JSONObject jsonOne = jParser.getJSONFromUrl(searchOneURL);
        JSONObject jsonTwo = jParser.getJSONFromUrl(searchTwoURL);

        try {
            //Get ID of each person
            idOne = jsonOne.getJSONArray(TAG_ID);
            idTwo = jsonTwo.getJSONArray(TAG_ID);

            String firstID = null;
            String secondID = null;
            for(int i = 0; i < idOne.length(); i++){
                JSONObject iDeeOne = idOne.getJSONObject(i);

                //store each json item in variable
                firstID = iDeeOne.getString(TAG_ID);

            }

            for(int i = 0; i < idTwo.length(); i++){
                JSONObject iDeeTwo = idTwo.getJSONObject(i);

                //store each json item in variable
                secondID = iDeeTwo.getString(TAG_ID);
            }
            String creditURlBase = "http://api.themoviedb.org/3/person";

            String firstCreditURL = creditURlBase + firstID;
            String secondCreditURL = creditURlBase + secondID;

            JSONObject jSon = jParser.getJSONFromUrl(firstCreditURL);

            firstCast = jSon.getJSONArray(TAG_CAST);
            for(int i = 0; i < firstCast.length(); i++){
                JSONObject c = firstCast.getJSONObject(i);
                title = c.getString(TAG_TITLE);

                //ctreate new hashmap
                HashMap<String, String> map = new HashMap<String, String>();

                //and node to map
                map.put(TAG_TITLE, title);
                firstFilms.add(map);

            }
            JSONObject jSonTwo = jParser.getJSONFromUrl(secondCreditURL);

            secondCast = jSonTwo.getJSONArray(TAG_CAST);
            for(int i = 0; i < secondCast.length(); i++){
                JSONObject c = firstCast.getJSONObject(i);
                title = c.getString(TAG_TITLE);

                //create hashmap
                HashMap<String, String> mapTwo = new HashMap<String, String>();

                mapTwo.put(TAG_TITLE, title);
                secondFilms.add(mapTwo);

            }

            if(firstFilms.size() > secondFilms.size()){
                for(int i = 0; i < firstFilms.size(); i++){
                    if(firstFilms.contains(secondFilms.get(i))){

                        HashMap<String, String> mapThree = new HashMap<String, String>();

                        mapThree.put(TAG_TITLE, secondFilms.get(i).toString());
                        commonFilms.add(mapThree);
                    }

                }

            }else{
                for(int i = 0; i < secondFilms.size(); i++){
                    if(secondFilms.contains(firstFilms.get(i))){
                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put(TAG_TITLE, firstFilms.get(i).toString());
                        commonFilms.add(map);
                    }
                }
            }
            return commonFilms;

            }
        catch(JSONException e){
            Log.e("Error", e.toString());
            return null;
        }
        ListAdapter adapter = new SimpleAdapter(this, commonFilms, R.layout.resultslayout, new String[] {TAG_NAME});
        setListAdapter(adapter); 
```

我也试过

```
ListAdapter adapter = new SimpleAdapter(Main.this, commonFilms, R.layout.resultslayout, new String[] {TAG_NAME}); 
```

我仍然只为 Main.this 得到相同的未定义错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T02:40:51.000

你不是错过了一个论点吗？[Javadoc for`SimpleAdapter`](http://developer.android.com/reference/android/widget/SimpleAdapter.html)说构造函数参数是：

> `(Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to)`

您没有为参数传递任何`int[] to`参数。

**编辑添加：**另外，你的`getResults`类正在扩展`AsyncTask`，所以它不是`Context`.

# android - Android EditText 不起作用，android:imeOptions="actionNext" android:inputType="phone"

> ID：12361894
> 
> 赞同：2
> 
> 时间：2012-09-11T02:26:28.160
> 
> 标签：android, android-edittext, ime

我试过`android:inputType="phone"`了，只有删除键盘Enter才能跳转到Next EditText。不知道`android:imeOptions="actionNext"`和之间有没有冲突`android:inputType="phone"`。

code : `AutoCompleteTextView`有`android:imeOptions="actionNext"`and `android:inputType="phone"`，但是键盘上的 Enter 不会转到下一个。

```
 <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:paddingBottom="12dp"
                    android:paddingLeft="13dp"
                    android:paddingTop="12dp"
                    android:src="@drawable/fd_28" />

                <TextView
                    android:id="@+id/texttitle_phone"
                    style="@style/TextviewRentItem"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="30dip" />

                <EditText
                    android:id="@+id/content_phone"
                    style="@style/TextviewRentItemCon3"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="50dip"
                    android:layout_toRightOf="@id/texttitle_phone"
                    android:paddingBottom="12dp"
                    android:paddingRight="15dp"
                    android:paddingTop="12dp"
                    android:imeOptions="actionNext"
                    android:singleLine="true" 
                    android:inputType="phone"/>
            </RelativeLayout>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout0_ll"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:background="@drawable/bg_rect_black_filled_white"
            android:orientation="vertical" >

            <!-- the second-->

            <RelativeLayout
                android:id="@+id/linearLayout0"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <ImageView
                    android:id="@+id/img_house"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:paddingBottom="12dp"
                    android:paddingLeft="10dp"
                    android:paddingTop="12dp"
                    android:src="@drawable/fd_29" />

                <TextView
                    android:id="@+id/textview3"
                    style="@style/TextviewRentItem"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="30dip"
                    android:focusable="true"
                    android:text="@string/house" />

                <AutoCompleteTextView
                    android:id="@+id/add_rent_manage_house"
                    style="@style/TextviewRentItemCon3"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginRight="50dip"
                    android:layout_toRightOf="@id/textview3"
                    android:dropDownHeight="90dp"
                    android:hint="@string/default_add_rent_house_remind"
                    android:imeOptions="actionNext"
                    android:singleLine="true" />
            </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-26T16:22:24.740

（由 OP 在编辑和评论中回答。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 问题已解决。我的 EditText 使用**setOnClickListener**，删除这个监听事件，没关系

@xbakesx 写道：

> 我认为您问题的真正解决方案是添加`android:singleLine="true"`

# android - AdapterView 项目未填充父项

> ID：12361897
> 
> 赞同：1
> 
> 时间：2012-09-11T02:27:07.410
> 
> 标签：android, layout

我创建了扩展“AdapterView<ListAdapter>”的类 A，并创建了扩展提供数据的“BaseAdapter”的类 D。

问题是每个 AdapterView 项目都没有将其长度拉伸到 AdapterView 的长度，并且每个项目的长度都不同，因为它与项目中文本的长度相同。我将所有可以设置的布局参数设置为“FILL_PARENT”，但这没有意义。

我应该检查哪一门课？AdapterView 子类，还是 BaseAdapter 子类，或者 AdapterView 项中的 TextView 子类？（我继承 TextView 以获得一些额外的效果）。

getView 方法：

```
public View getView(int position, View convertView, ViewGroup viewGroup) {

    ViewHolder holder;
    if (convertView == null) {
        convertView = LayoutInflater.from(context).inflate(
                R.layout.colselector_menu_item, null);
        holder = new ViewHolder();

        convertView.setTag(holder);

        TextView tv = new VerticalTextView(viewGroup.getContext());
        tv.setTextColor(Color.RED);

        NewsInTimeApp app = (NewsInTimeApp) (((MainActivity) context)
                .getApplication());
        tv.setTextSize(Integer.parseInt(app.getConfig().get(
                AppConfig.CFGNAME_UI_MAIN_COLSELECTOR_TEXTSIZE)));
        ((LinearLayout) convertView).addView(tv);
        holder.groupItem = tv;

    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    holder.groupItem.setText(list.get(position).getName());
    holder.collId = list.get(position).getId();

    return convertView;
} 
```

colselector_menu_item.xml ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#e1e1e1"
android:orientation="horizontal" >

<View
android:layout_width="1dp"
android:layout_height="fill_parent"
android:background="@android:color/darker_gray"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:55:28.527

添加视图时，您没有为 TextView 本身指定任何布局参数。

尝试：

```
(LinearLayout) convertView.addView(tv, LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT); 
```

如果目标 API<8，请将 MATCH_PARENT 更改为 FILL_PARENT。这也假设您确实希望它们垂直包装内容。

# rest - 使用 CakePHP 2 的无状态 REST API

> ID：12361901
> 
> 赞同：2
> 
> 时间：2012-09-11T02:28:15.520
> 
> 标签：rest, authentication, cakephp-2.0

我正在使用 CakePHP 2 创建一个 REST API + Javascript 客户端。我希望 javascript 客户端向用户询问其用户名和密码，然后使用此信息向 CakePHP REST 应用程序发出 REST 请求。

所以我想我需要在每个 REST 请求中发送身份验证信息，并且可以对 CakePHP 端的每个请求进行身份验证。所以我的问题是：我如何用 CakePHP 做这样的事情？我应该使用基本身份验证吗？如果是这样，我如何确保没有使用会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:54:22.117

您可以使用**基本**身份验证、**摘要**身份验证或**构建您的身份验证对象**

通过使用其中之一，将不会创建任何会话。无需确保这一点，我认为这是蛋糕自动完成的。

有关更多信息，请参阅[本文（cakePHP 书中的身份验证章节）](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)。

# wpf - PasswordControl 并手动显示 ValidationRule 错误

> ID：12361911
> 
> 赞同：1
> 
> 时间：2012-09-11T02:29:46.083
> 
> 标签：wpf, validationrule

当输入的文本太短时，我有自定义的 ValidationRule 会返回错误。这适用于标准 TextBox，因为 Text 属性可以绑定到源，然后将规则添加到绑定中。当用户输入一个太短的字符串时，规则运行并且控件通过在控件周围显示一个红色边框来指示验证问题。

但是出于安全原因，PasswordControl 不允许对 Password 字段进行数据绑定。因此，我改为挂钩丢失焦点事件，然后手动创建并运行 ValidationRule 以查看是否存在问题。但是 Validate 上没有公共方法允许我将错误添加到控件的验证错误集合中。是否可以手动更新 Validate.Errors 集合？如果没有，有没有办法告诉 PasswordControl 以错误状态显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:52:32.283

您可以为此使用附加属性系统。

看看下面的文章。希望能帮到你。

[http://blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html](http://blog.functionalfun.net/2008/06/wpf-passwordbox-and-data-binding.html)

# python - python中的json.dumps在用户定义的对象列表上

> ID：12361914
> 
> 赞同：1
> 
> 时间：2012-09-11T02:30:03.337
> 
> 标签：python, django, json

我有一门课叫照片。此类有 4 个字段，其中一个称为文件。该文件是 Django 的图像字段类型。

我有一个由这些图像字段组成的列表。我想将此 python 列表转换为 json 字符串。如果我打电话`json.dumps(listData)`给我的名单，那么我会收到这个错误：

```
ImageFieldFile: photos/KObtu.jpg. 
```

这似乎是明智的。系统将图像字段表示为不是有效 json 的字符串。如何覆盖此输出字符串？或者，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T02:52:52.707

您可以创建一个知道如何编码 ImageFieldFile 的自定义 JSON 编码器类：

```
import json
from django.db.models.fields.files import ImageFieldFile

class EnhancedJSONEncoder(json.JSONEncoder):
    """
    JSONEncoder subclass that knows how to encode Django "ImageFieldFile"s.
    """

    def default(self, o):
        if isinstance(o, ImageFieldFile):
            # Treat ImageFieldFile as a unicode string
            return super(EnhancedJSONEncoder, self).default(unicode(o))
        else:

            return super(EnhancedJSONEncoder, self).default(o) 
```

然后，您将 json.dumps() 称为：

```
json.dumps(listData, cls=EnhancedJSONEncoder)) 
```

这假设您希望将 ImageFieldFile 表示为字符串

# java - Activity 已泄露窗口错误

> ID：12361922
> 
> 赞同：0
> 
> 时间：2012-09-11T02:31:43.123
> 
> 标签：java, android, cordova

尝试在 Gingerbread 模拟器上运行我的 Android 应用程序时出现此错误：

```
09-11 02:18:04.540: I/PhoneGapLog(342): phonegap.xml missing. Ignoring...
09-11 02:18:04.540: I/System.out(342): loadUrl(file:///android_asset/www/app.html)
09-11 02:18:04.550: I/System.out(342): url=file:///android_asset/www/app.html baseUrl=file:///android_asset/www/
09-11 02:18:05.150: D/SoftKeyboardDetect(342): We are in our onMeasure method
09-11 02:18:05.150: D/SoftKeyboardDetect(342): Old Height = 0
09-11 02:18:05.150: D/SoftKeyboardDetect(342): Height = 762
09-11 02:18:05.150: D/SoftKeyboardDetect(342): Old Width = 0
09-11 02:18:05.150: D/SoftKeyboardDetect(342): Width = 480
09-11 02:18:05.150: D/SoftKeyboardDetect(342): Ignore this event
09-11 02:18:05.332: D/SoftKeyboardDetect(342): We are in our onMeasure method
09-11 02:18:05.332: D/SoftKeyboardDetect(342): Old Height = 762
09-11 02:18:05.340: D/SoftKeyboardDetect(342): Height = 762
09-11 02:18:05.340: D/SoftKeyboardDetect(342): Old Width = 480
09-11 02:18:05.340: D/SoftKeyboardDetect(342): Width = 480
09-11 02:18:05.370: D/SoftKeyboardDetect(342): Ignore this event
09-11 02:18:24.910: I/System.out(342): onReceivedError: Error code=-6 Description=The connection to the server was unsuccessful. URL=file:///android_asset/www/app.html
09-11 02:18:28.920: E/WindowManager(342): Activity com.ohla.OhlaActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4057a2f8 that was originally added here
09-11 02:18:28.920: E/WindowManager(342): android.view.WindowLeaked: Activity com.ohla.OhlaActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4057a2f8 that was originally added here
09-11 02:18:28.920: E/WindowManager(342):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
09-11 02:18:28.920: E/WindowManager(342):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-11 02:18:28.920: E/WindowManager(342):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-11 02:18:28.920: E/WindowManager(342):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
09-11 02:18:28.920: E/WindowManager(342):   at android.app.Dialog.show(Dialog.java:241)
09-11 02:18:28.920: E/WindowManager(342):   at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
09-11 02:18:28.920: E/WindowManager(342):   at com.phonegap.DroidGap$6.run(DroidGap.java:1483)
09-11 02:18:28.920: E/WindowManager(342):   at android.os.Handler.handleCallback(Handler.java:587)
09-11 02:18:28.920: E/WindowManager(342):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-11 02:18:28.920: E/WindowManager(342):   at android.os.Looper.loop(Looper.java:123)
09-11 02:18:28.920: E/WindowManager(342):   at android.app.ActivityThread.main(ActivityThread.java:3683)
09-11 02:18:28.920: E/WindowManager(342):   at java.lang.reflect.Method.invokeNative(Native Method)
09-11 02:18:28.920: E/WindowManager(342):   at java.lang.reflect.Method.invoke(Method.java:507)
09-11 02:18:28.920: E/WindowManager(342):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-11 02:18:28.920: E/WindowManager(342):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-11 02:18:28.920: E/WindowManager(342):   at dalvik.system.NativeStart.main(Native Method)
09-11 02:18:28.920: E/WindowManager(342): Activity com.ohla.OhlaActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4057a2f8 that was originally added here
09-11 02:18:28.920: E/WindowManager(342): android.view.WindowLeaked: Activity com.ohla.OhlaActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4057a2f8 that was originally added here
09-11 02:18:28.920: E/WindowManager(342):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
09-11 02:18:28.920: E/WindowManager(342):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-11 02:18:28.920: E/WindowManager(342):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-11 02:18:28.920: E/WindowManager(342):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
09-11 02:18:28.920: E/WindowManager(342):   at android.app.Dialog.show(Dialog.java:241)
09-11 02:18:28.920: E/WindowManager(342):   at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
09-11 02:18:28.920: E/WindowManager(342):   at com.phonegap.DroidGap$6.run(DroidGap.java:1483)
09-11 02:18:28.920: E/WindowManager(342):   at android.os.Handler.handleCallback(Handler.java:587)
09-11 02:18:28.920: E/WindowManager(342):   at android.os.Handler.dispatchMessage(Handler.java:92)
09-11 02:18:28.920: E/WindowManager(342):   at android.os.Looper.loop(Looper.java:123)
09-11 02:18:28.920: E/WindowManager(342):   at android.app.ActivityThread.main(ActivityThread.java:3683)
09-11 02:18:28.920: E/WindowManager(342):   at java.lang.reflect.Method.invokeNative(Native Method)
09-11 02:18:28.920: E/WindowManager(342):   at java.lang.reflect.Method.invoke(Method.java:507)
09-11 02:18:28.920: E/WindowManager(342):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-11 02:18:28.920: E/WindowManager(342):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-11 02:18:28.920: E/WindowManager(342):   at dalvik.system.NativeStart.main(Native Method)
09-11 02:18:33.549: D/dalvikvm(342): GC_EXPLICIT freed 396K, 55% free 2929K/6407K, external 2388K/2982K, paused 77ms 
```

如何修复此`Activity com.ohla.OhlaActivity has leaked window`错误？这与文件`assets/www`夹中的 Web 应用程序文件有关吗？但是，当我`assets/www`在桌面浏览器中运行 Web 应用程序时，完全没有问题。

我正在使用 Sencha Touch 开发网络应用程序。当我在模拟器中运行 PhoneGap 应用程序时，会显示以下错误消息：`The connection to server was unsuccessful. (file:///android_asset/www/app.html)`

# sockets - TCP Listener 和 Socket 的区别

> ID：12361924
> 
> 赞同：44
> 
> 时间：2012-09-11T02:31:50.147
> 
> 标签：sockets, tcp, client, serversocket, tcplistener

据我所知，我可以同时使用 TCPListener 和 Socket 创建服务器，那么它们两者有什么区别？

**插座**

```
private Socket MainSock;
MainSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
MainSock.Bind(new IPEndPoint(IPAddress.Any, port));
MainSock.Listen(500);
MainSock.BeginAccept(AcceptConnections, new Wrapper()); 
```

**TCP监听器**

```
 Int32 port = 13000;
    IPAddress localAddr = IPAddress.Parse("127.0.0.1");
    TcpListener server = new TcpListener(localAddr, port);
    server.Start(); 
```

我真的很困惑。他们两个监听连接，那么他们之间有什么区别？

更新代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Net;
using System.Net.Sockets;
using System.Net.Security;
using System.Security.Authentication;
using System.Security.Cryptography.X509Certificates;
using System.IO;

public class Wrapper
{
    public byte[] buffer;
    public SslStream sslStream;
    public object connector;
}

public class Sock
{
    private Dictionary<string, byte> Connections;
    public event Action<Wrapper> AnnounceNewConnection;
    public event Action<Wrapper> AnnounceDisconnection;
    public event Action<byte[], Wrapper> AnnounceReceive;
    private Socket _sock;

    private X509Certificate certificate = X509Certificate.CreateFromCertFile("exportedcertificate.cer");

    public Sock(int port)
    {
        try
        {
            Connections = new Dictionary<string, byte>();
            _sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            _sock.Bind(new IPEndPoint(IPAddress.Any, port));
            _sock.Listen(500);
            _sock.BeginAccept(AcceptConnections, new Wrapper());
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
    }

    private void AcceptConnections(IAsyncResult result)
    {
        Wrapper wr = (Wrapper)result.AsyncState;
        try
        {
            wr.sslStream = new SslStream(new NetworkStream(_sock.EndAccept(result), true));
            wr.sslStream.BeginAuthenticateAsServer(certificate, AcceptAuthenticate, wr);

            _sock.BeginAccept(AcceptConnections, new Wrapper());
        }
        catch (Exception e) { Console.WriteLine(e); }
    }

    private void AcceptAuthenticate(IAsyncResult result)
    {
        Wrapper wr = (Wrapper)result.AsyncState;
        try
        {
            wr.sslStream.EndAuthenticateAsServer(result);
            if (wr.sslStream.IsAuthenticated == true)
            {
                AnnounceNewConnection.Invoke(wr);
            }
        }
        catch (Exception e) { Console.WriteLine(e); }
    }

    private void ReceiveData(IAsyncResult result)
    {
        Wrapper wr = (Wrapper)result.AsyncState;
        try
        {
            AnnounceReceive.Invoke(wr.buffer, wr);
        }
        catch (Exception e) { Console.WriteLine(e); AnnounceDisconnection.Invoke(wr); }
    }
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-12T00:45:51.070

`TcpListener`是一个方便的 TCP 通信包装器。这允许您使用`TcpClient`已接受的连接——尽管您可以接受套接字而不是客户端来使用`Socket`而不是`TcpClient`. 你可以用`Socket`;做同样的事情 但是您必须处理一些 TCP 细节（如`SocketType.Stream, ProtocolType.Tcp`）。TCP 是一种基于流的协议，`TcpClient`它通过为流提供`TcpClient.GetStream()`. `Socket`处于~~更高~~的不同级别，需要支持许多不同的协议，例如不基于流的 UDP。

`TcpClient.GetStream`返回一个`NetworkStream`适合的对象`SslStream`；所以，它应该比`Socket`直接使用要少得多。[SslStream](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)的文档详细说明了使用SSL 通信`TcpListener`和`TcpClient`用于 SSL 通信。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-11T02:34:32.643

它们只是做同样事情的不同类，写在不同的层次上。在底层，TCPListener 无疑调用了一些非常类似于您的第一个基于 Socket 的代码的东西。它只是为了让你远离一些血腥的细节。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-11T02:36:43.170

[TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)包装了一个套接字，并且是[TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient)的服务器端模拟物（当然，它也包装了一个套接字）。

TcpListener 预先配置了 TCP（与 Socket 不同，它可以与 UDP、纯 IP、非 IP 协议等一起使用），并在处理连接时为您提供 TcpClient。

如果您不确定是否需要 Socket，并且正在使用 TCP - 我强烈建议从 TcpListener/Client 开始，因为它是一个更易于使用的接口。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-28T17:25:15.123

我并没有真正回答这个问题，但您似乎更喜欢它，`TcpClient`因为它`GetStream()`可以与 a 一起使用`SslStream`，但您可以通过将`NetworkStream`a作为构造函数传递给`Socket``Socket``NetworkStream`

IE`NetworkStream myStream = new NetworkStream(mySocket);`

# java - 使用 JSoup 进行 Html 解析

> ID：12361925
> 
> 赞同：1
> 
> 时间：2012-09-11T02:31:53.827
> 
> 标签：java, html, html-parsing, jsoup

我正在尝试解析以下 URL 的 html：

[http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-050-thermal-energy-fall-2002/](http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-050-thermal-energy-fall-2002/)

获取包含教师姓名的“< p >”标签的文本。所需信息位于“< p >”标签内，但我无法使用 JSoup 检索标签。我不知道我做错了什么，因为当我将标签保存在 Element 对象中时，我们称它为 'b' 而我调用 b.getAllElements() 它不显示

作为要素之一。Jsoup 的 getAllElements() 方法不就是这样做的吗？如果不能，请向我解释我显然缺少的层次结构，因为解析器无法找到

标签包含我需要的文本，在这种情况下是“Zoltan Spakovszky 教授”。

任何帮助将不胜感激。

```
public void getHomePageLinks()
{
    String html = "http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-050-thermal-energy-fall-2002/";
    org.jsoup.nodes.Document doc = Jsoup.parse(html);

    Elements bodies = doc.select("body");

    for(Element body : bodies )
    {
        System.out.println(body.getAllElements());
    }

} 
```

输出是：

[http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-050-thermal-energy-fall-2002/](http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-050-thermal-energy-fall-2002/)

它不应该打印出文档中body标签内的所有元素吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T02:41:15.573

我对 JSoup 一无所知，但似乎如果你想要讲师的名字，你可以通过以下方式访问它：

```
Element instructor = doc.select("div.chpstaff div p"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-19T07:38:24.497

可能你已经解决了，但我一直在努力，所以无法抗拒提交

```
import java.io.IOException;
import java.util.logging.*;
import org.jsoup.*;
import org.jsoup.nodes.*;
import org.jsoup.select.*;
public class JavaApplication17 {

public static void main(String[] args) {

try {
   String url = "http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-050-thermal-energy-   fall-2002/";
  Document doc = Jsoup.connect(url).get();
  Elements paragraphs = doc.select("p");
  for(Element p : paragraphs)
    System.out.println(p.text());

} 
catch (IOException ex) {
  Logger.getLogger(JavaApplication17.class.getName())
        .log(Level.SEVERE, null, ex);
   }
  }
}

is it what u meant? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T12:34:52.360

这是一个简短的示例：

```
// Connect to the website and parse it into a document
Document doc = Jsoup.connect("http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-050-thermal-energy-fall-2002/").get();

// Select all elements you need (se below for documentation)
Elements elements = doc.select("div[class=chpstaff] p");

// Get the text of the first element
String instructor = elements.first().text();

// eg. print the result
System.out.println(instructor); 
```

在这里查看 jsoup 选择器 api 的文档：[Jsoup Codebook](http://jsoup.org/cookbook/extracting-data/selector-syntax)
使用起来并不难，但功能非常强大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-14T12:16:35.483

这是一个代码

```
Document document = Jsoup.connect("http://ocw.mit.edu/courses/aeronautics-and-astronautics/16-050-thermal-energy-fall-2002/").get();

        Elements elements = document.select("p");
        System.out.println(elements.html()); 
```

您可以使用 Jsoup 的 Selector 属性选择所有标签。它将返回的文本和标签

.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-01T07:08:04.630

```
 Elements ele=doc.select("p");
      ' String text=ele.text();
        System.out.println(text); 
```

试试这个，我认为它会工作

# windows - Windows telnet 客户端究竟是如何工作的？

> ID：12361931
> 
> 赞同：0
> 
> 时间：2012-09-11T02:33:29.790
> 
> 标签：windows, telnet

我在这里有点困惑。通常当我将 Windows telnet 连接到一个简单的回显服务器时，它会回显每一次击键。

现在，由于某种原因，它会堆叠其中的一些并将它们发送到服务器。这是正常行为吗？这种奇怪的不一致有什么原因吗？

例子：

客户：

```
>>blahblahblah

>> 
```

回声服务器：

```
I recieved "b"
I recieved "lahbl"
I recieved "ahbla"
I recieved "h\r\n" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:40:29.537

这取决于双方的缓冲。客户端等待行尾发送可用字符。回显服务器读取，但读取获取可用的内容，并且根据网络和缓冲的随机性，这可能是从 1 个字符到您发送的所有字符。

使用 TCP，一切都可以保证到达那里，但不一定在您发送它的同一时间或相同的块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:40:47.460

我很肯定，这取决于你的打字速度。

如果我要编写这样一个交互式客户端，我会将击键排队到一个时间间隔，这个时间间隔对人类来说仍然是即时的，但对于计算机来说实际上很长。如果我的缓冲区已满（真正的高速输入 - 很可能是重定向输入）或发生上述超时后，我将开始发送操作。

通过这样做，我可以通过为每个数据包发送更大的有效负载来减少感觉延迟，从而将感觉延迟减少到 1/n，其中 n 是数据包中的平均击键次数。作为一个积极的副作用，这将（稍微）更好地利用网络资源。

为了验证我的假设，使用剪贴板将一段较长的文本粘贴到 telnet 客户端。

# vb.net - VB.Net 从单独的模块中检索字符串值

> ID：12361932
> 
> 赞同：0
> 
> 时间：2012-09-11T02:33:36.543
> 
> 标签：vb.net, if-statement

如何在单独的 VB 模块中引用文本框中的值。

在我的 login.aspx.vb 模块中，我有

```
Public Class login
    Inherits System.Web.UI.Page

    Private _inlineAssignHelper As String

    Protected Sub LoginButton(ByVal sender As Object, 
                              ByVal e As System.EventArgs) Handles Button1.Click

        Dim UserLogin As New String("")
        Dim UserPass As New String("")

        UserLogin = username.Text
        UserPass = password.Text

        Dim SecurityUser As New SecurityUser(UserLogin)
        Dim SecurityPass As New SecurityPass(UserPass)
    End Sub

End Class 
```

现在在我单独的 Security.vb 模块中，我想检查这些值是否不为空并将它们发送到数据库，但我似乎无法正确引用这些值来执行此操作。任何人都可以帮忙吗？

```
Public Sub securityCheck(UserLogin, UserPass)

    Dim securityCheck As Array()
    ' Dim User As String = TheNRLPredator.login.LoginButton(UserLogin)

    If (String.IsNullOrEmpty(TheNRLPredator.login.(UserLogin) _
       && String.IsNullOrEmpty(TheNRLPredator.login.(UserLogin) =True) Then
        MsgBox("You need to enter a Username and Password")
    Else
        'send to database to check.
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:00:41.690

`securityCheck`潜艇在一个班级吗？我会稍微更改一下代码，如下所示：

```
Public Class SecurityChecker

    ' Note the Shared. PS: I would also rename "securityCheck()" to "Validate()":
    Public Shared Function Validate(UserLogin, UserPass) As Bool

         dim isValid as Bool = true

         ' Also, I think I would simplify this:
         If (String.IsNullOrEmpty(UserLogin) _
             OrElse String.IsNullOrEmpty(UserPass) Then
               isValid = false                   
         End If            

         ' Let the caller know if validation succeeded:
         return isValid 
    End Sub
End Class 
```

现在使用您要使用的类名引用它，并与验证分开调用数据库逻辑：

```
Protected Sub LoginButton(ByVal sender As Object, 
                          ByVal e As System.EventArgs) Handles Button1.Click

    if ( SecurityChecker.Validate(username, password) ) Then
         ' Call metod for storing to DB here
    Else
        MsgBox("You need to enter a Username and Password")
    End If

End Sub 
```

# wordpress - WordPress。在 wp_nav_menu 中手动添加菜单项

> ID：12361934
> 
> 赞同：10
> 
> 时间：2012-09-11T02:33:47.997
> 
> 标签：wordpress, menu

在我的主题中，有一个导航菜单功能

```
function ct_nav() {
  <nav>
     <?php wp_nav_menu( array( 'container_id' => 'nav', 'theme_location' => 'primary') ); ?>
  </nav>
} 
```

我怎样才能手动添加更多项目？单独使用此功能。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-04-28T22:57:40.540

```
function add_last_nav_item($items) {
  return $items .= '<li><a href="#myModal" role="button" data-toggle="modal">Contact</a></li>';
}
add_filter('wp_nav_menu_items','add_last_nav_item'); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-06-20T19:08:29.923

这是通过更改 items_wrap 的示例。

```
wp_nav_menu( array( 'items_wrap' => '<ul id="%1$s" class="%2$s"><li><a href="http://www.google.com">go to google</a></li>%3$s</ul>' ) ); 
```

只是采用默认值并添加了 href。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T11:21:08.563

只是为了有人需要这个：

可以通过应用过滤器手动添加菜单项：

*   `wp_nav_menu_items`- 适用于所有菜单
*   `wp_nav_menu_{$menu->slug}_items`- 对于带有特定 slug 的菜单

也可以通过更改`items_wrap`，例如，通过在主题中显式删除`<ul>`和添加它 - 这样您就可以添加自己的项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-19T13:39:37.037

以上答案都不适合我。这是我使用的一种 jquery 类型的解决方法。我需要在菜单末尾添加一张图片。

正常使用 wp_nav_menu()，请务必在 menu_class 中指定一个类，或者您可以指定一个 ID。

```
$items = array(
    'theme_location'  => 'header-menu',
    'menu'            => '',
    'container'       => 'div',
    'container_class' => 'menu-{menu slug}-container',
    'container_id'    => '',
    'menu_class'      => 'menuContainer', /* important, since we're targetting it with jquery*/
    'menu_id'         => '',
    'echo'            => true,
    'fallback_cb'     => 'wp_page_menu',
    'before'          => '',
    'after'           => '',
    'link_before'     => '',
    'link_after'      => '',
    'depth'           => 0,
    'walker'          => ''
);
wp_nav_menu($items);

$( document ).ready(function() {
            $(".menuContainer ul").append("<li><img src='<?php echo  get_template_directory_uri(); ?>/img/menuImage.png'></li>");
        }); 
```

# android - 如何从 Android 中的可重用对话框成功返回字符串？

> ID：12361936
> 
> 赞同：1
> 
> 时间：2012-09-11T02:33:56.057
> 
> 标签：android, android-edittext, android-dialog

我选择使用可点击的类别来提示接受用户输入的对话框，而不是使用 EditTexts。这个可重用的 Dialog 类存储在 AllMethods.class 中。最初的理论是我传递了一堆文本（用于描述、标题等）和一个目标 TextView（用于用户在对话框中输入的 setText）。但是，在执行时，尝试执行 TextView.setText(str) 代码行时出现空指针异常。

所以，我的问题是：**如何在用户单击“确定”按钮后成功更改 textView 或返回字符串？**

另请注意，TextView 已被声明和实例化。我假设空指针是因为它在远程类中。这是代码：

```
import android.app.Activity;
import android.app.Dialog;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.TextView;

public class AllMethods {

    //fieldRequest is a reusable prompt to get a user's input for a field without taking up so much space
    /* Legend of inputs:
     * requestingActivity=the activity which is prompting the popup
     * dialogMessage = the description of the editText being requested
     * dialogTitle = the title to be displayed on the dialogbox
     * editTextHint = the Hint attribute that will give the user an example of the expected input
     * inputType = numeric, text, phone number, etc
     */

    public static void fieldRequest(Activity activity, String dialogMessage, String dialogTitle, final TextView outputText, int inputType, String optionalFieldSuffix){
        final Dialog dialog= new Dialog(activity);
        dialog.setContentView(R.layout.dialog_layout);
        dialog.setTitle(dialogTitle);
        //If the message/description exists, put it in
        if(dialogMessage!=null||dialogMessage!=""){TextView description = (TextView) dialog.findViewById(R.id.dialog_description);
        description.setText(dialogMessage);
        }
        //Identify the editText, set the input type appropriately and fill in the hint if applicable
        final EditText inputField = (EditText) dialog.findViewById(R.id.dialog_inputbox);
        if(Integer.toString(inputType)!=null){inputField.setInputType(inputType);}

        if(optionalFieldSuffix!=null){TextView suffix = (TextView) dialog.findViewById(R.id.dialog_optionalFieldSuffix);            
        suffix.setText(optionalFieldSuffix);}

        ImageButton dialogCancel = (ImageButton) dialog.findViewById(R.id.dialog_cancel);
        ImageButton dialogDone = (ImageButton) dialog.findViewById(R.id.dialog_done);
        dialogCancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                dialog.dismiss();

            }
        });

        dialogDone.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                outputText.setText(inputField.getText().toString());
                dialog.dismiss();

            }
        });

        dialog.show();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:57:09.677

像这样在你的类中实现接口，如下所示。您不需要将 textview 作为输入传递给此函数。

```
import android.app.Activity;
import android.app.Dialog;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.TextView;

public class AllMethods {

    //fieldRequest is a reusable prompt to get a user's input for a field without taking up so much space
    /* Legend of inputs:
     * requestingActivity=the activity which is prompting the popup
     * dialogMessage = the description of the editText being requested
     * dialogTitle = the title to be displayed on the dialogbox
     * editTextHint = the Hint attribute that will give the user an example of the expected input
     * inputType = numeric, text, phone number, etc
     */

    public static void fieldRequest(Activity activity, String dialogMessage, String dialogTitle, int inputType, String optionalFieldSuffix, final DialogResponse dr){
        final Dialog dialog= new Dialog(activity);
        final DialogResponse dialogResponse = dr;
        dialog.setContentView(R.layout.dialog_layout);
        dialog.setTitle(dialogTitle);
        //If the message/description exists, put it in
        if(dialogMessage!=null||dialogMessage!=""){TextView description = (TextView) dialog.findViewById(R.id.dialog_description);
        description.setText(dialogMessage);
        }
        //Identify the editText, set the input type appropriately and fill in the hint if applicable
        final EditText inputField = (EditText) dialog.findViewById(R.id.dialog_inputbox);
        if(Integer.toString(inputType)!=null){inputField.setInputType(inputType);}

        if(optionalFieldSuffix!=null){TextView suffix = (TextView) dialog.findViewById(R.id.dialog_optionalFieldSuffix);            
        suffix.setText(optionalFieldSuffix);}

        ImageButton dialogCancel = (ImageButton) dialog.findViewById(R.id.dialog_cancel);
        ImageButton dialogDone = (ImageButton) dialog.findViewById(R.id.dialog_done);
        dialogCancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                dialogResponse.actionNo();
                dialog.dismiss();

            }
        });

        dialogDone.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                dialogResponse.actionYes(inputField.getText().toString());
                dialog.dismiss();
            }
        });

        dialog.show();
    }

    public interface DialogResponse {
        public void actionYes(String str);

        public void actionNo();
    }

} 
```

**用法：**

```
DialogUtility.DialogResponse dr = new DialogResponse() {

            @Override
            public void actionYes(String str) {
                // TODO Auto-generated method stub

                 **// your code to set your string to textview**
            }

            @Override
            public void actionNo() {

            }
        };
        **//Make sure you modify code to match your variables**
         AllMethods
                .fieldRequest(activity, dialogMessage, dialogTitle, inputType, optionalFieldSuffix, dr); 
```

# azure - Azure 实例和 Web 角色

> ID：12361941
> 
> 赞同：7
> 
> 时间：2012-09-11T02:34:41.390
> 
> 标签：azure

顺便说一句，Azure 实例是什么？它是同一 Azure 云服务的多个副本吗？因此，例如，如果我部署具有 2 个实例的 WCF 应用程序，Azure 会创建相同 WCF 的 2 个副本，并且任何请求都会在 2 个实例之间进行负载平衡和分布？与实例相关的 Web 角色是什么？1 个实例可以有 2 个“网络角色”吗？是负载均衡吗？

我的问题基本上是 WCF 调用可能会进行大量处理以返回用户请求的数据。减少处理 WCF Web 函数调用的时间的理想情况是什么？1 个实例中的 2 个 Web 角色会更快还是 2 个实例和 1 个 Web 角色会更快？我需要加快处理来自网页的每个 WCF Web 服务调用的时间。如果设置为 1 个实例时 WCF 调用需要 30 秒，如果有 2 个实例，是否会减少到 15 秒？或者总共 30 秒将发生在 2 个实例中的 1 个中，因为实例都是关于负载平衡的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T03:05:16.963

简单地说，**一个实例就是你的应用程序的一个虚拟机**。因此，如果您有一个具有 2 个实例的 WCF 应用程序，这意味着您的应用程序部署在 2 个 VM 上，并且这 2 个 VM 是负载平衡的。

您可能会在一个 Web 角色中部署两个 Web 应用程序。但是关于你的问题：

**1 个实例可以有 2 个“网络角色”吗？** 不。

**是负载均衡吗？** 不

**1 个实例中的 2 个 Web 角色会更快吗？** 更快是一个相对的术语。从高可用性的角度考虑在多个实例中进行部署。如果您的应用程序部署了 2 个实例，即使 1 个实例出现故障，您的第二个实例也将能够为您的客户端提供服务。同样，每个实例都具有有限的资源（CPU/内存等），这具有相同应用程序的多个实例将允许您处理更多请求，因为请求分布在多个实例上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T06:53:39.750

除了 Gaurav 的解释之外，您还可以查看[我的博客文章](http://blogs.staykov.net/2011/12/windows-azure-basics-part-1-of-n.html)，其中详细描述了什么是云服务（以前称为托管服务）、什么是角色以及什么是实例。

如果你想更进一步，还可以继续查看[我的另一篇文章](http://blogs.staykov.net/2012/03/windows-azure-basics-part-2-of.html)，了解网络原理和术语。

# c# - 渲染到纹理用 XNA 中的颜色填充纹理

> ID：12361945
> 
> 赞同：1
> 
> 时间：2012-09-11T02:34:56.653
> 
> 标签：c#, xna

我在 XNA 中工作，遇到了以下问题：我的目标是将许多不同的纹理绘制到纹理上，然后使用给定的 alpha 值将最终纹理绘制到屏幕上。

问题是我绘制的纹理是全屏的，并且填充了颜色而不是透明度，因此它遮挡了它后面的所有内容。

一切都是二维的，这是我的代码：

```
public void Draw(SpriteBatch sb)
            {
            if (opacity > 0)
                {
                gd.SetRenderTarget(formTexture);
                gd.Clear(Color.Transparent);
                for (int i=0; i<formItems.Count; i++)
                    {
                    ((FormItem)formItems[i]).draw(sb);
                    }
                sb.Begin(SpriteSortMode.Immediate, BlendState.Additive);
                    for (int i=0; i<formItems.Count; i++)
                        {
                        FormItem fi = (formItems[i] as FormItem);
                        if (fi.glow != null)
                            {
                            sb.Draw(fi.glow, new Rectangle((int) fi.location.X + fi.width/2 - fi.glow.Width/2, (int) fi.location.Y + fi.height/2 - fi.glow.Height/2, fi.glow.Width, fi.glow.Height), Color.White);
                            }
                        }
                sb.End();
                gd.SetRenderTarget(null);
                sb.Begin();
                sb.Draw(formTexture, new Rectangle(0, 0, gd.Viewport.Width, gd.Viewport.Height), Color.White*opacity);
                sb.End();
                }
            } 
```

formTexture 是一个 RenderTarget2D 对象，gd 是图形设备。这是 formTexture 的初始化方式：

```
formTexture = new RenderTarget2D(this.gd, this.windowWidth, this.windowHeight); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:37:38.977

您遇到的问题是**设置渲染目标 -*并且后台缓冲区算作渲染目标*- 将清除该渲染目标**。

至少如果`RenderTargetUsage.DiscardContents`（[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.rendertargetusage.aspx)）设置。这是默认设置，因为它是唯一在 Xbox 360 上表现良好的设备，在 Xbox 360 上保留内容需要昂贵的副本。（它是 Windows 上的默认设置，只是为了保持跨平台的行为相同）。

您的后台缓冲区正在被清除为“哎呀，这是一个新的缓冲区”颜色（通常是紫色）在这一行：

```
gd.SetRenderTarget(null); 
```

* * *

**有两种方法可以解决这个问题：**

**首选**方法是对所有渲染进行排序，以便在帧的开头设置渲染目标，然后将场景绘制到后备缓冲区。切勿多次触摸渲染目标。

* * *

另一种方法是附加一个事件来`GraphicsDeviceManager.PreparingDeviceSettings`设置后台缓冲区使用`RenderTargetUsage.PreserveContents`：

```
void SetBackbufferPreserveContents(object sender,
                                   PreparingDeviceSettingsEventArgs e)
{
    e.GraphicsDeviceInformation.PresentationParameters.RenderTargetUsage
            = RenderTargetUsage.PreserveContents;
}

// in your game constructor:
graphics.PreparingDeviceSettings += SetBackbufferPreserveContents; 
```

如果您的游戏专门针对 Windows，您应该只使用第二种方法。

# java - 如何将 Intellij 配置为自定义代码生成位置？

> ID：12361948
> 
> 赞同：4
> 
> 时间：2012-09-11T02:35:22.060
> 
> 标签：java, ide, intellij-idea, getter, getter-setter

默认情况下，Intellij 在最近的位置生成代码。

例如，在生成 getter 方法时，它使 getter 方法靠近插入符号。

这不方便。

那么，如果我想在当前文件的底部生成getter方法，我该如何自定义位置呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:10:20.717

IDEA 12 将开箱即用地支持它，它将捆绑我们从头开始重写的[Rearranger插件。](http://plugins.intellij.net/plugin/?id=173)

不确定IDEA 11的旧插件是否支持它，但您可以尝试一下。

# ruby-on-rails-3 - `subject'：参数数量错误（1 代表 0）（ArgumentError）使用 Capybara

> ID：12361957
> 
> 赞同：1
> 
> 时间：2012-09-11T02:37:12.223
> 
> 标签：ruby-on-rails-3, rspec, capybara, specifications

我只是想测试我的用户模型。

错误来自测试这个位。

```
describe User do
  before do 
    @user = User.new(email: "foo@bar.com", password:"foobar",
                 password_confirmation:"foobar", goal:"cut")
  end

  subject( @user )    
  .
  .
  . 
```

这是确切的错误：

```
rspec-core-2.10.1/lib/rspec/core/subject.rb:180:in `subject': wrong number of arguments (1 for 0) (ArgumentError) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T02:50:39.293

在 rspec 2.10.1 中，subject() 不允许任何参数。见[http://rubydoc.info/gems/rspec-core/2.10.1/RSpec/Core/Subject/ExampleGroupMethods#subject-instance_method](http://rubydoc.info/gems/rspec-core/2.10.1/RSpec/Core/Subject/ExampleGroupMethods#subject-instance_method)

我相信你实际上想将@user 作为一个块传递，所以：

```
subject{ @user } 
```

注意 {} 而不是 ()。

# mysql - 数据库损坏，无法删除

> ID：12361959
> 
> 赞同：-2
> 
> 时间：2012-09-11T02:37:15.653
> 
> 标签：mysql, database

我有一个数据库dict_development，里面有一个表的话。

我试图删除单词但很长时间没有反应，所以我使用 ctrl+Z 中断该过程。然后问题发生了。

现在，我对 dict_development 无能为力，包括：

```
drop database dict_development;

drop table words;

select * from words; 
```

每个命令都没有响应。

同时，dict_development 中的其他表也很好。

现在，我想手动删除表或数据库，例如，删除文件在

```
sudo rm -r /usr/local/mysql/data/dict_development 
```

但在删除上述文件后，我不认为一切都完成了。

任何人都可以给我一个方法来处理这个？

==============================更新=================== ===================

我重新启动了mysql服务器，现在连mysql本身都无法运行：/tmp中没有生成mysql.socket......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:38:46.057

ctrl-z 暂停进程。可能不是你所期望的。

键入“fg”将其带回前台。或许已经完结了！

# python - Python - 从同一目录导入模块

> ID：12361960
> 
> 赞同：0
> 
> 时间：2012-09-11T02:37:24.637
> 
> 标签：python, google-app-engine

> **可能重复：**
> [在 Google App Engine 上使用 Python NLTK (2.0b5)](https://stackoverflow.com/questions/1286301/using-the-python-nltk-2-0b5-on-the-google-app-engine)

我正在将我的脚本添加到 Google App Engine，我需要让一些模块工作。所以我找到了普通的旧文件（在我的例子中是“NLTK”模块），并将它添加到与我的 Google App Engine 项目相同的目录中。目前，我所有的错误都来自 nltk 的导入，当我尝试通过在另一个文件中测试它完全忽略谷歌应用程序时，我仍然收到导入错误。

那么，当 NLTK 模块与我的 python 文件位于同一目录中的文件夹中时，如何导入它而不会出错。

**编辑：** 所以我让导入线在 IDLE 中工作......

```
from nltk.corpus import wordnet 
```

但是在尝试将程序与 Google 应用引擎一起使用时，我仍然遇到服务器错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:29:41.577

这个问题太模糊了，你需要包括更多的细节。

听起来您正试图将 nltk 包含在您的 GAE 项目中，并且您已将一个文件复制到您的 GAE 项目文件夹中。

您需要在 GAE 项目中包含整个 nltk 文件夹。如果 nltk 需要任何其他依赖项，您也需要将这些依赖项包含在您的 GAE 项目中。

# php - 使用 PDO 在 PHP 中使用函数更新值

> ID：12361968
> 
> 赞同：2
> 
> 时间：2012-09-11T02:38:18.803
> 
> 标签：php, mysql, function, pdo

我有一个面板来确认用户，可以有多个选择选项 select exc。我做了删除用户部分，它的工作很完美，但是更新它们以确认，我有一些问题，我无法更新确认的值，这里是代码：

面板的更新代码：

```
if(isset($_POST["members"])) {
$members = $_POST["members"];
while(list($index, $member_id) = each($members)) {
confirmMembers($member_id); }
$msg = "Success";} 
else { $msg = "Error"; } 
```

确认成员函数：

```
function confirmMembers($member_id) {
global $db, $log;

try {
$confirm_member = "UPDATE `members` SET `confirmed` = 1 WHERE `member_id` = :member_id  LIMIT 1";
$confirm_member_do = $db->prepare($confirm_member);
$confirm_member_do->bindParam(':member_id', $member_id, PDO::PARAM_INT);
$confirm_member_do->execute();
return true;
} catch(PDOException $e) {
$log->logError($e." - ".basename(__FILE__));
return false;
}
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:57:17.287

最后我发现了错误，对于所有可能犯同样错误的人，确认的行是一个枚举值并且必须等于“1”而不是 1，这修复了错误，现在它正在工作。

```
 $confirm_member = "UPDATE `members` SET `confirmed` = '1' WHERE `member_id` = :member_id  LIMIT 1"; 
```

感谢所有回复的人。

# android - 使用 Android 创建索引颜色 PNG

> ID：12361969
> 
> 赞同：2
> 
> 时间：2012-09-11T02:38:31.000
> 
> 标签：android, png, image-compression

我想知道是否有人知道强制Android使用其功能创建索引颜色PNG文件的`compress`方法。

例如：

```
 InputStream FIS = ...
    BitmapFactory.Options opt = new BitmapFactory.Options();
    opt.inPreferredConfig = Bitmap.Config.ARGB_8888;
    opt.inScaled = false;
    Bitmap img = BitmapFactory.decodeStream(FIS, null, opt);

    // Resize
    float scale = 0.8f;
    Matrix matrix = new Matrix();
    matrix.postScale(scale, scale);
    Bitmap scaledBitmap = Bitmap.createBitmap(img, 0, 0, img.getWidth(), img.getHeight(), matrix, true);
    img = null; // Free

    // Write
    File sdCard = Environment.getExternalStorageDirectory();
    File dir = new File(sdCard.getAbsolutePath() + "/scaled/");
    FileOutputStream FOS = new FileOutputStream(new File(dir, "out.png"));
    scaledBitmap.compress(Bitmap.CompressFormat.PNG, 100, FOS);
    scaledBitmap = null; // Free 
```

此代码打开一个 PNG 文件，将其大小调整为 80% 并将其保存到 SD 卡。生成的图像确实缩放到 80%，但生成的文件大小几乎是原始大小的 5 倍。

```
-rw-rw-r-- 1 个用户用户 55878 Sep 10 19:00 8500_001.2B.png <- 输入
-rwxr--r-- 1 个用户 user 245933 Sep 10 21:49 out.png <- 输出

```

这是因为原始文件使用的是索引颜色（PseudoClass），而不是真彩色（DirectClass）。[1]

```
$ 识别 8500_001.2B.png
8500_001.2B.png PNG 1712x2200 1712x2200+0+0 8 位伪类 2c 55.9KB 0.000u 0:00.000

$识别出.png
out.png PNG 1370x1760 1370x1760+0+0 8 位 DirectClass 246KB 0.000u 0:00.000

```

ImageMagick 足够聪明，可以使用索引颜色和双色颜色图对原始双色图像进行编码。在 Android 中打开、缩放和重新编码后的文件不会这样做，而是对每个像素使用真彩色，从而导致文件大小更大。

**问题**

1.  有谁知道是否有办法强制标准 Android 库使用颜色图压缩文件？
2.  如果没有，有谁知道是否有任何纯 Java 实现可以完成这 3 个任务（解码、缩放、编码）？

提前致谢。

[1] [PNG 规范](http://www.w3.org/TR/PNG/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:29:24.763

可以使用 pngj 一个可以保存索引 png 的 java 库。

[http://code.google.com/p/pngj/](http://code.google.com/p/pngj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T10:32:01.503

> 有谁知道是否有任何纯java实现

是的，使用[pngj](http://code.google.com/p/pngj/)库。它是一个普通的**.jar**库。

看看这里： [使用 PNGJ 2.1.1 创建索引 PNG](http://dukesoftware00.blogspot.com/2014/06/java-create-index-png-using-pngj-211.html)

对于一些 java 示例，这里有一个 java 应用程序： [Lance Nanek](https://github.com/lnanek)的[NeatoCode Techniques](https://github.com/lnanek/ExampleGenerateLowColorPngImage)

# javascript - 带有 jquery 插件的主干.js 视图

> ID：12361970
> 
> 赞同：0
> 
> 时间：2012-09-11T02:38:34.220
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我发现了一些类似的问题，但没有一个对我有用...我有加载了 require.js 的 jquery 插件（它在查看脚本后加载），我需要在输入更改时访问它的方法，我确实尝试过用 reder但它是一样的。这就是我到目前为止所拥有的。

```
events: {
    "change #signageUploadInput": "loadingImage"
},

loadingImage: function(event) {
    $('body').loadImage(
        event.target.files[0],
        function (img) {
            document.body.appendChild(img);
        },
        {maxWidth: 600}
    );
} 
```

对象 [对象对象] 没有方法 'loadImage'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:39:40.580

原来脚本可以从主干视图访问。问题在于插件尝试访问窗口对象的方式。我使用了不同的脚本，效果很好。这就是我用的：

上传者.js

```
function my_uploader(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

        // Only process image files.
        if (!f.type.match('image.*')) {
            continue;
        }

        var reader = new FileReader();

        // Closure to capture the file information.
        reader.onload = (function(theFile) {
            return function(e) {
                // Render thumbnail.
                var span = document.createElement('span');
                span.innerHTML = ['<img class="thumb" src="', e.target.result,
                                  '" title="', escape(theFile.name), '"/>'].join('');
                document.getElementById('list').insertBefore(span, null);
            };
        })(f);

        // Read in the image file as a data URL.
        reader.readAsDataURL(f);
    }
} 
```

主干视图脚本

```
events: {
    "change #signageUploadInput": "loadImage",
},
loadImage: function(evt) {
    my_uploader(evt);   //script is inside fileuploader.js
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T04:11:30.467

当您加载页面或触发 Backbone 事件时，何时会出现此错误？因为如果是在页面加载时，Backbone 可能会在 require.js 加载您的插件文件之前尝试通过并编译您的所有事件和函数。不过，需要更多信息来解决这个问题，您能否使用 require.js 在 JavaScript 文件中发布您正在加载的部分？

# javascript - jQuery 中的 attr() 是否强制小写？

> ID：12361971
> 
> 赞同：25
> 
> 时间：2012-09-11T02:38:34.547
> 
> 标签：javascript, jquery, svg, attr, lowercase

我正在尝试操作看起来像这样的 svg 'viewBox' 属性：

```
<svg viewBox="0 0 100 200" width="100" ...> ... </svg> 
```

使用

```
$("svg").attr("viewBox","..."); 
```

但是，这会在名为“viewbox”的元素中创建一个新属性。注意小写而不是预期的驼峰式。我应该使用其他功能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-11T19:35:24.640

我能够使用纯 javascript 来获取元素并通过使用设置属性

```
var svg = document.getElementsByTagName("svg")[0]; 
```

和

```
svg.setAttribute("viewBox","..."); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-21T13:52:33.150

根据[http://www.w3.org/TR/xhtml1/#h-4.2](http://www.w3.org/TR/xhtml1/#h-4.2) “XHTML 文档必须对所有 HTML 元素和属性名称使用小写。”

因此，为了避免在 XHTML 文档中将属性转换为小写，您需要使用 来创建指定命名空间的元素`document.createElementNS()`，例如：

```
var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('viewBox', '0 0 512 512’); 
```

如果您计划添加一个`<use/>`元素，您还需要在创建元素和`xlink:href`属性时指定命名空间，例如：

```
var use = document.createElementNS('http://www.w3.org/2000/svg','use');
    use.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', '#your_svg_id'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-05T11:09:55.647

你可以使用 jQuery 钩子：

```
['preserveAspectRatio', 'viewBox'].forEach(function(k) {
  $.attrHooks[k.toLowerCase()] = {
    set: function(el, value) {
      el.setAttribute(k, value);
      return true;
    },
    get: function(el) {
      return el.getAttribute(k);
    },
  };
}); 
```

现在 jQuery 将使用您的 setter/getter 来操作这些属性。

**注意**会`el.attr('viewBox', null)`失败；你的钩子设置器不会被调用。相反，您应该使用 el.removeAttr('viewBox')。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-11T02:42:42.597

您要确保在操作之前删除 attr（如果它已经存在）

```
$("svg").removeAttr("viewBox") 
```

然后重新创建它

```
$("svg").attr("viewBox","..."); 
```

# linux - 如何在unix系统中加入两个文件的列

> ID：12361977
> 
> 赞同：8
> 
> 时间：2012-09-11T02:39:04.517
> 
> 标签：linux, shell

我有 2 个文件，每个文件有一列多行，每个文件的行都是相同的。如何将 2 个文件的列连接在一起，以便最终结果文件具有来自 file1 和 file2 的两列？

例如，file1 是：

```
1
2
3 
```

文件2是：

```
a
b
c 
```

预期的输出是：

```
1   a
2   b
3   c 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-11T02:42:29.350

只需使用粘贴命令。像这样使用它：`paste file1 file2`

# ios - XIB和NIB有什么区别？

> ID：12361980
> 
> 赞同：25
> 
> 时间：2012-09-11T02:39:38.290
> 
> 标签：ios, interface-builder, xib, nib

> **可能重复：**
> [.NIB -> .XIB 怎么了？](https://stackoverflow.com/questions/1068191/whats-up-with-the-nib-xib)

我想知道 xib 和 nib 有什么区别，我知道 xib = xml interface builder 和 nib 是 next interface builder，但我不清楚两者之间的区别，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-11T02:43:40.140

Xib 或多或少是一个 XML 文档，它是 nib 的未编译读/写版本。一旦你编译了一个 xib，它就变成了一个 nib。

# r - 在字符串开头之前粘贴

> ID：12361981
> 
> 赞同：8
> 
> 时间：2012-09-11T02:39:53.217
> 
> 标签：r, paste, sapply

所以我有一个向量

```
lizt <- c("a","b","c")

> lizt
[1] "a" "b" "c" 
```

我可以使用 sapply在每个元素**之后粘贴字符**

```
lizt2 <- sapply(lizt,paste0, "$", USE.NAMES=F)

lizt2
[1] "a$" "b$" "c$" 
```

现在，我如何使用类似的功能在每个元素**之前粘贴字符，所以我得到**

```
lizt3
[1] "^a$" "^b$" "^c$" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T02:47:48.757

`paste`并且`paste0`是矢量化的，所以你不需要`sapply`

```
paste0('^', lizt, '$')
## [1] "^a$" "^b$" "^c$" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T02:51:40.410

正如[mnel](https://stackoverflow.com/users/1385941/mnel) [所示](https://stackoverflow.com/a/12362052/967840)，你不需要在`sapply`这里使用，但如果你想使用，你可以创建自己的自定义函数来使用，`sapply`如下所示：

```
> sapply(lizt, function(x) paste0("^", x, "$"), USE.NAMES=FALSE)
[1] "^a$" "^b$" "^c$" 
```

# android - Android：将图像从 URL 下载到 Assets 文件夹

> ID：12361982
> 
> 赞同：3
> 
> 时间：2012-09-11T02:39:54.073
> 
> 标签：android, image, download, assets

我有一种从给定 URL 下载图像的方法。是否可以将下载的图像存储在 Assets 文件夹中，然后在运行时引用它？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T02:44:23.453

否。资产文件夹未列为[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)。您需要使用[内部存储或外部存储 API](http://developer.android.com/guide/topics/data/data-storage.html)来存储您的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T02:47:09.600

您的设备上没有资产文件夹，您可以将图像保存到 sd 卡上自己的文件夹中，并具有适当的 android 权限。

# jquery - jQuery 1.8+ 打破了在绝对定位元素内滚动的可排序列表，底部：0

> ID：12361986
> 
> 赞同：9
> 
> 时间：2012-09-11T02:40:09.143
> 
> 标签：jquery, jquery-ui

使用 jQuery 1.7.2，我能够将可排序元素拖动到绝对定位的元素中，底部：0; 但是从 jQuery 1.7.2 升级到 1.8 会导致以下 jsfiddle 不起作用：

[http://jsfiddle.net/m765z/3/](http://jsfiddle.net/m765z/3/)

容器从不滚动。如果切换回 1.7.2，它会滚动。

我在 jQuery 更改日志中找不到更新，也没有在 jQueryUI 中找到类似的错误报告。

试图弄清楚它为什么坏了以及如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:45:29.177

jQuery 1.8.3 和 jQuery UI 1.9.2 似乎已修复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:30:23.510

如果您删除溢出，滚动将起作用： auto;

来自你的 CSS - #wrapper

# python - unittest 测试用例中的重复代码

> ID：12361990
> 
> 赞同：8
> 
> 时间：2012-09-11T02:40:39.440
> 
> 标签：python, unit-testing, python-3.x, refactoring

我有一个看起来像这样的测试用例：

```
def MyTestCase(unittest.Testcase):
  def test_input01(self):
    input = read_from_disk('input01')
    output = run(input)
    validated_output = read_from_disk('output01')
    self.assertEquals(output, validated_output)
  def test_input02(self):
    input = read_from_disk('input02')
    # ...
  # and so on, for 30 inputs, from input01 to input30 
```

现在，我知道测试代码可能有点重复，因为简单比简洁更重要。但这变得非常容易出错，因为当我决定更改此处使用的某些函数的签名时，我不得不在所有 30 个地方进行更改。

我可以将其重构为已知输入的循环，但我确实希望每个输入都保持单独的测试，所以我认为我应该制作这些`test_inputxx`方法。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T02:52:47.417

编写一个辅助函数来删除测试用例中的重复：

```
def MyTestCase(unittest.Testcase):
  def run_input_output(self, suffix):
    input = read_from_disk('input'+suffix)
    output = run(input)
    validated_output = read_from_disk('output'+suffix)
    self.assertEquals(output, validated_output)

  def test_input01(self): self.run_input_output('01')
  def test_input02(self): self.run_input_output('02')
  def test_input03(self): self.run_input_output('03') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T03:01:58.237

我喜欢 Ned Batchelder 的解决方案。但是对于后代，如果您可能经常更改输入的数量，您可以执行以下操作：

```
def MyTestCase(unittest.Testcase):
    def __init__(self, *args, **kwargs):
        for i in range(1,31):
            def test(self, suffix=i):
                input = read_from_disk('input%02d' % suffix)
                output = run(input)
                validated_output = read_from_disk('output%02d' % suffix)
                self.assertEquals(output, validated_output)
            setattr(self, 'test_input%02d' % i) = test
        super(MyTestCase, self).__init__(*args, **kwargs) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T02:49:18.057

像这样的东西怎么样，以便它报告哪个输入失败。

```
def MyTestCase(unittest.Testcase):
  def test_input01(self):
    for i in range(1,30):
      input = read_from_disk('input%.2d' %i)
      output = run(input)
      validated_output = read_from_disk('output%.2d' %i)
      self.assertEquals(output, validated_output, 'failed on test case %.2d' %i) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-08T22:03:26.907

对于这种测试，我最喜欢的工具是参数化测试用例，它看起来像这样：

```
from nose_parameterized import parameterized

class MyTestCase(unittest.TestCase):
    @parameterized.expand([(1,), (2,), (3,)])
    def test_read_from_disk(self, file_number):
        input = read_from_disk('input%02d' % file_number)
        expected = read_from_disk('output%02d' % file_number)

        actual = run(input)
        self.assertEquals(expected, actual) 
```

您编写测试用例以获取所需的任何参数，将参数化函数包装在`@parameterized.expand`装饰器中，并在 expand() 调用中提供输入参数集。然后，测试运行者请为每组参数运行一个单独的测试！

在这种情况下，只有一个参数，因此`expand()`调用有一个不幸的额外嵌套级别，但是当您的用例稍微复杂一点并且您使用`param`对象为您的测试函数提供 args 和 kwargs 时，这种模式变得特别好：

```
from nose_parameterized import parameterized, param

class MyTestCase(unittest.TestCase):
    @parameterized.expand([
        param(english='father', spanish='padre'),
        param(english='taco', spanish='taco'),
        ('earth', 'tierra'), # A regular tuple still works too, but is less readable
        ...
    ])
    def test_translate_to_spanish(self, english, spanish):
        self.assertEqual(translator(english), spanish) 
```

该模式允许您轻松清晰地指定多组输入参数，并且只需编写一次测试逻辑。

I use [nose](https://pypi.python.org/pypi/nose) for testing, so my example uses [nose-parameterized](https://pypi.python.org/pypi/nose-parameterized), but there's also a [unittest-compatible version](https://pypi.python.org/pypi/parameterized_testcase/0.3).

# r - 如何在 R 中创建一个虚拟变量

> ID：12361991
> 
> 赞同：3
> 
> 时间：2012-09-11T02:40:39.347
> 
> 标签：r

我试图通过从 HOUSE 列中提取数字来为“好”和“坏”创建一个虚拟变量。我想要做的是，如果 HOUSE 列中的值为 1、2、9，则房屋为“好”，否则为“坏”）

我正在粘贴`dput`我的 data.frame 对象的输出。

```
## dput output assigned to the housetype variable

structure(list(Price = c(10L, 20L, 31L, 41L, 52L, 63L, 45L, 63L, 
64L, 45L), Location = structure(c(4L, 7L, 6L, 3L, 2L, 4L, 5L, 
1L, 6L, 8L), .Label = c("AK", "ATL", "BOS", "DC", "GA", "MA", 
"NYC", "PA"), class = "factor"), HOUSE = c(1L, 1L, 1L, 2L, 6L, 
7L, 8L, 9L, 10L, 11L)), .Names = c("Price", "Location", "HOUSE"
), class = "data.frame", row.names = c(NA, -10L)) 
```

如何以每个变量仍包含其他信息的方式创建虚拟变量？（价格和位置）

谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T02:51:40.817

你可以简单地做：

```
housetype$quality <- ifelse(housetype$HOUSE %in% c(1,2,9), "good", "bad")
housetype
#        Price Location HOUSE quality
# 1     10       DC     1    good
# 2     20      NYC     1    good
# 3     31       MA     1    good
# 4     41      BOS     2    good
# 5     52      ATL     6     bad
# 6     63       DC     7     bad
# 7     45       GA     8     bad
# 8     63       AK     9    good
# 9     64       MA    10     bad
# 10    45       PA    11     bad 
```

与其创建字符向量（“好”或“坏”），不如创建一个标志变量，即逻辑类型（TRUE 或 FALSE）的向量。它使用更少的内存，并且通常更易于使用：

```
housetype$is.good <- housetype$HOUSE %in% c(1,2,9)
housetype
#    Price Location HOUSE quality is.good
# 1     10       DC     1    good    TRUE
# 2     20      NYC     1    good    TRUE
# 3     31       MA     1    good    TRUE
# 4     41      BOS     2    good    TRUE
# 5     52      ATL     6     bad   FALSE
# 6     63       DC     7     bad   FALSE
# 7     45       GA     8     bad   FALSE
# 8     63       AK     9    good    TRUE
# 9     64       MA    10     bad   FALSE
# 10    45       PA    11     bad   FALSE 
```

# php - php curl远程登录和http PUT

> ID：12361995
> 
> 赞同：0
> 
> 时间：2012-09-11T02:40:58.333
> 
> 标签：php, json, curl, put

我为 soundcloud 创建了一个 php curl 登录，但我很难正确查找和编码 PUT 数据以跟随某人。

```
//login      
function login(){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, 'https://soundcloud.com/session/'); 
        curl_setopt ($ch, CURLOPT_POST, 1);
        $postData='token=&uid=&login_submitted_via=zoom&username=myusername&password=mypassword&remember_me=on';
        curl_setopt ($ch, CURLOPT_POSTFIELDS, $postData);
        curl_setopt ($ch, CURLOPT_COOKIEJAR, 'cloudcookie.txt');
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
        $store = curl_exec ($ch);
        return $ch;
    } 
```

我真的只是在尝试所有我能找到的关于 PUT 的东西，但无法弄清楚我发送的实际价值是什么。HttpFox 为 POST 数据显示“_method=PUT”，但我不知道如何找到 PUT 值实际应该是什么。任何方向将不胜感激。

```
//follow
    curl_setopt($ch, CURLOPT_URL, 'https://soundcloud.com/followings/cnn');
    curl_setopt ($ch, CURLOPT_COOKIEFILE, 'cloudcookie.txt');
    curl_setopt($ch, CURLOPT_REFERER, "http://soundcloud.com/people/");
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1');
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded; charset=UTF-8','Content-Length: 0'));
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT"); 
    curl_setopt($ch, CURLOPT_POSTFIELDS,'$whatvalue');
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    $chleadresult = curl_exec($ch);
    $chleadapierr = curl_errno($ch);
    $chleaderrmsg = curl_error($ch);
    curl_close($ch); 
```

# matlab - R或matlab中精确召回曲线下的面积

> ID：12361997
> 
> 赞同：4
> 
> 时间：2012-09-11T02:41:05.103
> 
> 标签：matlab, classification

我有二进制目标列表的预测分数。使用 R 或 matlab 计算精确召回曲线下面积的最佳方法是什么？

我对此进行了一些搜索，但没有找到任何相关的功能/库来完成这项任务。这似乎很奇怪，因为这应该是人们做的相当普遍的事情。不知道我是否错过了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:56:51.433

下面是matlab实现

```
function auc = scoreAUC(category,posterior)
% auc = scoreAUC(category,posterior)
%
% Calculates the area under the ROC for a given set
% of posterior predictions and labels. Currently limited to two classes.
%
% posterior: n1 matrix of posterior probabilities for class 1
% category: n1 matrix of categories {0,1}
% auc: Area under the curve
%
% Author: Benjamin Hamner
% Date Modified: October 14, 2010
%
% Algorithm found in
% A Simple Generalisation of the Area Under the ROC
% Curve for Multiple Class Classification Problems
% David Hand and Robert Till
% http://www.springerlink.com/content/nn141j42838n7u21/fulltext.pdf

r = tiedrank(posterior);
auc = (sum(r(category==1)) - sum(category==1) * (sum(category==1)+1)/2) / ...
( sum(category<1) * sum(category==1)); 
```