# StackOverflow 问答 12295000-12295999

# iphone - 在 iphone 的首选项中显示值

> ID：12295000
> 
> 赞同：1
> 
> 时间：2012-09-06T07:29:02.777
> 
> 标签：iphone, ios, preferences, settings.bundle

我有一个`Settings.bundle`，里面有一个`Root.plist`。

因为我有一个并且我想在用户在设备页面`PSSliderPrefernce`中设置一个值时显示它的值。`Settings`

提前致谢![在此处输入图像描述](../Images/5c0083bdef3fcdb3d81d889cd5f863d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:21:36.290

在你的 UI 中添加一个 UILabel，编写如下方法：

```
//method for your slider
-(void)sliderValueChanged
{
   [yourLabel setText:[NSString stringWithFormat:@"%.3f", yourSlider.value]];
} 
```

# vb6 - 签入后，VSourceSafe 中的 VB6 exe 不一样

> ID：12295002
> 
> 赞同：0
> 
> 时间：2012-09-06T07:29:09.770
> 
> 标签：vb6, visual-sourcesafe

我们公司开始使用vb6集成的VSS，我们遇到的一个问题是Visual Basic项目文件的make-version-number在制作exe后没有更新。

其他表单/代码文件确实会更新。.vbp 文件未更新的原因和解决方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:57:42.470

确保项目位于 VSS 中并且在保存之前已检出。

确保您正在检入正确的 VBP 文件。

编译时，在签入之前，项目属性中的修订号是否会更改？

* * *

## 编辑 1（2012 年 10 月 29 日）：

* * *

请按照以下步骤告诉我结果： - 检查项目（包括 VBP 文件，确保您从 SourceSafe 获得最新版本）

*   打开 VBP，选中 Auto Increment 选项并且 Version Number 部分有有效数字（Major/Minor/Revision）

*   处理项目，编译 EXE，检查版本号部分是否有新的修订号

*   将所有文件（包括 VBP）签入 SourceSafe

*   关闭项目

*   从 SourceSafe 获取最新的 VBP 文件，打开它，检查版本号

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:08:45.050

如果您启用了“自动递增内部版本号”选项，那么您需要确保项目在编译后保存，然后再将其签入源代码管理。

您可以执行以下操作之一：

1.  编译后手动保存工程。
2.  退出 IDE，然后选择保存项目。
3.  右键单击 VBP 并从上下文菜单中进行编译。这将自动编译并保存项目。

项目文件还需要可写（即不是只读或签入）才能正确保存。

# iphone - 为什么即使在设置委托协议后也不调用 UIPickerView 委托方法？

> ID：12295003
> 
> 赞同：6
> 
> 时间：2012-09-06T07:29:13.183
> 
> 标签：iphone, ios, objective-c

`我正在创建一个正在运行的 UIPickerView，但它没有从数组中获取数据，因为没有调用委托方法。我设置了 UIPickerviewdelegate 和数据源，但仍然无法正常工作。不调用委托方法的原因可能是什么？？？？？？如果有人知道，请告诉我。提前谢谢。

```
picker.delegate=self;
picker.dataSource=self;

arrayOfState = [[NSMutableArray alloc] init];
[self.arrayOfState addObject:@"Assam"];
[arrayOfState addObject:@"Andhra Pradesh"];
[arrayOfState addObject:@"Madhya Pradesh"];
[arrayOfState addObject:@"West Bengal"];
[self.arrayOfState addObject:@"Orissa"];    
[self.arrayOfState addObject:@"Meghalaya"];
[arrayOfState addObject:@"Tripura"];
[arrayOfState addObject:@"Arunachal Pradesh"];  
[arrayOfState addObject:@"Jammu and Kashmir"];  

picker=[[UIPickerView alloc] initWithFrame:CGRectMake(0.0f,100.0f,40.0f,120.0f)];
picker.showsSelectionIndicator=YES; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T08:30:06.563

试试这个，

```
- (void)viewDidLoad
{

    [super viewDidLoad];
arrayOfState = [[NSMutableArray alloc] init];
[self.arrayOfState addObject:@"Assam"];
[arrayOfState addObject:@"Andhra Pradesh"];
[arrayOfState addObject:@"Madhya Pradesh"];
[arrayOfState addObject:@"West Bengal"];
[self.arrayOfState addObject:@"Orissa"];    
[self.arrayOfState addObject:@"Meghalaya"];
[arrayOfState addObject:@"Tripura"];
[arrayOfState addObject:@"Arunachal Pradesh"];  
[arrayOfState addObject:@"Jammu and Kashmir"];

picker=[[UIPickerView alloc] initWithFrame:CGRectMake(0.0f,100.0f,40.0f,120.0f)];
picker.delegate=self;
picker.dataSource=self;
picker.showsSelectionIndicator=YES;
[self.view addSubView:picker];
}

-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
    return 1;
}

// Total rows in our component.
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return [arrayOfState count];
}
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

        NSString *title;
        title=[arrayOfState objectAtIndex:row];  
        return title; 
    }

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T08:00:16.457

通常当有一个未调用的委托方法时，有以下三个原因：

1.  您没有将班级设置为代表。似乎您在为**选取**器对象分配内存之前设置了您的委托，这对我来说听起来很神奇。

2.  您没有在符合委托协议的类中实现委托方法。

3.  你没有将你的类设置为符合委托协议（这意味着你没有写这样的东西

`@interface yourClass : whateverurclassheritfrom <UIPickerViewDelegate>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:03:09.563

`Add objects to array before calling below code`

```
picker=[[UIPickerView alloc] initWithFrame:CGRectMake(0.0f,100.0f,40.0f,120.0f)];
picker.delegate=self;
picker.dataSource=self;
picker.showsSelectionIndicator=YES;
[self.view addSubView:picker]; 
```

问题是，你设置`delegate`和`datasource`之前`allocating` `picker`。

# php - php 文件上传与服务器目录访问

> ID：12295011
> 
> 赞同：0
> 
> 时间：2012-09-06T07:29:37.187
> 
> 标签：php, file-upload

我的一个项目面临一些典型问题。我项目中的一个部分需要一个文件上传器。要求是当用户点击浏览按钮时，不仅会打开本地目录，还需要访问已经上传的文件目录。在简单的文件上传器中，只能访问本地目录，我无法解决任何问题。如果有人可以在这个问题上帮助我，那对我来说会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:45:01.107

无法使用“文件打开对话框”/文件上传器从服务器浏览文件。您可以使用 (html,css,php) 在浏览器中创建一个对话框。

很难举个例子，因为我不知道你的要求。但是，您必须使用两个按钮，这会更容易：

1.  从您的计算机上传

2.  从服务器上传

点击“从服务器上传”，在浏览器（HTML+CSS）中打开一个窗口，列出服务器上的文件夹和文件。要实现这一点，请阅读此处：

[http://php.net/manual/en/function.scandir.php](http://php.net/manual/en/function.scandir.php)

[http://php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)

# jsf - 如何放置 request.getParameter("") 并将其放入 bean.method()？

> ID：12295017
> 
> 赞同：0
> 
> 时间：2012-09-06T07:29:55.780
> 
> 标签：jsf, variables, request, managed-bean, getparameter

嗨，我是 java 和 jsp 的新手。我无法从 jsp 中获得我的价值。

这是我的代码。这些是用jsp制作的。

```
<h:commandButton action="#{bean1.checkwork}" value="Get Info" type="submit">
   <f:param name="id" value="#{param['image_id']}" /f:param>
</h:commandButton> 
```

这是我的方法的托管 bean 代码

```
public String checkwork(){

    HttpServletRequest request = (HttpServletRequest)FacesContext.
        getCurrentInstance().getExternalContext().getRequest();
    String image_ID = null;
    if(request!=null){

        image_ID = request.getParameter("image_id");

        images(image_ID);
        student(matric);

    } else {
        System.out.println("fail");                    
        return "successful";
    } 
```

很抱歉，也许我添加了我的 faces-config.xml 数据，也许你们会知道发生了什么。因为我添加了你给的代码，它给了我空值。面孔.config.xml

```
<navigation-rule>
    <from-view-id>/MainPage.jsp</from-view-id>
    <navigation-case>
        <from-action>#{bean1.checkwork}</from-action>
        <from-outcome>successful</from-outcome>
        <to-view-id>chicken.jsp?image_id=#{param['image_id']}</to-view-id>
    </navigation-case>
</navigation-rule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:12:10.283

你`<f:param`为此

```
<h:commandButton action="#{bean1.work}" value="Get Info" type="submit">
    <f:param name="id" value="#{param['id']}"></f:param>
</h:commandButton> 
```

. . .

`work`方法代码

```
HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
String id= null;
if(request!=null){
    id= request.getParameter("id");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:41:09.813

我想你正在使用 JSF。如果是这样，请将 JSF 标记添加到您的问题中。如果没有，你可以忽略我的回答。

当你调用一个动作时，你不需要用请求数据参数化它。相反，您可以通过以下方式访问所有请求参数`FacesContext`：

```
public String checkwork() {
    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
    Map<String,String> requestParams = ec.getRequestParameterMap();
    final String id = requestParams.get("id");
    ... 
```

调用它使用

```
<h:commandButton action="#{bean1.checkwork}" value="Get info" /> 
```

# android - 错误：检索项目的父项时出错：找不到与给定名称“android:Theme.Holo”匹配的资源

> ID：12295018
> 
> 赞同：31
> 
> 时间：2012-09-06T07:30:01.270
> 
> 标签：android, themes

[错误：找不到与给定名称匹配的资源：attr 'listViewStyle'](https://stackoverflow.com/questions/8193172/error-no-resource-found-that-matches-the-given-name-attr-listviewstyle)

我已经尝试了这里的一切。没有任何工作。

我已将 API 演示导入 API 版本 15 的 Eclipse，并且还在 src 文件中出现错误，例如“无法解析导入 com.example.android.apis.R”

请帮帮我。

`values-v11/styles.xml`我在文件中有错误

```
<style name="ThemeHolo" parent="android:Theme.Holo">
</style>

<!-- For API level 11 or later, the Holo theme is available and we prefer that. -->
<style name="ThemeHoloDialog" parent="android:Theme.Holo.Dialog">
</style>

<!-- For API level 11 or later, we can use the magical DialogWhenLarge theme. -->
<style name="ThemeDialogWhenLarge" parent="android:style/Theme.Holo.DialogWhenLarge">
</style> 
```

而且我在 values/styles.xml 中有一个错误“错误：检索项目的父项时出错：找不到与给定名称'@android:style/Theme.Holo.Light.NoActionBar'匹配的资源。” 在以下几行中

```
<style name="BadTheme" parent="@android:style/Theme.Holo.Light.NoActionBar">
</style> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-06T07:36:31.350

您可以将 Holo 主题称为`parent="@android:style/Theme.Holo"`，但要使用 Holo 主题，您必须将清单中的构建目标设置为 API 级别 11 或更高版本，还必须将`style.xml`包含 Holo 主题的文件放入文件夹`values-v11`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-06T07:34:17.043

只需删除 HOLO，因为该资源不适用于该 API 级别

```
 parent="android:Theme.Light" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T22:59:55.473

将清单的*android:targetSdkVersion*值更改为正确的版本为我解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-20T16:50:46.517

即使在属性等中设置正确，我也遇到了类似的问题。这似乎是 Eclipse 的问题。我已经删除了 xml 文件的内容，然后“保存”，然后再次输入值，即

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar"> 
```

并再次“保存”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T07:33:47.103

你写的正是这个吗？

```
<item name="android:listViewStyle"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-28T06:55:35.203

我通过添加解决了同样的问题

```
 android:theme="@style/AppTheme" 
```

在 AndroidManifest.xml 文件中的应用程序标记内。这将识别应用程序主题。

```
<application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:debuggable="true" > 
        <activity 
            ...
        </activity>
      ...
</application> 
```

# apache - Partial search with solr

> ID：12295025
> 
> 赞同：0
> 
> 时间：2012-09-06T07:30:32.490
> 
> 标签：apache, solr

I use Apache Solr with Drupal. The problem is that it match exact word.

Example : search 'Hello' will return just the word Hello and not another word that begin with hello.

How can I configure Apache Solr to search partial word ?

Cordially

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:16:10.227

您需要使用[通配符查询](http://solr.pl/en/2010/12/20/wildcard-queries-and-how-solr-handles-them/)，例如 hello*
这将客户端要么以这种格式输入查询，要么在应用程序中修改它。

您还需要考虑：-

[#Analyzers](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#Analyzers)提到 -

> 在通配符和模糊搜索中，不对搜索词进行文本分析

否则，您可以使用[solr.EdgeNGramFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.EdgeNGramFilterFactory)生成令牌，这将匹配记录。例如，hello 会生成 he, hel, hell, hello，因此会匹配所有这些组合。

# java - 如何使用 JaXB 获取验证事件？

> ID：12295028
> 
> 赞同：6
> 
> 时间：2012-09-06T07:30:44.010
> 
> 标签：java, xml, validation, jaxb

我尝试使用 Jaxb 在变量中获取验证消息。从这里尝试示例[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/xml/bind/Unmarshaller.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/xml/bind/Unmarshaller.html)

我的代码：

```
JAXBContext jaxbContext = JAXBContext.newInstance("com.piyush");
SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
Schema schema = factory.newSchema(new StreamSource(new File("D:/liferay-develop/workspace/cat_test/v1/STD_MP.xsd")));
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
jaxbUnmarshaller.setSchema(schema);
ValidationEventCollector validationCollector= new ValidationEventCollector();
jaxbUnmarshaller.setEventHandler( validationCollector );
STDMP ts = (STDMP)jaxbUnmarshaller.unmarshal(xml_gkuzu);
if(validationCollector.hasEvents())
{
    for(ValidationEvent event:validationCollector.getEvents())
    {
        String msg = event.getMessage();
        System.out.println(msg);
    }
} 
```

但什么也没有发生。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T09:36:02.443

以下内容应该有所帮助：

**JAXB2ValidationEventCollector**

`ValidationEventCollector`来自[JAXB 1 (JSR-31)](http://jcp.org/en/jsr/detail?id=031)并且似乎不能很好地支持我们对[JAXB 2 (JSR-222)](http://jcp.org/en/jsr/detail?id=222)中的验证所做的更改。您可以通过创建`ValidationEventHandler`类似以下的子类来解决此问题。

```
package forum12295028;

import javax.xml.bind.ValidationEvent;
import javax.xml.bind.util.ValidationEventCollector;

class JAXB2ValidationEventCollector extends ValidationEventCollector {

    @Override
    public boolean handleEvent(ValidationEvent event) {
        super.handleEvent(event);
        return true;
    }

} 
```

* * *

**例子**

下面的例子可以用来证明一切正常

**顾客**

```
package forum12295028;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Customer {

    private String name;

    private List<PhoneNumber> phoneNumbers = 
        new ArrayList<PhoneNumber>();

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @XmlElement(name="phone-number")
    public List<PhoneNumber> getPhoneNumbers() {
        return phoneNumbers;
    }

    public void setPhoneNumbers(List<PhoneNumber> phoneNumbers) {
        this.phoneNumbers = phoneNumbers;
    }

} 
```

**电话号码**

```
package forum12295028;

public class PhoneNumber {

} 
```

**客户.xsd**

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="customer">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="name" type="stringMaxSize5"/>
                <xs:element ref="phone-number" maxOccurs="2"/>
             </xs:sequence>
        </xs:complexType>
    </xs:element>

    <xs:element name="phone-number">
        <xs:complexType>
            <xs:sequence/>
        </xs:complexType>
    </xs:element>

    <xs:simpleType name="stringMaxSize5">
        <xs:restriction base="xs:string">
            <xs:maxLength value="5"/>
        </xs:restriction>
    </xs:simpleType>

</xs:schema> 
```

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<customer>
   <name>Jane Doe</name>
   <phone-number/>
   <phone-number/>
   <phone-number/>
</customer> 
```

**演示**

```
package forum12295028;

import java.io.File;

import javax.xml.XMLConstants;
import javax.xml.bind.*;
import javax.xml.bind.util.ValidationEventCollector;
import javax.xml.validation.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI); 
        Schema schema = sf.newSchema(new File("src/forum12295028/customer.xsd")); 

        JAXBContext jc = JAXBContext.newInstance(Customer.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        unmarshaller.setSchema(schema);
        ValidationEventCollector validationCollector = new JAXB2ValidationEventCollector();
        unmarshaller.setEventHandler(validationCollector);

        Customer customer = (Customer) unmarshaller.unmarshal(new File("src/forum12295028/input.xml"));

        if(validationCollector.hasEvents())
        {
            for(ValidationEvent event:validationCollector.getEvents())
            {
                String msg = event.getMessage();
                System.out.println(msg);
            }
        }
    }

} 
```

**输出**

```
cvc-maxLength-valid: Value 'Jane Doe' with length = '8' is not facet-valid with respect to maxLength '5' for type 'stringMaxSize5'.
cvc-type.3.1.3: The value 'Jane Doe' of element 'name' is not valid.
cvc-complex-type.2.4.d: Invalid content was found starting with element 'phone-number'. No child element is expected at this point. 
```

# php - 我应该如何在 SQL 中存储不同类型的帖子？(PHP/MySQL)

> ID：12295029
> 
> 赞同：2
> 
> 时间：2012-09-06T07:30:52.023
> 
> 标签：php, mysql, database, performance, database-design

我正在尝试优化我的 PHP 和 MySQL，但我对 SQL 数据库的理解充其量只是粗制滥造。我正在创建一个网站（主要用于学习目的），允许用户发布不同类型的帖子（图像/视频/文本/链接）。

这是我存储的基础知识

1.  **自动**- *int*（键索引）
2.  **用户 ID** - *varchar*
3.  **帖子 ID** - *varchar*
4.  **帖子类型**- *varchar*（YouTube、vimeo、图像、文本、链接）
5.  **文件名**- *varchar*（原始图像名称或链接标题）
6.  **来源**- *varchar*（外部链接或文件名 + ext）
7.  **标题**- *varchar*（用户选择的帖子标题）
8.  **消息**-*文本*（用户的实际帖子）
9.  **日期**- *int*（unix 时间戳）

我在其他表格中存储了与帖子相关的其他数据，我使用帖子 ID（如用户信息）获取这些数据，但我真的怀疑这是否是我应该存储信息的方法。我确实使用 PDO，但我恐怕这种格式可能会非常慢。

以另一种格式存储帖子信息是否有任何意义？我不想要过大的表，所以从性能的角度来看，我应该将一些信息存储为 blob/binary/xml/json 吗？

我似乎找不到任何关于 PHP/MySQL 优化的好资源。我遇到的大多数信息往往是 5 到 10 年前的内容，需要付费的内容，太低级，或者只是简单的文档，无法吸引我超过半小时的注意力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:36:30.657

数据库用于存储“数据”，并且可以快速检索数据。不要切换到其他任何东西，坚持使用数据库。

尽量不要将图片和视频存储在数据库中。将它们存储在磁盘上，并将对它们的引用保存在数据库表中。

最后，赶上数据库[规范化](http://www.w3schools.in/mysql/database-normalization/)，它将帮助您使数据库处于最佳状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:36:48.190

您所拥有的似乎还不错，但是您错过了有关索引和键的重要信息。

首先，我假设您的主键将是字段 1。好的，那里没有问题，但请确保您还在 userID、PostID、Date 上粘贴了一个索引，并且可能在 UserID、Date 上粘贴了一个复合索引。

其次，您是否打算在这些上具有搜索功能？在这种情况下，您可能需要启用全文搜索。

不要试图将数据存储在 JSON 或其他类似的东西中。存储它简单明了。您要做的最后一件事是尝试从数据库中提取一个字段以查看其中的内容。如果您的数据库无法解决，那就是糟糕的设计。

在这方面，大桌子没有任何*问题*。只要它们被很好地索引，一个小表或大表在访问它方面几乎没有什么区别（没有大量写得不好的 SQL 连接），所以要担心能够从中*获取*数据的简单性。

编辑：主键是通过某种唯一列识别行的可爱方法。因此，如果您想删除一行，在您的示例中，您可以指定 a`delete from yourTable where ID=6`并且您知道这只会删除*一行*，因为只有一行的 ID=6。

另一方面，索引与键不同，因为它就像一个备忘单，让数据库知道某些信息在表中的位置。例如，如果您在 UserID 列上有一个索引，当您在查询中传递一个 userID 时，数据库不必查看整个表，它会查看索引并知道该索引所有行的位置用户。

复合索引又向前迈进了一步，如果您知道要不断查询 UserID 和 ContentType 数据的内容，则可以添加复合索引（意味着一个索引中的两个字段上的索引），然后将允许数据库仅返回您在使用这两个列的查询中指定的数据，而无需筛选整个表 - 甚至无需筛选所有用户帖子以找到正确的内容类型。

现在，索引在服务器上占用了一些额外的空间，所以请记住这一点，但是如果您的表变得更大（这非常好），那么提高的效率是惊人的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T07:47:07.157

此时，暂时坚持使用 RDMS。一旦你对 PHP 和 MySQL 感到满意，那么以后可能会有更多的东西需要学习，比如 NoSQL、MongoDB 等。但就你目前的目的而言，因为每件事都有其目的，这是完全正确的，不会减慢速度。您的表架构似乎正确，几乎没有修改。

用户 id 和 Post id 将是整数，我认为这个表是 post 所以 post id 将自动递增，它将是主键。

另一件事是您使用 2 个字段，文件名和源，请注意，文件名将是上传的文件名，但如果源是指文件的完整路径，那么 DB 不是存储完整路径的地方。从 PHP 函数生成路径。每次不在数据库中访问该路径。否则，如果您需要更改路径，那么开销会很大。

您还询问了 blob 等问题。请注意，最好将文件存储在文件系统中而不是 db 中，而当想要将文件存储在 DB 表中时，像 blob 等这些字段很好，我不推荐在这里。

# c++ - 带有互斥锁和事件的 WaitForMultipleObjects

> ID：12295030
> 
> 赞同：2
> 
> 时间：2012-09-06T07:30:55.087
> 
> 标签：c++, winapi, synchronization, mutex

如果我有以下 C++ 代码（适用于 Windows 操作系统）：

```
HANDLE hEvent = ::CreateEvent(NULL, TRUE, FALSE, NULL);
HANDLE hMutex = ::CreateMutex(NULL, FALSE, NULL);

HANDLE hHandles[] = {
    hEvent,
    hMutex
};

DWORD dwR = ::WaitForMultipleObjects(2, hHandles, FALSE, INFINITE) - WAIT_OBJECT_0;

//if dwR == 0, what state is hMutex in?
//Or, do I need to call ReleaseMutex(hMutex) in that case? 
```

我不确定如何处理有关互斥锁的这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T07:36:18.677

`dwR`不是完全为零，而是`WAIT_OBJECT_0 + 0`，那是您对第一个提供的句柄的等待得到了满足。这是事件的句柄，所以你不需要触摸你的互斥锁。

如果结果是，`WAIT_OBJECT_0 + 1`那么它是用于成功等待的互斥句柄。一旦你完成了你需要做的事情，你可以通过调用来释放所有权`ReleaseMutex`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:41:34.233

该函数用作互斥体上的 WaitForSingleObject 方法。MSDN 中有一个示例（[MSDN 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686927%28v=vs.85%29.aspx)），它说明了使用 WaitForSingleObject 获取互斥锁。WaitForMultipleObjects 在使用 Mutex 时具有相同的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-27T17:22:20.237

这是个好问题。无论如何，Microsoft 文档对此并不十分清楚。

带有 bWaitAll = FALSE 的 WaitForMultipleObjects 的文档说：“如果多个对象发出信号，则该函数返回数组中第一个句柄的索引，其对象发出信号。”

但是文档还说“仅对信号状态导致函数返回的对象或对象进行修改”，这是有道理的，因为否则我们将不知道是否还会获得 Mutex。

根据我的实验，WaitForMultipleObjects 不会获得“额外的”互斥锁，这很好。

# c#-4.0 - 我可以通过 FTP 服务器上的脚本来调整 FTP 命令的行为吗

> ID：12295032
> 
> 赞同：0
> 
> 时间：2012-09-06T07:31:01.820
> 
> 标签：c#-4.0, scripting, customization, ftp-server

我想知道我能否以某种方式调整 FTP 命令的行为，例如对于 STOR 命令。当 IIS 上的 FTP 服务器从任何 ftp 客户端接收 STOR 命令时，我想运行具有自定义代码（c# 编码）的脚本重定向到我的位置想保存文件。

问候， 维维克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:01:14.053

IIS 7.0 和 7.5 有一个[可扩展层](http://msdn.microsoft.com/en-us/library/dd723667%28v=vs.90%29)。它似乎无法改变命令的行为（可能是一件好事，因为它们是由适当的标准定义的），但是有一种机制可以[返回用户的主目录](http://msdn.microsoft.com/en-us/library/dd692893%28v=vs.90%29)，这可能是您想要的。

一个类似（不相同）的问题可能有用：[IIS FTP 7.5 Extensibility (IFtpLogProvider and logging FTP failures to the event log)](https://stackoverflow.com/questions/2032198/iis-ftp-7-5-extensibility-iftplogprovider-and-logging-ftp-failures-to-the-event)

# c# - 使用 C# 连接到 SQLite

> ID：12295035
> 
> 赞同：1
> 
> 时间：2012-09-06T07:31:20.943
> 
> 标签：c#, ado.net, sqlite, parameter-passing

我收到以下错误：

> 输入字符串的格式不正确

任何人都可以帮助我吗？这是我的输入参数和方法：

```
public void insertSQL(Dictionary<string,object> objects, string dbConnectionString)
{
    openConnection(dbConnectionString);

    SQLiteCommand command = new SQLiteCommand(sqliteCon);
    command.CommandText = "INSERT INTO AppUser VALUES(@name, @surname)", objects, "Data Source=sample.s3db"
    command.CommandType = CommandType.Text;

    foreach (var param in objects)
    {
        command.Parameters.Add(new SQLiteParameter(param.Key,SqlDbType.NVarChar){ Value =  (String)param.Value} );
        Console.WriteLine(command.Parameters.Count);
    }
    command.ExecuteNonQuery();     
    closeConnection();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T22:22:13.227

您必须说明您正在为哪些列提供值（其他列将获得其默认值）类似于：

```
INSERT INTO AppUser (name,surname) VALUES(@name, @surname) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:51:14.810

查询中的参数名称应等于您为其赋值的参数：

```
using (SQLiteConnection connection = new SQLiteConnection(connectionString))
using (SQLiteCommand command = new SQLiteCommand(connection))
{
    command.CommandText = "...";

    command.Parameters.Add("@name", SqlDbType.NVarChar).Value = name;
    command.Parameters.Add("@surname", SqlDbType.NVarChar).Value = value;

    connection.Open();
    command.ExecuteNonQuery();
} 
```

# amazon-web-services - How to allow an instance to delete old snapshots of an attached volume?

> ID：12295038
> 
> 赞同：3
> 
> 时间：2012-09-06T07:31:34.627
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudformation

I'm trying to create a cloudformation template that would create a EC2 instance, mount a 2GB volume and do periodic snapshots, while also deleting the ones that are say a week or more old.

While I could get and integrate the access and secret keys, it seems that a signing certificate is required to delete snapshots. I could not find a way to create a new certificate with cloudformation, so it seems like I should create a new user and certificate manually and put that to the template parameters? In this case, is it correct that the user would be able to delete all the snapshots, including the ones that are not from that instance?

Is there a way to restrict snapshot deleting to only the ones with matching description? Or what's the proper way to handle deleting old snapshots?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T22:07:59.810

My recommendation is to create an IAM role (not IAM user) with CloudFormation and assign this role to the instance (again using CloudFormation). The role should be allowed to delete snapshots as appropriate.

One of the easiest ways to delete the snapshot using the IAM role on the instance is to use the boto Python AWS library. Boto automatically finds and uses the correct credentials if you run it on the instance with the assigned IAM role.

Here is a simple boto script I just used to delete snapshot `snap-51930522` in `us-east-1`:

```
#!/usr/bin/python
import boto.ec2
boto.ec2.connect_to_region('us-east-1').delete_snapshot('snap-51930522') 
```

Alternatively, you might have an external server run the snapshot cleanup instead of running it on the instances themselves. In addition to simplifying credential management and cron job distribution, it also lets you clean up after stopped or terminated instances.

# apache-flex - SkinnablePopUpContainer 中的 TextArea 错误

> ID：12295046
> 
> 赞同：0
> 
> 时间：2012-09-06T07:32:14.630
> 
> 标签：apache-flex, air

我正在尝试将 textarea 添加到 SkinnablePopUpContainer，但运行它会给我一个错误。如果我将 textarea 更改为例如标签，则代码运行良好：

```
<s:SkinnablePopUpContainer " " width="244" height="150">
<fx:Declarations></fx:Declarations>
<s:TextArea width="98%" editable="false" text="blah"/> 
```

**错误：**

> ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。在 flash.display::DisplayObjectContainer/getChildIndex() 在 mx.managers::SystemManager/http://www.adobe.com/2006/flex/mx/internal::rawChildren_getChildIndex()[E:\dev\4.y \frameworks\projects\framework\src\mx\managers\SystemManager.as:2187] 在 mx.managers::SystemRawChildrenList/getChildIndex()[E:\dev\4.y\frameworks\projects\framework\src\mx\ manager\SystemRawChildrenList.as:181] 在 spark.components.supportClasses::StyleableStageText/getFormIndex()[E:\dev\4.y\frameworks\projects\mobilecomponents\src\spark\components\supportClasses\StyleableStageText.as:1956 ] 在 spark.components.supportClasses::StyleableStageText/findTopmostForm()[E:\dev\4.y\frameworks\projects\mobilecomponents\src\spark\components\supportClasses\StyleableStageText.as：

**错误线**

```
loadingScreen = new InitializePopUp();
loadingScreen.open(this,true); <-- error happens here 
```

我正在使用 Flex builder 4.6，并且正在创建一个 flex 移动 AIR 应用程序

# django - django 将 locals() 传递给 celery 任务

> ID：12295053
> 
> 赞同：0
> 
> 时间：2012-09-06T07:32:30.330
> 
> 标签：django, exception, celery, locals

我正在使用 python 2.7 和 django 1.27，我正在使用 celery 执行任务。

我有这个观点

```
def my_view(request):
    do_stuff()
    local_1 = 1
    local_2 = 4
    celery_delayed_task(locals())
    return HttpResponse('OK') 
```

这导致了这个异常

> 传递locals()失败：不能pickle定义**slot**而不定义**getstate的类**

所以我想也许我需要创建 locals() 字典的副本，因为当视图不再存在时将调用该任务。

我试试这个：

```
def my_view(request):
    do_stuff()
    local_1 = 1
    local_2 = 4
    locals_dict = copy.deepcopy(locals())
    celery_delayed_task(locals_dict)
    return HttpResponse('OK') 
```

现在我得到了这个错误：

> 对象的深层复制失败：对象。**new** (cStringIO.StringO) 不安全，请使用 cStringIO.StringO。**新**()

显然我做错了，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:16:50.333

任务参数必须是序列化的。

Celery 默认使用 Python pickle 协议，但也支持 json、yaml、msgpack 或自定义序列化程序。

您尝试发送的对象不能被腌制。您有可能让它们变得可腌制，但最后——将本地人作为任务参数传递并不是一个好习惯。

请参阅：[http ://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)

# java - 在调整窗口大小之前不显示 GUI 元素

> ID：12295056
> 
> 赞同：6
> 
> 时间：2012-09-06T07:32:41.553
> 
> 标签：java, swing

我一直在尝试在 java 中制作 GUI，而不是一直使用“静态”并遇到“SwingUtilities.invokeLater()”方法。我设法完成了所有设置，但是在运行应用程序时，JPanel 上什么都不会出现，直到我调整窗口大小。有解决办法还是我做错了？

这是我的代码：

```
public class main extends JPanel implements ActionListener{ 
public JLabel userLabel;
public JLabel passLabel;
public JTextField userField;
public JTextField passField;
public JButton login;
public JButton closeLogin;
public JButton help;

public main(){
    userLabel = new JLabel("Username: ");
    passLabel = new JLabel("Password: ");
    userField = new JTextField(16);
    passField = new JTextField(16);

    login = new JButton("Login");
    login.setActionCommand("login");
    login.setMnemonic(KeyEvent.VK_L);
    closeLogin = new JButton("Close");
    closeLogin.setActionCommand("closeLogin");
    closeLogin.setMnemonic(KeyEvent.VK_E);
    help = new JButton("Help");
    help.setActionCommand("helpLogin");
    help.setMnemonic(KeyEvent.VK_H);

    login.addActionListener(this);
    closeLogin.addActionListener(this);
    help.addActionListener(this);

    add(userLabel);
    add(userField);
    add(passLabel);
    add(passField);
    add(login);
    add(help);
    add(closeLogin);

}
public void actionPerformed(ActionEvent e){ 
}
public static void initComponents(){
    JFrame loginFrame = new JFrame("Encrypted Chat - Login");
    loginFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    main loginPanel = new main();
    loginPanel.setLayout(new FlowLayout());
    loginFrame.setSize(300, 125);
    loginFrame.setResizable(false);
    loginFrame.setVisible(true);        
}
public static void main(String args[]){
    SwingUtilities.invokeLater(new Runnable(){
        public void run(){
            initComponents();
        }
    });
} 
```

}

编辑：我知道密码 JTextField 是一个 JPasswordField .. 所以忽略它：P

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T07:44:03.783

两个基本建议：

**1.）**当你使用swing，并且东西没有显示/更新时，你应该调用`JPanel.revalidate()`这`JPanel.repaint()`两个函数来更新你的面板。如果您使用的是 JFrame 并且没有向其中添加任何额外的面板，那么您可以通过以下方式获取内容面板`JFrame.getContentPane()`

**2.)**当您完成将组件添加到面板/框架时，您还应该调用`pack()`框架，这将确保您的所有组件都具有首选大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T07:40:31.160

您永远不会将您的内容添加到 JFrame。您需要的最小更改集：

```
 public static void main(String args[]){
    final main main = new main();
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        initComponents(main);
      }
    });
  } 
```

然后修改`initComponents`取一个`main`对象：

```
 public static void initComponents(main main){
    JFrame loginFrame = new JFrame("Encrypted Chat - Login");
    loginFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    main loginPanel = new main();
    loginPanel.setLayout(new FlowLayout());
    loginFrame.setSize(300, 125);
    loginFrame.setResizable(false);
    loginFrame.setVisible(true);
    loginFrame.add(main);  // <----- this line is added
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T07:41:03.183

for built_in `FlowLayout`(for `JPanel`) 我不建议使用`pack()`for `JFrame`，当然正确的方法可能是使用正确和更好`LayoutManager`的方法来完成这项工作，`GridBagLayout`或者`SpringLayout`

通过使用`JFrame#setSize()`和不使用输出`pack()`

![在此处输入图像描述](../Images/07bc2075dacf8f34f58ee6f713828e77.png)

例如

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class MainLogin implements ActionListener {

    private JFrame loginFrame = new JFrame("Encrypted Chat - Login");
    private JPanel pnl = new JPanel();
    private JLabel userLabel;
    private JLabel passLabel;
    private JTextField userField;
    private JTextField passField;
    private JButton login;
    private JButton closeLogin;
    private JButton help;

    public MainLogin() {
        userLabel = new JLabel("Username: ");
        passLabel = new JLabel("Password: ");
        userField = new JTextField(16);
        passField = new JTextField(16);
        login = new JButton("Login");
        login.setActionCommand("login");
        login.setMnemonic(KeyEvent.VK_L);
        closeLogin = new JButton("Close");
        closeLogin.setActionCommand("closeLogin");
        closeLogin.setMnemonic(KeyEvent.VK_E);
        help = new JButton("Help");
        help.setActionCommand("helpLogin");
        help.setMnemonic(KeyEvent.VK_H);
        login.addActionListener(this);
        closeLogin.addActionListener(this);
        help.addActionListener(this);
        pnl.add(userLabel);
        pnl.add(userField);
        pnl.add(passLabel);
        pnl.add(passField);
        pnl.add(login);
        pnl.add(help);
        pnl.add(closeLogin);
        loginFrame.add(pnl);
        loginFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        loginFrame.setSize(300, 125);
        loginFrame.setResizable(false);
        loginFrame.setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                MainLogin mainLogin = new MainLogin();
            }
        });
    }
} 
```

# dataset - 有没有办法为 Aviarc 数据集中的一个字段设置客户端权限？

> ID：12295065
> 
> 赞同：1
> 
> 时间：2012-09-06T07:33:07.447
> 
> 标签：dataset, client-side, aviarc

我知道您可以像这样为整个数据集设置客户端权限：

```
<dataset name="foo" databroker="bar" client-permissions="view"/> 
```

有没有办法只在一个字段上设置客户端权限（类似于如何为一个字段设置其他元数据，如“有效”）？

注意：这是在 Aviarc 3.5.0 中，因此数据绑定不可用。

**更新：**我想到的用例是搜索参数数据集。如果我从某个位置到达搜索屏幕，则应锁定一个参数，因为搜索结果应按该参数过滤。

为相当于临时搜索参数数据集的内容创建一个新的数据代理，以便我可以在单个字段上设置只读属性，这看起来真的有点矫枉过正。

**更新：**澄清一下，数据集目前没有绑定任何数据代理，它只是像哈希一样用于存储搜索参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T07:54:12.720

目前没有办法在单个列/字段上设置客户端权限。

应该可以在列上设置数据规则，以防止该列被数据集刷新以外的任何内容写入。

当我拥有应该是只读但包含在客户端可写数据集中的个别数据时，我将数据副本保留在非客户端可写数据集中，并在它们返回时覆盖客户端可写数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T04:37:17.307

如前所述，数据规则可以将单个字段设置为只读。它们可以设置在所有行的给定字段上，也可以设置在单行的字段上。

Adam 提到，为这种情况创建一个单独的数据代理将是矫枉过正，这是正确的。DataBinding 层旨在为应用程序中的某些用例提供这种专业化。

因此，您将创建一个指向您的搜索 DataBroker 的 DataBinding，它将您需要的规则添加到现有操作或您定义的新操作中。然后将 Dataset 绑定到 DataBinding 而不是 DataBroker，然后以正常方式使用。

其目的是受 DataBrokers 约束的规则适用于通过该代理提供的所有类型的数据，因此专注于数据完整性、格式等的规则也是如此。

另一方面，DataBindings 是应用程序中的一个层，允许您绑定与用户与数据交互相关的规则，如您的示例中所示。预计给定代理可能有多个数据绑定，每个数据绑定用于不同的应用程序路径或用户任务，以不同的方式与该数据交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T23:58:02.117

应该可以通过将我想要只读的参数隔离到它自己的数据集中来解决这个问题，并将客户端权限设置为仅针对该参数/数据集的“查看”。

这确实增加了必须为该参数添加特殊情况的开销，但我不需要将其扩展到任何更多特殊情况。

# android - Android：如何在单个 xml 文件中实现 viewpager 和视图

> ID：12295066
> 
> 赞同：18
> 
> 时间：2012-09-06T07:33:09.877
> 
> 标签：android, android-viewpager

更新：我可以使用以下布局在 Viewpager 中实现 3 个文本视图：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

       <TextView
          android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:text="view 1"/>
       <TextView
          android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:text="view 2"/>
       <TextView
          android:layout_height="wrap_content"
          android:layout_width="wrap_content"
          android:text="view 3"/>

    </android.support.v4.view.ViewPager>
</LinearLayout> 
```

我想为这 3 个视图实现 ViewPager。我想在单个 xml 文件中有 viewpager 和这 3 个视图。每个页面包含每个文本视图。我看过一些示例，但每个页面都是使用单独的 xml 布局文件实现的。

如何在单个 xml 文件中为这 3 个视图实现 viewpager。如果可能，请向我提供示例代码或示例。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-24T04:05:36.973

您可以使用嵌套子视图的单个 XML 布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <LinearLayout
            android:id="@+id/page_one"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >
                    <TextView
                    android:text="PAGE ONE IN"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:textColor="#fff"
                    android:textSize="24dp"/>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/page_two"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >
                    <TextView
                    android:text="PAGE TWO IN"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:textColor="#fff"
                    android:textSize="24dp"/>
        </LinearLayout>

    </android.support.v4.view.ViewPager>

</LinearLayout> 
```

但是...您还需要使用适配器来处理这个问题。在这里，我们返回找到的视图 ID，而不会对任何其他布局进行膨胀。

```
 class WizardPagerAdapter extends PagerAdapter {

        public Object instantiateItem(View collection, int position) {

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.id.page_one;
                break;
            case 1:
                resId = R.id.page_two;
                break;
            }
            return findViewById(resId);
        }

        @Override
        public int getCount() {
            return 2;
        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);
        }
    }

    // Set the ViewPager adapter
    WizardPagerAdapter adapter = new WizardPagerAdapter();
    ViewPager pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(adapter); 
```

我的问题是......这里的一些大师可以教我 ViewPager 是否有可能从 XML 读取子项并自动构建页面而不使用 instantiateItem()？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-16T10:31:09.737

# 更新

此答案将显示在布局内设置 ViewPager 页面的优化和托管方式。

### 第1步

首先制作两个页面布局 XML`layout_page_1.xml`和`layout_page_2.xml`.

### 第2步

现在将所有页面布局包含在您的父布局中`ViewPager`。

```
<androidx.viewpager.widget.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <include
        android:id="@+id/page_one"
        layout="@layout/layout_page_1" />

    <include
        android:id="@+id/page_two"
        layout="@layout/layout_page_2" />

</androidx.viewpager.widget.ViewPager> 
```

### 第 3 步

现在从您的代码中，通过简单的步骤设置适配器

```
// find views by id
ViewPager viewPager = findViewById(R.id.viewpager);

CommonPagerAdapter adapter = new CommonPagerAdapter();

// insert page ids
adapter.insertViewId(R.id.page_one);
adapter.insertViewId(R.id.page_two);

// attach adapter to viewpager
viewPager.setAdapter(adapter); 
```

就这样！您只需要一个用于所有 ViewPager 的通用适配器。

**CommonPagerAdapter.java 类**

```
public class CommonPagerAdapter extends PagerAdapter {
    private List<Integer> pageIds = new ArrayList<>();

    public void insertViewId(@IdRes int pageId) {
        pageIds.add(pageId);
    }

    @NonNull
    @Override
    public Object instantiateItem(@NonNull ViewGroup container, int position) {
        return container.findViewById(pageIds.get(position));
    }

    @Override
    public void destroyItem(@NonNull ViewGroup container, int position, @NonNull Object object) {
        container.removeView((View) object);
    }

    @Override
    public int getCount() {
        return pageIds.size();
    }

    @Override
    public boolean isViewFromObject(@NonNull View view, @NonNull Object object) {
        return view == object;
    }
} 
```

### 重要的提示

最好使用片段而不是视图。您应该创建片段并使用它`FragmentStatePagerAdapter`来维护堆栈、生命周期和状态。您可以查看[@this 答案](https://stackoverflow.com/a/53333548/6891563)以获取 using 的完整代码`FragmentStatePagerAdapter`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T06:36:38.313

那是不可能的。你可以这样做

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v4.view.ViewPager
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/pager"
 android:layout_width="match_parent"
 android:layout_height="match_parent" /> 
```

然后创建单独的 xml 文件并这样做。例如：我将使用 xml 文件名为 ios_frag.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
android:orientation="vertical" >
<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="50sp"/>
 </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-04T19:52:34.630

如果有人遇到同样的问题，我已经用一个适配器解决了这个问题，该适配器从您传递给它的任意视图组中提取页面视图。

```
 package com.packagename;

import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.view.ViewGroup;

import java.util.ArrayList;
import java.util.List;

public class ViewGroupPagerAdapter extends PagerAdapter {
    public ViewGroupPagerAdapter(ViewGroup viewGroup) {
        while (viewGroup.getChildCount() > 0) {
            views.add(viewGroup.getChildAt(0));
            viewGroup.removeViewAt(0);
        }
    }

    private List<View> views = new ArrayList<View>();

    @Override
    public Object instantiateItem(ViewGroup parent, int position) {
        View view = views.get(position);
        ViewPager.LayoutParams lp = new ViewPager.LayoutParams();
        lp.width = ViewPager.LayoutParams.FILL_PARENT;
        lp.height = ViewPager.LayoutParams.FILL_PARENT;
        view.setLayoutParams(lp);
        parent.addView(view);
        return view;
    }

    @Override
    public void destroyItem(ViewGroup parent, int position, Object object) {
        View view = (View) object;
        parent.removeView(view);
    }

    @Override
    public int getCount() {
        return views.size();
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }
} 
```

用法：

```
ViewPager viewPager=findViewById(...); // Retrieve the view pager
viewPager.setAdapter(new ViewGroupPagerAdapter(findViewById(R.id.id_of_your_view_group_where_you_store_the_pages))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-06T12:34:13.500

您可以继承`ViewPager`和覆盖`onInflate`.
此外，您将在布局编辑器中预览第一个 ViewPager 页面。
所有视图都保存在内存中，因此出于性能原因，您应该只在少量页面上使用它。

```
@Override protected void onFinishInflate() {
    int childCount = getChildCount();
    final List<View> pages = new ArrayList<>(childCount);
    for (int i = 0; i < childCount; i++) {
        View child = getChildAt(i);
        Class<?> clazz = child.getClass();
        if (clazz.getAnnotation(DecorView.class) == null) {
            pages.add(child);
        }
    }
    for (View page : pages) {
        removeView(page);
    }
    setAdapter(new PagerAdapter() {
        @Override public int getCount() {
            return pages.size();
        }

        @Override public Object instantiateItem(ViewGroup container, int position) {
            container.addView(pages.get(position));
            return position;
        }

        @Override public void destroyItem(ViewGroup container, int position, Object object) {
            container.removeView(pages.get((Integer)object));
        }

        @Override public boolean isViewFromObject(View view, Object object) {
            return pages.get((Integer)object) == view;
        }
    });
    super.onFinishInflate();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-18T14:49:51.693

```
 viewPager = (ViewPager) rootView.findViewById(R.id.viewpager);
    viewPager.setAdapter(new MyPagerAdapter(rootView));
    viewPager.setOffscreenPageLimit(3); //or whatever you like 
```

它缓存它并完美显示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T07:51:03.823

将此添加到您的 xml 布局文件中

```
<android.support.v4.view.ViewPager 
    android:id="@+id/view_pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" /> 
```

创建 3 `Fragment`s 并`TextView`为每个片段添加每个。然后创建一个子类化的适配器`PagerAdapter`

一个很好的例子可以在[这里找到](https://github.com/zipcerio/abs_vpi/blob/master/src/com/zipcerio/vpi/MainActivity.java)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T14:22:19.920

> 如何在单个 xml 文件中为这 3 个视图实现 viewpager。

对不起，但那是不可能的。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-09-06T07:36:05.350

很简单：在你的文件中添加一个 ViewPager 并放入你的 3 TextView...

# php - SugarCRM 中子面板（详细视图）中的“批量更新”选项

> ID：12295067
> 
> 赞同：0
> 
> 时间：2012-09-06T07:33:12.240
> 
> 标签：php, sugarcrm

我必须在子面板（详细视图）中创建“批量更新”选项，就像在列表视图中一样（默认情况下）。我从糖论坛和所有可能的链接中搜索了很多，但没有发现任何帮助。任何人都可以帮助如何使用默认的 include/massupdate.php 或 listview 等来完成此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:37:46.757

它应该已经存在，您只需要在其中添加一些 jQuery 调用即可显示它（可能通过本示例中完成的 after_ui_frame 逻辑钩子（[http://developers.sugarcrm.com/wordpress/2012/11/06/显示列表视图中的列的总金额，使用只是逻辑钩子和 jquery/](http://developers.sugarcrm.com/wordpress/2012/11/06/showing-the-total-amount-for-a-column-in-a-listview-using-just-logic-hooks-and-jquery/)）

```
$('#massupdate_form').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-22T15:43:27.183

suiteCRM 不提供默认功能。但可以通过升级保存方式实现。这是子面板中的批量更新示例。此示例显示批量更新是在客户详细信息视图下的联系人子面板中实现的。 [子面板中的质量更新](https://github.com/farjad6/SuiteCRM/commit/b5142d70d5491f75b7f4beeaeda3fb8566e021a3)

# c# - 将 2007 NDR 交换到公用文件夹

> ID：12295068
> 
> 赞同：0
> 
> 时间：2012-09-06T07:33:15.013
> 
> 标签：c#, exchange-server, agent, transport

如果目标是公用文件夹，Exchange 将删除未送达报告 (NDR)。

我想编写一个传输代理（SMTPReceiveAgent，c#）来绕过这种行为。目标是将 NDR 更改为“正常”邮件，不会通过交换删除。我对此进行了一些测试，但没有找到解决方案。现在我需要帮助。

这里有一些问题：

1.  识别 NDR 很容易。

    内容类型：多部分/报告；报告类型=交付状态；

    但是我必须在邮件中更改什么才能将其转换为“普通”邮件？更改为 multipart/alternative 不起作用或不够。

2.  作为替代方案，我可以使用从 NDR 捕获的所有信息创建一条新消息。在 SMTReceiveAgents.OnSubmitted 事件中执行此操作的最佳方法是什么？

3.  要从公用文件夹 NDR 为普通用户创建副本，我 `args.Mailitem.Recipients.Add(new RoutingAddress("username@mydomain.com"))` 在 EndOfDataHandler 中尝试过。这不起作用。为什么？

有任何答案、提示或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:22:02.410

[将 2007 NDR 交换到公用文件夹](https://stackoverflow.com/questions/12295068/exchange-2007-ndrs-to-public-folders)

Q1。您确实必须将其更改为 multipart/alternative，而且，您应该找到“Content-Type: message/delivery-status”并将其更改为 text/plain 但它不是必需的

Q2。您可以这样做，但对于“原始”邮件，您唯一的选择是将其拒绝给发件人、隔离它或允许它。没有删除/删除选项。但由于它会进入公用文件夹，因此将被丢弃.

如果您走这条路线，则在 EndOfHeadersEvent 期间枚举标头和正文，然后生成一个新的 MailMessage 对象并包含原始标头和正文

Q3。那应该可以工作..我可以看到它不起作用的唯一原因是，如果您尝试发送到不是服务器上接受域的外部收件人/域..如果那是您要尝试做的事情，那么您'将需要使用您的真实外部地址创建一个邮件联系人，然后将 NDR 抄送给外部联系人

下面是我能够完成你想要做的事情的代码。我挂钩 onRcpt 和 onEndOfHeaders 的原因是检查输入的收件人是否是公用文件夹地址。我发现它比在标题末尾枚举 rcpt 列表更快

![NDR 保存到公用文件夹](../Images/6edfe98760ef9ee0f9f04b25f395abc0.png)

```
void UserSendCounterSmtpReceiveAgent_OnRcptCommand(ReceiveCommandEventSource source, RcptCommandEventArgs e)
        {
            if(source == null || e == null)
            {
                return;
            }
            String recipient = e.RecipientAddress.ToString();
            if (recipient.Equals("publicfolder@domain.com"))
            {
                this.testOnEndOfHeaders = true;
            }

        }
        void UserSendCounterAgent_OnEndOfHeaders(ReceiveMessageEventSource source, EndOfHeadersEventArgs e)
        {
            if (source == null || e == null)
            {
                return;
            }

                if (testOnEndOfHeaders)
                {
                    this.testOnEndOfHeaders = false;
                    Header obj = e.Headers.FindFirst("Content-Type");
                    if (obj.Value.Equals(@"multipart/report"))
                    {
                        obj.Value = @"multipart/alternative";
                        e.MailItem.Recipients.Add(new RoutingAddress("forwardto@domain.com"));
                    }

                }

        } 
```

# ios - iOS 应用内购买交易 ID 是否总是一个长整数？

> ID：12295071
> 
> 赞同：0
> 
> 时间：2012-09-06T07:33:32.683
> 
> 标签：ios, database, in-app-purchase, schema

我正在创建一个游戏，我将应用内购买历史记录保存在数据库中。我正在设计数据库，我需要知道`transaction_id`从 Apple 服务器的收据验证返回的是否始终是一个适合 64 位的数字。似乎是这样，但我只需要确定。有没有人看到别的东西？如果它总是一个长整数，我会这样设计我的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:40:03.540

处理数据库中的整数值时的经验法则：

> 如果您不打算对该字段执行任何类型的数学计算，请将其存储为字符串。

同样[根据 docs](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKPaymentTransaction_Class/Reference/Reference.html#//apple_ref/occ/instp/SKPaymentTransaction/transactionIdentifier)，它是一个字符串：

```
@property(nonatomic, readonly) NSString *transactionIdentifier 
```

# javascript - paper.js 沿路径的动画

> ID：12295072
> 
> 赞同：3
> 
> 时间：2012-09-06T07:33:34.030
> 
> 标签：javascript, animation, canvas

我正在使用 paper.js 并且我正在尝试沿着我创建的路径为项目设置动画......

```
//Path : 
 path = new Path();
 path.add(new Point(0,100), new Point(120,100), new Point(120,150));
//Item
 circle = new Path.Circle(0,100,4);
 circle.strokeColor = "#EEE"; 
```

在制作动画时（使用 onFrame()），我希望圆圈跟随路径......有谁知道该怎么做？我没有在文档或谷歌上找到它..我希望它足够清楚..

感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:22:12.930

还没有测试它，但它应该是这样的。

```
// vars
var point1 = [0, 100];
var point2 = [120, 100];
var point3 = [120, 150];

// draw the line
var path = new Path();
path.add(new Point(point1), new Point(point2), new Point(point3));
path.closed = true;

// draw the circle
var circle = new Path.Circle(0,100,4);
circle.strokeColor = "#EEE";

// target to move to
var target = point2;

// how many frame does it take to reach a target
var steps = 200;

// defined vars for onFrame
var dX       = 0;
var dY       = 0;

// position circle on path
circle.position.x = target[0];
circle.position.y = target[1];

function onFrame(event) {

    //check if cricle reached its target
    if (Math.round(circle.position.x) == target[0] && Math.round(circle.position.y) == target[1]) {
        switch(target) {
            case point1:
                target = point2;
                break;
            case point2:
                target = point3;
                break;
            case point3:
                target = point1;
                break;
        }

        // calculate the dX and dY
        dX = (target[0] - circle.position.x)/steps;
        dY = (target[1] - circle.position.y)/steps;

    }

    // do the movement
    circle.position.x += dX;
    circle.position.y += dY;
} 
```

[工作演示](http://jsfiddle.net/J9xgY/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-06T14:29:08.977

更多控制速度的解决方案：

*   移动与时间成正比
*   可以按像素/秒设置速度

[http://jsbin.com/cukine/28/edit?html,输出](http://jsbin.com/cukine/28/edit?html,output)

```
var offset = 0;

circle.onFrame = function (event) {
  if (offset< path.length){
    circle.position =path.getPointAt(offset);
    offset+=event.delta*150; // speed - 150px/second
  }
  else {
    offset=0;
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-06T17:09:04.727

这是简单的解决方案，我添加了一个名为 Point 的方法，`getPointAtPercent`因此现在您可以在路径上运行该方法以获取该点的位置。

```
paper.Path.prototype.getPointAtPercent = function (percent) {
    return this.getLocationAt(percent * this.length).getPoint();
}; 
```

这是它工作的一个例子

[http://jsfiddle.net/icodeforlove/uqhr8txp/1/](http://jsfiddle.net/icodeforlove/uqhr8txp/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:52:43.060

您必须使用：

```
path.getLocationAt(); 
```

方法。此方法接受一个介于 0 和 1 之间的参数，其中 0 表示路径的起点，1 表示路径的终点并返回一个位置。

您可以使用：

```
path.length 
```

属性来计算参数的不同偏移量

```
steps = lengthOfSegmentToWalk / path.length
t = 0;
while( t <= 1  ){
    location = path.getLocationAt( t );
    t += step;
} 
```

祝你好运

编辑：：

或者你可以使用

```
path.flatten( maxDistance ); 
```

方法并从结果路径中读取所有点...

# jquery - 如何动态获取元素内的鼠标位置

> ID：12295076
> 
> 赞同：1
> 
> 时间：2012-09-06T07:33:47.053
> 
> 标签：jquery, html, css

这是我的[代码](http://jsfiddle.net/KLY3X/1/)：

# HTML

```
<div id="myDiv">
    Hello
</div>​ 
```

# CSS

```
#myDiv
{
    width:200px;
    height:100px;
    background-color:red;
}​ 
```

# jQuery

```
$("#myDiv").mousemove(function (e) {
    console.log($(this).offset().left);
}); 
```

它总是说“0”。我哪里错了？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:35:30.460

试试这个。

```
console.log("X Axis : " + e.pageX + " Y Axis : " + e.pageY); 
```

这对我有用:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:35:46.633

`$(this).offset()`产生 的位置，而`#myDiv`不是鼠标光标的位置。使用`e.clientX`.

# sql-server-2008 - MS SQL Server 2008 R2 复制 InsertLog 文件丢失

> ID：12295088
> 
> 赞同：0
> 
> 时间：2012-09-06T07:34:51.867
> 
> 标签：sql-server-2008, replication

我正在尝试在两台计算机（我的工作 PC 和服务器）之间设置一些复制。我已经在我的工作 PC 上测试了发布者，而另一个实例上的订阅者也在我的工作 PC 上，它运行良好。我已经在我的工作 PC 上创建了发布者，现在我正在服务器上创建订阅者。当代理启动时，我得到以下日志：

```
2012-09-06 07:26:29.362 The process could not read file 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\ReplData\unc\LGX-PAW_REPTEST_REPTESTPUB\20120906085935\InsertLog_4.pre' due to OS error 3.
2012-09-06 07:26:29.377 Category:OS
Source:  
Number:  3
Message: The system cannot find the path specified. 
```

我检查了路径，但它不存在，所以错误是有道理的，缺少 ReplData 文件夹。现在的问题是，为什么这个文件夹不见了？

完整的日志：

```
Date        06-09-2012 09:26:27
Log     Job History (LGX-PAW-RepTest-RepTestPub-PLX_SWDEV01\REPL2-DestinationDB-9A7A263C-E427-447C-982E-BC2FAD174935)

Step ID     1
Server      PLX_SWDEV01\REPL2
Job Name        LGX-PAW-RepTest-RepTestPub-PLX_SWDEV01\REPL2-DestinationDB-9A7A263C-E427-447C-982E-BC2FAD174935
Step Name       Run agent.
Duration        00:00:02
Sql Severity        0
Sql Message ID      0
Operator Emailed        
Operator Net sent       
Operator Paged      
Retries Attempted       0

Message
2012-09-06 07:26:27.770 Copyright (c) 2008 Microsoft Corporation
2012-09-06 07:26:27.770 Microsoft SQL Server Replication Agent: distrib
2012-09-06 07:26:27.770 
2012-09-06 07:26:27.770 The timestamps prepended to the output lines are expressed in terms of UTC time.
2012-09-06 07:26:27.770 User-specified agent parameter values:
            -Publisher LGX-PAW
            -PublisherDB RepTest
            -Publication RepTestPub
            -Distributor LGX-PAW
            -SubscriptionType 1
            -Subscriber PLX_SWDEV01\REPL2
            -SubscriberSecurityMode 1
            -SubscriberDB DestinationDB
            -Continuous
            -XJOBID 0x668947F23F047547879065B816A17E32
            -XJOBNAME LGX-PAW-RepTest-RepTestPub-PLX_SWDEV01\REPL2-DestinationDB-9A7A263C-E427-447C-982E-BC2FAD174935
            -XSTEPID 1
            -XSUBSYSTEM Distribution
            -XSERVER PLX_SWDEV01\REPL2
            -XCMDLINE 0
            -XCancelEventHandle 00000000000006C4
            -XParentProcessHandle 00000000000006B0
2012-09-06 07:26:27.770 Startup Delay: 1154 (msecs)
2012-09-06 07:26:28.925 Connecting to Subscriber 'PLX_SWDEV01\REPL2'
2012-09-06 07:26:28.940 Connecting to Distributor 'LGX-PAW'
2012-09-06 07:26:28.972 Parameter values obtained from agent profile:
            -bcpbatchsize 2147473647
            -commitbatchsize 100
            -commitbatchthreshold 1000
            -historyverboselevel 1
            -keepalivemessageinterval 300
            -logintimeout 15
            -maxbcpthreads 1
            -maxdeliveredtransactions 0
            -pollinginterval 5000
            -querytimeout 1800
            -skiperrors 
            -transactionsperhistory 100
2012-09-06 07:26:29.221 Initializing
2012-09-06 07:26:29.362 The process could not read file 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\ReplData\unc\LGX-PAW_REPTEST_REPTESTPUB\20120906085935\InsertLog_4.pre' due to OS error 3.
2012-09-06 07:26:29.377 Category:OS
Source:  
Number:  3
Message: The system cannot find the path specified. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:25:50.347

发现有问题的目录需要位于订阅者可以访问的共享驱动器上。

# java - 从 Eclipse 有选择地更新一个 jar

> ID：12295090
> 
> 赞同：-1
> 
> 时间：2012-09-06T07:34:57.473
> 
> 标签：java, jar, eclipse-plugin

> **可能重复：**
> [更新 jar 中的 .class 文件](https://stackoverflow.com/questions/1667153/updating-class-file-in-jar)

我想有选择地更新一个现有的 jar 文件（在工作区之外）添加/更新在我的 eclipse 工作区中生成的一些 .class 文件（分散在构建文件夹中的整个层次结构中）。现有的 jar 文件可以有一些不同的类（而不是工作区），所以我不能简单地进行“导出”。是否有任何工具/插件/简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:22:58.997

您可以使用 jar 实用程序：

> jar uf yourJarFile.jar 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:55:38.640

您可以使用 7zip 或 WinRar（可能还有许多其他存档管理器）修改 .jar 文件。我对类文件有点不确定，但我用它来更改 jsp 和 xslt 文件。您只需打开档案，修改或替换文件，它会询问您是否要更新档案本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:39:43.317

大多数存档管理器可以读取 .jar 文件（.jar 是 .zip 的一种）并向您显示内容

当然，您仍然需要编译您的代码 - 让我知道它是否有效我从未尝试过放入这样的文件来替换它们。

如果 .jar 已签名，您之后必须再次签名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:21:53.713

您可以使用 Winrar 实用程序替换 .class 文件，也可以使用 java 的 jar 实用程序

# iphone - if else 条件总是执行 else not if

> ID：12295092
> 
> 赞同：-3
> 
> 时间：2012-09-06T07:35:13.457
> 
> 标签：iphone, if-statement

我正在使用 if else 查看条件，但它总是执行 else

```
int mytestcount=rowCount;
NSLog(@"My Test ROw Count IS %d",mytestcount);

if (mytestcount=0) {

    NSLog("No Data To Upload");

}

else {

    [Coffee getInitialDataToDisplay:[self getDBPath]];

} 
```

我的如果是真的，那么它也会执行，否则我不知道为什么当 rowCount 为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:36:53.010

我猜你需要添加另一个 = 符号，以便它显示：

```
if (mytestcount==0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:41:34.197

= 是赋值运算符，== 是比较运算符。所以你的代码片段：

*   将 0 分配给 mytestcount
*   在 if 条件中使用 mytestcount，并且由于 mytestcount 等于 0 并且基于 C 的语言将 0 视为 false，因此您的 if 条件始终评估为 false，并且您的 else 分支始终执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:41:13.703

```
int mytestcount=rowCount;
 NSLog(@"My Test ROw Count IS %d",mytestcount);

if (mytestcount == 0) {

NSLog("No Data To Upload");

}

 else {

[Coffee getInitialDataToDisplay:[self getDBPath]];

} 
```

看看这个...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:42:54.143

您的语句`(mytestcount = 0)`实际上是分配`0`给`mytestcount`，然后使用 的值`mytestcount`作为布尔表达式，这将始终为假，因为它被分配了 的值`0`。

这是一个非常常见的错字，以至于大多数编译器可以检测到这种情况并在识别出这种模式时打印一条警告消息，因为您几乎总是不打算这样做。

**您应该考虑使用 运行 gcc** `-Wall -Werror`，如果编译器看到这些和其他类似错误的常见模式，这将导致编译器抛出错误。

# iphone - 尝试从 Web 视图委托推送新视图控制器时应用程序崩溃

> ID：12295094
> 
> 赞同：0
> 
> 时间：2012-09-06T07:35:18.807
> 
> 标签：iphone, objective-c, ios, ipad

我有一个`UINavigationController`包含一个`UIViewController`（比如'FirstVC'）。这个 'FirstVC' 包含一个`UIScrollView`并且在每个页面上`UIScrollView`我都添加了另一个`UIViewCotroller`（比如'SecondVC'）。这个**SecondVC**包含一个`UIWebView`有几个链接的。我想推另一个`UIViewController`（比如'ThirdVC'）`UIScrollView`。但是当我尝试做同样的事情时，它会使我的应用程序崩溃。这是我应用的代码：

**第一风投**

```
- (void)viewDidLoad{

    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(ShowThirdVCNotification:) name:@"ShowThirdVC" object:nil]; 

}

-(void)showAlbumNotification:(id)notificationObject{
    NSLog(@"ShowThirdVCNotification: %@", [notificationObject object]);// It's an array

    ThirdVC *controller = [[ThirdVC alloc] initWithNibName:@"ThirdVC" bundle:nil];
    [controller setImageArr:[notificationObject object]];
    [self.navigationController pushViewController:controller animated:NO];
} 
```

/* SecondVC.view 在加载时被添加到 FirstVC 的 scrollView */

**第二VC**：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
NSString *urlStr = [NSString stringWithFormat:@"%@", [request URL]];

    if ([[urlStr lastPathComponent] rangeOfString:@".jpg"].length) {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"ShowAlbum" object:self.imageDetailArr];
        return NO;
    }
return YES;
} 
```

**在线程 1 上，它列出了以下内容：**

```
4   0x00b0a8ab in -[UIWebScrollView didMoveToWindow] ()
5   0x007a583e in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
6   0x007af6d1 in -[UIScrollView _didMoveFromWindow:toWindow:] ()
7   0x007a54bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
8   0x007a54bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
9   0x007a54bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
10  0x007af6d1 in -[UIScrollView _didMoveFromWindow:toWindow:] ()
11  0x007a54bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
12  0x007a54bb in -[UIView(Internal) _didMoveFromWindow:toWindow:] ()
13  0x007a1c72 in -[UIView(Hierarchy) _postMovedFromSuperview:] ()
14  0x007a04c6 in __UIViewWasRemovedFromSuperview ()
15  0x007a0141 in -[UIView(Hierarchy) removeFromSuperview] ()
16  0x009e69bb in -[UINavigationTransitionView _cleanupTransition] ()
17  0x009e6c86 in -[UINavigationTransitionView _navigationTransitionDidStop] ()
18  0x0079a499 in -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] ()
19  0x00799d6d in +[UIViewAnimationState popAnimationState] ()
20  0x007a326c in +[UIView(Animation) commitAnimations] ()
21  0x009e6702 in -[UINavigationTransitionView transition:fromView:toView:] ()
22  0x009e5ccb in -[UINavigationTransitionView transition:toView:] ()
23  0x008422b7 in -[UINavigationController _startTransition:fromViewController:toViewController:] ()
24  0x008423df in -[UINavigationController _startDeferredTransitionIfNeeded] ()
25  0x00842561 in -[UINavigationController __viewWillLayoutSubviews] ()
26  0x0095e4ca in -[UILayoutContainerView layoutSubviews] ()
27  0x007a8301 in -[UIView(CALayerDelegate) layoutSublayersOfLayer:] () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:15:15.057

我认为你使用`UIWebViewNavigationType`条件并解决你的问题试试这个： -

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
        NSString *urlStr = [NSString stringWithFormat:@"%@", [request URL]];

        if ([[urlStr lastPathComponent] rangeOfString:@".jpg"].length) {

            if (navigationType == UIWebViewNavigationTypeLinkClicked)
            {
                ThirdVC *controller = [[ThirdVC alloc] initWithNibName:@"ThirdVC" bundle:nil];
                controller setImageArr:self.imageDetailArr];
                [self.navigationController pushViewController:controller animated:NO];

            }
            return NO;
        }
        return YES;
    } 
```

# extjs - 在按下回车时，在 EXTJS 中执行下一个按钮操作

> ID：12295100
> 
> 赞同：1
> 
> 时间：2012-09-06T07:35:40.410
> 
> 标签：extjs

我已经在 extjs 中创建了向导。在我有 2 个字段的表单中，当用户填写最后一个文本字段时，我需要按下`Enter`该操作，因为用户单击下一个按钮。如何实现它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:17:43.997

```
{
    xtype:'textfield',
    name:'whatever',
    enableKeyEvents: true,
    listeners: {
        keypress : function(textfield,eo){
            if (eo.getCharCode() == Ext.EventObject.ENTER) {
                //enter is pressed call the next buttons handler function here.
                this.up('form').down('nextButton').handler
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:54:36.857

或者您可以直接定义函数的名称：

如果您的按钮是这样创建的：

```
xtype: 'button',
text : 'Go',
listeners: {
    click: {
        fn: me.onSearchClick,
        scope: me
    }
} 
```

你可以这样做：

```
{ 
    xtype:'textfield',
    name:'whatever',
    enableKeyEvents: true,
    listeners: {
        keypress : function(textfield,eventObject){
            if (eventObject.getCharCode() == Ext.EventObject.ENTER) {
                me.onSearchClick();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T10:55:19.567

我实现这一点的方式与上述答案不同，并且在我看来它是优越的，因为您可以使用正确的 MVC 模型，而不是在您所看到的视图中执行它。

在我的控制器中，我在事件定义中使用了以下代码（我们在 init 函数中执行此操作）：

```
'searchform textfield': {
    specialkey: this.specialKeyPress
}, 
```

其中 'searhform' 是在控制器中为表单定义的选择器。

然后，处理此问题的函数如下所示：

```
/**
*   Peform the serach when the enter key is pressed.
*/
specialKeyPress(f, e, o) {
    if(e.getKey() == e.ENTER) {
        this.performSearch();
    }
}, 
```

这样做的另一个好处是，它默认适用于所有文本字段，而不必手动将其添加到每个文本字段。

# c++ - 在 Windows 8 Metro 应用程序上同步两个 ppl 任务

> ID：12295101
> 
> 赞同：1
> 
> 时间：2012-09-06T07:35:42.673
> 
> 标签：c++, visual-c++, microsoft-metro, windows-runtime, winrt-async

这是来自 msdn 的地铁相机应用程序。此代码用于显示来自相机的预览。此处的相机列表将显示在组合框中。用户可以选择相机以查看所选相机的预览，但是当我更改相机时，它首先释放资源然后开始所选摄像机的预览。由于释放过程是异步过程，并且在后台运行，因此在释放之前，它会启动所选摄像机的预览，同时释放删除“m_MediaCaptureMgr”指针和程序崩溃。

在 Win 32 中，我可以使用 waitforSingle 对象来同步它。我想知道如何最好地在 WinRT 和 ppl 任务中同步。

```
void CameraApp::MainPage::cmbCameraSelector_SelectionChanged(Platform::Object^ sender,  Windows::UI::Xaml::Controls::SelectionChangedEventArgs^ e)
{
if(m_DeviceVector.size() > 0)
{
    m_CaptureInitSettings->VideoDeviceId = m_DeviceVector[cmbCameraSelector->SelectedIndex]->Id;
    InitMediaCapture();
}
}

void CameraApp::MainPage::InitMediaCapture()
{
ReleaseMediaCapture();

//Sleep(3000);
auto _this = this;
m_MediaCaptureMgr = ref new MediaCapture();

task<void> stratPreview(m_MediaCaptureMgr->InitializeAsync(m_CaptureInitSettings));
stratPreview.then([_this]
{
    _this->previewElement->Source = _this->m_MediaCaptureMgr;
    task<void> startPrev(_this->m_MediaCaptureMgr->StartPreviewAsync());
    startPrev.then([=]
    {

        return _this->GetCameraSettings();
    });     
});

}    
void CameraApp::MainPage::ReleaseMediaCapture()
{
if (m_MediaCaptureMgr )
{
    auto prevOp = m_MediaCaptureMgr->StopPreviewAsync();
    task<void> releaseMediaCapture(m_MediaCaptureMgr->StopPreviewAsync());
    releaseMediaCapture.then([=]
    {
        m_MediaCaptureMgr = nullptr;
        bRelease = false;
    });
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:28:27.220

在 WinRT 中，您可以使用[concurrency::event](http://msdn.microsoft.com/en-us/library/dd492846)类。方法[event::wait](http://msdn.microsoft.com/en-us/library/dd492803)应该是[WaitforSingleObject的一个很好的替代品](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)

# android - 如何在 Android 中使用 JSON Web 服务？

> ID：12295103
> 
> 赞同：3
> 
> 时间：2012-09-06T07:35:50.597
> 
> 标签：android, json, web-services, rest, soap

我正在开发一个需要在其中使用 Web 服务的应用程序。因为我得到了 php 文件和 json 数据，被要求做 web 服务。由于我是开发新手，所以我不知道如何在 android native 中进行 web 服务编码。经过长时间的搜索，我知道通过使用 SOAP 和 REST，我们可以在 android 中使用 Web 服务。

任何人都可以向我推荐任何材料以及如何在 android native 中使用 JSON webservices。我们是否需要使用 SOAP 和 REST 服务在 android 中实现 Json Webservices，或者有任何其他可能在不使用 SOAP 和 REST 服务的情况下获取代码。

由于我是新来开发任何小的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:41:47.373

在我看来，最简单的方法是使用[HttpClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)发出请求。

然后用一些库解析结果，例如[GSON](http://code.google.com/p/google-gson/)

如果您还必须以 JSON 格式发送参数，您可以使用`POST`with`HttpClient`发送 JSON 字符串。

编辑：示例可能如下所示：

```
public class DataObject {
    private Integer intField;
    private String strField;
    // This is a class which object will be sent through http
}

public class Client {
    public DataObject getData() {
        URL url = new URL("http://www.android.com/");
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        try {
            InputStream in = new BufferedInputStream(urlConnection.getInputStream());
            //Here you have to read data from InputStream to String
            String jsonData = readStream(in);
            //Here you parse String using GSON
            return (new Gson()).fromJson(jsonData,DataObject.class);
        finally {
            urlConnection.disconnect();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:50:28.607

对于 JSON

```
 public class HttpRequests {
    private  InputStream is = null;
    public HttpRequests() { }
    public  String[] makeHttpRequest(String url, String method,List<NameValuePair> params) {
    String[] result = new String[2];
    try {
         if(method == "POST"){
             DefaultHttpClient httpClient = new DefaultHttpClient();
             HttpPost httpPost = new HttpPost(url);
             httpPost.setEntity(new UrlEncodedFormEntity(params));
             HttpResponse httpResponse = httpClient.execute(httpPost);
             HttpEntity httpEntity = httpResponse.getEntity();
             is = httpEntity.getContent();
             result[0]="true";
         }else if(method == "GET"){
             DefaultHttpClient httpClient = new DefaultHttpClient();
             String paramString = URLEncodedUtils.format(params, "utf-8");
             url += "?" + paramString;
             HttpGet httpGet = new HttpGet(url);
             HttpResponse httpResponse = httpClient.execute(httpGet);
             HttpEntity httpEntity = httpResponse.getEntity();
             is = httpEntity.getContent();
             result[0]="true";
         }          
    }catch (UnsupportedEncodingException e) {
        result[0]=e.toString();
    }catch (ClientProtocolException e) {
        result[0]=e.toString();
    }catch (IOException e) {
        result[0]=e.toString();
    }
    if(result[0]=="true"){
        try {
             BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
             StringBuilder sb = new StringBuilder();
             String line = null;
             while ((line = reader.readLine()) != null) 
             {
               sb.append(line + "\n");
             }
             is.close();
             result[1]= sb.toString();
             return result;
        }catch (Exception e) {
            result[0]= e.toString();
            return result;
        }
    }else 
         return result;
} 
```

其中 List 是数组，其中包含您要像这样发送的项目

```
 List<NameValuePair> params = new ArrayList<NameValuePair>();
         params.add(new BasicNameValuePair("Name",name1));
         params.add(new BasicNameValuePair("Email",email1));

              HttpRequests myHttpRequests=new HttpRequests();
         String[] responce= myHttpRequests.makeHttpRequest(SignUpURL,
                "POST", params); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-08T04:21:26.527

对于应用程序和服务器之间的连接，您需要创建 api 类，

```
public class PostParseGet {

public Context mActivity;
public boolean isNetError = false;
public boolean isConnectionTimeError = false;
public boolean isOtherError = false;
public boolean isDataError = false;
Object mFillObject;
//    List<PropertyInfo> mPropertyInfo;
//
//  CommonHelper mCommonHelper;
//
//    SoapObject mSoapObjectRequest;

HashMap<String, String> mHashMap;

Gson mGson;

public PostParseGet(Context context) {
    mActivity = context;
    mGson = new Gson();
    //      mCommonHelper= new CommonHelper(mActivity);
}

public boolean check_Internet(Context mContext){
    ConnectivityManager mConnectivityManager;
    NetworkInfo mNetworkInfo;
    mConnectivityManager= (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
    mNetworkInfo = mConnectivityManager.getActiveNetworkInfo();

    if(mNetworkInfo != null && mNetworkInfo.isConnectedOrConnecting())
        return true;
    else
        return false;
}

public static boolean isInternetOncheck(Context context) {
    ConnectivityManager connec = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    if (!(connec.getActiveNetworkInfo() != null && connec.getActiveNetworkInfo().isAvailable() && connec.getActiveNetworkInfo().isConnected())) {
        //            AppLog.logString(TAG+"Internet not avialable");
        return false;
    } else {
        //            AppLog.logString(TAG+"Internet available");
        return true;
    }
}

public Object httpPostData(String method,Object mObject,List<NameValuePair> postParameters,String json,String AddArrayName){
    BufferedReader in = null;

    isOtherError = false;
    isConnectionTimeError = false;

    mFillObject= null;

    if(check_Internet(mActivity)){
        isNetError = false;
        isDataError=false;
        try {
            mFillObject = mObject.getClass().newInstance();

            HttpParams httpParameters = new BasicHttpParams();
            // Set the timeout in milliseconds until a connection is established.
            int timeoutConnection = 30*1000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            // Set the default socket timeout (SO_TIMEOUT) 
            // in milliseconds which is the timeout for waiting for data.
            int timeoutSocket = 30*1000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

            HttpClient client = new DefaultHttpClient(httpParameters);
            //                String url = TagValues.SCU_URL+method;
            String url = method;
            HttpPost request = new HttpPost(url);
            System.out.println("-----url "+url);
            if(json!=null && !json.equalsIgnoreCase("")){ 
                StringEntity params =new StringEntity(json.toString(), "UTF-8");
                params.setContentType("application/json");
                request.setEntity(params);
                System.out.println("-----parameters "+json);
            }else{
                UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
                request.setEntity(formEntity);
                System.out.println("-----parameters "+postParameters.toString());
            }
            HttpResponse response = client.execute(request);

            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
            //                in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            String result="";

            try {
                while ((line = in.readLine()) != null) {
                    sb.append(line + NL);
                }
                result = sb.toString();

            }catch (IOException e) {
                e.printStackTrace();
            }finally {
                try {
                    in.close();
                }catch (IOException e) {
                    e.printStackTrace();
                }
            }

            if(result!=null)

                if(!AddArrayName.equalsIgnoreCase("")){
                    result = "{"+AddArrayName+":"+result+"}";

                }
            //                    Log.i("Appname", "Response: \n" + result);
            System.out.println("------- Final data: "+result);

            mFillObject = mGson.fromJson(result, mFillObject.getClass());

        }catch (Exception e) {
            e.printStackTrace();
            isOtherError = true;
        }
    }else{
        isNetError = true;            
    }
    return mFillObject;
}
} 
```

创建解析器类后，您需要为后台进程创建异步任务，以便从 Web 服务器推送和获取数据，如下所示，

```
public class ThreadAsyncTask extends AsyncTask<String, Void, Object> {
private String TAG = "Async: ";
private Dialog mAlert_Dialog;
private String method;
private Context con;
private String json;
private Object mObject;
private OnTaskCompleted listener;
private PostParseGet mPostParseGet;
List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
private String AddArrayname;

public interface OnTaskCompleted{
    void onTaskCompleted(String method, Object result);
}

public ThreadAsyncTask(){

}

/**
 * 
 * @param listener
 * @param con
 * @param json
 * @param method
 */
public ThreadAsyncTask(OnTaskCompleted listener,Context con,Object object, String json, String method,List<NameValuePair> postParameters,String AddArrayName) {
    // TODO Auto-generated constructor stub
    this.listener = listener;
    this.con = con;
    this.json = json;
    this.method = method;
    this.mObject = object;
    this.postParameters = postParameters;
    this.AddArrayname = AddArrayName;
}

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
    mAlert_Dialog = new Dialog(con);
    mAlert_Dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    mAlert_Dialog.setContentView(R.layout.dailog_progressbar);
    mAlert_Dialog.setCancelable(false);
    mAlert_Dialog.show();
}

@Override
protected Object doInBackground(String... urls) {
//        Parcelable mParcelable;
    for (String url : urls) {
        if (isCancelled()) {
            break;
        }

        mPostParseGet = new PostParseGet(con);
        mObject = mPostParseGet.httpPostData(method,mObject,postParameters,json,AddArrayname);

//            Utility ul=new Utility();
//            result = (ul.setDataFromWebServiceSOAP(con,method, json));
    }
    return mObject;
}

@Override
protected void onPostExecute(Object result) {
    mAlert_Dialog.dismiss();
    if (listener != null)
        listener.onTaskCompleted(method,result);
}
} 
```

最后你需要在你的活动类中定义并启动网络服务......

```
mTextViewLogin.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
//                        postParameters.add(new     BasicNameValuePair("username",mEditTextUsername.getText().toString()));
//                        postParameters.add(new     BasicNameValuePair("password",mEditTextPassword.getText().toString()));

                    JSONObject jsonObject = new JSONObject();
                    try {
                        jsonObject.put("username", mEditTextUsername.getText().toString());
                        jsonObject.put("password", mEditTextPassword.getText().toString());
                    }catch (JSONException e1) {
                        e1.printStackTrace();
                    }

                    if(PostParseGet.isInternetOncheck(LoginActivity.this)){
                        GetCommentList(TagValues.LOGIN_URL,jsonObject.toString(),postParameters);
                    }else{
                        CustomeDialog.dispDialog(LoginActivity.this, "Internet not available");
                    }

}
        });
public void GetCommentList(String methodName,String json,List<NameValuePair> postParameters){
    try {

        mParcelableClass= new ParcelableClass();
        ThreadAsyncTask testImple=new ThreadAsyncTask(listener, LoginActivity.this,mParcelableClass,json,methodName,postParameters,"");
        testImple.execute("");

    }catch (NullPointerException e) {}
}

private OnTaskCompleted listener = new OnTaskCompleted(){
    @Override
    public void onTaskCompleted(String methodName,Object result){

        if(result!=null){

            mParcelableClass= (ParcelableClass)result;
            if(mParcelableClass!=null && mParcelableClass.getStatus()!=null && mParcelableClass.getStatus().equalsIgnoreCase("success")){
                try {

                    Intent mIntent = new Intent(LoginActivity.this,YourSecondActivity.class);
                    startActivity(mIntent);
                    overridePendingTransition(R.anim.right_left, R.anim.right_left2);

                }catch (NullPointerException e){
                    e.printStackTrace();
                    dispDialog(LoginActivity.this, "Invalid responce\n"+ e.toString());
                    return;
                }catch (Exception e) {
                    e.printStackTrace();
                    dispDialog(LoginActivity.this, "Invalid responce\n"+ e.toString());
                    return;
                }
            }else{
                dispDialog(LoginActivity.this, "Invalid Credential");
            }
        }
    }

}; 
```

进度对话框 xml 看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/backrepeat"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_margin="@dimen/margin_5"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="@dimen/margin_10" >

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:indeterminate="true" />

    <TextView
        android:id="@+id/txtMessage_progressBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="@dimen/margin_10"
        android:gravity="center"
        android:padding="@dimen/margin_10"
        android:text="Please wait..."
        android:textColor="@color/textColor"
        android:textSize="@dimen/textsize_10sp"
        android:textStyle="bold" />
</LinearLayout> 
```

警报对话框创建者

```
 public static void dispDialog(Activity ac,String dialogMsg){
    final Activity activity=ac;
    final Dialog Alert_Dialog = new Dialog(ac);
    Alert_Dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    Alert_Dialog.setContentView(R.layout.dailog_error);
    ((TextView)Alert_Dialog.findViewById(R.id.txtMessage)).setText(""+dialogMsg);

    Alert_Dialog.setCancelable(false);
    Alert_Dialog.show();
    ((Button) Alert_Dialog.findViewById(R.id.ok)).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Alert_Dialog.cancel();
            activity.finish();
            activity.overridePendingTransition(R.anim.left_right, R.anim.left_right2);
        }
    }); 
```

parcelabel 类也定义为

```
public class ParcelabelClass implements Parcelable{

private List<GradeDataList> GradeList;

public List<GradeDataList> getGradeList() {
    return GradeList;
}

public void setGradeList(List<GradeDataList> listData) {
    GradeList = listData;
}

public GradeList(){
    GradeList = new ArrayList<GradeDataList>();
    //        AutoCompleteIdName = new ArrayList<VoucherDataList>();
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel arg0, int arg1) {
    arg0.writeTypedList(GradeList);
    //        arg0.writeTypedList(AutoCompleteIdName);

}

public static Parcelable.Creator<GradeList> CREATOR= new Creator<GradeList>() {

    @Override
    public GradeList[] newArray(final int size) {
        return new GradeList[size];
    }

    @Override
    public GradeList createFromParcel(final Parcel source) {
        return new GradeList(source);
    }
};

public GradeList(final Parcel in){
    in.readTypedList(GradeList, GradeDataList.CREATOR);
}

public static class GradeDataList implements Parcelable{

    private String id = "";

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public GradeDataList(){
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(id);
    }
    public static Parcelable.Creator<GradeDataList> CREATOR = new Creator<GradeDataList>() {

        @Override
        public GradeDataList[] newArray(final int size) {
            return new GradeDataList[size];
        }

        @Override
        public GradeDataList createFromParcel(final Parcel source) {
            return new GradeDataList(source);
        }
    };

    public GradeDataList(final Parcel in){
        id= in.readString();

    }

}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:53:09.043

您可以使用普通的 httpclient 或 httpurlconnection

但最好使用 asynckhttp，这是解析 json 数据的最佳选择

你也可以使用一些像jakson(http://jackson.codehaus.org/)这样更快的api

比正常解析

# android - EclipselinkedResources 到 android 资产子目录有时不起作用

> ID：12295106
> 
> 赞同：2
> 
> 时间：2012-09-06T07:36:08.853
> 
> 标签：android, eclipse, resources, assets

我们有一个用 Java 编写的 android 项目，并使用带有 ADT 插件的标准 Eclipse。我们使用 android 资产，出于某种原因，我们必须在另一个位置有一个资产子目录（不是所有资产）。标准文件系统软链接对我们来说不是很好的解决方案，因为它不是 git+linux - git+windows 可移植的（我们的一些开发人员使用 linux 和一些 windows）。所以我们尝试在 .project 文件中使用 eclipse 链接

```
<linkedResources>
  <link>
    <name>assets/defaults</name>
    <type>2</type>
    <locationURI>$%7BPARENT-2-PROJECT_LOC%7D/somedir/somesubdir</locationURI>
  </link>
</linkedResources> 
```

这看起来就像我们在 Eclipse 中浏览资产时一样。问题是当我们运行项目时，有时会找到链接目录中的资产，有时找不到（FileNotFoundException）。看起来 ADT 有时会忽略链接目录，有时不会。（2天前它没有工作，昨天有，今天没有......）这可能是ADT中的一个谷歌错误。似乎资产根目录的链接始终有效，资产子目录的链接有时才有效。有什么解决办法吗？谢谢。

# apache - 将子域重定向到另一个但不更改地址栏

> ID：12295109
> 
> 赞同：0
> 
> 时间：2012-09-06T07:36:24.680
> 
> 标签：apache, .htaccess, cpanel

我想重定向`subdomain1.domain.com`到`subdomain2.domain.com`但不更改地址栏中的地址。

这可以通过 .htaccess 实现吗？如果不是，那将是什么替代解决方案（我使用的是 cPanel）？

我不想使用代理（[P]）！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:46:17.043

除非这 2 个子域共享一个文档根目录（或者一个位于另一个的子目录中），否则如果没有任何类型的代理、`[P]`在 htaccess 中使用或使用设置反向代理`ProxyPass`（请注意，两者都使用mod_proxy）。没有替代解决方案是严格的 apache。您可以编写一个脚本来加载另一个子域的页面并将其停放在第一个子域上，但这也是代理，您最好只使用 mod_proxy 或它的一个扩展（如 mod_proxy_html），它处理内部 url 重写重定向位置和 cookie。非 apache 解决方案的一个示例是将一个子域的文档根目录安装到另一个子域并使用 mod_rewrite。

# apache - 如何使用 htaccess 重定向到子目录但不在 url 中显示文件夹（drupal 7）

> ID：12295110
> 
> 赞同：1
> 
> 时间：2012-09-06T07:36:27.287
> 
> 标签：apache, .htaccess, drupal, drupal-7

（有非常相似的问题，但没有一个解决它）

1.  我的域是 www.abc.com，它会自动映射到 /public_html（由我的主机制作，我无法在管理面板中更改）
2.  我的 cms drupal7.15 在文件夹 public_html/foo/drupal715/

大问题： **为什么：当我打开 www.abc.com 时，网址看起来 www.abc.com/foo/drupal715/index.php** 它应该是一样的！但是我用 drupal 创建的其他链接或页面正在运行，例如 www.abc.com/myproject

看我的配置

我在根目录（public_html）中有第一个 .htaccess，它看起来像：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.abc.com$ [OR]
RewriteCond %{HTTP_HOST} ^abc.ch$ [OR]
RewriteRule ^(.*)$ /foo/drupal715/$1 [PT,L,QSA] 
```

这重定向到我的子目录有效，但为什么当我打开我的主 url 时 url 显示文件夹？

任何帮助，请！我厌倦了尝试。

这里是 drupal root 中 htaccess 的有趣部分。

```
 # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line
  #RewriteBase /foo/drupal715
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  RewriteBase /

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} ^/foo/drupal715/(.*)$
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA,B]
  #RewriteRule ^ index.php [L] 
```

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T07:55:18.880

mod_rewrite 的工作方式在文档中进行了解释，并且在这里也进行了多次讨论。
它在服务器上工作，它不会**（**除非您专门制定规则来执行此操作）将任何更改的 url 返回给客户端。这就是允许您创建和使用“用户友好的 url”的原因。如果您的站点从一个页面/文件夹重定向到另一个页面/文件夹，我建议您开始查看实际请求的内容以及它的实际作用。例如 - 看看你的 index.php，**它**有什么作用？

# xcode - Xcode 使用大内存，吃掉 ram 中的所有内存

> ID：12295113
> 
> 赞同：23
> 
> 时间：2012-09-06T07:36:31.497
> 
> 标签：xcode, macos

我在我的 Mac 上使用 Xcode，它有 8GB 内存。当我打开 Xcode 并且不打开任何项目并等待大约 2 分钟时，Xcode 会吃掉 ram 中的所有内存，（4GB，5GB ...）

谁能告诉我为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T07:41:10.837

我也研究这个问题有一段时间了。我认为一种解决方案（我需要感谢用户[justin](https://stackoverflow.com/users/191596/justin)）是为 Xcode 设置几个配置值。当然应该在退出 Xcode 后完成。

在终端中执行以下命令：

```
defaults write com.apple.dt.XCode IDEBuildOperationMaxNumberOfConcurrentCompileTasks 4

defaults write com.apple.dt.XCode IDEIndexDisable 1 
```

这将阻止索引并减少编译任务的数量。这让我的 Xcode 可以留出一些 RAM 来实际做一些工作。

删除这些设置，例如索引：

```
defaults delete com.apple.dt.XCode IDEIndexDisable 
```

如前所述，这已在[此问题](https://stackoverflow.com/questions/7926491/mac-os-x-lion-10-7-2-xcode-4-2-memory-issues)中进行了讨论。

此外，清理 Xcode 缓存可以降低消耗 RAM 的速度。（在 ~/Library/Developer/Xcode/DerivedData - 它在您的主目录中，而且它可能是隐藏的，因此更容易使用终端访问）。

编辑/更新：

显然，这有助于解决内存问题（尽管仍需要定期重新启动 Xcode）。但是，您正在失去一些不错的东西：即时错误检查，控制拖放 IBOutlet 添加到控制器标题（需要以旧方式进行 - 输入然后连接），可能还有一些其他有用的功能附带索引。所以要注意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:58:24.420

我很惊讶我没有在这里阅读真正的答案/问题，尽管没有解决方案。我看到您提到您甚至不必打开项目，但通常在使用情节提要时会出现问题。我已经确认了这一点，向 Apple 发送了示例，提交了错误报告，等待新版本，还没有。在编辑故事板视图时，某处存在泄漏。如果您正在编辑原始代码，您将永远不会看到内存使用量增加，但是当您开始编辑具有多个视图的情节提要时，就会出现问题。我目前运行 24GB 的内存，在故事板中编辑视图时可以在不到一个小时的时间内使用它。就像其他人提到的那样，唯一的解决方案是重新启动 Xcode。仅仅关闭项目是不够的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T19:32:59.253

[在这里](http://osxdaily.com/2012/04/24/free-up-inactive-memory-in-mac-os-x-with-purge-command/)找到了一个临时解决方案

每隔一段时间运行一次该命令，它对我的​​ 8GB 有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-09T09:13:58.377

我遇到了同样的问题，但与 Interface Builder 和 Storyboard 访问相关。

经过一番思考，很明显，在我的项目中的 Storyboard 文件放大到一定数量（目前磁盘上大约 1.5MB）后，XCode 和 IB 出现了问题。

在更改某些（例如 IBLabel）对象中的文本时，每个字母大约需要 0.5 秒，而更改 6 个字符的单词需要 3 秒。这让我很慢。

XCode 重启帮助并释放所有占用的内存......直到下一个工作会话。

我有强烈的印象，IB 在每次更改（例如更改单个字母）后都会创建撤消缓冲区，因为在每次更改后，内存占用量会增加约 20 MB（可能 RAM 中的故事板大小，磁盘上为 1.5 MB）。

并且在 XCode 重启后，undo 缓冲区已经消失，并且相应地释放了一些内存。

我想知道一种限制撤消缓冲区大小的方法，并用较小的大小对其进行测试。

配置为：Mac Mini、4 GB RAM、OS X 10.8.3、XCode 4.6、XCode 4.6.1、XCode 4.6.2

我目前回到 XCode 4.5，情况似乎好一点，但问题仍然存在。我想这个版本的功能比 4.6 少，并且根据这种差异，它使用的内存更少。

好的，看起来 XCode 4.5 实际上可以释放 Interface Builder 分配的一些内存。

2013 年 5 月 21 日更新：我从 4GB 升级到 Mac Mini 2011 8GB RAM，但尚未发现问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T12:22:54.490

XCode 是一个真正的内存怪物，如果您尝试使用其中一种“工具”，它会吃得更多。根据任务，有些人没有那么多问题，特别是如果他们有更多的记忆。

就我个人而言，我从 2GB 开始，而 XCode 只是......很痛苦

升级到 8GB 后，我只需要时不时地重新启动

听说有 16GB 的人不会抱怨那么多，每天只需要重启一两次 XCode。

对我来说，你在 2 分钟后使用了所有的记忆，这看起来很奇怪。我可能猜想您的某些设置使所有 XCode 泄漏变得更糟。您是否尝试过删除所有 ~/Library/Developer 文件夹和设置文件？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T07:40:46.420

这个问题没有真正的解决方法。

在很多网站上都有讨论。帮助我解决这个问题的唯一解决方案是现在重新启动 XCode。我认为这个问题不会有真正的解决方案。

# git - 为什么我无法推送到 git repo？

> ID：12295115
> 
> 赞同：0
> 
> 时间：2012-09-06T07:36:39.150
> 
> 标签：git, version-control, google-code

> **可能重复：**
> [致命：远程错误：找不到存储库 octocat/myapp](https://stackoverflow.com/questions/7611670/fatal-remote-error-could-not-find-repository-octocat-myapp)

```
https://code.google.com/p/prjname/ is a empty repo right now 
```

**我可以克隆它，但不能将本地仓库推送到它，为什么？**

```
[mirror@home php]$ git clone https://code.google.com/p/prjname/
Cloning into 'prjname'...
warning: You appear to have cloned an empty repository.
[mirror@home php]$ rm prjname/ -rf 
```

**混帐初始化**

**重新初始化 /home/mirror/tmp/php/.git/ 中的现有 Git 存储库**

```
[mirror@home php]$ git remote -v
[mirror@home php]$ git remote add origin https://code.google.com/p/prjname/
[mirror@home php]$ git push origin
fatal: remote error: Repository not found
[mirror@home php]$ git push -u origin
fatal: remote error: Repository not found
[mirror@home php]$ https://code.google.com/p/prjname/

[mirror@home php]$ ls
conf.inc.php  demo  docs  lang  lib  logs  prjname  sdk.class.php  services  util 
```

**推送失败，但是这个 repo 存在，虽然它是空的......**

```
[mirror@home php]$ git push origin
fatal: remote error: Repository not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:52:03.120

试试这个：

```
cd prjname
git push origin 
```

# iphone - Sqlite 数据库无法在设备上运行

> ID：12295117
> 
> 赞同：0
> 
> 时间：2012-09-06T07:36:40.457
> 
> 标签：iphone, objective-c, ios

我创建了一个使用 sqlite 数据库的应用程序。第一次我在模拟器上对其进行了测试。它在模拟器上运行良好，它显示了文档目录的路径：

```
Library/Application support/iPhone simulator/5.1/Application/UUID/document/database.sqlite 
```

当我将它放入设备时，它显示以下路径：

```
/var/mobile/Applications/60534394-66B0-4A83-BAFE-5F48FBD17FF6/Documents/database.sqlite 
```

它显示警告：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Error while inserting data. 'no such table: tableName' 
```

克服这个问题的方法是什么？我应该将数据库文件复制到我的应用程序目录中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:09:32.957

您可以使用以下代码：

```
- (void)SaveAction {

NSString * databasefile = [[NSBundle mainBundle] pathForResource:@\"SavedPapers\" ofType:@\"db\"];

sqlite3 *database = NULL;

// Open the database and return a database identifier variable
if (sqlite3_open([databasefile UTF8String], &database) == SQLITE_OK) {
// Create and prepare template insert statements (one for each field we want to save)
const char * SaveCommand = \"insert into papers values(?, ?, ?, ?)\";

if ( sqlite3_prepare_v2(database, SaveCommand, -1, &SaveCommand_stmt, NULL) != SQLITE_OK) {
NSAssert1(0, @\"Error while creating save statement. '%s'\", sqlite3_errmsg(database));
}
// Insert the data into the save statement
sqlite3_bind_text(SaveCommand_stmt,1,[currentTitle UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(SaveCommand_stmt,2,[currentAuthor UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(SaveCommand_stmt,3,[currentSummary UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_text(SaveCommand_stmt,4,[currentLink UTF8String], -1, SQLITE_TRANSIENT);

// Execute the SQLITE command
if (SQLITE_DONE != sqlite3_step(SaveCommand_stmt)) {
NSAssert1(0, @\"Error while saving data. '%s'\", sqlite3_errmsg(database));
UIAlertView * errorAlert = [[UIAlertView alloc] initWithTitle:@\"Save\" message:@\"Error saving  paper to database... :(\" delegate:self cancelButtonTitle:@\"OK\" otherButtonTitles:nil];
[errorAlert show];
[errorAlert release];
} else {
UIAlertView * GoodAlert = [[UIAlertView alloc] initWithTitle:nil message:@\"Paper Saved!\" delegate:self cancelButtonTitle:@\"OK\" otherButtonTitles:nil];
[GoodAlert show];
[GoodAlert release];
}
// Reset the command contents and close the database
sqlite3_reset(SaveCommand_stmt);
sqlite3_close(database);
} 
```

我认为希望是有用的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-06T07:39:49.703

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“插入数据时出错。'没有这样的表：tableName'

使用有效的表名。

似乎您已经使用要插入数据的表进行了数据库操作，但引用数据库已旧。您需要做的是从 XCode 中选择您的 DB，`press DELETE Key`然后选择`Remove Reference`，**现在再次添加您的 DB**，同时**从模拟器中****清除（删除）`App`**。然后再跑！

这可能会解决您的问题。

# jar - MyEclipse中如何配置adf Rich Faces 11.1.2.2.0版本

> ID：12295118
> 
> 赞同：0
> 
> 时间：2012-09-06T07:36:45.983
> 
> 标签：jar, configuration, oracle-adf, web.xml, myeclipse

我无法在 MyEClipse IDE 中配置富含 adf 的面孔。如何在项目中配置 jars、web.xml、配置文件的 adf-rich 面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:46:26.313

您可以将 OEPE 插件安装到现有的 Eclipse 安装中。[在此处](http://www.oracle.com/technetwork/developer-tools/eclipse/downloads/index.html)查看信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T21:34:20.257

如何安装 OEPE aka Oracle Enterprise Pack for Eclipse[基于 Eclipse 的企业应用程序开发](http://www.oracle.com/technetwork/developer-tools/eclipse/overview/index.html) 做一个示例并查看生成的配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T21:29:46.197

取决于您要达到的目标。如果您只想将 ADF Faces 库包含在您的项目中，那么最简单的方法可能是下载 ADF Faces 组件演示并在 MyEclipse 中打开 WAR。 [http://content.oracle.com/technetwork/developer-tools/adf/download/index.html](http://content.oracle.com/technetwork/developer-tools/adf/download/index.html)

如果您还想要 ADF Faces 的可视化开发功能，您可以尝试将 OEPE 插件安装到您的 myEclipse 中。请参阅本页末尾的存储库：[Oracle Enterprise Pack for Eclipse (12.1.1.2.1)](http://www.oracle.com/technetwork/developer-tools/eclipse/downloads/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:36:08.297

为什么不尝试使用 jdeveloper IDE 开发基于 adf 的项目？

[甲骨文 JDeveloper](http://www.oracle.com/technetwork/developer-tools/jdev/overview/index.html)

或者您可以查看以下链接，了解如何使用 adf comp 配置 eclipse

# db2 - DB2 Access 计划图说明

> ID：12295121
> 
> 赞同：1
> 
> 时间：2012-09-06T07:36:50.867
> 
> 标签：db2, db2-luw

**我已经使用db2exfmt**实用程序为查询生成了访问计划，但我无法理解。

请谁能解释一下访问计划（例如括号中的数字是什么意思，/-----+-----\ 等）

```
 Access Plan:
    -----------
    Total Cost:    15.1619
    Query Degree:  1

          Rows 
         RETURN
         (   1)
          Cost 
           I/O 
            |
            3 
         HSJOIN
         (   2)
         15.1619 
            2 
     /-----+------\
    4                3 
 TBSCAN           TBSCAN
 (   3)           (   4)
 7.58097          7.58036 
    1                1 
    |                |
    4                3 
 TABLE: DB2INST1  TABLE: DB2INST1
  TABA             TABB
   Q2               Q1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T18:39:53.340

从下往上读。每个节点都是为满足查询而完成的操作。TBSCAN 意味着扫描整个表（当您的表很小时通常会发生这种情况）。HSJOIN 是一种“哈希连接”——使用哈希图连接内存中两个表的行。

我们来看一个节点

```
 4
       TBSCAN
       (   3)
       7.58097
          1
          |
          4
   TABLE: DB2INST1.TABA 
```

顶部的“4”是返回的行数下一行“TBSCAN”是使用的算法（TBSCAN 表示表扫描。HSJOIN 表示通过 hashmap 连接）。在 DB2 中，这称为“运算符”。“(3)”是序列号。你可以发现这个查询被分解为 4 个步骤。7.58097 是执行这个查询到这一步的累积成本，在称为“timerons”的东西中。它会根据您的数据库配置方式进行调整，优化器将选择一个访问计划来最小化此成本。底部 4 是操作在 I/O 方面的成本。

db2exfmt 中还有很多您已经省略的信息。但是该图告诉您 DB2 将如何执行查询。

# jquery - html标签在jquery的div中？

> ID：12295127
> 
> 赞同：1
> 
> 时间：2012-09-06T07:37:18.837
> 
> 标签：jquery

我需要在 div 中获取 HTML 标签

```
<div class="div1">
   <a>etc</a>
   <p>etc</p>
</div> 
```

如何`div1`在jQuery中获取html内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:44:10.163

试试这个

***HTML***

```
<div class="div1">
   <a>etc</a>
   <p>etc</p>
</div> 
```

***JS代码***

```
$('.div1').children().text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:38:21.890

用来`$("div1").html('<h1>this is html!</h1>');`设置。

用来`$("#div1").html();`得到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:38:46.927

如果您只需要原始内容，请使用：

```
var contents = $(".div1").html() 
```

例如，在您拥有[的文档](http://docs.jquery.com/Html)中：

```
$("p").click(function () {
  var htmlStr = $(this).html();
  $(this).text(htmlStr);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:39:10.810

一种方法是使用该[`.html()`](http://api.jquery.com/html/)方法。如果你不向它传递任何内容，它就会作为一个 getter 工作。

```
var content = $(".div1").html(); 
```

该`content`变量将包含 HTML 作为 JavaScript 字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T07:39:29.160

使用此警报 html 内容

```
alert($(".div1").html()); 
```

使用这个初始化

```
 var $a=$(".div1").html(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T07:39:41.607

```
var htmlContent = $(".div1").html(); 
```

如果您只想要标签名称，请尝试使用以下代码：

```
alert($('.div1').children()[0].tagName); 
```

上面的代码以 BLOCK 字母返回标签名称。如“A”、“P”等。更改索引号然后打印。

这是工作示例： [单击此处](http://jsfiddle.net/Cb3ey/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T07:40:21.187

您可以像这样向元素添加 id 属性吗：

```
<a id="a1"></a> 
```

这样你就可以这样访问它：

```
$("#a1") 
```

除非您只是要处理内容，否则请按照其他答案中的建议使用 .html 。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T07:58:29.913

这给了你标签：

```
$('.div1').children().each(function(i, item) {
    alert(this.nodeName.toLowerCase());
}); 
```

在这里试试：http: [//jsfiddle.net/bCM7L/](http://jsfiddle.net/bCM7L/)

# ruby-on-rails - 在 object.find(:all, :conditions) 中返回数组时未定义的方法

> ID：12295135
> 
> 赞同：0
> 
> 时间：2012-09-06T07:37:40.017
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-2

我正在使用：

`rails 2.3.9 ruby 1.9.3 windows 7 ultimate rubygems 1.8.24`

这有效：

```
@inventories = Inventory.find :first, :conditions => {:siteId => params[:siteId]} 
```

这不

```
@inventories = Inventory.find :all, :conditions => {:siteId => params[:siteId]} 
```

错误信息：

```
NoMethodError (undefined method `siteId' for #Array:0x49738f8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:53:10.917

对于 rails 2.x，您的语法略有错误如果您想查找具有特定条件的所有记录，请尝试使用多个条件的示例

```
@inventories = Inventory.find(:all, :conditions => ["siteId=? and priority=?", params[:siteId], 3]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:17:21.343

当你写

```
@inventories = Inventory.find :first, :conditions => {:siteId => params[:siteId]} 
```

上一行`Inventory`根据与给定条件匹配的默认顺序为您提供了一个（第一个）对象，因此您可以使用`@inventories.siteId`. 但是，当没有行与给定条件匹配时，它将返回 nil，在这种情况下，如果您尝试使用 `@inventories.siteId`它将`undefined method`为 nil 抛出错误 siteId'

但是当你写

```
@inventories = Inventory.find :all, :conditions => {:siteId => params[:siteId]} 
```

`Inventory`如果您的查询返回 1 个或超过 1 个对象，即行和空白数组，即`[]`如果现在行满足条件，则上面的行为您提供了一个无关紧要的对象数组。因此，当您尝试使用 时`@inventories.siteId`，您实际上是在 Array 上而不是在对象上应用 siteId，`Inventory`它会为 #Array` 引发错误`undefined method`siteId'。但是以下将正常工作

```
@inventories.each{|p| puts "#{p.siteId}"} 
```

# ruby-on-rails - Ruby omniauth-oauth2 - Errno::ENETUNREACH - 网络无法访问 - 连接 (2)

> ID：12295136
> 
> 赞同：8
> 
> 时间：2012-09-06T07:37:42.330
> 
> 标签：ruby-on-rails, ruby, facebook

当用户尝试使用 facebook 登录时，我的 Rails 应用程序有时（大约 2 周）在回调方法期间崩溃。

这是随机发生的，我找不到解决此问题的方法。

在错误和一段堆栈跟踪下方：

一个 Errno::ENETUNREACH 发生在 #: Network is unreachable - connect(2)

*   请求方法：获取
*   REQUEST_PATH : /auth/facebook/callback
*   REQUEST_URI : /auth/facebook/callback?code=AQDoUnHaO4ShfZUtCw6TVHAd_oOWUQ7Lar-OunhlFHoWhpTmiliY8hWTEb0CmufEMABpUggIlAe15jx8BOxTmVXmHb3JvVlePEfECpkVhf82UWdoHK8jCYN00KM5RYUkbx6M5SHjusb2xWFeHnE92-nfvbpw2KSARqR5njgJqbV_hkJYb42SiuvNXKOTU6hYY_g

------------------------------------------- 回溯：

```
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `initialize'
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `open'
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `connect'
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:744:in `start'
/home/finetuning/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1284:in `request'
法拉第 (0.7.6) lib/faraday/adapter/net_http.rb:61:in `call'
faraday (0.7.6) lib/faraday/request/url_encoded.rb:14:in `call'
法拉第 (0.7.6) lib/faraday/connection.rb:210:in `run_request'
oauth2 (0.5.2) lib/oauth2/client.rb:88:in `request'
oauth2 (0.5.2) lib/oauth2/client.rb:128:in `get_token'
oauth2 (0.5.2) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
omn​​iauth-oauth2 (1.0.0) lib/omniauth/strategies/oauth2.rb:77:in `build_access_token'
omn​​iauth-facebook (1.2.0) lib/omniauth/strategies/facebook.rb:63:in `block in build_access_token'
omn​​iauth-facebook (1.2.0) lib/omniauth/strategies/facebook.rb:110:in `with_authorization_code'
omn​​iauth-facebook (1.2.0) lib/omniauth/strategies/facebook.rb:63:in `build_access_token'
omn​​iauth-oauth2 (1.0.0) lib/omniauth/strategies/oauth2.rb:61:in `callback_phase'

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:59:14.133

这听起来像是需要向我重新请求访问令牌，但这是一个不可知的猜测。

在我开始工作之前，有很多事情阻止了回调为我工作：

*   互联网连接一起停止
*   配置/路由中没有路由
*   糟糕的 JavaScript
*   facebook 应用程序上的回调 url 不匹配
*   oauth 的过时版本..等..

请随时仔细检查您对我的工作所做的工作，看看它是否有帮助：

[http://www.ajostrow.me/thoughts/client-side-facebook-authentication-with-rails](http://www.ajostrow.me/thoughts/client-side-facebook-authentication-with-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T10:11:38.043

问题是否以任何方式解决？我也在面对。

其他讨论： [https ://github.com/mkdynamic/omniauth-facebook/issues/80](https://github.com/mkdynamic/omniauth-facebook/issues/80)

顺便说一句，您检查过开放端口吗？

# javascript - 通过 html5/websocket 通过 wifi 传输文件

> ID：12295143
> 
> 赞同：0
> 
> 时间：2012-09-06T07:38:23.563
> 
> 标签：javascript, html

我希望在两台电脑之间传输文件，有很多工具，但我更喜欢使用html5/socket通过wifi传输文件。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:44:38.787

我怀疑不使用任何服务器端技术（如 PHP 或本机应用程序）是可能的。您可以将带有一些标头信息的数据传递给服务器，服务器随后将您的数据重定向到另一个设备/电脑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:37:06.063

它仍然在 RFC 之下，但它是一个很好的解决方案，可以直接对等发送文件而无需服务器交互。那就是 HTML5 数据通道 API。

这里有一些有用的参考资料。

[http://dev.w3.org/2011/webrtc/editor/webrtc.html#rtcdatachannel](http://dev.w3.org/2011/webrtc/editor/webrtc.html#rtcdatachannel)

[http://www.webrtc.org/faq-recent-topics](http://www.webrtc.org/faq-recent-topics)

[http://updates.html5rocks.com/2012/12/WebRTC-hits-Firefox-Android-and-iOS](http://updates.html5rocks.com/2012/12/WebRTC-hits-Firefox-Android-and-iOS)

演示

[https://webrtc-demos.appspot.com/html/dc1.html](https://webrtc-demos.appspot.com/html/dc1.html)

[http://mozilla.github.com/webrtc-landing/data_test.html](http://mozilla.github.com/webrtc-landing/data_test.html)

# asp.net-mvc-3 - asp.net mvc3中复选框列表的自定义验证属性

> ID：12295148
> 
> 赞同：0
> 
> 时间：2012-09-06T07:38:53.187
> 
> 标签：asp.net-mvc-3, jquery-validate

我有一个要求，即在表单中显示任意复选框列表，并且我必须确保在提交表单时选中至少 1 个复选框。我不知道该怎么做。有人可以用一个例子解释一下吗？我也需要客户端验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:01:51.980

这是一个可以帮助您的链接，[必须“选中”复选框——使用不显眼的 jQuery 验证和 ASP.NET MVC 3](http://itmeze.com/2010/12/06/checkbox-has-to-be-checked-with-unobtrusive-jquery-validation-and-asp-net-mvc-3/)

您需要创建一个自定义验证，这里是一个必须选中的单个复选框的示例验证器：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = false)]
public class MustBeTrueAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        return value != null && value is bool && (bool)value;
    }
} 
```

然后将此属性添加到模型中的复选框，就像添加`[Required]`属性一样：

```
[MustBeTrue(ErrorMessage = "Please accept terms and conditions before continuing")]
public bool AcceptTerms { get; set; } 
```

# c# - 使用 gravatar 的随机图像是否合法/可以？

> ID：12295151
> 
> 赞同：0
> 
> 时间：2012-09-06T07:39:11.363
> 
> 标签：c#, asp.net, gravatar

我不想将 Gravatar 用于用户上传的图像，而只是用于通过 URL 生成的随机默认图像这样`http://www.gravatar.com/avatar/04d24379cd970b7670ee66fa203d646f?s=128&r=any&default=identicon&forcedefault=1`做合法吗？在他们的 TOS 中找不到任何内容。

我最初想为 ASP.NET 使用 Identicon 处理程序，但它充满了错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:47:03.220

您尝试使用的随机图像是使用**Identicon制作的**

为什么不获取生成它们的代码，并在您的服务器上制作本地图标，然后随意使用它们。

制作此图像的源代码：http: [//identicon.codeplex.com/](http://identicon.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:44:27.800

免责声明：我不是律师。

根据[https://en.gravatar.com/site/terms-of-service/](https://en.gravatar.com/site/terms-of-service/)：

> 第三方网站对服务的使用。第三方网站可以在 Automattic 明确授权的情况下在其各自网站上使用服务（例如，对 Gravatar 的 API 调用：http: [//en.gravatar.com/site/implement](http://en.gravatar.com/site/implement)); 前提是他们 (i) 不复制、存储或修改用户提交的内容；(ii) 不得分发、展示、执行、使用或以其他方式行使或利用任何用户提交的内容或其他用户信息，除非为适用用户执行服务所必需；(iii) 有有效的隐私政策并在该网站上发布，该政策符合所有适用的法律和法规，并通知该用户它将​​仅使用上述 (ii) 中规定的个人身份信息；(iv) 同意接受并遵守服务条款（“支持 Gravatar 的网站”）中规定的所有条款、条件和限制。

因此，假设您不声称它是您的，不存储它，不修改它并同意遵守其他条款和条件，您应该没问题。

# jquery - jQueryUI 在对话框中切换

> ID：12295153
> 
> 赞同：0
> 
> 时间：2012-09-06T07:39:23.797
> 
> 标签：jquery, user-interface, toggle, dialog

是否可以在对话框内添加切换窗口？对话框打开，单击链接内部将向下滑动表单。所以一个我有对话框

```
$('a.open_dialog').click(function() {
    $('<div />').appendTo('body').load($(this).attr('href')).dialog({
        title: $(this).attr('title'),
        modal: true,
        draggable: false,
        width: 800,
        position: 'top'            
    });
    return false;
}); 
```

我想在里面

```
$('a.mailer').click(function() {
    $('#contact-wrapper').show();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:02:38.753

对于动态内容，使用 jquery on()：

```
$('a.mailer').on('click',function() {
   $('#contact-wrapper').show();
}); 
```

# php - php string 如何在一串数字中找到一个数字

> ID：12295156
> 
> 赞同：-3
> 
> 时间：2012-09-06T07:39:38.517
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 检查一个单词是否包含在另一个字符串中？](https://stackoverflow.com/questions/1019169/how-can-i-check-if-a-word-is-contained-in-another-string-using-php)

我希望有一些 PHP 代码来检查某个数字是否出现在数字字符串中，例如，我如何检查数字 7 是否出现在数字 3275 中？

我已经尝试过 strcmp 但我无法解决这个问题:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:42:29.820

试试这个代码：

```
$pos = strrpos($mystring, "7");
if ($pos === false) { // note: three equal signs
    // not found...
}
else{
    //string found
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T07:42:00.897

看看[`strpos`](http://www.php.net/manual/en/function.strpos.php)；您可以使用它来查找子字符串在字符串中出现的位置（以及，通过扩展，它*是否*出现）。请参阅第一个示例以了解如何正确进行检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T07:43:06.560

[strpos()](http://php.net/manual/en/function.strpos.php)是您的朋友，php 不是强类型的，因此您可以将数字视为字符串。

```
$mystring = 3232327;
$findme   = 7;
$pos = strpos($mystring, $findme);

if ($pos === false) {
    echo "The number '$findme' was not found in the number '$mystring'";
} else {
    echo "The number '$findme' was found in the number '$mystring'";
    echo " and exists at position $pos";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T07:42:18.760

[http://us3.php.net/strpos](http://us3.php.net/strpos)

```
int strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) 
```

在 haystack 字符串中查找第一次出现 needle 的数字位置。

确保在比较返回值以查看它是否存在时使用“！== false”（否则 7325 将返回位置 0 和 0 == false） - === 和 !== 是比较值和类型（布尔值与整数)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T07:42:12.057

```
if(stristr('3275', '7') !== false)
{
  // found
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T07:48:35.830

像这样试试

```
$phno = 1234567890;
$collect = 4;
$position = strpos($phno, $collect);

if ($position)
    echo 'The number is found at the position'.$position;   
else
    echo 'Sorry the number is not found...!!!'; 
```

# mysql - WHERE 子句中的 IF 条件

> ID：12295159
> 
> 赞同：-1
> 
> 时间：2012-09-06T07:39:43.580
> 
> 标签：mysql, sql

我有一个查询：

```
select
p.id AS id,
p.text AS text,
p.date AS date,
k.color AS color,
...

FROM

cform_mba_contacts p,
cform_mba_contacts_category_links o,
cform_mba_contacts_status k,
...

where

p.id_peoples = ".$this->id." AND
o.id_contacts = p.id AND
o.id_status = k.id AND
...

order by p.date 
```

在引入新条件之前，此查询运行良好。我需要选择具有该条件的数据，**并且**仅使用`p.id_peoples = ".$this->id."`. 我尝试使用`UNION`，但没有奏效。我怎样才能做到这一点？

**更新**

我通过阅读有关 UNION 运算符 in order 子句的其他文档来解决我的问题，需要使用的不是 p.date，而是仅使用日期，并且在第二个语句中需要选择在第一个语句中选择的列数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:44:49.317

也许你想要的是**UNION ALL**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:48:28.780

尝试这个：

```
WHERE  p.id_peoples <> ".$this->id." 
       OR ( o.id_contacts = p.id AND
            o.id_status = k.id AND
            ...
          ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:53:24.010

```
create a string and execute the string at the last.

decalre @thequery varchar(max);
 set @thequery ='select * from emp'
if (1=1)
begin
set @thequery = @thequery + ' where emp_id =1'
end
else
begin
set @thequery = @thequery + ' where emp_id=0'
 end exec("@thequery "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:43:53.780

我想你正在寻找这个：

```
WHERE 1 = 1
AND (@id IS NULL 
     OR 
     ( p.id_peoples = @id  
       AND o.id_contacts = p.id 
       AND o.id_status = k.id
     ))

ORDER BY p.date 
```

`@id`传递的参数在哪里`.$this->id.`。

仅当传递的参数不为空`o.id_contacts = p.id AND o.id_status = k.id`时才会应用条件。`.$this->id.`

# protobuf-net - 即使使用 FixedLength byteArray 也应始终应用 OverwriteList

> ID：12295169
> 
> 赞同：2
> 
> 时间：2012-09-06T07:40:15.977
> 
> 标签：protobuf-net

我已经阅读了有关 protobuf 中字节数组处理的几个问题，只是想确保我做的事情正确。如果我忽略`OverwriteList`每次加载/保存字节的大小都会增加。如果您为该属性提供默认值，那么如果您使用数组或列表始终指定覆盖，那么正确的方法是什么？

```
[ProtoContract]
class Settings
{
    public Settings()
    {
        AccessCode = new byte[6];
        Message = "hello";
        Random r = new Random();
        r.NextBytes(AccessCode);
    }

    [ProtoMember(1, OverwriteList=true)]
    public byte[] AccessCode { get; set; }

    [ProtoMember(2)]
    public string Message { get; set; }
} 
```

我正在使用来自 protobuf 的 Souce 2.0.0.569。

```
 static void Main()
    {
        using (MemoryStream ms = new MemoryStream())
        {
            Settings s = new Settings();
            Display(s);

            Serializer.Serialize<Settings>(ms, s);

            ms.Seek(0, SeekOrigin.Begin);

            Settings newSettings = Serializer.Deserialize<Settings>(ms);
            Display(newSettings);
        }
    }

    static void Display(Settings s)
    {
        Console.WriteLine("Access Code Length = {0} Message = {1}", s.AccessCode.Length, s.Message);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:40:26.570

实际上，在您的情况下，我会说最合适的解决方法是：

```
[ProtoContract(SkipConstructor = true)]
class Settings
{
    public Settings()
    {
        AccessCode = new byte[6];
        Message = "hello";
        Random r = new Random();
        r.NextBytes(AccessCode);
    }

    [ProtoMember(1)]
    public byte[] AccessCode { get; set; }

    [ProtoMember(2)]
    public string Message { get; set; }
} 
```

但*没有*指定`OverwriteList`. 这将避免额外的冗余初始化步骤。

解释一下`OverwriteList`：由谷歌设计的protobuf被设计为可追加和可合并。因此，对于多值数据（列表、数组等），规范行为是在*末尾附加*新值；`OverwriteList`允许新值*替换*旧值 - 但另一种方法很简单：没有任何旧值。

作为不相关的说明；*可能会导致在紧密循环中创建的一组对象具有相同*值`new Random()`的混乱场景。如果这可能是个问题，请考虑改用实例，例如：*`static`*

 *```
static readonly Random rand = new Random();

public Settings()
{
    AccessCode = new byte[6];
    Message = "hello";
    lock(rand)
    {
        rand.NextBytes(AccessCode);
    }
} 
```*

# ubuntu - reprepro Translation-en 文件问题

> ID：12295170
> 
> 赞同：2
> 
> 时间：2012-09-06T07:40:17.160
> 
> 标签：ubuntu, repository, package, ubuntu-12.04, apt-get

我正在使用`reprepro`创建 apt 存储库。但是，它没有创建 Translation-en 文件（也没有创建 i18n 目录）。我已经按照[这个](http://www.jejik.com/articles/2006/09/setting_up_and_managing_an_apt_repository_with_reprepro/)和[这个](http://davehall.com.au/blog/dave/2010/02/06/howto-setup-private-package-repository-reprepro-nginx)教程。

因此，当我`apt-get update`在 Ubuntu 12.04 服务器上执行操作时，会收到警告：

```
W: Failed to fetch http://download.XXX.com/rep/dists/precise/contrib/i18n/Translation-en  Error reading from server. Remote end closed connection [IP: A.B.C.D 80] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:22:30.623

它可能根本与存储库无关。我遇到了同样的问题，并且在我禁用 apt-cacher 后它就消失了。您的问题可能与代理有关，而不是与您的存储库有关，也可能是两者的结合。禁用该站点的代理可能会有所帮助。

# iphone - 如何在 iphone 中通过电子邮件发送 .caf 文件？

> ID：12295173
> 
> 赞同：3
> 
> 时间：2012-09-06T07:40:27.153
> 
> 标签：iphone, objective-c, mfmailcomposeviewcontroller

我想通过 iphone 中的电子邮件发送扩展名为 .caf 的音频文件。谁能帮我做到这一点？我已经写`mimeType:@"audio/caf"`了，但我认为它不支持这一点。请帮我完成这个小任务。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T11:35:39.723

使用下面的代码： -

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filepath = [documentsDirectory stringByAppendingPathComponent:memo.memoUrl];

NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:filepath];  
NSData *dataToSend = [[NSData alloc] initWithContentsOfURL:fileURL];
[fileURL release];

MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

[picker setSubject:@"Recording"];

// Set up recipients
NSArray *toRecipients = nil;
NSArray *ccRecipients = nil; 
NSArray *bccRecipients = nil;

[picker setToRecipients:toRecipients];
[picker setCcRecipients:ccRecipients];  
[picker setBccRecipients:bccRecipients];

[picker setMessageBody:@"" isHTML:YES];
[picker addAttachmentData:dataToSend mimeType:@"audio/x-caf" fileName:[NSString stringWithFormat:@"voice-memo.caf", memo.memoName]]; 
```

# java - 在构建时反序列化

> ID：12295179
> 
> 赞同：0
> 
> 时间：2012-09-06T07:40:57.293
> 
> 标签：java

我有一个实现`Serializable`. 我有一个方法可以序列化自己：

```
...
fos = new FileOutputStream(path);
out = new ObjectOutputStream(fos);
out.writeObject(this);  
... 
```

我想在调用构造函数时反序列化它。那可能吗？我尝试了几件事，但没有奏效。

例如，我尝试过：

```
...
fis = new FileInputStream(path);
in = new ObjectInputStream(fis);
this = (MySerializableClass)in.readObject();
... 
```

但是，当然，`this`不是你可以这样分配的变量......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:43:44.780

您不能这样做，但您可以反序列化相同类型的对象并将所有值复制到当前对象。

一种常见的方法是不序列化对象本身，但所有数据都需要重新加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:55:15.317

序列化机制通常绕过构造函数。如果您需要调用构造函数，则可以改用[Externalizable](http://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html)。本文简短地强调了 Serializable 和 Externalizable 之间的区别：http: [//javapapers.com/core-java/externalizable-vs-serializable/](http://javapapers.com/core-java/externalizable-vs-serializable/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:46:47.593

的主要概念`UnSerializaion`是它从不调用，`Constructor`而是您手动将值从`steam`.

当一个`serializable`类的实例被反序列化时，`constructor`它不会运行，并且`instance variables` 不会被赋予它们最初分配的值。

***无法在构造函数中进行反序列化。***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:46:58.693

你怎么能分配`this`到`(double[])`？

你不能这样做但是你可以在构造函数中将值分配给对象的字段你可以使用相同的方法，即。`readObject()`或`readInt()`等等。

例如

```
this.doubleArray = (double[])in.readObject(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T03:28:31.120

处理这种情况的一种常见方法是创建一个工厂类型的静态方法来返回类的实例（通过序列化），而不是尝试通过构造函数来实现......所以您的客户端代码会执行类似......

```
MySerializableClass myClass = MySerializableClass.Create(path); 
```

（其中 Create 是您的静态方法）

# html - 当下拉列表更改其内容时，带有下拉列表的表格不会在 IE 7 中调整大小

> ID：12295181
> 
> 赞同：1
> 
> 时间：2012-09-06T07:40:59.797
> 
> 标签：html, css, drop-down-menu, internet-explorer-7, ie8-compatibility-mode

我的页面由一个包含两个下拉列表的表格组成。当第一个下拉列表（组）发生变化时，第二个下拉列表将获得新内容（JavaScript），具体取决于第一个选择。

![进程监视器](../Images/d410498bbb44701ebf70b0242ee3f1d1.png)

在 IE7 和 IE8 的兼容性视图中，但是第二个下拉菜单不会调整表格的大小。

![在此处输入图像描述](../Images/0f58b2973e6af507e4f306f3d9014ddc.png)

这是我所期望的以及它在其他浏览器中的样子（下拉列表扩展到其最大值的大小）：

![在此处输入图像描述](../Images/186079b251c82eeb5b52237cafd8c51c.png)

知道如何在 IE7 中获得相同的行为吗？

这是代码：

```
<table border="1" style="background-color: silver; margin: 0; padding: 0">
<tr>
    <td style="background-color: #336; color: white; font-weight: bold">Process Monitor  </td>
</tr>
<tr><td>
    <table style="border: 0; margin: 0; padding: 0">
    <tr>
        <td width="10px">&nbsp;</td>
        <td><form name="rid_select" "action="?" method="GET">
            <select id="pvar_pri" name="pvar_pri" onChange="setOptions(this.options[this.selectedIndex].value)">
                <option value="0">Select group</option>
                <option value="5">Item 1</option>
                <option value="10">Item 2</option>
            </select>
            <select id="pvar_sec" name="pvar_sec" onChange="this.form.submit()">
                <option value="">Select variable</option>
            </select>
            <input type="submit" value="Select">
        </form></td>
        <td width="10px">&nbsp;</td>
    </tr>
    </table>
</td>
</tr></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:34:39.190

我真的尝试只使用 CSS 来解决这个问题，但仍然没有得到任何结果。

我可以为您提供一个替代解决方案，因为您的表格很小并且重新绘制它应该不会花费太多时间和资源：

1.  添加包含表单的表的 ID

    ```
    <table id="FormCointaner"> 
    ```

2.  设置第一个选择框的 onchange 函数，在每个值更改时重绘表格

    ```
    $(document).on('change','#pvar_pri',function(){
        $('#FormCointaner').html($('#FormCointaner').html());
    }); 
    ```

据我说，由于某种原因，添加新元素时 IE 不会重绘表格。

你可以在这里查看我的想法：

[http://jsfiddle.net/jnKnx/](http://jsfiddle.net/jnKnx/)

# asp.net-mvc - 如何将多选列表的选定项目传递回控制器？

> ID：12295199
> 
> 赞同：5
> 
> 时间：2012-09-06T07:41:48.437
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在开发一个包含多选下拉列表的 MVC 应用程序。我想获取下拉列表中多个选定项目的 ID。

我有模型中的代码

```
namespace CustomerDEMOForMultiselect.Models
{
    public class Customer
    {
        private int _ID;
        private string _Name;
        private double _Amt;
        public int ID { get { return _ID; } set { _ID = value; }  }
        public string Name { get { return _Name; } set { _Name = value ; } }
        public double Amt { get { return _Amt; } set { _Amt = value; } }
    }
} 
```

控制器代码是

```
namespace CustomerDEMOForMultiselect.Controllers
{
    public class CustomerController : Controller
    {
        public ActionResult DisplayCustomer()
        {
            Customer oCustomer = new Customer();
            List<Customer> CustomersList = new List<Customer>();
            CustomersList.Add(new Customer() { ID = 1, Name = "TestCustomer1", Amt = 123 });
            CustomersList.Add(new Customer() { ID = 2, Name = "TestCustomer2", Amt = 234 });
            CustomersList.Add(new Customer() { ID = 3, Name = "TestCustomer3", Amt = 324 });
            ViewBag.CustList = CustomersList;
            return View(CustomersList);
          }
    }
} 
```

我没有在 View 中写什么，我尝试了不同的代码，但我感到困惑......

查看代码：

```
@model CustomerDEMOForMultiselect.Models.Customer 
@{
    Layout = null;
} 
<!DOCTYPE html>
<html>
    <head>
         <title>DisplayCustomer</title> 
    </head> 
    <body>
        <div>
             @using (Html.BeginForm())
             {
                 @Html.DropDownListFor(v => v.ID, new MultiSelectList(ViewBag.CustList,"ID","Name",ViewBag.ID)) 
                 <br /> 
                 <input type="submit" value="Submit" />
             } 
        </div> 
    </body> 
</html> 
```

我想`CustomerName list`在 View 中显示，所以我可以选择多个客户名称并将这些选定的客户 ID 传递回控制器。怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T09:08:45.860

Using a wrapper model with a property to bind the selected customers to works (I tried it):

Wrapper Model:

```
public class CustomerList
{
    public List<Customer> Customers { get; set; }
    public List<int> SelectedIDs { get; set; }
} 
```

Controller:

```
 [HttpGet]
        public ActionResult DisplayCustomer()
        {
            Customer oCustomer = new Customer();
            List<Customer> CustomersList = new List<Customer>();
            CustomersList.Add(new Customer() { ID = 1, Name = "TestCustomer1", Amt = 123 });
            CustomersList.Add(new Customer() { ID = 2, Name = "TestCustomer2", Amt = 234 });
            CustomersList.Add(new Customer() { ID = 3, Name = "TestCustomer3", Amt = 324 });
            ViewBag.CustList = CustomersList;
            return View(new CustomerList() { Customers = CustomersList }); 

        }

        [HttpPost]
        public void DisplayCustomer(List<int> selectedIds)
        {
            // do something with the id list
        } 
```

View:

```
@model MvcApplication2.Models.CustomerList

@using (Html.BeginForm(@Model.SelectedIDs))
{
    @Html.ListBoxFor(m => m.SelectedIDs, new MultiSelectList(@Model.Customers, "ID", "Name", @Model.SelectedIDs))
    <input type="submit" value="save" />
} 
```

You need something to bind your selection to and send it back to the controller.

# android - 带有对话框和方法调用的 AsyncTask？

> ID：12295206
> 
> 赞同：0
> 
> 时间：2012-09-06T07:42:16.770
> 
> 标签：android, android-asynctask

下面是我的代码：工作正常，但对话框不显示。对话框应该在 ASyncTask 开始时打开并在结束时关闭。怎么可能呢？

```
 Public class RootClass
    {
    public ProgressDialog dialog;
    public List methodA(String a)
    ----
    ---- `Class childClass extends AsyncTask<Void,Void,Void>
{
    @Override
    protected void onPreExecute() {

        dialog = ProgressDialog.show(RootClass.this,"Please wait", "Message");
    }

    @Override
    protected Void doInBackground(Void... params) {
    ----
    ---
    ---
        List<String> B=methodA(String a);
    -----
    -----

    }

    @Override
    protected void onPostExecute(Void result) {
        dialog.dismiss();
        return;
    }
}

}</pre>` 

            回答 #1

赞同：0

时间：2012-09-06T07:49:41.567

在 onCreate 方法中。在您要开始异步任务写入的事件中

```
dialog = ProgressDialog.show(RootClass.this,"Please wait", "Message"); 
```

您无法在 doiin backgroung() 方法中更新 ui，，

以及后来的 PostExecute()、dialog.dissmiss;。

            回答 #2

赞同：0

时间：2012-09-06T07:44:40.540

你的 RootClass 应该扩展 Activity 类

```
 public class RootClass extends Activity 
```

            回答 #3

赞同：-1

时间：2012-09-06T08:52:17.380

而不是使用 -`public ProgressDialog dialog;`

尝试使用——`public Dialog process;`

并在异步任务中使用此代码

```
protected void onPreExecute() 
{
progress = ProgressDialog.show(YourActivity.this, "Please wait",
                "Loading..", true);
} 
```

和

```
protected void onPostExecute(String result) {
super.onPostExecute(result);
if (progress.isShowing()) {
progress.dismiss();
} 
```

希望这可以帮助！

```

# php - mysqli bind_param 和受影响的行错误

> ID：12295213
> 
> 赞同：3
> 
> 时间：2012-09-06T07:42:51.347
> 
> 标签：php, mysql, mysqli

我是 mysqli 的新手，我已经检查了 PHP 手册等，没有任何效果。我不太确定出了什么问题。我不断收到此错误：

```
Warning: mysqli_stmt::bind_param() [mysqli-stmt.bind-param]: Number of variables doesn't match number of parameters in prepared statement in C:\xampp\htdocs\new1\template.php on line 165 
```

还有这个

```
Warning: mysqli_stmt_affected_rows() [function.mysqli-stmt-affected-rows]: Couldn't fetch mysqli_stmt in C:\xampp\htdocs\new1\template.php on line 190 
```

**编码**

```
$query = "INSERT INTO pets (name, age, gender, dob, breed_type, breed1, breed2, color, spay, size, hair_length, vaccine, vaccinated, dewormed, adoption_fees, aboutpet, petpic1, petpic2, petpic3) VALUES ('?','?','?','?','?','?','?','?','?','?','?','?','?','?','?','?','?','?','?')";

// PREPARE QUERY TO BE EXECUTED.
$stmt = $mysqli->prepare($query);

$stmt->bind_param("sssssssssssssssssss",$petname, $petage, $petgender, $petdob, $petbreedtype, $petbreed1, $petbreed2, $petcolor, $petspay, $petsize, $pethair, $petvaccine, $petvaccineamount, $petdewormed, $petadoptfees, $aboutpet, $target_path, $target_path1, $target_path2 );

$petname  = $_POST['petname'];
$petage   = $_POST['petage'];
$petgender = $_POST['petgender'];
$petdob = $_POST['petdob'];
$petbreedtype = $_POST['petbreedtype'];
$petbreed1 = $_POST['petbreed1'];
$petbreed2 = $_POST['petbreed2'];
$petcolor = $_POST['petcolor'];
$petspay = $_POST['petspay'];
$petsize = $_POST['petsize'];
$pethair = $_POST['pethair'];
$petvaccine = $_POST['petvaccine'];
$petvaccineamount = $_POST['petvaccineamount'];
$petdewormed = $_POST['petdewormed'];
$petadoptfees = $_POST['petadoptfees'];
$aboutpet = $_POST['aboutpet'];

//EXECUTE QUERY
$stmt->execute();

//CLOSE EXECUTE
$stmt->close();

$rowcount = mysqli_stmt_affected_rows($stmt);
if ($rowcount > 0)
{
echo "<div class='noerror'>Form has been submitted successfully!</div>";
} 
```

请帮忙，我现在完全迷路了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T07:47:16.347

您不能引用`?`占位符：这样做会导致它们被解析为字符串文字而不是占位符。

所以：

```
$query = "
  INSERT INTO pets (
    name, age, gender, dob, breed_type, breed1, breed2, color, spay, size,
    hair_length, vaccine, vaccinated, dewormed, adoption_fees, aboutpet,
    petpic1, petpic2, petpic3
  ) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:44:46.080

'?' 的数量与您使用 bind_param 输入的变量数量不匹配。您进行计数，但存在某种差异。

编辑：您还应该在 bind_param 中使用 $_POST['param']。并且不要将所有这些 $_POST['variables'] 注入新的。

EDIT2：阅读[规范化](http://en.wikipedia.org/wiki/Database_normalization)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:50:02.803

首先-在引用它们后提取 $_POST 变量-然后需要将 "$stmt->bind_param(" 行移到 $_POST 变量下方

其次 - 你不需要在你的'？'周围加上引号。变量 - 如果你这样做，它会将它们视为字符串而不是绑定参数

# java - 服务器使用 COMETD 推送到客户端（dojo）

> ID：12295221
> 
> 赞同：0
> 
> 时间：2012-09-06T07:43:18.187
> 
> 标签：java, javascript, dojo, comet, cometd

我正在尝试将消息从服​​务器推送到客户端。我正在使用与 tomcat6 集成的 DOJO 1.7、Cometd 和 Jetty。

```
 //Server side code
   public class notificationService extends AbstractService {

public notificationService(BayeuxServer bayeux, String name) {
    super(bayeux, name);
    System.out.println("Inside constrcutor of Notification Service");
    addService("/notification", "processNotification");
}

    public void processNotification(ServerSession remote,ServerMessage.Mutable message)      
        {
    System.out.println("Inside process Notification");
    Map<String,Object> response = new HashMap<String,Object>();
    response.put("payload",new java.util.Date());
            getBayeux().createIfAbsent("/notification");
          getBayeux().getChannel("/notification").publish(getServerSession(),response,null);
            //remote.deliver(getServerSession(),"/notification", response, null);
        }

      //Client Side Code (DOJO)

       var cometd = dojox.cometd;
       cometd.init("http://serverip:port/cometd")
       cometd.publish('/notification',{ mydata: { foo: 'bar' } });
       cometd.subscribe('/notification', function(message)
            {
                    //alert("Message received" + message.data.payload);
                    //alert(message.data.payload);
                    alert("Message received");
            }); 
```

我想向订阅特定频道的所有客户广播消息。当 m 使用 remore.deliver 时，它正在向单个客户端发送消息，而不是向订阅该频道的所有客户端发送消息。channel.publish 对我不起作用……非常感谢任何帮助和评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:39:14.260

您的客户端正在发布到频道`/notification`，这是一个广播频道（有关定义，请参见[http://docs.cometd.org/reference/#concepts_channels](http://docs.cometd.org/reference/#concepts_channels)），因此该消息不仅会被您的服务接收，还会广播给所有订阅者那个频道的。

然后在您调用的服务中，它将向频道的订阅者`ServerChannel.publish()`发送*另*`/notification`一条消息（除了服务本身 - 存在无限循环预防）。

执行此类操作的更好方法是使用服务通道，例如`/service/notification`，将初始消息从客户端发送到服务。然后服务可以像现在一样广播到频道`/notification`。

调用`ServerChannel.publish()`是从服务广播消息的正确方法。不幸的是，您没有具体说明为什么不适合您，所以我无能为力。

我将首先在您的客户端和第一条消息的服务之间使用服务通道。

另请注意，Tomcat 6 并不是 CometD 的最佳解决方案，因为它不支持异步 servlet（Servlet 3）。

您最好使用符合 Servlet 3 的容器，例如[Jetty 8](http://eclipse.org/jetty)。

# iphone - 如何在 iPhone 应用程序中启用/禁用 iTunes 文件共享

> ID：12295232
> 
> 赞同：4
> 
> 时间：2012-09-06T07:43:53.250
> 
> 标签：iphone, ios, itunes

我需要在应用程序中启用/禁用**文件共享**。我的**iPhone**应用程序共享文档中的所有数据，让用户可以从**iTunes中****备份**数据，以便以后**恢复**。我知道我可以通过更改应用程序**info.plist 以启用/禁用****iTunes 文件共享**来实现这一点，但因为我必须从应用程序中禁用/启用它，即从应用程序设置屏幕。

 ******请建议我如何实现此功能。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:14:07.993

不可能通过运行时的代码来做到这一点。有一个技巧可以做到这一点，但只有当你没有太多数据要分享时，它才会是好的。在 plist 中启用文件共享。然后将所有文件放在“共享”之类的文件夹名称中，然后在 UI 中放置一个开关，当用户关闭开关然后将此文件夹重命名为“.Share”时，它将被隐藏并且不再可用于共享。

注意：这是一个技巧，不是一个好方法，但是当你几乎不需要它时它就可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:25:08.977

干杯，对于提问和回答之间的时间长度感到抱歉。

您正在应用程序的信息列表中寻找 UIFileSharingEnabled 键。

他们的开发人员页面的链接不再显示此信息，或者我只是找不到它，但是，将其添加到您的 plist 文件中

```
<key>UIFileSharingEnabled</key>
<true/> 
```

干杯******

# java - java中的NTLMv2身份验证

> ID：12295233
> 
> 赞同：0
> 
> 时间：2012-09-06T07:44:01.467
> 
> 标签：java, authentication, windows-authentication, single-sign-on, ntlmv2

`NTLMv2`是否可以在 Java 应用程序中实现身份验证。

我在某处读到可以通过`JCIFS`图书馆实现这一目标，但我无法获得任何示例。

我想使用它来实现单点登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:58:35.787

你可以试试这个免费的 Java NTLMv2 库/过滤器：

[https://sourceforge.net/projects/ntlmv2auth/](https://sourceforge.net/projects/ntlmv2auth/)

它基于 Liferay 开源门户的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T18:56:47.170

JCIFS 不完全支持 NTLMv2。Jespa 支持它，但如果您的应用程序有超过 25 个用户（或超过 1 个安装），它需要许可证。Httpclient 版本 4.2.3 + 支持开箱即用的 NTLMv2（来源：[从 Java\httpclient 3\linux 连接到 NTLMv2](https://stackoverflow.com/questions/15409778/connecting-to-ntlmv2-from-java-httpclient-3-linux?rq=1)）。

# algorithm - 谷歌地图从2点返回路径的算法是最短路径吗？

> ID：12295238
> 
> 赞同：0
> 
> 时间：2012-09-06T07:44:15.537
> 
> 标签：algorithm, google-maps

我只是想，如果谷歌地图的“获取方向”返回两点之间的最短路径。任何答案、意见和建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:47:35.527

如果您在谈论[Directions API](https://developers.google.com/maps/documentation/directions/)，我们会尝试返回*最快*路径，而不是*最短路径*。

# android - 来源未显示在 imagebutton 中

> ID：12295239
> 
> 赞同：1
> 
> 时间：2012-09-06T07:44:20.947
> 
> 标签：android, image, background, imagebutton

我正在尝试制作一个会改变状态的 imageButton。所以我制作了一个名为“btn_marisa”的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/btn_marisa_bg_on" android:state_pressed="true"/>
<item android:drawable="@drawable/btn_marisa_bg"/> <!-- default -->

</selector> 
```

比我用 ImageButton 做了一个布局，这就是代码：

```
<ImageButton
    android:id="@+id/imageButton3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageButton2"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/imageButton2"
    android:adjustViewBounds="true"
    android:src="@drawable/marisa_logo"
    android:background="@drawable/btn_marisa"
    android:scaleType="fitStart" /> 
```

出于某种原因，在 Eclipse 中（在图形布局中）它看起来不错，但是当我将它安装在手机上时，只显示背景。它甚至可以改变状态，但我看不到我需要在背景上看到的图像。它是一个有图标和背景的按钮，我只希望背景改变状态。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:07:05.960

它应该工作。

但首先，请确保源图像`@drawable/marisa_logo`小于背景图像`btn_marisa_bg_on/btn_marisa_bg`，否则图像将与整个背景重叠，您将无法看到背景状态何时发生变化。

另外，请尝试删除此属性 `android:scaleType="fitStart"`，因为这会拉伸源图像，并且您将再次无法看到背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:07:36.813

尝试 Button 而不是 ImageButton。删除 android:src 并只留下 android:background。在大多数情况下，这应该足够了。试试看它是否显示你想要的。

如果您确实需要 ImageButton 中的背景和源代码，请先查看我的建议是否有效，然后逐一添加您的修改。

# javascript - iframe 模式无法关闭

> ID：12295240
> 
> 赞同：0
> 
> 时间：2012-09-06T07:44:27.540
> 
> 标签：javascript, iframe, modal-dialog

我使用从浏览器小书签生成的 iframe 模式从用户正在查看的网页中收集信息。

用户添加到他们的书签工具栏的代码在单击时触发书签工具是这样的：

```
javascript:(function(d){var%20modal=document.createElement('iframe');modal.setAttribute('src','http://9ammusic.com/test/bookmarklet.html?url='+encodeURIComponent(window.location.href)+'&page_title='+document.title);modal.setAttribute('scrolling','no');modal.className='modal';document.body.appendChild(modal);var c=document.createElement('link');c.type='text/css';c.rel='stylesheet';c.href='//9ammusic.com/css/iframe.css';document.body.appendChild(c);}(document)); 
```

这段代码顺便显示了问题

100 次中有 95 次可以正常工作，并且可以正常关闭，但有时，关闭链接根本不起作用 - 有没有不同/更好的方法可以关闭这样的模式？

要进行测试，请转到下面的链接并尝试使用小书签 - 它在 Firefox 中可以正常关闭，但在 Chrome 中无法关闭：

```
http://www.ebay.co.uk/itm/JEFF-BANKS-BESPOKE-BLACK-RED-PINSTRIPE-100-WOOL-MENS-SUIT-36S-DRY-CLEANED-/330789478348?_trksid=p5197.m1992&_trkparms=aid%3D111000%26algo%3DREC.CURRENT%26ao%3D1%26asc%3D14%26meid%3D1848697403629550114%26pid%3D100015%26prg%3D1006%26rk%3D1%26#ht_1830wt_1163 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:18:20.143

这出于某种原因，所以现在一切都很好，使用表单而不是链接：

```
<form method=post action=<?=$_GET['url']?> target="_parent">
<input type=submit value="X Close Window"></form> 
```

# python - NLTK 提取词块分析树的术语

> ID：12295251
> 
> 赞同：4
> 
> 时间：2012-09-06T07:45:05.720
> 
> 标签：python, nlp, nltk

> **约翰爱德华格雷**现在开始**跑步**，因为他知道自己**很胖**
> 
> **她**在**听**那个糟糕的歌手**打****那个**

 **我想从一个句子中提取有趣的术语。我目前使用 POS 标记来识别每个实体的语法类型。然后我将每个标记更新为一个计数器（名词、动词和形容词的权重不同）。

我现在希望为此使用分块器。我认为**解析树的叶节点包含所有有趣的单词和短语**。如何从分块器输出中提取术语？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T08:54:06.520

在语言学中，“有趣的词”是 call `open class words`。而且您所指的任务并不是真正的分块/解析任务。您正在寻找某种标记器/注释器/标签器来标记每个单词以查看它是否“有趣”。

**序列标记**

如果您将任务作为序列标记任务来处理，那么句子`John Edward Grey started running now that he knows he is fat`将被标记为：

```
[('John','B'),('Edward','I'),('Grey','I'),('started','O'),('running','B'),
('now','O'),('that','O'),('he','O'),('knows','O'),('he','O'),
('is','O'),('fat','B')] 
```

*   所以任何带有标签的东西都`B`意味着你的“有趣”块的开始，并且

*   带有标签的后续单词`O`将是“有趣”块的结尾或

*   它也可以以后续`B`标记前一个“有趣”块的结尾和新“有趣”块的开始而结束。

**什么有趣或不有趣？**

实际上，有趣与否取决于您任务的最终目标是什么，对我来说，我会说这`started running`是一个“有趣”的块，因为它开始修改不定式含义或`running`赋予它一种`begin action`形式。

**封闭课与公开课的话**

如果您知道什么是不感兴趣的单词，那么我建议您构建一个字典，然后运行一个序列标记脚本来检测那些不在密切类单词字典中的单词。

**机器学习方法**

另一种方法是执行机器学习分类任务，其中您已经预先注释了有趣和不有趣的样本数据。然后，您识别一些分类特征并运行分类以自动使用`B`、`I`、`O`标签标记数据。**

# apache - 详细查看apache服务器传入请求

> ID：12295253
> 
> 赞同：2
> 
> 时间：2012-09-06T07:45:17.280
> 
> 标签：apache

我想知道他们是否可以详细了解我的`apache server`. 我的意思是像`tkt101`交互模式下的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:12:58.353

由于我不知道 tkt101 服务器，我无法准确回答。您可能已经研究过 Apaches`CustomLog`指令。如果你想要更多，你可以试试[modsecurity](https://modsecurity.org/)，它提供了[流量记录的高级功能](http://sourceforge.net/apps/mediawiki/mod-security/index.php?title=Reference_Manual#HTTP_Traffic_Logging)

# c# - int 字段的默认值为 0 吗？

> ID：12295254
> 
> 赞同：3
> 
> 时间：2012-09-06T07:45:28.303
> 
> 标签：c#, console-application

我有一个带有以下代码的控制台应用程序：

```
 using System;

    namespace HeadfirstPage210bill
    {
        class Program
        {
            static void Main(string[] args)
            {
                CableBill myBill = new CableBill(4);
                Console.WriteLine(myBill.iGotChanged);
                Console.WriteLine(myBill.CalculateAmount(7).ToString("£##,#0.00"));
                Console.WriteLine("Press enter to exit");
                Console.WriteLine(myBill.iGotChanged);
                Console.Read();
            }
        }
    } 
```

CableBill.cs 类如下：

```
 using System;

    namespace HeadfirstPage210bill
    {
        class CableBill
        {
            private int rentalFee;
            public CableBill(int rentalFee) {
                iGotChanged = 0;
                this.rentalFee = rentalFee;
                discount = false;
            }

            public int iGotChanged = 0;

            private int payPerViewDiscount;
            private bool discount;
            public bool Discount {
                set {
                    discount = value;
                    if (discount) {
                        payPerViewDiscount = 2;
                        iGotChanged = 1;
                    } else {
                        payPerViewDiscount = 0;
                        iGotChanged = 2;
                    }
                }
            }

            public int CalculateAmount(int payPerViewMoviesOrdered) {
                return (rentalFee - payPerViewDiscount) * payPerViewMoviesOrdered;
            }

        }
    } 
```

控制台返回以下内容：

![在此处输入图像描述](../Images/efea18de33cde93624797c4f7346b6ab.png)

我看不到什么时候`payPerViewDiscount`设置为 0。当然这只能在设置 Discount 属性时发生，但如果调用属性 Discount 则变量`iGotChanged`应该返回 1 或 2，但它似乎保持在 0。因为它类型`int`是否有默认值`payPerViewDiscount`0？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T07:46:35.547

是的 int 的默认值是`0`您可以使用[`default`](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)关键字检查

```
int t = default(int); 
```

`t`将举行`0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T07:48:09.863

在构造函数运行之前，类中的字段被初始化为其默认值。int 的默认值为 0。

请注意，这*不适*用于局部变量，例如在方法中。它们不会自动初始化。

```
public class X
{
    private int _field;

    public void PrintField()
    {
        Console.WriteLine(_field); // prints 0
    }

    public void PrintLocal()
    {
        int local;
        Console.WriteLine(local); 
        // yields compiler error "Use of unassigned local variable 'local'"
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T07:46:35.753

确切地。`int`默认值为`0`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T07:47:10.583

是的，零是 int 的默认值。

# jquery - 关闭对话框也会关闭 datepicker - 包括 jsfiddle

> ID：12295256
> 
> 赞同：0
> 
> 时间：2012-09-06T07:45:32.213
> 
> 标签：jquery, jquery-ui

我有一个带有日期选择器输入字段和对话框的简单布局。如果我打开日期选择器，然后关闭对话框，日期选择器也会关闭。我想保持日期选择器打开。

示例：http: [//jsfiddle.net/nwSgm/](http://jsfiddle.net/nwSgm/)

这是一个错误还是故意行为？

无论如何，有谁知道如何避免这种行为，所以当对话框关闭时日期选择器不会关闭？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:58:35.613

正如@Praveen 所说，这是 datepicker 的预期行为！我为您的需要做了一些小工作。

> [http://jsfiddle.net/WzLc3/1/](http://jsfiddle.net/WzLc3/1/)

# iphone - 自定义 UIAlertView

> ID：12295263
> 
> 赞同：0
> 
> 时间：2012-09-06T07:45:57.720
> 
> 标签：iphone, xcode, uialertview

这是我在按钮操作中的代码。我想让我的 AlertView 对我的页面透明。怎么做？

请帮我完成我的任务......

```
 alert=[[UIAlertView alloc]initWithTitle:@"error" message:@"qwwqreqrgvsdfhbsb" delegate:self cancelButtonTitle:@"dismiss"otherButtonTitles:Nil, nil];

    [alert show];

    UILabel *theTitle = [alert valueForKey:@"_titleLabel"];
    [theTitle setTextColor:[UIColor redColor]];

    UILabel *theBody = [ alert valueForKey:@"_bodyTextLabel"];
    [theBody setTextColor:[UIColor redColor]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:40:19.247

设置背景。

```
[alert setDimsBackground:NO]; 
```

# java - Java.lang.ClassNotFoundException：Android 上的 net.sourceforge.jtds.jdbc.Driver

> ID：12295264
> 
> 赞同：6
> 
> 时间：2012-09-06T07:45:57.563
> 
> 标签：java, android, sql-server, jdbc, jtds

今天我正在做`SqlServer`使用`JTDS`驱动程序的连接。但是当我运行程序时，我发现了下面的错误

```
Java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver
Caused by: java.lang.ClassNotFoundException: net.sourceforge.jtds.jdbc.Driver in loader dalvik.system.PathClassLoader[/data/app/com.kmkm.lll-2.apk] 
```

我已经搜索过这个主题，我找到了答案

```
java -classpath .:jtds.jar MyApp 
```

但我很困惑我如何以及在哪里运行这个命令？为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T21:54:37.917

我在 Eclipse 中的 Android 应用程序遇到了同样的问题。对我有用的是用我的应用程序导出外部罐子。

如果您已经添加了 jtds-1.2.5 驱动程序，很好。除此以外：

右键单击项目 > 属性 >**库**选项卡通过单击“添加外部 JAR”添加 jtds-1.2.5.jar 文件

接下来，在**Order and Export选项卡（在 Java Build Path 窗口中的****Libraries**旁边）选中*jtds-1.2.5.jar*（以及您可能拥有的任何其他外部 jar ）的复选框。

这将使用 .apk 文件导出包含驱动程序的 .jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:51:22.587

如果您使用第三方库，请确保您拥有所有必需的依赖项（如果需要）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:04:44.693

如果您使用的是 eclipse，请尝试以下步骤

*   右键单击您的项目
*   单击构建路径 > 配置构建路径...
*   选择库标签并单击添加外部 JAR...
*   指向您的 jtds.jar 并单击确定。
*   重建并再次运行。

# drupal-6 - drupal 6 - 未设置以前设置的 cck 字段验证错误消息

> ID：12295266
> 
> 赞同：0
> 
> 时间：2012-09-06T07:46:01.350
> 
> 标签：drupal-6, validation, cck

如何取消设置以前设置的 cck 字段验证错误消息？某些模块正在设置我想要覆盖的表单验证消息。就我而言，它是 cck_phone 模块。

喜欢`form_unset_error($field['field_name'])`取消设置错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:41:03.167

取消设置错误的一种方法是 unset($_SESSION['messages']['error']['cck field'])。但我不知道这是否是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:15:30.447

如果是最后一个错误，您需要删除错误然后清除“drupal form static cache”。

```
form_set_error(NULL, '', TRUE); 
```

为了重置表单的状态。例如

```
$found_error = array_search('This e-mail has already been taken by another user.',    $_SESSION['messages']['error']);
if ($found_error !== FALSE) {
unset($_SESSION['messages']['error'][$found_error]);
if (sizeof($_SESSION['messages']['error']) == 0) {
      unset($_SESSION['messages']['error']);
      form_set_error(NULL, '', TRUE);
 } 
```

# c# - 为什么 c# 允许这样做？（空检查到 int）

> ID：12295269
> 
> 赞同：8
> 
> 时间：2012-09-06T07:46:14.977
> 
> 标签：c#, nullable

> **可能重复：**
> [C# 可以将值类型与 null 进行比较](https://stackoverflow.com/questions/1972262/c-sharp-okay-with-comparing-value-types-to-null)

为什么 C# 允许：

```
class MyClass
{
    public int MyInt;
}

static void Main(string[] args)
{
    MyClass m = new MyClass();
    if (m.MyInt == null) // <------------- ?
        Console.Write("......");
} 
```

Resharper 说“*表达式总是错误的*” - 这显然是*正确*的，因为`MyInt`是`int`而不是`int?`

但是 C# 如何允许它编译呢？该属性将永远存在，它的类型是`int`！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-06T07:52:19.500

我认为，这与编译的原因相同

```
if(false)
   Console.WriteLine("never get here"); 
```

永远不会执行的东西。

值得一提的是，是的，您不会收到错误消息，但是您会收到警告。

# c++ - cuda 代码的优化技巧

> ID：12295274
> 
> 赞同：0
> 
> 时间：2012-09-06T07:46:41.430
> 
> 标签：c++, matlab, cuda, gpu

我写了一段代码，用于在 MATLAB 中计算自商图像 (SQI)。现在我想并行重写它的一部分以加快速度。这部分代码是：

```
siz=15;
X=normalize8(X);
[a,b]=size(X);
filt = fspecial('gaussian',[siz siz],sigma);
padsize = floor(siz/2);
padX = padarray(X,[padsize, padsize],'symmetric','both');

t0 = tic; % -------------------------------------------------------------
Z=zeros(a,b);
for i=padsize+1:a+padsize
    for j=padsize+1:b+padsize
        region = padX(i-padsize:i+padsize, j-padsize:j+padsize);
        means= mean(region(:));
        M=return_step(region, means);
        filt1=filt.*M;

        summ=sum(sum(filt1));        

        filt1=(filt1/summ);
        Z(i-padsize,j-padsize)=(sum(sum(filt1.*region))/(siz*siz));
    end
end
toc(t0) % ------------------------------------------------------------- 
```

和 return_step 函数：

```
function M=return_step(X, means)

[a,b]=size(X);
for i=1:a
    for j=1:b
        if X(i,j)>=means
            M(i,j)=1;
        end
    end
end 
```

我在核函数下面写了：

```
__global__ void returnstep(const double* x, double* m, double* filt, int leng, double mean, int i, int j, int width)
{
    int idx=threadIdx.y*blockDim.x+threadIdx.x;
    if(idx>=leng) return;

    int ridx= (j+threadIdx.y)*width+threadIdx.x+i;
    double xval= x[ridx];
    if (xval>=mean) m[idx]=filt[idx]*xval;
    else            m[idx]=0;
} 
```

然后将 MATLAB 代码更改如下：

```
kernel= parallel.gpu.CUDAKernel('returnstep.ptx', 'returnstep.cu');
kernel.ThreadBlockSize= [double(siz) double(siz) 1];
GM = gpuArray(zeros(siz,siz));
GpadX = gpuArray(padX);
Gfilt = gpuArray(filt);

%% Process image
t0 = tic; % -------------------------------------------------------------
Z=zeros(a,b);
for i=padsize+1:a+padsize
    for j=padsize+1:b+padsize
        means= mean(region(:));
        GM= feval(kernel, GpadX, GM, Gfilt, siz*siz, means, i-padsize-1, j-padsize-1, padXwidth);
        filt1=  gather(GM);

        summ=sum(sum(filt1));        

        filt1=(filt1/summ);
        Z(i-padsize,j-padsize)=(sum(sum(filt1))/(siz*siz));
    end
end
toc(t0) % ------------------------------------------------------------- 
```

对于 330X200 图像，我的顺序代码在 2.5 秒内运行，但新并行代码的运行时间为 15 秒。不知道为什么？？？？我需要一些建议来改进它。我是 CUDA 编程的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:33:12.803

```
> help gather
...
X = GATHER(A) when A is a GPUArray, X is an array in the local workspace
with the data transferred from the GPU device.
.... 
```

filt1 = gather(GM) 每一步都在将 GM 从 GPU 复制到 CPU，效率非常低。您应该将整个计算移到循环嵌套中，或者最好将整个循环嵌套移动到 GPU 内核。否则你可以忘记任何加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:41:17.297

我在 Sobel 过滤器下的评估显示 CPU 在小图像上的性能优于 GPU。我认为您的图像大小对于比较 CPU-GPU 性能而言是如此之小。计算应该足够大以隐藏内核和通信启动开销。

# mysql - rails db design for shop with multiple regions and multiple products variant

> ID：12295288
> 
> 赞同：1
> 
> 时间：2012-09-06T07:47:26.410
> 
> 标签：mysql, sql, ruby-on-rails, ruby-on-rails-3, database-design

我试图围绕这个话题展开思考，但找不到简单的解决方案。

*   产品根据地区价格。
*   地区每个地区有一种货币，每个地区有一种股票。
*   然后是颜色和尺寸等产品变化，颜色应该是特殊的，因为我需要图像。
*   颜色和尺寸取决于基于地区的库存。
*   产品每个地区有一个价格

也许这里的任何人都对这个数据库布局有一个好主意。

**编辑**

## 产品

*   ID
*   姓名
*   标识符
*   蛞蝓

## product_variations

*   ID
*   product_id
*   姓名
*   尺寸
*   图片

## product_stocks

*   ID
*   数数
*   product_variation_id
*   region_id

## 产品价格

*   ID
*   product_id
*   region_id
*   价格

## 地区

*   ID
*   姓名
*   蛞蝓

尺寸仍然与变化相关..我需要一种具有多种尺寸的变化，并且库存也应该可以根据地区链接到尺寸

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:59:47.347

可能是这样的：

**`Products`**：

*   `Id`.
*   `Name`.

> 产品变化，如颜色和尺寸、颜色。

**`ProductVariations`**：

*   `Id`.
*   `ProductId`.
*   `StockId`（颜色和尺寸取决于地区的库存）
*   `Colour`.
*   `Size`

> 地区每个地区有一种货币，每个地区有一种股票。

**`Currencies`**：

*   `Id`.
*   `Name`.

**`Stocks`**：

*   `Id`.
*   `Name`.
*   `RegionId`.

**`Regions`**：

*   `Id`.
*   `Name`.
*   `CurrencyId`.
*   `StockId`.

> 产品每个地区有一个价格
> 
> 产品基于地区价格

**`ProductPrices`**：

*   `Id`.
*   `ProductId`-> 产品表。
*   `RegionId`-> 地区表。
*   `Price`.

您可能需要稍微调整此结构以适应：

*   产品图像取决于您是每个产品只需要一个图像还是一个产品可以有多个图像（新表`ProductImages`）。
*   您没有阐明您需要的产品属性（产品变体）是每种产品的很多变体（每种产品一对多）还是只是每种产品的属性。

**更新：**

> 一种尺寸也可以有库存。

在这种情况下，您可以根据需要移动 `Colour`和`Size`/或`size`唯一到新表，例如`ProductVariationOptions`：

**`ProductVariationOptions`**：

*   `Id`.
*   `Size`.
*   `Colour`.

然后你`ProductVariationOptions`会是这样的：

**`ProductVariations`**：

*   `Id`.
*   `ProductId`.
*   `StockId`（颜色和尺寸取决于地区的库存）
*   `ProductVariationOptionsId`->`ProductVariationOptions`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:01:45.300

一个地区可以通过变体拥有许多产品

一个变体可以有多个图像

## 地区

*   姓名
*   货币

## 产品

*   姓名

## 变化

*   颜色
*   尺寸
*   价格
*   region_id
*   product_id

## 图片

*   变体_id

对于尺寸和颜色，我可能会使用 simple_enum gem。我一直在我一直在做的一个项目上使用它，它非常好。

# arrays - C# asp.net 中的字节数组 getter setter

> ID：12295289
> 
> 赞同：0
> 
> 时间：2012-09-06T07:47:29.170
> 
> 标签：arrays, byte, setter, getter

我正在从文件上传控件中获取字节数组并将它们保存在一个类对象中，但是我遇到了 stackoverflow 无限循环或递归之类的异常。

我的代码是：

```
public class UploadDetail
{`enter code here`
    //public bool IsReady { get; set; }
    public string FileSize { get; set; }
    //public int UploadedLength { get; set; }
    public string FileName { get; set; }
    public byte[] FileinBytes;

    public byte[] FileBytes
    {
        get
        {
            return FileBytes;
        }

        set
        {                
            FileBytes = value;
        }
    } 
```

这是我设置对象值的gridview按钮事件：

```
 protected void gvUploadFiles_Clicked(object sender, GridViewCommandEventArgs e)
 {
     try
     {    
         if (e.CommandName == "doingUpload")
         {

             int index = Convert.ToInt32(e.CommandArgument);

             GridViewRow row = gvUploadFiles.Rows[index];

             if (gvUploadFiles.DataKeys[index]["FileName"] != null)
             {
                 currentUpload.FileName = gvUploadFiles.DataKeys[index]["FileName"].ToString();
             }

             if (gvUploadFiles.DataKeys[index]["FileSize"] != null)
             {
                 currentUpload.FileSize = gvUploadFiles.DataKeys[index]["FileSize"].ToString();
             }

             if (gvUploadFiles.DataKeys[index]["FileBytes"] == null)
             {
                 currentUpload.FileBytes=(byte[])gvUploadFiles.DataKeys[index]["UploadDetail.FileBytes()"];
                 //currentUpload.FileBytes(row.FindControl("fileBytes"));
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:51:58.203

您的 getter/setter 中有无限递归。

你想写它`FileinBytes`吗？

```
public byte[] FileBytes
{
    get
    {
        return FileinBytes;
    }

    set
    {
        FileinBytes = value;
    }
} 
```

另一种方法是使用自动实现的属性：

```
public byte[] FileBytes { get; set; } 
```

# linux - Linux自动设置环境变量？

> ID：12295290
> 
> 赞同：4
> 
> 时间：2012-09-06T07:47:32.620
> 
> 标签：linux

我安装了 libffi-3.0.11，因为另一个程序需要它。但安装后其他程序（通过调用命令`./configure`）不识别 libffi 已安装。我必须设置环境变量吗？还是所有变量都自动设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:03:10.340

这取决于，如果您安装`libffi`，`/usr/local`您可能应该将您要配置的应用程序的包含目录设置为`/usr/local`.

对于新应用，请尝试`./configure --prefix=/usr/local`. 要查看配置选项，请使用`./configure --help`. 你能展示什么不运行的例子吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:13:53.937

通常有一个 LIBPATH，您应该尝试将您的 lib 所在的目录包含在此路径中。另外，如果你有一个默认的 bash

导出 LIBPATH=/your/libffi/path:$LIBPATH

我强烈建议将其放入脚本并在您自动登录时加载它，这样您就无需重复此步骤

/home/yourhome/.profile <- 确保将其插入此文件并自动加载

这是如何完成任务的指南：http: [//archive.linuxfromscratch.org/lfs-museum/5.1-pre1/LFS-BOOK-5.1-PRE1-HTML/chapter06/glibc.html](http://archive.linuxfromscratch.org/lfs-museum/5.1-pre1/LFS-BOOK-5.1-PRE1-HTML/chapter06/glibc.html)

您可能需要的参数如下：./configure --libexecdir=/usr/lib:

如果您正确安装了 libffi 库，这应该可以完全解决您的问题。

# twitter-bootstrap - Twitter bootstrap - 带有标签的导航栏不起作用

> ID：12295291
> 
> 赞同：1
> 
> 时间：2012-09-06T07:47:33.490
> 
> 标签：twitter-bootstrap

我正在尝试将标签添加到`.navbar`但`.tab-content`不显示在标签下方但在它旁边。当我删除`.navbar`类选项卡时工作正常（内容位于选项卡下方），因此类存在一些问题`.navbar`。有谁知道是什么问题？

这是代码：

```
<div class="navbar navbar-fixed-top">
 <div class="navbar-inner">
  <div class="container-fluid">
   <a class="brand" href="/system/default/">Home</a>
    <div class="nav-collapse subnav-collapse">
     <div id="snippet--mainMenu">
      <ul class="nav nav-tabs">
       <li class=""><a href="#tab1" data-toggle="tab">Analyze</a></li>
       <li class=""><a href="#tab2" data-toggle="tab">Portfolio</a></li>
       <li class=""><a href="/system/search/" >Search</a></li>
      </ul>
      <div class="tab-content" style="padding-bottom: 9px; border-bottom: 1px solid #ddd;">
      <div class="tab-pane" id="tab1">
       <ul> 
        <li style="display: inline;list-style-type: none;"><a href="/system/analyze/builder">Builder</a></li>
        <li style="display: inline;list-style-type: none;"><a href="/system/analyze/history">History</a></li>
        <li style="display: inline;list-style-type: none;"><a href="/system/analyze/optimize">Optimize</a></li>
       </ul>
      </div>
      <div class="tab-pane" id="tab2">
       <ul> 
        <li style="display: inline;list-style-type: none;"><a href="/system/portfolio/list">Table List</a></li>
        <li style="display: inline;list-style-type: none;"><a href="/system/portfolio/watchlist">Watchlist</a></li>
        <li style="display: inline;list-style-type: none;"><a href="/system/portfolio/temporary">Temporary</a></li>
       </ul>
      </div>
     </div>
   </div>                    
   <div class="btn-group pull-right">
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-user"></i> User<span class="caret"></span></a>
    <ul class="dropdown-menu">
     <li><a href="/system/user/">Profile</a></li>
     <li class="divider"></li>
     <li><a href="/system/default/logout">Sign Out</a></li>
    </ul>
   </div>                    
  </div><!-- /.nav-collapse -->                                 
 </div><!-- /.container-fluid -->
</div><!-- /.navbar-inner -->
</div><!-- /.navbar --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:00:12.230

你正在混合两种不同的东西。导航栏和选项卡不兼容。你不能包含`.nav-tabs`在 a`.navbar`中，更不用说包含`.tab-panes`.
你可以得到一个导航栏

```
<div class="navbar">
    <div class="navbar-inner">
        <a class="brand" href="#">Title</a>
        <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </div>
</div> 
```

或者您可以使用选项卡式导航

```
<div class="tabbable"> <!-- Only required for left/right tabs -->
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>
        <li><a href="#tab2" data-toggle="tab">Section 2</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="tab1">
            <p>I'm in Section 1.</p>
        </div>
        <div class="tab-pane" id="tab2">
            <p>Howdy, I'm in Section 2.</p>
        </div>
    </div>
</div> 
```

但是你不能混合这个代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:44:09.777

实际上，通过一些烦人的努力，你可以。

将您的导航栏和标签页创建为 2 个不同的东西。隐藏 nav.nav 选项卡。然后将脚本附加到导航栏条目以显示适当的选项卡并（为了完整起见）突出显示选定的导航栏条目（Bootstrap 将为普通导航栏做的事情）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T06:43:16.097

解决方案是`style="clear: both;"`针对`.tab-content`

# hadoop - HBase put 在第二次插入时失败

> ID：12295297
> 
> 赞同：0
> 
> 时间：2012-09-06T07:48:00.760
> 
> 标签：hadoop, hbase, spring-data

我正在使用 spring data + hbase 将一些值写入 HBase 数据库。不幸的是，HbaseTemplate 似乎在第一次调用后关闭了连接。

我是 Spring 和 HBase/Hadoop 的新手，所以我不知道这是 Spring/HBase 配置问题还是其他愚蠢问题

测试类：

```
package org.springframework.data.hadoop.samples;

import org.apache.hadoop.hbase.client.HTable;
import org.apache.hadoop.hbase.client.Put;
import org.apache.hadoop.hbase.util.Bytes;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.data.hadoop.hbase.HbaseTemplate;
import org.springframework.data.hadoop.hbase.TableCallback;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/hbase-context.xml")
public class WordCountWorkflowTest {

    @Autowired
    private ApplicationContext ctx;

    @Autowired
    private HbaseTemplate hbaseTemplate;

    @Test
    public void testWorkflowNS() throws Exception {
        if (hbaseTemplate == null) {
            throw new NullPointerException("template null!");
        }
        // Write to HBase
        InnerTableCallback itc = new InnerTableCallback("JustaString", 42);
        hbaseTemplate.execute("Wordcount", itc);
        itc = new InnerTableCallback("Anotherstring", 23);
        // Here the HBase insert fails
        hbaseTemplate.execute("Wordcount", itc);
    }

    @Test
    public void testWorkflowNSSucess() throws Exception {
        System.out.println("done");
    }

    /**
     * This is a Inner class providing access to the HBase Table to store the
     * counted words and number of matches.
     * 
     * */
    class InnerTableCallback implements TableCallback<Object> {

        String foundStr;

        int no;

        /**
         * The constructor just saved the given foundStr/no tuple in inner
         * variables.
         * 
         * @param foundstr
         *            string found in the text
         * @param no
         *            number of found matches
         * @return null
         * */
        public InnerTableCallback(String foundStr, int no) {
            this.foundStr = foundStr;
            this.no = no;
        }

        /**
         * This Method puts the given String and number of found matches into
         * the HBase table the column family is "cf1" and the column is
         * "matches". The rowname is the found string.
         * */
        @Override
        public Object doInTable(HTable table) throws Throwable {
            Put p = new Put(Bytes.toBytes(foundStr));
            // Put operation on hbase shell:
            // hbase(main):005:0> put 'testtable', 'myrow-2', 'colfam1:q2',
            // 'value-2'
            // add(byte[] family, byte[] qualifier, byte[] value)
            p.add(Bytes.toBytes("cf1"), Bytes.toBytes("matches"),
                    Bytes.toBytes(new Integer(no).toString()));
            table.put(p);
            return null;
        }
    }
} 
```

hbase-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:hdp="http://www.springframework.org/schema/hadoop"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/hadoop http://www.springframework.org/schema/hadoop/spring-hadoop.xsd">

    <context:property-placeholder location="classpath:batch.properties,classpath:hadoop.properties"
            ignore-resource-not-found="true" ignore-unresolvable="true" />

    <context:component-scan base-package="org.springframework.data.hadoop.samples" />

    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>

    <bean id="hbaseTemplate" class="org.springframework.data.hadoop.hbase.HbaseTemplate" p:configuration-ref="hbaseConfiguration"/>

    <hdp:hbase-configuration>           
    </hdp:hbase-configuration>
</beans> 
```

堆栈跟踪：

```
org.springframework.data.hadoop.hbase.HbaseSystemException: org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@61bb0cc0 closed; nested exception is java.io.IOException: org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@61bb0cc0 closed
    at org.springframework.data.hadoop.hbase.HbaseUtils.convertHbaseException(HbaseUtils.java:42)
    at org.springframework.data.hadoop.hbase.HbaseTemplate.convertHbaseAccessException(HbaseTemplate.java:111)
    at org.springframework.data.hadoop.hbase.HbaseTemplate.execute(HbaseTemplate.java:82)
    at org.springframework.data.hadoop.samples.WordCountWorkflowTest.testWorkflowNS(WordCountWorkflowTest.java:35)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    ....
Caused by: java.io.IOException: org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@61bb0cc0 closed
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:822)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:810)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatchCallback(HConnectionManager.java:1492)
    at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.processBatch(HConnectionManager.java:1377)
    at org.apache.hadoop.hbase.client.HTable.flushCommits(HTable.java:916)
    at org.apache.hadoop.hbase.client.HTable.doPut(HTable.java:772)
    at org.apache.hadoop.hbase.client.HTable.put(HTable.java:747)
    at org.springframework.data.hadoop.samples.WordCountWorkflowTest$InnerTableCallback.doInTable(WordCountWorkflowTest.java:83)
    at org.springframework.data.hadoop.hbase.HbaseTemplate.execute(HbaseTemplate.java:72) 
```

干杯，R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:20:15.117

解决了！

我在我的 maven pom.xml 中使用了 spring-data-hadoop 包 (Milestone) 的旧版本和不推荐使用的版本。我切换到 Snapshot 存储库，它修复了 HBase 表的错误处理。

如果您使用 spring-batch：我必须在新版本的 *context.xml 中更改`<tasklet>`hadoop 的定义。`<job-tasklet>`

来自 XML 解析器的错误消息是：

```
The matching wildcard is strict, but no declaration can be found for element 'tasklet' 
```

希望这可以帮助某人:-)

# msvcrt - MSVCR100 在一台计算机上，但 MSVCR80 在另一台计算机上

> ID：12295302
> 
> 赞同：0
> 
> 时间：2012-09-06T07:48:13.353
> 
> 标签：msvcrt

我正在开发一个依赖 Lua 的应用程序。在我的 Windows XP 机器上，应用程序运行良好，但在我的 Windows 7 机器上，应用程序拒绝启动并抱怨找不到 MSVCR80.dll。我跟踪了dll依赖，发现在XP机器上Lua库依赖于MSVCR100.dll，而在Win 7机器上编译的Lua库依赖于MSVCR80.dll。这非常令人困惑，因为

1.  应用程序和 lua 库是从完全相同的源构建的
2.  我尝试在我的 Win7 机器上卸载并重新安装 MSVC 2010 Redistributable，但无济于事。

有谁知道如何以及从哪里开始寻找此错误的根源？我很乐意提供任何信息，但我什至不确定解决这个问题需要什么样的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:52:24.430

MSVCR* 依赖项由编译器添加。因此，Lua 源是否相同并不重要；您使用两个不同版本的 Visual Studio 编译了该库。

要修复 DLL 依赖问题，请使用 Dependency Walker。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:57:37.627

MSVCR80.dll 是 Microsoft Visual C++ 2005 Redistributable 包的一部分。如果你安装它，它应该可以工作。

可以在此处下载 MSVC 2005 可再发行组件：http: [//www.microsoft.com/en-us/download/details.aspx?id=3387](http://www.microsoft.com/en-us/download/details.aspx?id=3387)

# vb6 - 运行时错误 380，vb6 中的无效属性

> ID：12295305
> 
> 赞同：0
> 
> 时间：2012-09-06T07:48:31.193
> 
> 标签：vb6

我在 vb6 中开发了一个在 Windows XP 中正常运行的应用程序，但是当我尝试在 Windows 7 上运行它时，它显示运行时错误 380，无效属性。这是导致错误的代码：

```
Private Sub getData()
    txtID.Text = rs!emp_id & ""

    txtDept.Text = rs!dept_name & ""

    txtDesig.Text = rs!desig_name & ""

    txtName.Text = rs!emp_name & ""

    txtPFNo.Text = rs!PF_ACC_NO & ""

    cdDate.Text = Format(rs!PF_DATE, "dd/mm/yyyy") '(This line produces the error)

    txtOwnSubs.Text = rs!SubsO & ""

    txtUCont.Text = rs!ContU & ""

    txtOptional.Text = rs!Optional & ""

    txtLoanSanc.Text = rs!LoanSanc & ""

    txtLoanRec.Text = rs!LoanRecovery & ""

    txtInt.Text = rs!RateOfInt & ""

    txtOSubs.Text = rs!OpeningO & ""

    txtOcont.Text = rs!OpeningU & ""

    txtCSubs.Text = rs!ClosingO & ""

    txtCCont.Text = rs!ClosingU & ""

    txtIntDurOwn.Text = rs!InterestO & ""

    txtIntDurCont.Text = rs!InterestU & ""

    txtIntUptoOwn.Text = rs!CInterestO & ""

    txtIntUptoCont.Text = rs!CInterestU & ""

    txtTotIntO.Text = rs!CInterestO & ""

    txtTotIntC.Text = rs!CInterestU & ""

    txtWithdrawn.Text = rs!withdrawn & ""

    If rs!Type & "" = "N" Then

    cboType.ListIndex = 0

    Else

    cboType.ListIndex = 1

    End If

End Sub 
```

注意：我从那里创建了 DateCheck.ocx，我正在使用 cdDate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:02:00.953

如果`cdDate`是 a `DateTimePicker`，您很可能应该使用该`.Value`属性而不是`.Text`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:23:01.630

将该行分成多个步骤以找出导致错误的部分。

```
Dim vnt As Variant
vnt = rs!PF_DATE
Dim sDate As String 
sDate$ = Format(vnt, "dd/mm/yyyy")
cdDate.Text = sDate 
```

然后进一步调查:)

# javascript - 返回到backbone.js 路由器中的索引

> ID：12295309
> 
> 赞同：1
> 
> 时间：2012-09-06T07:49:03.870
> 
> 标签：javascript, model-view-controller, backbone.js, url-routing

只是想知道，在backbone.js中返回索引的正确方法是什么？所以这是我的代码的大纲。我有一个路由器，它在其中创建一个视图实例并传递路由器的当前实例。

```
var AppRouter = Backbone.Router.extend({
    callMasterViefw: function(){
        MasterView.initialize(this);
    },
}) 
```

在 内部`MasterView`，我创建了 的实例`MasterView`并将路由器也分配给它。我有一个名为 的函数，`reRouteToIndex`基本上我想重新路由到索引页面。

```
MasterView= Backbone.View.extend({
    render: function(){},
    reRouteToIndex(){
        this.router.navigate("", {trigger: true,replace: true});
    },
}); 
```

所有这些都有效，但问题是当我重定向到索引时，我返回到类似`www.test.com/index.html/#`. 重要的是要注意最后的#。我想知道是否有办法在没有这样的情况下路由到原始`#`路径`www.test.com/index.html`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:00:56.363

您可以启用 （例如`pushState`，但您需要配置您的网络服务器以使用（或等效）。`.navigate()``.navigate({pushState: true, trigger: true})``mod_rewrite`

# android - 在这种情况下如何从 Activity 获取数据？

> ID：12295310
> 
> 赞同：0
> 
> 时间：2012-09-06T07:49:02.903
> 
> 标签：android, android-intent, android-activity

```
Activity_A:

{
   //calling Activity B where i find the user current location lat and lng
   Intent intent = new Intent(Activity_A.this, Activity_B.class);
   startActivity(intent);
}

Activity_B
{
   //after getting user lat and lng, use them in Activity_C to show the initial marker position
   Intent intent = new Intent(Activity_B.this, Activity_C.class);
   startActivity(intent);
   //i don't this Activity_B to show up on back press in Activity_C hence finish(), anyways this Activity_B has no layout
   finish();
}

Activity_C:

{
   //Show a map with marker at position using lat, lng values from Activity_B, allow user to drag the marker and get the new lat, lng. and then finish this Activity to go to Activity_A
   finish();
} 
```

我希望这个 Activity_C 在没有任何共享首选项或全局变量的情况下将新 lat、lng 的值发送回 ACtivity_A，我的意思是使用`startActivityForResult`和`onACtivityResult`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:52:02.320

使用`setResult`里面的活动`A`获取里面的所有数据`OnActivityResult`。但是从 A 到 B 开始活动，您需要使用`startActivityForResult`结果代码。否则，您可以`broadcast receivers`独立于您可以在任何活动类中发送和接收的所有活动来使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:52:23.033

```
You can try chaining the activities like this::

Activity_A:

{
   //calling Activity B where i find the user current location lat and lng
   Intent intent = new Intent(Activity_A.this, Activity_B.class);
*****startActivityForResult******

   startActivity(intent);
}

Activity_B
{
   //after getting user lat and lng, use them in Activity_C to show the initial marker position
   Intent intent = new Intent(Activity_B.this, Activity_C.class);
   startActivity(intent);
   //i don't this Activity_B to show up on back press in Activity_C hence finish(), anyways this Activity_B has no layout
*****startActivityForResult******
   finish();
}

Activity_C:

{
   //Show a map with marker at position using lat, lng values from Activity_B, allow user to drag the marker and get the new lat, lng. and then finish this Activity to go to Activity_A
   finish();
} 
```

# android - 为什么 C2DM/GCM 不使用 SMS 作为传输来节省电池寿命？

> ID：12295316
> 
> 赞同：1
> 
> 时间：2012-09-06T07:49:39.227
> 
> 标签：android, android-c2dm, google-cloud-messaging, battery

据我了解，GCM 使用[长轮询推](http://en.wikipedia.org/wiki/Push_technology#Long_polling)送来实现即时推送。

与 SMS 或类似于黑莓推送的技术（可能使用特定的[GSM MAP](http://en.wikipedia.org/wiki/Mobile_Application_Part)）通知手机通过 TCP 联系服务器获取有效负载的技术相比，这会耗费大量电池。

谷歌似乎没有采用 GSM 推送机制来节省电池寿命的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T07:55:16.253

我不知道确切，但可能是因为某些设备可能不包含 SIM 卡，例如某些平板电脑没有 SIM 卡功能，因此无法在这些设备上发送 SMS。

因此，要为所有设备提供通用解决方案，他们可能会支持这种机制。

# extjs - Ext JS 4.1 - 用户定义的验证不绑定按钮

> ID：12295320
> 
> 赞同：0
> 
> 时间：2012-09-06T07:49:52.733
> 
> 标签：extjs, extjs4, extjs4.1

我定义了一个验证，它控制 id 是否唯一以绑定按钮。它**适用于内置验证**，但**它不绑定我自己的验证**。

这是我尝试过的：

**查看 - 表单面板：**

```
Ext.define(appName + '.view.user.UserForm', {
    extend: 'Ext.form.Panel',
    requires: [appName + '.view.language.LanguageCombo'],
    alias: 'widget.userform',
    //  title       : 'User Form',
    iconCls: 'icon-form',
    frame: true,
    padding: '5 5 0 5',
    border: true,
    buttonAlign: 'right',
    width: '100%',
    //    height    : 200,
    monitorValid: true,
    bodyPadding: 10,
    fieldDefaults: {
        labelAlign: 'left',
        labelWidth: 110,
        anchor: '98%',
        allowBlank: false,
        selectOnFocus: true,
        msgTarget: 'side'
    },
    initComponent: function () {
        var me = this;

        this.title = bundle.getMsg('userform.title');

        this.items = [{
            xtype: 'numberfield',
            minValue: 1,
            fieldLabel: bundle.getMsg('userform.field.recordId'),
            name: 'recordId',
            itemId: 'recordId'
        }, {
         ];

        this.btnReset = Ext.create('Ext.ux.button.ResetButton', {
            handler: function (btn) {
                me.getForm().reset();
            }
        });

        this.btnSubmit = Ext.create('Ext.ux.button.SaveButton', {
            disabled: true, 
            formBind: true
        });

        this.buttons = [me.btnReset, me.btnSubmit];

        this.callParent(arguments);
    }
}); 
```

**控制器方法：**

```
var form = this.getUserForm();
if (field.getValue() && field.getValue() != '') {
    Ext.Ajax.request({
        url: 'user/chkRecordIdUnique.ajax',
        method: 'POST',
        params: {
            recordId: field.getValue()
        },
        success: function (response, options) {
            var res = Ext.decode(response.responseText);
            if (!res.success) {
                field.markInvalid(bundle.getMsg('record.taken'));
                form.getForm().markInvalid(bundle.getMsg('record.taken'));
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:39:43.180

根据文档，`markInvalid`实际上并没有改变字段的有效性。它只是应用视觉样式，就好像该字段有错误一样。并且没有`isValid`要设置的属性。所有有效性都由立即调用该`isValid`方法来确定。

就目前而言，Ext JS 表单本身不支持异步验证。它假定所有验证都在客户端完成，或者服务器将执行验证。如果您想在启用保存按钮之前执行 Ajax 调用以确定表单是否有效，我建议您使用成功回调创建自己的验证方法。如果 Ajax 调用成功并且表单的其余部分有效，则手动启用保存按钮。然后在表单更改时，您可以再次禁用保存按钮。

旁注：`width`应该是数字，而不是百分比。

# oracle - Glorp 和 Oracle：限制查询结果

> ID：12295322
> 
> 赞同：6
> 
> 时间：2012-09-06T07:50:02.830
> 
> 标签：oracle, limit, smalltalk

我在 VisualWorks 和 Oracle 数据库中使用 Glorp。由于 Oracle 不知道 LIMIT 命令，因此以下查询将返回myTable 中 WHERE 子句计算结果为 true 的**所有**记录。

```
q := Glorp.SimpleQuery
       returningManyOf: MyTable
       where: [:each | each name = 'test']
       limit: 10.
q orderBy: [:each | each id descending].
results:= aGlorpSession execute: q. 
```

我将如何将 ROWNUM 合并到此 Glorp 查询中？

//编辑生成的SQL：

```
SELECT t1.id, t1.name
 FROM MyTable t1
 WHERE (t1.name= ?) ORDER BY t1.id DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:56:21.417

即使您*可以*将 ROWNUM 添加到此查询中，您仍可能无法获得您想要的结果。问题是 WHERE 子句在 ORDER BY 之前应用 - 因此，通过限制返回的前 10 行，您将获得这 10 行，然后对它们进行排序。这是一个例子：

```
CREATE TABLE order_test(seq_num  NUMBER);

INSERT INTO order_test(seq_num) VALUES(20);
INSERT INTO order_test(seq_num) VALUES(19);
INSERT INTO order_test(seq_num) VALUES(18);
INSERT INTO order_test(seq_num) VALUES(17);
INSERT INTO order_test(seq_num) VALUES(16);
INSERT INTO order_test(seq_num) VALUES(15);
INSERT INTO order_test(seq_num) VALUES(14);
INSERT INTO order_test(seq_num) VALUES(13);
INSERT INTO order_test(seq_num) VALUES(12);
INSERT INTO order_test(seq_num) VALUES(11);
INSERT INTO order_test(seq_num) VALUES(10);
INSERT INTO order_test(seq_num) VALUES(09);
INSERT INTO order_test(seq_num) VALUES(08);
INSERT INTO order_test(seq_num) VALUES(07);
INSERT INTO order_test(seq_num) VALUES(06);
INSERT INTO order_test(seq_num) VALUES(05);
INSERT INTO order_test(seq_num) VALUES(04);
INSERT INTO order_test(seq_num) VALUES(03);
INSERT INTO order_test(seq_num) VALUES(02);
INSERT INTO order_test(seq_num) VALUES(01);

SELECT * FROM order_test WHERE ROWNUM < 10 ORDER BY seq_num; 
```

查询返回

```
12
13
14
15
16
17
18
19
20 
```

在我的系统上。我怀疑你想要的是相当于

```
SELECT *
  FROM (SELECT * FROM ORDER_TEST ORDER BY SEQ_NUM)
  WHERE ROWNUM < 10 
```

返回 1 到 9。

我不知道您是否或如何在 Glorp 中嵌套查询。（FWIW - 我知道并喜欢 Smalltalk，但出于诸如此类的原因我讨厌持久性框架）。YMMV，显然。

（顺便说一句 - 考虑一分钟，您也许可以修改 Glorp.SimpleQuery 上的 #limit: 方法以将与 ROWNUM 的比较注入 WHERE 子句 - 但正如我上面所说，结果可能仍然不是预期的. 一个实现留给感兴趣的读者作为练习:-)。

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:04:15.343

首先，我建议使用不同的语法，如 Glorp.Query 读取：...您真的不想预先指定 SimpleQuery 类，并且读取：比 returnManyOf: 短得多，并且完成相同的事情。

目前我面前没有软件，但我很确定在 Oracle 上 limit: 命令应该转换为使用 rownum。你看到这个生成了什么 SQL？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T16:20:19.990

在 Smalltalk.Glorp.DatabasePlatform 我添加了两个空方法 #printPreLimitWrapper:on: 和 #printPostLimitWrapper:on: 我在 Smalltalk.Glorp.OraclePlatform 中覆盖：

```
printPreLimitWrapper: anInteger on: aCommand
    aCommand nextPutAll: ' SELECT * FROM ( '

printPostLimitWrapper: anInteger on: aCommand

    aCommand nextPutAll: ' ) WHERE ROWNUM <= '.
    anInteger printOn: aCommand.
    aCommand nextPutAll: ' '. 
```

在 Smalltalk.Glorp.SimpleQuery 我添加了：

```
printPostLimitWrapperOn: aCommand
    self hasLimit ifFalse: [^self].
    self platform printPostLimitWrapper: self limit on: aCommand.

printPreLimitWrapperOn: aCommand
    self hasLimit ifFalse: [^self].
    self platform printPreLimitWrapper: self limit on: aCommand. 
```

在 Smalltalk.Glorp.QuerySelectCommand 我改变了以下方法：

```
printSQL
    query printPreLimitWrapperOn: self.
    stream nextPutAll: 'SELECT '.
    query printSelectFieldsOn: self.
    self findBoundExpressions.
    query printTablesOn: self.
    query printWhereClauseOn: self.
    query printJoinsOn: self.
    query printOrderingOn: self.
    query printGroupByOn: self.
    query printPostLimitOn: self.
    query printOffsetOn: self.
    query printPostLimitWrapperOn: self. 
```

# r - 如何有效地读取和 rbind 大型 CSV 文件？

> ID：12295325
> 
> 赞同：2
> 
> 时间：2012-09-06T07:50:13.473
> 
> 标签：r, csv

我有 20 个大型 CSV（每个 100-150MB）文件，我想在 R 中加载并将它们 rbind 到一个大文件中并执行我的分析。读取每个 CSV 文件仅在一个内核上执行，大约需要 7 分钟。我使用的是 64 位 8 核 linux 和 16GB RAM，所以资源应该不是问题。

有没有办法更有效地执行这个过程？我也对其他（开源 linux）软件持开放态度（例如将 CSV 文件绑定到不同的程序中并在 R 中加载）或任何可以使这个过程更快的东西。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:34:45.520

也许你想要一个像[`paste`](http://ss64.com/bash/paste.html). 这是一个合并文件行的bash函数。

# servlets - 浏览器显示错误数据

> ID：12295339
> 
> 赞同：1
> 
> 时间：2012-09-06T07:51:09.657
> 
> 标签：servlets

我有以下代码从文本文件中读取数据并打印到浏览器。但是当它获得像“abc - abc”这样的数据时，在浏览器中它会显示像“￢ﾀﾓ”这样的垃圾字符......可能是什么问题？fis 指向文本文件。从文本文件中读取数据并写入浏览器。thnx 先进。

```
 f = new File(URLDecoder.decode(filePathStr), URLDecoder.decode(fileName));
        fis = new FileInputStream(f);
                    res.setHeader("Pragma", "no-cache");
        res.setHeader("Expires", "-1");
        res.setHeader("Cache-Control", "no-cache");
        req.setCharacterEncoding("UTF-8");
        res.setContentType("text/html;charset=UTF-8");
        out = res.getWriter();

        for (int i = fis.read(); i != -1; i = fis.read()) {
            if (i == '\n')
                out.print("</BR>");
            else
                out.write((byte) i);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:02:59.607

您的文件可能不是 UTF-8。我会读取连接数组中所有字节的所有文件，然后用它创建一个字符串，然后我会打印它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:43:14.060

尝试手动输出一些东西，比如

```
out.print("υτφ-8 chars"); 
```

他们打印正确吗？如果不看看这篇文章[如何让 UTF-8 在 Java webapps 中工作？](https://stackoverflow.com/questions/138948/how-to-get-utf-8-working-in-java-webapps)并确保遵循有关如何在网页中显示 UTF-8 字符的 4 个步骤。

如果它们打印正确，那么问题在于 FileInputStream 以及您如何读取文件。

您可以尝试以下方法

```
FileInputStream fis = new FileInputStream(f);
InputStreamReader isr = new InputStreamReader(fis, "UTF8"); 
```

**新更新**

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        File f = new File("C:\\TEST.TXT");
        FileInputStream fis = new FileInputStream(f);
        InputStreamReader isr  = new InputStreamReader(fis, "UTF-8");
        response.setHeader("Pragma", "no-cache");
        response.setHeader("Expires", "-1");
        response.setHeader("Cache-Control", "no-cache");
        response.setCharacterEncoding("UTF-8");
        response.setContentType("text/html;charset=UTF-8");
        out = response.getWriter();
        for (int i = isr.read(), k = 0; i != -1; i = isr.read(), ++k) {
            if (i == '\n') {
                out.print("</BR>");
            } else {
                out.write(i);
            }
            out.flush();
        }
    } finally {
        out.close();
    }
} 
```

上面的代码应该可以正常工作，我已经测试过了

# c - 使用指定为 #define 的数字的移位运算符

> ID：12295341
> 
> 赞同：2
> 
> 时间：2012-09-06T07:51:13.103
> 
> 标签：c, bit-shift

有人可以知道这个定义的含义吗

```
#define RECV_BUFFER_LENGTH 4096

int main()
{

unsigned char buffer[RECV_BUFFER_LENGTH >> 1];
...
} 
```

缓冲区字符串的长度是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T07:55:00.223

你可以这样翻译：

```
unsigned char buffer[RECV_BUFFER_LENGTH >> 1];
unsigned char buffer[4096 >> 1]; // replace RECV_BUFFER_LENGTH by its definition 
```

`>>`是按位右移运算符。`4096 >> 1`表示将数字右移一位`4096`（以二进制表示）。的二进制表示`4096`修改如下：

```
1000000000000 <-- this is 4096
 100000000000 <-- after shifting right by 1 bit, this is 2048 
```

这给出了：

```
unsigned char buffer[2048]; // buffer string is a 2048 element char array. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T08:03:50.997

这是有人认为他们会通过不使用更具可读性来获利

```
unsigned char buffer[RECV_BUFFER_LENGTH / 2] 
```

实际上这是在编译时评估的。如果不是这样，优化器可以将其转化为更快的可读性差的转变。

# java - 如何在 Java 中更改按下/单击/选择按钮的外观？

> ID：12295343
> 
> 赞同：2
> 
> 时间：2012-09-06T07:51:14.837
> 
> 标签：java, swing, user-interface, jbutton, selected

我想在按钮处于按下/单击/选择状态时更改按钮的外观。

更具体地说，我想将它的边框更改`BorderFactory.createLoweredBevelBorder()`为按下/单击/选择的时间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:02:40.683

请看下面的代码。它在按下时设置边框并在释放时重置它。您也可以在`mouseEntered`/上执行此操作`mouseExited`。

```
button.addMouseListener(new MouseAdapter() {
  public void mousePressed(MouseEvent e) {
    button.setBorder(BorderFactory.createLoweredBevelBorder());
  }

  public void mouseReleased(MouseEvent e) {
    button.setBorder(null);
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:10:12.440

看看[JButtons JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)的 ButtonModel ，那里[实现了你所有的要求](https://stackoverflow.com/a/5755124/714968)

# javascript - requireJS：移植 C++ 类，不想两次声明类名

> ID：12295346
> 
> 赞同：1
> 
> 时间：2012-09-06T07:51:24.380
> 
> 标签：javascript, c++, requirejs

我正在将 C++ 项目移植到 Javascript。我想保持面向对象的设计，所以我决定使用 requireJS 将移植的类组织为模块。我模拟这样的继承：

```
define(
[
],

function()
{
    'use strict';

    function Base( arguments )
    {
    }

    function Inherited( arguments )
    {
        Base.call( this, arguments );
    }

    Inherited.prototype = Object.create( Base.prototype );

    return {
                Inherited   : Inherited
            };
}); 
```

假设我将此模块保存到文件“inherited.js”并在另一个模块中要求它：

```
define(
[
    'inherited'
],

function( Inherited )
{
    'use strict';

    function Whatever( arguments )
    {
        var inherited = new Inherited.Inherited( arguments );
    }

    return {
                Whatever    : Whatever,
            };
}); 
```

现在困扰我的是，我必须在创建对象时两次声明类名，一次是模块名，一次是函数/类的名称。

相反，我希望能够调用：

```
var inherited = new Inherited( arguments ); 
```

我可以通过在“inherited.js”中返回一个匿名函数来实现这一点，但是我不能再定义继承依赖项了。

我意识到模块背后的想法是防止污染全局命名空间 - 请记住，上面发布的代码仅在我的库中使用，该库在用于实际应用程序之前包装在单个模块中。

所以要实例化函数/类*Inheritated*我必须输入*Library.Inherited.Inherited*但我更喜欢*Library.Inherited*。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:44:58.283

只需返回 Inherited 构造函数：

```
define(function () {
  function Inherited() {
  }

  Inherited.prototype = {
  };

  return Inherited;
}); 
```

模块导出值可以是可返回类型。

# jquery - 如何在后台预加载图像

> ID：12295351
> 
> 赞同：0
> 
> 时间：2012-09-06T07:51:51.523
> 
> 标签：jquery, photoswipe

使用 ajax，我得到了一组图像 url，创建`ul`列表并将其添加到页面中。之后，我打开 Photoswipe 滑块来显示这些图像。手机（ipod、htc）出现问题：图片没有时间加载。有没有办法在打开滑块之前将所有图像加载到临时位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:54:04.380

您可以在页面加载时创建 Image 对象，这将导致图像从远程服务器检索并存储在浏览器缓存中而不显示在页面上。当您`<img>`在页面上包含引用相同远程图像的元素时，它将从浏览器缓存中提供并或多或少地立即显示：

```
new Image().src = 'http://myserver.com/myimage.jpg';
...
<img src="http://myserver.com/myimage.jpg" /> 
```

无需保存对`Image`对象的引用，只需按所示分配`src`属性就足以让浏览器缓存它们。

# iphone - 如何更改导航栏上 UIBarButtonItem 的字体颜色/文本颜色

> ID：12295352
> 
> 赞同：30
> 
> 时间：2012-09-06T07:51:55.193
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我以编程方式向导航栏添加了一个栏按钮，如下所示

```
UIBarButtonItem *cancel = [[UIBarButtonItem alloc] initWithTitle:@"CANCEL" style:UIBarButtonItemStyleBordered target:self action:@selector(goToPreviousView)];
    self.navigationItem.leftBarButtonItem = cancel; 
```

现在我想以**RED Color 显示文本“CANCEL”**。

我的意思是我需要更改**bar button items 上的文本**，而不是按钮的色调。

怎么做？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-09-06T07:55:09.907

看一下这个 ：-

```
 UIBarButtonItem *cancel = [[UIBarButtonItem alloc] initWithTitle:@"Title" style:UIBarButtonItemStyleBordered target:nil action:nil];
[cancel setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys: [UIColor redColor],  UITextAttributeTextColor,nil] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-04-25T01:52:40.580

只是现代 Obj-C 语法的 iOS7 更新：

```
[barButtonItem setTitleTextAttributes:@{NSForegroundColorAttributeName:[UIColor redColor]} forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-08T17:19:37.100

```
UITextAttributeTextColor //Is deprecated on iOS 7\. 
```

此代码用于从外观代理更改文本颜色。

```
[[UIBarButtonItem appearance] setTintColor:[UIColor redColor]]; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-12-18T06:04:52.523

这是更新的 swift 4.0 版本代码：

```
let reset = UIBarButtonItem(title: "Reset All", style: .plain , target: self, action: #selector(self.resetButtonClicked(_ :) ))
reset.setTitleTextAttributes([NSAttributedStringKey.foregroundColor: UIColor.red], for: .normal) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-09-06T07:58:25.473

另一种方法是：-

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundImage:[UIImage imageNamed:@"delete.png"] forState:UIControlStateNormal];
[button setTitle:@"Delete" forState:UIControlStateNormal];
 button.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:12.0f];
[button.layer setCornerRadius:4.0f];
[button.layer setMasksToBounds:YES];
[button.layer setBorderWidth:1.0f];
[button.layer setBorderColor: [[UIColor grayColor] CGColor]];
button.frame=CGRectMake(0.0, 100.0, 60.0, 30.0);
[button addTarget:self action:@selector(batchDelete)  forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem* deleteItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-06T09:45:59.443

此代码用于更改导航栏上 UIBarButtonItem 的文本颜色：

```
UILabel *lblTotCaratteri = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 25)];
lblTotCaratteri.textAlignment = UITextAlignmentCenter;
lblTotCaratteri.font = [UIFont italicSystemFontOfSize:13.0];
lblTotCaratteri.textColor = [UIColor redColor];
lblTotCaratteri.backgroundColor = [UIColor clearColor];
lblTotCaratteri.adjustsFontSizeToFitWidth = YES;
lblTotCaratteri.text = @"Cancel";

UIBarButtonItem *lblCaratteri = [[UIBarButtonItem alloc] initWithCustomView: lblTotCaratteri];

self.navigationItem.rightBarButtonItem = lblCaratteri; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-09-01T10:31:19.590

老问题，这是 swift 2.2 解决方案：

```
 let cancel = UIBarButtonItem(title: "CANCEL", style: .Bordered, target: self, action: #selector(goToPreviousView))
    cancel.setTitleTextAttributes([NSForegroundColorAttributeName: UIColor.redColor()], forState: .Normal)
    self.navigationItem.leftBarButtonItem = cancel 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-13T12:30:21.983

**斯威夫特 4.2**

```
let doneButton = UIBarButtonItem(title: "Done", style: .plain, target: self, action: nil)
doneButton.setTitleTextAttributes([.foregroundColor: UIColor.red], for: .normal) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-02-08T13:56:50.127

## 斯威夫特 4.2

**UIBarButtonItem 使用属性文本：**

```
func createCancelButton() {
        guard let font = UIFont(name: "OpenSans", size: 12) else { return }
        let cancelButton = UIBarButtonItem(title: "Logout", style: .plain, target: self, action: #selector(cancelTapped))
        cancelButton.setTitleTextAttributes([NSAttributedString.Key.foregroundColor : UIColor.blue, NSAttributedString.Key.font : font], for: .normal)
        navigationItem.leftBarButtonItem = cancelButton
    }

    @objc func cancelTapped() {
        print("cancelTapped")
    } 
```

**UIBarButtonItem 使用纯文本：**

```
func createCancelButton() {
        let cancelButton = UIBarButtonItem(title: "Logout", style: .plain, target: self, action: #selector(cancelTapped))
        cancelButton.tintColor = UIColor.blue
        navigationItem.leftBarButtonItem = cancelButton
    }

    @objc func cancelTapped() {
        print("cancelTapped")
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-04-05T05:21:36.293

UITextAttributeTextColor //在 iOS 7 上已弃用。

像这样设置 BarButtonItem 的颜色

```
 [_barButtonItem setTitleTextAttributes:
                    [NSDictionary dictionaryWithObjectsAndKeys: 
                             [UIColor colorWithRed:250/255.0 
                                             green:240/255.0 
                                             blue:230/255.0 
                                             alpha:1.0],  
                             NSForegroundColorAttributeName,nil] 
                    forState:UIControlStateNormal]; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-21T10:24:26.067

如果您需要设置与默认外观不同的颜色，请使用：

```
barButtonItem.tintColor = .red 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-21T17:24:58.217

如果不是您的项目，而您只需要添加一些更改，每个人都应该做的主要事情是检查

```
[UIBarButtonItem appearance] 
```

我浪费了很多时间才意识到有人设置了错误的 UIBarButtonItem 外观

# java - 如何为虚拟屏幕运行我的 Java 应用程序？

> ID：12295354
> 
> 赞同：2
> 
> 时间：2012-09-06T07:51:57.423
> 
> 标签：java, linux, swing, graphics, xorg

在 Linux 中，我们有虚拟屏幕，例如桌面 1、2、3、4。大多数情况下，我们使用桌面 1（屏幕 1，带有一台显示器）。

现在，我的问题是如何告诉我的 java 应用程序在桌面 2 上启动（屏幕 2，带有一台显示器）

默认情况下，当我运行 java -cp /var/tmp/SystemX.jar run.X 时，它将在桌面 1 的屏幕 1 中启动。这不是我的情况。

尝试：以下但没有帮助导致，它适用于双显示器场景。不是我所期待的。

```
 screen = Toolkit.getDefaultToolkit().getScreenSize();
  GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
  GraphicsDevice[] screenDevices = ge.getScreenDevices();
  for (int i = 0; i < screenDevices.length; i++) {
    System.out.println(screenDevices[i].getIDstring());

    int screenWidth = 1024;
    int screenHeight = 764;
    if (screenDevices[i].getDisplayMode()!=null) {
      DisplayMode dm = screenDevices[i].getDisplayMode();
      screenWidth = dm.getWidth();
      screenHeight = dm.getHeight();        
    }
    System.out.println("[myResolution]: " + screenWidth + " " + screenHeight);
    screen.width = screenWidth;
    screen.height = screenHeight;
  } 
```

**跟进：**

```
#!/bin/sh
(export DISPLAY=:0.0 && java -cp /var/tmp/SystemX.jar run.X) & (wmctrl -r "WINDOW_TITLE" -t DESKTOP_NUMBER) 
```

*** 但是，如果我的应用程序没有窗口标题，边框较少怎么办？我怎么告诉 wmctrl ？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:13:39.820

无边界应用程序仍应具有窗口标题。（即 xfce4-panel 显示。）您可以使用以下命令检查它们是什么：

wmctrl -l

从命令行。如果您很难确定哪个窗口是您的，请在打开它之前尝试该命令，然后在它打开后尝试。这样，您只需寻找新窗口即可。

# attributes - 验证表单字段值的嵌套属性已清除

> ID：12295359
> 
> 赞同：0
> 
> 时间：2012-09-06T07:52:06.553
> 
> 标签：attributes, nested, nested-attributes, formfield

我有用户表格。其中用户表有用户名和电子邮件地址，另一个用户配置文件表有 user_id、位置等。我使用下面的表格

我已经完成了用户 email_Addreess 唯一性的验证。如果发生验证，那么我会渲染到同一页面。

我的问题是，如果验证发生并将城市字段中的值呈现到同一页面，位置值字段被清除。但值仍保留在其他字段中。请尽快回复我

```
<%= form_for @user_usr, :url => { :action => "provider_submit" } do |f| %>
<%=params.inspect%>
  <% @user_usr.build_user_profile_pfl%>
  <% if @user_usr.errors.any? %>
    <div id="error_explanation">
      <ul>
        <% @user_usr.errors.each_with_index do |msg, i| %>
          <!--for valdiation -->
          <li><%= msg[1] %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  username<%= f.text_field :username_usr,:id=>"p_name",:name=>"p_name", :class=>"lt textbox_provider",:maxlength => 50,:style=>"outline: none;",:onclick =>"focusChangeBorderColor('p_name');",:onblur=>"blurChangeBorderColor('p_name')",:onchange=>"removeunwantedSpace(this.value)", :tabindex => '1'%>
  email<%= f.text_field :email_usr,:id=>"p_email",:name=>"p_email", :class=>"lt textbox_provider",:maxlength => 50,:style=>"outline: none;",:onclick =>"focusChangeBorderColor('p_email');",:onblur=>"blurChangeBorderColor('p_email')",:onchange=>"removeunwantedSpace(this.value)", :tabindex => '2'%>

  <%= f.fields_for :user_profile_pfl do |builder| %>
    City <%= builder.text_field :city,:id=>"b_name",:name=>"b_name", :class=>"lt textbox_provider",:maxlength => 50,:style=>"outline: none;",:onclick =>"focusChangeBorderColor('b_name');",:onblur=>"blurChangeBorderColor('b_name')",:onchange=>"removeunwantedSpace(this.value)", :tabindex => '2'%>
  <%end%>
  <p><%= f.submit "Submit" %></p>
<%end%> 
```

# .net - 如果依赖于枚举，Structuremap 无法解析实例

> ID：12295360
> 
> 赞同：1
> 
> 时间：2012-09-06T07:52:16.273
> 
> 标签：.net, dependency-injection, ioc-container, structuremap

我有一个集成测试，它在代码中初始化一个测试 wcf 服务主机。最近集成了 Structuremap 和 wcf，现在 wcf 基础设施使用 structuremap 来创建服务实例。
我托管的服务之一取决于枚举。
该服务的配置如下所示：

```
public class MyService
{
    MyService(MyEnum enum)
    {
       ...
    }
}

For<MyService>().Use<MyService>().Ctor<MyEnum>().Is(MyEnum.Value); 
```

当我尝试解析服务时，我收到结构映射错误 202（没有为插件系列“MyNamespace.MyService”注册默认实例）

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T22:04:30.683

只需向工厂委托注册类型：

```
For<MyService>().Use(() => new MyService(MyEnum.Value)); 
```

# mysql - 在线 Mysql 和 SQL Server 数据库之间的数据传输

> ID：12295363
> 
> 赞同：0
> 
> 时间：2012-09-06T07:52:22.010
> 
> 标签：mysql, sql, sql-server, sql-server-2008, synchronization

我想在 Mysql 和 SQL Server 数据库之间传输数据，但两者都是在线托管的。

我尝试使用 odbc 来做这件事，但没有奏效。这项任务的最佳解决方案是什么？ODBC/Web 服务/其他方法？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:42:47.097

你可以看看微软同步框架，它非常灵活，可以处理不同的数据库。

[http://msdn.microsoft.com/en-us/sync/default](http://msdn.microsoft.com/en-us/sync/default)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:54:26.237

已经存在一些数据库同步工具。我可以推荐的一个很棒的工具是**[Navicat Premium](http://www.navicat.com/)**。该工具支持不同的服务器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T09:37:04.113

创建您自己的数据同步应用程序。创作并不难。

# jquery - 不要执行href jquery

> ID：12295366
> 
> 赞同：2
> 
> 时间：2012-09-06T07:52:28.817
> 
> 标签：jquery

> **可能重复：**
> [如果条件为假，则 Jquery 阻止默认](https://stackoverflow.com/questions/9376089/jquery-if-conditions-false-then-prevent-default)

我有这段代码，它运行良好，但我希望它是动态的。

```
$(".nav a").click(function () {     
    var getid = $(this).attr('id');
    $("#background-wrapper").fadeOut("slow");
    $("#page_box").fadeOut("slow");         
    $("header").fadeOut("slow");
    $("footer").fadeOut("slow", function () {
        window.location = getid+".php";
    });
}); 
```

我想先执行淡出，然后再使用 href 引导它。

我想要的是这个

```
$(".nav a").click(function () {     
    var getid = $(this).attr('id');
    $("#background-wrapper").fadeOut("slow");
    $("#page_box").fadeOut("slow"); 
    $("header").fadeOut("slow");
    $("footer").fadeOut("slow");
}); 
```

然后触发这个之后

```
.nav a = href = "link" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T07:56:53.350

您需要先使用`event.preventDefault()`停止链接行为，然后手动重定向用户。尝试这个：

```
$(".nav a").click(function (e) {     
    e.preventDefault();

    var getid = $(this).attr('id');
    $("#background-wrapper").fadeOut("slow");
    $("#page_box").fadeOut("slow");         
    $("header").fadeOut("slow");
    $("footer").fadeOut("slow", function () {
        location.assign = getid + ".php";
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:59:30.310

尝试这个：

```
$(".nav a").click(function (e) {     

    e.preventDefault(); /*  If this method is called, the default action of the event will not be triggered. e.g clicked anchors will not take the browser to a new URL */

    var pageUrl = this.id + ".php";

    $("#background-wrapper").fadeOut("slow");
    $("#page_box").fadeOut("slow"); 
    $("header").fadeOut("slow");
    $("footer").fadeOut("slow", function () {
        window.location.replace(pageUrl);
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:02:55.923

也许以下内容对您有用？

```
$(".nav a").click(function (e) {     
    e.preventDefault();
    var pageUri = $(this).attr('id') + '.php';
    $("#background-wrapper, #page_box, header, footer").fadeOut('slow', function () {
        window.replace(pageUri)
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:01:15.597

试试这个：

```
$(".nav a").click(function (e) {   
    e.preventDefault();
    var $ele = $(this);
    $("#background-wrapper, #page_box, header, footer").fadeOut("slow", function () {
        window.location = $ele.attr('id')+".php";
    });
}); 
```

# powershell - 如何对永远运行的 Start-job 脚本块进行故障排除？

> ID：12295369
> 
> 赞同：0
> 
> 时间：2012-09-06T07:52:35.023
> 
> 标签：powershell, start-job

我在对开始作业中使用的脚本块进行故障排除时遇到了困难。

基本上我想获得服务器的 WMI 属性。如果我从 Powershell 发出以下命令，它就可以工作。

```
c:/>$wmi=Get-WmiObject -class Win32_OperatingSystem -computer servername 
```

但是，如果我在 start-job 的脚本块中运行该命令，该作业将永远运行。

```
c:/> start-job -argumentList servername -scriptblock {$wmi=Get-wmiobject 
-class win32_operatingsystem -computer $args[0]}

C:/> get-job
Id   Name    State     HasMoreData   Location    Command
--   ----    -----     -----------   --------    -------
169  Job169  Running   True          localhost   $wmi=Get-WmiObject -cl... 
```

非常感谢任何帮助或建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:18:53.053

这是在 Windows XP 上吗？Windows XP 和 Start-Job 上的 WMI 存在一个已知问题。阅读此主题：[WMI 查询脚本作为作业](https://stackoverflow.com/questions/5314180/wmi-query-script-as-a-job)

这可能是由于 WMI 存储库损坏。尝试重建一次。

# c# - C# 嵌套 if-else 优化

> ID：12295374
> 
> 赞同：2
> 
> 时间：2012-09-06T07:52:48.150
> 
> 标签：c#, optimization, if-statement

我有一个类`obj`，它具有三个属性：`firstValue`、`secondValue`、`thirdValue`，所有这些属性的范围都在 0 到 255 之间。

我有一个包含类对象的[列表](https://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.110%29.aspx)，`obj`必须根据 和 的值将它们分成 32 个不同的区域。我已经成功地使用了这样的嵌套 if-else 语句：`firstValue``secondValue``thirdValue`

```
if (obj.firstValue < 15 )
{
    if(obj.secondValue <200)
    {
        if(obj.thirdValue <125)
            maincolor[0]++;
        else
            maincolor[1]++;
    }
    else
    {
        if (obj.thirdValue < 125)
            maincolor[2]++;
        else
            maincolor[3]++;
    }
}
else if (obj.firstValue < 41)
{
    if (obj.secondValue < 200)
    {
        if (obj.thirdValue < 125)
            maincolor[4]++;
        else
            maincolor[5]++;
    }
    else
    {
        if (obj.thirdValue < 125)
            maincolor[6]++;
        else
            maincolor[7]++;
    }
}
else if (obj.firstValue < 90)
{
    if (obj.secondValue < 200)
    {
        if (obj.thirdValue < 125)
            maincolor[8]++;
        else
            maincolor[9]++;
    }
    else
    {
        if (obj.thirdValue < 125)
            maincolor[10]++;
        else
            maincolor[11]++;
    }
}
else if (obj.firstValue < 128)
{
    if (obj.secondValue < 200)
    {
        if (obj.thirdValue < 125)
            maincolor[12]++;
        else
            maincolor[13]++;
    }
    else
    {
        if (obj.thirdValue < 125)
            maincolor[14]++;
        else
            maincolor[15]++;
    }
}
else if (obj.firstValue < 166)
{
    if (obj.secondValue < 200)
    {
        if (obj.thirdValue < 125)
            maincolor[16]++;
        else
            maincolor[17]++;
    }
    else
    {
        if (obj.thirdValue < 125)
            maincolor[18]++;
        else
            maincolor[19]++;
    }
}
else if (obj.firstValue < 196)
{
    if (obj.secondValue < 200)
    {
        if (obj.thirdValue < 125)
            maincolor[20]++;
        else
            maincolor[21]++;
    }
    else
    {
        if (obj.thirdValue < 125)
            maincolor[22]++;
        else
            maincolor[23]++;
    }
}
else if (obj.firstValue < 205)
{
    if (obj.secondValue < 200)
    {
        if (obj.thirdValue < 125)
            maincolor[24]++;
        else
            maincolor[25]++;
    }
    else
    {
        if (obj.thirdValue < 125)
            maincolor[26]++;
        else
            maincolor[27]++;
    }
}
else
{
    if (obj.secondValue < 200)
    {
        if (obj.thirdValue < 125)
            maincolor[28]++;
        else
            maincolor[29]++;
    }
    else
    {
        if (obj.thirdValue < 125)
            maincolor[30]++;
        else
            maincolor[31]++;
    }
} 
```

我`maincolor[i]`用来记录区域的最大数量。

上述方法有效，但我想知道是否有任何方法可以使其更具可读性并降低性能成本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:05:19.687

未经测试，但你得到了漂移。

**编辑**：我已经颠倒了算法以允许提前救助。

```
int[] firstCutoffs = new int[] { 15, 41, 90, 128, 166, 196, 205 };
int index;

for (int n = 0; obj.firstValue > firstCutoffs[n] && n < firstCutoffs.Length; n++)
    index += 4;

if (obj.secondValue >= 200 )
    index += 2;

if (obj.thirdValue >= 125 )
    index ++;

maincolor[index]++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:11:22.883

当你有三个嵌套`if`条件时，你几乎可以肯定你做错了什么。

C#是面向对象的语言，所以你必须要考虑对象！

例如：

```
class ColorRange
{
    public Range RedRange { get; set; }
    public Range GreenRange { get; set; }
    public Range BlueRange { get; set; }
}

class Range
{
    public int Minimum { get; set; }
    public int Maximum { get; set; }

    public bool IsInRange(int value)
    {
        return value >= this.Minimum && value < this.Maximum;
    }
} 
```

然后在`GetColorRange`某处制作一个方法：

```
public ColorRange GetColorRange(int red, int green, int blue)
{
    foreach (var colorRange in this.Ranges)
    {
        if (colorRange.RedRange.IsInRange(red)
            && colorRange.GreenRange.IsInRange(green)
            && colorRange.BlueRange.IsInRange(blue))
        {
            return colorRange;
        }
    }

    return null;

    /*
        Or with Linq:
        return this.Ranges.FirstOrDefault(colorRange => 
            colorRange.RedRange.IsInRange(red)
            && colorRange.GreenRange.IsInRange(green)
            && colorRange.BlueRange.IsInRange(blue));
    */
} 
```

用法：

```
var colorRange = GetColorRange(20, 175, 200);

// increment the count of this color range in your array 
```

当然，您不应该“按原样”使用此代码。这只是为了向您展示如何重新设计您的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:07:11.730

为了使代码更具可读性，您可以使用 3 维数组来存储主要颜色类别。

```
int[,,] mainColorCategories = new int [8,2,2]; 
```

（注意，第一个值有 8 个类别，第二个和第三个有 2 个）

将索引相应地填充到主颜色数组中。然后要实现您的代码，您将实现三个函数来确定该数组的索引。这些函数需要执行您在代码片段中执行的“if-else-if”评估。

```
int firstValueIndex = getFirstValueIndex(obj.firstValue);
int secondValueIndex = getSecondValueIndex(obj.secondValue);
int thirdValueIndex = getThirdValueIndex(obj.thirdValue); 
```

然后你可以增加正确的主颜色数组

```
int mainColorCat = mainColorCategories[firstValueIndex,secondValueIndex,thirdValueIndex];
maincolor[mainColorCat]++; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:18:58.133

我喜欢这个问题，我用一点 LinQ 试过这个

```
 Dictionary<int,int> firstValue = new Dictionary<int,int>();
    firstValue.Add(15,0);
    firstValue.Add(41,4);
    firstValue.Add(90,8);
    firstValue.Add(128,12);
    firstValue.Add(166,16);
    firstValue.Add(196,20);
    firstValue.Add(205,24);
    firstValue.Add(256,28);

    int mainIndex = 0;
    KeyValuePair<int,int> firstIndex = firstValue.FirstOrDefault(x => obj.firstValue < x.Key);
    mainIndex = firstIndex.Value;
    mainIndex += (obj.secondValue < 200 ? 0 : 2);
    mainIndex += (obj.thirdValue < 125 ? 0 : 1);
    maincolor[mainIndex]++; 
```

首先，我已将 firstValue 的所有测试条件值存储在具有正确基本索引的字典中，然后是简单的数学运算，将剩余值添加到索引中。优点是在 Dictionary 添加方法中清楚地表明了您的限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:27:53.970

这个答案几乎与这里的大多数答案相似。一旦您在此处找到匹配值，我只想强调使用中断：

```
 int[] limitList = new int[] { 15, 41, 90, 128, 166, 196, 205 };
        int index = 0;
        foreach(int val in limitList)
        {
            if (obj.firstValue < val)
                break; //break on first encounter
            index += 4;
        }

        if (obj.secondValue >= 200)
            index+=2;

        if (obj.thirdValue >=125)
            index++;

        maincolor[index]++; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T09:23:30.000

既然你已经接受了答案，我想我会把它扔进锅里供你考虑。

```
int index = 0;

if (obj.firstValue < 15)
    index = 0;
else if (obj.firstValue < 41)
    index = 4;
else if (obj.firstValue < 90)
    index = 8;
else if (obj.firstValue < 128)
    index = 12;
else if (obj.firstValue < 166)
    index = 16;
else if (obj.firstValue < 196)
    index = 20;
else if (obj.firstValue < 205)
    index = 24;
else
    index = 28;

if (obj.secondValue >= 200)
    index += 2;

if (obj.thirdValue >= 125)
    index++;

maincolor[index]++; 
```

与您最初发布的编码相比，它更容易让人眼前一亮，并且具有相同的性能。

* * *

我很想知道您的原始代码与我的代码与发布的其他答案之间的性能差异是什么，我很清楚**使用循环会损害您的性能**。我评论了@GazTheDestroyer 的回答，它不会更快（请参阅循环展开> en.wikipedia.org/wiki/Loop_unwinding）。

所以我写了一个小程序来比较不同的答案，发现通常循环类型的答案要慢得多，例如@mbm answer。这里需要注意的是，只有当您有大量对象要迭代时，性能影响才会变得明显，因此在我的应用程序中，我测试了 1000000 个项目（具有第 1、第 2 和第 3 属性的对象）。

只是为了让您了解 1000000 个项目的结果：

*   您的原始代码和我上面的示例代码在大约 120 毫秒内执行
*   @mbm 和 @Steve 的答案（使用循环）都在大约 650 和 750 毫秒（分别）内执行。慢得多，慢得多！

我已将该程序的代码上传到 github > [https://github.com/mouters/SO12295374_SpeedTest](https://github.com/mouters/SO12295374_SpeedTest)，因此请随时下载和测试。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-06T08:05:49.297

您可以尝试使用 LINQ 获得一些可读性：

```
// be allObjects an IEnumerable<obj>
maincolor[0] = allObjects.Count(o => o.firstValue < 15 && o.secondValue < 200 && o.thirdValue < 125); 
```

# javascript - 从帧创建时间码

> ID：12295375
> 
> 赞同：5
> 
> 时间：2012-09-06T07:52:49.623
> 
> 标签：javascript, string, time, formatting

我的 FPS（每秒帧数）为 30。到目前为止，我的总 FPS 为 1020。我想将其显示为格式化的时间码，如下所示。

```
var fps = 30;
var currentFrame = 1020;

var resultString = ; // HH:MM:SS:FF 
```

是否有任何内置的用于格式化的 Javascript 函数？

为了清楚起见，我需要将字符串格式化为：HH:MM:SS:FF

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-28T00:10:07.013

它可以以更简单的方式完成：

```
function displayTime(currentFrame) {
    var fps = 30;
    var h = Math.floor(currentFrame/(60*60*fps));
    var m = (Math.floor(currentFrame/(60*fps))) % 60;
    var s = (Math.floor(currentFrame/fps)) % 60;
    var f = currentFrame % fps;
    return showTwoDigits(h) + ":" + showTwoDigits(m) + ":" + showTwoDigits(s) + ":" + showTwoDigits(f);
}

function showTwoDigits(number) {
    return ("00" + number).slice(-2);
}

console.log("Frame 1020 will be displayed as " + displayTime(1020)); 
```

*第 1020 帧将显示为 00:00:34:00*

**showTwoDigits**
这个帮助函数接受一个数字（例如：6），在它前面添加“00”，使其成为一个字符串（例如：“006”）。然后它从末端切回 2 个位置（将给出“06”）。

**displayTime**
**var h**
它通过将帧除以每小时 60*60*30 帧来计算小时数。一小时有 60*60*30 帧。
**var m**
分钟的计算方法相同，除以每分钟 60*30 帧。但请注意，这可能会导致像 80 分钟这样的数字，因为它是总分钟数。脚本必须只考虑这个数量除以 60 后的余数。这里模数发挥了作用。80 % 60 将给出 20，即我们正在寻找的数字。
**var s**
以类似的方式计算秒数，方法是将帧除以每秒 30 帧，然后取模数 60（因此 65 秒将表示为 5）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T07:56:00.663

你在寻找一个*内置的*JS 函数吗？

```
var FF = currentFrame % fps;
var seconds = (currentFrame - FF) / fps;
var SS = seconds % 60;
var minutes = (seconds - SS) / 60;
var MM = minutes % 60;
var HH = (minutes - MM) / 60; 
```

你去吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:02:45.660

尝试这个：

```
 var fps = 30;
    var currentFrame = 169;
    var SS = Math.floor(currentFrame / fps);
    var MM = Math.floor(SS / 60);
    var HH = Math.floor(MM / 60);
    var FF = currentFrame - (SS * fps);

    function pad(str, width, what, left) {
        str = String(str);
        what = String(what);
        var w = width - str.length;

        if (left) {
            return (new Array(w + 1)).join(what) + str;
        } else {
            return str + (new Array(w + 1)).join(what);
        }
    }

    var i,
        timecode = [HH, MM, SS, FF];

    for (i = 0; i < timecode.length; i += 1) {
        timecode[i] = pad(timecode[i], 2, 0, true);
    }

    var resultString = timecode.join(':'); // HH:MM:SS:FF 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T07:58:40.433

您还可以使用日期对象，请参见[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。只需做类似的事情：

```
var d = new Date( yourframetime + new Date().getTime() );
var str = d.getHours()+':'+ d.getMinutes()+ ':' + d.getSeconds() + ....... 
```

你可以使用对象的所有字符串函数，或者用它自己创建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-01T22:11:39.203

旧帖子，但我最近正在使用它，亚历山大和卢卡斯的代码的组合给出了正确的结果。检查的版本实际上会在非常大的帧数上中断（我认为是由于 Math.floor）。

代码是：

```
var fps = 30;
var currentFrame = 169;
var FF = currentFrame % fps;
var seconds = (currentFrame - FF) / fps;
var SS = seconds % 60;
var minutes = (seconds - SS) / 60;
var MM = minutes % 60;
var HH = (minutes - MM) / 60;

function pad(str, width, what, left) {
    str = String(str);
    what = String(what);
    var w = width - str.length;

    if (left) {
        return (new Array(w + 1)).join(what) + str;
    } else {
        return str + (new Array(w + 1)).join(what);
    }
}

var i,
    timecode = [HH, MM, SS, FF];

for (i = 0; i < timecode.length; i += 1) {
    timecode[i] = pad(timecode[i], 2, 0, true);
}

var resultString = timecode.join(':'); // HH:MM:SS:FF 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-01T21:19:34.187

对于任何对 showTwoDigits 函数的 swift 版本感兴趣的人，这里是一个工作代码示例：

```
func showTwoDigits(number:Float) -> (String){
        var string = ("00" + String(format:"%.f", number))
        var range = Range(start: (advance(string.endIndex, -2)), end: string.endIndex)
        var cutStr = string.substringWithRange(range)
        return cutStr
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-24T11:41:50.070

此函数正确转换为`HH:MM:SS:FF`：

```
var convertTime = function (frames, fps) {
    fps = (typeof fps !== 'undefined' ?  fps : 30 );
    var pad = function(input) {return (input < 10) ? "0" + input : input;},
        seconds = (typeof frames !== 'undefined' ?  frames / fps : 0 );
    return [
        pad(Math.floor(seconds / 3600)),
        pad(Math.floor(seconds % 3600 / 60)),
        pad(Math.floor(seconds % 60)),
        pad(Math.floor(frames % fps))
    ].join(':');
} 
```

* * *

### 演示

```
var convertTime = function (frames, fps) {
    fps = (typeof fps !== 'undefined' ?  fps : 30 );
    var pad = function(input) {return (input < 10) ? "0" + input : input;},
        seconds = (typeof frames !== 'undefined' ?  frames / fps : 0 );
    return [
        pad(Math.floor(seconds / 3600)),
        pad(Math.floor(seconds % 3600 / 60)),
        pad(Math.floor(seconds % 60)),
        pad(Math.floor(frames % fps))
    ].join(':');
}

document.body.innerHTML = '<pre>' + JSON.stringify({
    5 : convertTime(5),
    50 : convertTime(50),
    126 : convertTime(126),
    1156 : convertTime(1156),
    9178 : convertTime(9178),
    13555 : convertTime(13555)
}, null, '\t') +  '</pre>';
```

另请参阅[**此 Fiddle**](https://jsfiddle.net/zx78ngq7/1/)。

# android - 用相机拍照并获取图片路径android

> ID：12295381
> 
> 赞同：2
> 
> 时间：2012-09-06T07:53:21.277
> 
> 标签：android, android-camera, android-imageview, android-image

我的应用程序使用手机相机拍照并将照片存储在手机图库中。然后我想获取该图片路径并将其存储在我的数据存储中。有人可以帮帮我吗？这是我的代码：

```
public void onClick(View v){
        switch(v.getId())
        {
            case R.id.btnLoadPic:

                //Options for the dialogue menu
                final CharSequence[] items = {"Camera", "Gallery"};

                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setTitle("Choose an Option");
                builder.setItems(items, new DialogInterface.OnClickListener() {
                    /**
                     * Make onclick functionality for the options in the dialogue menu
                     */
                    public void onClick(DialogInterface dialog, int item) {

                        // Camera option
                        if (item == 0){

                            PackageManager pm = getPackageManager();

                            if (pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)){
                                //Toast.makeText(this, "camera", Toast.LENGTH_SHORT).show();
                                dispatchTakePictureIntent(11);
                            } else {
                                Toast.makeText(null, "No camera avalible", Toast.LENGTH_SHORT).show();

                            }
                        }
                        // Gallery option this works fine

    private void dispatchTakePictureIntent(int actionCode) {
            Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(takePictureIntent, actionCode);

            //handleSmallCameraPhoto(takePictureIntent);
        }

        private void handleSmallCameraPhoto(Intent intent) {
            Bundle extras = intent.getExtras();
            Bitmap mImageBitmap = (Bitmap) extras.get("data");
            ImageView mImageView = (ImageView) this.findViewById(R.id.imagePlayer);
            mImageView.setImageBitmap(mImageBitmap);

        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            handleSmallCameraPhoto(data);
        } 
```

最后几位代码访问相机并在图像视图中显示图片。如何以字符串格式获取该图片路径？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T08:03:55.303

这会有所帮助。测试和工作！

```
public class MainActivity extends Activity {

    private static final int REQUEST_IMAGE = 100;   
    private static final String TAG = "MainActivity";

    TextView tvPath;
    ImageView picture;
    File destination;
        String imagePath;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tvPath = (TextView) findViewById(R.id.idTvPath);
        picture = (ImageView) findViewById(R.id.idIvImage);
        String name =   dateToString(new Date(),"yyyy-MM-dd-hh-mm-ss");
        destination = new File(Environment.getExternalStorageDirectory(), name + ".jpg");

        Button click = (Button) findViewById(R.id.idBtnTakePicture);
        click.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(destination));
                startActivityForResult(intent, REQUEST_IMAGE);

            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if( requestCode == REQUEST_IMAGE && resultCode == Activity.RESULT_OK ){
            try {
                FileInputStream in = new FileInputStream(destination);
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inSampleSize = 10;
                imagePath = destination.getAbsolutePath();
                tvPath.setText(imagePath);
                Bitmap bmp = BitmapFactory.decodeStream(in, null, options);
                picture.setImageBitmap(bmp);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            }

        }
        else{
            tvPath.setText("Request cancelled");
        }
    }

    public String dateToString(Date date, String format) {
        SimpleDateFormat df = new SimpleDateFormat(format);
        return df.format(date);
    }

} 
```

不要忘记在清单文件中添加这些：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.CAMERA"/> 
```

# iphone - 以编程方式修剪iphone相机拍摄的视频？

> ID：12295382
> 
> 赞同：2
> 
> 时间：2012-09-06T07:53:32.357
> 
> 标签：iphone, user-interface, camera, avfoundation

我需要使用 iphone 捕获 5 分钟的视频，然后修剪捕获的视频并将其保存为二进制数据格式。如果有任何机构曾经这样做过，请帮助我这样做。

像那张图片[http://www.askdavetaylor.com/3-blog-pics/apple-iphone-video-editing-4.png](http://www.askdavetaylor.com/3-blog-pics/apple-iphone-video-editing-4.png)

```
- (BOOL) startCameraControllerFromViewController: (UIViewController*) controller
usingDelegate: (id <UIImagePickerControllerDelegate, UINavigationControllerDelegate>)                     delegate {

    NSLog(@"Camera Working");

    if (([UIImagePickerController isSourceTypeAvailable:

      UIImagePickerControllerSourceTypeCamera] == NO)

    || (delegate == nil)

    || (controller == nil))

    return NO;

    cameraUI            = [[UIImagePickerController alloc] init];
    cameraUI.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeMovie, nil];
    cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

    // Displays a control that allows the user to choose picture or

    // movie capture, if both are available: video and image capturing

    //cameraUI.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];

    // Hides the controls for moving & scaling pictures, or for

    // trimming movies. To instead show the controls, use YES.
    cameraUI.videoMaximumDuration = 300; // 5x60 sec 
    cameraUI.allowsEditing = YES;
    cameraUI.delegate = delegate;

    [controller presentModalViewController: cameraUI animated: YES];

    return YES;

} 
```

# java - 破坏者：日记示例

> ID：12295385
> 
> 赞同：7
> 
> 时间：2012-09-06T07:53:45.827
> 
> 标签：java, concurrency, disruptor-pattern

我对关于日志步骤的最常见（或推荐）的中断器实现感到好奇。我最常见的问题是：

*   它是如何实际实现的（通过示例）？
*   使用 JPA 是否明智？
*   什么数据库是常用的（由已经使用破坏者实施项目的社区）？
*   在中间处理程序（EventProcessors）中使用是否明智，因此应该保存每条消息的状态，而不是在业务逻辑流程之前和之后？

顺便说一句（我很抱歉，我知道这与日志步骤无关），在 eventHandler 过程中从 RingBuffer 中删除消息的正确方法是什么（假设消息已死/过期并且应该由整个过程）。我想知道类似于[死信通道](http://www.eaipatterns.com/DeadLetterChannel.html)模式的东西。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:00:15.597

Disruptor 通常用于低延迟、高吞吐量的处理。例如，数百万条消息，典型延迟为数百微秒。由于很少有数据库可以处理这种具有合理延迟的更新速率，因此通常对原始文件进行日志记录，并复制到第二个（或第三个）系统。

出于报告目的，系统会读取此文件或侦听消息并尽快更新数据库，但这已脱离关键路径。

当每个事件处理器都处理完一个条目时，环形缓冲区中的条目就已失效。

* * *

在每个事件处理器都处理完它和它之前的所有消息之前，消息使用的槽是不可用的。在性能和对设计的影响方面，删除消息的成本都太高了

每个事件处理器都会看到每条消息。由于这种情况同时发生，这样做的成本很低，但事件处理器因此忽略消息是很正常的。（可能是大多数消息）

# jquery - 我无法使用 jquery 删除行

> ID：12295386
> 
> 赞同：0
> 
> 时间：2012-09-06T07:53:45.403
> 
> 标签：jquery, html

```
$('#DepartmentNameDropdown').change(function(){

    $.ajax({
        type: 'post',
        dataType: 'json',
        url: "http://localhost:8081/crownregency/getInfoSearch.php",
        data: {id: $('#DepartmentNameDropdown').val()},
        success: function(data){
                $("tbody #tbody").find("tr:gt(0)").remove();;
                for (var i = 0; i < data.length; i++)
                {
                    $row = "<tr><td>" +data[i]['fname']+ "</td><td>" +data[i]['lname']+ "</td><td>" +data[i]['job']+ "</td><td>" +data[i]['loc']+ "</td></tr>";
                    $('#usersTable').find("tbody").after($row);
                }

            }
        });                                          
    }); 
```

这是我用于显示的 jquery，当我更改 departmentnamedropdown 值时，我想清除表，但保持 thead 完整。

```
<table width="581" border="1" id="usersTable">
<thead>
    <th width="25%">First Name</td>
    <th width="25%">Last Name</td>
    <th width="25%">Job Title</td>
  <th width="25%">Location</td>
 </thead>
 <tbody id="#tbody"></tbody>
</table> 
```

这是我的桌子，有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:56:33.463

您的选择器正在寻找元素`id="tbody"`内部的`tbody`元素。删除空格：

```
$("tbody#tbody") 
```

id 在页面中应该是唯一的，因此您应该能够使用：

```
$("#tbody") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:04:39.407

改变

`<tbody id="#tbody"></tbody>`

至

`<tbody id="tbody"></tbody> <!-- remove the # sign-->`

并将jQuery更改为：

`$("#tbody").find("tr:gt(0)").remove();`

# android - 应用程序因“内存不足：不再有后台进程”而死机。

> ID：12295398
> 
> 赞同：1
> 
> 时间：2012-09-06T07:54:53.380
> 
> 标签：android

在我的应用程序中，我尝试使用以下 url 启动浏览器：

```
https://maps.google.com/maps?saddr=indiranagar bangalore&daddr=mgroad bangalore 
```

浏览器启动，当地图加载时，我的应用程序被以下 logcat 消息杀死：

```
 I/ActivityManager(   61): Starting: Intent { act=android.intent.action.VIEW dat=
http://View cmp=com.android.browser/.BrowserActivity (has extras) } from pid 355

I/ActivityManager(   61): Starting: Intent { act=android.intent.action.VIEW dat=
https://maps.google.com/maps?saddr=indiranagar bangalore&daddr=mgroad bangalore
cmp=com.android.browser/.BrowserActivity } from pid 355
D/PhoneWindow(  355): couldn't save which view has focus because the focused vie
w android.widget.EditText@40587640 has no id.
I/ActivityManager(   61): Displayed com.android.browser/.BrowserActivity: +760ms

W/IInputConnectionWrapper(  355): showStatusIcon on inactive InputConnection
I/dalvikvm(  373): Jit: resizing JitTable from 1024 to 2048
I/System.out(  355): Logout Counter:30
D/dalvikvm(  373): GC_CONCURRENT freed 369K, 50% free 3921K/7751K, external 2234
K/2645K, paused 5ms+18ms
D/dalvikvm(  355): GC_EXPLICIT freed 866K, 50% free 3666K/7239K, external 2693K/
3310K, paused 1640ms
D/dalvikvm(  373): GC_CONCURRENT freed 1400K, 54% free 3641K/7751K, external 226
6K/2645K, paused 6ms+26ms
W/browser (  373): We should not show context menu when nothing is touched
W/browser (  373): We should not show context menu when nothing is touched
W/browser (  373): We should not show context menu when nothing is touched
**I/ActivityManager(   61): Process com.aavarp.mobile (pid 355) has died.
I/ActivityManager(   61): Low Memory: No more background processes.**
I/WindowManager(   61): WIN DEATH: Window{408793c0 com.aavarp.mobile/com.aavarp.
mobile.core.ui.ApplicationsActivity paused=false}
E/InputDispatcher(   61): channel '4070e4f8 com.aavarp.mobile/com.aavarp.mobile.
dashboard.ui.components.GraphActivity (server)' ~ Consumer closed input channel
or an error occurred.  events=0x8
E/InputDispatcher(   61): channel '4070e4f8 com.aavarp.mobile/com.aavarp.mobile.
dashboard.ui.components.GraphActivity (server)' ~ Channel is unrecoverably broke
n and will be disposed!
I/WindowManager(   61): WIN DEATH: Window{4070e4f8 com.aavarp.mobile/com.aavarp.
mobile.dashboard.ui.components.GraphActivity paused=false}
I/WindowManager(   61): WIN DEATH: Window{406836a8 com.aavarp.mobile/com.aavarp.
mobile.dashboard.ui.components.NotificationList paused=false}
I/WindowManager(   61): WIN DEATH: Window{406825a8 com.aavarp.mobile/com.aavarp.
mobile.dashboard.ui.components.TableListActivity paused=false}
I/WindowManager(   61): WIN DEATH: Window{4083df30 com.aavarp.mobile/com.aavarp.
mobile.dashboard.ui.components.DetailsActivity paused=false}
E/InputDispatcher(   61): Received spurious receive callback for unknown input c
hannel.  fd=171, events=0x8
E/InputDispatcher(   61): Received spurious receive callback for unknown input c
hannel.  fd=175, events=0x8
E/InputDispatcher(   61): Received spurious receive callback for unknown input c
hannel.  fd=181, events=0x8
D/dalvikvm(   61): GC_CONCURRENT freed 1735K, 52% free 4435K/9159K, external 529
2K/6609K, paused 8ms+16ms
D/skia    (  129): purging 38K from font cache [5 entries]
D/dalvikvm(  129): GC_EXPLICIT freed 84K, 52% free 2801K/5767K, external 2117K/2
643K, paused 73ms 
```

我再次尝试从我的应用程序启动浏览器`www.google.com`并执行搜索并浏览各个页面并导航回我的应用程序而没有任何问题。我不确定是否在 logcat 上遗漏了一些消息。我使用的是 Android 2.3 OS。请有人帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:41:55.503

为什么要在 webview 中加载地图..？[**您在地图活动**](https://developers.google.com/maps/documentation/android/hello-mapview)中加载地图或

使用[意图列表：在 Android 设备上调用 Google 应用程序](http://developer.android.com/guide/appendix/g-app-intents.html)

```
 String uri = "http://maps.google.com/maps?saddr=" + "9982878"+","+"76285774"+"&daddr="+"9992084"+","+"76286455";
        Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
        intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
        startActivity(intent); 
```

注意：要显示[路线](http://bit.ly/P5UlCL)，您应该使用地图活动画布

# java - 使用 java.net.HttpURLConnection 时是否可以转储 HTTP 标头？

> ID：12295400
> 
> 赞同：2
> 
> 时间：2012-09-06T07:55:06.957
> 
> 标签：java, http-headers, wireshark, apache-httpcomponents, charles-proxy

我正在调试一些使用`java.net.HttpURLConnection`. 我想设置一个属性以启用 HTTP 请求和响应标头的日志记录，这可能在 Apache HTTP 组件库中具有该`org.apache.http.headers`类别。

HttpURLConnection 可以吗？我需要突破 Charles Proxy 或 Wireshark 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:30:16.893

根据[Sun 的 HttpURLConnection 来源](http://grepcode.com/file_/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/net/www/protocol/http/HttpURLConnection.java/?v=source)，有一些通过 JUL 的日志记录支持。

这需要设置 java.util.logging `sun.net.www.protocol.http.HttpURLConnection.level=ALL`。

例如，请参阅[http://www.rgagnon.com/javadetails/java-debug-HttpURLConnection-problem.html](http://www.rgagnon.com/javadetails/java-debug-HttpURLConnection-problem.html)。

还有系统属性`-Djavax.net.debug=all`。但它主要[用于 SSL 调试](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/ReadDebug.html)。

顺便说一句，Wireshark 也是一个相当简单的选择。

# php - Propel 为同一个表的同一个查询返回不同的输出

> ID：12295412
> 
> 赞同：0
> 
> 时间：2012-09-06T07:55:43.100
> 
> 标签：php, propel

我有推进查询

```
$articles = ArticlesQuery::create()->find();
var_dump($articles);
exit; 
```

它查询文章表（id，users_id，article_category_id，images_id，title，body，approved，created_date，deleted）但我得到的结果非常不同。

预期的结果是

```
object(PropelObjectCollection)[34]

object(Articles)[35]
  protected 'startCopy' => boolean false
  protected 'id' => int 1
  protected 'users_id' => int 1
  protected 'articles_category_id' => int 1
  protected 'images_id' => int 1
  protected 'title' => string 'Article Title Here updated' (length=26)
  protected 'body' => resource(68, stream)
  protected 'approved' => int 0
  protected 'created_date' => null
  protected 'deleted' => null
  protected 'aUsers' => null
  protected 'aArticlesCategory' => null
  protected 'alreadyInSave' => boolean false
  protected 'alreadyInValidation' => boolean false
  protected 'validationFailures' => 
    array
      empty
  protected '_new' => boolean false
  protected '_deleted' => boolean false
  protected 'modifiedColumns' => 
    array
      empty
  protected 'virtualColumns' => 
    array
      empty 
```

但我得到的结果是

```
object(PropelObjectCollection)[49]

object(Articles)[50]
  protected 'startCopy' => boolean false
  protected 'id' => int 1
  protected 'users_id' => int 1
  protected 'articles_category_id' => int 0
  protected 'images_id' => int 0
  protected 'title' => string 'xxx@gmail.com' (length=22)
  protected 'body' => resource(71, stream)
  protected 'approved' => int 0
  protected 'created_date' => null
  protected 'deleted' => null
  protected 'aUsers' => null
  protected 'aArticlesCategory' => null
  protected 'alreadyInSave' => boolean false
  protected 'alreadyInValidation' => boolean false
  protected 'validationFailures' => 
    array
      empty
  protected '_new' => boolean false
  protected '_deleted' => boolean false
  protected 'modifiedColumns' => 
    array
      empty
  protected 'virtualColumns' => 
    array
      empty 
```

相同的查询之前工作过。我刚刚开始使用 Propel ORM。我不知道出了什么问题。我已经尝试为 php 重新生成运行时配置，然后生成新的模型类。我已经将 Propel 与 CI 集成在一起。我仍在尝试解决这个问题，但我不知道是什么导致了不同的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:39:36.860

今天，我犯了一个非常愚蠢的错误，让我付出了数小时的痛苦。

实际上在早上我编辑了一个推进运行时核心文件“runtime/lib/query/ModelCriteria.php”并替换了

```
$this->modelPeerName = constant($this->modelName . '::PEER'); 
// with 
$this->modelPeerName = 'UsersPeer' 
```

这导致推进仅从用户表返回数据。@j0k 感谢您一直以来的支持，让我一直在调试这个问题。

我之前替换了代码，因为 propel 生成的代码仅适用于 UsersQuery 并且无法找到 constant($this->modelName . '::PEER'); 适当地。

希望这不会发生在任何人身上，我将有跟踪我所做的更改的习惯。找到实际错误后，我恢复到原始来源，查询开始像以前一样工作。

# html - css定位 - 某个div的正下方

> ID：12295414
> 
> 赞同：0
> 
> 时间：2012-09-06T07:56:07.003
> 
> 标签：html, css

我创建了一个 div 元素的 id 并尝试提供这些属性：

```
.bu
{
background: #eee; padding: 10px; position:absolute; margin: 0 0 15px 0;width:750px; -moz-box-shadow: 0 0 5px #666; -webkit-box-shadow: 0 0 5px #666; 
} 
```

而且，在此之后，我创建了另一个具有相同 id 的 div 元素，但我添加的第二个 div 出现在第一个元素的中间。

这是对代码段的更好解释：

```
<div style = "position:absolute; top:50px;">
<div class= "bu">
---something about height 200px
</div>
</div>

<div class="bu">
something
</div> 
```

我的想法是第二个 div 应该出现在第一个 div 结束的地方之后。我可以给属性“位置：绝对；顶部：250px；” 到第二个 div 但是，每个 div 的内容将由用户决定，没有一定的高度。我在哪里失踪？

谢谢

__ 不是 CSS 大师 __

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:06:10.757

我希望这是你想要的东西

[http://jsfiddle.net/mj6Tu/](http://jsfiddle.net/mj6Tu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:39:53.117

几个位置属性值是：

**静态：**这是默认值，这意味着元素将正常流动，即从左到右，从上到下。元素将自己定位**而不重叠**。

**绝对：这意味着元素将根据****其父**元素位置具有特定的位置（左、上等） 。**它们可能与其他元素重叠**，这可以使用 z-index 属性来解决。

所以你可能想创建一个父元素并给它绝对位置......并创建2个没有任何位置值的内部div。

看到这段代码.... [http://jsbin.com/welcome/20319/edit](http://jsbin.com/welcome/20319/edit)

# objective-c - Core Data 内存使用和内存警告

> ID：12295415
> 
> 赞同：9
> 
> 时间：2012-09-06T07:56:09.297
> 
> 标签：objective-c, ios, xcode, core-data, memory-management

我有这个问题。我在 Core Data 中有一个图像数据库。我获取所有图像（大约 80MB）并放入一个 NSMutableArray。对象正确错误：

```
NSArray *fetchResults = [self.managedObjectContext executeFetchRequest:request error:&error];
self.cache = [NSMutableArray arrayWithArray:fetchResults];
for (ImageCache *imageObject in self.cache) {
    NSLog(@"Is fault? %i", [imageObject isFault]);
} 
```

阅读日志，我看到对象都是正确的错误但是，使用 Instruments，我看到使用了 80MB 的内存。我认为这就是 Core Data 缓存它的结果的原因，并且应该在需要时释放内存。但是（这是我的“问题”），如果我模拟内存警告，什么都不会发生！80MB 仍然存在。

查看工具 - 分配，许多 Malloc 使用 80MB：（示例）

图表类别 Live Bytes # Living # Transitory 总体字节数 # 总体 # 分配（净/总体） 0 Malloc 176,00 KB 8,59 MB 50 57 18,39 MB 107 %0.00, %0.00 0 Malloc 200,00 KB 8,20 MB 42 460 98,05 MB 502 %0.00, %0.04 0 Malloc 168,00 KB 7,05 MB 43 19 10,17 MB 62 %0.00, %0.00

这是整个调用树图像的链接：[https ://www.dropbox.com/s/du1b5a5wooif4w7/Call%20Tree.png](https://www.dropbox.com/s/du1b5a5wooif4w7/Call%20Tree.png)

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T16:17:31.807

好的，我明白为什么会这样了。当您对实体发出获取请求时，即使启用了故障，该实体的所有数据也会加载到内存中。包括大的二进制数据。您可以使用多种方法解决此问题：

1-在您的设置上设置`NSFetchRequest`：`[request setIncludesPropertyValues:NO];` 设置否，数据不会立即加载到缓存中，而是仅在请求时加载（当您访问属性并触发故障时）但这有一个“问题”。即使您尝试再次对属性进行故障处理（因为您不需要立即使用它并且想要释放内存，使用`[self.managedObjectContext refreshObject:object mergeChanges:NO];`），内存也不会被释放。缓存保持活动状态，直到 managedObjectContext 被重置。

这个更好：

2-您可以将数据拆分为单独的实体。就我而言，我只有 2 个属性：一个 url 和一个图像数据。我将数据以 1:1 的关系拆分为 2 个实体：imagecache 和 imagedata。为“imagecache”实体的所有行（使用 url 属性）创建了一个 fetchRequest，并且与之前的解决方案一样，没有缓存内存。属性 imagecache.relationship.image 已正确出错。访问此属性会导致故障触发并填充缓存。但在这种情况下，`[self.managedObjectContext refreshObject:object mergeChanges:NO];`对“imagecache”对象（“父亲”对象）执行操作会导致立即释放缓存和内存，从而再次导致 imagecache.relationship.image 属性出错。注意：不要在“子”对象上做，如果这样做`[self.managedObjectContext refreshObject:object.relationship mergeChanges:NO]`，由于某种原因缓存没有被释放。

3-我说这主要是一个学术问题，这个问题的真正“整天”解决方案（更好的性能和更少的头痛）是避免将大数据保存在核心数据数据库中。您可以将数据保存为文件并仅存储参考（文件路径），或者，在 iOS 5 中，您可以在核心数据模型内的任何“数据”属性上设置“使用外部存储”。这将为您完成所有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:37:31.803

我认为您应该将较少的对象批量加载到内存中。

coredata释放的内存发生在幕后，你不必为它编程；坏消息是它发生在幕后，因此可以“神奇地”吞噬记忆。

绕过它的方法很多；例如，使用谓词仅选择您绝对需要的行；不要进行一般调用来获取所有内容，然后一一浏览列表。当您进行一般调用并且 CoreData 尝试加载所有对象时，您很可能会崩溃。

# java - 可以使用静态锁存器或信号量吗？

> ID：12295416
> 
> 赞同：0
> 
> 时间：2012-09-06T07:56:10.640
> 
> 标签：java, multithreading, semaphore, countdownlatch

我有一些实现 Runnable 接口的类。它们中的每一个都通过单独的 SingleThreadExecutor 执行。我无法修改执行例程，我只能为其提供不同的 Runnables。

我需要根据其他 Runnables 结果对 Runnables 进行一些操作。即，我想在 run() 方法中运行一些操作，以防所有其他 Runnables 都达到该执行点。或者，仅当执行相同操作的 Runnable 数量小于 10 时，我才想在 run() 方法中运行一些例程。

我看到的唯一解决方案是使静态变量 CountDownLatch 和 Semaphore 同步。

我实现了这个，但是由于一些未知的原因，如果一些 Runnable 正在等待 Latch 或 Semaphore，则从一些 Runnable SingleThreadExecutor 开始不会使用下一个 Runnable 启动线程。例如 7 Runnables 启动，其他则不启动。

我的问题：我在静态 Latch 或 Semaphore 上同步的方案是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:59:10.403

`CyclicBarrier`通常比以下情况更有用`CountDownLatch`：

1.  多线程操作分阶段或迭代发生，并且；
2.  阶段/迭代之间需要单线程操作，例如，将前一个多线程部分的结果组合起来。

更多信息[在这里](http://www.javamex.com/tutorials/threads/CyclicBarrier.shtml)。示例[在这里](http://www.javamex.com/tutorials/threads/CyclicBarrier_parallel_sort_2.shtml)

# iphone - Apple Store 在 iPad 3 iOS 5.1.1 上的应用程序测试崩溃问题

> ID：12295417
> 
> 赞同：0
> 
> 时间：2012-09-06T07:56:14.303
> 
> 标签：iphone, ipad, ipod

Apple store 建议，**我们发现您的应用在运行 iOS 5.1.1 的 iPad 上崩溃**，原因如下，

**原因：**

```
Incident Identifier: 9C3164B4-AD47-41DB-AA66-6786ED699A5D
CrashReporter Key:   a718036fcb264850c199f1bafc4de94bdc6c5234
Hardware Model:      iPad3,3
Process:         Password [3188]
Path:            /var/mobile/Applications/91AFA46A-8BF8-4EE3-83D2-5E4DDD87F602/Password.app/Password
Identifier:      Password
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-09-05 16:59:23.579 -0700
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_INSTRUCTION (SIGILL)
Exception Codes: 0x00000001, 0xf64cb580
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   Password                        0x0000bdb8 0x1000 + 44472
1   CoreFoundation                  0x32b4facc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
2   CoreFoundation                  0x32b4f32e __CFRunLoopDoSources0 + 358
3   CoreFoundation                  0x32b4e03e __CFRunLoopRun + 646
4   CoreFoundation                  0x32ad149e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x32ad1366 CFRunLoopRunInMode + 98
6   GraphicsServices                0x32c1e432 GSEventRunModal + 130
7   UIKit                           0x350b0cce UIApplicationMain + 1074
8   Password                        0x000029f6 0x1000 + 6646
9   Password                        0x0000298c 0x1000 + 6540

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x350423a8 kevent + 24
1   libdispatch.dylib               0x312a6f04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x312a6c22 _dispatch_mgr_thread + 30

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x350520d8 __psynch_mutexwait + 24
1   libsystem_c.dylib               0x31f2d674 pthread_mutex_lock + 376
2   WebCore                         0x357cc4e8 _ZL17_WebTryThreadLockb + 208
3   WebCore                         0x357cc7ec _ZL14WebRunLoopLockP19__CFRunLoopObservermPv + 24
4   CoreFoundation                  0x32b4fb14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
5   CoreFoundation                  0x32b4dd50 __CFRunLoopDoObservers + 252
6   CoreFoundation                  0x32b4e16a __CFRunLoopRun + 946
7   CoreFoundation                  0x32ad149e CFRunLoopRunSpecific + 294
8   CoreFoundation                  0x32ad1366 CFRunLoopRunInMode + 98
9   WebCore                         0x3586fc9c _ZL12RunWebThreadPv + 396
10  libsystem_c.dylib               0x31f3972e _pthread_start + 314
11  libsystem_c.dylib               0x31f395e8 thread_start + 0

Thread 3 name:  Dispatch queue: com.apple.SystemConfiguration.SCNetworkReachability.xpcq
Thread 3:
0   libsystem_kernel.dylib          0x35042054 semaphore_wait_trap + 8
1   libdispatch.dylib               0x312a74ee _dispatch_thread_semaphore_wait$VARIANT$mp + 6
2   libdispatch.dylib               0x312a69b0 _dispatch_sync_f_slow + 68
3   libdispatch.dylib               0x312a58b4 _dispatch_sync_f2 + 16
4   libdispatch.dylib               0x312a5282 dispatch_sync_f$VARIANT$mp + 46
5   libdispatch.dylib               0x312a52e4 dispatch_get_specific$VARIANT$mp + 52
6   libxpc.dylib                    0x30507694 _xpc_connection_reply_cancel + 48
7   libdispatch.dylib               0x312a8236 _dispatch_source_invoke + 346
8   libdispatch.dylib               0x312a5b7a _dispatch_queue_invoke$VARIANT$mp + 46
9   libdispatch.dylib               0x312a5c9e _dispatch_queue_drain + 162
10  libdispatch.dylib               0x312a5b6e _dispatch_queue_invoke$VARIANT$mp + 34
11  libdispatch.dylib               0x312a5c9e _dispatch_queue_drain + 162
12  libdispatch.dylib               0x312a5b6e _dispatch_queue_invoke$VARIANT$mp + 34
13  libdispatch.dylib               0x312a67e0 _dispatch_worker_thread2 + 204
14  libsystem_c.dylib               0x31f33df4 _pthread_wqthread + 288
15  libsystem_c.dylib               0x31f33cc8 start_wqthread + 0

Thread 4 name:  com.apple.NSURLConnectionLoader
Thread 4:
0   libsystem_kernel.dylib          0x35042004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x350421fa mach_msg + 50
2   CoreFoundation                  0x32b4f3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x32b4e124 __CFRunLoopRun + 876
4   CoreFoundation                  0x32ad149e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x32ad1366 CFRunLoopRunInMode + 98
6   Foundation                      0x371cfbb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x371cfa7a -[NSThread main] + 66
8   Foundation                      0x3726358a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x31f3972e _pthread_start + 314
10  libsystem_c.dylib               0x31f395e8 thread_start + 0

Thread 5 name:  com.apple.CFSocket.private
Thread 5:
0   libsystem_kernel.dylib          0x35052570 __select + 20
1   CoreFoundation                  0x32b5363a __CFSocketManager + 726
2   libsystem_c.dylib               0x31f3972e _pthread_start + 314
3   libsystem_c.dylib               0x31f395e8 thread_start + 0

Thread 6:
0   libsystem_kernel.dylib          0x35052cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x31f33f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x31f33cc8 start_wqthread + 0

Thread 7:
0   libsystem_kernel.dylib          0x35052cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x31f33f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x31f33cc8 start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x001ce810    r1: 0x00000002      r2: 0x00198620      r3: 0x00000000
    r4: 0x001ce810    r5: 0x00000000      r6: 0x0000bdba      r7: 0x2fdfef38
    r8: 0x00198620    r9: 0x00000000     r10: 0x36c95b53     r11: 0x36c95b53
    ip: 0x001ce828    sp: 0x2fdfec9c      lr: 0x36c7bceb      pc: 0x0000bdb8
  cpsr: 0x600f0010

Binary Images:
    0x1000 -    0x5dfff +Password armv7  <ec69f90aa79e306fb62f0008879887ba> /var/mobile/Applications/91AFA46A-8BF8-4EE3-83D2-5E4DDD87F602/Password.app/Password
0x2fe62000 - 0x2fe83e17  dyld armv7  <77eddfd654df393ba9c95ff01715fd08> /usr/lib/dyld
0x3018c000 - 0x30197ff7  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x302e5000 - 0x3032afff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x3032b000 - 0x3039bffb  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x303b5000 - 0x30484fff  libGLProgrammability.dylib armv7  <49607ffe4ee9389494285a213e392924> /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x30485000 - 0x30486ffd  CoreSurface armv7  <97f871f09f503c98a6371c2b657430d8> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x30493000 - 0x304f0fff  StoreServices armv7  <6ce256d3cf433e4aa1af8d696bf1f75d> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x304f1000 - 0x304f1fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x30504000 - 0x30515ff4  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x3052e000 - 0x305adffd  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x305ae000 - 0x305e5fff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x30740000 - 0x3077cff7  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x30786000 - 0x3078cfff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x3078d000 - 0x3078dffe  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x3079b000 - 0x30941eef  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x30944000 - 0x30a4affb  IMGSGX543GLDriver armv7  <7454a840600038949d67edad05097242> /System/Library/Extensions/IMGSGX543GLDriver.bundle/IMGSGX543GLDriver
0x30aad000 - 0x30abcffc  MobileDeviceLink armv7  <70ac33720f513f0f97ea2279260678ca> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x30abd000 - 0x30ad1ffb  PersistentConnection armv7  <54091a638f8731cd85ccf00fa06972c3> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x30afa000 - 0x30b6eff7  MediaControlSender armv7  <87315c54b2293ab589950341ff91b45d> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x30b6f000 - 0x30b73fff  CertUI armv7  <f503892ef60e36108d28d8f9d6144d2a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x30c8e000 - 0x30ccaff7  iCalendar armv7  <f2836083051132d3aa40ad82d7f73aea> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x30ccb000 - 0x30d00ffe  DataAccess armv7  <89fd0c22338b37538cf61803a0bca9e2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x30d01000 - 0x30d02fff  libsystem_sandbox.dylib armv7  <6a8f2f33c7543808a0f4599101c3b61a> /usr/lib/system/libsystem_sandbox.dylib
0x30f26000 - 0x30f7effb  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x30f7f000 - 0x30f8eff2  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x311f8000 - 0x31210fff  Notes armv7  <724966ed5cd4395cb70f9c996b123f53> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x31211000 - 0x31213ffe  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x312a3000 - 0x312b9fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x312ee000 - 0x312f2ffd  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x312f3000 - 0x31318ff9  OpenCL armv7  <f4b08361179a3f6bb033415b0d7c6251> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x31349000 - 0x3134afff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x31386000 - 0x31448ffb  Celestial armv7  <19617260ee073e23b95e456d93930aea> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x314bc000 - 0x314d9ff7  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x314da000 - 0x314ebfff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x31995000 - 0x31995fff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x31d19000 - 0x31d1bffd  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x31d1e000 - 0x31d1efff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x31d1f000 - 0x31d22ffe  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x31d23000 - 0x31d36fff  DataDetectorsCore armv7  <3f4596cbe1b13fdcb427d87de21df3f6> /System/Library/PrivateFrameworks/DataDetectorsCore.framework/DataDetectorsCore
0x31d3a000 - 0x31d51fff  WebBookmarks armv7  <696bb0630b19388da0d72e685bcf6e28> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x31da9000 - 0x31dbffff  VoiceServices armv7  <c5b98e94eff33bf49006ff157c819987> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x31dc0000 - 0x31dc7fff  MailServices armv7  <ab2388ce733e38b7a261273a401bbbf1> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x31dc8000 - 0x31dcdff7  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x31edd000 - 0x31f27ff9  ManagedConfiguration armv7  <f1fbb825def23043830a095b953a9c94> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x31f2b000 - 0x31fb7ff3  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x31fb8000 - 0x31fbafff  libCoreFSCache.dylib armv7  <808518e0fbf539af8489f028ca5198c7> /System/Library/Frameworks/OpenGLES.framework/libCoreFSCache.dylib
0x31fbb000 - 0x31fbcfff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x31fc4000 - 0x320b5ff3  QuartzCore armv7  <35d64a9da5523ae08c9e41511fd3061b> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x322da000 - 0x32387ff7  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x32388000 - 0x32389fff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x323c1000 - 0x323c1ffd  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x32657000 - 0x326a1ff3  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x32700000 - 0x32704fff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x32708000 - 0x3278effc  CoreMotion armv7  <6a9355d5a8e238b5b8f193605d509e15> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x3278f000 - 0x3287dffa  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x32886000 - 0x328d4fff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x32927000 - 0x32930fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x32a10000 - 0x32a3cfff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x32ac2000 - 0x32bd9ff9  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x32c02000 - 0x32c06ffe  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x32c1a000 - 0x32c24fff  GraphicsServices armv7  <cb64e146a8ee3fda9e80ffae1ccc9c5a> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x32c28000 - 0x32ee9fff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x33331000 - 0x3338afff  IMAVCore armv7  <ce90304da959333d81a64171a6ac3ae8> /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore
0x33393000 - 0x333dcff7  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x334ab000 - 0x334b3ffe  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x334be000 - 0x334d4ff3  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x334d5000 - 0x334f4fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x334f5000 - 0x334faffe  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x334fb000 - 0x33537fff  IMFoundation armv7  <253125b9103c3d13b66923ac6893c25b> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x335f2000 - 0x335f7ffe  CrashReporterSupport armv7  <dc11c5c2cbe73a6288a6094ebf5de673> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x335f8000 - 0x335feff3  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x33600000 - 0x33664fff  MessageUI armv7  <da7af4f9494b35558bf7892dfdb36ee3> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x336f2000 - 0x3391fff7  MediaToolbox armv7  <c3098478486032c6aff336fa711c4fc6> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x33941000 - 0x339ebfff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x33a0e000 - 0x33b53ffb  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x33b56000 - 0x33bb9ffb  IMCore armv7  <046b6b615a743057b59d4aaba8a91d61> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x33cf0000 - 0x33cf7ff7  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x33d12000 - 0x33d15ffc  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x33d16000 - 0x33d23ff7  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x33d60000 - 0x33db1ff6  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x33db2000 - 0x33dc4fff  DataDetectorsUI armv7  <50ea319aaeb7307e92719980dd4b2953> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI
0x33e6b000 - 0x33e94fff  AppleAccount armv7  <2ba44023410231fcb3f72f762ea3ce6e> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x33ec0000 - 0x33ec0fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x33ec6000 - 0x33f6cfff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x33f6d000 - 0x33f8dfff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x33f91000 - 0x34069ff6  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x34077000 - 0x3407dfff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x34090000 - 0x34098fff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x3409b000 - 0x3440affb  TextInput armv7  <8d7f24642c7634cc8e3a6e65f1dcd98e> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x3440b000 - 0x3441effe  AssistantServices armv7  <4a0843742f363a8885b8db13b44ae256> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x344a7000 - 0x349ebff5  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x349ec000 - 0x34a02ff7  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x34b17000 - 0x34bddd63  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x34c09000 - 0x34c0ffff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x34c10000 - 0x34c1aff7  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x34c1c000 - 0x34c1cfff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x34c21000 - 0x34c69ffe  CoreMedia armv7  <e274e1b894753b2eb05cf7b22a36d0c1> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x34c6a000 - 0x34c71fff  AssetsLibraryServices armv7  <38132ecfd74b325fb1a4142bab663c19> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x34c72000 - 0x34c75ffd  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x34d46000 - 0x34d97fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x34db6000 - 0x34e7cfff  GLEngine armv7  <6617f2b4ee283469a5595129889ff049> /System/Library/Frameworks/OpenGLES.framework/GLEngine.bundle/GLEngine
0x34e7d000 - 0x34e96ff7  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x34e97000 - 0x34ed5fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x34ed6000 - 0x34edaffd  IOSurface armv7  <443ac3aab9283da480dd9dcda3c5c88e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35041000 - 0x35057ffd  libsystem_kernel.dylib armv7  <311f379a9fde305d80c1b22b7dd2e52a> /usr/lib/system/libsystem_kernel.dylib
0x35058000 - 0x3506eff5  EAP8021X armv7  <952fcfdec0633aff923768fca1a26fcb> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x3506f000 - 0x35079ffb  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x3507f000 - 0x35521ff3  UIKit armv7  <cd513a2f22f53d698c3e10f6fe48a63e> /System/Library/Frameworks/UIKit.framework/UIKit
0x35523000 - 0x35682ffe  libmecabra.dylib armv7  <06a0a1ee488030169bdfab11fc8d2c5c> /usr/lib/libmecabra.dylib
0x35683000 - 0x356c6fff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x356f6000 - 0x35705fff  SpringBoardServices armv7  <a2363f8ed49932dba415d2d4cd32fb74> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x35706000 - 0x3570afff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x357c6000 - 0x35f85ffb  WebCore armv7  <2690c38c9c5f3c09975d619dd1dfbed7> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x35f86000 - 0x36056ffc  WebKit armv7  <3c5dd2ec46fe3e189c25bba78ad88fa1> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x36057000 - 0x360a3fff  CoreTelephony armv7  <b8f80d5d594c31d2b5d8fba9fdedb7e1> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x360b3000 - 0x360f7ffb  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x360fb000 - 0x360fefff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x360ff000 - 0x36148ff0  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x3615a000 - 0x36192ff3  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x36193000 - 0x362b8ff3  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x3683e000 - 0x36915ff1  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36916000 - 0x36917fff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x36994000 - 0x36a0dfff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x36a45000 - 0x36a84ff3  QuickLook armv7  <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x36a85000 - 0x36c42ff7  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x36c43000 - 0x36c66ff7  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x36c67000 - 0x36c9cff7  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x36e8d000 - 0x37071ff7  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x37107000 - 0x3713bfff  MIME armv7  <d30292ea8f7e360fa5f5d5b1b62b602d> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x371a4000 - 0x371b0fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x371bf000 - 0x3733dfff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x373ad000 - 0x373eafff  FTServices armv7  <3f23418319a03a589dd5cac7df20e238> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x37511000 - 0x37514fff  ActorKit armv7  <434c756a6b053f4ba3c954cfccddbf59> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x37527000 - 0x375c0fff  EventKit armv7  <d67aa1508ee7306b8e2a45c76ffddff0> /System/Library/Frameworks/EventKit.framework/EventKit
0x375ed000 - 0x375f0ff8  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x3767f000 - 0x37683ffc  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x37719000 - 0x3771affe  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x3771b000 - 0x3775bffd  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x37861000 - 0x37867ffe  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x378bc000 - 0x378c1fff  libGPUSupportMercury.dylib armv7  <3c1cc3175c403ace8fcbd3826bd43807> /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dylib
0x378c2000 - 0x378c5ffd  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x378c6000 - 0x378d2ff0  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x378d3000 - 0x3790eff7  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x37935000 - 0x37939ffc  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x379f0000 - 0x37a20ffe  ContentIndex armv7  <7a64670bb2ff3ee39ddee1dc1c72f92d> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x37a21000 - 0x37a36fff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x37a37000 - 0x37a3bfff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x37a3c000 - 0x37b85ff1  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x37b86000 - 0x37ba9ffd  MobileSync armv7  <e42604c550283f4aa517ae8f108b340f> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x37bc7000 - 0x37bebff7  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x37bec000 - 0x37bf1ffe  ApplePushService armv7  <f424c0340de637c08bbeb4f3bd8c6eaf> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x37c5c000 - 0x37c68fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x37c69000 - 0x37c78ff7  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x37d0e000 - 0x37dbcffb  Message armv7  <573d0118246d3d9d8aed17e7ee2faec7> /System/Library/PrivateFrameworks/Message.framework/Message 
```

根据给定的日志详细信息，我不理解苹果商店给出的问题。谁能告诉我问题出在哪里？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:44:04.827

如果你 google ' **CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION** '，你会得到很多点击。许多包含它的崩溃报告都在进行网络活动 - NSURLConnections 等。

一篇文章提到，如果您定义了一个类别，但没有实际实现该方法，您可能会像您一样发生崩溃（编译器不强制类别方法的存在）。

# c++ - 如何在 typeid() 中引用一个类

> ID：12295418
> 
> 赞同：1
> 
> 时间：2012-09-06T07:56:18.187
> 
> 标签：c++

我尝试将类的类型映射到枚举。我知道一般不应该尝试这个（糟糕的设计），但在我的情况下，我想使用枚举作为 CUDA 内核的参数。我无法将主机对象传递给设备。我的问题的背景就足够了。

我尝试通过以下方式检查给定对象是否是特定类的实例：

```
if(typeid(object) == typeid(NameSpaceName::ClassName)){... 
```

我收到以下编译器错误：

```
error: ‘ClassName’ is not a member of ‘NameSpaceName’ 
```

`ClassName`由声明

```
namespace NameSpaceName{
   class ClassName{};
} 
```

为了完整起见，`ClassName`是派生自一个抽象类。我认为这与引用的分辨率无关`ClassName`？

任何想法我的问题是什么？

# android - 防止 ListView 在屏幕外销毁对象

> ID：12295426
> 
> 赞同：2
> 
> 时间：2012-09-06T07:56:43.803
> 
> 标签：android, android-listview

我正在[尝试获取](https://stackoverflow.com/questions/12293340/getting-data-from-simpleadapter)存储在 ListView 部分中的数据。但是，当视图滚动离开页面时，视图将被销毁。

如何告诉 ListView 不要破坏屏幕外的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:01:50.420

如果您不想在 Listview 中销毁视图，则需要更改为 Scrollview 而不是 Listview。Listview 的重点是有效地显示大量数据。

# java - 使用 Tomcat6 在 linux 中运行 C 编译的 .cgi 文件时出现“error=13, Permission denied”错误

> ID：12295428
> 
> 赞同：2
> 
> 时间：2012-09-06T07:56:48.080
> 
> 标签：java, linux, cgi, tomcat6

我在 web.xml 中启用了 CGI 模块，并在 context.xml 中添加了 previleged=true。将 cgi 文件放在我的应用程序的 WEB-INF/cgi/ 文件夹中。尝试访问以下 URL 时，我收到“error=13，Permission denied”错误。(http://localhost:8080/cute/cgi-bin/cutecgi.cgi)

```
 致命的: サーブレット cgi のServlet.service()が例外を投げました
    java.io.IOException: Cannot run program "/var/lib/tomcat6/webapps/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/cute/WEB-INF/cgi/cutecgi.cgi" (in directory "/var/lib/tomcat6/webapps/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/cute/WEB-INF/cgi"): java.io.IOException: error=13, Permission denied
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at java.lang.Runtime.exec(Runtime.java:593)
    at java.lang.Runtime.exec(Runtime.java:431)
    at org.apache.catalina.servlets.CGIServlet$CGIRunner.run(CGIServlet.java:1649)
    at org.apache.catalina.servlets.CGIServlet.doGet(CGIServlet.java:592)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:88)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:865)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)
    at java.lang.Thread.run(Thread.java:662)
    Caused by: java.io.IOException: java.io.IOException: error=13, Permission denied
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:148)
    at java.lang.ProcessImpl.start(ProcessImpl.java:65)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 21 more
. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:00:08.570

这看起来像是 CGI 脚本的文件权限问题。运行 Tomcat 服务器的用户无法访问该文件，或者该文件本身没有该用户的执行权限。

尝试运行此命令以查看文件权限：

```
ls -l /var/lib/tomcat6/webapps/.metadata/.plugins/org.eclipse.wst.server.core/tmp1/wtpwebapps/cute/WEB-INF/cgi/cutecgi.cgi 
```

# java - 如何使包含 jar 的 jar 可集成到其他（eclipse-）项目中？

> ID：12295430
> 
> 赞同：0
> 
> 时间：2012-09-06T07:56:53.870
> 
> 标签：java, eclipse, jar, classpath

我有包含罐子的罐子，例如：

```
dist/my_programmed_jar  (No main)

lib/other_jars.jar (dependencies) 
```

是否可以配置清单文件，以便包含“uberjar”的其他项目找到jar并立即使用它（jar不包含任何main，它只是用于其他项目。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:05:05.360

确定类路径的默认 Eclipse 插件无法处理嵌套的 JAR，因为您需要一个特殊的类加载器。

我不知道支持这个类加载器的插件，所以我的回答是“不”。

您将不得不解压 ueberjar。我建议将它解压到一个新的 Eclipse 项目中，将所有 JAR 添加到这个新项目的构建路径中，然后将它们全部导出（请参阅“Java 构建路径”项目设置中的“订购和导出”选项卡）。

您现在可以将此新项目作为依赖项添加到所有其他项目中（请参阅“Java 构建路径”项目设置中的“项目”选项卡）。

# asp.net - Gridview 计数行 = 2 但网页上没有记录

> ID：12295431
> 
> 赞同：0
> 
> 时间：2012-09-06T07:57:05.147
> 
> 标签：asp.net, vb.net, gridview

我有一些代码不起作用，无法找出 wy 并且没有收到任何错误。我正在尝试用视图状态中的数据表填充网格视图。当我计算 gridview 的行数时，它说它有 2 行，但在网页上我什至看不到 1。

编码：

```
 Dim dt As DataTable = DirectCast(ViewState("myData"), DataTable)
   GridViewArtikelenSelected.DataSource = dt
   GridViewArtikelenSelected.DataBind()
   Dim test As Integer = GridViewArtikelenSelected.Rows.Count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:04:52.477

可能是您的 GridView 在中`UpdatePanel`，在网格绑定后可能不会刷新。

# php - php中的对象转换

> ID：12295432
> 
> 赞同：0
> 
> 时间：2012-09-06T07:57:13.557
> 
> 标签：php

> **可能重复：**
> [将当前对象 ($this) 转换为后代类](https://stackoverflow.com/questions/4080217/cast-the-current-object-this-to-a-descendent-class)

是否可以在 php.ini 中执行从基类对象到子类对象的对象转换。我的基类和子类如下。

```
<?php
class Base
{

}
class child extends Base
{
}
$b=new Base();
$c=(Child)$b;//MY QUESTION IS CAN I PERFORM THIS TASK???
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:15:45.493

正如评论中所写，没有像 PHP 中的对象转换之类的东西，这可以从 Java 中知道，例如..

使用序列化有一些解决方法，但我认为这是一个错误的笑话......

无论如何，在定义函数/方法时，您可以像这样键入参数：

```
class Foo { }

class Bar {
    public function bar(Foo $foo) {
        ;
    }
} 
```

无论如何，尽管您仍然不能也不能将父对象转换为子类（这在 Java 中是不能够的，反之亦然是可以的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:08:44.907

不，您不能在 PHP 中执行此操作。你为什么会，作为孩子，里面有一切？

# azure - 如何在 Windows Azure 网站上存储文件？

> ID：12295433
> 
> 赞同：12
> 
> 时间：2012-09-06T07:57:16.810
> 
> 标签：azure, azure-web-app-service

我刚刚阅读了一篇关于 Windows Azure 网站的文章，并想评估这项服务。我的公司刚刚开发了一个基于 ASP.NET MVC 的网站，使我们的客户能够下载我们提供的文件以及上传文件。

两者都基于我们发送的 URL。工作流程很简单： 1\. 我们登录我们的网站，上传文件并检索网站生成的链接 2\. 我们通过电子邮件将链接发送给客户 3\. 客户无需验证即可使用此链接并轻松下载文件。

或者 1\. 我们登录到网站并检索网站生成的上传链接 2\. 我们通过电子邮件将链接发送给客户 3\. 客户无需验证即可使用此链接并轻松上传文件。

我们目前在我们自己的基础设施中本地托管该网站。该网站很少使用，文件也不大。我们只是将它们存储在我们的文件服务器上。

我想知道如何在 WAWS 上托管这个网站，我的第一个问题是：我有哪些选项可以实际存储文件？第二：当客户下载或上传文件时，我们的网站会在内部向我们发送通知电子邮件。使用 WAWS 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-06T08:48:03.657

如果您想在 Windows Azure（网站）中保存文件，您应该使用[Blob Storage](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)。您可能喜欢的功能：

*   此处上传的所有文件都会获得如下 URL：http: [//myaccount.blob.core.windows.net/somecontainer/somefile.txt](http://myaccount.blob.core.windows.net/somecontainer/somefile.txt)
*   您可以使用自定义 CNAME 来获取[http://files.mycompany.com/somecontainer/somefile.txt](http://files.mycompany.com/somecontainer/somefile.txt)
*   [您可以通过共享访问签名](http://msdn.microsoft.com/en-us/library/windowsazure/ee772877.aspx)将安全性应用于 blob
*   Blob 存储[非常便宜](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=data-management)
*   每个 blob 都在 Windows Azure 数据中心的三台计算机上复制。写入 blob 会更新所有三个副本，因此以后的读取不会看到不一致的结果。
*   异地复制在相隔数百英里且位于同一区域内的两个位置（即美国中北部和中南部之间、北欧和欧洲西部之间以及东亚和东南亚之间）复制您的 Windows Azure Blob 和表数据）。
*   每个存储帐户限制为 100TB

另一方面，使用 Windows Azure 无法发送电子邮件。您需要通过第三方来执行此操作。我个人使用[Amazon SES](http://aws.amazon.com/ses/)，但[SendGrid](http://sendgrid.com/azure.html)也是一个不错的选择，因为他们为 Azure 用户提供了特殊产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T04:13:59.363

我最近正在使用 Azure Web 应用程序向客户展示开发的进展情况。在我的场景中，当在生产中时，它将在可以访问文件系统的专用服务器中执行，因此我无法使用 Azure Blob 存储。好的一面是 Azure Web 应用程序附带存储（其大小取决于应用程序所在的层），您可以通过 D:\home\site"your path" 访问它，[该存储在此处进行了说明](https://docs.microsoft.com/en-gb/azure/app-service/web-sites-available-operating-system-functionality#file-access)。您可以通过 FTP 访问它们（[在此处解释](https://github.com/projectkudu/kudu/wiki/Accessing-files-via-ftp)）。

# com - 未发布的 DirectShow CSource 过滤器使程序在进程关闭时崩溃

> ID：12295434
> 
> 赞同：2
> 
> 时间：2012-09-06T07:57:23.790
> 
> 标签：com, directshow

我正在开发一个 DirectShow CSource 捕获过滤器。它工作正常，但是当我关闭使用过滤器的程序时（在这种情况下，我正在使用 VLC 进行测试，但其他程序也会发生同样的情况），程序崩溃（如果我在 Visual Studio 中调试它，那么断点被触发）。

我一直在寻找这个问题一段时间，发现我的源过滤器和源流都没有被释放；也就是说，它们的引用计数器在程序结束时为 1，DllCanUnloadNow() 函数报告有 2 个对象仍在使用中，并且当调用 CoUninitialize() 时，程序崩溃。

我很确定引用计数器得到了正确处理，因为我使用的是基类实现。我能想到的软件中唯一不寻常的事情是我使用的是我自己的 DllGetClassObject() 版本：我将 .DEF 文件配置为导出 MyDllGetClassObject() 而不是 DllGetClassObject()，因此我可以在之前插入一些代码调用默认实现。我认为这不是问题，因为我检查了在 MyDllGetClassObject() 末尾返回的所有对象的引用计数器是否为 1。

我想我错过了关于过滤器生命周期的一些东西，但不知道是什么（这是我正在开发的第一个捕获过滤器）。有什么建议吗？

先感谢您，

吉列尔莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:36:06.693

我终于弄清楚发生了什么。我的源过滤器中的静态方法是在进程关闭时`InitializeInstance`调用的`bLoading == false`。`rclsid == <the GUID of my filter>`这似乎是从过滤器实例中释放剩余引用计数器的合适位置。

`CoUninitialize`我从 StackOverflow 上的另一篇题为[DirectShow code crash after exit (PushSourceDesktop sample)](https://stackoverflow.com/questions/11249298/directshow-code-crashes-after-exit-pushsourcedesktop-sample)的帖子中得到了关于释放所有 COM 对象的重要性的关键思想。我所需要的只是多一点关于 DirectShow 过滤器生命周期的知识。

不管怎样，谢谢你的努力，罗曼，我知道这个线程从一开始就听起来很模糊:)

# css - 合并 div 表单元格？

> ID：12295439
> 
> 赞同：0
> 
> 时间：2012-09-06T07:57:54.843
> 
> 标签：css, html

我有一个 div-table 可以正常工作，大约有 4 列，但现在我想让这些项目可扩展，以便另一个 div 出现在条目下方。问题是，如果我在表格行下方使用另一个 div，它的宽度就会被卡在第一列的宽度上。

我需要的是一个忽略表格布局的部门......有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:49:24.317

据我所知，CSS 没有使用 colspan 属性显示 div 的选项。

如果要显示实际表格数据，我建议使用真正的表格元素，或者使用带有表格属性和您自己的自定义样式的 div 简单地重新创建布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:51:13.573

看起来您在底部的最终跨越 div 正在从您的 divTable 类中继承一些奇怪的继承。在您的代码中，您的最终 div 位于 divTable 的包装器中。我已经稍微修改了您的代码，使 div 位于 divTable div 之外，并且它跨越所有列。

```
<div class="navContent">
<div id="lastRequests" class="divTable">
<div class="divRow bold">
  <div class="divCell c1"> SiteID </div>
  <div class="divCell c2"> Ort </div>
  <div class="divCell c3"> Anfrage </div>
  <div class="divCell c4"> Ergebnis </div>
  <div class="divCell c5"> Datum </div>
</div>
<div class="divRow">
  <div class="divCell c1"> 56831-12481 </div>
  <div class="divCell c2"> gütersloh </div>
  <div class="divCell c3"> 332312, Bielefeld, <span class="tooltip" data-tooltip="Open.  Web. Business.">Deutscheland</span>, 80.32, 43.23</div>
  <div class="divCell c4"> Proxy </div>
  <div class="divCell c5"> 05.09.2012 20:20:21 </div>
</div>
</div>
<!-- move this div here -->
<div style="background-color: #0F9;">
This div should use the whole width
</div>
</div> 
```

编辑：虽然这会起作用，但我同意上面其他所有人的观点，他们说你真的应该只为这些数据使用一个表，而不是尝试使用 div 复制表功能。

# redirect - ActionController::DoubleRenderError in Controls/itemsController#update 只能渲染或重定向

> ID：12295442
> 
> 赞同：1
> 
> 时间：2012-09-06T07:58:14.633
> 
> 标签：redirect, parent, render

```
 responds_to_parent do
      render :update do |page|
          page << "tb_remove"
          item_link = params[:controller].eql?("compliance_items") ? edit_compliance_compliance_item_path(master, @master_item) : edit_controls_item_path(@master_item)
          #          page.redirect_to(item_link + "?token=#{params[:token]}")
     end
 end 
```

嗨，在上面的代码中，我遇到了双重渲染错误（主题行是错误）......有人可以帮忙吗？

它也很糟糕 - 堆栈溢出不会提供任何选项来创建没有声誉的新标签..!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:04:28.733

您不能同时调用`render`和`redirect_to`。这就是你所做的（`redirect_to`在`render`块内调用。

在某些情况下，要重定向，您需要将`if`条件移到`render`块之外。尝试这样的事情：

```
if I_need_to_redirect
  item_link = params[:controller].eql?("compliance_items") ? edit_compliance_compliance_item_path(master, @master_item) : edit_controls_item_path(@master_item)
  redirect_to item_link
else
  responds_to_parent do
    render :update do |page|
      page << "tb_remove"
    end
  end
end 
```

Where`I_need_to_redirect`应替换为检查是否应重定向的条件（如果为 false，则应改为呈现）。

# powershell - 如何从运行PowerShell脚本的Windows服务显示弹出窗口

> ID：12295443
> 
> 赞同：1
> 
> 时间：2012-09-06T07:58:22.337
> 
> 标签：powershell, windows-services

我写了一个在 Windows 服务中运行的豪华脚本。从计算机上的特定操作，我需要显示一个弹出窗口警告用户。

```
$popupMsg = @" message "@   
[System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
[System.Windows.Forms.MessageBox]::Show($user+ $popupMsg,"Remote Connection Information","OK","Warning") 
```

当我从 PowerGui 运行此脚本时，弹出窗口显示正常，但当我运行运行此脚本的 windows 服务时，弹出窗口不会出现。这有什么问题？谢谢人们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:26:13.537

您希望支持哪个版本的 Windows？[会话 0 隔离](http://www.coretechnologies.com/WindowsServices/FAQ.html#WhatIsSession0Isolation)将阻止您在 Vista 及更高版本的用户桌面上显示任何类型的 GUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:17:00.333

尝试在服务设置中设置“允许服务与桌面交互”：

![在此处输入图像描述](../Images/5ed7f289276a247e81b58d82da337294.png)

# php - PHP 查找即将发生的事件

> ID：12295445
> 
> 赞同：0
> 
> 时间：2012-09-06T07:58:27.807
> 
> 标签：php, arrays, multidimensional-array, foreach

我有一个多维数组。格式如下：

```
Array
(
    [1] => 2012.09.04;01:00;NZD;ANZ Commodity Price;1;0.5%;;-0.5%;1346720400
    [2] => 2012.09.04;01:30;AUD;Current Account Balance;2;-11.80B;-12.2B;-14.90B;1346722200
    [3] => 2012.09.04;01:30;JPY;Labor Cash Earnings (YoY);2;-1.2%;-0.3%;-0.6%;1346722200
    [4] => 2012.09.04;04:30;AUD;RBA Interest Rate Decision;3;3.5%;3.5%;3.5%;1346733000
    [5] => 2012.09.04;05:45;CHF;Gross Domestic Product (YoY);3;0.5%;1.6%;2.0%;1346737500
) 
```

现在我使用这个函数转换它：

```
private function array_to_json($array) {    

    $arr_out = array();
    foreach ($array as &$r) {
       $arr_out[] = explode(";", $r);
    }
    unset($r);
    return $arr_out;
} 
```

并得到这个结果：

```
Array
(
    [0] => Array
        (
            [0] => 2012.09.04
            [1] => 01:00
            [2] => NZD
            [3] => ANZ Commodity Price
            [4] => 1
            [5] => 0.5%
            [6] => 
            [7] => -0.5%
            [8] => 1346720400
        )

    [1] => Array
        (
            [0] => 2012.09.04
            [1] => 01:30
            [2] => AUD
            [3] => Current Account Balance
            [4] => 2
            [5] => -11.80B
            [6] => -12.2B
            [7] => -14.90B
            [8] => 1346722200
        )

    [2] => Array
        (
            [0] => 2012.09.04
            [1] => 01:30
            [2] => JPY
            [3] => Labor Cash Earnings (YoY)
            [4] => 2
            [5] => -1.2%
            [6] => -0.3%
            [7] => -0.6%
            [8] => 1346722200
        )

    [3] => Array
        (
            [0] => 2012.09.04
            [1] => 04:30
            [2] => AUD
            [3] => RBA Interest Rate Decision
            [4] => 3
            [5] => 3.5%
            [6] => 3.5%
            [7] => 3.5%
            [8] => 1346733000
        )

    [4] => Array
        (
            [0] => 2012.09.04
            [1] => 05:45
            [2] => CHF
            [3] => Gross Domestic Product (YoY)
            [4] => 3
            [5] => 0.5%
            [6] => 1.6%
            [7] => 2.0%
            [8] => 1346737500
        )

    [5] => Array
        (
            [0] => 2012.09.04
            [1] => 05:45
            [2] => CHF
            [3] => Gross Domestic Product s.a. (QoQ)
            [4] => 2
            [5] => -0.1%
            [6] => 0.2%
            [7] => 0.7%
            [8] => 1346737500
        )
) 
```

其中 [8] 是时间戳。

如何找到第一个即将发生的事件 ([8]>time()) 并返回它的值？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:03:20.403

您必须检查所有 [8] 个项目，并检查每个项目是否大于 time()。如果是这样，则将它们组成一个数组。最后，在这个数组上使用一个[min 函数](http://php.net/manual/en/function.min.php)来获得最小的数字。

代码：

```
$future = array();
foreach($arr_out as $a)
    if ($a[8] > time())
        $future[] = $a[8];

$nearest = min($future); //contains the first upcoming event 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:22:53.080

试试这个：-

```
$marr = array
(
   array
        (
            '0' => '2012.09.04',
            '1' => '01:30',
            '2' => 'AUD',
            '3' => 'Current Account Balance',
            '4' => 2,
            '5' => '-11.80B',
            '6' => '-12.2B',
            '7' => '-14.90B',
            '8' => 1346919271,
        ),array
        (
            '0' => '2012.09.04',
            '1' => '01:30',
            '2' => 'AUD',
            '3' => 'Current Account Balance',
            '4' => 2,
            '5' => '-11.80B',
            '6' => '-12.2B',
            '7' => '-14.90B',
            '8' => 1346919686,
        )
);

$upComingArray = '';
foreach($marr as $key)
{
    $end =  end($key);
    if ($end > time()){

        $upComingArray[] = $key;
    }
}
echo "<pre>";
print_r($upComingArray); 
```

# jquery - 间隔，在 othertab 时停止。当返回播放所有间隔时

> ID：12295450
> 
> 赞同：0
> 
> 时间：2012-09-06T07:58:48.057
> 
> 标签：jquery, google-chrome

有点奇怪的标题，但这是我得到的。

我发现这个问题问了几次，但遮阳篷似乎对我来说不能正常工作

我得到的是一个上下弹跳以吸引您的注意力的页脚，当您将鼠标悬停在它上面时，它会展开并显示一个过滤器。

现在它在窗口中完美运行，但是当我移动到另一个选项卡并返回该站点时，它会依次播放所有弹跳。

我读过一篇文章，当在另一个选项卡中时，chrome 会减慢间隔以提高 cpu 速度。

我现在只在窗口设置为焦点时播放计时器，并在设置为模糊时禁用。但这不是 100% 的时间。

```
var $bounceInter = 6000;

function mycode() {
    if($bounceOn == true) {
            $("#footer").animate({bottom:"+=20px"},150, 'swing').animate({bottom:"-=20px"},150, 'swing').animate({bottom:"+=10px"},100, 'swing').animate({bottom:"-=10px"},100,"swing",function(){$("#footer").data("bouncing", false);});
    }
    clearTimeout($bounceTimer);
  $bounceTimer = setTimeout(mycode, $bounceInter); // repeat myself
}

$(window).focus(function() {
    $bounceTimer = setTimeout(mycode, $bounceInter);
});

$(window).blur(function() {
    clearTimeout($bounceTimer);
});

var $bounceTimer = setTimeout(mycode, $bounceInter); 
```

还有其他可能的修复吗？

我从另一个人那里得到了退回代码，也许问题在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:53:43.597

将该方法合并到[`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)您的代码中。由于您的代码不完整（的作用是`$bounceOn`什么？可能设置在悬停或其他东西上），我将根据您的函数名称突出显示通用步骤。我删除了`$`前缀，因为按照惯例，它用于标记 jQuery 对象。

为方便起见，我们正在使用规范化 API，它使用本机（前缀）`requestAnimationFrame`方法和必要时的 polyfill。polyfill 由 Erik Moller 创建，可以[在他的博客上](http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating)找到。

```
// Minimum delay between each call
var bounceInter = 6000
  , raf
  , bounceTimer;

function nextAnimationStep() {
    raf = requestAnimationFrame(function() {
        // Code here (eg animation)
        bounceTimer = setTimeout(nextAnimationStep, bounceInter);
    });
}

// Initial step
nextAnimationStep();

// To cancel animation (to restart, just call `nextAnimationStep();` ):
cancelAnimationFrame(raf);
clearTimeout(bounceTimer); 
```

这是您的动画，空白处已填满：http: [//jsfiddle.net/exPeP/1](http://jsfiddle.net/exPeP/1)。

# hibernate - 在 Hibernate 中将 Null 值设置为 query.setString 以获取命名参数？

> ID：12295454
> 
> 赞同：1
> 
> 时间：2012-09-06T07:58:55.567
> 
> 标签：hibernate

如何为 Hibernate 中的命名参数将 Null 值设置为 query.setString？

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:22:36.383

我认为你不能这样做，因为在 SQL 中你需要不同的空值语法。SQL 中的示例：

```
select x.col from table x where x.string = 'text'; 
```

但是你有一个空值

```
select x.col from table x where x.string is null; 
```

因此，您不能在 SQL 的命名参数中设置 null。同样在 Hibernate 中，当您的字符串为空时，您需要一个不同的查询。例如：

```
String select;
if (s == null) {
  select = "from Table where column is null";
} else {
  select = "from Table where column = :string";
}
Query q = session.createQuery(s);
if (s != null) {
  q.setString("string", s);
} 
```

# php - 在 php 中创建树视图

> ID：12295458
> 
> 赞同：1
> 
> 时间：2012-09-06T07:59:18.597
> 
> 标签：php, file, recursion, treeview

我有几个数组如下：

```
$files = Array ('dir1/dir2/dir3/file1', 
            'dir1/dir2/dir3/file2', 
            'dir1/dir2/dir3/file3',
            'dir1/dir2/dir3/file4'
        ); 
```

我徒劳地尝试了几个递归函数来转换如下：

```
$files = Array (
        'dir1' => Array (
                'dir2' => Array (
                            'dir3' => Array (
                                        'file1', 
                                        'file2', 
                                        'file3', 
                                        'file4'
                             )
                 )
         )
); 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:16:15.163

你的意思是这样的：

```
$files = array('dir1/dir2/dir3/file1', 
            'dir1/dir2/dir3/file2', 
            'dir1/dir2/dir3/file3',
            'dir1/dir2/dir3/file4'
);

$newFiles = array();
foreach($files as $file){
    $one = explode('/', $file);       // explode '/' to get each value
    $last = array_pop($one);          // pop the last item because it is the file
    $rev = array_reverse($one);       // we reverse the array in order to append the last to previous
    $mixArray = array();              // create a temporary array

    foreach($rev as $num => $dir){    // loop in reversed array to extract directories

        $mixArray[$dir] = $last;      // append the last item to the current dir, the first loop puts the file to the last directory
        $last = $mixArray;            // overwrite last variable with current created array

        if($num < count($rev)-1){ 
            unset($mixArray);         // if the current directory is not the last in reversed array we unset it because we will have duplicates
        }
    }

    $newFiles = array_merge_recursive($newFiles, $mixArray); // merge recursive the result to main array
}

var_export($newFiles); 
```

[键盘示例](http://codepad.org/KHI3Qrzi)

# android - 我无法使用选择器添加样式

> ID：12295461
> 
> 赞同：0
> 
> 时间：2012-09-06T07:59:29.717
> 
> 标签：android

我有风格

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

<style name="TextStyle" > 
        <item name="android:textSize">8sp</item> 
        <item name="android:textColor">#0A0A0A</item> 
        <item name="android:typeface">serif</item> 

</style>

 <style name="TextStylePressed" > 
        <item name="android:textSize">18sp</item> 
        <item name="android:textColor">#0A0A0A</item> 
        <item name="android:typeface">serif</item> 
        <item name="android:textStyle">bold</item> 
        <item name="android:background">#C2C2C2</item>   
</style>

</resources> 
```

我使用选择器 arrow.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@style/TextStylePressed" android:state_selected="true"/>
    <item android:drawable="@style/TextStylePressed" android:state_pressed="true"/>
    <item android:drawable="@style/TextStylePressed" android:state_focused="true"/>
    <item android:drawable="@style/TextStyle" />

</selector> 
```

**问题是我无法理解 - 如果它有效？**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@drawable/arrow"               //  <---- Framed here
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/arrow" //  <---- then here
    android:orientation="vertical" > 

</LinearLayout> 
```

**因此，在所有尝试之后什么都没有发生**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:07:40.183

AFAIK 选择器只能定义为选择 a`drawable`而不能选择其他任何`attribute`. 如果您检查[文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)，它会编译为 StatelistDrawable，所以我相信它只能用于可绘制对象

# configuration - 如何在maven的平面多模块项目中配置scm？

> ID：12295462
> 
> 赞同：4
> 
> 时间：2012-09-06T07:59:32.523
> 
> 标签：configuration, maven-2, maven-release-plugin

我正在使用以下项目结构

```
parent
   +-- pom.xml (parent and reactor)
module-1
   +-- pom.xml
module-...
   +-- pom.xml 
```

我希望能够`mvn release:prepare`在父项目上进行操作，并在 svn 中产生战争以及一致的标签结构。

现在，除了模块的标记外，一切似乎都工作正常，也就是说，a`mvn release:prepare`将标记父项目但没有子项目。我已经`commitByProject`在 parent-pom 的配置中找到并尝试了该开关。我已经在 moduel-poms 中输入和删除了 scm 配置，我尝试在 module-poms 中配置 release-plugin 都无济于事。发布步骤从不要求我为任何模块提供标记名，因此以后不会在项目中创建标记。

如何配置父模块和模块，以便 a`mvn release:prepare`将标记模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:21:30.723

我建议重新组织结构以适应 Maven 的最佳实践，如下所示：

```
root (pom.xml; parent)
  +-- module-1 (pom.xml)
  +-- module-2 (pom.xml)
  +-- module-... 
```

这将使您的 Maven 生活更轻松，也可以通过 mvn release:prepare 等进行发布。

我假设您在 VCS 中具有以下文件夹结构：

```
root 
  +-- parent (pom.xml)
  +-- module-1 (pom.xml)
  +-- module-2 (pom.xml)
  +-- module-... 
```

root 是从版本控制中检出的文件夹（SVN 中的主干；或主 git）。

如果您在给定模块中给出了到父级的正确相对路径，那么一切都应该没有任何问题......在父级中配置 scm 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:47:59.323

经过无数小时的搜索，我不再假设，可以使用 maven 发布插件独立于其他模块标记每个模块。

我发现（并且丢失了）一个明确的评论，这对于发布插件是不可能的，并且还有进一步的提示，例如，发布插件在非交互模式下只接受一个 scm 标签。

由于我是 Java 开发人员，而不是 maven 开发人员，因此我拒绝更改我的包结构，因此只能手动进行标记。

# loops - Mura 中的 Coldfusion 循环在 10 次迭代后停止

> ID：12295464
> 
> 赞同：2
> 
> 时间：2012-09-06T07:59:37.003
> 
> 标签：loops, coldfusion, mura

谁能看到这个循环有什么问题？我不是冷融合开发人员，但我正在为我们缺席的开发人员做一些事情。我试图让循环在 10 次迭代后停止，但它没有发生。我使用的 CMS 是 Mura。谢谢。

```
 <cfset limit = 1>
                    <cfloop condition="iterator.hasNext()">
                        <cfif limit LTE 10>
                        <cfoutput>
                            <cfset item = iterator.next()>
                                <tr>
                                    <td>#item.getId()#</td>
                                    <td>#item.getTitle()#</td>
                                </tr>
                         </cfoutput>    
                         </cfif>
                        <cfset limit = limit + 1>
                    </cfloop> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T12:19:42.643

虽然 Ben 的回答会起作用，但最好的选择是告诉 Mura 迭代器在开始循环之前要进行多少次迭代。

```
<cfset iterator.setNextN(10) />
<cfloop condition="iterator.hasNext()">
    <cfset item = iterator.next()>
        <cfoutput>
            <tr>
                <td>#item.getId()#</td>
                <td>#item.getTitle()#</td>
            </tr>
        </cfoutput>    
</cfloop> 
```

通常它默认为 10，因此在您的设置或代码中的某处必须将其设置为更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T08:07:50.183

我只是检查限制 GTE 10 并使用 CFBREAK 提前终止循环。

```
<cfset limit = 0>
<cfloop condition="iterator.hasNext()">
    <cfoutput>
        <cfset item = iterator.next()>
            <tr>
                <td>#item.getId()#</td>
                <td>#item.getTitle()#</td>
            </tr>
     </cfoutput>    
    <cfset limit++>
    <cfif limit GTE 10>
        <cfbreak>
    </cfif>
</cfloop> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:34:35.017

还有另一种选择`<cfloop>`：

```
<cfloop from="1" to="10" index="ii">
    <cfif iterator.hasNext()>
        <cfset item = iterator.next() />
        <cfoutput>
            <tr>
                <td>#item.getId()#</td>
                <td>#item.getTitle()#</td>
            </tr>
        </cfoutput>
    <cfelse>
        <cfbreak />
    </cfif>
</cfloop> 
```

# java - Java如何使用循环在数组中添加int

> ID：12295466
> 
> 赞同：0
> 
> 时间：2012-09-06T07:59:36.630
> 
> 标签：java

我似乎无法弄清楚逻辑，这是我的代码

```
class stringrays {
public static void main (String[] args) {

    int[] numrays = {23, 6, 47, 35, 2, 14};
    int i;
    int z;
    int y;

    for (i=1; i < numrays.length; i++) {
        z = numrays[0] + numrays[i];
        System.out.println(z);
    }
} 
```

以上结果显示 29 70 58 25 37

这意味着数组 0 添加数组 1，然后数组 0 添加数组数组 2，依此类推。

我想要的是将第一个数组 0 添加到下一个数组中，依此类推.. 使用循环条件。

然后得到总和的平均值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:05:11.587

尝试这个，

```
int[] numrays = {23, 6, 47, 35, 2, 14};
int z = 0;

for (int i=0; i < numrays.length; i++) {
    z = z + numrays[i];
    System.out.println(z);
}
    System.out.println("Average : "+(z/numrays.length) );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:13:22.153

或[LambdaJ](http://code.google.com/p/lambdaj/wiki/LambdajFeatures)方式：

```
int sum = sum(asList(1, 2, 3, 4, 5)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:04:05.423

如果您的意思是 23、6 然后 6 + 47 等等，您需要这样做：

```
for (i=0; i < numrays.length - 1; i++) 
{
   z = numrays[i] + numrays[i + 1];
   System.out.println(z);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:04:06.250

删除`numrays[0]`并替换为`z`

```
 int z =0;
for (i = 0; i < numrays.length; i++) {
        z = z + numrays[i];
        System.out.println("Sum:"+z);

    }
    System.out.println("Average:"+z/numrays.length); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:06:18.713

检查你的逻辑。现在您正在打印数组中第一个和第 n 个数字的总和；旧的 z 值丢失。对于循环求和，使用like`z = z + something`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T08:07:45.787

目前还不清楚你需要什么......

将值添加到下一个位置：

```
int[] numrays = {23, 6, 47, 35, 2, 14};

for(int i = 0; i < numrays.length - 1; i++) {
    numrays[i] += numrays[i + 1];
}
System.out.println(Arrays.toString(numrays)); 
```

得到平均值：

```
int[] numrays = {23, 6, 47, 35, 2, 14};
double sum = 0;

for(int i = 0; i < numrays.length; i++) {
    sum += numrays[i];
}

double mean = sum / numrays.length;

System.out.println(mean); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T08:09:43.600

您可以使用“for each”循环来对数组的内容求和，然后找到平均值。

```
int sum = 0;

for(int each : numrays)
{
   sum = sum + each;
}

float average = each / numrays.length; 
```

# c++ - 对共享内存使用无锁算法

> ID：12295471
> 
> 赞同：4
> 
> 时间：2012-09-06T08:00:01.870
> 
> 标签：c++, ipc, shared-memory, lock-free

我想使用`lock-free algorithm`共享内存来避免互斥锁。我有一些共享数据的进程使用共享内存。如果一个进程正在锁定互斥体并崩溃，那么所有其他进程也会崩溃。

我阅读了一些使用链表实现无锁算法的论文。但是在我的共享内存中，我无法定义在这块内存上使用的数据结构。我只有一个指向这个块的指针。

所以我对在我的情况下应用无锁算法没有任何想法。我需要你的帮助。如果我的英语很差，谢谢和抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:33:02.140

> 如果一个进程正在锁定互斥体并崩溃，那么所有其他进程也会崩溃。

特别是对于这个用例，有[强大的互斥锁](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutexattr_setrobust.html)：

> PTHREAD_MUTEX_ROBUST
> 
> 如果包含健壮互斥锁的拥有线程的进程在持有互斥锁时终止，则应通过锁定函数的返回值 [EOWNERDEAD] 通知获取互斥锁的下一个线程终止。如果一个健壮的互斥锁的拥有线程在持有互斥锁的同时终止，则可以通过返回值 [EOWNERDEAD] 通知下一个获取该互斥锁的线程。然后，被通知的线程可以尝试通过调用 pthread_mutex_consistent() 再次将受互斥锁保护的状态标记为一致。后续调用pthread_mutex_unlock()成功后，互斥锁将被释放，其他线程可以正常使用。如果互斥锁在没有调用 pthread_mutex_consistent() 的情况下被解锁，它应处于永久不可用状态，并且所有锁定互斥锁的尝试都将失败并出现错误 [ENOTRECOVERABLE]。这种互斥体上唯一允许的操作是 pthread_mutex_destroy()。

# c++ - 将数组的内容从偏移量写入 C++ 向量

> ID：12295479
> 
> 赞同：3
> 
> 时间：2012-09-06T08:00:20.247
> 
> 标签：c++, vector

我正在尝试将数组的内容写入从偏移量开始的向量中。

```
std::copy(arr,&arr[100],std::back_inserter(vect[offset]); 
```

这里 arr 是 100 个整数的数组。vect 是一个包含整数的向量。上面这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:04:17.487

的参数[`std::back_inserter`](http://en.cppreference.com/w/cpp/iterator/back_inserter)必须支持`push_back()`运算，并且`int`不支持并且 an`int`是`vect[offset]`（假设`vect`是 a `vector<int>`）的结果。

如果您可以使用迭代器而不是偏移量，则可以使用[`std::vector::insert()`](http://en.cppreference.com/w/cpp/container/vector/insert).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:04:42.840

`std::back_inserter`在后面插入，而不是在偏移处。你想要的是`std::inserter`，它需要（并更新）一个插入位置迭代器。

你可能想要`std::inserter(vect, vect.begin() + offset)`.

请注意，这将在每个插入操作中重复重新定位尾部序列。正如@Nim 建议的那样，`insert()`在这种情况下，直接操作更可取，因为它一步插入整个范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T08:06:19.170

使用该`insert()`函数，特别是采用偏移量和范围的变体：

```
vect.insert(vect.begin() + offset, arr,&arr[100]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T08:04:05.363

问题是它[`back_inserter`](http://en.cppreference.com/w/cpp/iterator/back_inserter)看起来像一个迭代器，但它调用`push_back`了它的参数，它必须是一个支持 的容器`push_back()`，而不是容器的元素。

如果要从偏移量插入，则必须找到与该位置对应的迭代器，并将其作为第三个参数传递给`std::copy`，或使用[`std::vector::insert`](http://en.cppreference.com/w/cpp/container/vector/insert). 当然，您必须确保容器足够大，即从`offset_iterator`到末尾的范围至少为 size `100`。

# visual-studio-lightswitch - Lightswitch - 在自定义 Silverlight 控件中使用 Lightswitch 控件

> ID：12295480
> 
> 赞同：0
> 
> 时间：2012-09-06T08:00:35.880
> 
> 标签：visual-studio-lightswitch

我是lightswitch的新手，我目前的任务是在silverlight中创建一个自定义控件，我想问一下是否可以在我的自定义silverlight控件中使用现有的lightswitch控件，比如日期时间控件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:22:36.627

您可以使用任何 Silverlight 控件但日期时间控件。出于某种原因，我一直无法使用 LightSwitch 实现这一功能。

有关使用 LightSiwtch 创建 Silverlight 控件的免费视频，请参见本页顶部：http: [//lightswitchhelpwebsite.com/Market/Books/CreatingVisualStudioLightSwitchCustomControlsBeginnertoIntermediate.aspx](http://lightswitchhelpwebsite.com/Market/Books/CreatingVisualStudioLightSwitchCustomControlsBeginnertoIntermediate.aspx)

# database - 将复合对象存储在数据库中的最佳实践

> ID：12295483
> 
> 赞同：3
> 
> 时间：2012-09-06T08:00:46.377
> 
> 标签：database, design-patterns

我的程序中有一些对象层次结构（即 PHP）。其采用复合设计模式。即`countries -> states -> cities -> districts`。在我的代码中，我经常将这些对象作为一些抽象区域单元来处理。现在，我应该将所有这些对象保存在数据库（即 MySQL）中。

什么是舒适地存储和取回对象的最佳数据库结构？我应该为每种类型的对象（`country_table, state_table, city_table ...`）创建不同的表还是将所有对象存储在一个表 areaUnit_table 中？

# c# - 从 javascript 调用 C# webservices 并使用它（json 格式）

> ID：12295492
> 
> 赞同：6
> 
> 时间：2012-09-06T08:01:18.223
> 
> 标签：c#, javascript, web-services

我已经创建了 ac# webservice，我正在尝试调用它并从 javascript 脚本中使用它，这是什么方法或最好的方法，在此先感谢。我会解释更多：这是网络服务：

```
 public class DocumentInfo : System.Web.Services.WebService
{

    [WebMethod(EnableSession = true)]
    [ScriptMethod(ResponseFormat = System.Web.Script.Services.ResponseFormat.Json)]
    public string GetDocumentInfo(string id)
    {
        Document document = new Document(Int32.Parse(id));    
        string output = JsonConvert.SerializeObject(document);
        return output;
    }
} 
```

我已经对其进行了测试，它可以工作，当我尝试建议的 ajax 解决方案时，我收到了这个错误 500 Internal Server Error。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:06:21.560

阅读一些教程

[http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/](http://encosia.com/using-jquery-to-consume-aspnet-json-web-services/) [http://weblogs.asp.net/jalpeshpvadgama/archive/2010/08/29/calling-an-asp- net-web-service-from-jquery.aspx](http://weblogs.asp.net/jalpeshpvadgama/archive/2010/08/29/calling-an-asp-net-web-service-from-jquery.aspx)

```
function TestService() 
{              
    try 
      {

       $.ajax({
         type: "POST",
         url: "http://webserviceURL.asmx/YourWebMethodName",
         data: "{'abc':'" + 123 + "'}", // if ur method take parameters
         contentType: "application/json; charset=utf-8",
         success: SuccessTestService,
         dataType: "json",
         failure: ajaxCallFailed
      });
    }
    catch (e)
    {
        alert('failed to call web service. Error: ' + e);
    }
}

function SuccessTestService(responce) {
    alert(eval(responce.d));
}

function ajaxCallFailed(error) {
        alert('error: ' + error);

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:05:06.567

您需要发出 AJAX 请求并等待回调接收数据。

一个非常简单的使用 jQuery 的例子：

```
$.ajax({
  url: "/my_service.cs"
}).done(function(data) { 
  console.log("Received: ", data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:03:38.157

使用`jQuery AJAX`：

```
$.ajax({
  url: 'YourServiceURL',
  success: function(data) {
     alert('Web Service Called!');
  }
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:09:41.760

```
go through this demo project it will help you in multiple direction 
```

> [http://www.codeproject.com/Articles/21045/Different-methods-to-call-Web-Services-from-AJAX](http://www.codeproject.com/Articles/21045/Different-methods-to-call-Web-Services-from-AJAX)

通过使用javascript ajax方法你可以做到

```
 $.ajax({
                        type: "POST",
                        url: ,//webservice url
                        data: , // if ur method take parameters
                        contentType: "application/json; charset=utf-8",
                        success:{},
                        dataType: "json",
                        failure: {}
                    }); 
```

# jquery - jQuery - 如何递归循环对象的嵌套属性？

> ID：12295494
> 
> 赞同：9
> 
> 时间：2012-09-06T08:01:20.640
> 
> 标签：jquery

有没有一种方法可以递归地遍历 JS/jQuery 对象的所有嵌套属性？

例如，给定这个对象

```
var x = {
    'name': 'a',
    'level': 1,
    'children': [{
        'name': 'b',
        'level': 2,
        'children': [{
            'name': 'c',
            'level': 3,
            'children': [{
            ...
            }]
        }]},
        ...
    }]
} 
```

我怎么能循环遍历名为“a”和他们的孩子，“b”和他们的孩子，“c”和他们的孩子，无限循环的对象？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T08:14:34.263

递归方法似乎最好，如下所示：

```
function recursiveIteration(object) {
    for (var property in object) {
        if (object.hasOwnProperty(property)) {
            if (typeof object[property] == "object"){
                recursiveIteration(object[property]);
            }else{
                //found a property which is not an object, check for your conditions here
            }
        }
    }
} 
```

[这是一个工作小提琴](http://jsfiddle.net/L24Sd/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:13:27.303

您的 JSON 格式不正确，但您可以“访问”每个项目，如下所示：

```
<html>
<head>
    <title>test</title>
    <script type="text/javascript">
        var x = {
                "name": "a",
                "level": 1,
                "children": [
                    {
                        "name": "b",
                        "level": 2,
                        "children": [
                            {
                                "name": "c",
                                "level": 3,
                                "children": [
                                    {
                                        "sss": 23
                                    }
                                ]
                            }
                        ]
                    }
                ]
            };

         function visit(obj){
            for(var prop in obj){
                if(typeof(obj[prop]) == 'object'){
                    if(Object.prototype.toString.call(obj[prop]) == '[object Array]'){
                        for(var i = 0; i < obj[prop].length; i++){
                            document.write("<br />the element " + prop + " (array) was visited");
                            visit(obj[prop][i]);                                
                        }
                    }else{
                        document.write("<br />the element " + prop + " (object) was visited");
                        visit(obj[prop]);
                    }
                }else{
                    document.write("<br />the element " + prop + " = " + obj[prop] + " was visited");
                }
            }
        }

        visit(x);

    </script>
</head>
<body>

</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T03:29:56.660

我最初是在寻找一种递归搜索 javascript 对象的方法，我发现这篇文章非常有帮助，尤其是 Jeroen Moons 的回答。我已经对其进行了调整以提供返回对象。输入是要搜索的**对象和一个****{key:value}**对象（针）。

```
function searchObject(object, keyvalue){
    var found = false;
    for (var property in object){
        if (object.hasOwnProperty(property)){
            if (typeof object[property] == 'object'){
                found = searchObject(object[property], keyvalue);
                if (found)
                    return found;
            }else{
                key = Object.keys(keyvalue)[0];
                if (property == key && object[key] == keyvalue[key]){
                    console.log('searchObject ' + keyvalue[key] + ' found');
                    return object;
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:19:46.620

```
var x = {
    'name': 'a',
    'level': 1,
    'children': [{
        'name': 'b',
        'level' : 2,
        'children' : [{
            'name': 'c',
            'level' : 3,
            'children' : [{
            }]
        }]
    }, {
        'name': 'b2',
        'level' : 2,
        'children' : [{
            'name': 'c2',
            'level' : 3,
            'children' : [{
            }]
        }]
    }]
}
var step = x;
do {
    if (step instanceof Array){
        for (i=0; i < step.length; i++) {
            callback(step[i]);
        }
    }
    else {
        callback(step);
    }
    step = step.children != undefined ? step.children : null;
} while (step);

function callback (element) {
    console.log(element);
} 
```

只要结构不变，就可以这样下去。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:22:27.843

```
function iterate(obj){
    for(var key in obj)
    {
        if(typeof(obj["key"]) == "object"){
            iterate(obj["key"]);
        }
        else{
            console.log(key + ": " + obj["key"];
        }
    }

} 
```

# android - Android API 位置

> ID：12295495
> 
> 赞同：1
> 
> 时间：2012-09-06T08:01:25.897
> 
> 标签：android, api, location, cellid

我的应用程序可以显示网络信息，例如 MCC、MNC、LAC、CellID、RXlevel。但是我想强制我的 Android 连接以修复 cellID 或频道（频率）。你知道怎么做吗？

太感谢了。

蓬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:59:45.477

如果您指的是确定手机正在与之通信的蜂窝塔的位置，您只能通过 CDMA 设备的 Android 平台 API 执行此操作：http: [//developer.android.com/reference/android/telephony/cdma/ cdmaCellLocation.html#getBaseStationLatitude](http://developer.android.com/reference/android/telephony/cdma/CdmaCellLocation.html#getBaseStationLatitude) ()

和

[http://developer.android.com/reference/android/telephony/cdma/CdmaCellLocation.html#getBaseStationLongitude](http://developer.android.com/reference/android/telephony/cdma/CdmaCellLocation.html#getBaseStationLongitude) ()

请注意，有时这些 API 会为您提供小区扇区质心的估计值，而不是塔的物理位置。

您还可以使用网络位置提供程序。

注册提供者：

`lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);`

并通过 LocationListener 监听位置：

```
@Override
public void onLocationChanged(Location location) {
    Log.i(TAG, "New lat: " + location.getLatitude());
    Log.i(TAG, "New long: " + location.getLongitude());
} 
```

但是您将从这里获得基于蜂窝和基于 WiFi 的位置。

# android - 跟踪应用程序中的用户体验/行为

> ID：12295497
> 
> 赞同：3
> 
> 时间：2012-09-06T08:01:31.107
> 
> 标签：android, tracking, behavior

为了改进我的应用程序，我想看看用户实际使用它的方式。

我没有用户帐户，它是一个开放的应用程序。

我想分析人们观看某个屏幕的时间（实际时间）以及他们何时进入下一个屏幕或关闭它。

我知道有**Google Analytics for Apps**，但我不知道他们是否记录得**这么详细**？也许我可以使用另一种方便的服务/代码？

任何人都在使用此服务或其他服务并有一些他/她想分享的用户体验？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:12:51.427

除了分析之外，我还想提两个

1.  [ACRA](http://code.google.com/p/acra/)
    虽然它主要用于崩溃报告，但您也可以添加自定义参数。如果您想参考它，您可以访问此[链接](http://code.google.com/p/acra/wiki/BasicSetup)
2.  [乱舞](http://www.flurry.com/)

# android - 我可以创建一个新文件夹并将我的 SQLite 导入其中吗？

> ID：12295499
> 
> 赞同：3
> 
> 时间：2012-09-06T08:01:37.987
> 
> 标签：android, database, sqlite

我有一些应该导入 App 的 SQLite 文件。注意，其中一个应该导入到唯一的文件夹。例如：我有两个文件（doc1.sqlite & doc2.sqlite）

```
 /data/data/YOUR_PACKAGE/databases/doc1/doc1.sqlite
      /data/data/YOUR_PACKAGE/databases/doc2/doc2.sqlite 
```

那么，当我创建一个新文件夹并将两个文件导入其中时，我可以使用它们吗？

谢谢，奥米德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:27:40.333

当然，您可以制作文件夹并将文件放入其中。但请确保您在`DatabaseHelper`课堂上引用了正确的数据库

它应该是这样的：

```
DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
        DB_NAME = doc1;

SQLiteDatabase checkDB = null;

        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {

            // database does't exist yet.

        } 
```

# wordpress - 内页后的Wordpress数字字符？

> ID：12295502
> 
> 赞同：1
> 
> 时间：2012-09-06T08:01:43.680
> 
> 标签：wordpress, .htaccess, mod-rewrite

我在我的所有 Wordpress 网站上都遇到了问题。内页 URL 后面的数字字符，如`http://domainname.com/about-us/123452345/`，应该显示 404 页面错误，但它们会显示页面`http://domainname.com/about-us/`。

有没有办法让它显示404页面。

我试过`domainname.com/about-us/asdfasdfas`了，它显示了很棒的 404 页面。但是使用数字会导致它显示页面。

* * *

更新：

我在我的 .htaccess 中试过这个：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^index\.php$ - [L]
RewriteRule ^about-us/[0-9]+/?$ /doesnotexists.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:42:11.207

我不知道 wordpress，但如果你想通过 htaccess 规则解决这个问题，试试这个（确保它`doesnotexists.php`不存在，以便它抛出一个 404 标头）：

```
RewriteEngine on
RewriteRule ^about-us/[0-9]+/?$ /doesnotexists.php [L] 
```

# hosting - 是否足以在共享托管服务器中以 100 MB 内存限制运行我的 asp.net MVC 应用程序

> ID：12295512
> 
> 赞同：3
> 
> 时间：2012-09-06T08:02:34.087
> 
> 标签：hosting

我最近使用 Asp.net MVC 4、Ninject、EF Poco、SQL 2008、Auto Mapper 开发了 MVC 应用程序，并托管在 winhost 共享托管服务器中。我的问题是会话到期。两个或三个寄托请求应用程序池被回收。

请参阅下面的支持团队回复

我们在其独特的应用程序池/进程中托管每个网站。为确保服务器稳定性，如果满足以下任一条件，我们会回收应用程序：

1) 超过 20 分钟的空闲时间（20 分钟内没有 http 请求） 2) 应用程序使用超过 100 MB 内存 3) 应用程序使用超过 70% 的 CPU 资源超过 3.5 分钟

我检查了我们的服务器日志，确实发现了许多条目，其中您的应用程序池被回收，因为它开始消耗超过 100 MB 的服务器内存。以下是示例日志条目：

TimeGenerated：2012 年 9 月 5 日晚上 10:03:36 消息：服务应用程序池“customerPool_42717”的进程 ID 为“30088”的工作进程已请求回收，因为它已达到其私有字节内存限制。

TimeGenerated：2012 年 9 月 5 日晚上 10:02:36 消息：服务应用程序池“customerPool_42717”的进程 ID 为“315060”的工作进程已请求回收，因为它已达到其私有字节内存限制。

不幸的是，日志没有告诉我们您的应用程序正在做什么导致它消耗超过 100 MB 的服务器内存，它只记录它确实达到了内存限制。

出于安全和性能原因，我们不允许在共享主机环境中监控服务器资源。您可能想要评估您的应用程序在开发环境中使用的内存量，如果要求小于 200MB，最简单的解决方案是将您的帐户升级到 WinHost Max 帐户，这将增加您的可用内存量工作进程到 200MB 或具有 300MB 专用 RAM 的 WinHost Ultimate 计划。

如果无法升级您的帐户，您可能需要考虑使用 SQL Server 会话状态管理，因为您已经创建了一个数据库，有关更多信息，请花点时间查看以下 WinHost 知识库文章：

[http://support.winhost.com/KB/a626/how-to-enable-aspnet-sql-server-session-on-your-web.aspx](http://support.winhost.com/KB/a626/how-to-enable-aspnet-sql-server-session-on-your-web.aspx)

如果您想安装架构，请告诉我。请注意，sql 会话不会阻止您的应用程序池自动回收，而只会在回收发生时保留会话。

你能建议如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:20:33.803

好的！，清除您的机器 asp.net 根 tmp 文件夹：

我一步一步地回答这个问题：1）以管理员身份运行命令提示符2）`iisreset /stop` 3）在资源管理器中打开 `%windir%\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root`或

```
%windir%\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root 
```

，并删除所有临时文件夹。

4）返回 cmd ，然后`iisreset /start`

5）对于Web ser CPU问题，或清除您的系统驱动器清理（您的用户本地临时和`%windir%\Temp`文件）

6）如果您的 IIS 不起作用（返回错误代码：509,503，...）

a) `iisreset /stop` b)`cd %windir%\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root`或

`cd %windir%\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root`

c) `aspnet_regiis -iru` d)`iisreset /start`

尝试顶级步骤。

# qt - 如何在 Windows 上的 qmake 中禁用在调试库名称中添加“d”后缀？

> ID：12295514
> 
> 赞同：4
> 
> 时间：2012-09-06T08:02:39.217
> 
> 标签：qt, qt4, qmake

我在 QtCreator 中为 QML C++ 插件创建了项目，调试版本在名称后附加了“d”后缀，例如，`plugind.dll`而不是`plugin.dll`. 如何配置项目不添加这个后缀？Qt 版本 4.8.1，Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:43:31.197

您可以将此行写入 .pro 文件：

**目标 = 你的程序名**

# c# - 任何可以处理欺骗的字典？

> ID：12295517
> 
> 赞同：2
> 
> 时间：2012-09-06T08:02:41.667
> 
> 标签：c#, .net

我正在解析一个测试文件，格式如下：

`[Person]: [Name]-[John Doe], [Age]-[113], [Favorite Color]-[Red].`

`[Person]: [Name]-[John Smith], [Age]-[123], [Favorite Color]-[Blue].`

`[Person]: [Name]-[John Sandles], [Age]-[133], [Favorite Color]-[Green].`

`[Person]: [Name]-[Joe Blogs], [Age]-[143], [Favorite Color]-[Khaki].`

如您所见，这些值没有重复（尽管我想考虑未来的欺骗），但键是欺骗。键是连字符 (-) 之前的部分。

但是每次我将这些放入字典时，它都适合并告诉我不允许欺骗。为什么字典不允许欺骗？我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:05:51.483

Dictionary 的 TKey 部分被散列用于快速查找，如果您在其中有欺骗，您将陷入冲突和复杂性，这将降低您快速有效地查找内容的能力。这就是不允许受骗的原因。

您可以使用其中的数据制作一个结构，并将其放在一个`Dictionnary<ID, MyStruct>`示例中。这样您就可以避免密钥中的欺骗（每个结构都是唯一的，并且您将所有数据都放在字典中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:06:09.323

字典可以有重复值，但不能有重复值，因为那样你将如何判断你想要哪个键的值。

> 我怎样才能克服这个

使用 a`KeyvaluePair[]`但在这种情况下，您将如何判断您想要哪个键的值？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:32:09.550

您可以使用 Wintellect Power Collections 的 MultiDictionary 类。Power Collections 是用于 .Net 2 或更高版本的一组历史悠久的集合类。它已经 5 年没有更新了，但它不需要更新。

见这里： http: [//powercollections.codeplex.com/](http://powercollections.codeplex.com/)

在这里下载：http: [//powercollections.codeplex.com/releases/view/6863](http://powercollections.codeplex.com/releases/view/6863)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:11:17.990

`Lookup<TKey, TElement>`命名空间中的类 `System.Linq`表示一组键，每个键映射到一个或多个值。更多信息：[MSDN](http://msdn.microsoft.com/en-us/library/bb460184.aspx)

```
List<Person> list= new List<Person>();
// ...
var lookup = list.ToLookup(person => person.Key, person => new {Age=person.Age, Color=person.Color});

IEnumerable<Person> peopleWithKeyX = lookup["X"];

public class Person
{
    public string Key { get; set; }
    public string Age { get; set; }
    public string Color { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:07:23.083

最简单的做法是使用`Dictionary<string, List<string>>`.

用法：

```
foreach(var person in persons)
{
    List<string> list;
    if(!dict.TryGetValue(person.Key, out list)
    {
        list = new List<string>();
        dict.Add(person.Key, list);
    }

    list.Add(person.Data);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T08:19:47.773

根据您的问题，我假设您使用 [Name]、[Age] 和 [Favorite Color] 作为键。有很多方法可以使用这些键将数据放入字典中，但真正的问题是如何取回数据？

Dictionary 中的键应该是唯一的，因此您需要找到一些唯一的数据以将其用作键。在您的情况下，测试文件看起来像人员列表，其中每一行都包含人员的数据。所以最自然的方法是编写一个字典，其中包含有关人员的行，其中“唯一数据”应该是人员的姓名，除非它不重复。

*然而在现实生活中，人名通常是一个不好的选择，（不仅因为它可能会随着时间的推移而改变，而且因为同名的概率非常高），所以使用人工键代替（行号、Guids 等）*

**编辑**我看到属性的数量可能会有所不同。所以你需要使用嵌套字典。外部 - 用于“人员”，内部用于人员属性：

```
Dictionary<string, Dictionary<string, string>> person_property_value; 
```

但是，为了使您的数据结构更易于理解，您应该将内部字典放在 Person 类中：

```
class Person{
    public readonly Dictionary<string, string> props;

    public Person()
    {
        props = new Dictionary<string, string>();
    }
} 
```

现在您将 Person 添加为：

```
Person p = new Person();
p.props['Name'] = 'John Doe';
p.props['Age'] = 'age';
dictionary.Add('John Doe', p); 
```

并将其取回：

```
Person p = dictionary[Name]; 
```

现在为了允许几个人共享相同的名字，你将字典声明为`Dictionary<string, List<Person>>`

# java - 初始 SessionFactory 创建在休眠错误中失败

> ID：12295519
> 
> 赞同：3
> 
> 时间：2012-09-06T08:02:54.397
> 
> 标签：java, hibernate

firends im 使用 netbeans ide 并将其放置在默认 src/java 文件夹中的 hibernate.cfg.xml 但是每当我运行应用程序时，它都会显示以下错误：

`Initial SessionFactory creation failed.org.hibernate.HibernateException: /hibernate.cfg.xml not found`

班级 ：

```
public class myutil {
 private static final SessionFactory sessionFactory = buildsf(); 
 public static SessionFactory buildsf() { 
    try {
      // Create the SessionFactory from standard (hibernate.cfg.xml)
      return new Configuration().configure("config/hibernate.cfg.xml").buildSessionFactory();
    } catch (Throwable ex) { // Log the exception.
      System.err.println("Initial SessionFactory creation failed." + ex);
      throw new ExceptionInInitializerError(ex);
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:07:19.040

采用 ：

```
 SessionFactory sessionFactory = new Configuration()
        .configure("config/hibernate.cfg.xml") // give path to hibernate.cfg.xml (recommended)
        .buildSessionFactory();

        return sessionFactory; 
```

[在这里](http://www.mkyong.com/hibernate/how-to-load-hibernate-cfg-xml-from-different-directory/)查看用法。或者直接保持`hibernate.cfg.xml`直接下`src`（不推荐）。

# jquery - JQuery简单模式确认不继续

> ID：12295524
> 
> 赞同：2
> 
> 时间：2012-09-06T08:03:08.610
> 
> 标签：jquery, simplemodal

我正在使用 Jquery 的简单模式，但它不起作用。是/否框会弹出，但当我否时，一切都很好。但是，如果我点击“是”来保存更改，该框就会消失，并且不会继续处理。

有人可以告诉我我做错了什么吗？谢谢，

简单的模式代码：

```
 function YesNoBox(message, callback) {
$('#confirm').modal({

    position: ["20%",],
    overlayId: 'confirm-overlay',
    containerId: 'confirm-container', 
    onShow: function (dialog) {
        var modal = this;
       console.log(dialog)
        $('.message', dialog.data[0]).append(message);

        // if the user clicks "yes"
        $('.yes').click(function () {
            return true;
            modal.close();
        });

        // if the user clicks "no"
        $('.no').click(function () {

            modal.close(); // close the dialog
        });
    }
});
  } 
```

呼唤它...

```
 function Logout()
 {
 var agree=confirm("Are you sure you want to Exit WOTTS?");
 if (agree)
      return true;
 else
      return false;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:05:08.810

```
 $('.yes').click(function () {
        return true;
        modal.close();
    }); 
```

当您“返回”时，它会在那里停止该功能。

# javascript - 将表单从一个 iframe 发布到另一个 - IE

> ID：12295528
> 
> 赞同：4
> 
> 时间：2012-09-06T08:03:15.473
> 
> 标签：javascript, forms, internet-explorer, iframe, window

这似乎是一个古老的问题。但我似乎无法找到解决方案。

我有一个页面，上面有两个 iframe。他们正在加载：

```
<iframe id="leftIframe" src="predict_goalkeepers.php" height="900" width="300" frameBorder="0" hspace="0"></iframe> <iframe id="rightIframe" src="predict_right.php" height="900" width="300" frameBorder="0" hspace="0"></iframe> 
```

然后我想从 leftIframe 到右边发布一些东西并同时刷新 leftIframe。这是我通过目标框架和 onclick 功能完成的。在leftIframe我有这个：

```
<form action="predict_rightframe.php" method="post" name="form1" id="form1" target="rightIframe"><input type="checkbox" name="goalkeepers" value="1" onclick="this.form.submit(); window.location.reload(true)"> 
```

这在 Chrome 上运行良好且超级骗人。但是在检查 Firefox 和 IE 时，框架会在新窗口中打开。

有没有办法解决？

我相信有一个“黑客”，你可以让 javascript 创建一个框架。但我发现的唯一建议是如何创建一个隐藏的框架（[见这里](http://terminalapp.net/submitting-a-form-with-target-set-to-a-script-generated-iframe-on-ie/)）但我希望这个框架是可见的。

关于这个问题的任何帮助都将非常有帮助——即使它只是调整上面链接的 javascript 代码来创建一个可见的 iframe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:38:59.653

我已经解决了这个问题！这占用了我几个小时的时间。

但如果有人有同样的问题。这是解决方案..

使用以下详细信息创建一个名为 frame.js 的文件：

```
 var filePath = 'predict_rightframe.php';
// Setup the iframe target
var iframe='<iframe id="myIframe" name="myIframe" src ="predict_rightframe.php" width="300" height="450" marginheight="0" marginwidth="0" frameborder="no" scrolling="no"></iframe>';
// Write the iframe to the page
document.write(iframe);

var myIframe = parent.document.getElementById("frame");
// Setup the width and height
myIframe.height = 450;
myIframe.width = 300;

myIframe.src = filePath;
// set the style of the iframe
myIframe.style.border = "0px solid #999";
myIframe.style.padding = "0px"; 
```

然后你希望 iframe 出现在哪里：

```
<script language="JavaScript" src="includes/frame.js"></script> 
```

我不太确定这为什么有效（坦率地说，我不在乎它有效！）。这与 IE 不认为 iframe 是一个对象有关。Javascript 可以让 IE 认为它是一个对象……不管怎样，现在它可以工作了。

# asp.net - 复制 word doc 中的所有元素

> ID：12295530
> 
> 赞同：2
> 
> 时间：2012-09-06T08:03:19.810
> 
> 标签：asp.net, vb.net, ms-word, openxml

我正在尝试将所有元素从 word doc 复制到新的 word doc。当我尝试获取所有 ChildElements 时，我在此行“对于每个元素 As OpenXmlElement In templatedoc.MainDocumentPart.Document.Body.ChildElements”收到消息“对象引用未设置为对象的实例”

请帮忙

代码：

```
Dim containerElement = NewDocument.MainDocumentPart.Document.Descendants().FirstOrDefault()       

Dim clonedElements = New List(Of OpenXmlElement)

For Each element As OpenXmlElement In templatedoc.MainDocumentPart.Document.Body.ChildElements

         clonedElements.Add(element.Clone())

Next

containerElement.RemoveAllChildren()

containerElement.Append(clonedElements) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:49:58.160

谢谢男孩女孩们！

这是我的最终工作代码：

```
 ' Copy XML parts to define document
                NewDocument.AddPart(templatedoc.GetPartById("rId3"), "rId3")
                NewDocument.AddPart(templatedoc.GetPartById("rId2"), "rId2")

                '// Add a main document part. 
                Dim mainPart = NewDocument.AddMainDocumentPart()

                ' // Add a Body               
                mainPart.Document = New Document(New Body())

                'Copy Document XMLParts - must be in specific order
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId8"), "rId8")
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId3"), "rId3")
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId7"), "rId7")
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId2"), "rId2")
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId1"), "rId1")
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId6"), "rId6")
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId5"), "rId5")
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId4"), "rId4")
                mainPart.AddPart(templatedoc.MainDocumentPart.GetPartById("rId9"), "rId9")

                '// Copy text from template document
                Dim containerElement = NewDocument.MainDocumentPart.Document.Descendants().FirstOrDefault()
                Dim clonedElements = New List(Of OpenXmlElement)

                Dim elementstocopy = templatedoc.MainDocumentPart.Document.Body.ChildElements

                For Each element As OpenXmlElement In elementstocopy
                    clonedElements.Add(element.Clone())
                Next

                containerElement.RemoveAllChildren()
                containerElement.Append(clonedElements)

                mainPart.Document.Save() 
```

# objective-c - 带有外部源的 Xcode 4 项目（没有静态库或框架）

> ID：12295533
> 
> 赞同：2
> 
> 时间：2012-09-06T08:03:25.330
> 
> 标签：objective-c, xcode

是否可以只使用外部资源而不制作静态库或其他东西？例如，当我添加一些文件头搜索路径（位于同一个工作区，所以我使用 ../Project/Project）并添加我需要编译的文件到构建阶段选项卡中的“编译源”时，仍然得到链接错误：

> 架构 x86_64 的未定义符号：“_OBJC_CLASS_$_CallMe”，引用自：AppDelegate.o ld 中的 objc-class-ref：未找到架构 x86_64 的符号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:20:36.403

您应该通过单击`File -> Add Files to "<your project>"`Xcode 添加文件来完成其余的工作。无需编辑搜索路径。

# c# - 使用 System.Threading 和 Visual Studio C# Express 托管进程，多线程代码的执行速度慢了线程数倍

> ID：12295534
> 
> 赞同：0
> 
> 时间：2012-09-06T08:03:35.033
> 
> 标签：c#, multithreading, visual-studio-2010, performance, join

我有一个非常简单的程序来计算字符串中的字符。一个整数`threadnum`设置线程的数量，并将数据`threadnum`相应地划分为块以供每个线程处理。

每个线程递增共享字典中包含的值，构建字符直方图。

```
private Dictionary<UInt32, int> dict = new Dictionary<UInt32, int>(); 
```

*   为了等待所有线程完成并继续主进程，我调用`Thread.Join`
*   最初，我为每个线程都有一个本地字典，然后将其合并，但是共享字典工作正常，没有锁定。
*   *BuildDictionary*方法中没有锁定任何引用，尽管锁定字典不会显着影响线程执行时间。
*   每个线程都是定时的，并比较结果字典。
*   无论是单线程还是多线程，字典内容都是相同的——**应该如此**。
*   每个线程都需要一个由 threadnum 确定的分数来完成 -**应该是这样**。

**问题**：

总时间大致是 的倍数`threadnum`，也就是说**执行时间增加**了？

（不幸的是，我目前无法运行 C# Profiler。此外，我更喜欢 C# 3 代码兼容性。）

其他人可能也在苦苦挣扎。可能是**VS 2010 express edition vshost**进程堆栈和调度线程顺序运行？

另一个 MT 性能问题最近在此处发布[为“Visual Studio C# 2010 Express Debug running Faster than Release”](https://stackoverflow.com/questions/12309080/visual-studio-c-sharp-2010-express-debug-running-faster-than-release)：

**代码**：

```
public int threadnum = 8;
Thread[] threads = new Thread[threadnum];
Stopwatch stpwtch = new Stopwatch();
stpwtch.Start();
for (var threadidx = 0; threadidx < threadnum; threadidx++)
{
    threads[threadidx] = new Thread(BuildDictionary);
    threads[threadidx].Start(threadidx);
    threads[threadidx].Join(); //Blocks the calling thread, till thread completion
}
WriteLine("Total - time: {0} msec", stpwtch.ElapsedMilliseconds); 
```

你能帮忙吗？

**更新**：

由于 IDE 调试器的众多钩子，**随着线程数**的增加，几乎线性减速的奇怪行为似乎是一种**伪影。**

在开发人员环境之外运行该过程，我实际上在 2 个逻辑/物理核心机器上获得了 30% 的速度提升。在调试期间，我已经处于 CPU 利用率的高端，因此我怀疑在开发过程中通过额外的空闲内核留有一些余地是明智的。

与最初一样，我让每个线程在其自己的本地数据块上进行计算，该数据块被锁定并写回共享列表并在所有线程完成后聚合。

**结论**：

注意进程运行的环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:14:09.393

我们可以暂时将 Tony the Lion 在他的回答中提到的字典同步问题放在一边，因为在您当前的实现中，您实际上并没有并行运行任何东西！

让我们看一下您当前在循环中所做的事情：

*   开始一个线程。
*   **等待**线程完成。
*   开始下一个线程。

换句话说，您不应该`Join`在循环内调用。

相反，您应该按照您的方式启动所有线程，但使用诸如 an 之类的单一构造`AutoResetEvent`来确定所有线程何时完成。

请参阅示例程序：

```
class Program
{
    static EventWaitHandle _waitHandle = new AutoResetEvent(false);

    static void Main(string[] args)
    {
        int numThreads = 5;
        for (int i = 0; i < numThreads; i++)
        {
            new Thread(DoWork).Start(i);
        }
        for (int i = 0; i < numThreads; i++)
        {
            _waitHandle.WaitOne();
        }
        Console.WriteLine("All threads finished");
    }

    static void DoWork(object id)
    {
        Thread.Sleep(1000);
        Console.WriteLine(String.Format("Thread {0} completed", (int)id));
        _waitHandle.Set();
    }
} 
```

`Join`或者，如果您有对可用线程的引用，您也可以在第二个循环中调用。

完成此操作后，您可以并且*应该*担心字典同步问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:09:34.447

> 只要集合**没有被修改**，一个 Dictionary 可以同时支持多个阅读器。来自[MSDN](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

你说：

> 但是共享字典工作正常，没有锁定。
> 
> 每个线程**递增**共享字典中包含的值

根据定义，您的程序已损坏，如果您在没有适当锁定的情况下更改字典中的数据，最终会出现错误。无需多言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:29:14.153

我不会使用一些 shared `static` `Dictionary`，如果每个线程都在本地副本上工作，那么一旦所有线程都发出完成信号，你就可以合并你的结果。

`WaitHandle.WaitAll`避免在`AutoResetEvent`.

```
class Program
{
    static void Main()
    {
        char[] text = "Some String".ToCharArray();
        int numThreads = 5;

        // I leave the implementation of the next line to the OP.
        Partition[] partitions = PartitionWork(text, numThreads);

        completions = new WaitHandle[numThreads];
        results = IDictionary<char, int>[numThreads];

        for (int i = 0; i < numThreads; i++)
        {
            results[i] = new IDictionary<char, int>();
            completions[i] = new ManualResetEvent(false);
            new Thread(DoWork).Start(
                text,
                partitions[i].Start,
                partitions[i].End,
                results[i],
                completions[i]);
        }

        if (WaitHandle.WaitAll(completions, new TimeSpan(366, 0, 0, 0))
        {
            Console.WriteLine("All threads finished");
        }
        else
        {
            Console.WriteLine("Timed out after a year and a day");
        }

        // Merge the results
        IDictionary<char, int> result = results[0];
        for (int i = 1; i < numThreads - 1; i ++)
        {
            foreach(KeyValuePair<char, int> item in results[i])
            {
                if (result.ContainsKey(item.Key)
                {
                    result[item.Key] += item.Value;
                }
                else
                {
                   result.Add(item.Key, item.Value);
                }
            }
        }
    }

    static void BuildDictionary(
        char[] text, 
        int start, 
        int finish,
        IDictionary<char, int> result,
        WaitHandle completed)
    {
        for (int i = start; i <= finish; i++)
        {
            if (result.ContainsKey(text[i])
            {
                result[text[i]]++;
            }
            else
            {
               result.Add(text[i], 1);
            }
        }
        completed.Set();
    }
} 
```

有了这个实现，唯一共享的变量是`char[]`of the`text`并且始终是只读的。

您确实有最后合并字典的负担，但是对于避免任何并发问题，这是一个很小的代价。在更高版本的框架中，我会使用 TPL 并且`ConcurrentDictionary`可能会使用`Partitioner<TSource>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:12:21.050

罗姆看到了。

您的主线程应该在启动所有其他线程后加入 X 个其他线程。

否则它等待第一个线程完成，启动并等待第二个线程。

```
for (var threadidx = 0; threadidx < threadnum; threadidx++)
{
    threads[threadidx] = new Thread(BuildDictionary);
    threads[threadidx].Start(threadidx);
}

for (var threadidx = 0; threadidx < threadnum; threadidx++)
{
    threads[threadidx].Join(); //Blocks the calling thread, till thread completion
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:17:07.190

我完全同意 TonyTheLion 和其他人的观点，当您解决在错误位置加入的实际问题时，（无）锁和更新共享字典仍然会有问题。我想给你一个快速的解决方法：只需将你的整数值包装到某个对象中：

代替：

```
Dictionary<uint, int> dict = new Dictionary<uint, int>(); 
```

利用：

```
class Entry { public int value; }
Dictionary<uint, Entry> dict = new Dictionary<uint, Entry>(); 
```

现在增加 Entry::value 。这样， Dictionary 将**不会注意到**任何更改，并且在**不锁定 dictionary 的情况下**是安全的。

注意：这只有在保证一个线程只使用它自己的一个条目时才有效。正如您所说的“字符直方图”，我刚刚注意到这不是真的。您必须在增量期间锁定每个条目，否则某些增量可能会丢失。尽管如此，与锁定整个字典相比，在入口层锁定将显着加快

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T08:30:23.397

正如 Rotem 指出的那样，通过加入循环，您正在等待每个线程完成，然后再继续。

[可以在 MSDN 上的 Thread.Join 文档](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)中找到为什么会这样的提示

> 阻塞调用线程直到线程终止

因此，在一个线程完成工作之前，您的循环不会继续。要启动所有线程然后等待它们完成，请将它们加入循环之外：

```
public int threadnum = 8;
Thread[] threads = new Thread[threadnum];
Stopwatch stpwtch = new Stopwatch();
stpwtch.Start();

// Start all the threads doing their work
for (var threadidx = 0; threadidx < threadnum; threadidx++) 
{
     threads[threadidx] = new Thread(BuildDictionary);
     threads[threadidx].Start(threadidx);
}
// Join to all the threads to wait for them to complete
for (var threadidx = 0; threadidx < threadnum; threadidx++) 
{
    threads[threadidx].Join();
}

System.Diagnostics.Debug.WriteLine("Total - time: {0} msec", stpwtch.ElapsedMilliseconds); 
```

*你真的需要发布你的 BuildDictionary 函数。多线程的操作很可能不会更快，并且线程开销实际上会增加执行时间。*

# android - Android https 连接 - 证书

> ID：12295537
> 
> 赞同：2
> 
> 时间：2012-09-06T08:03:51.790
> 
> 标签：android, soap, https, certificate, trust

我有一个应用程序，它使用 KSOAP2 库通过 https 连接连接到 SOAP Web 服务。

现在我接受所有带有以下代码的证书：

```
public static void createTrustManager(){
    TrustManager[] trustAllCerts = createTrustAllCerts();

    // Install the all-trusting trust manager
    try{       
        SSLContext sc = SSLContext.getInstance("TLS");
        sc.init(null, trustAllCerts, new SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
    }
    catch (NoSuchAlgorithmException exception){}
    catch (KeyManagementException exception){}
}

public static TrustManager[] createTrustAllCerts() {
    // Create a trust manager that does not validate certificate chains
    X509TrustManager trustManager = createX509TrustManager();
    return new TrustManager[]{trustManager};
}

public static X509TrustManager createX509TrustManager() {
    X509TrustManager trustManager = new X509TrustManager(){
        public X509Certificate[] getAcceptedIssuers() { 

            return null; 

        }
        public void checkClientTrusted(X509Certificate[] certs, String authType) { SSLUtilities.checkClientTrusted = true;}
        public void checkServerTrusted(X509Certificate[] certs, String authType) { SSLUtilities.checkServerTrusted = true;}
    };
    return trustManager;
} 
```

但现在我只需要考虑涉及我拥有的 https 连接的证书。我没有找到如何解决它。有人能帮我吗？

# mysql - 数据库表按实体组织，还是按数据水平垂直组织？

> ID：12295541
> 
> 赞同：1
> 
> 时间：2012-09-06T08:04:00.513
> 
> 标签：mysql, database-design, entity-relationship

我希望标题清楚，请进一步阅读，我将解释我的意思。

我们与我们的数据库设计师在高级结构方面存在分歧。我们正在设计一个 MySQL 数据库，我们有大量数据将成为其中的一部分。从概念上讲，数据是复杂的——有几十种不同类型的实体（代表各种现实世界的实体，您可以将它们视为产品开发人员、工厂、产品、检验、认证等），每种实体都有相关的特征和与彼此的关系。

我不是一个经验丰富的数据库设计师，但我所知道的一切都告诉我首先将这些实体中的每一个视为一个表（具有代表特征的相关字段和填充它们的数据），并在给定基础关系的情况下进行适当连接。我见过的每个数据库设计示例都是这样做的。

然而，数据目前是完全不同的形式。有四个表，每个表代表一个数据级别。顶级表列出了 39 种实体类型，并有一个长的字母数字字符串将其与其他三个表相关联，这些表表示所有实体（在一个表中）、实体特征（在一个表中）和数据库中所有特征的值（在一个包含数千万条记录的表中。）这很有效 - 我们在 php 中有一个基本视图，可让您在各个级别之间导航并查看数据等 - 但至少可以说它是不直观的。采用这种方式的原因是它使 DB 的大小更小，缩短了查询时间，并使扩展更容易。但我不清楚数据库的大小是否意味着我们应该优化它，比如组织的清晰度。

所以问题是：有没有理由以这种方式构建数据库，它是什么？我发现很难处理基础数据——例如，你不能以传统的行和列格式遍历表格——而且它隐藏了连接。但是基于实体的表的更“传统”结构会产生更多的表，规范化后肯定会超过 50 个。哪种方法看起来更好？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:54:41.093

好的，我将继续根据我得到的评论和他们引导我进行的更多研究来回答我自己的问题。直接的答案是肯定的，可能有理由用很少的表来构建数据库，并且其中一个表中包含所有数据，它是一个实体-属性-值数据库 (EAV)。它们的特点是：

*   一种非常非结构化的方法，每个事实或数据点都被转储到一个大表中，并具有理解它所必需的特征。这使得添加更多数据变得容易，但它可能会很慢和/或很难将其取出。EAV 已针对添加数据和组织灵活性进行了优化，其代价是访问速度较慢且编写查询更加困难等。

*   一种“又长又瘦”的格式，很多行，很少的列。

*   因为数据是“自编码”的，具有自己的特征，所以它通常用于当你知道会有很多可能的特征或数据点但其中大部分都是空的（“稀疏数据”）的情况下。会有很多空单元格，但 EAV 并没有真正的单元格，只有数据点。

In our particular case, we don't have sparse data. But we do have a situation where flexibility in adding data could be important. On the other hand, while I don't think that speed of access will be that important for us because this won't be a heavy-access site, I would worry about the ease of creating queries and forms. And most importantly I think this structure would be hard for us BD noobs to understand and control, so I am leaning towards the traditional model - sacrificing flexibility and maybe ease of adding new data in favor of clarity. Also, people seem to agree that large numbers of tables are OK as long as they are really called for by the data relationships. So, decision made.

# android - 在画布油漆中实现UNDO功能后如何更改油漆颜色/笔触

> ID：12295542
> 
> 赞同：5
> 
> 时间：2012-09-06T08:04:01.617
> 
> 标签：android, android-canvas

在我的 Paint App 中，我实现了 UNDO 功能，并且运行良好。但是，如果更改画笔颜色（或）画笔描边，那么我之前绘制的所有路径都会更改为新的画笔颜色。代码如下：

```
public class CustomView extends View implements OnTouchListener {
    public Canvas mCanvas;
    private Path mPath;
    public Paint mPaint, mBitmapPaint;
    Bitmap mBitmap;
    Canvas canvas;
    public ArrayList<Path> paths = new ArrayList<Path>();
    public ArrayList<Path> undonePaths = new ArrayList<Path>();

    private Bitmap im;

    public CustomView(Context context) {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);
        setOnTouchListener(this);
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFFFFFF);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(6);
        mCanvas = new Canvas();
        mPath = new Path();

        im = BitmapFactory.decodeResource(context.getResources(), R.drawable.ic_launcher);
        DisplayMetrics metrics = getContext().getResources().getDisplayMetrics();
        int w = metrics.widthPixels;
        int h = metrics.heightPixels;
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        // mBitmapPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC));
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // mPath = new Path();
        // canvas.drawPath(mPath, mPaint);
        canvas.drawColor(Color.TRANSPARENT);
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        for (Path p : paths) {
            canvas.drawPath(p, mPaint);
        }
        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        undonePaths.clear();
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }

    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;
        }
    }

    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        paths.add(mPath);
        mPath = new Path();

    }

    public void onClickUndo() {
        if (paths.size() > 0) {
            undonePaths.add(paths.remove(paths.size() - 1));
            invalidate();
        } else {

        }
        // toast the user
    }

    public void onClickRedo() {
        if (undonePaths.size() > 0) {
            paths.add(undonePaths.remove(undonePaths.size() - 1));
            invalidate();
        } else {

        }
        // toast the user
    }

    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();
            break;
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-10T21:29:11.030

这是一个老问题，但我想为来到这里的任何人留下一个答案。解决方案是跟踪`Paint`每个笔划的单独实例（每个 Path 对象应该正好有 1 个 Paint 对象）。

除了重置 mPath 之外，更改您的 touch_up 方法以重置 mPaint。

```
private void touch_up() {
    mPath.lineTo(mX, mY);
    mCanvas.drawPath(mPath, mPaint);
    paths.add(mPath);
    mPath = new Path();
    mPaints.add(mPaint)
    // Creates a new Paint reference, but keeps the previous state (color, width, etc.)
    mPaint = new Paint(mPaint);
} 
```

然后你的 onDraw 方法看起来像这样。

```
for (int i = 0; i < mPaths.size(); i++) {
    canvas.drawPath(mPaths.get(i), mPaints.get(i));
} 
```

# python - 如何在Python中通过SFTP连接后列出目录中的所有文件夹和文件

> ID：12295551
> 
> 赞同：33
> 
> 时间：2012-09-06T08:04:21.280
> 
> 标签：python, ssh, sftp, paramiko

我正在使用 Python 并尝试连接到 SFTP 并希望从那里检索 XML 文件，并且需要将其放置在我的本地系统中。下面是代码：

```
import paramiko

sftpURL   =  'sftp.somewebsite.com'
sftpUser  =  'user_name'
sftpPass  =  'password'

ssh = paramiko.SSHClient()
# automatically add keys without requiring human intervention
ssh.set_missing_host_key_policy( paramiko.AutoAddPolicy() )

ssh.connect(sftpURL, username=sftpUser, password=sftpPass)

ftp = ssh.open_sftp()
files = ftp.listdir()
print files 
```

这里连接是成功的。现在我想查看所有文件夹和所有文件，并且需要进入所需文件夹以从那里检索 XML 文件。

最后，我的意图是在连接到 SFTP 服务器后查看所有文件夹和文件。

在上面我使用`ftp.listdir()`过的代码中，我得到了如下所示的输出

```
['.bash_logout', '.bash_profile', '.bashrc', '.mozilla', 'testfile_248.xml'] 
```

我想知道这些是否是唯一存在的文件？

我上面使用的命令也可以查看文件夹吗？

查看所有文件夹和文件的命令是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2019-08-28T14:17:39.843

[`SFTPClient.listdir`](https://docs.paramiko.org/en/stable/api/sftp.html#paramiko.sftp_client.SFTPClient.listdir)返回所有内容、文件和文件夹。

是否有文件夹，从文件中告诉他们，[`SFTPClient.listdir_attr`](https://docs.paramiko.org/en/stable/api/sftp.html#paramiko.sftp_client.SFTPClient.listdir_attr)改为使用。它返回一个集合[`SFTPAttributes`](https://docs.paramiko.org/en/stable/api/sftp.html#paramiko.sftp_attr.SFTPAttributes)。

```
from stat import S_ISDIR, S_ISREG 
```

```
for entry in sftp.listdir_attr(remotedir):
    mode = entry.st_mode
    if S_ISDIR(mode):
        print(entry.filename + " is folder")
    elif S_ISREG(mode):
        print(entry.filename + " is file") 
```

* * *

@Oz123 接受的答案效率低下。`SFTPClient.listdir`内部调用`SFTPClient.listdir_attr`并丢弃大部分信息，仅返回文件和文件夹名称。`SFTPClient.lstat`然后，答案会通过调用每个文件来无用且费力地重新检索所有数据。

另请参阅[如何通过 Paramiko 获取目录中所有 SFTP 文件的大小](https://stackoverflow.com/q/51298467/850848)。

* * *

*强制性警告：请勿使用-这样做`AutoAddPolicy`会失去对[MITM 攻击的保护。](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)有关正确的解决方案，请参阅[Paramiko "Unknown Server"](https://stackoverflow.com/q/10670217/850848#43093883)。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-06T08:22:12.117

一种快速的解决方案是`lstat`检查`ftp.listdir()`.

这是列出所有目录的方法。

```
>>> for i in ftp.listdir():
...     lstatout=str(ftp.lstat(i)).split()[0]
...     if 'd' in lstatout: print i, 'is a directory'
... 
```

文件是相反的搜索：

```
>>> for i in ftp.listdir():
...     lstatout=str(ftp.lstat(i)).split()[0]
...     if 'd' not in lstatout: print i, 'is a file'
... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-24T12:38:36.160

这是我想出的解决方案。基于[https://stackoverflow.com/a/59109706](https://stackoverflow.com/a/59109706)。我的解决方案给出了一个漂亮的输出。

**更新**我已经稍微修改了它以纳入马丁的建议。`isdir`现在我的代码与我使用和的初始版本相比相当快`listdir`

```
# prefix components:
space =  '    '
branch = '│   '
# pointers:
tee =    '├── '
last =   '└── '

def stringpath(path):
    # just a helper to get string of PosixPath
    return str(path)

from pathlib import Path
from stat import S_ISDIR
def tree_sftp(sftp, path='.', parent='/', prefix=''):
    """
    Loop through files to print it out
    for file in tree_sftp(sftp):
        print(file)
    """
    fullpath = Path(parent, path)
    strpath = stringpath(fullpath)

    dirs = sftp.listdir_attr(strpath)
    pointers = [tee] * (len(dirs) - 1) + [last]
    pdirs = [Path(fullpath, d.filename) for d in dirs]
    sdirs = [stringpath(path) for path in pdirs]

    for pointer, sd, d in zip(pointers, sdirs, dirs):
        yield prefix + pointer + d.filename
        if S_ISDIR(d.st_mode):
            extension = branch if pointer == tee else space
            yield from tree_sftp(sftp, sd, prefix=prefix + extension) 
```

您可以像这样尝试使用`pysftp`

```
import pysftp
with pysftp.Connection(HOSTNAME, USERNAME, PASSWORD) as sftp:
    for file in tree_sftp(sftp):
        print(file) 
```

让我知道是否适合您。

# php - 是否可以从 PHPUnit 运行 HTML 测试套件？

> ID：12295552
> 
> 赞同：5
> 
> 时间：2012-09-06T08:04:28.043
> 
> 标签：php, selenium, phpunit, code-coverage, selenium-ide

我想测量 selenium 的 HTML 测试套件的代码覆盖率。因此我想使用 PHPUnit 来执行套件，因为 PHPUnit 对代码覆盖率分析有很好的支持。

因此：是否可以从 PHPUnit 运行 HTML 测试套件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:12:43.250

# 简短的回答

运行单个 HTML 测试文件不是问题，但运行 HTML 套件文件似乎不起作用。只要您将西装中的所有HTML测试文件自己放在一个目录中，您就可以运行`runSelenese($folderName)`

# 长答案

*在我进行更多挖掘之前，我不知道直接运行 Selenium HTML 文件甚至是可能的。*

我*以前*做的是首先使用[Selenium IDE PHP Formatter Firefox 插件](https://addons.mozilla.org/en-us/firefox/addon/selenium-ide-php-formatters/)转换/导出它们。

显然这是没有必要的。手册底部的一路`Chapter 17\. PHPUnit and Selenium` [状态](http://www.phpunit.de/manual/current/en/selenium.html#selenium.seleniumtestcase.tables.template-methods)：

> 使用该`runSelenese($filename)`方法，您还可以从 Selenese/HTML 规范运行 Selenium 测试。此外，使用静态属性`$seleneseDirectory`，您可以从包含 Selenese/HTML 文件的目录自动创建测试对象。递归搜索指定目录以查找预期包含 Selenese/HTML 的 .htm 文件。示例 17.5 显示了一个示例。
> 
> **例 17.5：使用 Selenese/HTML 文件的目录作为测试**
> 
> ```
> <?php
> require_once 'PHPUnit/Extensions/SeleniumTestCase.php';
> 
> class SeleneseTests extends PHPUnit_Extensions_SeleniumTestCase
> {
>     public static $seleneseDirectory = '/path/to/files';
> }
> ?> 
> ```

在 PHPUnit 中完成测试后，您可以使用它从 Selenium 服务器获取代码覆盖率。

同样，[来自手册](http://www.phpunit.de/manual/current/en/selenium.html)：

> PHPUnit_Extensions_SeleniumTestCase 可以为通过 Selenium 运行的测试收集代码覆盖率信息：
> 
> 1.  复制`PHPUnit/Extensions/SeleniumTestCase/phpunit_coverage.php`到您的网络服务器的文档根目录。
> 2.  在您的网络服务器的`php.ini`配置文件中，将`PHPUnit/Extensions/SeleniumTestCase/prepend.php`和`PHPUnit/Extensions/SeleniumTestCase/append.php`分别配置为 auto_prepend_file 和 auto_append_file。
> 3.  在扩展的测试用例类中`PHPUnit_Extensions_SeleniumTestCase`，用于配置脚本
>     `protected $coverageScriptUrl = 'http://host/phpunit_coverage.php';`
>     的 URL 。`phpunit_coverage.php`

由于设置起来可能有点麻烦，我一直只是使用[页面覆盖率插件](https://addons.mozilla.org/en-us/firefox/addon/page-coverage-selenium-ide/)来深入了解 HTML 页面覆盖率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-28T17:51:00.373

单元测试 PHP HTML 输出是一个好主意。更多的人应该这样做，但事实证明，过去并没有那么简单。

我有同样的问题，可以解决这个问题：[https](https://packagist.org/packages/phpfui/html-unit-tester) ://packagist.org/packages/phpfui/html-unit-tester 它可以从 URL、文件或字符串片段验证 HTML 和 CSS。

为了做你想做的事，你应该设置一个本地网络服务器，你的测试可以为你的应用程序命中。您可能已经拥有它，但请确保它适用于您的本地环境和您运行测试的任何服务器。

然后，您可以使用带有本地服务器路径的 assertValidUrl 方法。由于您不是在与模板进行比较，而只是测试 HTML 是否有效，因此您可以快速找到最近引入的 HTML 错误。

希望这可以帮助。

# python - 机械化：列出所有可能的控制值

> ID：12295555
> 
> 赞同：1
> 
> 时间：2012-09-06T08:04:29.547
> 
> 标签：python, mechanize

假设我有这样的表格：

```
<td>
    <select name="text1" class="long" >
     <option value="">-- unknown --</option>
     <option value="1">test1</option>
     <option value="2">test2</option>
     <option value="3">test3</option>
     <option value="4">test4</option>
    </select>
</td> 
```

有没有办法获得所有可能的选项值，在这种情况下：''，'1'，'2'，'3'，'4'使用机械化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:57:20.800

首先，您需要实际的 html 表单：

```
html = '''
<form>
<td>
    <select name="text1" class="long" >
     <option value="">-- unknown --</option>
     <option value="1">test1</option>
     <option value="2">test2</option>
     <option value="3">test3</option>
     <option value="4">test4</option>
    </select>
</td>
</form>
'''
forms = mechanize.ParseString(html, 'fake')
form = forms[1] # 0th is kind of default one here

control = form.controls[0] # the select
print [item.attrs['value'] for item in control.items]

Out: ['', '1', '2', '3', '4'] 
```

更新。让代码更漂亮

# android - Android：java.lang.IndexOutOfBoundsException：索引 9 无效，大小为 9

> ID：12295556
> 
> 赞同：0
> 
> 时间：2012-09-06T08:04:32.587
> 
> 标签：android, if-statement, int, indexoutofboundsexception

我的以下代码有问题：

```
view.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick (View v) {
        int row = position +1;
        int listLength = data.size();
        HashMap<String,String> nextRow = data.get(position+1);
        if (row < listLength ) {
            nextRow.put("greyedOut","false");
        } else {
            System.out.println("HATSIKIDEE!!");
        }
        notifyDataSetChanged();
        System.out.println(row);
        System.out.println(listLength);
    }
}); 
```

此代码放置在 my`Adapter`并调整`ListView`，它适用于每一行，但在选择最后一行返回以下错误时崩溃：`java.lang.IndexOutOfBoundsException: Invalid index 9, size is 9`

我不明白的是 System.out.println() 的输出是根据 if 语句：

```
 1 of 9
    2 of 9
    3 of 9
    4 of 9
    5 of 9
    6 of 9
    7 of 9
    8 of 9

At 9 of 9 it crashes.
Please help me how to solve this error. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:06:54.100

```
HashMap<String,String> nextRow = data.get(position); 
```

代替

```
HashMap<String,String> nextRow = data.get(position+1); 
```

索引总是从不`0`开始`1`

那么你会得到

```
0 of 9
1 of 9
2 of 9
3 of 9
4 of 9
5 of 9
6 of 9
7 of 9
8 of 9 
```

**总计 = 9**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:16:20.920

```
int row = position + 1;
int listLength = data.size();
HashMap<String,String> nextRow = null;
if(row < listLength)
{
   nextRow = data.get(row);
}
if(nextRow != null)
{
   nextRow.put("greyedOut","false");
   notifyDataSetChanged();
}
else 
{
   System.out.println("HATSIKIDEE!!");
}    
System.out.println(row);
System.out.println(listLength); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:17:24.850

那么试试这个：

```
HashMap<String,String> nextRow = null;
if (position + 1 < listLength)
{
    nextRow = data.get(position+1); 
}
if (nextRow != null)
{
    //whatever it is you are trying to achieve by detecting the next row
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:09:29.443

Java 使用基于零的索引——这意味着在位置 0 会有一些东西。这意味着在任何列表中都有 0 - (n-1) 个项目。

你需要改变

```
HashMap<String,String> nextRow = data.get(position+1); 
```

到
`HashMap<String,String> nextRow = data.get(position);`

所以你去的最大 INDEX 是 8，这是你列表中的第 9 个元素。您的数组如下所示： [0] - 第一个元素 [1] - 第二个元素 .... 等等。

# objective-c - 只允许程序的一个运行实例

> ID：12295561
> 
> 赞同：4
> 
> 时间：2012-09-06T08:04:45.473
> 
> 标签：objective-c, macos, osx-lion, osx-mountain-lion

如何限制我的程序仅运行实例？目前我正在将我的程序作为守护进程运行（自动启动和停止），当用户单击并尝试再次启动（这不是有效的用例）时，进程会在用户上下文中启动，我想避免这种情况有很多原因.

我怎样才能做到这一点？

截至目前，我正在获取进程列表并在开始时进行一些检查并退出，但这种方法并不干净，尽管它解决了我的问题。

有人可以给我一个更好的解决方案吗？我正在使用 ps 来获取进程列表，是否有任何可靠的 API 来完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:24:14.743

使用计数为 1 的命名信号量。在启动时，检查该信号量是否被占用。如果是，请退出。否则，拿走。

概念验证代码：（放置在应用程序入口点附近）

```
#include <semaphore.h>
...
if (sem_open(<UUID string for my app>, O_CREAT, 600, 1) == SEM_FAILED) {
  exit(0);
} 
```

从[sem_open 文档](http://developer.apple.com/library/ios/#documentation/System/Conceptual/ManPages_iPhoneOS/man2/sem_open.2.html)中，

> 返回的信号量描述符可供调用进程使用，直到它被 sem_close() 关闭，或者直到调用者退出或执行。

# sqlite - 在 SQLite（SQLiteAdmin 工具）表中不使用查询重新排序列

> ID：12295563
> 
> 赞同：2
> 
> 时间：2012-09-06T08:04:57.280
> 
> 标签：sqlite

如何在不使用 SQLite（SQLiteAdmin 工具）表中的查询的情况下对列进行重新排序？有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:13:49.697

从左侧面板中选择表格。从菜单中，表格-> 编辑，然后拖放列！然后单击编辑。

# html - CSS - 新的 Firefox 版本不再显示边框图像

> ID：12295565
> 
> 赞同：22
> 
> 时间：2012-09-06T08:05:05.970
> 
> 标签：html, css, firefox

Firefox 更新后，边框图像不再显示？你可能已经定义了这样的东西：

```
border-width:30px;
-moz-border-image: url('border.png') 64 64 64 64 stretch stretch;
   -webkit-border-image: url('border.png') 64 64 64 64 stretch stretch;
   -o-border-image: url('border.png') 64 64 64 64 stretch stretch; 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-06T08:05:05.970

我不得不环顾四周才意识到这是一个 Firefox 问题。首先，我认为 AdBlock 可能只是出于某种原因阻止了它。这实际上是 Mozilla 对他们的 CSS 解释所做的改变。您现在必须在其下方添加此属性才能使其工作：

```
border-style:solid; 
```

希望我能帮上忙。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-02T14:32:02.017

根据规范，需要`border-image-width`设置 Firefox。

只需包括上述属性。

在这里，`border-style`将纠正问题，但为了更加合乎逻辑和相关，最好使用它来`border-image-width`代替`border-style`或`border-width`有时使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T20:39:02.803

考虑添加：

```
border: 15px solid transparent; 
```

15px 只是一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-19T09:48:30.420

添加`fill`：

```
-webkit-border-image: url(<%= asset_path('wxskvip_head_frame.png') %>) 6 fill stretch; 
```

# mysql - MySQL排序varchar列数字，数字优先

> ID：12295571
> 
> 赞同：3
> 
> 时间：2012-09-06T08:05:14.440
> 
> 标签：mysql

我有一个 varchar 列，我想对数字进行排序，这在使用这个技巧时效果很好：[https](https://stackoverflow.com/a/5418033/1005334) ://stackoverflow.com/a/5418033/1005334 （简而言之：）`...ORDER BY Result * 1`。

但是，相关表格包含结果。所以会发生这样的事情：

```
Result
------
DNS
DNF
1
2
3 
```

数字排序正确，但是`DNF`像这样排序时数字高于数字。我想要的是数字排序，但非数字按字母顺序排列在数字**下方**。像这样：

```
Result
------
1
2
3
DNF
DNS 
```

我可以通过什么方式修改查询（最好只有`ORDER BY`子句）来获得这个结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:08:42.083

使用 LPAD

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_lpad](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_lpad)

```
LPAD(yourField, 20, '0'); 
```

这将管理“varchar 数字字段”的正确顺序（10 将在 2 之后）并将字符串放在末尾。

[SqlFiddle](http://sqlfiddle.com/#!2/779b4/5)

第二个论点（20）是相当随意的。它应该等于（或大于）您的字段中最长字符串的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:12:37.770

```
SELECT *, (Result REGEXP '^[0-9]+$') AS is_numeric
FROM table_name
ORDER BY is_numeric DESC, 
    CASE WHEN is_numeric THEN (Result + 0) ELSE Result END ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:08:43.970

您可以使用**[MySQL 的 REGEXP](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)**来做到这一点。试试这个，

```
SELECT *
FROM tablea
ORDER BY  IF(`Result` REGEXP '^-?[0-9]+$', 0, 1) ASC,
          `Result` ASC 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/bea89/1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T08:09:11.490

尝试这个：

请更改您的 ORDER BY 条款：

```
 ORDER BY
  CASE WHEN Result REGEXP '^[0-9]+$' THEN Result*1 else 999999 END,
       Result 
```

这将首先对数值进行排序，然后是其余的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:10:03.597

```
ORDER BY CAST(`Result` AS SIGNED) DESC 
```

这应该有效。

# jquery - 为什么 $.getJSON 在这种情况下不起作用

> ID：12295573
> 
> 赞同：2
> 
> 时间：2012-09-06T08:05:18.747
> 
> 标签：jquery

我已经使用 jQuery 的 getJSON 编写了一个 ajax 请求，如下所示

```
 $.getJSON('bDays.json', function (bDy) { // This file exists in same folder path
      alert(1); // It is not executed..                     
 }); 
```

即使我更改代码以获取 .txt 文件..它不起作用..请让我知道我的代码可能有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:07:55.423

[getJSON](http://api.jquery.com/jQuery.getJSON/)使用 get HTTP 请求来检索 json 编码数据，它不会从本地驱动器打开文本文件。

JSON 数据应托管在网络服务器上，然后您可以参考其完整 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:28:06.033

这里有几件事可以尝试：

1.  正如其他人指出的那样，`bDays.json`必须可以通过 HTTP 请求访问。尝试用完整的 URL替换`'bDays.json'`您的通话。`getJSON`

2.  确保`bDays.json`包含有效的 JSON（通过验证器运行它，例如[这个](http://jsonlint.com/)，以确定它是否不明显）。该文件必须是有效的 JSON，如[文档](http://api.jquery.com/jQuery.getJSON/)中所述：

    > 从 jQuery 1.4 开始，如果 JSON 文件包含语法错误，请求通常会静默失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:08:06.717

检查您是否在`document.ready()`handler 中编写代码。

```
$(function() {
  $.getJSON('bDays.json', function (bDy) { 
      alert(1);          
 });
}); 
```

一件事，`$.getJSON()`无法解析或打开文本文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T08:08:52.443

回调函数是*第三个*参数：

```
 $.getJSON('bDays.json', null, function (bDy) { 
      alert(1);                    
 }); 
```

另外，尝试使用**完整的 url**而不是文件名。

# ios - 使用 UIGestureRecognizer 传递奇怪的 ios 触摸事件

> ID：12295576
> 
> 赞同：3
> 
> 时间：2012-09-06T08:05:32.477
> 
> 标签：ios, uigesturerecognizer, hittest, uiresponder

嗨，我在 iOS 自定义视图中观察到一些奇怪的东西，我在自定义视图中有一个按钮，我正在寻找文档或您的答案来解释为什么我有这个观察结果

我有一个自定义视图（UIView 的子类），它包含一个简单的按钮，我通过 addTarget:Action 将按钮触摸事件与 UITouchUpInside 绑定，我只是将它选择器绑定到一个简单的方法，即 NSLog 一条消息

如果您显示自定义视图并点击按钮，您可以在控制台中看到消息，一切都按预期工作。

但是，如果您将 UIGestureReognizer 添加到自定义视图并运行它，当您单击按钮时，它不再打印消息，为什么？我做了更深入的调查，并通过查看自定义视图中的 hittest 方法（视图包含按钮）（我覆盖它，但我没有做任何事情，我只是再次调用 super），hittest 正在返回正确的视图，即当我单击按钮时，自定义视图的 hittest 方法正在返回 UIButton

我不明白这里的事件链，有人可以指出解释这一点的文档吗？

在我看来，当您将 regonizer 添加到按钮的容器视图时，由于某种原因，按钮不知道如何处理事件，因此它要求其超级视图（在这种情况下为自定义视图）来处理它，但是为什么?? 我已经通过 UITouchUPInside 将事件处理程序绑定到按钮

请帮助我想了解这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:08:29.390

将识别器的[cancelsTouchesInView](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instp/UIGestureRecognizer/cancelsTouchesInView)属性设置为`NO`。

# android - 在中心旋转图像不平滑（Monodroid）

> ID：12295578
> 
> 赞同：5
> 
> 时间：2012-09-06T08:05:37.873
> 
> 标签：android, rotation, xamarin.android

我有一个图像（看起来像一个圆形加载圆），我想围绕它自己的中心旋转。我看到很多代码建议将 PivotY 和 PivotX 设置为 0.5F 或图像的一半。两者都不起作用..经过大量试验和错误后，它确实使用以下代码围绕自己的中心旋转：

```
ImageView loading = FindViewById<ImageView>(Resource.Id.loadingGif);
RotateAnimation rAnim = new RotateAnimation(0.0F, 359.0F,      Dimension.RelativeToSelf, 0.25F, Dimension.RelativeToSelf, 0.25F);
rAnim.Interpolator = new LinearInterpolator();
rAnim.RepeatCount = Animation.Infinite;
rAnim.Duration = 1000;
loading.StartAnimation(rAnim); 
```

但是动画本身不再流畅，图像似乎旋转了大约 50 度，然后开始挂起并跳过一半的旋转，然后在旋转的上半部分正常继续（我希望这有任何意义）。

知道为什么我的旋转不能顺利旋转 360 度吗？

***编辑***

我还没有解决这个问题，但我确实发现了它的一些特殊之处。动画在加载屏幕上使用，动画时刻没有额外的功能。我注意到，当我将手指放在屏幕上时，动画确实顺利进行！

这让我想到问题可能不在动画代码中，而在其他方面......但我还不知道......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:07:23.010

我终于找到了答案！

我已经包括了这一行：

```
loading.setDrawingCacheEnabled(true); 
```

之后也必须将枢轴更改为 0.5F。现在动画运行流畅！

```
//Rotate image
ImageView loading = FindViewById<ImageView>(Resource.Id.loadingGif);
loading.setDrawingCacheEnabled(true);
rAnim = new RotateAnimation(0.0F, 359.0F, Dimension.RelativeToSelf, 0.5F, Dimension.RelativeToSelf, 0.5F);  
rAnim.Interpolator = new LinearInterpolator();
rAnim.RepeatCount = Animation.Infinite;
rAnim.Duration = 1500;
loading.StartAnimation(rAnim); 
```

# javascript - 打开/关闭输入收音机

> ID：12295586
> 
> 赞同：1
> 
> 时间：2012-09-06T08:06:01.493
> 
> 标签：javascript, html, input, show-hide, radio

我解释了我的问题，我有一个用于删除类别的叠加层。我添加了一个操作，让您选择删除作业类别时的去向。

为此，我使用复选框，并在单击复选框时添加一个 javascript 函数“打开”表单，
这是一个示例框关闭：

![第一个盒子](../Images/d1017dc930bf2282c8651d371ca924ec.png)

这是一个打开的示例框：

![第二个盒子](../Images/4dd9665e0418bbbddf28efbe1c49ca44.png)

我的html代码：

```
 <form method="get">
    <input type="radio" name="cat_action" value="delete" /> Delete all tracks<br />
    <input type="radio" name="cat_action" value="move" onclick="showMe('div_<?php echo $value->ID ?>', this)" /> Move tracks<br />

    <div id="div_<?php echo $value->ID ?>" style="display:none">
    <label for="track">Move tracks to: </label>
    <select id="cate" name="cate">
    <?php foreach (arrayToObject($startup->getCat()) as $value) { ?>
      <option value="<?php echo $value->ID ?>"><?php echo $value->post_title ?></option>
    <?php } ?>  
    </select> <br />        
    </div><br />    

    <button type="submit"> OK </button>
    <button type="button" class="close"> Cancel </button>
  </form> 
```

我的 JavaScript 代码：

```
<script type="text/javascript">
function showMe (it, box) {
var vis = (box.checked) ? "block" : "none";
document.getElementById(it).style.display = vis;
}
</script> 
```

**我的问题：**
当复选框打开列表时，当我单击第一个复选框时它不会关闭。
我只想创建一个关闭第二个复选框的函数。

你可以在这里试试：http: [//jsbin.com/usituv/3/edit](http://jsbin.com/usituv/3/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:15:10.220

问题是由于您在“删除”选项选择上没有做任何事情 - 仅在“移动”选择上。以下是我如何更新您的脚本以使其正常工作（前提是我了解您的需求）。特别注意变化：

*   *向移动*单选按钮添加`id`属性
**   将`onclick`处理程序添加到*删除*单选按钮*   更改 javascript 函数以仅接受一个参数*   使用`getElementById`函数检索对javascript 函数内的*移动单选按钮的引用。**

 *另请注意，最好将所有 javascript 分离到一个单独的文件中，包括分配`onclick`处理程序。但是，我只是在这里解决您手头的问题。

```
<form method="get">
    <input type="radio" name="cat_action" value="delete"
           onclick="showMe('div_1')"/> Delete all tracks<br />
    <input type="radio" name="cat_action" value="move"
           onclick="showMe('div_1')" id="move"/> Move tracks<br />

    <div id="div_1" style="display:none">
        <label for="paypal">Move tracks to: </label>
        <select id="cate" name="cate">
            <option value="dubstep">Dubstep</option>
            <option value="breakbeat">Breakbeat</option>
            <option value="dnb">D'n'B</option>
        </select> 
    </div>

    <br />

    <button type="submit"> OK </button>
    <button type="button" class="close"> Cancel </button>
</form>

<script type="text/javascript">
    function showMe (it) {
        var box = document.getElementById("move");
        var vis = (box.checked) ? "block" : "none";
        document.getElementById(it).style.display = vis;
    }
</script> 
```*

# objective-c - 我可以传递给方法的参数数量是否有限制？

> ID：12295593
> 
> 赞同：7
> 
> 时间：2012-09-06T08:06:16.303
> 
> 标签：objective-c, arguments

我只是想知道我可以使用以下样式传递给Objective-C中的方法的参数数量是否有限制：

```
- (void)example:(int)i forTime:(int)i forDate:(NSDate *)date etc etc 
```

这当然是假设的，但我只是觉得了解这些限制背后的原因很有趣（例如 URL 中的字符限制等），我喜欢在 StackOverflow 上看到其他人对此类问题的看法

即使对允许传递的参数数量有限制，是否仍然可以将`NSArray`' 包含的对象作为参数传递，然后使用方法从数组中调用这些对象`objectAtIndex`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T21:21:51.750

根据 Hot Licks 的建议，我很快用 C 语言编写了一个简短的程序来生成测试方法并根据所需输入的参数数量进行调用。刚刚制作了一个需要 1,000 个 NSNumber 参数的方法，它运行良好。在我的显示器上的 Xcode 中占用了两页，但它运行时没有任何警告或任何东西。以后可能会尝试 10,000 次，但似乎除了硬件功能等施加的任何限制外，没有其他限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:13:39.513

不，参数的数量没有限制

唯一的限制因素是给定架构上进程的堆栈大小，因为方法参数放在堆栈上。

# php - PHP使用上传的文件爆炸换行符

> ID：12295594
> 
> 赞同：2
> 
> 时间：2012-09-06T08:06:16.423
> 
> 标签：php

用户在我的网站上提交的数据文件格式如下：

```
Text text text text text
text texttext text text
text text text text 

text text text text text 
text text text text 
text text text 
```

在开发我的 php 脚本来读取这些文件时，我会在使用分隔符后对文件进行爆炸（）`file_get_contents`，该分隔符`\n\n`将从上面的示例中创建一个数组。

但是现在我正在过渡到一个实时站点，并且正在开发提交文件的表单，这种爆炸技术不再有效。

```
foreach ($_FILES['file']['tmp_name'] as $file) {
   $fname = file_get_contents($file);
   $rows = explode("\n\n", $fname);
   //do work
} 
```

当我`echo $row[0]`返回整个上传的文件时，而不仅仅是第一段。$rows[1] 为空。**为什么没有爆炸在这里工作？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:11:59.320

尝试规范化行尾：

```
$c = file_get_contents($file);
$c = str_replace(array("\r\n", "\n\r"), array("\n", "\n"), $c);
$rows = explode("\n\n", $c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:10:38.327

这是由于本地开发机器和实时机器之间的换行符不同。在目标机器上使用正确的新行。

# c# - 如何将属性绑定到 xaml 中的属性值

> ID：12295600
> 
> 赞同：2
> 
> 时间：2012-09-06T08:06:25.720
> 
> 标签：c#, wpf, xaml, data-binding

我有一个名为 TextBoxColumn 的自定义类，如下所示

```
public class TextBoxColumn : DataGridTemplateColumn
{
    public static readonly DependencyProperty FieldNameProperty = DependencyProperty.Register("FieldName", typeof(string), typeof(TextBoxColumn), new PropertyMetadata(""));
    public string FieldName
    {
        get { return (string)GetValue(FieldNameProperty); }
        set { SetValue(FieldNameProperty, value); }
    }
} 
```

从 XAML 创建 DataGrid 列时：

```
<DataGrid>
    <DataGrid.Columns>
        <local:TextBoxControl FieldName="FirstName"/>
        <local:TextBoxControl FieldName="LastName"/>
    </DataGrid.Columns>
</DataGrid> 
```

在 XAML 字典中，我为此 TextBoxColumn 定义了单元格模板：

```
<DataTemplate x:Key="TextBoxColumn_CellTemplate">
    <TextBox Text="{Binding FieldName}"/> <!-- Here is the problem, if I give FirstName instead of FieldName, it works fine -->
</DataTemplate>` 
```

如何获取 TextBoxColumn 的 FieldName 属性的值并将其绑定到 Text 属性？没有 C# 代码如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:11:23.337

为 TextBoxColumn 控件命名并尝试按元素名称绑定它的属性

```
<TextBox Text="{Binding ElementName=txtBoxCol, Path=FieldName}"></TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:09:58.977

没有代码你不能做事，没有办法绑定绑定的属性（在这种情况下，你想[`Binding.Path`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx)成为任何东西`FieldName`）。

# php - PHP - 简单的下载脚本

> ID：12295604
> 
> 赞同：8
> 
> 时间：2012-09-06T08:06:32.833
> 
> 标签：php

我正在制作一个简单的下载脚本，我的用户可以在其中下载自己的图像等。

但我遇到了一些奇怪的问题。

当我下载文件时，无论我下载什么文件类型，它都包含我的 index.php 文件中的内容。我的代码是这样的：

```
$fullPath = $r['snptFilepath'] . $r['snptFilename'];

if (file_exists($fullPath)) {

    #echo $fullPath;

    // setting headers
    header('Content-Description: File Transfer');
    header('Cache-Control: public'); # needed for IE
    header('Content-Type: '.$r['snptFiletype'].'');
    header('Content-Disposition: attachment; filename='. $filename . '.' . $r['snptExtension']);
    header('Content-Length: '.$r['snptSize'].'');
    readfile($fullPath)or die('error!');
} else {
    die('File does not exist');
} 
```

$r 是来自我的数据库的结果，上传文件时我在其中存储了大小、类型、路径等。

**更新**

当我上传和下载 *.pdf 文件时，它正在成功运行。但是当我尝试下载 *.zip 和 text/rtf、text/plain 时，它的行为很奇怪。

奇怪的意思是：它下载完整的 index.php 文件，其中包含下载的文件内容。

**回答**

我从[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)复制了这个，它现在可以工作了。似乎：ob_clean(); 成功了！感谢大家的帮助。

```
#setting headers
    header('Content-Description: File Transfer');
    header('Content-Type: '.$type);
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T09:08:42.473

试试这个函数，或者在你的代码中实现这些头文件

```
 function force_download($filename) {
    $filedata = @file_get_contents($filename);

    // SUCCESS
    if ($filedata)
    {
        // GET A NAME FOR THE FILE
        $basename = basename($filename);

        // THESE HEADERS ARE USED ON ALL BROWSERS
        header("Content-Type: application-x/force-download");
        header("Content-Disposition: attachment; filename=$basename");
        header("Content-length: " . (string)(strlen($filedata)));
        header("Expires: ".gmdate("D, d M Y H:i:s", mktime(date("H")+2, date("i"), date("s"), date("m"), date("d"), date("Y")))." GMT");
        header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT");

        // THIS HEADER MUST BE OMITTED FOR IE 6+
        if (FALSE === strpos($_SERVER["HTTP_USER_AGENT"], 'MSIE '))
        {
            header("Cache-Control: no-cache, must-revalidate");
        }

        // THIS IS THE LAST HEADER
        header("Pragma: no-cache");

        // FLUSH THE HEADERS TO THE BROWSER
        flush();

        // CAPTURE THE FILE IN THE OUTPUT BUFFERS - WILL BE FLUSHED AT SCRIPT END
        ob_start();
        echo $filedata;
    }

    // FAILURE
    else
    {
        die("ERROR: UNABLE TO OPEN $filename");
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T09:18:44.610

我从[http://php.net/manual/en/function.readfile.php](http://php.net/manual/en/function.readfile.php)复制了这个，它现在可以工作了。ob_clean(); 成功了。。

```
 #setting headers
    header('Content-Description: File Transfer');
    header('Cache-Control: public');
    header('Content-Type: '.$type);
    header("Content-Transfer-Encoding: binary");
    header('Content-Disposition: attachment; filename='. basename($file));
    header('Content-Length: '.filesize($file));
    ob_clean(); #THIS!
    flush();
    readfile($file); 
```

# python - 如何使用python在mysql中插入python dict的键和值

> ID：12295605
> 
> 赞同：0
> 
> 时间：2012-09-06T08:06:37.423
> 
> 标签：python, mysql, dictionary, insert, executemany

我有一个像这样的python dict：

```
my_dict = {'find': ['http://time.com', 'http://find.com'], 'time': ['http://any.com', 'http://www.tim.com', 'http://mine.in']...} 
```

我想在 mysql 表的两个不同列中插入`keys`和`values`字典。`my_dict`列名分别是`term`和`urls`。我现在有三列：`id`, `term`，`urls`并且**我想在不同的行中插入每个键和值对。**

我想以`urls`逗号分隔的方式存储链接。my_dict 值中的网站链接必须用逗号分隔存储，就像`http://time.com, http://mine.com.` 我尝试以以下方式插入一样

```
for i in my_dict.items():   
    keys = i[0]
    values = i[1]
    sql = """INSERT INTO index_table (term, urls) VALUES (%s, %s)"""
    cursor.execute(sql, (keys, values)) 
```

但它显示以下错误：

```
(1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '))' at line 1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:18:35.690

在这种情况下，您的值是您尝试传递给 SQL 查询的列表，这会导致您出现问题。

如果您想为值部分中的每个 url 单独记录（假设您总是有一个值部分的列表）

```
for i in my_dict.items():
    term = i[0]
    for url in i[1]:
        sql = """INSERT INTO index_table (term, urls) VALUES (%s, %s)"""
        cursor.execute(sql, (term, url)) 
```

或者，如果您想将 url 一起存储在一条记录中，则需要对列表进行腌制或转换为 json 之类的格式。从数据库中提取数据时需要您适当地处理数据

```
import json
for i in my_dict.items():
    term = i[0]
    urls = json.dumps(i[1])
    sql = """INSERT INTO index_table (term, urls) VALUES (%s, %s)"""
    cursor.execute(sql, (term, urls)) 
```

改为以逗号分隔格式存储网址；

```
for i in my_dict.items():
    term = i[0]
    urls = ', '.join(i[1])
    sql = """INSERT INTO index_table (term, urls) VALUES (%s, %s)"""
    cursor.execute(sql, (term, urls)) 
```

# ios - UIView 翻转动画太快 - iOS

> ID：12295607
> 
> 赞同：1
> 
> 时间：2012-09-06T08:07:00.590
> 
> 标签：ios, xcode, animation, uiview

我尝试为可变数组中的一系列 UIView 设置动画以模拟此[动画](https://vimeo.com/11318617)

```
for(int k = 0; k< [imageViewCarrier count] ; k++){
    UIView *transformingView = [imageViewCarrier objectAtIndex:k];
    [UIView animateWithDuration:30.0 animations:^{
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:30.0];
        [UIView setAnimationDelegate:self];
        [UIView transitionFromView:transformingView toView:splicedImageView duration:3 options:UIViewAnimationOptionTransitionFlipFromLeft completion:NULL];
        [UIView commitAnimations];

    }completion:^(BOOL finished){
        NSLog(@"Transition done");
    }];

} 
```

动画似乎太快了。对此有任何建议。确实搜索了一些文档，但无法弄清楚。一些帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:27:23.370

嗯，我想你可能做错了。如果没记错的话，在使用 时`[UIView animinateWithDuration:animiations:completion:]`，您不应该调用`[UIView beginAnimations:nil context:NULL];`and`[UIView commitAnimations];`或`setAnimationDelegate:`or `setAnimationDuration:`，因为它们是在引入基于块的方法之前必须使用的动画视图的旧方法。

我会尝试将它们排除在外，看看会发生什么。另外，请注意，持续时间参数以秒为单位，所以`30.0`看起来有点太长了。

只是一个样式说明：迭代集合的“正确”Objective-C方法如下：

```
for(UIView* view in imageViewCarrier){
   [view doSomething];
} 
```

# c# - 渲染图像没有 1-1 效果

> ID：12295609
> 
> 赞同：3
> 
> 时间：2012-09-06T08:07:06.223
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有几个显示图片的页面，它们调用控制器动作，其代码显示在[post的艺术加载图像的精确方法但效果相同......所以一一加载，请为您提供帮助当前代码操作

```
 public FileContentResult ImageVew(string sourcePath)
    {

        string location = (string)Session["TicketFilePath"] + sourcePath;

        byte[] myByte = System.IO.File.ReadAllBytes(location);

        return File(myByte, "image/jpeg");

        Image i;
        using (MemoryStream ms = new MemoryStream())
        {
            ms.Write(myByte, 0, myByte.Length);
            i = Image.FromStream(ms);
        }
        return File(imageToByteArray(i.GetThumbnailImage(100, 100, () => false, IntPtr.Zero)), "image/png");
    }

    public byte[] imageToByteArray(System.Drawing.Image imageIn)
    {
        MemoryStream ms = new MemoryStream();
        imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        return ms.ToArray();
    } 
```

最新版本此方法，但不是结果

```
 public ActionResult ImageVew(string sourcePath)
    {
        FileInfo fi = new FileInfo((string)Session["TicketFilePath"] + sourcePath);

        return File(fi.FullName, Utilities.MimeType(fi.Name));
    }

    public ActionResult ImageVew(string sourcePath)
    {
        FileInfo fi = new FileInfo((string)Session["TicketFilePath"] + sourcePath);

        byte[] imageFile = System.IO.File.ReadAllBytes(fi.FullName);
        return new FileContentResult(imageFile, Utilities.ImageType(fi.Name));

    }

    public ActionResult ImageVew(string sourcePath)
    {

        FileInfo fi = new FileInfo((string)Session["TicketFilePath"] + sourcePath);
        if (fi.Exists)
        {
            byte[] imageFile = System.IO.File.ReadAllBytes(fi.FullName);

            return File(imageFile, Utilities.ImageType(fi.Name));
        }
        else return null;
    } 
```

图像渲染 1 比 1 并从网络路径加载图像......但在 1\. 加载图像兑现之后，以及小伙子时刻请帮助我开发人员

f 部分代码然后调用带有渲染 m 控制的操作

```
 private void WriteDataRow(Class item, HtmlTextWriter writer) 
    {
 writer.RenderBeginTag(HtmlTextWriterTag.Td);
        writer.RenderBeginTag(HtmlTextWriterTag.Center);
        writer.AddStyleAttribute(HtmlTextWriterStyle.Height, "20px");
        string src = Url.Action("ImageVew", new { sourcePath = item.Status.Marker });
        writer.AddAttribute(HtmlTextWriterAttribute.Src, src );
        writer.AddAttribute(HtmlTextWriterAttribute.Alt, item.Status.StatusName);
        writer.RenderBeginTag(HtmlTextWriterTag.Img);
        writer.RenderEndTag();
        writer.RenderEndTag();
        writer.RenderEndTag();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:16:30.017

Asp.net mvc 永远不会同时处理来自同一用户（实际上是同一会话）的多个请求，除非您打开会话状态或使其只读该操作。

到控制器或您需要添加的操作

```
[SessionState(System.Web.SessionState.SessionStateBehavior.ReadOnly)] 
```

现在这不适用于 Cassini（Visual Studio 中内置的网络服务器），因为它一次只提供一个请求，但是如果您使用 IIS express 或 IIS 进行测试，您应该会看到它们使用第一种方法并行加载。

# android - 无法对齐视图

> ID：12295616
> 
> 赞同：6
> 
> 时间：2012-09-06T08:07:20.680
> 
> 标签：android, android-layout

这是很长布局的代码的一部分。所以发布整个代码是没有用的。
我想对齐**红色**圆圈。两个位置都显示在红色圆圈中。
整个`ParentLayout`活动是一个`RelativeLayout`但与此无关。
请帮助我。我已经尝试了所有我知道的东西。

![在此处输入图像描述](../Images/93dcefddb307e92a787f0e7559f8edd0.png)

```
<LinearLayout 
    android:id="@+id/thumbnail"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/texttitle"
    android:orientation="horizontal"
    android:layout_marginTop="20dp"
    android:layout_marginBottom="20dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:background="@drawable/Layoutborder"
    >
        <LinearLayout 
          android:id="@+id/Linearimagetop"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:padding="3dip"
          android:layout_alignParentLeft="true"
          android:background="@drawable/image_bg"
          >
            <ImageView
                android:id="@+id/productimage1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/defaultimage"
                android:layout_below="@+id/texttitle"
                />
        </LinearLayout>
        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="5dp"
            >
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Availability "
                android:textColor="@color/black"
                android:textStyle="normal" />  
            <View
                android:layout_width="1dp" 
                android:layout_height="fill_parent"
                android:background="@color/black"
                android:layout_marginLeft="3dp"
                android:layout_marginRight="3dp"/>
            <TextView
                android:id="@+id/availibility"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="In Stock"
                android:textColor="#4A7023"
                android:textStyle="normal" 
                android:layout_marginLeft="3dp"/>
        </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:18:35.587

您提供的代码未显示您在“此处”指定 RED 文本属性的位置。您可能只需将其添加为相对布局中的另一个元素，您可以在其中指定可用性和库存，使其与前面的文本对齐。

编辑：（在了解您的实际问题后）

我建议包装在另一个线性布局中，这将使您能够将文本放置在图片上方，如下面的代码所示。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="100dp"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="20dp" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:text="Availability "
            android:textStyle="normal" />

        <View
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_marginLeft="3dp"
            android:layout_marginRight="3dp" />

        <TextView
            android:id="@+id/availibility"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginLeft="3dp"
            android:text="In Stock"
            android:textColor="#4A7023"
            android:textStyle="normal" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/texttitle"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="20dp"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/Linearimagetop"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:padding="3dip" >

            <ImageView
                android:id="@+id/productimage1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/texttitle"
                android:src="@drawable/button" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:21:29.387

如果整个事情都在 RelativeLayout 内，请删除外部 LinearLayout（根据需要将边距等移动到第一个子 LinearLayout），并更改第二个子 LinearLayout（具有 5dp 填充的那个）

```
android:layout_alignParentRight="true"
android:layout_alignParentTop="true" 
```

如果您不想这样做并且出于某种原因必须保留外部 LinearLayout，请移动

```
android:layout_marginTop="20dp" 
```

从父LinearLayout到第一个孩子，将第二个孩子的layout_width设置为fill_parent，并添加android:gravity="right"。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:25:45.433

将第三个更改`LinearLayout`为：

```
<LinearLayout
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="right"
    android:padding="5dp" > 
```

不确定您是否对这种布局感到满意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:51:17.593

这是实现上述输出的另一种方法。希望它可以帮助某人。

```
<RelativeLayout
    android:id="@+id/thumbnail"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:layout_marginTop="20dp"
    android:layout_marginBottom="20dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:background="@color/white"
    >
    <LinearLayout 
        android:id="@+id/Linearimagetop"
    android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:background="@drawable/image_bg"
        android:layout_alignParentLeft="true"
        >
        <ImageView
            android:id="@+id/productimage1"
        android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/defaultimage"
            android:layout_below="@+id/texttitle"
        />
    </LinearLayout>
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        >
        <TextView
        android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Availability "
            android:textColor="@color/black"
            android:textStyle="normal" />  
        <View
            android:layout_width="1dp" 
            android:layout_height="fill_parent"
            android:background="@color/black"
            android:layout_marginLeft="3dp"
            android:layout_marginRight="3dp"
            />
        <TextView
            android:id="@+id/availibility"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="In Stock"
            android:textColor="#4A7023"
            android:textStyle="normal" 
            android:layout_marginLeft="3dp"
            />
    </LinearLayout>
</RelativeLayout> 
```

# android - “eglConfig 未初始化”错误，但我没有使用 openGl

> ID：12295623
> 
> 赞同：5
> 
> 时间：2012-09-06T08:07:46.247
> 
> 标签：android, android-widget

这很奇怪，因为我的应用程序中没有使用任何 opengl！

我得到了这个堆栈跟踪（感谢 ACRA）：

```
java.lang.RuntimeException: eglConfig not initialized
at android.view.HardwareRenderer$GlRenderer.initializeEgl(HardwareRenderer.java:582)
at android.view.HardwareRenderer$GlRenderer.initialize(HardwareRenderer.java:518)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1300)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4575)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
at dalvik.system.NativeStart.main(Native Method) 
```

一些线索：

*   它仅在我添加了小部件的应用程序版本中开始发生。所以很可能与 Widget 渲染有关
*   我发生了几次，它似乎来自同一个设备
*   该设备每次报告不同的屏幕尺寸...

所有报告的共同点：

*   PHONE_MODEL = cm_tenderloin
*   品牌 = 通用
*   产品 = 触摸板
*   ANDROID_VERSION = 4.0.4
*   相同的“INSTALLATION_ID”
*   相同的“SERIAL”，长度不自然

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:12:15.340

在谷歌中查找“cm_tenderloin”，我发现它是 hp 的里脊肉的氰基模组。

也许他们实现了一个家庭替代品，它使用 openGl 进行渲染堆栈。我想知道我的小部件是否是唯一一个受苦的。

我仍然不知道每个报告如何在同一设备上具有不同的屏幕尺寸。这个家庭替代品的开发者使用我未知的小部件的机会有多大，他正在模拟各种屏幕尺寸？（接近于零）

编辑 -

我发现一个[帖子](http://rootzwiki.com/topic/30756-eglconfig-not-initialized/)表明这个问题与我的代码无关，而是与 root/modded 设备中驱动程序的错误安装有关。

# android - 按下时更改 listActivity 中的行高

> ID：12295628
> 
> 赞同：0
> 
> 时间：2012-09-06T08:07:57.530
> 
> 标签：android, android-listview, baseadapter

我创建了一个`ListActivity`带有自定义适配器的类。

行很简单：`TextView`和一个`Button`.

实现`getView`方法如下：

```
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        convertView = getLayoutInflater().inflate(R.layout.row, null);
    }

    TextView tV = (TextView) convertView.findViewById(R.id.tv);
    tV.setText(MY_LIST[position]);

    return convertView;
} 
```

现在我希望每一行在按下时动态地向自身添加另一个按钮，在其他组件下方，因此，行高会增加。

我该如何执行此步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:13:04.260

新按钮应默认隐藏。当用户单击行时，您的处理程序会生成类似`mHiddenButton.setVisibility(View.VISIBLE)`.

# java - java路径和总指挥官的问题

> ID：12295641
> 
> 赞同：1
> 
> 时间：2012-09-06T08:08:42.427
> 
> 标签：java, path, total-commander

关于总指挥官和 java 路径（总指挥官 7.56a - Windows 7 64 位），我面临一个非常奇怪的问题。

在将我的 java 从 6 更新到 7 并将我的所有环境变量指向正确的方向后，我有以下奇怪的行为。

当我打开命令行（不是通过总指挥官）时，会打印以下命令：

*   `java -version prints java version "1.7.0_07"`（预期的）
*   `javac -version prints javac 1.7.0_07`（预期的）

但是当我**通过总指挥官（在总指挥官的底部命令框中键入 cmd）打开一个 cmd**时，我得到以下信息：

*   `java -version prints java version "1.6.0_22"`（**我以前的java版本**）
*   `javac -version 打印 javac 1.7.0_07（正确的！）

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:37:59.047

问题解决了。

我还必须更新我的 32 位版本的 java，因为总指挥官正在使用我的 32 位版本的 cmd。

感谢@reporter 为我指出了总指挥官的论坛。[你可以在这里](http://ghisler.ch/board/viewtopic.php?p=255020#255020)找到我的问题的完整主题

# wso2 - wso2 治理注册表构建失败

> ID：12295653
> 
> 赞同：0
> 
> 时间：2012-09-06T08:09:30.210
> 
> 标签：wso2, wso2carbon, wso2greg

我正在尝试使用 maven 3 通过 src 文件构建 wso2 治理注册表，但经过多次重试后，我也被卡住了。我已经下载了所有必需的库，并修复了 pom 文件中的所有重复子项，但是当我尝试构建时，我得到了这个错误。

```
"[ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.
2-beta-5:attached (dist) on project axis2-kernel: Failed to create assembly: Err
or creating assembly archive docs: You must set at least one file. -> [Help 1]
[ERROR]" 
```

和以前

```
"[FATAL] Non-readable POM C:\greg\wso2greg-4.1.1-src\dependencies\axis2\1.6.1-wso2v1\modules\pom.xml: C:\greg\wso2greg-4.1.1-src\dependencies\axis2\1.6.1-wso2v1\modules\pom.xml (Impossibile trovare il file specificato) @ 
 for project  at C:\greg\wso2greg-4.1.1-src\dependencies\axis2\1.6.1-wso2v1\modules\pom.xml for project  at C:\greg\wso2greg-4.1.1-src\dependencies\axis2\1.6.1-wso2v1\modules\pom.xml" 
```

我正在尝试使用 maven 2 构建，但是，即使控制台输出消息显示“BUILD SUCCEFFULL”，我也可以找到 bin 文件夹和相关的 wso2server.bat 文件。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T06:50:01.093

请克隆下面的 repos 并`mvn clean install -e`相应地在每个人上运行。

*   [https://github.com/wso2/carbon4-kernel.git](https://github.com/wso2/carbon4-kernel.git)
*   [https://github.com/wso2/carbon-registry.git](https://github.com/wso2/carbon-registry.git)
*   [https://github.com/wso2/carbon-governance.git](https://github.com/wso2/carbon-governance.git)
*   [https://github.com/wso2/carbon-governance-extensions.git](https://github.com/wso2/carbon-governance-extensions.git)
*   [https://github.com/wso2/carbon-store](https://github.com/wso2/carbon-store)

然后从源代码构建 G-Reg！

注意：当前 G-Reg 开发人员快照：[https ://github.com/wso2/product-greg.git](https://github.com/wso2/product-greg.git)

# internet-explorer-8 - 如果已经启用，有没有办法在 IE8 中禁用兼容模式？

> ID：12295659
> 
> 赞同：0
> 
> 时间：2012-09-06T08:09:47.310
> 
> 标签：internet-explorer-8, ie8-compatibility-mode

我正在“取消”对 Web 应用程序的 IE7 支持，并且我不希望 IE8 用户看到“哎呀，您使用的是旧浏览器”警告。

**如果 IE8 用户已经点击了兼容模式按钮，有没有办法让网页立即禁用兼容模式？**设置`X-UA-Compatible`标题或元标记似乎没有帮助。

我发现[了一篇](http://blogs.msdn.com/b/ie/archive/2009/07/01/ie-compatibility-list-pruning.aspx)关于添加`IEStandards.xml`. [另一篇博客文章](http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx)列出了从列表中删除站点的选项，但这并没有给我更多希望。

（IE9 是不同的。即使用户之前设置了兼容模式，如果给定正确的`X-UA-Compatible`标题和/或元标记，它似乎也会禁用它。[这是记录在案的。](http://msdn.microsoft.com/en-us/library/dd567845%28v=vs.85%29.aspx#about_compat_view)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:52:56.937

我最终只是[检测到兼容模式](https://stackoverflow.com/a/12296125/95357)，然后唠叨用户。至少 Google Plus 做到了这一点。

# facebook - facebook 注册 - 有时缺少 fbuid

> ID：12295661
> 
> 赞同：0
> 
> 时间：2012-09-06T08:09:51.857
> 
> 标签：facebook

我在我的网络项目中使用 facebook 注册。在大多数情况下，注册工作正常，但有时 facebook iframe 不会将 fbuid 发送到 php 脚本......

这是脸书的错误吗？任何解决方法？

这是facebook ifranme：

```
<iframe src="https://www.facebook.com/plugins/registration?
client_id=####&
redirect_uri=http://****/pre-login/facebook/fb_register_respond.php&
fields=name,email"
scrolling="auto"
frameborder="no"
style="border:none;display:block;"
allowTransparency="true"
width="350"
height="330">
</iframe> 
```

在某些注册中，fbuid 是错误的。如果用户未连接到 facebook 或已在 facebook 上注册，则不会显示 iframe。

这是php代码：

```
define('FACEBOOK_APP_ID', '####');
define('FACEBOOK_SECRET', '####');

function parse_signed_request($signed_request, $secret) {
  list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

  // decode the data
  $sig = base64_url_decode($encoded_sig);
  $data = json_decode(base64_url_decode($payload), true);

  if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
    error_log('Unknown algorithm. Expected HMAC-SHA256');
    return null;
  }

  // check sig
  $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
  if ($sig !== $expected_sig) {
    error_log('Bad Signed JSON signature!');
    return null;
  }

  return $data;
}

function base64_url_decode($input) {
    return base64_decode(strtr($input, '-_', '+/'));
}

if ($_REQUEST) {
    $response = parse_signed_request($_REQUEST['signed_request'], FACEBOOK_SECRET);

    // Die email Adresse des Users.
    $email = $response['registration']['email'];

    // Das Passwort (fb-user-id) des Users.
    $fbuid = $response['user_id'];
} else {

    // Im Fehlerfall.
    echo '$_REQUEST is empty';
    exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:47:51.333

> 在大多数情况下，注册工作正常，但有时 facebook iframe 不会将 fbuid 发送到 php 脚本......

默认情况下，注册插件允许用户**不**使用他们现有的 Facebook 帐户来注册您的服务——他们可以删除预先填写的数据，然后输入自己的数据，或者甚至不登录 Facebook（在这种情况下，他们是起初提供了一个空白表格，*如果*他们有帐户，还可以登录 Facebook ）。

从逻辑上讲，如果用户选择不使用他们的 Facebook 帐户，而只是用他们自己的数据填写表格 - 你在提交时不会收到传输到服务器的 Facebook 用户 ID，因为**没有。**

如果您不希望这样，并且希望用户仅使用他们现有的 Facebook 帐户进行注册（因此请确保*始终*获得 FB 用户 ID）——然后`fb_only`在调用注册插件时将参数设置为 true。

> [https://developers.facebook.com/docs/plugins/registration/](https://developers.facebook.com/docs/plugins/registration/)
> 
> “fb_only - 可选。（布尔值）只允许用户通过链接他们的 Facebook 个人资料进行注册。如果您没有自己的注册系统，请使用此选项。默认值：假。”</p>

# jdbc - 在 EcelipseLInk 应用程序中创建 JDBC 连接

> ID：12295673
> 
> 赞同：0
> 
> 时间：2012-09-06T08:10:15.410
> 
> 标签：jdbc, jpa-2.0, eclipselink

我正在尝试在 glassfish 上运行的 Eclipselink 应用程序中检索 java.sql.Connection。

```
Connection cnn = ((JpaEntityManager)em.getDelegate()).getServerSession().getAccessor().getConnection();
Connection cnn = ((EntityManagerImpl)(em.getDelegate())).getServerSession().getAccessor().getConnection();
Connection cnn = (Connection) em.unwrap(java.sql.Connection.class); 
```

但在所有情况下，我都会得到 cnn == null。

Netbeanse/Ecelipselink v 2.3.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:57:03.840

确保您已连接。

最后一种方法是正确的。确保您首先开始交易。

# android - 设备如何接收 Android GCM 推送通知？

> ID：12295674
> 
> 赞同：4
> 
> 时间：2012-09-06T08:10:15.077
> 
> 标签：android, push-notification, server-push

我最近一直在研究 android 推送通知。我想，我了解整体架构和消息流。

我想象它是这样的：

```
[Own server] --> [GCM] --> [Device] --> [Application] 
```

路线中唯一神秘的部分是[GCM]和[Device]之间。

长话短说，**使用什么基础设施将消息从 [GCM] 传递到 [Device]？**

我在某处读过，可能设备保持与 GCM 的打开连接。如果是这种情况，打开什么样的连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:03:04.080

关于 CGM 有很多关于[Android 开发者中心](http://developer.android.com/guide/google/gcm/adv.html)的信息。该设备保持与 CGM 的连接（我认为是 IP）。如果服务器和设备之间没有连接，CGM 将存储传入的消息以供稍后传递。

[iOS 推送技术在 APNS（Apple 推送通知服务）和设备（参见： wiki](http://en.wikipedia.org/wiki/Apple_Push_Notification_Service) ）之间保持开放的 IP 连接。因此，它可能与 GCM 明显相同。

# gwt - 如何删除/隐藏 GWT Tabpanel 标题

> ID：12295681
> 
> 赞同：1
> 
> 时间：2012-09-06T08:11:05.973
> 
> 标签：gwt

我有这个附加的 tabPanel ，我想删除这个灰色区域，或者把它变成白色 .. 知道我怎么能做到这一点。

谢谢 ![在此处输入图像描述](../Images/a239c7238817dc02a3c80f2205290c26.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:00:09.393

您可以轻松地从 CSS 中更改它，添加所需颜色的这些行：

```
.gwt-TabBar .gwt-TabBarRest{

 } 
```

查看[TabBar](https://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/TabBar.html)的 CSS 样式规则以获取更多信息。

PS：如果你使用[Firebug](http://en.wikipedia.org/wiki/Firebug_%28software%29)，你可以在不问别人的情况下找到这样的东西。

# macos - Mac 上的 SQLDeveloper 配置

> ID：12295683
> 
> 赞同：0
> 
> 时间：2012-09-06T08:11:21.203
> 
> 标签：macos, oracle-sqldeveloper

我是一名学生，需要练习 Oracle SQL 查询，因为我们的课程中有高级 SQL。我有运行 Mac OS X Snow Leopard 10.6.8 的基于 Intel 的 MacBook Pro。我刚刚下载了 Mac 的 SQLDeveloper 并解压缩了它。该应用程序执行并启动良好。但我无法创建任何连接。我收到以下错误：

> 状态：失败-测试失败：IO 错误：网络适配器无法建立连接。

当我键入以下参数时：

*   连接名称：hr.
*   用户名：hr.
*   密码：hr

*   连接类型：基本

*   角色：默认

*   主机名：本地主机

*   端口：1521
*   SID：兽人

我做错什么了吗？我需要安装其他东西吗？我是新手，所以如果我忽略了任何事情，请与我合作。我也用谷歌搜索了这个错误，找到了很多搜索结果，但无法解决我的问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-25T06:31:28.903

你有没有先安装数据库。我认为您需要安装 db 然后尝试使用 sqlDeveloper.i 建立连接也有同样的问题

# subquery - 我可以重用子查询的结果来优化整体查询吗？

> ID：12295684
> 
> 赞同：2
> 
> 时间：2012-09-06T08:11:21.640
> 
> 标签：subquery, sql-optimization

我正在使用以下查询来获取 profile_run_key 的前两条记录。我正在使用三个几乎相似的查询来完成这项工作。这意味着我要为“where”子句遍历表三次。所以我认为这将需要 3(n) 时间来执行。或者，我可以使用“Order by”，但执行需要 nlogn 时间。

```
SELECT name, weighted_average
      FROM idp_weighted_avg 
           where (profile_run_key =
                   (SELECT MAX (profile_run_key)
                      FROM idp_weighted_avg
                     WHERE SCORECARD_IDENTIFIER = 'U:D8yIYvW6EeGKyklcM7Co1A')
                OR profile_run_key =
                      (SELECT MAX (profile_run_key)
                         FROM idp_weighted_avg
                        WHERE SCORECARD_IDENTIFIER = 'U:D8yIYvW6EeGKyklcM7Co1A'
                              AND profile_run_key <
                                     (SELECT MAX (profile_run_key)
                                        FROM idp_weighted_avg
                                       WHERE SCORECARD_IDENTIFIER =
                                                'U:D8yIYvW6EeGKyklcM7Co1A'))) 
```

我想知道是否可以重用（我不想创建临时表）以下子查询的结果？有什么选择吗？建议？

```
SELECT MAX (profile_run_key)
              FROM idp_weighted_avg
             WHERE SCORECARD_IDENTIFIER = 'U:D8yIYvW6EeGKyklcM7Co1A' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:39:32.000

似乎您正在为给定的`SCORECARD_IDENTIFIER`. 如果那是你真正想要的，你可以添加

*   一种`ROW_NUMBER`
*   `PARTITION BY SCORECARD_IDENTIFIER`- 重新启动每个组的行号
*   `ORDER BY profile_run_key DESC`- 将组中的键编号从高到低

**SQL 语句**

```
SELECT  *
FROM    idp_weighted_avg wa
        INNER JOIN (
          SELECT  profile_run_key
                  , rn = ROW_NUMBER() OVER (PARTITION BY SCORECARD_IDENTIFIER ORDER BY profile_run_key DESC)
          FROM    idp_weighted_avg
          WHERE   SCORECARD_IDENTIFIER = 'U:D8yIYvW6EeGKyklcM7Co1A'
        ) rn ON rn.profile_run_key = wa.profile_run_key
WHERE   rn <= 2 
```

# plugins - TeamCity 插件 UrlTrigger 不断触发

> ID：12295688
> 
> 赞同：1
> 
> 时间：2012-09-06T08:11:29.250
> 
> 标签：plugins, teamcity, teamcity-7.1

我已经设置了触发器来监听最后固定的构建工件：

```
<TEAMCITY URL>/repository/downloadAll/bt79/.lastPinned 
```

但是，触发器每 30 秒触发一次，这是默认的轮询间隔。

我在这里错过了什么吗？网址总是给我相同的文件。

更新：升级到 TeamCity 7.1 后问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:52:10.627

这个问题的答案来自 TeamCity 支持：

> 所描述行为的原因是 TeamCity 控制器返回 downloadAll 查询中请求的数据的方式。包含工件的 .zip 实际上在每个请求上都不同，并且会触发构建。要解决此问题，请尝试使用

```
<TEAMCITY URL>/guestAuth/repository/download/bt79/.lastPinned/<some artifact> if possible. 
```

这个对我有用。

# yii - yii-user-management Yumuser.php get() on a non-object yum_user_relations

> ID：12295689
> 
> 赞同：1
> 
> 时间：2012-09-06T08:11:39.437
> 
> 标签：yii

我刚刚安装了 yii-user-management 模块，但是当我尝试通过浏览器访问它时，我得到了

致命错误：在第 368 行的 ..../modules/user/models/YumUser.php 中调用非对象的成员函数 get()

```
$relations = Yii::app()->cache->get('yum_user_relations'); 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:24:05.567

yii-user-management 模块似乎需要一个[`cache`](http://www.yiiframework.com/doc/api/1.1/CApplication#cache-detail)组件才能工作。因此，在您的应用程序配置中，将缓存组件添加为

```
'cache'=>array(
    'class'=>'CDummyCache',
), 
```

在这里，我们使用[`CDummyCache`](http://www.yiiframework.com/doc/api/1.1/CDummyCache)compponent，顾名思义，它充当虚拟对象。您可以将其替换为[此处所述的任何其他缓存组件](http://www.yiiframework.com/doc/guide/1.1/en/caching.overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T01:35:35.997

谢谢@dInGd0nG。你的回答也对我有用。只是想提醒人们关注他的链接。在链接中，您将看到配置语句应添加到

```
'components'=>array(
       ......
        'cache'=>array(
            'class'=>'CDummyCache',
        ),
) 
```

# jquery - jQuery的每个函数？

> ID：12295690
> 
> 赞同：0
> 
> 时间：2012-09-06T08:11:41.317
> 
> 标签：jquery

脚本：

```
var degress = GiveDegrees();

$(function () {
    //alert(GiveDegrees());  //output: 89,91,87,90,91
});

function GiveDegrees() {
    var divs = $('p.wx-temp');
    var degrees = new Array();

    $.each(divs, function (i, j) {
        degrees.push(stringToNum($(this).text()));
    });

    return degrees;
}

function stringToNum(str) {
    return str.match(/\d+/g);
} 
```

我有这个 ：

```
$("p.wx-temp").each(degress, function (index) {
    $(this).append(degress[index], "<sup>°C</sup>");

    alert("I works");
}); 
```

但它不起作用。当我这样写时：

```
$("p.wx-temp").each(function (index) {
    $(this).append("<sup>°C</sup>");

    alert("I works");
}); 
```

有用。`.each()`函数没有重载方法`.each(data, function (index))`吗？

度数数组是包含五个 int as 的整数数组`89,91,87,90,91`。如何使用`.each`函数将数组值添加到每个`p`元素。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:30:37.203

为什么你需要带入`degress`所有`each`？它已经可用，使用闭包：

```
$("p.wx-temp").each(function(index) {
    $(this).append(degrees[index], "<sup>°C</sup>");
    alert("I works");
}); 
```

或者

```
var $elems = $("p.wx-temp");
$.each(degrees, function(i, val) {
    $elems.eq(i).append(val, '<sup>°C</sup>');
}); 
```

如果元素长度与数组长度匹配，那么循环的那个应该没有区别，但第一个可能更快（尽管使用本机数组循环会最快）。

请注意，您在两个部分中的拼写`degrees`和不同。`degress`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:34:50.150

```
var degrees = [89,91,87,90,91];
$("p.wx-temp").each( function (index) {
    $(this).append(degrees[index], "<sup>°C</sup>");

    alert("I work");
}); 
```

# php - 你如何在 FuelPHP 中使用 Twig include 语句？

> ID：12295691
> 
> 赞同：0
> 
> 时间：2012-09-06T08:11:45.010
> 
> 标签：php, twig, fuelphp

我有 FuelPHP 设置使用 Twig 作为解析器。但是包含 Twig 语句 {% include 'viewFileNameInsideSameDirectory.twig' %} 不起作用。我收到以下错误：

价值的意外令牌“名称”

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:23:47.947

我想到了。我使用的是 Twig 文档中所示的单引号，但它仅适用于双引号。

{% 包括 "viewFolder/viewFileName.twig" %}

# vim - GVim：找出guifont是否可用

> ID：12295692
> 
> 赞同：6
> 
> 时间：2012-09-06T08:11:47.593
> 
> 标签：vim, fonts

我在许多不同的机器上共享我的 vim 设置，这些机器不一定具有完全相同的配置。

现在，如果我最喜欢的字体仅在一个系统上可用，而在另一个系统上不可用，这会导致 gvim 使用后备的问题，这可能不是最佳选择。

那么：有没有办法进行多次尝试`set guifont=...`并以某种方式检查它是否成功？或者有没有办法提供一个字体列表来尝试？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T08:22:29.973

你可以给 Vim 一个字体列表：

```
set guifont=Monaco:h24,Inconsolata-gz:10 
```

Vim 会尝试第一个，然后是第二个……</p>

`:h guifont`不知道选择的数量是否有限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:40:36.873

检测/回退可能在这种情况下起作用，但是当您还想要不同的字体大小（由于不同的显示分辨率）、窗口大小、本地命令等时，事情会变得很棘手。

比开启`$HOSTNAME`或类似方案更具可扩展性的系统是检查“本地”`.[g]vimrc`并将其采购到：

```
" Put this in ~/.gvimrc:
" Source system-specific .gvimrc first.
if filereadable(expand('~/local/.gvimrc'))
    source ~/local/.gvimrc
endif 
```

这样，所有特殊设置都已本地化，不会使您的共享配置复杂化。

# c# - 将分数发布到 Facebook 应用程序

> ID：12295693
> 
> 赞同：0
> 
> 时间：2012-09-06T08:11:48.243
> 
> 标签：c#, facebook, post, facebook-c#-sdk

我一直在寻找关于向 Facebook 应用程序发布分数的答案，但我仍然无法让它工作。我正在使用的代码在这里 -

```
private const string FACEBOOK_POST_SCORE_URL = "https://graph.facebook.com/me/scores?access_token={0}";

public void PostScoreAsync(Action<FacebookResponse> response, FacebookScore score)
    {

        try
        {
            // Append the user's access token to the URL
            Uri fullUri = new Uri(string.Format(FACEBOOK_POST_SCORE_URL, AccessToken));

            string json = JsonConvert.SerializeObject(score);

            var request = (HttpWebRequest)WebRequest.Create(fullUri);
            request.Method = "POST";
            request.ContentType = "application/json; charset=utf-8";

            using (StreamWriter writer = new StreamWriter(request.GetRequestStream()))
            {
                writer.Write(json);
            }

            request.BeginGetResponse(WebRequestCallback, new FacebookResult
            {
                Request = request,
                Response = response
            });

        }
        catch (ThreadAbortException)
        {
            throw;
        }
        catch (WebException ex)
        {
            if (response != null)
                response(FacebookResponse.NetworkError);
        }
        catch (Exception ex)
        { 
            if (response != null)
                response(FacebookResponse.OtherError);
        }

    } 
```

我们正在使用 webViews 而不是 iOS / Android Facebook SDK，因为我们正在 Mono 中构建跨平台应用程序。

显然，我拥有访问令牌，并且该应用程序似乎拥有执行我想做的事情的完全权限，这是我在登录后允许的。任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:54:00.383

我最终（从一位同事那里）发现 Facebook 图形 api 不会采用 json 编码参数，所以我们对它进行了排序 -

```
string parameters = "score=" + score.Score;

var request = (HttpWebRequest)WebRequest.Create(fullUri);
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";

using (StreamWriter writer = new StreamWriter(request.GetRequestStream()))
{
    writer.Write(parameters);
} 
```

现在它工作正常 - 希望这会帮助其他人没有同样的问题。

# javascript - 将参数传递给函数

> ID：12295694
> 
> 赞同：0
> 
> 时间：2012-09-06T08:11:51.833
> 
> 标签：javascript, jquery

我看不出这段代码有什么问题，但它没有按预期工作。

```
function slide(slideIndex, slideDirection) {
    console.log(slideDirection); // outputs 'right'
    $('.slide').animate({slideDirection: '-=940'}, 400);
}    

$(function(){
    $('.prev','.slide').click(function (e) {
        e.preventDefault();

        var slideIndex = $(this).closest('.slide').index(),
            slideDirection = 'right';

    slide(slideIndex, slideDirection);
    });
}); 
```

如果我在动画方法中只使用字符串'right'，它就可以工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:14:18.740

您正在使用名为 的属性创建一个对象文字`slideDirection`，您没有使用参数的值。为此，您需要分两步分别创建一个对象：

```
var obj ={};//empty object literal
obj[slideDirection] = '-=940';//assign a new property
$('.slide').animate(obj, 400); 
```

这应该够了吧。您的 json 格式的对象看起来像这样：`{"slideDirection":"-=940"}`而*我*的（或我解释的创建的对象）看起来像这样：`{"right":"-=940"}`. 后者是你需要的，如果我没记错的话

# extjs - 在 extjs 中有条件地显示/隐藏网格中的列

> ID：12295695
> 
> 赞同：0
> 
> 时间：2012-09-06T08:11:52.390
> 
> 标签：extjs

我的应用程序中有网格，我需要有条件地显示/隐藏特定列。请帮我。

代码：

```
{
    header: 'Type',  dataIndex: 'mirror',  flex: 1, sortable: true,
    renderer: function (value, meta, record, rowIndex, colIndex, store) {
                    if(value == '')
                        return "-";
                    else
                        return value;
            }
} 
```

目前它显示`-`没有记录，但我需要删除列以防找不到记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:33:41.330

列有一个`hide`可以使用的方法。例如，看一下[这个示例](http://jsfiddle.net/tdwjN/)，它向您展示如何在运行时隐藏特定列。

如果要`hide/show`根据条件创建列，则必须评估该条件并使用`hide`&`show`方法。

# python - 金字塔遍历是我的头

> ID：12295699
> 
> 赞同：5
> 
> 时间：2012-09-06T08:12:10.527
> 
> 标签：python, pyramid, traversal

我试图通过这个非常简单的示例来了解金字塔遍历。我还没有完全掌握的是`Article`从数据库中“注入”一个对象的位置。

照原样，`/Article`正确地找到并渲染了，`article_view`但那是相当没用的。如何/何时/在哪里使用 URL 的下一部分从数据库中查询特定文章？例如。`/Article/5048230b2485d614ecec341d`.

任何线索都会很棒！

**初始化**.py

```
from pyramid.config import Configurator
from pyramid.events import subscriber
from pyramid.events import NewRequest
import pymongo

from otk.resources import Root

def main(global_config, **settings):
    """ This function returns a WSGI application.
    """
    config = Configurator(settings=settings, root_factory=Root)
    config.add_static_view('static', 'otk:static')
    # MongoDB
    def add_mongo_db(event):
        settings = event.request.registry.settings
        url = settings['mongodb.url']
        db_name = settings['mongodb.db_name']
        db = settings['mongodb_conn'][db_name]
        event.request.db = db
    db_uri = settings['mongodb.url']
    MongoDB = pymongo.Connection
    if 'pyramid_debugtoolbar' in set(settings.values()):
        class MongoDB(pymongo.Connection):
            def __html__(self):
                return 'MongoDB: <b>{}></b>'.format(self)
    conn = MongoDB(db_uri)
    config.registry.settings['mongodb_conn'] = conn
    config.add_subscriber(add_mongo_db, NewRequest)
    config.include('pyramid_jinja2')
    config.include('pyramid_debugtoolbar')
    config.scan('otk')
    return config.make_wsgi_app() 
```

资源.py

```
class Root(object):
    __name__ = None
    __parent__ = None

    def __init__(self, request):
        self.request = request

    def __getitem__(self, key):
        if key == 'Article':
            return Article(self.request)
        else:
            raise KeyError

class Article:
    __name__ = ''
    __parent__ = Root

    def __init__(self, request):
        self.reqeust = request

    # so I guess in here I need to update the Article with
    # with the document I get from the db.  How?

    def __getitem__(self, key):
        raise KeyError 
```

视图.py

```
from pyramid.view import view_config
from otk.resources import *
from pyramid.response import Response

@view_config(context=Root, renderer='templates/index.jinja2')
def index(request):
    return {'project':'OTK'}

@view_config(context=Article, renderer='templates/view/article.jinja2')
def article_view(context, request):
    # I end up with an instance of Article here as the context.. but 
    # at the moment, the Article is empty
    return {} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T08:40:44.300

您通常会从 URL 遍历的*id*部分返回一个`Article`对象。

 *遍历发生的情况是，对于 URL 路径中的每个元素，都会查找一个对象并将新的当前对象作为*下一个*路径元素查找的对象。

因此，对于`Article`，根对象被要求提供与该名称匹配的内容，并且该查找的*结果*成为新的“当前”对象，`5048230b2485d614ecec341d`然后在该新对象上进行查找。

因此，您正在寻找的是一个调度程序对象，它根据您传递的较长 id 查找文章，并*返回*您的`Article`实例：

```
class Root(object):
    __name__ = None
    __parent__ = None

    def __init__(self, request):
        self.request = request

    def __getitem__(self, key):
        if key == 'articles':
            dispatch =  ArticleDispatcher(self.request)
            dispatch.__name__ = key
            dispatch.__parent__ = self
            return dispatch
        raise KeyError(key)

class ArticleDispatcher(object):
    __name__ = None
    __parent__ = None

    def __init__(self, request):
        self.request = request

    def __getitem__(self, key):
        # Get a hold of the database here:
        db = findDatabase(self.request)
        if db.exists(key):          
            data = db.load(key)
            art = Article(data)
            art.__name__ = key
            art.__parent__ = self
            return art
        raise KeyError(key)

class Article:
    __name__ = None
    __parent__ = None

    def __init__(self, data):
        self.data = data 
```

`ArticleDispatcher`注意当你使用URL 路径时我​​是如何返回的`/articles`，以及我是如何设置`__name__`和`__parent__`变量的；您需要那些能够为这些实例生成 URL。

现在返回的`Article`对象包含实际的文章数据，并且视图可以在渲染时访问该信息。

你真的很想去学习[Pyramid Traversal 教程](http://docs.pylonsproject.org/projects/pyramid/en/latest/tutorials/wiki/index.html)，它更详细地解释了这一切。*

# php - 完全加载后显示图像

> ID：12295700
> 
> 赞同：5
> 
> 时间：2012-09-06T08:12:13.137
> 
> 标签：php, jquery, html

我想在浏览器中完全加载或下载图像后加载图像。我不想在下载图像时显示图像。相反，我想显示该图像的较低质量版本，直到在后台加载高质量图像，并且当图像在后台完全加载时，我想用该图像替换较低质量的图像。

我有两张图片，说

```
$LQimage = "LQabc.jpg";

$HQimg = "HQabc.jpg"; 
```

我怎样才能让它工作？

**编辑** 使用@codebox 发布的答案，此代码有效.. 谢谢:)

```
<html>
<head>
<script type="text/javascript">
function load(){
    var img = new Image();
    var imgUrl = 'HQabc.jpg';
    img.onload = function(){
        // this gets run once the image has finished downloading
        document.getElementById('pp').src = imgUrl;
    }
    img.src = imgUrl; // this causes the image to get downloaded in the background
}
</script>
</head>
<body onload="load()">
    <img id="pp" src="LQabc.jpg" width=600/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:14:43.463

这应该这样做：

```
function preLoadImage(){
    var img = new Image();
    var imgUrl = 'HQabc.jpg';
    img.onload = function(){
        // this gets run once the image has finished downloading
        document.getElementById('idOfImgElement').src = imgUrl;
    }
    img.src = imgUrl; // this causes the image to get downloaded in the background
} 
```

如果您在页面加载后运行此函数，它应该可以工作：

```
<body onload="preLoadImage()"> 
```

# php - 是否可以在没有 OAuth 的情况下发送 Twitter DM？

> ID：12295706
> 
> 赞同：1
> 
> 时间：2012-09-06T08:12:40.410
> 
> 标签：php, twitter

我正在审查许多用于向 Twitter 帐户发送消息的脚本。

我认为您只需要您的帐户身份验证（在标题中发布）就可以向任何用户发送 DM。你现在有可能做不到吗？

我只是在寻找 oAuth 的例子，但我不需要。

我想要的是每次有人关注我时发送一个 DM，但是对于所有 oAuth 示例和脚本，他们使用 Twitter 应用程序，因此其他用户“连接他们的帐户”到我的应用程序，但我不希望那样......那就是用于网站，类似于“与 Facebook 联系”。

我只需要将 DM 发送给一些用户。我怎样才能避免他们“连接到我的应用程序”？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:22:28.977

您需要创建一个 API 密钥（一个应用程序，如果您愿意），然后从*您自己的帐户*授予对该应用程序的访问权限。然后就可以使用您的应用收到的身份验证令牌以您[自己的身份向他人发送消息。](https://dev.twitter.com/docs/api/post-direct_messagesnew)

DM 的接收者根本不需要与您的应用程序交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:17:23.323

如果您只是想 DM 他们被关注，请查看 ITTT.com 的功能。

它将为您自动执行此过程。

它是免费的

# java - 来自Java，学习C++——理解函数指针

> ID：12295709
> 
> 赞同：2
> 
> 时间：2012-09-06T08:12:47.320
> 
> 标签：java, c++, function, pointers, reference

我已经阅读了针对想要学习 C++ 的 Java 开发人员的快速教程。它只解释了 C++ 的基本原理（和语法）（我猜）。起初我以为我已经完全理解了一切，但是在编写 C++ 时出现了一些对我来说并不是很清楚的东西。

和...有什么区别

```
ExampleClass* doSomething(ExampleClass* ec) {} 
```

和

```
ExampleClass* doSomething(ExampleClass& ec) {} 
```

和

```
ExampleClass& doSomething(ExampleClass* ec) {} 
```

和

```
ExampleClass& doSomething(ExampleClass& ec) {} 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:21:33.150

指针和引用有相似之处。它们都指向或引用一个对象，而没有空间来表示对象本身的值。然而，指针显式地使用`*`to 取消引用（作为一元运算符），并`&`获取对象的地址。`*`也用于不同的上下文中，以指定指针类型。

该引用是一个更安全的“自动”指针。然而，引用是不可变的，因为它以后不能更改为指向其他东西。引用也使用该`&`符号，但在不同的上下文中。它不是一元运算符，而是用于指定引用类型。

第一个示例采用指向 ExampleClass 的指针并返回指向 ExampleClass 对象的指针。例如。你可能会说：

```
ExampleClass* doSomething(ExampleClass* ec) {
  return ec;
}
ExampleClass * pointer = new ExampleClass();
ExampleClass * anotherpointer = doSomething(pointer); 
```

相比之下，以下内容改为引用 ExampleClass。引用就像一个指针，但这意味着你不传递指针类型的东西，只是直接传递它，例如：

```
ExampleClass* doSomething(ExampleClass& ec) {
  return &ec; // & unary operator - get the address of ec
}

ExampleClass obj = ExampleClass();
ExampleClass* pointer = doSomething(obj); // it will automatically get a reference to the input object 
```

下一个示例接受一个指针并返回一个引用（注意返回类型不是指针）：

```
ExampleClass& doSomething(ExampleClass* ec) {
  // note ec of is type ExampleClass*
  // *ec is of type ExampleClass
  return *ec; // returns a reference to whatever the pointer points to
}
ExampleClass * pointer = new ExampleClass();
ExampleClass& myobj = doSomething(pointer); 
```

你只需将它传递给一个引用对象（它指向函数给出的对象，即不复制）。请注意，在这种情况下，函数应该注意确保为对象分配了空间，并且不需要在 return 语句中显式引用（使用 *）该对象。

我想你可以算出最后一个例子：

```
ExampleClass& doSomething(ExampleClass& ec) {} 
```

请注意，在返回引用时，您必须确保被引用的对象在函数上下文之外分配了空间（例如，作为全局变量或静态局部变量），以便它不会被破坏。

您不应返回对局部变量的引用，该引用将在函数退出时被销毁，例如：

```
ExampleClass& doSomething(ExampleClass* ec) {
  ExampleClass copy = *ec;
  return copy; // WARNING: returning reference to object that will be destroyed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:20:08.100

```
ExampleClass* doSomething(ExampleClass* ec) {} 
```

将指针作为参数，返回一个指针。

```
ExampleClass* doSomething(ExampleClass& ec) {} 
```

通过引用获取一个对象并返回一个指针。

```
ExampleClass& doSomething(ExampleClass* ec) {} 
```

将指针作为参数并返回引用。

```
ExampleClass& doSomething(ExampleClass& ec) {} 
```

通过引用获取一个对象并返回一个引用。

请注意，通过引用返回很棘手，因为它很容易导致未定义的行为。通过引用返回本地对象是非法的：

```
ExampleClass& doSomething() 
{
    ExampleClass x;
    return x;
} 
```

这将编译（您可能会收到警告）但`x`在函数结束后被销毁，因此您将留下无效的引用。为了使其有效，`x`需要在函数结束后仍然存在（如果它是类成员，直到对象本身被销毁，或者它可以是`static`本地的，或动态分配的）。

指针也会发生同样的情况，尽管它不太常见：

```
ExampleClass* doSomething() 
{
    ExampleClass x;
    return &x;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:33:22.827

在 C++ 中传递指向对象的指针和通过引用传递对象之间没有真正的区别。然而，通过引用传递允许更简单的运算符重载语法，并消除了对大量 -> 无处不在的需要，应该是首选。

通过引用传递对象时，不希望方法能够更改对象是很常见的。这是通过将对象参数声明为 const 引用 (const myClass&) 来实现的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:21:16.130

```
ExampleClass* doSomething(ExampleClass* ec) {} 
```

函数做一些事情来获取值和返回值

```
ExampleClass* doSomething(ExampleClass& ec) {} 
```

函数做一些事情，在内存中获取对象地址并返回值

```
ExampleClass& doSomething(ExampleClass* ec) {} 
```

函数做一些事情来获取价值并返回内存中对象的地址

```
ExampleClass& doSomething(ExampleClass& ec) {} 
```

函数做一些事情，获取并返回内存中对象的对象地址

# java - 在每个第 n 个位置拆分一个字符串

> ID：12295711
> 
> 赞同：30
> 
> 时间：2012-09-06T08:12:52.593
> 
> 标签：java, regex, string, split

我使用这个正则表达式在每个说第三个位置分割一个字符串：

```
String []thisCombo2 = thisCombo.split("(?<=\\G...)"); 
```

其中 G 后面的 3 个点表示每第 n 个要拆分的位置。在这种情况下，3 个点表示每 3 个位置。一个例子：

```
Input: String st = "123124125134135145234235245"
Output: 123 124 125 134 135 145 234 235 245. 
```

我的问题是，我如何让用户控制字符串必须拆分的位置数？换句话说，我如何让这 3 个点，n 个点由用户控制？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-06T09:41:38.940

为了大幅提高性能，另一种方法是`substring()`在循环中使用：

```
public String[] splitStringEvery(String s, int interval) {
    int arrayLength = (int) Math.ceil(((s.length() / (double)interval)));
    String[] result = new String[arrayLength];

    int j = 0;
    int lastIndex = result.length - 1;
    for (int i = 0; i < lastIndex; i++) {
        result[i] = s.substring(j, j + interval);
        j += interval;
    } //Add the last bit
    result[lastIndex] = s.substring(j);

    return result;
} 
```

例子：

```
Input:  String st = "1231241251341351452342352456"
Output: 123 124 125 134 135 145 234 235 245 6. 
```

它不像[stevevls 的解决方案](https://stackoverflow.com/a/12295805/1380710)那么短，但它的**效率更高**（见下文），我认为将来调整起来会更容易，当然这取决于你的情况。

* * *

## 性能测试 (Java 7u45)

**2,000 个**字符长的字符串 - 间隔为**3**。

`split("(?<=\\G.{" + count + "})")`性能（以毫秒为单位）：

```
7, 7, 5, 5, 4, 3, 3, 2, 2, 2 
```

`splitStringEvery()`( `substring()`) 性能（以毫秒为单位）：

```
2, 0, 0, 0, 0, 1, 0, 1, 0, 0 
```

* * *

**2,000,000**个字符长的字符串 - 间隔为**3**。

`split()`性能（以毫秒为单位）：

```
207, 95, 376, 87, 97, 83, 83, 82, 81, 83 
```

`splitStringEvery()`性能（以毫秒为单位）：

```
44, 20, 13, 24, 13, 26, 12, 38, 12, 13 
```

* * *

**2,000,000**个字符长的字符串 - 间隔为**30**。

`split()`性能（以毫秒为单位）：

```
103, 61, 41, 55, 43, 44, 49, 47, 47, 45 
```

`splitStringEvery()`性能（以毫秒为单位）：

```
7, 7, 2, 5, 1, 3, 4, 4, 2, 1 
```

* * *

**结论：**

该`splitStringEvery()`方法要**快得多**（即使[在 Java 7u6 中的更改之后](http://java-performance.info/changes-to-string-java-1-7-0_06/)），并且*当间隔变高时它会升级*。

**即用型测试代码：**

[pastebin.com/QMPgLbG9](http://pastebin.com/QMPgLbG9)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-06T08:18:13.600

您可以使用大括号运算符指定字符必须出现的次数：

```
String []thisCombo2 = thisCombo.split("(?<=\\G.{" + count + "})"); 
```

大括号是一个方便的工具，因为您可以使用它来指定确切的计数或范围。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-09-06T08:17:28.673

使用[Google Guava](http://code.google.com/p/guava-libraries/)，您可以使用[Splitter.fixedLength()](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html#fixedLength%28int%29)

> 返回一个拆分器，将字符串分成给定长度的片段

```
Splitter.fixedLength(2).split("abcde");
// returns an iterable containing ["ab", "cd", "e"]. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:17:57.203

如果要构建该正则表达式字符串，可以将拆分长度设置为参数。

```
public String getRegex(int splitLength)
{
    StringBuilder builder = new StringBuilder();
    for (int i = 0; i < splitLength; i++)
        builder.append(".");

    return "(?<=\\G" + builder.toString() +")";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-07T14:38:07.807

```
private String[] StringSpliter(String OriginalString) {
    String newString = "";
    for (String s: OriginalString.split("(?<=\\G.{"nth position"})")) { 
        if(s.length()<3)
            newString += s +"/";
        else
            newString += StringSpliter(s) ;
    }
    return newString.split("/");
} 
```

# jquery - jQuery根据条件触发事件？

> ID：12295717
> 
> 赞同：1
> 
> 时间：2012-09-06T08:13:10.490
> 
> 标签：jquery, ajax, events, ajaxcontroltoolkit

我有这个`TextBox txtCustomerName`，它与一个相关联，`Ajax AutoCompleteExtender`我正在做的是在`OnClientItemSelected`这个`AutoCompleteExtender`调用一个函数`LoadCutomerDetails`。`jQuery`像这样的东西。。

```
<asp:TextBox ID="txtCustomerName" runat="server" ClientIDMode="Static"></asp:TextBox>
<ajax:AutoCompleteExtender runat="server" ID="autoComplete1" TargetControlID="txtCustomerName"
ServicePath="~/AutoComplete.asmx" ServiceMethod="GetCompletionList" MinimumPrefixLength="1" CompletionInterval="10" CompletionSetCount="15" OnClientItemSelected="PopulateData"> 
```

和填充数据定义为

```
 function PopulateData() {
        var data2 = $('#txtCustomerName').val().split('-')[0];
        var newData = data2.substring(0, data2.length - 1);

        $.ajax({
            url: '/AutoComplete.asmx/GetPriorityAndRemarks',
            type: 'POST',
            timeout: 5000,
            datatype: 'xml',
            cache: false,
            data: 'arg=' + newData,
            success: function (response) {
                var doc = response;
                var result = $(doc).find("string").text();
                // the values is in form of name, address, mobile, priority and remark
                var resultAry = result.split(':');
                $('#lbCustomerName').val(resultAry[0]);
                $('#lblAddress').text(resultAry[1]);
            }
        });
    }; 
```

现在，我想做的是在事件上关联一个事件处理程序`focusout`并检查`jQuery`是否有任何价值，如果没有，那么这是一个新客户，所以打开一个可以添加详细信息的弹出对话框，依此类推..`lbCustomerName``lblAddress`

**问题是**

1.  focusout 事件在可以填充数据*之前*`lbCustomerName`触发，并且`lblAddress`（通过该填充数据），因此即使有数据，它也将始终为空。（我通过显示警报检查了焦点事件，并且在更新标签文本*之前*显示了警报。）

2.  用户也可以在文本框中*输入*，而不仅仅是从`AutoCompleteExtender`列表中选择一个项目，对吧？因此，在这种情况下，`PopulalteData`不会调用，但会调用 focusout。

我想做的是，*仅*在用户*输入*框中（即未触发）时调用该`focusout`事件，因为如果他没有从列表中选择，它显然是一个新客户。那么有没有办法做到这一点？或者，如果不完全是这样，那么还有其他方法可以完成我正在尝试的事情吗？**`OnClientItemSelected`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:52:20.710

夫妻心得：

1）你真的可以假设如果用户没有从列表中选择他们不在列表中吗？例如，如果用户的名字是 Tom，他们只是快速输入，而不使用自动建议。

2）你可以通过focusout事件调用PopulateDate而不是使用OnClientItemSelected，然后如果名称/地址不在`resultAry`ajax成功回调中，则弹出对话框？**

# vb.net - 通过输入 Landmark 获取邮政编码

> ID：12295718
> 
> 赞同：0
> 
> 时间：2012-09-06T08:13:12.423
> 
> 标签：vb.net

我有一个文本框，用户将在其中输入一个地标，我必须检索该地标的邮政编码。我不知道如何完成这项任务。我需要一些帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:36:24.717

谷歌是你最好的选择。在 Google Map API 上使用反向地理编码（地址查找）来检索邮政编码

> > 术语地理编码通常是指将人类可读的地址翻译成地图上的位置。进行相反的过程，将地图上的位置转换为人类可读的地址，称为反向地理编码。
> 
> Geocoding API 支持直接使用 latlng 参数进行反向地理编码。例如，以下查询包含布鲁克林某个位置的纬度/经度值：
> 
> [http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true_or_false](http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true_or_false)
> 
> 此查询返回以下结果：

```
{
  "status": "OK",
  "results": [ {
    "types": street_address,
    "formatted_address": "275-291 Bedford Ave, Brooklyn, NY 11211, USA",
    "address_components": [ {
      "long_name": "275-291",
      "short_name": "275-291",
      "types": street_number
    }, {
      "long_name": "Bedford Ave",
      "short_name": "Bedford Ave",
      "types": route
    }, {
      "long_name": "New York",
      "short_name": "New York",
      "types": [ "locality", "political" ]
    }, {
      "long_name": "Brooklyn",
      "short_name": "Brooklyn",
      "types": [ "administrative_area_level_3", "political" ]
    }, {
      "long_name": "Kings",
      "short_name": "Kings",
      "types": [ "administrative_area_level_2", "political" ]
    }, {
      "long_name": "New York",
      "short_name": "NY",
      "types": [ "administrative_area_level_1", "political" ]
    }, {
      "long_name": "United States",
      "short_name": "US",
      "types": [ "country", "political" ]
    }, {
      "long_name": "11211",
      "short_name": "11211",
      "types": postal_code
    } ], 
```

阅读更多：[**https ://developers.google.com/maps/documentation/geocoding/#Types**](https://developers.google.com/maps/documentation/geocoding/#Types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:21:57.260

您是否可以使用 Google Maps API？我知道您可以搜索地标名称并返回坐标，但我不确定您是否可以查找坐标以检索邮政编码？

# openssl - 调用 SSL_connect 时发生 SSL_ERROR__SSL

> ID：12295722
> 
> 赞同：0
> 
> 时间：2012-09-06T08:13:28.587
> 
> 标签：openssl

我用openssl写了代码来连接tls下的服务器。如果我从 pem 文件加载证书，它可以正常工作。但是，如果我从 pfx 文件加载证书，则会在调用 SSL_connect 时发生 SSL_ERROR_SSL。我不知道加载pfx文件的过程是否错误。过程如下。

```
FILE* fp = fopen("cert.pfx", "rb");
PKCS12* p12 = d2i_PKCS12_fp(fp, NULL);
PKCS12_parse(p12, NULL, &private_key, &certificate, &ca_certificates);
SSL_CTX_use_certificate(ctx, certificate);
SSL_CTX_use_PrivateKey(ctx, private_key);
SSL_CTX_check_private_key(ctx);
SSL_CTX_add_extra_chain_cert(ctx, sk_X509_value(ca_certificates, i);
SSL_CTX_add_client_CA(ctx, sk_X509_value(ca_certificates, i);
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER, NULL);
SSL_CTX_set_mode(ctx, SSL_MODE_AUTO_RETRY);
...
SSL* ssl = SSL_new(ssl_context);
SSL_set_fd(ssl, sockfd);
SSL_connect(ssl);
... 
```

我已经用其他客户端测试了 pfx 文件。它运作良好。所以问题不在于 pfx 文件。openssl 是否有任何选项会导致连接失败？还是我没有正确设置 CA 证书？pfx 文件包含我自己签名的 CA。但它适用于其他客户。

SSL_connect() 失败后，我调用了 ERR_get_error()。并获得证书验证失败。所以我认为上面加载pfx文件的过程有问题。也许我没有正确添加 CA 证书。谁能告诉我加载 pfx 的正确过程。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:41:00.137

我发现，使用 SSL_CTX_add_extra_chain_cert 添加证书的顺序很重要。PKCS12_parse 添加证书的顺序必须从 libssl 0.9.8 更改为 libssl1.0。这就是为什么我使用下面的代码将它们添加到证书存储区的原因。

```
X509_STORE * certStore = SSL_CTX_get_cert_store(ctx);
for(int i = 0; i < sk_X509_num(ca) ; i++)
{
    if (X509_STORE_add_cert(certStore, sk_X509_value(ca_certificates, i))==0)
    {
        ERR_print_errors_fp (stderr);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:01:49.827

您的`i`变量是 size 的计数器`sk_num(ca_certificates)`吗？如果是，请尝试删除`SSL_CTX_add_client_CA`我认为不适合客户的行（不确定，很难）。

此外，在您的错误处理中，请输入以下几行以找出原因：

```
SSL_load_error_strings(); // just once
char msg[1024];
ERR_error_string_n(ERR_get_error(), err_msg, sizeof(err_msg));
printf("%s\n", msg);` 
```

或者，您也可以尝试直接获取 SSL 错误：

```
int ssl_error = SSL_get_verify_result(ssl); 
```

可以在此[页面中检查生成的 int](http://www.openssl.org/docs/apps/verify.html)

# javascript - javascript - Object.create 解释

> ID：12295729
> 
> 赞同：1
> 
> 时间：2012-09-06T08:13:54.823
> 
> 标签：javascript, object-create

我对以下规范的 object.create 方法有疑问：

```
Object.create = function(o, props) {
    function F() {}
    F.prototype = o;

    if (typeof(props) === "object") {
     for (prop in props) {
      if (props.hasOwnProperty((prop))) {
       F[prop] = props[prop];
      }
     }
    }
    return new F();
   }; 
```

在上述代码的第 3 行，我们将 F 对象的原型属性设置为 o 参数的原型。

我会认为这意味着 o 和 F 都指向同一个原型，因此指向同一个成员集。

但是代码随后会在 props 循环中复制 prop 中的所有成员。

如果我们手动复制所有成员，那么在第 3 行设置原型有什么意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:46:16.390

您提供的代码**不**等同于`Object.create()`ECMA 标准定义的代码。第二个参数的成员，这里称为`prop`，应该是要在结果对象上定义的一组描述符，而不是复制到构造函数。这更准确（但也不完全正确），

```
Object.create = function(o, props) { 
    function F() {} 
    F.prototype = o; 
    var result = new F();
    if (typeof(props) === "object") 
       for (prop in props)
          if (props.hasOwnProperty(prop) && typeof(props[prop].value) != "undefined")
             result[prop] = props[prop].value; 
    return result;
}; 
```

该`props`参数包含您希望与原型中指定的新对象不同的成员的属性描述符`o`。这些值不应该按字面意思复制到对象中，而是应该像调用 一样进行处理，上面通过将描述符的一部分`Object.defineProperties()`分配给新对象来模拟。不能准确地填充到 ECMA 3 中，因为它可以用于指定具有访问器函数的属性，尽管上述方法适用于使用而不是or的情况。`value``Object.create()``props``value``get``set`

如果您对 polyfill 版本不感兴趣，以下是对功能的准确描述`Object.create()`，假设同时存在`__proto__`和`Object.defineProperties()`。

```
Object.create = function (o, props) {
    if (typeof(o) !== "object" && o != null) throw new TypeError();
    var result = new Object();
    if (o != null)
        result.__proto__ = o;
    if (typeof(props) !== "undefined")
        Object.defineProperties(result, props);
    return result;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:48:47.023

您的问题的版本有一个错误`Object.create`：循环将属性附加到构造函数`F`（而不是返回的对象或其原​​型），这意味着它们在创建的对象中不可访问。

第二个参数 to 的属性`Object.create`应该被复制到新创建的对象中。[Mozilla`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create#Parameters)的文档是这样写的：

> 如果指定且未定义，则其可枚举自身属性的对象（即，在其自身上定义的那些属性，而不是沿其原型链的可枚举属性）指定要添加到新创建的对象的属性描述符，以及相应的属性名称。

尝试使用问题中的版本运行以下代码`Object.create`：

```
o = Object.create(
        {a: "prototype's a", b: "prototype's b"},
        {a: "object's a"}
    ); 
```

你会发现`o.a == "prototype's a"`and丢失了。`o.b == "prototype's b"``"object's a"`

该函数的以下版本可能会更有用：

```
Object.create = function(o, props) {
    var newObj;

    // Create a constructor function, using o as the prototype
    function F() {}
    F.prototype = o;

    // Create a new object using F as the constructor function
    newObj = new F();

    // Attach the properties of props to the new object
    if (typeof(props) === "object") {
        for (prop in props) {
            if (props.hasOwnProperty((prop))) {
                newObj[prop] = props[prop];
            }
        }
    }

    return newObj;
}; 
```

让我们用同样的例子来试试：

```
o = Object.create(
        {a: "prototype's a", b: "prototype's b"},
        {a: "object's a"}
    ); 
```

新对象`o`是使用具有属性和它自己的属性的原型`a`创建`b`的`a`。

我们`o.b`先来看：`o.hasOwnProperty("b")`会返回`false`，因为`o`没有一个属性叫`b`. 这就是原型的用武之地；因为没有属性`b`，所以在原型上查找它，因此`o.b === "prototype's b"`.

另一方面，`o.hasOwnProperty("a")`将返回`true`，因为`o`确实有一个`a`属性。 `o.a == "object's a"`并且没有从原型中查找任何内容。

[正如@chuckj 的回答](https://stackoverflow.com/a/12296251/5168)所指出的，正确的实现`Object.create`比这更复杂。有关更多详细信息，请参阅[John Resig 关于 ECMAScript 5 对象和属性的帖子](http://ejohn.org/blog/ecmascript-5-objects-and-properties/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:18:11.743

可以将`F`其视为一个函数，该函数返回对象的新实例以及`F.prototype`对新实例从中借用属性的对象的引用。

使用创建的实例`F`具有自己的属性集，独立于`F.prototype`.

当一个属性无法在 incance 中找到`F`时，运行时将加强原型链并查看该属性是否存在于`F.prototype`.

这就是为什么您要复制一些并继承其他的原因。

Prototype 的重点是提供类类代码重用/属性存储。

将其视为对象`F.prototype`的类实例`F`。

# android - 在android中打开alertdialog时应用程序崩溃

> ID：12295731
> 
> 赞同：0
> 
> 时间：2012-09-06T08:13:59.810
> 
> 标签：android, android-layout

我查看了有关如何使用 xml 布局实现 alertdialog 的 android 文档

[这是文档](http://developer.android.com/guide/topics/ui/dialogs.html)

当我运行程序并单击待办事项按钮时，程序崩溃了谁能帮忙？

这是我的源代码：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class StartMoving extends Activity implements OnClickListener {

    Button todo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.start_moving);

        todo = (Button) findViewById(R.id.bTodo);

        todo.setOnClickListener(this);

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.bTodo:
            AlertDialog.Builder builder;
            AlertDialog alertDialog;

            Context mContext = getApplicationContext();
            LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
            View layout = inflater.inflate(R.layout.to_do_list, null);

            builder = new AlertDialog.Builder(mContext);
            builder.setView(layout);
            alertDialog = builder.create();
            alertDialog.show();
            break;

        default:
            break;
        }
    }

} 
```

这是名为 to_do_list.xml 的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="100" >

    <ScrollView
        android:id="@+id/svTips"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="87" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/tvTipsTitle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="10dp"
                android:text="@string/tips"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <TextView
                android:id="@+id/tvtmb"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/two_months_before"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvtmbSAP"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/tmb_sort_and_purge"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvtmb_sap_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/tmb_sap_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvtmbR"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/tmb_research"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvtmb_r_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/tmb_r_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvtmbCAMB"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/tmb_create_a_moving_builder"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvtmb_camb_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/tmb_camb_content" />

            <TextView
                android:id="@+id/tvswb"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/six_weeks_before"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvswb_ordersupplies"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/swb_order_supplies"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvswb_os_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/swb_os_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvswb_use_it_or_lose_it"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/swb_use_it_or_lose_it"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvswb_uioli_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/swb_uioli_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvswb_take_measurement"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/swb_take_measurement"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvswb_tm_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/swb_tm_content" />

            <TextView
                android:id="@+id/tvomb"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/one_month_before"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvomb_choose_your_mover_and_confirm_the_arragements"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/omb_choose_your_mover_and_confirm_the_arragements"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvomb_cymacta_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/omb_cymacta_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvomb_begin_packing"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/omb_begin_paking"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvomb_bp_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/omb_bp_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvomb_label"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/omb_label"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvomb_l_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/omb_l_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvomb_separate_values"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/omb_separate_values"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvomb_sv_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/omb_sv_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvomb_do_a_change_of_address"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/omb_do_a_change_of_address"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvomb_dacoa_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/omb_dacoa_content" />

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <TextView
                    android:id="@+id/tvomb_notify_important_parties"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="@string/omb_notify_all_important_parties"
                    android:textStyle="bold" />
            </LinearLayout>

            <TextView
                android:id="@+id/tvomb_naip_content"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:text="@string/omb_naip_content" />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="13"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bReturntoTop"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:text="Go back to top" />

        <Button
            android:id="@+id/bgoto"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:text="Go to" />
    </LinearLayout>

</LinearLayout> 
```

这就是 logcat 显示的内容

![在此处输入图像描述](../Images/17dedf0a88af2f2017b13538d44c38dc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:16:02.717

利用

```
Context mContext = v.getApplicationContext(); 
```

代替

```
Context mContext = getApplicationContext(); 
```

或者

```
builder = new AlertDialog.Builder(StartMoving.this); 
```

**编辑：** 你正在阅读按钮

```
todo = (Button) findViewById(R.id.bgoto); <-----------
                                  ^^^^^
todo.setOnClickListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:00:53.337

如果您在 TabHost 中使用 alertDialog 那么您必须编写..

```
final AlertDialog alertDialog = new AlertDialog.Builder(**getParent()**).create();
                    //alertDialog.setTitle("Alert....");
                    alertDialog.setMessage("Your Text");
                    alertDialog.setButton("OK", new DialogInterface.OnClickListener() 
                    {

                        public void onClick(DialogInterface arg0, int arg1) 
                        {
                            finish();
                        }

                    });
                    alertDialog.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:36:53.770

```
AlertDialog.Builder diag = new AlertDialog.Builder(this);

diag.setTitle("DIALOG TITLE")

.setMessage("YOUR MESSAGE")

.setCancelable(false)

.setNegativeButton("WHAT EVER THE BUTTON TEXT",
  new DialogInterface.OnClickListener() {

public void onClick(DialogInterface dialog, int id) {

//enter code here

//do what ever the button in the dialog is clicked 

dialog.cancel();
                            }
                        });
        diag.show(); 
```

最简单的方法有一个警报对话框

并且不要忘记将 java 中的 Button id 更改为 R.id.goto

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:07:07.837

似乎我一直在从上下文中读取按钮，而不是从 alertDialog 中读取。解决方案是创建一个视图，该视图将设置为 AlertDialog 的视图，并声明一个按钮并将其设置为视图的子视图。

```
final View view;
LayoutInflater inf = LayoutInflater.from(StartMoving.this);
view = inf.inflate(R.layout.rename, null);
final EditText newname = (EditText) view.findViewById(R.id.etNewRoomName);
final Button todo = (BUtton) view.findViewById(R.id.bTodo);

new AlertDialog.Builder(StartMoving.this)
.setView(view)
.setTitle("Rename")
.setMessage("Enter new name for room " + currentRoom)
.show(); 
```

# html - 使用 CHTML 从 Webmatrix 中的表填充组合框

> ID：12295732
> 
> 赞同：0
> 
> 时间：2012-09-06T08:13:59.957
> 
> 标签：html, combobox, webmatrix

我是新手，正在使用 Webmatrix (CHTML) 尝试设置一个表单，允许用户使用下拉框选择员工。我想我知道如何列出清单：

```
@{
var db = Database.Open("DatabaseName") ;
var selectCommand="SELECT ID,Employee FROM Employees";
var selectedData = db.Query(selectCommand);
var columns = new[]{"ID", "Employee"};
var grid = new WebGrid(source: selectedData, defaultSort: "Employee" , rowsPerPage:10,columnNames: columns);  
}
@grid.GetHtml(  ) 
```

我想我知道如何获得一个组合框：

```
<FORM NAME="myform">
<SELECT NAME="mylist">
<OPTION VALUE="01">Employee01
<OPTION VALUE="02">Employee02
<OPTION VALUE="03">Employee03
<OPTION VALUE="04">Employee04
<OPTION VALUE="05">Employee05 - and so on
</SELECT>
</FORM> 
```

我只想知道如何将表格放入组合框中。如果有人可以展示如何做到这一点，将非常高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:07:30.747

此代码根据您的表格内容创建一个下拉列表：

```
@{   
    var db = Database.Open("DatabaseName");
    var selectCommand = "SELECT ID, Employee FROM Employees";
    var selectedData = db.Query(selectCommand); 
} 

<form name="myform" method="post">
    <select name="mylist">
        @foreach(var row in selectedData)
        {
            <option value="@row.ID">@row.Employee</option>
        }
    </select>
</form> 
```

# jquery - Jquery 滑出框

> ID：12295733
> 
> 赞同：0
> 
> 时间：2012-09-06T08:14:04.027
> 
> 标签：jquery, jquery-animate, slidetoggle

我的页面中的脚本有问题。

这是我的情况

[http://tommywebdesigner.com/Home%20Page%20copy.html](http://tommywebdesigner.com/Home%20Page%20copy.html)

如果您单击*productos*链接，则 div 框会从顶部落下。我的想法是，如果我再次单击*productos*链接，则 div 会返回。我非常接近实现它，但在我的情况下，你可以看到我的 div 回去然后又掉下来了。

这是我可能做错了什么的脚本：

```
<script type="text/javascript">
        $(function() {
            $('#productos_link').click(function(){
                $('#overlay').fadeIn('fast',function(){
                    $('#productos').animate({'top':'110px'},500);
                });
            });
            $('#productos_link').click(function(){
                $('#productos').animate({'top':'-400px'},500,function(){
                    $('#overlay').fadeOut('fast');
                });
            });

        });

</script> 
```

错误在哪里？，当我第二次单击productos 链接时，我需要如何更改脚本以使我的幻灯片框返回并且不会再次掉落？

在这里你可以找到我用过的教程

[http://tympanus.net/codrops/2009/12/03/css-and-jquery-tutorial-overlay-with-slide-out-box/](http://tympanus.net/codrops/2009/12/03/css-and-jquery-tutorial-overlay-with-slide-out-box/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:17:37.350

您需要设置一个“切换”或“状态”变量，以便您可以检查它是否已经可见。

像这样的东西可能会起作用（我还没有测试过）

```
<script type="text/javascript">
    $('#productos_link').each(function(){
        this.toggled = false;

        $(this).click(function(){
            switch(this.toggled){
                case true:
                    this.toggled = false;
                    $('#overlay').fadeIn('fast',function(){
                        $('#productos').animate({'top':'110px'},500);
                    });
                break;
                default:
                    this.toggled = true;
                    $('#productos').animate({'top':'-400px'},500,function(){
                        $('#overlay').fadeOut('fast');
                    });
                break;
            }
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:57:31.460

像这样的东西可能会起作用：

```
<script type="text/javascript">
        $(function() {
            $('#productos_link').click(function(){
                $('#overlay').not(':visible') ? function() {
                    $('#overlay').fadeIn('fast', function(){
                        $('#productos').animate({'top':'110px'}, 500);
                    });
                } : function() {
                    $('#productos').animate({'top':'-400px'}, 500, function(){
                        $('#overlay').fadeOut('fast');
                    });
                }

            });
        });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:59:07.770

我发现[了这个](http://fiddle.jshell.net/CGJmE/show/)

演示很慢，但请尝试在您的代码中

```
$(function () {
    $('#productos_link').toggle(function () {
        $('#overlay').fadeIn('fast', function () {
            $('#productos').animate({ 'top': '110px' }, 500);
        });
    }, function () {
            $('#productos').animate({ 'top': '-400px' }, 500, function () {
                $('#overlay').fadeOut('fast');
            });
    });

}); 
```

# jquery - jQuery .load() 函数缓存

> ID：12295735
> 
> 赞同：4
> 
> 时间：2012-09-06T08:14:07.570
> 
> 标签：jquery, firefox, caching

我正在尝试使用从外部服务器加载的图像构建一个 jcarousel 滑块。图像保存为 GIF，并以 ID 命名：0001.gif、0002.gif、0010.gif、0011.gif...等。我想显示前 99 张图像，但事实证明有些图像不存在。在 Firefox 中，这不是问题，因为它没有用于未加载图像的“占位符”。但对于所有其他浏览器，解决方案是隐藏或删除未加载的图像。这似乎在 Chrome 和 Safari 中运行良好，但在 Firefox 中存在缓存问题。我的问题是；我该如何避免这种情况？

```
$(document).ready(function(){
    for(var i = 0; i < 99; i++){
        // Append images 1-9 to #items
        if(i < 10){
            $('#items').append('<li class="item" id="' + i + '"><a href="http://www.fagpressen.no/id/3653?magazine=000' + i + '"><img id="' + i + '" src="http://katalogen2012.fagpressen.no/blader/forside/forside000' + i + '.gif"></a></li>');
        }
        // Append images 10 - 99 to #items
        if(i >=10 && i <= 99){
            $('#items').append('<li class="item" id="' + i + '"><a href="http://www.fagpressen.no/id/3653?magazine=00' + i + '"><img id="' + i + '" src="http://katalogen2012.fagpressen.no/blader/forside/forside00' + i + '.gif"></a></li>');
        }
    }   

    // Remove empty images
    var len = $('.item').find('img').length;
    $('.item').find('img').each(function(i){
        var img = $( this ),
            itemId = $(this).attr("id");

        img.error( function () {
            var elem = $(this);

            elem.parents('li').remove();
            if (i + 1 === len) {
                startCarousel();
            }
        }).load( function () {
            if (i + 1 === len) {
                startCarousel();
            }
        });

        if ( img.width() > 0 ) {
            img.trigger( 'load' );
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:36:03.427

您可以尝试使用 .ajax 而不是 .load，这使您可以像这样禁用缓存：

```
$.ajaxSetup ({
  cache: false
}); 
```

# string - VB：从字符串中读取“x”整数并替换它

> ID：12295739
> 
> 赞同：1
> 
> 时间：2012-09-06T08:14:22.283
> 
> 标签：string, vbscript, replace, integer

首先，我不是编程背景，对 VB 完全陌生。由于某些原因，我不得不在办公室做一个小的脚本任务。

我在这里以及其他论坛上浏览了许多帖子，但无法找到所需的信息。

好的，这就是我需要做的：

我想从字符串中找到一个整数（整数可以是 5 到 4095 之间的任何一个），然后用我选择的整数替换它。

我做了一些分析，但找不到可以从字符串中搜索“任何”整数的函数。搜索固定整数工作正常。

例如：

转换：“有 10 个苹果”——其中 10 可以是 5 到 4095 之间的任何数字，我不知道。

To：“有 5 个苹果” - 5 是我将手动给出的数字。

任何帮助表示赞赏。

谢谢你。

**编辑**

最终代码：

```
Set objFSO = CreateObject("Scripting.FileSystemObject") 
strFile = "C:\Users\inkasap\Desktop\temp\IOParams_Backup.xml" 
Set objFile = objFSO.OpenTextFile(strFile) 
Do Until objFile.AtEndOfStream strLine = objFile.ReadLine 
    Dim re, strLine 
    Set re = New RegExp 
    if InStr(strLine,"name=""BIOSCUPP") > 0 Then 
        re.Pattern = "\d+" 
        Set colMatch = re.Execute(strLine) 
        For Each objMatch In colMatch 
           strLine = Replace(strLine, objMatch.Value, "30") 
        Next end 
    if WScript.Echo strLine 
Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:32:52.890

好吧，您可以使用[正则表达式](http://msdn.microsoft.com/en-us/library/ms974570.aspx#scripting05_topic1)查找任何数值，然后替换它：

```
Dim re, test
Set re = New RegExp
re.Pattern = "\d+"

test = "There are 4000 apples"

Set colMatch = re.Execute(test)
For Each objMatch In colMatch
    MsgBox(Replace(test,objMatch.Value,"5"))
Next 
```

![在此处输入图像描述](../Images/27443612b850465eddfa8d5645c2b303.png)

[此](http://msdn.microsoft.com/en-us/library/ms974570.aspx)页面包含您需要的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:32:58.857

您可以使用`RegularExpressions`with[`Regex.Replace`方法](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)：

```
Dim str = "There are 10 apples"
Dim regex = New System.Text.RegularExpressions.Regex("\d+", System.Text.RegularExpressions.RegexOptions.Compiled)
Dim replaced = regex.Replace(str, "5") ' "There are 5 apples" ' 
```

编辑：只看到你需要一个 vbscript 而不是 VB.NET 方法。

# segmentation-fault - CutyCapt 不工作

> ID：12295744
> 
> 赞同：1
> 
> 时间：2012-09-06T08:14:42.967
> 
> 标签：segmentation-fault, cutycapt

CutyCapt 运行良好，但在众多站点中只有 1 个站点失败：

这个：xvfb-run --server-args="-screen 0, 1280x768x24" --auto-servernum /usr/local/bin/CutyCapt --url=http://www.boden.co.uk/ --out =/var/www/screentest/test.png

结果：分段错误。

有任何想法吗？

这是一个 Debian 盒子，如果有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:13:59.350

我注意到某些页面存在同样的问题。但是，我注意到它“有时”确实适用于这些页面。不要问我何时以及为什么:)！因此，我在我的 bash 脚本中添加了一个循环，该循环会尝试多次 - 请参见下面的代码片段 - 在最终放弃之前。你可能想尝试类似的东西。

```
try=1
while [[ ! -f tmp.jpg ]]
do
   cutycapt --url=example.org --out=tmp.jpg
   let try=try+1
   if [ $try -gt 100 ]; then
      exit 0
fi
done 
```

希望有帮助！

# c# - 每次数据库恢复异常失败后如何处理数据库恢复失败并设置为多用户模式？

> ID：12295750
> 
> 赞同：1
> 
> 时间：2012-09-06T08:14:53.327
> 
> 标签：c#, database, sql-server-express

这是我用来恢复数据库的代码

```
SqlConnection c = new SqlConnection("server=.\\SQLExpress;Persist Security Info= True;integrated security=True;Trusted_Connection=Yes");
                c.Open();
//Setting database into single user mode first
                SqlCommand cd = new SqlCommand("ALTER DATABASE Society_security_database SET SINGLE_USER WITH ROLLBACK IMMEDIATE", c);
                cd.ExecuteNonQuery();
//Restoring database from a location
                cd = new SqlCommand("RESTORE DATABASE Society_security_database FROM DISK = '" + path + "' WITH REPLACE", c);
                cd.ExecuteNonQuery();
//Finally setting it to MultiUSermode again
                cd = new SqlCommand("ALTER DATABASE Society_security_database SET MULTI_USER", c);
                cd.ExecuteNonQuery();
                SqlConnection.ClearAllPools();
                c.Close(); 
```

但是当恢复失败时，第三次查询没有执行，程序异常中止，如何解决这个问题？

# java - 在 Eclipse 中添加 SocialAuth 时出现 NoClassDefFoundError

> ID：12295754
> 
> 赞同：4
> 
> 时间：2012-09-06T08:15:06.460
> 
> 标签：java, android, eclipse, adt, socialauth

我试图向我的 Android 项目添加一个外部库，但没有运气。我的应用程序在运行时因异常而崩溃：

```
09-06 07:44:41.921: E/AndroidRuntime(601): java.lang.NoClassDefFoundError: org.brickred.socialauth.android.SocialAuthAdapter 
```

找到了许多不同的魔法解决方案，但没有任何帮助：

1.  创建目录“libs”并在那里添加 JAR。
2.  还在“项目属性 → Java 构建路径 → 库”中添加了 JAR
3.  在“项目属性 → Java 构建路径 → 订购和导出”中将 JAR 移到顶部并检查它
4.  试图清理项目，甚至创建新项目。
5.  安装最新版本的 Eclipse。

添加库时，我看到 APK 的大小发生了变化。

有任何想法吗？

使用的软件：

*   Eclipse：版本：Juno Release 构建 ID：20120614-1722
*   ADT：20.0.3.v201208082019-427395

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:10:26.890

我有同样的问题，这里现有的答案都没有解决这个问题。

然后我检查了 SocialAuth 示例（有效），并注意到 jar 名称与我的不同 - **socialauth-android.jar**而不是**socialauth-android-1.0.jar**

我使用了**socialauth-android.jar** jar，运行时错误消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:08:51.903

您只需要在 AndroidManifest.xml 文件中定义一个新的活动。

将以下代码放在`<application> ----</application>`清单文件的标记内。

```
<uses-library android:name="org.brickred.socialauth.android.SocialAuthAdapter" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:31:48.873

You just need to add jars supplied in sdk in your build path. Have you tried other examples inside sdk. If you still face the issue, you can mail to support of socialauth android.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:55:14.897

java.lang.NoClassDefFoundError 是运行时错误。这意味着在项目中放置 jar 的位置和方式**并不**重要（此处缺少 jar 会导致编译时错误）。重要的是确保您所需的 jar 包含在构建的结果 jar 中。尝试打开您编译/生成的 jar 文件并检查它是否包含所需的 jar 以及它们是否在正确的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:40:31.353

有时，更新 ADT 会导致错误。尝试将其放在文件中的`<Application>`标签中`Manifiest.xml`

```
<uses-library android:name="org.brickred.socialauth...(your lib name)" /> 
```

如果在您的 prj 属性中检查了 Ref Lib，请查看更多信息：[**`Manage project libs`**](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T08:32:36.420

将 jar 文件粘贴到 libs 文件夹中，转到 *-> properties-> java build path->libraries-> 按 Add jars ->*选择您的应用程序 libs 文件夹并选择 jar 文件并按 ok 并清除您的项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T05:49:12.903

在 libs 文件夹中拥有 socialauth-*.jar 和 socialauth-android.jar 后，尝试右键单击它并选择 Build Path > Add to Build Path。就我而言，当我在项目中获得“**引用库**”时，问题就消失了。

# php - php mail() - 作为垃圾邮件发送（使用 php mailer 库）

> ID：12295757
> 
> 赞同：1
> 
> 时间：2012-09-06T08:15:23.717
> 
> 标签：php, email, sendmail, mailer

```
require("class.phpmailer.php");

$mail = new PHPMailer()

$mail->From = "sender@gmail.com";
$mail->AddAddress("recipient@gmail.com");                 // name is optional
$mail->AddReplyTo("sender@gmail.com");

$mail->WordWrap = 50;                                    // set word wrap to 50 characters
$mail->IsHTML(true);                                  // set email format to HTML

$mail->Subject = "Here is the subject";
$mail->Body    = "This is the HTML message body <b>in bold!</b>";
$mail->AltBody = "This is the body in plain text for non-HTML mail clients";

if(!$mail->Send())
{
   echo "Message could not be sent. <p>";
   echo "Mailer Error: " . $mail->ErrorInfo;
   exit;
}

echo "Message has been sent"; 
```

我不知道我需要添加哪些标头，以发送电子邮件而不是垃圾邮件，我该如何使用它？

```
//$mail->IsSMTP(); // is this necessary?
//$mail->Host = "some host ip";  // what i need to write here?
//$mail->SMTPAuth = true;     // is this necessary to send email NOT as spam?
//$mail->Username = "test";  // and this?
//$mail->Password = "secret"; // and this? 
```

一段时间谷歌搜索，我没有找到任何关于如何发送电子邮件而不是垃圾邮件的明确信息......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:18:33.107

不幸的是，您当前使用的邮件服务器过去可能一直在发送垃圾邮件。您是否使用共享托管计划？因为如果您是，则与您使用相同托管计划的其他网站可能会通过相同的邮件服务器发送垃圾邮件/可疑/垃圾邮件。要***尝试***避免此问题，您应该尝试不要使用欺骗的 FROM 标头。不幸的是，如果 Gmail 等已经识别出您使用的邮件服务器作为垃圾邮件的来源，那么这不太可能做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:33:00.197

我不确定，但请参阅下面的 URL，我认为这对您很有帮助。

**如何防止通过 PHP mail() 发送的邮件进入垃圾邮件？**

[如何防止通过 PHP mail() 发送的邮件进入垃圾邮件？](https://stackoverflow.com/questions/5935087/how-do-i-prevent-mails-sent-through-php-mail-from-going-to-spam)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:20:26.987

Make sure the From header really matches e-mail address available on the server you're sending it from - spoofing From headers (sending from host.com but saying it's from abc@otherhost.com) raises your spam score.

Also - is the HTML page well-formed to prevent being marked as spam? For example, does it have an unsubscribe link? Or isn't the subject of that mail something like "free something for you"?

# c++ - C++/SFML 定位精灵问题

> ID：12295760
> 
> 赞同：0
> 
> 时间：2012-09-06T08:15:46.727
> 
> 标签：c++, sfml

我有一个名为“玩家”的类，我在其中处理我正在尝试创建的游戏中的动作、升级等。在主源文件的主循环中，我有键盘事件（左/右）。我希望动作能够知道你的角色何时冒险越过允许的位置。为了回答这个问题，我放置了两个 if 语句。

我只对这个 if 语句有疑问：

```
else if (sf::Keyboard::IsKeyPressed(sf::Keyboard::Right)) {
            if (Player.getX() > 1279) {
                Player.move(640,0);
            }
            Player.move(0.1,0);
        } 
```

没有编译问题。唯一的问题是，与另一个 if 语句不同，这个语句不会将精灵返回到想要的位置。如果我将 if 语句降低到 1000 左右，精灵就会从屏幕上消失。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:26:16.840

```
Player.move(640,0); 
```

您在 X 轴上移动播放器 640 像素。这意味着当玩家到达 时`x > 1279`，即在您世界的右端，您将玩家移动到更右侧。所以它消失了。

您可能想使用`setPosition`而不是`move`此处，或者根本不移动播放器等...

# java - android中相同包名的问题

> ID：12295766
> 
> 赞同：0
> 
> 时间：2012-09-06T08:16:09.160
> 
> 标签：java, android, linked-list, resources, classpath

## 描述

* * *

我有两个 android 应用程序，这里是它们所在的包。

*   `com.android.app.sample1`
*   `com.android.app.sample2`

如您所知，每个应用程序都有自己的 res 文件夹，如果我想为 sample1 获取一些字符串，我必须编写`com.android.app/sample1.R.string.some_string`，如果为 sample2`com.android.app/sample2.R.string.some_string`现在，如果我有其他一些带有包的项目

*   `com.android.app.testingsamples`

我的`sample1\src`and`sample2\src`作为资源链接到***testingsamples***，但是当我链接`src`到***testingsamples时，会出现“******找不到资源 R*** ”之类的错误。

## 我试图解决这个问题

* * *

`com.android.app`在这种情况下，当我将应用程序作为资源链接到***testingsamples***时，我尝试将我的所有应用程序包更改为相同的，一切都很好，因为`R`它是相同的，并且位于 all in`com.android.app.R`但这不是问题，因为当我尝试分别安装sample1***和***sample2***时***安装一个高于一个，因为它们具有相同的包名称。

## 问题

* * *

有什么想法我可以为所有项目 R 将位于同一个地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:41:15.130

src 文件夹中的包名称与应用程序的 Manifest.xml 中定义的包名称不同。通常，当您在 Eclipse 中创建一个新项目时，它们是平等的，但并非必须如此。

您的所有项目都可以在其 src 文件夹中使用相同的包结构。但是为了向 Android 显示两个应用程序 sample1 和 sample2 是不同的应用程序，它们在清单文件中的包名称必须不同。

**更新**

抱歉，我意识到这并不能解决问题，因为 R 类是在 den manifest 中定义的包名下生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:47:00.320

> 并且我的 sample1\src 和 sample2\src 作为资源链接到 testingsamples，但是当我将 src 链接到 testingsamples 时，会出现“找不到资源 R”之类的错误。

这是因为为 R 生成的 java 文件在 sampleX\bin 中。您可能会尝试将这些添加到您的路径中以解决您的问题。

如果 sample1 和 sample 2 不是单独的应用程序，更好的方法是制作 sample1 和 sample2 android 库并将它们链接到您的 testingsamples。因此 sample1 和 sample2 R 都被融合到 testingsamples 中。

# cuda - 禁用对 Tesla C2070 和 Ubuntu 12.04 的 ECC 支持

> ID：12295768
> 
> 赞同：4
> 
> 时间：2012-09-06T08:16:11.890
> 
> 标签：cuda, runtime-error, ubuntu-12.04, tesla

我有一个运行 Ubuntu 12.04 服务器的无头工作站，最近安装了新的 Tesla C2070 卡，但是从 CUDA SDK 运行示例时，我收到以下错误：

```
NVIDIA_GPU_Computing_SDK/C/bin/linux/release% ./reduction 
[reduction] starting...

Using Device 0: Tesla C2070

Reducing array of type int

16777216 elements
256 threads (max)
64 blocks

reduction.cpp(473) : cudaSafeCallNoSync() Runtime API error 39 : uncorrectable ECC error encountered. 
```

实际上，除了“deviceQuery”之外的所有其他示例都会发生此错误。

我正在使用内核 3.2.0、nvidia 驱动程序 295.41 和 Cuda 4.2.9。

经过大量搜索后，找到了禁用 ecc 支持的建议：

```
 nvidia-smi -g 0 --ecc-config=0 
```

这有效。但问题是禁用 ecc 支持的 GPU 计算的可靠性如何？

任何意见、建议或解决方案将不胜感激。

-康斯坦丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:17:35.273

我想知道这是否可能是某种兼容性问题，而不是一张坏卡。我在使用相同的 Ubuntu 版本的 Tesla C2075 时遇到了同样的问题。我们联系了 nVidia，他们告诉我们双位 ECC 错误（如在 linux 中使用 nvidia-smi -q 所见）意味着该卡可能已损坏。我们得到了一个替代品，但它有完全相同的问题。

我的两块板似乎不太可能以相同的方式损坏，所以如果我们能找到合适的，我们将在另一台机器上尝试它。

我会发布我们学到的任何有趣的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T22:23:03.090

我将回应 aland 所说的并添加我自己的经验。

我使用了许多配备 Fermi 的计算集群，并在 ECC 开启和关闭的情况下对它们进行了可变测试。我们这样做是为了增加可用内存量和计算速度，这是显而易见的。nvidia-smi 从来没有报告任何 ECC 卡的 ECC 错误，我们也没有遇到任何表明 ECC 相关问题的运行时错误。

如果您的卡检测到无法纠正的 ECC 问题，则表明硬件存在缺陷，关闭 ECC 只会掩盖问题。运行时正确地警告您出现了错误，您不能依赖结果。

无论如何，您都可以尝试运行您的计算，看看会发生什么，但要为任何没有真正原因的绝对疯狂的事情做好准备。例如，此处或此处翻转的单个位可能会对浮点数学产生巨大影响，并且如果指令损坏，可能会使您的内核彻底崩溃。

如果可以的话，我会尝试更换卡，而不是掩盖症状。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T07:02:54.857

原来我的情况和carthurs的情况一样。我也换了卡，但错误并没有消失。只有在 BIOS 中将主板的板载 VGA 设置为主要后，它才会消失。特斯拉安装手册中应该有这方面的警告！

谢谢大家的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T14:02:46.583

一旦发生 GPU 无法纠正的 ECC 错误，GPU 可能处于不稳定状态（例如，数据损坏不仅可能发生在用户分配的内存中，而且可能发生在 GPU 操作所需的内存区域中）。要恢复 GPU，您需要重启/重新启动系统或尝试使用 GPU Reset from`nvidia-smi`

```
nvidia-smi -h
...
-r    --gpu-reset           Trigger secondary bus reset of the GPU.
                            Can be used to reset GPU HW state in situations
                            that would otherwise require a machine reboot.
                            Typically useful if a double bit ECC error has
                            occurred.
                            --id= switch is mandatory for this switch 
```

键入`man nvidia-smi`以获取有关该主题的更多帮助

# c++ - 如何有效地制作唯一路径名的向量

> ID：12295771
> 
> 赞同：1
> 
> 时间：2012-09-06T08:16:22.127
> 
> 标签：c++, performance, stl

我有一个路径名列表，其中一些标有“包含子树”标志。我需要迭代所有路径，包括子树，但每个唯一路径只需要一次。

所以，如果我有这样一个目录树：

```
C:\Models\
C:\Models\A
C:\Models\A\1
C:\Models\B
C:\Models\B\1 
```

和 2 个带有子树（输入）的选择路径：

```
{"C:\Models\", true}
{"C:\Models\A", true} 
```

迭代时我需要避免以下路径重复：

```
C:\Models\
C:\Models\A
C:\Models\A\1
C:\Models\B
C:\Models\B\1
C:\Models\A   *** Duplicate ***
C:\Models\A\1 *** Duplicate *** 
```

我决定使用vector + set：

```
std::vector<std::string> vecPaths;       // For iterating
std::set<std::string>    setUniquePaths; // For duplicates check 
```

但这是记忆无效的决定，因为每条路径将出现 2 次 1) 在向量中和 2) 在集合中。

如何在不复制这些字符串的情况下提供字符串唯一性？

任务定义注意事项：

*   INPUT 是对的序列 {string path, bool includeSubtre}
*   OUTPUT 是一个路径向量，一个快照，用于未来的迭代。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:56:55.207

如果您只是要迭代`std::vector<std::string>`而不添加或删除元素（在单次迭代期间），那么为什么不使用一组指针/迭代器来复制重复项：

```
std::vector<std::string> subtreePaths = //the ones you want to iterate for
...
std::set<std::vector<std::string>::const_iterator> setUniquePaths;
for(auto iterS=subtreePaths.begin(); iterS!=subtreePaths.end(); ++iterS)
    for(auto iterP=vecPaths.begin(); iterP!=vecPaths.end(); ++iterP)
        if(matches(*iterP, *iterS) && setUniquePaths.insert(iterP).second)
            std::cout << *iterP << std::endl;    //or whatever 
```

（当然`auto`是 C++11，请随意将其替换为符合 C++98/03 的相应迭代器类型）。

但也许我误解了你真正想要达到的目标。

* * *

**编辑：**如果您还没有`vecPaths`向量中的所有现有路径，并且您实际上想以某种方式迭代您的真实文件系统，`vecPaths`用所有找到（和重复清理）的路径构建向量，那么我的上述方法当然是垃圾，因为它假设仅对所有路径的已知向量进行基于字符串的迭代。

但如果是这种情况，您可以完全删除向量并使用单个`std::set<std::string>`来收集您遇到的所有路径（现在自动唯一）。不需要额外的载体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:09:23.583

到目前为止的评论主要集中在内存中的数据结构上，但重要的是要记住目录遍历非常受 IO 限制。给定输入

```
{"C:\Models\", true}
{"C:\Models\A", true} 
```

您想跳过整个第二个目录遍历。因此，您不想在最后消除重复项。作为另一个例子，给定

```
{"C:\Models\A", true}
{"C:\Models\", true} 
```

您想`A`在第二次枚举期间跳过子树。

因此，使用所有已知路径名中的**两个** `std::set<std::string>`，一个用于非递归枚举目录，一个用于您确实枚举的目录。在递归枚举期间，跳过第二组中已经存在的任何子树。在输入结束时，您可以简单地合并这两个集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:28:51.380

如果有很多条目，我会建立一个包含所有唯一目录名称（不是路径）的向量，并使用树（例如[http://tree.phi-sci.com/](http://tree.phi-sci.com/)）通过将 ID 序列放入向量中。要确定是否已经看到现有目录，请使用哈希映射为当前路径中的每个目录名称构建 ID 序列。如果路径完全匹配，请跳过它。如果没有，则将相关节点添加到树中以反映新路径。注意：这可能会导致树中的多个节点引用同一个 ID。

这是代码：

```
std::vector< std::string > directories; // THIS IS THE INPUT!
std::vector< std::string > directory_names;
std::unordered_map< std::string, size_t > name_to_id_map;
tree< size_t > directory_paths;
for (auto idir = directories.begin(); idir != directories.end(); ++idir) {
    // Convert directories to a sequence of IDs (if new names are found, add
    // them to 'directory_names' and 'name_to_id_map'.  This is pretty mechanical code.
    std::vector< size_t > id_sequence = convert( *idir );

    // Walk the tree looking for this ID sequence.
    tree<size_t>::sibling_iterator current_tree_node;
    bool found = true;
    for (auto iid = id_sequence.begin(); iid != id_sequence.end(); ++iid) {
       if ( found ) {
          if ( !directory_paths.is_valid( current_tree_node ) ) {
             // Find a match among the roots of the tree.  Note: There might be a more elegant way to do this.
             tree<size_t>::sibling_iterator iroot( directory_paths.head );
             tree<size_t>::sibling_iterator iroot_end( directory_paths.feet );
             ++iroot_end;

             // Note: If the tree is sorted, we can use equal_range!
             current_tree_node = std::find( iroot, iroot_end, *iid );
             found = ( current_tree_node != iroot_end );
          }
          else {
             // Find a match among the siblings of 'current_tree_node'.
             tree<size_t>::sibling_iterator ichild = directory_paths.begin_child( current_tree_node );
             tree<size_t>::sibling_iterator ichild_end = directory_paths.end_child( current_tree_node );

             // Note: If the tree is sorted, we can use equal_range!
             current_tree_node = std::find( ichild, ichild_end, *iid );
             found = ( current_tree_node != ichild_end );
          }
       }

       if ( !found ) {
          // Add this node to the tree as a child of current_tree_node.
          if ( directory_paths.is_valid( current_tree_node ) ) {
             current_tree_node = directory_paths.insert_after( current_tree_node, *iid );
          }
          else if ( !directory_paths.empty() ) {
             current_tree_node = directory_paths.insert_after( directory_paths.feet, *iid );
          }
          else {
             current_tree_node = directory_paths.set_head( *iid );
          }
       }
    }

    if ( !found ) {
       // This directory path (i.e. *idir) has not been seen before.
       ...
    }
 } 
```

例如，以下输入将创建 5 个唯一名称（C:、Models、A、1、B）。

```
C:\Models\
C:\Models\A
C:\Models\A\1
C:\Models\B
C:\Models\B\1 
```

处理完第一行后，树将有两个节点。处理完第二行后，树将具有三个节点。处理完第 3 行后，树将有四个节点。处理完第 4 行后，树将有五个节点。处理完第 5 行后，树将有六个节点。

如果我碰巧遇到：C:\Models\1\B，则不会向“directory_names”（或“name_to_id_map”）添加新条目，但树现在将有八个节点。

我相信这个实现非常节省内存，因为 1) directory_names 只存储子字符串，而不是完整路径，以及 2) 永远不会为共享同一路径的一部分的两个目录创建多个字符串。本质上，在处理每个新目录时，只存储有关名称和路径的唯一信息（不包括 'name_to_id_map' 的开销，这对于实现适当的运行时与内存平衡似乎很重要）。

注意：我不太明白您所说的“和 2 个带有子树（INPUT）的选择路径”是什么意思。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:49:14.437

您可以使用`boost::variant`一个目录来存储节点。每个节点要么是一个文件，要么是一个目录：

```
typedef boost::variant<
      std::string
    , std::map<std::string, boost::recursive_variant_>
    > Tree; 
```

`map`确保目录中没有重复的名称。

您可能需要添加函数来填充和遍历此递归数据结构。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-06T08:30:48.140

使用 shared_ptr。但是字符串可以实现为 COW，因此无需担心副本。

# c++ - 一个 cpp 中的类定义如何对另一个 cpp 可见/可用

> ID：12295772
> 
> 赞同：0
> 
> 时间：2012-09-06T08:16:22.090
> 
> 标签：c++, void-pointers

在结合 boost、一个演示项目和另一个库时，我的定义遇到了问题。

拥有一个 X.cpp 文件，包括一个类 X，我需要将这个类用于 Y.cpp 中的一个变量，以将一个 void 指针转换为指向这个类的指针。

在代码中：

```
X.cpp

#include <boost/...>

class x {
}

Main(){
  x c(...);
  handler = init(&c);
  anotherLib-Function(void *handler); 
  //will call function in Y.cpp with c as void pointer
}

Y.cpp

#include ?!!

yfunction(void *c){
  x *cHandle;
  *cHandle = (x *)c;
  (*cHandle).write("texte");
} 
```

这就是它上次的工作方式——有点。对于这个凌乱的结构或任何使该代码更好/工作的东西，我将非常感谢一个可靠的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:22:34.157

如果您只需要指向 X 的指针或引用，您还可以在`Y.cpp`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:21:50.050

将 X 文件拆分为包含类声明的头文件 (Xh) 和包含类构造函数、方法等定义的源文件 (X.cpp)。现在将头文件包含在您的 Y.cpp 文件中。然后像这样编译：

```
g++ Y.cpp X.cpp 
```

# math - 平滑连接两条贝塞尔曲线（C2 连续）

> ID：12295773
> 
> 赞同：9
> 
> 时间：2012-09-06T08:16:33.807
> 
> 标签：math, graphics, bezier, continuous

（跟进[这个问题](https://stackoverflow.com/questions/8989440 "这个问题")。）

给定一系列三次贝塞尔曲线，我怎样才能最小化地修改它们以使它们以 C2 连续方式连接？

输入：

*   具有控制点的曲线 P `P0`, `P1`, `P2`,`P3`
*   带有控制点的曲线 Q `Q0`, `Q1`, `Q2`,`Q3`
*   如果有帮助，您可以假设它们已经是 C1 连续的。

约束：

*   C0 连续性：`P3 = Q0`
*   C1 连续性：`P2 - P3 = Q0 - Q1`
*   C2 连续性：`P1 - 2*P2 + P3 = Q0 - 2*Q1 + Q2`
*   修改后的曲线尽可能接近原始曲线 P 和 Q

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:33:13.260

使修改后的曲线尽可能接近原始曲线可以有多种解释，但可以考虑保持远离连接点的端点和切线恒定是合适的。所以点`P0`, `P1`, `P3 = Q0`, `Q2`,`Q3`是常数。

我们可以改变原点，这样`P3 = Q0 = 0`，强制 C2 连续性可以表示为：

```
P1 - 2*P2 = 2*Q1 + Q2 
```

可以用复杂的表示来表达`P2=a*e^i*r`和`Q1=b*e^i*r`表示（保持相同的角度强制 C2 连续性。计算

```
(P1 - Q2)/2 = c*e^i*s 
```

执行 C2 的连续性应该是选择`r=s`，并找到一个`a`和`b`这样的组合`a+b =c`。有无限多的解决方案，但可以使用启发式方法，例如`a`在最小的情况下进行更改（从而产生不太明智的更改）。

如果这没有产生足够小的变化，请尝试两步优化：首先更改`P1`并更接近`Q2`，然后应用上述步骤。`s``r`

# ios - couchbase ios复制错误

> ID：12295775
> 
> 赞同：0
> 
> 时间：2012-09-06T08:16:48.533
> 
> 标签：ios, couchbase, couchcocoa

我是 couchbase 的新手，几个小时以来一直在为一个错误而苦苦挣扎。

我创建了一个 user_profile_<-insert guid here-> 文档，并使用以下测试数据将其成功保存到本地移动沙发数据库：

```
{
    "_id" = "user_profile_F6854F81-FE36-4D6B-BD69-DAEBF0E9D766";
    "_rev" = "7-9012d2c1990b4c2ab4eb96cdf6c7dbdb";
    birthday = Birthday;
    gender = Male;
    name = Ted;
    uuid = 123456789;
} 
```

我已经设置了到远程 couchbase 服务器的复制。

但是，每次尝试复制时，都会出现以下错误：

```
[error] [<0.102.0>] Error in replication 
`bb788350a95e4580ddc768d760f89575+continuous`     
(triggered by document `d15feb5b5838e5044cdd7b9d9b0009f8`): 
{invalid_json,{{error,{1,"lexical error: invalid char in json text.\n"}},
           <<"Not found.">>}} 
```

我已经被这个问题困住了大约 6 个小时。

有人可以在这里帮忙吗？：） 谢谢 ！

更新：我在[https://github.com/dthompson/couchbase-ios-example/](https://github.com/dthompson/couchbase-ios-example/)下载了该项目， 当我运行它时，我得到了同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:58:46.860

我遇到了同样的问题，但我试图使用蒲团复制功能。原来问题出在我输入远程数据库地址的方式上。

例如：我要复制的本地数据库名为*“cardata”*；在我的远程服务器上（使用与本地相同的用户帐户）我创建了一个数据库*“cardata”*，其地址为`http://your_remote_server_name:port/cardata`.

当我将上述格式用于远程服务器时，它工作正常。我最初使用的错误地址格式为：`http://your_remote_server_name:port/_utils/database.html?cardata`.

考虑到我上面详述的经验，您也可能错误地输入了远程服务器的地址。检查它以确保您输入正确。

**注意：**如果您的本地安装与远程服务器上的版本不同，则差异不是原因。我检查了一下，我在本地有 1.2.0，在远程服务器上有 1.0.1。所以我将服务器升级到 1.2.0，但我仍然遇到了问题，直到我按照上面的说明修复了地址。祝你好运。

# java - ReplaceAll() 替换错误的子字符串

> ID：12295779
> 
> 赞同：1
> 
> 时间：2012-09-06T08:17:05.943
> 
> 标签：java, string, replace

我有一个需要修改的字符串数组列表。当我将它们添加到列表中时，它们看起来像这样。

```
tick.add("CAST.ST");
tick.add("ELUX-B.ST");
tick.add("EKTA-B.ST"); 
```

然后我有一种方法来修改名称以删除“.ST”并添加“.XML”

```
private static void addFileNames(List<String> ticks, List<File> fileNames)
    {
        List<String> tick = new ArrayList<String>();
        for(int i=0; i<ticks.size(); i++)
            {
            tick.add(ticks.get(i).replaceAll(".ST", ".xml"));

            }
        for(int i=0; i<tick.size(); i++)
        {
            File f = new File("XML/" + tick.get(i));
            fileNames.add(f);

        } 
```

这适用于所有字符串，除了“CAST.ST”，它被修改为“C.xml.xml”。我还尝试了 replaceFirst，然后将子字符串“AST”替换为“C.xml.ST”。

有人可以看到我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:19:56.080

您需要转义`.`, `\.`, 因为正则表达式中的句点表示*匹配任何字符*。在发布的正则表达式的情况下，`"CAST.ST"`将匹配`"AST"`和`".ST"`.

改变：

```
tick.add(ticks.get(i).replaceAll(".ST", ".xml")); 
```

到：

```
tick.add(ticks.get(i).replaceAll("\\.ST", ".xml")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:21:09.543

问题是 。表示正则表达式中的任何字符。用“\.ST”转义点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:23:44.580

[replaceAll()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)接受 RegEx 表达式作为第一个参数。

为什么不直接使用[replace(".ST", ".xml") ，](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)因为您只想从原始值中替换一个值。

此答案无需使用正则表达式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T08:45:53.047

由于您需要替换最后一次出现以替换文件扩展名，您可以使用

```
ticks.get(i).replaceAll("\\.st$", ".xml") 
```

# php - 无法使用 socket_recv 增加 Socket 缓冲区大小

> ID：12295783
> 
> 赞同：1
> 
> 时间：2012-09-06T08:17:14.540
> 
> 标签：php, websocket

我已经成功创建了一个 web-socket 连接并且能够正确发送和接收数据。但是，我无法增加套接字接收缓冲区的大小。

通过使用下面的代码，我可以将接收字节限制为 1000 到更少。

```
$bytes = socket_recv($socket,$buffer,2048,0); 
```

但是，当我尝试将其长度增加到 65536 字节时，它并没有增加。我正在使用下面提到的凭据来创建 Web 套接字连接。

```
set_time_limit ( 0 ) ;
ob_implicit_flush ( ) ;
$master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP) or die("socket_create() failed");
socket_set_option($master, SOL_SOCKET, SO_REUSEADDR, 1) or die("socket_option() failed");
socket_bind($master, $address, $port) or die("socket_bind() failed");
socket_listen($master,20) or die("socket_listen() failed"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:41:51.883

使用参数中的`MSG_WAITALL`选项告诉它在收到字节`flags`之前不要返回。`len`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:42:42.020

为什么要将缓冲区增加到 64KByte？我敢肯定，在大多数情况下，这没有多大意义。套接字缓冲区的最大大小当然也取决于底层实现。也许有一个您不能超过的内部最大尺寸。如果您想接收更大的数据/消息，您应该`socket_recv`多次使用该函数调用。

顺便说一句，如果你使用 PHP，你应该看看一些强大的框架。我认为尝试使用 RAW 套接字不是一个好主意。

# java - Apache Commons 电子邮件：如何通过非 SMTP api 发送电子邮件？

> ID：12295792
> 
> 赞同：0
> 
> 时间：2012-09-06T08:17:41.620
> 
> 标签：java, smtp, apache-commons-email

我正在替换一个用于通过 SMTP 发送电子邮件的类，现在它将通过另一个 API 来完成。

我正在编写的接口在 Apache Commons Email 类中发送，并准备好电子邮件。

我不知道如何：

1.  覆盖 Apache Commons 电子邮件的功能以使用我自己的传输机制而不是 SMTP
2.  `org.apache.commons.mail.Email`或从基类中提取基于 HTML 或文本的电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:52:41.773

getMimeMessage() 做你想做的事吗？

[http://commons.apache.org/email/apidocs/org/apache/commons/mail/Email.html#getMimeMessage](http://commons.apache.org/email/apidocs/org/apache/commons/mail/Email.html#getMimeMessage) ()

从中您可以在 API 中使用 getter

[http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeMessage.html](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/MimeMessage.html)

获取消息内容、标题等。

# zend-framework - zendframework 自动加载查询

> ID：12295794
> 
> 赞同：0
> 
> 时间：2012-09-06T08:17:45.133
> 
> 标签：zend-framework, zend-autoloader

我正在基于 zendframework 的应用程序中编写自己的日志类。我想知道，因为它是我自己的库类，将它保存在应用程序中。我决定让这个类与 /library 文件夹中的“Zend”文件夹平行

```
-library
 - Zend
 - Helper [ custom lib classes] 
```

在 bootstrap.php 我有 _initAutoload 函数，我在其中添加了以下内容

```
 $autoloader=new Zend_Loader_Autoloader_Resource(array(
            'basePath'  => dirname(__FILE__),
            'namespace' => 'Demo',
        ));
        $autoloader->addResourceType('model', 'models/', 'Model');
        $autoloader->addResourceType('helper', APPLICATION_PATH.'/library/Helper', 'Helper'); 
```

但我收到错误 Demo_Helper_Logger 类未找到。

这里有什么问题？任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:23:53.720

如果您使用的是 ZF 1.9+，您可以在 application.ini 中处理此问题

将您的自定义“库”放入：

> ../library/Helper/Log.php

将您的班级命名为：

```
class Helper_Log {} 
```

添加

```
autoloadernamespaces.1 = "Helper_" 
```

到您的 application.ini

```
$log = new Helper_Log(); 
```

# jquery - 在 FF 中第二次提交 jQuery/Ajax 表单时出错

> ID：12295798
> 
> 赞同：1
> 
> 时间：2012-09-06T08:17:50.047
> 
> 标签：jquery, html

这是我的 HTML 输出代码：

```
<tr class="uedit103" style="display: none;"><form  id="editform103" name="editform103">
    <td class="base" id="uedit103"><input type="text" class="editua" name="lname" id="lname" value="inte"></td>
    <td class="base" id="uedit103"><input type="text" value="info" class="editua" name="fname" id="fname" ></td>
    <td class="base" id="uedit103"><input type="text" value="email@email.com" class="edituaxl" name="emailadres" id="emailadres" ></td>
    <td class="yellow       
    "><select name="ma_accesslevel"><option value="0" >Basic</option><option value="1"  SELECTED >Intermediate</option><option value="2" >Superuser</option></select></td>
    <td class="yellow

    "><select name="m_accesslevel"><option value="0" >Basic</option><option value="1"  SELECTED >Intermediate</option><option value="2" >Superuser</option></select></td>
    <td class="yellow
    "><select name="hcc_accesslevel"><option value="0" >Basic</option><option value="1"  SELECTED >Intermediate</option><option value="2" >Superuser</option></select></td>
    <td class="base" id="uedit103"><input type="hidden" class="editua" name="uid" id="uid" value="103"></td>
    <td class="base" id="uedit103"><input type="button" id="editsubmit103" class="editbutton" Value="Save"><input type="button" id="editcancel103" class="editbutton" Value="Cancel"></td>
    </form></tr> 
```

jQuery 部分是这样的（为调试添加了警报）：

```
$('#editsubmit$ses->user_id').click(function(){
    $.post('ajax/aj_edituser.php', $("form#editform$ses->user_id").serialize(), function(result) {
        alert($("form#editform$ses->user_id").serialize());
        $('#success$ses->user_id').delay(200).fadeToggle('slow').delay(2000).fadeToggle('slow');    
        $('div.mainadmin').html(result);            
    });
}); 
```

适用于所有浏览器，FF 除外，它在第二次提交表单时失败（表单在打开的页面中重新加载）。在验证 HTML 或查看 FF 中的源代码时，表单标签

```
<form  id="editform103" name="editform103"> 
```

显示为红色并收到消息“表格中显示的开始标记表单”。结束表单标记也被置为红色，并收到消息“Stray end tag form”。[通过http://validator.w3.org/](http://validator.w3.org/)验证代码也会给我这些错误 +“在此上下文中不允许元素形式作为元素 tr 的子元素。（抑制来自该子树的进一步错误。）”在编辑表单上。所以我也尝试将表格放在标签周围，但没有帮助。

我再也看不到这个了，谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:20:56.203

将表单标签放在 TR 标签或 TABLE 标签内是无效的 HTML，您需要将其放在 TD 内或整个 TABLE 周围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:20:44.957

改变这个：

```
$('#editsubmit$ses->user_id').on('click', function(){ ... } 
```

如果您要使用 Javascript 创建 HTML 元素，您应该使用它`.on()`来绑定事件。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

希望它有所帮助。

# sql - 为什么有人要使用 JDBC 而不是 korma 之类的库？

> ID：12295801
> 
> 赞同：3
> 
> 时间：2012-09-06T08:18:01.453
> 
> 标签：sql, clojure, korma

我读过一篇名为[Blogging with Noir](http://yogthos.net/blog/20-Blogging+with+Noir)的博客文章，我真的很惊讶作者使用[java.jdbc](https://github.com/clojure/java.jdbc)而不是像[Korma](http://sqlkorma.com/)这样的库，这让我感到惊讶。在你的代码中编写 SQL 查询而不是让工具为你做这件事有什么好处？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T08:33:07.337

我想这是出于通常的原因，您可能会选择直接在 Clojure 中使用 API 而不是使用包装器：

*   **现有知识**：您已经非常了解 JDBC，并且知道它可以完成工作，除非有明显的优势，否则为什么要花时间学习新的抽象？
*   **不确定性**- 库是否具有您需要的所有功能？将来会继续维护并实现新功能吗？
*   **稳定性**- 包装器可能尚未成熟，因此如果发生重大更改/发现错误，您将面临代码必须更改的风险。
*   **完整性**- 包装器可能（尚未）封装您需要的原始 API 的所有功能
*   **开销**- 有时额外的抽象层会增加您不需要/不想要的性能开销
*   **额外的依赖**- 增加了构建的复杂性，以及需要记住的抽象数量的概念开销。

归根结底，这是一种权衡——以上是您可能想要使用底层 API 的原因，但同样有充分的理由可以选择使用包装器：

*   **更惯用**- 包装库可能会为您提供比基于 Java 的 API 更清洁、更优雅的代码（特别是如果 Java API 是命令式/有状态的）。你不得不承认科尔马非常优雅！
*   **更可组合**- Clojure 包装器倾向于采用函数式风格，这导致与其他 clojure 代码/库的轻松组合。
*   **新功能**- Clojure 包装器通常会添加原始 API 不具备的额外功能（例如，查看 Seesaw 在 Swing 之上添加的数据绑定功能）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T08:29:05.093

Korma IMO 还没有准备好完全替代 SQL。这绝对很方便，但现在我的很多查询都有（原始“...”）片段，对于更复杂的东西，所有主要查询都是在 SQL 视图中完成的，然后通过 korma 选择这些视图。

主要的替代品 ClojureQL 甚至不适用于 Clojure 1.3+

简而言之，*很难*抽象 SQL，而且 Korma——尽管它试图做到最小，这意味着你仍然必须很好地理解 SQL 才能使用它——还没有完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T08:27:59.003

我可以想到两个原因：

1.  几乎每个人都知道 SQL，几乎没有人知道 Korma
2.  这是一个猜测，因为我自己并不了解 Korma，但如果您想做一些特定的事情，比如只存在于特定数据库中的功能，原始 SQL 有时是合适的，甚至是必要的

# facebook - 即使安装了 SSL 证书，使用 HTTPS 时 Facebook 选项卡也不会显示

> ID：12295810
> 
> 赞同：0
> 
> 时间：2012-09-06T08:18:26.413
> 
> 标签：facebook

出于某种原因，我的应用程序决定在使用 HTTPS 时停止加载页面选项卡。我确实在我的服务器上使用 SSL 证书，Facebook 画布页面甚至使用 HTTPS 加载；

[https://apps.facebook.com/myflashstore](https://apps.facebook.com/myflashstore)

但是“页面”选项卡仅使用 HTTP 加载，尽管很长一段时间它都可以使用 HTTPS。

[http://www.facebook.com/trubeats/app_79482449955](http://www.facebook.com/trubeats/app_79482449955)

[https://www.facebook.com/trubeats/app_79482449955](https://www.facebook.com/trubeats/app_79482449955)

在应用程序设置中，`Secure Page Tab URL`与 相同，`Page Tab URL`因此应该没有问题。有人有想法么？非常感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:04:03.223

我找到了解决方案。这`Secure Page Tab URL`是一个相对 URL，相对于我的`Canvas URL`- 虽然自从我制作应用程序以来它运行良好，并且适用于 HTTP 请求，但出于某种原因，`Secure Page Tab URL`现在需要一个完整的 URL。感谢 Facebook 不断改变事物……让我们的生活更轻松！

# open-source - 新闻 (NNTP) 到网络论坛的桥梁/网关

> ID：12295811
> 
> 赞同：0
> 
> 时间：2012-09-06T08:18:28.717
> 
> 标签：open-source, forum, gateway, nntp

我正在寻找一个适合“极客”和技术不那么精通的用户的*论坛。*

多年来，我们一直在使用极客们满意的新闻服务器 (NNTP)（使用 Thunderbird 或类似界面），然而，年轻的“facebook 一代”更喜欢类似通过网络的 php-web-forum 之类的东西讨论平台。另一方面，大多数极客讨厌网络论坛，更喜欢邮件列表或 nntp 新闻服务器。现在，如何将这些不同的世界结合在一起？

理想情况下，我们考虑使用存在新闻到网络论坛桥的网络论坛（phpBB、MyBB 或类似）？我知道mailman 有一个mail2news 网关，但似乎没有类似news2forum 网关的东西？我搜索了网络，但似乎没有一个可用的网络论坛具有 NNTP 集成。开源是首选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:05:58.467

我还没有尝试过，但这听起来合理的 nntp->forum 提供的网络前端线程、报价折叠、降价支持、未读消息和终止列表支持（有限，但可配置，不错的妥协），LDAP 集成。

[https://github.com/arkanis/nntp-forum](https://github.com/arkanis/nntp-forum)

我希望他们有一个演示站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:19:40.520

好的，似乎有两种选择：

1.  [FUDForum](http://fudforum.org)内置支持[NNTP 和邮件列表同步](http://cvs.prohost.org/index.php/Features#Mailing_List_and_NNTP_Integration)（我的首选）
2.  [Syncom](http://wiki.piratenpartei.de/Syncom)（由德国海盗党编写的 MyBB 插件）。该插件的源代码在 github，但需要根据[https://github.com/annando/Syncom](https://github.com/annando/Syncom)和[https://github.com/shirk/SynFU](https://github.com/shirk/SynFU)的德语 README 进行整理。因此，这似乎更像是一个“hacky”解决方案。

# php - 从 URL 发送数据的替代方法？

> ID：12295812
> 
> 赞同：1
> 
> 时间：2012-09-06T08:18:29.670
> 
> 标签：php, security, hyperlink

我正在开发一个 Web 应用程序，我想在其中进行一些安全限制，并想知道以安全方式从 URL 发送数据或 id 的替代方法。例如：

```
$id=$row=['id'];
$name=$row['name'];

<a href="projects.php?project_id=<?pho echo $id; ?>&name=<?php echo $name; ?>"> 
```

那么有没有其他方法可以安全地将这两个属性发送到 project.php ？我只希望 id & name 不应该在 url 上可见。请指导我，我知道这是 PHP 的非常基本的功能，我只想找到替代或安全的解决方案。我知道我正在使用 get 发送数据，但是有没有其他方法可以在不使用标签的情况下将数据发送到 project.php？

在所有评论和回答之后我尝试了这个，所以答案是：

```
<?php
$id="1";
$name="Harshal";
?>
<a href="projects.php?id=<?php echo base64_encode($id) ?>&name=<?php echo base64_encode($name) ?>">Send</a> 
```

和projects.php

```
<?php
echo $idd=base64_decode($_GET['id']);
echo $namme=base64_decode($_GET['name']);
?> 
```

有用...！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:32:54.650

在加密说明中，请记住哈希是单向的。您不能使用散列算法“加密”名称并使其在行尾可读。但是，如果您想以这种方式处理通过 HTTP 传输的加密数据，您可以使用例如 mcrypt。然后面对以浏览器安全的方式输出生成的二进制数据的问题，您应该依赖 Base64 编码。

例如：

```
$crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, 'passkeyhere', 'My name', MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND));
echo base64_encode($crypttext); 
```

输出：

```
rLXuVMlI9DWgF96peQ5IREexDk4XBwCn+34SEuy5eH4= 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:24:52.177

Using post variables. If you're trying to send this from HTML, your only recourse is changing this:

```
<a href="projects.php?project_id=<?php echo $id; ?>&name=<?php echo $name; ?>"> 
```

To this:

```
<form action="projects.php" method="post"><input type="hidden" name="project_id" value="<?= $id ?>"/><input type="hidden" name="name" value="<?= $name ?>"/><input type="submit" value="Send name"/></form> 
```

If you want to make the connection actually secure, your best option is using HTTPS.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:25:55.143

默认情况下，在 URL 中发送的任何内容几乎都可供所有人查看、使用和滥用。

话虽如此，有时您只需*以*这种方式发送即可。你不能使 URL 中的数据安全，你*可以*让你的代码以安全的方式对待它。

例如，如果您通过 URL 传递数据并简单地显示数据，那么任何人都可以更改 URL 位并查看他们不应该看到的信息。但是，如果您通过 URL 和您的代码发送数据，然后执行检查以查看用户是否能够看到它，这突然变得更加安全。

另一种快速方法是提供一个链接，将数据复制到会话中并将用户重定向到新页面 - 根据会话中的信息向他们显示他们想要的内容 - 并再次验证他们确实被允许查看它。

请记住，任何人都可以在几秒钟内编辑 URL。发布数据确实并没有太大的不同 - 尽管可能需要更多的努力来捏造。为了保护它，您需要确保您拥有的代码能够以安全的方式处理它。

编辑：

您应该将代码更改为：

```
<?php
$id="1";
$name="Harshal";
?>
<a href="projects.php?id=<?php echo base64_encode($id); ?>&name=<?php echo base64_encode($name); ?>">Send</a> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T08:26:01.083

首先 - 让普通人更难在 URL 中伪造用户 ID 等，要么使用 POST 方法，要么使用**[bCrypt](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)**在 URL 中传递哈希值。

其次，您最好在您的 URL 中使用 SSL - https:// 以防止耳漏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T08:26:01.197

在网页（包括 PHP）之间传递数据的方法是通过 GET 和 POST。POST 隐藏它但不会将其从查看中删除，它仍然是请求中的纯文本。如果您强制使用 https 连接并使用 POST，则信息将隐藏在 post 请求中，并使用密钥为您加密和解密。

如果您只想在幕后完成，您可以使用 ajax 发送和接收数据而无需提交页面。

# javascript - 我的 svg 矩形运动

> ID：12295818
> 
> 赞同：0
> 
> 时间：2012-09-06T08:18:54.840
> 
> 标签：javascript, html, svg

我想移动到一个矩形。当它到达行尾时，换行并将其放在下一行的开头。矩形没有很好的坐标来换行。有任何想法吗？这是我的功能：

```
<script type="text/javascript"><![CDATA[
    var rect = document.getElementById('player');
    var x = rect.getAttribute('x')*1,
        y = rect.getAttribute('y')*1;
    setInterval(move, 30);

    function move()
    {
        if (rect.getAttribute('x') < 500){
            rect.x.baseVal.value = ++x;
        }
        else if (rect.getAttribute('x') >= 500){
            rect.x.baseVal.value = x-250;
            rect.y.baseVal.value = y+250;
        }
    }
    ]]></script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:12:59.963

从元素中获取值是不必要的昂贵，在您的情况下，它似乎获取或设置值为时已晚。而不是在每个循环上获取值，而是跟踪 for`x`和`y`：

```
var rect = document.getElementById('player');
var x = rect.getAttribute('x')*1,
    y = rect.getAttribute('y')*1;
var pos_x = 0, pos_y = 0;
setInterval(move, 30); 

function move(i)
{
    pos_x++;
    if (pos_x < 500){
        rect.setAttribute('x', pos_x);
    }
    else {
        pos_y +=10
        pos_x = 0;
        rect.setAttribute('x', pos_y);
        rect.setAttribute('y', pos_y);
    }
}​ 
```

[http://jsfiddle.net/gMwMb/](http://jsfiddle.net/gMwMb/)

# grails - 为什么我们在 g:select optionvalue 中使用闭包

> ID：12295820
> 
> 赞同：3
> 
> 时间：2012-09-06T08:19:09.263
> 
> 标签：grails, groovy, closures

我可以理解什么是闭包。我可以理解下面的例子。

```
 def list = ['a','b','c','d']
    def newList = []

    def clos = { it.toUpperCase() }
    list.collect( newList, clos )

assert newList == ["A", "B", "C", "D"] 
```

我去看了 g:select 文档。我在下面看到了。

```
 <g:select optionKey="id" optionValue="${{it.title?.toUpperCase()}}" name="book.title" from="${bookList}" /> 
```

我不明白 ${{it.title?.toUpperCase()}}。

我理解每个对象标题转换为大写的逻辑，但为什么我们需要双“{}”..

**为什么使用 ${it.title?.toUpperCase()} 不起作用**

文档链接[在此处输入链接描述](http://grails.org/doc/1.0.x/ref/Tags/select.html#)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:33:50.600

外部 ${ } 不是闭包，是[GSP Expression](http://grails.org/doc/latest/guide/single.html#expressions)，只有内部 {} 是闭包。如果您只输入 ${it.title?.toUpperCase()} ，则不会将参数传递给闭包，而是传递实际的“it.title?.toUpperCase()”解析值。

# asp.net - visualstudio 2010 Web 应用程序构建模式分别适用于 32 位和 64 位

> ID：12295821
> 
> 赞同：-1
> 
> 时间：2012-09-06T08:19:09.887
> 
> 标签：asp.net, visual-studio-2010, web-applications, iis-7

在 visualstudio 2010 Web 应用程序中，我可以将 BuildMode Any CPU 的配置更改为 32 位模式或 64 位模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:24:40.240

In the "Build => Configuration Manager" you can change the platform for your project, for either Debug or Release mode.

# java - 从应用程序内创建堆转储，无需 HotSpotDiagnosticMXBean

> ID：12295824
> 
> 赞同：15
> 
> 时间：2012-09-06T08:19:24.927
> 
> 标签：java, jmx, heap-dump

如何在我的应用程序中创建堆转储，而不使用类 HotSpotDiagnosticMXBean。由于访问限制，`java/rt.jar`我无法使用对`HotSpotDiagnosticMXBean`. 我知道如何解决 eclipse.compiler 错误，但是如何为我的构建修复它？是否有替代方法以编程方式创建堆转储？

*   此解决方案不起作用，因为它是 HotSpotDiagnosticMXBean 依赖项：[HotSpot-dependent Heap Dump](https://stackoverflow.com/questions/1818897/request-java-heap-dump-core-dump-from-within-application)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T09:47:25.933

好的，似乎您可以使用反射绕过限制：

```
package lab.heapdump;

import javax.management.MBeanServer;
import java.lang.management.ManagementFactory;
import java.lang.reflect.Method;

@SuppressWarnings("restriction")
public class HeapDump {
    // This is the name of the HotSpot Diagnostic MBean
    private static final String HOTSPOT_BEAN_NAME =
         "com.sun.management:type=HotSpotDiagnostic";

    // field to store the hotspot diagnostic MBean 
    private static volatile Object hotspotMBean;

    /**
     * Call this method from your application whenever you 
     * want to dump the heap snapshot into a file.
     *
     * @param fileName name of the heap dump file
     * @param live flag that tells whether to dump
     *             only the live objects
     */
    static void dumpHeap(String fileName, boolean live) {
        // initialize hotspot diagnostic MBean
        initHotspotMBean();
        try {
            Class clazz = Class.forName("com.sun.management.HotSpotDiagnosticMXBean");
            Method m = clazz.getMethod("dumpHeap", String.class, boolean.class);
            m.invoke( hotspotMBean , fileName, live);
        } catch (RuntimeException re) {
            throw re;
        } catch (Exception exp) {
            throw new RuntimeException(exp);
        }
    }

    // initialize the hotspot diagnostic MBean field
    private static void initHotspotMBean() {
        if (hotspotMBean == null) {
            synchronized (HeapDump.class) {
                if (hotspotMBean == null) {
                    hotspotMBean = getHotspotMBean();
                }
            }
        }
    }

    // get the hotspot diagnostic MBean from the
    // platform MBean server
    private static Object getHotspotMBean() {
        try {
            Class clazz = Class.forName("com.sun.management.HotSpotDiagnosticMXBean");
            MBeanServer server = ManagementFactory.getPlatformMBeanServer();
            Object bean = 
                ManagementFactory.newPlatformMXBeanProxy(server,
                HOTSPOT_BEAN_NAME, clazz);
            return bean;
        } catch (RuntimeException re) {
            throw re;
        } catch (Exception exp) {
            throw new RuntimeException(exp);
        }
    }

    public static void main(String[] args) {
        // default heap dump file name
        String fileName = "D:\\heap.bin";
        // by default dump only the live objects
        boolean live = true;

        // simple command line options
        switch (args.length) {
            case 2:
                live = args[1].equals("true");
            case 1:
                fileName = args[0];
        }

        // dump the heap
        dumpHeap(fileName, live);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-07T07:56:39.807

```
package ru.test;

import com.sun.management.HotSpotDiagnosticMXBean;
import org.junit.Test;

import java.io.IOException;
import java.lang.management.ManagementFactory;

public class TestDump {
    @Test
    public void test() throws IOException {
        long i = 6789;
        String s = "HELLO";
        System.out.println(i);
        System.out.println(s);

        HotSpotDiagnosticMXBean mxBean = ManagementFactory.newPlatformMXBeanProxy(ManagementFactory.getPlatformMBeanServer(),
                "com.sun.management:type=HotSpotDiagnostic", HotSpotDiagnosticMXBean.class);
        mxBean.dumpHeap("C:\\temp\\dump\\heap1.bin", true);
    }
} 
```

出去：

```
6789
HELLO    

Process finished with exit code 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-10T18:08:14.767

您可以将具有 HotSpotDiagnosticMXBean.class 的 rt.jar 复制到其他位置。使用“添加外部 jar”在构建路径中引用复制的 jar。这允许您创建对象并获取堆转储。

```
new HotSpotDiagnostic().dumpHeap("d:\\HeapDump1",true); 
```

我能够以这种方式生成 Heapdump。我正在寻找 jars 错误的任何运行时冲突。幸运的是没有。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-06T08:28:34.443

VisualVM 可以进行堆转储。

您也可以在 linux 系统上尝试 jhat 命令。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-06T08:54:07.147

此类是公共的，因此您可能无法访问它的唯一原因是您的 JVM 版本中没有它，因为它太旧了。

链接到的示例在 Java 6 和 7 中编译并运行良好。如果可能，请尝试升级到最新版本的 Java。

# java - 如何将参数传递给 ViewScoped Bean

> ID：12295825
> 
> 赞同：0
> 
> 时间：2012-09-06T08:19:31.703
> 
> 标签：java, jsf, jsf-2

简要用例描述：

用户到达页面：`http://localhost:8080/.../show.xhtml?itemId=1`。My`ShowBean`是一个 @RequestScoped JSF 托管 Bean，它通过获取 id`<f:viewParam.../>`并在数据库中查找项目：

```
<f:metadata>
    <f:viewParam name="itemId" value="#{showBean.itemId}">
        <f:convertNumber integerOnly="#{true}"/>
    </f:viewParam>
</f:metadata>
<f:event type="preRenderView" listener="#{showBean.init()}"/> 
```

用户还可以编辑显示的项目。我想`ItemEditBean`按需构建@ViewScoped（通过单击“编辑”按钮）。为了实现这一点，我做了以下事情：

```
<p:commandButton value="Edit" oncomplete="editWidget.show()" update=":itemEditForm">
    <f:setPropertyActionListener target="#{itemEditBean.id}" value="#{showBean.itemId}"/>
</p:commandButton> 
```

我的问题是：有没有更好的方法将 itemId 传递给 @ViewScoped bean？

**编辑：**

执行按钮`itemEditBean.fetch(id)`操作`p:command`不会在页面呈现时初始化 @ViewScoped bean。

`<p:commandButton value="Edit" oncomplete="editWidget.show()" update=":itemEditForm" action="#{itemEditBean.fetchItem(showBean.itemId)}"/>`.

使用上面的代码 itemEditBean 可以按需构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:35:12.800

我认为@ViewScoped 不是专业人士。尝试部分表单提交。比如像这样，

```
 <p:commandLink immediate="true" id="addAccessoriesLink" update=":accessoriesEntryForm">  
        <h:graphicImage url="/images/add.png" styleClass="action-img"/>
              <f:setPropertyActionListener value="# AccessoriesActionBean.newAccessories}" target="#{AccessoriesActionBean.newAccessories}" />
  </p:commandLink> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:47:38.340

问题是在不保留参数的后续请求中`showEditBean`重新构建。`INVOKE_APPLICATION`

只需确保使用`f:param`.

```
<p:commandButton value="Edit" oncomplete="editWidget.show()" update=":itemEditForm">
    <f:param name="itemId" value="#{showBean.itemId}"/>
    <f:setPropertyActionListener target="#{itemEditBean.id}" value="#{showBean.itemId}"/>
</p:commandButton> 
```

PS您对`@ViewScoped`bean生命周期的看法是正确的：如果仅出现在s中，则它**不是**在页面加载时构建`action`的！

# iphone - 代表和方法未按预期工作

> ID：12295826
> 
> 赞同：-1
> 
> 时间：2012-09-06T08:19:38.257
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollviewdelegate

我一直在尝试解决我正在开发的应用程序的问题。在这里搜索和浏览问题后，我认为代表和某些方法存在问题。

该代码用于在 UIScrollView 中嵌入 UIView 来实现“下拉​​刷新”。

这是我正在实施的课程：

**刷新视图.h**：

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

typedef enum{

    PullRefreshPulling = 0,
    PullRefreshNormal,
    PullRefreshLoading,

} PullRefreshState;

@protocol RefreshViewDelegate;

@interface RefreshView : UIScrollView <UIScrollViewDelegate> {

    id __unsafe_unretained refreshDelegate;
    PullRefreshState state;

    UILabel *lastUpdatedLabel;
    UILabel *statusLabel;
    CALayer *arrowImage;
    UIActivityIndicatorView *activityView;

}

@property(nonatomic,unsafe_unretained) id <RefreshViewDelegate> refreshDelegate;

- (void)viewDidScroll:(UIScrollView *)scrollView;
- (void)viewDidEndDragging:(UIScrollView *)scrollView;
- (void)viewDataDidFinishedLoading:(UIScrollView *)scrollView;

@end

@protocol RefreshViewDelegate

- (void)didTriggerRefresh:(RefreshView*)view;
- (BOOL)dataIsLoading:(RefreshView*)view;

@end 
```

**刷新视图.m**：

```
#import "RefreshView.h"

@implementation RefreshView

- (void)viewDidEndDragging:(UIScrollView *)scrollView {

    NSLog(@"RefreshView - viewDidEndDragging");

    BOOL loading = NO;

    if ([refreshDelegate respondsToSelector:@selector(dataIsLoading:)]) { // responds with scrollView.delegate ? ? ?

        NSLog(@"RefreshView - respondsToSelector:@selector(dataIsLoading:)");

        loading = [refreshDelegate dataIsLoading:self];

    }

    if (scrollView.contentOffset.y <= - 65.0f && !loading) {

        NSLog(@"RefreshView - dataIsNotLoading");

        if ([refreshDelegate respondsToSelector:@selector(didTriggerRefresh:)]) { // works with scrollView.delegate ? ? ?

            NSLog(@"RefreshView - respondsToSelector:@selector(didTriggerRefresh:)");

            [refreshDelegate didTriggerRefresh:self];

        }

        [self setState:PullRefreshLoading];

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.2];

        scrollView.contentInset = UIEdgeInsetsMake(60.0f, 0.0f, 0.0f, 0.0f);

        [UIView commitAnimations];

    }

} 
```

**SearchViewController.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

#import "RefreshView.h"

@interface SearchViewController : UIViewController <MKMapViewDelegate, RefreshViewDelegate, UIScrollViewDelegate> {
    RefreshView *refreshView;
    BOOL reloading;
}

@property (nonatomic, strong) UIScrollView *mainView;

@property (nonatomic, strong) MKMapView *mapView;

@property (nonatomic, strong) NSArray *info;

@property (nonatomic,strong) UINavigationBar *navBar;

@property (nonatomic, strong) CLLocationManager *locationManager;

@property (strong, nonatomic) NSTimer *locationTimer;

@property (nonatomic, strong) UIButton *currentLocationButton;
@property (nonatomic, strong) UIButton *locationServicesButton;

- (void)reloadData;
- (void)doneLoadingData;

@end 
```

**SearchViewControler.m**

```
#import <QuartzCore/QuartzCore.h>
#import <CoreLocation/CoreLocation.h>

#import "SearchViewController.h"
#import "ProfileViewController.h"
#import "RefreshView.h"
#import "AppDelegate.h"

@interface SearchViewController ()

@end

@implementation SearchViewController

@synthesize mainView;

- (void)viewDidLoad {

    [super viewDidLoad];

    .
    .
    .

    // Main view

    mainView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

    mainView.contentSize = CGSizeMake(self.view.frame.size.width, self.view.frame.size.height * 2);

    mainView.delegate = self;

    [self.view addSubview:mainView];

    .
    .
    .

    if (refreshView == nil) {

        RefreshView *pullToRefreshView = [[RefreshView alloc] initWithFrame:CGRectMake(0.0f, 0.0f - self.mainView.bounds.size.height, self.view.frame.size.width, self.mainView.bounds.size.height)];
        pullToRefreshView.refreshDelegate = self;
        [self.mainView addSubview:pullToRefreshView];
        refreshView = pullToRefreshView;

    }

    .
    .
    .

}

- (void)viewDidUnload {...}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {...}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView{

    [refreshView viewDidScroll:scrollView];

}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate{

    NSLog(@"SearchViewController - scrollViewDidEndDragging");

    [refreshView viewDidEndDragging:scrollView];

}

- (void)didTriggerRefresh:(RefreshView*)view{

    NSLog(@"SearchViewController - didTriggerRefresh");

    [self reloadData];
    [self performSelector:@selector(doneLoadingData) withObject:nil afterDelay:0.5f];

}

- (BOOL)dataIsLoading:(RefreshView*)view{

    NSLog(@"SearchViewController - dataIsLoading");

    [NSThread detachNewThreadSelector:@selector(displayMap) toTarget:self withObject:nil];

    return reloading;

}

- (void)reloadData{

    NSLog(@"SearchViewController - reloadData");

    reloading = YES;

}

- (void)doneLoadingData{

    NSLog(@"SearchViewController - doneLoadingData");

    reloading = NO;

    [refreshView viewDataDidFinishedLoading:self.mainView];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:31:06.347

试试这个。你的 RefreshView.h

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

typedef enum{

PullRefreshPulling = 0,
PullRefreshNormal,
PullRefreshLoading,

} PullRefreshState;

@class RefreshView
@protocol RefreshViewDelegate <NSObject>
@required
- (void)didTriggerRefresh:(RefreshView*)view;
- (BOOL)dataIsLoading:(RefreshView*)view;
@end

@interface RefreshView : UIScrollView <UIScrollViewDelegate> {

id <RefreshViewDelegate> refreshDelegate;
PullRefreshState state;

UILabel *lastUpdatedLabel;
UILabel *statusLabel;
CALayer *arrowImage;
UIActivityIndicatorView *activityView;

}

@property(nonatomic,strong) id <RefreshViewDelegate> refreshDelegate;

- (void)viewDidScroll:(UIScrollView *)scrollView;
- (void)viewDidEndDragging:(UIScrollView *)scrollView;
- (void)viewDataDidFinishedLoading:(UIScrollView *)scrollView;

@end 
```

在您的 RefreshView.m

```
@systhesis refreshDelegate; 
```

# php - 将网站导出到 XML 页面

> ID：12295834
> 
> 赞同：1
> 
> 时间：2012-09-06T08:20:07.210
> 
> 标签：php, javascript, python, xml, perl

我需要将网站（.html 页面）导出到 XML 文件。该网站包含一个表格，其中包含一些我需要在我的网络项目中使用的数据。网站中的表格是使用一些javascript形成的，所以我无法通过获取页​​面源来获取数据。请告诉我如何使用 php/python/javascript/perl 将网站中的表格导出到 XML 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:25:55.130

您可以尝试对 javascript 代码进行逆向工程。也许它正在向服务发出 ajax 请求，将数据作为 json 传递。使用您的浏览器开发人员工具/网络选项卡查看发生了什么。

# email - email alert in workflow - sender's name in salutation in sent mail instead of recipient

> ID：12295837
> 
> 赞同：0
> 
> 时间：2012-09-06T08:20:10.560
> 
> 标签：email, workflow, salesforce, alert, visualforce

I have setup a custome object (Test WF) with default "Owner" and custom "Status" field. My aim is to trigger mail whenever "status" field is "Assigned", hence setup workflow rule with rule "Test WF: Status equals Assigned" and included email alert in immediate action on workflow. Below is the visualforce email template I am using.

```
<messaging:emailTemplate subject="WF EMail Test" recipientType="User" relatedToType="Test_WF__c">
<messaging:plainTextEmailBody >

Dear {!recipient.Name},

</messaging:plainTextEmailBody>
</messaging:emailTemplate> 
```

Now if a user "Person 1" is creating the "Test WF" record, owner will be set to "Person 1". After this if "Person 2" will change the status field to "Assigned", an email will be triggered to "Person 1" like below.

Dear Person 2,

"Person 1" is getting this email containing text "Dear Person 2". Please note "to" and "from" email addresses are correct. I am facing issue here, why I am getting "Person 2" in the solutation even though it is sent to "Person 1" from "Person 2"?

Please help!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:57:16.690

开始创建一个新的（纯文本）电子邮件模板，然后使用合并字段下拉菜单。

```
"Sending User fields" -> {!User.Name} etc.
"Receiving User fields" -> {!Receiving_User.Name} 
```

您应该也可以在 VF 电子邮件模板中使用这些，而不仅仅是纯文本/html/信头邮件模板。

当您在审批过程中使用电子邮件时会更有趣，您可以使用 {!ApprovalRequest.Process_Assignee} 等；）

在部署之前进行试验并确保它按预期工作。不匹配的合并字段将只是空白。

# java - 洗牌一个排序的数组

> ID：12295838
> 
> 赞同：7
> 
> 时间：2012-09-06T08:20:21.563
> 
> 标签：java, random, complexity-theory, big-o

如果给定一个已排序的数组，我们可以使用什么算法来创建一个输出数组，该数组与已排序的数组具有相同的元素，但元素应该是随机打乱的。我正在寻找一种复杂度为 O(n) 的算法

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T08:21:37.163

`Collections.shuffle(List)`有`O(n)`时间复杂度。您可以使用`Arrays.asList()`来包装数组，以便您可以使用此函数。

它的作用是；

对于从最后一个元素到第二个元素的每个元素，将该元素与列表的其余部分（包括其自身）中的一个随机元素交换，即它不能随机移动一个元素。

```
for (int i=size; i>1; i--)
    swap(list, i-1, rnd.nextInt(i)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T08:22:25.300

你可以使用这个代码

```
 // Create a list
    List list = new ArrayList();
    // Add elements to list
    // Shuffle the elements in the list
    Collections.shuffle(list);
    // Create an array
    String[] array = new String[] { "a", "b", "c" };
    // Shuffle the elements in the array
    Collections.shuffle(Arrays.asList(array));

    for (int i = 0; i < array.length; i++) {
        System.out.println("Count is: " + i + " letter is " + array[i]);
    } 
```

这将打印如下内容：

> 计数是：0个字母是b
> 
> 计数是：1 个字母是
> 
> 计数是：2个字母是c

来自[http://www.exampledepot.com/egs/java.util/coll_Shuffle.html](http://www.exampledepot.com/egs/java.util/coll_Shuffle.html)

# android - 如何使用图形 api 将可绘制文件夹中的图像发布到 facebook？

> ID：12295843
> 
> 赞同：0
> 
> 时间：2012-09-06T08:20:32.093
> 
> 标签：android, facebook, facebook-graph-api, bitmap

我想使用他们的图形 api 将图像发布到 facebook。但我的图像在可绘制文件夹中。至今：

```
public static void postToFacebook() {

    Bundle params = new Bundle();

    // shared with this
    params.putString("caption", activityContext.getString(R.string.app_name));
    // description of the program
    params.putString("description", "bla bla bla bla bla bla"); 
    // header of the description
    params.putString("name", "train");
    // callback url
    params.putString("link","http://www.google.com.tr");
    // put a personal message
    params.putString("message", "my message");
    // to put a photo
    params.putByteArray("picture", getImageAsData());

    try {
        String response = FacebookUtility.mFacebook.request("/me/feed",
                params, "POST");
        if (response == null || response.equals("")
                || response.equals("false"))
            Toast.makeText(activityContext, "Error.",
                    Toast.LENGTH_SHORT).show();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

public static byte[] getImageAsData() {

Drawable d = activityContext.getResources().getDrawable(R.drawable.icon);
Bitmap bitmap = ((BitmapDrawable) d).getBitmap();
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
    byte[] bitmapdata = stream.toByteArray();
    return bitmapdata;
} 
```

但这不起作用......它没有发布我的图标，但它从网站获取谷歌图标。我尝试注释掉链接部分，但这次它除了消息之外没有发送任何内容。

我也尝试将位图作为：

```
Bitmap bitmap = BitmapFactory.decodeResource(activityContext.getResources(), R.drawable.icon); 
```

但这也没有成功。

我见过：

```
Bitmap bi = BitmapFactory.decodeFile(pathonsdcard); 
```

但是我不能用这个方法来获取位图，因为我没有pathonsdcard？

有什么建议吗？那么如何发布位于 res/drawable 文件夹中的图像？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:52:53.400

这是从可绘制对象上传照片的正确方法。请注意，您需要的唯一参数是“照片”和“标题”。

```
Bundle params = new Bundle();
params.putByteArray("photo", getImageAsData());
params.putString("caption", "Test caption lololol");
mAsyncRunner.request("me/photos", params, "POST", new PhotoUploadListener(), null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:39:04.750

```
Bundle b=new Bundle();
b.putString("Picture","// Byte array value of ur image");

facebook.request("username/photos",b,"POST"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T03:51:47.983

而不是使用 BitmapDrawable，您可以直接将图像从 drawable 获取到位图，然后将其转换为 bytearray。有时 bitmapdrawable 会导致意外问题。

```
Bitmap bitmap = BitmapFactory.decodeResource(ctx.getResources(),
R.drawable.image);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);
byte[] bitMapData = stream.toByteArray(); 
```

现在用这个来发帖——

```
parameters.putByteArray("picture", bitMapData);
mAsyncFbRunner.request("me/feed", params, "POST", new WallPostListener()); 
```

# cocoa - 保持 NSScrollView 固定

> ID：12295849
> 
> 赞同：1
> 
> 时间：2012-09-06T08:20:56.767
> 
> 标签：cocoa, nstableview, nsscrollview

我在 NSScrollView 中有一个 NSTableView。NSTableView 的内容是通过绑定到绑定到 CoreData ManagedObjectContext 的 NSArrayController 来提供的。NSTableView 的新行只是添加到并且永远不会删除或重新排序。

我想将 NSTableView（或分别将 NSScrollView）固定在底部，以便添加到表中的新行立即可见。此外，这只会发生在 NSTableView 滚动到底部而不是当用户向上滚动以查看其他行时。

我目前正在使用以下代码

```
- (void)tableView:(NSTableView *)tableView didAddRowView:(NSTableRowView *)rowView forRow:(NSInteger)row {
    NSInteger numberOfRows = [tableView numberOfRows];
    NSLog(@"row: %lu, %lu numberOfRows ", row, numberOfRows);
    if (row == numberOfRows-1) {
        [tableView scrollRowToVisible:numberOfRows - 1];
    }
} 
```

到目前为止，这有效，但仅在窗口处于活动状态时。当窗口处于非活动状态时，不会调用 didAddRowView 方法，直到窗口再次变为活动状态。因此 NSTableView 不会立即向下滚动。由于 NSTableView 也通过 CoreData 绑定填充，我不知道在插入新项目后我可以手动触发滚动的任何一点。此外，didAddRowView 委托方法经常被调用（例如手动滚动表格时），并且只有在插入新项目后才真正需要向下滚动，这使得解决方案更加不优雅。

当应用程序处于活动状态和非活动状态时，我是否可以直接挂接到插入过程或 NSScrollView 向下滚动到底部？

**编辑：** 为了完成或者如果@rdelmar 的解决方案对你不起作用，我已经将有问题的 NSTableView 子类化并在 reloadData 方法中实现了这个

```
- (void) reloadData {
    [super reloadData];
    NSInteger numberOfRows = [self numberOfRows];
    NSRange rowsInRect = [self rowsInRect:self.superview.bounds];
    NSInteger lastVisibleRow = rowsInRect.location + rowsInRect.length;

    if (lastVisibleRow == numberOfRows-1) {
        [self scrollRowToVisible:numberOfRows - 1];
    }
} 
```

一旦在 ArrayController 中接收到新项目并应将其添加到表中，就会调用 reloadData 方法。在调用超类的 reloadData 之后，这会检查 TableView 是否滚动到底部（TableView 的最后一行是在 superview 中可见的最后一行 - 因此是周围的 NSScrollView）。如果是这样，它会向下滚动。如果没有，用户可能会向上滚动以查看表格的某些内容，并且不希望它自动向下滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:23:13.337

我认为你应该能够使用 NSManagedObjectContext 通知，NSManagedObjectContextObjectsDidChangeNotification。创建一个自定义 NSTableView 类并为该通知添加一个观察者：

@implementation 自定义表

```
-(void)awakeFromNib {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(scrollTable:) name:NSManagedObjectContextObjectsDidChangeNotification object:nil];
}

-(void)scrollTable:(NSNotification *) aNote {
    if ([[aNote.userInfo allKeys] containsObject:@"inserted"]) {
        [self scrollRowToVisible:self.numberOfRows -1];
    }else{
        NSLog(@"It was not an insertion");
    }
} 
```

# macos - silverlight 5 out of browser 应用程序能否在Windows XP上运行以及类似的疑惑

> ID：12295850
> 
> 赞同：0
> 
> 时间：2012-09-06T08:21:00.320
> 
> 标签：macos, silverlight-5.0, .net-4.5, silverlight-oob, out-of-browser

1.  基于 Silverlight 5 构建的 OOB 应用程序是否可以在 Windows XP 机器上运行？我读过 .NET 4.5 应用程序在 Vista 之前的 Windows 操作系统上无法运行，因此考虑到 Silverlight 5 是最近发布的版本，只是想知道这些应用程序是否可以在 XP 机器上运行。

2.  Silverlight OOB 应用程序能否在 Mac OS-es 上运行而无需任何额外安装？或者它根本运行？

3.  如果它们可以在 Mac OS 上运行，是否可以在 Mac OS（或它们的 Mac 等价物）上获取 OS 特定的值，如通用应用程序数据路径、临时路径等？我需要将某些文件存储在这些路径中。或者，考虑到它必须是跨平台的，Silverlight 是否无法获得特殊文件夹？

4.  打算在桌面（浏览器或无浏览器）上运行的 Silverlight 应用程序是否也可以在 WP7/WP8 手机上运行？

我已经阅读了一些关于 Silverlight 入门的内容，但找不到这些特定问题的答案。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:30:02.393

Silverlight 5 完全独立于 .NET 4.5。事实上，Silverlight 使用与 WPF 不同的更轻量级的 .NET 框架。它共享许多相同的语法，但独立实现，因此它可以是独立的。

这是一个完全独立的下载，可以在 Windows XP 上运行。

除了安装基于浏览器的应用程序所需的通常 Silverlight 运行时之外，您无需安装任何其他东西即可用完浏览器应用程序。

Silverlight 使用独立存储来存储本地数据。出于安全原因，对主机的访问受到限制。隔离存储在内部处理，在 Windows 和 OSX 上的工作方式应该相同。

正如 jv42 所指出的，在 Silverlight 上为浏览器（和 OOB）编写的应用程序不能直接在 WP 或 Xbox 上运行，它们使用特殊版本的 Silverlight。

# java - Hibernate 不填充计算的属性

> ID：12295868
> 
> 赞同：1
> 
> 时间：2012-09-06T08:22:18.733
> 
> 标签：java, hibernate, postgresql

我在我的`@Formula`一个实体上创建了一个带有注释的计算属性：

```
@Entity
@Table(name="PERSON")
public class Person {

    @Searchable(name = "First name")
    private String firstName;

    @Column(name = "FIRST_NAME", nullable=false)
    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    @Searchable(name = "Last name")
    private String lastName;

    @Column(name = "LAST_NAME", nullable=false)
    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    @Formula("FIRST_NAME || ' ' || LAST_NAME")
    private String loFstLstName;

    public String getLoFstLstName() {
        return this.loFstLstName;
    }

    public void setLoFstLstName(String loFstLstName) {
        this.loFstLstName = loFstLstName;
    }
} 
```

问题是我`persons`在以下代码中的列表中只有空值：

```
Query q = entityManager.createQuery("SELECT loFstLstName FROM Person");
List persons = q.getResultList(); 
```

`PERSON``FIRST_NAME`表包含在和`LAST_NAME`字段中具有不同于 null 的值的记录。我将 Hibernate 3.3 与 PostgreSQL 8.4.9 一起使用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:40:16.797

您不应该在同一实体内混合不同的访问类型（即在属性和字段上放置注释）（除非您使用 明确配置它`@Access`）。尝试以下操作：

```
@Formula("FIRST_NAME || ' ' || LAST_NAME") 
public String getLoFstLstName() {
    return this.loFstLstName;
} 
```

# jquery - jQuery动画级联

> ID：12295869
> 
> 赞同：3
> 
> 时间：2012-09-06T08:22:20.300
> 
> 标签：jquery

您好我有一个 div 包含三个或更多 div 的网站。我的 div id (id="linguetta_next") 是动态的：我动态添加的不仅仅是其中的 div。我希望进入主 div（linguetta_next）的 div 以级联形式出现：第一个出现，最后第二个出现，最后第三个出现。

这是我的html：

```
<div id="linguetta_next">
                <div class="linguetta" id="linguetta_next1" style="margin-left:1%;">
                    <p class="tit_linguetta">azienda</p>
                </div>
                <div class="linguetta_small" id="linguetta_next2" style="margin-left:10%; margin-top:10px;">
                    <p class="tit_linguetta_small">staff</p>
                </div>
                <div class="linguetta_small" id="linguetta_next3" style="margin-left:10%; margin-top:10px;">
                    <p class="tit_linguetta_small">risorse umane</p>
                </div>
             </div> 
```

这个模式我试过了，但是这个模式同时出现，怎么才能做出级联效果呢？

```
function moveDiv(){
var menu2=$(".colCenter").find('#linguetta_next');
menu2.css('right',-300).css('position','absolute').css('z-index',1000);
menu2.animate({left:0}, 1000 );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T08:37:21.943

这是一种选择：

```
$("#linguetta_next div").each(function(i) {
    var el = $(this);
    setTimeout(function() {
        el.animate({
            left: 0
        }, 1000);
    }, i * 2000);
});​ 
```

**演示：http:** [//jsfiddle.net/5Pbwf/](http://jsfiddle.net/5Pbwf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:31:32.460

使用 jQuery 的动画效果[`.animate()`](http://api.jquery.com/animate/)，因为您需要一个回调来创建级联效果，只有在初始动画完成以及动画时间后才会调用回调（可选）；像：

```
$('#linguetta_next1').animate(function() {
    // do animation stuff
} , 1000, function() {
    // callback - effect to do after first is complete
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:40:56.063

如果可能，请使用 jquery 循环插件：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

它非常易于设置和使用。您可以在初学者演示中看到一个示例：

```
$('#linguetta_next').cycle({ 
    fx: 'scrollLeft' 
}); 
```

# javascript - Websql成功调用中按钮上的Jquery移动主题

> ID：12295870
> 
> 赞同：0
> 
> 时间：2012-09-06T08:22:20.760
> 
> 标签：javascript, html, jquery-mobile, web-sql

我是 jQuery 移动和 HTML5 的新手。我创建了一个对 WebSQL SQLite 存储进行简单 CRUD 操作的页面。它运作良好。

在页面上，我有插入和显示信息的按钮（使用 jQuery 移动）..在这个按钮上它正确显示 jQuery 移动主题按钮和文本框。但是在成功回调 Javascript 中，当我渲染文本框和按钮时，它会像普通的 HTML 文本框和按钮一样显示。

以下是我的代码片段。

**HTML：**

```
<div id='riderResults'></div>
<a href="javascript:void(0);" data-role="button" data-inline="true" data-mini="true" data-theme="b" onClick="displayRider()" name="display" id="display">Add Report</a> 
```

**Javascript：**

```
function displayRider(){
  db.transaction(function(tx) {
    tx.executeSql("select * from riders", [], function(tx, result) {
      riderdataset = result.rows;
      for (var i = 0, item = null; i < riderdataset.length; i++) {
        item = riderdataset.item(i);
        var output='';
        output+='<div>'
             +'<input type="text" value="'+item['riderName']+'" name="name'+i+' id="name'+i+'"/>&nbsp;'
             +'<a href="javascript:void(0);" data-role="button" data-inline="true" data-mini="true" data-theme="b" onClick="updateRider('+i+')" name="update_rider" id="update_rider">Update Rider</a>'
             +'</div>';
      }
      document.getElementById('riderResults').innerHTML=output;
    });
  });
} 
```

请任何人都可以在我错的地方给我正确的方向..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:16:05.227

我的建议是你去你的浏览器并检查一个由 jquery-mobile 创建的按钮的元素，然后你复制那个元素的标签并将它放在你的 var 输出中。因为 jquery-mobile 会根据您告诉它的数据角色自动向您的元素添加类。

标签应如下所示：

```
<a data-role="button" data-transition="none" data-theme="a" href="#id" data-corners="true" data-shadow="true" data-iconshadow="true" data-iconsize="18" data-wrapperels="span" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-icon-left ui-btn-up-a">
  <span class="ui-btn-inner ui-btn-corner-all">
    <span class="ui-btn-text">
      Button
    </span>
    <span class="ui-icon ui-icon-tab ui-icon-shadow ui-iconsize-18">
      &nbsp;
    </span>
  </span>
</a> 
```

# redirect - Magento：在 CMS 页面中获取会话值？

> ID：12295871
> 
> 赞同：0
> 
> 时间：2012-09-06T08:22:22.337
> 
> 标签：redirect, magento-1.4

我有一个重定向到静态 CMS 页面的控制器。在该页面中，我想显示一个字符串，但前提是来自控制器的重定向发生。所以我的计划是在控制器中设置一个会话值并将其显示在 CMS 页面中。怎么可能呢？

有没有另一种方法来解决这个问题？这就是我在控制器中进行重定向的方式：

```
$this->_redirect('advice/something'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:26:45.717

您可以为您的模块创建一个块，它只是回显会话变量，然后使用

```
{{block type="yourmodule/blockname" name="sessionvariable"}} 
```

在您的 CMS 页面的内容中。这就是我能想到的一切！

# xpages - 如何根据 XPages 中的分类列值进行选择？

> ID：12295878
> 
> 赞同：0
> 
> 时间：2012-09-06T08:22:35.007
> 
> 标签：xpages

这是我的情况：

![在此处输入图像描述](../Images/682368dd30e825144ab3df7922e23cc0.png)

分类列是“部门”。我有什么办法只能通过“软件”来选择吗？为 viewColumn 和 viewColumnHeader 启用复选框似乎没有帮助。我需要在该列中的每个值旁边有一个复选框，选中该复选框时，仅选择该部门的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:51:54.687

我认为在 ViewPanel 中满足您的需求将很困难，如果不是不可能的话。

您可以做的是在 ViewPanel 上方添加一个组合框，该组合框填充有指向视图的分类列的 DbColumn。然后，当单击它时，您的视图将过滤该值。

1.  如上所述添加您的组合框

2.  将 onChange 事件添加到组合框，以使用组合框值设置 viewScope var（例如 viewScope.category）。设置以 ViewPanel 为目标的部分刷新。

    ```
    <xp:comboBox id="comboBox1">
    <xp:selectItems>
        <xp:this.value><![CDATA[#{javascript:@Unique(@DbColumn(@DbName(),"Admin",1))}]]></xp:this.value>
    </xp:selectItems>
    <xp:eventHandler event="onchange" submit="true"
        refreshMode="partial" refreshId="viewPanel1">
        <xp:this.action><![CDATA[#{javascript:viewScope.category = getComponent("comboBox1").getValue();}]]></xp:this.action>
    </xp:eventHandler> 
    ```

3.  最后，在 ViewPanel 属性中，将其设置为按类别名称过滤并将值计算为您的 viewScope.category 值。

现在，当您单击组合框并选择一个值时，您的视图将过滤该值。

# c# - 从标准 CultureInfo 中获取所有区域 CultureInfo

> ID：12295879
> 
> 赞同：4
> 
> 时间：2012-09-06T08:22:36.360
> 
> 标签：c#, cultureinfo

我是 C# 的新手。我想要的是以下内容：

我有两个组合框：

*   在第一个中，我拥有所有标准语言（en，de，fr，...）
*   在第二个中，我想从第一个组合框中选择的语言中获取区域语言（如果我选择“en”，那么应该列出“en-US”，“en-GB”，...）

任何人都可以帮助我吗？:D

格力兹阿里昂

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T08:27:06.163

你可以使用这个：

```
var parent = CultureInfo.GetCultureInfo(selectedLanguage);
var regionalLanguages = CultureInfo.GetCultures(CultureTypes.AllCultures)
                                   .Where(x => x.Parent.Equals(parent)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:34:03.083

可能有更简单的方法，但这有效：

1.  创建一个`Dictionary<CultureInfo, HashSet<CultureInfo>>`将中立文化映射到特定国家/地区的文化。
2.  调用[CultureInfo.GetCultures()](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures)以获取所有已安装的文化。
3.  对于每个 CultureInfo 返回的调用[IsNeutral](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.isneutralculture.aspx)以查看它是否是中性文化。如果是这样，请将其添加到字典中，并将空哈希集作为值。如果不是，请调用[CultureInfo.Parent](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.parent)直到您获得中性文化，然后将中性文化作为键并将国家/地区特定文化添加到 HashSet。

请注意，某些国家/地区中立文化似乎是特定于国家/地区的，例如 zh-Hans（简体中文）和 zh-Hant（繁体中文）。您还将获得一些传统文化，例如 zh-CHS 和 zh-CHT（又是简体中文和繁体中文）也可能会获得一些带有变音符号的文化。

# uiview - 如何在 UIScrollView 中使用 viewForZoomingInScrollView 和简化的假视图？

> ID：12295881
> 
> 赞同：3
> 
> 时间：2012-09-06T08:22:43.560
> 
> 标签：uiview, uiscrollview, uiscrollviewdelegate

我浏览了整个互联网，但找不到 viewForZoomingInScrollView 返回用于缩放的简化假视图的示例。

我要问的原因是，当用 3072x4096 像素缩小我巨大的视网膜大小的 UIImageView 时，缩放会结结巴巴。

viewForZoomingInScrollView 中返回的视图需要如何调整大小和定位？它是否需要在 UIScrollView 内？我需要从 UIScrollView 中删除真实视图吗？我现在玩不同的东西但失败了。

或者这实际上不是使用它的预期方式？

谢谢你。

更多背景知识：我在 UIImageView 中使用了多个子层，但是在缩放时只有一个应该可见。另外，我尝试在缩放时设置 shouldRasterize，但这没有帮助（如果有的话）。

# php - 如何在 PHP 中使用 DOMNode 计算数组

> ID：12295885
> 
> 赞同：1
> 
> 时间：2012-09-06T08:22:56.727
> 
> 标签：php, arrays, count

我在计算包含来自 html 页面的 DOMnode 的以下数组 $nodes 时遇到问题：

```
@$dom_object = new DOMDocument();    
@$dom_object->loadHTML($content);
$xPath = new DOMXPath($dom_object);
$nodes = $xPath->query('//div[@class="giaeffettuate"]');

count($nodes); // returns 1
count((array) $nodes); // returns 0 
```

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:23:44.797

只需使用[`length`](http://php.net/manual/en/class.domnodelist.php#domnodelist.props.length)属性：

```
echo $nodes->length; 
```

# objective-c - 在objective-c中从文本文件中读取

> ID：12295887
> 
> 赞同：3
> 
> 时间：2012-09-06T08:22:58.297
> 
> 标签：objective-c, ios, cocoa-touch

我有一个由多个单词组成的文本文件。它们都由新行分隔。

我试过的：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"txt"];

if (filePath) { // This does trigger, so the file is actually found.

    NSArray *arr = [filePath componentsSeparatedByString:@"\n"]; 

} 
```

我也尝试过：

```
NSMutableArray * lines = [[NSMutableArray alloc] initWithArray:[filePath componentsSeparatedByString:@"\n"] copyItems: YES]; 
```

这些似乎都不起作用，因为我似乎只在使用 NSLog 读出行时才获得文件路径。你们中的任何人都可以帮忙吗？

行数组似乎只包含一个对象，即文本文件位置的字符串。

我想要一个数组，其中每个字符串都是由纺织品中的一条线分隔的字符串。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T08:27:19.047

首先，您需要在应用程序包中获取文件。这意味着，您必须将它放在应用程序的“资源”文件夹中。

然后你可以这样读：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"filename" 
                                                 ofType:@"txt"]; 
```

然后将内容加载到 a`NSString`中就更容易了：

```
NSString* content = [NSString stringWithContentsOfFile:path
                                              encoding:NSUTF8StringEncoding
                                                 error:NULL]; 
```

然后创建数组：

```
NSArray *arr = [content componentsSeparatedByString:@"\n"]; //might also be @"\r" check both. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:24:24.987

你所做的一切都是在破解文件路径——你还没有从文件中加载任何数据。

有很多方法可以做到。 `[NSData initWithContentsOfURL...`可能是一个开始

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T08:31:27.500

方法 [NSString componentsSeparatedByString:] 用于字符串本身，在您的情况下是文件路径，而不是该路径中文件的内容。

有很多方法可以从文件中读取。Dave DeLong 为这个问题发布了一个聪明的方法。[在这里](https://stackoverflow.com/questions/3707427#3711079)检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-04T15:10:14.683

NSString *stringFileContent = [NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"yourfilename" ofType:@"txt"] encoding:NSUTF8StringEncoding error:&error];

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-28T14:50:20.077

您的错误是您混淆了路径 - 一个字符串仅告诉您文件系统中的文件在哪里（在这种情况下，在您的应用程序包中的某个位置）和实际文件 - 及其内容，这是不同的东西。

您没有将文件的内容分成几行，而是破坏了指向该文件的 PATH。

所以，一个更好的实现会像你一样开始：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"txt"]; 
```

但继续将文件内容读入单个字符串：

```
NSString *fileContents = [NSString stringWithContentsOfFile:filePath]; 
```

然后才尝试使用所有官方换行符将文件内容分成单独的字符串，每个字符串包含一行文本。

```
NSArray *textLines = [fileContents componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

当然，最好在每个阶段检查前一个阶段是否成功。

# java - 如何使用 ArgumentCaptor 进行存根？

> ID：12295891
> 
> 赞同：165
> 
> 时间：2012-09-06T08:23:30.073
> 
> 标签：java, unit-testing, junit, mockito

在 Mockito[文档](https://static.javadoc.io/org.mockito/mockito-core/2.2.22/org/mockito/Mockito.html#21)和[javadocs](https://static.javadoc.io/org.mockito/mockito-core/2.2.22/org/mockito/ArgumentCaptor.html)中它说

> 建议使用 ArgumentCaptor 进行验证，但不要使用存根。

但我不明白 ArgumentCaptor 如何用于存根。有人可以解释上述声明并展示如何将 ArgumentCaptor 用于存根或提供一个链接来展示它是如何完成的吗？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2012-09-06T08:49:46.690

假设采用以下方法进行测试：

```
public boolean doSomething(SomeClass arg); 
```

Mockito 文档说你不应该**以**这种方式使用 captor：

```
when(someObject.doSomething(argumentCaptor.capture())).thenReturn(true);
assertThat(argumentCaptor.getValue(), equalTo(expected)); 
```

因为您可以在存根期间只使用匹配器：

```
when(someObject.doSomething(eq(expected))).thenReturn(true); 
```

但验证是另一回事。如果您的测试需要确保使用特定参数调用此方法，请使用`ArgumentCaptor`它是为这种情况设计的：

```
ArgumentCaptor<SomeClass> argumentCaptor = ArgumentCaptor.forClass(SomeClass.class);
verify(someObject).doSomething(argumentCaptor.capture());
assertThat(argumentCaptor.getValue(), equalTo(expected)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-26T17:01:34.673

假设地，如果搜索让您找到了这个问题，那么您可能想要这个：

```
doReturn(someReturn).when(someObject).doSomething(argThat(argument -> argument.getName().equals("Bob"))); 
```

为什么？因为像我一样，您重视时间，而且您不会`.equals`仅仅为了单个测试场景而实施。

并且 99% 的测试会因 Mock 返回 null 而崩溃，在合理的设计中，您将`null`不惜一切代价避免返回，使用`Optional`或迁移到 Kotlin。这意味着`verify`不需要经常使用，而且 ArgumentCaptors 写起来太乏味了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-01T10:59:11.680

线

```
when(someObject.doSomething(argumentCaptor.capture())).thenReturn(true); 
```

会做同样的事情

```
when(someObject.doSomething(Matchers.any())).thenReturn(true); 
```

因此，当存根没有附加值时使用 argumentCaptor.capture()。使用 Matchers.any() 可以更好地显示实际发生的情况，因此更好的可读性。使用 argumentCaptor.capture()，您无法读取真正匹配的参数。当您有更多信息（预期参数的类）时，您可以使用更具体的匹配器来改进您的测试，而不是使用 any()。

还有一个问题：如果在存根时使用 argumentCaptor.capture()，则不清楚在验证后应该捕获多少个值。我们希望在验证期间捕获一个值，而不是在存根期间，因为此时还没有要捕获的值。那么参数捕获器在存根期间捕获方法捕获了什么？它捕获任何东西，因为还没有任何东西可以捕获。我认为这是未定义的行为，我不想使用未定义的行为。

# php - PHP电子商务、购物车

> ID：12295893
> 
> 赞同：0
> 
> 时间：2012-09-06T08:23:36.783
> 
> 标签：php, e-commerce, shopping-cart

我正在寻找有关如何创建电子商务网站表单草稿的教程，其中涵盖产品和类别列表、用户帐户、愿望清单、管理员区域，当然还有购物车等，例如*opencart*。我已经在互联网上搜索了很多次，但我对我发现的内容并不满意。如果有人知道任何用足够的细节和图像解释的好的书面文章，或者甚至更好的任何好的视频教程，请告诉我。

ps如果可能的话没有OOP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:38:56.267

假设为**初学者**水平。本[教程](http://www.phpwebcommerce.com/)可以帮助您，它还教您购物车的管理面板。或者你甚至可以使用开源的东西，比如 Oscommerce、magento。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:30:56.150

两个主要商店是：Magento (http://www.magentocommerce.com/) 和 (http://www.prestashop.com/)。

最简单的是 prestashop，但 magento 更通用。

您可以根据自己的要求选择一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:39:13.647

我知道这不是一家真正的商店，但本教程是类似的 - [http://net.tutsplus.com/tutorials/php/how-to-create-a-phpmysql-powered-forum-from-scratch/](http://net.tutsplus.com/tutorials/php/how-to-create-a-phpmysql-powered-forum-from-scratch/)

以论坛为例，用户=店铺顾客，分类是一样的，帖子基本上就是店铺里的物品。您需要对允许的功能有一点创意，但本教程会介绍构建所有基本组件。对于结帐过程，PayPal 文档写得很好，并且相当清楚地遵循：

[https://cms.paypal.com/cms_content/en_US/files/developer/PP_OrderMgmt_IntegrationGuide.pdf](https://cms.paypal.com/cms_content/en_US/files/developer/PP_OrderMgmt_IntegrationGuide.pdf)

# iphone - 释放 CGColorSpaceRef 时 Iphone 应用程序崩溃

> ID：12295901
> 
> 赞同：3
> 
> 时间：2012-09-06T08:24:04.267
> 
> 标签：iphone, objective-c, xcode, color-space

我正在使用`CGColorSpaceRef`，当我释放它时，它会崩溃。我创建和发布的方式

```
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 
```

完成一些任务然后释放

```
CGColorSpaceRelease(colorSpace); 
```

编译器显示的错误是“断言失败：（！state->is_singleton），函数color_space_state_dealloc，文件ColorSpaces / CGColorSpace.c，第127行”当我没有释放色彩空间或只是将其设置为nil时会发生奇怪的事情，我不知道为什么会这样。请帮助我。提前致谢。度过快乐的一天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:25:45.793

看起来您已经过度释放了该`colorspace`对象。我刚刚运行了以下程序，并收到了您引用的错误消息。

```
int main(int argc, char *argv[]) {
    @autoreleasepool {
        CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();

        CGColorSpaceRelease(colorspace);
        CGColorSpaceRelease(colorspace);
    }
} 
```

这`SIGABRT`有以下错误：

```
Assertion failed: (!state->is_singleton), function color_space_state_dealloc, file ColorSpaces/CGColorSpace.c, line 127. 
```

如果我只`CGColorSpaceRelease`在程序编译并运行时没有错误时调用。

The static analyser (Shift-Cmd-B) may well be able to show you were you've gone wrong. It certainly flags the above code with "Reference counted object is used after it is released" on the second `CGColorSpaceRelease` call.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T08:37:56.190

如果/有必要，您实际上负责保留和释放色彩空间！即，如果您需要，请保留它。不需要保留就不要释放！有关此主题的更多信息，请参阅文档：[Core Foundation 的内存管理编程指南](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)

**更新：**

关于我们的海报在上面遇到的有线错误，请查看 ddopsons 在[此处](https://stackoverflow.com/a/9273291/1126955)发布的内容。不幸的是，没有提供解决方案，而是一种可能的解决方法。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-06T08:30:31.900

您正在尝试释放一个常量值。不能那样做

# c# - 在关闭子窗体时显示隐藏的所有者窗体的奇怪行为

> ID：12295905
> 
> 赞同：1
> 
> 时间：2012-09-06T08:24:17.360
> 
> 标签：c#, winforms, desktop-application, show-hide, formclosing

**简介：**代码（两个函数）解释了我正在尝试做的所有事情并告诉我的问题

每当我必须在我的应用程序中打开一个新的子表单时。我用来调用以下函数。（一个子窗体可以有另一个子窗体）

```
 public void openNextForm(Form f1, Form f2)
    {
        f2.Owner = f1;                  
        f2.WindowState = FormWindowState.Maximized;
        f2.FormClosing += new FormClosingEventHandler(f_FormClosing);
        f1.Hide();
        f2.ShowDialog();
    }

    // When I close a child form by clicking cross or with ALT-F4
    void f_FormClosing(object sender, FormClosingEventArgs e)
    {
        Form f = sender as Form;
        f.Owner.Show();
    } 
```

在关闭子表单时，我用来显示所有者/父表单。它工作正常。

但在某些情况下，所有者表单的某些控件（按钮）在关闭子表单上显示时会被隐藏，例如

![在此处输入图像描述](../Images/ca6d43442adac846f16e68f1ff89419e.png)

但这种形式的实际状态是![在此处输入图像描述](../Images/a9c83860b99c0d14c1921851f718fd37.png)

只有当我**从一个复杂而冗长的编码子表单返回**时，我才必须面对这种行为（在这种情况下，它有时可以正常工作）。在简单（小编码）子表单的情况下，行为是正常的。

**如果我在奇怪的行为表单上按 alt 键，则 from 在实际状态下令人惊讶地显示**

我试图寻找这个问题并发现了很多类似的问题，但我能看到的最接近的是以下问题，但在 showdialog 的情况下它仍然无法帮助我

[C#表单问题：新表单失去控制并随机隐藏](https://stackoverflow.com/questions/1739030/c-sharp-form-problem-new-form-losing-control-and-randomly-hiding)

如果使用上面链接中的以下代码，每当我打开一个子表单然后再打开一个子表单时。所有表格都被隐藏。所以它也不能正常工作。

```
 public void openNextForm(Form f1, Form f2)
    {
        f2.Owner = f1;            
        f2.Show();
        f1.Hide();
        f2.FormClosing += new FormClosingEventHandler(f_FormClosing);
    } 
```

使用标签应该是一种解决方案，但我想在关闭/隐藏/显示期间在所有情况下保持表单分离和一致的行为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T20:33:16.647

不确定它是否能解决问题，但我看到可以进行一些改进，这可能会奏效。

请注意，无法验证它是否有效。

```
public void openNextForm(Form f1, Form f2)
    {
        // we don't need ownership since f1 is hidden.                
        // f2.Owner = f1; 
        f2.WindowState = FormWindowState.Maximized;
        // we don't need this event handled since we use ShowDialog
        //f2.FormClosing += new FormClosingEventHandler(f_FormClosing);
        // The following should hide f1 after f2 is displayed even when using dialog
        f2.Shown += (s, e) => {
            f1.Hide();
        };
        f2.ShowDialog();
        f1.Show();
    } 
```

# xcode - what are acceleration.x ,acceleration.y in didaccelerate delegate method

> ID：12295909
> 
> 赞同：0
> 
> 时间：2012-09-06T08:24:30.133
> 
> 标签：xcode

I have a doubt regarding the UIAccelerometer.

1.  What is the units of acceleration.x?
2.  How can I calculate the Velocity using UIAccelerometer?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:53:06.400

1.  单位为1g = 9.81m/s^2，例如地球重力场的加速度。

2.  加速度是速度的变化。只有知道 t0 时刻的速度，才能得到 t1 时刻的速度。然后

v(t1) = v(t0) + (a(t1) - g) * (t1-t0)

，假设 t1 和 t0 是两次连续测量的时间。这里 v 是速度矢量，a 是加速度矢量，g 是重力矢量。

然而，iOS 设备中的加速度计有很多噪音，并不特别适合跟踪速度（或位置）。对于大范围的距离，您有 GPS。对于小距离，没有可靠的方法。

最好的，彼得。

# c - 无服务器访问的套接字连接

> ID：12295913
> 
> 赞同：0
> 
> 时间：2012-09-06T08:24:52.997
> 
> 标签：c, sockets

如果我有一个服务器套接字应用程序，基本上将启动一个套接字连接......从套接字开始，监听并接受流。另一方面，我有一个启动 init 的客户端应用程序。插座，连接等。服务器和客户端应用程序要么在两台不同的机器上进行通信，要么在一台机器上进行通信。

假设我们有 2 台机器，如果我只能访问客户端，是否可以启动套接字连接？（这意味着我可以在客户端编写套接字应用程序，但由于无法访问，我无法在服务器端构建应用程序。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:22:37.547

如果您的意思是客户端应用程序可以在第二台机器上创建新的服务器套接字，那么答案是否定的。

# ruby-on-rails - Rails HAML conditional link_to

> ID：12295914
> 
> 赞同：2
> 
> 时间：2012-09-06T08:24:59.043
> 
> 标签：ruby-on-rails, ruby, haml, dry

Good day, i have this kind of code:

```
= link_to some_url do
  PLENTY OF MARKUP HERE 
```

Now i need to make this link optional, so if condition is not met i need plain MARKUP to be printed, so first anti-DRY solution:

```
- if condition
  = link_to some_url do
    PLENTY OF MARKUP HERE
-else
  PLENTY OF MARKUP HERE REPEATED :( 
```

Another solution if to put `PLENTY OF MARKUP` into partial, so i winder if where is another simple solution without partial ? I tried this one:

```
= link_to_if condition?, some_url do
  PLENTY OF MARKUP HERE 
```

but unfortunately `link_to_if` does not work as expected here.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:46:13.050

`link_to_if`与 .相比，将块用于不同的目的`link_to`。所以它不能做你想做的事。

你可以定义自己的助手来做你想做的事。

如果您只需要这样做几次，而不是使用自定义帮助程序，您可以将块的结果 (the `PLENTY OF MARKUP`) 保存到局部变量中，以便您轻松重复使用它。例如：

```
- plentyofmarkup = do
  PLENTY OF MARKUP HERE

- if condition
  = link_to (raw plentyofmarkup), some_url
- else
  = raw plentyofmarkup 
```

或者：

```
= link_to_if condition, (raw plentyofmarkup), some_url 
```

请注意，该`raw`函数用于阻止 Rails 自动转义字符串。

要定义您自己的辅助方法，请尝试：

```
def link_to_if_do condition, options = {}, html_options = {}
  blockresult = yield
  link_to_if condition, blockresult, options, html_options
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:45:32.210

您总是可以编写自己的条件链接帮助器，并将其放在 application_helper 中：

```
def conditional_link_to( condition, url, options = {}, html_options = {}, &block ) do
  if condition
    link_to(name, options, html_options, &block)
  else
    if block_given?
      block.arity <= 1 ? capture(name, &block) : capture(name, options, html_options, &block)
    else
      name
    end
  end
end 
```

这主要取自[link_to_unless](http://apidock.com/rails/v3.2.8/ActionView/Helpers/UrlHelper/link_to_unless)，但经过修改以将块传递给 link_to。我没有测试过这个，但它应该足以给你一个想法。:)

# xml - xml xslt 位置限制显示数量

> ID：12295915
> 
> 赞同：1
> 
> 时间：2012-09-06T08:25:02.143
> 
> 标签：xml, xslt

我正在学习 XML 和 XSLT，我有两部分代码，一个是 XML，另一个是 XSLT，

这是我的 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="xslt.xslt"?>
<groups>
    <elements>
        <name>//1</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//2</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//3</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-07-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//4</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2009-01-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//5</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2009-02-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//6</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2008-06-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//7</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-01-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//8</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-05-14</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//9</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-05-28</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//10</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-02-25</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//11</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-12-20</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//12</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-11-07</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//13</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-07-09</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//14</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2005-10-19</PostDate>
        <trackno></trackno>
    </elements>
</groups> 
```

这是我的 XSLT 代码

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">

  <html>
  <body>
    <h2>Try to display only 9 or 12</h2>
      <xsl:for-each select="/groups/elements">
       <xsl:sort select="PostDate" order="descending"/>
        <b><xsl:value-of select="PostDate" /></b> - 
        <font color='red'><xsl:value-of select="name" /></font>

        <p></p>
      </xsl:for-each>

  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

我的问题是如何将项目编号限制为仅显示 12 个并使它们显示在页面上 3 个项目或每行 4 个项目？

我发现有人使用位置，只是不知道要达到哪个位置来限制数字并制作行？

您可以在此处复制并粘贴我的代码以查看输出[http://markbucayan.appspot.com/xslt/index.html](http://markbucayan.appspot.com/xslt/index.html)

非常感谢任何建议和解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:37:11.757

已经解决了数量限制问题，添加了大于或小于标记，仍然不知道如何使行只显示3项或一行4次

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/">

      <html>
      <body>
        <h2>Try to display only 9 or 12</h2>
          <xsl:for-each select="/groups/elements">
            <xsl:sort select="PostDate" order="descending"/>
            <xsl:if test="not(position() > 10)">
            <b><xsl:value-of select="PostDate" /></b> - 
            <font color='red'><xsl:value-of select="name" /></font>
           <p></p>
           </xsl:if>
          </xsl:for-each>

      </body>
      </html>
    </xsl:template>

    </xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:09:26.170

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:variable name="vrtfPass1">
      <xsl:for-each select="/*/elements">
        <xsl:sort select="PostDate" order="descending"/>

        <xsl:if test="not(position() > 10)">
          <item>
            <xsl:copy-of select="PostDate|name"/>
          </item>
        </xsl:if>
      </xsl:for-each>
  </xsl:variable>

   <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
   </xsl:template>

    <xsl:template match="/*">
      <table border="1">
        <xsl:apply-templates mode="pass2" select="ext:node-set($vrtfPass1)/*"/>
      </table>
    </xsl:template>

    <xsl:template mode="pass2" match="item[position() mod 3 =1]">
      <tr>
        <xsl:apply-templates mode="inRow" select=
        ".|following-sibling::*[not(position() >2)]"/>
      </tr>
    </xsl:template>

    <xsl:template match="item" mode="inRow">
      <td>
       <b><xsl:value-of select="PostDate" /></b> -
       <font color='red'><xsl:value-of select="name" /></font>
      </td>
    </xsl:template>

    <xsl:template match="item" mode="pass2"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<groups>
    <elements>
        <name>//1</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//2</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-03-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//3</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-07-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//4</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2009-01-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//5</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2009-02-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//6</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2008-06-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//7</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-01-04</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//8</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-05-14</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//9</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2012-05-28</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//10</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-02-25</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//11</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-12-20</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//12</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-11-07</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//13</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2011-07-09</PostDate>
        <trackno></trackno>
    </elements>
    <elements>
        <name>//14</name>
        <BOD></BOD>
        <description/>
        <URL></URL>
        <Hobbbies>
            <Sport></Sport>
            <Music></Music>
        </Hobbbies>
        <Height></Height>
        <PostDate>2005-10-19</PostDate>
        <trackno></trackno>
    </elements>
</groups> 
```

**产生想要的（10 个最新项目，每行 3 个项目），正确的结果：**

```
<table border="1">
   <tr>
      <td>
         <b>2012-07-04</b> -
       <font color="red">//3</font>
      </td>
      <td>
         <b>2012-05-28</b> -
       <font color="red">//9</font>
      </td>
      <td>
         <b>2012-05-14</b> -
       <font color="red">//8</font>
      </td>
   </tr>
   <tr>
      <td>
         <b>2012-03-04</b> -
       <font color="red">//1</font>
      </td>
      <td>
         <b>2012-01-04</b> -
       <font color="red">//7</font>
      </td>
      <td>
         <b>2011-12-20</b> -
       <font color="red">//11</font>
      </td>
   </tr>
   <tr>
      <td>
         <b>2011-11-07</b> -
       <font color="red">//12</font>
      </td>
      <td>
         <b>2011-07-09</b> -
       <font color="red">//13</font>
      </td>
      <td>
         <b>2011-03-04</b> -
       <font color="red">//2</font>
      </td>
   </tr>
   <tr>
      <td>
         <b>2011-02-25</b> -
       <font color="red">//10</font>
      </td>
   </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:43:44.013

请检查一下，我希望对你有用

```
<table>
<tr>
<td>
<xsl:if test="(position() mod $pagesize) = 0 and position() != 1">
</td><td>
</xsl:if>
</td>
<tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:03:30.550

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:output method="html" version="1.0" encoding="utf-8" indent="yes"  omit-xml-declaration="no"/>

  <xsl:param name="pagesize"/>

  <xsl:template match="/">
    <table>
      <tr>
        <xsl:apply-templates select="//groups/elements"/>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="//groups/elements">

    <td>
      <xsl:value-of select="name"/>
      <xsl:if test="(position() mod 3) = 0 and position() != 1">
        <xsl:text>&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;</xsl:text>
      </xsl:if>
    </td>

  </xsl:template>
</xsl:stylesheet> 
```

# android - iOS 和 Android 应用程序的最大大小

> ID：12295916
> 
> 赞同：2
> 
> 时间：2012-09-06T08:25:07.430
> 
> 标签：android, ios, upload, size, limit

iOS 应用程序的最大大小是多少？我听到了 1-2GB 的各种答案。这种大小的应用程序是否仍需要通过通常的 Xcode 方法上传？

在 Android 上，我相信有不同的设置。我读到您为您的应用程序申请了更多空间，并且它们以 2GB 的“块”形式出现？那是对的吗？申请这个空间并将这些庞大的应用程序上传到 Google Play 商店的故事是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T08:38:57.857

Android 应用程序**的**大小限制为 50 MB。大约 5 个月前，谷歌将此限制提高到 4 GB。APK 文件有 50 MB 的限制，但是，您可以在从 Google Play 下载 APK 文件后再附加两个 2 GB 的文件。FIFA 12 和 GTA III 就是很好的例子。

# c# - 无法显示很多条码，使用 IDAutomationHC39M for asp.net

> ID：12295918
> 
> 赞同：1
> 
> 时间：2012-09-06T08:25:09.027
> 
> 标签：c#, asp.net

我正在尝试在 asp.net 中显示条形码列表，我已经到处搜索了，我发现 IDAutomationHC39M 是免费的。当我使用带有一个字符串的代码时，我得到条形码底部显示的数字，现在我尝试将它与字符串数组一起使用，我得到的是裸代码列表，但 SYSTEM.S 显示在底部，所以它不读取字符串数组，任何帮助我都会很高兴，这里是我的代码

```
public String[] Action = { "12345", "76543", "34567", "87654", "34567" };
    protected void Page_Load(object sender, EventArgs e)
{

}
protected void btnGenerate_Click(object sender, EventArgs e)
{
    string barCode = txtCode.Text; 
    for (int i=1;i<=Action.Count();i++)
    {
         System.Web.UI.WebControls.Image imgBarCode = new System.Web.UI.WebControls.Image();
         using (Bitmap bitMap = new Bitmap(Action.Length * 40, 80))
         {
             using (Graphics graphics = Graphics.FromImage(bitMap))
             {
                 Font oFont = new Font("IDAutomationHC39M", 16);
                 PointF point = new PointF(2f, 2f);
                 SolidBrush blackBrush = new SolidBrush(Color.Black);
                 SolidBrush whiteBrush = new SolidBrush(Color.White);
                 graphics.FillRectangle(whiteBrush, 0, 0, bitMap.Width, bitMap.Height);
                 graphics.DrawString("*" + Action + "*", oFont, blackBrush, point);
             }//
             using (MemoryStream ms = new MemoryStream())
             {
                 bitMap.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
                 byte[] byteImage = ms.ToArray();

                 Convert.ToBase64String(byteImage);
                 imgBarCode.ImageUrl = "data:image/png;base64," + Convert.ToBase64String(byteImage);
             }
         }    
             plBarCode.Controls.Add(imgBarCode);
         }        
} 
```

在客户端我有一个占位符

```
<asp:PlaceHolder ID="plBarCode" runat="server" /> 
```

你能告诉我我的代码出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T08:36:28.497

简短回答：替换

```
graphics.DrawString("*" + Action + "*", oFont, blackBrush, point); 
```

和

```
graphics.DrawString("*" + Action[i-1] + "*", oFont, blackBrush, point); 
```

更长的答案：您正在做的是在每次迭代运行时传递整个数组。但是如果你想迭代`Action`数组，你需要访问每次迭代运行的当前字符串。这是通过在括号 ( `[i-1]`) 中传递数组的索引来完成的。`i-1`正如 Rawling 指出的那样，这必须是因为您`i`从 1 运行到`Count`，但是数组使用从零开始的索引（第一个元素称为`[0]`）。

# http - Best way to create a server to receive posted images from Iphone

> ID：12295924
> 
> 赞同：1
> 
> 时间：2012-09-06T08:25:26.543
> 
> 标签：http, webserver

My goal is to have a user send a photo from their iPhone to a server for processing.

How would I create a server that accepts HTTP Post requests.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:59:41.303

您可以使用`NSURLConnection`从 iPhone 向服务器发送 HTTP 请求。

如果您使用的是 PHP，您可以使用 POSTed 字段`$_POST['fieldname']`

此链接应该可以帮助您入门： http: [//php.net/manual/en/reserved.variables.post.php](http://php.net/manual/en/reserved.variables.post.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:10:16.823

使用 PHP，您可以执行以下操作：

```
<?php

    if(isset($_POST[someKey]))
    {
        // do something funky   
    }

?> 
```

就像其他人说的那样，购买一个简单的网络托管服务器，比如 Hostgator (http://www.hostgator.com/) 然后在他们为您提供的 cPanel 后端，创建一个 FTP 帐户来上传文件，或者您可以使用 cPanel 上传文件。

将您的 PHP 脚本上传到服务器并进行测试。

这是编写 iPhone + PHP Web 服务的教程：

[http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

要发布到服务器，您可以使用 AFNetworking (https://github.com/AFNetworking/AFNetworking) 之类的东西

使用 AFNetworking 上传图片的示例代码（如果您没有点击，则从上面的链接中窃取：D）：

```
NSURL *url = [NSURL URLWithString:@"http://api-base-url.com"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"avatar.jpg"], 0.5);
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/upload" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData:imageData name:@"avatar" fileName:@"avatar.jpg" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[[AFHTTPRequestOperation alloc] initWithRequest:request] autorelease];
[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];
[operation start]; 
```

# java - Java WebSocket 服务器 OutputStream 不刷新

> ID：12295929
> 
> 赞同：1
> 
> 时间：2012-09-06T08:25:47.843
> 
> 标签：java, websocket, outputstream, flush, no-data

我读过一个[类似的问题](https://stackoverflow.com/questions/2208387/java-socket-outputstream-is-not-flushing)，但我的问题没有解决。

为了学习，我正在尝试构建自己的 Java WebSocket 服务器。服务器设置得很好，它接受传入的连接并从客户端获取握手数据。然后我的服务器计算握手返回数据并尝试写入并刷新它。尽管如此，在 web 检查器中，没有显示客户端的响应标头，并且`onopen`-JavaScript 事件永远不会触发。

```
String EOL = System.getProperty("line.separator"); // actually a class-defined constant

BufferedReader inputStream = currentClient.getInputStream();
OutputStream outputStream = currentClient.getOutputStream();

String inputLine;
String handshake = "";

try {

    if(!inputStream.ready()){ continue; }

    System.out.println("Receiving:\n");

    while ((inputLine = inputStream.readLine()).length() > 0) {

        if(inputLine.startsWith("Sec-WebSocket-Key: ")){

            String inputKey = inputLine.replace("Sec-WebSocket-Key: ", "");
            String outputKey = WebSocket.getWebSocketKey(inputKey);

            handshake += "HTTP/1.1 101 Switching Protocols"+EOL;
            handshake += "Upgrade: websocket"+EOL;
            handshake += "Connection: Upgrade"+EOL;
            handshake += "Sec-WebSocket-Accept: "+outputKey;

        }

        System.out.println(inputLine);

    }

} catch (Exception e) {

    e.printStackTrace();

}

System.out.println("\n\nSending:\n");

System.out.println(handshake);
try {
    outputStream.write(handshake.getBytes(Charset.forName("UTF-8")));
    outputStream.flush();
} catch (IOException e) {
    e.printStackTrace();
} 
```

所以这是我得到的一个例子：

```
GET / HTTP/1.1
Upgrade: websocket
Connection: Upgrade
Host: localhost:65432
Origin: http://localhost
Sec-WebSocket-Key: ph1CO1PCF60uojeP+nql5A==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

我尝试发送的内容：

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: Z2Vy9p7Lp+MZPdZOe+L5GhVBDpc= 
```

我想指出，发送我发送的标头应该就足够了，因为在我开发的 PHP WebSocket 服务器中，仅发送这些标头即可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:55:00.683

websocket 握手是一个 HTTP 请求，后跟一个 HTTP 响应。 [RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2)声明 HTTP 的行尾标记是 CRLF ("\r\n")。

HTTP 请求以双换行符结尾（“\r\n\r\n” - 参见[RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html)的第 4 节）；websocket 握手响应是一个 HTTP 响应，所以也需要像这样结束。

# c# - 在 C# 中解码字符串

> ID：12295937
> 
> 赞同：0
> 
> 时间：2012-09-06T08:26:25.997
> 
> 标签：c#, decode, urldecode

我有一个像`"Akzo_Nobel_N@46@V@46@"`.

原始字符串是`"Akzo Nobel N.V."`

我需要解码它。我试过这样

```
public static string Decode(string query)
{
    string dSData = HttpUtility.UrlDecode(query.ToString());
    return dSData;
} 
```

我无法将其解码为原始字符串。请帮我解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:32:19.700

```
public static String Decode(String query) {
    return query.Replace("_", " ").Replace("@46@", ".");
} 
```

更多的输入将提供更好的解码例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:31:10.773

如果您要处理的只是空格和句号的“编码”版本，那么只需调用 string.replace 并将“_”替换为“”，将“@46@”替换为“”。[http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)。如果有可能您会遇到其他 ascii“编码”，那么您需要使用正确的方法以正确的方式解码（可能来自编码它的同一个类/库）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T08:37:10.057

看起来格式是：

@xx@ 其中 xx 是 ASCII 字符的十进制数（所以 . 是 46），空格被下划线替换。

看起来像是自制的 URL 编码机制，但可能是错误的。

所以你想要的是一个正则表达式，它查找类似的东西`@[0-9]{1,3}@`并将其替换为 ascii 代码表示的实际字符。

除了 _ 用于空格之外，可能还有其他直接替换，但我可以告诉你的就这么多。

# java - 名单 在实体中没有正确填充多对一映射。

> ID：12295942
> 
> 赞同：0
> 
> 时间：2012-09-06T08:26:52.693
> 
> 标签：java, spring, hibernate, jpa

我有一个实体，其中有一个列表。

```
@ManyToMany(fetch=FetchType.EAGER)
  @JoinTable(name = "subject_group_join",
    joinColumns = {
      @JoinColumn(name="sub_group_id")           
    },
    inverseJoinColumns = {
      @JoinColumn(name="subject_id")
    }
  ) 
List<SubjectEntity> listOfSubjects; 
```

主体实体如下：

```
@Entity
@Table(name="subject_details")
@NamedNativeQueries({
@NamedNativeQuery(name = "GET_SUBJECT_BY_CLASS",query = "call fetchAllSubjectByClass(:classId,:sessionId)",resultClass = SubjectEntity.class)   ,
@NamedNativeQuery(name = "GET_OPTIONAL_SUBJECT_BY_CLASS",query = "call fetchOptionalSubjectByClass(:classId,:sessionId)",resultClass = SubjectEntity.class),
@NamedNativeQuery(name = "GET_CUMPULSORY_SUBJECT_BY_CLASS_NOT_GROUPED",query = "call fetchAllCumpulsorySubjectByClassNotGrouped(:classId,:sessionId)",resultClass = SubjectEntity.class),
@NamedNativeQuery(name = "GET_OPTIONAL_SUBJECT_BY_CLASS_NOT_GROUPED",query = "call fetchAllOptionalSubjectByClassNotGrouped(:classId,:sessionId)",resultClass = SubjectEntity.class),
})
public class SubjectEntity extends AbstractEntity{

private static final long serialVersionUID = 7320078093064615396L;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="subject_id")
private long subjectId;

@Column(name="subject_name",length=32)
private String subjectName;

@Column(name="subject_code",length=32)
private String subjectCode;

@Column(name="description",length=512)
private String description;

@Column(name="subject_status")
private boolean subjectStatus; 
```

当我通过 Hql“从 entity1”获取第一个实体列表时；它没有提供在 subjectEntity 中填充的所有数据，它只是在其中包含 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:36:26.813

我认为很难找到问题，但`ManyToMany`应该看起来像下面的东西

```
@ManyToMany
@JoinTable(
  name="EMP_PROJ",
  joinColumns={@JoinColumn(name="EMP_ID", referencedColumnName="ID")},
  inverseJoinColumns={@JoinColumn(name="PROJ_ID", referencedColumnName="ID")})
private List<Project> projects; 
```

在`referencedColumnName`您的情况下，主键列的名称将在哪里。

您可以使用[ManyToMany](http://en.wikibooks.org/wiki/Java_Persistence/ManyToMany)作为参考。

# android - Android Webview 中的 Facebook 页面

> ID：12295945
> 
> 赞同：2
> 
> 时间：2012-09-06T08:27:15.217
> 
> 标签：android, facebook, android-webview, facebook-android-sdk

我想使用 webView 在我的应用程序中打开一个 facebook 页面，但是当我这样做时，它会一直显示该页面并在顶部询问我是否登录或注册

但是当我单击登录时，它会将我重定向到默认浏览器中的 facebook 页面并显示该页面，因为我已登录 - 在默认浏览器中

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T10:04:31.737

```
 WebView w = new WebView(this); 

//add this to your code

     w.setWebViewClient(new Callback());
     w.loadUrl("http://www.facebook.com");

//and this class also 
 private class Callback extends WebViewClient{  //HERE IS THE MAIN CHANGE. 

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                return (false);
            }

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:58:15.317

```
webview.getSettings().setJavaScriptEnabled(true); 
```

# ruby-on-rails - 缩短 Rails 中的长 SQL 日志条目

> ID：12295947
> 
> 赞同：1
> 
> 时间：2012-09-06T08:27:18.977
> 
> 标签：ruby-on-rails, activerecord

我正在做这样的不同查询：

```
Offer.where("id IN (?) AND foo = ?", offer_ids, 'bar') 
```

其中 offer_ids 是计算出来的，长度约为 1.000 个 id。

这些会导致 development.log 的条目很长，例如：

```
Offer Load (12.9ms)  SELECT `offers`.* FROM `offers` WHERE (id IN (156439476,162525730,169378363,197193532,209583012,212783238,236381946,260584008,267542041,140892256,154059101,157130091,158223924,161242255,161410617,169374703,184305303,187582050,234519939,235460328,252011721,253958427,257583669,260506433,262371001,262925076,265363980,266580943,268164854,271348458,272595168,272965063,141293866,162515580,195738185,210118609,210183244,210783954,212896682,219931290,224907551,225764370,227558502,234479337,234536939,236329414,238409428,241871979,245480324,245491111,245507734,253281480,254462074,257921737,265282309,265542934,266584572,267530034,268798204,271548316,272761011,272899348,273012205,119125136,134552742,166766466,169187658,213728958,213732981,225761919,234827176,247156634,247196151,247214973,247659810,259275332,261664338,262780711,267516898,267741935,270442768,271445586,271630463,272560287,272643405,272957626,106364954,205619149,213425974,213731373,243644164,266104747,266428301,266947751,268013142,126413832,157986541,175322047,204080600,205821543,205821564,205830753,205848558,207430869,207442535,207458847,207952331,208122137,213731142,217001805,226506891,228735112,243682190,257949941,265512977,265908636,268833366,269372138,270447643,271237573,59037247,59169923,662 ...) AND foo = 'bar') 
```

我实际上对这些日志条目感兴趣，但不是特定的 ID，并且滚动浏览这些长条目会减慢我的优化速度。

是否有一种宝石或简单的方法可以像 mysql 慢查询日志那样减少日志：

```
Offer Load (12.9ms)  SELECT `offers`.* FROM `offers` WHERE (id IN (?) AND foo = ?) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:10:07.507

我不知道有什么方法可以更改日志。但是，如果您使用的是最新版本的 rails，则可以使用子查询，这可能是防止长行日志记录的一种方法。

例如，

如果您目前有：

```
offer_ids = @business.offers.map(&:id) # this is an array object
Offer.where("id IN (?) AND foo = ?", offer_ids, 'bar') 
```

您可以将代码重构为：

```
offer_ids = @business.offers # this is an ActiveRelation object
# offer_ids = @business.select(:id).offers # you can use this line instead of above line

Offer.where(:id => offer_ids, :foo => 'bar') 
```

在这种情况下，您将收到如下查询：

```
SELECT `offers`.* FROM `offers` WHERE (id IN (SELECT id FROM `offers` WHERE business_id = 4) AND foo = 'bar') 
```

区别在于您传递的是`Array`对象还是`ActiveRelation`对象。

`ActiveRelation`对象是当您使用尚未执行查询的查询方法（如`where`、`select`等）时获得的。`limit`在这种情况下，请注意不要使用诸如`count`,`maximum`之类的方法`all`或任何其他数组方法（例如`map`, `select`），这将强制查询运行，从而导致`Array`.

# vb.net - 将 LINQ to SQL 结果转换为 DataTable 或 DataView VB.Net

> ID：12295949
> 
> 赞同：0
> 
> 时间：2012-09-06T08:27:23.633
> 
> 标签：vb.net, linq-to-sql, datatable

我需要一个由 LINQ to SQL 结果制作的临时 DataTable 或 DataView。但我无法根据 VB.Net 2010 中的 L2S 方法准备它们。是否可以不使用循环？

还有一个基本问题！L2S结果的结构是什么？我在想它一定是一个数据表！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:25:44.770

使用 Linq 到数据集。[http://msdn.microsoft.com/en-us/library/bb386921.aspx](http://msdn.microsoft.com/en-us/library/bb386921.aspx)

```
' Query the SalesOrderHeader table for orders placed 
'  after August 8, 2001.

Dim query = _
From order In orders.AsEnumerable() _
Where order.Field(Of DateTime)("OrderDate") > New DateTime(2001, 8, 1) _
Select order

' Create a table from the query.
Dim boundTable As DataTable = query.CopyToDataTable() 
```

希望，它应该工作。

# iphone - 移动应用程序本身是否有任何通知机制作为移动用户的 APNS？

> ID：12295952
> 
> 赞同：-1
> 
> 时间：2012-09-06T08:27:32.730
> 
> 标签：iphone, notifications, apple-push-notifications

我的网络/移动应用程序使用 APNS，它可以正常工作。在我的理解中，APNS 是在我的网络服务器上有该用户的新信息时通知移动用户，例如新朋友请求等。

我还有另一个用例。例如，用户在 Web 应用程序中修改了一些闹钟设置，同样的闹钟设置需要应用到该用户的移动应用程序。如何在没有用户触发的情况下将此设置推送到移动应用程序中。

（例如，用户在早上 7 点和早上 8 点在移动应用程序端发出警报，此信息会同步到服务器端。后来当用户表示他需要在早上 9 点从 Web 应用程序发出另一个警报时，我如何将其推送到移动应用程序以便用户获取早上 7 点、8 点和 9 点惊恐？）

有可能实现这一目标吗？

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:04:57.123

如果您有网络服务，那么当您的应用程序启动时，您可以向服务器发出 1 个请求以询问服务器的警报版本。

更新本地设备上的警报以匹配。

# apache - 带有反向代理的 express.js 会话

> ID：12295963
> 
> 赞同：6
> 
> 时间：2012-09-06T08:28:09.953
> 
> 标签：apache, node.js, session, proxy, express

我已经设置了一个 Apache 反向代理来转发`api.mydomain.com`，`localhost:2000`它工作得很好。

但是，我遇到的真正问题是关于会话 - 似乎 req.session 在通过查询时没有被存储`api.mydomain.com`。会话将工作得很好从访问`localhost:2000`。

我认为这与代理域有关...

服务器.js

```
var express = require('express'),
    app = express();

app.enable('trust proxy');

app.configure(function() {
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({ secret: 'supersecret'});
    app.use(app.router);
});

app.get('/session', function(req, res, next){ 
    console.log(req.session.username)
    // this will be undefined when called from  api.mydomain.com...
});

app.post('/session', function(req, res, next){ 
    req.session.username = 'my username';
}); 
```

阿帕奇配置

```
<VirtualHost *:80>
    ServerName api.mydomain.com   
    ProxyPass / http://localhost:2000/
    ProxyPassReverse / http://localhost:2000/

    ProxyPreserveHost On
    ProxyPassReverseCookieDomain api.domain.com localhost:2000
    ProxyPassReverseCookiePath / /
</VirtualHost> 
```

**编辑**

`app.use(app.router)`值得注意的是，为了进一步测试 -在`app.configure()`...之前添加以下代码。

```
app.use(function (req, res) {
    res.send('<h2>Hello, your session id is ' + req.sessionID + '</h2>');
}); 
```

将导致以下结果（每行代表对应用程序的新 GET /session 请求 - 节点也没有重新启动）。

本地主机：2000

```
Hello, your session id is sHkkESxJgzOyDhDwyTjwpNzq
Hello, your session id is sHkkESxJgzOyDhDwyTjwpNzq
Hello, your session id is sHkkESxJgzOyDhDwyTjwpNzq 
```

api.mydomain.com

```
Hello, your session id is uuo4U5ierZAG8LSH1BdwTlVf
Hello, your session id is 8BxL97Bo35SDt4uliuPgnbia
Hello, your session id is 0xkqZZpzQNvTsQpbJtUlXgkR 
```

**设置信息**

NodeJS v0.8.8

阿帕奇 v2.4.2

ExpressJS v3.0.0rc4

**更新 2**

好吧，到目前为止，我已经决定使用 simple use `mydomain.com/api`，因为这似乎可以解决所有问题。所以我想这与 Apache 如何使用 Express 处理域通信有关！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T12:47:08.300

将以下内容添加到 server.js

```
app.enable('trust proxy'); 
```

引用 ExpressJS API 文档：[http](http://expressjs.com/api.html#app-settings) ://expressjs.com/api.html#app-settings ...

> 信任代理 - 启用反向代理支持，默认禁用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:42:51.710

从[Apache ProxyPass 和 Sessions](https://stackoverflow.com/questions/8676890/apache-proxypass-and-sessions)判断这个 apache 配置也许 ...

```
<VirtualHost *:80>
    ServerName api.mydomain.com   
    ProxyPass / http://localhost:2000/
    ProxyPassReverse / http://localhost:2000/
    ProxyPassReverseCookiePath / /
</VirtualHost> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-10T16:50:29.647

我遇到了这个确切的问题，并尝试了这里提到的所有其他内容，但没有成功。拼图的最后一块是将以下内容添加到 Apache 的 SSL 虚拟主机配置中：

`RequestHeader set X-Forwarded-Proto "https"`

[我在https://github.com/expressjs/session/issues/251](https://github.com/expressjs/session/issues/251)的最后评论之一中发现了这个特殊的宝石

所以总的来说，我为修复它而实施的事情如下：

1.  对 Apache 配置的更改：

`RequestHeader set X-Forwarded-Proto "https" ProxyPassReverseCookiePath / /`

2.  对节点应用程序的更改。

`app.enable('trust proxy');`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T12:27:09.930

查看被转发的会话 cookie 并查看为什么您的浏览器在代理时不重新发送它应该很简单——域或路径可能是错误的。

回复：你后来的评论——也许你真的设置了“ProxyPassReverseCookieDomain //”而不是使用域作为参数？

ProxyPreserveHost 也可能间接为您工作，但修复 cookie 更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-15T07:44:34.903

使用此配置可​​在节点 0.6.17 上维护我的会话 ID，表示 3.0.0rc4。最初我在虚拟主机中有以下内容，但即使更改为匹配您的配置，它仍然有效。

```
ServerName api
ServerAlias api.internal.local 
```

我得到了一个维护的 Set-cookie connect.sid。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-12-10T11:07:40.097

这发生在我们身上，我不认为反向 cookie 的东西可以帮助我们解决问题。

我试过了： app.use("trust proxy");

无济于事。

但是使用

```
app.use("trust proxy");
app.set("trust proxy", 1); 
```

作品。

希望这可以帮助任何有代理 cookie 问题的人。

# magento - 我想在 Magento 的 list.phtml 中显示类别及其产品

> ID：12295966
> 
> 赞同：2
> 
> 时间：2012-09-06T08:28:25.127
> 
> 标签：magento

我是 Magento 的新手，我需要将类别显示为标题并列出该类别下的所有产品。不知何故，我在搜索网络时得到了一些相关代码，但它不起作用。可以将类别显示为标题，但不能显示其对应的产品。

我将提供用于显示类别和产品的代码。

```
<?php 

$category = Mage::getModel('catalog/category');
$tree = $category->getTreeModel();

$tree->load();
$ids = $tree->getCollection()->getAllIds();
$arr = array();

if ($ids){
    foreach ($ids as $id){
        $cat = Mage::getModel('catalog/category');
        $cat->load($id);
        if ($cat->getIsActive()) {
            $arr[$id] = $cat->getName();
            $arr[$catId] =  $cat->getId();

?>

<div class="right">
                    <div class="products">
                    <h2 class="head"><?php echo $arr[$id]; ?></h2>
<?php 
$catagory_model = Mage::getModel('catalog/category')->load($id); //where $category_id is the id of the category

$collection = Mage::getResourceModel('catalog/product_collection');

$collection->addCategoryFilter($catagory_model); //category filter

$collection->addAttributeToFilter('status',1); //only enabled product

$collection->addAttributeToSelect(array('name','url','small_image')); //add product attribute to be fetched

//$collection->getSelect()->order('rand()'); //uncomment to get products in random order

$collection->addStoreFilter();

if(!empty($collection))

{

    foreach ($collection as $_product):

    ?>                      
                    <div class="pro-list">

  <h5><?php echo $_product->getname(); ?></h5>
 <!-- other product details -->
  </div>
 <?php 
 endforeach;

 }else

 {

    echo 'No products exists';

 }

 ?> 
</div>
</div>
<?php }
        }
        }
        ?> 
```

我做错了什么？代码是用`template/catalog/product/list.phtml`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:00:47.923

据我了解，我得出了这个解决方案：

```
<?php $helper = $this->helper('catalog/category') ?>
<?php $categories = $this->getStoreCategories() ?>
    <div id="navigation_vert">
        <?php if (count($categories) > 0): ?>
            <ul>
                <?php foreach($categories as $category): ?>
                    <li>
                        <a class="link" href="<?php echo $helper->getCategoryUrl($category) ?>">
                        <?php echo $this->escapeHtml($category->getName()) ?>
                        </a>
                        <?php $subcategories = $category->getChildren() ?>
                        <?php if (count($subcategories) > 0): ?>
                            <?php foreach($subcategories as $subcategory): ?>
                                <a href="<?php echo $helper->getCategoryUrl($subcategory) ?>">
                                <?php echo $this->escapeHtml(trim($subcategory->getName(), '- ')) ?>
                                </a>
                                    <?php $subsubcategories = $subcategory->getChildren() ?>
                                    <?php if (count($subsubcategories) > 0): ?>
                                        <ul>
                                            <?php foreach($subsubcategories as $subsubcategory): ?>
                                                    <li>
                                                        <a href="<?php echo $helper->getCategoryUrl($subsubcategory) ?>"><?php echo $this->escapeHtml(trim($subsubcategory->getName(), '- ')) ?></a>
                                                    </li>
                                            <?php endforeach; ?>
                                        </ul>
                                    <?php endif; ?><!-- subsubcategories if e -->
                            <?php endforeach; ?><!-- subcategories for e -->
                        <?php endif; ?><!-- subcategories if e -->
                    </li>
                <?php endforeach; ?><!-- categories e -->
            </ul>
        <?php endif; ?><!-- count main categories if e -->
    </div><!-- id navigation_vert e --> 
```

在上面的代码中，我们提取了所有类别（其子类别--->及其子子类别（仅供参考））
每个类别都与`<a>`标签相关联。

单击 后，将显示所有相应类别的产品（以列表/网格模式）。[管理类别时的](http://www.aschroder.com/2009/03/top-3-solutions-when-your-magento-categories-are-not-displaying/)

常见错误。 要管理产品，请查看此链接[如何管理产品不](http://www.sboeconnect.com/blog/magentocommerce/adding-deleting-and-managing-products-in-magento-commerce-3.html)[显示产品](http://www.aschroder.com/2010/07/why-are-my-magento-products-not-showing-up/) 的原因。

# android - 在 tabview 中从 ListActivity 开始新的 ListActivity

> ID：12295968
> 
> 赞同：0
> 
> 时间：2012-09-06T08:28:27.613
> 
> 标签：android, android-intent, listactivity, tabview

我有 4 个选项卡的 tabview，我正在使用 TabHost 显示我的应用程序的选项卡。每个选项卡都由另一个从 ListActivity 扩展的类填充，这是代码

```
public class TabbedActivity extends TabActivity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_layout);

    TabHost tabHost = getTabHost();

    // Tab for Catalog
    TabSpec catalogspec = tabHost.newTabSpec("Catalog");
    catalogspec.setIndicator("Complete Catalog Fall 2012", getResources().getDrawable(R.drawable.ic_catalog));
    Intent catalogIntent = new Intent(this, Category.class);
    catalogspec.setContent(catalogIntent);
// Adding all TabSpec to TabHost
    tabHost.addTab(catalogspec); // Adding catalog tab
} 
```

这是另一个意图的代码

```
public class Category extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_of_data);
 Categories = new ArrayList<String>();
    fillListCategories();

    myListItems = new ArrayList<String>();
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, Categories);
        this.setListAdapter(adapter);
}} 
```

在 Listview 有项目列表，我的观点是如何设置 Onclick 在同一个选项卡中打开另一个“ListActivity”？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:43:41.663

在您的 Category 类中，添加一个 onClickListener，如下所示：

```
public class Category extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {       
super.onCreate(savedInstanceState);
setContentView(R.layout.list_of_data);
Categories = new ArrayList<String>();
fillListCategories();

myListItems = new ArrayList<String>();
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,   Categories);
    this.setListAdapter(adapter);
    this.setOnItemClickListener(new AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick( AdapterView<?> parent, View item, 
                           int position, long id) {
    mSelectedCategory = (String)parent.getItemAtPosition(position);

    Intent intent = new Intent(getBaseContext(), ScreenTwo.class); 
            intent.putExtra("name", mSelectedCategory.(WHATEVER INFO YOU NEED ABOUT THE CATEGORY);
            startActivity(intent);  
  }
});
}} 
```

ScreenTwo.java 看起来像具有 ListAdapter 的类别类，但具有通过意图传递的信息：

```
public class ScreenTwo extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {       
super.onCreate(savedInstanceState);
setContentView(R.layout.list_of_data);
Bundle b = getIntent().getExtras(); 
    String Name = b.getString("name");
Categories = new ArrayList<String>();
fillListCategories();

myListItems = new ArrayList<String>();
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,    Categories);
    this.setListAdapter(adapter);
}} 
```

# python - Heroku 的人可以确认我的备份脚本没有违反他们的条款吗？

> ID：12295969
> 
> 赞同：0
> 
> 时间：2012-09-06T08:28:31.210
> 
> 标签：python, postgresql, heroku, backup

继[这个早先的问题](https://stackoverflow.com/questions/11953272/what-commands-does-heroku-pgbackupscapture-run-on-the-server-to-perform-bac)之后，我查看了 Heroku[客户端](https://github.com/heroku/heroku/blob/master/lib/heroku/command/pgbackups.rb) [gem](https://github.com/heroku/heroku/blob/master/lib/heroku/client/pgbackups.rb)并编写了一个[Python 脚本，该脚本以与](http://github.com/BigglesZX/heroku-pgpy/blob/master/pg.py)**pgbackups**插件相同的方式在 Heroku 上执行 Postgres 备份。

由于删除了免费数据库层上的**自动月**选项，我想要一种通过 Heroku Scheduler 自动执行备份的方法。

**然而，在我使用这个脚本之前，我想绝对确保它不会违反任何 Heroku 条款，因为这是我最不想做的事情。**

该脚本的具体功能如下：

`PGBACKUPS_URL`在“显示”模式下，它向环境中定义的对象发送 GET 请求，向`/client/latest_backup`端点查询最新备份的详细信息。

`PGBACKUPS_URL`在“捕获”模式下，它向端点发送一个 POST 请求`/client/transfers`，提供`DATABASE_URL`应该从中进行备份的端点。

这正是原生 Heroku 客户端执行 pgbackups 的方式。该脚本是用 Python 编写的，因为我的 Cedar 堆栈项目需要 Python 资源，并且将通过`heroku run`.

请“知情者”告诉我这是否被认为可以？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:17:37.313

是的，没关系，只要保持喜欢每天一次。我们运行[wal-e](http://github.com/heroku/wal-e)以对所有内容进行持续保护。另外请注意，虽然您可以很容易地找出 pgbackpus 的 API，但它不是公开的并且随时可能更改。我已经在过去编写脚本的人身上打破了它，不是故意或报复性的，而是为了解决紧迫的问题。所以请注意，您正在做的事情并没有得到真正的支持，但我们不会生气。

您可能还想研究直接使用 pg_dump。

# scala - 在 scala 2.10 中是否可以通过一次宏调用生成多个顶级类？

> ID：12295971
> 
> 赞同：8
> 
> 时间：2012-09-06T08:28:35.107
> 
> 标签：scala, macros, scala-2.10

我有一个包含大量样板的程序（遗憾的是，即使是 Scala 机制也无法简化）。但是，如果有一种方法可以使用宏生成复杂的顶级类，那么所有样板文件都会消失。例如：

```
package org.smth

generate(params)

// becomes

class A { ... }
object B { ... }
case class C { ... } 
```

Scala 2.10 宏可以实现吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T10:09:18.423

简而言之：没有。

[宏类型](http://ScalaMacros.Org/future.html)（即生成类型而不是方法的宏）是计划好的，但它们没有被设计或指定，更不用说实现了，而且它们不会用于 2.10。

此外，单个宏调用只能生成一个类型。然而，由于类型（特别是s）可以嵌套，这不是限制：您可以只生成一个包含所有您需要的类`object`的顶级。`object`这与您的代码之间的区别基本上是一个附加`import`语句：

```
package org.smth

type O = Generate(params)

// becomes

object O {
  class A { ... }
  object B { ... }
  case class C { ... }
}

// which means you need an additional

import O._ 
```

他们考虑了`package`可以生成包含类的整个包的宏，但意识到由于`object`s 是 s 的超集，`package`并且类型宏可以生成`object`不必要的 s。

# python - Python 装饰器只是语法糖？

> ID：12295974
> 
> 赞同：24
> 
> 时间：2012-09-06T08:28:45.770
> 
> 标签：python, decorator, syntactic-sugar

> **可能的重复：**
> [理解 Python 装饰器](https://stackoverflow.com/questions/739654/understanding-python-decorators)

我对使用 Python 装饰器很陌生，从我的第一印象来看，它们只是语法糖。

对于更复杂的用途，它们是否有更深刻的用途？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T09:55:03.730

是的，它是语法糖。没有它们，一切都可以实现，但需要多几行代码。但它可以帮助您编写更简洁的代码。

例子：

```
from functools import wraps

def requires_foo(func):
    @wraps(func)
    def wrapped(self, *args, **kwargs):
        if not hasattr(self, 'foo') or not self.foo is True:
            raise Exception('You must have foo and be True!!')
        return func(self, *args, **kwargs)
    return wrapped

def requires_bar(func):
    @wraps(func)
    def wrapped(self, *args, **kwargs):
        if not hasattr(self, 'bar') or not self.bar is True:
            raise Exception('You must have bar and be True!!')
        return func(self, *args, **kwargs)
    return wrapped

class FooBar(object):

    @requires_foo                 # Make sure the requirement is met.
    def do_something_to_foo(self):
        pass 
```

我们还可以将装饰器链接/堆叠在一起。

```
class FooBar(object):
    @requires_bar
    @requires_foo                 # You can chain as many decorators as you want
    def do_something_to_foo_and_bar(self):
        pass 
```

好的，我们最终会得到很多很多的装饰器。

我知道！我将编写一个应用其他装饰器的装饰器。

所以我们可以这样做：

```
def enforce(requirements):
    def wrapper(func):
        @wraps(func)
        def wrapped(self, *args, **kwargs):
            return func(self, *args, **kwargs)
        while requirements:
            func = requirements.pop()(func)
        return wrapped
    return wrapper

class FooBar(object):
    @enforce([reguires_foo, requires_bar])
    def do_something_to_foo_and_bar(self):
        pass 
```

这是一个小样本，只是为了玩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:22:21.160

我真的很喜欢装饰器语法，因为它使代码变得非常明确

例如，在 Django 中有这个 login_required 装饰器：[https ://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.login_required](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.login_required)

要为函数/视图注入 @login_required 行为，您所要做的就是将装饰器附加到它（而不是将 if: ... else: ... 控制表达式无处不在等）

阅读PEP！

[http://www.python.org/dev/peps/pep-0318/](http://www.python.org/dev/peps/pep-0318/)

它已经失去了关于语言决策的历史，以及为什么

# c# - 强制 protobuf-net 序列化所有默认值

> ID：12295976
> 
> 赞同：11
> 
> 时间：2012-09-06T08:29:03.203
> 
> 标签：c#, serialization, protobuf-net

我有一个使用 protobuf-net 序列化/反序列化的复杂模型，并且我们有几个关于不序列化默认值的“功能”的错误。

例子：

```
[DataContract]
class Foo{
  public Foo(){
    // Value forced by constructor
    this.Value = 1;
  }

  // Buggy, when Value is set to zero
  [DataMember(Order = 1)]
  public double Value {get; set}
} 
```

当 Value = 0 时，它不会被 protobuf-net 序列化，但在反序列化过程中，构造函数会强制 Value 为 1（并且 protobuf-net 不会更改此值）。

为了使其工作，我需要强制 protobuf-net 序列化值，其中：

```
 // Works fine
  [DataMember(Order = 1, IsRequired = true)]
  public double Value {get; set} 
```

但是，由于这个特性我们已经遇到了错误，我们想为**整个模型**强制使用 protobuf-net ，而不是标记每个属性。

是否可以？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T08:58:43.613

是的，完全支持此功能。实际上，如果我被迫承认 v1 中的错误设计决策，那么隐式零默认值就是其中之一——但为了向后兼容，默认情况下会保留该行为。您正在寻找的是`RuntimeTypeModel.UseImplicitZeroDefaults`，`true`默认情况下。

为避免改变依赖于 v1 行为的代码行为（通过`Serilaizer.*`），您*无法在**默认*模型上更改此功能，因此您需要做的是：

1.  定义你自己的模型/序列化器实例
2.  设置`UseImplicitZeroDefaults = false`，**在**使用之前
3.  在您的序列化/反序列化代码中，使用此实例而不是`Serializer.*`

例如：

```
private static readonly RuntimeTypeModel serializer;
static MyType() { // your type-initializer for class MyType
    serializer = TypeModel.Create();
    serializer.UseImplicitZeroDefaults = false;
}
... then when needed:
serializer.Serialize(stream, obj);
...
ObjType obj = (ObjType)serializer.Deserialize(stream, null, typeof(ObjType)); 
```

我将来可能会考虑的另一种方法是允许装配级属性。这对于使用“预编译器”（例如，针对移动设备或 WinRT）的任何人特别有帮助 - 所以（只是大声思考）：

```
// this feature ***does not currently exist***
[assembly:ProtoDefaults(UseImplicitZeroDefaults=false, SkipConstructor=true)] 
```

然后将适用*于该程序集中*的所有类型。只是一个想法。另一个明显的优势是它可以与使用经典`Serializer.*`API 的代码一起工作。

# c++ - 为什么 using 指令的范围会有所不同？

> ID：12295980
> 
> 赞同：2
> 
> 时间：2012-09-06T08:29:15.893
> 
> 标签：c++

下面是两个简化的代码示例：第一个编译得很好，第二个发出编译错误（没有找到运算符 <<，它采用左手运算符 ByteVector...）。

两个示例之间的唯一区别是**using 指令的位置**。

我不想知道它为什么会失败（你没有足够的信息来回答这个问题），我只对为什么它*在*我放置`using`.

在这两个示例中，我会期望完全相同的行为。

**编译没有错误**

```
ByteVector Test()
{
   using Base::operator <<;

   ByteVector foo;
   int bar = 1;
   foo << bar;
   return foo;
} 
```

**编译出错**

```
using Base::operator <<;

ByteVector Test()
{
   ...same as above, without using
} 
```

额外的信息：

使用的 operator<< 定义如下

```
template<typename T>
ByteVector& operator<<(ByteVector &, const T&){...}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:54:22.980

我唯一想到的是[Visual Studio](http://msdn.microsoft.com/en-us/library/aewtdfs3%28v=vs.80%29.aspx)。如果是这种情况，您可能希望将`using`指令放在相应的`#include`. 正如页面上的评论所说：

> 将您的 using 指令放在源代码文件的开头，以减少 IntelliSense 出现意外行为的可能性。

否则，它不应该有任何区别。

# collections - 主干_.each collection.model 为空

> ID：12295981
> 
> 赞同：2
> 
> 时间：2012-09-06T08:29:16.490
> 
> 标签：collections, backbone.js, model

我试图简单地将我在 PHP 中的请求返回到 JSON。我的问题是每个 Stock 尚未完成。实际上，它是“渲染”，但“this.collection.models”尚未完成，因为请求尚未完成。

我应该怎么做才能纠正这个问题，等到请求完成，以便循环正确完成。

先感谢您

```
var Article = Backbone.Model.extend({});

var Articles = Backbone.Collection.extend({
    model:Article,
    url: function() {
        return _BASE_URL+'/sync/getLastArticles';
    },
    initialize:function () {
        this.fetch();
    }
});

var ArticlesView = Backbone.View.extend({
    template:$('#articles').html(),

    initialize:function () {
        this.collection = new Articles();
        this.render();
    },

    render:function () {
        console.log(this.collection);
        var that = this;
        _.each(this.collection.models, function (item) {
            console.log(item);
        }, this);
    },

    renderArticle:function () {
        ;
    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T09:49:48.827

你`render`在`fetch`完成之前。你想要做的是等待`fetch`完成，然后`render`. 现在您将如何获得完成时间的通知`fetch`？您有 2 个选项：

[成功功能](http://backbonejs.org/#Collection-fetch)（我不推荐）

```
// ArticlesView
initialize: function() {
  _.bindAll(this); // Don't forget to BIND
  this.collection = new Articles();
  this.collection.fetch({
    success: this.render
  });
} 
```

现在，当获取成功时，`render`调用。然而，这可能会导致范围问题，Backbone.js 为回调函数提供了一个更好的替代方案：*事件*。

[事件回调](http://backbonejs.org/#FAQ-events)（首选这个）

```
// ArticlesView
initialize: function() {
  _.bindAll(this);
  this.collection = new Articles();
  this.collection.on('reset', this.render); // bind the reset event to render
  this.collection.fetch();
} 
```

# javascript - 使用 AngularJS 设置活动标签样式

> ID：12295983
> 
> 赞同：145
> 
> 时间：2012-09-06T08:29:17.900
> 
> 标签：javascript, html, angularjs

我在AngularJS中设置了这样的路线：

```
$routeProvider
    .when('/dashboard', {templateUrl:'partials/dashboard', controller:widgetsController})
    .when('/lab', {templateUrl:'partials/lab', controller:widgetsController}) 
```

我在顶部栏上有一些链接样式为选项卡。如何根据当前模板或网址将“活动”类添加到选项卡？

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2012-09-25T15:28:18.180

无需依赖 URL 即可解决此问题的一种方法是在`$routeProvider`配置期间为每个部分添加自定义属性，如下所示：

```
$routeProvider.
    when('/dashboard', {
        templateUrl: 'partials/dashboard.html',
        controller: widgetsController,
        activetab: 'dashboard'
    }).
    when('/lab', {
        templateUrl: 'partials/lab.html',
        controller: widgetsController,
        activetab: 'lab'
    }); 
```

`$route`在您的控制器中公开：

```
function widgetsController($scope, $route) {
    $scope.$route = $route;
} 
```

`active`根据当前活动选项卡设置类：

```
<li ng-class="{active: $route.current.activetab == 'dashboard'}"></li>
<li ng-class="{active: $route.current.activetab == 'lab'}"></li> 
```

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2012-09-06T18:23:31.953

一种方法是使用 ngClass 指令和 $location 服务。在您的模板中，您可以执行以下操作：

```
ng-class="{active:isActive('/dashboard')}" 
```

where`isActive`将是这样定义的范围内的函数：

```
myApp.controller('MyCtrl', function($scope, $location) {
    $scope.isActive = function(route) {
        return route === $location.path();
    }
}); 
```

这是完整的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/KzAfG/](http://jsfiddle.net/pkozlowski_opensource/KzAfG/)

在每个导航选项卡上重复`ng-class="{active:isActive('/dashboard')}"`可能会很乏味（如果您有很多选项卡），因此此逻辑可能是非常简单指令的候选者。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-07-05T20:01:31.347

遵循 Pavel 使用自定义指令的建议，这是一个不需要向 routeConfig 添加任何有效负载的版本，它是超级声明性的，并且可以通过简单地更改`slice()`您关注的路径来适应任何级别的路径.

```
app.directive('detectActiveTab', function ($location) {
    return {
      link: function postLink(scope, element, attrs) {
        scope.$on("$routeChangeSuccess", function (event, current, previous) {
            /*  
                Designed for full re-usability at any path, any level, by using 
                data from attrs. Declare like this: 
                <li class="nav_tab">
                  <a href="#/home" detect-active-tab="1">HOME</a>
                </li> 
            */

            // This var grabs the tab-level off the attribute, or defaults to 1
            var pathLevel = attrs.detectActiveTab || 1,
            // This var finds what the path is at the level specified
                pathToCheck = $location.path().split('/')[pathLevel] || 
                  "current $location.path doesn't reach this level",
            // This var finds grabs the same level of the href attribute
                tabLink = attrs.href.split('/')[pathLevel] || 
                  "href doesn't include this level";
            // Above, we use the logical 'or' operator to provide a default value
            // in cases where 'undefined' would otherwise be returned.
            // This prevents cases where undefined===undefined, 
            // possibly causing multiple tabs to be 'active'.

            // now compare the two:
            if (pathToCheck === tabLink) {
              element.addClass("active");
            }
            else {
              element.removeClass("active");
            }
        });
      }
    };
  }); 
```

我们通过监听`$routeChangeSuccess`事件来实现我们的目标，而不是通过`$watch`在路径上放置一个。我相信这意味着逻辑应该不那么频繁地运行，因为我认为每个`$digest`周期都会触发手表。

通过在指令声明中传递路径级参数来调用它。这指定了当前 $location.path() 的哪个块你想要匹配你的`href`属性。

```
<li class="nav_tab"><a href="#/home" detect-active-tab="1">HOME</a></li> 
```

因此，如果您的选项卡应该对路径的基本级别做出反应，请将参数设为“1”。因此，当 location.path() 为“/home”时，它将匹配`href`. 如果您有应该对路径的第二级、第三级或第 11 级作出反应的选项卡，请相应地进行调整。这种从 1 或更大的切片将绕过 href 中的恶意“#”，它位于索引 0 处。

唯一的要求是您调用 an `<a>`，因为该元素假定存在一个`href`属性，它将与当前路径进行比较。但是，如果您更喜欢在 or 上调用，您可以相当容易地适应读取/写入父元素或子元素`<li>`。我挖掘这一点是因为您可以通过简单地改变 pathLevel 参数在许多情况下重复使用它。如果在逻辑中假设要读取的深度，则需要多个版本的指令才能与导航的多个部分一起使用。

* * *

编辑 3/18/14：该解决方案没有得到充分概括，如果您为 'activeTab' 的值定义了一个 arg，该 arg 针对`undefined`和`$location.path()`元素的`href`. 因为：`undefined === undefined`。更新以修复该情况。

在处理这个问题时，我意识到应该有一个可以在父元素上声明的版本，其模板结构如下：

```
<nav id="header_tabs" find-active-tab="1">
    <a href="#/home" class="nav_tab">HOME</a>
    <a href="#/finance" class="nav_tab">Finance</a>
    <a href="#/hr" class="nav_tab">Human Resources</a>
    <a href="#/quarterly" class="nav_tab">Quarterly</a>
</nav> 
```

请注意，此版本不再类似于 Bootstrap 样式的 HTML。但是，它更现代，使用的元素更少，所以我偏爱它。这个版本的指令，加上原来的，现在[可以在 Github 上](https://github.com/xmlilley/angular-activetab-directives)作为一个插件模块使用，您可以将其声明为依赖项。如果有人真的使用它们，我很乐意对它们进行 Bower-ize。

此外，如果你想要一个包含`<li>`'s 的引导兼容版本，你可以使用 [angular-ui-bootstrap Tabs 模块](http://angular-ui.github.io/bootstrap/#/tabs)，我认为它是在这篇原始帖子之后出现的，它可能比这篇更具声明性。它对于基本的东西不太简洁，但为您提供了一些额外的选项，例如禁用的选项卡和激活和停用时触发的声明性事件。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-03-27T12:09:56.723

@rob-juurlink 我对您的解决方案进行了一些改进：

而不是每条路线都需要一个活动标签；并且需要在每个控制器中设置活动选项卡我这样做：

```
var App = angular.module('App',[]);
App.config(['$routeProvider', function($routeProvider){
  $routeProvider.
  when('/dashboard', {
    templateUrl: 'partials/dashboard.html',
    controller: Ctrl1
  }).
  when('/lab', {
    templateUrl: 'partials/lab.html',
    controller: Ctrl2
  });
}]).run(['$rootScope', '$location', function($rootScope, $location){
   var path = function() { return $location.path();};
   $rootScope.$watch(path, function(newVal, oldVal){
     $rootScope.activetab = newVal;
   });
}]); 
```

HTML 看起来像这样。activetab 只是与该路由相关的 url。这只是消除了在每个控制器中添加代码的需要（如果这是使用它们的唯一原因，则拖入 $route 和 $rootScope 等依赖项）

```
<ul>
    <li ng-class="{active: activetab=='/dashboard'}">
       <a href="#/dashboard">dashboard</a>
    </li>
    <li ng-class="{active: activetab=='/lab'}">
       <a href="#/lab">lab</a>
    </li>
</ul> 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-09-27T22:53:08.083

也许这样的指令可能会解决您的问题：http: [//jsfiddle.net/p3ZMR/4/](http://jsfiddle.net/p3ZMR/4/)

HTML

```
<div ng-app="link">
<a href="#/one" active-link="active">One</a>
<a href="#/two" active-link="active">One</a>
<a href="#" active-link="active">home</a>

</div> 
```

JS

```
angular.module('link', []).
directive('activeLink', ['$location', function(location) {
    return {
        restrict: 'A',
        link: function(scope, element, attrs, controller) {
            var clazz = attrs.activeLink;
            var path = attrs.href;
            path = path.substring(1); //hack because path does bot return including hashbang
            scope.location = location;
            scope.$watch('location.path()', function(newPath) {
                if (path === newPath) {
                    element.addClass(clazz);
                } else {
                    element.removeClass(clazz);
                }
            });
        }

    };

}]); 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2014-06-23T17:33:32.637

这里最简单的解决方案：

[如何使用 Angular JS 设置引导导航栏活动类？](https://stackoverflow.com/questions/16199418/how-do-i-implement-the-bootstrap-navbar-active-class-with-angular-js)

这是：

使用 ng-controller 在 ng-view 之外运行单个控制器：

```
<div class="collapse navbar-collapse" ng-controller="HeaderController">
    <ul class="nav navbar-nav">
        <li ng-class="{ active: isActive('/')}"><a href="/">Home</a></li>
        <li ng-class="{ active: isActive('/dogs')}"><a href="/dogs">Dogs</a></li>
        <li ng-class="{ active: isActive('/cats')}"><a href="/cats">Cats</a></li>
    </ul>
</div>
<div ng-view></div> 
```

并包含在 controllers.js 中：

```
function HeaderController($scope, $location) 
{ 
    $scope.isActive = function (viewLocation) { 
        return viewLocation === $location.path();
    };
} 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-08-01T00:39:10.007

我建议使用[state.ui 模块](https://github.com/angular-ui/ui-router/wiki/Quick-Reference#stateincludespartialstatename)，它不仅支持多个和嵌套视图，而且使这种工作非常容易（引用下面的代码）：

```
<ul class="nav">
    <li ng-class="{ active: $state.includes('contacts') }"><a href="#{{$state.href('contacts')}}">Contacts</a></li>
    <li ng-class="{ active: $state.includes('about') }"><a href="#{{$state.href('about')}}">About</a></li>
</ul> 
```

值得一读。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-08-29T16:11:42.840

这是另一个版本的 XMLillis，带有 domi 的 LI 更改，它使用搜索字符串而不是路径级别。我认为这对我的用例来说更明显。

```
statsApp.directive('activeTab', function ($location) {
  return {
    link: function postLink(scope, element, attrs) {
      scope.$on("$routeChangeSuccess", function (event, current, previous) {
        if (attrs.href!=undefined) { // this directive is called twice for some reason
          // The activeTab attribute should contain a path search string to match on.
          // I.e. <li><a href="#/nested/section1/partial" activeTab="/section1">First Partial</a></li>
          if ($location.path().indexOf(attrs.activeTab) >= 0) {
            element.parent().addClass("active");//parent to get the <li>
          } else {
            element.parent().removeClass("active");
          }
        }
      });
    }
  };
}); 
```

HTML 现在看起来像：

```
<ul class="nav nav-tabs">
  <li><a href="#/news" active-tab="/news">News</a></li>
  <li><a href="#/some/nested/photos/rawr" active-tab="/photos">Photos</a></li>
  <li><a href="#/contact" active-tab="/contact">Contact</a></li>
</ul> 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-08-15T13:09:52.017

我发现 XMLilley 的 anwser 是最好的、适应性最强的和非侵入性的。

但是我有一个小故障。

为了与引导导航一起使用，我修改它的方法如下：

```
app.directive('activeTab', function ($location) {
    return {
      link: function postLink(scope, element, attrs) {
        scope.$on("$routeChangeSuccess", function (event, current, previous) {
            /*  designed for full re-usability at any path, any level, by using 
                data from attrs
                declare like this: <li class="nav_tab"><a href="#/home" 
                                   active-tab="1">HOME</a></li> 
            */
            if(attrs.href!=undefined){// this directive is called twice for some reason
                // this var grabs the tab-level off the attribute, or defaults to 1
                var pathLevel = attrs.activeTab || 1,
                // this var finds what the path is at the level specified
                    pathToCheck = $location.path().split('/')[pathLevel],
                // this var finds grabs the same level of the href attribute
                    tabLink = attrs.href.split('/')[pathLevel];
                // now compare the two:
                if (pathToCheck === tabLink) {
                  element.parent().addClass("active");//parent to get the <li>
                }
                else {
                  element.parent().removeClass("active");
                }
            }
        });
      }
    };
  }); 
```

我添加了“if(attrs.href!=undefined)”，因为这个函数被调用了两次，第二次产生了错误。

至于html：

```
<ul class="nav nav-tabs">
   <li class="active" active-tab="1"><a href="#/accueil" active-tab="1">Accueil</a></li>
   <li><a active-tab="1" href="#/news">News</a></li>
   <li><a active-tab="1" href="#/photos" >Photos</a></li>
   <li><a active-tab="1" href="#/contact">Contact</a></li>
</ul> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-11-23T09:59:48.373

引导示例。

如果您使用的是 Angulars 内置路由 (ngview)，则可以使用此指令：

```
angular.module('myApp').directive('classOnActiveLink', [function() {
    return {
        link: function(scope, element, attrs) {

            var anchorLink = element.children()[0].getAttribute('ng-href') || element.children()[0].getAttribute('href');
            anchorLink = anchorLink.replace(/^#/, '');

            scope.$on("$routeChangeSuccess", function (event, current) {
                if (current.$$route.originalPath == anchorLink) {
                    element.addClass(attrs.classOnActiveLink);
                }
                else {
                    element.removeClass(attrs.classOnActiveLink);
                }
            });

        }
    };
}]); 
```

假设您的标记如下所示：

```
 <ul class="nav navbar-nav">
        <li class-on-active-link="active"><a href="/orders">Orders</a></li>
        <li class-on-active-link="active"><a href="/distributors">Distributors</a></li>
    </ul> 
```

我喜欢这样做，因为您可以在属性中设置所需的类名。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-02-01T14:50:23.580

您也可以简单地[将位置注入范围](https://groups.google.com/forum/?fromgroups=#!topic/angular/aYy2_M_7ZAY)并使用它来扣除导航的样式：

```
function IndexController( $scope, $rootScope, $location ) {
  $rootScope.location = $location;
  ...
} 
```

然后在你的`ng-class`：

```
<li ng-class="{active: location.path() == '/search'}">
  <a href="/search">Search><a/>
</li> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-02-01T13:57:02.457

另一种方法是使用[ui-sref-active](https://github.com/angular-ui/ui-router/wiki/Quick-Reference#ui-sref-active)

与 ui-sref 一起工作的指令，用于在相关 ui-sref 指令的状态为活动时向元素添加类，并在相关的 ui-sref 指令的状态为非活动时删除它们。主要用例是简化依赖 ui-sref 的导航菜单的特殊外观，通过使“活动”状态的菜单按钮看起来不同，将其与非活动菜单项区分开来。

用法：

ui-sref-active='class1 class2 class3' - 当相关的 ui-sref 的状态为活动时，类 "class1"、"class2" 和 "class3" 分别添加到指令元素中，并在其非活动时删除。

**示例：**
给定以下模板，

```
<ul>
  <li ui-sref-active="active" class="item">
    <a href ui-sref="app.user({user: 'bilbobaggins'})">@bilbobaggins</a>
  </li>
  <!-- ... -->
</ul> 
```

当应用程序状态为“app.user”并包含状态参数“user”和值为“bilbobaggins”时，生成的 HTML 将显示为

```
<ul>
  <li ui-sref-active="active" class="item active">
    <a ui-sref="app.user({user: 'bilbobaggins'})" href="/users/bilbobaggins">@bilbobaggins</a>
  </li>
  <!-- ... -->
</ul> 
```

类名在指令链接期间被插值一次（对插值值的任何进一步更改都将被忽略）。可以以空格分隔的格式指定多个类。

使用 ui-sref-opts 指令将选项传递给 $state.go()。例子：

```
<a ui-sref="home" ui-sref-opts="{reload: true}">Home</a> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-03-13T21:18:24.657

我同意 Rob 关于在控制器中有自定义属性的帖子。显然我没有足够的代表发表评论。这是请求的jsfiddle：

示例 html

```
<div ng-controller="MyCtrl">
    <ul>
        <li ng-repeat="link in links" ng-class="{active: $route.current.activeNav == link.type}"> <a href="{{link.uri}}">{{link.name}}</a>

        </li>
    </ul>
</div> 
```

示例 app.js

```
angular.module('MyApp', []).config(['$routeProvider', function ($routeProvider) {
    $routeProvider.when('/a', {
        activeNav: 'a'
    })
        .when('/a/:id', {
        activeNav: 'a'
    })
        .when('/b', {
        activeNav: 'b'
    })
        .when('/c', {
        activeNav: 'c'
    });
}])
    .controller('MyCtrl', function ($scope, $route) {
    $scope.$route = $route;
    $scope.links = [{
        uri: '#/a',
        name: 'A',
        type: 'a'
    }, {
        uri: '#/b',
        name: 'B',
        type: 'b'
    }, {
        uri: '#/c',
        name: 'C',
        type: 'c'
    }, {
        uri: '#/a/detail',
        name: 'A Detail',
        type: 'a'
    }];
}); 
```

[http://jsfiddle.net/HrdR6/](http://jsfiddle.net/HrdR6/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-06-03T23:04:21.797

```
'use strict';

angular.module('cloudApp')
  .controller('MenuController', function ($scope, $location, CloudAuth) {
    $scope.menu = [
      {
        'title': 'Dashboard',
        'iconClass': 'fa fa-dashboard',
        'link': '/dashboard',
        'active': true
      },
      {
        'title': 'Devices',
        'iconClass': 'fa fa-star',
        'link': '/devices'
      },
      {
        'title': 'Settings',
        'iconClass': 'fa fa-gears',
        'link': '/settings'
      }
    ];
    $location.path('/dashboard');
    $scope.isLoggedIn = CloudAuth.isLoggedIn;
    $scope.isAdmin = CloudAuth.isAdmin;
    $scope.isActive = function(route) {
      return route === $location.path();
    };
  }); 
```

并在模板中使用以下内容：

```
<li role="presentation" ng-class="{active:isActive(menuItem.link)}" ng-repeat="menuItem in menu"><a href="{{menuItem.link}}"><i class="{{menuItem.iconClass}}"></i>&nbsp;&nbsp;{{menuItem.title}}</a></li> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-10-25T13:57:02.190

我需要一个不需要更改控制器的解决方案，因为对于某些页面，我们只呈现模板并且根本没有控制器。感谢之前建议使用的评论者，`$routeChangeSuccess`我想出了这样的东西：

```
# Directive
angular.module('myapp.directives')
.directive 'ActiveTab', ($route) ->
  restrict: 'A'

  link: (scope, element, attrs) ->
    klass = "active"

    if $route.current.activeTab? and attrs.flActiveLink is $route.current.activeTab
      element.addClass(klass)

    scope.$on '$routeChangeSuccess', (event, current) ->
      if current.activeTab? and attrs.flActiveLink is current.activeTab
        element.addClass(klass)
      else
        element.removeClass(klass)

# Routing
$routeProvider
.when "/page",
  templateUrl: "page.html"
  activeTab: "page"
.when "/other_page",
  templateUrl: "other_page.html"
  controller: "OtherPageCtrl"
  activeTab: "other_page"

# View (.jade)
a(ng-href='/page', active-tab='page') Page
a(ng-href='/other_page', active-tab='other_page') Other page 
```

它不依赖于 URL，因此为任何子页面等设置它真的很容易。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-12T14:20:34.710

我不记得我在哪里找到了这种方法，但它非常简单并且效果很好。

HTML：

```
<nav role="navigation">
    <ul>
        <li ui-sref-active="selected" class="inactive"><a ui-sref="tab-01">Tab 01</a></li> 
        <li ui-sref-active="selected" class="inactive"><a ui-sref="tab-02">Tab 02</a></li>
    </ul>
</nav> 
```

CSS：

```
 .selected {
    background-color: $white;
    color: $light-blue;
    text-decoration: none;
    border-color: $light-grey;
  } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-06-06T12:57:36.890

如果您使用 ngRoute（用于路由），那么您的应用程序将具有以下配置，

```
angular
  .module('appApp', [
    'ngRoute'
 ])
config(function ($routeProvider) {
    $routeProvider
      .when('/', {
        templateUrl: 'views/main.html',
        controller: 'MainCtrl',
        controllerAs: 'main'
      })
      .when('/about', {
        templateUrl: 'views/about.html',
        controller: 'AboutCtrl',
        controllerAs: 'about'
      })
}
}); 
```

现在，只需在此配置中添加一个控制器，如下所示，

```
angular
      .module('appApp', [
        'ngRoute'
     ])
    config(function ($routeProvider) {
        $routeProvider
          .when('/', {
            templateUrl: 'views/main.html',
            controller: 'MainCtrl',
            activetab: 'main'
          })
          .when('/about', {
            templateUrl: 'views/about.html',
            controller: 'AboutCtrl',
            activetab: 'about'
          })
    }
    })
  .controller('navController', function ($scope, $route) {
    $scope.$route = $route;
  }); 
```

正如您在配置中提到的活动选项卡一样，现在您只需在`<li>`or`<a>`标记中添加活动类。像，

```
ng-class="{active: $route.current.activetab == 'about'}" 
```

这意味着，每当用户单击关于页面时，这将自动识别当前选项卡并应用活动的 css 类。

我希望这有帮助！

* * *

## 回答 #18

> 赞同：-3
> 
> 时间：2015-07-19T12:04:04.567

来这里寻求解决方案..虽然上述解决方案工作正常，但发现它们有点复杂，没有必要。对于仍在寻找简单而整洁的解决方案的人来说，它将完美地完成任务。

```
<section ng-init="tab=1">
                <ul class="nav nav-tabs">
                    <li ng-class="{active: tab == 1}"><a ng-click="tab=1" href="#showitem">View Inventory</a></li>
                    <li ng-class="{active: tab == 2}"><a ng-click="tab=2" href="#additem">Add new item</a></li>
                    <li ng-class="{active: tab == 3}"><a ng-click="tab=3" href="#solditem">Sold item</a></li>
                </ul>
            </section> 
```

# html - html 链接无法正常工作

> ID：12295985
> 
> 赞同：1
> 
> 时间：2012-09-06T08:29:18.687
> 
> 标签：html, css, hyperlink

我正在为我的网站创建 html/css，并且链接不是“可点击的”。

当我摆脱“ul#menu”css 中的“float:left”时，链接就起作用了。否则它不会。

```
 <ul id="menu">
            <li><a href="www.facebook.com" class="active">Home</a></li>
            <li><a href="www.facebook.com">Order</a></li>
            <li><a href="www.twitter.com">How it works</a></li>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">About urrrs</a></li>   
            <a href="www.facebook.com">order</a>            
        </ul>

ul#menu{
    float: left;
    margin-left: 20px;
    margin-top: -290px;
}

ul#menu li a {
    text-decoration:none;
    color:#e2281f;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-size:22px;
    line-height:32px;
}

ul#menu li a.active, ul#menu li a:hover {
    background-color:#e2281f;
    color: white;
} 
```

我的网页位于： http: [//foodchute.com/](http://foodchute.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:32:11.493

试试这个：

```
 <ul id="menu">
            <li><a href="www.facebook.com" class="active">Home</a></li>
            <li><a href="www.facebook.com">Order</a></li>
            <li><a href="www.twitter.com">How it works</a></li>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">About urrrs</a></li>   
            <a href="www.facebook.com">order</a>            
        </ul>

ul#menu{
    position:relative; /* <- important bit here */
    z-index:1; /* <- important bit here */
    float: left;
    margin-left: 20px;
    margin-top: -290px;
}

ul#menu li a {
    text-decoration:none;
    color:#e2281f;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-size:22px;
    line-height:32px;
}

ul#menu li a.active, ul#menu li a:hover {
    background-color:#e2281f;
    color: white;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:31:47.150

因为你有一个重叠的 div #shopping。

将此添加到您的#menu：

```
position:relative;
z-index:2 
```

这是#shopping

```
z-index:1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:32:31.917

如果您尝试使用选项卡，它们都可以工作，您可以选择它们并按 Enter 将重定向！如果我做对了，只是你的 CSS 样式与链接重叠，尝试使用它，它会让事情变得正常（不是 CSS 和 HTML 专家，但我想它可以提供帮助）。

# html - 在触发表单提交之前保持 :focus

> ID：12295990
> 
> 赞同：0
> 
> 时间：2012-09-06T08:29:44.530
> 
> 标签：html, css

我用下面的代码创建了一个：

HTML：

```
<form>
   <div class="searchInputBox">
      <input type="text" tabindex="99" class="searchInput">
      <input type="submit" tabindex="100" class="searchbutton">
   </div>
</form> 
```

CSS：

```
.searchInputBox {
    float: left;
    width: 270px;
}
.searchInput:focus + .searchbutton {
    visibility: visible;
}
.searchInput:focus {
    background: url("http://lostcoastoutpost.com/media/img/icons/toolbar_find.png") no-repeat scroll 219px 6px rgba(255, 255, 255, 0.4);
    color: #000000;
    padding: 7px 35px 7px 15px;
    width: 195px;
}
.searchInput {
    background: url("http://lostcoastoutpost.com/media/img/icons/toolbar_find.png") no-repeat scroll 10px 6px rgba(255, 255, 255, 0.3);
    border: 1px solid #ccc;
    color: #D7D7D7;
    float: left;
    padding: 7px 15px 7px 35px;
    width: 150px;
}
.searchbutton {
    background: none repeat scroll 0 0 transparent;
    border-color: transparent;
    color: transparent;
    cursor: pointer;
    float: left;
    height: 16px;
    left: -26px;
    margin: 6px 0;
    position: relative;
    visibility: hidden;
    width: 16px;
} 
```

在输入文本区域获得焦点后，提交按钮在放大镜所在的区域可见。但是，单击它会导致文本输入失去焦点而不是提交表单。

有什么办法可以解决这个问题吗？最好只有 CSS ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:27:50.503

你的按钮总是在那里，问题是当你`input`失去焦点时，它会向后收缩，导致你`DIV`向后收缩，并且连锁导致你的按钮向左移动。

更不用说背景图像也切换回来了......

从您的背景图片来看，这可能是一个单字段搜索表单，这可能适合强制用户在搜索之前输入一些内容，所以这里有一个小技巧：

小提琴：

[http://jsfiddle.net/7LENQ/](http://jsfiddle.net/7LENQ/)

CSS：

```
.searchInput:valid + .searchbutton {
    visibility:visible;
}
.searchInput:focus, .searchInput:valid {
    background: url("http://lostcoastoutpost.com/media/img/icons/toolbar_find.png") no-repeat scroll 219px 6px rgba(255, 255, 255, 0.4);
    color: #000000;
    padding: 7px 35px 7px 15px;
    width: 195px;
} 
```

HTML：

```
<input type="text" tabindex="99" pattern=".+" required class="searchInput"> 
```

# dynamics-crm-2011 - CRM 2011 javascript onchange 事件不适用于另一个组织中的系统字段

> ID：12295992
> 
> 赞同：1
> 
> 时间：2012-09-06T08:29:49.010
> 
> 标签：dynamics-crm-2011

我有一些 javascript 代码附加到帐户实体。此代码根据显示各种帐户类型的自定义选项集字段的值设置主要联系人属性的要求级别。这是在一台服务器上开发的，它在那里工作，因此该解决方案被导入另一个组织，现在它不起作用。

它似乎只在这个字段上，因为我已经更改了代码以查看另一个字段并且效果很好。它给出的错误是“对象不支持此属性或方法”。同样奇怪的是，尽管该字段是系统字段，但该字段并未出现在解决方案中实体下的列表中。

我正在使用的代码是：

```
Xrm.Page.getAttribute("primarycontactid").setRequiredLevel("required"); 
```

谁能帮我弄清楚它在做什么？

谢谢

编辑：发现尽管出现错误，代码实际上使该字段成为必填字段，但它没有在其旁边显示 * 。另外，如果我在它的设置中设置了必填字段，那么它会做同样的事情

# php - Sonata Admin Bundle 覆盖视图

> ID：12295993
> 
> 赞同：0
> 
> 时间：2012-09-06T08:29:51.450
> 
> 标签：php, symfony, bundle, symfony-sonata

奏鸣曲默认用于列表索引：

```
SonataAdminBundle:CRUD:list.html.twig 
```

这我用于 Admin 中的所有模块。我有模块：工作和类别。我如何为模块作业设置例如：

```
SonataAdminBundle:CRUD:listJob.html.twig 
```

和类别：

```
SonataAdminBundle:CRUD:listCategory.html.twig 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:59:39.667

您可以通过在 CategoryAdmin 和 JobAdmin 中添加方法来更改默认列表索引

```
public function  getListTemplate ()
{
    return "SonataAdminBundle:CRUD:listJob.html.twig";
} 
```

# c# - 在命令行中传递参数数组

> ID：12295994
> 
> 赞同：7
> 
> 时间：2012-09-06T08:29:52.010
> 
> 标签：c#, .net, winforms, c#-4.0, .net-4.0

我看过这个关于[在 C# 中传递命令行参数的](https://stackoverflow.com/questions/653563/passing-command-line-arguments-in-c-sharp)问题。

但就我而言，我必须将参数数组传递给调用 .exe 文件。

例如

```
var arr = new string[] {"Item title","New task","22","High Priority"} 
```

是否可以`Process.Start()`与数组一起使用 exe 路径

我有 .exe 路径

```
const string path = @"C:\Projects\Test\test.exe"; 
```

谢谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-06T08:36:50.947

无法将数组作为参数传递，您可以使用逗号分隔符传递字符串：

```
 ProcessStartInfo info = new ProcessStartInfo();
 info.Arguments = "Item title,New task,22,High Priority" 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-06T08:40:28.760

一种选择是将数组放在一个字符串中，以便该方法将其视为一个参数。然后，在您的方法中，您可以解析那个参数。就像是：

```
"Item title, New task, 22, High Priority" 
```

您可以通过执行以下操作来使用现有数组：

```
var arrAsOneString = string.Join(", ", arr); 
```

在您的方法中，执行以下操作：

```
var values = argument.Split(',').Select(x => x.Trim()); 
```

我添加了修剪以消除空格。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-09-06T08:33:26.297

请试试这个：

```
 var arr = new string[] {"Item title", "New task", "22", "High Priority"};
        const string path = @"C:\Projects\Test\test.exe";
        const string argsSeparator = " ";
        string args = string.Join(argsSeparator, arr);

        Process.Start(path, args); 
```

# c++ - 将 GoogleMock 与 Boost::Shared Pointers 一起使用时泄漏的模拟对象

> ID：12295995
> 
> 赞同：8
> 
> 时间：2012-09-06T08:29:53.513
> 
> 标签：c++, memory-leaks, shared-ptr, googlemock

对于这种特殊情况，我无法摆脱泄漏。

执行测试时，我收到 Leaked Mock Objects 的消息。具体信息：

ClassElementFixture.h:102：错误：这个模拟对象（在测试 ClassElementFixture.initialize 中使用）应该被删除，但永远不会。它的地址是@0x940a650。

我标记了错误所指的行。这是我的代码的简化版本：

```
...
class ClassElementFixture: public ::testing::Test
{
    public:
        boost::shared_ptr<fesa::ClassElement> classElement_;
        boost::shared_ptr<fesa::DeviceElementMock> deviceElement_;

        ...

        void SetUp()
        {
            classElement_.reset(new fesa::ClassElement());
        }

        void TearDown()
        {
        }

        void initializeFake()
        {
            fesa::ParserElementFactoryMock factory;
            deviceElement_.reset(new fesa::DeviceElementMock());

            EXPECT_CALL(factory, createDeviceElement(_))
                        .WillOnce(Return(deviceElement1_));
            EXPECT_CALL(*deviceElement_, initialize(_));//Error refers to here

            classElement_->initialize(factory);

            EXPECT_TRUE(Mock::VerifyAndClearExpectations(deviceElement_.get()));
        }
} 
```

我已经找到了 [为什么 GoogleMock 会泄露我的 shared_ptr？](https://stackoverflow.com/questions/10286514/why-is-googlemock-leaking-my-shared-ptr/10289205#10289205)

在 Stack-Overflow，这是相关的。但是那里的建议并不能解决我的问题：X

为了至少抑制错误，我发现的唯一可能性是：

```
Mock::AllowLeak(deviceElement_.get()); 
```

然而，这不是一个非常干净的解决方案 =)

那么如何正确的去除漏水呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-25T07:08:32.190

如果您使用智能指针，您仍然需要对所有权有一个清晰的概念，否则您可能会获得较差的性能、循环依赖和内存泄漏。

我建议智能指针的默认选择应该是`unique_ptr`唯一的所有权，并为观察者使用原始指针。

如果观察者可能比所有者长寿，那么`shared_ptr`为所有者和`weak_ptr`观察者移动到一个。

`shared_ptr`仅当您没有明确的所有者并注意循环依赖时，才将“共享”用作最后的手段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-27T21:51:20.030

不要使用共享指针。或者，如果您真的必须使用它们，请确保它们回到 0 并在测试结束时被销毁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-08T23:15:10.220

这是一个老问题，但我没有看到有人提到我刚刚找到的解决方案。

在我向我正在模拟的类中添加一个虚拟析构函数之前，我看到了同样的错误。在您的情况下，请确保您在 ParserElementFactoryMock 上有一个虚拟析构函数。有道理，因为没有虚拟析构函数，模拟对象在超出范围时不会释放它们的资源。

# javascript - 在 csv 文件名中使用西班牙语字符

> ID：12295997
> 
> 赞同：0
> 
> 时间：2012-09-06T08:29:58.697
> 
> 标签：javascript

我的 csv 文件名为**Todos los artículos en la anulación de Informe_Sep 6, 2012 10.49.41.csv** 。我无法读取位于特定“url”中的文件。这只发生在 IE8 和 IE9 中。它在其他浏览器和英语中运行良好。

问题是因为在文件名中使用了**í,ó**字符。

我正在使用下面的代码打开另存为对话框，但它抛出

**HTTP 404。找不到网页**

**代码：** window.open(url, '_blank');

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:21:27.713

你试过转义版本吗？

> Todos%20los%20art%EDculos%20en%20la%20anulaci%F3n%20de%20Informe_Sep%206%2C%202012%2010.49.41.csv