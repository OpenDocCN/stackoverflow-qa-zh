# StackOverflow 问答 11661000-11661999

# c++ - 我可以用什么在我的 GUI 应用程序中用颜色渲染 3D 图像（OBJ、PLY）？

> ID：11661001
> 
> 赞同：4
> 
> 时间：2012-07-26T01:15:20.317
> 
> 标签：c++, opengl, 3d, vtk, point-cloud-library

我刚刚浏览了 VTK 以及 PCL Visualizer，但无法显示完整的 PLY 图像。显示的只是几何图形，如下所示：

![在此处输入图像描述](../Images/ce6cfc4690807d82dcf55130569836a0.png)

关于库和使用的任何输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T07:45:31.837

[Assimp](http://assimp.sourceforge.net/main_features_formats.html)可让您阅读 PLY、OBJ 和许多其他内容。它还有一个独立的查看器和许多示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T03:34:25.323

我从[Paul Bourke 的 3D 网站](http://paulbourke.net/dataformats/ply/)推出了自己的 PLY 阅读器。本页顶部是代码链接。这个网站非常适合一般的 3D 事物。看起来好像一旦超出了通常的顶点池/索引面集，每个应用程序都可以为事物指定不同的属性。这可能就是您找不到读取其他属性的标准工具的原因。我自己只关心几何，所以我从不担心颜色。

[这个](http://www0.cs.ucl.ac.uk/staff/Joao.Oliveira/ply.html)网站有代码，虽然我没有检查过。

我在我的 Qt 应用程序中使用[Coin 和 SoQt进行可视化。](http://www.coin3d.org/)Coin 是 Open Inventor 的免费实现。Coin 带有一个 3DS 阅读器和一个用于 Inventor 和 VRML 和 X3D 的阅读器。

[Blender](http://www.blender.org/)将读取 PLY，然后您可以写入大量文件，例如 Inventor。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:43:44.750

您是否尝试过使用构建在 VTK 库之上的[ParaView或](http://www.paraview.org/)[VisIt](https://wci.llnl.gov/codes/visit/)之类的东西？这些都是开源可视化应用程序，可以处理多种文件格式，包括 VTK 和 PLY，旨在可视化巨大的数据集（用颜色！）。它们既可以用作独立应用程序，也可以合并到现有代码中。

# jquery - 如何使用 jQuery 在 URL 中编码 & 符号

> ID：11661002
> 
> 赞同：0
> 
> 时间：2012-07-26T01:15:21.277
> 
> 标签：jquery, html, urlencode, ampersand

我有一些 URL 被动态输出到包含`&`这样的 div 上：

```
<div id="box">
    <a href="http://domain.com/index.html&location=1">First URL</a> 
    <a href="http://domain.com/index.html&location=2">Second URL</a>
</div> 
```

有没有办法 - 使用 jQuery - 将每个实例`&`转换为等效的 HTML 实体，以便输出变成这个？

```
<div id="box">
    <a href="http://domain.com/index.html&amp;location=1">First URL</a> 
    <a href="http://domain.com/index.html&amp;location=2">Second URL</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:18:56.913

```
$('#box a').each(function(){
  $(this).attr('href', $(this).attr('href').replace('&','&amp;'));
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T01:21:55.943

> 这将遍历`a`文档中存在的所有标签，并将属性中的所有特殊字符替换`href`为 html 实体

```
$('a').each(function(){
    $(this).attr('href',htmlEncode($(this).attr('href')));
    console.log($(this).attr('href'));
});

function htmlEncode(value){
  return $('<div/>').text(value).html();
} 
```

[工作演示](http://jsfiddle.net/ezjCr/)

* * *

> 遍历所有`a`标签并仅替换 & 符号：

```
$('a').each(function(){
    $(this).attr('href',$(this).attr('href').replace('&','&amp;');
    console.log($(this).attr('href'));
}); 
```

# java - 在 Java 中覆盖 equals()

> ID：11661004
> 
> 赞同：2
> 
> 时间：2012-07-26T01:15:25.823
> 
> 标签：java, overriding, equals

我试图了解“equals()”在 Java 中的工作原理。尤其是与“toString()”相比。这是一个让我偏离正轨的例子。

* * *

```
public class Car
{
    String make, model;

    public Car( String model, String make )
    {
        this.make  = model;
        this.model = make;
    }   

    public String toString()
    {
        String str = "This is a car. ";
        str += "Make: " + make + " | Model: " + model;
        return str;
    }

    public boolean equals( Car c )
    {
        return ( make.equals( c.make ) && model.equals( c.model ) );
    }
} 
```

* * *

```
public class Node 
{
    protected Object obj;
    protected Node next;

    public Node( Object o )
    {
        this.obj = o;
        this.next = null;
    }

    public String toString()
    {
        return obj.toString();
    }

    public boolean equals( Node n )
    {
        return ( this.obj.equals( n.obj ) );
    }
} 
```

* * *

```
Car c1 = new Car("toyota", "corolla");
Car c2 = new Car("toyota", "corolla");

Node nC1 = new Node( c1 );
Node nC2 = new Node( c2 );

nC1.print();
nC2.print();

if( nC1.equals( nC2 ) )
    System.out.println("They are equal!");
else
    System.out.println("They are NOT equal!"); 
```

* * *

这里 nC1.print() 和 nC2.print() 的行为符合预期。印刷：

```
This is a car. Make: toyota | Model: corolla
This is a car. Make: toyota | Model: corolla 
```

然而 nC1.equals( nC2 )，打印：

```
"They are NOT equal!" 
```

简而言之，问题是我可以覆盖“toString()”，但不能覆盖“equals()”。我错过了什么？我认为这种行为有一个简单的解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T01:18:29.067

我认为您应该将方法的签名保留为：

```
public boolean equals(Object obj) 
```

* * *

**附带说明：**将`@Override`注释放在要覆盖的方法中，以确保您覆盖了正确的方法，否则编译器会抱怨。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T01:24:04.020

方法签名是

```
@Override
public boolean equals(Object o) { ... } 
```

您无法像尝试那样更改参数类型。equals in 的一个有用模式`class Foo` 是

```
@Override
public boolean equals(Object o) {
    if (o instanceof Foo) {
        Foo foo = (Foo)o;
        return <expression testing equality of foo and this> ;
    }
    return false;
} 
```

对于你的例子，

```
@Override
public boolean equals(Object o)  
{  
    if (o instanceof Car) {
        Car car = (Car)o;
        return this.make.equals(car.make) && this.model.equals(car.model);
    }
    return false;  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T01:21:13.143

您的方法签名是`public boolean equals( Car c )`. 因此 Java 不会覆盖该`equals(Object)`方法；相反，它**重载**了它。

由于 in 中的`equals()`方法`Node`是调用`Car.equals(Object)`，因此它使用不同的实现。

你应该这样做：

```
public boolean equals( Object o )
{
    Car c = (Car)o;
    return ( make.equals( c.make ) && model.equals( c.model ) );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T02:01:40.310

知道了。感谢大家的有用提示和评论。通过将 Class Car 中的 equals(..) 代码替换为以下代码，代码可以正常工作：

```
public boolean equals( Object o )
{
    if( o instanceof Car )
    {
        if( make.equals( ((Car)o).make ) && model.equals( ((Car)o).model ) )
            return true;
        else
            return false;
    }
    else
        return false;
} 
```

# c++ - 适当的析构函数中应该包含什么？

> ID：11661005
> 
> 赞同：2
> 
> 时间：2012-07-26T01:15:28.127
> 
> 标签：c++, memory-management, destructor

我知道析构函数本质上是一个释放内存或在完成后进行“清理”的函数。

我的问题是，适当的析构函数中有什么？

让我向您展示一些我拥有的课程的代码：

```
#ifndef TRUCK_H__
#define TRUCK_H__

#include <iostream>
#include "printer.h"
#include "nameserver.h"
#include "bottlingplant.h"

using namespace std;

class BottlingPlant; // forward declaration

class Truck {

    public:
    Truck( Printer &prt, 
           NameServer &nameServer, 
           BottlingPlant &plant, 
           unsigned int numVendingMachines, 
           unsigned int maxStockPerFlavour );
    ~Truck();
    void action();

    private:
    Printer* printer;       // stores printer
    NameServer* ns;         // stores nameserver
    BottlingPlant* bottlingPlant;   // stores bottlingplant
    unsigned int numVM;     // stores number of vendingmachine
    unsigned int maxStock;      // stores maxStock
    unsigned int cargo[4];      // stores the cargo.

}; 
```

这是构造函数：

```
Truck::Truck( Printer &prt, 
              NameServer &nameServer, 
              BottlingPlant &plant, 
              unsigned int numVendingMachines, 
              unsigned int maxStockPerFlavour ) {
    printer = &prt;
    printer->print( Printer::Truck, 'S' ); 
    ns = &nameServer;
    bottlingPlant = &plant;
    numVM = numVendingMachines;
    maxStock = maxStockPerFlavour;
    cargo[ 0 ] = 0;
    cargo[ 1 ] = 0;
    cargo[ 2 ] = 0;
    cargo[ 3 ] = 0;
}//constructor 
```

在我的析构函数类中，我应该在指针之后清理吗？也就是说，将它们设置为NULL？或删除它们？

IE

```
Truck::~Truck()
{
    printer = NULL; // or should this be delete printer?
    ns = NULL;
    bottlingPlant = NULL;
    // anything else? or is it fine to leave the pointers the way they are?
}//destructor 
```

感谢您的帮助，只是想养成创建适当析构函数的好习惯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T01:18:34.613

当您在对象中存储指针时，您需要清楚地了解谁拥有它们指向的内存。如果您的类是所有者，则析构函数必须释放内存，否则您将发生泄漏。如果您的班级不是所有者，那么您不得释放内存。

将点设置为 NULL 是不必要的，重要的是正确处理内存本身。

管理指针的一种更简单的方法是使用智能指针类，它会自动为您处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T01:24:41.520

由于您的指针不是从类内分配的，因此 delete 和 NULL 都不会在这里。由于指针是从类外部传递的，所以不要管它们。

实际上，您正在传递引用，然后将它们转换为构造函数中的指针。这似乎没有必要。可能更好地将它们用作内部参考。真的取决于你的用例。如果你想使用指针，让你的构造函数接受指针可能是个好主意。显式优于隐式。

# php - 使用来自套接字的 GET /test.php HTTP/1.1 欺骗用户代理？

> ID：11661008
> 
> 赞同：-1
> 
> 时间：2012-07-26T01:15:58.563
> 
> 标签：php, actionscript-3, sockets, air, user-agent

我正在开发一种从 Web 服务器读取和执行 html/javascript 文档的工具。我使用 RFC2817Socket（因为我通过代理连接）并使用 writeUTFBytes 发送请求并在 HTMLLoader（loadString）中显示页面；到现在为止还挺好。我现在的问题是，有没有办法欺骗用户代理？因此，即使我通过代理连接到网络服务器并发送我的请求，我也希望能够将用户代理更改为我想要的任何内容。

```
_proxy.writeUTFBytes('GET /test.php HTTP/1.1\r\n');
_proxy.writeUTFBytes('Host: xx.xx.xx.xx:xx\r\n');
_proxy.writeUTFBytes('Connection: Keep-alive\r\n\r\n');
_proxy.flush(); 
```

我调用的页面是一个 php 脚本，它返回一堆信息，例如 ip、referer、用户代理……但从未定义用户代理：

```
echo 'user agent:'.$_SERVER['HTTP_USER_AGENT'];
echo 'ip:'.getenv('HTTP_X_FORWARDED_FOR'); 
```

但它返回正确的 IP 地址（代理的）

```
ip:xxx.xxx.xxx.xxx
user agent: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:51:16.847

在您的请求标头中添加“User-Agent：”字段：

```
_proxy.writeUTFBytes('GET /test.php HTTP/1.1\r\n');
_proxy.writeUTFBytes('User-Agent: Mozilla/5.0\r\n');
_proxy.writeUTFBytes('Host: xx.xx.xx.xx:xx\r\n');
_proxy.writeUTFBytes('Connection: Keep-alive\r\n\r\n'); 
```

# spring - Spring中Qualifier注解以外的解决方案

> ID：11661009
> 
> 赞同：0
> 
> 时间：2012-07-26T01:16:03.930
> 
> 标签：spring

我有一个用例，我不能使用 Qualifier 注释（至少根据我的理解），但我仍然需要在 Autowire 的两个 bean 之间进行解析。我不能使用限定符，因为我不知道 FooBar 的哪个实现将在 Foo 类中使用。这是我的设置：

```
class Foo
{
    @Autowired
    private FooBar a;
    public Foo(FooBar aa) {a = aa; }
}

interface FooBar
{}

class FooBarA implements FooBar
{}

class FooBarB implements FooBar
{} 
```

弹簧配置：

```
<bean id="beanA" class="FooBarA"/>
<bean id="beanB" class="FooBarB"/>

<bean id="bean1" class="Foo">
    <constructor-arg><ref bean="beanA"/></constructor-arg>
</bean>

<bean id="bean2" class="Foo">
    <constructor-arg><ref bean="beanB"/></constructor-arg>
</bean> 
```

这会引发一个错误，指出它无法解析类“Foo”中变量“a”的 bean，因为有两个 bean（beanA 和 beanB），即使我已明确指定在 bean1 和 bean2 的每种情况下使用哪个 FooBar 派生.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:24:59.600

我相信构造函数注入应该是这样的：

```
<constructor-arg>
    <ref bean="beanA"/>
</constructor-arg> 
```

甚至只是

```
<constructor-arg ref="beanA" /> 
```

由于您使用的是构造函数注入，因此`@Autowired`还将注释从`FooBar`in移动到构造函数。`Foo`

或者，您可以通过执行以下操作来使用字段注入：

```
<bean id="bean1" class="Foo">
    <property name="a" ref="beanA" />
</bean> 
```

# google-chrome - chrome tabId 在整个窗口中是否唯一

> ID：11661013
> 
> 赞同：17
> 
> 时间：2012-07-26T01:16:49.763
> 
> 标签：google-chrome, google-chrome-extension

我需要知道 chrome tabId 在所有打开的窗口中是否唯一。隐身和正常。是否保证所有窗口中的非打开选项卡都具有相同的 tabId ？

我搜索了文档，但找不到任何可靠的答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-26T09:00:14.433

是的，标签 ID 在*浏览器会话*中是唯一的。它也在以下文档中提到[`chrome.tabs`](http://code.google.com/chrome/extensions/tabs.html#type-Tab)：

> `Tab
> ( object )
>     id ( integer )
>        The ID of the tab. **Tab IDs are unique within a browser session**.`

如果您仍然不相信，请创建一个具有`tabs`权限的扩展程序，并有权在隐身窗口中运行。然后在后台页面运行以下代码：

```
// Create incognito window
chrome.windows.create({incognito: true, url:'about:blank'}, showTabId);
// Create normal window
chrome.windows.create({incognito: false, url:'about:blank'}, showTabId);

function showTabId(_window) {
    console.log(_window.tabs[0].id);        // Or alert, whatever.
    chrome.tabs.remove(_window.tabs[0].id); // Closes tab & window, user-friendly
} 
```

记录的数字正在增加（如果您认为两个数字的样本太小，请[`chrome.windows.create`](http://code.google.com/chrome/extensions/windows.html#method-create)在循环中运行该方法，直到您相信为止）。

# xml - 参考值总和的计算

> ID：11661016
> 
> 赞同：1
> 
> 时间：2012-07-26T01:17:58.270
> 
> 标签：xml, xslt, sum

我有以下 XML

```
<?xml version="1.0" encoding="utf-8"?>

<Order>
    <Bundle>
        <itemList>
            <item>
                <id>1</id>
            </item>
            <item>
                <id>4</id>
            </item>
            <item>
                <id>5</id>
            </item>
        </itemList>
        <itemList>
            <item>
                <id>1</id>
            </item>
            <item>
                <id>3</id>
            </item>
            <item>
                <id>5</id>
            </item>
        </itemList>
        <itemList>
            <item>
                <id>4</id>
            </item>
            <item>
                <id>1</id>
            </item>
            <item>
                <id>3</id>
            </item>
        </itemList>
    </Bundle>
    <item>
        <id>1</id>
        <value>12.00</value>
    </item>
    <item>
        <id>2</id>
        <value>13.00</value>
    </item>
    <item>
        <id>3</id>
        <value>14.00</value>
    </item>
    <item>
        <id>4</id>
        <value>15.00</value>
    </item>
    <item>
        <id>5</id>
        <value>16.00</value>
    </item>
</Order> 
```

尝试转换为以下格式的 html 表格

```
 --------------------------------
    ItemList - <Totalvalue of items (value in seperate nodes) in ItemList >
    ItemList - <Totalvalue of items (value in seperate nodes) in ItemList >
    ItemList - <Totalvalue of items (value in seperate nodes) in ItemList > 
```

示例结果 -

```
ItemResult - 44.00  (sum of value of item with id 1 + 4 + 5)
ItemResult - 43.00
etc 
```

* * *

这是我开始的 XSL

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
<xsl:template match="/">
  <html>
  <body>

    <table border="1">

      <xsl:for-each select="Order/Bundle/itemList">
      <tr>
        <td>TotalValue</td>
        <td><xsl:call-template name="priceSum">
    <xsl:with-param name="item" />
  </xsl:call-template> </td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>

<xsl:template name="priceSum">
  <xsl:param name="item"/>    
     <xsl:value-of select='sum(itemList/item/id/value)'/>
</xsl:template>
</xsl:stylesheet> 
```

我无法获得属于 itemlist 组的那些项目 id 的值的总和。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:43:00.227

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="OrderItemById" match="Order/item" use="id"/>

 <xsl:template match="itemList">
     ItemList - <xsl:value-of select=
      "sum(key('OrderItemById', item/id)/value)"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Order>
    <Bundle>
        <itemList>
            <item>
                <id>1</id>
            </item>
            <item>
                <id>4</id>
            </item>
            <item>
                <id>5</id>
            </item>
        </itemList>
        <itemList>
            <item>
                <id>1</id>
            </item>
            <item>
                <id>3</id>
            </item>
            <item>
                <id>5</id>
            </item>
        </itemList>
        <itemList>
            <item>
                <id>4</id>
            </item>
            <item>
                <id>1</id>
            </item>
            <item>
                <id>3</id>
            </item>
        </itemList>
    </Bundle>
    <item>
        <id>1</id>
        <value>12.00</value>
    </item>
    <item>
        <id>2</id>
        <value>13.00</value>
    </item>
    <item>
        <id>3</id>
        <value>14.00</value>
    </item>
    <item>
        <id>4</id>
        <value>15.00</value>
    </item>
    <item>
        <id>5</id>
        <value>16.00</value>
    </item>
</Order> 
```

**产生想要的正确结果：**

```
 ItemList - 43
 ItemList - 42
 ItemList - 41 
```

# delphi-7 - 图标强制 TPopupMenu 到 OwnerDraw？

> ID：11661019
> 
> 赞同：1
> 
> 时间：2012-07-26T01:18:03.310
> 
> 标签：delphi-7, vcl, delphi

我为 TPopUpMenu 分配了一些图标，但看起来它已更改为 ownerdraw（它设置为 false）...我也使用 XP Manifest，但它看起来仍然很旧（Win2000 样式）...是否有可能让它看起来像在 Windows/资源管理器中？也许是一个组件？

这是显示问题的图像：

![带有图像的 Delphi 7 弹出窗口（主题）](../Images/90f4447b0292a500611c4039b5deffd6.png)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T01:52:40.760

这只是 Delphi 7 非常过时的问题。它在发布时很棒，但现在已经有十年了，而且它的年龄正在显现。

您可能会发现[Toolbar2000](http://www.jrsoftware.org/tb2k.php)很有用。尽管名称如此，但它包含一个非常灵活的替代品`TMenu`和`TPopupMenu`功能，可让您使您的菜单看起来像 Of​​fice 2000 中的菜单。（请参阅链接页面上带有项目符号项的注释`Office 2000 style menus`，其中指出：

> Office 2000 风格的菜单 菜单和工具栏之间没有明显的区别，为您提供了最大的灵活性。工具栏可以包含菜单，菜单栏可以包含按钮，它们可以共享相同的项目。

它已作为免费软件（带有源代码）发布，因此可用，并且 AFAICT 它仍然支持 Delphi 7。如果不是，`Toolbar97`（可从同一 URL 获得）将提供类似的功能。

# c - setrlimit 不可靠？

> ID：11661020
> 
> 赞同：2
> 
> 时间：2012-07-26T01:18:05.190
> 
> 标签：c, time, setrlimit

我试图用来[`setrlimit()`](http://linux.die.net/man/2/setrlimit)限制一个过程所花费的时间。但是，当我执行某些操作（例如`printf()`.

这是一个说明问题的测试程序：

```
#include <sys/resource.h>
#include <stdio.h>

int main(void) {
    int i;
    struct rlimit limit;
    limit.rlim_cur = 3;
    limit.rlim_max = 3; // send SIGKILL after 3 seconds 
    setrlimit(RLIMIT_CPU, &limit);

    // doesn't get killed
    for(i=0; i<1000000; i++)
        printf("%d",i);

    return 0;
} 
```

但是，如果我用一个不同的例程替换 for 循环，比如天真的斐波那契：

```
int fib(int n) {
    if(n<=1) return 1;
    return fib(n-1)+fib(n-2);
}
int main(void) {
    ...
    fib(100);
    ...
} 
```

它完美地工作。这里发生了什么？`setrlimit()`简直不靠谱？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T01:36:40.543

CPU 限制是对*CPU*秒数而不是经过时间的限制。CPU 秒数基本上是 CPU 已经使用了多少秒，不一定与经过的时间直接相关。

当您进行`fib`调用时，您会敲击 CPU，以使经过的时间和 CPU 时间接近（大部分处理时间都花费在 CPU 上）。打印时并非如此，因为大部分时间都花在了 I/O 上。

因此，在您的特定情况下发生的事情是`rlimit` *已*设置，但您只是在进程完成之前没有使用您的三秒 CPU 时间。

更改`main`如下会导致信号在我的系统上传递：

```
int main(void) {
    int i;
    struct rlimit limit;
    limit.rlim_cur = 3;
    limit.rlim_max = 3; // send SIGKILL after 3 seconds
    setrlimit(RLIMIT_CPU, &limit);

    while (1) {                      // Run "forever".
        for(i=0; i<100000; i++) {
            printf("%d\n",i);
        }
        fib(30);                     // some CPU-intensive work.
    }

    return 0;
} 
```

当你`time`在 Linux 下，你会看到：

```
: (much looping).
52670
52671
52672
52673
52674
Killed

real   0m18.719s
user   0m0.944s
sys    0m2.416s 
```

在这种情况下，它花费了将近 20 秒的时间，但 CPU 只使用了 3.36 秒（用户 + 系统）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T01:30:23.750

rlimit 设置在 CPU 时间上，而不是墙上时间。根据输出的去向，您的程序可能大部分时间都在等待输出设备。在这样做的同时，它不会消耗 CPU 时间。所以程序可能运行时间超过 3 秒，但是如果你检查它的 CPU 使用率（`ps up $PID`并在下面查看`TIME`），它会显示使用时间少于 3 秒。

# android - 通过 Accessibility API 清除其他应用的通知

> ID：11661023
> 
> 赞同：0
> 
> 时间：2012-07-26T01:18:16.573
> 
> 标签：android, api, service, notifications, accessibility

我的应用程序正在使用 Accessibility API 来捕获其他应用程序生成的通知并对其进行操作。我想添加一个可以取消原始通知（由其他应用程序生成）的功能。

使用通知管理器的常用方法不起作用，因为您必须是创建通知的人才能清除它。可访问性 API 让我可以读取不同应用程序的通知，但它是否也允许您清除它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:11:35.917

不，您不能清除其他应用程序的通知（谢天谢地）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T02:47:27.443

```
public void onAccessibilityEvent(AccessibilityEvent event) {
        // TODO Auto-generated method stub
        if (event.getEventType() == AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED) {
            //Do something, eg getting packagename
            final String packagename = String.valueOf(event.getPackageName());
            final String text = String.valueOf(event.getText());

            if(TARGET_PACKAGE.equals(packagename)){
                Notification n = (Notification) event.getParcelableData();

                try{
                        n.deleteIntent.send(this,0,new Intent());
                }catch(Exception e){e.printStackTrace();}
        }
} 
```

如果通知的 deleteIntent 已经定义，可以取消它。

# java - Java2D API 中的转换

> ID：11661035
> 
> 赞同：0
> 
> 时间：2012-07-26T01:20:20.963
> 
> 标签：java, java-2d, affinetransform, onmousemove

我正在尝试测试与 Rectangle2D.Float 和 Point2D.Float 的碰撞。我有一个包含相机的 2D 世界（它根据相机的 AffineTransform 转换 graphics2D 画布）。然后我有一个包含子对象 Y 的对象 X 的列表。画布在相机转换为 X 的 AffineTransformation 的基础上进行转换，因此对象被渲染在正确的位置。我可以成功测试与对象 X 内的鼠标的碰撞，但我在测试子对象 Y 时遇到问题，因为 Y 对象“认为”它们位于位置 (0,0)，即使它们位于其他位置，因为他们的父对象 X 被重新定位为 (200,200)。所以换句话说，对象 X 和 Y 出现在位置 (200,200)，但碰撞发生在 (0,0) 而不是 (200,

我相信这与调用 AffineTransform.transform 和 AffineTransform.inverseTransform 的正确组合有关，但我无法将我的大脑包裹在正确的组合上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:49:10.327

这是对交互式图形使用级联转换时出现的标准问题。

假设`T`是定位对象的仿射变换矩阵`X`。也让`U`矩阵`Y`相对于定位一些子对象`X`。然后每个点`p`都`Y`用矩阵表达式进行转换

```
p' = T U p 
```

`p'`变换点在哪里。居住的坐标空间`p'`与鼠标坐标相同。当您在某个点收到鼠标点击时`c'`（我在`'`这里使用素数来匹配`p'`相同的坐标），您有一个选择。您可以使用`c'`“向后”变换`(T U)^(-1)`来进入`c`子对象的坐标空间。或者您可以手动计算`p'`所有点`p`，以便将其与`c'`.

一般来说，你会想要做后者。Java 将类似于：

```
AffineTransform TU = new AffineTransform(T);
TU.concatenate(U);
Point2D pPrime = new Point2D();
TU.transform(p, pPrime); 
```

现在您会很快注意到，由于您是手动计算这些点，因此您可能会保留转换后点的数据结构，以便始终与鼠标坐标进行比较。相同的数据结构可以用于绘制屏幕，​​根本不需要任何转换：它们已经被应用了。这是一种非常标准的交互式图形技术。当整幅图被快速更新时，它就失去了吸引力。但是当绘图很大并且一次最多更新小块时，这可能是性能上的一大胜利。你给一些内存并恢复一些速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T01:28:14.007

如本[例](https://stackoverflow.com/a/5594424/230513)所示，有几件事可能会有所帮助：

*   区分转换图形上下文和转换`Shape`.

*   变换不是可交换的；它们是*串联*的，就好像以明显的*最后指定的先应用*顺序应用一样。

*   `AffineTransform`包括允许*锚点*的静态工厂。

# css - 整理 div 和 footer 之间的间隙

> ID：11661037
> 
> 赞同：-1
> 
> 时间：2012-07-26T01:20:52.397
> 
> 标签：css, html

我有几个关于我的 DIV 布局的问题。

我似乎无法理解为什么[我的布局](http://jsfiddle.net/methuselah/V44Jw/1/)在 div 和页脚之间有很大的差距。我怎样才能让它在页脚正下方对齐？

其次，用于制作**框 2、3、4**的方法似乎都与高度相关（它们在底部似乎有点倾斜）。我该如何做到这一点？现在我只是对身高百分比做一些猜测。

提前致谢。

HTML：

```
<div id="wrapper">
    <div class="logo">logo</div>

    <div id="header">
        <a href="#">link 1</a>
        &nbsp;|&nbsp;
        <a href="#">link 2</a>
        &nbsp;|&nbsp;
        <a href="#">link 3</a>
        &nbsp;|&nbsp;
        <a href="#">link 4</a>
    </div>

    <div style="clear: both;"></div>

    <div class="column" id="first-column">
        <div class="window" id="window-1">1</div>
        <div class="window" id="window-2">2</div>
    </div>

    <div class="column" id="second-column">
        <div class="window" id="window-3">3</div>
    </div>

    <div class="column" id="third-column">
        <div class="window" id="window-4">4</div>
    </div>
    <div style="clear: both;"></div>
    <div class="footer">footer</div>
</div> 
```

​</p>

CSS：

```
body, html{
    font-family: 'Segoe UI', Arial, Helvetica, sans-serif;
    height: 100%;
}

#wrapper {
    margin: 0 auto;
    max-width: 1212px;
    min-height: 540px;
    min-width: 784px;
    position: relative;
    height: 100%;
}

#header{
    text-align:right;
    padding:5px;
    font-size:10px;
    padding-right: 30px;
}

#first-column{
    width: 20%;
    padding-left: 5px;
    height: 100%;
}

#second-column{
    width: 50%;
    height: 100%;
}

#third-column{
    width: 25%;
}

.window{
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border:1px solid #CECECE;
    width:100%;
}

#window-1{
    height:43.5%;
}

#window-2{
    margin-top:10px;
    height:43.5%;
}

#window-3{
    height:87%;
    padding-bottom: 10px;
}

#window-4{
    height:87%;
    padding-bottom: 10px;
}

.column{
    float:left;
    margin: 5px;
    height: 100%;
}

.logo {
    font-family: arial;
    font-size: 12px;
    float: left;
    padding-left: 10px;
}

.footer {
    margin-top: 10px;
    padding-left: 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:35:51.050

`height:100%`有麻烦，你应该先删除它。

# php - 自动滚动 jqgrid 到当前日期列和具有存储数据的单元格的闪烁效果

> ID：11661039
> 
> 赞同：0
> 
> 时间：2012-07-26T01:20:57.247
> 
> 标签：php, javascript, jquery, ajax, jqgrid

我正在加载一个包含大约 38 列数据的 jqgrid。前 6 列已冻结，其他列未冻结（日期和月份取决于组合框。请在[此处](https://lh6.googleusercontent.com/-8XcwJpZImDU/UBCWeEZGQwI/AAAAAAAAAIY/2hvuGulgw8Y/s1543/untitled.JPG)查看示例图像）。数据加载完 jqgrid 后，我想将 jqgrid 自动滚动到当前日期的特定列，紧挨着冻结的列的最后一列。滚动将取决于当天（例如：如果今天是 2012 年 7 月 26 日，它将自动滚动到该特定日期，依此类推）。

另一个是当那天收到数据时，单元格会闪烁成红色和绿色（那些有数据或值的单元格会闪烁成两种颜色），类似的。

有谁知道如何做到这一点？
谢谢！. 请[在此处](https://lh6.googleusercontent.com/-8XcwJpZImDU/UBCWeEZGQwI/AAAAAAAAAIY/2hvuGulgw8Y/s1543/untitled.JPG)查看布局的示例图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:29:27.190

我使用此功能滚动到当前日期列

```
function scrollToCurrentDate(currentDate,jqGrid){
    var width =0 ;
    var frozenWidth = 0;
    for(var i =0,col;col=jqGrid[0].p.colModel[i];i++){
        width += $("#"+jqGrid[0].id+"_"+col.name)[0].offsetWidth;
        if(col.name.indexOf('Qty')==0){
            var day = col.name.replace('Qty','');
            var date = $("#CurrentYear").val()+'-'+$("#CurrentMonth").val()+'-'+(parseInt(day)<10?"0"+day:day);

            if(currentDate == date){  
                var columnWidth = $("#"+jqGrid[0].id+"_"+col.name)[0].offsetWidth;
                $(".ui-jqgrid-hdiv").scrollLeft((width-columnWidth)-frozenWidth);
                $(".ui-jqgrid-bdiv").scrollLeft((width-columnWidth)-frozenWidth);
                break;
            }
        }
        else{
          frozenWidth += $("#"+jqGrid[0].id+"_"+col.name)[0].offsetWidth;    
        }
    }
} 
```

然后我在 gridComplete 中调用这个函数：

```
scrollToCurrentDate(currentDate,$("#table")); 
```

在闪烁效果中，代码如下。

```
var blinkStatus=false;
var blink = function(){
        //$(".blinker").toggle();
        $(".txtBlinker").css("background-color", blinkStatus?"#CFC":"#FF4F4F");
        blinkStatus=!blinkStatus;
    };
    $(document).ready(function() {

        setInterval(blink, 1000);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:41:51.563

好的，我希望你自己编写代码，我可以给你一些想法。

实现jqgrid的LoadComplete函数并检查哪一列具有当前日期以及在该列上调用jquery的焦点方法。

会是这样的

var Id=//具有当前日期列的行的id。

通过使用 jquery 选择器获取该列，您知道使用 tr 和 td，他们将有一些 id，检查开发人员工具，然后在该列上调用 jquery 的焦点方法

或者，如果您希望该列具有闪烁效果，

检查这个

[http://archive.plugins.jquery.com/project/blink](http://archive.plugins.jquery.com/project/blink) ,

让我知道是否还有其他问题。

PS-如果对您有帮助，请将其标记为答案。

# php - 基类中的依赖注入设置器，并且具有将依赖项作为扩展的类

> ID：11661042
> 
> 赞同：0
> 
> 时间：2012-07-26T01:21:02.833
> 
> 标签：php, dependency-injection

如果我使用 setter 进行依赖注入，并且许多类都需要相同的依赖项，我是否应该让所有这些类扩展一个基类，其中包含用于依赖项的 setter？

例如：

假设我有三个类：Page、Article、Comment，它们都依赖于 $db 和 $user。

拥有基类依赖项有什么好处或坏处，如下所示：

```
 class Dependencies
    {
        private $database;
        private $user;
        final public function setDatabase($dbh)
        {
            $this->database = $dbh;
        }

        final public function setUser($user)
        {
            $this->user = $user;
        }
    } 
```

然后让他的其他类作为依赖项的扩展

```
class Article extends Dependencies
{
    public function __construct()
    {
        // some code
    }

    // some other functions that use $this->database and $this->user
} 
```

而不是在每个单独的类（文章、页面和评论）中存在 setDatabase 和 setUser。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:51:47.413

拥有一个名为 Dependencies 的类是个坏消息。文章不是依赖项的子类型。

这是特征可能更合适的地方。

```
trait DatabaseOwner
{
  private $database;

  final public function setDatabase($dbh)
  {
    $this->database = $dbh;
  }
}

class Article
{
  use DatabaseOwner;
} 
```

如果您发现自己经常一起使用相同的集合，您可以创建由多个特征组成的特征。

然而，所有这些都说：如果这三个类都来自某个更好命名的类，它表示一个 is-a 关系，并且它实现了这些功能（或使用特征），因为它是基类型所固有的，那么这是完全可以接受的。

但是在我看来，仅仅因为事情碰巧共享一些属性而创建一个单一的基类并不好。

# jsf - PrimeFaces 与 JSF - “onerror” 中 不工作

> ID：11661051
> 
> 赞同：3
> 
> 时间：2012-07-26T01:22:08.063
> 
> 标签：jsf, primefaces, exception-handling, dialog, onerror

我正在使用 JSF，带有[`@ManagedBean`](https://docs.oracle.com/javaee/7/api/javax/faces/bean/ManagedBean.html)注释并使用 Primefaces，我遇到了以下问题。

为什么“ `onerror`”没有被触发？异常只出现在我的控制台中。

**登录.xhtml**

```
<p:commandButton 
     value="teste" 
     action="#{loginBean.methodTest()}" 
     ajax="true" 
     immediate="false" 
     onerror="confirmation.show()" />

<p:dialog  
    appendToBody="true" 
    header="Atencao" 
    widgetVar="confirmation"  
    showEffect="bounce">  
     ...  
</p:dialog> 
```

**豆豆**

```
@ManagedBean(name = "loginBean") 
@SessionScoped  
public class LoginBean {

    public void methodTest() throws Exception {
        System.out.println("hi");       
        throw new Exception("Exception Test");           
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T06:00:39.127

这是预期的行为......

> onerror : ajax 请求失败时执行的客户端回调。

在你的情况下，ajax请求根本没有失败，你抛出异常的事实与ajax失败无关

> 当 jsf 没有捕捉到你的异常、http 错误等时调用 onerror。异常！=错误。

阅读此线程以获取更多详细信息[Ajax 引擎：onerror 不起作用](http://forum.primefaces.org/viewtopic.php?f=3&t=19296)（可能会为您提供一些提示...）

看下面关于[f:ajax onerror的详细解释](http://docs.oracle.com/javaee/6/tutorial/doc/gkdcb.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-06T10:25:19.693

onerror 属性查找您需要自己提供的 http 错误状态代码。

在你的第一个例子中

```
public void methodTest() {
  ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();
  HttpServletResponse response = (HttpServletResponse) context.getResponse();
  response.setStatus(500); 

  System.out.println("hi");
} 
```

应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:08:46.350

谢谢大家，

我用一种**不太**好的方法解决了这个问题（但它解决了！），但我认为也许你可以帮助我改进这种方式。我想在我的“catch”中抛出一个 Ajax 错误，然后“onerror”（inted of oncomplete）接收它，然后打开对话框。

有没有可能？？

成功的例子，方法很差：

```
 <p:panel id="PanelLogin" header="Login"  >    
      <h:form id="FormLogin"  >
        <br/>

          <h:panelGrid columns="2">
               <h:outputLabel for="user" value="Usuario:" />
               <p:inputText id="user" required="true"   value=" "  size="75"  />    

               <h:outputLabel for="pin" value="Senha:" />
               <p:password id="pin" required="true"  value=" " size="55" />                     
          </h:panelGrid>                                                

         <p:commandButton  styleClass="botaoLogin" value="OK" action="#{loginBean.checkLogin()}" ajax="true" oncomplete="if (#{loginBean.dialog}) confirmation.show()"  />

        </h:form>
</p:panel>

<p:dialog id="atencaoDialog" resizable="false" appendToBody="true" header="Atencao" widgetVar="confirmation"  height="85" width="300" showEffect="bounce">

 <div align="center">                   
   <p:messages id="outputTextAtencaoDialog"  autoUpdate="true" redisplay="false"   />  
 </div>                 

 <div style="text-align: center;">
  <p:commandButton id="okButtonAtencaoDialog" value="OK"  onclick="confirmation.hide();" />                         
 </div>
</p:dialog> 
```

豆豆

```
 @ManagedBean(name = "loginBean")
    @SessionScoped
    public class LoginBean implements Serializable {

    private boolean dialog;

    ...

    public String checarAutenticacao() {

    ...

    try {

    ...

    return "/templantes/telaAplicacao.xhtml";

     } catch (Throwable e) {

       this.dialog = true;
       // try to throw Ajax error instead of this below ??            
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(e.getMessage()));
       return null;
     }
    } 
```

# python - 如果可能，如何从 python.exe 窗口启动 Python IDLE，如果没有，python.exe 甚至用于什么？

> ID：11661053
> 
> 赞同：0
> 
> 时间：2012-07-26T01:22:24.130
> 
> 标签：python, python-idle

我目前正在运行 Windows 7，我记得在学校计算机上使用 Linux 时，我可以在终端中输入“gedit &”，例如打开 gedit 文本编辑器。我想知道是否有类似的过程来打开 IDLE，以及为此将 Python 程序/脚本键入“终端等效项”。我是一个完全的新手，所以我可能有点偏离基础......无论如何，所以有一个名为python.exe的类似终端的程序，它似乎应该能够打开与Python相关的软件（比如IDLE），我想知道 1）python.exe 的用途，2）它是否可以像 Linux 终端一样对待，以及 3）如何在其中做一些事情。我尝试了各种命令，但几乎所有命令都出现语法错误。非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:25:25.237

python.exe 是 Python 解释器。你所有的 Python 程序都是用它来执行的。如果你在控制台中运行它，你会得到一个交互式提示：

```
C:\> python
Python 2.6.6 (r266:84297, Aug 24 2010, 18:46:32) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

如果你给它一个 Python 程序，它会运行它：

```
C:\> python myprog.py 
```

你也可以要求它运行一个可导入的模块：

```
C:\> python -m modulename 
```

你可以这样运行 IDLE：

```
C:\> python -m idlelib.idle 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T01:42:28.097

是的，你可以启动像 Idle 这样的库，你需要导入 idlelib：

```
import idlelib.idle 
```

或者，要从终端开始空闲而不先进入 python.exe shell，您可以执行 python.exe -m idlelib.idle 假设 idlelib 在您的 PYTHONPATH 中

python.exe 就像 IDLE 中的 shell 一样，主要用于快速试验你想尝试的算法或测试库调用或语言特性，当你不想为此目的打开一个新文件时。与 bash 等 Linux shell 有相似之处，但 python 的 shell 主要面向辅助编程，而 Linux shell 主要面向启动其他程序。虽然您可以使用 subprocess.Popen 在 python 的 shell 中启动其他程序，而 bash 确实有它自己的脚本语言，但它们是非常不同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T01:26:13.753

python.exe**是**Python，专门的 Python 解释器。

# css - CSS 列属性

> ID：11661054
> 
> 赞同：-1
> 
> 时间：2012-07-26T01:22:30.087
> 
> 标签：css

所以我注意到 column 属性在 Internet Explorer 中不起作用，所以我尝试寻找其他方法来创建列，我找到了一种使用表格的方法，但这看起来有点笨拙。有没有办法使用 div 并创建两个垂直列分割页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:38:58.297

您可以使用浮点数轻松完成此操作。例如：

**HTML**：

```
<div class="col1">Column1</div>
<div class="col2">Column2</div> 
```

**CSS**：

```
.col1 { width: 50%; height:100px; float:left; background:#ddd}
.col2 { width: 50%; height:100px; float:left; background:#777} 
```

**演示**：http: [//jsfiddle.net/AfgAG/9/](http://jsfiddle.net/AfgAG/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T01:43:00.060

您可以将两个`div`标签并排放置，一个为`float:left`CSS 属性，另一个为`float:right`. 这两个 div 必须在 DOM 树中处于同一级别。我的意思是：基本上，当您编写 HTML 时，两个 div 标签必须彼此“相邻”，这样一个标签不在另一个标签内。例如：

`<div> stuff </div> <div> more stuff </div>`没关系，但是

`<div> stuff </div> <div> <div> more stuff </div> </div>`将要求外部 div 标签用`float:left`or标记`float:right`，而不是直接包含“更多内容”的内部 div。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T01:36:06.767

`column-count`尽管在 10 之前不能在 IE中使用，但您可以使用。使用前缀它可以在其他所有内容中使用。

`float`不适合你吗？

# php - 如何在 symfony2 中创建自定义事件

> ID：11661057
> 
> 赞同：40
> 
> 时间：2012-07-26T01:22:39.883
> 
> 标签：php, symfony, events, observer-pattern, symfony-components

我想创建调用的自定义事件`user_logged`，以便我可以将我的侦听器附加到这些事件。

每当用户登录时，我都想执行一些功能。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-07-26T01:37:52.727

Create a class which extends `Symfony\Component\EventDispatcher\Event`.

Then, use the event dispatcher service to dispatch the event:

```
$eventDispatcher = $container->get('event_dispatcher');
$eventDispatcher->dispatch('custom.event.identifier', $event); 
```

You can register your event listener service like so:

```
tags:
    - { name: kernel.event_listener, event: custom.event.identifier, method: onCustomEvent } 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-12-08T17:49:42.747

这个答案有点扩展[答案](https://stackoverflow.com/a/11661148/3612353)。

服务.yml

```
custom.event.home_page_event:
    class: AppBundle\EventSubscriber\HomePageEventSubscriber
    tags:
        - { name: kernel.event_listener, event: custom.event.home_page_event, method: onCustomEvent } 
```

AppBundle/EventSubscriber/HomePageEventSubscriber.php

```
namespace AppBundle\EventSubscriber;
class HomePageEventSubscriber
{
    public function onCustomEvent($event)
    {
        var_dump($event->getCode());
    }
} 
```

AppBundle/事件/HomePageEvent.php

```
namespace AppBundle\Event;
use Symfony\Component\EventDispatcher\Event;
class HomePageEvent extends Event
{
    private $code;

    public function setCode($code)
    {
        $this->code = $code;
    }

    public function getCode()
    {
        return $this->code;
    }
} 
```

您希望的任何地方，例如在主页控制器中

```
 use AppBundle\Event\HomePageEvent;
    // ...
    $eventDispatcher = $this->get('event_dispatcher');
    $event = new HomePageEvent();
    $event->setCode(200);
    $eventDispatcher->dispatch('custom.event.home_page_event', $event); 
```

# ios - 将 jpg UIImage 转换为位图 UIImage？

> ID：11661060
> 
> 赞同：0
> 
> 时间：2012-07-26T01:23:25.737
> 
> 标签：ios, uiimage, jpeg

我试图让用户平移/缩放静态图像，主图像上有一个选择矩形，“放大”图像有一个单独的 UIView。

“放大”的 UIView 实现了 drawRect：

```
// rotate selectionRect if image isn't portrait internally
CGRect tmpRect = selectionRect;
if ((image.imageOrientation == UIImageOrientationLeft || image.imageOrientation == UIImageOrientationLeftMirrored || image.imageOrientation == UIImageOrientationRight || image.imageOrientation == UIImageOrientationRightMirrored)) {
    tmpRect = CGRectMake(selectionRect.origin.y,image.size.width - selectionRect.origin.x - selectionRect.size.width,selectionRect.size.height,selectionRect.size.width);
} 

// crop and draw
CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], tmpRect);
[[UIImage imageWithCGImage:imageRef scale:image.scale orientation:image.imageOrientation] drawInRect:rect];
CGImageRelease(imageRef); 
```

这方面的表现很糟糕。它在 [UIImage drawInRect] 上花费了 92% 的时间。

更深一点，在 ripc_AcquireImage 中为 84.5%，在 ripc_RenderImage 中为 7.5%。

ripc_AcquireImage 是 51% 的 jpg 解码，30% 的上采样。

所以......我想我的问题是避免这种情况的最佳方法是什么？一种选择是不以 jpg 开头，这是解决某些问题的真正解决方案 [ala [captureStillImageAsynchronouslyFromConnection without JPG intermediary](https://stackoverflow.com/questions/11571242/capturestillimageasynchronouslyfromconnection-without-jpg-intermediary) ]。但是，如果我从相机胶卷上得到一个 UIImage，比如说......有没有一种干净的方法来转换 UIImage-jpg？是否将其转换为正确的事情（本质上是否有一个“cacheAsBitmap”标志可以做到这一点？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:53:47.437

显然，这不仅仅是一个 JPG 问题——我认为，它是任何没有“理想原生表示”支持的东西。

我在以下方面取得了很好的成功（显着的性能改进）：

```
UIGraphicsBeginImageContext(image.size);
[image drawAtPoint:CGPointZero];
image = [UIGraphicsGetImageFromCurrentImageContext() retain];
UIGraphicsEndImageContext(); 
```

对于从相机胶卷和相机拍摄的东西。

# android - 如何在线程的 doInBackground 部分更新 UI？

> ID：11661061
> 
> 赞同：1
> 
> 时间：2012-07-26T01:23:30.887
> 
> 标签：android

我在 doInBackground() 方法中执行了一项耗时的任务，但在该方法中，我希望能够使用百分比数据更新 progressDialog。我怎样才能做到这一点？

```
 class GetDataTask extends AsyncTask<Void, Void, Void> {     

    @Override
    protected void onPreExecute()
    {
        mProgressDialog = ProgressDialog.show(getActivity(),Constants.APP_NAME,"Getting data", true);
    }

    @Override
    protected Void doInBackground(Void... params)
    {
        //go get data, update mProgressDialog
        return null;
    }

    @Override
    protected void onPostExecute(Void res)
    {           

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:29:42.647

像这样覆盖 onProgressUpdate() 方法：

```
@Override
protected void onProgressUpdate(Integer... progress) {
    super.onProgressUpdate(progress);
    mProgressDialog.setProgress(progress[0]);
} 
```

并发布进度

```
publishProgress((int) (total * 100 / fileLength)); 
```

尝试参考这个[链接](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:28:21.777

AsyncTask 具有方法`onProgressUpdate(Integer...)`，您可以调用例如每次迭代或每次进度完成时`doInBackground()`通过调用`publishProgress()`.

有关更多详细信息，请参阅[文档](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

注意第二个参数是进度变量

```
class GetDataTask extends AsyncTask<Void, String, Void> {     

    @Override
    protected void onPreExecute()
    {
        mProgressDialog = ProgressDialog.show(getActivity(),Constants.APP_NAME,"Getting data", true);
    }

    @Override
    protected Void doInBackground(Void... params)
    {
        publishProgress(""+(int)count);
        return null;
    }

    protected void onProgressUpdate(String... progress) {
        /**
         * Sets current progress on ProgressDialog
         */
        mProgressDialog.setProgress(Integer.parseInt(progress[0]));
    }

    @Override
    protected void onPostExecute(Void res)
    {           

    }
} 
```

# php - 在 PHP 和 MySQL 的登录系统中通过 IP 地址更改用户访问

> ID：11661062
> 
> 赞同：-3
> 
> 时间：2012-07-26T01:23:56.547
> 
> 标签：php, mysql, ip-address, registration

美好的一天，伙计们，

这应该是我将实施的最困难的系统。所以请帮助我了解这个系统。这是系统的流程：

用户将使用他/她在办公室的计算机登录网站。但如果他/她想在办公室外访问它怎么办？当用户想访问公司以外的网站时，系统将不允许用户访问该网站。但它会提示他/她一个对话框说“请联系MIS（075）653-3106）。现在一旦用户拨打MIS，网站管理员将接受用户请求，然后管理员给出用户注册页面给用户创建一个新的用户访问。

当用户注册他/她的用户帐户时，管理员将验证用户并且用户可以访问公司以外的网站。当用户想要访问网站时（这次用户在办公室），他/她会按照我所说的再次执行（请联系错误，验证，用户注册）。

问题是要成功实现这一点，系统将验证用户将用于访问该站点的计算机的 IP 地址。一旦用户访问该网站，他/她将使用的计算机必须将系统上注册的IP地址与他/她正在使用的计算机的IP地址匹配。当用户想要访问公司外部时。管理员会给出一个用户注册页面，但它会注册一个新的计算机ip地址，它会更改ip_address值以及mysql数据库上的用户名和密码值，以便注册用户访问和新的ip地址在系统上，以便用户可以访问公司以外的网站。如果用户将在办公室使用他/她的计算机，情况也是如此。

我正在使用 php 和 mysql 数据库，所以请你帮我解决这些问题。这是一个非常复杂的系统，所以我真的需要关于如何做到这一点的帮助。

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:30:41.070

这是流程：

*   用户访问 index.php 页面。系统找到 IP 地址并检查数据库以查看它们是否已知。如果没有找到，它会被插入到一个“临时”数据库中，该数据库标记了 IP 地址并且“未激活”。
*   用户拨打您的号码，该人检查数据库（可能使用 GUI）并看到用户使用错误的 IP 地址访问了该站点。他将 IP 地址标记为允许，然后用户重新加载他的页面并获得一个注册表单以创建一个新的用户帐户，并且 IP 地址与用户帐户相关联。
*   如果用户有多个端点，则将它们添加到具有以下结构的 ip_address 表中：

    +----+---------+------------+------------+ | 编号 | 用户 ID | ip_address | 激活 | +----+---------+------------+------------+

这样，user_id 可以与多个 IP 地址相关联，但它们可能不会被激活。如果用户在没有帐户的情况下访问不允许的 IP 地址，则会添加一个 NULL user_id（因为他们还没有帐户）和一个 0 表示“激活”，因为他们没有被允许进入系统。当管理员将它们标记为允许时，他将 1 表示为已激活并且用户注册。然后他们注册，user_id 放在 user_id 列中。

希望有道理，

大卫

# python - 列出 Python 分位数

> ID：11661070
> 
> 赞同：1
> 
> 时间：2012-07-26T01:25:01.080
> 
> 标签：python, algorithm, list, quantile

我正在做一个分位数问题，我需要做这样的事情

间隔：

```
150-155
155-160
160-165
165-170
170-175
175-180
180-185

```

* * *

```
>> inferior_limit = 150
>> superior_limit = 185
>> range = inferior_limit - superior_limit
>> number_of_intervals = 5 
```

这些是变量，我需要它，因为我正在做一个表格的间隔

```
>> width = range/number_of_intervals
>> while inferior_limit <= superior_limit
# there is my problem
>> inferior_limit += width
>> print inferior_limit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:46:34.287

这是你的意思吗？

```
>>> inf, sup, delta = 150, 185, 5
>>> print '\n'.join('{}-{}'.format(x, x + delta) for x in xrange(inf, sup, delta))
150-155
155-160
160-165
165-170
170-175
175-180
180-185 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:35:22.203

```
>>> start, stop, step = 150, 185, 5
>>> r = range(start, stop + 1, step) # You can use xrange on py 2 for greater efficiency
>>> for x, y in zip(r, r[1:]):
        print '{0}-{1}'.format(x, y)

150-155
155-160
160-165
165-170
170-175
175-180
180-185 
```

一种更有效的方法是使用`itertools`成对配方。

```
from itertools import tee, izip
def pairwise(iterable):
    "s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b)

for x, y in pairwise(r):
    print '{0}-{1}'.format(x, y) 
```

也只是为了好玩，这里有一个使用 的解决方案`itertools.starmap`，因为没有人使用它！

```
from itertools import starmap
print '\n'.join(starmap('{0}-{1}'.format, pairwise(r))) 
```

# ios - IOS 使视图控制器上的对象在一段时间后消失？

> ID：11661077
> 
> 赞同：2
> 
> 时间：2012-07-26T01:25:42.833
> 
> 标签：ios

正如标题所说，我希望我的一个对象在一段时间后消失。我在网上搜索了关于这个主题的内容，我找不到任何答案或教程，所以我从这里问它。

例子：

用户打开应用程序。

视图控制器出现在屏幕上，上面有一个标签。

该标签在 5 秒后消失。

我该怎么做 ？

我需要使用动画吗？

我真的更喜欢在没有任何动画的情况下进行（如果制作动画很容易，那么可以）

你能逐步解释一下吗？我会先尝试让我的标签消失，然后我会让一个视图对象消失。我知道想要一个视图消失很奇怪我可以使用另一个视图控制器，但我不想要它我想将它编码为一段时间后消失。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T01:32:17.703

您所要做的就是设置一个计时器。例如，

```
//In your viewDidLoad method of your view controller
[NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(hideLabel) userInfo:nil repeats:NO];

//In a method called hideLabel
- (void) hideLabel
{
    self.myLabel.hidden = YES;  //This assumes that your label is a property of your view controller
} 
```

这里的所有都是它的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T01:38:24.837

像这样启动一个计时器：

```
[NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(hideWithAnimation) userInfo:nil repeats:NO]; 
```

然后当计时器点击开始动画时，这很容易：

```
- (void)hideWithAnimation {

    [UIView animateWithDuration:0.5
                          delay:0.0 
                        options:UIViewAnimationOptionTransitionCrossDissolve
                     animations:^{
                                     // Fade the label
                                     [myLabel setAlpha:0]
                                 };
                     completion:NULL];
} 
```

这是 UIView 查找类方法的文档：

[UIView 类参考](https://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)

# javascript - javascript oop、instanceof 和基类

> ID：11661078
> 
> 赞同：13
> 
> 时间：2012-07-26T01:25:53.453
> 
> 标签：javascript, oop, polymorphism

我正在用 JavaScript 设计一些类层次结构。到目前为止它工作正常，但我看不出如何确定一个对象是否是父类的“实例”。例子：

```
function BaseObject(name){
    this.name = name;

    this.sayWhoAmI = function(){
        console.log(this.name + ' is a Derivation1 : ' + (this instanceof Derivation1));
        console.log(this.name + ' is a Derivation2 : ' + (this instanceof Derivation2));
        console.log(this.name + ' is a BaseObject : ' + (this instanceof BaseObject));
    };
}
function Derivation1(){
    BaseObject.apply(this, ['first derivation']);
}
function Derivation2(){
    BaseObject.apply(this, ['second derivation']);
}

var first = new Derivation1();
var second = new Derivation2(); 
```

`first.sayWhoAmI();`记录这个：

```
first derivation is a Derivation1 : true
first derivation is a Derivation2 : false
first derivation is a BaseObject : false 
```

同时`second.sayWhoAmI();`记录：

```
second derivation is a Derivation1 : false
second derivation is a Derivation2 : true
second derivation is a BaseObject : false 
```

我觉得`first`和`second`object 都应该说它们是`BaseObject`.

我知道 JavaScript 可能不是为此而设计的，但我想知道是否有办法实现这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T12:13:39.967

仅调用`Base.apply(...)`不会设置继承。所做`.apply`的只是设置`this`第一个参数，仅此而已。调用父构造函数很重要，但这还不够。

您要做的是正确设置原型链。也就是说，您必须设置`Derivation1.prototype`为继承自`Base.prototype`.

由于构造函数的每个实例都继承自构造函数的原型，因此您将看到如下代码

```
Derivation1.prototype = new Base(); 
```

这是**一个坏主意**，您已经可以看到原因：`Base`期望参数来设置实例特定的属性（`name`在这种情况下）。但是我们并不关心这些属性，因为我们稍后会在子构造函数中使用`Base.apply(this, ...)`.

所以我们所需要的只是一个继承自的对象`Base.prototype`，幸运的是，ECMASCript 5 定义了一个可以为我们做到这一点的函数（[polyfill](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/#Polyfill)）：

```
 Derivation1.prototype = Object.create(Base.prototype); 
```

这将创建一个继承自 的新对象`Base.prototype`。现在，由于您用新对象替换了原始原型，因此您必须设置`constructor`属性以使其正确指向`Derivation1`：

```
Derivation1.prototype.constructor = Derivation1; 
```

下面是一个完整的例子。还可以看看[这个小提琴](http://jsfiddle.net/fkling/wJE6s) 和[TJ Crowder 的这个出色的答案](https://stackoverflow.com/questions/11072556/objects-dont-inherit-prototyped-functions/11072626)，它解释了基本相同的问题，但可能以更好的方式。

* * *

**示例**：

```
function BaseObject(name){
    this.name = name;
}

// move properties shared by all instances to the prototype!
BaseObject.prototype.sayWhoAmI = function() {
    console.log(this.name + ' is a Derivation1 : ' + (this instanceof Derivation1));
    console.log(this.name + ' is a Derivation2 : ' + (this instanceof Derivation2));
    console.log(this.name + ' is a BaseObject : ' + (this instanceof BaseObject));
};

function Derivation1(){
    BaseObject.apply(this, ['first derivation']);
}

Derivation1.prototype = Object.create(BaseObject.prototype);
Derivation1.prototype.constructor = Derivation1;

// some useless method of the child "class"
Derivation1.prototype.someOtherMethod = function() {
    return 42;
};

var first = new Derivation1();
first.sayWhoAmI(); 
```

​</p>

# python - 从 python 脚本创建一个可执行文件

> ID：11661079
> 
> 赞同：3
> 
> 时间：2012-07-26T01:26:11.240
> 
> 标签：python, wxpython

我使用 python 和 wxpython 创建了一个 GUI 程序。现在可以将其转换为可执行文件。在过去的两天里，我按照 py2exe 的各种说明进行了尝试。命令提示符的所有说明均参考旧版本的 Windows，我使用的是 Windows 7。我以前从未使用过命令提示符，因为我还是编程新手。py2exe 是创建可执行文件的最佳方式还是有更好的选择？

我已按照有关创建 setup.py 文件的说明进行操作，内容如下：

```
from distutils.core import setup
import py2exe

setup(windows = ["Core.py"]) 
```

当我在命令提示符中输入命令时：

```
C:\Python27\Cylinderdrawer\python setup.py py2exe 
```

我得到以下信息：

```
'C:\Python27\Cylinderdrawer\python' is not recognized as an internal or eternal command, operable program or batch file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:39:30.093

有两个以上的选择。您可以使用 py2exe、PyInstaller、cx_freeze 和 bb_freeze。我喜欢使用 GUI2Exe 包装脚本，它包装了所有这些以及 py2app（适用于 Mac），因为它使调整设置变得轻而易举。

据我所知，cx_freeze、PyInstaller 和 bb_freeze 是 2008 年 py2exe 的最新版本。

至于您的问题，听起来您的系统路径上没有 Python。尝试输入你的 python 的完整路径。像这样的东西：

```
c:\python27\python.exe setup.py py2exe 
```

我不知道“Cylinderdrawer”是什么，但这不是 Windows 上 Python 可执行文件的标准位置。

也可以看看：

*   一个[py2exe教程](http://www.blog.pythonlibrary.org/2010/07/31/a-py2exe-tutorial-build-a-binary-series/)
*   一个[GUI2Exe 教程](http://www.blog.pythonlibrary.org/2010/08/31/another-gui2exe-tutorial-build-a-binary-series/)
*   一个[cx_freeze 教程](http://www.blog.pythonlibrary.org/2010/08/12/a-cx_freeze-tutorial-build-a-binary-series/)
*   bb_freeze[教程](http://www.blog.pythonlibrary.org/2010/08/19/a-bbfreeze-tutorial-build-a-binary-series/)
*   PyInstaller[教程](http://www.blog.pythonlibrary.org/2010/08/10/a-pyinstaller-tutorial-build-a-binary-series/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T01:28:25.640

您的两个选项是 py2exe 和 cx_freeze。py2exe 使用更广泛，但要正确处理所有细节可能会很棘手。如果您提供有关问题所在的详细信息，我们可能会提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T03:35:17.740

感谢大家的帮助。尽管我还没有完全解决这个问题，但这个问题已经解决了。如果我无法解决，我会单独询问后续问题。对于其他有类似问题的人，以下是我解决它的方法。

```
C:\Python27\Cylinderdrawer\python setup.py py2exe 
```

这是我最初放入命令提示符的内容。Cylinderdrawer 是我的项目文件夹。这是错误的，它必须是 python.exe 所在的位置。下一部分，即“setup.py”是安装文件。我可以让它工作的唯一方法是明确说明文件的位置。Bellow 是有效的命令。

```
C:\Python27\python "C:\Python27\Cylinderdrawer\setup.py" py2exe 
```

再次感谢所有帮助过的人。

# django - Django 的 OData 模式生成器 (CSDL)

> ID：11661084
> 
> 赞同：2
> 
> 时间：2012-07-26T01:26:42.163
> 
> 标签：django, django-models, odata, edmx, csdl

是否有现有的库可以从 Django 模型生成 CSDL 文档（可选地包裹在 EDMX 中）？最终目标是用于 OData 提供程序。

CSDL：[http ://www.odata.org/media/30002/OData%20CSDL%20Definition.html#csdl12.1](http://www.odata.org/media/30002/OData%20CSDL%20Definition.html#csdl12.1)

示例： http: [//msdn.microsoft.com/en-us/library/dd541140 (v=prot.10).aspx](http://msdn.microsoft.com/en-us/library/dd541140(v=prot.10).aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-22T22:16:26.417

现在这可能对您没有太大帮助，但对于后代，您可以查看[Pyslet](http://www.pyslet.org) Odata2 Python 模块。作者在[这里讨论了将它与 Django 一起使用](http://swl10.blogspot.com/2014/05/adding-odata-support-to-django-with.html)

# php - 网站（如 Facebook）上的图像标记，其中标记存储在数据库中

> ID：11661085
> 
> 赞同：1
> 
> 时间：2012-07-26T01:27:14.020
> 
> 标签：php, javascript, jquery, web-applications

有谁知道用于将标签数据读取和写入数据库而不是本地存储文件的网站的图像标记解决方案？我查看了[http://jquery-notes.rydygel.de/index.php](http://jquery-notes.rydygel.de/index.php)但当前版本不支持数据库。我只需要一个可以在所有主流浏览器上使用的解决方案。我不想从本地文件读取和写入的原因是因为可能有很多图像，我不想在本地存储所有内容。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:44:15.213

您将需要将注释存储到具有以下行的数据库表中

```
ID
IMAGE_ID
LEFT
TOP
WIDTH
HEIGHT
DATE
NOTE
AUTHOR
LINK 
```

而且我相信该插件有一个用于检索笔记的 php 类。该文件是 notes.class.php

# iphone - cocos2d游戏中实现关卡的最佳实践

> ID：11661086
> 
> 赞同：4
> 
> 时间：2012-07-26T01:27:18.560
> 
> 标签：iphone, ios, cocos2d-iphone, levels

我正在制作一个简单的 cocos2d 冒险游戏，但不知道如何实现任何类型的关卡。我已经搜索了教程，但找不到任何教程。

有什么我可以用来计算 cocos2D 中的级别的吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T01:52:28.670

在 cocos2d 游戏中实现关卡的方法有很多。我认为一个简单的方法是：

1.  首先为您的关卡建模。决定应该在关卡的数据模型中存储什么。我认为通常您将拥有至少两种数据：
    *   玩家数据（运行时生成，例如分数、角色的当前位置等）
    *   关卡数据（例如，在这个关卡的屏幕上有什么，通过这个关卡的规则等） 这个数据可以是固定的或动态的。如果关卡是开发者设计的，比如愤怒的小鸟，可以将这部分数据存储在外部配置文件中，按需加载；如果级别是根据一些规则动态生成的，那么规则应该存储在数据模型中。）
2.  设计一个通用的游戏层，可以根据上述数据模型的实例进行初始化。层类控制关卡的呈现，并负责用户输入处理。
3.  如果您的关卡共享一些全局数据，您可以创建另一个共享数据模型来管理这些东西（例如总分、成就、玩家姓名等）。创建此类的共享实例并通过游戏层管理其中的数据。

您还可以考虑使用更高级的方式，例如使用脚本（例如 Lua）来实现关卡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T23:47:42.663

您提到不会找到任何教程。我同意寻找 cocos2d 的免费在线教程可能具有挑战性。当我开始学习它时，我遇到了同样的问题。我建议拿一本关于 cocos2d 的书，例如[Learning cocos2d](https://rads.stackoverflow.com/amzn/click/com/0321735625)。API 有很多内容，除非您有很多编程经验，否则即使没有任何教程或指导，您也很难创建一个基本的游戏。

# objective-c - NSTimer 和 NSRunLoop

> ID：11661089
> 
> 赞同：6
> 
> 时间：2012-07-26T01:27:45.943
> 
> 标签：objective-c, nstimer, cllocationmanager, nsrunloop

我的应用程序使用`CLLocationManager`. 在代表电话会议中`didUpdateToLocation`，我做了所有有趣的事情来保存他们的位置。但是，我需要一种方法来测试它们是否已经停止。那样我就可以停止记录位置并考虑他们的旅行。所以我有一个每次调用时都会添加和删除的`NSTimer`in 。当用户停止并停止被调用时，它将被启动。`CCLocationManager``didUpdateToLocation``CLLocationManager`

我能得到`NSTimer`工作的唯一方法是：

```
[[NSRunLoop mainRunLoop] addTimer:userStoppedMovingTimer forMode:NSRunLoopCommonModes]; 
```

然后删除它：

```
[userStoppedMovingTimer invalidate]; 
```

过去我从来不需要添加这样的计时器。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T04:08:55.470

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)中：

> 创建定时器的三种方法：
> 
> 1.  使用`scheduledTimerWithTimeInterval:invocation:repeats:`or `scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`类方法创建计时器并在默认模式下将其安排在当前运行循环中。
>     
>     
> 2.  使用`timerWithTimeInterval:invocation:repeats:`or `timerWithTimeInterval:target:selector:userInfo:repeats:`类方法创建计时器对象，而不将其安排在运行循环中。`addTimer:forMode:`（创建完成后，你必须通过调用对应的NSRunLoop对象的方法，手动将定时器添加到运行循环中。）
>     
>     
> 3.  分配计时器并使用 `initWithFireDate:interval:target:selector:userInfo:repeats:`方法对其进行初始化。（创建完成后，必须通过调用`addTimer:forMode:`相应`NSRunLoop` 对象的方法手动将定时器添加到运行循环中。）

您之前可能使用的是选项 1，现在您使用的是选项 2 或 3。

# iphone - 使用 Twitter 集成和 Photobucket 防止图像模糊/压缩

> ID：11661092
> 
> 赞同：3
> 
> 时间：2012-07-26T01:28:16.123
> 
> 标签：iphone, objective-c, ipad, twitter

Photobucket 似乎是使用 iOS 5 的内置 twitter 集成发布的图像的默认存储库。但是 Photobucket 会压缩这些图像，使它们模糊，在某些情况下使它们无法使用（取决于应用程序）。有什么办法可以防止这种情况发生吗？要么告诉 PB 不要压缩，要么告诉 Twitter 框架使用不同的照片共享服务，任何使这些图像正常的方法。

相反，我可以将完全相同的图像附加到电子邮件中，它看起来很好，没有模糊，所以它被引入到 Twitter 过程中。

# android - Android HTML5 UI 未完全重绘

> ID：11661098
> 
> 赞同：1
> 
> 时间：2012-07-26T01:28:57.093
> 
> 标签：android, html

我们有一个在 PhoneGap 中运行的基于 HTML5 的应用程序，组件使用（大部分）jQuery。相当有规律地，UI 会在 javascirpt 中更改，但不会完全正确呈现。你有点需要用另一个触摸事件来轻推它，这会导致它“记住”重绘所有内容。我怀疑它试图优化绘图，但它忘记更新屏幕的其他已更改部分。

我将开始修改不同的 css 设置，希望结果是某种简单的错误，但我很惊讶这没有得到更广泛的报道（这让我认为这是由于“魔法css 属性的组合”）。

到目前为止，绝大多数测试都是在 ICS 上进行的。我现在手头没有 2.x 设备，但明天会试试。我的手机更新为 Jelly Bean，所以我会尝试一下，看看有什么不同。

稍后将尝试发布屏幕截图。

提前致谢。

更新

这在果冻豆中效果很好。我在公共 Android 错误数据库中进行了搜索，但没有出现任何结果。我将不得不挖出另一部带有 ICS 的手机并尝试不同的 CSS 设置，看看它是否会消失。

# c# - 基于C#中的复选框显示或不显示文本框

> ID：11661102
> 
> 赞同：0
> 
> 时间：2012-07-26T01:29:57.250
> 
> 标签：c#

你们对做一个检测复选框以查看它是否会显示文本框的winform有任何想法吗？例如，如果选中复选框，则会有一个文本框。如果未选中该复选框，则文本框将消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:33:41.377

在您的复选框选中的事件处理程序...

```
textBox1.Visible = checkBox1.Checked; 
```

..如果你想反过来，你可以这样做：

```
textBox1.Visible = !checkBox1.Checked; 
```

注意感叹号，意思是“不是”。

# sprite - Three.js PlaneGeometry 给我侧面的纹理

> ID：11661105
> 
> 赞同：4
> 
> 时间：2012-07-26T01:30:20.280
> 
> 标签：sprite, webgl, three.js

[如这个小提琴](http://jsfiddle.net/NycWc/21/)所示，当旋转时，一个精灵会在某些角度消失，并且只渲染一侧。怎么会？渲染双方的解决方案是什么？我必须操纵角度吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T01:50:54.103

默认情况下，面是单面的。

要渲染两侧，请设置`mesh.material.side = THREE.DoubleSide;`

三.js r.58

# c# - 如何使用反射简化 Linq 扩展方法调用？

> ID：11661112
> 
> 赞同：6
> 
> 时间：2012-07-26T01:31:24.287
> 
> 标签：c#, linq, generics, reflection, expression-trees

**背景：**

我有一个 Web 服务，它返回表中的行（表名作为参数提供），其 Id 大于某个 Id（也作为参数提供）。我们假设 Id 是连续的。

我正在使用 Linq to SQL 进行数据库交互，所以我想将新行返回为：

```
List<WhateverObject> 
```

因为我们只在运行时知道表名，所以我不能以正常方式使用 Linq，这使事情变得更加复杂。

**问题：**

代码如下（并且有效）。我怎样才能简化它？它似乎过于复杂。

```
private object GetUpdateList(string tableName, int Id, DataClassesDataContext db)
{
    PropertyInfo pi = db.GetType().GetProperty(tableName);

    var table = pi.GetValue(db, null);

    // Get type of object within the table.
    Type genericType = table.GetType().GetGenericArguments()[0];

    // The Where method lives on the Enumerable type in System.Linq
    var whereMethods = typeof(System.Linq.Enumerable)
        .GetMethods(BindingFlags.Static | BindingFlags.Public)
        .Where(mi => mi.Name == "Where");

    // There are actually 2 where methods - we want the one with 2 parameters
    MethodInfo whereMethod = null;
    foreach (var methodInfo in whereMethods)
    {
        var paramType = methodInfo.GetParameters()[1].ParameterType;
        if (paramType.GetGenericArguments().Count() == 2)
        {
            // we are looking for  Func<TSource, bool>, the other has 3
            whereMethod = methodInfo;
            break;
        }
    }

    Func<object, bool> IdEquals = BuildEqFuncFor("Id", Id);

    whereMethod = whereMethod.MakeGenericMethod(genericType);
    var result = whereMethod.Invoke(table, new object[] { table, IdEquals });

    MethodInfo toListMethod = typeof(System.Linq.Enumerable).GetMethod("ToList").MakeGenericMethod(genericType);
    return toListMethod.Invoke(result, new object[] { result });
}

// Build lambda expression for use in Linq
private static Func<object, bool> BuildEqFuncFor(string prop, object val)
{
    // We know we are comparing integers here so cast them.
    // There is probably a more general solution.
    return t => (int)t.GetType().InvokeMember(prop, BindingFlags.GetProperty, null, t, null) > (int)val;
} 
```

为了提出这个解决方案，我不得不参考以下问题：

*   [如何使用反射调用扩展方法？](https://stackoverflow.com/questions/1452261/how-do-i-invoke-an-extension-method-using-reflection)
*   [如何通过反射调用 List<T> 的扩展方法“ElementAt”？](https://stackoverflow.com/questions/1948506/how-to-call-extension-method-elementatof-listt-with-reflection)
*   [如何从泛型类或方法的成员中获取 T 的类型？](https://stackoverflow.com/questions/557340/c-sharp-generic-list-t-how-to-get-the-type-of-t)
*   [在 C# 中使用反射将 func 转换为谓词](https://stackoverflow.com/questions/3495243/convert-func-to-predicate-using-reflection-in-c-sharp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T02:17:04.740

尝试这样的事情：

```
private IList GetUpdateList(string tableName, int id, DataClassesDataContext db)
{
    System.Reflection.PropertyInfo pi = db.GetType().GetProperty(tableName);

    var table = pi.GetValue(db, null);

    // Get type of object within the table.
    Type genericType = table.GetType().GetGenericArguments()[0];

    var param = Expression.Parameter(genericType, "x");
    var predicateExpr = Expression.Lambda(
        Expression.GreaterThan(
            Expression.Property(param, "Id"),
            Expression.Constant(id)),
        param);

    return this
        .GetType()
        .GetMethod("GetUpdateListGeneric")
        .MakeGenericMethod(genericType)
        .Invoke(this, new[] { table, predicateExpr }) as IList;
}

private IList<T> GetUpdateListGeneric<T>(
    Table<T> table, 
    Expression<Func<T, bool>> predicate) where T : class
{
    return table.Where(predicate).ToList();
} 
```

# objective-c - NSUserDefaults 和保存大小

> ID：11661119
> 
> 赞同：1
> 
> 时间：2012-07-26T01:33:29.200
> 
> 标签：objective-c, xcode, core-data, nsmutablearray, nsuserdefaults

我有一个应用程序可以在用户开车时跟踪他们。它使用 CLLocationManager 并且每次调用 didUpdateToLocation 时我都会保存 CLLocation 点。

大约 25 英里的行程会产生大约 1200 点附近的某个地方。

到目前为止，我将此点数组保存到用户默认值以进行测试。我应该查看 CoreData 以正确保存此信息吗？或者可能只是将所有内容都写到文件中？

我担心的是 NSUserDefaults 可以“最大化”吗？我可能有数百个保存的数组，每个数组都有数千个 CLLocation 点。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:52:43.887

无论用户默认的大小如何，都不是为了这个目的。顾名思义，它应该用于保存标志和变量，以自定义或保存用户的会话细节。尽管核心数据确实为此提供了一个优雅的解决方案并且是最有效的解决方案。如果您不想处理此问题，则必须创建自己的文件并将其保存在那里。这也很简单。但是，如果您计划扩展可能性，例如多用户、不同的运行、许多属性等，我建议 coredata，因为它是一种真正的数据库式方法。

[http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

编辑：用户的默认大小没有限制。不过，如果您浏览苹果文档，您会发现它并非用于您描述的目的。

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/38091-size-limitations-with-nsuserdefaults.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/38091-size-limitations-with-nsuserdefaults.html)

# python - 为什么我在此脚本中收到 NameError？

> ID：11661121
> 
> 赞同：0
> 
> 时间：2012-07-26T01:33:51.493
> 
> 标签：python, python-2.7

我正在做来自[Wikibooks](http://en.wikibooks.org/wiki/Main_Page)**[的 Non-Programmers Tutorial For Python2.6](http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_2.6)**的练习。

我有这个脚本：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

print("Program to calculate the area of square, rectangle and circle.")

def areaOfSquare():
    side = input("What is the length of one side of the square? ")
    area = side ** 2
    return area

def areaOfRectangle():
    width = input("What is the width of the rectangle? ")
    height = input("What is the height of the rectangle? ")
    area = 2*width+2*height
    return area

def areaOfCircle():
    radius = input("What is the radius of the circle? ")
    area = 3.14 * radius ** 2
    return area

geometry = input("What do you wan to calculate the area of? [S/C/R] ")

str(geometry)

if geometry == "S":
    areaOfSquare()
elif geometry == "R":
    areaOfRectangle()
elif geometry == "C":
    areaOfCircle()
else:
    print "Press S for square, C for circle and R for rectangle." 
```

这是shell中发生的事情：

```
prompt$ python script.py 
Program to calculate the area of square, rectangle and circle.
What do you wan to calculate the area of? [S/C/R] S
Traceback (most recent call last):
  File "allarea.py", line 22, in <module>
    geometry = input("What do you wan to calculate the area of? [S/C/R]")
  File "<string>", line 1, in <module>
NameError: name 'S' is not defined 
```

`C`和也会发生同样的事情`R`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T01:35:49.727

在 Python 2 中，`input`从用户那里获取一个字符串，并对其进行评估。因此，当您输入“S”时，它会尝试评估它，寻找不存在的名称“S”。

使用`raw_input`而不是`input`.

是的，这太疯狂了。它在 Python 3 中得到修复，`raw_input`现在命名为`input`.

# ios5 - 在 iOS 5 中播放视频

> ID：11661127
> 
> 赞同：2
> 
> 时间：2012-07-26T01:34:29.187
> 
> 标签：ios5, video

我正在尝试遵循本教程[链接](http://www.techotopia.com/index.php/Video_Playback_from_within_an_iOS_5_iPhone_Application)，但我遇到了问题。有人可以看看，让我知道需要改变什么。我试图查找其他示例，但似乎都没有。请让我知道需要更改的内容。

以下是错误

体系结构 i386 的未定义符号：“_OBJC_CLASS_$_MPMoviePlayerController”，引用自：VideoScreenViewController.o 中的 objc-class-ref “_MPMoviePlayerPlaybackDidFinishNotification”，引用自：VideoScreenViewController.o 中的 -[VideoScreenViewController playVideo:] -VideoScreenViewController 中的 [VideoScreenViewController moviePlayBackDidFinish:]。 o ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这是代码

```
//  VideoScreenViewController.h

#import <UIKit/UIKit.h>
#import "MediaPlayer/MediaPlayer.h"
@interface VideoScreenViewController : UIViewController

@property (strong, nonatomic) MPMoviePlayerController *moviePlayer;

- (IBAction)playVideo:(id)sender;

@end

    }

#import "VideoScreenViewController.h"
#import "MediaPlayer/MediaPlayer.h"
@interface VideoScreenViewController ()

@end

@implementation VideoScreenViewController

@synthesize moviePlayer;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    self.view.backgroundColor = [UIColor clearColor];
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)playVideo:(id)sender {

        NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                             pathForResource:@"Movie" ofType:@"MOV"]];
        moviePlayer =  [[MPMoviePlayerController alloc]
                        initWithContentURL:url];

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(moviePlayBackDidFinish:)
                                                     name:MPMoviePlayerPlaybackDidFinishNotification
                                                   object:moviePlayer];

        moviePlayer.controlStyle = MPMovieControlStyleDefault;
        moviePlayer.shouldAutoplay = YES;
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES animated:YES];

}

- (void) moviePlayBackDidFinish:(NSNotification*)notification {

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                         pathForResource:@"Movie" ofType:@"MOV"]];
    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [[NSNotificationCenter defaultCenter] 
     removeObserver:self
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:player];

    if ([player
         respondsToSelector:@selector(setFullscreen:animated:)])
    {
        [player.view removeFromSuperview];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T11:41:29.090

将 MediaPlayer.framework 添加到您的项目中..然后尝试..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T19:27:38.467

我今天遇到了同样的问题，我发现必须正确添加媒体播放器框架：所以首先右键单击“框架”单击“将文件添加到..”，找到文件夹“开发人员/平台”中的框架。 ...etpp”然后单击“为任何添加的文件夹创建文件夹引用”，最后单击“添加”-就是这样。在此之后，错误不再出现。

# javascript - 即使沙盒设置关闭，FB.getLoginStatus 也不会触发

> ID：11661132
> 
> 赞同：0
> 
> 时间：2012-07-26T01:34:56.307
> 
> 标签：javascript, facebook

我正在使用 Facebook API 来检查访问我页面的用户是否登录到 Facebook。我尝试了一切，无法提出解决方案。我想特别声明**沙盒模式已关闭**。我的代码就在下面；

```
<div id="fb-root"></div>
    <script>

    function fbLoginStatus(response) {
        console.log("Status: "+response.session);
         if(response.session) {
            //user is logged in, display profile div
            alert("Logged in");
         } else {
            //user is not logged in, display guest div
            alert("Not logged in");
         }
     }
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '111111111111111',  // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });
        FB.getLoginStatus(function(response){
            console.log("Hey");
            if(response.session){
                console.log("You are logged in");
            }
            else{
                console.log("You are not logged in");
            }
        });
        // Additional initialization code here
      };
      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}

         js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "http://connect.facebook.net/en_US/all.js";
          ref.parentNode.insertBefore(js, ref);
        }(document));

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:53:06.687

FB.getLoginStatus 是用来检测用户是否登录FB的函数。在函数的回调中，您正在检查**response.session**但据我了解，此**会话**不是返回 JSON 对象的有效属性。您应该使用**response.status**。所以代码将如下所示。

```
 FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    alert("LOG IN");
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 }); 
```

希望这可以帮助

考希克

# xml-serialization - Jersey 客户端 - 将 XML 类型的 ClientResponse 实体主体解组为 POJO

> ID：11661133
> 
> 赞同：1
> 
> 时间：2012-07-26T01:34:56.883
> 
> 标签：xml-serialization, jersey

我已经阅读了这里的很多示例，但我仍然无法隔离我的编码错误。我正在尝试使用内置的 Jersey 客户端 MessageBodyReaders。

我的 pojo 看起来像这样：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {"name", "complexId", "libraryList", "partitionList", "nextLinks"})
@XmlRootElement(name = "LibraryComplex")

public class YapiLibraryComplex 
{
    @XmlTransient LibraryComplex libComplex;
    String name;
    int complexId;
    List<Integer> libraryList;
    List<String> partitionList;
    List<URI> nextLinks;
         .
         .
         . 
```

我的服务如下所示：

```
@Path ("/")
public class YAPIWebService
{
    @Context Application yapiAppl;
    @Context UriInfo uriInfo;

    @GET
    @Produces ("application/xml")
    //@Produces ("MediaType.APPLICATION_XML")
    public Response getLibraryComplex()
    {
        LibraryComplex libComplex = (((YAPIapplication) yapiAppl).getLibComplex());
        YapiLibraryComplex yapiLibPlex;
            .
            .
            .

        return Response.ok(yapiLibPlex).build(); 
```

和我的客户：

```
public static void main(String[] args) 
{   //client client = new client();
    System.out.println("the beginning");
    //ClientConfig cc = new DefaultClientConfig();
    //cc.getClasses().add(com.sun.jersey.api.core.);
    //Client c = Client.create(cc);
    Client c = Client.create();
    WebResource rsrc = c.resource("http://localhost:7101/");
    //ClientResponse response = rsrc.get(ClientResponse.class);

    ClientResponse response = rsrc.accept(MediaType.APPLICATION_XML).get(ClientResponse.class);

    YapiLibraryComplex libPlex = response.getEntity(YapiLibraryComplex.class);
    System.out.println("the libPlex object is " + libPlex.toString());

    String entityBody = response.getEntity(String.class);
    System.out.println("the response as a string is " + entityBody);
    System.out.println("the status is " + response.getStatus());
    System.out.println("the links are " + response.getLinks());

    System.out.println("the end");
} 
```

}

还有我的堆栈跟踪：

开始

2012 年 7 月 25 日下午 6:47:22 com.sun.jersey.core.impl.provider.xml.SAXParserContextProvider getInstance 警告：无法在 SAXParserFactory 上设置 JAXP 功能 XMLConstants.FEATURE_SECURE_PROCESSING。外部常规实体处理已禁用，但其他潜在的安全相关功能将不会启用。org.xml.sax.SAXNotRecognizedException：[http://javax.xml.XMLConstants/feature/secure-processing](http://javax.xml.XMLConstants/feature/secure-processing) at oracle.xml.jaxp.JXSAXParserFactory.setFeature(JXSAXParserFactory.java:129)

```
at com.sun.jersey.core.impl.provider.xml.SAXParserContextProvider.getInstance(SAXParserContextProvider.java:80)

at com.sun.jersey.core.impl.provider.xml.SAXParserContextProvider.getInstance(SAXParserContextProvider.java:54)

at com.sun.jersey.core.impl.provider.xml.ThreadLocalSingletonContextProvider$1.initialValue(ThreadLocalSingletonContextProvider.java:64)

at java.lang.ThreadLocal.setInitialValue(ThreadLocal.java:141)

at java.lang.ThreadLocal.get(ThreadLocal.java:131)

at com.sun.jersey.core.impl.provider.xml.ThreadLocalSingletonContextProvider$2.getValue(ThreadLocalSingletonContextProvider.java:77)

at com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider.readFrom(XMLRootElementProvider.java:113)

at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:111)

at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:554)

at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:506)

at .tape.acs.yapi.smokeTest.main(smokeTest.java:32) Exception in thread "main" javax.ws.rs.WebApplicationException: javax.xml.bind.JAXBException: Error creating SAXSource - with linked exception: [org.xml.sax.SAXNotSupportedException: SAX feature 'http://xml.org/sax/features/external-general-entities' not supported.]

at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:115)

at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:554)

at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:506)

at .tape.acs.yapi.smokeTest.main(smokeTest.java:32) Caused by: javax.xml.bind.JAXBException: Error creating SAXSource - with linked exception:[org.xml.sax.SAXNotSupportedException: SAX feature 'http://xml.org/sax/features/external-general-entities' not supported.]

at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getSAXSource(AbstractJAXBProvider.java:205)

at com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider.readFrom(XMLRootElementProvider.java:113)

at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.readFrom(AbstractRootElementProvider.java:111)

... 3 more Caused by: org.xml.sax.SAXNotSupportedException: SAX feature 'http://xml.org/sax/features/external-general-entities' not supported.

at oracle.xml.parser.v2.NonValidatingParser.setFeature(NonValidatingParser.java:1975)

at oracle.xml.parser.v2.SAXParser.setFeature(SAXParser.java:270)

at oracle.xml.jaxp.JXSAXParserFactory.newSAXParser(JXSAXParserFactory.java:92)

at com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getSAXSource(AbstractJAXBProvider.java:201)

... 5 more Process exited with exit code 1. 
```

# playframework - 在没有 java 日志实例的情况下部署 playframework

> ID：11661134
> 
> 赞同：1
> 
> 时间：2012-07-26T01:35:12.087
> 
> 标签：playframework, playframework-2.0

大家好，所以我已经编写了我的游戏应用程序，一切正常。

我在 Windows 机器上安装它，我需要它 24/7 运行。我希望这一切都是自动的，这样用户就不必在每次计算机重新启动或出现问题时进入命令并运行 play start。

所以我编写了 ac# 包装服务来监控 RUNNING_PID 以检查服务是否正在运行，如果没有则打开一个新的 cmd 提示符并运行 play start。

所以这是工作 atm，但是当您运行 play start 时，它会打开两个 java 进程 1 是实际服务，另一个是日志服务。 ![两个 java 进程的图像](../Images/c273aaf9e6c227a40e59fb0da95edd6f.png)

有没有办法不打开这个？配置选项或额外的启动参数？

关于我如何解决这个问题的任何其他想法？

我看过使用 stage 和 dist 但我发现它们不起作用。创建文件后，新的启动命令不会执行任何操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T01:02:10.687

大家好，所以我找到了解决方案。

不时使用 dist，然后使用以下脚本创建一个新的 start.bat 文件：

```
@echo off

if "%OS%" == "Windows_NT" (
  set "DIRNAME=%~dp0%"
) else (
  set DIRNAME=.\
)
java -cp "%DIRNAME%\lib\*" %* play.core.server.NettyServer 
```

我的解决方案在这里解决了：https: [//plus.google.com/u/0/108788785914419775677/posts/RxohCRp52J5](https://plus.google.com/u/0/108788785914419775677/posts/RxohCRp52J5)

我仍然不确定如何将这个新脚本文件自动包含到 dist zip 文件中。如果有人知道如何做到这一点会有所帮助吗？

# html - 在数据属性上使用 css tag Is it possible to use css on a data attribute of an object tab? I have code like this (I know I left out attributes like type): I want to kn 问问题 问问题 2012-07-26T01:35:30.307 1218 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Is it possible to use css on a data attribute of an object tab? I have code like this (I know I left out attributes like type): I want to know if it is possible to style "www.example.com" within my own site using css. Because the site I am trying to style is a mobile site, it looks different in every version of any browser. I want to style it so it looks the same across all browsers. Is there a ramification legally to doing this to another site (not owned by me)? In Python 2, input takes a string from the user, and evaluates it. So when you enter "S", it tries to evaluate it, looking for the name "S", which doesn't exist. Use raw_input instead of input. Yes, this was crazy. It's fixed in Python 3, where raw_input is now named input. htmlcssobjectstyles 4 2 回答 2 This answer is useful 0 You should be able to use the attribute selector. object[data="www.example.com"]{ /* styles */ } 于 2012-07-26T01:41:20.480 回答 This answer is useful 0 不，您不能通过嵌入页面设置嵌入页面的样式。如果可能，那将是不合法的。作为一项规则，未经许可的嵌入也不是合法的。 于 2012-07-26T03:31:05.617 回答 Related 2 batch-file - Windows BAT：查找多个文件中出现的字符串 1 ember.js - 使用带有 FIXTURES 的嵌入对象 1 libgdx - 如何使用 Actor.hit 进行碰撞检测？ 0 php - 如何查询字母数字主键 3 javascript - jQuery .val() 程序 1 c# - 如何在登录窗口表单c#中使用会话？ 1 git - git 中的 core.excludesfile 和 user.excludesfile 1 javascript - while循环增量值在函数内不起作用 1 c# - 错误对象引用未设置为对象的实例？ 2 sql - SQL 代码安全性 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11661137
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, css, object, styles

Is it possible to use css on a data attribute of an object tab? I have code like this (I know I left out attributes like type):

```
<object data="www.example.com"> 
```

I want to know if it is possible to style "www.example.com" within my own site using css. Because the site I am trying to style is a mobile site, it looks different in every version of any browser. I want to style it so it looks the same across all browsers. Is there a ramification legally to doing this to another site (not owned by me)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:41:20.480

You should be able to use the attribute selector.

```
object[data="www.example.com"]{
    /* styles */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:31:05.617

不，您不能通过嵌入页面设置嵌入页面的样式。如果可能，那将是不合法的。作为一项规则，未经许可的嵌入也不是合法的。

# google-apps-script - Replicate tab Panel in GUI Builder google apps

> ID：11661146
> 
> 赞同：1
> 
> 时间：2012-07-26T01:36:43.713
> 
> 标签：google-apps-script

I think I've seen this answer, but I can't remember where for certain.

I'm trying to to create a tabbed panel interface using the GUI Builder, but don't see that option. The part I seem to recall is someone having an approach to replicate that in the GUI Builder. I just can't seem to find that information in my brain, the old google groups or here.

Can someone jog my memory?

Thank you...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:02:42.897

也许你指的是[这个帖子？](https://stackoverflow.com/questions/11100349/what-is-he-best-way-to-manage-two-ui/11100836#11100836)无论如何，无论您有多少面板，您都可以在 GUI 中设计它们，一个在另一个之上，或者（更简单地）在一个“父”垂直面板中一个在另一个之上，并使用客户端处理程序来显示/隐藏一个你需要的。我在[这里有一个 UI 中有 2 个面板](https://sites.google.com/site/appsscriptexperiments/home/a-database-project/a-label-printing-tool)的示例，UI 是用脚本设计的，但这并不重要，请查看客户端处理程序以了解它是如何工作的。

如果今晚我有空闲时间，我将在 GUI 中为 4 个面板制作演示脚本；-)。

编辑：这是[一个测试示例](https://script.google.com/macros/s/AKfycbxlPTVLSLfO3d1w2vSrMzzh57p9DJM6ivCIHiIfTB2AKqubSs1L/exec)（独立）或[嵌入到谷歌网站](https://sites.google.com/site/appsscriptexperiments/home/multipanel-ui)+[脚本链接](https://script.google.com/d/10BW-J2rMmnQS3770XrpkHx_fwofzsL9tiDNohn4vBHlK5dYbdQTNGK0E/edit)（复制编辑）

*请注意，在 GUI 构建器中，您必须“玩”每个面板的可见性才能对其进行操作，我使用了一个足够大的主面板来将 2 个面板放在一起，这样您就可以更好地了解面板之间的“和谐”（在我的测试中不是这种情况;-))*

和代码（非常简单的基本示例 4 个面板，每个面板都有一个文本框和一个标签，只是为了测试按钮上的处理程序）：

```
function doGet() {
  var app = UiApp.createApplication();

  var UI=app.loadComponent('multiUi')

  var panel1 = app.getElementById('panel1')
  var panel2 = app.getElementById('panel2')
  var panel3 = app.getElementById('panel3')
  var panel4 = app.getElementById('panel4')

  var Button1 = app.getElementById('Button1')
  var Button2 = app.getElementById('Button2')
  var Button3 = app.getElementById('Button3')
  var Button4 = app.getElementById('Button4')

  var pHandler1 = app.createClientHandler()
  .forTargets(panel1).setVisible(true).forTargets(panel2,panel3,panel4).setVisible(false)
  Button1.addClickHandler(pHandler1)

  var pHandler2 = app.createClientHandler()
  .forTargets(panel2).setVisible(true).forTargets(panel1,panel3,panel4).setVisible(false)
  Button2.addClickHandler(pHandler2)

  var pHandler3 = app.createClientHandler()
  .forTargets(panel3).setVisible(true).forTargets(panel2,panel1,panel4).setVisible(false)
  Button3.addClickHandler(pHandler3)

  var pHandler4 = app.createClientHandler()
  .forTargets(panel4).setVisible(true).forTargets(panel2,panel3,panel1).setVisible(false)
  Button4.addClickHandler(pHandler4)

  app.add(UI)
  return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:36:07.540

以下代码根据您输入的数组动态生成选项卡：

```
function doGet() {
    // create application
    var app = UiApp.createApplication();

    // set array
    var aTabs = ['donald','katrijn','dagobert'];                                                         

    // create tab panel
    var pTab = app.createTabPanel();                                                

    // add tabs to panel
    for(var k=0; k<pTabs.length; k++) {
      pTab.add(app.createLabel("This tab is reserved for " +  aTabs[k]), aTabs[k]);
    } 

    // add panel to application 
    app.add(pTab); 

    // set focus to first tab                                                                                     
    pTab.selectTab(0);                                                                                   

    // return to application
    return app;
} 
```

请参阅[链接](https://developers.google.com/apps-script/class_tabpanel)以获取 tabPanel 参考。

将脚本发布为网络应用程序，允许您将脚本插入谷歌网站。

# java - 在 Java 中读取和写入 XML 文件的问题

> ID：11661152
> 
> 赞同：0
> 
> 时间：2012-07-26T01:38:19.810
> 
> 标签：java, xml-parsing, domparser

我正在使用 DocumentBuilderFactory 读取 XML 文件并使用不同的文件名写入相同的文件。这是我的代码：

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
                DocumentBuilder db = dbf.newDocumentBuilder();
                Document dom = db.parse(new InputSource("internal.xml"));

                TransformerFactory transformerFactory = TransformerFactory.newInstance();
                Transformer transformer = transformerFactory.newTransformer();
                DOMSource source = new DOMSource(dom);
                StreamResult result = new StreamResult(new File("newInternal.xml"));
                transformer.transform(source, result);
                System.out.println("File Saved!!!"); 
```

但是在“newInternal.xml”文件中遇到错误。它在新文件中使用 '<' 、 '>' 保存。我可以知道上面代码的问题吗？但是当我将 Xml 版本从 1.1 更改为 1.0 时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:27:14.883

你的代码是正确的。在正确的 XML 语法上，你写 < 表示 < 和 > 表示 >。存在这些转义是为了简化它们的使用，因为这些字符用于 XML 语法本身。

[这个](https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters)问题有这些字符的列表。

# visual-studio-2010 - 覆盖 Visual Studio 2010 UI 行为

> ID：11661167
> 
> 赞同：0
> 
> 时间：2012-07-26T01:40:30.537
> 
> 标签：visual-studio-2010, visual-studio-extensions

我想为 Visual Studio 创建一个扩展，其中一些 UI 行为被覆盖。我发现了许多将 UI 组件添加到 VS 的示例，但没有一个更改它们的地方。我想要做的一个很好的例子是使每个选项卡的宽度恰好占据 50 像素（在编辑器窗口组的顶部）。这可能吗？如果是这样，对我来说什么是好的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:32:56.063

[对于您的特定示例， Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)包中的 Document Tab Well 扩展允许您设置编辑器选项卡的最小和最大宽度，因此您可以根据需要将其强制为 50 像素。

通常，没有统一的方法可以覆盖或替换 Visual Studio 中的 UI 组件。一些组件设计为易于更换，而一些组件无法更换，但许多组件不可更换。更换组件的一般问题是它无法通过“[如果两个扩展想要进行测试怎么办](http://blogs.msdn.com/b/oldnewthing/archive/2005/06/07/426294.aspx)”，因为不清楚哪个更换获胜。因此，大多数扩展点都是仅添加的。

我的建议：如果您想替换特定组件，请在 Stack Overflow 上提出一个单独的问题，希望有人可以就如何自定义该特定组件提出意见。

# php - 我需要在哪个文件中编写代码以在 symfony2 中为 EventDispatcher 附加侦听器

> ID：11661168
> 
> 赞同：0
> 
> 时间：2012-07-26T01:40:32.530
> 
> 标签：php, events, symfony, doctrine-orm

在[symfony2 Docs](http://symfony.com/doc/current/components/event_dispatcher/introduction.html)中，他们说要使用此代码

```
$listener = new AcmeListener();
$dispatcher->addListener('foo.action', array($listener, 'onFooAction')); 
```

我有两个问题

1.  我需要在哪个文件中写入该行
2.  我可以在第一个参数中写什么其他事件，例如`foo.action`。我的意思是事件buitin或教义事件或symfony事件或自定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:48:09.297

如果您将组件用作框架的一部分，则不需要。只需声明一个标记为事件侦听器的服务。就该事件而言，它是自定义事件的示例。您可以随意命名您的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:23:15.037

你必须像这样在你的控制器中写

```
if ($form->isValid()) {
            $em = $this->getDoctrine()->getEntityManager();
            $em->persist($entity);
            $em->flush();

            $dispatcher = $this->container->get('event_dispatcher');
            $dispatcher->dispatch('your.event.name', new YourEvent($entity));

} 
```

# javascript - How do I capitalize the first letter of each text input in javaScript?

> ID：11661171
> 
> 赞同：11
> 
> 时间：2012-07-26T01:41:28.230
> 
> 标签：javascript

> **Possible Duplicate:**
> [Capitalize the first letter of string in JavaScript](https://stackoverflow.com/questions/1026069/capitalize-the-first-letter-of-string-in-javascript)

This is may code so far. I would like the FIRST_Name and LAST_Name fields to capitalize the first letter and have all other letters small:

Also, I am unfamiliar with javaScript so I am not exactly sure what I am doing.

**latest edit. What is wrong with this code?**

```
 <HTML>
<HEAD>
<TITLE></TITLE>
<script language="javascript" type="text/javascript">
<!--
function CheckForm()

formObj.FIRST_Name.value = titleCase(formObj.FIRST_Name.value);
formObj.LAST_Name.value = titleCase(formObj.LAST_Name.value);

function titleCase(str) {
    var words = str.split(/\s+/);
    for (var i=0; i<words.length; i++)
        words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1);
    return words.join(" ");
}

{
  var formObj = document.getElementById("Data");
  var firstname = formObj.FIRST_Name.value;
  var lastname = formObj.LAST_Name.value;

    if(notEmpty(formObj.FIRST_Name, "Please enter your first name")){       
    if(notEmpty(formObj.LAST_Name,"Please enter your last name")){  
    if(titleCase(formObj.FIRST_Name)            

    return true;}}

    return false;
    }

function notEmpty(elem, helperMsg){
    if(elem.value.length == 0){
        alert(helperMsg);
        elem.focus(); // set the focus to this input
        return false;
    }
    return true;
}

</script>
</HEAD>
<BODY>
<div style="background: #CCCC99">
<HR><FORM id="Data" onsubmit="return CheckForm()" action="post to server" method=post>
<P>First Name: <input type=text name=FIRST_Name maxlength=15 size=15>
   Last Name:  <input type=text name=LAST_Name maxlength=15 size=15></P>
<input type=submit value="Submit Products Registration Form" style="width: 220px"><input type=reset value="Reset">
</form>
</div>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T02:00:38.857

尝试这个：

```
String.prototype.toCap = function()
{ 
   return this.toLowerCase().replace(/^.|\s\S/g, function(str) { 
       return str.toUpperCase(); 
   });
}        

var firstname = "gob".toCap();
var lastname = "bluth".toCap();

alert(firstname + ' ' + lastname); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T01:57:38.703

对于我们这些害怕正则表达式的人（大声笑）：

```
function titleCase(str)
{
    var words = str.split(" ");
    for ( var i = 0; i < words.length; i++ )
    {
        var j = words[i].charAt(0).toUpperCase();
        words[i] = j + words[i].substr(1);
    }
    return words.join(" ");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T01:48:39.270

试试这个代码：

```
function toTitleCase(str){
    var words = str.match(/\w*/g);
    for(var i=0;i<words.length;i++)
        words[i] = words[i][0].toUpperCase() + words[i].slice(1);
    return words.join(' ');
}
toTitleCase('my name'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-26T02:18:49.433

> *“不知道如何将其放入我的代码中”*

将`titleCase()`（或您现在正在调用的任何内容）函数复制到您的脚本块中，然后在函数中的语句`toTitleCase()`之前添加以下代码：`if``CheckForm()`

```
formObj.FIRST_Name.value = titleCase(formObj.FIRST_Name.value);
formObj.LAST_Name.value = titleCase(formObj.LAST_Name.value); 
```

这样，在提交表单时，字段将使用您的`toTitleCase()`函数进行更改。（如果您在`if`语句之前添加代码，则无论`notEmpty()`验证是否通过，字段都会更改，这对我来说似乎是合理的。）

（顺便说一句，可以从函数中删除`firstname`and变量声明，因为您从不使用这些变量。）`lastname``CheckForm()`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-26T02:28:34.643

要将单个字符串大写，请参阅[如何在 JavaScript 中将字符串的第一个字母变为大写？](https://stackoverflow.com/q/1026069/1048572).

如果要对字符串中的每个单词执行此操作，则需要将字符串拆分为单词，将`ucFirst`函数应用于每个单词并将它们重新连接在一起：

```
function titleCase(str) {
    var words = str.split(/\s+/);
    for (var i=0; i<words.length; i++)
        words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1);
    return words.join(" ");
} 
```

或者您可以对它们应用正则表达式，以匹配每个第一个字母并替换它们：

```
function titleCase(str) {
    return str.replace(/\b\S/g, function(c){
        return c.toUpperCase();
    });
} 
```

* * *

在您最近的编辑中：您在第三个 if 条件中遇到语法错误，它缺少右括号。此外，您已经`titleCase`在函数体之前插入了代码。

```
/* the titleCase function from above here */

function CheckForm() {
    var formObj = document.getElementById("Data");
    var firstname = formObj.FIRST_Name;
    var lastname = formObj.LAST_Name;

    firstname.value = titleCase(firstname.value);
    lastname.value = titleCase(lastname.value);

    return notEmpty(firstname, "Please enter your first name")
      && notEmpty(lastname, "Please enter your last name");
}

function notEmpty(elem, helperMsg){
    if(elem.value.length == 0){
        alert(helperMsg);
        elem.focus(); // set the focus to this input
        return false;
    }
    return true;
} 
```

我个人对此的看法：根本不要尝试用 JavaScript 更正名称。您在提交表单时执行此操作，并且仅当用户将一个输入留空并遇到错误消息时，用户才会看到此操作的效果。

无论如何，您都需要在服务器端执行此操作（永远不要相信用户输入/ POST 数据，javascript 可能会被禁用），所以如果您不熟悉 JavaScript（或不喜欢它或其他什么），请忽略此“功能”。

# java - Java Split on Regex

> ID：11661172
> 
> 赞同：1
> 
> 时间：2012-07-26T01:41:29.547
> 
> 标签：java, regex, split

I cant seem to be able to split on a simple regex,

If i have a string `[data, data2]` and i attempt to split like so: I tried to escape the brackets.

```
 String regex = "\\[,\\]";
    String[] notifySplit = notifyWho.split(regex); 
```

The output of looping through notifySplit shows this regex not working

```
notify: [Everyone, Teachers only] 
```

Any help on what the proper regex is, i am expecting an array like so: data, data2

where i could possibly ignore these two characters `[ ,`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:44:32.750

首先，您不想在括号上*拆分。*您只想将它​​们从最终结果中排除。所以你可能想做的第一件事就是把它们去掉：

```
notifyWho = notifyWho.replace("[", "").replace("]", ""); 
```

然后您可以对逗号进行基本拆分：

```
String[] notifySplit = notifyWho.split(","); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T02:07:32.133

我会在一行中完成，首先删除方括号，然后拆分：

```
String[] notifySplit = notifyWho.replaceAll("[[\\]]", "").split(","); 
```

# jquery - jQuery click 在 click 函数中多次触发

> ID：11661173
> 
> 赞同：0
> 
> 时间：2012-07-26T01:41:58.980
> 
> 标签：jquery, click, jquery-ui-accordion

[我在此链接http://jsfiddle.net/rUbD8/1/](http://jsfiddle.net/rUbD8/1/)添加了代码摘录

我在 jsfiddle 的结果部分中创建了以下 3 个手风琴滑块，名称为您的滑块： **Home**、 **About**和**Contact**

当我单击 Home 滑块上的*Delete It*按钮时，它会写入 console.log 3 次，然后当我单击About 滑块上的*Delete It*时，它会写入 console.log 2 次

有人能告诉我为什么这样做以及如何防止它多次触发吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T01:55:25.663

这是因为每次添加滑块时，单击功能都会绑定到具有“deleteMe”类的元素，您可以尝试

```
jQuery('.deleteMe').unbind('click').click(function(e){}) ... 
```

作为快速修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T01:52:12.863

这样做是因为每次添加新元素时都会连接事件。

要解决此问题，请使用实时事件处理程序（新项目的监视器）将 click 事件处理程序移出它所在的位置：

[http://jsfiddle.net/rUbD8/3/](http://jsfiddle.net/rUbD8/3/)

```
jQuery('.slider_holder').on('click', '.deleteMe', function(e) {
    header = jQuery(e.target).parent().prev();
    container = jQuery(e.target).parent();

    console.log(e.target);

    header.fadeOut('slow',function(){
        jQuery(this).remove();
    });
    container.slideUp('normal',function(){
        jQuery(this).remove();
    });
}); 
```

# sql - 如何在sql中建立两个表之间的关系

> ID：11661174
> 
> 赞同：0
> 
> 时间：2012-07-26T01:42:06.643
> 
> 标签：sql, oracle11g

我想在这两个表之间建立关系，我创建了两个表 emp 和 dept 如下所示，

```
create table emp (
    empno number(4) constraint empnopk primary key,
    ename varchar(10) constraint enamenn not null,
    mgrno number(4) constraint mgrnofk references emp(empno),
    sal number(10) constraint salck check(sal between 2000 and 5000),
    age number(2) constraint ageck check(age>20),
    mobno number(10) constraint mobuq unique
); 

create table dept (
    deptno number(10) constraint deptnopk primary key,
    dname varchar(10) constraint dnamenn not null,
    loc varchar(10) default 'xyz'
); 
```

由于emp表是主表，dept表是子表，为了在这两个表之间建立关系，我已经给出了查询

```
alter table emp
add constraint deptnofk foreign key(deptno) references dept(deptno); 
```

当我给出这个查询时，它显示 ORA-00904:"DEPTNO": invalid identifier

可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T01:44:29.637

您的 emp 表没有 deptno 字段。将此添加为数字（10），它应该会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T01:46:16.663

您需要在 emp 表中添加 deptno 字段，因为您正在通过 droptno 字段创建从表 emp 到 dept 的外键。

# responsive-design - 如何在响应式设计中将最大高度设置为图像的原始高度？

> ID：11661177
> 
> 赞同：1
> 
> 时间：2012-07-26T01:42:36.303
> 
> 标签：responsive-design, css

我正在使用 WordPress 构建一个响应式站点，图像会自动设置为`height:100%; width:auto;`，并且 div 会根据窗口大小调整大小。但这通常意味着某些图像的高度设置为高于其实际高度，从而导致像素化。我需要的是类似的东西`height: 100%; width:auto; max-height:"image height here"`。如果这是可能的，这怎么可能？这是一个问题的页面在这里：[http ://wheretoimmigrate.com/onthemouse/?portfolio=atomic-clothings-2012-campaign](http://wheretoimmigrate.com/onthemouse/?portfolio=atomic-clothings-2012-campaign)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:30:03.223

我通过添加更大尺寸和不同比例的透明背景来简单地放大图像来解决它。欺骗系统将其视为更大的图像。工作完美。

# javascript - 表单序列化javascript（无框架）

> ID：11661187
> 
> 赞同：175
> 
> 时间：2012-07-26T01:43:50.577
> 
> 标签：javascript, forms, serialization

想知道 javascript 中是否有没有 jquery 或任何允许我序列化表单并访问序列化版本的框架的函数？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2014-10-22T06:21:58.710

这是纯 JavaScript 方法：

```
var form = document.querySelector('form');
var data = new FormData(form);
var req = new XMLHttpRequest();
req.send(data); 
```

虽然它似乎只适用于 POST 请求。

[https://developer.mozilla.org/en-US/docs/Web/API/FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData)

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2017-05-17T19:37:25.853

## 仅适用于现代浏览器

如果您的目标浏览器支持[`URLSearchParams`](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)API（[最新浏览器](https://caniuse.com/#search=URLSearchParams)）和`FormData(formElement)`构造函数（[最新浏览器](https://caniuse.com/#search=FormData)），请使用以下命令：

```
new URLSearchParams(new FormData(formElement)).toString() 
```

## 除了 IE 无处不在

对于支持`URLSearchParams`但不支持`FormData(formElement)`构造函数的浏览器，请使用[此 FormData polyfill](https://github.com/jimmywarting/FormData)和此代码（适用于除 IE 之外的任何地方）：

```
new URLSearchParams(Array.from(new FormData(formElement))).toString() 
```

### 例子

```
var form = document.querySelector('form');
var out = document.querySelector('output');

function updateResult() {
  try {
    out.textContent = new URLSearchParams(Array.from(new FormData(form)));
    out.className = '';
  } catch (e) {
    out.textContent = e;
    out.className = 'error';
  }
}

updateResult();
form.addEventListener('input', updateResult);
```

```
body { font-family: Arial, sans-serif; display: flex; flex-wrap: wrap; }
input[type="text"] { margin-left: 6px; max-width: 30px; }
label + label { margin-left: 10px; }
output { font-family: monospace; }
.error { color: #c00; }
div { margin-right: 30px; }
```

```
<!-- FormData polyfill for older browsers -->
<script src="https://unpkg.com/formdata-polyfill@3.0.17/formdata.min.js"></script>
<div>
  <h3>Form</h3>
  <form id="form">
    <label>x:<input type="text" name="x" value="1"></label>
    <label>y:<input type="text" name="y" value="2"></label>
    <label>
    z:
    <select name="z">
      <option value="a" selected>a</option>
      <option value="b" selected>b</option>
    </select>
  </label>
  </form>
</div>
<div>
  <h3>Query string</h3>
  <output for="form"></output>
</div>
```

## 兼容 IE 10

对于更旧的浏览器（例如 IE 10），请使用[FormData polyfill](https://github.com/jimmywarting/FormData)，`Array.from`必要时使用 polyfill 和以下代码：

```
Array.from(
  new FormData(formElement),
  function(e) { return e.map(encodeURIComponent).join('='); }
).join('&') 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-07-26T01:46:38.033

微型[from-serialize 库](http://code.google.com/p/form-serialize/)不依赖于框架。除此之外，您需要自己实现序列化功能。（虽然重量为 1.2 KB，为什么不使用它？）

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2012-07-26T01:47:34.010

```
function serialize (form) {
    if (!form || form.nodeName !== "FORM") {
            return;
    }
    var i, j, q = [];
    for (i = form.elements.length - 1; i >= 0; i = i - 1) {
        if (form.elements[i].name === "") {
            continue;
        }
        switch (form.elements[i].nodeName) {
            case 'INPUT':
                switch (form.elements[i].type) {
                    case 'text':
                    case 'tel':
                    case 'email':
                    case 'hidden':
                    case 'password':
                    case 'button':
                    case 'reset':
                    case 'submit':
                        q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
                        break;
                    case 'checkbox':
                    case 'radio':
                        if (form.elements[i].checked) {
                                q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
                        }                                               
                        break;
                }
                break;
                case 'file':
                break; 
            case 'TEXTAREA':
                    q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
                    break;
            case 'SELECT':
                switch (form.elements[i].type) {
                    case 'select-one':
                        q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
                        break;
                    case 'select-multiple':
                        for (j = form.elements[i].options.length - 1; j >= 0; j = j - 1) {
                            if (form.elements[i].options[j].selected) {
                                    q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].options[j].value));
                            }
                        }
                        break;
                }
                break;
            case 'BUTTON':
                switch (form.elements[i].type) {
                    case 'reset':
                    case 'submit':
                    case 'button':
                        q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
                        break;
                }
                break;
            }
        }
    return q.join("&");
} 
```

来源：[http ://code.google.com/p/form-serialize/source/browse/trunk/serialize-0.1.js](http://code.google.com/p/form-serialize/source/browse/trunk/serialize-0.1.js)

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2015-05-10T15:49:38.693

这是 TibTibs 的略微修改版本：

```
function serialize(form) {
    var field, s = [];
    if (typeof form == 'object' && form.nodeName == "FORM") {
        var len = form.elements.length;
        for (i=0; i<len; i++) {
            field = form.elements[i];
            if (field.name && !field.disabled && field.type != 'file' && field.type != 'reset' && field.type != 'submit' && field.type != 'button') {
                if (field.type == 'select-multiple') {
                    for (j=form.elements[i].options.length-1; j>=0; j--) {
                        if(field.options[j].selected)
                            s[s.length] = encodeURIComponent(field.name) + "=" + encodeURIComponent(field.options[j].value);
                    }
                } else if ((field.type != 'checkbox' && field.type != 'radio') || field.checked) {
                    s[s.length] = encodeURIComponent(field.name) + "=" + encodeURIComponent(field.value);
                }
            }
        }
    }
    return s.join('&').replace(/%20/g, '+');
} 
```

禁用的字段被丢弃，名称也被 URL 编码。%20 个字符的正则表达式替换只发生一次，然后返回字符串。

查询字符串与 jQuery 的 $.serialize() 方法的结果形式相同。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2017-08-26T20:19:14.307

如果您需要使用 POST 以 json 格式提交表单“myForm”，您可以执行以下操作：

```
const formEntries = new FormData(myForm).entries();
const json = Object.assign(...Array.from(formEntries, ([x,y]) => ({[x]:y})));
fetch('/api/foo', {
  method: 'POST',
  body: JSON.stringify(json)
}); 
```

第二行从如下数组转换：

```
[["firstProp", "firstValue"], ["secondProp", "secondValue"], ...and so on... ] 
```

...变成一个常规对象，例如：

```
{"firstProp": "firstValue", "secondProp": "secondValue", ...and so on ... } 
```

...它通过将 mapFn 传递给 Array.from() 来进行这种转换。此 mapFn 应用于每个 ["a","b"] 对并将它们转换为 {"a": "b"} 以便数组包含许多对象，每个对象只有一个属性。mapFn 使用“解构”来获取该对的第一部分和第二部分的名称，并且它还使用 ES6“ComputedPropertyName”来设置 mapFn 返回的对象中的属性名称（这就是为什么说“[ x]：某物”，而不仅仅是“x：某物”。

然后将所有这些单个属性对象传递到 Object.assign() 函数的参数中，该函数将所有单个属性对象合并为具有所有属性的单个对象。

Array.from()： [https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)

参数解构： [https ://simonsmith.io/destructuring-objects-as-function-parameters-in-es6/](https://simonsmith.io/destructuring-objects-as-function-parameters-in-es6/)

更多关于计算属性名称的信息： [Variable as the property name in a JavaScript object literal?](https://stackoverflow.com/questions/11043026/variable-as-the-property-name-in-a-javascript-object-literal)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2014-06-26T16:18:22.420

我从 Johndave Decano 的回答开始。

这应该可以解决对他的功能的回复中提到的一些问题。

1.  将 %20 替换为 + 符号。
2.  提交/按钮类型只有在被点击提交表单时才会被提交。
3.  重置按钮将被忽略。
4.  该代码对我来说似乎是多余的，因为无论字段类型如何，它基本上都在做同样的事情。更不用说与“tel”和“email”等 HTML5 字段类型的不兼容了，因此我用 switch 语句删除了大部分细节。

如果按钮类型没有名称值，它们仍将被忽略。

```
function serialize(form, evt){
    var evt    = evt || window.event;
    evt.target = evt.target || evt.srcElement || null;
    var field, query='';
    if(typeof form == 'object' && form.nodeName == 'FORM'){
        for(i=form.elements.length-1; i>=0; i--){
            field = form.elements[i];
            if(field.name && field.type != 'file' && field.type != 'reset' && !field.disabled){
                if(field.type == 'select-multiple'){
                    for(j=form.elements[i].options.length-1; j>=0; j--){
                        if(field.options[j].selected){
                            query += '&' + field.name + "=" + encodeURIComponent(field.options[j].value).replace(/%20/g,'+');
                        }
                    }
                }
                else{
                    if((field.type != 'submit' && field.type != 'button') || evt.target == field){
                        if((field.type != 'checkbox' && field.type != 'radio') || field.checked){
                            query += '&' + field.name + "=" + encodeURIComponent(field.value).replace(/%20/g,'+');
                        }   
                    }
                }
            }
        }
    }
    return query.substr(1);
} 
```

这就是我目前使用此功能的方式。

```
<form onsubmit="myAjax('http://example.com/services/email.php', 'POST', serialize(this, event))"> 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2018-05-29T14:37:50.450

适用于所有浏览器。

```
const formSerialize = formElement => {
  const values = {};
  const inputs = formElement.elements;

  for (let i = 0; i < inputs.length; i++) {
    values[inputs[i].name] = inputs[i].value;
  }
  return values;
}

const dumpValues = form => () => {

  const r = formSerialize(form);
  console.log(r);
  console.log(JSON.stringify(r));
}

const form = document.querySelector('form');

dumpValues(form)();

form.addEventListener('change',dumpValues(form));
```

```
<form action="/my-handling-form-page" method="post">
  <div>
    <label for="name">Name:</label>
    <input type="text" id="name" name="user_name" value="John">
  </div>
  <div>
    <label for="mail">E-mail:</label>
    <input type="email" id="mail" name="user_mail" value="john@jonhson.j">
  </div>
  <div>
    <label for="interests">Interest:</label>
    <select required=""  id="interests" name="interests">
      <option value="" selected="selected">- None -</option>
      <option value="drums">Drums</option>
      <option value="js">Javascript</option>
      <option value="sports">Sports</option>
      <option value="trekking">Trekking</option>
    </select>
  </div>
  <div>
    <label for="msg">Message:</label>
    <textarea id="msg" name="user_message">Hello My Friend</textarea>
  </div>
</form>
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-04-20T03:20:56.213

```
HTMLElement.prototype.serialize = function(){
    var obj = {};
    var elements = this.querySelectorAll( "input, select, textarea" );
    for( var i = 0; i < elements.length; ++i ) {
        var element = elements[i];
        var name = element.name;
        var value = element.value;

        if( name ) {
            obj[ name ] = value;
        }
    }
    return JSON.stringify( obj );
} 
```

像这样使用：

```
var dataToSend = document.querySelector("form").serialize(); 
```

我希望我有所帮助。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-04-27T21:41:28.983

如果您正在寻找序列化事件的输入。这是我使用的纯 JavaScript 方法。

```
// serialize form
var data = {};
var inputs = [].slice.call(e.target.getElementsByTagName('input'));
inputs.forEach(input => {
  data[input.name] = input.value;
}); 
```

数据将是输入的 JavaScript 对象。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-11-20T15:46:08.577

@SimonSteinberger 代码的重构版本，使用更少的变量并利用`forEach`循环的速度（比`for`s 快一点）

```
function serialize(form) {
    var result = [];
    if (typeof form === 'object' && form.nodeName === 'FORM')
        Array.prototype.slice.call(form.elements).forEach(function(control) {
            if (
                control.name && 
                !control.disabled && 
                ['file', 'reset', 'submit', 'button'].indexOf(control.type) === -1
            )
                if (control.type === 'select-multiple')
                    Array.prototype.slice.call(control.options).forEach(function(option) {
                        if (option.selected) 
                            result.push(encodeURIComponent(control.name) + '=' + encodeURIComponent(option.value));
                    });
                else if (
                    ['checkbox', 'radio'].indexOf(control.type) === -1 || 
                    control.checked
                ) result.push(encodeURIComponent(control.name) + '=' + encodeURIComponent(control.value));
        });
        return result.join('&').replace(/%20/g, '+');
} 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-07-24T10:51:16.927

这可以通过非常简单的函数来完成，如下所示

```
function serialize(form) {
        let requestArray = [];
        form.querySelectorAll('[name]').forEach((elem) => {
            requestArray.push(elem.name + '=' + elem.value);
        });
        if(requestArray.length > 0)
            return requestArray.join('&');
        else
            return false;
    }

 serialized = serialize(document.querySelector('form'))
  console.log(serialized);
```

```
<form>

  <input type='text' name='fname' value='Johne'/>
  <input type='text' name='lname' value='Doe'/>
  <input type='text' name='contact[]' value='99999999'/>
  <input type='text' name='contact[]' value='34423434345'/>

</form>
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-02-27T19:55:32.110

我将 TibTibs 的答案重构为更易于阅读的内容。由于 80 个字符的宽度和一些注释，它有点长。

此外，它会忽略空白字段名称和空白值。

```
// Serialize the specified form into a query string.
//
// Returns a blank string if +form+ is not actually a form element.
function $serialize(form, evt) {
  if(typeof(form) !== 'object' && form.nodeName !== "FORM")
    return '';

  var evt    = evt || window.event || { target: null };
  evt.target = evt.target || evt.srcElement || null;
  var field, query = '';

  // Transform a form field into a query-string-friendly
  // serialized form.
  //
  // [NOTE]: Replaces blank spaces from its standard '%20' representation
  //         into the non-standard (though widely used) '+'.
  var encode = function(field, name) {
    if (field.disabled) return '';

    return '&' + (name || field.name) + '=' +
           encodeURIComponent(field.value).replace(/%20/g,'+');
  }

  // Fields without names can't be serialized.
  var hasName = function(el) {
    return (el.name && el.name.length > 0)
  }

  // Ignore the usual suspects: file inputs, reset buttons,
  // buttons that did not submit the form and unchecked
  // radio buttons and checkboxes.
  var ignorableField = function(el, evt) {
    return ((el.type == 'file' || el.type == 'reset')
        || ((el.type == 'submit' || el.type == 'button') && evt.target != el)
        || ((el.type == 'checkbox' || el.type == 'radio') && !el.checked))
  }

  var parseMultiSelect = function(field) {
    var q = '';

    for (var j=field.options.length-1; j>=0; j--) {
      if (field.options[j].selected) {
        q += encode(field.options[j], field.name);
      }
    }

    return q;
  };

  for(i = form.elements.length - 1; i >= 0; i--) {
    field = form.elements[i];

    if (!hasName(field) || field.value == '' || ignorableField(field, evt))
      continue;

    query += (field.type == 'select-multiple') ? parseMultiSelect(field)
                                               : encode(field);
  }

  return (query.length == 0) ? '' : query.substr(1);
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-03-05T19:06:01.390

使用 JavaScript reduce 函数应该对所有浏览器都有效，包括 IE9 >：

```
Array.prototype.slice.call(form.elements) // convert form elements to array
    .reduce(function(acc,cur){   // reduce 
        var o = {type : cur.type, name : cur.name, value : cur.value}; // get needed keys
        if(['checkbox','radio'].indexOf(cur.type) !==-1){
            o.checked = cur.checked;
        } else if(cur.type === 'select-multiple'){
            o.value=[];
            for(i=0;i<cur.length;i++){
                o.value.push({
                    value : cur.options[i].value,
                    selected : cur.options[i].selected
                });
            }
        }
        acc.push(o);
        return acc;
 },[]); 
```

下面是现场示例。

```
var _formId = document.getElementById('formId'),
    formData = Array.prototype.slice.call(_formId.elements).reduce(function(acc,cur,indx,arr){
        var i,o = {type : cur.type, name : cur.name, value : cur.value};
        if(['checkbox','radio'].indexOf(cur.type) !==-1){
            o.checked = cur.checked;
        } else if(cur.type === 'select-multiple'){
            o.value=[];
            for(i=0;i<cur.length;i++){
                o.value.push({
                    value : cur.options[i].value,
                    selected : cur.options[i].selected
                });
            }
        }
        acc.push(o);
        return acc;
    },[]);

// view
document.getElementById('formOutput').innerHTML = JSON.stringify(formData, null, 4);
```

```
<form id="formId">
    <input type="text" name="texttype" value="some text">
    <select>
        <option value="Opt 1">Opt 1</option>
        <option value="Opt 2" selected>Opt 2</option>
        <option value="Opt 3">Opt 3</option>
    </select>
    <input type="checkbox" name="checkboxtype" value="Checkbox 1" checked> Checkbox 1
    <input type="checkbox" name="checkboxtype" value="Checkbox 2"> Checkbox 2
    <input type="radio" name="radiotype" value="Radio Btn 1"> Radio Btn 1
    <input type="radio" name="radiotype" value="Radio Btn 2" checked> Radio Btn 2
    <select multiple>
        <option value="Multi 1" selected>Multi 1</option>
        <option value="Multi 2">Saab</option>
        <option value="Multi 3" selected>Multi 3</option>
    </select>
</form>
<pre><code id="formOutput"></code></pre>
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-11-20T12:15:40.430

我的方式...

```
const myForm = document.forms['form-name']

myForm.onsubmit=e=>
  {
  e.preventDefault()  // for testing...

  let data = Array.from(new FormData(myForm))
                  .reduce((r,[k,v])=>{r[k]=v;return r},{})

  /*_______________________________________ same code: for beginners 
  let data = {}
  Array.from(new FormData(myForm), (entry) => { data[ entry[0] ] = entry[1]} )
  ________________________________________________________________*/

  console.log(data)

  //...
  } 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-11-16T10:22:31.080

我从@moison 答案和[MDN](https://developer.mozilla.org/en-US/docs/Web/API/FormData/entries)中获取了formData 的entry() 方法，据说：

> FormData.entries() 方法返回一个迭代器，允许遍历此对象中包含的所有键/值对。每对的key是一个USVString对象；值是 USVString 或 Blob。

但唯一的问题是移动浏览器（不支持 android 和 safari）以及 IE 和 Safari 桌面

但基本上这是我的方法：

```
let theForm =  document.getElementById("contact"); 

theForm.onsubmit = function(event) {
    event.preventDefault();

    let rawData = new FormData(theForm);
    let data = {};

   for(let pair of rawData.entries()) {
     data[pair[0]] = pair[1]; 
    }
    let contactData = JSON.stringify(data);
    console.warn(contactData);
    //here you can send a post request with content-type :'application.json'

}; 
```

代码可以在[这里找到](https://jsfiddle.net/espyMur/vzLqf9co/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-03-24T19:01:50.177

改进大卫柠檬的答案。

这会将表单数据转换为 JSON，并允许您从数据对象设置表单。

```
const main = () => {
  const form = document.forms['info'];
  const data = {
    "user_name"       : "John",
    "user_email"      : "john@jonhson.com",
    "user_created"    : "2020-03-24",
    "user_age"        : 42,
    "user_subscribed" : true,
    "user_interests"  : "sports",
    "user_message"    : "Hello My Friend"
  };

  populateForm(form, data);
  updateJsonView(form);
  form.addEventListener('change', (e) => updateJsonView(form));
}

const getFieldValue = (field, opts) => {
  let type = field.getAttribute('type');
  if (type) {
    switch (type) {
      case 'checkbox':
        return field.checked;
      case 'number':
        return field.value.includes('.')
          ? parseFloat(field.value)
          : parseInt(field.value, 10);
    }
  }
  if (opts && opts[field.name] && opts[field.name].type) {
    switch (opts[field.name].type) {
      case 'int':
        return parseInt(field.value, 10);
      case 'float':
        return parseFloat(field.value);
    }
  }
  return field.value;
}

const setFieldValue = (field, value) => {
  let type = field.getAttribute('type');
  if (type) {
    switch (type) {
      case 'checkbox':
        field.checked = value;
        break;
      default:
        field.value = value;
        break;
    }
  } else {
    field.value = value;
  }
}

const extractFormData = (form, opts) => {
  return Array.from(form.elements).reduce((data, element) => {
    return Object.assign(data, { [element.name] : getFieldValue(element, opts) });
  }, {});
};

const populateForm = (form, data) => {
  return Array.from(form.elements).forEach((element) => {
    setFieldValue(element, data[element.name]);
  });
};

const updateJsonView = (form) => {
  let fieldOptions = {};
  let formData = extractFormData(form, fieldOptions);
  let serializedData = JSON.stringify(formData, null, 2);
  document.querySelector('.json-view').textContent = serializedData;
};

main();
```

```
.form-field {
  margin-bottom: 0.5em;
}

.form-field label {
  display: inline-block;
  font-weight: bold;
  width: 7em;
  vertical-align: top;
}

.json-view {
  position: absolute;
  top: 0.667em;
  right: 0.667em;
  border: thin solid grey;
  padding: 0.5em;
  white-space: pre;
  font-family: monospace;
  overflow: scroll-y;
  max-height: 100%;
}
```

```
<form name="info" action="/my-handling-form-page" method="post">
  <div class="form-field">
    <label for="name">Name:</label>
    <input type="text" id="name" name="user_name">
  </div>
  <div class="form-field">
    <label for="mail">E-mail:</label>
    <input type="email" id="mail" name="user_email">
  </div>
  <div class="form-field">
    <label for="created">Date of Birth:</label>
    <input type="date" id="created" name="user_created">
  </div>
  <div class="form-field">
    <label for="age">Age:</label>
    <input type="number" id="age" name="user_age">
  </div>
  <div class="form-field">
    <label for="subscribe">Subscribe:</label>
    <input type="checkbox" id="subscribe" name="user_subscribed">
  </div>
  <div class="form-field">
    <label for="interests">Interest:</label>
    <select required=""  id="interests" name="user_interests">
      <option value="" selected="selected">- None -</option>
      <option value="drums">Drums</option>
      <option value="js">Javascript</option>
      <option value="sports">Sports</option>
      <option value="trekking">Trekking</option>
    </select>
  </div>
  <div class="form-field">
    <label for="msg">Message:</label>
    <textarea id="msg" name="user_message"></textarea>
  </div>
</form>
<div class="json-view"></div>
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-11-07T15:10:04.163

**这是我的解决方案-**

```
JsonStringifyForm: function(formId) {
      let myForm = document.getElementById(formId);
      let formData = new FormData(myForm);
      const data = {}; // need to convert it before using not with XMLHttpRequest
      for (let [key, val] of formData.entries()) {
        Object.assign(data, { [key]: val });
      }
      return JSON.stringify(data);
    } 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-12-12T14:12:13.127

您可以使用 Object.fromEntries 如下

```
function parseForm(e) {
  const formData = new FormData(e.target);
  return Object.fromEntries(formData.entries());
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-10-15T05:07:37.250

```
 // supports IE8 and IE9 
  function serialize(form) {
    var inputs = form.elements;
    var array = [];
    for(i=0; i < inputs.length; i++) {
      var inputNameValue = inputs[i].name + '=' + inputs[i].value;
      array.push(inputNameValue);
    }
    return array.join('&');
  }
 //using the serialize function written above
 var form = document.getElementById("form");//get the id of your form. i am assuming the id to be named form.
 var form_data = serialize(form);
 var xhr = new XMLHttpRequest();
 xhr.send(form_data);

 //does not work with IE8 AND IE9
 var form = document.querySelector('form');
 var data = new FormData(form);
 var xhr = new XMLHttpRequest();
 xhr.send(data); 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-07-25T05:39:51.160

这是纯 JavaScript 方法：

```
var form = document.querySelector('form');
var data = new FormData(form);

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       console.log(this.responseText);
    }
  };
  xhttp.open("POST", "<YOUR-URL>", true);
  xhttp.send(data);
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-08-21T12:27:13.817

我希望这会奏效

```
var serializeForm = (formElement) => {
  const formData = {};
  const inputs = formElement.elements;

  for (let i = 0; i < inputs.length; i++) {
    if(inputs[i].name!=="")
        formData[inputs[i].name] = inputs[i].value;
  }
  return formData;
} 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2018-11-06T10:57:03.570

我可能疯了，但我发现这些答案严重臃肿。这是我的解决方案

```
function serialiseForm(form) {
  var input = form.getElementsByTagName("input");
  var formData = {};
  for (var i = 0; i < input.length; i++) {
    formData[input[i].name] = input[i].value;
  }
  return formData = JSON.stringify(formData);
} 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2018-08-23T09:15:22.640

出于调试目的，这可能会对您有所帮助：

```
function print_form_data(form) {
    const form_data = new FormData(form);

    for (const item of form_data.entries()) {
        console.log(item);
    }

    return false;
} 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2021-09-17T11:06:53.457

我喜欢这个库：[https](https://github.com/macek/jquery-serialize-object) ://github.com/macek/jquery-serialize-object （1.7KB 大小）

给定一个基本的 HTML 表单：

```
<form id="contact">
  <input name="user[email]" value="jsmith@example.com">
  <input name="user[pets][]" type="checkbox" value="cat" checked>
  <input name="user[pets][]" type="checkbox" value="dog" checked>
  <input name="user[pets][]" type="checkbox" value="bird">
  <input type="submit">
</form> 
```

**.serializeObject** — 将选定的表单序列化为 JavaScript 对象

```
$('form#contact').serializeObject();
//=> {user: {email: "jsmith@example.com", pets: ["cat", "dog"]}} 
```

*主要款式*

**push** — 将值压入数组

```
<input name="foo[]" value="a">
<input name="foo[]" value="b"> 
```

```
$("form").serializeObject();
//=> {foo: [a, b]} 
```

**fixed** — 将值添加到指定索引处的数组

```
<input name="foo[2]" value="a">
<input name="foo[4]" value="b"> 
```

```
$("form").serializeObject();
//=> {foo: [, , "a", , "b"]} 
```

**named** - 为指定的键添加一个值

```
<input name="foo[bar]" value="a">
<input name="foo[bof]" value="b">
<input name="hello" value="world"> 
```

```
$("form").serializeObject();
//=> {foo: {bar: "a", bof: "b"}, hello: "world"} 
```

类似的库（更活跃）：[https ://github.com/marioizquierdo/jquery.serializeJSON](https://github.com/marioizquierdo/jquery.serializeJSON)

类似的库（**非常活跃**）：[https](https://github.com/brainfoolong/form-data-json) ://github.com/brainfoolong/form-data-json 最后一个你不能只是序列化数据，反之亦然：为表单字段设置值

# ruby-on-rails - Ruby on Rails 和 Ajax - 将数据库中的数据保存在一个按钮中

> ID：11661188
> 
> 赞同：0
> 
> 时间：2012-07-26T01:43:50.507
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, forms

我使用按钮组作为单选按钮来捕获数据库中布尔字段的用户输入。我有一个带有布尔字段的婚礼模型：rsvp。下面的表格似乎捕获了数据。但是，如果我刷新页面，则不再根据用户的选择切换按钮。我的问题是，即使页面被刷新，或者如果用户注销并再次登录，我如何让按钮保持用户的选择？

**楷模**

```
 class User < ActiveRecord::Base
  has_one :wedding
 end

 class Wedding < ActiveRecord::Base
  belongs_to :user
 end 
```

**控制器**

```
 class WeddingsController < ApplicationController

   def new
     @wedding = Wedding.new
   end

   def create
     @wedding = current_user.build_wedding(params[:wedding])
      if @wedding.save
       redirect_to root_path
     else
       render 'new'
     end
   end

 class StaticPagesController < ApplicationController
   def home
    @wedding = Wedding.new
   end 
```

**看法：**

主页.html.erb

```
 <%= form_for(@wedding, :remote => true) do |f| %>
     <div class="btn-group-wrap">
          <div class="btn-group" data-toggle="buttons-radio">
             <%= f.button 'Yes', :class => "btn btn-large btn", :value => "1", :name => "wedding[rsvp]" %>
              <%= f.button 'No', :class => "btn btn-large btn", :value => "0", :name => "wedding[rsvp]" %>
          </div>
     </div>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:15:42.860

我应该建议您使用无线电输入，但隐藏圆圈（一些 css 可以解决问题）并在输入上添加引导程序类，以便您可以看到按钮。

查看其他帖子：[如何使单选按钮看起来像切换按钮](https://stackoverflow.com/questions/5523735/how-to-make-a-radio-button-look-like-a-toggle-button)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:41:46.473

这是我最终的做法（使用 Javascript）。不确定这是否是最好的方法。我为每个按钮添加了一个 ID 标签，然后使用 javascript 和一个取决于我的数据库中的值的条件来切​​换该按钮。

```
 <div class="btn-group" data-toggle="buttons-radio">         
        <%= f.button :rsvp, :id => "rsvp_true", :class => "btn btn-large btn", :value => "1", :name => "wedding[rsvp]" %>
        <%= f.button :rsvp, :id => "rsvp_false", :class => "btn btn-large btn", :value => "0", :name => "wedding[rsvp]" %>      
 </div>

 <script>
   $(document).ready(function() {
  <% if current_user.wedding.rsvp == true %>
    $('#rsvp_true').button('toggle');
  <% else %>
    $('#rsvp_false').button('toggle');
  <% end %>
   });
 </script> 
```

# android - 可绘制选择器在果冻豆中不起作用

> ID：11661190
> 
> 赞同：13
> 
> 时间：2012-07-26T01:44:00.597
> 
> 标签：android, android-layout, drawable, android-4.2-jelly-bean

我有一个可绘制选择器作为 a 中每个项目的背景，`ListView`以突出显示所选行。Eveything 在 Ice Cream Sandwich 中运行良好，但在 Jelly Bean 中似乎不起作用。找不到任何文档说明哪些更改可能导致它停止工作以及我需要做些什么来修复它。

通过不工作，我的意思是当我单击`ListView`项目背景颜色中的一行时不会改变`@color/blue`颜色，但它会在 ICS 中。

这是我正在使用的选择器代码（listing_selector.xml）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

   <item android:state_focused="true" android:drawable="@color/blue" />

   <item android:state_pressed="true" android:drawable="@color/blue" />

   <item android:state_activated="true" android:drawable="@color/blue_selected" />  

   <item android:state_selected="true" android:drawable="@color/blue_selected" />

   <item android:drawable="@android:color/transparent" />

</selector> 
```

这是`ListView`项目的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"  
    android:layout_height="fill_parent" 
    android:orientation="horizontal"
    android:background="@color/listing_selector"    
>

    <TextView 
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" 
    />

</RelativeLayout> 
```

这是蓝色资源：

```
<resources>
    <color name="blue">#ff33b5e5</color>       
</resources> 
```

**更新 1：**

尝试将选择器从`color`文件夹移动到`drawable`文件夹并将代码更新为：

```
android:background="@drawable/listing_selector" 
```

**更新 2：**

此外，在 上`ListView`，尝试添加以下内容：

```
 <ListView android:id="@android:id/list"
        android:layout_width="wrap_content"  
        android:layout_height="fill_parent" 
        android:listSelector="@drawable/listing_selector"   
    /> 
```

**更新 3：**

我认为这可能是我的代码中的某些内容，但我从中删除了所有代码，但`onListItemClick`仍然`ListView`无法`selector`正常工作。

**更新 4：**

我已经把它缩小到`state_selected`或`state_activated`不工作，`state_pressed`似乎工作

**更新 5：**

我想我错了。我认为选择器根本没有被识别。我混淆了内置`ListView`突出显示作为我的选择器。我现在想知道它是否与我的项目设置方式有关。我在库类中有选择器。也许从 ICS 到 JB 发生了一些变化，但是将选择器移动到我的应用程序的项目似乎并没有解决它。

**更新 6：**

好的，在拉了一些头发之后，我再次将其缩小到要么 被识别，`state_selected`要么`state_activated`不被识别，因为改变颜色`state_pressed`确实有效，这意味着我的选择器正在被识别。从评论看来，我的应用程序似乎有些特殊，因为其他人已经能够让选择器与 Jelly Bean 一起工作。

尽管其他有趣的事情`drawable`是无法识别更改默认状态的值。在我有的地方`color/transparent`，我认为将其更改为颜色会导致列表更改为该颜色，但事实并非如此。

此外，这在 ICS 中也不起作用。

**更新 7：**

在拉了更多头发之后，我发现长按菜单项会导致该项目的颜色发生变化。仅单击一个项目仍然不起作用。甚至不确定是什么意思。

**最终更新：**

我放弃了，我删除了选择器，只是刷新`ListView`点击并记住点击的位置并从代码中突出显示它。不理想，但不值得尝试修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:21:39.487

好的，我认为这是您的选择器的问题。尝试删除 state_focused 和 state_activated。你可以为你的选择器试试这个：

```
<!-- Disabled State -->
<item
    android:state_enabled = "false"
    android:state_focused = "true"
    android:state_pressed = "true"
    android:drawable="@android:color/transparent">
</item>
<item
    android:state_enabled = "false"
    android:state_focused = "true"
    android:drawable="@android:color/transparent">
</item>

<!-- Pressed State -->
<item
    android:state_pressed = "true"
    android:state_focused = "true">
    <shape>
        <solid android:color="@color/blue"/>
    </shape>
</item>
<item
    android:state_pressed = "true"
    android:state_focused = "false">
    <shape>
        <solid android:color="@color/blue"/>
    </shape>
</item>

<!-- Normal State -->
<item
    android:drawable="@android:color/transparent">
</item> 
```

我发现我也需要使用形状对象而不是`android:drawable`，因为在 ICS 之前的手机上，整个列表将突出显示该颜色而不是按下的列表项。

您也可以添加您的`state_selected`代码，但我不确定如何使用它。查看果冻豆的默认选择器代码，了解它们使用的状态：[list_selector_background.xml](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/frameworks/base/core/res/res/drawable/list_selector_background.xml?av=f)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:27:25.980

`listing_selector.xml`必须在`res/drawable`文件夹中并`android:background`像这样设置RelativeLayout的属性：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"  
    android:layout_height="fill_parent" 
    android:orientation="horizontal"
    android:background="@drawable/listing_selector"    
> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T10:13:08.540

我不能说它在一个版本中工作而不在另一个版本中工作的原因，但我得到了一个替代解决方案。

将您的颜色定义为资源中的可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <drawable name="blue">#00F</drawable>
    ...
</resources> 
```

在您的选择器中使用此颜色可绘制

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/blue" />
    ...
    ...
</selector> 
```

试试这个，让我知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T19:27:32.457

从[API 文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)：

> 注意：请记住，Android 会**应用状态列表中与对象当前状态匹配的第一项**。因此，如果列表中的第一项不包含上述任何状态属性，则每次都会应用它，这就是为什么您的默认值应始终位于最后（如下例所示）。

因此，请尝试根据建议的顺序重新排列选择器的状态。在你的情况下是这样的：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
   <item android:state_pressed="true" android:drawable="@color/blue" />
   <item android:state_focused="true" android:drawable="@color/blue" />
   <item android:state_selected="true" android:drawable="@color/blue_selected" />
   <item android:state_activated="true" android:drawable="@color/blue_selected" />  
   <item android:drawable="@android:color/transparent" />
</selector> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T12:19:44.680

我认为它工作正常！

您的选择器 xml 文件代码：-

```
<?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">

        <item android:drawable="@color/gray" android:state_focused="true"/>
        <item android:drawable="@color/gray" android:state_pressed="true"/>
        <item android:drawable="@color/orange" android:state_activated="true"/>
        <item android:drawable="@color/orange" android:state_selected="true"/>
        <item android:drawable="@color/orange"/>

    </selector> 
```

现在在 res 文件夹下创建一个文件夹 values-v16 并将此颜色文件放入其中。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <color name="gray">#4f4f4f</color>
    <color name="orange">#e26c0e</color>

</resources> 
```

然后是列表视图：

```
<ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginTop="20dp"
        android:listSelector="@drawable/listing_selector" >
</ListView> 
```

希望这有效！在 4.1 版本上测试

# ruby - Ruby、Sinatra、omniauth-github 认证失败回调错误

> ID：11661191
> 
> 赞同：2
> 
> 时间：2012-07-26T01:44:00.580
> 
> 标签：ruby, authentication, github, sinatra, omniauth

好的，已经超过 5 个小时了，我仍然无处可去。我想做的是在我的一个基于 Ruby-Sinatra 的应用程序中设置omniauth-gihub gem。以下是我所做的。

将 Gems 添加到 Gemfile（当然还有 Ran bundler update 命令）：

```
source 'https://rubygems.org'

gem 'sinatra'
gem 'haml'
gem 'shotgun'
gem 'omniauth', :git => 'git://github.com/intridea/omniauth.git'
gem 'omniauth-github', :git => 'git://github.com/intridea/omniauth-github.git' 
```

在我的 app.rb 文件下，我有以下代码：

```
#imports
require 'rubygems'
require 'bundler'
require 'sinatra'
require 'omniauth'
require 'omniauth-github'
require 'haml'
require './helpers.rb'

#Configure OmniAuth
use OmniAuth::Builder do
  provider :github, ENV['api_key'], ENV['secret'], # Removing the key and secret for security reasons
  scope: "user,repo,gist"
end

#Application Settings
set :sessions, true
set :views, 'templates'

#Get Method for Application Root
get '/' do
  haml :index
end

#Get/Post Methods For Authentication
%w(get post).each do |method|
  send(method, "/auth/:provider/callback") do
    env['omniauth.auth']
  end 
end 
```

Github 应用的设置如下：

```
URL = http://127.0.0.1:4567
Callback URL = http://127.0.0.1:4567/auth/github/callback 
```

现在每当我访问 127.0.0.1:4567/auth/github/callback 时，我都会收到以下错误：

```
I, [2012-07-26T07:05:23.540462 #30458]  INFO -- omniauth: (github) Callback phase initiated.
E, [2012-07-26T07:05:23.540700 #30458] ERROR -- omniauth: (github) Authentication failure! invalid_credentials: OmniAuth::Strategies::OAuth2::CallbackError, OmniAuth::Strategies::OAuth2::CallbackError
localhost - - [26/Jul/2012:07:05:23 IST] "GET /auth/github/callback HTTP/1.1" 302 9
- -> /auth/github/callback
localhost - - [26/Jul/2012:07:05:23 IST] "GET /auth/failure?message=invalid_credentials&strategy=github HTTP/1.1" 404 448
- -> /auth/failure?message=invalid_credentials&strategy=github
localhost - - [26/Jul/2012:07:05:23 IST] "GET /favicon.ico HTTP/1.1" 404 447
- -> /favicon.ico 
```

似乎它甚至没有尝试连接到 github，我以为我已经登录了所以我退出了 github 并尝试再次访问 127.0.0.4567/auth/github/callback 是的，它甚至没有连接或发送任何信息到 github .

我检查了我的 api 密钥和秘密，它们是正确的。我真的不知道我错过了什么，真的很累。任何帮助或建议将不胜感激。

编辑：：

好的我发现在oauth2.rb中引发错误的代码如下

```
def callback_phase
    if request.params['error'] || request.params['error_reason']
      raise CallbackError.new(request.params['error'], request.params['error_description'] || request.params['error_reason'], request.params['error_uri'])
    end 
    if request.params['state'].to_s.empty? || request.params['state'] != session.delete('omniauth.state')
      raise CallbackError.new(nil, :csrf_detected)
    end 
```

我觉得这与 CSRF 有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:22:33.297

这可能很有趣： [https ://github.com/intridea/omniauth-github/issues/12](https://github.com/intridea/omniauth-github/issues/12)

我遇到了与您相同的错误，并添加了 scope: 'user' 为我修复了它。

我看到您已经在使用范围，但该链接可能会让您走上正确的轨道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T16:44:00.940

有同样的问题 - 将 omniauth-facebook 降级到 1.4.0 为我修复了它。[https://github.com/mkdynamic/omniauth-facebook/issues/73](https://github.com/mkdynamic/omniauth-facebook/issues/73)

# mongodb - 存储与分离流相关的数据

> ID：11661192
> 
> 赞同：2
> 
> 时间：2012-07-26T01:44:07.077
> 
> 标签：mongodb, twitter, twitter4j

我将使用过滤器/跟踪方法、twitter4J/Java 语言获取有关多个主题的推文。另外，我使用 MongoDB 来存储它们，但我想知道是否有办法将与这些主题相关的推文存储在单独的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:48:34.357

为什么要将它们存储在不同的数据库中？我相信不同的收藏就足够了。[Twitter 101: Store Tweets with MongoDB](http://learnmongo.com/posts/mongodb-php-twitter-part-1/)讨论了在 MongoDB 中存储推文，我想你会发现它很相关。

用于 Twitter 类型项目的 MongoDB 模式[here](https://stackoverflow.com/questions/6881974/how-do-i-design-a-mongodb-schema-for-a-twitter-article-aggregator)和[here](https://stackoverflow.com/questions/6515686/best-mongodb-schema-for-twitter-clone)。

有关于 MongoDB 模式设计的非常好的信息 [这里| [http://www.ticketmaster.ie/The-Phantom-of-the-Opera-tickets/artist/804174]](http://www.ticketmaster.ie/The-Phantom-of-the-Opera-tickets/artist/804174])。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:46:59.247

如果您要存储与图形相关的信息，请查看 neo4j 和 orientDB（或者如果符合您的标准，也可以使用flockDB）。

# sql - 如何在关系数据库中存储智能列表规则

> ID：11661199
> 
> 赞同：3
> 
> 时间：2012-07-26T01:44:28.283
> 
> 标签：sql, django

我正在构建的系统具有智能组。智能组是指根据以下规则自动更新的组：

1.  包括与给定客户相关联的所有人员。
2.  包括与给定客户相关联并拥有这些职业的所有人员。
3.  包括一个特定的人（即，通过 ID）

每个智能组可以组合任意数量的这些规则。因此，例如，特定的智能列表可能具有以下特定规则：

1.  包括与客户 1 关联的所有人员
2.  包括与客户 5 相关联的所有人员
3.  包括人 6
4.  包括与客户 10 相关的所有人员，以及从事职业 2、6 和 9 的所有人员

这些规则被 OR'ed 在一起以形成组。我正在尝试考虑如何最好地将其存储在数据库中，因为除了支持这些规则之外，我希望将来能够添加其他规则而不会带来太多痛苦。

我想到的解决方案是为每种规则类型设置一个单独的模型。该模型将有一个方法返回一个查询集，该查询集可以与其他规则的查询集组合，最终得出一个人员列表。我可以看到的一个缺点是每个规则都有自己的数据库表。我应该担心这个吗？有没有更好的方法来存储这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:03:43.717

为什么不使用[Q 对象](https://docs.djangoproject.com/en/1.4/topics/db/queries/#complex-lookups-with-q-objects)？

```
rule1 = Q(client = 1)
rule2 = Q(client = 5)
rule3 = Q(id = 6)
rule4 = Q(client = 10) & (Q(occupation = 2) | Q(occupation = 6) | Q(occupation = 9))

people = Person.objects.filter(rule1 | rule2 | rule3 | rule4) 
```

然后将他们腌制的字符串存储到数据库中。

```
rule = rule1 | rule2 | rule3 | rule4
pickled_rule_string = pickle.dumps(rule)
Rule.objects.create(pickled_rule_string=pickled_rule_string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:05:15.803

以下是我们为处理这种情况而实施的模型。

```
class ConsortiumRule(OrganizationModel):
    BY_EMPLOYEE = 1
    BY_CLIENT = 2
    BY_OCCUPATION = 3
    BY_CLASSIFICATION = 4
    TYPES = (
        (BY_EMPLOYEE, 'Include a specific employee'),
        (BY_CLIENT, 'Include all employees of a specific client'),
        (BY_OCCUPATION, 'Include all employees of a speciified  client ' + \
            'that have the specified occupation'),
        (BY_CLASSIFICATION, 'Include all employees of a specified client ' + \
            'that have the specified classifications'))

    consortium = models.ForeignKey(Consortium, related_name='rules')
    type = models.PositiveIntegerField(choices=TYPES, default=BY_CLIENT)
    negate_rule = models.BooleanField(default=False,
        help_text='Exclude people who match this rule')

class ConsortiumRuleParameter(OrganizationModel):
    """ example usage: two of these objects one with "occupation=5" one
    with "occupation=6" - both FK linked to a single Rule
    """

    rule = models.ForeignKey(ConsortiumRule, related_name='parameters')
    key = models.CharField(max_length=100, blank=False)
    value = models.CharField(max_length=100, blank=False) 
```

起初我反对这种解决方案，因为我不喜欢在 CharField 中存储对其他对象的引用的想法（选择了 CharField，因为它是最通用的。后来，我们可能有一个匹配任何人的规则名字以“Jo”开头）。但是，我认为这是将这种映射存储在关系数据库中的最佳解决方案。这是一个好方法的一个原因是它相对容易清理悬挂的引用。例如，如果一家公司被删除，我们只需要做：

```
ConsortiumRuleParameter.objects.filter(key='company', value=str(pk)).delete() 
```

如果将参数存储为序列化对象（例如，评论中建议的 Q 对象），这将更加困难和耗时。

# android - 如何使用 viewPager 减少酸性点击？

> ID：11661207
> 
> 赞同：0
> 
> 时间：2012-07-26T01:45:27.090
> 
> 标签：android, android-viewpager

在我的 android 应用程序上，我有一个 viewPager，我有它，这样当用户单击图像时，他们可以共享它。使用 viewPager 时，会导致许多意外点击，并导致用户对不断弹出的共享对话框感到恼火。

所以我想知道阻止意外点击的最佳方法是什么？

我尝试创建一个菜单选项来共享图像，但由于我设置类的方式，它没有成功。

# iphone - 无法识别的选择器发送到实例

> ID：11661215
> 
> 赞同：0
> 
> 时间：2012-07-26T01:46:51.973
> 
> 标签：iphone, ios

我正在尝试初始化一个数组并将一个章节对象添加到书籍对象数组中，但它因错误而崩溃：

> 2012-07-25 21:41:01.503 Project1[2364:f803]-[__NSCFString arrayOfChapters]：无法识别的选择器发送到实例 0x6ad80b0 2012-07-25 21:41:01.505 Project1[2364:f803] ***由于未捕获而终止应用程序异常“NSInvalidArgumentException”，原因：“-[__NSCFString arrayOfChapters]：无法识别的选择器发送到实例 0x6ad80b0”

我的代码：

```
Chapter *myChapter = [[Chapter alloc]init];
myChapter.pageCount = self.TextField2.text;
myChapter.chapterTitle = self.TextField1.text;
if(!currentBook.arrayOfChapters)
{
    currentBook.arrayOfChapters = [[NSMutableArray alloc]init];
}
currentBook = [books objectAtIndex:segControl.selectedSegmentIndex];
[currentBook.arrayOfChapters addObject:myChapter]; 
```

我认为代码是正确的，我的项目设置有问题吗？我相信这是导致实际崩溃的初始化，但那里没有任何不标准的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:55:09.340

看起来 currentBook 是一个字符串或未初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:24:11.463

可以在“ `if(!currentBook.arrayOfChapters)`”行下断点，检查currentBook是否为nil；

在 " 行上打断点`"currentBook = [books objectAtIndex:segControl.selectedSegmentIndex];` 以检查 segControl.selectedSegmentIndex >= [books count] 是否

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T02:30:45.103

我可能误读了这个，但是...

```
 if(!currentBook.arrayOfChapters)
    {
        // creating array for current book
        currentBook.arrayOfChapters = [[NSMutableArray alloc]init]; 
    }

    // reassigning a new book to current book. Are you sure this new one has array of chapters?
    currentBook = [books objectAtIndex:segControl.selectedSegmentIndex]; 

    // trying to access array of chapters
    [currentBook.arrayOfChapters addObject:myChapter]; 
```

如果数组不存在，您不应该先分配然后创建数组吗？

# c# - 以编程方式将图像放入不活动的表单中？

> ID：11661223
> 
> 赞同：1
> 
> 时间：2012-07-26T01:48:34.213
> 
> 标签：c#, winforms

我想以编程方式将图像放入不活动的表单中。

```
Image myImage = new Image();
gfx = Form.ActiveForm.CreateGraphics();
gfx.DrawImage(myImage, 0,0); 
```

只有当表单处于活动状态时它才会完美地工作，但是当表单不活动时它是没有意义的，只是返回一个错误：

> 在对象引用的实例中未设置为对象。

如何处理在我的应用程序中未激活的表单并为其添加图片？

**更新** [1](http://www.imagesocket.com/photos/guest/2503780)

我做了实例，并打开了 DoubleBuffered 属性（true），但没有任何反应：

```
Form1 form = new Form1();
gfx = form.CreateGraphics();
gfx.DrawImage(bmp, 0, 0); 
```

**upd** 2 More Source，这是我添加的课程

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;
using System.Drawing.Imaging;
using System.Drawing.Printing;

namespace testimg
{
    class doimg
    {

        public void picture()
        {

            // some staffs to get a picture, so it's in bmp object now.

            gfx = this. // watch picture below
            gfx.DrawImage(bmp, 0, 0);

            // I tried to use PictureBox, but it's the same issue (I can't handle it on a form)
            PictureBox pb = new PictureBox();
            pb.CreateGraphics();
            pb.DrawToBitmap(bmp,pb.ClientRectangle);

        }

    }
} 
```

和**Arif Eqbal**解决方案的图片：[没有用于此的图形方法（图片）](http://www.imagesocket.com/photos/guest/2503780)

**更新**3

我所拥有的完整来源（计时器在 10 秒）

**Form1.cs**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace testimg
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {

            doimg pic = new doimg();

            pic.picture();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            timer1.Enabled = true;
        }
     }
} 
```

**doimg.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Drawing;
using System.Drawing.Imaging;
using System.Drawing.Printing;

namespace testimg
{
    class doimg
    {

        public void picture()
        {

            // some staffs to get a picture, so it's in bmp object now.
            Bitmap bmp = new Bitmap(200, 200,    System.Drawing.Imaging.PixelFormat.Format32bppArgb);
            Graphics gfx = Graphics.FromImage(bmp);
            gfx = Form1.ActiveForm.CreateGraphics(); // works well with active form
            gfx.DrawImage(bmp, 0, 0);

        }

     }
} 
```

以及项目[http://www.filedropper.com/testimg的整个存档](http://www.filedropper.com/testimg)

正如您所看到的，在程序处于活动状态时一切运行良好。仍然需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:37:04.560

在您的 Form2 上，尝试这样设置：

```
public partial class Form2 : Form {

  public Image MyImage { get; set; }

  public Form2() {
    InitializeComponent();
  }

  protected override void OnPaint(PaintEventArgs e) {
    if (MyImage != null) {
      e.Graphics.DrawImage(MyImage, 0, 0);
    }
    base.OnPaint(e);
  }
} 
```

然后从您的活动表单中，您可以调用另一个表单来绘制自己：

```
public partial class Form1 : Form {
  Form2 f2 = new Form2();

  public Form1() {
    InitializeComponent();
    f2.Show();
  }

  private void button1_Click(object sender, EventArgs e) {
    f2.MyImage = myImage;
    f2.Invalidate();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:01:21.693

您必须创建表单的一个实例。无论它是否可见和活动。

例子：

```
Image myImage = new Image(); // load image
MyForm form = new MyForm();
gfx = form.CreateGraphics();
gfx.DrawImage(myImage, 0, 0); 
```

然后，当您想要显示表单时，您将能够调用 form.Show()。

（注意，您可能还必须将表单上的 DoubleBackBuffer 设置为 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:54:17.530

部分问题是，当您设置位图时，表单没有更新，特别是如果它被最小化或没有焦点。您还有一个问题，因为它没有在 Paint Event Handler 中设置，所以您没有保留图像。尝试这样的事情，注意`Invalidate`通话和计时器设置为 10,000 毫秒。如果您正在使用多种表单，这是@LarsTech 答案的变体，他是要走的路。

```
public partial class Form1 : Form
{
    Bitmap myImage;

    public Form1()
    {
        InitializeComponent();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        myImage = new Bitmap("Your Image Name Here");
        Invalidate();

    }

    private void Form1_Paint(object sender, PaintEventArgs e)
    {

        if (myImage != null)
            e.Graphics.DrawImage(myImage,0,0);

    }

} 
```

* * *

修改了我的示例以使用 OP 的结构：

当表单没有焦点时，我的原始示例确实有效。您的错误主要问题是`Form1.ActiveForm`在它不是活动表单时使用，它将返回导致您的错误的 null 。使用 Forms Paint 事件并使 Form 无效以确保 Image 被绘制。

**Form1.cs**

```
namespace testimg
{
    public partial class Form1 : Form
    {
        Bitmap myImage;

        public Form1()
        {
            InitializeComponent();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            myImage = doimg.picture();
            Invalidate();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            timer1.Enabled = true;
        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {
            if (myImage != null)
                e.Graphics.DrawImage(myImage,0,0);
        }
    }
} 
```

**doimg.cs**

```
namespace testimg
{
    static class  doimg
    {
        static Color[] clr = new Color[] { Color.Red, Color.Blue, Color.Black, Color.Violet, Color.Wheat };
        static  int count = 0;
        static  public Bitmap picture()
        {

            // some staffs to get a picture, so it's in bmp object now.
            Bitmap bmp = new Bitmap(200, 200, System.Drawing.Imaging.PixelFormat.Format32bppArgb);

            // Added some drawing to bitmap to test functionality
            Graphics gfx = Graphics.FromImage(bmp);
            gfx.FillEllipse(new SolidBrush(clr[count]),new Rectangle(0,0,199,199));

            gfx.Dispose();

            if (count >= 4)
                count = 0;
            else
                count += 1;

            return bmp;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T03:32:18.333

我想我可以理解它......您的获取表单实例并在其上绘制的代码是否在计时器上运行？而你的申请只有一种形式？当应用程序不活动时，您会遇到问题吗？

如果是，则替换该行

```
Form.ActiveForm.CreateGraphics(); 
```

和

```
this.CreateGraphics(); 
```

Form.ActiveForm 为应用程序提供当前活动表单的引用，如果您在说单击按钮时编写此代码，您一定会获得单击按钮的表单的名称。但是，如果代码在计时器上，它可能会给出 Active 表单的实例，如果整个应用程序不是 Active，则可能会给出 Null。

正如您在其中一条评论中提到的，您没有任何其他表单，您的应用程序似乎只有一个表单，并且此代码在应用程序中的唯一表单上运行，因此 this.CreateGraphics 应该足够了。但是，如果您的应用程序有多个表单，那么 Form.ActiveForm 是合法代码，但您需要注意没有表单处于活动状态的情况，即应用程序本身不活动。

编辑：

我认为您需要将要在其上绘制的 Form 实例传递给此类。创建一个属性并将属性值设置为表单的实例，您也可以在构造函数中传递它......在这里使用 Form.ActiveForm 不是一个坏主意，但有两个原因，明天如果您有多个表单在您的应用程序中，它将随机绘制在任何一个处于活动状态的情况下，其次是在您当前的情况下，如果应用程序未处于活动状态，您将无法获取实例......因为您的应用程序中只有一个表单，我想您将创建表单上此类的实例，因此您可以添加一个属性

```
public Form ParentForm { get; set; } 
```

在课堂上并将其设置为

```
myClassObject.ParentForm = this; 
```

在您创建此类的实例时在表单上然后说

```
ParentForm.CreateGraphics 
```

在课堂里

# java - 如果它的引用被 GC'ed，如何 GC 一个 SoftReference

> ID：11661227
> 
> 赞同：0
> 
> 时间：2012-07-26T01:48:52.390
> 
> 标签：java

我有一个

```
ConcurrentMap<String, SoftReference<X>> map = new ConcurrentHashMap<String, SoftReference<X>>(); 
```

并且希望在 SoftReference 的所指对象被 GC 时从映射中删除键/值对。

我该如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:57:42.103

当 SoftReference 的引用对象被 GC'ed 时，不会删除键/值对。下面的程序显示了结果。

```
package test.gc;

import java.lang.ref.Reference;
import java.lang.ref.ReferenceQueue;
import java.lang.ref.SoftReference;
import java.util.Date;
import java.util.concurrent.ConcurrentHashMap;

public class TestSoftReference {

    public static ReferenceQueue<TestModel> referenceQueue = new ReferenceQueue<>();
    public static ConcurrentHashMap<Integer, SoftReference<TestModel>> map = new ConcurrentHashMap<>();

    public static void main(String[] args) throws InterruptedException {
        final int KEY1 = 1;

        TestModel testModel1 = new TestModel(KEY1);
        SoftReference<TestModel> reference1 = new SoftReference<TestModel>(testModel1, referenceQueue);

        map.put(testModel1.getNumber(), reference1);

        testModel1 = null;

        while (true) {  
            Object obj = referenceQueue.poll();  
            if (obj != null) {  
                System.out.println("queue.poll at " + new Date() + " " + obj);
                break;  
            }  
            System.gc();  
        }  

        SoftReference<TestModel> tempReference = null;
        tempReference = map.get(KEY1);
        System.err.println("reference:" + tempReference);
        if (tempReference != null) {
            System.err.println("referent:" + tempReference.get());
        }
    }

}

class TestModel {

    private int number = 0;
    private int[] bigArray = null;

    public int getNumber() {
        return number;
    }

    public TestModel(int n) {
        if (n <= 0) {
            throw new IllegalArgumentException("argument n must greater than 0.");
        } else {
            number = n;
            bigArray = new int[n * 1024 * 1024];
        }
    } 

    @Override
    public String toString() {
        return "field bigArray's baseNumber is " + number + " and bigArray's length is " + bigArray.length;
    }

} 
```

结果是：

```
 queue.poll at Thu Jul 26 14:37:21 CST 2012 java.lang.ref.SoftReference@1c501f7
    reference:java.lang.ref.SoftReference@1c501f7
    referent:null 
```

如图所示，当引用被 GC 时，键/值对不会被删除。

您可以实现自己的 RefenceQueue 和 SoftReference 来实现您的目标，并覆盖 RefenceQueue 的 poll 方法，您可以在其中完成自己的工作，如下所示：

```
class SoftReferenceMonitor extends ReferenceQueue<TestModel> {

    @Override
    public Reference<? extends TestModel> poll() {
        @SuppressWarnings("unchecked")
        Reference<TestModel> ref = (Reference<TestModel>) super.poll();
        if (ref != null) {
            int id = ((CustomizedSoftReference)ref).getId();
            TestSoftReference.map.remove(id);
            System.err.println("remove key/value '" + id + "' from map.");
        }
        return ref;
    }

}

class CustomizedSoftReference extends SoftReference<TestModel> {

    private int id;

    public int getId() {
        return id;
    }

    public CustomizedSoftReference(TestModel referent, ReferenceQueue<? super TestModel> q) {
        super(referent, q);
        this.id = referent.getNumber();
    }

} 
```

然后将SoftReference和SoftReferenceMonitor分别替换为SoftReferenceMonitor和CustomizedSoftReference，运行程序。结果是：

```
remove key/value '1' from map.
reference:null
queue.poll at Thu Jul 26 14:46:54 CST 2012 test.gc.CustomizedSoftReference@4e7958 
```

现在键/值对已被删除。

此外，您可以使用另一个线程来构造 SoftReferenceMonitor 实例并监视 SoftReference。

希望这有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:45:42.490

你考虑[过番石榴缓存](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheBuilder.html)吗？

它会为你处理这方面的问题。

如果你真的不能使用这个库，也许你将不得不覆盖 concurrentHashMap 以测试软引用是否仍然持有某些东西，并在这种情况下删除条目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:06:15.960

`SoftReference`Map 中的对象将不会被垃圾收集，直到您从 map 中删除它并且没有引用指向该对象。首先`<K,V>`从地图中删除对，然后它将自动被垃圾收集。

使用[ConcurrentMap.remove()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentMap.html#remove%28java.lang.Object,%20java.lang.Object%29)

# python - Django 重组用户外键

> ID：11661231
> 
> 赞同：0
> 
> 时间：2012-07-26T01:49:33.980
> 
> 标签：python, django

我有以下模型：

```
class JobView(models.Model):
    job = models.ForeignKey(Job)
    user = models.ForeignKey('auth.User')
    created = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)

    class Meta:
        ordering = ['-created'] 
```

在一个视图中，我正在获取工作信息：

```
model = Job.objects.get(pk=id) 
```

在模板中，我正在执行以下操作：

```
 {% regroup model.jobview_set.all by user as user_list %}
        {% for u in user_list %}
        {{ u.grouper.email }}
        {% endfor %} 
```

我遇到的问题是，并不是真正按用户分组，或者更重要的是，按用户随机分组。有时它显示用户两次，有时显示 3 次。我有什么遗漏吗？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:10:11.477

这是因为`{% regroup %}`不对其输入进行排序。您正在尝试按用户分组，但 model.jobview_set.all 不是按用户排序的，因此您会根据用户的排序方式获得随机组。

`model.jobview_set.all`最简单的解决方案是在将其传递给模板之前进行排序。

直接取自 django 文档：

> 请注意，{% regroup %} 不会对其输入进行排序！

[https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#regroup](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#regroup)

# java - Java中的子类不能继承（或覆盖）私有成员吗？

> ID：11661233
> 
> 赞同：1
> 
> 时间：2012-07-26T01:49:47.407
> 
> 标签：java, jvm

那个子类不是继承了超类的**一切**吗？但是子类无法访问其超类的私有属性/方法，但可以访问自己的。所以我写了一个测试程序。但似乎子类没有一个！

```
class a {
    private void set() {
           System.out.println("a.set()");
    }
}
public class b extends a {
//      private void set() {
//      System.out.pritln("b.set()");
//       }
        void f() {
             set();
        }
        public static void main(String[] args) {
             b b = new b();
             b.f();
        }
} 
```

如果我像示例那样注释掉 b 中的 set() 方法，它将无法编译。

任何的想法？JVM视图有什么解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T01:53:25.150

是的，`private`无法从派生类访问方法。`protected`并且`public`是。

当您`set`在派生类中声明时，您可以访问此派生版本，因为它现在是类的一部分（不再是`private`基类方法）。

如果您尝试调用`super.set()`.

编辑：我认为aroth所说的技巧是反射。：） 不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:54:07.897

这个问题毫无意义。私人是私人的。对当前类之外的所有内容均不可见。如果您想要“受保护”，请使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T02:04:57.343

如果你想要介于两者之间的东西，请使用“protected”修饰符而不是“private”修饰符；protected 本质上意味着除子类之外的所有内容都是私有的。

# crystal-reports - 如何过滤 Crystal Report 以仅显示第 1 至 5 页

> ID：11661234
> 
> 赞同：0
> 
> 时间：2012-07-26T01:49:49.237
> 
> 标签：crystal-reports, report

我有一份超过 1000 页的报告，现在我想显示第 1 页到第 5 页、第 6 页到第 10 页的报告，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:02:20.247

Crystal Reports 应该有一个`PageNumber`可以引用的变量。使用它，您可以通过所需的页码范围有条件地抑制报告的每个部分，例如：

```
PageNumber >= 1 and PageNunber <= 5 
```

# objective-c - 任何 OBJC API 都可以访问 Mac 上通讯录的 Exchange 源

> ID：11661237
> 
> 赞同：0
> 
> 时间：2012-07-26T01:50:12.920
> 
> 标签：objective-c, macos, exchange-server, addressbook

我使用的语言是Objective-C，我想从Mac上的通讯录中获取交换源列表。

在 iOS 平台上使用 addressBook.framework 时，我可以找到一些 API，例如：

```
CFArrayRef allSources = ABAddressBookCopyArrayOfAllSources(book); 
```

这非常有效，但我在 Mac 的同一框架中找不到任何类似的 API。

有什么方法可以从 mac 获取源列表？

或者是否有任何包含这些功能的库或框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:07:56.157

我检查了 Apple 的文档，似乎没有办法在 Mac 上获取 ExchangeSource 数据，谢谢！

# python - 一次对 2 个元素使用 FOR 语句 python

> ID：11661239
> 
> 赞同：0
> 
> 时间：2012-07-26T01:50:22.590
> 
> 标签：python

我有以下变量列表和一个主变量

`a = (1,5,7)`

`b = (1,3,5)`

`c = (2,2,2)`

`d = (5,2,8)`

`e = (5,5,8)`

`mastervariable = (3,2,5)`

我正在尝试检查主变量中是否存在每个变量中的 2 个元素，以便上面将 B (3,5) 和 D (5,2) 显示为在主变量中至少有 2 个元素匹配的元素。另请注意，使用集合会导致 C 显示为 matchign 但我不想计算 C 因为 C 中只有“一个”元素在 mastervariable 中（即 2 只在 mastervariable 中出现一次而不是两次）

我目前的效率非常低：

```
if current_variable[0]==mastervariable[0]:
            if current_variable[1] = mastervariable[1]:
                        True                        
            elif current_variable[2] = mastervariable[1]:
                        True       

  #### I don't use OR here because I need to know which variables match.

elif current_variable[1] == mastervariable[0]:   ##<-- I'm now checking 2nd element
            etc. etc. 
```

然后我通过一次检查每一个来继续像上面那样进行迭代，这是非常低效的。我这样做是因为使用 FOR 语句导致我检查了第一个元素两次，这是不正确的：

```
For i in a:
      for j in a:
           ### this checked if 1 was in the master variable and not 1,5 or 1,7 
```

有没有办法使用 2 FOR 语句，允许我一次检查列表中的 2 个元素，同时跳过任何已经使用过的元素？或者，你能建议一种有效的方法来做我正在尝试的事情吗？

编辑： Mastervariable 中可以有重复项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:52:49.050

对于套装来说，这似乎是一份不错的工作。编辑：集合不合适，因为 mastervariable 可以包含重复项。这是使用计数器的版本。

```
>>> a = (1,5,7)
>>> 
>>> b = (1,3,5)
>>> 
>>> c = (2,2,2)
>>> 
>>> d = (5,2,8)
>>> 
>>> e = (5,5,8)
>>> D=dict(a=a, b=b, c=c, d=d, e=e)
>>> 
>>> from collections import Counter
>>> mastervariable = (5,5,3)
>>> mvc = Counter(mastervariable)
>>> for k,v in D.items():
...  vc = Counter(v)
...  if sum(min(count, vc[item]) for item, count in mvc.items())==2:
...   print k
... 
b
e 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:20:10.597

对于可以复制匹配元素以致`set`中断的情况，[`Counter`](http://docs.python.org/library/collections.html#collections.Counter)请用作多重集 - 和之间的重复项`a`通过`master`以下方式找到：

```
count_a = Counter(a)
count_master = Counter(master)
count_both = count_a + count_master
dups = Counter({e : min((count_a[e], count_master[e])) for e in count_a if count_both[e] > count_a[e]}) 
```

逻辑相当直观：如果 and 的组合计数中有更多的项目`a`，`master`则它是重复的，并且多重性是该项目中的许多项目在其中任何一个中`a`并且`master`具有较少的项目。

它给出了所有重复项的计数器，其中计数是它们的多重性。如果你想把它作为一个元组返回，你可以这样做`tuple(dups.elements())`：

```
>>> a
(2, 2, 2)
>>> master
(1, 2, 2)
>>> dups = Counter({e : min((count_a[e], count_master[e])) for e in count_a if count_both[e] > count_a[e]})
>>> tuple(dups.elements())
(2, 2) 
```

# c# - NSubstitute 在循环中多次调用时返回意外值

> ID：11661242
> 
> 赞同：2
> 
> 时间：2012-07-26T01:51:01.300
> 
> 标签：c#, loops, nsubstitute

在使用 NSubstitute 模拟带有输出参数的方法时，我遇到过这种情况。我不确定如何最好地用文字解释它，所以我将使用一些人为的例子和测试用例......

在这个人为的示例中，我将使用一个 NSubstitute 模拟`IDictionary<string, string>`.

```
private static IDictionary<string, string> GetSubstituteDictionary()
{
    IDictionary<string, string> dict = Substitute.For<IDictionary<string, string>>();

    string s;
    dict.TryGetValue("key", out s).Returns(ci => { ci[1] = "value"; return true; });

    return dict;
} 
```

现在，当我以简单的方式使用这个模拟对象时，它会按预期返回：

```
[Test]
public void ExampleOne()
{
    var dict = GetSubstituteDictionary();

    string value;
    bool result = dict.TryGetValue("key", out value);

    Assert.That(result, Is.True); // this assert passes.
    Assert.That(value, Is.EqualTo("value")); // this assert passes.
} 
```

但是，当我在 for 循环中调用相同的代码时，会出现一些意外行为：

```
[Test]
public void ExampleTwo()
{
    var dict = GetSubstituteDictionary();

    for (int i = 0; i < 2; i++)
    {
        string value;
        bool result = dict.TryGetValue("key", out value);

        Assert.That(result, Is.True); // this assert FAILS - unexpected!
        Assert.That(value, Is.EqualTo("value")); // this assert still passes.
    }
} 
```

特别是，`Assert.That(result, Is.True);`断言在循环的第一次迭代中通过，但在第二次（以及任何后续）迭代中失败。

但是，如果我将该`string value;`行修改为`string value = null;`，则断言将通过所有迭代。

是什么导致了这种异常？这是由于我缺少 C# for 循环的某些语义，还是 NSubstitute 库的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T03:34:47.987

原因是`value`循环中的变量发生了变化（通过输出参数设置），因此它不再与您存根的调用匹配。

您可以尝试使用`.ReturnsForAnyArgs()`，尽管您需要检查存根中的密钥，而不是通过参数匹配器。

# serialization - ServiceStack 在 XML 中序列化列表

> ID：11661243
> 
> 赞同：2
> 
> 时间：2012-07-26T01:51:05.260
> 
> 标签：serialization, deserialization, datacontractserializer, servicestack

我有一个预定义的 xml 示例，它定义了请求和响应，我无法使用的唯一部分`ServiceStack.Text.XmlSerializer`是以下代码片段，它基本上是一个字符串列表。

```
<user>
....
    <EmailPreferences> 
        <EmailProgram>Newsletter</EmailProgram> 
        <EmailProgram>Coupons</EmailProgram> 
    </EmailPreferences> 
```

我尝试使用示例[Using Structs to customize JSON](http://www.servicestack.net/docs/text-serializers/json-serializer)，但正如标题所暗示的那样，这并不影响 xml 序列化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T05:50:13.760

ServiceStack 在底层使用 .NET 的 XML DataContractSerializer。因此，您可以使用它支持的任何自定义来装饰模型。因此，要获得类似上述内容，您可以执行以下操作：

```
[CollectionDataContract(Name="EmailPreferences", ItemName="EmailProgram")]
public class EmailPreferences : List<string>
{
    public EmailPreferences() { }
    public EmailPreferences(IEnumerable<string> collection) : base(collection){}
} 
```

### 全局 XML 命名空间

尽管您可以为每个 DataContract 单独添加命名空间，但更好的做法是让所有 DTO 共享相同的命名空间，这将防止自动生成和重复的命名空间出现在您的 XML 中。

由于 ResponseStatus DTO 已经在`http://schemas.servicestack.net/types`命名空间下，所以如果你不关心你的命名空间是什么，我会把它留在那里。

将所有 DataContract 放在同一个命名空间下的最简单方法是将这些程序集范围的属性放在您的 AssemblyInfo.cs 中，以便为您的 DTO 所在的每个 C# 命名空间：

```
[assembly: ContractNamespace("http://schemas.servicestack.net/types",  
    ClrNamespace = "ServiceStack.Examples.ServiceModel.Operations")]
[assembly: ContractNamespace("http://schemas.servicestack.net/types",  
   ClrNamespace = "ServiceStack.Examples.ServiceModel.Types")] 
```

# python - 从 optparse 传递可选参数

> ID：11661246
> 
> 赞同：1
> 
> 时间：2012-07-26T01:51:44.427
> 
> 标签：python, python-2.6, optparse, optional-arguments

我试图弄清楚如何从 optparse 传递可选参数。我遇到的问题是，如果未指定 optparse 选项，它默认为 None 类型，但如果我将 None 类型传递给函数，它会对我大喊大叫，而不是使用默认值（这是可以理解和有效的）。

```
conn = psycopg2.connect(database=options.db, hostname=options.hostname, port=options.port) 
```

问题是，我如何将函数的默认值用于可选参数，但如果有输入而没有大量 if 语句，仍然传递用户输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:11:15.533

定义一个`remove_none_values`过滤字典以查找无值参数的函数。

```
def remove_none_values(d):
    return dict((k,v) for (k,v) in d.iteritems() if not v is None)

kwargs = {
  'database': options.db,
  'hostname': options.hostname,
  ...
}
conn = psycopg2.connect(**remove_none_values(kwargs)) 
```

或者，定义一个函数包装器，在将数据传递给原始函数之前删除任何值。

```
def ignore_none_valued_kwargs(f):
    @functools.wraps(f)
    def wrapper(*args, **kwargs):
        newkwargs = dict((k,v) for (k,v) in d.iteritems() if not v is None)
        return f(*args, **kwargs)
    return wrapper

my_connect = ignore_none_valued_kwargs(psycopg2)
conn = my_connect(database=options.db, hostname=options.hostname, port=options.port) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T08:40:49.337

我的包的`opo`模块（[https://bitbucket.org/therp/thebops](https://bitbucket.org/therp/thebops)）包含一个函数。这使用了一个额外的关键字参数，该参数指定在没有值的情况下使用该选项时要使用的值。如果在命令行中找到选项字符串之一，则将该值注入参数列表。`thebops``pip install thebops``add_optval_option``empty`

这仍然是hackish，但至少它是一个易于使用的功能......

它在以下情况下运行良好：

*   创建选项时，参数向量确实已经存在。这通常是正确的。
*   我发现所有具有可选值的运动参数的所有程序都需要*将给定*值附加为`--option=value`or`-ovalue`而不是`--option value`or `-o value`。

也许我也会调整`thebops.optparse`以支持这个`empty`论点；但我想先有一个测试套件来防止回归，最好是原始`Optik`/`optparse`测试。

这是代码：

```
from sys import argv
def add_optval_option(pog, *args, **kwargs):
    """
    Add an option which can be specified without a value;
    in this case, the value (if given) must be contained
    in the same argument as seen by the shell,
    i.e.:

    --option=VALUE, --option will work;
    --option VALUE will *not* work

    Arguments:
    pog -- parser or group
    empty -- the value to use when used without a value

    Note:
      If you specify a short option string as well, the syntax given by the
      help will be wrong; -oVALUE will be supported, -o VALUE will not!
      Thus it might be wise to create a separate option for the short
      option strings (in a "hidden" group which isn't added to the parser after
      being populated) and just mention it in the help string.
    """
    if 'empty' in kwargs:
        empty_val = kwargs.pop('empty')
        # in this case it's a good idea to have a <default> value; this can be
        # given by another option with the same <dest>, though
        for i in range(1, len(argv)):
            a = argv[i]
            if a == '--':
                break
            if a in args:
                argv.insert(i+1, empty_val)
                break
    pog.add_option(*args, **kwargs) 
```

# ios - 即使在 iPhone 中按下 HOME 按钮后，我还想继续播放音乐吗？

> ID：11661247
> 
> 赞同：0
> 
> 时间：2012-07-26T01:51:45.803
> 
> 标签：ios, iphone, home-button

即使在用户按下 iPhone 上的 HOME 按钮后，我也想继续播放音乐。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:47:36.343

参考[这个网站](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_background-audio/)。你会很有帮助的。祝你好运

# c++ - 是否可以测试两个迭代器是否指向同一个对象？

> ID：11661261
> 
> 赞同：5
> 
> 时间：2012-07-26T01:53:59.197
> 
> 标签：c++, stl, iterator

假设我正在制作一个复制值的函数：

```
template<class ItInput, class ItOutput>
void copy(ItInput i, ItOutput o) { *o = *i; } 
```

我想**避免分配**if`i`和`o`指向同一个对象，因为那样分配是没有意义的。

显然，我不能说`if (i != o) { ... }`，因为`i`和`o`可能是不同的类型，也因为它们可能指向不同的容器（因此无法比较）。不太明显的是，我也不能使用重载的函数模板，因为迭代器可能属于不同的容器，即使它们具有相同的类型。

我最初的解决方案是：

```
template<class ItInput, class ItOutput>
void copy(ItInput i, ItOutput o)
{
    if (&*o != static_cast<void const *>(&*i))
        *o = *i;
} 
```

但我不确定这是否有效。如果`*o`或`*i`实际上返回一个对象而不是引用怎么办？

一般有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T05:26:44.213

我不认为这真的有必要：如果赋值很昂贵，则该类型应该定义一个赋值运算符来执行（相对便宜的）自赋值检查，以防止做不必要的工作。但是，这是一个有趣的问题，有很多陷阱，所以我会尝试回答它。

如果我们要组装一个适用于输入和输出迭代器的通用解决方案，我们必须注意几个陷阱：

*   输入迭代器是单遍迭代器：每个元素只能通过迭代器执行一次间接，因此，我们不能通过迭代器执行一次间接获取指向值的地址，然后再执行第二次副本。

*   输入迭代器可以是代理迭代器。代理迭代器是一个迭代器，它`operator*`返回一个对象，而不是一个引用。使用代理迭代器，表达式`&*it`是不正确的，因为`*it`它是一个右值（可能会重载一元- `&`，但这样做通常被认为是邪恶和可怕的，大多数类型都不会这样做）。

*   一个输出迭代器只能用于输出；您不能通过它执行间接并将结果用作右值。您可以写入“指向元素”，但不能从中读取。

因此，如果我们要进行“优化”，我们只需要在两个迭代器都是前向迭代器的情况下进行优化（这包括双向迭代器和随机访问迭代器：它们也是前向迭代器）。

因为我们很好，我们还需要注意这样一个事实，尽管它违反了概念要求，但许多代理迭代器歪曲了他们的类别，因为拥有一个支持随机访问序列的代理迭代器非常有用代理对象。（我什至不确定如何在`std::vector<bool>`不这样做的情况下实现高效的迭代器。）

我们将使用以下标准库头文件：

```
#include <iterator>
#include <type_traits>
#include <utility> 
```

我们定义了一个元函数 ，`is_forward_iterator`它测试一个类型是否是“真正的”前向迭代器（即，不是代理迭代器）：

```
template <typename T>
struct is_forward_iterator :
    std::integral_constant<
        bool,
        std::is_base_of<
            std::forward_iterator_tag,
            typename std::iterator_traits<T>::iterator_category
        >::value &&
        std::is_lvalue_reference<
            decltype(*std::declval<T>())
        >::value>
{ }; 
```

为简洁起见，我们还定义了一个元函数 ，`can_compare`它测试两种类型是否都是前向迭代器：

```
template <typename T, typename U>
struct can_compare :
    std::integral_constant<
        bool,
        is_forward_iterator<T>::value &&
        is_forward_iterator<U>::value
    >
{ }; 
```

然后，我们将编写`copy`函数的两个重载，并使用 SFINAE 根据迭代器类型选择正确的重载：如果两个迭代器都是前向迭代器，我们将包含检查，否则我们将排除检查并始终执行任务：

```
template <typename InputIt, typename OutputIt>
auto copy(InputIt const in, OutputIt const out)
    -> typename std::enable_if<can_compare<InputIt, OutputIt>::value>::type
{
    if (static_cast<void const volatile*>(std::addressof(*in)) != 
        static_cast<void const volatile*>(std::addressof(*out)))
        *out = *in;
}

template <typename InputIt, typename OutputIt>
auto copy(InputIt const in, OutputIt const out)
    -> typename std::enable_if<!can_compare<InputIt, OutputIt>::value>::type
{
    *out = *in;
} 
```

像馅饼一样容易！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T02:13:40.377

我认为这可能是一种情况，您可能必须记录有关您期望在函数中使用的类型的一些假设，并且满足于不完全通用的情况。

像`operator*`,`operator&`可以被重载来做各种各样的事情。如果您要防范`operator*`，那么您应该考虑`operator&`and`operator!=`等。

我想说强制执行的一个很好的先决条件（通过代码中的注释或概念/static_assert）是`operator*`返回对迭代器指向的对象的引用，并且它不（或不应该）执行复制. 在这种情况下，您的代码看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T02:35:52.853

按原样，您的代码肯定*不行*，或者至少对于所有迭代器类别都不好。

输入迭代器和输出迭代器在第一次之后不需要是可取消引用的（它们应该是单次传递的），并且输入迭代器可以取消引用任何“可转换为`T`”的东西（第 24.2.3/2 节）。

所以，如果你想处理各种迭代器，我认为你不能强制执行这种“优化”，即你不能一般地检查两个迭代器是否指向同一个对象。如果您愿意放弃输入和输出迭代器，那么您所拥有的应该没问题。否则，无论如何我都会坚持做副本（我真的不认为你有其他选择）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T02:42:22.467

编写一个帮助模板函数，如果迭代器是不同的类型`equals`，它会自动返回。`false`要么这样做，要么对你的`copy`函数本身进行专门化或重载。

如果它们是相同的类型，那么您可以使用比较它们解析到的对象的指针的技巧，不需要强制转换：

```
if (&*i != &*o)
    *o = *i; 
```

如果`*i`或`*o`不返回引用，没问题 - 即使不需要复制也会发生，但不会造成任何伤害。

# css - 添加 CSS 边框更改 HTML5 网页中的定位

> ID：11661264
> 
> 赞同：7
> 
> 时间：2012-07-26T01:54:31.617
> 
> 标签：css, html, position

当我在 HTML 5 文档中添加边框时，页面元素移动时遇到问题。

我希望包含标题元素（灰色）出现在屏幕顶部，但它似乎从内部 div（红色）中占据了边距。但是，如果我在标题中添加边框，它会出现在我期望的位置，并且红色的内部 div 只会稍微移动！

（第一张图片：无边框；第二张图片：有边框）

![无边界](../Images/f71dc6c19f11a684268ee6cfecab7c08.png)![带边框](../Images/914802f65db2466f74bc3beb83f6d7a6.png)

我尝试设置相对或绝对定位，使用 div 而不是 header 元素，将边距和填充设置为 0，使用 HTML4 doctype 等。HTML 验证。这是剥离了所有内容的 HTML，但仍然无法正常工作。它发生在最新的 Chrome 和 FF 中。

帮助！！我错过了什么？？或任何解决方法（除了保持边界）？

**HTML：**

```
<!DOCTYPE HTML>
<html>
<head>
<title>Test</title>
</head>
<body>
    <header><div id="mydiv"></div></header>
    <div id="content"><p>hello</p></div>
</body>
</html> 
```

**CSS：**

```
header {background-color:#CCCCCC; width:960px; height:430px;}
#mydiv {width:960px; height:320px; margin:80px 0px 0px 0px; background-color:#CC0000; } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T01:58:57.480

这个问题来自一种叫做“margin collapsing”的东西。这很简单：2 个相邻的边距折叠到两者中的最高值（我说的是两个，但可能更多）。

在你的情况下，'#mydivs' `margin-top`- 80px - 正在触摸'header' `margin-top`- 0px。它们是相邻的——它们之间没有元素，也没有填充，也没有边框。

因此，边距折叠到两者中的最高者（80px），然后将其应用于父子层次结构中的最高元素 -`header`在这种情况下就是这样。

解决这个问题的一种方法是在页边空白之间放置一些东西。一些填充或标题上的边框都可以正常工作。

```
header {
  border-top: 0.1em solid rgba(0,0,0,0);
} 
```

第二种解决方案（我的首选）是让父元素创建一个新的块格式化上下文。这样一来，它的利润就不会随着它的孩子的利润而崩溃。

*如何创建块格式化上下文？* 有四种可能的方式。

1.  通过浮动它。
2.  “立场免除它”。
3.  添加以下显示之一：“table-cell”、“table-caption”或“inline-block”。
4.  添加可见以外的溢出。

为了防止边距崩溃，您可以执行以下 4 项中的任何一项。我通常选择 4 号） - 将溢出设置为自动，因为它只是副作用......好吧，它不太可能成为一个问题。

```
header {
  overflow: auto;
} 
```

这基本上就是父子边距折叠。兄弟姐妹之间也存在边距折叠，规则几乎相同：2 个相邻边距折叠到两者中的最高边距。解决方案不是。

*这是对边距折叠的一个很好的解释*- [http://www.howtocreate.co.uk/tutorials/css/margincollapsing](http://www.howtocreate.co.uk/tutorials/css/margincollapsing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T01:58:45.137

这称为[折叠边距](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)。它们可以通过添加`padding`到父元素（在本例中为`<header>`）来克服。

## 代码（[带填充](http://jsfiddle.net/CMCHz/)，[不带填充](http://jsfiddle.net/CMCHz/1/)）：

*注意`padding:0.001em;`. 这使得边距不再折叠，但不会向`<header>`.*

```
header {padding:0.001em; background-color:#CCCCCC; width:960px; height:430px;}
#mydiv {width:960px; height:320px; margin:80px 0px 0px 0px; background-color:#CC0000; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T02:20:14.043

[bfrohs 答案中折叠边距](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)的链接帮助我找到了适合我的解决方案，它可能会帮助遇到此问题的其他任何人。

**绝对定位的 div 不会折叠**，因此使 header 元素相对和内部 div 绝对可以提供正确的定位，而无需添加带有填充或边距的空间。

工作示例：http: [//jsfiddle.net/8QPGJ/](http://jsfiddle.net/8QPGJ/)

（不含定位：http: [//jsfiddle.net/8QPGJ/1/](http://jsfiddle.net/8QPGJ/1/)）

# c++ - 引用的内存分配

> ID：11661266
> 
> 赞同：6
> 
> 时间：2012-07-26T01:55:03.230
> 
> 标签：c++

`pointers`阅读&之间的很多差异`references`。

以下是我所学内容的简要说明。

**1** . 定义指针时分配内存。然而，引用是名称别名，因此没有为它分配内存（`Is it correct?`）。

**2** . 引用必须在定义时被初始化，因为引用是用一个常量指针实现的，因此不能指向另一个对象。然而，指针不需要在定义时初始化，因此也可以更改为指向其他对象。

**3** . 引用会自动取消引用。当你写`cout << p`; 它被编译器自动取消引用并被视为`cout << *p`; 由编译器。

这里，p 是参考。

1.  对引用的引用是不可能的。每当您声明对引用的引用时，它实际上是对同一变量的引用。例如

    ```
    int i;    
    int &r1=i;    
    int &r2=r1; <-------------------2 
    ```

编译器将语句 2 解释为：
int &r2=(*r1)
和 (*r1) 只不过是变量 i 本身。

然而，指向指针的指针是可能的。

**5** . 指针数组是可能的，而引用数组是不可能的（为什么？）。

**6** . 指针的地址是可能的。参考地址是不可能的。它给出了变量的地址。

**7** . 在某些情况下，您必须使用引用。您不能在那里使用指针。考虑下面的例子：

一个=b+c；

其中 a,b,c 是类 A 的对象。运算符 '+' 重载如下：

```
const A& operator+(const A& o)
{
     return A(i+o.i);
} 
```

在此处查看示例代码：http: [//ideone.com/Q0pE1](http://ideone.com/Q0pE1)

这里参数列表中的引用用于保存内存占用。
您不能在参数列表中使用指针，因为您必须在运算符函数中传递对象的地址。
A a=&b + &c;
但是，如果在参数列表中使用了指针，那么我们最终将添加地址而不是对象本身。

**我想知道我还有什么遗漏的吗？**

**什么时候应该去指针和什么时候去参考？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T02:15:35.843

> 定义指针时分配内存。但是，引用是名称别名，因此没有为其分配内存

“分配内存”是什么意思？如果您的意思是堆分配，例如`new`or`malloc`或其他，则*no*：

```
int val = 5;
int *pVal = &val; //No dynamic memory allocation. 
```

指针具有*大小*，就像`int`具有大小一样。但这与“分配”不同。

> 引用必须在定义时被初始化，因为引用是用一个常量指针实现的，因此不能指向另一个对象。

不，引用是在初始化时绑定的，因为引用就是*这样工作的*。它们是对对象的引用。语言规定它们不可能不受约束，并且它们的约束以后也不可能改变。因此，有必要在初始化时绑定引用。

编译器如何实现引用完全无关紧要。

> 引用会自动取消引用。

不，*没有什么*可以取消引用的。引用只是已存在对象的另一个名称。就这样。

> 指针数组是可能的，而引用数组是不可能的（为什么？）。

因为在初始化时必须绑定引用。而且不可能给数组的每个成员一个单独的对象来绑定。因此，您需要在创建数组和绑定引用之间采取一些步骤。这是不允许的。

> 指针的地址是可能的。参考地址是不可能的。它给出了变量的地址。

引用是已存在对象的另一个名称。你不能得到一个*名字*的地址；你只能得到一个对象的地址。

> 在某些情况下，您必须使用引用。

没有什么可以阻止您重载`operator+`指向类型的指针：

```
A operator+(const A *lhs, const A *rhs) {...} 
```

当然，这是一个非成员函数。

哦，作为奖励：

```
const A& operator+(const A& o)
{
     return A(i+o.i);
} 
```

这已破了。您将 a 返回`const&`到您创建的临时对象。您应该按价值返回它。

# android - App底部固定大小的WebView

> ID：11661268
> 
> 赞同：0
> 
> 时间：2012-07-26T01:55:17.363
> 
> 标签：android, android-layout

我的应用程序被锁定在肖像模式。它基本上是项目的 ListView（长度未知但可滚动），我希望应用程序的底部是固定大小的 Webview。

就像：应用程序的顶部 = ListView 应用程序的底部 = Webview

我需要 webview 是固定大小的，比如 200dp，而 ListView 应该得到其余的空间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:29:04.753

我认为您也可以将 listview 和 webview 按线性布局的顺序放置，并在 listview 中设置 android:layout_weight="1"

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:oritation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<ListView
    android:layout_weight="1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"/>

<WebView
    android:layout_width="match_parent"
    android:layout_height="200dp"/> 
```

`</Linearlayout>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:01:20.077

像这样？：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:a="http://schemas.android.com/apk/res/android"
    a:layout_width="fill_parent"
    a:layout_height="fill_parent" >

    <WebView
        a:id="@+id/webView1"
        a:layout_width="match_parent"
        a:layout_height="200dp"
        a:layout_alignParentBottom="true"
        a:layout_alignParentLeft="true" />

    <ListView
        a:id="@+id/listView1"
        a:layout_width="match_parent"
        a:layout_height="wrap_content"
        a:layout_above="@id/webView1"
        a:layout_alignParentTop="true"
        a:layout_centerHorizontal="true" >
    </ListView>

</RelativeLayout> 
```

# java - 获取图片时遇到问题（新手）

> ID：11661271
> 
> 赞同：0
> 
> 时间：2012-07-26T01:55:39.453
> 
> 标签：java, image, jframe

我无法获取要显示在我的 J Frame 中的图像。我确定我将文件放在正确的位置并正确输入了名称。这是代码

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Toolkit;
import java.io.File;
import java.net.URL;

import javax.swing.JFrame;

public class DrawImage extends JFrame {
    private Image image;
    public static void main(String[] args){
        new DrawImage();
    }
    public DrawImage(){
        super("DrawImage");
        setSize(600,600);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        File appBase = new File("."); //current directory
        String path = appBase.getAbsolutePath();
        System.out.println(path);
        Toolkit tk = Toolkit.getDefaultToolkit();
        image= tk.getImage(getURL("Castle.jpg"));
    }
    private URL getURL(String filename){
        URL url=null;
        try{
            url=this.getClass().getResource(filename);
            //url=DrawImage.class.getResource(filename);
            //url=C:\hw/myProg/Graphics2d/Castle.jpg;
        }
        catch(Exception e){
            System.out.print("spleen:");
        }
        return url;
    }
        public void paint(Graphics g){
            Graphics2D g2d = (Graphics2D) g;
            g2d.setColor(Color.BLACK);
            g2d.fillRect(0, 0, getSize().width, getSize().height);
            g2d.drawImage(image, 0, 40, this);
        }

} 
```

我得到的是带有黑色但没有图像的JFrame，这写给了cousle。

```
C:\hw\myProg\Graphics2d\.
Uncaught error fetching image:
java.lang.NullPointerException
    at sun.awt.image.URLImageSource.getConnection(Unknown Source)
    at sun.awt.image.URLImageSource.getDecoder(Unknown Source)
    at sun.awt.image.InputStreamImageSource.doFetch(Unknown Source)
    at sun.awt.image.ImageFetcher.fetchloop(Unknown Source)
    at sun.awt.image.ImageFetcher.run(Unknown Source) 
```

自然我的图像文件在 C:\hw\myProg\Graphics2d\Castle.jpg 那么我做错了什么？编辑：好的，我发现您可以从这段方便的代码中测试您的 ide 符合哪个文件夹。在 Eclipse 中，它位于 bin 文件夹中。

```
URL test = DrawImage.class.getResource("/");
        System.out.println(test); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:15:15.560

根据错误，Castle.jpg 不在类加载器类路径上下文中。如果图像在应用程序中没有 Jar'ed，您可以使用`File`对象来生成`URL`，但我认为这不是您想要做的。

你可以：

*   确保从程序文件“C:\hw\myProg\Graphics2d”执行。
*   Jar 应用程序（连同它的资源）

# jquery - 如何使用 jQuery 和/或 CSS3 更改显示的无序列表项的数量？

> ID：11661272
> 
> 赞同：0
> 
> 时间：2012-07-26T01:55:54.137
> 
> 标签：jquery, css, jquery-animate, css-animations

嘿，堆栈溢出的好人。

我有一堆未嵌套的无序列表项。它们看起来像这样：

![我的清单项目](../Images/385907f1849f6cedda828bacde7e37d0.png)

我希望用户能够增加或减少（最好使用漂亮的动画）显示在页面上的这些列表项的数量，例如，通过 + 和 - 按钮。我怎样才能最好地使用 jQuery 和/或 CSS3 做到这一点？

[根据要求，这是我的 Mako 模板和链接的 CSS 文件](http://jsfiddle.net/7YrMv/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:20:41.417

你可以试试这样的。这是相当基本的，但它确实有效。

[http://jsfiddle.net/CnKXK/](http://jsfiddle.net/CnKXK/)

# iphone - 使用 AVCaptureVideoDataOutPut 捕获帧

> ID：11661281
> 
> 赞同：0
> 
> 时间：2012-07-26T01:57:42.007
> 
> 标签：iphone, video-capture, avcapturesession

你好朋友。

我是韩国学生。

我正在使用 Xcode 4.3 制作增强现实 iPhone 应用程序

所以我需要从相机捕捉帧。

然后我搜索“如何从相机捕捉”

我终于发现使用 AVCaptureVideoDataOutPut 只能从相机捕获帧..

但我不知道如何使用 AVCaptureVideoDataOutPut 从相机捕获帧。

我也没有找到使用 AVCaptureVideoDataOutPut 的确切源代码。

所以我不能再制作论证现实应用程序了。

所以我真的很想查看或获取源代码，即代码

使用 AVCaptureVideoDataOutPut 在 IOS 5.x 而不是 IOS 4.x 中从摄像头捕获帧

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T02:05:02.337

首先，请参阅[AV Foundation 编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html)。特别阅读“媒体捕获”部分。

然后，您将需要查看[AVCam](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html)示例代码。它涵盖了您正在寻找的大部分内容。

# boost - 找不到 XCode 4.4 OS10.8 下

> ID：11661283
> 
> 赞同：1
> 
> 时间：2012-07-26T01:58:35.497
> 
> 标签：boost, opencv, homebrew, osx-mountain-lion, xcode4.4

我刚刚将我的 Mac OS 更新到 Mountain Lion，并将 XCode 更新到 4.4 版。

但是更新后我不能再构建我的任何代码。XCode 一直在抱怨

```
Lexical or Preprocessor Issue
opencv2/opencv.hpp file not found 
```

对于每一个 #include 它在前一天工作得非常好。它还为 #include 抱怨同样的问题。

仅供参考：我通过 Homebrew 安装了我的 boost 和 opencv 库。

有没有其他人有同样的问题，或者有没有人知道如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:14:42.153

system python may require updating/reinstall homebrew and reinstalling all your packages. I chose to do so, and it corrected all the errors I was running into

# android - android - 文本输入类型人名不起作用

> ID：11661288
> 
> 赞同：3
> 
> 时间：2012-07-26T01:59:04.793
> 
> 标签：android, text

在我的 android 项目中，我想要一个 personname 类型的文本字段，默认情况下会激活大写锁定，但是，此代码不起作用。

```
<EditText
    android:id="@+id/txt_user_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textPersonName" >

    <requestFocus />
</EditText> 
```

为什么这不起作用？

编辑：这是显示文件内容的 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/t_registration"
        android:textSize="25dp"
        android:textStyle="bold"
        android:paddingTop="7dp" 
        android:paddingBottom="7dp"/>

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:stretchColumns="1" >
        <TableRow
            android:id="@+id/tableRow0"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/lbl_user_name"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.0"
                android:text="User Name * :   " />

            <EditText
                android:id="@+id/txt_user_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:inputType="textPersonName" >

                <requestFocus />
            </EditText>

        </TableRow>
        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/lbl_first_name"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.0"
                android:text="First Name * :   " />

            <EditText
                android:id="@+id/txt_first_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@android:drawable/editbox_background"
                android:inputType="textPersonName" >
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/lbl_last_name"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.0"
                android:text="Last Name * :   " />

            <EditText
                android:id="@+id/txt_last_name"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@android:drawable/editbox_background"
                android:inputType="textPersonName" >
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/lbl_email_address"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.0"
                android:text="Email Address:   " />

            <EditText
                android:id="@+id/txt_email_address"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@android:drawable/editbox_background"
                android:inputType="textEmailAddress" >

            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/lbl_school_id"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.0"
                android:text="school_id * :   " />

            <EditText
                android:id="@+id/txt_school_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@android:drawable/editbox_background"
                android:inputType="text" >
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/lbl_password"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.0"
                android:text="Password * :   " />

            <EditText
                android:id="@+id/txt_password"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@android:drawable/editbox_background"
                android:inputType="textPassword" >

            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/lbl_confirm_password"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.0"
                android:text="Confirm password * :   " />

            <EditText
                android:id="@+id/txt_password2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@android:drawable/editbox_background"
                android:inputType="textPassword" >"
            </EditText>
        </TableRow>

        <TableRow
            android:id="@+id/tableRow7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/lbl_image_select"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_weight="0.0"
                android:text="Image Select * :   " />

            <Button
                android:id="@+id/b_image_browse"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_margin="1dp"
                android:padding="10dp"
                android:text="@string/b_image_browse"
                android:textSize="15dp"
                android:onClick="b_image_browse_action" />

        </TableRow>           

    </TableLayout>

    <EditText
        android:id="@+id/txt_image_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10" 
        android:hint="Image File Path"
        android:inputType="text" >
    </EditText>

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
         >

       <Button
           android:id="@+id/b_reg_Cancel"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentLeft="true"
           android:layout_alignParentTop="true"
           android:layout_margin="10dp"
           android:layout_marginLeft="30dp"
           android:padding="10dp"
           android:text="@string/b_reg_Cancel"
           android:textSize="15dp"
           android:onClick="b_reg_Cancel_action" />

        <Button
            android:id="@+id/b_reg_Submit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_margin="10dp"
            android:layout_marginRight="100dp"
            android:padding="10dp"
            android:text="@string/b_reg_Submit"
            android:textSize="15dp" 
            android:onClick="b_reg_Submit_action"/>

    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-14T08:30:24.003

采用

```
android:inputType="textPersonName|textCapWords" 
```

因为仅使用`"textPersonName"`是不够的，所以名称的第一个字母将大写。

与邮政地址类似：

```
android:inputType="textPostalAddress|textCapSentences" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:17:15.173

如果您尝试正常显示人名，请尝试以下操作`android:capitalize="words"`：如果您想全部大写，您可以更改`words`为`characters`或像 LuxuryMode 先生所说的那样做！

编辑：

您应该删除`android:inputType="textPersonName"`字段。它会起作用的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-22T14:01:46.660

我用这个作为大写字母，没有任何建议

```
android:inputType="textCapWords|textNoSuggestions" 
```

例如`Tom Hanks`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T02:07:45.200

如果你想要全部大写，只需使用`android:textAllCaps="true"`

# jquery - JQuery Animate 边距顶部

> ID：11661289
> 
> 赞同：0
> 
> 时间：2012-07-26T01:59:26.557
> 
> 标签：jquery, jquery-animate

我是第一次尝试 JQuery。

我决定创建一个动画菜单，但我在使用 marginTop（和 paddingTop）时遇到了问题。我试图在页面加载时为我的菜单项实现“波浪”类型的效果。当用户将鼠标悬停在项目上时，我希望它们稍微抬起。

我可以使用 marginLeft 和 paddingLeft 让菜单设置动画，但这不是我想要的效果，我真的很想知道我做错了什么。

这是我的[jsFiddle 代码](http://jsfiddle.net/Frinavale/RRrq8/4/)的链接，您可以在其中查看和使用我的代码。您会注意到“wave”函数不起作用，但“waveLeft”函数起作用。

这是菜单的标记：

```
<div id="menucontainer">
  <ul id="menu">
    <li class="menu-element">
      <a href="/">Home</a> 
      <span style="color: White; font-size: 2em;">|</span>
    </li>
    <li class="menu-element">
      <a href="/Home/About">About</a> 
      <span style="color: White; font-size: 2em;">| </span>
    </li>
    <li class="menu-element">
      <a href="/Artists">Artists</a> 
      <span style="color: White; font-size: 2em;">|</span>
    </li>
    <li class="menu-element">
      <a href="/Releases">Releases</a> 
    </li>
  </ul>
</div> 
```

这是我的菜单CSS代码（它在黑色背景上）

```
ul#menu
{
    padding: 0;
    margin: 0;
    font-family: "Lucida Console" , Monaco, monospace;
}

ul#menu li.menu-element
{
    display: inline;
    list-style: none;
}

ul#menu li#greeting
{
    padding: 10px 20px;
    text-decoration: none;
    line-height: 2.8em;
    color: #5C87B2;
    font-family: "Lucida Console" , Monaco, monospace;
}

ul#menu li.menu-element a
{
    padding: 10px 20px;
    font-family: "Lucida Console" , Monaco, monospace;
    text-decoration: none;
    line-height: 2.8em;
    color: #5C87B2;
    font-size: 2em;
}

ul#menu li.menu-element a:hover
{
    color: #fff;
    text-decoration: none;
}

ul#menu li.menu-element a:active
{
    color: #b5d6f9;
    text-decoration: none;
}

ul#menu li.selected a
{
    background-color: #fff;
    color: #000;
} 
```

这是我的工作 JavaScript：

```
$(document).ready(function () {
    menuWave("#menu", 25, 15, 150, .8);
});

function menuWave(menu_id, pad_down, pad_up, time, multiplier) {
     var list_elements = menu_id + " li.menu-element";
    var link_elements = list_elements + " a";

    var timer = 0;

    $(list_elements).each(function (i) {
        timer = (timer * multiplier + time);
        $(this).animate({ marginLeft: "0px" }, timer);
        $(this).animate({ marginLeft: "-15px" }, timer);
        $(this).animate({ marginLeft: "0px" }, timer);
    });

    $(link_elements).each(function (i) {
        $(this).hover(
    function () {
        $(this).animate({ paddingLeft: pad_down }, 150);
    },
    function () {
        $(this).animate({ paddingLeft: pad_up }, 150);
    });
    });

} 
```

这是我的不工作代码：

```
$(document).ready(function () {
    menuWave("#menu", 25, 15, 150, .8);
});

function menuWave(menu_id, pad_down, pad_up, time, multiplier) {
     var list_elements = menu_id + " li.menu-element";
    var link_elements = list_elements + " a";

    var timer = 0;

    $(list_elements).each(function (i) {
        timer = (timer * multiplier + time);
        $(this).animate({ marginTop: "0px" }, timer);
        $(this).animate({ marginTop: "-15px" }, timer);
        $(this).animate({ marginTop: "0px" }, timer);
    });

    $(link_elements).each(function (i) {
        $(this).hover(
            function () {
                $(this).animate({ paddingTop: pad_down }, 150);
            },
            function () {
                $(this).animate({ paddingTop: pad_up }, 150);
            });
    });

} 
```

marginLeft 和 paddingLeft 动画效果很好。

但是，如果我将 marginLeft 切换到 marginTop 并将 paddingLeft 切换到 paddingTop 它不起作用。

谢谢你的帮助

-弗林尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:38:46.537

在js中尝试这段代码：

```
$(link_elements).each(function (i) {
    $(this).hover(
        function () {
            $(this).animate({ 'padding-top': pad_down+'px' }, 150);
        },
        function () {
            $(this).animate({ 'padding-top': pad_up+'px' }, 150);
        }
    );
}); 
```

和css中的这段代码：

```
ul#menu li.menu-element a
{
    ...
display: block;
float: left;
} 
```

尝试修复样式的其余部分以查看良好的结果...

# git - 在 Git 分支工作，然后决定需要一个新分支，一些文件已经提交

> ID：11661296
> 
> 赞同：1
> 
> 时间：2012-07-26T02:00:52.983
> 
> 标签：git, git-branch

我知道如果我在一个分支中工作，我可以创建一个新分支，我所有的提交都将转到新分支。但是如果我一直在努力，我已经做了一些提交，仍然在工作，然后意识到需要一个新的分支，包括我已经做出的提交（但没有推送到原点）。有没有办法让我把所有东西都放到一个新的分支中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:11:58.613

当然，请执行以下操作：

```
git checkout -b new_branch 
```

这会从当前 HEAD 创建一个新分支。然后：

```
git stash 
```

这会暂时存储当前的更改。然后：

```
git checkout former_branch 
```

回到前一个分支，然后：

```
git reset --hard HEAD^ 
```

这会在结束时回退一个提交`former_branch`（使用任何你喜欢的东西来指向你想要返回的提交，也许`origin/master`是什么）。最后：

```
git checkout new_branch
git stash pop 
```

并继续工作。

# javascript - 返回深度嵌套数组中对象索引的函数

> ID：11661297
> 
> 赞同：3
> 
> 时间：2012-07-26T02:01:19.740
> 
> 标签：javascript, arrays, indexing

我可能需要编写一个仅输出数组内对象索引的函数，显然，在下面的示例中使用 $.inArray 会很好地返回它。

```
array = ['one', 'two', 'three'];

$.inArray('one', array) // 0 
```

使用更精细的数组，如何找到嵌套在其中的对象的索引？

```
array = [
    {
        name: 'One', // index??
        data: {
            title: 'Title One',
            content: 'Content One'
        }
    },
    {
        name: 'Two',
        data: {
            title: 'Title Two',
            content: 'Content Two'
        }
    },
    {
        name: 'Three',
        data: {
            title: 'Title Three',
            content: 'Content Three'
        }
    }
]; 
```

我听说过 $.grep() 方法 indexOf() .. 不确定使用哪一个来返回对象所在索引的整数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T02:04:40.800

您不需要预先编写的函数，只需遍历您的数组并比较`name`属性：

```
function findValue(array, nameWeAreLookingFor) {
    for(var i = 0; i<array.length; i++) {
        if(array[i].name === nameWeAreLookingFor) return i;
    }
    return -1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T02:35:17.973

没有内置函数..但很容易编写自己的所有风格。作为练习，您还可以使用它们来扩展 jQuery，

```
var array = [{
    name: 'One',
    // index??
    data: {
        title: 'Title One',
        content: 'Content One'
    }},
{
    name: 'Two',
    data: {
        title: 'Title Two',
        content: 'Content Two'
    }},
{
    name: 'Three',
    data: {
        title: 'Title Three',
        content: 'Content Three'
    }}];

function findByName(name) {
    var index;
    $(array).each(function(i, e) {
        if (e.name && e.name == name) {
            index = i;
            return false;
        }
    });
    return index;
}
console.log(findByName("One")); // prints 0

// and now even better ... find by any property

function findByProperty(objects, prop, value) {
    var index;
    $(objects).each(function(i, e) {
        if (e[prop] && e[prop] == value) {
            index = i;
            return false;
        }
    });
    return index;
}

// usage
var index = findByProperty(array, "name", "One");
console.log(index); // prints 0
index = findByProperty(array, "name", "Three");
console.log(index); // prints 2
// and even more powerful

function findByFilter(objects, filter) {
    var index;
    $(objects).each(function(i, e) {
        if (filter(i, e)) {
            index = i;
            return false;
        }
    });
    return index;
}

index = findByFilter(array,function(i,e){ return e.data.title=="Title Two"; });
console.log(index); // prints 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T02:06:20.540

您可以将该`name`属性用作索引。

试试这个代码：

```
var indexOfObj = function(array,objName){
    var len = array.length;
    while(--len>=0 && array[len].name!==objName);
    return len;
} 
```

`-1`如果在数组中找不到 obj，则此函数将返回。

# ruby-on-rails - 未定义的局部变量或方法 - Rails 路由

> ID：11661302
> 
> 赞同：0
> 
> 时间：2012-07-26T02:01:49.350
> 
> 标签：ruby-on-rails, routing

我的应用程序中有一个看起来正确的资源，但是当我打开索引时，我得到一个错误：`undefined local variable or method 'new_beta_request_path'`. 这`beta_request_approval path`也发生了。

我的链接看起来像`<%= link_to 'New Beta Request', new_beta_request_path, :class => "btn" %>`和`<%= link_to "Approve", beta_request_approval_path %>`。

所有的路径对我来说似乎都是正确的，但显然缺少一些东西......

在我的`routes.rb`，我有：

```
resources :beta_requests, :only => [:index, :edit, :create, :update, :destroy]

match '/request_invite', to: 'beta_requests#new', :as => "request_invite"
match 'beta_requests/:id/approve', to: 'beta_requests#approve', :as => "beta_request_approval", :via => :put 
```

当我运行 Rake Routes 时，我得到以下信息：

```
beta_requests         GET    /beta_requests(.:format)              beta_requests#index
                      POST   /beta_requests(.:format)              beta_requests#create
edit_beta_request     GET    /beta_requests/:id/edit(.:format)     beta_requests#edit
beta_request          PUT    /beta_requests/:id(.:format)          beta_requests#update
                      DELETE /beta_requests/:id(.:format)          beta_requests#destroy
request_invite               /request_invite(.:format)             beta_requests#new
beta_request_approval POST   /beta_requests/:id/approve(.:format)  beta_requests#approve 
```

谁能看到我显然看不到的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:08:07.150

数组`:new`中没有？`only`您可以添加它：

```
resources :beta_requests, :only => [:index, :edit, :new, :create, :update, :destroy] 
```

或完全删除散列参数，因为这样无论如何都定义了所有资源操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:18:04.977

您想在链接中使用`request_invite_path`而不是。`new_beta_request_path`那是：

`<%= link_to 'New Beta Request', request_invite_path, :class => "btn" %>`

这对您可用，因为您在 request_invite 路由定义上设置了 :as 选项。

至于另一个错误，我注意到您的 rake 路由列表`beta_request_approval`使用 POST 动词，并且您`routes.rb`使用`:via => :put`选项定义了该路由。

# jmeter - Jmeter值到字符串中的变量

> ID：11661305
> 
> 赞同：0
> 
> 时间：2012-07-26T02:02:51.363
> 
> 标签：jmeter

将文件读入 Jmeter 后，如何替换文件（a.xml）中定义的变量？例如。a.xml 有内容。

`<Shipment Action="MODIFY" OrderNo="${vOrderNo}" >`

使用 str_Input=${__FileToString(/a.xml)} 将整个文件读入字符串

在 Jmx 文件中，发出 http 请求以从 web 服务获取输出，如使用 Xpath Extractor 将 OrderNo 的值读入变量 vOrderNo。

现在，想在 str_Input.. 中使用变量 vOrderNo 的值吗？我如何能 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:29:18.083

您可以使用任何 jmeter 的采样器中的 beanshell (~java) 代码轻松实现这一点，它允许执行 beanshell 代码 - [BeanShell Sampler](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler)例如。

以下作品：

```
 import java.io.*;

try
{
    // reading file into buffer
    StringBuilder data = new StringBuilder();
    BufferedReader in = new BufferedReader(new FileReader("d:\\test.xml"));

    char[] buf = new char[1024];
    int numRead = 0;
    while ((numRead = in.read(buf)) != -1) {
    data.append(buf, 0, numRead);
    }
    in.close();

    // replacing stub with actual value
    String vOrderNo = vars.get("vOrderNo");
    String temp = data.toString().replaceAll("\\$\\{vOrderNo\\}", vOrderNo);

    // writing back into file
    Writer out = new BufferedWriter(new FileWriter("d:\\test.xml"));
    out.write(temp);
    out.close();
}
catch (Exception ex) {
    IsSuccess = false;
    log.error(ex.getMessage());
    System.err.println(ex.getMessage());
}
catch (Throwable thex) {
    System.err.println(thex.getMessage());
} 
```

此代码不需要通过 ${__FileToString(...)} 将文件读入字符串。
同样，您可以结合使用这两种方法。

# java - 如何使用低分辨率绘制大矢量？

> ID：11661307
> 
> 赞同：0
> 
> 时间：2012-07-26T02:03:04.763
> 
> 标签：java, vector, drawing, plot, resolution

我有一个大数组，有 640000 个元素类型为 double。我需要绘制值，但数组的长度很大，而且会消耗处理器资源。

我的屏幕分辨率只有 600x600。

如何缩小我的大数组以仅使用 400 个可能值（边框为 200 个点）绘制它。

我试图使用Java，但我不知道beging ...嗨

我正在绘制 X,t（时间）..

```
 double BigArray = new double[640000];
    //...
    filling the vector
    //...
    calculating resolution available (dots)
    int n = 400;
    //...
    double LitArray = new double[n];
    double TimeArray = new double[n];
    //...
    calculating new values for LitArray and TimeArray.
    //... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:17:03.367

你还没有说明你需要什么样的情节......酒吧？线？分散？

我假设它是一个线图，并且您有 640000 个 y 值用于线性增加的 x 系列。

您通常会做的是将阵列划分为 400 个存储桶。所以创建一个包含 400 个元素的数组。每个存储桶将有 1600 个值，因此您只需要决定如何处理它们。

正常情况是平均每个桶中的 1600 个元素，为每个像素位置生成一个值。但是，如果您需要非常快，您可以只取一个有代表性的样本（例如，16 个均匀分布的元素），或者甚至只从每个桶中提取一个值。

您可能实际上想要每个桶的最小值和最大值，并且您会在每个像素位置从一个到另一个绘制一条线。这样，您的缩小图仍将覆盖每个存储桶的范围，并且最终不会传达错误的信息......

# silverlight - 如何在 Silverlight 中异步显示和保存双色调 Tiff 图像？

> ID：11661313
> 
> 赞同：1
> 
> 时间：2012-07-26T02:04:17.243
> 
> 标签：silverlight, tiff

我们公司有一个应用程序，可以通过传真或扫描仪接收双色调 TIFF 图像并将其保存到数据库中；目前，我们使用 ActiveX 控件显示数据库中的图像，但现在我们想使用 Silverlight 控件来显示这些图像。但是，我们无法将图像显示或保存为双色调 TIFF 图像；在我们的 ashx 处理程序中使用以下代码，我们得到一个空白图像：

```
pageno = Convert.ToInt32(context.Request.QueryString("page"))
'Get image data from database   
Dim bmp() As Byte = ShowDocumentImage(documentID)
'Get current page of TIFF image as bitmap    
Dim newBmp As Bitmap = GetTifPage(bmp, pageno)
Dim info As Imaging.ImageCodecInfo = Nothing
Dim ice As Imaging.ImageCodecInfo
For Each ice In Imaging.ImageCodecInfo.GetImageEncoders()
    If ice.MimeType = "image/tiff" Then     
       info = ice
    End If
Next
Dim enc As Imaging.Encoder = Imaging.Encoder.SaveFlag
Dim ep As New Imaging.EncoderParameters(2)
ep.Param(0) = New Imaging.EncoderParameter(enc, CLng(Imaging.EncoderValue.MultiFrame))
ep.Param(1) = New Imaging.EncoderParameter(enc, CLng(Imaging.EncoderValue.CompressionCCITT4)) 
If newBmp IsNot Nothing Then
    newBmp.Save(context.Response.OutputStream, info, ep)   
    newBmp.Dispose()
End If 
```

相反，我们必须将它们保存为 JPEG，它会显示给用户，但也会增加文件的位深度和大小；它还增加了保存图像所需的时间。将 1728x2079 JPEG 转换为字节数组大约需要 6 秒，以便可以将其上传到数据库。

有没有办法将图像显示和保存为双色调 TIFF，和/或将图像转换为字节数组的更快方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:45:49.393

据我所知，Silverlight 对 TIFF 图像的支持非常有限。

有 3-rd 方库可以帮助您完成任务。我个人建议您尝试[LibTiff.Net](http://bitmiracle.com/libtiff/)库。该库是完全免费的（即使用于商业用途）并且是开源的。

LibTiff.Net 的源代码包包含 Silverlight 测试应用程序，它展示了如何在 Silverlight 应用程序中异步加载和显示 TIFF 图像。它可以显示各种 TIFF 风格，包括双色调的。

您可能会发现这个类似问题的[答案也很有用。](https://stackoverflow.com/a/7678928/249690)

# redis - 有没有办法在redis中获取客户端IP？

> ID：11661314
> 
> 赞同：9
> 
> 时间：2012-07-26T02:04:29.520
> 
> 标签：redis

我进行了网络搜索，但对此一无所获。我在集群上运行 redis 并想找出哪台机器正在连接到 redis（尤其是当没有机器应该连接，但 redis 仍然说某些机器已连接时）。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T12:09:56.063

使用 MONITOR，只会显示实际向 Redis 发送流量的客户端。如果只需要获取已连接客户端的列表，可以使用 CLIENT LIST 命令。

```
$ redis-cli client list 
```

它将返回一个表，其中描述了其中的字段：

[Redis“客户列表”的用途和说明](https://stackoverflow.com/questions/9288570/redis-client-list-purpose-and-description/9332729#9332729)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T02:49:26.180

您是否尝试过 MONITOR 命令？

[http://redis.io/commands/monitor](http://redis.io/commands/monitor)

```
 $ redis-cli monitor
 1339518083.107412 [0 127.0.0.1:60866] "keys" "*"
 1339518087.877697 [0 127.0.0.1:60866] "dbsize"
 1339518090.420270 [0 127.0.0.1:60866] "set" "x" "6"
 1339518096.506257 [0 127.0.0.1:60866] "get" "x"
 1339518099.363765 [0 127.0.0.1:60866] "del" "x"
 1339518100.544926 [0 127.0.0.1:60866] "get" "x"
 Use SIGINT (Ctrl-C) to stop a MONITOR stream running via redis-cli.

 # OR 
 $ telnet localhost 6379
 Trying 127.0.0.1...
 Connected to localhost.
 Escape character is '^]'.
 MONITOR
 +OK
 +1339518083.107412 [0 127.0.0.1:60866] "keys" "*"
 +1339518087.877697 [0 127.0.0.1:60866] "dbsize"
 +1339518090.420270 [0 127.0.0.1:60866] "set" "x" "6"
 +1339518096.506257 [0 127.0.0.1:60866] "get" "x"
 +1339518099.363765 [0 127.0.0.1:60866] "del" "x"
 +1339518100.544926 [0 127.0.0.1:60866] "get" "x"
 QUIT
 +OK
 Connection closed by foreign host. 
```

# linq - LINQ Where（谓词）与 FirstOrDefault（谓词）

> ID：11661319
> 
> 赞同：4
> 
> 时间：2012-07-26T02:05:10.057
> 
> 标签：linq, c#-4.0

之间是否存在明显的性能差异：

```
something.Where(predicate).FirstOrDefault(); 
```

和

```
something.FirstOrDefault(predicate); 
```

?

我倾向于同时使用两者，但我想知道在性能方面是否有明显的赢家。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T02:08:22.550

这取决于这`Where`是否反对`IQueryable`或`IEnumerable`。如果`IQueryable`差异基于提供者的实现，但更有可能没有差异并且会产生相同的查询。

在 IEnumerable 的情况下，它应该可以忽略不计。

# javascript - 如何使用javascript同时播放多个音频文件

> ID：11661322
> 
> 赞同：0
> 
> 时间：2012-07-26T02:05:45.180
> 
> 标签：javascript

我正在尝试创建一个 Web 应用程序，让用户可以播放歌曲的多个曲目。不是整个混音的一个文件，而是单独导出每个音轨，我试图找到允许多个音频从单击一个按钮开始播放的代码。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:13:02.627

[jPlayer](http://jplayer.org/)是一个 jQuery HTML5 库，可以为您做到这一点。

# mysql - SQL：计算字段的值

> ID：11661324
> 
> 赞同：0
> 
> 时间：2012-07-26T02:05:51.223
> 
> 标签：mysql, sql, count, field

我想知道是否有可能拥有这种模式：

表格1：

```
Field1 | Field4 | Field3
Field1 | Field4 | Field3 
Field1 | Field4 | Field3 
```

表 2：

```
Field4 | Field5(Number of Field3) 
```

为了解释架构，我的表有一个类似的字段，(number4)

我真正的问题是：

我可以有一个动态数据库，其中 field5 将是字段 3 的计数，其中 Table1.field4 = Table2.field4，还是应该使用 PHP 手动更改它？

编辑：“你能为这个模式提供一些示例数据吗？（也许还有一些更有意义的名字。）”

表：prod 产品 | 说明 | nb查看产品 | 说明 | nb评论

表：评论评论 | 说明 | 产品

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T02:17:16.513

你不需要额外的桌子。
您可以使用视图。

例如：

```
CREATE VIEW v_data AS
SELECT field4, COUNT(field3) F_COUNT
  FROM <YOUR-TABLE>
GROUP BY  field4 
```

# html - 如何用浮动定位？

> ID：11661326
> 
> 赞同：0
> 
> 时间：2012-07-26T02:06:19.393
> 
> 标签：html, css, css-float

如何使此页面上的内容文本[http://morriswebsitedesign.com/about.html](http://morriswebsitedesign.com/about.html)与导航链接对齐？我曾经使用绝对属性或表格，但现在我试图弄清楚如何使用*float*。

我希望它看起来像这样：BBB

其中 A 是导航，B 是内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:16:48.943

首先从#content 中删除float:left，这将使您的#content 位于菜单的右侧。

其次，如果您不希望部分文本位于菜单下，请将其设置为溢出：隐藏。

```
#menu{float:left}
#content{overflow:hidden} 
```

这样你就不需要给你的内容任何宽度。

为了在它们之间留出一些空间，您可以在菜单中设置margin-right 和margin-bottom。

```
#menu{margin-right:20px; margin-bottom:20px} 
```

我看到在你的css中你的'p'有margin-top。这使得您的内容顶部不会与您的菜单对齐。您可以使用 css3 删除第一个元素的边距。

```
#content p:nth-child(1){margin-top:0} 
```

**编辑：** 要将#content 与徽标对齐：

```
#logo2{width:200px; float:left}
#menu{width:200px; float:left; clear:left; margin-bottom:100px}
#content{display:inline} 
```

首先，您需要您的徽标和菜单充当一列，以使两者必须具有相同的宽度，并浮动到左侧。清晰的左侧将使您的菜单在徽标下移动。
然后选择你的#content remove any float:left 并给它一个 display:inline，这样它就不会再充当一个块了。
菜单的底部边距是为了让您的文本不会在您的菜单下移动，但您可以尝试给您的菜单更大的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T02:20:42.193

在 CSS 中使用浮动时，您添加浮动的项目也应该有一个宽度。

[http://jsbin.com/azetuk/](http://jsbin.com/azetuk/)

但是在漂浮时，您需要了解如何清除这些漂浮物。这是一个很好的阅读：

[http://css-tricks.com/the-how-and-why-of-clearing-floats/](http://css-tricks.com/the-how-and-why-of-clearing-floats/)

如果您也想要内容旁边的徽标，请将菜单和徽标包装在 div 中，然后浮动该元素

[http://jsbin.com/itaqok/](http://jsbin.com/itaqok/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T02:11:24.840

您的文本和导航链接太宽，无法容纳它们的包含`div`。如果您希望它们对齐，则必须增加包含的大小`div`，或减小文本和/或导航链接的大小。

例如，当我使用以下样式时，它们在我的计算机上完美排列：

```
#content { width:700px; } 
```

* * *

您必须将微型徽标和导航链接包装在`div`样式`float:left;`中。然后，您可以`float:left`从微型徽标和`ul`.

# ruby - 使用 Ruby 获取 AWS 区域名称

> ID：11661332
> 
> 赞同：3
> 
> 时间：2012-07-26T02:07:23.580
> 
> 标签：ruby, amazon-web-services

我正在为 AWS 开发 Rails 应用程序，并希望为区域名称创建下拉菜单，例如“us-east-1”等。

如果有人已经创建了 gem 来获取它们，我想使用它。有谁知道这样的宝石或有用的 API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:37:39.430

适用于 Ruby 的 AWS 开发工具包 (aws-sdk gem) 支持枚举区域名称：

```
require 'aws-sdk'

ec2 = AWS::EC2.new(:access_key_id => '...', :secret_access_key => '...')
ec2.regions.map(&:name)
=> ["eu-west-1", "sa-east-1", "us-east-1", "ap-northeast-1", "us-west-2", "us-west-1", "ap-southeast-1"] 
```

您还可以对 DescribeRegions 调用使用客户端接口：

```
ec2.client.describe_regions
=> { :region_info=>[
    {:region_name=>"eu-west-1", :region_endpoint=>"ec2.eu-west-1.amazonaws.com"}, 
    {:region_name=>"sa-east-1", :region_endpoint=>"ec2.sa-east-1.amazonaws.com"}, 
    {:region_name=>"us-east-1", :region_endpoint=>"ec2.us-east-1.amazonaws.com"}, 
    {:region_name=>"ap-northeast-1", :region_endpoint=>"ec2.ap-northeast-1.amazonaws.com"}, 
    {:region_name=>"us-west-2", :region_endpoint=>"ec2.us-west-2.amazonaws.com"}, 
    {:region_name=>"us-west-1", :region_endpoint=>"ec2.us-west-1.amazonaws.com"}, 
    {:region_name=>"ap-southeast-1", :region_endpoint=>"ec2.ap-southeast-1.amazonaws.com"}
  ], 
  :request_id=>"04458cac-bdf2-4847-bf1f-c7ea65813777"
} 
```

您可以在此处查看 gem 文档：http: [//docs.amazonwebservices.com/AWSRubySDK/latest/frames.html](http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T04:58:21.197

在我的身上，我可以做到：

```
>> `ec2-describe-regions`.scan(/REGION\s+(\S+)/).flatten
=> ["eu-west-1", "sa-east-1", "us-east-1", "ap-northeast-1", "us-west-2", "us-west-1", "ap-southeast-1"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T05:45:43.127

我找到了宝石！

[http://rubydoc.info/gems/aws/2.5.6/Aws/Ec2:describe_regions](http://rubydoc.info/gems/aws/2.5.6/Aws/Ec2:describe_regions)

# postgresql - postgresql 性能连接与普通选择

> ID：11661342
> 
> 赞同：1
> 
> 时间：2012-07-26T02:09:02.563
> 
> 标签：postgresql

我有一个 Rails 3 应用程序，其中 5 个表嵌套在 2 个级别（table1 有很多 > table2 有很多 > table 3），其中包含很多信息。可以将其想象为网站访问者的跟踪系统，其中保存了大量数据并且需要快速保存，并且当我们检索数据以进行显示时执行大量查询，因为要进行计数以提取数据。

起初我创建我的应用程序时并没有考虑太多 sql，只是为了让它运行，然后我想我会开始优化 db 部分，因为会有数据可以使用。

我现在在所有表中汇总了大约 100 万条记录，我认为是时候开始优化了，因为每个请求的响应时间为 1 秒。

我的 rails 应用程序对每个计数执行查询，而不涉及任何连接。只是 user.websites.hits 之类的默认行为（选择用户，然后执行另一个选择以获取网站，并为每个网站执行一个选择以获取访问者数量）。总的来说，我认为它会进行大约 80 个查询来获取我的页面结果（我知道...），其中包含我需要的所有内容，因此我创建了一个查询，该查询从单个请求中获取所有结果。

问题是，当我在数据库管理员中运行查询时，获取大约需要 2 秒，而页面设法执行 80 个查询、加载模板和资产并在 1.1 秒内呈现。

我不是数据库专家，但我的查询不好，或者有时最好不要像我一样跨多个表使用联接。如果我的数据继续以这种方式增长，我的联接查询会变得更快还是两个测试的加载速度都会变慢？

我对该查询的所有连接点和 WHERE 字段都有索引，所以我认为这不是问题所在。

我已经考虑过缓存，但我觉得对于 100 万条小数据记录开始这样做还为时过早。

有什么建议吗？

```
domain -> has_many: channels(we use it for split testing)
channel -> has_many: visits, visitors (unique visits by ip), sales
product -> has_many: visits, visitors (unique visits by ip), sales

The query tries to get the domains which includes:
domain_name,
channels_count,
visits_count,
visitors_count,
sales_count and
products_count via the visits table

ACTUAL QUERY:
SELECT
    domains.id,
    domains.domain,
    COUNT(distinct kc.id) AS visits_count,
    COUNT(distinct kv.id) AS visits_count,
    COUNT(distinct kv.ip_address) AS visitors_count,
    COUNT(distinct kp.id) AS products_count,
    COUNT(distinct ks.id) AS sales_count
FROM
    domains
LEFT JOIN
    channels AS kc ON domains.id=kc.domain_id
LEFT JOIN
    visits AS kv ON kc.id=kv.channel_id
LEFT JOIN
    products AS kp ON kv.product_id=kp.id
LEFT JOIN
    sales AS ks ON kc.id=ks.channel_id
WHERE
    (domains.user_id=2)
GROUP BY
    domains.id
LIMIT 20
OFFSET 0

"QUERY PLAN"
"Limit  (cost=7449.20..18656.41 rows=20 width=50) (actual time=947.837..5093.929 rows=20 loops=1)"
"  ->  GroupAggregate  (cost=7449.20..20897.86 rows=24 width=50) (actual time=947.832..5093.845 rows=20 loops=1)"
"        ->  Merge Left Join  (cost=7449.20..17367.45 rows=282413 width=50) (actual time=947.463..4661.418 rows=99940 loops=1)"
"              Merge Cond: (domains.id = kc.domain_id)"
"              Filter: (kc.deleted_at IS NULL)"
"              ->  Index Scan using domains_pkey on domains  (cost=0.00..12.67 rows=24 width=30) (actual time=0.022..0.146 rows=21 loops=1)"
"                    Filter: ((deleted_at IS NULL) AND (user_id = 2))"
"              ->  Materialize  (cost=7449.20..16619.27 rows=58836 width=32) (actual time=947.430..4277.029 rows=99923 loops=1)"
"                    ->  Nested Loop Left Join  (cost=7449.20..16472.18 rows=58836 width=32) (actual time=947.424..3872.057 rows=99923 loops=1)"
"                          Join Filter: (kc.id = kv.channel_id)"
"                          ->  Index Scan using index_channels_on_domain_id on channels kc  (cost=0.00..12.33 rows=5 width=16) (actual time=0.008..0.090 rows=5 loops=1)"
"                          ->  Materialize  (cost=7449.20..10814.25 rows=58836 width=24) (actual time=189.470..536.745 rows=99923 loops=5)"
"                                ->  Hash Right Join  (cost=7449.20..10175.07 rows=58836 width=24) (actual time=947.296..1446.256 rows=99923 loops=1)"
"                                      Hash Cond: (ks.product_id = kp.id)"
"                                      ->  Seq Scan on sales ks  (cost=0.00..1082.22 rows=59022 width=8) (actual time=0.027..119.767 rows=59022 loops=1)"
"                                      ->  Hash  (cost=6368.75..6368.75 rows=58836 width=20) (actual time=947.213..947.213 rows=58836 loops=1)"
"                                            Buckets: 2048  Batches: 4  Memory Usage: 808kB"
"                                            ->  Hash Left Join  (cost=3151.22..6368.75 rows=58836 width=20) (actual time=376.685..817.777 rows=58836 loops=1)"
"                                                  Hash Cond: (kv.product_id = kp.id)"
"                                                  ->  Seq Scan on visits kv  (cost=0.00..1079.36 rows=58836 width=20) (actual time=0.011..135.584 rows=58836 loops=1)"
"                                                  ->  Hash  (cost=1704.43..1704.43 rows=88143 width=4) (actual time=376.537..376.537 rows=88143 loops=1)"
"                                                        Buckets: 4096  Batches: 4  Memory Usage: 785kB"
"                                                        ->  Seq Scan on products kp  (cost=0.00..1704.43 rows=88143 width=4) (actual time=0.006..187.174 rows=88143 loops=1)"
"Total runtime: 5096.723 ms" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:44:37.760

100 万条记录并不是很多，连接 5 个表对于数据库来说是一项简单的任务。有索引很好，但它们有用吗？[EXPLAIN ANALYZE](http://www.postgresql.org/docs/current/interactive/sql-explain.html)告诉您有关您的查询的什么信息？那么配置呢？默认配置足以开始使用，它不是为所有类型的工作负载提供最佳性能的设置。

但是不要担心几个连接，关系数据库已经习惯了。

# php - 从多个类别中获取主题并在 mysql/php 中显示具有响应的前十个主题

> ID：11661352
> 
> 赞同：0
> 
> 时间：2012-07-26T02:11:14.130
> 
> 标签：php, mysql, database, subquery

嗨朋友我在 php 中列出可能与多个类别相关联的主题

我的数据库架构是

```
topics

topic_id
user_id
topic_name

category 

category_id
category_name

topic_category (for association)

tc_id
topic_id
category_id 
```

topic_response // 用于结果

```
tr_id
topic_id
response ( given in a form of 5 star rating so its in range of 1-5 always )
user_id 
```

我需要做的是

**1st ) 根据回复列出前十个主题，这将基于回复的数量**

我试过->

```
select t.* ,count(tr.response) as votes from topics t , topic_response tr where t.topic_id=tr.topic_id group by tr.topic_id order by votes LIMIT 10 
```

不工作

**2nd）用户将显示主题列表。他可以选择他想要的类别，也可以是多个类别。**

例如

如果他选择 `category_id 1,2,3,4` ，则将列出此类别中列出的主题。

我试过

```
select t.* from topics t ,topic_category tc where tc.topic_id = t.topic_id and category_id IN (1,3,2,4) 
// not able to get idea on this i would prefer if i could do this in subquery since i also need to check if the user has already responded to that question . 
```

**3）如果我得到一个查询工作假设。

从 php 方面，我将从选择多个下拉列表中获取 category_id 数组，例如 array(1,2,3,4)

所以我在想如何让这个查询接受类别ID

`category_id IN (1,3,2,4)`以mysql查询的形式 **

**我可以直接传递一个数组吗

`category_id IN ($ids)``$ids`数组在哪里**

我是 mysql 的新手，请帮助我，您的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:45:37.160

对于第一个问题：

您必须使用 LEFT JOIN 并将（响应的主题 ID 行）匹配到（主题的 ID）然后计数（响应的主题 ID）并按（响应的主题 ID）分组所有内容。

例如：

# 响应表 = 响应

response_id

topic_id

响应消息

# 主题表 = 主题

ID

标题

# 内容

查询是

SELECT topics.title,topics.content,COUNT(responses.topic_id) AS count FROM topics LEFT JOIN response ON topics.id =responses.topic_id GROUP BY count LIMIT 10

# 对于问题 2：

1.  您可以尝试使用 AND ( IN 1 OR 2 OR 3 OR 4
2.  您可以尝试使用 BETWEEN 1 AND 4
3.  WHERE(category_id>=1&&category_id<=4)

# actionscript-3 - 更改函数 actionscript 3 中的全局变量

> ID：11661358
> 
> 赞同：0
> 
> 时间：2012-07-26T02:12:06.757
> 
> 标签：actionscript-3, variables

我想要代码更改actionscript 3中函数内的全局变量

例如：

```
var m:String;
function kkk()
{
  m = "kkkkkk";
}
trace(m); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:18:07.907

如果你想在 as3 中使用全局变量，你需要创建一个类将它们保存在一个地方并引用该类中的变量。[更多信息](http://greenethumb.com/article/11/global-variables-in-as3/)

这是你的全局类 (GlobalVarContainer.as)

```
package 
{
    public class GlobalVarContainer 
    {
        public static var vars:Object = {};
    }
} 
```

这是您访问它们的方式

```
 import GlobalVarContainer;

  GlobalVarContainer.vars.groupingID  = 1
  GlobalVarContainer.vars.mediaID = 4
  GlobalVarContainer.vars.facultyID = 5
  GlobalVarContainer.vars.studentID = 2 
```

# android - 无法在android中运行谷歌地图功能

> ID：11661366
> 
> 赞同：0
> 
> 时间：2012-07-26T02:13:09.913
> 
> 标签：android, maps

我正在尝试在 android 中使用谷歌地图功能。我按照[https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)的说明进行操作。但是当我运行该应用程序时，似乎存在某种问题。我不确定它是什么，但应用程序不会加载。这是 logcat 中列出的错误。

```
07-26 02:01:01.771: ERROR/AndroidRuntime(158): ERROR: thread attach failed

07-26 02:01:06.761: ERROR/AndroidRuntime(211): Uncaught handler: thread main exiting due to uncaught exception

07-26 02:01:06.841: ERROR/AndroidRuntime(211): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.trainingcenter.maps/com.trainingcenter.maps.HelloGoogleMaps}: java.lang.ClassNotFoundException: com.trainingcenter.maps.HelloGoogleMaps in loader dalvik.system.PathClassLoader@43b7d958

07-26 02:01:06.841: ERROR/AndroidRuntime(211): Caused by: java.lang.ClassNotFoundException: com.trainingcenter.maps.HelloGoogleMaps in loader dalvik.system.PathClassLoader@43b7d958

07-26 02:01:06.931: ERROR/dalvikvm(211): Unable to open stack trace file '/data/anr/traces.txt': Permission denied

07-26 02:01:17.400: ERROR/AndroidRuntime(242): ERROR: thread attach failed

07-26 02:01:26.391: ERROR/ActivityThread(63): Failed to find provider info for com.google.settings

07-26 02:02:24.580: ERROR/AndroidRuntime(323): ERROR: thread attach failed

07-26 02:07:12.640: ERROR/AndroidRuntime(417): Uncaught handler: thread main exiting due to uncaught exception

07-26 02:07:12.640: ERROR/AndroidRuntime(417): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.trainingcenter.maps/com.trainingcenter.maps.HelloGoogleMaps}: java.lang.ClassNotFoundException: com.trainingcenter.maps.HelloGoogleMaps in loader dalvik.system.PathClassLoader@43d02ee8

07-26 02:07:12.640: ERROR/AndroidRuntime(417): Caused by: java.lang.ClassNotFoundException: com.trainingcenter.maps.HelloGoogleMaps in loader dalvik.system.PathClassLoader@43d02ee8 
```

你能告诉我有什么问题吗？谢谢您的帮助。

这是android清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.trainingcenter.maps" android:versionCode="1"
android:versionName="1.0">
<uses-sdk android:minSdkVersion="7" />
<uses-library android:name="com.google.android.maps" />
<uses-permission android:name="android.permission.INTERNET" />

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".HelloGoogleMaps" android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

这里是活动

```
package com.trainingcenter.maps;

import android.os.Bundle;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class HelloGoogleMaps extends MapActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

这是 main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/mapview"
android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
android:clickable="true" 
    android:apiKey="I inserted the API key here, I got it from http://code.google.com/android/maps-api-signup.html" /> 
```

顺便说一句，我正在使用 Google API 级别 2.1 更新 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:31:52.463

`<uses-library android:name="com.google.android.maps" />`需要在`<application>`标签内

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.trainingcenter.maps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".HelloGoogleMaps"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

**编辑：**

在您的 xml 文件中，我还要添加`android:enabled="true"`

```
<com.google.android.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:apiKey="I inserted the API key here, I got it from http://code.google.com/android/maps-api-signup.html"
    android:clickable="true" /> 
```

# java - Jframe图像+文本字段

> ID：11661367
> 
> 赞同：0
> 
> 时间：2012-07-26T02:13:12.800
> 
> 标签：java, swing, awt, frame, mixing

嗨，我正在尝试制作一个简单的框架来显示一个文本字段和一个按钮的图像，但由于某种原因，文本字段是不可见的，因为我对 java 非常陌生，甚至更擅长这些图形的东西，你能帮忙吗:) 代码

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package solverapplet;

 import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.File;
import javax.swing.JTextField;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import sun.misc.BASE64Decoder;

public class AwtImage extends Frame{
  Image img;
  String base="R0lGODlhDwAPAKECAAAAzMzM/////wAAACwAAAAADwAPAAACIISPeQHsrZ5ModrLlN48CXF8m2iQ3YmmKqVlRtW4MLwWACH+H09wdGltaXplZCBieSBVbGVhZCBTbWFydFNhdmVyIQAAOw==";
  /*public static void main(String[] args){
  AwtImage ai = new AwtImage();
  }*/
  public void setbase(String a){
  this.base=a;

  }
  public void refreshimage(){
        try {
            BASE64Decoder decoder = new BASE64Decoder();  
                      byte[] imgBytes = decoder.decodeBuffer(this.base);          

                      BufferedImage bufImg = ImageIO.read(new ByteArrayInputStream(imgBytes));  
                      //File imgOutFile = new File("newLabel.png");  
                      //ImageIO.write(bufImg, "png", imgOutFile);
                      img = bufImg;
        } catch (IOException ex) {
            Logger.getLogger(AwtImage.class.getName()).log(Level.SEVERE, null, ex);
        }

  }
  public AwtImage(){
  super("Solve");
        try {
            BASE64Decoder decoder = new BASE64Decoder();  
            byte[] imgBytes = decoder.decodeBuffer(this.base);          

            BufferedImage bufImg = ImageIO.read(new ByteArrayInputStream(imgBytes));  

            MediaTracker mt = new MediaTracker(this);

          img=bufImg;
          mt.addImage(img,0);
          JTextField textfield= new JTextField("Text field 2", 8);
          add(textfield,"South");
          setSize(400,400);
          //pack();
          setVisible(true);
          addWindowListener(new WindowAdapter(){
          public void windowClosing(WindowEvent we){
          dispose();
          }
          });
        } catch (IOException ex) {
            Logger.getLogger(AwtImage.class.getName()).log(Level.SEVERE, null, ex);
        }
  }
  public void update(Graphics g){
  paint(g);
  }

  public void paint(Graphics g){
  if(img != null)
  g.drawImage(img, 100, 100, this);
  else
  g.clearRect(0, 0, getSize().width, getSize().height);
  }
} 
```

它被另一个类实例化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:21:49.833

问题是，您在没有调用 super 的情况下覆盖了paint 方法，这意味着它永远没有机会进行绘制。

```
public void paint(Graphics g){
    if(img != null)
        g.drawImage(img, 100, 100, this);
    else
        g.clearRect(0, 0, getSize().width, getSize().height);
} 
```

使用时`java.awt.Frame`你会发现很难达到你想要的效果。 `java.swingx.JFrame`允许您覆盖该`paintComponent`方法，该方法允许您绘制组件的背景，但`java.awt.Frame`不允许。

您还应该避免混合轻质和重质组件（我知道，它显然是固定的），但如果可以，请避免它。

# jquery - Asp.Net WebApi $.get 在开发中工作，但在部署到 IIS 时失败

> ID：11661368
> 
> 赞同：0
> 
> 时间：2012-07-26T02:13:38.400
> 
> 标签：jquery, asp.net, html, asp.net-mvc, razor

我有以下简单的 jquery get 语句，它在我的服务器上调用 WebApi：

```
$.get('api/DataAPI?tenantId=1&datatype="Contacts"&actionname="ActiveOnly"', GetDataRetrieved); 
```

这在视觉工作室中运行良好。我检查了 chrome 中的网络流量，它显示创建了以下请求：

```
http://localhost:61882/api/DataAPI?tenantId=1&datatype=%22Contacts%22&actionname=%22ActiveOnly%22 
```

我现在已经将我的网站部署到 IIS，API 调用现在失败，找不到 404。我检查了chrome中的网络流量，可以看到问题：

```
http://localhost/api/DataAPI?tenantId=1&datatype=%22Contacts%22&actionname=%22ActiveOnly%22 
```

部署到 IIS 时的网站位于`http://localhost/MyWebSite`. 所以电话应该转到：

```
http://localhost/MyWebSite/api/DataAPI?tenantId=1&datatype=%22Contacts%22&actionname=%22ActiveOnly%22 
```

我的 $.get 调用中的正确语法是什么，以便它适用于 Visual Studio 并部署到 IIS（我很想使用 razor @Url.Content 但这在 javascript 块中不起作用）？

提前致谢

编辑：这是整个 .cshtml 页面的标记：

```
@{
ViewBag.Title = "MyWebSite";
Layout = "~/Views/Shared/SiteLayout.cshtml";
}

@section HeaderContent
{
<script type="text/javascript" src="@Url.Content("~/assets/scripts/App/Base64EncodeDecode.js")"></script>
 }

<script type="text/javascript">   
    $(function () {               
    $("#TestButton").click(function () {            
        $.get('api/DataAPI?tenantId=1&datatype="Contacts"&actionname="ActiveOnly"', GetDataRetrieved);
    });
});

function GetDataRetrieved(data) {        
     //alert(base64_decode(data));
    alert(data);
}   
</script>

<button id="TestButton">Test Button</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:17:29.437

您可能需要将相对 URL 添加到您的 jQuery 和其他 .js 文件路径，即

```
<script src="<%= ResolveClientUrl("~/Scripts/jQuery-v1.x.js") %>" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:43:27.203

假设您的 Javascript 直接位于页面上：

```
$.get('@Url.Action("DataAPI", "API", new {tenantId = 1, datatype = "Contacts", actionname="ActiveOnly"})', GetDataRetrieved); 
```

应该是你需要的

如果它在另一个页面上，我喜欢将所需的 URL 与 HTML 元素相关联，然后使用 jQuery 来提取它。

```
<div id='foo' data-url='@Url.Action("DataAPI", "API")'>
</div> 
```

然后你的 Javascript 看起来像：

```
$.get($('#foo').data('url'), {tenantId: 1, datatype: "Contacts", actionname: "ActiveOnly"}, GetDataRetrieved); 
```

# html - 在背景上浮动 CSS 图像

> ID：11661373
> 
> 赞同：0
> 
> 时间：2012-07-26T02:14:34.123
> 
> 标签：html, css

我正在寻找一个自定义的 CSS 网页，但我很难让所有图片都显示出来，除非我将最小高度设置为 900 像素左右。索引代码如下所示，

```
<head>
<style type="text/css">
@import url("stylesheets/mystyle.css");
</style>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Small Biz Labs</title>

</head>

<body>
<div class="wrap">
        <div class="conatiner" align="center">
                <div class="header">
                    <center>
                        <img src="images/logo.png" width="200" height="100" />
                    </center>
                </div>
                <div class="text">
                    <h1>Maybe a header</h1>
                    <p>some text</p>
                </div>
        </div>
</div>

</body>

</html> 
```

CSS代码看起来像这样......

```
/* 
Document   : mystyle
Created on : Jul 18, 2012, 1:12:14 PM
Author     : someguy
Description:
    Purpose of the stylesheet follows.
*/

html {
background:url(../images/bodybackground.jpg) repeat;
margin:0px;
max-height:100%
}

body {
background:url(../images/paperbackground.jpg) repeat-y center;
margin:0px;
margin:0px;
max-height:100%;

}

.wrap {
background:url(../images/new_backdrop.png) repeat-x center bottom fixed;
margin:0px;
min-height:1050px;
}

.container { 
max-width:600px;

}

.header {
}

.text {
text-align:left;
max-width:600px;
padding-left:10px;
} 
```

我试图让瓶子漂浮在我制作的两种纹理上。允许将文本/图像等放置在较小较轻的纸张纹理版本中。到目前为止，如果我将最大高度设置得足够大，我只能做到这一点。关于如何调整我的代码的任何建议？我正在使用的图像在我获得更多积分之前无法发布，但如果你想看到它们，请告诉我，我会向你拍摄 jpg 和一个 png（浮动的那个）。

如果你想看半直播[版](http://smallbizlabs.net/bizlabs/)的 jsfiddle：http: [//jsfiddle.net/wKtGv/](http://jsfiddle.net/wKtGv/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:38:19.023

尝试添加高度：100%；到 body 和 .wrap [http://jsfiddle.net/wKtGv/13/](http://jsfiddle.net/wKtGv/13/)

# ruby-on-rails - 设计允许不同的模型有相同的和多个类别？

> ID：11661375
> 
> 赞同：0
> 
> 时间：2012-07-26T02:14:42.177
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

假设我有 3 个模型，分别称为 Dog、Cat 和 Mouse。我希望这三个都能够拥有相同、不同和许多类别。我还想向一个类别添加逻辑并像其他模型一样定期创建它。所以它可能是这样的：

```
Dog.categories = brown, spots, heavy fur, weak limbs
Cat.categories = brown, red, heavy fur
Mouse.categories = brown, small

Category 
   has_and_belongs_to_many :dogs
   has_and_belongs_to_many :cats
   has_and_belongs_to_many :mouses
   def watch_health
     if self.name == "weak limbs"
     do stuff here
   end
end 
```

现在说了这么多。模型和表格设计如何。我不完全理解多态关联在这种情况下是如何工作的，所以看起来所有 3 的 HATBM 都是正确的方法。你怎么看？它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:52:14.857

这个 railscasts 将回答这个问题：

[http://railscasts.com/episodes/154-polymorphic-association?autoplay=true](http://railscasts.com/episodes/154-polymorphic-association?autoplay=true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:47:43.760

好的，所以我最终建立了一个关联，您可以从[这里](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)和[这里](http://railscasts.com/episodes/47-two-many-to-many)`has_many :through`获得更多帮助。

# java - 如何在 Java 中保存和加载数组

> ID：11661376
> 
> 赞同：1
> 
> 时间：2012-07-26T02:14:42.460
> 
> 标签：java, arrays, loading, save

所以我正在创建一个程序来跟踪我观看的电视节目和电影。我有 2 个课程（电视和电影），我有一个可以容纳所有人的数组。我将如何保存这个数组，以便每次我使用该程序时，它都可以让我编辑同一个列表，因为每次我观看新剧集时，我都想用新信息更新我的数组。所以基本上我需要使用什么程序来不仅保存一个 arrya，而且每次运行程序时都加载数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:21:12.833

为了保存数组以供进一步参考，您需要使类可序列化（例如，通过实现[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)）。这意味着可以将对象转换为可以保存到文件或通过网络发送的字节序列，以后可以使用该字节序列在内存中重新创建对象

然后您可以执行此操作以将数据保存到文件中：

```
ObjectOutputStream out = new ObjectOutputStream(
    new FileOutputStream("myarray.ser")
);
out.writeObject(myArray);
out.flush();
out.close(); 
```

你可以像这样读回来：

```
ObjectInputStream in = new ObjectInputStream(new FileInputStream("myarray.ser"));
MyType[] array = (MyType[]) in.readObject();
in.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:38:18.280

虽然您可以序列化您的对象并将其写入磁盘...我猜您只需将数组输出到文件并将其读回会更容易。您可以将数组中的每个元素写入文件相当容易地循环，并同样容易地读回它。就像其他人说的那样，花时间研究 ArrayList 或类似的结构是值得的！例子：

要写入文件：

```
ArrayList<String> list = new ArrayList<String>();

// add stuff the the ArrayList

PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("data.txt")));

for( int x = 0; x < list.size(); x++)
{
out.println(list.get(x));
}

out.close() 
```

从文件中读取：

```
ArrayList<String> list = new ArrayList<String>();

Scanner scan = new Scanner(new File("data.txt"));

while(scan.hasNext())
{
list.add(scan.next());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T02:18:58.227

首先，您应该避免使用像瘟疫这样的数组......`Collections`改为使用，除了其他任何东西之外，它会根据需要自动扩展大小（您将需要这个）。

无论您使用数组还是 a `List`，您都可以通过将对象写入`ObjectOutputStream`包装 a来将对象序列化到磁盘`FileOutputStream`。

请注意，数组/列表中的对象必须实现*，*`Serializable`所有类字段也必须实现。

要重新读取数组/列表，请从`ObjectInputStream`包装 a中读取`FileInputStream`。

您可以在 Google 上搜索此类代码的无数示例。

# javascript - Backbone.Models this.get() 是复制整个数组还是指向内存中的同一个数组

> ID：11661380
> 
> 赞同：17
> 
> 时间：2012-07-26T02:15:41.833
> 
> 标签：javascript, arrays, backbone.js, model

```
 Person = Backbone.Model.extend({
        defaults: {
            name: 'Fetus',
            age: 0,
            children: []
        },
        initialize: function(){
            alert("Welcome to this world");
        },
        adopt: function( newChildsName ){
            var children_array = this.get("children");
            children_array.push( newChildsName );
            this.set({ children: children_array });
        }
    });

    var person = new Person({ name: "Thomas", age: 67, children: ['Ryan']});
    person.adopt('John Resig');
    var children = person.get("children"); // ['Ryan', 'John Resig'] 
```

在此示例代码中，我们有：

children_array = this.get("children")

我在想这只会指向内存中的同一个数组（O（1）也是如此）。但是后来我认为这将是一个设计层，因为可以在不使用 this.set() 的情况下操作数组，然后事件侦听器不会触发。

所以我猜它（不知何故神奇地）复制了数组？？

[http://backbonejs.org/#Model-set](http://backbonejs.org/#Model-set)

发生什么了？

编辑：我刚刚在[https://github.com/documentcloud/backbone/blob/master/backbone.js](https://github.com/documentcloud/backbone/blob/master/backbone.js)的主干源代码中找到了实现（我在底部粘贴了相关代码）

获得回报：

```
return this.attributes[attr] 
```

所以这只会指向内存中的同一个数组，对吗？所以一个人可以在不使用 set() 的情况下更改数组，那会很糟糕..？我对么？

```
get: function(attr) {
      return this.attributes[attr];
    },

    // Get the HTML-escaped value of an attribute.
    escape: function(attr) {
      var html;
      if (html = this._escapedAttributes[attr]) return html;
      var val = this.get(attr);
      return this._escapedAttributes[attr] = _.escape(val == null ? '' : '' + val);
    },

    // Returns `true` if the attribute contains a value that is not null
    // or undefined.
    has: function(attr) {
      return this.get(attr) != null;
    },

    // Set a hash of model attributes on the object, firing `"change"` unless
    // you choose to silence it.
    set: function(key, value, options) {
      var attrs, attr, val;

      // Handle both `"key", value` and `{key: value}` -style arguments.
      if (_.isObject(key) || key == null) {
        attrs = key;
        options = value;
      } else {
        attrs = {};
        attrs[key] = value;
      }

      // Extract attributes and options.
      options || (options = {});
      if (!attrs) return this;
      if (attrs instanceof Model) attrs = attrs.attributes;
      if (options.unset) for (attr in attrs) attrs[attr] = void 0;

      // Run validation.
      if (!this._validate(attrs, options)) return false;

      // Check for changes of `id`.
      if (this.idAttribute in attrs) this.id = attrs[this.idAttribute];

      var changes = options.changes = {};
      var now = this.attributes;
      var escaped = this._escapedAttributes;
      var prev = this._previousAttributes || {};

      // For each `set` attribute...
      for (attr in attrs) {
        val = attrs[attr];

        // If the new and current value differ, record the change.
        if (!_.isEqual(now[attr], val) || (options.unset && _.has(now, attr))) {
          delete escaped[attr];
          (options.silent ? this._silent : changes)[attr] = true;
        }

        // Update or delete the current value.
        options.unset ? delete now[attr] : now[attr] = val;

        // If the new and previous value differ, record the change.  If not,
        // then remove changes for this attribute.
        if (!_.isEqual(prev[attr], val) || (_.has(now, attr) !== _.has(prev, attr))) {
          this.changed[attr] = val;
          if (!options.silent) this._pending[attr] = true;
        } else {
          delete this.changed[attr];
          delete this._pending[attr];
        }
      }

      // Fire the `"change"` events.
      if (!options.silent) this.change(options);
      return this;
    }, 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-26T04:33:31.573

记录在案的界面实际上并没有指定谁拥有数组引用，所以你在这里是你自己的。如果您查看实现，您会看到（就像您所做的那样）`get`直接从模型的 internal 中返回一个引用`attributes`。这适用于不可变类型（例如数字、字符串和布尔值），但遇到可变类型（例如数组）的问题：您可以轻松地更改某些内容，而 Backbone 没有任何了解它的方式。

骨干模型似乎旨在包含原始类型。

打电话的原因有以下三个`set`：

1.  这就是接口规范所说的。
2.  如果您不调用`set`，则不会触发事件。
3.  如果您不调用`set`，您将绕过具有的验证逻辑`set`。

如果您使用数组和对象值，您只需要小心。

请注意，`get`and的这种行为`set`是一个实现细节，未来的版本可能会更智能地处理它们如何处理非原始属性值。

* * *

数组属性（以及与此相关的对象属性）的情况实际上比您最初想象的要糟糕。当你说 时，如果你拉出一个数组`m.set(p, v)`，Backbone 不会认为这`set`是一个改变：`v === current_value_of_p`

```
var a = m.get(p); 
```

然后修改它：

```
a.push(x); 
```

并寄回：

```
m.set(p, a); 
```

您不会`"change"`从模型中获得事件，因为`a === a`；Backbone[实际上使用](https://github.com/jashkenas/backbone/blob/1.0.0/backbone.js#L347)了Underscore 的[`isEqual`](https://github.com/jashkenas/backbone/blob/1.0.0/backbone.js#L347)组合，`!==`但在这种情况下效果是一样的。

例如，这个简单的诡计：

```
var M = Backbone.Model.extend({});
var m = new M({ p: [ 1 ] });
m.on('change', function() { console.log('changed') });

console.log('Set to new array');
m.set('p', [2]);

console.log('Change without set');
m.get('p').push(3);

console.log('Get array, change, and re-set it');
var a = m.get('p'); a.push(4); m.set('p', a);

console.log('Get array, clone it, change it, set it');
a = _(m.get('p')).clone(); a.push(5); m.set('p', a);​ 
```

产生两个`"change"`事件：一个在第`set`一个之后，一个在最后一个之后`set`。

演示：http: [//jsfiddle.net/ambiguous/QwZDv/](http://jsfiddle.net/ambiguous/QwZDv/)

如果您看一下，`set`您会注意到对`Backbone.Model`s 的属性有一些特殊处理。

* * *

这里的基本教训很简单：

> 如果您打算使用可变类型作为属性值，那么如果您有可能更改该值，[`_.clone`](http://underscorejs.org/#clone)则在退出时使用它们（或者在需要深拷贝时使用）。[`$.extend(true, ...)`](http://api.jquery.com/jQuery.extend/)

# python - Pygame - 为太空入侵者循环射击子弹

> ID：11661384
> 
> 赞同：0
> 
> 时间：2012-07-26T02:16:10.820
> 
> 标签：python, pygame

现在我的代码有 2 个随机外星人射击 1 颗子弹，但我希望它循环，以便当子弹离开屏幕时，它会循环再有 2 个随机外星人射击子弹，依此类推。

[http://pastebin.com/RhXp2zss](http://pastebin.com/RhXp2zss)

外星子弹的类在 Space_invaders 类中称为 Alien_Bullets 应该有外星子弹的精灵组，我需要在 Space_invaders 下的函数更新中包含循环子弹效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:24:33.907

你应该在你的 中保留对 Alien 的引用`Alien_Bullets`，然后当 de bullet 被摧毁时，你会触发新的射击。你可以在你的外星人中放置一个计数器来知道它射了多少子弹。当计数器达到 3 或子弹击中目标时，您重置计数器并停止射击。

# wpf - 为什么我的带有 DrawingBrush Fill 绑定到前景色的 ToggleButton 不起作用？VS2012

> ID：11661387
> 
> 赞同：3
> 
> 时间：2012-07-26T02:16:25.980
> 
> 标签：wpf, data-binding

更新：这是因为我安装了 VS2012 RC。（呃，对不起应该说）。我有一个 WPF 切换按钮。我想在上面画一张图，所以我做了一个画笔，我想控制画的颜色，所以我把它绑定到了ToggleButton的Foreground属性。不过好像没用？（在下面的示例中，绘图本来是蓝色的，但它是黑色的）。

```
<UserControl x:Class="SynthEditWpf.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
        <UserControl.Resources>

        <DrawingBrush x:Key="Power" Stretch="None">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <DrawingGroup.Children>
                        <GeometryDrawing Geometry="F1 M 11.9999,4.34296L 11.9999,9.57471">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="3" StartLineCap="Round" EndLineCap="Round" LineJoin="Round" Brush="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType={x:Type Control}}}"/>
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                        <GeometryDrawing Geometry="F1 M 7.60373,6.78986C 6.09436,8.03101 5.13317,9.90375 5.13317,11.999C 5.13317,15.7359 8.19123,18.7654 11.9635,18.7654C 15.7359,18.7654 18.7939,15.7359 18.7939,11.999C 18.7939,9.90375 17.8327,8.03101 16.3234,6.78986">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="3" StartLineCap="Round" EndLineCap="Round" LineJoin="Round" Brush="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType={x:Type Control}}}"/>
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                    </DrawingGroup.Children>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>
    </UserControl.Resources>
    <Grid>
        <ToggleButton Foreground="Blue" Width="30" Height="30">
            <Rectangle Fill="{StaticResource Power}" Width="24" Height="24" />
        </ToggleButton>
    </Grid>
</UserControl> 
```

跟踪输出

System.Windows.Data 警告：55：为绑定创建 BindingExpression (hash=9381496) (hash=30868550) System.Windows.Data 警告：57：路径：'Foreground' System.Windows.Data 警告：59：BindingExpression (hash= 9381496）：默认模式解析为 OneWay System.Windows.Data 警告：60：BindingExpression（哈希=9381496）：默认更新触发器解析为 PropertyChanged System.Windows.Data 警告：61：BindingExpression（哈希=9381496）：附加到系统。 Windows.Media.Pen.Brush (hash=13172414) System.Windows.Data 警告：65：BindingExpression (hash=9381496)：RelativeSource (FindAncestor) 需要树上下文 System.Windows.Data 警告：64：BindingExpression (hash=9381496) : 解决源延迟

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T04:41:37.943

这对我有用。好的，我最好解释一下，嘿。当它只是作为资源的画笔时，它不是矩形的一部分。它找到的祖先实际上是 userControl。尝试改变用户控件的前景，你会看到它改变了你的笔的颜色。要将其作为矩形的一部分，因此您需要将其包装成一种样式（见下文）

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">   
    <Window.Resources>

    <Style x:Key="Frank" TargetType="Rectangle">
        <Style.Resources>
            <DrawingBrush x:Key="Power" Stretch="None">
                <DrawingBrush.Drawing>
                    <DrawingGroup>
                        <DrawingGroup.Children>
                            <GeometryDrawing Geometry="F1 M 11.9999,4.34296L 11.9999,9.57471">
                                <GeometryDrawing.Pen>
                                    <Pen Thickness="3" StartLineCap="Round" EndLineCap="Round" LineJoin="Round" Brush="{Binding RelativeSource={RelativeSource AncestorType=ToggleButton, Mode=FindAncestor}, Path=Foreground}"/>
                                </GeometryDrawing.Pen>
                            </GeometryDrawing>
                            <GeometryDrawing Geometry="F1 M 7.60373,6.78986C 6.09436,8.03101 5.13317,9.90375 5.13317,11.999C 5.13317,15.7359 8.19123,18.7654 11.9635,18.7654C 15.7359,18.7654 18.7939,15.7359 18.7939,11.999C 18.7939,9.90375 17.8327,8.03101 16.3234,6.78986">
                                <GeometryDrawing.Pen>
                                    <Pen Thickness="3" StartLineCap="Round" EndLineCap="Round" LineJoin="Round" Brush="{Binding RelativeSource={RelativeSource AncestorType=ToggleButton, Mode=FindAncestor}, Path=Foreground}"/>
                                </GeometryDrawing.Pen>
                            </GeometryDrawing>
                        </DrawingGroup.Children>
                    </DrawingGroup>
                </DrawingBrush.Drawing>
            </DrawingBrush>
        </Style.Resources>
        <Setter Property="Fill" Value="{StaticResource Power}"/>
    </Style>
</Window.Resources>
    <Grid>
        <ToggleButton Foreground="Blue" Width="30" Height="30">
            <Rectangle Style="{StaticResource Frank}" Width="24" Height="24"  />
        </ToggleButton>
    </Grid> 
```

# c# - Excel InterOp：当不允许使用“：”时如何使用绝对路径 WorkBook.SaveAs？

> ID：11661390
> 
> 赞同：2
> 
> 时间：2012-07-26T02:16:47.917
> 
> 标签：c#, excel, interop

我正在尝试使用以下代码从内存中保存工作簿：

```
 this.Target.WorkBook.SaveAs(this.Target.WorkBookPath, Interop.XlFileFormat.xlWorkbookNormal,
                        Type.Missing, Type.Missing, 
                         Type.Missing, Type.Missing, 
                          Interop.XlSaveAsAccessMode.xlNoChange,
                         Type.Missing,Type.Missing,Type.Missing,Type.Missing); 
```

从配置文件中读取 this.Target.WorkBookPath 的位置为：

> D:\Devzone\rpt_SalesMargins2

但我收到此错误消息：

> 无法访问该文件。请尝试以下方法之一：\n\n• 确保指定的文件夹存在。\n• 确保包含该文件的文件夹不是只读的。\n• 确保文件名不包含以下任何字符：< > ? [ ] : | 或 *\n• 确保文件/路径名包含的字符不超过 218 个。

因此，如果我不能使用 ":" 那么我该如何指定 D:\ ？

**更新/健全性检查**

![配置](../Images/facaecd321d0b931cd1d4bacb3159356.png)

![理智](../Images/9fb03b0ffc4fad541acd73f032f86bfd.png)

在此图像中，该文件称为 rego，我尝试了几个随机名称，并且都作为相对路径工作，但在绝对路径时失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:23:48.043

我认为问题不在于 : 作为驱动器分隔符。来自 Microsoft 支持：

> 例如，文件的路径可能类似于以下内容：'c:\excel\personal...[my workbook.xls]up_to_31_char_sheetname'!$A$1
> 
> 注意如果路径中**有方括号**，也会发生此行为。*（强调我的）*

[http://support.microsoft.com/kb/213983](http://support.microsoft.com/kb/213983)

他们使用了一个包含驱动器号的错误路径示例，并说*坏事*是路径中的*[*。

您尝试使用的完整路径是什么？

# tcl - 用于填充 TCL 数组的纯 TCL 与 TCL C API 的性能

> ID：11661397
> 
> 赞同：2
> 
> 时间：2012-07-26T02:17:45.377
> 
> 标签：tcl

与使用标准 TCL 执行相同操作相比，使用 TCL C API 读取文件和填充 TCL 数组会快得多。我有一个大约 100+MB 的大文件，我需要读取并设置一些哈希条目。使用 TCL C API 似乎最多不能提供 2 到 4 倍的速度优势。这是平常的还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:16:07.973

*在这种情况下，您不太可能获得很大的性能提升，因为当您从 C API 设置数组条目时，如果您只是将代码编写为内部*的 Tcl，您将承担大部分成本*一个程序*。特别是，您很容易通过使用低效的子 API获得*更差的性能；*一些 Tcl 的 API 函数不是很快（例如，`Tcl_SetVar`），但由于使用它们的现有代码量很大（以及更快的函数需要使用更多的 C 代码这一事实），所以它们被保留了下来。请记住，设置一个数组元素需要一个*强制性*的哈希表查找，而且这些都是有实际成本的（尽管 Tcl 使用了一个非常快——如果相当愚蠢的话——哈希）。

更重要的是，您可以通过使用 Tcl 列表或字典（取决于您想要存储的确切内容）获得更好的性能，并且这些的 C API 非常快（尤其是对于列表，它们实际上是 C`Tcl_Obj`引用数组）。我不知道这样做是否适合您的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T06:48:09.240

C API 主要是为了让您编写 Tcl 扩展，并且只公开编写“纯 Tcl”本身的例程。在您描述的情况下，我不希望看到太大的性能差异并记住：

> 过早的优化是编程中万恶（或至少是大部分）的根源。
> 
> 计算机编程作为一门艺术（1974 年），Donald Knuth

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:17:18.713

如果你真的需要加载大量数据，也许像 NAP (http://wiki.tcl.tk/4015) 或类似的扩展是合适的？

# javascript - 未选择任何值时，下拉列表中的选定索引会抛出错误

> ID：11661398
> 
> 赞同：0
> 
> 时间：2012-07-26T02:17:52.417
> 
> 标签：javascript

我正在尝试访问从下拉列表中选择的值并填充到表格的一行中。我在用：

```
cell2.innerHTML = choiceInput.options[choiceInput.selectedIndex].text; 
```

`choiceInput`我的下拉元素的名称在哪里。

如果我从下拉列表中选择一个选项，这将有效，但如果我没有从下拉列表中选择任何内容，我会`null`选择一个值并获得 JavaScript 错误。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:19:38.973

获取潜在`option`元素，使用*if 语句*，这样您就不会`.text`在没有可用元素时尝试访问。

```
var selected = choiceInput.options[choiceInput.selectedIndex];

if (selected)
    cell2.innerHTML = selected.text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:23:55.927

使用验证。

```
function validateListBox(){
var listBoxSelection=document.getElementById("choiceInput").value;
if(listBoxSelection==0){
alert("Please select );
return false;
}else{
return true;
}
return true;
} 
```

# mysql - mysql无法添加或更新子行，外键相关失败

> ID：11661399
> 
> 赞同：0
> 
> 时间：2012-07-26T02:17:55.827
> 
> 标签：mysql, database, database-design, foreign-key-relationship

> 错误：无法添加或更新子行：外键约束失败

以下是创建错误的代码：

```
ALTER TABLE 'catalog_eav_attribute' 
  ADD CONSTRAINT 'FK_CATALOG_EAV_ATTRIBUTE_ID' 
  FOREIGN KEY ('attribute_id') REFERENCES 'eav_attribute' ('attribute_id)' 
  ON DELETE CASCADE ON UPDATE CASCADE; 
```

我上传了 SQL 的结构，它没有问题，但是当我插入数据时，我得到了上述相关错误。我在某处读到，我预测它是因为糟糕的数据。错误的其他可能性是什么？任何建议或解决方案都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:20:54.840

错误消息意味着您尝试放入 attribute_id 列的任何数字在 eav_attribute.attribute_id 列中尚不存在。

您可以插入 eav_attribute.attribute_id 中已经存在的值*吗*？（你可能可以。）

您是否可以通过尝试插入eav_attribute.attribute_id*中不*存在的值来引发相同的错误？

调和差异，你就完成了。您需要确定 eav_attribute.attribute_id 中不存在哪些属性 ID，然后修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:58:57.677

“对于 InnoDB 以外的存储引擎，MySQL Server 会解析 CREATE TABLE 语句中的 FOREIGN KEY 语法，但不会使用或存储它。”

来自： [http ://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html](http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html)

我不确定，但如果你的表是 MyISAM 而不是 InnoDB，你的语法可能不起作用。

# javascript - BackboneJS 重新排列集合中模型的最佳方法，同时为每个模型保持 0 索引的序数属性

> ID：11661401
> 
> 赞同：4
> 
> 时间：2012-07-26T02:18:02.003
> 
> 标签：javascript, collections, backbone.js, models

我在这里遇到了一个问题，我有一个 BackboneJS 模型的集合，每个模型都有一个“序数”属性来跟踪它在集合中的顺序。

**这是我的播放数据**

```
var ex_group_test_data = [{

            title: 'PRE EXERCISE',
            id:         0,
            ordinal:    1,

            group_items: [{
                id:         0,
                ordinal:    0,
                title: 'item 1'
            },{
                id:         1,
                ordinal:    1,
                title: 'item 2'
            }]

        },{

            title: 'MAIN PART',
            id:         1,
            ordinal:    0,

            group_items: [{
                id:             2,
                ordinal:        0,
                title:          'item 3',
                description:    'testing descrip'
            },{
                id:         3,
                ordinal:    1,
                title: 'item 4'
            }]

        },{

            title: 'POST EXERCISE BS',
            id:         2,
            ordinal:    2,

            group_items: [{
                id:             2,
                ordinal:        0,
                title:          'item 5',
                description:    'testing descrip'
            },{
                id:         3,
                ordinal:    1,
                title: 'item 6'
            }]

        }]; 
```

**这是我的骨干收藏的要点**

```
 Collections.Exercise_Groups = Backbone.Collection.extend({
            model: Models.Exercise_Group,
            comparator: function(model){
                return model.get('ordinal');
            },
            initialize: function(){

                return this;
            } 
```

从简单开始，我希望能够获取一个模型并将其移动 +1 或 -1 序数并保持集合中所有模型的 0 索引。

最终我想把它带到一个水平，我可以放入模型或从任何位置删除它们，并且仍然保持我的 0 索引，或者取一个模型并将其移动 +/- X 位置。

有人有推荐的方法来完成这个吗？

**编辑 1**

我已经制定了一个解决方案，我可能想在明天真正睡一觉后对其进行优化。它维护我的集合中我的模型的“序数”的 0 索引，无论我是相对于它的原始位置向前还是向后移动模型。

**EDIT 2** Err 实际上它在边缘情况下有错误。

```
/**
             * Move model to a specified location. 
             * 
             * @param   int [model id]
             * @param   int [mew item position]
             * @return  this
             */
            move_to: function(m_id, new_pos){

                //keep within range
                if(new_pos < 0)
                    new_pos = 0;
                else if(new_pos > (this.length - 1))
                    new_pos = this.length - 1;

                var model = this.get(m_id),
                    old_pos = model.get('ordinal');

                model.set({
                    ordinal: new_pos
                });
                if(new_pos == old_pos){
                    //trigger associated events
                    this.sort();
                    return this;
                }

                //update indexes of affected models
                this.each(function(m){

                    //ordinal of current model in loop
                    var m_ordinal = m.get('ordinal');

                    //skip if this is the model we just updated
                    if(m.get('id') == m_id)
                        return;

                    if(old_pos < new_pos){
                        //moving down, ordinal is increasing

                        if(m_ordinal <= new_pos && m_ordinal != 0){
                            //this is in the range we care about
                            m.set({
                                ordinal: m.get('ordinal') - 1
                            });

                        }

                    }else if(old_pos > new_pos){
                        //moving up, ordinal is decreasing                  

                        if(m_ordinal >= new_pos && (m_ordinal != (this.length - 1))){
                            //this is in the range we care about
                            m.set({
                                ordinal: m.get('ordinal') + 1
                            });

                        }

                    }

                });

                this.sort();
                return this;

            } 
```

**编辑 3** 好的，我想我已经解决了所有问题，一些简单的范围问题。这是我已经彻底测试过的一些代码，我相信它可以工作。

```
/**
                 * Move model to a specified location. 
                 * 
                 * @param   int [model id]
                 * @param   int [mew item position]
                 * @return  this
                 */
                move_to: function(m_id, new_pos){

                    //keep within range
                    if(new_pos < 0)
                        new_pos = 0;
                    else if(new_pos > (this.length - 1))
                        new_pos = this.length - 1;

                    var model = this.get(m_id),
                        old_pos = model.get('ordinal');

                    log('old_pos ' + old_pos);
                    log('new_pos ' + new_pos);

                    model.set({
                        ordinal: new_pos
                    });
                    if(old_pos == new_pos){
                        //trigger associated events
                        this.sort();
                        return this;
                    }

                    var _this = this;
                    //update indexes of affected models
                    this.each(function(m){

                        //ordinal of current model in loop
                        var m_ordinal = m.get('ordinal');

                        //skip if this is the model we just updated
                        if(m.get('id') == m_id)
                            return;

                        if(old_pos < new_pos){
                            //moving down, ordinal is increasing

                            if(m_ordinal <= new_pos && !(m_ordinal <= 0)){
                                //this is in the range we care about
                                m.set({
                                    ordinal: m.get('ordinal') - 1
                                });

                            }

                        }else if(old_pos > new_pos){
                            //moving up, ordinal is decreasing                  
                             log('p1');

                            if(m_ordinal >= new_pos && !(m_ordinal >= (_this.length - 1))){
                                //this is in the range we care about
                                m.set({
                                    ordinal: m.get('ordinal') + 1
                                });

                            }

                        }

                    });

                    this.sort();                    
                    return this;

                } 
```

**编辑 4**

又发现一个bug，补上。

```
Backbone.Collection.prototype.move_to = function(m_id, new_pos) {

    //keep within range
    if(new_pos < 0)
        new_pos = 0;
    else if(new_pos > (this.length - 1))
        new_pos = this.length - 1;

    var model = this.get(m_id),
        old_pos = model.get('ordinal');

    log('old_pos ' + old_pos);
    log('new_pos ' + new_pos);

    model.set({
        ordinal: new_pos
    });
    if(old_pos == new_pos){
        //trigger associated events
        this.sort();
        return this;
    }

    var _this = this;
    //update indexes of affected models
    this.each(function(m){

        log(m.id);

        //ordinal of current model in loop
        var m_ordinal = m.get('ordinal');

        //skip if this is the model we just updated
        if(m.get('id') == m_id)
            return;

        if(old_pos < new_pos){
            //moving down, ordinal is increasing

            if(m_ordinal <= new_pos && m_ordinal >= old_pos && !(m_ordinal <= 0)){
                //this is in the range we care about
                m.set({
                    ordinal: m.get('ordinal') - 1
                }, {
                    silent: true
                });

            }

        }else if(old_pos > new_pos){
            //moving up, ordinal is decreasing                  
             log('p1');

            if(m_ordinal >= new_pos && m_ordinal <= old_pos && !(m_ordinal >= (_this.length - 1))){
                //this is in the range we care about
                m.set({
                    ordinal: m.get('ordinal') + 1
                }, {
                    silent: true
                });

            }

        }

    });

    this.sort();                    
    return this;
}; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-26T08:15:09.447

如果您查看backbone.js 源代码，您会发现例如 add 方法支持将模型添加到某些索引

`collectionName.add(model, {at: index});`

从位置移除可能需要您为集合创建自定义函数，例如：

```
// Your Collection

removeAt: function(options) {
  if (options.at) {
    this.remove(this.at(options.at));
  }
} 
```

对于 +1 / -1，您可以创建自定义函数并使用内置的下划线 indexOf-function

```
// Your Collection

moveUp: function(model) { // I see move up as the -1
  var index = this.indexOf(model);
  if (index > 0) {
    this.remove(model, {silent: true}); // silence this to stop excess event triggers
    this.add(model, {at: index-1});
  }
}

moveDown: function(model) { // I see move up as the -1
  var index = this.indexOf(model);
  if (index < this.models.length) {
    this.remove(model, {silent: true}); // silence this to stop excess event triggers
    this.add(model, {at: index+1});
  }
} 
```

这样，您还可以将 moveUp 和 moveDown 实现到模型本身，以获得更易于阅读的代码！

```
// Your Model

moveUp: function() {
  this.collection.moveUp(this);
}

// And the same for moveDown 
```

但是现在 index 属性并没有保存在模型本身中。要读取索引只需使用`collection.indexOf(model)`，但如果您想始终将该信息存储在模型中，您可以绑定到`add`和`remove`事件以在对集合进行更改时更新所有索引：

```
// Your collection

initialize: function(options?) {
  ...
  this.on('add remove', this.updateModelOrdinals);
  ...
},

...

updateModelOrdinals: function() {
  this.each(function(model, index) {
    this.model.set('ordinal', index);
  });
} 
```

等等！现在您应该拥有所需的功能，而无需重新发明轮子，并且仍然使用 Backbone 自己的功能保持 0 索引！抱歉有点走神了，请问我是否超出了您的范围。并阅读[backbone.js 源代码](https://github.com/documentcloud/backbone/blob/master/backbone.js)，你可以在那里找到非常有用的东西！

希望这可以帮助！

# api - HTTP：在 Destination 标头不是 URI 的情况下使用 COPY 方法是否可以接受？

> ID：11661404
> 
> 赞同：8
> 
> 时间：2012-07-26T02:18:48.413
> 
> 标签：api, http, copy, rfc

# 背景

我正在构建一个允许客户端操作地理空间对象的 API。这些对象包含世界上的位置（纬度/经度）和大量元数据。实际的 API 相当大，所以我在这里提供一个简化版本。

## 当前 API

考虑一个具有两个对象、特性和属性的 API。

功能端点是`/api/feature`并且看起来像：

```
{
    id: 5,
    name: "My super cool feature",
    geometry: {
        type: "Point",
        coordinates: [
            -88.043355345726,
            43.293055846667315
        ]
    }
} 
```

属性端点是`/api/attribute`。一个属性看起来像：

```
{
    id: 3,
    feature_id: 5,
    name: "attr-name",
    value: "value"
} 
```

您可以通过使用不同的 HTTP 方法向其端点发出 HTTP 请求来与这些对象进行交互，就像您可能期望的那样：

*   `GET /api/feature/5`读取 id 为 5 的特征。
*   `PUT /api/feature/5`更新 id 为 5 的功能。
*   `POST /api/feature`创建一个新功能。
*   `DELETE /api/feature/5`删除 id 为 5 的特征。

属性也是如此。

属性通过外键与特征相关联（通常表示为“特征有很多属性”）。

## 问题

能够制作要素及其所有元数据（属于它的所有属性）的副本会很有用。用例或多或少是，“我刚刚制作了这个功能并给了它一堆属性，现在我想要同样的东西......但是在那里。” 因此，这两个特征之间的唯一区别是它们的几何形状。

## 解决方案#1：让客户去做。

我的第一个想法是让客户去做。在新位置创建具有相同名称的新要素，然后遍历源要素上的所有属性，发出`POST`请求以在新要素上复制它们。然而，这存在一些问题。首先，它不是原子的。如果在此过程中客户端的 Internet 连接中断，您将得到一个不完整的副本，这是蹩脚的。其次，它可能会很慢，尤其是对于具有许多属性的功能。无论如何，这是一个坏主意。

## 解决方案 #2：向 API 添加复制功能。

在单个 API 调用中执行复制服务器端将是更好的方法。这导致我[https://www.rfc-editor.org/rfc/rfc2518#section-8.8](https://www.rfc-editor.org/rfc/rfc2518#section-8.8)和`COPY`方法。能够在单个`COPY /api/feature/5`请求中对功能进行深度复制似乎很理想。

# 问题

我的问题，在这里，是`COPY`不太适合我设想的用途的语义。对资源发出`COPY`请求会将该资源的副本执行到`Destination`标头中指定的目标。根据 RFC，`Destination`必须存在，并且它必须是一个 URI，指定复制的资源将在哪里结束。在我的例子中，复制特征的目的地是一个几何图形，它绝对不是一个 URI。

所以，我的问题是：将几何图形的 json 填充到请求的`Destination`标头中`COPY`会是对规范的歪曲吗？`COPY`在这里使用正确的东西吗？如果没有，有什么替代方案？我只是想确保我以最符合 HTTP-kosher 的方式实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:01:00.073

那么，您将需要一种方法*使*Destination 成为 URI（为什么这是一个问题）。如果您将 Destination 标头字段用于其他内容，则您没有按照规范使用 COPY。（顺便说一句，当前的规范是 RFC 4918）

# .net - 如何使用 DotNetOpenAuth 检索谷歌用户的个人资料信息

> ID：11661406
> 
> 赞同：0
> 
> 时间：2012-07-26T02:18:51.503
> 
> 标签：.net

以下是我使用的代码：

```
// Retrieve the user's profile information
MessageReceivingEndpoint GetProfileEndpoint = new MessageReceivingEndpoint("https://apps- apis.google.com/a/feeds/user/#readonly", HttpDeliveryMethods.GetRequest);
var request = google.PrepareAuthorizedRequest(GetProfileEndpoint, accessToken);
var response = request.GetResponse(); 
```

从上面的代码我得到了错误的请求错误。任何指向此问题的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T06:53:41.293

它可能是您的带有空格的 URL 吗？ [https://apps-SPACE-apis.google.com/a/feeds/user/#readonly](https://apps-SPACE-apis.google.com/a/feeds/user/#readonly) 应该是： [https ://apps-apis.google.com/a/feeds/user/#readonly](https://apps-apis.google.com/a/feeds/user/#readonly)

# javascript - jQuery：如何将正则表达式匹配的纯文本包装在锚标记中？

> ID：11661408
> 
> 赞同：5
> 
> 时间：2012-07-26T02:19:11.147
> 
> 标签：javascript, jquery, html, regex

假设我有一个看起来像这样的 HTML 页面：

```
<html><body>
00123
<input value="00123">
00456
</body></html> 
```

我想使用 javascript/jQuery 让它看起来像这样：

```
<html><body>
<a href="#00123">00123</a>
<input value="00123">
<a href="#00456">00456</a>
</body></html> 
```

本质上，我想用 HTML 锚标记将正则表达式匹配的纯字符串包装在文档中。在这个例子中，我想做一些类似的事情：

```
$('body').html($('body').html().replace(/(00\d+)/, '<a href="#$1">$1</a>')); 
```

请参阅带有此示例的 jsFiddle：http: [//jsfiddle.net/NATnr/2/](http://jsfiddle.net/NATnr/2/)

这个解决方案的问题是`input`元素内的文本被匹配和替换。

有谁知道如何使用 javascript/jQuery 以这种方式仅匹配和替换文档中的纯文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T02:35:47.637

尝试按[nodeType](https://developer.mozilla.org/en/nodeType)[过滤](http://api.jquery.com/filter/)`body`'s[`contents()`](http://api.jquery.com/contents/)以仅获取文本节点，然后用 jQuery 生成的锚元素替换它们（这些节点中的任何额外文本都将保留为文本节点）：

```
$('body').contents().filter(function() {
    return this.nodeType === 3;
}).each(function() {
    $(this).replaceWith($(this).text().replace(/(00\d+)/g, '<a href="#$1">$1</a>'));
}); 
```

## [**小提琴**](http://jsfiddle.net/ult_combo/NATnr/4/)

如您所知，通常使用 Regex 解析 HTML 不是一个好主意（注意[ponies](https://stackoverflow.com/a/1732454/1331430)，它们是邪恶的），但是如果您将要解析的 HTML 的一部分隔离出来并且它遵循相对简单的模式，它是一个可行的选择。

**编辑：**在您的正则表达式中包含`g`标志（[全局修饰符](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/#Parameters)）以允许在单个文本节点内匹配多个锚点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T03:54:42.877

最终的解决方案最终看起来像这样：

```
jQuery.fn.linker = function () {
    $(this).contents()
        .filter(function() { return this.nodeType != Node.TEXT_NODE; })
        .each(function () { $(this).linker(); });
    $(this).contents()
        .filter(function() { return this.nodeType == Node.TEXT_NODE; })
        .each(function () {
            $(this).replaceWith(
                $(this).text().replace(/(00\d+)/g, '<a href="#$1">$1</a>')
            );
        });
}
$(document).ready(function () {
    $('body').linker();
}); 
```

在此处查看 jsFiddle：http: [//jsfiddle.net/fr4AL/4/](http://jsfiddle.net/fr4AL/4/)

谢谢：

*   [法布里西奥的回答](https://stackoverflow.com/questions/11661408/jquery-how-to-wrap-regex-matched-plain-text-in-an-anchor-tag/11661508#11661508)
*   [如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)
*   [http://api.jquery.com/wrap/](http://api.jquery.com/wrap/)
*   [http://api.jquery.com/contents/](http://api.jquery.com/contents/)
*   [将 HTML 字符串转换为 DOM 元素？](https://stackoverflow.com/questions/3103962/converting-html-string-into-dom-elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T02:31:19.457

这来自bobince对问题的相关回答：

> 你不想用正则表达式处理 HTML 是对的。分配大量 .html(); 也是一个坏消息；除了序列化和重新解析大量 HTML 的性能缺陷之外，您还会丢失不可序列化的数据，例如事件侦听器、表单数据和 JS 属性/引用。
> 
> 这是一个简单的 JavaScript/DOM，它允许匹配 RegExp 模式。jQuery 在这里并没有真正给你太多帮助，因为选择器只能选择元素，而 ':contains' 选择器是递归的，所以对我们来说不太有用。

```
// Find text in descendents of an element, in reverse document order
// pattern must be a regexp with global flag
//
function findText(element, pattern, callback) {
    for (var childi= element.childNodes.length; childi-->0;) {
        var child= element.childNodes[childi];
        if (child.nodeType==1) {
            findText(child, pattern, callback);
        } else if (child.nodeType==3) {
            var matches= [];
            var match;
            while (match= pattern.exec(child.data))
                matches.push(match);
            for (var i= matches.length; i-->0;)
                callback.call(window, child, matches[i]);
        }
    }
}

findText(document.body, /\bBuyNow\b/g, function(node, match) {
    var span= document.createElement('span');
    span.className= 'highlight';
    node.splitText(match.index+6);
    span.appendChild(node.splitText(match.index+3));
    node.parentNode.insertBefore(span, node.nextSibling);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T02:41:30.237

试一试……干净多了！;)

```
$('input').each(function() {
    var temp;
       temp = $(this).val();
       $(this).before('<a href="#' + temp +'">' +temp+ '</a>');
});
$('body').contents().filter(function() {return this.nodeType == 3;}).remove(); 
```

# mysql - Wordpress 将自定义 wp_users 字段移动到 wp_userneta

> ID：11661409
> 
> 赞同：0
> 
> 时间：2012-07-26T02:19:13.657
> 
> 标签：mysql, wordpress

很久以前，我有一个开发人员在用户注册页面上设置了一个额外的字段。我不确定他到底是如何做到的，但我现在在**wp_users**表中有一个额外的列，名为“ **hear_from** ”。我想将此列中的数据移动到**wp_usermeta**表中。

将现有数据从**wp_users**移动到**wp_usermeta**的 sql 命令是什么（匹配 id 与 id）？

棘手的部分是我最初并没有开始使用这个字段，所以我的许多第一个用户都有 NULL 而不是一个值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T10:20:50.433

在一个 php 文件中编写以下代码并在您网站的根位置运行它..

```
include 'wp-load.php';
$qry = "SELECT * FROM wp_users";
$res = $wpdb->get_results($qry, ARRAY_A);
foreach($res as $key=>$val){
$user_id = $val['ID'];
$hear_from = $val['hear_from'];
$wpdb->query("INSERT INTO `wp_usermeta` (
`umeta_id` ,
`user_id` ,
`meta_key` ,
`meta_value`
)
VALUES (
NULL , '$user_id', 'hear_from', '$hear_from'
);
");
} 
```

# django - django - 在数据库中上传数据后模板键错误

> ID：11661413
> 
> 赞同：0
> 
> 时间：2012-07-26T02:19:48.500
> 
> 标签：django, django-admin, django-templates

我刚刚将 57,000 条记录导入到 MySql 数据库中，当我进入管理员并单击与记录对应的模型时，我在下面得到了这个混乱。有任何想法吗？

/admin/donate/donor/ 处的 KeyError

10

模板渲染时出错在模板/Users/user/Development/project/project/templates/admin/donate/donor/change_list.html，第98行出错

```
 {% block result_list %}
97            {% if action_form and actions_on_top and cl.full_result_count %}{% admin_actions %}{% endif %}
98            {% result_list cl %} ##THIS IS THROWING THE ERROR
99            {% if action_form and actions_on_bottom and cl.full_result_count %}{% admin_actions %}{% endif %}
100       {% endblock %} 
```

在底部的回溯中，我得到了这个：

{真：'是'，假：'否'，无：'未知'}[field_val]）

本地变量：field_val 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:43:32.937

结果是一个布尔字段输入了 1 或 0 的数据。

我将它们全部更改为 0 和 bam，工作。本地变量：field_val 10 告诉我无效数字“10”正在引发错误

# iphone - 如何使用 CGContext 模糊线条的边缘

> ID：11661416
> 
> 赞同：-3
> 
> 时间：2012-07-26T02:20:10.700
> 
> 标签：iphone, ios, xcode, ipad

我正在使用 CGContext 绘制线条，但我想让它的边缘模糊。我检查了阴影，但在阴影中，线条的边缘并不柔软和光滑。请告诉我我该怎么做才能使线条的边缘模糊。

这是[代码链接](https://github.com/levinunnink/Smooth-Line-View)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:27:54.880

我不完全确定模糊线条的“边缘”是什么意思，但你可以尝试先用更大的线宽绘制相同的路径，然后用逐渐变细和变暗的线来绘制路径。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T05:10:09.683

画线的其他方式..我希望这对画线和增加线宽很有用...

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
    {
        //// DRAW LINE....

           UIView *lineView = [[[UIView alloc] initWithFrame:CGRectMake(10, 30, cell.contentView.bounds.size.width, 3)] autorelease];

           //Replece the 3 and put the 5 for Increse the line Width

            lineView.backgroundColor = [UIColor redColor];
            lineView.autoresizingMask = 0x5f;
        [cell.contentView addSubview:lineView];
            } 
```

# jquery - Jquery/firefox - 动画 div + 显示 p 选择文本 p？

> ID：11661421
> 
> 赞同：0
> 
> 时间：2012-07-26T02:20:49.167
> 
> 标签：jquery, firefox, jquery-animate

我没有找到任何有同样问题的人，这真的很奇怪。

解释起来并不简单，所以我给你下面的链接稍微解释一下。

首先，这是我的代码：

```
<script type="text/javascript">
var close_feedback_box = function(){
    $jquery('div#feedback').removeClass('feedback_bigger').animate({
    top:'200px',width:'28px',height:'106px'}).find('p').hide();
    $jquery('div#close_feedback_box').hide('fast'); 
}
$jquery(document).ready(function(){
    $jquery('div#feedback a').hover(function(){
    $jquery(this).addClass('hover');},function(){
            $jquery(this).removeClass('hover');
    });
    $jquery('div#feedback').click(function(){
    if(!$jquery(this).hasClass('feedback_bigger')){
    $jquery(this).addClass('feedback_bigger').animate({
            top:'147px',width:'300px',height:'212px'
    },function(){
            $jquery('div#feedback p').show()});
            $jquery('div#close_feedback_box').fadeIn('slow');
    }
    });
});
</script>

<!-- feedback -->
<div id="close_feedback_box" onclick="close_feedback_box();"></div>
<div id="feedback" style="">
<p style="margin-top:30px;display:none;">You can take a few minutes to help us
     improve user experience
    <br/>and<br/><a id="">fill out our survey</a><br/>or<br/>
<a href="/index.php?option=com_jumi&fileid=11" id="">submit a direct feedback
    </a></p></div><!-- end feedback --> 
```

它在所有浏览器中都运行良好，但只要看看 Firefox，你就会明白我的问题，事实上，当显示 p 块时，它会选择所有文本，我真的不明白为什么。我试图将 p 块放在内部反馈 div 中（并显示 div），但它并没有改变任何东西。

您会在这里找到错误（仅在 Firefox 中）：[https](https://execboardinasia.com/) : //execboardinasia.com/（单击左侧固定位置的反馈“按钮”）。

非常感谢您为我花费了一点时间！

巴斯蒂安·桑德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:14:12.917

解决方法尝试添加

```
var select = window.getSelection();
select.removeAllRanges(); 
```

在您的 click() 结束时

这应该取消选择文本...

# java - JOD转换器问题

> ID：11661422
> 
> 赞同：1
> 
> 时间：2012-07-26T02:21:00.550
> 
> 标签：java, sockets, netbeans, japplet, jodconverter

我正在使用 JODConverter 库 V 3.0 Beta 4 和 Open Office 3.4 并尝试将一些文件转换为 PDF/A-1 格式。然而，在办公室经理进程启动后，它只是挂起，没有任何反应。这是输出：

```
Jul 26, 2012 12:04:03 PM org.artofsolving.jodconverter.office.ProcessPoolOfficeManager <init>
INFO: ProcessManager implementation is PureJavaProcessManager

C:\Users\Chris\AppData\Local\Temp\ArFile\PDF\blah.pdf : C:\Users\Chris\Documents\blah.txt

Jul 26, 2012 12:04:04 PM org.artofsolving.jodconverter.office.OfficeProcess start
INFO: starting process with acceptString 'socket,host=127.0.0.1,port=2002,tcpNoDelay=1' and profileDir 'C:\Users\Chris\AppData\Local\Temp\.jodconverter_socket_host-127.0.0.1_port-2002'
Jul 26, 2012 12:04:04 PM org.artofsolving.jodconverter.office.OfficeProcess start
INFO: started process 
```

中间的行是打印输出文件名和输入文件名的输出，用冒号分隔，你可以看到它们是有效值......

这是我的转换器类：

```
package com.allcare.arfile;

import com.sun.star.beans.PropertyValue;
import java.io.File;
import java.util.HashMap;
import java.util.Map;
import org.artofsolving.jodconverter.OfficeDocumentConverter;
import org.artofsolving.jodconverter.document.DocumentFamily;
import org.artofsolving.jodconverter.document.DocumentFormat;
import org.artofsolving.jodconverter.office.DefaultOfficeManagerConfiguration;
import org.artofsolving.jodconverter.office.OfficeManager;

public class FileConverter 
{
OfficeManager officeManager;
String tempFilePath;

public FileConverter() 
{
    officeManager = new DefaultOfficeManagerConfiguration()
            //.setRetryTimeout(30000L)
            //.setTaskExecutionTimeout(60000L)
            .buildOfficeManager();
    tempFilePath = System.getProperty("java.io.tmpdir") + "\\ArFile\\PDF\\";
}

// if possible this function converts a file to a PDF/A-1 compliant file
public File convertToPdf(File inputFile, Log logger, User user)
{        
    if (isConvertableToPDF(inputFile.getName())) // REMEMBER TO CHANGE THE IF STATEMENT IN THE createMetadata() section to reflect this 
    {
        new File(tempFilePath).mkdirs();
        String filename = inputFile.getName();
        filename = filename.substring(0, filename.lastIndexOf("."));

        File outputFile = new File(tempFilePath + filename + ".pdf");

        System.out.println(outputFile + " : " + inputFile);

        officeManager.start(); // may tweak the start and stop code to appear elsewhere for additional efficiency

        DocumentFormat docFormat = new DocumentFormat("Portable Document Format", "pdf", "application/pdf");
        Map map = new HashMap();
        map.put("FilterName", "writer_pdf_Export");
        PropertyValue[] aFilterData = new PropertyValue[1];
        aFilterData[0] = new PropertyValue();
        aFilterData[0].Name = "SelectPdfVersion";
        aFilterData[0].Value = 1;
        map.put("FilterData", aFilterData);
        docFormat.setStoreProperties(DocumentFamily.TEXT, map);

        OfficeDocumentConverter docConverter = new OfficeDocumentConverter(officeManager);
        docConverter.convert(inputFile, outputFile, docFormat);

        officeManager.stop();

        return outputFile;
    }

    return inputFile;
}

// returns true if the file format is known to be convertible into the PDF/A-1 format
public boolean isConvertableToPDF(String filename)
{
    if (filename.endsWith(".doc") || filename.endsWith(".txt") || filename.endsWith(".xls") 
            || filename.endsWith(".ppt") || filename.endsWith(".docx"))
    {
        return true;
    }

    return false;
}

} 
```

我正在使用 java 套接字，在我使用套接字之前，转换器工作得很好，但是在我更改为套接字之后它开始挂起。我不知道为什么...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:21:29.973

问题可能在这里：

```
officeManager.start(); // may tweak the start and stop code ... 
```

如果代码正在等待启动的进程完成，它可能会等到您终止 OpenOffice 服务，之后它会使程序的其余部分失败。确保在后台服务中启动该服务，以便主程序可以继续。或者手动启动 OpenOffice 服务器（在您的程序之外）。不要`waitFor()`因为服务永远不会结束。

你的`System.out.println()`上面确实被打印了，所以到那里它仍然有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T03:40:51.903

重启电脑后问题自行解决，我不知道为什么....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:23:05.770

我们一直在开发一个具有即时转换功能的项目，我们也偶然发现了这个奇怪的问题。解决方案是使用 sigar 进程管理器而不是纯 java 进程管理器。它更加健壮和一致，但它需要本地库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T23:52:25.703

Seems like it was a issue with your port you selected, I know I have ran across funky stuff like that using java socket objects.

# xsd - XSD keyref 或数字文字

> ID：11661425
> 
> 赞同：1
> 
> 时间：2012-07-26T02:21:48.413
> 
> 标签：xsd

是否可以定义一个可以是 keyref 或数字文字的类型？就像在任何类型化的编程语言中一样，您可以将数字文字或另一个变量的名称分配给数字变量。我正在创建一个模式来定义绘图 api 元素（用于另一种编程语言），并且想定义一个`color`类型，它可以是十六进制文字（例如`0xFF0000`亮红色），也可以是对其他地方定义的颜色的引用。所以你可以（在 XML 文档中）：

```
<color key="dialogBorder1">0x222222</color>
<color key="dialogFill1">0xCCCCCC</color>

<!-- later... -->
<windowTheme name="warningWindow">
  <border>
    <color>0xFF0000</color> <!-- defined literally -->
  </border>
  <fill>
    <solid>
      <color>dialogFill1</color>  <!-- defined by keyref -->
    </solid>
  </fill>
</windowTheme> 
```

如果可以`choice`对属性施加限制，我可以执行以下操作，但我的印象是当前（1.0）版本的 XSD 规范是不可能的。

```
<!-- I wish: -->
<xs:complexType name="colorType" >
  <xs:attrchoice>
    <xs:attribute name="value" type="HexLiteral" /> <!-- literal -->
    <xs:attribute name="ref" type="xs:string" />    <!-- keyref (defined elsewhere) -->
  </xs:attrchoice>
</xs:complexType> 
```

这将允许*lieral*`value`或keyref `ref`：

```
<color value="0xFF0000" />     <!-- OK -->
<color ref="dialogBorder1" />  <!-- OK --> 
```

但不是两者兼而有之：

```
<color value="0xFF0000" ref="colorXYZ" /> <!-- NOT OK --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T19:34:31.620

该帖子与描述的内容有些不一致。第一个 XML 显示不带属性使用的颜色，然后 xsd for`colorType`带有一些属性。我假设 XML 是您想要的。

所以以下适用于：

*定义一种颜色类型，它可以是十六进制文字（例如 0xFF0000 表示鲜红色），也可以是对其他地方定义的颜色的引用*

```
 <xsd:simpleType name="ColorHex">
        <xsd:union memberTypes="xsd:string">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:pattern value="0x[0-9a-fA-F]{6}"/>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:union>
    </xsd:simpleType> 
```

上面使用了与 XHTML 中的类型相同的模式`Color`（我展示这个是为了给你灵感来源）：

```
 <!-- sixteen color names or RGB color expression-->
    <xsd:simpleType name="Color">
        <xsd:union memberTypes="xsd:NMTOKEN">
            <xsd:simpleType>
                <xsd:restriction base="xsd:token">
                    <xsd:pattern value="#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?"/>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:union>
    </xsd:simpleType> 
```

这里的想法是使用联合。不利的一面可能是，由于所有不匹配 HEX 模式的内容都将被字符串匹配，无效的 HEX 语法（例如缺少数字）将作为引用传递。

其他缺点可能在于您所针对的编程语言对 xsd:union 的支持程度。

# mongodb - 保存所有 POST 信息 mongodb

> ID：11661429
> 
> 赞同：1
> 
> 时间：2012-07-26T02:22:56.533
> 
> 标签：mongodb, post

我在将所有 POST 字段保存到 MongoDB 时遇到了一个小问题

```
function savedata($data){
        $collection = $this->db->retail_logs;
        $this->data = json_decode($data);

        try {
        $collection->update(
            array("tradingname"=>$this->data['tradingname']),
            $this->data, "date"=> date("d.m.Y"), "time"=>date("H:i:s"),"whochanged"=>$_COOKIE['CRMUIDkey']), // new lead document to insert
            array("upsert" => true, "safe" => true)
            );
        } catch (Exception $e) {
            // Something went wrong .. 
        }
    } 
```

对于某些原因，包含 $_POST 的 $this->data 不想去那里我得到这个错误

```
Warning: json_decode() expects parameter 1 to be string, array given in /home/crmvip/public_html/system/db/mongo.php on line 294

Warning: MongoCollection::update() expects at most 3 parameters, 4 given in /home/crmvip/public_html/system/db/mongo.php on line 302 
```

它会发送应有的 POST 信息`tradingname=monkey&street=abc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:20:07.767

[json_decode](http://php.net/manual/en/function.json-decode.php)用于解码 JSON。

如果您只想保存`data`通过 POST 请求收到的值：

```
 $this->data = $_POST['data']; 
```

# ruby - 在 yaml 配置期间，cygwin 上的 rvm install 1.9.3 挂起

> ID：11661430
> 
> 赞同：2
> 
> 时间：2012-07-26T02:23:13.503
> 
> 标签：ruby, cygwin, rvm

我在 cygwin 上，我已经安装`rvm`了. 现在我运行它产生这个输出： `curl -L [https://get.rvm.io](https://get.rvm.io) | bash -s stable --ruby``rvm install 1.9.3`

```
`$ rvm install 1.9.3
Fetching yaml-0.1.4.tar.gz to /cygdrive/d/usr/root/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /cygdrive/d/usr/root/.rvm/src
Configuring yaml in /cygdrive/d/usr/root/.rvm/src/yaml-0.1.4.` 
```

`之后它只是挂起（似乎挂起，因为它在那里坐了很长时间）。日志文件包含以下输出： 看起来我的 cygwin 安装不正确。请帮忙。 ````
[2012-07-26 03:10:52
]  ./configure --prefix="/cygdrive/d/usr/root/.rvm/usr"

./configure: line 382:  9000 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:  6448 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:  7648 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:  7944 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:  4116 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:  6348 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:  9548 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:   784 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:  3360 Segmentation fault      expr a : '(a)' > /dev/null 2>&1
./configure.lineno: line 382:  9304 Segmentation fault      expr a : '(a)' > /dev/null 2>&1

`````

# perl - 使用“undef”初始化自记录代码？

> ID：11661432
> 
> 赞同：3
> 
> 时间：2012-07-26T02:23:29.153
> 
> 标签：perl, undef

有时我想写：

```
my $var = shift // undef;    # argument is optional
                             # or

my $var = $val{optional_value} // undef; 
```

表明可以缺少参数，否则`// undef`当然是无用的。

这有多贵，编译器是否对其进行了优化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T03:31:20.830

我敢肯定它不是很贵，但我不得不说

```
my $var = shift // undef; 
```

并不像

```
my $var = shift;    # argument is optional 
```

或者

```
my $var = shift;    # optional; undef if omitted 
```

这两者在运行时肯定（尽管几乎没有）便宜。如果您仍然需要注释（为了清楚起见），那么`// undef`除了不必要的操作码之外，真正添加了什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:08:32.973

回答你的问题：不是和不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:39:47.677

我尝试了一个基准：

```
use strict;
use Benchmark qw(:all);

sub shu
{
    my $x = shift // undef;
    return $x // 0;
}

sub sh
{
    my $x = shift;
    return $x // 0;
}

timethese ( 100_000_000, { shu => \&shu, sh => \&sh } );

# outputs:

# Benchmark: timing 100000000 iterations of sh, shu...
#    sh:  14 wallclock secs (14.95 usr + -0.06 sys = 14.89 CPU) @ 6715916.72/s (n=100000000)
#    shu: 16 wallclock secs (16.74 usr + -0.02 sys = 16.72 CPU) @ 5980861.24/s (n=100000000) 
```

所以结果证实了上面所说的。

# python - 属性错误 - Python

> ID：11661433
> 
> 赞同：0
> 
> 时间：2012-07-26T02:23:32.937
> 
> 标签：python, hashlib

我有以下代码片段

```
thetype = raw_input("Please enter hash type. md5 or sha1")
hash_type = hashlib.thetype(word).hexdigest() 
```

这会返回错误“AttributeError: 'module' object has no attribute 'thetype'” 我有点理解为什么，但我想我真正要问的是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:25:12.877

通过使用字典（您也可以使用`getattr`，但这会引入获取其他不相关属性的可能性）。

```
d = {"md5" : hashlib.md5, "sha1" : hashlib.sha1}
hash_type = raw_input("Please enter hash type. md5 or sha1")
d[hash_type].hexdigest() 
```

此外，`raw_input`已经返回 a `str`，因此无需`str`再次调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:08:54.763

```
import hashlib
thetype = raw_input("Please enter hash type. %r"%(hashlib.algorithms,))
# 2.7 or later... just catch the exception from .new(thetype) for older versions.
if thetype in hashlib.algorithms:
    print hashlib.new(thetype)('some data').hexdigest()
else:
    print "No Way!" 
```

# sql - 如何执行在 CTE 中生成的查询

> ID：11661439
> 
> 赞同：5
> 
> 时间：2012-07-26T02:24:30.000
> 
> 标签：sql, sql-server, common-table-expression

我有一个`SELECT`生成语句的 CTE，但 SQL Server (2012) 不允许调用`EXEC`它。这是查询：

```
DECLARE @guidToFind uniqueidentifier = 'E4069560-091A-4026-B519-104F1C7693B3';

WITH GuidCols (TableName, ColName, Query) As
(
    SELECT  
        C.TABLE_NAME, 
        C.COLUMN_NAME, 
        'SELECT ' + 
             QUOTENAME(C.TABLE_NAME) + '.' + 
             QUOTENAME(C.COLUMN_NAME) + ' 
        FROM ' + 
             QUOTENAME(C.TABLE_NAME) + ' 
        WHERE ' + 
           QUOTENAME(C.COLUMN_NAME) + ' = ''' + cast(@guidToFind AS VARCHAR(50))+
           ''''
    FROM 
        INFORMATION_SCHEMA.COLUMNS C 
        INNER JOIN INFORMATION_SCHEMA.TABLES T 
        ON C.TABLE_NAME = T.TABLE_NAME AND 
           T.TABLE_TYPE = 'BASE TABLE'
    WHERE 
        C.DATA_TYPE = 'uniqueidentifier'
)
-- SELECT * FROM
EXEC( GuidCols.Query ) 
```

`SELECT`如果我在 CTE 之后取消注释该语句，则问题无法解决。

此查询的目的是查找数据库中 GUID 的所有实例。目前我正在使用这样的脚本解决这个[问题](https://gist.github.com/3180402)。但是，我会更乐意在不遍历行、使用集合操作和其他技术的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:14:33.270

您不能将`exec`其用作`CTE`.

来自[WITH common_table_expression (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms175972.aspx)

> CTE 后面必须跟一个引用部分或全部 CTE 列的 SELECT、INSERT、UPDATE 或 DELETE 语句。

您可以做的是将查询的结果存储在临时表中，遍历行并一次执行一条语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:11:07.163

EXEC() 函数可从 T-SQL 获得，但不能从 SQL 语句中访问。我会假设是这种情况，因为 SQL 是分几个步骤执行的……比如：

1.  您的陈述已被解析。
2.  生成执行计划。
3.  针对数据库运行执行计划并返回结果。

EXEC() 函数旨在动态执行语句，因此为了执行您的要求，SQL Server 必须执行前两个步骤，然后在执行语句时，它必须返回到第一个解析/执行动态语句的步骤。这必须为结果中的每一行重复。

我认为这种类型的“功能”不可用，因为它可能会对数据库引擎的性能和复杂性产生不利影响；所以他们让我们执行第一条语句，然后循环遍历每条记录以单独执行动态语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:21:36.080

Exec 执行嵌入在其括号中的 T-SQL 命令。不同之处在于 EXEC() 函数可以执行字符串或字符串变量，正如您在前面的代码中看到的那样。EXEC() 的参数可以是文字字符串，但是当您使用变量时，EXEC() 的真正威力就会显现出来。

它执行包含在变量中的命令，但在与调用函数的会话不同的上下文中。这很重要，因为它引入了一些严格的限制。您创建的任何表都对 EXEC() 上下文可见，但调用会话声明的变量对 EXEC() 上下文不可见，反之亦然。

我在以下位置找到了一篇与此相关的有趣文章：http: [//msdn.microsoft.com/en-us/library/aa175921 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa175921(v=sql.80).aspx)

虽然上面是自给自足的，你也可以通过：http: [//blog.sqlauthority.com/2007/09/13/sql-server-difference-between-exec-and-execute-vs-exec-use-execute-对于-sp-总是/](http://blog.sqlauthority.com/2007/09/13/sql-server-difference-between-exec-and-execute-vs-exec-use-execexecute-for-sp-always/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-17T04:10:13.923

您可以使用 OPENQUERY 而不是 EXEC：

```
SELECT * FROM OPENQUERY (OracleSvr, 'SELECT name FROM joe.titles WHERE name = ''NewTitle'''); 
```

参考：[https ://docs.microsoft.com/en-us/sql/t-sql/functions/openquery-transact-sql?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/t-sql/functions/openquery-transact-sql?view=sql-server-2017)

# python - _.tm_isdst 名称“_”未定义

> ID：11661441
> 
> 赞同：1
> 
> 时间：2012-07-26T02:24:42.250
> 
> 标签：python, time

我是 Python 的初学者。我有一个脚本，我想在其中检查东部时区当前是否处于夏令时：

```
import sys
import os
import time

os.environ['TZ'] = 'America/Toronto'
time.tzset()
time.localtime()
isDST = _.tm_isdst 
```

我收到以下错误：

```
Traceback (most recent call last):
File "./myPythonScript.py", line 20, in <module>
isDST = _.tm_isdst
NameError: name '_' is not defined 
```

如果我打开 python 解释器，我可以一次在脚本代码中输入一行，一切正常。但是当我尝试运行脚本时，我得到了错误。有没有人有任何想法或建议？

我正在运行 Python 2.5.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T02:28:59.130

`time.localtime()`返回一个`time.struct_time`您应该存储在变量中的对象：

```
t = time.localtime() 
```

然后，您可以通过按名称引用它们来查看其属性：

```
isDST = t.tm_isdst 
```

为方便起见，它由交互式解释器`_`自动提供，但在您运行脚本时不提供。

# actionscript-3 - 如何锁定输入字段中的字符

> ID：11661442
> 
> 赞同：1
> 
> 时间：2012-07-26T02:24:49.783
> 
> 标签：actionscript-3, flash

我在 Flash 中有一个输入文本字段，我想在它前面始终保留一个美元符号。通常我会左对齐输入字段并在它旁边有一个“$”，所以它是不可编辑的，但在这种情况下，文本字段必须居中对齐。

我想在每次字段失去焦点时只包含一个在所有文本前面添加“$”的功能 - 但意识到如果前面已经有一个 $ 符号并且它只是继续添加它们，那将是一个问题。

另外-一旦我这样做了，有没有办法从该输入字段中获取不包括“$”的值？例如：某种拼接，拼接第一个字符并抓住其余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:47:11.623

要保留 $：

```
tf.addEventListener( Event.CHANGE, onTextChange );

function onTextChange( e:Event ):void
{
   if ( tf.text.charAt(0) != "$" )
    tf.text = "$" + tf.text;
} 
```

并获取没有第一个字符的文本：

```
var yourText :String = tf.text.substring(1, tf.text.length); 
```

# responsive-design - 如何同时在多个设备上查看/测试响应式设计？

> ID：11661449
> 
> 赞同：1
> 
> 时间：2012-07-26T02:26:24.653
> 
> 标签：responsive-design

有没有办法使用网站并立即查看它在多个设备上的外观？

例如，您有两台显示器，并且您打开了 3 个不同大小的浏览器窗口（PC、平板电脑、手机）。PC 版本是主版本，您在主显示器上使用它，有时在另一台显示器上查看平板电脑和手机版本。您单击 PC 版上的链接并转到新页面，另外两个也这样做。

有什么工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:56:23.390

为了测试响应式网页设计，我使用名为 The Responsinator 的基于 Web 的工具。

您输入 URL 并点击 Go。就这样。

> http://www.responsinator.com/?url=[您的网址]

希望能帮助到你！:)

编辑：

PS：到目前为止，它没有显示任何“错误”结果，但是应该等待客户反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T21:02:21.770

您可以使用[isresponsive.com](http://www.isresponsive.com)在不同的设备上测试您的响应式设计。

# java - 在java中无法读取PIL保存的jpeg字符串

> ID：11661461
> 
> 赞同：2
> 
> 时间：2012-07-26T02:28:18.740
> 
> 标签：java, python, image, jpeg, python-imaging-library

我在 python 服务器上创建了一个 PIL 图像字符串：

```
frame = cv.CaptureFromCAM(0)
image = Image.fromstring('RGB', cv.GetSize(frame), frame.tostring(), 'raw', 'BGR')
buffer = cStringIO.stringIO()
image.save(buffer,'JPEG')
udptransmit(buffer.getvalue()) 
```

我有一个 java 客户端试图读取传输的图像字符串并修改 jpeg。然而，这似乎不起作用。我创建了一个 python 客户端只是为了检查，我可以使用对 pygame 的 load 方法的调用正确地修改 jpeg。从python发送的字符串包含字符6:10 = JFIF，这是正确的格式（也被python的imghdr模块识别。在java中，我试过了

1.  只需将接收到的字符串的字节内容写入文件并使用 .jpeg 扩展名命名即可。该文件不是有效的 jpeg。

2.  `ImageIO`用于从字符串中读取字节。这会产生一个空图像。

3.  试图`ImageReaderByFormat('JPEG')`用这个来获取和解析字节。这给了我一个错误说明' `Image is not a JPEG, starts with 0x...`'

我真的不明白为什么 python 将字符串识别为有效的 jpeg 而 java 没有。两者是否使用不同的 jpeg 解码器？即使他们这样做了，也不应该验证或拒绝字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:26:20.677

刚刚找到问题的解决方案问题出在java中使用的字符集，同时将从我的python服务器发送的字符串转换为java中的字节。这是我的 java 客户端代码中所需的简单修改：

```
Charset charset = Charset.forName("ISO-8859-1");
Byte[] bytes: Array[Byte] = cam_data.getBytes(charset)
File f = new File("image.jpeg")
FileImageOutputStream fios = new FileImageOutputStream(f)
BufferedImage  bim = ImageIO.read(new ByteArrayInputStream(bytes))
ImageIO.write(bim,"jpeg",fios) 
```

引导我找到答案的有用链接是[http://www.java-forums.org/advanced-java/50516-reading-image-files-into-strings.html](http://www.java-forums.org/advanced-java/50516-reading-image-files-into-strings.html)

# open-source - 如果我将开源软件用于完全不同的用途，我必须披露什么以及何时披露？

> ID：11661462
> 
> 赞同：-1
> 
> 时间：2012-07-26T02:28:29.043
> 
> 标签：open-source, licensing

如果我制作了一个（如果重要的话是基于网络的）游戏并从开源库存程序中获得其中的库存部分，我应该披露什么？

我会说第 X 部分来自开源，或者我只是“破解”了库存系统并将我的游戏作为前端。

我只是不知道我把它放在我的网站上，还是等到有人问？这是否意味着我的部分软件也是开源的？我应该做些什么？

我不知道怎么问。我想做正确的事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T02:33:05.703

这取决于开源清单程序所依据的许可证。你有没有调查过？

这是开始比较的好地方： [http ://en.wikipedia.org/wiki/Comparison_of_free_software_licenses](http://en.wikipedia.org/wiki/Comparison_of_free_software_licenses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:30:03.510

你的问题没有问太多具体的问题。一般的答案是：视情况而定。

这取决于什么，你可能会问自己。这取决于您使用的软件的使用条款。

到目前为止，您只分享了该软件是“开源”的。这个词不多说了。这可能意味着您指的是 OSI 认证的 Opensource ^(tm)许可证，但是，您编写的“开源”可能是一个不同的术语。可能你从 github 中挑选了一些东西（比较：[我可以在没有指定许可证的 Github 项目中使用代码吗？](https://stackoverflow.com/q/5521080/367456)）？

因此，除非您不分享您谈论的哪种许可证，否则可以说：

*   如果它是一个宽松的自由软件许可证，您的代码通常可以保留在它自己的许可证下。
*   如果它是 copyleft 自由软件许可证，您的代码通常是在同一许可证下获得许可的。
*   如果是折衷许可，则取决于工作类型和交互/派生/使用/打包方式。

无论如何，它总是取决于

1.  所有相关作品的具体许可。
2.  工作的具体类型以及将其与您的工作相结合的方式。
3.  如果您打算遵守许可或者您想利用它。

您没有详细说明两者，因此无法给出更好的建议。还要注意IANAL，这只是外行的一些个人意见。

不要等到有人做某事。你应该是找出答案的主动方。最好联系该组件的原始作者，告诉她你想用它做什么，并将你从她那里得到的书面津贴和你的记录一起保存。特别是当你不确定时。并且原作者有足够的权力让你即使在公共可见许可证之外的东西。

# iphone - 如何在iphone中设置应用程序在后台运行？

> ID：11661464
> 
> 赞同：0
> 
> 时间：2012-07-26T02:28:36.113
> 
> 标签：iphone, background

如何在iphone中设置应用程序在后台运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:03:03.427

在您的应用程序被引导到后台后，您可以在有限的时间内执行任务，但仅限于提供的持续时间。运行时间超过此时间将导致您的应用程序终止。请参阅iOS 应用程序编程指南的“[在后台完成长时间运行的任务](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH5-SW6)”部分以了解如何进行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:40:06.790

参考以下代码。

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
     UIApplication* app = [UIApplication sharedApplication];

    //Create a task object
    __block UIBackgroundTaskIdentifier backgroundTask;

    backgroundTask = [app beginBackgroundTaskWithExpirationHandler:^{
        dispatch_async(dispatch_get_main_queue(), ^{
            if (backgroundTask != UIBackgroundTaskInvalid) {
                [app endBackgroundTask:backgroundTask];
                backgroundTask = UIBackgroundTaskInvalid;
            }
        });
    }];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            if (backgroundTask != UIBackgroundTaskInvalid) {

                // do stuff              

                [app endBackgroundTask:backgroundTask];
                backgroundTask = UIBackgroundTaskInvalid;
            }
        });
    });
} 
```

# css - 如何向 h:panelGrid 添加样式

> ID：11661465
> 
> 赞同：0
> 
> 时间：2012-07-26T02:28:42.103
> 
> 标签：css, jsf-2

我有一个包含两列的面板网格，我想将右列文本居中对齐，左列文本居左对齐。

我尝试一遍又一遍地玩它，但它仍然无法正常工作

```
<pe:layoutPane position="south" resizable="false" closable="false" statusbar="true" spacing="0">
                <h:panelGrid columns="2" styleClass="left,centered" width="100%">
                    <h:outputText value="DEV"/>
                    <h:panelGroup>
                        <h:outputText value="Developed by "/>
                        <h:outputLink id="link1" value="mailto:to@mm.com" >
                            <h:outputText value="text" style="text-decoration:underline"/>
                        </h:outputLink>
                    </h:panelGroup>
                </p:panelGrid>
            </pe:layoutPane> 
```

这是CSS：

```
 .centered  {
 margin: 0px auto;
text-align: center;
 }

.left {
float: left;   
} 
```

知道如何存档此布局吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:56:09.457

你应该更好地使用

```
<h:panelGrid columns="2" columnClasses="left,centered">
...
</h:panelGrid> 
```

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:24:26.013

我找到了解决方案:)

```
 <center>
                    <h:outputText value="DEV" style="float: left" styleClass="footer"/>
                    <h:outputText value="xxxxxxx" styleClass="footer"/>
                    <h:outputLink id="link1" value="mailto:xxxx@xxxx" styleClass="footer">
                        <h:outputText value="xxx" style="text-decoration:underline" styleClass="footer"/>
                    </h:outputLink>
                </center> 
```

# javascript - jquery淡入淡出问题

> ID：11661468
> 
> 赞同：0
> 
> 时间：2012-07-26T02:29:05.633
> 
> 标签：javascript, jquery

这是我正在处理的页面：http: [//dsa.dartmouth.edu/](http://dsa.dartmouth.edu/)。幻灯片下方是四个可在悬停时更改颜色的面板。背景颜色效果很好，但标题颜色在变白后永远不会变回深色。下面是控制这个的javascript - 我怎样才能让h2文本在推出时变回深色？

```
$featured_control_item.hover( function(){
        if ( ! $(this).hasClass('active-slide') ){
            $(this).find('.et_slide_hover').css({'display':'block','opacity':'0'}).stop(true,true).animate( { 'opacity' : '1' }, featured_controllers_opacity_speed );
            $(this).find('.controller').find('h2').css({'color':'white'}).stop(true,true).animate( { 'color' : '#656464' }, featured_controllers_opacity_speed );
        }}, function(){
        $(this).find('.et_slide_hover').stop(true,true).animate( { 'opacity' : '0' }, featured_controllers_opacity_speed );
        $(this).find('.controller').find('h2').stop(true,true).animate( { 'color' : '#656464' }, featured_controllers_opacity_speed );
    } ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:43:29.173

您的问题是[jQuery 动画](http://api.jquery.com/animate/)功能不允许动画颜色。您将不得不为此使用单独的插件。

> 所有动画属性都应动画为单个数值，除非以下说明；**大多数非数字属性无法使用基本的 jQuery 功能进行动画处理**（例如，宽度、高度或左侧可以设置动画，但背景颜色不能设置，除非使用 [jQuery.Color()](https://github.com/jquery/jquery-color)插件）。除非另有说明，否则属性值被视为像素数。可以在适用的情况下指定单位 em 和 %。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:47:15.647

您无法为颜色变化设置动画，因此可以尝试：

```
$featured_control_item.hover(function(){
  if (!$(this).hasClass('active-slide'))
  {
    $(this).find('.et_slide_hover').css({'display':'block','opacity':'0'}).stop(true,true).animate({'opacity' : '1'}, featured_controllers_opacity_speed);
    $(this).find('.controller').find('h2').stop(true,true).css({'color' : 'white'});
  }}, function(){
    $(this).find('.et_slide_hover').stop(true,true).animate( { 'opacity' : '0' }, featured_controllers_opacity_speed);
    $(this).find('.controller').find('h2').stop(true,true).css({'color' : '#656464'});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T02:43:14.010

[除非你也包含jQuery UI](http://jqueryui.com/) ，否则jQuery`.animate()`不会做颜色。所以下载并包含 jQueryUI JS 文件（在 jquery.js 之后包含它），或者将您的代码更改为仅使用.`.css()`

# asp.net - TeamCity 构建任务以自动启动 ASP.NET 网站

> ID：11661469
> 
> 赞同：3
> 
> 时间：2012-07-26T02:29:14.467
> 
> 标签：asp.net, iis-7, msbuild, teamcity, global-asax

我已将 TeamCity 设置为我的 CI 解决方案，用于构建、打包和部署（通过 MSBuild/Web 部署）我的 ASP.NET MVC 3 Web 应用程序。

效果很好。

但是，`Application_Start`对于我的应用程序，我会执行各种启动活动，例如预热缓存。

我想添加一个 TeamCity 构建任务（部署后）以某种方式调用此方法（因此第一个手动用户请求不会等待）。

唯一想到的是使用 powershell 脚本基本上 ping/wget 网站。

有没有更好的解决方案——也许是 MSBuild 部署任务的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:47:05.350

使用一个简单的 powershell 脚本，作为 TeamCity 构建步骤：

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx#CommunityContent)

```
# webclient.ps1
# Web client sample recoded in PowerShell
# Converted from MSDN C# Sample
# Thomas Lee  - tfl@psp.co.uk

# get a web page (author's blog)
$client = new-object system.net.WebClient
$client.Headers.Add("user-agent", "PowerShell")
$data = $client.OpenRead("http://www.mywebsite.com/")
$reader = new-object system.io.StreamReader $data
[string] $s = $reader.ReadToEnd()
# display output
"The returned document is {0} bytes" -f $s.length.tostring("###,###,##0")

# close
$data.Close()
$reader.Close() 
```

# sql - NamedQuery 不返回任何内容

> ID：11661471
> 
> 赞同：2
> 
> 时间：2012-07-26T02:29:50.903
> 
> 标签：sql, eclipse, jpa, eclipselink, named-query

我在我的实体类中写了一个命名查询为@NamedQuery(name="Place.findByPlaceCode", query="select p from Place p where p.Code = :placeCode")

我使用以下命令执行命名查询：

```
List<Country> result = getEntityManager()
            .createNamedQuery("Place.findByPlaceCode")
            .setParameter("placeCode", placeCode)
            .getResultList();       
return processResult(result); 
```

但是，它什么也没返回。

如果我在数据库中编写 SQL 查询，它运行良好，但这个 namedQuery 不起作用。我尝试手动将参数设置为值“Beach”，还尝试“Beach”检查是否是导致问题的空格，但没有任何区别。我应该如何检查此查询返回的值？

# post - XDomainRequest 在发送 POST 请求时没有内容类型

> ID：11661475
> 
> 赞同：4
> 
> 时间：2012-07-26T02:30:15.697
> 
> 标签：post, content-type, xdomainrequest

我正在处理一些跨域 ajax 请求。我使用 XDomainRequest 在 IE8 和 IE9 中发送请求。目前，它适用于 Get 请求，但不适用于 Post 请求。当我使用 Fiddle 捕获请求时，我发现 Post 请求没有 Content-Type 标头。有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:48:43.940

不幸的是，看起来他们搞砸了并遗漏了它。我有同样的问题。

据此，无法设置 Content-Type 标头，我自己[也](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)没有找到方法。您会看到他们实际上通过稍后的错误修复使其变得更糟。由于 XDomainRequest 在 IE10 中已被弃用，因此使用 CORS 的正确 XMLHttpRequest 对象我怀疑永远不会有修复。

如果您找到解决问题的方法，请回复并让全世界知道。这使我无法使用 Amazon S3 POST 上传头像。

# java - 使用 Eclipse 分发 Java 程序

> ID：11661479
> 
> 赞同：1
> 
> 时间：2012-07-26T02:30:51.073
> 
> 标签：java, eclipse, jar, distribute

嗨，我用 eclipse 做了一个小程序，我想把它发送到另一台朋友的电脑上，这样他们也可以使用这个程序。我在互联网上找到了一个简单的教程： [如何分发在 Eclipse 中构建的 java 项目？](https://stackoverflow.com/questions/2332434/how-to-distribute-java-project-built-in-eclipse) 伙计们的解决方案是：

> 您可以右键单击项目，选择导出并选择 Java，然后选择 JAR 作为格式。

但是，当我这样做并尝试将其发送到朋友的计算机时，他们收到了此错误：

> 找不到主类：pisavior.PISavior 程序现在将退出。

我尝试将其导出为可运行的 jar 文件和普通的 jar 文件。都没有奏效。我认为问题可能出在我的主要课程上？也许它没有被阅读？或者可能没有发送库？任何人都可以给我一些方向吗？非常感激！

这是我的代码，有点长...

```
 import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class PISavior implements MouseListener {

    Random random = new Random();
    private static int amount; 
    private static int editLine;

    private static String locations[];
    private static String usernames[];
    private static String passwords[];

    private final char LOWERCASE[] = 
    {
        'a', 'b', 'c', 'd', 'e',
        'f', 'g', 'h', 'i', 'j',
        'k', 'l', 'm', 'n', 'o',
        'p', 'q', 'r', 's', 't',
        'u', 'v', 'w', 'x', 'y', 
        'z'
    };
    private final char UPPERCASE[] = 
    {
        'A', 'B', 'C', 'D', 'E',
        'F', 'G', 'H', 'I', 'J',
        'K', 'L', 'M', 'N', 'O',
        'P', 'Q', 'R', 'S', 'T',
        'U', 'V', 'W', 'X', 'Y', 
        'Z'
    };
    private final char NUMBERS[] =
    {
        '0', '1', '2', '3', '4',
        '5', '6', '7', '8', '9'
    };

    private static volatile boolean edit = false;

    JFrame frame = new JFrame();
    JPanel panel = new JPanel();

    JCheckBox jcb_Integers = new JCheckBox("Integers");
    JCheckBox jcb_Capitals = new JCheckBox("Capitals");

    JScrollPane jscroll;

    JLabel jlb_Location = new JLabel("Location");
    JLabel jlb_Username = new JLabel("Username");
    JLabel jlb_Password = new JLabel("Password");
    JLabel jlb_Amount = new JLabel("Amount:");
    JLabel jlb_Length = new JLabel("Length:");
    JLabel jlb_Locations[];
    JLabel jlb_Usernames[];
    JLabel jlb_Passwords[];

    JButton jbt_AddLocation = new JButton("Add Location");
    JButton jbt_Save = new JButton("Save");
    JButton jbt_Add = new JButton("Add");
    JButton jbt_Randomize = new JButton("Randomize");
    JButton jbt_Edit = new JButton("Edit");

    JTextField jtf_Locations[];
    JTextField jtf_Usernames[];
    JTextField jtf_Passwords[];
    JTextField jtf_Location = new JTextField();
    JTextField jtf_Username = new JTextField();
    JTextField jtf_Password = new JTextField();
    JTextField jtf_Integers = new JTextField();
    JTextField jtf_Capitals = new JTextField();
    JTextField jtf_Length = new JTextField();

    public static void main(String args[]) throws FileNotFoundException{
        new PISavior();
    }

    public PISavior() throws FileNotFoundException{
        panel.setLayout(null);
        panel.addMouseListener(this);
        panel.setBounds(0, 0, 400,400);
        load();
        addMainUI();
        //======================================================================
        // ** Main User Interface
        //======================================================================
        panel.add(jlb_Location);
        panel.add(jlb_Username);
        panel.add(jlb_Password);
        jbt_AddLocation.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                edit = false;
                removeMainUI();
                addLocationUI();
                panel.repaint();
            }
    });
        jbt_Save.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                try {
                    save();
                } catch (IOException ex) {
                    Logger.getLogger(PISavior.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
    });
        //======================================================================
        // ** Add Location User Interface
        //======================================================================
        jtf_Location.setBounds(5, 25, 100, 20);
        jtf_Username.setBounds(5, 65, 100, 20);
        jtf_Password.setBounds(5, 105, 100, 20);
        jlb_Amount.setBounds(210, 10, 100, 20);
        jcb_Integers.setBounds(130, 30, 80, 20);
        jcb_Integers.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                jtf_Integers.setEnabled(jcb_Integers.isSelected());
            }
    });
        jcb_Capitals.setBounds(130, 60, 80, 20);
        jcb_Capitals.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                jtf_Capitals.setEnabled(jcb_Capitals.isSelected());
            }
    });
        jtf_Integers.setBounds(210, 30, 50, 20);
        jtf_Integers.setEnabled(false);
        jtf_Integers.setText("0");
        jtf_Capitals.setBounds(210, 60, 50, 20);
        jtf_Capitals.setEnabled(false);
        jtf_Capitals.setText("0");
        jlb_Length.setBounds(135, 90, 80, 20);
        jtf_Length.setBounds(210, 90, 50, 20);
        jtf_Length.setText("0");
        jbt_Randomize.setBounds(140, 120, 100, 20);
        jbt_Randomize.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                int length = Integer.parseInt(jtf_Length.getText());
                int integers = Integer.parseInt(jtf_Integers.getText());
                int capitals = Integer.parseInt(jtf_Capitals.getText());
                if (length != 0 && length >= (integers + capitals)) {
                    jtf_Password.setText(getRandomPassword(length, jcb_Integers.isSelected() != false ? integers : 0, jcb_Capitals.isSelected() != false ? capitals : 0));
                }
            }
    });
        jbt_Add.setBounds(20, 135, 60, 15);
        jbt_Add.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                addInformation(jtf_Location.getText().length() == 0 ? "(Empty)" : jtf_Location.getText(), jtf_Username.getText().length() == 0 ? "(Empty)" : jtf_Username.getText(), jtf_Password.getText().length() == 0 ? "(Empty)" : jtf_Password.getText());
                jtf_Location.setText("");
                jtf_Username.setText("");
                jtf_Password.setText("");
                removeLocationUI();
                addMainUI();
                panel.repaint();
            }
        });
        jbt_Edit.setBounds(20, 135, 60, 15);
        jbt_Edit.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                int i = editLine;
                locations[i] = jtf_Location.getText();
                usernames[i] = jtf_Username.getText();
                passwords[i] = jtf_Password.getText();
                jlb_Locations[i].setText(locations[i]);
                jlb_Usernames[i].setText(usernames[i]);
                jlb_Passwords[i].setText(passwords[i]);
                jtf_Location.setText("");
                jtf_Username.setText("");
                jtf_Password.setText("");
                removeLocationUI();
                addMainUI();
                panel.repaint();
            }
        });

        jscroll = new JScrollPane(panel);
        frame.setTitle("Personal Information Savior"); 
        frame.setSize(300,240);
        frame.setContentPane(jscroll);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        frame.setResizable(false);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void removeMainUI() {
        if (amount != 0) {
            for (int i = 0; i < amount; i++) {
                panel.remove(jlb_Locations[i]);
                panel.remove(jlb_Usernames[i]);
                panel.remove(jlb_Passwords[i]);
            }
        }
        panel.remove(jbt_AddLocation);
        panel.remove(jbt_Save);
        panel.repaint();
    }

    public void addMainUI() {
        jlb_Location.setBounds(10, 5, 100, 20);
        jlb_Username.setBounds(100, 5, 100, 20);
        jlb_Password.setBounds(200, 5, 100, 20);
        jbt_AddLocation.setBounds(75, (20 * amount) + 25, 110, 15);
        jbt_Save.setBounds(90, (20 * amount) + 45, 80, 15);
        jlb_Location.setText("Location");
        jlb_Username.setText("Username");
        jlb_Password.setText("Password");
        panel.setPreferredSize(new Dimension(200, amount * 30));
        if (amount != 0) {
            for (int i = 0; i < amount; i++) {
                jlb_Locations[i].setBounds(10, 25 + (i * 20), 100, 20);
                jlb_Usernames[i].setBounds(100, 25 + (i * 20), 100, 20);
                jlb_Passwords[i].setBounds(200, 25 + (i * 20), 100, 20);
                panel.add(jlb_Locations[i]);
                panel.add(jlb_Usernames[i]);
                panel.add(jlb_Passwords[i]);
            }
        }
        panel.add(jbt_AddLocation);
        panel.add(jbt_Save);
        panel.repaint();
    }

    public void removeLocationUI() {
        panel.remove(jtf_Location);
        panel.remove(jtf_Username);
        panel.remove(jtf_Password);
        panel.remove(jlb_Amount);
        panel.remove(jcb_Integers);
        panel.remove(jcb_Capitals);
        panel.remove(jtf_Integers);
        panel.remove(jtf_Capitals);
        panel.remove(jlb_Length);
        panel.remove(jtf_Length);
        panel.remove(jbt_Randomize);
        panel.remove(jbt_Add);
        panel.remove(jbt_Edit);

        panel.repaint();
    }

    public void addLocationUI() {
        if (!edit) {
            jlb_Location.setText("New Location:");
            jlb_Location.setBounds(5, 5, 100, 20);
            jlb_Username.setText("New Username:");
            jlb_Username.setBounds(5, 45, 100, 20);
            jlb_Password.setText("New Password:");
            jlb_Password.setBounds(5, 85, 100, 20);
            panel.add(jtf_Location);
            panel.add(jtf_Username);
            panel.add(jtf_Password);
            panel.add(jlb_Amount);
            panel.add(jcb_Integers);
            panel.add(jcb_Capitals);
            panel.add(jtf_Integers);
            panel.add(jtf_Capitals);
            panel.add(jlb_Length);
            panel.add(jtf_Length);
            panel.add(jbt_Randomize);
            panel.add(jbt_Add);
            panel.repaint();
        } else {
            jlb_Location.setText("New Location:");
            jlb_Location.setBounds(5, 5, 100, 20);
            jlb_Username.setText("New Username:");
            jlb_Username.setBounds(5, 45, 100, 20);
            jlb_Password.setText("New Password:");
            jlb_Password.setBounds(5, 85, 100, 20);
            panel.add(jtf_Location);
            panel.add(jtf_Username);
            panel.add(jtf_Password);
            panel.add(jlb_Amount);
            panel.add(jcb_Integers);
            panel.add(jcb_Capitals);
            panel.add(jtf_Integers);
            panel.add(jtf_Capitals);
            panel.add(jlb_Length);
            panel.add(jtf_Length);
            panel.add(jbt_Randomize);
            panel.add(jbt_Edit);
            panel.repaint();
        }
    }

    public String getRandomPassword(int length, int integers, int capitals) {
        int lowers = length - (integers + capitals);
        String password = "";
        String scramble[] = new String[length];
        if (capitals != 0) {
            for (int i = 0; i < capitals; i++) {
                while (true) {
                    int randomScramble = random.nextInt(length);
                    if (scramble[randomScramble] == null || scramble[randomScramble].equals("")) {
                        scramble[randomScramble] = Character.toString(UPPERCASE[random.nextInt(UPPERCASE.length)]);
                        break;
                    }
                }
            }
        }
        if (integers != 0) {
            for (int i = 0; i < integers; i++) {
                while (true) {
                    int randomScramble = random.nextInt(length);
                    if (scramble[randomScramble] == null || scramble[randomScramble].equals("")) {
                        scramble[randomScramble] = Character.toString(NUMBERS[random.nextInt(NUMBERS.length)]);
                        break;
                    }
                }
            }
        }
        for (int i = 0; i < lowers; i++) {
            while (true) {
                int randomScramble = random.nextInt(length);
                if (scramble[randomScramble] == null || scramble[randomScramble].equals("")) {
                    scramble[randomScramble] = Character.toString(LOWERCASE[random.nextInt(LOWERCASE.length)]);
                    break;
                }
            }
        }
        for (int i = 0; i < length; i++) {
            password += scramble[i];
        }
        return password;
    }

    public void save() throws IOException {
        File dir = new File("C:/PISavior");
        if (!dir.exists()) {
            dir.mkdir();
        }
        File myfile = new File("C:/PISavior/myfile.txt");
        myfile.delete();
        myfile.createNewFile();
        PrintWriter output = new PrintWriter(myfile);
        output.print(amount + "*");
        for (int i = 0; i < amount; i++) {
            output.print(locations[i] + "*");
            output.print(usernames[i] + "*");
            output.print(passwords[i] + "*");
        }
        output.close();
    }

    public void load() throws FileNotFoundException {
        File myfile = new File("C:/PISavior/myfile.txt");
        if (myfile.exists()) {
            Scanner input = new Scanner(myfile);
            while (input.hasNext())
            {
                input.useDelimiter("[*]");
                amount = input.nextInt();

                locations = new String[amount];
                usernames = new String[amount];
                passwords = new String[amount];
                jlb_Locations = new JLabel[amount];
                jlb_Usernames = new JLabel[amount];
                jlb_Passwords = new JLabel[amount];

                for (int i = 0; i < amount; i++) {
                    locations[i] = input.next();
                    jlb_Locations[i] = new JLabel(locations[i]);
                    usernames[i] = input.next();
                    jlb_Usernames[i] = new JLabel(usernames[i]);
                    passwords[i] = input.next();
                    jlb_Passwords[i] = new JLabel(passwords[i]);
                }
            }
        }
    }

    public void addInformation(String info1, String info2, String info3) {
        if (amount == 0) {
            amount++;
            locations = new String[amount];
            usernames = new String[amount];
            passwords = new String[amount];
            jlb_Locations = new JLabel[amount];
            jlb_Usernames = new JLabel[amount];
            jlb_Passwords = new JLabel[amount];
            locations[0] = info1;
            usernames[0] = info2;
            passwords[0] = info3;
            jlb_Locations[0] = new JLabel(locations[0]);
            jlb_Usernames[0] = new JLabel(usernames[0]);
            jlb_Passwords[0] = new JLabel(passwords[0]);
        } else {
            String temp1[] = new String[amount];
            String temp2[] = new String[amount];
            String temp3[] = new String[amount];

            for (int i = 0; i < amount; i++) {
                temp1[i] = locations[i];
                temp2[i] = usernames[i];
                temp3[i] = passwords[i];
            }

            amount++;

            locations = new String[amount];
            usernames = new String[amount];
            passwords = new String[amount];

            jlb_Locations = new JLabel[amount];
            jlb_Usernames = new JLabel[amount];
            jlb_Passwords = new JLabel[amount];

            for (int i = 0; i < temp1.length; i++) {
                locations[i] = temp1[i];
                usernames[i] = temp2[i];
                passwords[i] = temp3[i];

                jlb_Locations[i] = new JLabel(temp1[i]);
                jlb_Usernames[i] = new JLabel(temp2[i]);
                jlb_Passwords[i] = new JLabel(temp3[i]);
            }

            locations[amount-1] = info1;
            usernames[amount-1] = info2;
            passwords[amount-1] = info3;

            jlb_Locations[amount-1] = new JLabel(info1);
            jlb_Usernames[amount-1] = new JLabel(info2);
            jlb_Passwords[amount-1] = new JLabel(info3);
        }
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        int y = e.getY();
        if (y > 25 && y < (amount * 20) + 25) {
            for (int i = 0; i < amount; i++) {
                if (y < (i*20) + 45) {
                    edit = true;
                    editLine = i;
                    jtf_Location.setText(locations[i]);
                    jtf_Username.setText(usernames[i]);
                    jtf_Password.setText(passwords[i]);
                    removeMainUI();
                    addLocationUI();
                }
            }
        }
    }

    @Override
    public void mouseClicked(MouseEvent me) {
    }

    @Override
    public void mousePressed(MouseEvent me) {
    }

    @Override
    public void mouseEntered(MouseEvent me) {
    }

    @Override
    public void mouseExited(MouseEvent me) {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:58:31.910

对于初学者，当您像这样导出 jar 时，您不会将 Lib jar 放入其中。您必须将[fat-jar](http://fjep.sourceforge.net/)插件添加到 Eclipse 中，这很容易。

右键项目，选择build fat-jar ![在此处输入图像描述](../Images/371d72ea6403152b900d4bdd6134a3a9.png)

之后，您将进入以下屏幕-（选择您的主要课程） ![在此处输入图像描述](../Images/464ac9c3d557c039f1b93b2a7eb9a8f2.png)

然后 -

![在此处输入图像描述](../Images/6a398167b0255b92a0675d4deec18a03.png)

现在，您的 .jar 文件中将包含所有库 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:12:01.690

我认为 Eclipse 3.5 内置了这种能力，可以导出包含所有依赖项的 jar 包。但是，根据设置的复杂性，在某些情况下它可能不起作用。先试试看，因为它已经在那里了。

文件 -> 导出... 可运行的 JAR 文件... 将所需的库打包到生成的 JAR 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:58:12.863

您应该在没有类文件的情况下导出项目。在其他机器上，再次构建您的项目并运行它。但不要忘记在构建过程之前将 eclipse 默认运行时 JRE 指向您系统的 JDK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T03:02:06.700

看看[这个](https://stackoverflow.com/questions/2848642/how-to-setup-main-class-in-manifest-file-in-jar-produced)

基本上，您必须在 jar 文件的 META-INF 文件夹中指定您的主类。

# php - 在 PHP 中获取数组的前 3 个值

> ID：11661487
> 
> 赞同：3
> 
> 时间：2012-07-26T02:31:55.147
> 
> 标签：php, arrays

假设我有一个看起来像这样的数组

```
array ([apple] => 1, [dog]=>2, [cat]=>5, [bread]=>9, [shoes]=> 4) 
```

我可以打印数组的前 3 个值吗？如果是这样，怎么做？有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T02:35:44.207

```
$firstThreeElements = array_slice($array, 0, 3); 
```

其中 0 是您的偏移量，3 是您想要的元素数量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-26T02:32:51.693

有很多方法。

```
list( $first, $second, $third) = $array;
echo $first . ' ' . $second . ' ' . $third; 
```

或者：

```
echo array_shift( $array);
echo array_shift( $array);
echo array_shift( $array); 
```

或者：

```
$i = 0;
foreach( $array as $el) {
    if( $i >= 3) break;
    echo $el;
    $i++;
} 
```

或者：

```
foreach( array_slice( $array, 0, 3) as $el) {
    echo $el;
} 
```

或者：

```
echo implode( ' ', array_slice( $array, 0, 3)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T02:38:33.697

使用迭代器：

```
$array = ['apple' => 1, 'dog' => 2, 'cat' => 5, 'bread' => 9, 'shoes' => 4];

foreach (new LimitIterator(new ArrayIterator($array), 0, 3) as $key => $val)
{
  echo "$key => $val\n";
} 
```

# iphone - 将 800x1067 像素图像（约 270 kb）存储到 sqlite/Core Data 中是否可以接受？

> ID：11661491
> 
> 赞同：1
> 
> 时间：2012-07-26T02:32:18.090
> 
> 标签：iphone, ios, sqlite

我正在编写一个应用程序，它将存储一堆附有图像的记录。我正在考虑定义 800x1067 像素（约 270 kb）大小的图像。

将这种图像存储到 SQLite 数据库中是否合理？我猜将数百条记录写入这张表。

你怎么看待这件事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T02:39:30.253

你可以（这是可以接受的），但是当我尝试这个时，我发现 SQLite 太慢了。在 SQLite 中存储图像会严重影响性能。我现在将图像存储在应用程序的 Documents 文件夹中的自定义目录结构中，并将对这些文件名的引用存储在 SQLite 中。我知道有些人很乐意将缩略图存储在 SQLite 中（即使使用缩略图图像，您也会受到性能影响，尽管这些小图像可以忽略不计），但我个人将所有图像都放在我的 Documents 文件夹中。

为了测试性能，我测试`imageWithContentsOfFile`了使用加载图像与从 Core Data 读取图像并将其加载到`UIImage`using`imageWithData`中，在 iPhone 4S 上从 Documents 中检索 10,000 个缩略图需要 12.988 秒，从 Core Data 中检索需要 23.743 秒。（而且，显然，如果您使用自己的`NSCache`和/或`imageNamed`，如果您碰巧偶尔检索相同的图像，它*会更快*。）虽然这是核心数据基准，但几个月前我尝试使用 sqlite（通过 FMDB）较大的图像， sqlite 和之间的差异`imageWithContentsOfFile`是可观的。

# android - 为什么 Android 活动被奇怪地放大了？

> ID：11661497
> 
> 赞同：0
> 
> 时间：2012-07-26T02:34:07.523
> 
> 标签：android, android-widget

我在 Galaxy Note 上运行应用程序，即 hdpi。我得到了所有的drawables（drawable-hdpi，drawable-mdpi等）都是正确的。但是页面（活动）被奇怪地放大了，如下所示：

![在此处输入图像描述](../Images/b5ec03d8c43c2866e35aca6df55aeae6.png)

您会注意到光标图标、顶部标题和背景图块比正常大。

它应该是这样的：

![在此处输入图像描述](../Images/e0ea0e1fed0409e88842d366d8578adf.png)

布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/bg_app"
    >
    <EditText android:id="@+id/content"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:inputType="textMultiLine|textCapSentences"
        android:textColor="#000"
        android:textSize="18sp"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="10dp"
        android:gravity="top|left"
        android:padding="10dp"
        android:layout_margin="10dp"
        android:lineSpacingMultiplier="1.1"
        android:minLines="3"
        />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:10:43.657

您需要将以下内容添加到清单中，标签“uses-sdk”与 android:minSdkVersion="8" （它可能适用于 7 我没有测试）:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-29T05:51:51.547

通过使用解决的问题

```
<uses-sdk android:minSdkVersion="4" /> 
```

在 AndroidManifest.xml 中

# c++ - `new/malloc` 应该`delete/free` 的那个？

> ID：11661498
> 
> 赞同：1
> 
> 时间：2012-07-26T02:34:09.047
> 
> 标签：c++, ifstream, delete-operator

在 C/C++ 中似乎是一个常识，在函数完成之前`new/malloc`应该有一些内存的函数，对吧？`delete/free`

但是假设我有这样的问题，有一个函数`reader`会从文件中读取块到缓冲区，还有另一个函数`consumer`会消耗这些缓冲区，

```
void reader(ifstream &ifs)
{
    char *buf = new char[100];
    ifs.read(buf, 100);
    save_buffer(buf);  //save this buf into a global array, say buf_array[10]
}

void consumer()
{
    for(int i = 0; i < 10; i++)
        consume( buf_array[i] );  //do something with those buffers read by reader
} 
```

我的问题是，很多内存资源都`new`在里面`reader`，但`reader`不能`delete`，因为这些缓冲区没有被`consumer`. 应该`consumer`负责`delete`ing 那些缓冲区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T02:36:53.107

没有人说分配内存的函数应该释放内存。但通常相同的组件应该处理它。因为你`reader`和你`consumer`结成一对，他们可以把记忆协调在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:37:16.907

> 在 C/C++ 中似乎是一个常识，在函数完成之前`new/malloc`应该有一些内存的函数，对吧？`delete/free`

不，这不一定是真的，你不必在同一个函数中释放内存，只要你最终在程序结束之前释放它。

C++ 中可用的一种常见解决方案（但在 C 中不可用）是在析构函数中释放内存。如果在正确处理复制/移动构造函数和赋值运算符时传递包含动态分配内存的对象，则调用析构函数时将释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T02:37:34.420

原则是“对于每一个`new`，应该有一个`delete`”。这并没有说明两个调用必须在同一个函数中（显然，这不是很有用）。

您的示例在读者分配和消费者释放方面没有问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T02:38:33.607

您不必在同一个函数中执行`new/malloc`（分配）和（释放）。`delete/free`只要您的算法保证每个分配都被释放并且只被释放一次，从而不会导致内存泄漏，就可以了。
事实上，分配和释放通常存在于不同的函数中。
请记住以下几点：
1\. 使用相同的指针进行释放（当然您可以传递指针）。如果您对指针进行一些算术运算，然后使用修改后的指针释放分配，即使指针仍然指向分配区域，也会产生错误。
2\. 如上所述，您应该保证分配被释放，并且只释放一次。附加版本会导致错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T02:39:10.333

您不需要在初始化它的同一函数中释放分配的缓冲区，只要您携带指向缓冲区的指针即可。

在您的情况下，`consumer()`应该负责`delete`分配由`consumer`.

至于你的第二个问题，消费者不知道缓冲区在哪里结束；你需要以某种方式告诉它。`struct`您可以考虑定义一个新的封装缓冲区及其长度的指针，而不是仅仅存储指向缓冲区的指针。这已经完成：考虑使用`std::string`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T02:47:18.373

其他人的答案略有不同：

是的，阅读器不释放/删除阅读功能中的内存很好，但我不会让消费者删除内存。在一个简单的情况下可行，但如果您有多个消费者（例如以不同格式输出）怎么办？如果消费数据有释放它的副作用，那么在第一个消费者完成它之后，你就不能对数据做任何其他事情了。

我会`cleanup()`在我的阅读器中有一个类型方法，我会在需要时显式调用它来清理缓冲区。这样分配内存的模块负责释放它（即使它使用不同的方法）。

例如

```
Data d = Reader.read();
Consumer1.consume(d);
Consumer2.consume(d);
Reader.cleanup(d);
// d is no longer valid. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-26T02:47:29.753

您正在将 buf 的内容复制到一个全局数组 buf_array ，该数组实际上是为消费者提供的。因此，在上面的示例中，读者可以释放 buf。

而且，不需要 new/mallocs 的函数释放内存。指针可以传递。最后使用分配的内存的函数需要释放它的内存。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-26T03:49:06.967

按照偏好的降序排列，您希望：

1.  使用`auto`存储类，因此删除会自动发生。
2.  使用相同的代码分配和删除对象。
3.  传递所有权，因此一个组件分配而另一个组件释放。
4.  通过类似的东西共享所有权`shared_ptr`。

3 和 4 几乎并列，但都比 2 落后很多，而 2 也比 1 落后很多。

在这种情况下，您真正*​​希望*的是在生产者和消费者之上的函数级别（或类等）分配缓冲区，启动生产者和消费者，并在两者都完成时删除缓冲区：

```
class buffer { 
     std::vector<char> data;
public:
     buffer() : data(100) {}
};

process_file(std::string const &name) { 
    std::vector<buffer> buffers(10);

    std::ifstream in(name);

    std::pair<std::ifstream *, std::vector<buffer> *> thread_data = {
        &in, &buffers
    };

    prod = start_thread(producer, (void *)&thread_data);
    cons = start_thread(consumer);
    join(prod);
    join(cons);
} 
```

如果你能做到这一点，它可以帮助避免*很多*管理内存的麻烦。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-26T03:29:02.760

您还可以阅读有关共享数组[http://www.boost.org/doc/libs/1_35_0/libs/smart_ptr/shared_array.htm](http://www.boost.org/doc/libs/1_35_0/libs/smart_ptr/shared_array.htm)

使用共享数组，您可以在函数内分配它们并按值将它们传递给其他函数。共享数组保持内部计数它被引用的次数，并在所有引用超出范围时自动删除内存。

例如

```
void bar( boost::shared_array< int > );

void foo()
{
    boost::shared_array< int > x ( new int[ 100 ] );
    bar( x );
    // because x has been passed to bar(), its reference count is incremented
    // and it will not only be deleted when everyone is finished with it!

    // do more things with x
} // the memory held by x is deleted

void bar( boost::shared_array< int > y )
{
    // Do things with y here
} // the memory held by y is not deleted here because foo() hasn't yet finished 
```

# php - mysql DELETE 查询失败，使用 implode IN 子句

> ID：11661499
> 
> 赞同：0
> 
> 时间：2012-07-26T02:34:10.690
> 
> 标签：php, mysql, arrays, checkbox, implode

我目前正在使用复选框填充数组，将数组变量内爆并在 DELETE 函数的 IN 子句中使用该变量。var_dump 显示我正在创建一个正确的查询，但我无法进行任何删除。这是解决我一个月左右的现有问题的一种新方法。

这就是我所拥有的。

```
//Connect to the db
$id_array = NULL;

// Make the query to display user's uploads
 $q = "SELECT upload_id, title, genre, length, created, views
        FROM upload
        WHERE owner_id =". $_SESSION['user_id'] ."
        ORDER BY title ASC";

$r = mysqli_query ($dbc, $q); // Run the query

if($r)
    {
        // If it ran okay, display the records
        echo '<table align="center"
            cellspacing="3" cellpadding="3"
            width="75%">
           <tr><td align="left"><b>Title</b></td>
           <td align="left"><b>Genre</b></td>
           <td align="left"><b>Pages</b></td>
           <td align="left"><b>Submitted</b></td>
           <td align="left"><b>Views</b></td>
           </tr>';

        // Fetch and print all the records:
?><form action="/nbproject/newwriter_profile.php" method="post">
<?php
  while ($row = mysqli_fetch_array($r,MYSQLI_ASSOC))
    {
       echo '<tr><td align="left">' .
       $row['title'] . '</td><td align="left">'
       . $row['genre'] . '</td><td align="left">'
       . $row['length'] . '</td><td align="left">'
       . $row['created'] . '</td><td align="left">'
       . $row['views'] . '</td><td align="left">' //. var_dump($row) //dump row value for testing
       . '<input type="checkbox" name="checkbox[]"  value= "'.$row['upload_id'].'"'.' />'.' </td>'. '</tr>';
    }
   echo '</table>'; // Close the table
        ?> 
```

上面的代码创建了一个简单的表格，每条记录都有一个对应的复选框，勾选删除然后点击“删除”

```
 <input type="submit" name="delete" value="Delete" align="right"/> 
       </form>

<?php
   } // End of if ($r) IF.
    mysqli_close($dbc); // Close the database connection 
```

自定义删除功能：

```
function submit_delete() {
  if(!is_null($_POST['delete']) && !is_null($_POST['checkbox'])) { //Check to see if a delete command has been submitted.
    //This will dump your checkbox array to your screen if the submit works.
    //You can manually check to see if you're getting the correct array with values
   // var_dump($_POST['checkbox']);//Comment this out once it's working.
    $id_array = $_POST['checkbox'];
    $id_array = array_map('intval', $id_array);
    $id_array = array_unique($id_array);
    $id_array = implode(',',$id_array);
    //var_dump($id_array);
    deleteUploads($id_array);

  }
  else {
    echo "Error: submit_delete called without valid checkbox delete.";//var_dump($_POST['checkbox']);
  }
}

$delete_success = false;
function deleteUploads ($id_array) {
    require_once(my connection to db);

    mysqli_free_result($r);

  if (count($id_array) <= 0) {   echo "Error: No deletes in id_array!"; echo 'wtf'; }

  //var_dump($id_array); 
```

上面的 var dump 显示正确的 id，如我的 mysql 数据库中所示

```
 $gone = "DELETE  FROM `upload` WHERE `upload_id` IN ("."$id_array".")";
    var_dump($gone); 
```

上面的 var 验证查询格式是否正确，用逗号分隔 id

```
 $goodbye = mysqli_query($dbc, $gone);

    if ($goodbye) { $delete_success = true; var_dump($delete_success);}
    else { $delete_success = false;}
    var_dump($delete_success); 
```

上面的 var dump 显示 bool false

```
 //mysqli_close($dbc);
    if($delete_success == true) { echo 'done';
    header('Location: newwriter_profile.php');
  } else
      {
    echo "Error b/c delete failed"; 
```

在检查任意数量的框并点击删除后显示上面的回声

```
 }

  }

submit_delete();

mysqli_free_result($goodbye);
mysqli_close($dbc);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:00:12.787

从您的代码：

```
$id_array = implode(',',$id_array);        //-> You convert array into string.
//var_dump($id_array);
deleteUploads($id_array);                  //-> Call function for delete with string parameter. 
```

在您的删除功能代码中，您计算​​字符串参数（$id_array）：

```
if (count($id_array) <= 0) { ... 
```

从删除函数内部剪切代码：

```
if (count($id_array) <= 0) {   echo "Error: No deletes in id_array!"; echo 'wtf'; } 
```

并在将数组转换为字符串之前插入：

```
$id_array = array_unique($id_array);
if (count($id_array) <= 0) {   echo "Error: No deletes in id_array!"; echo 'wtf'; }
$id_array = implode(',',$id_array);
//var_dump($id_array);
deleteUploads($id_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:10:24.487

我解决了我的问题。我意识到，在我随意的开发过程中，在实际创建上传表之前，我已经创建了具有相关权限的数据库用户。我对我的数据库用户运行了一个授予权限语句，并且奇迹般地我能够使用上面的代码删除。这也解决了我在页面之间丢失 SESSION 变量时遇到的另一个问题。

这绝对是一场噩梦——我希望这对其他人也有帮助。感谢您的输入。

# c# - 如何在 Autofac 中注册这些类

> ID：11661501
> 
> 赞同：12
> 
> 时间：2012-07-26T02:34:22.347
> 
> 标签：c#, dependency-injection, ioc-container, autofac

我正在使用 autofac 作为 Ioc 容器。我有三个班级：

```
class Service
{
     public Service(Repository rep,UnitOfWork context){}

}

Class Repository
{
     public Repository(UnitOfWork context){}
}

class UnitOfWork{} 
```

Service 和 Repository 需要相同的 UnitOfWork 实例

怎么做？以及如何在 XmlConfiguration 中编写它

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-26T03:58:00.087

**编辑：**我误读了这个，并认为这是一个关于如何使用 autofac 注册依赖项的问题。如果您想保持相同的 UnitOfWork，您需要将实例的生命周期限定为某些内容。如果您在 ASP.NET 或 WCF 应用程序中使用它，您可以像这样注册您的依赖项：

```
typeBuilder.RegisterType<UnitOfWork>().InstancePerLifetimeScope();
typeBuilder.RegisterType<Repository>();
typeBuilder.RegisterType<Service>(); 
```

* * *

为了使用像 Autofac 这样的容器，您需要做的第一件事是注册所有依赖项。在 Autofac 中，您可以通过几种方式做到这一点，但它们都依赖于使用 a `ContainerBuilder`. 依赖于扩展方法，`ContainerBuilder`因此请确保您有`using`Autofac 命名空间的声明。

**您可以显式定义工厂方法：**

```
// Explicitly 
var builder = new ContainerBuilder();
builder.Register<UnitOfWork>(b => new UnitOfWork());
builder.Register<Repository>(b => new Repository(b.Resolve<UnitOfWork>()));
builder.Register(b => new Service(b.Resolve<Repository>(), b.Resolve<UnitOfWork>())); 
```

使用 ContainerBuilder 我们访问`Register<>()`提供服务接口的方法（这是我们向容器询问服务的方式），在这种情况下，我不使用接口，只是使用实际类型。任何时候你向容器请求一个`UnitOfWork`它都会使用工厂方法`new UnitOfWork()`来生成一个。在现实生活中，您可能会要求一个`IUnitOfWork`. 这可能有点冗长，但是当您需要自定义逻辑来创建依赖项时，它非常方便。

**您可以像使用任何其他依赖项容器一样使用构建器，只需注册类型。**

```
// Implicitly
var typeBuilder = new ContainerBuilder();
typeBuilder.RegisterType<UnitOfWork>();
typeBuilder.RegisterType<Repository>();
typeBuilder.RegisterType<Service>(); 
```

这种方法依赖于注册构建类所需的所有依赖项。然后容器将使用反射来解析任何构造函数参数。如果未注册参数，容器将抛出其无法解析的类型的异常。在这种情况下，服务依赖于`UnitOfWork`和`Repository`。`Repository`还依赖于`UnitOfWork`. 这些依赖关系表示为构造函数参数。为了从容器中请求 a`Repository`或 a `Service`，必须注册所有依赖项

**您可以使用配置方法。**

如果你使用的是 app.config 文件，你可以像这样定义你的配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="autofac" type="Autofac.Configuration.SectionHandler, Autofac.Configuration"/>
  </configSections>

  <autofac defaultAssembly="AutoFacTest">
    <components>
      <component
              type="AutoFacTest.Repository, AutoFacTest"
              service="AutoFacTest.Repository" />

      <component
               type="AutoFacTest.UnitOfWork, AutoFacTest"
               service="AutoFacTest.UnitOfWork" />

      <component
              type="AutoFacTest.Service, AutoFacTest"
              service="AutoFacTest.Service" />
    </components>
  </autofac>
</configuration> 
```

首先，请注意我们必须定义一个配置部分（注意`<ConfigSections>`）。然后，我们可以创建一个`<autofac>`定义所有依赖项的部分。表示法非常简单，您基本上`<component>`为每个依赖项创建一个。每个组件都有一个`service`属性，该属性定义将被请求的类型。还有一个`type`属性定义了在请求服务实例时要创建的对象。这类似于请求`builder.Register<UnitOfWork>(b => new UnitOfWork())`的`UnitOfWork`服务（在这种情况下）也是要创建的类型。

要使用配置创建构建器，请使用`ConfigurationSettingsReader()`

```
// Config
var configBuilder = new ContainerBuilder();
configBuilder.RegisterModule(new ConfigurationSettingsReader("autofac")); 
```

您必须传入配置部分的名称（在本例中为`autofac`）。配置依赖项后，您必须构建一个容器。`ContainerBuilder`包含执行此操作的方法：

```
var container = builder.Build();
var typeContainer = typeBuilder.Build();
var configContainer = configBuilder.Build(); 
```

一旦你有了容器，你就可以请求你的服务实例：

```
container.Resolve<Service>().DoAwesomeness();
typeContainer.Resolve<Service>().DoAwesomeness();
configContainer.Resolve<Service>().DoAwesomeness(); 
```

**完整程序：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Autofac;
using Autofac.Configuration;

namespace AutoFacTest
{
    class Program
    {
        static void Main(string[] args)
        {
            // Explicitly 
            var builder = new ContainerBuilder();
            builder.Register<UnitOfWork>(b => new UnitOfWork());
            builder.Register<Repository>(b => new Repository(b.Resolve<UnitOfWork>()));

            builder.Register(b => new Service(b.Resolve<Repository>(), b.Resolve<UnitOfWork>()));

            // Implicitly
            var typeBuilder = new ContainerBuilder();
            typeBuilder.RegisterType<UnitOfWork>();
            typeBuilder.RegisterType<Repository>();
            typeBuilder.RegisterType<Service>();

            // Config
            var configBuilder = new ContainerBuilder();
            configBuilder.RegisterModule(new ConfigurationSettingsReader("autofac"));

            var container = builder.Build();
            var typeContainer = typeBuilder.Build();
            var configContainer = configBuilder.Build();

            container.Resolve<Service>().DoAwesomeness();
            typeContainer.Resolve<Service>().DoAwesomeness();
            configContainer.Resolve<Service>().DoAwesomeness();
            Console.Read();
        }
    }

    public class Repository
    {
        private readonly UnitOfWork _unitOfWork;
        public Repository(UnitOfWork uow)
        {
            _unitOfWork = uow;
        }

        public void PrintStuff(string text)
        {
            Console.WriteLine(text);
        }
    }

    public class Service
    {
        private readonly Repository _repository;
        private readonly UnitOfWork _unitOfWork;

        public Service(Repository repo, UnitOfWork uow)
        {
            _repository = repo;
            _unitOfWork = uow;
        }
        public void DoAwesomeness()
        {
            _repository.PrintStuff("Did awesome stuff!");
            _unitOfWork.Commit();
        }
    }

    public class UnitOfWork
    {
        public bool Commit()
        {
            return true;
        }
    }

} 
```

# python - 仅针对经过身份验证的用户的 Django 缓存

> ID：11661503
> 
> 赞同：22
> 
> 时间：2012-07-26T02:34:50.080
> 
> 标签：python, django, caching, heroku, memcached

# 问题

在 Django 中，如何创建仅对经过身份验证的用户可见的页面的单个缓存版本（所有用户都相同）？

## 设置

我希望缓存的页面仅对经过身份验证的用户可用（他们`@login_required`在视图上使用）。这些页面对于所有经过身份验证的用户都是相同的（例如，无需`vary_on_headers`基于唯一用户进行设置）。

但是，我不希望未经身份验证的用户可以看到这些缓存页面。

## 到目前为止我尝试过的

*   页面级缓存（显示用于登录用户到未登录用户的页面）
*   考虑使用`vary_on_headers`，但我不需要为每个用户单独缓存页面
*   我检查了模板片段缓存，但除非我感到困惑，否则这不能满足我的需求
*   大量搜索（似乎每个人都想做相反的事情）

谢谢！

### 示例视图

```
@login_required
@cache_page(60 * 60)
def index(request):
    '''Display the home page'''
    return render(request, 'index.html') 
```

### settings.py（相关部分）

```
# Add the below for memcache
MIDDLEWARE_CLASSES += (
    'django.middleware.cache.UpdateCacheMiddleware',
    'django.middleware.cache.FetchFromCacheMiddleware',
)

# Enable memcache
# https://devcenter.heroku.com/articles/memcache#using_memcache_from_python
CACHES = {
    'default': {
        'BACKEND': 'django_pylibmc.memcached.PyLibMCCache'
    }
} 
```

* * *

# 解决方案

根据@Tisho 的回答，我解决了这个问题

1.  `decorators.py`在我的应用程序中创建文件
2.  将以下代码添加到它
3.  将函数导入到`views.py`
4.  将其作为装饰器应用于我只想为登录用户缓存的视图

## 装饰器.py

```
from functools import wraps
from django.views.decorators.cache import cache_page
from django.utils.decorators import available_attrs

def cache_on_auth(timeout):
    def decorator(view_func):
        @wraps(view_func, assigned=available_attrs(view_func))
        def _wrapped_view(request, *args, **kwargs):
            if request.user.is_authenticated():
                return cache_page(timeout)(view_func)(request, *args, **kwargs)
            else:
                return view_func(request, *args, **kwargs)
        return _wrapped_view
    return decorator 
```

对于已登录的用户，它将为未登录的用户缓存页面（或为他们提供缓存的页面），它只会为他们提供常规视图，该视图被装饰`@login_required`并要求他们登录。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-28T19:22:25.640

默认`cache_page`装饰器接受一个名为`key_prefix`. 但是，它只能作为字符串参数传递。所以你可以编写自己的装饰器，它会`prefix_key`根据`is_authenticated`值动态修改它。这是一个例子：

```
from django.views.decorators.cache import cache_page

def cache_on_auth(timeout):
    def decorator(view_func):
        @wraps(view_func, assigned=available_attrs(view_func))
        def _wrapped_view(request, *args, **kwargs):
            return cache_page(timeout, key_prefix="_auth_%s_" % request.user.is_authenticated())(view_func)(request, *args, **kwargs)
        return _wrapped_view
    return decorator 
```

然后在视图上使用它：

```
@cache_on_auth(60*60)
def myview(request) 
```

然后，生成的 cache_key 将如下所示：

```
cache key:   
views.decorators.cache.cache_page._auth_False_.GET.123456.123456 
```

如果用户已通过身份验证，并且

```
cache key:   
views.decorators.cache.cache_page._auth_True_.GET.789012.789012 
```

如果用户未通过身份验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-10T02:35:50.930

如果@Tisho 答案中的@wrap 装饰器让您的大脑受伤，或者如果显式解决方案比隐式解决方案更好，那么这是一种提供不同缓存结果的简单程序方法：

```
from django.views.decorators.cache import cache_page

def index(request):
    """
    :type request: HttpRequest
    """
    is_authenticated = request.user.is_authenticated()
    if is_authenticated:
        return render_user(request)
    else:
        return render_visitor(request)

@cache_page(5, key_prefix='user_cache')
def render_user(request):
    print 'refreshing user_cache'
    return render(request, 'home-user.html', {})

@cache_page(10, key_prefix='visitor_cache')
def render_visitor(request):
    print 'refreshing visitor_cache'
    return render(request, 'home-visitor.html', {}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T19:31:18.173

如果您想微调缓存能力，我建议您不要使用缓存中间件。

但是，如果您确实想坚持保留它，您可以尝试类似的方法（不是说它会按原样工作，而是类似于它）：

```
@never_cache
def dynamic_index(request):
    # do dynamic stuff

def cached_index(request):
    return dynamic_index(request)

@never_cache
def index(request):

    if request.user.is_authenticaded():
        return cached_index(request)

    return dynamic_index(request) 
```

在最坏的情况下，您可以使用`cache.set('view_name', template_rendering_result)`和`cache.get`手动缓存 HTML。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-20T14:07:53.500

我知道这是一个非常古老的问题，但我们有一个新的替代方案来解决这个问题。

您可以使用装饰器[cache_control](https://docs.djangoproject.com/en/3.0/topics/http/decorators/#django.views.decorators.cache.cache_control)传递`private`as`True`来保护您的数据。

# sql-server-2008r2-express - SQL Server 2008 R2 Express - 没有创建新数据库的选项 - 我做错了什么？

> ID：11661504
> 
> 赞同：0
> 
> 时间：2012-07-26T02:34:57.990
> 
> 标签：sql-server-2008r2-express

我*想*使用 Management Studio 在 SQL Server 2008 R2 Express 中创建一个新数据库，但是我在线搜索没有选项`New Database...`，所有教程都显示了我没有的这个选项。我错过了什么步骤？“对象资源管理器”为空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:47:29.433

您是否尝试过右键单击数据库文件夹和“新数据库”？ ![在此处输入图像描述](../Images/23ea1fa5ec8a79c58a6304beb1c49d7c.png)

# css - 浏览器字体大小改变网页布局

> ID：11661510
> 
> 赞同：-3
> 
> 时间：2012-07-26T02:35:55.737
> 
> 标签：css, layout, fonts

如果用户增加或减少浏览器（任何浏览器）的字体大小，我的网站布局会发生变化。有人可以看看我的网站（[www.heathersoos.ca](http://www.heathersoos.ca)）并建议（请简单解释）我如何用 css 控制它。我很乐意包含我网站上的任何编码来帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:51:31.380

您的布局正在调整大小，因为在调整`div`字体大小时某些元素会被拉伸或缩小，因为它们取决于所包含文本的宽度（它们具有`width:auto`）。如果你想阻止这种情况发生，你必须硬编码每个元素的宽度。这通常被认为是一种不好的编码习惯，但是最好避免。一个更好的主意是以理想的方式调整布局大小。

# java - android中Activity的命名

> ID：11661512
> 
> 赞同：0
> 
> 时间：2012-07-26T02:36:03.197
> 
> 标签：java, android, naming

我正在使用别人的代码，他们有以下代码

```
Intent j = new Intent();
j.setClass(this, ReplaceActivity_.class); 
```

但他们拥有的课程是“ReplaceActivity”。ReplaceActivity后的“_”是否有原因？我正在使用 intelliJ，它给了我一个编译器错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:42:40.173

它适用于一个名为[AndroidAnnotations](https://github.com/excilys/androidannotations/)的框架。该框架通过在编译时生成字节码来减少样板代码。生成的活动在其名称后附加了一个下划线，这（可能）是您看到此内容的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:21:15.610

试试这样

```
Intent i = new Intent (presentActivity.this,ReplaceActivity_.class);
StartActivity(i); 
```

# xcode - 如何使用 xcode 4.2 打开项目版本 1.0？

> ID：11661513
> 
> 赞同：9
> 
> 时间：2012-07-26T02:36:22.487
> 
> 标签：xcode

[我从这里](http://nehe.gamedev.net/data/lessons/macosxcocoa/lesson31.zip)下载了这个 Xcode 项目（1.0 版`contents.xcworkspacedata`）

当我尝试打开它时，出现此错误：

```
Failed to load project at '.../Lesson31_OSXCocoa/Lesson31_OSXCocoa.pbproj', incompatible project version. 
```

如何使用 xcode 4.2 打开项目版本 1.0？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T01:08:35.900

**You're better off trying to find a newer tutorial, or just studying the code as-is, without expecting to build and run it.**

Judging by the modification dates, this code is almost ***ten years old***. Even if you can get a modern version of XCode to open it, there's no reason to think that the headers, libraries, etc., that it needs to compile and run will still be compatible. Moreover, ten years is a long time in software terms. While some of the content might still be applicable, it certainly won't be anywhere near the cutting edge (which itself won't be new by the time you've mastered it).

* * *

All that said, if you're really intent on working with that project file in XCode 4.2, the best way is probably to convert it the same way a continuously developed project would have: XCode by XCode.

*   You can download older versions of XCode from Apple [here](https://developer.apple.com/downloads/index.action) (requires free Apple developer account).
*   Some older version will be able to import that file and update it to a newer format.
*   Assuming you don't stop at that point and use that version of XCode, you can repeat the process with the updated project file and ever-newer versions of XCode until you've arrived at version 4.2.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T17:40:13.810

创建一个新项目并向其中添加适当的文件相对容易。花了不到 10 分钟（不得不在几个地方更新代码）。请注意，我并没有花太多时间清理这段旧代码 - 不少已弃用的警告。但它运行和工作。我安装了 Xcode 4.3.2，但希望你能用 4.2 打开它。这是它的链接：[Lesson31.zip](http://geekanddad.com/Downloads/Lesson31.zip)

请注意，执行此操作的过程（因此您可以为任何其他人执行此操作）是创建一个新的 Mac OS X Cocoa Application 项目，将旧项目中的文件（main.m 除外）添加到新项目中，然后添加必要的库来修复链接错误（OpenGL 框架）。如果有 nib，那么您可以在 Xcode 中打开它，然后将带有视图和控制器的窗口从该项目中复制出来，然后将它们粘贴到使用新项目创建的 .xib 文件中。然后根据需要修复编译器警告/错误（添加一些 (char*) 强制，删除对似乎不可用的 std::ios::nocreate 的引用等）。

# batch-file - 如何在通过 START 命令执行程序时重定向程序的输出并对输出进行排序

> ID：11661515
> 
> 赞同：0
> 
> 时间：2012-07-26T02:36:56.537
> 
> 标签：batch-file

我想做类似的事情：

```
start program1 ^>output
start program2 ^>output 
```

并对输出进行排序，以便对输出进行排序。我不在乎哪个输出是第一个（程序 1 或程序 2），但我希望它是该程序输出的完整转储。

理想情况下，我想并行运行多个程序，并将输出全部显示到屏幕上，但是一个文件就可以了。我不需要在它运行时看到它，只要它完成后就可以理解它。

编辑：

如果我按照建议将它们输出到一个文件，然后在完成后合并它们，我会遇到等待所有程序完成的麻烦——所以，我需要一个 waitUntilAllTheStartsAreFinished 命令。

```
start program1 ^>output1
start program2 ^>output2
#... as many as I need
waitUntilAllTheStartsAreFinished 
TYPE output1
TYPE output2
delete output1
delete output2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:51:59.647

您可以使用循环和`tasklist`：

```
:wait
rem just wait a second before looking again
ping -n 2 ::1 >nul 2>nul
tasklist 2>&1 | findstr /b "program1.exe program2.exe ..." >nul 2>&1 && goto wait 
```

它只会继续下去，直到所有的`program1.exe program2.exe ...`都被终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:10:45.637

Joey 建议的方法可行，但如果您的程序可以多次启动，则可能会出现问题。很难判断哪些任务是您想要监控的一次。

每个程序将在临时输出文件上拥有一个排他锁，直到程序完成。另一个进程重定向到同一文件的任何尝试都将失败。这可用于检测程序何时结束。

我使用 TIMEOUT 在轮询中插入延迟。如果您在 XP 之类没有 TIMEOUT 的系统上，则可以`ping -n 2 ::1 >nul 2>nul`改用。

我在代码中包含了有关此解决方案如何工作的大量文档。***编辑***-*我通过删除一个不必要的代码块级别稍微简化了代码，并改进了文档。*

```
@echo off
setlocal

REM Define a base name for the temporary output files. I've incorporated
REM a random number in the file name to generally make it safe to run this
REM master script multiple times simultaneously. It is unlikely a collision
REM will occur, but incorporating a timestamp in the name would make it more
REM reliable.
set "baseName=%temp%\output%random%_"
set /a "progCount=2, completedCount=0"

REM Start each program with both stdout and stderr redirected to a temporary
REM ouptut file. The program will have an exclusive lock on the output file
REM until it finishes executing. I've assumed the program is another batch file
REM and I use the START /B switch so that the programs are run in the same
REM window as this master script. Any console program will work, and the
REM /B switch is optional.
start /b "" ^"cmd /c test.bat ^>"%baseName%1" 2^>^&1^"
start /b "" ^"cmd /c test2.bat ^>"%baseName%2" 2^>^&1^"
REM etc.

REM Clear any existing completed flags, just in case
for /l %%N in (1 1 %progCount%) do set "completed%%N="

:loopUntilDone

REM Introduce a delay so we don't inundate the CPU while we poll
timeout /nobreak 1 >nul

REM Loop through each of the output file numbers.
REM Redirect the stderr for the DO block to nul so that if the inner
REM block redirection fails, the error message will be suppressed.
for /l %%N in (1 1 %progCount%) do (

  REM Only test this particular program if the output file has been
  REM created (in other words, the program has started) and we haven't
  REM already detected that it has finished. Also redirect an unused
  REM file handle to the output file in append mode.  The redirection will
  REM fail if the program has not completed. If the redirection fails then
  REM the IF block is not executed.
  if not defined completed%%N if exist "%baseName%%%N" (

      REM We are within the block, meaning the redirection succeeded and
      REM the program must have finished. So print out the results.
      echo(
      echo Ouput for program%%N
      echo ---------------------------------------------
      type "%baseName%%%N"

      REM Set a flag so we know this program has finished
      set completed%%N=1

      REM Increment the completed count so we know when we are done
      set /a completedCount+=1

  ) 9>>"%baseName%%%N"

) 2>nul

if %completedCount% neq %progCount% goto :loopUntilDone

del "%baseName%*" 
```

# html - 如何使用 Ruby 检测 HTML 文档片段中的错误？

> ID：11661517
> 
> 赞同：2
> 
> 时间：2012-07-26T02:37:04.623
> 
> 标签：html, ruby, nokogiri

我正在从 Web 表单中收集一些 HTML 格式的内容。在保存此 HTML 内容之前，我想对其进行快速健全性检查，以确保它看起来格式正确（没有未闭合的标签，没有无效的标记）。

使用 Ruby 和/或任何流行的 gem，我可以检查一个 HTML 片段字符串，例如：

```
<p>foo</p><h1>Unclosed H1<p>bar</p> 
```

并发现诸如未闭合`h1`标签之类的东西？

我以为 Nokogiri 会在这里救我，但没有：

```
>> Nokogiri::HTML::DocumentFragment.parse("<p>foo</p><h1>Unclosed H1<p>bar</p>").errors
=> [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:56:22.947

你试过[`w3c_validators`](http://code.dunae.ca/w3c_validators/)吗？

```
[1] pry(main)> require 'w3c_validators'
=> true
[2] pry(main)> include W3CValidators
=> Object
[3] pry(main)> p MarkupValidator.new.validate_text('<!DOCTYPE html><html><body><p>foo</p><h1>Unclosed H1<p>bar</p></body></html>'); 
```

这为您提供了非常详细的验证结果。

或者，如果您只想检查结束标记，则可能`Nokogiri::XML::Document.parse().errors`相反，但这可能不起作用，除非 doctype 是 XHTML，因为其他 doctype 中的一些 HTML 元素甚至不需要结束标记。`w3c_validators`做得更好

# php - 将 .dict 转换为数组

> ID：11661523
> 
> 赞同：-2
> 
> 时间：2012-07-26T02:37:46.533
> 
> 标签：php, arrays, dictionary

如何转换 .dict 文件中的条目，例如：

> ```
> aveu
>     acknowledgement, admission 
> ```

到一个 php 数组，如

> $array['aveu'] = array(1 => '确认', 2 => '录取');

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:42:29.427

假设父记录之前没有空格，并且子记录以空格开头，以逗号分隔，循环遍历文件中的行。如果前面没有空格（通过`preg_match()`），则开始一个新的数组键和`explode()`后续的空格行。

```
$output = array();
$lines = file('yourfile.dict');
foreach ($lines as $line) {
  // Skip blank lines
  if (strlen(trim($line)) > 0) {
    // No leading whitespace, start a new key:
    if (!preg_match('/^\s+/', $line)) {
      $key = trim($line);
      $output[$key] = array();
    }
    // Otherwise, explode and add to the previous $key (if $key is non-empty)
    else if (!empty($key)) {
      $terms = explode(",", $line);
      // Trim off whitespace
      $terms = array_map('trim', $terms);
      // Merge them onto the existing key (if multiple lines)
      $output[$key] = array_merge($output[$key], $terms);
    }
    else {
      // Error - no current $key
      echo "??? We don't have an active key.";
    }
  }
} 
```

# javascript - 我如何编写javascript以在主页上重定向，如果screen.width <= 480，只有一次，在移动设备第一次遇到它时

> ID：11661529
> 
> 赞同：0
> 
> 时间：2012-07-26T02:38:30.687
> 
> 标签：javascript, redirect, mobile

我创建了一个基于屏幕宽度的重定向。

该页面是 [https://galleryofjewels.businesscatalyst.com/home](https://galleryofjewels.businesscatalyst.com/home)

我希望重定向只发生一次，当手机在这里第一次遇到“家”时： [https ://galleryofjewels.businesscatalyst.com/home](https://galleryofjewels.businesscatalyst.com/home)

我正在将“主页”重定向到一个名为“about-us-mobile”的页面，该页面使用此 javascript 设计用于 480 或更小的屏幕宽度：

```
if (screen.width <= 480) {
    document.location = "about-us-mobile ";
} 
```

我只有 2 个页面针对 480 或更少进行了优化，并且在这两个页面上都有一个链接“shop”返回到 galleryofjewels.businesscatalyst

我希望手机点击“shop”按钮可以看到完整的“主页”页面，而不会再次重定向到“about-us-mobile”。

所以我创建了一个页面，它是“主页”页面的副本，并将其命名为“home_full_site_shop”。它没有重定向。移动页面上的“商店”按钮链接到此页面。

如果手机最终尝试通过galleryofjewels.businesscatalyst任何页面上的“shop”按钮再次链接回主页，我希望它***不要***再次重定向到“about-us-mobile”。

简而言之，我希望重定向只发生一次，当手机第一次遇到galleryofjewels.businesscatalyst主页时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:47:54.347

如果您**只**使用 JavaScript，最好的选择可能是使用 GET 变量，该变量在您的站点识别尺寸后设置。设置的此变量将向每个页面指示相关链接应转到移动优化页面（您可以根据此 GET 变量的存在 [或不存在] 动态创建链接）。您实际上可以通过这种方式避免两种重定向。只需在您网站内的每次点击时传递 GET 变量（这可以通过动态修改所有加载页面链接来完成）。

如果您还有服务器端选项（可能是 PHP），那么您有一个更漂亮的选项。您可以使用会话/cookie 来存储当前用户是否移动，并在会话设置后向 Web 浏览器发送适当的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:44:30.470

很简单，通过设置（法律术语：技术）cookie（不包含唯一信息）。

cookie 选项得到了很好的跨浏览器支持并且有据可查（除非用户将其关闭，由于诸如合谋之类的意识工具，目前非常流行）。在这种情况下，如果您没有一些回退机制或优雅降级，那么用户就会遇到“问题”。
如果您还依赖 javascript，那么您的网站有 2 个要求：cookies 和 javascript。
因此，尽管 javascript/cookie 路由很容易实现，但从长远来看，进一步研究并没有什么坏处：

或者你可以潜入本地网络存储与它当前的所有怪癖

您可以使用基于 IP 的数据库或类似的东西将它记录在您的服务器上。

另一种选择是（如果您仍然呈现 html 服务器端）重写/更改文档和脚本中的所有链接（使用 GET 变量）......
或者 .htaccess mod-rewrite..？

我很高兴...
您还可以使用 2 个子域：在前门抓住用户，将他们重定向到您的分辨率/应用程序特定的子域，然后使用 javascript-function history.replace( ); 这样用户就无法在历史中导航回“前门”，因此他最终被困在子域的根目录中。

多田：P

因此，对这一要求的适当长期解决方案从做出选择开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T02:53:30.333

```
if (window.innerWidth <= 480) {
    window.location = "https://galleryofjewels.businesscatalyst.com/home";
} 
```

# android - 可以通过带有传递参数的 NFC 启动 android 应用程序

> ID：11661534
> 
> 赞同：1
> 
> 时间：2012-07-26T02:39:03.140
> 
> 标签：android, nfc

我想知道是否可以通过让 NFC 信号包含一些参数并通过 NFC 将这些参数传递给 Android 应用程序来简单地启动一个 Android 应用程序（我们计划为此开发自己的应用程序），以便依赖于参数通过，例如应用程序的某个部分被访问和/或打开的应用程序自动读取并保存芯片序列号？

使用 NFC 是否可以实现这种更高级的功能是否仅限于“启动该应用程序”，仅此而已？

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:05:32.587

对的，这是可能的。您可以定义多个启动应用程序的标准。一旦启动，您可以通过应用程序代码完成 NDEF 消息进行处理。

在不传递数据的情况下启动应用程序没有任何意义 - 在这种情况下，无论如何您都需要在应用程序启动后读取 NFC 标签或通过 NPP/SNEP 接收 NDEF，因此这些信息是合乎逻辑的已经传递给 Intent。

BR 斯坦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:21:07.170

您应该查看 Android 应用程序记录。将其放置在 NDEF 消息中，您可以根据需要另外添加外部类型记录或一些 text-、uri- 或 mimerecord。我整理了一个[NFC Eclipse 插件](http://code.google.com/p/nfc-eclipse-plugin/)，可以帮助您入门。

# java - Basic Java - 一个内部（嵌套？）类可以访问另一个吗？

> ID：11661535
> 
> 赞同：1
> 
> 时间：2012-07-26T02:39:08.207
> 
> 标签：java, android, inner-classes

这是，我认为这是一个基本的java问题：

这是一个Android项目。我有这个设置：

```
 public class MyFragmentActivity extends FragmentActivity implements
    ActionBar.TabListener {

     // lots of code edited out

    public static class RateFragment extends Fragment {

             // lots of code edited out

         class InsertTask extends AsyncTask<String, String, Void> {

               protected void onPostExecute(Void v) { {

                // I need to access ReviewTask here
                new ReviewTask().execute();

               } 

         }

    }

    public static class ReviewFragment extendsListFragment {

              class ReviewTask extends AsyncTask<String, String, Void> {

                  // code

              }

    }

} 
```

我真的在问一个基本的 Java 问题。我知道它不是 Android 中最好的方法。

如果您必须知道我在做什么：（如果这令人困惑，则此信息的优先级较低，仅针对某些上下文）当在 RateFragment 中按下按钮并将数据插入 MySQL 数据库时，我会调用 InsertTask。这就是我想在上面的代码中做的：在 InsertTask 中，最后，在另一个内部类中调用 ReviewTask。这将更新列表视图（位于另一个选项卡中）。

可以从 InsertTask 访问 ReviewTask 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T02:49:03.247

I don't think you can do it. I just tried it out. Here's what you can do though... have a method inside the fragment which the InsertTask's postExecute() method calls on. In this fragment method, you can create a new ReviewTask and fire the task. This way your inner classes just talks to your parent class which acts as a delegate between calls.

EDIT:

```
public class MyFragment extends FragmentActivity {

        private void delegateMethod(Object result) {
            TaskB b = new TaskB();
            b.doanotherthing(result);
        }

        class TaskA {
            ...
            public void onPostExecute() {
                Object result = new Object();
                delegateMethod(result);
            }
        }

        class TaskB {
            public void doanotherthing(Object o) {
                ...
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:46:18.627

如果您将 RateFragment 的声明更改为非静态，您可以调用

```
class InsertTask extends AsyncTask<String, String, Void> {

    protected void onPostExecute(Void v) { {

        MyFragmentActivity.this.(new RateFragment()).(new ReviewTask()).execute();

    } 

} 
```

Because your InsertTask is still inside an instance of MyFragmentActivity, the keyword `this` is still usable, you just have to tell it which "`this`" using `MyFragmentActivity.this`. Note that this is the class name, not an instance name.

# java - RemoteWebDriver.executeScript() 和 Selenium.getEval() 有什么区别？

> ID：11661539
> 
> 赞同：1
> 
> 时间：2012-07-26T02:40:03.543
> 
> 标签：java, javascript, selenium, webdriver, selenium-webdriver

这有什么区别：

```
RemoteWebDriver driver = new FirefoxDriver();
Object result = driver.executeScript("somefunction();"); 
```

还有这个：

```
RemoteWebDriver driver = new FirefoxDriver();
Selenium seleniumDriver = new WebDriverBackedSelenium(driver, driver.getCurrentUrl());
String result = seleniumDriver.getEval("somefunction();"); 
```

我有一个例子，当第一个命令有效，第二个命令挂起 Firefox 和其他方式。我想了解这两个功能之间的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:08:06.443

提供的脚本片段将作为匿名函数的主体执行。

```
 ((JavascriptExecutor)driver).executeScript("somefunction();"); 
```

在内部将这样的内容注入到文档中：

```
return function()
{ 
   somefunction(); 
}.call(); 
```

所以本质上在 webdriver 上，executeScript 同步执行并且可以阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:00:13.270

我想你想知道的都在[Selenium Webdriver Documentation](http://seleniumhq.org/docs/03_webdriver.html)。
特别是[WebDriver 与 Selenium-RC 相比如何“驱动”浏览器部分？](http://seleniumhq.org/docs/03_webdriver.html#how-does-webdriver-drive-the-browser-compared-to-selenium-rc)

# python - 在单独的列中将多个 NumPy 数组写入 CSV 文件？

> ID：11661542
> 
> 赞同：6
> 
> 时间：2012-07-26T02:40:10.847
> 
> 标签：python, csv, numpy

如何将多个numpy数组写入一个csv文件的多列？</p>

```
import numpy
import csv

arrA = numpy.array(file.root.a)
arrB = numpy.array(file.root.b)
arrC = numpy.array(file.root.c)

for i in range (480):
    for j in range (640):
        (write arrA[i,j] into column1,write arrB[i,j] into column2,write arrC[i,j] into column3) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T02:47:47.663

我认为这应该做你想要的：

```
output = np.column_stack((arrA.flatten(),arrB.flatten(),arrC.flatten()))
np.savetxt('output.dat',output,delimiter=',') 
```

# ruby - 我如何找到元素是否不在 ruby 数组中？

> ID：11661544
> 
> 赞同：0
> 
> 时间：2012-07-26T02:40:25.100
> 
> 标签：ruby

好的，所以我有这个数组

```
 array
 => [1620, 3093] 
```

我有一个整数

```
 num
 => 1620 
```

有没有一种简单的方法来查看数组中是否有另一个数字不是`num`

所以例如

数组中是否还有另一个不匹配的数字`num`。所以对于上面的例子我会返回 true 但如果数组是`[1620, 1620]`那么我会返回 false

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T02:56:04.027

```
arr.any?{|x| x != num } 
```

以上应该可以正常工作，可读且高效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T02:44:12.373

```
array.select{|array_num| array_num != num}.length > 0 
```

编辑：甚至更清洁：

```
(array - [num]).empty? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T02:44:51.327

```
array.reject{ |a| a == num }.size > 0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T05:29:34.277

用分隔符连接排序后的数组，并查找是否有 2 个相邻数字匹配。

array.sort.join(",").include?("#{num},#{num}")

# node.js - 如何在 MongoDB collection.find() 上获取回调

> ID：11661545
> 
> 赞同：47
> 
> 时间：2012-07-26T02:40:27.397
> 
> 标签：node.js, mongodb, express

当我`collection.find()`在 MongoDB/Node/Express 中运行时，我想在它完成时得到一个回调。什么是正确的语法？

```
 function (id,callback) {

    var o_id = new BSON.ObjectID(id);

    db.open(function(err,db){
      db.collection('users',function(err,collection){
        collection.find({'_id':o_id},function(err,results){  //What's the correct callback synatax here?
          db.close();
          callback(results);
        }) //find
      }) //collection
    }); //open
  } 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-26T03:09:04.747

这是正确的回调语法，但`find`提供给回调的是一个[`Cursor`](http://mongodb.github.io/node-mongodb-native/2.0/api/Cursor.html)，而不是文档数组。因此，如果您希望您的回调以文档数组的形式提供结果，请调用[`toArray`](http://mongodb.github.io/node-mongodb-native/2.0/api/Cursor.html#toArray)光标以返回它们：

```
collection.find({'_id':o_id}, function(err, cursor){
    cursor.toArray(callback);
    db.close();
}); 
```

请注意，您的函数的回调仍然需要提供一个`err`参数，以便调用者知道查询是否有效。

**2.x 驱动程序更新**

`find`现在返回光标而不是通过回调提供它，因此典型用法可以简化为：

```
collection.find({'_id': o_id}).toArray(function(err, results) {...}); 
```

或者在这种需要单个文档的情况下，使用起来更简单[`findOne`](http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#findOne)：

```
collection.findOne({'_id': o_id}, function(err, result) {...}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-26T15:58:35.650

根据 JohnnyHK 的回答，我只是将我的调用包装在 db.open() 方法中并且它起作用了。谢谢@JohnnyHK。

```
app.get('/answers', function (req, res){
     db.open(function(err,db){ // <------everything wrapped inside this function
         db.collection('answer', function(err, collection) {
             collection.find().toArray(function(err, items) {
                 console.log(items);
                 res.send(items);
             });
         });
     });
}); 
```

希望它作为一个例子有所帮助。

# java - Android：发布和测试模式？

> ID：11661547
> 
> 赞同：0
> 
> 时间：2012-07-26T02:40:42.310
> 
> 标签：java, android, eclipse, ant

我正在研究android项目，我想在运行时间上设置一些变量，怎么做？

更具体地说，我想要两个运行配置：

1.  预生产配置：我使用 url 进行测试（例如 String url = staging.domain.net）
2.  生产配置：我使用其他 url 的地方（例如 url = api.domain.net）

我虽然关于使用蚂蚁，但我不知道如何！

**编辑1：**

我的应用程序使用测试 URL 访问远程服务器和服务，有时我想使用生产 URL 而不是测试 URL。那么有可能有两个运行配置设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:27:03.990

您可以在代码中定义这两个 URL，并根据`BuildConfig.DEBUG`.

或者，如果您不想在代码中定义它们，您可以使用属性 ( `setprop prop value`)，然后在您的应用程序 ( `getprop prop`) 中检索它。

如果您使用的是模拟器，甚至还有一个 -prop 选项

```
-prop <name>=<value>           set system property on boot 
```

# xml - XSD 子元素可选/必需，基于父属性名称

> ID：11661550
> 
> 赞同：2
> 
> 时间：2012-07-26T02:41:00.940
> 
> 标签：xml, xsd

我正在研究 XSD 验证代码，并试图弄清楚如何验证具有

```
<root>
    <elementA attribute1=ID>
    ...
    </elementA>
    <elementA attribute2=ID>
    ...
    </elementA>
</root> 
```

并且我想制作 XSD，它根据属性名称验证相同的元素，并使某些子元素`attribute1`在`attribute2`.

请注意，“...”是相同的元素，其中某些字段对于`attribute1`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:36:35.043

在 XSD 1.0 中，元素的类型只能取决于元素名称，而不取决于其属性。XSD 1.1 使用称为“条件类型分配”的工具消除了这个限制。XSD 1.1 目前仅在 Xerces 和 Saxon 中实现。

# hadoop - 分布式缓存 Hadoop 未检索文件内容

> ID：11661552
> 
> 赞同：0
> 
> 时间：2012-07-26T02:41:14.853
> 
> 标签：hadoop, mapreduce

我得到了一些类似垃圾的值，而不是我想用作分布式缓存的文件中的数据。

作业配置如下：

```
Configuration config5 = new Configuration();
JobConf conf5 = new JobConf(config5, Job5.class);
conf5.setJobName("Job5");
conf5.setOutputKeyClass(Text.class);
conf5.setOutputValueClass(Text.class);
conf5.setMapperClass(MapThree4c.class);
conf5.setReducerClass(ReduceThree5.class);
conf5.setInputFormat(TextInputFormat.class);
conf5.setOutputFormat(TextOutputFormat.class);

DistributedCache.addCacheFile(new URI("/home/users/mlakshm/ap1228"), conf5);
FileInputFormat.setInputPaths(conf5, new Path(other_args.get(5)));
FileOutputFormat.setOutputPath(conf5, new Path(other_args.get(6)));

JobClient.runJob(conf5); 
```

在映射器中，我有以下代码：

```
public class MapThree4c extends MapReduceBase implements Mapper<LongWritable, Text, 
Text, Text >{
private Set<String> prefixCandidates = new HashSet<String>();

Text a = new Text();
public void configure(JobConf conf5) {

Path[] dates = new Path[0];
try {
        dates = DistributedCache.getLocalCacheFiles(conf5);
        System.out.println("candidates: "+candidates);
        String astr = dates.toString();
        a = new Text(astr);

      } catch (IOException ioe) {
        System.err.println("Caught exception while getting cached files: " +   
      StringUtils.stringifyException(ioe));
      }

  }

   public void map(LongWritable key, Text value, OutputCollector<Text, Text> output, 
   Reporter reporter) throws IOException {

     String line = value.toString();
     StringTokenizer st = new StringTokenizer(line);
     st.nextToken();
     String t = st.nextToken();
     String uidi = st.nextToken();
     String uidj = st.nextToken();

     String check = null;

     output.collect(new Text(line), a);

        }

    } 
```

我从这个映射器得到的输出值是：[Lorg.apache.hadoop.fs.Path;@786c1a82
而不是分布式缓存文件中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:31:26.037

这看起来就像您在数组上调用 toString() 时得到的，如果您查看 DistributedCache.getLocalCacheFiles() 的 javadocs，这就是它返回的内容。如果您需要实际读取缓存中文件的内容，您可以使用标准 java API 打开/读取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:20:52.093

从您的代码：

`Path[] dates = DistributedCache.getLocalCacheFiles(conf5);`

暗示：

`String astr = dates.toString();`// 是指向上述数组（即日期）的指针，这就是您在输出中看到的 [Lorg.apache.hadoop.fs.Path;@786c1a82。

您需要执行以下操作才能查看实际路径：

```
for(Path cacheFile: dates){

    output.collect(new Text(line), new Text(cacheFile.getName()));

} 
```

# android - 当 TextView 在 TableLayout 的子项中时，您可以拖放它吗？

> ID：11661553
> 
> 赞同：0
> 
> 时间：2012-07-26T02:41:16.053
> 
> 标签：android, drag-and-drop, android-tablelayout

到目前为止，我的代码如下所示，因为我正在对其进行测试：

```
public class TestActivity extends Activity {
TableLayout table;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);

    table = (TableLayout)findViewById(R.id.table);
    setStuff();
    setStuff2();
    setStuff3();  
}

public void setStuff() {
    LayoutInflater inflater = LayoutInflater.from(this);
    TextView view = (TextView)inflater.inflate(R.layout.some_text, table, false);
    view.setText("First");
    view.setTag(String.valueOf(table.getChildCount()));
    view.setOnLongClickListener(new View.OnLongClickListener() {            
        @Override
        public boolean onLongClick(View v) {
            v.startDrag(ClipData.newPlainText("index", v.getTag().toString()), new View.DragShadowBuilder(v), null, 0);
            Toast.makeText(v.getContext(), "index you are clicking on is "+v.getTag().toString(), Toast.LENGTH_SHORT).show();
            return false;
        }
    });
    table.addView(view);
}
public void setStuff2() {
    LayoutInflater inflater = LayoutInflater.from(this);
    TextView view = (TextView)inflater.inflate(R.layout.some_text, table, false);
    view.setText("Second");
    view.setTag(String.valueOf(table.getChildCount()));
    table.addView(view);
}
public void setStuff3() {
    LayoutInflater inflater = LayoutInflater.from(this);
    TextView view = (TextView)inflater.inflate(R.layout.some_text, table, false);
    view.setText("Three");
    view.setTag(String.valueOf(table.getChildCount()));
    table.addView(view);
}

protected class MyDragListener implements View.OnDragListener {

    @Override
    public boolean onDrag(View v, DragEvent event) {

        //Stuff to check the event action cases

        return false;
    }

}//end of MyDragListener 
```

现在，当我长按第一项时，它运行正常，因为我收到了 Toast 通知。虽然我没有看到 DragShadow，但我应该会看到。我的猜测是，因为它是 TableLayout 的一部分，所以可能会导致这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:49:27.803

TableView 通常需要 TableRows 来填充它。如果您将 TextView 放在 TableRow 中，并且将此 TableRow 放在 TableView 中，则您可以将 TextView 拖放到任何您想要的位置，前提是您为 OnDragListeners 等使用了正确的代码，当然您不能拖放一个不是设置在布局中，因为没有可以放置它的地方...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:00:52.433

好吧，这很尴尬，但我想我只是想通了为什么它不让我拖放`TextView`. 我真的不知道为什么，但我完全猜测这仅限于绑定到其他s 的`startDrag()`非根级别s。所以，我的 xml 是这样的：`View``View`

**起初**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/da_text"></TextView> 
```

**编辑**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/da_text"/>

</LinearLayout> 
```

希望这对其他人有帮助。Drag-n-Drop 上的问题不多，答案更少，所以不会有任何伤害。

# java - 如何将值注入模拟对象的构造函数或通过设置器？收到意外调用错误

> ID：11661556
> 
> 赞同：1
> 
> 时间：2012-07-26T02:41:32.917
> 
> 标签：java, junit, jmock

我的问题：如何创建一个模拟对象并通过构造函数或设置器注入属性？

我收到意外的调用错误。我正在@Before 中对我的模拟对象进行设置，以设置我的BAPI 的名称属性。当我执行测试时，我的 setName 方法出现意外调用错误。但是，我真的不想测试这种方法。我只是插入它，所以当我的代码执行方法 checkParm(b) 时值就在那里。

如果我没有对 mocked 的 setter 增加任何期望，我会得到意想不到的调用。但是，如果我将此代码添加到期望中，我仍然会得到意外的调用。

```
 ignoring(mockAdapter).setName(BAPI_NAME);
        inSequence(sequence); 
```

这是我的@Before 方法

```
@Before
public void setUp() throws Exception {

    objectUnderTest = new ApoSAPExtractor();

    mockAdapter = context.mock(BapiAdapter.class);
    mockAdapter.setName(BAPI_NAME);

    apoResults = new ApoResults();
    apoParameterBean = new ApoParameterBean();
} 
```

然后我的测试方法：

```
@Test
public final void testExtract() throws Exception {

    final Sequence sequence = context.sequence(SEQUENCE);

    context.checking(new Expectations() {{

        atLeast(1).of(mockAdapter).getName();
        will(returnValue(new String())); 
        inSequence(sequence);

        oneOf(mockAdapter).activate();
        inSequence(sequence);

        oneOf(mockAdapter).getImportTableParameter(IM_PARMS);
        inSequence(sequence);
        will(returnValue(JCoTable.class)); 

        oneOf(mockAdapter).execute(); 
        inSequence(sequence);

        oneOf(mockAdapter).getExportTableAdapter(EX_PO_APO); 
        inSequence(sequence);
        will(returnValue(new TableAdapter(with(any(JCoTable.class)))));

    }});

    objectUnderTest.extract(mockAdapter, apoParameterBean);     
    context.assertIsSatisfied();

} 
```

我正在嘲笑的班级：

```
 public class ApoSAPExtractor implements SAPExtractor<ApoResults, ApoParameterBean> {

private final static Logger logger = Logger.getLogger(ApoSAPExtractor.class);

public List<ApoResults> extract(BapiAdapter b, ApoParameterBean pb) throws JCoException, Exception {

    checkParm(b);

    List<ApoResults>list = new ArrayList<ApoResults>();
    try {
        b.activate();

        JCoTable itp = b.getImportTableParameter(APOConstants.BAPI_IM_PARMS);
        itp.appendRow();

        JCoTable t = itp.getTable(APOConstants.BAPI_DOC_TYPES);
        Utils.appendParm(t, pb.getDocTypes());

        b.execute();

        TableAdapter ta = b.getExportTableAdapter(APOConstants.BAPI_EX_PO_APO);

        for (int i = 0; i < ta.size(); i++) {

            ApoResults ar = new ApoResults();

            ... lots of setters ...

            list.add(ar);

            ta.next();
        }

    } catch (Exception e) {
        logger.info(String.format("Program %s failed.",this.getClass().getSimpleName(),  "failed"));
        e.printStackTrace();
        throw e;
    }

    return list;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:13:35.683

你不能把东西注入到一个模拟中，你可以对它设定期望

取而代之的是（这会给您带来意外的异常）：

```
mockAdapter.setName(BAPI_NAME); 
```

你可能会在你的期望中这样做：

```
atLeast(1).of(mockAdapter).getName();
will(returnValue(BAPI_NAME)); 
```

# asp.net - Bootstrap：Subnav 与演示站点上的样式不同

> ID：11661559
> 
> 赞同：0
> 
> 时间：2012-07-26T02:42:01.223
> 
> 标签：asp.net, twitter-bootstrap

我的引导子导航看起来与演示站点上的不一样。这是我的标记：

```
<div class="subnav">
    <ul class="nav nav-pills">
        <li><a href="#demoModal">Modal</a></li>
        <li><a href="#demoTabs">Tabs</a></li>
        <li><a href="#demoAccordion">Accordion</a></li>
        <li><a href="#demoOther">Other</a></li>
    </ul>
</div> 
```

以及我所看到的图像：

![坏的](../Images/7dd9ddd97143b6038adaf73747758a68.png)

这是我要复制的内容：

![好的](../Images/facdf602aac082d158ece4e6be84259c.png)

我尝试完全复制标记，但无济于事。我想知道这是否与父元素不同有关..所以我把我的移到了一个“容器流体”类的 div 中，但这没有帮助。也许这里有人可以发现我的眼睛错过的东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:23:46.440

这是因为样式不包含在引导程序中。您可以从他们的标记中获取 docs.css 并引用它。这似乎是为子导航提供您正在寻找的样式的 CSS。

IE ![在此处输入图像描述](../Images/7aaf7320ee60380ba386368773d094f5.png)

# c++ - 你如何使用带有线程的套接字？c++ 与 ubuntu

> ID：11661565
> 
> 赞同：1
> 
> 时间：2012-07-26T02:43:12.640
> 
> 标签：c++, multithreading, sockets

我想知道为什么在使用带有套接字的线程时我无法发送数据。

我想知道为什么当我使用第一种方法（无线程）发送时，它可以工作，但使用第二种方法，它无法发送数据。

这是我的声明：

```
int main(int argc, char *argv[]) 
{
    int sd, rc, i;
    struct sockaddr_in cliAddr, remoteServAddr;
    struct hostent *h;
    h = gethostbyname(argv[1]);
    inet_ntoa(*(struct in_addr *)h->h_addr_list[0]));

    remoteServAddr.sin_family = h->h_addrtype;
    memcpy((char *) &remoteServAddr.sin_addr.s_addr,h->h_addr_list[0], h->h_length);
    remoteServAddr.sin_port = htons(REMOTE_SERVER_PORT);

    /* socket creation */
    sd = socket(AF_INET,SOCK_DGRAM,0);

    /* bind any port */
    cliAddr.sin_family = AF_INET;
    cliAddr.sin_addr.s_addr = htonl(INADDR_ANY);
    cliAddr.sin_port = htons(0);

    rc = bind(sd, (struct sockaddr *) &cliAddr, sizeof(cliAddr));

    socklen_t remoteServLen = sizeof(remoteServAddr);
    //this is my own class to store the pointers to the following variables
    clientInfo ci(&sd,&rc,&remoteServLen,&remoteServAddr,&cliAddr); 
```

/*第一种方法*/

```
 char *data;
    char input[MAX_MSG];

    std::cout << "Enter message to send (type /q to quit) : ";  
    std::cin >> input;
    data = input;

    rc = sendto(*(ci.getSd()), data, strlen(data)+1, 0,(struct sockaddr *) ci.getCliAddr(),*(ci.getCliLen())); 
```

/*第一种方法*/

/*第二种方法*/

```
 pthread_t thread[2];
    int status;

    status = pthread_create (&thread[1], NULL, sendFunction,&ci); 
```

/*第二种方法*/

```
} 
```

/*这是我的线程方法*/

```
void* sendFunction (void* temp)
{

    int status;
    char *data;
    char input[MAX_MSG];
    int rc;

    clientInfo *ci;
    ci = (clientInfo*)temp;

    status = pthread_detach (pthread_self ());

    while(1)
    {
        std::cout << "Enter message to send (type /q to quit) : ";  
        std::cin >> input;
        data = input;

        rc = sendto(*(ci->getSd()), data, strlen(data)+1, 0,(struct sockaddr *) ci->getCliAddr(),*(ci->getCliLen()));

        if(rc<0) 
        {
            printf("Cannot send data %s \n",data);
        }
    }//end of while loop

    return NULL;
}//end of sendFunction method 
```

：） 提前致谢！:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T02:52:05.547

如果您提供了目标平台/环境，那就太好了。我假设你使用的是 Linux，所以我最好的猜测是你的线程实际上在它有机会发送任何东西之前就终止了。您可能想知道为什么会这样，因为您已将其分离。好吧，对于那些阅读过一些关于 POSIX 线程的抽象文章/书籍的人来说，这是一个非常常见的错误。事实是 - 它不是那样工作的。这在 Linux 的手册页中有明确说明[`pthread_detach()`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_detach.3.html)：

```
The detached attribute merely determines the behavior of the system when the
thread terminates; it does not prevent the thread from being terminated if the
process terminates using exit(3) (or equivalently, if the main thread
returns). 
```

我建议您实际上`join()`从主线程“发送”线程，看看它是否可以工作。如果没有 - 回来更新。此外，使用调试器永远不会有什么坏处——它很可能会立即显示出问题所在。

附带说明一下，线程不是[C10K 问题](http://www.kegel.com/c10k.html)的解决方案。例如，创建两个线程只是为了有两个（阻塞）发送者根本不是可行的方法。为此，操作系统提供异步通知机制。例如，Linux 得到了[epoll](http://www.kernel.org/doc/man-pages/online/pages/man4/epoll.4.html)，FreeBSD（和 OS X :-)）是建立在[kqueue](http://en.wikipedia.org/wiki/Kqueue)之上的。还有轮询、选择、端口完成等。还有一些 API 封装了这些机制（出于可移植性和/或简化的原因）。[libevent](http://libevent.org/)和[Boost.Asio](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio.html)是最受欢迎的选择。

希望能帮助到你。

# xml - 从 OpenERP 中的按钮启动向导

> ID：11661567
> 
> 赞同：5
> 
> 时间：2012-07-26T02:43:18.450
> 
> 标签：xml, button, wizard, openerp

我正在尝试从 OpenERP 中的按钮调用的操作启动向导。我可以很好地使用侧面菜单按钮启动向导，但是每当我在按钮中使用该操作时，我只会刷新几次，而不会打开新表单。

该向导非常基本。这是代码：

向导.xml

```
<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_res_partner_add_terminal_wizard" model="ir.ui.view">
            <field name="name">res.partner.terminal.form</field>
            <field name="model">res.partner.terminal</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Add terminal">
                    <group colspan="4" >
                        <separator string="Select terminals to assign" colspan="4"/>
                        <field name="terminal_id" string="Terminals" domain="[('state','=','available')]"/>
                        <newline/>
                    </group>
                    <separator string="" colspan="4" />
                    <group colspan="4" col="6">
                        <button  icon="gtk-cancel" special="cancel" string="Cancel"/>
                        <button  icon="gtk-ok" name="add_terminal" string="Assign Terminal" type="object"/>
                    </group>
               </form>
            </field>
        </record>

        <record id="action_res_partner_terminal" model="ir.actions.act_window">
            <field name="name">Assign Terminal</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.terminal</field>
            <field name="src_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_res_partner_add_terminal_wizard"/>
            <field name="target">new</field> -->
            <field name="key2">client_action_multi</field>
        </record>

        <act_window id="action_res_partner_terminal_wizard"
                name="Assign Terminal"
                res_model="res.partner.terminal" 
                src_model="res.partner"
                view_mode="form" 
                key2="client_action_multi"
                target="new"
        />

    </data>
</openerp> 
```

我有按钮的代码：

```
<button  name="$(universal_account.action_res_partner_terminal_wizard)d" string="Assign Terminal" type="action" /> 
```

我已经尝试将直接的 XML id 放在那里（没有 $()d ），并且我尝试使用上面定义的任一操作，都具有相同的结果。如果我输入了错误的操作名称，我会收到一个错误，但仅此而已。关于从这里去哪里的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T15:10:20.580

In your button definition replace `$(...)d` with `%(...)d`.

XML_ID substitution uses the percentage sign, not the dollar sign.

BTW, you do not need the first `act_window`. Defining the `act_window` through record tag will not create the sidebar link; you have to use the shortcut tag `<act_window>` or add the side bar link with `ir_value` record. The second `act_window` (`action_res_partner_terminal_wizard`) will create the sidebar link and get used for the button action.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-26T04:28:52.580

您的 wizard.xml 应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_res_partner_add_terminal_wizard" model="ir.ui.view">
            <field name="name">res.partner.terminal.form</field>
            <field name="model">res.partner.terminal</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Add terminal">
                    <group colspan="4" >
                        <separator string="Select terminals to assign" colspan="4"/>
                        <field name="terminal_id" string="Terminals" domain="[('state','=','available')]"/>
                        <newline/>
                    </group>
                    <separator string="" colspan="4" />
                    <group colspan="4" col="6">
                        <button  icon="gtk-cancel" special="cancel" string="Cancel"/>
                        <button  icon="gtk-ok" name="add_terminal" string="Assign Terminal" type="object"/>
                    </group>
               </form>
            </field>
        </record>

        <record id="action_res_partner_terminal" model="ir.actions.act_window">
            <field name="name">Assign Terminal</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.terminal</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_res_partner_add_terminal_wizard"/>
            <field name="target">new</field>
        </record>
    </data>
</openerp> 
```

和 On View 按钮应该定义如下

```
<button  name="$(universal_account.action_res_partner_terminal)d" 
         string="Assign Terminal" 
         type="action" 
         help="Assign Terminal"/> 
```

您必须定义`ir.actions.act_window`on button 操作的 XML Id 而不是`act_window`xml id。

问候。

# css - Drupal Zen 主题中使用的浮动侧边栏方法

> ID：11661572
> 
> 赞同：1
> 
> 时间：2012-07-26T02:43:42.687
> 
> 标签：css, drupal, drupal-theming, drupal-zen

在 Drupal Zen 主题中，我注意到侧边栏和主 div 都向左浮动，每个 div 的 margin-right 设置回页面的 0 位置。[你可以在这里](http://jsfiddle.net/suke/7shnh/)看到演示。我知道有很多方法可以达到相同的结果，但我只是对使用这种方法的优势感到好奇。为什么不让侧边栏第二个浮动到右边呢？提前致谢！

```
#main {
    float: left;
    margin-left: 20%;
    margin-right: -80%;
    width: 60%;
    background-color: #eee;
}

#sidebar-first {
    float: left;
    margin-left: 0;
    margin-right: -20%;
    width: 20%;
    background-color: #FFFF66;
}

#sidebar-second {
    float: left;
    margin-left: 80%;
    margin-right: -100%;
    width: 20%;
    background-color: #FFFF66;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:54:10.923

首先要想到的是，将它们全部浮动到左侧将使每个容器与其他容器对接。如果第二个侧边栏向右浮动并且包含的​​ div 大于其子 div 的总和，那么第二个侧边栏最终会与其他侧边栏分开。将它们全部浮动到左侧更容易保持布局流畅。

想到的第二件事，可能更重要的是，通常只在一个方向上应用浮动和边距之类的东西通常是好的。当它们都朝着一个方向发展时，在开发过程中更容易跟踪。下推和上推的边距或左右浮动的边距只会给开发人员增加一层混乱。

还有一些关于浮动方向相对于边距方向的 IE 错误，虽然我记不清它们的确切位置......认为这就像不在浮动的相同方向上应用边距......因此它们向左浮动和边距（？）对。

PS：

CSS 向导 Harry Roberts 写了一篇很棒的文章，关于[为什么要保持边距和事情都在一个方向。](http://csswizardry.com/2012/06/single-direction-margin-declarations/)

以及第一篇关于在[浮动的同一方向上添加边距时的IE Bug。](http://www.positioniseverything.net/explorer/doubled-margin.html). 问题是它会使 IE5/6 中的边距翻倍。恕我直言，我认为我们不再需要为 lte IE6 进行设计，但最好的做法仍然是设置边距并朝相反的方向浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T20:08:48.493

根据我在 Drupal 时代的记忆，以这种方式设置 Zen 主题的主要原因是实际页面内容可以首先在 HTML 中打印出来。（实际上有几个 Drupal 主题使用了这种方法，尽管我认为 zen 是最好的例子）。

然后，他们将所有内容都向左浮动，并使用一些疯狂的边距数学来使导航看起来在顶部，侧边栏一个显示在内容的左侧，然后侧边栏二显示在内容的右侧。

这是为了在屏幕阅读器、机器人等的可访问性方面更加友好。

我相信这篇老A list Apart文章大致解释了使用中的方法：http: [//alistapart.com/article/negativemargins](http://alistapart.com/article/negativemargins)

# ubuntu - mount.nfs：挂载时服务器拒绝访问

> ID：11661575
> 
> 赞同：4
> 
> 时间：2012-07-26T02:44:22.180
> 
> 标签：ubuntu

我正在运行 Linux Ubuntu VM，我想将网络驱动器从 Windows 服务器映射到 VM。但是，我收到以下错误： mount.nfs: access denied by server while mount

我找不到任何解决方案。我一直在寻找过去的 2 个小时，现在这让我发疯了！我以前有一个严重的安装错误，并通过

```
apt-get install nfs-common 
```

然后，我尝试重新启动 nfs-common，以为它是一个服务，经过一番谷歌搜索，我发现它实际上是一个包。我使用以下命令找到了与之关联的文件：

```
 dpkg -L nfs-common | grep /etc/init.d 
```

得到了这个：

```
/etc/init.d
/etc/init.d/statd
/etc/init.d/statd-mounting
/etc/init.d/gssd
/etc/init.d/idmapd 
```

现在，我不知道从这里去哪里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:38:28.607

对于遇到相同错误的任何人，这是我修复它的方法。我花了一整天的时间护目镜 0.o

首先，我发现网络共享受密码保护。所以我使用了 smbmount，但经过更多的谷歌搜索，我发现以下链接对我有很大帮助：

[永久挂载 smbfs 共享帮助文件](http://web.archive.org/web/20120704073919/http://www.justlinux.com/nhf/Filesystems/Mounting_smbfs_Shares_Permanently.html)

现在，我正在尝试找出一种方法是否可以在凭据文件中加密我的密码。我不喜欢将密码“裸露”地留在外面。:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-11T17:11:57.183

在 Docker 容器中使用 NFS 时，我看到了上述错误消息。以下安装有帮助：

```
sudo apt install netbase 
```

原因：文件 /etc/services 丢失

原始来源：[https](https://github.com/boot2docker/boot2docker/issues/1262) ://github.com/boot2docker/boot2docker/issues/1262 （Mathias Rühle，非常感谢！！！）

对于 googlers，此错误消息发生在给定的上下文中：

```
mount.nfs: access denied by server while mounting
mount.nfs: rpc.statd is not running but is required for remote locking.
mount.nfs: Either use '-o nolock' to keep locks local, or start statd. 
```

（后两者在使用 -o nfsvers=3 时）。

# php - 无法保存 $_GET 变量

> ID：11661576
> 
> 赞同：2
> 
> 时间：2012-07-26T02:44:27.570
> 
> 标签：php, regex, .htaccess

我想从 /gallery/X 重定向到 gallery.php?category=X

但是当我真正找到地址时，我的旧 $_GET 变量“类别”被转换为以下形式：

```
$_GET['category'] = "X.php/X" 
```

这就是我的 .htaccess 的样子：

```
RewriteBase /

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

RewriteCond  %{REQUEST_FILENAME} !-d
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteRule ^gallery/(.*)$ /gallery.php?category=$1 [L] 
```

我在 RegEx 方面非常糟糕，对 .htaccess 几乎一无所知。我一直在尝试使用此重写规则来保留 $_GET 变量，但我似乎没有做任何事情。我应该在这里做什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:54:08.367

移动你的规则：

```
RewriteEngine on
RewriteBase /

RewriteCond  %{REQUEST_FILENAME} !-d
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteRule ^gallery/(.*)$ /gallery.php?category=$1 [L]

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

另外，添加`QSA`到您的操作中，`[L,QSA]`. 这会在重定向期间附加查询字符串，因此它应该保留您以前的数据。

**解释：**

您的重写需要按特定顺序进行，因为该`[L]`选项就像向服务器发出全新的请求。因此，当您的请求`gallery/X`进入时，它会将您的请求重写为`/gallery.php?category=X`. 当服务器请求此页面时，它匹配您的第一个规则，这意味着它被视为`X.php/X`然后作为额外的返回到原始请求`$1`。

听起来令人困惑，但我认为这就是发生的事情。

# javascript - HTML5 存储通配符域？

> ID：11661578
> 
> 赞同：3
> 
> 时间：2012-07-26T02:44:41.340
> 
> 标签：javascript, html

> **可能重复：**
> [跨子域使用 localStorage](https://stackoverflow.com/questions/4026479/use-localstorage-across-subdomains)
> [跨域 localStorage 与 iframe (Chrome)](https://stackoverflow.com/questions/10762096/cross-domain-localstorage-with-iframes-chrome)

我想我已经知道答案了，但我想知道是否有任何支持或可能通过通配符域存储 localStorage 和 sessionStorage？

我想出的唯一解决方案是将其存储在单个域中，然后使用隐藏的 iframe 和 postMessage / receiveMessage 来完成此操作，以便在我使用通配符子域驱动数据时跨子域进行存储和检索。这可行，但是是一种 hack，并且每次都需要 iframe 加载作为额外请求。除了使用增加带宽的通配符 cookie 之外，还有什么更简洁的建议吗？

# jquery - 将多个 ul 元素浓缩为一个

> ID：11661579
> 
> 赞同：0
> 
> 时间：2012-07-26T02:44:42.160
> 
> 标签：jquery, html-lists

我的html是这样生成的：

```
 <div class="tags">
    <ul>
        <li>Red</li>
        <li>Green</li>
    </ul>

    <ul>
        <li>Blue</li>
        <li>Yellow</li>
    </ul>

</div> 
```

去除多余的 ul 元素并浓缩为一个的最佳方法是什么。例如：

```
 <div class="tags">
    <ul>
        <li>Red</li>
        <li>Green</li>
        <li>Blue</li>
        <li>Yellow</li>
    </ul>

</div> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:47:39.377

可能有一个聪明的（er）方法可以做到这一点，但简单的迭代应该可以让你到达那里：

```
$result = $('<ul></ul>');
$('ul').each(function() {
  $(this).children('li').appendTo($result);
});
$('.tags').empty().append($result); 
```

[​在这里](http://jsfiddle.net/yS3fg/)摆弄

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:51:06.853

```
$('.tags li').appendTo('.tags > ul:first-child');
$('.tags > ul:not(:first-child)').remove(); 
```

[小提琴](http://jsfiddle.net/UEVwU/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:19:38.123

```
$('.tags ul:eq(0)' )  // targeting first ul
    .append( $('.tags ul:gt(0) li') )  // append all children of other ul
    .parent()  // jump to .tags
    .find('ul:gt(0)')  // target all ul accept first
    .remove(); ​// remove those ul​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**或者**

```
$('.tags').html($('<ul/>', {
    html: $('.tags ul li')
}))​;​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T02:56:44.933

尝试这个

```
$('div.tags').html($('<ul></ul>').html($('div.tags ul li'))); 
```

[**演示。**](http://jsfiddle.net/heera/UtQJp/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T02:58:23.420

这是一个简单的答案

```
var thisUL = $('ul').eq(0);
    $('li').each(function() {
    $(this).appendTo(thisUL);
      $('ul').each(function() {
       var elem = $(this);
         if (elem.children().length == 0) {
          elem.remove();
         }
     });
   }); 
```

# c++ - 如何将 Flash 对象绘制到内存 DC 中？

> ID：11661580
> 
> 赞同：0
> 
> 时间：2012-07-26T02:44:48.330
> 
> 标签：c++, vb.net, flash, gdi

我正在编写一个小游戏（使用 DC），我想使用一些 Flash 文件在我的游戏中将动画显示到屏幕上，但我正在使用内存 DC 进行绘制。

我想将 FlashPlayer 的输出设备更改为我的内存 DC。那可能吗？我应该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:32:48.207

您需要实现一个使用 IOleInPlaceSiteWindowless 的 ActiveX 容器。IOleInPlaceSiteWindowless 包含一个 GetDC() 函数，flash 将在其中绘制。

这是一个很好的例子： http: [//www.codeproject.com/Articles/33516/ATL-Windowless-ActiveX-Media-Container](http://www.codeproject.com/Articles/33516/ATL-Windowless-ActiveX-Media-Container)

# c# - 带有 set & get 的显式只读属性是否等同于 get & private set？

> ID：11661583
> 
> 赞同：3
> 
> 时间：2012-07-26T02:45:30.390
> 
> 标签：c#

假设我有 2 个属性

```
public readonly list<int> numberListReadonly { get; set; }

public list<int> numberListPrivateSet { get; private set; } 
```

对于那些我可以在 Foo 中有一个构造函数/私有函数的属性，我可以启动这些列表而不会出错

```
public Foo()
{
    numberListReadonly = new list<int>();
    numberListPrivateSet = new list<int>();
}

public void FooInside()
{
    numberListReadonly = new list<int>();
    numberListPrivateSet = new list<int>();
} 
```

当我从课外访问时

```
void FooOutside()
{
    Foo.numberListReadonly = new List<int>();
    Foo.numberListPrivateSet = new List<int>()
} 
```

编译器抛出错误，这是预期的。
“Foo.numberListReadonly 不能分配给——它是只读的”
“Foo.numberListPrivateSet 不能分配给——它是只读的”

* * *

我做了一个搜索，似乎“常见做法”是在“只读”属性上使用私有集，并且在类中具有“设置”的能力
那么带有 set & get 的显式只读属性是否等同于 get & 私有集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T02:55:55.203

不。

私有集意味着您可以在类中的任何位置更改成员的值。带有 set 的只读意味着它只能在构造函数中设置，从而保证它不会在其他任何地方更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T02:56:26.833

使用 readonly 的概念是 - 您只能在初始化时分配值，而不是在那之后。这就是为什么它说 - 只读。

私有集有不同的画面，它允许您在任何时间点修改值，但仅限于类级别。

希望这可以消除您的疑问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T03:00:28.820

不，它们是不同的。C# 中的 readonly 修饰符通常用于将字段（而非属性）标记为只读。此属性允许在同一类的构造函数中设置字段值。

对于真正的只读属性，推荐的方法是省略 setter。私有 setter 只是表明该属性不能在类之外设置。

# ssl - Heroku SSL 证书：更改默认电子邮件地址

> ID：11661584
> 
> 赞同：0
> 
> 时间：2012-07-26T02:45:32.307
> 
> 标签：ssl, heroku, dns, cname

我正在尝试将我刚刚购买的 SSL 证书添加到我的自定义域 heroku 应用程序中。现在我有 www.tradespring.net CNAME'd 到 tradespring.herokuapp.com。

我正在阅读这篇文章：[https](https://devcenter.heroku.com/articles/ssl) ://devcenter.heroku.com/articles/ssl ，我已经到了添加 SSL 插件的地步。

但它会将其添加到错误的应用程序中。它将它添加到我以前帐户中的一个以前的应用程序中，该帐户现在已被删除。我如何告诉它将其添加到我的应用程序中。当我运行 heroku 应用程序时，它只列出一个，这是正确的。

```
alex@alex-ThinkPad-T410:~$ heroku addons:add ssl:endpoint
Adding ssl:endpoint to sharp-leaf-1669... failed
 !    App not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:17:19.557

您需要在命令后添加应用名称，如下所示：

$ heroku addons:add ssl:endpoint --app tradespring

# c# - 带有通用方法的奇怪智能感知

> ID：11661587
> 
> 赞同：-1
> 
> 时间：2012-07-26T02:45:54.917
> 
> 标签：c#, visual-studio-2010, intellisense

我有这样的代码：

```
void F(bool a, bool b) { }
void F(int a) { }
int G<T1, T2>(int a) { return 1; }
class A { }
class B { }

void Main(string[] args)
{
    int G = 1;
    int A = 1;
    int B = 1;

    F(G<A, B>(7));      // call F(int a)
    F(G<A, B>(7 / 3));  // call F(int a)
    F(G<A, B>3);        // call F(bool a, bool b)
} 
```

但是当我将鼠标放在函数`A`的第三个调用上时`Main`，它说它`class Sample.Program.A`不是`(local variable) int A`. 为什么会这样？

![在此处输入图像描述](../Images/96294a44c3f48e6aba200cd86a2d6202.png)

我在框架 4 中使用 Visual Studio 2010 Professional。您的 IntelliSense 是否相同？

* * *

对于那些没有立即理解第三行的人`F(G<A, B>3);`

这是`F(` `G < A` `,` `B > 3` `);`

哪里`G < A`是 bool`B > 3`也是 bool 并且该函数正在调用该`void F(bool a, bool b)`方法。

* * *

此代码的目的仅用于教育目的，这就是它的原因。但 IntelliSense 在第三行无法正常工作`F(G<A, B>3);`。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T03:31:15.263

好的，T1，T2 本身就是一个类型名称，所以它绝对不是一个变量，所以 IntelliSense 功能正常工作。

# mongodb - 猫鼬查询返回 null

> ID：11661590
> 
> 赞同：22
> 
> 时间：2012-07-26T02:46:30.153
> 
> 标签：mongodb, mongoose

我似乎无法得到 mongodb 的回复。我在猫鼬的帮助下使用 node.js 和 mongodb。

在我的 node.js 应用程序中，我有

```
mongoose.connect('mongodb://localhost:27017/myDB');

var Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId;

var BlogPost = new Schema({
    author  : ObjectId,
    title   : String,
    slug    : { type: String, lowercase: true, trim: true },
    content : String,
    summary : String,
    date    : Date
})

var BlogModel = mongoose.model('BlogPost', BlogPost);

BlogModel.find({}, function(docs){
   console.log(docs);
}); 
```

如果我在 mongo shell 中输入 show dbs 我得到

```
admin   (empty)
myDB       0.203125GB
local   (empty)
test    (empty) 
```

db.blogmodel.find() 返回：

```
{ "_id" : ObjectId("50108d3df57b0e3375a20479"), "title" : "FirstPost" } 
```

是的，我确实有 mongod 运行。

**固定解决方案**

```
var BlogModel = mongoose.model('blogmodel', BlogPost, 'blogmodel'); 
```

它之所以有效，是因为它的（模型名称、模式名称、集合名称）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-26T03:56:15.907

Mongoose 将模型名称复数化，因此它运行`find`在“blogposts”集合而不是“blogpost”上。也就是说，您在 mongo shell 中的查询位于“blogmodel”集合中。在这种情况下：

```
var BlogModel = mongoose.Model("BlogModel", ..) 
```

或将集合名称作为第三个参数传递：

```
var BlogModel = mongoose.model("BlogPost", schema, "blogmodel") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T03:10:53.217

`BlogModel.find`回调的第一个参数是`err`，第二个参数是`docs`。所以你的代码应该是：

```
BlogModel.find({}, function(err, docs){
   console.log(docs);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T16:36:24.473

我昨天遇到了类似的错误，在我的情况下，错误是由导入 mongo 的数据引起的。在我使用 mongoimport key 后，_id 被存储为字符串而不是 ObjectId。当我在 mongo 中查询数据时，一切正常，但是在 Mongoose 中，当我尝试通过 _id 查找某些内容时，它总是返回 null 或空数组。我希望这些信息可能对某人有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-19T13:08:07.263

对于即使在检查接受的答案后仍然遇到此问题的任何人 - 确保您的数据库连接 url 包含数据库名称，例如数据库名称`myDB`......

```
mongoose.connect(`mongodb://localhost:27017/myDB`) 
```

我忘记了它，我的猫鼬搜索都返回空数组或空数组。

# ruby-on-rails - Rails：数字到货币，删除尾随零

> ID：11661592
> 
> 赞同：14
> 
> 时间：2012-07-26T02:46:46.643
> 
> 标签：ruby-on-rails, number-to-currency

如何使用`number_to_currency`并使其删除小数部分中的零？

所以如果我有一个数字 30.50，我想保留 0.50，但如果我有 30.00，我想删除那些零。我看到了精度，但我不知道我是否可以有条件地使用它来仅在尾随小数为零时应用...

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-26T02:51:17.350

```
num = 30.00
number_to_currency(num, :precision => (num.round == num) ? 0 : 2)
  => $30

num = 30.05
number_to_currency(num, :precision => (num.round == num) ? 0 : 2)
  => $30.05 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T23:13:50.450

我使用钱串，所以我用不同的方式做：

```
def string_to_cents str
    new_str = number_to_currency(str,  :format => "%n")
    if new_str && new_str[-3..-1] == ".00"
        new_str[-3..-1] = ""
    end
    new_str
end 
```

# asp.net - ASP.Net 中子域的 URL 重写

> ID：11661605
> 
> 赞同：0
> 
> 时间：2012-07-26T02:47:57.770
> 
> 标签：asp.net, url-rewriting

如何为此网址制定网址重写规则：example.com/account/login.aspx

到这个网址：me.example.com/login

因此，对文件夹 /account 的任何请求都将重写到 me.example.com。像 /account/subfolder/file1.aspx 这样的子文件夹和文件也会重写为 me.example.com/subfolder/file1

我已经为应用程序设置了 DNS 通配符，所有子域都将使用相同的 IP 地址。我需要的只是 url 重写规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:37:32.327

您可以在 IIS 7.0 Url Rewrite 中实现这一点

或者

编写自己的处理程序来拦截传入的请求

为此，您可以实现 IHttpHandler 并在 ProcessRequest 方法中处理 url 重定向逻辑

这是一个很好的例子[http://www.codeproject.com/Articles/30907/The-Two-Interceptors-HttpModule-and-HttpHandlers](http://www.codeproject.com/Articles/30907/The-Two-Interceptors-HttpModule-and-HttpHandlers)

# ruby - 为什么这个 sinatra 代码不起作用

> ID：11661609
> 
> 赞同：1
> 
> 时间：2012-07-26T02:48:53.997
> 
> 标签：ruby, sinatra

我很难弄清楚我在这里做错了什么。结果是空的，我正在寻找它返回（通过帮助程序`hello`调用该方法 ）。`testing``before`

```
require 'rubygems'
require 'sinatra'

get '/' do
end

before do 
  testing
end 

def testing
  return "hello"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:34:34.400

这里有几个问题。一方面，您必须在视图中实际调用所需的输出或变量，最常见的是作为实例变量（否则每个用户都会获得相同的输出。）以下面的修改代码为例：

```
require 'rubygems'
require 'sinatra'

get '/' do
  @word
end

before do 
  testing
end 

def testing
  @word = "hello"
end 
```

查看[Sinatra Book](http://sinatra-book.gittr.com/)，一个免费的在线资源，了解如何开始使用 Sinatra。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T07:08:58.757

因为您没有在 Get 请求上调用输出，所以您需要告诉您的 Get 方法返回一个输出。就像thekungfuman建议的那样。或尝试使用 Minimal Hello World Sinatra 应用程序，如下所示：

```
#imports
require 'rubygems'
require 'sinatra'

#Get Request on Root ("/")
get '/' do
    "Hello Sinatra World!"
end 
```

把你的程序放在一个类下也很有用，所以你也可以这样做：

```
#imports
require 'rubygems'
require 'sinatra/base'

#My Application Class
class AppName < Sinatra::base
    get '/' do
        'Hello Sinatra World!'
    end
end

AppName.run! 
```

这样，您也可以将其用作单独的应用程序文件并将其导入其他文件中，例如。

```
require 'app_name' #replace this with the name of the physical file

#Run Application "AppName"
AppName.run! 
```

# gnu - USENET 或 NNTP 文章是按时间顺序还是按时间倒序加载的？

> ID：11661612
> 
> 赞同：0
> 
> 时间：2012-07-26T02:49:04.167
> 
> 标签：gnu, nntp, usenet

示例新闻：

```
thufir@dur:~$ cat .newsrc
gwene.com.androidcentral: 1-99999999
gwene.com.blogspot.emacsworld: 1-99999999
gwene.com.blogspot.googlecode: 1-99999999
gwene.com.blogspot.googlereader: 1-99999999
gwene.com.economist: 1-99999999
gwene.com.googlereader: 1-99999999
thufir@dur:~$ 
```

现在，我已将[叶子节点](http://leafnode.sourceforge.net/)配置为将消息保存 999 天。当[GNU NNTP](http://www.gnu.org/software/classpathx/javamail/javadoc/gnu/mail/providers/nntp/package-summary.html)连接到本地主机上的叶子节点时，加载时可能会有很大的延迟。目前，我所做的是将 Leafnode 配置为只为特定组存储 35 天，以便加载更快。

但是，当再次查看 .newsrc 时，似乎我可以让叶子节点存储大量文章，然后配置 GNU NNTP 使用的 .newsrc，以便只获取这些消息的一小部分。如果是这样，这将允许在叶子节点中长时间保留 999 天，从而减轻连接到叶子节点和从 GNU NNTP 加载文章的延迟。

然而，这行得通吗？只会加载**较新**的文章，还是会加载**旧**文章？

不幸的是，[RFC 977](https://www.rfc-editor.org/rfc/rfc977)实际上并没有提到 .newsrc 文件。当然，GNU NNTP 是否遵循 RFC 将是一个单独的问题，但是，至少根据 RFC，可能会加载**较新**的问题而留下**较旧的问题？**

看起来[RFC 3977](https://www.rfc-editor.org/rfc/rfc3977)稍微澄清了 RFC 977，所以我现在正在审查它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T03:26:28.157

您实际上是在询问特定 NNTP 客户端的行为，而不是 NNTP 协议本身。根据规范，用于检索文章的唯一 NNTP 动词是 ARTICLE，它只获取一篇文章。客户发出 ARTICLE “呼叫”的顺序没有限制。

因此，要回答您的问题，您需要查看 GNU NNTP 库的文档……或源代码。而且我怀疑这还取决于您的代码如何使用库方法。

* * *

> 然而，这行得通吗？只会加载较新的文章，还是会加载旧文章？

如果我在你的鞋子里，我会尝试一下，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:32:46.650

从'[网](http://www.catb.org/esr/writings/taoup/html/ch05s01.html)：

> 每行设置第一个字段中命名的新闻组的属性。该名称后紧跟一个字符，指示拥有用户当前是否订阅该组；冒号表示订阅，感叹号表示未订阅。该行的其余部分是逗号分隔的文章编号或文章编号范围的序列，指示用户看过哪些文章。

[出于我的目的，使用GNU NNTP](http://www.gnu.org/software/classpathx/javamail/)从 .newsrc 文件加载组，看起来这些数字被忽略了——尽管我并不肯定。

# google-chrome - Chrome Devpanel 扩展与后台页面通信

> ID：11661613
> 
> 赞同：20
> 
> 时间：2012-07-26T02:49:16.720
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我有 chrome devtools 面板的扩展。我可以使用`chrome.devtools.inspectedWindow.eval`... 向页面发送消息，但是如何在开发面板中接收消息？具体来说，我需要我的开发面板连接到页面上发生的事件。我无法让它收听我的内容脚本或背景页面上的事件。

我已经`chrome.extension.sendMessage`在内容脚本以及`chrome.extension.onMessage.addListener`开发面板脚本中进行了尝试。但`sendMessage`抱怨`Port error: Could not establish connection. Receiving end does not exist.`

长期连接问题仍然存在：

在内容脚本或背景页面中：

```
var port = chrome.extension.connect({name: "test"});
port.postMessage({msg: "testing"}); 
```

在开发工具面板 javascript 中：

```
chrome.extension.onConnect.addListener(function(port) {
    port.onMessage.addListener(function(msg) {
         // never gets here
    });
 }); 
```

如何在我的开发工具面板中侦听内容脚本中触发的事件？像这样来自 Firefox 的附加 SDK 的图表会很棒：[https ://addons.mozilla.org/en-US/developers/docs/sdk/latest/static-files/media/content-scripting-overview.png](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/static-files/media/content-scripting-overview.png)

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-26T20:44:44.637

目标是为通信创建一个通道（“端口”）。只要正确维护连接，如何创建端口都没有关系。

devtools 脚本必须启动端口，因为后台脚本不知道何时创建了 devtools 面板。

这是一个基本示例，它显示了双向通信方法：

### `devtools.js`

```
chrome.devtools.panels.create('Test', '/icon.png', '/panel.html', function(extensionPanel) {
    var _window; // Going to hold the reference to panel.html's `window`

    var data = [];
    var port = chrome.runtime.connect({name: 'devtools'});
    port.onMessage.addListener(function(msg) {
        // Write information to the panel, if exists.
        // If we don't have a panel reference (yet), queue the data.
        if (_window) {
            _window.do_something(msg);
        } else {
            data.push(msg);
        }
    });

    extensionPanel.onShown.addListener(function tmp(panelWindow) {
        extensionPanel.onShown.removeListener(tmp); // Run once only
        _window = panelWindow;

        // Release queued data
        var msg;
        while (msg = data.shift()) 
            _window.do_something(msg);
        // Just to show that it's easy to talk to pass a message back:
        _window.respond = function(msg) {
            port.postMessage(msg);
        };
    });
}); 
```

现在，面板能够通过端口发送/接收消息。面板的脚本（外部脚本文件，由于[CSP](https://developer.chrome.com/extensions/contentSecurityPolicy)）可能如下所示：

### `panel.js`

```
function do_something(msg) {
    document.body.textContent += '\n' + msg; // Stupid example, PoC
}
document.documentElement.onclick = function() {
    // No need to check for the existence of `respond`, because
    // the panel can only be clicked when it's visible...
    respond('Another stupid example!');
}; 
```

现在，背景页面的脚本：

### `background.js`

```
var ports = [];
chrome.runtime.onConnect.addListener(function(port) {
    if (port.name !== "devtools") return;
    ports.push(port);
    // Remove port when destroyed (eg when devtools instance is closed)
    port.onDisconnect.addListener(function() {
        var i = ports.indexOf(port);
        if (i !== -1) ports.splice(i, 1);
    });
    port.onMessage.addListener(function(msg) {
        // Received message from devtools. Do something:
        console.log('Received message from devtools page', msg);
    });
});
// Function to send a message to all devtools.html views:
function notifyDevtools(msg) {
    ports.forEach(function(port) {
        port.postMessage(msg);
    });
} 
```

要进行测试，只需`notifyDevtools('Foo');`在后台页面上运行（例如[通过控制台](https://stackoverflow.com/a/10258029)）。在此演示中，消息将发送到所有开发工具。收到后，devtools 面板将包含收到的消息。

使用以下方法将扩展名放在一起：

### `manifest.json`

```
{
  "name": "Test",
  "manifest_version": 2,
  "version": "1",
  "devtools_page": "devtools.html",
  "background":{"scripts":["background.js"]}
} 
```

### `panel.html`

```
<script src="panel.js"></script> <!-- Doctype etc not added for conciseness--> 
```

### `devtools.html`

```
<script src="devtools.js"></script> 
```

## 也可以看看

*   [如何在 Chrome 扩展程序的 devtools 面板下修改内容？](https://stackoverflow.com/a/11646038/938089?how-to-modify-content-under-a-devtools-panel-in-a-chrome-extension)
*   [`chrome.devtools`API](https://developer.chrome.com/extensions/devtools)
*   [消息传递：长期连接](https://developer.chrome.com/extensions/messaging#connect)
*   [Chrome 扩展中的内容安全策略](https://developer.chrome.com/extensions/contentSecurityPolicy)（“内联 JavaScript (...) 将不会被执行。此限制禁止内联`<script>`块和内联事件处理程序。”）

# php - vim php_javascriptInStrings 选项？

> ID：11661614
> 
> 赞同：6
> 
> 时间：2012-07-26T02:49:25.680
> 
> 标签：php, javascript, vim, syntax-highlighting

我注意到我的 ubuntu 机器上的 syntax/php.vim 文件有一个`php_htmlInStrings`选项。我可以打开此选项以在我的 php 文件中的字符串中显示 HTML 语法突出显示，这很棒。我还想在 php 文件中的字符串中突出显示 javascript 语法。有谁知道这是否可以做到，如果可以，我该怎么做？

**编辑 - 增加了额外的可能性**

我还应该提到，我会很高兴有一个解决方案，我必须在输出结果之前通过一个 php 函数解析我的所有 javascript 字符串。这可能会解决以下 conner 建议的问题，即 vim 无法确定字符串是否包含 javascript。例如：

```
$js = "some regular text which is not javascript##now vim has
detected that this part is javscript##back to regular text";
parse($js);
function parse($str)
{
    return str_replace('##', '', $str);
} 
```

我很乐意这样做的原因是因为我可能会将 html/css/js 变量压缩器合并到我的项目中，无论如何都会对字符串进行替换。

当然，如果有一个特定于 vim 的等效字符`##`不会出现在源代码中并且不需要被过滤掉，那么这将是更可取的......

**重新编辑 2**

根据以下conner的解决方案，可以达到预期的效果，如下所示：

```
$js = "<script>some javascript</script>"; 
```

（ `:let php_htmlInStrings=1`在 vim 中）。如果有人可以向我展示使 javascript 语法高亮显示在以下字符串中所需的 vim 脚本，那么我将奖励他们答案：

```
$js = /*<script>*/"some javascript"/*</script>*/; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:26:11.930

我认为这个的一般问题是 vim 需要一种方法来区分 javascript 和 HTML 突出显示。在 HTML 文件中，vim 根据其中的`<script></script>`标签确定这一点以应用 javascript 突出显示。如果你把`<script></script>`标签放在你的字符串中，你会发现情况就是这样。但是，如果你把它们拿走，那么 vim 就无法知道你的字符串中的内容是 HTML 还是 javascript。你可以通过编辑添加一些东西来解决这个问题，以表示它是希望不会影响结果代码的 javascript，但这很棘手。您可以在 HTML 文件的`<script></script>`第 167 行看到设置标记规范的位置`$VIMRUNTIME/syntax/html.vim`。它看起来像这样：

```
syn region  javaScript start=+<script[^>]*>+ keepend end=+</script>+me=s-1 contains=@htmlJavaScript,htmlCssStyleComment,htmlScriptTag,@htmlPreproc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:45:27.983

你试过这个[php.vim](http://code.whomwah.com/vim/vim/syntax/php.vim)语法文件吗？

# php - 登录用户只能观看他们购买的视频

> ID：11661616
> 
> 赞同：-2
> 
> 时间：2012-07-26T02:49:28.777
> 
> 标签：php, jquery, mysql, ajax, video

我浏览了这些线程并且几乎没有类似的问题，但我希望使用 AJAX 完全使用 jQuery 对其进行编程以与 PHP 进行通信。

所以我有这个用户和视频列表，但用户可以选择购买某些视频或全部；这完全取决于他们。所以我可以知道如何使它工作，当用户查看视频列表时，正在购买的视频将有一个“观看”按钮，而未购买的视频旁边会有一个“购买”按钮。

欢迎任何帮助或评论！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:58:20.003

创建一个新表来存储 video_id 和 user_id，然后使用会话变量从数据库中检索与会话中存储的 user_id 匹配的可播放视频。

```
$query = "SELECT * FROM user_videos WHERE user_id='$_SESSION["user_id']'"; 
```

# windows - 建立从 Windows 应用程序到 Google App Engine 应用程序的 OAuth 连接

> ID：11661618
> 
> 赞同：8
> 
> 时间：2012-07-26T02:49:59.167
> 
> 标签：windows, google-app-engine, oauth

我们有一个 Windows 7 任务托盘应用程序需要访问我们的 Google App Engine 应用程序中的服务，并且我们很难使它们之间的 OAuth 连接正常工作。出于某种原因，我们与 Twitter 和 Tumblr OAuth 实现一起使用的 OAuth 库似乎不适用于 Google 的这种场景。Google 正在向 OAuth 授权序列的最后一步返回 400 错误请求响应。

为了调试问题，我尝试使用 Google 的 OAuth 1.0 Playground 页面 (http://googlecodesamples.com/oauth_playground/index.php)。但我不知道在步骤 1 中应该为“范围”输入什么。如果我输入 GAE 服务器的名称，序列将失败并显示错误消息“无效范围”。显然，选择其中一个提供的范围（Google API 服务）不是我们的选择。

谁能告诉我在访问 Google App Engine 托管服务时应该如何设置 OAuth 范围指定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:49:27.273

仅供参考，请查看此博客，对您的情况很有帮助

[http://ikaisays.com/2011/05/26/setting-up-an-oauth-provider-on-google-app-engine/](http://ikaisays.com/2011/05/26/setting-up-an-oauth-provider-on-google-app-engine/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:11:25.983

我认为这个[Google Official Docs](https://developers.google.com/appengine/docs/python/oauth/overview)最好地解释了如何为您自己的 appengine 应用程序设置端点。您的问题不是很具体，但请注意本文档中所写的以下内容：

> 授权的范围，即允许消费者访问多少，适用于所有单个应用程序。App Engine 仅支持整个应用范围，不支持更精细的范围请求。当 Google 帐户提示用户授权消费者时，提示说明消费者正在请求访问完整应用的权限。

您是否在您的域上设置了 OAuth？

> 消费者使用一组标准 Web 服务端点执行 OAuth 操作。这些端点使用您应用程序域上的保留路径。例如，如果您的应用程序使用 www.example.com 的 Google Apps 域，则 OAuth 协议的端点如下所示：
> 
> [https://www.example.com/_ah/OAuth](https://www.example.com/_ah/OAuth) ...

# objective-c - ivars 命名约定和@synthesis

> ID：11661619
> 
> 赞同：-1
> 
> 时间：2012-07-26T02:50:05.633
> 
> 标签：objective-c

抱歉读了很久。这是我很困惑的书的一部分。

> 当前编码约定的趋势（Xcode 4 已采用）是使用下划线 (_) 作为实例变量名称的前导字符。因此，您在 Xcode 生成的模板代码中看到的对以 _ 开头的变量的任何引用都是直接按名称引用实例变量。当你看到一个看起来像这样的@synthesize 指令时
> 
> @synthesize 窗口=_window;

为什么不能`_window`首先在 @propterty/synthesize 中声明而不是将其分配给`window`？

> 它说为名为 window 的属性合成 getter 和 setter，并将该属性与名为 _window 的实例变量相关联（不必显式声明）。这有助于区分实例变量和属性的使用，并鼓励您通过 setter 和 getter 方法设置和检索实例变量的值。也就是说，写这样的东西
> 
> [窗口 makeKeyAndVisible]; // 这行不通
> 
> 将失败，因为没有名为 window 的实例变量。相反，您必须直接按其名称命名实例变量，例如
> 
> [_window makeKeyAndVisible];
> 
> 或者，最好使用访问器方法：
> 
> [self.window makeKeyAndVisible];

为什么`self.window`其他方法不需要下划线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:14:25.923

您只能在 setter/getter 方法中访问下划线 ivars。在这种情况下，它将在 和 的实现`- (UIWindow *)window`中`- (void)setWindow:(UIWindow *)window`。在你的类的实现中的任何其他地方，引用`@property`而不是合成的 ivar( `self.window`)。在我早期的 obj-c 日子里，帮助我理解的一件事是：`self.window = ...;`是`[self setWindow:...];`Just follow the rules and you'll be one happy 的同义词

Apple 对 Objective-C 的内部实现导致了一些非常漂亮的内存管理，只要你遵守他们的规则，你就永远不必处理它们。典型的苹果，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:54:35.880

该语法`self.window`实际上是在调用一个方法（尽管看起来可能不是）。例如，如果您命名*或*定义了一个像您自己一样的方法`@synthesize`，将调用该方法并表示返回的任何值。同样，隐含地呼唤你。`@property``window` *`- (id) window { ... }``self.window``self.window = value;``[self setWindow:value]`*

 *A`@property`可以重命名这些默认方法，例如使用`getter=`.*

# ssis - 如何通过 Excel 文件中的每个选项卡来评估 SSIS 中的标题值

> ID：11661620
> 
> 赞同：1
> 
> 时间：2012-07-26T02:50:10.410
> 
> 标签：ssis

我有一个将数据从 Excel 文件导入 SQl Server 表的 SSIS 解决方案。但是 Excel 文件有不同的选项卡，我需要为每个评估 A1 单元格的标题值的选项卡，如果它是示例“约会计数”，那是我必须导入的选项卡。

一些想法我该怎么做？

谢谢埃利亚娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:36:20.423

您可以创建一个 OLEDB 连接管理器，使用 Microsoft Jet Provider 打开 Excel 文件。从那里，您可以创建一个 For Each 循环容器来遍历其中的工作表。

有关[如何实现此功能的示例，请查看此处](http://www.codeproject.com/Tips/395541/How-to-load-data-from-multiple-Excel-sheets-to-any)。

*请记住，MS Jet 提供程序仅提供 32 位版本。

# facebook-graph-api - facebook 令牌在 10 天后到期

> ID：11661623
> 
> 赞同：1
> 
> 时间：2012-07-26T02:50:19.190
> 
> 标签：facebook-graph-api, token

我看过很多文章，每个人都说 Facebook 令牌有效期为 60 天。我已经用我的应用程序尝试了很多次，我得到的令牌仅在 10 天内有效。有人可以帮忙吗？

顺便说一句：我正在使用 Java 的 Spring 社交库。

更新：找到问题原因。这是 Spring social 的一个错误。它在计算日期时使用整数，并且总是返回 10 天。

# javascript - 应用容器 ul 时显示子 li 显示：无

> ID：11661628
> 
> 赞同：0
> 
> 时间：2012-07-26T02:51:05.923
> 
> 标签：javascript, jquery, html, css, jquery-ui-sortable

我正在使用 Jquery UI 的可排序插件并使用它附带的名为“connect-lists.html”的示例。我想通过使用`display:none`（不是`visibility:hidden`!!）隐藏第一个 ul，但让`li`被拖动的内容显示在屏幕上。这是演示的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Sortable - Connect lists</title>
    <link rel="stylesheet" href="../../themes/base/jquery.ui.all.css">
    <script src="../../jquery-1.7.2.js"></script>
    <script src="../../ui/jquery.ui.core.js"></script>
    <script src="../../ui/jquery.ui.widget.js"></script>
    <script src="../../ui/jquery.ui.mouse.js"></script>
    <script src="../../ui/jquery.ui.sortable.js"></script>
    <link rel="stylesheet" href="../demos.css">
    <style>
    #sortable1, #sortable2 
    { 
         list-style-type: none;  
         margin: 0;  
         padding: 0 0 2.5em;  
         float: left;  
         margin-right: 10px;  
    }
    #sortable1 li, #sortable2 li 
    { 
         margin: 0 5px 5px 5px;  
         padding: 5px;  
         font-size: 1.2em;  
         width: 120px;  
         overflow:visible;display:block;  
    }
    </style>
    <script>
    $(function() {
        $( "#sortable1, #sortable2" ).sortable({
            start: function(event, ui){
                $('#sortable1').hide();
                //is it possible to show the ui.item???
            },
            connectWith: ".connectedSortable"
        }).disableSelection();
    });
    </script>
</head>
<body>
<div class="demo">

<ul id="sortable1" class="connectedSortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight">Item 1</li>
    <li class="ui-state-highlight">Item 2</li>
    <li class="ui-state-highlight">Item 3</li>
    <li class="ui-state-highlight">Item 4</li>
    <li class="ui-state-highlight">Item 5</li>
</ul>

</div><!-- End demo -->

<div class="demo-description">
<p>
    Sort items from one list into another and vice versa, by passing a selector
    into the <code>connectWith</code> option. The simplest way to do this is to
    group all related lists with a CSS class, and then pass that class into the
    sortable function (i.e., <code>connectWith: '.myclass'</code>).
</p>
</div><!-- End demo-description -->

</body>
</html> 
```

我刚刚添加了一个开始事件，并将其隐藏在`ul`那里。这里的问题是当我开始将项目从第一个列表拖到第二个时，ul 和 li 都消失了。我该如何解决这个问题？

# html - 移动 Safari 不会将背景渐变图像与背景颜色混合

> ID：11661637
> 
> 赞同：0
> 
> 时间：2012-07-26T02:51:57.723
> 
> 标签：html, css, mobile-safari, background-image

我有一个经典的背景图像渐变，淡出给定的背景颜色，代码见[http://fiddle.jshell.net/7msZ5/](http://fiddle.jshell.net/7msZ5/)。

问题是，当在 Mobile Safari（iPhone 4 上的版本 5）上查看时，图像没有成功融入背景颜色，底部有一条可见线，图像用完，背景图像应该接管，查看[http://fiddle.jshell.net/7msZ5/show/](http://fiddle.jshell.net/7msZ5/show/)看看效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:28:31.740

我建议扩展渐变图像，以便它更早地达到灰色（所以灰色是您确切想要的阴影，而不是 1 个阴影），或者使用 `-webkit-gradient` （一些旧的浏览器可能不支持它......）

例子：

```
background: url(http://i.imgur.com/ajzo0.jpg) rgb(145,127,103); /* Old browsers (in case they don't support webkit, use the original image. */
background: -moz-linear-gradient(top, rgba(145,127,103,1) 0%, rgba(236,235,233,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(145,127,103,1)), color-stop(100%,rgba(236,235,233,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, rgba(145,127,103,1) 0%,rgba(236,235,233,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, rgba(145,127,103,1) 0%,rgba(236,235,233,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, rgba(145,127,103,1) 0%,rgba(236,235,233,1) 100%); /* IE10+ */
background: linear-gradient(to bottom, rgba(145,127,103,1) 0%,rgba(236,235,233,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#917f67', endColorstr='#ecebe9',GradientType=0 ); /* IE6-9 */ 
```

是的，它有更多的代码，但它确实完成了工作。

# c# - 在 WPF 中使用 DataGrid 作为 ItemsControl

> ID：11661640
> 
> 赞同：0
> 
> 时间：2012-07-26T02:52:21.290
> 
> 标签：c#, wpf, datagrid, datatemplate

我正处于开发允许用户在集合中创建、修改和删除项目的应用程序的开始阶段。集合中的项目将具有不同的属性，并允许根据项目类型的选择输入这些属性。

为了给你一个问题的例子，这里有一些基本类及其属性列表。
类型必须是文本、音频或视频之一。
文本 - 名称、类型、说明、长度、作者
音频 - 名称、类型、说明、长度、文件格式、曲目编号、艺术家、专辑等
视频 - 名称、类型、说明、长度、文件格式、曲目编号、艺术家等。

如您所见，每个字段都略有不同。选择类型后，它会更改用户输入的可用属性。不要太拘泥于课程和方法，因为课程只是一个例子。用户要求数据采用类似网格的格式以提高可读性。对于大多数用户数据，DataGrid 中的条目之间只有一两条信息会发生变化，因此扫描和查找属性变化的能力很重要。

WPF 设计的最佳方法是什么？
可以将不同的项目转换为单个类似数据网格的控件吗？
选择类型后，我能否将通用项目转换为特定项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:12:55.893

只需制作一个包装类以显示在数据网格中。

```
public class Wrapper
{
    public TypeEnum Type { get; set; }
    public string Name { get; set; }
    // other common props
    public string CustomProperty1 { get; set; }

    public object ConvertToRealObject()
    {
        switch(this.Type)
        {
            case TypeEnum.Audio:
                return new Audio { Name = this.Name, Album = this.CustomProperty1 }
            /* other type handling */
        }
    }
} 
```

在 XAML 中，在您的数据网格中创建模板列：

```
<DataGridTemplateColumn>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock x:Name="tb" Text="{Binding CustomProperty1}" Visibility="Collapsed" />
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Type}" Value="Audio">
                    <Setter Target="tb" Property="Visibility" Value="Visible" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

就是这样。

# c# - 在成员资格和角色中将角色分配给目录页面

> ID：11661641
> 
> 赞同：0
> 
> 时间：2012-07-26T02:52:43.450
> 
> 标签：c#, asp.net, asp.net-membership

我正在创建一个 Web 应用程序，并且正在使用成员资格和角色。在我的应用程序中，我有 4 个角色。

1.  行政
2.  接待员
3.  调度器
4.  会计

我有一页 registerpatient.aspx 在接待员和调度程序中都很常见。意味着两者都可以创造一个病人。然后我应该把这个页面放在哪个文件夹中，以便两者都可以访问。我不希望任何其他用户访问此页面。我正在按成员资格和角色使用角色管理。所以我们可以将角色分配给目录，那么如何分配给特定页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:28:21.870

您可以通过添加位置配置来做到这一点。Location 是一个 web.config 部分，仅适用于一个目录或文件，并包含其自己的 system.web 部分。在此处查看有关此内容的帖子： [http ://weblogs.asp.net/gurusakar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config .aspx](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx)

# applescript - 将 AppleScript 转换为 AppleScript Studio

> ID：11661643
> 
> 赞同：0
> 
> 时间：2012-07-26T02:53:09.410
> 
> 标签：applescript, applescript-objc, applescript-studio

这是我第一次来这里。无论如何，我有一个问题。

我刚决定尝试使用 Applescript studio，但目前我无法将我的脚本转换和将操作链接到 GUI。如果需要，我会提供更多信息，但我只需要转换一个 applescript 以在 Applescript studio 中使用。我需要注入任何特定的代码吗？谢谢。

在 Mac OS X 10.6.8 Snow Leopard、Xcode 4.2 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:39:38.607

在 Xcode 中使用 AppleScriptObjC，界面编辑器将使用任何具有正确定义的处理程序作为操作方法。动作处理程序采用单个参数，这意味着它的名称中有一个尾随下划线 - 请参阅[AppleScriptObjC 发行说明](https://developer.apple.com/library/mac/#releasenotes/ScriptingAutomation/RN-AppleScriptObjC/_index.html)。

一旦声明了处理程序，它将显示在界面编辑器中，并且可以通过从连接检查器拖动到所需的 UI 对象来连接，或者通过右键单击 UI 对象并将其从弹出窗口拖动到所需的脚本类.

示例项目有点稀缺，但有一些资源可以帮助您快速了解[MacScripter.net 的介绍性教程](http://macscripter.net/viewtopic.php?id=30274)，以及 Shane Stanley 出色的[AppleScriptObjC 探索](http://www.macosxautomation.com/applescript/apps/)电子书。

# android - 当客户的安卓手机是 4.x 时，如何让我的应用使用 4.x 风格？

> ID：11661644
> 
> 赞同：0
> 
> 时间：2012-07-26T02:53:12.903
> 
> 标签：android, user-interface

当客户的安卓手机是 4.x 时，如何让我的应用使用 4.x 风格？我知道设置 android:minSdkVersion="15"，样式将是 4.x。但我希望该应用程序应兼容 android 2.0 或更高版本。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:03:06.457

您可以将主题设置为 Theme.DeviceDefault 或在 values-11 和 values 文件夹下定义主题 styles.xml。

小心使用 lint 来检查您是否使用带有版本检查的 NewAPI。

# ruby - 如何从方法调用我的日志记录？（变量范围）

> ID：11661646
> 
> 赞同：0
> 
> 时间：2012-07-26T02:53:23.797
> 
> 标签：ruby

我遇到了一个问题，我把头撞到了墙上。基本上，我正在使用此日志记录设置来记录文件，并且效果很好！但是，我想在我构建的方法中使用它..它不会让我！它说它不是一个定义的变量。我猜这是变量范围的问题。我怎样才能解决这个问题？

这是我的日志记录设置：

```
class MultiDelegator
  def initialize(*targets)
    @targets = targets
  end

  def self.delegate(*methods)
    methods.each do |m|
      define_method(m) do |*args|
        @targets.map { |t| t.send(m, *args) }
      end
    end
    self
  end

  class <<self
    alias to new
  end
end

log_file = File.open("/opt/sysnovo/log/server.log", "a")
log = Logger.new MultiDelegator.delegate(:write, :close).to(STDOUT, log_file 
```

这是我的方法（删除文件）：

```
def cleanup
    log.info "Running cleanup"
    dirs = [ "/opt/sysnovo/tmp", "/opt/sysnovo/data", "/opt/sysnovo/merge" ]
    dirs.each do |dir|
        # Our file count.
        file_count = Dir.glob(File.join("#{dir}", '**', '*')).select { |file| File.file?(file) }.count

        # Log and delete!
        log.info "Removing #{file_count} files in #{dir}"
        FileUtils.rm_rf("#{dir}/.", secure: true)
    end
end 
```

所以基本上，方法内部的 log.info 失败了：

```
./sysnovo_server.rb:58:in `<main>': undefined local variable or method `log' for main:Object (NameError) 
```

所以我的问题是这样的：我该如何设置它才能正常工作？或者让 log.info 在我的方法中工作。或者..我做错了吗？我是Ruby的新手，所以要温柔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:37:12.497

如果你想在你的方法中使用 log 变量，那么你应该像这样将它定义为全局变量

```
$log = Logger.new MultiDelegator.delegate(:write, :close).to(STDOUT, log_file) 
```

但我建议您创建一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)类来处理日志记录并使用它来记录。

# c# - 通过 C# 使用 Dumpyourphoto 照片托管

> ID：11661648
> 
> 赞同：1
> 
> 时间：2012-07-26T02:53:39.317
> 
> 标签：c#, photo

我目前正在尝试制作一个简单的照片上传功能，该功能将上传我拍摄的截图。我找到了这个网站 dumpyourphoto.com 但我真的不明白如何在 C# 中做到这一点。谁能指导我完成这个？

基本上我所需要的只是将截图照片上传到服务器，希望它会返回我该照片的 url。从那里开始，我将把这个 URL 上传到我已经设置的 OpenShift 数据库，并将它作为文本上传，并将链接存储在数据库中。

正确的。感谢西蒙的问题。我意识到我没有提供太多细节。

所以基本上我使用 kinect 截取了屏幕截图，这就是我正在使用的功能。

```
private void btn_ss_Click(object sender, RoutedEventArgs e)
    {
        // create a png bitmap encoder which knows how to save a .png file
        BitmapEncoder encoder = new PngBitmapEncoder();

        // create frame from the writable bitmap and add to encoder
        encoder.Frames.Add(BitmapFrame.Create(this.colorBitmap));

        string time = System.DateTime.Now.ToString("hh'-'mm'-'ss", CultureInfo.CurrentUICulture.DateTimeFormat);

        string myPhotos = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);

        string path = System.IO.Path.Combine(myPhotos, "KinectSnapshot-" + time + ".png");

        // write the new file to disk
        try
        {
            using (FileStream fs = new FileStream(path, FileMode.Create))
            {
                encoder.Save(fs);
            }

            this.ss_dis.Text = string.Format("{0} {1}", "Screenshot has been taken.", path);
        }
        catch (IOException)
        {
            this.ss_dis.Text = string.Format("{0} {1}", "Failed to take Screenshot.", path);
        }
    } 
```

我苦苦挣扎的部分是我以前从未真正处理过诸如 HttpWebRequest 函数之类的 Web 活动，并且该网站显示 xml 和 json。我对如何做到这一点有一点想法，但我不太确定。这是开发人员 api 的链接。 [http://www.dumpyourphoto.com/information/api](http://www.dumpyourphoto.com/information/api)

更新：我试图自己解决问题，但我被困在最后一部分。我不知道如何将字节数组和密钥附加到 HttpWebRequest。

```
 private byte[] imgToByteArray(string _FileName)
    {
        byte[] _buffer = null;

        try
        {

            System.IO.FileStream _FileStream = new System.IO.FileStream(_FileName, System.IO.FileMode.Open, System.IO.FileAccess.Read);
            System.IO.BinaryReader _BinaryReader = new System.IO.BinaryReader(_FileStream);

            long _TotalByte = new System.IO.FileInfo(_FileName).Length;
            _buffer = _BinaryReader.ReadBytes((Int32)_TotalByte);

            _FileStream.Close();
            _FileStream.Dispose();
            _BinaryReader.Close();
         }
        catch(Exception _Exception)
        {
            Console.WriteLine("Exception caught in process: {0}", _Exception.ToString());
        }

        return _buffer;
    } 
```

这是 Image to ByteArray 函数。

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        string imgPath = "C:\\KinectSnapshot-04-46-14.png";
        string key = "1d533e9033f9d5b9b509055d8a00932aaf1ace7f";

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.dumpyourphoto.com/api/upload_photo/xml");
        string path = System.IO.Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "KinectSnapshot-" + "03-38-28" + ".png");

        byte[] img = imgToByteArray(path);
        request.Method = "POST";
        request.Credentials = CredentialCache.DefaultCredentials;
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = img.Length;
        using(Stream dataStream = request.GetRequestStream())
            dataStream.Write(img, 0, img.Length);

        using (WebResponse response = request.GetResponse()) 
        using(Stream responseStream = response.GetResponseStream())
        using (StreamReader reader = new StreamReader(responseStream))
        {
            string responseResults = reader.ReadToEnd();
            Console.WriteLine(responseResults);
        }
 } 
```

更新：这是我目前所在的位置。我还有 2 个问题。我不知道在哪里附上密钥文件和上传图片的标题。任何人都可以启发我吗？

我真的很感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:18:14.533

您将使用 HttpWebRequest 使用其 API 中列出的方法发出 POST 请求。你有什么具体的问题吗？

# grails - Grails 过滤器与拦截器

> ID：11661654
> 
> 赞同：13
> 
> 时间：2012-07-26T02:54:20.387
> 
> 标签：grails

我研究 Grails 已经有一段时间了。并浏览了一些关于过滤器和拦截器的信息。两者都具有几乎相同的功能，即在特定控制器中跟踪会话或重定向未经授权的用户。

但是我很困惑何时以及为什么应该使用过滤器而不是拦截器，反之亦然。假设 Inceptor 有两个控制器方法`beforeInterceptor`，`afterInterceptor`并且对于 Filters 有三个常见的闭`before`包`after`和`afterView`。

我的问题是对拦截器使用过滤器的优缺点是什么，反之亦然。通过这种方式，我们开发人员可以决定何时、何地以及为什么我们应该在特定控制器中使用过滤器或拦截器来进行一些跟踪、重定向等。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T03:30:48.093

当拦截逻辑仅适用于该控制器时，在控制器中使用一个或两个拦截器。

当逻辑应用于多个（或所有）控制器时，或者当您需要在视图呈现后执行某些操作时（没有等效于 afterView 的拦截器），或者您只想将所有内容集中在一个地方而不是分布在不同的控制器文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-14T21:20:36.443

旧过滤器（来自 Grails 2）在 Grails 3 中已弃用。过滤器的替代品是拦截器。

拦截器的使用是用于诸如：身份验证、登录等操作
。拦截器（顾名思义）正在拦截传入的 Web 请求并触发相关操作。动作在相关的控制器中定义。

拦截器有一些主要优点（优于过滤器），例如支持静态编译，并支持灵活的配置。
这些是拦截器的主要 3 种方法：
- *boolean before() { true }*
- *boolean after() { true }*
- *void afterView() { }*

Iterceptor 被配置为 Spring Beans（在 Spring 应用程序上下文中）并被配置为通过它们的名称自动连接。

# java - 设置 JUnit 测试数据库

> ID：11661655
> 
> 赞同：0
> 
> 时间：2012-07-26T02:54:21.650
> 
> 标签：java, database, unit-testing, testing, junit

```
void insertAllRecords(){
    insertRecord("tom", 100);
    insertRecord("jake", 200);
    insertRecord("tim", 300);
    insertRecord("andy", 400);
    insertRecord("mike", 500);
} 
```

我正在`JUnit`为具有测试数据库的东西编写测试。它从一个空数据库开始。我想测试不同的东西，但我不想`insertRecord`用相同的参数重复。

有没有一种简单的方法来指定要执行的行？例如，我只想在其中一个`@test`函数中添加 tom 和 andy。

我知道在每种测试方法中，数据库从 0 开始。我希望能够：

*   在 testA 中，使用 tom 和 jake 设置 db。
*   在testB 中，使用andy 和mike 设置数据库。
*   在 testC 中，使用所有这些设置 db。

但我不想在每个测试中都放置单独的插入语句。我希望能够使用一些参数调用 insertAllRecords。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:44:46.960

使用抽象方法将您的 Junit 类转换为抽象类`abstract void insertAllRecords();`

然后在你需要的情况下扩展这个类。例如

```
class TestWithTomClass extends AbstractTestClass{
    public void insertAllRecords(){
       insertRecord("tom", 100);
    }

    @Test
    public void myTestWithTom(){
       ....
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:41:00.183

据我所知，JUnit 不支持您想要的行为。您可能想看看[TestNG](http://testng.org/doc/documentation-main.html)`@BeforeMethod` ，它允许使用和`@AfterMethod`注释进行测试特定设置。它还允许使用带有`@Parameter`或`@DataProvider`注释的参数化数据更灵活的测试数据。

# github - 分支一个 git 存储库

> ID：11661656
> 
> 赞同：0
> 
> 时间：2012-07-26T02:54:34.073
> 
> 标签：github, branch

我已获得访问 git 存储库的权限。我想为现有代码创建一个新分支。我无法在网上找到适当的步骤来执行此过程。我相信我应该首先在 git bash 中设置 master，然后创建一个分支。如果有人可以给我要遵循的步骤顺序，那将很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:14:33.520

第一步，创建远程分支的克隆

```
 git clone <git repo> <folder_name> 
```

例子：

```
$ git clone git://git.kernel.org/abc my2.6 
```

将目录更改为新形成的目录，即 my2.6

```
$ cd my2.6 
```

创建一个新分支

```
git branch <branch name>

$ git branch my2.6.14 
```

转到新分支：

```
git checkout <branch name> 
```

例子：

```
$ git checkout my2.6.14 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:04:30.227

git pro 书是查找信息和了解 git 的重要来源：http: [//git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)。

首先确保您已使用 git clone 命令克隆了 git 存储库。之后，您可以使用以下命令检查当前分支： git branch

您可以使用以下命令创建新分支： git checkout -b mybranch

# c++ - ifstream::read 不附加 '\0'

> ID：11661659
> 
> 赞同：5
> 
> 时间：2012-07-26T02:54:55.367
> 
> 标签：c++, ifstream

`ifstream::read`只是将`n`字节读入缓冲区，但不会附加`'\0'`到缓冲区的末尾，对吗？那么当我使用缓冲区时，它是如何知道缓冲区结束的呢？

我应该`'\0'`在缓冲区末尾手动附加 a 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T03:46:54.630

`ifstream`用于从文件、二进制文件或文本中读取。在处理带有 的二进制文件时`read`，无法确定零字节的来源（来自文件本身或由 附加`read`），因此 read 不会将零附加到目标缓冲区。

如果您正在处理文本文件，则可以使用[std::getline](http://www.cplusplus.com/reference/string/getline/)并接收`std::string`：

```
istream& getline ( istream& is, string& str ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:03:11.433

是的，你是对的，你需要手动将它附加到缓冲区的末尾：`buffer[length] = '\0';`如果你想要一个空终止符。当您调用时，`write`您还可以指定输出的长度：`std::cout.write(buffer, length);`它将仅输出`length`数据数以告诉它何时停止要求您不要使用空终止符。不过，我会研究`std::getline`并`std::string`寻求更强大的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:03:31.270

如果您正在阅读`std::string`说， with `std::getline`，那么 string 带有一个长度 -不会像 C 风格的字符串`std::string`那样终止。如果您读入 std::string 然后使用 string.c_str() 则以空值终止。您可以将其用于 C 风格的字符串。`'\0'``char*`

如果您正在阅读`char*`，则必须提供一个长度 - 即读取的字节数与`'\0'`找到的字节数无关。在这种情况下，您应该在缓冲区末尾手动附加一个 '\0'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T22:18:31.853

您可以调用`ifstream::gcount()`以确定在`read()`操作中读取的字符数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T15:01:07.257

你可以把任何你想要的东西放在缓冲区的末尾，只要它有空间。 `istream::read`没有告诉你它读取了多少字节；它要么读取您要求的所有内容，要么将流的状态更改为失败/eof。

如果要处理字节数可能少于预期的情况，请使用`istream::readsome`，它会返回提取的字节数。

正如提到的其他答案，如果您正在处理字符串，请使用读取字符串的函数，例如`std::getline`或`>>`提取器。`istream::read`用于二进制数据——在这种情况下`std::streambuf`通常使用起来更方便。

# xaml - VS 2012 中的 XAML 页面不显示

> ID：11661662
> 
> 赞同：0
> 
> 时间：2012-07-26T02:55:15.150
> 
> 标签：xaml, windows-8

当我尝试查看任何 *.xaml 页面时，我看到的是错误消息，“ *System.UnauthorizedAccessException 错误 5：访问被拒绝：'C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETCore\v4 .5\Microsoft.CSharp.dll'* "

只是将“ **C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETCore\v4.5\Microsoft.CSharp.dll** ”添加到我的路径中，还是...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:00:27.457

这是一个权限问题：XAML 设计器无法访问引用程序集。我的一位同事在对以下 MSDN 论坛查询的回答中发布了一个简单的解决方案：

> [VS 2012 RC XAML Designer 崩溃并拒绝访问](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/a40977f2-c7e6-41dd-921d-dc9d9aed01eb/)

# java - Java 尝试并捕获错误

> ID：11661664
> 
> 赞同：0
> 
> 时间：2012-07-26T02:55:43.577
> 
> 标签：java, try-catch, filewriter

我正在尝试在将更改抽屉的内容写入 html 文档的方法中捕获错误。当文件不存在时，会出现错误 java.io.FileNotFoundException。下面的代码应该这样做，但它会出现错误“PartB 是不兼容的类型”。我认为我的 try and catch 代码中有一个错误，这是我编写的第一个代码，我不知道为什么它不起作用。任何帮助都会很棒。谢谢你。

```
 ...
  public static void writeHtmlFile()
   {
    try {
             BufferedReader in = new BufferedReader((new FileReader("changedrawer.html")));

     String sLine;
     StringBuilder sb = new StringBuilder();
     while ((sLine = in.readLine()) !=null)
     sb.append(sLine+"\n");
     //Close file 
     in.close();
     //Output on console
     System.out.println(sb.toString());
     }
     catch (PartB FileNotFoundException) //Why is PartB an incompatible type? (PartB is the name
     of the class)

     {  System.out.println ("error");
     }
     ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:58:18.393

您需要将其写为`FileNotFoundException PartB`，而不是`PartB FileNotFoundException`因为`FileNotFoundException`是类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:05:26.420

一个简单的“catch”子句的语法大致如下：

```
} catch (<exception-type> <identifier>) {  
    <optional-statements>
} 
```

`<exception-type>`是您试图捕获的异常的名称，并且是`<identifier>`您声明用于保存刚刚捕获的异常*实例的局部变量的名称。*

在您的事业中，它应该如下所示：

```
catch (FileNotFoundExceptio ex) {
    System.out.println ("error");
} 
```

...虽然我建议提供更多信息的错误消息！

（请注意，您必须声明一个本地标识符，即使您不打算使用它。但它只有几个字符，特别是如果您使用常规名称`e`或`ex`.）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:03:48.353

声明异常就像声明任何对象或变量一样：

`Exception_Type identifier`

# c# - 如何在xml序列化中的标记后创建新行

> ID：11661665
> 
> 赞同：2
> 
> 时间：2012-07-26T02:55:46.647
> 
> 标签：c#, xml-serialization

我使用 xml 序列化来创建我的 xml 片段。每个序列化不会在最后创建换行符，从而导致打开标签跟随关闭标签。请参阅下面的示例输出，其中在同一行打开标记中跟随关闭标记
我如何强制序列化对象位于新行中？

```
 maxmumleewayinticks=Instrument.MasterInstrument.TickSize*2;

    string filename="c:\\temp\\Strategyxmlfile" + DateTime.Now.Ticks + ".xml";
    settings = new XmlWriterSettings();
    settings.Indent = true;
    settings.IndentChars = "  ";
    settings.NewLineChars = "\r\n";
    settings.NewLineHandling = NewLineHandling.Replace;
    settings.OmitXmlDeclaration = true;
    settings.CloseOutput = false;   
    writer= new StreamWriter(filename);

    ns.Add("", "");
   // write and close the bar

   XmlSerializer serializer = new        XmlSerializer(typeof( DecisionBar));

   w =XmlWriter.Create(writer,settings);

   serializer.Serialize(w, decision,ns); 
```

输出：

```
<DecisionBar EntryOrExit="ENTRY">
  <mfe>0.0001</mfe>
  <mae>-0.0002</mae>
  <bartime>2012-07-25T21:43:00</bartime>
  <frequency>1 MINUTES</frequency>
  <HH7>true</HH7>
  <crossover>true</crossover>
  <currentprofitability>0.0001</currentprofitability>
  <entryPointLong>1.032</entryPointLong>
  <entryPointShort>1.0308</entryPointShort>
  <exitStopFull>1.031</exitStopFull>
  <exitStopPartial>0</exitStopPartial>
 </DecisionBar><DecisionBar> 
  <mfe>0.0001</mfe>
  <mae>-0.0002</mae>
  <bartime>2012-07-25T21:44:00</bartime>
  <frequency>1 MINUTES</frequency>
  <HH7>false</HH7>
  <crossover>false</crossover>
  <currentprofitability>0.0001</currentprofitability>
  <entryPointLong>0</entryPointLong>
  <entryPointShort>0</entryPointShort>
  <exitStopFull>0</exitStopFull>
  <exitStopPartial>0</exitStopPartial>
</DecisionBar> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:09:03.510

看看[这里](http://www.java2s.com/Tutorial/CSharp/0540__XML/SpecifyformatandindentationforobjectXMLserialization.htm)：

```
try
{
    MemberList g = new MemberList("group name");
    g.members[0] = new Member("mem 1");
    g.members[1] = new Member("mem 2");
    g.members[2] = new Member("mem 3");

    StringWriter sw = new StringWriter();
    XmlTextWriter tw = new XmlTextWriter(sw);
    tw.Formatting = Formatting.Indented;
    tw.Indentation = 4;

    XmlSerializer ser = new XmlSerializer(typeof(MemberList));
    ser.Serialize(tw, g);

    tw.Close();
    sw.Close();

    Console.WriteLine(sw.ToString());
}
catch(Exception exc)
{
    Console.WriteLine(exc.Message);
} 
```

这将为您提供所需的结果，尽管它需要一些额外的工作，而不仅仅是在 XmlSerializer 上指定一些选项。

**编辑：**有很多变化。[我在谷歌上](https://www.google.com/search?sugexp=chrome,mod=14&sourceid=chrome&ie=UTF-8&q=xmlserializer+formatting)找到了这个；你也可以做到的。

# java - 如何获取过去一小时的浏览器历史记录

> ID：11661670
> 
> 赞同：3
> 
> 时间：2012-07-26T02:56:28.617
> 
> 标签：java, android, browser-history

我想从浏览器中获取所有浏览器历史记录，但仅限于最后一小时。

我尝试了这段代码，但它获取了所有浏览器历史记录，我只想从最后一小时获取浏览器历史记录。

```
 Cursor mCur = activity.managedQuery(Browser.BOOKMARKS_URI,
                Browser.HISTORY_PROJECTION, null, null, null);
        mCur.moveToFirst();
        if (mCur.moveToFirst() && mCur.getCount() > 0) {
            while (mCur.isAfterLast() == false) {
                Log.v("titleIdx", mCur
                        .getString(Browser.HISTORY_PROJECTION_TITLE_INDEX));
                Log.v("urlIdx", mCur
                        .getString(Browser.HISTORY_PROJECTION_URL_INDEX));
                mCur.moveToNext();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T14:15:21.107

您可以使用`Browser.HISTORY_PROJECTION_DATE_INDEX`. 它将以毫秒（长）为单位返回日期，因此请使用：

```
long date;
Cursor mCur = activity.managedQuery(Browser.BOOKMARKS_URI,
            Browser.HISTORY_PROJECTION, null, null, null);
    mCur.moveToFirst();
    if (mCur.moveToFirst() && mCur.getCount() > 0) {
        while (mCur.isAfterLast() == false) {
            date=Long.parseLong(mCur.getString(Browser.HISTORY_PROJECTION_DATE_INDEX));
            if(date > System.currentTimeMillis() - 1000*3600) {
              Log.v("titleIdx", mCur
                    .getString(Browser.HISTORY_PROJECTION_TITLE_INDEX));
              Log.v("urlIdx", mCur
                    .getString(Browser.HISTORY_PROJECTION_URL_INDEX));
             }
            mCur.moveToNext();
        }
    } 
```

# oracle - oracle 声明用户定义的异常

> ID：11661672
> 
> 赞同：3
> 
> 时间：2012-07-26T02:56:34.857
> 
> 标签：oracle

Oracle SP 未编译

我在 MS SQL 方面有经验，但是在 Oracle 上上课，我一生都无法弄清楚为什么这个存储过程的脚本不起作用。我在第一个异常变量的变量声明部分中遇到错误。这是错误消息：

```
 PLS-00103: Encountered the symbol "EXCEPTION" when expecting one of the following:
 in out <an identifier> <a double-quoted delimited-identifier> LONG_ double ref char
 time timestamp interval date binary national character nchar 
```

编码

```
CREATE or REPLACE Procedure Movie_Rental_SP
(
Mv_ID IN Number,
Mem_ID IN Number,
Pay_ID IN Number,
Mv_Chk Number,
Mem_Chk Number,
Pay_Chk Number,
Qty_Chk Number,
--> next line is where the error points
      UnKnown_Mv Exception,
UnKnown_Mem Exception,
UnKnown_Pay Exception,
UnAvail_Mv Exception    )

IS

BEGIN
SELECT COUNT(Movie_ID) INTO Mv_Chk FROM MM_Movie WHERE Movie_ID = Mv_ID; 
SELECT COUNT(Member_ID) INTO Mem_Chk FROM MM_Member WHERE Member_ID = Mem_ID;
SELECT COUNT(Payment_Methods_ID) INTO Pay_Chk FROM MM_Pay_Type WHERE Payment_Methods_ID = Pay_ID;
SELECT Movie_Qty INTO Qty_Chk FROM MM_Movie WHERE Movie_ID = Mv_ID;

IF       Mv_Chk = 0 THEN RAISE UnKnown_Mv;
ELSE IF Mem_Chk = 0 THEN RAISE UnKnown_Mem;
ELSE IF Pay_Chk = 0 THEN RAISE UnKnown_Pay;
ELSE    Qty_Chk = 0 THEN RAISE UnAvail_Mv;
END IF; 

    DECLARE New_ID NUMBER;
    BEGIN
        SELECT Max(Rental_ID)+1 INTO New_ID FROM MM_Rental;
        EXCEPTION WHEN NO_DATA_FOUND THEN
            New_ID := 1;
            DBMS_OUTPUT.PUT_LINE ('There are no exsisting Rental IDs, ID set to 1');
    END;

INSERT INTO MM_Rental VALUES (New_ID,Mem_ID,Mv_ID,Sysdate,Null,Pay_ID);
UPDATE MM_Movie SET Movie_Qty = Movie_Qty - 1 WHERE Movie_ID = Mv_ID;

EXCEPTION 
    WHEN UnKnown_Mv THEN 
        RAISE_APPLICATION_ERROR(-20001,'There is no movie with Movie ID of: '||Mv_ID||' Transaction cancelled.');
    WHEN UnKnown_Mem THEN 
        RAISE_APPLICATION_ERROR(-20002,'No member exists with member ID: '||Mem_ID||' Transaction cancelled.');
    WHEN UnKnown_Pay THEN
        RAISE_APPLICATION_ERROR(-20003,'No payment type for: '||Pay_ID||' Transaction cancelled.');
    WHEN UnAvail_Mv THEN
        RAISE_APPLICATION_ERROR(-20004,'No movies available for: '||Mv_ID||' Transaction cancelled.');
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE ('Error number: '||sqlcode);
        DBMS_OUTPUT.PUT_LINE ('Error message: '||sqlerrm);
        DBMS_OUTPUT.PUT_LINE('Unanticipated error.  Contact your system administrator.');
END;
/ 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T03:08:02.300

我的假设是，在三个`IN`参数之后，您的意图是将其他所有内容声明为局部变量，而不是作为过程的参数。将异常传递给过程是没有意义的。你的“否则如果`also needs to be`ELSIF”。

```
CREATE or REPLACE Procedure Movie_Rental_SP
(
  Mv_ID IN Number,
  Mem_ID IN Number,
  Pay_ID IN Number
)
AS
  Mv_Chk Number;
  Mem_Chk Number;
  Pay_Chk Number;
  Qty_Chk Number;
  UnKnown_Mv Exception;
  UnKnown_Mem Exception;
  UnKnown_Pay Exception;
  UnAvail_Mv Exception;  
BEGIN
  SELECT COUNT(Movie_ID) INTO Mv_Chk FROM MM_Movie WHERE Movie_ID = Mv_ID; 
  SELECT COUNT(Member_ID) INTO Mem_Chk FROM MM_Member WHERE Member_ID = Mem_ID;
  SELECT COUNT(Payment_Methods_ID) INTO Pay_Chk FROM MM_Pay_Type WHERE Payment_Methods_ID = Pay_ID;
  SELECT Movie_Qty INTO Qty_Chk FROM MM_Movie WHERE Movie_ID = Mv_ID;

  IF    Mv_Chk = 0 THEN RAISE UnKnown_Mv;
  ELSIF Mem_Chk = 0 THEN RAISE UnKnown_Mem;
  ELSIF Pay_Chk = 0 THEN RAISE UnKnown_Pay;
  ELSE  Qty_Chk = 0 THEN RAISE UnAvail_Mv;
  END IF; 

  DECLARE 
    New_ID NUMBER;
  BEGIN
    SELECT Max(Rental_ID)+1 INTO New_ID FROM MM_Rental;
  EXCEPTION WHEN NO_DATA_FOUND THEN
     New_ID := 1;
     DBMS_OUTPUT.PUT_LINE ('There are no exsisting Rental IDs, ID set to 1');
  END;

  INSERT INTO MM_Rental VALUES (New_ID,Mem_ID,Mv_ID,Sysdate,Null,Pay_ID);
  UPDATE MM_Movie SET Movie_Qty = Movie_Qty - 1 WHERE Movie_ID = Mv_ID;
EXCEPTION 
  WHEN UnKnown_Mv THEN 
     RAISE_APPLICATION_ERROR(-20001,'There is no movie with Movie ID of: '||Mv_ID||' Transaction cancelled.');
  WHEN UnKnown_Mem THEN 
      RAISE_APPLICATION_ERROR(-20002,'No member exists with member ID: '||Mem_ID||' Transaction cancelled.');
  WHEN UnKnown_Pay THEN
      RAISE_APPLICATION_ERROR(-20003,'No payment type for: '||Pay_ID||' Transaction cancelled.');
  WHEN UnAvail_Mv THEN
      RAISE_APPLICATION_ERROR(-20004,'No movies available for: '||Mv_ID||' Transaction cancelled.');
  WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE ('Error number: '||sqlcode);
      DBMS_OUTPUT.PUT_LINE ('Error message: '||sqlerrm);
      DBMS_OUTPUT.PUT_LINE('Unanticipated error.  Contact your system administrator.');
END;
/ 
```

作为一般原则，`WHEN OTHERS`不重新引发异常的异常处理程序几乎可以肯定是错误。写入数据`dbms_output`并不能以任何方式保证数据将被任何人看到或在任何地方持久保存。所以，例如

```
 WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE ('Error number: '||sqlcode);
      DBMS_OUTPUT.PUT_LINE ('Error message: '||sqlerrm);
      DBMS_OUTPUT.PUT_LINE('Unanticipated error.  Contact your system administrator.');
      RAISE; 
```

将重新抛出之前引发的任何异常。当然，如果您根本没有捕获您无法处理的异常，您将获得相同的行为。

# c# - 如何对同名的 XML 节点进行分组？

> ID：11661676
> 
> 赞同：0
> 
> 时间：2012-07-26T02:57:00.160
> 
> 标签：c#, xml, xmlnode

我试图弄清楚如何对具有相同名称但不同值的 XML 节点进行分组。

我正在使用的 Web 服务返回一个如下所示的 XmlElement：

```
<Items>
    <Item>
        <Name name="Name">Item 1</Name>
        <Description name="Description">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        </Description>
        <AssociatedItems name="Associated Items">Item 2</AssociatedItems>
        <AssociatedItems name="Associated Items">Item 3</AssociatedItems>
        <AssociatedItems name="Associated Items">Item 4</AssociatedItems>
        <AssociatedItems name="Associated Items">Item 5</AssociatedItems>
    </Item>
</Items> 
```

我正在将每个节点转换为 HTML 标记

```
protected void lnkItem_Click(object sender, EventArgs e)
{
    LinkButton link = (LinkButton)sender;
    GridViewRow row = (GridViewRow)link.Parent.Parent;

    string id = gv.DataKeys[row.RowIndex]["id"].ToString();

    PublicApiAsmxServiceSoapClient service = new PublicApiAsmxServiceSoapClient("PublicApiAsmxServiceSoap", WEB_SERVICE_URL);
    XmlElement xml = service.ItemGetAsXml(id);
    XElement nodes = XElement.Parse(xml.InnerXml);

    foreach (var node in nodes.Elements())
    {
        InsertHTML(node);
    }
}

private void InsertHTML(XElement node)
{
    if (node.Value == string.Empty)
        return;

    pnl.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<h3>{0}</h3>", node.Attribute("name").Value)));
    pnl.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<p>{0}</p>", node.Value)));
} 
```

现在使用我的代码，HTML 输出将是：

```
<h3>Name</h3>
<p>Item 1</p>
<h3>Description</h3>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<h3>Associated Items</h3>
<p>Item 2</p>
<h3>Associated Items</h3>
<p>Item 3</p>
<h3>Associated Items</h3>
<p>Item 4</p>
<h3>Associated Items</h3>
<p>Item 5</p> 
```

有没有办法将相同的节点分组为无序列表？像这样的东西，也许：

```
<h3>Name</h3>
<p>Item 1</p>
<h3>Description</h3>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<h3>Associated Items</h3>
<ul>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
</ul> 
```

谢谢！（请友好一点。）

PS 重复的子节点不仅限于 AssociatedTerms。可能有更多重复的同名子节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:36:34.767

使用生成器根据分组生成元素是最简单的，因为生成的内容取决于有多少重复项。

据我了解，您是按元素名称和`name`属性值进行分组的。然后根据组中是否有多个元素生成`h3`后跟一个元素。 `p`如果有单个元素，或者`ul`如果有多个元素。

```
IEnumerable<XElement> GroupedElements(XElement root)
{
    var groupedItems =
        from element in root.Elements()
        group element
        by new
        {
            Element = element.Name,
            Name = (string)element.Attribute("name"),
        };
    foreach (var g in groupedItems)
    {
        yield return new XElement("h3", g.Key.Name);
        var isMultiple = g.Skip(1).Any();
        if (isMultiple)
            yield return new XElement("ul",
                from item in g
                select new XElement("li", item.Value.Trim())
            );
        else
            yield return new XElement("p", g.Single().Value.Trim());
    }
} 
```

```
var xmlStr = @"<Items>
    <Item>
        <Name name=""Name"">Item 1</Name>
        <Description name=""Description"">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        </Description>
        <AssociatedItems name=""Associated Items"">Item 2</AssociatedItems>
        <AssociatedItems name=""Associated Items"">Item 3</AssociatedItems>
        <AssociatedItems name=""Associated Items"">Item 4</AssociatedItems>
        <AssociatedItems name=""Associated Items"">Item 5</AssociatedItems>
    </Item>
</Items>";
var doc = XDocument.Parse(xmlStr);
var transformed = new XElement("div", 
    from item in doc.XPathSelectElements("/Items/Item")
    select GroupedElements(item)
); 
```

产生以下结果：

```
<div>
  <h3>Name</h3>
  <p>Item 1</p>
  <h3>Description</h3>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
  <h3>Associated Items</h3>
  <ul>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
    <li>Item 5</li>
  </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:25:16.763

我不确定它是否是最好的解决方案，但你可以尝试这样的事情

```
 List<string> items = new List<string>();
          XmlReader rdr = XmlReader.Create(new System.IO.StringReader(xml));
          while (rdr.Read())
          {
            if (rdr.NodeType == XmlNodeType.Element)
            {
                InsertHTML(rdr.LocalName.ToString(), rdr.Value.ToString());
            }
          }
        private void InsertHTML(string name, string value)
        {
            if (value == string.Empty)
                return;
            if(name=="AssociatedItems")
             {

               items.add(value);
             }
             else
             {
            pnl.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<h3>{0}</h3>", name)));
            pnl.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<p>{0}</p>", value)));
             }
        }
           pnl.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<h3>{0}</h3>", "Associated Items")));
           pnl.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<ul>")));
        foreach(var item in items)
        {

          pnl.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("<li>{0}</li>", item)));

        }
         pnl.ContentTemplateContainer.Controls.Add(new LiteralControl(String.Format("</ul>"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T07:42:50.167

如果你想使用 XSLT，你可以使用这个：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes"/>

  <xsl:key name="grouping" match="Item/*" use="@name"/>

  <xsl:template match="Item">
    <xsl:apply-templates
         select="*[generate-id(.)=generate-id(key('grouping', @name)[1])]"/>
  </xsl:template>

  <xsl:template match="Item/*">
    <h3><xsl:value-of select="@name"/></h3>
    <xsl:choose>
      <xsl:when test="count(key('grouping', @name))=1">
        <p><xsl:value-of select="normalize-space(.)"/></p>
      </xsl:when>
      <xsl:otherwise>
        <li>
          <xsl:for-each select="key('grouping', @name)">
            <ul><xsl:value-of select="normalize-space(.)"/></ul>
          </xsl:for-each>
        </li>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

# linux - 在 Linux 源代码中，特定 USB 设备的识别发生在哪里？

> ID：11661679
> 
> 赞同：3
> 
> 时间：2012-07-26T02:57:28.833
> 
> 标签：linux, usb, kernel, driver

我有一个特定的 USB 设备，我想检查其 Linux 驱动程序源代码。我的理解是，USB 驱动程序采取的第一步是注册自己能够处理具有特定供应商 ID 和产品 ID 的设备。在我的例子中，供应商 ID 是`0BDA`，产品 ID 是`8187`. 鉴于此信息，我是否可以找到将自身注册为能够处理此设备的源文件，以便找出哪些其他源文件实际实现了驱动程序详细信息？

作为参考，我在 kernel 上`3.2.0-26`。我试过了`grep -rl 8187 /usr/src`，但这列出了一大堆文件，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T03:42:48.493

除了供应商和产品 ID 之外，还有很多其他参数可以影响选择哪个驱动程序。有版本号、设备类、子类和协议，以及接口类、子类和协议。内核从设备中读取所有这些，并构建一个包含所有这些的字符串，如下所示（示例是我的设备之一，不是你的）：

```
usb:v15A9p0004d0001dc00dsc00dp00icFFiscFFipFF 
```

然后将该字符串传递给 modprobe，modprobe 将其与模块本身中的字符串（带有通配符）进行匹配。您可以通过在特定模块上运行来查看特定模块的匹配规则列表`modinfo`。与这些规则对应的源代码构造是`MODULE_DEVICE_TABLE`. 设备表中的各个条目通常是使用`USB_DEVICE`宏构建的，因此 grepping`USB_DEVICE.*8187`而不是`8187`应该缩小范围。

如果您有一个设备插入并工作，您可以通过查看它的 sysfs 条目来找出与之关联的驱动程序：

```
ls -l /sys/bus/usb/devices/*/driver 
```

如果您可以构建其中一个设备描述符字符串，则可以要求 modprobe 为您查找驱动程序，而无需通过执行此操作实际加载它（再次以我的设备为例）：

```
modprobe -v -n 'usb:v15A9p0004d0001dc00dsc00dp00icFFiscFFipFF' 
```

`lsusb -v`如果你能得到它，所有的数字都在输出中可用。如果没有，请尝试零，也许您会得到通配符匹配。确保对十六进制数字使用大写字母，对其他所有内容使用小写字母。这仅在驱动程序存在时才有效，`/lib/modules`因此对于查找内核编译中遗漏的驱动程序没有好处。

如果所有其他方法都失败了，低技术的方法是从 中获取人类可读的设备名称`lsusb`，然后在谷歌上搜索它加上单词“Linux”。

Using some of the above methods, I found that your device's driver is called rtl8187, with the vendor and product IDs registered from `drivers/net/wireless/rtl818x/rtl8187/dev.c`.

# android - ant build android 项目 tools/ant/build.xml:785 null 返回：139

> ID：11661681
> 
> 赞同：1
> 
> 时间：2012-07-26T02:57:37.417
> 
> 标签：android, ant, build

我使用ant更新一个android项目来定位android-8然后使用ant来构建项目，但是我得到了错误：BUILD FAILED /home/fengzhiping/android-sdk-linux/tools/ant/build.xml:769: The执行此行时发生以下错误：/home/fengzhiping/android-sdk-linux/tools/ant/build.xml:785: null 返回：139

为什么ant build失败？任何人都可以帮助我吗？我使用的是 ubuntu11.04，android 工具版本是 Android SDK Tools Revision 15。

# vb.net-2010 - 如何获取数组中的每个值并将其显示在列表框中

> ID：11661682
> 
> 赞同：0
> 
> 时间：2012-07-26T02:57:42.433
> 
> 标签：vb.net-2010

嗨，我是 VB 新手，使用数组时遇到问题。我的代码是这样的。这是类 FindFactorsObject.vb

```
Public Sub FindFactors()
    count = 0
    temp = Convert.ToInt32(Math.Sqrt(_x))
    For i As Integer = 1 To temp
        If _x Mod i = 0 Then
            ReDim array(count)
            array(count) = i
            count += 1
        End If
    Next 
```

所以我创建了一个数组并存储了结果。现在我想在 Form.vb 中显示我的数组中的每个值，如果可能的话，有人可以教我如何为每个显示的值设置延迟。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T00:00:21.473

总是声明你的变量，如果可能的话，它们的确切类型，你认为他们会处理的。当您说“现在我想在 Form.vb 中显示我的数组中的每个值”时，我从字面上理解：在表单中，我们将在您的表单上打印它们

```
Public Sub FindFactors(_x As Integer)
    Dim temp As Integer = Convert.ToInt32(Math.Sqrt(_x))
    Dim l As New List(Of Integer)
    For i As Integer = 1 To temp
        If _x Mod i = 0 Then
            l.add(i)
        End If
    Next
    Dim pf As New PointF(20, 20)
    For Each i As Integer In l
        creategraphics.drawstring(i.ToString, New font(font.fontFamily, 24), brushes.cadetblue, pf)
        pf = New PointF(pf.X, pf.Y + 30)
    Next
End Sub 
```

# jquery - 如何从输入框中弹出选择列表？

> ID：11661685
> 
> 赞同：0
> 
> 时间：2012-07-26T02:58:06.543
> 
> 标签：jquery, css, ipad, list, custom-component

我正在通过 phonegap 为 iPad 创建一个 html5/js 应用程序。我想实现一个搜索输入框，以便搜索结果出现在弹出框的选择列表中（有点像 ios sdk 中的弹出框）。我希望它的工作方式类似于 google 搜索栏在 iPad Safari 浏览器中的显示方式。

我找不到任何可以使这种情况发生的东西。我正在考虑通过使用 CSS 样式 position:absolute... 将选择列表放在输入框后面，但是您可以在搜索栏后面看到它（并单击它）。它必须是本机ui。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:03:17.497

HTML ->

```
<div class="select">
  <div class="input-wrapper">
    <input type="text" id="theText" />   
  </div>
  <div class="options">
    <select>
      <option value="1"> One </option>
      <option value="2"> Two </option>
   </select>
  </div>
</div> 
```

CSS ->

```
.select{
  border:1px solid rgb(230,230,230);
  width:165px;
  height:25px;  
  position:relative;
  background:;    
}
.input-wrapper{
  position:absolute;
    top:0;
  width:135px;  
  height:25px;
  overflow:hidden;  
  z-index:10;
}
input{
  border:none;
  padding:0;
  margin:0;
  width:135px;    
}
.options{
  position:absolute;
    top:-2px;
    left:-2px;
  display:none;
  width:164px;
  border-top:none;  
  background:#fff;
  z-index:0;    
}
.options select{
  width:189px;
  min-height:26px;  
  border:1px solid rgb(230,230,230);    
} 
```

一点 jQuery 味道 ->

```
$('.select input').on('keyup', function(){
  $('.options').show();
});
$('select').on('change', function(){
  $('.options').hide();
}); 
```

# ruby-on-rails - Rails 为什么我得到未定义的方法

> ID：11661688
> 
> 赞同：2
> 
> 时间：2012-07-26T02:58:19.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refinerycms

我正在尝试创建一个表单，用户可以在其中输入他们的电子邮件并将其保存到数据库中。我希望在每一页的页脚中都有这个表格。

我已经通过 rails 脚手架生成了 NewsletterSignup。

现在我的 /app/views/refinery/_footer.html.erb 中有这段代码：

```
<%= form_for(@newsletter_signup) do |f| %>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

当我尝试加载页面时，出现此错误：

```
 NoMethodError in Refinery/pages#home

Showing /Users/tomcaflisch/Sites/PersonalTrainingKT/app/views/refinery/_form.html.erb where line #1 raised:

undefined method `newsletter_signups_path' for #<#<Class:0x007fb84c769ba0>:0x007fb84c08d110> 
```

为什么方法未定义？如果我运行 rake 路线，我可以看到它存在：

```
newsletter_signups GET    /newsletter_signups(.:format)          newsletter_signups#index
                       POST   /newsletter_signups(.:format)          newsletter_signups#create
 new_newsletter_signup GET    /newsletter_signups/new(.:format)      newsletter_signups#new
edit_newsletter_signup GET    /newsletter_signups/:id/edit(.:format) newsletter_signups#edit
     newsletter_signup GET    /newsletter_signups/:id(.:format)      newsletter_signups#show
                       PUT    /newsletter_signups/:id(.:format)      newsletter_signups#update
                       DELETE /newsletter_signups/:id(.:format)      newsletter_signups#destroy 
```

路线.rb

```
PersonalTrainingKT::Application.routes.draw do

  resources :newsletter_signups

  # This line mounts Refinery's routes at the root of your application.
  # This means, any requests to the root URL of your application will go to Refinery::PagesController#home.
  # If you would like to change where this extension is mounted, simply change the :at option to something different.
  #
  # We ask that you don't use the :as option here, as Refinery relies on it being the default of "refinery"
  mount Refinery::Core::Engine, :at => '/'
end 
```

我还在 application_controller 中创建了一个新对象，因为此时事通讯注册将在每个页面上可用：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :instantiate_newsletter_signup

  def instantiate_newsletter_signup
    @newsletter_signup = NewsletterSignup.new
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T04:09:48.910

看起来由于refinerycms 安装了路线（不确定这是否是正确的术语），它看不到正常的路线。

从这个链接[https://groups.google.com/forum/#!topic/refinery-cms/5k7Co4D1bVI](https://groups.google.com/forum/#!topic/refinery-cms/5k7Co4D1bVI)我发现我需要改变

```
<%= form_for(@newsletter_signup, :url => newsletter_signups_path, :method => :post) do |f| %> 
```

到

```
<%= form_for(@newsletter_signup, :url => main_app.newsletter_signups_path, :method => :post) do |f| %> 
```

# c++ - 在 solaris 中运行可执行的 c++ 程序

> ID：11661689
> 
> 赞同：0
> 
> 时间：2012-07-26T02:58:22.017
> 
> 标签：c++, solaris

我`Transfer`在`Solaris`. 有可执行文件`transfer`。如果我在`Linux`，我会这样做，`./transfer`并且程序将完美执行。但是，当我运行时`./transfer`，`Solaris`我得到：

```
bash: ./transfer: invalid argument 
```

有人知道如何运行可执行文件`Solaris`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:16:01.747

听起来编译是针对与主机不同的架构完成的。

[请参阅SPARC 机器上的](https://unix.stackexchange.com/questions/36376/what-does-invalid-argument-mean-in-solaris)相关 thread- x86 二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:10:21.500

请查看我在此处附加的以下页面：

[https://unix.stackexchange.com/questions/36376/what-does-invalid-argument-mean-in-solaris](https://unix.stackexchange.com/questions/36376/what-does-invalid-argument-mean-in-solaris)

[我正在尝试从 solaris 执行 java，出现无效参数错误](https://stackoverflow.com/questions/9428280/i-am-trying-to-excute-java-from-solaris-getting-invalid-argument-error)

并且还要考虑正确的文件文件夹和文件权限，有时这些问题会产生问题。

# html - 为什么我的贝宝按钮不在我的页面中心

> ID：11661692
> 
> 赞同：1
> 
> 时间：2012-07-26T02:58:35.327
> 
> 标签：html, css

所以我有一个简单的页面：www.kensandbox.info/centerthis

这是一个简单的 html/css 页面，我正在尝试添加一个 paypal 按钮。

问题是我不知道如何使按钮居中？我尝试添加以下内容：

```
<div align="center"> form code here </div> 
```

没有骰子。我什至尝试在表单之前添加中心标签。

站点代码（简单的 html 和 css 文件）可以在这里下载：

www.kensandbox.info/centerthis/centerthis.zip

我的猜测是其他 CSS 元素之一覆盖了我的更改。

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T03:06:51.103

`float:left`mycss.css`form input, form .btn`里面有一个

`float:none`如果要覆盖，请添加到该输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T03:07:54.993

如果不查看您的代码，我会说使 div 居中的最佳方法通常是确保它显示为块元素（默认情况下应该是）并指定其宽度；然后最后应用保证金：自动。

例如

```
<div class="container">
    ...
    <div class="centered-element"> form code here </div>
    ...
</div> 
```

在哪里

```
container {
    width: 200px;
}
centered-element {
    width: 150px;
    margin: auto;
    display: block; /* to make sure it isn't being mucked up by your other css */
    float: none; /* to make sure it isn't being mucked up by your other css */
} 
```

编辑：

我说这样做是因为，就像我现在看到有人评论一样，`<div align="center">`已被弃用，`<center>`标签也是如此。扩展一下，这是因为您的 HTML 应该只用于创建网页的结构和语义，而 CSS 应该用于它的表示方面。从长远来看，尽可能将两者分开可以为您节省大量时间。

此外，最好以您不必`display: block;`在 div 上设置的方式设计 CSS（因为 div 已经是块元素）并且您不必使用`float: none;`. 更多关于这样做的好方法，改进您的工作流程，节省一些时间，并且通常很棒，请查看面向对象的 CSS aka ooCSS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T11:37:56.207

我找到了答案，我要感谢花时间回答的两个人。

我不明白的是如何查看网页并查看驱动格式的 CSS 代码。

一些研究让我找到了一个名为 CSSViewer 的 Chrome 插件。使用这个插件和答案中的信息，我能够识别一个浮动左 css 元素，我只需将其更改为浮动中心。

再次感谢您的帮助。

# javascript - UIWebview & JS 效果 - 导航栏缓存

> ID：11661697
> 
> 赞同：0
> 
> 时间：2012-07-26T02:59:11.923
> 
> 标签：javascript, objective-c, ios, uiwebview, uinavigationbar

我用导航栏实现了 UIWebview，任何新访问的页面都将添加到导航堆栈中，但问题是当我在推送新视图之前隐藏一些元素并返回到同一页面时，即使我再次显示它，该元素也会保持隐藏状态

这是我的 JS 代码

```
jQuery(document).ready(function(){
                           $('#hello').fadeIn('slow');}); 
    $('.facebook,.location, .mainItem').hide();         
    $('.facebook,.location, .mainItem').show();

    $('.contactIcon').click(function(e){
        e.preventDefault(); 
         $('.facebook,.location, .mainItem').fadeOut('slow', function() {
         window.location = "contact.html"; 
         });
     }); 
```

这是Objective-C代码

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{
DrillDownWebExampleAppDelegate *appDelegate = 
(DrillDownWebExampleAppDelegate *)[[UIApplication sharedApplication] delegate];

if(navigationType == UIWebViewNavigationTypeOther)
{
    NSURL *url2 = [request URL];
    NSString *URLStr = [url2 absoluteString];

    RootViewController* viewController = [[RootViewController alloc] init];
    NSString *holder = [self getQueryStringInner:URLStr];
    [self getQueryString:URLStr];
    if([holder length] != 0 )
    {
        appDelegate.title =@"Title"; 
        appDelegate.query = queryString;
        [self.navigationController pushViewController:viewController animated:YES];
        [viewController release];
        return NO;
    }

}
return YES;
} 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:23:51.413

我做了一个小技巧，但我认为还有另一种方法

我在 window.location 之后再次展示了元素

```
jQuery(document).ready(function(){
                       $('#hello').fadeIn('slow');}); 
$('.facebook,.location, .mainItem').hide();         
$('.facebook,.location, .mainItem').show();

$('.contactIcon').click(function(e){
    e.preventDefault(); 
     $('.facebook,.location, .mainItem').fadeOut('slow', function() {
     window.location = "contact.html"; 
     $('.facebook,.location, .mainItem').show();
     });
 }); 
```

它像这样工作

# c# - C#：AppDomain 处理 UnhandledException

> ID：11661700
> 
> 赞同：2
> 
> 时间：2012-07-26T03:00:21.070
> 
> 标签：c#, exception, appdomain, unhandled-exception

我是 appdomain 概念的新手。这是我关于处理 appdomain 恢复异常的问题：

1.  当 unhandledException 触发器是处理它的正确方法时卸载 appdomain 吗？
2.  每次我调用我的 appdomain 时，我都必须将它放在 trycatch 中，这样在调用过程中发生的任何事情我都会卸载以避免崩溃我的主域，这是最佳实践吗？

我有我的父应用程序域，然后我创建了名为 SandBox2 的子应用程序域。

```
 AppDomain sandbox2 = AppDomain.CreateDomain("SandBox2");
        UpdateLog(string.Format("Created AppDomain {0}", sandbox2.FriendlyName));
        try
        {
            sandbox2.ExecuteAssembly(x.ToString()); //along here null exception is triggered
        }
        catch (Exception)
        {
            AppDomain.Unload(sandbox2);
        } 
```

谢谢

# php - PHP中是否有内置函数可以将变量与数组中的许多变量进行比较？

> ID：11661701
> 
> 赞同：0
> 
> 时间：2012-07-26T03:00:24.540
> 
> 标签：php

```
$numbers = array('1','2','3','4');
$number = '1'; 
```

有什么方法可以将所有数字与一个数字进行比较，看看其中一些值是否等于 $number？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:04:43.290

就在这里：

```
if(in_array(1, array('1','2','3','4')))
{
     echo 'It in here';
}else{ echo 'nope its not';} 
```

# java - 在 Eclipse 中使用 Java 的默认包

> ID：11661706
> 
> 赞同：8
> 
> 时间：2012-07-26T03:01:01.707
> 
> 标签：java, eclipse, package

在 Eclipse 中，当我开始一个新项目时，我会通过向导，当我开始为该项目编写我的第一个类时，我被要求选择一个包。有时出于懒惰，我只是选择默认包。

向导警告我这是不鼓励的。即使我忽略了这些警告，我也不会因此而对应用程序有任何问题。或者至少，到目前为止，我从来没有遇到过任何问题。

那么 Eclipse 为什么要我创建一个新包呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T03:17:11.230

Eclipse 和大多数其他 IDE 都面向大型项目。业余爱好者编程和小规模作业通常可以在 IDE 中完成，但请注意，一般假设是针对较大的项目 - 10 到 5,000 多个课程之间的任何内容。

您也有可能创建一个与 Java API 中的名称相似的类 - 例如：

*   [`java.rmi.MarshalException`](http://docs.oracle.com/javase/7/docs/api/java/rmi/MarshalException.html)和
*   [`javax.xml.bind.MarshalException`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/MarshalException.html)

`throw new MarshalException();`如果两个类都存在于同一类路径中，则实例化类 ( ) 的歧义是编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:03:53.163

您实际上无法从默认包中导入类。我知道它是为了方便或非常小的（一个类文件）任务而允许的。

# android - 未找到用于本机代码编译的 Android bitmap.h

> ID：11661708
> 
> 赞同：4
> 
> 时间：2012-07-26T03:01:10.953
> 
> 标签：android, android-ndk

我正在尝试使用 Android NDK 编译代码。我以前很好地使用了这段代码，但是在其中更改了一件事，现在它无法编译。出现的错误是：

```
"Compile++ thumb : filters <= filters.cpp
C:/Android/my-app//jni/filters.cpp:4:28: fatal error: android
/bitmap.h: No such file or directory
compilation terminated.
make: *** [C:/Android/my-app//obj/local/armeabi/objs/filters/
filters.o] Error 1 
```

我的 bitmap.h 文件在库中定义为：

```
#include <android/bitmap.h> 
```

我知道 bitmap.h 只有在 target-skd 构建为 8 或更高版本之后才存在，而我的目标是 10，min 为 8。有什么建议吗？这让我发疯并且曾经工作过！感谢您提供的任何帮助。

编辑：这也是我的 Android.mk 文件

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := filters
LOCAL_SRC_FILES := filters.cpp
LOCAL_LDLIBS    := -lm -llog -ljnigraphics

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T15:23:53.120

让它工作。我使用的是 SDK 工具修订版 20 和平台工具修订版 12。为了让它编译，我必须在命令行中指定 APP_PLATFORM（显然这些修订版默认为其他内容）。

刚跑：

```
ndk-build APP_PLATFORM=android-8 
```

它建成了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-14T10:04:56.997

将 APP_PLATFORM=android-8 插入文件 Application.mk

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:25:21.843

好吧，下面的答案也帮助了我。我尝试将 APP_PLATFORM 变量从 Application.mk 设置为 android-10 （正如我预期的那样，这个选项也应该是 APP_ABI 所在的位置），但这没有帮助。非常不直观，但不管怎样，对吧..？

# javascript - 如何使用nodejs解析javascript内容

> ID：11661711
> 
> 赞同：0
> 
> 时间：2012-07-26T03:02:07.130
> 
> 标签：javascript, node.js, cdata

我正在尝试解析下面提到的 javascript 内容

```
<script type="text/javascript">
//<![CDATA[
var catalog = new Catalog({"Data":[{'ID':'rsafl502','GC':'RSAFL502','CT':49,'SU':1875,'DC':'Smoke','NM':'Watery Faux Leather Purse','PR':'Reg $56.00','SL':'$15.00','oSL':true,'RT':'40','CL':[{'E':'Black','L':'Black','V':['#000000']},{'E':'Smoke','L':'Smoke','V':['#383E50']}],'SZ':[{'E':'One Size','L':'One Size'}],'SC':''}
,{'ID':'rsavp500m','GC':'RSAVP500M','CT':49,'SU':1029,'DC':'Navy','NM':'Medium Emergency Bag','PR':'Reg $24.00','SL':'$15.00','oSL':true,'RT':'50','CL':[{'E':'Black','L':'Black','V':['#000000']},{'E':'Navy','L':'Navy','V':['#07194D']},{'E':'Crucian Blue','L':'Crucian Blue','V':['#00b4ee']}],'SZ':[{'E':'M','L':'M'}],'SC':''}
]});
//]]>
</script> 
```

但是我不知道如何解析意味着我想使用 nodejs 将“NM”、“PR”、“SL”等详细信息存储到变量中。我的问题是是否可以使用 nodejs 解析它？如果可能的话，请告诉我如何做到这一点。我是 nodejs 的新手。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:07:59.733

如果您删除“新目录”字符串，则它是一个对象。您可以像 catalog.Data.ID 或 catalog.Data.GC 一样访问它，

例如

```
var catalog={Data:{ID: 5, GC: 2}};
alert(catalog.Data.ID); 
```

将显示一个带有“5”的消息框

# objective-c - 在 iOS 中设置标签文本时遇到问题

> ID：11661720
> 
> 赞同：0
> 
> 时间：2012-07-26T03:03:01.877
> 
> 标签：objective-c, ios

我有一个连接`UILabel`

```
@property (strong, nonatomic) IBOutlet UILabel *label; 
```

还有一个Action，由按钮触发

```
- (IBAction)buttonPressed:(UIButton *)sender; 
```

按下按钮时，我想更新标签以显示运行秒数长达 3 分钟，所以我

```
- (IBAction)buttonPressed:(UIButton *)sender {
    for (int i =0; i < 180; ++i) {
        [label setText:[NSString stringWithFormat:@"%d", i]];
        sleep(1);
    }
} 
```

确认，方法被调用，计时器正在滴答作响..标签文本但没有改变。请问我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:10:14.183

`sleep()`不允许 UI 线程自行更新。

这是一个使用 GCD 的示例，它与您的原始代码非常匹配。注意：有更好的方法来做到这一点（见：）`dispatch_after()`。

```
- (IBAction)buttonPressed:(UIButton *)sender {
    [label setText:[NSString stringWithFormat:@"%d", 0]];

    dispatch_queue_t queue = dispatch_queue_create("com.test.timmer.queue", 0);
    dispatch_async(queue, ^{
    for (int i = 1; i < 180; ++i) {
        sleep(1);
        dispatch_async(dispatch_get_main_queue(), ^{
            [label setText:[NSString stringWithFormat:@"%d", i]];
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T03:27:53.790

您的 sleep() 在主线程中，您的视图无法刷新，您可以使用 NSTimer 来完成。

```
- (void)update
{
    [label setText:[NSString stringWithFormat:@"%d", i]];
    i++;
    if(i>=100)
    {
        [timer invalidate];
    }
}

- (IBAction)buttonPressed:(UIButton *)sender
{

    timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(update) userInfo:nil repeats:YES];
    [timer fire];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:09:19.530

您必须退出回您的运行循环以允许控件刷新。您可能应该使用每秒触发一次的 NSTimer 而不是紧密循环。

虽然不是很推荐，但如果您在 setText 之后立即调用它，以下可能也有效：

```
[[NSRunLoop currentRunLoop] acceptInputForMode:NSDefaultRunLoopMode beforeDate:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T04:09:16.660

所有与 UI 相关的事情都在主线程中完成。强制你的运行时在主线程上休眠将真正冻结你的 UI。这样做 180 次，你会得到一个沮丧的最终用户。

# php - 修改此函数的语法以排除多个数组而不是一个

> ID：11661728
> 
> 赞同：0
> 
> 时间：2012-07-26T03:03:36.713
> 
> 标签：php, arrays

我是 PHP 的新手，不知道如何修改这个函数的语法，以便它可以用来排除多个数组，而不仅仅是一个。此代码自动插入在表单中输入的每个值，而无需指定字段并排除一个数组（称为“提交”），并且是我在 [http://www.abeautifulsite.net/找到的代码的略微修改版本博客/2007/10/将数组插入到 mysql 数据库表中/](http://www.abeautifulsite.net/blog/2007/10/inserting-an-array-into-a-mysql-database-table/)

我有几个正在发布的数组，我想从我的 INSERT 函数中排除它们，因为它们要么被单独处理和插入，要么在处理表单后触发用户被重定向的位置。

```
function mysql_insert_array($db, $data, $exclude = array()) { 
$fields = $values = array(); 
if( !is_array($exclude) ) $exclude = array($exclude); 
foreach( array_keys($data) as $key ) {
    if( !in_array($key, $exclude) ) {
        $fields[] = "`$key`";
        $values[] = "'" . mysql_real_escape_string($data[$key]) . "'";
    }
} 
$fields = implode(",", $fields);
$values = implode(",", $values); 
if( mysql_query("INSERT INTO `$db` ($fields) VALUES ($values)") ) {       
} else {
    return array( "mysql_error" => mysql_error() );
} 
}
$result = mysql_insert_array("db", $_POST, "submit"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:20:04.353

exclude 参数可以是一个数组数组：

```
 function mysql_insert_array($db, $data, $excludes = array()) { 
      $fields = $values = array(); 
      if( !is_array($excludes) ) $excludes = array($excludes); 

      foreach($excludes as $exclude ) {
        $data = array_diff_assoc($data, $exclude);
      } 

      foreach( array_keys($data) as $key ) {
        $fields[] = "`$key`";
        $values[] = "'" . mysql_real_escape_string($data[$key]) . "'";
      }

      $fields = implode(",", $fields);
      $values = implode(",", $values); 
      if( !mysql_query("INSERT INTO `$db` ($fields) VALUES ($values)") ) {       
        return array( "mysql_error" => mysql_error() );
      }
    } 
```

然后，您可以像这样使用它：

```
$array1 = array('toto', 'titi', 'tata');
$array2 = array('submit', 'foo');

$parent_array = array ($array1, $array2);

$result = mysql_insert_array("db", $_POST, $parent_array); 
```

# php - 使用 .htaccess 制作 .php 不需要

> ID：11661729
> 
> 赞同：1
> 
> 时间：2012-07-26T03:03:41.943
> 
> 标签：php, .htaccess

我试图让我的链接更容易编写，没有.php。

我的重写规则是：

```
RewriteEngine on
RewriteRule ([a-z]+)$ $1.php 
```

这是我自己编写的第一个 .htaccess，但它似乎不起作用。我很擅长正则表达式。我在这里看不到问题。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:09:40.353

```
RewriteEngine on
RewriteRule ^(.*)$ $1.php 
```

从这里开始：[http ://www.yourhtmlsource.com/sitemanagement/urlrewriting.html](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:10:25.500

尽管您的适用于字母文件名，但无论文件的名称/路径如何，这都是我用来省略`.php`扩展名的：

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

它确保您没有尝试请求目录，并且请求的文件是 PHP 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:27:09.337

确保在 apache 配置以及 AllowOverride All 中启用了 mod_rewrite

```
LoadModule rewrite_module modules/mod_rewrite.so
<Directory "c:/wamp/www/">

    AllowOverride all
    Order Deny,Allow
    Deny from all
    Allow from all

</Directory> 
```

让它在 wamp 中工作 单击系统托盘中的 wamp 图标转到 apache 然后单击 httpd.conf

在文件中搜索 mod_rewrite.so。如果该行被注释 (#) 取消注释。它应该看起来像

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

然后寻找类似的东西

```
<Directory "c:/wamp/www/"> 
```

你应该找到一个`AllowOverride none`Change it to `AllowOverride all` Restart your wamp server

然后将您的 .htaccess 设置为 nickb 建议

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

如果它仍然不起作用，只需在 httpd.conf 中搜索`AllowOverride none`并将它们全部更改为`AllowOverride all`，因为可能有几个

# javascript - 如何修改此 javascript 以删除和标记？

> ID：11661733
> 
> 赞同：0
> 
> 时间：2012-07-26T03:04:19.930
> 
> 标签：javascript, html, tags

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:07:43.677

为什么不只是动态修改粗体标签的样式呢？对于您要模仿的示例，这将更真实。

换句话说：

```
$('b').css('font-weight', 'normal'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:21:00.227

你似乎搞砸了你的循环：

*   `boldTag`并且`italicTag`是[实时节点列表](https://developer.mozilla.org/en/DOM/NodeList)
*   在循环之后，变量`boldTags`和`italicTags`包含各自列表的最后一项（或仍未定义）
*   然后，您检查两个 NodeList 是否存在...
*   并使用两个参数调用该`RemoveElement`函数，而它只有一个参数。

只需使用这个：

```
var boldTags = document.getElementsByTagName("b");
var italicTags = document.getElementsByTagName("i");
while (boldTags.length) // it's *live*
    removeElement(boldTags[0]);
while (italicTags.length) // it's *live*
    removeElement(italicTags[0]); 
```

# jquery - jQuery - 如何在一个选择器中组合多个具有相同类名的元素？

> ID：11661738
> 
> 赞同：0
> 
> 时间：2012-07-26T03:04:45.000
> 
> 标签：jquery, selector

对不起这个古怪的标题，这里是例子：

```
<table>
  <tr>
    <th class="hey-1-aa"></th>
  </tr>
  <tr>
    <th class="hey-2-aa"></th>
  </tr>
  <tr>
    <td class="hey-1-bb"></tr>
  </tr>
  <tr>
    <td class="hey-2-bb"></tr>
  </tr>
</table> 
```

有没有更好的方法来选择所有以类前缀“hey-2-”开头的 THs/TRs，而不是冗长的东西`$('th[class^="hey-2"], td[class^="hey-2"]')`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:08:11.103

`$('.hey-2')`

the selectors for [sizzle](http://sizzlejs.com/) (the jquery selector engine) begin with basic css and then move from there. so if you can style an element with a selector, you can grab it from jquery the same way.

for a list of selectors take a look at the [jquery api](http://api.jquery.com/category/selectors/)

## EDIT

so i would think the first thing to eliminate is limiting it to tr/th and just doing something like

`$('table [class^=hey-2]')`

that simplifies it quite a bit.

i tend to agree with the other answers though. if the items legitimately have something in common, why not give them a common class? instead of `class="hey-2-aa"` make it `class="hey-2 aa"` then you really can just use the original answer i posted.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:11:00.823

请记住，您可以为一个元素使用多个类。因此，也许为元素设置更多类会很有用。选择起来会更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T03:16:18.030

```
<table>
  <tr>
    <th class="hey-1-aa"></th>
  </tr>
  <tr>
    <th class="hey-2-aa sameclass"></th>
  </tr>
  <tr>
    <td class="hey-1-bb"></tr>
  </tr>
  <tr>
    <td class="hey-2-bb sameclass"></tr>
  </tr>
</table>

$(".sameclass"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T03:38:04.020

你可以试试这个：

```
$('tr > [class^="hey-2"]') 
```

也就是说，选择每个 tr 元素的任何具有以“hey-2”开头的类的子元素。

演示：http: [//jsfiddle.net/CCuxX/](http://jsfiddle.net/CCuxX/)

（或者对于问题中的标记*完全*一样`$('tr:odd > *')`：）

我知道显然您已经简化了问题的标记，但就目前而言，您似乎将类用作唯一标识符 - 如果是这样，您应该使用 ids。

# php - php/mysql 错误

> ID：11661741
> 
> 赞同：0
> 
> 时间：2012-07-26T03:05:43.317
> 
> 标签：php, mysql, database, xampp

**已解决**谢谢大家！原来“组”是一个注册的 mysql 术语，所以我将“组”更改为 Web_Group。呼……这让我整晚都感到沮丧。非常感谢stackoverflow用户！

我一直在尝试写入 mysql 中的“组”列，但它不起作用。

```
$query = mysql_query("INSERT INTO users SET username='$username',password='$pass',mcname='$mcname',Group='Member',email='$email',confirm='$confirmcode',status='0'"); 
```

奇怪的是，如果我取出 Group='Member' 代码可以完美运行。是的，“组”列以大写字母开头，所以这不是问题。

我能做些什么来解决这个问题？

MySQL错误是：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'Group='Member',email='sdfsdf',confirm='1d4ba9f5cbb214965b4f6ba5ad1c4fba',status=' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:10:01.480

乍一看，我认为错误在于您的列名是`group`保留字。[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

您可以使用反引号转义列名：` 像这样：

```
`Group`="Value" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:13:31.210

“组”一词是[MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此您需要在列名周围添加反引号 (`)。

尝试执行以下操作：

```
$query = mysql_query("INSERT INTO users SET username='$username',password='$pass',mcname='$mcname',`Group`='Member',email='$email',confirm='$confirmcode',status='0'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:30:14.157

如果您想插入数据库表，这是正确的系统税

```
$query = mysql_query("INSERT INTO users (username,password,mcname,Group,email,confirm,status) VALUES('$username','$pass','$mcname','Member','$email','$confirmcode','0')"); 
```

# android - 从 onPause 返回时布局显示错误

> ID：11661742
> 
> 赞同：2
> 
> 时间：2012-07-26T03:05:45.367
> 
> 标签：android, glsurfaceview

我有一个布局，其中包含一个占据整个屏幕的 GLSurfaceView。在屏幕底部，我有一个覆盖 GLSurfaceView 的半透明工具栏 (LinearLayout)。另外，我的应用程序是全屏的 ( `android:theme="@android:style/Theme.NoTitleBar.Fullscreen`)。

通常，一切都很好，但从 ICS 开始，每当用户返回应用程序（从 返回`onPause`）时，操作系统都会播放一个快速动画，其中应用程序开始时 Android 状态栏显示在顶部，应用程序屏幕被按下。然后状态栏消失，应用程序的屏幕向上移动到正常的全屏位置。

当这个动画完成时，GLSurfaceView 最终覆盖了工具栏的上半部分，工具栏覆盖了 GLSurfaceView 的下半部分。看起来底部显示的工具栏部分正是 Android 状态栏的大小。

当然，我希望工具栏完全显示和覆盖 GLSurfaceView，这就是当应用程序从`onCreate`.

任何人都知道是什么导致了这个问题以及如何解决它？

我找到了一种解决方法，但远非最佳。我可以通过在调用`invalidate()`后的某个时间发布到工具栏来正确显示工具栏。`onResume()`但是如果`invalidate()`调用太快，问题就不会得到解决。这是解决方法的代码`invalidate()`5 seconds after 调用`onResume()`，导致工具栏在应用程序重新启动后 5 秒正确显示。

```
@Override
protected void onResume() {
    super.onResume();    

    mGLSurfaceView.onResume();

    // Test to try to fix half hidden toolbar problem
    View toolBar = findViewById(R.id.menu_bar);
    toolBar.postDelayed(new Runnable() {
        @Override
        public void run() {
            View toolBar = findViewById(R.id.menu_bar);
            toolBar.invalidate();
        }
    }, 5000);
} 
```

**编辑：** 上面的代码不会导致工具栏正确显示。我在上面的代码中的调试中取出了一行设置文本，`TextView`事实证明，如果我不更新完全不相关的，工具栏就不会出现`TextView`！

我找到了另一种方法来使上述糟糕的解决方法起作用，方法`onResume`是在调用时首先删除工具栏，然后稍后再将其恢复。请看下面的代码： 请注意，使用`View.INVISIBLE`代替`View.GONE`不会使工具栏在延迟后出现。

```
@Override
protected void onResume() {
    super.onResume();    

    mGLSurfaceView.onResume();

    // Test to try to fix half hidden toolbar problem
    View toolBar = findViewById(R.id.menu_bar);
    toolBar.setVisibility(View.GONE);
    toolBar.postDelayed(new Runnable() {
        @Override
        public void run() {
            View toolBar = findViewById(R.id.menu_bar);
            toolBar.setVisibility(View.VISIBLE);
            //mDebugText.setText("Menu bar to front.\n" + mDebugText.getText());
        }
    }, 5000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T02:09:25.873

最后，这就是我解决这个问题的方法。如果有人有更好的解决方案，一定要把它写在这里，我会选择你的答案作为最佳答案。

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);

    // Delay for the layout request. It must be longer than the time ICS takes to play
    // the animation where the app's screen moves up to fill the space of the Android
    // status bar.
    final int DELAY_MS = 1000; // in ms

    if (hasFocus) {
        // Send a delayed layout request to fix the problem with the toolbar
        // being half hidden after returning from onPause() on some devices 
        // with ICS.
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                findViewById(R.id.menu_bar).requestLayout();
            }
        }, DELAY_MS);
    }
} 
```

首先，我将代码放入，`onWindowFocusChanged()`因为在关闭屏幕时，`onResume()`在屏幕重新打开后（以及在屏幕解锁之前）立即调用，因此在应用程序实际显示之前执行可运行对象，因此，之前动画已显示，因此在这种情况下问题仍然存在。

其次，我将延迟设置为 1 秒，因为 500 毫秒太短了。动画未播放完毕，工具栏仍处于半隐藏状态。当然，这会导致工具栏在被放回其正确位置之前显示为半隐藏几毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:35:37.213

我找到了有关此问题的更多详细信息和更好的解决方法，因此这是新信息。

首先，我发现问题只发生在我使用三星的`AdHubView`类展示广告时，该类派生自`RelativeLayout`，因此问题可能与`RelativeLayout`.

此广告视图包含在同一顶部`FrameLayout`，其中还包括`GLSurfaceView`和工具栏 ( `LinearLayout`)。这个顶部`FrameLayout`没有明确声明，因为我用作`<merge >`布局的顶部元素。

现在关于更好的解决方法，我所做的是将其隐藏并再次显示`AdHubView`在. 我也尝试再次显示它，但在屏幕关闭的情况下不起作用，我必须解锁屏幕才能返回应用程序。`onPause``onWindowFocusChanged``onResume`

以下是一些代码示例：

```
protected void onPause() {
    super.onPause();

    mAdView.setVisibility(AdHubView.GONE);
}

public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);

    if (hasFocus) {
        mAdView.setVisibility(AdHubView.VISIBLE);
    }
} 
```

有了这个解决方法，我不需要再强制工具栏到顶部之前等待，就像我在以前的解决方法中所做的那样，所以用户永远不会注意到任何奇怪的事情。

# ios - App Store Upload 上的 armv6 和权利错误

> ID：11661743
> 
> 赞同：3
> 
> 时间：2012-07-26T03:05:53.913
> 
> 标签：ios, ios-provisioning, provisioning-profile, armv7, armv6

我正在尝试通过 xcode 上传应用程序。这个应用程序与我最近更新或上传的许多其他应用程序几乎相同，使用相同的配置文件，因此签名应该不是问题。我在项目中也没有任何权利，也没有在构建设置中启用或指向它们。我相信我已经确认了每个构建设置，正如关于这个主题的许多线程所建议的那样，但仍然没有运气。此外，我将 armv6 和 armv7 都列为架构。但是，我仍然收到以下错误：

1) iPhone/iPod Touch：应用程序可执行文件缺少所需的架构：必须至少存在以下架构之一：armv6

2) 应用程序未通过协同设计验证。签名无效，包含不允许的权利，或未使用 iPhone 分发证书签名。

3) 无法从应用程序中提取权利：(null)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T05:34:43.440

在对代码签名和权利问题进行大量搜索和尝试所有常见修复后，这似乎奏效了：从项目和目标设置中删除了 armv6，并将 OS Deplotment Target（在 Target 和 Project 中）更改为 4.3（或 5.0，两者都有效）。

随后我遇到了这个问题，我还发现在实际提交之前使用 validate 函数特别有用。它可以为您提供有关上传失败错误中可能未包含的错误的线索。

# git - 使用没有“主干”子目录的 git-svn

> ID：11661745
> 
> 赞同：2
> 
> 时间：2012-07-26T03:06:22.137
> 
> 标签：git, svn, directory, git-svn, trunk

我正在使用 git-svn 来签出一个标准的 SVN 存储库，例如这个：

```
http://example.com/
    - trunk
    - branches
    - tags 
```

使用此命令：

```
git svn clone -s http://example.com/ 
```

问题是 git-svn 正在目标文件夹中创建一个“主干”子目录。而不是这种目录结构：

```
c:\www\example 
```

我有这个：

```
c:\www\example\trunk 
```

那么如何防止 git-svn 将所有内容都放在这个主干文件夹中，同时仍然使用标准的 SVN 布局呢？基本上，我希望 "c:\www\example" 包含我目前正在处理的任何内容，无论是主干、分支还是标签。另一方面，我还需要 git-svn 将 git 分支和标签正确映射到正确的 SVN 文件夹。这可以用 git-svn 完成还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T08:16:00.240

你应该运行：

```
git svn clone -s http://example.com/ . 
```

（末尾的点告诉 git-svn 克隆到当前目录，请参阅`git svn --help`了解更多信息）。

# solr - 将 XML DB 数据导入 Solr

> ID：11661746
> 
> 赞同：0
> 
> 时间：2012-07-26T03:06:24.447
> 
> 标签：solr

我使用 Oracle 的 XMLTYPE 作为单个列来存储用户配置文件。我可以使用 DataImportHandler 将 varchar2 类型导入 Solr，但该列没有 XMLType。它会报告错误。我该如何导入它？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:47:46.167

我了解 Oracle 会返回一个包含纯 xml 的字符串？在这种情况下，我可以想到两个选择：

1.  照你做，但应用[脚本转换](http://wiki.apache.org/solr/DataImportHandler#ScriptTransformer)器并在那里处理 xml 以正确提取你需要的信息
2.  做你正在做的，但应用你在java中开发的[自定义转换器](http://wiki.apache.org/solr/DataImportHandler#ScriptTransformer)

# python - Python OOP 的基本逻辑

> ID：11661751
> 
> 赞同：0
> 
> 时间：2012-07-26T03:06:43.287
> 
> 标签：python

我研究过 Python 并了解 OOP 概念的工作原理。我的疑问是如何在具有 sql 交互的应用程序中实现..

假设我在 SQL 中有一个员工表，其中包含员工姓名、员工地址、员工薪水。现在，我需要为所有员工加薪，我为这些员工创建了一个带有方法的类。

我的数据库逻辑

```
db = MySQLdb.connect("localhost","testuser","test123","TESTDB" )

cursor = db.cursor()

sql = "Select * from Emp"
cursor.execute(sql)
results = cursor.fetchall()

for row in results:
     name = row[0]
     address = row[1]
     salary  = row[2]

db.close() 
```

类定义：

```
 Class Emp():
      def __init__(self,name,salary):
            self.name = name
            self.salary = salary
      def giveraise(self):
            self.salary = self.salary*1.4 
```

如何使用从 Employee 表中获取的详细信息来创建对象...我知道您不需要创建一个类来执行这个小操作..但我在考虑实际实现。

我需要逐记录处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T03:11:13.817

听起来您正在寻找对象关系映射器 (ORM)。这是一种将 SQL 数据库与面向对象的数据表示自动集成的方法，听起来非常适合您的用例。ORM 列表位于[http://wiki.python.org/moin/HigherLevelDatabaseProgramming](http://wiki.python.org/moin/HigherLevelDatabaseProgramming)。一旦你设置了 ORM，你就可以`giveraise`在所有`Emp`对象上调用该方法。（顺便说一句，`giveraise`您定义的函数不是有效的 Python。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:55:09.183

正如 Abe 所提到的，已经有一些库可以为您执行这种映射（例如[SQLAlchmy](http://www.sqlalchemy.org/)或[Django](https://docs.djangoproject.com/en/1.4/)包含的 ORM）。

不过要记住的一件事是，“实际实施”是主观的。对于小型应用程序和没有 ORM 经验的开发人员来说，快速了解 ORM 的一般概念可能会增加项目的时间，并会增加代码的细微错误。太多次有人会感到困惑，为什么像这样的事情需要永远使用 orm...

```
for employee in database.query(Employee).all():
    employee.give_raise(0.5) 
```

假设一张有 100 名员工的表，这可能会对数据库进行几次到 200 多次单独调用，具体取决于您设置 ORM 的方式。

不使用 OOP 可能是完全合理的，或者至少不是您所描述的方式。这是一个完全有效的对象：

```
class Workforce(object):
    def __init__(self, sql_connection):
        self.sql_connection = sql_connection

    def give_raise(self, employee_id, raise_amount):
        sql = 'UPDATE Employee SET Salary=Salary + ? WHERE ID = ?'
        self.sql_connection.execute(sql, raise_amount, employee_id) 
```

我绝不是试图敲击 ORM 或劝阻你不要使用它们。尤其是如果您只是在尝试一下，学习如何正确使用它们可以使它们成为有价值的工具。请记住，它们可能会很麻烦，特别是如果您以前从未使用过它们，并且如果您的应用程序足够小，请考虑有更简单的解决方案。

# c++ - OpenGL不会让我画东西

> ID：11661753
> 
> 赞同：1
> 
> 时间：2012-07-26T03:06:47.177
> 
> 标签：c++, windows, opengl, glut

我的代码中遇到了这个奇怪的错误，它不会让我画任何东西......

```
void render(void) {
    glClear(GL_COLOR_BUFFER_BIT);

    glLineWidth(4.0);
    glPointSize(4.0);
    glColor3i(0, 1, 1);
    glBegin(GL_POINTS);
        glVertex2i(0, 0);
        glVertex2i(2, 2);
        glVertex2i(3, 3);
    glEnd();
    glutSwapBuffers();
}

int main(int argc, char **argv) {
    int Largura, Altura;

    //width
    Largura = (abs(Plano::MinX) * Plano::EspacoPix) + (abs(Plano::MaxX) * Plano::EspacoPix);
    //height
    Altura  = (abs(Plano::MinY) * Plano::EspacoPix) + (abs(Plano::MaxY) * Plano::EspacoPix);
    // these are cartesian coordinates,
    // at class Plano: enum Dimension {MinY=-50, MaxY=50, MinX=-50, MaxX=50, EspacoPix=5};

    glutInit(&argc, argv);
    glutInitWindowPosition(-1, -1);
    glutInitWindowSize(Largura, Altura);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE);
    glClearColor(1, 1, 1, 1);
    glutCreateWindow("Graphix");
    glMatrixMode(GL_PROJECTION);
    //glEnable(GL_POINT_SMOOTH);
    //glEnable(GL_LINE_SMOOTH);
    gluOrtho2D(Plano::MinX, Plano::MaxX, Plano::MinY, Plano::MaxY); // left, right, bottom, top

    glutDisplayFunc(render);
    glutIdleFunc(render);

    std::cout << "[Dbg] Dimensions:  Height=" << Altura << "px Width=" << Largura << "px " << std::endl;
    std::cout << "[Dbg] Ortho: Left=" << Plano::MinX << ", Right=" << Plano::MaxX << ", Bottom=" << Plano::MinY << ", Top=" << Plano::MaxY << std::endl;
    //glGet with argument GL_COLOR_CLEAR_VALUE
    float cores[4] = {-1, -1, -1, -1}; // defaults
    glGetFloatv(GL_COLOR_CLEAR_VALUE, cores);
    std::cout << "[Dbg] Color Buffer: R=" << cores[0] << " G=" << cores[1] << " B=" << cores[2] << " A=" << cores[3] << std::endl;

    glutMainLoop();
    return(0);
} 
```

我得到的只是一个黑屏和颜色缓冲区，我认为它是 1、1、1、1 实际上是 0、0、0、0 ......如果我错了，请纠正我，但在屏幕的中心是，因为 gluOrtho2D 调用，x=0，y=0，对吗？正确的？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T04:00:23.623

glClearColor 必须在 glutCreateWindow 之后调用，因为尚未创建 OpenGL 上下文。

另请注意，您正在学习过时的 OpenGL 编程技术。

glColor、glBegin、glEnd、glVertex*、glColor* glMatrixMode、gluOrtho2D、glu* 现在都是不推荐使用的函数。

有些人认为他们可能更容易学习，但我认为不会太多，这就是你必须忘掉的所有东西。

glBegin() 和 glEnd() 导致您一次绘制对象 1 个顶点，这非常慢。

新方法包括将坐标放入浮点数组中，然后将其发送到图形卡以一次绘制所有内容。自从 OpenGL 1.1（1997 年发布）支持顶点数组以来，没有理由将这些旧东西用作所有东西（尽管它们现在也已被弃用，而是被功能相似且具有自 1.5（2005 年发布）以来一直使用 OpenGL。

我建议您查看[http://www.opengl-tutorial.org/](http://www.opengl-tutorial.org/)以获得对初学者来说并不难的新教程。

还有我在这里的回复：[https ://gamedev.stackexchange.com/questions/32876/good-resources-for-learning-modern-opengl-3-0-or-later/32917#32917](https://gamedev.stackexchange.com/questions/32876/good-resources-for-learning-modern-opengl-3-0-or-later/32917#32917)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:16:15.630

我之前没有做过很多 OpenGL 2 编码，但我认为您需要在调用 glBegin 之前调用 glLoadIdentity()，并且需要在 glMatrixMode 之前调用 glLoadIdentity()。

# javascript - Javascript固定滚动定位

> ID：11661755
> 
> 赞同：2
> 
> 时间：2012-07-26T03:07:06.700
> 
> 标签：javascript, jquery, scroll

这是我的[网站](http://aaloktrivedi.com/print_eff.html)

如您所见，当我向下滚动时，侧边栏链接会滚动……但是当您向下直至页脚时，链接会与页脚重叠并且看起来不太好。

我需要一种方法，以便在我向下滚动后侧边栏链接距离屏幕顶部仅约 20-30 像素（例如，大约 350 像素给予或接受一些），然后在我向上滚动时返回其原始位置。

（如果有一种方法可以只用 css 做这样的事情，那将是理想的，但我很确定你不能）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:30:28.837

运行一条`if`语句来测试用户是否一直滚动到底部，如果是这种情况，则`top`通过 jQuery 更新 css：

```
$('.sidebar').css('top', parseInt($('.sidebar').css('top'), 10) - 'value to shift by' + 'px'); 
```

`parseInt($('.sidebar').css('top'), 10)`以整数形式获取当前顶部值，然后您可以将其添加到其中，以将侧边栏移动到所需位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:30:47.567

[参考](https://stackoverflow.com/a/10203888/1071979)

```
var divs = $('.social, .title');
$(window).on('scroll', function() {
   var st = $(this).scrollTop();
   divs.css({ 'opacity' : (1 - st/35) });
}); 
```

转到上面的链接并查看代码下方的示例。

当 scrolltop 达到 35px 时，div 的不透明度为 1 - 35/35 = 0

[示例小提琴](http://jsfiddle.net/wSkmL/1/)

[更新的小提琴](http://jsfiddle.net/J8XaX/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:22:21.310

你需要创建一个额外的停止 div 来阻止你的滚动 div 进一步滚动。我创建了一个小提琴，也许它会帮助你更好地理解

**HTML**

```
<div id="fixeddiv">
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
     Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>

    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    <div id="scrollstopdiv"></div>
    Demo 3<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>

    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
    Demo 1<br/>
</div>
<div id="scrollingDiv">scrolling div</div> 
```

**JS**

```
$().ready(function() {
        var $scrollingDiv      = $("#scrollingDiv");

         var tksheight         = $("#scrollingDiv").height();
        var tksposition      = $("#scrollstopdiv").position();

        var stopdiv = tksposition.top - (tksheight+400);//adjust position to stop scrolling 

   $(window).scroll(function(){            
   if($(window).scrollTop() > 5 && $(window).scrollTop() < stopdiv){    <!-- -->
                $scrollingDiv
                .stop()
                .animate({"paddingTop": ($(window).scrollTop()+300) + "px"}, "slow" );
            }
        });
    }); 
```

**CSS**

```
#fixeddiv {width:50px;float:left;padding-right:130px;}
#scrollingDiv{float:left;width:150px;} 
```

[jsFiddle](http://jsfiddle.net/CeFXW/2/)

# wpf - 最多显示3个项目，每个项目都有自己的位置

> ID：11661756
> 
> 赞同：0
> 
> 时间：2012-07-26T03:07:06.717
> 
> 标签：wpf

这可能是一个很长的故事，但我真的不知道解决它。

一家公司生产食品、饮料和其他 3 类产品，每个类别下都有多个产品。例如，食品类别有巧克力、饼干等产品；饮料类有奶、茶、可乐等产品；另一类有书籍、时钟等产品。

但**在某个时期，公司最多生产3种不同品类的产品。**例如，公司在一月份生产巧克力、茶和时钟；2 月，它生产可乐和书籍。

```
class ProductBase
{
    protected ProductBase(string name, double price)
    {
        Name = name;
        Price = price;
    }

    public int Type { get; protected set; }

    public string Name { get; private set; }

    public double Price { get; private set; }
}

class Food : ProductBase
{
    protected Food(string name, double price)
        : base(name,price)
    { Type = 1; }

    public bool IsFried { get; set; }
}

class Drink : ProductBase
{
    protected Drink(string name, double price)
        : base(name,price)
    { Type = 2; }

    public bool IsLowFat { get; set; }
}

class Other : ProductBase
{
    protected Other(string name, double price)
        : base(name,price)
    { Type = 3; }
} 
```

现在我需要展示产品。为方便起见，食物应始终放在第一个位置，饮料放在第二个位置，其他位置放在第三个位置。另外，**即使没有食品，它的地方也不能容纳饮料或其他产品。**

这是所有三种产品。LF 表示绿茶是低脂的。 ![3 个产品](../Images/7ddefc69ddb03fc4dc84220e7f9e02da.png)

如果只有两种产品，它应该像这样呈现。 ![2 个产品](../Images/fe5762371ea2807f9349a622c74dedc4.png)

**每条线应具有相同的宽度和高度。**IsLowFat/IsFried 位于第一列，名称位于第二列，价格位于第三列。**第二列的宽度可以改变，以适应容器的可用宽度。**

在上面的演示中，我使用了这段代码，但它非常难看，并且**FontSize 无法根据窗口大小发光。**我试过 ViewBox 但我无法处理它。

```
<Window x:Class="WpfApplication1.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" Height="190" Width="402" FontSize="30">
    <UniformGrid Rows="3" >
        <DockPanel>
            <TextBlock Width="50"  Text="" Margin="0,0,5,0" DockPanel.Dock="Left" />
            <TextBlock DockPanel.Dock="Right" Text=""/>
            <TextBlock TextAlignment="Left" Text=""/>
        </DockPanel>
        <DockPanel>
            <TextBlock Width="50" Text="LF" Margin="0,0,5,0" DockPanel.Dock="Left" />
            <TextBlock DockPanel.Dock="Right" Text="$2"/>
            <TextBlock TextAlignment="Left" Text="Green Tea"/>
        </DockPanel>
        <DockPanel>
            <TextBlock  Width="50" Text="" Margin="0,0,5,0" DockPanel.Dock="Left" />
            <TextBlock DockPanel.Dock="Right" Text="$7"/>
            <TextBlock TextAlignment="Left" Text="Beautiful Clock"/>
        </DockPanel>
    </UniformGrid>
</Window> 
```

那么你的建议是什么？满足我要求的最佳方式是什么？任何见解都值得赞赏。

# facebook - 如何使登录时不显示facebook应用程序用户列表

> ID：11661757
> 
> 赞同：1
> 
> 时间：2012-07-26T03:07:27.280
> 
> 标签：facebook, authentication, login, facebook-login

我正在使用文档中显示的 javascript SDK，我的问题是，当用户登录时，已经允许该应用程序的用户列表显示在登录按钮的位置。任何人都对为什么会发生这种情况和/或如何解决它有任何想法。

编辑：似乎它是facepile插件，但我没有专门启用该插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:17:37.553

哎呀，我设置了 data-show-faces 属性。

# javascript - jquery图像不起作用

> ID：11661759
> 
> 赞同：1
> 
> 时间：2012-07-26T03:07:44.660
> 
> 标签：javascript, jquery

我正在尝试在我的照片滑块上应用过度效果。我有以下代码结构：

```
<div class="corpo_itens">
    <div class="foto-carousel">
        <div class="transparencia">
            <span>A Novilha Rebelde (The Sound of Mu)</span>
            <br /><br />
            Elisa Queiroz e Erly Vieira Jr., 18 min, Vitória (ES), 2005
        </div>
        <img src="img/foto_carousel1.jpg" alt="Nome da foto" />
        <div class="icon-foto"><img src="img/icon_video.png" alt="Vídeo" /></div>
    </div>
    <div class="clear"></div>
</div> 
```

我要做的是在鼠标悬停图像时淡入和淡出“transparencia” div。这个滑块有不同的图像，并且使用以下代码它可以工作，但它同时隐藏和显示所有 div...我不知道如何解决它...

```
$('.foto-carousel').hover(
 function () {$('.transparencia').css({"display":"block"});}, 
 function () {$('.transparencia').css({"display":"none"});}
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:14:26.593

如果您只想隐藏/显示`.transparencia`悬停的内部，则`.foto-carousel`必须指定上下文，例如

```
$('.foto-carousel').hover(
    function () {$('.transparencia', this).css({"display":"block"});}, 
    function () {$('.transparencia', this).css({"display":"none"});}
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:13:25.983

```
$(".corpo_itens img").onmouseover(function(){
  $(this).parent().children(".transparencia").fadeIn(100);
});
$(".corpo_itens img").onmouseout(function(){
  $(this).parent().children(".transparencia").fadeOut(100);
}); 
```

或者类似的东西。

# javascript - 非常简单的错误，backbone.js 抛出无效的对象初始化器错误

> ID：11661761
> 
> 赞同：0
> 
> 时间：2012-07-26T03:07:49.527
> 
> 标签：javascript, jquery, backbone.js

好的，我尽量避免发布愚蠢的问题，但我无法弄清楚这个错误，如果它是如此微妙，它可能会帮助其他人。

这段代码有什么问题：

```
(function($){

var Item=Backbone.Model.extend({
  defaults: {
    ItemName:'Item ',
    counter:0,
    index:0,
    allSetView:'',
    Set: []
  },
  initialize: function(){
  alert('youve created a new item');
  }
});

var item=new Item();
alert(item.get({"index"}));//error thrown here
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:14:45.830

您想要获取 'index' 属性的正确语法是：

```
item.get("index") 
```

get() 接受属性名称的字符串。

[这是 Backbone 文档部分](http://backbonejs.org/#Model-get)

# java - 使用 @XmlAnyElement 进行 XML 映射

> ID：11661769
> 
> 赞同：3
> 
> 时间：2012-07-26T03:08:12.387
> 
> 标签：java, xml, jaxb

我想实现这样的[目标](http://jaxb.java.net/guide/Mapping_interfaces.html)。

```
<zoo>
    <lion> ... </lion>
    <dog> ... </dog>
</zoo> 
```

我这里有这门课。

```
public class MainGroup {
    private List<Widget> widgets;

    @XmlAnyElement
    public List<Widget> getWidgets() {
        return widgets;
    }
    public void setWidgets(List<Widget> widgets) {
        this.widgets = widgets;
    }
} 
```

而且这个Widget超类有Button、Combobox等子类……我想实现这样的东西。

```
<MainGroup>
    <Button>...</Button>
    <Combo>...</Combo>
</MainGroup> 
```

我有这个例外

```
[com.sun.istack.internal.SAXException2: class com.test.Button nor any of its super
  class is known to this context. 
```

我尝试添加 @XmlElementRef 但它仍然无法正常工作。

```
@XmlElementRefs({
     @XmlElementRef(name="Button", type=Button.class),
     @XmlElementRef(name="Combo", type=Combo.class)
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:56:26.597

**映射您的用例**

我的回答基于从您的一个相关问题中收集的信息：

*   [为什么 JAXB 不写出 SWT Widgets？](https://stackoverflow.com/questions/11642254/why-doesnt-jaxb-writes-out-swt-widgets)

由于您正在映射没有源的类（因此无法添加 JAXB 注释），我建议使用`@XmlElements`映射。

```
@XmlElements({
     @XmlElement(name="Button", type=Button.class),
     @XmlElement(name="Combo", type=Combo.class)
})
public List<Widget> getWidgets() {
    return widgets;
} 
```

`@XmlElements`对应于 XML Schema 的概念`xsd:choice`。

*   [http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html](http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html)

**关于`@XmlRootElement`**

> 好的，我在这里错过了很多东西。似乎我添加将此 @XmlRootElement 注释添加到我的 Button 和 Combo 子类中以实现此目的。
> 
> 谁能向我解释为什么我需要在我的子类中使用该注释...我很困惑，我认为 XML 只会有一个 @XmlRootElement 在我的情况下应该在 MainGroup 类中。

`@XmlRootElement`对应于 XML 模式中的全局元素，它涉及的不仅仅是您要解组的文档中的根元素。我将在下面描述几个角色：

***`@XmlElementRef`***

`@XmlElementRef`对应于取代基的概念。在 XML 模式中，您可以指定一个全局元素可以替换为另一个元素。在 JAXB中`@XmlRootElement`(and `@XmlElementDecl`) 被用来指定全局元素：

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html)

***`@XmlAnyElement`***

`@XmlAnyElement`对应于 XML Schena 中 xs:any 的概念。这是文档的一部分，格式非常自由。在 JAXB 中，当您使用`@XmlAnyElement(lax=true)`它映射属性时，会将匹配`@XmlRootElement`声明的元素转换为相应的域对象。

*   [http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:18:20.810

好的，我在这里错过了很多东西。似乎我添加了将此`@XmlRootElement`注释添加到我的 Button 和 Combo 子类中来实现这一点。

谁能向我解释为什么我需要在我的子类中使用该注释...我很困惑，我认为 XML 只会有一个`@XmlRootElement`在我的情况下应该在`MainGroup`课堂上的。

# android - Populating table and selecting the rows for editing with android

> ID：11661770
> 
> 赞同：0
> 
> 时间：2012-07-26T03:08:18.573
> 
> 标签：android, database, sqlite, tablelayout

我在使用 SQLite 数据动态填充 android 中的 TABLE LAYOUT 中的数据时遇到问题，在填充它之后，我希望可以选择这些行来编辑该特定行中的信息。我想要的表格布局如下所示。

```
 ID|name|address|phone number|
     1| Peter|NYC   |1800-900000|
     2| Parker|LAC  |1900-909090| 
```

我希望这里有人可以帮助我，因为我是 android 编程新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:14:56.963

我猜你计划根据你对安迪的评论动态添加表格行而不是表格布局。如果您想动态添加表格行，那么您可以这样做......

```
1) Create a table Layout under ur referring xml file. 
2) Refer to that table Layout in ur java code. say "table".
3) Then create a TableRow to add it to the TableLayout.
TableRow[] row = new TableRow(this);
TextView text = new TextView(this);
name.setText(// set ur text here);
row.addView(name);
4) Now finally add that tableRow to ur table.

table.addView(row); 
```

同样，您可以动态地将“n”行添加到您的表中。

您只需要知道条目数（表格行）。然后在它上面运行一个循环。在那个循环结构中，你将继续在表格中添加行。

# php - 在电子邮件中嵌入 PHP 以启动会话并存储变量

> ID：11661775
> 
> 赞同：1
> 
> 时间：2012-07-26T03:08:59.150
> 
> 标签：php, html, email, url, session

当用户打开我发送给他们的电子邮件时，我正在尝试创建一个会话变量。一切都由两个 .php 文件完成。（mailer.php 和 register.php）

mailer.php 获取用户的所有信息，并向他们发送一封带有 url 的电子邮件到 register.php 页面。

我想将一个会话变量（User_id）从 mailer.php 获取到 register.php。我已将以下内容放入从 mailer.php 发送的电子邮件中。我怀疑它是否有效，但它说明了我需要什么。

```
`$message = $Url。"php session_start(); '$_SESSION[id]' = " . $row['user_id'] 。" ?>";
...
$mail->MsgHTML($message);
$邮件->发送（）；`

```

然后在注册页面

```
`$userID = $_SESSION['id'];`

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:22:16.037

您不能在变量内附加函数...而只是创建新表来存储验证码，

```
function genRandomString() {
    $length = 10;
    $characters = ’0123456789abcdefghijklmnopqrstuvwxyz’;
    $string = ”;    
    for ($p = 0; $p < $length; $p++) {
        $string .= $characters[mt_rand(0, strlen($characters))];
    }
    return $string;
}
$code = genRandomString();
$message = "http://localhost/start_session.php?verify=$code";
$mail->MsgHTML($message);
if($mail->Send()){
    echo 'Message Sent';
    // Then execute a query to insert the generated code to your database
} 
```

当用户打开他的电子邮件并单击链接时，地狱转到验证页面。

```
Match the verification code in the database using get variable and if found, start the session otherwise no session 
$code = mysql_real_escape_string($_GET['verify'];
$query = mysql_query("SELECT * FROM verifications WHERE verification_code=$code");
$rows = mysql_num_rows($query);
if($rows > 0){
    session_start();
    session_regenerate_id();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:26:57.883

首先，php 执行一次代码，也就是页面加载的时候。

话虽如此，如果我把你的问题弄错了，请纠正我。您发送带有 ID 的邮件，一旦有人打开邮件，您希望能够获取该 ID？我会推荐一个正则表达式或一个简单的字符串 substr ( string $string , int $start [, int $length ] ) 从邮件中获取它。

如果你收到的邮件是原始文本（在正常情况下你会收到），那么就抓住它。

邮件示例：
“Hello12ID:5 我的名字是...”

前段时间我确实处理过这样的字符串，但它就在这里。

> $id = substr($email, strpos($email,'ID:'), strpos($email, ' ', strpos($email,'ID')));
> if (is_numeric ($id)) echo '失败：'.$id.' 不是数字'; 出口;

它的作用是返回“ID”和空格之间的内容。在我的情况下是 5。所以在这种情况下 $id = 5。然后你只需将这 5 个保存到一个会话中，这也可以一次完成，但最好检查一下，以便它在之前抓住一些好的东西。

希望是你的意思。

# ruby-on-rails - 为什么此控制器代码能够创建一个节点但不能编辑另一个节点？

> ID：11661783
> 
> 赞同：1
> 
> 时间：2012-07-26T03:10:05.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller

在我的 Rails 应用程序中，有一些节点可以通过填写其 previous_node_id 和 next_node_id 列的 id 来指向彼此。当我创建一个节点时，它成功地指向了前一个节点，但前一个节点并没有改变，它的 next_node_id 值仍然为零。我该如何解决？（我也会感谢任何关于如何改进代码的评论。）

节点控制器：

```
def create
@node = current_user.nodes.build(params[:node])

if params[:previous_node_id].present?
setup_node_pointers(Node.find(params[:previous_node_id]), @node ) 
end

if @node.save
...//end of the controller 
```

来自 Helper 的相关代码：

```
def setup_node_pointers(previous_node, current_node)
    previous_node.next_node_id = current_node.id
    current_node.previous_node_id = previous_node.id
    previous_node.save 
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:59:54.857

令人惊讶的是，这么少的代码中有多少错误！

1.  需要保存当前节点 1st（见史蒂夫的回答）
2.  :previous_node_id 是节点参数的一部分，所以它应该是 `params[:node][:previous_node_id]`
3.  无法从控制器调用助手。current_node 是在初始构建中设置的，所以
4.  一些帮助代码是多余的，导致混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:50:00.683

这是因为`current_node.id`是零。该`build`命令不会将记录保存到数据库，因此没有`id`分配给`@node`. `@node`在调用助手之前保存，它应该可以工作。如果您需要绕过验证来保存它，请执行`@node.save(validate: false)`

# xcode - 如何更改 OS X Lion DPI？

> ID：11661788
> 
> 赞同：1
> 
> 时间：2012-07-26T03:10:26.400
> 
> 标签：xcode, osx-lion

如何更改 OS X Lion DPI？我刚刚切换到 Lion，我希望文本大小（每个地方）更大，125% 大是可以的，我尝试了很多方法，比如：

*   Quartz 调试 - UI 分辨率
*   终端中的“defaults write -g ...”命令

但是它们都不起作用...

唯一的工作方法是将1440 * 900更改为1280 * 800，但屏幕性能太差了。

请问还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:29:17.117

他们不再进行任意缩放；唯一的选择是启用（使用 Quartz Debug）HiDPI 显示模式，注销并重新登录，然后使用系统偏好设置访问新的 HiDPI 屏幕分辨率（显示面板）。

# java - Mysql 在存储过程中插入速度比 Java JDBC 慢

> ID：11661789
> 
> 赞同：0
> 
> 时间：2012-07-26T03:10:34.467
> 
> 标签：java, mysql, stored-procedures, jdbc, mysql-connector

与从 IDE 或 mysql 命令行调用相比，通过 JDBC 调用时，我看到 mysql 插入时间的执行速度要慢几个数量级，我想知道是否有人能指出我正确的方向。

我在本地运行所有内容，因此网络延迟应该不是问题。

我创建了以下非常人为的示例来说明这一点。

我创建了一个存储过程，它接受单个 INT 并将其插入到表中：

```
DELIMITER $$

CREATE PROCEDURE testInsert(IN input INT)
BEGIN
        INSERT INTO test_table(column_1, column_2) 
        VALUES(input, input);

    END$$

DELIMITER ; 
```

如果我要从命令行或 mysql IDE（我正在使用 SQLyog）调用此过程：

```
CALL testInsert(0); 
```

出于所有意图和目的，过程调用立即发生：

```
Execution Time : 0.007 sec
Transfer Time  : 0.001 sec
Total Time     : 0.009 sec 
```

但是，如果要从 Java 调用该过程，请使用以下代码：

```
public void testStoredProcedureInsert() throws SQLException{
    //custom class for managing the sql and variables on the prepared statement
    SQLStatementBinder sqlBinder = new SQLStatementBinder();
    sqlBinder.appendSql("CALL testInsert(?)");

    //will store the object into a collection in the sql binder
    sqlBinder.addBindVariable(0);

    Class.forName("com.mysql.jdbc.Driver").newInstance();

    Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/dbname", "user", "pass");

    CallableStatement stmt = connection.prepareCall(sqlBinder.getSQL());

    //bindSql loops through bind variables and sets the appropriate parameters based on the type of the objects - in this case only preparedStatement.setInt(1, 0) is called.
    stmt = (CallableStatement)sqlBinder.bindSql(stmt);

    long start = System.currentTimeMillis();

    stmt.executeQuery();

    long end = System.currentTimeMillis();

    System.out.println("time to call procedure - " + (end-start) + "ms");
} 
```

更新的运行时间（请注意，我只对实际执行进行计时，因此不考虑连接开销等）平均约为**70ms**。

为了进一步说明这一点，如果我在存储过程中连续插入多个插入：

```
DELIMITER $$

CREATE PROCEDURE testInsert(IN input INT)
BEGIN
        INSERT INTO test_table(column_1, column_2) 
        VALUES(input, input);

        INSERT INTO test_table(column_1, column_2) 
        VALUES(input, input);

        INSERT INTO test_table(column_1, column_2) 
        VALUES(input, input);

        INSERT INTO test_table(column_1, column_2) 
        VALUES(input, input);

        INSERT INTO test_table(column_1, column_2) 
        VALUES(input, input);

    END$$

DELIMITER ; 
```

从 SQLyog 调用仍然很快：

```
Execution Time : 0.040 sec
Transfer Time  : 0.003 sec
Total Time     : 0.044 sec
--------------------------------------------------- 
```

调用上面相同的 java 代码现在平均每个过程调用需要**225 毫秒。**

我希望我做错了一些微不足道的事情，但我愿意接受任何我应该测试的建议或事情。或者从java调用时是否有那么多额外的开销？

抱歉，这篇文章有点长，但我试图提供大量信息。谢谢你的帮助！

**更新**只是另一种情况，如果我将五个插入移动到一行中：

```
 DELIMITER $$

    CREATE PROCEDURE testInsert(IN input INT)
    BEGIN
            INSERT INTO test_table(column_1, column_2) 
            VALUES(input, input),(input, input),(input, input),(input, input),(input, input);

        END$$

    DELIMITER ; 
```

java 运行时平均为**80 毫秒**，这表明从 java 调用过程中的每个单独语句似乎都有一些额外的开销。

调用没有插入的其他过程，即使是那些更复杂并返回几个不同结果集的过程，所花费的时间也比一些简单的插入要少得多。只有选择的过程返回得很快，但是在过程中添加了一个插入，并且运行时比预期的要慢得多（同样，只是来自 java - 而不是来自 SQLyog）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:36:33.963

尝试改用 JDBC 连接池并检查时间戳 - 它应该更低（尽管与 MySQL 插入不同）。还要检查用于插入 MySQL 的数据类型以及是否可以以某种方式进行优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:29:33.037

好的 - 几个小时后，我随机决定尝试将表上的引擎从 InnoDB 更改为 MyISAM，这似乎显着加快了插入速度。

我想我将不得不对这两个引擎之间的差异进行更多审查，除了缺少 FK 和 MyISAM 中的事务。

至少这是进步。

# java - 里面 web.xml，这是什么意思？

> ID：11661792
> 
> 赞同：8
> 
> 时间：2012-07-26T03:10:48.393
> 
> 标签：java, servlets, servlet-filters, web.xml

我开始学习 Struts 2。我偶然发现了这段代码：

**web.xml**

```
...some other codes...

<filter>
    <filter-name>MyFilter</filter-name>
    <display-name>MyFilter</display-name>
    <filter-class>com.xxx.yyy.zzz.MyFilter</filter-class>
</filter>

<filter-mapping>
   <filter-name>MyFilter</filter-name>
   <servlet-name>MyAction</servlet-name>
</filter-mapping>

<listener>
   <listener-class>com.xxx.yyy.StrutsListener</listener-class>
</listener> 

<servlet>
    <servlet-name>MyAction</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
        <param-name>paramName1param-name>
        <param-value>paramVal1</param-value>
    </init-param>
    <init-param>
        <param-name>paramName2</param-name>
        <param-value>paramVal2</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

...some other codes... 
```

我的问题在这部分

```
 <filter-mapping>
      <filter-name>MyFilter</filter-name>
      <servlet-name>MyAction</servlet-name>
 </filter-mapping> 
```

为什么它是一个被映射到`<filter-mapping>`标签内的 servlet？这种映射意味着什么？还有，有什么作用`<listener>`？感谢您的回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T03:47:26.057

你试过谷歌吗？

> 为什么它是一个被映射到标签内的 servlet？这种映射意味着什么？

阅读：[http ://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1039330](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1039330)

> 做`<listener>`什么？

[http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1039300](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html#1039300)

示例：http: [//tomcat-configure.blogspot.in/2009/01/tomcat-context-listener-example.html](http://tomcat-configure.blogspot.in/2009/01/tomcat-context-listener-example.html)

# uitableview - 带有 KVO 的 UITableViewCell

> ID：11661801
> 
> 赞同：2
> 
> 时间：2012-07-26T03:11:19.963
> 
> 标签：uitableview, key-value-observing

我有一个自定义表格视图单元格，它还使用以下方法观察另一个对象的键：

```
[_anotherObject addObserver:myCell
                 forKeyPath:@"killed"
                    options:NSKeyValueObservingOptionNew
                    context:0]; 
```

`_anotherObject`是我的自定义表格视图单元格类中的一个 ivar。

我知道我应该`myCell`在某个时候移除作为观察者，但我不知道我应该什么时候做。

据我所知，可能的地方是：`-dealloc`&`-prepareForReuse`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T16:46:53.503

在 UITableViewCell 子类中添加一个 dealloc 方法：

```
-(void)dealloc {
    for (AnotherObject *object in self.subviews) {
        if ([object isKindOfClass:[AnotherObject class]]) {
            [object removeObserver:self forKeyPath:@"killed"];
        }
    }
} 
```

类似的东西应该适合你。这样你就不会再收到那些讨厌的“An instance 0x21bb1010 of class AnotherObject 已被释放，而键值观察者仍向其注册”的消息。

# php - 适用于 PHP 的 AWS 开发工具包无法在多个目录中运行

> ID：11661802
> 
> 赞同：0
> 
> 时间：2012-07-26T03:11:35.407
> 
> 标签：php, linux, sdk, amazon-web-services, directory

我已将 AWS SDK for PHP 安装到*/usr/share/php/*

当我从这个目录执行示例文件时，它工作正常。

我的网络根目录是*/var/www/*

当我从该目录执行示例文件时，它们不起作用。

这是一个示例文件 */var/www/test_sdk.php*：

```
<?php

require_once 'sdk.class.php';

$s3 = new AmazonS3();  

$bucket = 'test_bucket' . time();

$response = $s3->create_bucket($bucket, AmazonS3::REGION_US_W1, AmazonS3::ACL_PUBLIC);

if ((int) $response->isOK()) {
echo 'Created Bucket';
}else {
echo (string) $response->body->Message;
}
?> 
```

我认为问题出在我的“require_once”声明中。我努力了：

```
"require_once '/usr/share/php/AWSSDKforPHP/sdk.class.php'" 
```

它没有用

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:02:32.397

是`/usr/share/php/`在你的 PHP 中包含路径吗？您是否尝试过简单地通过[PEAR](http://pear.amazonwebservices.com)安装？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:57:20.643

/usr/share/php/ 已经在我的 PHP 包含路径中。这是我需要做的唯一改变才能让它工作：

```
require_once 'AWSSDKforPHP/skd.class.php' 
```

# c# - mvc c#调整大小后上传图片

> ID：11661812
> 
> 赞同：1
> 
> 时间：2012-07-26T03:12:44.143
> 
> 标签：c#, asp.net-mvc

所以我有一个处理文件上传的动作。我要做的是检查文件大小是否为 100kb，如果不是，我将其调整为一定的宽度和高度（尽管我不确定这是达到所需大小的正确方法，想法？）

然后我打算将它保存到我网站的子域中。

这就是动作的样子

```
public ActionResult New(string account, int id, HttpPostedFileBase file)
        {
            if (file == null)
            {
                ModelState.AddModelError("", "File not found.");
                return View();
            }

            if (!ImageUpload.FileTypeValid(file.ContentType))
            {
                ModelState.AddModelError("", "File type is invalid. Please choose a different file.");
                return View();
            }

            if (file.ContentLength > 100)
            {
                Image image = ImageUpload.ResizeFile(file, 100, 100);
            }

            try
            {

                icdb.SaveChanges();
                ModelState.AddModelError("", "Sucesfully saved Image.");
                return RedirectToAction("Details", "OfAController", new { account = account, id= id});
            }
            catch (Exception ex)
            {
                ModelState.AddModelError("", ex.Message);
            }

            return View();
        } 
```

这是调整大小的方法

```
static public Image ResizeFile(HttpPostedFileBase file, int targeWidth, int targetHeight)
        {
            Image originalImage = Image.FromStream(file.InputStream, true, true);
            var newImage = new MemoryStream();
            Rectangle origRect = new Rectangle(0, 0, originalImage.Width, originalImage.Height);
            // if targets are null, require scale. for specified sized images eg. Event Image, or Profile photos.
            int newWidth = targeWidth;
            int newHeight = targetHeight;
            var bitmap = new Bitmap(newWidth, newHeight);

            try
            {
                using (Graphics g = Graphics.FromImage(bitmap))
                {
                    g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
                    g.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
                    g.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
                    g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
                    g.DrawImage(originalImage, new Rectangle(0, 0, newWidth, newHeight), origRect, GraphicsUnit.Pixel);
                    bitmap.Save(newImage, originalImage.RawFormat);
                }
                return (Image)bitmap;
            }
            catch
            {   // error before IDisposable ownership transfer
                if (bitmap != null)
                    bitmap.Dispose();
                throw new Exception("Error resizing file.");
            }
        } 
```

所以我的问题是，我试图找到如何将这个调整大小的文件保存到我的目录的方法。然后我一直发现我必须先上传图片才能调整大小？那正确吗？或者有没有办法在我保存到我的目录之前调整它的大小？

想法？

谢谢！

# android - 设置小部件布局的 Alpha/Opacity

> ID：11661813
> 
> 赞同：1
> 
> 时间：2012-07-26T03:12:51.010
> 
> 标签：android, android-widget, xml-layout

我想设置背景的不透明度，如果我使用普通布局，`LinearLayout`我发现这个[解决方案](https://stackoverflow.com/questions/4813995/set-alpha-opacity-of-layout)可以正常工作，但是在`android-widgets`我们必须设置不同的布局的情况下，我编写了以下代码

```
public class AlphaLayout extends LinearLayout {

public AlphaLayout (Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public AlphaLayout (Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
protected void onAnimationStart() {
    AlphaAnimation alphax = new AlphaAnimation(0.5F, 0.5F);
    alphax.setDuration(0);
    alphax.setFillAfter(true);
    this.startAnimation(alphax);
    super.onAnimationStart();
} 
```

}

而我对应的小部件 xml 布局是

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="@dimen/widget_margin" >

<com.exercise.HelloWidget.AlphaLayout 
    android:id="@+id/myWidgetLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:background="@drawable/appwidget_dark_bg"
    android:orientation="horizontal" >
    <TextView
        android:id="@+id/song_info"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp"
        android:text="Hello"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/white" />

    <TextView
        android:id="@+id/timeWidget"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:text="03:30"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/white" />

</com.exercise.HelloWidget.AlphaLayout> 
```

运行项目后当我将小部件添加到主屏幕时，它显示错误`Problem loading widget`

你能告诉我我做错了什么吗？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:19:28.043

如[Android 文档](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)中所述：您不能扩展`RemoteView`. 所以，你不能使用你的`AlphaLayout`班级。

对于任何布局背景，您可以使用[十种不同的可绘制对象。](http://developer.android.com/guide/topics/resources/drawable-resource.html)你希望你的图像是透明的。这（据我所知）不能提供我们所拥有的。

但是，这是一个好的开始：

*   使用 LinearLayout 而不是 AlphaLayout。
*   添加一个[Shape Drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)作为其背景：`android:background="@drawable/widget_background"`
*   然后，根据需要设置背景。这是一个建议：

    res/drawable/widget_background.xml

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/Corners">
        <gradient android:startColor="#CC111111" android:endColor="#CC7f7f7f" android:angle="45"/>
        <padding android:left="4dp" android:top="1dp" android:right="4dp" android:bottom="1dp" />
        <corners android:radius="4dp" />
        <stroke android:width="2dp" android:color="#FFAfAfAf"/>
    </shape> 
    ```

我相信这是制作小部件布局的标准方法。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:19:39.050

您不能在主屏幕上有自定义视图/小部件。

与典型视图相比，主屏幕小部件中使用的 RemoveViews 功能数量有限。

# url - 使用 iframe 时更改地址栏

> ID：11661814
> 
> 赞同：3
> 
> 时间：2012-07-26T03:12:58.433
> 
> 标签：url, iframe

有没有办法使用 iframe，但是当单击 iframe 中的内容到页面实际内容时，地址栏仍然会发生变化？我想在页面顶部有一个带有音乐播放器的水平栏，允许在浏览网站时播放音乐。但我也希望人们也能够轻松地为这些页面添加书签。

我已经搜索过，但找不到答案。许多人只是想更改 iframe 中加载的 URL……这不是我想要的。我希望更新浏览器中显示的实际地址栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:17:53.147

这句话是为了帮助我达到最少 30 个字符。忽略这一点并阅读下一句以获得您的答案：

不。

**更新：**

“更改”和“重定向”是两个不同的东西。你需要弄清楚它是什么。“更改”地址栏是不可能的。“重定向”是可能的。

在 iframe 中单击标准链接不会自行影响最顶层的窗口。iframe 中的 Javascript 重定向的一个简单示例如下所示：

**顶部窗户：**

```
<html>
<head></head>
<body>
    <iframe src="http://yoursite.com/iframe_test.html" />
</body> 
```

**框架测试：**

```
<html>
<head>
    <script>
    window.onload = ready;
    function ready()
    {
        document.getElementById("link1").onclick = linkClick;
        document.getElementById("link2").onclick = linkClick;
    }
    function linkClick(e)
    {
        e.preventDefault();
        window.top.location.href = this.href;
    }
    </script>
</head>
<body>
    <a id="link1" href="http://youtube.com">Link1</a>
    <a id="link2" href="http://facebook.com">Link2</a>
</body> 
```

**解释：**

如果没有 Javascript，当您单击 iframe 中的链接时会发生什么，您将保留在原始页面上，并且 iframe 将被重定向到您单击的链接。以这种方式在 iframe 中使用 Javascript 可以强制最顶层的框架重定向。

我强烈反对以任何方式依赖它。一般来说，这是一种草率的编程，如果可能的话，我会完全远离 iframe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-23T11:21:54.207

是的，你可以，但这不是一个简单的解决方案，它有一些限制

# 改变

您可以一起使用*[Web API 消息](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage)*和*[历史 API](https://developer.mozilla.org/en-US/docs/Web/API/History_API)*来获得您想要的。

### 例子

[提琴手](https://jsfiddle.net/itbertuz/88gzyacz/5/)

# 重定向

您可以使用上面的示例并将推送历史记录替换为`window.location.replace`

请将该片段视为获得所需内容的*提示*。上面的示例在安全性方面没有得到很好的考虑（即 iframe 脚本正在向父级发送消息，无论其来源如何）。

# javascript - jquery超大stop_loop重定向？

> ID：11661816
> 
> 赞同：1
> 
> 时间：2012-07-26T03:13:27.827
> 
> 标签：javascript, jquery, json

我有四张图片幻灯片，一旦完成滑动，我想重定向。如何？

示例代码：

```
jQuery(function($){                     
    $.supersized({                      
        // Functionality
        slideshow : 1,  // Slideshow on/off
        autoplay : 1,    // Slideshow starts playing automatically
        start_slide : 1, // Start slide (0 is random)
        stop_loop : [
                    if (data)
                    {
                        window.location = "http://www.google.com/";
                    }
                    ], // Pauses slideshow on last slide
        random: 0,     // Randomize slide order (Ignores start slide)
        slide_interval : 9000,  // Length between transitions
        transition : 6, // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 
                            // 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 
                            // 7-Carousel Left
        transition_speed : 2000, // Speed of transition
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T04:04:26.837

根据[Supersized 文档](http://buildinternet.com/project/supersized/docs.html#stop_loop)，`stop_loop`设置是一个布尔值，表示到达最后一张幻灯片后是否“暂停”，在循环结束时不需要回调来运行，以及您在其中包含代码的方式你的问题是语法错误。

我在文档中没有看到任何关于在幻灯片结束时接收通知的方法，所以唯一想到的（除了更改超大源）是`setTimeout()`：

```
jQuery(function($){
    var interval = 9000,
        speed = 2000,
        slideArray = [];  // add your slides to this array

    $.supersized({
        slideshow : 1,
        autoplay : 1,
        start_slide : 1,
        stop_loop : true, // Pauses slideshow on last slide
        random: 0,
        slides : slideArray,
        slide_interval : interval,
        transition : 6,
        transition_speed : speed,
    });

    setTimeout(function() {
        if (data) 
           window.location = "http://www.google.com/";
    }, (interval + speed) * slideArray.length);    
}); 
```

也就是说，计算整个幻灯片应该花费多长时间并在这段时间之后运行您的重定向代码。您的代码没有指定任何幻灯片，但我添加了一个数组变量，可以在其中指定它们并使用该数组的长度来计算延迟。

# ios - 如何使用 NSXML Parser 解析 XML 文件

> ID：11661818
> 
> 赞同：0
> 
> 时间：2012-07-26T03:13:38.643
> 
> 标签：ios, nsxmlparser

我有一个这样的 XML 文件，我用`NSXMLParser`它来解析它：

```
<? xml version ='1.0' encoding="UFT-8"?>
<!DOCTYPE plist PUBLIC "-//apple//DTD PLIST 1.0//EN" "http://www.apple/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<Data>
   <item>
     <date>2012-07-24</date>
     <name>A</name>
     <count>100</count>
     <startDate>2012-07-24</startDate>
     <stopDate>2012-07-24</stopDate>    
   </item>
   <item>
     <date>2012-07-24</date>
     <name>A</name>
     <count>100</count>
     <startDate>2012-07-24</startDate>
     <stopDate>2012-07-24</stopDate>
   </item>

</Data>
</plist> 
```

使用 IBAtion 来解析 xml 文件，例如

```
 - (IBAction)Parser:(id)sender {
    NSXMLParser *xmlParser = [[NSXMLParser alloc]initWithContentsOfURL:[[NSBundle mainBundle]      URLForResource:@"file2" withExtension:@"xml"]];
    [xmlParser setDelegate:self];
    BOOL flag =[xmlParser parse];
    if (flag) {
        NSLog(@"OK");
    } else {
        NSLog(@"false");
    }
    [xmlParser release];
}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict

{
     NSLog(@"%@found a %@ element",self,elementName);
     if ([elementName isEqual:@"Data"]) {
        [data release];
        data = [[Data alloc]init];

    [data setParentParserDelegate:self];
    [parser setDelegate:data];
} 
```

}

有`printf "OK"`和没有`printf "NSLog(@"%@found a %@ element",self,elementName)"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:22:52.587

NSXMLParser 是基于流的，当它遇到 XML 流中的特定组件（开始标记、文本、结束标记等）时，它会向其委托发送各种消息。因此，创建一个 NSXMLParser 实例，并为其分配一个您编写的符合[NSXMLParserDelegate](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)协议的委托。（*编辑：从您添加到问题中的代码来看，您可能已经完成了这部分，或者至少在这方面有了一个良好的开端。*）

在您的委托类的[`-parser:didStartElement:...`](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSXMLParserDelegate/parser%3adidStartElement%3anamespaceURI%3aqualifiedName%3aattributes%3a)方法中，检查元素名称。如果它是“消息”，则创建一个新的 NSMutableDictionary 来保存其子元素中的信息，并将其存储在一个属性中：（*编辑：在您的代码中，看起来您已经声明了实例变量，但您应该使用点-语法将其作为属性访问，以确保发生正确的内存管理。*）

```
self.listOfFriends = [NSMutableDictionary dictionary]; 
```

对于其他元素名称，创建一个空的 NSMutableString 用于保存文本，并将其存储在属性中：

```
self.thisString = [NSMutableString string]; 
```

在您的[`-parser:foundCharacters:`](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSXMLParserDelegate/parser%3afoundCharacters%3a)方法中，将字符串附加到您之前创建的可变字符串属性。

```
[self.thisString appendString:string]; 
```

最后，在您的[`-parser:didEndElement:...`](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSXMLParserDelegate/parser%3adidEndElement%3anamespaceURI%3aqualifiedName%3a)方法中，检查元素名称。如果它是“消息”，则您已完成此消息元素。如果您的 XML 流只有一个 Message 元素（如示例中所示），您现在可以打印您已构建的字典，或者您想用它做的任何其他事情。如果可以有多个 Message 元素，则可以将刚刚完成的元素添加到数组中。

如果刚刚结束的元素*不是*消息，则将其添加到字典中，[`-setValue:forKey:`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableDictionary/setValue%3aforKey%3a)并将元素名称作为键传递，并将您在接收早期消息时创建的构建字符串`-parser:foundCharacters:`作为值。

```
[self.listOfFriends setValue:self.thisString forKey:elementName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:32:18.043

我在您的代码中发现了两个问题：

首先，xml是错误的。第一行应该是：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

其次，解析器构造错误。基本上你正在以错误的方式初始化 URL。它应该是：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"file2" ofType:@"xml"];
NSXMLParser *xmlParser = [[NSXMLParser alloc]initWithContentsOfURL:[NSURL fileURLWithPath:filePath]]; 
```

通过对您的代码进行这两项更改，它可以完美运行。

希望这可以帮助。

# django - 访问存储在多对多字段中的值

> ID：11661819
> 
> 赞同：0
> 
> 时间：2012-07-26T03:13:59.247
> 
> 标签：django

试图弄清楚为什么在下面调用 each.category_id.all() 不起作用。基本上它没有找到任何 category_ids，但该表已被填充。

我有以下模型/关系：

```
class GlobalPart (Models.model):
...
category_id=models.ManyToManyField(Category, related_name = 'globalpart')
... 
```

和

```
class Category (Model.model):
...
category = models.CharField(max_length=250)
... 
```

脚本：

```
def addcatsfromlist(self):
        globalparts = GlobalPart.objects.all()
        for each in globalparts:
            for catid in each.category_id.all():
                print catid 
```

注意：我还尝试打开 django shell 并在其中为 GlobalPart 中的特定条目执行此操作，并且再次显示为空`[]`。但是 category_id 肯定有条目，这就是为什么我不明白我做错了什么。

例如：

```
>>> mypart = GlobalPart.objects.get(pk=1)
>>> print mypart.category_id.all()
[] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:58:59.710

我才发现我的问题。我一直在这个字段中存储了错误的值——因此，存储在那里的整数实际上并不作为 Category 表中的主键存在。所以这就是为什么什么也没找到。回想起来，这很愚蠢，但可能会帮助另一个菜鸟。

# asp.net-mvc-3 - Telerik MVC 3 Grid 3 级主细节

> ID：11661820
> 
> 赞同：1
> 
> 时间：2012-07-26T03:14:08.713
> 
> 标签：asp.net-mvc-3, telerik, telerik-grid

这是我的网格

年级 > 课程 > 学生

问题 1\. 如何从第一个网格中获取密钥？（来自classyear网格的classyearID？）

我需要它的原因是因为我有超过 5 年的课程，但只有 2 门课程。所以基本上这两个课程将存在于每个学年。而且由于我无法获得班级yearID，因此学生在每个班级重新出现，请帮助

在下面查看我的观点：

```
@(Html.Telerik().Grid<ClassYear>().HtmlAttributes(new { style = "width: 100%" })
.Name("grdClassYear")
.DataBinding(binding => binding.Ajax()
    .Select("GetClassYears", "Home"))
.DataKeys(keys => keys
    .Add(o => o.ClassYearID)
    .RouteKey("classyearID"))
.Columns(cols =>
{
    cols.Bound(c => c.ClassYearDate);
    cols.Bound(c => c.Name);
})

.DetailView(course => course.ClientTemplate(
            Html.Telerik().Grid<Course>()
            .Name("grdCourse_<#= ClassYearID #>")
            .DataBinding(dataBinding => dataBinding.Ajax()
                .Select("GetCourses", "Home"))
            .DataKeys(keys => keys.Add(o => o.CourseID))
            .Columns(cols =>
            {
                cols.Bound(c => c.CourseName);
                cols.Bound(c => c.Description);
            })

                    .DetailView(stu => stu.ClientTemplate(
                        Html.Telerik().Grid<Student>()
                        .Name("grdStudent_<#= CourseID #>")
                        .DataBinding(dataBinding => dataBinding.Ajax()
                            .Select("GetStudentsA", "Home", new { classyearID = "<#= ClassYearID #>", courseID = "<#= CourseID #>" })))
                        .DataKeys(keys => keys.Add(o => o.PersonID))
                        .Columns(cols =>
                        {                                
                            cols.Bound(c => c.PersonID).ReadOnly().Hidden();
                            cols.Bound(c => c.MidshipmenNumber);
                            cols.Bound(c => c.LastName);
                            cols.Bound(c => c.FirstName);
                        })

                    .Sortable()
                    .ToHtmlString()
                    )) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:42:36.243

我不确定，这是否已经解决。但只是想给出答案，所以它可能会帮助某人。

以您的详细网格名称为例，

```
.Name("grdStudent_<#= ClassYearID #>_<#= CourseID #>") 
```

基本上，每个详细视图名称都应该是唯一的。

# python - Python中文本的编码和解码

> ID：11661822
> 
> 赞同：1
> 
> 时间：2012-07-26T03:14:28.643
> 
> 标签：python, string, urllib, url-encoding

我目前正在使用一个 python 脚本（appengine），它从用户（文本）获取输入并将其存储在数据库中以便以后重新分发。

就编码而言，传入的文本是*未知*的，我只需要对其进行一次编码。

来自客户的示例文本：

*   This%20is%20a%20test
*   这是一个测验

现在在python中，我认为我可以做的是对其进行解码然后对其进行编码，以便两个样本都变为：

*   This%20is%20a%20test
*   This%20is%20a%20test

我正在使用的代码如下：

```
#
# Dencode as UTF-8
#
pl = pl.encode('UTF-8')

#
#Unquote the string, then requote to assure encoding
#
pl = urllib.quote(urllib.unquote(pl)) 
```

来自有效负载`pl`的*POST*参数的位置。

### 问题

问题是有时我会得到特殊的（中文、阿拉伯语）类型的字符，并且会出现以下错误。

```
'ascii' codec can't encode character u'\xc3' in position 0: ordinal not in range(128)
    ..snip..
    return codecs.utf_8_decode(input, errors, True)
 UnicodeEncodeError: 'ascii' codec can't encode character u'\xc3' in position 0: ordinal not in range(128) 
```

鉴于上述问题，有人知道处理字符串的最佳解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:56:20.870

代替

```
pl = pl.encode('UTF-8') 
```

和

```
pl = pl.decode('UTF-8') 
```

因为您正在尝试将字节字符串解码为字符串。

Python 2 的一个设计问题允许您`.encode`通过将字节字符串（已经编码）自动解码为 ASCII（这就是为什么它显然适用于 ASCII 字符串，仅对非 ASCII 字节无效）。

# php - mongoDB 不允许我更新

> ID：11661824
> 
> 赞同：1
> 
> 时间：2012-07-26T03:14:32.133
> 
> 标签：php, mongodb, mongodb-php, object-identity

好的，这个问题让我发疯了，我认为 _id 应该是 ObjectID，而当我尝试使用 _id 更新它时它第一次插入它时它会正确执行它不起作用。

这是我的代码

```
//Save Data
    function savedata($data){
        $collection = $this->db->retail_logs;
        $this->data = $data;

        if($this->data['_id'] == NULL || $this->data['_id'] == "")
        {
            $this->data['_id'] = new MongoId();
        }
        else
        {
         $this->data['_id'] = ObjectID($this->data['_id']);
        }   
        try {
        $collection->update(
            array("_id"=>$this->data['_id']),
            $this->data, // new lead document to insert
            array("upsert" => true, "safe" => true)
            );

            print $this->data['_id'];
        } catch (Exception $e) {
            print "we are not able to update";
        }
    } 
```

我试图做followinf

```
if($this->data['_id'] == NULL || $this->data['_id'] == "")
            {
                $this->data['_id'] = new MongoId();
            }
            else
            {
             $this->data['_id'] = ObjectID($this->data['_id']);
            } 
```

但这似乎无济于事。

发生的事情是它第一次正确插入 ObjectID(idnumber) 然后当它进行更新时删除 ObjectID() 并插入一个与以前相同的 idnumber 的新潜在客户

所以它看起来像“IDNUMBER”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:08:47.913

您的原始代码很接近，但如果您想让字符串`_id`成为正确的 ObjectID 类型，请使用：

```
$this->data['_id'] = new MongoId($this->data['_id']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:57:57.577

检查更新请求的结果

非更新插入更新可能会或可能不会修改现有对象。upsert 将修改现有对象或插入新对象。客户端可以通过随后发出 getlasterror 命令 (db.runCommand("getlasterror")) 来确定其在连接上的最新消息是否更新了现有对象。如果 getlasterror 命令的结果包含 updatedExisting 字段，则连接上的最后一条消息是更新请求。如果 updatedExisting 字段的值为 true，则该更新请求会导致更新现有对象；如果 updatedExisting 为 false，则没有更新现有对象。如果执行插入，“upserted”字段将包含新的 _id 值（从 1.5.4 开始新）

您能否按照 Mongo Docs 的建议运行命令并让我们知道命令的结果

参考：[Mongo 更新](http://www.mongodb.org/display/DOCS/Updating/)

# coronasdk - Corona SDK - 滚动视图中的本机文本字段？

> ID：11661826
> 
> 赞同：2
> 
> 时间：2012-07-26T03:14:41.727
> 
> 标签：coronasdk

在 Corona SDK 中，我正在寻找一个看起来应该非常基础的示例/教程：在滚动视图中包含一个文本输入字段。

我一直在使用 widget.newScrollView() 作为滚动视图，使用 native.newTextField() 作为文本输入字段。当然，问题在于“本机”对象存在于 Corona 显示对象层次结构之外，因此不能将文本字段放置在滚动视图内并以这种方式滚动。

对此[Corona Labs 博客文章](http://www.coronalabs.com/blog/2012/02/07/tutorial-text-input-with-native-ui/)的评论建议使用看起来像文本字段的占位符图像的技术，当用户触摸它时，触摸侦听器会覆盖真实的文本字段。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:33:46.720

“伪造它”是在编程时完成工作的一种行之有效的方法，无论您使用的是 Corona SDK 还是其他任何东西。虽然不必为了完成某件事而费尽周折，但有时这只是处理它的最佳方式。

在这种情况下，我认为使用占位符可能是最好的方法。您可以创建一个函数，使用 display.newRect 创建假文本字段的框架，然后 display.newText 放入默认和/或用户提供的文本。

就像是：

```
local dObj = showFauxTextfield(x, y, width, height, str) 
```

根据传入的参数创建矩形和文本，将它们放入显示组中，然后将其传递回调用代码。然后，您可以将其与其他所有内容一起放入常规显示组中。

在 showFauxTextfield() 中，您将创建一个事件处理程序，当它被触摸时会弹出一个 native.newTextField。

这是一项额外的工作，但 Corona 通常会为您节省大量的开发时间，因此您可能仍会领先。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T19:22:03.973

如果您不热衷于实现本文中提到的占位符技术，您可以随时使用 WidgetCandy 库 ( [http://www.x-pressive.com/WidgetCandy_Corona/](http://www.x-pressive.com/WidgetCandy_Corona/) )。它包括一个将提供类似功能的文本字段类。

# ibm-midrange - 如何禁用显示文件中的功能键而不使用指示器停用其命令功能？

> ID：11661828
> 
> 赞同：0
> 
> 时间：2012-07-26T03:15:02.070
> 
> 标签：ibm-midrange

假设在显示文件中指定了 DDS CF20 以使 F20 可用。现在我想在 RPG 程序中满足某些条件时禁用此功能。由于该程序已经用完所有通用指标 In01-IN99，因此不能使用指标来停用显示文件中的 CF20 关键字。有没有其他选择可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:45:14.067

当用户按下 F20 并且 RPG 程序决定不允许这样做时，通知用户并禁止程序内的 F20 动作。换句话说，不要对显示文件做任何事情，做 RPG 程序内部的所有工作。

# c# - 来自 ASP.NET MVC 后端的 Javascript 客户端延迟加载模型

> ID：11661830
> 
> 赞同：1
> 
> 时间：2012-07-26T03:15:23.647
> 
> 标签：c#, javascript, repository, lazy-loading

我正在开发一个处理大量信息的富客户端 Web 应用程序。在提出应用程序架构的几个绊脚石之后，我总结了以下需求列表：

*   我需要一个可以从 ASP.NET MVC3 后端提取数据的 javascript 存储库。
*   我需要延迟加载或获取加载存储库实体的特定属性。

是否有一个 Javascript 库可以完成部分或全部这些工作——尤其是延迟加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:59:18.143

我回顾了一些主干应用程序架构，并决定预先加载大部分模型。

# android - 在安卓中使用 HTML

> ID：11661831
> 
> 赞同：0
> 
> 时间：2012-07-26T03:15:33.103
> 
> 标签：android, html

[是否可以使用WebView](http://developer.android.com/reference/android/webkit/WebView.html)将我在 Java 类中使用的变量的值获取到 html 页面？例如，我将获得总金额并转入在线支付。

有人知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:01:01.270

您可以使用 WebView 的 addJavascriptInterface 方法来执行此操作。

# api - asana tasks api 不适用于 GET /tasks GET /workspaces/workspace_id/tasks 但适用于 GET /projects/project_id

> ID：11661832
> 
> 赞同：1
> 
> 时间：2012-07-26T03:15:41.833
> 
> 标签：api, asana

我的查询是：

[https://app.asana.com/api/1.0/tasks](https://app.asana.com/api/1.0/tasks) 但我有这个错误：“必须准确指定项目、标签或工作区之一”

当我尝试使用此工作区时： [https](https://app.asana.com/api/1.0/workspaces/workspace_id/tasks) ://app.asana.com/api/1.0/workspaces/workspace_id/tasks 我有这个错误：“受让人：缺少输入”

但是，如果我改用这些项目，我会得到一个任务列表......

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:25:50.023

（我在 Asana 工作）

您必须始终使用某些内容过滤任务查询，因为我们尚不支持分页，并且工作区中的所有任务通常都是大量数据。指定项目隐式地将查询范围限定为工作区，因为每个项目都存在于一个工作区中。您可以指定`assignee`，但您必须另外按工作区过滤。

因此，您对过滤任务的选择是通过`project`或通过 BOTH`assignee`和`workspace`.

# erlang - erlang 端口的端口信息如何更改为未定义？

> ID：11661834
> 
> 赞同：0
> 
> 时间：2012-07-26T03:15:49.073
> 
> 标签：erlang, erlang-ports

我得到一个 erlang 服务器，许多客户端使用 tcp 连接到服务器。

几分钟后，使用 erlang:ports() 和 erlang:port_info()，我可以发现某些端口的 port_info 未定义，并且该端口已关闭。无论如何我都找不到将其从端口中删除。

那么为什么会发生这种情况，我怎样才能从 erlang 端口中删除这些未定义的端口呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:45:03.860

如果端口未打开，则该`erlang:port_info/1`函数返回。`undefined`

您在未打开或已关闭的端口上调用该函数。

请注意，如果创建端口的 Erlang 进程（*连接*的进程）终止，端口将自动关闭。

# c# - 如何在 C# 中获取声音文件资源的名称和位置？

> ID：11661842
> 
> 赞同：0
> 
> 时间：2012-07-26T03:16:25.570
> 
> 标签：c#

我的 C# 项目的资源文件夹中有一个 sound.wav 文件。我发现我可以使用该文件：

```
Properties.Resources.soundImage 
```

但是上面的代码给了我一个流。我需要的是名称，如果可能的话，是文件的路径。有没有办法得到它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T03:21:08.313

由于我们看到它是 的一部分`Properties.Resources`，我们可以看出它实际上是一个编译资源。这意味着它嵌入在 .NET 程序集（.exe 或 .dll）中。

虽然它在您的项目中作为一个文件开始，但编译器实际上将它放入您的输出文件中。因此，当您的应用程序运行时，没有文件名可供您获取。

# java - 空 Http 调用但没有错误

> ID：11661845
> 
> 赞同：0
> 
> 时间：2012-07-26T03:16:59.217
> 
> 标签：java, android

我正在尝试使用我的应用程序调用 Web 服务，但我没有收到任何错误，该 URL 是正确的并返回一些内容（通过浏览器），但我没有得到任何内容。

```
try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url);
    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    int lenght = (int) entity.getContentLength();
    is = entity.getContent();
} catch (Exception e) {
    Log.e("log_tag", "Error in http connection" + e.toString());
} 
```

由于他收到空响应，长度等于 -1

来自 url 的响应是否需要是 HTML ？或者我输出的任何东西都可以被 HttpClient 抓取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:24:58.727

响应不需要是 HTML，但如果服务器端没有在响应中返回 content-length 标头，则长度将为负数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:26:32.910

响应不一定必须是 HTML。

getContentLength() 返回负值表示服务器不返回内容长度。这并不意味着没有内容。请求可能会返回内容，但 getContentLength() 仍会返回负值。

您仍然可以获得请求返回的内容：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
entity.writeTo(baos);
String contentString = baos.toString(); 
```

# android - 在列表中实现 viewpager

> ID：11661846
> 
> 赞同：0
> 
> 时间：2012-07-26T03:16:59.683
> 
> 标签：android, android-listview, android-viewpager

[如何在 Android 的 ViewPager 中实现 ExpandableList？](https://stackoverflow.com/questions/7991632/how-to-implement-an-expandablelist-in-a-viewpager-in-android/8129085#8129085)

我的问题与上述问题完全相反，我想显示一个列表视图（最好是可扩展的），当单击一个项目时，我想显示一堆图像（当然每个项目都有不同的图像）。

PS：请不要告诉我为每个列表项启动不同的活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:18:22.750

这是一些可能的指导而不是解决方案。（我不太清楚问题是什么）

我可能只会创建一项活动。每次单击列表视图时，它都会创建一个带有一些存储标志的意图。然后，您以该意图开始活动。解包意图以找出您希望您的活动做什么。

```
private OnItemClickListener itemClickListener = new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        Intent intent = new Intent(this, myclass.class);

        intent.putExtra(KEY, v.getId())
           intent.putExtra(KEY2, position)
           intent.putExtra(KEY3, id)
    startActivity(intent);
    }
}; 
```

然后在新活动 onCreate() 中获取意图标志

```
 Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent= getIntent();
    resId = intent.getIntExtra(KEY, 0);
    ...
    super.setTitle(title); 
```

不知道你在找什么希望它有帮助

# android - 当检测到 NFC Tag 时，intent 是如何调度的

> ID：11661851
> 
> 赞同：1
> 
> 时间：2012-07-26T03:17:48.873
> 
> 标签：android, screen, nfc, ndef

我对分发意图的方法感到困惑，例如如何广播 ACTION_TAG_DISCOVERED Intents？

而另一个问题是当我们锁屏时，ACTION_TAG_DISCOVERED Intents不能被接收，或者这些intents没有被广播？

--现在我可以看到它将由 dispatchTagInternal() 发送 --comments 现在我不了解 NFC-C 轮询和 NFC-EE 路由。他们代表什么？然后NFC-C轮询，就像发现，但是'C'是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:38:10.903

我建议你仔细阅读这里的精彩描述：http: [//developer.android.com/guide/topics/connectivity/nfc/index.html](http://developer.android.com/guide/topics/connectivity/nfc/index.html)

BR 斯坦

# mysql - 如何从 VB.NET 在 phpmyadmin 中记录 DateTimePicker.Value

> ID：11661856
> 
> 赞同：0
> 
> 时间：2012-07-26T03:18:32.710
> 
> 标签：mysql, vb.net, phpmyadmin, datetimepicker

我是 VB.net、sql 甚至 phpmyadmin gui 的新手。我想在 vb.net 中使用 DateTimePicker 记录日期。我能够记录数据，但日期是唯一没有记录的数据。它在 phpmyadmin 中显示为 0000-00-00。类型是日期。

这是我在 VB.NET 中使用的代码：

```
 date_of_confinement = Date.Parse(dtpDate.Value)

 Dim SQLStatement As String = "INSERT INTO patient(date_of_confinement) VALUES('" & Date.Parse(dtpDate.Value) & "')"
            SaveInfos(SQLStatement) 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:51:31.767

`date_of_confinement =Format(dtpDate.Value, "yyyy-MM-dd")`

然后将此值插入到查询中。MySQL 将以“yyyy-MM-dd”格式存储日期。

# php - 我如何在 symfony 的 php 代码中使用 Swift 邮件程序

> ID：11661858
> 
> 赞同：1
> 
> 时间：2012-07-26T03:19:22.060
> 
> 标签：php, symfony, doctrine-orm

我正在使用这个，但我收到错误

```
foo_bundle.listener.comment:
        class: xxx\Listener\CupleListener
        arguments: [@mailer] 
```

* * *

```
class CupleListener
{
    protected $mailer;

    public function __construct(Swift_Mailer $mailer)
    {
        $this->mailer = $mailer;
    }

    public function onCenterEvent(CupleEvent $event)
    {
        $center = $event->getcenter();

            $message = \Swift_Message::newInstance()
            ->setSubject('New comment posted on ' . $post->getTitle())
            ->setFrom('send@example.com')
            ->setTo('xxxxxxxxxx')
            ->setBody("Hey, somebody left a new comment on a post you're subscribed to! It says: " . $comment->getBody());
            $this->mailer->send($message);

    }
} 
```

这是给出错误

我也不知道要在命名空间顶部包含哪个类

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T03:49:18.567

尝试：

```
public function __construct(\Swift_Mailer $mailer)
{
    $this->mailer = $mailer;
} 
```

# iphone - 我的播放器在播放第一首歌曲后停止

> ID：11661859
> 
> 赞同：0
> 
> 时间：2012-07-26T03:19:47.920
> 
> 标签：iphone, objective-c, ios, xcode

当我从我的 ipod 库中选择多首歌曲时，我正在使用 AVPlayer，一旦第一首歌曲播放完毕，这些选定的歌曲就会显示在名为 playlistTableView 的 UITableview 中，它不会继续播放第二首歌曲。我希望播放器继续播放歌曲直到那里playlistTableView 中没有歌曲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:35:30.177

在 iOS 4.1 及更高版本上，您可以使用 AVQueuePlayer 对象按顺序播放多个项目。AVQueuePlayer 是 AVPlayer 的子类。您使用一组播放器项目初始化队列播放器：

```
NSArray *items = <#An array of player items#>;
AVQueuePlayer *queuePlayer = [[AVQueuePlayer alloc] initWithItems:items]; 
```

* * *

然后，您可以使用 play 播放队列，就像使用 AVPlayer 对象一样。队列播放器依次播放每个项目。如果您想跳到下一个项目，您可以向队列播放器发送一个 advanceToNextItem 消息。您可以使用 insertItem:afterItem:、removeItem: 和 removeAllItems 修改队列。添加新项目时，通常应使用 canInsertItem:afterItem: 检查是否可以将其插入队列。您将 nil 作为第二个参数传递以测试是否可以将新项目附加到队列中：

```
AVPlayerItem *anItem = <#Get a player item#>;
if ([queuePlayer canInsertItem:anItem afterItem:nil])
{
    [queuePlayer insertItem:anItem afterItem:nil];
} 
```

有关详细信息，请参阅以下文档。

[http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)

# sql - 从表中获取计数并显示每列的总和

> ID：11661860
> 
> 赞同：1
> 
> 时间：2012-07-26T03:19:47.327
> 
> 标签：sql, join

这是表2中的数据

```
ID2        |    Count2
-----------+-----------
1345653         5
534140349       5
682527813       4
687612723       3
704318001       5 
```

这是我在表1中的以下数据

```
ID1        |    Count1
-----------+-----------
1345653         4
704318001       4 
```

1.  如果您看到上面的表格`1345653`，Table2 中有这个，`5 count`但在 Table1 中有，同样，Table2 中有`4 count`这个 ID ，但在 Table1 中有。`704318001``5 count``4 count`
2.  还有一件事我需要展示，我不知道是否可以做到。我想在最后显示每列的总和，比如最后的 Count2 列的总和和最后的 Count1 列的总和。

所以我需要在输出中这样显示。我有第一部分的工作查询，但我不确定如何处理第二部分。

```
ID              Count2   Count1
-----------------------------------
1345653         5        4
534140349       5        0
682527813       4        0
687612723       3        0
704318001       5        4
               22        8 
```

这在sql中可能吗？如果是，我该如何实现？

我已经创建了只有计数工作的[SQL 小提琴](http://sqlfiddle.com/#!3/7c75b/7)（意味着第一部分），而且我不确定如何在该 SQL 查询中添加每个列特征的总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:25:56.003

它对你有用吗？

```
select id2,  SUM(count2),SUM(coalesce(count1, 0)) as count1 
from table2 
 left outer join table1 
  on id1=id2
 group by id2
 with rollup 
```

它是 mysql 语法，但大多数 RDMS 支持`ROLLUP`，语法差异很小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:25:02.350

在标准 sql 中：

```
Select id, Count2,Count1, Count2+Count1 as CountSum
from table2 
left outer join table1 on table1.id=table2.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:26:01.307

您正在寻找“带有汇总”的分组。我相信以下查询应该提供您想要的。假设您使用的是 SQL Server ...

```
SELECT
    ISNULL(Table1.ID1, Table2.ID2) AS ID,
    SUM(ISNULL(Table2.Count2, 0)) AS Count2,
    SUM(ISNULL(Table1.Count1, 0)) AS Count1
FROM Table1
FULL JOIN Table2 ON Table2.ID2 = Table1.ID1
GROUP BY
    ISNULL(Table1.ID1, Table2.ID2) WITH ROLLUP 
```

# python - 在 vim [windows] 中执行 python 脚本

> ID：11661863
> 
> 赞同：1
> 
> 时间：2012-07-26T03:20:23.160
> 
> 标签：python, vim, windows-7

我正在尝试在 vim 中运行 python 脚本。我将以下代码放入插件文件夹中的 python.vim 中：

```
map <buffer> <S-e> :w<CR>:!/usr/bin/env python % <CR> 
```

但它似乎是Linux。有什么办法可以调整它并绕过Win7？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:11:48.047

尝试`map <buffer> <S-e> :w<CR>:!C:\Python27\python.exe % <CR>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:27:34.920

怎么样`map :w:!C:/path/to/your/python %`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:27:54.913

您应该将 python.exe 路径紧跟在`!`. 例如：

```
map :w:!C:\Python27\python.exe % 
```

# mysql - Mysql表列更新问题

> ID：11661864
> 
> 赞同：0
> 
> 时间：2012-07-26T03:20:26.877
> 
> 标签：mysql

我正在使用以下查询来更新列但无法更新。

```
update table1
 set month_0val = (select v1.sumvalue 
 from ( select r1.reg_id, sum(backbook.bal) as sumvalue
 from  table2 backbook , table3 s , table4 r1
 where month(backbook.Date_AsOf) = month(s.MONTH_AS_OF - INTERVAL 12 MONTH) and year(backbook.Date_AsOf) =  year(s.MONTH_AS_OF - INTERVAL 12 MONTH)  and  backbook.a_region_id = r1.region_code
 and r1.org_id = org_id and  backbook.A_ProdType_Code != 25  and s.SC_ID = sc_id group by backbook.A_Region_ID ) v1
 where v1.reg_id = table1.Region); 
```

甚至内部查询也会返回结果。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:37:31.620

```
UPDATE table1, ( 
            select r1.reg_id, sum(backbook.bal) as sumvalue
            from  table2 backbook , table3 s , table4 r1
            where month(backbook.Date_AsOf) = month(s.MONTH_AS_OF - INTERVAL 12 MONTH) 
              and year(backbook.Date_AsOf) =  year(s.MONTH_AS_OF - INTERVAL 12 MONTH)  
              and  backbook.a_region_id = r1.region_code
              and r1.org_id = org_id 
              and  backbook.A_ProdType_Code != 25  
              and s.SC_ID = sc_id 
            group by backbook.A_Region_ID 
            ) v1
SET table1.month_0val = v1.sumvalue
WHERE v1.reg_id = table1.Region; 
```

# asp.net-mvc - 在 asp.net-mvc 中，是否有充分的理由将您的模型保留在同一个项目中？

> ID：11661867
> 
> 赞同：0
> 
> 时间：2012-07-26T03:20:48.123
> 
> 标签：asp.net-mvc, model-view-controller, model

我有一个 asp.net-mvc 站点，最近我想生成与我用来呈现到网页的数据相同的电子邮件。如此缓慢但肯定地我开始将我的许多模型和数据访问代码移动到一个单独的项目中，这样我就可以从命令行应用程序或服务等（不依赖于任何 Web 内容）进行电子邮件生成。. 如果我更进一步，我现在想我应该将我所有的模型和数据访问代码移到 MVC 项目之外，这样它就有了更多的未来证明。我知道 MVC 为您提供了 Web 项目中的默认模型文件夹。有什么理由把它放在那里吗？

我基本上想保护自己免于在我的模型或数据访问代码中意外依赖 System.Web.MVC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:27:05.277

由于只需要构建一个项目，因此开发速度更快一些，但我发现最好将模型和数据访问代码保留在同一解决方案中的单独项目中。最大的优点是它可以非常容易地使用其他项目的模型，例如 API 或其他网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:29:31.277

如果开始将模型提取到单独的项目中是有意义的，那么您应该这样做。我通常发现我从 MyProject.Core 和 MyProject.Web 开始，因为您有时希望与非前端类型的工作共享您的模型。

MyProject.Core 将包含模型和我的持久层，我的 Web 项目将包含 FrontEnd 对象及其视图模型，我使用 Automapper 将其绑定到我的模型。

# javascript - FancyBox 和自定义工具提示一起不起作用

> ID：11661868
> 
> 赞同：0
> 
> 时间：2012-07-26T03:20:48.737
> 
> 标签：javascript, jquery, fancybox

我正在同时使用 FancyBox 和一个非常简单的 jQuery 工具提示，如果尚未单击图像，则工具提示用于在页面上显示“标题”。如果单击图像，fancybox 将接管标题以在“内部”显示标题标签。单击图像后，标题不会显示，但工具提示是可以的。有没有可能让他们一起工作？

这是用于工具提示的 jQuery：

```
$(document).ready(function(){
    tooltip();
});

this.tooltip = function(){  
    $("a.tooltip").hover(function(e){                                             
        this.t = this.title;
        this.title = "";                                      
        $("body").append("<p id='tooltip'>"+ this.t +"</p>");
        $("#tooltip").fadeIn("fast");       
    },
    function(){
        this.title = this.t;        
        $("#tooltip").remove();
    }); 
    $("a.tooltip").mousemove(function(e){
        $("#tooltip")

    });         
}; 
```

这是我的 FancyBox 代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("a#example8").fancybox({
            'titlePosition': 'over'
        });
    });
</script> 
```

这是 HTML 代码：

```
<a id="example8" class="tooltip" href="./example/8_b.jpg" title="Sed vel sapien vel sem tempus placerat eu ut tortor. Nulla facilisi. Sed adipiscing, turpis ut cursus molestie, sem eros viverra mauris, quis sollicitudin sapien enim nec est. ras pulvinar placerat diam eu consectetur.">
    <img class="last" alt="example7" src="./example/8_s.jpg" />
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:20:38.620

在您的 javascript 之上声明一个全局变量，例如

```
var thisTitle; 
```

然后使用该变量`title`在您的工具提示脚本中克隆（而不是`this.t`），例如

```
this.tooltip = function(){  
    $("a.tooltip").hover(function(e){                                             
        thisTitle = this.title;
        this.title = "";                                      
        $("body").append("<p id='tooltip'>"+ thisTitle +"</p>");
        $("#tooltip").fadeIn("fast");       
    },
    function(){
        this.title = thisTitle;        
        $("#tooltip").remove();
    }); 
    $("a.tooltip").mousemove(function(e){
        $("#tooltip")

    });         
} 
```

在您的 fancybox 自定义脚本中，使用`titleFormat`API 选项`title`从`thisTitle`变量中提取

```
$("a#example8").fancybox({
   "titlePosition": 'over',
   "titleFormat"  : function(){
      return '<span id="fancybox-title-over">'+thisTitle+'</span>'
    }
}); 
```

全部一起？

```
<script type="text/javascript">
var thisTitle;
$(document).ready(function(){
 tooltip();
 $("a#example8").fancybox({
   "titlePosition": "over",
   "titleFormat": function(){
      return '<span id="fancybox-title-over">'+thisTitle+'</span>'
    }
 }); // fancybox
}); // ready

this.tooltip = function(){  
    $("a.tooltip").hover(function(e){                                             
        thisTitle = this.title;
        this.title = "";                                      
        $("body").append("<p id='tooltip'>"+ thisTitle +"</p>");
        $("#tooltip").fadeIn("fast");       
    },
    function(){
        this.title = thisTitle;        
        $("#tooltip").remove();
    }); 
    $("a.tooltip").mousemove(function(e){
        $("#tooltip")
    });         
}
</script> 
```

# android - 保存图像 android sqlite

> ID：11661870
> 
> 赞同：0
> 
> 时间：2012-07-26T03:20:57.310
> 
> 标签：android, database, image

我需要有关为 android 应用程序创建数据库的帮助。我正在做的应用程序允许用户捕获图像并将其保存在数据库中。我不确定如何将图像保存到数据库中。我应该使用什么数据类型？以及代码应该是什么样子。我知道为了创建一个 android 数据库，我应该首先创建一个定义所有 getter 和 setter 方法的类，然后创建一个数据库处理程序类。我在哪里定义图像的数据类型？我对android开发很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:36:51.883

只需将图像存储在 sdcard 中，并将这些图像的相关路径保存在 SQLite 数据库中。

根据您的需要，将图像放在可绘制文件夹或资产文件夹中，然后将其名称（还带有问题 ID 或编号）存储在 SQLite 中并在应用程序中使用。

例如。将一张名为 question1 的图像保存在可绘制文件夹中，现在您从 sqlite 数据库中获取问题 1 的数据，如果问题为 1，则从光标的索引中获取数据，然后设置，例如：ImageView image = (ImageView) findViewById(R.id.test_image); image.setImageResource(R.drawable.question1)

# android - ListView onItemClick 混淆

> ID：11661875
> 
> 赞同：0
> 
> 时间：2012-07-26T03:21:26.753
> 
> 标签：android, listview, adapter, android-arrayadapter, onitemclick

我一直在尝试解决这个问题，但在网上找不到任何帮助。基本上我只需要为这些项目设置一个 onItemClickListener。他们所要做的就是开始一项新活动的新意图。

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MyAppActivity extends Activity {
/** Called when the activity is first created. */
private ListView list1;
private String Cats[] = { "Hardware", "Commands", "Libraries","Tutorials", "Arduino License"};
/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    list1 = (ListView) findViewById(R.id.ListView01);
    // By using setAdpater method in listview we an add string array in
    // list.
    ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, Cats);
    list1.setAdapter(adapter);
    }
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:27:08.360

在字符串 list[] 中，输入您希望出现在列表中的类的名称：

```
public class Menu extends ListActivity{

String list[] = {"(names of classes)"};

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(Menu.this, android.R.layout.simple_list_item_1,list));
}

protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    try{
    String classlist = list[position];
    Class myclass = Class.forName("(project name)" + classlist);
    Intent intent = new Intent(Menu.this,myclass);
    startActivity(intent);
    }catch(ClassNotFoundException e){
        e.printStackTrace();
    }
} 
```

}

# haskell - haskell enum - 如果值构造函数需要值而不是空值，该怎么办？给出了需求场景

> ID：11661878
> 
> 赞同：3
> 
> 时间：2012-07-26T03:21:38.077
> 
> 标签：haskell, enums, derived-types, derived-instances

[LYAH](http://learnyouahaskell.com/chapters)在[派生实例](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#derived-instances)上说

> [...] 所有的值构造函数都是空的（不带参数，即字段），我们可以将其作为 Enum 类型类的一部分。
> 
> ```
> data Day = Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday
> deriving (Eq, Ord, Show, Read, Bounded, Enum) 
> ```

现在，如果我需要几个月，那将是

> ```
> data month = January | February | March | April | May | June | July | August |September | October | November |December     
> deriving (Eq, Ord, Show, Read, Bounded, Enum) 
> ```

我的问题是：

1.  每个月在哪里存储 Max Days 值？
2.  如果是闰年，如何提及和控制二月份的月份，那么二月份的 maxDays 是 29 天，否则它将是 28 天？

在 Java 中，可以编写如下代码：

```
public enum Month {  
    January (31),  
    February (29),  
    March (31),  
    April (30),  
    May (31),  
    June (30),  
    July (31),  
    August (31),  
    September (30),           
    October (31),  
    November (30),  
    December (31),  
    ;  
    private int maxDays; // instance variables  
    private (int maxDays) { // constructors always private  
           this.maxDays = maxDays;  
    }  
    Public int getMaxDays () {  
       return maxDays;  
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T04:03:43.940

这应该有效。

```
data Month = January | February | March | April | May
           | June | July | August |September | October
           | November | December
           deriving (Eq, Ord, Show, Read, Bounded, Enum)

type Year = Int

isLeapYear :: Year -> Bool
isLeapYear year = year `mod` 4 == 0 && (year `mod` 100 /= 0 || year `mod` 400 == 0)

getMaxDays :: Year -> Month -> Int
getMaxDays _ January = 31

getMaxDays year February
    | isLeapYear year = 29
    | otherwise = 28

getMaxDays _ March = 31
getMaxDays _ April = 30
getMaxDays _ May = 31
getMaxDays _ June = 30
getMaxDays _ July = 31
getMaxDays _ August = 31
getMaxDays _ September = 30
getMaxDays _ October = 31
getMaxDays _ November = 30
getMaxDays _ December = 31 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T06:40:23.990

为什么你需要`Month`成为一个枚举？在我看来，您试图在代码中强制使用 OO 样式，这不是一个好主意。Java 面向对象的代码编写风格并不能清晰地转换为 Haskell 等函数式语言。

在 OO 中，您会将数据结构和对该数据的所有关联操作捆绑在一个类中，而在 FP 中，您将与关联操作分开定义数据结构。这意味着 FP 方法可以更轻松地定义对数据的新操作，而 OO 方法可以更轻松地将新信息添加到数据结构中。就个人而言，我发现自己定义新操作比添加新字段和 FP 风格套装要多得多。

与 Haskell 中的 Java 示例最接近的类似物是定义一个 Typeclass -

```
data Month = January | February | March | April
           | May | June | July | August |September
           | October | November |December
  deriving (Eq, Ord, Show, Read, Bounded, Enum)

data Year = Int

class HasDays X where
  maxdays :: X -> Int
  days    :: X -> Year -> Int
  -- Any other "methods" here

instance HasDays Month where
  maxdays January = 31
  maxdays February = 29
  maxdays .. = .. -- Similar code for other months

  days February y = .. -- Leap year calculation
  days m _ = maxdays m 
```

# php - 在php中为url编码汉字

> ID：11661881
> 
> 赞同：3
> 
> 时间：2012-07-26T03:21:56.817
> 
> 标签：php, encoding, utf-8, decoding

所以我有一堆网址，其中一些有中文字符，如下所示： `http://www.abcdefg.com/ad2/zh/profile/2169358/1/冰绿茶/`

但是，我需要处理所有这些 url，并将带有中文字符的 url 编码成如下内容： `http://www.abcdefg.com/ad2/zh/profile/2169358/1/%E4%BA%8C%E4%B8%8D%E4%BA%8C%E7%9A%84%E4%BA%8C/`

所以中文部分必须用php编码。

我尝试使用`urlencode`，`rawurlencode`但没有奏效。

任何帮助将不胜感激！

注意：编码的 url 是为了存储而不是由浏览器显示，因此更改标题不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:43:22.960

对于这种情况，您可能希望使用[`parse_url()`](http://php.net/manual/en/function.parse-url.php)来分隔 URL 组件并且仅`urlencode()`使用`path`和`query`组件。

```
$url = 'http://www.abcdefg.com/ad2/zh/profile/2169358/1/冰绿茶/';
$parsed = parse_url($url);

print_r($parsed); 
```

你会得到

```
Array
(
    [scheme] => http
    [host] => www.abcdefg.com
    [path] => /ad2/zh/profile/2169358/1/冰绿茶
) 
```

所以，`urlencode()` `path`和`query`（如果有的话）。

一旦这些是 URL 编码的，您将需要重新组合以使`scheme`(http)、`host`(www.abcdefg.com) 不受影响。

如果你还是喜欢`/`原封不动`explode()`的，`path`先在 URLencoding 之前吧。

```
$pathComponents = explode('/', $parsed['path']);

$pathComponents = array_map('urlencode', $pathComponents);

// Assemble back $path
$path = implode('/', $pathComponents); 
```

# c# - 从 c#.net 写入制表符分隔的 txt 文件

> ID：11661884
> 
> 赞同：6
> 
> 时间：2012-07-26T03:22:42.893
> 
> 标签：c#, asp.net

我在将制表符分隔的字符串写入 txt 文件时遇到问题。

```
//This is the result I want:    
First line. Second line.    nThird line.

//But I'm getting this:
First line./tSecond line./tThird line. 
```

下面是我的代码，我在其中传递要写入 txt 文件的字符串：

```
string word1 = "FirstLine.";
string word2 = "SecondLine.";
string word3 = "ThirdLine.";
string line = word1 + "/t" + word2 + "/t" + word3;

System.IO.StreamWriter file = new System.IO.StreamWriter(fileName, true);
file.WriteLine(line);

file.Close(); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T03:28:04.263

用于`\t`制表符。使用`String.Format`可能会提供一个更具可读性的选项：

```
line = string.Format("{0}\t{1}\t{2}", word1, word2, word3); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T03:25:54.163

要编写制表符，您需要使用`"\t"`. 这是一个反斜杠（在回车键上方），而不是一个正斜杠。

所以你的代码应该是：

```
string line = word1 + "\t" + word2 + "\t" + word3; 
```

对于它的价值，这里有一个常见的“转义序列”列表，例如`"\t" = TAB`：

*   [转义序列](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:23:27.627

`\t`不用于`/t`字符串中的制表符。所以你的字符串`line`应该是：

```
string line = word1 + "\t" + word2 + "\t" + word3; 
```

如果你这样做：

```
Console.WriteLine(line); 
```

输出将是：

```
FirstLine.      SecondLine.     ThirdLine. 
```

# javascript - 在子字符串前后插入一个元素

> ID：11661889
> 
> 赞同：1
> 
> 时间：2012-07-26T03:23:44.460
> 
> 标签：javascript, jquery

您将如何使用正则表达式或 javascript/jQuery 中的替代形式在元素之间插入子字符串？

例如我有以下字符串：

> `This is a string 015 with numbers 1486453 randomly 10 inserted between words 0954`

如果我的正则表达式要查找所有数字，则结果如下：

> `This is a string <span>015</span> with numbers <span>1486453</span> randomly <span>10</span> inserted between words <span>0954</span>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T03:28:06.503

```
var testStr = 'This is a string 015 with numbers 1486453 randomly 10 inserted between words 0954';    
var result = testStr.replace(/(\d+)/gi, '<span>$1</span>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:38:41.843

```
var str = $el.text();
$el.html(str.replace(/\d+/g, "<span>$&</span>")); 
```

如果您的元素已经包含 html 节点，它会变得更加复杂。您需要构建一个 DOM 迭代器 - 请参阅[此答案](https://stackoverflow.com/a/10416898/1048572)。

# c# - 树视图过滤器

> ID：11661892
> 
> 赞同：0
> 
> 时间：2012-07-26T03:24:03.147
> 
> 标签：c#, treeview, remoting

好吧，由于我在这台机器上没有代码，我会尽量清楚地解释我必须做什么，并希望能得到一些帮助。好吧，我正在做一个远程分页（使用远程处理）并显示我正在使用树视图的文件，但首先我开发了这个树视图来简化我的过滤工作： [PatternComposite](http://www.dofactory.com/Patterns/PatternComposite.aspx#_self2)

好吧，我需要的是，我有一个带有扩展名的组合框，当用户在值之间进行选择时，必须更新树，只显示具有所选扩展名的文件。

我该怎么做？

编辑：

在尝试了很多之后，我能够通过使用 searchPattern 重新填充树视图来进行过滤，但我现在不能做的是在重新填充之前保存展开的节点。假设我有这棵树：

- C：

```
++ ProgramFiles
   -- Dell
-- EA
++ Google
   -- Dll
-- Whatever 
```

其中 ++ 是扩展节点。重新填充后如何拥有相同的结构（如上所示的扩展节点）？我是否必须进行递归扩展节点？

再次感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:30:45.997

现在更清楚了。我认为您假设重新填充之前的所有节点都在此之后保留，但这并不总是正确的。您可以在重新填充之前将节点键及其当前状态保存在某处，然后再检查它们并为保留在树中的节点设置先前的状态。另一种选择是根本不重新填充，而是将所有节点放入树中并隐藏那些不适合过滤器的节点。

# c# - 将组合框绑定到 wpf 中的另一个组合框

> ID：11661894
> 
> 赞同：8
> 
> 时间：2012-07-26T03:24:09.897
> 
> 标签：c#, html, wpf, binding

我在 wpf 中有两个组合框，其中一个组合框如下所示：

```
 <ComboBox Height="23" HorizontalAlignment="Left" Margin="244,10,0,0" Name="comboBox2" VerticalAlignment="Top" Width="120">
                <ComboBoxItem Content="Peugeut" />
                <ComboBoxItem Content="Ford" />
                <ComboBoxItem Content="BMW" />
            </ComboBox> 
```

我想知道如何将第二个组合框 2 绑定到组合框 1 中所选项目的特定汽车制造商列表。

如果选择了 Peurgeut，那么在组合框二中应该有一个列表：

```
106
206
306 
```

或者如果选择了宝马，那么

```
4 series
5 series 
```

等等

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T03:44:41.320

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50"/>
        <RowDefinition Height="50"/>
    </Grid.RowDefinitions>

    <ComboBox Height="23" ItemsSource="{Binding Cars}" DisplayMemberPath="Name" HorizontalAlignment="Left" Margin="244,10,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120"/>
    <ComboBox Height="23" Grid.Row="1" ItemsSource="{Binding SelectedItem.Series, ElementName=comboBox1}" HorizontalAlignment="Left" Margin="244,10,0,0" Name="comboBox2" VerticalAlignment="Top" Width="120"/>

</Grid>

    public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Cars = new ObservableCollection<Car>();
        Cars.Add(new Car() { Name = "Peugeut", Series = new ObservableCollection<string>() { "106", "206", "306" } });
        Cars.Add(new Car() { Name = "Ford", Series = new ObservableCollection<string>() { "406", "506", "606" } });
        Cars.Add(new Car() { Name = "BMW", Series = new ObservableCollection<string>() { "706", "806", "906" } });
        DataContext = this;

    }

    public ObservableCollection<Car> Cars { get; set; }

}
public class Car
{
    public string Name { get; set; }
    public ObservableCollection<string> Series { get; set; }
} 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:36:56.550

除非您查找数据，否则我认为仅使用 XAML 是无法做到的。但是，如果您创建了一个类来绑定您的组合框，您可以创建一个类，例如：

```
public class CarMake
{
    public string Make {get; set;}
    public List<string> Models {get; set;}
} 
```

然后在您的第一个组合框中，只需绑定到填充信息的 List 实例，然后绑定第二个组合框，如：

```
<ComboBox ItemsSource="{Binding ElementName=FirstComboBox, Path=SelectedItem.Models}" ></ComboBox> 
```

那应该让你去...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T03:33:37.350

当用户选择 ComboBox1 项目时，尝试以编程方式在 box2 中添加项目。

```
 if (combobox1.SelectedText == "Peurgeut")
        {
            box2.Items.Add("106");
            box2.Items.Add("206");
            box2.Items.Add("306");
        } 
```

# url - GWT：如何在新窗口中打开一个地方

> ID：11661896
> 
> 赞同：0
> 
> 时间：2012-07-26T03:24:41.573
> 
> 标签：url, gwt

我想在新的浏览器窗口中打开一个地方。我想我可以用 Window.open 和“_blank”打开 URL。如果是这样，我如何从我创建的地方获取可以使用的 URL？我不想打开当前位置，而是创建 Place 对象，并使用它来确定 URL。我没有看到从 Place 到可用 URL 的映射。我想我需要使用其他方法来构建 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:04:36.943

只需使用您的`PlaceHistoryMapper`, 以及`Window.Location`, 来构建最终 URL。

# ruby-on-rails - 在 Rails 中创建自定义 URL

> ID：11661897
> 
> 赞同：0
> 
> 时间：2012-07-26T03:24:44.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我有 4 个模型。`Departments`, `Courses`, `Sections`, 和`Teacher` 所有这些都与真`belongs_to`和关系有层次`has_many`关系。一个部分属于一个课程，属于一个部门。一个老师有很多部分，但是，一门课程有很多（由许多不同的老师教授）。

我想以这样一种方式构建站点，即 URL `/view/department_name/course_name/section_name/`显示具有名称的部分，该部分`section_name`属于课程名称`couse_name`，属于部门`department_name`。

但是，我也想以`/view/teacher_name/course_name/section_name`同样的方式工作，它显示与该教师相关的所有部分。

我怎样才能做到这一点？

仅供参考：不同的模型通过它们在数据库中的 ID 连接。Section 有一个 course_id 整数与之关联， course 有一个 department_id 整数。Section也有一个department_id，这是多余的，但这就是我设置它的方式。

我的路线.rb

```
Test2::Application.routes.draw do
  resources :courses
  resources :departments
  resources :teachers
  resources :sections
  resources :courses 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T05:18:21.457

`section_name`您在路线中提到了类似的事情。您应该确保所有名称都是 URL 安全的。

您必须考虑的另一点是您想要的两条路径实际上非常相似，因此您可能需要在同一个控制器操作中处理这两条路径。

```
/view/department_name/course_name/section_name
/view/teacher_name/course_name/section_name 
```

唯一不同的部分是部门名称与教师名称。希望没有和你们系同名的老师XD"

您可以将路径定义为：

```
get '/view/:department_or_teacher_name/:course_name/:section_name' => 'some_controller#some_action' 
```

然后在你的行动中，你需要这样的东西：

```
def some_action
  department_or_teacher = Department.find_by_name(params[:department_or_teacher_name]) || Teacher.find_by_name(params[:department_or_teacher_name])
  course = Course.find_by_name(params[:course_name])

  q = Section.where(name: params[:section_name]).where(course_id: course.id)
  if department_or_teacher.class.name == "Department"
    q = q.where(department_id: q.id)
  elsif department_or_teacher.class.name == "Teacher"
    q = q.where(teacher_id: q.id)
  end

  @section = q.first # I assume there should be only 1 section with a given name, under a specific course, and (under a specific department or a specific teacher)
end 
```

上面生成了 3 个查询，这可能不是很好。您可以考虑使用连接：

```
def some_action
  department_or_teacher = Department.find_by_name(params[:department_or_teacher_name]) || Teacher.find_by_name(params[:department_or_teacher_name])

  q = Section.where(name: params[:section_name]).joins(:course).where("courses.name = ?", params[:course_name])

  if department_or_teacher.class.name == "Department"
    q = q.where(department_id: q.id)
  elsif department_or_teacher.class.name == "Teacher"
    q = q.where(teacher_id: q.id)
  end

  @section = q.first
end 
```

猜测部门或老师仍然有困难。因此，如果您重新定义这样的路径，上面的内容可能会更清晰：

```
get '/view/department/:department_name/:course_name/:section_name' => 'some_controller#some_action_for_department'
get '/view/teacher/:teacher_name/:course_name/:section_name' => 'some_controller#some_action_for_teacher'

def some_action_for_department
  @section = Section.where(name: params[:section_name])
                    .joins(:course).where("courses.name = ?", params[:course_name])
                    .joins(:department).where("departments.name = ?", params[:department_name]) # you mentioned there is a department_id in sections, thus you could actually setup a belongs_to :department in section
                    .first
end

def some_action_for_teacher
  @section = Section.where(name: params[:section_name])
                    .joins(:course).where("courses.name = ?", params[:course_name])
                    .joins(:teacher).where("teachers.name = ?", params[:teacher_name])
                    .first
end 
```

这就是想法。我没有测试它，只是猜测。因此，如果您遇到任何问题，请告诉我。

# mercurial - Mercurial - 在不知道名字的情况下拉出所有远程书签？

> ID：11661904
> 
> 赞同：4
> 
> 时间：2012-07-26T03:25:28.403
> 
> 标签：mercurial

Mercurial 中是否有一个选项可以让我提取所有远程书签而无需提前知道它们的名字？

在[Mercurial Bookmarks 页面上](http://mercurial.selenic.com/wiki/Bookmarks/)，它提到当我*克隆*一个存储库时，我会得到所有的书签。

但是，我的情况是我已经有了存储库，创建了几个头，每个头都有一个书签来解释它们是什么，然后将所有（包括书签）推送到服务器。

当 Bob 拉出我的更改时，他将得到我创建的所有悬垂的头，并且可能很难判断他打算在哪一个上工作。

无论如何，如果他会因为我的更改而受到很多困扰，我希望他至少能够获得与他们一起使用的书签，这样他就更清楚发生了什么！（通常我的默认分支是我的开发分支，它有一个“开发”书签和许多其他“功能”书签 - 我不希望这些作为分支，因为它们不会持续很长时间 - 我希望 Bob 能够知道哪个头对应于他想要工作的内容）。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T12:30:02.623

`hg incoming -B`向您显示远程书签。

在 hg 2.3 中，您应该自动获取所有远程书签。

> *   书签：默认从远程拉取新书签

→ [http://mercurial-scm.org/wiki/WhatsNew#Mercurial_2.3_.282012-08-01.29](http://mercurial-scm.org/wiki/WhatsNew#Mercurial_2.3_.282012-08-01.29)

# android - Android：点击偏好按钮？

> ID：11661926
> 
> 赞同：5
> 
> 时间：2012-07-26T03:28:06.947
> 
> 标签：android, button, dialog, sharedpreferences, preferences

我有一个带有复选框列表首选项等的共享首选项屏幕。现在我想在共享首选项屏幕中添加一个按钮，当我单击它时会弹出一个对话框。我这样做了，在首选项屏幕上制作按钮看起来很完美：

```
<Preference
        android:key="key"
        android:summary="make pop up dialog"
        android:title="dialog" /> 
```

但是现在我不知道如何在点击它时得到它我尝试过并且我不能使用 onSharedPreferenceChanged 因为没有改变它只是点击它的首选项。那么当点击偏好按钮时我会怎么做呢？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T22:58:04.713

首先，您`PreferenceActivity`必须实施`Preference.OnPreferenceClickListener`. 然后，在`onCreate`函数调用下

`findPreference(YOUR_KEY_PREF).setOnPreferenceClickListener(this);`

并添加此功能

```
@Override
public boolean onPreferenceClick(Preference preference) {
    String key = preference.getKey();
    if(key.equals(YOUR_KEY_PREF)){
        showYourDialog();
        return true;
    }
    return false;
} 
```

在你的情况下，`YOUR_KEY_PREF`是`"key"`

# php - PHP 中的 OLE_COLOR 转换

> ID：11661929
> 
> 赞同：0
> 
> 时间：2012-07-26T03:28:36.883
> 
> 标签：php, vb.net

我正在用 PHP 编写一个脚本，需要调用一个将 OLE_COLOR 作为参数的方法。到目前为止，我已经尝试了所有我能想到的以及其他人提出的建议，我能得到的最好的结果是类型不匹配错误。这些是来自 API 提供者的各种语言的数据类型说明：

> C++: static_cast(RGB(0, 0, 255))
> 
> VB6: RGB(0, 0, 255)
> 
> VB.NET：Convert.ToUInt32(System.Drawing.ColorTranslator.ToOle(Color.FromArgb(0, 0, 255))
> 
> C#: (uint)System.Drawing.ColorTranslator.ToOle(Color.FromArgb(0, 0, 255))
> 
> 其他：32 位整数值，格式如下：0x00bbggrr（BGR 格式，非 RGB）

方法原型为：

```
Sub AddHyperlink(InputFileName As String,
                 OutputFileName As String,
                 From As Long,
                 To As Long,
                 Left As Double,
                 Top As Double,
                 Right As Double,
                 Bottom As Double,
                 Url As String,
                 Style As prcAnnotBorderStyle,
                 Color As OLE_COLOR) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:41:43.813

`OLE_COLOR`在 Windows 中是 0x00bbggrr 格式的整数。这意味着`color = red + 256 * green + 65536 * blue`，其中每个分量都在 0-255 的范围内。0x000000ff 是纯红色，0x0000ff00 是纯绿色，0x00ff0000 是纯蓝色。

# html - CSS中的弯曲菜单

> ID：11661942
> 
> 赞同：7
> 
> 时间：2012-07-26T03:30:32.137
> 
> 标签：html, css

设计师给了我一个需要我开发的文件。他们要我做一个弯曲/拱形的菜单：

![在此处输入图像描述](../Images/5c8a2f70443e63232ea9f3154d84d802.png)

这可以创建吗？我以前从未遇到过这样的事情，并且对处理这个问题感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T03:35:24.803

你也许可以用`canvas`. 有关示例，请参阅[Is there a way to curve / arc text using CSS3 / Canvas](https://stackoverflow.com/questions/2840862/is-there-a-way-to-curve-arc-text-using-css3-canvas)的答案。请注意，`canvas`IE8 和更早版本不支持它，但在现代浏览器中得到了广泛的支持。

您可能还想查看有关[绘制正弦波`canvas`](http://www.johnpezzetti.com/2011/01/25/html5-canvas-tutorial-creating-a-2-dimensional-wave)的本教程，因为图像中的菜单有点正弦波形状。

不过，对于这样的事情，这是很多工作。相反，您可以将其制作为大图像并使用`map`元素来制作图像映射。

你也可以用一系列小图像来构建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T03:35:05.197

您可以使用 CSS3 的`rotation`属性查看示例：

[https://www.google.com/search?q=css+rotate](https://www.google.com/search?q=css+rotate)

[https://www.google.com/search?q=css+rotate+menu](https://www.google.com/search?q=css+rotate+menu)

[http://snook.ca/archives/html_and_css/css-text-rotation](http://snook.ca/archives/html_and_css/css-text-rotation)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-26T03:34:27.053

这根本不可能使用 CSS。它必须使用切片图像创建或在闪存中完成。

# android - Android Mediaplayer 调节音量

> ID：11661943
> 
> 赞同：2
> 
> 时间：2012-07-26T03:30:34.307
> 
> 标签：android, media-player, volume, silent

任何人都知道如何通过单击手机侧面的音量按钮来增加/减少媒体播放器的音量？如果手机设置为静音模式，我该如何静音？

我正在使用的代码：

```
mp = MediaPlayer.create(this, R.raw.sound);
mp.start(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T04:49:53.970

我想这是你可能感兴趣的：

> 1、增大/减小声音的音量： [Link Here](https://stackoverflow.com/questions/6742174/controlling-volume-in-mediaplayer)

基本上`Override`是`onKeyDown`然后调用`mp.setVolumn(float leftVolume,float rightVolume);`

> 2、如果手机设置为静音模式则静音

```
AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

switch (am.getRingerMode()) {
    case AudioManager.RINGER_MODE_SILENT:
        mp.setVolume(0,0);
        break;
｝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T14:48:21.873

另一种方法是在您的 mediaPlayer 中设置

```
mp.setAudioStreamType(AudioManager.STREAM_RING); 
```

# django - 301 重定向 django redirect_to 多个重定向

> ID：11661944
> 
> 赞同：0
> 
> 时间：2012-07-26T03:30:35.457
> 
> 标签：django, redirect

我回来征求意见。我有一个需要 SEO 帮助的网站，并被要求投放 301 重定向广告。这个站点是我收集的从 php 到 django 的转换。现在我得到了一个大约 700 个 URL 的 csv，基本上都是

[http://www.rhodeislandrow.com/floor-plans/search/?sort=price_desc&floor=---&max_price=1304&min_price=0&csrfmiddlewaretoken=3688d94aa3454e592f016d032a126328&availability=1322629596](http://www.rhodeislandrow.com/floor-plans/search/?sort=price_desc&floor=---&max_price=1304&min_price=0&csrfmiddlewaretoken=3688d94aa3454e592f016d032a126328&availability=1322629596)

好吧，我在研究后决定我需要做一个 from django.views.generic.simple import redirect_来解决。但是玩这个，它不起作用。任何人都可以帮助我指导使用什么吗？我在这里阅读了文档：

[https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponsePermanentRedirect](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponsePermanentRedirect)

这是我的网址：

```
from django.conf.urls.defaults import patterns, include, url
from django.contrib import admin
from django.views.generic.simple import direct_to_template
from django.views.generic.simple import redirect_to
from main.sitemaps import sitemaps
from main.views import *
admin.autodiscover()

urlpatterns = patterns('',
    # Redirects from old site
    (r'^floor-plans/search/$', redirect_to, {'url': 'http://www.rhodeislandrow.com/floor-plans/'}),

    url(r'^admin/', include(admin.site.urls)),
    url(r'^subscribe/$', SubscribeView, name='subscribe'),
    url(r'^vaultware-template/$', VaultwareTemplateView.as_view()),

    url(r'^', include('stateful.urls')),
    url(r'^', include('cms.urls')),
    (r'^sitemap\.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': sitemaps}),
    (r'^robots.txt$', include('robots.urls')),
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:51:42.927

我想到了。因为我的 URL 没有以 /search/ 结尾，所以我需要添加通配符

```
(r'^floor-plans/search/.*$', redirect_to, {'url': 'http://www.rhodeislandrow.com/floor-plans/'}), 
```

感谢您的回复，我将在未来的项目中使用**重定向应用程序。**

# textmate - 在 Textmate 中，如何为文件夹永久“添加现有文件..”？

> ID：11661945
> 
> 赞同：0
> 
> 时间：2012-07-26T03:30:38.627
> 
> 标签：textmate

我在 Textmate 中重命名了一个文件夹，然后它开始从抽屉和搜索索引中消失。所以我会“添加现有文件..”它会回来，但过了一会儿又自发地消失了。我重新安装了 Textmate，在 Finder 中重新创建了文件夹，重新命名了文件夹，添加了一个新文件夹，然后重命名了它，但到目前为止没有任何效果。不知何故，TM 知道现在不要添加具有该名称的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:34:08.597

您可能希望查看**Textmate Preferences**。转到**高级**选项卡和**文件夹引用**。相应地编辑**文件模式**和/或**文件夹模式**，以确保您希望显示的文件/文件夹不会被忽略。

如需更多帮助，您可以参考[2.1.2 过滤不需要的文件](http://manual.macromates.com/en/working_with_multiple_files)下的 TextMaate 手册。

# css - 如何在像 Google Plus Photos 一样悬停时显示 3Photos 可见

> ID：11661950
> 
> 赞同：1
> 
> 时间：2012-07-26T03:31:05.773
> 
> 标签：css

当我们将鼠标悬停在 google plus 相册上时，我们将并排看到 3 张图片，这也适用于 ie 8，尽管 ie 8 不支持 css3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:40:00.860

这是一个演示链接，可以帮助您：

[http://youhack.me/2011/07/15/google-plus-photo-stack-animation-using-jquery-and-css3/](http://youhack.me/2011/07/15/google-plus-photo-stack-animation-using-jquery-and-css3/)

# python - 如何根据 xrange() 的输出添加值？

> ID：11661954
> 
> 赞同：2
> 
> 时间：2012-07-26T03:31:15.723
> 
> 标签：python

我不确定我是否正确地用了标题，但我想做的是找到 xrange() 正在传递的值的总和。

**理想情况下，**它看起来像这样：（注意，这不是工作代码）

```
mofthree = xrange(2, 1000, 3)
moffive = xrange(4, 996, 5)

print mofthree + moffive 
```

但是，当然，您不能将两个函数加在一起。我也可以做一些事情，例如将所有值添加`mofthree`在一起，将结果存储在一个新变量中，然后对两个新变量做同样的事情并将`moffive`两个新变量加在一起。

但是，我根本不知道如何将这些值加在一起。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T03:35:20.420

```
mofthree = xrange(2, 1000, 3)
moffive = xrange(4, 996, 5)

print sum(mofthree) + sum(moffive) 
```

或使用 itertools 和[`chain`](http://docs.python.org/library/itertools.html#itertools.chain)

```
from itertools import chain
mofthree = xrange(2, 1000, 3)
moffive = xrange(4, 996, 5)

print sum(chain(moffive, mofthree)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T03:35:03.763

您可以使用[sum()](http://docs.python.org/library/functions.html#sum)：

```
>>> sum(xrange(2, 1000, 3))
166500
>>> sum(xrange(4, 996, 5))
99301 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T01:49:12.923

您可以使用算术级数之和的公式，而不是遍历范围中的每个项目并将它们相加，如下所示：

```
def sum_range(*args):
    # parse the arguments, using the same positional notation as range()
    lo,hi,step = [
        lambda args: (0,       args[0], 1),
        lambda args: (args[0], args[1], 1),
        lambda args: args
    ][len(args)-1](args)

    # make sure we handle negative steps properly
    flip_sign = (step < 0)
    if flip_sign:
        lo,hi,step = -lo,-hi,-step

    # and do the actual calculation
    items = (hi - lo + step - 1) // step
    if items <= 0:
        return 0
    else:
        total = (2*lo + (items-1)*step) * items // 2
        return -total if flip_sign else total 
```

然后你可以像使用它一样

```
print sum_range(2, 1000, 3) + sum_range(4, 996, 5) 
```

出于兴趣，我对 Frédéric Hamidi 的回答进行了比较时间：

![算法运行时图](../Images/eed2ad592d2275a0c0b5c3fde3b2a5b0.png)

其中 x 轴是范围内的项目数，y 轴是运行时间，我的算法是绿色的，他的算法是蓝色的。正如预期的那样，他的算法的运行时间与项目数成正比，而我的算法是恒定的，交点约为 75 个项目。

# android - android：上传图片后返回图库（任何替代“返回”按钮活动的功能？）

> ID：11661956
> 
> 赞同：0
> 
> 时间：2012-07-26T03:31:20.240
> 
> 标签：android, android-intent, android-activity, back

我的应用程序是一个简单的上传器，用于将图像上传到 Web 服务。

用户通过按“共享”-> 我的应用程序进入图库并上传图像。上传后，用户会得到一个空白页面，并且在上传图像后必须按“返回”按钮离开我的应用程序。

但我不希望用户在上传图片后每次都按下返回按钮。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:44:03.693

我自己找到了答案。

`finish();`在上传活动之后添加将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:45:59.187

上传完成后只需键入 onBackPressed() 即可。

# iphone - cgimagesourcecreatewithurl pdf

> ID：11661958
> 
> 赞同：0
> 
> 时间：2012-07-26T03:31:33.963
> 
> 标签：iphone, ipad, ios5, cgpdfdocument

我正在尝试将拇指图像加载到`CGPDFDocument`. `main`我在 class中调用的函数中编写了以下代码`ReaderThumbFetch`。

```
NSURL *thumbURL = [self thumbFileURL]; 

CGImageRef imageRef = NULL;

CGImageSourceRef loadRef = CGImageSourceCreateWithURL((CFURLRef)thumbURL, NULL);

if (loadRef != NULL) // Load the existing thumb image
{
    imageRef = CGImageSourceCreateImageAtIndex(loadRef, 0, NULL); // Load it

    CFRelease(loadRef); // Release CGImageSource reference
} 
```

函数的实现`thumbFileURL`是：

```
- (NSURL *)thumbFileURL
{
#ifdef DEBUGX
NSLog(@"%s", __FUNCTION__);
#endif

NSString *cachePath = [ReaderThumbCache thumbCachePathForGUID:request.guid]; // Thumb cache path

NSString *fileName = [NSString stringWithFormat:@"%@.png", request.thumbName]; // Thumb file name

return [NSURL fileURLWithPath:[cachePath stringByAppendingPathComponent:fileName]]; // File URL
} 
```

但是当我运行它给我以下错误：

```
Undefined symbols for architecture i386:
"_CGImageSourceCreateWithURL", referenced from:
 -[ReaderThumbFetch main] in ReaderThumbFetch.o 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T16:04:59.953

添加框架 ImageIOFramework。在 xcode 中，它是在项目设置选项卡中完成的：构建阶段->将二进制文件与库链接

# haskell - Haskell 中的临时命名空间/上下文

> ID：11661963
> 
> 赞同：16
> 
> 时间：2012-07-26T03:32:19.997
> 
> 标签：haskell, namespaces, dsl

在[Io](http://iolanguage.com)中，您可以使用以下命令设置执行上下文`do`：

```
Http := Object clone
Http get := method(uri, ("<GET request to " .. uri .. ">") println)
Http delete := method(uri, ("<DELETE request to " .. uri .. ">") println)

Database := Object clone
Database insert := method(table, data, ("<insert data to " .. table .. ">") println)
Database delete := method(table, id, ("<delete " .. id .. " from " .. table .. ">") println)

Http do(
  get("http://example.com/")
  delete("http://example.com/something")
)

Database do(
  insert("cats", list("Phil", "gray"))
  delete("cats", 12)
) 
```

[（Ruby 具有与 类似的特性`Object#instance_exec`，但它的对象模型要复杂一些。）]

实际上，这为您提供了一个临时命名空间，非常适合编写特定领域的语言。有没有一种技术可以在 Haskell 中实现类似的效果（临时命名空间）？

例如，类似：（不一定完全像这样，但具有类似简洁语法的东西。）

```
main = do
  http $ do
    get "http://example.com/"
    delete "http://example.com/something"
  database $ do
    insert "cats" ["Phil", "gray"]
    delete "cats" 12 
```

请注意，这两个`delete`s 是完全不同的功能。我宁愿避免写诸如`H.delete`and之类的东西`D.delete`，因为那样会很快变得一团糟。我意识到可以通过将数据库版本重命名为，例如，来避免这种情况`deleteFrom`，但我不想这样做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T05:08:34.530

这是`RecordWildCards`最近在一系列非常有趣的帖子中讨论得很多的方法，例如在[reddit/r/haskell上的这篇文章和在](http://www.reddit.com/r/haskell/comments/wp229/recordwildcards_for_localised_module_imports_what/)[这里](http://www.reddit.com/r/haskell/comments/wte7w/modularprelude_with_firstclass_modules_a_la/)剖析的[“模块化前奏曲”repo](https://github.com/DanBurton/modular-prelude)，最后[在此处](http://www.reddit.com/r/haskell/comments/wtx32/first_class_modules_without_defaults/)讨论了本[教程帖子](http://www.haskellforall.com/2012/07/first-class-modules-without-defaults.html)

在使用该方法的一种方式中，我们需要两个辅助模块（这些只是模仿您想要的）：

```
module HTTP where
import System.Directory

data Http = Http {get :: String -> IO String, delete :: String -> IO ()}

http :: Http
http = Http {get = fmap reverse . readFile, delete = removeFile} 
```

和

```
module DB where
import System.Directory

data DB = Db {get :: String -> IO String, insert :: String -> String -> IO ()}

db :: DB
db = Db readFile appendFile 
```

然后导入它们，`RecordWildCards`用于实现类似于您的计划的内容：

```
{-#LANGUAGE RecordWildCards#-}
import           DB   -- qualified imports might be better
import           HTTP     -- but aren't needed in this case

main =  do 
  let Http{..} = http
  do test <- get "test.txt"
     delete "test2.txt"
     putStrLn $ take 10 test

  let Db{..} = db
  do test3 <- get "test3.txt"
     insert "test4.txt" "happy" 
     putStrLn $ take 10 test3 
     get "test4.txt" >>= putStrLn 
```

这比方法不那么丑陋，但`ImplicitParams`比 Daniel Wagner 的方法更灵活，否则是最帅的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-26T04:09:35.523

“那是疯狂的动态东西。你永远无法用静态语言做到这一点......”

```
{-# LANGUAGE ImplicitParams, Rank2Types #-}
import Text.Printf
http :: (((?get :: String -> IO ()),
          (?delete :: String -> IO ())) 
         => IO a)
        -> IO a
http a = let ?get    = \s -> printf "http get %s\n" s
             ?delete = \s -> printf "http delete %s\n" s
         in a

database :: (((?insert :: String -> [String] -> IO ()),
              (?delete :: String -> Integer -> IO ())) 
               => IO a) 
            -> IO a
database a = let ?insert = \s ls -> printf "database insert %s %s\n" s (show ls)
                 ?delete = \s n  -> printf "database delete %s %d\n" s n
             in a

main = do
  http $ do
    ?get "http://example.com/"
    ?delete "http://example.com/something"
  database $ do
    ?insert "cats" ["Phil", "gray"]
    ?delete "cats" 12 
```

“这太疯狂了。不可能”

```
*Main> :l Crazy.hs 
[1 of 1] Compiling Main             ( Crazy.hs, interpreted )
Ok, modules loaded: Main.
*Main> main
http get http://example.com/
http delete http://example.com/something
database insert cats ["Phil","gray"]
database delete cats 12 
```

您可能实际上不应该以这种方式做事。但如果这真的是你想要的，隐式参数可能是最优雅的获取方式

* * *

applicative 的 RecordWildCard 解决方案在某种意义上比这更好，因为它需要更少的代码来设置，并且涉及的语言扩展要小得多。此外，它非常类似于在具有适当模块系统的语言中使用“open”指令，或在具有灵活名称间距的语言中使用“使用命名空间”命令（Haskell 两者都没有）。隐式参数解决方案捕获类似于动态语言语义的东西。特别是，使用它，您可以调用使用隐式参数的函数，而不必担心手动传递环境。

您还可以在此处使用 ReaderT 或类似的东西模拟隐式参数。虽然（由于各种原因），如果你想留在 Haskell 98 中，那不是很有组合性。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-26T04:38:21.837

只是为了好玩，这里是 Philip JF 的答案的翻译，没有使用任何疯狂的扩展废话。事实上，这很无聊，一旦你弄清楚了如何去做：

```
import Text.Printf

http :: ((String -> IO ()) -> (String -> IO ()) -> IO a)
     -> IO a
http a = a (printf "http get %s\n") (printf "http delete %s\n")

database :: ((String -> [String] -> IO ()) -> (String -> Integer -> IO ()) -> IO a) 
         -> IO a
database a = a (\s -> printf "database insert %s %s\n" s . show)
               (printf "database delete %s %d\n")

main = do
  http $ \get delete -> do
    get "http://example.com/"
    delete "http://example.com/something"
  database $ \insert delete -> do
    insert "cats" ["Phil", "gray"]
    delete "cats" 12 
```

# jquery-mobile - jquerymobile 如何正确刷新单选按钮？

> ID：11661964
> 
> 赞同：0
> 
> 时间：2012-07-26T03:32:44.823
> 
> 标签：jquery-mobile, radio-button

我在javascript中更改了单选按钮的标签并调用了刷新函数。但它永远不会正确刷新。[http://jsfiddle.net/V3qb9/69/](http://jsfiddle.net/V3qb9/69/)

```
$("#radio-choice-d").siblings("label").text("Good");
//$("input[type='radio']:first").attr("checked",true).checkboxradio("refresh");
$('input:[name=radio-choice-b]:radio:checked').checkboxradio("refresh"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:46:25.920

我想通了，应该是

```
$("label[for='radio-choice-d'] span.ui-btn-text").text('new text'); 
```

# google-maps - 谷歌地图导航符号

> ID：11661965
> 
> 赞同：1
> 
> 时间：2012-07-26T03:32:49.780
> 
> 标签：google-maps, navigation

我正在寻找一份详尽的谷歌地图导航标记列表。

为避免混淆，我**不是**在寻找[这个](https://stackoverflow.com/questions/2771891/list-all-google-map-marker-images)。

我正在寻找导航标记的完整列表，例如左转、右转、回旋处、左叉、右叉、微左、微右等。

我知道文本表示会有一些变量，比如 Roundabout **3rd exit**。这可以是**第一个出口**或**第二个出口**等。但我希望从中提取 Roundabout 并将该指令的可变部分放在一边。为此，我需要一个完整的标记列表。

我搜索了很多，但我只能找到像酒吧、高尔夫球场等感兴趣的地方的标记。

提前致谢 ：）

**编辑：**进一步阐明我的要求：Google Maps [API](http://maps.googleapis.com/maps/api/directions/xml?origin=19.178989,72.991127&destination=19.085350,73.017281&sensor=false)包含“html_instructions”标签。我想将图像分配给尽可能多的不同指令。为此，我需要确定一份详尽的驾驶说明清单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T04:39:28.473

如果我正确理解了您的问题，则可以在[此 url](http://maps.gstatic.com/mapfiles/dir/tt3.png)的下图中找到完整列表（以视觉形式） 。我找不到翻译列表，但这无论如何都会是语言无关的。

![方向图标](../Images/bd48ae0dc4e2f2e67afa3e0e1c61ccd1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T04:27:26.473

正如@edb 在他的回答中所建议的那样，文本取决于语言和地区。因为，我不需要在我的项目中处理本地化，所以我编制了一份英文说明列表。可以从@edb 的答案中使用相应的方向符号。

方向命令

*   采取<nth> <left | 对>
*   转<向左| 对> [<在……> | <到……>]
*   退出到<...>
*   从 [...] 出口驶向 <...>
*   在环岛，<继续直行| 走第 <n> 个出口>
*   左转合并到 <...>
*   采取坡道<在<左| 右> 上... | 到……>
*   合并到 <...>
*   保持 <左 | 右>在岔路口[继续朝……]
*   轻微 <左 | 右> [上...]
*   夏普 <左 | 右>在<...>;
*   在 <...> 处掉头；

一些没有关联符号的指令。

*   继续……</li>
*   头<朝着……，向北，向南，……>
*   路过<...>

希望这会有所帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T04:08:55.673

我希望你期待这个[http://mapicons.nicolasmollet.com/](http://mapicons.nicolasmollet.com/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T06:36:03.597

我没有找到任何官方的东西，所以我做了一个快速的 C# 程序来提取关键短语。

输出在[这里：](http://pastie.org/4334852)

我的代码是：

```
static void Main(string[] args)
{
    ConcurrentDictionary<string,int> phrases = new ConcurrentDictionary<string,int>();

    List<string> citiesOfUS = new List<string>()
    {
        "Chicago,IL",
        "Los+Angeles,CA",

        "Montgomery"      + "," +     "AL",  
        "Juneau"          + "," +     "AK",  
        "Phoenix"         + "," +     "AZ",  
        "Little+Rock"     + "," +     "AR",  
        "Sacramento"      + "," +     "CA",  
        "Denver"          + "," +     "CO",  
        "Hartford"        + "," +     "CT",  
        "Dover"           + "," +     "DE",  
        "Tallahassee"     + "," +     "FL",  
        "Atlanta"         + "," +     "GA",  
        "Honolulu"        + "," +     "HI",  
        "Boise"           + "," +     "ID",  
        "Springfield"     + "," +     "IL",  
        "Indianapolis"    + "," +     "IN",  
        "Des+Moines"      + "," +     "IA",  
        "Topeka"          + "," +     "KS",  
        "Frankfort"       + "," +     "KY",  
        "Baton+Rouge"     + "," +     "LA",  
        "Augusta"         + "," +     "ME",  
        "Annapolis"       + "," +     "MD",  
        "Boston"          + "," +     "MA",  
        "Lansing"         + "," +     "MI",  
        "St.+Paul"        + "," +     "MN",  
        "Jackson"         + "," +     "MS",  
        "Jefferson+City"  + "," +     "MO",  
        "Helena"          + "," +     "MT",  
        "Lincoln"         + "," +     "NE",  
        "Carson+City"     + "," +     "NV",  
        "Concord"         + "," +     "NH",  
        "Trenton"         + "," +     "NJ",  
        "Santa+Fe"        + "," +     "NM",  
        "Albany"          + "," +     "NY",  
        "Raleigh"         + "," +     "NC",  
        "Bismarck"        + "," +     "ND",  
        "Columbus"        + "," +     "OH",  
        "Oklahoma+City"   + "," +     "OK",  
        "Salem"           + "," +     "OR",  
        "Harrisburg"      + "," +     "PA",  
        "Providence"      + "," +     "RI",  
        "Columbia"        + "," +     "SC",  
        "Pierre"          + "," +     "SD",  
        "Nashville"       + "," +     "TN",  
        "Austin"          + "," +     "TX",  
        "Salt+Lake+City"  + "," +     "UT",  
        "Montpelier"      + "," +     "VT",  
        "Richmond"        + "," +     "VA",  
        "Olympia"         + "," +     "WA",  
        "Charleston"      + "," +     "WV",  
        "Madison"         + "," +     "WI",  
        "Cheyenne"        + "," +     "WY"  

    };

    Parallel.ForEach(citiesOfUS, (string origin) =>
    {
        foreach (string destination in citiesOfUS)
        {
            string json = new WebClient().DownloadString("http://maps.googleapis.com/maps/api/directions/xml?origin=" + origin + "&destination=" + destination + "&sensor=false");

            bool shouldExitLoop = false;

            while (!shouldExitLoop)
            {
                int pos1 = json.IndexOf("<html_instructions>");
                if (pos1 == -1) { shouldExitLoop = true; break; }

                int pos2 = json.IndexOf("</html_instructions>");
                if (pos2 == -1) { shouldExitLoop = true; break; }

                string subString = json.Substring(pos1 + 19, pos2 - pos1 - 19);

                json = json.Substring(pos2 + 20);

                int posB1 = subString.IndexOf("&lt;b");

                while (posB1 != -1)
                {
                    int posB2 = subString.IndexOf("&lt;/b");

                    string part1 = subString.Substring(0, posB1);
                    string part2 = subString.Substring(posB2 + 6);

                    subString = part1 + " SYM " + part2;

                    posB1 = subString.IndexOf("&lt;b");
                }

                int posSpace = subString.IndexOf("&gt;");

                while (posSpace != -1)
                {
                    string part1 = subString.Substring(0, posSpace);
                    string part2 = subString.Substring(posSpace + 4);

                    subString = part1 + part2;

                    posSpace = subString.IndexOf("&gt;");
                }

                int posDiv1 = subString.IndexOf("&lt;div");

                while (posDiv1 != -1)
                {
                    int posDiv2 = subString.IndexOf("&lt;/div");

                    string part1 = subString.Substring(0, posDiv1);
                    string part2 = subString.Substring(posDiv2 + 8);

                    subString = part1 + " SYM " + part2;

                    posDiv1 = subString.IndexOf("&lt;div");
                }

                phrases.AddOrUpdate(subString, 1, (key, oldvalue) => oldvalue + 1 );

            }
        }

    });

    string[] lines = phrases.Keys.ToArray();

    Array.Sort(lines);

    System.IO.File.WriteAllLines(@"C:\Users\Xantix\Desktop\WriteLines.txt", lines);            

    return;
} 
```

基本上，这些是您尝试从美国的每个首都到其他每个首都时得到的英语短语。

任何出现在粗体标签之间的东西都被替换为“SYM”这个词，比如左、右、街道名称等。

注意：我删除了出现在 html_instructions 内的 div 之间的内容，因此缺少诸如“部分收费公路”和“正在建设中直到 SomeDate”之类的内容。

随意修改我的代码以将其他城市添加到列表中或添加街道地址等。

# php - 使用托管文件 [WP 插件] 定期运行 Wordpress 导入器

> ID：11661968
> 
> 赞同：0
> 
> 时间：2012-07-26T03:33:24.373
> 
> 标签：php, import, automation, wordpress

所以我有一个从数据源创建 WXR（Wordpress eXtended RSS）/XML 文件的脚本。Wordpress 有一个插件可以导入 WXR 文件，但它需要我手动进入并选择文件。我想要做的是每隔一小时（或我选择的时间段）让 Wordpress Importer 使用托管在同一站点上的文件运行。

将不胜感激任何提示或帮助。Wordpress Importer 的代码可能是一种选择，但我不知道如何为此修改它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:36:31.073

我不知道是否有更优雅的方法，但如果我赶时间，我会这样做：

获取 Wordpress 插件代码，然后修改它，以便您可以从[PHP CLI](http://php.net/manual/en/features.commandline.php)运行它。这将需要一些逆向工程来弄清楚他们的代码到底在做什么。然后，我会设置一个[`cron`](http://linux.die.net/man/8/cron)作业每小时（或其他任何时间）运行并执行该 PHP 脚本。

# clojure - 在我的 src/ 中扩展一个库

> ID：11661972
> 
> 赞同：2
> 
> 时间：2012-07-26T03:34:09.937
> 
> 标签：clojure, namespaces, clojurescript

我正在寻找扩展 jayq 库（在 git + leingitdeps 上分叉不是一个选项）。我该怎么做？

我的项目布局看起来像这样

*   项目
    *   源代码
        *   应用程序
        *   周杰伦
            *   核心.cljs

其中 core.cljs 应该包含我对 jayq.core 的新方法。然后我的应用程序尝试加载 jayq.core （它确实如此，但没有我的额外方法）

但是这不起作用，我做错了什么？

谢谢！

更新：

jayq 通过 lein deps 包含在内。我只是知道该方法在 js 控制台中不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:49:46.443

我有一个名为 bene-cmp 的应用程序。它比较两个报告并找出差异。我包含以下信息来表示在使用`lein new bene-cmp`. 希望这将为您提供一些可以比较您的项目布局的东西。

这是带有相关文件的粗略的 bene-cmp 目录结构。请注意，创建了在项目级别和`lein new bene-cmp`目录中命名的目录。`bene-cmp``bene_cmp``src`

```
./bene-cmp/
   project.clj
   .metadata/
   src/
     bene_cmp/
             core.clj
   test/
   lib/
   classes/ 
```

这是我的 project.clj

```
(defproject bene-cmp "1.0.4-SNAPSHOT"
  :description "This is the main benetrak/GIC comparison program."
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [org.clojure/tools.cli "0.1.0"]
                 [clojure-csv/clojure-csv "1.3.2"]
                 [org.clojure/data.csv "0.1.2"]
                 [bene-csv "1.0.4-SNAPSHOT"]
                 [util "1.0.2-SNAPSHOT"]]

  :omit-source true
  :main bene-cmp.core) 
```

core.clj 在 中`src/bene_cmp`，其头文件如下：

```
(ns bene-cmp.core
  ^{:author "Charles M. Norton",
    :doc "bene-cmp is the main program to compare two .csv reports.
        Created on March 14, 2012"}
  (:gen-class)
  (:use [clojure.tools.cli])
  (:require [clojure.string :as cstr])
  (:require [bene-csv.core :as bcsv])
  (:require [util.core :as utl])
  (:require [clojure.data.csv :as csv]
            [clojure.java.io :as io])
  (:use clojure-csv.core)
  (:import java.util.Date)
  (:import java.io.File)) 
```

# javascript - Selenium Web Driver 访问 Jquery 中的 Javascript 全局变量

> ID：11661983
> 
> 赞同：0
> 
> 时间：2012-07-26T03:35:04.930
> 
> 标签：javascript, jquery, python, selenium, functional-testing

我正在尝试使用 Selenium 在 Python 中运行功能测试，并且我想检索已在某个页面上声明的 Javascript 中的全局变量的值。

通常`browser.execute_script("return globalVar;")`工作正常，但是这个变量是在 中声明的`$(document).ready(function(){`，而 Selenium 找不到它。

所以 Selenium 可以在声明如下时返回变量：

```
var globalvar = 0;
$(document).ready(function(){
}); 
```

但不是这样：

```
$(document).ready(function(){
    var globalvar = 0;
}); 
```

无论如何我可以使用 Selenium 从 Jquery 文档中返回 javascript 全局变量的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T03:39:17.567

这不是一个全局变量。它在匿名函数的范围内是本地的。所以不，你不能访问它。

# java - 如何从 JButton 的 ActionListener 内部从 JFrame 中删除 JButton？

> ID：11661984
> 
> 赞同：2
> 
> 时间：2012-07-26T03:35:05.150
> 
> 标签：java, swing, jframe, jbutton

在编写我的 Swing 应用程序时，我总是遇到这个问题，我想我最终会得到一个明确的答案，而不是玩弄它直到我让它工作......

我有一个 JFrame。在这个 JFrame 里面是一个 JButton。在 ActionListener 中，我想几乎清空 JFrame，留下一两个组件（包括删除 JButton）。然后应用程序冻结，因为在 ActionListener 完成之前您无法删除该组件。我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T03:42:42.853

删除组件时不要忘记调用容器，`validate()`并且应该可以正常工作。`repaint()`

```
import java.awt.Component;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class RemoveDemo {

    static class RemoveAction extends AbstractAction{
        private Container container;

        public RemoveAction(Container container){
            super("Remove me");
            this.container = container;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            container.remove((Component) e.getSource());
            container.validate();
            container.repaint();    
        }
    }

    private static void createAndShowGUI() {
        final JFrame frame = new JFrame("Demo");
        frame.setLayout(new FlowLayout());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        RemoveAction action = new RemoveAction(frame);
        frame.add(new JButton(action));
        frame.add(new JButton(action));

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T03:48:45.250

用于在事件队列中[`EventQueue.invokeLater()`](http://docs.oracle.com/javase/7/docs/api/java/awt/EventQueue.html#invokeLater%28java.lang.Runnable%29)添加一个合适的。`Runnable`它“将在处理完所有未决事件后发生”。

# android - 如何在图像中放置声音并防止触摸时声音加倍？

> ID：11661991
> 
> 赞同：0
> 
> 时间：2012-07-26T03:35:51.293
> 
> 标签：android, android-layout

我正在做一个需要同时触摸图像并为每个图像产生声音的应用程序。到目前为止，我已经完成了使图像被触摸并会产生声音的工作。但不幸的是，每次触摸它都会发出双重声音。而且当它被触摸然后拖动到整个屏幕时，声音仍然播放。我已经尝试研究设置边界，以便我可以进行多点触控，但我没有运气。所以我的主要问题是：如何在我的布局中设置多点触控？并且声音不加倍。

# ios - 一侧歧管的正常失配

> ID：11661997
> 
> 赞同：1
> 
> 时间：2012-07-26T03:36:53.480
> 
> 标签：ios, opengl-es, 3d, lighting

最近我在读一本名为*iPhone 3D Programming*的书。按照它的示例，我发现了一个非常令人困惑的问题，即我的代码有“照明错位”（或者它可能有一个正式的名称）和“克莱因瓶”。

![克莱因瓶](../Images/e73c664793c5c2ad8ef49d9c43ddc325.png)

左边是正确的照明（来自本书的源代码）。正确的是我的版本。这是示例和我的示例之间的区别。

```
diff --git a/Classes/ApplicationEngine.cpp b/Classes/ApplicationEngine.cpp
index c3ddd05..68f8b36 100644
--- a/Classes/ApplicationEngine.cpp
+++ b/Classes/ApplicationEngine.cpp
@@ -11,8 +11,6 @@
 #include <algorithm>

 using namespace std;
-namespace ParametricViewer {
-  

 static const int Surface_Count = 6;
 static const int Button_Count = Surface_Count - 1;
@@ -54,7 +52,7 @@ private:
   Animation _animation;
 };

-IApplicationEngine* CreateApplicationEngine(IRenderingEngine* renderingEngine) {
+IApplicationEngine* createApplicationEngine(IRenderingEngine* renderingEngine) {
   return new ApplicationEngine(renderingEngine);
 }

@@ -211,4 +209,3 @@ int ApplicationEngine::mapToButton(ivec2 touchpint) const {
   return buttonIndex;
 }

-}
\ No newline at end of file
diff --git a/Classes/GLView.mm b/Classes/GLView.mm
index 0eeedf6..966041b 100644
--- a/Classes/GLView.mm
+++ b/Classes/GLView.mm
@@ -35,10 +35,10 @@ const BOOL ForceES1 = YES;
             m_renderingEngine = SolidES1::createRenderingEngine();
         } else {
             NSLog(@"Using OpenGL ES 2.0");
-            m_renderingEngine = SolidES2::createRenderingEngine();
+            m_renderingEngine = ES2::createRenderingEngine();
         }

-        m_applicationEngine = ParametricViewer::CreateApplicationEngine(m_renderingEngine);
+        m_applicationEngine = createApplicationEngine(m_renderingEngine);

         [m_context
             renderbufferStorage:GL_RENDERBUFFER
diff --git a/Classes/Interfaces.hpp b/Classes/Interfaces.hpp
index 1f9b129..6bbf0d0 100644
--- a/Classes/Interfaces.hpp
+++ b/Classes/Interfaces.hpp
@@ -58,9 +58,7 @@ namespace SolidES1 {
   IRenderingEngine* createRenderingEngine();
 }

-namespace SolidES2 {
+namespace ES2 {
   IRenderingEngine* createRenderingEngine();
 }
-
-namespace ParametricViewer { IApplicationEngine* CreateApplicationEngine(IRenderingEngine*); }
 #endif
diff --git a/Classes/ParametricEquations.hpp b/Classes/ParametricEquations.hpp
index f06a0a3..ec2942a 100644
--- a/Classes/ParametricEquations.hpp
+++ b/Classes/ParametricEquations.hpp
@@ -4,7 +4,7 @@ class Cone : public ParametricSurface {
 public:
   Cone(float height, float radius) : _height(height), _radius(radius)
   {
-    ParametricInterval interval = { ivec2(20, 20), vec2(TwoPi, 1), vec2(30, 20) };
+    ParametricInterval interval = { ivec2(20, 20), vec2(TWO_PI, 1), vec2(30, 20) };
     setInterval(interval);
   }
   vec3 evaluate(const vec2& domain) const
@@ -24,7 +24,7 @@ class Sphere : public ParametricSurface {
 public:
   Sphere(float radius) : _radius(radius)
   {
-    ParametricInterval interval = { ivec2(20, 20), vec2(Pi, TwoPi), vec2(20, 35) };
+    ParametricInterval interval = { ivec2(20, 20), vec2(PI, TWO_PI), vec2(20, 35) };
     setInterval(interval);
   }
   vec3 evaluate(const vec2& domain) const
@@ -45,7 +45,7 @@ public:
   _majorRadius(majorRadius),
   _minorRadius(minorRadius)
   {
-    ParametricInterval interval = { ivec2(20, 20), vec2(TwoPi, TwoPi), vec2(40, 10) };
+    ParametricInterval interval = { ivec2(20, 20), vec2(TWO_PI, TWO_PI), vec2(40, 10) };
     setInterval(interval);
   }
   vec3 evaluate(const vec2& domain) const
@@ -67,7 +67,7 @@ class TrefoilKnot : public ParametricSurface {
 public:
   TrefoilKnot(float scale) : _scale(scale)
   {
-    ParametricInterval interval = { ivec2(60, 15), vec2(TwoPi, TwoPi), vec2(100, 8) };
+    ParametricInterval interval = { ivec2(60, 15), vec2(TWO_PI, TWO_PI), vec2(100, 8) };
     setInterval(interval);
   }
   vec3 evaluate(const vec2& domain) const
@@ -76,7 +76,7 @@ public:
     const float b = 0.3f;
     const float c = 0.5f;
     const float d = 0.1f;
-    float u = (TwoPi - domain.x) * 2;
+    float u = (TWO_PI - domain.x) * 2;
     float v = domain.y;

     float r = a + b * cos(1.5f * u);
@@ -109,7 +109,7 @@ class MobiusStrip : public ParametricSurface {
 public:
   MobiusStrip(float scale) : _scale(scale)
   {
-    ParametricInterval interval = { ivec2(40, 20), vec2(TwoPi, TwoPi), vec2(40, 15) };
+    ParametricInterval interval = { ivec2(40, 20), vec2(TWO_PI, TWO_PI), vec2(40, 15) };
     setInterval(interval);
   }
   vec3 evaluate(const vec2& domain) const
@@ -141,7 +141,7 @@ class KleinBottle : public ParametricSurface {
 public:
   KleinBottle(float scale) : _scale(scale)
   {
-    ParametricInterval interval = { ivec2(20, 20), vec2(TwoPi, TwoPi), vec2(15, 50) };
+    ParametricInterval interval = { ivec2(20, 20), vec2(TWO_PI, TWO_PI), vec2(15, 50) };
     setInterval(interval);
   }
   vec3 evaluate(const vec2& domain) const
@@ -155,19 +155,19 @@ public:
     float y0  = 8 * sin(u) + (2 * (1 - cos(u) / 2)) * sin(u) * cos(v);

     float x1 = 3 * cos(u) * (1 + sin(u)) +
-    (2 * (1 - cos(u) / 2)) * cos(v + Pi);
+    (2 * (1 - cos(u) / 2)) * cos(v + PI);

     float y1 = 8 * sin(u);

     vec3 range;
-    range.x = u < Pi ? x0 : x1;
-    range.y = u < Pi ? -y0 : -y1;
+    range.x = u < PI ? x0 : x1;
+    range.y = u < PI ? -y0 : -y1;
     range.z = (-2 * (1 - cos(u) / 2)) * sin(v);
     return range * _scale;
   }
-  bool invertNormal(const vec2& domain) const
+  bool InvertNormal(const vec2& domain) const
   {
-    return domain.y > 3 * Pi / 2;
+    return domain.y > 3 * PI / 2;
   }
 private:
   float _scale;
diff --git a/mathLib/Matrix.hpp b/mathLib/Matrix.hpp
index 7b73954..fbbb2d4 100644
--- a/mathLib/Matrix.hpp
+++ b/mathLib/Matrix.hpp
@@ -150,7 +150,7 @@ struct Matrix4 {
   }

   static Matrix4<T> rotate(T degrees) {
-    T radians = degrees * Pi / 180.0f;
+    T radians = degrees * PI / 180.0f;
     T s = std::sin(radians);
     T c = std::cos(radians);

@@ -161,7 +161,7 @@ struct Matrix4 {
   }

   static Matrix4<T> rotate(T degrees, const vec3& axis) {
-    T radians = degrees * Pi / 180.0f;
+    T radians = degrees * PI / 180.0f;
     T s = std::sin(radians);
     T c = std::cos(radians);

diff --git a/mathLib/Quaternion.hpp b/mathLib/Quaternion.hpp
index d1a2a0b..e043760 100644
--- a/mathLib/Quaternion.hpp
+++ b/mathLib/Quaternion.hpp
@@ -53,21 +53,21 @@ inline QuaternionT<T>::QuaternionT(T x, T y, T z, T w) : x(x), y(y), z(z), w(w)
 template <typename T>
 inline QuaternionT<T> QuaternionT<T>:: slerp(T t, const QuaternionT<T>& v1) const {
   const T epsilon = 0.0005f;
-  T DotT = dot(v1);
+  T dotT = dot(v1);

-  if (DotT > 1 - epsilon) {
+  if (dotT > 1 - epsilon) {
     QuaternionT<T> result = v1 + (*this - v1).scaled(t);
     result.normalize();
     return result;
   }

-  if (DotT < 0) DotT = 0;
-  if (DotT > 1) DotT = 1;
+  if (dotT < 0) dotT = 0;
+  if (dotT > 1) dotT = 1;

-  T theta0 = std::acos(DotT);
+  T theta0 = std::acos(dotT);
   T theta = theta0 * t;

-  QuaternionT<T> v2 = (v1 - scaled(DotT));
+  QuaternionT<T> v2 = (v1 - scaled(dotT));
   v2.normalize();

   QuaternionT<T> q = scaled(std::cos(theta)) + v2.scaled(std::sin(theta));
@@ -139,12 +139,12 @@ bool QuaternionT<T>::operator != (const QuaternionT<T>& q) const {
   return !(*this == q);
 }

-// Compute the quaternion that Rotates from a to b, avoiding numerical instability.
+// Compute the quaternion that rotates from a to b, avoiding numerical instability.
 // Taken from "The Shortest Arc Quaternion" by Stan Melax in "Game Programming Gems".
 template <typename T>
 inline QuaternionT<T> QuaternionT<T>::createFromVectors(const Vector3<T>& v0, const Vector3<T>& v1) {
   if (v0 == -v1)
-    return QuaternionT<T>::createFromAxisAngle(vec3(1, 0, 0), Pi);
+    return QuaternionT<T>::createFromAxisAngle(vec3(1, 0, 0), PI);

   Vector3<T> c = v0.cross(v1);
   T d = v0.dot(v1);
@@ -187,7 +187,7 @@ inline void QuaternionT<T>::rotate(const QuaternionT<T>& q2)
   q.y = q1.w * q2.y + q1.y * q2.w + q1.z * q2.x - q1.x * q2.z;
   q.z = q1.w * q2.z + q1.z * q2.w + q1.x * q2.y - q1.y * q2.x;

-  q.Normalize();
+  q.normalize();
   *this = q;
 }

diff --git a/mathLib/Vector.hpp b/mathLib/Vector.hpp
index 781fc64..f43051e 100644
--- a/mathLib/Vector.hpp
+++ b/mathLib/Vector.hpp
@@ -11,15 +11,15 @@

 #include <cmath>

-const float Pi = 4 * std::atan(1.0f);
-const float TwoPi = 2 * Pi;
+const float PI = 4 * std::atan(1.0f);
+const float TWO_PI = 2 * PI;

 template <typename T>
 struct Vector2 {
   Vector2() {}
   Vector2(T x, T y) : x(x), y(y) {}

-  T Dot(const Vector2& v) const {
+  T dot(const Vector2& v) const {
     return x * v.x + y * v.y;
   } 
```

除了字符大小写之外，代码几乎相同。那么我错在哪里？使用 ES1.1 的错误版本任何建议将不胜感激。

[完整的源代码](http://puu.sh/LS1q)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:21:58.543

克莱因瓶的问题在于它不可[定向](http://en.wikipedia.org/wiki/Orientability)：它是一个单侧歧管，因此不可能在整个表面上保持一致的法线。无论您如何选择网格上的法线，总会有一条法线从一侧翻转到另一侧的线。

看起来原来的（金）克莱因瓶可能已经过调整，所以方向不匹配就在瓶子的“嘴”内，隐藏了缺陷而不是修复它。请注意，在您的（灰色）版本中，您可以正确地看到嘴内的表面；在金瓶中，它看起来是黑色的。从您的差异来看，我猜他们可能已经调整了`InvertNormal()`函数中的条件。（不，差异没有显示任何调整——但听起来确实是调整的合乎逻辑的地方......）

让你的克莱因瓶无缝的最简单方法是做一个双盖：每个三角形出现两次，面向相反的方向。这可能比简单地让你的三角形双面更复杂——关键是每个*法线*也必须出现两次，指向相反的方向。最方便的方法是复制顶点，并为相对的（单边）三角形使用一组不同的顶点。

（我没有详细查看您的代码，但要进行双重覆盖，您可能需要将其中一个参数循环扩展 2 倍，并且可能需要做一些诸如区分正四元数和负四元数之类的事情。不要忘记使生成的三角形单边。）